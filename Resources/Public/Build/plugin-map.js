var vk2=(()=>{var xlt=Object.create;var r2=Object.defineProperty,blt=Object.defineProperties,wlt=Object.getOwnPropertyDescriptor,Elt=Object.getOwnPropertyDescriptors,Slt=Object.getOwnPropertyNames,F4=Object.getOwnPropertySymbols,Ilt=Object.getPrototypeOf,h9=Object.prototype.hasOwnProperty,Dle=Object.prototype.propertyIsEnumerable;var Nle=e=>{throw TypeError(e)},jy=Math.pow,d9=(e,t,r)=>t in e?r2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Se=(e,t)=>{for(var r in t||(t={}))h9.call(t,r)&&d9(e,r,t[r]);if(F4)for(var r of F4(t))Dle.call(t,r)&&d9(e,r,t[r]);return e},Ft=(e,t)=>blt(e,Elt(t));var Ole=e=>typeof e=="symbol"?e:e+"",wn=(e,t)=>{var r={};for(var n in e)h9.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&F4)for(var n of F4(e))t.indexOf(n)<0&&Dle.call(e,n)&&(r[n]=e[n]);return r};var M=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),n2=(e,t)=>{for(var r in t)r2(e,r,{get:t[r],enumerable:!0})},Lle=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Slt(t))!h9.call(e,o)&&o!==r&&r2(e,o,{get:()=>t[o],enumerable:!(n=wlt(t,o))||n.enumerable});return e};var Z=(e,t,r)=>(r=e!=null?xlt(Ilt(e)):{},Lle(t||!e||!e.__esModule?r2(r,"default",{value:e,enumerable:!0}):r,e)),Tlt=e=>Lle(r2({},"__esModule",{value:!0}),e);var ct=(e,t,r)=>d9(e,typeof t!="symbol"?t+"":t,r),m9=(e,t,r)=>t.has(e)||Nle("Cannot "+r);var Ep=(e,t,r)=>(m9(e,t,"read from private field"),r?r.call(e):t.get(e)),ng=(e,t,r)=>t.has(e)?Nle("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),qy=(e,t,r,n)=>(m9(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),$l=(e,t,r)=>(m9(e,t,"access private method"),r);var Nt=(e,t,r)=>new Promise((n,o)=>{var i=p=>{try{u(r.next(p))}catch(h){o(h)}},a=p=>{try{u(r.throw(p))}catch(h){o(h)}},u=p=>p.done?n(p.value):Promise.resolve(p.value).then(i,a);u((r=r.apply(e,t)).next())});var U4=M((E5r,kle)=>{"use strict";var Ple=Object.getOwnPropertySymbols,Mlt=Object.prototype.hasOwnProperty,Clt=Object.prototype.propertyIsEnumerable;function Alt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Dlt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(i){return!1}}kle.exports=Dlt()?Object.assign:function(e,t){for(var r,n=Alt(e),o,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var a in r)Mlt.call(r,a)&&(n[a]=r[a]);if(Ple){o=Ple(r);for(var u=0;u<o.length;u++)Clt.call(r,o[u])&&(n[o[u]]=r[o[u]])}}return n}});var Xle=M(Xn=>{"use strict";var v9=U4(),B_=60103,qle=60106;Xn.Fragment=60107;Xn.StrictMode=60108;Xn.Profiler=60114;var zle=60109,Fle=60110,Ule=60112;Xn.Suspense=60113;var Ble=60115,Vle=60116;typeof Symbol=="function"&&Symbol.for&&(hc=Symbol.for,B_=hc("react.element"),qle=hc("react.portal"),Xn.Fragment=hc("react.fragment"),Xn.StrictMode=hc("react.strict_mode"),Xn.Profiler=hc("react.profiler"),zle=hc("react.provider"),Fle=hc("react.context"),Ule=hc("react.forward_ref"),Xn.Suspense=hc("react.suspense"),Ble=hc("react.memo"),Vle=hc("react.lazy"));var hc,Rle=typeof Symbol=="function"&&Symbol.iterator;function Nlt(e){return e===null||typeof e!="object"?null:(e=Rle&&e[Rle]||e["@@iterator"],typeof e=="function"?e:null)}function o2(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Gle={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Hle={};function V_(e,t,r){this.props=e,this.context=t,this.refs=Hle,this.updater=r||Gle}V_.prototype.isReactComponent={};V_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(o2(85));this.updater.enqueueSetState(this,e,t,"setState")};V_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Wle(){}Wle.prototype=V_.prototype;function y9(e,t,r){this.props=e,this.context=t,this.refs=Hle,this.updater=r||Gle}var _9=y9.prototype=new Wle;_9.constructor=y9;v9(_9,V_.prototype);_9.isPureReactComponent=!0;var x9={current:null},$le=Object.prototype.hasOwnProperty,Yle={key:!0,ref:!0,__self:!0,__source:!0};function Zle(e,t,r){var n,o={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)$le.call(t,n)&&!Yle.hasOwnProperty(n)&&(o[n]=t[n]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var p=Array(u),h=0;h<u;h++)p[h]=arguments[h+2];o.children=p}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)o[n]===void 0&&(o[n]=u[n]);return{$$typeof:B_,type:e,key:i,ref:a,props:o,_owner:x9.current}}function Olt(e,t){return{$$typeof:B_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function b9(e){return typeof e=="object"&&e!==null&&e.$$typeof===B_}function Llt(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var jle=/\/+/g;function g9(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Llt(""+e.key):t.toString(36)}function V4(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case B_:case qle:a=!0;}}if(a)return a=e,o=o(a),e=n===""?"."+g9(a,0):n,Array.isArray(o)?(r="",e!=null&&(r=e.replace(jle,"$&/")+"/"),V4(o,t,r,"",function(h){return h})):o!=null&&(b9(o)&&(o=Olt(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(jle,"$&/")+"/")+e)),t.push(o)),1;if(a=0,n=n===""?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){i=e[u];var p=n+g9(i,u);a+=V4(i,t,r,p,o)}else if(p=Nlt(e),typeof p=="function")for(e=p.call(e),u=0;!(i=e.next()).done;)i=i.value,p=n+g9(i,u++),a+=V4(i,t,r,p,o);else if(i==="object")throw t=""+e,Error(o2(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function B4(e,t,r){if(e==null)return e;var n=[],o=0;return V4(e,n,"","",function(i){return t.call(r,i,o++)}),n}function Plt(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var Kle={current:null};function ih(){var e=Kle.current;if(e===null)throw Error(o2(321));return e}var klt={ReactCurrentDispatcher:Kle,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:x9,IsSomeRendererActing:{current:!1},assign:v9};Xn.Children={map:B4,forEach:function(e,t,r){B4(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return B4(e,function(){t++}),t},toArray:function(e){return B4(e,function(t){return t})||[]},only:function(e){if(!b9(e))throw Error(o2(143));return e}};Xn.Component=V_;Xn.PureComponent=y9;Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=klt;Xn.cloneElement=function(e,t,r){if(e==null)throw Error(o2(267,e));var n=v9({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=x9.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(p in t)$le.call(t,p)&&!Yle.hasOwnProperty(p)&&(n[p]=t[p]===void 0&&u!==void 0?u[p]:t[p])}var p=arguments.length-2;if(p===1)n.children=r;else if(1<p){u=Array(p);for(var h=0;h<p;h++)u[h]=arguments[h+2];n.children=u}return{$$typeof:B_,type:e.type,key:o,ref:i,props:n,_owner:a}};Xn.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:Fle,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:zle,_context:e},e.Consumer=e};Xn.createElement=Zle;Xn.createFactory=function(e){var t=Zle.bind(null,e);return t.type=e,t};Xn.createRef=function(){return{current:null}};Xn.forwardRef=function(e){return{$$typeof:Ule,render:e}};Xn.isValidElement=b9;Xn.lazy=function(e){return{$$typeof:Vle,_payload:{_status:-1,_result:e},_init:Plt}};Xn.memo=function(e,t){return{$$typeof:Ble,type:e,compare:t===void 0?null:t}};Xn.useCallback=function(e,t){return ih().useCallback(e,t)};Xn.useContext=function(e,t){return ih().useContext(e,t)};Xn.useDebugValue=function(){};Xn.useEffect=function(e,t){return ih().useEffect(e,t)};Xn.useImperativeHandle=function(e,t,r){return ih().useImperativeHandle(e,t,r)};Xn.useLayoutEffect=function(e,t){return ih().useLayoutEffect(e,t)};Xn.useMemo=function(e,t){return ih().useMemo(e,t)};Xn.useReducer=function(e,t,r){return ih().useReducer(e,t,r)};Xn.useRef=function(e){return ih().useRef(e)};Xn.useState=function(e){return ih().useState(e)};Xn.version="17.0.2"});var we=M((I5r,Jle)=>{"use strict";Jle.exports=Xle()});var oue=M(go=>{"use strict";var H_,s2,$4,C9;typeof performance=="object"&&typeof performance.now=="function"?(Qle=performance,go.unstable_now=function(){return Qle.now()}):(w9=Date,eue=w9.now(),go.unstable_now=function(){return w9.now()-eue});var Qle,w9,eue;typeof window=="undefined"||typeof MessageChannel!="function"?(G_=null,E9=null,S9=function(){if(G_!==null)try{var e=go.unstable_now();G_(!0,e),G_=null}catch(t){throw setTimeout(S9,0),t}},H_=function(e){G_!==null?setTimeout(H_,0,e):(G_=e,setTimeout(S9,0))},s2=function(e,t){E9=setTimeout(e,t)},$4=function(){clearTimeout(E9)},go.unstable_shouldYield=function(){return!1},C9=go.unstable_forceFrameRate=function(){}):(tue=window.setTimeout,rue=window.clearTimeout,typeof console!="undefined"&&(nue=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof nue!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),i2=!1,a2=null,G4=-1,I9=5,T9=0,go.unstable_shouldYield=function(){return go.unstable_now()>=T9},C9=function(){},go.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I9=0<e?Math.floor(1e3/e):5},M9=new MessageChannel,H4=M9.port2,M9.port1.onmessage=function(){if(a2!==null){var e=go.unstable_now();T9=e+I9;try{a2(!0,e)?H4.postMessage(null):(i2=!1,a2=null)}catch(t){throw H4.postMessage(null),t}}else i2=!1},H_=function(e){a2=e,i2||(i2=!0,H4.postMessage(null))},s2=function(e,t){G4=tue(function(){e(go.unstable_now())},t)},$4=function(){rue(G4),G4=-1});var G_,E9,S9,tue,rue,nue,i2,a2,G4,I9,T9,M9,H4;function A9(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(o!==void 0&&0<W4(o,t))e[n]=t,e[r]=o,r=n;else break e}}function Sf(e){return e=e[0],e===void 0?null:e}function Y4(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,a=e[i],u=i+1,p=e[u];if(a!==void 0&&0>W4(a,r))p!==void 0&&0>W4(p,a)?(e[n]=p,e[u]=r,n=u):(e[n]=a,e[i]=r,n=i);else if(p!==void 0&&0>W4(p,r))e[n]=p,e[u]=r,n=u;else break e}}return t}return null}function W4(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var Sp=[],og=[],Rlt=1,mc=null,js=3,Z4=!1,zy=!1,l2=!1;function D9(e){for(var t=Sf(og);t!==null;){if(t.callback===null)Y4(og);else if(t.startTime<=e)Y4(og),t.sortIndex=t.expirationTime,A9(Sp,t);else break;t=Sf(og)}}function N9(e){if(l2=!1,D9(e),!zy)if(Sf(Sp)!==null)zy=!0,H_(O9);else{var t=Sf(og);t!==null&&s2(N9,t.startTime-e)}}function O9(e,t){zy=!1,l2&&(l2=!1,$4()),Z4=!0;var r=js;try{for(D9(t),mc=Sf(Sp);mc!==null&&(!(mc.expirationTime>t)||e&&!go.unstable_shouldYield());){var n=mc.callback;if(typeof n=="function"){mc.callback=null,js=mc.priorityLevel;var o=n(mc.expirationTime<=t);t=go.unstable_now(),typeof o=="function"?mc.callback=o:mc===Sf(Sp)&&Y4(Sp),D9(t)}else Y4(Sp);mc=Sf(Sp)}if(mc!==null)var i=!0;else{var a=Sf(og);a!==null&&s2(N9,a.startTime-t),i=!1}return i}finally{mc=null,js=r,Z4=!1}}var jlt=C9;go.unstable_IdlePriority=5;go.unstable_ImmediatePriority=1;go.unstable_LowPriority=4;go.unstable_NormalPriority=3;go.unstable_Profiling=null;go.unstable_UserBlockingPriority=2;go.unstable_cancelCallback=function(e){e.callback=null};go.unstable_continueExecution=function(){zy||Z4||(zy=!0,H_(O9))};go.unstable_getCurrentPriorityLevel=function(){return js};go.unstable_getFirstCallbackNode=function(){return Sf(Sp)};go.unstable_next=function(e){switch(js){case 1:case 2:case 3:var t=3;break;default:t=js;}var r=js;js=t;try{return e()}finally{js=r}};go.unstable_pauseExecution=function(){};go.unstable_requestPaint=jlt;go.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var r=js;js=e;try{return t()}finally{js=r}};go.unstable_scheduleCallback=function(e,t,r){var n=go.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3;}return o=r+o,e={id:Rlt++,callback:t,priorityLevel:e,startTime:r,expirationTime:o,sortIndex:-1},r>n?(e.sortIndex=r,A9(og,e),Sf(Sp)===null&&e===Sf(og)&&(l2?$4():l2=!0,s2(N9,r-n))):(e.sortIndex=o,A9(Sp,e),zy||Z4||(zy=!0,H_(O9))),e};go.unstable_wrapCallback=function(e){var t=js;return function(){var r=js;js=t;try{return e.apply(this,arguments)}finally{js=r}}}});var aue=M((M5r,iue)=>{"use strict";iue.exports=oue()});var Wfe=M(bc=>{"use strict";var BN=we(),vi=U4(),ka=aue();function Gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!BN)throw Error(Gt(227));var _ce=new Set,q2={};function Ky(e,t){px(e,t),px(e+"Capture",t)}function px(e,t){for(q2[e]=t,e=0;e<t.length;e++)_ce.add(t[e])}var fh=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),qlt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sue=Object.prototype.hasOwnProperty,lue={},uue={};function zlt(e){return sue.call(uue,e)?!0:sue.call(lue,e)?!1:qlt.test(e)?uue[e]=!0:(lue[e]=!0,!1)}function Flt(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function Ult(e,t,r,n){if(t===null||typeof t=="undefined"||Flt(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function xl(e,t,r,n,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var is={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){is[e]=new xl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];is[t]=new xl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){is[e]=new xl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){is[e]=new xl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){is[e]=new xl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){is[e]=new xl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){is[e]=new xl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){is[e]=new xl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){is[e]=new xl(e,5,!1,e.toLowerCase(),null,!1,!1)});var U7=/[\-:]([a-z])/g;function B7(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(U7,B7);is[t]=new xl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(U7,B7);is[t]=new xl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(U7,B7);is[t]=new xl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){is[e]=new xl(e,1,!1,e.toLowerCase(),null,!1,!1)});is.xlinkHref=new xl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){is[e]=new xl(e,1,!1,e.toLowerCase(),null,!0,!0)});function V7(e,t,r,n){var o=is.hasOwnProperty(t)?is[t]:null,i=o!==null?o.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");i||(Ult(t,r,o,n)&&(r=null),n||o===null?zlt(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Xy=BN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b2=60103,Uy=60106,ag=60107,G7=60108,T2=60114,H7=60109,W7=60110,VN=60112,M2=60113,_N=60120,GN=60115,$7=60116,Y7=60121,Z7=60128,xce=60129,K7=60130,t7=60131;typeof Symbol=="function"&&Symbol.for&&(va=Symbol.for,b2=va("react.element"),Uy=va("react.portal"),ag=va("react.fragment"),G7=va("react.strict_mode"),T2=va("react.profiler"),H7=va("react.provider"),W7=va("react.context"),VN=va("react.forward_ref"),M2=va("react.suspense"),_N=va("react.suspense_list"),GN=va("react.memo"),$7=va("react.lazy"),Y7=va("react.block"),va("react.scope"),Z7=va("react.opaque.id"),xce=va("react.debug_trace_mode"),K7=va("react.offscreen"),t7=va("react.legacy_hidden"));var va,cue=typeof Symbol=="function"&&Symbol.iterator;function u2(e){return e===null||typeof e!="object"?null:(e=cue&&e[cue]||e["@@iterator"],typeof e=="function"?e:null)}var L9;function w2(e){if(L9===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);L9=t&&t[1]||""}return`
`+L9+e}var P9=!1;function K4(e,t){if(!e||P9)return"";P9=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var n=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){n=p}e.call(t.prototype)}}else{try{throw Error()}catch(p){n=p}e()}}catch(p){if(p&&n&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),i=n.stack.split(`
`),a=o.length-1,u=i.length-1;1<=a&&0<=u&&o[a]!==i[u];)u--;for(;1<=a&&0<=u;a--,u--)if(o[a]!==i[u]){if(a!==1||u!==1)do if(a--,u--,0>u||o[a]!==i[u])return`
`+o[a].replace(" at new "," at ");while(1<=a&&0<=u);break}}}finally{P9=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?w2(e):""}function Blt(e){switch(e.tag){case 5:return w2(e.type);case 16:return w2("Lazy");case 13:return w2("Suspense");case 19:return w2("SuspenseList");case 0:case 2:case 15:return e=K4(e.type,!1),e;case 11:return e=K4(e.type.render,!1),e;case 22:return e=K4(e.type._render,!1),e;case 1:return e=K4(e.type,!0),e;default:return"";}}function rx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ag:return"Fragment";case Uy:return"Portal";case T2:return"Profiler";case G7:return"StrictMode";case M2:return"Suspense";case _N:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case W7:return(e.displayName||"Context")+".Consumer";case H7:return(e._context.displayName||"Context")+".Provider";case VN:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case GN:return rx(e.type);case Y7:return rx(e._render);case $7:t=e._payload,e=e._init;try{return rx(e(t))}catch(r){}}return null}function yg(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function bce(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Vlt(e){var t=bce(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function X4(e){e._valueTracker||(e._valueTracker=Vlt(e))}function wce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=bce(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function xN(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function r7(e,t){var r=t.checked;return vi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function fue(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=yg(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ece(e,t){t=t.checked,t!=null&&V7(e,"checked",t,!1)}function n7(e,t){Ece(e,t);var r=yg(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?o7(e,t.type,r):t.hasOwnProperty("defaultValue")&&o7(e,t.type,yg(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function pue(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function o7(e,t,r){(t!=="number"||xN(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function Glt(e){var t="";return BN.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function i7(e,t){return e=vi({children:void 0},t),(t=Glt(t.children))&&(e.children=t),e}function nx(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+yg(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function a7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Gt(91));return vi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function due(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Gt(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Gt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:yg(r)}}function Sce(e,t){var r=yg(t.value),n=yg(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function hue(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var s7={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Ice(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function l7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ice(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var J4,Tce=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!==s7.svg||"innerHTML"in e)e.innerHTML=t;else{for(J4=J4||document.createElement("div"),J4.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=J4.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function z2(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var C2={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hlt=["Webkit","ms","Moz","O"];Object.keys(C2).forEach(function(e){Hlt.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),C2[t]=C2[e]})});function Mce(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||C2.hasOwnProperty(e)&&C2[e]?(""+t).trim():t+"px"}function Cce(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Mce(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var Wlt=vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function u7(e,t){if(t){if(Wlt[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Gt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Gt(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Gt(62))}}function c7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function X7(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var f7=null,ox=null,ix=null;function mue(e){if(e=Q2(e)){if(typeof f7!="function")throw Error(Gt(280));var t=e.stateNode;t&&(t=KN(t),f7(e.stateNode,e.type,t))}}function Ace(e){ox?ix?ix.push(e):ix=[e]:ox=e}function Dce(){if(ox){var e=ox,t=ix;if(ix=ox=null,mue(e),t)for(e=0;e<t.length;e++)mue(t[e])}}function J7(e,t){return e(t)}function Nce(e,t,r,n,o){return e(t,r,n,o)}function Q7(){}var Oce=J7,By=!1,k9=!1;function eU(){(ox!==null||ix!==null)&&(Q7(),Dce())}function $lt(e,t,r){if(k9)return e(t,r);k9=!0;try{return Oce(e,t,r)}finally{k9=!1,eU()}}function F2(e,t){var r=e.stateNode;if(r===null)return null;var n=KN(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1;}if(e)return null;if(r&&typeof r!="function")throw Error(Gt(231,t,typeof r));return r}var p7=!1;if(fh)try{W_={},Object.defineProperty(W_,"passive",{get:function(){p7=!0}}),window.addEventListener("test",W_,W_),window.removeEventListener("test",W_,W_)}catch(e){p7=!1}var W_;function Ylt(e,t,r,n,o,i,a,u,p){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(g){this.onError(g)}}var A2=!1,bN=null,wN=!1,d7=null,Zlt={onError:function(e){A2=!0,bN=e}};function Klt(e,t,r,n,o,i,a,u,p){A2=!1,bN=null,Ylt.apply(Zlt,arguments)}function Xlt(e,t,r,n,o,i,a,u,p){if(Klt.apply(this,arguments),A2){if(A2){var h=bN;A2=!1,bN=null}else throw Error(Gt(198));wN||(wN=!0,d7=h)}}function Jy(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Lce(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function gue(e){if(Jy(e)!==e)throw Error(Gt(188))}function Jlt(e){var t=e.alternate;if(!t){if(t=Jy(e),t===null)throw Error(Gt(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return gue(o),e;if(i===n)return gue(o),t;i=i.sibling}throw Error(Gt(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,u=o.child;u;){if(u===r){a=!0,r=o,n=i;break}if(u===n){a=!0,n=o,r=i;break}u=u.sibling}if(!a){for(u=i.child;u;){if(u===r){a=!0,r=i,n=o;break}if(u===n){a=!0,n=i,r=o;break}u=u.sibling}if(!a)throw Error(Gt(189))}}if(r.alternate!==n)throw Error(Gt(190))}if(r.tag!==3)throw Error(Gt(188));return r.stateNode.current===r?e:t}function Pce(e){if(e=Jlt(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function vue(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var kce,tU,Rce,jce,h7=!1,Ip=[],cg=null,fg=null,pg=null,U2=new Map,B2=new Map,c2=[],yue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function m7(e,t,r,n,o){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:o,targetContainers:[n]}}function _ue(e,t){switch(e){case"focusin":case"focusout":cg=null;break;case"dragenter":case"dragleave":fg=null;break;case"mouseover":case"mouseout":pg=null;break;case"pointerover":case"pointerout":U2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":B2.delete(t.pointerId);}}function f2(e,t,r,n,o,i){return e===null||e.nativeEvent!==i?(e=m7(t,r,n,o,i),t!==null&&(t=Q2(t),t!==null&&tU(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Qlt(e,t,r,n,o){switch(t){case"focusin":return cg=f2(cg,e,t,r,n,o),!0;case"dragenter":return fg=f2(fg,e,t,r,n,o),!0;case"mouseover":return pg=f2(pg,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return U2.set(i,f2(U2.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,B2.set(i,f2(B2.get(i)||null,e,t,r,n,o)),!0;}return!1}function eut(e){var t=Vy(e.target);if(t!==null){var r=Jy(t);if(r!==null){if(t=r.tag,t===13){if(t=Lce(r),t!==null){e.blockedOn=t,jce(e.lanePriority,function(){ka.unstable_runWithPriority(e.priority,function(){Rce(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function uN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=iU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=Q2(r),t!==null&&tU(t),e.blockedOn=r,!1;t.shift()}return!0}function xue(e,t,r){uN(e)&&r.delete(t)}function tut(){for(h7=!1;0<Ip.length;){var e=Ip[0];if(e.blockedOn!==null){e=Q2(e.blockedOn),e!==null&&kce(e);break}for(var t=e.targetContainers;0<t.length;){var r=iU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Ip.shift()}cg!==null&&uN(cg)&&(cg=null),fg!==null&&uN(fg)&&(fg=null),pg!==null&&uN(pg)&&(pg=null),U2.forEach(xue),B2.forEach(xue)}function p2(e,t){e.blockedOn===t&&(e.blockedOn=null,h7||(h7=!0,ka.unstable_scheduleCallback(ka.unstable_NormalPriority,tut)))}function qce(e){function t(o){return p2(o,e)}if(0<Ip.length){p2(Ip[0],e);for(var r=1;r<Ip.length;r++){var n=Ip[r];n.blockedOn===e&&(n.blockedOn=null)}}for(cg!==null&&p2(cg,e),fg!==null&&p2(fg,e),pg!==null&&p2(pg,e),U2.forEach(t),B2.forEach(t),r=0;r<c2.length;r++)n=c2[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<c2.length&&(r=c2[0],r.blockedOn===null);)eut(r),r.blockedOn===null&&c2.shift()}function Q4(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var K_={animationend:Q4("Animation","AnimationEnd"),animationiteration:Q4("Animation","AnimationIteration"),animationstart:Q4("Animation","AnimationStart"),transitionend:Q4("Transition","TransitionEnd")},R9={},zce={};fh&&(zce=document.createElement("div").style,"AnimationEvent"in window||(delete K_.animationend.animation,delete K_.animationiteration.animation,delete K_.animationstart.animation),"TransitionEvent"in window||delete K_.transitionend.transition);function HN(e){if(R9[e])return R9[e];if(!K_[e])return e;var t=K_[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in zce)return R9[e]=t[r];return e}var Fce=HN("animationend"),Uce=HN("animationiteration"),Bce=HN("animationstart"),Vce=HN("transitionend"),Gce=new Map,rU=new Map,rut=["abort","abort",Fce,"animationEnd",Uce,"animationIteration",Bce,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Vce,"transitionEnd","waiting","waiting"];function nU(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];o="on"+(o[0].toUpperCase()+o.slice(1)),rU.set(n,t),Gce.set(n,o),Ky(o,[n])}}var nut=ka.unstable_now;nut();var Jo=8;function Y_(e){if(1&e)return Jo=15,1;if(2&e)return Jo=14,2;if(4&e)return Jo=13,4;var t=24&e;return t!==0?(Jo=12,t):e&32?(Jo=11,32):(t=192&e,t!==0?(Jo=10,t):e&256?(Jo=9,256):(t=3584&e,t!==0?(Jo=8,t):e&4096?(Jo=7,4096):(t=4186112&e,t!==0?(Jo=6,t):(t=62914560&e,t!==0?(Jo=5,t):e&67108864?(Jo=4,67108864):e&134217728?(Jo=3,134217728):(t=805306368&e,t!==0?(Jo=2,t):1073741824&e?(Jo=1,1073741824):(Jo=8,e))))))}function out(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function iut(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Gt(358,e));}}function V2(e,t){var r=e.pendingLanes;if(r===0)return Jo=0;var n=0,o=0,i=e.expiredLanes,a=e.suspendedLanes,u=e.pingedLanes;if(i!==0)n=i,o=Jo=15;else if(i=r&134217727,i!==0){var p=i&~a;p!==0?(n=Y_(p),o=Jo):(u&=i,u!==0&&(n=Y_(u),o=Jo))}else i=r&~a,i!==0?(n=Y_(i),o=Jo):u!==0&&(n=Y_(u),o=Jo);if(n===0)return 0;if(n=31-_g(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&!(t&a)){if(Y_(t),o<=Jo)return t;Jo=o}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-_g(t),o=1<<r,n|=e[r],t&=~o;return n}function Hce(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function EN(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Z_(24&~t),e===0?EN(10,t):e;case 10:return e=Z_(192&~t),e===0?EN(8,t):e;case 8:return e=Z_(3584&~t),e===0&&(e=Z_(4186112&~t),e===0&&(e=512)),e;case 2:return t=Z_(805306368&~t),t===0&&(t=268435456),t;}throw Error(Gt(358,e))}function Z_(e){return e&-e}function j9(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function WN(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-_g(t),e[t]=r}var _g=Math.clz32?Math.clz32:lut,aut=Math.log,sut=Math.LN2;function lut(e){return e===0?32:31-(aut(e)/sut|0)|0}var uut=ka.unstable_UserBlockingPriority,cut=ka.unstable_runWithPriority,cN=!0;function fut(e,t,r,n){By||Q7();var o=oU,i=By;By=!0;try{Nce(o,e,t,r,n)}finally{(By=i)||eU()}}function put(e,t,r,n){cut(uut,oU.bind(null,e,t,r,n))}function oU(e,t,r,n){if(cN){var o;if((o=(t&4)===0)&&0<Ip.length&&-1<yue.indexOf(e))e=m7(null,e,t,r,n),Ip.push(e);else{var i=iU(e,t,r,n);if(i===null)o&&_ue(e,n);else{if(o){if(-1<yue.indexOf(e)){e=m7(i,e,t,r,n),Ip.push(e);return}if(Qlt(i,e,t,r,n))return;_ue(e,n)}ofe(e,t,n,null,r)}}}}function iU(e,t,r,n){var o=X7(n);if(o=Vy(o),o!==null){var i=Jy(o);if(i===null)o=null;else{var a=i.tag;if(a===13){if(o=Lce(i),o!==null)return o;o=null}else if(a===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return ofe(e,t,n,o,r),null}var sg=null,aU=null,fN=null;function Wce(){if(fN)return fN;var e,t=aU,r=t.length,n,o="value"in sg?sg.value:sg.textContent,i=o.length;for(e=0;e<r&&t[e]===o[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===o[i-n];n++);return fN=o.slice(e,1<n?1-n:void 0)}function pN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function eN(){return!0}function bue(){return!1}function Vu(e){function t(r,n,o,i,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?eN:bue,this.isPropagationStopped=bue,this}return vi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=eN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=eN)},persist:function(){},isPersistent:eN}),t}var gx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sU=Vu(gx),J2=vi({},gx,{view:0,detail:0}),dut=Vu(J2),q9,z9,d2,$N=vi({},J2,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lU,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==d2&&(d2&&e.type==="mousemove"?(q9=e.screenX-d2.screenX,z9=e.screenY-d2.screenY):z9=q9=0,d2=e),q9)},movementY:function(e){return"movementY"in e?e.movementY:z9}}),wue=Vu($N),hut=vi({},$N,{dataTransfer:0}),mut=Vu(hut),gut=vi({},J2,{relatedTarget:0}),F9=Vu(gut),vut=vi({},gx,{animationName:0,elapsedTime:0,pseudoElement:0}),yut=Vu(vut),_ut=vi({},gx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xut=Vu(_ut),but=vi({},gx,{data:0}),Eue=Vu(but),wut={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Eut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Iut(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Sut[e])?!!t[e]:!1}function lU(){return Iut}var Tut=vi({},J2,{key:function(e){if(e.key){var t=wut[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=pN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Eut[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lU,charCode:function(e){return e.type==="keypress"?pN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?pN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Mut=Vu(Tut),Cut=vi({},$N,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Sue=Vu(Cut),Aut=vi({},J2,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lU}),Dut=Vu(Aut),Nut=vi({},gx,{propertyName:0,elapsedTime:0,pseudoElement:0}),Out=Vu(Nut),Lut=vi({},$N,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Put=Vu(Lut),kut=[9,13,27,32],uU=fh&&"CompositionEvent"in window,D2=null;fh&&"documentMode"in document&&(D2=document.documentMode);var Rut=fh&&"TextEvent"in window&&!D2,$ce=fh&&(!uU||D2&&8<D2&&11>=D2),Iue=" ",Tue=!1;function Yce(e,t){switch(e){case"keyup":return kut.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function Zce(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var X_=!1;function jut(e,t){switch(e){case"compositionend":return Zce(t);case"keypress":return t.which!==32?null:(Tue=!0,Iue);case"textInput":return e=t.data,e===Iue&&Tue?null:e;default:return null;}}function qut(e,t){if(X_)return e==="compositionend"||!uU&&Yce(e,t)?(e=Wce(),fN=aU=sg=null,X_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return $ce&&t.locale!=="ko"?null:t.data;default:return null;}}var zut={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mue(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!zut[e.type]:t==="textarea"}function Kce(e,t,r,n){Ace(n),t=SN(t,"onChange"),0<t.length&&(r=new sU("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var N2=null,G2=null;function Fut(e){tfe(e,0)}function YN(e){var t=Q_(e);if(wce(t))return e}function Uut(e,t){if(e==="change")return t}var Xce=!1;fh&&(fh?(rN="oninput"in document,rN||(U9=document.createElement("div"),U9.setAttribute("oninput","return;"),rN=typeof U9.oninput=="function"),tN=rN):tN=!1,Xce=tN&&(!document.documentMode||9<document.documentMode));var tN,rN,U9;function Cue(){N2&&(N2.detachEvent("onpropertychange",Jce),G2=N2=null)}function Jce(e){if(e.propertyName==="value"&&YN(G2)){var t=[];if(Kce(t,G2,e,X7(e)),e=Fut,By)e(t);else{By=!0;try{J7(e,t)}finally{By=!1,eU()}}}}function But(e,t,r){e==="focusin"?(Cue(),N2=t,G2=r,N2.attachEvent("onpropertychange",Jce)):e==="focusout"&&Cue()}function Vut(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return YN(G2)}function Gut(e,t){if(e==="click")return YN(t)}function Hut(e,t){if(e==="input"||e==="change")return YN(t)}function Wut(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var gc=typeof Object.is=="function"?Object.is:Wut,$ut=Object.prototype.hasOwnProperty;function H2(e,t){if(gc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!$ut.call(t,r[n])||!gc(e[r[n]],t[r[n]]))return!1;return!0}function Aue(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Due(e,t){var r=Aue(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Aue(r)}}function Qce(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Qce(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nue(){for(var e=window,t=xN();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=xN(e.document)}return t}function g7(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Yut=fh&&"documentMode"in document&&11>=document.documentMode,J_=null,v7=null,O2=null,y7=!1;function Oue(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;y7||J_==null||J_!==xN(n)||(n=J_,"selectionStart"in n&&g7(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),O2&&H2(O2,n)||(O2=n,n=SN(v7,"onSelect"),0<n.length&&(t=new sU("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=J_)))}nU("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);nU("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);nU(rut,2);for(B9="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),nN=0;nN<B9.length;nN++)rU.set(B9[nN],0);var B9,nN;px("onMouseEnter",["mouseout","mouseover"]);px("onMouseLeave",["mouseout","mouseover"]);px("onPointerEnter",["pointerout","pointerover"]);px("onPointerLeave",["pointerout","pointerover"]);Ky("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ky("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ky("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ky("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ky("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ky("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var E2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),efe=new Set("cancel close invalid load scroll toggle".split(" ").concat(E2));function Lue(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Xlt(n,t,void 0,e),e.currentTarget=null}function tfe(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var u=n[a],p=u.instance,h=u.currentTarget;if(u=u.listener,p!==i&&o.isPropagationStopped())break e;Lue(o,u,h),i=p}else for(a=0;a<n.length;a++){if(u=n[a],p=u.instance,h=u.currentTarget,u=u.listener,p!==i&&o.isPropagationStopped())break e;Lue(o,u,h),i=p}}}if(wN)throw e=d7,wN=!1,d7=null,e}function si(e,t){var r=afe(t),n=e+"__bubble";r.has(n)||(nfe(t,e,2,!1),r.add(n))}var Pue="_reactListening"+Math.random().toString(36).slice(2);function rfe(e){e[Pue]||(e[Pue]=!0,_ce.forEach(function(t){efe.has(t)||kue(t,!1,e,null),kue(t,!0,e,null)}))}function kue(e,t,r,n){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=r;if(e==="selectionchange"&&r.nodeType!==9&&(i=r.ownerDocument),n!==null&&!t&&efe.has(e)){if(e!=="scroll")return;o|=2,i=n}var a=afe(i),u=e+"__"+(t?"capture":"bubble");a.has(u)||(t&&(o|=4),nfe(i,e,o,t),a.add(u))}function nfe(e,t,r,n){var o=rU.get(t);switch(o===void 0?2:o){case 0:o=fut;break;case 1:o=put;break;default:o=oU;}r=o.bind(null,t,r,e),o=void 0,!p7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function ofe(e,t,r,n,o){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var u=n.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var p=a.tag;if((p===3||p===4)&&(p=a.stateNode.containerInfo,p===o||p.nodeType===8&&p.parentNode===o))return;a=a.return}for(;u!==null;){if(a=Vy(u),a===null)return;if(p=a.tag,p===5||p===6){n=i=a;continue e}u=u.parentNode}}n=n.return}$lt(function(){var h=i,g=X7(r),x=[];e:{var b=Gce.get(e);if(b!==void 0){var T=sU,A=e;switch(e){case"keypress":if(pN(r)===0)break e;case"keydown":case"keyup":T=Mut;break;case"focusin":A="focus",T=F9;break;case"focusout":A="blur",T=F9;break;case"beforeblur":case"afterblur":T=F9;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=wue;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=mut;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Dut;break;case Fce:case Uce:case Bce:T=yut;break;case Vce:T=Out;break;case"scroll":T=dut;break;case"wheel":T=Put;break;case"copy":case"cut":case"paste":T=xut;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Sue;}var L=(t&4)!==0,P=!L&&e==="scroll",k=L?b!==null?b+"Capture":null:b;L=[];for(var q=h,U;q!==null;){U=q;var H=U.stateNode;if(U.tag===5&&H!==null&&(U=H,k!==null&&(H=F2(q,k),H!=null&&L.push(W2(q,H,U)))),P)break;q=q.return}0<L.length&&(b=new T(b,A,null,r,g),x.push({event:b,listeners:L}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",b&&!(t&16)&&(A=r.relatedTarget||r.fromElement)&&(Vy(A)||A[vx]))break e;if((T||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,T?(A=r.relatedTarget||r.toElement,T=h,A=A?Vy(A):null,A!==null&&(P=Jy(A),A!==P||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=h),T!==A)){if(L=wue,H="onMouseLeave",k="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(L=Sue,H="onPointerLeave",k="onPointerEnter",q="pointer"),P=T==null?b:Q_(T),U=A==null?b:Q_(A),b=new L(H,q+"leave",T,r,g),b.target=P,b.relatedTarget=U,H=null,Vy(g)===h&&(L=new L(k,q+"enter",A,r,g),L.target=U,L.relatedTarget=P,H=L),P=H,T&&A)t:{for(L=T,k=A,q=0,U=L;U;U=$_(U))q++;for(U=0,H=k;H;H=$_(H))U++;for(;0<q-U;)L=$_(L),q--;for(;0<U-q;)k=$_(k),U--;for(;q--;){if(L===k||k!==null&&L===k.alternate)break t;L=$_(L),k=$_(k)}L=null}else L=null;T!==null&&Rue(x,b,T,L,!1),A!==null&&P!==null&&Rue(x,P,A,L,!0)}}e:{if(b=h?Q_(h):window,T=b.nodeName&&b.nodeName.toLowerCase(),T==="select"||T==="input"&&b.type==="file")var X=Uut;else if(Mue(b)){if(Xce)X=Hut;else{X=Vut;var ee=But}}else(T=b.nodeName)&&T.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(X=Gut);if(X&&(X=X(e,h))){Kce(x,X,r,g);break e}ee&&ee(e,b,h),e==="focusout"&&(ee=b._wrapperState)&&ee.controlled&&b.type==="number"&&o7(b,"number",b.value)}switch(ee=h?Q_(h):window,e){case"focusin":(Mue(ee)||ee.contentEditable==="true")&&(J_=ee,v7=h,O2=null);break;case"focusout":O2=v7=J_=null;break;case"mousedown":y7=!0;break;case"contextmenu":case"mouseup":case"dragend":y7=!1,Oue(x,r,g);break;case"selectionchange":if(Yut)break;case"keydown":case"keyup":Oue(x,r,g);}var ne;if(uU)e:{switch(e){case"compositionstart":var me="onCompositionStart";break e;case"compositionend":me="onCompositionEnd";break e;case"compositionupdate":me="onCompositionUpdate";break e;}me=void 0}else X_?Yce(e,r)&&(me="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(me="onCompositionStart");me&&($ce&&r.locale!=="ko"&&(X_||me!=="onCompositionStart"?me==="onCompositionEnd"&&X_&&(ne=Wce()):(sg=g,aU="value"in sg?sg.value:sg.textContent,X_=!0)),ee=SN(h,me),0<ee.length&&(me=new Eue(me,e,null,r,g),x.push({event:me,listeners:ee}),ne?me.data=ne:(ne=Zce(r),ne!==null&&(me.data=ne)))),(ne=Rut?jut(e,r):qut(e,r))&&(h=SN(h,"onBeforeInput"),0<h.length&&(g=new Eue("onBeforeInput","beforeinput",null,r,g),x.push({event:g,listeners:h}),g.data=ne))}tfe(x,t)})}function W2(e,t,r){return{instance:e,listener:t,currentTarget:r}}function SN(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=F2(e,r),i!=null&&n.unshift(W2(e,i,o)),i=F2(e,t),i!=null&&n.push(W2(e,i,o))),e=e.return}return n}function $_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rue(e,t,r,n,o){for(var i=t._reactName,a=[];r!==null&&r!==n;){var u=r,p=u.alternate,h=u.stateNode;if(p!==null&&p===n)break;u.tag===5&&h!==null&&(u=h,o?(p=F2(r,i),p!=null&&a.unshift(W2(r,p,u))):o||(p=F2(r,i),p!=null&&a.push(W2(r,p,u)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}function IN(){}var V9=null,G9=null;function ife(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function _7(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var jue=typeof setTimeout=="function"?setTimeout:void 0,Zut=typeof clearTimeout=="function"?clearTimeout:void 0;function cU(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function ax(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function que(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var H9=0;function Kut(e){return{$$typeof:Z7,toString:e,valueOf:e}}var ZN=Math.random().toString(36).slice(2),lg="__reactFiber$"+ZN,TN="__reactProps$"+ZN,vx="__reactContainer$"+ZN,zue="__reactEvents$"+ZN;function Vy(e){var t=e[lg];if(t)return t;for(var r=e.parentNode;r;){if(t=r[vx]||r[lg]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=que(e);e!==null;){if(r=e[lg])return r;e=que(e)}return t}e=r,r=e.parentNode}return null}function Q2(e){return e=e[lg]||e[vx],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Q_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Gt(33))}function KN(e){return e[TN]||null}function afe(e){var t=e[zue];return t===void 0&&(t=e[zue]=new Set),t}var x7=[],ex=-1;function Eg(e){return{current:e}}function li(e){0>ex||(e.current=x7[ex],x7[ex]=null,ex--)}function Pi(e,t){ex++,x7[ex]=e.current,e.current=t}var xg={},Us=Eg(xg),Kl=Eg(!1),$y=xg;function dx(e,t){var r=e.type.contextTypes;if(!r)return xg;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Xl(e){return e=e.childContextTypes,e!=null}function MN(){li(Kl),li(Us)}function Fue(e,t,r){if(Us.current!==xg)throw Error(Gt(168));Pi(Us,t),Pi(Kl,r)}function sfe(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(Gt(108,rx(t)||"Unknown",o));return vi({},r,n)}function dN(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||xg,$y=Us.current,Pi(Us,e),Pi(Kl,Kl.current),!0}function Uue(e,t,r){var n=e.stateNode;if(!n)throw Error(Gt(169));r?(e=sfe(e,t,$y),n.__reactInternalMemoizedMergedChildContext=e,li(Kl),li(Us),Pi(Us,e)):li(Kl),Pi(Kl,r)}var fU=null,Wy=null,Xut=ka.unstable_runWithPriority,pU=ka.unstable_scheduleCallback,b7=ka.unstable_cancelCallback,Jut=ka.unstable_shouldYield,Bue=ka.unstable_requestPaint,w7=ka.unstable_now,Qut=ka.unstable_getCurrentPriorityLevel,XN=ka.unstable_ImmediatePriority,lfe=ka.unstable_UserBlockingPriority,ufe=ka.unstable_NormalPriority,cfe=ka.unstable_LowPriority,ffe=ka.unstable_IdlePriority,W9={},ect=Bue!==void 0?Bue:function(){},ah=null,hN=null,$9=!1,Vue=w7(),zs=1e4>Vue?w7:function(){return w7()-Vue};function hx(){switch(Qut()){case XN:return 99;case lfe:return 98;case ufe:return 97;case cfe:return 96;case ffe:return 95;default:throw Error(Gt(332));}}function pfe(e){switch(e){case 99:return XN;case 98:return lfe;case 97:return ufe;case 96:return cfe;case 95:return ffe;default:throw Error(Gt(332));}}function Yy(e,t){return e=pfe(e),Xut(e,t)}function $2(e,t,r){return e=pfe(e),pU(e,t,r)}function Dp(){if(hN!==null){var e=hN;hN=null,b7(e)}dfe()}function dfe(){if(!$9&&ah!==null){$9=!0;var e=0;try{var t=ah;Yy(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),ah=null}catch(r){throw ah!==null&&(ah=ah.slice(e+1)),pU(XN,Dp),r}finally{$9=!1}}}var tct=Xy.ReactCurrentBatchConfig;function If(e,t){if(e&&e.defaultProps){t=vi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var CN=Eg(null),AN=null,tx=null,DN=null;function dU(){DN=tx=AN=null}function hU(e){var t=CN.current;li(CN),e.type._context._currentValue=t}function hfe(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function sx(e,t){AN=e,DN=tx=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tf=!0),e.firstContext=null)}function _c(e,t){if(DN!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(DN=e,t=1073741823),t={context:e,observedBits:t,next:null},tx===null){if(AN===null)throw Error(Gt(308));tx=t,AN.dependencies={lanes:0,firstContext:t,responders:null}}else tx=tx.next=t;return e._currentValue}var ig=!1;function mU(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function mfe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function dg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function hg(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function Gue(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?o=i=t:i=i.next=t}else o=i=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Y2(e,t,r,n){var o=e.updateQueue;ig=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var p=u,h=p.next;p.next=null,a===null?i=h:a.next=h,a=p;var g=e.alternate;if(g!==null){g=g.updateQueue;var x=g.lastBaseUpdate;x!==a&&(x===null?g.firstBaseUpdate=h:x.next=h,g.lastBaseUpdate=p)}}if(i!==null){x=o.baseState,a=0,g=h=p=null;do{u=i.lane;var b=i.eventTime;if((n&u)===u){g!==null&&(g=g.next={eventTime:b,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var T=e,A=i;switch(u=t,b=r,A.tag){case 1:if(T=A.payload,typeof T=="function"){x=T.call(b,x,u);break e}x=T;break e;case 3:T.flags=T.flags&-4097|64;case 0:if(T=A.payload,u=typeof T=="function"?T.call(b,x,u):T,u==null)break e;x=vi({},x,u);break e;case 2:ig=!0;}}i.callback!==null&&(e.flags|=32,u=o.effects,u===null?o.effects=[i]:u.push(i))}else b={eventTime:b,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},g===null?(h=g=b,p=x):g=g.next=b,a|=u;if(i=i.next,i===null){if(u=o.shared.pending,u===null)break;i=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}while(!0);g===null&&(p=x),o.baseState=p,o.firstBaseUpdate=h,o.lastBaseUpdate=g,tI|=a,e.lanes=a,e.memoizedState=x}}function Hue(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(Gt(191,o));o.call(n)}}}var gfe=new BN.Component().refs;function NN(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:vi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var JN={isMounted:function(e){return(e=e._reactInternals)?Jy(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Bu(),o=mg(e),i=dg(n,o);i.payload=t,r!=null&&(i.callback=r),hg(e,i),gg(e,o,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Bu(),o=mg(e),i=dg(n,o);i.tag=1,i.payload=t,r!=null&&(i.callback=r),hg(e,i),gg(e,o,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Bu(),n=mg(e),o=dg(r,n);o.tag=2,t!=null&&(o.callback=t),hg(e,o),gg(e,n,r)}};function Wue(e,t,r,n,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!H2(r,n)||!H2(o,i):!0}function vfe(e,t,r){var n=!1,o=xg,i=t.contextType;return typeof i=="object"&&i!==null?i=_c(i):(o=Xl(t)?$y:Us.current,n=t.contextTypes,i=(n=n!=null)?dx(e,o):xg),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=JN,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function $ue(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&JN.enqueueReplaceState(t,t.state,null)}function E7(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=gfe,mU(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=_c(i):(i=Xl(t)?$y:Us.current,o.context=dx(e,i)),Y2(e,r,o,n),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(NN(e,t,i,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&JN.enqueueReplaceState(o,o.state,null),Y2(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4)}var oN=Array.isArray;function h2(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Gt(309));var n=r.stateNode}if(!n)throw Error(Gt(147,e));var o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=n.refs;a===gfe&&(a=n.refs={}),i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Gt(284));if(!r._owner)throw Error(Gt(290,e))}return e}function iN(e,t){if(e.type!=="textarea")throw Error(Gt(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function yfe(e){function t(P,k){if(e){var q=P.lastEffect;q!==null?(q.nextEffect=k,P.lastEffect=k):P.firstEffect=P.lastEffect=k,k.nextEffect=null,k.flags=8}}function r(P,k){if(!e)return null;for(;k!==null;)t(P,k),k=k.sibling;return null}function n(P,k){for(P=new Map;k!==null;)k.key!==null?P.set(k.key,k):P.set(k.index,k),k=k.sibling;return P}function o(P,k){return P=wg(P,k),P.index=0,P.sibling=null,P}function i(P,k,q){return P.index=q,e?(q=P.alternate,q!==null?(q=q.index,q<k?(P.flags=2,k):q):(P.flags=2,k)):k}function a(P){return e&&P.alternate===null&&(P.flags=2),P}function u(P,k,q,U){return k===null||k.tag!==6?(k=J9(q,P.mode,U),k.return=P,k):(k=o(k,q),k.return=P,k)}function p(P,k,q,U){return k!==null&&k.elementType===q.type?(U=o(k,q.props),U.ref=h2(P,k,q),U.return=P,U):(U=yN(q.type,q.key,q.props,null,P.mode,U),U.ref=h2(P,k,q),U.return=P,U)}function h(P,k,q,U){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=Q9(q,P.mode,U),k.return=P,k):(k=o(k,q.children||[]),k.return=P,k)}function g(P,k,q,U,H){return k===null||k.tag!==7?(k=fx(q,P.mode,U,H),k.return=P,k):(k=o(k,q),k.return=P,k)}function x(P,k,q){if(typeof k=="string"||typeof k=="number")return k=J9(""+k,P.mode,q),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case b2:return q=yN(k.type,k.key,k.props,null,P.mode,q),q.ref=h2(P,null,k),q.return=P,q;case Uy:return k=Q9(k,P.mode,q),k.return=P,k;}if(oN(k)||u2(k))return k=fx(k,P.mode,q,null),k.return=P,k;iN(P,k)}return null}function b(P,k,q,U){var H=k!==null?k.key:null;if(typeof q=="string"||typeof q=="number")return H!==null?null:u(P,k,""+q,U);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case b2:return q.key===H?q.type===ag?g(P,k,q.props.children,U,H):p(P,k,q,U):null;case Uy:return q.key===H?h(P,k,q,U):null;}if(oN(q)||u2(q))return H!==null?null:g(P,k,q,U,null);iN(P,q)}return null}function T(P,k,q,U,H){if(typeof U=="string"||typeof U=="number")return P=P.get(q)||null,u(k,P,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case b2:return P=P.get(U.key===null?q:U.key)||null,U.type===ag?g(k,P,U.props.children,H,U.key):p(k,P,U,H);case Uy:return P=P.get(U.key===null?q:U.key)||null,h(k,P,U,H);}if(oN(U)||u2(U))return P=P.get(q)||null,g(k,P,U,H,null);iN(k,U)}return null}function A(P,k,q,U){for(var H=null,X=null,ee=k,ne=k=0,me=null;ee!==null&&ne<q.length;ne++){ee.index>ne?(me=ee,ee=null):me=ee.sibling;var ue=b(P,ee,q[ne],U);if(ue===null){ee===null&&(ee=me);break}e&&ee&&ue.alternate===null&&t(P,ee),k=i(ue,k,ne),X===null?H=ue:X.sibling=ue,X=ue,ee=me}if(ne===q.length)return r(P,ee),H;if(ee===null){for(;ne<q.length;ne++)ee=x(P,q[ne],U),ee!==null&&(k=i(ee,k,ne),X===null?H=ee:X.sibling=ee,X=ee);return H}for(ee=n(P,ee);ne<q.length;ne++)me=T(ee,P,ne,q[ne],U),me!==null&&(e&&me.alternate!==null&&ee.delete(me.key===null?ne:me.key),k=i(me,k,ne),X===null?H=me:X.sibling=me,X=me);return e&&ee.forEach(function(Me){return t(P,Me)}),H}function L(P,k,q,U){var H=u2(q);if(typeof H!="function")throw Error(Gt(150));if(q=H.call(q),q==null)throw Error(Gt(151));for(var X=H=null,ee=k,ne=k=0,me=null,ue=q.next();ee!==null&&!ue.done;ne++,ue=q.next()){ee.index>ne?(me=ee,ee=null):me=ee.sibling;var Me=b(P,ee,ue.value,U);if(Me===null){ee===null&&(ee=me);break}e&&ee&&Me.alternate===null&&t(P,ee),k=i(Me,k,ne),X===null?H=Me:X.sibling=Me,X=Me,ee=me}if(ue.done)return r(P,ee),H;if(ee===null){for(;!ue.done;ne++,ue=q.next())ue=x(P,ue.value,U),ue!==null&&(k=i(ue,k,ne),X===null?H=ue:X.sibling=ue,X=ue);return H}for(ee=n(P,ee);!ue.done;ne++,ue=q.next())ue=T(ee,P,ne,ue.value,U),ue!==null&&(e&&ue.alternate!==null&&ee.delete(ue.key===null?ne:ue.key),k=i(ue,k,ne),X===null?H=ue:X.sibling=ue,X=ue);return e&&ee.forEach(function(ke){return t(P,ke)}),H}return function(P,k,q,U){var H=typeof q=="object"&&q!==null&&q.type===ag&&q.key===null;H&&(q=q.props.children);var X=typeof q=="object"&&q!==null;if(X)switch(q.$$typeof){case b2:e:{for(X=q.key,H=k;H!==null;){if(H.key===X){switch(H.tag){case 7:if(q.type===ag){r(P,H.sibling),k=o(H,q.props.children),k.return=P,P=k;break e}break;default:if(H.elementType===q.type){r(P,H.sibling),k=o(H,q.props),k.ref=h2(P,H,q),k.return=P,P=k;break e}}r(P,H);break}else t(P,H);H=H.sibling}q.type===ag?(k=fx(q.props.children,P.mode,U,q.key),k.return=P,P=k):(U=yN(q.type,q.key,q.props,null,P.mode,U),U.ref=h2(P,k,q),U.return=P,P=U)}return a(P);case Uy:e:{for(H=q.key;k!==null;){if(k.key===H){if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){r(P,k.sibling),k=o(k,q.children||[]),k.return=P,P=k;break e}else{r(P,k);break}}else t(P,k);k=k.sibling}k=Q9(q,P.mode,U),k.return=P,P=k}return a(P);}if(typeof q=="string"||typeof q=="number")return q=""+q,k!==null&&k.tag===6?(r(P,k.sibling),k=o(k,q),k.return=P,P=k):(r(P,k),k=J9(q,P.mode,U),k.return=P,P=k),a(P);if(oN(q))return A(P,k,q,U);if(u2(q))return L(P,k,q,U);if(X&&iN(P,q),typeof q=="undefined"&&!H)switch(P.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Gt(152,rx(P.type)||"Component"));}return r(P,k)}}var ON=yfe(!0),_fe=yfe(!1),eI={},Cp=Eg(eI),Z2=Eg(eI),K2=Eg(eI);function Gy(e){if(e===eI)throw Error(Gt(174));return e}function S7(e,t){switch(Pi(K2,t),Pi(Z2,e),Pi(Cp,eI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:l7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=l7(t,e);}li(Cp),Pi(Cp,t)}function mx(){li(Cp),li(Z2),li(K2)}function Yue(e){Gy(K2.current);var t=Gy(Cp.current),r=l7(t,e.type);t!==r&&(Pi(Z2,e),Pi(Cp,r))}function gU(e){Z2.current===e&&(li(Cp),li(Z2))}var Li=Eg(0);function LN(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lh=null,ug=null,Ap=!1;function xfe(e,t){var r=vc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function Zue(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function I7(e){if(Ap){var t=ug;if(t){var r=t;if(!Zue(e,t)){if(t=ax(r.nextSibling),!t||!Zue(e,t)){e.flags=e.flags&-1025|2,Ap=!1,lh=e;return}xfe(lh,r)}lh=e,ug=ax(t.firstChild)}else e.flags=e.flags&-1025|2,Ap=!1,lh=e}}function Kue(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lh=e}function aN(e){if(e!==lh)return!1;if(!Ap)return Kue(e),Ap=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!_7(t,e.memoizedProps))for(t=ug;t;)xfe(e,t),t=ax(t.nextSibling);if(Kue(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Gt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){ug=ax(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}ug=null}}else ug=lh?ax(e.stateNode.nextSibling):null;return!0}function Y9(){ug=lh=null,Ap=!1}var lx=[];function vU(){for(var e=0;e<lx.length;e++)lx[e]._workInProgressVersionPrimary=null;lx.length=0}var L2=Xy.ReactCurrentDispatcher,yc=Xy.ReactCurrentBatchConfig,X2=0,Bi=null,qs=null,ns=null,PN=!1,P2=!1;function Yl(){throw Error(Gt(321))}function yU(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!gc(e[r],t[r]))return!1;return!0}function _U(e,t,r,n,o,i){if(X2=i,Bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,L2.current=e===null||e.memoizedState===null?nct:oct,e=r(n,o),P2){i=0;do{if(P2=!1,!(25>i))throw Error(Gt(301));i+=1,ns=qs=null,t.updateQueue=null,L2.current=ict,e=r(n,o)}while(P2)}if(L2.current=qN,t=qs!==null&&qs.next!==null,X2=0,ns=qs=Bi=null,PN=!1,t)throw Error(Gt(300));return e}function Hy(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?Bi.memoizedState=ns=e:ns=ns.next=e,ns}function Qy(){if(qs===null){var e=Bi.alternate;e=e!==null?e.memoizedState:null}else e=qs.next;var t=ns===null?Bi.memoizedState:ns.next;if(t!==null)ns=t,qs=e;else{if(e===null)throw Error(Gt(310));qs=e,e={memoizedState:qs.memoizedState,baseState:qs.baseState,baseQueue:qs.baseQueue,queue:qs.queue,next:null},ns===null?Bi.memoizedState=ns=e:ns=ns.next=e}return ns}function Tp(e,t){return typeof t=="function"?t(e):t}function m2(e){var t=Qy(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var n=qs,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(o!==null){o=o.next,n=n.baseState;var u=a=i=null,p=o;do{var h=p.lane;if((X2&h)===h)u!==null&&(u=u.next={lane:0,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null}),n=p.eagerReducer===e?p.eagerState:e(n,p.action);else{var g={lane:h,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null};u===null?(a=u=g,i=n):u=u.next=g,Bi.lanes|=h,tI|=h}p=p.next}while(p!==null&&p!==o);u===null?i=n:u.next=a,gc(n,t.memoizedState)||(Tf=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=u,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function g2(e){var t=Qy(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,i=t.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);gc(i,t.memoizedState)||(Tf=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function Xue(e,t,r){var n=t._getVersion;n=n(t._source);var o=t._workInProgressVersionPrimary;if(o!==null?e=o===n:(e=e.mutableReadLanes,(e=(X2&e)===e)&&(t._workInProgressVersionPrimary=n,lx.push(t))),e)return r(t._source);throw lx.push(t),Error(Gt(350))}function bfe(e,t,r,n){var o=_l;if(o===null)throw Error(Gt(349));var i=t._getVersion,a=i(t._source),u=L2.current,p=u.useState(function(){return Xue(o,t,r)}),h=p[1],g=p[0];p=ns;var x=e.memoizedState,b=x.refs,T=b.getSnapshot,A=x.source;x=x.subscribe;var L=Bi;return e.memoizedState={refs:b,source:t,subscribe:n},u.useEffect(function(){b.getSnapshot=r,b.setSnapshot=h;var P=i(t._source);if(!gc(a,P)){P=r(t._source),gc(g,P)||(h(P),P=mg(L),o.mutableReadLanes|=P&o.pendingLanes),P=o.mutableReadLanes,o.entangledLanes|=P;for(var k=o.entanglements,q=P;0<q;){var U=31-_g(q),H=1<<U;k[U]|=P,q&=~H}}},[r,t,n]),u.useEffect(function(){return n(t._source,function(){var P=b.getSnapshot,k=b.setSnapshot;try{k(P(t._source));var q=mg(L);o.mutableReadLanes|=q&o.pendingLanes}catch(U){k(function(){throw U})}})},[t,n]),gc(T,r)&&gc(A,t)&&gc(x,n)||(e={pending:null,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:g},e.dispatch=h=wU.bind(null,Bi,e),p.queue=e,p.baseQueue=null,g=Xue(o,t,r),p.memoizedState=p.baseState=g),g}function wfe(e,t,r){var n=Qy();return bfe(n,e,t,r)}function v2(e){var t=Hy();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Tp,lastRenderedState:e},e=e.dispatch=wU.bind(null,Bi,e),[t.memoizedState,e]}function kN(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Bi.updateQueue,t===null?(t={lastEffect:null},Bi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function Jue(e){var t=Hy();return e={current:e},t.memoizedState=e}function RN(){return Qy().memoizedState}function T7(e,t,r,n){var o=Hy();Bi.flags|=e,o.memoizedState=kN(1|t,r,void 0,n===void 0?null:n)}function xU(e,t,r,n){var o=Qy();n=n===void 0?null:n;var i=void 0;if(qs!==null){var a=qs.memoizedState;if(i=a.destroy,n!==null&&yU(n,a.deps)){kN(t,r,i,n);return}}Bi.flags|=e,o.memoizedState=kN(1|t,r,i,n)}function Que(e,t){return T7(516,4,e,t)}function jN(e,t){return xU(516,4,e,t)}function Efe(e,t){return xU(4,2,e,t)}function Sfe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ife(e,t,r){return r=r!=null?r.concat([e]):null,xU(4,2,Sfe.bind(null,t,e),r)}function bU(){}function Tfe(e,t){var r=Qy();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yU(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Mfe(e,t){var r=Qy();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&yU(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function rct(e,t){var r=hx();Yy(98>r?98:r,function(){e(!0)}),Yy(97<r?97:r,function(){var n=yc.transition;yc.transition=1;try{e(!1),t()}finally{yc.transition=n}})}function wU(e,t,r){var n=Bu(),o=mg(e),i={lane:o,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Bi||a!==null&&a===Bi)P2=PN=!0;else{if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,p=a(u,r);if(i.eagerReducer=a,i.eagerState=p,gc(p,u))return}catch(h){}finally{}gg(e,o,n)}}var qN={readContext:_c,useCallback:Yl,useContext:Yl,useEffect:Yl,useImperativeHandle:Yl,useLayoutEffect:Yl,useMemo:Yl,useReducer:Yl,useRef:Yl,useState:Yl,useDebugValue:Yl,useDeferredValue:Yl,useTransition:Yl,useMutableSource:Yl,useOpaqueIdentifier:Yl,unstable_isNewReconciler:!1},nct={readContext:_c,useCallback:function(e,t){return Hy().memoizedState=[e,t===void 0?null:t],e},useContext:_c,useEffect:Que,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,T7(4,2,Sfe.bind(null,t,e),r)},useLayoutEffect:function(e,t){return T7(4,2,e,t)},useMemo:function(e,t){var r=Hy();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Hy();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=wU.bind(null,Bi,e),[n.memoizedState,e]},useRef:Jue,useState:v2,useDebugValue:bU,useDeferredValue:function(e){var t=v2(e),r=t[0],n=t[1];return Que(function(){var o=yc.transition;yc.transition=1;try{n(e)}finally{yc.transition=o}},[e]),r},useTransition:function(){var e=v2(!1),t=e[0];return e=rct.bind(null,e[1]),Jue(e),[e,t]},useMutableSource:function(e,t,r){var n=Hy();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},bfe(n,e,t,r)},useOpaqueIdentifier:function(){if(Ap){var e=!1,t=Kut(function(){throw e||(e=!0,r("r:"+(H9++).toString(36))),Error(Gt(355))}),r=v2(t)[1];return!(Bi.mode&2)&&(Bi.flags|=516,kN(5,function(){r("r:"+(H9++).toString(36))},void 0,null)),t}return t="r:"+(H9++).toString(36),v2(t),t},unstable_isNewReconciler:!1},oct={readContext:_c,useCallback:Tfe,useContext:_c,useEffect:jN,useImperativeHandle:Ife,useLayoutEffect:Efe,useMemo:Mfe,useReducer:m2,useRef:RN,useState:function(){return m2(Tp)},useDebugValue:bU,useDeferredValue:function(e){var t=m2(Tp),r=t[0],n=t[1];return jN(function(){var o=yc.transition;yc.transition=1;try{n(e)}finally{yc.transition=o}},[e]),r},useTransition:function(){var e=m2(Tp)[0];return[RN().current,e]},useMutableSource:wfe,useOpaqueIdentifier:function(){return m2(Tp)[0]},unstable_isNewReconciler:!1},ict={readContext:_c,useCallback:Tfe,useContext:_c,useEffect:jN,useImperativeHandle:Ife,useLayoutEffect:Efe,useMemo:Mfe,useReducer:g2,useRef:RN,useState:function(){return g2(Tp)},useDebugValue:bU,useDeferredValue:function(e){var t=g2(Tp),r=t[0],n=t[1];return jN(function(){var o=yc.transition;yc.transition=1;try{n(e)}finally{yc.transition=o}},[e]),r},useTransition:function(){var e=g2(Tp)[0];return[RN().current,e]},useMutableSource:wfe,useOpaqueIdentifier:function(){return g2(Tp)[0]},unstable_isNewReconciler:!1},act=Xy.ReactCurrentOwner,Tf=!1;function Zl(e,t,r,n){t.child=e===null?_fe(t,null,r,n):ON(t,e.child,r,n)}function ece(e,t,r,n,o){r=r.render;var i=t.ref;return sx(t,o),n=_U(e,t,r,n,i,o),e!==null&&!Tf?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,uh(e,t,o)):(t.flags|=1,Zl(e,t,n,o),t.child)}function tce(e,t,r,n,o,i){if(e===null){var a=r.type;return typeof a=="function"&&!CU(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,Cfe(e,t,a,n,o,i)):(e=yN(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,!(o&i)&&(o=a.memoizedProps,r=r.compare,r=r!==null?r:H2,r(o,n)&&e.ref===t.ref)?uh(e,t,i):(t.flags|=1,e=wg(a,n),e.ref=t.ref,e.return=t,t.child=e)}function Cfe(e,t,r,n,o,i){if(e!==null&&H2(e.memoizedProps,n)&&e.ref===t.ref)if(Tf=!1,(i&o)!==0)e.flags&16384&&(Tf=!0);else return t.lanes=e.lanes,uh(e,t,i);return M7(e,t,r,n,i)}function Z9(e,t,r){var n=t.pendingProps,o=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},lN(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},lN(t,i!==null?i.baseLanes:r);else return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},lN(t,e),null;}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,lN(t,n);return Zl(e,t,o,r),t.child}function Afe(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function M7(e,t,r,n,o){var i=Xl(r)?$y:Us.current;return i=dx(t,i),sx(t,o),r=_U(e,t,r,n,i,o),e!==null&&!Tf?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,uh(e,t,o)):(t.flags|=1,Zl(e,t,r,o),t.child)}function rce(e,t,r,n,o){if(Xl(r)){var i=!0;dN(t)}else i=!1;if(sx(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),vfe(t,r,n),E7(t,r,n,o),n=!0;else if(e===null){var a=t.stateNode,u=t.memoizedProps;a.props=u;var p=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=_c(h):(h=Xl(r)?$y:Us.current,h=dx(t,h));var g=r.getDerivedStateFromProps,x=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";x||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==n||p!==h)&&$ue(t,a,n,h),ig=!1;var b=t.memoizedState;a.state=b,Y2(t,n,a,o),p=t.memoizedState,u!==n||b!==p||Kl.current||ig?(typeof g=="function"&&(NN(t,r,g,n),p=t.memoizedState),(u=ig||Wue(t,r,u,n,b,p,h))?(x||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4)):(typeof a.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=h,n=u):(typeof a.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{a=t.stateNode,mfe(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:If(t.type,u),a.props=h,x=t.pendingProps,b=a.context,p=r.contextType,typeof p=="object"&&p!==null?p=_c(p):(p=Xl(r)?$y:Us.current,p=dx(t,p));var T=r.getDerivedStateFromProps;(g=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==x||b!==p)&&$ue(t,a,n,p),ig=!1,b=t.memoizedState,a.state=b,Y2(t,n,a,o);var A=t.memoizedState;u!==x||b!==A||Kl.current||ig?(typeof T=="function"&&(NN(t,r,T,n),A=t.memoizedState),(h=ig||Wue(t,r,h,n,b,A,p))?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,A,p),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,A,p)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=A),a.props=n,a.state=A,a.context=p,n=h):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=256),n=!1)}return C7(e,t,r,n,i,o)}function C7(e,t,r,n,o,i){Afe(e,t);var a=(t.flags&64)!==0;if(!n&&!a)return o&&Uue(t,r,!1),uh(e,t,i);n=t.stateNode,act.current=t;var u=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=ON(t,e.child,null,i),t.child=ON(t,null,u,i)):Zl(e,t,u,i),t.memoizedState=n.state,o&&Uue(t,r,!0),t.child}function nce(e){var t=e.stateNode;t.pendingContext?Fue(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Fue(e,t.context,!1),S7(e,t.containerInfo)}var sN={dehydrated:null,retryLane:0};function oce(e,t,r){var n=t.pendingProps,o=Li.current,i=!1,a;return(a=(t.flags&64)!==0)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(o|=1),Pi(Li,o&1),e===null?(n.fallback!==void 0&&I7(t),e=n.children,o=n.fallback,i?(e=ice(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=sN,e):typeof n.unstable_expectedLoadTime=="number"?(e=ice(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=sN,t.lanes=33554432,e):(r=AU({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?i?(n=sce(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=sN,n):(r=ace(e,t,n.children,r),t.memoizedState=null,r):i?(n=sce(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=sN,n):(r=ace(e,t,n.children,r),t.memoizedState=null,r)}function ice(e,t,r,n){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},!(o&2)&&i!==null?(i.childLanes=0,i.pendingProps=t):i=AU(t,o,0,null),r=fx(r,o,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function ace(e,t,r,n){var o=e.child;return e=o.sibling,r=wg(o,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function sce(e,t,r,n,o){var i=t.mode,a=e.child;e=a.sibling;var u={mode:"hidden",children:r};return!(i&2)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,a=r.lastEffect,a!==null?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=wg(a,u),e!==null?n=wg(e,n):(n=fx(n,i,o,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function lce(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),hfe(e.return,t)}function K9(e,t,r,n,o,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o,a.lastEffect=i)}function uce(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(Zl(e,t,n.children,r),n=Li.current,n&2)n=n&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&lce(e,r);else if(e.tag===19)lce(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Pi(Li,n),!(t.mode&2))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&LN(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),K9(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&LN(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}K9(t,!0,r,null,i,t.lastEffect);break;case"together":K9(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function uh(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),tI|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(Gt(153));if(t.child!==null){for(e=t.child,r=wg(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=wg(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var Dfe,A7,Nfe,Ofe;Dfe=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};A7=function(){};Nfe=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Gy(Cp.current);var i=null;switch(r){case"input":o=r7(e,o),n=r7(e,n),i=[];break;case"option":o=i7(e,o),n=i7(e,n),i=[];break;case"select":o=vi({},o,{value:void 0}),n=vi({},n,{value:void 0}),i=[];break;case"textarea":o=a7(e,o),n=a7(e,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=IN);}u7(r,n);var a;r=null;for(h in o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&o[h]!=null)if(h==="style"){var u=o[h];for(a in u)u.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(q2.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var p=n[h];if(u=o!=null?o[h]:void 0,n.hasOwnProperty(h)&&p!==u&&(p!=null||u!=null))if(h==="style"){if(u){for(a in u)!u.hasOwnProperty(a)||p&&p.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in p)p.hasOwnProperty(a)&&u[a]!==p[a]&&(r||(r={}),r[a]=p[a])}else r||(i||(i=[]),i.push(h,r)),r=p;}else h==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,u=u?u.__html:void 0,p!=null&&u!==p&&(i=i||[]).push(h,p)):h==="children"?typeof p!="string"&&typeof p!="number"||(i=i||[]).push(h,""+p):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(q2.hasOwnProperty(h)?(p!=null&&h==="onScroll"&&si("scroll",e),i||u===p||(i=[])):typeof p=="object"&&p!==null&&p.$$typeof===Z7?p.toString():(i=i||[]).push(h,p))}r&&(i=i||[]).push("style",r);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};Ofe=function(e,t,r,n){r!==n&&(t.flags|=4)};function y2(e,t){if(!Ap)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null;}}function sct(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Xl(t.type)&&MN(),null;case 3:return mx(),li(Kl),li(Us),vU(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(aN(t)?t.flags|=4:n.hydrate||(t.flags|=256)),A7(t),null;case 5:gU(t);var o=Gy(K2.current);if(r=t.type,e!==null&&t.stateNode!=null)Nfe(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(Gt(166));return null}if(e=Gy(Cp.current),aN(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[lg]=t,n[TN]=i,r){case"dialog":si("cancel",n),si("close",n);break;case"iframe":case"object":case"embed":si("load",n);break;case"video":case"audio":for(e=0;e<E2.length;e++)si(E2[e],n);break;case"source":si("error",n);break;case"img":case"image":case"link":si("error",n),si("load",n);break;case"details":si("toggle",n);break;case"input":fue(n,i),si("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},si("invalid",n);break;case"textarea":due(n,i),si("invalid",n);}u7(r,i),e=null;for(var a in i)i.hasOwnProperty(a)&&(o=i[a],a==="children"?typeof o=="string"?n.textContent!==o&&(e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(e=["children",""+o]):q2.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&si("scroll",n));switch(r){case"input":X4(n),pue(n,i,!0);break;case"textarea":X4(n),hue(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=IN);}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(a=o.nodeType===9?o:o.ownerDocument,e===s7.html&&(e=Ice(r)),e===s7.html?r==="script"?(e=a.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[lg]=t,e[TN]=n,Dfe(e,t,!1,!1),t.stateNode=e,a=c7(r,n),r){case"dialog":si("cancel",e),si("close",e),o=n;break;case"iframe":case"object":case"embed":si("load",e),o=n;break;case"video":case"audio":for(o=0;o<E2.length;o++)si(E2[o],e);o=n;break;case"source":si("error",e),o=n;break;case"img":case"image":case"link":si("error",e),si("load",e),o=n;break;case"details":si("toggle",e),o=n;break;case"input":fue(e,n),o=r7(e,n),si("invalid",e);break;case"option":o=i7(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=vi({},n,{value:void 0}),si("invalid",e);break;case"textarea":due(e,n),o=a7(e,n),si("invalid",e);break;default:o=n;}u7(r,o);var u=o;for(i in u)if(u.hasOwnProperty(i)){var p=u[i];i==="style"?Cce(e,p):i==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&Tce(e,p)):i==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&z2(e,p):typeof p=="number"&&z2(e,""+p):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(q2.hasOwnProperty(i)?p!=null&&i==="onScroll"&&si("scroll",e):p!=null&&V7(e,i,p,a))}switch(r){case"input":X4(e),pue(e,n,!1);break;case"textarea":X4(e),hue(e);break;case"option":n.value!=null&&e.setAttribute("value",""+yg(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?nx(e,!!n.multiple,i,!1):n.defaultValue!=null&&nx(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=IN);}ife(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)Ofe(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Gt(166));r=Gy(K2.current),Gy(Cp.current),aN(t)?(n=t.stateNode,r=t.memoizedProps,n[lg]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[lg]=t,t.stateNode=n)}return null;case 13:return li(Li),n=t.memoizedState,t.flags&64?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&aN(t):r=e.memoizedState!==null,n&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Li.current&1?os===0&&(os=3):((os===0||os===3)&&(os=4),_l===null||!(tI&134217727)&&!(_x&134217727)||ux(_l,Fs))),(n||r)&&(t.flags|=4),null);case 4:return mx(),A7(t),e===null&&rfe(t.stateNode.containerInfo),null;case 10:return hU(t),null;case 17:return Xl(t.type)&&MN(),null;case 19:if(li(Li),n=t.memoizedState,n===null)return null;if(i=(t.flags&64)!==0,a=n.rendering,a===null){if(i)y2(n,!1);else{if(os!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(a=LN(e),a!==null){for(t.flags|=64,y2(n,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Pi(Li,Li.current&1|2),t.child}e=e.sibling}n.tail!==null&&zs()>k7&&(t.flags|=64,i=!0,y2(n,!1),t.lanes=33554432)}}else{if(!i)if(e=LN(a),e!==null){if(t.flags|=64,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),y2(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!Ap)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*zs()-n.renderingStartTime>k7&&r!==1073741824&&(t.flags|=64,i=!0,y2(n,!1),t.lanes=33554432);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=zs(),r.sibling=null,t=Li.current,Pi(Li,i?t&1|2:t&1),r):null;case 23:case 24:return MU(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(Gt(156,t.tag))}function lct(e){switch(e.tag){case 1:Xl(e.type)&&MN();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(mx(),li(Kl),li(Us),vU(),t=e.flags,t&64)throw Error(Gt(285));return e.flags=t&-4097|64,e;case 5:return gU(e),null;case 13:return li(Li),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return li(Li),null;case 4:return mx(),null;case 10:return hU(e),null;case 23:case 24:return MU(),null;default:return null;}}function EU(e,t){try{var r="",n=t;do r+=Blt(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o}}function D7(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var uct=typeof WeakMap=="function"?WeakMap:Map;function Lfe(e,t,r){r=dg(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){FN||(FN=!0,R7=n),D7(e,t)},r}function Pfe(e,t,r){r=dg(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return D7(e,t),n(o)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Mp===null?Mp=new Set([this]):Mp.add(this),D7(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}var cct=typeof WeakSet=="function"?WeakSet:Set;function cce(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){vg(e,r)}else t.current=null}function fct(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:If(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&cU(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(Gt(163))}function pct(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var o=e;n=o.next,o=o.tag,o&4&&o&1&&(Vfe(r,e),xct(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:If(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&Hue(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode;}Hue(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&ife(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&qce(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(Gt(163))}function fce(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,n.style.display=Mce("display",o)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function pce(e,t){if(Wy&&typeof Wy.onCommitFiberUnmount=="function")try{Wy.onCommitFiberUnmount(fU,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,o=n.destroy;if(n=n.tag,o!==void 0)if(n&4)Vfe(t,r);else{n=t;try{o()}catch(i){vg(n,i)}}r=r.next}while(r!==e)}break;case 1:if(cce(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){vg(t,i)}break;case 5:cce(t);break;case 4:kfe(e,t);}}function dce(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function hce(e){return e.tag===5||e.tag===3||e.tag===4}function mce(e){e:{for(var t=e.return;t!==null;){if(hce(t))break e;t=t.return}throw Error(Gt(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(Gt(161));}r.flags&16&&(z2(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||hce(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?N7(e,r,t):O7(e,r,t)}function N7(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=IN));else if(n!==4&&(e=e.child,e!==null))for(N7(e,t,r),e=e.sibling;e!==null;)N7(e,t,r),e=e.sibling}function O7(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(O7(e,t,r),e=e.sibling;e!==null;)O7(e,t,r),e=e.sibling}function kfe(e,t){for(var r=t,n=!1,o,i;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(Gt(160));switch(o=n.stateNode,n.tag){case 5:i=!1;break e;case 3:o=o.containerInfo,i=!0;break e;case 4:o=o.containerInfo,i=!0;break e;}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var a=e,u=r,p=u;;)if(pce(a,p),p.child!==null&&p.tag!==4)p.child.return=p,p=p.child;else{if(p===u)break e;for(;p.sibling===null;){if(p.return===null||p.return===u)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i?(a=o,u=r.stateNode,a.nodeType===8?a.parentNode.removeChild(u):a.removeChild(u)):o.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){o=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(pce(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function X9(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var o=e!==null?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,i!==null){for(r[TN]=n,e==="input"&&n.type==="radio"&&n.name!=null&&Ece(r,n),c7(e,o),t=c7(e,n),o=0;o<i.length;o+=2){var a=i[o],u=i[o+1];a==="style"?Cce(r,u):a==="dangerouslySetInnerHTML"?Tce(r,u):a==="children"?z2(r,u):V7(r,a,u,t)}switch(e){case"input":n7(r,n);break;case"textarea":Sce(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,i=n.value,i!=null?nx(r,!!n.multiple,i,!1):e!==!!n.multiple&&(n.defaultValue!=null?nx(r,!!n.multiple,n.defaultValue,!0):nx(r,!!n.multiple,n.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(Gt(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,qce(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(TU=zs(),fce(t.child,!0)),gce(t);return;case 19:gce(t);return;case 17:return;case 23:case 24:fce(t,t.memoizedState!==null);return;}throw Error(Gt(163))}function gce(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new cct),t.forEach(function(n){var o=Ect.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function dct(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var hct=Math.ceil,zN=Xy.ReactCurrentDispatcher,SU=Xy.ReactCurrentOwner,Zr=0,_l=null,ya=null,Fs=0,Zy=0,L7=Eg(0),os=0,QN=null,yx=0,tI=0,_x=0,IU=0,P7=null,TU=0,k7=1/0;function xx(){k7=zs()+500}var vr=null,FN=!1,R7=null,Mp=null,bg=!1,k2=null,S2=90,j7=[],q7=[],ch=null,R2=0,z7=null,mN=-1,sh=0,gN=0,j2=null,vN=!1;function Bu(){return Zr&48?zs():mN!==-1?mN:mN=zs()}function mg(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return hx()===99?1:2;if(sh===0&&(sh=yx),tct.transition!==0){gN!==0&&(gN=P7!==null?P7.pendingLanes:0),e=sh;var t=4186112&~gN;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=hx(),Zr&4&&e===98?e=EN(12,sh):(e=out(e),e=EN(e,sh)),e}function gg(e,t,r){if(50<R2)throw R2=0,z7=null,Error(Gt(185));if(e=e5(e,t),e===null)return null;WN(e,t,r),e===_l&&(_x|=t,os===4&&ux(e,Fs));var n=hx();t===1?Zr&8&&!(Zr&48)?F7(e):(xc(e,r),Zr===0&&(xx(),Dp())):(!(Zr&4)||n!==98&&n!==99||(ch===null?ch=new Set([e]):ch.add(e)),xc(e,r)),P7=e}function e5(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function xc(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-_g(a),p=1<<u,h=i[u];if(h===-1){if(!(p&n)||p&o){h=t,Y_(p);var g=Jo;i[u]=10<=g?h+250:6<=g?h+5e3:-1}}else h<=t&&(e.expiredLanes|=p);a&=~p}if(n=V2(e,e===_l?Fs:0),t=Jo,n===0)r!==null&&(r!==W9&&b7(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==W9&&b7(r)}t===15?(r=F7.bind(null,e),ah===null?(ah=[r],hN=pU(XN,dfe)):ah.push(r),r=W9):t===14?r=$2(99,F7.bind(null,e)):(r=iut(t),r=$2(r,Rfe.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function Rfe(e){if(mN=-1,gN=sh=0,Zr&48)throw Error(Gt(327));var t=e.callbackNode;if(Sg()&&e.callbackNode!==t)return null;var r=V2(e,e===_l?Fs:0);if(r===0)return null;var n=r,o=Zr;Zr|=16;var i=Ffe();(_l!==e||Fs!==n)&&(xx(),cx(e,n));do try{vct();break}catch(u){zfe(e,u)}while(!0);if(dU(),zN.current=i,Zr=o,ya!==null?n=0:(_l=null,Fs=0,n=os),yx&_x)cx(e,0);else if(n!==0){if(n===2&&(Zr|=64,e.hydrate&&(e.hydrate=!1,cU(e.containerInfo)),r=Hce(e),r!==0&&(n=I2(e,r))),n===1)throw t=QN,cx(e,0),ux(e,r),xc(e,zs()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(Gt(345));case 2:Fy(e);break;case 3:if(ux(e,r),(r&62914560)===r&&(n=TU+500-zs(),10<n)){if(V2(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Bu(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=jue(Fy.bind(null,e),n);break}Fy(e);break;case 4:if(ux(e,r),(r&4186112)===r)break;for(n=e.eventTimes,o=-1;0<r;){var a=31-_g(r);i=1<<a,a=n[a],a>o&&(o=a),r&=~i}if(r=o,r=zs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*hct(r/1960))-r,10<r){e.timeoutHandle=jue(Fy.bind(null,e),r);break}Fy(e);break;case 5:Fy(e);break;default:throw Error(Gt(329));}}return xc(e,zs()),e.callbackNode===t?Rfe.bind(null,e):null}function ux(e,t){for(t&=~IU,t&=~_x,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-_g(t),n=1<<r;e[r]=-1,t&=~n}}function F7(e){if(Zr&48)throw Error(Gt(327));if(Sg(),e===_l&&e.expiredLanes&Fs){var t=Fs,r=I2(e,t);yx&_x&&(t=V2(e,t),r=I2(e,t))}else t=V2(e,0),r=I2(e,t);if(e.tag!==0&&r===2&&(Zr|=64,e.hydrate&&(e.hydrate=!1,cU(e.containerInfo)),t=Hce(e),t!==0&&(r=I2(e,t))),r===1)throw r=QN,cx(e,0),ux(e,t),xc(e,zs()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fy(e),xc(e,zs()),null}function mct(){if(ch!==null){var e=ch;ch=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,xc(t,zs())})}Dp()}function jfe(e,t){var r=Zr;Zr|=1;try{return e(t)}finally{Zr=r,Zr===0&&(xx(),Dp())}}function qfe(e,t){var r=Zr;Zr&=-2,Zr|=8;try{return e(t)}finally{Zr=r,Zr===0&&(xx(),Dp())}}function lN(e,t){Pi(L7,Zy),Zy|=t,yx|=t}function MU(){Zy=L7.current,li(L7)}function cx(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Zut(r)),ya!==null)for(r=ya.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&MN();break;case 3:mx(),li(Kl),li(Us),vU();break;case 5:gU(n);break;case 4:mx();break;case 13:li(Li);break;case 19:li(Li);break;case 10:hU(n);break;case 23:case 24:MU();}r=r.return}_l=e,ya=wg(e.current,null),Fs=Zy=yx=t,os=0,QN=null,IU=_x=tI=0}function zfe(e,t){do{var r=ya;try{if(dU(),L2.current=qN,PN){for(var n=Bi.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}PN=!1}if(X2=0,ns=qs=Bi=null,P2=!1,SU.current=null,r===null||r.return===null){os=1,QN=t,ya=null;break}e:{var i=e,a=r.return,u=r,p=t;if(t=Fs,u.flags|=2048,u.firstEffect=u.lastEffect=null,p!==null&&typeof p=="object"&&typeof p.then=="function"){var h=p;if(!(u.mode&2)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=(Li.current&1)!==0,b=a;do{var T;if(T=b.tag===13){var A=b.memoizedState;if(A!==null)T=A.dehydrated!==null;else{var L=b.memoizedProps;T=L.fallback===void 0?!1:L.unstable_avoidThisFallback!==!0?!0:!x}}if(T){var P=b.updateQueue;if(P===null){var k=new Set;k.add(h),b.updateQueue=k}else P.add(h);if(!(b.mode&2)){if(b.flags|=64,u.flags|=16384,u.flags&=-2981,u.tag===1)if(u.alternate===null)u.tag=17;else{var q=dg(-1,1);q.tag=2,hg(u,q)}u.lanes|=1;break e}p=void 0,u=t;var U=i.pingCache;if(U===null?(U=i.pingCache=new uct,p=new Set,U.set(h,p)):(p=U.get(h),p===void 0&&(p=new Set,U.set(h,p))),!p.has(u)){p.add(u);var H=wct.bind(null,i,h,u);h.then(H,H)}b.flags|=4096,b.lanes=t;break e}b=b.return}while(b!==null);p=Error((rx(u.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}os!==5&&(os=2),p=EU(p,u),b=a;do{switch(b.tag){case 3:i=p,b.flags|=4096,t&=-t,b.lanes|=t;var X=Lfe(b,i,t);Gue(b,X);break e;case 1:i=p;var ee=b.type,ne=b.stateNode;if(!(b.flags&64)&&(typeof ee.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Mp===null||!Mp.has(ne)))){b.flags|=4096,t&=-t,b.lanes|=t;var me=Pfe(b,i,t);Gue(b,me);break e}}b=b.return}while(b!==null)}Bfe(r)}catch(ue){t=ue,ya===r&&r!==null&&(ya=r=r.return);continue}break}while(!0)}function Ffe(){var e=zN.current;return zN.current=qN,e===null?qN:e}function I2(e,t){var r=Zr;Zr|=16;var n=Ffe();_l===e&&Fs===t||cx(e,t);do try{gct();break}catch(o){zfe(e,o)}while(!0);if(dU(),Zr=r,zN.current=n,ya!==null)throw Error(Gt(261));return _l=null,Fs=0,os}function gct(){for(;ya!==null;)Ufe(ya)}function vct(){for(;ya!==null&&!Jut();)Ufe(ya)}function Ufe(e){var t=Gfe(e.alternate,e,Zy);e.memoizedProps=e.pendingProps,t===null?Bfe(e):ya=t,SU.current=null}function Bfe(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=lct(t),r!==null){r.flags&=2047,ya=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=sct(r,t,Zy),r!==null){ya=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||Zy&1073741824||!(r.mode&4)){for(var n=0,o=r.child;o!==null;)n|=o.lanes|o.childLanes,o=o.sibling;r.childLanes=n}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){ya=t;return}ya=t=e}while(t!==null);os===0&&(os=5)}function Fy(e){var t=hx();return Yy(99,yct.bind(null,e,t)),null}function yct(e,t){do Sg();while(k2!==null);if(Zr&48)throw Error(Gt(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Gt(177));e.callbackNode=null;var n=r.lanes|r.childLanes,o=n,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,u=e.expirationTimes;0<i;){var p=31-_g(i),h=1<<p;o[p]=0,a[p]=-1,u[p]=-1,i&=~h}if(ch!==null&&!(n&24)&&ch.has(e)&&ch.delete(e),e===_l&&(ya=_l=null,Fs=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(o=Zr,Zr|=32,SU.current=null,V9=cN,a=Nue(),g7(a)){if("selectionStart"in a)u={start:a.selectionStart,end:a.selectionEnd};else e:if(u=(u=a.ownerDocument)&&u.defaultView||window,(h=u.getSelection&&u.getSelection())&&h.rangeCount!==0){u=h.anchorNode,i=h.anchorOffset,p=h.focusNode,h=h.focusOffset;try{u.nodeType,p.nodeType}catch(ue){u=null;break e}var g=0,x=-1,b=-1,T=0,A=0,L=a,P=null;t:for(;;){for(var k;L!==u||i!==0&&L.nodeType!==3||(x=g+i),L!==p||h!==0&&L.nodeType!==3||(b=g+h),L.nodeType===3&&(g+=L.nodeValue.length),(k=L.firstChild)!==null;)P=L,L=k;for(;;){if(L===a)break t;if(P===u&&++T===i&&(x=g),P===p&&++A===h&&(b=g),(k=L.nextSibling)!==null)break;L=P,P=L.parentNode}L=k}u=x===-1||b===-1?null:{start:x,end:b}}else u=null;u=u||{start:0,end:0}}else u=null;G9={focusedElem:a,selectionRange:u},cN=!1,j2=null,vN=!1,vr=n;do try{_ct()}catch(ue){if(vr===null)throw Error(Gt(330));vg(vr,ue),vr=vr.nextEffect}while(vr!==null);j2=null,vr=n;do try{for(a=e;vr!==null;){var q=vr.flags;if(q&16&&z2(vr.stateNode,""),q&128){var U=vr.alternate;if(U!==null){var H=U.ref;H!==null&&(typeof H=="function"?H(null):H.current=null)}}switch(q&1038){case 2:mce(vr),vr.flags&=-3;break;case 6:mce(vr),vr.flags&=-3,X9(vr.alternate,vr);break;case 1024:vr.flags&=-1025;break;case 1028:vr.flags&=-1025,X9(vr.alternate,vr);break;case 4:X9(vr.alternate,vr);break;case 8:u=vr,kfe(a,u);var X=u.alternate;dce(u),X!==null&&dce(X);}vr=vr.nextEffect}}catch(ue){if(vr===null)throw Error(Gt(330));vg(vr,ue),vr=vr.nextEffect}while(vr!==null);if(H=G9,U=Nue(),q=H.focusedElem,a=H.selectionRange,U!==q&&q&&q.ownerDocument&&Qce(q.ownerDocument.documentElement,q)){for(a!==null&&g7(q)&&(U=a.start,H=a.end,H===void 0&&(H=U),("selectionStart"in q)?(q.selectionStart=U,q.selectionEnd=Math.min(H,q.value.length)):(H=(U=q.ownerDocument||document)&&U.defaultView||window,H.getSelection&&(H=H.getSelection(),u=q.textContent.length,X=Math.min(a.start,u),a=a.end===void 0?X:Math.min(a.end,u),!H.extend&&X>a&&(u=a,a=X,X=u),u=Due(q,X),i=Due(q,a),u&&i&&(H.rangeCount!==1||H.anchorNode!==u.node||H.anchorOffset!==u.offset||H.focusNode!==i.node||H.focusOffset!==i.offset)&&(U=U.createRange(),U.setStart(u.node,u.offset),H.removeAllRanges(),X>a?(H.addRange(U),H.extend(i.node,i.offset)):(U.setEnd(i.node,i.offset),H.addRange(U)))))),U=[],H=q;H=H.parentNode;)H.nodeType===1&&U.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<U.length;q++)H=U[q],H.element.scrollLeft=H.left,H.element.scrollTop=H.top}cN=!!V9,G9=V9=null,e.current=r,vr=n;do try{for(q=e;vr!==null;){var ee=vr.flags;if(ee&36&&pct(q,vr.alternate,vr),ee&128){U=void 0;var ne=vr.ref;if(ne!==null){var me=vr.stateNode;switch(vr.tag){case 5:U=me;break;default:U=me;}typeof ne=="function"?ne(U):ne.current=U}}vr=vr.nextEffect}}catch(ue){if(vr===null)throw Error(Gt(330));vg(vr,ue),vr=vr.nextEffect}while(vr!==null);vr=null,ect(),Zr=o}else e.current=r;if(bg)bg=!1,k2=e,S2=t;else for(vr=n;vr!==null;)t=vr.nextEffect,vr.nextEffect=null,vr.flags&8&&(ee=vr,ee.sibling=null,ee.stateNode=null),vr=t;if(n=e.pendingLanes,n===0&&(Mp=null),n===1?e===z7?R2++:(R2=0,z7=e):R2=0,r=r.stateNode,Wy&&typeof Wy.onCommitFiberRoot=="function")try{Wy.onCommitFiberRoot(fU,r,void 0,(r.current.flags&64)===64)}catch(ue){}if(xc(e,zs()),FN)throw FN=!1,e=R7,R7=null,e;return Zr&8||Dp(),null}function _ct(){for(;vr!==null;){var e=vr.alternate;vN||j2===null||(vr.flags&8?vue(vr,j2)&&(vN=!0):vr.tag===13&&dct(e,vr)&&vue(vr,j2)&&(vN=!0));var t=vr.flags;t&256&&fct(e,vr),!(t&512)||bg||(bg=!0,$2(97,function(){return Sg(),null})),vr=vr.nextEffect}}function Sg(){if(S2!==90){var e=97<S2?97:S2;return S2=90,Yy(e,bct)}return!1}function xct(e,t){j7.push(t,e),bg||(bg=!0,$2(97,function(){return Sg(),null}))}function Vfe(e,t){q7.push(t,e),bg||(bg=!0,$2(97,function(){return Sg(),null}))}function bct(){if(k2===null)return!1;var e=k2;if(k2=null,Zr&48)throw Error(Gt(331));var t=Zr;Zr|=32;var r=q7;q7=[];for(var n=0;n<r.length;n+=2){var o=r[n],i=r[n+1],a=o.destroy;if(o.destroy=void 0,typeof a=="function")try{a()}catch(p){if(i===null)throw Error(Gt(330));vg(i,p)}}for(r=j7,j7=[],n=0;n<r.length;n+=2){o=r[n],i=r[n+1];try{var u=o.create;o.destroy=u()}catch(p){if(i===null)throw Error(Gt(330));vg(i,p)}}for(u=e.current.firstEffect;u!==null;)e=u.nextEffect,u.nextEffect=null,u.flags&8&&(u.sibling=null,u.stateNode=null),u=e;return Zr=t,Dp(),!0}function vce(e,t,r){t=EU(r,t),t=Lfe(e,t,1),hg(e,t),t=Bu(),e=e5(e,1),e!==null&&(WN(e,1,t),xc(e,t))}function vg(e,t){if(e.tag===3)vce(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){vce(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Mp===null||!Mp.has(n))){e=EU(t,e);var o=Pfe(r,e,1);if(hg(r,o),o=Bu(),r=e5(r,1),r!==null)WN(r,1,o),xc(r,o);else if(typeof n.componentDidCatch=="function"&&(Mp===null||!Mp.has(n)))try{n.componentDidCatch(t,e)}catch(i){}break}}r=r.return}}function wct(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Bu(),e.pingedLanes|=e.suspendedLanes&r,_l===e&&(Fs&r)===r&&(os===4||os===3&&(Fs&62914560)===Fs&&500>zs()-TU?cx(e,0):IU|=r),xc(e,t)}function Ect(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(sh===0&&(sh=yx),t=Z_(62914560&~sh),t===0&&(t=4194304)):t=hx()===99?1:2:t=1),r=Bu(),e=e5(e,t),e!==null&&(WN(e,t,r),xc(e,r))}var Gfe;Gfe=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Kl.current)Tf=!0;else if(r&n)Tf=!!(e.flags&16384);else{switch(Tf=!1,t.tag){case 3:nce(t),Y9();break;case 5:Yue(t);break;case 1:Xl(t.type)&&dN(t);break;case 4:S7(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var o=t.type._context;Pi(CN,o._currentValue),o._currentValue=n;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?oce(e,t,r):(Pi(Li,Li.current&1),t=uh(e,t,r),t!==null?t.sibling:null);Pi(Li,Li.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&64){if(n)return uce(e,t,r);t.flags|=64}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Pi(Li,Li.current),n)break;return null;case 23:case 24:return t.lanes=0,Z9(e,t,r);}return uh(e,t,r)}}else Tf=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=dx(t,Us.current),sx(t,r),o=_U(null,t,n,e,o,r),t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Xl(n)){var i=!0;dN(t)}else i=!1;t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,mU(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&NN(t,n,a,e),o.updater=JN,t.stateNode=o,o._reactInternals=t,E7(t,n,e,r),t=C7(null,t,n,!0,i,r)}else t.tag=0,Zl(null,t,o,r),t=t.child;return t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=Ict(o),e=If(o,e),i){case 0:t=M7(null,t,o,e,r);break e;case 1:t=rce(null,t,o,e,r);break e;case 11:t=ece(null,t,o,e,r);break e;case 14:t=tce(null,t,o,If(o.type,e),n,r);break e;}throw Error(Gt(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:If(n,o),M7(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:If(n,o),rce(e,t,n,o,r);case 3:if(nce(t),n=t.updateQueue,e===null||n===null)throw Error(Gt(282));if(n=t.pendingProps,o=t.memoizedState,o=o!==null?o.element:null,mfe(e,t),Y2(t,n,null,r),n=t.memoizedState.element,n===o)Y9(),t=uh(e,t,r);else{if(o=t.stateNode,(i=o.hydrate)&&(ug=ax(t.stateNode.containerInfo.firstChild),lh=t,i=Ap=!0),i){if(e=o.mutableSourceEagerHydrationData,e!=null)for(o=0;o<e.length;o+=2)i=e[o],i._workInProgressVersionPrimary=e[o+1],lx.push(i);for(r=_fe(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Zl(e,t,n,r),Y9();t=t.child}return t;case 5:return Yue(t),e===null&&I7(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,_7(n,o)?a=null:i!==null&&_7(n,i)&&(t.flags|=16),Afe(e,t),Zl(e,t,a,r),t.child;case 6:return e===null&&I7(t),null;case 13:return oce(e,t,r);case 4:return S7(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=ON(t,null,n,r):Zl(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:If(n,o),ece(e,t,n,o,r);case 7:return Zl(e,t,t.pendingProps,r),t.child;case 8:return Zl(e,t,t.pendingProps.children,r),t.child;case 12:return Zl(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var u=t.type._context;if(Pi(CN,u._currentValue),u._currentValue=i,a!==null)if(u=a.value,i=gc(u,i)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(u,i):1073741823)|0,i===0){if(a.children===o.children&&!Kl.current){t=uh(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var p=u.dependencies;if(p!==null){a=u.child;for(var h=p.firstContext;h!==null;){if(h.context===n&&h.observedBits&i){u.tag===1&&(h=dg(-1,r&-r),h.tag=2,hg(u,h)),u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),hfe(u.return,r),p.lanes|=r;break}h=h.next}}else a=u.tag===10&&u.type===t.type?null:u.child;if(a!==null)a.return=u;else for(a=u;a!==null;){if(a===t){a=null;break}if(u=a.sibling,u!==null){u.return=a.return,a=u;break}a=a.return}u=a}Zl(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps,n=i.children,sx(t,r),o=_c(o,i.unstable_observedBits),n=n(o),t.flags|=1,Zl(e,t,n,r),t.child;case 14:return o=t.type,i=If(o,t.pendingProps),i=If(o.type,i),tce(e,t,o,i,n,r);case 15:return Cfe(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:If(n,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Xl(n)?(e=!0,dN(t)):e=!1,sx(t,r),vfe(t,n,o),E7(t,n,o,r),C7(null,t,n,!0,e,r);case 19:return uce(e,t,r);case 23:return Z9(e,t,r);case 24:return Z9(e,t,r);}throw Error(Gt(156,t.tag))};function Sct(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function vc(e,t,r,n){return new Sct(e,t,r,n)}function CU(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ict(e){if(typeof e=="function")return CU(e)?1:0;if(e!=null){if(e=e.$$typeof,e===VN)return 11;if(e===GN)return 14}return 2}function wg(e,t){var r=e.alternate;return r===null?(r=vc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function yN(e,t,r,n,o,i){var a=2;if(n=e,typeof e=="function")CU(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ag:return fx(r.children,o,i,t);case xce:a=8,o|=16;break;case G7:a=8,o|=1;break;case T2:return e=vc(12,r,t,o|8),e.elementType=T2,e.type=T2,e.lanes=i,e;case M2:return e=vc(13,r,t,o),e.type=M2,e.elementType=M2,e.lanes=i,e;case _N:return e=vc(19,r,t,o),e.elementType=_N,e.lanes=i,e;case K7:return AU(r,o,i,t);case t7:return e=vc(24,r,t,o),e.elementType=t7,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case H7:a=10;break e;case W7:a=9;break e;case VN:a=11;break e;case GN:a=14;break e;case $7:a=16,n=null;break e;case Y7:a=22;break e;}throw Error(Gt(130,e==null?e:typeof e,""));}return t=vc(a,r,t,o),t.elementType=e,t.type=n,t.lanes=i,t}function fx(e,t,r,n){return e=vc(7,e,n,t),e.lanes=r,e}function AU(e,t,r,n){return e=vc(23,e,n,t),e.elementType=K7,e.lanes=r,e}function J9(e,t,r){return e=vc(6,e,null,t),e.lanes=r,e}function Q9(e,t,r){return t=vc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tct(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=j9(0),this.expirationTimes=j9(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=j9(0),this.mutableSourceEagerHydrationData=null}function Mct(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Uy,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function UN(e,t,r,n){var o=t.current,i=Bu(),a=mg(o);e:if(r){r=r._reactInternals;t:{if(Jy(r)!==r||r.tag!==1)throw Error(Gt(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Xl(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(Gt(171))}if(r.tag===1){var p=r.type;if(Xl(p)){r=sfe(r,p,u);break e}}r=u}else r=xg;return t.context===null?t.context=r:t.pendingContext=r,t=dg(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),hg(o,t),gg(o,a,i),a}function e7(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function yce(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function DU(e,t){yce(e,t),(e=e.alternate)&&yce(e,t)}function Cct(){return null}function NU(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new Tct(e,t,r!=null&&r.hydrate===!0),t=vc(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,mU(t),e[vx]=r.current,rfe(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var o=t._getVersion;o=o(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,o]:r.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=r}NU.prototype.render=function(e){UN(e,this._internalRoot,null,null)};NU.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;UN(null,e,null,function(){t[vx]=null})};function rI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Act(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new NU(e,0,t?{hydrate:!0}:void 0)}function t5(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i._internalRoot;if(typeof o=="function"){var u=o;o=function(){var h=e7(a);u.call(h)}}UN(t,a,e,o)}else{if(i=r._reactRootContainer=Act(r,n),a=i._internalRoot,typeof o=="function"){var p=o;o=function(){var h=e7(a);p.call(h)}}qfe(function(){UN(t,a,e,o)})}return e7(a)}kce=function(e){if(e.tag===13){var t=Bu();gg(e,4,t),DU(e,4)}};tU=function(e){if(e.tag===13){var t=Bu();gg(e,67108864,t),DU(e,67108864)}};Rce=function(e){if(e.tag===13){var t=Bu(),r=mg(e);gg(e,r,t),DU(e,r)}};jce=function(e,t){return t()};f7=function(e,t,r){switch(t){case"input":if(n7(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=KN(n);if(!o)throw Error(Gt(90));wce(n),n7(n,o)}}}break;case"textarea":Sce(e,r);break;case"select":t=r.value,t!=null&&nx(e,!!r.multiple,t,!1);}};J7=jfe;Nce=function(e,t,r,n,o){var i=Zr;Zr|=4;try{return Yy(98,e.bind(null,t,r,n,o))}finally{Zr=i,Zr===0&&(xx(),Dp())}};Q7=function(){!(Zr&49)&&(mct(),Sg())};Oce=function(e,t){var r=Zr;Zr|=2;try{return e(t)}finally{Zr=r,Zr===0&&(xx(),Dp())}};function Hfe(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rI(t))throw Error(Gt(200));return Mct(e,t,null,r)}var Dct={Events:[Q2,Q_,KN,Ace,Dce,Sg,{current:!1}]},_2={findFiberByHostInstance:Vy,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Nct={bundleType:_2.bundleType,version:_2.version,rendererPackageName:_2.rendererPackageName,rendererConfig:_2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xy.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Pce(e),e===null?null:e.stateNode},findFiberByHostInstance:_2.findFiberByHostInstance||Cct,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(x2=__REACT_DEVTOOLS_GLOBAL_HOOK__,!x2.isDisabled&&x2.supportsFiber))try{fU=x2.inject(Nct),Wy=x2}catch(e){}var x2;bc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dct;bc.createPortal=Hfe;bc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Gt(188)):Error(Gt(268,Object.keys(e)));return e=Pce(t),e=e===null?null:e.stateNode,e};bc.flushSync=function(e,t){var r=Zr;if(r&48)return e(t);Zr|=1;try{if(e)return Yy(99,e.bind(null,t))}finally{Zr=r,Dp()}};bc.hydrate=function(e,t,r){if(!rI(t))throw Error(Gt(200));return t5(null,e,t,!0,r)};bc.render=function(e,t,r){if(!rI(t))throw Error(Gt(200));return t5(null,e,t,!1,r)};bc.unmountComponentAtNode=function(e){if(!rI(e))throw Error(Gt(40));return e._reactRootContainer?(qfe(function(){t5(null,null,e,!1,function(){e._reactRootContainer=null,e[vx]=null})}),!0):!1};bc.unstable_batchedUpdates=jfe;bc.unstable_createPortal=function(e,t){return Hfe(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};bc.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!rI(r))throw Error(Gt(200));if(e==null||e._reactInternals===void 0)throw Error(Gt(38));return t5(e,t,r,!1,n)};bc.version="17.0.2"});var Si=M((A5r,Yfe)=>{"use strict";function $fe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($fe)}catch(e){console.error(e)}}$fe(),Yfe.exports=Wfe()});var $t=M((OU,Zfe)=>{"use strict";var nI=function(e){return e&&e.Math===Math&&e};Zfe.exports=nI(typeof globalThis=="object"&&globalThis)||nI(typeof window=="object"&&window)||nI(typeof self=="object"&&self)||nI(typeof global=="object"&&global)||nI(typeof OU=="object"&&OU)||function(){return this}()||Function("return this")()});var Tt=M((D5r,Kfe)=>{"use strict";Kfe.exports=function(e){try{return!!e()}catch(t){return!0}}});var Tr=M((N5r,Xfe)=>{"use strict";var Oct=Tt();Xfe.exports=!Oct(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var bx=M((O5r,Jfe)=>{"use strict";var Lct=Tt();Jfe.exports=!Lct(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var er=M((L5r,Qfe)=>{"use strict";var Pct=bx(),r5=Function.prototype.call;Qfe.exports=Pct?r5.bind(r5):function(){return r5.apply(r5,arguments)}});var oI=M(rpe=>{"use strict";var epe={}.propertyIsEnumerable,tpe=Object.getOwnPropertyDescriptor,kct=tpe&&!epe.call({1:2},1);rpe.f=kct?function(t){var r=tpe(this,t);return!!r&&r.enumerable}:epe});var Jl=M((k5r,npe)=>{"use strict";npe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var gt=M((R5r,ape)=>{"use strict";var ope=bx(),ipe=Function.prototype,LU=ipe.call,Rct=ope&&ipe.bind.bind(LU,LU);ape.exports=ope?Rct:function(e){return function(){return LU.apply(e,arguments)}}});var as=M((j5r,lpe)=>{"use strict";var spe=gt(),jct=spe({}.toString),qct=spe("".slice);lpe.exports=function(e){return qct(jct(e),8,-1)}});var ph=M((q5r,upe)=>{"use strict";var zct=gt(),Fct=Tt(),Uct=as(),PU=Object,Bct=zct("".split);upe.exports=Fct(function(){return!PU("z").propertyIsEnumerable(0)})?function(e){return Uct(e)==="String"?Bct(e,""):PU(e)}:PU});var oa=M((z5r,cpe)=>{"use strict";cpe.exports=function(e){return e==null}});var Go=M((F5r,fpe)=>{"use strict";var Vct=oa(),Gct=TypeError;fpe.exports=function(e){if(Vct(e))throw new Gct("Can't call method on "+e);return e}});var ia=M((U5r,ppe)=>{"use strict";var Hct=ph(),Wct=Go();ppe.exports=function(e){return Hct(Wct(e))}});var Kr=M((B5r,dpe)=>{"use strict";var kU=typeof document=="object"&&document.all;dpe.exports=typeof kU=="undefined"&&kU!==void 0?function(e){return typeof e=="function"||e===kU}:function(e){return typeof e=="function"}});var Br=M((V5r,hpe)=>{"use strict";var $ct=Kr();hpe.exports=function(e){return typeof e=="object"?e!==null:$ct(e)}});var Fr=M((G5r,mpe)=>{"use strict";var RU=$t(),Yct=Kr(),Zct=function(e){return Yct(e)?e:void 0};mpe.exports=function(e,t){return arguments.length<2?Zct(RU[e]):RU[e]&&RU[e][t]}});var ss=M((H5r,gpe)=>{"use strict";var Kct=gt();gpe.exports=Kct({}.isPrototypeOf)});var Mf=M((W5r,_pe)=>{"use strict";var Xct=$t(),vpe=Xct.navigator,ype=vpe&&vpe.userAgent;_pe.exports=ype?String(ype):""});var Np=M(($5r,Ipe)=>{"use strict";var Spe=$t(),jU=Mf(),xpe=Spe.process,bpe=Spe.Deno,wpe=xpe&&xpe.versions||bpe&&bpe.version,Epe=wpe&&wpe.v8,Cf,n5;Epe&&(Cf=Epe.split("."),n5=Cf[0]>0&&Cf[0]<4?1:+(Cf[0]+Cf[1]));!n5&&jU&&(Cf=jU.match(/Edge\/(\d+)/),(!Cf||Cf[1]>=74)&&(Cf=jU.match(/Chrome\/(\d+)/),Cf&&(n5=+Cf[1])));Ipe.exports=n5});var Ig=M((Y5r,Mpe)=>{"use strict";var Tpe=Np(),Jct=Tt(),Qct=$t(),eft=Qct.String;Mpe.exports=!!Object.getOwnPropertySymbols&&!Jct(function(){var e=Symbol("symbol detection");return!eft(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&Tpe&&Tpe<41})});var qU=M((Z5r,Cpe)=>{"use strict";var tft=Ig();Cpe.exports=tft&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var dh=M((K5r,Ape)=>{"use strict";var rft=Fr(),nft=Kr(),oft=ss(),ift=qU(),aft=Object;Ape.exports=ift?function(e){return typeof e=="symbol"}:function(e){var t=rft("Symbol");return nft(t)&&oft(t.prototype,aft(e))}});var Tg=M((X5r,Dpe)=>{"use strict";var sft=String;Dpe.exports=function(e){try{return sft(e)}catch(t){return"Object"}}});var kr=M((J5r,Npe)=>{"use strict";var lft=Kr(),uft=Tg(),cft=TypeError;Npe.exports=function(e){if(lft(e))return e;throw new cft(uft(e)+" is not a function")}});var ki=M((Q5r,Ope)=>{"use strict";var fft=kr(),pft=oa();Ope.exports=function(e,t){var r=e[t];return pft(r)?void 0:fft(r)}});var BU=M((eOr,Lpe)=>{"use strict";var zU=er(),FU=Kr(),UU=Br(),dft=TypeError;Lpe.exports=function(e,t){var r,n;if(t==="string"&&FU(r=e.toString)&&!UU(n=zU(r,e))||FU(r=e.valueOf)&&!UU(n=zU(r,e))||t!=="string"&&FU(r=e.toString)&&!UU(n=zU(r,e)))return n;throw new dft("Can't convert object to primitive value")}});var fn=M((tOr,Ppe)=>{"use strict";Ppe.exports=!1});var o5=M((rOr,Rpe)=>{"use strict";var kpe=$t(),hft=Object.defineProperty;Rpe.exports=function(e,t){try{hft(kpe,e,{value:t,configurable:!0,writable:!0})}catch(r){kpe[e]=t}return t}});var iI=M((nOr,zpe)=>{"use strict";var mft=fn(),gft=$t(),vft=o5(),jpe="__core-js_shared__",qpe=zpe.exports=gft[jpe]||vft(jpe,{});(qpe.versions||(qpe.versions=[])).push({version:"3.39.0",mode:mft?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var hh=M((oOr,Upe)=>{"use strict";var Fpe=iI();Upe.exports=function(e,t){return Fpe[e]||(Fpe[e]=t||{})}});var pn=M((iOr,Bpe)=>{"use strict";var yft=Go(),_ft=Object;Bpe.exports=function(e){return _ft(yft(e))}});var sn=M((aOr,Vpe)=>{"use strict";var xft=gt(),bft=pn(),wft=xft({}.hasOwnProperty);Vpe.exports=Object.hasOwn||function(t,r){return wft(bft(t),r)}});var Mg=M((sOr,Gpe)=>{"use strict";var Eft=gt(),Sft=0,Ift=Math.random(),Tft=Eft(1 .toString);Gpe.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Tft(++Sft+Ift,36)}});var Nr=M((lOr,Wpe)=>{"use strict";var Mft=$t(),Cft=hh(),Hpe=sn(),Aft=Mg(),Dft=Ig(),Nft=qU(),wx=Mft.Symbol,VU=Cft("wks"),Oft=Nft?wx.for||wx:wx&&wx.withoutSetter||Aft;Wpe.exports=function(e){return Hpe(VU,e)||(VU[e]=Dft&&Hpe(wx,e)?wx[e]:Oft("Symbol."+e)),VU[e]}});var aI=M((uOr,Zpe)=>{"use strict";var Lft=er(),$pe=Br(),Ype=dh(),Pft=ki(),kft=BU(),Rft=Nr(),jft=TypeError,qft=Rft("toPrimitive");Zpe.exports=function(e,t){if(!$pe(e)||Ype(e))return e;var r=Pft(e,qft),n;if(r){if(t===void 0&&(t="default"),n=Lft(r,e,t),!$pe(n)||Ype(n))return n;throw new jft("Can't convert object to primitive value")}return t===void 0&&(t="number"),kft(e,t)}});var Op=M((cOr,Kpe)=>{"use strict";var zft=aI(),Fft=dh();Kpe.exports=function(e){var t=zft(e,"string");return Fft(t)?t:t+""}});var sI=M((fOr,Jpe)=>{"use strict";var Uft=$t(),Xpe=Br(),GU=Uft.document,Bft=Xpe(GU)&&Xpe(GU.createElement);Jpe.exports=function(e){return Bft?GU.createElement(e):{}}});var HU=M((pOr,Qpe)=>{"use strict";var Vft=Tr(),Gft=Tt(),Hft=sI();Qpe.exports=!Vft&&!Gft(function(){return Object.defineProperty(Hft("div"),"a",{get:function(){return 7}}).a!==7})});var Ra=M(tde=>{"use strict";var Wft=Tr(),$ft=er(),Yft=oI(),Zft=Jl(),Kft=ia(),Xft=Op(),Jft=sn(),Qft=HU(),ede=Object.getOwnPropertyDescriptor;tde.f=Wft?ede:function(t,r){if(t=Kft(t),r=Xft(r),Qft)try{return ede(t,r)}catch(n){}if(Jft(t,r))return Zft(!$ft(Yft.f,t,r),t[r])}});var WU=M((hOr,rde)=>{"use strict";var ept=Tr(),tpt=Tt();rde.exports=ept&&tpt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Jt=M((mOr,nde)=>{"use strict";var rpt=Br(),npt=String,opt=TypeError;nde.exports=function(e){if(rpt(e))return e;throw new opt(npt(e)+" is not an object")}});var Lo=M(ide=>{"use strict";var ipt=Tr(),apt=HU(),spt=WU(),i5=Jt(),ode=Op(),lpt=TypeError,$U=Object.defineProperty,upt=Object.getOwnPropertyDescriptor,YU="enumerable",ZU="configurable",KU="writable";ide.f=ipt?spt?function(t,r,n){if(i5(t),r=ode(r),i5(n),typeof t=="function"&&r==="prototype"&&"value"in n&&KU in n&&!n[KU]){var o=upt(t,r);o&&o[KU]&&(t[r]=n.value,n={configurable:ZU in n?n[ZU]:o[ZU],enumerable:YU in n?n[YU]:o[YU],writable:!1})}return $U(t,r,n)}:$U:function(t,r,n){if(i5(t),r=ode(r),i5(n),apt)try{return $U(t,r,n)}catch(o){}if("get"in n||"set"in n)throw new lpt("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var aa=M((vOr,ade)=>{"use strict";var cpt=Tr(),fpt=Lo(),ppt=Jl();ade.exports=cpt?function(e,t,r){return fpt.f(e,t,ppt(1,r))}:function(e,t,r){return e[t]=r,e}});var e0=M((yOr,lde)=>{"use strict";var XU=Tr(),dpt=sn(),sde=Function.prototype,hpt=XU&&Object.getOwnPropertyDescriptor,JU=dpt(sde,"name"),mpt=JU&&function(){}.name==="something",gpt=JU&&(!XU||XU&&hpt(sde,"name").configurable);lde.exports={EXISTS:JU,PROPER:mpt,CONFIGURABLE:gpt}});var lI=M((_Or,ude)=>{"use strict";var vpt=gt(),ypt=Kr(),QU=iI(),_pt=vpt(Function.toString);ypt(QU.inspectSource)||(QU.inspectSource=function(e){return _pt(e)});ude.exports=QU.inspectSource});var eB=M((xOr,fde)=>{"use strict";var xpt=$t(),bpt=Kr(),cde=xpt.WeakMap;fde.exports=bpt(cde)&&/native code/.test(String(cde))});var uI=M((bOr,dde)=>{"use strict";var wpt=hh(),Ept=Mg(),pde=wpt("keys");dde.exports=function(e){return pde[e]||(pde[e]=Ept(e))}});var Ex=M((wOr,hde)=>{"use strict";hde.exports={}});var ro=M((EOr,vde)=>{"use strict";var Spt=eB(),gde=$t(),Ipt=Br(),Tpt=aa(),tB=sn(),rB=iI(),Mpt=uI(),Cpt=Ex(),mde="Object already initialized",nB=gde.TypeError,Apt=gde.WeakMap,a5,cI,s5,Dpt=function(e){return s5(e)?cI(e):a5(e,{})},Npt=function(e){return function(t){var r;if(!Ipt(t)||(r=cI(t)).type!==e)throw new nB("Incompatible receiver, "+e+" required");return r}};Spt||rB.state?(Af=rB.state||(rB.state=new Apt),Af.get=Af.get,Af.has=Af.has,Af.set=Af.set,a5=function(e,t){if(Af.has(e))throw new nB(mde);return t.facade=e,Af.set(e,t),t},cI=function(e){return Af.get(e)||{}},s5=function(e){return Af.has(e)}):(t0=Mpt("state"),Cpt[t0]=!0,a5=function(e,t){if(tB(e,t0))throw new nB(mde);return t.facade=e,Tpt(e,t0,t),t},cI=function(e){return tB(e,t0)?e[t0]:{}},s5=function(e){return tB(e,t0)});var Af,t0;vde.exports={set:a5,get:cI,has:s5,enforce:Dpt,getterFor:Npt}});var fI=M((SOr,xde)=>{"use strict";var iB=gt(),Opt=Tt(),Lpt=Kr(),l5=sn(),oB=Tr(),Ppt=e0().CONFIGURABLE,kpt=lI(),_de=ro(),Rpt=_de.enforce,jpt=_de.get,yde=String,u5=Object.defineProperty,qpt=iB("".slice),zpt=iB("".replace),Fpt=iB([].join),Upt=oB&&!Opt(function(){return u5(function(){},"length",{value:8}).length!==8}),Bpt=String(String).split("String"),Vpt=xde.exports=function(e,t,r){qpt(yde(t),0,7)==="Symbol("&&(t="["+zpt(yde(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!l5(e,"name")||Ppt&&e.name!==t)&&(oB?u5(e,"name",{value:t,configurable:!0}):e.name=t),Upt&&r&&l5(r,"arity")&&e.length!==r.arity&&u5(e,"length",{value:r.arity});try{r&&l5(r,"constructor")&&r.constructor?oB&&u5(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var n=Rpt(e);return l5(n,"source")||(n.source=Fpt(Bpt,typeof t=="string"?t:"")),e};Function.prototype.toString=Vpt(function(){return Lpt(this)&&jpt(this).source||kpt(this)},"toString")});var fo=M((IOr,bde)=>{"use strict";var Gpt=Kr(),Hpt=Lo(),Wpt=fI(),$pt=o5();bde.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(Gpt(r)&&Wpt(r,i,n),n.global)o?e[t]=r:$pt(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch(a){}o?e[t]=r:Hpt.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var aB=M((TOr,wde)=>{"use strict";var Ypt=Math.ceil,Zpt=Math.floor;wde.exports=Math.trunc||function(t){var r=+t;return(r>0?Zpt:Ypt)(r)}});var Qo=M((MOr,Ede)=>{"use strict";var Kpt=aB();Ede.exports=function(e){var t=+e;return t!==t||t===0?0:Kpt(t)}});var Df=M((COr,Sde)=>{"use strict";var Xpt=Qo(),Jpt=Math.max,Qpt=Math.min;Sde.exports=function(e,t){var r=Xpt(e);return r<0?Jpt(r+t,0):Qpt(r,t)}});var Ql=M((AOr,Ide)=>{"use strict";var edt=Qo(),tdt=Math.min;Ide.exports=function(e){var t=edt(e);return t>0?tdt(t,9007199254740991):0}});var Tn=M((DOr,Tde)=>{"use strict";var rdt=Ql();Tde.exports=function(e){return rdt(e.length)}});var Sx=M((NOr,Cde)=>{"use strict";var ndt=ia(),odt=Df(),idt=Tn(),Mde=function(e){return function(t,r,n){var o=ndt(t),i=idt(o);if(i===0)return!e&&-1;var a=odt(n,i),u;if(e&&r!==r){for(;i>a;)if(u=o[a++],u!==u)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}};Cde.exports={includes:Mde(!0),indexOf:Mde(!1)}});var lB=M((OOr,Dde)=>{"use strict";var adt=gt(),sB=sn(),sdt=ia(),ldt=Sx().indexOf,udt=Ex(),Ade=adt([].push);Dde.exports=function(e,t){var r=sdt(e),n=0,o=[],i;for(i in r)!sB(udt,i)&&sB(r,i)&&Ade(o,i);for(;t.length>n;)sB(r,i=t[n++])&&(~ldt(o,i)||Ade(o,i));return o}});var c5=M((LOr,Nde)=>{"use strict";Nde.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Cg=M(Ode=>{"use strict";var cdt=lB(),fdt=c5(),pdt=fdt.concat("length","prototype");Ode.f=Object.getOwnPropertyNames||function(t){return cdt(t,pdt)}});var pI=M(Lde=>{"use strict";Lde.f=Object.getOwnPropertySymbols});var f5=M((ROr,Pde)=>{"use strict";var ddt=Fr(),hdt=gt(),mdt=Cg(),gdt=pI(),vdt=Jt(),ydt=hdt([].concat);Pde.exports=ddt("Reflect","ownKeys")||function(t){var r=mdt.f(vdt(t)),n=gdt.f;return n?ydt(r,n(t)):r}});var r0=M((jOr,Rde)=>{"use strict";var kde=sn(),_dt=f5(),xdt=Ra(),bdt=Lo();Rde.exports=function(e,t,r){for(var n=_dt(t),o=bdt.f,i=xdt.f,a=0;a<n.length;a++){var u=n[a];!kde(e,u)&&!(r&&kde(r,u))&&o(e,u,i(t,u))}}});var Ix=M((qOr,jde)=>{"use strict";var wdt=Tt(),Edt=Kr(),Sdt=/#|\.prototype\./,dI=function(e,t){var r=Tdt[Idt(e)];return r===Cdt?!0:r===Mdt?!1:Edt(t)?wdt(t):!!t},Idt=dI.normalize=function(e){return String(e).replace(Sdt,".").toLowerCase()},Tdt=dI.data={},Mdt=dI.NATIVE="N",Cdt=dI.POLYFILL="P";jde.exports=dI});var re=M((zOr,qde)=>{"use strict";var p5=$t(),Adt=Ra().f,Ddt=aa(),Ndt=fo(),Odt=o5(),Ldt=r0(),Pdt=Ix();qde.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,a,u,p,h,g;if(n?a=p5:o?a=p5[r]||Odt(r,{}):a=p5[r]&&p5[r].prototype,a)for(u in t){if(h=t[u],e.dontCallGetSet?(g=Adt(a,u),p=g&&g.value):p=a[u],i=Pdt(n?u:r+(o?".":"#")+u,e.forced),!i&&p!==void 0){if(typeof h==typeof p)continue;Ldt(h,p)}(e.sham||p&&p.sham)&&Ddt(h,"sham",!0),Ndt(a,u,h,e)}}});var d5=M((FOr,Fde)=>{"use strict";var kdt=Nr(),Rdt=kdt("toStringTag"),zde={};zde[Rdt]="z";Fde.exports=String(zde)==="[object z]"});var eu=M((UOr,Ude)=>{"use strict";var jdt=d5(),qdt=Kr(),h5=as(),zdt=Nr(),Fdt=zdt("toStringTag"),Udt=Object,Bdt=h5(function(){return arguments}())==="Arguments",Vdt=function(e,t){try{return e[t]}catch(r){}};Ude.exports=jdt?h5:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=Vdt(t=Udt(e),Fdt))=="string"?r:Bdt?h5(t):(n=h5(t))==="Object"&&qdt(t.callee)?"Arguments":n}});var Hr=M((BOr,Bde)=>{"use strict";var Gdt=eu(),Hdt=String;Bde.exports=function(e){if(Gdt(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return Hdt(e)}});var n0=M((VOr,Vde)=>{"use strict";var Wdt=lB(),$dt=c5();Vde.exports=Object.keys||function(t){return Wdt(t,$dt)}});var m5=M(Gde=>{"use strict";var Ydt=Tr(),Zdt=WU(),Kdt=Lo(),Xdt=Jt(),Jdt=ia(),Qdt=n0();Gde.f=Ydt&&!Zdt?Object.defineProperties:function(t,r){Xdt(t);for(var n=Jdt(r),o=Qdt(r),i=o.length,a=0,u;i>a;)Kdt.f(t,u=o[a++],n[u]);return t}});var uB=M((HOr,Hde)=>{"use strict";var eht=Fr();Hde.exports=eht("document","documentElement")});var Ri=M((WOr,Jde)=>{"use strict";var tht=Jt(),rht=m5(),Wde=c5(),nht=Ex(),oht=uB(),iht=sI(),aht=uI(),$de=">",Yde="<",fB="prototype",pB="script",Kde=aht("IE_PROTO"),cB=function(){},Xde=function(e){return Yde+pB+$de+e+Yde+"/"+pB+$de},Zde=function(e){e.write(Xde("")),e.close();var t=e.parentWindow.Object;return e=null,t},sht=function(){var e=iht("iframe"),t="java"+pB+":",r;return e.style.display="none",oht.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(Xde("document.F=Object")),r.close(),r.F},g5,v5=function(){try{g5=new ActiveXObject("htmlfile")}catch(t){}v5=typeof document!="undefined"?document.domain&&g5?Zde(g5):sht():Zde(g5);for(var e=Wde.length;e--;)delete v5[fB][Wde[e]];return v5()};nht[Kde]=!0;Jde.exports=Object.create||function(t,r){var n;return t!==null?(cB[fB]=tht(t),n=new cB,cB[fB]=null,n[Kde]=t):n=v5(),r===void 0?n:rht.f(n,r)}});var tu=M(($Or,Qde)=>{"use strict";var lht=gt();Qde.exports=lht([].slice)});var y5=M((YOr,rhe)=>{"use strict";var uht=as(),cht=ia(),ehe=Cg().f,fht=tu(),the=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],pht=function(e){try{return ehe(e)}catch(t){return fht(the)}};rhe.exports.f=function(t){return the&&uht(t)==="Window"?pht(t):ehe(cht(t))}});var ei=M((ZOr,ohe)=>{"use strict";var nhe=fI(),dht=Lo();ohe.exports=function(e,t,r){return r.get&&nhe(r.get,t,{getter:!0}),r.set&&nhe(r.set,t,{setter:!0}),dht.f(e,t,r)}});var dB=M(ihe=>{"use strict";var hht=Nr();ihe.f=hht});var _5=M((XOr,ahe)=>{"use strict";var mht=$t();ahe.exports=mht});var yi=M((JOr,lhe)=>{"use strict";var she=_5(),ght=sn(),vht=dB(),yht=Lo().f;lhe.exports=function(e){var t=she.Symbol||(she.Symbol={});ght(t,e)||yht(t,e,{value:vht.f(e)})}});var hB=M((QOr,uhe)=>{"use strict";var _ht=er(),xht=Fr(),bht=Nr(),wht=fo();uhe.exports=function(){var e=xht("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=bht("toPrimitive");t&&!t[n]&&wht(t,n,function(o){return _ht(r,this)},{arity:1})}});var bl=M((eLr,fhe)=>{"use strict";var Eht=Lo().f,Sht=sn(),Iht=Nr(),che=Iht("toStringTag");fhe.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!Sht(e,che)&&Eht(e,che,{configurable:!0,value:t})}});var mh=M((tLr,phe)=>{"use strict";var Tht=as(),Mht=gt();phe.exports=function(e){if(Tht(e)==="Function")return Mht(e)}});var xo=M((rLr,hhe)=>{"use strict";var dhe=mh(),Cht=kr(),Aht=bx(),Dht=dhe(dhe.bind);hhe.exports=function(e,t){return Cht(e),t===void 0?e:Aht?Dht(e,t):function(){return e.apply(t,arguments)}}});var Nf=M((nLr,mhe)=>{"use strict";var Nht=as();mhe.exports=Array.isArray||function(t){return Nht(t)==="Array"}});var Of=M((oLr,xhe)=>{"use strict";var Oht=gt(),Lht=Tt(),ghe=Kr(),Pht=eu(),kht=Fr(),Rht=lI(),vhe=function(){},yhe=kht("Reflect","construct"),mB=/^\s*(?:class|function)\b/,jht=Oht(mB.exec),qht=!mB.test(vhe),hI=function(t){if(!ghe(t))return!1;try{return yhe(vhe,[],t),!0}catch(r){return!1}},_he=function(t){if(!ghe(t))return!1;switch(Pht(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return qht||!!jht(mB,Rht(t))}catch(r){return!0}};_he.sham=!0;xhe.exports=!yhe||Lht(function(){var e;return hI(hI.call)||!hI(Object)||!hI(function(){e=!0})||e})?_he:hI});var She=M((iLr,Ehe)=>{"use strict";var bhe=Nf(),zht=Of(),Fht=Br(),Uht=Nr(),Bht=Uht("species"),whe=Array;Ehe.exports=function(e){var t;return bhe(e)&&(t=e.constructor,zht(t)&&(t===whe||bhe(t.prototype))?t=void 0:Fht(t)&&(t=t[Bht],t===null&&(t=void 0))),t===void 0?whe:t}});var Tx=M((aLr,Ihe)=>{"use strict";var Vht=She();Ihe.exports=function(e,t){return new(Vht(e))(t===0?0:t)}});var ji=M((sLr,Mhe)=>{"use strict";var Ght=xo(),Hht=gt(),Wht=ph(),$ht=pn(),Yht=Tn(),Zht=Tx(),The=Hht([].push),Ag=function(e){var t=e===1,r=e===2,n=e===3,o=e===4,i=e===6,a=e===7,u=e===5||i;return function(p,h,g,x){for(var b=$ht(p),T=Wht(b),A=Yht(T),L=Ght(h,g),P=0,k=x||Zht,q=t?k(p,A):r||a?k(p,0):void 0,U,H;A>P;P++)if((u||P in T)&&(U=T[P],H=L(U,P,b),e))if(t)q[P]=H;else if(H)switch(e){case 3:return!0;case 5:return U;case 6:return P;case 2:The(q,U);}else switch(e){case 4:return!1;case 7:The(q,U);}return i?-1:n||o?o:q}};Mhe.exports={forEach:Ag(0),map:Ag(1),filter:Ag(2),some:Ag(3),every:Ag(4),find:Ag(5),findIndex:Ag(6),filterReject:Ag(7)}});var Ghe=M(()=>{"use strict";var x5=re(),vI=$t(),SB=er(),Kht=gt(),Xht=fn(),Mx=Tr(),Cx=Ig(),Jht=Tt(),ja=sn(),Qht=ss(),_B=Jt(),b5=ia(),IB=Op(),emt=Hr(),xB=Jl(),Ax=Ri(),Dhe=n0(),tmt=Cg(),Nhe=y5(),rmt=pI(),Ohe=Ra(),Lhe=Lo(),nmt=m5(),Phe=oI(),gB=fo(),omt=ei(),TB=hh(),imt=uI(),khe=Ex(),Che=Mg(),amt=Nr(),smt=dB(),lmt=yi(),umt=hB(),cmt=bl(),Rhe=ro(),w5=ji().forEach,ru=imt("hidden"),E5="Symbol",gI="prototype",fmt=Rhe.set,Ahe=Rhe.getterFor(E5),wc=Object[gI],o0=vI.Symbol,mI=o0&&o0[gI],pmt=vI.RangeError,dmt=vI.TypeError,vB=vI.QObject,jhe=Ohe.f,i0=Lhe.f,qhe=Nhe.f,hmt=Phe.f,zhe=Kht([].push),gh=TB("symbols"),yI=TB("op-symbols"),mmt=TB("wks"),bB=!vB||!vB[gI]||!vB[gI].findChild,Fhe=function(e,t,r){var n=jhe(wc,t);n&&delete wc[t],i0(e,t,r),n&&e!==wc&&i0(wc,t,n)},wB=Mx&&Jht(function(){return Ax(i0({},"a",{get:function(){return i0(this,"a",{value:7}).a}})).a!==7})?Fhe:i0,yB=function(e,t){var r=gh[e]=Ax(mI);return fmt(r,{type:E5,tag:e,description:t}),Mx||(r.description=t),r},S5=function(t,r,n){t===wc&&S5(yI,r,n),_B(t);var o=IB(r);return _B(n),ja(gh,o)?(n.enumerable?(ja(t,ru)&&t[ru][o]&&(t[ru][o]=!1),n=Ax(n,{enumerable:xB(0,!1)})):(ja(t,ru)||i0(t,ru,xB(1,Ax(null))),t[ru][o]=!0),wB(t,o,n)):i0(t,o,n)},MB=function(t,r){_B(t);var n=b5(r),o=Dhe(n).concat(Vhe(n));return w5(o,function(i){(!Mx||SB(EB,n,i))&&S5(t,i,n[i])}),t},gmt=function(t,r){return r===void 0?Ax(t):MB(Ax(t),r)},EB=function(t){var r=IB(t),n=SB(hmt,this,r);return this===wc&&ja(gh,r)&&!ja(yI,r)?!1:n||!ja(this,r)||!ja(gh,r)||ja(this,ru)&&this[ru][r]?n:!0},Uhe=function(t,r){var n=b5(t),o=IB(r);if(!(n===wc&&ja(gh,o)&&!ja(yI,o))){var i=jhe(n,o);return i&&ja(gh,o)&&!(ja(n,ru)&&n[ru][o])&&(i.enumerable=!0),i}},Bhe=function(t){var r=qhe(b5(t)),n=[];return w5(r,function(o){!ja(gh,o)&&!ja(khe,o)&&zhe(n,o)}),n},Vhe=function(e){var t=e===wc,r=qhe(t?yI:b5(e)),n=[];return w5(r,function(o){ja(gh,o)&&(!t||ja(wc,o))&&zhe(n,gh[o])}),n};Cx||(o0=function(){if(Qht(mI,this))throw new dmt("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:emt(arguments[0]),r=Che(t),n=function(o){var i=this===void 0?vI:this;i===wc&&SB(n,yI,o),ja(i,ru)&&ja(i[ru],r)&&(i[ru][r]=!1);var a=xB(1,o);try{wB(i,r,a)}catch(u){if(!(u instanceof pmt))throw u;Fhe(i,r,a)}};return Mx&&bB&&wB(wc,r,{configurable:!0,set:n}),yB(r,t)},mI=o0[gI],gB(mI,"toString",function(){return Ahe(this).tag}),gB(o0,"withoutSetter",function(e){return yB(Che(e),e)}),Phe.f=EB,Lhe.f=S5,nmt.f=MB,Ohe.f=Uhe,tmt.f=Nhe.f=Bhe,rmt.f=Vhe,smt.f=function(e){return yB(amt(e),e)},Mx&&(omt(mI,"description",{configurable:!0,get:function(){return Ahe(this).description}}),Xht||gB(wc,"propertyIsEnumerable",EB,{unsafe:!0})));x5({global:!0,constructor:!0,wrap:!0,forced:!Cx,sham:!Cx},{Symbol:o0});w5(Dhe(mmt),function(e){lmt(e)});x5({target:E5,stat:!0,forced:!Cx},{useSetter:function(){bB=!0},useSimple:function(){bB=!1}});x5({target:"Object",stat:!0,forced:!Cx,sham:!Mx},{create:gmt,defineProperty:S5,defineProperties:MB,getOwnPropertyDescriptor:Uhe});x5({target:"Object",stat:!0,forced:!Cx},{getOwnPropertyNames:Bhe});umt();cmt(o0,E5);khe[ru]=!0});var CB=M((cLr,Hhe)=>{"use strict";var vmt=Ig();Hhe.exports=vmt&&!!Symbol.for&&!!Symbol.keyFor});var $he=M(()=>{"use strict";var ymt=re(),_mt=Fr(),xmt=sn(),bmt=Hr(),Whe=hh(),wmt=CB(),AB=Whe("string-to-symbol-registry"),Emt=Whe("symbol-to-string-registry");ymt({target:"Symbol",stat:!0,forced:!wmt},{for:function(e){var t=bmt(e);if(xmt(AB,t))return AB[t];var r=_mt("Symbol")(t);return AB[t]=r,Emt[r]=t,r}})});var Zhe=M(()=>{"use strict";var Smt=re(),Imt=sn(),Tmt=dh(),Mmt=Tg(),Cmt=hh(),Amt=CB(),Yhe=Cmt("symbol-to-string-registry");Smt({target:"Symbol",stat:!0,forced:!Amt},{keyFor:function(t){if(!Tmt(t))throw new TypeError(Mmt(t)+" is not a symbol");if(Imt(Yhe,t))return Yhe[t]}})});var Bs=M((mLr,Qhe)=>{"use strict";var Dmt=bx(),Jhe=Function.prototype,Khe=Jhe.apply,Xhe=Jhe.call;Qhe.exports=typeof Reflect=="object"&&Reflect.apply||(Dmt?Xhe.bind(Khe):function(){return Xhe.apply(Khe,arguments)})});var DB=M((gLr,nme)=>{"use strict";var Nmt=gt(),eme=Nf(),Omt=Kr(),tme=as(),Lmt=Hr(),rme=Nmt([].push);nme.exports=function(e){if(Omt(e))return e;if(eme(e)){for(var t=e.length,r=[],n=0;n<t;n++){var o=e[n];typeof o=="string"?rme(r,o):(typeof o=="number"||tme(o)==="Number"||tme(o)==="String")&&rme(r,Lmt(o))}var i=r.length,a=!0;return function(u,p){if(a)return a=!1,p;if(eme(this))return p;for(var h=0;h<i;h++)if(r[h]===u)return p}}}});var NB=M(()=>{"use strict";var Pmt=re(),fme=Fr(),pme=Bs(),kmt=er(),_I=gt(),dme=Tt(),ome=Kr(),ime=dh(),hme=tu(),Rmt=DB(),jmt=Ig(),qmt=String,Dg=fme("JSON","stringify"),I5=_I(/./.exec),ame=_I("".charAt),zmt=_I("".charCodeAt),Fmt=_I("".replace),Umt=_I(1 .toString),Bmt=/[\uD800-\uDFFF]/g,sme=/^[\uD800-\uDBFF]$/,lme=/^[\uDC00-\uDFFF]$/,ume=!jmt||dme(function(){var e=fme("Symbol")("stringify detection");return Dg([e])!=="[null]"||Dg({a:e})!=="{}"||Dg(Object(e))!=="{}"}),cme=dme(function(){return Dg("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Dg("\uDEAD")!=="\"\\udead\""}),Vmt=function(e,t){var r=hme(arguments),n=Rmt(t);if(!(!ome(n)&&(e===void 0||ime(e))))return r[1]=function(o,i){if(ome(n)&&(i=kmt(n,this,qmt(o),i)),!ime(i))return i},pme(Dg,null,r)},Gmt=function(e,t,r){var n=ame(r,t-1),o=ame(r,t+1);return I5(sme,e)&&!I5(lme,o)||I5(lme,e)&&!I5(sme,n)?"\\u"+Umt(zmt(e,0),16):e};Dg&&Pmt({target:"JSON",stat:!0,arity:3,forced:ume||cme},{stringify:function(t,r,n){var o=hme(arguments),i=pme(ume?Vmt:Dg,null,o);return cme&&typeof i=="string"?Fmt(i,Bmt,Gmt):i}})});var gme=M(()=>{"use strict";var Hmt=re(),Wmt=Ig(),$mt=Tt(),mme=pI(),Ymt=pn(),Zmt=!Wmt||$mt(function(){mme.f(1)});Hmt({target:"Object",stat:!0,forced:Zmt},{getOwnPropertySymbols:function(t){var r=mme.f;return r?r(Ymt(t)):[]}})});var vme=M(()=>{"use strict";Ghe();$he();Zhe();NB();gme()});var Sme=M(()=>{"use strict";var Kmt=re(),Xmt=Tr(),Jmt=$t(),T5=gt(),Qmt=sn(),egt=Kr(),tgt=ss(),rgt=Hr(),ngt=ei(),ogt=r0(),vh=Jmt.Symbol,a0=vh&&vh.prototype;Xmt&&egt(vh)&&(!("description"in a0)||vh().description!==void 0)&&(OB={},xI=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:rgt(arguments[0]),r=tgt(a0,this)?new vh(t):t===void 0?vh():vh(t);return t===""&&(OB[r]=!0),r},ogt(xI,vh),xI.prototype=a0,a0.constructor=xI,yme=String(vh("description detection"))==="Symbol(description detection)",_me=T5(a0.valueOf),xme=T5(a0.toString),bme=/^Symbol\((.*)\)[^)]+$/,wme=T5("".replace),Eme=T5("".slice),ngt(a0,"description",{configurable:!0,get:function(){var t=_me(this);if(Qmt(OB,t))return"";var r=xme(t),n=yme?Eme(r,7,-1):wme(r,bme,"$1");return n===""?void 0:n}}),Kmt({global:!0,constructor:!0,forced:!0},{Symbol:xI}));var OB,xI,yme,_me,xme,bme,wme,Eme});var Ime=M(()=>{"use strict";var igt=yi();igt("asyncIterator")});var Tme=M(()=>{"use strict";var agt=yi();agt("hasInstance")});var Mme=M(()=>{"use strict";var sgt=yi();sgt("isConcatSpreadable")});var Cme=M(()=>{"use strict";var lgt=yi();lgt("iterator")});var Ame=M(()=>{"use strict";var ugt=yi();ugt("match")});var Dme=M(()=>{"use strict";var cgt=yi();cgt("matchAll")});var Nme=M(()=>{"use strict";var fgt=yi();fgt("replace")});var Ome=M(()=>{"use strict";var pgt=yi();pgt("search")});var Lme=M(()=>{"use strict";var dgt=yi();dgt("species")});var Pme=M(()=>{"use strict";var hgt=yi();hgt("split")});var kme=M(()=>{"use strict";var mgt=yi(),ggt=hB();mgt("toPrimitive");ggt()});var Rme=M(()=>{"use strict";var vgt=Fr(),ygt=yi(),_gt=bl();ygt("toStringTag");_gt(vgt("Symbol"),"Symbol")});var jme=M(()=>{"use strict";var xgt=yi();xgt("unscopables")});var bI=M((XLr,qme)=>{"use strict";var bgt=gt(),wgt=kr();qme.exports=function(e,t,r){try{return bgt(wgt(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var LB=M((JLr,zme)=>{"use strict";var Egt=Br();zme.exports=function(e){return Egt(e)||e===null}});var PB=M((QLr,Fme)=>{"use strict";var Sgt=LB(),Igt=String,Tgt=TypeError;Fme.exports=function(e){if(Sgt(e))return e;throw new Tgt("Can't set "+Igt(e)+" as a prototype")}});var Ec=M((e3r,Ume)=>{"use strict";var Mgt=bI(),Cgt=Br(),Agt=Go(),Dgt=PB();Ume.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=Mgt(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(o,i){return Agt(o),Dgt(i),Cgt(o)&&(e?r(o,i):o.__proto__=i),o}}():void 0)});var kB=M((t3r,Bme)=>{"use strict";var Ngt=Lo().f;Bme.exports=function(e,t,r){r in e||Ngt(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var Ng=M((r3r,Gme)=>{"use strict";var Ogt=Kr(),Lgt=Br(),Vme=Ec();Gme.exports=function(e,t,r){var n,o;return Vme&&Ogt(n=t.constructor)&&n!==r&&Lgt(o=n.prototype)&&o!==r.prototype&&Vme(e,o),e}});var s0=M((n3r,Hme)=>{"use strict";var Pgt=Hr();Hme.exports=function(e,t){return e===void 0?arguments.length<2?"":t:Pgt(e)}});var RB=M((o3r,Wme)=>{"use strict";var kgt=Br(),Rgt=aa();Wme.exports=function(e,t){kgt(t)&&"cause"in t&&Rgt(e,"cause",t.cause)}});var M5=M((i3r,Zme)=>{"use strict";var jgt=gt(),$me=Error,qgt=jgt("".replace),zgt=function(e){return String(new $me(e).stack)}("zxcasd"),Yme=/\n\s*at [^:]*:[^\n]*/,Fgt=Yme.test(zgt);Zme.exports=function(e,t){if(Fgt&&typeof e=="string"&&!$me.prepareStackTrace)for(;t--;)e=qgt(e,Yme,"");return e}});var jB=M((a3r,Kme)=>{"use strict";var Ugt=Tt(),Bgt=Jl();Kme.exports=!Ugt(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",Bgt(1,7)),e.stack!==7):!0})});var C5=M((s3r,Jme)=>{"use strict";var Vgt=aa(),Ggt=M5(),Hgt=jB(),Xme=Error.captureStackTrace;Jme.exports=function(e,t,r,n){Hgt&&(Xme?Xme(e,t):Vgt(e,"stack",Ggt(r,n)))}});var qB=M((l3r,ige)=>{"use strict";var Qme=Fr(),Wgt=sn(),ege=aa(),$gt=ss(),tge=Ec(),rge=r0(),nge=kB(),Ygt=Ng(),Zgt=s0(),Kgt=RB(),Xgt=C5(),Jgt=Tr(),oge=fn();ige.exports=function(e,t,r,n){var o="stackTraceLimit",i=n?2:1,a=e.split("."),u=a[a.length-1],p=Qme.apply(null,a);if(p){var h=p.prototype;if(!oge&&Wgt(h,"cause")&&delete h.cause,!r)return p;var g=Qme("Error"),x=t(function(b,T){var A=Zgt(n?T:b,void 0),L=n?new p(b):new p;return A!==void 0&&ege(L,"message",A),Xgt(L,x,L.stack,2),this&&$gt(h,this)&&Ygt(L,this,x),arguments.length>i&&Kgt(L,arguments[i]),L});if(x.prototype=h,u!=="Error"?tge?tge(x,g):rge(x,g,{name:!0}):Jgt&&o in p&&(nge(x,p,o),nge(x,p,"prepareStackTrace")),rge(x,p),!oge)try{h.name!==u&&ege(h,"name",u),h.constructor=x}catch(b){}return x}}});var uge=M(()=>{"use strict";var sge=re(),Qgt=$t(),Lp=Bs(),lge=qB(),zB="WebAssembly",age=Qgt[zB],A5=new Error("e",{cause:7}).cause!==7,l0=function(e,t){var r={};r[e]=lge(e,t,A5),sge({global:!0,constructor:!0,arity:1,forced:A5},r)},FB=function(e,t){if(age&&age[e]){var r={};r[e]=lge(zB+"."+e,t,A5),sge({target:zB,stat:!0,constructor:!0,arity:1,forced:A5},r)}};l0("Error",function(e){return function(r){return Lp(e,this,arguments)}});l0("EvalError",function(e){return function(r){return Lp(e,this,arguments)}});l0("RangeError",function(e){return function(r){return Lp(e,this,arguments)}});l0("ReferenceError",function(e){return function(r){return Lp(e,this,arguments)}});l0("SyntaxError",function(e){return function(r){return Lp(e,this,arguments)}});l0("TypeError",function(e){return function(r){return Lp(e,this,arguments)}});l0("URIError",function(e){return function(r){return Lp(e,this,arguments)}});FB("CompileError",function(e){return function(r){return Lp(e,this,arguments)}});FB("LinkError",function(e){return function(r){return Lp(e,this,arguments)}});FB("RuntimeError",function(e){return function(r){return Lp(e,this,arguments)}})});var UB=M((f3r,fge)=>{"use strict";var evt=Tr(),tvt=Tt(),rvt=Jt(),cge=s0(),D5=Error.prototype.toString,nvt=tvt(function(){if(evt){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(D5.call(e)!=="true")return!0}return D5.call({message:1,name:2})!=="2: 1"||D5.call({})!=="Error"});fge.exports=nvt?function(){var t=rvt(this),r=cge(t.name,"Error"),n=cge(t.message);return r?n?r+": "+n:r:n}:D5});var hge=M(()=>{"use strict";var ovt=fo(),pge=UB(),dge=Error.prototype;dge.toString!==pge&&ovt(dge,"toString",pge)});var N5=M((h3r,mge)=>{"use strict";var ivt=Tt();mge.exports=!ivt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var sa=M((m3r,vge)=>{"use strict";var avt=sn(),svt=Kr(),lvt=pn(),uvt=uI(),cvt=N5(),gge=uvt("IE_PROTO"),BB=Object,fvt=BB.prototype;vge.exports=cvt?BB.getPrototypeOf:function(e){var t=lvt(e);if(avt(t,gge))return t[gge];var r=t.constructor;return svt(r)&&t instanceof r?r.prototype:t instanceof BB?fvt:null}});var u0=M((g3r,yge)=>{"use strict";yge.exports={}});var O5=M((v3r,_ge)=>{"use strict";var pvt=Nr(),dvt=u0(),hvt=pvt("iterator"),mvt=Array.prototype;_ge.exports=function(e){return e!==void 0&&(dvt.Array===e||mvt[hvt]===e)}});var Pp=M((y3r,bge)=>{"use strict";var gvt=eu(),xge=ki(),vvt=oa(),yvt=u0(),_vt=Nr(),xvt=_vt("iterator");bge.exports=function(e){if(!vvt(e))return xge(e,xvt)||xge(e,"@@iterator")||yvt[gvt(e)]}});var Og=M((_3r,wge)=>{"use strict";var bvt=er(),wvt=kr(),Evt=Jt(),Svt=Tg(),Ivt=Pp(),Tvt=TypeError;wge.exports=function(e,t){var r=arguments.length<2?Ivt(e):t;if(wvt(r))return Evt(bvt(r,e));throw new Tvt(Svt(e)+" is not iterable")}});var yh=M((x3r,Sge)=>{"use strict";var Mvt=er(),Ege=Jt(),Cvt=ki();Sge.exports=function(e,t,r){var n,o;Ege(e);try{if(n=Cvt(e,"return"),!n){if(t==="throw")throw r;return r}n=Mvt(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return Ege(n),r}});var _i=M((b3r,Cge)=>{"use strict";var Avt=xo(),Dvt=er(),Nvt=Jt(),Ovt=Tg(),Lvt=O5(),Pvt=Tn(),Ige=ss(),kvt=Og(),Rvt=Pp(),Tge=yh(),jvt=TypeError,L5=function(e,t){this.stopped=e,this.result=t},Mge=L5.prototype;Cge.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),a=!!(r&&r.IS_ITERATOR),u=!!(r&&r.INTERRUPTED),p=Avt(t,n),h,g,x,b,T,A,L,P=function(q){return h&&Tge(h,"normal",q),new L5(!0,q)},k=function(q){return o?(Nvt(q),u?p(q[0],q[1],P):p(q[0],q[1])):u?p(q,P):p(q)};if(i)h=e.iterator;else if(a)h=e;else{if(g=Rvt(e),!g)throw new jvt(Ovt(e)+" is not iterable");if(Lvt(g)){for(x=0,b=Pvt(e);b>x;x++)if(T=k(e[x]),T&&Ige(Mge,T))return T;return new L5(!1)}h=kvt(e,g)}for(A=i?e.next:h.next;!(L=Dvt(A,h)).done;){try{T=k(L.value)}catch(q){Tge(h,"throw",q)}if(typeof T=="object"&&T&&Ige(Mge,T))return T}return new L5(!1)}});var Dge=M(()=>{"use strict";var qvt=re(),zvt=ss(),Fvt=sa(),P5=Ec(),Uvt=r0(),Age=Ri(),VB=aa(),GB=Jl(),Bvt=RB(),Vvt=C5(),Gvt=_i(),Hvt=s0(),Wvt=Nr(),$vt=Wvt("toStringTag"),k5=Error,Yvt=[].push,Dx=function(t,r){var n=zvt(HB,this),o;P5?o=P5(new k5,n?Fvt(this):HB):(o=n?this:Age(HB),VB(o,$vt,"Error")),r!==void 0&&VB(o,"message",Hvt(r)),Vvt(o,Dx,o.stack,1),arguments.length>2&&Bvt(o,arguments[2]);var i=[];return Gvt(t,Yvt,{that:i}),VB(o,"errors",i),o};P5?P5(Dx,k5):Uvt(Dx,k5,{name:!0});var HB=Dx.prototype=Age(k5.prototype,{constructor:GB(1,Dx),message:GB(1,""),name:GB(1,"AggregateError")});qvt({global:!0,constructor:!0,arity:2},{AggregateError:Dx})});var WB=M(()=>{"use strict";Dge()});var Pge=M(()=>{"use strict";var Zvt=re(),Kvt=Fr(),Xvt=Bs(),Nge=Tt(),Jvt=qB(),$B="AggregateError",Oge=Kvt($B),Lge=!Nge(function(){return Oge([1]).errors[0]!==1})&&Nge(function(){return Oge([1],$B,{cause:7}).cause!==7});Zvt({global:!0,constructor:!0,arity:2,forced:Lge},{AggregateError:Jvt($B,function(e){return function(r,n){return Xvt(e,this,arguments)}},Lge,!0)})});var xi=M((C3r,kge)=>{"use strict";var Qvt=Nr(),eyt=Ri(),tyt=Lo().f,YB=Qvt("unscopables"),ZB=Array.prototype;ZB[YB]===void 0&&tyt(ZB,YB,{configurable:!0,value:eyt(null)});kge.exports=function(e){ZB[YB][e]=!0}});var KB=M(()=>{"use strict";var ryt=re(),nyt=pn(),oyt=Tn(),iyt=Qo(),ayt=xi();ryt({target:"Array",proto:!0},{at:function(t){var r=nyt(this),n=oyt(r),o=iyt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});ayt("at")});var Lg=M((N3r,Rge)=>{"use strict";var syt=TypeError,lyt=9007199254740991;Rge.exports=function(e){if(e>lyt)throw syt("Maximum allowed index exceeded");return e}});var Sc=M((O3r,jge)=>{"use strict";var uyt=Tr(),cyt=Lo(),fyt=Jl();jge.exports=function(e,t,r){uyt?cyt.f(e,t,fyt(0,r)):e[t]=r}});var Nx=M((L3r,qge)=>{"use strict";var pyt=Tt(),dyt=Nr(),hyt=Np(),myt=dyt("species");qge.exports=function(e){return hyt>=51||!pyt(function(){var t=[],r=t.constructor={};return r[myt]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var Bge=M(()=>{"use strict";var gyt=re(),vyt=Tt(),yyt=Nf(),_yt=Br(),xyt=pn(),byt=Tn(),zge=Lg(),Fge=Sc(),wyt=Tx(),Eyt=Nx(),Syt=Nr(),Iyt=Np(),Uge=Syt("isConcatSpreadable"),Tyt=Iyt>=51||!vyt(function(){var e=[];return e[Uge]=!1,e.concat()[0]!==e}),Myt=function(e){if(!_yt(e))return!1;var t=e[Uge];return t!==void 0?!!t:yyt(e)},Cyt=!Tyt||!Eyt("concat");gyt({target:"Array",proto:!0,arity:1,forced:Cyt},{concat:function(t){var r=xyt(this),n=wyt(r,0),o=0,i,a,u,p,h;for(i=-1,u=arguments.length;i<u;i++)if(h=i===-1?r:arguments[i],Myt(h))for(p=byt(h),zge(o+p),a=0;a<p;a++,o++)a in h&&Fge(n,o,h[a]);else zge(o+1),Fge(n,o++,h);return n.length=o,n}})});var wI=M((R3r,Gge)=>{"use strict";var Vge=Tg(),Ayt=TypeError;Gge.exports=function(e,t){if(!delete e[t])throw new Ayt("Cannot delete property "+Vge(t)+" of "+Vge(e))}});var JB=M((j3r,Hge)=>{"use strict";var Dyt=pn(),XB=Df(),Nyt=Tn(),Oyt=wI(),Lyt=Math.min;Hge.exports=[].copyWithin||function(t,r){var n=Dyt(this),o=Nyt(n),i=XB(t,o),a=XB(r,o),u=arguments.length>2?arguments[2]:void 0,p=Lyt((u===void 0?o:XB(u,o))-a,o-i),h=1;for(a<i&&i<a+p&&(h=-1,a+=p-1,i+=p-1);p-->0;)a in n?n[i]=n[a]:Oyt(n,i),i+=h,a+=h;return n}});var Wge=M(()=>{"use strict";var Pyt=re(),kyt=JB(),Ryt=xi();Pyt({target:"Array",proto:!0},{copyWithin:kyt});Ryt("copyWithin")});var Ic=M((F3r,$ge)=>{"use strict";var jyt=Tt();$ge.exports=function(e,t){var r=[][e];return!!r&&jyt(function(){r.call(null,t||function(){return 1},1)})}});var Yge=M(()=>{"use strict";var qyt=re(),zyt=ji().every,Fyt=Ic(),Uyt=Fyt("every");qyt({target:"Array",proto:!0,forced:!Uyt},{every:function(t){return zyt(this,t,arguments.length>1?arguments[1]:void 0)}})});var R5=M((V3r,Kge)=>{"use strict";var Byt=pn(),Zge=Df(),Vyt=Tn();Kge.exports=function(t){for(var r=Byt(this),n=Vyt(r),o=arguments.length,i=Zge(o>1?arguments[1]:void 0,n),a=o>2?arguments[2]:void 0,u=a===void 0?n:Zge(a,n);u>i;)r[i++]=t;return r}});var Xge=M(()=>{"use strict";var Gyt=re(),Hyt=R5(),Wyt=xi();Gyt({target:"Array",proto:!0},{fill:Hyt});Wyt("fill")});var Jge=M(()=>{"use strict";var $yt=re(),Yyt=ji().filter,Zyt=Nx(),Kyt=Zyt("filter");$yt({target:"Array",proto:!0,forced:!Kyt},{filter:function(t){return Yyt(this,t,arguments.length>1?arguments[1]:void 0)}})});var eve=M(()=>{"use strict";var Xyt=re(),Jyt=ji().find,Qyt=xi(),QB="find",Qge=!0;QB in[]&&Array(1)[QB](function(){Qge=!1});Xyt({target:"Array",proto:!0,forced:Qge},{find:function(t){return Jyt(this,t,arguments.length>1?arguments[1]:void 0)}});Qyt(QB)});var rve=M(()=>{"use strict";var e0t=re(),t0t=ji().findIndex,r0t=xi(),eV="findIndex",tve=!0;eV in[]&&Array(1)[eV](function(){tve=!1});e0t({target:"Array",proto:!0,forced:tve},{findIndex:function(t){return t0t(this,t,arguments.length>1?arguments[1]:void 0)}});r0t(eV)});var EI=M((J3r,ove)=>{"use strict";var n0t=xo(),o0t=ph(),i0t=pn(),a0t=Tn(),nve=function(e){var t=e===1;return function(r,n,o){for(var i=i0t(r),a=o0t(i),u=a0t(a),p=n0t(n,o),h,g;u-->0;)if(h=a[u],g=p(h,u,i),g)switch(e){case 0:return h;case 1:return u;}return t?-1:void 0}};ove.exports={findLast:nve(0),findLastIndex:nve(1)}});var tV=M(()=>{"use strict";var s0t=re(),l0t=EI().findLast,u0t=xi();s0t({target:"Array",proto:!0},{findLast:function(t){return l0t(this,t,arguments.length>1?arguments[1]:void 0)}});u0t("findLast")});var rV=M(()=>{"use strict";var c0t=re(),f0t=EI().findLastIndex,p0t=xi();c0t({target:"Array",proto:!0},{findLastIndex:function(t){return f0t(this,t,arguments.length>1?arguments[1]:void 0)}});p0t("findLastIndex")});var nV=M((nPr,ave)=>{"use strict";var d0t=Nf(),h0t=Tn(),m0t=Lg(),g0t=xo(),ive=function(e,t,r,n,o,i,a,u){for(var p=o,h=0,g=a?g0t(a,u):!1,x,b;h<n;)h in r&&(x=g?g(r[h],h,t):r[h],i>0&&d0t(x)?(b=h0t(x),p=ive(e,t,x,b,p,i-1)-1):(m0t(p+1),e[p]=x),p++),h++;return p};ave.exports=ive});var sve=M(()=>{"use strict";var v0t=re(),y0t=nV(),_0t=pn(),x0t=Tn(),b0t=Qo(),w0t=Tx();v0t({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=_0t(this),n=x0t(r),o=w0t(r,0);return o.length=y0t(o,r,r,n,0,t===void 0?1:b0t(t)),o}})});var lve=M(()=>{"use strict";var E0t=re(),S0t=nV(),I0t=kr(),T0t=pn(),M0t=Tn(),C0t=Tx();E0t({target:"Array",proto:!0},{flatMap:function(t){var r=T0t(this),n=M0t(r),o;return I0t(t),o=C0t(r,0),o.length=S0t(o,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),o}})});var oV=M((lPr,uve)=>{"use strict";var A0t=ji().forEach,D0t=Ic(),N0t=D0t("forEach");uve.exports=N0t?[].forEach:function(t){return A0t(this,t,arguments.length>1?arguments[1]:void 0)}});var fve=M(()=>{"use strict";var O0t=re(),cve=oV();O0t({target:"Array",proto:!0,forced:[].forEach!==cve},{forEach:cve})});var j5=M((fPr,pve)=>{"use strict";var L0t=Jt(),P0t=yh();pve.exports=function(e,t,r,n){try{return n?t(L0t(r)[0],r[1]):t(r)}catch(o){P0t(e,"throw",o)}}});var iV=M((pPr,mve)=>{"use strict";var k0t=xo(),R0t=er(),j0t=pn(),q0t=j5(),z0t=O5(),F0t=Of(),U0t=Tn(),dve=Sc(),B0t=Og(),V0t=Pp(),hve=Array;mve.exports=function(t){var r=j0t(t),n=F0t(this),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0;a&&(i=k0t(i,o>2?arguments[2]:void 0));var u=V0t(r),p=0,h,g,x,b,T,A;if(u&&!(this===hve&&z0t(u)))for(g=n?new this:[],b=B0t(r,u),T=b.next;!(x=R0t(T,b)).done;p++)A=a?q0t(b,i,[x.value,p],!0):x.value,dve(g,p,A);else for(h=U0t(r),g=n?new this(h):hve(h);h>p;p++)A=a?i(r[p],p):r[p],dve(g,p,A);return g.length=p,g}});var SI=M((dPr,_ve)=>{"use strict";var G0t=Nr(),vve=G0t("iterator"),yve=!1;try{gve=0,aV={next:function(){return{done:!!gve++}},return:function(){yve=!0}},aV[vve]=function(){return this},Array.from(aV,function(){throw 2})}catch(e){}var gve,aV;_ve.exports=function(e,t){try{if(!t&&!yve)return!1}catch(o){return!1}var r=!1;try{var n={};n[vve]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(o){}return r}});var xve=M(()=>{"use strict";var H0t=re(),W0t=iV(),$0t=SI(),Y0t=!$0t(function(e){Array.from(e)});H0t({target:"Array",stat:!0,forced:Y0t},{from:W0t})});var bve=M(()=>{"use strict";var Z0t=re(),K0t=Sx().includes,X0t=Tt(),J0t=xi(),Q0t=X0t(function(){return!Array(1).includes()});Z0t({target:"Array",proto:!0,forced:Q0t},{includes:function(t){return K0t(this,t,arguments.length>1?arguments[1]:void 0)}});J0t("includes")});var Eve=M(()=>{"use strict";var e1t=re(),t1t=mh(),r1t=Sx().indexOf,n1t=Ic(),sV=t1t([].indexOf),wve=!!sV&&1/sV([1],1,-0)<0,o1t=wve||!n1t("indexOf");e1t({target:"Array",proto:!0,forced:o1t},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return wve?sV(this,t,r)||0:r1t(this,t,r)}})});var Sve=M(()=>{"use strict";var i1t=re(),a1t=Nf();i1t({target:"Array",stat:!0},{isArray:a1t})});var c0=M((wPr,Mve)=>{"use strict";var s1t=Tt(),l1t=Kr(),u1t=Br(),c1t=Ri(),Ive=sa(),f1t=fo(),p1t=Nr(),d1t=fn(),cV=p1t("iterator"),Tve=!1,_h,lV,uV;[].keys&&(uV=[].keys(),"next"in uV?(lV=Ive(Ive(uV)),lV!==Object.prototype&&(_h=lV)):Tve=!0);var h1t=!u1t(_h)||s1t(function(){var e={};return _h[cV].call(e)!==e});h1t?_h={}:d1t&&(_h=c1t(_h));l1t(_h[cV])||f1t(_h,cV,function(){return this});Mve.exports={IteratorPrototype:_h,BUGGY_SAFARI_ITERATORS:Tve}});var Pg=M((EPr,Cve)=>{"use strict";var m1t=c0().IteratorPrototype,g1t=Ri(),v1t=Jl(),y1t=bl(),_1t=u0(),x1t=function(){return this};Cve.exports=function(e,t,r,n){var o=t+" Iterator";return e.prototype=g1t(m1t,{next:v1t(+!n,r)}),y1t(e,o,!1,!0),_1t[o]=x1t,e}});var F5=M((SPr,qve)=>{"use strict";var b1t=re(),w1t=er(),q5=fn(),Rve=e0(),E1t=Kr(),S1t=Pg(),Ave=sa(),Dve=Ec(),I1t=bl(),T1t=aa(),fV=fo(),M1t=Nr(),Nve=u0(),jve=c0(),C1t=Rve.PROPER,A1t=Rve.CONFIGURABLE,Ove=jve.IteratorPrototype,z5=jve.BUGGY_SAFARI_ITERATORS,II=M1t("iterator"),Lve="keys",TI="values",Pve="entries",kve=function(){return this};qve.exports=function(e,t,r,n,o,i,a){S1t(r,t,n);var u=function(k){if(k===o&&b)return b;if(!z5&&k&&k in g)return g[k];switch(k){case Lve:return function(){return new r(this,k)};case TI:return function(){return new r(this,k)};case Pve:return function(){return new r(this,k)};}return function(){return new r(this)}},p=t+" Iterator",h=!1,g=e.prototype,x=g[II]||g["@@iterator"]||o&&g[o],b=!z5&&x||u(o),T=t==="Array"&&g.entries||x,A,L,P;if(T&&(A=Ave(T.call(new e)),A!==Object.prototype&&A.next&&(!q5&&Ave(A)!==Ove&&(Dve?Dve(A,Ove):E1t(A[II])||fV(A,II,kve)),I1t(A,p,!0,!0),q5&&(Nve[p]=kve))),C1t&&o===TI&&x&&x.name!==TI&&(!q5&&A1t?T1t(g,"name",TI):(h=!0,b=function(){return w1t(x,this)})),o)if(L={values:u(TI),keys:i?b:u(Lve),entries:u(Pve)},a)for(P in L)(z5||h||!(P in g))&&fV(g,P,L[P]);else b1t({target:t,proto:!0,forced:z5||h},L);return(!q5||a)&&g[II]!==b&&fV(g,II,b,{name:o}),Nve[t]=b,L}});var qa=M((IPr,zve)=>{"use strict";zve.exports=function(e,t){return{value:e,done:t}}});var MI=M((TPr,Gve)=>{"use strict";var D1t=ia(),pV=xi(),Fve=u0(),Bve=ro(),N1t=Lo().f,O1t=F5(),U5=qa(),L1t=fn(),P1t=Tr(),Vve="Array Iterator",k1t=Bve.set,R1t=Bve.getterFor(Vve);Gve.exports=O1t(Array,"Array",function(e,t){k1t(this,{type:Vve,target:D1t(e),index:0,kind:t})},function(){var e=R1t(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,U5(void 0,!0);switch(e.kind){case"keys":return U5(r,!1);case"values":return U5(t[r],!1);}return U5([r,t[r]],!1)},"values");var Uve=Fve.Arguments=Fve.Array;pV("keys");pV("values");pV("entries");if(!L1t&&P1t&&Uve.name!=="values")try{N1t(Uve,"name",{value:"values"})}catch(e){}});var Hve=M(()=>{"use strict";var j1t=re(),q1t=gt(),z1t=ph(),F1t=ia(),U1t=Ic(),B1t=q1t([].join),V1t=z1t!==Object,G1t=V1t||!U1t("join",",");j1t({target:"Array",proto:!0,forced:G1t},{join:function(t){return B1t(F1t(this),t===void 0?",":t)}})});var hV=M((APr,$ve)=>{"use strict";var H1t=Bs(),W1t=ia(),$1t=Qo(),Y1t=Tn(),Z1t=Ic(),K1t=Math.min,dV=[].lastIndexOf,Wve=!!dV&&1/[1].lastIndexOf(1,-0)<0,X1t=Z1t("lastIndexOf"),J1t=Wve||!X1t;$ve.exports=J1t?function(t){if(Wve)return H1t(dV,this,arguments)||0;var r=W1t(this),n=Y1t(r);if(n===0)return-1;var o=n-1;for(arguments.length>1&&(o=K1t(o,$1t(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in r&&r[o]===t)return o||0;return-1}:dV});var Zve=M(()=>{"use strict";var Q1t=re(),Yve=hV();Q1t({target:"Array",proto:!0,forced:Yve!==[].lastIndexOf},{lastIndexOf:Yve})});var Kve=M(()=>{"use strict";var e_t=re(),t_t=ji().map,r_t=Nx(),n_t=r_t("map");e_t({target:"Array",proto:!0,forced:!n_t},{map:function(t){return t_t(this,t,arguments.length>1?arguments[1]:void 0)}})});var Jve=M(()=>{"use strict";var o_t=re(),i_t=Tt(),a_t=Of(),s_t=Sc(),Xve=Array,l_t=i_t(function(){function e(){}return!(Xve.of.call(e)instanceof e)});o_t({target:"Array",stat:!0,forced:l_t},{of:function(){for(var t=0,r=arguments.length,n=new(a_t(this)?this:Xve)(r);r>t;)s_t(n,t,arguments[t++]);return n.length=r,n}})});var B5=M((RPr,Qve)=>{"use strict";var u_t=Tr(),c_t=Nf(),f_t=TypeError,p_t=Object.getOwnPropertyDescriptor,d_t=u_t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();Qve.exports=d_t?function(e,t){if(c_t(e)&&!p_t(e,"length").writable)throw new f_t("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var eye=M(()=>{"use strict";var h_t=re(),m_t=pn(),g_t=Tn(),v_t=B5(),y_t=Lg(),__t=Tt(),x_t=__t(function(){return[].push.call({length:4294967296},1)!==4294967297}),b_t=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},w_t=x_t||!b_t();h_t({target:"Array",proto:!0,arity:1,forced:w_t},{push:function(t){var r=m_t(this),n=g_t(r),o=arguments.length;y_t(n+o);for(var i=0;i<o;i++)r[n]=arguments[i],n++;return v_t(r,n),n}})});var CI=M((zPr,oye)=>{"use strict";var E_t=kr(),S_t=pn(),I_t=ph(),T_t=Tn(),tye=TypeError,rye="Reduce of empty array with no initial value",nye=function(e){return function(t,r,n,o){var i=S_t(t),a=I_t(i),u=T_t(i);if(E_t(r),u===0&&n<2)throw new tye(rye);var p=e?u-1:0,h=e?-1:1;if(n<2)for(;;){if(p in a){o=a[p],p+=h;break}if(p+=h,e?p<0:u<=p)throw new tye(rye)}for(;e?p>=0:u>p;p+=h)p in a&&(o=r(o,a[p],p,i));return o}};oye.exports={left:nye(!1),right:nye(!0)}});var DI=M((FPr,iye)=>{"use strict";var AI=$t(),M_t=Mf(),C_t=as(),V5=function(e){return M_t.slice(0,e.length)===e};iye.exports=function(){return V5("Bun/")?"BUN":V5("Cloudflare-Workers")?"CLOUDFLARE":V5("Deno/")?"DENO":V5("Node.js/")?"NODE":AI.Bun&&typeof Bun.version=="string"?"BUN":AI.Deno&&typeof Deno.version=="object"?"DENO":C_t(AI.process)==="process"?"NODE":AI.window&&AI.document?"BROWSER":"REST"}()});var f0=M((UPr,aye)=>{"use strict";var A_t=DI();aye.exports=A_t==="NODE"});var lye=M(()=>{"use strict";var D_t=re(),N_t=CI().left,O_t=Ic(),sye=Np(),L_t=f0(),P_t=!L_t&&sye>79&&sye<83,k_t=P_t||!O_t("reduce");D_t({target:"Array",proto:!0,forced:k_t},{reduce:function(t){var r=arguments.length;return N_t(this,t,r,r>1?arguments[1]:void 0)}})});var cye=M(()=>{"use strict";var R_t=re(),j_t=CI().right,q_t=Ic(),uye=Np(),z_t=f0(),F_t=!z_t&&uye>79&&uye<83,U_t=F_t||!q_t("reduceRight");R_t({target:"Array",proto:!0,forced:U_t},{reduceRight:function(t){return j_t(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var pye=M(()=>{"use strict";var B_t=re(),V_t=gt(),G_t=Nf(),H_t=V_t([].reverse),fye=[1,2];B_t({target:"Array",proto:!0,forced:String(fye)===String(fye.reverse())},{reverse:function(){return G_t(this)&&(this.length=this.length),H_t(this)}})});var mye=M(()=>{"use strict";var W_t=re(),dye=Nf(),$_t=Of(),Y_t=Br(),hye=Df(),Z_t=Tn(),K_t=ia(),X_t=Sc(),J_t=Nr(),Q_t=Nx(),ext=tu(),txt=Q_t("slice"),rxt=J_t("species"),mV=Array,nxt=Math.max;W_t({target:"Array",proto:!0,forced:!txt},{slice:function(t,r){var n=K_t(this),o=Z_t(n),i=hye(t,o),a=hye(r===void 0?o:r,o),u,p,h;if(dye(n)&&(u=n.constructor,$_t(u)&&(u===mV||dye(u.prototype))?u=void 0:Y_t(u)&&(u=u[rxt],u===null&&(u=void 0)),u===mV||u===void 0))return ext(n,i,a);for(p=new(u===void 0?mV:u)(nxt(a-i,0)),h=0;i<a;i++,h++)i in n&&X_t(p,h,n[i]);return p.length=h,p}})});var gye=M(()=>{"use strict";var oxt=re(),ixt=ji().some,axt=Ic(),sxt=axt("some");oxt({target:"Array",proto:!0,forced:!sxt},{some:function(t){return ixt(this,t,arguments.length>1?arguments[1]:void 0)}})});var G5=M((JPr,yye)=>{"use strict";var vye=tu(),lxt=Math.floor,gV=function(e,t){var r=e.length;if(r<8)for(var n=1,o,i;n<r;){for(i=n,o=e[n];i&&t(e[i-1],o)>0;)e[i]=e[--i];i!==n++&&(e[i]=o)}else for(var a=lxt(r/2),u=gV(vye(e,0,a),t),p=gV(vye(e,a),t),h=u.length,g=p.length,x=0,b=0;x<h||b<g;)e[x+b]=x<h&&b<g?t(u[x],p[b])<=0?u[x++]:p[b++]:x<h?u[x++]:p[b++];return e};yye.exports=gV});var vV=M((QPr,xye)=>{"use strict";var uxt=Mf(),_ye=uxt.match(/firefox\/(\d+)/i);xye.exports=!!_ye&&+_ye[1]});var yV=M((ekr,bye)=>{"use strict";var cxt=Mf();bye.exports=/MSIE|Trident/.test(cxt)});var H5=M((tkr,Eye)=>{"use strict";var fxt=Mf(),wye=fxt.match(/AppleWebKit\/(\d+)\./);Eye.exports=!!wye&&+wye[1]});var Oye=M(()=>{"use strict";var pxt=re(),Dye=gt(),dxt=kr(),hxt=pn(),Sye=Tn(),mxt=wI(),Iye=Hr(),_V=Tt(),gxt=G5(),vxt=Ic(),Tye=vV(),yxt=yV(),Mye=Np(),Cye=H5(),kg=[],Aye=Dye(kg.sort),_xt=Dye(kg.push),xxt=_V(function(){kg.sort(void 0)}),bxt=_V(function(){kg.sort(null)}),wxt=vxt("sort"),Nye=!_V(function(){if(Mye)return Mye<70;if(!(Tye&&Tye>3)){if(yxt)return!0;if(Cye)return Cye<603;var e="",t,r,n,o;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2;}for(o=0;o<47;o++)kg.push({k:r+o,v:n})}for(kg.sort(function(i,a){return a.v-i.v}),o=0;o<kg.length;o++)r=kg[o].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),Ext=xxt||!bxt||!wxt||!Nye,Sxt=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:Iye(t)>Iye(r)?1:-1}};pxt({target:"Array",proto:!0,forced:Ext},{sort:function(t){t!==void 0&&dxt(t);var r=hxt(this);if(Nye)return t===void 0?Aye(r):Aye(r,t);var n=[],o=Sye(r),i,a;for(a=0;a<o;a++)a in r&&_xt(n,r[a]);for(gxt(n,Sxt(t)),i=Sye(n),a=0;a<i;)r[a]=n[a++];for(;a<o;)mxt(r,a++);return r}})});var Rg=M((okr,Pye)=>{"use strict";var Ixt=Fr(),Txt=ei(),Mxt=Nr(),Cxt=Tr(),Lye=Mxt("species");Pye.exports=function(e){var t=Ixt(e);Cxt&&t&&!t[Lye]&&Txt(t,Lye,{configurable:!0,get:function(){return this}})}});var kye=M(()=>{"use strict";var Axt=Rg();Axt("Array")});var Rye=M(()=>{"use strict";var Dxt=re(),Nxt=pn(),Oxt=Df(),Lxt=Qo(),Pxt=Tn(),kxt=B5(),Rxt=Lg(),jxt=Tx(),qxt=Sc(),xV=wI(),zxt=Nx(),Fxt=zxt("splice"),Uxt=Math.max,Bxt=Math.min;Dxt({target:"Array",proto:!0,forced:!Fxt},{splice:function(t,r){var n=Nxt(this),o=Pxt(n),i=Oxt(t,o),a=arguments.length,u,p,h,g,x,b;for(a===0?u=p=0:a===1?(u=0,p=o-i):(u=a-2,p=Bxt(Uxt(Lxt(r),0),o-i)),Rxt(o+u-p),h=jxt(n,p),g=0;g<p;g++)x=i+g,x in n&&qxt(h,g,n[x]);if(h.length=p,u<p){for(g=i;g<o-p;g++)x=g+p,b=g+u,x in n?n[b]=n[x]:xV(n,b);for(g=o;g>o-p+u;g--)xV(n,g-1)}else if(u>p)for(g=o-p;g>i;g--)x=g+p-1,b=g+u-1,x in n?n[b]=n[x]:xV(n,b);for(g=0;g<u;g++)n[g+i]=arguments[g+2];return kxt(n,o-p+u),h}})});var bV=M((ukr,jye)=>{"use strict";var Vxt=Tn();jye.exports=function(e,t){for(var r=Vxt(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var wV=M(()=>{"use strict";var Gxt=re(),Hxt=bV(),Wxt=ia(),$xt=xi(),Yxt=Array;Gxt({target:"Array",proto:!0},{toReversed:function(){return Hxt(Wxt(this),Yxt)}});$xt("toReversed")});var xh=M((pkr,qye)=>{"use strict";var Zxt=Tn();qye.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:Zxt(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var EV=M((dkr,zye)=>{"use strict";var Kxt=$t();zye.exports=function(e,t){var r=Kxt[e],n=r&&r.prototype;return n&&n[t]}});var SV=M(()=>{"use strict";var Xxt=re(),Jxt=gt(),Qxt=kr(),ebt=ia(),tbt=xh(),rbt=EV(),nbt=xi(),obt=Array,ibt=Jxt(rbt("Array","sort"));Xxt({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&Qxt(t);var r=ebt(this),n=tbt(obt,r);return ibt(n,t)}});nbt("toSorted")});var IV=M(()=>{"use strict";var abt=re(),sbt=xi(),lbt=Lg(),ubt=Tn(),cbt=Df(),fbt=ia(),pbt=Qo(),dbt=Array,hbt=Math.max,mbt=Math.min;abt({target:"Array",proto:!0},{toSpliced:function(t,r){var n=fbt(this),o=ubt(n),i=cbt(t,o),a=arguments.length,u=0,p,h,g,x;for(a===0?p=h=0:a===1?(p=0,h=o-i):(p=a-2,h=mbt(hbt(pbt(r),0),o-i)),g=lbt(o+p-h),x=dbt(g);u<i;u++)x[u]=n[u];for(;u<i+p;u++)x[u]=arguments[u-i+2];for(;u<g;u++)x[u]=n[u+h-p];return x}});sbt("toSpliced")});var Fye=M(()=>{"use strict";var gbt=xi();gbt("flat")});var Uye=M(()=>{"use strict";var vbt=xi();vbt("flatMap")});var Bye=M(()=>{"use strict";var ybt=re(),_bt=pn(),xbt=Tn(),bbt=B5(),wbt=wI(),Ebt=Lg(),Sbt=[].unshift(0)!==1,Ibt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},Tbt=Sbt||!Ibt();ybt({target:"Array",proto:!0,arity:1,forced:Tbt},{unshift:function(t){var r=_bt(this),n=xbt(r),o=arguments.length;if(o){Ebt(n+o);for(var i=n;i--;){var a=i+o;i in r?r[a]=r[i]:wbt(r,a)}for(var u=0;u<o;u++)r[u]=arguments[u]}return bbt(r,n+o)}})});var TV=M((Skr,Vye)=>{"use strict";var Mbt=Tn(),Cbt=Qo(),Abt=RangeError;Vye.exports=function(e,t,r,n){var o=Mbt(e),i=Cbt(r),a=i<0?o+i:i;if(a>=o||a<0)throw new Abt("Incorrect index");for(var u=new t(o),p=0;p<o;p++)u[p]=p===a?n:e[p];return u}});var MV=M(()=>{"use strict";var Dbt=re(),Nbt=TV(),Obt=ia(),Lbt=Array;Dbt({target:"Array",proto:!0},{with:function(e,t){return Nbt(Obt(this),Lbt,e,t)}})});var W5=M((Mkr,Gye)=>{"use strict";Gye.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Tc=M((Ckr,Hye)=>{"use strict";var Pbt=fo();Hye.exports=function(e,t,r){for(var n in t)Pbt(e,n,t[n],r);return e}});var Vs=M((Akr,Wye)=>{"use strict";var kbt=ss(),Rbt=TypeError;Wye.exports=function(e,t){if(kbt(t,e))return e;throw new Rbt("Incorrect invocation")}});var Ox=M((Dkr,$ye)=>{"use strict";var jbt=Qo(),qbt=Ql(),zbt=RangeError;$ye.exports=function(e){if(e===void 0)return 0;var t=jbt(e),r=qbt(t);if(t!==r)throw new zbt("Wrong length or index");return r}});var $5=M((Nkr,Yye)=>{"use strict";Yye.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var CV=M((Okr,Xye)=>{"use strict";var Fbt=$5(),Ubt=Math.abs,Kye=2220446049250313e-31,Zye=1/Kye,Bbt=function(e){return e+Zye-Zye};Xye.exports=function(e,t,r,n){var o=+e,i=Ubt(o),a=Fbt(o);if(i<n)return a*Bbt(i/n/t)*n*t;var u=(1+t/Kye)*i,p=u-(u-i);return p>r||p!==p?a*(1/0):a*p}});var Y5=M((Lkr,Jye)=>{"use strict";var Vbt=CV(),Gbt=1.1920928955078125e-7,Hbt=34028234663852886e22,Wbt=11754943508222875e-54;Jye.exports=Math.fround||function(t){return Vbt(t,Gbt,Hbt,Wbt)}});var Z5=M((Pkr,Qye)=>{"use strict";var $bt=Array,Ybt=Math.abs,bh=Math.pow,Zbt=Math.floor,Kbt=Math.log,Xbt=Math.LN2,Jbt=function(e,t,r){var n=$bt(r),o=r*8-t-1,i=(1<<o)-1,a=i>>1,u=t===23?bh(2,-24)-bh(2,-77):0,p=e<0||e===0&&1/e<0?1:0,h=0,g,x,b;for(e=Ybt(e),e!==e||e===1/0?(x=e!==e?1:0,g=i):(g=Zbt(Kbt(e)/Xbt),b=bh(2,-g),e*b<1&&(g--,b*=2),g+a>=1?e+=u/b:e+=u*bh(2,1-a),e*b>=2&&(g++,b/=2),g+a>=i?(x=0,g=i):g+a>=1?(x=(e*b-1)*bh(2,t),g+=a):(x=e*bh(2,a-1)*bh(2,t),g=0));t>=8;)n[h++]=x&255,x/=256,t-=8;for(g=g<<t|x,o+=t;o>0;)n[h++]=g&255,g/=256,o-=8;return n[h-1]|=p*128,n},Qbt=function(e,t){var r=e.length,n=r*8-t-1,o=(1<<n)-1,i=o>>1,a=n-7,u=r-1,p=e[u--],h=p&127,g;for(p>>=7;a>0;)h=h*256+e[u--],a-=8;for(g=h&(1<<-a)-1,h>>=-a,a+=t;a>0;)g=g*256+e[u--],a-=8;if(h===0)h=1-i;else{if(h===o)return g?NaN:p?-1/0:1/0;g+=bh(2,t),h-=i}return(p?-1:1)*g*bh(2,h-t)};Qye.exports={pack:Jbt,unpack:Qbt}});var LI=M((kkr,g0e)=>{"use strict";var eO=$t(),LV=gt(),AV=Tr(),ewt=W5(),f0e=e0(),twt=aa(),rwt=ei(),e0e=Tc(),DV=Tt(),K5=Vs(),nwt=Qo(),owt=Ql(),J5=Ox(),iwt=Y5(),p0e=Z5(),awt=sa(),t0e=Ec(),swt=R5(),lwt=tu(),uwt=Ng(),cwt=r0(),d0e=bl(),PV=ro(),fwt=f0e.PROPER,r0e=f0e.CONFIGURABLE,Px="ArrayBuffer",tO="DataView",kx="prototype",pwt="Wrong length",h0e="Wrong index",n0e=PV.getterFor(Px),OI=PV.getterFor(tO),o0e=PV.set,Lf=eO[Px],Gu=Lf,Lx=Gu&&Gu[kx],kp=eO[tO],p0=kp&&kp[kx],i0e=Object.prototype,dwt=eO.Array,Q5=eO.RangeError,hwt=LV(swt),mwt=LV([].reverse),m0e=p0e.pack,a0e=p0e.unpack,s0e=function(e){return[e&255]},l0e=function(e){return[e&255,e>>8&255]},u0e=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},c0e=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},gwt=function(e){return m0e(iwt(e),23,4)},vwt=function(e){return m0e(e,52,8)},X5=function(e,t,r){rwt(e[kx],t,{configurable:!0,get:function(){return r(this)[t]}})},jg=function(e,t,r,n){var o=OI(e),i=J5(r),a=!!n;if(i+t>o.byteLength)throw new Q5(h0e);var u=o.bytes,p=i+o.byteOffset,h=lwt(u,p,p+t);return a?h:mwt(h)},qg=function(e,t,r,n,o,i){var a=OI(e),u=J5(r),p=n(+o),h=!!i;if(u+t>a.byteLength)throw new Q5(h0e);for(var g=a.bytes,x=u+a.byteOffset,b=0;b<t;b++)g[x+b]=p[h?b:t-b-1]};ewt?(NV=fwt&&Lf.name!==Px,!DV(function(){Lf(1)})||!DV(function(){new Lf(-1)})||DV(function(){return new Lf,new Lf(1.5),new Lf(NaN),Lf.length!==1||NV&&!r0e})?(Gu=function(t){return K5(this,Lx),uwt(new Lf(J5(t)),this,Gu)},Gu[kx]=Lx,Lx.constructor=Gu,cwt(Gu,Lf)):NV&&r0e&&twt(Lf,"name",Px),t0e&&awt(p0)!==i0e&&t0e(p0,i0e),NI=new kp(new Gu(2)),OV=LV(p0.setInt8),NI.setInt8(0,2147483648),NI.setInt8(1,2147483649),(NI.getInt8(0)||!NI.getInt8(1))&&e0e(p0,{setInt8:function(t,r){OV(this,t,r<<24>>24)},setUint8:function(t,r){OV(this,t,r<<24>>24)}},{unsafe:!0})):(Gu=function(t){K5(this,Lx);var r=J5(t);o0e(this,{type:Px,bytes:hwt(dwt(r),0),byteLength:r}),AV||(this.byteLength=r,this.detached=!1)},Lx=Gu[kx],kp=function(t,r,n){K5(this,p0),K5(t,Lx);var o=n0e(t),i=o.byteLength,a=nwt(r);if(a<0||a>i)throw new Q5("Wrong offset");if(n=n===void 0?i-a:owt(n),a+n>i)throw new Q5(pwt);o0e(this,{type:tO,buffer:t,byteLength:n,byteOffset:a,bytes:o.bytes}),AV||(this.buffer=t,this.byteLength=n,this.byteOffset=a)},p0=kp[kx],AV&&(X5(Gu,"byteLength",n0e),X5(kp,"buffer",OI),X5(kp,"byteLength",OI),X5(kp,"byteOffset",OI)),e0e(p0,{getInt8:function(t){return jg(this,1,t)[0]<<24>>24},getUint8:function(t){return jg(this,1,t)[0]},getInt16:function(t){var r=jg(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=jg(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return c0e(jg(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return c0e(jg(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return a0e(jg(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return a0e(jg(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){qg(this,1,t,s0e,r)},setUint8:function(t,r){qg(this,1,t,s0e,r)},setInt16:function(t,r){qg(this,2,t,l0e,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){qg(this,2,t,l0e,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){qg(this,4,t,u0e,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){qg(this,4,t,u0e,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){qg(this,4,t,gwt,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){qg(this,8,t,vwt,r,arguments.length>2?arguments[2]:!1)}}));var NV,NI,OV;d0e(Gu,Px);d0e(kp,tO);g0e.exports={ArrayBuffer:Gu,DataView:kp}});var y0e=M(()=>{"use strict";var ywt=re(),_wt=$t(),xwt=LI(),bwt=Rg(),kV="ArrayBuffer",v0e=xwt[kV],wwt=_wt[kV];ywt({global:!0,constructor:!0,forced:wwt!==v0e},{ArrayBuffer:v0e});bwt(kV)});var cn=M((qkr,C0e)=>{"use strict";var Ewt=W5(),zV=Tr(),wl=$t(),w0e=Kr(),oO=Br(),Fg=sn(),FV=eu(),Swt=Tg(),Iwt=aa(),RV=fo(),Twt=ei(),Mwt=ss(),iO=sa(),jx=Ec(),Cwt=Nr(),Awt=Mg(),E0e=ro(),S0e=E0e.enforce,Dwt=E0e.get,rO=wl.Int8Array,jV=rO&&rO.prototype,_0e=wl.Uint8ClampedArray,x0e=_0e&&_0e.prototype,Rp=rO&&iO(rO),Pf=jV&&iO(jV),Nwt=Object.prototype,UV=wl.TypeError,b0e=Cwt("toStringTag"),qV=Awt("TYPED_ARRAY_TAG"),nO="TypedArrayConstructor",wh=Ewt&&!!jx&&FV(wl.opera)!=="Opera",I0e=!1,nu,zg,Rx,Eh={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},BV={BigInt64Array:8,BigUint64Array:8},Owt=function(t){if(!oO(t))return!1;var r=FV(t);return r==="DataView"||Fg(Eh,r)||Fg(BV,r)},T0e=function(e){var t=iO(e);if(oO(t)){var r=Dwt(t);return r&&Fg(r,nO)?r[nO]:T0e(t)}},M0e=function(e){if(!oO(e))return!1;var t=FV(e);return Fg(Eh,t)||Fg(BV,t)},Lwt=function(e){if(M0e(e))return e;throw new UV("Target is not a typed array")},Pwt=function(e){if(w0e(e)&&(!jx||Mwt(Rp,e)))return e;throw new UV(Swt(e)+" is not a typed array constructor")},kwt=function(e,t,r,n){if(zV){if(r)for(var o in Eh){var i=wl[o];if(i&&Fg(i.prototype,e))try{delete i.prototype[e]}catch(a){try{i.prototype[e]=t}catch(u){}}}(!Pf[e]||r)&&RV(Pf,e,r?t:wh&&jV[e]||t,n)}},Rwt=function(e,t,r){var n,o;if(zV){if(jx){if(r){for(n in Eh)if(o=wl[n],o&&Fg(o,e))try{delete o[e]}catch(i){}}if(!Rp[e]||r)try{return RV(Rp,e,r?t:wh&&Rp[e]||t)}catch(i){}else return}for(n in Eh)o=wl[n],o&&(!o[e]||r)&&RV(o,e,t)}};for(nu in Eh)zg=wl[nu],Rx=zg&&zg.prototype,Rx?S0e(Rx)[nO]=zg:wh=!1;for(nu in BV)zg=wl[nu],Rx=zg&&zg.prototype,Rx&&(S0e(Rx)[nO]=zg);if((!wh||!w0e(Rp)||Rp===Function.prototype)&&(Rp=function(){throw new UV("Incorrect invocation")},wh))for(nu in Eh)wl[nu]&&jx(wl[nu],Rp);if((!wh||!Pf||Pf===Nwt)&&(Pf=Rp.prototype,wh))for(nu in Eh)wl[nu]&&jx(wl[nu].prototype,Pf);wh&&iO(x0e)!==Pf&&jx(x0e,Pf);if(zV&&!Fg(Pf,b0e)){I0e=!0,Twt(Pf,b0e,{configurable:!0,get:function(){return oO(this)?this[qV]:void 0}});for(nu in Eh)wl[nu]&&Iwt(wl[nu],qV,nu)}C0e.exports={NATIVE_ARRAY_BUFFER_VIEWS:wh,TYPED_ARRAY_TAG:I0e&&qV,aTypedArray:Lwt,aTypedArrayConstructor:Pwt,exportTypedArrayMethod:kwt,exportTypedArrayStaticMethod:Rwt,getTypedArrayConstructor:T0e,isView:Owt,isTypedArray:M0e,TypedArray:Rp,TypedArrayPrototype:Pf}});var D0e=M(()=>{"use strict";var jwt=re(),A0e=cn(),qwt=A0e.NATIVE_ARRAY_BUFFER_VIEWS;jwt({target:"ArrayBuffer",stat:!0,forced:!qwt},{isView:A0e.isView})});var R0e=M(()=>{"use strict";var zwt=re(),GV=mh(),Fwt=Tt(),P0e=LI(),N0e=Jt(),O0e=Df(),Uwt=Ql(),HV=P0e.ArrayBuffer,VV=P0e.DataView,k0e=VV.prototype,L0e=GV(HV.prototype.slice),Bwt=GV(k0e.getUint8),Vwt=GV(k0e.setUint8),Gwt=Fwt(function(){return!new HV(2).slice(1,void 0).byteLength});zwt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:Gwt},{slice:function(t,r){if(L0e&&r===void 0)return L0e(N0e(this),t);for(var n=N0e(this).byteLength,o=O0e(t,n),i=O0e(r===void 0?n:r,n),a=new HV(Uwt(i-o)),u=new VV(this),p=new VV(a),h=0;o<i;)Vwt(p,h++,Bwt(u,o++));return a}})});var j0e=M(()=>{"use strict";var Hwt=re(),Wwt=LI(),$wt=W5();Hwt({global:!0,constructor:!0,forced:!$wt},{DataView:Wwt.DataView})});var q0e=M(()=>{"use strict";j0e()});var WV=M(($kr,U0e)=>{"use strict";var F0e=$t(),Ywt=bI(),Zwt=as(),z0e=F0e.ArrayBuffer,Kwt=F0e.TypeError;U0e.exports=z0e&&Ywt(z0e.prototype,"byteLength","get")||function(e){if(Zwt(e)!=="ArrayBuffer")throw new Kwt("ArrayBuffer expected");return e.byteLength}});var $V=M((Ykr,H0e)=>{"use strict";var Xwt=$t(),Jwt=mh(),Qwt=WV(),B0e=Xwt.ArrayBuffer,V0e=B0e&&B0e.prototype,G0e=V0e&&Jwt(V0e.slice);H0e.exports=function(e){if(Qwt(e)!==0||!G0e)return!1;try{return G0e(e,0,0),!1}catch(t){return!0}}});var YV=M(()=>{"use strict";var eEt=Tr(),tEt=ei(),rEt=$V(),W0e=ArrayBuffer.prototype;eEt&&!("detached"in W0e)&&tEt(W0e,"detached",{configurable:!0,get:function(){return rEt(this)}})});var qx=M((Xkr,$0e)=>{"use strict";var nEt=$V(),oEt=TypeError;$0e.exports=function(e){if(nEt(e))throw new oEt("ArrayBuffer is detached");return e}});var ZV=M((Jkr,Y0e)=>{"use strict";var iEt=$t(),aEt=f0();Y0e.exports=function(e){if(aEt){try{return iEt.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var aO=M((Qkr,K0e)=>{"use strict";var sEt=$t(),lEt=Tt(),KV=Np(),XV=DI(),Z0e=sEt.structuredClone;K0e.exports=!!Z0e&&!lEt(function(){if(XV==="DENO"&&KV>92||XV==="NODE"&&KV>94||XV==="BROWSER"&&KV>97)return!1;var e=new ArrayBuffer(8),t=Z0e(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var rG=M((eRr,Q0e)=>{"use strict";var tG=$t(),uEt=ZV(),cEt=aO(),fEt=tG.structuredClone,X0e=tG.ArrayBuffer,sO=tG.MessageChannel,eG=!1,JV,J0e,lO,QV;if(cEt)eG=function(e){fEt(e,{transfer:[e]})};else if(X0e)try{sO||(JV=uEt("worker_threads"),JV&&(sO=JV.MessageChannel)),sO&&(J0e=new sO,lO=new X0e(2),QV=function(e){J0e.port1.postMessage(null,[e])},lO.byteLength===2&&(QV(lO),lO.byteLength===0&&(eG=QV)))}catch(e){}Q0e.exports=eG});var lG=M((tRr,a1e)=>{"use strict";var iG=$t(),aG=gt(),n1e=bI(),pEt=Ox(),dEt=qx(),hEt=WV(),e1e=rG(),nG=aO(),mEt=iG.structuredClone,o1e=iG.ArrayBuffer,oG=iG.DataView,gEt=Math.min,sG=o1e.prototype,i1e=oG.prototype,vEt=aG(sG.slice),t1e=n1e(sG,"resizable","get"),r1e=n1e(sG,"maxByteLength","get"),yEt=aG(i1e.getInt8),_Et=aG(i1e.setInt8);a1e.exports=(nG||e1e)&&function(e,t,r){var n=hEt(e),o=t===void 0?n:pEt(t),i=!t1e||!t1e(e),a;if(dEt(e),nG&&(e=mEt(e,{transfer:[e]}),n===o&&(r||i)))return e;if(n>=o&&(!r||i))a=vEt(e,0,o);else{var u=r&&!i&&r1e?{maxByteLength:r1e(e)}:void 0;a=new o1e(o,u);for(var p=new oG(e),h=new oG(a),g=gEt(o,n),x=0;x<g;x++)_Et(h,x,yEt(p,x))}return nG||e1e(e),a}});var uG=M(()=>{"use strict";var xEt=re(),s1e=lG();s1e&&xEt({target:"ArrayBuffer",proto:!0},{transfer:function(){return s1e(this,arguments.length?arguments[0]:void 0,!0)}})});var cG=M(()=>{"use strict";var bEt=re(),l1e=lG();l1e&&bEt({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return l1e(this,arguments.length?arguments[0]:void 0,!1)}})});var u1e=M(()=>{"use strict";var wEt=re(),EEt=gt(),SEt=Tt(),IEt=SEt(function(){return new Date(16e11).getYear()!==120}),TEt=EEt(Date.prototype.getFullYear);wEt({target:"Date",proto:!0,forced:IEt},{getYear:function(){return TEt(this)-1900}})});var f1e=M(()=>{"use strict";var MEt=re(),CEt=gt(),c1e=Date,AEt=CEt(c1e.prototype.getTime);MEt({target:"Date",stat:!0},{now:function(){return AEt(new c1e)}})});var h1e=M(()=>{"use strict";var DEt=re(),p1e=gt(),NEt=Qo(),d1e=Date.prototype,OEt=p1e(d1e.getTime),LEt=p1e(d1e.setFullYear);DEt({target:"Date",proto:!0},{setYear:function(t){OEt(this);var r=NEt(t),n=r>=0&&r<=99?r+1900:r;return LEt(this,n)}})});var m1e=M(()=>{"use strict";var PEt=re();PEt({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var PI=M((hRr,g1e)=>{"use strict";var kEt=Qo(),REt=Hr(),jEt=Go(),qEt=RangeError;g1e.exports=function(t){var r=REt(jEt(this)),n="",o=kEt(t);if(o<0||o===1/0)throw new qEt("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(r+=r))o&1&&(n+=r);return n}});var kI=M((mRr,x1e)=>{"use strict";var _1e=gt(),zEt=Ql(),v1e=Hr(),FEt=PI(),UEt=Go(),BEt=_1e(FEt),VEt=_1e("".slice),GEt=Math.ceil,y1e=function(e){return function(t,r,n){var o=v1e(UEt(t)),i=zEt(r),a=o.length,u=n===void 0?" ":v1e(n),p,h;return i<=a||u===""?o:(p=i-a,h=BEt(u,GEt(p/u.length)),h.length>p&&(h=VEt(h,0,p)),e?o+h:h+o)}};x1e.exports={start:y1e(!1),end:y1e(!0)}});var E1e=M((gRr,w1e)=>{"use strict";var Ug=gt(),b1e=Tt(),d0=kI().start,HEt=RangeError,WEt=isFinite,$Et=Math.abs,Sh=Date.prototype,fG=Sh.toISOString,YEt=Ug(Sh.getTime),ZEt=Ug(Sh.getUTCDate),KEt=Ug(Sh.getUTCFullYear),XEt=Ug(Sh.getUTCHours),JEt=Ug(Sh.getUTCMilliseconds),QEt=Ug(Sh.getUTCMinutes),eSt=Ug(Sh.getUTCMonth),tSt=Ug(Sh.getUTCSeconds);w1e.exports=b1e(function(){return fG.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!b1e(function(){fG.call(new Date(NaN))})?function(){if(!WEt(YEt(this)))throw new HEt("Invalid time value");var t=this,r=KEt(t),n=JEt(t),o=r<0?"-":r>9999?"+":"";return o+d0($Et(r),o?6:4,0)+"-"+d0(eSt(t)+1,2,0)+"-"+d0(ZEt(t),2,0)+"T"+d0(XEt(t),2,0)+":"+d0(QEt(t),2,0)+":"+d0(tSt(t),2,0)+"."+d0(n,3,0)+"Z"}:fG});var I1e=M(()=>{"use strict";var rSt=re(),S1e=E1e();rSt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==S1e},{toISOString:S1e})});var T1e=M(()=>{"use strict";var nSt=re(),oSt=Tt(),iSt=pn(),aSt=aI(),sSt=oSt(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});nSt({target:"Date",proto:!0,arity:1,forced:sSt},{toJSON:function(t){var r=iSt(this),n=aSt(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var C1e=M((bRr,M1e)=>{"use strict";var lSt=Jt(),uSt=BU(),cSt=TypeError;M1e.exports=function(e){if(lSt(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new cSt("Incorrect hint");return uSt(this,e)}});var N1e=M(()=>{"use strict";var fSt=sn(),pSt=fo(),dSt=C1e(),hSt=Nr(),A1e=hSt("toPrimitive"),D1e=Date.prototype;fSt(D1e,A1e)||pSt(D1e,A1e,dSt)});var k1e=M(()=>{"use strict";var L1e=gt(),mSt=fo(),pG=Date.prototype,O1e="Invalid Date",P1e="toString",gSt=L1e(pG[P1e]),vSt=L1e(pG.getTime);String(new Date(NaN))!==O1e&&mSt(pG,P1e,function(){var t=vSt(this);return t===t?gSt(this):O1e})});var j1e=M(()=>{"use strict";var ySt=re(),RI=gt(),_St=Hr(),xSt=RI("".charAt),bSt=RI("".charCodeAt),wSt=RI(/./.exec),ESt=RI(1 .toString),SSt=RI("".toUpperCase),ISt=/[\w*+\-./@]/,R1e=function(e,t){for(var r=ESt(e,16);r.length<t;)r="0"+r;return r};ySt({global:!0},{escape:function(t){for(var r=_St(t),n="",o=r.length,i=0,a,u;i<o;)a=xSt(r,i++),wSt(ISt,a)?n+=a:(u=bSt(a,0),u<256?n+="%"+R1e(u,2):n+="%u"+SSt(R1e(u,4)));return n}})});var hG=M((CRr,U1e)=>{"use strict";var z1e=gt(),TSt=kr(),MSt=Br(),CSt=sn(),q1e=tu(),ASt=bx(),F1e=Function,DSt=z1e([].concat),NSt=z1e([].join),dG={},OSt=function(e,t,r){if(!CSt(dG,t)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";dG[t]=F1e("C,a","return new C("+NSt(n,",")+")")}return dG[t](e,r)};U1e.exports=ASt?F1e.bind:function(t){var r=TSt(this),n=r.prototype,o=q1e(arguments,1),i=function(){var u=DSt(o,q1e(arguments));return this instanceof i?OSt(r,u.length,u):r.apply(t,u)};return MSt(n)&&(i.prototype=n),i}});var V1e=M(()=>{"use strict";var LSt=re(),B1e=hG();LSt({target:"Function",proto:!0,forced:Function.bind!==B1e},{bind:B1e})});var W1e=M(()=>{"use strict";var PSt=Kr(),G1e=Br(),kSt=Lo(),RSt=ss(),jSt=Nr(),qSt=fI(),mG=jSt("hasInstance"),H1e=Function.prototype;mG in H1e||kSt.f(H1e,mG,{value:qSt(function(e){if(!PSt(this)||!G1e(e))return!1;var t=this.prototype;return G1e(t)?RSt(t,e):e instanceof this},mG)})});var K1e=M(()=>{"use strict";var zSt=Tr(),FSt=e0().EXISTS,$1e=gt(),USt=ei(),Y1e=Function.prototype,BSt=$1e(Y1e.toString),Z1e=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,VSt=$1e(Z1e.exec),GSt="name";zSt&&!FSt&&USt(Y1e,GSt,{configurable:!0,get:function(){try{return VSt(Z1e,BSt(this))[1]}catch(e){return""}}})});var vG=M(()=>{"use strict";var HSt=re(),gG=$t();HSt({global:!0,forced:gG.globalThis!==gG},{globalThis:gG})});var wG=M(()=>{"use strict";var WSt=re(),$St=$t(),YSt=Vs(),ZSt=Jt(),KSt=Kr(),XSt=sa(),JSt=ei(),QSt=Sc(),e2t=Tt(),xG=sn(),t2t=Nr(),jp=c0().IteratorPrototype,r2t=Tr(),n2t=fn(),yG="constructor",J1e="Iterator",X1e=t2t("toStringTag"),Q1e=TypeError,_G=$St[J1e],e_e=n2t||!KSt(_G)||_G.prototype!==jp||!e2t(function(){_G({})}),bG=function(){if(YSt(this,jp),XSt(this)===jp)throw new Q1e("Abstract class Iterator not directly constructable")},t_e=function(e,t){r2t?JSt(jp,e,{configurable:!0,get:function(){return t},set:function(r){if(ZSt(this),this===jp)throw new Q1e("You can't redefine this property");xG(this,e)?this[e]=r:QSt(this,e,r)}}):jp[e]=t};xG(jp,X1e)||t_e(X1e,J1e);(e_e||!xG(jp,yG)||jp[yG]===Object)&&t_e(yG,bG);bG.prototype=jp;WSt({global:!0,constructor:!0,forced:e_e},{Iterator:bG})});var ui=M((zRr,r_e)=>{"use strict";r_e.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var jI=M((FRr,n_e)=>{"use strict";var o2t=RangeError;n_e.exports=function(e){if(e===e)return e;throw new o2t("NaN is not allowed")}});var zx=M((URr,o_e)=>{"use strict";var i2t=Qo(),a2t=RangeError;o_e.exports=function(e){var t=i2t(e);if(t<0)throw new a2t("The argument can't be less than 0");return t}});var Bg=M((BRr,c_e)=>{"use strict";var s2t=er(),l2t=Ri(),u2t=aa(),c2t=Tc(),f2t=Nr(),i_e=ro(),p2t=ki(),d2t=c0().IteratorPrototype,EG=qa(),SG=yh(),h2t=f2t("toStringTag"),a_e="IteratorHelper",s_e="WrapForValidIterator",m2t=i_e.set,l_e=function(e){var t=i_e.getterFor(e?s_e:a_e);return c2t(l2t(d2t),{next:function(){var n=t(this);if(e)return n.nextHandler();try{var o=n.done?void 0:n.nextHandler();return EG(o,n.done)}catch(i){throw n.done=!0,i}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var o=p2t(n,"return");return o?s2t(o,n):EG(void 0,!0)}if(r.inner)try{SG(r.inner.iterator,"normal")}catch(i){return SG(n,"throw",i)}return n&&SG(n,"normal"),EG(void 0,!0)}})},g2t=l_e(!0),u_e=l_e(!1);u2t(u_e,h2t,"Iterator Helper");c_e.exports=function(e,t){var r=function(o,i){i?(i.iterator=o.iterator,i.next=o.next):i=o,i.type=t?s_e:a_e,i.nextHandler=e,i.counter=0,i.done=!1,m2t(this,i)};return r.prototype=t?g2t:u_e,r}});var TG=M(()=>{"use strict";var v2t=re(),f_e=er(),IG=Jt(),y2t=ui(),_2t=jI(),x2t=zx(),b2t=Bg(),w2t=fn(),E2t=b2t(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=IG(f_e(t,e)),n=this.done=!!r.done,n)return;if(r=IG(f_e(t,e)),n=this.done=!!r.done,!n)return r.value});v2t({target:"Iterator",proto:!0,real:!0,forced:w2t},{drop:function(t){IG(this);var r=x2t(_2t(+t));return new E2t(y2t(this),{remaining:r})}})});var MG=M(()=>{"use strict";var S2t=re(),I2t=_i(),T2t=kr(),M2t=Jt(),C2t=ui();S2t({target:"Iterator",proto:!0,real:!0},{every:function(t){M2t(this),T2t(t);var r=C2t(this),n=0;return!I2t(r,function(o,i){if(!t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var CG=M(()=>{"use strict";var A2t=re(),D2t=er(),N2t=kr(),p_e=Jt(),O2t=ui(),L2t=Bg(),P2t=j5(),k2t=fn(),R2t=L2t(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,o,i;;){if(n=p_e(D2t(r,e)),o=this.done=!!n.done,o)return;if(i=n.value,P2t(e,t,[i,this.counter++],!0))return i}});A2t({target:"Iterator",proto:!0,real:!0,forced:k2t},{filter:function(t){return p_e(this),N2t(t),new R2t(O2t(this),{predicate:t})}})});var AG=M(()=>{"use strict";var j2t=re(),q2t=_i(),z2t=kr(),F2t=Jt(),U2t=ui();j2t({target:"Iterator",proto:!0,real:!0},{find:function(t){F2t(this),z2t(t);var r=U2t(this),n=0;return q2t(r,function(o,i){if(t(o,n++))return i(o)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var DG=M((XRr,h_e)=>{"use strict";var B2t=er(),d_e=Jt(),V2t=ui(),G2t=Pp();h_e.exports=function(e,t){(!t||typeof e!="string")&&d_e(e);var r=G2t(e);return V2t(d_e(r!==void 0?B2t(r,e):e))}});var OG=M(()=>{"use strict";var H2t=re(),m_e=er(),W2t=kr(),NG=Jt(),$2t=ui(),Y2t=DG(),Z2t=Bg(),g_e=yh(),K2t=fn(),X2t=Z2t(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=NG(m_e(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(o){g_e(e,"throw",o)}if(r=NG(m_e(this.next,e)),this.done=!!r.done)return;try{this.inner=Y2t(t(r.value,this.counter++),!1)}catch(o){g_e(e,"throw",o)}}});H2t({target:"Iterator",proto:!0,real:!0,forced:K2t},{flatMap:function(t){return NG(this),W2t(t),new X2t($2t(this),{mapper:t,inner:null})}})});var LG=M(()=>{"use strict";var J2t=re(),Q2t=_i(),eIt=kr(),tIt=Jt(),rIt=ui();J2t({target:"Iterator",proto:!0,real:!0},{forEach:function(t){tIt(this),eIt(t);var r=rIt(this),n=0;Q2t(r,function(o){t(o,n++)},{IS_RECORD:!0})}})});var PG=M(()=>{"use strict";var nIt=re(),oIt=er(),iIt=pn(),aIt=ss(),sIt=c0().IteratorPrototype,lIt=Bg(),uIt=DG(),cIt=fn(),fIt=lIt(function(){return oIt(this.next,this.iterator)},!0);nIt({target:"Iterator",stat:!0,forced:cIt},{from:function(t){var r=uIt(typeof t=="string"?iIt(t):t,!0);return aIt(sIt,r.iterator)?r.iterator:new fIt(r)}})});var kG=M((ojr,y_e)=>{"use strict";var pIt=er(),dIt=kr(),v_e=Jt(),hIt=ui(),mIt=Bg(),gIt=j5(),vIt=mIt(function(){var e=this.iterator,t=v_e(pIt(this.next,e)),r=this.done=!!t.done;if(!r)return gIt(e,this.mapper,[t.value,this.counter++],!0)});y_e.exports=function(t){return v_e(this),dIt(t),new vIt(hIt(this),{mapper:t})}});var RG=M(()=>{"use strict";var yIt=re(),_It=kG(),xIt=fn();yIt({target:"Iterator",proto:!0,real:!0,forced:xIt},{map:_It})});var jG=M(()=>{"use strict";var bIt=re(),wIt=_i(),EIt=kr(),SIt=Jt(),IIt=ui(),TIt=TypeError;bIt({target:"Iterator",proto:!0,real:!0},{reduce:function(t){SIt(this),EIt(t);var r=IIt(this),n=arguments.length<2,o=n?void 0:arguments[1],i=0;if(wIt(r,function(a){n?(n=!1,o=a):o=t(o,a,i),i++},{IS_RECORD:!0}),n)throw new TIt("Reduce of empty iterator with no initial value");return o}})});var qG=M(()=>{"use strict";var MIt=re(),CIt=_i(),AIt=kr(),DIt=Jt(),NIt=ui();MIt({target:"Iterator",proto:!0,real:!0},{some:function(t){DIt(this),AIt(t);var r=NIt(this),n=0;return CIt(r,function(o,i){if(t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var zG=M(()=>{"use strict";var OIt=re(),LIt=er(),x_e=Jt(),PIt=ui(),kIt=jI(),RIt=zx(),jIt=Bg(),qIt=yh(),zIt=fn(),FIt=jIt(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,qIt(e,"normal",void 0);var t=x_e(LIt(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});OIt({target:"Iterator",proto:!0,real:!0,forced:zIt},{take:function(t){x_e(this);var r=RIt(kIt(+t));return new FIt(PIt(this),{remaining:r})}})});var FG=M(()=>{"use strict";var UIt=re(),BIt=Jt(),VIt=_i(),GIt=ui(),HIt=[].push;UIt({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return VIt(GIt(BIt(this)),HIt,{that:t,IS_RECORD:!0}),t}})});var b_e=M(()=>{"use strict";var WIt=$t(),$It=bl();$It(WIt.JSON,"JSON",!0)});var uO=M((vjr,w_e)=>{"use strict";var YIt=Tt();w_e.exports=YIt(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var fO=M((yjr,S_e)=>{"use strict";var ZIt=Tt(),KIt=Br(),XIt=as(),E_e=uO(),cO=Object.isExtensible,JIt=ZIt(function(){cO(1)});S_e.exports=JIt||E_e?function(t){return!KIt(t)||E_e&&XIt(t)==="ArrayBuffer"?!1:cO?cO(t):!0}:cO});var Ih=M((_jr,I_e)=>{"use strict";var QIt=Tt();I_e.exports=!QIt(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Vg=M((xjr,C_e)=>{"use strict";var eTt=re(),tTt=gt(),rTt=Ex(),nTt=Br(),UG=sn(),oTt=Lo().f,T_e=Cg(),iTt=y5(),BG=fO(),aTt=Mg(),sTt=Ih(),M_e=!1,Th=aTt("meta"),lTt=0,VG=function(e){oTt(e,Th,{value:{objectID:"O"+lTt++,weakData:{}}})},uTt=function(e,t){if(!nTt(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!UG(e,Th)){if(!BG(e))return"F";if(!t)return"E";VG(e)}return e[Th].objectID},cTt=function(e,t){if(!UG(e,Th)){if(!BG(e))return!0;if(!t)return!1;VG(e)}return e[Th].weakData},fTt=function(e){return sTt&&M_e&&BG(e)&&!UG(e,Th)&&VG(e),e},pTt=function(){dTt.enable=function(){},M_e=!0;var e=T_e.f,t=tTt([].splice),r={};r[Th]=1,e(r).length&&(T_e.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===Th){t(o,i,1);break}return o},eTt({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:iTt.f}))},dTt=C_e.exports={enable:pTt,fastKey:uTt,getWeakData:cTt,onFreeze:fTt};rTt[Th]=!0});var qI=M((bjr,D_e)=>{"use strict";var hTt=re(),mTt=$t(),gTt=gt(),A_e=Ix(),vTt=fo(),yTt=Vg(),_Tt=_i(),xTt=Vs(),bTt=Kr(),wTt=oa(),GG=Br(),HG=Tt(),ETt=SI(),STt=bl(),ITt=Ng();D_e.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,i=n?"set":"add",a=mTt[e],u=a&&a.prototype,p=a,h={},g=function(k){var q=gTt(u[k]);vTt(u,k,k==="add"?function(H){return q(this,H===0?0:H),this}:k==="delete"?function(U){return o&&!GG(U)?!1:q(this,U===0?0:U)}:k==="get"?function(H){return o&&!GG(H)?void 0:q(this,H===0?0:H)}:k==="has"?function(H){return o&&!GG(H)?!1:q(this,H===0?0:H)}:function(H,X){return q(this,H===0?0:H,X),this})},x=A_e(e,!bTt(a)||!(o||u.forEach&&!HG(function(){new a().entries().next()})));if(x)p=r.getConstructor(t,e,n,i),yTt.enable();else if(A_e(e,!0)){var b=new p,T=b[i](o?{}:-0,1)!==b,A=HG(function(){b.has(1)}),L=ETt(function(k){new a(k)}),P=!o&&HG(function(){for(var k=new a,q=5;q--;)k[i](q,q);return!k.has(-0)});L||(p=t(function(k,q){xTt(k,u);var U=ITt(new a,k,p);return wTt(q)||_Tt(q,U[i],{that:U,AS_ENTRIES:n}),U}),p.prototype=u,u.constructor=p),(A||P)&&(g("delete"),g("has"),n&&g("get")),(P||T)&&g(i),o&&u.clear&&delete u.clear}return h[e]=p,hTt({global:!0,constructor:!0,forced:p!==a},h),STt(p,e),o||r.setStrong(p,e,n),p}});var $G=M((wjr,R_e)=>{"use strict";var N_e=Ri(),TTt=ei(),O_e=Tc(),MTt=xo(),CTt=Vs(),ATt=oa(),DTt=_i(),NTt=F5(),pO=qa(),OTt=Rg(),zI=Tr(),L_e=Vg().fastKey,k_e=ro(),P_e=k_e.set,WG=k_e.getterFor;R_e.exports={getConstructor:function(e,t,r,n){var o=e(function(h,g){CTt(h,i),P_e(h,{type:t,index:N_e(null),first:null,last:null,size:0}),zI||(h.size=0),ATt(g)||DTt(g,h[n],{that:h,AS_ENTRIES:r})}),i=o.prototype,a=WG(t),u=function(h,g,x){var b=a(h),T=p(h,g),A,L;return T?T.value=x:(b.last=T={index:L=L_e(g,!0),key:g,value:x,previous:A=b.last,next:null,removed:!1},b.first||(b.first=T),A&&(A.next=T),zI?b.size++:h.size++,L!=="F"&&(b.index[L]=T)),h},p=function(h,g){var x=a(h),b=L_e(g),T;if(b!=="F")return x.index[b];for(T=x.first;T;T=T.next)if(T.key===g)return T};return O_e(i,{clear:function(){for(var g=this,x=a(g),b=x.first;b;)b.removed=!0,b.previous&&(b.previous=b.previous.next=null),b=b.next;x.first=x.last=null,x.index=N_e(null),zI?x.size=0:g.size=0},delete:function(h){var g=this,x=a(g),b=p(g,h);if(b){var T=b.next,A=b.previous;delete x.index[b.index],b.removed=!0,A&&(A.next=T),T&&(T.previous=A),x.first===b&&(x.first=T),x.last===b&&(x.last=A),zI?x.size--:g.size--}return!!b},forEach:function(g){for(var x=a(this),b=MTt(g,arguments.length>1?arguments[1]:void 0),T;T=T?T.next:x.first;)for(b(T.value,T.key,this);T&&T.removed;)T=T.previous},has:function(g){return!!p(this,g)}}),O_e(i,r?{get:function(g){var x=p(this,g);return x&&x.value},set:function(g,x){return u(this,g===0?0:g,x)}}:{add:function(g){return u(this,g=g===0?0:g,g)}}),zI&&TTt(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=WG(t),i=WG(n);NTt(e,t,function(a,u){P_e(this,{type:n,target:a,state:o(a),kind:u,last:null})},function(){for(var a=i(this),u=a.kind,p=a.last;p&&p.removed;)p=p.previous;return!a.target||!(a.last=p=p?p.next:a.state.first)?(a.target=null,pO(void 0,!0)):pO(u==="keys"?p.key:u==="values"?p.value:[p.key,p.value],!1)},r?"entries":"values",!r,!0),OTt(t)}}});var j_e=M(()=>{"use strict";var LTt=qI(),PTt=$G();LTt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},PTt)});var dO=M(()=>{"use strict";j_e()});var _a=M((Mjr,q_e)=>{"use strict";var hO=gt(),FI=Map.prototype;q_e.exports={Map,set:hO(FI.set),get:hO(FI.get),has:hO(FI.has),remove:hO(FI.delete),proto:FI}});var YG=M(()=>{"use strict";var kTt=re(),RTt=gt(),jTt=kr(),qTt=Go(),zTt=_i(),mO=_a(),z_e=fn(),FTt=Tt(),F_e=mO.Map,UTt=mO.has,BTt=mO.get,VTt=mO.set,GTt=RTt([].push),HTt=z_e||FTt(function(){return F_e.groupBy("ab",function(e){return e}).get("a").length!==1});kTt({target:"Map",stat:!0,forced:z_e||HTt},{groupBy:function(t,r){qTt(t),jTt(r);var n=new F_e,o=0;return zTt(t,function(i){var a=r(i,o++);UTt(n,a)?GTt(BTt(n,a),i):VTt(n,a,[i])}),n}})});var ZG=M((Djr,U_e)=>{"use strict";var WTt=Math.log;U_e.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:WTt(1+r)}});var V_e=M(()=>{"use strict";var $Tt=re(),YTt=ZG(),KG=Math.acosh,ZTt=Math.log,B_e=Math.sqrt,KTt=Math.LN2,XTt=!KG||Math.floor(KG(Number.MAX_VALUE))!==710||KG(1/0)!==1/0;$Tt({target:"Math",stat:!0,forced:XTt},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?ZTt(r)+KTt:YTt(r-1+B_e(r-1)*B_e(r+1))}})});var W_e=M(()=>{"use strict";var JTt=re(),G_e=Math.asinh,QTt=Math.log,eMt=Math.sqrt;function H_e(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-H_e(-t):QTt(t+eMt(t*t+1))}var tMt=!(G_e&&1/G_e(0)>0);JTt({target:"Math",stat:!0,forced:tMt},{asinh:H_e})});var Y_e=M(()=>{"use strict";var rMt=re(),$_e=Math.atanh,nMt=Math.log,oMt=!($_e&&1/$_e(-0)<0);rMt({target:"Math",stat:!0,forced:oMt},{atanh:function(t){var r=+t;return r===0?r:nMt((1+r)/(1-r))/2}})});var Z_e=M(()=>{"use strict";var iMt=re(),aMt=$5(),sMt=Math.abs,lMt=Math.pow;iMt({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return aMt(r)*lMt(sMt(r),1/3)}})});var K_e=M(()=>{"use strict";var uMt=re(),cMt=Math.floor,fMt=Math.log,pMt=Math.LOG2E;uMt({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-cMt(fMt(r+.5)*pMt):32}})});var BI=M((Ujr,X_e)=>{"use strict";var UI=Math.expm1,dMt=Math.exp;X_e.exports=!UI||UI(10)>22025.465794806718||UI(10)<22025.465794806718||UI(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:dMt(r)-1}:UI});var Q_e=M(()=>{"use strict";var hMt=re(),mMt=BI(),J_e=Math.cosh,gMt=Math.abs,XG=Math.E,vMt=!J_e||J_e(710)===1/0;hMt({target:"Math",stat:!0,forced:vMt},{cosh:function(t){var r=mMt(gMt(t)-1)+1;return(r+1/(r*XG*XG))*(XG/2)}})});var txe=M(()=>{"use strict";var yMt=re(),exe=BI();yMt({target:"Math",stat:!0,forced:exe!==Math.expm1},{expm1:exe})});var rxe=M(()=>{"use strict";var _Mt=re(),xMt=Y5();_Mt({target:"Math",stat:!0},{fround:xMt})});var oxe=M(()=>{"use strict";var bMt=re(),nxe=Math.hypot,wMt=Math.abs,EMt=Math.sqrt,SMt=!!nxe&&nxe(1/0,NaN)!==1/0;bMt({target:"Math",stat:!0,arity:2,forced:SMt},{hypot:function(t,r){for(var n=0,o=0,i=arguments.length,a=0,u,p;o<i;)u=wMt(arguments[o++]),a<u?(p=a/u,n=n*p*p+1,a=u):u>0?(p=u/a,n+=p*p):n+=u;return a===1/0?1/0:a*EMt(n)}})});var axe=M(()=>{"use strict";var IMt=re(),TMt=Tt(),ixe=Math.imul,MMt=TMt(function(){return ixe(4294967295,5)!==-5||ixe.length!==2});IMt({target:"Math",stat:!0,forced:MMt},{imul:function(t,r){var n=65535,o=+t,i=+r,a=n&o,u=n&i;return 0|a*u+((n&o>>>16)*u+a*(n&i>>>16)<<16>>>0)}})});var JG=M((Jjr,sxe)=>{"use strict";var CMt=Math.log,AMt=Math.LOG10E;sxe.exports=Math.log10||function(t){return CMt(t)*AMt}});var lxe=M(()=>{"use strict";var DMt=re(),NMt=JG();DMt({target:"Math",stat:!0},{log10:NMt})});var uxe=M(()=>{"use strict";var OMt=re(),LMt=ZG();OMt({target:"Math",stat:!0},{log1p:LMt})});var cxe=M(()=>{"use strict";var PMt=re(),kMt=Math.log,RMt=Math.LN2;PMt({target:"Math",stat:!0},{log2:function(t){return kMt(t)/RMt}})});var fxe=M(()=>{"use strict";var jMt=re(),qMt=$5();jMt({target:"Math",stat:!0},{sign:qMt})});var hxe=M(()=>{"use strict";var zMt=re(),FMt=Tt(),pxe=BI(),UMt=Math.abs,dxe=Math.exp,BMt=Math.E,VMt=FMt(function(){return Math.sinh(-2e-17)!==-2e-17});zMt({target:"Math",stat:!0,forced:VMt},{sinh:function(t){var r=+t;return UMt(r)<1?(pxe(r)-pxe(-r))/2:(dxe(r-1)-dxe(-r-1))*(BMt/2)}})});var vxe=M(()=>{"use strict";var GMt=re(),mxe=BI(),gxe=Math.exp;GMt({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=mxe(r),o=mxe(-r);return n===1/0?1:o===1/0?-1:(n-o)/(gxe(r)+gxe(-r))}})});var yxe=M(()=>{"use strict";var HMt=bl();HMt(Math,"Math",!0)});var _xe=M(()=>{"use strict";var WMt=re(),$Mt=aB();WMt({target:"Math",stat:!0},{trunc:$Mt})});var VI=M((m6r,xxe)=>{"use strict";var YMt=gt();xxe.exports=YMt(1 .valueOf)});var h0=M((g6r,bxe)=>{"use strict";bxe.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var m0=M((v6r,Exe)=>{"use strict";var ZMt=gt(),KMt=Go(),XMt=Hr(),eH=h0(),wxe=ZMt("".replace),JMt=RegExp("^["+eH+"]+"),QMt=RegExp("(^|[^"+eH+"])["+eH+"]+$"),QG=function(e){return function(t){var r=XMt(KMt(t));return e&1&&(r=wxe(r,JMt,"")),e&2&&(r=wxe(r,QMt,"$1")),r}};Exe.exports={start:QG(1),end:QG(2),trim:QG(3)}});var Dxe=M(()=>{"use strict";var eCt=re(),tH=fn(),tCt=Tr(),Txe=$t(),rH=_5(),Mxe=gt(),rCt=Ix(),Sxe=sn(),nCt=Ng(),oCt=ss(),iCt=dh(),Cxe=aI(),aCt=Tt(),sCt=Cg().f,lCt=Ra().f,uCt=Lo().f,cCt=VI(),fCt=m0().trim,GI="Number",Fx=Txe[GI],Ixe=rH[GI],nH=Fx.prototype,pCt=Txe.TypeError,dCt=Mxe("".slice),gO=Mxe("".charCodeAt),hCt=function(e){var t=Cxe(e,"number");return typeof t=="bigint"?t:mCt(t)},mCt=function(e){var t=Cxe(e,"number"),r,n,o,i,a,u,p,h;if(iCt(t))throw new pCt("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=fCt(t),r=gO(t,0),r===43||r===45){if(n=gO(t,2),n===88||n===120)return NaN}else if(r===48){switch(gO(t,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t;}for(a=dCt(t,2),u=a.length,p=0;p<u;p++)if(h=gO(a,p),h<48||h>i)return NaN;return parseInt(a,o)}}return+t},oH=rCt(GI,!Fx(" 0o1")||!Fx("0b1")||Fx("+0x1")),gCt=function(e){return oCt(nH,e)&&aCt(function(){cCt(e)})},vO=function(t){var r=arguments.length<1?0:Fx(hCt(t));return gCt(this)?nCt(Object(r),this,vO):r};vO.prototype=nH;oH&&!tH&&(nH.constructor=vO);eCt({global:!0,constructor:!0,wrap:!0,forced:oH},{Number:vO});var Axe=function(e,t){for(var r=tCt?sCt(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,o;r.length>n;n++)Sxe(t,o=r[n])&&!Sxe(e,o)&&uCt(e,o,lCt(t,o))};tH&&Ixe&&Axe(rH[GI],Ixe);(oH||tH)&&Axe(rH[GI],Fx)});var Nxe=M(()=>{"use strict";var vCt=re();vCt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var iH=M((w6r,Oxe)=>{"use strict";var yCt=$t(),_Ct=yCt.isFinite;Oxe.exports=Number.isFinite||function(t){return typeof t=="number"&&_Ct(t)}});var Lxe=M(()=>{"use strict";var xCt=re(),bCt=iH();xCt({target:"Number",stat:!0},{isFinite:bCt})});var yO=M((I6r,Pxe)=>{"use strict";var wCt=Br(),ECt=Math.floor;Pxe.exports=Number.isInteger||function(t){return!wCt(t)&&isFinite(t)&&ECt(t)===t}});var kxe=M(()=>{"use strict";var SCt=re(),ICt=yO();SCt({target:"Number",stat:!0},{isInteger:ICt})});var Rxe=M(()=>{"use strict";var TCt=re();TCt({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var jxe=M(()=>{"use strict";var MCt=re(),CCt=yO(),ACt=Math.abs;MCt({target:"Number",stat:!0},{isSafeInteger:function(t){return CCt(t)&&ACt(t)<=9007199254740991}})});var qxe=M(()=>{"use strict";var DCt=re();DCt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var zxe=M(()=>{"use strict";var NCt=re();NCt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var aH=M((R6r,Vxe)=>{"use strict";var Bxe=$t(),OCt=Tt(),LCt=gt(),PCt=Hr(),kCt=m0().trim,RCt=h0(),jCt=LCt("".charAt),_O=Bxe.parseFloat,Fxe=Bxe.Symbol,Uxe=Fxe&&Fxe.iterator,qCt=1/_O(RCt+"-0")!==-1/0||Uxe&&!OCt(function(){_O(Object(Uxe))});Vxe.exports=qCt?function(t){var r=kCt(PCt(t)),n=_O(r);return n===0&&jCt(r,0)==="-"?-0:n}:_O});var Hxe=M(()=>{"use strict";var zCt=re(),Gxe=aH();zCt({target:"Number",stat:!0,forced:Number.parseFloat!==Gxe},{parseFloat:Gxe})});var sH=M((z6r,Xxe)=>{"use strict";var Zxe=$t(),FCt=Tt(),UCt=gt(),BCt=Hr(),VCt=m0().trim,Wxe=h0(),HI=Zxe.parseInt,$xe=Zxe.Symbol,Yxe=$xe&&$xe.iterator,Kxe=/^[+-]?0x/i,GCt=UCt(Kxe.exec),HCt=HI(Wxe+"08")!==8||HI(Wxe+"0x16")!==22||Yxe&&!FCt(function(){HI(Object(Yxe))});Xxe.exports=HCt?function(t,r){var n=VCt(BCt(t));return HI(n,r>>>0||(GCt(Kxe,n)?16:10))}:HI});var Qxe=M(()=>{"use strict";var WCt=re(),Jxe=sH();WCt({target:"Number",stat:!0,forced:Number.parseInt!==Jxe},{parseInt:Jxe})});var obe=M(()=>{"use strict";var $Ct=re(),uH=gt(),YCt=Qo(),ZCt=VI(),KCt=PI(),XCt=JG(),lH=Tt(),JCt=RangeError,ebe=String,QCt=isFinite,eAt=Math.abs,tAt=Math.floor,tbe=Math.pow,rAt=Math.round,qp=uH(1 .toExponential),nAt=uH(KCt),rbe=uH("".slice),nbe=qp(-69e-12,4)==="-6.9000e-11"&&qp(1.255,2)==="1.25e+0"&&qp(12345,3)==="1.235e+4"&&qp(25,0)==="3e+1",oAt=function(){return lH(function(){qp(1,1/0)})&&lH(function(){qp(1,-1/0)})},iAt=function(){return!lH(function(){qp(1/0,1/0),qp(NaN,1/0)})},aAt=!nbe||!oAt()||!iAt();$Ct({target:"Number",proto:!0,forced:aAt},{toExponential:function(t){var r=ZCt(this);if(t===void 0)return qp(r);var n=YCt(t);if(!QCt(r))return String(r);if(n<0||n>20)throw new JCt("Incorrect fraction digits");if(nbe)return qp(r,n);var o="",i,a,u,p;if(r<0&&(o="-",r=-r),r===0)a=0,i=nAt("0",n+1);else{var h=XCt(r);a=tAt(h);var g=tbe(10,a-n),x=rAt(r/g);2*r>=(2*x+1)*g&&(x+=1),x>=tbe(10,n+1)&&(x/=10,a+=1),i=ebe(x)}return n!==0&&(i=rbe(i,0,1)+"."+rbe(i,1)),a===0?(u="+",p="0"):(u=a>0?"+":"-",p=ebe(eAt(a))),i+="e"+u+p,o+i}})});var cbe=M(()=>{"use strict";var sAt=re(),pH=gt(),lAt=Qo(),uAt=VI(),cAt=PI(),ibe=Tt(),fAt=RangeError,lbe=String,ube=Math.floor,fH=pH(cAt),abe=pH("".slice),WI=pH(1 .toFixed),Bx=function(e,t,r){return t===0?r:t%2===1?Bx(e,t-1,r*e):Bx(e*e,t/2,r)},pAt=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},Ux=function(e,t,r){for(var n=-1,o=r;++n<6;)o+=t*e[n],e[n]=o%1e7,o=ube(o/1e7)},cH=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=ube(n/t),n=n%t*1e7},sbe=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=lbe(e[t]);r=r===""?n:r+fH("0",7-n.length)+n}return r},dAt=ibe(function(){return WI(8e-5,3)!=="0.000"||WI(.9,0)!=="1"||WI(1.255,2)!=="1.25"||WI(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!ibe(function(){WI({})});sAt({target:"Number",proto:!0,forced:dAt},{toFixed:function(t){var r=uAt(this),n=lAt(t),o=[0,0,0,0,0,0],i="",a="0",u,p,h,g;if(n<0||n>20)throw new fAt("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return lbe(r);if(r<0&&(i="-",r=-r),r>1e-21)if(u=pAt(r*Bx(2,69,1))-69,p=u<0?r*Bx(2,-u,1):r/Bx(2,u,1),p*=4503599627370496,u=52-u,u>0){for(Ux(o,0,p),h=n;h>=7;)Ux(o,1e7,0),h-=7;for(Ux(o,Bx(10,h,1),0),h=u-1;h>=23;)cH(o,1<<23),h-=23;cH(o,1<<h),Ux(o,1,1),cH(o,2),a=sbe(o)}else Ux(o,0,p),Ux(o,1<<-u,0),a=sbe(o)+fH("0",n);return n>0?(g=a.length,a=i+(g<=n?"0."+fH("0",n-g)+a:abe(a,0,g-n)+"."+abe(a,g-n))):a=i+a,a}})});var dbe=M(()=>{"use strict";var hAt=re(),mAt=gt(),fbe=Tt(),pbe=VI(),xO=mAt(1 .toPrecision),gAt=fbe(function(){return xO(1,void 0)!=="1"})||!fbe(function(){xO({})});hAt({target:"Number",proto:!0,forced:gAt},{toPrecision:function(t){return t===void 0?xO(pbe(this)):xO(pbe(this),t)}})});var hH=M((Y6r,gbe)=>{"use strict";var hbe=Tr(),vAt=gt(),yAt=er(),_At=Tt(),dH=n0(),xAt=pI(),bAt=oI(),wAt=pn(),EAt=ph(),Vx=Object.assign,mbe=Object.defineProperty,SAt=vAt([].concat);gbe.exports=!Vx||_At(function(){if(hbe&&Vx({b:1},Vx(mbe({},"a",{enumerable:!0,get:function(){mbe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),Vx({},e)[r]!==7||dH(Vx({},t)).join("")!==n})?function(t,r){for(var n=wAt(t),o=arguments.length,i=1,a=xAt.f,u=bAt.f;o>i;)for(var p=EAt(arguments[i++]),h=a?SAt(dH(p),a(p)):dH(p),g=h.length,x=0,b;g>x;)b=h[x++],(!hbe||yAt(u,p,b))&&(n[b]=p[b]);return n}:Vx});var ybe=M(()=>{"use strict";var IAt=re(),vbe=hH();IAt({target:"Object",stat:!0,arity:2,forced:Object.assign!==vbe},{assign:vbe})});var _be=M(()=>{"use strict";var TAt=re(),MAt=Tr(),CAt=Ri();TAt({target:"Object",stat:!0,sham:!MAt},{create:CAt})});var $I=M((Q6r,bbe)=>{"use strict";var AAt=fn(),DAt=$t(),NAt=Tt(),xbe=H5();bbe.exports=AAt||!NAt(function(){if(!(xbe&&xbe<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete DAt[e]}})});var wbe=M(()=>{"use strict";var OAt=re(),LAt=Tr(),PAt=$I(),kAt=kr(),RAt=pn(),jAt=Lo();LAt&&OAt({target:"Object",proto:!0,forced:PAt},{__defineGetter__:function(t,r){jAt.f(RAt(this),t,{get:kAt(r),enumerable:!0,configurable:!0})}})});var Sbe=M(()=>{"use strict";var qAt=re(),zAt=Tr(),Ebe=m5().f;qAt({target:"Object",stat:!0,forced:Object.defineProperties!==Ebe,sham:!zAt},{defineProperties:Ebe})});var Tbe=M(()=>{"use strict";var FAt=re(),UAt=Tr(),Ibe=Lo().f;FAt({target:"Object",stat:!0,forced:Object.defineProperty!==Ibe,sham:!UAt},{defineProperty:Ibe})});var Mbe=M(()=>{"use strict";var BAt=re(),VAt=Tr(),GAt=$I(),HAt=kr(),WAt=pn(),$At=Lo();VAt&&BAt({target:"Object",proto:!0,forced:GAt},{__defineSetter__:function(t,r){$At.f(WAt(this),t,{set:HAt(r),enumerable:!0,configurable:!0})}})});var mH=M((lqr,Obe)=>{"use strict";var Abe=Tr(),YAt=Tt(),Dbe=gt(),ZAt=sa(),KAt=n0(),XAt=ia(),JAt=oI().f,Nbe=Dbe(JAt),QAt=Dbe([].push),eDt=Abe&&YAt(function(){var e=Object.create(null);return e[2]=2,!Nbe(e,2)}),Cbe=function(e){return function(t){for(var r=XAt(t),n=KAt(r),o=eDt&&ZAt(r)===null,i=n.length,a=0,u=[],p;i>a;)p=n[a++],(!Abe||(o?p in r:Nbe(r,p)))&&QAt(u,e?[p,r[p]]:r[p]);return u}};Obe.exports={entries:Cbe(!0),values:Cbe(!1)}});var Lbe=M(()=>{"use strict";var tDt=re(),rDt=mH().entries;tDt({target:"Object",stat:!0},{entries:function(t){return rDt(t)}})});var Pbe=M(()=>{"use strict";var nDt=re(),oDt=Ih(),iDt=Tt(),aDt=Br(),sDt=Vg().onFreeze,gH=Object.freeze,lDt=iDt(function(){gH(1)});nDt({target:"Object",stat:!0,forced:lDt,sham:!oDt},{freeze:function(t){return gH&&aDt(t)?gH(sDt(t)):t}})});var kbe=M(()=>{"use strict";var uDt=re(),cDt=_i(),fDt=Sc();uDt({target:"Object",stat:!0},{fromEntries:function(t){var r={};return cDt(t,function(n,o){fDt(r,n,o)},{AS_ENTRIES:!0}),r}})});var qbe=M(()=>{"use strict";var pDt=re(),dDt=Tt(),hDt=ia(),Rbe=Ra().f,jbe=Tr(),mDt=!jbe||dDt(function(){Rbe(1)});pDt({target:"Object",stat:!0,forced:mDt,sham:!jbe},{getOwnPropertyDescriptor:function(t,r){return Rbe(hDt(t),r)}})});var zbe=M(()=>{"use strict";var gDt=re(),vDt=Tr(),yDt=f5(),_Dt=ia(),xDt=Ra(),bDt=Sc();gDt({target:"Object",stat:!0,sham:!vDt},{getOwnPropertyDescriptors:function(t){for(var r=_Dt(t),n=xDt.f,o=yDt(r),i={},a=0,u,p;o.length>a;)p=n(r,u=o[a++]),p!==void 0&&bDt(i,u,p);return i}})});var Fbe=M(()=>{"use strict";var wDt=re(),EDt=Tt(),SDt=y5().f,IDt=EDt(function(){return!Object.getOwnPropertyNames(1)});wDt({target:"Object",stat:!0,forced:IDt},{getOwnPropertyNames:SDt})});var Bbe=M(()=>{"use strict";var TDt=re(),MDt=Tt(),CDt=pn(),Ube=sa(),ADt=N5(),DDt=MDt(function(){Ube(1)});TDt({target:"Object",stat:!0,forced:DDt,sham:!ADt},{getPrototypeOf:function(t){return Ube(CDt(t))}})});var vH=M(()=>{"use strict";var NDt=re(),ODt=Fr(),LDt=gt(),PDt=kr(),kDt=Go(),RDt=Op(),jDt=_i(),qDt=Tt(),Vbe=Object.groupBy,zDt=ODt("Object","create"),FDt=LDt([].push),UDt=!Vbe||qDt(function(){return Vbe("ab",function(e){return e}).a.length!==1});NDt({target:"Object",stat:!0,forced:UDt},{groupBy:function(t,r){kDt(t),PDt(r);var n=zDt(null),o=0;return jDt(t,function(i){var a=RDt(r(i,o++));a in n?FDt(n[a],i):n[a]=[i]}),n}})});var yH=M(()=>{"use strict";var BDt=re(),VDt=sn();BDt({target:"Object",stat:!0},{hasOwn:VDt})});var _H=M((Mqr,Gbe)=>{"use strict";Gbe.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var Hbe=M(()=>{"use strict";var GDt=re(),HDt=_H();GDt({target:"Object",stat:!0},{is:HDt})});var $be=M(()=>{"use strict";var WDt=re(),Wbe=fO();WDt({target:"Object",stat:!0,forced:Object.isExtensible!==Wbe},{isExtensible:Wbe})});var Zbe=M(()=>{"use strict";var $Dt=re(),YDt=Tt(),ZDt=Br(),KDt=as(),Ybe=uO(),xH=Object.isFrozen,XDt=Ybe||YDt(function(){xH(1)});$Dt({target:"Object",stat:!0,forced:XDt},{isFrozen:function(t){return!ZDt(t)||Ybe&&KDt(t)==="ArrayBuffer"?!0:xH?xH(t):!1}})});var Xbe=M(()=>{"use strict";var JDt=re(),QDt=Tt(),e4t=Br(),t4t=as(),Kbe=uO(),bH=Object.isSealed,r4t=Kbe||QDt(function(){bH(1)});JDt({target:"Object",stat:!0,forced:r4t},{isSealed:function(t){return!e4t(t)||Kbe&&t4t(t)==="ArrayBuffer"?!0:bH?bH(t):!1}})});var Qbe=M(()=>{"use strict";var n4t=re(),o4t=pn(),Jbe=n0(),i4t=Tt(),a4t=i4t(function(){Jbe(1)});n4t({target:"Object",stat:!0,forced:a4t},{keys:function(t){return Jbe(o4t(t))}})});var ewe=M(()=>{"use strict";var s4t=re(),l4t=Tr(),u4t=$I(),c4t=pn(),f4t=Op(),p4t=sa(),d4t=Ra().f;l4t&&s4t({target:"Object",proto:!0,forced:u4t},{__lookupGetter__:function(t){var r=c4t(this),n=f4t(t),o;do if(o=d4t(r,n))return o.get;while(r=p4t(r))}})});var twe=M(()=>{"use strict";var h4t=re(),m4t=Tr(),g4t=$I(),v4t=pn(),y4t=Op(),_4t=sa(),x4t=Ra().f;m4t&&h4t({target:"Object",proto:!0,forced:g4t},{__lookupSetter__:function(t){var r=v4t(this),n=y4t(t),o;do if(o=x4t(r,n))return o.set;while(r=_4t(r))}})});var rwe=M(()=>{"use strict";var b4t=re(),w4t=Br(),E4t=Vg().onFreeze,S4t=Ih(),I4t=Tt(),wH=Object.preventExtensions,T4t=I4t(function(){wH(1)});b4t({target:"Object",stat:!0,forced:T4t,sham:!S4t},{preventExtensions:function(t){return wH&&w4t(t)?wH(E4t(t)):t}})});var swe=M(()=>{"use strict";var M4t=Tr(),C4t=ei(),A4t=Br(),D4t=LB(),N4t=pn(),O4t=Go(),nwe=Object.getPrototypeOf,owe=Object.setPrototypeOf,iwe=Object.prototype,awe="__proto__";if(M4t&&nwe&&owe&&!(awe in iwe))try{C4t(iwe,awe,{configurable:!0,get:function(){return nwe(N4t(this))},set:function(t){var r=O4t(this);D4t(t)&&A4t(r)&&owe(r,t)}})}catch(e){}});var lwe=M(()=>{"use strict";var L4t=re(),P4t=Br(),k4t=Vg().onFreeze,R4t=Ih(),j4t=Tt(),EH=Object.seal,q4t=j4t(function(){EH(1)});L4t({target:"Object",stat:!0,forced:q4t,sham:!R4t},{seal:function(t){return EH&&P4t(t)?EH(k4t(t)):t}})});var uwe=M(()=>{"use strict";var z4t=re(),F4t=Ec();z4t({target:"Object",stat:!0},{setPrototypeOf:F4t})});var fwe=M((Kqr,cwe)=>{"use strict";var U4t=d5(),B4t=eu();cwe.exports=U4t?{}.toString:function(){return"[object "+B4t(this)+"]"}});var pwe=M(()=>{"use strict";var V4t=d5(),G4t=fo(),H4t=fwe();V4t||G4t(Object.prototype,"toString",H4t,{unsafe:!0})});var dwe=M(()=>{"use strict";var W4t=re(),$4t=mH().values;W4t({target:"Object",stat:!0},{values:function(t){return $4t(t)}})});var mwe=M(()=>{"use strict";var Y4t=re(),hwe=aH();Y4t({global:!0,forced:parseFloat!==hwe},{parseFloat:hwe})});var vwe=M(()=>{"use strict";var Z4t=re(),gwe=sH();Z4t({global:!0,forced:parseInt!==gwe},{parseInt:gwe})});var YI=M((izr,ywe)=>{"use strict";var K4t=Of(),X4t=Tg(),J4t=TypeError;ywe.exports=function(e){if(K4t(e))return e;throw new J4t(X4t(e)+" is not a constructor")}});var ZI=M((azr,xwe)=>{"use strict";var _we=Jt(),Q4t=YI(),eNt=oa(),tNt=Nr(),rNt=tNt("species");xwe.exports=function(e,t){var r=_we(e).constructor,n;return r===void 0||eNt(n=_we(r)[rNt])?t:Q4t(n)}});var Hu=M((szr,bwe)=>{"use strict";var nNt=TypeError;bwe.exports=function(e,t){if(e<t)throw new nNt("Not enough arguments");return e}});var SH=M((lzr,wwe)=>{"use strict";var oNt=Mf();wwe.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(oNt)});var JI=M((uzr,Nwe)=>{"use strict";var Wu=$t(),iNt=Bs(),aNt=xo(),Ewe=Kr(),sNt=sn(),Dwe=Tt(),Swe=uB(),lNt=tu(),Iwe=sI(),uNt=Hu(),cNt=SH(),fNt=f0(),DH=Wu.setImmediate,NH=Wu.clearImmediate,pNt=Wu.process,IH=Wu.Dispatch,dNt=Wu.Function,Twe=Wu.MessageChannel,hNt=Wu.String,TH=0,KI={},Mwe="onreadystatechange",XI,g0,MH,CH;Dwe(function(){XI=Wu.location});var OH=function(e){if(sNt(KI,e)){var t=KI[e];delete KI[e],t()}},AH=function(e){return function(){OH(e)}},Cwe=function(e){OH(e.data)},Awe=function(e){Wu.postMessage(hNt(e),XI.protocol+"//"+XI.host)};(!DH||!NH)&&(DH=function(t){uNt(arguments.length,1);var r=Ewe(t)?t:dNt(t),n=lNt(arguments,1);return KI[++TH]=function(){iNt(r,void 0,n)},g0(TH),TH},NH=function(t){delete KI[t]},fNt?g0=function(e){pNt.nextTick(AH(e))}:IH&&IH.now?g0=function(e){IH.now(AH(e))}:Twe&&!cNt?(MH=new Twe,CH=MH.port2,MH.port1.onmessage=Cwe,g0=aNt(CH.postMessage,CH)):Wu.addEventListener&&Ewe(Wu.postMessage)&&!Wu.importScripts&&XI&&XI.protocol!=="file:"&&!Dwe(Awe)?(g0=Awe,Wu.addEventListener("message",Cwe,!1)):Mwe in Iwe("script")?g0=function(e){Swe.appendChild(Iwe("script"))[Mwe]=function(){Swe.removeChild(this),OH(e)}}:g0=function(e){setTimeout(AH(e),0)});Nwe.exports={set:DH,clear:NH}});var LH=M((czr,Lwe)=>{"use strict";var Owe=$t(),mNt=Tr(),gNt=Object.getOwnPropertyDescriptor;Lwe.exports=function(e){if(!mNt)return Owe[e];var t=gNt(Owe,e);return t&&t.value}});var PH=M((fzr,kwe)=>{"use strict";var Pwe=function(){this.head=null,this.tail=null};Pwe.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};kwe.exports=Pwe});var jwe=M((pzr,Rwe)=>{"use strict";var vNt=Mf();Rwe.exports=/ipad|iphone|ipod/i.test(vNt)&&typeof Pebble!="undefined"});var zwe=M((dzr,qwe)=>{"use strict";var yNt=Mf();qwe.exports=/web0s(?!.*chrome)/i.test(yNt)});var FH=M((hzr,Hwe)=>{"use strict";var Hx=$t(),_Nt=LH(),Fwe=xo(),kH=JI().set,xNt=PH(),bNt=SH(),wNt=jwe(),ENt=zwe(),RH=f0(),Uwe=Hx.MutationObserver||Hx.WebKitMutationObserver,Bwe=Hx.document,Vwe=Hx.process,bO=Hx.Promise,zH=_Nt("queueMicrotask"),Gx,jH,qH,wO,Gwe;zH||(QI=new xNt,eT=function(){var e,t;for(RH&&(e=Vwe.domain)&&e.exit();t=QI.get();)try{t()}catch(r){throw QI.head&&Gx(),r}e&&e.enter()},!bNt&&!RH&&!ENt&&Uwe&&Bwe?(jH=!0,qH=Bwe.createTextNode(""),new Uwe(eT).observe(qH,{characterData:!0}),Gx=function(){qH.data=jH=!jH}):!wNt&&bO&&bO.resolve?(wO=bO.resolve(void 0),wO.constructor=bO,Gwe=Fwe(wO.then,wO),Gx=function(){Gwe(eT)}):RH?Gx=function(){Vwe.nextTick(eT)}:(kH=Fwe(kH,Hx),Gx=function(){kH(eT)}),zH=function(e){QI.head||Gx(),QI.add(e)});var QI,eT;Hwe.exports=zH});var UH=M((mzr,Wwe)=>{"use strict";Wwe.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var Gg=M((gzr,$we)=>{"use strict";$we.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var v0=M((vzr,Ywe)=>{"use strict";var SNt=$t();Ywe.exports=SNt.Promise});var Wx=M((yzr,Jwe)=>{"use strict";var INt=$t(),tT=v0(),TNt=Kr(),MNt=Ix(),CNt=lI(),ANt=Nr(),Zwe=DI(),DNt=fn(),BH=Np(),Kwe=tT&&tT.prototype,NNt=ANt("species"),VH=!1,Xwe=TNt(INt.PromiseRejectionEvent),ONt=MNt("Promise",function(){var e=CNt(tT),t=e!==String(tT);if(!t&&BH===66||DNt&&!(Kwe.catch&&Kwe.finally))return!0;if(!BH||BH<51||!/native code/.test(e)){var r=new tT(function(i){i(1)}),n=function(i){i(function(){},function(){})},o=r.constructor={};if(o[NNt]=n,VH=r.then(function(){})instanceof n,!VH)return!0}return!t&&(Zwe==="BROWSER"||Zwe==="DENO")&&!Xwe});Jwe.exports={CONSTRUCTOR:ONt,REJECTION_EVENT:Xwe,SUBCLASSING:VH}});var zp=M((_zr,eEe)=>{"use strict";var Qwe=kr(),LNt=TypeError,PNt=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new LNt("Bad Promise constructor");t=n,r=o}),this.resolve=Qwe(t),this.reject=Qwe(r)};eEe.exports.f=function(e){return new PNt(e)}});var _Ee=M(()=>{"use strict";var kNt=re(),RNt=fn(),TO=f0(),Hg=$t(),Kx=er(),tEe=fo(),rEe=Ec(),jNt=bl(),qNt=Rg(),zNt=kr(),IO=Kr(),FNt=Br(),UNt=Vs(),BNt=ZI(),sEe=JI().set,YH=FH(),VNt=UH(),GNt=Gg(),HNt=PH(),lEe=ro(),MO=v0(),ZH=Wx(),uEe=zp(),CO="Promise",cEe=ZH.CONSTRUCTOR,WNt=ZH.REJECTION_EVENT,$Nt=ZH.SUBCLASSING,GH=lEe.getterFor(CO),YNt=lEe.set,$x=MO&&MO.prototype,y0=MO,EO=$x,fEe=Hg.TypeError,HH=Hg.document,KH=Hg.process,WH=uEe.f,ZNt=WH,KNt=!!(HH&&HH.createEvent&&Hg.dispatchEvent),pEe="unhandledrejection",XNt="rejectionhandled",nEe=0,dEe=1,JNt=2,XH=1,hEe=2,SO,oEe,QNt,iEe,mEe=function(e){var t;return FNt(e)&&IO(t=e.then)?t:!1},gEe=function(e,t){var r=t.value,n=t.state===dEe,o=n?e.ok:e.fail,i=e.resolve,a=e.reject,u=e.domain,p,h,g;try{o?(n||(t.rejection===hEe&&t5t(t),t.rejection=XH),o===!0?p=r:(u&&u.enter(),p=o(r),u&&(u.exit(),g=!0)),p===e.promise?a(new fEe("Promise-chain cycle")):(h=mEe(p))?Kx(h,p,i,a):i(p)):a(r)}catch(x){u&&!g&&u.exit(),a(x)}},vEe=function(e,t){e.notified||(e.notified=!0,YH(function(){for(var r=e.reactions,n;n=r.get();)gEe(n,e);e.notified=!1,t&&!e.rejection&&e5t(e)}))},yEe=function(e,t,r){var n,o;KNt?(n=HH.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),Hg.dispatchEvent(n)):n={promise:t,reason:r},!WNt&&(o=Hg["on"+e])?o(n):e===pEe&&VNt("Unhandled promise rejection",r)},e5t=function(e){Kx(sEe,Hg,function(){var t=e.facade,r=e.value,n=aEe(e),o;if(n&&(o=GNt(function(){TO?KH.emit("unhandledRejection",r,t):yEe(pEe,t,r)}),e.rejection=TO||aEe(e)?hEe:XH,o.error))throw o.value})},aEe=function(e){return e.rejection!==XH&&!e.parent},t5t=function(e){Kx(sEe,Hg,function(){var t=e.facade;TO?KH.emit("rejectionHandled",t):yEe(XNt,t,e.value)})},Yx=function(e,t,r){return function(n){e(t,n,r)}},Zx=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=JNt,vEe(e,!0))},$H=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new fEe("Promise can't be resolved itself");var n=mEe(t);n?YH(function(){var o={done:!1};try{Kx(n,t,Yx($H,o,e),Yx(Zx,o,e))}catch(i){Zx(o,i,e)}}):(e.value=t,e.state=dEe,vEe(e,!1))}catch(o){Zx({done:!1},o,e)}}};if(cEe&&(y0=function(t){UNt(this,EO),zNt(t),Kx(SO,this);var r=GH(this);try{t(Yx($H,r),Yx(Zx,r))}catch(n){Zx(r,n)}},EO=y0.prototype,SO=function(t){YNt(this,{type:CO,done:!1,notified:!1,parent:!1,reactions:new HNt,rejection:!1,state:nEe,value:null})},SO.prototype=tEe(EO,"then",function(t,r){var n=GH(this),o=WH(BNt(this,y0));return n.parent=!0,o.ok=IO(t)?t:!0,o.fail=IO(r)&&r,o.domain=TO?KH.domain:void 0,n.state===nEe?n.reactions.add(o):YH(function(){gEe(o,n)}),o.promise}),oEe=function(){var e=new SO,t=GH(e);this.promise=e,this.resolve=Yx($H,t),this.reject=Yx(Zx,t)},uEe.f=WH=function(e){return e===y0||e===QNt?new oEe(e):ZNt(e)},!RNt&&IO(MO)&&$x!==Object.prototype)){iEe=$x.then,$Nt||tEe($x,"then",function(t,r){var n=this;return new y0(function(o,i){Kx(iEe,n,o,i)}).then(t,r)},{unsafe:!0});try{delete $x.constructor}catch(e){}rEe&&rEe($x,EO)}kNt({global:!0,constructor:!0,wrap:!0,forced:cEe},{Promise:y0});jNt(y0,CO,!1,!0);qNt(CO)});var rT=M((wzr,xEe)=>{"use strict";var r5t=v0(),n5t=SI(),o5t=Wx().CONSTRUCTOR;xEe.exports=o5t||!n5t(function(e){r5t.all(e).then(void 0,function(){})})});var bEe=M(()=>{"use strict";var i5t=re(),a5t=er(),s5t=kr(),l5t=zp(),u5t=Gg(),c5t=_i(),f5t=rT();i5t({target:"Promise",stat:!0,forced:f5t},{all:function(t){var r=this,n=l5t.f(r),o=n.resolve,i=n.reject,a=u5t(function(){var u=s5t(r.resolve),p=[],h=0,g=1;c5t(t,function(x){var b=h++,T=!1;g++,a5t(u,r,x).then(function(A){T||(T=!0,p[b]=A,--g||o(p))},i)}),--g||o(p)});return a.error&&i(a.value),n.promise}})});var EEe=M(()=>{"use strict";var p5t=re(),d5t=fn(),h5t=Wx().CONSTRUCTOR,QH=v0(),m5t=Fr(),g5t=Kr(),v5t=fo(),wEe=QH&&QH.prototype;p5t({target:"Promise",proto:!0,forced:h5t,real:!0},{catch:function(e){return this.then(void 0,e)}});!d5t&&g5t(QH)&&(JH=m5t("Promise").prototype.catch,wEe.catch!==JH&&v5t(wEe,"catch",JH,{unsafe:!0}));var JH});var SEe=M(()=>{"use strict";var y5t=re(),_5t=er(),x5t=kr(),b5t=zp(),w5t=Gg(),E5t=_i(),S5t=rT();y5t({target:"Promise",stat:!0,forced:S5t},{race:function(t){var r=this,n=b5t.f(r),o=n.reject,i=w5t(function(){var a=x5t(r.resolve);E5t(t,function(u){_5t(a,r,u).then(n.resolve,o)})});return i.error&&o(i.value),n.promise}})});var IEe=M(()=>{"use strict";var I5t=re(),T5t=zp(),M5t=Wx().CONSTRUCTOR;I5t({target:"Promise",stat:!0,forced:M5t},{reject:function(t){var r=T5t.f(this),n=r.reject;return n(t),r.promise}})});var eW=M((Nzr,TEe)=>{"use strict";var C5t=Jt(),A5t=Br(),D5t=zp();TEe.exports=function(e,t){if(C5t(e),A5t(t)&&t.constructor===e)return t;var r=D5t.f(e),n=r.resolve;return n(t),r.promise}});var AEe=M(()=>{"use strict";var N5t=re(),O5t=Fr(),MEe=fn(),L5t=v0(),CEe=Wx().CONSTRUCTOR,P5t=eW(),k5t=O5t("Promise"),R5t=MEe&&!CEe;N5t({target:"Promise",stat:!0,forced:MEe||CEe},{resolve:function(t){return P5t(R5t&&this===k5t?L5t:this,t)}})});var DEe=M(()=>{"use strict";_Ee();bEe();EEe();SEe();IEe();AEe()});var tW=M(()=>{"use strict";var j5t=re(),q5t=er(),z5t=kr(),F5t=zp(),U5t=Gg(),B5t=_i(),V5t=rT();j5t({target:"Promise",stat:!0,forced:V5t},{allSettled:function(t){var r=this,n=F5t.f(r),o=n.resolve,i=n.reject,a=U5t(function(){var u=z5t(r.resolve),p=[],h=0,g=1;B5t(t,function(x){var b=h++,T=!1;g++,q5t(u,r,x).then(function(A){T||(T=!0,p[b]={status:"fulfilled",value:A},--g||o(p))},function(A){T||(T=!0,p[b]={status:"rejected",reason:A},--g||o(p))})}),--g||o(p)});return a.error&&i(a.value),n.promise}})});var rW=M(()=>{"use strict";var G5t=re(),H5t=er(),W5t=kr(),$5t=Fr(),Y5t=zp(),Z5t=Gg(),K5t=_i(),X5t=rT(),NEe="No one promise resolved";G5t({target:"Promise",stat:!0,forced:X5t},{any:function(t){var r=this,n=$5t("AggregateError"),o=Y5t.f(r),i=o.resolve,a=o.reject,u=Z5t(function(){var p=W5t(r.resolve),h=[],g=0,x=1,b=!1;K5t(t,function(T){var A=g++,L=!1;x++,H5t(p,r,T).then(function(P){L||b||(b=!0,i(P))},function(P){L||b||(L=!0,h[A]=P,--x||a(new n(h,NEe)))})}),--x||a(new n(h,NEe))});return u.error&&a(u.value),o.promise}})});var kEe=M(()=>{"use strict";var J5t=re(),Q5t=fn(),AO=v0(),eOt=Tt(),LEe=Fr(),PEe=Kr(),tOt=ZI(),OEe=eW(),rOt=fo(),oW=AO&&AO.prototype,nOt=!!AO&&eOt(function(){oW.finally.call({then:function(){}},function(){})});J5t({target:"Promise",proto:!0,real:!0,forced:nOt},{finally:function(e){var t=tOt(this,LEe("Promise")),r=PEe(e);return this.then(r?function(n){return OEe(t,e()).then(function(){return n})}:e,r?function(n){return OEe(t,e()).then(function(){throw n})}:e)}});!Q5t&&PEe(AO)&&(nW=LEe("Promise").prototype.finally,oW.finally!==nW&&rOt(oW,"finally",nW,{unsafe:!0}));var nW});var aW=M(()=>{"use strict";var oOt=re(),iOt=$t(),aOt=Bs(),sOt=tu(),lOt=zp(),uOt=kr(),jEe=Gg(),iW=iOt.Promise,REe=!1,cOt=!iW||!iW.try||jEe(function(){iW.try(function(e){REe=e===8},8)}).error||!REe;oOt({target:"Promise",stat:!0,forced:cOt},{try:function(e){var t=arguments.length>1?sOt(arguments,1):[],r=lOt.f(this),n=jEe(function(){return aOt(uOt(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var sW=M(()=>{"use strict";var fOt=re(),pOt=zp();fOt({target:"Promise",stat:!0},{withResolvers:function(){var t=pOt.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var qEe=M(()=>{"use strict";var dOt=re(),hOt=Bs(),mOt=kr(),gOt=Jt(),vOt=Tt(),yOt=!vOt(function(){Reflect.apply(function(){})});dOt({target:"Reflect",stat:!0,forced:yOt},{apply:function(t,r,n){return hOt(mOt(t),r,gOt(n))}})});var HEe=M(()=>{"use strict";var _Ot=re(),xOt=Fr(),lW=Bs(),bOt=hG(),zEe=YI(),wOt=Jt(),FEe=Br(),EOt=Ri(),BEe=Tt(),uW=xOt("Reflect","construct"),SOt=Object.prototype,IOt=[].push,VEe=BEe(function(){function e(){}return!(uW(function(){},[],e)instanceof e)}),GEe=!BEe(function(){uW(function(){})}),UEe=VEe||GEe;_Ot({target:"Reflect",stat:!0,forced:UEe,sham:UEe},{construct:function(t,r){zEe(t),wOt(r);var n=arguments.length<3?t:zEe(arguments[2]);if(GEe&&!VEe)return uW(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);}var o=[null];return lW(IOt,o,r),new(lW(bOt,t,o))}var i=n.prototype,a=EOt(FEe(i)?i:SOt),u=lW(t,a,r);return FEe(u)?u:a}})});var YEe=M(()=>{"use strict";var TOt=re(),MOt=Tr(),WEe=Jt(),COt=Op(),$Ee=Lo(),AOt=Tt(),DOt=AOt(function(){Reflect.defineProperty($Ee.f({},1,{value:1}),1,{value:2})});TOt({target:"Reflect",stat:!0,forced:DOt,sham:!MOt},{defineProperty:function(t,r,n){WEe(t);var o=COt(r);WEe(n);try{return $Ee.f(t,o,n),!0}catch(i){return!1}}})});var ZEe=M(()=>{"use strict";var NOt=re(),OOt=Jt(),LOt=Ra().f;NOt({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=LOt(OOt(t),r);return n&&!n.configurable?!1:delete t[r]}})});var cW=M((e8r,XEe)=>{"use strict";var KEe=sn();XEe.exports=function(e){return e!==void 0&&(KEe(e,"value")||KEe(e,"writable"))}});var QEe=M(()=>{"use strict";var POt=re(),kOt=er(),ROt=Br(),jOt=Jt(),qOt=cW(),zOt=Ra(),FOt=sa();function JEe(e,t){var r=arguments.length<3?e:arguments[2],n,o;if(jOt(e)===r)return e[t];if(n=zOt.f(e,t),n)return qOt(n)?n.value:n.get===void 0?void 0:kOt(n.get,r);if(ROt(o=FOt(e)))return JEe(o,t,r)}POt({target:"Reflect",stat:!0},{get:JEe})});var eSe=M(()=>{"use strict";var UOt=re(),BOt=Tr(),VOt=Jt(),GOt=Ra();UOt({target:"Reflect",stat:!0,sham:!BOt},{getOwnPropertyDescriptor:function(t,r){return GOt.f(VOt(t),r)}})});var tSe=M(()=>{"use strict";var HOt=re(),WOt=Jt(),$Ot=sa(),YOt=N5();HOt({target:"Reflect",stat:!0,sham:!YOt},{getPrototypeOf:function(t){return $Ot(WOt(t))}})});var rSe=M(()=>{"use strict";var ZOt=re();ZOt({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var nSe=M(()=>{"use strict";var KOt=re(),XOt=Jt(),JOt=fO();KOt({target:"Reflect",stat:!0},{isExtensible:function(t){return XOt(t),JOt(t)}})});var oSe=M(()=>{"use strict";var QOt=re(),eLt=f5();QOt({target:"Reflect",stat:!0},{ownKeys:eLt})});var iSe=M(()=>{"use strict";var tLt=re(),rLt=Fr(),nLt=Jt(),oLt=Ih();tLt({target:"Reflect",stat:!0,sham:!oLt},{preventExtensions:function(t){nLt(t);try{var r=rLt("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var cSe=M(()=>{"use strict";var iLt=re(),aLt=er(),sLt=Jt(),aSe=Br(),lLt=cW(),uLt=Tt(),fW=Lo(),sSe=Ra(),cLt=sa(),lSe=Jl();function uSe(e,t,r){var n=arguments.length<4?e:arguments[3],o=sSe.f(sLt(e),t),i,a,u;if(!o){if(aSe(a=cLt(e)))return uSe(a,t,r,n);o=lSe(0)}if(lLt(o)){if(o.writable===!1||!aSe(n))return!1;if(i=sSe.f(n,t)){if(i.get||i.set||i.writable===!1)return!1;i.value=r,fW.f(n,t,i)}else fW.f(n,t,lSe(0,r))}else{if(u=o.set,u===void 0)return!1;aLt(u,n,r)}return!0}var fLt=uLt(function(){var e=function(){},t=fW.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});iLt({target:"Reflect",stat:!0,forced:fLt},{set:uSe})});var pSe=M(()=>{"use strict";var pLt=re(),dLt=Jt(),hLt=PB(),fSe=Ec();fSe&&pLt({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){dLt(t),hLt(r);try{return fSe(t,r),!0}catch(n){return!1}}})});var dSe=M(()=>{"use strict";var mLt=re(),gLt=$t(),vLt=bl();mLt({global:!0},{Reflect:{}});vLt(gLt.Reflect,"Reflect",!0)});var nT=M((b8r,hSe)=>{"use strict";var yLt=Br(),_Lt=as(),xLt=Nr(),bLt=xLt("match");hSe.exports=function(e){var t;return yLt(e)&&((t=e[bLt])!==void 0?!!t:_Lt(e)==="RegExp")}});var DO=M((w8r,mSe)=>{"use strict";var wLt=Jt();mSe.exports=function(){var e=wLt(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var Xx=M((E8r,vSe)=>{"use strict";var ELt=er(),SLt=sn(),ILt=ss(),TLt=DO(),gSe=RegExp.prototype;vSe.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in gSe)&&!SLt(e,"flags")&&ILt(gSe,e)?ELt(TLt,e):t}});var oT=M((S8r,ySe)=>{"use strict";var pW=Tt(),MLt=$t(),dW=MLt.RegExp,hW=pW(function(){var e=dW("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),CLt=hW||pW(function(){return!dW("a","y").sticky}),ALt=hW||pW(function(){var e=dW("^r","gy");return e.lastIndex=2,e.exec("str")!==null});ySe.exports={BROKEN_CARET:ALt,MISSED_STICKY:CLt,UNSUPPORTED_Y:hW}});var NO=M((I8r,_Se)=>{"use strict";var DLt=Tt(),NLt=$t(),OLt=NLt.RegExp;_Se.exports=DLt(function(){var e=OLt(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var mW=M((T8r,xSe)=>{"use strict";var LLt=Tt(),PLt=$t(),kLt=PLt.RegExp;xSe.exports=LLt(function(){var e=kLt("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var DSe=M(()=>{"use strict";var RLt=Tr(),_W=$t(),iT=gt(),jLt=Ix(),qLt=Ng(),zLt=aa(),FLt=Ri(),ULt=Cg().f,bSe=ss(),BLt=nT(),wSe=Hr(),VLt=Xx(),TSe=oT(),GLt=kB(),HLt=fo(),WLt=Tt(),$Lt=sn(),YLt=ro().enforce,ZLt=Rg(),KLt=Nr(),MSe=NO(),CSe=mW(),XLt=KLt("match"),$g=_W.RegExp,Jx=$g.prototype,JLt=_W.SyntaxError,QLt=iT(Jx.exec),OO=iT("".charAt),ESe=iT("".replace),SSe=iT("".indexOf),ISe=iT("".slice),e3t=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,_0=/a/g,gW=/a/g,t3t=new $g(_0)!==_0,ASe=TSe.MISSED_STICKY,r3t=TSe.UNSUPPORTED_Y,n3t=RLt&&(!t3t||ASe||MSe||CSe||WLt(function(){return gW[XLt]=!1,$g(_0)!==_0||$g(gW)===gW||String($g(_0,"i"))!=="/a/i"})),o3t=function(e){for(var t=e.length,r=0,n="",o=!1,i;r<=t;r++){if(i=OO(e,r),i==="\\"){n+=i+OO(e,++r);continue}!o&&i==="."?n+="[\\s\\S]":(i==="["?o=!0:i==="]"&&(o=!1),n+=i)}return n},i3t=function(e){for(var t=e.length,r=0,n="",o=[],i=FLt(null),a=!1,u=!1,p=0,h="",g;r<=t;r++){if(g=OO(e,r),g==="\\")g+=OO(e,++r);else if(g==="]")a=!1;else if(!a)switch(!0){case g==="[":a=!0;break;case g==="(":if(n+=g,ISe(e,r+1,r+3)==="?:")continue;QLt(e3t,ISe(e,r+1))&&(r+=2,u=!0),p++;continue;case g===">"&&u:if(h===""||$Lt(i,h))throw new JLt("Invalid capture group name");i[h]=!0,o[o.length]=[h,p],u=!1,h="";continue;}u?h+=g:n+=g}return[n,o]};if(jLt("RegExp",n3t)){for(Wg=function(t,r){var n=bSe(Jx,this),o=BLt(t),i=r===void 0,a=[],u=t,p,h,g,x,b,T;if(!n&&o&&i&&t.constructor===Wg)return t;if((o||bSe(Jx,t))&&(t=t.source,i&&(r=VLt(u))),t=t===void 0?"":wSe(t),r=r===void 0?"":wSe(r),u=t,MSe&&("dotAll"in _0)&&(h=!!r&&SSe(r,"s")>-1,h&&(r=ESe(r,/s/g,""))),p=r,ASe&&("sticky"in _0)&&(g=!!r&&SSe(r,"y")>-1,g&&r3t&&(r=ESe(r,/y/g,""))),CSe&&(x=i3t(t),t=x[0],a=x[1]),b=qLt($g(t,r),n?this:Jx,Wg),(h||g||a.length)&&(T=YLt(b),h&&(T.dotAll=!0,T.raw=Wg(o3t(t),p)),g&&(T.sticky=!0),a.length&&(T.groups=a)),t!==u)try{zLt(b,"source",u===""?"(?:)":u)}catch(A){}return b},vW=ULt($g),yW=0;vW.length>yW;)GLt(Wg,$g,vW[yW++]);Jx.constructor=Wg,Wg.prototype=Jx,HLt(_W,"RegExp",Wg,{constructor:!0})}var Wg,vW,yW;ZLt("RegExp")});var OSe=M(()=>{"use strict";var a3t=Tr(),s3t=NO(),l3t=as(),u3t=ei(),c3t=ro().get,NSe=RegExp.prototype,f3t=TypeError;a3t&&s3t&&u3t(NSe,"dotAll",{configurable:!0,get:function(){if(this!==NSe){if(l3t(this)==="RegExp")return!!c3t(this).dotAll;throw new f3t("Incompatible receiver, RegExp required")}}})});var kO=M((N8r,PSe)=>{"use strict";var Qx=er(),PO=gt(),p3t=Hr(),d3t=DO(),h3t=oT(),m3t=hh(),g3t=Ri(),v3t=ro().get,y3t=NO(),_3t=mW(),x3t=m3t("native-string-replace",String.prototype.replace),LO=RegExp.prototype.exec,bW=LO,b3t=PO("".charAt),w3t=PO("".indexOf),E3t=PO("".replace),xW=PO("".slice),wW=function(){var e=/a/,t=/b*/g;return Qx(LO,e,"a"),Qx(LO,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),LSe=h3t.BROKEN_CARET,EW=/()??/.exec("")[1]!==void 0,S3t=wW||EW||LSe||y3t||_3t;S3t&&(bW=function(t){var r=this,n=v3t(r),o=p3t(t),i=n.raw,a,u,p,h,g,x,b;if(i)return i.lastIndex=r.lastIndex,a=Qx(bW,i,o),r.lastIndex=i.lastIndex,a;var T=n.groups,A=LSe&&r.sticky,L=Qx(d3t,r),P=r.source,k=0,q=o;if(A&&(L=E3t(L,"y",""),w3t(L,"g")===-1&&(L+="g"),q=xW(o,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&b3t(o,r.lastIndex-1)!==`
`)&&(P="(?: "+P+")",q=" "+q,k++),u=new RegExp("^(?:"+P+")",L)),EW&&(u=new RegExp("^"+P+"$(?!\\s)",L)),wW&&(p=r.lastIndex),h=Qx(LO,A?u:r,q),A?h?(h.input=xW(h.input,k),h[0]=xW(h[0],k),h.index=r.lastIndex,r.lastIndex+=h[0].length):r.lastIndex=0:wW&&h&&(r.lastIndex=r.global?h.index+h[0].length:p),EW&&h&&h.length>1&&Qx(x3t,h[0],u,function(){for(g=1;g<arguments.length-2;g++)arguments[g]===void 0&&(h[g]=void 0)}),h&&T)for(h.groups=x=g3t(null),g=0;g<T.length;g++)b=T[g],x[b[0]]=h[b[1]];return h});PSe.exports=bW});var RO=M(()=>{"use strict";var I3t=re(),kSe=kO();I3t({target:"RegExp",proto:!0,forced:/./.exec!==kSe},{exec:kSe})});var qSe=M(()=>{"use strict";var T3t=$t(),M3t=Tr(),C3t=ei(),A3t=DO(),D3t=Tt(),RSe=T3t.RegExp,jSe=RSe.prototype,N3t=M3t&&D3t(function(){var e=!0;try{RSe(".","d")}catch(p){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(p,h){Object.defineProperty(t,p,{get:function(){return r+=h,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(i.hasIndices="d");for(var a in i)o(a,i[a]);var u=Object.getOwnPropertyDescriptor(jSe,"flags").get.call(t);return u!==n||r!==n});N3t&&C3t(jSe,"flags",{configurable:!0,get:A3t})});var FSe=M(()=>{"use strict";var O3t=Tr(),L3t=oT().MISSED_STICKY,P3t=as(),k3t=ei(),R3t=ro().get,zSe=RegExp.prototype,j3t=TypeError;O3t&&L3t&&k3t(zSe,"sticky",{configurable:!0,get:function(){if(this!==zSe){if(P3t(this)==="RegExp")return!!R3t(this).sticky;throw new j3t("Incompatible receiver, RegExp required")}}})});var VSe=M(()=>{"use strict";RO();var q3t=re(),USe=er(),z3t=Kr(),BSe=Jt(),F3t=Hr(),U3t=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),B3t=/./.test;q3t({target:"RegExp",proto:!0,forced:!U3t},{test:function(e){var t=BSe(this),r=F3t(e),n=t.exec;if(!z3t(n))return USe(B3t,t,r);var o=USe(n,t,r);return o===null?!1:(BSe(o),!0)}})});var $Se=M(()=>{"use strict";var V3t=e0().PROPER,G3t=fo(),H3t=Jt(),GSe=Hr(),W3t=Tt(),$3t=Xx(),SW="toString",HSe=RegExp.prototype,WSe=HSe[SW],Y3t=W3t(function(){return WSe.call({source:"a",flags:"b"})!=="/a/b"}),Z3t=V3t&&WSe.name!==SW;(Y3t||Z3t)&&G3t(HSe,SW,function(){var t=H3t(this),r=GSe(t.source),n=GSe($3t(t));return"/"+r+"/"+n},{unsafe:!0})});var YSe=M(()=>{"use strict";var K3t=qI(),X3t=$G();K3t("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},X3t)});var ZSe=M(()=>{"use strict";YSe()});var za=M((W8r,KSe)=>{"use strict";var IW=gt(),jO=Set.prototype;KSe.exports={Set,add:IW(jO.add),has:IW(jO.has),remove:IW(jO.delete),proto:jO}});var ls=M(($8r,XSe)=>{"use strict";var J3t=za().has;XSe.exports=function(e){return J3t(e),e}});var Mh=M((Y8r,JSe)=>{"use strict";var Q3t=er();JSe.exports=function(e,t,r){for(var n=r?e:e.iterator,o=e.next,i,a;!(i=Q3t(o,n)).done;)if(a=t(i.value),a!==void 0)return a}});var ou=M((Z8r,n2e)=>{"use strict";var QSe=gt(),ePt=Mh(),e2e=za(),tPt=e2e.Set,t2e=e2e.proto,rPt=QSe(t2e.forEach),r2e=QSe(t2e.keys),nPt=r2e(new tPt).next;n2e.exports=function(e,t,r){return r?ePt({iterator:r2e(e),next:nPt},t):rPt(e,t)}});var qO=M((K8r,i2e)=>{"use strict";var o2e=za(),oPt=ou(),iPt=o2e.Set,aPt=o2e.add;i2e.exports=function(e){var t=new iPt;return oPt(e,function(r){aPt(t,r)}),t}});var eb=M((X8r,a2e)=>{"use strict";var sPt=bI(),lPt=za();a2e.exports=sPt(lPt.proto,"size","get")||function(e){return e.size}});var Yg=M((J8r,p2e)=>{"use strict";var s2e=kr(),c2e=Jt(),l2e=er(),uPt=Qo(),cPt=ui(),u2e="Invalid size",fPt=RangeError,pPt=TypeError,dPt=Math.max,f2e=function(e,t){this.set=e,this.size=dPt(t,0),this.has=s2e(e.has),this.keys=s2e(e.keys)};f2e.prototype={getIterator:function(){return cPt(c2e(l2e(this.keys,this.set)))},includes:function(e){return l2e(this.has,this.set,e)}};p2e.exports=function(e){c2e(e);var t=+e.size;if(t!==t)throw new pPt(u2e);var r=uPt(t);if(r<0)throw new fPt(u2e);return new f2e(e,r)}});var TW=M((Q8r,m2e)=>{"use strict";var hPt=ls(),h2e=za(),mPt=qO(),gPt=eb(),vPt=Yg(),yPt=ou(),_Pt=Mh(),xPt=h2e.has,d2e=h2e.remove;m2e.exports=function(t){var r=hPt(this),n=vPt(t),o=mPt(r);return gPt(r)<=n.size?yPt(r,function(i){n.includes(i)&&d2e(o,i)}):_Pt(n.getIterator(),function(i){xPt(r,i)&&d2e(o,i)}),o}});var Zg=M((eFr,v2e)=>{"use strict";var bPt=Fr(),g2e=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};v2e.exports=function(e){var t=bPt("Set");try{new t()[e](g2e(0));try{return new t()[e](g2e(-1)),!1}catch(r){return!0}}catch(r){return!1}}});var MW=M(()=>{"use strict";var wPt=re(),EPt=TW(),SPt=Zg();wPt({target:"Set",proto:!0,real:!0,forced:!SPt("difference")},{difference:EPt})});var AW=M((nFr,_2e)=>{"use strict";var IPt=ls(),CW=za(),TPt=eb(),MPt=Yg(),CPt=ou(),APt=Mh(),DPt=CW.Set,y2e=CW.add,NPt=CW.has;_2e.exports=function(t){var r=IPt(this),n=MPt(t),o=new DPt;return TPt(r)>n.size?APt(n.getIterator(),function(i){NPt(r,i)&&y2e(o,i)}):CPt(r,function(i){n.includes(i)&&y2e(o,i)}),o}});var DW=M(()=>{"use strict";var OPt=re(),LPt=Tt(),PPt=AW(),kPt=Zg(),RPt=!kPt("intersection")||LPt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});OPt({target:"Set",proto:!0,real:!0,forced:RPt},{intersection:PPt})});var NW=M((aFr,x2e)=>{"use strict";var jPt=ls(),qPt=za().has,zPt=eb(),FPt=Yg(),UPt=ou(),BPt=Mh(),VPt=yh();x2e.exports=function(t){var r=jPt(this),n=FPt(t);if(zPt(r)<=n.size)return UPt(r,function(i){if(n.includes(i))return!1},!0)!==!1;var o=n.getIterator();return BPt(o,function(i){if(qPt(r,i))return VPt(o,"normal",!1)})!==!1}});var OW=M(()=>{"use strict";var GPt=re(),HPt=NW(),WPt=Zg();GPt({target:"Set",proto:!0,real:!0,forced:!WPt("isDisjointFrom")},{isDisjointFrom:HPt})});var LW=M((uFr,b2e)=>{"use strict";var $Pt=ls(),YPt=eb(),ZPt=ou(),KPt=Yg();b2e.exports=function(t){var r=$Pt(this),n=KPt(t);return YPt(r)>n.size?!1:ZPt(r,function(o){if(!n.includes(o))return!1},!0)!==!1}});var PW=M(()=>{"use strict";var XPt=re(),JPt=LW(),QPt=Zg();XPt({target:"Set",proto:!0,real:!0,forced:!QPt("isSubsetOf")},{isSubsetOf:JPt})});var kW=M((pFr,w2e)=>{"use strict";var ekt=ls(),tkt=za().has,rkt=eb(),nkt=Yg(),okt=Mh(),ikt=yh();w2e.exports=function(t){var r=ekt(this),n=nkt(t);if(rkt(r)<n.size)return!1;var o=n.getIterator();return okt(o,function(i){if(!tkt(r,i))return ikt(o,"normal",!1)})!==!1}});var RW=M(()=>{"use strict";var akt=re(),skt=kW(),lkt=Zg();akt({target:"Set",proto:!0,real:!0,forced:!lkt("isSupersetOf")},{isSupersetOf:skt})});var qW=M((mFr,E2e)=>{"use strict";var ukt=ls(),jW=za(),ckt=qO(),fkt=Yg(),pkt=Mh(),dkt=jW.add,hkt=jW.has,mkt=jW.remove;E2e.exports=function(t){var r=ukt(this),n=fkt(t).getIterator(),o=ckt(r);return pkt(n,function(i){hkt(r,i)?mkt(o,i):dkt(o,i)}),o}});var zW=M(()=>{"use strict";var gkt=re(),vkt=qW(),ykt=Zg();gkt({target:"Set",proto:!0,real:!0,forced:!ykt("symmetricDifference")},{symmetricDifference:vkt})});var FW=M((yFr,S2e)=>{"use strict";var _kt=ls(),xkt=za().add,bkt=qO(),wkt=Yg(),Ekt=Mh();S2e.exports=function(t){var r=_kt(this),n=wkt(t).getIterator(),o=bkt(r);return Ekt(n,function(i){xkt(o,i)}),o}});var UW=M(()=>{"use strict";var Skt=re(),Ikt=FW(),Tkt=Zg();Skt({target:"Set",proto:!0,real:!0,forced:!Tkt("union")},{union:Ikt})});var I2e=M(()=>{"use strict";var Mkt=re(),Ckt=gt(),Akt=Go(),Dkt=Qo(),Nkt=Hr(),Okt=Tt(),Lkt=Ckt("".charAt),Pkt=Okt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Mkt({target:"String",proto:!0,forced:Pkt},{at:function(t){var r=Nkt(Akt(this)),n=r.length,o=Dkt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:Lkt(r,i)}})});var x0=M((EFr,C2e)=>{"use strict";var BW=gt(),kkt=Qo(),Rkt=Hr(),jkt=Go(),qkt=BW("".charAt),T2e=BW("".charCodeAt),zkt=BW("".slice),M2e=function(e){return function(t,r){var n=Rkt(jkt(t)),o=kkt(r),i=n.length,a,u;return o<0||o>=i?e?"":void 0:(a=T2e(n,o),a<55296||a>56319||o+1===i||(u=T2e(n,o+1))<56320||u>57343?e?qkt(n,o):a:e?zkt(n,o,o+2):(a-55296<<10)+(u-56320)+65536)}};C2e.exports={codeAt:M2e(!1),charAt:M2e(!0)}});var A2e=M(()=>{"use strict";var Fkt=re(),Ukt=x0().codeAt;Fkt({target:"String",proto:!0},{codePointAt:function(t){return Ukt(this,t)}})});var zO=M((TFr,D2e)=>{"use strict";var Bkt=nT(),Vkt=TypeError;D2e.exports=function(e){if(Bkt(e))throw new Vkt("The method doesn't accept regular expressions");return e}});var FO=M((MFr,N2e)=>{"use strict";var Gkt=Nr(),Hkt=Gkt("match");N2e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[Hkt]=!1,"/./"[e](t)}catch(n){}}return!1}});var P2e=M(()=>{"use strict";var Wkt=re(),$kt=mh(),Ykt=Ra().f,Zkt=Ql(),O2e=Hr(),Kkt=zO(),Xkt=Go(),Jkt=FO(),Qkt=fn(),eRt=$kt("".slice),tRt=Math.min,L2e=Jkt("endsWith"),rRt=!Qkt&&!L2e&&!!function(){var e=Ykt(String.prototype,"endsWith");return e&&!e.writable}();Wkt({target:"String",proto:!0,forced:!rRt&&!L2e},{endsWith:function(t){var r=O2e(Xkt(this));Kkt(t);var n=arguments.length>1?arguments[1]:void 0,o=r.length,i=n===void 0?o:tRt(Zkt(n),o),a=O2e(t);return eRt(r,i-a.length,i)===a}})});var VW=M(()=>{"use strict";var nRt=re(),oRt=gt(),iRt=Df(),aRt=RangeError,k2e=String.fromCharCode,R2e=String.fromCodePoint,sRt=oRt([].join),lRt=!!R2e&&R2e.length!==1;nRt({target:"String",stat:!0,arity:1,forced:lRt},{fromCodePoint:function(t){for(var r=[],n=arguments.length,o=0,i;n>o;){if(i=+arguments[o++],iRt(i,1114111)!==i)throw new aRt(i+" is not a valid code point");r[o]=i<65536?k2e(i):k2e(((i-=65536)>>10)+55296,i%1024+56320)}return sRt(r,"")}})});var q2e=M(()=>{"use strict";var uRt=re(),cRt=gt(),fRt=zO(),pRt=Go(),j2e=Hr(),dRt=FO(),hRt=cRt("".indexOf);uRt({target:"String",proto:!0,forced:!dRt("includes")},{includes:function(t){return!!~hRt(j2e(pRt(this)),j2e(fRt(t)),arguments.length>1?arguments[1]:void 0)}})});var GW=M(()=>{"use strict";var mRt=re(),gRt=gt(),vRt=Go(),yRt=Hr(),z2e=gRt("".charCodeAt);mRt({target:"String",proto:!0},{isWellFormed:function(){for(var t=yRt(vRt(this)),r=t.length,n=0;n<r;n++){var o=z2e(t,n);if((o&63488)===55296&&(o>=56320||++n>=r||(z2e(t,n)&64512)!==56320))return!1}return!0}})});var HW=M(()=>{"use strict";var _Rt=x0().charAt,xRt=Hr(),U2e=ro(),bRt=F5(),F2e=qa(),B2e="String Iterator",wRt=U2e.set,ERt=U2e.getterFor(B2e);bRt(String,"String",function(e){wRt(this,{type:B2e,string:xRt(e),index:0})},function(){var t=ERt(this),r=t.string,n=t.index,o;return n>=r.length?F2e(void 0,!0):(o=_Rt(r,n),t.index+=o.length,F2e(o,!1))})});var aT=M((qFr,$2e)=>{"use strict";RO();var V2e=er(),G2e=fo(),SRt=kO(),H2e=Tt(),W2e=Nr(),IRt=aa(),TRt=W2e("species"),WW=RegExp.prototype;$2e.exports=function(e,t,r,n){var o=W2e(e),i=!H2e(function(){var h={};return h[o]=function(){return 7},""[e](h)!==7}),a=i&&!H2e(function(){var h=!1,g=/a/;return e==="split"&&(g={},g.constructor={},g.constructor[TRt]=function(){return g},g.flags="",g[o]=/./[o]),g.exec=function(){return h=!0,null},g[o](""),!h});if(!i||!a||r){var u=/./[o],p=t(o,""[e],function(h,g,x,b,T){var A=g.exec;return A===SRt||A===WW.exec?i&&!T?{done:!0,value:V2e(u,g,x,b)}:{done:!0,value:V2e(h,x,g,b)}:{done:!1}});G2e(String.prototype,e,p[0]),G2e(WW,o,p[1])}n&&IRt(WW[o],"sham",!0)}});var sT=M((zFr,Y2e)=>{"use strict";var MRt=x0().charAt;Y2e.exports=function(e,t,r){return t+(r?MRt(e,t).length:1)}});var tb=M((FFr,K2e)=>{"use strict";var Z2e=er(),CRt=Jt(),ARt=Kr(),DRt=as(),NRt=kO(),ORt=TypeError;K2e.exports=function(e,t){var r=e.exec;if(ARt(r)){var n=Z2e(r,e,t);return n!==null&&CRt(n),n}if(DRt(e)==="RegExp")return Z2e(NRt,e,t);throw new ORt("RegExp#exec called on incompatible receiver")}});var J2e=M(()=>{"use strict";var LRt=er(),PRt=aT(),kRt=Jt(),RRt=oa(),jRt=Ql(),$W=Hr(),qRt=Go(),zRt=ki(),FRt=sT(),X2e=tb();PRt("match",function(e,t,r){return[function(o){var i=qRt(this),a=RRt(o)?void 0:zRt(o,e);return a?LRt(a,o,i):new RegExp(o)[e]($W(i))},function(n){var o=kRt(this),i=$W(n),a=r(t,o,i);if(a.done)return a.value;if(!o.global)return X2e(o,i);var u=o.unicode;o.lastIndex=0;for(var p=[],h=0,g;(g=X2e(o,i))!==null;){var x=$W(g[0]);p[h]=x,x===""&&(o.lastIndex=FRt(i,jRt(o.lastIndex),u)),h++}return h===0?null:p}]})});var JW=M(()=>{"use strict";var URt=re(),Q2e=er(),rIe=mh(),BRt=Pg(),UO=qa(),eIe=Go(),nIe=Ql(),lT=Hr(),VRt=Jt(),GRt=oa(),HRt=as(),WRt=nT(),oIe=Xx(),$Rt=ki(),YRt=fo(),ZRt=Tt(),KRt=Nr(),XRt=ZI(),JRt=sT(),QRt=tb(),iIe=ro(),ZW=fn(),BO=KRt("matchAll"),aIe="RegExp String",sIe=aIe+" Iterator",ejt=iIe.set,tjt=iIe.getterFor(sIe),tIe=RegExp.prototype,rjt=TypeError,KW=rIe("".indexOf),VO=rIe("".matchAll),YW=!!VO&&!ZRt(function(){VO("a",/./)}),njt=BRt(function(t,r,n,o){ejt(this,{type:sIe,regexp:t,string:r,global:n,unicode:o,done:!1})},aIe,function(){var t=tjt(this);if(t.done)return UO(void 0,!0);var r=t.regexp,n=t.string,o=QRt(r,n);return o===null?(t.done=!0,UO(void 0,!0)):t.global?(lT(o[0])===""&&(r.lastIndex=JRt(n,nIe(r.lastIndex),t.unicode)),UO(o,!1)):(t.done=!0,UO(o,!1))}),XW=function(e){var t=VRt(this),r=lT(e),n=XRt(t,RegExp),o=lT(oIe(t)),i,a,u;return i=new n(n===RegExp?t.source:t,o),a=!!~KW(o,"g"),u=!!~KW(o,"u"),i.lastIndex=nIe(t.lastIndex),new njt(i,r,a,u)};URt({target:"String",proto:!0,forced:YW},{matchAll:function(t){var r=eIe(this),n,o,i,a;if(GRt(t)){if(YW)return VO(r,t)}else{if(WRt(t)&&(n=lT(eIe(oIe(t))),!~KW(n,"g")))throw new rjt("`.matchAll` does not allow non-global regexes");if(YW)return VO(r,t);if(i=$Rt(t,BO),i===void 0&&ZW&&HRt(t)==="RegExp"&&(i=XW),i)return Q2e(i,t,r)}return o=lT(r),a=new RegExp(t,"g"),ZW?Q2e(XW,a,o):a[BO](o)}});ZW||BO in tIe||YRt(tIe,BO,XW)});var QW=M((HFr,lIe)=>{"use strict";var ojt=Mf();lIe.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(ojt)});var uIe=M(()=>{"use strict";var ijt=re(),ajt=kI().end,sjt=QW();ijt({target:"String",proto:!0,forced:sjt},{padEnd:function(t){return ajt(this,t,arguments.length>1?arguments[1]:void 0)}})});var cIe=M(()=>{"use strict";var ljt=re(),ujt=kI().start,cjt=QW();ljt({target:"String",proto:!0,forced:cjt},{padStart:function(t){return ujt(this,t,arguments.length>1?arguments[1]:void 0)}})});var hIe=M(()=>{"use strict";var fjt=re(),dIe=gt(),pjt=ia(),djt=pn(),fIe=Hr(),hjt=Tn(),pIe=dIe([].push),mjt=dIe([].join);fjt({target:"String",stat:!0},{raw:function(t){var r=pjt(djt(t).raw),n=hjt(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){if(pIe(i,fIe(r[a++])),a===n)return mjt(i,"");a<o&&pIe(i,fIe(arguments[a]))}}})});var mIe=M(()=>{"use strict";var gjt=re(),vjt=PI();gjt({target:"String",proto:!0},{repeat:vjt})});var n$=M((e9r,gIe)=>{"use strict";var r$=gt(),yjt=pn(),_jt=Math.floor,e$=r$("".charAt),xjt=r$("".replace),t$=r$("".slice),bjt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,wjt=/\$([$&'`]|\d{1,2})/g;gIe.exports=function(e,t,r,n,o,i){var a=r+e.length,u=n.length,p=wjt;return o!==void 0&&(o=yjt(o),p=bjt),xjt(i,p,function(h,g){var x;switch(e$(g,0)){case"$":return"$";case"&":return e;case"`":return t$(t,0,r);case"'":return t$(t,a);case"<":x=o[t$(g,1,-1)];break;default:var b=+g;if(b===0)return h;if(b>u){var T=_jt(b/10);return T===0?h:T<=u?n[T-1]===void 0?e$(g,1):n[T-1]+e$(g,1):h}x=n[b-1];}return x===void 0?"":x})}});var bIe=M(()=>{"use strict";var Ejt=Bs(),vIe=er(),GO=gt(),Sjt=aT(),Ijt=Tt(),Tjt=Jt(),Mjt=Kr(),Cjt=oa(),Ajt=Qo(),Djt=Ql(),rb=Hr(),Njt=Go(),Ojt=sT(),Ljt=ki(),Pjt=n$(),kjt=tb(),Rjt=Nr(),i$=Rjt("replace"),jjt=Math.max,qjt=Math.min,zjt=GO([].concat),o$=GO([].push),yIe=GO("".indexOf),_Ie=GO("".slice),Fjt=function(e){return e===void 0?e:String(e)},Ujt=function(){return"a".replace(/./,"$0")==="$0"}(),xIe=function(){return /./[i$]?/./[i$]("a","$0")==="":!1}(),Bjt=!Ijt(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});Sjt("replace",function(e,t,r){var n=xIe?"$":"$0";return[function(i,a){var u=Njt(this),p=Cjt(i)?void 0:Ljt(i,i$);return p?vIe(p,i,u,a):vIe(t,rb(u),i,a)},function(o,i){var a=Tjt(this),u=rb(o);if(typeof i=="string"&&yIe(i,n)===-1&&yIe(i,"$<")===-1){var p=r(t,a,u,i);if(p.done)return p.value}var h=Mjt(i);h||(i=rb(i));var g=a.global,x;g&&(x=a.unicode,a.lastIndex=0);for(var b=[],T;T=kjt(a,u),!(T===null||(o$(b,T),!g));){var A=rb(T[0]);A===""&&(a.lastIndex=Ojt(u,Djt(a.lastIndex),x))}for(var L="",P=0,k=0;k<b.length;k++){T=b[k];for(var q=rb(T[0]),U=jjt(qjt(Ajt(T.index),u.length),0),H=[],X,ee=1;ee<T.length;ee++)o$(H,Fjt(T[ee]));var ne=T.groups;if(h){var me=zjt([q],H,U,u);ne!==void 0&&o$(me,ne),X=rb(Ejt(i,void 0,me))}else X=Pjt(q,u,U,H,ne,i);U>=P&&(L+=_Ie(u,P,U)+X,P=U+q.length)}return L+_Ie(u,P)}]},!Bjt||!Ujt||xIe)});var l$=M(()=>{"use strict";var Vjt=re(),Gjt=er(),s$=gt(),wIe=Go(),Hjt=Kr(),Wjt=oa(),$jt=nT(),nb=Hr(),Yjt=ki(),Zjt=Xx(),Kjt=n$(),Xjt=Nr(),Jjt=fn(),Qjt=Xjt("replace"),e6t=TypeError,a$=s$("".indexOf),t6t=s$("".replace),EIe=s$("".slice),r6t=Math.max;Vjt({target:"String",proto:!0},{replaceAll:function(t,r){var n=wIe(this),o,i,a,u,p,h,g,x,b,T,A=0,L="";if(!Wjt(t)){if(o=$jt(t),o&&(i=nb(wIe(Zjt(t))),!~a$(i,"g")))throw new e6t("`.replaceAll` does not allow non-global regexes");if(a=Yjt(t,Qjt),a)return Gjt(a,t,n,r);if(Jjt&&o)return t6t(nb(n),t,r)}for(u=nb(n),p=nb(t),h=Hjt(r),h||(r=nb(r)),g=p.length,x=r6t(1,g),b=a$(u,p);b!==-1;)T=h?nb(r(p,b,u)):Kjt(p,u,b,[],void 0,r),L+=EIe(u,A,b)+T,A=b+g,b=b+x>u.length?-1:a$(u,p,b+x);return A<u.length&&(L+=EIe(u,A)),L}})});var TIe=M(()=>{"use strict";var n6t=er(),o6t=aT(),i6t=Jt(),a6t=oa(),s6t=Go(),SIe=_H(),IIe=Hr(),l6t=ki(),u6t=tb();o6t("search",function(e,t,r){return[function(o){var i=s6t(this),a=a6t(o)?void 0:l6t(o,e);return a?n6t(a,o,i):new RegExp(o)[e](IIe(i))},function(n){var o=i6t(this),i=IIe(n),a=r(t,o,i);if(a.done)return a.value;var u=o.lastIndex;SIe(u,0)||(o.lastIndex=0);var p=u6t(o,i);return SIe(o.lastIndex,u)||(o.lastIndex=u),p===null?-1:p.index}]})});var NIe=M(()=>{"use strict";var u$=er(),DIe=gt(),c6t=aT(),f6t=Jt(),p6t=oa(),d6t=Go(),h6t=ZI(),m6t=sT(),g6t=Ql(),MIe=Hr(),v6t=ki(),CIe=tb(),y6t=oT(),_6t=Tt(),ob=y6t.UNSUPPORTED_Y,x6t=4294967295,b6t=Math.min,c$=DIe([].push),f$=DIe("".slice),w6t=!_6t(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),AIe="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;c6t("split",function(e,t,r){var n="0".split(void 0,0).length?function(o,i){return o===void 0&&i===0?[]:u$(t,this,o,i)}:t;return[function(i,a){var u=d6t(this),p=p6t(i)?void 0:v6t(i,e);return p?u$(p,i,u,a):u$(n,MIe(u),i,a)},function(o,i){var a=f6t(this),u=MIe(o);if(!AIe){var p=r(n,a,u,i,n!==t);if(p.done)return p.value}var h=h6t(a,RegExp),g=a.unicode,x=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(ob?"g":"y"),b=new h(ob?"^(?:"+a.source+")":a,x),T=i===void 0?x6t:i>>>0;if(T===0)return[];if(u.length===0)return CIe(b,u)===null?[u]:[];for(var A=0,L=0,P=[];L<u.length;){b.lastIndex=ob?0:L;var k=CIe(b,ob?f$(u,L):u),q;if(k===null||(q=b6t(g6t(b.lastIndex+(ob?L:0)),u.length))===A)L=m6t(u,L,g);else{if(c$(P,f$(u,A,L)),P.length===T)return P;for(var U=1;U<=k.length-1;U++)if(c$(P,k[U]),P.length===T)return P;L=A=q}}return c$(P,f$(u,A)),P}]},AIe||!w6t,ob)});var PIe=M(()=>{"use strict";var E6t=re(),S6t=mh(),I6t=Ra().f,T6t=Ql(),OIe=Hr(),M6t=zO(),C6t=Go(),A6t=FO(),D6t=fn(),N6t=S6t("".slice),O6t=Math.min,LIe=A6t("startsWith"),L6t=!D6t&&!LIe&&!!function(){var e=I6t(String.prototype,"startsWith");return e&&!e.writable}();E6t({target:"String",proto:!0,forced:!L6t&&!LIe},{startsWith:function(t){var r=OIe(C6t(this));M6t(t);var n=T6t(O6t(arguments.length>1?arguments[1]:void 0,r.length)),o=OIe(t);return N6t(r,n,n+o.length)===o}})});var RIe=M(()=>{"use strict";var P6t=re(),k6t=gt(),R6t=Go(),kIe=Qo(),j6t=Hr(),q6t=k6t("".slice),z6t=Math.max,F6t=Math.min,U6t=!"".substr||"ab".substr(-1)!=="b";P6t({target:"String",proto:!0,forced:U6t},{substr:function(t,r){var n=j6t(R6t(this)),o=n.length,i=kIe(t),a,u;return i===1/0&&(i=0),i<0&&(i=z6t(o+i,0)),a=r===void 0?o:kIe(r),a<=0||a===1/0?"":(u=F6t(i+a,o),i>=u?"":q6t(n,i,u))}})});var m$=M(()=>{"use strict";var B6t=re(),zIe=er(),h$=gt(),V6t=Go(),G6t=Hr(),H6t=Tt(),W6t=Array,p$=h$("".charAt),jIe=h$("".charCodeAt),$6t=h$([].join),d$="".toWellFormed,Y6t="\uFFFD",qIe=d$&&H6t(function(){return zIe(d$,1)!=="1"});B6t({target:"String",proto:!0,forced:qIe},{toWellFormed:function(){var t=G6t(V6t(this));if(qIe)return zIe(d$,t);for(var r=t.length,n=W6t(r),o=0;o<r;o++){var i=jIe(t,o);(i&63488)!==55296?n[o]=p$(t,o):i>=56320||o+1>=r||(jIe(t,o+1)&64512)!==56320?n[o]=Y6t:(n[o]=p$(t,o),n[++o]=p$(t,o))}return $6t(n,"")}})});var HO=M((m9r,BIe)=>{"use strict";var Z6t=e0().PROPER,K6t=Tt(),FIe=h0(),UIe="\u200B\x85\u180E";BIe.exports=function(e){return K6t(function(){return!!FIe[e]()||UIe[e]()!==UIe||Z6t&&FIe[e].name!==e})}});var VIe=M(()=>{"use strict";var X6t=re(),J6t=m0().trim,Q6t=HO();X6t({target:"String",proto:!0,forced:Q6t("trim")},{trim:function(){return J6t(this)}})});var g$=M((y9r,GIe)=>{"use strict";var eqt=m0().end,tqt=HO();GIe.exports=tqt("trimEnd")?function(){return eqt(this)}:"".trimEnd});var WIe=M(()=>{"use strict";var rqt=re(),HIe=g$();rqt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==HIe},{trimRight:HIe})});var YIe=M(()=>{"use strict";WIe();var nqt=re(),$Ie=g$();nqt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==$Ie},{trimEnd:$Ie})});var v$=M((E9r,ZIe)=>{"use strict";var oqt=m0().start,iqt=HO();ZIe.exports=iqt("trimStart")?function(){return oqt(this)}:"".trimStart});var XIe=M(()=>{"use strict";var aqt=re(),KIe=v$();aqt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==KIe},{trimLeft:KIe})});var QIe=M(()=>{"use strict";XIe();var sqt=re(),JIe=v$();sqt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==JIe},{trimStart:JIe})});var iu=M((C9r,tTe)=>{"use strict";var lqt=gt(),uqt=Go(),eTe=Hr(),cqt=/"/g,fqt=lqt("".replace);tTe.exports=function(e,t,r,n){var o=eTe(uqt(e)),i="<"+t;return r!==""&&(i+=" "+r+"=\""+fqt(eTe(n),cqt,"&quot;")+"\""),i+">"+o+"</"+t+">"}});var au=M((A9r,rTe)=>{"use strict";var pqt=Tt();rTe.exports=function(e){return pqt(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var nTe=M(()=>{"use strict";var dqt=re(),hqt=iu(),mqt=au();dqt({target:"String",proto:!0,forced:mqt("anchor")},{anchor:function(t){return hqt(this,"a","name",t)}})});var oTe=M(()=>{"use strict";var gqt=re(),vqt=iu(),yqt=au();gqt({target:"String",proto:!0,forced:yqt("big")},{big:function(){return vqt(this,"big","","")}})});var iTe=M(()=>{"use strict";var _qt=re(),xqt=iu(),bqt=au();_qt({target:"String",proto:!0,forced:bqt("blink")},{blink:function(){return xqt(this,"blink","","")}})});var aTe=M(()=>{"use strict";var wqt=re(),Eqt=iu(),Sqt=au();wqt({target:"String",proto:!0,forced:Sqt("bold")},{bold:function(){return Eqt(this,"b","","")}})});var sTe=M(()=>{"use strict";var Iqt=re(),Tqt=iu(),Mqt=au();Iqt({target:"String",proto:!0,forced:Mqt("fixed")},{fixed:function(){return Tqt(this,"tt","","")}})});var lTe=M(()=>{"use strict";var Cqt=re(),Aqt=iu(),Dqt=au();Cqt({target:"String",proto:!0,forced:Dqt("fontcolor")},{fontcolor:function(t){return Aqt(this,"font","color",t)}})});var uTe=M(()=>{"use strict";var Nqt=re(),Oqt=iu(),Lqt=au();Nqt({target:"String",proto:!0,forced:Lqt("fontsize")},{fontsize:function(t){return Oqt(this,"font","size",t)}})});var cTe=M(()=>{"use strict";var Pqt=re(),kqt=iu(),Rqt=au();Pqt({target:"String",proto:!0,forced:Rqt("italics")},{italics:function(){return kqt(this,"i","","")}})});var fTe=M(()=>{"use strict";var jqt=re(),qqt=iu(),zqt=au();jqt({target:"String",proto:!0,forced:zqt("link")},{link:function(t){return qqt(this,"a","href",t)}})});var pTe=M(()=>{"use strict";var Fqt=re(),Uqt=iu(),Bqt=au();Fqt({target:"String",proto:!0,forced:Bqt("small")},{small:function(){return Uqt(this,"small","","")}})});var dTe=M(()=>{"use strict";var Vqt=re(),Gqt=iu(),Hqt=au();Vqt({target:"String",proto:!0,forced:Hqt("strike")},{strike:function(){return Gqt(this,"strike","","")}})});var hTe=M(()=>{"use strict";var Wqt=re(),$qt=iu(),Yqt=au();Wqt({target:"String",proto:!0,forced:Yqt("sub")},{sub:function(){return $qt(this,"sub","","")}})});var mTe=M(()=>{"use strict";var Zqt=re(),Kqt=iu(),Xqt=au();Zqt({target:"String",proto:!0,forced:Xqt("sup")},{sup:function(){return Kqt(this,"sup","","")}})});var WO=M((r7r,vTe)=>{"use strict";var gTe=$t(),y$=Tt(),Jqt=SI(),Qqt=cn().NATIVE_ARRAY_BUFFER_VIEWS,ezt=gTe.ArrayBuffer,b0=gTe.Int8Array;vTe.exports=!Qqt||!y$(function(){b0(1)})||!y$(function(){new b0(-1)})||!Jqt(function(e){new b0,new b0(null),new b0(1.5),new b0(e)},!0)||y$(function(){return new b0(new ezt(2),1,void 0).length!==1})});var _$=M((n7r,yTe)=>{"use strict";var tzt=zx(),rzt=RangeError;yTe.exports=function(e,t){var r=tzt(e);if(r%t)throw new rzt("Wrong offset");return r}});var x$=M((o7r,_Te)=>{"use strict";var nzt=Math.round;_Te.exports=function(e){var t=nzt(e);return t<0?0:t>255?255:t&255}});var $O=M((i7r,xTe)=>{"use strict";var ozt=eu();xTe.exports=function(e){var t=ozt(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var uT=M((a7r,bTe)=>{"use strict";var izt=aI(),azt=TypeError;bTe.exports=function(e){var t=izt(e,"number");if(typeof t=="number")throw new azt("Can't convert number to bigint");return BigInt(t)}});var b$=M((s7r,wTe)=>{"use strict";var szt=xo(),lzt=er(),uzt=YI(),czt=pn(),fzt=Tn(),pzt=Og(),dzt=Pp(),hzt=O5(),mzt=$O(),gzt=cn().aTypedArrayConstructor,vzt=uT();wTe.exports=function(t){var r=uzt(this),n=czt(t),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0,u=dzt(n),p,h,g,x,b,T,A,L;if(u&&!hzt(u))for(A=pzt(n,u),L=A.next,n=[];!(T=lzt(L,A)).done;)n.push(T.value);for(a&&o>2&&(i=szt(i,arguments[2])),h=fzt(n),g=new(gzt(r))(h),x=mzt(g),p=0;h>p;p++)b=a?i(n[p],p):n[p],g[p]=x?vzt(b):+b;return g}});var Fp=M((l7r,C$)=>{"use strict";var ETe=re(),PTe=$t(),STe=er(),yzt=Tr(),_zt=WO(),dT=cn(),kTe=LI(),ITe=Vs(),xzt=Jl(),cT=aa(),bzt=yO(),wzt=Ql(),TTe=Ox(),w$=_$(),Ezt=x$(),RTe=Op(),fT=sn(),Szt=eu(),I$=Br(),Izt=dh(),Tzt=Ri(),Mzt=ss(),YO=Ec(),Czt=Cg().f,MTe=b$(),Azt=ji().forEach,Dzt=Rg(),Nzt=ei(),jTe=Lo(),qTe=Ra(),CTe=xh(),A$=ro(),Ozt=Ng(),T$=A$.get,Lzt=A$.set,Pzt=A$.enforce,zTe=jTe.f,kzt=qTe.f,E$=PTe.RangeError,FTe=kTe.ArrayBuffer,Rzt=FTe.prototype,jzt=kTe.DataView,ZO=dT.NATIVE_ARRAY_BUFFER_VIEWS,ATe=dT.TYPED_ARRAY_TAG,DTe=dT.TypedArray,pT=dT.TypedArrayPrototype,M$=dT.isTypedArray,KO="BYTES_PER_ELEMENT",S$="Wrong length",XO=function(e,t){Nzt(e,t,{configurable:!0,get:function(){return T$(this)[t]}})},NTe=function(e){var t;return Mzt(Rzt,e)||(t=Szt(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},UTe=function(e,t){return M$(e)&&!Izt(t)&&t in e&&bzt(+t)&&t>=0},OTe=function(t,r){return r=RTe(r),UTe(t,r)?xzt(2,t[r]):kzt(t,r)},LTe=function(t,r,n){return r=RTe(r),UTe(t,r)&&I$(n)&&fT(n,"value")&&!fT(n,"get")&&!fT(n,"set")&&!n.configurable&&(!fT(n,"writable")||n.writable)&&(!fT(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):zTe(t,r,n)};yzt?(ZO||(qTe.f=OTe,jTe.f=LTe,XO(pT,"buffer"),XO(pT,"byteOffset"),XO(pT,"byteLength"),XO(pT,"length")),ETe({target:"Object",stat:!0,forced:!ZO},{getOwnPropertyDescriptor:OTe,defineProperty:LTe}),C$.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,o=e+(r?"Clamped":"")+"Array",i="get"+e,a="set"+e,u=PTe[o],p=u,h=p&&p.prototype,g={},x=function(L,P){var k=T$(L);return k.view[i](P*n+k.byteOffset,!0)},b=function(L,P,k){var q=T$(L);q.view[a](P*n+q.byteOffset,r?Ezt(k):k,!0)},T=function(L,P){zTe(L,P,{get:function(){return x(this,P)},set:function(k){return b(this,P,k)},enumerable:!0})};ZO?_zt&&(p=t(function(L,P,k,q){return ITe(L,h),Ozt(function(){return I$(P)?NTe(P)?q!==void 0?new u(P,w$(k,n),q):k!==void 0?new u(P,w$(k,n)):new u(P):M$(P)?CTe(p,P):STe(MTe,p,P):new u(TTe(P))}(),L,p)}),YO&&YO(p,DTe),Azt(Czt(u),function(L){L in p||cT(p,L,u[L])}),p.prototype=h):(p=t(function(L,P,k,q){ITe(L,h);var U=0,H=0,X,ee,ne;if(!I$(P))ne=TTe(P),ee=ne*n,X=new FTe(ee);else if(NTe(P)){X=P,H=w$(k,n);var me=P.byteLength;if(q===void 0){if(me%n)throw new E$(S$);if(ee=me-H,ee<0)throw new E$(S$)}else if(ee=wzt(q)*n,ee+H>me)throw new E$(S$);ne=ee/n}else return M$(P)?CTe(p,P):STe(MTe,p,P);for(Lzt(L,{buffer:X,byteOffset:H,byteLength:ee,length:ne,view:new jzt(X)});U<ne;)T(L,U++)}),YO&&YO(p,DTe),h=p.prototype=Tzt(pT)),h.constructor!==p&&cT(h,"constructor",p),Pzt(h).TypedArrayConstructor=p,ATe&&cT(h,ATe,o);var A=p!==u;g[o]=p,ETe({global:!0,constructor:!0,forced:A,sham:!ZO},g),KO in p||cT(p,KO,n),KO in h||cT(h,KO,n),Dzt(o)}):C$.exports=function(){}});var BTe=M(()=>{"use strict";var qzt=Fp();qzt("Float32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var VTe=M(()=>{"use strict";var zzt=Fp();zzt("Float64",function(e){return function(r,n,o){return e(this,r,n,o)}})});var GTe=M(()=>{"use strict";var Fzt=Fp();Fzt("Int8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var HTe=M(()=>{"use strict";var Uzt=Fp();Uzt("Int16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var WTe=M(()=>{"use strict";var Bzt=Fp();Bzt("Int32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var $Te=M(()=>{"use strict";var Vzt=Fp();Vzt("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var YTe=M(()=>{"use strict";var Gzt=Fp();Gzt("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}},!0)});var ZTe=M(()=>{"use strict";var Hzt=Fp();Hzt("Uint16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var KTe=M(()=>{"use strict";var Wzt=Fp();Wzt("Uint32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var D$=M(()=>{"use strict";var XTe=cn(),$zt=Tn(),Yzt=Qo(),Zzt=XTe.aTypedArray,Kzt=XTe.exportTypedArrayMethod;Kzt("at",function(t){var r=Zzt(this),n=$zt(r),o=Yzt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]})});var QTe=M(()=>{"use strict";var Xzt=gt(),JTe=cn(),Jzt=JB(),Qzt=Xzt(Jzt),e8t=JTe.aTypedArray,t8t=JTe.exportTypedArrayMethod;t8t("copyWithin",function(t,r){return Qzt(e8t(this),t,r,arguments.length>2?arguments[2]:void 0)})});var tMe=M(()=>{"use strict";var eMe=cn(),r8t=ji().every,n8t=eMe.aTypedArray,o8t=eMe.exportTypedArrayMethod;o8t("every",function(t){return r8t(n8t(this),t,arguments.length>1?arguments[1]:void 0)})});var nMe=M(()=>{"use strict";var rMe=cn(),i8t=R5(),a8t=uT(),s8t=eu(),l8t=er(),u8t=gt(),c8t=Tt(),f8t=rMe.aTypedArray,p8t=rMe.exportTypedArrayMethod,d8t=u8t("".slice),h8t=c8t(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});p8t("fill",function(t){var r=arguments.length;f8t(this);var n=d8t(s8t(this),0,3)==="Big"?a8t(t):+t;return l8t(i8t,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},h8t)});var JO=M((k7r,oMe)=>{"use strict";var m8t=xh(),g8t=cn().getTypedArrayConstructor;oMe.exports=function(e,t){return m8t(g8t(e),t)}});var aMe=M(()=>{"use strict";var iMe=cn(),v8t=ji().filter,y8t=JO(),_8t=iMe.aTypedArray,x8t=iMe.exportTypedArrayMethod;x8t("filter",function(t){var r=v8t(_8t(this),t,arguments.length>1?arguments[1]:void 0);return y8t(this,r)})});var lMe=M(()=>{"use strict";var sMe=cn(),b8t=ji().find,w8t=sMe.aTypedArray,E8t=sMe.exportTypedArrayMethod;E8t("find",function(t){return b8t(w8t(this),t,arguments.length>1?arguments[1]:void 0)})});var cMe=M(()=>{"use strict";var uMe=cn(),S8t=ji().findIndex,I8t=uMe.aTypedArray,T8t=uMe.exportTypedArrayMethod;T8t("findIndex",function(t){return S8t(I8t(this),t,arguments.length>1?arguments[1]:void 0)})});var N$=M(()=>{"use strict";var fMe=cn(),M8t=EI().findLast,C8t=fMe.aTypedArray,A8t=fMe.exportTypedArrayMethod;A8t("findLast",function(t){return M8t(C8t(this),t,arguments.length>1?arguments[1]:void 0)})});var O$=M(()=>{"use strict";var pMe=cn(),D8t=EI().findLastIndex,N8t=pMe.aTypedArray,O8t=pMe.exportTypedArrayMethod;O8t("findLastIndex",function(t){return D8t(N8t(this),t,arguments.length>1?arguments[1]:void 0)})});var hMe=M(()=>{"use strict";var dMe=cn(),L8t=ji().forEach,P8t=dMe.aTypedArray,k8t=dMe.exportTypedArrayMethod;k8t("forEach",function(t){L8t(P8t(this),t,arguments.length>1?arguments[1]:void 0)})});var mMe=M(()=>{"use strict";var R8t=WO(),j8t=cn().exportTypedArrayStaticMethod,q8t=b$();j8t("from",q8t,R8t)});var vMe=M(()=>{"use strict";var gMe=cn(),z8t=Sx().includes,F8t=gMe.aTypedArray,U8t=gMe.exportTypedArrayMethod;U8t("includes",function(t){return z8t(F8t(this),t,arguments.length>1?arguments[1]:void 0)})});var _Me=M(()=>{"use strict";var yMe=cn(),B8t=Sx().indexOf,V8t=yMe.aTypedArray,G8t=yMe.exportTypedArrayMethod;G8t("indexOf",function(t){return B8t(V8t(this),t,arguments.length>1?arguments[1]:void 0)})});var SMe=M(()=>{"use strict";var H8t=$t(),W8t=Tt(),L$=gt(),bMe=cn(),P$=MI(),$8t=Nr(),k$=$8t("iterator"),xMe=H8t.Uint8Array,Y8t=L$(P$.values),Z8t=L$(P$.keys),K8t=L$(P$.entries),R$=bMe.aTypedArray,QO=bMe.exportTypedArrayMethod,ib=xMe&&xMe.prototype,eL=!W8t(function(){ib[k$].call([1])}),wMe=!!ib&&ib.values&&ib[k$]===ib.values&&ib.values.name==="values",EMe=function(){return Y8t(R$(this))};QO("entries",function(){return K8t(R$(this))},eL);QO("keys",function(){return Z8t(R$(this))},eL);QO("values",EMe,eL||!wMe,{name:"values"});QO(k$,EMe,eL||!wMe,{name:"values"})});var TMe=M(()=>{"use strict";var IMe=cn(),X8t=gt(),J8t=IMe.aTypedArray,Q8t=IMe.exportTypedArrayMethod,eFt=X8t([].join);Q8t("join",function(t){return eFt(J8t(this),t)})});var CMe=M(()=>{"use strict";var MMe=cn(),tFt=Bs(),rFt=hV(),nFt=MMe.aTypedArray,oFt=MMe.exportTypedArrayMethod;oFt("lastIndexOf",function(t){var r=arguments.length;return tFt(rFt,nFt(this),r>1?[t,arguments[1]]:[t])})});var AMe=M(()=>{"use strict";var j$=cn(),iFt=ji().map,aFt=j$.aTypedArray,sFt=j$.getTypedArrayConstructor,lFt=j$.exportTypedArrayMethod;lFt("map",function(t){return iFt(aFt(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new(sFt(r))(n)})})});var NMe=M(()=>{"use strict";var DMe=cn(),uFt=WO(),cFt=DMe.aTypedArrayConstructor,fFt=DMe.exportTypedArrayStaticMethod;fFt("of",function(){for(var t=0,r=arguments.length,n=new(cFt(this))(r);r>t;)n[t]=arguments[t++];return n},uFt)});var LMe=M(()=>{"use strict";var OMe=cn(),pFt=CI().left,dFt=OMe.aTypedArray,hFt=OMe.exportTypedArrayMethod;hFt("reduce",function(t){var r=arguments.length;return pFt(dFt(this),t,r,r>1?arguments[1]:void 0)})});var kMe=M(()=>{"use strict";var PMe=cn(),mFt=CI().right,gFt=PMe.aTypedArray,vFt=PMe.exportTypedArrayMethod;vFt("reduceRight",function(t){var r=arguments.length;return mFt(gFt(this),t,r,r>1?arguments[1]:void 0)})});var jMe=M(()=>{"use strict";var RMe=cn(),yFt=RMe.aTypedArray,_Ft=RMe.exportTypedArrayMethod,xFt=Math.floor;_Ft("reverse",function(){for(var t=this,r=yFt(t).length,n=xFt(r/2),o=0,i;o<n;)i=t[o],t[o++]=t[--r],t[r]=i;return t})});var VMe=M(()=>{"use strict";var zMe=$t(),FMe=er(),F$=cn(),bFt=Tn(),wFt=_$(),EFt=pn(),UMe=Tt(),SFt=zMe.RangeError,q$=zMe.Int8Array,qMe=q$&&q$.prototype,BMe=qMe&&qMe.set,IFt=F$.aTypedArray,TFt=F$.exportTypedArrayMethod,z$=!UMe(function(){var e=new Uint8ClampedArray(2);return FMe(BMe,e,{length:1,0:3},1),e[1]!==3}),MFt=z$&&F$.NATIVE_ARRAY_BUFFER_VIEWS&&UMe(function(){var e=new q$(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});TFt("set",function(t){IFt(this);var r=wFt(arguments.length>1?arguments[1]:void 0,1),n=EFt(t);if(z$)return FMe(BMe,this,n,r);var o=this.length,i=bFt(n),a=0;if(i+r>o)throw new SFt("Wrong length");for(;a<i;)this[r+a]=n[a++]},!z$||MFt)});var GMe=M(()=>{"use strict";var U$=cn(),CFt=Tt(),AFt=tu(),DFt=U$.aTypedArray,NFt=U$.getTypedArrayConstructor,OFt=U$.exportTypedArrayMethod,LFt=CFt(function(){new Int8Array(1).slice()});OFt("slice",function(t,r){for(var n=AFt(DFt(this),t,r),o=NFt(this),i=0,a=n.length,u=new o(a);a>i;)u[i]=n[i++];return u},LFt)});var WMe=M(()=>{"use strict";var HMe=cn(),PFt=ji().some,kFt=HMe.aTypedArray,RFt=HMe.exportTypedArrayMethod;RFt("some",function(t){return PFt(kFt(this),t,arguments.length>1?arguments[1]:void 0)})});var JMe=M(()=>{"use strict";var jFt=$t(),qFt=mh(),B$=Tt(),zFt=kr(),FFt=G5(),XMe=cn(),$Me=vV(),UFt=yV(),YMe=Np(),ZMe=H5(),BFt=XMe.aTypedArray,VFt=XMe.exportTypedArrayMethod,hT=jFt.Uint16Array,ab=hT&&qFt(hT.prototype.sort),GFt=!!ab&&!(B$(function(){ab(new hT(2),null)})&&B$(function(){ab(new hT(2),{})})),KMe=!!ab&&!B$(function(){if(YMe)return YMe<74;if($Me)return $Me<67;if(UFt)return!0;if(ZMe)return ZMe<602;var e=new hT(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(ab(e,function(o,i){return(o/4|0)-(i/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),HFt=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};VFt("sort",function(t){return t!==void 0&&zFt(t),KMe?ab(this,t):FFt(BFt(this),HFt(t))},!KMe||GFt)});var eCe=M(()=>{"use strict";var V$=cn(),WFt=Ql(),QMe=Df(),$Ft=V$.aTypedArray,YFt=V$.getTypedArrayConstructor,ZFt=V$.exportTypedArrayMethod;ZFt("subarray",function(t,r){var n=$Ft(this),o=n.length,i=QMe(t,o),a=YFt(n);return new a(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,WFt((r===void 0?o:QMe(r,o))-i))})});var iCe=M(()=>{"use strict";var KFt=$t(),XFt=Bs(),nCe=cn(),G$=Tt(),tCe=tu(),tL=KFt.Int8Array,rCe=nCe.aTypedArray,JFt=nCe.exportTypedArrayMethod,oCe=[].toLocaleString,QFt=!!tL&&G$(function(){oCe.call(new tL(1))}),e9t=G$(function(){return[1,2].toLocaleString()!==new tL([1,2]).toLocaleString()})||!G$(function(){tL.prototype.toLocaleString.call([1,2])});JFt("toLocaleString",function(){return XFt(oCe,QFt?tCe(rCe(this)):rCe(this),tCe(arguments))},e9t)});var W$=M(()=>{"use strict";var t9t=bV(),H$=cn(),r9t=H$.aTypedArray,n9t=H$.exportTypedArrayMethod,o9t=H$.getTypedArrayConstructor;n9t("toReversed",function(){return t9t(r9t(this),o9t(this))})});var $$=M(()=>{"use strict";var rL=cn(),i9t=gt(),a9t=kr(),s9t=xh(),l9t=rL.aTypedArray,u9t=rL.getTypedArrayConstructor,c9t=rL.exportTypedArrayMethod,f9t=i9t(rL.TypedArrayPrototype.sort);c9t("toSorted",function(t){t!==void 0&&a9t(t);var r=l9t(this),n=s9t(u9t(r),r);return f9t(n,t)})});var sCe=M(()=>{"use strict";var p9t=cn().exportTypedArrayMethod,d9t=Tt(),h9t=$t(),m9t=gt(),aCe=h9t.Uint8Array,g9t=aCe&&aCe.prototype||{},nL=[].toString,v9t=m9t([].join);d9t(function(){nL.call({})})&&(nL=function(){return v9t(this)});var y9t=g9t.toString!==nL;p9t("toString",nL,y9t)});var Z$=M(()=>{"use strict";var _9t=TV(),Y$=cn(),x9t=$O(),b9t=Qo(),w9t=uT(),E9t=Y$.aTypedArray,S9t=Y$.getTypedArrayConstructor,I9t=Y$.exportTypedArrayMethod,T9t=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();I9t("with",function(e,t){var r=E9t(this),n=b9t(e),o=x9t(r)?w9t(t):+t;return _9t(r,S9t(r),n,o)},!T9t)});var pCe=M(()=>{"use strict";var M9t=re(),K$=gt(),C9t=Hr(),lCe=String.fromCharCode,uCe=K$("".charAt),cCe=K$(/./.exec),fCe=K$("".slice),A9t=/^[\da-f]{2}$/i,D9t=/^[\da-f]{4}$/i;M9t({global:!0},{unescape:function(t){for(var r=C9t(t),n="",o=r.length,i=0,a,u;i<o;){if(a=uCe(r,i++),a==="%"){if(uCe(r,i)==="u"){if(u=fCe(r,i+1,i+5),cCe(D9t,u)){n+=lCe(parseInt(u,16)),i+=5;continue}}else if(u=fCe(r,i,i+2),cCe(A9t,u)){n+=lCe(parseInt(u,16)),i+=2;continue}}n+=a}return n}})});var Q$=M((qUr,yCe)=>{"use strict";var N9t=gt(),dCe=Tc(),oL=Vg().getWeakData,O9t=Vs(),L9t=Jt(),P9t=oa(),X$=Br(),k9t=_i(),mCe=ji(),hCe=sn(),gCe=ro(),R9t=gCe.set,j9t=gCe.getterFor,q9t=mCe.find,z9t=mCe.findIndex,F9t=N9t([].splice),U9t=0,iL=function(e){return e.frozen||(e.frozen=new vCe)},vCe=function(){this.entries=[]},J$=function(e,t){return q9t(e.entries,function(r){return r[0]===t})};vCe.prototype={get:function(e){var t=J$(this,e);if(t)return t[1]},has:function(e){return!!J$(this,e)},set:function(e,t){var r=J$(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=z9t(this.entries,function(r){return r[0]===e});return~t&&F9t(this.entries,t,1),!!~t}};yCe.exports={getConstructor:function(e,t,r,n){var o=e(function(p,h){O9t(p,i),R9t(p,{type:t,id:U9t++,frozen:null}),P9t(h)||k9t(h,p[n],{that:p,AS_ENTRIES:r})}),i=o.prototype,a=j9t(t),u=function(p,h,g){var x=a(p),b=oL(L9t(h),!0);return b===!0?iL(x).set(h,g):b[x.id]=g,p};return dCe(i,{delete:function(p){var h=a(this);if(!X$(p))return!1;var g=oL(p);return g===!0?iL(h).delete(p):g&&hCe(g,h.id)&&delete g[h.id]},has:function(h){var g=a(this);if(!X$(h))return!1;var x=oL(h);return x===!0?iL(g).has(h):x&&hCe(x,g.id)}}),dCe(i,r?{get:function(h){var g=a(this);if(X$(h)){var x=oL(h);if(x===!0)return iL(g).get(h);if(x)return x[g.id]}},set:function(h,g){return u(this,h,g)}}:{add:function(h){return u(this,h,!0)}}),o}}});var TCe=M(()=>{"use strict";var B9t=Ih(),_Ce=$t(),uL=gt(),xCe=Tc(),V9t=Vg(),G9t=qI(),bCe=Q$(),aL=Br(),sL=ro().enforce,H9t=Tt(),W9t=eB(),vT=Object,$9t=Array.isArray,lL=vT.isExtensible,wCe=vT.isFrozen,Y9t=vT.isSealed,ECe=vT.freeze,Z9t=vT.seal,K9t=!_Ce.ActiveXObject&&"ActiveXObject"in _Ce,mT,SCe=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ICe=G9t("WeakMap",SCe,bCe),sb=ICe.prototype,cL=uL(sb.set),X9t=function(){return B9t&&H9t(function(){var e=ECe([]);return cL(new ICe,e,1),!wCe(e)})};W9t&&(K9t?(mT=bCe.getConstructor(SCe,"WeakMap",!0),V9t.enable(),eY=uL(sb.delete),gT=uL(sb.has),tY=uL(sb.get),xCe(sb,{delete:function(e){if(aL(e)&&!lL(e)){var t=sL(this);return t.frozen||(t.frozen=new mT),eY(this,e)||t.frozen.delete(e)}return eY(this,e)},has:function(t){if(aL(t)&&!lL(t)){var r=sL(this);return r.frozen||(r.frozen=new mT),gT(this,t)||r.frozen.has(t)}return gT(this,t)},get:function(t){if(aL(t)&&!lL(t)){var r=sL(this);return r.frozen||(r.frozen=new mT),gT(this,t)?tY(this,t):r.frozen.get(t)}return tY(this,t)},set:function(t,r){if(aL(t)&&!lL(t)){var n=sL(this);n.frozen||(n.frozen=new mT),gT(this,t)?cL(this,t,r):n.frozen.set(t,r)}else cL(this,t,r);return this}})):X9t()&&xCe(sb,{set:function(t,r){var n;return $9t(t)&&(wCe(t)?n=ECe:Y9t(t)&&(n=Z9t)),cL(this,t,r),n&&n(t),this}}));var eY,gT,tY});var fL=M(()=>{"use strict";TCe()});var MCe=M(()=>{"use strict";var J9t=qI(),Q9t=Q$();J9t("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Q9t)});var CCe=M(()=>{"use strict";MCe()});var ACe=M(()=>{"use strict";WB()});var OCe=M(()=>{"use strict";var e7t=re(),t7t=$t(),r7t=ss(),DCe=sa(),dL=Ec(),n7t=r0(),NCe=Ri(),pL=aa(),rY=Jl(),o7t=C5(),i7t=s0(),a7t=Nr(),s7t=Tt(),l7t=fn(),lb=t7t.SuppressedError,u7t=a7t("toStringTag"),hL=Error,c7t=!!lb&&lb.length!==3,f7t=!!lb&&s7t(function(){return new lb(1,2,3,{cause:4}).cause===4}),mL=c7t||f7t,w0=function(t,r,n){var o=r7t(yT,this),i;return dL?i=mL&&(!o||DCe(this)===yT)?new lb:dL(new hL,o?DCe(this):yT):(i=o?this:NCe(yT),pL(i,u7t,"Error")),n!==void 0&&pL(i,"message",i7t(n)),o7t(i,w0,i.stack,1),pL(i,"error",t),pL(i,"suppressed",r),i};dL?dL(w0,hL):n7t(w0,hL,{name:!0});var yT=w0.prototype=mL?lb.prototype:NCe(hL.prototype,{constructor:rY(1,w0),message:rY(1,""),name:rY(1,"SuppressedError")});mL&&!l7t&&(yT.constructor=w0);e7t({global:!0,constructor:!0,arity:3,forced:mL},{SuppressedError:w0})});var ub=M((XUr,FCe)=>{"use strict";var jCe=$t(),qCe=iI(),zCe=Kr(),p7t=Ri(),gL=sa(),d7t=fo(),h7t=Nr(),m7t=fn(),LCe="USE_FUNCTION_CONSTRUCTOR",PCe=h7t("asyncIterator"),kCe=jCe.AsyncIterator,RCe=qCe.AsyncIteratorPrototype,Up,nY;if(RCe)Up=RCe;else if(zCe(kCe))Up=kCe.prototype;else if(qCe[LCe]||jCe[LCe])try{nY=gL(gL(gL(Function("return async function*(){}()")()))),gL(nY)===Object.prototype&&(Up=nY)}catch(e){}Up?m7t&&(Up=p7t(Up)):Up={};zCe(Up[PCe])||d7t(Up,PCe,function(){return this});FCe.exports=Up});var _T=M((JUr,ZCe)=>{"use strict";var UCe=er(),BCe=Jt(),g7t=Ri(),v7t=ki(),y7t=Tc(),HCe=ro(),_7t=Fr(),x7t=ub(),WCe=qa(),oY=_7t("Promise"),$Ce="AsyncFromSyncIterator",b7t=HCe.set,VCe=HCe.getterFor($Ce),GCe=function(e,t,r){var n=e.done;oY.resolve(e.value).then(function(o){t(WCe(o,n))},r)},YCe=function(t){t.type=$Ce,b7t(this,t)};YCe.prototype=y7t(g7t(x7t),{next:function(){var t=VCe(this);return new oY(function(r,n){var o=BCe(UCe(t.next,t.iterator));GCe(o,r,n)})},return:function(){var e=VCe(this).iterator;return new oY(function(t,r){var n=v7t(e,"return");if(n===void 0)return t(WCe(void 0,!0));var o=BCe(UCe(n,e));GCe(o,t,r)})}});ZCe.exports=YCe});var XCe=M((QUr,KCe)=>{"use strict";var w7t=er(),E7t=_T(),S7t=Jt(),I7t=Og(),T7t=ui(),M7t=ki(),C7t=Nr(),A7t=C7t("asyncIterator");KCe.exports=function(e,t){var r=arguments.length<2?M7t(e,A7t):t;return r?S7t(w7t(r,e)):new E7t(T7t(I7t(e)))}});var cb=M((eBr,JCe)=>{"use strict";var D7t=er(),N7t=Fr(),O7t=ki();JCe.exports=function(e,t,r,n){try{var o=O7t(e,"return");if(o)return N7t("Promise").resolve(D7t(o,e)).then(function(){t(r)},function(i){n(i)})}catch(i){return n(i)}t(r)}});var E0=M((tBr,QCe)=>{"use strict";var L7t=er(),P7t=kr(),iY=Jt(),k7t=Br(),R7t=Lg(),j7t=Fr(),q7t=ui(),aY=cb(),xT=function(e){var t=e===0,r=e===1,n=e===2,o=e===3;return function(i,a,u){iY(i);var p=a!==void 0;(p||!t)&&P7t(a);var h=q7t(i),g=j7t("Promise"),x=h.iterator,b=h.next,T=0;return new g(function(A,L){var P=function(q){aY(x,L,q,L)},k=function(){try{if(p)try{R7t(T)}catch(q){P(q)}g.resolve(iY(L7t(b,x))).then(function(q){try{if(iY(q).done)t?(u.length=T,A(u)):A(o?!1:n||void 0);else{var U=q.value;try{if(p){var H=a(U,T),X=function(ee){if(r)k();else if(n)ee?k():aY(x,A,!1,L);else if(t)try{u[T++]=ee,k()}catch(ne){P(ne)}else ee?aY(x,A,o||U,L):k()};k7t(H)?g.resolve(H).then(X,P):X(H)}else u[T++]=U,k()}catch(ee){P(ee)}}}catch(ee){L(ee)}},L)}catch(q){L(q)}};k()})}};QCe.exports={toArray:xT(0),forEach:xT(1),every:xT(2),some:xT(3),find:xT(4)}});var sY=M((rBr,nAe)=>{"use strict";var z7t=xo(),eAe=gt(),F7t=pn(),U7t=Of(),B7t=XCe(),V7t=Og(),G7t=ui(),H7t=Pp(),W7t=ki(),$7t=Fr(),Y7t=EV(),Z7t=Nr(),K7t=_T(),X7t=E0().toArray,J7t=Z7t("asyncIterator"),tAe=eAe(Y7t("Array","values")),Q7t=eAe(tAe([]).next),eUt=function(){return new rAe(this)},rAe=function(e){this.iterator=tAe(e)};rAe.prototype.next=function(){return Q7t(this.iterator)};nAe.exports=function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new($7t("Promise"))(function(a){var u=F7t(t);o!==void 0&&(o=z7t(o,i));var p=W7t(u,J7t),h=p?void 0:H7t(u)||eUt,g=U7t(r)?new r:[],x=p?B7t(u,p):new K7t(G7t(V7t(u,h)));a(X7t(x,o,g))})}});var iAe=M(()=>{"use strict";var tUt=re(),rUt=sY(),nUt=Tt(),oAe=Array.fromAsync,oUt=!oAe||nUt(function(){var e=0;return oAe.call(function(){return e++,[]},{length:0}),e!==1});tUt({target:"Array",stat:!0,forced:oUt},{fromAsync:rUt})});var aAe=M(()=>{"use strict";KB()});var sAe=M(()=>{"use strict";var iUt=re(),aUt=ji().filterReject,sUt=xi();iUt({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return aUt(this,t,arguments.length>1?arguments[1]:void 0)}});sUt("filterOut")});var lAe=M(()=>{"use strict";var lUt=re(),uUt=ji().filterReject,cUt=xi();lUt({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return uUt(this,t,arguments.length>1?arguments[1]:void 0)}});cUt("filterReject")});var uAe=M(()=>{"use strict";tV()});var cAe=M(()=>{"use strict";rV()});var vL=M((mBr,fAe)=>{"use strict";var fUt=xo(),pUt=gt(),dUt=ph(),hUt=pn(),mUt=Op(),gUt=Tn(),vUt=Ri(),yUt=xh(),_Ut=Array,xUt=pUt([].push);fAe.exports=function(e,t,r,n){for(var o=hUt(e),i=dUt(o),a=fUt(t,r),u=vUt(null),p=gUt(i),h=0,g,x,b;p>h;h++)b=i[h],x=mUt(a(b,h,o)),x in u?xUt(u[x],b):u[x]=[b];if(n&&(g=n(o),g!==_Ut))for(x in u)u[x]=yUt(g,u[x]);return u}});var pAe=M(()=>{"use strict";var bUt=re(),wUt=vL(),EUt=xi();bUt({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return wUt(this,t,r)}});EUt("group")});var dAe=M(()=>{"use strict";var SUt=re(),IUt=vL(),TUt=Ic(),MUt=xi();SUt({target:"Array",proto:!0,forced:!TUt("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return IUt(this,t,r)}});MUt("groupBy")});var lY=M((xBr,hAe)=>{"use strict";var CUt=xo(),AUt=gt(),DUt=ph(),NUt=pn(),OUt=Tn(),yL=_a(),LUt=yL.Map,PUt=yL.get,kUt=yL.has,RUt=yL.set,jUt=AUt([].push);hAe.exports=function(t){for(var r=NUt(this),n=DUt(r),o=CUt(t,arguments.length>1?arguments[1]:void 0),i=new LUt,a=OUt(n),u=0,p,h;a>u;u++)h=n[u],p=o(h,u,r),kUt(i,p)?jUt(PUt(i,p),h):RUt(i,p,[h]);return i}});var mAe=M(()=>{"use strict";var qUt=re(),zUt=Ic(),FUt=xi(),UUt=lY(),BUt=fn();qUt({target:"Array",proto:!0,name:"groupToMap",forced:BUt||!zUt("groupByToMap")},{groupByToMap:UUt});FUt("groupByToMap")});var gAe=M(()=>{"use strict";var VUt=re(),GUt=xi(),HUt=lY(),WUt=fn();VUt({target:"Array",proto:!0,forced:WUt},{groupToMap:HUt});GUt("groupToMap")});var _Ae=M(()=>{"use strict";var $Ut=re(),YUt=Nf(),vAe=Object.isFrozen,yAe=function(e,t){if(!vAe||!YUt(e)||!vAe(e))return!1;for(var r=0,n=e.length,o;r<n;)if(o=e[r++],!(typeof o=="string"||t&&o===void 0))return!1;return n!==0};$Ut({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!yAe(t,!0))return!1;var r=t.raw;return r.length===t.length&&yAe(r,!1)}})});var xAe=M(()=>{"use strict";var ZUt=Tr(),KUt=xi(),XUt=pn(),JUt=Tn(),QUt=ei();ZUt&&(QUt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=XUt(this),r=JUt(t);return r===0?0:r-1}}),KUt("lastIndex"))});var EAe=M(()=>{"use strict";var eBt=Tr(),tBt=xi(),bAe=pn(),wAe=Tn(),rBt=ei();eBt&&(rBt(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=bAe(this),r=wAe(t);return r===0?void 0:t[r-1]},set:function(t){var r=bAe(this),n=wAe(r);return r[n===0?0:n-1]=t}}),tBt("lastItem"))});var SAe=M(()=>{"use strict";wV()});var IAe=M(()=>{"use strict";SV()});var TAe=M(()=>{"use strict";IV()});var Mc=M((jBr,NAe)=>{"use strict";var MAe=gt(),nBt=Mh(),CAe=_a(),oBt=CAe.Map,AAe=CAe.proto,iBt=MAe(AAe.forEach),DAe=MAe(AAe.entries),aBt=DAe(new oBt).next;NAe.exports=function(e,t,r){return r?nBt({iterator:DAe(e),next:aBt},function(n){return t(n[1],n[0])}):iBt(e,t)}});var _L=M((qBr,OAe)=>{"use strict";var sBt=gt(),lBt=kr(),uBt=oa(),cBt=Tn(),fBt=pn(),uY=_a(),pBt=Mc(),dBt=uY.Map,hBt=uY.has,mBt=uY.set,gBt=sBt([].push);OAe.exports=function(t){var r=fBt(this),n=cBt(r),o=[],i=new dBt,a=uBt(t)?function(g){return g}:lBt(t),u,p,h;for(u=0;u<n;u++)p=r[u],h=a(p),hBt(i,h)||mBt(i,h,p);return pBt(i,function(g){gBt(o,g)}),o}});var LAe=M(()=>{"use strict";var vBt=re(),yBt=xi(),_Bt=_L();vBt({target:"Array",proto:!0,forced:!0},{uniqueBy:_Bt});yBt("uniqueBy")});var PAe=M(()=>{"use strict";MV()});var kAe=M(()=>{"use strict";YV()});var RAe=M(()=>{"use strict";uG()});var jAe=M(()=>{"use strict";cG()});var fY=M((ZBr,BAe)=>{"use strict";var xBt=er(),bBt=gt(),wBt=xo(),EBt=Jt(),SBt=kr(),FAe=oa(),cY=ki(),UAe=Nr(),IBt=UAe("asyncDispose"),qAe=UAe("dispose"),TBt=bBt([].push),MBt=function(e,t){if(t==="async-dispose"){var r=cY(e,IBt);return r!==void 0||(r=cY(e,qAe),r===void 0)?r:function(){xBt(r,this)}}return cY(e,qAe)},zAe=function(e,t,r){return arguments.length<3&&!FAe(e)&&(r=SBt(MBt(EBt(e),t))),r===void 0?function(){}:wBt(r,e)};BAe.exports=function(e,t,r,n){var o;if(arguments.length<4){if(FAe(t)&&r==="sync-dispose")return;o=zAe(t,r)}else o=zAe(void 0,r,n);TBt(e.stack,o)}});var ZAe=M(()=>{"use strict";var CBt=re(),bL=Tr(),HAe=Fr(),VAe=kr(),ABt=Vs(),WAe=fo(),DBt=Tc(),NBt=ei(),$Ae=Nr(),YAe=ro(),pY=fY(),GAe=HAe("Promise"),OBt=HAe("SuppressedError"),LBt=ReferenceError,PBt=$Ae("asyncDispose"),kBt=$Ae("toStringTag"),EL="AsyncDisposableStack",RBt=YAe.set,wL=YAe.getterFor(EL),dY="async-dispose",bT="disposed",jBt="pending",xL=function(e){var t=wL(e);if(t.state===bT)throw new LBt(EL+" already disposed");return t},hY=function(){RBt(ABt(this,fb),{type:EL,state:jBt,stack:[]}),bL||(this.disposed=!1)},fb=hY.prototype;DBt(fb,{disposeAsync:function(){var t=this;return new GAe(function(r,n){var o=wL(t);if(o.state===bT)return r(void 0);o.state=bT,bL||(t.disposed=!0);var i=o.stack,a=i.length,u=!1,p,h=function(x){u?p=new OBt(x,p):(u=!0,p=x),g()},g=function(){if(a){var x=i[--a];i[a]=null;try{GAe.resolve(x()).then(g,h)}catch(b){h(b)}}else o.stack=null,u?n(p):r(void 0)};g()})},use:function(t){return pY(xL(this),t,dY),t},adopt:function(t,r){var n=xL(this);return VAe(r),pY(n,void 0,dY,function(){return r(t)}),t},defer:function(t){var r=xL(this);VAe(t),pY(r,void 0,dY,t)},move:function(){var t=xL(this),r=new hY;return wL(r).stack=t.stack,t.stack=[],t.state=bT,bL||(this.disposed=!0),r}});bL&&NBt(fb,"disposed",{configurable:!0,get:function(){return wL(this).state===bT}});WAe(fb,PBt,fb.disposeAsync,{name:"disposeAsync"});WAe(fb,kBt,EL,{nonWritable:!0});CBt({global:!0,constructor:!0},{AsyncDisposableStack:hY})});var eDe=M(()=>{"use strict";var qBt=re(),zBt=Vs(),FBt=sa(),XAe=aa(),JAe=sn(),UBt=Nr(),Kg=ub(),QAe=fn(),KAe=UBt("toStringTag"),BBt=TypeError,mY=function(){if(zBt(this,Kg),FBt(this)===Kg)throw new BBt("Abstract class AsyncIterator not directly constructable")};mY.prototype=Kg;JAe(Kg,KAe)||XAe(Kg,KAe,"AsyncIterator");(QAe||!JAe(Kg,"constructor")||Kg.constructor===Object)&&XAe(Kg,"constructor",mY);qBt({global:!0,constructor:!0,forced:QAe},{AsyncIterator:mY})});var S0=M((eVr,lDe)=>{"use strict";var VBt=er(),SL=Gg(),tDe=Jt(),GBt=Ri(),HBt=aa(),WBt=Tc(),$Bt=Nr(),nDe=ro(),YBt=Fr(),ZBt=ki(),KBt=ub(),gY=qa(),rDe=yh(),Bp=YBt("Promise"),XBt=$Bt("toStringTag"),oDe="AsyncIteratorHelper",iDe="WrapForValidAsyncIterator",JBt=nDe.set,aDe=function(e){var t=!e,r=nDe.getterFor(e?iDe:oDe),n=function(o){var i=SL(function(){return r(o)}),a=i.error,u=i.value;return a||t&&u.done?{exit:!0,value:a?Bp.reject(u):Bp.resolve(gY(void 0,!0))}:{exit:!1,value:u}};return WBt(GBt(KBt),{next:function(){var i=n(this),a=i.value;if(i.exit)return a;var u=SL(function(){return tDe(a.nextHandler(Bp))}),p=u.error,h=u.value;return p&&(a.done=!0),p?Bp.reject(h):Bp.resolve(h)},return:function(){var o=n(this),i=o.value;if(o.exit)return i;i.done=!0;var a=i.iterator,u,p,h=SL(function(){if(i.inner)try{rDe(i.inner.iterator,"normal")}catch(g){return rDe(a,"throw",g)}return ZBt(a,"return")});return u=p=h.value,h.error?Bp.reject(p):u===void 0?Bp.resolve(gY(void 0,!0)):(h=SL(function(){return VBt(u,a)}),p=h.value,h.error?Bp.reject(p):e?Bp.resolve(p):Bp.resolve(p).then(function(g){return tDe(g),gY(void 0,!0)}))}})},QBt=aDe(!0),sDe=aDe(!1);HBt(sDe,XBt,"Async Iterator Helper");lDe.exports=function(e,t){var r=function(o,i){i?(i.iterator=o.iterator,i.next=o.next):i=o,i.type=t?iDe:oDe,i.nextHandler=e,i.counter=0,i.done=!1,JBt(this,i)};return r.prototype=t?QBt:sDe,r}});var yY=M((tVr,cDe)=>{"use strict";var eVt=er(),tVt=kr(),vY=Jt(),rVt=Br(),nVt=ui(),oVt=S0(),uDe=qa(),iVt=cb(),aVt=oVt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(p){t.done=!0,i(p)},u=function(p){iVt(r,a,p,a)};e.resolve(vY(eVt(t.next,r))).then(function(p){try{if(vY(p).done)t.done=!0,o(uDe(void 0,!0));else{var h=p.value;try{var g=n(h,t.counter++),x=function(b){o(uDe(b,!1))};rVt(g)?e.resolve(g).then(x,u):x(g)}catch(b){u(b)}}}catch(b){a(b)}},a)})});cDe.exports=function(t){return vY(this),tVt(t),new aVt(nVt(this),{mapper:t})}});var _Y=M((rVr,fDe)=>{"use strict";var sVt=er(),lVt=yY(),uVt=function(e,t){return[t,e]};fDe.exports=function(){return sVt(lVt,this,uVt)}});var pDe=M(()=>{"use strict";var cVt=re(),fVt=_Y();cVt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:fVt})});var gDe=M(()=>{"use strict";var pVt=er(),dVt=fo(),hVt=Fr(),mVt=ki(),gVt=sn(),vVt=Nr(),dDe=ub(),hDe=vVt("asyncDispose"),mDe=hVt("Promise");gVt(dDe,hDe)||dVt(dDe,hDe,function(){var e=this;return new mDe(function(t,r){var n=mVt(e,"return");n?mDe.resolve(pVt(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var yDe=M(()=>{"use strict";var yVt=re(),_Vt=er(),xY=Jt(),xVt=ui(),bVt=jI(),wVt=zx(),EVt=S0(),vDe=qa(),SVt=fn(),IVt=EVt(function(e){var t=this;return new e(function(r,n){var o=function(a){t.done=!0,n(a)},i=function(){try{e.resolve(xY(_Vt(t.next,t.iterator))).then(function(a){try{xY(a).done?(t.done=!0,r(vDe(void 0,!0))):t.remaining?(t.remaining--,i()):r(vDe(a.value,!1))}catch(u){o(u)}},o)}catch(a){o(a)}};i()})});yVt({target:"AsyncIterator",proto:!0,real:!0,forced:SVt},{drop:function(t){xY(this);var r=wVt(bVt(+t));return new IVt(xVt(this),{remaining:r})}})});var _De=M(()=>{"use strict";var TVt=re(),MVt=E0().every;TVt({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return MVt(this,t)}})});var bDe=M(()=>{"use strict";var CVt=re(),AVt=er(),DVt=kr(),bY=Jt(),NVt=Br(),OVt=ui(),LVt=S0(),xDe=qa(),PVt=cb(),kVt=fn(),RVt=LVt(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(o,i){var a=function(h){t.done=!0,i(h)},u=function(h){PVt(r,a,h,a)},p=function(){try{e.resolve(bY(AVt(t.next,r))).then(function(h){try{if(bY(h).done)t.done=!0,o(xDe(void 0,!0));else{var g=h.value;try{var x=n(g,t.counter++),b=function(T){T?o(xDe(g,!1)):p()};NVt(x)?e.resolve(x).then(b,u):b(x)}catch(T){u(T)}}}catch(T){a(T)}},a)}catch(h){a(h)}};p()})});CVt({target:"AsyncIterator",proto:!0,real:!0,forced:kVt},{filter:function(t){return bY(this),DVt(t),new RVt(OVt(this),{predicate:t})}})});var wDe=M(()=>{"use strict";var jVt=re(),qVt=E0().find;jVt({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return qVt(this,t)}})});var wY=M((mVr,IDe)=>{"use strict";var zVt=er(),FVt=Kr(),EDe=Jt(),SDe=ui(),UVt=Pp(),BVt=ki(),VVt=Nr(),GVt=_T(),HVt=VVt("asyncIterator");IDe.exports=function(e){var t=EDe(e),r=!0,n=BVt(t,HVt),o;return FVt(n)||(n=UVt(t),r=!1),n!==void 0?o=zVt(n,t):(o=t,r=!0),EDe(o),SDe(r?o:new GVt(SDe(o)))}});var CDe=M(()=>{"use strict";var WVt=re(),TDe=er(),$Vt=kr(),wT=Jt(),YVt=Br(),ZVt=ui(),KVt=S0(),MDe=qa(),XVt=wY(),JVt=cb(),QVt=fn(),eGt=KVt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(g){t.done=!0,i(g)},u=function(g){JVt(r,a,g,a)},p=function(){try{e.resolve(wT(TDe(t.next,r))).then(function(g){try{if(wT(g).done)t.done=!0,o(MDe(void 0,!0));else{var x=g.value;try{var b=n(x,t.counter++),T=function(A){try{t.inner=XVt(A),h()}catch(L){u(L)}};YVt(b)?e.resolve(b).then(T,u):T(b)}catch(A){u(A)}}}catch(A){a(A)}},a)}catch(g){a(g)}},h=function(){var g=t.inner;if(g)try{e.resolve(wT(TDe(g.next,g.iterator))).then(function(x){try{wT(x).done?(t.inner=null,p()):o(MDe(x.value,!1))}catch(b){u(b)}},u)}catch(x){u(x)}else p()};h()})});WVt({target:"AsyncIterator",proto:!0,real:!0,forced:QVt},{flatMap:function(t){return wT(this),$Vt(t),new eGt(ZVt(this),{mapper:t,inner:null})}})});var ADe=M(()=>{"use strict";var tGt=re(),rGt=E0().forEach;tGt({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return rGt(this,t)}})});var EY=M((xVr,DDe)=>{"use strict";var nGt=er(),oGt=S0();DDe.exports=oGt(function(){return nGt(this.next,this.iterator)},!0)});var NDe=M(()=>{"use strict";var iGt=re(),aGt=pn(),sGt=ss(),lGt=wY(),uGt=ub(),cGt=EY(),fGt=fn();iGt({target:"AsyncIterator",stat:!0,forced:fGt},{from:function(t){var r=lGt(typeof t=="string"?aGt(t):t);return sGt(uGt,r.iterator)?r.iterator:new cGt(r)}})});var ODe=M(()=>{"use strict";var pGt=re(),dGt=_Y();pGt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:dGt})});var LDe=M(()=>{"use strict";var hGt=re(),mGt=yY(),gGt=fn();hGt({target:"AsyncIterator",proto:!0,real:!0,forced:gGt},{map:mGt})});var PDe=M(()=>{"use strict";var vGt=re(),yGt=er(),_Gt=kr(),SY=Jt(),xGt=Br(),bGt=Fr(),wGt=ui(),EGt=cb(),IY=bGt("Promise"),SGt=TypeError;vGt({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){SY(this),_Gt(t);var r=wGt(this),n=r.iterator,o=r.next,i=arguments.length<2,a=i?void 0:arguments[1],u=0;return new IY(function(p,h){var g=function(b){EGt(n,h,b,h)},x=function(){try{IY.resolve(SY(yGt(o,n))).then(function(b){try{if(SY(b).done)i?h(new SGt("Reduce of empty iterator with no initial value")):p(a);else{var T=b.value;if(i)i=!1,a=T,x();else try{var A=t(a,T,u),L=function(P){a=P,x()};xGt(A)?IY.resolve(A).then(L,g):L(A)}catch(P){g(P)}}u++}catch(P){h(P)}},h)}catch(b){h(b)}};x()})}})});var kDe=M(()=>{"use strict";var IGt=re(),TGt=E0().some;IGt({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return TGt(this,t)}})});var qDe=M(()=>{"use strict";var MGt=re(),RDe=er(),jDe=Jt(),CGt=ui(),AGt=jI(),DGt=zx(),NGt=S0(),TY=qa(),OGt=fn(),LGt=NGt(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var o=TY(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(RDe(n,r,void 0)).then(function(){return o}):o}return e.resolve(RDe(t.next,r)).then(function(i){return jDe(i).done?(t.done=!0,TY(void 0,!0)):TY(i.value,!1)}).then(null,function(i){throw t.done=!0,i})});MGt({target:"AsyncIterator",proto:!0,real:!0,forced:OGt},{take:function(t){jDe(this);var r=DGt(AGt(+t));return new LGt(CGt(this),{remaining:r})}})});var zDe=M(()=>{"use strict";var PGt=re(),kGt=E0().toArray;PGt({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return kGt(this,void 0,[])}})});var TL=M((kVr,HDe)=>{"use strict";var UDe=ro(),RGt=Pg(),MY=qa(),jGt=oa(),qGt=Br(),zGt=ei(),BDe=Tr(),ET="Incorrect Iterator.range arguments",AY="NumericRangeIterator",FGt=UDe.set,VDe=UDe.getterFor(AY),FDe=RangeError,CY=TypeError,GDe=RGt(function(t,r,n,o,i,a){if(typeof t!=o||r!==1/0&&r!==-1/0&&typeof r!=o)throw new CY(ET);if(t===1/0||t===-1/0)throw new FDe(ET);var u=r>t,p=!1,h;if(n===void 0)h=void 0;else if(qGt(n))h=n.step,p=!!n.inclusive;else if(typeof n==o)h=n;else throw new CY(ET);if(jGt(h)&&(h=u?a:-a),typeof h!=o)throw new CY(ET);if(h===1/0||h===-1/0||h===i&&t!==r)throw new FDe(ET);var g=t!==t||r!==r||h!==h||r>t!=h>i;FGt(this,{type:AY,start:t,end:r,step:h,inclusive:p,hitsEnd:g,currentCount:i,zero:i}),BDe||(this.start=t,this.end=r,this.step=h,this.inclusive=p)},AY,function(){var t=VDe(this);if(t.hitsEnd)return MY(void 0,!0);var r=t.start,n=t.end,o=t.step,i=r+o*t.currentCount++;i===n&&(t.hitsEnd=!0);var a=t.inclusive,u;return n>r?u=a?i>n:i>=n:u=a?n>i:n>=i,u?(t.hitsEnd=!0,MY(void 0,!0)):MY(i,!1)}),IL=function(e){zGt(GDe.prototype,e,{get:function(){return VDe(this)[e]},set:function(){},configurable:!0,enumerable:!1})};BDe&&(IL("start"),IL("end"),IL("inclusive"),IL("step"));HDe.exports=GDe});var WDe=M(()=>{"use strict";var UGt=re(),BGt=TL();typeof BigInt=="function"&&UGt({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new BGt(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var DY=M((qVr,KDe)=>{"use strict";dO();fL();var ZDe=Fr(),VGt=Ri(),$De=Br(),GGt=Object,HGt=TypeError,WGt=ZDe("Map"),$Gt=ZDe("WeakMap"),ML=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=VGt(null)};ML.prototype.get=function(e,t){return this[e]||(this[e]=t())};ML.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new $Gt):this.primitives||(this.primitives=new WGt),o=n.get(t);return o||n.set(t,o=new ML),o};var YDe=new ML;KDe.exports=function(){var e=YDe,t=arguments.length,r,n;for(r=0;r<t;r++)$De(n=arguments[r])&&(e=e.next(r,n,!0));if(this===GGt&&e===YDe)throw new HGt("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)$De(n=arguments[r])||(e=e.next(r,n,!1));return e}});var JDe=M(()=>{"use strict";var YGt=re(),ZGt=Bs(),KGt=DY(),XGt=Fr(),XDe=Ri(),JGt=Object,QGt=function(){var e=XGt("Object","freeze");return e?e(XDe(null)):XDe(null)};YGt({global:!0,forced:!0},{compositeKey:function(){return ZGt(KGt,JGt,arguments).get("object",QGt)}})});var e4e=M(()=>{"use strict";var eHt=re(),tHt=DY(),QDe=Fr(),rHt=Bs();eHt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?QDe("Symbol").for(arguments[0]):rHt(tHt,null,arguments).get("symbol",QDe("Symbol"))}})});var t4e=M(()=>{"use strict";var nHt=re(),oHt=gt(),iHt=Z5().unpack,aHt=oHt(DataView.prototype.getUint16);nHt({target:"DataView",proto:!0},{getFloat16:function(t){var r=aHt(this,t,arguments.length>1?arguments[1]:!1);return iHt([r&255,r>>8&255],10)}})});var r4e=M(()=>{"use strict";var sHt=re(),lHt=gt(),uHt=lHt(DataView.prototype.getUint8);sHt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return uHt(this,t)}})});var NY=M(($Vr,n4e)=>{"use strict";var cHt=eu(),fHt=TypeError;n4e.exports=function(e){if(cHt(e)==="DataView")return e;throw new fHt("Argument is not a DataView")}});var OY=M((YVr,o4e)=>{"use strict";var pHt=CV(),dHt=.0009765625,hHt=65504,mHt=6103515625e-14;o4e.exports=Math.f16round||function(t){return pHt(t,dHt,hHt,mHt)}});var i4e=M(()=>{"use strict";var gHt=re(),vHt=gt(),yHt=NY(),_Ht=Ox(),xHt=Z5().pack,bHt=OY(),wHt=vHt(DataView.prototype.setUint16);gHt({target:"DataView",proto:!0},{setFloat16:function(t,r){yHt(this);var n=_Ht(t),o=xHt(bHt(r),10,2);return wHt(this,n,o[1]<<8|o[0],arguments.length>2?arguments[2]:!1)}})});var a4e=M(()=>{"use strict";var EHt=re(),SHt=gt(),IHt=NY(),THt=Ox(),MHt=x$(),CHt=SHt(DataView.prototype.setUint8);EHt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){IHt(this);var n=THt(t);return CHt(this,n,MHt(r))}})});var f4e=M(()=>{"use strict";var AHt=re(),AL=Tr(),DHt=Fr(),s4e=kr(),NHt=Vs(),l4e=fo(),OHt=Tc(),LHt=ei(),u4e=Nr(),c4e=ro(),LY=fY(),PHt=DHt("SuppressedError"),kHt=ReferenceError,RHt=u4e("dispose"),jHt=u4e("toStringTag"),NL="DisposableStack",qHt=c4e.set,DL=c4e.getterFor(NL),PY="sync-dispose",ST="disposed",zHt="pending",CL=function(e){var t=DL(e);if(t.state===ST)throw new kHt(NL+" already disposed");return t},kY=function(){qHt(NHt(this,pb),{type:NL,state:zHt,stack:[]}),AL||(this.disposed=!1)},pb=kY.prototype;OHt(pb,{dispose:function(){var t=DL(this);if(t.state!==ST){t.state=ST,AL||(this.disposed=!0);for(var r=t.stack,n=r.length,o=!1,i;n;){var a=r[--n];r[n]=null;try{a()}catch(u){o?i=new PHt(u,i):(o=!0,i=u)}}if(t.stack=null,o)throw i}},use:function(t){return LY(CL(this),t,PY),t},adopt:function(t,r){var n=CL(this);return s4e(r),LY(n,void 0,PY,function(){r(t)}),t},defer:function(t){var r=CL(this);s4e(t),LY(r,void 0,PY,t)},move:function(){var t=CL(this),r=new kY;return DL(r).stack=t.stack,t.stack=[],t.state=ST,AL||(this.disposed=!0),r}});AL&&LHt(pb,"disposed",{configurable:!0,get:function(){return DL(this).state===ST}});l4e(pb,RHt,pb.dispose,{name:"dispose"});l4e(pb,jHt,NL,{nonWritable:!0});AHt({global:!0,constructor:!0},{DisposableStack:kY})});var RY=M((tGr,p4e)=>{"use strict";var FHt=gt(),UHt=kr();p4e.exports=function(){return FHt(UHt(this))}});var d4e=M(()=>{"use strict";var BHt=re(),VHt=RY();BHt({target:"Function",proto:!0,forced:!0},{demethodize:VHt})});var m4e=M(()=>{"use strict";var GHt=re(),HHt=gt(),WHt=Kr(),$Ht=lI(),YHt=sn(),ZHt=Tr(),KHt=Object.getOwnPropertyDescriptor,h4e=/^\s*class\b/,XHt=HHt(h4e.exec),JHt=function(e){try{if(!ZHt||!XHt(h4e,$Ht(e)))return!1}catch(r){}var t=KHt(e,"prototype");return!!t&&YHt(t,"writable")&&!t.writable};GHt({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return WHt(t)&&!JHt(t)}})});var g4e=M(()=>{"use strict";var QHt=re(),eWt=Of();QHt({target:"Function",stat:!0,forced:!0},{isConstructor:eWt})});var _4e=M(()=>{"use strict";var tWt=Nr(),rWt=Lo().f,v4e=tWt("metadata"),y4e=Function.prototype;y4e[v4e]===void 0&&rWt(y4e,v4e,{value:null})});var x4e=M(()=>{"use strict";var nWt=re(),oWt=RY();nWt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:oWt})});var b4e=M(()=>{"use strict";vG()});var w4e=M(()=>{"use strict";wG()});var jY=M((gGr,E4e)=>{"use strict";var iWt=er(),aWt=kG(),sWt=function(e,t){return[t,e]};E4e.exports=function(){return iWt(aWt,this,sWt)}});var S4e=M(()=>{"use strict";var lWt=re(),uWt=jY();lWt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:uWt})});var M4e=M(()=>{"use strict";var cWt=re(),I4e=er(),fWt=kr(),T4e=Jt(),pWt=Pp(),dWt=Bg(),hWt=Array,mWt=dWt(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length){this.done=!0;return}var n=r[t];this.iterables[t]=null,e=this.iterator=I4e(n.method,n.iterable),this.next=e.next}var o=T4e(I4e(this.next,e));if(o.done){this.iterator=null,this.next=null;continue}return o.value}});cWt({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=hWt(t),n=0;n<t;n++){var o=T4e(arguments[n]);r[n]={iterable:o,method:fWt(pWt(o))}}return new mWt({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var D4e=M(()=>{"use strict";var gWt=er(),vWt=fo(),yWt=ki(),_Wt=sn(),xWt=Nr(),C4e=c0().IteratorPrototype,A4e=xWt("dispose");_Wt(C4e,A4e)||vWt(C4e,A4e,function(){var e=yWt(this,"return");e&&gWt(e,this)})});var N4e=M(()=>{"use strict";TG()});var O4e=M(()=>{"use strict";MG()});var L4e=M(()=>{"use strict";CG()});var P4e=M(()=>{"use strict";AG()});var k4e=M(()=>{"use strict";OG()});var R4e=M(()=>{"use strict";LG()});var j4e=M(()=>{"use strict";PG()});var q4e=M(()=>{"use strict";var bWt=re(),wWt=jY();bWt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:wWt})});var z4e=M(()=>{"use strict";RG()});var U4e=M(()=>{"use strict";var EWt=re(),F4e=TL(),SWt=TypeError;EWt({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new F4e(t,r,n,"number",0,1);if(typeof t=="bigint")return new F4e(t,r,n,"bigint",BigInt(0),BigInt(1));throw new SWt("Incorrect Iterator.range arguments")}})});var B4e=M(()=>{"use strict";jG()});var V4e=M(()=>{"use strict";qG()});var G4e=M(()=>{"use strict";zG()});var H4e=M(()=>{"use strict";FG()});var $4e=M(()=>{"use strict";var IWt=re(),TWt=Jt(),MWt=_T(),CWt=EY(),W4e=ui(),AWt=fn();IWt({target:"Iterator",proto:!0,real:!0,forced:AWt},{toAsync:function(){return new CWt(W4e(new MWt(W4e(TWt(this)))))}})});var qY=M((QGr,Y4e)=>{"use strict";var DWt=Tt();Y4e.exports=!DWt(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var zY=M((eHr,Z4e)=>{"use strict";var NWt=Br(),OWt=ro().get;Z4e.exports=function(t){if(!NWt(t))return!1;var r=OWt(t);return!!r&&r.type==="RawJSON"}});var K4e=M(()=>{"use strict";var LWt=re(),PWt=qY(),kWt=zY();LWt({target:"JSON",stat:!0,forced:!PWt},{isRawJSON:kWt})});var UY=M((nHr,eNe)=>{"use strict";var FY=gt(),RWt=sn(),OL=SyntaxError,jWt=parseInt,qWt=String.fromCharCode,zWt=FY("".charAt),X4e=FY("".slice),J4e=FY(/./.exec),Q4e={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},FWt=/^[\da-f]{4}$/i,UWt=/^[\u0000-\u001F]$/;eNe.exports=function(e,t){for(var r=!0,n="";t<e.length;){var o=zWt(e,t);if(o==="\\"){var i=X4e(e,t,t+2);if(RWt(Q4e,i))n+=Q4e[i],t+=2;else if(i==="\\u"){t+=2;var a=X4e(e,t,t+4);if(!J4e(FWt,a))throw new OL("Bad Unicode escape at: "+t);n+=qWt(jWt(a,16)),t+=4}else throw new OL("Unknown escape sequence: \""+i+"\"")}else if(o==="\""){r=!1,t++;break}else{if(J4e(UWt,o))throw new OL("Bad control character in string literal at: "+t);n+=o,t++}}if(r)throw new OL("Unterminated string at: "+t);return{value:n,end:t}}});var lNe=M(()=>{"use strict";var BWt=re(),VWt=Tr(),ZY=$t(),GWt=Fr(),LL=gt(),HWt=er(),aNe=Kr(),WWt=Br(),$Wt=Nf(),YWt=sn(),ZWt=Hr(),tNe=Tn(),WY=Sc(),sNe=Tt(),KWt=UY(),XWt=Ig(),rNe=ZY.JSON,JWt=ZY.Number,db=ZY.SyntaxError,KY=rNe&&rNe.parse,QWt=GWt("Object","keys"),e$t=Object.getOwnPropertyDescriptor,us=LL("".charAt),BY=LL("".slice),VY=LL(/./.exec),nNe=LL([].push),GY=/^\d$/,t$t=/^[1-9]$/,r$t=/^[\d-]$/,IT=/^[\t\n\r ]$/,HY=0,oNe=1,n$t=function(e,t){e=ZWt(e);var r=new YY(e,0,""),n=r.parse(),o=n.value,i=r.skip(IT,n.end);if(i<e.length)throw new db("Unexpected extra character: \""+us(e,i)+"\" after the parsed data at: "+i);return aNe(t)?$Y({"":o},"",t,n):o},$Y=function(e,t,r,n){var o=e[t],i=n&&o===n.value,a=i&&typeof n.source=="string"?{source:n.source}:{},u,p,h,g,x;if(WWt(o)){var b=$Wt(o),T=i?n.nodes:b?[]:{};if(b)for(u=T.length,h=tNe(o),g=0;g<h;g++)iNe(o,g,$Y(o,""+g,r,g<u?T[g]:void 0));else for(p=QWt(o),h=tNe(p),g=0;g<h;g++)x=p[g],iNe(o,x,$Y(o,x,r,YWt(T,x)?T[x]:void 0))}return HWt(r,e,t,o,a)},iNe=function(e,t,r){if(VWt){var n=e$t(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:WY(e,t,r)},o$t=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},YY=function(e,t){this.source=e,this.index=t};YY.prototype={fork:function(e){return new YY(this.source,e)},parse:function(){var e=this.source,t=this.skip(IT,this.index),r=this.fork(t),n=us(e,t);if(VY(r$t,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null);}throw new db("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,o){return new o$t(t,n,e?null:BY(this.source,r,n),o)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},o={};t<e.length;){if(t=this.until(["\"","}"],t),us(e,t)==="}"&&!r){t++;break}var i=this.fork(t).string(),a=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(IT,t),i=this.fork(t).parse(),WY(o,a,i),WY(n,a,i.value),t=this.until([",","}"],i.end);var u=us(e,t);if(u===",")r=!0,t++;else if(u==="}"){t++;break}}return this.node(oNe,n,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],o=[];t<e.length;){if(t=this.skip(IT,t),us(e,t)==="]"&&!r){t++;break}var i=this.fork(t).parse();if(nNe(o,i),nNe(n,i.value),t=this.until([",","]"],i.end),us(e,t)===",")r=!0,t++;else if(us(e,t)==="]"){t++;break}}return this.node(oNe,n,this.index,t,o)},string:function(){var e=this.index,t=KWt(this.source,this.index+1);return this.node(HY,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(us(e,r)==="-"&&r++,us(e,r)==="0")r++;else if(VY(t$t,us(e,r)))r=this.skip(GY,r+1);else throw new db("Failed to parse number at: "+r);if(us(e,r)==="."&&(r=this.skip(GY,r+1)),us(e,r)==="e"||us(e,r)==="E"){r++,(us(e,r)==="+"||us(e,r)==="-")&&r++;var n=r;if(r=this.skip(GY,r),n===r)throw new db("Failed to parse number's exponent value at: "+r)}return this.node(HY,JWt(BY(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(BY(this.source,r,n)!==t)throw new db("Failed to parse value at: "+r);return this.node(HY,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&VY(e,us(r,t));t++);return t},until:function(e,t){t=this.skip(IT,t);for(var r=us(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new db("Unexpected character: \""+r+"\" at: "+t)}};var i$t=sNe(function(){var e="9007199254740993",t;return KY(e,function(r,n,o){t=o.source}),t!==e}),a$t=XWt&&!sNe(function(){return 1/KY("-0 \t")!==-1/0});BWt({target:"JSON",stat:!0,forced:i$t},{parse:function(t,r){return a$t&&!aNe(r)?KY(t):n$t(t,r)}})});var gNe=M(()=>{"use strict";var hNe=re(),s$t=Ih(),mNe=qY(),PL=Fr(),l$t=er(),eZ=gt(),u$t=Kr(),c$t=zY(),f$t=Hr(),p$t=Sc(),d$t=UY(),h$t=DB(),m$t=Mg(),g$t=ro().set,v$t=String,uNe=SyntaxError,y$t=PL("JSON","parse"),cNe=PL("JSON","stringify"),_$t=PL("Object","create"),x$t=PL("Object","freeze"),JY=eZ("".charAt),XY=eZ("".slice),b$t=eZ([].push),QY=m$t(),fNe=QY.length,pNe="Unacceptable as raw JSON",dNe=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};hNe({target:"JSON",stat:!0,forced:!mNe},{rawJSON:function(t){var r=f$t(t);if(r===""||dNe(JY(r,0))||dNe(JY(r,r.length-1)))throw new uNe(pNe);var n=y$t(r);if(typeof n=="object"&&n!==null)throw new uNe(pNe);var o=_$t(null);return g$t(o,{type:"RawJSON"}),p$t(o,"rawJSON",r),s$t?x$t(o):o}});cNe&&hNe({target:"JSON",stat:!0,arity:3,forced:!mNe},{stringify:function(t,r,n){var o=h$t(r),i=[],a=cNe(t,function(T,A){var L=u$t(o)?l$t(o,this,v$t(T),A):A;return c$t(L)?QY+(b$t(i,L.rawJSON)-1):L},n);if(typeof a!="string")return a;for(var u="",p=a.length,h=0;h<p;h++){var g=JY(a,h);if(g==="\""){var x=d$t(a,++h).end-1,b=XY(a,h,x);u+=XY(b,0,fNe)===QY?i[XY(b,fNe)]:"\""+b+"\"",h=x}else u+=g}return u}})});var cs=M((lHr,vNe)=>{"use strict";var w$t=_a().has;vNe.exports=function(e){return w$t(e),e}});var yNe=M(()=>{"use strict";var E$t=re(),S$t=cs(),I$t=_a().remove;E$t({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=S$t(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=I$t(t,arguments[o]),r=r&&n;return!!r}})});var xNe=M(()=>{"use strict";var T$t=re(),M$t=cs(),tZ=_a(),C$t=tZ.get,A$t=tZ.has,_Ne=tZ.set;T$t({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=M$t(this),o,i;return A$t(n,t)?(o=C$t(n,t),"update"in r&&(o=r.update(o,t,n),_Ne(n,t,o)),o):(i=r.insert(t,n),_Ne(n,t,i),i)}})});var bNe=M(()=>{"use strict";var D$t=re(),N$t=xo(),O$t=cs(),L$t=Mc();D$t({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=O$t(this),n=N$t(t,arguments.length>1?arguments[1]:void 0);return L$t(r,function(o,i){if(!n(o,i,r))return!1},!0)!==!1}})});var ENe=M(()=>{"use strict";var P$t=re(),k$t=xo(),R$t=cs(),wNe=_a(),j$t=Mc(),q$t=wNe.Map,z$t=wNe.set;P$t({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=R$t(this),n=k$t(t,arguments.length>1?arguments[1]:void 0),o=new q$t;return j$t(r,function(i,a){n(i,a,r)&&z$t(o,a,i)}),o}})});var SNe=M(()=>{"use strict";var F$t=re(),U$t=xo(),B$t=cs(),V$t=Mc();F$t({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=B$t(this),n=U$t(t,arguments.length>1?arguments[1]:void 0),o=V$t(r,function(i,a){if(n(i,a,r))return{value:i}},!0);return o&&o.value}})});var INe=M(()=>{"use strict";var G$t=re(),H$t=xo(),W$t=cs(),$$t=Mc();G$t({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=W$t(this),n=H$t(t,arguments.length>1?arguments[1]:void 0),o=$$t(r,function(i,a){if(n(i,a,r))return{key:a}},!0);return o&&o.key}})});var TT=M((bHr,TNe)=>{"use strict";var Y$t=xo(),Z$t=Jt(),K$t=pn(),X$t=_i();TNe.exports=function(e,t,r){return function(o){var i=K$t(o),a=arguments.length,u=a>1?arguments[1]:void 0,p=u!==void 0,h=p?Y$t(u,a>2?arguments[2]:void 0):void 0,g=new e,x=0;return X$t(i,function(b){var T=p?h(b,x++):b;r?t(g,Z$t(T)[0],T[1]):t(g,T)}),g}}});var CNe=M(()=>{"use strict";var J$t=re(),MNe=_a(),Q$t=TT();J$t({target:"Map",stat:!0,forced:!0},{from:Q$t(MNe.Map,MNe.set,!0)})});var ANe=M(()=>{"use strict";var eYt=re(),tYt=cs(),rZ=_a(),rYt=rZ.get,nYt=rZ.has,oYt=rZ.set;eYt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return nYt(tYt(this),t)?rYt(this,t):(oYt(this,t,r),r)}})});var DNe=M(()=>{"use strict";var iYt=re(),aYt=kr(),sYt=cs(),nZ=_a(),lYt=nZ.get,uYt=nZ.has,cYt=nZ.set;iYt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(sYt(this),aYt(r),uYt(this,t))return lYt(this,t);t===0&&1/t===-1/0&&(t=0);var n=r(t);return cYt(this,t,n),n}})});var NNe=M(()=>{"use strict";YG()});var LNe=M((DHr,ONe)=>{"use strict";ONe.exports=function(e,t){return e===t||e!==e&&t!==t}});var PNe=M(()=>{"use strict";var fYt=re(),pYt=LNe(),dYt=cs(),hYt=Mc();fYt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return hYt(dYt(this),function(r){if(pYt(r,t))return!0},!0)===!0}})});var RNe=M(()=>{"use strict";var mYt=re(),gYt=er(),vYt=_i(),yYt=Kr(),kNe=kr(),_Yt=_a().Map;mYt({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=yYt(this)?this:_Yt,o=new n;kNe(r);var i=kNe(o.set);return vYt(t,function(a){gYt(i,o,r(a),a)}),o}})});var jNe=M(()=>{"use strict";var xYt=re(),bYt=cs(),wYt=Mc();xYt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=wYt(bYt(this),function(n,o){if(n===t)return{key:o}},!0);return r&&r.key}})});var zNe=M(()=>{"use strict";var EYt=re(),SYt=xo(),IYt=cs(),qNe=_a(),TYt=Mc(),MYt=qNe.Map,CYt=qNe.set;EYt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=IYt(this),n=SYt(t,arguments.length>1?arguments[1]:void 0),o=new MYt;return TYt(r,function(i,a){CYt(o,n(i,a,r),i)}),o}})});var UNe=M(()=>{"use strict";var AYt=re(),DYt=xo(),NYt=cs(),FNe=_a(),OYt=Mc(),LYt=FNe.Map,PYt=FNe.set;AYt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=NYt(this),n=DYt(t,arguments.length>1?arguments[1]:void 0),o=new LYt;return OYt(r,function(i,a){PYt(o,a,n(i,a,r))}),o}})});var BNe=M(()=>{"use strict";var kYt=re(),RYt=cs(),jYt=_i(),qYt=_a().set;kYt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=RYt(this),n=arguments.length,o=0;o<n;)jYt(arguments[o++],function(i,a){qYt(r,i,a)},{AS_ENTRIES:!0});return r}})});var MT=M((VHr,VNe)=>{"use strict";var zYt=Jt();VNe.exports=function(e,t,r){return function(){for(var o=new e,i=arguments.length,a=0;a<i;a++){var u=arguments[a];r?t(o,zYt(u)[0],u[1]):t(o,u)}return o}}});var HNe=M(()=>{"use strict";var FYt=re(),GNe=_a(),UYt=MT();FYt({target:"Map",stat:!0,forced:!0},{of:UYt(GNe.Map,GNe.set,!0)})});var WNe=M(()=>{"use strict";var BYt=re(),VYt=kr(),GYt=cs(),HYt=Mc(),WYt=TypeError;BYt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=GYt(this),n=arguments.length<2,o=n?void 0:arguments[1];if(VYt(t),HYt(r,function(i,a){n?(n=!1,o=i):o=t(o,i,a,r)}),n)throw new WYt("Reduce of empty map with no initial value");return o}})});var $Ne=M(()=>{"use strict";var $Yt=re(),YYt=xo(),ZYt=cs(),KYt=Mc();$Yt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=ZYt(this),n=YYt(t,arguments.length>1?arguments[1]:void 0);return KYt(r,function(o,i){if(n(o,i,r))return!0},!0)===!0}})});var ZNe=M(()=>{"use strict";var XYt=re(),YNe=kr(),JYt=cs(),oZ=_a(),QYt=TypeError,eZt=oZ.get,tZt=oZ.has,rZt=oZ.set;XYt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=JYt(this),o=arguments.length;YNe(r);var i=tZt(n,t);if(!i&&o<3)throw new QYt("Updating absent value");var a=i?eZt(n,t):YNe(o>2?arguments[2]:void 0)(t,n);return rZt(n,t,r(a,t,n)),n}})});var jL=M((JHr,KNe)=>{"use strict";var kL=er(),iZ=kr(),RL=Kr(),nZt=Jt(),oZt=TypeError;KNe.exports=function(t,r){var n=nZt(this),o=iZ(n.get),i=iZ(n.has),a=iZ(n.set),u=arguments.length>2?arguments[2]:void 0,p;if(!RL(r)&&!RL(u))throw new oZt("At least one callback required");return kL(i,n,t)?(p=kL(o,n,t),RL(r)&&(p=r(p),kL(a,n,t,p))):RL(u)&&(p=u(),kL(a,n,t,p)),p}});var XNe=M(()=>{"use strict";var iZt=re(),aZt=jL();iZt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:aZt})});var JNe=M(()=>{"use strict";var sZt=re(),lZt=jL();sZt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:lZt})});var QNe=M(()=>{"use strict";var uZt=re(),cZt=Math.min,fZt=Math.max;uZt({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){return cZt(n,fZt(r,t))}})});var e5e=M(()=>{"use strict";var pZt=re();pZt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var t5e=M(()=>{"use strict";var dZt=re(),hZt=180/Math.PI;dZt({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*hZt}})});var aZ=M((uWr,r5e)=>{"use strict";r5e.exports=Math.scale||function(t,r,n,o,i){var a=+t,u=+r,p=+n,h=+o,g=+i;return a!==a||u!==u||p!==p||h!==h||g!==g?NaN:a===1/0||a===-1/0?a:(a-u)*(g-h)/(p-u)+h}});var n5e=M(()=>{"use strict";var mZt=re(),gZt=aZ(),vZt=Y5();mZt({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,o,i){return vZt(gZt(t,r,n,o,i))}})});var o5e=M(()=>{"use strict";var yZt=re(),_Zt=OY();yZt({target:"Math",stat:!0},{f16round:_Zt})});var i5e=M(()=>{"use strict";var xZt=re();xZt({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,o){var i=t>>>0,a=r>>>0,u=n>>>0;return a+(o>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})});var a5e=M(()=>{"use strict";var bZt=re();bZt({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,u=i&n,p=o>>16,h=i>>16,g=(p*u>>>0)+(a*u>>>16);return p*h+(g>>16)+((a*h>>>0)+(g&n)>>16)}})});var s5e=M(()=>{"use strict";var wZt=re();wZt({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,o){var i=t>>>0,a=r>>>0,u=n>>>0;return a-(o>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})});var l5e=M(()=>{"use strict";var EZt=re();EZt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var u5e=M(()=>{"use strict";var SZt=re(),IZt=Math.PI/180;SZt({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*IZt}})});var c5e=M(()=>{"use strict";var TZt=re(),MZt=aZ();TZt({target:"Math",stat:!0,forced:!0},{scale:MZt})});var h5e=M(()=>{"use strict";var CZt=re(),AZt=Jt(),DZt=iH(),NZt=Pg(),OZt=qa(),f5e=ro(),p5e="Seeded Random",d5e=p5e+" Generator",LZt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",PZt=f5e.set,kZt=f5e.getterFor(d5e),RZt=TypeError,jZt=NZt(function(t){PZt(this,{type:d5e,seed:t%2147483647})},p5e,function(){var t=kZt(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return OZt((r&1073741823)/1073741823,!1)});CZt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=AZt(t).seed;if(!DZt(r))throw new RZt(LZt);return new jZt(r)}})});var m5e=M(()=>{"use strict";var qZt=re();qZt({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var x5e=M(()=>{"use strict";var zZt=re(),FZt=gt(),UZt=_i(),BZt=RangeError,VZt=TypeError,Cc=1/0,GZt=NaN,I0=Math.abs,cZ=Math.pow,g5e=FZt([].push),CT=cZ(2,1023),HZt=cZ(2,53)-1,v5e=Number.MAX_VALUE,y5e=cZ(2,971),AT={},sZ={},lZ={},uZ={},_5e={},qL=function(e,t){var r=e+t,n=t-(r-e);return{hi:r,lo:n}};zZt({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],n=0,o=uZ;switch(UZt(t,function(U){if(++n>=HZt)throw new BZt("Maximum allowed index exceeded");if(typeof U!="number")throw new VZt("Value is not a number");o!==AT&&(U!==U?o=AT:U===Cc?o=o===sZ?AT:lZ:U===-Cc?o=o===lZ?AT:sZ:(U!==0||1/U===Cc)&&(o===uZ||o===_5e)&&(o=_5e,g5e(r,U)))}),o){case AT:return GZt;case sZ:return-Cc;case lZ:return Cc;case uZ:return-0;}for(var i=[],a=0,u,p,h,g,x,b,T=0;T<r.length;T++){u=r[T];for(var A=0,L=0;L<i.length;L++){if(p=i[L],I0(u)<I0(p)&&(b=u,u=p,p=b),h=qL(u,p),g=h.hi,x=h.lo,I0(g)===Cc){var P=g===Cc?1:-1;a+=P,u=u-P*CT-P*CT,I0(u)<I0(p)&&(b=u,u=p,p=b),h=qL(u,p),g=h.hi,x=h.lo}x!==0&&(i[A++]=x),u=g}i.length=A,u!==0&&g5e(i,u)}var k=i.length-1;if(g=0,x=0,a!==0){var q=k>=0?i[k]:0;if(k--,I0(a)>1||a>0&&q>0||a<0&&q<0)return a>0?Cc:-Cc;if(h=qL(a*CT,q/2),g=h.hi,x=h.lo,x*=2,I0(2*g)===Cc)return g>0?g===CT&&x===-(y5e/2)&&k>=0&&i[k]<0?v5e:Cc:g===-CT&&x===y5e/2&&k>=0&&i[k]>0?-v5e:-Cc;x!==0&&(i[++k]=x,x=0),g*=2}for(;k>=0&&(h=qL(g,i[k--]),g=h.hi,x=h.lo,x===0););return k>=0&&(x<0&&i[k]<0||x>0&&i[k]>0)&&(p=x*2,u=g+p,p===u-g&&(g=u)),g}})});var b5e=M(()=>{"use strict";var WZt=re();WZt({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,u=i&n,p=o>>>16,h=i>>>16,g=(p*u>>>0)+(a*u>>>16);return p*h+(g>>>16)+((a*h>>>0)+(g&n)>>>16)}})});var S5e=M(()=>{"use strict";var $Zt=re(),NT=gt(),YZt=Qo(),DT="Invalid number representation",ZZt="Invalid radix",KZt=RangeError,zL=SyntaxError,XZt=TypeError,w5e=parseInt,JZt=Math.pow,E5e=/^[\d.a-z]+$/,QZt=NT("".charAt),eKt=NT(E5e.exec),tKt=NT(1 .toString),rKt=NT("".slice),nKt=NT("".split);$Zt({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1;if(typeof t!="string")throw new XZt(DT);if(!t.length)throw new zL(DT);if(QZt(t,0)==="-"&&(n=-1,t=rKt(t,1),!t.length))throw new zL(DT);var o=r===void 0?10:YZt(r);if(o<2||o>36)throw new KZt(ZZt);if(!eKt(E5e,t))throw new zL(DT);var i=nKt(t,"."),a=w5e(i[0],o);if(i.length>1&&(a+=w5e(i[1],o)/JZt(o,i[1].length)),o===10&&tKt(a,o)!==t)throw new zL(DT);return n*a}})});var I5e=M(()=>{"use strict";var oKt=re(),iKt=TL();oKt({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new iKt(t,r,n,"number",0,1)}})});var T5e=M(()=>{"use strict";yH()});var UL=M((FWr,A5e)=>{"use strict";var M5e=ro(),aKt=Pg(),FL=qa(),sKt=sn(),lKt=n0(),uKt=pn(),C5e="Object Iterator",cKt=M5e.set,fKt=M5e.getterFor(C5e);A5e.exports=aKt(function(t,r){var n=uKt(t);cKt(this,{type:C5e,mode:r,object:n,keys:lKt(n),index:0})},"Object",function(){for(var t=fKt(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,FL(void 0,!0);var n=r[t.index++],o=t.object;if(sKt(o,n)){switch(t.mode){case"keys":return FL(n,!1);case"values":return FL(o[n],!1);}return FL([n,o[n]],!1)}}})});var D5e=M(()=>{"use strict";var pKt=re(),dKt=UL();pKt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new dKt(t,"entries")}})});var N5e=M(()=>{"use strict";var hKt=re(),mKt=UL();hKt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new mKt(t,"keys")}})});var O5e=M(()=>{"use strict";var gKt=re(),vKt=UL();gKt({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new vKt(t,"values")}})});var L5e=M(()=>{"use strict";vH()});var V5e=M(()=>{"use strict";var yKt=re(),BL=er(),OT=Tr(),_Kt=Rg(),P5e=kr(),xKt=Jt(),bKt=Vs(),k5e=Kr(),wKt=oa(),EKt=Br(),VL=ki(),SKt=fo(),fZ=Tc(),R5e=ei(),hb=UH(),IKt=Nr(),j5e=ro(),TKt=IKt("observable"),pZ="Observable",q5e="Subscription",z5e="SubscriptionObserver",dZ=j5e.getterFor,hZ=j5e.set,MKt=dZ(pZ),F5e=dZ(q5e),GL=dZ(z5e),U5e=function(e){this.observer=xKt(e),this.cleanup=null,this.subscriptionObserver=null};U5e.prototype={type:q5e,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){hb(t)}}},close:function(){if(!OT){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var mZ=function(e,t){var r=hZ(this,new U5e(e)),n;OT||(this.closed=!1);try{(n=VL(e,"start"))&&BL(n,e,this)}catch(u){hb(u)}if(!r.isClosed()){var o=r.subscriptionObserver=new gZ(r);try{var i=t(o),a=i;wKt(i)||(r.cleanup=k5e(i.unsubscribe)?function(){a.unsubscribe()}:P5e(i))}catch(u){o.error(u);return}r.isClosed()&&r.clean()}};mZ.prototype=fZ({},{unsubscribe:function(){var t=F5e(this);t.isClosed()||(t.close(),t.clean())}});OT&&R5e(mZ.prototype,"closed",{configurable:!0,get:function(){return F5e(this).isClosed()}});var gZ=function(e){hZ(this,{type:z5e,subscriptionState:e}),OT||(this.closed=!1)};gZ.prototype=fZ({},{next:function(t){var r=GL(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var o=VL(n,"next");o&&BL(o,n,t)}catch(i){hb(i)}}},error:function(t){var r=GL(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var o=VL(n,"error");o?BL(o,n,t):hb(t)}catch(i){hb(i)}r.clean()}},complete:function(){var t=GL(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=VL(r,"complete");n&&BL(n,r)}catch(o){hb(o)}t.clean()}}});OT&&R5e(gZ.prototype,"closed",{configurable:!0,get:function(){return GL(this).subscriptionState.isClosed()}});var B5e=function(t){bKt(this,vZ),hZ(this,{type:pZ,subscriber:P5e(t)})},vZ=B5e.prototype;fZ(vZ,{subscribe:function(t){var r=arguments.length;return new mZ(k5e(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:EKt(t)?t:{},MKt(this).subscriber)}});SKt(vZ,TKt,function(){return this});yKt({global:!0,constructor:!0,forced:!0},{Observable:B5e});_Kt(pZ)});var H5e=M(()=>{"use strict";var CKt=re(),AKt=Fr(),DKt=er(),G5e=Jt(),NKt=Of(),OKt=Og(),LKt=ki(),PKt=_i(),kKt=Nr(),RKt=kKt("observable");CKt({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=NKt(this)?this:AKt("Observable"),n=LKt(G5e(t),RKt);if(n){var o=G5e(DKt(n,t));return o.constructor===r?o:new r(function(a){return o.subscribe(a)})}var i=OKt(t);return new r(function(a){PKt(i,function(u,p){if(a.next(u),a.closed)return p()},{IS_ITERATOR:!0,INTERRUPTED:!0}),a.complete()})}})});var $5e=M(()=>{"use strict";var jKt=re(),W5e=Fr(),qKt=Of(),zKt=W5e("Array");jKt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=qKt(this)?this:W5e("Observable"),r=arguments.length,n=zKt(r),o=0;o<r;)n[o]=arguments[o++];return new t(function(i){for(var a=0;a<r;a++)if(i.next(n[a]),i.closed)return;i.complete()})}})});var Y5e=M(()=>{"use strict";V5e();H5e();$5e()});var Z5e=M(()=>{"use strict";tW()});var K5e=M(()=>{"use strict";rW()});var X5e=M(()=>{"use strict";aW()});var J5e=M(()=>{"use strict";sW()});var Vp=M((f$r,rOe)=>{"use strict";dO();fL();var tOe=Fr(),FKt=gt(),UKt=hh(),Q5e=tOe("Map"),BKt=tOe("WeakMap"),VKt=FKt([].push),eOe=UKt("metadata"),yZ=eOe.store||(eOe.store=new BKt),LT=function(e,t,r){var n=yZ.get(e);if(!n){if(!r)return;yZ.set(e,n=new Q5e)}var o=n.get(t);if(!o){if(!r)return;n.set(t,o=new Q5e)}return o},GKt=function(e,t,r){var n=LT(t,r,!1);return n===void 0?!1:n.has(e)},HKt=function(e,t,r){var n=LT(t,r,!1);return n===void 0?void 0:n.get(e)},WKt=function(e,t,r,n){LT(r,n,!0).set(e,t)},$Kt=function(e,t){var r=LT(e,t,!1),n=[];return r&&r.forEach(function(o,i){VKt(n,i)}),n},YKt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};rOe.exports={store:yZ,getMap:LT,has:GKt,get:HKt,set:WKt,keys:$Kt,toKey:YKt}});var oOe=M(()=>{"use strict";var ZKt=re(),nOe=Vp(),KKt=Jt(),XKt=nOe.toKey,JKt=nOe.set;ZKt({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var o=arguments.length<4?void 0:XKt(arguments[3]);JKt(t,r,KKt(n),o)}})});var aOe=M(()=>{"use strict";var QKt=re(),_Z=Vp(),eXt=Jt(),tXt=_Z.toKey,rXt=_Z.getMap,iOe=_Z.store;QKt({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:tXt(arguments[2]),o=rXt(eXt(r),n,!1);if(o===void 0||!o.delete(t))return!1;if(o.size)return!0;var i=iOe.get(r);return i.delete(n),!!i.size||iOe.delete(r)}})});var lOe=M(()=>{"use strict";var nXt=re(),xZ=Vp(),oXt=Jt(),iXt=sa(),aXt=xZ.has,sXt=xZ.get,lXt=xZ.toKey,sOe=function(e,t,r){var n=aXt(e,t,r);if(n)return sXt(e,t,r);var o=iXt(t);return o!==null?sOe(e,o,r):void 0};nXt({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:lXt(arguments[2]);return sOe(t,oXt(r),n)}})});var pOe=M(()=>{"use strict";var uXt=re(),uOe=gt(),cOe=Vp(),cXt=Jt(),fXt=sa(),pXt=_L(),dXt=uOe(pXt),hXt=uOe([].concat),mXt=cOe.keys,gXt=cOe.toKey,fOe=function(e,t){var r=mXt(e,t),n=fXt(e);if(n===null)return r;var o=fOe(n,t);return o.length?r.length?dXt(hXt(r,o)):o:r};uXt({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:gXt(arguments[1]);return fOe(cXt(t),r)}})});var hOe=M(()=>{"use strict";var vXt=re(),dOe=Vp(),yXt=Jt(),_Xt=dOe.get,xXt=dOe.toKey;vXt({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:xXt(arguments[2]);return _Xt(t,yXt(r),n)}})});var gOe=M(()=>{"use strict";var bXt=re(),mOe=Vp(),wXt=Jt(),EXt=mOe.keys,SXt=mOe.toKey;bXt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:SXt(arguments[1]);return EXt(wXt(t),r)}})});var _Oe=M(()=>{"use strict";var IXt=re(),vOe=Vp(),TXt=Jt(),MXt=sa(),CXt=vOe.has,AXt=vOe.toKey,yOe=function(e,t,r){var n=CXt(e,t,r);if(n)return!0;var o=MXt(t);return o!==null?yOe(e,o,r):!1};IXt({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:AXt(arguments[2]);return yOe(t,TXt(r),n)}})});var bOe=M(()=>{"use strict";var DXt=re(),xOe=Vp(),NXt=Jt(),OXt=xOe.has,LXt=xOe.toKey;DXt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:LXt(arguments[2]);return OXt(t,NXt(r),n)}})});var EOe=M(()=>{"use strict";var PXt=re(),wOe=Vp(),kXt=Jt(),RXt=wOe.toKey,jXt=wOe.set;PXt({target:"Reflect",stat:!0},{metadata:function(t,r){return function(o,i){jXt(t,r,kXt(o),RXt(i))}}})});var PT=M((D$r,SOe)=>{"use strict";var qXt=TypeError;SOe.exports=function(e){if(typeof e=="string")return e;throw new qXt("Argument is not a string")}});var DOe=M(()=>{"use strict";var zXt=re(),kT=gt(),FXt=PT(),UXt=sn(),IOe=kI().start,BXt=h0(),VXt=Array,TOe=RegExp.escape,MOe=kT("".charAt),EZ=kT("".charCodeAt),GXt=kT(1.1.toString),HXt=kT([].join),AOe=/^[0-9a-z]/i,WXt=/^[$()*+./?[\\\]^{|}]/,$Xt=RegExp("^[!\"#%&',\\-:;<=>@`~"+BXt+"]"),bZ=kT(AOe.exec),COe={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},wZ=function(e){var t=GXt(EZ(e,0),16);return t.length<3?"\\x"+IOe(t,2,"0"):"\\u"+IOe(t,4,"0")},YXt=!TOe||TOe("ab")!=="\\x61b";zXt({target:"RegExp",stat:!0,forced:YXt},{escape:function(t){FXt(t);for(var r=t.length,n=VXt(r),o=0;o<r;o++){var i=MOe(t,o);if(o===0&&bZ(AOe,i))n[o]=wZ(i);else if(UXt(COe,i))n[o]="\\"+COe[i];else if(bZ(WXt,i))n[o]="\\"+i;else if(bZ($Xt,i))n[o]=wZ(i);else{var a=EZ(i,0);(a&63488)!==55296?n[o]=i:a>=56320||o+1>=r||(EZ(t,o+1)&64512)!==56320?n[o]=wZ(i):(n[o]=i,n[++o]=MOe(t,o))}}return HXt(n,"")}})});var NOe=M(()=>{"use strict";var ZXt=re(),KXt=ls(),XXt=za().add;ZXt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=KXt(this),r=0,n=arguments.length;r<n;r++)XXt(t,arguments[r]);return t}})});var OOe=M(()=>{"use strict";var JXt=re(),QXt=ls(),eJt=za().remove;JXt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=QXt(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=eJt(t,arguments[o]),r=r&&n;return!!r}})});var LOe=M(()=>{"use strict";MW()});var kOe=M((z$r,POe)=>{"use strict";var tJt=eu(),rJt=sn(),nJt=oa(),oJt=Nr(),iJt=u0(),aJt=oJt("iterator"),sJt=Object;POe.exports=function(e){if(nJt(e))return!1;var t=sJt(e);return t[aJt]!==void 0||"@@iterator"in t||rJt(iJt,tJt(t))}});var Xg=M((F$r,jOe)=>{"use strict";var lJt=Fr(),ROe=Kr(),uJt=kOe(),cJt=Br(),fJt=lJt("Set"),pJt=function(e){return cJt(e)&&typeof e.size=="number"&&ROe(e.has)&&ROe(e.keys)};jOe.exports=function(e){return pJt(e)?e:uJt(e)?new fJt(e):e}});var qOe=M(()=>{"use strict";var dJt=re(),hJt=er(),mJt=Xg(),gJt=TW();dJt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return hJt(gJt,this,mJt(t))}})});var zOe=M(()=>{"use strict";var vJt=re(),yJt=xo(),_Jt=ls(),xJt=ou();vJt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=_Jt(this),n=yJt(t,arguments.length>1?arguments[1]:void 0);return xJt(r,function(o){if(!n(o,o,r))return!1},!0)!==!1}})});var UOe=M(()=>{"use strict";var bJt=re(),wJt=xo(),EJt=ls(),FOe=za(),SJt=ou(),IJt=FOe.Set,TJt=FOe.add;bJt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=EJt(this),n=wJt(t,arguments.length>1?arguments[1]:void 0),o=new IJt;return SJt(r,function(i){n(i,i,r)&&TJt(o,i)}),o}})});var BOe=M(()=>{"use strict";var MJt=re(),CJt=xo(),AJt=ls(),DJt=ou();MJt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=AJt(this),n=CJt(t,arguments.length>1?arguments[1]:void 0),o=DJt(r,function(i){if(n(i,i,r))return{value:i}},!0);return o&&o.value}})});var GOe=M(()=>{"use strict";var NJt=re(),VOe=za(),OJt=TT();NJt({target:"Set",stat:!0,forced:!0},{from:OJt(VOe.Set,VOe.add,!1)})});var HOe=M(()=>{"use strict";DW()});var WOe=M(()=>{"use strict";var LJt=re(),PJt=er(),kJt=Xg(),RJt=AW();LJt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return PJt(RJt,this,kJt(t))}})});var $Oe=M(()=>{"use strict";OW()});var YOe=M(()=>{"use strict";var jJt=re(),qJt=er(),zJt=Xg(),FJt=NW();jJt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return qJt(FJt,this,zJt(t))}})});var ZOe=M(()=>{"use strict";PW()});var KOe=M(()=>{"use strict";var UJt=re(),BJt=er(),VJt=Xg(),GJt=LW();UJt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return BJt(GJt,this,VJt(t))}})});var XOe=M(()=>{"use strict";RW()});var JOe=M(()=>{"use strict";var HJt=re(),WJt=er(),$Jt=Xg(),YJt=kW();HJt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return WJt(YJt,this,$Jt(t))}})});var eLe=M(()=>{"use strict";var ZJt=re(),QOe=gt(),KJt=ls(),XJt=ou(),JJt=Hr(),QJt=QOe([].join),eQt=QOe([].push);ZJt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=KJt(this),n=t===void 0?",":JJt(t),o=[];return XJt(r,function(i){eQt(o,i)}),QJt(o,n)}})});var rLe=M(()=>{"use strict";var tQt=re(),rQt=xo(),nQt=ls(),tLe=za(),oQt=ou(),iQt=tLe.Set,aQt=tLe.add;tQt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=nQt(this),n=rQt(t,arguments.length>1?arguments[1]:void 0),o=new iQt;return oQt(r,function(i){aQt(o,n(i,i,r))}),o}})});var oLe=M(()=>{"use strict";var sQt=re(),nLe=za(),lQt=MT();sQt({target:"Set",stat:!0,forced:!0},{of:lQt(nLe.Set,nLe.add,!1)})});var iLe=M(()=>{"use strict";var uQt=re(),cQt=kr(),fQt=ls(),pQt=ou(),dQt=TypeError;uQt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=fQt(this),n=arguments.length<2,o=n?void 0:arguments[1];if(cQt(t),pQt(r,function(i){n?(n=!1,o=i):o=t(o,i,i,r)}),n)throw new dQt("Reduce of empty set with no initial value");return o}})});var aLe=M(()=>{"use strict";var hQt=re(),mQt=xo(),gQt=ls(),vQt=ou();hQt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=gQt(this),n=mQt(t,arguments.length>1?arguments[1]:void 0);return vQt(r,function(o){if(n(o,o,r))return!0},!0)===!0}})});var sLe=M(()=>{"use strict";zW()});var lLe=M(()=>{"use strict";var yQt=re(),_Qt=er(),xQt=Xg(),bQt=qW();yQt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return _Qt(bQt,this,xQt(t))}})});var uLe=M(()=>{"use strict";UW()});var cLe=M(()=>{"use strict";var wQt=re(),EQt=er(),SQt=Xg(),IQt=FW();wQt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return EQt(IQt,this,SQt(t))}})});var fLe=M(()=>{"use strict";var TQt=re(),MQt=x0().charAt,CQt=Go(),AQt=Qo(),DQt=Hr();TQt({target:"String",proto:!0,forced:!0},{at:function(t){var r=DQt(CQt(this)),n=r.length,o=AQt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:MQt(r,i)}})});var SZ=M((LYr,mLe)=>{"use strict";var hLe=gt(),NQt=ia(),pLe=Hr(),OQt=Tn(),LQt=TypeError,dLe=hLe([].push),PQt=hLe([].join);mLe.exports=function(t){var r=NQt(t),n=OQt(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){var u=r[a++];if(u===void 0)throw new LQt("Incorrect template");if(dLe(i,pLe(u)),a===n)return PQt(i,"");a<o&&dLe(i,pLe(arguments[a]))}}});var gLe=M(()=>{"use strict";var kQt=re(),RQt=SZ();kQt({target:"String",stat:!0,forced:!0},{cooked:RQt})});var bLe=M(()=>{"use strict";var jQt=re(),qQt=Pg(),vLe=qa(),zQt=Go(),FQt=Hr(),yLe=ro(),_Le=x0(),UQt=_Le.codeAt,BQt=_Le.charAt,xLe="String Iterator",VQt=yLe.set,GQt=yLe.getterFor(xLe),HQt=qQt(function(t){VQt(this,{type:xLe,string:t,index:0})},"String",function(){var t=GQt(this),r=t.string,n=t.index,o;return n>=r.length?vLe(void 0,!0):(o=BQt(r,n),t.index+=o.length,vLe({codePoint:UQt(o,0),position:n},!1))});jQt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new HQt(FQt(zQt(this)))}})});var Ch=M((qYr,wLe)=>{"use strict";var HL=gt(),WL=WeakMap.prototype;wLe.exports={WeakMap,set:HL(WL.set),get:HL(WL.get),has:HL(WL.has),remove:HL(WL.delete)}});var NLe=M((zYr,DLe)=>{"use strict";var WQt=Fr(),$L=gt(),$Qt=String.fromCharCode,YQt=WQt("String","fromCodePoint"),IZ=$L("".charAt),CLe=$L("".charCodeAt),ELe=$L("".indexOf),SLe=$L("".slice),MZ=48,ALe=57,ILe=97,ZQt=102,TLe=65,KQt=70,MLe=function(e,t){var r=CLe(e,t);return r>=MZ&&r<=ALe},TZ=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var o=XQt(CLe(e,t));if(o===-1)return-1;n=n*16+o}return n},XQt=function(e){return e>=MZ&&e<=ALe?e-MZ:e>=ILe&&e<=ZQt?e-ILe+10:e>=TLe&&e<=KQt?e-TLe+10:-1};DLe.exports=function(e){for(var t="",r=0,n=0,o;(n=ELe(e,"\\",n))>-1;){if(t+=SLe(e,r,n),++n===e.length)return;var i=IZ(e,n++);switch(i){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&IZ(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(MLe(e,n))return;t+="\0";break;case"x":if(o=TZ(e,n,n+2),o===-1)return;n+=2,t+=$Qt(o);break;case"u":if(n<e.length&&IZ(e,n)==="{"){var a=ELe(e,"}",++n);if(a===-1)return;o=TZ(e,n,a),n=a+1}else o=TZ(e,n,n+4),n+=4;if(o===-1||o>1114111)return;t+=YQt(o);break;default:if(MLe(i,0))return;t+=i;}r=n}return t+SLe(e,r)}});var ULe=M(()=>{"use strict";var JQt=Ih(),QQt=re(),eer=fI(),YL=gt(),RLe=Bs(),jLe=Jt(),ter=pn(),rer=Kr(),ner=Tn(),oer=Lo().f,ier=tu(),ZL=Ch(),aer=SZ(),ser=NLe(),qLe=h0(),CZ=new ZL.WeakMap,ler=ZL.get,uer=ZL.has,cer=ZL.set,AZ=Array,RT=TypeError,OLe=Object.freeze||Object,fer=Object.isFrozen,per=Math.min,LLe=YL("".charAt),zLe=YL("".slice),der=YL("".split),PLe=YL(/./.exec),her=/([\n\u2028\u2029]|\r\n?)/g,mer=RegExp("^["+qLe+"]*"),ger=RegExp("[^"+qLe+"]"),kLe="Invalid tag",ver="Invalid opening line",yer="Invalid closing line",_er=function(e){var t=e.raw;if(JQt&&!fer(t))throw new RT("Raw template should be frozen");if(uer(CZ,t))return ler(CZ,t);var r=xer(t),n=wer(r);return oer(n,"raw",{value:OLe(r)}),OLe(n),cer(CZ,t,n),n},xer=function(e){var t=ter(e),r=ner(t),n=AZ(r),o=AZ(r),i=0,a,u,p,h;if(!r)throw new RT(kLe);for(;i<r;i++){var g=t[i];if(typeof g=="string")n[i]=der(g,her);else throw new RT(kLe)}for(i=0;i<r;i++){var x=i+1===r;if(a=n[i],i===0){if(a.length===1||a[0].length>0)throw new RT(ver);a[1]=""}if(x){if(a.length===1||PLe(ger,a[a.length-1]))throw new RT(yer);a[a.length-2]="",a[a.length-1]=""}for(var b=2;b<a.length;b+=2){var T=a[b],A=b+1===a.length&&!x,L=PLe(mer,T)[0];if(!A&&L.length===T.length){a[b]="";continue}u=ber(L,u)}}var P=u?u.length:0;for(i=0;i<r;i++){for(a=n[i],p=a[0],h=1;h<a.length;h+=2)p+=a[h]+zLe(a[h+1],P);o[i]=p}return o},ber=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=per(e.length,t.length);r<n&&LLe(e,r)===LLe(t,r);r++);return zLe(e,0,r)},wer=function(e){for(var t=0,r=e.length,n=AZ(r);t<r;t++)n[t]=ser(e[t]);return n},FLe=function(e){return eer(function(t){var r=ier(arguments);return r[0]=_er(jLe(t)),RLe(e,this,r)},"")},Eer=FLe(aer);QQt({target:"String",stat:!0,forced:!0},{dedent:function(t){return jLe(t),rer(t)?FLe(t):RLe(Eer,this,arguments)}})});var BLe=M(()=>{"use strict";GW()});var VLe=M(()=>{"use strict";JW()});var GLe=M(()=>{"use strict";l$()});var HLe=M(()=>{"use strict";m$()});var WLe=M(()=>{"use strict";var Ser=$t(),Ier=yi(),Ter=Lo().f,Mer=Ra().f,DZ=Ser.Symbol;Ier("asyncDispose");DZ&&(jT=Mer(DZ,"asyncDispose"),jT.enumerable&&jT.configurable&&jT.writable&&Ter(DZ,"asyncDispose",{value:jT.value,enumerable:!1,configurable:!1,writable:!1}));var jT});var $Le=M(()=>{"use strict";var Cer=yi();Cer("customMatcher")});var YLe=M(()=>{"use strict";var Aer=$t(),Der=yi(),Ner=Lo().f,Oer=Ra().f,NZ=Aer.Symbol;Der("dispose");NZ&&(qT=Oer(NZ,"dispose"),qT.enumerable&&qT.configurable&&qT.writable&&Ner(NZ,"dispose",{value:qT.value,enumerable:!1,configurable:!1,writable:!1}));var qT});var LZ=M((rZr,ZLe)=>{"use strict";var Ler=Fr(),Per=gt(),OZ=Ler("Symbol"),ker=OZ.keyFor,Rer=Per(OZ.prototype.valueOf);ZLe.exports=OZ.isRegisteredSymbol||function(t){try{return ker(Rer(t))!==void 0}catch(r){return!1}}});var KLe=M(()=>{"use strict";var jer=re(),qer=LZ();jer({target:"Symbol",stat:!0},{isRegisteredSymbol:qer})});var XLe=M(()=>{"use strict";var zer=re(),Fer=LZ();zer({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Fer})});var RZ=M((sZr,n3e)=>{"use strict";var Uer=hh(),t3e=Fr(),Ber=gt(),Ver=dh(),Ger=Nr(),XL=t3e("Symbol"),JLe=XL.isWellKnownSymbol,r3e=t3e("Object","getOwnPropertyNames"),Her=Ber(XL.prototype.valueOf),QLe=Uer("wks");for(KL=0,PZ=r3e(XL),e3e=PZ.length;KL<e3e;KL++)try{kZ=PZ[KL],Ver(XL[kZ])&&Ger(kZ)}catch(e){}var kZ,KL,PZ,e3e;n3e.exports=function(t){if(JLe&&JLe(t))return!0;try{for(var r=Her(t),n=0,o=r3e(QLe),i=o.length;n<i;n++)if(QLe[o[n]]==r)return!0}catch(a){}return!1}});var o3e=M(()=>{"use strict";var Wer=re(),$er=RZ();Wer({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:$er})});var i3e=M(()=>{"use strict";var Yer=re(),Zer=RZ();Yer({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Zer})});var a3e=M(()=>{"use strict";var Ker=yi();Ker("matcher")});var s3e=M(()=>{"use strict";var Xer=yi();Xer("metadata")});var l3e=M(()=>{"use strict";var Jer=yi();Jer("metadataKey")});var u3e=M(()=>{"use strict";var Qer=yi();Qer("observable")});var c3e=M(()=>{"use strict";var etr=yi();etr("patternMatch")});var f3e=M(()=>{"use strict";var ttr=yi();ttr("replaceAll")});var d3e=M(()=>{"use strict";var rtr=Fr(),ntr=YI(),otr=sY(),p3e=cn(),itr=xh(),atr=p3e.aTypedArrayConstructor,str=p3e.exportTypedArrayStaticMethod;str("fromAsync",function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(rtr("Promise"))(function(a){ntr(r),a(otr(t,o,i))}).then(function(a){return itr(atr(r),a)})},!0)});var h3e=M(()=>{"use strict";D$()});var g3e=M(()=>{"use strict";var m3e=cn(),ltr=ji().filterReject,utr=JO(),ctr=m3e.aTypedArray,ftr=m3e.exportTypedArrayMethod;ftr("filterOut",function(t){var r=ltr(ctr(this),t,arguments.length>1?arguments[1]:void 0);return utr(this,r)},!0)});var y3e=M(()=>{"use strict";var v3e=cn(),ptr=ji().filterReject,dtr=JO(),htr=v3e.aTypedArray,mtr=v3e.exportTypedArrayMethod;mtr("filterReject",function(t){var r=ptr(htr(this),t,arguments.length>1?arguments[1]:void 0);return dtr(this,r)},!0)});var _3e=M(()=>{"use strict";N$()});var x3e=M(()=>{"use strict";O$()});var b3e=M(()=>{"use strict";var jZ=cn(),gtr=vL(),vtr=jZ.aTypedArray,ytr=jZ.getTypedArrayConstructor,_tr=jZ.exportTypedArrayMethod;_tr("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return gtr(vtr(this),t,r,ytr)},!0)});var w3e=M(()=>{"use strict";W$()});var E3e=M(()=>{"use strict";$$()});var S3e=M(()=>{"use strict";var qZ=cn(),xtr=Tn(),btr=$O(),wtr=Df(),Etr=uT(),Str=Qo(),Itr=Tt(),Ttr=qZ.aTypedArray,Mtr=qZ.getTypedArrayConstructor,Ctr=qZ.exportTypedArrayMethod,Atr=Math.max,Dtr=Math.min,Ntr=!Itr(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});Ctr("toSpliced",function(t,r){var n=Ttr(this),o=Mtr(n),i=xtr(n),a=wtr(t,i),u=arguments.length,p=0,h,g,x,b,T,A,L;if(u===0)h=g=0;else if(u===1)h=0,g=i-a;else if(g=Dtr(Atr(Str(r),0),i-a),h=u-2,h){b=new o(h),x=btr(b);for(var P=2;P<u;P++)T=arguments[P],b[P-2]=x?Etr(T):+T}for(A=i+h-g,L=new o(A);p<a;p++)L[p]=n[p];for(;p<a+h;p++)L[p]=b[p-a];for(;p<A;p++)L[p]=n[p+g-h];return L},!Ntr)});var I3e=M(()=>{"use strict";var Otr=gt(),zZ=cn(),Ltr=xh(),Ptr=_L(),ktr=zZ.aTypedArray,Rtr=zZ.getTypedArrayConstructor,jtr=zZ.exportTypedArrayMethod,qtr=Otr(Ptr);jtr("uniqueBy",function(t){return ktr(this),Ltr(Rtr(this),qtr(this,t))},!0)});var T3e=M(()=>{"use strict";Z$()});var FZ=M((YZr,M3e)=>{"use strict";var ztr=Br(),Ftr=String,Utr=TypeError;M3e.exports=function(e){if(e===void 0||ztr(e))return e;throw new Utr(Ftr(e)+" is not an object or undefined")}});var zT=M((ZZr,O3e)=>{"use strict";var N3e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",C3e=N3e+"+/",A3e=N3e+"-_",D3e=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};O3e.exports={i2c:C3e,c2i:D3e(C3e),i2cUrl:A3e,c2iUrl:D3e(A3e)}});var UZ=M((KZr,L3e)=>{"use strict";var Btr=TypeError;L3e.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new Btr("Incorrect `alphabet` option")}});var HZ=M((XZr,R3e)=>{"use strict";var P3e=$t(),Vtr=gt(),Gtr=FZ(),Htr=PT(),Wtr=sn(),k3e=zT(),$tr=UZ(),Ytr=qx(),Ztr=k3e.c2i,Ktr=k3e.c2iUrl,Jg=P3e.SyntaxError,Xtr=P3e.TypeError,T0=Vtr("".charAt),BZ=function(e,t){for(var r=e.length;t<r;t++){var n=T0(e,t);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return t},VZ=function(e,t,r){var n=e.length;n<4&&(e+=n===2?"AA":"A");var o=(t[T0(e,0)]<<18)+(t[T0(e,1)]<<12)+(t[T0(e,2)]<<6)+t[T0(e,3)],i=[o>>16&255,o>>8&255,o&255];if(n===2){if(r&&i[1]!==0)throw new Jg("Extra bits");return[i[0]]}if(n===3){if(r&&i[2]!==0)throw new Jg("Extra bits");return[i[0],i[1]]}return i},GZ=function(e,t,r){for(var n=t.length,o=0;o<n;o++)e[r+o]=t[o];return r+n};R3e.exports=function(e,t,r,n){Htr(e),Gtr(t);var o=$tr(t)==="base64"?Ztr:Ktr,i=t?t.lastChunkHandling:void 0;if(i===void 0&&(i="loose"),i!=="loose"&&i!=="strict"&&i!=="stop-before-partial")throw new Xtr("Incorrect `lastChunkHandling` option");r&&Ytr(r.buffer);var a=r||[],u=0,p=0,h="",g=0;if(n)for(;;){if(g=BZ(e,g),g===e.length){if(h.length>0){if(i==="stop-before-partial")break;if(i==="loose"){if(h.length===1)throw new Jg("Malformed padding: exactly one additional character");u=GZ(a,VZ(h,o,!1),u)}else throw new Jg("Missing padding")}p=e.length;break}var x=T0(e,g);if(++g,x==="="){if(h.length<2)throw new Jg("Padding is too early");if(g=BZ(e,g),h.length===2){if(g===e.length){if(i==="stop-before-partial")break;throw new Jg("Malformed padding: only one =")}T0(e,g)==="="&&(++g,g=BZ(e,g))}if(g<e.length)throw new Jg("Unexpected character after padding");u=GZ(a,VZ(h,o,i==="strict"),u),p=e.length;break}if(!Wtr(o,x))throw new Jg("Unexpected character");var b=n-u;if(b===1&&h.length===2||b===2&&h.length===3||(h+=x,h.length===4&&(u=GZ(a,VZ(h,o,!1),u),h="",p=g,u===n)))break}return{bytes:a,read:p,written:u}}});var q3e=M(()=>{"use strict";var Jtr=re(),Qtr=$t(),err=xh(),trr=HZ(),j3e=Qtr.Uint8Array;j3e&&Jtr({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=trr(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return err(j3e,r.bytes)}})});var $Z=M((eKr,B3e)=>{"use strict";var WZ=$t(),F3e=gt(),rrr=WZ.Uint8Array,z3e=WZ.SyntaxError,nrr=WZ.parseInt,orr=Math.min,U3e=/[^\da-f]/i,irr=F3e(U3e.exec),arr=F3e("".slice);B3e.exports=function(e,t){var r=e.length;if(r%2!==0)throw new z3e("String should be an even number of characters");for(var n=t?orr(t.length,r/2):r/2,o=t||new rrr(n),i=0,a=0;a<n;){var u=arr(e,i,i+=2);if(irr(U3e,u))throw new z3e("String should only contain hex characters");o[a++]=nrr(u,16)}return{bytes:o,read:i}}});var V3e=M(()=>{"use strict";var srr=re(),lrr=$t(),urr=PT(),crr=$Z();lrr.Uint8Array&&srr({target:"Uint8Array",stat:!0},{fromHex:function(t){return crr(urr(t)).bytes}})});var FT=M((nKr,G3e)=>{"use strict";var frr=eu(),prr=TypeError;G3e.exports=function(e){if(frr(e)==="Uint8Array")return e;throw new prr("Argument is not an Uint8Array")}});var H3e=M(()=>{"use strict";var drr=re(),hrr=$t(),mrr=HZ(),grr=FT(),vrr=hrr.Uint8Array;vrr&&drr({target:"Uint8Array",proto:!0},{setFromBase64:function(t){grr(this);var r=mrr(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var W3e=M(()=>{"use strict";var yrr=re(),_rr=$t(),xrr=PT(),brr=FT(),wrr=qx(),Err=$Z();_rr.Uint8Array&&yrr({target:"Uint8Array",proto:!0},{setFromHex:function(t){brr(this),xrr(t),wrr(this.buffer);var r=Err(t,this).read;return{read:r,written:r/2}}})});var Y3e=M(()=>{"use strict";var Srr=re(),Irr=$t(),Trr=gt(),Mrr=FZ(),Crr=FT(),Arr=qx(),$3e=zT(),Drr=UZ(),Nrr=$3e.i2c,Orr=$3e.i2cUrl,Lrr=Trr("".charAt);Irr.Uint8Array&&Srr({target:"Uint8Array",proto:!0},{toBase64:function(){var t=Crr(this),r=arguments.length?Mrr(arguments[0]):void 0,n=Drr(r)==="base64"?Nrr:Orr,o=!!r&&!!r.omitPadding;Arr(this.buffer);for(var i="",a=0,u=t.length,p,h=function(g){return Lrr(n,p>>6*g&63)};a+2<u;a+=3)p=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i+=h(3)+h(2)+h(1)+h(0);return a+2===u?(p=(t[a]<<16)+(t[a+1]<<8),i+=h(3)+h(2)+h(1)+(o?"":"=")):a+1===u&&(p=t[a]<<16,i+=h(3)+h(2)+(o?"":"==")),i}})});var Z3e=M(()=>{"use strict";var Prr=re(),krr=$t(),Rrr=gt(),jrr=FT(),qrr=qx(),zrr=Rrr(1 .toString);krr.Uint8Array&&Prr({target:"Uint8Array",proto:!0},{toHex:function(){jrr(this),qrr(this.buffer);for(var t="",r=0,n=this.length;r<n;r++){var o=zrr(this[r],16);t+=o.length===1?"0"+o:o}return t}})});var UT=M((pKr,K3e)=>{"use strict";var Frr=Ch().has;K3e.exports=function(e){return Frr(e),e}});var X3e=M(()=>{"use strict";var Urr=re(),Brr=UT(),Vrr=Ch().remove;Urr({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Brr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=Vrr(t,arguments[o]),r=r&&n;return!!r}})});var Q3e=M(()=>{"use strict";var Grr=re(),J3e=Ch(),Hrr=TT();Grr({target:"WeakMap",stat:!0,forced:!0},{from:Hrr(J3e.WeakMap,J3e.set,!0)})});var tPe=M(()=>{"use strict";var Wrr=re(),ePe=Ch(),$rr=MT();Wrr({target:"WeakMap",stat:!0,forced:!0},{of:$rr(ePe.WeakMap,ePe.set,!0)})});var nPe=M(()=>{"use strict";var Yrr=re(),Zrr=UT(),YZ=Ch(),Krr=YZ.get,Xrr=YZ.has,rPe=YZ.set;Yrr({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=Zrr(this),o,i;return Xrr(n,t)?(o=Krr(n,t),"update"in r&&(o=r.update(o,t,n),rPe(n,t,o)),o):(i=r.insert(t,n),rPe(n,t,i),i)}})});var oPe=M(()=>{"use strict";var Jrr=re(),Qrr=UT(),ZZ=Ch(),enr=ZZ.get,tnr=ZZ.has,rnr=ZZ.set;Jrr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return tnr(Qrr(this),t)?enr(this,t):(rnr(this,t,r),r)}})});var aPe=M(()=>{"use strict";var nnr=re(),onr=kr(),inr=UT(),KZ=Ch(),anr=KZ.get,snr=KZ.has,iPe=KZ.set;nnr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(inr(this),onr(r),snr(this,t))return anr(this,t);iPe(this,t);var n=r(t);return iPe(this,t,n),n}})});var sPe=M(()=>{"use strict";var lnr=re(),unr=jL();lnr({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:unr})});var mb=M((MKr,lPe)=>{"use strict";var XZ=gt(),JZ=WeakSet.prototype;lPe.exports={WeakSet,add:XZ(JZ.add),has:XZ(JZ.has),remove:XZ(JZ.delete)}});var QZ=M((CKr,uPe)=>{"use strict";var cnr=mb().has;uPe.exports=function(e){return cnr(e),e}});var cPe=M(()=>{"use strict";var fnr=re(),pnr=QZ(),dnr=mb().add;fnr({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=pnr(this),r=0,n=arguments.length;r<n;r++)dnr(t,arguments[r]);return t}})});var fPe=M(()=>{"use strict";var hnr=re(),mnr=QZ(),gnr=mb().remove;hnr({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=mnr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=gnr(t,arguments[o]),r=r&&n;return!!r}})});var dPe=M(()=>{"use strict";var vnr=re(),pPe=mb(),ynr=TT();vnr({target:"WeakSet",stat:!0,forced:!0},{from:ynr(pPe.WeakSet,pPe.add,!1)})});var mPe=M(()=>{"use strict";var _nr=re(),hPe=mb(),xnr=MT();_nr({target:"WeakSet",stat:!0,forced:!0},{of:xnr(hPe.WeakSet,hPe.add,!1)})});var wPe=M(()=>{"use strict";var bnr=re(),wnr=$t(),yPe=Fr(),eK=gt(),Enr=er(),JL=Tt(),Snr=Hr(),Inr=Hu(),gPe=zT().c2i,_Pe=/[^\d+/a-z]/i,Tnr=/[\t\n\f\r ]+/g,Mnr=/[=]{1,2}$/,M0=yPe("atob"),Cnr=String.fromCharCode,Anr=eK("".charAt),vPe=eK("".replace),Dnr=eK(_Pe.exec),gb=!!M0&&!JL(function(){return M0("aGk=")!=="hi"}),xPe=gb&&JL(function(){return M0(" ")!==""}),bPe=gb&&!JL(function(){M0("a")}),Nnr=gb&&!JL(function(){M0()}),Onr=gb&&M0.length!==1,Lnr=!gb||xPe||bPe||Nnr||Onr;bnr({global:!0,bind:!0,enumerable:!0,forced:Lnr},{atob:function(t){if(Inr(arguments.length,1),gb&&!xPe&&!bPe)return Enr(M0,wnr,t);var r=vPe(Snr(t),Tnr,""),n="",o=0,i=0,a,u,p;if(r.length%4===0&&(r=vPe(r,Mnr,"")),a=r.length,a%4===1||Dnr(_Pe,r))throw new(yPe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;o<a;)u=Anr(r,o++),p=i%4?p*64+gPe[u]:gPe[u],i++%4&&(n+=Cnr(255&p>>(-2*i&6)));return n}})});var MPe=M(()=>{"use strict";var Pnr=re(),knr=$t(),IPe=Fr(),TPe=gt(),Rnr=er(),tK=Tt(),EPe=Hr(),jnr=Hu(),qnr=zT().i2c,vb=IPe("btoa"),SPe=TPe("".charAt),znr=TPe("".charCodeAt),BT=!!vb&&!tK(function(){return vb("hi")!=="aGk="}),Fnr=BT&&!tK(function(){vb()}),Unr=BT&&tK(function(){return vb(null)!=="bnVsbA=="}),Bnr=BT&&vb.length!==1;Pnr({global:!0,bind:!0,enumerable:!0,forced:!BT||Fnr||Unr||Bnr},{btoa:function(t){if(jnr(arguments.length,1),BT)return Rnr(vb,knr,EPe(t));for(var r=EPe(t),n="",o=0,i=qnr,a,u;SPe(r,o)||(i="=",o%1);){if(u=znr(r,o+=3/4),u>255)throw new(IPe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a=a<<8|u,n+=SPe(i,63&a>>8-o%1*8)}return n}})});var rK=M((UKr,CPe)=>{"use strict";CPe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var oK=M((BKr,DPe)=>{"use strict";var Vnr=sI(),nK=Vnr("span").classList,APe=nK&&nK.constructor&&nK.constructor.prototype;DPe.exports=APe===Object.prototype?void 0:APe});var PPe=M(()=>{"use strict";var NPe=$t(),OPe=rK(),Gnr=oK(),iK=oV(),Hnr=aa(),LPe=function(e){if(e&&e.forEach!==iK)try{Hnr(e,"forEach",iK)}catch(t){e.forEach=iK}};for(QL in OPe)OPe[QL]&&LPe(NPe[QL]&&NPe[QL].prototype);var QL;LPe(Gnr)});var zPe=M(()=>{"use strict";var kPe=$t(),jPe=rK(),Wnr=oK(),VT=MI(),RPe=aa(),$nr=bl(),Ynr=Nr(),aK=Ynr("iterator"),sK=VT.values,qPe=function(e,t){if(e){if(e[aK]!==sK)try{RPe(e,aK,sK)}catch(n){e[aK]=sK}if($nr(e,t,!0),jPe[t]){for(var r in VT)if(e[r]!==VT[r])try{RPe(e,r,VT[r])}catch(n){e[r]=VT[r]}}}};for(e3 in jPe)qPe(kPe[e3]&&kPe[e3].prototype,e3);var e3;qPe(Wnr,"DOMTokenList")});var lK=M(($Kr,FPe)=>{"use strict";FPe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var XPe=M(()=>{"use strict";var Znr=re(),n3=Fr(),Knr=ZV(),hK=Tt(),Xnr=Ri(),mK=Jl(),o3=Lo().f,Jnr=fo(),t3=ei(),r3=sn(),Qnr=Vs(),eor=Jt(),VPe=UB(),UPe=s0(),yb=lK(),tor=M5(),GPe=ro(),gK=Tr(),HPe=fn(),_b="DOMException",dK="DATA_CLONE_ERR",a3=n3("Error"),Ah=n3(_b)||function(){try{var e=n3("MessageChannel")||Knr("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===dK&&t.code===25)return t.constructor}}(),ror=Ah&&Ah.prototype,WPe=a3.prototype,nor=GPe.set,oor=GPe.getterFor(_b),ior="stack"in new a3(_b),$Pe=function(e){return r3(yb,e)&&yb[e].m?yb[e].c:0},vK=function(){Qnr(this,HT);var t=arguments.length,r=UPe(t<1?void 0:arguments[0]),n=UPe(t<2?void 0:arguments[1],"Error"),o=$Pe(n);if(nor(this,{type:_b,name:n,message:r,code:o}),gK||(this.name=n,this.message=r,this.code=o),ior){var i=new a3(r);i.name=_b,o3(this,"stack",mK(1,tor(i.stack,1)))}},HT=vK.prototype=Xnr(WPe),YPe=function(e){return{enumerable:!0,configurable:!0,get:e}},uK=function(e){return YPe(function(){return oor(this)[e]})};gK&&(t3(HT,"code",uK("code")),t3(HT,"message",uK("message")),t3(HT,"name",uK("name")));o3(HT,"constructor",mK(1,vK));var s3=hK(function(){return!(new Ah instanceof a3)}),ZPe=s3||hK(function(){return WPe.toString!==VPe||String(new Ah(1,2))!=="2: 1"}),KPe=s3||hK(function(){return new Ah(1,"DataCloneError").code!==25}),aor=s3||Ah[dK]!==25||ror[dK]!==25,BPe=HPe?ZPe||KPe||aor:s3;Znr({global:!0,constructor:!0,forced:BPe},{DOMException:BPe?vK:Ah});var WT=n3(_b),i3=WT.prototype;ZPe&&(HPe||Ah===WT)&&Jnr(i3,"toString",VPe);KPe&&gK&&Ah===WT&&t3(i3,"code",YPe(function(){return $Pe(eor(this).name)}));for(cK in yb)r3(yb,cK)&&(fK=yb[cK],GT=fK.s,pK=mK(6,fK.c),r3(WT,GT)||o3(WT,GT,pK),r3(i3,GT)||o3(i3,GT,pK));var fK,GT,pK,cK});var oke=M(()=>{"use strict";var sor=re(),lor=$t(),IK=Fr(),EK=Jl(),SK=Lo().f,JPe=sn(),uor=Vs(),cor=Ng(),QPe=s0(),yK=lK(),por=M5(),dor=Tr(),rke=fn(),YT="DOMException",nke=IK("Error"),ZT=IK(YT),TK=function(){uor(this,hor);var t=arguments.length,r=QPe(t<1?void 0:arguments[0]),n=QPe(t<2?void 0:arguments[1],"Error"),o=new ZT(r,n),i=new nke(r);return i.name=YT,SK(o,"stack",EK(1,por(i.stack,1))),cor(o,this,TK),o},hor=TK.prototype=ZT.prototype,mor="stack"in new nke(YT),gor="stack"in new ZT(1,2),_K=ZT&&dor&&Object.getOwnPropertyDescriptor(lor,YT),vor=!!_K&&!(_K.writable&&_K.configurable),eke=mor&&!vor&&!gor;sor({global:!0,constructor:!0,forced:rke||eke},{DOMException:eke?TK:ZT});var $T=IK(YT),tke=$T.prototype;if(tke.constructor!==$T){rke||SK(tke,"constructor",EK(1,$T));for(xK in yK)JPe(yK,xK)&&(bK=yK[xK],wK=bK.s,JPe($T,wK)||SK($T,wK,EK(6,bK.c)))}var bK,wK,xK});var ake=M(()=>{"use strict";var yor=Fr(),_or=bl(),ike="DOMException";_or(yor(ike),ike)});var lke=M(()=>{"use strict";var xor=re(),bor=$t(),ske=JI().clear;xor({global:!0,bind:!0,enumerable:!0,forced:bor.clearImmediate!==ske},{clearImmediate:ske})});var l3=M((rXr,cke)=>{"use strict";var uke=$t(),wor=Bs(),Eor=Kr(),Sor=DI(),Ior=Mf(),Tor=tu(),Mor=Hu(),Cor=uke.Function,Aor=/MSIE .\./.test(Ior)||Sor==="BUN"&&function(){var e=uke.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();cke.exports=function(e,t){var r=t?2:1;return Aor?function(n,o){var i=Mor(arguments.length,1)>r,a=Eor(n)?n:Cor(n),u=i?Tor(arguments,r):[],p=i?function(){wor(a,this,u)}:a;return t?e(p,o):e(p)}:e}});var hke=M(()=>{"use strict";var Dor=re(),dke=$t(),fke=JI().set,Nor=l3(),pke=dke.setImmediate?Nor(fke,!1):fke;Dor({global:!0,bind:!0,enumerable:!0,forced:dke.setImmediate!==pke},{setImmediate:pke})});var mke=M(()=>{"use strict";lke();hke()});var gke=M(()=>{"use strict";var Oor=re(),Lor=$t(),Por=FH(),kor=kr(),Ror=Hu(),jor=Tt(),qor=Tr(),zor=jor(function(){return qor&&Object.getOwnPropertyDescriptor(Lor,"queueMicrotask").value.length!==1});Oor({global:!0,enumerable:!0,dontCallGetSet:!0,forced:zor},{queueMicrotask:function(t){Ror(arguments.length,1),Por(kor(t))}})});var yke=M(()=>{"use strict";var For=re(),Qg=$t(),Uor=ei(),Bor=Tr(),Vor=TypeError,Gor=Object.defineProperty,vke=Qg.self!==Qg;try{Bor?(u3=Object.getOwnPropertyDescriptor(Qg,"self"),(vke||!u3||!u3.get||!u3.enumerable)&&Uor(Qg,"self",{get:function(){return Qg},set:function(t){if(this!==Qg)throw new Vor("Illegal invocation");Gor(Qg,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):For({global:!0,simple:!0,forced:vke},{self:Qg})}catch(e){}var u3});var Ake=M(()=>{"use strict";var Hor=fn(),Wor=re(),ps=$t(),XT=Fr(),QT=gt(),OK=Tt(),$or=Mg(),bb=Kr(),Yor=Of(),Zor=oa(),h3=Br(),Kor=dh(),Xor=_i(),bke=Jt(),p3=eu(),Jor=sn(),Qor=Sc(),MK=aa(),c3=Tn(),eir=Hu(),tir=Xx(),m3=_a(),LK=za(),rir=ou(),_ke=rG(),nir=jB(),PK=aO(),KT=ps.Object,oir=ps.Array,wke=ps.Date,Eke=ps.Error,iir=ps.TypeError,air=ps.PerformanceMark,C0=XT("DOMException"),DK=m3.Map,kK=m3.has,Ske=m3.get,d3=m3.set,Ike=LK.Set,Tke=LK.add,sir=LK.has,lir=XT("Object","keys"),uir=QT([].push),cir=QT((!0).valueOf),fir=QT(1 .valueOf),pir=QT("".valueOf),dir=QT(wke.prototype.getTime),NK=$or("structuredClone"),JT="DataCloneError",f3="Transferring",Mke=function(e){return!OK(function(){var t=new ps.Set([7]),r=e(t),n=e(KT(7));return r===t||!r.has(7)||!h3(n)||+n!=7})&&e},xke=function(e,t){return!OK(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},hir=function(e){return!OK(function(){var t=e(new ps.AggregateError([1],NK,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==NK||t.cause!==3})},xb=ps.structuredClone,mir=Hor||!xke(xb,Eke)||!xke(xb,C0)||!hir(xb),gir=!xb&&Mke(function(e){return new air(NK,{detail:e}).detail}),Dh=Mke(xb)||gir,CK=function(e){throw new C0("Uncloneable type: "+e,JT)},su=function(e,t){throw new C0((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",JT)},AK=function(e,t){return Dh||su(t),Dh(e)},vir=function(){var e;try{e=new ps.DataTransfer}catch(t){try{e=new ps.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},Cke=function(e,t,r){if(kK(t,e))return Ske(t,e);var n=r||p3(e),o,i,a,u,p,h;if(n==="SharedArrayBuffer")Dh?o=Dh(e):o=e;else{var g=ps.DataView;!g&&!bb(e.slice)&&su("ArrayBuffer");try{if(bb(e.slice)&&!e.resizable)o=e.slice(0);else for(i=e.byteLength,a=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,o=new ArrayBuffer(i,a),u=new g(e),p=new g(o),h=0;h<i;h++)p.setUint8(h,u.getUint8(h))}catch(x){throw new C0("ArrayBuffer is detached",JT)}}return d3(t,e,o),o},yir=function(e,t,r,n,o){var i=ps[t];return h3(i)||su(t),new i(Cke(e.buffer,o),r,n)},fs=function(e,t){if(Kor(e)&&CK("Symbol"),!h3(e))return e;if(t){if(kK(t,e))return Ske(t,e)}else t=new DK;var r=p3(e),n,o,i,a,u,p,h,g;switch(r){case"Array":i=oir(c3(e));break;case"Object":i={};break;case"Map":i=new DK;break;case"Set":i=new Ike;break;case"RegExp":i=new RegExp(e.source,tir(e));break;case"Error":switch(o=e.name,o){case"AggregateError":i=new(XT(o))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(XT(o));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(XT("WebAssembly",o));break;default:i=new Eke;}break;case"DOMException":i=new C0(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=Cke(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":p=r==="DataView"?e.byteLength:e.length,i=yir(e,r,e.byteOffset,p,t);break;case"DOMQuad":try{i=new DOMQuad(fs(e.p1,t),fs(e.p2,t),fs(e.p3,t),fs(e.p4,t))}catch(x){i=AK(e,r)}break;case"File":if(Dh)try{i=Dh(e),p3(i)!==r&&(i=void 0)}catch(x){}if(!i)try{i=new File([e],e.name,e)}catch(x){}i||su(r);break;case"FileList":if(a=vir(),a){for(u=0,p=c3(e);u<p;u++)a.items.add(fs(e[u],t));i=a.files}else i=AK(e,r);break;case"ImageData":try{i=new ImageData(fs(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(x){i=AK(e,r)}break;default:if(Dh)i=Dh(e);else switch(r){case"BigInt":i=KT(e.valueOf());break;case"Boolean":i=KT(cir(e));break;case"Number":i=KT(fir(e));break;case"String":i=KT(pir(e));break;case"Date":i=new wke(dir(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(x){su(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=ps[r];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(x){su(r)}break;case"DOMRect":case"DOMRectReadOnly":n=ps[r];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(x){su(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=ps[r];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(x){su(r)}break;case"AudioData":case"VideoFrame":bb(e.clone)||su(r);try{i=e.clone()}catch(x){CK(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":su(r);default:CK(r);}}switch(d3(t,e,i),r){case"Array":case"Object":for(h=lir(e),u=0,p=c3(h);u<p;u++)g=h[u],Qor(i,g,fs(e[g],t));break;case"Map":e.forEach(function(x,b){d3(i,fs(b,t),fs(x,t))});break;case"Set":e.forEach(function(x){Tke(i,fs(x,t))});break;case"Error":MK(i,"message",fs(e.message,t)),Jor(e,"cause")&&MK(i,"cause",fs(e.cause,t)),o==="AggregateError"?i.errors=fs(e.errors,t):o==="SuppressedError"&&(i.error=fs(e.error,t),i.suppressed=fs(e.suppressed,t));case"DOMException":nir&&MK(i,"stack",fs(e.stack,t));}return i},_ir=function(e,t){if(!h3(e))throw new iir("Transfer option cannot be converted to a sequence");var r=[];Xor(e,function(b){uir(r,bke(b))});for(var n=0,o=c3(r),i=new Ike,a,u,p,h,g,x;n<o;){if(a=r[n++],u=p3(a),u==="ArrayBuffer"?sir(i,a):kK(t,a))throw new C0("Duplicate transferable",JT);if(u==="ArrayBuffer"){Tke(i,a);continue}if(PK)h=xb(a,{transfer:[a]});else switch(u){case"ImageBitmap":p=ps.OffscreenCanvas,Yor(p)||su(u,f3);try{g=new p(a.width,a.height),x=g.getContext("bitmaprenderer"),x.transferFromImageBitmap(a),h=g.transferToImageBitmap()}catch(b){}break;case"AudioData":case"VideoFrame":(!bb(a.clone)||!bb(a.close))&&su(u,f3);try{h=a.clone(),a.close()}catch(b){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":su(u,f3);}if(h===void 0)throw new C0("This object cannot be transferred: "+u,JT);d3(t,a,h)}return i},xir=function(e){rir(e,function(t){PK?Dh(t,{transfer:[t]}):bb(t.transfer)?t.transfer():_ke?_ke(t):su("ArrayBuffer",f3)})};Wor({global:!0,enumerable:!0,sham:!PK,forced:mir},{structuredClone:function(t){var r=eir(arguments.length,1)>1&&!Zor(arguments[1])?bke(arguments[1]):void 0,n=r?r.transfer:void 0,o,i;n!==void 0&&(o=new DK,i=_ir(n,o));var a=fs(t,o);return i&&xir(i),a}})});var Oke=M(()=>{"use strict";var bir=re(),Nke=$t(),wir=l3(),Dke=wir(Nke.setInterval,!0);bir({global:!0,bind:!0,forced:Nke.setInterval!==Dke},{setInterval:Dke})});var kke=M(()=>{"use strict";var Eir=re(),Pke=$t(),Sir=l3(),Lke=Sir(Pke.setTimeout,!0);Eir({global:!0,bind:!0,forced:Pke.setTimeout!==Lke},{setTimeout:Lke})});var Rke=M(()=>{"use strict";Oke();kke()});var eM=M((_Xr,qke)=>{"use strict";var Iir=Tt(),Tir=Nr(),Mir=Tr(),jke=fn(),Cir=Tir("iterator");qke.exports=!Iir(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),jke&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(jke||!Mir)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[Cir]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var $ke=M((xXr,Wke)=>{"use strict";var A0=gt(),RK=2147483647,tM=36,Vke=1,zK=26,Air=38,Dir=700,Nir=72,Oir=128,Lir="-",Pir=/[^\0-\u007E]/,Gke=/[.\u3002\uFF0E\uFF61]/g,zke="Overflow: input needs wider integers to process",jK=tM-Vke,Fke=RangeError,kir=A0(Gke.exec),wb=Math.floor,qK=String.fromCharCode,Uke=A0("".charCodeAt),Hke=A0([].join),ev=A0([].push),Rir=A0("".replace),jir=A0("".split),qir=A0("".toLowerCase),zir=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=Uke(e,r++);if(o>=55296&&o<=56319&&r<n){var i=Uke(e,r++);(i&64512)===56320?ev(t,((o&1023)<<10)+(i&1023)+65536):(ev(t,o),r--)}else ev(t,o)}return t},Bke=function(e){return e+22+75*(e<26)},Fir=function(e,t,r){var n=0;for(e=r?wb(e/Dir):e>>1,e+=wb(e/t);e>jK*zK>>1;)e=wb(e/jK),n+=tM;return wb(n+(jK+1)*e/(e+Air))},Uir=function(e){var t=[];e=zir(e);var r=e.length,n=Oir,o=0,i=Nir,a,u;for(a=0;a<e.length;a++)u=e[a],u<128&&ev(t,qK(u));var p=t.length,h=p;for(p&&ev(t,Lir);h<r;){var g=RK;for(a=0;a<e.length;a++)u=e[a],u>=n&&u<g&&(g=u);var x=h+1;if(g-n>wb((RK-o)/x))throw new Fke(zke);for(o+=(g-n)*x,n=g,a=0;a<e.length;a++){if(u=e[a],u<n&&++o>RK)throw new Fke(zke);if(u===n){for(var b=o,T=tM;;){var A=T<=i?Vke:T>=i+zK?zK:T-i;if(b<A)break;var L=b-A,P=tM-A;ev(t,qK(Bke(A+L%P))),b=wb(L/P),T+=tM}ev(t,qK(Bke(b))),i=Fir(o,x,h===p),o=0,h++}}o++,n++}return Hke(t,"")};Wke.exports=function(e){var t=[],r=jir(Rir(qir(e),Gke,"."),"."),n,o;for(n=0;n<r.length;n++)o=r[n],ev(t,kir(Pir,o)?"xn--"+Uir(o):o);return Hke(t,".")}});var YK=M((bXr,gRe)=>{"use strict";MI();VW();var HK=re(),aRe=$t(),WK=LH(),Bir=Fr(),g3=er(),kf=gt(),rM=Tr(),sRe=eM(),lRe=fo(),Vir=ei(),Gir=Tc(),Hir=bl(),Wir=Pg(),$K=ro(),uRe=Vs(),FK=Kr(),$ir=sn(),Yir=xo(),Zir=eu(),Kir=Jt(),cRe=Br(),El=Hr(),Xir=Ri(),Yke=Jl(),Zke=Og(),Jir=Pp(),v3=qa(),Eb=Hu(),Qir=Nr(),ear=G5(),tar=Qir("iterator"),Ib="URLSearchParams",fRe=Ib+"Iterator",pRe=$K.set,Ac=$K.getterFor(Ib),rar=$K.getterFor(fRe),Kke=WK("fetch"),x3=WK("Request"),nM=WK("Headers"),UK=x3&&x3.prototype,Xke=nM&&nM.prototype,nar=aRe.TypeError,oar=aRe.encodeURIComponent,iar=String.fromCharCode,aar=Bir("String","fromCodePoint"),sar=parseInt,_3=kf("".charAt),Jke=kf([].join),tv=kf([].push),dRe=kf("".replace),lar=kf([].shift),Qke=kf([].splice),eRe=kf("".split),hRe=kf("".slice),uar=kf(/./.exec),car=/\+/g,BK="\uFFFD",far=/^[0-9a-f]+$/i,tRe=function(e,t){var r=hRe(e,t,t+2);return uar(far,r)?sar(r,16):NaN},par=function(e){for(var t=0,r=128;r>0&&e&r;r>>=1)t++;return t},dar=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break;}return t>1114111?null:t},rRe=function(e){e=dRe(e,car," ");for(var t=e.length,r="",n=0;n<t;){var o=_3(e,n);if(o==="%"){if(_3(e,n+1)==="%"||n+3>t){r+="%",n++;continue}var i=tRe(e,n+1);if(i!==i){r+=o,n++;continue}n+=2;var a=par(i);if(a===0)o=iar(i);else{if(a===1||a>4){r+=BK,n++;continue}for(var u=[i],p=1;p<a&&(n++,!(n+3>t||_3(e,n)!=="%"));){var h=tRe(e,n+1);if(h!==h){n+=3;break}if(h>191||h<128)break;tv(u,h),n+=2,p++}if(u.length!==a){r+=BK;continue}var g=dar(u);g===null?r+=BK:o=aar(g)}}r+=o,n++}return r},har=/[!'()~]|%20/g,mar={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},gar=function(e){return mar[e]},nRe=function(e){return dRe(oar(e),har,gar)},VK=Wir(function(t,r){pRe(this,{type:fRe,target:Ac(t).entries,index:0,kind:r})},Ib,function(){var t=rar(this),r=t.target,n=t.index++;if(!r||n>=r.length)return t.target=null,v3(void 0,!0);var o=r[n];switch(t.kind){case"keys":return v3(o.key,!1);case"values":return v3(o.value,!1);}return v3([o.key,o.value],!1)},!0),mRe=function(e){this.entries=[],this.url=null,e!==void 0&&(cRe(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?_3(e,0)==="?"?hRe(e,1):e:El(e)))};mRe.prototype={type:Ib,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=Jir(e),n,o,i,a,u,p,h;if(r)for(n=Zke(e,r),o=n.next;!(i=g3(o,n)).done;){if(a=Zke(Kir(i.value)),u=a.next,(p=g3(u,a)).done||(h=g3(u,a)).done||!g3(u,a).done)throw new nar("Expected sequence with length 2");tv(t,{key:El(p.value),value:El(h.value)})}else for(var g in e)$ir(e,g)&&tv(t,{key:g,value:El(e[g])})},parseQuery:function(e){if(e)for(var t=this.entries,r=eRe(e,"&"),n=0,o,i;n<r.length;)o=r[n++],o.length&&(i=eRe(o,"="),tv(t,{key:rRe(lar(i)),value:rRe(Jke(i,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],tv(t,nRe(n.key)+"="+nRe(n.value));return Jke(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var b3=function(){uRe(this,Sb);var t=arguments.length>0?arguments[0]:void 0,r=pRe(this,new mRe(t));rM||(this.size=r.entries.length)},Sb=b3.prototype;Gir(Sb,{append:function(t,r){var n=Ac(this);Eb(arguments.length,2),tv(n.entries,{key:El(t),value:El(r)}),rM||this.length++,n.updateURL()},delete:function(e){for(var t=Ac(this),r=Eb(arguments.length,1),n=t.entries,o=El(e),i=r<2?void 0:arguments[1],a=i===void 0?i:El(i),u=0;u<n.length;){var p=n[u];if(p.key===o&&(a===void 0||p.value===a)){if(Qke(n,u,1),a!==void 0)break}else u++}rM||(this.size=n.length),t.updateURL()},get:function(t){var r=Ac(this).entries;Eb(arguments.length,1);for(var n=El(t),o=0;o<r.length;o++)if(r[o].key===n)return r[o].value;return null},getAll:function(t){var r=Ac(this).entries;Eb(arguments.length,1);for(var n=El(t),o=[],i=0;i<r.length;i++)r[i].key===n&&tv(o,r[i].value);return o},has:function(t){for(var r=Ac(this).entries,n=Eb(arguments.length,1),o=El(t),i=n<2?void 0:arguments[1],a=i===void 0?i:El(i),u=0;u<r.length;){var p=r[u++];if(p.key===o&&(a===void 0||p.value===a))return!0}return!1},set:function(t,r){var n=Ac(this);Eb(arguments.length,1);for(var o=n.entries,i=!1,a=El(t),u=El(r),p=0,h;p<o.length;p++)h=o[p],h.key===a&&(i?Qke(o,p--,1):(i=!0,h.value=u));i||tv(o,{key:a,value:u}),rM||(this.size=o.length),n.updateURL()},sort:function(){var t=Ac(this);ear(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=Ac(this).entries,n=Yir(t,arguments.length>1?arguments[1]:void 0),o=0,i;o<r.length;)i=r[o++],n(i.value,i.key,this)},keys:function(){return new VK(this,"keys")},values:function(){return new VK(this,"values")},entries:function(){return new VK(this,"entries")}},{enumerable:!0});lRe(Sb,tar,Sb.entries,{name:"entries"});lRe(Sb,"toString",function(){return Ac(this).serialize()},{enumerable:!0});rM&&Vir(Sb,"size",{get:function(){return Ac(this).entries.length},configurable:!0,enumerable:!0});Hir(b3,Ib);HK({global:!0,constructor:!0,forced:!sRe},{URLSearchParams:b3});!sRe&&FK(nM)&&(oRe=kf(Xke.has),iRe=kf(Xke.set),GK=function(e){if(cRe(e)){var t=e.body,r;if(Zir(t)===Ib)return r=e.headers?new nM(e.headers):new nM,oRe(r,"content-type")||iRe(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Xir(e,{body:Yke(0,El(t)),headers:Yke(0,r)})}return e},FK(Kke)&&HK({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return Kke(t,arguments.length>1?GK(arguments[1]):{})}}),FK(x3)&&(y3=function(t){return uRe(this,UK),new x3(t,arguments.length>1?GK(arguments[1]):{})},UK.constructor=y3,y3.prototype=UK,HK({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:y3})));var oRe,iRe,GK,y3;gRe.exports={URLSearchParams:b3,getState:Ac}});var PRe=M(()=>{"use strict";HW();var yar=re(),fX=Tr(),_ar=eM(),pX=$t(),vRe=xo(),Pc=gt(),T3=fo(),Dc=ei(),xar=Vs(),lX=sn(),dX=hH(),Tb=iV(),Rf=tu(),bar=x0().codeAt,war=$ke(),Oh=Hr(),Ear=bl(),Sar=Hu(),CRe=YK(),ARe=ro(),Iar=ARe.set,M3=ARe.getterFor("URL"),Tar=CRe.URLSearchParams,Mar=CRe.getState,oM=pX.URL,uX=pX.TypeError,C3=pX.parseInt,Car=Math.floor,yRe=Math.pow,Lc=Pc("".charAt),jf=Pc(/./.exec),aM=Pc([].join),Aar=Pc(1 .toString),Dar=Pc([].pop),Cb=Pc([].push),ZK=Pc("".replace),Nar=Pc([].shift),Oar=Pc("".split),lM=Pc("".slice),A3=Pc("".toLowerCase),Lar=Pc([].unshift),Par="Invalid authority",KK="Invalid scheme",D0="Invalid host",_Re="Invalid port",DRe=/[a-z]/i,kar=/[\d+-.a-z]/i,cX=/\d/,Rar=/^0x/i,jar=/^[0-7]+$/,qar=/^\d+$/,NRe=/^[\da-f]+$/i,zar=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Far=/[\0\t\n\r #/:<>?@[\\\]^|]/,Uar=/^[\u0000-\u0020]+/,Bar=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,Var=/[\t\n\r]/g,Nc,Gar=function(e){var t=Oar(e,"."),r,n,o,i,a,u,p;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],o=0;o<r;o++){if(i=t[o],i==="")return e;if(a=10,i.length>1&&Lc(i,0)==="0"&&(a=jf(Rar,i)?16:8,i=lM(i,a===8?1:2)),i==="")u=0;else{if(!jf(a===10?qar:a===8?jar:NRe,i))return e;u=C3(i,a)}Cb(n,u)}for(o=0;o<r;o++)if(u=n[o],o===r-1){if(u>=yRe(256,5-r))return null}else if(u>255)return null;for(p=Dar(n),o=0;o<n.length;o++)p+=n[o]*yRe(256,3-o);return p},Har=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,o=0,i,a,u,p,h,g,x,b=function(){return Lc(e,o)};if(b()===":"){if(Lc(e,1)!==":")return;o+=2,r++,n=r}for(;b();){if(r===8)return;if(b()===":"){if(n!==null)return;o++,r++,n=r;continue}for(i=a=0;a<4&&jf(NRe,b());)i=i*16+C3(b(),16),o++,a++;if(b()==="."){if(a===0||(o-=a,r>6))return;for(u=0;b();){if(p=null,u>0)if(b()==="."&&u<4)o++;else return;if(!jf(cX,b()))return;for(;jf(cX,b());){if(h=C3(b(),10),p===null)p=h;else{if(p===0)return;p=p*10+h}if(p>255)return;o++}t[r]=t[r]*256+p,u++,(u===2||u===4)&&r++}if(u!==4)return;break}else if(b()===":"){if(o++,!b())return}else if(b())return;t[r++]=i}if(n!==null)for(g=r-n,r=7;r!==0&&g>0;)x=t[r],t[r--]=t[n+g-1],t[n+--g]=x;else if(r!==8)return;return t},War=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)e[i]!==0?(o>r&&(t=n,r=o),n=null,o=0):(n===null&&(n=i),++o);return o>r?n:t},iM=function(e){var t,r,n,o;if(typeof e=="number"){for(t=[],r=0;r<4;r++)Lar(t,e%256),e=Car(e/256);return aM(t,".")}if(typeof e=="object"){for(t="",n=War(e),r=0;r<8;r++)o&&e[r]===0||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=Aar(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},I3={},ORe=dX({},I3,{" ":1,"\"":1,"<":1,">":1,"`":1}),LRe=dX({},ORe,{"#":1,"?":1,"{":1,"}":1}),XK=dX({},LRe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),rv=function(e,t){var r=bar(e,0);return r>32&&r<127&&!lX(t,e)?e:encodeURIComponent(e)},w3={ftp:21,file:null,http:80,https:443,ws:80,wss:443},sM=function(e,t){var r;return e.length===2&&jf(DRe,Lc(e,0))&&((r=Lc(e,1))===":"||!t&&r==="|")},xRe=function(e){var t;return e.length>1&&sM(lM(e,0,2))&&(e.length===2||(t=Lc(e,2))==="/"||t==="\\"||t==="?"||t==="#")},$ar=function(e){return e==="."||A3(e)==="%2e"},Yar=function(e){return e=A3(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},JK={},bRe={},QK={},wRe={},ERe={},eX={},SRe={},IRe={},E3={},S3={},tX={},rX={},nX={},oX={},TRe={},iX={},Mb={},Gp={},MRe={},N0={},Nh={},hX=function(e,t,r){var n=Oh(e),o,i,a;if(t){if(i=this.parse(n),i)throw new uX(i);this.searchParams=null}else{if(r!==void 0&&(o=new hX(r,!0)),i=this.parse(n,null,o),i)throw new uX(i);a=Mar(new Tar),a.bindURL(this),this.searchParams=a}};hX.prototype={type:"URL",parse:function(e,t,r){var n=this,o=t||JK,i=0,a="",u=!1,p=!1,h=!1,g,x,b,T;for(e=Oh(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=ZK(e,Uar,""),e=ZK(e,Bar,"$1")),e=ZK(e,Var,""),g=Tb(e);i<=g.length;){switch(x=g[i],o){case JK:if(x&&jf(DRe,x))a+=A3(x),o=bRe;else{if(t)return KK;o=QK;continue}break;case bRe:if(x&&(jf(kar,x)||x==="+"||x==="-"||x==="."))a+=A3(x);else if(x===":"){if(t&&(n.isSpecial()!==lX(w3,a)||a==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=a,t){n.isSpecial()&&w3[n.scheme]===n.port&&(n.port=null);return}a="",n.scheme==="file"?o=oX:n.isSpecial()&&r&&r.scheme===n.scheme?o=wRe:n.isSpecial()?o=IRe:g[i+1]==="/"?(o=ERe,i++):(n.cannotBeABaseURL=!0,Cb(n.path,""),o=MRe)}else{if(t)return KK;a="",o=QK,i=0;continue}break;case QK:if(!r||r.cannotBeABaseURL&&x!=="#")return KK;if(r.cannotBeABaseURL&&x==="#"){n.scheme=r.scheme,n.path=Rf(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,o=Nh;break}o=r.scheme==="file"?oX:eX;continue;case wRe:if(x==="/"&&g[i+1]==="/")o=E3,i++;else{o=eX;continue}break;case ERe:if(x==="/"){o=S3;break}else{o=Gp;continue}case eX:if(n.scheme=r.scheme,x===Nc)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Rf(r.path),n.query=r.query;else if(x==="/"||x==="\\"&&n.isSpecial())o=SRe;else if(x==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Rf(r.path),n.query="",o=N0;else if(x==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Rf(r.path),n.query=r.query,n.fragment="",o=Nh;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=Rf(r.path),n.path.length--,o=Gp;continue}break;case SRe:if(n.isSpecial()&&(x==="/"||x==="\\"))o=E3;else if(x==="/")o=S3;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,o=Gp;continue}break;case IRe:if(o=E3,x!=="/"||Lc(a,i+1)!=="/")continue;i++;break;case E3:if(x!=="/"&&x!=="\\"){o=S3;continue}break;case S3:if(x==="@"){u&&(a="%40"+a),u=!0,b=Tb(a);for(var A=0;A<b.length;A++){var L=b[A];if(L===":"&&!h){h=!0;continue}var P=rv(L,XK);h?n.password+=P:n.username+=P}a=""}else if(x===Nc||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(u&&a==="")return Par;i-=Tb(a).length+1,a="",o=tX}else a+=x;break;case tX:case rX:if(t&&n.scheme==="file"){o=iX;continue}else if(x===":"&&!p){if(a==="")return D0;if(T=n.parseHost(a),T)return T;if(a="",o=nX,t===rX)return}else if(x===Nc||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(n.isSpecial()&&a==="")return D0;if(t&&a===""&&(n.includesCredentials()||n.port!==null))return;if(T=n.parseHost(a),T)return T;if(a="",o=Mb,t)return;continue}else x==="["?p=!0:x==="]"&&(p=!1),a+=x;break;case nX:if(jf(cX,x))a+=x;else if(x===Nc||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()||t){if(a!==""){var k=C3(a,10);if(k>65535)return _Re;n.port=n.isSpecial()&&k===w3[n.scheme]?null:k,a=""}if(t)return;o=Mb;continue}else return _Re;break;case oX:if(n.scheme="file",x==="/"||x==="\\")o=TRe;else if(r&&r.scheme==="file")switch(x){case Nc:n.host=r.host,n.path=Rf(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=Rf(r.path),n.query="",o=N0;break;case"#":n.host=r.host,n.path=Rf(r.path),n.query=r.query,n.fragment="",o=Nh;break;default:xRe(aM(Rf(g,i),""))||(n.host=r.host,n.path=Rf(r.path),n.shortenPath()),o=Gp;continue;}else{o=Gp;continue}break;case TRe:if(x==="/"||x==="\\"){o=iX;break}r&&r.scheme==="file"&&!xRe(aM(Rf(g,i),""))&&(sM(r.path[0],!0)?Cb(n.path,r.path[0]):n.host=r.host),o=Gp;continue;case iX:if(x===Nc||x==="/"||x==="\\"||x==="?"||x==="#"){if(!t&&sM(a))o=Gp;else if(a===""){if(n.host="",t)return;o=Mb}else{if(T=n.parseHost(a),T)return T;if(n.host==="localhost"&&(n.host=""),t)return;a="",o=Mb}continue}else a+=x;break;case Mb:if(n.isSpecial()){if(o=Gp,x!=="/"&&x!=="\\")continue}else if(!t&&x==="?")n.query="",o=N0;else if(!t&&x==="#")n.fragment="",o=Nh;else if(x!==Nc&&(o=Gp,x!=="/"))continue;break;case Gp:if(x===Nc||x==="/"||x==="\\"&&n.isSpecial()||!t&&(x==="?"||x==="#")){if(Yar(a)?(n.shortenPath(),x!=="/"&&!(x==="\\"&&n.isSpecial())&&Cb(n.path,"")):$ar(a)?x!=="/"&&!(x==="\\"&&n.isSpecial())&&Cb(n.path,""):(n.scheme==="file"&&!n.path.length&&sM(a)&&(n.host&&(n.host=""),a=Lc(a,0)+":"),Cb(n.path,a)),a="",n.scheme==="file"&&(x===Nc||x==="?"||x==="#"))for(;n.path.length>1&&n.path[0]==="";)Nar(n.path);x==="?"?(n.query="",o=N0):x==="#"&&(n.fragment="",o=Nh)}else a+=rv(x,LRe);break;case MRe:x==="?"?(n.query="",o=N0):x==="#"?(n.fragment="",o=Nh):x!==Nc&&(n.path[0]+=rv(x,I3));break;case N0:!t&&x==="#"?(n.fragment="",o=Nh):x!==Nc&&(x==="'"&&n.isSpecial()?n.query+="%27":x==="#"?n.query+="%23":n.query+=rv(x,I3));break;case Nh:x!==Nc&&(n.fragment+=rv(x,ORe));break;}i++}},parseHost:function(e){var t,r,n;if(Lc(e,0)==="["){if(Lc(e,e.length-1)!=="]"||(t=Har(lM(e,1,-1)),!t))return D0;this.host=t}else if(this.isSpecial()){if(e=war(e),jf(zar,e)||(t=Gar(e),t===null))return D0;this.host=t}else{if(jf(Far,e))return D0;for(t="",r=Tb(e),n=0;n<r.length;n++)t+=rv(r[n],I3);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return lX(w3,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!sM(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,u=e.query,p=e.fragment,h=t+":";return o!==null?(h+="//",e.includesCredentials()&&(h+=r+(n?":"+n:"")+"@"),h+=iM(o),i!==null&&(h+=":"+i)):t==="file"&&(h+="//"),h+=e.cannotBeABaseURL?a[0]:a.length?"/"+aM(a,"/"):"",u!==null&&(h+="?"+u),p!==null&&(h+="#"+p),h},setHref:function(e){var t=this.parse(e);if(t)throw new uX(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Ab(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+iM(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Oh(e)+":",JK)},getUsername:function(){return this.username},setUsername:function(e){var t=Tb(Oh(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=rv(t[r],XK)}},getPassword:function(){return this.password},setPassword:function(e){var t=Tb(Oh(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=rv(t[r],XK)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?iM(e):iM(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,tX)},getHostname:function(){var e=this.host;return e===null?"":iM(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,rX)},getPort:function(){var e=this.port;return e===null?"":Oh(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Oh(e),e===""?this.port=null:this.parse(e,nX))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+aM(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Mb))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Oh(e),e===""?this.query=null:(Lc(e,0)==="?"&&(e=lM(e,1)),this.query="",this.parse(e,N0)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Oh(e),e===""){this.fragment=null;return}Lc(e,0)==="#"&&(e=lM(e,1)),this.fragment="",this.parse(e,Nh)},update:function(){this.query=this.searchParams.serialize()||null}};var Ab=function(t){var r=xar(this,Sl),n=Sar(arguments.length,1)>1?arguments[1]:void 0,o=Iar(r,new hX(t,!1,n));fX||(r.href=o.serialize(),r.origin=o.getOrigin(),r.protocol=o.getProtocol(),r.username=o.getUsername(),r.password=o.getPassword(),r.host=o.getHost(),r.hostname=o.getHostname(),r.port=o.getPort(),r.pathname=o.getPathname(),r.search=o.getSearch(),r.searchParams=o.getSearchParams(),r.hash=o.getHash())},Sl=Ab.prototype,Oc=function(e,t){return{get:function(){return M3(this)[e]()},set:t&&function(r){return M3(this)[t](r)},configurable:!0,enumerable:!0}};fX&&(Dc(Sl,"href",Oc("serialize","setHref")),Dc(Sl,"origin",Oc("getOrigin")),Dc(Sl,"protocol",Oc("getProtocol","setProtocol")),Dc(Sl,"username",Oc("getUsername","setUsername")),Dc(Sl,"password",Oc("getPassword","setPassword")),Dc(Sl,"host",Oc("getHost","setHost")),Dc(Sl,"hostname",Oc("getHostname","setHostname")),Dc(Sl,"port",Oc("getPort","setPort")),Dc(Sl,"pathname",Oc("getPathname","setPathname")),Dc(Sl,"search",Oc("getSearch","setSearch")),Dc(Sl,"searchParams",Oc("getSearchParams")),Dc(Sl,"hash",Oc("getHash","setHash")));T3(Sl,"toJSON",function(){return M3(this).serialize()},{enumerable:!0});T3(Sl,"toString",function(){return M3(this).serialize()},{enumerable:!0});oM&&(aX=oM.createObjectURL,sX=oM.revokeObjectURL,aX&&T3(Ab,"createObjectURL",vRe(aX,oM)),sX&&T3(Ab,"revokeObjectURL",vRe(sX,oM)));var aX,sX;Ear(Ab,"URL");yar({global:!0,constructor:!0,forced:!_ar,sham:!fX},{URL:Ab})});var kRe=M(()=>{"use strict";PRe()});var qRe=M(()=>{"use strict";var Zar=re(),Kar=Fr(),jRe=Tt(),Xar=Hu(),RRe=Hr(),Jar=eM(),mX=Kar("URL"),Qar=Jar&&jRe(function(){mX.canParse()}),esr=jRe(function(){return mX.canParse.length!==1});Zar({target:"URL",stat:!0,forced:!Qar||esr},{canParse:function(t){var r=Xar(arguments.length,1),n=RRe(t),o=r<2||arguments[1]===void 0?void 0:RRe(arguments[1]);try{return!!new mX(n,o)}catch(i){return!1}}})});var FRe=M(()=>{"use strict";var tsr=re(),rsr=Fr(),nsr=Hu(),zRe=Hr(),osr=eM(),isr=rsr("URL");tsr({target:"URL",stat:!0,forced:!osr},{parse:function(t){var r=nsr(arguments.length,1),n=zRe(t),o=r<2||arguments[1]===void 0?void 0:zRe(arguments[1]);try{return new isr(n,o)}catch(i){return null}}})});var URe=M(()=>{"use strict";var asr=re(),ssr=er();asr({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return ssr(URL.prototype.toString,this)}})});var BRe=M(()=>{"use strict";YK()});var WRe=M(()=>{"use strict";var lsr=fo(),D3=gt(),VRe=Hr(),usr=Hu(),HRe=URLSearchParams,N3=HRe.prototype,csr=D3(N3.append),GRe=D3(N3.delete),fsr=D3(N3.forEach),psr=D3([].push),gX=new HRe("a=1&a=2&b=3");gX.delete("a",1);gX.delete("b",void 0);gX+""!="a=2"&&lsr(N3,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return GRe(this,e);var n=[];fsr(this,function(x,b){psr(n,{key:b,value:x})}),usr(t,1);for(var o=VRe(e),i=VRe(r),a=0,u=0,p=!1,h=n.length,g;a<h;)g=n[a++],p||g.key===o?(p=!0,GRe(this,g.key)):u++;for(;u<h;)g=n[u++],g.key===o&&g.value===i||csr(this,g.key,g.value)},{enumerable:!0,unsafe:!0})});var KRe=M(()=>{"use strict";var dsr=fo(),YRe=gt(),hsr=Hr(),msr=Hu(),ZRe=URLSearchParams,vX=ZRe.prototype,gsr=YRe(vX.getAll),vsr=YRe(vX.has),$Re=new ZRe("a=1");($Re.has("a",2)||!$Re.has("a",void 0))&&dsr(vX,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return vsr(this,t);var o=gsr(this,t);msr(r,1);for(var i=hsr(n),a=0;a<o.length;)if(o[a++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})});var XRe=M(()=>{"use strict";var ysr=Tr(),_sr=gt(),xsr=ei(),yX=URLSearchParams.prototype,bsr=_sr(yX.forEach);ysr&&!("size"in yX)&&xsr(yX,"size",{get:function(){var t=0;return bsr(this,function(){t++}),t},configurable:!0,enumerable:!0})});var QRe=M((FXr,JRe)=>{"use strict";vme();Sme();Ime();Tme();Mme();Cme();Ame();Dme();Nme();Ome();Lme();Pme();kme();Rme();jme();uge();hge();WB();Pge();KB();Bge();Wge();Yge();Xge();Jge();eve();rve();tV();rV();sve();lve();fve();xve();bve();Eve();Sve();MI();Hve();Zve();Kve();Jve();eye();lye();cye();pye();mye();gye();Oye();kye();Rye();wV();SV();IV();Fye();Uye();Bye();MV();y0e();D0e();R0e();q0e();YV();uG();cG();u1e();f1e();h1e();m1e();I1e();T1e();N1e();k1e();j1e();V1e();W1e();K1e();vG();wG();TG();MG();CG();AG();OG();LG();PG();RG();jG();qG();zG();FG();NB();b_e();dO();YG();V_e();W_e();Y_e();Z_e();K_e();Q_e();txe();rxe();oxe();axe();lxe();uxe();cxe();fxe();hxe();vxe();yxe();_xe();Dxe();Nxe();Lxe();kxe();Rxe();jxe();qxe();zxe();Hxe();Qxe();obe();cbe();dbe();ybe();_be();wbe();Sbe();Tbe();Mbe();Lbe();Pbe();kbe();qbe();zbe();Fbe();Bbe();vH();yH();Hbe();$be();Zbe();Xbe();Qbe();ewe();twe();rwe();swe();lwe();uwe();pwe();dwe();mwe();vwe();DEe();tW();rW();kEe();aW();sW();qEe();HEe();YEe();ZEe();QEe();eSe();tSe();rSe();nSe();oSe();iSe();cSe();pSe();dSe();DSe();OSe();RO();qSe();FSe();VSe();$Se();ZSe();MW();DW();OW();PW();RW();zW();UW();I2e();A2e();P2e();VW();q2e();GW();HW();J2e();JW();uIe();cIe();hIe();mIe();bIe();l$();TIe();NIe();PIe();RIe();m$();VIe();YIe();QIe();nTe();oTe();iTe();aTe();sTe();lTe();uTe();cTe();fTe();pTe();dTe();hTe();mTe();BTe();VTe();GTe();HTe();WTe();$Te();YTe();ZTe();KTe();D$();QTe();tMe();nMe();aMe();lMe();cMe();N$();O$();hMe();mMe();vMe();_Me();SMe();TMe();CMe();AMe();NMe();LMe();kMe();jMe();VMe();GMe();WMe();JMe();eCe();iCe();W$();$$();sCe();Z$();pCe();fL();CCe();ACe();OCe();iAe();aAe();sAe();lAe();uAe();cAe();pAe();dAe();mAe();gAe();_Ae();xAe();EAe();SAe();IAe();TAe();LAe();PAe();kAe();RAe();jAe();ZAe();eDe();pDe();gDe();yDe();_De();bDe();wDe();CDe();ADe();NDe();ODe();LDe();PDe();kDe();qDe();zDe();WDe();JDe();e4e();t4e();r4e();i4e();a4e();f4e();d4e();m4e();g4e();_4e();x4e();b4e();w4e();S4e();M4e();D4e();N4e();O4e();L4e();P4e();k4e();R4e();j4e();q4e();z4e();U4e();B4e();V4e();G4e();H4e();$4e();K4e();lNe();gNe();yNe();xNe();bNe();ENe();SNe();INe();CNe();ANe();DNe();NNe();PNe();RNe();jNe();zNe();UNe();BNe();HNe();WNe();$Ne();ZNe();XNe();JNe();QNe();e5e();t5e();n5e();o5e();i5e();a5e();s5e();l5e();u5e();c5e();h5e();m5e();x5e();b5e();S5e();I5e();T5e();D5e();N5e();O5e();L5e();Y5e();Z5e();K5e();X5e();J5e();oOe();aOe();lOe();pOe();hOe();gOe();_Oe();bOe();EOe();DOe();NOe();OOe();LOe();qOe();zOe();UOe();BOe();GOe();HOe();WOe();$Oe();YOe();ZOe();KOe();XOe();JOe();eLe();rLe();oLe();iLe();aLe();sLe();lLe();uLe();cLe();fLe();gLe();bLe();ULe();BLe();VLe();GLe();HLe();WLe();$Le();YLe();KLe();XLe();o3e();i3e();a3e();s3e();l3e();u3e();c3e();f3e();d3e();h3e();g3e();y3e();_3e();x3e();b3e();w3e();E3e();S3e();I3e();T3e();q3e();V3e();H3e();W3e();Y3e();Z3e();X3e();Q3e();tPe();nPe();oPe();aPe();sPe();cPe();fPe();dPe();mPe();wPe();MPe();PPe();zPe();XPe();oke();ake();mke();gke();yke();Ake();Rke();kRe();qRe();FRe();URe();BRe();WRe();KRe();XRe();JRe.exports=_5()});var _X=M((UXr,eje)=>{"use strict";eje.exports=QRe()});var b6e=M((AJr,x6e)=>{"use strict";var $pr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";x6e.exports=$pr});var I6e=M((DJr,S6e)=>{"use strict";var Ypr=b6e();function w6e(){}function E6e(){}E6e.resetWarningCache=w6e;S6e.exports=function(){function e(n,o,i,a,u,p){if(p!==Ypr){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:E6e,resetWarningCache:w6e};return r.PropTypes=r,r}});var xt=M((LJr,T6e)=>{T6e.exports=I6e()();var NJr,OJr});var aqe=M(DM=>{"use strict";U4();var Edr=we(),oqe=60103;DM.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(TJ=Symbol.for,oqe=TJ("react.element"),DM.Fragment=TJ("react.fragment"));var TJ,Sdr=Edr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Idr=Object.prototype.hasOwnProperty,Tdr={key:!0,ref:!0,__self:!0,__source:!0};function iqe(e,t,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Idr.call(t,n)&&!Tdr.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:oqe,type:e,key:i,ref:a,props:o,_owner:Sdr.current}}DM.jsx=iqe;DM.jsxs=iqe});var lqe=M((UQr,sqe)=>{"use strict";sqe.exports=aqe()});var FP=M((Orn,Vze)=>{"use strict";Vze.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var KJ=M(($on,O8e)=>{"use strict";O8e.exports=function(t,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}}});var uu=M((Yon,k8e)=>{"use strict";var wmr=KJ(),z0=Object.prototype.toString;function QJ(e){return z0.call(e)==="[object Array]"}function XJ(e){return typeof e=="undefined"}function Emr(e){return e!==null&&!XJ(e)&&e.constructor!==null&&!XJ(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Smr(e){return z0.call(e)==="[object ArrayBuffer]"}function Imr(e){return typeof FormData!="undefined"&&e instanceof FormData}function Tmr(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function Mmr(e){return typeof e=="string"}function Cmr(e){return typeof e=="number"}function L8e(e){return e!==null&&typeof e=="object"}function JP(e){if(z0.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Amr(e){return z0.call(e)==="[object Date]"}function Dmr(e){return z0.call(e)==="[object File]"}function Nmr(e){return z0.call(e)==="[object Blob]"}function P8e(e){return z0.call(e)==="[object Function]"}function Omr(e){return L8e(e)&&P8e(e.pipe)}function Lmr(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function Pmr(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function kmr(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function eQ(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),QJ(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function JJ(){var e={};function t(o,i){JP(e[i])&&JP(o)?e[i]=JJ(e[i],o):JP(o)?e[i]=JJ({},o):QJ(o)?e[i]=o.slice():e[i]=o}for(var r=0,n=arguments.length;r<n;r++)eQ(arguments[r],t);return e}function Rmr(e,t,r){return eQ(t,function(o,i){r&&typeof o=="function"?e[i]=wmr(o,r):e[i]=o}),e}function jmr(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}k8e.exports={isArray:QJ,isArrayBuffer:Smr,isBuffer:Emr,isFormData:Imr,isArrayBufferView:Tmr,isString:Mmr,isNumber:Cmr,isObject:L8e,isPlainObject:JP,isUndefined:XJ,isDate:Amr,isFile:Dmr,isBlob:Nmr,isFunction:P8e,isStream:Omr,isURLSearchParams:Lmr,isStandardBrowserEnv:kmr,forEach:eQ,merge:JJ,extend:Rmr,trim:Pmr,stripBOM:jmr}});var tQ=M((Zon,j8e)=>{"use strict";var Hb=uu();function R8e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}j8e.exports=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(Hb.isURLSearchParams(r))o=r.toString();else{var i=[];Hb.forEach(r,function(p,h){p===null||typeof p=="undefined"||(Hb.isArray(p)?h=h+"[]":p=[p],Hb.forEach(p,function(x){Hb.isDate(x)?x=x.toISOString():Hb.isObject(x)&&(x=JSON.stringify(x)),i.push(R8e(h)+"="+R8e(x))}))}),o=i.join("&")}if(o){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}});var z8e=M((Kon,q8e)=>{"use strict";var qmr=uu();function QP(){this.handlers=[]}QP.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};QP.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};QP.prototype.forEach=function(t){qmr.forEach(this.handlers,function(n){n!==null&&t(n)})};q8e.exports=QP});var U8e=M((Xon,F8e)=>{"use strict";var zmr=uu();F8e.exports=function(t,r){zmr.forEach(t,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])})}});var rQ=M((Jon,B8e)=>{"use strict";B8e.exports=function(t,r,n,o,i){return t.config=r,n&&(t.code=n),t.request=o,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var nQ=M((Qon,V8e)=>{"use strict";var Fmr=rQ();V8e.exports=function(t,r,n,o,i){var a=new Error(t);return Fmr(a,r,n,o,i)}});var H8e=M((ein,G8e)=>{"use strict";var Umr=nQ();G8e.exports=function(t,r,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):r(Umr("Request failed with status code "+n.status,n.config,null,n.request,n))}});var $8e=M((tin,W8e)=>{"use strict";var ek=uu();W8e.exports=ek.isStandardBrowserEnv()?function(){return{write:function(r,n,o,i,a,u){var p=[];p.push(r+"="+encodeURIComponent(n)),ek.isNumber(o)&&p.push("expires="+new Date(o).toGMTString()),ek.isString(i)&&p.push("path="+i),ek.isString(a)&&p.push("domain="+a),u===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Z8e=M((rin,Y8e)=>{"use strict";Y8e.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var X8e=M((nin,K8e)=>{"use strict";K8e.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var Q8e=M((oin,J8e)=>{"use strict";var Bmr=Z8e(),Vmr=X8e();J8e.exports=function(t,r){return t&&!Bmr(r)?Vmr(t,r):r}});var tFe=M((iin,eFe)=>{"use strict";var oQ=uu(),Gmr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];eFe.exports=function(t){var r={},n,o,i;return t&&oQ.forEach(t.split(`
`),function(u){if(i=u.indexOf(":"),n=oQ.trim(u.substr(0,i)).toLowerCase(),o=oQ.trim(u.substr(i+1)),n){if(r[n]&&Gmr.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([o]):r[n]=r[n]?r[n]+", "+o:o}}),r}});var oFe=M((ain,nFe)=>{"use strict";var rFe=uu();nFe.exports=rFe.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){var a=i;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(a){var u=rFe.isString(a)?o(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}()});var UM=M((sin,iFe)=>{"use strict";function iQ(e){this.message=e}iQ.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};iQ.prototype.__CANCEL__=!0;iFe.exports=iQ});var sQ=M((lin,aFe)=>{"use strict";var tk=uu(),Hmr=H8e(),Wmr=$8e(),$mr=tQ(),Ymr=Q8e(),Zmr=tFe(),Kmr=oFe(),aQ=nQ(),Xmr=BM(),Jmr=UM();aFe.exports=function(t){return new Promise(function(n,o){var i=t.data,a=t.headers,u=t.responseType,p;function h(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}tk.isFormData(i)&&delete a["Content-Type"];var g=new XMLHttpRequest;if(t.auth){var x=t.auth.username||"",b=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.Authorization="Basic "+btoa(x+":"+b)}var T=Ymr(t.baseURL,t.url);g.open(t.method.toUpperCase(),$mr(T,t.params,t.paramsSerializer),!0),g.timeout=t.timeout;function A(){if(g){var P="getAllResponseHeaders"in g?Zmr(g.getAllResponseHeaders()):null,k=!u||u==="text"||u==="json"?g.responseText:g.response,q={data:k,status:g.status,statusText:g.statusText,headers:P,config:t,request:g};Hmr(function(H){n(H),h()},function(H){o(H),h()},q),g=null}}if("onloadend"in g?g.onloadend=A:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(A)},g.onabort=function(){g&&(o(aQ("Request aborted",t,"ECONNABORTED",g)),g=null)},g.onerror=function(){o(aQ("Network Error",t,null,g)),g=null},g.ontimeout=function(){var k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",q=t.transitional||Xmr.transitional;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),o(aQ(k,t,q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},tk.isStandardBrowserEnv()){var L=(t.withCredentials||Kmr(T))&&t.xsrfCookieName?Wmr.read(t.xsrfCookieName):void 0;L&&(a[t.xsrfHeaderName]=L)}"setRequestHeader"in g&&tk.forEach(a,function(k,q){typeof i=="undefined"&&q.toLowerCase()==="content-type"?delete a[q]:g.setRequestHeader(q,k)}),tk.isUndefined(t.withCredentials)||(g.withCredentials=!!t.withCredentials),u&&u!=="json"&&(g.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&g.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(P){g&&(o(!P||P&&P.type?new Jmr("canceled"):P),g.abort(),g=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),i||(i=null),g.send(i)})}});var BM=M((uin,uFe)=>{"use strict";var ds=uu(),sFe=U8e(),Qmr=rQ(),egr={"Content-Type":"application/x-www-form-urlencoded"};function lFe(e,t){!ds.isUndefined(e)&&ds.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function tgr(){var e;return typeof XMLHttpRequest!="undefined"?e=sQ():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=sQ()),e}function rgr(e,t,r){if(ds.isString(e))try{return(t||JSON.parse)(e),ds.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var rk={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:tgr(),transformRequest:[function(t,r){return sFe(r,"Accept"),sFe(r,"Content-Type"),ds.isFormData(t)||ds.isArrayBuffer(t)||ds.isBuffer(t)||ds.isStream(t)||ds.isFile(t)||ds.isBlob(t)?t:ds.isArrayBufferView(t)?t.buffer:ds.isURLSearchParams(t)?(lFe(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ds.isObject(t)||r&&r["Content-Type"]==="application/json"?(lFe(r,"application/json"),rgr(t)):t}],transformResponse:[function(t){var r=this.transitional||rk.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&ds.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?Qmr(a,this,"E_JSON_PARSE"):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ds.forEach(["delete","get","head"],function(t){rk.headers[t]={}});ds.forEach(["post","put","patch"],function(t){rk.headers[t]=ds.merge(egr)});uFe.exports=rk});var fFe=M((cin,cFe)=>{"use strict";var ngr=uu(),ogr=BM();cFe.exports=function(t,r,n){var o=this||ogr;return ngr.forEach(n,function(a){t=a.call(o,t,r)}),t}});var lQ=M((fin,pFe)=>{"use strict";pFe.exports=function(t){return!!(t&&t.__CANCEL__)}});var mFe=M((pin,hFe)=>{"use strict";var dFe=uu(),uQ=fFe(),igr=lQ(),agr=BM(),sgr=UM();function cQ(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new sgr("canceled")}hFe.exports=function(t){cQ(t),t.headers=t.headers||{},t.data=uQ.call(t,t.data,t.headers,t.transformRequest),t.headers=dFe.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),dFe.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||agr.adapter;return r(t).then(function(o){return cQ(t),o.data=uQ.call(t,o.data,o.headers,t.transformResponse),o},function(o){return igr(o)||(cQ(t),o&&o.response&&(o.response.data=uQ.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})}});var fQ=M((din,gFe)=>{"use strict";var Ku=uu();gFe.exports=function(t,r){r=r||{};var n={};function o(g,x){return Ku.isPlainObject(g)&&Ku.isPlainObject(x)?Ku.merge(g,x):Ku.isPlainObject(x)?Ku.merge({},x):Ku.isArray(x)?x.slice():x}function i(g){if(Ku.isUndefined(r[g])){if(!Ku.isUndefined(t[g]))return o(void 0,t[g])}else return o(t[g],r[g])}function a(g){if(!Ku.isUndefined(r[g]))return o(void 0,r[g])}function u(g){if(Ku.isUndefined(r[g])){if(!Ku.isUndefined(t[g]))return o(void 0,t[g])}else return o(void 0,r[g])}function p(g){if(g in r)return o(t[g],r[g]);if(g in t)return o(void 0,t[g])}var h={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:p};return Ku.forEach(Object.keys(t).concat(Object.keys(r)),function(x){var b=h[x]||i,T=b(x);Ku.isUndefined(T)&&b!==p||(n[x]=T)}),n}});var pQ=M((hin,vFe)=>{vFe.exports={version:"0.24.0"}});var xFe=M((min,_Fe)=>{"use strict";var lgr=pQ().version,dQ={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){dQ[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var yFe={};dQ.transitional=function(t,r,n){function o(i,a){return"[Axios v"+lgr+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,u){if(t===!1)throw new Error(o(a," has been removed"+(r?" in "+r:"")));return r&&!yFe[a]&&(yFe[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,u):!0}};function ugr(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-->0;){var i=n[o],a=t[i];if(a){var u=e[i],p=u===void 0||a(u,i,e);if(p!==!0)throw new TypeError("option "+i+" must be "+p);continue}if(r!==!0)throw Error("Unknown option "+i)}}_Fe.exports={assertOptions:ugr,validators:dQ}});var TFe=M((gin,IFe)=>{"use strict";var EFe=uu(),cgr=tQ(),bFe=z8e(),wFe=mFe(),nk=fQ(),SFe=xFe(),Wb=SFe.validators;function VM(e){this.defaults=e,this.interceptors={request:new bFe,response:new bFe}}VM.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=nk(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&SFe.assertOptions(r,{silentJSONParsing:Wb.transitional(Wb.boolean),forcedJSONParsing:Wb.transitional(Wb.boolean),clarifyTimeoutError:Wb.transitional(Wb.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(o=o&&b.synchronous,n.unshift(b.fulfilled,b.rejected))});var i=[];this.interceptors.response.forEach(function(b){i.push(b.fulfilled,b.rejected)});var a;if(!o){var u=[wFe,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(i),a=Promise.resolve(t);u.length;)a=a.then(u.shift(),u.shift());return a}for(var p=t;n.length;){var h=n.shift(),g=n.shift();try{p=h(p)}catch(x){g(x);break}}try{a=wFe(p)}catch(x){return Promise.reject(x)}for(;i.length;)a=a.then(i.shift(),i.shift());return a};VM.prototype.getUri=function(t){return t=nk(this.defaults,t),cgr(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};EFe.forEach(["delete","get","head","options"],function(t){VM.prototype[t]=function(r,n){return this.request(nk(n||{},{method:t,url:r,data:(n||{}).data}))}});EFe.forEach(["post","put","patch"],function(t){VM.prototype[t]=function(r,n,o){return this.request(nk(o||{},{method:t,url:r,data:n}))}});IFe.exports=VM});var CFe=M((vin,MFe)=>{"use strict";var fgr=UM();function $b(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var r=this;this.promise.then(function(n){if(r._listeners){var o,i=r._listeners.length;for(o=0;o<i;o++)r._listeners[o](n);r._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(a){r.subscribe(a),o=a}).then(n);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o){r.reason||(r.reason=new fgr(o),t(r.reason))})}$b.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};$b.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};$b.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};$b.source=function(){var t,r=new $b(function(o){t=o});return{token:r,cancel:t}};MFe.exports=$b});var DFe=M((yin,AFe)=>{"use strict";AFe.exports=function(t){return function(n){return t.apply(null,n)}}});var OFe=M((_in,NFe)=>{"use strict";NFe.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var kFe=M((xin,hQ)=>{"use strict";var LFe=uu(),pgr=KJ(),ok=TFe(),dgr=fQ(),hgr=BM();function PFe(e){var t=new ok(e),r=pgr(ok.prototype.request,t);return LFe.extend(r,ok.prototype,t),LFe.extend(r,t),r.create=function(o){return PFe(dgr(e,o))},r}var Zp=PFe(hgr);Zp.Axios=ok;Zp.Cancel=UM();Zp.CancelToken=CFe();Zp.isCancel=lQ();Zp.VERSION=pQ().version;Zp.all=function(t){return Promise.all(t)};Zp.spread=DFe();Zp.isAxiosError=OFe();hQ.exports=Zp;hQ.exports.default=Zp});var hv=M((bin,RFe)=>{RFe.exports=kFe()});var GM=M((mQ,gQ)=>{(function(e,t){typeof mQ=="object"&&typeof gQ!="undefined"?gQ.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(mQ,function(){"use strict";var e={},t={};function r(o,i,a){if(t[o]=a,o==="index"){var u="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",p={};return t.shared(p),t.index(e,p),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([u],{type:"text/javascript"}))),e}}r("shared",["exports"],function(o){"use strict";function i(c,l,f,m){return new(f||(f=Promise))(function(_,S){function I(j){try{N(m.next(j))}catch(z){S(z)}}function C(j){try{N(m.throw(j))}catch(z){S(z)}}function N(j){var z;j.done?_(j.value):(z=j.value,z instanceof f?z:new f(function(B){B(z)})).then(I,C)}N((m=m.apply(c,l||[])).next())})}function a(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var u=p;function p(c,l){this.x=c,this.y=l}p.prototype={clone:function(){return new p(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,l){return this.clone()._rotateAround(c,l)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var l=c.x-this.x,f=c.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,l){return Math.atan2(this.x*l-this.y*c,this.x*c+this.y*l)},_matMult:function(c){var l=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=l,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var l=Math.cos(c),f=Math.sin(c),m=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=m,this},_rotateAround:function(c,l){var f=Math.cos(c),m=Math.sin(c),_=l.y+m*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-m*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(c){return c instanceof p?c:Array.isArray(c)?new p(c[0],c[1]):c};var h=a(u),g=x;function x(c,l,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=l,this.p2x=f,this.p2y=m}x.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,l){if(l===void 0&&(l=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var _=this.sampleCurveX(f)-c;if(Math.abs(_)<l)return f;var S=this.sampleCurveDerivativeX(f);if(Math.abs(S)<1e-6)break;f-=_/S}var I=0,C=1;for(f=c,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-c)<l));m++)c>_?I=f:C=f,f=.5*(C-I)+I;return f},solve:function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))}};var b=a(g);let T,A;function L(){return T==null&&(T=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),T}function P(){if(A==null&&(A=!1,L())){let l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){let _=4*m;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}let f=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&f[m]!==m){A=!0;break}}}return A||!1}function k(c,l,f,m){let _=new b(c,l,f,m);return S=>_.solve(S)}let q=k(.25,.1,.25,1);function U(c,l,f){return Math.min(f,Math.max(l,c))}function H(c,l,f){let m=f-l,_=((c-l)%m+m)%m+l;return _===l?f:_}function X(c,...l){for(let f of l)for(let m in f)c[m]=f[m];return c}let ee=1;function ne(c,l,f){let m={};for(let _ in c)m[_]=l.call(this,c[_],_,c);return m}function me(c,l,f){let m={};for(let _ in c)l.call(this,c[_],_,c)&&(m[_]=c[_]);return m}function ue(c){return Array.isArray(c)?c.map(ue):typeof c=="object"&&c?ne(c,ue):c}let Me={};function ke(c){Me[c]||(typeof console!="undefined"&&console.warn(c),Me[c]=!0)}function Te(c,l,f){return(f.y-c.y)*(l.x-c.x)>(l.y-c.y)*(f.x-c.x)}function Ee(c){return typeof WorkerGlobalScope!="undefined"&&c!==void 0&&c instanceof WorkerGlobalScope}let Ze=null;function Qe(c){return typeof ImageBitmap!="undefined"&&c instanceof ImageBitmap}let Fe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function ze(c,l,f,m,_){return i(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let S=new VideoFrame(c,{timestamp:0});try{let I=S==null?void 0:S.format;if(!I||!I.startsWith("BGR")&&!I.startsWith("RGB"))throw new Error(`Unrecognized format ${I}`);let C=I.startsWith("BGR"),N=new Uint8ClampedArray(m*_*4);if(yield S.copyTo(N,function(j,z,B,Y,K){let te=4*Math.max(-z,0),oe=(Math.max(0,B)-B)*Y*4+te,pe=4*Y,ve=Math.max(0,z),$e=Math.max(0,B);return{rect:{x:ve,y:$e,width:Math.min(j.width,z+Y)-ve,height:Math.min(j.height,B+K)-$e},layout:[{offset:oe,stride:pe}]}}(c,l,f,m,_)),C)for(let j=0;j<N.length;j+=4){let z=N[j];N[j]=N[j+2],N[j+2]=z}return N}finally{S.close()}})}let Ne,et,st="AbortError";function ft(){return new Error(st)}let Ye={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function tt(c){return Ye.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}let lt="global-dispatcher";class je extends Error{constructor(l,f,m,_){super(`AJAXError: ${f} (${l}): ${m}`),this.status=l,this.statusText=f,this.url=m,this.body=_}}let ge=()=>Ee(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,We=function(c,l){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){let m=tt(c.url);if(m)return m(c,l);if(Ee(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:lt},l)}if(!(/^file:/.test(f=c.url)||/^file:/.test(ge())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,_){return i(this,void 0,void 0,function*(){let S=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:ge(),signal:_.signal});m.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");let I=yield fetch(S);if(!I.ok){let j=yield I.blob();throw new je(I.status,I.statusText,m.url,j)}let C;C=m.type==="arrayBuffer"||m.type==="image"?I.arrayBuffer():m.type==="json"?I.json():I.text();let N=yield C;if(_.signal.aborted)throw ft();return{data:N,cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}})}(c,l);if(Ee(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:lt},l)}var f;return function(m,_){return new Promise((S,I)=>{var C;let N=new XMLHttpRequest;N.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(N.responseType="arraybuffer");for(let j in m.headers)N.setRequestHeader(j,m.headers[j]);m.type==="json"&&(N.responseType="text",!((C=m.headers)===null||C===void 0)&&C.Accept||N.setRequestHeader("Accept","application/json")),N.withCredentials=m.credentials==="include",N.onerror=()=>{I(new Error(N.statusText))},N.onload=()=>{if(!_.signal.aborted)if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let j=N.response;if(m.type==="json")try{j=JSON.parse(N.response)}catch(z){return void I(z)}S({data:j,cacheControl:N.getResponseHeader("Cache-Control"),expires:N.getResponseHeader("Expires")})}else{let j=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});I(new je(N.status,N.statusText,m.url,j))}},_.signal.addEventListener("abort",()=>{N.abort(),I(ft())}),N.send(m.body)})}(c,l)};function Oe(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;let l=new URL(c),f=window.location;return l.protocol===f.protocol&&l.host===f.host}function at(c,l,f){f[c]&&f[c].indexOf(l)!==-1||(f[c]=f[c]||[],f[c].push(l))}function ot(c,l,f){if(f&&f[c]){let m=f[c].indexOf(l);m!==-1&&f[c].splice(m,1)}}class Pt{constructor(l,f={}){X(this,f),this.type=l}}class Mt extends Pt{constructor(l,f={}){super("error",X({error:l},f))}}class Dt{on(l,f){return this._listeners=this._listeners||{},at(l,f,this._listeners),this}off(l,f){return ot(l,f,this._listeners),ot(l,f,this._oneTimeListeners),this}once(l,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},at(l,f,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,f){typeof l=="string"&&(l=new Pt(l,f||{}));let m=l.type;if(this.listens(m)){l.target=this;let _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(let C of _)C.call(this,l);let S=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(let C of S)ot(m,C,this._oneTimeListeners),C.call(this,l);let I=this._eventedParent;I&&(X(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(l))}else l instanceof Mt&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,f){return this._eventedParent=l,this._eventedParentData=f,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Lt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Wt(c,l){let f={};for(let m in c)m!=="ref"&&(f[m]=c[m]);return Lt.forEach(m=>{m in l&&(f[m]=l[m])}),f}function Ct(c,l){if(Array.isArray(c)){if(!Array.isArray(l)||c.length!==l.length)return!1;for(let f=0;f<c.length;f++)if(!Ct(c[f],l[f]))return!1;return!0}if(typeof c=="object"&&c!==null&&l!==null){if(typeof l!="object"||Object.keys(c).length!==Object.keys(l).length)return!1;for(let f in c)if(!Ct(c[f],l[f]))return!1;return!0}return c===l}function ce(c,l){c.push(l)}function qe(c,l,f){ce(f,{command:"addSource",args:[c,l[c]]})}function Ue(c,l,f){ce(l,{command:"removeSource",args:[c]}),f[c]=!0}function ht(c,l,f,m){Ue(c,f,m),qe(c,l,f)}function yt(c,l,f){let m;for(m in c[f])if(Object.prototype.hasOwnProperty.call(c[f],m)&&m!=="data"&&!Ct(c[f][m],l[f][m]))return!1;for(m in l[f])if(Object.prototype.hasOwnProperty.call(l[f],m)&&m!=="data"&&!Ct(c[f][m],l[f][m]))return!1;return!0}function mt(c,l,f,m,_,S){c=c||{},l=l||{};for(let I in c)Object.prototype.hasOwnProperty.call(c,I)&&(Ct(c[I],l[I])||f.push({command:S,args:[m,I,l[I],_]}));for(let I in l)Object.prototype.hasOwnProperty.call(l,I)&&!Object.prototype.hasOwnProperty.call(c,I)&&(Ct(c[I],l[I])||f.push({command:S,args:[m,I,l[I],_]}))}function _t(c){return c.id}function Yt(c,l){return c[l.id]=l,c}class nt{constructor(l,f,m,_){this.message=(l?`${l}: `:"")+m,_&&(this.identifier=_),f!=null&&f.__line__&&(this.line=f.__line__)}}function zr(c,...l){for(let f of l)for(let m in f)c[m]=f[m];return c}class on extends Error{constructor(l,f){super(f),this.message=f,this.key=l}}class pa{constructor(l,f=[]){this.parent=l,this.bindings={};for(let[m,_]of f)this.bindings[m]=_}concat(l){return new pa(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let da={kind:"null"},St={kind:"number"},Vr={kind:"string"},Er={kind:"boolean"},Qi={kind:"color"},Ta={kind:"object"},Le={kind:"value"},Ve={kind:"collator"},wt={kind:"formatted"},Zt={kind:"padding"},Ht={kind:"resolvedImage"},ae={kind:"variableAnchorOffsetCollection"};function $(c,l){return{kind:"array",itemType:c,N:l}}function W(c){if(c.kind==="array"){let l=W(c.itemType);return typeof c.N=="number"?`array<${l}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${l}>`}return c.kind}let J=[da,St,Vr,Er,Qi,wt,Ta,$(Le),Zt,Ht,ae];function se(c,l){if(l.kind==="error")return null;if(c.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!se(c.itemType,l.itemType))&&(typeof c.N!="number"||c.N===l.N))return null}else{if(c.kind===l.kind)return null;if(c.kind==="value"){for(let f of J)if(!se(f,l))return null}}return`Expected ${W(c)} but found ${W(l)} instead.`}function be(c,l){return l.some(f=>f.kind===c.kind)}function De(c,l){return l.some(f=>f==="null"?c===null:f==="array"?Array.isArray(c):f==="object"?c&&!Array.isArray(c)&&typeof c=="object":f===typeof c)}function Re(c,l){return c.kind==="array"&&l.kind==="array"?c.itemType.kind===l.itemType.kind&&typeof c.N=="number":c.kind===l.kind}let _e=.96422,Je=.82521,pt=4/29,Xe=6/29,At=3*Xe*Xe,ur=Xe*Xe*Xe,Sr=Math.PI/180,An=180/Math.PI;function Gr(c){return(c%=360)<0&&(c+=360),c}function Dn([c,l,f,m]){let _,S,I=Di((.2225045*(c=vn(c))+.7168786*(l=vn(l))+.0606169*(f=vn(f)))/1);c===l&&l===f?_=S=I:(_=Di((.4360747*c+.3850649*l+.1430804*f)/_e),S=Di((.0139322*c+.0971045*l+.7141733*f)/Je));let C=116*I-16;return[C<0?0:C,500*(_-I),200*(I-S),m]}function vn(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Di(c){return c>ur?Math.pow(c,1/3):c/At+pt}function ii([c,l,f,m]){let _=(c+16)/116,S=isNaN(l)?_:_+l/500,I=isNaN(f)?_:_-f/200;return _=1*eo(_),S=_e*eo(S),I=Je*eo(I),[an(3.1338561*S-1.6168667*_-.4906146*I),an(-.9787684*S+1.9161415*_+.033454*I),an(.0719453*S-.2289914*_+1.4052427*I),m]}function an(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function eo(c){return c>Xe?c*c*c:At*(c-pt)}function Vo(c){return parseInt(c.padEnd(2,c),16)/255}function ea(c,l){return ha(l?c/100:c,0,1)}function ha(c,l,f){return Math.min(Math.max(l,c),f)}function Ja(c){return!c.some(Number.isNaN)}let Em={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class to{constructor(l,f,m,_=1,S=!0){this.r=l,this.g=f,this.b=m,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,f,m,_]))}static parse(l){if(l instanceof to)return l;if(typeof l!="string")return;let f=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];let _=Em[m];if(_){let[I,C,N]=_;return[I/255,C/255,N/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){let I=m.length<6?1:2,C=1;return[Vo(m.slice(C,C+=I)),Vo(m.slice(C,C+=I)),Vo(m.slice(C,C+=I)),Vo(m.slice(C,C+I)||"ff")]}if(m.startsWith("rgb")){let I=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){let[C,N,j,z,B,Y,K,te,oe,pe,ve,$e]=I,Ce=[z||" ",K||" ",pe].join("");if(Ce==="  "||Ce==="  /"||Ce===",,"||Ce===",,,"){let He=[j,Y,oe].join(""),rt=He==="%%%"?100:He===""?255:0;if(rt){let bt=[ha(+N/rt,0,1),ha(+B/rt,0,1),ha(+te/rt,0,1),ve?ea(+ve,$e):1];if(Ja(bt))return bt}}return}}let S=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){let[I,C,N,j,z,B,Y,K,te]=S,oe=[N||" ",z||" ",Y].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){let pe=[+C,ha(+j,0,100),ha(+B,0,100),K?ea(+K,te):1];if(Ja(pe))return function([ve,$e,Ce,He]){function rt(bt){let Qt=(bt+ve/30)%12,Ir=$e*Math.min(Ce,1-Ce);return Ce-Ir*Math.max(-1,Math.min(Qt-3,9-Qt,1))}return ve=Gr(ve),$e/=100,Ce/=100,[rt(0),rt(8),rt(4),He]}(pe)}}}(l);return f?new to(...f,!1):void 0}get rgb(){let{r:l,g:f,b:m,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[l/S,f/S,m/S,_])}get hcl(){return this.overwriteGetter("hcl",function(l){let[f,m,_,S]=Dn(l),I=Math.sqrt(m*m+_*_);return[Math.round(1e4*I)?Gr(Math.atan2(_,m)*An):NaN,I,f,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Dn(this.rgb))}overwriteGetter(l,f){return Object.defineProperty(this,l,{value:f}),f}toString(){let[l,f,m,_]=this.rgb;return`rgba(${[l,f,m].map(S=>Math.round(255*S)).join(",")},${_})`}}to.black=new to(0,0,0,1),to.white=new to(1,1,1,1),to.transparent=new to(0,0,0,0),to.red=new to(1,0,0,1);class YE{constructor(l,f,m){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,f){return this.collator.compare(l,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class ZE{constructor(l,f,m,_,S){this.text=l,this.image=f,this.scale=m,this.fontStack=_,this.textColor=S}}class fl{constructor(l){this.sections=l}static fromString(l){return new fl([new ZE(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof fl?l:fl.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class pl{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof pl)return l;if(typeof l=="number")return new pl([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let f of l)if(typeof f!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]];}return new pl(l)}}toString(){return JSON.stringify(this.values)}}let J8=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class zl{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof zl)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let f=0;f<l.length;f+=2){let m=l[f],_=l[f+1];if(typeof m!="string"||!J8.has(m)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new zl(l)}}toString(){return JSON.stringify(this.values)}}class dl{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new dl({name:l,available:!1}):null}}function Sm(c,l,f,m){return typeof c=="number"&&c>=0&&c<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,l,f,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,l,f,m]:[c,l,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bd(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof to||c instanceof YE||c instanceof fl||c instanceof pl||c instanceof zl||c instanceof dl)return!0;if(Array.isArray(c)){for(let l of c)if(!Bd(l))return!1;return!0}if(typeof c=="object"){for(let l in c)if(!Bd(c[l]))return!1;return!0}return!1}function Ni(c){if(c===null)return da;if(typeof c=="string")return Vr;if(typeof c=="boolean")return Er;if(typeof c=="number")return St;if(c instanceof to)return Qi;if(c instanceof YE)return Ve;if(c instanceof fl)return wt;if(c instanceof pl)return Zt;if(c instanceof zl)return ae;if(c instanceof dl)return Ht;if(Array.isArray(c)){let l=c.length,f;for(let m of c){let _=Ni(m);if(f){if(f===_)continue;f=Le;break}f=_}return $(f||Le,l)}return Ta}function fy(c){let l=typeof c;return c===null?"":l==="string"||l==="number"||l==="boolean"?String(c):c instanceof to||c instanceof fl||c instanceof pl||c instanceof zl||c instanceof dl?c.toString():JSON.stringify(c)}class Du{constructor(l,f){this.type=l,this.value=f}static parse(l,f){if(l.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Bd(l[1]))return f.error("invalid value");let m=l[1],_=Ni(m),S=f.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new Du(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wi{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}let Y1={string:Vr,number:St,boolean:Er,object:Ta};class Nu{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m,_=1,S=l[0];if(S==="array"){let C,N;if(l.length>2){let j=l[1];if(typeof j!="string"||!(j in Y1)||j==="object")return f.error("The item type argument of \"array\" must be one of string, number, boolean",1);C=Y1[j],_++}else C=Le;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error("The length argument to \"array\" must be a positive integer literal",2);N=l[2],_++}m=$(C,N)}else{if(!Y1[S])throw new Error(`Types doesn't contain name = ${S}`);m=Y1[S]}let I=[];for(;_<l.length;_++){let C=f.parse(l[_],_,Le);if(!C)return null;I.push(C)}return new Nu(m,I)}evaluate(l){for(let f=0;f<this.args.length;f++){let m=this.args[f].evaluate(l);if(!se(this.type,Ni(m)))return m;if(f===this.args.length-1)throw new wi(`Expected value to be of type ${W(this.type)}, but found ${W(Ni(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let KE={"to-boolean":Er,"to-color":Qi,"to-number":St,"to-string":Vr};class Ou{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[0];if(!KE[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return f.error("Expected one argument.");let _=KE[m],S=[];for(let I=1;I<l.length;I++){let C=f.parse(l[I],I,Le);if(!C)return null;S.push(C)}return new Ou(_,S)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let f,m;for(let _ of this.args){if(f=_.evaluate(l),m=null,f instanceof to)return f;if(typeof f=="string"){let S=l.parseColor(f);if(S)return S}else if(Array.isArray(f)&&(m=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Sm(f[0],f[1],f[2],f[3]),!m))return new to(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new wi(m||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(let m of this.args){f=m.evaluate(l);let _=pl.parse(f);if(_)return _}throw new wi(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(let m of this.args){f=m.evaluate(l);let _=zl.parse(f);if(_)return _}throw new wi(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(let m of this.args){if(f=m.evaluate(l),f===null)return 0;let _=Number(f);if(!isNaN(_))return _}throw new wi(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return fl.fromString(fy(this.args[0].evaluate(l)));case"resolvedImage":return dl.fromString(fy(this.args[0].evaluate(l)));default:return fy(this.args[0].evaluate(l));}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let Q8=["Unknown","Point","LineString","Polygon"];class Z1{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Q8[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let f=this._parseColorCache[l];return f||(f=this._parseColorCache[l]=to.parse(l)),f}}class Vd{constructor(l,f,m=[],_,S=new pa,I=[]){this.registry=l,this.path=m,this.key=m.map(C=>`[${C}]`).join(""),this.scope=S,this.errors=I,this.expectedType=_,this._isConstant=f}parse(l,f,m,_,S={}){return f?this.concat(f,m,_)._parse(l,S):this._parse(l,S)}_parse(l,f){function m(_,S,I){return I==="assert"?new Nu(S,[_]):I==="coerce"?new Ou(S,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let S=this.registry[_];if(S){let I=S.parse(l,this);if(!I)return null;if(this.expectedType){let C=this.expectedType,N=I.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||N.kind!=="value"){if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||N.kind!=="value"&&N.kind!=="string"){if(C.kind!=="padding"||N.kind!=="value"&&N.kind!=="number"&&N.kind!=="array"){if(C.kind!=="variableAnchorOffsetCollection"||N.kind!=="value"&&N.kind!=="array"){if(this.checkSubtype(C,N))return null}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"assert")}if(!(I instanceof Du)&&I.type.kind!=="resolvedImage"&&this._isConstant(I)){let C=new Z1;try{I=new Du(I.type,I.evaluate(C))}catch(N){return this.error(N.message),null}}return I}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof l} instead.`)}concat(l,f,m){let _=typeof l=="number"?this.path.concat(l):this.path,S=m?this.scope.concat(m):this.scope;return new Vd(this.registry,this._isConstant,_,f||null,S,this.errors)}error(l,...f){let m=`${this.key}${f.map(_=>`[${_}]`).join("")}`;this.errors.push(new on(m,l))}checkSubtype(l,f){let m=se(l,f);return m&&this.error(m),m}}class mp{constructor(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let f of this.bindings)l(f[1]);l(this.result)}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let m=[];for(let S=1;S<l.length-1;S+=2){let I=l[S];if(typeof I!="string")return f.error(`Expected string, but found ${typeof I} instead.`,S);if(/[^a-zA-Z0-9_]/.test(I))return f.error("Variable names must contain only alphanumeric characters or '_'.",S);let C=f.parse(l[S+1],S+1);if(!C)return null;m.push([I,C])}let _=f.parse(l[l.length-1],l.length-1,f.expectedType,m);return _?new mp(m,_):null}outputDefined(){return this.result.outputDefined()}}class Fn{constructor(l,f){this.type=f.type,this.name=l,this.boundExpression=f}static parse(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");let m=l[1];return f.scope.has(m)?new Fn(m,f.scope.get(m)):f.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class XE{constructor(l,f,m){this.type=l,this.index=f,this.input=m}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,St),_=f.parse(l[2],2,$(f.expectedType||Le));return m&&_?new XE(_.type.itemType,m,_):null}evaluate(l){let f=this.index.evaluate(l),m=this.input.evaluate(l);if(f<0)throw new wi(`Array index out of bounds: ${f} < 0.`);if(f>=m.length)throw new wi(`Array index out of bounds: ${f} > ${m.length-1}.`);if(f!==Math.floor(f))throw new wi(`Array index must be an integer, but found ${f} instead.`);return m[f]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class JE{constructor(l,f){this.type=Er,this.needle=l,this.haystack=f}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Le),_=f.parse(l[2],2,Le);return m&&_?be(m.type,[Er,Vr,St,da,Le])?new JE(m,_):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(m.type)} instead`):null}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!De(f,["boolean","string","number","null"]))throw new wi(`Expected first argument to be of type boolean, string, number or null, but found ${W(Ni(f))} instead.`);if(!De(m,["string","array"]))throw new wi(`Expected second argument to be of type array or string, but found ${W(Ni(m))} instead.`);return m.indexOf(f)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Im{constructor(l,f,m){this.type=St,this.needle=l,this.haystack=f,this.fromIndex=m}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Le),_=f.parse(l[2],2,Le);if(!m||!_)return null;if(!be(m.type,[Er,Vr,St,da,Le]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(m.type)} instead`);if(l.length===4){let S=f.parse(l[3],3,St);return S?new Im(m,_,S):null}return new Im(m,_)}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!De(f,["boolean","string","number","null"]))throw new wi(`Expected first argument to be of type boolean, string, number or null, but found ${W(Ni(f))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),De(m,["string"])){let S=m.indexOf(f,_);return S===-1?-1:[...m.slice(0,S)].length}if(De(m,["array"]))return m.indexOf(f,_);throw new wi(`Expected second argument to be of type array or string, but found ${W(Ni(m))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class QE{constructor(l,f,m,_,S,I){this.inputType=l,this.type=f,this.input=m,this.cases=_,this.outputs=S,this.otherwise=I}static parse(l,f){if(l.length<5)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return f.error("Expected an even number of arguments.");let m,_;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);let S={},I=[];for(let j=2;j<l.length-1;j+=2){let z=l[j],B=l[j+1];Array.isArray(z)||(z=[z]);let Y=f.concat(j);if(z.length===0)return Y.error("Expected at least one branch label.");for(let te of z){if(typeof te!="number"&&typeof te!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,Ni(te)))return null}else m=Ni(te);if(S[String(te)]!==void 0)return Y.error("Branch labels must be unique.");S[String(te)]=I.length}let K=f.parse(B,j,_);if(!K)return null;_=_||K.type,I.push(K)}let C=f.parse(l[1],1,Le);if(!C)return null;let N=f.parse(l[l.length-1],l.length-1,_);return N?C.type.kind!=="value"&&f.concat(1).checkSubtype(m,C.type)?null:new QE(m,_,C,S,I,N):null}evaluate(l){let f=this.input.evaluate(l);return(Ni(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class K1{constructor(l,f,m){this.type=l,this.branches=f,this.otherwise=m}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return f.error("Expected an odd number of arguments.");let m;f.expectedType&&f.expectedType.kind!=="value"&&(m=f.expectedType);let _=[];for(let I=1;I<l.length-1;I+=2){let C=f.parse(l[I],I,Er);if(!C)return null;let N=f.parse(l[I+1],I+1,m);if(!N)return null;_.push([C,N]),m=m||N.type}let S=f.parse(l[l.length-1],l.length-1,m);if(!S)return null;if(!m)throw new Error("Can't infer output type");return new K1(m,_,S)}evaluate(l){for(let[f,m]of this.branches)if(f.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[f,m]of this.branches)l(f),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class py{constructor(l,f,m,_){this.type=l,this.input=f,this.beginIndex=m,this.endIndex=_}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Le),_=f.parse(l[2],2,St);if(!m||!_)return null;if(!be(m.type,[$(Le),Vr,Le]))return f.error(`Expected first argument to be of type array or string, but found ${W(m.type)} instead`);if(l.length===4){let S=f.parse(l[3],3,St);return S?new py(m.type,m,_,S):null}return new py(m.type,m,_)}evaluate(l){let f=this.input.evaluate(l),m=this.beginIndex.evaluate(l),_;if(this.endIndex&&(_=this.endIndex.evaluate(l)),De(f,["string"]))return[...f].slice(m,_).join("");if(De(f,["array"]))return f.slice(m,_);throw new wi(`Expected first argument to be of type array or string, but found ${W(Ni(f))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function X1(c,l){let f=c.length-1,m,_,S=0,I=f,C=0;for(;S<=I;)if(C=Math.floor((S+I)/2),m=c[C],_=c[C+1],m<=l){if(C===f||l<_)return C;S=C+1}else{if(!(m>l))throw new wi("Input is not a number.");I=C-1}return 0}class Tm{constructor(l,f,m){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(let[_,S]of m)this.labels.push(_),this.outputs.push(S)}static parse(l,f){if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");let m=f.parse(l[1],1,St);if(!m)return null;let _=[],S=null;f.expectedType&&f.expectedType.kind!=="value"&&(S=f.expectedType);for(let I=1;I<l.length;I+=2){let C=I===1?-1/0:l[I],N=l[I+1],j=I,z=I+1;if(typeof C!="number")return f.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",j);if(_.length&&_[_.length-1][0]>=C)return f.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",j);let B=f.parse(N,z,S);if(!B)return null;S=S||B.type,_.push([C,B])}return new Tm(S,m,_)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let S=f.length;return _>=f[S-1]?m[S-1].evaluate(l):m[X1(f,_)].evaluate(l)}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function qD(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var eF=zD;function zD(c,l,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=l,this.p2x=f,this.p2y=m}zD.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,l){if(l===void 0&&(l=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var _=this.sampleCurveX(f)-c;if(Math.abs(_)<l)return f;var S=this.sampleCurveDerivativeX(f);if(Math.abs(S)<1e-6)break;f-=_/S}var I=0,C=1;for(f=c,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-c)<l));m++)c>_?I=f:C=f,f=.5*(C-I)+I;return f},solve:function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))}};var tF=qD(eF);function Gd(c,l,f){return c+f*(l-c)}function dy(c,l,f){return c.map((m,_)=>Gd(m,l[_],f))}let As={number:Gd,color:function(c,l,f,m="rgb"){switch(m){case"rgb":{let[_,S,I,C]=dy(c.rgb,l.rgb,f);return new to(_,S,I,C,!1)}case"hcl":{let[_,S,I,C]=c.hcl,[N,j,z,B]=l.hcl,Y,K;if(isNaN(_)||isNaN(N))isNaN(_)?isNaN(N)?Y=NaN:(Y=N,I!==1&&I!==0||(K=j)):(Y=_,z!==1&&z!==0||(K=S));else{let $e=N-_;N>_&&$e>180?$e-=360:N<_&&_-N>180&&($e+=360),Y=_+f*$e}let[te,oe,pe,ve]=function([$e,Ce,He,rt]){return $e=isNaN($e)?0:$e*Sr,ii([He,Math.cos($e)*Ce,Math.sin($e)*Ce,rt])}([Y,K!=null?K:Gd(S,j,f),Gd(I,z,f),Gd(C,B,f)]);return new to(te,oe,pe,ve,!1)}case"lab":{let[_,S,I,C]=ii(dy(c.lab,l.lab,f));return new to(_,S,I,C,!1)}}},array:dy,padding:function(c,l,f){return new pl(dy(c.values,l.values,f))},variableAnchorOffsetCollection:function(c,l,f){let m=c.values,_=l.values;if(m.length!==_.length)throw new wi(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${l.toString()}`);let S=[];for(let I=0;I<m.length;I+=2){if(m[I]!==_[I])throw new wi(`Cannot interpolate values containing mismatched anchors. from[${I}]: ${m[I]}, to[${I}]: ${_[I]}`);S.push(m[I]);let[C,N]=m[I+1],[j,z]=_[I+1];S.push([Gd(C,j,f),Gd(N,z,f)])}return new zl(S)}};class Ds{constructor(l,f,m,_,S){this.type=l,this.operator=f,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(let[I,C]of S)this.labels.push(I),this.outputs.push(C)}static interpolationFactor(l,f,m,_){let S=0;if(l.name==="exponential")S=J1(f,l.base,m,_);else if(l.name==="linear")S=J1(f,1,m,_);else if(l.name==="cubic-bezier"){let I=l.controlPoints;S=new tF(I[0],I[1],I[2],I[3]).solve(J1(f,1,m,_))}return S}static parse(l,f){let[m,_,S,...I]=l;if(!Array.isArray(_)||_.length===0)return f.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){let j=_[1];if(typeof j!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:j}}else{if(_[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(_[0])}`,1,0);{let j=_.slice(1);if(j.length!==4||j.some(z=>typeof z!="number"||z<0||z>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:j}}}if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(S=f.parse(S,2,St),!S)return null;let C=[],N=null;m==="interpolate-hcl"||m==="interpolate-lab"?N=Qi:f.expectedType&&f.expectedType.kind!=="value"&&(N=f.expectedType);for(let j=0;j<I.length;j+=2){let z=I[j],B=I[j+1],Y=j+3,K=j+4;if(typeof z!="number")return f.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",Y);if(C.length&&C[C.length-1][0]>=z)return f.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",Y);let te=f.parse(B,K,N);if(!te)return null;N=N||te.type,C.push([z,te])}return Re(N,St)||Re(N,Qi)||Re(N,Zt)||Re(N,ae)||Re(N,$(St))?new Ds(N,m,_,S,C):f.error(`Type ${W(N)} is not interpolatable.`)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let S=f.length;if(_>=f[S-1])return m[S-1].evaluate(l);let I=X1(f,_),C=Ds.interpolationFactor(this.interpolation,_,f[I],f[I+1]),N=m[I].evaluate(l),j=m[I+1].evaluate(l);switch(this.operator){case"interpolate":return As[this.type.kind](N,j,C);case"interpolate-hcl":return As.color(N,j,C,"hcl");case"interpolate-lab":return As.color(N,j,C,"lab");}}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function J1(c,l,f,m){let _=m-f,S=c-f;return _===0?0:l===1?S/_:(Math.pow(l,S)-1)/(Math.pow(l,_)-1)}class Q1{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expectected at least one argument.");let m=null,_=f.expectedType;_&&_.kind!=="value"&&(m=_);let S=[];for(let C of l.slice(1)){let N=f.parse(C,1+S.length,m,void 0,{typeAnnotation:"omit"});if(!N)return null;m=m||N.type,S.push(N)}if(!m)throw new Error("No output type");let I=_&&S.some(C=>se(_,C.type));return new Q1(I?Le:m,S)}evaluate(l){let f,m=null,_=0;for(let S of this.args)if(_++,m=S.evaluate(l),m&&m instanceof dl&&!m.available&&(f||(f=m.name),m=null,_===this.args.length&&(m=f)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function e_(c,l){return c==="=="||c==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function FD(c,l,f,m){return m.compare(l,f)===0}function Mm(c,l,f){let m=c!=="=="&&c!=="!=";return class jFe{constructor(S,I,C){this.type=Er,this.lhs=S,this.rhs=I,this.collator=C,this.hasUntypedArgument=S.type.kind==="value"||I.type.kind==="value"}static parse(S,I){if(S.length!==3&&S.length!==4)return I.error("Expected two or three arguments.");let C=S[0],N=I.parse(S[1],1,Le);if(!N)return null;if(!e_(C,N.type))return I.concat(1).error(`"${C}" comparisons are not supported for type '${W(N.type)}'.`);let j=I.parse(S[2],2,Le);if(!j)return null;if(!e_(C,j.type))return I.concat(2).error(`"${C}" comparisons are not supported for type '${W(j.type)}'.`);if(N.type.kind!==j.type.kind&&N.type.kind!=="value"&&j.type.kind!=="value")return I.error(`Cannot compare types '${W(N.type)}' and '${W(j.type)}'.`);m&&(N.type.kind==="value"&&j.type.kind!=="value"?N=new Nu(j.type,[N]):N.type.kind!=="value"&&j.type.kind==="value"&&(j=new Nu(N.type,[j])));let z=null;if(S.length===4){if(N.type.kind!=="string"&&j.type.kind!=="string"&&N.type.kind!=="value"&&j.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(z=I.parse(S[3],3,Ve),!z)return null}return new jFe(N,j,z)}evaluate(S){let I=this.lhs.evaluate(S),C=this.rhs.evaluate(S);if(m&&this.hasUntypedArgument){let N=Ni(I),j=Ni(C);if(N.kind!==j.kind||N.kind!=="string"&&N.kind!=="number")throw new wi(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${N.kind}, ${j.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){let N=Ni(I),j=Ni(C);if(N.kind!=="string"||j.kind!=="string")return l(S,I,C)}return this.collator?f(S,I,C,this.collator.evaluate(S)):l(S,I,C)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}let rF=Mm("==",function(c,l,f){return l===f},FD),UD=Mm("!=",function(c,l,f){return l!==f},function(c,l,f,m){return!FD(0,l,f,m)}),BD=Mm("<",function(c,l,f){return l<f},function(c,l,f,m){return m.compare(l,f)<0}),nF=Mm(">",function(c,l,f){return l>f},function(c,l,f,m){return m.compare(l,f)>0}),oF=Mm("<=",function(c,l,f){return l<=f},function(c,l,f,m){return m.compare(l,f)<=0}),VD=Mm(">=",function(c,l,f){return l>=f},function(c,l,f,m){return m.compare(l,f)>=0});class hy{constructor(l,f,m){this.type=Ve,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=f}static parse(l,f){if(l.length!==2)return f.error("Expected one argument.");let m=l[1];if(typeof m!="object"||Array.isArray(m))return f.error("Collator options argument must be an object.");let _=f.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Er);if(!_)return null;let S=f.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Er);if(!S)return null;let I=null;return m.locale&&(I=f.parse(m.locale,1,Vr),!I)?null:new hy(_,S,I)}evaluate(l){return new YE(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class eS{constructor(l,f,m,_,S){this.type=Vr,this.number=l,this.locale=f,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(l,f){if(l.length!==3)return f.error("Expected two arguments.");let m=f.parse(l[1],1,St);if(!m)return null;let _=l[2];if(typeof _!="object"||Array.isArray(_))return f.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=f.parse(_.locale,1,Vr),!S))return null;let I=null;if(_.currency&&(I=f.parse(_.currency,1,Vr),!I))return null;let C=null;if(_["min-fraction-digits"]&&(C=f.parse(_["min-fraction-digits"],1,St),!C))return null;let N=null;return _["max-fraction-digits"]&&(N=f.parse(_["max-fraction-digits"],1,St),!N)?null:new eS(m,S,I,C,N)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class t_{constructor(l){this.type=wt,this.sections=l}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[1];if(!Array.isArray(m)&&typeof m=="object")return f.error("First argument must be an image or text section.");let _=[],S=!1;for(let I=1;I<=l.length-1;++I){let C=l[I];if(S&&typeof C=="object"&&!Array.isArray(C)){S=!1;let N=null;if(C["font-scale"]&&(N=f.parse(C["font-scale"],1,St),!N))return null;let j=null;if(C["text-font"]&&(j=f.parse(C["text-font"],1,$(Vr)),!j))return null;let z=null;if(C["text-color"]&&(z=f.parse(C["text-color"],1,Qi),!z))return null;let B=_[_.length-1];B.scale=N,B.font=j,B.textColor=z}else{let N=f.parse(l[I],1,Le);if(!N)return null;let j=N.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:N,scale:null,font:null,textColor:null})}}return new t_(_)}evaluate(l){return new fl(this.sections.map(f=>{let m=f.content.evaluate(l);return Ni(m)===Ht?new ZE("",m,null,null,null):new ZE(fy(m),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null)}))}eachChild(l){for(let f of this.sections)l(f.content),f.scale&&l(f.scale),f.font&&l(f.font),f.textColor&&l(f.textColor)}outputDefined(){return!1}}class tS{constructor(l){this.type=Ht,this.input=l}static parse(l,f){if(l.length!==2)return f.error("Expected two arguments.");let m=f.parse(l[1],1,Vr);return m?new tS(m):f.error("No image name provided.")}evaluate(l){let f=this.input.evaluate(l),m=dl.fromString(f);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(f)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class rS{constructor(l){this.type=St,this.input=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);let m=f.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${W(m.type)} instead.`):new rS(m):null}evaluate(l){let f=this.input.evaluate(l);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new wi(`Expected value to be of type string or array, but found ${W(Ni(f))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let lc=8192;function iF(c,l){let f=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(f*_*lc),Math.round(m*_*lc)]}function nS(c,l){let f=Math.pow(2,l.z);return[(_=(c[0]/lc+l.x)/f,360*_-180),(m=(c[1]/lc+l.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,_}function Hd(c,l){c[0]=Math.min(c[0],l[0]),c[1]=Math.min(c[1],l[1]),c[2]=Math.max(c[2],l[0]),c[3]=Math.max(c[3],l[1])}function gp(c,l){return!(c[0]<=l[0]||c[2]>=l[2]||c[1]<=l[1]||c[3]>=l[3])}function Wn(c,l,f){let m=c[0]-l[0],_=c[1]-l[1],S=c[0]-f[0],I=c[1]-f[1];return m*I-S*_==0&&m*S<=0&&_*I<=0}function r_(c,l,f,m){return(_=[m[0]-f[0],m[1]-f[1]])[0]*(S=[l[0]-c[0],l[1]-c[1]])[1]-_[1]*S[0]!=0&&!(!HD(c,l,f,m)||!HD(f,m,c,l));var _,S}function aF(c,l,f){for(let m of f)for(let _=0;_<m.length-1;++_)if(r_(c,l,m[_],m[_+1]))return!0;return!1}function Cm(c,l,f=!1){let m=!1;for(let C of l)for(let N=0;N<C.length-1;N++){if(Wn(c,C[N],C[N+1]))return f;(S=C[N])[1]>(_=c)[1]!=(I=C[N+1])[1]>_[1]&&_[0]<(I[0]-S[0])*(_[1]-S[1])/(I[1]-S[1])+S[0]&&(m=!m)}var _,S,I;return m}function sF(c,l){for(let f of l)if(Cm(c,f))return!0;return!1}function GD(c,l){for(let f of c)if(!Cm(f,l))return!1;for(let f=0;f<c.length-1;++f)if(aF(c[f],c[f+1],l))return!1;return!0}function lF(c,l){for(let f of l)if(GD(c,f))return!0;return!1}function HD(c,l,f,m){let _=m[0]-f[0],S=m[1]-f[1],I=(c[0]-f[0])*S-_*(c[1]-f[1]),C=(l[0]-f[0])*S-_*(l[1]-f[1]);return I>0&&C<0||I<0&&C>0}function oS(c,l,f){let m=[];for(let _=0;_<c.length;_++){let S=[];for(let I=0;I<c[_].length;I++){let C=iF(c[_][I],f);Hd(l,C),S.push(C)}m.push(S)}return m}function WD(c,l,f){let m=[];for(let _=0;_<c.length;_++){let S=oS(c[_],l,f);m.push(S)}return m}function $D(c,l,f,m){if(c[0]<f[0]||c[0]>f[2]){let _=.5*m,S=c[0]-f[0]>_?-m:f[0]-c[0]>_?m:0;S===0&&(S=c[0]-f[2]>_?-m:f[2]-c[0]>_?m:0),c[0]+=S}Hd(l,c)}function YD(c,l,f,m){let _=Math.pow(2,m.z)*lc,S=[m.x*lc,m.y*lc],I=[];for(let C of c)for(let N of C){let j=[N.x+S[0],N.y+S[1]];$D(j,l,f,_),I.push(j)}return I}function ZD(c,l,f,m){let _=Math.pow(2,m.z)*lc,S=[m.x*lc,m.y*lc],I=[];for(let N of c){let j=[];for(let z of N){let B=[z.x+S[0],z.y+S[1]];Hd(l,B),j.push(B)}I.push(j)}if(l[2]-l[0]<=_/2){(C=l)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let N of I)for(let j of N)$D(j,l,f,_)}var C;return I}class Wd{constructor(l,f){this.type=Er,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Bd(l[1])){let m=l[1];if(m.type==="FeatureCollection"){let _=[];for(let S of m.features){let{type:I,coordinates:C}=S.geometry;I==="Polygon"&&_.push(C),I==="MultiPolygon"&&_.push(...C)}if(_.length)return new Wd(m,{type:"MultiPolygon",coordinates:_})}else if(m.type==="Feature"){let _=m.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Wd(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Wd(m,m)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=f.canonicalID();if(m.type==="Polygon"){let C=oS(m.coordinates,S,I),N=YD(f.geometry(),_,S,I);if(!gp(_,S))return!1;for(let j of N)if(!Cm(j,C))return!1}if(m.type==="MultiPolygon"){let C=WD(m.coordinates,S,I),N=YD(f.geometry(),_,S,I);if(!gp(_,S))return!1;for(let j of N)if(!sF(j,C))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=f.canonicalID();if(m.type==="Polygon"){let C=oS(m.coordinates,S,I),N=ZD(f.geometry(),_,S,I);if(!gp(_,S))return!1;for(let j of N)if(!GD(j,C))return!1}if(m.type==="MultiPolygon"){let C=WD(m.coordinates,S,I),N=ZD(f.geometry(),_,S,I);if(!gp(_,S))return!1;for(let j of N)if(!lF(j,C))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let KD=class{constructor(c=[],l=(f,m)=>f<m?-1:f>m?1:0){if(this.data=c,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;let c=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),c}peek(){return this.data[0]}_up(c){let{data:l,compare:f}=this,m=l[c];for(;c>0;){let _=c-1>>1,S=l[_];if(f(m,S)>=0)break;l[c]=S,c=_}l[c]=m}_down(c){let{data:l,compare:f}=this,m=this.length>>1,_=l[c];for(;c<m;){let S=1+(c<<1),I=S+1;if(I<this.length&&f(l[I],l[S])<0&&(S=I),f(l[S],_)>=0)break;l[c]=l[S],c=S}l[c]=_}};function uF(c,l,f,m,_){XD(c,l,f,m||c.length-1,_||cF)}function XD(c,l,f,m,_){for(;m>f;){if(m-f>600){var S=m-f+1,I=l-f+1,C=Math.log(S),N=.5*Math.exp(2*C/3),j=.5*Math.sqrt(C*N*(S-N)/S)*(I-S/2<0?-1:1);XD(c,l,Math.max(f,Math.floor(l-I*N/S+j)),Math.min(m,Math.floor(l+(S-I)*N/S+j)),_)}var z=c[l],B=f,Y=m;for(my(c,f,l),_(c[m],z)>0&&my(c,f,m);B<Y;){for(my(c,B,Y),B++,Y--;_(c[B],z)<0;)B++;for(;_(c[Y],z)>0;)Y--}_(c[f],z)===0?my(c,f,Y):my(c,++Y,m),Y<=l&&(f=Y+1),l<=Y&&(m=Y-1)}}function my(c,l,f){var m=c[l];c[l]=c[f],c[f]=m}function cF(c,l){return c<l?-1:c>l?1:0}function n_(c,l){if(c.length<=1)return[c];let f=[],m,_;for(let S of c){let I=pF(S);I!==0&&(S.area=Math.abs(I),_===void 0&&(_=I<0),_===I<0?(m&&f.push(m),m=[S]):m.push(S))}if(m&&f.push(m),l>1)for(let S=0;S<f.length;S++)f[S].length<=l||(uF(f[S],l,1,f[S].length-1,fF),f[S]=f[S].slice(0,l));return f}function fF(c,l){return l.area-c.area}function pF(c){let l=0;for(let f,m,_=0,S=c.length,I=S-1;_<S;I=_++)f=c[_],m=c[I],l+=(m.x-f.x)*(f.y+m.y);return l}let JD=1/298.257223563,QD=JD*(2-JD),e4=Math.PI/180;class iS{constructor(l){let f=6378.137*e4*1e3,m=Math.cos(l*e4),_=1/(1-QD*(1-m*m)),S=Math.sqrt(_);this.kx=f*S*m,this.ky=f*S*_*(1-QD)}distance(l,f){let m=this.wrap(l[0]-f[0])*this.kx,_=(l[1]-f[1])*this.ky;return Math.sqrt(m*m+_*_)}pointOnLine(l,f){let m,_,S,I,C=1/0;for(let N=0;N<l.length-1;N++){let j=l[N][0],z=l[N][1],B=this.wrap(l[N+1][0]-j)*this.kx,Y=(l[N+1][1]-z)*this.ky,K=0;B===0&&Y===0||(K=(this.wrap(f[0]-j)*this.kx*B+(f[1]-z)*this.ky*Y)/(B*B+Y*Y),K>1?(j=l[N+1][0],z=l[N+1][1]):K>0&&(j+=B/this.kx*K,z+=Y/this.ky*K)),B=this.wrap(f[0]-j)*this.kx,Y=(f[1]-z)*this.ky;let te=B*B+Y*Y;te<C&&(C=te,m=j,_=z,S=N,I=K)}return{point:[m,_],index:S,t:Math.max(0,Math.min(1,I))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function t4(c,l){return l[0]-c[0]}function o_(c){return c[1]-c[0]+1}function _f(c,l){return c[1]>=c[0]&&c[1]<l}function aS(c,l){if(c[0]>c[1])return[null,null];let f=o_(c);if(l){if(f===2)return[c,null];let _=Math.floor(f/2);return[[c[0],c[0]+_],[c[0]+_,c[1]]]}if(f===1)return[c,null];let m=Math.floor(f/2)-1;return[[c[0],c[0]+m],[c[0]+m+1,c[1]]]}function sS(c,l){if(!_f(l,c.length))return[1/0,1/0,-1/0,-1/0];let f=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)Hd(f,c[m]);return f}function lS(c){let l=[1/0,1/0,-1/0,-1/0];for(let f of c)for(let m of f)Hd(l,m);return l}function i_(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function uS(c,l,f){if(!i_(c)||!i_(l))return NaN;let m=0,_=0;return c[2]<l[0]&&(m=l[0]-c[2]),c[0]>l[2]&&(m=c[0]-l[2]),c[1]>l[3]&&(_=c[1]-l[3]),c[3]<l[1]&&(_=l[1]-c[3]),f.distance([0,0],[m,_])}function $d(c,l,f){let m=f.pointOnLine(l,c);return f.distance(c,m.point)}function cS(c,l,f,m,_){let S=Math.min($d(c,[f,m],_),$d(l,[f,m],_)),I=Math.min($d(f,[c,l],_),$d(m,[c,l],_));return Math.min(S,I)}function dF(c,l,f,m,_){if(!_f(l,c.length)||!_f(m,f.length))return 1/0;let S=1/0;for(let I=l[0];I<l[1];++I){let C=c[I],N=c[I+1];for(let j=m[0];j<m[1];++j){let z=f[j],B=f[j+1];if(r_(C,N,z,B))return 0;S=Math.min(S,cS(C,N,z,B,_))}}return S}function hi(c,l,f,m,_){if(!_f(l,c.length)||!_f(m,f.length))return NaN;let S=1/0;for(let I=l[0];I<=l[1];++I)for(let C=m[0];C<=m[1];++C)if(S=Math.min(S,_.distance(c[I],f[C])),S===0)return S;return S}function hF(c,l,f){if(Cm(c,l,!0))return 0;let m=1/0;for(let _ of l){let S=_[0],I=_[_.length-1];if(S!==I&&(m=Math.min(m,$d(c,[I,S],f)),m===0))return m;let C=f.pointOnLine(_,c);if(m=Math.min(m,f.distance(c,C.point)),m===0)return m}return m}function un(c,l,f,m){if(!_f(l,c.length))return NaN;for(let S=l[0];S<=l[1];++S)if(Cm(c[S],f,!0))return 0;let _=1/0;for(let S=l[0];S<l[1];++S){let I=c[S],C=c[S+1];for(let N of f)for(let j=0,z=N.length,B=z-1;j<z;B=j++){let Y=N[B],K=N[j];if(r_(I,C,Y,K))return 0;_=Math.min(_,cS(I,C,Y,K,m))}}return _}function a_(c,l){for(let f of c)for(let m of f)if(Cm(m,l,!0))return!0;return!1}function yo(c,l,f,m=1/0){let _=lS(c),S=lS(l);if(m!==1/0&&uS(_,S,f)>=m)return m;if(gp(_,S)){if(a_(c,l))return 0}else if(a_(l,c))return 0;let I=1/0;for(let C of c)for(let N=0,j=C.length,z=j-1;N<j;z=N++){let B=C[z],Y=C[N];for(let K of l)for(let te=0,oe=K.length,pe=oe-1;te<oe;pe=te++){let ve=K[pe],$e=K[te];if(r_(B,Y,ve,$e))return 0;I=Math.min(I,cS(B,Y,ve,$e,f))}}return I}function lo(c,l,f,m,_,S){if(!S)return;let I=uS(sS(m,S),_,f);I<l&&c.push([I,S,[0,0]])}function Yd(c,l,f,m,_,S,I){if(!S||!I)return;let C=uS(sS(m,S),sS(_,I),f);C<l&&c.push([C,S,I])}function gy(c,l,f,m,_=1/0){let S=Math.min(m.distance(c[0],f[0][0]),_);if(S===0)return S;let I=new KD([[0,[0,c.length-1],[0,0]]],t4),C=lS(f);for(;I.length>0;){let N=I.pop();if(N[0]>=S)continue;let j=N[1],z=l?50:100;if(o_(j)<=z){if(!_f(j,c.length))return NaN;if(l){let B=un(c,j,f,m);if(isNaN(B)||B===0)return B;S=Math.min(S,B)}else for(let B=j[0];B<=j[1];++B){let Y=hF(c[B],f,m);if(S=Math.min(S,Y),S===0)return 0}}else{let B=aS(j,l);lo(I,S,m,c,C,B[0]),lo(I,S,m,c,C,B[1])}}return S}function vy(c,l,f,m,_,S=1/0){let I=Math.min(S,_.distance(c[0],f[0]));if(I===0)return I;let C=new KD([[0,[0,c.length-1],[0,f.length-1]]],t4);for(;C.length>0;){let N=C.pop();if(N[0]>=I)continue;let j=N[1],z=N[2],B=l?50:100,Y=m?50:100;if(o_(j)<=B&&o_(z)<=Y){if(!_f(j,c.length)&&_f(z,f.length))return NaN;let K;if(l&&m)K=dF(c,j,f,z,_),I=Math.min(I,K);else if(l&&!m){let te=c.slice(j[0],j[1]+1);for(let oe=z[0];oe<=z[1];++oe)if(K=$d(f[oe],te,_),I=Math.min(I,K),I===0)return I}else if(!l&&m){let te=f.slice(z[0],z[1]+1);for(let oe=j[0];oe<=j[1];++oe)if(K=$d(c[oe],te,_),I=Math.min(I,K),I===0)return I}else K=hi(c,j,f,z,_),I=Math.min(I,K)}else{let K=aS(j,l),te=aS(z,m);Yd(C,I,_,c,f,K[0],te[0]),Yd(C,I,_,c,f,K[0],te[1]),Yd(C,I,_,c,f,K[1],te[0]),Yd(C,I,_,c,f,K[1],te[1])}}return I}function fS(c){return c.type==="MultiPolygon"?c.coordinates.map(l=>({type:"Polygon",coordinates:l})):c.type==="MultiLineString"?c.coordinates.map(l=>({type:"LineString",coordinates:l})):c.type==="MultiPoint"?c.coordinates.map(l=>({type:"Point",coordinates:l})):[c]}class Zd{constructor(l,f){this.type=St,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Bd(l[1])){let m=l[1];if(m.type==="FeatureCollection")return new Zd(m,m.features.map(_=>fS(_.geometry)).flat());if(m.type==="Feature")return new Zd(m,fS(m.geometry));if("type"in m&&"coordinates"in m)return new Zd(m,fS(m))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=f.geometry(),S=_.flat().map(N=>nS([N.x,N.y],f.canonical));if(_.length===0)return NaN;let I=new iS(S[0][1]),C=1/0;for(let N of m){switch(N.type){case"Point":C=Math.min(C,vy(S,!1,[N.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,vy(S,!1,N.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,gy(S,!1,N.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=f.geometry(),S=_.flat().map(N=>nS([N.x,N.y],f.canonical));if(_.length===0)return NaN;let I=new iS(S[0][1]),C=1/0;for(let N of m){switch(N.type){case"Point":C=Math.min(C,vy(S,!0,[N.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,vy(S,!0,N.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,gy(S,!0,N.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="Polygon")return function(f,m){let _=f.geometry();if(_.length===0||_[0].length===0)return NaN;let S=n_(_,0).map(N=>N.map(j=>j.map(z=>nS([z.x,z.y],f.canonical)))),I=new iS(S[0][0][0][1]),C=1/0;for(let N of m)for(let j of S){switch(N.type){case"Point":C=Math.min(C,gy([N.coordinates],!1,j,I,C));break;case"LineString":C=Math.min(C,gy(N.coordinates,!0,j,I,C));break;case"Polygon":C=Math.min(C,yo(j,N.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let Am={"==":rF,"!=":UD,">":nF,"<":BD,">=":VD,"<=":oF,array:Nu,at:XE,boolean:Nu,case:K1,coalesce:Q1,collator:hy,format:t_,image:tS,in:JE,"index-of":Im,interpolate:Ds,"interpolate-hcl":Ds,"interpolate-lab":Ds,length:rS,let:mp,literal:Du,match:QE,number:Nu,"number-format":eS,object:Nu,slice:py,step:Tm,string:Nu,"to-boolean":Ou,"to-color":Ou,"to-number":Ou,"to-string":Ou,var:Fn,within:Wd,distance:Zd};class Fl{constructor(l,f,m,_){this.name=l,this.type=f,this._evaluate=m,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,f){let m=l[0],_=Fl.definitions[m];if(!_)return f.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);let S=Array.isArray(_)?_[0]:_.type,I=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,C=I.filter(([j])=>!Array.isArray(j)||j.length===l.length-1),N=null;for(let[j,z]of C){N=new Vd(f.registry,yy,f.path,null,f.scope);let B=[],Y=!1;for(let K=1;K<l.length;K++){let te=l[K],oe=Array.isArray(j)?j[K-1]:j.type,pe=N.parse(te,1+B.length,oe);if(!pe){Y=!0;break}B.push(pe)}if(!Y)if(Array.isArray(j)&&j.length!==B.length)N.error(`Expected ${j.length} arguments, but found ${B.length} instead.`);else{for(let K=0;K<B.length;K++){let te=Array.isArray(j)?j[K]:j.type,oe=B[K];N.concat(K+1).checkSubtype(te,oe.type)}if(N.errors.length===0)return new Fl(m,S,z,B)}}if(C.length===1)f.errors.push(...N.errors);else{let j=(C.length?C:I).map(([B])=>{return Y=B,Array.isArray(Y)?`(${Y.map(W).join(", ")})`:`(${W(Y.type)}...)`;var Y}).join(" | "),z=[];for(let B=1;B<l.length;B++){let Y=f.parse(l[B],1+z.length);if(!Y)return null;z.push(W(Y.type))}f.error(`Expected arguments of type ${j}, but found (${z.join(", ")}) instead.`)}return null}static register(l,f){Fl.definitions=f;for(let m in f)l[m]=Fl}}function pS(c,[l,f,m,_]){l=l.evaluate(c),f=f.evaluate(c),m=m.evaluate(c);let S=_?_.evaluate(c):1,I=Sm(l,f,m,S);if(I)throw new wi(I);return new to(l/255,f/255,m/255,S,!1)}function dS(c,l){return c in l}function hS(c,l){let f=l[c];return f===void 0?null:f}function Kd(c){return{type:c}}function yy(c){if(c instanceof Fn)return yy(c.boundExpression);if(c instanceof Fl&&c.name==="error"||c instanceof hy||c instanceof Wd||c instanceof Zd)return!1;let l=c instanceof Ou||c instanceof Nu,f=!0;return c.eachChild(m=>{f=l?f&&yy(m):f&&m instanceof Du}),!!f&&_y(c)&&xy(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function _y(c){if(c instanceof Fl&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Wd||c instanceof Zd)return!1;let l=!0;return c.eachChild(f=>{l&&!_y(f)&&(l=!1)}),l}function Dm(c){if(c instanceof Fl&&c.name==="feature-state")return!1;let l=!0;return c.eachChild(f=>{l&&!Dm(f)&&(l=!1)}),l}function xy(c,l){if(c instanceof Fl&&l.indexOf(c.name)>=0)return!1;let f=!0;return c.eachChild(m=>{f&&!xy(m,l)&&(f=!1)}),f}function s_(c){return{result:"success",value:c}}function Nm(c){return{result:"error",value:c}}function Om(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function r4(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function mS(c){return!!c.expression&&c.expression.interpolated}function jn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function l_(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function mF(c){return c}function n4(c,l){let f=l.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",_=m||!(m||c.property!==void 0),S=c.type||(mS(l)?"exponential":"interval");if(f||l.type==="padding"){let z=f?to.parse:pl.parse;(c=zr({},c)).stops&&(c.stops=c.stops.map(B=>[B[0],z(B[1])])),c.default=z(c.default?c.default:l.default)}if(c.colorSpace&&(I=c.colorSpace)!=="rgb"&&I!=="hcl"&&I!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var I;let C,N,j;if(S==="exponential")C=i4;else if(S==="interval")C=u_;else if(S==="categorical"){C=o4,N=Object.create(null);for(let z of c.stops)N[z[0]]=z[1];j=typeof c.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);C=a4}if(m){let z={},B=[];for(let te=0;te<c.stops.length;te++){let oe=c.stops[te],pe=oe[0].zoom;z[pe]===void 0&&(z[pe]={zoom:pe,type:c.type,property:c.property,default:c.default,stops:[]},B.push(pe)),z[pe].stops.push([oe[0].value,oe[1]])}let Y=[];for(let te of B)Y.push([z[te].zoom,n4(z[te],l)]);let K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Ds.interpolationFactor.bind(void 0,K),zoomStops:Y.map(te=>te[0]),evaluate:({zoom:te},oe)=>i4({stops:Y,base:c.base},l,te).evaluate(te,oe)}}if(_){let z=S==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Ds.interpolationFactor.bind(void 0,z),zoomStops:c.stops.map(B=>B[0]),evaluate:({zoom:B})=>C(c,l,B,N,j)}}return{kind:"source",evaluate(z,B){let Y=B&&B.properties?B.properties[c.property]:void 0;return Y===void 0?Lm(c.default,l.default):C(c,l,Y,N,j)}}}function Lm(c,l,f){return c!==void 0?c:l!==void 0?l:f!==void 0?f:void 0}function o4(c,l,f,m,_){return Lm(typeof f===_?m[f]:void 0,c.default,l.default)}function u_(c,l,f){if(jn(f)!=="number")return Lm(c.default,l.default);let m=c.stops.length;if(m===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[m-1][0])return c.stops[m-1][1];let _=X1(c.stops.map(S=>S[0]),f);return c.stops[_][1]}function i4(c,l,f){let m=c.base!==void 0?c.base:1;if(jn(f)!=="number")return Lm(c.default,l.default);let _=c.stops.length;if(_===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[_-1][0])return c.stops[_-1][1];let S=X1(c.stops.map(z=>z[0]),f),I=function(z,B,Y,K){let te=K-Y,oe=z-Y;return te===0?0:B===1?oe/te:(Math.pow(B,oe)-1)/(Math.pow(B,te)-1)}(f,m,c.stops[S][0],c.stops[S+1][0]),C=c.stops[S][1],N=c.stops[S+1][1],j=As[l.type]||mF;return typeof C.evaluate=="function"?{evaluate(...z){let B=C.evaluate.apply(void 0,z),Y=N.evaluate.apply(void 0,z);if(B!==void 0&&Y!==void 0)return j(B,Y,I,c.colorSpace)}}:j(C,N,I,c.colorSpace)}function a4(c,l,f){switch(l.type){case"color":f=to.parse(f);break;case"formatted":f=fl.fromString(f.toString());break;case"resolvedImage":f=dl.fromString(f.toString());break;case"padding":f=pl.parse(f);break;default:jn(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0);}return Lm(f,c.default,l.default)}Fl.register(Am,{error:[{kind:"error"},[Vr],(c,[l])=>{throw new wi(l.evaluate(c))}],typeof:[Vr,[Le],(c,[l])=>W(Ni(l.evaluate(c)))],"to-rgba":[$(St,4),[Qi],(c,[l])=>{let[f,m,_,S]=l.evaluate(c).rgb;return[255*f,255*m,255*_,S]}],rgb:[Qi,[St,St,St],pS],rgba:[Qi,[St,St,St,St],pS],has:{type:Er,overloads:[[[Vr],(c,[l])=>dS(l.evaluate(c),c.properties())],[[Vr,Ta],(c,[l,f])=>dS(l.evaluate(c),f.evaluate(c))]]},get:{type:Le,overloads:[[[Vr],(c,[l])=>hS(l.evaluate(c),c.properties())],[[Vr,Ta],(c,[l,f])=>hS(l.evaluate(c),f.evaluate(c))]]},"feature-state":[Le,[Vr],(c,[l])=>hS(l.evaluate(c),c.featureState||{})],properties:[Ta,[],c=>c.properties()],"geometry-type":[Vr,[],c=>c.geometryType()],id:[Le,[],c=>c.id()],zoom:[St,[],c=>c.globals.zoom],"heatmap-density":[St,[],c=>c.globals.heatmapDensity||0],"line-progress":[St,[],c=>c.globals.lineProgress||0],accumulated:[Le,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[St,Kd(St),(c,l)=>{let f=0;for(let m of l)f+=m.evaluate(c);return f}],"*":[St,Kd(St),(c,l)=>{let f=1;for(let m of l)f*=m.evaluate(c);return f}],"-":{type:St,overloads:[[[St,St],(c,[l,f])=>l.evaluate(c)-f.evaluate(c)],[[St],(c,[l])=>-l.evaluate(c)]]},"/":[St,[St,St],(c,[l,f])=>l.evaluate(c)/f.evaluate(c)],"%":[St,[St,St],(c,[l,f])=>l.evaluate(c)%f.evaluate(c)],ln2:[St,[],()=>Math.LN2],pi:[St,[],()=>Math.PI],e:[St,[],()=>Math.E],"^":[St,[St,St],(c,[l,f])=>Math.pow(l.evaluate(c),f.evaluate(c))],sqrt:[St,[St],(c,[l])=>Math.sqrt(l.evaluate(c))],log10:[St,[St],(c,[l])=>Math.log(l.evaluate(c))/Math.LN10],ln:[St,[St],(c,[l])=>Math.log(l.evaluate(c))],log2:[St,[St],(c,[l])=>Math.log(l.evaluate(c))/Math.LN2],sin:[St,[St],(c,[l])=>Math.sin(l.evaluate(c))],cos:[St,[St],(c,[l])=>Math.cos(l.evaluate(c))],tan:[St,[St],(c,[l])=>Math.tan(l.evaluate(c))],asin:[St,[St],(c,[l])=>Math.asin(l.evaluate(c))],acos:[St,[St],(c,[l])=>Math.acos(l.evaluate(c))],atan:[St,[St],(c,[l])=>Math.atan(l.evaluate(c))],min:[St,Kd(St),(c,l)=>Math.min(...l.map(f=>f.evaluate(c)))],max:[St,Kd(St),(c,l)=>Math.max(...l.map(f=>f.evaluate(c)))],abs:[St,[St],(c,[l])=>Math.abs(l.evaluate(c))],round:[St,[St],(c,[l])=>{let f=l.evaluate(c);return f<0?-Math.round(-f):Math.round(f)}],floor:[St,[St],(c,[l])=>Math.floor(l.evaluate(c))],ceil:[St,[St],(c,[l])=>Math.ceil(l.evaluate(c))],"filter-==":[Er,[Vr,Le],(c,[l,f])=>c.properties()[l.value]===f.value],"filter-id-==":[Er,[Le],(c,[l])=>c.id()===l.value],"filter-type-==":[Er,[Vr],(c,[l])=>c.geometryType()===l.value],"filter-<":[Er,[Vr,Le],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m<_}],"filter-id-<":[Er,[Le],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f<m}],"filter->":[Er,[Vr,Le],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m>_}],"filter-id->":[Er,[Le],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f>m}],"filter-<=":[Er,[Vr,Le],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[Er,[Le],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f<=m}],"filter->=":[Er,[Vr,Le],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[Er,[Le],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f>=m}],"filter-has":[Er,[Le],(c,[l])=>l.value in c.properties()],"filter-has-id":[Er,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Er,[$(Vr)],(c,[l])=>l.value.indexOf(c.geometryType())>=0],"filter-id-in":[Er,[$(Le)],(c,[l])=>l.value.indexOf(c.id())>=0],"filter-in-small":[Er,[Vr,$(Le)],(c,[l,f])=>f.value.indexOf(c.properties()[l.value])>=0],"filter-in-large":[Er,[Vr,$(Le)],(c,[l,f])=>function(m,_,S,I){for(;S<=I;){let C=S+I>>1;if(_[C]===m)return!0;_[C]>m?I=C-1:S=C+1}return!1}(c.properties()[l.value],f.value,0,f.value.length-1)],all:{type:Er,overloads:[[[Er,Er],(c,[l,f])=>l.evaluate(c)&&f.evaluate(c)],[Kd(Er),(c,l)=>{for(let f of l)if(!f.evaluate(c))return!1;return!0}]]},any:{type:Er,overloads:[[[Er,Er],(c,[l,f])=>l.evaluate(c)||f.evaluate(c)],[Kd(Er),(c,l)=>{for(let f of l)if(f.evaluate(c))return!0;return!1}]]},"!":[Er,[Er],(c,[l])=>!l.evaluate(c)],"is-supported-script":[Er,[Vr],(c,[l])=>{let f=c.globals&&c.globals.isSupportedScript;return!f||f(l.evaluate(c))}],upcase:[Vr,[Vr],(c,[l])=>l.evaluate(c).toUpperCase()],downcase:[Vr,[Vr],(c,[l])=>l.evaluate(c).toLowerCase()],concat:[Vr,Kd(Le),(c,l)=>l.map(f=>fy(f.evaluate(c))).join("")],"resolved-locale":[Vr,[Ve],(c,[l])=>l.evaluate(c).resolvedLocale()]});class c_{constructor(l,f){var m;this.expression=l,this._warningHistory={},this._evaluator=new Z1,this._defaultValue=f?(m=f).type==="color"&&l_(m.default)?new to(0,0,0,0):m.type==="color"?to.parse(m.default)||null:m.type==="padding"?pl.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?zl.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(l,f,m,_,S,I){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(l,f,m,_,S,I){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new wi(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console!="undefined"&&console.warn(C.message)),this._defaultValue}}}function f_(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Am}function Pm(c,l){let f=new Vd(Am,yy,[],l?function(_){let S={color:Qi,string:Vr,number:St,enum:Vr,boolean:Er,formatted:wt,padding:Zt,resolvedImage:Ht,variableAnchorOffsetCollection:ae};return _.type==="array"?$(S[_.value]||Le,_.length):S[_.type]}(l):void 0),m=f.parse(c,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?s_(new c_(m,l)):Nm(f.errors)}class km{constructor(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!Dm(f.expression)}evaluateWithoutErrorHandling(l,f,m,_,S,I){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,S,I)}evaluate(l,f,m,_,S,I){return this._styleExpression.evaluate(l,f,m,_,S,I)}}class Rm{constructor(l,f,m,_){this.kind=l,this.zoomStops=m,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!Dm(f.expression),this.interpolationType=_}evaluateWithoutErrorHandling(l,f,m,_,S,I){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,S,I)}evaluate(l,f,m,_,S,I){return this._styleExpression.evaluate(l,f,m,_,S,I)}interpolationFactor(l,f,m){return this.interpolationType?Ds.interpolationFactor(this.interpolationType,l,f,m):0}}function gS(c,l){let f=Pm(c,l);if(f.result==="error")return f;let m=f.value.expression,_=_y(m);if(!_&&!Om(l))return Nm([new on("","data expressions not supported")]);let S=xy(m,["zoom"]);if(!S&&!r4(l))return Nm([new on("","zoom expressions not supported")]);let I=by(m);return I||S?I instanceof on?Nm([I]):I instanceof Ds&&!mS(l)?Nm([new on("","\"interpolate\" expressions cannot be used with this property")]):s_(I?new Rm(_?"camera":"composite",f.value,I.labels,I instanceof Ds?I.interpolation:void 0):new km(_?"constant":"source",f.value)):Nm([new on("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class jm{constructor(l,f){this._parameters=l,this._specification=f,zr(this,n4(this._parameters,this._specification))}static deserialize(l){return new jm(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function by(c){let l=null;if(c instanceof mp)l=by(c.result);else if(c instanceof Q1){for(let f of c.args)if(l=by(f),l)break}else(c instanceof Tm||c instanceof Ds)&&c.input instanceof Fl&&c.input.name==="zoom"&&(l=c);return l instanceof on||c.eachChild(f=>{let m=by(f);m instanceof on?l=m:!l&&m?l=new on("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):l&&m&&l!==m&&(l=new on("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),l}function p_(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(let l of c.slice(1))if(!p_(l)&&typeof l!="boolean")return!1;return!0;default:return!0;}}let d_={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vS(c){if(c==null)return{filter:()=>!0,needGeometry:!1};p_(c)||(c=h_(c));let l=Pm(c,d_);if(l.result==="error")throw new Error(l.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,m,_)=>l.value.evaluate(f,m,{},_),needGeometry:s4(c)}}function gF(c,l){return c<l?-1:c>l?1:0}function s4(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let l=1;l<c.length;l++)if(s4(c[l]))return!0;return!1}function h_(c){if(!c)return!0;let l=c[0];return c.length<=1?l!=="any":l==="=="?yS(c[1],c[2],"=="):l==="!="?Ma(yS(c[1],c[2],"==")):l==="<"||l===">"||l==="<="||l===">="?yS(c[1],c[2],l):l==="any"?(f=c.slice(1),["any"].concat(f.map(h_))):l==="all"?["all"].concat(c.slice(1).map(h_)):l==="none"?["all"].concat(c.slice(1).map(h_).map(Ma)):l==="in"?wy(c[1],c.slice(2)):l==="!in"?Ma(wy(c[1],c.slice(2))):l==="has"?Ey(c[1]):l!=="!has"||Ma(Ey(c[1]));var f}function yS(c,l,f){switch(c){case"$type":return[`filter-type-${f}`,l];case"$id":return[`filter-id-${f}`,l];default:return[`filter-${f}`,c,l];}}function wy(c,l){if(l.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(f=>typeof f!=typeof l[0])?["filter-in-large",c,["literal",l.sort(gF)]]:["filter-in-small",c,["literal",l]];}}function Ey(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c];}}function Ma(c){return["!",c]}function Xd(c){let l=typeof c;if(l==="number"||l==="boolean"||l==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let _="[";for(let S of c)_+=`${Xd(S)},`;return`${_}]`}let f=Object.keys(c).sort(),m="{";for(let _=0;_<f.length;_++)m+=`${JSON.stringify(f[_])}:${Xd(c[f[_]])},`;return`${m}}`}function l4(c){let l="";for(let f of Lt)l+=`/${Xd(c[f])}`;return l}function u4(c){let l=c.value;return l?[new nt(c.key,l,"constants have been deprecated as of v8")]:[]}function mi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Lu(c){if(Array.isArray(c))return c.map(Lu);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){let l={};for(let f in c)l[f]=Lu(c[f]);return l}return mi(c)}function hl(c){let l=c.key,f=c.value,m=c.valueSpec||{},_=c.objectElementValidators||{},S=c.style,I=c.styleSpec,C=c.validateSpec,N=[],j=jn(f);if(j!=="object")return[new nt(l,f,`object expected, ${j} found`)];for(let z in f){let B=z.split(".")[0],Y=m[B]||m["*"],K;if(_[B])K=_[B];else if(m[B])K=C;else if(_["*"])K=_["*"];else{if(!m["*"]){N.push(new nt(l,f[z],`unknown property "${z}"`));continue}K=C}N=N.concat(K({key:(l&&`${l}.`)+z,value:f[z],valueSpec:Y,style:S,styleSpec:I,object:f,objectKey:z,validateSpec:C},f))}for(let z in m)_[z]||m[z].required&&m[z].default===void 0&&f[z]===void 0&&N.push(new nt(l,f,`missing required property "${z}"`));return N}function Sy(c){let l=c.value,f=c.valueSpec,m=c.style,_=c.styleSpec,S=c.key,I=c.arrayElementValidator||c.validateSpec;if(jn(l)!=="array")return[new nt(S,l,`array expected, ${jn(l)} found`)];if(f.length&&l.length!==f.length)return[new nt(S,l,`array length ${f.length} expected, length ${l.length} found`)];if(f["min-length"]&&l.length<f["min-length"])return[new nt(S,l,`array length at least ${f["min-length"]} expected, length ${l.length} found`)];let C={type:f.value,values:f.values};_.$version<7&&(C.function=f.function),jn(f.value)==="object"&&(C=f.value);let N=[];for(let j=0;j<l.length;j++)N=N.concat(I({array:l,arrayIndex:j,value:l[j],valueSpec:C,validateSpec:c.validateSpec,style:m,styleSpec:_,key:`${S}[${j}]`}));return N}function _S(c){let l=c.key,f=c.value,m=c.valueSpec,_=jn(f);return _==="number"&&f!=f&&(_="NaN"),_!=="number"?[new nt(l,f,`number expected, ${_} found`)]:"minimum"in m&&f<m.minimum?[new nt(l,f,`${f} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&f>m.maximum?[new nt(l,f,`${f} is greater than the maximum value ${m.maximum}`)]:[]}function m_(c){let l=c.valueSpec,f=mi(c.value.type),m,_,S,I={},C=f!=="categorical"&&c.value.property===void 0,N=!C,j=jn(c.value.stops)==="array"&&jn(c.value.stops[0])==="array"&&jn(c.value.stops[0][0])==="object",z=hl({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(K){if(f==="identity")return[new nt(K.key,K.value,"identity function may not have a \"stops\" property")];let te=[],oe=K.value;return te=te.concat(Sy({key:K.key,value:oe,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:B})),jn(oe)==="array"&&oe.length===0&&te.push(new nt(K.key,oe,"array must have at least one stop")),te},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:l,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return f==="identity"&&C&&z.push(new nt(c.key,c.value,"missing required property \"property\"")),f==="identity"||c.value.stops||z.push(new nt(c.key,c.value,"missing required property \"stops\"")),f==="exponential"&&c.valueSpec.expression&&!mS(c.valueSpec)&&z.push(new nt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(N&&!Om(c.valueSpec)?z.push(new nt(c.key,c.value,"property functions not supported")):C&&!r4(c.valueSpec)&&z.push(new nt(c.key,c.value,"zoom functions not supported"))),f!=="categorical"&&!j||c.value.property!==void 0||z.push(new nt(c.key,c.value,"\"property\" property is required")),z;function B(K){let te=[],oe=K.value,pe=K.key;if(jn(oe)!=="array")return[new nt(pe,oe,`array expected, ${jn(oe)} found`)];if(oe.length!==2)return[new nt(pe,oe,`array length 2 expected, length ${oe.length} found`)];if(j){if(jn(oe[0])!=="object")return[new nt(pe,oe,`object expected, ${jn(oe[0])} found`)];if(oe[0].zoom===void 0)return[new nt(pe,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new nt(pe,oe,"object stop key must have value")];if(S&&S>mi(oe[0].zoom))return[new nt(pe,oe[0].zoom,"stop zoom values must appear in ascending order")];mi(oe[0].zoom)!==S&&(S=mi(oe[0].zoom),_=void 0,I={}),te=te.concat(hl({key:`${pe}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:_S,value:Y}}))}else te=te.concat(Y({key:`${pe}[0]`,value:oe[0],valueSpec:{},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},oe));return f_(Lu(oe[1]))?te.concat([new nt(`${pe}[1]`,oe[1],"expressions are not allowed in function stops.")]):te.concat(K.validateSpec({key:`${pe}[1]`,value:oe[1],valueSpec:l,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function Y(K,te){let oe=jn(K.value),pe=mi(K.value),ve=K.value!==null?K.value:te;if(m){if(oe!==m)return[new nt(K.key,ve,`${oe} stop domain type must match previous stop domain type ${m}`)]}else m=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new nt(K.key,ve,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&f!=="categorical"){let $e=`number expected, ${oe} found`;return Om(l)&&f===void 0&&($e+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new nt(K.key,ve,$e)]}return f!=="categorical"||oe!=="number"||isFinite(pe)&&Math.floor(pe)===pe?f!=="categorical"&&oe==="number"&&_!==void 0&&pe<_?[new nt(K.key,ve,"stop domain values must appear in ascending order")]:(_=pe,f==="categorical"&&pe in I?[new nt(K.key,ve,"stop domain values must be unique")]:(I[pe]=!0,[])):[new nt(K.key,ve,`integer expected, found ${pe}`)]}}function qm(c){let l=(c.expressionContext==="property"?gS:Pm)(Lu(c.value),c.valueSpec);if(l.result==="error")return l.value.map(m=>new nt(`${c.key}${m.key}`,c.value,m.message));let f=l.value.expression||l.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!f.outputDefined())return[new nt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Dm(f))return[new nt(c.key,c.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(c.expressionContext==="filter"&&!Dm(f))return[new nt(c.key,c.value,"\"feature-state\" data expressions are not supported with filters.")];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!xy(f,["zoom","feature-state"]))return[new nt(c.key,c.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(c.expressionContext==="cluster-initial"&&!_y(f))return[new nt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function xf(c){let l=c.key,f=c.value,m=c.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(mi(f))===-1&&_.push(new nt(l,f,`expected one of [${m.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(m.values).indexOf(mi(f))===-1&&_.push(new nt(l,f,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(f)} found`)),_}function xS(c){return p_(Lu(c.value))?qm(zr({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):g_(c)}function g_(c){let l=c.value,f=c.key;if(jn(l)!=="array")return[new nt(f,l,`array expected, ${jn(l)} found`)];let m=c.styleSpec,_,S=[];if(l.length<1)return[new nt(f,l,"filter array must have at least 1 element")];switch(S=S.concat(xf({key:`${f}[0]`,value:l[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),mi(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&mi(l[1])==="$type"&&S.push(new nt(f,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&S.push(new nt(f,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=jn(l[1]),_!=="string"&&S.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`)));for(let I=2;I<l.length;I++)_=jn(l[I]),mi(l[1])==="$type"?S=S.concat(xf({key:`${f}[${I}]`,value:l[I],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new nt(`${f}[${I}]`,l[I],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let I=1;I<l.length;I++)S=S.concat(g_({key:`${f}[${I}]`,value:l[I],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":_=jn(l[1]),l.length!==2?S.push(new nt(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`));}return S}function bS(c,l){let f=c.key,m=c.validateSpec,_=c.style,S=c.styleSpec,I=c.value,C=c.objectKey,N=S[`${l}_${c.layerType}`];if(!N)return[];let j=C.match(/^(.*)-transition$/);if(l==="paint"&&j&&N[j[1]]&&N[j[1]].transition)return m({key:f,value:I,valueSpec:S.transition,style:_,styleSpec:S});let z=c.valueSpec||N[C];if(!z)return[new nt(f,I,`unknown property "${C}"`)];let B;if(jn(I)==="string"&&Om(z)&&!z.tokens&&(B=/^{([^}]+)}$/.exec(I)))return[new nt(f,I,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];let Y=[];return c.layerType==="symbol"&&(C==="text-field"&&_&&!_.glyphs&&Y.push(new nt(f,I,"use of \"text-field\" requires a style \"glyphs\" property")),C==="text-font"&&l_(Lu(I))&&mi(I.type)==="identity"&&Y.push(new nt(f,I,"\"text-font\" does not support identity functions"))),Y.concat(m({key:c.key,value:I,valueSpec:z,style:_,styleSpec:S,expressionContext:"property",propertyType:l,propertyKey:C}))}function v_(c){return bS(c,"paint")}function wS(c){return bS(c,"layout")}function ES(c){let l=[],f=c.value,m=c.key,_=c.style,S=c.styleSpec;f.type||f.ref||l.push(new nt(m,f,"either \"type\" or \"ref\" is required"));let I=mi(f.type),C=mi(f.ref);if(f.id){let N=mi(f.id);for(let j=0;j<c.arrayIndex;j++){let z=_.layers[j];mi(z.id)===N&&l.push(new nt(m,f.id,`duplicate layer id "${f.id}", previously used at line ${z.id.__line__}`))}}if("ref"in f){let N;["type","source","source-layer","filter","layout"].forEach(j=>{j in f&&l.push(new nt(m,f[j],`"${j}" is prohibited for ref layers`))}),_.layers.forEach(j=>{mi(j.id)===C&&(N=j)}),N?N.ref?l.push(new nt(m,f.ref,"ref cannot reference another ref layer")):I=mi(N.type):l.push(new nt(m,f.ref,`ref layer "${C}" not found`))}else if(I!=="background")if(f.source){let N=_.sources&&_.sources[f.source],j=N&&mi(N.type);N?j==="vector"&&I==="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster source`)):j!=="raster-dem"&&I==="hillshade"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster-dem source`)):j==="raster"&&I!=="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a vector source`)):j!=="vector"||f["source-layer"]?j==="raster-dem"&&I!=="hillshade"?l.push(new nt(m,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!f.paint||!f.paint["line-gradient"]||j==="geojson"&&N.lineMetrics||l.push(new nt(m,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new nt(m,f,`layer "${f.id}" must specify a "source-layer"`)):l.push(new nt(m,f.source,`source "${f.source}" not found`))}else l.push(new nt(m,f,"missing required property \"source\""));return l=l.concat(hl({key:m,value:f,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:f.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:f,objectKey:"type"}),filter:xS,layout:N=>hl({layer:f,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":j=>wS(zr({layerType:I},j))}}),paint:N=>hl({layer:f,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":j=>v_(zr({layerType:I},j))}})}})),l}function Jd(c){let l=c.value,f=c.key,m=jn(l);return m!=="string"?[new nt(f,l,`string expected, ${m} found`)]:[]}let y_={promoteId:function({key:c,value:l}){if(jn(l)==="string")return Jd({key:c,value:l});{let f=[];for(let m in l)f.push(...Jd({key:`${c}.${m}`,value:l[m]}));return f}}};function Iy(c){let l=c.value,f=c.key,m=c.styleSpec,_=c.style,S=c.validateSpec;if(!l.type)return[new nt(f,l,"\"type\" is required")];let I=mi(l.type),C;switch(I){case"vector":case"raster":return C=hl({key:f,value:l,valueSpec:m[`source_${I.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:y_,validateSpec:S}),C;case"raster-dem":return C=function(N){var j;let z=(j=N.sourceName)!==null&&j!==void 0?j:"",B=N.value,Y=N.styleSpec,K=Y.source_raster_dem,te=N.style,oe=[],pe=jn(B);if(B===void 0)return oe;if(pe!=="object")return oe.push(new nt("source_raster_dem",B,`object expected, ${pe} found`)),oe;let ve=mi(B.encoding)==="custom",$e=["redFactor","greenFactor","blueFactor","baseShift"],Ce=N.value.encoding?`"${N.value.encoding}"`:"Default";for(let He in B)!ve&&$e.includes(He)?oe.push(new nt(He,B[He],`In "${z}": "${He}" is only valid when "encoding" is set to "custom". ${Ce} encoding found`)):K[He]?oe=oe.concat(N.validateSpec({key:He,value:B[He],valueSpec:K[He],validateSpec:N.validateSpec,style:te,styleSpec:Y})):oe.push(new nt(He,B[He],`unknown property "${He}"`));return oe}({sourceName:f,value:l,style:c.style,styleSpec:m,validateSpec:S}),C;case"geojson":if(C=hl({key:f,value:l,valueSpec:m.source_geojson,style:_,styleSpec:m,validateSpec:S,objectElementValidators:y_}),l.cluster)for(let N in l.clusterProperties){let[j,z]=l.clusterProperties[N],B=typeof j=="string"?[j,["accumulated"],["get",N]]:j;C.push(...qm({key:`${f}.${N}.map`,value:z,validateSpec:S,expressionContext:"cluster-map"})),C.push(...qm({key:`${f}.${N}.reduce`,value:B,validateSpec:S,expressionContext:"cluster-reduce"}))}return C;case"video":return hl({key:f,value:l,valueSpec:m.source_video,style:_,validateSpec:S,styleSpec:m});case"image":return hl({key:f,value:l,valueSpec:m.source_image,style:_,validateSpec:S,styleSpec:m});case"canvas":return[new nt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return xf({key:`${f}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:S,styleSpec:m});}}function SS(c){let l=c.value,f=c.styleSpec,m=f.light,_=c.style,S=[],I=jn(l);if(l===void 0)return S;if(I!=="object")return S=S.concat([new nt("light",l,`object expected, ${I} found`)]),S;for(let C in l){let N=C.match(/^(.*)-transition$/);S=S.concat(N&&m[N[1]]&&m[N[1]].transition?c.validateSpec({key:C,value:l[C],valueSpec:f.transition,validateSpec:c.validateSpec,style:_,styleSpec:f}):m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)])}return S}function IS(c){let l=c.value,f=c.styleSpec,m=f.sky,_=c.style,S=jn(l);if(l===void 0)return[];if(S!=="object")return[new nt("sky",l,`object expected, ${S} found`)];let I=[];for(let C in l)I=I.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return I}function TS(c){let l=c.value,f=c.styleSpec,m=f.terrain,_=c.style,S=[],I=jn(l);if(l===void 0)return S;if(I!=="object")return S=S.concat([new nt("terrain",l,`object expected, ${I} found`)]),S;for(let C in l)S=S.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return S}function MS(c){let l=[],f=c.value,m=c.key;if(Array.isArray(f)){let _=[],S=[];for(let I in f)f[I].id&&_.includes(f[I].id)&&l.push(new nt(m,f,`all the sprites' ids must be unique, but ${f[I].id} is duplicated`)),_.push(f[I].id),f[I].url&&S.includes(f[I].url)&&l.push(new nt(m,f,`all the sprites' URLs must be unique, but ${f[I].url} is duplicated`)),S.push(f[I].url),l=l.concat(hl({key:`${m}[${I}]`,value:f[I],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return l}return Jd({key:m,value:f})}let __={"*":()=>[],array:Sy,boolean:function(c){let l=c.value,f=c.key,m=jn(l);return m!=="boolean"?[new nt(f,l,`boolean expected, ${m} found`)]:[]},number:_S,color:function(c){let l=c.key,f=c.value,m=jn(f);return m!=="string"?[new nt(l,f,`color expected, ${m} found`)]:to.parse(String(f))?[]:[new nt(l,f,`color expected, "${f}" found`)]},constants:u4,enum:xf,filter:xS,function:m_,layer:ES,object:hl,source:Iy,light:SS,sky:IS,terrain:TS,projection:function(c){let l=c.value,f=c.styleSpec,m=f.projection,_=c.style,S=jn(l);if(l===void 0)return[];if(S!=="object")return[new nt("projection",l,`object expected, ${S} found`)];let I=[];for(let C in l)I=I.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return I},string:Jd,formatted:function(c){return Jd(c).length===0?[]:qm(c)},resolvedImage:function(c){return Jd(c).length===0?[]:qm(c)},padding:function(c){let l=c.key,f=c.value;if(jn(f)==="array"){if(f.length<1||f.length>4)return[new nt(l,f,`padding requires 1 to 4 values; ${f.length} values found`)];let m={type:"number"},_=[];for(let S=0;S<f.length;S++)_=_.concat(c.validateSpec({key:`${l}[${S}]`,value:f[S],validateSpec:c.validateSpec,valueSpec:m}));return _}return _S({key:l,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(c){let l=c.key,f=c.value,m=jn(f),_=c.styleSpec;if(m!=="array"||f.length<1||f.length%2!=0)return[new nt(l,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let I=0;I<f.length;I+=2)S=S.concat(xf({key:`${l}[${I}]`,value:f[I],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(Sy({key:`${l}[${I+1}]`,value:f[I+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:_}));return S},sprite:MS};function zm(c){let l=c.value,f=c.valueSpec,m=c.styleSpec;return c.validateSpec=zm,f.expression&&l_(mi(l))?m_(c):f.expression&&f_(Lu(l))?qm(c):f.type&&__[f.type]?__[f.type](c):hl(zr({},c,{valueSpec:f.type?m[f.type]:f}))}function c4(c){let l=c.value,f=c.key,m=Jd(c);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{fontstack}\" token")),l.indexOf("{range}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{range}\" token"))),m}function Ul(c,l=Ae){let f=[];return f=f.concat(zm({key:"",value:c,valueSpec:l.$root,styleSpec:l,style:c,validateSpec:zm,objectElementValidators:{glyphs:c4,"*":()=>[]}})),c.constants&&(f=f.concat(u4({key:"constants",value:c.constants,style:c,styleSpec:l,validateSpec:zm}))),CS(f)}function uc(c){return function(l){return c(Ft(Se({},l),{validateSpec:zm}))}}function CS(c){return[].concat(c).sort((l,f)=>l.line-f.line)}function Pu(c){return function(...l){return CS(c.apply(this,l))}}Ul.source=Pu(uc(Iy)),Ul.sprite=Pu(uc(MS)),Ul.glyphs=Pu(uc(c4)),Ul.light=Pu(uc(SS)),Ul.sky=Pu(uc(IS)),Ul.terrain=Pu(uc(TS)),Ul.layer=Pu(uc(ES)),Ul.filter=Pu(uc(xS)),Ul.paintProperty=Pu(uc(v_)),Ul.layoutProperty=Pu(uc(wS));let Qd=Ul,vF=Qd.light,yF=Qd.sky,f4=Qd.paintProperty,p4=Qd.layoutProperty;function AS(c,l){let f=!1;if(l&&l.length)for(let m of l)c.fire(new Mt(new Error(m.message))),f=!0;return f}class Fm{constructor(l,f,m){let _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let I=new Int32Array(this.arrayBuffer);l=I[0],this.d=(f=I[1])+2*(m=I[2]);for(let N=0;N<this.d*this.d;N++){let j=I[3+N],z=I[3+N+1];_.push(j===z?null:I.subarray(j,z))}let C=I[3+_.length+1];this.keys=I.subarray(I[3+_.length],C),this.bboxes=I.subarray(C),this.insert=this._insertReadonly}else{this.d=f+2*m;for(let I=0;I<this.d*this.d;I++)_.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=m,this.scale=f/l,this.uid=0;let S=m/f*l;this.min=-S,this.max=l+S}insert(l,f,m,_,S){this._forEachCell(f,m,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,f,m,_,S,I){this.cells[S].push(I)}query(l,f,m,_,S){let I=this.min,C=this.max;if(l<=I&&f<=I&&C<=m&&C<=_&&!S)return Array.prototype.slice.call(this.keys);{let N=[];return this._forEachCell(l,f,m,_,this._queryCell,N,{},S),N}}_queryCell(l,f,m,_,S,I,C,N){let j=this.cells[S];if(j!==null){let z=this.keys,B=this.bboxes;for(let Y=0;Y<j.length;Y++){let K=j[Y];if(C[K]===void 0){let te=4*K;(N?N(B[te+0],B[te+1],B[te+2],B[te+3]):l<=B[te+2]&&f<=B[te+3]&&m>=B[te+0]&&_>=B[te+1])?(C[K]=!0,I.push(z[K])):C[K]=!1}}}}_forEachCell(l,f,m,_,S,I,C,N){let j=this._convertToCellCoord(l),z=this._convertToCellCoord(f),B=this._convertToCellCoord(m),Y=this._convertToCellCoord(_);for(let K=j;K<=B;K++)for(let te=z;te<=Y;te++){let oe=this.d*te+K;if((!N||N(this._convertFromCellCoord(K),this._convertFromCellCoord(te),this._convertFromCellCoord(K+1),this._convertFromCellCoord(te+1)))&&S.call(this,l,f,m,_,oe,I,C,N))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,f=3+this.cells.length+1+1,m=0;for(let I=0;I<this.cells.length;I++)m+=this.cells[I].length;let _=new Int32Array(f+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=f;for(let I=0;I<l.length;I++){let C=l[I];_[3+I]=S,_.set(C,S),S+=C.length}return _[3+l.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+l.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(l,f){let m=l.toArrayBuffer();return f&&f.push(m),{buffer:m}}static deserialize(l){return new Fm(l.buffer)}}let Bl={};function or(c,l,f={}){if(Bl[c])throw new Error(`${c} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:c,writeable:!1}),Bl[c]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}or("Object",Object),or("TransferableGridIndex",Fm),or("Color",to),or("Error",Error),or("AJAXError",je),or("ResolvedImage",dl),or("StylePropertyFunction",jm),or("StyleExpression",c_,{omit:["_evaluator"]}),or("ZoomDependentExpression",Rm),or("ZoomConstantExpression",km),or("CompoundExpression",Fl,{omit:["_evaluate"]});for(let c in Am)Am[c]._classRegistryKey||or(`Expression_${c}`,Am[c]);function x_(c){return c&&typeof ArrayBuffer!="undefined"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function DS(c){return c.$name||c.constructor._classRegistryKey}function d4(c){return!function(l){if(l===null||typeof l!="object")return!1;let f=DS(l);return!(!f||f==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||x_(c)||Qe(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Um(c,l){if(d4(c))return(x_(c)||Qe(c))&&l&&l.push(c),ArrayBuffer.isView(c)&&l&&l.push(c.buffer),c instanceof ImageData&&l&&l.push(c.data.buffer),c;if(Array.isArray(c)){let S=[];for(let I of c)S.push(Um(I,l));return S}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);let f=DS(c);if(!f)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Bl[f])throw new Error(`${f} is not registered.`);let{klass:m}=Bl[f],_=m.serialize?m.serialize(c,l):{};if(m.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let S in c){if(!c.hasOwnProperty(S)||Bl[f].omit.indexOf(S)>=0)continue;let I=c[S];_[S]=Bl[f].shallow.indexOf(S)>=0?I:Um(I,l)}c instanceof Error&&(_.message=c.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(_.$name=f),_}function Bm(c){if(d4(c))return c;if(Array.isArray(c))return c.map(Bm);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);let l=DS(c)||"Object";if(!Bl[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:f}=Bl[l];if(!f)throw new Error(`can't deserialize unregistered class ${l}`);if(f.deserialize)return f.deserialize(c);let m=Object.create(f.prototype);for(let _ of Object.keys(c)){if(_==="$name")continue;let S=c[_];m[_]=Bl[l].shallow.indexOf(_)>=0?S:Bm(S)}return m}class NS{constructor(){this.first=!0}update(l,f){let m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}let xn={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function OS(c){for(let l of c)if(PS(l.charCodeAt(0)))return!0;return!1}function _F(c){for(let l of c)if(!Vm(l.charCodeAt(0)))return!1;return!0}function LS(c){let l=c.map(f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch(m){return null}}).filter(f=>f);return new RegExp(l.join("|"),"u")}let xF=LS(["Arab","Dupl","Mong","Ougr","Syrc"]);function Vm(c){return!xF.test(String.fromCodePoint(c))}let h4=LS(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function PS(c){return!(c!==746&&c!==747&&(c<4352||!(xn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||xn["CJK Compatibility"](c)||xn["CJK Strokes"](c)||!(!xn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||xn["Enclosed CJK Letters and Months"](c)||xn["Ideographic Description Characters"](c)||xn.Kanbun(c)||xn.Katakana(c)&&c!==12540||!(!xn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!xn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||xn["Vertical Forms"](c)||xn["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||h4.test(String.fromCodePoint(c)))))}function m4(c){return!(PS(c)||function(l){return!!(xn["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||xn["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||xn["Letterlike Symbols"](l)||xn["Number Forms"](l)||xn["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||xn["Control Pictures"](l)&&l!==9251||xn["Optical Character Recognition"](l)||xn["Enclosed Alphanumerics"](l)||xn["Geometric Shapes"](l)||xn["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||xn["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||xn["CJK Symbols and Punctuation"](l)||xn.Katakana(l)||xn["Private Use Area"](l)||xn["CJK Compatibility Forms"](l)||xn["Small Form Variants"](l)||xn["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(c))}let bF=LS(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function kS(c){return bF.test(String.fromCodePoint(c))}function wF(c,l){return!(!l&&kS(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||xn.Khmer(c))}function EF(c){for(let l of c)if(kS(l.charCodeAt(0)))return!0;return!1}let ml=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Co{constructor(l,f){this.zoom=l,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new NS,this.transition={})}isSupportedScript(l){return function(f,m){for(let _ of f)if(!wF(_.charCodeAt(0),m))return!1;return!0}(l,ml.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,f=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*f}}}class Gm{constructor(l,f){this.property=l,this.value=f,this.expression=function(m,_){if(l_(m))return new jm(m,_);if(f_(m)){let S=gS(m,_);if(S.result==="error")throw new Error(S.value.map(I=>`${I.key}: ${I.message}`).join(", "));return S.value}{let S=m;return _.type==="color"&&typeof m=="string"?S=to.parse(m):_.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(S=zl.parse(m)):S=pl.parse(m),{kind:"constant",evaluate:()=>S}}}(f===void 0?l.specification.default:f,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,f,m){return this.property.possiblyEvaluate(this,l,f,m)}}class b_{constructor(l){this.property=l,this.value=new Gm(l,void 0)}transitioned(l,f){return new g4(this.property,this.value,f,X({},l.transition,this.transition),l.now)}untransitioned(){return new g4(this.property,this.value,null,{},0)}}class w_{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return ue(this._values[l].value.value)}setValue(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new b_(this._values[l].property)),this._values[l].value=new Gm(this._values[l].property,f===null?void 0:ue(f))}getTransition(l){return ue(this._values[l].transition)}setTransition(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new b_(this._values[l].property)),this._values[l].transition=ue(f)||void 0}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m);let _=this.getTransition(f);_!==void 0&&(l[`${f}-transition`]=_)}return l}transitioned(l,f){let m=new Ty(this._properties);for(let _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(l,f._values[_]);return m}untransitioned(){let l=new Ty(this._properties);for(let f of Object.keys(this._values))l._values[f]=this._values[f].untransitioned();return l}}class g4{constructor(l,f,m,_,S){this.property=l,this.value=f,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(l,f,m){let _=l.now||0,S=this.value.possiblyEvaluate(l,f,m),I=this.prior;if(I){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return I.possiblyEvaluate(l,f,m);{let C=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(l,f,m),S,function(N){if(N<=0)return 0;if(N>=1)return 1;let j=N*N,z=j*N;return 4*(N<.5?z:3*(N-j)+z-.75)}(C))}}return S}}class Ty{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,f,m){let _=new Cy(this._properties);for(let S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(l,f,m);return _}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class My{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return ue(this._values[l].value)}setValue(l,f){this._values[l]=new Gm(this._values[l].property,f===null?void 0:ue(f))}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m)}return l}possiblyEvaluate(l,f,m){let _=new Cy(this._properties);for(let S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(l,f,m);return _}}class cc{constructor(l,f,m){this.property=l,this.value=f,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,f,m,_){return this.property.evaluate(this.value,this.parameters,l,f,m,_)}}class Cy{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class cr{constructor(l){this.specification=l}possiblyEvaluate(l,f){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(f)}interpolate(l,f,m){let _=As[this.specification.type];return _?_(l,f,m):l}}class Cr{constructor(l,f){this.specification=l,this.overrides=f}possiblyEvaluate(l,f,m,_){return new cc(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},m,_)}:l.expression,f)}interpolate(l,f,m){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new cc(this,{kind:"constant",value:void 0},l.parameters);let _=As[this.specification.type];if(_){let S=_(l.value.value,f.value.value,m);return new cc(this,{kind:"constant",value:S},l.parameters)}return l}evaluate(l,f,m,_,S,I){return l.kind==="constant"?l.value:l.evaluate(f,m,_,S,I)}}class E_ extends Cr{possiblyEvaluate(l,f,m,_){if(l.value===void 0)return new cc(this,{kind:"constant",value:void 0},f);if(l.expression.kind==="constant"){let S=l.expression.evaluate(f,null,{},m,_),I=l.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,C=this._calculate(I,I,I,f);return new cc(this,{kind:"constant",value:C},f)}if(l.expression.kind==="camera"){let S=this._calculate(l.expression.evaluate({zoom:f.zoom-1}),l.expression.evaluate({zoom:f.zoom}),l.expression.evaluate({zoom:f.zoom+1}),f);return new cc(this,{kind:"constant",value:S},f)}return new cc(this,l.expression,f)}evaluate(l,f,m,_,S,I){if(l.kind==="source"){let C=l.evaluate(f,m,_,S,I);return this._calculate(C,C,C,f)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(f.zoom)-1},m,_),l.evaluate({zoom:Math.floor(f.zoom)},m,_),l.evaluate({zoom:Math.floor(f.zoom)+1},m,_),f):l.value}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class S_{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){if(l.value!==void 0){if(l.expression.kind==="constant"){let S=l.expression.evaluate(f,null,{},m,_);return this._calculate(S,S,S,f)}return this._calculate(l.expression.evaluate(new Co(Math.floor(f.zoom-1),f)),l.expression.evaluate(new Co(Math.floor(f.zoom),f)),l.expression.evaluate(new Co(Math.floor(f.zoom+1),f)),f)}}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class RS{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){return!!l.expression.evaluate(f,null,{},m,_)}interpolate(){return!1}}class E{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let f in l){let m=l[f];m.specification.overridable&&this.overridableProperties.push(f);let _=this.defaultPropertyValues[f]=new Gm(m,void 0),S=this.defaultTransitionablePropertyValues[f]=new b_(m);this.defaultTransitioningPropertyValues[f]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=_.possiblyEvaluate({})}}}or("DataDrivenProperty",Cr),or("DataConstantProperty",cr),or("CrossFadedDataDrivenProperty",E_),or("CrossFadedProperty",S_),or("ColorRampProperty",RS);let s="-transition";class d extends Dt{constructor(l,f){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),f.layout&&(this._unevaluatedLayout=new My(f.layout)),f.paint)){this._transitionablePaint=new w_(f.paint);for(let m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(let m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cy(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,f,m={}){f!=null&&this._validate(p4,`layers.${this.id}.layout.${l}`,l,f,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,f):this.visibility=f)}getPaintProperty(l){return l.endsWith(s)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,f,m={}){if(f!=null&&this._validate(f4,`layers.${this.id}.paint.${l}`,l,f,m))return!1;if(l.endsWith(s))return this._transitionablePaint.setTransition(l.slice(0,-11),f||void 0),!1;{let _=this._transitionablePaint._values[l],S=_.property.specification["property-type"]==="cross-faded-data-driven",I=_.value.isDataDriven(),C=_.value;this._transitionablePaint.setValue(l,f),this._handleSpecialPaintPropertyUpdate(l);let N=this._transitionablePaint._values[l].value;return N.isDataDriven()||I||S||this._handleOverridablePaintPropertyUpdate(l,C,N)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,f,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,f){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,f)}serialize(){let l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),me(l,(f,m)=>!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length))}_validate(l,f,m,_,S={}){return(!S||S.validate!==!1)&&AS(this,l.call(Qd,{key:f,layerType:this.type,objectKey:m,value:_,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let f=this.paint.get(l);if(f instanceof cc&&Om(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}let v={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class w{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function D(c,l=1){let f=0,m=0;return{members:c.map(_=>{let S=v[_.type].BYTES_PER_ELEMENT,I=f=O(f,Math.max(l,S)),C=_.components||1;return m=Math.max(m,S),f+=S*C,{name:_.name,type:_.type,components:C,offset:I}}),size:O(f,Math.max(m,l)),alignment:l}}function O(c,l){return Math.ceil(c/l)*l}class R extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.int16[_+0]=f,this.int16[_+1]=m,l}}R.prototype.bytesPerElement=4,or("StructArrayLayout2i4",R);class F extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.int16[S+0]=f,this.int16[S+1]=m,this.int16[S+2]=_,l}}F.prototype.bytesPerElement=6,or("StructArrayLayout3i6",F);class V extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let S=this.length;return this.resize(S+1),this.emplace(S,l,f,m,_)}emplace(l,f,m,_,S){let I=4*l;return this.int16[I+0]=f,this.int16[I+1]=m,this.int16[I+2]=_,this.int16[I+3]=S,l}}V.prototype.bytesPerElement=8,or("StructArrayLayout4i8",V);class G extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=6*l;return this.int16[N+0]=f,this.int16[N+1]=m,this.int16[N+2]=_,this.int16[N+3]=S,this.int16[N+4]=I,this.int16[N+5]=C,l}}G.prototype.bytesPerElement=12,or("StructArrayLayout2i4i12",G);class Q extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=4*l,j=8*l;return this.int16[N+0]=f,this.int16[N+1]=m,this.uint8[j+4]=_,this.uint8[j+5]=S,this.uint8[j+6]=I,this.uint8[j+7]=C,l}}Q.prototype.bytesPerElement=8,or("StructArrayLayout2i4ub8",Q);class ie extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.float32[_+0]=f,this.float32[_+1]=m,l}}ie.prototype.bytesPerElement=8,or("StructArrayLayout2f8",ie);class le extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z){let B=this.length;return this.resize(B+1),this.emplace(B,l,f,m,_,S,I,C,N,j,z)}emplace(l,f,m,_,S,I,C,N,j,z,B){let Y=10*l;return this.uint16[Y+0]=f,this.uint16[Y+1]=m,this.uint16[Y+2]=_,this.uint16[Y+3]=S,this.uint16[Y+4]=I,this.uint16[Y+5]=C,this.uint16[Y+6]=N,this.uint16[Y+7]=j,this.uint16[Y+8]=z,this.uint16[Y+9]=B,l}}le.prototype.bytesPerElement=20,or("StructArrayLayout10ui20",le);class he extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z,B,Y){let K=this.length;return this.resize(K+1),this.emplace(K,l,f,m,_,S,I,C,N,j,z,B,Y)}emplace(l,f,m,_,S,I,C,N,j,z,B,Y,K){let te=12*l;return this.int16[te+0]=f,this.int16[te+1]=m,this.int16[te+2]=_,this.int16[te+3]=S,this.uint16[te+4]=I,this.uint16[te+5]=C,this.uint16[te+6]=N,this.uint16[te+7]=j,this.int16[te+8]=z,this.int16[te+9]=B,this.int16[te+10]=Y,this.int16[te+11]=K,l}}he.prototype.bytesPerElement=24,or("StructArrayLayout4i4ui4i24",he);class ye extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.float32[S+0]=f,this.float32[S+1]=m,this.float32[S+2]=_,l}}ye.prototype.bytesPerElement=12,or("StructArrayLayout3f12",ye);class xe extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint32[1*l+0]=f,l}}xe.prototype.bytesPerElement=4,or("StructArrayLayout1ul4",xe);class Ie extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j){let z=this.length;return this.resize(z+1),this.emplace(z,l,f,m,_,S,I,C,N,j)}emplace(l,f,m,_,S,I,C,N,j,z){let B=10*l,Y=5*l;return this.int16[B+0]=f,this.int16[B+1]=m,this.int16[B+2]=_,this.int16[B+3]=S,this.int16[B+4]=I,this.int16[B+5]=C,this.uint32[Y+3]=N,this.uint16[B+8]=j,this.uint16[B+9]=z,l}}Ie.prototype.bytesPerElement=20,or("StructArrayLayout6i1ul2ui20",Ie);class fe extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=6*l;return this.int16[N+0]=f,this.int16[N+1]=m,this.int16[N+2]=_,this.int16[N+3]=S,this.int16[N+4]=I,this.int16[N+5]=C,l}}fe.prototype.bytesPerElement=12,or("StructArrayLayout2i2i2i12",fe);class Pe extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S){let I=this.length;return this.resize(I+1),this.emplace(I,l,f,m,_,S)}emplace(l,f,m,_,S,I){let C=4*l,N=8*l;return this.float32[C+0]=f,this.float32[C+1]=m,this.float32[C+2]=_,this.int16[N+6]=S,this.int16[N+7]=I,l}}Pe.prototype.bytesPerElement=16,or("StructArrayLayout2f1f2i16",Pe);class Be extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=16*l,j=4*l,z=8*l;return this.uint8[N+0]=f,this.uint8[N+1]=m,this.float32[j+1]=_,this.float32[j+2]=S,this.int16[z+6]=I,this.int16[z+7]=C,l}}Be.prototype.bytesPerElement=16,or("StructArrayLayout2ub2f2i16",Be);class Ke extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.uint16[S+0]=f,this.uint16[S+1]=m,this.uint16[S+2]=_,l}}Ke.prototype.bytesPerElement=6,or("StructArrayLayout3ui6",Ke);class dt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,pe,ve){let $e=this.length;return this.resize($e+1),this.emplace($e,l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,pe,ve)}emplace(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,pe,ve,$e){let Ce=24*l,He=12*l,rt=48*l;return this.int16[Ce+0]=f,this.int16[Ce+1]=m,this.uint16[Ce+2]=_,this.uint16[Ce+3]=S,this.uint32[He+2]=I,this.uint32[He+3]=C,this.uint32[He+4]=N,this.uint16[Ce+10]=j,this.uint16[Ce+11]=z,this.uint16[Ce+12]=B,this.float32[He+7]=Y,this.float32[He+8]=K,this.uint8[rt+36]=te,this.uint8[rt+37]=oe,this.uint8[rt+38]=pe,this.uint32[He+10]=ve,this.int16[Ce+22]=$e,l}}dt.prototype.bytesPerElement=48,or("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",dt);class It extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,pe,ve,$e,Ce,He,rt,bt,Qt,Ir,Kt,Ut,dr,sr){let rr=this.length;return this.resize(rr+1),this.emplace(rr,l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,pe,ve,$e,Ce,He,rt,bt,Qt,Ir,Kt,Ut,dr,sr)}emplace(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,pe,ve,$e,Ce,He,rt,bt,Qt,Ir,Kt,Ut,dr,sr,rr){let ut=32*l,gr=16*l;return this.int16[ut+0]=f,this.int16[ut+1]=m,this.int16[ut+2]=_,this.int16[ut+3]=S,this.int16[ut+4]=I,this.int16[ut+5]=C,this.int16[ut+6]=N,this.int16[ut+7]=j,this.uint16[ut+8]=z,this.uint16[ut+9]=B,this.uint16[ut+10]=Y,this.uint16[ut+11]=K,this.uint16[ut+12]=te,this.uint16[ut+13]=oe,this.uint16[ut+14]=pe,this.uint16[ut+15]=ve,this.uint16[ut+16]=$e,this.uint16[ut+17]=Ce,this.uint16[ut+18]=He,this.uint16[ut+19]=rt,this.uint16[ut+20]=bt,this.uint16[ut+21]=Qt,this.uint16[ut+22]=Ir,this.uint32[gr+12]=Kt,this.float32[gr+13]=Ut,this.float32[gr+14]=dr,this.uint16[ut+30]=sr,this.uint16[ut+31]=rr,l}}It.prototype.bytesPerElement=64,or("StructArrayLayout8i15ui1ul2f2ui64",It);class Vt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.float32[1*l+0]=f,l}}Vt.prototype.bytesPerElement=4,or("StructArrayLayout1f4",Vt);class tr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.uint16[6*l+0]=f,this.float32[S+1]=m,this.float32[S+2]=_,l}}tr.prototype.bytesPerElement=12,or("StructArrayLayout1ui2f12",tr);class jt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=4*l;return this.uint32[2*l+0]=f,this.uint16[S+2]=m,this.uint16[S+3]=_,l}}jt.prototype.bytesPerElement=8,or("StructArrayLayout1ul2ui8",jt);class Rt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.uint16[_+0]=f,this.uint16[_+1]=m,l}}Rt.prototype.bytesPerElement=4,or("StructArrayLayout2ui4",Rt);class fr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint16[1*l+0]=f,l}}fr.prototype.bytesPerElement=2,or("StructArrayLayout1ui2",fr);class Pr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let S=this.length;return this.resize(S+1),this.emplace(S,l,f,m,_)}emplace(l,f,m,_,S){let I=4*l;return this.float32[I+0]=f,this.float32[I+1]=m,this.float32[I+2]=_,this.float32[I+3]=S,l}}Pr.prototype.bytesPerElement=16,or("StructArrayLayout4f16",Pr);class zt extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new h(this.anchorPointX,this.anchorPointY)}}zt.prototype.size=20;class Xt extends Ie{get(l){return new zt(this,l)}}or("CollisionBoxArray",Xt);class Or extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Or.prototype.size=48;class Ao extends dt{get(l){return new Or(this,l)}}or("PlacedSymbolArray",Ao);class Yr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Yr.prototype.size=64;class yn extends It{get(l){return new Yr(this,l)}}or("SymbolInstanceArray",yn);class Do extends Vt{getoffsetX(l){return this.float32[1*l+0]}}or("GlyphOffsetArray",Do);class Ca extends F{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}or("SymbolLineVertexArray",Ca);class ku extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ku.prototype.size=12;class No extends tr{get(l){return new ku(this,l)}}or("TextAnchorOffsetArray",No);class Ns extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ns.prototype.size=8;class Qa extends jt{get(l){return new Ns(this,l)}}or("FeatureIndexArray",Qa);class Aa extends R{}class es extends R{}class fc extends R{}class Hm extends G{}class I_ extends Q{}class Wm extends ie{}class Vl extends le{}class T_ extends he{}class jS extends ye{}class Gl extends xe{}class Hl extends fe{}class vp extends Be{}class Ru extends Ke{}class ma extends Rt{}let Da=D([{name:"a_pos",components:2,type:"Int16"}],4),{members:gl}=Da;class bn{constructor(l=[]){this.segments=l}prepareSegment(l,f,m,_){let S=this.segments[this.segments.length-1];return l>bn.MAX_VERTEX_ARRAY_LENGTH&&ke(`Max vertices per segment is ${bn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!S||S.vertexLength+l>bn.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_)&&(S={vertexOffset:f.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},_!==void 0&&(S.sortKey=_),this.segments.push(S)),S}get(){return this.segments}destroy(){for(let l of this.segments)for(let f in l.vaos)l.vaos[f].destroy()}static simpleSegment(l,f,m,_){return new bn([{vertexOffset:l,primitiveOffset:f,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function eh(c,l){return 256*(c=U(Math.floor(c),0,255))+U(Math.floor(l),0,255)}bn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,or("SegmentVector",bn);let $m=D([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ym={exports:{}},v4={exports:{}};v4.exports=function(c,l){var f,m,_,S,I,C,N,j;for(m=c.length-(f=3&c.length),_=l,I=3432918353,C=461845907,j=0;j<m;)N=255&c.charCodeAt(j)|(255&c.charCodeAt(++j))<<8|(255&c.charCodeAt(++j))<<16|(255&c.charCodeAt(++j))<<24,++j,_=27492+(65535&(S=5*(65535&(_=(_^=N=(65535&(N=(N=(65535&N)*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*C+(((N>>>16)*C&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(N=0,f){case 3:N^=(255&c.charCodeAt(j+2))<<16;case 2:N^=(255&c.charCodeAt(j+1))<<8;case 1:_^=N=(65535&(N=(N=(65535&(N^=255&c.charCodeAt(j)))*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*C+(((N>>>16)*C&65535)<<16)&4294967295;}return _^=c.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var SF=v4.exports,y4={exports:{}};y4.exports=function(c,l){for(var f,m=c.length,_=l^m,S=0;m>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24))+((1540483477*(f>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++S;switch(m){case 3:_^=(255&c.charCodeAt(S+2))<<16;case 2:_^=(255&c.charCodeAt(S+1))<<8;case 1:_=1540483477*(65535&(_^=255&c.charCodeAt(S)))+((1540483477*(_>>>16)&65535)<<16);}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var yp=SF,_4=y4.exports;Ym.exports=yp,Ym.exports.murmur3=yp,Ym.exports.murmur2=_4;var M_=a(Ym.exports);class Ay{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,f,m,_){this.ids.push(C_(l)),this.positions.push(f,m,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let f=C_(l),m=0,_=this.ids.length-1;for(;m<_;){let I=m+_>>1;this.ids[I]>=f?_=I:m=I+1}let S=[];for(;this.ids[m]===f;)S.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return S}static serialize(l,f){let m=new Float64Array(l.ids),_=new Uint32Array(l.positions);return A_(m,_,0,m.length-1),f&&f.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(l){let f=new Ay;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f}}function C_(c){let l=+c;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:M_(String(c))}function A_(c,l,f,m){for(;f<m;){let _=c[f+m>>1],S=f-1,I=m+1;for(;;){do S++;while(c[S]<_);do I--;while(c[I]>_);if(S>=I)break;Zm(c,S,I),Zm(l,3*S,3*I),Zm(l,3*S+1,3*I+1),Zm(l,3*S+2,3*I+2)}I-f<m-I?(A_(c,l,f,I),f=I+1):(A_(c,l,I+1,m),m=I)}}function Zm(c,l,f){let m=c[l];c[l]=c[f],c[f]=m}or("FeaturePositionMap",Ay);class Dy{constructor(l,f){this.gl=l.gl,this.location=f}}class x4 extends Dy{constructor(l,f){super(l,f),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class $ae extends Dy{constructor(l,f){super(l,f),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class Yae extends Dy{constructor(l,f){super(l,f),this.current=to.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let Cat=new Float32Array(16);function IF(c){return[eh(255*c.r,255*c.g),eh(255*c.b,255*c.a)]}class qS{constructor(l,f,m){this.value=l,this.uniformNames=f.map(_=>`u_${_}`),this.type=m}setUniform(l,f,m){l.set(m.constantOr(this.value))}getBinding(l,f,m){return this.type==="color"?new Yae(l,f):new x4(l,f)}}class D_{constructor(l,f){this.uniformNames=f.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr}setUniform(l,f,m,_){let S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&l.set(S)}getBinding(l,f,m){return m.substr(0,9)==="u_pattern"?new $ae(l,f):new x4(l,f)}}class th{constructor(l,f,m,_){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=f.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(l,f,m,_,S){let I=this.paintVertexArray.length,C=this.expression.evaluate(new Co(0),f,{},_,[],S);this.paintVertexArray.resize(l),this._setPaintValue(I,l,C)}updatePaintArray(l,f,m,_){let S=this.expression.evaluate({zoom:0},m,_);this._setPaintValue(l,f,S)}_setPaintValue(l,f,m){if(this.type==="color"){let _=IF(m);for(let S=l;S<f;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=l;_<f;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bf{constructor(l,f,m,_,S,I){this.expression=l,this.uniformNames=f.map(C=>`u_${C}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=f.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(l,f,m,_,S){let I=this.expression.evaluate(new Co(this.zoom),f,{},_,[],S),C=this.expression.evaluate(new Co(this.zoom+1),f,{},_,[],S),N=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(N,l,I,C)}updatePaintArray(l,f,m,_){let S=this.expression.evaluate({zoom:this.zoom},m,_),I=this.expression.evaluate({zoom:this.zoom+1},m,_);this._setPaintValue(l,f,S,I)}_setPaintValue(l,f,m,_){if(this.type==="color"){let S=IF(m),I=IF(_);for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,S[0],S[1],I[0],I[1])}else{for(let S=l;S<f;S++)this.paintVertexArray.emplace(S,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,f){let m=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,_=U(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,f,m){return new x4(l,f)}}class Km{constructor(l,f,m,_,S,I){this.expression=l,this.type=f,this.useIntegerZoom=m,this.zoom=_,this.layerId=I,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(l,f,m){let _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,f.patterns&&f.patterns[this.layerId],m)}updatePaintArray(l,f,m,_,S){this._setPaintValues(l,f,m.patterns&&m.patterns[this.layerId],S)}_setPaintValues(l,f,m,_){if(!_||!m)return;let{min:S,mid:I,max:C}=m,N=_[S],j=_[I],z=_[C];if(N&&j&&z)for(let B=l;B<f;B++)this.zoomInPaintVertexArray.emplace(B,j.tl[0],j.tl[1],j.br[0],j.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],j.pixelRatio,N.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,j.tl[0],j.tl[1],j.br[0],j.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],j.pixelRatio,z.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,$m.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,$m.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Zae{constructor(l,f,m){this.binders={},this._buffers=[];let _=[];for(let S in l.paint._values){if(!m(S))continue;let I=l.paint.get(S);if(!(I instanceof cc&&Om(I.property.specification)))continue;let C=Aat(S,l.type),N=I.value,j=I.property.specification.type,z=I.property.useIntegerZoom,B=I.property.specification["property-type"],Y=B==="cross-faded"||B==="cross-faded-data-driven";if(N.kind==="constant")this.binders[S]=Y?new D_(N.value,C):new qS(N.value,C,j),_.push(`/u_${S}`);else if(N.kind==="source"||Y){let K=Kae(S,j,"source");this.binders[S]=Y?new Km(N,j,z,f,K,l.id):new th(N,C,j,K),_.push(`/a_${S}`)}else{let K=Kae(S,j,"composite");this.binders[S]=new bf(N,C,j,z,f,K),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){let f=this.binders[l];return f instanceof th||f instanceof bf?f.maxValue:0}populatePaintArrays(l,f,m,_,S){for(let I in this.binders){let C=this.binders[I];(C instanceof th||C instanceof bf||C instanceof Km)&&C.populatePaintArray(l,f,m,_,S)}}setConstantPatternPositions(l,f){for(let m in this.binders){let _=this.binders[m];_ instanceof D_&&_.setConstantPatternPositions(l,f)}}updatePaintArrays(l,f,m,_,S){let I=!1;for(let C in l){let N=f.getPositions(C);for(let j of N){let z=m.feature(j.index);for(let B in this.binders){let Y=this.binders[B];if((Y instanceof th||Y instanceof bf||Y instanceof Km)&&Y.expression.isStateDependent===!0){let K=_.paint.get(B);Y.expression=K.value,Y.updatePaintArray(j.start,j.end,z,l[C],S),I=!0}}}}return I}defines(){let l=[];for(let f in this.binders){let m=this.binders[f];(m instanceof qS||m instanceof D_)&&l.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return l}getBinderAttributes(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof th||m instanceof bf)for(let _=0;_<m.paintVertexAttributes.length;_++)l.push(m.paintVertexAttributes[_].name);else if(m instanceof Km)for(let _=0;_<$m.members.length;_++)l.push($m.members[_].name)}return l}getBinderUniforms(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof qS||m instanceof D_||m instanceof bf)for(let _ of m.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,f){let m=[];for(let _ in this.binders){let S=this.binders[_];if(S instanceof qS||S instanceof D_||S instanceof bf){for(let I of S.uniformNames)if(f[I]){let C=S.getBinding(l,f[I],I);m.push({name:I,property:_,binding:C})}}}return m}setUniforms(l,f,m,_){for(let{name:S,property:I,binding:C}of f)this.binders[I].setUniform(C,_,m.get(I),S)}updatePaintBuffers(l){this._buffers=[];for(let f in this.binders){let m=this.binders[f];if(l&&m instanceof Km){let _=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof th||m instanceof bf)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(let f in this.binders){let m=this.binders[f];(m instanceof th||m instanceof bf||m instanceof Km)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let f=this.binders[l];(f instanceof th||f instanceof bf||f instanceof Km)&&f.destroy()}}}class Ny{constructor(l,f,m=()=>!0){this.programConfigurations={};for(let _ of l)this.programConfigurations[_.id]=new Zae(_,f,m);this.needsUpload=!1,this._featureMap=new Ay,this._bufferOffset=0}populatePaintArrays(l,f,m,_,S,I){for(let C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,f,_,S,I);f.id!==void 0&&this._featureMap.add(f.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,f,m,_){for(let S of m)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(l,this._featureMap,f,S,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function Aat(c,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${l}-`,"").replace(/-/g,"_")]}function Kae(c,l,f){let m={color:{source:ie,composite:Pr},number:{source:Vt,composite:ie}},_=function(S){return{"line-pattern":{source:Vl,composite:Vl},"fill-pattern":{source:Vl,composite:Vl},"fill-extrusion-pattern":{source:Vl,composite:Vl}}[S]}(c);return _&&_[f]||m[l][f]}or("ConstantBinder",qS),or("CrossFadedConstantBinder",D_),or("SourceExpressionBinder",th),or("CrossFadedCompositeBinder",Km),or("CompositeExpressionBinder",bf),or("ProgramConfiguration",Zae,{omit:["_buffers"]}),or("ProgramConfigurationSet",Ny);let Oi=8192,TF=Math.pow(2,14)-1,Xae=-TF-1;function Oy(c){let l=Oi/c.extent,f=c.loadGeometry();for(let m=0;m<f.length;m++){let _=f[m];for(let S=0;S<_.length;S++){let I=_[S],C=Math.round(I.x*l),N=Math.round(I.y*l);I.x=U(C,Xae,TF),I.y=U(N,Xae,TF),(C<I.x||C>I.x+1||N<I.y||N>I.y+1)&&ke("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Ly(c,l){return{type:c.type,id:c.id,properties:c.properties,geometry:l?Oy(c):[]}}function b4(c,l,f,m,_){c.emplaceBack(2*l+(m+1)/2,2*f+(_+1)/2)}class MF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new es,this.indexArray=new Ru,this.segments=new bn,this.programConfigurations=new Ny(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){let _=this.layers[0],S=[],I=null,C=!1;_.type==="circle"&&(I=_.layout.get("circle-sort-key"),C=!I.isConstant());for(let{feature:N,id:j,index:z,sourceLayerIndex:B}of l){let Y=this.layers[0]._featureFilter.needGeometry,K=Ly(N,Y);if(!this.layers[0]._featureFilter.filter(new Co(this.zoom),K,m))continue;let te=C?I.evaluate(K,{},m):void 0,oe={id:j,properties:N.properties,type:N.type,sourceLayerIndex:B,index:z,geometry:Y?K.geometry:Oy(N),patterns:{},sortKey:te};S.push(oe)}C&&S.sort((N,j)=>N.sortKey-j.sortKey);for(let N of S){let{geometry:j,index:z,sourceLayerIndex:B}=N,Y=l[z].feature;this.addFeature(N,j,z,m),f.featureIndex.insert(Y,j,z,B,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,gl),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,f,m,_){for(let S of f)for(let I of S){let C=I.x,N=I.y;if(C<0||C>=Oi||N<0||N>=Oi)continue;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),z=j.vertexLength;b4(this.layoutVertexArray,C,N,-1,-1),b4(this.layoutVertexArray,C,N,1,-1),b4(this.layoutVertexArray,C,N,1,1),b4(this.layoutVertexArray,C,N,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},_)}}function Jae(c,l){for(let f=0;f<c.length;f++)if(N_(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(N_(c,l[f]))return!0;return!!CF(c,l)}function Dat(c,l,f){return!!N_(c,l)||!!AF(l,c,f)}function Qae(c,l){if(c.length===1)return tse(l,c[0]);for(let f=0;f<l.length;f++){let m=l[f];for(let _=0;_<m.length;_++)if(N_(c,m[_]))return!0}for(let f=0;f<c.length;f++)if(tse(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(CF(c,l[f]))return!0;return!1}function Nat(c,l,f){if(c.length>1){if(CF(c,l))return!0;for(let m=0;m<l.length;m++)if(AF(l[m],c,f))return!0}for(let m=0;m<c.length;m++)if(AF(c[m],l,f))return!0;return!1}function CF(c,l){if(c.length===0||l.length===0)return!1;for(let f=0;f<c.length-1;f++){let m=c[f],_=c[f+1];for(let S=0;S<l.length-1;S++)if(Oat(m,_,l[S],l[S+1]))return!0}return!1}function Oat(c,l,f,m){return Te(c,f,m)!==Te(l,f,m)&&Te(c,l,f)!==Te(c,l,m)}function AF(c,l,f){let m=f*f;if(l.length===1)return c.distSqr(l[0])<m;for(let _=1;_<l.length;_++)if(ese(c,l[_-1],l[_])<m)return!0;return!1}function ese(c,l,f){let m=l.distSqr(f);if(m===0)return c.distSqr(l);let _=((c.x-l.x)*(f.x-l.x)+(c.y-l.y)*(f.y-l.y))/m;return c.distSqr(_<0?l:_>1?f:f.sub(l)._mult(_)._add(l))}function tse(c,l){let f,m,_,S=!1;for(let I=0;I<c.length;I++){f=c[I];for(let C=0,N=f.length-1;C<f.length;N=C++)m=f[C],_=f[N],m.y>l.y!=_.y>l.y&&l.x<(_.x-m.x)*(l.y-m.y)/(_.y-m.y)+m.x&&(S=!S)}return S}function N_(c,l){let f=!1;for(let m=0,_=c.length-1;m<c.length;_=m++){let S=c[m],I=c[_];S.y>l.y!=I.y>l.y&&l.x<(I.x-S.x)*(l.y-S.y)/(I.y-S.y)+S.x&&(f=!f)}return f}function Lat(c,l,f){let m=f[0],_=f[2];if(c.x<m.x&&l.x<m.x||c.x>_.x&&l.x>_.x||c.y<m.y&&l.y<m.y||c.y>_.y&&l.y>_.y)return!1;let S=Te(c,l,f[0]);return S!==Te(c,l,f[1])||S!==Te(c,l,f[2])||S!==Te(c,l,f[3])}function zS(c,l,f){let m=l.paint.get(c).value;return m.kind==="constant"?m.value:f.programConfigurations.get(l.id).getMaxValue(c)}function w4(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function E4(c,l,f,m,_){if(!l[0]&&!l[1])return c;let S=h.convert(l)._mult(_);f==="viewport"&&S._rotate(-m);let I=[];for(let C=0;C<c.length;C++)I.push(c[C].sub(S));return I}let rse,nse;or("CircleBucket",MF,{omit:["layers"]});var Pat={get paint(){return nse=nse||new E({"circle-radius":new Cr(Ae.paint_circle["circle-radius"]),"circle-color":new Cr(Ae.paint_circle["circle-color"]),"circle-blur":new Cr(Ae.paint_circle["circle-blur"]),"circle-opacity":new Cr(Ae.paint_circle["circle-opacity"]),"circle-translate":new cr(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new cr(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cr(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cr(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Cr(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Cr(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Cr(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return rse=rse||new E({"circle-sort-key":new Cr(Ae.layout_circle["circle-sort-key"])})}},Os=1e-6,O_=typeof Float32Array!="undefined"?Float32Array:Array;function DF(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ose(c,l,f){var m=l[0],_=l[1],S=l[2],I=l[3],C=l[4],N=l[5],j=l[6],z=l[7],B=l[8],Y=l[9],K=l[10],te=l[11],oe=l[12],pe=l[13],ve=l[14],$e=l[15],Ce=f[0],He=f[1],rt=f[2],bt=f[3];return c[0]=Ce*m+He*C+rt*B+bt*oe,c[1]=Ce*_+He*N+rt*Y+bt*pe,c[2]=Ce*S+He*j+rt*K+bt*ve,c[3]=Ce*I+He*z+rt*te+bt*$e,c[4]=(Ce=f[4])*m+(He=f[5])*C+(rt=f[6])*B+(bt=f[7])*oe,c[5]=Ce*_+He*N+rt*Y+bt*pe,c[6]=Ce*S+He*j+rt*K+bt*ve,c[7]=Ce*I+He*z+rt*te+bt*$e,c[8]=(Ce=f[8])*m+(He=f[9])*C+(rt=f[10])*B+(bt=f[11])*oe,c[9]=Ce*_+He*N+rt*Y+bt*pe,c[10]=Ce*S+He*j+rt*K+bt*ve,c[11]=Ce*I+He*z+rt*te+bt*$e,c[12]=(Ce=f[12])*m+(He=f[13])*C+(rt=f[14])*B+(bt=f[15])*oe,c[13]=Ce*_+He*N+rt*Y+bt*pe,c[14]=Ce*S+He*j+rt*K+bt*ve,c[15]=Ce*I+He*z+rt*te+bt*$e,c}Math.hypot||(Math.hypot=function(){for(var c=0,l=arguments.length;l--;)c+=arguments[l]*arguments[l];return Math.sqrt(c)});var FS,kat=ose;function S4(c,l,f){var m=l[0],_=l[1],S=l[2],I=l[3];return c[0]=f[0]*m+f[4]*_+f[8]*S+f[12]*I,c[1]=f[1]*m+f[5]*_+f[9]*S+f[13]*I,c[2]=f[2]*m+f[6]*_+f[10]*S+f[14]*I,c[3]=f[3]*m+f[7]*_+f[11]*S+f[15]*I,c}FS=new O_(4),O_!=Float32Array&&(FS[0]=0,FS[1]=0,FS[2]=0,FS[3]=0);class Rat extends d{constructor(l){super(l,Pat)}createBucket(l){return new MF(l)}queryRadius(l){let f=l;return zS("circle-radius",this,f)+zS("circle-stroke-width",this,f)+w4(this.paint.get("circle-translate"))}queryIntersectsFeature(l,f,m,_,S,I,C,N){let j=E4(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),z=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),B=this.paint.get("circle-pitch-alignment")==="map",Y=B?j:function(te,oe){return te.map(pe=>ise(pe,oe))}(j,N),K=B?z*C:z;for(let te of _)for(let oe of te){let pe=B?oe:ise(oe,N),ve=K,$e=S4([],[oe.x,oe.y,0,1],N);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=$e[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=I.cameraToCenterDistance/$e[3]),Dat(Y,pe,ve))return!0}return!1}}function ise(c,l){let f=S4([],[c.x,c.y,0,1],l);return new h(f[0]/f[3],f[1]/f[3])}class ase extends MF{}let sse;or("HeatmapBucket",ase,{omit:["layers"]});var jat={get paint(){return sse=sse||new E({"heatmap-radius":new Cr(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Cr(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cr(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new RS(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cr(Ae.paint_heatmap["heatmap-opacity"])})}};function NF(c,{width:l,height:f},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*f*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*f*m}`)}else _=new Uint8Array(l*f*m);return c.width=l,c.height=f,c.data=_,c}function lse(c,{width:l,height:f},m){if(l===c.width&&f===c.height)return;let _=NF({},{width:l,height:f},m);OF(c,_,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,l),height:Math.min(c.height,f)},m),c.width=l,c.height=f,c.data=_.data}function OF(c,l,f,m,_,S){if(_.width===0||_.height===0)return l;if(_.width>c.width||_.height>c.height||f.x>c.width-_.width||f.y>c.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||m.x>l.width-_.width||m.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");let I=c.data,C=l.data;if(I===C)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<_.height;N++){let j=((f.y+N)*c.width+f.x)*S,z=((m.y+N)*l.width+m.x)*S;for(let B=0;B<_.width*S;B++)C[z+B]=I[j+B]}return l}class US{constructor(l,f){NF(this,l,1,f)}resize(l){lse(this,l,1)}clone(){return new US({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,S){OF(l,f,m,_,S,1)}}class ju{constructor(l,f){NF(this,l,4,f)}resize(l){lse(this,l,4)}replace(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new ju({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,S){OF(l,f,m,_,S,4)}}function use(c){let l={},f=c.resolution||256,m=c.clips?c.clips.length:1,_=c.image||new ju({width:f,height:m});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);let S=(I,C,N)=>{l[c.evaluationKey]=N;let j=c.expression.evaluate(l);_.data[I+C+0]=Math.floor(255*j.r/j.a),_.data[I+C+1]=Math.floor(255*j.g/j.a),_.data[I+C+2]=Math.floor(255*j.b/j.a),_.data[I+C+3]=Math.floor(255*j.a)};if(c.clips)for(let I=0,C=0;I<m;++I,C+=4*f)for(let N=0,j=0;N<f;N++,j+=4){let z=N/(f-1),{start:B,end:Y}=c.clips[I];S(C,j,B*(1-z)+Y*z)}else for(let I=0,C=0;I<f;I++,C+=4)S(0,C,I/(f-1));return _}or("AlphaImage",US),or("RGBAImage",ju);let LF="big-fb";class qat extends d{createBucket(l){return new ase(l)}constructor(l){super(l,jat),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=use({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(LF)&&this.heatmapFbos.delete(LF)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let cse;var zat={get paint(){return cse=cse||new E({"hillshade-illumination-direction":new cr(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new cr(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cr(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cr(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cr(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cr(Ae.paint_hillshade["hillshade-accent-color"])})}};class Fat extends d{constructor(l){super(l,zat)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Uat=D([{name:"a_pos",components:2,type:"Int16"}],4),{members:Bat}=Uat;function fse(c,l,f=2){let m=l&&l.length,_=m?l[0]*f:c.length,S=pse(c,0,_,f,!0),I=[];if(!S||S.next===S.prev)return I;let C,N,j;if(m&&(S=function(z,B,Y,K){let te=[];for(let oe=0,pe=B.length;oe<pe;oe++){let ve=pse(z,B[oe]*K,oe<pe-1?B[oe+1]*K:z.length,K,!1);ve===ve.next&&(ve.steiner=!0),te.push(Kat(ve))}te.sort($at);for(let oe=0;oe<te.length;oe++)Y=Yat(te[oe],Y);return Y}(c,l,S,f)),c.length>80*f){C=1/0,N=1/0;let z=-1/0,B=-1/0;for(let Y=f;Y<_;Y+=f){let K=c[Y],te=c[Y+1];K<C&&(C=K),te<N&&(N=te),K>z&&(z=K),te>B&&(B=te)}j=Math.max(z-C,B-N),j=j!==0?32767/j:0}return BS(S,I,f,C,N,j,0),I}function pse(c,l,f,m,_){let S;if(_===function(I,C,N,j){let z=0;for(let B=C,Y=N-j;B<N;B+=j)z+=(I[Y]-I[B])*(I[B+1]+I[Y+1]),Y=B;return z}(c,l,f,m)>0)for(let I=l;I<f;I+=m)S=mse(I/m|0,c[I],c[I+1],S);else for(let I=f-m;I>=l;I-=m)S=mse(I/m|0,c[I],c[I+1],S);return S&&I4(S,S.next)&&(GS(S),S=S.next),S}function Py(c,l){if(!c)return c;l||(l=c);let f,m=c;do if(f=!1,m.steiner||!I4(m,m.next)&&Ei(m.prev,m,m.next)!==0)m=m.next;else{if(GS(m),m=l=m.prev,m===m.next)break;f=!0}while(f||m!==l);return l}function BS(c,l,f,m,_,S,I){if(!c)return;!I&&S&&function(N,j,z,B){let Y=N;do Y.z===0&&(Y.z=PF(Y.x,Y.y,j,z,B)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==N);Y.prevZ.nextZ=null,Y.prevZ=null,function(K){let te,oe=1;do{let pe,ve=K;K=null;let $e=null;for(te=0;ve;){te++;let Ce=ve,He=0;for(let bt=0;bt<oe&&(He++,Ce=Ce.nextZ,Ce);bt++);let rt=oe;for(;He>0||rt>0&&Ce;)He!==0&&(rt===0||!Ce||ve.z<=Ce.z)?(pe=ve,ve=ve.nextZ,He--):(pe=Ce,Ce=Ce.nextZ,rt--),$e?$e.nextZ=pe:K=pe,pe.prevZ=$e,$e=pe;ve=Ce}$e.nextZ=null,oe*=2}while(te>1)}(Y)}(c,m,_,S);let C=c;for(;c.prev!==c.next;){let N=c.prev,j=c.next;if(S?Gat(c,m,_,S):Vat(c))l.push(N.i,c.i,j.i),GS(c),c=j.next,C=j.next;else if((c=j)===C){I?I===1?BS(c=Hat(Py(c),l),l,f,m,_,S,2):I===2&&Wat(c,l,f,m,_,S):BS(Py(c),l,f,m,_,S,1);break}}}function Vat(c){let l=c.prev,f=c,m=c.next;if(Ei(l,f,m)>=0)return!1;let _=l.x,S=f.x,I=m.x,C=l.y,N=f.y,j=m.y,z=_<S?_<I?_:I:S<I?S:I,B=C<N?C<j?C:j:N<j?N:j,Y=_>S?_>I?_:I:S>I?S:I,K=C>N?C>j?C:j:N>j?N:j,te=m.next;for(;te!==l;){if(te.x>=z&&te.x<=Y&&te.y>=B&&te.y<=K&&L_(_,C,S,N,I,j,te.x,te.y)&&Ei(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function Gat(c,l,f,m){let _=c.prev,S=c,I=c.next;if(Ei(_,S,I)>=0)return!1;let C=_.x,N=S.x,j=I.x,z=_.y,B=S.y,Y=I.y,K=C<N?C<j?C:j:N<j?N:j,te=z<B?z<Y?z:Y:B<Y?B:Y,oe=C>N?C>j?C:j:N>j?N:j,pe=z>B?z>Y?z:Y:B>Y?B:Y,ve=PF(K,te,l,f,m),$e=PF(oe,pe,l,f,m),Ce=c.prevZ,He=c.nextZ;for(;Ce&&Ce.z>=ve&&He&&He.z<=$e;){if(Ce.x>=K&&Ce.x<=oe&&Ce.y>=te&&Ce.y<=pe&&Ce!==_&&Ce!==I&&L_(C,z,N,B,j,Y,Ce.x,Ce.y)&&Ei(Ce.prev,Ce,Ce.next)>=0||(Ce=Ce.prevZ,He.x>=K&&He.x<=oe&&He.y>=te&&He.y<=pe&&He!==_&&He!==I&&L_(C,z,N,B,j,Y,He.x,He.y)&&Ei(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Ce&&Ce.z>=ve;){if(Ce.x>=K&&Ce.x<=oe&&Ce.y>=te&&Ce.y<=pe&&Ce!==_&&Ce!==I&&L_(C,z,N,B,j,Y,Ce.x,Ce.y)&&Ei(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.prevZ}for(;He&&He.z<=$e;){if(He.x>=K&&He.x<=oe&&He.y>=te&&He.y<=pe&&He!==_&&He!==I&&L_(C,z,N,B,j,Y,He.x,He.y)&&Ei(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function Hat(c,l){let f=c;do{let m=f.prev,_=f.next.next;!I4(m,_)&&dse(m,f,f.next,_)&&VS(m,_)&&VS(_,m)&&(l.push(m.i,f.i,_.i),GS(f),GS(f.next),f=c=_),f=f.next}while(f!==c);return Py(f)}function Wat(c,l,f,m,_,S){let I=c;do{let C=I.next.next;for(;C!==I.prev;){if(I.i!==C.i&&Xat(I,C)){let N=hse(I,C);return I=Py(I,I.next),N=Py(N,N.next),BS(I,l,f,m,_,S,0),void BS(N,l,f,m,_,S,0)}C=C.next}I=I.next}while(I!==c)}function $at(c,l){return c.x-l.x}function Yat(c,l){let f=function(_,S){let I=S,C=_.x,N=_.y,j,z=-1/0;do{if(N<=I.y&&N>=I.next.y&&I.next.y!==I.y){let oe=I.x+(N-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(oe<=C&&oe>z&&(z=oe,j=I.x<I.next.x?I:I.next,oe===C))return j}I=I.next}while(I!==S);if(!j)return null;let B=j,Y=j.x,K=j.y,te=1/0;I=j;do{if(C>=I.x&&I.x>=Y&&C!==I.x&&L_(N<K?C:z,N,Y,K,N<K?z:C,N,I.x,I.y)){let oe=Math.abs(N-I.y)/(C-I.x);VS(I,_)&&(oe<te||oe===te&&(I.x>j.x||I.x===j.x&&Zat(j,I)))&&(j=I,te=oe)}I=I.next}while(I!==B);return j}(c,l);if(!f)return l;let m=hse(f,c);return Py(m,m.next),Py(f,f.next)}function Zat(c,l){return Ei(c.prev,c,l.prev)<0&&Ei(l.next,c,c.next)<0}function PF(c,l,f,m,_){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-f)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function Kat(c){let l=c,f=c;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==c);return f}function L_(c,l,f,m,_,S,I,C){return(_-I)*(l-C)>=(c-I)*(S-C)&&(c-I)*(m-C)>=(f-I)*(l-C)&&(f-I)*(S-C)>=(_-I)*(m-C)}function Xat(c,l){return c.next.i!==l.i&&c.prev.i!==l.i&&!function(f,m){let _=f;do{if(_.i!==f.i&&_.next.i!==f.i&&_.i!==m.i&&_.next.i!==m.i&&dse(_,_.next,f,m))return!0;_=_.next}while(_!==f);return!1}(c,l)&&(VS(c,l)&&VS(l,c)&&function(f,m){let _=f,S=!1,I=(f.x+m.x)/2,C=(f.y+m.y)/2;do _.y>C!=_.next.y>C&&_.next.y!==_.y&&I<(_.next.x-_.x)*(C-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==f);return S}(c,l)&&(Ei(c.prev,c,l.prev)||Ei(c,l.prev,l))||I4(c,l)&&Ei(c.prev,c,c.next)>0&&Ei(l.prev,l,l.next)>0)}function Ei(c,l,f){return(l.y-c.y)*(f.x-l.x)-(l.x-c.x)*(f.y-l.y)}function I4(c,l){return c.x===l.x&&c.y===l.y}function dse(c,l,f,m){let _=M4(Ei(c,l,f)),S=M4(Ei(c,l,m)),I=M4(Ei(f,m,c)),C=M4(Ei(f,m,l));return _!==S&&I!==C||!(_!==0||!T4(c,f,l))||!(S!==0||!T4(c,m,l))||!(I!==0||!T4(f,c,m))||!(C!==0||!T4(f,l,m))}function T4(c,l,f){return l.x<=Math.max(c.x,f.x)&&l.x>=Math.min(c.x,f.x)&&l.y<=Math.max(c.y,f.y)&&l.y>=Math.min(c.y,f.y)}function M4(c){return c>0?1:c<0?-1:0}function VS(c,l){return Ei(c.prev,c,c.next)<0?Ei(c,l,c.next)>=0&&Ei(c,c.prev,l)>=0:Ei(c,l,c.prev)<0||Ei(c,c.next,l)<0}function hse(c,l){let f=kF(c.i,c.x,c.y),m=kF(l.i,l.x,l.y),_=c.next,S=l.prev;return c.next=l,l.prev=c,f.next=_,_.prev=f,m.next=f,f.prev=m,S.next=m,m.prev=S,m}function mse(c,l,f,m){let _=kF(c,l,f);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function GS(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function kF(c,l,f){return{i:c,x:l,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function RF(c,l,f){let m=f.patternDependencies,_=!1;for(let S of l){let I=S.paint.get(`${c}-pattern`);I.isConstant()||(_=!0);let C=I.constantOr(null);C&&(_=!0,m[C.to]=!0,m[C.from]=!0)}return _}function jF(c,l,f,m,_){let S=_.patternDependencies;for(let I of l){let C=I.paint.get(`${c}-pattern`).value;if(C.kind!=="constant"){let N=C.evaluate({zoom:m-1},f,{},_.availableImages),j=C.evaluate({zoom:m},f,{},_.availableImages),z=C.evaluate({zoom:m+1},f,{},_.availableImages);N=N&&N.name?N.name:N,j=j&&j.name?j.name:j,z=z&&z.name?z.name:z,S[N]=!0,S[j]=!0,S[z]=!0,f.patterns[I.id]={min:N,mid:j,max:z}}}return f}class qF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new fc,this.indexArray=new Ru,this.indexArray2=new ma,this.programConfigurations=new Ny(l.layers,l.zoom),this.segments=new bn,this.segments2=new bn,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=RF("fill",this.layers,f);let _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),I=[];for(let{feature:C,id:N,index:j,sourceLayerIndex:z}of l){let B=this.layers[0]._featureFilter.needGeometry,Y=Ly(C,B);if(!this.layers[0]._featureFilter.filter(new Co(this.zoom),Y,m))continue;let K=S?_.evaluate(Y,{},m,f.availableImages):void 0,te={id:N,properties:C.properties,type:C.type,sourceLayerIndex:z,index:j,geometry:B?Y.geometry:Oy(C),patterns:{},sortKey:K};I.push(te)}S&&I.sort((C,N)=>C.sortKey-N.sortKey);for(let C of I){let{geometry:N,index:j,sourceLayerIndex:z}=C;if(this.hasPattern){let B=jF("fill",this.layers,C,this.zoom,f);this.patternFeatures.push(B)}else this.addFeature(C,N,j,m,{});f.featureIndex.insert(l[j].feature,N,j,z,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Bat),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,f,m,_,S){for(let I of n_(f,500)){let C=0;for(let K of I)C+=K.length;let N=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),j=N.vertexLength,z=[],B=[];for(let K of I){if(K.length===0)continue;K!==I[0]&&B.push(z.length/2);let te=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),oe=te.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(oe+K.length-1,oe),z.push(K[0].x),z.push(K[0].y);for(let pe=1;pe<K.length;pe++)this.layoutVertexArray.emplaceBack(K[pe].x,K[pe].y),this.indexArray2.emplaceBack(oe+pe-1,oe+pe),z.push(K[pe].x),z.push(K[pe].y);te.vertexLength+=K.length,te.primitiveLength+=K.length}let Y=fse(z,B);for(let K=0;K<Y.length;K+=3)this.indexArray.emplaceBack(j+Y[K],j+Y[K+1],j+Y[K+2]);N.vertexLength+=C,N.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}}let gse,vse;or("FillBucket",qF,{omit:["layers","patternFeatures"]});var Jat={get paint(){return vse=vse||new E({"fill-antialias":new cr(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Cr(Ae.paint_fill["fill-opacity"]),"fill-color":new Cr(Ae.paint_fill["fill-color"]),"fill-outline-color":new Cr(Ae.paint_fill["fill-outline-color"]),"fill-translate":new cr(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new cr(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new E_(Ae.paint_fill["fill-pattern"])})},get layout(){return gse=gse||new E({"fill-sort-key":new Cr(Ae.layout_fill["fill-sort-key"])})}};class Qat extends d{constructor(l){super(l,Jat)}recalculate(l,f){super.recalculate(l,f);let m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new qF(l)}queryRadius(){return w4(this.paint.get("fill-translate"))}queryIntersectsFeature(l,f,m,_,S,I,C){return Qae(E4(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),_)}isTileClipped(){return!0}}let est=D([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tst=D([{name:"a_centroid",components:2,type:"Int16"}],4),{members:rst}=est;var Xm={},nst=u,yse=P_;function P_(c,l,f,m,_){this.properties={},this.extent=f,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=_,c.readFields(ost,this,l)}function ost(c,l,f){c==1?l.id=f.readVarint():c==2?function(m,_){for(var S=m.readVarint()+m.pos;m.pos<S;){var I=_._keys[m.readVarint()],C=_._values[m.readVarint()];_.properties[I]=C}}(f,l):c==3?l.type=f.readVarint():c==4&&(l._geometry=f.pos)}function ist(c){for(var l,f,m=0,_=0,S=c.length,I=S-1;_<S;I=_++)m+=((f=c[I]).x-(l=c[_]).x)*(l.y+f.y);return m}P_.types=["Unknown","Point","LineString","Polygon"],P_.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var l,f=c.readVarint()+c.pos,m=1,_=0,S=0,I=0,C=[];c.pos<f;){if(_<=0){var N=c.readVarint();m=7&N,_=N>>3}if(_--,m===1||m===2)S+=c.readSVarint(),I+=c.readSVarint(),m===1&&(l&&C.push(l),l=[]),l.push(new nst(S,I));else{if(m!==7)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&C.push(l),C},P_.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var l=c.readVarint()+c.pos,f=1,m=0,_=0,S=0,I=1/0,C=-1/0,N=1/0,j=-1/0;c.pos<l;){if(m<=0){var z=c.readVarint();f=7&z,m=z>>3}if(m--,f===1||f===2)(_+=c.readSVarint())<I&&(I=_),_>C&&(C=_),(S+=c.readSVarint())<N&&(N=S),S>j&&(j=S);else if(f!==7)throw new Error("unknown command "+f)}return[I,N,C,j]},P_.prototype.toGeoJSON=function(c,l,f){var m,_,S=this.extent*Math.pow(2,f),I=this.extent*c,C=this.extent*l,N=this.loadGeometry(),j=P_.types[this.type];function z(K){for(var te=0;te<K.length;te++){var oe=K[te];K[te]=[360*(oe.x+I)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+C)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(m=0;m<N.length;m++)B[m]=N[m][0];z(N=B);break;case 2:for(m=0;m<N.length;m++)z(N[m]);break;case 3:for(N=function(K){var te=K.length;if(te<=1)return[K];for(var oe,pe,ve=[],$e=0;$e<te;$e++){var Ce=ist(K[$e]);Ce!==0&&(pe===void 0&&(pe=Ce<0),pe===Ce<0?(oe&&ve.push(oe),oe=[K[$e]]):oe.push(K[$e]))}return oe&&ve.push(oe),ve}(N),m=0;m<N.length;m++)for(_=0;_<N[m].length;_++)z(N[m][_]);}N.length===1?N=N[0]:j="Multi"+j;var Y={type:"Feature",geometry:{type:j,coordinates:N},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var ast=yse,_se=xse;function xse(c,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(sst,this,l),this.length=this._features.length}function sst(c,l,f){c===15?l.version=f.readVarint():c===1?l.name=f.readString():c===5?l.extent=f.readVarint():c===2?l._features.push(f.pos):c===3?l._keys.push(f.readString()):c===4&&l._values.push(function(m){for(var _=null,S=m.readVarint()+m.pos;m.pos<S;){var I=m.readVarint()>>3;_=I===1?m.readString():I===2?m.readFloat():I===3?m.readDouble():I===4?m.readVarint64():I===5?m.readVarint():I===6?m.readSVarint():I===7?m.readBoolean():null}return _}(f))}xse.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var l=this._pbf.readVarint()+this._pbf.pos;return new ast(this._pbf,l,this.extent,this._keys,this._values)};var lst=_se;function ust(c,l,f){if(c===3){var m=new lst(f,f.readVarint()+f.pos);m.length&&(l[m.name]=m)}}Xm.VectorTile=function(c,l){this.layers=c.readFields(ust,{},l)},Xm.VectorTileFeature=yse,Xm.VectorTileLayer=_se;let cst=Xm.VectorTileFeature.types,zF=Math.pow(2,13);function HS(c,l,f,m,_,S,I,C){c.emplaceBack(l,f,2*Math.floor(m*zF)+I,_*zF*2,S*zF*2,Math.round(C))}class FF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Hm,this.centroidVertexArray=new Aa,this.indexArray=new Ru,this.programConfigurations=new Ny(l.layers,l.zoom),this.segments=new bn,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.features=[],this.hasPattern=RF("fill-extrusion",this.layers,f);for(let{feature:_,id:S,index:I,sourceLayerIndex:C}of l){let N=this.layers[0]._featureFilter.needGeometry,j=Ly(_,N);if(!this.layers[0]._featureFilter.filter(new Co(this.zoom),j,m))continue;let z={id:S,sourceLayerIndex:C,index:I,geometry:N?j.geometry:Oy(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(jF("fill-extrusion",this.layers,z,this.zoom,f)):this.addFeature(z,z.geometry,I,m,{}),f.featureIndex.insert(_,z.geometry,I,C,this.index,!0)}}addFeatures(l,f,m){for(let _ of this.features){let{geometry:S}=_;this.addFeature(_,S,_.index,f,m)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,rst),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,tst.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,f,m,_,S){for(let I of n_(f,500)){let C={x:0,y:0,vertexCount:0},N=0;for(let te of I)N+=te.length;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let te of I){if(te.length===0||pst(te))continue;let oe=0;for(let pe=0;pe<te.length;pe++){let ve=te[pe];if(pe>=1){let $e=te[pe-1];if(!fst(ve,$e)){j.vertexLength+4>bn.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let Ce=ve.sub($e)._perp()._unit(),He=$e.dist(ve);oe+He>32768&&(oe=0),HS(this.layoutVertexArray,ve.x,ve.y,Ce.x,Ce.y,0,0,oe),HS(this.layoutVertexArray,ve.x,ve.y,Ce.x,Ce.y,0,1,oe),C.x+=2*ve.x,C.y+=2*ve.y,C.vertexCount+=2,oe+=He,HS(this.layoutVertexArray,$e.x,$e.y,Ce.x,Ce.y,0,0,oe),HS(this.layoutVertexArray,$e.x,$e.y,Ce.x,Ce.y,0,1,oe),C.x+=2*$e.x,C.y+=2*$e.y,C.vertexCount+=2;let rt=j.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+N>bn.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(N,this.layoutVertexArray,this.indexArray)),cst[l.type]!=="Polygon")continue;let z=[],B=[],Y=j.vertexLength;for(let te of I)if(te.length!==0){te!==I[0]&&B.push(z.length/2);for(let oe=0;oe<te.length;oe++){let pe=te[oe];HS(this.layoutVertexArray,pe.x,pe.y,0,0,1,1,0),C.x+=pe.x,C.y+=pe.y,C.vertexCount+=1,z.push(pe.x),z.push(pe.y)}}let K=fse(z,B);for(let te=0;te<K.length;te+=3)this.indexArray.emplaceBack(Y+K[te],Y+K[te+2],Y+K[te+1]);j.primitiveLength+=K.length/3,j.vertexLength+=N;for(let te=0;te<C.vertexCount;te++){let oe=Math.floor(C.x/C.vertexCount),pe=Math.floor(C.y/C.vertexCount);this.centroidVertexArray.emplaceBack(oe,pe)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}}function fst(c,l){return c.x===l.x&&(c.x<0||c.x>Oi)||c.y===l.y&&(c.y<0||c.y>Oi)}function pst(c){return c.every(l=>l.x<0)||c.every(l=>l.x>Oi)||c.every(l=>l.y<0)||c.every(l=>l.y>Oi)}let bse;or("FillExtrusionBucket",FF,{omit:["layers","features"]});var dst={get paint(){return bse=bse||new E({"fill-extrusion-opacity":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Cr(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new E_(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Cr(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Cr(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class hst extends d{constructor(l){super(l,dst)}createBucket(l){return new FF(l)}queryRadius(){return w4(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,f,m,_,S,I,C,N){let j=E4(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),z=this.paint.get("fill-extrusion-height").evaluate(f,m),B=this.paint.get("fill-extrusion-base").evaluate(f,m),Y=function(te,oe,pe,ve){let $e=[];for(let Ce of te){let He=[Ce.x,Ce.y,0,1];S4(He,He,oe),$e.push(new h(He[0]/He[3],He[1]/He[3]))}return $e}(j,N),K=function(te,oe,pe,ve){let $e=[],Ce=[],He=ve[8]*oe,rt=ve[9]*oe,bt=ve[10]*oe,Qt=ve[11]*oe,Ir=ve[8]*pe,Kt=ve[9]*pe,Ut=ve[10]*pe,dr=ve[11]*pe;for(let sr of te){let rr=[],ut=[];for(let gr of sr){let pr=gr.x,Lr=gr.y,mo=ve[0]*pr+ve[4]*Lr+ve[12],co=ve[1]*pr+ve[5]*Lr+ve[13],ta=ve[2]*pr+ve[6]*Lr+ve[14],pc=ve[3]*pr+ve[7]*Lr+ve[15],Oa=ta+bt,ra=pc+Qt,Ls=mo+Ir,Ps=co+Kt,ks=ta+Ut,gi=pc+dr,na=new h((mo+He)/ra,(co+rt)/ra);na.z=Oa/ra,rr.push(na);let ts=new h(Ls/gi,Ps/gi);ts.z=ks/gi,ut.push(ts)}$e.push(rr),Ce.push(ut)}return[$e,Ce]}(_,B,z,N);return function(te,oe,pe){let ve=1/0;Qae(pe,oe)&&(ve=wse(pe,oe[0]));for(let $e=0;$e<oe.length;$e++){let Ce=oe[$e],He=te[$e];for(let rt=0;rt<Ce.length-1;rt++){let bt=Ce[rt],Qt=[bt,Ce[rt+1],He[rt+1],He[rt],bt];Jae(pe,Qt)&&(ve=Math.min(ve,wse(pe,Qt)))}}return ve!==1/0&&ve}(K[0],K[1],Y)}}function WS(c,l){return c.x*l.x+c.y*l.y}function wse(c,l){if(c.length===1){let f=0,m=l[f++],_;for(;!_||m.equals(_);)if(_=l[f++],!_)return 1/0;for(;f<l.length;f++){let S=l[f],I=c[0],C=_.sub(m),N=S.sub(m),j=I.sub(m),z=WS(C,C),B=WS(C,N),Y=WS(N,N),K=WS(j,C),te=WS(j,N),oe=z*Y-B*B,pe=(Y*K-B*te)/oe,ve=(z*te-B*K)/oe,$e=m.z*(1-pe-ve)+_.z*pe+S.z*ve;if(isFinite($e))return $e}return 1/0}{let f=1/0;for(let m of l)f=Math.min(f,m.z);return f}}let mst=D([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:gst}=mst,vst=D([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:yst}=vst,_st=Xm.VectorTileFeature.types,xst=Math.cos(Math.PI/180*37.5),Ese=Math.pow(2,14)/.5;class UF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new I_,this.layoutVertexArray2=new Wm,this.indexArray=new Ru,this.programConfigurations=new Ny(l.layers,l.zoom),this.segments=new bn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=RF("line",this.layers,f);let _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),I=[];for(let{feature:C,id:N,index:j,sourceLayerIndex:z}of l){let B=this.layers[0]._featureFilter.needGeometry,Y=Ly(C,B);if(!this.layers[0]._featureFilter.filter(new Co(this.zoom),Y,m))continue;let K=S?_.evaluate(Y,{},m):void 0,te={id:N,properties:C.properties,type:C.type,sourceLayerIndex:z,index:j,geometry:B?Y.geometry:Oy(C),patterns:{},sortKey:K};I.push(te)}S&&I.sort((C,N)=>C.sortKey-N.sortKey);for(let C of I){let{geometry:N,index:j,sourceLayerIndex:z}=C;if(this.hasPattern){let B=jF("line",this.layers,C,this.zoom,f);this.patternFeatures.push(B)}else this.addFeature(C,N,j,m,{});f.featureIndex.insert(l[j].feature,N,j,z,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,yst)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,gst),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,f,m,_,S){let I=this.layers[0].layout,C=I.get("line-join").evaluate(l,{}),N=I.get("line-cap"),j=I.get("line-miter-limit"),z=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(let B of f)this.addLine(B,l,C,N,j,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}addLine(l,f,m,_,S,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<l.length-1;ve++)this.totalDistance+=l[ve].dist(l[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let C=_st[f.type]==="Polygon",N=l.length;for(;N>=2&&l[N-1].equals(l[N-2]);)N--;let j=0;for(;j<N-1&&l[j].equals(l[j+1]);)j++;if(N<(C?3:2))return;m==="bevel"&&(S=1.05);let z=this.overscaling<=16?15*Oi/(512*this.overscaling):0,B=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray),Y,K,te,oe,pe;this.e1=this.e2=-1,C&&(Y=l[N-2],pe=l[j].sub(Y)._unit()._perp());for(let ve=j;ve<N;ve++){if(te=ve===N-1?C?l[j+1]:void 0:l[ve+1],te&&l[ve].equals(te))continue;pe&&(oe=pe),Y&&(K=Y),Y=l[ve],pe=te?te.sub(Y)._unit()._perp():oe,oe=oe||pe;let $e=oe.add(pe);$e.x===0&&$e.y===0||$e._unit();let Ce=oe.x*pe.x+oe.y*pe.y,He=$e.x*pe.x+$e.y*pe.y,rt=He!==0?1/He:1/0,bt=2*Math.sqrt(2-2*He),Qt=He<xst&&K&&te,Ir=oe.x*pe.y-oe.y*pe.x>0;if(Qt&&ve>j){let dr=Y.dist(K);if(dr>2*z){let sr=Y.sub(Y.sub(K)._mult(z/dr)._round());this.updateDistance(K,sr),this.addCurrentVertex(sr,oe,0,0,B),K=sr}}let Kt=K&&te,Ut=Kt?m:C?"butt":_;if(Kt&&Ut==="round"&&(rt<I?Ut="miter":rt<=2&&(Ut="fakeround")),Ut==="miter"&&rt>S&&(Ut="bevel"),Ut==="bevel"&&(rt>2&&(Ut="flipbevel"),rt<S&&(Ut="miter")),K&&this.updateDistance(K,Y),Ut==="miter")$e._mult(rt),this.addCurrentVertex(Y,$e,0,0,B);else if(Ut==="flipbevel"){if(rt>100)$e=pe.mult(-1);else{let dr=rt*oe.add(pe).mag()/oe.sub(pe).mag();$e._perp()._mult(dr*(Ir?-1:1))}this.addCurrentVertex(Y,$e,0,0,B),this.addCurrentVertex(Y,$e.mult(-1),0,0,B)}else if(Ut==="bevel"||Ut==="fakeround"){let dr=-Math.sqrt(rt*rt-1),sr=Ir?dr:0,rr=Ir?0:dr;if(K&&this.addCurrentVertex(Y,oe,sr,rr,B),Ut==="fakeround"){let ut=Math.round(180*bt/Math.PI/20);for(let gr=1;gr<ut;gr++){let pr=gr/ut;if(pr!==.5){let mo=pr-.5;pr+=pr*mo*(pr-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*mo*mo+(.848013+Ce*(.215638*Ce-1.06021)))}let Lr=pe.sub(oe)._mult(pr)._add(oe)._unit()._mult(Ir?-1:1);this.addHalfVertex(Y,Lr.x,Lr.y,!1,Ir,0,B)}}te&&this.addCurrentVertex(Y,pe,-sr,-rr,B)}else if(Ut==="butt")this.addCurrentVertex(Y,$e,0,0,B);else if(Ut==="square"){let dr=K?1:-1;this.addCurrentVertex(Y,$e,dr,dr,B)}else Ut==="round"&&(K&&(this.addCurrentVertex(Y,oe,0,0,B),this.addCurrentVertex(Y,oe,1,1,B,!0)),te&&(this.addCurrentVertex(Y,pe,-1,-1,B,!0),this.addCurrentVertex(Y,pe,0,0,B)));if(Qt&&ve<N-1){let dr=Y.dist(te);if(dr>2*z){let sr=Y.add(te.sub(Y)._mult(z/dr)._round());this.updateDistance(Y,sr),this.addCurrentVertex(sr,pe,0,0,B),Y=sr}}}}addCurrentVertex(l,f,m,_,S,I=!1){let C=f.y*_-f.x,N=-f.y-f.x*_;this.addHalfVertex(l,f.x+f.y*m,f.y-f.x*m,I,!1,m,S),this.addHalfVertex(l,C,N,I,!0,-_,S),this.distance>Ese/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,f,m,_,S,I))}addHalfVertex({x:l,y:f},m,_,S,I,C,N){let j=.5*(this.lineClips?this.scaledDistance*(Ese-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(S?1:0),(f<<1)+(I?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(C===0?0:C<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let z=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),N.primitiveLength++),I?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,f){this.distance+=l.dist(f),this.updateScaledDistance()}}let Sse,Ise;or("LineBucket",UF,{omit:["layers","patternFeatures"]});var Tse={get paint(){return Ise=Ise||new E({"line-opacity":new Cr(Ae.paint_line["line-opacity"]),"line-color":new Cr(Ae.paint_line["line-color"]),"line-translate":new cr(Ae.paint_line["line-translate"]),"line-translate-anchor":new cr(Ae.paint_line["line-translate-anchor"]),"line-width":new Cr(Ae.paint_line["line-width"]),"line-gap-width":new Cr(Ae.paint_line["line-gap-width"]),"line-offset":new Cr(Ae.paint_line["line-offset"]),"line-blur":new Cr(Ae.paint_line["line-blur"]),"line-dasharray":new S_(Ae.paint_line["line-dasharray"]),"line-pattern":new E_(Ae.paint_line["line-pattern"]),"line-gradient":new RS(Ae.paint_line["line-gradient"])})},get layout(){return Sse=Sse||new E({"line-cap":new cr(Ae.layout_line["line-cap"]),"line-join":new Cr(Ae.layout_line["line-join"]),"line-miter-limit":new cr(Ae.layout_line["line-miter-limit"]),"line-round-limit":new cr(Ae.layout_line["line-round-limit"]),"line-sort-key":new Cr(Ae.layout_line["line-sort-key"])})}};class bst extends Cr{possiblyEvaluate(l,f){return f=new Co(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(l,f)}evaluate(l,f,m,_){return f=X({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(l,f,m,_)}}let C4;class wst extends d{constructor(l){super(l,Tse),this.gradientVersion=0,C4||(C4=new bst(Tse.paint.properties["line-width"].specification),C4.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){let f=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof Tm,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,f){super.recalculate(l,f),this.paint._values["line-floorwidth"]=C4.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new UF(l)}queryRadius(l){let f=l,m=Mse(zS("line-width",this,f),zS("line-gap-width",this,f)),_=zS("line-offset",this,f);return m/2+Math.abs(_)+w4(this.paint.get("line-translate"))}queryIntersectsFeature(l,f,m,_,S,I,C){let N=E4(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),j=C/2*Mse(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),z=this.paint.get("line-offset").evaluate(f,m);return z&&(_=function(B,Y){let K=[];for(let te=0;te<B.length;te++){let oe=B[te],pe=[];for(let ve=0;ve<oe.length;ve++){let $e=oe[ve-1],Ce=oe[ve],He=oe[ve+1],rt=ve===0?new h(0,0):Ce.sub($e)._unit()._perp(),bt=ve===oe.length-1?new h(0,0):He.sub(Ce)._unit()._perp(),Qt=rt._add(bt)._unit(),Ir=Qt.x*bt.x+Qt.y*bt.y;Ir!==0&&Qt._mult(1/Ir),pe.push(Qt._mult(Y)._add(Ce))}K.push(pe)}return K}(_,z*C)),function(B,Y,K){for(let te=0;te<Y.length;te++){let oe=Y[te];if(B.length>=3){for(let pe=0;pe<oe.length;pe++)if(N_(B,oe[pe]))return!0}if(Nat(B,oe,K))return!0}return!1}(N,_,j)}isTileClipped(){return!0}}function Mse(c,l){return l>0?l+2*c:c}let Est=D([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Sst=D([{name:"a_projected_pos",components:3,type:"Float32"}],4);D([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Ist=D([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);D([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Cse=D([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Tst=D([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Mst(c,l,f){return c.sections.forEach(m=>{m.text=function(_,S,I){let C=S.layout.get("text-transform").evaluate(I,{});return C==="uppercase"?_=_.toLocaleUpperCase():C==="lowercase"&&(_=_.toLocaleLowerCase()),ml.applyArabicShaping&&(_=ml.applyArabicShaping(_)),_}(m.text,l,f)}),c}D([{name:"triangle",components:3,type:"Uint16"}]),D([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),D([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),D([{type:"Float32",name:"offsetX"}]),D([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),D([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let $S={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ui=24,Ase=uo,Dse=function(c,l,f,m,_){var S,I,C=8*_-m-1,N=(1<<C)-1,j=N>>1,z=-7,B=f?_-1:0,Y=f?-1:1,K=c[l+B];for(B+=Y,S=K&(1<<-z)-1,K>>=-z,z+=C;z>0;S=256*S+c[l+B],B+=Y,z-=8);for(I=S&(1<<-z)-1,S>>=-z,z+=m;z>0;I=256*I+c[l+B],B+=Y,z-=8);if(S===0)S=1-j;else{if(S===N)return I?NaN:1/0*(K?-1:1);I+=Math.pow(2,m),S-=j}return(K?-1:1)*I*Math.pow(2,S-m)},Nse=function(c,l,f,m,_,S){var I,C,N,j=8*S-_-1,z=(1<<j)-1,B=z>>1,Y=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=m?0:S-1,te=m?1:-1,oe=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(C=isNaN(l)?1:0,I=z):(I=Math.floor(Math.log(l)/Math.LN2),l*(N=Math.pow(2,-I))<1&&(I--,N*=2),(l+=I+B>=1?Y/N:Y*Math.pow(2,1-B))*N>=2&&(I++,N/=2),I+B>=z?(C=0,I=z):I+B>=1?(C=(l*N-1)*Math.pow(2,_),I+=B):(C=l*Math.pow(2,B-1)*Math.pow(2,_),I=0));_>=8;c[f+K]=255&C,K+=te,C/=256,_-=8);for(I=I<<_|C,j+=_;j>0;c[f+K]=255&I,K+=te,I/=256,j-=8);c[f+K-te]|=128*oe};function uo(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}uo.Varint=0,uo.Fixed64=1,uo.Bytes=2,uo.Fixed32=5;var BF=4294967296,Ose=1/BF,Lse=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function rh(c){return c.type===uo.Bytes?c.readVarint()+c.pos:c.pos+1}function k_(c,l,f){return f?4294967296*l+(c>>>0):4294967296*(l>>>0)+(c>>>0)}function Pse(c,l,f){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));f.realloc(m);for(var _=f.pos-1;_>=c;_--)f.buf[_+m]=f.buf[_]}function Cst(c,l){for(var f=0;f<c.length;f++)l.writeVarint(c[f])}function Ast(c,l){for(var f=0;f<c.length;f++)l.writeSVarint(c[f])}function Dst(c,l){for(var f=0;f<c.length;f++)l.writeFloat(c[f])}function Nst(c,l){for(var f=0;f<c.length;f++)l.writeDouble(c[f])}function Ost(c,l){for(var f=0;f<c.length;f++)l.writeBoolean(c[f])}function Lst(c,l){for(var f=0;f<c.length;f++)l.writeFixed32(c[f])}function Pst(c,l){for(var f=0;f<c.length;f++)l.writeSFixed32(c[f])}function kst(c,l){for(var f=0;f<c.length;f++)l.writeFixed64(c[f])}function Rst(c,l){for(var f=0;f<c.length;f++)l.writeSFixed64(c[f])}function A4(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+16777216*c[l+3]}function R_(c,l,f){c[f]=l,c[f+1]=l>>>8,c[f+2]=l>>>16,c[f+3]=l>>>24}function kse(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+(c[l+3]<<24)}uo.prototype={destroy:function(){this.buf=null},readFields:function(c,l,f){for(f=f||this.length;this.pos<f;){var m=this.readVarint(),_=m>>3,S=this.pos;this.type=7&m,c(_,l,this),this.pos===S&&this.skip(m)}return l},readMessage:function(c,l){return this.readFields(c,l,this.readVarint()+this.pos)},readFixed32:function(){var c=A4(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=kse(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=A4(this.buf,this.pos)+A4(this.buf,this.pos+4)*BF;return this.pos+=8,c},readSFixed64:function(){var c=A4(this.buf,this.pos)+kse(this.buf,this.pos+4)*BF;return this.pos+=8,c},readFloat:function(){var c=Dse(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=Dse(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var l,f,m=this.buf;return l=127&(f=m[this.pos++]),f<128?l:(l|=(127&(f=m[this.pos++]))<<7,f<128?l:(l|=(127&(f=m[this.pos++]))<<14,f<128?l:(l|=(127&(f=m[this.pos++]))<<21,f<128?l:function(_,S,I){var C,N,j=I.buf;if(C=(112&(N=j[I.pos++]))>>4,N<128||(C|=(127&(N=j[I.pos++]))<<3,N<128)||(C|=(127&(N=j[I.pos++]))<<10,N<128)||(C|=(127&(N=j[I.pos++]))<<17,N<128)||(C|=(127&(N=j[I.pos++]))<<24,N<128)||(C|=(1&(N=j[I.pos++]))<<31,N<128))return k_(_,C,S);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(f=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,l=this.pos;return this.pos=c,c-l>=12&&Lse?function(f,m,_){return Lse.decode(f.subarray(m,_))}(this.buf,l,c):function(f,m,_){for(var S="",I=m;I<_;){var C,N,j,z=f[I],B=null,Y=z>239?4:z>223?3:z>191?2:1;if(I+Y>_)break;Y===1?z<128&&(B=z):Y===2?(192&(C=f[I+1]))==128&&(B=(31&z)<<6|63&C)<=127&&(B=null):Y===3?(N=f[I+2],(192&(C=f[I+1]))==128&&(192&N)==128&&((B=(15&z)<<12|(63&C)<<6|63&N)<=2047||B>=55296&&B<=57343)&&(B=null)):Y===4&&(N=f[I+2],j=f[I+3],(192&(C=f[I+1]))==128&&(192&N)==128&&(192&j)==128&&((B=(15&z)<<18|(63&C)<<12|(63&N)<<6|63&j)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,Y=1):B>65535&&(B-=65536,S+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),S+=String.fromCharCode(B),I+=Y}return S}(this.buf,l,c)},readBytes:function(){var c=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,c);return this.pos=c,l},readPackedVarint:function(c,l){if(this.type!==uo.Bytes)return c.push(this.readVarint(l));var f=rh(this);for(c=c||[];this.pos<f;)c.push(this.readVarint(l));return c},readPackedSVarint:function(c){if(this.type!==uo.Bytes)return c.push(this.readSVarint());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==uo.Bytes)return c.push(this.readBoolean());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==uo.Bytes)return c.push(this.readFloat());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==uo.Bytes)return c.push(this.readDouble());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==uo.Bytes)return c.push(this.readFixed32());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==uo.Bytes)return c.push(this.readSFixed32());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==uo.Bytes)return c.push(this.readFixed64());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==uo.Bytes)return c.push(this.readSFixed64());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed64());return c},skip:function(c){var l=7&c;if(l===uo.Varint)for(;this.buf[this.pos++]>127;);else if(l===uo.Bytes)this.pos=this.readVarint()+this.pos;else if(l===uo.Fixed32)this.pos+=4;else{if(l!==uo.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(c,l){this.writeVarint(c<<3|l)},realloc:function(c){for(var l=this.length||16;l<this.pos+c;)l*=2;if(l!==this.length){var f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),R_(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),R_(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),R_(this.buf,-1&c,this.pos),R_(this.buf,Math.floor(c*Ose),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),R_(this.buf,-1&c,this.pos),R_(this.buf,Math.floor(c*Ose),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(l,f){var m,_;if(l>=0?(m=l%4294967296|0,_=l/4294967296|0):(_=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,_=_+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(S,I,C){C.buf[C.pos++]=127&S|128,S>>>=7,C.buf[C.pos++]=127&S|128,S>>>=7,C.buf[C.pos++]=127&S|128,S>>>=7,C.buf[C.pos++]=127&S|128,C.buf[C.pos]=127&(S>>>=7)}(m,0,f),function(S,I){var C=(7&S)<<4;I.buf[I.pos++]|=C|((S>>>=3)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S)))))}(_,f)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var l=this.pos;this.pos=function(m,_,S){for(var I,C,N=0;N<_.length;N++){if((I=_.charCodeAt(N))>55295&&I<57344){if(!C){I>56319||N+1===_.length?(m[S++]=239,m[S++]=191,m[S++]=189):C=I;continue}if(I<56320){m[S++]=239,m[S++]=191,m[S++]=189,C=I;continue}I=C-55296<<10|I-56320|65536,C=null}else C&&(m[S++]=239,m[S++]=191,m[S++]=189,C=null);I<128?m[S++]=I:(I<2048?m[S++]=I>>6|192:(I<65536?m[S++]=I>>12|224:(m[S++]=I>>18|240,m[S++]=I>>12&63|128),m[S++]=I>>6&63|128),m[S++]=63&I|128)}return S}(this.buf,c,this.pos);var f=this.pos-l;f>=128&&Pse(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(c){this.realloc(4),Nse(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Nse(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var l=c.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=c[f]},writeRawMessage:function(c,l){this.pos++;var f=this.pos;c(l,this);var m=this.pos-f;m>=128&&Pse(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,l,f){this.writeTag(c,uo.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(c,l){l.length&&this.writeMessage(c,Cst,l)},writePackedSVarint:function(c,l){l.length&&this.writeMessage(c,Ast,l)},writePackedBoolean:function(c,l){l.length&&this.writeMessage(c,Ost,l)},writePackedFloat:function(c,l){l.length&&this.writeMessage(c,Dst,l)},writePackedDouble:function(c,l){l.length&&this.writeMessage(c,Nst,l)},writePackedFixed32:function(c,l){l.length&&this.writeMessage(c,Lst,l)},writePackedSFixed32:function(c,l){l.length&&this.writeMessage(c,Pst,l)},writePackedFixed64:function(c,l){l.length&&this.writeMessage(c,kst,l)},writePackedSFixed64:function(c,l){l.length&&this.writeMessage(c,Rst,l)},writeBytesField:function(c,l){this.writeTag(c,uo.Bytes),this.writeBytes(l)},writeFixed32Field:function(c,l){this.writeTag(c,uo.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(c,l){this.writeTag(c,uo.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(c,l){this.writeTag(c,uo.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(c,l){this.writeTag(c,uo.Fixed64),this.writeSFixed64(l)},writeVarintField:function(c,l){this.writeTag(c,uo.Varint),this.writeVarint(l)},writeSVarintField:function(c,l){this.writeTag(c,uo.Varint),this.writeSVarint(l)},writeStringField:function(c,l){this.writeTag(c,uo.Bytes),this.writeString(l)},writeFloatField:function(c,l){this.writeTag(c,uo.Fixed32),this.writeFloat(l)},writeDoubleField:function(c,l){this.writeTag(c,uo.Fixed64),this.writeDouble(l)},writeBooleanField:function(c,l){this.writeVarintField(c,!!l)}};var VF=a(Ase);let GF=3;function jst(c,l,f){c===1&&f.readMessage(qst,l)}function qst(c,l,f){if(c===3){let{id:m,bitmap:_,width:S,height:I,left:C,top:N,advance:j}=f.readMessage(zst,{});l.push({id:m,bitmap:new US({width:S+2*GF,height:I+2*GF},_),metrics:{width:S,height:I,left:C,top:N,advance:j}})}}function zst(c,l,f){c===1?l.id=f.readVarint():c===2?l.bitmap=f.readBytes():c===3?l.width=f.readVarint():c===4?l.height=f.readVarint():c===5?l.left=f.readSVarint():c===6?l.top=f.readSVarint():c===7&&(l.advance=f.readVarint())}let Rse=GF;function jse(c){let l=0,f=0;for(let I of c)l+=I.w*I.h,f=Math.max(f,I.w);c.sort((I,C)=>C.h-I.h);let m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}],_=0,S=0;for(let I of c)for(let C=m.length-1;C>=0;C--){let N=m[C];if(!(I.w>N.w||I.h>N.h)){if(I.x=N.x,I.y=N.y,S=Math.max(S,I.y+I.h),_=Math.max(_,I.x+I.w),I.w===N.w&&I.h===N.h){let j=m.pop();C<m.length&&(m[C]=j)}else I.h===N.h?(N.x+=I.w,N.w-=I.w):I.w===N.w?(N.y+=I.h,N.h-=I.h):(m.push({x:N.x+I.w,y:N.y,w:N.w-I.w,h:I.h}),N.y+=I.h,N.h-=I.h);break}}return{w:_,h:S,fill:l/(_*S)||0}}let vl=1;class HF{constructor(l,{pixelRatio:f,version:m,stretchX:_,stretchY:S,content:I,textFitWidth:C,textFitHeight:N}){this.paddedRect=l,this.pixelRatio=f,this.stretchX=_,this.stretchY=S,this.content=I,this.version=m,this.textFitWidth=C,this.textFitHeight=N}get tl(){return[this.paddedRect.x+vl,this.paddedRect.y+vl]}get br(){return[this.paddedRect.x+this.paddedRect.w-vl,this.paddedRect.y+this.paddedRect.h-vl]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*vl)/this.pixelRatio,(this.paddedRect.h-2*vl)/this.pixelRatio]}}class qse{constructor(l,f){let m={},_={};this.haveRenderCallbacks=[];let S=[];this.addImages(l,m,S),this.addImages(f,_,S);let{w:I,h:C}=jse(S),N=new ju({width:I||1,height:C||1});for(let j in l){let z=l[j],B=m[j].paddedRect;ju.copy(z.data,N,{x:0,y:0},{x:B.x+vl,y:B.y+vl},z.data)}for(let j in f){let z=f[j],B=_[j].paddedRect,Y=B.x+vl,K=B.y+vl,te=z.data.width,oe=z.data.height;ju.copy(z.data,N,{x:0,y:0},{x:Y,y:K},z.data),ju.copy(z.data,N,{x:0,y:oe-1},{x:Y,y:K-1},{width:te,height:1}),ju.copy(z.data,N,{x:0,y:0},{x:Y,y:K+oe},{width:te,height:1}),ju.copy(z.data,N,{x:te-1,y:0},{x:Y-1,y:K},{width:1,height:oe}),ju.copy(z.data,N,{x:0,y:0},{x:Y+te,y:K},{width:1,height:oe})}this.image=N,this.iconPositions=m,this.patternPositions=_}addImages(l,f,m){for(let _ in l){let S=l[_],I={x:0,y:0,w:S.data.width+2*vl,h:S.data.height+2*vl};m.push(I),f[_]=new HF(I,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,f){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),f),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),f)}patchUpdatedImage(l,f,m){if(!l||!f||l.version===f.version)return;l.version=f.version;let[_,S]=l.tl;m.update(f.data,void 0,{x:_,y:S})}}var Jm;or("ImagePosition",HF),or("ImageAtlas",qse),o.ah=void 0,(Jm=o.ah||(o.ah={}))[Jm.none=0]="none",Jm[Jm.horizontal=1]="horizontal",Jm[Jm.vertical=2]="vertical",Jm[Jm.horizontalOnly=3]="horizontalOnly";let YS=-17;class ZS{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,f){let m=new ZS;return m.scale=l||1,m.fontStack=f,m}static forImage(l){let f=new ZS;return f.imageName=l,f}}class j_{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,f){let m=new j_;for(let _=0;_<l.sections.length;_++){let S=l.sections[_];S.image?m.addImageSection(S):m.addTextSection(S,f)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let f="";for(let m=0;m<l.length;m++){let _=l.charCodeAt(m+1)||null,S=l.charCodeAt(m-1)||null;f+=_&&m4(_)&&!$S[l[m+1]]||S&&m4(S)&&!$S[l[m-1]]||!$S[l[m]]?l[m]:$S[l[m]]}return f}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&N4[this.text.charCodeAt(m)];m++)l++;let f=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&N4[this.text.charCodeAt(m)];m--)f--;this.text=this.text.substring(l,f),this.sectionIndex=this.sectionIndex.slice(l,f)}substring(l,f){let m=new j_;return m.text=this.text.substring(l,f),m.sectionIndex=this.sectionIndex.slice(l,f),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,f)=>Math.max(l,this.sections[f].scale),0)}addTextSection(l,f){this.text+=l.text,this.sections.push(ZS.forText(l.scale,l.fontStack||f));let m=this.sections.length-1;for(let _=0;_<l.text.length;++_)this.sectionIndex.push(m)}addImageSection(l){let f=l.image?l.image.name:"";if(f.length===0)return void ke("Can't add FormattedSection with an empty image.");let m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(ZS.forImage(f)),this.sectionIndex.push(this.sections.length-1)):ke("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function D4(c,l,f,m,_,S,I,C,N,j,z,B,Y,K,te){let oe=j_.fromFeature(c,_),pe;B===o.ah.vertical&&oe.verticalizePunctuation();let{processBidirectionalText:ve,processStyledBidirectionalText:$e}=ml;if(ve&&oe.sections.length===1){pe=[];let rt=ve(oe.toString(),WF(oe,j,S,l,m,K));for(let bt of rt){let Qt=new j_;Qt.text=bt,Qt.sections=oe.sections;for(let Ir=0;Ir<bt.length;Ir++)Qt.sectionIndex.push(0);pe.push(Qt)}}else if($e){pe=[];let rt=$e(oe.text,oe.sectionIndex,WF(oe,j,S,l,m,K));for(let bt of rt){let Qt=new j_;Qt.text=bt[0],Qt.sectionIndex=bt[1],Qt.sections=oe.sections,pe.push(Qt)}}else pe=function(rt,bt){let Qt=[],Ir=rt.text,Kt=0;for(let Ut of bt)Qt.push(rt.substring(Kt,Ut)),Kt=Ut;return Kt<Ir.length&&Qt.push(rt.substring(Kt,Ir.length)),Qt}(oe,WF(oe,j,S,l,m,K));let Ce=[],He={positionedLines:Ce,text:oe.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(rt,bt,Qt,Ir,Kt,Ut,dr,sr,rr,ut,gr,pr){let Lr=0,mo=YS,co=0,ta=0,pc=sr==="right"?1:sr==="left"?0:.5,Oa=0;for(let gi of Kt){gi.trim();let na=gi.getMaxScale(),ts=(na-1)*Ui,La={positionedGlyphs:[],lineOffset:0};rt.positionedLines[Oa]=La;let Rs=La.positionedGlyphs,Pa=0;if(!gi.length()){mo+=Ut,++Oa;continue}for(let yl=0;yl<gi.length();yl++){let qn=gi.getSection(yl),_o=gi.getSectionIndex(yl),Oo=gi.getCharCode(yl),Wl=0,ai=null,U_=null,xp=null,bp=Ui,dc=!(rr===o.ah.horizontal||!gr&&!PS(Oo)||gr&&(N4[Oo]||(ra=Oo,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(ra)))));if(qn.imageName){let Fu=Ir[qn.imageName];if(!Fu)continue;xp=qn.imageName,rt.iconsInText=rt.iconsInText||!0,U_=Fu.paddedRect;let ga=Fu.displaySize;qn.scale=qn.scale*Ui/pr,ai={width:ga[0],height:ga[1],left:vl,top:-Rse,advance:dc?ga[1]:ga[0]},Wl=ts+(Ui-ga[1]*qn.scale),bp=ai.advance;let nh=dc?ga[0]*qn.scale-Ui*na:ga[1]*qn.scale-Ui*na;nh>0&&nh>Pa&&(Pa=nh)}else{let Fu=Qt[qn.fontStack],ga=Fu&&Fu[Oo];if(ga&&ga.rect)U_=ga.rect,ai=ga.metrics;else{let nh=bt[qn.fontStack],t2=nh&&nh[Oo];if(!t2)continue;ai=t2.metrics}Wl=(na-qn.scale)*Ui}dc?(rt.verticalizable=!0,Rs.push({glyph:Oo,imageName:xp,x:Lr,y:mo+Wl,vertical:dc,scale:qn.scale,fontStack:qn.fontStack,sectionIndex:_o,metrics:ai,rect:U_}),Lr+=bp*qn.scale+ut):(Rs.push({glyph:Oo,imageName:xp,x:Lr,y:mo+Wl,vertical:dc,scale:qn.scale,fontStack:qn.fontStack,sectionIndex:_o,metrics:ai,rect:U_}),Lr+=ai.advance*qn.scale+ut)}Rs.length!==0&&(co=Math.max(Lr-ut,co),Vst(Rs,0,Rs.length-1,pc,Pa)),Lr=0;let zu=Ut*na+Pa;La.lineOffset=Math.max(Pa,ts),mo+=zu,ta=Math.max(zu,ta),++Oa}var ra;let Ls=mo-YS,{horizontalAlign:Ps,verticalAlign:ks}=$F(dr);(function(gi,na,ts,La,Rs,Pa,zu,yl,qn){let _o=(na-ts)*Rs,Oo=0;Oo=Pa!==zu?-yl*La-YS:(-La*qn+.5)*zu;for(let Wl of gi)for(let ai of Wl.positionedGlyphs)ai.x+=_o,ai.y+=Oo})(rt.positionedLines,pc,Ps,ks,co,ta,Ut,Ls,Kt.length),rt.top+=-ks*Ls,rt.bottom=rt.top+Ls,rt.left+=-Ps*co,rt.right=rt.left+co}(He,l,f,m,pe,I,C,N,B,j,Y,te),!function(rt){for(let bt of rt)if(bt.positionedGlyphs.length!==0)return!1;return!0}(Ce)&&He}let N4={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Fst={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Ust={40:!0};function zse(c,l,f,m,_,S){if(l.imageName){let I=m[l.imageName];return I?I.displaySize[0]*l.scale*Ui/S+_:0}{let I=f[l.fontStack],C=I&&I[c];return C?C.metrics.advance*l.scale+_:0}}function Fse(c,l,f,m){let _=Math.pow(c-l,2);return m?c<l?_/2:2*_:_+Math.abs(f)*f}function Bst(c,l,f){let m=0;return c===10&&(m-=1e4),f&&(m+=150),c!==40&&c!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function Use(c,l,f,m,_,S){let I=null,C=Fse(l,f,_,S);for(let N of m){let j=Fse(l-N.x,f,_,S)+N.badness;j<=C&&(I=N,C=j)}return{index:c,x:l,priorBreak:I,badness:C}}function Bse(c){return c?Bse(c.priorBreak).concat(c.index):[]}function WF(c,l,f,m,_,S){if(!c)return[];let I=[],C=function(B,Y,K,te,oe,pe){let ve=0;for(let $e=0;$e<B.length();$e++){let Ce=B.getSection($e);ve+=zse(B.getCharCode($e),Ce,te,oe,Y,pe)}return ve/Math.max(1,Math.ceil(ve/K))}(c,l,f,m,_,S),N=c.text.indexOf("\u200B")>=0,j=0;for(let B=0;B<c.length();B++){let Y=c.getSection(B),K=c.getCharCode(B);if(N4[K]||(j+=zse(K,Y,m,_,l,S)),B<c.length()-1){let te=!((z=K)<11904)&&(!!xn["CJK Compatibility Forms"](z)||!!xn["CJK Compatibility"](z)||!!xn["CJK Strokes"](z)||!!xn["CJK Symbols and Punctuation"](z)||!!xn["Enclosed CJK Letters and Months"](z)||!!xn["Halfwidth and Fullwidth Forms"](z)||!!xn["Ideographic Description Characters"](z)||!!xn["Vertical Forms"](z)||h4.test(String.fromCodePoint(z)));(Fst[K]||te||Y.imageName||B!==c.length()-2&&Ust[c.getCharCode(B+1)])&&I.push(Use(B+1,j,C,I,Bst(K,c.getCharCode(B+1),te&&N),!1))}}var z;return Bse(Use(c.length(),j,C,I,0,!0))}function $F(c){let l=.5,f=.5;switch(c){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0;}switch(c){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;}return{horizontalAlign:l,verticalAlign:f}}function Vst(c,l,f,m,_){if(!m&&!_)return;let S=c[f],I=(c[f].x+S.metrics.advance*S.scale)*m;for(let C=l;C<=f;C++)c[C].x-=I,c[C].y+=_}function Gst(c,l,f){let{horizontalAlign:m,verticalAlign:_}=$F(f),S=l[0]-c.displaySize[0]*m,I=l[1]-c.displaySize[1]*_;return{image:c,top:I,bottom:I+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function Vse(c){var l,f;let m=c.left,_=c.top,S=c.right-m,I=c.bottom-_,C=(l=c.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",N=(f=c.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",j=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(N==="proportional"){if(C==="stretchOnly"&&S/I<j||C==="proportional"){let z=Math.ceil(I*j);m*=z/S,S=z}}else if(C==="proportional"&&N==="stretchOnly"&&j!==0&&S/I>j){let z=Math.ceil(S/j);_*=z/I,I=z}return{x1:m,y1:_,x2:m+S,y2:_+I}}function Gse(c,l,f,m,_,S){let I=c.image,C;if(I.content){let pe=I.content,ve=I.pixelRatio||1;C=[pe[0]/ve,pe[1]/ve,I.displaySize[0]-pe[2]/ve,I.displaySize[1]-pe[3]/ve]}let N=l.left*S,j=l.right*S,z,B,Y,K;f==="width"||f==="both"?(K=_[0]+N-m[3],B=_[0]+j+m[1]):(K=_[0]+(N+j-I.displaySize[0])/2,B=K+I.displaySize[0]);let te=l.top*S,oe=l.bottom*S;return f==="height"||f==="both"?(z=_[1]+te-m[0],Y=_[1]+oe+m[2]):(z=_[1]+(te+oe-I.displaySize[1])/2,Y=z+I.displaySize[1]),{image:I,top:z,right:B,bottom:Y,left:K,collisionPadding:C}}let KS=255,_p=128,Qm=KS*_p;function Hse(c,l){let{expression:f}=l;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Co(c+1))};if(f.kind==="source")return{kind:"source"};{let{zoomStops:m,interpolationType:_}=f,S=0;for(;S<m.length&&m[S]<=c;)S++;S=Math.max(0,S-1);let I=S;for(;I<m.length&&m[I]<c+1;)I++;I=Math.min(m.length-1,I);let C=m[S],N=m[I];return f.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:N,interpolationType:_}:{kind:"camera",minZoom:C,maxZoom:N,minSize:f.evaluate(new Co(C)),maxSize:f.evaluate(new Co(N)),interpolationType:_}}}function YF(c,l,f){let m="never",_=c.get(l);return _?m=_:c.get(f)&&(m="always"),m}let Hst=Xm.VectorTileFeature.types,Wst=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function O4(c,l,f,m,_,S,I,C,N,j,z,B,Y){let K=C?Math.min(Qm,Math.round(C[0])):0,te=C?Math.min(Qm,Math.round(C[1])):0;c.emplaceBack(l,f,Math.round(32*m),Math.round(32*_),S,I,(K<<1)+(N?1:0),te,16*j,16*z,256*B,256*Y)}function ZF(c,l,f){c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f)}function $st(c){for(let l of c.sections)if(EF(l.text))return!0;return!1}class KF{constructor(l){this.layoutVertexArray=new T_,this.indexArray=new Ru,this.programConfigurations=l,this.segments=new bn,this.dynamicLayoutVertexArray=new jS,this.opacityVertexArray=new Gl,this.hasVisibleVertices=!1,this.placedSymbolArray=new Ao}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,f,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Est.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,Sst.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,Wst,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}or("SymbolBuffers",KF);class XF{constructor(l,f,m){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new m,this.segments=new bn,this.collisionVertexArray=new vp}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Ist.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}or("CollisionBuffers",XF);class q_{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(I=>I.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=DF([]),this.placementViewportMatrix=DF([]);let f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Hse(this.zoom,f["text-size"]),this.iconSizeData=Hse(this.zoom,f["icon-size"]);let m=this.layers[0].layout,_=m.get("symbol-sort-key"),S=m.get("symbol-z-order");this.canOverlap=YF(m,"text-overlap","text-allow-overlap")!=="never"||YF(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(I=>o.ah[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=l.sourceID}createArrays(){this.text=new KF(new Ny(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new KF(new Ny(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new Do,this.lineVertexArray=new Ca,this.symbolInstances=new yn,this.textAnchorOffsets=new No}calculateGlyphDependencies(l,f,m,_,S){for(let I=0;I<l.length;I++)if(f[l.charCodeAt(I)]=!0,(m||_)&&S){let C=$S[l.charAt(I)];C&&(f[C.charCodeAt(0)]=!0)}}populate(l,f,m){let _=this.layers[0],S=_.layout,I=S.get("text-font"),C=S.get("text-field"),N=S.get("icon-image"),j=(C.value.kind!=="constant"||C.value.value instanceof fl&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),z=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,B=S.get("symbol-sort-key");if(this.features=[],!j&&!z)return;let Y=f.iconDependencies,K=f.glyphDependencies,te=f.availableImages,oe=new Co(this.zoom);for(let{feature:pe,id:ve,index:$e,sourceLayerIndex:Ce}of l){let He=_._featureFilter.needGeometry,rt=Ly(pe,He);if(!_._featureFilter.filter(oe,rt,m))continue;let bt,Qt;if(He||(rt.geometry=Oy(pe)),j){let Kt=_.getValueAndResolveTokens("text-field",rt,m,te),Ut=fl.factory(Kt),dr=this.hasRTLText=this.hasRTLText||$st(Ut);(!dr||ml.getRTLTextPluginStatus()==="unavailable"||dr&&ml.isParsed())&&(bt=Mst(Ut,_,rt))}if(z){let Kt=_.getValueAndResolveTokens("icon-image",rt,m,te);Qt=Kt instanceof dl?Kt:dl.fromString(Kt)}if(!bt&&!Qt)continue;let Ir=this.sortFeaturesByKey?B.evaluate(rt,{},m):void 0;if(this.features.push({id:ve,text:bt,icon:Qt,index:$e,sourceLayerIndex:Ce,geometry:rt.geometry,properties:pe.properties,type:Hst[pe.type],sortKey:Ir}),Qt&&(Y[Qt.name]=!0),bt){let Kt=I.evaluate(rt,{},m).join(","),Ut=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ah.vertical)>=0;for(let dr of bt.sections)if(dr.image)Y[dr.image.name]=!0;else{let sr=OS(bt.toString()),rr=dr.fontStack||Kt,ut=K[rr]=K[rr]||{};this.calculateGlyphDependencies(dr.text,ut,Ut,this.allowVerticalPlacement,sr)}}}S.get("symbol-placement")==="line"&&(this.features=function(pe){let ve={},$e={},Ce=[],He=0;function rt(Kt){Ce.push(pe[Kt]),He++}function bt(Kt,Ut,dr){let sr=$e[Kt];return delete $e[Kt],$e[Ut]=sr,Ce[sr].geometry[0].pop(),Ce[sr].geometry[0]=Ce[sr].geometry[0].concat(dr[0]),sr}function Qt(Kt,Ut,dr){let sr=ve[Ut];return delete ve[Ut],ve[Kt]=sr,Ce[sr].geometry[0].shift(),Ce[sr].geometry[0]=dr[0].concat(Ce[sr].geometry[0]),sr}function Ir(Kt,Ut,dr){let sr=dr?Ut[0][Ut[0].length-1]:Ut[0][0];return`${Kt}:${sr.x}:${sr.y}`}for(let Kt=0;Kt<pe.length;Kt++){let Ut=pe[Kt],dr=Ut.geometry,sr=Ut.text?Ut.text.toString():null;if(!sr){rt(Kt);continue}let rr=Ir(sr,dr),ut=Ir(sr,dr,!0);if(rr in $e&&ut in ve&&$e[rr]!==ve[ut]){let gr=Qt(rr,ut,dr),pr=bt(rr,ut,Ce[gr].geometry);delete ve[rr],delete $e[ut],$e[Ir(sr,Ce[pr].geometry,!0)]=pr,Ce[gr].geometry=null}else rr in $e?bt(rr,ut,dr):ut in ve?Qt(rr,ut,dr):(rt(Kt),ve[rr]=He-1,$e[ut]=He-1)}return Ce.filter(Kt=>Kt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((pe,ve)=>pe.sortKey-ve.sortKey)}update(l,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,f){let m=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(f[l.segment+1]),S=l.dist(f[l.segment]),I={};for(let C=l.segment+1;C<f.length;C++)I[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:_},C<f.length-1&&(_+=f[C+1].dist(f[C]));for(let C=l.segment||0;C>=0;C--)I[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:S},C>0&&(S+=f[C-1].dist(f[C]));for(let C=0;C<f.length;C++){let N=I[C];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,f,m,_,S,I,C,N,j,z,B,Y){let K=l.indexArray,te=l.layoutVertexArray,oe=l.segments.prepareSegment(4*f.length,te,K,this.canOverlap?I.sortKey:void 0),pe=this.glyphOffsetArray.length,ve=oe.vertexLength,$e=this.allowVerticalPlacement&&C===o.ah.vertical?Math.PI/2:0,Ce=I.text&&I.text.sections;for(let He=0;He<f.length;He++){let{tl:rt,tr:bt,bl:Qt,br:Ir,tex:Kt,pixelOffsetTL:Ut,pixelOffsetBR:dr,minFontScaleX:sr,minFontScaleY:rr,glyphOffset:ut,isSDF:gr,sectionIndex:pr}=f[He],Lr=oe.vertexLength,mo=ut[1];O4(te,N.x,N.y,rt.x,mo+rt.y,Kt.x,Kt.y,m,gr,Ut.x,Ut.y,sr,rr),O4(te,N.x,N.y,bt.x,mo+bt.y,Kt.x+Kt.w,Kt.y,m,gr,dr.x,Ut.y,sr,rr),O4(te,N.x,N.y,Qt.x,mo+Qt.y,Kt.x,Kt.y+Kt.h,m,gr,Ut.x,dr.y,sr,rr),O4(te,N.x,N.y,Ir.x,mo+Ir.y,Kt.x+Kt.w,Kt.y+Kt.h,m,gr,dr.x,dr.y,sr,rr),ZF(l.dynamicLayoutVertexArray,N,$e),K.emplaceBack(Lr,Lr+1,Lr+2),K.emplaceBack(Lr+1,Lr+2,Lr+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),He!==f.length-1&&pr===f[He+1].sectionIndex||l.programConfigurations.populatePaintArrays(te.length,I,I.index,{},Y,Ce&&Ce[pr])}l.placedSymbolArray.emplaceBack(N.x,N.y,pe,this.glyphOffsetArray.length-pe,ve,j,z,N.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],C,0,!1,0,B)}_addCollisionDebugVertex(l,f,m,_,S,I){return f.emplaceBack(0,0),l.emplaceBack(m.x,m.y,_,S,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(l,f,m,_,S,I,C){let N=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),j=N.vertexLength,z=S.layoutVertexArray,B=S.collisionVertexArray,Y=C.anchorX,K=C.anchorY;this._addCollisionDebugVertex(z,B,I,Y,K,new h(l,f)),this._addCollisionDebugVertex(z,B,I,Y,K,new h(m,f)),this._addCollisionDebugVertex(z,B,I,Y,K,new h(m,_)),this._addCollisionDebugVertex(z,B,I,Y,K,new h(l,_)),N.vertexLength+=4;let te=S.indexArray;te.emplaceBack(j,j+1),te.emplaceBack(j+1,j+2),te.emplaceBack(j+2,j+3),te.emplaceBack(j+3,j),N.primitiveLength+=4}addDebugCollisionBoxes(l,f,m,_){for(let S=l;S<f;S++){let I=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,_?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new XF(Hl,Cse.members,ma),this.iconCollisionBox=new XF(Hl,Cse.members,ma);for(let l=0;l<this.symbolInstances.length;l++){let f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(l,f,m,_,S,I,C,N,j){let z={};for(let B=f;B<m;B++){let Y=l.get(B);z.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.textFeatureIndex=Y.featureIndex;break}for(let B=_;B<S;B++){let Y=l.get(B);z.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalTextFeatureIndex=Y.featureIndex;break}for(let B=I;B<C;B++){let Y=l.get(B);z.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.iconFeatureIndex=Y.featureIndex;break}for(let B=N;B<j;B++){let Y=l.get(B);z.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalIconFeatureIndex=Y.featureIndex;break}return z}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){let m=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,f){let m=l.placedSymbolArray.get(f),_=m.vertexStartIndex+4*m.numGlyphs;for(let S=m.vertexStartIndex;S<_;S+=4)l.indexArray.emplaceBack(S,S+1,S+2),l.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let f=Math.sin(l),m=Math.cos(l),_=[],S=[],I=[];for(let C=0;C<this.symbolInstances.length;++C){I.push(C);let N=this.symbolInstances.get(C);_.push(0|Math.round(f*N.anchorX+m*N.anchorY)),S.push(N.featureIndex)}return I.sort((C,N)=>_[C]-_[N]||S[N]-S[C]),I}addToSortKeyRanges(l,f){let m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===f?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let f of this.symbolInstanceIndexes){let m=this.symbolInstances.get(f);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,S,I)=>{_>=0&&I.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Wse,$se;or("SymbolBucket",q_,{omit:["layers","collisionBoxArray","features","compareText"]}),q_.MAX_GLYPHS=65535,q_.addDynamicAttributes=ZF;var JF={get paint(){return $se=$se||new E({"icon-opacity":new Cr(Ae.paint_symbol["icon-opacity"]),"icon-color":new Cr(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Cr(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Cr(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Cr(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new cr(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new cr(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Cr(Ae.paint_symbol["text-opacity"]),"text-color":new Cr(Ae.paint_symbol["text-color"],{runtimeType:Qi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Cr(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Cr(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Cr(Ae.paint_symbol["text-halo-blur"]),"text-translate":new cr(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new cr(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return Wse=Wse||new E({"symbol-placement":new cr(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new cr(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cr(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Cr(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cr(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cr(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new cr(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new cr(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new cr(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cr(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Cr(Ae.layout_symbol["icon-size"]),"icon-text-fit":new cr(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cr(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Cr(Ae.layout_symbol["icon-image"]),"icon-rotate":new Cr(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Cr(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new cr(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Cr(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Cr(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cr(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cr(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cr(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Cr(Ae.layout_symbol["text-field"]),"text-font":new Cr(Ae.layout_symbol["text-font"]),"text-size":new Cr(Ae.layout_symbol["text-size"]),"text-max-width":new Cr(Ae.layout_symbol["text-max-width"]),"text-line-height":new cr(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Cr(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Cr(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Cr(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cr(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Cr(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Cr(Ae.layout_symbol["text-anchor"]),"text-max-angle":new cr(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new cr(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Cr(Ae.layout_symbol["text-rotate"]),"text-padding":new cr(Ae.layout_symbol["text-padding"]),"text-keep-upright":new cr(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Cr(Ae.layout_symbol["text-transform"]),"text-offset":new Cr(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new cr(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new cr(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new cr(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new cr(Ae.layout_symbol["text-optional"])})}};class Yse{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:da,this.defaultValue=l}evaluate(l){if(l.formattedSection){let f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}or("FormatSectionOverride",Yse,{omit:["defaultValue"]});class L4 extends d{constructor(l){super(l,JF)}recalculate(l,f){if(super.recalculate(l,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let m=this.layout.get("text-writing-mode");if(m){let _=[];for(let S of m)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,f,m,_){let S=this.layout.get(l).evaluate(f,{},m,_),I=this._unevaluatedLayout._values[l];return I.isDataDriven()||f_(I.value)||!S?S:function(C,N){return N.replace(/{([^{}]+)}/g,(j,z)=>C&&z in C?String(C[z]):"")}(f.properties,S)}createBucket(l){return new q_(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let l of JF.paint.overridableProperties){if(!L4.hasPaintOverride(this.layout,l))continue;let f=this.paint.get(l),m=new Yse(f),_=new c_(m,f.property.specification),S=null;S=f.value.kind==="constant"||f.value.kind==="source"?new km("source",_):new Rm("composite",_,f.value.zoomStops),this.paint._values[l]=new cc(f.property,S,f.parameters)}}_handleOverridablePaintPropertyUpdate(l,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&L4.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,f){let m=l.get("text-field"),_=JF.paint.properties[f],S=!1,I=C=>{for(let N of C)if(_.overrides&&_.overrides.hasOverride(N))return void(S=!0)};if(m.value.kind==="constant"&&m.value.value instanceof fl)I(m.value.value.sections);else if(m.value.kind==="source"){let C=j=>{S||(j instanceof Du&&Ni(j.value)===wt?I(j.value.sections):j instanceof t_?I(j.sections):j.eachChild(C))},N=m.value;N._styleExpression&&C(N._styleExpression.expression)}return S}}let Zse;var Yst={get paint(){return Zse=Zse||new E({"background-color":new cr(Ae.paint_background["background-color"]),"background-pattern":new S_(Ae.paint_background["background-pattern"]),"background-opacity":new cr(Ae.paint_background["background-opacity"])})}};class Zst extends d{constructor(l){super(l,Yst)}}let Kse;var Kst={get paint(){return Kse=Kse||new E({"raster-opacity":new cr(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new cr(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cr(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cr(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new cr(Ae.paint_raster["raster-saturation"]),"raster-contrast":new cr(Ae.paint_raster["raster-contrast"]),"raster-resampling":new cr(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new cr(Ae.paint_raster["raster-fade-duration"])})}};class Xst extends d{constructor(l){super(l,Kst)}}class Jst extends d{constructor(l){super(l,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Qst{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let QF=6371008.8;class eg{constructor(l,f){if(isNaN(l)||isNaN(f))throw new Error(`Invalid LngLat object: (${l}, ${f})`);if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new eg(H(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let f=Math.PI/180,m=this.lat*f,_=l.lat*f,S=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((l.lng-this.lng)*f);return QF*Math.acos(Math.min(S,1))}static convert(l){if(l instanceof eg)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new eg(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new eg(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let Xse=2*Math.PI*QF;function Jse(c){return Xse*Math.cos(c*Math.PI/180)}function Qse(c){return(180+c)/360}function ele(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function tle(c,l){return c/Jse(l)}function e9(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class XS{constructor(l,f,m=0){this.x=+l,this.y=+f,this.z=+m}static fromLngLat(l,f=0){let m=eg.convert(l);return new XS(Qse(m.lng),ele(m.lat),tle(f,m.lat))}toLngLat(){return new eg(360*this.x-180,e9(this.y))}toAltitude(){return this.z*Jse(e9(this.y))}meterInMercatorCoordinateUnits(){return 1/Xse*(l=e9(this.y),1/Math.cos(l*Math.PI/180));var l}}function rle(c,l,f){var m=2*Math.PI*6378137/256/Math.pow(2,f);return[c*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class t9{constructor(l,f,m){if(!function(_,S,I){return!(_<0||_>25||I<0||I>=Math.pow(2,_)||S<0||S>=Math.pow(2,_))}(l,f,m))throw new Error(`x=${f}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=f,this.y=m,this.key=JS(0,l,l,f,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,f,m){let _=(I=this.y,C=this.z,N=rle(256*(S=this.x),256*(I=Math.pow(2,C)-I-1),C),j=rle(256*(S+1),256*(I+1),C),N[0]+","+N[1]+","+j[0]+","+j[1]);var S,I,C,N,j;let z=function(B,Y,K){let te,oe="";for(let pe=B;pe>0;pe--)te=1<<pe-1,oe+=(Y&te?1:0)+(K&te?2:0);return oe}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){let f=this.z-l.z;return f>0&&l.x===this.x>>f&&l.y===this.y>>f}getTilePoint(l){let f=Math.pow(2,this.z);return new h((l.x*f-this.x)*Oi,(l.y*f-this.y)*Oi)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nle{constructor(l,f){this.wrap=l,this.canonical=f,this.key=JS(l,f.z,f.z,f.x,f.y)}}class qu{constructor(l,f,m,_,S){if(l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=f,this.canonical=new t9(m,+_,+S),this.key=JS(f,l,m,_,S)}clone(){return new qu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let f=this.canonical.z-l;return l>this.canonical.z?new qu(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qu(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(l,f){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let m=this.canonical.z-l;return l>this.canonical.z?JS(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):JS(this.wrap*+f,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f}children(l){if(this.overscaledZ>=l)return[new qu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let f=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new qu(f,this.wrap,f,m,_),new qu(f,this.wrap,f,m+1,_),new qu(f,this.wrap,f,m,_+1),new qu(f,this.wrap,f,m+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new qu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new qu(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nle(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new XS(l.x-this.wrap,l.y))}}function JS(c,l,f,m,_){(c*=2)<0&&(c=-1*c-1);let S=1<<f;return(S*S*c+S*_+m).toString(36)+f.toString(36)+l.toString(36)}or("CanonicalTileID",t9),or("OverscaledTileID",qu,{omit:["posMatrix"]});class ole{constructor(l,f,m,_=1,S=1,I=1,C=0){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void ke(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;let N=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=I,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let j=0;j<N;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(N,j)]=this.data[this._idx(N-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,N)]=this.data[this._idx(j,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<N;j++)for(let z=0;z<N;z++){let B=this.get(j,z);B>this.max&&(this.max=B),B<this.min&&(this.min=B)}}get(l,f){let m=new Uint8Array(this.data.buffer),_=4*this._idx(l,f);return this.unpack(m[_],m[_+1],m[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)}unpack(l,f,m){return l*this.redFactor+f*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new ju({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,f,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=f*this.dim,S=f*this.dim+this.dim,I=m*this.dim,C=m*this.dim+this.dim;switch(f){case-1:_=S-1;break;case 1:S=_+1;}switch(m){case-1:I=C-1;break;case 1:C=I+1;}let N=-f*this.dim,j=-m*this.dim;for(let z=I;z<C;z++)for(let B=_;B<S;B++)this.data[this._idx(B,z)]=l.data[this._idx(B+N,z+j)]}}or("DEMData",ole);class ile{constructor(l){this._stringToNumber={},this._numberToString=[];for(let f=0;f<l.length;f++){let m=l[f];this._stringToNumber[m]=f,this._numberToString[f]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class ale{constructor(l,f,m,_,S){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=m,l._y=_,this.properties=l.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l}}class sle{constructor(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Fm(Oi,16,0),this.grid3D=new Fm(Oi,16,0),this.featureIndexArray=new Qa,this.promoteId=f}insert(l,f,m,_,S,I){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,S);let N=I?this.grid3D:this.grid;for(let j=0;j<f.length;j++){let z=f[j],B=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<z.length;Y++){let K=z[Y];B[0]=Math.min(B[0],K.x),B[1]=Math.min(B[1],K.y),B[2]=Math.max(B[2],K.x),B[3]=Math.max(B[3],K.y)}B[0]<Oi&&B[1]<Oi&&B[2]>=0&&B[3]>=0&&N.insert(C,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Xm.VectorTile(new VF(this.rawTileData)).layers,this.sourceLayerCoder=new ile(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,f,m,_){this.loadVTLayers();let S=l.params||{},I=Oi/l.tileSize/l.scale,C=vS(S.filter),N=l.queryGeometry,j=l.queryPadding*I,z=ule(N),B=this.grid.query(z.minX-j,z.minY-j,z.maxX+j,z.maxY+j),Y=ule(l.cameraQueryGeometry),K=this.grid3D.query(Y.minX-j,Y.minY-j,Y.maxX+j,Y.maxY+j,(pe,ve,$e,Ce)=>function(He,rt,bt,Qt,Ir){for(let Ut of He)if(rt<=Ut.x&&bt<=Ut.y&&Qt>=Ut.x&&Ir>=Ut.y)return!0;let Kt=[new h(rt,bt),new h(rt,Ir),new h(Qt,Ir),new h(Qt,bt)];if(He.length>2){for(let Ut of Kt)if(N_(He,Ut))return!0}for(let Ut=0;Ut<He.length-1;Ut++)if(Lat(He[Ut],He[Ut+1],Kt))return!0;return!1}(l.cameraQueryGeometry,pe-j,ve-j,$e+j,Ce+j));for(let pe of K)B.push(pe);B.sort(elt);let te={},oe;for(let pe=0;pe<B.length;pe++){let ve=B[pe];if(ve===oe)continue;oe=ve;let $e=this.featureIndexArray.get(ve),Ce=null;this.loadMatchingFeature(te,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,C,S.layers,S.availableImages,f,m,_,(He,rt,bt)=>(Ce||(Ce=Oy(He)),rt.queryIntersectsFeature(N,He,bt,Ce,this.z,l.transform,I,l.pixelPosMatrix)))}return te}loadMatchingFeature(l,f,m,_,S,I,C,N,j,z,B){let Y=this.bucketLayerIDs[f];if(I&&!function(pe,ve){for(let $e=0;$e<pe.length;$e++)if(ve.indexOf(pe[$e])>=0)return!0;return!1}(I,Y))return;let K=this.sourceLayerCoder.decode(m),te=this.vtLayers[K].feature(_);if(S.needGeometry){let pe=Ly(te,!0);if(!S.filter(new Co(this.tileID.overscaledZ),pe,this.tileID.canonical))return}else if(!S.filter(new Co(this.tileID.overscaledZ),te))return;let oe=this.getId(te,K);for(let pe=0;pe<Y.length;pe++){let ve=Y[pe];if(I&&I.indexOf(ve)<0)continue;let $e=N[ve];if(!$e)continue;let Ce={};oe&&z&&(Ce=z.getState($e.sourceLayer||"_geojsonTileLayer",oe));let He=X({},j[ve]);He.paint=lle(He.paint,$e.paint,te,Ce,C),He.layout=lle(He.layout,$e.layout,te,Ce,C);let rt=!B||B(te,$e,Ce);if(!rt)continue;let bt=new ale(te,this.z,this.x,this.y,oe);bt.layer=He;let Qt=l[ve];Qt===void 0&&(Qt=l[ve]=[]),Qt.push({featureIndex:_,feature:bt,intersectionZ:rt})}}lookupSymbolFeatures(l,f,m,_,S,I,C,N){let j={};this.loadVTLayers();let z=vS(S);for(let B of l)this.loadMatchingFeature(j,m,_,B,z,I,C,N,f);return j}hasLayer(l){for(let f of this.bucketLayerIDs)for(let m of f)if(l===m)return!0;return!1}getId(l,f){let m=l.id;return this.promoteId&&(m=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof m=="boolean"&&(m=Number(m))),m}}function lle(c,l,f,m,_){return ne(c,(S,I)=>{let C=l instanceof Cy?l.get(I):null;return C&&C.evaluate?C.evaluate(f,m,_):C})}function ule(c){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let S of c)l=Math.min(l,S.x),f=Math.min(f,S.y),m=Math.max(m,S.x),_=Math.max(_,S.y);return{minX:l,minY:f,maxX:m,maxY:_}}function elt(c,l){return l-c}function cle(c,l,f,m,_){let S=[];for(let I=0;I<c.length;I++){let C=c[I],N;for(let j=0;j<C.length-1;j++){let z=C[j],B=C[j+1];z.x<l&&B.x<l||(z.x<l?z=new h(l,z.y+(l-z.x)/(B.x-z.x)*(B.y-z.y))._round():B.x<l&&(B=new h(l,z.y+(l-z.x)/(B.x-z.x)*(B.y-z.y))._round()),z.y<f&&B.y<f||(z.y<f?z=new h(z.x+(f-z.y)/(B.y-z.y)*(B.x-z.x),f)._round():B.y<f&&(B=new h(z.x+(f-z.y)/(B.y-z.y)*(B.x-z.x),f)._round()),z.x>=m&&B.x>=m||(z.x>=m?z=new h(m,z.y+(m-z.x)/(B.x-z.x)*(B.y-z.y))._round():B.x>=m&&(B=new h(m,z.y+(m-z.x)/(B.x-z.x)*(B.y-z.y))._round()),z.y>=_&&B.y>=_||(z.y>=_?z=new h(z.x+(_-z.y)/(B.y-z.y)*(B.x-z.x),_)._round():B.y>=_&&(B=new h(z.x+(_-z.y)/(B.y-z.y)*(B.x-z.x),_)._round()),N&&z.equals(N[N.length-1])||(N=[z],S.push(N)),N.push(B)))))}}return S}or("FeatureIndex",sle,{omit:["rawTileData","sourceLayerCoder"]});class tg extends h{constructor(l,f,m,_){super(l,f),this.angle=m,_!==void 0&&(this.segment=_)}clone(){return new tg(this.x,this.y,this.angle,this.segment)}}function fle(c,l,f,m,_){if(l.segment===void 0||f===0)return!0;let S=l,I=l.segment+1,C=0;for(;C>-f/2;){if(I--,I<0)return!1;C-=c[I].dist(S),S=c[I]}C+=c[I].dist(c[I+1]),I++;let N=[],j=0;for(;C<f/2;){let z=c[I],B=c[I+1];if(!B)return!1;let Y=c[I-1].angleTo(z)-z.angleTo(B);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:C,angleDelta:Y}),j+=Y;C-N[0].distance>m;)j-=N.shift().angleDelta;if(j>_)return!1;I++,C+=z.dist(B)}return!0}function ple(c){let l=0;for(let f=0;f<c.length-1;f++)l+=c[f].dist(c[f+1]);return l}function dle(c,l,f){return c?.6*l*f:0}function hle(c,l){return Math.max(c?c.right-c.left:0,l?l.right-l.left:0)}function tlt(c,l,f,m,_,S){let I=dle(f,_,S),C=hle(f,m)*S,N=0,j=ple(c)/2;for(let z=0;z<c.length-1;z++){let B=c[z],Y=c[z+1],K=B.dist(Y);if(N+K>j){let te=(j-N)/K,oe=As.number(B.x,Y.x,te),pe=As.number(B.y,Y.y,te),ve=new tg(oe,pe,Y.angleTo(B),z);return ve._round(),!I||fle(c,ve,C,I,l)?ve:void 0}N+=K}}function rlt(c,l,f,m,_,S,I,C,N){let j=dle(m,S,I),z=hle(m,_),B=z*I,Y=c[0].x===0||c[0].x===N||c[0].y===0||c[0].y===N;return l-B<l/4&&(l=B+l/4),mle(c,Y?l/2*C%l:(z/2+2*S)*I*C%l,l,j,f,B,Y,!1,N)}function mle(c,l,f,m,_,S,I,C,N){let j=S/2,z=ple(c),B=0,Y=l-f,K=[];for(let te=0;te<c.length-1;te++){let oe=c[te],pe=c[te+1],ve=oe.dist(pe),$e=pe.angleTo(oe);for(;Y+f<B+ve;){Y+=f;let Ce=(Y-B)/ve,He=As.number(oe.x,pe.x,Ce),rt=As.number(oe.y,pe.y,Ce);if(He>=0&&He<N&&rt>=0&&rt<N&&Y-j>=0&&Y+j<=z){let bt=new tg(He,rt,$e,te);bt._round(),m&&!fle(c,bt,S,m,_)||K.push(bt)}}B+=ve}return C||K.length||I||(K=mle(c,B/2,f,m,_,S,I,!0,N)),K}or("Anchor",tg);let z_=vl;function gle(c,l,f,m){let _=[],S=c.image,I=S.pixelRatio,C=S.paddedRect.w-2*z_,N=S.paddedRect.h-2*z_,j={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom},z=S.stretchX||[[0,C]],B=S.stretchY||[[0,N]],Y=(ut,gr)=>ut+gr[1]-gr[0],K=z.reduce(Y,0),te=B.reduce(Y,0),oe=C-K,pe=N-te,ve=0,$e=K,Ce=0,He=te,rt=0,bt=oe,Qt=0,Ir=pe;if(S.content&&m){let ut=S.content,gr=ut[2]-ut[0],pr=ut[3]-ut[1];(S.textFitWidth||S.textFitHeight)&&(j=Vse(c)),ve=P4(z,0,ut[0]),Ce=P4(B,0,ut[1]),$e=P4(z,ut[0],ut[2]),He=P4(B,ut[1],ut[3]),rt=ut[0]-ve,Qt=ut[1]-Ce,bt=gr-$e,Ir=pr-He}let Kt=j.x1,Ut=j.y1,dr=j.x2-Kt,sr=j.y2-Ut,rr=(ut,gr,pr,Lr)=>{let mo=k4(ut.stretch-ve,$e,dr,Kt),co=R4(ut.fixed-rt,bt,ut.stretch,K),ta=k4(gr.stretch-Ce,He,sr,Ut),pc=R4(gr.fixed-Qt,Ir,gr.stretch,te),Oa=k4(pr.stretch-ve,$e,dr,Kt),ra=R4(pr.fixed-rt,bt,pr.stretch,K),Ls=k4(Lr.stretch-Ce,He,sr,Ut),Ps=R4(Lr.fixed-Qt,Ir,Lr.stretch,te),ks=new h(mo,ta),gi=new h(Oa,ta),na=new h(Oa,Ls),ts=new h(mo,Ls),La=new h(co/I,pc/I),Rs=new h(ra/I,Ps/I),Pa=l*Math.PI/180;if(Pa){let qn=Math.sin(Pa),_o=Math.cos(Pa),Oo=[_o,-qn,qn,_o];ks._matMult(Oo),gi._matMult(Oo),ts._matMult(Oo),na._matMult(Oo)}let zu=ut.stretch+ut.fixed,yl=gr.stretch+gr.fixed;return{tl:ks,tr:gi,bl:ts,br:na,tex:{x:S.paddedRect.x+z_+zu,y:S.paddedRect.y+z_+yl,w:pr.stretch+pr.fixed-zu,h:Lr.stretch+Lr.fixed-yl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:La,pixelOffsetBR:Rs,minFontScaleX:bt/I/dr,minFontScaleY:Ir/I/sr,isSDF:f}};if(m&&(S.stretchX||S.stretchY)){let ut=vle(z,oe,K),gr=vle(B,pe,te);for(let pr=0;pr<ut.length-1;pr++){let Lr=ut[pr],mo=ut[pr+1];for(let co=0;co<gr.length-1;co++)_.push(rr(Lr,gr[co],mo,gr[co+1]))}}else _.push(rr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:N+1}));return _}function P4(c,l,f){let m=0;for(let _ of c)m+=Math.max(l,Math.min(f,_[1]))-Math.max(l,Math.min(f,_[0]));return m}function vle(c,l,f){let m=[{fixed:-z_,stretch:0}];for(let[_,S]of c){let I=m[m.length-1];m.push({fixed:_-I.stretch,stretch:I.stretch}),m.push({fixed:_-I.stretch,stretch:I.stretch+(S-_)})}return m.push({fixed:l+z_,stretch:f}),m}function k4(c,l,f,m){return c/l*f+m}function R4(c,l,f,m){return c-l*f/m}class j4{constructor(l,f,m,_,S,I,C,N,j,z){var B;if(this.boxStartIndex=l.length,j){let Y=I.top,K=I.bottom,te=I.collisionPadding;te&&(Y-=te[1],K+=te[3]);let oe=K-Y;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{let Y=!((B=I.image)===null||B===void 0)&&B.content&&(I.image.textFitWidth||I.image.textFitHeight)?Vse(I):{x1:I.left,y1:I.top,x2:I.right,y2:I.bottom};Y.y1=Y.y1*C-N[0],Y.y2=Y.y2*C+N[2],Y.x1=Y.x1*C-N[3],Y.x2=Y.x2*C+N[1];let K=I.collisionPadding;if(K&&(Y.x1-=K[0]*C,Y.y1-=K[1]*C,Y.x2+=K[2]*C,Y.y2+=K[3]*C),z){let te=new h(Y.x1,Y.y1),oe=new h(Y.x2,Y.y1),pe=new h(Y.x1,Y.y2),ve=new h(Y.x2,Y.y2),$e=z*Math.PI/180;te._rotate($e),oe._rotate($e),pe._rotate($e),ve._rotate($e),Y.x1=Math.min(te.x,oe.x,pe.x,ve.x),Y.x2=Math.max(te.x,oe.x,pe.x,ve.x),Y.y1=Math.min(te.y,oe.y,pe.y,ve.y),Y.y2=Math.max(te.y,oe.y,pe.y,ve.y)}l.emplaceBack(f.x,f.y,Y.x1,Y.y1,Y.x2,Y.y2,m,_,S)}this.boxEndIndex=l.length}}class nlt{constructor(l=[],f=(m,_)=>m<_?-1:m>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:f,compare:m}=this,_=f[l];for(;l>0;){let S=l-1>>1,I=f[S];if(m(_,I)>=0)break;f[l]=I,l=S}f[l]=_}_down(l){let{data:f,compare:m}=this,_=this.length>>1,S=f[l];for(;l<_;){let I=1+(l<<1),C=I+1;if(C<this.length&&m(f[C],f[I])<0&&(I=C),m(f[I],S)>=0)break;f[l]=f[I],l=I}f[l]=S}}function olt(c,l=1,f=!1){let m=1/0,_=1/0,S=-1/0,I=-1/0,C=c[0];for(let K=0;K<C.length;K++){let te=C[K];(!K||te.x<m)&&(m=te.x),(!K||te.y<_)&&(_=te.y),(!K||te.x>S)&&(S=te.x),(!K||te.y>I)&&(I=te.y)}let N=Math.min(S-m,I-_),j=N/2,z=new nlt([],ilt);if(N===0)return new h(m,_);for(let K=m;K<S;K+=N)for(let te=_;te<I;te+=N)z.push(new F_(K+j,te+j,j,c));let B=function(K){let te=0,oe=0,pe=0,ve=K[0];for(let $e=0,Ce=ve.length,He=Ce-1;$e<Ce;He=$e++){let rt=ve[$e],bt=ve[He],Qt=rt.x*bt.y-bt.x*rt.y;oe+=(rt.x+bt.x)*Qt,pe+=(rt.y+bt.y)*Qt,te+=3*Qt}return new F_(oe/te,pe/te,0,K)}(c),Y=z.length;for(;z.length;){let K=z.pop();(K.d>B.d||!B.d)&&(B=K,f&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,Y)),K.max-B.d<=l||(j=K.h/2,z.push(new F_(K.p.x-j,K.p.y-j,j,c)),z.push(new F_(K.p.x+j,K.p.y-j,j,c)),z.push(new F_(K.p.x-j,K.p.y+j,j,c)),z.push(new F_(K.p.x+j,K.p.y+j,j,c)),Y+=4)}return f&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${B.d}`)),B.p}function ilt(c,l){return l.max-c.max}function F_(c,l,f,m){this.p=new h(c,l),this.h=f,this.d=function(_,S){let I=!1,C=1/0;for(let N=0;N<S.length;N++){let j=S[N];for(let z=0,B=j.length,Y=B-1;z<B;Y=z++){let K=j[z],te=j[Y];K.y>_.y!=te.y>_.y&&_.x<(te.x-K.x)*(_.y-K.y)/(te.y-K.y)+K.x&&(I=!I),C=Math.min(C,ese(_,K,te))}}return(I?1:-1)*Math.sqrt(C)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Na;o.aq=void 0,(Na=o.aq||(o.aq={}))[Na.center=1]="center",Na[Na.left=2]="left",Na[Na.right=3]="right",Na[Na.top=4]="top",Na[Na.bottom=5]="bottom",Na[Na["top-left"]=6]="top-left",Na[Na["top-right"]=7]="top-right",Na[Na["bottom-left"]=8]="bottom-left",Na[Na["bottom-right"]=9]="bottom-right";let rg=7,r9=Number.POSITIVE_INFINITY;function yle(c,l){return l[1]!==r9?function(f,m,_){let S=0,I=0;switch(m=Math.abs(m),_=Math.abs(_),f){case"top-right":case"top-left":case"top":I=_-rg;break;case"bottom-right":case"bottom-left":case"bottom":I=-_+rg;}switch(f){case"top-right":case"bottom-right":case"right":S=-m;break;case"top-left":case"bottom-left":case"left":S=m;}return[S,I]}(c,l[0],l[1]):function(f,m){let _=0,S=0;m<0&&(m=0);let I=m/Math.SQRT2;switch(f){case"top-right":case"top-left":S=I-rg;break;case"bottom-right":case"bottom-left":S=-I+rg;break;case"bottom":S=-m+rg;break;case"top":S=m-rg;}switch(f){case"top-right":case"bottom-right":_=-I;break;case"top-left":case"bottom-left":_=I;break;case"left":_=m;break;case"right":_=-m;}return[_,S]}(c,l[0])}function _le(c,l,f){var m;let _=c.layout,S=(m=_.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},f);if(S){let C=S.values,N=[];for(let j=0;j<C.length;j+=2){let z=N[j]=C[j],B=C[j+1].map(Y=>Y*Ui);z.startsWith("top")?B[1]-=rg:z.startsWith("bottom")&&(B[1]+=rg),N[j+1]=B}return new zl(N)}let I=_.get("text-variable-anchor");if(I){let C;C=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},f)*Ui,r9]:_.get("text-offset").evaluate(l,{},f).map(j=>j*Ui);let N=[];for(let j of I)N.push(j,yle(j,C));return new zl(N)}return null}function n9(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function alt(c,l,f,m,_,S,I,C,N,j,z){let B=S.textMaxSize.evaluate(l,{});B===void 0&&(B=I);let Y=c.layers[0].layout,K=Y.get("icon-offset").evaluate(l,{},z),te=ble(f.horizontal),oe=I/24,pe=c.tilePixelRatio*oe,ve=c.tilePixelRatio*B/24,$e=c.tilePixelRatio*C,Ce=c.tilePixelRatio*Y.get("symbol-spacing"),He=Y.get("text-padding")*c.tilePixelRatio,rt=function(ut,gr,pr,Lr=1){let mo=ut.get("icon-padding").evaluate(gr,{},pr),co=mo&&mo.values;return[co[0]*Lr,co[1]*Lr,co[2]*Lr,co[3]*Lr]}(Y,l,z,c.tilePixelRatio),bt=Y.get("text-max-angle")/180*Math.PI,Qt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Ir=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Kt=Y.get("symbol-placement"),Ut=Ce/2,dr=Y.get("icon-text-fit"),sr;m&&dr!=="none"&&(c.allowVerticalPlacement&&f.vertical&&(sr=Gse(m,f.vertical,dr,Y.get("icon-text-fit-padding"),K,oe)),te&&(m=Gse(m,te,dr,Y.get("icon-text-fit-padding"),K,oe)));let rr=(ut,gr)=>{gr.x<0||gr.x>=Oi||gr.y<0||gr.y>=Oi||function(pr,Lr,mo,co,ta,pc,Oa,ra,Ls,Ps,ks,gi,na,ts,La,Rs,Pa,zu,yl,qn,_o,Oo,Wl,ai,U_){let xp=pr.addToLineVertexArray(Lr,mo),bp,dc,Fu,ga,nh=0,t2=0,Ile=0,Tle=0,f9=-1,p9=-1,oh={},Mle=M_("");if(pr.allowVerticalPlacement&&co.vertical){let rs=ra.layout.get("text-rotate").evaluate(_o,{},ai)+90;Fu=new j4(Ls,Lr,Ps,ks,gi,co.vertical,na,ts,La,rs),Oa&&(ga=new j4(Ls,Lr,Ps,ks,gi,Oa,Pa,zu,La,rs))}if(ta){let rs=ra.layout.get("icon-rotate").evaluate(_o,{}),Uu=ra.layout.get("icon-text-fit")!=="none",ky=gle(ta,rs,Wl,Uu),Ef=Oa?gle(Oa,rs,Wl,Uu):void 0;dc=new j4(Ls,Lr,Ps,ks,gi,ta,Pa,zu,!1,rs),nh=4*ky.length;let Ry=pr.iconSizeData,wp=null;Ry.kind==="source"?(wp=[_p*ra.layout.get("icon-size").evaluate(_o,{})],wp[0]>Qm&&ke(`${pr.layerIds[0]}: Value for "icon-size" is >= ${KS}. Reduce your "icon-size".`)):Ry.kind==="composite"&&(wp=[_p*Oo.compositeIconSizes[0].evaluate(_o,{},ai),_p*Oo.compositeIconSizes[1].evaluate(_o,{},ai)],(wp[0]>Qm||wp[1]>Qm)&&ke(`${pr.layerIds[0]}: Value for "icon-size" is >= ${KS}. Reduce your "icon-size".`)),pr.addSymbols(pr.icon,ky,wp,qn,yl,_o,o.ah.none,Lr,xp.lineStartIndex,xp.lineLength,-1,ai),f9=pr.icon.placedSymbolArray.length-1,Ef&&(t2=4*Ef.length,pr.addSymbols(pr.icon,Ef,wp,qn,yl,_o,o.ah.vertical,Lr,xp.lineStartIndex,xp.lineLength,-1,ai),p9=pr.icon.placedSymbolArray.length-1)}let Cle=Object.keys(co.horizontal);for(let rs of Cle){let Uu=co.horizontal[rs];if(!bp){Mle=M_(Uu.text);let Ef=ra.layout.get("text-rotate").evaluate(_o,{},ai);bp=new j4(Ls,Lr,Ps,ks,gi,Uu,na,ts,La,Ef)}let ky=Uu.positionedLines.length===1;if(Ile+=xle(pr,Lr,Uu,pc,ra,La,_o,Rs,xp,co.vertical?o.ah.horizontal:o.ah.horizontalOnly,ky?Cle:[rs],oh,f9,Oo,ai),ky)break}co.vertical&&(Tle+=xle(pr,Lr,co.vertical,pc,ra,La,_o,Rs,xp,o.ah.vertical,["vertical"],oh,p9,Oo,ai));let ult=bp?bp.boxStartIndex:pr.collisionBoxArray.length,clt=bp?bp.boxEndIndex:pr.collisionBoxArray.length,flt=Fu?Fu.boxStartIndex:pr.collisionBoxArray.length,plt=Fu?Fu.boxEndIndex:pr.collisionBoxArray.length,dlt=dc?dc.boxStartIndex:pr.collisionBoxArray.length,hlt=dc?dc.boxEndIndex:pr.collisionBoxArray.length,mlt=ga?ga.boxStartIndex:pr.collisionBoxArray.length,glt=ga?ga.boxEndIndex:pr.collisionBoxArray.length,wf=-1,z4=(rs,Uu)=>rs&&rs.circleDiameter?Math.max(rs.circleDiameter,Uu):Uu;wf=z4(bp,wf),wf=z4(Fu,wf),wf=z4(dc,wf),wf=z4(ga,wf);let Ale=wf>-1?1:0;Ale&&(wf*=U_/Ui),pr.glyphOffsetArray.length>=q_.MAX_GLYPHS&&ke("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_o.sortKey!==void 0&&pr.addToSortKeyRanges(pr.symbolInstances.length,_o.sortKey);let vlt=_le(ra,_o,ai),[ylt,_lt]=function(rs,Uu){let ky=rs.length,Ef=Uu==null?void 0:Uu.values;if((Ef==null?void 0:Ef.length)>0)for(let Ry=0;Ry<Ef.length;Ry+=2){let wp=Ef[Ry+1];rs.emplaceBack(o.aq[Ef[Ry]],wp[0],wp[1])}return[ky,rs.length]}(pr.textAnchorOffsets,vlt);pr.symbolInstances.emplaceBack(Lr.x,Lr.y,oh.right>=0?oh.right:-1,oh.center>=0?oh.center:-1,oh.left>=0?oh.left:-1,oh.vertical||-1,f9,p9,Mle,ult,clt,flt,plt,dlt,hlt,mlt,glt,Ps,Ile,Tle,nh,t2,Ale,0,na,wf,ylt,_lt)}(c,gr,ut,f,m,_,sr,c.layers[0],c.collisionBoxArray,l.index,l.sourceLayerIndex,c.index,pe,[He,He,He,He],Qt,N,$e,rt,Ir,K,l,S,j,z,I)};if(Kt==="line")for(let ut of cle(l.geometry,0,0,Oi,Oi)){let gr=rlt(ut,Ce,bt,f.vertical||te,m,24,ve,c.overscaling,Oi);for(let pr of gr)te&&slt(c,te.text,Ut,pr)||rr(ut,pr)}else if(Kt==="line-center"){for(let ut of l.geometry)if(ut.length>1){let gr=tlt(ut,bt,f.vertical||te,m,24,ve);gr&&rr(ut,gr)}}else if(l.type==="Polygon")for(let ut of n_(l.geometry,0)){let gr=olt(ut,16);rr(ut[0],new tg(gr.x,gr.y,0))}else if(l.type==="LineString")for(let ut of l.geometry)rr(ut,new tg(ut[0].x,ut[0].y,0));else if(l.type==="Point")for(let ut of l.geometry)for(let gr of ut)rr([gr],new tg(gr.x,gr.y,0))}function xle(c,l,f,m,_,S,I,C,N,j,z,B,Y,K,te){let oe=function($e,Ce,He,rt,bt,Qt,Ir,Kt){let Ut=rt.layout.get("text-rotate").evaluate(Qt,{})*Math.PI/180,dr=[];for(let sr of Ce.positionedLines)for(let rr of sr.positionedGlyphs){if(!rr.rect)continue;let ut=rr.rect||{},gr=Rse+1,pr=!0,Lr=1,mo=0,co=(bt||Kt)&&rr.vertical,ta=rr.metrics.advance*rr.scale/2;if(Kt&&Ce.verticalizable&&(mo=sr.lineOffset/2-(rr.imageName?-(Ui-rr.metrics.width*rr.scale)/2:(rr.scale-1)*Ui)),rr.imageName){let qn=Ir[rr.imageName];pr=qn.sdf,Lr=qn.pixelRatio,gr=vl/Lr}let pc=bt?[rr.x+ta,rr.y]:[0,0],Oa=bt?[0,0]:[rr.x+ta+He[0],rr.y+He[1]-mo],ra=[0,0];co&&(ra=Oa,Oa=[0,0]);let Ls=rr.metrics.isDoubleResolution?2:1,Ps=(rr.metrics.left-gr)*rr.scale-ta+Oa[0],ks=(-rr.metrics.top-gr)*rr.scale+Oa[1],gi=Ps+ut.w/Ls*rr.scale/Lr,na=ks+ut.h/Ls*rr.scale/Lr,ts=new h(Ps,ks),La=new h(gi,ks),Rs=new h(Ps,na),Pa=new h(gi,na);if(co){let qn=new h(-ta,ta-YS),_o=-Math.PI/2,Oo=Ui/2-ta,Wl=new h(5-YS-Oo,-(rr.imageName?Oo:0)),ai=new h(...ra);ts._rotateAround(_o,qn)._add(Wl)._add(ai),La._rotateAround(_o,qn)._add(Wl)._add(ai),Rs._rotateAround(_o,qn)._add(Wl)._add(ai),Pa._rotateAround(_o,qn)._add(Wl)._add(ai)}if(Ut){let qn=Math.sin(Ut),_o=Math.cos(Ut),Oo=[_o,-qn,qn,_o];ts._matMult(Oo),La._matMult(Oo),Rs._matMult(Oo),Pa._matMult(Oo)}let zu=new h(0,0),yl=new h(0,0);dr.push({tl:ts,tr:La,bl:Rs,br:Pa,tex:ut,writingMode:Ce.writingMode,glyphOffset:pc,sectionIndex:rr.sectionIndex,isSDF:pr,pixelOffsetTL:zu,pixelOffsetBR:yl,minFontScaleX:0,minFontScaleY:0})}return dr}(0,f,C,_,S,I,m,c.allowVerticalPlacement),pe=c.textSizeData,ve=null;pe.kind==="source"?(ve=[_p*_.layout.get("text-size").evaluate(I,{})],ve[0]>Qm&&ke(`${c.layerIds[0]}: Value for "text-size" is >= ${KS}. Reduce your "text-size".`)):pe.kind==="composite"&&(ve=[_p*K.compositeTextSizes[0].evaluate(I,{},te),_p*K.compositeTextSizes[1].evaluate(I,{},te)],(ve[0]>Qm||ve[1]>Qm)&&ke(`${c.layerIds[0]}: Value for "text-size" is >= ${KS}. Reduce your "text-size".`)),c.addSymbols(c.text,oe,ve,C,S,I,j,l,N.lineStartIndex,N.lineLength,Y,te);for(let $e of z)B[$e]=c.text.placedSymbolArray.length-1;return 4*oe.length}function ble(c){for(let l in c)return c[l];return null}function slt(c,l,f,m){let _=c.compareText;if(l in _){let S=_[l];for(let I=S.length-1;I>=0;I--)if(m.dist(S[I])<f)return!0}else _[l]=[];return _[l].push(m),!1}let wle=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class o9{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[f,m]=new Uint8Array(l,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");let _=m>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);let S=wle[15&m];if(!S)throw new Error("Unrecognized array type.");let[I]=new Uint16Array(l,2,1),[C]=new Uint32Array(l,4,1);return new o9(C,I,S,l)}constructor(l,f=64,m=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let S=wle.indexOf(this.ArrayType),I=2*l*this.ArrayType.BYTES_PER_ELEMENT,C=l*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-C%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${m}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+N,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+I+C+N),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+N,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=l)}add(l,f){let m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=f,m}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return i9(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,f,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:S,coords:I,nodeSize:C}=this,N=[0,S.length-1,0],j=[];for(;N.length;){let z=N.pop()||0,B=N.pop()||0,Y=N.pop()||0;if(B-Y<=C){for(let pe=Y;pe<=B;pe++){let ve=I[2*pe],$e=I[2*pe+1];ve>=l&&ve<=m&&$e>=f&&$e<=_&&j.push(S[pe])}continue}let K=Y+B>>1,te=I[2*K],oe=I[2*K+1];te>=l&&te<=m&&oe>=f&&oe<=_&&j.push(S[K]),(z===0?l<=te:f<=oe)&&(N.push(Y),N.push(K-1),N.push(1-z)),(z===0?m>=te:_>=oe)&&(N.push(K+1),N.push(B),N.push(1-z))}return j}within(l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:S,nodeSize:I}=this,C=[0,_.length-1,0],N=[],j=m*m;for(;C.length;){let z=C.pop()||0,B=C.pop()||0,Y=C.pop()||0;if(B-Y<=I){for(let pe=Y;pe<=B;pe++)Sle(S[2*pe],S[2*pe+1],l,f)<=j&&N.push(_[pe]);continue}let K=Y+B>>1,te=S[2*K],oe=S[2*K+1];Sle(te,oe,l,f)<=j&&N.push(_[K]),(z===0?l-m<=te:f-m<=oe)&&(C.push(Y),C.push(K-1),C.push(1-z)),(z===0?l+m>=te:f+m>=oe)&&(C.push(K+1),C.push(B),C.push(1-z))}return N}}function i9(c,l,f,m,_,S){if(_-m<=f)return;let I=m+_>>1;Ele(c,l,I,m,_,S),i9(c,l,f,m,I-1,1-S),i9(c,l,f,I+1,_,1-S)}function Ele(c,l,f,m,_,S){for(;_>m;){if(_-m>600){let j=_-m+1,z=f-m+1,B=Math.log(j),Y=.5*Math.exp(2*B/3),K=.5*Math.sqrt(B*Y*(j-Y)/j)*(z-j/2<0?-1:1);Ele(c,l,f,Math.max(m,Math.floor(f-z*Y/j+K)),Math.min(_,Math.floor(f+(j-z)*Y/j+K)),S)}let I=l[2*f+S],C=m,N=_;for(QS(c,l,m,f),l[2*_+S]>I&&QS(c,l,m,_);C<N;){for(QS(c,l,C,N),C++,N--;l[2*C+S]<I;)C++;for(;l[2*N+S]>I;)N--}l[2*m+S]===I?QS(c,l,m,N):(N++,QS(c,l,N,_)),N<=f&&(m=N+1),f<=N&&(_=N-1)}}function QS(c,l,f,m){a9(c,f,m),a9(l,2*f,2*m),a9(l,2*f+1,2*m+1)}function a9(c,l,f){let m=c[l];c[l]=c[f],c[f]=m}function Sle(c,l,f,m){let _=c-f,S=l-m;return _*_+S*S}var s9;o.bg=void 0,(s9=o.bg||(o.bg={})).create="create",s9.load="load",s9.fullLoad="fullLoad";let q4=null,e2=[],l9=1e3/60,u9="loadTime",c9="fullLoadTime",llt={mark(c){performance.mark(c)},frame(c){let l=c;q4!=null&&e2.push(l-q4),q4=l},clearMetrics(){q4=null,e2=[],performance.clearMeasures(u9),performance.clearMeasures(c9);for(let c in o.bg)performance.clearMarks(o.bg[c])},getPerformanceMetrics(){performance.measure(u9,o.bg.create,o.bg.load),performance.measure(c9,o.bg.create,o.bg.fullLoad);let c=performance.getEntriesByName(u9)[0].duration,l=performance.getEntriesByName(c9)[0].duration,f=e2.length,m=1/(e2.reduce((S,I)=>S+I,0)/f/1e3),_=e2.filter(S=>S>l9).reduce((S,I)=>S+(I-l9)/l9,0);return{loadTime:c,fullLoadTime:l,fps:m,percentDroppedFrames:_/(f+_)*100,totalFrames:f}}};o.$=class extends V{},o.A=O_,o.B=yF,o.C=function(c){if(Ze==null){let l=c.navigator?c.navigator.userAgent:null;Ze=!!c.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ze},o.D=cr,o.E=Dt,o.F=class{constructor(c,l){this.target=c,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Qst(()=>this.process()),this.subscription=function(f,m,_,S){return f.addEventListener(m,_,!1),{unsubscribe:()=>{f.removeEventListener(m,_,!1)}}}(this.target,"message",f=>this.receive(f)),this.globalScope=Ee(self)?c:window}registerMessageHandler(c,l){this.messageHandlers[c]=l}sendAsync(c,l){return new Promise((f,m)=>{let _=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[_]={resolve:f,reject:m},l&&l.signal.addEventListener("abort",()=>{delete this.resolveRejects[_];let C={id:_,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)},{once:!0});let S=[],I=Object.assign(Object.assign({},c),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Um(c.data,S)});this.target.postMessage(I,{transfer:S})})}receive(c){let l=c.data,f=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[f];let m=this.abortControllers[f];return delete this.abortControllers[f],void(m&&m.abort())}if(Ee(self)||l.mustQueue)return this.tasks[f]=l,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,l)}}process(){if(this.taskQueue.length===0)return;let c=this.taskQueue.shift(),l=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(c,l)}processTask(c,l){return i(this,void 0,void 0,function*(){if(l.type==="<response>"){let _=this.resolveRejects[c];return delete this.resolveRejects[c],_?void(l.error?_.reject(Bm(l.error)):_.resolve(Bm(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let f=Bm(l.data),m=new AbortController;this.abortControllers[c]=m;try{let _=yield this.messageHandlers[l.type](l.sourceMapId,f,m);this.completeTask(c,null,_)}catch(_){this.completeTask(c,_)}})}completeTask(c,l,f){let m=[];delete this.abortControllers[c];let _={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Um(l):null,data:Um(f,m)};this.target.postMessage(_,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.G=lt,o.H=function(){var c=new O_(16);return O_!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},o.I=HF,o.J=function(c,l,f){var m,_,S,I,C,N,j,z,B,Y,K,te,oe=f[0],pe=f[1],ve=f[2];return l===c?(c[12]=l[0]*oe+l[4]*pe+l[8]*ve+l[12],c[13]=l[1]*oe+l[5]*pe+l[9]*ve+l[13],c[14]=l[2]*oe+l[6]*pe+l[10]*ve+l[14],c[15]=l[3]*oe+l[7]*pe+l[11]*ve+l[15]):(_=l[1],S=l[2],I=l[3],C=l[4],N=l[5],j=l[6],z=l[7],B=l[8],Y=l[9],K=l[10],te=l[11],c[0]=m=l[0],c[1]=_,c[2]=S,c[3]=I,c[4]=C,c[5]=N,c[6]=j,c[7]=z,c[8]=B,c[9]=Y,c[10]=K,c[11]=te,c[12]=m*oe+C*pe+B*ve+l[12],c[13]=_*oe+N*pe+Y*ve+l[13],c[14]=S*oe+j*pe+K*ve+l[14],c[15]=I*oe+z*pe+te*ve+l[15]),c},o.K=function(c,l,f){var m=f[0],_=f[1],S=f[2];return c[0]=l[0]*m,c[1]=l[1]*m,c[2]=l[2]*m,c[3]=l[3]*m,c[4]=l[4]*_,c[5]=l[5]*_,c[6]=l[6]*_,c[7]=l[7]*_,c[8]=l[8]*S,c[9]=l[9]*S,c[10]=l[10]*S,c[11]=l[11]*S,c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},o.L=ose,o.M=function(c,l){let f={};for(let m=0;m<l.length;m++){let _=l[m];_ in c&&(f[_]=c[_])}return f},o.N=eg,o.O=Qse,o.P=h,o.Q=ele,o.R=ju,o.S=qu,o.T=w_,o.U=L,o.V=P,o.W=ze,o.X=Oi,o.Y=D,o.Z=XS,o._=i,o.a=Ye,o.a$=function(c,l){var f=c[0],m=c[1],_=c[2],S=c[3],I=c[4],C=c[5],N=c[6],j=c[7],z=c[8],B=c[9],Y=c[10],K=c[11],te=c[12],oe=c[13],pe=c[14],ve=c[15],$e=l[0],Ce=l[1],He=l[2],rt=l[3],bt=l[4],Qt=l[5],Ir=l[6],Kt=l[7],Ut=l[8],dr=l[9],sr=l[10],rr=l[11],ut=l[12],gr=l[13],pr=l[14],Lr=l[15];return Math.abs(f-$e)<=Os*Math.max(1,Math.abs(f),Math.abs($e))&&Math.abs(m-Ce)<=Os*Math.max(1,Math.abs(m),Math.abs(Ce))&&Math.abs(_-He)<=Os*Math.max(1,Math.abs(_),Math.abs(He))&&Math.abs(S-rt)<=Os*Math.max(1,Math.abs(S),Math.abs(rt))&&Math.abs(I-bt)<=Os*Math.max(1,Math.abs(I),Math.abs(bt))&&Math.abs(C-Qt)<=Os*Math.max(1,Math.abs(C),Math.abs(Qt))&&Math.abs(N-Ir)<=Os*Math.max(1,Math.abs(N),Math.abs(Ir))&&Math.abs(j-Kt)<=Os*Math.max(1,Math.abs(j),Math.abs(Kt))&&Math.abs(z-Ut)<=Os*Math.max(1,Math.abs(z),Math.abs(Ut))&&Math.abs(B-dr)<=Os*Math.max(1,Math.abs(B),Math.abs(dr))&&Math.abs(Y-sr)<=Os*Math.max(1,Math.abs(Y),Math.abs(sr))&&Math.abs(K-rr)<=Os*Math.max(1,Math.abs(K),Math.abs(rr))&&Math.abs(te-ut)<=Os*Math.max(1,Math.abs(te),Math.abs(ut))&&Math.abs(oe-gr)<=Os*Math.max(1,Math.abs(oe),Math.abs(gr))&&Math.abs(pe-pr)<=Os*Math.max(1,Math.abs(pe),Math.abs(pr))&&Math.abs(ve-Lr)<=Os*Math.max(1,Math.abs(ve),Math.abs(Lr))},o.a0=bn,o.a1=t9,o.a2=nt,o.a3=c=>{let l=window.document.createElement("video");return l.muted=!0,new Promise(f=>{l.onloadstart=()=>{f(l)};for(let m of c){let _=window.document.createElement("source");Oe(m)||(l.crossOrigin="Anonymous"),_.src=m,l.appendChild(_)}})},o.a4=function(){return ee++},o.a5=Xt,o.a6=q_,o.a7=vS,o.a8=Ly,o.a9=ale,o.aA=function(c){if(c.type==="custom")return new Jst(c);switch(c.type){case"background":return new Zst(c);case"circle":return new Rat(c);case"fill":return new Qat(c);case"fill-extrusion":return new hst(c);case"heatmap":return new qat(c);case"hillshade":return new Fat(c);case"line":return new wst(c);case"raster":return new Xst(c);case"symbol":return new L4(c);}},o.aB=ue,o.aC=function(c,l){if(!c)return[{command:"setStyle",args:[l]}];let f=[];try{if(!Ct(c.version,l.version))return[{command:"setStyle",args:[l]}];Ct(c.center,l.center)||f.push({command:"setCenter",args:[l.center]}),Ct(c.zoom,l.zoom)||f.push({command:"setZoom",args:[l.zoom]}),Ct(c.bearing,l.bearing)||f.push({command:"setBearing",args:[l.bearing]}),Ct(c.pitch,l.pitch)||f.push({command:"setPitch",args:[l.pitch]}),Ct(c.sprite,l.sprite)||f.push({command:"setSprite",args:[l.sprite]}),Ct(c.glyphs,l.glyphs)||f.push({command:"setGlyphs",args:[l.glyphs]}),Ct(c.transition,l.transition)||f.push({command:"setTransition",args:[l.transition]}),Ct(c.light,l.light)||f.push({command:"setLight",args:[l.light]}),Ct(c.terrain,l.terrain)||f.push({command:"setTerrain",args:[l.terrain]}),Ct(c.sky,l.sky)||f.push({command:"setSky",args:[l.sky]}),Ct(c.projection,l.projection)||f.push({command:"setProjection",args:[l.projection]});let m={},_=[];(function(I,C,N,j){let z;for(z in C=C||{},I=I||{})Object.prototype.hasOwnProperty.call(I,z)&&(Object.prototype.hasOwnProperty.call(C,z)||Ue(z,N,j));for(z in C)Object.prototype.hasOwnProperty.call(C,z)&&(Object.prototype.hasOwnProperty.call(I,z)?Ct(I[z],C[z])||(I[z].type==="geojson"&&C[z].type==="geojson"&&yt(I,C,z)?ce(N,{command:"setGeoJSONSourceData",args:[z,C[z].data]}):ht(z,C,N,j)):qe(z,C,N))})(c.sources,l.sources,_,m);let S=[];c.layers&&c.layers.forEach(I=>{"source"in I&&m[I.source]?f.push({command:"removeLayer",args:[I.id]}):S.push(I)}),f=f.concat(_),function(I,C,N){C=C||[];let j=(I=I||[]).map(_t),z=C.map(_t),B=I.reduce(Yt,{}),Y=C.reduce(Yt,{}),K=j.slice(),te=Object.create(null),oe,pe,ve,$e,Ce;for(let He=0,rt=0;He<j.length;He++)oe=j[He],Object.prototype.hasOwnProperty.call(Y,oe)?rt++:(ce(N,{command:"removeLayer",args:[oe]}),K.splice(K.indexOf(oe,rt),1));for(let He=0,rt=0;He<z.length;He++)oe=z[z.length-1-He],K[K.length-1-He]!==oe&&(Object.prototype.hasOwnProperty.call(B,oe)?(ce(N,{command:"removeLayer",args:[oe]}),K.splice(K.lastIndexOf(oe,K.length-rt),1)):rt++,$e=K[K.length-He],ce(N,{command:"addLayer",args:[Y[oe],$e]}),K.splice(K.length-He,0,oe),te[oe]=!0);for(let He=0;He<z.length;He++)if(oe=z[He],pe=B[oe],ve=Y[oe],!te[oe]&&!Ct(pe,ve))if(Ct(pe.source,ve.source)&&Ct(pe["source-layer"],ve["source-layer"])&&Ct(pe.type,ve.type)){for(Ce in mt(pe.layout,ve.layout,N,oe,null,"setLayoutProperty"),mt(pe.paint,ve.paint,N,oe,null,"setPaintProperty"),Ct(pe.filter,ve.filter)||ce(N,{command:"setFilter",args:[oe,ve.filter]}),Ct(pe.minzoom,ve.minzoom)&&Ct(pe.maxzoom,ve.maxzoom)||ce(N,{command:"setLayerZoomRange",args:[oe,ve.minzoom,ve.maxzoom]}),pe)Object.prototype.hasOwnProperty.call(pe,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?mt(pe[Ce],ve[Ce],N,oe,Ce.slice(6),"setPaintProperty"):Ct(pe[Ce],ve[Ce])||ce(N,{command:"setLayerProperty",args:[oe,Ce,ve[Ce]]}));for(Ce in ve)Object.prototype.hasOwnProperty.call(ve,Ce)&&!Object.prototype.hasOwnProperty.call(pe,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?mt(pe[Ce],ve[Ce],N,oe,Ce.slice(6),"setPaintProperty"):Ct(pe[Ce],ve[Ce])||ce(N,{command:"setLayerProperty",args:[oe,Ce,ve[Ce]]}))}else ce(N,{command:"removeLayer",args:[oe]}),$e=K[K.lastIndexOf(oe)+1],ce(N,{command:"addLayer",args:[ve,$e]})}(S,l.layers,f)}catch(m){console.warn("Unable to compute style diff:",m),f=[{command:"setStyle",args:[l]}]}return f},o.aD=function(c){let l=[],f=c.id;return f===void 0&&l.push({message:`layers.${f}: missing required property "id"`}),c.render===void 0&&l.push({message:`layers.${f}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&l.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),l},o.aE=function c(l,f){if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(let m=0;m<l.length;m++)if(!c(l[m],f[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&f!==null){if(typeof f!="object"||Object.keys(l).length!==Object.keys(f).length)return!1;for(let m in l)if(!c(l[m],f[m]))return!1;return!0}return l===f},o.aF=ne,o.aG=me,o.aH=class extends Dy{constructor(c,l){super(c,l),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},o.aI=x4,o.aJ=class extends Dy{constructor(c,l){super(c,l),this.current=Cat}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let l=1;l<16;l++)if(c[l]!==this.current[l]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},o.aK=$ae,o.aL=Yae,o.aM=to,o.aN=class extends Dy{constructor(c,l){super(c,l),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},o.aO=class extends Dy{constructor(c,l){super(c,l),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},o.aP=function(c,l,f,m,_,S,I){var C=1/(l-f),N=1/(m-_),j=1/(S-I);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*N,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*j,c[11]=0,c[12]=(l+f)*C,c[13]=(_+m)*N,c[14]=(I+S)*j,c[15]=1,c},o.aQ=kat,o.aR=class extends Pe{},o.aS=Tst,o.aT=class extends Ke{},o.aU=LF,o.aV=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},o.aW=use,o.aX=Aa,o.aY=Ru,o.aZ=class extends fr{},o.a_=function(c,l){return c[0]===l[0]&&c[1]===l[1]&&c[2]===l[2]&&c[3]===l[3]&&c[4]===l[4]&&c[5]===l[5]&&c[6]===l[6]&&c[7]===l[7]&&c[8]===l[8]&&c[9]===l[9]&&c[10]===l[10]&&c[11]===l[11]&&c[12]===l[12]&&c[13]===l[13]&&c[14]===l[14]&&c[15]===l[15]},o.aa=function(c){let l={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,m,_,S)=>{let I=_||S;return l[m]=!I||I.toLowerCase(),""}),l["max-age"]){let f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l},o.ab=function(c,l){let f=[];for(let m in c)m in l||f.push(m);return f},o.ac=U,o.ad=function(c,l,f){var m=Math.sin(f),_=Math.cos(f),S=l[0],I=l[1],C=l[2],N=l[3],j=l[4],z=l[5],B=l[6],Y=l[7];return l!==c&&(c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[0]=S*_+j*m,c[1]=I*_+z*m,c[2]=C*_+B*m,c[3]=N*_+Y*m,c[4]=j*_-S*m,c[5]=z*_-I*m,c[6]=B*_-C*m,c[7]=Y*_-N*m,c},o.ae=function(c){var l=new O_(16);return l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=c[6],l[7]=c[7],l[8]=c[8],l[9]=c[9],l[10]=c[10],l[11]=c[11],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15],l},o.af=S4,o.ag=function(c,l){let f=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){let{interpolationType:_,minZoom:S,maxZoom:I}=c,C=_?U(Ds.interpolationFactor(_,l,S,I),0,1):0;c.kind==="camera"?m=As.number(c.minSize,c.maxSize,C):f=C}return{uSizeT:f,uSize:m}},o.ai=function(c,{uSize:l,uSizeT:f},{lowerSize:m,upperSize:_}){return c.kind==="source"?m/_p:c.kind==="composite"?As.number(m/_p,_/_p,f):l},o.aj=ZF,o.ak=function(c,l,f,m){let _=l.y-c.y,S=l.x-c.x,I=m.y-f.y,C=m.x-f.x,N=I*S-C*_;if(N===0)return null;let j=(C*(c.y-f.y)-I*(c.x-f.x))/N;return new h(c.x+j*S,c.y+j*_)},o.al=cle,o.am=Jae,o.an=DF,o.ao=function(c){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let S of c)l=Math.min(l,S.x),f=Math.min(f,S.y),m=Math.max(m,S.x),_=Math.max(_,S.y);return[l,f,m,_]},o.ap=Ui,o.ar=YF,o.as=function(c,l){var f=l[0],m=l[1],_=l[2],S=l[3],I=l[4],C=l[5],N=l[6],j=l[7],z=l[8],B=l[9],Y=l[10],K=l[11],te=l[12],oe=l[13],pe=l[14],ve=l[15],$e=f*C-m*I,Ce=f*N-_*I,He=f*j-S*I,rt=m*N-_*C,bt=m*j-S*C,Qt=_*j-S*N,Ir=z*oe-B*te,Kt=z*pe-Y*te,Ut=z*ve-K*te,dr=B*pe-Y*oe,sr=B*ve-K*oe,rr=Y*ve-K*pe,ut=$e*rr-Ce*sr+He*dr+rt*Ut-bt*Kt+Qt*Ir;return ut?(c[0]=(C*rr-N*sr+j*dr)*(ut=1/ut),c[1]=(_*sr-m*rr-S*dr)*ut,c[2]=(oe*Qt-pe*bt+ve*rt)*ut,c[3]=(Y*bt-B*Qt-K*rt)*ut,c[4]=(N*Ut-I*rr-j*Kt)*ut,c[5]=(f*rr-_*Ut+S*Kt)*ut,c[6]=(pe*He-te*Qt-ve*Ce)*ut,c[7]=(z*Qt-Y*He+K*Ce)*ut,c[8]=(I*sr-C*Ut+j*Ir)*ut,c[9]=(m*Ut-f*sr-S*Ir)*ut,c[10]=(te*bt-oe*He+ve*$e)*ut,c[11]=(B*He-z*bt-K*$e)*ut,c[12]=(C*Kt-I*dr-N*Ir)*ut,c[13]=(f*dr-m*Kt+_*Ir)*ut,c[14]=(oe*Ce-te*rt-pe*$e)*ut,c[15]=(z*rt-B*Ce+Y*$e)*ut,c):null},o.at=n9,o.au=$F,o.av=o9,o.aw=function(){let c={},l=Ae.$version;for(let f in Ae.$root){let m=Ae.$root[f];if(m.required){let _=null;_=f==="version"?l:m.type==="array"?[]:{},_!=null&&(c[f]=_)}}return c},o.ax=NS,o.ay=ge,o.az=function(c){c=c.slice();let l=Object.create(null);for(let f=0;f<c.length;f++)l[c[f].id]=c[f];for(let f=0;f<c.length;f++)"ref"in c[f]&&(c[f]=Wt(c[f],l[c[f].ref]));return c},o.b=Qe,o.b0=function(c,l){return c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=l[6],c[7]=l[7],c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},o.b1=function(c,l,f){return c[0]=l[0]*f[0],c[1]=l[1]*f[1],c[2]=l[2]*f[2],c[3]=l[3]*f[3],c},o.b2=function(c,l){return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3]},o.b3=H,o.b4=nle,o.b5=tle,o.b6=function(c,l,f,m,_){var S,I=1/Math.tan(l/2);return c[0]=I/f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=I,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,_!=null&&_!==1/0?(c[10]=(_+m)*(S=1/(m-_)),c[14]=2*_*m*S):(c[10]=-1,c[14]=-2*m),c},o.b7=function(c,l,f){var m=Math.sin(f),_=Math.cos(f),S=l[4],I=l[5],C=l[6],N=l[7],j=l[8],z=l[9],B=l[10],Y=l[11];return l!==c&&(c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[4]=S*_+j*m,c[5]=I*_+z*m,c[6]=C*_+B*m,c[7]=N*_+Y*m,c[8]=j*_-S*m,c[9]=z*_-I*m,c[10]=B*_-C*m,c[11]=Y*_-N*m,c},o.b8=k,o.b9=q,o.bA=Ase,o.bB=function(c){return c.message===st},o.bC=Pm,o.bD=ml,o.ba=function(c){return c*Math.PI/180},o.bb=function(c,l){let{x:f,y:m}=XS.fromLngLat(l);return!(c<0||c>25||m<0||m>=1||f<0||f>=1)},o.bc=function(c,l){return c[0]=l[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=l[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=l[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},o.bd=class extends F{},o.be=QF,o.bf=llt,o.bh=je,o.bi=function(c,l){Ye.REGISTERED_PROTOCOLS[c]=l},o.bj=function(c){delete Ye.REGISTERED_PROTOCOLS[c]},o.bk=function(c,l){let f={};for(let _=0;_<c.length;_++){let S=l&&l[c[_].id]||l4(c[_]);l&&(l[c[_].id]=S);let I=f[S];I||(I=f[S]=[]),I.push(c[_])}let m=[];for(let _ in f)m.push(f[_]);return m},o.bl=or,o.bm=ile,o.bn=sle,o.bo=qse,o.bp=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Oi/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;let l=c.bucket.layers[0],f=l.layout,m=l._unevaluatedLayout._values,_={layoutIconSize:m["icon-size"].possiblyEvaluate(new Co(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Co(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Co(18))};if(c.bucket.textSizeData.kind==="composite"){let{minZoom:j,maxZoom:z}=c.bucket.textSizeData;_.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Co(j),c.canonical),m["text-size"].possiblyEvaluate(new Co(z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){let{minZoom:j,maxZoom:z}=c.bucket.iconSizeData;_.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Co(j),c.canonical),m["icon-size"].possiblyEvaluate(new Co(z),c.canonical)]}let S=f.get("text-line-height")*Ui,I=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",C=f.get("text-keep-upright"),N=f.get("text-size");for(let j of c.bucket.features){let z=f.get("text-font").evaluate(j,{},c.canonical).join(","),B=N.evaluate(j,{},c.canonical),Y=_.layoutTextSize.evaluate(j,{},c.canonical),K=_.layoutIconSize.evaluate(j,{},c.canonical),te={horizontal:{},vertical:void 0},oe=j.text,pe,ve=[0,0];if(oe){let He=oe.toString(),rt=f.get("text-letter-spacing").evaluate(j,{},c.canonical)*Ui,bt=_F(He)?rt:0,Qt=f.get("text-anchor").evaluate(j,{},c.canonical),Ir=_le(l,j,c.canonical);if(!Ir){let sr=f.get("text-radial-offset").evaluate(j,{},c.canonical);ve=sr?yle(Qt,[sr*Ui,r9]):f.get("text-offset").evaluate(j,{},c.canonical).map(rr=>rr*Ui)}let Kt=I?"center":f.get("text-justify").evaluate(j,{},c.canonical),Ut=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(j,{},c.canonical)*Ui:1/0,dr=()=>{c.bucket.allowVerticalPlacement&&OS(He)&&(te.vertical=D4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,Qt,"left",bt,ve,o.ah.vertical,!0,Y,B))};if(!I&&Ir){let sr=new Set;if(Kt==="auto")for(let ut=0;ut<Ir.values.length;ut+=2)sr.add(n9(Ir.values[ut]));else sr.add(Kt);let rr=!1;for(let ut of sr)if(!te.horizontal[ut])if(rr)te.horizontal[ut]=te.horizontal[0];else{let gr=D4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,"center",ut,bt,ve,o.ah.horizontal,!1,Y,B);gr&&(te.horizontal[ut]=gr,rr=gr.positionedLines.length===1)}dr()}else{Kt==="auto"&&(Kt=n9(Qt));let sr=D4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,Qt,Kt,bt,ve,o.ah.horizontal,!1,Y,B);sr&&(te.horizontal[Kt]=sr),dr(),OS(He)&&I&&C&&(te.vertical=D4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,Qt,Kt,bt,ve,o.ah.vertical,!1,Y,B))}}let $e=!1;if(j.icon&&j.icon.name){let He=c.imageMap[j.icon.name];He&&(pe=Gst(c.imagePositions[j.icon.name],f.get("icon-offset").evaluate(j,{},c.canonical),f.get("icon-anchor").evaluate(j,{},c.canonical)),$e=!!He.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=$e:c.bucket.sdfIcons!==$e&&ke("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(He.pixelRatio!==c.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}let Ce=ble(te.horizontal)||te.vertical;c.bucket.iconsInText=!!Ce&&Ce.iconsInText,(Ce||pe)&&alt(c.bucket,j,te,pe,c.imageMap,_,Y,K,ve,$e,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},o.bq=UF,o.br=qF,o.bs=FF,o.bt=Xm,o.bu=VF,o.bv=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},o.bw=function(c,l,f,m,_){return i(this,void 0,void 0,function*(){if(P())try{return yield ze(c,l,f,m,_)}catch(S){}return function(S,I,C,N,j){let z=S.width,B=S.height;Ne&&et||(Ne=new OffscreenCanvas(z,B),et=Ne.getContext("2d",{willReadFrequently:!0})),Ne.width=z,Ne.height=B,et.drawImage(S,0,0,z,B);let Y=et.getImageData(I,C,N,j);return et.clearRect(0,0,z,B),Y.data}(c,l,f,m,_)})},o.bx=ole,o.by=a,o.bz=u,o.c=ft,o.d=c=>i(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(l)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.e=X,o.f=c=>new Promise((l,f)=>{let m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=Fe})},m.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let _=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(_):Fe}),o.g=tt,o.h=(c,l)=>We(X(c,{type:"json"}),l),o.i=Ee,o.j=Mt,o.k=Pt,o.l=(c,l)=>We(X(c,{type:"arrayBuffer"}),l),o.m=We,o.n=function(c){return new VF(c).readFields(jst,[])},o.o=US,o.p=jse,o.q=E,o.r=vF,o.s=Oe,o.t=AS,o.u=Qd,o.v=Ae,o.w=ke,o.x=function([c,l,f]){return l+=90,l*=Math.PI/180,f*=Math.PI/180,{x:c*Math.cos(l)*Math.sin(f),y:c*Math.sin(l)*Math.sin(f),z:c*Math.cos(f)}},o.y=As,o.z=Co}),r("worker",["./shared"],function(o){"use strict";class i{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,W){for(let se of $){this._layerConfigs[se.id]=se;let be=this._layers[se.id]=o.aA(se);be._featureFilter=o.a7(be.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(let se of W)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};let J=o.bk(Object.values(this._layerConfigs),this.keyCache);for(let se of J){let be=se.map(Xe=>this._layers[Xe.id]),De=be[0];if(De.visibility==="none")continue;let Re=De.source||"",_e=this.familiesBySource[Re];_e||(_e=this.familiesBySource[Re]={});let Je=De.sourceLayer||"_geojsonTileLayer",pt=_e[Je];pt||(pt=_e[Je]=[]),pt.push(be)}}}class a{constructor($){let W={},J=[];for(let Re in $){let _e=$[Re],Je=W[Re]={};for(let pt in _e){let Xe=_e[+pt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;let At={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};J.push(At),Je[pt]={rect:At,metrics:Xe.metrics}}}let{w:se,h:be}=o.p(J),De=new o.o({width:se||1,height:be||1});for(let Re in $){let _e=$[Re];for(let Je in _e){let pt=_e[+Je];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;let Xe=W[Re][Je].rect;o.o.copy(pt.bitmap,De,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},pt.bitmap)}}this.image=De,this.positions=W}}o.bl("GlyphAtlas",a);class u{constructor($){this.tileID=new o.S($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[]}parse($,W,J,se){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=$,this.collisionBoxArray=new o.a5;let be=new o.bm(Object.keys($.layers).sort()),De=new o.bn(this.tileID,this.promoteId);De.bucketLayerIDs=[];let Re={},_e={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Je=W.familiesBySource[this.source];for(let an in Je){let eo=$.layers[an];if(!eo)continue;eo.version===1&&o.w(`Vector tile source "${this.source}" layer "${an}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Vo=be.encode(an),ea=[];for(let ha=0;ha<eo.length;ha++){let Ja=eo.feature(ha),Em=De.getId(Ja,an);ea.push({feature:Ja,id:Em,index:ha,sourceLayerIndex:Vo})}for(let ha of Je[an]){let Ja=ha[0];Ja.source!==this.source&&o.w(`layer.source = ${Ja.source} does not equal this.source = ${this.source}`),Ja.minzoom&&this.zoom<Math.floor(Ja.minzoom)||Ja.maxzoom&&this.zoom>=Ja.maxzoom||Ja.visibility!=="none"&&(p(ha,this.zoom,J),(Re[Ja.id]=Ja.createBucket({index:De.bucketLayerIDs.length,layers:ha,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Vo,sourceID:this.source})).populate(ea,_e,this.tileID.canonical),De.bucketLayerIDs.push(ha.map(Em=>Em.id)))}}let pt=o.aF(_e.glyphDependencies,an=>Object.keys(an).map(Number));this.inFlightDependencies.forEach(an=>an==null?void 0:an.abort()),this.inFlightDependencies=[];let Xe=Promise.resolve({});if(Object.keys(pt).length){let an=new AbortController;this.inFlightDependencies.push(an),Xe=se.sendAsync({type:"GG",data:{stacks:pt,source:this.source,tileID:this.tileID,type:"glyphs"}},an)}let At=Object.keys(_e.iconDependencies),ur=Promise.resolve({});if(At.length){let an=new AbortController;this.inFlightDependencies.push(an),ur=se.sendAsync({type:"GI",data:{icons:At,source:this.source,tileID:this.tileID,type:"icons"}},an)}let Sr=Object.keys(_e.patternDependencies),An=Promise.resolve({});if(Sr.length){let an=new AbortController;this.inFlightDependencies.push(an),An=se.sendAsync({type:"GI",data:{icons:Sr,source:this.source,tileID:this.tileID,type:"patterns"}},an)}let[Gr,Dn,vn]=yield Promise.all([Xe,ur,An]),Di=new a(Gr),ii=new o.bo(Dn,vn);for(let an in Re){let eo=Re[an];eo instanceof o.a6?(p(eo.layers,this.zoom,J),o.bp({bucket:eo,glyphMap:Gr,glyphPositions:Di.positions,imageMap:Dn,imagePositions:ii.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):eo.hasPattern&&(eo instanceof o.bq||eo instanceof o.br||eo instanceof o.bs)&&(p(eo.layers,this.zoom,J),eo.addFeatures(_e,this.tileID.canonical,ii.patternPositions))}return this.status="done",{buckets:Object.values(Re).filter(an=>!an.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Di.image,imageAtlas:ii,glyphMap:this.returnDependencies?Gr:null,iconMap:this.returnDependencies?Dn:null,glyphPositions:this.returnDependencies?Di.positions:null}})}}function p(ae,$,W){let J=new o.z($);for(let se of ae)se.recalculate(J,W)}class h{constructor($,W,J){this.actor=$,this.layerIndex=W,this.availableImages=J,this.fetching={},this.loading={},this.loaded={}}loadVectorTile($,W){return o._(this,void 0,void 0,function*(){let J=yield o.l($.request,W);try{return{vectorTile:new o.bt.VectorTile(new o.bu(J.data)),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(se){let be=new Uint8Array(J.data),De=`Unable to parse the tile at ${$.request.url}, `;throw De+=be[0]===31&&be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${se.message}`,new Error(De)}})}loadTile($){return o._(this,void 0,void 0,function*(){let W=$.uid,J=!!($&&$.request&&$.request.collectResourceTiming)&&new o.bv($.request),se=new u($);this.loading[W]=se;let be=new AbortController;se.abort=be;try{let De=yield this.loadVectorTile($,be);if(delete this.loading[W],!De)return null;let Re=De.rawData,_e={};De.expires&&(_e.expires=De.expires),De.cacheControl&&(_e.cacheControl=De.cacheControl);let Je={};if(J){let Xe=J.finish();Xe&&(Je.resourceTiming=JSON.parse(JSON.stringify(Xe)))}se.vectorTile=De.vectorTile;let pt=se.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[W]=se,this.fetching[W]={rawTileData:Re,cacheControl:_e,resourceTiming:Je};try{let Xe=yield pt;return o.e({rawTileData:Re.slice(0)},Xe,_e,Je)}finally{delete this.fetching[W]}}catch(De){throw delete this.loading[W],se.status="done",this.loaded[W]=se,De}})}reloadTile($){return o._(this,void 0,void 0,function*(){let W=$.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let J=this.loaded[W];if(J.showCollisionBoxes=$.showCollisionBoxes,J.status==="parsing"){let se=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor),be;if(this.fetching[W]){let{rawTileData:De,cacheControl:Re,resourceTiming:_e}=this.fetching[W];delete this.fetching[W],be=o.e({rawTileData:De.slice(0)},se,Re,_e)}else be=se;return be}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile($){return o._(this,void 0,void 0,function*(){let W=this.loading,J=$.uid;W&&W[J]&&W[J].abort&&(W[J].abort.abort(),delete W[J])})}removeTile($){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[$.uid]&&delete this.loaded[$.uid]})}}class g{constructor(){this.loaded={}}loadTile($){return o._(this,void 0,void 0,function*(){let{uid:W,encoding:J,rawImageData:se,redFactor:be,greenFactor:De,blueFactor:Re,baseShift:_e}=$,Je=se.width+2,pt=se.height+2,Xe=o.b(se)?new o.R({width:Je,height:pt},(yield o.bw(se,-1,-1,Je,pt))):se,At=new o.bx(W,Xe,J,be,De,Re,_e);return this.loaded=this.loaded||{},this.loaded[W]=At,At})}removeTile($){let W=this.loaded,J=$.uid;W&&W[J]&&delete W[J]}}function x(ae,$){if(ae.length!==0){b(ae[0],$);for(var W=1;W<ae.length;W++)b(ae[W],!$)}}function b(ae,$){for(var W=0,J=0,se=0,be=ae.length,De=be-1;se<be;De=se++){var Re=(ae[se][0]-ae[De][0])*(ae[De][1]+ae[se][1]),_e=W+Re;J+=Math.abs(W)>=Math.abs(Re)?W-_e+Re:Re-_e+W,W=_e}W+J>=0!=!!$&&ae.reverse()}var T=o.by(function ae($,W){var J,se=$&&$.type;if(se==="FeatureCollection")for(J=0;J<$.features.length;J++)ae($.features[J],W);else if(se==="GeometryCollection")for(J=0;J<$.geometries.length;J++)ae($.geometries[J],W);else if(se==="Feature")ae($.geometry,W);else if(se==="Polygon")x($.coordinates,W);else if(se==="MultiPolygon")for(J=0;J<$.coordinates.length;J++)x($.coordinates[J],W);return $});let A=o.bt.VectorTileFeature.prototype.toGeoJSON;var L={exports:{}},P=o.bz,k=o.bt.VectorTileFeature,q=U;function U(ae,$){this.options=$||{},this.features=ae,this.length=ae.length}function H(ae,$){this.id=typeof ae.id=="number"?ae.id:void 0,this.type=ae.type,this.rawGeometry=ae.type===1?[ae.geometry]:ae.geometry,this.properties=ae.tags,this.extent=$||4096}U.prototype.feature=function(ae){return new H(this.features[ae],this.options.extent)},H.prototype.loadGeometry=function(){var ae=this.rawGeometry;this.geometry=[];for(var $=0;$<ae.length;$++){for(var W=ae[$],J=[],se=0;se<W.length;se++)J.push(new P(W[se][0],W[se][1]));this.geometry.push(J)}return this.geometry},H.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ae=this.geometry,$=1/0,W=-1/0,J=1/0,se=-1/0,be=0;be<ae.length;be++)for(var De=ae[be],Re=0;Re<De.length;Re++){var _e=De[Re];$=Math.min($,_e.x),W=Math.max(W,_e.x),J=Math.min(J,_e.y),se=Math.max(se,_e.y)}return[$,J,W,se]},H.prototype.toGeoJSON=k.prototype.toGeoJSON;var X=o.bA,ee=q;function ne(ae){var $=new X;return function(W,J){for(var se in W.layers)J.writeMessage(3,me,W.layers[se])}(ae,$),$.finish()}function me(ae,$){var W;$.writeVarintField(15,ae.version||1),$.writeStringField(1,ae.name||""),$.writeVarintField(5,ae.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<ae.length;W++)J.feature=ae.feature(W),$.writeMessage(2,ue,J);var se=J.keys;for(W=0;W<se.length;W++)$.writeStringField(3,se[W]);var be=J.values;for(W=0;W<be.length;W++)$.writeMessage(4,Ze,be[W])}function ue(ae,$){var W=ae.feature;W.id!==void 0&&$.writeVarintField(1,W.id),$.writeMessage(2,Me,ae),$.writeVarintField(3,W.type),$.writeMessage(4,Ee,W)}function Me(ae,$){var W=ae.feature,J=ae.keys,se=ae.values,be=ae.keycache,De=ae.valuecache;for(var Re in W.properties){var _e=W.properties[Re],Je=be[Re];if(_e!==null){Je===void 0&&(J.push(Re),be[Re]=Je=J.length-1),$.writeVarint(Je);var pt=typeof _e;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&(_e=JSON.stringify(_e));var Xe=pt+":"+_e,At=De[Xe];At===void 0&&(se.push(_e),De[Xe]=At=se.length-1),$.writeVarint(At)}}}function ke(ae,$){return($<<3)+(7&ae)}function Te(ae){return ae<<1^ae>>31}function Ee(ae,$){for(var W=ae.loadGeometry(),J=ae.type,se=0,be=0,De=W.length,Re=0;Re<De;Re++){var _e=W[Re],Je=1;J===1&&(Je=_e.length),$.writeVarint(ke(1,Je));for(var pt=J===3?_e.length-1:_e.length,Xe=0;Xe<pt;Xe++){Xe===1&&J!==1&&$.writeVarint(ke(2,pt-1));var At=_e[Xe].x-se,ur=_e[Xe].y-be;$.writeVarint(Te(At)),$.writeVarint(Te(ur)),se+=At,be+=ur}J===3&&$.writeVarint(ke(7,1))}}function Ze(ae,$){var W=typeof ae;W==="string"?$.writeStringField(1,ae):W==="boolean"?$.writeBooleanField(7,ae):W==="number"&&(ae%1!=0?$.writeDoubleField(3,ae):ae<0?$.writeSVarintField(6,ae):$.writeVarintField(5,ae))}L.exports=ne,L.exports.fromVectorTileJs=ne,L.exports.fromGeojsonVt=function(ae,$){$=$||{};var W={};for(var J in ae)W[J]=new ee(ae[J].features,$),W[J].name=J,W[J].version=$.version,W[J].extent=$.extent;return ne({layers:W})},L.exports.GeoJSONWrapper=ee;var Qe=o.by(L.exports);let Fe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ae=>ae},ze=Math.fround||(Ne=new Float32Array(1),ae=>(Ne[0]=+ae,Ne[0]));var Ne;let et=3,st=5,ft=6;class Ye{constructor($){this.options=Object.assign(Object.create(Fe),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){let{log:W,minZoom:J,maxZoom:se}=this.options;W&&console.time("total time");let be=`prepare ${$.length} points`;W&&console.time(be),this.points=$;let De=[];for(let _e=0;_e<$.length;_e++){let Je=$[_e];if(!Je.geometry)continue;let[pt,Xe]=Je.geometry.coordinates,At=ze(je(pt)),ur=ze(ge(Xe));De.push(At,ur,1/0,_e,-1,1),this.options.reduce&&De.push(0)}let Re=this.trees[se+1]=this._createTree(De);W&&console.timeEnd(be);for(let _e=se;_e>=J;_e--){let Je=+Date.now();Re=this.trees[_e]=this._createTree(this._cluster(Re,_e)),W&&console.log("z%d: %d clusters in %dms",_e,Re.numItems,+Date.now()-Je)}return W&&console.timeEnd("total time"),this}getClusters($,W){let J=(($[0]+180)%360+360)%360-180,se=Math.max(-90,Math.min(90,$[1])),be=$[2]===180?180:(($[2]+180)%360+360)%360-180,De=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)J=-180,be=180;else if(J>be){let Xe=this.getClusters([J,se,180,De],W),At=this.getClusters([-180,se,be,De],W);return Xe.concat(At)}let Re=this.trees[this._limitZoom(W)],_e=Re.range(je(J),ge(De),je(be),ge(se)),Je=Re.data,pt=[];for(let Xe of _e){let At=this.stride*Xe;pt.push(Je[At+st]>1?tt(Je,At,this.clusterProps):this.points[Je[At+et]])}return pt}getChildren($){let W=this._getOriginId($),J=this._getOriginZoom($),se="No cluster with the specified id.",be=this.trees[J];if(!be)throw new Error(se);let De=be.data;if(W*this.stride>=De.length)throw new Error(se);let Re=this.options.radius/(this.options.extent*Math.pow(2,J-1)),_e=be.within(De[W*this.stride],De[W*this.stride+1],Re),Je=[];for(let pt of _e){let Xe=pt*this.stride;De[Xe+4]===$&&Je.push(De[Xe+st]>1?tt(De,Xe,this.clusterProps):this.points[De[Xe+et]])}if(Je.length===0)throw new Error(se);return Je}getLeaves($,W,J){let se=[];return this._appendLeaves(se,$,W=W||10,J=J||0,0),se}getTile($,W,J){let se=this.trees[this._limitZoom($)],be=Math.pow(2,$),{extent:De,radius:Re}=this.options,_e=Re/De,Je=(J-_e)/be,pt=(J+1+_e)/be,Xe={features:[]};return this._addTileFeatures(se.range((W-_e)/be,Je,(W+1+_e)/be,pt),se.data,W,J,be,Xe),W===0&&this._addTileFeatures(se.range(1-_e/be,Je,1,pt),se.data,be,J,be,Xe),W===be-1&&this._addTileFeatures(se.range(0,Je,_e/be,pt),se.data,-1,J,be,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom($){let W=this._getOriginZoom($)-1;for(;W<=this.options.maxZoom;){let J=this.getChildren($);if(W++,J.length!==1)break;$=J[0].properties.cluster_id}return W}_appendLeaves($,W,J,se,be){let De=this.getChildren(W);for(let Re of De){let _e=Re.properties;if(_e&&_e.cluster?be+_e.point_count<=se?be+=_e.point_count:be=this._appendLeaves($,_e.cluster_id,J,se,be):be<se?be++:$.push(Re),$.length===J)break}return be}_createTree($){let W=new o.av($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<$.length;J+=this.stride)W.add($[J],$[J+1]);return W.finish(),W.data=$,W}_addTileFeatures($,W,J,se,be,De){for(let Re of $){let _e=Re*this.stride,Je=W[_e+st]>1,pt,Xe,At;if(Je)pt=lt(W,_e,this.clusterProps),Xe=W[_e],At=W[_e+1];else{let An=this.points[W[_e+et]];pt=An.properties;let[Gr,Dn]=An.geometry.coordinates;Xe=je(Gr),At=ge(Dn)}let ur={type:1,geometry:[[Math.round(this.options.extent*(Xe*be-J)),Math.round(this.options.extent*(At*be-se))]],tags:pt},Sr;Sr=Je||this.options.generateId?W[_e+et]:this.points[W[_e+et]].id,Sr!==void 0&&(ur.id=Sr),De.features.push(ur)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,W){let{radius:J,extent:se,reduce:be,minPoints:De}=this.options,Re=J/(se*Math.pow(2,W)),_e=$.data,Je=[],pt=this.stride;for(let Xe=0;Xe<_e.length;Xe+=pt){if(_e[Xe+2]<=W)continue;_e[Xe+2]=W;let At=_e[Xe],ur=_e[Xe+1],Sr=$.within(_e[Xe],_e[Xe+1],Re),An=_e[Xe+st],Gr=An;for(let Dn of Sr){let vn=Dn*pt;_e[vn+2]>W&&(Gr+=_e[vn+st])}if(Gr>An&&Gr>=De){let Dn,vn=At*An,Di=ur*An,ii=-1,an=((Xe/pt|0)<<5)+(W+1)+this.points.length;for(let eo of Sr){let Vo=eo*pt;if(_e[Vo+2]<=W)continue;_e[Vo+2]=W;let ea=_e[Vo+st];vn+=_e[Vo]*ea,Di+=_e[Vo+1]*ea,_e[Vo+4]=an,be&&(Dn||(Dn=this._map(_e,Xe,!0),ii=this.clusterProps.length,this.clusterProps.push(Dn)),be(Dn,this._map(_e,Vo)))}_e[Xe+4]=an,Je.push(vn/Gr,Di/Gr,1/0,an,-1,Gr),be&&Je.push(ii)}else{for(let Dn=0;Dn<pt;Dn++)Je.push(_e[Xe+Dn]);if(Gr>1)for(let Dn of Sr){let vn=Dn*pt;if(!(_e[vn+2]<=W)){_e[vn+2]=W;for(let Di=0;Di<pt;Di++)Je.push(_e[vn+Di])}}}}return Je}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,W,J){if($[W+st]>1){let De=this.clusterProps[$[W+ft]];return J?Object.assign({},De):De}let se=this.points[$[W+et]].properties,be=this.options.map(se);return J&&be===se?Object.assign({},be):be}}function tt(ae,$,W){return{type:"Feature",id:ae[$+et],properties:lt(ae,$,W),geometry:{type:"Point",coordinates:[(J=ae[$],360*(J-.5)),We(ae[$+1])]}};var J}function lt(ae,$,W){let J=ae[$+st],se=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,be=ae[$+ft],De=be===-1?{}:Object.assign({},W[be]);return Object.assign(De,{cluster:!0,cluster_id:ae[$+et],point_count:J,point_count_abbreviated:se})}function je(ae){return ae/360+.5}function ge(ae){let $=Math.sin(ae*Math.PI/180),W=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return W<0?0:W>1?1:W}function We(ae){let $=(180-360*ae)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function Oe(ae,$,W,J){let se=J,be=$+(W-$>>1),De,Re=W-$,_e=ae[$],Je=ae[$+1],pt=ae[W],Xe=ae[W+1];for(let At=$+3;At<W;At+=3){let ur=at(ae[At],ae[At+1],_e,Je,pt,Xe);if(ur>se)De=At,se=ur;else if(ur===se){let Sr=Math.abs(At-be);Sr<Re&&(De=At,Re=Sr)}}se>J&&(De-$>3&&Oe(ae,$,De,J),ae[De+2]=se,W-De>3&&Oe(ae,De,W,J))}function at(ae,$,W,J,se,be){let De=se-W,Re=be-J;if(De!==0||Re!==0){let _e=((ae-W)*De+($-J)*Re)/(De*De+Re*Re);_e>1?(W=se,J=be):_e>0&&(W+=De*_e,J+=Re*_e)}return De=ae-W,Re=$-J,De*De+Re*Re}function ot(ae,$,W,J){let se={id:ae==null?null:ae,type:$,geometry:W,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if($==="Point"||$==="MultiPoint"||$==="LineString")Pt(se,W);else if($==="Polygon")Pt(se,W[0]);else if($==="MultiLineString")for(let be of W)Pt(se,be);else if($==="MultiPolygon")for(let be of W)Pt(se,be[0]);return se}function Pt(ae,$){for(let W=0;W<$.length;W+=3)ae.minX=Math.min(ae.minX,$[W]),ae.minY=Math.min(ae.minY,$[W+1]),ae.maxX=Math.max(ae.maxX,$[W]),ae.maxY=Math.max(ae.maxY,$[W+1])}function Mt(ae,$,W,J){if(!$.geometry)return;let se=$.geometry.coordinates;if(se&&se.length===0)return;let be=$.geometry.type,De=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),Re=[],_e=$.id;if(W.promoteId?_e=$.properties[W.promoteId]:W.generateId&&(_e=J||0),be==="Point")Dt(se,Re);else if(be==="MultiPoint")for(let Je of se)Dt(Je,Re);else if(be==="LineString")Ae(se,Re,De,!1);else if(be==="MultiLineString"){if(W.lineMetrics){for(let Je of se)Re=[],Ae(Je,Re,De,!1),ae.push(ot(_e,"LineString",Re,$.properties));return}Lt(se,Re,De,!1)}else if(be==="Polygon")Lt(se,Re,De,!0);else{if(be!=="MultiPolygon"){if(be==="GeometryCollection"){for(let Je of $.geometry.geometries)Mt(ae,{id:_e,geometry:Je,properties:$.properties},W,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Je of se){let pt=[];Lt(Je,pt,De,!0),Re.push(pt)}}ae.push(ot(_e,be,Re,$.properties))}function Dt(ae,$){$.push(Wt(ae[0]),Ct(ae[1]),0)}function Ae(ae,$,W,J){let se,be,De=0;for(let _e=0;_e<ae.length;_e++){let Je=Wt(ae[_e][0]),pt=Ct(ae[_e][1]);$.push(Je,pt,0),_e>0&&(De+=J?(se*pt-Je*be)/2:Math.sqrt(Math.pow(Je-se,2)+Math.pow(pt-be,2))),se=Je,be=pt}let Re=$.length-3;$[2]=1,Oe($,0,Re,W),$[Re+2]=1,$.size=Math.abs(De),$.start=0,$.end=$.size}function Lt(ae,$,W,J){for(let se=0;se<ae.length;se++){let be=[];Ae(ae[se],be,W,J),$.push(be)}}function Wt(ae){return ae/360+.5}function Ct(ae){let $=Math.sin(ae*Math.PI/180),W=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return W<0?0:W>1?1:W}function ce(ae,$,W,J,se,be,De,Re){if(J/=$,be>=(W/=$)&&De<J)return ae;if(De<W||be>=J)return null;let _e=[];for(let Je of ae){let pt=Je.geometry,Xe=Je.type,At=se===0?Je.minX:Je.minY,ur=se===0?Je.maxX:Je.maxY;if(At>=W&&ur<J){_e.push(Je);continue}if(ur<W||At>=J)continue;let Sr=[];if(Xe==="Point"||Xe==="MultiPoint")qe(pt,Sr,W,J,se);else if(Xe==="LineString")Ue(pt,Sr,W,J,se,!1,Re.lineMetrics);else if(Xe==="MultiLineString")yt(pt,Sr,W,J,se,!1);else if(Xe==="Polygon")yt(pt,Sr,W,J,se,!0);else if(Xe==="MultiPolygon")for(let An of pt){let Gr=[];yt(An,Gr,W,J,se,!0),Gr.length&&Sr.push(Gr)}if(Sr.length){if(Re.lineMetrics&&Xe==="LineString"){for(let An of Sr)_e.push(ot(Je.id,Xe,An,Je.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(Sr.length===1?(Xe="LineString",Sr=Sr[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=Sr.length===3?"Point":"MultiPoint"),_e.push(ot(Je.id,Xe,Sr,Je.tags))}}return _e.length?_e:null}function qe(ae,$,W,J,se){for(let be=0;be<ae.length;be+=3){let De=ae[be+se];De>=W&&De<=J&&mt($,ae[be],ae[be+1],ae[be+2])}}function Ue(ae,$,W,J,se,be,De){let Re=ht(ae),_e=se===0?_t:Yt,Je,pt,Xe=ae.start;for(let Gr=0;Gr<ae.length-3;Gr+=3){let Dn=ae[Gr],vn=ae[Gr+1],Di=ae[Gr+2],ii=ae[Gr+3],an=ae[Gr+4],eo=se===0?Dn:vn,Vo=se===0?ii:an,ea=!1;De&&(Je=Math.sqrt(Math.pow(Dn-ii,2)+Math.pow(vn-an,2))),eo<W?Vo>W&&(pt=_e(Re,Dn,vn,ii,an,W),De&&(Re.start=Xe+Je*pt)):eo>J?Vo<J&&(pt=_e(Re,Dn,vn,ii,an,J),De&&(Re.start=Xe+Je*pt)):mt(Re,Dn,vn,Di),Vo<W&&eo>=W&&(pt=_e(Re,Dn,vn,ii,an,W),ea=!0),Vo>J&&eo<=J&&(pt=_e(Re,Dn,vn,ii,an,J),ea=!0),!be&&ea&&(De&&(Re.end=Xe+Je*pt),$.push(Re),Re=ht(ae)),De&&(Xe+=Je)}let At=ae.length-3,ur=ae[At],Sr=ae[At+1],An=se===0?ur:Sr;An>=W&&An<=J&&mt(Re,ur,Sr,ae[At+2]),At=Re.length-3,be&&At>=3&&(Re[At]!==Re[0]||Re[At+1]!==Re[1])&&mt(Re,Re[0],Re[1],Re[2]),Re.length&&$.push(Re)}function ht(ae){let $=[];return $.size=ae.size,$.start=ae.start,$.end=ae.end,$}function yt(ae,$,W,J,se,be){for(let De of ae)Ue(De,$,W,J,se,be,!1)}function mt(ae,$,W,J){ae.push($,W,J)}function _t(ae,$,W,J,se,be){let De=(be-$)/(J-$);return mt(ae,be,W+(se-W)*De,1),De}function Yt(ae,$,W,J,se,be){let De=(be-W)/(se-W);return mt(ae,$+(J-$)*De,be,1),De}function nt(ae,$){let W=[];for(let J=0;J<ae.length;J++){let se=ae[J],be=se.type,De;if(be==="Point"||be==="MultiPoint"||be==="LineString")De=zr(se.geometry,$);else if(be==="MultiLineString"||be==="Polygon"){De=[];for(let Re of se.geometry)De.push(zr(Re,$))}else if(be==="MultiPolygon"){De=[];for(let Re of se.geometry){let _e=[];for(let Je of Re)_e.push(zr(Je,$));De.push(_e)}}W.push(ot(se.id,be,De,se.tags))}return W}function zr(ae,$){let W=[];W.size=ae.size,ae.start!==void 0&&(W.start=ae.start,W.end=ae.end);for(let J=0;J<ae.length;J+=3)W.push(ae[J]+$,ae[J+1],ae[J+2]);return W}function on(ae,$){if(ae.transformed)return ae;let W=1<<ae.z,J=ae.x,se=ae.y;for(let be of ae.features){let De=be.geometry,Re=be.type;if(be.geometry=[],Re===1)for(let _e=0;_e<De.length;_e+=2)be.geometry.push(pa(De[_e],De[_e+1],$,W,J,se));else for(let _e=0;_e<De.length;_e++){let Je=[];for(let pt=0;pt<De[_e].length;pt+=2)Je.push(pa(De[_e][pt],De[_e][pt+1],$,W,J,se));be.geometry.push(Je)}}return ae.transformed=!0,ae}function pa(ae,$,W,J,se,be){return[Math.round(W*(ae*J-se)),Math.round(W*($*J-be))]}function da(ae,$,W,J,se){let be=$===se.maxZoom?0:se.tolerance/((1<<$)*se.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:ae.length,source:null,x:W,y:J,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let Re of ae)St(De,Re,be,se);return De}function St(ae,$,W,J){let se=$.geometry,be=$.type,De=[];if(ae.minX=Math.min(ae.minX,$.minX),ae.minY=Math.min(ae.minY,$.minY),ae.maxX=Math.max(ae.maxX,$.maxX),ae.maxY=Math.max(ae.maxY,$.maxY),be==="Point"||be==="MultiPoint")for(let Re=0;Re<se.length;Re+=3)De.push(se[Re],se[Re+1]),ae.numPoints++,ae.numSimplified++;else if(be==="LineString")Vr(De,se,ae,W,!1,!1);else if(be==="MultiLineString"||be==="Polygon")for(let Re=0;Re<se.length;Re++)Vr(De,se[Re],ae,W,be==="Polygon",Re===0);else if(be==="MultiPolygon")for(let Re=0;Re<se.length;Re++){let _e=se[Re];for(let Je=0;Je<_e.length;Je++)Vr(De,_e[Je],ae,W,!0,Je===0)}if(De.length){let Re=$.tags||null;if(be==="LineString"&&J.lineMetrics){Re={};for(let Je in $.tags)Re[Je]=$.tags[Je];Re.mapbox_clip_start=se.start/se.size,Re.mapbox_clip_end=se.end/se.size}let _e={geometry:De,type:be==="Polygon"||be==="MultiPolygon"?3:be==="LineString"||be==="MultiLineString"?2:1,tags:Re};$.id!==null&&(_e.id=$.id),ae.features.push(_e)}}function Vr(ae,$,W,J,se,be){let De=J*J;if(J>0&&$.size<(se?De:J))return void(W.numPoints+=$.length/3);let Re=[];for(let _e=0;_e<$.length;_e+=3)(J===0||$[_e+2]>De)&&(W.numSimplified++,Re.push($[_e],$[_e+1])),W.numPoints++;se&&function(_e,Je){let pt=0;for(let Xe=0,At=_e.length,ur=At-2;Xe<At;ur=Xe,Xe+=2)pt+=(_e[Xe]-_e[ur])*(_e[Xe+1]+_e[ur+1]);if(pt>0===Je)for(let Xe=0,At=_e.length;Xe<At/2;Xe+=2){let ur=_e[Xe],Sr=_e[Xe+1];_e[Xe]=_e[At-2-Xe],_e[Xe+1]=_e[At-1-Xe],_e[At-2-Xe]=ur,_e[At-1-Xe]=Sr}}(Re,be),ae.push(Re)}let Er={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Qi{constructor($,W){let J=(W=this.options=function(be,De){for(let Re in De)be[Re]=De[Re];return be}(Object.create(Er),W)).debug;if(J&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let se=function(be,De){let Re=[];if(be.type==="FeatureCollection")for(let _e=0;_e<be.features.length;_e++)Mt(Re,be.features[_e],De,_e);else Mt(Re,be.type==="Feature"?be:{geometry:be},De);return Re}($,W);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=function(be,De){let Re=De.buffer/De.extent,_e=be,Je=ce(be,1,-1-Re,Re,0,-1,2,De),pt=ce(be,1,1-Re,2+Re,0,-1,2,De);return(Je||pt)&&(_e=ce(be,1,-Re,1+Re,0,-1,2,De)||[],Je&&(_e=nt(Je,1).concat(_e)),pt&&(_e=_e.concat(nt(pt,-1)))),_e}(se,W),se.length&&this.splitTile(se,0,0,0),J&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile($,W,J,se,be,De,Re){let _e=[$,W,J,se],Je=this.options,pt=Je.debug;for(;_e.length;){se=_e.pop(),J=_e.pop(),W=_e.pop(),$=_e.pop();let Xe=1<<W,At=Ta(W,J,se),ur=this.tiles[At];if(!ur&&(pt>1&&console.time("creation"),ur=this.tiles[At]=da($,W,J,se,Je),this.tileCoords.push({z:W,x:J,y:se}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,J,se,ur.numFeatures,ur.numPoints,ur.numSimplified),console.timeEnd("creation"));let ea=`z${W}`;this.stats[ea]=(this.stats[ea]||0)+1,this.total++}if(ur.source=$,be==null){if(W===Je.indexMaxZoom||ur.numPoints<=Je.indexMaxPoints)continue}else{if(W===Je.maxZoom||W===be)continue;if(be!=null){let ea=be-W;if(J!==De>>ea||se!==Re>>ea)continue}}if(ur.source=null,$.length===0)continue;pt>1&&console.time("clipping");let Sr=.5*Je.buffer/Je.extent,An=.5-Sr,Gr=.5+Sr,Dn=1+Sr,vn=null,Di=null,ii=null,an=null,eo=ce($,Xe,J-Sr,J+Gr,0,ur.minX,ur.maxX,Je),Vo=ce($,Xe,J+An,J+Dn,0,ur.minX,ur.maxX,Je);$=null,eo&&(vn=ce(eo,Xe,se-Sr,se+Gr,1,ur.minY,ur.maxY,Je),Di=ce(eo,Xe,se+An,se+Dn,1,ur.minY,ur.maxY,Je),eo=null),Vo&&(ii=ce(Vo,Xe,se-Sr,se+Gr,1,ur.minY,ur.maxY,Je),an=ce(Vo,Xe,se+An,se+Dn,1,ur.minY,ur.maxY,Je),Vo=null),pt>1&&console.timeEnd("clipping"),_e.push(vn||[],W+1,2*J,2*se),_e.push(Di||[],W+1,2*J,2*se+1),_e.push(ii||[],W+1,2*J+1,2*se),_e.push(an||[],W+1,2*J+1,2*se+1)}}getTile($,W,J){$=+$,W=+W,J=+J;let se=this.options,{extent:be,debug:De}=se;if($<0||$>24)return null;let Re=1<<$,_e=Ta($,W=W+Re&Re-1,J);if(this.tiles[_e])return on(this.tiles[_e],be);De>1&&console.log("drilling down to z%d-%d-%d",$,W,J);let Je,pt=$,Xe=W,At=J;for(;!Je&&pt>0;)pt--,Xe>>=1,At>>=1,Je=this.tiles[Ta(pt,Xe,At)];return Je&&Je.source?(De>1&&(console.log("found parent tile z%d-%d-%d",pt,Xe,At),console.time("drilling down")),this.splitTile(Je.source,pt,Xe,At,$,W,J),De>1&&console.timeEnd("drilling down"),this.tiles[_e]?on(this.tiles[_e],be):null):null}}function Ta(ae,$,W){return 32*((1<<ae)*W+$)+ae}function Le(ae,$){return $?ae.properties[$]:ae.id}function Ve(ae,$){if(ae==null)return!0;if(ae.type==="Feature")return Le(ae,$)!=null;if(ae.type==="FeatureCollection"){let W=new Set;for(let J of ae.features){let se=Le(J,$);if(se==null||W.has(se))return!1;W.add(se)}return!0}return!1}function wt(ae,$){let W=new Map;if(ae!=null)if(ae.type==="Feature")W.set(Le(ae,$),ae);else for(let J of ae.features)W.set(Le(J,$),J);return W}class Zt extends h{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile($,W){return o._(this,void 0,void 0,function*(){let J=$.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let se=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!se)return null;let be=new class{constructor(Re){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.X,this.length=Re.length,this._features=Re}feature(Re){return new class{constructor(_e){this._feature=_e,this.extent=o.X,this.type=_e.type,this.properties=_e.tags,"id"in _e&&!isNaN(_e.id)&&(this.id=parseInt(_e.id,10))}loadGeometry(){if(this._feature.type===1){let _e=[];for(let Je of this._feature.geometry)_e.push([new o.P(Je[0],Je[1])]);return _e}{let _e=[];for(let Je of this._feature.geometry){let pt=[];for(let Xe of Je)pt.push(new o.P(Xe[0],Xe[1]));_e.push(pt)}return _e}}toGeoJSON(_e,Je,pt){return A.call(this,_e,Je,pt)}}(this._features[Re])}}(se.features),De=Qe(be);return De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),{vectorTile:be,rawData:De.buffer}})}loadData($){return o._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();let J=!!($&&$.request&&$.request.collectResourceTiming)&&new o.bv($.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON($,this._pendingRequest),this._geoJSONIndex=$.cluster?new Ye(function({superclusterOptions:De,clusterProperties:Re}){if(!Re||!De)return De;let _e={},Je={},pt={accumulated:null,zoom:0},Xe={properties:null},At=Object.keys(Re);for(let ur of At){let[Sr,An]=Re[ur],Gr=o.bC(An),Dn=o.bC(typeof Sr=="string"?[Sr,["accumulated"],["get",ur]]:Sr);_e[ur]=Gr.value,Je[ur]=Dn.value}return De.map=ur=>{Xe.properties=ur;let Sr={};for(let An of At)Sr[An]=_e[An].evaluate(pt,Xe);return Sr},De.reduce=(ur,Sr)=>{Xe.properties=Sr;for(let An of At)pt.accumulated=ur[An],ur[An]=Je[An].evaluate(pt,Xe)},De}($)).load((yield this._pendingData).features):(se=yield this._pendingData,new Qi(se,$.geojsonVtOptions)),this.loaded={};let be={};if(J){let De=J.finish();De&&(be.resourceTiming={},be.resourceTiming[$.source]=JSON.parse(JSON.stringify(De)))}return be}catch(be){if(delete this._pendingRequest,o.bB(be))return{abandoned:!0};throw be}var se})}getData(){return o._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile($){let W=this.loaded;return W&&W[$.uid]?super.reloadTile($):this.loadTile($)}loadAndProcessGeoJSON($,W){return o._(this,void 0,void 0,function*(){let J=yield this.loadGeoJSON($,W);if(delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(T(J,!0),$.filter){let se=o.bC($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(De=>`${De.key}: ${De.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(De=>se.value.evaluate({zoom:0},De))}}return J})}loadGeoJSON($,W){return o._(this,void 0,void 0,function*(){let{promoteId:J}=$;if($.request){let se=yield o.h($.request,W);return this._dataUpdateable=Ve(se.data,J)?wt(se.data,J):void 0,se.data}if(typeof $.data=="string")try{let se=JSON.parse($.data);return this._dataUpdateable=Ve(se,J)?wt(se,J):void 0,se}catch(se){throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`)}if(!$.dataDiff)throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${$.source}`);return function(se,be,De){var Re,_e,Je,pt;if(be.removeAll&&se.clear(),be.remove)for(let Xe of be.remove)se.delete(Xe);if(be.add)for(let Xe of be.add){let At=Le(Xe,De);At!=null&&se.set(At,Xe)}if(be.update)for(let Xe of be.update){let At=se.get(Xe.id);if(At==null)continue;let ur=!Xe.removeAllProperties&&(((Re=Xe.removeProperties)===null||Re===void 0?void 0:Re.length)>0||((_e=Xe.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||ur)&&(At=Object.assign({},At),se.set(Xe.id,At),ur&&(At.properties=Object.assign({},At.properties))),Xe.newGeometry&&(At.geometry=Xe.newGeometry),Xe.removeAllProperties)At.properties={};else if(((Je=Xe.removeProperties)===null||Je===void 0?void 0:Je.length)>0)for(let Sr of Xe.removeProperties)Object.prototype.hasOwnProperty.call(At.properties,Sr)&&delete At.properties[Sr];if(((pt=Xe.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0)for(let{key:Sr,value:An}of Xe.addOrUpdateProperties)At.properties[Sr]=An}}(this._dataUpdateable,$.dataDiff,J),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource($){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom($){return this._geoJSONIndex.getClusterExpansionZoom($.clusterId)}getClusterChildren($){return this._geoJSONIndex.getChildren($.clusterId)}getClusterLeaves($){return this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset)}}class Ht{constructor($){this.self=$,this.actor=new o.F($),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,J)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=J},this.self.addProtocol=o.bi,this.self.removeProtocol=o.bj,this.self.registerRTLTextPlugin=W=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,J)=>this._getDEMWorkerSource(W,J.source).loadTile(J)),this.actor.registerMessageHandler("RDT",(W,J)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,J.source).removeTile(J)})),this.actor.registerMessageHandler("GCEZ",(W,J)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(W,J.type,J.source).getClusterExpansionZoom(J)})),this.actor.registerMessageHandler("GCC",(W,J)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(W,J.type,J.source).getClusterChildren(J)})),this.actor.registerMessageHandler("GCL",(W,J)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(W,J.type,J.source).getClusterLeaves(J)})),this.actor.registerMessageHandler("LD",(W,J)=>this._getWorkerSource(W,J.type,J.source).loadData(J)),this.actor.registerMessageHandler("GD",(W,J)=>this._getWorkerSource(W,J.type,J.source).getData()),this.actor.registerMessageHandler("LT",(W,J)=>this._getWorkerSource(W,J.type,J.source).loadTile(J)),this.actor.registerMessageHandler("RT",(W,J)=>this._getWorkerSource(W,J.type,J.source).reloadTile(J)),this.actor.registerMessageHandler("AT",(W,J)=>this._getWorkerSource(W,J.type,J.source).abortTile(J)),this.actor.registerMessageHandler("RMT",(W,J)=>this._getWorkerSource(W,J.type,J.source).removeTile(J)),this.actor.registerMessageHandler("RS",(W,J)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][J.type]||!this.workerSources[W][J.type][J.source])return;let se=this.workerSources[W][J.type][J.source];delete this.workerSources[W][J.type][J.source],se.removeSource!==void 0&&se.removeSource(J)})),this.actor.registerMessageHandler("RM",W=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,J)=>o._(this,void 0,void 0,function*(){this.referrer=J})),this.actor.registerMessageHandler("SRPS",(W,J)=>this._syncRTLPluginState(W,J)),this.actor.registerMessageHandler("IS",(W,J)=>o._(this,void 0,void 0,function*(){this.self.importScripts(J)})),this.actor.registerMessageHandler("SI",(W,J)=>this._setImages(W,J)),this.actor.registerMessageHandler("UL",(W,J)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(J.layers,J.removedIds)})),this.actor.registerMessageHandler("SL",(W,J)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(J)}))}_setImages($,W){return o._(this,void 0,void 0,function*(){this.availableImages[$]=W;for(let J in this.workerSources[$]){let se=this.workerSources[$][J];for(let be in se)se[be].availableImages=W}})}_syncRTLPluginState($,W){return o._(this,void 0,void 0,function*(){if(o.bD.isParsed())return o.bD.getState();if(W.pluginStatus!=="loading")return o.bD.setState(W),W;let J=W.pluginURL;if(this.self.importScripts(J),o.bD.isParsed()){let se={pluginStatus:"loaded",pluginURL:J};return o.bD.setState(se),se}throw o.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${J}`)})}_getAvailableImages($){let W=this.availableImages[$];return W||(W=[]),W}_getLayerIndex($){let W=this.layerIndexes[$];return W||(W=this.layerIndexes[$]=new i),W}_getWorkerSource($,W,J){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][W]||(this.workerSources[$][W]={}),!this.workerSources[$][W][J]){let se={sendAsync:(be,De)=>(be.targetMapId=$,this.actor.sendAsync(be,De))};switch(W){case"vector":this.workerSources[$][W][J]=new h(se,this._getLayerIndex($),this._getAvailableImages($));break;case"geojson":this.workerSources[$][W][J]=new Zt(se,this._getLayerIndex($),this._getAvailableImages($));break;default:this.workerSources[$][W][J]=new this.externalWorkerSourceTypes[W](se,this._getLayerIndex($),this._getAvailableImages($));}}return this.workerSources[$][W][J]}_getDEMWorkerSource($,W){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][W]||(this.demWorkerSources[$][W]=new g),this.demWorkerSources[$][W]}}return o.i(self)&&(self.worker=new Ht(self)),Ht}),r("index",["exports","./shared"],function(o,i){"use strict";var a="4.7.1";let u,p,h={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:E=>new Promise((s,d)=>{let v=requestAnimationFrame(s);E.signal.addEventListener("abort",()=>{cancelAnimationFrame(v),d(i.c())})}),getImageData(E,s=0){return this.getImageCanvasContext(E).getImageData(-s,-s,E.width+2*s,E.height+2*s)},getImageCanvasContext(E){let s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=E.width,s.height=E.height,d.drawImage(E,0,0,E.width,E.height),d},resolveURL:E=>(u||(u=document.createElement("a")),u.href=E,u.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(p==null&&(p=matchMedia("(prefers-reduced-motion: reduce)")),p.matches)}};class g{static testProp(s){if(!g.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in g.docStyle)return s[d];return s[0]}static create(s,d,v){let y=window.document.createElement(s);return d!==void 0&&(y.className=d),v&&v.appendChild(y),y}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(s,d){s.style[g.transformProp]=d}static addEventListener(s,d,v,y={}){s.addEventListener(d,v,"passive"in y?y:y.capture)}static removeEventListener(s,d,v,y={}){s.removeEventListener(d,v,"passive"in y?y:y.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static getScale(s){let d=s.getBoundingClientRect();return{x:d.width/s.offsetWidth||1,y:d.height/s.offsetHeight||1,boundingClientRect:d}}static getPoint(s,d,v){let y=d.boundingClientRect;return new i.P((v.clientX-y.left)/d.x-s.clientLeft,(v.clientY-y.top)/d.y-s.clientTop)}static mousePos(s,d){let v=g.getScale(s);return g.getPoint(s,v,d)}static touchPos(s,d){let v=[],y=g.getScale(s);for(let w=0;w<d.length;w++)v.push(g.getPoint(s,y,d[w]));return v}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}g.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);let x={supported:!1,testSupport:function(E){!A&&T&&(L?P(E):b=E)}},b,T,A=!1,L=!1;function P(E){let s=E.createTexture();E.bindTexture(E.TEXTURE_2D,s);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,T),E.isContextLost())return;x.supported=!0}catch(d){}E.deleteTexture(s),A=!0}var k;typeof document!="undefined"&&(T=document.createElement("img"),T.onload=()=>{b&&P(b),b=null,L=!0},T.onerror=()=>{A=!0,b=null},T.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(E){let s,d,v,y;E.resetRequestQueue=()=>{s=[],d=0,v=0,y={}},E.addThrottleControl=R=>{let F=v++;return y[F]=R,F},E.removeThrottleControl=R=>{delete y[R],D()},E.getImage=(R,F,V=!0)=>new Promise((G,Q)=>{x.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),i.e(R,{type:"image"}),s.push({abortController:F,requestParameters:R,supportImageRefresh:V,state:"queued",onError:ie=>{Q(ie)},onSuccess:ie=>{G(ie)}}),D()});let w=R=>i._(this,void 0,void 0,function*(){R.state="running";let{requestParameters:F,supportImageRefresh:V,onError:G,onSuccess:Q,abortController:ie}=R,le=V===!1&&!i.i(self)&&!i.g(F.url)&&(!F.headers||Object.keys(F.headers).reduce((xe,Ie)=>xe&&Ie==="accept",!0));d++;let he=le?O(F,ie):i.m(F,ie);try{let xe=yield he;delete R.abortController,R.state="completed",xe.data instanceof HTMLImageElement||i.b(xe.data)?Q(xe):xe.data&&Q({data:yield(ye=xe.data,typeof createImageBitmap=="function"?i.d(ye):i.f(ye)),cacheControl:xe.cacheControl,expires:xe.expires})}catch(xe){delete R.abortController,G(xe)}finally{d--,D()}var ye}),D=()=>{let R=(()=>{for(let F of Object.keys(y))if(y[F]())return!0;return!1})()?i.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:i.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=d;F<R&&s.length>0;F++){let V=s.shift();V.abortController.signal.aborted?F--:w(V)}},O=(R,F)=>new Promise((V,G)=>{let Q=new Image,ie=R.url,le=R.credentials;le&&le==="include"?Q.crossOrigin="use-credentials":(le&&le==="same-origin"||!i.s(ie))&&(Q.crossOrigin="anonymous"),F.signal.addEventListener("abort",()=>{Q.src="",G(i.c())}),Q.fetchPriority="high",Q.onload=()=>{Q.onerror=Q.onload=null,V({data:Q})},Q.onerror=()=>{Q.onerror=Q.onload=null,F.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Q.src=ie})}(k||(k={})),k.resetRequestQueue();class q{constructor(s){this._transformRequestFn=s}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function U(E){var s=new i.A(3);return s[0]=E[0],s[1]=E[1],s[2]=E[2],s}var H,X=function(E,s,d){return E[0]=s[0]-d[0],E[1]=s[1]-d[1],E[2]=s[2]-d[2],E};H=new i.A(3),i.A!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0);var ee=function(E){var s=E[0],d=E[1];return s*s+d*d};function ne(E){let s=[];if(typeof E=="string")s.push({id:"default",url:E});else if(E&&E.length>0){let d=[];for(let{id:v,url:y}of E){let w=`${v}${y}`;d.indexOf(w)===-1&&(d.push(w),s.push({id:v,url:y}))}}return s}function me(E,s,d){let v=E.split("?");return v[0]+=`${s}${d}`,v.join("?")}(function(){var E=new i.A(2);i.A!=Float32Array&&(E[0]=0,E[1]=0)})();class ue{constructor(s,d,v,y){this.context=s,this.format=v,this.texture=s.gl.createTexture(),this.update(d,y)}update(s,d,v){let{width:y,height:w}=s,D=!(this.size&&this.size[0]===y&&this.size[1]===w||v),{context:O}=this,{gl:R}=O;if(this.useMipmap=!!(d&&d.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!d||d.premultiply!==!1)),D)this.size=[y,w],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||i.b(s)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,s):R.texImage2D(R.TEXTURE_2D,0,this.format,y,w,0,this.format,R.UNSIGNED_BYTE,s.data);else{let{x:F,y:V}=v||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||i.b(s)?R.texSubImage2D(R.TEXTURE_2D,0,F,V,R.RGBA,R.UNSIGNED_BYTE,s):R.texSubImage2D(R.TEXTURE_2D,0,F,V,y,w,R.RGBA,R.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(s,d,v){let{context:y}=this,{gl:w}=y;w.bindTexture(w.TEXTURE_2D,this.texture),v!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=w.LINEAR),s!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,v||s),this.filter=s),d!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,d),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Me(E){let{userImage:s}=E;return!!(s&&s.render&&s.render())&&(E.data.replace(new Uint8Array(s.data.buffer)),!0)}class ke extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(s){let d=this.images[s];if(d&&!d.data&&d.spriteData){let v=d.spriteData;d.data=new i.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let v=!0,y=d.data||d.spriteData;return this._validateStretch(d.stretchX,y&&y.width)||(this.fire(new i.j(new Error(`Image "${s}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,y&&y.height)||(this.fire(new i.j(new Error(`Image "${s}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new i.j(new Error(`Image "${s}" has invalid "content" value`))),v=!1),v}_validateStretch(s,d){if(!s)return!0;let v=0;for(let y of s){if(y[0]<v||y[1]<y[0]||d<y[1])return!1;v=y[1]}return!0}_validateContent(s,d){if(!s)return!0;if(s.length!==4)return!1;let v=d.spriteData,y=v&&v.width||d.data.width,w=v&&v.height||d.data.height;return!(s[0]<0||y<s[0]||s[1]<0||w<s[1]||s[2]<0||y<s[2]||s[3]<0||w<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,v=!0){let y=this.getImage(s);if(v&&(y.data.width!==d.data.width||y.data.height!==d.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=y.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){let d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((d,v)=>{let y=!0;if(!this.isLoaded())for(let w of s)this.images[w]||(y=!1);this.isLoaded()||y?d(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:d})})}_getImagesForIds(s){let d={};for(let v of s){let y=this.getImage(v);y||(this.fire(new i.k("styleimagemissing",{id:v})),y=this.getImage(v)),y?d[v]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:i.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){let{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){let d=this.patterns[s],v=this.getImage(s);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{let y={w:v.data.width+2,h:v.data.height+2,x:0,y:0},w=new i.I(y,v);this.patterns[s]={bin:y,position:w}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ue(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let w in this.patterns)s.push(this.patterns[w].bin);let{w:d,h:v}=i.p(s),y=this.atlasImage;y.resize({width:d||1,height:v||1});for(let w in this.patterns){let{bin:D}=this.patterns[w],O=D.x+1,R=D.y+1,F=this.getImage(w).data,V=F.width,G=F.height;i.R.copy(F,y,{x:0,y:0},{x:O,y:R},{width:V,height:G}),i.R.copy(F,y,{x:0,y:G-1},{x:O,y:R-1},{width:V,height:1}),i.R.copy(F,y,{x:0,y:0},{x:O,y:R+G},{width:V,height:1}),i.R.copy(F,y,{x:V-1,y:0},{x:O-1,y:R},{width:1,height:G}),i.R.copy(F,y,{x:0,y:0},{x:O+V,y:R},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;let v=this.getImage(d);v||i.w(`Image with ID: "${d}" was not found`),Me(v)&&this.updateImage(d,v)}}}let Te=1e20;function Ee(E,s,d,v,y,w,D,O,R){for(let F=s;F<s+v;F++)Ze(E,d*w+F,w,y,D,O,R);for(let F=d;F<d+y;F++)Ze(E,F*w+s,1,v,D,O,R)}function Ze(E,s,d,v,y,w,D){w[0]=0,D[0]=-Te,D[1]=Te,y[0]=E[s];for(let O=1,R=0,F=0;O<v;O++){y[O]=E[s+O*d];let V=O*O;do{let G=w[R];F=(y[O]-y[G]+V-G*G)/(O-G)/2}while(F<=D[R]&&--R>-1);R++,w[R]=O,D[R]=F,D[R+1]=Te}for(let O=0,R=0;O<v;O++){for(;D[R+1]<O;)R++;let F=w[R],V=O-F;E[s+O*d]=y[F]+V*V}}class Qe{constructor(s,d){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return i._(this,void 0,void 0,function*(){let d=[];for(let w in s)for(let D of s[w])d.push(this._getAndCacheGlyphsPromise(w,D));let v=yield Promise.all(d),y={};for(let{stack:w,id:D,glyph:O}of v)y[w]||(y[w]={}),y[w][D]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return y})}_getAndCacheGlyphsPromise(s,d){return i._(this,void 0,void 0,function*(){let v=this.entries[s];v||(v=this.entries[s]={glyphs:{},requests:{},ranges:{}});let y=v.glyphs[d];if(y!==void 0)return{stack:s,id:d,glyph:y};if(y=this._tinySDF(v,s,d),y)return v.glyphs[d]=y,{stack:s,id:d,glyph:y};let w=Math.floor(d/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[w])return{stack:s,id:d,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[w]){let O=Qe.loadGlyphRange(s,w,this.url,this.requestManager);v.requests[w]=O}let D=yield v.requests[w];for(let O in D)this._doesCharSupportLocalGlyph(+O)||(v.glyphs[+O]=D[+O]);return v.ranges[w]=!0,{stack:s,id:d,glyph:D[d]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))}_tinySDF(s,d,v){let y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(v))return;let w=s.tinySDF;if(!w){let O="400";/bold/i.test(d)?O="900":/medium/i.test(d)?O="500":/light/i.test(d)&&(O="200"),w=s.tinySDF=new Qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:O})}let D=w.draw(String.fromCharCode(v));return{id:v,bitmap:new i.o({width:D.width||60,height:D.height||60},D.data),metrics:{width:D.glyphWidth/2||24,height:D.glyphHeight/2||24,left:D.glyphLeft/2+.5||0,top:D.glyphTop/2-27.5||-8,advance:D.glyphAdvance/2||24,isDoubleResolution:!0}}}}Qe.loadGlyphRange=function(E,s,d,v){return i._(this,void 0,void 0,function*(){let y=256*s,w=y+255,D=v.transformRequest(d.replace("{fontstack}",E).replace("{range}",`${y}-${w}`),"Glyphs"),O=yield i.l(D,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${s}, ${y}-${w}`);let R={};for(let F of i.n(O.data))R[F.id]=F;return R})},Qe.TinySDF=class{constructor({fontSize:E=24,buffer:s=3,radius:d=8,cutoff:v=.25,fontFamily:y="sans-serif",fontWeight:w="normal",fontStyle:D="normal"}={}){this.buffer=s,this.cutoff=v,this.radius=d;let O=this.size=E+4*s,R=this._createCanvas(O),F=this.ctx=R.getContext("2d",{willReadFrequently:!0});F.font=`${D} ${w} ${E}px ${y}`,F.textBaseline="alphabetic",F.textAlign="left",F.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(E){let s=document.createElement("canvas");return s.width=s.height=E,s}draw(E){let{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:y,actualBoundingBoxRight:w}=this.ctx.measureText(E),D=Math.ceil(d),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-y))),R=Math.min(this.size-this.buffer,D+Math.ceil(v)),F=O+2*this.buffer,V=R+2*this.buffer,G=Math.max(F*V,0),Q=new Uint8ClampedArray(G),ie={data:Q,width:F,height:V,glyphWidth:O,glyphHeight:R,glyphTop:D,glyphLeft:0,glyphAdvance:s};if(O===0||R===0)return ie;let{ctx:le,buffer:he,gridInner:ye,gridOuter:xe}=this;le.clearRect(he,he,O,R),le.fillText(E,he,he+D);let Ie=le.getImageData(he,he,O,R);xe.fill(Te,0,G),ye.fill(0,0,G);for(let fe=0;fe<R;fe++)for(let Pe=0;Pe<O;Pe++){let Be=Ie.data[4*(fe*O+Pe)+3]/255;if(Be===0)continue;let Ke=(fe+he)*F+Pe+he;if(Be===1)xe[Ke]=0,ye[Ke]=Te;else{let dt=.5-Be;xe[Ke]=dt>0?dt*dt:0,ye[Ke]=dt<0?dt*dt:0}}Ee(xe,0,0,F,V,F,this.f,this.v,this.z),Ee(ye,he,he,O,R,F,this.f,this.v,this.z);for(let fe=0;fe<G;fe++){let Pe=Math.sqrt(xe[fe])-Math.sqrt(ye[fe]);Q[fe]=Math.round(255-255*(Pe/this.radius+this.cutoff))}return ie}};class Fe{constructor(){this.specification=i.v.light.position}possiblyEvaluate(s,d){return i.x(s.expression.evaluate(d))}interpolate(s,d,v){return{x:i.y.number(s.x,d.x,v),y:i.y.number(s.y,d.y,v),z:i.y.number(s.z,d.z,v)}}}let ze;class Ne extends i.E{constructor(s){super(),ze=ze||new i.q({anchor:new i.D(i.v.light.anchor),position:new Fe,color:new i.D(i.v.light.color),intensity:new i.D(i.v.light.intensity)}),this._transitionable=new i.T(ze),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(i.r,s,d))for(let v in s){let y=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),y):this._transitionable.setValue(v,y)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v){return(!v||v.validate!==!1)&&i.t(this,s.call(i.u,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v}))}}let et=new i.q({"sky-color":new i.D(i.v.sky["sky-color"]),"horizon-color":new i.D(i.v.sky["horizon-color"]),"fog-color":new i.D(i.v.sky["fog-color"]),"fog-ground-blend":new i.D(i.v.sky["fog-ground-blend"]),"horizon-fog-blend":new i.D(i.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new i.D(i.v.sky["sky-horizon-blend"]),"atmosphere-blend":new i.D(i.v.sky["atmosphere-blend"])});class st extends i.E{constructor(s){super(),this._transitionable=new i.T(et),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.z(0))}setSky(s,d={}){if(!this._validate(i.B,s,d)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let v in s){let y=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),y):this._transitionable.setValue(v,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v={}){return(v==null?void 0:v.validate)!==!1&&i.t(this,s.call(i.u,i.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class ft{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){let v=s.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(s,d)),this.dashEntry[v]}getDashRanges(s,d,v){let y=[],w=s.length%2==1?-s[s.length-1]*v:0,D=s[0]*v,O=!0;y.push({left:w,right:D,isDash:O,zeroLength:s[0]===0});let R=s[0];for(let F=1;F<s.length;F++){O=!O;let V=s[F];w=R*v,R+=V,D=R*v,y.push({left:w,right:D,isDash:O,zeroLength:V===0})}return y}addRoundDash(s,d,v){let y=d/2;for(let w=-v;w<=v;w++){let D=this.width*(this.nextRow+v+w),O=0,R=s[O];for(let F=0;F<this.width;F++){F/R.right>1&&(R=s[++O]);let V=Math.abs(F-R.left),G=Math.abs(F-R.right),Q=Math.min(V,G),ie,le=w/v*(y+1);if(R.isDash){let he=y-Math.abs(le);ie=Math.sqrt(Q*Q+he*he)}else ie=y-Math.sqrt(Q*Q+le*le);this.data[D+F]=Math.max(0,Math.min(255,ie+128))}}}addRegularDash(s){for(let O=s.length-1;O>=0;--O){let R=s[O],F=s[O+1];R.zeroLength?s.splice(O,1):F&&F.isDash===R.isDash&&(F.left=R.left,s.splice(O,1))}let d=s[0],v=s[s.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);let y=this.width*this.nextRow,w=0,D=s[w];for(let O=0;O<this.width;O++){O/D.right>1&&(D=s[++w]);let R=Math.abs(O-D.left),F=Math.abs(O-D.right),V=Math.min(R,F);this.data[y+O]=Math.max(0,Math.min(255,(D.isDash?V:-V)+128))}}addDash(s,d){let v=d?7:0,y=2*v+1;if(this.nextRow+y>this.height)return i.w("LineAtlas out of space"),null;let w=0;for(let O=0;O<s.length;O++)w+=s[O];if(w!==0){let O=this.width/w,R=this.getDashRanges(s,this.width,O);d?this.addRoundDash(R,O,v):this.addRegularDash(R)}let D={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:w};return this.nextRow+=y,this.dirty=!0,D}bind(s){let d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}let Ye="maplibre_preloaded_worker_pool";class tt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new Worker(i.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ye]}numActive(){return Object.keys(this.active).length}}let lt=Math.floor(h.hardwareConcurrency/2),je,ge;function We(){return je||(je=new tt),je}tt.workerCount=i.C(globalThis)?Math.max(Math.min(lt,3),1):1;class Oe{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=d;let v=this.workerPool.acquire(d);for(let y=0;y<v.length;y++){let w=new i.F(v[y],d);w.name=`Worker ${y}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d){let v=[];for(let y of this.actors)v.push(y.sendAsync({type:s,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,d){for(let v of this.actors)v.registerMessageHandler(s,d)}}function at(){return ge||(ge=new Oe(We(),i.G),ge.registerMessageHandler("GR",(E,s,d)=>i.m(s,d))),ge}function ot(E,s){let d=i.H();return i.J(d,d,[1,1,0]),i.K(d,d,[.5*E.width,.5*E.height,1]),i.L(d,d,E.calculatePosMatrix(s.toUnwrapped()))}function Pt(E,s,d,v,y,w){let D=function(G,Q,ie){if(G)for(let le of G){let he=Q[le];if(he&&he.source===ie&&he.type==="fill-extrusion")return!0}else for(let le in Q){let he=Q[le];if(he.source===ie&&he.type==="fill-extrusion")return!0}return!1}(y&&y.layers,s,E.id),O=w.maxPitchScaleFactor(),R=E.tilesIn(v,O,D);R.sort(Mt);let F=[];for(let G of R)F.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(s,d,E._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,y,w,O,ot(E.transform,G.tileID))});let V=function(G){let Q={},ie={};for(let le of G){let he=le.queryResults,ye=le.wrappedTileID,xe=ie[ye]=ie[ye]||{};for(let Ie in he){let fe=he[Ie],Pe=xe[Ie]=xe[Ie]||{},Be=Q[Ie]=Q[Ie]||[];for(let Ke of fe)Pe[Ke.featureIndex]||(Pe[Ke.featureIndex]=!0,Be.push(Ke))}}return Q}(F);for(let G in V)V[G].forEach(Q=>{let ie=Q.feature,le=E.getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=le});return V}function Mt(E,s){let d=E.tileID,v=s.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function Dt(E,s,d){return i._(this,void 0,void 0,function*(){let v=E;if(E.url?v=(yield i.h(s.transformRequest(E.url,"Source"),d)).data:yield h.frameAsync(d),!v)return null;let y=i.M(i.e(v,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(y.vectorLayerIds=v.vector_layers.map(w=>w.id)),y})}class Ae{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof i.N?new i.N(s.lng,s.lat):i.N.convert(s),this}setSouthWest(s){return this._sw=s instanceof i.N?new i.N(s.lng,s.lat):i.N.convert(s),this}extend(s){let d=this._sw,v=this._ne,y,w;if(s instanceof i.N)y=s,w=s;else{if(!(s instanceof Ae))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Ae.convert(s)):this.extend(i.N.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(i.N.convert(s)):this;if(y=s._sw,w=s._ne,!y||!w)return this}return d||v?(d.lng=Math.min(y.lng,d.lng),d.lat=Math.min(y.lat,d.lat),v.lng=Math.max(w.lng,v.lng),v.lat=Math.max(w.lat,v.lat)):(this._sw=new i.N(y.lng,y.lat),this._ne=new i.N(w.lng,w.lat)),this}getCenter(){return new i.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new i.N(this.getWest(),this.getNorth())}getSouthEast(){return new i.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:d,lat:v}=i.N.convert(s),y=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&y}static convert(s){return s instanceof Ae?s:s&&new Ae(s)}static fromLngLat(s,d=0){let v=360*d/40075017,y=v/Math.cos(Math.PI/180*s.lat);return new Ae(new i.N(s.lng-y,s.lat-v),new i.N(s.lng+y,s.lat+v))}adjustAntiMeridian(){let s=new i.N(this._sw.lng,this._sw.lat),d=new i.N(this._ne.lng,this._ne.lat);return new Ae(s,s.lng>d.lng?new i.N(d.lng+360,d.lat):d)}}class Lt{constructor(s,d,v){this.bounds=Ae.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let d=Math.pow(2,s.z),v=Math.floor(i.O(this.bounds.getWest())*d),y=Math.floor(i.Q(this.bounds.getNorth())*d),w=Math.ceil(i.O(this.bounds.getEast())*d),D=Math.ceil(i.Q(this.bounds.getSouth())*d);return s.x>=v&&s.x<w&&s.y>=y&&s.y<D}}class Wt extends i.E{constructor(s,d,v,y){if(super(),this.id=s,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.e(this,i.M(d,["url","scheme","tileSize","promoteId"])),this._options=i.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield Dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(i.e(this,s),s.bounds&&(this.tileBounds=new Lt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new i.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new i.j(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return i.e({},this._options)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((w,D)=>{s.reloadPromise={resolve:w,reject:D}})}else s.actor=this.dispatcher.getActor(),y="LT";s.abortController=new AbortController;try{let w=yield s.actor.sendAsync({type:y,data:v},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,w)}catch(w){if(delete s.abortController,s.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,d){if(d&&d.resourceTiming&&(s.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&s.setExpiryData(d),s.loadVectorData(d,this.map.painter),s.reloadPromise){let v=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(v.resolve).catch(v.reject)}}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ct extends i.E{constructor(s,d,v,y){super(),this.id=s,this.dispatcher=v,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.e({type:"raster"},d),i.e(this,i.M(d,["url","scheme","tileSize"]))}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield Dt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(i.e(this,s),s.bounds&&(this.tileBounds=new Lt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new i.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new i.j(s))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return i.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let v=yield k.getImage(this.map._requestManager.transformRequest(d,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&s.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});let y=this.map.painter.context,w=y.gl,D=v.data;s.texture=this.map.painter.getTileTexture(D.width),s.texture?s.texture.update(D,{useMipmap:!0}):(s.texture=new ue(y,D,w.RGBA,{useMipmap:!0}),s.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(v){if(delete s.abortController,s.aborted)s.state="unloaded";else if(v)throw s.state="errored",v}})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class ce extends Ct{constructor(s,d,v,y){super(s,d,v,y),this.type="raster-dem",this.maxzoom=22,this._options=i.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let y=yield k.getImage(v,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(y&&y.data){let w=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&s.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});let D=i.b(w)&&i.U()?w:yield this.readImageNow(w),O={type:this.type,uid:s.uid,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let R=yield s.actor.sendAsync({type:"LDT",data:O});s.dem=R,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(y){if(delete s.abortController,s.aborted)s.state="unloaded";else if(y)throw s.state="errored",y}})}readImageNow(s){return i._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&i.V()){let d=s.width+2,v=s.height+2;try{return new i.R({width:d,height:v},(yield i.W(s,-1,-1,d,v)))}catch(y){}}return h.getImageData(s,1)})}_getNeighboringTiles(s){let d=s.canonical,v=Math.pow(2,d.z),y=(d.x-1+v)%v,w=d.x===0?s.wrap-1:s.wrap,D=(d.x+1+v)%v,O=d.x+1===v?s.wrap+1:s.wrap,R={};return R[new i.S(s.overscaledZ,w,d.z,y,d.y).key]={backfilled:!1},R[new i.S(s.overscaledZ,O,d.z,D,d.y).key]={backfilled:!1},d.y>0&&(R[new i.S(s.overscaledZ,w,d.z,y,d.y-1).key]={backfilled:!1},R[new i.S(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},R[new i.S(s.overscaledZ,O,d.z,D,d.y-1).key]={backfilled:!1}),d.y+1<v&&(R[new i.S(s.overscaledZ,w,d.z,y,d.y+1).key]={backfilled:!1},R[new i.S(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},R[new i.S(s.overscaledZ,O,d.z,D,d.y+1).key]={backfilled:!1}),R}unloadTile(s){return i._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class qe extends i.E{constructor(s,d,v,y){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(y),this._data=d.data,this._options=i.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;let w=i.X/this.tileSize;d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&i.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=i.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*w,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*w,extent:i.X,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:i.X,radius:(d.clusterRadius||50)*w,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return i._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return i._(this,void 0,void 0,function*(){let s=i.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:d,offset:v}})}_updateWorkerData(s){return i._(this,void 0,void 0,function*(){let d=i.e({type:this.type},this.workerOptions);s?d.dataDiff=s:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(h.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new i.k("dataloading",{dataType:"source"}));try{let v=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new i.k("dataabort",{dataType:"source"}));let y=null;v.resourceTiming&&v.resourceTiming[this.id]&&(y=v.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&i.e(w,{resourceTiming:y}),this.fire(new i.k("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new i.k("data",Object.assign(Object.assign({},w),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new i.k("dataabort",{dataType:"source"}));this.fire(new i.j(v))}})}loaded(){return this._pendingLoads===0}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.actor?"RT":"LT";s.actor=this.actor;let v={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.abortController=new AbortController;let y=yield this.actor.sendAsync({type:d,data:v},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(y,this.map.painter,d==="RT")})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return i.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Ue=i.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ht extends i.E{constructor(s,d,v,y){super(),this.id=s,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=d}load(s){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let d=yield k.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,s&&(this.coordinates=s),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new i.j(d))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let d=s.map(i.Z.fromLngLat);this.tileID=function(y){let w=1/0,D=1/0,O=-1/0,R=-1/0;for(let Q of y)w=Math.min(w,Q.x),D=Math.min(D,Q.y),O=Math.max(O,Q.x),R=Math.max(R,Q.y);let F=Math.max(O-w,R-D),V=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),G=Math.pow(2,V);return new i.a1(V,Math.floor((w+O)/2*G),Math.floor((D+R)/2*G))}(d),this.minzoom=this.maxzoom=this.tileID.z;let v=d.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new i.$,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,i.X,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,i.X),this._boundsArray.emplaceBack(v[2].x,v[2].y,i.X,i.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Ue.members)),this.boundsSegments||(this.boundsSegments=i.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ue(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,v=!0)}v&&this.fire(new i.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return i._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class yt extends ht{constructor(s,d,v,y){super(s,d,v,y),this.roundZoom=!0,this.type="video",this.options=d}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{let d=yield i.a3(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new i.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new i.j(new i.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Ue.members)),this.boundsSegments||(this.boundsSegments=i.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new ue(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,v=!0)}v&&this.fire(new i.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class mt extends ht{constructor(s,d,v,y){super(s,d,v,y),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(D=>typeof D!="number"))||this.fire(new i.j(new i.a2(`sources.${s}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new i.j(new i.a2(`sources.${s}`,null,"missing required property \"coordinates\""))),d.animate&&typeof d.animate!="boolean"&&this.fire(new i.j(new i.a2(`sources.${s}`,null,"optional \"animate\" property must be a boolean value"))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new i.j(new i.a2(`sources.${s}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new i.j(new i.a2(`sources.${s}`,null,"missing required property \"canvas\""))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return i._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let d=this.map.painter.context,v=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Ue.members)),this.boundsSegments||(this.boundsSegments=i.a0.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ue(d,this.canvas,v.RGBA,{premultiply:!0});let y=!1;for(let w in this.tiles){let D=this.tiles[w];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,y=!0)}y&&this.fire(new i.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let _t={},Yt=E=>{switch(E){case"geojson":return qe;case"image":return ht;case"raster":return Ct;case"raster-dem":return ce;case"vector":return Wt;case"video":return yt;case"canvas":return mt;}return _t[E]},nt="RTLPluginLoaded";class zr extends i.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=at()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return i._(this,arguments,void 0,function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=h.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return i._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new i.k(nt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let on=null;function pa(){return on||(on=new zr),on}class da{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=i.a4(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(y,w){let D={};if(!w)return D;for(let O of y){let R=O.layerIds.map(F=>w.getLayer(F)).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(F=>R.filter(V=>V.id===F)[0]));for(let F of R)D[F.id]=O}}return D}(s.buckets,d.style),this.hasSymbolBuckets=!1;for(let y in this.buckets){let w=this.buckets[y];if(w instanceof i.a6){if(this.hasSymbolBuckets=!0,!v)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let y in this.buckets){let w=this.buckets[y];if(w instanceof i.a6&&w.hasRTLText){this.hasRTLText=!0,pa().lazyLoad();break}}this.queryPadding=0;for(let y in this.buckets){let w=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(y).queryRadius(w))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new i.a5}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let v in this.buckets){let y=this.buckets[v];y.uploadPending()&&y.upload(s)}let d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ue(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ue(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,v,y,w,D,O,R,F,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:D,tileSize:this.tileSize,pixelPosMatrix:V,transform:R,params:O,queryPadding:this.queryPadding*F},s,d,v):{}}querySourceFeatures(s,d){let v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;let y=v.loadVTLayers(),w=d&&d.sourceLayer?d.sourceLayer:"",D=y._geojsonTileLayer||y[w];if(!D)return;let O=i.a7(d&&d.filter),{z:R,x:F,y:V}=this.tileID.canonical,G={z:R,x:F,y:V};for(let Q=0;Q<D.length;Q++){let ie=D.feature(Q);if(O.needGeometry){let ye=i.a8(ie,!0);if(!O.filter(new i.z(this.tileID.overscaledZ),ye,this.tileID.canonical))continue}else if(!O.filter(new i.z(this.tileID.overscaledZ),ie))continue;let le=v.getId(ie,w),he=new i.a9(ie,R,F,V,le);he.tile=G,s.push(he)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let d=this.expirationTime;if(s.cacheControl){let v=i.aa(s.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let v=Date.now(),y=!1;if(this.expirationTime>v)y=!1;else if(d){if(this.expirationTime<d)y=!0;else{let w=this.expirationTime-d;w?this.expirationTime=v+Math.max(w,3e4):y=!0}}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let v=this.latestFeatureIndex.loadVTLayers();for(let y in this.buckets){if(!d.style.hasLayer(y))continue;let w=this.buckets[y],D=w.layers[0].sourceLayer||"_geojsonTileLayer",O=v[D],R=s[D];if(!O||!R||Object.keys(R).length===0)continue;w.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});let F=d&&d.style&&d.style.getLayer(y);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=h.now()+s}setDependencies(s,d){let v={};for(let y of d)v[y]=!0;this.dependencies[s]=v}hasDependency(s,d){for(let v of s){let y=this.dependencies[v];if(y){for(let w of d)if(y[w])return!0}}return!1}}class St{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(let s in this.data)for(let d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,v){let y=s.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);let w={value:d,timeout:void 0};if(v!==void 0&&(w.timeout=setTimeout(()=>{this.remove(s,w)},v)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){let D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){let d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;let v=s.wrapped().key,y=d===void 0?0:this.data[v].indexOf(d),w=this.data[v][y];return this.data[v].splice(y,1),w.timeout&&clearTimeout(w.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(w.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){let d=[];for(let v in this.data)for(let y of this.data[v])s(y.value)||d.push(y);for(let v of d)this.remove(v.value.tileID,v)}}class Vr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,v){let y=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},i.e(this.stateChanges[s][y],v),this.deletedStates[s]===null){this.deletedStates[s]={};for(let w in this.state[s])w!==y&&(this.deletedStates[s][w]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][y]===null){this.deletedStates[s][y]={};for(let w in this.state[s][y])v[w]||(this.deletedStates[s][y][w]=null)}else for(let w in v)this.deletedStates[s]&&this.deletedStates[s][y]&&this.deletedStates[s][y][w]===null&&delete this.deletedStates[s][y][w]}removeFeatureState(s,d,v){if(this.deletedStates[s]===null)return;let y=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},v&&d!==void 0)this.deletedStates[s][y]!==null&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][v]=null);else if(d!==void 0){if(this.stateChanges[s]&&this.stateChanges[s][y])for(v in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][v]=null;else this.deletedStates[s][y]=null;}else this.deletedStates[s]=null}getState(s,d){let v=String(d),y=i.e({},(this.state[s]||{})[v],(this.stateChanges[s]||{})[v]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let w=this.deletedStates[s][d];if(w===null)return{};for(let D in w)delete y[D]}return y}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){let v={};for(let y in this.stateChanges){this.state[y]=this.state[y]||{};let w={};for(let D in this.stateChanges[y])this.state[y][D]||(this.state[y][D]={}),i.e(this.state[y][D],this.stateChanges[y][D]),w[D]=this.state[y][D];v[y]=w}for(let y in this.deletedStates){this.state[y]=this.state[y]||{};let w={};if(this.deletedStates[y]===null)for(let D in this.state[y])w[D]={},this.state[y][D]={};else for(let D in this.deletedStates[y]){if(this.deletedStates[y][D]===null)this.state[y][D]={};else for(let O of Object.keys(this.deletedStates[y][D]))delete this.state[y][D][O];w[D]=this.state[y][D]}v[y]=v[y]||{},i.e(v[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(let y in s)s[y].setFeatureState(v,d)}}class Er extends i.E{constructor(s,d,v){super(),this.id=s,this.dispatcher=v,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,w,D,O)=>{let R=new(Yt(w.type))(y,w,D,O);if(R.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${R.id}`);return R})(s,d,v,this),this._tiles={},this._cache=new St(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Vr,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d,v){return i._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,d,v)}catch(y){s.state="errored",y.status!==404?this._source.fire(new i.j(y,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new i.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let d in this._tiles){let v=this._tiles[d];v.upload(s),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Qi).map(s=>s.key)}getRenderableIds(s){let d=[];for(let v in this._tiles)this._isIdRenderable(v,s)&&d.push(this._tiles[v]);return s?d.sort((v,y)=>{let w=v.tileID,D=y.tileID,O=new i.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),R=new i.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-D.overscaledZ||R.y-O.y||R.x-O.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(Qi).map(v=>v.key)}hasRenderableParent(s){let d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,d){return i._(this,void 0,void 0,function*(){let v=this._tiles[s];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,s,d))})}_tileLoaded(s,d,v){s.timeAdded=h.now(),v==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new i.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let d=this.getRenderableIds();for(let y=0;y<d.length;y++){let w=d[y];if(s.neighboringTiles&&s.neighboringTiles[w]){let D=this.getTileByID(w);v(s,D),v(D,s)}}function v(y,w){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let D=w.tileID.canonical.x-y.tileID.canonical.x,O=w.tileID.canonical.y-y.tileID.canonical.y,R=Math.pow(2,y.tileID.canonical.z),F=w.tileID.key;D===0&&O===0||Math.abs(O)>1||(Math.abs(D)>1&&(Math.abs(D+R)===1?D+=R:Math.abs(D-R)===1&&(D-=R)),w.dem&&y.dem&&(y.dem.backfillBorder(w.dem,D,O),y.neighboringTiles&&y.neighboringTiles[F]&&(y.neighboringTiles[F].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,v,y){for(let w in this._tiles){let D=this._tiles[w];if(y[w]||!D.hasData()||D.tileID.overscaledZ<=d||D.tileID.overscaledZ>v)continue;let O=D.tileID;for(;D&&D.tileID.overscaledZ>d+1;){let F=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[F.key],D&&D.hasData()&&(O=F)}let R=O;for(;R.overscaledZ>d;)if(R=R.scaledTo(R.overscaledZ-1),s[R.key]){y[O.key]=O;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){let v=this._loadedParentTiles[s.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=s.overscaledZ-1;v>=d;v--){let y=s.scaledTo(v),w=this._getLoadedTile(y);if(w)return w}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let d=Math.ceil(s.width/this._source.tileSize)+1,v=Math.ceil(s.height/this._source.tileSize)+1,y=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?i.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(w)}handleWrapJump(s){let d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){let v={};for(let y in this._tiles){let w=this._tiles[y];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+d),v[w.tileID.key]=w}this._tiles=v;for(let y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(let y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(s,d,v,y,w,D){let O={},R={},F=Object.keys(s),V=h.now();for(let G of F){let Q=s[G],ie=this._tiles[G];if(!ie||ie.fadeEndTime!==0&&ie.fadeEndTime<=V)continue;let le=this.findLoadedParent(Q,d),he=this.findLoadedSibling(Q),ye=le||he||null;ye&&(this._addTile(ye.tileID),O[ye.tileID.key]=ye.tileID),R[G]=Q}this._retainLoadedChildren(R,y,v,s);for(let G in O)s[G]||(this._coveredTiles[G]=!0,s[G]=O[G]);if(D){let G={},Q={};for(let ie of w)this._tiles[ie.key].hasData()?G[ie.key]=ie:Q[ie.key]=ie;for(let ie in Q){let le=Q[ie].children(this._source.maxzoom);this._tiles[le[0].key]&&this._tiles[le[1].key]&&this._tiles[le[2].key]&&this._tiles[le[3].key]&&(G[le[0].key]=s[le[0].key]=le[0],G[le[1].key]=s[le[1].key]=le[1],G[le[2].key]=s[le[2].key]=le[2],G[le[3].key]=s[le[3].key]=le[3],delete Q[ie])}for(let ie in Q){let le=Q[ie],he=this.findLoadedParent(le,this._source.minzoom),ye=this.findLoadedSibling(le),xe=he||ye||null;if(xe){G[xe.tileID.key]=s[xe.tileID.key]=xe.tileID;for(let Ie in G)G[Ie].isChildOf(xe.tileID)&&delete G[Ie]}}for(let ie in this._tiles)G[ie]||(this._coveredTiles[ie]=!0)}}update(s,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=s,this.terrain=d,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new i.S(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(v=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(v=v.filter(V=>this._source.hasTile(V)))):v=[];let y=s.coveringZoomLevel(this._source),w=Math.max(y-Er.maxOverzooming,this._source.minzoom),D=Math.max(y+Er.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let V={};for(let G of v)if(G.canonical.z>this._source.minzoom){let Q=G.scaledTo(G.canonical.z-1);V[Q.key]=Q;let ie=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));V[ie.key]=ie}v=v.concat(Object.values(V))}let O=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,O&&this.fire(new i.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let R=this._updateRetainedTiles(v,y);Ta(this._source.type)&&this._updateCoveredAndRetainedTiles(R,w,D,y,v,d);for(let V in R)this._tiles[V].clearFadeHold();let F=i.ab(this._tiles,R);for(let V of F){let G=this._tiles[V];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){var v;let y={},w={},D=Math.max(d-Er.maxOverzooming,this._source.minzoom),O=Math.max(d+Er.maxUnderzooming,this._source.minzoom),R={};for(let F of s){let V=this._addTile(F);y[F.key]=F,V.hasData()||d<this._source.maxzoom&&(R[F.key]=F)}this._retainLoadedChildren(R,d,O,y);for(let F of s){let V=this._tiles[F.key];if(V.hasData())continue;if(d+1>this._source.maxzoom){let Q=F.children(this._source.maxzoom)[0],ie=this.getTile(Q);if(ie&&ie.hasData()){y[Q.key]=Q;continue}}else{let Q=F.children(this._source.maxzoom);if(y[Q[0].key]&&y[Q[1].key]&&y[Q[2].key]&&y[Q[3].key])continue}let G=V.wasRequested();for(let Q=F.overscaledZ-1;Q>=D;--Q){let ie=F.scaledTo(Q);if(w[ie.key])break;if(w[ie.key]=!0,V=this.getTile(ie),!V&&G&&(V=this._addTile(ie)),V){let le=V.hasData();if((le||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||G)&&(y[ie.key]=ie),G=V.wasRequested(),le)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let d=[],v,y=this._tiles[s].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){v=this._loadedParentTiles[y.key];break}d.push(y.key);let w=y.scaledTo(y.overscaledZ-1);if(v=this._getLoadedTile(w),v)break;y=w}for(let w of d)this._loadedParentTiles[w]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let d=this._tiles[s].tileID,v=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=v}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));let v=d;return d||(d=new da(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,s.key,d.state)),d.uses++,this._tiles[s.key]=d,v||this._source.fire(new i.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let v=d.getExpiryTimeout();v&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},v))}_removeTile(s){let d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(s){let d=s.sourceDataType;s.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,v){let y=[],w=this.transform;if(!w)return y;let D=v?w.getCameraQueryGeometry(s):s,O=s.map(le=>w.pointCoordinate(le,this.terrain)),R=D.map(le=>w.pointCoordinate(le,this.terrain)),F=this.getIds(),V=1/0,G=1/0,Q=-1/0,ie=-1/0;for(let le of R)V=Math.min(V,le.x),G=Math.min(G,le.y),Q=Math.max(Q,le.x),ie=Math.max(ie,le.y);for(let le=0;le<F.length;le++){let he=this._tiles[F[le]];if(he.holdingForFade())continue;let ye=he.tileID,xe=Math.pow(2,w.zoom-he.tileID.overscaledZ),Ie=d*he.queryPadding*i.X/he.tileSize/xe,fe=[ye.getTilePoint(new i.Z(V,G)),ye.getTilePoint(new i.Z(Q,ie))];if(fe[0].x-Ie<i.X&&fe[0].y-Ie<i.X&&fe[1].x+Ie>=0&&fe[1].y+Ie>=0){let Pe=O.map(Ke=>ye.getTilePoint(Ke)),Be=R.map(Ke=>ye.getTilePoint(Ke));y.push({tile:he,tileID:ye,queryGeometry:Pe,cameraQueryGeometry:Be,scale:xe})}}return y}getVisibleCoordinates(s){let d=this.getRenderableIds(s).map(v=>this._tiles[v].tileID);for(let v of d)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(Ta(this._source.type)){let s=h.now();for(let d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,v){this._state.updateState(s=s||"_geojsonTileLayer",d,v)}removeFeatureState(s,d,v){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,v)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,v){let y=this._tiles[s];y&&y.setDependencies(d,v)}reloadTilesForDependencies(s,d){for(let v in this._tiles)this._tiles[v].hasDependency(s,d)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(s,d))}}function Qi(E,s){let d=Math.abs(2*E.wrap)-+(E.wrap<0),v=Math.abs(2*s.wrap)-+(s.wrap<0);return E.overscaledZ-s.overscaledZ||v-d||s.canonical.y-E.canonical.y||s.canonical.x-E.canonical.x}function Ta(E){return E==="raster"||E==="image"||E==="video"}Er.maxOverzooming=10,Er.maxUnderzooming=3;class Le{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=i.ac(s,0,1);let d=1,v=this._distances[d],y=s*this.paddedLength+this.padding;for(;v<y&&d<this._distances.length;)v=this._distances[++d];let w=d-1,D=this._distances[w],O=v-D,R=O>0?(y-D)/O:0;return this.points[w].mult(1-R).add(this.points[d].mult(R))}}function Ve(E,s){let d=!0;return E==="always"||E!=="never"&&s!=="never"||(d=!1),d}class wt{constructor(s,d,v){let y=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(s/v),this.yCellCount=Math.ceil(d/v);for(let D=0;D<this.xCellCount*this.yCellCount;D++)y.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,v,y,w){this._forEachCell(d,v,y,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(y),this.bboxes.push(w)}insertCircle(s,d,v,y){this._forEachCell(d-y,v-y,d+y,v+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(v),this.circles.push(y)}_insertBoxCell(s,d,v,y,w,D){this.boxCells[w].push(D)}_insertCircleCell(s,d,v,y,w,D){this.circleCells[w].push(D)}_query(s,d,v,y,w,D,O){if(v<0||s>this.width||y<0||d>this.height)return[];let R=[];if(s<=0&&d<=0&&this.width<=v&&this.height<=y){if(w)return[{key:null,x1:s,y1:d,x2:v,y2:y}];for(let F=0;F<this.boxKeys.length;F++)R.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){let V=this.circles[3*F],G=this.circles[3*F+1],Q=this.circles[3*F+2];R.push({key:this.circleKeys[F],x1:V-Q,y1:G-Q,x2:V+Q,y2:G+Q})}}else this._forEachCell(s,d,v,y,this._queryCell,R,{hitTest:w,overlapMode:D,seenUids:{box:{},circle:{}}},O);return R}query(s,d,v,y){return this._query(s,d,v,y,!1,null)}hitTest(s,d,v,y,w,D){return this._query(s,d,v,y,!0,w,D).length>0}hitTestCircle(s,d,v,y,w){let D=s-v,O=s+v,R=d-v,F=d+v;if(O<0||D>this.width||F<0||R>this.height)return!1;let V=[];return this._forEachCell(D,R,O,F,this._queryCellCircle,V,{hitTest:!0,overlapMode:y,circle:{x:s,y:d,radius:v},seenUids:{box:{},circle:{}}},w),V.length>0}_queryCell(s,d,v,y,w,D,O,R){let{seenUids:F,hitTest:V,overlapMode:G}=O,Q=this.boxCells[w];if(Q!==null){let le=this.bboxes;for(let he of Q)if(!F.box[he]){F.box[he]=!0;let ye=4*he,xe=this.boxKeys[he];if(s<=le[ye+2]&&d<=le[ye+3]&&v>=le[ye+0]&&y>=le[ye+1]&&(!R||R(xe))&&(!V||!Ve(G,xe.overlapMode))&&(D.push({key:xe,x1:le[ye],y1:le[ye+1],x2:le[ye+2],y2:le[ye+3]}),V))return!0}}let ie=this.circleCells[w];if(ie!==null){let le=this.circles;for(let he of ie)if(!F.circle[he]){F.circle[he]=!0;let ye=3*he,xe=this.circleKeys[he];if(this._circleAndRectCollide(le[ye],le[ye+1],le[ye+2],s,d,v,y)&&(!R||R(xe))&&(!V||!Ve(G,xe.overlapMode))){let Ie=le[ye],fe=le[ye+1],Pe=le[ye+2];if(D.push({key:xe,x1:Ie-Pe,y1:fe-Pe,x2:Ie+Pe,y2:fe+Pe}),V)return!0}}}return!1}_queryCellCircle(s,d,v,y,w,D,O,R){let{circle:F,seenUids:V,overlapMode:G}=O,Q=this.boxCells[w];if(Q!==null){let le=this.bboxes;for(let he of Q)if(!V.box[he]){V.box[he]=!0;let ye=4*he,xe=this.boxKeys[he];if(this._circleAndRectCollide(F.x,F.y,F.radius,le[ye+0],le[ye+1],le[ye+2],le[ye+3])&&(!R||R(xe))&&!Ve(G,xe.overlapMode))return D.push(!0),!0}}let ie=this.circleCells[w];if(ie!==null){let le=this.circles;for(let he of ie)if(!V.circle[he]){V.circle[he]=!0;let ye=3*he,xe=this.circleKeys[he];if(this._circlesCollide(le[ye],le[ye+1],le[ye+2],F.x,F.y,F.radius)&&(!R||R(xe))&&!Ve(G,xe.overlapMode))return D.push(!0),!0}}}_forEachCell(s,d,v,y,w,D,O,R){let F=this._convertToXCellCoord(s),V=this._convertToYCellCoord(d),G=this._convertToXCellCoord(v),Q=this._convertToYCellCoord(y);for(let ie=F;ie<=G;ie++)for(let le=V;le<=Q;le++)if(w.call(this,s,d,v,y,this.xCellCount*le+ie,D,O,R))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,v,y,w,D){let O=y-s,R=w-d,F=v+D;return F*F>O*O+R*R}_circleAndRectCollide(s,d,v,y,w,D,O){let R=(D-y)/2,F=Math.abs(s-(y+R));if(F>R+v)return!1;let V=(O-w)/2,G=Math.abs(d-(w+V));if(G>V+v)return!1;if(F<=R||G<=V)return!0;let Q=F-R,ie=G-V;return Q*Q+ie*ie<=v*v}}function Zt(E,s,d,v,y){let w=i.H();return s?(i.K(w,w,[1/y,1/y,1]),d||i.ad(w,w,v.angle)):i.L(w,v.labelPlaneMatrix,E),w}function Ht(E,s,d,v,y){if(s){let w=i.ae(E);return i.K(w,w,[y,y,1]),d||i.ad(w,w,-v.angle),w}return v.glCoordMatrix}function ae(E,s,d,v){let y;v?(y=[E,s,v(E,s),1],i.af(y,y,d)):(y=[E,s,0,1],An(y,y,d));let w=y[3];return{point:new i.P(y[0]/w,y[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function $(E,s){return .5+E/s*.5}function W(E,s){return E.x>=-s[0]&&E.x<=s[0]&&E.y>=-s[1]&&E.y<=s[1]}function J(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie,le){let he=v?E.textSizeData:E.iconSizeData,ye=i.ag(he,d.transform.zoom),xe=[256/d.width*2+1,256/d.height*2+1],Ie=v?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;Ie.clear();let fe=E.lineVertexArray,Pe=v?E.text.placedSymbolArray:E.icon.placedSymbolArray,Be=d.transform.width/d.transform.height,Ke=!1;for(let dt=0;dt<Pe.length;dt++){let It=Pe.get(dt);if(It.hidden||It.writingMode===i.ah.vertical&&!Ke){Sr(It.numGlyphs,Ie);continue}Ke=!1;let Vt=ae(It.anchorX,It.anchorY,s,le);if(!W(Vt.point,xe)){Sr(It.numGlyphs,Ie);continue}let tr=$(d.transform.cameraToCenterDistance,Vt.signedDistanceFromCamera),jt=i.ai(he,ye,It),Rt=D?jt/tr:jt*tr,fr={getElevation:le,labelPlaneMatrix:y,lineVertexArray:fe,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:F,tileAnchorPoint:new i.P(It.anchorX,It.anchorY),unwrappedTileID:V,width:G,height:Q,translation:ie},Pr=De(fr,It,Rt,!1,O,s,w,E.glyphOffsetArray,Ie,Be,R);Ke=Pr.useVertical,(Pr.notEnoughRoom||Ke||Pr.needsFlipping&&De(fr,It,Rt,!0,O,s,w,E.glyphOffsetArray,Ie,Be,R).notEnoughRoom)&&Sr(It.numGlyphs,Ie)}v?E.text.dynamicLayoutVertexBuffer.updateData(Ie):E.icon.dynamicLayoutVertexBuffer.updateData(Ie)}function se(E,s,d,v,y,w,D,O){let R=w.glyphStartIndex+w.numGlyphs,F=w.lineStartIndex,V=w.lineStartIndex+w.lineLength,G=s.getoffsetX(w.glyphStartIndex),Q=s.getoffsetX(R-1),ie=At(E*G,d,v,y,w.segment,F,V,O,D);if(!ie)return null;let le=At(E*Q,d,v,y,w.segment,F,V,O,D);return le?O.projectionCache.anyProjectionOccluded?null:{first:ie,last:le}:null}function be(E,s,d,v){return E===i.ah.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*v?{useVertical:!0}:(E===i.ah.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function De(E,s,d,v,y,w,D,O,R,F,V){let G=d/24,Q=s.lineOffsetX*G,ie=s.lineOffsetY*G,le;if(s.numGlyphs>1){let he=s.glyphStartIndex+s.numGlyphs,ye=s.lineStartIndex,xe=s.lineStartIndex+s.lineLength,Ie=se(G,O,Q,ie,v,s,V,E);if(!Ie)return{notEnoughRoom:!0};let fe=ae(Ie.first.point.x,Ie.first.point.y,D,E.getElevation).point,Pe=ae(Ie.last.point.x,Ie.last.point.y,D,E.getElevation).point;if(y&&!v){let Be=be(s.writingMode,fe,Pe,F);if(Be)return Be}le=[Ie.first];for(let Be=s.glyphStartIndex+1;Be<he-1;Be++)le.push(At(G*O.getoffsetX(Be),Q,ie,v,s.segment,ye,xe,E,V));le.push(Ie.last)}else{if(y&&!v){let ye=ae(E.tileAnchorPoint.x,E.tileAnchorPoint.y,w,E.getElevation).point,xe=s.lineStartIndex+s.segment+1,Ie=new i.P(E.lineVertexArray.getx(xe),E.lineVertexArray.gety(xe)),fe=ae(Ie.x,Ie.y,w,E.getElevation),Pe=fe.signedDistanceFromCamera>0?fe.point:function(Ke,dt,It,Vt,tr,jt){return Re(Ke,dt,It,1,tr,jt)}(E.tileAnchorPoint,Ie,ye,0,w,E),Be=be(s.writingMode,ye,Pe,F);if(Be)return Be}let he=At(G*O.getoffsetX(s.glyphStartIndex),Q,ie,v,s.segment,s.lineStartIndex,s.lineStartIndex+s.lineLength,E,V);if(!he||E.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};le=[he]}for(let he of le)i.aj(R,he.point,he.angle);return{}}function Re(E,s,d,v,y,w){let D=E.add(E.sub(s)._unit()),O=y!==void 0?ae(D.x,D.y,y,w.getElevation).point:Je(D.x,D.y,w).point,R=d.sub(O);return d.add(R._mult(v/R.mag()))}function _e(E,s,d){let v=s.projectionCache;if(v.projections[E])return v.projections[E];let y=new i.P(s.lineVertexArray.getx(E),s.lineVertexArray.gety(E)),w=Je(y.x,y.y,s);if(w.signedDistanceFromCamera>0)return v.projections[E]=w.point,v.anyProjectionOccluded=v.anyProjectionOccluded||w.isOccluded,w.point;let D=E-d.direction;return function(O,R,F,V,G){return Re(O,R,F,V,void 0,G)}(d.distanceFromAnchor===0?s.tileAnchorPoint:new i.P(s.lineVertexArray.getx(D),s.lineVertexArray.gety(D)),y,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,s)}function Je(E,s,d){let v=E+d.translation[0],y=s+d.translation[1],w;return!d.pitchWithMap&&d.projection.useSpecialProjectionForSymbols?(w=d.projection.projectTileCoordinates(v,y,d.unwrappedTileID,d.getElevation),w.point.x=(.5*w.point.x+.5)*d.width,w.point.y=(.5*-w.point.y+.5)*d.height):(w=ae(v,y,d.labelPlaneMatrix,d.getElevation),w.isOccluded=!1),w}function pt(E,s,d){return E._unit()._perp()._mult(s*d)}function Xe(E,s,d,v,y,w,D,O,R){if(O.projectionCache.offsets[E])return O.projectionCache.offsets[E];let F=d.add(s);if(E+R.direction<v||E+R.direction>=y)return O.projectionCache.offsets[E]=F,F;let V=_e(E+R.direction,O,R),G=pt(V.sub(d),D,R.direction),Q=d.add(G),ie=V.add(G);return O.projectionCache.offsets[E]=i.ak(w,F,Q,ie)||F,O.projectionCache.offsets[E]}function At(E,s,d,v,y,w,D,O,R){let F=v?E-s:E+s,V=F>0?1:-1,G=0;v&&(V*=-1,G=Math.PI),V<0&&(G+=Math.PI);let Q,ie=V>0?w+y:w+y+1;O.projectionCache.cachedAnchorPoint?Q=O.projectionCache.cachedAnchorPoint:(Q=Je(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=Q);let le,he,ye=Q,xe=Q,Ie=0,fe=0,Pe=Math.abs(F),Be=[],Ke;for(;Ie+fe<=Pe;){if(ie+=V,ie<w||ie>=D)return null;Ie+=fe,xe=ye,he=le;let Vt={absOffsetX:Pe,direction:V,distanceFromAnchor:Ie,previousVertex:xe};if(ye=_e(ie,O,Vt),d===0)Be.push(xe),Ke=ye.sub(xe);else{let tr,jt=ye.sub(xe);tr=jt.mag()===0?pt(_e(ie+V,O,Vt).sub(ye),d,V):pt(jt,d,V),he||(he=xe.add(tr)),le=Xe(ie,tr,ye,w,D,he,d,O,Vt),Be.push(he),Ke=le.sub(he)}fe=Ke.mag()}let dt=Ke._mult((Pe-Ie)/fe)._add(he||xe),It=G+Math.atan2(ye.y-xe.y,ye.x-xe.x);return Be.push(dt),{point:dt,angle:R?It:0,path:Be}}let ur=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Sr(E,s){for(let d=0;d<E;d++){let v=s.length;s.resize(v+4),s.float32.set(ur,3*v)}}function An(E,s,d){let v=s[0],y=s[1];return E[0]=d[0]*v+d[4]*y+d[12],E[1]=d[1]*v+d[5]*y+d[13],E[3]=d[3]*v+d[7]*y+d[15],E}let Gr=100;class Dn{constructor(s,d,v=new wt(s.width+200,s.height+200,25),y=new wt(s.width+200,s.height+200,25)){this.transform=s,this.mapProjection=d,this.grid=v,this.ignoredGrid=y,this.pitchFactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Gr,this.screenBottomBoundary=s.height+Gr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,v,y,w,D,O,R,F,V,G){let Q=s.anchorPointX+R[0],ie=s.anchorPointY+R[1],le=this.projectAndGetPerspectiveRatio(y,Q,ie,w,V),he=v*le.perspectiveRatio,ye;if(D||O)ye=this._projectCollisionBox(s,he,y,w,D,O,R,le,V,G);else{let Be=le.point.x+(G?G.x*he:0),Ke=le.point.y+(G?G.y*he:0);ye={allPointsOccluded:!1,box:[Be+s.x1*he,Ke+s.y1*he,Be+s.x2*he,Ke+s.y2*he]}}let[xe,Ie,fe,Pe]=ye.box;return this.mapProjection.useSpecialProjectionForSymbols&&(D?ye.allPointsOccluded:this.mapProjection.isOccluded(Q,ie,w))||le.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(xe,Ie,fe,Pe)||d!=="always"&&this.grid.hitTest(xe,Ie,fe,Pe,d,F)?{box:[xe,Ie,fe,Pe],placeable:!1,offscreen:!1}:{box:[xe,Ie,fe,Pe],placeable:!0,offscreen:this.isOffscreen(xe,Ie,fe,Pe)}}placeCollisionCircles(s,d,v,y,w,D,O,R,F,V,G,Q,ie,le,he,ye){let xe=[],Ie=new i.P(d.anchorX,d.anchorY),fe=this.getPerspectiveRatio(D,Ie.x,Ie.y,O,ye),Pe=(G?w/fe:w*fe)/i.ap,Be={getElevation:ye,labelPlaneMatrix:R,lineVertexArray:v,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Ie,unwrappedTileID:O,width:this.transform.width,height:this.transform.height,translation:he},Ke=se(Pe,y,d.lineOffsetX*Pe,d.lineOffsetY*Pe,!1,d,!1,Be),dt=!1,It=!1,Vt=!0;if(Ke){let tr=.5*ie*fe+le,jt=new i.P(-100,-100),Rt=new i.P(this.screenRightBoundary,this.screenBottomBoundary),fr=new Le,Pr=Ke.first,zt=Ke.last,Xt=[];for(let Yr=Pr.path.length-1;Yr>=1;Yr--)Xt.push(Pr.path[Yr]);for(let Yr=1;Yr<zt.path.length;Yr++)Xt.push(zt.path[Yr]);let Or=2.5*tr;if(F){let Yr=this.projectPathToScreenSpace(Xt,Be,F);Xt=Yr.some(yn=>yn.signedDistanceFromCamera<=0)?[]:Yr.map(yn=>yn.point)}let Ao=[];if(Xt.length>0){let Yr=Xt[0].clone(),yn=Xt[0].clone();for(let Do=1;Do<Xt.length;Do++)Yr.x=Math.min(Yr.x,Xt[Do].x),Yr.y=Math.min(Yr.y,Xt[Do].y),yn.x=Math.max(yn.x,Xt[Do].x),yn.y=Math.max(yn.y,Xt[Do].y);Ao=Yr.x>=jt.x&&yn.x<=Rt.x&&Yr.y>=jt.y&&yn.y<=Rt.y?[Xt]:yn.x<jt.x||Yr.x>Rt.x||yn.y<jt.y||Yr.y>Rt.y?[]:i.al([Xt],jt.x,jt.y,Rt.x,Rt.y)}for(let Yr of Ao){fr.reset(Yr,.25*tr);let yn=0;yn=fr.length<=.5*tr?1:Math.ceil(fr.paddedLength/Or)+1;for(let Do=0;Do<yn;Do++){let Ca=Do/Math.max(yn-1,1),ku=fr.lerp(Ca),No=ku.x+Gr,Ns=ku.y+Gr;xe.push(No,Ns,tr,0);let Qa=No-tr,Aa=Ns-tr,es=No+tr,fc=Ns+tr;if(Vt=Vt&&this.isOffscreen(Qa,Aa,es,fc),It=It||this.isInsideGrid(Qa,Aa,es,fc),s!=="always"&&this.grid.hitTestCircle(No,Ns,tr,s,Q)&&(dt=!0,!V))return{circles:[],offscreen:!1,collisionDetected:dt}}}}return{circles:!V&&dt||!It||fe<this.perspectiveRatioCutoff?[]:xe,offscreen:Vt,collisionDetected:dt}}projectPathToScreenSpace(s,d,v){return s.map(y=>ae(y.x,y.y,v,d.getElevation))}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let d=[],v=1/0,y=1/0,w=-1/0,D=-1/0;for(let V of s){let G=new i.P(V.x+Gr,V.y+Gr);v=Math.min(v,G.x),y=Math.min(y,G.y),w=Math.max(w,G.x),D=Math.max(D,G.y),d.push(G)}let O=this.grid.query(v,y,w,D).concat(this.ignoredGrid.query(v,y,w,D)),R={},F={};for(let V of O){let G=V.key;if(R[G.bucketInstanceId]===void 0&&(R[G.bucketInstanceId]={}),R[G.bucketInstanceId][G.featureIndex])continue;let Q=[new i.P(V.x1,V.y1),new i.P(V.x2,V.y1),new i.P(V.x2,V.y2),new i.P(V.x1,V.y2)];i.am(d,Q)&&(R[G.bucketInstanceId][G.featureIndex]=!0,F[G.bucketInstanceId]===void 0&&(F[G.bucketInstanceId]=[]),F[G.bucketInstanceId].push(G.featureIndex))}return F}insertCollisionBox(s,d,v,y,w,D){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:D,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,v,y,w,D){let O=v?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:w,collisionGroupID:D,overlapMode:d};for(let F=0;F<s.length;F+=4)O.insertCircle(R,s[F],s[F+1],s[F+2])}projectAndGetPerspectiveRatio(s,d,v,y,w){let D;w?(D=[d,v,w(d,v),1],i.af(D,D,s)):(D=[d,v,0,1],An(D,D,s));let O=D[3];return{point:new i.P((D[0]/O+1)/2*this.transform.width+Gr,(-D[1]/O+1)/2*this.transform.height+Gr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}getPerspectiveRatio(s,d,v,y,w){let D=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(d,v,y,w):ae(d,v,s,w);return .5+this.transform.cameraToCenterDistance/D.signedDistanceFromCamera*.5}isOffscreen(s,d,v,y){return v<Gr||s>=this.screenRightBoundary||y<Gr||d>this.screenBottomBoundary}isInsideGrid(s,d,v,y){return v>=0&&s<this.gridRightBoundary&&y>=0&&d<this.gridBottomBoundary}getViewportMatrix(){let s=i.an([]);return i.J(s,s,[-100,-100,0]),s}_projectCollisionBox(s,d,v,y,w,D,O,R,F,V){let G=new i.P(1,0),Q=new i.P(0,1),ie=new i.P(s.anchorPointX+O[0],s.anchorPointY+O[1]);if(D&&!w){let Vt=this.projectAndGetPerspectiveRatio(v,ie.x+1,ie.y,y,F).point.sub(R.point).unit(),tr=Math.atan(Vt.y/Vt.x)+(Vt.x<0?Math.PI:0),jt=Math.sin(tr),Rt=Math.cos(tr);G=new i.P(Rt,jt),Q=new i.P(-jt,Rt)}else if(!D&&w){let Vt=-this.transform.angle,tr=Math.sin(Vt),jt=Math.cos(Vt);G=new i.P(jt,tr),Q=new i.P(-tr,jt)}let le=R.point,he=d;if(w){le=ie;let Vt=this.transform.zoom-Math.floor(this.transform.zoom);he=Math.pow(2,-Vt),he*=this.mapProjection.getPitchedTextCorrection(this.transform,ie,y),V||(he*=i.ac(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}V&&(le=le.add(G.mult(V.x*he)).add(Q.mult(V.y*he)));let ye=s.x1*he,xe=s.x2*he,Ie=(ye+xe)/2,fe=s.y1*he,Pe=s.y2*he,Be=(fe+Pe)/2,Ke=[{offsetX:ye,offsetY:fe},{offsetX:Ie,offsetY:fe},{offsetX:xe,offsetY:fe},{offsetX:xe,offsetY:Be},{offsetX:xe,offsetY:Pe},{offsetX:Ie,offsetY:Pe},{offsetX:ye,offsetY:Pe},{offsetX:ye,offsetY:Be}],dt=[];for(let{offsetX:Vt,offsetY:tr}of Ke)dt.push(new i.P(le.x+G.x*Vt+Q.x*tr,le.y+G.y*Vt+Q.y*tr));let It=!1;if(w){let Vt=dt.map(tr=>this.projectAndGetPerspectiveRatio(v,tr.x,tr.y,y,F));It=Vt.some(tr=>!tr.isOccluded),dt=Vt.map(tr=>tr.point)}else It=!0;return{box:i.ao(dt),allPointsOccluded:!It}}}function vn(E,s,d){return s*(i.X/(E.tileSize*Math.pow(2,d-E.tileID.overscaledZ)))}class Di{constructor(s,d,v,y){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):y&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class ii{constructor(s,d,v,y,w){this.text=new Di(s?s.text:null,d,v,w),this.icon=new Di(s?s.icon:null,d,y,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class an{constructor(s,d,v){this.text=s,this.icon=d,this.skipFade=v}}class eo{constructor(){this.invProjMatrix=i.H(),this.viewportMatrix=i.H(),this.circles=[]}}class Vo{constructor(s,d,v,y,w){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=y,this.tileID=w}}class ea{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[s]}}function ha(E,s,d,v,y){let{horizontalAlign:w,verticalAlign:D}=i.au(E);return new i.P(-(w-.5)*s+v[0]*y,-(D-.5)*d+v[1]*y)}class Ja{constructor(s,d,v,y,w,D){this.transform=s.clone(),this.terrain=v,this.collisionIndex=new Dn(this.transform,d),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ea(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let d=this.terrain;return d?(v,y)=>d.getElevation(s,v,y):null}getBucketParts(s,d,v,y){let w=v.getBucket(d),D=v.latestFeatureIndex;if(!w||!D||d.id!==w.layerIds[0])return;let O=v.collisionBoxArray,R=w.layers[0].layout,F=w.layers[0].paint,V=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),G=v.tileSize/i.X,Q=v.tileID.toUnwrapped(),ie=this.transform.calculatePosMatrix(Q),le=R.get("text-pitch-alignment")==="map",he=R.get("text-rotation-alignment")==="map",ye=vn(v,1,this.transform.zoom),xe=this.collisionIndex.mapProjection.translatePosition(this.transform,v,F.get("text-translate"),F.get("text-translate-anchor")),Ie=this.collisionIndex.mapProjection.translatePosition(this.transform,v,F.get("icon-translate"),F.get("icon-translate-anchor")),fe=Zt(ie,le,he,this.transform,ye),Pe=null;if(le){let Ke=Ht(ie,le,he,this.transform,ye);Pe=i.L([],this.transform.labelPlaneMatrix,Ke)}this.retainedQueryData[w.bucketInstanceId]=new Vo(w.bucketInstanceId,D,w.sourceLayerIndex,w.index,v.tileID);let Be={bucket:w,layout:R,translationText:xe,translationIcon:Ie,posMatrix:ie,unwrappedTileID:Q,textLabelPlaneMatrix:fe,labelToScreenMatrix:Pe,scale:V,textPixelRatio:G,holdingForFade:v.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:i.ag(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(y)for(let Ke of w.sortKeyRanges){let{sortKey:dt,symbolInstanceStart:It,symbolInstanceEnd:Vt}=Ke;s.push({sortKey:dt,symbolInstanceStart:It,symbolInstanceEnd:Vt,parameters:Be})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Be})}attemptAnchorPlacement(s,d,v,y,w,D,O,R,F,V,G,Q,ie,le,he,ye,xe,Ie,fe){let Pe=i.aq[s.textAnchor],Be=[s.textOffset0,s.textOffset1],Ke=ha(Pe,v,y,Be,w),dt=this.collisionIndex.placeCollisionBox(d,Q,R,F,V,O,D,ye,G.predicate,fe,Ke);if((!Ie||this.collisionIndex.placeCollisionBox(Ie,Q,R,F,V,O,D,xe,G.predicate,fe,Ke).placeable)&&dt.placeable){let It;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID].text&&(It=this.prevPlacement.variableOffsets[ie.crossTileID].anchor),ie.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ie.crossTileID]={textOffset:Be,width:v,height:y,anchor:Pe,textBoxScale:w,prevAnchor:It},this.markUsedJustification(le,Pe,ie,he),le.allowVerticalPlacement&&(this.markUsedOrientation(le,he,ie),this.placedOrientations[ie.crossTileID]=he),{shift:Ke,placedGlyphBoxes:dt}}}placeLayerBucketPart(s,d,v){let{bucket:y,layout:w,translationText:D,translationIcon:O,posMatrix:R,unwrappedTileID:F,textLabelPlaneMatrix:V,labelToScreenMatrix:G,textPixelRatio:Q,holdingForFade:ie,collisionBoxArray:le,partiallyEvaluatedTextSize:he,collisionGroup:ye}=s.parameters,xe=w.get("text-optional"),Ie=w.get("icon-optional"),fe=i.ar(w,"text-overlap","text-allow-overlap"),Pe=fe==="always",Be=i.ar(w,"icon-overlap","icon-allow-overlap"),Ke=Be==="always",dt=w.get("text-rotation-alignment")==="map",It=w.get("text-pitch-alignment")==="map",Vt=w.get("icon-text-fit")!=="none",tr=w.get("symbol-z-order")==="viewport-y",jt=Pe&&(Ke||!y.hasIconData()||Ie),Rt=Ke&&(Pe||!y.hasTextData()||xe);!y.collisionArrays&&le&&y.deserializeCollisionBoxes(le);let fr=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),Pr=(zt,Xt,Or)=>{var Ao,Yr;if(d[zt.crossTileID])return;if(ie)return void(this.placements[zt.crossTileID]=new an(!1,!1,!1));let yn=!1,Do=!1,Ca=!0,ku=null,No={box:null,placeable:!1,offscreen:null},Ns={box:null,placeable:!1,offscreen:null},Qa=null,Aa=null,es=null,fc=0,Hm=0,I_=0;Xt.textFeatureIndex?fc=Xt.textFeatureIndex:zt.useRuntimeCollisionCircles&&(fc=zt.featureIndex),Xt.verticalTextFeatureIndex&&(Hm=Xt.verticalTextFeatureIndex);let Wm=Xt.textBox;if(Wm){let Gl=ma=>{let Da=i.ah.horizontal;if(y.allowVerticalPlacement&&!ma&&this.prevPlacement){let gl=this.prevPlacement.placedOrientations[zt.crossTileID];gl&&(this.placedOrientations[zt.crossTileID]=gl,Da=gl,this.markUsedOrientation(y,Da,zt))}return Da},Hl=(ma,Da)=>{if(y.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&Xt.verticalTextBox){for(let gl of y.writingModes)if(gl===i.ah.vertical?(No=Da(),Ns=No):No=ma(),No&&No.placeable)break}else No=ma()},vp=zt.textAnchorOffsetStartIndex,Ru=zt.textAnchorOffsetEndIndex;if(Ru===vp){let ma=(Da,gl)=>{let bn=this.collisionIndex.placeCollisionBox(Da,fe,Q,R,F,It,dt,D,ye.predicate,fr);return bn&&bn.placeable&&(this.markUsedOrientation(y,gl,zt),this.placedOrientations[zt.crossTileID]=gl),bn};Hl(()=>ma(Wm,i.ah.horizontal),()=>{let Da=Xt.verticalTextBox;return y.allowVerticalPlacement&&zt.numVerticalGlyphVertices>0&&Da?ma(Da,i.ah.vertical):{box:null,offscreen:null}}),Gl(No&&No.placeable)}else{let ma=i.aq[(Yr=(Ao=this.prevPlacement)===null||Ao===void 0?void 0:Ao.variableOffsets[zt.crossTileID])===null||Yr===void 0?void 0:Yr.anchor],Da=(bn,eh,$m)=>{let Ym=bn.x2-bn.x1,v4=bn.y2-bn.y1,SF=zt.textBoxScale,y4=Vt&&Be==="never"?eh:null,yp=null,_4=fe==="never"?1:2,M_="never";ma&&_4++;for(let Ay=0;Ay<_4;Ay++){for(let C_=vp;C_<Ru;C_++){let A_=y.textAnchorOffsets.get(C_);if(ma&&A_.textAnchor!==ma)continue;let Zm=this.attemptAnchorPlacement(A_,bn,Ym,v4,SF,dt,It,Q,R,F,ye,M_,zt,y,$m,D,O,y4,fr);if(Zm&&(yp=Zm.placedGlyphBoxes,yp&&yp.placeable))return yn=!0,ku=Zm.shift,yp}ma?ma=null:M_=fe}return v&&!yp&&(yp={box:this.collisionIndex.placeCollisionBox(Wm,"always",Q,R,F,It,dt,D,ye.predicate,fr,new i.P(0,0)).box,offscreen:!1,placeable:!1}),yp};Hl(()=>Da(Wm,Xt.iconBox,i.ah.horizontal),()=>{let bn=Xt.verticalTextBox;return y.allowVerticalPlacement&&(!No||!No.placeable)&&zt.numVerticalGlyphVertices>0&&bn?Da(bn,Xt.verticalIconBox,i.ah.vertical):{box:null,occluded:!0,offscreen:null}}),No&&(yn=No.placeable,Ca=No.offscreen);let gl=Gl(No&&No.placeable);if(!yn&&this.prevPlacement){let bn=this.prevPlacement.variableOffsets[zt.crossTileID];bn&&(this.variableOffsets[zt.crossTileID]=bn,this.markUsedJustification(y,bn.anchor,zt,gl))}}}if(Qa=No,yn=Qa&&Qa.placeable,Ca=Qa&&Qa.offscreen,zt.useRuntimeCollisionCircles){let Gl=y.text.placedSymbolArray.get(zt.centerJustifiedTextSymbolIndex),Hl=i.ai(y.textSizeData,he,Gl),vp=w.get("text-padding");Aa=this.collisionIndex.placeCollisionCircles(fe,Gl,y.lineVertexArray,y.glyphOffsetArray,Hl,R,F,V,G,v,It,ye.predicate,zt.collisionCircleDiameter,vp,D,fr),Aa.circles.length&&Aa.collisionDetected&&!v&&i.w("Collisions detected, but collision boxes are not shown"),yn=Pe||Aa.circles.length>0&&!Aa.collisionDetected,Ca=Ca&&Aa.offscreen}if(Xt.iconFeatureIndex&&(I_=Xt.iconFeatureIndex),Xt.iconBox){let Gl=Hl=>this.collisionIndex.placeCollisionBox(Hl,Be,Q,R,F,It,dt,O,ye.predicate,fr,Vt&&ku?ku:void 0);Ns&&Ns.placeable&&Xt.verticalIconBox?(es=Gl(Xt.verticalIconBox),Do=es.placeable):(es=Gl(Xt.iconBox),Do=es.placeable),Ca=Ca&&es.offscreen}let Vl=xe||zt.numHorizontalGlyphVertices===0&&zt.numVerticalGlyphVertices===0,T_=Ie||zt.numIconVertices===0;Vl||T_?T_?Vl||(Do=Do&&yn):yn=Do&&yn:Do=yn=Do&&yn;let jS=Do&&es.placeable;if(yn&&Qa.placeable&&this.collisionIndex.insertCollisionBox(Qa.box,fe,w.get("text-ignore-placement"),y.bucketInstanceId,Ns&&Ns.placeable&&Hm?Hm:fc,ye.ID),jS&&this.collisionIndex.insertCollisionBox(es.box,Be,w.get("icon-ignore-placement"),y.bucketInstanceId,I_,ye.ID),Aa&&yn&&this.collisionIndex.insertCollisionCircles(Aa.circles,fe,w.get("text-ignore-placement"),y.bucketInstanceId,fc,ye.ID),v&&this.storeCollisionData(y.bucketInstanceId,Or,Xt,Qa,es,Aa),zt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[zt.crossTileID]=new an(yn||jt,Do||Rt,Ca||y.justReloaded),d[zt.crossTileID]=!0};if(tr){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let zt=y.getSortedSymbolIndexes(this.transform.angle);for(let Xt=zt.length-1;Xt>=0;--Xt){let Or=zt[Xt];Pr(y.symbolInstances.get(Or),y.collisionArrays[Or],Or)}}else for(let zt=s.symbolInstanceStart;zt<s.symbolInstanceEnd;zt++)Pr(y.symbolInstances.get(zt),y.collisionArrays[zt],zt);if(v&&y.bucketInstanceId in this.collisionCircleArrays){let zt=this.collisionCircleArrays[y.bucketInstanceId];i.as(zt.invProjMatrix,R),zt.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(s,d,v,y,w,D){if(v.textBox||v.iconBox){let O,R;this.collisionBoxArrays.has(s)?O=this.collisionBoxArrays.get(s):(O=new Map,this.collisionBoxArrays.set(s,O)),O.has(d)?R=O.get(d):(R={text:null,icon:null},O.set(d,R)),v.textBox&&(R.text=y.box),v.iconBox&&(R.icon=w.box)}if(D){let O=this.collisionCircleArrays[s];O===void 0&&(O=this.collisionCircleArrays[s]=new eo);for(let R=0;R<D.circles.length;R+=4)O.circles.push(D.circles[R+0]),O.circles.push(D.circles[R+1]),O.circles.push(D.circles[R+2]),O.circles.push(D.collisionDetected?1:0)}}markUsedJustification(s,d,v,y){let w;w=y===i.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[i.at(d)];let D=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(let O of D)O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=w>=0&&O!==w?0:v.crossTileID)}markUsedOrientation(s,d,v){let y=d===i.ah.horizontal||d===i.ah.horizontalOnly?d:0,w=d===i.ah.vertical?d:0,D=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(let O of D)s.text.placedSymbolArray.get(O).placedOrientation=y;v.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let d=this.prevPlacement,v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;let y=d?d.symbolFadeChange(s):1,w=d?d.opacities:{},D=d?d.variableOffsets:{},O=d?d.placedOrientations:{};for(let R in this.placements){let F=this.placements[R],V=w[R];V?(this.opacities[R]=new ii(V,y,F.text,F.icon),v=v||F.text!==V.text.placed||F.icon!==V.icon.placed):(this.opacities[R]=new ii(null,y,F.text,F.icon,F.skipFade),v=v||F.text||F.icon)}for(let R in w){let F=w[R];if(!this.opacities[R]){let V=new ii(F,y,!1,!1);V.isHidden()||(this.opacities[R]=V,v=v||F.text.placed||F.icon.placed)}}for(let R in D)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=D[R]);for(let R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){let v={};for(let y of d){let w=y.getBucket(s);w&&y.latestFeatureIndex&&s.id===w.layerIds[0]&&this.updateBucketOpacities(w,y.tileID,v,y.collisionBoxArray)}}updateBucketOpacities(s,d,v,y){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let w=s.layers[0],D=w.layout,O=new ii(null,0,!1,!1,!0),R=D.get("text-allow-overlap"),F=D.get("icon-allow-overlap"),V=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=D.get("text-rotation-alignment")==="map",Q=D.get("text-pitch-alignment")==="map",ie=D.get("icon-text-fit")!=="none",le=new ii(null,0,R&&(F||!s.hasIconData()||D.get("icon-optional")),F&&(R||!s.hasTextData()||D.get("text-optional")),!0);!s.collisionArrays&&y&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(y);let he=(xe,Ie,fe)=>{for(let Pe=0;Pe<Ie/4;Pe++)xe.opacityVertexArray.emplaceBack(fe);xe.hasVisibleVertices=xe.hasVisibleVertices||fe!==Sm},ye=this.collisionBoxArrays.get(s.bucketInstanceId);for(let xe=0;xe<s.symbolInstances.length;xe++){let Ie=s.symbolInstances.get(xe),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:Pe,crossTileID:Be}=Ie,Ke=this.opacities[Be];v[Be]?Ke=O:Ke||(Ke=le,this.opacities[Be]=Ke),v[Be]=!0;let dt=Ie.numIconVertices>0,It=this.placedOrientations[Ie.crossTileID],Vt=It===i.ah.vertical,tr=It===i.ah.horizontal||It===i.ah.horizontalOnly;if(fe>0||Pe>0){let Rt=dl(Ke.text);he(s.text,fe,Vt?Sm:Rt),he(s.text,Pe,tr?Sm:Rt);let fr=Ke.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach(Xt=>{Xt>=0&&(s.text.placedSymbolArray.get(Xt).hidden=fr||Vt?1:0)}),Ie.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=fr||tr?1:0);let Pr=this.variableOffsets[Ie.crossTileID];Pr&&this.markUsedJustification(s,Pr.anchor,Ie,It);let zt=this.placedOrientations[Ie.crossTileID];zt&&(this.markUsedJustification(s,"left",Ie,zt),this.markUsedOrientation(s,zt,Ie))}if(dt){let Rt=dl(Ke.icon),fr=!(ie&&Ie.verticalPlacedIconSymbolIndex&&Vt);Ie.placedIconSymbolIndex>=0&&(he(s.icon,Ie.numIconVertices,fr?Rt:Sm),s.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(he(s.icon,Ie.numVerticalIconVertices,fr?Sm:Rt),s.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}let jt=ye&&ye.has(xe)?ye.get(xe):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let Rt=s.collisionArrays[xe];if(Rt){let fr=new i.P(0,0);if(Rt.textBox||Rt.verticalTextBox){let Pr=!0;if(V){let zt=this.variableOffsets[Be];zt?(fr=ha(zt.anchor,zt.width,zt.height,zt.textOffset,zt.textBoxScale),G&&fr._rotate(Q?this.transform.angle:-this.transform.angle)):Pr=!1}if(Rt.textBox||Rt.verticalTextBox){let zt;Rt.textBox&&(zt=Vt),Rt.verticalTextBox&&(zt=tr),Em(s.textCollisionBox.collisionVertexArray,Ke.text.placed,!Pr||zt,jt.text,fr.x,fr.y)}}if(Rt.iconBox||Rt.verticalIconBox){let Pr=!!(!tr&&Rt.verticalIconBox),zt;Rt.iconBox&&(zt=Pr),Rt.verticalIconBox&&(zt=!Pr),Em(s.iconCollisionBox.collisionVertexArray,Ke.icon.placed,zt,jt.icon,ie?fr.x:0,ie?fr.y:0)}}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){let xe=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=xe.invProjMatrix,s.placementViewportMatrix=xe.viewportMatrix,s.collisionCircleArray=xe.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){let v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>s}setStale(){this.stale=!0}}function Em(E,s,d,v,y,w){v&&v.length!==0||(v=[0,0,0,0]);let D=v[0]-Gr,O=v[1]-Gr,R=v[2]-Gr,F=v[3]-Gr;E.emplaceBack(s?1:0,d?1:0,y||0,w||0,D,O),E.emplaceBack(s?1:0,d?1:0,y||0,w||0,R,O),E.emplaceBack(s?1:0,d?1:0,y||0,w||0,R,F),E.emplaceBack(s?1:0,d?1:0,y||0,w||0,D,F)}let to=Math.pow(2,25),YE=Math.pow(2,24),ZE=Math.pow(2,17),fl=Math.pow(2,16),pl=Math.pow(2,9),J8=Math.pow(2,8),zl=Math.pow(2,1);function dl(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;let s=E.placed?1:0,d=Math.floor(127*E.opacity);return d*to+s*YE+d*ZE+s*fl+d*pl+s*J8+d*zl+s}let Sm=0;function Bd(){return{isOccluded:(E,s,d)=>!1,getPitchedTextCorrection:(E,s,d)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(E,s,d,v){throw new Error("Not implemented.")},translatePosition:(E,s,d,v)=>function(y,w,D,O,R=!1){if(!D[0]&&!D[1])return[0,0];let F=R?O==="map"?y.angle:0:O==="viewport"?-y.angle:0;if(F){let V=Math.sin(F),G=Math.cos(F);D=[D[0]*G-D[1]*V,D[0]*V+D[1]*G]}return[R?D[0]:vn(w,D[0],y.zoom),R?D[1]:vn(w,D[1],y.zoom)]}(E,s,d,v),getCircleRadiusCorrection:E=>1}}class Ni{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,v,y,w){let D=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(D,y,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((O,R)=>O.sortKey-R.sortKey));this._currentPartIndex<D.length;)if(d.placeLayerBucketPart(D[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,w())return!0;return!1}}class fy{constructor(s,d,v,y,w,D,O,R){this.placement=new Ja(s,Bd(),d,D,O,R),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(s,d,v){let y=h.now(),w=()=>!this._forceFullPlacement&&h.now()-y>2;for(;this._currentPlacementIndex>=0;){let D=d[s[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(D.type==="symbol"&&(!D.minzoom||D.minzoom<=O)&&(!D.maxzoom||D.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Ni(D)),this._inProgressLayer.continuePlacement(v[D.source],this.placement,this._showCollisionBoxes,D,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let Du=512/i.X/2;class wi{constructor(s,d,v){this.tileID=s,this.bucketInstanceId=v,this._symbolsByKey={};let y=new Map;for(let w=0;w<d.length;w++){let D=d.get(w),O=D.key,R=y.get(O);R?R.push(D):y.set(O,[D])}for(let[w,D]of y){let O={positions:D.map(R=>({x:Math.floor(R.anchorX*Du),y:Math.floor(R.anchorY*Du)})),crossTileIDs:D.map(R=>R.crossTileID)};if(O.positions.length>128){let R=new i.av(O.positions.length,16,Uint16Array);for(let{x:F,y:V}of O.positions)R.add(F,V);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[w]=O}}getScaledCoordinates(s,d){let{x:v,y,z:w}=this.tileID.canonical,{x:D,y:O,z:R}=d.canonical,F=Du/Math.pow(2,R-w),V=(O*i.X+s.anchorY)*F,G=y*i.X*Du;return{x:Math.floor((D*i.X+s.anchorX)*F-v*i.X*Du),y:Math.floor(V-G)}}findMatches(s,d,v){let y=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let w=0;w<s.length;w++){let D=s.get(w);if(D.crossTileID)continue;let O=this._symbolsByKey[D.key];if(!O)continue;let R=this.getScaledCoordinates(D,d);if(O.index){let F=O.index.range(R.x-y,R.y-y,R.x+y,R.y+y).sort();for(let V of F){let G=O.crossTileIDs[V];if(!v[G]){v[G]=!0,D.crossTileID=G;break}}}else if(O.positions)for(let F=0;F<O.positions.length;F++){let V=O.positions[F],G=O.crossTileIDs[F];if(Math.abs(V.x-R.x)<=y&&Math.abs(V.y-R.y)<=y&&!v[G]){v[G]=!0,D.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class Y1{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Nu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let d=Math.round((s-this.lng)/360);if(d!==0)for(let v in this.indexes){let y=this.indexes[v],w={};for(let D in y){let O=y[D];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+d),w[O.tileID.key]=O}this.indexes[v]=w}this.lng=s}addBucket(s,d,v){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let w=0;w<d.symbolInstances.length;w++)d.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let y=this.usedCrossTileIDs[s.overscaledZ];for(let w in this.indexes){let D=this.indexes[w];if(Number(w)>s.overscaledZ)for(let O in D){let R=D[O];R.tileID.isChildOf(s)&&R.findMatches(d.symbolInstances,s,y)}else{let O=D[s.scaledTo(Number(w)).key];O&&O.findMatches(d.symbolInstances,s,y)}}for(let w=0;w<d.symbolInstances.length;w++){let D=d.symbolInstances.get(w);D.crossTileID||(D.crossTileID=v.generate(),y[D.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new wi(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(let v of d.getCrossTileIDsLists())for(let y of v)delete this.usedCrossTileIDs[s][y]}removeStaleBuckets(s){let d=!1;for(let v in this.indexes){let y=this.indexes[v];for(let w in y)s[y[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,y[w]),delete y[w],d=!0)}return d}}class KE{constructor(){this.layerIndexes={},this.crossTileIDs=new Y1,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,v){let y=this.layerIndexes[s.id];y===void 0&&(y=this.layerIndexes[s.id]=new Nu);let w=!1,D={};y.handleWrapJump(v);for(let O of d){let R=O.getBucket(s);R&&s.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(O.tileID,R,this.crossTileIDs)&&(w=!0),D[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(D)&&(w=!0),w}pruneUnusedLayers(s){let d={};s.forEach(v=>{d[v]=!0});for(let v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}let Ou=(E,s)=>i.t(E,s&&s.filter(d=>d.identifier!=="source.canvas")),Q8=i.aw();class Z1 extends i.E{constructor(s,d={}){super(),this._rtlPluginLoaded=()=>{for(let v in this.sourceCaches){let y=this.sourceCaches[v].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[v].reload()}},this.map=s,this.dispatcher=new Oe(We(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,y)=>this.getGlyphs(v,y)),this.dispatcher.registerMessageHandler("GI",(v,y)=>this.getImages(v,y)),this.imageManager=new ke,this.imageManager.setEventedParent(this),this.glyphManager=new Qe(s._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ft(256,512),this.crossTileSymbolIndex=new KE,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",i.ay()),pa().on(nt,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;let y=this.sourceCaches[v.sourceId];if(!y)return;let w=y.getSource();if(w&&w.vectorLayerIds)for(let D in this._layers){let O=this._layers[D];O.source===w.id&&this._validateLayer(O)}})}loadURL(s,d={},v){this.fire(new i.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;let y=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let w=this._loadStyleRequest;i.h(y,this._loadStyleRequest).then(D=>{this._loadStyleRequest=null,this._load(D.data,d,v)}).catch(D=>{this._loadStyleRequest=null,D&&!w.signal.aborted&&this.fire(new i.j(D))})}loadJSON(s,d={},v){this.fire(new i.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,h.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(s,d,v)}).catch(()=>{})}loadEmpty(){this.fire(new i.k("dataloading",{dataType:"style"})),this._load(Q8,{validate:!1})}_load(s,d,v){var y;let w=d.transformStyle?d.transformStyle(v,s):s;if(!d.validate||!Ou(this,i.u(w))){this._loaded=!0,this.stylesheet=w;for(let D in w.sources)this.addSource(D,w.sources[D],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new Ne(this.stylesheet.light),this.sky=new st(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new i.k("data",{dataType:"style"})),this.fire(new i.k("style.load"))}}_createLayers(){let s=i.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(d=>d.id),this._layers={},this._serializedLayers=null;for(let d of s){let v=i.aA(d);v.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=v}}_loadSprite(s,d=!1,v=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,D,O,R){return i._(this,void 0,void 0,function*(){let F=ne(w),V=O>1?"@2x":"",G={},Q={};for(let{id:ie,url:le}of F){let he=D.transformRequest(me(le,V,".json"),"SpriteJSON");G[ie]=i.h(he,R);let ye=D.transformRequest(me(le,V,".png"),"SpriteImage");Q[ie]=k.getImage(ye,R)}return yield Promise.all([...Object.values(G),...Object.values(Q)]),function(ie,le){return i._(this,void 0,void 0,function*(){let he={};for(let ye in ie){he[ye]={};let xe=h.getImageCanvasContext((yield le[ye]).data),Ie=(yield ie[ye]).data;for(let fe in Ie){let{width:Pe,height:Be,x:Ke,y:dt,sdf:It,pixelRatio:Vt,stretchX:tr,stretchY:jt,content:Rt,textFitWidth:fr,textFitHeight:Pr}=Ie[fe];he[ye][fe]={data:null,pixelRatio:Vt,sdf:It,stretchX:tr,stretchY:jt,content:Rt,textFitWidth:fr,textFitHeight:Pr,spriteData:{width:Pe,height:Be,x:Ke,y:dt,context:xe}}}}return he})}(G,Q)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(let D in w){this._spritesImagesIds[D]=[];let O=this._spritesImagesIds[D]?this._spritesImagesIds[D].filter(R=>!(R in w)):[];for(let R of O)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(let R in w[D]){let F=D==="default"?R:`${D}:${R}`;this._spritesImagesIds[D].push(F),F in this.imageManager.images?this.imageManager.updateImage(F,w[D][R],!1):this.imageManager.addImage(F,w[D][R]),d&&(this._changedImages[F]=!0)}}}).catch(w=>{this._spriteRequest=null,y=w,this.fire(new i.j(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"})),v&&v(y)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"}))}_validateLayer(s){let d=this.sourceCaches[s.source];if(!d)return;let v=s.sourceLayer;if(!v)return;let y=d.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(v)===-1)&&this.fire(new i.j(new Error(`Source layer "${v}" does not exist on source "${y.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,d=!1){let v=this._serializedAllLayers();if(!s||s.length===0)return Object.values(d?i.aB(v):v);let y=[];for(let w of s)if(v[w]){let D=d?i.aB(v[w]):v[w];y.push(D)}return y}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let d=Object.keys(this._layers);for(let v of d){let y=this._layers[v];y.type!=="custom"&&(s[v]=y.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(let s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let d=this._changed;if(d){let y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(y.length||w.length)&&this._updateWorkerLayers(y,w);for(let D in this._updatedSources){let O=this._updatedSources[D];if(O==="reload")this._reloadSource(D);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(D)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let D in this._updatedPaintProps)this._layers[D].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let v={};for(let y in this.sourceCaches){let w=this.sourceCaches[y];v[y]=w.used,w.used=!1}for(let y of this._order){let w=this._layers[y];w.recalculate(s,this._availableImages),!w.isHidden(s.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(let y in v){let w=this.sourceCaches[y];!!v[y]!=!!w.used&&w.fire(new i.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(s),this.sky.recalculate(s),this.z=s.zoom,d&&this.fire(new i.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){var v;this._checkLoaded();let y=this.serialize();if(s=d.transformStyle?d.transformStyle(y,s):s,((v=d.validate)===null||v===void 0||v)&&Ou(this,i.u(s)))return!1;(s=i.aB(s)).layers=i.az(s.layers);let w=i.aC(y,s),D=this._getOperationsToPerform(w);if(D.unimplemented.length>0)throw new Error(`Unimplemented: ${D.unimplemented.join(", ")}.`);if(D.operations.length===0)return!1;for(let O of D.operations)O();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let d=[],v=[];for(let y of s)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":d.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":d.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,y.args));break;case"setSky":d.push(()=>this.setSky.apply(this,y.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setTransition":d.push(()=>{});break;default:v.push(y.command);}return{operations:d,unimplemented:v}}addImage(s,d){if(this.getImage(s))return this.fire(new i.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new i.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,v={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(i.u.source,`sources.${s}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);let y=this.sourceCaches[s]=new Er(s,d,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:s})),y.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let v in this._layers)if(this._layers[v].source===s)return this.fire(new i.j(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));let d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new i.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let v=this.sourceCaches[s].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,v={}){this._checkLoaded();let y=s.id;if(this.getLayer(y))return void this.fire(new i.j(new Error(`Layer "${y}" already exists on this map.`)));let w;if(s.type==="custom"){if(Ou(this,i.aD(s)))return;w=i.aA(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(y,s.source),s=i.aB(s),s=i.e(s,{source:y})),this._validate(i.u.layer,`layers.${y}`,s,{arrayIndex:-1},v))return;w=i.aA(s),this._validateLayer(w),w.setEventedParent(this,{layer:{id:y}})}let D=d?this._order.indexOf(d):this._order.length;if(d&&D===-1)this.fire(new i.j(new Error(`Cannot add layer "${y}" before non-existing layer "${d}".`)));else{if(this._order.splice(D,0,y),this._layerOrderChanged=!0,this._layers[y]=w,this._removedLayers[y]&&w.source&&w.type!=="custom"){let O=this._removedLayers[y];delete this._removedLayers[y],O.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new i.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;let v=this._order.indexOf(s);this._order.splice(v,1);let y=d?this._order.indexOf(d):this._order.length;d&&y===-1?this.fire(new i.j(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(y,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let d=this._layers[s];if(!d)return void this.fire(new i.j(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);let v=this._order.indexOf(s);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,v){this._checkLoaded();let y=this.getLayer(s);y?y.minzoom===d&&y.maxzoom===v||(d!=null&&(y.minzoom=d),v!=null&&(y.maxzoom=v),this._updateLayer(y)):this.fire(new i.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,v={}){this._checkLoaded();let y=this.getLayer(s);if(y){if(!i.aE(y.filter,d))return d==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(i.u.filter,`layers.${y.id}.filter`,d,null,v)||(y.filter=i.aB(d),this._updateLayer(y)))}else this.fire(new i.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return i.aB(this.getLayer(s).filter)}setLayoutProperty(s,d,v,y={}){this._checkLoaded();let w=this.getLayer(s);w?i.aE(w.getLayoutProperty(d),v)||(w.setLayoutProperty(d,v,y),this._updateLayer(w)):this.fire(new i.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){let v=this.getLayer(s);if(v)return v.getLayoutProperty(d);this.fire(new i.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,v,y={}){this._checkLoaded();let w=this.getLayer(s);w?i.aE(w.getPaintProperty(d),v)||(w.setPaintProperty(d,v,y)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new i.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();let v=s.source,y=s.sourceLayer,w=this.sourceCaches[v];if(w===void 0)return void this.fire(new i.j(new Error(`The source '${v}' does not exist in the map's style.`)));let D=w.getSource().type;D==="geojson"&&y?this.fire(new i.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):D!=="vector"||y?(s.id===void 0&&this.fire(new i.j(new Error("The feature id parameter must be provided."))),w.setFeatureState(y,s.id,d)):this.fire(new i.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();let v=s.source,y=this.sourceCaches[v];if(y===void 0)return void this.fire(new i.j(new Error(`The source '${v}' does not exist in the map's style.`)));let w=y.getSource().type,D=w==="vector"?s.sourceLayer:void 0;w!=="vector"||D?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new i.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(D,s.id,d):this.fire(new i.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let d=s.source,v=s.sourceLayer,y=this.sourceCaches[d];if(y!==void 0)return y.getSource().type!=="vector"||v?(s.id===void 0&&this.fire(new i.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(v,s.id)):void this.fire(new i.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new i.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return i.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=i.aF(this.sourceCaches,w=>w.serialize()),d=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,y=this.stylesheet;return i.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:s,layers:d,terrain:v},w=>w!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let d=D=>this._layers[D].type==="fill-extrusion",v={},y=[];for(let D=this._order.length-1;D>=0;D--){let O=this._order[D];if(d(O)){v[O]=D;for(let R of s){let F=R[O];if(F)for(let V of F)y.push(V)}}}y.sort((D,O)=>O.intersectionZ-D.intersectionZ);let w=[];for(let D=this._order.length-1;D>=0;D--){let O=this._order[D];if(d(O))for(let R=y.length-1;R>=0;R--){let F=y[R].feature;if(v[F.layer.id]<D)break;w.push(F),y.pop()}else for(let R of s){let F=R[O];if(F)for(let V of F)w.push(V.feature)}}return w}queryRenderedFeatures(s,d,v){d&&d.filter&&this._validate(i.u.filter,"queryRenderedFeatures.filter",d.filter,null,d);let y={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new i.j(new Error("parameters.layers must be an Array."))),[];for(let O of d.layers){let R=this._layers[O];if(!R)return this.fire(new i.j(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];y[R.source]=!0}}let w=[];d.availableImages=this._availableImages;let D=this._serializedAllLayers();for(let O in this.sourceCaches)d.layers&&!y[O]||w.push(Pt(this.sourceCaches[O],this._layers,D,s,d,v));return this.placement&&w.push(function(O,R,F,V,G,Q,ie){let le={},he=Q.queryRenderedSymbols(V),ye=[];for(let xe of Object.keys(he).map(Number))ye.push(ie[xe]);ye.sort(Mt);for(let xe of ye){let Ie=xe.featureIndex.lookupSymbolFeatures(he[xe.bucketInstanceId],R,xe.bucketIndex,xe.sourceLayerIndex,G.filter,G.layers,G.availableImages,O);for(let fe in Ie){let Pe=le[fe]=le[fe]||[],Be=Ie[fe];Be.sort((Ke,dt)=>{let It=xe.featureSortOrder;if(It){let Vt=It.indexOf(Ke.featureIndex);return It.indexOf(dt.featureIndex)-Vt}return dt.featureIndex-Ke.featureIndex});for(let Ke of Be)Pe.push(Ke)}}for(let xe in le)le[xe].forEach(Ie=>{let fe=Ie.feature,Pe=F[O[xe].source].getFeatureState(fe.layer["source-layer"],fe.id);fe.source=fe.layer.source,fe.layer["source-layer"]&&(fe.sourceLayer=fe.layer["source-layer"]),fe.state=Pe});return le}(this._layers,D,this.sourceCaches,s,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(s,d){d&&d.filter&&this._validate(i.u.filter,"querySourceFeatures.filter",d.filter,null,d);let v=this.sourceCaches[s];return v?function(y,w){let D=y.getRenderableIds().map(F=>y.getTileByID(F)),O=[],R={};for(let F=0;F<D.length;F++){let V=D[F],G=V.tileID.canonical.key;R[G]||(R[G]=!0,V.querySourceFeatures(O,w))}return O}(v,d):[]}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();let v=this.light.getLight(),y=!1;for(let D in s)if(!i.aE(s[D],v[D])){y=!0;break}if(!y)return;let w={now:h.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(w)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,d={}){let v=this.getSky(),y=!1;if(!s&&!v)return;if(s&&!v)y=!0;else if(!s&&v)y=!0;else for(let D in s)if(!i.aE(s[D],v[D])){y=!0;break}if(!y)return;let w={now:h.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,d),this.sky.updateTransitions(w)}_validate(s,d,v,y,w={}){return(!w||w.validate!==!1)&&Ou(this,s.call(i.u,i.e({key:d,style:this.serialize(),value:v,styleSpec:i.v},y)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),pa().off(nt,this._rtlPluginLoaded);for(let d in this._layers)this._layers[d].setEventedParent(null);for(let d in this.sourceCaches){let v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,v,y,w=!1){let D=!1,O=!1,R={};for(let F of this._order){let V=this._layers[F];if(V.type!=="symbol")continue;if(!R[V.source]){let Q=this.sourceCaches[V.source];R[V.source]=Q.getRenderableIds(!0).map(ie=>Q.getTileByID(ie)).sort((ie,le)=>le.tileID.overscaledZ-ie.tileID.overscaledZ||(ie.tileID.isLessThan(le.tileID)?-1:1))}let G=this.crossTileSymbolIndex.addLayer(V,R[V.source],s.center.lng);D=D||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.now(),s.zoom))&&(this.pauseablePlacement=new fy(s,this.map.terrain,this._order,w,d,v,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.now()),O=!0),D&&this.pauseablePlacement.placement.setStale()),O||D)for(let F of this._order){let V=this._layers[F];V.type==="symbol"&&this.placement.updateLayerOpacities(V,R[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();let y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,d.icons),v})}getGlyphs(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.glyphManager.getGlyphs(d.stacks),y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(i.u.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,v={},y){this._checkLoaded();let w=[{id:s,url:d}],D=[...ne(this.stylesheet.sprite),...w];this._validate(i.u.sprite,"sprite",D,null,v)||(this.stylesheet.sprite=D,this._loadSprite(w,!0,y))}removeSprite(s){this._checkLoaded();let d=ne(this.stylesheet.sprite);if(d.find(v=>v.id===s)){if(this._spritesImagesIds[s])for(let v of this._spritesImagesIds[s])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex(v=>v.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"}))}else this.fire(new i.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(s,d={},v){this._checkLoaded(),s&&this._validate(i.u.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,v):(this._unloadSprite(),v&&v(null)))}}var Vd=i.Y([{name:"a_pos",type:"Int16",components:2}]);let mp={prelude:Fn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Fn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Fn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Fn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Fn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Fn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Fn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Fn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Fn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Fn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Fn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Fn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Fn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Fn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Fn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Fn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Fn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Fn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Fn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Fn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Fn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Fn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Fn(E,s){let d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=s.match(/attribute ([\w]+) ([\w]+)/g),y=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=w?w.concat(y):y,O={};return{fragmentSource:E=E.replace(d,(R,F,V,G,Q)=>(O[Q]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
varying ${V} ${G} ${Q};
#else
uniform ${V} ${G} u_${Q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Q}
    ${V} ${G} ${Q} = u_${Q};
#endif
`)),vertexSource:s=s.replace(d,(R,F,V,G,Q)=>{let ie=G==="float"?"vec2":"vec4",le=Q.match(/color/)?"color":ie;return O[Q]?F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
attribute ${V} ${ie} a_${Q};
varying ${V} ${G} ${Q};
#else
uniform ${V} ${G} u_${Q};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = a_${Q};
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = unpack_mix_${le}(a_${Q}, u_${Q}_t);
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
attribute ${V} ${ie} a_${Q};
#else
uniform ${V} ${G} u_${Q};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${V} ${G} ${Q} = a_${Q};
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${V} ${G} ${Q} = unpack_mix_${le}(a_${Q}, u_${Q}_t);
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`}),staticAttributes:v,staticUniforms:D}}class XE{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,v,y,w,D,O,R,F){this.context=s;let V=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!V&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(V=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||V||this.boundIndexBuffer!==w||this.boundVertexOffset!==D||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==F?this.freshBind(d,v,y,w,D,O,R,F):(s.bindVertexArray.set(this.vao),O&&O.bind(),w&&w.dynamicDraw&&w.bind(),R&&R.bind(),F&&F.bind())}freshBind(s,d,v,y,w,D,O,R){let F=s.numAttributes,V=this.context,G=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=y,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=D,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,d.enableAttributes(G,s);for(let Q of v)Q.enableAttributes(G,s);D&&D.enableAttributes(G,s),O&&O.enableAttributes(G,s),R&&R.enableAttributes(G,s),d.bind(),d.setVertexAttribPointers(G,s,w);for(let Q of v)Q.bind(),Q.setVertexAttribPointers(G,s,w);D&&(D.bind(),D.setVertexAttribPointers(G,s,w)),y&&y.bind(),O&&(O.bind(),O.setVertexAttribPointers(G,s,w)),R&&(R.bind(),R.setVertexAttribPointers(G,s,w)),V.currentNumAttributes=F}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let JE=(E,s,d,v,y)=>({u_matrix:E,u_texture:0,u_ele_delta:s,u_fog_matrix:d,u_fog_color:v?v.properties.get("fog-color"):i.aM.white,u_fog_ground_blend:v?v.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?v.calculateFogBlendOpacity(y):0,u_horizon_color:v?v.properties.get("horizon-color"):i.aM.white,u_horizon_fog_blend:v?v.properties.get("horizon-fog-blend"):1});function Im(E){let s=[];for(let d=0;d<E.length;d++){if(E[d]===null)continue;let v=E[d].split(" ");s.push(v.pop())}return s}class QE{constructor(s,d,v,y,w,D){let O=s.gl;this.program=O.createProgram();let R=Im(d.staticAttributes),F=v?v.getBinderAttributes():[],V=R.concat(F),G=mp.prelude.staticUniforms?Im(mp.prelude.staticUniforms):[],Q=d.staticUniforms?Im(d.staticUniforms):[],ie=v?v.getBinderUniforms():[],le=G.concat(Q).concat(ie),he=[];for(let Ke of le)he.indexOf(Ke)<0&&he.push(Ke);let ye=v?v.defines():[];w&&ye.push("#define OVERDRAW_INSPECTOR;"),D&&ye.push("#define TERRAIN3D;");let xe=ye.concat(mp.prelude.fragmentSource,d.fragmentSource).join(`
`),Ie=ye.concat(mp.prelude.vertexSource,d.vertexSource).join(`
`),fe=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(fe,xe),O.compileShader(fe),!O.getShaderParameter(fe,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(fe)}`);O.attachShader(this.program,fe);let Pe=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(Pe,Ie),O.compileShader(Pe),!O.getShaderParameter(Pe,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(Pe)}`);O.attachShader(this.program,Pe),this.attributes={};let Be={};this.numAttributes=V.length;for(let Ke=0;Ke<this.numAttributes;Ke++)V[Ke]&&(O.bindAttribLocation(this.program,Ke,V[Ke]),this.attributes[V[Ke]]=Ke);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(Pe),O.deleteShader(fe);for(let Ke=0;Ke<he.length;Ke++){let dt=he[Ke];if(dt&&!Be[dt]){let It=O.getUniformLocation(this.program,dt);It&&(Be[dt]=It)}}this.fixedUniforms=y(s,Be),this.terrainUniforms=((Ke,dt)=>({u_depth:new i.aH(Ke,dt.u_depth),u_terrain:new i.aH(Ke,dt.u_terrain),u_terrain_dim:new i.aI(Ke,dt.u_terrain_dim),u_terrain_matrix:new i.aJ(Ke,dt.u_terrain_matrix),u_terrain_unpack:new i.aK(Ke,dt.u_terrain_unpack),u_terrain_exaggeration:new i.aI(Ke,dt.u_terrain_exaggeration)}))(s,Be),this.binderUniforms=v?v.getUniforms(s,Be):[]}draw(s,d,v,y,w,D,O,R,F,V,G,Q,ie,le,he,ye,xe,Ie){let fe=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(v),s.setStencilMode(y),s.setColorMode(w),s.setCullFace(D),R){s.activeTexture.set(fe.TEXTURE2),fe.bindTexture(fe.TEXTURE_2D,R.depthTexture),s.activeTexture.set(fe.TEXTURE3),fe.bindTexture(fe.TEXTURE_2D,R.texture);for(let Be in this.terrainUniforms)this.terrainUniforms[Be].set(R[Be])}for(let Be in this.fixedUniforms)this.fixedUniforms[Be].set(O[Be]);he&&he.setUniforms(s,this.binderUniforms,ie,{zoom:le});let Pe=0;switch(d){case fe.LINES:Pe=2;break;case fe.TRIANGLES:Pe=3;break;case fe.LINE_STRIP:Pe=1;}for(let Be of Q.get()){let Ke=Be.vaos||(Be.vaos={});(Ke[F]||(Ke[F]=new XE)).bind(s,this,V,he?he.getPaintVertexBuffers():[],G,Be.vertexOffset,ye,xe,Ie),fe.drawElements(d,Be.primitiveLength*Pe,fe.UNSIGNED_SHORT,Be.primitiveOffset*Pe*2)}}}function K1(E,s,d){let v=1/vn(d,1,s.transform.tileZoom),y=Math.pow(2,d.tileID.overscaledZ),w=d.tileSize*Math.pow(2,s.transform.tileZoom)/y,D=w*(d.tileID.canonical.x+d.tileID.wrap*y),O=w*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[D>>16,O>>16],u_pixel_coord_lower:[65535&D,65535&O]}}let py=(E,s,d,v)=>{let y=s.style.light,w=y.properties.get("position"),D=[w.x,w.y,w.z],O=function(){var F=new i.A(9);return i.A!=Float32Array&&(F[1]=0,F[2]=0,F[3]=0,F[5]=0,F[6]=0,F[7]=0),F[0]=1,F[4]=1,F[8]=1,F}();y.properties.get("anchor")==="viewport"&&function(F,V){var G=Math.sin(V),Q=Math.cos(V);F[0]=Q,F[1]=G,F[2]=0,F[3]=-G,F[4]=Q,F[5]=0,F[6]=0,F[7]=0,F[8]=1}(O,-s.transform.angle),function(F,V,G){var Q=V[0],ie=V[1],le=V[2];F[0]=Q*G[0]+ie*G[3]+le*G[6],F[1]=Q*G[1]+ie*G[4]+le*G[7],F[2]=Q*G[2]+ie*G[5]+le*G[8]}(D,D,O);let R=y.properties.get("color");return{u_matrix:E,u_lightpos:D,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+d,u_opacity:v}},X1=(E,s,d,v,y,w,D)=>i.e(py(E,s,d,v),K1(w,s,D),{u_height_factor:-Math.pow(2,y.overscaledZ)/D.tileSize/8}),Tm=E=>({u_matrix:E}),qD=(E,s,d,v)=>i.e(Tm(E),K1(d,s,v)),eF=(E,s)=>({u_matrix:E,u_world:s}),zD=(E,s,d,v,y)=>i.e(qD(E,s,d,v),{u_world:y}),tF=(E,s,d,v)=>{let y=E.transform,w,D;if(v.paint.get("circle-pitch-alignment")==="map"){let O=vn(d,1,y.zoom);w=!0,D=[O,O]}else w=!1,D=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(s.posMatrix,d,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:D}},Gd=(E,s,d)=>({u_matrix:E,u_inv_matrix:s,u_camera_to_center_distance:d.cameraToCenterDistance,u_viewport_size:[d.width,d.height]}),dy=(E,s,d=1)=>({u_matrix:E,u_color:s,u_overlay:0,u_overlay_scale:d}),As=E=>({u_matrix:E}),Ds=(E,s,d,v)=>({u_matrix:E,u_extrude_scale:vn(s,1,d),u_intensity:v}),J1=(E,s,d,v)=>{let y=i.H();i.aP(y,0,E.width,E.height,0,0,1);let w=E.context.gl;return{u_matrix:y,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:d,u_color_ramp:v,u_opacity:s.paint.get("heatmap-opacity")}};function Q1(E,s){let d=Math.pow(2,s.canonical.z),v=s.canonical.y;return[new i.Z(0,v/d).toLngLat().lat,new i.Z(0,(v+1)/d).toLngLat().lat]}let e_=(E,s,d,v)=>{let y=E.transform;return{u_matrix:BD(E,s,d,v),u_ratio:1/vn(s,1,y.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},FD=(E,s,d,v,y)=>i.e(e_(E,s,d,y),{u_image:0,u_image_height:v}),Mm=(E,s,d,v,y)=>{let w=E.transform,D=UD(s,w);return{u_matrix:BD(E,s,d,y),u_texsize:s.imageAtlasTexture.size,u_ratio:1/vn(s,1,w.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[D,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},rF=(E,s,d,v,y,w)=>{let D=E.lineAtlas,O=UD(s,E.transform),R=d.layout.get("line-cap")==="round",F=D.getDash(v.from,R),V=D.getDash(v.to,R),G=F.width*y.fromScale,Q=V.width*y.toScale;return i.e(e_(E,s,d,w),{u_patternscale_a:[O/G,-F.height/2],u_patternscale_b:[O/Q,-V.height/2],u_sdfgamma:D.width/(256*Math.min(G,Q)*E.pixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:V.y,u_mix:y.t})};function UD(E,s){return 1/vn(E,1,s.tileZoom)}function BD(E,s,d,v){return E.translatePosMatrix(v?v.posMatrix:s.tileID.posMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}let nF=(E,s,d,v,y)=>{return{u_matrix:E,u_tl_parent:s,u_scale_parent:d,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(D=y.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(w=y.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:oF(y.paint.get("raster-hue-rotate"))};var w,D};function oF(E){E*=Math.PI/180;let s=Math.sin(E),d=Math.cos(E);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}let VD=(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie)=>{let le=D.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:le.cameraToCenterDistance,u_pitch:le.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:le.width/le.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:R,u_coord_matrix:F,u_is_text:+G,u_pitch_with_map:+v,u_is_along_line:y,u_is_variable_anchor:w,u_texsize:Q,u_texture:0,u_translation:V,u_pitched_scale:ie}},hy=(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie,le)=>{let he=D.transform;return i.e(VD(E,s,d,v,y,w,D,O,R,F,V,G,Q,le),{u_gamma_scale:v?Math.cos(he._pitch)*he.cameraToCenterDistance:1,u_device_pixel_ratio:D.pixelRatio,u_is_halo:+ie})},eS=(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie)=>i.e(hy(E,s,d,v,y,w,D,O,R,F,V,!0,G,!0,ie),{u_texsize_icon:Q,u_texture_icon:1}),t_=(E,s,d)=>({u_matrix:E,u_opacity:s,u_color:d}),tS=(E,s,d,v,y,w)=>i.e(function(D,O,R,F){let V=R.imageManager.getPattern(D.from.toString()),G=R.imageManager.getPattern(D.to.toString()),{width:Q,height:ie}=R.imageManager.getPixelSize(),le=Math.pow(2,F.tileID.overscaledZ),he=F.tileSize*Math.pow(2,R.transform.tileZoom)/le,ye=he*(F.tileID.canonical.x+F.tileID.wrap*le),xe=he*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[Q,ie],u_mix:O.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/vn(F,1,R.transform.tileZoom),u_pixel_coord_upper:[ye>>16,xe>>16],u_pixel_coord_lower:[65535&ye,65535&xe]}}(v,w,d,y),{u_matrix:E,u_opacity:s}),rS={fillExtrusion:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_lightpos:new i.aN(E,s.u_lightpos),u_lightintensity:new i.aI(E,s.u_lightintensity),u_lightcolor:new i.aN(E,s.u_lightcolor),u_vertical_gradient:new i.aI(E,s.u_vertical_gradient),u_opacity:new i.aI(E,s.u_opacity)}),fillExtrusionPattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_lightpos:new i.aN(E,s.u_lightpos),u_lightintensity:new i.aI(E,s.u_lightintensity),u_lightcolor:new i.aN(E,s.u_lightcolor),u_vertical_gradient:new i.aI(E,s.u_vertical_gradient),u_height_factor:new i.aI(E,s.u_height_factor),u_image:new i.aH(E,s.u_image),u_texsize:new i.aO(E,s.u_texsize),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade),u_opacity:new i.aI(E,s.u_opacity)}),fill:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix)}),fillPattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_image:new i.aH(E,s.u_image),u_texsize:new i.aO(E,s.u_texsize),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade)}),fillOutline:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_world:new i.aO(E,s.u_world)}),fillOutlinePattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_world:new i.aO(E,s.u_world),u_image:new i.aH(E,s.u_image),u_texsize:new i.aO(E,s.u_texsize),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade)}),circle:(E,s)=>({u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_scale_with_map:new i.aH(E,s.u_scale_with_map),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_extrude_scale:new i.aO(E,s.u_extrude_scale),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_matrix:new i.aJ(E,s.u_matrix)}),collisionBox:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_pixel_extrude_scale:new i.aO(E,s.u_pixel_extrude_scale)}),collisionCircle:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_inv_matrix:new i.aJ(E,s.u_inv_matrix),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_viewport_size:new i.aO(E,s.u_viewport_size)}),debug:(E,s)=>({u_color:new i.aL(E,s.u_color),u_matrix:new i.aJ(E,s.u_matrix),u_overlay:new i.aH(E,s.u_overlay),u_overlay_scale:new i.aI(E,s.u_overlay_scale)}),clippingMask:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix)}),heatmap:(E,s)=>({u_extrude_scale:new i.aI(E,s.u_extrude_scale),u_intensity:new i.aI(E,s.u_intensity),u_matrix:new i.aJ(E,s.u_matrix)}),heatmapTexture:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_world:new i.aO(E,s.u_world),u_image:new i.aH(E,s.u_image),u_color_ramp:new i.aH(E,s.u_color_ramp),u_opacity:new i.aI(E,s.u_opacity)}),hillshade:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_image:new i.aH(E,s.u_image),u_latrange:new i.aO(E,s.u_latrange),u_light:new i.aO(E,s.u_light),u_shadow:new i.aL(E,s.u_shadow),u_highlight:new i.aL(E,s.u_highlight),u_accent:new i.aL(E,s.u_accent)}),hillshadePrepare:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_image:new i.aH(E,s.u_image),u_dimension:new i.aO(E,s.u_dimension),u_zoom:new i.aI(E,s.u_zoom),u_unpack:new i.aK(E,s.u_unpack)}),line:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels)}),lineGradient:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels),u_image:new i.aH(E,s.u_image),u_image_height:new i.aI(E,s.u_image_height)}),linePattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_texsize:new i.aO(E,s.u_texsize),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_image:new i.aH(E,s.u_image),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade)}),lineSDF:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels),u_patternscale_a:new i.aO(E,s.u_patternscale_a),u_patternscale_b:new i.aO(E,s.u_patternscale_b),u_sdfgamma:new i.aI(E,s.u_sdfgamma),u_image:new i.aH(E,s.u_image),u_tex_y_a:new i.aI(E,s.u_tex_y_a),u_tex_y_b:new i.aI(E,s.u_tex_y_b),u_mix:new i.aI(E,s.u_mix)}),raster:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_tl_parent:new i.aO(E,s.u_tl_parent),u_scale_parent:new i.aI(E,s.u_scale_parent),u_buffer_scale:new i.aI(E,s.u_buffer_scale),u_fade_t:new i.aI(E,s.u_fade_t),u_opacity:new i.aI(E,s.u_opacity),u_image0:new i.aH(E,s.u_image0),u_image1:new i.aH(E,s.u_image1),u_brightness_low:new i.aI(E,s.u_brightness_low),u_brightness_high:new i.aI(E,s.u_brightness_high),u_saturation_factor:new i.aI(E,s.u_saturation_factor),u_contrast_factor:new i.aI(E,s.u_contrast_factor),u_spin_weights:new i.aN(E,s.u_spin_weights)}),symbolIcon:(E,s)=>({u_is_size_zoom_constant:new i.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.aH(E,s.u_is_size_feature_constant),u_size_t:new i.aI(E,s.u_size_t),u_size:new i.aI(E,s.u_size),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_pitch:new i.aI(E,s.u_pitch),u_rotate_symbol:new i.aH(E,s.u_rotate_symbol),u_aspect_ratio:new i.aI(E,s.u_aspect_ratio),u_fade_change:new i.aI(E,s.u_fade_change),u_matrix:new i.aJ(E,s.u_matrix),u_label_plane_matrix:new i.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new i.aJ(E,s.u_coord_matrix),u_is_text:new i.aH(E,s.u_is_text),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_is_along_line:new i.aH(E,s.u_is_along_line),u_is_variable_anchor:new i.aH(E,s.u_is_variable_anchor),u_texsize:new i.aO(E,s.u_texsize),u_texture:new i.aH(E,s.u_texture),u_translation:new i.aO(E,s.u_translation),u_pitched_scale:new i.aI(E,s.u_pitched_scale)}),symbolSDF:(E,s)=>({u_is_size_zoom_constant:new i.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.aH(E,s.u_is_size_feature_constant),u_size_t:new i.aI(E,s.u_size_t),u_size:new i.aI(E,s.u_size),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_pitch:new i.aI(E,s.u_pitch),u_rotate_symbol:new i.aH(E,s.u_rotate_symbol),u_aspect_ratio:new i.aI(E,s.u_aspect_ratio),u_fade_change:new i.aI(E,s.u_fade_change),u_matrix:new i.aJ(E,s.u_matrix),u_label_plane_matrix:new i.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new i.aJ(E,s.u_coord_matrix),u_is_text:new i.aH(E,s.u_is_text),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_is_along_line:new i.aH(E,s.u_is_along_line),u_is_variable_anchor:new i.aH(E,s.u_is_variable_anchor),u_texsize:new i.aO(E,s.u_texsize),u_texture:new i.aH(E,s.u_texture),u_gamma_scale:new i.aI(E,s.u_gamma_scale),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_is_halo:new i.aH(E,s.u_is_halo),u_translation:new i.aO(E,s.u_translation),u_pitched_scale:new i.aI(E,s.u_pitched_scale)}),symbolTextAndIcon:(E,s)=>({u_is_size_zoom_constant:new i.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.aH(E,s.u_is_size_feature_constant),u_size_t:new i.aI(E,s.u_size_t),u_size:new i.aI(E,s.u_size),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_pitch:new i.aI(E,s.u_pitch),u_rotate_symbol:new i.aH(E,s.u_rotate_symbol),u_aspect_ratio:new i.aI(E,s.u_aspect_ratio),u_fade_change:new i.aI(E,s.u_fade_change),u_matrix:new i.aJ(E,s.u_matrix),u_label_plane_matrix:new i.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new i.aJ(E,s.u_coord_matrix),u_is_text:new i.aH(E,s.u_is_text),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_is_along_line:new i.aH(E,s.u_is_along_line),u_is_variable_anchor:new i.aH(E,s.u_is_variable_anchor),u_texsize:new i.aO(E,s.u_texsize),u_texsize_icon:new i.aO(E,s.u_texsize_icon),u_texture:new i.aH(E,s.u_texture),u_texture_icon:new i.aH(E,s.u_texture_icon),u_gamma_scale:new i.aI(E,s.u_gamma_scale),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_is_halo:new i.aH(E,s.u_is_halo),u_translation:new i.aO(E,s.u_translation),u_pitched_scale:new i.aI(E,s.u_pitched_scale)}),background:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_opacity:new i.aI(E,s.u_opacity),u_color:new i.aL(E,s.u_color)}),backgroundPattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_opacity:new i.aI(E,s.u_opacity),u_image:new i.aH(E,s.u_image),u_pattern_tl_a:new i.aO(E,s.u_pattern_tl_a),u_pattern_br_a:new i.aO(E,s.u_pattern_br_a),u_pattern_tl_b:new i.aO(E,s.u_pattern_tl_b),u_pattern_br_b:new i.aO(E,s.u_pattern_br_b),u_texsize:new i.aO(E,s.u_texsize),u_mix:new i.aI(E,s.u_mix),u_pattern_size_a:new i.aO(E,s.u_pattern_size_a),u_pattern_size_b:new i.aO(E,s.u_pattern_size_b),u_scale_a:new i.aI(E,s.u_scale_a),u_scale_b:new i.aI(E,s.u_scale_b),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_tile_units_to_pixels:new i.aI(E,s.u_tile_units_to_pixels)}),terrain:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_texture:new i.aH(E,s.u_texture),u_ele_delta:new i.aI(E,s.u_ele_delta),u_fog_matrix:new i.aJ(E,s.u_fog_matrix),u_fog_color:new i.aL(E,s.u_fog_color),u_fog_ground_blend:new i.aI(E,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new i.aI(E,s.u_fog_ground_blend_opacity),u_horizon_color:new i.aL(E,s.u_horizon_color),u_horizon_fog_blend:new i.aI(E,s.u_horizon_fog_blend)}),terrainDepth:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ele_delta:new i.aI(E,s.u_ele_delta)}),terrainCoords:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_texture:new i.aH(E,s.u_texture),u_terrain_coords_id:new i.aI(E,s.u_terrain_coords_id),u_ele_delta:new i.aI(E,s.u_ele_delta)}),sky:(E,s)=>({u_sky_color:new i.aL(E,s.u_sky_color),u_horizon_color:new i.aL(E,s.u_horizon_color),u_horizon:new i.aI(E,s.u_horizon),u_sky_horizon_blend:new i.aI(E,s.u_sky_horizon_blend)})};class lc{constructor(s,d,v){this.context=s;let y=s.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let iF={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class nS{constructor(s,d,v,y){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=y,this.context=s;let w=s.gl;this.buffer=w.createBuffer(),s.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let v=0;v<this.attributes.length;v++){let y=d.attributes[this.attributes[v].name];y!==void 0&&s.enableVertexAttribArray(y)}}setVertexAttribPointers(s,d,v){for(let y=0;y<this.attributes.length;y++){let w=this.attributes[y],D=d.attributes[w.name];D!==void 0&&s.vertexAttribPointer(D,w.components,s[iF[w.type]],!1,this.itemSize,w.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Hd=new WeakMap;function gp(E){var s;if(Hd.has(E))return Hd.get(E);{let d=(s=E.getParameter(E.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Hd.set(E,d),d}}class Wn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class r_ extends Wn{getDefault(){return i.aM.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class aF extends Wn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Cm extends Wn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class sF extends Wn{getDefault(){return[!0,!0,!0,!0]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class GD extends Wn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class lF extends Wn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class HD extends Wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class oS extends Wn{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class WD extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class $D extends Wn{getDefault(){return[0,1]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class YD extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class ZD extends Wn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Wd extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class KD extends Wn{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class uF extends Wn{getDefault(){return i.aM.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class XD extends Wn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class my extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class cF extends Wn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class n_ extends Wn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class fF extends Wn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class pF extends Wn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class JD extends Wn{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class QD extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class e4 extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class iS extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class t4 extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class o_ extends Wn{getDefault(){return null}set(s){let d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class _f extends Wn{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;let v=this.gl;gp(v)?v.bindVertexArray(s):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class aS extends Wn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class sS extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class lS extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class i_ extends Wn{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class uS extends i_{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class $d extends i_{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class cS extends i_{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class dF{constructor(s,d,v,y,w){this.context=s,this.width=d,this.height=v;let D=s.gl,O=this.framebuffer=D.createFramebuffer();if(this.colorAttachment=new uS(s,O),y)this.depthAttachment=w?new cS(s,O):new $d(s,O);else if(w)throw new Error("Stencil cannot be set without depth");if(D.checkFramebufferStatus(D.FRAMEBUFFER)!==D.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){let v=this.depthAttachment.get();v&&s.deleteRenderbuffer(v)}s.deleteFramebuffer(this.framebuffer)}}class hi{constructor(s,d,v){this.blendFunction=s,this.blendColor=d,this.mask=v}}hi.Replace=[1,0],hi.disabled=new hi(hi.Replace,i.aM.transparent,[!1,!1,!1,!1]),hi.unblended=new hi(hi.Replace,i.aM.transparent,[!0,!0,!0,!0]),hi.alphaBlended=new hi([1,771],i.aM.transparent,[!0,!0,!0,!0]);class hF{constructor(s){var d,v;if(this.gl=s,this.clearColor=new r_(this),this.clearDepth=new aF(this),this.clearStencil=new Cm(this),this.colorMask=new sF(this),this.depthMask=new GD(this),this.stencilMask=new lF(this),this.stencilFunc=new HD(this),this.stencilOp=new oS(this),this.stencilTest=new WD(this),this.depthRange=new $D(this),this.depthTest=new YD(this),this.depthFunc=new ZD(this),this.blend=new Wd(this),this.blendFunc=new KD(this),this.blendColor=new uF(this),this.blendEquation=new XD(this),this.cullFace=new my(this),this.cullFaceSide=new cF(this),this.frontFace=new n_(this),this.program=new fF(this),this.activeTexture=new pF(this),this.viewport=new JD(this),this.bindFramebuffer=new QD(this),this.bindRenderbuffer=new e4(this),this.bindTexture=new iS(this),this.bindVertexBuffer=new t4(this),this.bindElementBuffer=new o_(this),this.bindVertexArray=new _f(this),this.pixelStoreUnpack=new aS(this),this.pixelStoreUnpackPremultiplyAlpha=new sS(this),this.pixelStoreUnpackFlipY=new lS(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),gp(s)){this.HALF_FLOAT=s.HALF_FLOAT;let y=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=s.RGBA16F)!==null&&d!==void 0?d:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(v=s.RGB16F)!==null&&v!==void 0?v:y==null?void 0:y.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let y=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new lc(this,s,d)}createVertexBuffer(s,d,v){return new nS(this,s,d,v)}createRenderbuffer(s,d,v){let y=this.gl,w=y.createRenderbuffer();return this.bindRenderbuffer.set(w),y.renderbufferStorage(y.RENDERBUFFER,s,d,v),this.bindRenderbuffer.set(null),w}createFramebuffer(s,d,v,y){return new dF(this,s,d,v,y)}clear({color:s,depth:d,stencil:v}){let y=this.gl,w=0;s&&(w|=y.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(w|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(w|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),y.clear(w)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){i.aE(s.blendFunction,hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return gp(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return gp(this.gl)?this.gl.deleteVertexArray(s):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class un{constructor(s,d,v){this.func=s,this.mask=d,this.range=v}}un.ReadOnly=!1,un.ReadWrite=!0,un.disabled=new un(519,un.ReadOnly,[0,1]);let a_=7680;class yo{constructor(s,d,v,y,w,D){this.test=s,this.ref=d,this.mask=v,this.fail=y,this.depthFail=w,this.pass=D}}yo.disabled=new yo({func:519,mask:0},0,0,a_,a_,a_);class lo{constructor(s,d,v){this.enable=s,this.mode=d,this.frontFace=v}}let Yd;function gy(E,s,d,v,y){let w=E.context,D=w.gl,O=E.useProgram("collisionBox"),R=[],F=0,V=0;for(let xe=0;xe<v.length;xe++){let Ie=v[xe],fe=s.getTile(Ie).getBucket(d);if(!fe)continue;let Pe=y?fe.textCollisionBox:fe.iconCollisionBox,Be=fe.collisionCircleArray;if(Be.length>0){let Ke=i.H();i.aQ(Ke,fe.placementInvProjMatrix,E.transform.glCoordMatrix),i.aQ(Ke,Ke,fe.placementViewportMatrix),R.push({circleArray:Be,circleOffset:V,transform:Ie.posMatrix,invTransform:Ke,coord:Ie}),F+=Be.length/4,V=F}Pe&&O.draw(w,D.LINES,un.disabled,yo.disabled,E.colorModeForRenderPass(),lo.disabled,{u_matrix:Ie.posMatrix,u_pixel_extrude_scale:[1/(G=E.transform).width,1/G.height]},E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ie),d.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,null,E.transform.zoom,null,null,Pe.collisionVertexBuffer)}var G;if(!y||!R.length)return;let Q=E.useProgram("collisionCircle"),ie=new i.aR;ie.resize(4*F),ie._trim();let le=0;for(let xe of R)for(let Ie=0;Ie<xe.circleArray.length/4;Ie++){let fe=4*Ie,Pe=xe.circleArray[fe+0],Be=xe.circleArray[fe+1],Ke=xe.circleArray[fe+2],dt=xe.circleArray[fe+3];ie.emplace(le++,Pe,Be,Ke,dt,0),ie.emplace(le++,Pe,Be,Ke,dt,1),ie.emplace(le++,Pe,Be,Ke,dt,2),ie.emplace(le++,Pe,Be,Ke,dt,3)}(!Yd||Yd.length<2*F)&&(Yd=function(xe){let Ie=2*xe,fe=new i.aT;fe.resize(Ie),fe._trim();for(let Pe=0;Pe<Ie;Pe++){let Be=6*Pe;fe.uint16[Be+0]=4*Pe+0,fe.uint16[Be+1]=4*Pe+1,fe.uint16[Be+2]=4*Pe+2,fe.uint16[Be+3]=4*Pe+2,fe.uint16[Be+4]=4*Pe+3,fe.uint16[Be+5]=4*Pe+0}return fe}(F));let he=w.createIndexBuffer(Yd,!0),ye=w.createVertexBuffer(ie,i.aS.members,!0);for(let xe of R){let Ie=Gd(xe.transform,xe.invTransform,E.transform);Q.draw(w,D.TRIANGLES,un.disabled,yo.disabled,E.colorModeForRenderPass(),lo.disabled,Ie,E.style.map.terrain&&E.style.map.terrain.getTerrainData(xe.coord),d.id,ye,he,i.a0.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,E.transform.zoom,null,null,null)}ye.destroy(),he.destroy()}lo.disabled=new lo(!1,1029,2305),lo.backCCW=new lo(!0,1029,2305);let vy=i.an(new Float32Array(16));function fS(E,s,d,v,y,w){let{horizontalAlign:D,verticalAlign:O}=i.au(E);return new i.P((-(D-.5)*s/y+v[0])*w,(-(O-.5)*d/y+v[1])*w)}function Zd(E,s,d,v,y,w){let D=s.tileAnchorPoint.add(new i.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let O=v.mult(w);d||(O=O.rotate(-y));let R=D.add(O);return ae(R.x,R.y,s.labelPlaneMatrix,s.getElevation).point}if(d){let O=Je(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(E),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return E.add(v.rotate(R))}return E.add(v)}function Am(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie){let le=E.text.placedSymbolArray,he=E.text.dynamicLayoutVertexArray,ye=E.icon.dynamicLayoutVertexArray,xe={};he.clear();for(let Ie=0;Ie<le.length;Ie++){let fe=le.get(Ie),Pe=fe.hidden||!fe.crossTileID||E.allowVerticalPlacement&&!fe.placedOrientation?null:v[fe.crossTileID];if(Pe){let Be=new i.P(fe.anchorX,fe.anchorY),Ke={getElevation:ie,width:y.width,height:y.height,labelPlaneMatrix:w,lineVertexArray:null,pitchWithMap:d,projection:V,projectionCache:null,tileAnchorPoint:Be,translation:G,unwrappedTileID:Q},dt=d?ae(Be.x,Be.y,D,ie):Je(Be.x,Be.y,Ke),It=$(y.cameraToCenterDistance,dt.signedDistanceFromCamera),Vt=i.ai(E.textSizeData,R,fe)*It/i.ap;d&&(Vt*=E.tilePixelRatio/O);let{width:tr,height:jt,anchor:Rt,textOffset:fr,textBoxScale:Pr}=Pe,zt=fS(Rt,tr,jt,fr,Pr,Vt),Xt=V.getPitchedTextCorrection(y,Be.add(new i.P(G[0],G[1])),Q),Or=Zd(dt.point,Ke,s,zt,y.angle,Xt),Ao=E.allowVerticalPlacement&&fe.placedOrientation===i.ah.vertical?Math.PI/2:0;for(let Yr=0;Yr<fe.numGlyphs;Yr++)i.aj(he,Or,Ao);F&&fe.associatedIconIndex>=0&&(xe[fe.associatedIconIndex]={shiftedAnchor:Or,angle:Ao})}else Sr(fe.numGlyphs,he)}if(F){ye.clear();let Ie=E.icon.placedSymbolArray;for(let fe=0;fe<Ie.length;fe++){let Pe=Ie.get(fe);if(Pe.hidden)Sr(Pe.numGlyphs,ye);else{let Be=xe[fe];if(Be)for(let Ke=0;Ke<Pe.numGlyphs;Ke++)i.aj(ye,Be.shiftedAnchor,Be.angle);else Sr(Pe.numGlyphs,ye)}}E.icon.dynamicLayoutVertexBuffer.updateData(ye)}E.text.dynamicLayoutVertexBuffer.updateData(he)}function Fl(E,s,d){return d.iconsInText&&s?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function pS(E,s,d,v,y,w,D,O,R,F,V,G){let Q=E.context,ie=Q.gl,le=E.transform,he=Bd(),ye=O==="map",xe=R==="map",Ie=O!=="viewport"&&d.layout.get("symbol-placement")!=="point",fe=ye&&!xe&&!Ie,Pe=!xe&&Ie,Be=!d.layout.get("symbol-sort-key").isConstant(),Ke=!1,dt=E.depthModeForSublayer(0,un.ReadOnly),It=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Vt=[],tr=he.getCircleRadiusCorrection(le);for(let jt of v){let Rt=s.getTile(jt),fr=Rt.getBucket(d);if(!fr)continue;let Pr=y?fr.text:fr.icon;if(!Pr||!Pr.segments.get().length||!Pr.hasVisibleVertices)continue;let zt=Pr.programConfigurations.get(d.id),Xt=y||fr.sdfIcons,Or=y?fr.textSizeData:fr.iconSizeData,Ao=xe||le.pitch!==0,Yr=E.useProgram(Fl(Xt,y,fr),zt),yn=i.ag(Or,le.zoom),Do=E.style.map.terrain&&E.style.map.terrain.getTerrainData(jt),Ca,ku,No,Ns,Qa=[0,0],Aa=null;if(y)ku=Rt.glyphAtlasTexture,No=ie.LINEAR,Ca=Rt.glyphAtlasTexture.size,fr.iconsInText&&(Qa=Rt.imageAtlasTexture.size,Aa=Rt.imageAtlasTexture,Ns=Ao||E.options.rotating||E.options.zooming||Or.kind==="composite"||Or.kind==="camera"?ie.LINEAR:ie.NEAREST);else{let bn=d.layout.get("icon-size").constantOr(0)!==1||fr.iconsNeedLinear;ku=Rt.imageAtlasTexture,No=Xt||E.options.rotating||E.options.zooming||bn||Ao?ie.LINEAR:ie.NEAREST,Ca=Rt.imageAtlasTexture.size}let es=vn(Rt,1,E.transform.zoom),fc=Pe?jt.posMatrix:vy,Hm=Zt(fc,xe,ye,E.transform,es),I_=Ht(fc,xe,ye,E.transform,es),Wm=Ht(jt.posMatrix,xe,ye,E.transform,es),Vl=he.translatePosition(E.transform,Rt,w,D),T_=It&&fr.hasTextData(),jS=d.layout.get("icon-text-fit")!=="none"&&T_&&fr.hasIconData();if(Ie){let bn=E.style.map.terrain?($m,Ym)=>E.style.map.terrain.getElevation(jt,$m,Ym):null,eh=d.layout.get("text-rotation-alignment")==="map";J(fr,jt.posMatrix,E,y,Hm,Wm,xe,F,eh,he,jt.toUnwrapped(),le.width,le.height,Vl,bn)}let Gl=jt.posMatrix,Hl=y&&It||jS,vp=Ie||Hl?vy:Hm,Ru=I_,ma=Xt&&d.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Da;Da=Xt?fr.iconsInText?eS(Or.kind,yn,fe,xe,Ie,Hl,E,Gl,vp,Ru,Vl,Ca,Qa,tr):hy(Or.kind,yn,fe,xe,Ie,Hl,E,Gl,vp,Ru,Vl,y,Ca,!0,tr):VD(Or.kind,yn,fe,xe,Ie,Hl,E,Gl,vp,Ru,Vl,y,Ca,tr);let gl={program:Yr,buffers:Pr,uniformValues:Da,atlasTexture:ku,atlasTextureIcon:Aa,atlasInterpolation:No,atlasInterpolationIcon:Ns,isSDF:Xt,hasHalo:ma};if(Be&&fr.canOverlap){Ke=!0;let bn=Pr.segments.get();for(let eh of bn)Vt.push({segments:new i.a0([eh]),sortKey:eh.sortKey,state:gl,terrainData:Do})}else Vt.push({segments:Pr.segments,sortKey:0,state:gl,terrainData:Do})}Ke&&Vt.sort((jt,Rt)=>jt.sortKey-Rt.sortKey);for(let jt of Vt){let Rt=jt.state;if(Q.activeTexture.set(ie.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,ie.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(Q.activeTexture.set(ie.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),Rt.isSDF){let fr=Rt.uniformValues;Rt.hasHalo&&(fr.u_is_halo=1,dS(Rt.buffers,jt.segments,d,E,Rt.program,dt,V,G,fr,jt.terrainData)),fr.u_is_halo=0}dS(Rt.buffers,jt.segments,d,E,Rt.program,dt,V,G,Rt.uniformValues,jt.terrainData)}}function dS(E,s,d,v,y,w,D,O,R,F){let V=v.context;y.draw(V,V.gl.TRIANGLES,w,D,O,lo.disabled,R,F,d.id,E.layoutVertexBuffer,E.indexBuffer,s,d.paint,v.transform.zoom,E.programConfigurations.get(d.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function hS(E,s,d,v){let y=E.context,w=y.gl,D=yo.disabled,O=new hi([w.ONE,w.ONE],i.aM.transparent,[!0,!0,!0,!0]),R=s.getBucket(d);if(!R)return;let F=v.key,V=d.heatmapFbos.get(F);V||(V=yy(y,s.tileSize,s.tileSize),d.heatmapFbos.set(F,V)),y.bindFramebuffer.set(V.framebuffer),y.viewport.set([0,0,s.tileSize,s.tileSize]),y.clear({color:i.aM.transparent});let G=R.programConfigurations.get(d.id),Q=E.useProgram("heatmap",G),ie=E.style.map.terrain.getTerrainData(v);Q.draw(y,w.TRIANGLES,un.disabled,D,O,lo.disabled,Ds(v.posMatrix,s,E.transform.zoom,d.paint.get("heatmap-intensity")),ie,d.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,d.paint,E.transform.zoom,G)}function Kd(E,s,d){let v=E.context,y=v.gl;v.setColorMode(E.colorModeForRenderPass());let w=_y(v,s),D=d.key,O=s.heatmapFbos.get(D);O&&(v.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,O.colorAttachment.get()),v.activeTexture.set(y.TEXTURE1),w.bind(y.LINEAR,y.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(v,y.TRIANGLES,un.disabled,yo.disabled,E.colorModeForRenderPass(),lo.disabled,J1(E,s,0,1),null,s.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments,s.paint,E.transform.zoom),O.destroy(),s.heatmapFbos.delete(D))}function yy(E,s,d){var v,y;let w=E.gl,D=w.createTexture();w.bindTexture(w.TEXTURE_2D,D),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);let O=(v=E.HALF_FLOAT)!==null&&v!==void 0?v:w.UNSIGNED_BYTE,R=(y=E.RGBA16F)!==null&&y!==void 0?y:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,R,s,d,0,w.RGBA,O,null);let F=E.createFramebuffer(s,d,!1,!1);return F.colorAttachment.set(D),F}function _y(E,s){return s.colorRampTexture||(s.colorRampTexture=new ue(E,s.colorRamp,E.gl.RGBA)),s.colorRampTexture}function Dm(E,s,d,v,y){if(!d||!v||!v.imageAtlas)return;let w=v.imageAtlas.patternPositions,D=w[d.to.toString()],O=w[d.from.toString()];if(!D&&O&&(D=O),!O&&D&&(O=D),!D||!O){let R=y.getPaintProperty(s);D=w[R],O=w[R]}D&&O&&E.setConstantPatternPositions(D,O)}function xy(E,s,d,v,y,w,D){let O=E.context.gl,R="fill-pattern",F=d.paint.get(R),V=F&&F.constantOr(1),G=d.getCrossfadeParameters(),Q,ie,le,he,ye;D?(ie=V&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=O.LINES):(ie=V?"fillPattern":"fill",Q=O.TRIANGLES);let xe=F.constantOr(null);for(let Ie of v){let fe=s.getTile(Ie);if(V&&!fe.patternsLoaded())continue;let Pe=fe.getBucket(d);if(!Pe)continue;let Be=Pe.programConfigurations.get(d.id),Ke=E.useProgram(ie,Be),dt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Ie);V&&(E.context.activeTexture.set(O.TEXTURE0),fe.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Be.updatePaintBuffers(G)),Dm(Be,R,xe,fe,d);let It=dt?Ie:null,Vt=E.translatePosMatrix(It?It.posMatrix:Ie.posMatrix,fe,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(D){he=Pe.indexBuffer2,ye=Pe.segments2;let tr=[O.drawingBufferWidth,O.drawingBufferHeight];le=ie==="fillOutlinePattern"&&V?zD(Vt,E,G,fe,tr):eF(Vt,tr)}else he=Pe.indexBuffer,ye=Pe.segments,le=V?qD(Vt,E,G,fe):Tm(Vt);Ke.draw(E.context,Q,y,E.stencilModeForClipping(Ie),w,lo.disabled,le,dt,d.id,Pe.layoutVertexBuffer,he,ye,d.paint,E.transform.zoom,Be)}}function s_(E,s,d,v,y,w,D){let O=E.context,R=O.gl,F="fill-extrusion-pattern",V=d.paint.get(F),G=V.constantOr(1),Q=d.getCrossfadeParameters(),ie=d.paint.get("fill-extrusion-opacity"),le=V.constantOr(null);for(let he of v){let ye=s.getTile(he),xe=ye.getBucket(d);if(!xe)continue;let Ie=E.style.map.terrain&&E.style.map.terrain.getTerrainData(he),fe=xe.programConfigurations.get(d.id),Pe=E.useProgram(G?"fillExtrusionPattern":"fillExtrusion",fe);G&&(E.context.activeTexture.set(R.TEXTURE0),ye.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),fe.updatePaintBuffers(Q)),Dm(fe,F,le,ye,d);let Be=E.translatePosMatrix(he.posMatrix,ye,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ke=d.paint.get("fill-extrusion-vertical-gradient"),dt=G?X1(Be,E,Ke,ie,he,Q,ye):py(Be,E,Ke,ie);Pe.draw(O,O.gl.TRIANGLES,y,w,D,lo.backCCW,dt,Ie,d.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,d.paint,E.transform.zoom,fe,E.style.map.terrain&&xe.centroidVertexBuffer)}}function Nm(E,s,d,v,y,w,D){let O=E.context,R=O.gl,F=d.fbo;if(!F)return;let V=E.useProgram("hillshade"),G=E.style.map.terrain&&E.style.map.terrain.getTerrainData(s);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,F.colorAttachment.get()),V.draw(O,R.TRIANGLES,y,w,D,lo.disabled,((Q,ie,le,he)=>{let ye=le.paint.get("hillshade-shadow-color"),xe=le.paint.get("hillshade-highlight-color"),Ie=le.paint.get("hillshade-accent-color"),fe=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(fe-=Q.transform.angle);let Pe=!Q.options.moving;return{u_matrix:he?he.posMatrix:Q.transform.calculatePosMatrix(ie.tileID.toUnwrapped(),Pe),u_image:0,u_latrange:Q1(0,ie.tileID),u_light:[le.paint.get("hillshade-exaggeration"),fe],u_shadow:ye,u_highlight:xe,u_accent:Ie}})(E,d,v,G?s:null),G,v.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function Om(E,s,d,v,y,w){let D=E.context,O=D.gl,R=s.dem;if(R&&R.data){let F=R.dim,V=R.stride,G=R.getPixels();if(D.activeTexture.set(O.TEXTURE1),D.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||E.getTileTexture(V),s.demTexture){let ie=s.demTexture;ie.update(G,{premultiply:!1}),ie.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else s.demTexture=new ue(D,G,O.RGBA,{premultiply:!1}),s.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);D.activeTexture.set(O.TEXTURE0);let Q=s.fbo;if(!Q){let ie=new ue(D,{width:F,height:F,data:null},O.RGBA);ie.bind(O.LINEAR,O.CLAMP_TO_EDGE),Q=s.fbo=D.createFramebuffer(F,F,!0,!1),Q.colorAttachment.set(ie.texture)}D.bindFramebuffer.set(Q.framebuffer),D.viewport.set([0,0,F,F]),E.useProgram("hillshadePrepare").draw(D,O.TRIANGLES,v,y,w,lo.disabled,((ie,le)=>{let he=le.stride,ye=i.H();return i.aP(ye,0,i.X,-i.X,0,0,1),i.J(ye,ye,[0,-i.X,0]),{u_matrix:ye,u_image:1,u_dimension:[he,he],u_zoom:ie.overscaledZ,u_unpack:le.getUnpackVector()}})(s.tileID,R),null,d.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function r4(E,s,d,v,y,w){let D=v.paint.get("raster-fade-duration");if(!w&&D>0){let O=h.now(),R=(O-E.timeAdded)/D,F=s?(O-s.timeAdded)/D:-1,V=d.getSource(),G=y.coveringZoomLevel({tileSize:V.tileSize,roundZoom:V.roundZoom}),Q=!s||Math.abs(s.tileID.overscaledZ-G)>Math.abs(E.tileID.overscaledZ-G),ie=Q&&E.refreshedUponExpiration?1:i.ac(Q?R:1-F,0,1);return E.refreshedUponExpiration&&R>=1&&(E.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ie}:{opacity:ie,mix:0}}return{opacity:1,mix:0}}let mS=new i.aM(1,0,0,1),jn=new i.aM(0,1,0,1),l_=new i.aM(0,0,1,1),mF=new i.aM(1,0,1,1),n4=new i.aM(0,1,1,1);function Lm(E,s,d,v){u_(E,0,s+d/2,E.transform.width,d,v)}function o4(E,s,d,v){u_(E,s-d/2,0,d,E.transform.height,v)}function u_(E,s,d,v,y,w){let D=E.context,O=D.gl;O.enable(O.SCISSOR_TEST),O.scissor(s*E.pixelRatio,d*E.pixelRatio,v*E.pixelRatio,y*E.pixelRatio),D.clear({color:w}),O.disable(O.SCISSOR_TEST)}function i4(E,s,d){let v=E.context,y=v.gl,w=d.posMatrix,D=E.useProgram("debug"),O=un.disabled,R=yo.disabled,F=E.colorModeForRenderPass(),V="$debug",G=E.style.map.terrain&&E.style.map.terrain.getTerrainData(d);v.activeTexture.set(y.TEXTURE0);let Q=s.getTileByID(d.key).latestRawTileData,ie=Math.floor((Q&&Q.byteLength||0)/1024),le=s.getTile(d).tileSize,he=512/Math.min(le,512)*(d.overscaledZ/E.transform.zoom)*.5,ye=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ye+=` => ${d.overscaledZ}`),function(xe,Ie){xe.initDebugOverlayCanvas();let fe=xe.debugOverlayCanvas,Pe=xe.context.gl,Be=xe.debugOverlayCanvas.getContext("2d");Be.clearRect(0,0,fe.width,fe.height),Be.shadowColor="white",Be.shadowBlur=2,Be.lineWidth=1.5,Be.strokeStyle="white",Be.textBaseline="top",Be.font="bold 36px Open Sans, sans-serif",Be.fillText(Ie,5,5),Be.strokeText(Ie,5,5),xe.debugOverlayTexture.update(fe),xe.debugOverlayTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE)}(E,`${ye} ${ie}kB`),D.draw(v,y.TRIANGLES,O,R,hi.alphaBlended,lo.disabled,dy(w,i.aM.transparent,he),null,V,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),D.draw(v,y.LINE_STRIP,O,R,F,lo.disabled,dy(w,i.aM.red),G,V,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function a4(E,s,d){let v=E.context,y=v.gl,w=E.colorModeForRenderPass(),D=new un(y.LEQUAL,un.ReadWrite,E.depthRangeFor3D),O=E.useProgram("terrain"),R=s.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,E.width,E.height]);for(let F of d){let V=E.renderToTexture.getTexture(F),G=s.getTerrainData(F.tileID);v.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,V.texture);let Q=E.transform.calculatePosMatrix(F.tileID.toUnwrapped()),ie=s.getMeshFrameDelta(E.transform.zoom),le=E.transform.calculateFogMatrix(F.tileID.toUnwrapped()),he=JE(Q,ie,le,E.style.sky,E.transform.pitch);O.draw(v,y.TRIANGLES,D,yo.disabled,w,lo.backCCW,he,G,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class c_{constructor(s,d,v){this.vertexBuffer=s,this.indexBuffer=d,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class f_{constructor(s,d){this.context=new hF(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:i.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Er.maxUnderzooming+Er.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new KE}resize(s,d,v){if(this.width=Math.floor(s*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let y of this.style._order)this.style._layers[y].resize()}setup(){let s=this.context,d=new i.aX;d.emplaceBack(0,0),d.emplaceBack(i.X,0),d.emplaceBack(0,i.X),d.emplaceBack(i.X,i.X),this.tileExtentBuffer=s.createVertexBuffer(d,Vd.members),this.tileExtentSegments=i.a0.simpleSegment(0,0,4,2);let v=new i.aX;v.emplaceBack(0,0),v.emplaceBack(i.X,0),v.emplaceBack(0,i.X),v.emplaceBack(i.X,i.X),this.debugBuffer=s.createVertexBuffer(v,Vd.members),this.debugSegments=i.a0.simpleSegment(0,0,4,5);let y=new i.$;y.emplaceBack(0,0,0,0),y.emplaceBack(i.X,0,i.X,0),y.emplaceBack(0,i.X,0,i.X),y.emplaceBack(i.X,i.X,i.X,i.X),this.rasterBoundsBuffer=s.createVertexBuffer(y,Ue.members),this.rasterBoundsSegments=i.a0.simpleSegment(0,0,4,2);let w=new i.aX;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(w,Vd.members),this.viewportSegments=i.a0.simpleSegment(0,0,4,2);let D=new i.aZ;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(D);let O=new i.aY;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(O);let R=this.context.gl;this.stencilClearMode=new yo({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){let s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let v=i.H();i.aP(v,0,this.width,this.height,0,0,1),i.K(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,d.TRIANGLES,un.disabled,this.stencilClearMode,hi.disabled,lo.disabled,As(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source;let v=this.context,y=v.gl;this.nextStencilID+d.length>256&&this.clearStencil(),v.setColorMode(hi.disabled),v.setDepthMode(un.disabled);let w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let D of d){let O=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D);w.draw(v,y.TRIANGLES,un.disabled,new yo({func:y.ALWAYS,mask:0},O,255,y.KEEP,y.KEEP,y.REPLACE),hi.disabled,lo.disabled,As(D.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,d=this.context.gl;return new yo({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){let d=this.context.gl;return new yo({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){let d=this.context.gl,v=s.sort((D,O)=>O.overscaledZ-D.overscaledZ),y=v[v.length-1].overscaledZ,w=v[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();let D={};for(let O=0;O<w;O++)D[O+y]=new yo({func:d.GEQUAL,mask:255},O+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=w,[D,v]}return[{[y]:yo.disabled},v]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new hi([s.CONSTANT_COLOR,s.ONE],new i.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hi.unblended:hi.alphaBlended}depthModeForSublayer(s,d,v){if(!this.opaquePassEnabledForLayer())return un.disabled;let y=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new un(v||this.context.gl.LEQUAL,d,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(h.now()),this.imageManager.beginFrame();let v=this.style._order,y=this.style.sourceCaches,w={},D={},O={};for(let R in y){let F=y[R];F.used&&F.prepare(this.context),w[R]=F.getVisibleCoordinates(),D[R]=w[R].slice().reverse(),O[R]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<v.length;R++)if(this.style._layers[v[R]].is3D()){this.opaquePassCutoff=R;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let R of v){let F=this.style._layers[R];if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;let V=D[F.source];(F.type==="custom"||V.length)&&this.renderLayer(this,y[F.source],F,V)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?i.aM.black:i.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(R,F){let V=R.context,G=V.gl,Q=((xe,Ie,fe)=>({u_sky_color:xe.properties.get("sky-color"),u_horizon_color:xe.properties.get("horizon-color"),u_horizon:(Ie.height/2+Ie.getHorizon())*fe,u_sky_horizon_blend:xe.properties.get("sky-horizon-blend")*Ie.height/2*fe}))(F,R.style.map.transform,R.pixelRatio),ie=new un(G.LEQUAL,un.ReadWrite,[0,1]),le=yo.disabled,he=R.colorModeForRenderPass(),ye=R.useProgram("sky");if(!F.mesh){let xe=new i.aX;xe.emplaceBack(-1,-1),xe.emplaceBack(1,-1),xe.emplaceBack(1,1),xe.emplaceBack(-1,1);let Ie=new i.aY;Ie.emplaceBack(0,1,2),Ie.emplaceBack(0,2,3),F.mesh=new c_(V.createVertexBuffer(xe,Vd.members),V.createIndexBuffer(Ie),i.a0.simpleSegment(0,0,xe.length,Ie.length))}ye.draw(V,G.TRIANGLES,ie,le,he,lo.disabled,Q,void 0,"sky",F.mesh.vertexBuffer,F.mesh.indexBuffer,F.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){let R=this.style._layers[v[this.currentLayer]],F=y[R.source],V=w[R.source];this._renderTileClippingMasks(R,V),this.renderLayer(this,F,R,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){let R=this.style._layers[v[this.currentLayer]],F=y[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;let V=(R.type==="symbol"?O:D)[R.source];this._renderTileClippingMasks(R,w[R.source]),this.renderLayer(this,F,R,V)}if(this.options.showTileBoundaries){let R=function(F,V){let G=null,Q=Object.values(F._layers).flatMap(ye=>ye.source&&!ye.isHidden(V)?[F.sourceCaches[ye.source]]:[]),ie=Q.filter(ye=>ye.getSource().type==="vector"),le=Q.filter(ye=>ye.getSource().type!=="vector"),he=ye=>{(!G||G.getSource().maxzoom<ye.getSource().maxzoom)&&(G=ye)};return ie.forEach(ye=>he(ye)),G||le.forEach(ye=>he(ye)),G}(this.style,this.transform.zoom);R&&function(F,V,G){for(let Q=0;Q<G.length;Q++)i4(F,V,G[Q])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){let F=R.transform.padding;Lm(R,R.transform.height-(F.top||0),3,mS),Lm(R,F.bottom||0,3,jn),o4(R,F.left||0,3,l_),o4(R,R.transform.width-(F.right||0),3,mF);let V=R.transform.centerPoint;(function(G,Q,ie,le){u_(G,Q-1,ie-10,2,20,le),u_(G,Q-10,ie-1,20,2,le)})(R,V.x,R.transform.height-V.y,n4)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let d=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix,y=this.terrainFacilitator.dirty;y||(y=s?!i.a_(d,v):!i.a$(d,v)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(i.b0(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,D){let O=w.context,R=O.gl,F=hi.unblended,V=new un(R.LEQUAL,un.ReadWrite,[0,1]),G=D.getTerrainMesh(),Q=D.sourceCache.getRenderableTiles(),ie=w.useProgram("terrainDepth");O.bindFramebuffer.set(D.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:i.aM.transparent,depth:1});for(let le of Q){let he=D.getTerrainData(le.tileID),ye={u_matrix:w.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_ele_delta:D.getMeshFrameDelta(w.transform.zoom)};ie.draw(O,R.TRIANGLES,V,yo.disabled,F,lo.backCCW,ye,he,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,D){let O=w.context,R=O.gl,F=hi.unblended,V=new un(R.LEQUAL,un.ReadWrite,[0,1]),G=D.getTerrainMesh(),Q=D.getCoordsTexture(),ie=D.sourceCache.getRenderableTiles(),le=w.useProgram("terrainCoords");O.bindFramebuffer.set(D.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:i.aM.transparent,depth:1}),D.coordsIndex=[];for(let he of ie){let ye=D.getTerrainData(he.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,Q.texture);let xe={u_matrix:w.transform.calculatePosMatrix(he.tileID.toUnwrapped()),u_terrain_coords_id:(255-D.coordsIndex.length)/255,u_texture:0,u_ele_delta:D.getMeshFrameDelta(w.transform.zoom)};le.draw(O,R.TRIANGLES,V,yo.disabled,F,lo.backCCW,xe,ye,"terrain",G.vertexBuffer,G.indexBuffer,G.segments),D.coordsIndex.push(he.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(s,d,v,y){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(y||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(w,D,O,R,F){if(w.renderPass!=="translucent")return;let V=yo.disabled,G=w.colorModeForRenderPass();(O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Q,ie,le,he,ye,xe,Ie,fe,Pe){let Be=ie.transform,Ke=Bd(),dt=ye==="map",It=xe==="map";for(let Vt of Q){let tr=he.getTile(Vt),jt=tr.getBucket(le);if(!jt||!jt.text||!jt.text.segments.get().length)continue;let Rt=i.ag(jt.textSizeData,Be.zoom),fr=vn(tr,1,ie.transform.zoom),Pr=Zt(Vt.posMatrix,It,dt,ie.transform,fr),zt=le.layout.get("icon-text-fit")!=="none"&&jt.hasIconData();if(Rt){let Xt=Math.pow(2,Be.zoom-tr.tileID.overscaledZ),Or=ie.style.map.terrain?(Yr,yn)=>ie.style.map.terrain.getElevation(Vt,Yr,yn):null,Ao=Ke.translatePosition(Be,tr,Ie,fe);Am(jt,dt,It,Pe,Be,Pr,Vt.posMatrix,Xt,Rt,zt,Ke,Ao,Vt.toUnwrapped(),Or)}}}(R,w,O,D,O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),F),O.paint.get("icon-opacity").constantOr(1)!==0&&pS(w,D,O,R,!1,O.paint.get("icon-translate"),O.paint.get("icon-translate-anchor"),O.layout.get("icon-rotation-alignment"),O.layout.get("icon-pitch-alignment"),O.layout.get("icon-keep-upright"),V,G),O.paint.get("text-opacity").constantOr(1)!==0&&pS(w,D,O,R,!0,O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.layout.get("text-keep-upright"),V,G),D.map.showCollisionBoxes&&(gy(w,D,O,R,!0),gy(w,D,O,R,!1))})(s,d,v,y,this.style.placement.variableOffsets);break;case"circle":(function(w,D,O,R){if(w.renderPass!=="translucent")return;let F=O.paint.get("circle-opacity"),V=O.paint.get("circle-stroke-width"),G=O.paint.get("circle-stroke-opacity"),Q=!O.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(V.constantOr(1)===0||G.constantOr(1)===0))return;let ie=w.context,le=ie.gl,he=w.depthModeForSublayer(0,un.ReadOnly),ye=yo.disabled,xe=w.colorModeForRenderPass(),Ie=[];for(let fe=0;fe<R.length;fe++){let Pe=R[fe],Be=D.getTile(Pe),Ke=Be.getBucket(O);if(!Ke)continue;let dt=Ke.programConfigurations.get(O.id),It=w.useProgram("circle",dt),Vt=Ke.layoutVertexBuffer,tr=Ke.indexBuffer,jt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Pe),Rt={programConfiguration:dt,program:It,layoutVertexBuffer:Vt,indexBuffer:tr,uniformValues:tF(w,Pe,Be,O),terrainData:jt};if(Q){let fr=Ke.segments.get();for(let Pr of fr)Ie.push({segments:new i.a0([Pr]),sortKey:Pr.sortKey,state:Rt})}else Ie.push({segments:Ke.segments,sortKey:0,state:Rt})}Q&&Ie.sort((fe,Pe)=>fe.sortKey-Pe.sortKey);for(let fe of Ie){let{programConfiguration:Pe,program:Be,layoutVertexBuffer:Ke,indexBuffer:dt,uniformValues:It,terrainData:Vt}=fe.state;Be.draw(ie,le.TRIANGLES,he,ye,xe,lo.disabled,It,Vt,O.id,Ke,dt,fe.segments,O.paint,w.transform.zoom,Pe)}})(s,d,v,y);break;case"heatmap":(function(w,D,O,R){if(O.paint.get("heatmap-opacity")===0)return;let F=w.context;if(w.style.map.terrain){for(let V of R){let G=D.getTile(V);D.hasRenderableParent(V)||(w.renderPass==="offscreen"?hS(w,G,O,V):w.renderPass==="translucent"&&Kd(w,O,V))}F.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(V,G,Q,ie){let le=V.context,he=le.gl,ye=yo.disabled,xe=new hi([he.ONE,he.ONE],i.aM.transparent,[!0,!0,!0,!0]);(function(Ie,fe,Pe){let Be=Ie.gl;Ie.activeTexture.set(Be.TEXTURE1),Ie.viewport.set([0,0,fe.width/4,fe.height/4]);let Ke=Pe.heatmapFbos.get(i.aU);Ke?(Be.bindTexture(Be.TEXTURE_2D,Ke.colorAttachment.get()),Ie.bindFramebuffer.set(Ke.framebuffer)):(Ke=yy(Ie,fe.width/4,fe.height/4),Pe.heatmapFbos.set(i.aU,Ke))})(le,V,Q),le.clear({color:i.aM.transparent});for(let Ie=0;Ie<ie.length;Ie++){let fe=ie[Ie];if(G.hasRenderableParent(fe))continue;let Pe=G.getTile(fe),Be=Pe.getBucket(Q);if(!Be)continue;let Ke=Be.programConfigurations.get(Q.id),dt=V.useProgram("heatmap",Ke),{zoom:It}=V.transform;dt.draw(le,he.TRIANGLES,un.disabled,ye,xe,lo.disabled,Ds(fe.posMatrix,Pe,It,Q.paint.get("heatmap-intensity")),null,Q.id,Be.layoutVertexBuffer,Be.indexBuffer,Be.segments,Q.paint,V.transform.zoom,Ke)}le.viewport.set([0,0,V.width,V.height])}(w,D,O,R):w.renderPass==="translucent"&&function(V,G){let Q=V.context,ie=Q.gl;Q.setColorMode(V.colorModeForRenderPass());let le=G.heatmapFbos.get(i.aU);le&&(Q.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,le.colorAttachment.get()),Q.activeTexture.set(ie.TEXTURE1),_y(Q,G).bind(ie.LINEAR,ie.CLAMP_TO_EDGE),V.useProgram("heatmapTexture").draw(Q,ie.TRIANGLES,un.disabled,yo.disabled,V.colorModeForRenderPass(),lo.disabled,J1(V,G,0,1),null,G.id,V.viewportBuffer,V.quadTriangleIndexBuffer,V.viewportSegments,G.paint,V.transform.zoom))}(w,O)})(s,d,v,y);break;case"line":(function(w,D,O,R){if(w.renderPass!=="translucent")return;let F=O.paint.get("line-opacity"),V=O.paint.get("line-width");if(F.constantOr(1)===0||V.constantOr(1)===0)return;let G=w.depthModeForSublayer(0,un.ReadOnly),Q=w.colorModeForRenderPass(),ie=O.paint.get("line-dasharray"),le=O.paint.get("line-pattern"),he=le.constantOr(1),ye=O.paint.get("line-gradient"),xe=O.getCrossfadeParameters(),Ie=he?"linePattern":ie?"lineSDF":ye?"lineGradient":"line",fe=w.context,Pe=fe.gl,Be=!0;for(let Ke of R){let dt=D.getTile(Ke);if(he&&!dt.patternsLoaded())continue;let It=dt.getBucket(O);if(!It)continue;let Vt=It.programConfigurations.get(O.id),tr=w.context.program.get(),jt=w.useProgram(Ie,Vt),Rt=Be||jt.program!==tr,fr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ke),Pr=le.constantOr(null);if(Pr&&dt.imageAtlas){let Or=dt.imageAtlas,Ao=Or.patternPositions[Pr.to.toString()],Yr=Or.patternPositions[Pr.from.toString()];Ao&&Yr&&Vt.setConstantPatternPositions(Ao,Yr)}let zt=fr?Ke:null,Xt=he?Mm(w,dt,O,xe,zt):ie?rF(w,dt,O,ie,xe,zt):ye?FD(w,dt,O,It.lineClipsArray.length,zt):e_(w,dt,O,zt);if(he)fe.activeTexture.set(Pe.TEXTURE0),dt.imageAtlasTexture.bind(Pe.LINEAR,Pe.CLAMP_TO_EDGE),Vt.updatePaintBuffers(xe);else if(ie&&(Rt||w.lineAtlas.dirty))fe.activeTexture.set(Pe.TEXTURE0),w.lineAtlas.bind(fe);else if(ye){let Or=It.gradients[O.id],Ao=Or.texture;if(O.gradientVersion!==Or.version){let Yr=256;if(O.stepInterpolant){let yn=D.getSource().maxzoom,Do=Ke.canonical.z===yn?Math.ceil(1<<w.transform.maxZoom-Ke.canonical.z):1;Yr=i.ac(i.aV(It.maxLineLength/i.X*1024*Do),256,fe.maxTextureSize)}Or.gradient=i.aW({expression:O.gradientExpression(),evaluationKey:"lineProgress",resolution:Yr,image:Or.gradient||void 0,clips:It.lineClipsArray}),Or.texture?Or.texture.update(Or.gradient):Or.texture=new ue(fe,Or.gradient,Pe.RGBA),Or.version=O.gradientVersion,Ao=Or.texture}fe.activeTexture.set(Pe.TEXTURE0),Ao.bind(O.stepInterpolant?Pe.NEAREST:Pe.LINEAR,Pe.CLAMP_TO_EDGE)}jt.draw(fe,Pe.TRIANGLES,G,w.stencilModeForClipping(Ke),Q,lo.disabled,Xt,fr,O.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,O.paint,w.transform.zoom,Vt,It.layoutVertexBuffer2),Be=!1}})(s,d,v,y);break;case"fill":(function(w,D,O,R){let F=O.paint.get("fill-color"),V=O.paint.get("fill-opacity");if(V.constantOr(1)===0)return;let G=w.colorModeForRenderPass(),Q=O.paint.get("fill-pattern"),ie=w.opaquePassEnabledForLayer()&&!Q.constantOr(1)&&F.constantOr(i.aM.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===ie){let le=w.depthModeForSublayer(1,w.renderPass==="opaque"?un.ReadWrite:un.ReadOnly);xy(w,D,O,R,le,G,!1)}if(w.renderPass==="translucent"&&O.paint.get("fill-antialias")){let le=w.depthModeForSublayer(O.getPaintProperty("fill-outline-color")?2:0,un.ReadOnly);xy(w,D,O,R,le,G,!0)}})(s,d,v,y);break;case"fill-extrusion":(function(w,D,O,R){let F=O.paint.get("fill-extrusion-opacity");if(F!==0&&w.renderPass==="translucent"){let V=new un(w.context.gl.LEQUAL,un.ReadWrite,w.depthRangeFor3D);if(F!==1||O.paint.get("fill-extrusion-pattern").constantOr(1))s_(w,D,O,R,V,yo.disabled,hi.disabled),s_(w,D,O,R,V,w.stencilModeFor3D(),w.colorModeForRenderPass());else{let G=w.colorModeForRenderPass();s_(w,D,O,R,V,yo.disabled,G)}}})(s,d,v,y);break;case"hillshade":(function(w,D,O,R){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let F=w.context,V=w.depthModeForSublayer(0,un.ReadOnly),G=w.colorModeForRenderPass(),[Q,ie]=w.renderPass==="translucent"?w.stencilConfigForOverlap(R):[{},R];for(let le of ie){let he=D.getTile(le);he.needsHillshadePrepare!==void 0&&he.needsHillshadePrepare&&w.renderPass==="offscreen"?Om(w,he,O,V,yo.disabled,G):w.renderPass==="translucent"&&Nm(w,le,he,O,V,Q[le.overscaledZ],G)}F.viewport.set([0,0,w.width,w.height])})(s,d,v,y);break;case"raster":(function(w,D,O,R){if(w.renderPass!=="translucent"||O.paint.get("raster-opacity")===0||!R.length)return;let F=w.context,V=F.gl,G=D.getSource(),Q=w.useProgram("raster"),ie=w.colorModeForRenderPass(),[le,he]=G instanceof ht?[{},R]:w.stencilConfigForOverlap(R),ye=he[he.length-1].overscaledZ,xe=!w.options.moving;for(let Ie of he){let fe=w.depthModeForSublayer(Ie.overscaledZ-ye,O.paint.get("raster-opacity")===1?un.ReadWrite:un.ReadOnly,V.LESS),Pe=D.getTile(Ie);Pe.registerFadeDuration(O.paint.get("raster-fade-duration"));let Be=D.findLoadedParent(Ie,0),Ke=D.findLoadedSibling(Ie),dt=r4(Pe,Be||Ke||null,D,O,w.transform,w.style.map.terrain),It,Vt,tr=O.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;F.activeTexture.set(V.TEXTURE0),Pe.texture.bind(tr,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(V.TEXTURE1),Be?(Be.texture.bind(tr,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),It=Math.pow(2,Be.tileID.overscaledZ-Pe.tileID.overscaledZ),Vt=[Pe.tileID.canonical.x*It%1,Pe.tileID.canonical.y*It%1]):Pe.texture.bind(tr,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),Pe.texture.useMipmap&&F.extTextureFilterAnisotropic&&w.transform.pitch>20&&V.texParameterf(V.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);let jt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ie),Rt=jt?Ie:null,fr=Rt?Rt.posMatrix:w.transform.calculatePosMatrix(Ie.toUnwrapped(),xe),Pr=nF(fr,Vt||[0,0],It||1,dt,O);G instanceof ht?Q.draw(F,V.TRIANGLES,fe,yo.disabled,ie,lo.disabled,Pr,jt,O.id,G.boundsBuffer,w.quadTriangleIndexBuffer,G.boundsSegments):Q.draw(F,V.TRIANGLES,fe,le[Ie.overscaledZ],ie,lo.disabled,Pr,jt,O.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(s,d,v,y);break;case"background":(function(w,D,O,R){let F=O.paint.get("background-color"),V=O.paint.get("background-opacity");if(V===0)return;let G=w.context,Q=G.gl,ie=w.transform,le=ie.tileSize,he=O.paint.get("background-pattern");if(w.isPatternMissing(he))return;let ye=!he&&F.a===1&&V===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==ye)return;let xe=yo.disabled,Ie=w.depthModeForSublayer(0,ye==="opaque"?un.ReadWrite:un.ReadOnly),fe=w.colorModeForRenderPass(),Pe=w.useProgram(he?"backgroundPattern":"background"),Be=R||ie.coveringTiles({tileSize:le,terrain:w.style.map.terrain});he&&(G.activeTexture.set(Q.TEXTURE0),w.imageManager.bind(w.context));let Ke=O.getCrossfadeParameters();for(let dt of Be){let It=R?dt.posMatrix:w.transform.calculatePosMatrix(dt.toUnwrapped()),Vt=he?tS(It,V,w,he,{tileID:dt,tileSize:le},Ke):t_(It,V,F),tr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(dt);Pe.draw(G,Q.TRIANGLES,Ie,xe,fe,lo.disabled,Vt,tr,O.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(s,0,v,y);break;case"custom":(function(w,D,O){let R=w.context,F=O.implementation;if(w.renderPass==="offscreen"){let V=F.prerender;V&&(w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),V.call(F,R.gl,w.transform.customLayerMatrix()),R.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),R.setStencilMode(yo.disabled);let V=F.renderingMode==="3d"?new un(w.context.gl.LEQUAL,un.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,un.ReadOnly);R.setDepthMode(V),F.render(R.gl,w.transform.customLayerMatrix(),{farZ:w.transform.farZ,nearZ:w.transform.nearZ,fov:w.transform._fov,modelViewProjectionMatrix:w.transform.modelViewProjectionMatrix,projectionMatrix:w.transform.projectionMatrix}),R.setDirty(),w.setBaseState(),R.bindFramebuffer.set(null)}})(s,0,v);}}translatePosMatrix(s,d,v,y,w){if(!v[0]&&!v[1])return s;let D=w?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(D){let F=Math.sin(D),V=Math.cos(D);v=[v[0]*V-v[1]*F,v[0]*F+v[1]*V]}let O=[w?v[0]:vn(d,v[0],this.transform.zoom),w?v[1]:vn(d,v[1],this.transform.zoom),0],R=new Float32Array(16);return i.J(R,s,O),R}saveTileTexture(s){let d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let d=this.imageManager.getPattern(s.from.toString()),v=this.imageManager.getPattern(s.to.toString());return!d||!v}useProgram(s,d){this.cache=this.cache||{};let v=s+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new QE(this.context,mp[s],d,rS[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ue(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}class Pm{constructor(s,d){this.points=s,this.planes=d}static fromInvProjectionMatrix(s,d,v){let y=Math.pow(2,v),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{let R=1/(O=i.af([],O,s))[3]/d*y;return i.b1(O,O,[R,R,1/O[3],R])}),D=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{let R=function(Q,ie){var le=ie[0],he=ie[1],ye=ie[2],xe=le*le+he*he+ye*ye;return xe>0&&(xe=1/Math.sqrt(xe)),Q[0]=ie[0]*xe,Q[1]=ie[1]*xe,Q[2]=ie[2]*xe,Q}([],function(Q,ie,le){var he=ie[0],ye=ie[1],xe=ie[2],Ie=le[0],fe=le[1],Pe=le[2];return Q[0]=ye*Pe-xe*fe,Q[1]=xe*Ie-he*Pe,Q[2]=he*fe-ye*Ie,Q}([],X([],w[O[0]],w[O[1]]),X([],w[O[2]],w[O[1]]))),F=-((V=R)[0]*(G=w[O[1]])[0]+V[1]*G[1]+V[2]*G[2]);var V,G;return R.concat(F)});return new Pm(w,D)}}class km{constructor(s,d){this.min=s,this.max=d,this.center=function(v,y,w){return v[0]=.5*y[0],v[1]=.5*y[1],v[2]=.5*y[2],v}([],function(v,y,w){return v[0]=y[0]+w[0],v[1]=y[1]+w[1],v[2]=y[2]+w[2],v}([],this.min,this.max))}quadrant(s){let d=[s%2==0,s<2],v=U(this.min),y=U(this.max);for(let w=0;w<d.length;w++)v[w]=d[w]?this.min[w]:this.center[w],y[w]=d[w]?this.center[w]:this.max[w];return y[2]=this.max[2],new km(v,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){let d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],v=!0;for(let y=0;y<s.planes.length;y++){let w=s.planes[y],D=0;for(let O=0;O<d.length;O++)i.b2(w,d[O])>=0&&D++;if(D===0)return 0;D!==d.length&&(v=!1)}if(v)return 2;for(let y=0;y<3;y++){let w=Number.MAX_VALUE,D=-Number.MAX_VALUE;for(let O=0;O<s.points.length;O++){let R=s.points[O][y]-this.min[y];w=Math.min(w,R),D=Math.max(D,R)}if(D<0||w>this.max[y]-this.min[y])return 0}return 1}}class Rm{constructor(s=0,d=0,v=0,y=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=v,this.right=y}interpolate(s,d,v){return d.top!=null&&s.top!=null&&(this.top=i.y.number(s.top,d.top,v)),d.bottom!=null&&s.bottom!=null&&(this.bottom=i.y.number(s.bottom,d.bottom,v)),d.left!=null&&s.left!=null&&(this.left=i.y.number(s.left,d.left,v)),d.right!=null&&s.right!=null&&(this.right=i.y.number(s.right,d.right,v)),this}getCenter(s,d){let v=i.ac((this.left+s-this.right)/2,0,s),y=i.ac((this.top+d-this.bottom)/2,0,d);return new i.P(v,y)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new Rm(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let gS=85.051129;class jm{constructor(s,d,v,y,w){this.tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=v==null?0:v,this._maxPitch=y==null?60:y,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Rm,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let s=new jm(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.lngRange=s.lngRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this.minElevationForCurrentTile=s.minElevationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){let d=-i.b3(s,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var v=new i.A(4);return i.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,y,w){var D=y[0],O=y[1],R=y[2],F=y[3],V=Math.sin(w),G=Math.cos(w);v[0]=D*G+R*V,v[1]=O*G+F*V,v[2]=D*-V+R*G,v[3]=O*-V+F*G}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){let d=i.ac(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){let d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,v){this._unmodified=!1,this._edgeInsets.interpolate(s,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){let d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){let d=[new i.b4(0,s)];if(this._renderWorldCopies){let v=this.pointCoordinate(new i.P(0,0)),y=this.pointCoordinate(new i.P(this.width,0)),w=this.pointCoordinate(new i.P(this.width,this.height)),D=this.pointCoordinate(new i.P(0,this.height)),O=Math.floor(Math.min(v.x,y.x,w.x,D.x)),R=Math.floor(Math.max(v.x,y.x,w.x,D.x)),F=1;for(let V=O-F;V<=R+F;V++)V!==0&&d.push(new i.b4(V,s))}return d}coveringTiles(s){var d,v;let y=this.coveringZoomLevel(s),w=y;if(s.minzoom!==void 0&&y<s.minzoom)return[];s.maxzoom!==void 0&&y>s.maxzoom&&(y=s.maxzoom);let D=this.pointCoordinate(this.getCameraPoint()),O=i.Z.fromLngLat(this.center),R=Math.pow(2,y),F=[R*D.x,R*D.y,0],V=[R*O.x,R*O.y,0],G=Pm.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y),Q=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Q=y);let ie=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,le=fe=>({aabb:new km([fe*R,0,0],[(fe+1)*R,R,0]),zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),he=[],ye=[],xe=y,Ie=s.reparseOverscaled?w:y;if(this._renderWorldCopies)for(let fe=1;fe<=3;fe++)he.push(le(-fe)),he.push(le(fe));for(he.push(le(0));he.length>0;){let fe=he.pop(),Pe=fe.x,Be=fe.y,Ke=fe.fullyVisible;if(!Ke){let jt=fe.aabb.intersects(G);if(jt===0)continue;Ke=jt===2}let dt=s.terrain?F:V,It=fe.aabb.distanceX(dt),Vt=fe.aabb.distanceY(dt),tr=Math.max(Math.abs(It),Math.abs(Vt));if(fe.zoom===xe||tr>ie+(1<<xe-fe.zoom)-2&&fe.zoom>=Q){let jt=xe-fe.zoom,Rt=F[0]-.5-(Pe<<jt),fr=F[1]-.5-(Be<<jt);ye.push({tileID:new i.S(fe.zoom===xe?Ie:fe.zoom,fe.wrap,fe.zoom,Pe,Be),distanceSq:ee([V[0]-.5-Pe,V[1]-.5-Be]),tileDistanceToCamera:Math.sqrt(Rt*Rt+fr*fr)})}else for(let jt=0;jt<4;jt++){let Rt=(Pe<<1)+jt%2,fr=(Be<<1)+(jt>>1),Pr=fe.zoom+1,zt=fe.aabb.quadrant(jt);if(s.terrain){let Xt=new i.S(Pr,fe.wrap,Pr,Rt,fr),Or=s.terrain.getMinMaxElevation(Xt),Ao=(d=Or.minElevation)!==null&&d!==void 0?d:this.elevation,Yr=(v=Or.maxElevation)!==null&&v!==void 0?v:this.elevation;zt=new km([zt.min[0],zt.min[1],Ao],[zt.max[0],zt.max[1],Yr])}he.push({aabb:zt,zoom:Pr,x:Rt,y:fr,wrap:fe.wrap,fullyVisible:Ke})}}return ye.sort((fe,Pe)=>fe.distanceSq-Pe.distanceSq).map(fe=>fe.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){let d=i.ac(s.lat,-85.051129,gS);return new i.P(i.O(s.lng)*this.worldSize,i.Q(d)*this.worldSize)}unproject(s){return new i.Z(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){let d=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,s),w=s.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-w))return;let D=v+d-w,O=Math.cos(this._pitch)*this.cameraToCenterDistance/D/i.b5(1,y.lat),R=this.scaleZoom(O/this.tileSize);this._elevation=w,this._center=y,this.zoom=R}setLocationAtPoint(s,d){let v=this.pointCoordinate(d),y=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(s),D=new i.Z(w.x-(v.x-y.x),w.y-(v.y-y.y));this.center=this.coordinateLocation(D),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,d){return d?this.coordinatePoint(this.locationCoordinate(s),d.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,d){return this.coordinateLocation(this.pointCoordinate(s,d))}locationCoordinate(s){return i.Z.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,d){if(d){let Q=d.pointCoordinate(s);if(Q!=null)return Q}let v=[s.x,s.y,0,1],y=[s.x,s.y,1,1];i.af(v,v,this.pixelMatrixInverse),i.af(y,y,this.pixelMatrixInverse);let w=v[3],D=y[3],O=v[1]/w,R=y[1]/D,F=v[2]/w,V=y[2]/D,G=F===V?0:(0-F)/(V-F);return new i.Z(i.y.number(v[0]/w,y[0]/D,G)/this.worldSize,i.y.number(O,R,G)/this.worldSize)}coordinatePoint(s,d=0,v=this.pixelMatrix){let y=[s.x*this.worldSize,s.y*this.worldSize,d,1];return i.af(y,y,v),new i.P(y[0]/y[3],y[1]/y[3])}getBounds(){let s=Math.max(0,this.height/2-this.getHorizon());return new Ae().extend(this.pointLocation(new i.P(0,s))).extend(this.pointLocation(new i.P(this.width,s))).extend(this.pointLocation(new i.P(this.width,this.height))).extend(this.pointLocation(new i.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ae([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,gS])}calculateTileMatrix(s){let d=s.canonical,v=this.worldSize/this.zoomScale(d.z),y=d.x+Math.pow(2,d.z)*s.wrap,w=i.an(new Float64Array(16));return i.J(w,w,[y*v,d.y*v,0]),i.K(w,w,[v/i.X,v/i.X,1]),w}calculatePosMatrix(s,d=!1){let v=s.key,y=d?this._alignedPosMatrixCache:this._posMatrixCache;if(y[v])return y[v];let w=this.calculateTileMatrix(s);return i.L(w,d?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,w),y[v]=new Float32Array(w),y[v]}calculateFogMatrix(s){let d=s.key,v=this._fogMatrixCache;if(v[d])return v[d];let y=this.calculateTileMatrix(s);return i.L(y,this.fogMatrix,y),v[d]=new Float32Array(y),v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(s,d){d=i.ac(+d,this.minZoom,this.maxZoom);let v={center:new i.N(s.lng,s.lat),zoom:d},y=this.lngRange;if(!this._renderWorldCopies&&y===null){let fe=179.9999999999;y=[-fe,fe]}let w=this.tileSize*this.zoomScale(v.zoom),D=0,O=w,R=0,F=w,V=0,G=0,{x:Q,y:ie}=this.size;if(this.latRange){let fe=this.latRange;D=i.Q(fe[1])*w,O=i.Q(fe[0])*w,O-D<ie&&(V=ie/(O-D))}y&&(R=i.b3(i.O(y[0])*w,0,w),F=i.b3(i.O(y[1])*w,0,w),F<R&&(F+=w),F-R<Q&&(G=Q/(F-R)));let{x:le,y:he}=this.project.call({worldSize:w},s),ye,xe,Ie=Math.max(G||0,V||0);if(Ie){let fe=new i.P(G?(F+R)/2:le,V?(O+D)/2:he);return v.center=this.unproject.call({worldSize:w},fe).wrap(),v.zoom+=this.scaleZoom(Ie),v}if(this.latRange){let fe=ie/2;he-fe<D&&(xe=D+fe),he+fe>O&&(xe=O-fe)}if(y){let fe=(R+F)/2,Pe=le;this._renderWorldCopies&&(Pe=i.b3(le,fe-w/2,fe+w/2));let Be=Q/2;Pe-Be<R&&(ye=R+Be),Pe+Be>F&&(ye=F-Be)}if(ye!==void 0||xe!==void 0){let fe=new i.P(ye!=null?ye:le,xe!=null?xe:he);v.center=this.unproject.call({worldSize:w},fe).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=v,this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;let s=this.centerOffset,d=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=i.b5(1,this.center.lat)*this.worldSize;let y=i.an(new Float64Array(16));i.K(y,y,[this.width/2,-this.height/2,1]),i.J(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=i.an(new Float64Array(16)),i.K(y,y,[1,-1,1]),i.J(y,y,[-1,-1,0]),i.K(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;let w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),D=Math.min(this.elevation,this.minElevationForCurrentTile),O=w-D*this._pixelPerMeter/Math.cos(this._pitch),R=D<0?O:w,F=Math.PI/2+this._pitch,V=this._fov*(.5+s.y/this.height),G=Math.sin(V)*R/Math.sin(i.ac(Math.PI-F-V,.01,Math.PI-.01)),Q=this.getHorizon(),ie=2*Math.atan(Q/this.cameraToCenterDistance)*(.5+s.y/(2*Q)),le=Math.sin(ie)*R/Math.sin(i.ac(Math.PI-F-ie,.01,Math.PI-.01)),he=Math.min(G,le);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*he+R),this.nearZ=this.height/50,y=new Float64Array(16),i.b6(y,this._fov,this.width/this.height,this.nearZ,this.farZ),y[8]=2*-s.x/this.width,y[9]=2*s.y/this.height,this.projectionMatrix=i.ae(y),i.K(y,y,[1,-1,1]),i.J(y,y,[0,0,-this.cameraToCenterDistance]),i.b7(y,y,this._pitch),i.ad(y,y,this.angle),i.J(y,y,[-d,-v,0]),this.mercatorMatrix=i.K([],y,[this.worldSize,this.worldSize,this.worldSize]),i.K(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=i.L(new Float64Array(16),this.labelPlaneMatrix,y),i.J(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=i.as([],y),this.fogMatrix=new Float64Array(16),i.b6(this.fogMatrix,this._fov,this.width/this.height,w,this.farZ),this.fogMatrix[8]=2*-s.x/this.width,this.fogMatrix[9]=2*s.y/this.height,i.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),i.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),i.b7(this.fogMatrix,this.fogMatrix,this._pitch),i.ad(this.fogMatrix,this.fogMatrix,this.angle),i.J(this.fogMatrix,this.fogMatrix,[-d,-v,0]),i.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),i.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=i.L(new Float64Array(16),this.labelPlaneMatrix,y);let ye=this.width%2/2,xe=this.height%2/2,Ie=Math.cos(this.angle),fe=Math.sin(this.angle),Pe=d-Math.round(d)+Ie*ye+fe*xe,Be=v-Math.round(v)+Ie*xe+fe*ye,Ke=new Float64Array(y);if(i.J(Ke,Ke,[Pe>.5?Pe-1:Pe,Be>.5?Be-1:Be,0]),this.alignedModelViewProjectionMatrix=Ke,y=i.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let s=this.pointCoordinate(new i.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return i.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,s))}getCameraQueryGeometry(s){let d=this.getCameraPoint();if(s.length===1)return[s[0],d];{let v=d.x,y=d.y,w=d.x,D=d.y;for(let O of s)v=Math.min(v,O.x),y=Math.min(y,O.y),w=Math.max(w,O.x),D=Math.max(D,O.y);return[new i.P(v,y),new i.P(w,y),new i.P(w,D),new i.P(v,D),new i.P(v,y)]}}lngLatToCameraDepth(s,d){let v=this.locationCoordinate(s),y=[v.x*this.worldSize,v.y*this.worldSize,d,1];return i.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function by(E,s){let d,v=!1,y=null,w=null,D=()=>{y=null,v&&(E.apply(w,d),y=setTimeout(D,s),v=!1)};return(...O)=>(v=!0,w=this,d=O,y||D(),y)}class p_{constructor(s){this._getCurrentHash=()=>{let d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(v=y)}),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{let d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(v))){let v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{let d=this._getCurrentHash();if(d.length===0)return;let v=d.join("/"),y=v;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${v}`);let w=window.location.hash.replace(y,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let D=window.location.href.replace(/(#.+)?$/,w);D=D.replace("&&","&"),window.history.replaceState(window.history.state,null,D)},this._updateHash=by(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,y=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,y),D=Math.round(d.lng*w)/w,O=Math.round(d.lat*w)/w,R=this._map.getBearing(),F=this._map.getPitch(),V="";if(V+=s?`/${D}/${O}/${v}`:`${v}/${O}/${D}`,(R||F)&&(V+="/"+Math.round(10*R)/10),F&&(V+=`/${Math.round(F)}`),this._hashName){let G=this._hashName,Q=!1,ie=window.location.hash.slice(1).split("&").map(le=>{let he=le.split("=")[0];return he===G?(Q=!0,`${he}=${V}`):le}).filter(le=>le);return Q||ie.push(`${G}=${V}`),`#${ie.join("&")}`}return`#${V}`}}let d_={linearity:.3,easing:i.b8(0,0,.3,1)},vS=i.e({deceleration:2500,maxSpeed:1400},d_),gF=i.e({deceleration:20,maxSpeed:1400},d_),s4=i.e({deceleration:1e3,maxSpeed:360},d_),h_=i.e({deceleration:1e3,maxSpeed:90},d_);class yS{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,d=h.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let d={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:w}of this._inertiaBuffer)d.zoom+=w.zoomDelta||0,d.bearing+=w.bearingDelta||0,d.pitch+=w.pitchDelta||0,w.panDelta&&d.pan._add(w.panDelta),w.around&&(d.around=w.around),w.pinchAround&&(d.pinchAround=w.pinchAround);let v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(d.pan.mag()){let w=Ey(d.pan.mag(),v,i.e({},vS,s||{}));y.offset=d.pan.mult(w.amount/d.pan.mag()),y.center=this._map.transform.center,wy(y,w)}if(d.zoom){let w=Ey(d.zoom,v,gF);y.zoom=this._map.transform.zoom+w.amount,wy(y,w)}if(d.bearing){let w=Ey(d.bearing,v,s4);y.bearing=this._map.transform.bearing+i.ac(w.amount,-179,179),wy(y,w)}if(d.pitch){let w=Ey(d.pitch,v,h_);y.pitch=this._map.transform.pitch+w.amount,wy(y,w)}if(y.zoom||y.bearing){let w=d.pinchAround===void 0?d.around:d.pinchAround;y.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),i.e(y,{noMoveStart:!0})}}function wy(E,s){(!E.duration||E.duration<s.duration)&&(E.duration=s.duration,E.easing=s.easing)}function Ey(E,s,d){let{maxSpeed:v,linearity:y,deceleration:w}=d,D=i.ac(E*y/(s/1e3),-v,v),O=Math.abs(D)/(w*y);return{easing:d.easing,duration:1e3*O,amount:D*(O/2)}}class Ma extends i.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v,y={}){let w=g.mousePos(d.getCanvas(),v),D=d.unproject(w);super(s,i.e({point:w,lngLat:D,originalEvent:v},y)),this._defaultPrevented=!1,this.target=d}}class Xd extends i.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){let y=s==="touchend"?v.changedTouches:v.touches,w=g.touchPos(d.getCanvasContainer(),y),D=w.map(R=>d.unproject(R)),O=w.reduce((R,F,V,G)=>R.add(F.div(G.length)),new i.P(0,0));super(s,{points:w,point:O,lngLats:D,lngLat:d.unproject(O),originalEvent:v}),this._defaultPrevented=!1}}class l4 extends i.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){super(s,{originalEvent:v}),this._defaultPrevented=!1}}class u4{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new l4(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Ma(s.type,this._map,s))}mouseup(s){this._map.fire(new Ma(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Ma(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Ma(s.type,this._map,s))}mouseover(s){this._map.fire(new Ma(s.type,this._map,s))}mouseout(s){this._map.fire(new Ma(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Xd(s.type,this._map,s))}touchmove(s){this._map.fire(new Xd(s.type,this._map,s))}touchend(s){this._map.fire(new Xd(s.type,this._map,s))}touchcancel(s){this._map.fire(new Xd(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mi{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Ma(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ma("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Ma(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Lu{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(i.P.convert(s),this._map.terrain)}}class hl{constructor(s,d){this._map=s,this._tr=new Lu(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(g.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;let v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;let y=this._startPos;this._lastPos=v,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let w=Math.min(y.x,v.x),D=Math.max(y.x,v.x),O=Math.min(y.y,v.y),R=Math.max(y.y,v.y);g.setTransform(this._box,`translate(${w}px,${O}px)`),this._box.style.width=D-w+"px",this._box.style.height=R-O+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;let v=this._startPos,y=d;if(this.reset(),g.suppressClick(),v.x!==y.x||v.y!==y.y)return this._map.fire(new i.k("boxzoomend",{originalEvent:s})),{cameraAnimation:w=>w.fitScreenCoordinates(v,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new i.k(s,{originalEvent:d}))}}function Sy(E,s){if(E.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${s.length}`);let d={};for(let v=0;v<E.length;v++)d[E[v].identifier]=s[v];return d}class _S{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),v.length===this.numTouches&&(this.centroid=function(y){let w=new i.P(0,0);for(let D of y)w._add(D);return w.div(y.length)}(d),this.touches=Sy(v,d)))}touchmove(s,d,v){if(this.aborted||!this.centroid)return;let y=Sy(v,d);for(let w in this.touches){let D=y[w];(!D||D.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(s,d,v){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){let y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class m_{constructor(s){this.singleTap=new _S(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,v){this.singleTap.touchstart(s,d,v)}touchmove(s,d,v){this.singleTap.touchmove(s,d,v)}touchend(s,d,v){let y=this.singleTap.touchend(s,d,v);if(y){let w=s.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(y)<30;if(w&&D||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class qm{constructor(s){this._tr=new Lu(s),this._zoomIn=new m_({numTouches:1,numTaps:2}),this._zoomOut=new m_({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,v){this._zoomIn.touchstart(s,d,v),this._zoomOut.touchstart(s,d,v)}touchmove(s,d,v){this._zoomIn.touchmove(s,d,v),this._zoomOut.touchmove(s,d,v)}touchend(s,d,v){let y=this._zoomIn.touchend(s,d,v),w=this._zoomOut.touchend(s,d,v),D=this._tr;return y?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:D.zoom+1,around:D.unproject(y)},{originalEvent:s})}):w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:D.zoom-1,around:D.unproject(w)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xf{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;let v=this._lastPoint;if(!v)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let y=d.length?d[0]:d;return!this._moved&&y.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(v,y))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&g.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let xS={0:1,2:2};class g_{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let d=g.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,v){let y=xS[v];return d.buttons===void 0||(d.buttons&y)!==y}(s,this._eventButton)}isValidEndEvent(s){return g.mouseButton(s)===this._eventButton}}class bS{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}let v_=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=s=>{s.preventDefault()}},wS=({enable:E,clickTolerance:s,bearingDegreesPerPixelMoved:d=.8})=>{let v=new g_({checkCorrectEvent:y=>g.mouseButton(y)===0&&y.ctrlKey||g.mouseButton(y)===2});return new xf({clickTolerance:s,move:(y,w)=>({bearingDelta:(w.x-y.x)*d}),moveStateManager:v,enable:E,assignEvents:v_})},ES=({enable:E,clickTolerance:s,pitchDegreesPerPixelMoved:d=-.5})=>{let v=new g_({checkCorrectEvent:y=>g.mouseButton(y)===0&&y.ctrlKey||g.mouseButton(y)===2});return new xf({clickTolerance:s,move:(y,w)=>({pitchDelta:(w.y-y.y)*d}),moveStateManager:v,enable:E,assignEvents:v_})};class Jd{constructor(s,d){this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,d,v){return this._calculateTransform(s,d,v)}touchmove(s,d,v){if(this._active){if(!this._shouldBePrevented(v.length))return s.preventDefault(),this._calculateTransform(s,d,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,d,v){this._calculateTransform(s,d,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,v){v.length>0&&(this._active=!0);let y=Sy(v,d),w=new i.P(0,0),D=new i.P(0,0),O=0;for(let F in y){let V=y[F],G=this._touches[F];G&&(w._add(V),D._add(V.sub(G)),O++,y[F]=V)}if(this._touches=y,this._shouldBePrevented(O)||!D.mag())return;let R=D.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class y_{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,v){if(!this._firstTwoTouches)return;s.preventDefault();let[y,w]=this._firstTwoTouches,D=Iy(v,d,y),O=Iy(v,d,w);if(!D||!O)return;let R=this._aroundCenter?null:D.add(O).div(2);return this._move([D,O],R,s)}touchend(s,d,v){if(!this._firstTwoTouches)return;let[y,w]=this._firstTwoTouches,D=Iy(v,d,y),O=Iy(v,d,w);D&&O||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Iy(E,s,d){for(let v=0;v<E.length;v++)if(E[v].identifier===d)return s[v]}function SS(E,s){return Math.log(E/s)/Math.LN2}class IS extends y_{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){let v=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(SS(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:SS(this._distance,v),pinchAround:d}}}function TS(E,s){return 180*E.angleWith(s)/Math.PI}class MS extends y_{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d,v){let y=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:TS(this._vector,y),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let d=25/(Math.PI*this._minDiameter)*360,v=TS(s,this._startVector);return Math.abs(v)<d}}function __(E){return Math.abs(E.y)>Math.abs(E.x)}class zm extends y_{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,v){super.touchstart(s,d,v),this._currentTouchCount=v.length}_start(s){this._lastPoints=s,__(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let y=s[0].sub(this._lastPoints[0]),w=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,w,v.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(y.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,v){if(this._valid!==void 0)return this._valid;let y=s.mag()>=2,w=d.mag()>=2;if(!y&&!w)return;if(!y||!w)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;let D=s.y>0==d.y>0;return __(s)&&__(d)&&D}}let c4={panStep:100,bearingStep:15,pitchStep:10};class Ul{constructor(s){this._tr=new Lu(s);let d=c4;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,v=0,y=0,w=0,D=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?v=-1:(s.preventDefault(),w=-1);break;case 39:s.shiftKey?v=1:(s.preventDefault(),w=1);break;case 38:s.shiftKey?y=1:(s.preventDefault(),D=-1);break;case 40:s.shiftKey?y=-1:(s.preventDefault(),D=1);break;default:return;}return this._rotationDisabled&&(v=0,y=0),{cameraAnimation:O=>{let R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:uc,zoom:d?Math.round(R.zoom)+d*(s.shiftKey?2:1):R.zoom,bearing:R.bearing+v*this._bearingStep,pitch:R.pitch+y*this._pitchStep,offset:[-w*this._panStep,-D*this._panStep],center:R.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function uc(E){return E*(2-E)}let CS=4.000244140625;class Pu{constructor(s,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=s,this._tr=new Lu(s),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,v=h.now(),y=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%CS==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(y*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let d=g.mousePos(this._map.getCanvas(),s),v=this._tr;this._around=d.y>v.transform.height/2-v.transform.getHorizon()?i.N.convert(this._aroundCenter?v.center:v.unproject(d)):i.N.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(this._delta!==0){let R=this._type==="wheel"&&Math.abs(this._delta)>CS?this._wheelZoomRate:this._defaultZoomRate,F=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&F!==0&&(F=1/F);let V=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(V*F))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let d=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,v=this._startZoom,y=this._easing,w,D=!1,O=h.now()-this._lastWheelEventTime;if(this._type==="wheel"&&v&&y&&O){let R=Math.min(O/200,1),F=y(R);w=i.y.number(v,d,F),R<1?this._frameId||(this._frameId=!0):D=!0}else w=d,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=i.b9;if(this._prevEase){let v=this._prevEase,y=(h.now()-v.start)/v.duration,w=v.easing(y+.01)-v.easing(y),D=.27/Math.sqrt(w*w+1e-4)*.01,O=Math.sqrt(.0729-D*D);d=i.b8(D,O,.25,1)}return this._prevEase={start:h.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Qd{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vF{constructor(s){this._tr=new Lu(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class yF{constructor(){this._tap=new m_({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,v){if(!this._swipePoint)if(this._tapTime){let y=d[0],w=s.timeStamp-this._tapTime<500,D=this._tapPoint.dist(y)<30;w&&D?v.length>0&&(this._swipePoint=y,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(s,d,v)}touchmove(s,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;let y=d[0],w=y.y-this._swipePoint.y;return this._swipePoint=y,s.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(s,d,v)}touchend(s,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{let y=this._tap.touchend(s,d,v);y&&(this._tapTime=s.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class f4{constructor(s,d,v){this._el=s,this._mousePan=d,this._touchPan=v}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class p4{constructor(s,d,v){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class AS{constructor(s,d,v,y){this._el=s,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Fm{constructor(s,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=g.create("div","maplibregl-cooperative-gesture-screen",s);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=d,this._container.appendChild(y);let w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=v,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(g.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,d){this._enabled&&(this._map.fire(new i.k("cooperativegestureprevented",{gestureType:s,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Bl=E=>E.zoom||E.drag||E.pitch||E.rotate;class or extends i.k{}function x_(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class DS{constructor(s,d){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,w)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let D=y.type==="renderFrame"?void 0:y,O={needsRenderFrame:!1},R={},F={},V=y.touches,G=V?this._getMapTouches(V):void 0,Q=G?g.touchPos(this._map.getCanvas(),G):g.mousePos(this._map.getCanvas(),y);for(let{handlerName:he,handler:ye,allowed:xe}of this._handlers){if(!ye.isEnabled())continue;let Ie;this._blockedByActive(F,xe,he)?ye.reset():ye[w||y.type]&&(Ie=ye[w||y.type](y,Q,G),this.mergeHandlerResult(O,R,Ie,he,D),Ie&&Ie.needsRenderFrame&&this._triggerRenderFrame()),(Ie||ye.isActive())&&(F[he]=ye)}let ie={};for(let he in this._previousActiveHandlers)F[he]||(ie[he]=D);this._previousActiveHandlers=F,(Object.keys(ie).length||x_(O))&&(this._changes.push([O,R,ie]),this._triggerRenderFrame()),(Object.keys(F).length||x_(O))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:le}=O;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yS(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);let v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(let[y,w,D]of this._listeners)g.addEventListener(y,w,y===document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(let[s,d,v]of this._listeners)g.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(s){let d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new u4(d,s));let y=d.boxZoom=new hl(d,s);this._add("boxZoom",y),s.interactive&&s.boxZoom&&y.enable();let w=d.cooperativeGestures=new Fm(d,s.cooperativeGestures);this._add("cooperativeGestures",w),s.cooperativeGestures&&w.enable();let D=new qm(d),O=new vF(d);d.doubleClickZoom=new Qd(O,D),this._add("tapZoom",D),this._add("clickZoom",O),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();let R=new yF;this._add("tapDragZoom",R);let F=d.touchPitch=new zm(d);this._add("touchPitch",F),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);let V=wS(s),G=ES(s);d.dragRotate=new p4(s,V,G),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();let Q=(({enable:Ie,clickTolerance:fe})=>{let Pe=new g_({checkCorrectEvent:Be=>g.mouseButton(Be)===0&&!Be.ctrlKey});return new xf({clickTolerance:fe,move:(Be,Ke)=>({around:Ke,panDelta:Ke.sub(Be)}),activateOnStart:!0,moveStateManager:Pe,enable:Ie,assignEvents:v_})})(s),ie=new Jd(s,d);d.dragPan=new f4(v,Q,ie),this._add("mousePan",Q),this._add("touchPan",ie,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);let le=new MS,he=new IS;d.touchZoomRotate=new AS(v,he,le,R),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",he,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);let ye=d.scrollZoom=new Pu(d,()=>this._triggerRenderFrame());this._add("scrollZoom",ye,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);let xe=d.keyboard=new Ul(d);this._add("keyboard",xe),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new mi(d))}_add(s,d,v){this._handlers.push({handlerName:s,handler:d,allowed:v}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(let{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Bl(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,v){for(let y in s)if(y!==v&&(!d||d.indexOf(y)<0))return!0;return!1}_getMapTouches(s){let d=[];for(let v of s)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(s,d,v,y,w){if(!v)return;i.e(s,v);let D={handlerName:y,originalEvent:v.originalEvent||w};v.zoomDelta!==void 0&&(d.zoom=D),v.panDelta!==void 0&&(d.drag=D),v.pitchDelta!==void 0&&(d.pitch=D),v.bearingDelta!==void 0&&(d.rotate=D)}_applyChanges(){let s={},d={},v={};for(let[y,w,D]of this._changes)y.panDelta&&(s.panDelta=(s.panDelta||new i.P(0,0))._add(y.panDelta)),y.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(s.around=y.around),y.pinchAround!==void 0&&(s.pinchAround=y.pinchAround),y.noInertia&&(s.noInertia=y.noInertia),i.e(d,w),i.e(v,D);this._updateMapTransform(s,d,v),this._changes=[]}_updateMapTransform(s,d,v){let y=this._map,w=y._getTransformForUpdate(),D=y.terrain;if(!(x_(s)||D&&this._terrainMovement))return this._fireEvents(d,v,!0);let{panDelta:O,zoomDelta:R,bearingDelta:F,pitchDelta:V,around:G,pinchAround:Q}=s;Q!==void 0&&(G=Q),y._stop(!0),G=G||y.transform.centerPoint;let ie=w.pointLocation(O?G.sub(O):G);F&&(w.bearing+=F),V&&(w.pitch+=V),R&&(w.zoom+=R),D?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(O)):w.setLocationAtPoint(ie,G):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(ie,G)):w.setLocationAtPoint(ie,G),y._applyUpdatedTransform(w),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,v,!0)}_fireEvents(s,d,v){let y=Bl(this._eventsInProgress),w=Bl(s),D={};for(let G in s){let{originalEvent:Q}=s[G];this._eventsInProgress[G]||(D[`${G}start`]=Q),this._eventsInProgress[G]=s[G]}!y&&w&&this._fireEvent("movestart",w.originalEvent);for(let G in D)this._fireEvent(G,D[G]);w&&this._fireEvent("move",w.originalEvent);for(let G in s){let{originalEvent:Q}=s[G];this._fireEvent(G,Q)}let O={},R;for(let G in this._eventsInProgress){let{handlerName:Q,originalEvent:ie}=this._eventsInProgress[G];this._handlersById[Q].isActive()||(delete this._eventsInProgress[G],R=d[Q]||ie,O[`${G}end`]=R)}for(let G in O)this._fireEvent(G,O[G]);let F=Bl(this._eventsInProgress),V=(y||w)&&!F;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let G=this._map._getTransformForUpdate();G.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(G)}if(v&&V){this._updatingCamera=!0;let G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Q=ie=>ie!==0&&-this._bearingSnap<ie&&ie<this._bearingSnap;!G||!G.essential&&h.prefersReducedMotion?(this._map.fire(new i.k("moveend",{originalEvent:R})),Q(this._map.getBearing())&&this._map.resetNorth()):(Q(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new i.k(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new or("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class d4 extends i.E{constructor(s,d){super(),this._renderFrameCallback=()=>{let v=Math.min((h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new i.N(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,v){return s=i.P.convert(s).mult(-1),this.panTo(this.transform.center,i.e({offset:s},d),v)}panTo(s,d,v){return this.easeTo(i.e({center:s},d),v)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,v){return this.easeTo(i.e({zoom:s},d),v)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,v){return this.easeTo(i.e({bearing:s},d),v)}resetNorth(s,d){return this.rotateTo(0,i.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(i.e({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=Ae.convert(s).adjustAntiMeridian();let v=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),v,d)}_cameraForBoxAndBearing(s,d,v,y){let w={top:0,bottom:0,right:0,left:0};if(typeof(y=i.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){let jt=y.padding;y.padding={top:jt,bottom:jt,right:jt,left:jt}}y.padding=i.e(w,y.padding);let D=this.transform,O=D.padding,R=new Ae(s,d),F=D.project(R.getNorthWest()),V=D.project(R.getNorthEast()),G=D.project(R.getSouthEast()),Q=D.project(R.getSouthWest()),ie=i.ba(-v),le=F.rotate(ie),he=V.rotate(ie),ye=G.rotate(ie),xe=Q.rotate(ie),Ie=new i.P(Math.max(le.x,he.x,xe.x,ye.x),Math.max(le.y,he.y,xe.y,ye.y)),fe=new i.P(Math.min(le.x,he.x,xe.x,ye.x),Math.min(le.y,he.y,xe.y,ye.y)),Pe=Ie.sub(fe),Be=(D.width-(O.left+O.right+y.padding.left+y.padding.right))/Pe.x,Ke=(D.height-(O.top+O.bottom+y.padding.top+y.padding.bottom))/Pe.y;if(Ke<0||Be<0)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let dt=Math.min(D.scaleZoom(D.scale*Math.min(Be,Ke)),y.maxZoom),It=i.P.convert(y.offset),Vt=new i.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(i.ba(v)),tr=It.add(Vt).mult(D.scale/D.zoomScale(dt));return{center:D.unproject(F.add(G).div(2).sub(tr)),zoom:dt,bearing:v}}fitBounds(s,d,v){return this._fitInternal(this.cameraForBounds(s,d),d,v)}fitScreenCoordinates(s,d,v,y,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.P.convert(s)),this.transform.pointLocation(i.P.convert(d)),v,y),y,w)}_fitInternal(s,d,v){return s?(delete(d=i.e(s,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(s,d){this.stop();let v=this._getTransformForUpdate(),y=!1,w=!1,D=!1;return"zoom"in s&&v.zoom!==+s.zoom&&(y=!0,v.zoom=+s.zoom),s.center!==void 0&&(v.center=i.N.convert(s.center)),"bearing"in s&&v.bearing!==+s.bearing&&(w=!0,v.bearing=+s.bearing),"pitch"in s&&v.pitch!==+s.pitch&&(D=!0,v.pitch=+s.pitch),s.padding==null||v.isPaddingEqual(s.padding)||(v.padding=s.padding),this._applyUpdatedTransform(v),this.fire(new i.k("movestart",d)).fire(new i.k("move",d)),y&&this.fire(new i.k("zoomstart",d)).fire(new i.k("zoom",d)).fire(new i.k("zoomend",d)),w&&this.fire(new i.k("rotatestart",d)).fire(new i.k("rotate",d)).fire(new i.k("rotateend",d)),D&&this.fire(new i.k("pitchstart",d)).fire(new i.k("pitch",d)).fire(new i.k("pitchend",d)),this.fire(new i.k("moveend",d))}calculateCameraOptionsFromTo(s,d,v,y=0){let w=i.Z.fromLngLat(s,d),D=i.Z.fromLngLat(v,y),O=D.x-w.x,R=D.y-w.y,F=D.z-w.z,V=Math.hypot(O,R,F);if(V===0)throw new Error("Can't calculate camera options with same From and To");let G=Math.hypot(O,R),Q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/V/this.transform.tileSize),ie=180*Math.atan2(O,-R)/Math.PI,le=180*Math.acos(G/V)/Math.PI;return le=F<0?90-le:90+le,{center:D.toLngLat(),zoom:Q,pitch:le,bearing:ie}}easeTo(s,d){var v;this._stop(!1,s.easeId),((s=i.e({offset:[0,0],duration:500,easing:i.b9},s)).animate===!1||!s.essential&&h.prefersReducedMotion)&&(s.duration=0);let y=this._getTransformForUpdate(),w=y.zoom,D=y.bearing,O=y.pitch,R=y.padding,F="bearing"in s?this._normalizeBearing(s.bearing,D):D,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,Q=i.P.convert(s.offset),ie=y.centerPoint.add(Q),le=y.pointLocation(ie),{center:he,zoom:ye}=y.getConstrained(i.N.convert(s.center||le),(v=s.zoom)!==null&&v!==void 0?v:w);this._normalizeCenter(he,y);let xe=y.project(le),Ie=y.project(he).sub(xe),fe=y.zoomScale(ye-w),Pe,Be;s.around&&(Pe=i.N.convert(s.around),Be=y.locationPoint(Pe));let Ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==w,this._rotating=this._rotating||D!==F,this._pitching=this._pitching||V!==O,this._padding=!y.isPaddingEqual(G),this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Ke),this.terrain&&this._prepareElevation(he),this._ease(dt=>{if(this._zooming&&(y.zoom=i.y.number(w,ye,dt)),this._rotating&&(y.bearing=i.y.number(D,F,dt)),this._pitching&&(y.pitch=i.y.number(O,V,dt)),this._padding&&(y.interpolatePadding(R,G,dt),ie=y.centerPoint.add(Q)),this.terrain&&!s.freezeElevation&&this._updateElevation(dt),Pe)y.setLocationAtPoint(Pe,Be);else{let It=y.zoomScale(y.zoom-w),Vt=ye>w?Math.min(2,fe):Math.max(.5,fe),tr=Math.pow(Vt,1-dt),jt=y.unproject(xe.add(Ie.mult(dt*tr)).mult(It));y.setLocationAtPoint(y.renderWorldCopies?jt.wrap():jt,ie)}this._applyUpdatedTransform(y),this._fireMoveEvents(d)},dt=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d,dt)},s),this}_prepareEase(s,d,v={}){this._moving=!0,d||v.moving||this.fire(new i.k("movestart",s)),this._zooming&&!v.zooming&&this.fire(new i.k("zoomstart",s)),this._rotating&&!v.rotating&&this.fire(new i.k("rotatestart",s)),this._pitching&&!v.pitching&&this.fire(new i.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){let v=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(v-(d-(v*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.elevation=i.y.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){let d=s.getCameraPosition(),v=this.terrain.getElevationForLngLatZoom(d.lngLat,s.zoom);if(d.altitude<v){let y=this.calculateCameraOptionsFromTo(d.lngLat,v,s.center,s.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(s){let d=[];if(this.terrain&&d.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&d.push(y=>this.transformCameraUpdate(y)),!d.length)return;let v=s.clone();for(let y of d){let w=v.clone(),{center:D,zoom:O,pitch:R,bearing:F,elevation:V}=y(w);D&&(w.center=D),O!==void 0&&(w.zoom=O),R!==void 0&&(w.pitch=R),F!==void 0&&(w.bearing=F),V!==void 0&&(w.elevation=V),v.apply(w)}this.transform.apply(v)}_fireMoveEvents(s){this.fire(new i.k("move",s)),this._zooming&&this.fire(new i.k("zoom",s)),this._rotating&&this.fire(new i.k("rotate",s)),this._pitching&&this.fire(new i.k("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;let v=this._zooming,y=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new i.k("zoomend",s)),y&&this.fire(new i.k("rotateend",s)),w&&this.fire(new i.k("pitchend",s)),this.fire(new i.k("moveend",s))}flyTo(s,d){var v;if(!s.essential&&h.prefersReducedMotion){let Xt=i.M(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xt,d)}this.stop(),s=i.e({offset:[0,0],speed:1.2,curve:1.42,easing:i.b9},s);let y=this._getTransformForUpdate(),w=y.zoom,D=y.bearing,O=y.pitch,R=y.padding,F="bearing"in s?this._normalizeBearing(s.bearing,D):D,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,Q=i.P.convert(s.offset),ie=y.centerPoint.add(Q),le=y.pointLocation(ie),{center:he,zoom:ye}=y.getConstrained(i.N.convert(s.center||le),(v=s.zoom)!==null&&v!==void 0?v:w);this._normalizeCenter(he,y);let xe=y.zoomScale(ye-w),Ie=y.project(le),fe=y.project(he).sub(Ie),Pe=s.curve,Be=Math.max(y.width,y.height),Ke=Be/xe,dt=fe.mag();if("minZoom"in s){let Xt=i.ac(Math.min(s.minZoom,w,ye),y.minZoom,y.maxZoom),Or=Be/y.zoomScale(Xt-w);Pe=Math.sqrt(Or/dt*2)}let It=Pe*Pe;function Vt(Xt){let Or=(Ke*Ke-Be*Be+(Xt?-1:1)*It*It*dt*dt)/(2*(Xt?Ke:Be)*It*dt);return Math.log(Math.sqrt(Or*Or+1)-Or)}function tr(Xt){return(Math.exp(Xt)-Math.exp(-Xt))/2}function jt(Xt){return(Math.exp(Xt)+Math.exp(-Xt))/2}let Rt=Vt(!1),fr=function(Xt){return jt(Rt)/jt(Rt+Pe*Xt)},Pr=function(Xt){return Be*((jt(Rt)*(tr(Or=Rt+Pe*Xt)/jt(Or))-tr(Rt))/It)/dt;var Or},zt=(Vt(!0)-Rt)/Pe;if(Math.abs(dt)<1e-6||!isFinite(zt)){if(Math.abs(Be-Ke)<1e-6)return this.easeTo(s,d);let Xt=Ke<Be?-1:1;zt=Math.abs(Math.log(Ke/Be))/Pe,Pr=()=>0,fr=Or=>Math.exp(Xt*Pe*Or)}return s.duration="duration"in s?+s.duration:1e3*zt/("screenSpeed"in s?+s.screenSpeed/Pe:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=D!==F,this._pitching=V!==O,this._padding=!y.isPaddingEqual(G),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(he),this._ease(Xt=>{let Or=Xt*zt,Ao=1/fr(Or);y.zoom=Xt===1?ye:w+y.scaleZoom(Ao),this._rotating&&(y.bearing=i.y.number(D,F,Xt)),this._pitching&&(y.pitch=i.y.number(O,V,Xt)),this._padding&&(y.interpolatePadding(R,G,Xt),ie=y.centerPoint.add(Q)),this.terrain&&!s.freezeElevation&&this._updateElevation(Xt);let Yr=Xt===1?he:y.unproject(Ie.add(fe.mult(Pr(Or))).mult(Ao));y.setLocationAtPoint(y.renderWorldCopies?Yr.wrap():Yr,ie),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,d)}return s||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(s,d,v){v.animate===!1||v.duration===0?(s(1),d()):(this._easeStart=h.now(),this._easeOptions=v,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=i.b3(s,-180,180);let v=Math.abs(s-d);return Math.abs(s-360-d)<v&&(s-=360),Math.abs(s+360-d)<v&&(s+=360),s}_normalizeCenter(s,d){if(!d.renderWorldCopies||d.lngRange)return;let v=s.lng-d.center.lng;s.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(i.N.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}let Um={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Bm{constructor(s=Um){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){let v=this._map._getUIString(`AttributionControl.${d}`);s.title=v,s.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}let d=this._map.style.sourceCaches;for(let y in d){let w=d[y];if(w.used||w.usedForTerrain){let D=w.getSource();D.attribution&&s.indexOf(D.attribution)<0&&s.push(D.attribution)}}s=s.filter(y=>String(y).trim()),s.sort((y,w)=>y.length-w.length),s=s.filter((y,w)=>{for(let D=w+1;D<s.length;D++)if(s[D].indexOf(y)>=0)return!1;return!0});let v=s.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,s.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class NS{constructor(s={}){this._updateCompact=()=>{let d=this._container.children;if(d.length){let v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");let d=g.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class xn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){let d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(let y of v)if(y.id===s)return void(y.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let d=this._currentlyRunning=this._queue;this._queue=[];for(let v of d)if(!v.cancelled&&(v.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var OS=i.Y([{name:"a_pos3d",type:"Int16",components:3}]);class _F extends i.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*jy(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];let v={};for(let y of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))v[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),i.aP(y.posMatrix,0,i.X,0,i.X,0,1),this._tiles[y.key]=new da(y,this.tileSize));for(let y in this._tiles)v[y]||delete this._tiles[y]}freeRtt(s){for(let d in this._tiles){let v=this._tiles[d];(!s||v.tileID.equals(s)||v.tileID.isChildOf(s)||s.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){let d={};for(let v of this._renderableTilesKeys){let y=this._tiles[v].tileID;if(y.canonical.equals(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16),i.aP(w.posMatrix,0,i.X,0,i.X,0,1),d[v]=w}else if(y.canonical.isChildOf(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let D=y.canonical.z-s.canonical.z,O=y.canonical.x-(y.canonical.x>>D<<D),R=y.canonical.y-(y.canonical.y>>D<<D),F=i.X>>D;i.aP(w.posMatrix,0,F,0,F,0,1),i.J(w.posMatrix,w.posMatrix,[-O*F,-R*F,0]),d[v]=w}else if(s.canonical.isChildOf(y.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let D=s.canonical.z-y.canonical.z,O=s.canonical.x-(s.canonical.x>>D<<D),R=s.canonical.y-(s.canonical.y>>D<<D),F=i.X>>D;i.aP(w.posMatrix,0,i.X,0,i.X,0,1),i.J(w.posMatrix,w.posMatrix,[O*F,R*F,0]),i.K(w.posMatrix,w.posMatrix,[1/jy(2,D),1/jy(2,D),0]),d[v]=w}}return d}getSourceTile(s,d){let v=this.sourceCache._source,y=s.overscaledZ-this.deltaZoom;if(y>v.maxzoom&&(y=v.maxzoom),y<v.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(y).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!w||!w.dem)&&d)for(;y>=v.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(s.scaledTo(y--).key);return w}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=s)}}class LS{constructor(s,d,v){this.painter=s,this.sourceCache=new _F(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,v,y=i.X){var w;if(!(d>=0&&d<y&&v>=0&&v<y))return 0;let D=this.getTerrainData(s),O=(w=D.tile)===null||w===void 0?void 0:w.dem;if(!O)return 0;let R=function(le,he,ye){var xe=he[0],Ie=he[1];return le[0]=ye[0]*xe+ye[4]*Ie+ye[12],le[1]=ye[1]*xe+ye[5]*Ie+ye[13],le}([],[d/y*i.X,v/y*i.X],D.u_terrain_matrix),F=[R[0]*O.dim,R[1]*O.dim],V=Math.floor(F[0]),G=Math.floor(F[1]),Q=F[0]-V,ie=F[1]-G;return O.get(V,G)*(1-Q)*(1-ie)+O.get(V+1,G)*Q*(1-ie)+O.get(V,G+1)*(1-Q)*ie+O.get(V+1,G+1)*Q*ie}getElevationForLngLatZoom(s,d){if(!i.bb(d,s.wrap()))return 0;let{tileID:v,mercatorX:y,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(v,y%i.X,w%i.X,i.X)}getElevation(s,d,v,y=i.X){return this.getDEMElevation(s,d,v,y)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let y=this.painter.context,w=new i.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ue(y,w,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ue(y,new i.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=i.an([])}let d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){let y=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new ue(y,d.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),d.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}let v=d&&d+d.tileID.key+s.key;if(v&&!this._demMatrixCache[v]){let y=this.sourceCache.sourceCache._source.maxzoom,w=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=y?w=s.canonical.z-y:i.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let D=s.canonical.x-(s.canonical.x>>w<<w),O=s.canonical.y-(s.canonical.y>>w<<w),R=i.bc(new Float64Array(16),[1/(i.X<<w),1/(i.X<<w),0]);i.J(R,R,[D*i.X,O*i.X,0]),this._demMatrixCache[s.key]={matrix:R,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){let d=this.painter,v=d.width/devicePixelRatio,y=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ue(d.context,{width:v,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ue(d.context,{width:v,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,y,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,y))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,D=0;w<this._coordsTextureSize;w++)for(let O=0;O<this._coordsTextureSize;O++,D+=4)d[D+0]=255&O,d[D+1]=255&w,d[D+2]=O>>8<<4|w>>8,d[D+3]=0;let v=new i.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),y=new ue(s,v,s.gl.RGBA,{premultiply:!1});return y.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let d=new Uint8Array(4),v=this.painter.context,y=v.gl,w=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),D=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(w,O-D-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);let R=d[0]+(d[2]>>4<<8),F=d[1]+((15&d[2])<<8),V=this.coordsIndex[255-d[3]],G=V&&this.sourceCache.getTileByID(V);if(!G)return null;let Q=this._coordsTextureSize,ie=(1<<G.tileID.canonical.z)*Q;return new i.Z((G.tileID.canonical.x*Q+R)/ie+G.tileID.wrap,(G.tileID.canonical.y*Q+F)/ie,this.getElevation(G.tileID,R,F,Q))}depthAtPoint(s){let d=new Uint8Array(4),v=this.painter.context,y=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let s=this.painter.context,d=new i.bd,v=new i.aY,y=this.meshSize,w=i.X/y,D=y*y;for(let G=0;G<=y;G++)for(let Q=0;Q<=y;Q++)d.emplaceBack(Q*w,G*w,0);for(let G=0;G<D;G+=y+1)for(let Q=0;Q<y;Q++)v.emplaceBack(Q+G,y+Q+G+1,y+Q+G+2),v.emplaceBack(Q+G,y+Q+G+2,Q+G+1);let O=d.length,R=O+2*(y+1);for(let G of[0,1])for(let Q=0;Q<=y;Q++)for(let ie of[0,1])d.emplaceBack(Q*w,G*i.X,ie);for(let G=0;G<2*y;G+=2)v.emplaceBack(R+G,R+G+1,R+G+3),v.emplaceBack(R+G,R+G+3,R+G+2),v.emplaceBack(O+G,O+G+3,O+G+1),v.emplaceBack(O+G,O+G+2,O+G+3);let F=d.length,V=F+2*(y+1);for(let G of[0,1])for(let Q=0;Q<=y;Q++)for(let ie of[0,1])d.emplaceBack(G*i.X,Q*w,ie);for(let G=0;G<2*y;G+=2)v.emplaceBack(F+G,F+G+1,F+G+3),v.emplaceBack(F+G,F+G+3,F+G+2),v.emplaceBack(V+G,V+G+3,V+G+1),v.emplaceBack(V+G,V+G+2,V+G+3);return this._mesh=new c_(s.createVertexBuffer(d,OS.members),s.createIndexBuffer(v),i.a0.simpleSegment(0,0,d.length,v.length)),this._mesh}getMeshFrameDelta(s){return 2*Math.PI*i.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,d){var v;let{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(s,d);return(v=this.getMinMaxElevation(y).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(s){let d=this.getTerrainData(s).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(s,d){let v=i.Z.fromLngLat(s.wrap()),y=(1<<d)*i.X,w=v.x*y,D=v.y*y,O=Math.floor(w/i.X),R=Math.floor(D/i.X);return{tileID:new i.S(d,0,d,O,R),mercatorX:w,mercatorY:D}}}class xF{constructor(s,d,v){this._context=s,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new ue(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:s,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let Vm={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class h4{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new xF(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(v=>!s._layers[v].isHidden(d)),this._coordsDescendingInv={};for(let v in s.sourceCaches){this._coordsDescendingInv[v]={};let y=s.sourceCaches[v].getVisibleCoordinates();for(let w of y){let D=this.terrain.sourceCache.getTerrainCoords(w);for(let O in D)this._coordsDescendingInv[v][O]||(this._coordsDescendingInv[v][O]=[]),this._coordsDescendingInv[v][O].push(D[O])}}this._coordsDescendingInvStr={};for(let v of s._order){let y=s._layers[v],w=y.source;if(Vm[y.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(let D in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][D]=this._coordsDescendingInv[w][D].map(O=>O.key).sort().join()}}for(let v of this._renderableTiles)for(let y in this._coordsDescendingInvStr){let w=this._coordsDescendingInvStr[y][v.tileID.key];w&&w!==v.rttCoords[y]&&(v.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;let d=s.type,v=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Vm[d]&&(this._prevType&&Vm[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(s.id),!y))return!0;if(Vm[this._prevType]||Vm[d]&&y){this._prevType=d;let w=this._stacks.length-1,D=this._stacks[w]||[];for(let O of this._renderableTiles){if(this.pool.isFull()&&(a4(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[w]){let F=this.pool.getObjectForId(O.rtt[w].id);if(F.stamp===O.rtt[w].stamp){this.pool.useObject(F);continue}}let R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),O.rtt[w]={id:R.id,stamp:R.stamp},v.context.bindFramebuffer.set(R.fbo.framebuffer),v.context.clear({color:i.aM.transparent,stencil:0}),v.currentStencilSource=void 0;for(let F=0;F<D.length;F++){let V=v.style._layers[D[F]],G=V.source?this._coordsDescendingInv[V.source][O.tileID.key]:[O.tileID];v.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),v._renderTileClippingMasks(V,G),v.renderLayer(v,v.style.sourceCaches[V.source],V,G),V.source&&(O.rttCoords[V.source]=this._coordsDescendingInvStr[V.source][O.tileID.key])}}return a4(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Vm[d]}return!1}}let PS={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},m4=a,bF={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Um,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:i.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},kS=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},wF={showCompass:!0,showZoom:!0,visualizePitch:!1};class EF{constructor(s,d,v=!1){this.mousedown=D=>{this.startMouse(i.e({},D,{ctrlKey:!0,preventDefault:()=>D.preventDefault()}),g.mousePos(this.element,D)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=D=>{this.moveMouse(D,g.mousePos(this.element,D))},this.mouseup=D=>{this.mouseRotate.dragEnd(D),this.mousePitch&&this.mousePitch.dragEnd(D),this.offTemp()},this.touchstart=D=>{D.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,D.targetTouches)[0],this.startTouch(D,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))},this.touchmove=D=>{D.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,D.targetTouches)[0],this.moveTouch(D,this._lastPos))},this.touchend=D=>{D.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let y=s.dragRotate._mouseRotate.getClickTolerance(),w=s.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=wS({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:D,clickTolerance:O,bearingDegreesPerPixelMoved:R=.8})=>{let F=new bS;return new xf({clickTolerance:O,move:(V,G)=>({bearingDelta:(G.x-V.x)*R}),moveStateManager:F,enable:D,assignEvents:kS})})({clickTolerance:y,enable:!0}),this.map=s,v&&(this.mousePitch=ES({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:D,clickTolerance:O,pitchDegreesPerPixelMoved:R=-.5})=>{let F=new bS;return new xf({clickTolerance:O,move:(V,G)=>({pitchDelta:(G.y-V.y)*R}),moveStateManager:F,enable:D,assignEvents:kS})})({clickTolerance:w,enable:!0})),g.addEventListener(d,"mousedown",this.mousedown),g.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(d,"touchcancel",this.reset)}startMouse(s,d){this.mouseRotate.dragStart(s,d),this.mousePitch&&this.mousePitch.dragStart(s,d),g.disableDrag()}startTouch(s,d){this.touchRotate.dragStart(s,d),this.touchPitch&&this.touchPitch.dragStart(s,d),g.disableDrag()}moveMouse(s,d){let v=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(s,d)||{};if(y&&v.setBearing(v.getBearing()+y),this.mousePitch){let{pitchDelta:w}=this.mousePitch.dragMove(s,d)||{};w&&v.setPitch(v.getPitch()+w)}}moveTouch(s,d){let v=this.map,{bearingDelta:y}=this.touchRotate.dragMove(s,d)||{};if(y&&v.setBearing(v.getBearing()+y),this.touchPitch){let{pitchDelta:w}=this.touchPitch.dragMove(s,d)||{};w&&v.setPitch(v.getPitch()+w)}}off(){let s=this.element;g.removeEventListener(s,"mousedown",this.mousedown),g.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}}let ml;function Co(E,s,d){let v=new i.N(E.lng,E.lat);if(E=new i.N(E.lng,E.lat),s){let y=new i.N(E.lng-360,E.lat),w=new i.N(E.lng+360,E.lat),D=d.locationPoint(E).distSqr(s);d.locationPoint(y).distSqr(s)<D?E=y:d.locationPoint(w).distSqr(s)<D&&(E=w)}for(;Math.abs(E.lng-d.center.lng)>180;){let y=d.locationPoint(E);if(y.x>=0&&y.y>=0&&y.x<=d.width&&y.y<=d.height)break;E.lng>d.center.lng?E.lng-=360:E.lng+=360}return E.lng!==v.lng&&d.locationPoint(E).y>d.height/2-d.getHorizon()?E:v}let Gm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function b_(E,s,d){let v=E.classList;for(let y in Gm)v.remove(`maplibregl-${d}-anchor-${y}`);v.add(`maplibregl-${d}-anchor-${s}`)}class w_ extends i.E{constructor(s){if(super(),this._onKeyPress=d=>{let v=d.code,y=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=d=>{let v=d.originalEvent.target,y=this._element;this._popup&&(v===y||y.contains(v))&&this.togglePopup()},this._update=d=>{var v;if(!this._map)return;let y=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Co(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${Gm[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${w}`),h.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){let v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.k("dragstart"))),this.fire(new i.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=i.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div");let d=g.createNS("http://www.w3.org/2000/svg","svg"),v=41,y=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${y}px`),d.setAttributeNS(null,"viewBox",`0 0 ${y} ${v}`);let w=g.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");let D=g.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill-rule","nonzero");let O=g.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");let R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let xe of R){let Ie=g.createNS("http://www.w3.org/2000/svg","ellipse");Ie.setAttributeNS(null,"opacity","0.04"),Ie.setAttributeNS(null,"cx","10.5"),Ie.setAttributeNS(null,"cy","5.80029008"),Ie.setAttributeNS(null,"rx",xe.rx),Ie.setAttributeNS(null,"ry",xe.ry),O.appendChild(Ie)}let F=g.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);let V=g.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(V);let G=g.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");let Q=g.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(Q);let ie=g.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");let le=g.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");let he=g.createNS("http://www.w3.org/2000/svg","circle");he.setAttributeNS(null,"fill","#000000"),he.setAttributeNS(null,"opacity","0.25"),he.setAttributeNS(null,"cx","5.5"),he.setAttributeNS(null,"cy","5.5"),he.setAttributeNS(null,"r","5.4999962");let ye=g.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),le.appendChild(he),le.appendChild(ye),D.appendChild(O),D.appendChild(F),D.appendChild(G),D.appendChild(ie),D.appendChild(le),d.appendChild(D),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(d),this._offset=i.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),b_(this._element,this._anchor,"marker"),s&&s.className)for(let d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=i.N.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let y=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var d,v;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let y=this._map,w=y.terrain.depthAtPoint(this._pos),D=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,D)-w<.006)return void(this._element.style.opacity=this._opacity);let O=-this._offset.y/y.transform._pixelPerMeter,R=Math.sin(y.getPitch()*Math.PI/180)*O,F=y.terrain.depthAtPoint(new i.P(this._pos.x,this._pos.y-this._offset.y)),V=y.transform.lngLatToCameraDepth(this._lngLat,D+R)-F>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&V&&this._popup.remove(),this._element.style.opacity=V?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=i.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,d){return s===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}let g4={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ty=0,My=!1,cc={maxWidth:100,unit:"metric"};function Cy(E,s,d){let v=d&&d.maxWidth||100,y=E._container.clientHeight/2,w=E.unproject([0,y]),D=E.unproject([v,y]),O=w.distanceTo(D);if(d&&d.unit==="imperial"){let R=3.2808*O;R>5280?cr(s,v,R/5280,E._getUIString("ScaleControl.Miles")):cr(s,v,R,E._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?cr(s,v,O/1852,E._getUIString("ScaleControl.NauticalMiles")):O>=1e3?cr(s,v,O/1e3,E._getUIString("ScaleControl.Kilometers")):cr(s,v,O,E._getUIString("ScaleControl.Meters"))}function cr(E,s,d,v){let y=function(w){let D=Math.pow(10,`${Math.floor(w)}`.length-1),O=w/D;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(R){let F=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*F)/F}(O),D*O}(d);E.style.width=s*(y/d)+"px",E.innerHTML=`${y}&nbsp;${v}`}let Cr={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},E_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function S_(E){if(E){if(typeof E=="number"){let s=Math.round(Math.abs(E)/Math.SQRT2);return{center:new i.P(0,0),top:new i.P(0,E),"top-left":new i.P(s,s),"top-right":new i.P(-s,s),bottom:new i.P(0,-E),"bottom-left":new i.P(s,-s),"bottom-right":new i.P(-s,-s),left:new i.P(E,0),right:new i.P(-E,0)}}if(E instanceof i.P||Array.isArray(E)){let s=i.P.convert(E);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:i.P.convert(E.center||[0,0]),top:i.P.convert(E.top||[0,0]),"top-left":i.P.convert(E["top-left"]||[0,0]),"top-right":i.P.convert(E["top-right"]||[0,0]),bottom:i.P.convert(E.bottom||[0,0]),"bottom-left":i.P.convert(E["bottom-left"]||[0,0]),"bottom-right":i.P.convert(E["bottom-right"]||[0,0]),left:i.P.convert(E.left||[0,0]),right:i.P.convert(E.right||[0,0])}}return S_(new i.P(0,0))}let RS=a;o.AJAXError=i.bh,o.Evented=i.E,o.LngLat=i.N,o.MercatorCoordinate=i.Z,o.Point=i.P,o.addProtocol=i.bi,o.config=i.a,o.removeProtocol=i.bj,o.AttributionControl=Bm,o.BoxZoomHandler=hl,o.CanvasSource=mt,o.CooperativeGesturesHandler=Fm,o.DoubleClickZoomHandler=Qd,o.DragPanHandler=f4,o.DragRotateHandler=p4,o.EdgeInsets=Rm,o.FullscreenControl=class extends i.E{constructor(E={}){super(),this._onFullscreenChange=()=>{var s;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=d==null?void 0:d.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:i.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let E=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new i.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new i.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=qe,o.GeolocateControl=class extends i.E{constructor(E){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new i.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new i.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{let d=new i.N(s.coords.longitude,s.coords.latitude),v=s.coords.accuracy,y=this._map.getBearing(),w=i.e({bearing:y},this.options.fitBoundsOptions),D=Ae.fromLngLat(d,v);this._map.fitBounds(D,w,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let d=new i.N(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&My)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new i.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{let d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new w_({element:this._dotElement}),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new w_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new i.k("trackuserlocationend")),this.fire(new i.k("userlocationlostfocus")))})}},this.options=i.e({},g4,E)}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return i._(this,arguments,void 0,function*(s=!1){if(ml!==void 0&&!s)return ml;if(window.navigator.permissions===void 0)return ml=!!window.navigator.geolocation,ml;try{ml=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(d){ml=!!window.navigator.geolocation}return ml})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ty=0,My=!1}_isOutOfMapMaxBounds(E){let s=this._map.getMaxBounds(),d=E.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let E=this._map.getBounds(),s=E.getSouthEast(),d=E.getNorthEast(),v=s.distanceTo(d),y=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ty--,My=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new i.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.k("trackuserlocationstart")),this.fire(new i.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ty++,Ty>1?(E={maximumAge:6e5,timeout:0},My=!0):(E=this.options.positionOptions,My=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=p_,o.ImageSource=ht,o.KeyboardHandler=Ul,o.LngLatBounds=Ae,o.LogoControl=NS,o.Map=class extends d4{constructor(E){i.bf.mark(i.bg.create);let s=Object.assign(Object.assign({},bF),E);if(s.minZoom!=null&&s.maxZoom!=null&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(s.minPitch!=null&&s.maxPitch!=null&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(s.minPitch!=null&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(s.maxPitch!=null&&s.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new jm(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies),{bearingSnap:s.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new xn,this._controls=[],this._mapId=i.a4(),this._contextLost=d=>{d.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new i.k("webglcontextlost",{originalEvent:d}))},this._contextRestored=d=>{this._setupPainter(),this.resize(),this._update(),this.fire(new i.k("webglcontextrestored",{originalEvent:d}))},this._onMapScroll=d=>{if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._maxTileCacheZoomLevels=s.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=s.preserveDrawingBuffer===!0,this._antialias=s.antialias===!0,this._trackResize=s.trackResize===!0,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles===!0,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions===!0,this._collectResourceTiming=s.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},PS),s.locale),this._clickTolerance=s.clickTolerance,this._overridePixelRatio=s.pixelRatio,this._maxCanvasSize=s.maxCanvasSize,this.transformCameraUpdate=s.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=s.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=k.addThrottleControl(()=>this.isMoving()),this._requestManager=new q(s.transformRequest),typeof s.container=="string"){if(this._container=document.getElementById(s.container),!this._container)throw new Error(`Container '${s.container}' not found.`)}else{if(!(s.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let d=!1,v=by(y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())},50);this._resizeObserver=new ResizeObserver(y=>{d?v(y):d=!0}),this._resizeObserver.observe(this._container)}this.handlers=new DS(this,s),this._hash=s.hash&&new p_(typeof s.hash=="string"&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,i.e({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,this._validateStyle=s.validateStyle,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new Bm(typeof s.attributionControl=="boolean"?void 0:s.attributionControl)),s.maplibreLogo&&this.addControl(new NS,s.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new i.k(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new i.k(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new i.k("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(E,s){if(s===void 0&&(s=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new i.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let d=E.onAdd(this);this._controls.push(E);let v=this._controlPositions[s];return s.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new i.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(E);return s>-1&&this._controls.splice(s,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,s,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,s,d,v)}resize(E){var s;let d=this._containerDimensions(),v=d[0],y=d[1],w=this._getClampedPixelRatio(v,y);if(this._resizeCanvas(v,y,w),this.painter.resize(v,y,w),this.painter.overLimit()){let O=this.painter.context.gl;this._maxCanvasSize=[O.drawingBufferWidth,O.drawingBufferHeight];let R=this._getClampedPixelRatio(v,y);this._resizeCanvas(v,y,R),this.painter.resize(v,y,R)}this.transform.resize(v,y),(s=this._requestedCameraState)===null||s===void 0||s.resize(v,y);let D=!this._moving;return D&&(this.stop(),this.fire(new i.k("movestart",E)).fire(new i.k("move",E))),this.fire(new i.k("resize",E)),D&&this.fire(new i.k("moveend",E)),this}_getClampedPixelRatio(E,s){let{0:d,1:v}=this._maxCanvasSize,y=this.getPixelRatio(),w=E*y,D=s*y;return Math.min(w>d?d/w:1,D>v?v/D:1)*y}getPixelRatio(){var E;return(E=this._overridePixelRatio)!==null&&E!==void 0?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(Ae.convert(E)),this._update()}setMinZoom(E){if((E=E==null?-2:E)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E==null?22:E)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E==null?0:E)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E==null?60:E)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(i.N.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(i.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)===null||E===void 0?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)===null||E===void 0?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)===null||E===void 0?void 0:E.isRotating())}_createDelegatedListener(E,s,d){if(E==="mouseenter"||E==="mouseover"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:w=>{let D=s.filter(R=>this.getLayer(R)),O=D.length!==0?this.queryRenderedFeatures(w.point,{layers:D}):[];O.length?v||(v=!0,d.call(this,new Ma(E,this,w.originalEvent,{features:O}))):v=!1},mouseout:()=>{v=!1}}}}if(E==="mouseleave"||E==="mouseout"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:D=>{let O=s.filter(R=>this.getLayer(R));(O.length!==0?this.queryRenderedFeatures(D.point,{layers:O}):[]).length?v=!0:v&&(v=!1,d.call(this,new Ma(E,this,D.originalEvent)))},mouseout:D=>{v&&(v=!1,d.call(this,new Ma(E,this,D.originalEvent)))}}}}{let v=y=>{let w=s.filter(O=>this.getLayer(O)),D=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];D.length&&(y.features=D,d.call(this,y),delete y.features)};return{layers:s,listener:d,delegates:{[E]:v}}}}_saveDelegatedListener(E,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(s)}_removeDelegatedListener(E,s,d){if(!this._delegatedListeners||!this._delegatedListeners[E])return;let v=this._delegatedListeners[E];for(let y=0;y<v.length;y++){let w=v[y];if(w.listener===d&&w.layers.length===s.length&&w.layers.every(D=>s.includes(D))){for(let D in w.delegates)this.off(D,w.delegates[D]);return void v.splice(y,1)}}}on(E,s,d){if(d===void 0)return super.on(E,s);let v=this._createDelegatedListener(E,typeof s=="string"?[s]:s,d);this._saveDelegatedListener(E,v);for(let y in v.delegates)this.on(y,v.delegates[y]);return this}once(E,s,d){if(d===void 0)return super.once(E,s);let v=typeof s=="string"?[s]:s,y=this._createDelegatedListener(E,v,d);for(let w in y.delegates){let D=y.delegates[w];y.delegates[w]=(...O)=>{this._removeDelegatedListener(E,v,d),D(...O)}}this._saveDelegatedListener(E,y);for(let w in y.delegates)this.once(w,y.delegates[w]);return this}off(E,s,d){return d===void 0?super.off(E,s):(this._removeDelegatedListener(E,typeof s=="string"?[s]:s,d),this)}queryRenderedFeatures(E,s){if(!this.style)return[];let d,v=E instanceof i.P||Array.isArray(E),y=v?E:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(v?{}:E)||{},y instanceof i.P||typeof y[0]=="number")d=[i.P.convert(y)];else{let w=i.P.convert(y[0]),D=i.P.convert(y[1]);d=[w,new i.P(D.x,w.y),D,new i.P(w.x,D.y),w]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(E,s){return this.style.querySourceFeatures(E,s)}setStyle(E,s){return(s=i.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(E,s))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){let s=this._locale[E];if(s==null)throw new Error(`Missing UI string '${E}'`);return s}_updateStyle(E,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(E,s));let d=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new Z1(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,s,d):this.style.loadJSON(E,s,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Z1(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,s){if(typeof E=="string"){let d=this._requestManager.transformRequest(E,"Style");i.h(d,new AbortController).then(v=>{this._updateDiff(v.data,s)}).catch(v=>{v&&this.fire(new i.j(v))})}else typeof E=="object"&&this._updateDiff(E,s)}_updateDiff(E,s){try{this.style.setState(E,s)&&this._update(!0)}catch(d){i.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(E,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():i.w("There is no style added to the map.")}addSource(E,s){return this._lazyInitEmptyStyle(),this.style.addSource(E,s),this._update(!0)}isSourceLoaded(E){let s=this.style&&this.style.sourceCaches[E];if(s!==void 0)return s.loaded();this.fire(new i.j(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){let s=this.style.sourceCaches[E.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);this.terrain===null&&s.reload();for(let d in this.style._layers){let v=this.style._layers[d];v.type==="hillshade"&&v.source===E.source&&i.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new LS(this.painter,s,E),this.painter.renderToTexture=new h4(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==E.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new i.k("terrain",{terrain:E})),this}getTerrain(){var E,s;return(s=(E=this.terrain)===null||E===void 0?void 0:E.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let E=this.style&&this.style.sourceCaches;for(let s in E){let d=E[s]._tiles;for(let v in d){let y=d[v];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,s,d={}){let{pixelRatio:v=1,sdf:y=!1,stretchX:w,stretchY:D,content:O,textFitWidth:R,textFitHeight:F}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||i.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new i.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:V,height:G,data:Q}=s,ie=s;return this.style.addImage(E,{data:new i.R({width:V,height:G},new Uint8Array(Q)),pixelRatio:v,stretchX:w,stretchY:D,content:O,textFitWidth:R,textFitHeight:F,sdf:y,version:0,userImage:ie}),ie.onAdd&&ie.onAdd(this,E),this}}{let{width:V,height:G,data:Q}=h.getImageData(s);this.style.addImage(E,{data:new i.R({width:V,height:G},Q),pixelRatio:v,stretchX:w,stretchY:D,content:O,textFitWidth:R,textFitHeight:F,sdf:y,version:0})}}updateImage(E,s){let d=this.style.getImage(E);if(!d)return this.fire(new i.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let v=s instanceof HTMLImageElement||i.b(s)?h.getImageData(s):s,{width:y,height:w,data:D}=v;if(y===void 0||w===void 0)return this.fire(new i.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==d.data.width||w!==d.data.height)return this.fire(new i.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let O=!(s instanceof HTMLImageElement||i.b(s));return d.data.replace(D,O),this.style.updateImage(E,d),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new i.j(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E){return k.getImage(this._requestManager.transformRequest(E,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(E,s){return this._lazyInitEmptyStyle(),this.style.addLayer(E,s),this._update(!0)}moveLayer(E,s){return this.style.moveLayer(E,s),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,s,d){return this.style.setLayerZoomRange(E,s,d),this._update(!0)}setFilter(E,s,d={}){return this.style.setFilter(E,s,d),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,s,d,v={}){return this.style.setPaintProperty(E,s,d,v),this._update(!0)}getPaintProperty(E,s){return this.style.getPaintProperty(E,s)}setLayoutProperty(E,s,d,v={}){return this.style.setLayoutProperty(E,s,d,v),this._update(!0)}getLayoutProperty(E,s){return this.style.getLayoutProperty(E,s)}setGlyphs(E,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,s,d,v=>{v||this._update(!0)}),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,s,d=>{d||this._update(!0)}),this}setLight(E,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(E){return this._lazyInitEmptyStyle(),this.style.setSky(E),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(E,s){return this.style.setFeatureState(E,s),this._update()}removeFeatureState(E,s){return this.style.removeFeatureState(E,s),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,s=0;return this._container&&(E=this._container.clientWidth||400,s=this._container.clientHeight||300),[E,s]}_setupContainer(){let E=this._container;E.classList.add("maplibregl-map");let s=this._canvasContainer=g.create("div","maplibregl-canvas-container",E);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);let y=this._controlContainer=g.create("div","maplibregl-control-container",E),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(D=>{w[D]=g.create("div",`maplibregl-ctrl-${D} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(E,s,d){this._canvas.width=Math.floor(d*E),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},s=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{s={requestedAttributes:E},v&&(s.statusMessage=v.statusMessage,s.type=v.type)},{once:!0});let d=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!d){let v="Failed to initialize WebGL";throw s?(s.message=v,new Error(JSON.stringify(s))):new Error(v)}this.painter=new f_(d,this.transform),x.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){let s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let y=this.transform.zoom,w=h.now();this.style.zoomHistory.update(y,w);let D=new i.z(y,{now:w,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),O=D.crossFadingFactor();O===1&&O===this._crossFadingFactor||(d=!0,this._crossFadingFactor=O),this.style.update(D)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new i.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,i.bf.mark(i.bg.load),this.fire(new i.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,i.bf.mark(i.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(let d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),k.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)===null||E===void 0||E.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),i.bf.clearMetrics(),this._removed=!0,this.fire(new i.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,h.frameAsync(this._frameRequest).then(E=>{i.bf.frame(E),this._frameRequest=null,this._render(E)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return m4}getCameraTargetElevation(){return this.transform.elevation}},o.MapMouseEvent=Ma,o.MapTouchEvent=Xd,o.MapWheelEvent=l4,o.Marker=w_,o.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{let s=this._map.getZoom(),d=s===this._map.getMaxZoom(),v=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{let s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,d)=>{let v=this._map._getUIString(`NavigationControl.${d}`);s.title=v,s.setAttribute("aria-label",v)},this.options=i.e({},wF,E),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new EF(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,s){let d=g.create("button",E,this._container);return d.type="button",d.addEventListener("click",s),d}},o.Popup=class extends i.E{constructor(E){super(),this.remove=()=>(this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new i.k("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let O of this.options.className.split(" "))this._container.classList.add(O);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Co(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!s)return;let v=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor,w=S_(this.options.offset);if(!y){let O=this._container.offsetWidth,R=this._container.offsetHeight,F;F=v.y+w.bottom.y<R?["top"]:v.y>this._map.transform.height-R?["bottom"]:[],v.x<O/2?F.push("left"):v.x>this._map.transform.width-O/2&&F.push("right"),y=F.length===0?"bottom":F.join("-")}let D=v.add(w[y]);this.options.subpixelPositioning||(D=D.round()),g.setTransform(this._container,`${Gm[y]} translate(${D.x}px,${D.y}px)`),b_(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=i.e(Object.create(Cr),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new i.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=i.N.convert(E),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){let s=document.createDocumentFragment(),d=document.createElement("body"),v;for(d.innerHTML=E;v=d.firstChild,v;)s.appendChild(v);return this.setDOMContent(s)}getMaxWidth(){var E;return(E=this._container)===null||E===void 0?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){return this._container&&this._container.classList.add(E),this}removeClassName(E){return this._container&&this._container.classList.remove(E),this}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}setSubpixelPositioning(E){this.options.subpixelPositioning=E}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let E=this._container.querySelector(E_);E&&E.focus()}},o.RasterDEMTileSource=ce,o.RasterTileSource=Ct,o.ScaleControl=class{constructor(E){this._onMove=()=>{Cy(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,Cy(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},cc),E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=Pu,o.Style=Z1,o.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=E}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=zm,o.TwoFingersTouchRotateHandler=MS,o.TwoFingersTouchZoomHandler=IS,o.TwoFingersTouchZoomRotateHandler=AS,o.VectorTileSource=Wt,o.VideoSource=yt,o.addSourceType=(E,s)=>i._(void 0,void 0,void 0,function*(){if(Yt(E))throw new Error(`A source type called "${E}" already exists.`);((d,v)=>{_t[d]=v})(E,s)}),o.clearPrewarmedResources=function(){let E=je;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(Ye),je=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return i.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return pa().getRTLTextPluginStatus()},o.getVersion=function(){return RS},o.getWorkerCount=function(){return tt.workerCount},o.getWorkerUrl=function(){return i.a.WORKER_URL},o.importScriptInWorkers=function(E){return at().broadcast("IS",E)},o.prewarm=function(){We().acquire(Ye)},o.setMaxParallelImageRequests=function(E){i.a.MAX_PARALLEL_IMAGE_REQUESTS=E},o.setRTLTextPlugin=function(E,s){return pa().setRTLTextPlugin(E,s)},o.setWorkerCount=function(E){tt.workerCount=E},o.setWorkerUrl=function(E){i.a.WORKER_URL=E}});var n=e;return n})});var YFe=M((Yin,$Fe)=>{var _Q=1/0,ggr=17976931348623157e292,zFe=NaN,vgr="[object Symbol]",ygr=/^\s+|\s+$/g,_gr=/^[-+]0x[0-9a-f]+$/i,xgr=/^0b[01]+$/i,bgr=/^0o[0-7]+$/i,wgr=parseInt,Egr=typeof global=="object"&&global&&global.Object===Object&&global,Sgr=typeof self=="object"&&self&&self.Object===Object&&self,Igr=Egr||Sgr||Function("return this")(),Tgr=Object.prototype,Mgr=Tgr.toString,FFe=Igr.Symbol,Cgr=Math.min,UFe=FFe?FFe.prototype:void 0,BFe=UFe?UFe.toString:void 0;function Agr(e){if(typeof e=="string")return e;if(HFe(e))return BFe?BFe.call(e):"";var t=e+"";return t=="0"&&1/e==-_Q?"-0":t}function Dgr(e){var t=Math[e];return function(r,n){if(r=WFe(r),n=Cgr(Lgr(n),292),n){var o=(GFe(r)+"e").split("e"),i=t(o[0]+"e"+(+o[1]+n));return o=(GFe(i)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(r)}}function VFe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ngr(e){return!!e&&typeof e=="object"}function HFe(e){return typeof e=="symbol"||Ngr(e)&&Mgr.call(e)==vgr}function Ogr(e){if(!e)return e===0?e:0;if(e=WFe(e),e===_Q||e===-_Q){var t=e<0?-1:1;return t*ggr}return e===e?e:0}function Lgr(e){var t=Ogr(e),r=t%1;return t===t?r?t-r:t:0}function WFe(e){if(typeof e=="number")return e;if(HFe(e))return zFe;if(VFe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=VFe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ygr,"");var r=xgr.test(e);return r||bgr.test(e)?wgr(e.slice(2),r?2:8):_gr.test(e)?zFe:+e}function GFe(e){return e==null?"":Agr(e)}var Pgr=Dgr("round");$Fe.exports=Pgr});var _9e=M((Van,y9e)=>{"use strict";y9e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var S9e=M((Gan,E9e)=>{"use strict";var w9e="%[a-f0-9]{2}",x9e=new RegExp("("+w9e+")|([^%]+?)","gi"),b9e=new RegExp("("+w9e+")+","gi");function EQ(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],EQ(r),EQ(n))}function zgr(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(x9e)||[],r=1;r<t.length;r++)e=EQ(t,r).join(""),t=e.match(x9e)||[];return e}}function Fgr(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=b9e.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(u){var n=zgr(r[0]);n!==r[0]&&(t[r[0]]=n)}r=b9e.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}E9e.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return Fgr(e)}}});var T9e=M((Han,I9e)=>{"use strict";I9e.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var C9e=M((Wan,M9e)=>{"use strict";M9e.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],u=e[a];(o?t.indexOf(a)!==-1:t(a,u,e))&&(r[a]=u)}return r}});var IQ=M(pu=>{"use strict";var Ugr=_9e(),Bgr=S9e(),D9e=T9e(),Vgr=C9e(),Ggr=e=>e==null,SQ=Symbol("encodeFragmentIdentifier");function Hgr(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Gi(t,e),"[",o,"]"].join("")]:[...r,[Gi(t,e),"[",Gi(o,e),"]=",Gi(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Gi(t,e),"[]"].join("")]:[...r,[Gi(t,e),"[]=",Gi(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Gi(t,e),":list="].join("")]:[...r,[Gi(t,e),":list=",Gi(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[Gi(r,e),t,Gi(o,e)].join("")]:[[n,Gi(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,Gi(t,e)]:[...r,[Gi(t,e),"=",Gi(n,e)].join("")];}}function Wgr(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&kh(n,e).includes(e.arrayFormatSeparator);n=a?kh(n,e):n;let u=i||a?n.split(e.arrayFormatSeparator).map(p=>kh(p,e)):n===null?n:kh(n,e);o[r]=u};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&kh(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(u=>kh(u,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)};}}function N9e(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Gi(e,t){return t.encode?t.strict?Ugr(e):encodeURIComponent(e):e}function kh(e,t){return t.decode?Bgr(e):e}function O9e(e){return Array.isArray(e)?e.sort():typeof e=="object"?O9e(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function L9e(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function $gr(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function P9e(e){e=L9e(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function A9e(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function k9e(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),N9e(t.arrayFormatSeparator);let r=Wgr(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=D9e(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:kh(a,t),r(kh(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=A9e(i[a],t);else n[o]=A9e(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=O9e(a):o[i]=a,o},Object.create(null))}pu.extract=P9e;pu.parse=k9e;pu.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),N9e(t.arrayFormatSeparator);let r=a=>t.skipNull&&Ggr(e[a])||t.skipEmptyString&&e[a]==="",n=Hgr(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let u=e[a];return u===void 0?"":u===null?Gi(a,t):Array.isArray(u)?u.length===0&&t.arrayFormat==="bracket-separator"?Gi(a,t)+"[]":u.reduce(n(a),[]).join("&"):Gi(a,t)+"="+Gi(u,t)}).filter(a=>a.length>0).join("&")};pu.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=D9e(e,"#");return Object.assign({url:r.split("?")[0]||"",query:k9e(P9e(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:kh(n,t)}:{})};pu.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[SQ]:!0},t);let r=L9e(e.url).split("?")[0]||"",n=pu.extract(e.url),o=pu.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=pu.stringify(i,t);a&&(a=`?${a}`);let u=$gr(e.url);return e.fragmentIdentifier&&(u=`#${t[SQ]?Gi(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${u}`};pu.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[SQ]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=pu.parseUrl(e,r);return pu.stringifyUrl({url:n,query:Vgr(o,t),fragmentIdentifier:i},r)};pu.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return pu.pick(e,n,r)}});var sC=M((rmn,X7e)=>{var Eyr=X7e.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=Eyr)});var wv=M((nmn,J7e)=>{var Syr=J7e.exports={version:"2.6.12"};typeof __e=="number"&&(__e=Syr)});var eUe=M((omn,Q7e)=>{Q7e.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var WQ=M((imn,tUe)=>{var Iyr=eUe();tUe.exports=function(e,t,r){if(Iyr(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)};}return function(){return e.apply(t,arguments)}}});var lC=M((amn,rUe)=>{rUe.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var uC=M((smn,nUe)=>{var Tyr=lC();nUe.exports=function(e){if(!Tyr(e))throw TypeError(e+" is not an object!");return e}});var xR=M((lmn,oUe)=>{oUe.exports=function(e){try{return!!e()}catch(t){return!0}}});var Ev=M((umn,iUe)=>{iUe.exports=!xR()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var YQ=M((cmn,sUe)=>{var aUe=lC(),$Q=sC().document,Myr=aUe($Q)&&aUe($Q.createElement);sUe.exports=function(e){return Myr?$Q.createElement(e):{}}});var ZQ=M((fmn,lUe)=>{lUe.exports=!Ev()&&!xR()(function(){return Object.defineProperty(YQ()("div"),"a",{get:function(){return 7}}).a!=7})});var KQ=M((pmn,uUe)=>{var bR=lC();uUe.exports=function(e,t){if(!bR(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!bR(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!bR(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!bR(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var XQ=M(fUe=>{var cUe=uC(),Cyr=ZQ(),Ayr=KQ(),Dyr=Object.defineProperty;fUe.f=Ev()?Object.defineProperty:function(t,r,n){if(cUe(t),r=Ayr(r,!0),cUe(n),Cyr)try{return Dyr(t,r,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var JQ=M((hmn,pUe)=>{pUe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var hUe=M((mmn,dUe)=>{var Nyr=XQ(),Oyr=JQ();dUe.exports=Ev()?function(e,t,r){return Nyr.f(e,t,Oyr(1,r))}:function(e,t,r){return e[t]=r,e}});var wR=M((gmn,mUe)=>{var Lyr={}.hasOwnProperty;mUe.exports=function(e,t){return Lyr.call(e,t)}});var pw=M((vmn,vUe)=>{var ER=sC(),QQ=wv(),gUe=WQ(),Pyr=hUe(),kyr=wR(),SR="prototype",Zs=function(e,t,r){var n=e&Zs.F,o=e&Zs.G,i=e&Zs.S,a=e&Zs.P,u=e&Zs.B,p=e&Zs.W,h=o?QQ:QQ[t]||(QQ[t]={}),g=h[SR],x=o?ER:i?ER[t]:(ER[t]||{})[SR],b,T,A;o&&(r=t);for(b in r)T=!n&&x&&x[b]!==void 0,!(T&&kyr(h,b))&&(A=T?x[b]:r[b],h[b]=o&&typeof x[b]!="function"?r[b]:u&&T?gUe(A,ER):p&&x[b]==A?function(L){var P=function(k,q,U){if(this instanceof L){switch(arguments.length){case 0:return new L;case 1:return new L(k);case 2:return new L(k,q);}return new L(k,q,U)}return L.apply(this,arguments)};return P[SR]=L[SR],P}(A):a&&typeof A=="function"?gUe(Function.call,A):A,a&&((h.virtual||(h.virtual={}))[b]=A,e&Zs.R&&g&&!g[b]&&Pyr(g,b,A)))};Zs.F=1;Zs.G=2;Zs.S=4;Zs.P=8;Zs.B=16;Zs.W=32;Zs.U=64;Zs.R=128;vUe.exports=Zs});var _Ue=M((ymn,yUe)=>{var Ryr={}.toString;yUe.exports=function(e){return Ryr.call(e).slice(8,-1)}});var eee=M((_mn,xUe)=>{var jyr=_Ue();xUe.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return jyr(e)=="String"?e.split(""):Object(e)}});var tee=M((xmn,bUe)=>{bUe.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var cC=M((bmn,wUe)=>{var qyr=eee(),zyr=tee();wUe.exports=function(e){return qyr(zyr(e))}});var ree=M((wmn,EUe)=>{var Fyr=Math.ceil,Uyr=Math.floor;EUe.exports=function(e){return isNaN(e=+e)?0:(e>0?Uyr:Fyr)(e)}});var IUe=M((Emn,SUe)=>{var Byr=ree(),Vyr=Math.min;SUe.exports=function(e){return e>0?Vyr(Byr(e),9007199254740991):0}});var MUe=M((Smn,TUe)=>{var Gyr=ree(),Hyr=Math.max,Wyr=Math.min;TUe.exports=function(e,t){return e=Gyr(e),e<0?Hyr(e+t,0):Wyr(e,t)}});var AUe=M((Imn,CUe)=>{var $yr=cC(),Yyr=IUe(),Zyr=MUe();CUe.exports=function(e){return function(t,r,n){var o=$yr(t),i=Yyr(o.length),a=Zyr(n,i),u;if(e&&r!=r){for(;i>a;)if(u=o[a++],u!=u)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}}});var NUe=M((Tmn,DUe)=>{DUe.exports=!0});var RUe=M((Mmn,kUe)=>{var Kyr=wv(),OUe=sC(),LUe="__core-js_shared__",PUe=OUe[LUe]||(OUe[LUe]={});(kUe.exports=function(e,t){return PUe[e]||(PUe[e]=t!==void 0?t:{})})("versions",[]).push({version:Kyr.version,mode:NUe()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var qUe=M((Cmn,jUe)=>{var Xyr=0,Jyr=Math.random();jUe.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++Xyr+Jyr).toString(36))}});var nee=M((Amn,FUe)=>{var zUe=RUe()("keys"),Qyr=qUe();FUe.exports=function(e){return zUe[e]||(zUe[e]=Qyr(e))}});var VUe=M((Dmn,BUe)=>{var UUe=wR(),e0r=cC(),t0r=AUe()(!1),r0r=nee()("IE_PROTO");BUe.exports=function(e,t){var r=e0r(e),n=0,o=[],i;for(i in r)i!=r0r&&UUe(r,i)&&o.push(i);for(;t.length>n;)UUe(r,i=t[n++])&&(~t0r(o,i)||o.push(i));return o}});var oee=M((Nmn,GUe)=>{GUe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var IR=M((Omn,HUe)=>{var n0r=VUe(),o0r=oee();HUe.exports=Object.keys||function(t){return n0r(t,o0r)}});var $Ue=M(WUe=>{WUe.f=Object.getOwnPropertySymbols});var TR=M(YUe=>{YUe.f={}.propertyIsEnumerable});var KUe=M((kmn,ZUe)=>{var i0r=tee();ZUe.exports=function(e){return Object(i0r(e))}});var QUe=M((Rmn,JUe)=>{"use strict";var a0r=Ev(),XUe=IR(),s0r=$Ue(),l0r=TR(),u0r=KUe(),c0r=eee(),MR=Object.assign;JUe.exports=!MR||xR()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),MR({},e)[r]!=7||Object.keys(MR({},t)).join("")!=n})?function(t,r){for(var n=u0r(t),o=arguments.length,i=1,a=s0r.f,u=l0r.f;o>i;)for(var p=c0r(arguments[i++]),h=a?XUe(p).concat(a(p)):XUe(p),g=h.length,x=0,b;g>x;)b=h[x++],(!a0r||u.call(p,b))&&(n[b]=p[b]);return n}:MR});var eBe=M(()=>{var iee=pw();iee(iee.S+iee.F,"Object",{assign:QUe()})});var rBe=M((zmn,tBe)=>{eBe();tBe.exports=wv().Object.assign});var oBe=M((Umn,nBe)=>{var f0r=XQ(),p0r=uC(),d0r=IR();nBe.exports=Ev()?Object.defineProperties:function(t,r){p0r(t);for(var n=d0r(r),o=n.length,i=0,a;o>i;)f0r.f(t,a=n[i++],r[a]);return t}});var sBe=M((Bmn,aBe)=>{var iBe=sC().document;aBe.exports=iBe&&iBe.documentElement});var cBe=M((Vmn,uBe)=>{var h0r=uC(),m0r=oBe(),lBe=oee(),g0r=nee()("IE_PROTO"),see=function(){},lee="prototype",CR=function(){var e=YQ()("iframe"),t=lBe.length,r="<",n=">",o;for(e.style.display="none",sBe().appendChild(e),e.src="javascript:",o=e.contentWindow.document,o.open(),o.write(r+"script"+n+"document.F=Object"+r+"/script"+n),o.close(),CR=o.F;t--;)delete CR[lee][lBe[t]];return CR()};uBe.exports=Object.create||function(t,r){var n;return t!==null?(see[lee]=h0r(t),n=new see,see[lee]=null,n[g0r]=t):n=CR(),r===void 0?n:m0r(n,r)}});var pBe=M(()=>{var fBe=pw();fBe(fBe.S,"Object",{create:cBe()})});var hBe=M((Wmn,dBe)=>{pBe();var v0r=wv().Object;dBe.exports=function(t,r){return v0r.create(t,r)}});var vBe=M(gBe=>{var y0r=TR(),_0r=JQ(),x0r=cC(),b0r=KQ(),w0r=wR(),E0r=ZQ(),mBe=Object.getOwnPropertyDescriptor;gBe.f=Ev()?mBe:function(t,r){if(t=x0r(t),r=b0r(r,!0),E0r)try{return mBe(t,r)}catch(n){}if(w0r(t,r))return _0r(!y0r.f.call(t,r),t[r])}});var xBe=M((Ymn,_Be)=>{var S0r=lC(),I0r=uC(),yBe=function(e,t){if(I0r(e),!S0r(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};_Be.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=WQ()(Function.call,vBe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(o,i){return yBe(o,i),t?o.__proto__=i:r(o,i),o}}({},!1):void 0),check:yBe}});var wBe=M(()=>{var bBe=pw();bBe(bBe.S,"Object",{setPrototypeOf:xBe().set})});var SBe=M((Xmn,EBe)=>{wBe();EBe.exports=wv().Object.setPrototypeOf});var Zn=M((rgn,DR)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(o=n(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var a in o)e.call(o,a)&&o[a]&&(i=n(i,a));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof DR!="undefined"&&DR.exports?(t.default=t,DR.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var NR=M((ign,TBe)=>{"use strict";var T0r=function(e,t,r,n,o,i,a,u){if(!e){var p;if(t===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[r,n,o,i,a,u],g=0;p=new Error(t.replace(/%s/g,function(){return h[g++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};TBe.exports=T0r});var dee=M(pee=>{"use strict";Object.defineProperty(pee,"__esModule",{value:!0});function DBe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function NBe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function OBe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}DBe.__suppressDeprecationWarning=!0;NBe.__suppressDeprecationWarning=!0;OBe.__suppressDeprecationWarning=!0;function C0r(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,o=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?o="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(o="UNSAFE_componentWillUpdate"),r!==null||n!==null||o!==null){var i=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(o!==null?`
  `+o:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=DBe,t.componentWillReceiveProps=NBe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=OBe;var u=t.componentDidUpdate;t.componentDidUpdate=function(h,g,x){var b=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:x;u.call(this,h,g,b)}}return e}pee.polyfill=C0r});var hee=M((Sgn,kBe)=>{var D0r=Ev(),N0r=IR(),O0r=cC(),L0r=TR().f;kBe.exports=function(e){return function(t){for(var r=O0r(t),n=N0r(r),o=n.length,i=0,a=[],u;o>i;)u=n[i++],(!D0r||L0r.call(r,u))&&a.push(e?[u,r[u]]:r[u]);return a}}});var jBe=M(()=>{var RBe=pw(),P0r=hee()(!0);RBe(RBe.S,"Object",{entries:function(t){return P0r(t)}})});var zBe=M((Mgn,qBe)=>{jBe();qBe.exports=wv().Object.entries});var mee=M((Cgn,FBe)=>{FBe.exports=zBe()});var RR=M((kR,HBe)=>{"use strict";Object.defineProperty(kR,"__esModule",{value:!0});kR.default=V0r;function V0r(e){function t(n,o,i,a,u,p){var h=a||"<<anonymous>>",g=p||i;if(o[i]==null)return n?new Error("Required "+u+" `"+g+"` was not specified "+("in `"+h+"`.")):null;for(var x=arguments.length,b=Array(x>6?x-6:0),T=6;T<x;T++)b[T-6]=arguments[T];return e.apply(void 0,[o,i,h,u,g].concat(b))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}HBe.exports=kR.default});var $Be=M(()=>{var WBe=pw(),G0r=hee()(!1);WBe(WBe.S,"Object",{values:function(t){return G0r(t)}})});var ZBe=M((Rgn,YBe)=>{$Be();YBe.exports=wv().Object.values});var XBe=M((jgn,KBe)=>{KBe.exports=ZBe()});var eVe=M(Eo=>{"use strict";var Ba=typeof Symbol=="function"&&Symbol.for,xee=Ba?Symbol.for("react.element"):60103,bee=Ba?Symbol.for("react.portal"):60106,jR=Ba?Symbol.for("react.fragment"):60107,qR=Ba?Symbol.for("react.strict_mode"):60108,zR=Ba?Symbol.for("react.profiler"):60114,FR=Ba?Symbol.for("react.provider"):60109,UR=Ba?Symbol.for("react.context"):60110,wee=Ba?Symbol.for("react.async_mode"):60111,BR=Ba?Symbol.for("react.concurrent_mode"):60111,VR=Ba?Symbol.for("react.forward_ref"):60112,GR=Ba?Symbol.for("react.suspense"):60113,$0r=Ba?Symbol.for("react.suspense_list"):60120,HR=Ba?Symbol.for("react.memo"):60115,WR=Ba?Symbol.for("react.lazy"):60116,Y0r=Ba?Symbol.for("react.block"):60121,Z0r=Ba?Symbol.for("react.fundamental"):60117,K0r=Ba?Symbol.for("react.responder"):60118,X0r=Ba?Symbol.for("react.scope"):60119;function Qu(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case xee:switch(e=e.type,e){case wee:case BR:case jR:case zR:case qR:case GR:return e;default:switch(e=e&&e.$$typeof,e){case UR:case VR:case WR:case HR:case FR:return e;default:return t;}}case bee:return t;}}}function QBe(e){return Qu(e)===BR}Eo.AsyncMode=wee;Eo.ConcurrentMode=BR;Eo.ContextConsumer=UR;Eo.ContextProvider=FR;Eo.Element=xee;Eo.ForwardRef=VR;Eo.Fragment=jR;Eo.Lazy=WR;Eo.Memo=HR;Eo.Portal=bee;Eo.Profiler=zR;Eo.StrictMode=qR;Eo.Suspense=GR;Eo.isAsyncMode=function(e){return QBe(e)||Qu(e)===wee};Eo.isConcurrentMode=QBe;Eo.isContextConsumer=function(e){return Qu(e)===UR};Eo.isContextProvider=function(e){return Qu(e)===FR};Eo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===xee};Eo.isForwardRef=function(e){return Qu(e)===VR};Eo.isFragment=function(e){return Qu(e)===jR};Eo.isLazy=function(e){return Qu(e)===WR};Eo.isMemo=function(e){return Qu(e)===HR};Eo.isPortal=function(e){return Qu(e)===bee};Eo.isProfiler=function(e){return Qu(e)===zR};Eo.isStrictMode=function(e){return Qu(e)===qR};Eo.isSuspense=function(e){return Qu(e)===GR};Eo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===jR||e===BR||e===zR||e===qR||e===GR||e===$0r||typeof e=="object"&&e!==null&&(e.$$typeof===WR||e.$$typeof===HR||e.$$typeof===FR||e.$$typeof===UR||e.$$typeof===VR||e.$$typeof===Z0r||e.$$typeof===K0r||e.$$typeof===X0r||e.$$typeof===Y0r)};Eo.typeOf=Qu});var rVe=M((Bgn,tVe)=>{"use strict";tVe.exports=eVe()});var Ml=M(($R,oVe)=>{"use strict";Object.defineProperty($R,"__esModule",{value:!0});var J0r=we(),Q0r=nVe(J0r),e1r=rVe(),t1r=RR(),r1r=nVe(t1r);function nVe(e){return e&&e.__esModule?e:{default:e}}function n1r(e,t,r,n,o){var i=e[t];return Q0r.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,e1r.isValidElementType)(i)?null:new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}$R.default=(0,r1r.default)(n1r);oVe.exports=$R.default});var cVe=M((XR,uVe)=>{"use strict";Object.defineProperty(XR,"__esModule",{value:!0});XR.default=p1r;var u1r=RR(),c1r=f1r(u1r);function f1r(e){return e&&e.__esModule?e:{default:e}}function p1r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var u=null;return t.forEach(function(p){if(u==null){var h=p.apply(void 0,i);h!=null&&(u=h)}}),u}return(0,c1r.default)(n)}uVe.exports=XR.default});var Y0=M((lvn,hVe)=>{"use strict";var h1r=function(){};hVe.exports=h1r});var Wi=M((gvn,hC)=>{function y1r(e){return e&&e.__esModule?e:{default:e}}hC.exports=y1r,hC.exports.__esModule=!0,hC.exports.default=hC.exports});var vVe=M((tj,gVe)=>{"use strict";tj.__esModule=!0;tj.default=x1r;var _1r=/-(.)/g;function x1r(e){return e.replace(_1r,function(t,r){return r.toUpperCase()})}gVe.exports=tj.default});var Aee=M((rj,yVe)=>{"use strict";var b1r=Wi();rj.__esModule=!0;rj.default=S1r;var w1r=b1r(vVe()),E1r=/^-ms-/;function S1r(e){return(0,w1r.default)(e.replace(E1r,"ms-"))}yVe.exports=rj.default});var xVe=M((nj,_Ve)=>{"use strict";nj.__esModule=!0;nj.default=T1r;var I1r=/([A-Z])/g;function T1r(e){return e.replace(I1r,"-$1").toLowerCase()}_Ve.exports=nj.default});var wVe=M((oj,bVe)=>{"use strict";var M1r=Wi();oj.__esModule=!0;oj.default=D1r;var C1r=M1r(xVe()),A1r=/^ms-/;function D1r(e){return(0,C1r.default)(e).replace(A1r,"-ms-")}bVe.exports=oj.default});var SVe=M((ij,EVe)=>{"use strict";var N1r=Wi();ij.__esModule=!0;ij.default=k1r;var O1r=N1r(Aee()),L1r=/^(top|right|bottom|left)$/,P1r=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function k1r(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var o=e.style;n=(0,O1r.default)(n),n=="float"&&(n="styleFloat");var i=e.currentStyle[n]||null;if(i==null&&o&&o[n]&&(i=o[n]),P1r.test(i)&&!L1r.test(n)){var a=o.left,u=e.runtimeStyle,p=u&&u.left;p&&(u.left=e.currentStyle.left),o.left=n==="fontSize"?"1em":i,i=o.pixelLeft+"px",o.left=a,p&&(u.left=p)}return i}}}EVe.exports=ij.default});var TVe=M((aj,IVe)=>{"use strict";aj.__esModule=!0;aj.default=R1r;function R1r(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}IVe.exports=aj.default});var td=M((mC,MVe)=>{"use strict";mC.__esModule=!0;mC.default=void 0;var j1r=!!(typeof window!="undefined"&&window.document&&window.document.createElement);mC.default=j1r;MVe.exports=mC.default});var LVe=M(kn=>{"use strict";var q1r=Wi();kn.__esModule=!0;kn.default=kn.animationEnd=kn.animationDelay=kn.animationTiming=kn.animationDuration=kn.animationName=kn.transitionEnd=kn.transitionDuration=kn.transitionDelay=kn.transitionTiming=kn.transitionProperty=kn.transform=void 0;var z1r=q1r(td()),lj="transform";kn.transform=lj;var rd,Dee,CVe;kn.animationEnd=CVe;kn.transitionEnd=Dee;var Nee,Oee,Lee,Pee;kn.transitionDelay=Pee;kn.transitionTiming=Lee;kn.transitionDuration=Oee;kn.transitionProperty=Nee;var AVe,DVe,NVe,OVe;kn.animationDelay=OVe;kn.animationTiming=NVe;kn.animationDuration=DVe;kn.animationName=AVe;z1r.default&&(sj=U1r(),rd=sj.prefix,kn.transitionEnd=Dee=sj.transitionEnd,kn.animationEnd=CVe=sj.animationEnd,kn.transform=lj=rd+"-"+lj,kn.transitionProperty=Nee=rd+"-transition-property",kn.transitionDuration=Oee=rd+"-transition-duration",kn.transitionDelay=Pee=rd+"-transition-delay",kn.transitionTiming=Lee=rd+"-transition-timing-function",kn.animationName=AVe=rd+"-animation-name",kn.animationDuration=DVe=rd+"-animation-duration",kn.animationTiming=NVe=rd+"-animation-delay",kn.animationDelay=OVe=rd+"-animation-timing-function");var sj,F1r={transform:lj,end:Dee,property:Nee,timing:Lee,delay:Pee,duration:Oee};kn.default=F1r;function U1r(){for(var e=document.createElement("div").style,t={O:function(h){return"o"+h.toLowerCase()},Moz:function(h){return h.toLowerCase()},Webkit:function(h){return"webkit"+h},ms:function(h){return"MS"+h}},r=Object.keys(t),n,o,i="",a=0;a<r.length;a++){var u=r[a];if(u+"TransitionProperty"in e){i="-"+u.toLowerCase(),n=t[u]("TransitionEnd"),o=t[u]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:n,prefix:i}}});var kVe=M((uj,PVe)=>{"use strict";uj.__esModule=!0;uj.default=V1r;var B1r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function V1r(e){return!!(e&&B1r.test(e))}PVe.exports=uj.default});var fj=M((cj,RVe)=>{"use strict";var gC=Wi();cj.__esModule=!0;cj.default=Z1r;var G1r=gC(Aee()),kee=gC(wVe()),H1r=gC(SVe()),W1r=gC(TVe()),$1r=LVe(),Y1r=gC(kVe());function Z1r(e,t,r){var n="",o="",i=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,G1r.default)(t)]||(0,H1r.default)(e).getPropertyValue((0,kee.default)(t));(i={})[t]=r}Object.keys(i).forEach(function(a){var u=i[a];!u&&u!==0?(0,W1r.default)(e,(0,kee.default)(a)):(0,Y1r.default)(a)?o+=a+"("+u+") ":n+=(0,kee.default)(a)+": "+u+";"}),o&&(n+=$1r.transform+": "+o+";"),e.style.cssText+=";"+n}RVe.exports=cj.default});var jVe=M(yw=>{"use strict";yw.__esModule=!0;yw.classNamesShape=yw.timeoutsShape=void 0;var yvn=K1r(xt());function K1r(e){return e&&e.__esModule?e:{default:e}}var X1r=null;yw.timeoutsShape=X1r;var J1r=null;yw.classNamesShape=J1r});var zVe=M(hu=>{"use strict";hu.__esModule=!0;hu.default=hu.EXITING=hu.ENTERED=hu.ENTERING=hu.EXITED=hu.UNMOUNTED=void 0;var Q1r=r_r(xt()),Ree=qVe(we()),e_r=qVe(Si()),t_r=dee(),xvn=jVe();function qVe(e){return e&&e.__esModule?e:{default:e}}function r_r(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function n_r(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function o_r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var vC="unmounted";hu.UNMOUNTED=vC;var Z0="exited";hu.EXITED=Z0;var K0="entering";hu.ENTERING=K0;var xw="entered";hu.ENTERED=xw;var jee="exiting";hu.EXITING=jee;var nd=function(e){o_r(t,e);function t(n,o){var i;i=e.call(this,n,o)||this;var a=o.transitionGroup,u=a&&!a.isMounting?n.enter:n.appear,p;return i.appearStatus=null,n.in?u?(p=Z0,i.appearStatus=K0):p=xw:n.unmountOnExit||n.mountOnEnter?p=vC:p=Z0,i.state={status:p},i.nextCallback=null,i}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===vC?{status:Z0}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==K0&&a!==xw&&(i=K0):(a===K0||a===xw)&&(i=jee)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,i,a,u;return i=a=u=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,u=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:u}},r.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null){this.cancelNextCallback();var a=e_r.default.findDOMNode(this);i===K0?this.performEnter(a,o):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===Z0&&this.setState({status:vC})},r.performEnter=function(o,i){var a=this,u=this.props.enter,p=this.context.transitionGroup?this.context.transitionGroup.isMounting:i,h=this.getTimeouts(),g=p?h.appear:h.enter;if(!i&&!u){this.safeSetState({status:xw},function(){a.props.onEntered(o)});return}this.props.onEnter(o,p),this.safeSetState({status:K0},function(){a.props.onEntering(o,p),a.onTransitionEnd(o,g,function(){a.safeSetState({status:xw},function(){a.props.onEntered(o,p)})})})},r.performExit=function(o){var i=this,a=this.props.exit,u=this.getTimeouts();if(!a){this.safeSetState({status:Z0},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:jee},function(){i.props.onExiting(o),i.onTransitionEnd(o,u.exit,function(){i.safeSetState({status:Z0},function(){i.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},r.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(u){a&&(a=!1,i.nextCallback=null,o(u))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(o,i,a){this.setNextCallback(a);var u=i==null&&!this.props.addEndListener;if(!o||u){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(o,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var o=this.state.status;if(o===vC)return null;var i=this.props,a=i.children,u=n_r(i,["children"]);if(delete u.in,delete u.mountOnEnter,delete u.unmountOnExit,delete u.appear,delete u.enter,delete u.exit,delete u.timeout,delete u.addEndListener,delete u.onEnter,delete u.onEntering,delete u.onEntered,delete u.onExit,delete u.onExiting,delete u.onExited,typeof a=="function")return a(o,u);var p=Ree.default.Children.only(a);return Ree.default.cloneElement(p,u)},t}(Ree.default.Component);nd.contextTypes={transitionGroup:Q1r.object};nd.childContextTypes={transitionGroup:function(){}};nd.propTypes={};function _w(){}nd.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_w,onEntering:_w,onEntered:_w,onExit:_w,onExiting:_w,onExited:_w};nd.UNMOUNTED=0;nd.EXITED=1;nd.ENTERING=2;nd.ENTERED=3;nd.EXITING=4;var i_r=(0,t_r.polyfill)(nd);hu.default=i_r});var X0=M((pj,FVe)=>{"use strict";pj.__esModule=!0;pj.default=a_r;function a_r(e){return e&&e.ownerDocument||document}FVe.exports=pj.default});var BVe=M((dj,UVe)=>{"use strict";var s_r=Wi();dj.__esModule=!0;dj.default=u_r;var l_r=s_r(X0());function u_r(e){e===void 0&&(e=(0,l_r.default)());try{return e.activeElement}catch(t){}}UVe.exports=dj.default});var _C=M((yC,GVe)=>{"use strict";var c_r=Wi();yC.__esModule=!0;yC.default=void 0;var f_r=c_r(td()),p_r=function(){return f_r.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):VVe(e,t)}:VVe}();yC.default=p_r;function VVe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}GVe.exports=yC.default});var YVe=M((J0,$Ve)=>{function HVe(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return WVe[e];var r=String(e),n=Vh[r.toLowerCase()];if(n)return n;var n=hj[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}HVe.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var o=Vh[r.toLowerCase()];if(o)return o===n;var o=hj[r.toLowerCase()];if(o)return o===n}else if(typeof r=="number")return r===n;return!1}};J0=$Ve.exports=HVe;var Vh=J0.code=J0.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},hj=J0.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Ti=97;Ti<123;Ti++)Vh[String.fromCharCode(Ti)]=Ti-32;for(Ti=48;Ti<58;Ti++)Vh[Ti-48]=Ti;var Ti;for(Ti=1;Ti<13;Ti++)Vh["f"+Ti]=Ti+111;for(Ti=0;Ti<10;Ti++)Vh["numpad "+Ti]=Ti+96;var WVe=J0.names=J0.title={};for(Ti in Vh)WVe[Vh[Ti]]=Ti;for(qee in hj)Vh[qee]=hj[qee];var qee});var zee=M((mj,ZVe)=>{"use strict";Object.defineProperty(mj,"__esModule",{value:!0});mj.default=d_r;function d_r(e){return function(r,n,o,i,a){var u=o||"<<anonymous>>",p=a||n;if(r[n]==null)return new Error("The "+i+" `"+p+"` is required to make "+("`"+u+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var h=arguments.length,g=Array(h>5?h-5:0),x=5;x<h;x++)g[x-5]=arguments[x];return e.apply(void 0,[r,n,o,i,a].concat(g))}}ZVe.exports=mj.default});var gj=M((xC,XVe)=>{"use strict";var h_r=Wi();xC.__esModule=!0;xC.default=void 0;var m_r=h_r(td()),KVe=function(){};m_r.default&&(KVe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var g_r=KVe;xC.default=g_r;XVe.exports=xC.default});var vj=M((bC,QVe)=>{"use strict";var v_r=Wi();bC.__esModule=!0;bC.default=void 0;var y_r=v_r(td()),JVe=function(){};y_r.default&&(JVe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var __r=JVe;bC.default=__r;QVe.exports=bC.default});var Fee=M((yj,tGe)=>{"use strict";yj.__esModule=!0;yj.default=function(e,t,r,n){return(0,b_r.default)(e,t,r,n),{remove:function(){(0,E_r.default)(e,t,r,n)}}};var x_r=gj(),b_r=eGe(x_r),w_r=vj(),E_r=eGe(w_r);function eGe(e){return e&&e.__esModule?e:{default:e}}tGe.exports=yj.default});var Q0=M((_j,nGe)=>{"use strict";_j.__esModule=!0;_j.default=function(e){return(0,M_r.default)(I_r.default.findDOMNode(e))};var S_r=Si(),I_r=rGe(S_r),T_r=X0(),M_r=rGe(T_r);function rGe(e){return e&&e.__esModule?e:{default:e}}nGe.exports=_j.default});var iGe=M((wj,oGe)=>{"use strict";wj.__esModule=!0;var C_r=_C(),A_r=bw(C_r),D_r=xt(),xj=bw(D_r),N_r=we(),O_r=bw(N_r),L_r=Si(),P_r=bw(L_r),k_r=Fee(),Uee=bw(k_r),R_r=Q0(),j_r=bw(R_r);function bw(e){return e&&e.__esModule?e:{default:e}}function q_r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z_r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function F_r(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var U_r=27;function B_r(e){return e.button===0}function V_r(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var bj=function(e){F_r(t,e);function t(r,n){q_r(this,t);var o=z_r(this,e.call(this,r,n));return o.addEventListeners=function(){o.currentEvent=window.event;var i=o.props.event,a=(0,j_r.default)(o);o.documentMouseCaptureListener=(0,Uee.default)(a,i,o.handleMouseCapture,!0),o.documentMouseListener=(0,Uee.default)(a,i,o.handleMouse),o.documentKeyupListener=(0,Uee.default)(a,"keyup",o.handleKeyUp)},o.removeEventListeners=function(){o.documentMouseCaptureListener&&o.documentMouseCaptureListener.remove(),o.documentMouseListener&&o.documentMouseListener.remove(),o.documentKeyupListener&&o.documentKeyupListener.remove()},o.handleMouseCapture=function(i){o.preventMouseRootClose=V_r(i)||!B_r(i)||(0,A_r.default)(P_r.default.findDOMNode(o),i.target)},o.handleMouse=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}!o.preventMouseRootClose&&o.props.onRootClose&&o.props.onRootClose(i)},o.handleKeyUp=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}i.keyCode===U_r&&o.props.onRootClose&&o.props.onRootClose(i)},o.preventMouseRootClose=!1,o}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}(O_r.default.Component);bj.displayName="RootCloseWrapper";bj.propTypes={onRootClose:xj.default.func,children:xj.default.element,disabled:xj.default.bool,event:xj.default.oneOf(["click","mousedown"])};bj.defaultProps={event:"click"};wj.default=bj;oGe.exports=wj.default});var vGe=M((Mj,gGe)=>{"use strict";Mj.__esModule=!0;Mj.default=nxr;var rxr=/^[\w-]*$/,Jee=Function.prototype.bind.call(Function.prototype.call,[].slice);function nxr(e,t){var r=t[0]==="#",n=t[0]===".",o=r||n?t.slice(1):t,i=rxr.test(o),a;return i?r?(e=e.getElementById?e:document,(a=e.getElementById(o))?[a]:[]):e.getElementsByClassName&&n?Jee(e.getElementsByClassName(o)):Jee(e.getElementsByTagName(t)):Jee(e.querySelectorAll(t))}gGe.exports=Mj.default});var xGe=M((Cj,_Ge)=>{"use strict";var yGe=Wi();Cj.__esModule=!0;Cj.default=axr;var oxr=yGe(_C()),ixr=yGe(vGe());function axr(e,t){return function(n){var o=n.currentTarget,i=n.target,a=(0,ixr.default)(o,e);a.some(function(u){return(0,oxr.default)(u,i)})&&t.call(this,n)}}_Ge.exports=Cj.default});var EGe=M((SC,wGe)=>{"use strict";var Qee=Wi();SC.__esModule=!0;SC.default=void 0;var sxr=Qee(td()),lxr=Qee(gj()),uxr=Qee(vj()),bGe=function(){};sxr.default&&(bGe=function(t,r,n,o){return(0,lxr.default)(t,r,n,o),function(){(0,uxr.default)(t,r,n,o)}});var cxr=bGe;SC.default=cxr;wGe.exports=SC.default});var CGe=M(Iv=>{"use strict";var Aj=Wi();Iv.__esModule=!0;Iv.default=void 0;var SGe=Aj(gj());Iv.on=SGe.default;var IGe=Aj(vj());Iv.off=IGe.default;var TGe=Aj(xGe());Iv.filter=TGe.default;var MGe=Aj(EGe());Iv.listen=MGe.default;var fxr={on:SGe.default,off:IGe.default,filter:TGe.default,listen:MGe.default};Iv.default=fxr});var ete=M((Nj,AGe)=>{"use strict";var pxr=Wi();Nj.__esModule=!0;Nj.default=hxr;var dxr=pxr(td()),Dj;function hxr(e){if((!Dj&&Dj!==0||e)&&dxr.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Dj=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Dj}AGe.exports=Nj.default});var IC=M((Oj,NGe)=>{"use strict";Object.defineProperty(Oj,"__esModule",{value:!0});var mxr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gxr=we(),vxr=DGe(gxr),yxr=RR(),_xr=DGe(yxr);function DGe(e){return e&&e.__esModule?e:{default:e}}function xxr(e,t,r,n,o){var i=e[t],a=typeof i=="undefined"?"undefined":mxr(i);return vxr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(a!=="object"||typeof i.render!="function")&&i.nodeType!==1?new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}Oj.default=(0,_xr.default)(xxr);NGe.exports=Oj.default});var kGe=M((ryn,PGe)=>{"use strict";var bxr=!1,LGe=function(){};bxr&&(OGe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var o=1;o<n;o++)r[o-1]=arguments[o];var i=0,a="Warning: "+t.replace(/%s/g,function(){return r[i++]});typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(u){}},LGe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var o=2;o<n;o++)r[o-2]=arguments[o];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||OGe.apply(null,[t].concat(r))});var OGe;PGe.exports=LGe});var qGe=M((Lj,jGe)=>{"use strict";Object.defineProperty(Lj,"__esModule",{value:!0});Lj.default=RGe;var wxr=kGe(),Exr=Sxr(wxr);function Sxr(e){return e&&e.__esModule?e:{default:e}}var tte={};function RGe(e,t){return function(n,o,i,a,u){var p=i||"<<anonymous>>",h=u||o;if(n[o]!=null){var g=i+"."+o;(0,Exr.default)(tte[g],"The "+a+" `"+h+"` of "+("`"+p+"` is deprecated. "+t+".")),tte[g]=!0}for(var x=arguments.length,b=Array(x>5?x-5:0),T=5;T<x;T++)b[T-5]=arguments[T];return e.apply(void 0,[n,o,i,a,u].concat(b))}}function Ixr(){tte={}}RGe._resetWarned=Ixr;jGe.exports=Lj.default});var rte=M((Pj,zGe)=>{"use strict";Pj.__esModule=!0;Pj.default=Txr;function Txr(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}zGe.exports=Pj.default});var UGe=M((kj,FGe)=>{"use strict";var Mxr=Wi();kj.__esModule=!0;kj.default=Axr;var Cxr=Mxr(rte());function Axr(e,t){e.classList?e.classList.add(t):(0,Cxr.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}FGe.exports=kj.default});var GGe=M((nyn,VGe)=>{"use strict";function BGe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}VGe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=BGe(t.className,r):t.setAttribute("class",BGe(t.className&&t.className.baseVal||"",r))}});var YGe=M(e1=>{"use strict";var nte=Wi();e1.__esModule=!0;e1.default=void 0;var HGe=nte(UGe());e1.addClass=HGe.default;var WGe=nte(GGe());e1.removeClass=WGe.default;var $Ge=nte(rte());e1.hasClass=$Ge.default;var Dxr={addClass:HGe.default,removeClass:WGe.default,hasClass:$Ge.default};e1.default=Dxr});var TC=M((Rj,ZGe)=>{"use strict";Rj.__esModule=!0;Rj.default=Nxr;function Nxr(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}ZGe.exports=Rj.default});var ote=M((jj,JGe)=>{"use strict";jj.__esModule=!0;jj.default=jxr;var Oxr=TC(),KGe=XGe(Oxr),Lxr=X0(),Pxr=XGe(Lxr);function XGe(e){return e&&e.__esModule?e:{default:e}}function kxr(e){return e&&e.tagName.toLowerCase()==="body"}function Rxr(e){var t=(0,Pxr.default)(e),r=(0,KGe.default)(t),n=r.innerWidth;if(!n){var o=t.documentElement.getBoundingClientRect();n=o.right-Math.abs(o.left)}return t.body.clientWidth<n}function jxr(e){var t=(0,KGe.default)(e);return t||kxr(e)?Rxr(e):e.scrollHeight>e.clientHeight}JGe.exports=jj.default});var eHe=M(MC=>{"use strict";MC.__esModule=!0;MC.ariaHidden=ite;MC.hideSiblings=Fxr;MC.showSiblings=Uxr;var qxr=["template","script","style"],zxr=function(t){var r=t.nodeType,n=t.tagName;return r===1&&qxr.indexOf(n.toLowerCase())===-1},QGe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(o){r.indexOf(o)===-1&&zxr(o)&&n(o)})};function ite(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function Fxr(e,t){QGe(e,t,function(r){return ite(!0,r)})}function Uxr(e,t){QGe(e,t,function(r){return ite(!1,r)})}});var oHe=M((zj,nHe)=>{"use strict";zj.__esModule=!0;var Bxr=YGe(),tHe=qj(Bxr),Vxr=fj(),rHe=qj(Vxr),Gxr=ete(),Hxr=qj(Gxr),Wxr=ote(),$xr=qj(Wxr),ate=eHe();function qj(e){return e&&e.__esModule?e:{default:e}}function Yxr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zxr(e,t){var r=-1;return e.some(function(n,o){if(t(n,o))return r=o,!0}),r}function Kxr(e,t){return Zxr(e,function(r){return r.modals.indexOf(t)!==-1})}function Xxr(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,rHe.default)(t,"paddingRight")||0,10)+(0,Hxr.default)()+"px"),(0,rHe.default)(t,r)}function Jxr(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var Qxr=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,o=n===void 0?!0:n,i=r.handleContainerOverflow,a=i===void 0?!0:i;Yxr(this,e),this.add=function(u,p,h){var g=t.modals.indexOf(u),x=t.containers.indexOf(p);if(g!==-1)return g;if(g=t.modals.length,t.modals.push(u),t.hideSiblingNodes&&(0,ate.hideSiblings)(p,u.modalNode),x!==-1)return t.data[x].modals.push(u),g;var b={modals:[u],classes:h?h.split(/\s+/):[],overflowing:(0,$xr.default)(p)};return t.handleContainerOverflow&&Xxr(b,p),b.classes.forEach(tHe.default.addClass.bind(null,p)),t.containers.push(p),t.data.push(b),g},this.remove=function(u){var p=t.modals.indexOf(u);if(p!==-1){var h=Kxr(t.data,u),g=t.data[h],x=t.containers[h];g.modals.splice(g.modals.indexOf(u),1),t.modals.splice(p,1),g.modals.length===0?(g.classes.forEach(tHe.default.removeClass.bind(null,x)),t.handleContainerOverflow&&Jxr(g,x),t.hideSiblingNodes&&(0,ate.showSiblings)(x,u.modalNode),t.containers.splice(h,1),t.data.splice(h,1)):t.hideSiblingNodes&&(0,ate.ariaHidden)(!1,g.modals[g.modals.length-1].modalNode)}},this.isTopModal=function(u){return!!t.modals.length&&t.modals[t.modals.length-1]===u},this.hideSiblingNodes=o,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]};zj.default=Qxr;nHe.exports=zj.default});var CC=M((Fj,iHe)=>{"use strict";Fj.__esModule=!0;Fj.default=nbr;var ebr=Si(),tbr=rbr(ebr);function rbr(e){return e&&e.__esModule?e:{default:e}}function nbr(e,t){return e=typeof e=="function"?e():e,tbr.default.findDOMNode(e)||t}iHe.exports=Fj.default});var pHe=M((Uj,fHe)=>{"use strict";Uj.__esModule=!0;var obr=xt(),ste=Sw(obr),ibr=IC(),abr=Sw(ibr),sbr=we(),aHe=Sw(sbr),lbr=Si(),sHe=Sw(lbr),ubr=CC(),lHe=Sw(ubr),cbr=Q0(),uHe=Sw(cbr);function Sw(e){return e&&e.__esModule?e:{default:e}}function fbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cHe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function pbr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var lte=function(e){pbr(t,e);function t(){var r,n,o;fbr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=cHe(this,e.call.apply(e,[this].concat(a))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,lHe.default)(n.props.container,(0,uHe.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var p=n.props.children?aHe.default.Children.only(n.props.children):null;if(p!==null){n._mountOverlayTarget();var h=!n._overlayInstance;n._overlayInstance=sHe.default.unstable_renderSubtreeIntoContainer(n,p,n._overlayTarget,function(){h&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(sHe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),cHe(n,o)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,lHe.default)(n.container,(0,uHe.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(aHe.default.Component);lte.displayName="Portal";lte.propTypes={container:ste.default.oneOfType([abr.default,ste.default.func]),onRendered:ste.default.func};Uj.default=lte;fHe.exports=Uj.default});var pte=M((Bj,hHe)=>{"use strict";Bj.__esModule=!0;var dbr=td(),hbr=Tv(dbr),mbr=xt(),ute=Tv(mbr),gbr=IC(),vbr=Tv(gbr),ybr=we(),_br=Tv(ybr),xbr=Si(),cte=Tv(xbr),bbr=CC(),wbr=Tv(bbr),Ebr=Q0(),Sbr=Tv(Ebr),Ibr=pHe(),Tbr=Tv(Ibr);function Tv(e){return e&&e.__esModule?e:{default:e}}function Mbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dHe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Cbr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fte=function(e){Cbr(t,e);function t(){var r,n,o;Mbr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=dHe(this,e.call.apply(e,[this].concat(a))),n),n.getMountNode=function(){return n._portalContainerNode},r),dHe(n,o)}return t.prototype.UNSAFE_componentWillMount=function(){if(hbr.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!cte.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,wbr.default)(n,(0,Sbr.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?cte.default.createPortal(this.props.children,this._portalContainerNode):null},t}(_br.default.Component);fte.displayName="Portal";fte.propTypes={container:ute.default.oneOfType([vbr.default,ute.default.func]),onRendered:ute.default.func};Bj.default=cte.default.createPortal?fte:Tbr.default;hHe.exports=Bj.default});var yHe=M((Vj,vHe)=>{"use strict";Vj.__esModule=!0;var Abr=xt(),Dbr=mHe(Abr),Nbr=we(),Obr=mHe(Nbr);function mHe(e){return e&&e.__esModule?e:{default:e}}function Lbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pbr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function kbr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Rbr={children:Dbr.default.node},gHe=function(e){kbr(t,e);function t(){return Lbr(this,t),Pbr(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}(Obr.default.Component);gHe.propTypes=Rbr;Vj.default=gHe;vHe.exports=Vj.default});var xHe=M((Gj,_He)=>{"use strict";Gj.__esModule=!0;Gj.default=jbr;function jbr(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}_He.exports=Gj.default});var DHe=M((Wj,AHe)=>{"use strict";Wj.__esModule=!0;var SHe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qbr=BVe(),dte=gs(qbr),zbr=_C(),IHe=gs(zbr),Fbr=td(),Ubr=gs(Fbr),Bbr=xt(),ti=gs(Bbr),Vbr=IC(),Gbr=gs(Vbr),Hbr=qGe(),Wbr=gs(Hbr),$br=Ml(),bHe=gs($br),THe=we(),Mv=gs(THe),Ybr=Si(),Zbr=gs(Ybr),Kbr=Y0(),Xbr=gs(Kbr),Jbr=oHe(),MHe=gs(Jbr),Qbr=pte(),CHe=gs(Qbr),ewr=yHe(),twr=gs(ewr),rwr=Fee(),wHe=gs(rwr),nwr=xHe(),owr=gs(nwr),iwr=CC(),awr=gs(iwr),swr=Q0(),hte=gs(swr);function gs(e){return e&&e.__esModule?e:{default:e}}function lwr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EHe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function uwr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var cwr=new MHe.default,Hj=function(e){uwr(t,e);function t(){var r,n,o;lwr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=EHe(this,e.call.apply(e,[this].concat(a))),n),fwr.call(n),r),EHe(n,o)}return t.prototype.omitProps=function(n,o){var i=Object.keys(n),a={};return i.map(function(u){Object.prototype.hasOwnProperty.call(o,u)||(a[u]=n[u])}),a},t.prototype.render=function(){var n=this.props,o=n.show,i=n.container,a=n.children,u=n.transition,p=n.backdrop,h=n.className,g=n.style,x=n.onExit,b=n.onExiting,T=n.onEnter,A=n.onEntering,L=n.onEntered,P=Mv.default.Children.only(a),k=this.omitProps(this.props,t.propTypes),q=o||u&&!this.state.exited;if(!q)return null;var U=P.props,H=U.role,X=U.tabIndex;return(H===void 0||X===void 0)&&(P=(0,THe.cloneElement)(P,{role:H===void 0?"document":H,tabIndex:X==null?"-1":X})),u&&(P=Mv.default.createElement(u,{appear:!0,unmountOnExit:!0,in:o,onExit:x,onExiting:b,onExited:this.handleHidden,onEnter:T,onEntering:A,onEntered:L},P)),Mv.default.createElement(CHe.default,{ref:this.setMountNode,container:i,onRendered:this.onPortalRendered},Mv.default.createElement("div",SHe({ref:this.setModalNodeRef,role:H||"dialog"},k,{style:g,className:h}),p&&this.renderBackdrop(),Mv.default.createElement(twr.default,{ref:this.setDialogRef},P)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var o=this.props.transition;n.show&&!this.props.show&&!o?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,o=n.show,i=n.transition;this._isMounted=!1,(o||i&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),o=(0,dte.default)((0,hte.default)(this));n&&!(0,IHe.default)(n,o)&&(this.lastFocus=o,n.hasAttribute("tabIndex")||((0,Xbr.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return Zbr.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(Mv.default.Component);Hj.propTypes=SHe({},CHe.default.propTypes,{show:ti.default.bool,container:ti.default.oneOfType([Gbr.default,ti.default.func]),onShow:ti.default.func,onHide:ti.default.func,backdrop:ti.default.oneOfType([ti.default.bool,ti.default.oneOf(["static"])]),renderBackdrop:ti.default.func,onEscapeKeyDown:ti.default.func,onEscapeKeyUp:(0,Wbr.default)(ti.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:ti.default.func,backdropStyle:ti.default.object,backdropClassName:ti.default.string,containerClassName:ti.default.string,keyboard:ti.default.bool,transition:bHe.default,backdropTransition:bHe.default,autoFocus:ti.default.bool,enforceFocus:ti.default.bool,restoreFocus:ti.default.bool,onEnter:ti.default.func,onEntering:ti.default.func,onEntered:ti.default.func,onExit:ti.default.func,onExiting:ti.default.func,onExited:ti.default.func,manager:ti.default.object.isRequired});Hj.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:cwr,renderBackdrop:function(t){return Mv.default.createElement("div",t)}};var fwr=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,o=r.backdropClassName,i=r.renderBackdrop,a=r.backdropTransition,u=function(g){return t.backdrop=g},p=i({ref:u,style:n,className:o,onClick:t.handleBackdropClick});return a&&(p=Mv.default.createElement(a,{appear:!0,in:t.props.show},p)),p},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,hte.default)(t),n=(0,awr.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,wHe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,wHe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,owr.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){Ubr.default&&(t.lastFocus=(0,dte.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,dte.default)((0,hte.default)(t));r&&!(0,IHe.default)(r,n)&&r.focus()}}};Hj.Manager=MHe.default;Wj.default=Hj;AHe.exports=Wj.default});var Mte=M((Jj,XHe)=>{"use strict";var Tte=Wi();Jj.__esModule=!0;Jj.default=kwr;var Owr=Tte(_C()),Lwr=Tte(TC()),Pwr=Tte(X0());function kwr(e){var t=(0,Pwr.default)(e),r=(0,Lwr.default)(t),n=t&&t.documentElement,o={top:0,left:0,height:0,width:0};if(t)return(0,Owr.default)(n,e)&&(e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect()),o={top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0),width:(o.width==null?e.offsetWidth:o.width)||0,height:(o.height==null?e.offsetHeight:o.height)||0}),o}XHe.exports=Jj.default});var JHe=M((f0n,Hh)=>{function Cte(){return Hh.exports=Cte=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Hh.exports.__esModule=!0,Hh.exports.default=Hh.exports,Cte.apply(null,arguments)}Hh.exports=Cte,Hh.exports.__esModule=!0,Hh.exports.default=Hh.exports});var tWe=M((Qj,eWe)=>{"use strict";var QHe=Wi();Qj.__esModule=!0;Qj.default=zwr;var Rwr=QHe(X0()),jwr=QHe(fj());function qwr(e){return e.nodeName&&e.nodeName.toLowerCase()}function zwr(e){for(var t=(0,Rwr.default)(e),r=e&&e.offsetParent;r&&qwr(e)!=="html"&&(0,jwr.default)(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}eWe.exports=Qj.default});var Ate=M((e6,rWe)=>{"use strict";var Fwr=Wi();e6.__esModule=!0;e6.default=Bwr;var Uwr=Fwr(TC());function Bwr(e,t){var r=(0,Uwr.default)(e);if(t===void 0)return r?"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop:e.scrollTop;r?r.scrollTo("pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft,t):e.scrollTop=t}rWe.exports=e6.default});var oWe=M((t6,nWe)=>{"use strict";var Vwr=Wi();t6.__esModule=!0;t6.default=Hwr;var Gwr=Vwr(TC());function Hwr(e,t){var r=(0,Gwr.default)(e);if(t===void 0)return r?"pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft:e.scrollLeft;r?r.scrollTo(t,"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop):e.scrollLeft=t}nWe.exports=t6.default});var sWe=M((r6,aWe)=>{"use strict";var Cw=Wi();r6.__esModule=!0;r6.default=Xwr;var Wwr=Cw(JHe()),iWe=Cw(Mte()),$wr=Cw(tWe()),Ywr=Cw(Ate()),Zwr=Cw(oWe()),RC=Cw(fj());function Kwr(e){return e.nodeName&&e.nodeName.toLowerCase()}function Xwr(e,t){var r={top:0,left:0},n;return(0,RC.default)(e,"position")==="fixed"?n=e.getBoundingClientRect():(t=t||(0,$wr.default)(e),n=(0,iWe.default)(e),Kwr(t)!=="html"&&(r=(0,iWe.default)(t)),r.top+=parseInt((0,RC.default)(t,"borderTopWidth"),10)-(0,Ywr.default)(t)||0,r.left+=parseInt((0,RC.default)(t,"borderLeftWidth"),10)-(0,Zwr.default)(t)||0),(0,Wwr.default)({},n,{top:n.top-r.top-(parseInt((0,RC.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,RC.default)(e,"marginLeft"),10)||0)})}aWe.exports=r6.default});var cWe=M((o6,uWe)=>{"use strict";o6.__esModule=!0;o6.default=aEr;var Jwr=Mte(),Nte=n6(Jwr),Qwr=sWe(),eEr=n6(Qwr),tEr=Ate(),Dte=n6(tEr),rEr=Q0(),nEr=n6(rEr);function n6(e){return e&&e.__esModule?e:{default:e}}function lWe(e){var t=void 0,r=void 0,n=void 0;if(e.tagName==="BODY")t=window.innerWidth,r=window.innerHeight,n=(0,Dte.default)((0,nEr.default)(e).documentElement)||(0,Dte.default)(e);else{var o=(0,Nte.default)(e);t=o.width,r=o.height,n=(0,Dte.default)(e)}return{width:t,height:r,scroll:n}}function oEr(e,t,r,n){var o=lWe(r),i=o.scroll,a=o.height,u=e-n-i,p=e+n-i+t;return u<0?-u:p>a?a-p:0}function iEr(e,t,r,n){var o=lWe(r),i=o.width,a=e-n,u=e+n+t;return a<0?-a:u>i?i-u:0}function aEr(e,t,r,n,o){var i=n.tagName==="BODY"?(0,Nte.default)(r):(0,eEr.default)(r,n),a=(0,Nte.default)(t),u=a.height,p=a.width,h=void 0,g=void 0,x=void 0,b=void 0;if(e==="left"||e==="right"){g=i.top+(i.height-u)/2,e==="left"?h=i.left-p:h=i.left+i.width;var T=oEr(g,u,n,o);g+=T,b=50*(1-2*T/u)+"%",x=void 0}else if(e==="top"||e==="bottom"){h=i.left+(i.width-p)/2,e==="top"?g=i.top-u:g=i.top+i.height;var A=iEr(h,p,n,o);h+=A,x=50*(1-2*A/p)+"%",b=void 0}else throw new Error("calcOverlayPosition(): No such placement of \""+e+"\" found.");return{positionLeft:h,positionTop:g,arrowOffsetLeft:x,arrowOffsetTop:b}}uWe.exports=o6.default});var yWe=M((a6,vWe)=>{"use strict";a6.__esModule=!0;var fWe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sEr=Zn(),lEr=Av(sEr),uEr=xt(),t1=Av(uEr),cEr=IC(),pWe=Av(cEr),gWe=we(),dWe=Av(gWe),fEr=Si(),hWe=Av(fEr),pEr=cWe(),dEr=Av(pEr),hEr=CC(),mEr=Av(hEr),gEr=Q0(),vEr=Av(gEr);function Av(e){return e&&e.__esModule?e:{default:e}}function mWe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function yEr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _Er(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function xEr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i6=function(e){xEr(t,e);function t(r,n){yEr(this,t);var o=_Er(this,e.call(this,r,n));return o.getTarget=function(){var i=o.props.target,a=typeof i=="function"?i():i;return a&&hWe.default.findDOMNode(a)||null},o.maybeUpdatePosition=function(i){var a=o.getTarget();!o.props.shouldUpdatePosition&&a===o._lastTarget&&!i||o.updatePosition(a)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(n){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==n.placement))},t.prototype.render=function(){var n=this.props,o=n.children,i=n.className,a=mWe(n,["children","className"]),u=this.state,p=u.positionLeft,h=u.positionTop,g=mWe(u,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var x=dWe.default.Children.only(o);return(0,gWe.cloneElement)(x,fWe({},a,g,{positionLeft:p,positionTop:h,className:(0,lEr.default)(i,x.props.className),style:fWe({},x.props.style,{left:p,top:h})}))},t.prototype.updatePosition=function(n){if(this._lastTarget=n,!n){this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});return}var o=hWe.default.findDOMNode(this),i=(0,mEr.default)(this.props.container,(0,vEr.default)(this).body);this.setState((0,dEr.default)(this.props.placement,o,n,i,this.props.containerPadding))},t}(dWe.default.Component);i6.propTypes={target:t1.default.oneOfType([pWe.default,t1.default.func]),container:t1.default.oneOfType([pWe.default,t1.default.func]),containerPadding:t1.default.number,placement:t1.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:t1.default.bool};i6.displayName="Position";i6.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1};a6.default=i6;vWe.exports=a6.default});var SWe=M((s6,EWe)=>{"use strict";s6.__esModule=!0;var bEr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wEr=xt(),Wh=Aw(wEr),EEr=Ml(),SEr=Aw(EEr),IEr=we(),jC=Aw(IEr),TEr=pte(),_We=Aw(TEr),MEr=yWe(),xWe=Aw(MEr),CEr=iGe(),bWe=Aw(CEr);function Aw(e){return e&&e.__esModule?e:{default:e}}function AEr(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function DEr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NEr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function OEr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var wWe=function(e){OEr(t,e);function t(r,n){DEr(this,t);var o=NEr(this,e.call(this,r,n));return o.handleHidden=function(){if(o.setState({exited:!0}),o.props.onExited){var i;(i=o.props).onExited.apply(i,arguments)}},o.state={exited:!r.show},o.onHiddenListener=o.handleHidden.bind(o),o}return t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.render=function(){var n=this.props,o=n.container,i=n.containerPadding,a=n.target,u=n.placement,p=n.shouldUpdatePosition,h=n.rootClose,g=n.children,x=n.transition,b=AEr(n,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]),T=b.show||x&&!this.state.exited;if(!T)return null;var A=g;if(A=jC.default.createElement(xWe.default,{container:o,containerPadding:i,target:a,placement:u,shouldUpdatePosition:p},A),x){var L=b.onExit,P=b.onExiting,k=b.onEnter,q=b.onEntering,U=b.onEntered;A=jC.default.createElement(x,{in:b.show,appear:!0,onExit:L,onExiting:P,onExited:this.onHiddenListener,onEnter:k,onEntering:q,onEntered:U},A)}return h&&(A=jC.default.createElement(bWe.default,{onRootClose:b.onHide,event:b.rootCloseEvent},A)),jC.default.createElement(_We.default,{container:o},A)},t}(jC.default.Component);wWe.propTypes=bEr({},_We.default.propTypes,xWe.default.propTypes,{show:Wh.default.bool,rootClose:Wh.default.bool,rootCloseEvent:bWe.default.propTypes.event,onHide:function(t){var r=Wh.default.func;t.rootClose&&(r=r.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r.apply(void 0,[t].concat(o))},transition:SEr.default,onEnter:Wh.default.func,onEntering:Wh.default.func,onEntered:Wh.default.func,onExit:Wh.default.func,onExiting:Wh.default.func,onExited:Wh.default.func});s6.default=wWe;EWe.exports=s6.default});var $$e=M((gxn,Qh)=>{function ure(e,t){return Qh.exports=ure=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Qh.exports.__esModule=!0,Qh.exports.default=Qh.exports,ure(e,t)}Qh.exports=ure,Qh.exports.__esModule=!0,Qh.exports.default=Qh.exports});var cre=M((vxn,aA)=>{var M2r=$$e();function C2r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,M2r(e,t)}aA.exports=C2r,aA.exports.__esModule=!0,aA.exports.default=aA.exports});var pre=M(fre=>{"use strict";Object.defineProperty(fre,"__esModule",{value:!0});function A2r(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function D2r(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}var N2r=function(){function e(r){this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.before=null}var t=e.prototype;return t.insert=function(n){if(this.ctr%(this.isSpeedy?65e3:1)===0){var o=D2r(this),i;this.tags.length===0?i=this.before:i=this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(o,i),this.tags.push(o)}var a=this.tags[this.tags.length-1];if(this.isSpeedy){var u=A2r(a);try{var p=n.charCodeAt(1)===105&&n.charCodeAt(0)===64;u.insertRule(n,p?0:u.cssRules.length)}catch(h){}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}();fre.StyleSheet=N2r});var Y$e=M(dre=>{"use strict";Object.defineProperty(dre,"__esModule",{value:!0});function O2r(e){function t(Ye,tt,lt,je,ge){for(var We=0,Oe=0,at=0,ot=0,Pt,Mt,Dt=0,Ae=0,Lt,Wt=Lt=Pt=0,Ct=0,ce=0,qe=0,Ue=0,ht=lt.length,yt=ht-1,mt,_t="",Yt="",nt="",zr="",on;Ct<ht;){if(Mt=lt.charCodeAt(Ct),Ct===yt&&Oe+ot+at+We!==0&&(Oe!==0&&(Mt=Oe===47?10:47),ot=at=We=0,ht++,yt++),Oe+ot+at+We===0){if(Ct===yt&&(0<ce&&(_t=_t.replace(b,"")),0<_t.trim().length)){switch(Mt){case 32:case 9:case 59:case 13:case 10:break;default:_t+=lt.charAt(Ct);}Mt=59}switch(Mt){case 123:for(_t=_t.trim(),Pt=_t.charCodeAt(0),Lt=1,Ue=++Ct;Ct<ht;){switch(Mt=lt.charCodeAt(Ct)){case 123:Lt++;break;case 125:Lt--;break;case 47:switch(Mt=lt.charCodeAt(Ct+1)){case 42:case 47:e:{for(Wt=Ct+1;Wt<yt;++Wt)switch(lt.charCodeAt(Wt)){case 47:if(Mt===42&&lt.charCodeAt(Wt-1)===42&&Ct+2!==Wt){Ct=Wt+1;break e}break;case 10:if(Mt===47){Ct=Wt+1;break e}}Ct=Wt}}break;case 91:Mt++;case 40:Mt++;case 34:case 39:for(;Ct++<yt&&lt.charCodeAt(Ct)!==Mt;);}if(Lt===0)break;Ct++}switch(Lt=lt.substring(Ue,Ct),Pt===0&&(Pt=(_t=_t.replace(x,"").trim()).charCodeAt(0)),Pt){case 64:switch(0<ce&&(_t=_t.replace(b,"")),Mt=_t.charCodeAt(1),Mt){case 100:case 109:case 115:case 45:ce=tt;break;default:ce=Fe;}if(Lt=t(tt,ce,Lt,Mt,ge+1),Ue=Lt.length,0<Ne&&(ce=r(Fe,_t,qe),on=u(3,Lt,ce,tt,Ee,Te,Ue,Mt,ge,je),_t=ce.join(""),on!==void 0&&(Ue=(Lt=on.trim()).length)===0&&(Mt=0,Lt="")),0<Ue)switch(Mt){case 115:_t=_t.replace(ee,a);case 100:case 109:case 45:Lt=_t+"{"+Lt+"}";break;case 107:_t=_t.replace(q,"$1 $2"),Lt=_t+"{"+Lt+"}",Lt=Qe===1||Qe===2&&i("@"+Lt,3)?"@-webkit-"+Lt+"@"+Lt:"@"+Lt;break;default:Lt=_t+Lt,je===112&&(Lt=(Yt+=Lt,""));}else Lt="";break;default:Lt=t(tt,r(tt,_t,qe),Lt,je,ge+1);}nt+=Lt,Lt=qe=ce=Wt=Pt=0,_t="",Mt=lt.charCodeAt(++Ct);break;case 125:case 59:if(_t=(0<ce?_t.replace(b,""):_t).trim(),1<(Ue=_t.length))switch(Wt===0&&(Pt=_t.charCodeAt(0),Pt===45||96<Pt&&123>Pt)&&(Ue=(_t=_t.replace(" ",":")).length),0<Ne&&(on=u(1,_t,tt,Ye,Ee,Te,Yt.length,je,ge,je))!==void 0&&(Ue=(_t=on.trim()).length)===0&&(_t="\0\0"),Pt=_t.charCodeAt(0),Mt=_t.charCodeAt(1),Pt){case 0:break;case 64:if(Mt===105||Mt===99){zr+=_t+lt.charAt(Ct);break}default:_t.charCodeAt(Ue-1)!==58&&(Yt+=o(_t,Pt,Mt,_t.charCodeAt(2)));}qe=ce=Wt=Pt=0,_t="",Mt=lt.charCodeAt(++Ct);}}switch(Mt){case 13:case 10:Oe===47?Oe=0:1+Pt===0&&je!==107&&0<_t.length&&(ce=1,_t+="\0"),0<Ne*st&&u(0,_t,tt,Ye,Ee,Te,Yt.length,je,ge,je),Te=1,Ee++;break;case 59:case 125:if(Oe+ot+at+We===0){Te++;break}default:switch(Te++,mt=lt.charAt(Ct),Mt){case 9:case 32:if(ot+We+Oe===0)switch(Dt){case 44:case 58:case 9:case 32:mt="";break;default:Mt!==32&&(mt=" ");}break;case 0:mt="\\0";break;case 12:mt="\\f";break;case 11:mt="\\v";break;case 38:ot+Oe+We===0&&(ce=qe=1,mt="\f"+mt);break;case 108:if(ot+Oe+We+Ze===0&&0<Wt)switch(Ct-Wt){case 2:Dt===112&&lt.charCodeAt(Ct-3)===58&&(Ze=Dt);case 8:Ae===111&&(Ze=Ae);}break;case 58:ot+Oe+We===0&&(Wt=Ct);break;case 44:Oe+at+ot+We===0&&(ce=1,mt+="\r");break;case 34:case 39:Oe===0&&(ot=ot===Mt?0:ot===0?Mt:ot);break;case 91:ot+Oe+at===0&&We++;break;case 93:ot+Oe+at===0&&We--;break;case 41:ot+Oe+We===0&&at--;break;case 40:if(ot+Oe+We===0){if(Pt===0)switch(2*Dt+3*Ae){case 533:break;default:Pt=1;}at++}break;case 64:Oe+at+ot+We+Wt+Lt===0&&(Lt=1);break;case 42:case 47:if(!(0<ot+We+at))switch(Oe){case 0:switch(2*Mt+3*lt.charCodeAt(Ct+1)){case 235:Oe=47;break;case 220:Ue=Ct,Oe=42;}break;case 42:Mt===47&&Dt===42&&Ue+2!==Ct&&(lt.charCodeAt(Ue+2)===33&&(Yt+=lt.substring(Ue,Ct+1)),mt="",Oe=0);}}Oe===0&&(_t+=mt);}Ae=Dt,Dt=Mt,Ct++}if(Ue=Yt.length,0<Ue){if(ce=tt,0<Ne&&(on=u(2,Yt,ce,Ye,Ee,Te,Ue,je,ge,je),on!==void 0&&(Yt=on).length===0))return zr+Yt+nt;if(Yt=ce.join(",")+"{"+Yt+"}",Qe*Ze!==0){switch(Qe!==2||i(Yt,2)||(Ze=0),Ze){case 111:Yt=Yt.replace(H,":-moz-$1")+Yt;break;case 112:Yt=Yt.replace(U,"::-webkit-input-$1")+Yt.replace(U,"::-moz-$1")+Yt.replace(U,":-ms-input-$1")+Yt;}Ze=0}}return zr+Yt+nt}function r(Ye,tt,lt){var je=tt.trim().split(P);tt=je;var ge=je.length,We=Ye.length;switch(We){case 0:case 1:var Oe=0;for(Ye=We===0?"":Ye[0]+" ";Oe<ge;++Oe)tt[Oe]=n(Ye,tt[Oe],lt).trim();break;default:var at=Oe=0;for(tt=[];Oe<ge;++Oe)for(var ot=0;ot<We;++ot)tt[at++]=n(Ye[ot]+" ",je[Oe],lt).trim();}return tt}function n(Ye,tt,lt){var je=tt.charCodeAt(0);switch(33>je&&(je=(tt=tt.trim()).charCodeAt(0)),je){case 38:return tt.replace(k,"$1"+Ye.trim());case 58:return Ye.trim()+tt.replace(k,"$1"+Ye.trim());default:if(0<1*lt&&0<tt.indexOf("\f"))return tt.replace(k,(Ye.charCodeAt(0)===58?"":"$1")+Ye.trim());}return Ye+tt}function o(Ye,tt,lt,je){var ge=Ye+";",We=2*tt+3*lt+4*je;if(We===944){Ye=ge.indexOf(":",9)+1;var Oe=ge.substring(Ye,ge.length-1).trim();return Oe=ge.substring(0,Ye).trim()+Oe+";",Qe===1||Qe===2&&i(Oe,1)?"-webkit-"+Oe+Oe:Oe}if(Qe===0||Qe===2&&!i(ge,1))return ge;switch(We){case 1015:return ge.charCodeAt(10)===97?"-webkit-"+ge+ge:ge;case 951:return ge.charCodeAt(3)===116?"-webkit-"+ge+ge:ge;case 963:return ge.charCodeAt(5)===110?"-webkit-"+ge+ge:ge;case 1009:if(ge.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+ge+ge;case 978:return"-webkit-"+ge+"-moz-"+ge+ge;case 1019:case 983:return"-webkit-"+ge+"-moz-"+ge+"-ms-"+ge+ge;case 883:if(ge.charCodeAt(8)===45)return"-webkit-"+ge+ge;if(0<ge.indexOf("image-set(",11))return ge.replace(ke,"$1-webkit-$2")+ge;break;case 932:if(ge.charCodeAt(4)===45)switch(ge.charCodeAt(5)){case 103:return"-webkit-box-"+ge.replace("-grow","")+"-webkit-"+ge+"-ms-"+ge.replace("grow","positive")+ge;case 115:return"-webkit-"+ge+"-ms-"+ge.replace("shrink","negative")+ge;case 98:return"-webkit-"+ge+"-ms-"+ge.replace("basis","preferred-size")+ge;}return"-webkit-"+ge+"-ms-"+ge+ge;case 964:return"-webkit-"+ge+"-ms-flex-"+ge+ge;case 1023:if(ge.charCodeAt(8)!==99)break;return Oe=ge.substring(ge.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Oe+"-webkit-"+ge+"-ms-flex-pack"+Oe+ge;case 1005:return A.test(ge)?ge.replace(T,":-webkit-")+ge.replace(T,":-moz-")+ge:ge;case 1e3:switch(Oe=ge.substring(13).trim(),tt=Oe.indexOf("-")+1,Oe.charCodeAt(0)+Oe.charCodeAt(tt)){case 226:Oe=ge.replace(X,"tb");break;case 232:Oe=ge.replace(X,"tb-rl");break;case 220:Oe=ge.replace(X,"lr");break;default:return ge;}return"-webkit-"+ge+"-ms-"+Oe+ge;case 1017:if(ge.indexOf("sticky",9)===-1)break;case 975:switch(tt=(ge=Ye).length-10,Oe=(ge.charCodeAt(tt)===33?ge.substring(0,tt):ge).substring(Ye.indexOf(":",7)+1).trim(),We=Oe.charCodeAt(0)+(Oe.charCodeAt(7)|0)){case 203:if(111>Oe.charCodeAt(8))break;case 115:ge=ge.replace(Oe,"-webkit-"+Oe)+";"+ge;break;case 207:case 102:ge=ge.replace(Oe,"-webkit-"+(102<We?"inline-":"")+"box")+";"+ge.replace(Oe,"-webkit-"+Oe)+";"+ge.replace(Oe,"-ms-"+Oe+"box")+";"+ge;}return ge+";";case 938:if(ge.charCodeAt(5)===45)switch(ge.charCodeAt(6)){case 105:return Oe=ge.replace("-items",""),"-webkit-"+ge+"-webkit-box-"+Oe+"-ms-flex-"+Oe+ge;case 115:return"-webkit-"+ge+"-ms-flex-item-"+ge.replace(me,"")+ge;default:return"-webkit-"+ge+"-ms-flex-line-pack"+ge.replace("align-content","").replace(me,"")+ge;}break;case 973:case 989:if(ge.charCodeAt(3)!==45||ge.charCodeAt(4)===122)break;case 931:case 953:if(Me.test(Ye)===!0)return(Oe=Ye.substring(Ye.indexOf(":")+1)).charCodeAt(0)===115?o(Ye.replace("stretch","fill-available"),tt,lt,je).replace(":fill-available",":stretch"):ge.replace(Oe,"-webkit-"+Oe)+ge.replace(Oe,"-moz-"+Oe.replace("fill-",""))+ge;break;case 962:if(ge="-webkit-"+ge+(ge.charCodeAt(5)===102?"-ms-"+ge:"")+ge,lt+je===211&&ge.charCodeAt(13)===105&&0<ge.indexOf("transform",10))return ge.substring(0,ge.indexOf(";",27)+1).replace(L,"$1-webkit-$2")+ge;}return ge}function i(Ye,tt){var lt=Ye.indexOf(tt===1?":":"{"),je=Ye.substring(0,tt!==3?lt:10);return lt=Ye.substring(lt+1,Ye.length-1),et(tt!==2?je:je.replace(ue,"$1"),lt,tt)}function a(Ye,tt){var lt=o(tt,tt.charCodeAt(0),tt.charCodeAt(1),tt.charCodeAt(2));return lt!==tt+";"?lt.replace(ne," or ($1)").substring(4):"("+tt+")"}function u(Ye,tt,lt,je,ge,We,Oe,at,ot,Pt){for(var Mt=0,Dt=tt,Ae;Mt<Ne;++Mt)switch(Ae=ze[Mt].call(g,Ye,Dt,lt,je,ge,We,Oe,at,ot,Pt)){case void 0:case!1:case!0:case null:break;default:Dt=Ae;}if(Dt!==tt)return Dt}function p(Ye){switch(Ye){case void 0:case null:Ne=ze.length=0;break;default:if(typeof Ye=="function")ze[Ne++]=Ye;else if(typeof Ye=="object")for(var tt=0,lt=Ye.length;tt<lt;++tt)p(Ye[tt]);else st=!!Ye|0;}return p}function h(Ye){return Ye=Ye.prefix,Ye!==void 0&&(et=null,Ye?typeof Ye!="function"?Qe=1:(Qe=2,et=Ye):Qe=0),h}function g(Ye,tt){var lt=Ye;if(33>lt.charCodeAt(0)&&(lt=lt.trim()),ft=lt,lt=[ft],0<Ne){var je=u(-1,tt,lt,lt,Ee,Te,0,0,0,0);je!==void 0&&typeof je=="string"&&(tt=je)}var ge=t(Fe,lt,tt,0,0);return 0<Ne&&(je=u(-2,ge,lt,lt,Ee,Te,ge.length,0,0,0),je!==void 0&&(ge=je)),ft="",Ze=0,Te=Ee=1,ge}var x=/^\0+/g,b=/[\0\r\f]/g,T=/: */g,A=/zoo|gra/,L=/([,: ])(transform)/g,P=/,\r+?/g,k=/([\t\r\n ])*\f?&/g,q=/@(k\w+)\s*(\S*)\s*/,U=/::(place)/g,H=/:(read-only)/g,X=/[svh]\w+-[tblr]{2}/,ee=/\(\s*(.*)\s*\)/g,ne=/([\s\S]*?);/g,me=/-self|flex-/g,ue=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Me=/stretch|:\s*\w+\-(?:conte|avail)/,ke=/([^-])(image-set\()/,Te=1,Ee=1,Ze=0,Qe=1,Fe=[],ze=[],Ne=0,et=null,st=0,ft="";return g.use=p,g.set=h,e!==void 0&&h(e),g}dre.default=O2r});var Z$e=M(hre=>{"use strict";Object.defineProperty(hre,"__esModule",{value:!0});var L2r=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var o=t(n);return r.set(n,o),o}};hre.default=L2r});var vre=M(gre=>{"use strict";Object.defineProperty(gre,"__esModule",{value:!0});function P2r(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var k2r=pre(),R2r=P2r(Y$e());Z$e();var mre="/*|*/",j2r=mre+"}";function q2r(e){e&&z6.current.insert(e+"}")}var z6={current:null},z2r=function(t,r,n,o,i,a,u,p,h,g){switch(t){case 1:{switch(r.charCodeAt(0)){case 64:return z6.current.insert(r+";"),"";case 108:if(r.charCodeAt(2)===98)return"";}break}case 2:{if(p===0)return r+mre;break}case 3:switch(p){case 102:case 112:return z6.current.insert(n[0]+r),"";default:return r+(g===0?mre:"");}case-2:r.split(j2r).forEach(q2r);}},F2r=function(t){t===void 0&&(t={});var r=t.key||"css",n;t.prefix!==void 0&&(n={prefix:t.prefix});var o=new R2r(n),i={},a;{a=t.container||document.head;var u=document.querySelectorAll("style[data-emotion-"+r+"]");Array.prototype.forEach.call(u,function(b){var T=b.getAttribute("data-emotion-"+r);T.split(" ").forEach(function(A){i[A]=!0}),b.parentNode!==a&&a.appendChild(b)})}var p;if(o.use(t.stylisPlugins)(z2r),p=function(T,A,L,P){var k=A.name;if(z6.current=L,0)var q;o(T,A.styles),P&&(x.inserted[k]=!0)},0)var h,g;var x={key:r,sheet:new k2r.StyleSheet({key:r,container:a,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:i,registered:{},insert:p};return x};gre.default=F2r});var yre=M(F6=>{"use strict";Object.defineProperty(F6,"__esModule",{value:!0});var U2r=!0;function B2r(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]):n+=o+" "}),n}var V2r=function(t,r,n){var o=t.key+"-"+r.name;if((n===!1||U2r===!1&&t.compat!==void 0)&&t.registered[o]===void 0&&(t.registered[o]=r.styles),t.inserted[r.name]===void 0){var i=r;do{var a=t.insert("."+o,i,t.sheet,!0);i=i.next}while(i!==void 0)}};F6.getRegisteredStyles=B2r;F6.insertStyles=V2r});var K$e=M(_re=>{"use strict";Object.defineProperty(_re,"__esModule",{value:!0});function G2r(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16);}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}_re.default=G2r});var X$e=M(xre=>{"use strict";Object.defineProperty(xre,"__esModule",{value:!0});var H2r={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};xre.default=H2r});var J$e=M(bre=>{"use strict";Object.defineProperty(bre,"__esModule",{value:!0});function W2r(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}bre.default=W2r});var U6=M(Sre=>{"use strict";Object.defineProperty(Sre,"__esModule",{value:!0});function Ere(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var $2r=Ere(K$e()),Y2r=Ere(X$e()),Z2r=Ere(J$e()),K2r=/[A-Z]|^ms/g,X2r=/_EMO_([^_]+?)_([^]*?)_EMO_/g,rYe=function(t){return t.charCodeAt(1)===45},Q$e=function(t){return t!=null&&typeof t!="boolean"},wre=Z2r(function(e){return rYe(e)?e:e.replace(K2r,"-$&").toLowerCase()}),eYe=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(X2r,function(n,o,i){return ad={name:o,styles:i,next:ad},o});}return Y2r[t]!==1&&!rYe(t)&&typeof r=="number"&&r!==0?r+"px":r};function sA(e,t,r,n){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return ad={name:r.name,styles:r.styles,next:ad},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)ad={name:o.name,styles:o.styles,next:ad},o=o.next;var i=r.styles+";";return i}return J2r(e,t,r)}case"function":{if(e!==void 0){var a=ad,u=r(e);return ad=a,sA(e,t,u,n)}break}case"string":if(0)var p,h;break;}if(t==null)return r;var g=t[r];return g!==void 0&&!n?g:r}function J2r(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=sA(e,t,r[o],!1);else for(var i in r){var a=r[i];if(typeof a!="object")t!=null&&t[a]!==void 0?n+=i+"{"+t[a]+"}":Q$e(a)&&(n+=wre(i)+":"+eYe(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var u=0;u<a.length;u++)Q$e(a[u])&&(n+=wre(i)+":"+eYe(i,a[u])+";");else{var p=sA(e,t,a,!1);switch(i){case"animation":case"animationName":{n+=wre(i)+":"+p+";";break}default:n+=i+"{"+p+"}";}}}return n}var tYe=/label:\s*([^\s;\n{]+)\s*;/g,ad,Q2r=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,i="";ad=void 0;var a=t[0];a==null||a.raw===void 0?(o=!1,i+=sA(n,r,a,!1)):i+=a[0];for(var u=1;u<t.length;u++)i+=sA(n,r,t[u],i.charCodeAt(i.length-1)===46),o&&(i+=a[u]);var p;tYe.lastIndex=0;for(var h="",g;(g=tYe.exec(i))!==null;)h+="-"+g[1];var x=$2r(i)+h;return{name:x,styles:i,next:ad}};Sre.serializeStyles=Q2r});var lYe=M(c1=>{"use strict";cre();var em=we(),eIr=vre(),nYe=yre(),tIr=U6();function rIr(e){return e&&e.__esModule?e:{default:e}}var nIr=rIr(eIr),Tre=Object.prototype.hasOwnProperty,iYe=em.createContext(typeof HTMLElement!="undefined"?nIr.default():null),aYe=em.createContext({}),oIr=iYe.Provider,sYe=function(t){var r=function(o,i){return em.createElement(iYe.Consumer,null,function(a){return t(o,a,i)})};return em.forwardRef(r)},Ire="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",iIr=function(t,r){var n={};for(var o in r)Tre.call(r,o)&&(n[o]=r[o]);if(n[Ire]=t,0){var i;if(i.stack)var a}return n},aIr=function(){return null},oYe=function(t,r,n,o){var i=n===null?r.css:r.css(n);typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=r[Ire],u=[i],p="";typeof r.className=="string"?p=nYe.getRegisteredStyles(t.registered,u,r.className):r.className!=null&&(p=r.className+" ");var h=tIr.serializeStyles(u);if(0)var g;var x=nYe.insertStyles(t,h,typeof a=="string");p+=t.key+"-"+h.name;var b={};for(var T in r)Tre.call(r,T)&&T!=="css"&&T!==Ire&&(b[T]=r[T]);b.ref=o,b.className=p;var A=em.createElement(a,b),L=em.createElement(aIr,null);return em.createElement(em.Fragment,null,L,A)},sIr=sYe(function(e,t,r){return typeof e.css=="function"?em.createElement(aYe.Consumer,null,function(n){return oYe(t,e,n,r)}):oYe(t,e,null,r)});c1.CacheProvider=oIr;c1.Emotion=sIr;c1.ThemeContext=aYe;c1.createEmotionProps=iIr;c1.hasOwnProperty=Tre;c1.withEmotionCache=sYe});var uYe=M(Mre=>{"use strict";Object.defineProperty(Mre,"__esModule",{value:!0});var lIr=U6();function uIr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return lIr.serializeStyles(t)}Mre.default=uIr});var hYe=M(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var cIr=cre(),sd=we();vre();var ld=lYe(),Are=yre(),Cre=U6(),fIr=pre(),pIr=uYe();function fYe(e){return e&&e.__esModule?e:{default:e}}var dIr=fYe(cIr),pYe=fYe(pIr),dYe=function(t,r){var n=arguments;if(r==null||!ld.hasOwnProperty.call(r,"css"))return sd.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=ld.Emotion,i[1]=ld.createEmotionProps(t,r);for(var a=2;a<o;a++)i[a]=n[a];return sd.createElement.apply(null,i)},hIr=ld.withEmotionCache(function(e,t){var r=e.styles;if(typeof r=="function")return sd.createElement(ld.ThemeContext.Consumer,null,function(o){var i=Cre.serializeStyles([r(o)]);return sd.createElement(cYe,{serialized:i,cache:t})});var n=Cre.serializeStyles([r]);return sd.createElement(cYe,{serialized:n,cache:t})}),cYe=function(e){dIr.default(t,e);function t(n,o,i){return e.call(this,n,o,i)||this}var r=t.prototype;return r.componentDidMount=function(){this.sheet=new fIr.StyleSheet({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var o=document.querySelector("style[data-emotion-"+this.props.cache.key+"=\""+this.props.serialized.name+"\"]");o!==null&&this.sheet.tags.push(o),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},r.componentDidUpdate=function(o){o.serialized.name!==this.props.serialized.name&&this.insertStyles()},r.insertStyles=function(){if(this.props.serialized.next!==void 0&&Are.insertStyles(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var o=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=o,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},r.componentWillUnmount=function(){this.sheet.flush()},r.render=function(){return null},t}(sd.Component),mIr=function(){var t=pYe.default.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},gIr=function e(t){for(var r=t.length,n=0,o="";n<r;n++){var i=t[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var u in i)i[u]&&u&&(a&&(a+=" "),a+=u)}break}default:a=i;}a&&(o&&(o+=" "),o+=a)}}return o};function vIr(e,t,r){var n=[],o=Are.getRegisteredStyles(e,n,r);return n.length<2?r:o+t(n)}var yIr=function(){return null},_Ir=ld.withEmotionCache(function(e,t){return sd.createElement(ld.ThemeContext.Consumer,null,function(r){var n=!1,o=function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var T=Cre.serializeStyles(x,t.registered);return Are.insertStyles(t,T,!1),t.key+"-"+T.name},i=function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];return vIr(t.registered,o,gIr(x))},a={css:o,cx:i,theme:r},u=e.children(a);n=!0;var p=sd.createElement(yIr,null);return sd.createElement(sd.Fragment,null,p,u)})});Jf.CacheProvider=ld.CacheProvider;Jf.ThemeContext=ld.ThemeContext;Jf.withEmotionCache=ld.withEmotionCache;Object.defineProperty(Jf,"css",{enumerable:!0,get:function(){return pYe.default}});Jf.ClassNames=_Ir;Jf.Global=hIr;Jf.createElement=dYe;Jf.jsx=dYe;Jf.keyframes=mIr});var Dre=M(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default=xYe;Qf.skeletonStyles=Qf.skeletonKeyframes=Qf.defaultHighlightColor=Qf.defaultBaseColor=void 0;var Dxn=xIr(we()),Vw=hYe();function xIr(e){return e&&e.__esModule?e:{default:e}}function mYe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function bIr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mYe(r,!0).forEach(function(n){wIr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mYe(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wIr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function gYe(){var e=EIr([`
  0% {
    background-position: -200px 0;
  }
  `,`
  100% {
    background-position: calc(200px + 100%) 0;
  }
`]);return gYe=function(){return e},e}function EIr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var B6="#eee";Qf.defaultBaseColor=B6;var vYe="#f5f5f5";Qf.defaultHighlightColor=vYe;var yYe=function(t,r){return(0,Vw.keyframes)(gYe(),r>0?"".concat(Math.floor(1/(t+r)*t*100),`% {
    background-position: calc(200px + 100%) 0;
  }`):void 0)};Qf.skeletonKeyframes=yYe;var _Ye=(0,Vw.css)("background-color:",B6,";background-image:linear-gradient( 90deg,",B6,",",vYe,",",B6," );background-size:200px 100%;background-repeat:no-repeat;border-radius:4px;display:inline-block;line-height:1;width:100%;;label:skeletonStyles;");Qf.skeletonStyles=_Ye;function xYe(e){for(var t=e.count,r=e.duration,n=e.width,o=e.wrapper,i=e.height,a=e.circle,u=e.delay,p=e.style,h=e.className,g=[],x=0;x<t;x++){var b={};n!==null&&(b.width=n),i!==null&&(b.height=i),n!==null&&i!==null&&a&&(b.borderRadius="50%");var T="react-loading-skeleton";h&&(T+=" "+h),g.push((0,Vw.jsx)("span",{key:x,className:T,css:(0,Vw.css)(_Ye," animation:",yYe(r,u)," ",r+u,"s ease-in-out infinite;label:Skeleton;"),style:bIr({},p,{},b)},"\u200C"))}return(0,Vw.jsx)("span",null,o?g.map(function(A,L){return(0,Vw.jsx)(o,{key:L},A,"\u200C")}):g)}xYe.defaultProps={count:1,duration:1.2,width:null,wrapper:null,height:null,circle:!1,delay:0}});var VZe=M(To=>{"use strict";var lne=Symbol.for("react.element"),une=Symbol.for("react.portal"),dq=Symbol.for("react.fragment"),hq=Symbol.for("react.strict_mode"),mq=Symbol.for("react.profiler"),gq=Symbol.for("react.provider"),vq=Symbol.for("react.context"),XIr=Symbol.for("react.server_context"),yq=Symbol.for("react.forward_ref"),_q=Symbol.for("react.suspense"),xq=Symbol.for("react.suspense_list"),bq=Symbol.for("react.memo"),wq=Symbol.for("react.lazy"),JIr=Symbol.for("react.offscreen"),BZe;BZe=Symbol.for("react.module.reference");function Jc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case lne:switch(e=e.type,e){case dq:case mq:case hq:case _q:case xq:return e;default:switch(e=e&&e.$$typeof,e){case XIr:case vq:case yq:case wq:case bq:case gq:return e;default:return t;}}case une:return t;}}}To.ContextConsumer=vq;To.ContextProvider=gq;To.Element=lne;To.ForwardRef=yq;To.Fragment=dq;To.Lazy=wq;To.Memo=bq;To.Portal=une;To.Profiler=mq;To.StrictMode=hq;To.Suspense=_q;To.SuspenseList=xq;To.isAsyncMode=function(){return!1};To.isConcurrentMode=function(){return!1};To.isContextConsumer=function(e){return Jc(e)===vq};To.isContextProvider=function(e){return Jc(e)===gq};To.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===lne};To.isForwardRef=function(e){return Jc(e)===yq};To.isFragment=function(e){return Jc(e)===dq};To.isLazy=function(e){return Jc(e)===wq};To.isMemo=function(e){return Jc(e)===bq};To.isPortal=function(e){return Jc(e)===une};To.isProfiler=function(e){return Jc(e)===mq};To.isStrictMode=function(e){return Jc(e)===hq};To.isSuspense=function(e){return Jc(e)===_q};To.isSuspenseList=function(e){return Jc(e)===xq};To.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===dq||e===mq||e===hq||e===_q||e===xq||e===JIr||typeof e=="object"&&e!==null&&(e.$$typeof===wq||e.$$typeof===bq||e.$$typeof===gq||e.$$typeof===vq||e.$$typeof===yq||e.$$typeof===BZe||e.getModuleId!==void 0)};To.typeOf=Jc});var HZe=M((LIn,GZe)=>{"use strict";GZe.exports=VZe()});var kJe=M(Wo=>{"use strict";var pz=60103,dz=60106,FA=60107,UA=60108,BA=60114,VA=60109,GA=60110,HA=60112,WA=60113,Qne=60120,$A=60115,YA=60116,DJe=60121,NJe=60122,OJe=60117,LJe=60129,PJe=60131;typeof Symbol=="function"&&Symbol.for&&(Ya=Symbol.for,pz=Ya("react.element"),dz=Ya("react.portal"),FA=Ya("react.fragment"),UA=Ya("react.strict_mode"),BA=Ya("react.profiler"),VA=Ya("react.provider"),GA=Ya("react.context"),HA=Ya("react.forward_ref"),WA=Ya("react.suspense"),Qne=Ya("react.suspense_list"),$A=Ya("react.memo"),YA=Ya("react.lazy"),DJe=Ya("react.block"),NJe=Ya("react.server.block"),OJe=Ya("react.fundamental"),LJe=Ya("react.debug_trace_mode"),PJe=Ya("react.legacy_hidden"));var Ya;function op(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case pz:switch(e=e.type,e){case FA:case BA:case UA:case WA:case Qne:return e;default:switch(e=e&&e.$$typeof,e){case GA:case HA:case YA:case $A:case VA:return e;default:return t;}}case dz:return t;}}}var IMr=VA,TMr=pz,MMr=HA,CMr=FA,AMr=YA,DMr=$A,NMr=dz,OMr=BA,LMr=UA,PMr=WA;Wo.ContextConsumer=GA;Wo.ContextProvider=IMr;Wo.Element=TMr;Wo.ForwardRef=MMr;Wo.Fragment=CMr;Wo.Lazy=AMr;Wo.Memo=DMr;Wo.Portal=NMr;Wo.Profiler=OMr;Wo.StrictMode=LMr;Wo.Suspense=PMr;Wo.isAsyncMode=function(){return!1};Wo.isConcurrentMode=function(){return!1};Wo.isContextConsumer=function(e){return op(e)===GA};Wo.isContextProvider=function(e){return op(e)===VA};Wo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===pz};Wo.isForwardRef=function(e){return op(e)===HA};Wo.isFragment=function(e){return op(e)===FA};Wo.isLazy=function(e){return op(e)===YA};Wo.isMemo=function(e){return op(e)===$A};Wo.isPortal=function(e){return op(e)===dz};Wo.isProfiler=function(e){return op(e)===BA};Wo.isStrictMode=function(e){return op(e)===UA};Wo.isSuspense=function(e){return op(e)===WA};Wo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===FA||e===BA||e===LJe||e===UA||e===WA||e===Qne||e===PJe||typeof e=="object"&&e!==null&&(e.$$typeof===YA||e.$$typeof===$A||e.$$typeof===VA||e.$$typeof===GA||e.$$typeof===HA||e.$$typeof===OJe||e.$$typeof===DJe||e[0]===NJe)};Wo.typeOf=op});var jJe=M((gOn,RJe)=>{"use strict";RJe.exports=kJe()});var dnt=M((DUn,l8)=>{l8.exports.RADIUS=6378137;l8.exports.FLATTENING=1/298.257223563;l8.exports.POLAR_RADIUS=6356752.3142});var vnt=M((NUn,eae)=>{var hnt=dnt();eae.exports.geometry=gnt;eae.exports.ring=Qie;function gnt(e){var t=0,r;switch(e.type){case"Polygon":return mnt(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=mnt(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)t+=gnt(e.geometries[r]);return t;}}function mnt(e){var t=0;if(e&&e.length>0){t+=Math.abs(Qie(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(Qie(e[r]))}return t}function Qie(e){var t,r,n,o,i,a,u,p=0,h=e.length;if(h>2){for(u=0;u<h;u++)u===h-2?(o=h-2,i=h-1,a=0):u===h-1?(o=h-1,i=0,a=1):(o=u,i=u+1,a=u+2),t=e[o],r=e[i],n=e[a],p+=(Jie(n[0])-Jie(t[0]))*Math.sin(Jie(r[1]));p=p*hnt.RADIUS*hnt.RADIUS/2}return p}function Jie(e){return e*Math.PI/180}});var Hnt=M((MVn,Gnt)=>{Gnt.exports=sNr;var aNr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function sNr(e){if(!e||!e.type)return null;var t=aNr[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}});var b5r={};n2(b5r,{SettingsProvider:()=>_5r,renderApp:()=>x5r});var Tat=Z(we(),1),Mat=Z(Si(),1),XQn=Z(_X(),1);var wm=Z(we(),1);var Gs=Z(we()),yje=Z(Si());function wsr(e){return!!e&&typeof e.then=="function"}var Vi=wsr;function Esr(e,t){if(e!=null)return e;throw new Error(t!=null?t:"Got unexpected null or undefined")}var vo=Esr,R3=class{},Ssr=new R3,FX={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(e){return e.state===this.state&&e.contents===this.contents},map(e){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let r=e(this.contents);return Vi(r)?Nb(r.then(n=>({__value:n}))):UX(r)}catch(r){return Vi(r)?Nb(r.next(()=>e(this.contents))):BX(r)}if(this.state==="loading")return Nb(this.contents.then(r=>({__value:e(r.__value)})).catch(r=>{if(Vi(r))return r.then(()=>e(this.contents));throw r}));throw new Error("Invalid Loadable state")}};function UX(e){return Object.freeze(Ft(Se({state:"hasValue",contents:e},FX),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function BX(e){return Object.freeze(Ft(Se({state:"hasError",contents:e},FX),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function Nb(e){return Object.freeze(Ft(Se({state:"loading",contents:e},FX),{getValue(){throw this.contents.then(({__value:t})=>t)},toPromise(){return this.contents.then(({__value:t})=>t)},promiseMaybe(){return this.contents.then(({__value:t})=>t)},promiseOrThrow(){return this.contents.then(({__value:t})=>t)}}))}function Isr(){return Nb(new Promise(()=>{}))}function Tsr(e){return e.every(t=>t.state==="hasValue")?UX(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?BX(vo(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Nb(Promise.all(e.map(t=>t.contents)).then(t=>({__value:t})))}var xM={loadableWithValue:UX,loadableWithError:BX,loadableWithPromise:Nb,loadableLoading:Isr,loadableAll:Tsr,Canceled:R3,CANCELED:Ssr},xX,_je=(xX=Gs.default.useMutableSource)!==null&&xX!==void 0?xX:Gs.default.unstable_useMutableSource;function Msr(){return _je&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var xje={mutableSourceExists:Msr,useMutableSource:_je},{mutableSourceExists:Csr}=xje,VX=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function GX(e){var t;return e==="recoil_early_rendering_2021"&&!Csr()?!1:(t=VX.get(e))!==null&&t!==void 0?t:!1}GX.setPass=e=>{VX.set(e,!0)};GX.setFail=e=>{VX.set(e,!1)};var Po=GX;function Asr(e,t,{error:r}={}){return null}var Dsr=Asr,Hp=Dsr;function Nsr(e,t){let r=new Set(e);return r.add(t),r}function Osr(e,t){let r=new Set(e);return r.delete(t),r}function Lsr(e,t,r){let n=new Map(e);return n.set(t,r),n}function Psr(e,t,r){let n=new Map(e);return n.set(t,r(n.get(t))),n}function ksr(e,t){let r=new Map(e);return r.delete(t),r}function Rsr(e,t){let r=new Map(e);return t.forEach(n=>r.delete(n)),r}var bje={setByAddingToSet:Nsr,setByDeletingFromSet:Osr,mapBySettingInMap:Lsr,mapByUpdatingInMap:Psr,mapByDeletingFromMap:ksr,mapByDeletingMultipleFromMap:Rsr};function*jsr(e,t){let r=0;for(let n of e)t(n,r++)&&(yield n)}var wje=jsr;function qsr(e,t){return function*(){let r=0;for(let n of e)yield t(n,r++)}()}var Eje=qsr;function zsr(e,...t){}var Fsr=zsr,HX=Fsr;function $n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vM=class{constructor(t){$n(this,"key",void 0),this.key=t}},j3=class extends vM{},q3=class extends vM{};function Usr(e){return e instanceof j3||e instanceof q3}var Z3={AbstractRecoilValue:vM,RecoilState:j3,RecoilValueReadOnly:q3,isRecoilValue:Usr},Bsr=Z3.AbstractRecoilValue,Vsr=Z3.RecoilState,Gsr=Z3.RecoilValueReadOnly,Hsr=Z3.isRecoilValue,ov=Object.freeze({__proto__:null,AbstractRecoilValue:Bsr,RecoilState:Vsr,RecoilValueReadOnly:Gsr,isRecoilValue:Hsr}),z3=class{},Wsr=new z3,SX=class extends Error{constructor(t){super(`Tried to set the value of Recoil selector ${t} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},L0=new Map,WX=new Map;function $sr(e){return Eje(e,t=>vo(WX.get(t)))}function Ysr(e){if(L0.has(e.key)){let r=`Duplicate atom key "${e.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(r)}L0.set(e.key,e);let t=e.set==null?new ov.RecoilValueReadOnly(e.key):new ov.RecoilState(e.key);return WX.set(e.key,t),t}var F3=class extends Error{};function Zsr(e){let t=L0.get(e);if(t==null)throw new F3(`Missing definition for RecoilValue: "${e}""`);return t}function Ksr(e){return L0.get(e)}var U3=new Map;function Xsr(e){var t;if(!Po("recoil_memory_managament_2020"))return;let r=L0.get(e);if(!(r==null||(t=r.shouldDeleteConfigOnRelease)===null||t===void 0)&&t.call(r)){var n;L0.delete(e),(n=Sje(e))===null||n===void 0||n(),U3.delete(e)}}function Jsr(e,t){Po("recoil_memory_managament_2020")&&(t===void 0?U3.delete(e):U3.set(e,t))}function Sje(e){return U3.get(e)}var kc={nodes:L0,recoilValues:WX,registerNode:Ysr,getNode:Zsr,getNodeMaybe:Ksr,deleteNodeConfigIfPossible:Xsr,setConfigDeletionHandler:Jsr,getConfigDeletionHandler:Sje,recoilValuesForKeys:$sr,NodeMissingError:F3,DefaultValue:z3,DEFAULT_VALUE:Wsr,RecoilValueNotReady:SX},B3=class{};function Qsr(){return new B3}var K3={RetentionZone:B3,retentionZone:Qsr},{setByAddingToSet:elr}=bje,{getNode:X3,getNodeMaybe:tlr,recoilValuesForKeys:tje}=kc,{RetentionZone:rje}=K3,rlr=Object.freeze(new Set),IX=class extends Error{};function nlr(e,t,r){if(!Po("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=e.getState().retention;function o(i){let a=n.get(i);a||n.set(i,a=new Set),a.add(t)}if(r instanceof rje)o(r);else if(Array.isArray(r))for(let i of r)o(i);return()=>{if(!Po("recoil_memory_managament_2020"))return;let i=e.getState().retention.nodesRetainedByZone;function a(u){let p=i.get(u);p&&p.delete(t),p&&p.size===0&&i.delete(u)}if(r instanceof rje)a(r);else if(Array.isArray(r))for(let u of r)a(u)}}function $X(e,t,r,n){let o=e.getState();if(o.nodeCleanupFunctions.has(r))return;let i=X3(r),a=nlr(e,r,i.retainedBy),u=i.init(e,t,n);o.nodeCleanupFunctions.set(r,()=>{u(),a()})}function olr(e,t){var r;let n=e.getState();(r=n.nodeCleanupFunctions.get(t))===null||r===void 0||r(),n.nodeCleanupFunctions.delete(t)}function ilr(e,t,r){return $X(e,t,r,"get"),X3(r).get(e,t)}function Ije(e,t,r){return X3(r).peek(e,t)}function alr(e,t,r){var n;let o=tlr(t);return o==null||(n=o.invalidate)===null||n===void 0||n.call(o,e),Ft(Se({},e),{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,r),dirtyAtoms:elr(e.dirtyAtoms,t)})}function slr(e,t,r,n){let o=X3(r);if(o.set==null)throw new IX(`Attempt to set read-only RecoilValue: ${r}`);let i=o.set;return $X(e,t,r,"set"),i(e,t,n)}function llr(e,t,r){var n,o,i;let a=e.getState(),u=e.getGraph(t.version),p=a.knownAtoms.has(r)?"atom":a.knownSelectors.has(r)?"selector":void 0,h=wje(Tje(e,t,new Set([r])),g=>g!==r);return{loadable:Ije(e,t,r),isActive:a.knownAtoms.has(r)||a.knownSelectors.has(r),isSet:p==="selector"?!1:t.atomValues.has(r),isModified:t.dirtyAtoms.has(r),type:p,deps:tje((n=u.nodeDeps.get(r))!==null&&n!==void 0?n:[]),subscribers:{nodes:tje(h),components:Eje((o=(i=a.nodeToComponentSubscriptions.get(r))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:[],([g])=>({name:g}))}}}function Tje(e,t,r){let n=new Set,o=Array.from(r),i=e.getGraph(t.version);for(let u=o.pop();u;u=o.pop()){var a;n.add(u);let p=(a=i.nodeToNodeSubscriptions.get(u))!==null&&a!==void 0?a:rlr;for(let h of p)n.has(h)||o.push(h)}return n}var kb={getNodeLoadable:ilr,peekNodeLoadable:Ije,setNodeValue:slr,cleanUpNode:olr,setUnvalidatedAtomValue_DEPRECATED:alr,peekNodeInfo:llr,getDownstreamNodes:Tje,initializeNodeIfNewToStore:$X},{CANCELED:ulr}=xM,{getDownstreamNodes:clr,getNodeLoadable:Mje,setNodeValue:flr}=kb,{getNodeMaybe:Cje}=kc,{DefaultValue:YX,RecoilValueNotReady:plr}=kc,{AbstractRecoilValue:dlr,RecoilState:hlr,RecoilValueReadOnly:mlr,isRecoilValue:glr}=ov;function vlr(e,{key:t},r=e.getState().currentTree){var n,o;let i=e.getState();r.version===i.currentTree.version||r.version===((n=i.nextTree)===null||n===void 0?void 0:n.version)||r.version===((o=i.previousTree)===null||o===void 0?void 0:o.version)||Hp("Tried to read from a discarded tree");let a=Mje(e,r,t);return a.state==="loading"&&a.contents.catch(()=>ulr),a}function ylr(e,t){let r=e.clone();return t.forEach((n,o)=>{n.state==="hasValue"&&n.contents instanceof YX?r.delete(o):r.set(o,n)}),r}function _lr(e,t,{key:r},n){if(typeof n=="function"){let o=Mje(e,t,r);if(o.state==="loading")throw new plr(r);if(o.state==="hasError")throw o.contents;return n(o.contents)}else return n}function xlr(e,t,r){if(r.type==="set"){let{recoilValue:o,valueOrUpdater:i}=r,a=_lr(e,t,o,i),u=flr(e,t,o.key,a);for(let[p,h]of u.entries())TX(t,p,h)}else if(r.type==="setLoadable"){let{recoilValue:{key:o},loadable:i}=r;TX(t,o,i)}else if(r.type==="markModified"){let{recoilValue:{key:o}}=r;t.dirtyAtoms.add(o)}else if(r.type==="setUnvalidated"){var n;let{recoilValue:{key:o},unvalidatedValue:i}=r,a=Cje(o);a==null||(n=a.invalidate)===null||n===void 0||n.call(a,t),t.atomValues.delete(o),t.nonvalidatedAtoms.set(o,i),t.dirtyAtoms.add(o)}else Hp(`Unknown action ${r.type}`)}function TX(e,t,r){r.state==="hasValue"&&r.contents instanceof YX?e.atomValues.delete(t):e.atomValues.set(t,r),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function Aje(e,t){e.replaceState(r=>{let n=Dje(r);for(let o of t)xlr(e,n,o);return MX(e,n),n})}function J3(e,t){if(mM.length){let r=mM[mM.length-1],n=r.get(e);n||r.set(e,n=[]),n.push(t)}else Aje(e,[t])}var mM=[];function blr(){let e=new Map;return mM.push(e),()=>{for(let[r,n]of e)Aje(r,n);mM.pop()!==e&&Hp("Incorrect order of batch popping")}}function Dje(e){return Ft(Se({},e),{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function MX(e,t){let r=clr(e,t,t.dirtyAtoms);for(let i of r){var n,o;(n=Cje(i))===null||n===void 0||(o=n.invalidate)===null||o===void 0||o.call(n,t)}}function Nje(e,t,r){J3(e,{type:"set",recoilValue:t,valueOrUpdater:r})}function wlr(e,t,r){if(r instanceof YX)return Nje(e,t,r);J3(e,{type:"setLoadable",recoilValue:t,loadable:r})}function Elr(e,t){J3(e,{type:"markModified",recoilValue:t})}function Slr(e,t,r){J3(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:r})}var Ilr=0;function Tlr(e,{key:t},r,n=null){let o=Ilr++,i=e.getState();if(i.nodeToComponentSubscriptions.has(t)||i.nodeToComponentSubscriptions.set(t,new Map),vo(i.nodeToComponentSubscriptions.get(t)).set(o,[n!=null?n:"<not captured>",r]),Po("recoil_early_rendering_2021")){let a=e.getState().nextTree;a&&a.dirtyAtoms.has(t)&&r(a)}return{release:()=>{let a=e.getState(),u=a.nodeToComponentSubscriptions.get(t);if(u===void 0||!u.has(o)){Hp(`Subscription missing at release time for atom ${t}. This is a bug in Recoil.`);return}u.delete(o),u.size===0&&a.nodeToComponentSubscriptions.delete(t)}}}var P0={RecoilValueReadOnly:mlr,AbstractRecoilValue:dlr,RecoilState:hlr,getRecoilValueAsLoadable:vlr,setRecoilValue:Nje,setRecoilValueLoadable:wlr,markRecoilValueModified:Elr,setUnvalidatedRecoilValue:Slr,subscribeToRecoilValue:Tlr,isRecoilValue:glr,applyAtomValueWrites:ylr,batchStart:blr,writeLoadableToTreeState:TX,invalidateDownstreams:MX,copyTreeState:Dje,invalidateDownstreams_FOR_TESTING:MX},{unstable_batchedUpdates:Mlr}=yje.default,Clr={unstable_batchedUpdates:Mlr},{unstable_batchedUpdates:Alr}=Clr,Dlr={unstable_batchedUpdates:Alr},{batchStart:Nlr}=P0,{unstable_batchedUpdates:Olr}=Dlr,ZX=Olr,Llr=e=>{ZX=e},Plr=()=>ZX,klr=e=>{ZX(()=>{let t=()=>{};try{t=Nlr(),e()}finally{t()}})},KX={getBatcher:Plr,setBatcher:Llr,batchUpdates:klr};function Rlr(e,t){t()}var jlr={enqueueExecution:Rlr};function qlr(e,...t){let r=new Set;e:for(let n of e){for(let o of t)if(o.has(n))continue e;r.add(n)}return r}var V3=qlr;function zlr(e,t){let r=new Map;return e.forEach((n,o)=>{r.set(o,t(n,o))}),r}var G3=zlr;function Flr(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function Ulr(e){return{nodeDeps:G3(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:G3(e.nodeToNodeSubscriptions,t=>new Set(t))}}function bX(e,t,r){let{nodeDeps:n,nodeToNodeSubscriptions:o}=t;e.forEach((i,a)=>{let u=n.get(a);if(u&&r&&u!==r.nodeDeps.get(a))return;n.set(a,new Set(i)),(u==null?i:V3(i,u)).forEach(h=>{o.has(h)||o.set(h,new Set),vo(o.get(h)).add(a)}),u&&V3(u,i).forEach(g=>{if(!o.has(g))return;let x=vo(o.get(g));x.delete(a),x.size===0&&o.delete(g)})})}function Blr(e,t,r){var n,o,i,a;let u=t.getState();r===u.currentTree.version||r===((n=u.nextTree)===null||n===void 0?void 0:n.version)||r===((o=u.previousTree)===null||o===void 0?void 0:o.version)||Hp("Tried to save dependencies to a discarded tree");let p=t.getGraph(r);if(bX(e,p),r===((i=u.previousTree)===null||i===void 0?void 0:i.version)){let g=t.getGraph(u.currentTree.version);bX(e,g,p)}if(r===((a=u.previousTree)===null||a===void 0?void 0:a.version)||r===u.currentTree.version){var h;let g=(h=u.nextTree)===null||h===void 0?void 0:h.version;if(g!==void 0){let x=t.getGraph(g);bX(e,x,p)}}}function Vlr(e,t){e.forEach((r,n)=>{t.has(n)||t.set(n,new Set);let o=vo(t.get(n));r.forEach(i=>o.add(i))})}function Glr(e,t,r){r.has(e)||r.set(e,new Set),vo(r.get(e)).add(t)}var bM={addToDependencyMap:Glr,cloneGraph:Ulr,graph:Flr,mergeDepsIntoDependencyMap:Vlr,saveDependencyMapToStore:Blr};function Hlr(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Wlr=Hlr(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Le){return typeof Le}:function(Le){return Le&&typeof Symbol=="function"&&Le.constructor===Symbol&&Le!==Symbol.prototype?"symbol":typeof Le},r={},n=5,o=Math.pow(2,n),i=o-1,a=o/2,u=o/4,p={},h=function(Ve){return function(){return Ve}},g=r.hash=function(Le){var Ve=typeof Le=="undefined"?"undefined":t(Le);if(Ve==="number")return Le;Ve!=="string"&&(Le+="");for(var wt=0,Zt=0,Ht=Le.length;Zt<Ht;++Zt){var ae=Le.charCodeAt(Zt);wt=(wt<<5)-wt+ae|0}return wt},x=function(Ve){return Ve-=Ve>>1&1431655765,Ve=(Ve&858993459)+(Ve>>2&858993459),Ve=Ve+(Ve>>4)&252645135,Ve+=Ve>>8,Ve+=Ve>>16,Ve&127},b=function(Ve,wt){return wt>>>Ve&i},T=function(Ve){return 1<<Ve},A=function(Ve,wt){return x(Ve&wt-1)},L=function(Ve,wt,Zt,Ht){var ae=Ht;if(!Ve){var $=Ht.length;ae=new Array($);for(var W=0;W<$;++W)ae[W]=Ht[W]}return ae[wt]=Zt,ae},P=function(Ve,wt,Zt){var Ht=Zt.length-1,ae=0,$=0,W=Zt;if(Ve)ae=$=wt;else for(W=new Array(Ht);ae<wt;)W[$++]=Zt[ae++];for(++ae;ae<=Ht;)W[$++]=Zt[ae++];return Ve&&(W.length=Ht),W},k=function(Ve,wt,Zt,Ht){var ae=Ht.length;if(Ve){for(var $=ae;$>=wt;)Ht[$--]=Ht[$];return Ht[wt]=Zt,Ht}for(var W=0,J=0,se=new Array(ae+1);W<wt;)se[J++]=Ht[W++];for(se[wt]=Zt;W<ae;)se[++J]=Ht[W++];return se},q=1,U=2,H=3,X=4,ee={__hamt_isEmpty:!0},ne=function(Ve){return Ve===ee||Ve&&Ve.__hamt_isEmpty},me=function(Ve,wt,Zt,Ht){return{type:q,edit:Ve,hash:wt,key:Zt,value:Ht,_modify:Ne}},ue=function(Ve,wt,Zt){return{type:U,edit:Ve,hash:wt,children:Zt,_modify:et}},Me=function(Ve,wt,Zt){return{type:H,edit:Ve,mask:wt,children:Zt,_modify:st}},ke=function(Ve,wt,Zt){return{type:X,edit:Ve,size:wt,children:Zt,_modify:ft}},Te=function(Ve){return Ve===ee||Ve.type===q||Ve.type===U},Ee=function(Ve,wt,Zt,Ht,ae){for(var $=[],W=Ht,J=0,se=0;W;++se)W&1&&($[se]=ae[J++]),W>>>=1;return $[wt]=Zt,ke(Ve,J+1,$)},Ze=function(Ve,wt,Zt,Ht){for(var ae=new Array(wt-1),$=0,W=0,J=0,se=Ht.length;J<se;++J)if(J!==Zt){var be=Ht[J];be&&!ne(be)&&(ae[$++]=be,W|=1<<J)}return Me(Ve,W,ae)},Qe=function Le(Ve,wt,Zt,Ht,ae,$){if(Zt===ae)return ue(Ve,Zt,[$,Ht]);var W=b(wt,Zt),J=b(wt,ae);return Me(Ve,T(W)|T(J),W===J?[Le(Ve,wt+n,Zt,Ht,ae,$)]:W<J?[Ht,$]:[$,Ht])},Fe=function(Ve,wt,Zt,Ht,ae,$,W,J){for(var se=ae.length,be=0;be<se;++be){var De=ae[be];if(Zt(W,De.key)){var Re=De.value,_e=$(Re);return _e===Re?ae:_e===p?(--J.value,P(Ve,be,ae)):L(Ve,be,me(wt,Ht,W,_e),ae)}}var Je=$();return Je===p?ae:(++J.value,L(Ve,se,me(wt,Ht,W,Je),ae))},ze=function(Ve,wt){return Ve===wt.edit},Ne=function(Ve,wt,Zt,Ht,ae,$,W){if(wt($,this.key)){var J=Ht(this.value);return J===this.value?this:J===p?(--W.value,ee):ze(Ve,this)?(this.value=J,this):me(Ve,ae,$,J)}var se=Ht();return se===p?this:(++W.value,Qe(Ve,Zt,this.hash,this,ae,me(Ve,ae,$,se)))},et=function(Ve,wt,Zt,Ht,ae,$,W){if(ae===this.hash){var J=ze(Ve,this),se=Fe(J,Ve,wt,this.hash,this.children,Ht,$,W);return se===this.children?this:se.length>1?ue(Ve,this.hash,se):se[0]}var be=Ht();return be===p?this:(++W.value,Qe(Ve,Zt,this.hash,this,ae,me(Ve,ae,$,be)))},st=function(Ve,wt,Zt,Ht,ae,$,W){var J=this.mask,se=this.children,be=b(Zt,ae),De=T(be),Re=A(J,De),_e=J&De,Je=_e?se[Re]:ee,pt=Je._modify(Ve,wt,Zt+n,Ht,ae,$,W);if(Je===pt)return this;var Xe=ze(Ve,this),At=J,ur=void 0;if(_e&&ne(pt)){if(At&=~De,!At)return ee;if(se.length<=2&&Te(se[Re^1]))return se[Re^1];ur=P(Xe,Re,se)}else if(!_e&&!ne(pt)){if(se.length>=a)return Ee(Ve,be,pt,J,se);At|=De,ur=k(Xe,Re,pt,se)}else ur=L(Xe,Re,pt,se);return Xe?(this.mask=At,this.children=ur,this):Me(Ve,At,ur)},ft=function(Ve,wt,Zt,Ht,ae,$,W){var J=this.size,se=this.children,be=b(Zt,ae),De=se[be],Re=(De||ee)._modify(Ve,wt,Zt+n,Ht,ae,$,W);if(De===Re)return this;var _e=ze(Ve,this),Je=void 0;if(ne(De)&&!ne(Re))++J,Je=L(_e,be,Re,se);else if(!ne(De)&&ne(Re)){if(--J,J<=u)return Ze(Ve,J,be,se);Je=L(_e,be,ee,se)}else Je=L(_e,be,Re,se);return _e?(this.size=J,this.children=Je,this):ke(Ve,J,Je)};ee._modify=function(Le,Ve,wt,Zt,Ht,ae,$){var W=Zt();return W===p?ee:(++$.value,me(Le,Ht,ae,W))};function Ye(Le,Ve,wt,Zt,Ht){this._editable=Le,this._edit=Ve,this._config=wt,this._root=Zt,this._size=Ht}Ye.prototype.setTree=function(Le,Ve){return this._editable?(this._root=Le,this._size=Ve,this):Le===this._root?this:new Ye(this._editable,this._edit,this._config,Le,Ve)};var tt=r.tryGetHash=function(Le,Ve,wt,Zt){for(var Ht=Zt._root,ae=0,$=Zt._config.keyEq;;)switch(Ht.type){case q:return $(wt,Ht.key)?Ht.value:Le;case U:{if(Ve===Ht.hash)for(var W=Ht.children,J=0,se=W.length;J<se;++J){var be=W[J];if($(wt,be.key))return be.value}return Le}case H:{var De=b(ae,Ve),Re=T(De);if(Ht.mask&Re){Ht=Ht.children[A(Ht.mask,Re)],ae+=n;break}return Le}case X:{if(Ht=Ht.children[b(ae,Ve)],Ht){ae+=n;break}return Le}default:return Le;}};Ye.prototype.tryGetHash=function(Le,Ve,wt){return tt(Le,Ve,wt,this)};var lt=r.tryGet=function(Le,Ve,wt){return tt(Le,wt._config.hash(Ve),Ve,wt)};Ye.prototype.tryGet=function(Le,Ve){return lt(Le,Ve,this)};var je=r.getHash=function(Le,Ve,wt){return tt(void 0,Le,Ve,wt)};Ye.prototype.getHash=function(Le,Ve){return je(Le,Ve,this)};var ge=r.get=function(Le,Ve){return tt(void 0,Ve._config.hash(Le),Le,Ve)};Ye.prototype.get=function(Le,Ve){return lt(Ve,Le,this)};var We=r.has=function(Le,Ve,wt){return tt(p,Le,Ve,wt)!==p};Ye.prototype.hasHash=function(Le,Ve){return We(Le,Ve,this)};var Oe=r.has=function(Le,Ve){return We(Ve._config.hash(Le),Le,Ve)};Ye.prototype.has=function(Le){return Oe(Le,this)};var at=function(Ve,wt){return Ve===wt};r.make=function(Le){return new Ye(0,0,{keyEq:Le&&Le.keyEq||at,hash:Le&&Le.hash||g},ee,0)},r.empty=r.make();var ot=r.isEmpty=function(Le){return Le&&!!ne(Le._root)};Ye.prototype.isEmpty=function(){return ot(this)};var Pt=r.modifyHash=function(Le,Ve,wt,Zt){var Ht={value:Zt._size},ae=Zt._root._modify(Zt._editable?Zt._edit:NaN,Zt._config.keyEq,0,Le,Ve,wt,Ht);return Zt.setTree(ae,Ht.value)};Ye.prototype.modifyHash=function(Le,Ve,wt){return Pt(wt,Le,Ve,this)};var Mt=r.modify=function(Le,Ve,wt){return Pt(Le,wt._config.hash(Ve),Ve,wt)};Ye.prototype.modify=function(Le,Ve){return Mt(Ve,Le,this)};var Dt=r.setHash=function(Le,Ve,wt,Zt){return Pt(h(wt),Le,Ve,Zt)};Ye.prototype.setHash=function(Le,Ve,wt){return Dt(Le,Ve,wt,this)};var Ae=r.set=function(Le,Ve,wt){return Dt(wt._config.hash(Le),Le,Ve,wt)};Ye.prototype.set=function(Le,Ve){return Ae(Le,Ve,this)};var Lt=h(p),Wt=r.removeHash=function(Le,Ve,wt){return Pt(Lt,Le,Ve,wt)};Ye.prototype.removeHash=Ye.prototype.deleteHash=function(Le,Ve){return Wt(Le,Ve,this)};var Ct=r.remove=function(Le,Ve){return Wt(Ve._config.hash(Le),Le,Ve)};Ye.prototype.remove=Ye.prototype.delete=function(Le){return Ct(Le,this)};var ce=r.beginMutation=function(Le){return new Ye(Le._editable+1,Le._edit+1,Le._config,Le._root,Le._size)};Ye.prototype.beginMutation=function(){return ce(this)};var qe=r.endMutation=function(Le){return Le._editable=Le._editable&&Le._editable-1,Le};Ye.prototype.endMutation=function(){return qe(this)};var Ue=r.mutate=function(Le,Ve){var wt=ce(Ve);return Le(wt),qe(wt)};Ye.prototype.mutate=function(Le){return Ue(Le,this)};var ht=function(Ve){return Ve&&yt(Ve[0],Ve[1],Ve[2],Ve[3],Ve[4])},yt=function(Ve,wt,Zt,Ht,ae){for(;Zt<Ve;){var $=wt[Zt++];if($&&!ne($))return mt($,Ht,[Ve,wt,Zt,Ht,ae])}return ht(ae)},mt=function(Ve,wt,Zt){switch(Ve.type){case q:return{value:wt(Ve),rest:Zt};case U:case X:case H:var Ht=Ve.children;return yt(Ht.length,Ht,0,wt,Zt);default:return ht(Zt);}},_t={done:!0};function Yt(Le){this.v=Le}Yt.prototype.next=function(){if(!this.v)return _t;var Le=this.v;return this.v=ht(Le.rest),Le},Yt.prototype[Symbol.iterator]=function(){return this};var nt=function(Ve,wt){return new Yt(mt(Ve._root,wt))},zr=function(Ve){return[Ve.key,Ve.value]},on=r.entries=function(Le){return nt(Le,zr)};Ye.prototype.entries=Ye.prototype[Symbol.iterator]=function(){return on(this)};var pa=function(Ve){return Ve.key},da=r.keys=function(Le){return nt(Le,pa)};Ye.prototype.keys=function(){return da(this)};var St=function(Ve){return Ve.value},Vr=r.values=Ye.prototype.values=function(Le){return nt(Le,St)};Ye.prototype.values=function(){return Vr(this)};var Er=r.fold=function(Le,Ve,wt){var Zt=wt._root;if(Zt.type===q)return Le(Ve,Zt.value,Zt.key);for(var Ht=[Zt.children],ae=void 0;ae=Ht.pop();)for(var $=0,W=ae.length;$<W;){var J=ae[$++];J&&J.type&&(J.type===q?Ve=Le(Ve,J.value,J.key):Ht.push(J.children))}return Ve};Ye.prototype.fold=function(Le,Ve){return Er(Le,Ve,this)};var Qi=r.forEach=function(Le,Ve){return Er(function(wt,Zt,Ht){return Le(Zt,Ht,Ve)},null,Ve)};Ye.prototype.forEach=function(Le){return Qi(Le,this)};var Ta=r.count=function(Le){return Le._size};Ye.prototype.count=function(){return Ta(this)},Object.defineProperty(Ye.prototype,"size",{get:Ye.prototype.count}),e.exports?e.exports=r:(void 0).hamt=r}),CX=class{constructor(t){$n(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,r){return this._map.set(t,r),this}delete(t){return this._map.delete(t),this}clone(){return XX(this)}toMap(){return new Map(this._map)}},AX=class e{constructor(t){if($n(this,"_hamt",Wlr.empty.beginMutation()),t instanceof e){let r=t._hamt.endMutation();t._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(t)for(let[r,n]of t.entries())this._hamt.set(r,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,r){return this._hamt.set(t,r),this}delete(t){return this._hamt.delete(t),this}clone(){return XX(this)}toMap(){return new Map(this._hamt)}};function XX(e){return Po("recoil_hamt_2020")?new AX(e):new CX(e)}var $lr={persistentMap:XX},Ylr=$lr.persistentMap,Zlr=Object.freeze({__proto__:null,persistentMap:Ylr}),{graph:Klr}=bM,{persistentMap:nje}=Zlr,Xlr=0,Oje=()=>Xlr++;function Lje(){let e=Oje();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:nje(),nonvalidatedAtoms:nje()}}function Jlr(){let e=Lje();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,Klr()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Pje={makeEmptyTreeState:Lje,makeEmptyStoreState:Jlr,getNextTreeStateVersion:Oje};function Qlr(...e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return t}var eur=Qlr;function tur(e,t,r){let n=e.entries(),o=n.next();for(;!o.done;){let i=o.value;if(t.call(r,i[1],i[0],e))return!0;o=n.next()}return!1}var rur=tur,{cleanUpNode:nur}=kb,{deleteNodeConfigIfPossible:our,getNode:kje}=kc,{RetentionZone:Rje}=K3,jje=new Set;function qje(e,t){let r=e.getState(),n=r.currentTree;if(r.nextTree){Hp("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let o=new Set;for(let a of t)if(a instanceof Rje)for(let u of lur(r,a))o.add(u);else o.add(a);let i=iur(e,o);for(let a of i)sur(e,n,a)}function iur(e,t){let r=e.getState(),n=r.currentTree,o=e.getGraph(n.version),i=new Set,a=new Set;return u(t),i;function u(p){let h=new Set,g=aur(e,n,p,i,a);for(let A of g){var x;if(kje(A).retainedBy==="recoilRoot"){a.add(A);continue}if(((x=r.retention.referenceCounts.get(A))!==null&&x!==void 0?x:0)>0){a.add(A);continue}if(zje(A).some(P=>r.retention.referenceCounts.get(P))){a.add(A);continue}let L=o.nodeToNodeSubscriptions.get(A);if(L&&rur(L,P=>a.has(P))){a.add(A);continue}i.add(A),h.add(A)}let b=new Set;for(let A of h)for(let L of(T=o.nodeDeps.get(A))!==null&&T!==void 0?T:jje){var T;i.has(L)||b.add(L)}b.size&&u(b)}}function aur(e,t,r,n,o){let i=e.getGraph(t.version),a=[],u=new Set;for(;r.size>0;)p(vo(r.values().next().value));return a;function p(h){if(n.has(h)||o.has(h)){r.delete(h);return}if(u.has(h))return;let g=i.nodeToNodeSubscriptions.get(h);if(g)for(let x of g)p(x);u.add(h),r.delete(h),a.push(h)}}function sur(e,t,r){if(!Po("recoil_memory_managament_2020"))return;nur(e,r);let n=e.getState();n.knownAtoms.delete(r),n.knownSelectors.delete(r),n.nodeTransactionSubscriptions.delete(r),n.retention.referenceCounts.delete(r);let o=zje(r);for(let p of o){var i;(i=n.retention.nodesRetainedByZone.get(p))===null||i===void 0||i.delete(r)}t.atomValues.delete(r),t.dirtyAtoms.delete(r),t.nonvalidatedAtoms.delete(r);let a=n.graphsByVersion.get(t.version);if(a){let p=a.nodeDeps.get(r);if(p!==void 0){a.nodeDeps.delete(r);for(let h of p){var u;(u=a.nodeToNodeSubscriptions.get(h))===null||u===void 0||u.delete(r)}}a.nodeToNodeSubscriptions.delete(r)}our(r)}function lur(e,t){var r;return(r=e.retention.nodesRetainedByZone.get(t))!==null&&r!==void 0?r:jje}function zje(e){let t=kje(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof Rje?[t]:t}function uur(e,t){let r=e.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(t):qje(e,new Set([t]))}function cur(e,t,r){var n;if(!Po("recoil_memory_managament_2020"))return;let o=e.getState().retention.referenceCounts,i=((n=o.get(t))!==null&&n!==void 0?n:0)+r;i===0?Fje(e,t):o.set(t,i)}function Fje(e,t){if(!Po("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),uur(e,t)}function fur(e){if(!Po("recoil_memory_managament_2020"))return;let t=e.getState();qje(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function pur(e){return e===void 0?"recoilRoot":e}var wM={updateRetainCount:cur,updateRetainCountToZero:Fje,releaseScheduledRetainablesNow:fur,retainedByOptionWithDefault:pur};function*dur(e){for(let t of e)for(let r of t)yield r}var hur=dur,mur=typeof window=="undefined",gur=typeof navigator!="undefined"&&navigator.product==="ReactNative",JX={isSSR:mur,isReactNative:gur},{isSSR:vur}=JX,{batchUpdates:DX}=KX,{initializeNodeIfNewToStore:yur,peekNodeInfo:_ur}=kb,{graph:xur}=bM,{DEFAULT_VALUE:bur,recoilValues:oje,recoilValuesForKeys:ije}=kc,{AbstractRecoilValue:wur,getRecoilValueAsLoadable:Eur,setRecoilValue:aje,setUnvalidatedRecoilValue:Sur}=P0,{updateRetainCount:k3}=wM,{getNextTreeStateVersion:Iur,makeEmptyStoreState:Tur}=Pje;var Lb=class{constructor(t){$n(this,"_store",void 0),$n(this,"_refCount",0),$n(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),Eur(this._store,r))),$n(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),$n(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];let i=this._store.getState().currentTree;return ije(i.dirtyAtoms)}let n=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?oje.values():r.isInitialized===!0?ije(hur([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):wje(oje.values(),({key:i})=>!n.has(i)&&!o.has(i))}),$n(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),_ur(this._store,this._store.getState().currentTree,r))),$n(this,"map",r=>{this.checkRefCount_INTERNAL();let n=new yM(this,DX);return r(n),NX(n.getStore_INTERNAL())}),$n(this,"asyncMap",r=>Nt(this,null,function*(){this.checkRefCount_INTERNAL();let n=new yM(this,DX);return yield r(n),NX(n.getStore_INTERNAL())})),this._store={getState:()=>t,replaceState:r=>{t.currentTree=r(t.currentTree)},getGraph:r=>{let n=t.graphsByVersion;if(n.has(r))return vo(n.get(r));let o=xur();return n.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let r of this._store.getState().nodeCleanupFunctions.keys())yur(this._store,t.currentTree,r,"get"),k3(this._store,r,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!Po("recoil_memory_managament_2020"))return()=>{};this._refCount++;let t=!1;return()=>{t||(t=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){Po("recoil_memory_managament_2020")&&(vur||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){Po("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){Po("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function Uje(e,t,r=!1){let n=e.getState(),o=r?Iur():t.version;return{currentTree:r?{version:o,stateID:o,transactionMetadata:Se({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(o,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function Mur(e){let t=new Lb(Tur());return e!=null?t.map(e):t}function NX(e,t="current"){let r=e.getState(),n=t==="current"?r.currentTree:vo(r.previousTree);return new Lb(Uje(e,n))}var yM=class extends Lb{constructor(t,r){super(Uje(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0)),$n(this,"_batch",void 0),$n(this,"set",(n,o)=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{k3(i,n.key,1),aje(this.getStore_INTERNAL(),n,o)})}),$n(this,"reset",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{k3(o,n.key,1),aje(this.getStore_INTERNAL(),n,bur)})}),$n(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();DX(()=>{for(let[i,a]of n.entries())k3(o,i,1),Sur(o,new wur(i),a)})}),this._batch=r}},Q3={Snapshot:Lb,MutableSnapshot:yM,freshSnapshot:Mur,cloneSnapshot:NX},Cur=Q3.Snapshot,Aur=Q3.MutableSnapshot,Dur=Q3.freshSnapshot,Nur=Q3.cloneSnapshot,eP=Object.freeze({__proto__:null,Snapshot:Cur,MutableSnapshot:Aur,freshSnapshot:Dur,cloneSnapshot:Nur}),{getNextTreeStateVersion:Our,makeEmptyStoreState:Bje}=Pje,{cleanUpNode:Lur,getDownstreamNodes:Pur,setNodeValue:kur,setUnvalidatedAtomValue_DEPRECATED:Rur}=kb,{graph:jur}=bM,{cloneGraph:qur}=bM,{applyAtomValueWrites:zur}=P0,{releaseScheduledRetainablesNow:Vje}=wM,{freshSnapshot:Fur}=eP,{useCallback:Uur,useContext:Gje,useEffect:OX,useMemo:Bur,useRef:wX,useState:Vur}=Gs.default;function uM(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var Hje=Object.freeze({getState:uM,replaceState:uM,getGraph:uM,subscribeToTransactions:uM,addTransactionMetadata:uM}),LX=!1;function sje(e){if(LX)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let t=e.getState();if(t.nextTree===null){Po("recoil_memory_managament_2020")&&Po("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&Vje(e);let r=t.currentTree.version,n=Our();t.nextTree=Ft(Se({},t.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(n,qur(vo(t.graphsByVersion.get(r))))}}var Wje=Gs.default.createContext({current:Hje}),QX=()=>Gje(Wje),$je=Gs.default.createContext(null);function Gur(){let e=Gje($je);return e==null&&HX("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e}function eJ(e,t,r){let n=Pur(e,r,r.dirtyAtoms);for(let o of n){let i=t.nodeToComponentSubscriptions.get(o);if(i)for(let[a,[u,p]]of i)p(r)}}function Yje(e){let t=e.getState(),r=t.currentTree,n=r.dirtyAtoms;if(n.size){for(let[o,i]of t.nodeTransactionSubscriptions)if(n.has(o))for(let[a,u]of i)u(e);for(let[o,i]of t.transactionSubscriptions)i(e);(!Po("recoil_early_rendering_2021")||t.suspendedComponentResolvers.size)&&(eJ(e,t,r),t.suspendedComponentResolvers.forEach(o=>o()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(o=>o(r)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function Hur(e){let t=e.current.getState();t.commitDepth++;try{let{nextTree:r}=t;if(r===null)return;t.previousTree=t.currentTree,t.currentTree=r,t.nextTree=null,Yje(e.current),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):Hp("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,Po("recoil_memory_managament_2020")&&Vje(e.current)}finally{t.commitDepth--}}function Wur({setNotifyBatcherOfChange:e}){let t=QX(),[r,n]=Vur([]);return e(()=>n({})),OX(()=>{jlr.enqueueExecution("Batcher",()=>{Hur(t)})}),OX(()=>()=>{e(()=>{})},[e]),null}function $ur(e,t){let r=Bje();return t({set:(n,o)=>{let i=r.currentTree,a=kur(e,i,n.key,o),u=new Set(a.keys()),p=i.nonvalidatedAtoms.clone();for(let h of u)p.delete(h);r.currentTree=Ft(Se({},i),{dirtyAtoms:eur(i.dirtyAtoms,u),atomValues:zur(i.atomValues,a),nonvalidatedAtoms:p})},setUnvalidatedAtomValues:n=>{n.forEach((o,i)=>{r.currentTree=Rur(r.currentTree,i,o)})}}),r}function Yur(e){return Fur().map(e).getStore_INTERNAL().getState()}var lje=0;function Zur({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:r,children:n}){var o;let i,a=P=>{let k=i.current.graphsByVersion;if(k.has(P))return vo(k.get(P));let q=jur();return k.set(P,q),q},u=(P,k)=>{if(k==null){let{transactionSubscriptions:q}=A.current.getState(),U=lje++;return q.set(U,P),{release:()=>{q.delete(U)}}}else{let{nodeTransactionSubscriptions:q}=A.current.getState();q.has(k)||q.set(k,new Map);let U=lje++;return vo(q.get(k)).set(U,P),{release:()=>{let H=q.get(k);H&&(H.delete(U),H.size===0&&q.delete(k))}}}},p=P=>{sje(A.current);for(let k of Object.keys(P))vo(A.current.getState().nextTree).transactionMetadata[k]=P[k]},h=P=>{let k=A.current.getState();sje(A.current);let q=vo(k.nextTree),U;try{LX=!0,U=P(q)}finally{LX=!1}U!==q&&(k.nextTree=U,Po("recoil_early_rendering_2021")&&eJ(T,k,U),vo(g.current)())},g=wX(null),x=Uur(P=>{g.current=P},[g]),b=(o=Gs.default.createMutableSource)!==null&&o!==void 0?o:Gs.default.unstable_createMutableSource,T=r!=null?r:{getState:()=>i.current,replaceState:h,getGraph:a,subscribeToTransactions:u,addTransactionMetadata:p},A=wX(T);i=wX(e!=null?$ur(T,e):t!=null?Yur(t):Bje());let L=Bur(()=>b?b(i,()=>i.current.currentTree.version):null,[b,i]);return OX(()=>()=>{for(let P of A.current.getState().knownAtoms)Lur(A.current,P)},[]),Gs.default.createElement(Wje.Provider,{value:A},Gs.default.createElement($je.Provider,{value:L},Gs.default.createElement(Wur,{setNotifyBatcherOfChange:x}),n))}function Kur(e){let o=e,{override:t}=o,r=wn(o,["override"]),n=QX();return t===!1&&n.current!==Hje?e.children:Gs.default.createElement(Zur,r)}var tP={useStoreRef:QX,useRecoilMutableSource:Gur,RecoilRoot:Kur,notifyComponents_FOR_TESTING:eJ,sendEndOfBatchNotifications_FOR_TESTING:Yje},{loadableWithValue:Xur}=xM,{DEFAULT_VALUE:Jur,getNode:Qur}=kc,{copyTreeState:ecr,getRecoilValueAsLoadable:tcr,invalidateDownstreams:rcr,writeLoadableToTreeState:ncr}=P0;function uje(e){return Qur(e.key).nodeType==="atom"}var PX=class{constructor(t,r){$n(this,"_store",void 0),$n(this,"_treeState",void 0),$n(this,"_changes",void 0),$n(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!uje(n))throw new Error("Reading selectors within atomicUpdate is not supported");let o=tcr(this._store,n,this._treeState);if(o.state==="hasValue")return o.contents;throw o.state==="hasError"?o.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),$n(this,"set",(n,o)=>{if(!uje(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof o=="function"){let i=this.get(n);this._changes.set(n.key,o(i))}else this._changes.set(n.key,o)}),$n(this,"reset",n=>{this.set(n,Jur)}),this._store=t,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let t=ecr(this._treeState);for(let[r,n]of this._changes)ncr(t,r,Xur(n));return rcr(this._store,t),t}};function ocr(e){return t=>{e.replaceState(r=>{let n=new PX(e,r);return t(n),n.newTreeState_INTERNAL()})}}var icr={atomicUpdater:ocr},acr=icr.atomicUpdater,scr=Object.freeze({__proto__:null,atomicUpdater:acr});function lcr(e,t){let r=new Map;for(let[n,o]of e)t(o,n)&&r.set(n,o);return r}var ucr=lcr;function ccr(e,t){let r=new Set;for(let n of e)t(n)&&r.add(n);return r}var fcr=ccr;function pcr(e,t){if(!e)throw new Error(t)}var dcr=pcr,H3=dcr;function hcr(...e){let t=new Map;for(let r=0;r<e.length;r++){let n=e[r].keys(),o;for(;!(o=n.next()).done;)t.set(o.value,e[r].get(o.value))}return t}var mcr=hcr;function gcr(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var vcr=gcr;var{useRef:ycr}=Gs.default;function _cr(){let e=ycr();if(0&&Po("recoil_infer_component_names"))var t;return"<component name not available>"}var tJ=_cr,{atomicUpdater:Zje}=scr,{batchUpdates:rJ}=KX,{DEFAULT_VALUE:rP,getNode:Kje,nodes:xcr}=kc,{useRecoilMutableSource:bcr,useStoreRef:$u}=tP,{isRecoilValue:BXr}=ov,{AbstractRecoilValue:nJ,getRecoilValueAsLoadable:gM,setRecoilValue:Pb,setRecoilValueLoadable:wcr,setUnvalidatedRecoilValue:Ecr,subscribeToRecoilValue:oJ}=P0,{updateRetainCount:cM}=wM,{RetentionZone:Scr}=K3,{Snapshot:VXr,cloneSnapshot:_M}=eP,{setByAddingToSet:Icr}=bje,{isSSR:W3}=JX,{mutableSourceExists:Tcr,useMutableSource:Mcr}=xje,{useCallback:zf,useEffect:Lh,useMemo:Xje,useRef:nv,useState:iJ}=Gs.default,Jje=12e4;function Qje(e,t,r){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(o=>{r.current.getState().suspendedComponentResolvers.add(o)}):e.state==="hasError"?e.contents:new Error(`Invalid value of loadable atom "${t.key}"`)}function Ccr(){let e=$u(),[t,r]=iJ([]),n=nv(new Set);n.current=new Set;let o=nv(new Set),i=nv(new Map),a=zf(p=>{let h=i.current.get(p);h&&(h.release(),i.current.delete(p))},[i]),u=tJ();return Lh(()=>{let p=e.current;function h(g,x){i.current.has(x)&&r([])}V3(n.current,o.current).forEach(g=>{if(i.current.has(g)){HX(`Double subscription to RecoilValue "${g}"`);return}let x=oJ(p,new nJ(g),T=>{h(T,g)},u);i.current.set(g,x),p.getState().nextTree?p.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{h(p.getState(),g)}):h(p.getState(),g)}),V3(o.current,n.current).forEach(g=>{a(g)}),o.current=n.current}),Lh(()=>{let p=i.current;return()=>p.forEach((h,g)=>a(g))},[a]),Xje(()=>{function p(A){return L=>{Pb(e.current,A,L)}}function h(A){return()=>Pb(e.current,A,rP)}function g(A){var L;n.current.has(A.key)||(n.current=Icr(n.current,A.key));let P=e.current.getState();return gM(e.current,A,Po("recoil_early_rendering_2021")&&(L=P.nextTree)!==null&&L!==void 0?L:P.currentTree)}function x(A){let L=g(A);return Qje(L,A,e)}function b(A){return[x(A),p(A)]}function T(A){return[g(A),p(A)]}return{getRecoilValue:x,getRecoilValueLoadable:g,getRecoilState:b,getRecoilStateLoadable:T,getSetRecoilState:p,getResetRecoilState:h}},[n,e])}var Acr={current:0};function Dcr(e){let t=$u(),r=zf(()=>{var h;let g=t.current,x=g.getState(),b=Po("recoil_early_rendering_2021")&&(h=x.nextTree)!==null&&h!==void 0?h:x.currentTree;return gM(g,e,b)},[t,e]),n=zf(()=>r(),[r]),o=tJ(),i=zf((h,g)=>{let x=t.current;return oJ(x,e,()=>{if(!Po("recoil_suppress_rerender_in_callback"))return g();let T=r();p.current.is(T)||g(),p.current=T},o).release},[t,e,o,r]),a=bcr(),u=Mcr(a,n,i),p=nv(u);return Lh(()=>{p.current=u}),u}function Ncr(e){let t=$u(),[r,n]=iJ([]),o=tJ();Lh(()=>{let u=t.current,p=u.getState(),h=oJ(u,e,x=>{var b;if(!Po("recoil_suppress_rerender_in_callback"))return n([]);let T=gM(u,e,u.getState().currentTree);!((b=a.current)===null||b===void 0)&&b.is(T)||n(T),a.current=T},o);if(p.nextTree)u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var g;if(!Po("recoil_suppress_rerender_in_callback"))return n([]);let x=gM(u,e,u.getState().currentTree);!((g=a.current)===null||g===void 0)&&g.is(x)||n(x),a.current=x}return h.release},[o,e,t]);let i=gM(t.current,e),a=nv(i);return Lh(()=>{a.current=i}),i}function aJ(e){return Po("recoil_memory_managament_2020")&&n6e(e),Tcr()?Dcr(e):Ncr(e)}function e6e(e){let t=$u(),r=aJ(e);return Qje(r,e,t)}function sJ(e){let t=$u();return zf(r=>{Pb(t.current,e,r)},[t,e])}function Ocr(e){let t=$u();return zf(()=>{Pb(t.current,e,rP)},[t,e])}function Lcr(e){return[e6e(e),sJ(e)]}function Pcr(e){return[aJ(e),sJ(e)]}function nP(e){let t=$u();Lh(()=>t.current.subscribeToTransactions(e).release,[e,t])}function cje(e){let t=e.atomValues.toMap(),r=G3(ucr(t,(n,o)=>{let a=Kje(o).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return mcr(e.nonvalidatedAtoms.toMap(),r)}function kcr(e){nP(zf(t=>{let r=t.getState().previousTree,n=t.getState().currentTree;r||(Hp("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),r=t.getState().currentTree);let o=cje(n),i=cje(r),a=G3(xcr,p=>{var h,g,x,b;return{persistence_UNSTABLE:{type:(h=(g=p.persistence_UNSTABLE)===null||g===void 0?void 0:g.type)!==null&&h!==void 0?h:"none",backButton:(x=(b=p.persistence_UNSTABLE)===null||b===void 0?void 0:b.backButton)!==null&&x!==void 0?x:!1}}}),u=fcr(n.dirtyAtoms,p=>o.has(p)||i.has(p));e({atomValues:o,previousAtomValues:i,atomInfo:a,modifiedAtoms:u,transactionMetadata:Se({},n.transactionMetadata)})},[e]))}function Rcr(e){nP(zf(t=>{let r=_M(t,"current"),n=_M(t,"previous");e({snapshot:r,previousSnapshot:n})},[e]))}function t6e(e){let t=nv();return Lh(()=>{t.current=e}),t.current}function jcr(){let e=$u(),[t,r]=iJ(()=>_M(e.current)),n=t6e(t),o=nv();return Lh(()=>(o.current&&!W3&&window.clearTimeout(o.current),t.retain()),[t]),nP(zf(i=>r(_M(i)),[])),n!==t&&!W3&&(o.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(o.current)),t.retain(),o.current=window.setTimeout(()=>{t.release_INTERNAL(),o.current=null},Jje)),t}function r6e(){let e=$u();return zf(t=>{var r;let n=e.current.getState(),o=(r=n.nextTree)!==null&&r!==void 0?r:n.currentTree,i=t.getStore_INTERNAL().getState().currentTree;rJ(()=>{let a=new Set;for(let h of[o.atomValues.keys(),i.atomValues.keys()])for(let g of h){var u,p;((u=o.atomValues.get(g))===null||u===void 0?void 0:u.contents)!==((p=i.atomValues.get(g))===null||p===void 0?void 0:p.contents)&&Kje(g).shouldRestoreFromSnapshots&&a.add(g)}a.forEach(h=>{wcr(e.current,new nJ(h),i.atomValues.has(h)?vo(i.atomValues.get(h)):rP)}),e.current.replaceState(h=>Ft(Se({},h),{stateID:t.getID_INTERNAL()}))})},[e])}function qcr(){let e=$u();return(t,r={})=>{rJ(()=>{e.current.addTransactionMetadata(r),t.forEach((n,o)=>Ecr(e.current,new nJ(o),n))})}}var $3=class{},zcr=new $3;function Fcr(e,t){let r=$u(),n=r6e();return zf((...o)=>{function i(g,x){Pb(r.current,g,x)}function a(g){Pb(r.current,g,rP)}let u=_M(r.current),p=Zje(r.current),h=zcr;return rJ(()=>{let g="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw new Error(g);let x=e({set:i,reset:a,snapshot:u,gotoSnapshot:n,transact_UNSTABLE:p});if(typeof x!="function")throw new Error(g);h=x(...o)}),h instanceof $3&&H3(!1),h},t!=null?[...t,r]:void 0)}function n6e(e){if(Po("recoil_memory_managament_2020"))return Ucr(e)}function Ucr(e){let r=(Array.isArray(e)?e:[e]).map(a=>a instanceof Scr?a:a.key),n=$u();Lh(()=>{if(!Po("recoil_memory_managament_2020"))return;let a=n.current;if(o.current&&!W3)window.clearTimeout(o.current),o.current=null;else for(let u of r)cM(a,u,1);return()=>{for(let u of r)cM(a,u,-1)}},[n,...r]);let o=nv(),i=t6e(r);if(!W3&&(i===void 0||!vcr(i,r))){let a=n.current;for(let u of r)cM(a,u,1);if(i)for(let u of i)cM(a,u,-1);o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{o.current=null;for(let u of r)cM(a,u,-1)},Jje)}}function Bcr(e,t){let r=$u();return Xje(()=>(...n)=>{Zje(r.current)(i=>{e(i)(...n)})},t!=null?[...t,r]:void 0)}var Vcr={recoilComponentGetRecoilValueCount_FOR_TESTING:Acr,useGotoRecoilSnapshot:r6e,useRecoilCallback:Fcr,useRecoilInterface:Ccr,useRecoilSnapshot:jcr,useRecoilState:Lcr,useRecoilStateLoadable:Pcr,useRecoilTransaction:Bcr,useRecoilTransactionObserver:Rcr,useRecoilValue:e6e,useRecoilValueLoadable:aJ,useRetain:n6e,useResetRecoilState:Ocr,useSetRecoilState:sJ,useSetUnvalidatedAtomValues:qcr,useTransactionObservation_DEPRECATED:kcr,useTransactionSubscription_DEPRECATED:nP},{peekNodeInfo:Gcr}=kb,{useStoreRef:Hcr}=tP;function Wcr(){let e=Hcr();return({key:t})=>Gcr(e.current,e.current.getState().currentTree,t)}var $cr=Wcr,{RecoilRoot:Ycr,useStoreRef:Zcr}=tP,{useMemo:Kcr}=Gs.default;function Xcr(){let e=Zcr().current;return Kcr(()=>{function t({children:r}){return Gs.default.createElement(Ycr,{store_INTERNAL:e},r)}return t},[e])}var Jcr=Xcr;var{isReactNative:GXr,isSSR:HXr}=JX;function qf(e,t,r){if(typeof e=="string"&&!e.includes("\"")&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`;}if(e===null)return"null";if(typeof e!="object"){var n;return(n=JSON.stringify(e))!==null&&n!==void 0?n:""}if(Vi(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((o,i)=>qf(o,t,i.toString()))}]`;if(typeof e.toJSON=="function")return qf(e.toJSON(r),t,r);if(e instanceof Map){let o={};for(let[i,a]of e)o[typeof i=="string"?i:qf(i,t)]=a;return qf(o,t,r)}return e instanceof Set?qf(Array.from(e).sort((o,i)=>qf(o,t).localeCompare(qf(i,t))),t,r):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?qf(Array.from(e),t,r):`{${Object.keys(e).filter(o=>e[o]!==void 0).sort().map(o=>`${qf(o,t)}:${qf(e[o],t,o)}`).join(",")}}`}function Qcr(e,t={allowFunctions:!1}){return qf(e,t)}var oP=Qcr,kX=class{constructor(t){var r,n,o;$n(this,"_numLeafs",void 0),$n(this,"_root",void 0),$n(this,"_onHit",void 0),$n(this,"_onSet",void 0),$n(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(r=t==null?void 0:t.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(n=t==null?void 0:t.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(o=t==null?void 0:t.mapNodeValue)!==null&&o!==void 0?o:i=>i}size(){return this._numLeafs}root(){return this._root}get(t,r){var n;return(n=this.getLeafNode(t,r))===null||n===void 0?void 0:n.value}getLeafNode(t,r){return o6e(this.root(),n=>this._mapNodeValue(t(n)),{onNodeVisit:n=>{r==null||r.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(t,r,n){let o,i=RX(this.root(),t.map(([a,u])=>[a,this._mapNodeValue(u)]),null,r,null,{onNodeVisit:a=>{n==null||n.onNodeVisit(a),a.type==="leaf"&&(o=a)}});this.root()||(this._root=i),this._numLeafs++,this._onSet(vo(o))}delete(t){if(!this.root())return!1;let r=vo(this.root());return efr(r,t,t.parent)?t===r||r.type==="branch"&&!r.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=a6e(t),!0):!1}clear(){this._numLeafs=0,this._root=null}},o6e=(e,t,r)=>{var n;if(e==null)return;if(r==null||(n=r.onNodeVisit)===null||n===void 0||n.call(r,e),e.type==="leaf")return e;let o=t(e.nodeKey);return o6e(e.branches.get(o),t,r)},RX=(e,t,r,n,o,i)=>{var a;let u;if(e==null){if(t.length===0)u={type:"leaf",value:n,parent:r,branchKey:o};else{let[p,...h]=t,[g,x]=p;u={type:"branch",nodeKey:g,parent:r,branches:new Map,branchKey:o},u.branches.set(x,RX(null,h,u,n,x,i))}}else if(u=e,t.length){let[p,...h]=t,[g,x]=p;e.type==="branch"&&e.nodeKey===g||H3(!1),e.branches.set(x,RX(e.branches.get(x),h,e,n,x,i))}return i==null||(a=i.onNodeVisit)===null||a===void 0||a.call(i,u),u},efr=(e,t,r)=>r?(r.branches.delete(t.branchKey),i6e(e,r,r.parent)):e===t,i6e=(e,t,r)=>r?(t.branches.size===0&&r.branches.delete(t.branchKey),i6e(e,r,r.parent)):e===t,a6e=e=>e.type==="leaf"?1:Array.from(e.branches.values()).reduce((t,r)=>t+a6e(r),0),tfr={TreeCache:kX},rfr=tfr.TreeCache,s6e=Object.freeze({__proto__:null,TreeCache:rfr}),jX=class{constructor(t){var r;$n(this,"_maxSize",void 0),$n(this,"_size",void 0),$n(this,"_head",void 0),$n(this,"_tail",void 0),$n(this,"_map",void 0),$n(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=t.mapKey)!==null&&r!==void 0?r:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){let r=this._keyMapper(t),n=this._map.get(r);if(n)return this.set(t,n.value),n.value}set(t,r){let n=this._keyMapper(t);this._map.get(n)&&this.delete(t);let i=this.head(),a={key:t,right:i,left:null,value:r};i?i.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let t=this.tail();t&&this.delete(t.key)}delete(t){let r=this._keyMapper(t);if(!this._size||!this._map.has(r))return;let n=vo(this._map.get(r)),o=n.right,i=n.left;o&&(o.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=o),n===this.tail()&&(this._tail=i),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},nfr={LRUCache:jX},ofr=nfr.LRUCache,l6e=Object.freeze({__proto__:null,LRUCache:ofr}),{LRUCache:ifr}=l6e,{TreeCache:afr}=s6e;function sfr(e,t=r=>r){let r=new ifr({maxSize:e}),n=new afr({mapNodeValue:t,onHit:o=>{r.set(o,!0)},onSet:o=>{let i=r.tail();r.set(o,!0),i&&n.size()>e&&n.delete(i.key)}});return n}var fje=sfr,{TreeCache:lfr}=s6e,O3={equality:"reference",eviction:"keep-all",maxSize:1/0};function ufr({equality:e=O3.equality,eviction:t=O3.eviction,maxSize:r=O3.maxSize}=O3){let n=cfr(e);return ffr(t,r,n)}function cfr(e){switch(e){case"reference":return t=>t;case"value":return t=>oP(t);}throw new Error(`Unrecognized equality policy ${e}`)}function ffr(e,t,r){switch(e){case"keep-all":return new lfr({mapNodeValue:r});case"lru":return fje(vo(t),r);case"most-recent":return fje(1,r);}throw new Error(`Unrecognized eviction policy ${e}`)}var pfr=ufr;function dfr(e){return()=>null}var hfr={startPerfBlock:dfr},{CANCELED:fM,Canceled:mfr,loadableWithError:pM,loadableWithPromise:gfr,loadableWithValue:EX}=xM,{getNodeLoadable:pje,peekNodeLoadable:vfr,setNodeValue:yfr}=kb,{saveDependencyMapToStore:_fr}=bM,{DEFAULT_VALUE:xfr,RecoilValueNotReady:bfr,getConfigDeletionHandler:wfr,registerNode:dje}=kc,{isRecoilValue:Efr}=ov,{AbstractRecoilValue:Sfr}=ov,{setRecoilValueLoadable:Ifr}=P0,{retainedByOptionWithDefault:Tfr}=wM,{cloneSnapshot:Mfr}=eP,{startPerfBlock:Cfr}=hfr,dM=[],L3=new Map,Afr=(()=>{let e=0;return()=>e++})();function Dfr(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function Nfr(e){let{key:t,get:r,cachePolicy_UNSTABLE:n}=e,o=e.set!=null?e.set:void 0,i=pfr(n!=null?n:{equality:"reference",eviction:"keep-all"}),a=Tfr(e.retainedBy_UNSTABLE),u=new Map,p=0;function h(){return!Po("recoil_memory_managament_2020")||p>0}function g(je){return u.has(je)||u.set(je,Dfr()),vo(u.get(je))}function x(je){return p++,je.getState().knownSelectors.add(t),()=>{p--,je.getState().knownSelectors.delete(t),u.delete(je)}}function b(){return wfr(t)!==void 0&&!h()}function T(je,ge,We){if(ge.state==="loading"){let Oe=L3.get(We);Oe==null&&L3.set(We,Oe=new Set),Oe.add(je)}}function A(je,ge){let We=L3.get(ge);if(We!==void 0){for(let Oe of We)Ifr(Oe,new Sfr(t),je);L3.delete(ge)}}function L(je,ge,We){let Oe=je.getState().knownSelectors.has(We);if(Oe&&ge.atomValues.has(We))return vo(ge.atomValues.get(We));let at=pje(je,ge,We);return at.state!=="loading"&&Oe&&ge.atomValues.set(We,at),at}function P(je,ge,We,Oe,at){return ge.then(ot=>{if(!h())return Fe(je,at),fM;let Pt=EX(ot);return st(We,ne(Oe),Pt),U(je,We,new Set(Oe.keys()),at),q(je,Pt,at),{__value:ot,__key:t}}).catch(ot=>{if(!h())return Fe(je,at),fM;if(ze(je,at)&&Qe(Oe,je,at),Vi(ot))return k(je,ot,We,Oe,at);let Pt=pM(ot);throw st(We,ne(Oe),Pt),U(je,We,new Set(Oe.keys()),at),q(je,Pt,at),ot})}function k(je,ge,We,Oe,at){return ge.then(ot=>{if(!h())return Fe(je,at),fM;if(ot instanceof mfr)return Hp("Selector was released while it had dependencies"),fM;let{__key:Pt,__value:Mt}=ot!=null?ot:{},Dt=!0;Pt!=null&&(We.atomValues.set(Pt,EX(Mt)),Dt=!1);let Ae=ee(je,We);if(Ae&&Ae.state==="hasValue")return Ee(Ae,je),{__value:Ae.contents,__key:t};if(!ze(je,at)){var Lt;let ce=Me(We);if((ce==null||(Lt=ce.latestLoadable)===null||Lt===void 0?void 0:Lt.state)==="loading")return ce.latestLoadable.contents}let[Wt,Ct]=X(je,We,at,Dt);if(ze(je,at)&&Qe(Ct,je,at),Ne(Wt),Wt.state!=="loading"&&(st(We,ne(Ct),Wt),U(je,We,new Set(Ct.keys()),at),q(je,Wt,at)),Wt.state==="hasError")throw Wt.contents;return Wt.state==="hasValue"?{__value:Wt.contents,__key:t}:Wt.contents}).catch(ot=>{if(!h())return Fe(je,at),fM;let Pt=pM(ot);throw st(We,ne(Oe),pM(ot)),U(je,We,new Set(Oe.keys()),at),q(je,Pt,at),ot})}function q(je,ge,We){ze(je,We)&&(Ee(ge,je),A(ge,We))}function U(je,ge,We,Oe){var at,ot,Pt,Mt;if(ze(je,Oe)||ge.version===((at=je.getState())===null||at===void 0||(ot=at.currentTree)===null||ot===void 0?void 0:ot.version)||ge.version===((Pt=je.getState())===null||Pt===void 0||(Mt=Pt.nextTree)===null||Mt===void 0?void 0:Mt.version)){var Dt,Ae,Lt;_fr(new Map([[t,We]]),je,(Dt=(Ae=je.getState())===null||Ae===void 0||(Lt=Ae.nextTree)===null||Lt===void 0?void 0:Lt.version)!==null&&Dt!==void 0?Dt:je.getState().currentTree.version)}}function H(je,ge,We,Oe,at){We.add(Oe),U(je,ge,We,at)}function X(je,ge,We,Oe=!1){let at=Cfr(t),ot,Pt=!1,Mt,Dt=new Map,Ae=new Set;U(je,ge,Ae,We);function Lt(ce){let{key:qe}=ce;H(je,ge,Ae,qe,We);let Ue=Oe?pje(je,ge,qe):L(je,ge,qe);if(Ne(Ue),Dt.set(qe,Ue),Ue.state==="hasValue")return Ue.contents;throw Ue.contents}let Wt=!1,Ct=ce=>(...qe)=>{if(!Wt)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let Ue=Mfr(je),ht=ce({snapshot:Ue});if(typeof ht!="function")throw new Error("getCallback() expects a function that returns a function.");return ht(...qe)};try{ot=r({get:Lt,getCallback:Ct}),ot=Efr(ot)?Lt(ot):ot,Wt=!0,Vi(ot)?ot=P(je,ot,ge,Dt,We).finally(at):at()}catch(ce){ot=ce,Vi(ot)?ot=k(je,ot,ge,Dt,We).finally(at):(Pt=!0,at())}return Pt?Mt=pM(ot):Vi(ot)?Mt=gfr(ot):Mt=EX(ot),Ne(Mt),[Mt,Dt]}function ee(je,ge){let We=new Set,Oe=g(je),at=i.get(ot=>(typeof ot!="string"&&H3(!1),L(je,ge,ot).contents),{onNodeVisit:ot=>{ot.type==="branch"&&ot.nodeKey!==t&&typeof ot.nodeKey=="string"&&We.add(ot.nodeKey)}});return at&&U(je,ge,We,Oe.latestExecutionId),at}function ne(je){return Array.from(je.entries()).map(([ge,We])=>[ge,We.contents])}function me(je,ge){let We=Afr(),[Oe,at]=X(je,ge,We);return Ee(Oe,je,at,We,ge),Ze(ge,ne(at),Oe),T(je,Oe,We),Oe}function ue(je,ge){let We=ee(je,ge);if(We!=null)return Ee(We,je),We;let Oe=Me(ge);if(Oe){let at=Oe;return T(je,vo(at.latestLoadable),vo(at.latestExecutionId)),vo(at.latestLoadable)}return me(je,ge)}function Me(je){var ge;let[,We]=(ge=Array.from(u.entries()).find(([Oe,at])=>at.latestLoadable!=null&&at.latestExecutionId!=null&&!Te(Oe,je)))!==null&&ge!==void 0?ge:[];return We}let ke=new Map;function Te(je,ge){var We,Oe;let at=g(je),ot=(We=at.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&We!==void 0?We:new Map,Pt=Array(((Oe=ke.get(ge.version))!==null&&Oe!==void 0?Oe:new Map).entries()),Mt=ke.has(ge.version)&&Pt.length===ot.size&&Pt.every(([Dt,Ae])=>ot.get(Dt)===Ae);return ot==null||ge.version===at.stateVersion||Mt?!1:(ke.set(ge.version,new Map(ot)),Array.from(ot).some(([Dt,Ae])=>L(je,ge,Dt).contents!==Ae.contents))}function Ee(je,ge,We,Oe,at){let ot=g(ge);je.state==="loading"?(ot.depValuesDiscoveredSoFarDuringAsyncWork=We,ot.latestExecutionId=Oe,ot.latestLoadable=je,ot.stateVersion=at==null?void 0:at.version):(ot.depValuesDiscoveredSoFarDuringAsyncWork=null,ot.latestExecutionId=null,ot.latestLoadable=null,ot.stateVersion=null)}function Ze(je,ge,We){We.state!=="loading"&&st(je,ge,We)}function Qe(je,ge,We){let Oe=g(ge);ze(ge,We)&&(Oe.depValuesDiscoveredSoFarDuringAsyncWork=je)}function Fe(je,ge){ze(je,ge)&&u.delete(je)}function ze(je,ge){let We=g(je);return ge===We.latestExecutionId}function Ne(je){je.state!=="loading"&&(je.contents,void 0)}function et(je){}function st(je,ge,We){je.atomValues.set(t,We),i.set(ge,We)}function ft(je){if(dM.includes(t)){let ge=`Recoil selector has circular dependencies: ${dM.slice(dM.indexOf(t)).join(" \u2192 ")}`;return pM(new Error(ge))}dM.push(t);try{return je()}finally{dM.pop()}}function Ye(je,ge){return i.get(Oe=>{typeof Oe!="string"&&H3(!1);let at=vfr(je,ge,Oe);return at==null?void 0:at.contents})}function tt(je,ge){return ft(()=>ue(je,ge))}function lt(je){je.atomValues.delete(t)}return o!=null?dje({key:t,nodeType:"selector",peek:Ye,get:tt,set:(ge,We,Oe)=>{let at=!1,ot=new Map;function Pt({key:Lt}){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Wt=L(ge,We,Lt);if(Ne(Wt),Wt.state==="hasValue")return Wt.contents;throw Wt.state==="loading"?new bfr(Lt):Wt.contents}function Mt(Lt,Wt){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Ct=typeof Wt=="function"?Wt(Pt(Lt)):Wt;yfr(ge,We,Lt.key,Ct).forEach((qe,Ue)=>ot.set(Ue,qe))}function Dt(Lt){Mt(Lt,xfr)}let Ae=o({set:Mt,get:Pt,reset:Dt},Oe);if(Ae!==void 0)throw Vi(Ae)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return at=!0,ot},init:x,invalidate:lt,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a}):dje({key:t,nodeType:"selector",peek:Ye,get:tt,init:x,invalidate:lt,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a})}var Y3=Nfr,{loadableWithError:hje,loadableWithPromise:mje,loadableWithValue:hM}=xM,{DEFAULT_VALUE:O0,DefaultValue:Db,getConfigDeletionHandler:u6e,registerNode:Ofr,setConfigDeletionHandler:Lfr}=kc,{isRecoilValue:Pfr}=ov,{markRecoilValueModified:kfr,setRecoilValue:gje,setRecoilValueLoadable:Rfr}=P0,{retainedByOptionWithDefault:jfr}=wM;function qfr(e){let{key:t,persistence_UNSTABLE:r}=e,n=jfr(e.retainedBy_UNSTABLE),o=0,i=Vi(e.default)?mje(e.default.then(P=>(i=hM(P),{__key:t,__value:P})).catch(P=>{throw i=hje(P),P})):hM(e.default),a,u=new Map;function p(P,k){let q=k.then(U=>{var H,X;return((X=((H=P.getState().nextTree)!==null&&H!==void 0?H:P.getState().currentTree).atomValues.get(t))===null||X===void 0?void 0:X.contents)===q&&gje(P,L,U),{__key:t,__value:U}}).catch(U=>{var H,X;throw((X=((H=P.getState().nextTree)!==null&&H!==void 0?H:P.getState().currentTree).atomValues.get(t))===null||X===void 0?void 0:X.contents)===q&&Rfr(P,L,hje(U)),U});return q}function h(P,k,q){o++;let U=P.getState().knownAtoms.has(t);if(P.getState().knownAtoms.add(t),i.state==="loading"){let ue=()=>{var Me;((Me=P.getState().nextTree)!==null&&Me!==void 0?Me:P.getState().currentTree).atomValues.has(t)||kfr(P,L)};i.contents.then(ue).catch(ue)}let H=O0,X=null;if(e.effects_UNSTABLE!=null&&!U){let ue=!0,Me=Ee=>Ze=>{if(ue){let Qe=H instanceof Db||Vi(H)?i.state==="hasValue"?i.contents:O0:H;H=typeof Ze=="function"?Ze(Qe):Ze,Vi(H)&&(H=H.then(Fe=>(X={effect:Ee,value:Fe},Fe)))}else{if(Vi(Ze))throw new Error("Setting atoms to async values is not implemented.");typeof Ze!="function"&&(X={effect:Ee,value:Ze}),gje(P,L,typeof Ze=="function"?Qe=>{let Fe=Ze(Qe);return X={effect:Ee,value:Fe},Fe}:Ze)}},ke=Ee=>()=>Me(Ee)(O0),Te=Ee=>Ze=>{P.subscribeToTransactions(Qe=>{var Fe;let{currentTree:ze,previousTree:Ne}=Qe.getState();Ne||(Hp("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),Ne=ze);let et=(Fe=ze.atomValues.get(t))!==null&&Fe!==void 0?Fe:i;if(et.state==="hasValue"){var st,ft,Ye,tt;let lt=et.contents,je=(st=Ne.atomValues.get(t))!==null&&st!==void 0?st:i,ge=je.state==="hasValue"?je.contents:O0;((ft=X)===null||ft===void 0?void 0:ft.effect)!==Ee||((Ye=X)===null||Ye===void 0?void 0:Ye.value)!==lt?Ze(lt,ge):((tt=X)===null||tt===void 0?void 0:tt.effect)===Ee&&(X=null)}},t)};for(let Ee of(ee=e.effects_UNSTABLE)!==null&&ee!==void 0?ee:[]){var ee;let Ze=Ee({node:L,trigger:q,setSelf:Me(Ee),resetSelf:ke(Ee),onSet:Te(Ee)});if(Ze!=null){var ne;u.set(P,[...((ne=u.get(P))!==null&&ne!==void 0?ne:[]),Ze])}}ue=!1}if(!(H instanceof Db)){var me;let ue=Vi(H)?mje(p(P,H)):hM(H);k.atomValues.set(t,ue),(me=P.getState().nextTree)===null||me===void 0||me.atomValues.set(t,ue)}return()=>{var ue;o--,(ue=u.get(P))===null||ue===void 0||ue.forEach(Me=>Me()),u.delete(P),P.getState().knownAtoms.delete(t)}}function g(P,k){var q,U,H;return(q=(U=k.atomValues.get(t))!==null&&U!==void 0?U:(H=a)===null||H===void 0?void 0:H[1])!==null&&q!==void 0?q:i}function x(P,k){if(k.atomValues.has(t))return vo(k.atomValues.get(t));if(k.nonvalidatedAtoms.has(t)){if(a!=null)return a;if(r==null)return HX(`Tried to restore a persisted value for atom ${t} but it has no persistence settings.`),i;let q=k.nonvalidatedAtoms.get(t),U=r.validator(q,O0);return a=U instanceof Db?i:hM(U),a}else return i}function b(){a=void 0}function T(P,k,q){if(k.atomValues.has(t)){let U=vo(k.atomValues.get(t));if(U.state==="hasValue"&&q===U.contents)return new Map}else if(!k.nonvalidatedAtoms.has(t)&&q instanceof Db)return new Map;return a=void 0,new Map().set(t,hM(q))}function A(){return u6e(t)!==void 0&&o<=0}let L=Ofr({key:t,nodeType:"atom",peek:g,get:x,set:T,init:h,invalidate:b,shouldDeleteConfigOnRelease:A,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return L}function c6e(e){let n=e,{default:t}=n,r=wn(n,["default"]);return Pfr(t)?zfr(Ft(Se({},r),{default:t})):qfr(Ft(Se({},r),{default:t}))}function zfr(e){let t=c6e(Ft(Se({},e),{default:O0,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:Ft(Se({},e.persistence_UNSTABLE),{validator:n=>n instanceof Db?n:vo(e.persistence_UNSTABLE).validator(n,O0)}),effects_UNSTABLE:e.effects_UNSTABLE})),r=Y3({key:`${e.key}__withFallback`,get:({get:n})=>{let o=n(t);return o instanceof Db?e.default:o},set:({set:n},o)=>n(t,o),dangerouslyAllowMutability:e.dangerouslyAllowMutability});return Lfr(r.key,u6e(e.key)),r}var f6e=c6e,qX=class{constructor(t){var r;$n(this,"_map",void 0),$n(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=t==null?void 0:t.mapKey)!==null&&r!==void 0?r:n=>n}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,r){this._map.set(this._keyMapper(t),r)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}},Ffr={MapCache:qX},Ufr=Ffr.MapCache,Bfr=Object.freeze({__proto__:null,MapCache:Ufr}),{LRUCache:vje}=l6e,{MapCache:Vfr}=Bfr,P3={equality:"reference",eviction:"none",maxSize:1/0};function Gfr({equality:e=P3.equality,eviction:t=P3.eviction,maxSize:r=P3.maxSize}=P3){let n=Hfr(e);return Wfr(t,r,n)}function Hfr(e){switch(e){case"reference":return t=>t;case"value":return t=>oP(t);}throw new Error(`Unrecognized equality policy ${e}`)}function Wfr(e,t,r){switch(e){case"keep-all":return new Vfr({mapKey:r});case"lru":return new vje({mapKey:r,maxSize:vo(t)});case"most-recent":return new vje({mapKey:r,maxSize:1});}throw new Error(`Unrecognized eviction policy ${e}`)}var p6e=Gfr,{setConfigDeletionHandler:$fr}=kc;function Yfr(e){var t,r;let n=p6e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let g=e,{cachePolicyForParams_UNSTABLE:u}=g,p=wn(g,["cachePolicyForParams_UNSTABLE"]),h=f6e(Ft(Se({},p),{key:`${e.key}__${(i=oP(o))!==null&&i!==void 0?i:"void"}`,default:typeof e.default=="function"?e.default(o):e.default,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,effects_UNSTABLE:typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(o):e.effects_UNSTABLE}));return n.set(o,h),$fr(h.key,()=>{n.delete(o)}),h}}var Zfr=Yfr,{setConfigDeletionHandler:Kfr}=kc,Xfr=0;function Jfr(e){var t,r;let n=p6e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let u=`${e.key}__selectorFamily/${(i=oP(o,{allowFunctions:!0}))!==null&&i!==void 0?i:"void"}/${Xfr++}`,p=b=>e.get(o)(b),h=e.cachePolicy_UNSTABLE,g=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,x;if(e.set!=null){let b=e.set;x=Y3({key:u,get:p,set:(A,L)=>b(o)(A,L),cachePolicy_UNSTABLE:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:g})}else x=Y3({key:u,get:p,cachePolicy_UNSTABLE:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:g});return n.set(o,x),Kfr(x.key,()=>{n.delete(o)}),x}}var iv=Jfr,Qfr=iv({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function epr(e){return Qfr(e)}var tpr=epr,rpr=iv({key:"__error",get:e=>()=>{throw new Error(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function npr(e){return rpr(e)}var opr=npr;function ipr(e){return e}var apr=ipr,{loadableWithError:d6e,loadableWithPromise:h6e,loadableWithValue:m6e}=xM;function iP(e,t){let r=Array(t.length).fill(void 0),n=Array(t.length).fill(void 0);for(let[o,i]of t.entries())try{r[o]=e(i)}catch(a){n[o]=a}return[r,n]}function spr(e){return e!=null&&!Vi(e)}function aP(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function lJ(e){return e!=null&&typeof e=="object"&&e.hasOwnProperty("__value")?e.__value:e}function zX(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((r,n,o)=>Ft(Se({},r),{[n]:t[o]}),{})}function Ob(e,t,r){let n=r.map((o,i)=>o==null?m6e(t[i]):Vi(o)?h6e(o):d6e(o));return zX(e,n)}function lpr(e,t){return t.map((r,n)=>r===void 0?e[n]:r)}var upr=iv({key:"__waitForNone",get:e=>({get:t})=>{let r=aP(e),[n,o]=iP(t,r);return Ob(e,n,o)},dangerouslyAllowMutability:!0}),cpr=iv({key:"__waitForAny",get:e=>({get:t})=>{let r=aP(e),[n,o]=iP(t,r);return o.some(i=>!Vi(i))?Ob(e,n,o):new Promise(i=>{for(let[a,u]of o.entries())Vi(u)&&u.then(p=>{n[a]=lJ(p),o[a]=void 0,i(Ob(e,n,o))}).catch(p=>{o[a]=p,i(Ob(e,n,o))})})},dangerouslyAllowMutability:!0}),fpr=iv({key:"__waitForAll",get:e=>({get:t})=>{let r=aP(e),[n,o]=iP(t,r);if(o.every(a=>a==null))return zX(e,n);let i=o.find(spr);if(i!=null)throw i;return Promise.all(o).then(a=>zX(e,lpr(n,a).map(lJ)))},dangerouslyAllowMutability:!0}),ppr=iv({key:"__waitForAllSettled",get:e=>({get:t})=>{let r=aP(e),[n,o]=iP(t,r);return o.every(i=>!Vi(i))?Ob(e,n,o):Promise.all(o.map((i,a)=>Vi(i)?i.then(u=>{n[a]=lJ(u),o[a]=void 0}).catch(u=>{n[a]=void 0,o[a]=u}):null)).then(()=>Ob(e,n,o))},dangerouslyAllowMutability:!0}),dpr=iv({key:"__noWait",get:e=>({get:t})=>{try{return m6e(t(e))}catch(r){return Vi(r)?h6e(r):d6e(r)}},dangerouslyAllowMutability:!0}),hpr={waitForNone:upr,waitForAny:cpr,waitForAll:fpr,waitForAllSettled:ppr,noWait:dpr},{batchUpdates:mpr,setBatcher:gpr}=KX,{DefaultValue:vpr}=kc,{RecoilRoot:ypr}=tP,{isRecoilValue:_pr}=ov,{retentionZone:xpr}=K3,{freshSnapshot:bpr}=eP,{useGotoRecoilSnapshot:wpr,useRecoilCallback:Epr,useRecoilSnapshot:Spr,useRecoilState:Ipr,useRecoilStateLoadable:Tpr,useRecoilTransaction:Mpr,useRecoilTransactionObserver:Cpr,useRecoilValue:Apr,useRecoilValueLoadable:Dpr,useResetRecoilState:Npr,useRetain:Opr,useSetRecoilState:Lpr,useSetUnvalidatedAtomValues:Ppr,useTransactionObservation_DEPRECATED:kpr}=Vcr,{noWait:Rpr,waitForAll:jpr,waitForAllSettled:qpr,waitForAny:zpr,waitForNone:Fpr}=hpr,Un={DefaultValue:vpr,RecoilRoot:ypr,useRecoilBridgeAcrossReactRoots_UNSTABLE:Jcr,atom:f6e,selector:Y3,retentionZone:xpr,atomFamily:Zfr,selectorFamily:iv,constSelector:tpr,errorSelector:opr,readOnlySelector:apr,useRecoilValue:Apr,useRecoilValueLoadable:Dpr,useRecoilState:Ipr,useRecoilStateLoadable:Tpr,useSetRecoilState:Lpr,useResetRecoilState:Npr,useGetRecoilValueInfo_UNSTABLE:$cr,useRetain:Opr,useRecoilCallback:Epr,useRecoilTransaction_UNSTABLE:Mpr,useGotoRecoilSnapshot:wpr,useRecoilSnapshot:Spr,useRecoilTransactionObserver_UNSTABLE:Cpr,useTransactionObservation_UNSTABLE:kpr,useSetUnvalidatedAtomValues_UNSTABLE:Ppr,noWait:Rpr,waitForNone:Fpr,waitForAny:zpr,waitForAll:jpr,waitForAllSettled:qpr,isRecoilValue:_pr,batchUpdates:mpr,setBatcher:gpr,snapshot_UNSTABLE:bpr},WXr=Un.DefaultValue,g6e=Un.RecoilRoot,$Xr=Un.useRecoilBridgeAcrossReactRoots_UNSTABLE,en=Un.atom,lu=Un.selector,YXr=Un.retentionZone,ZXr=Un.atomFamily,KXr=Un.selectorFamily,XXr=Un.constSelector,JXr=Un.errorSelector,QXr=Un.readOnlySelector,vt=Un.useRecoilValue,eJr=Un.useRecoilValueLoadable,Nn=Un.useRecoilState,tJr=Un.useRecoilStateLoadable,Ar=Un.useSetRecoilState,rJr=Un.useResetRecoilState,nJr=Un.useGetRecoilValueInfo_UNSTABLE,oJr=Un.useRetain,Rr=Un.useRecoilCallback,iJr=Un.useRecoilTransaction_UNSTABLE,aJr=Un.useGotoRecoilSnapshot,sJr=Un.useRecoilSnapshot,lJr=Un.useRecoilTransactionObserver_UNSTABLE,uJr=Un.useTransactionObservation_UNSTABLE,cJr=Un.useSetUnvalidatedAtomValues_UNSTABLE,fJr=Un.noWait,pJr=Un.waitForNone,dJr=Un.waitForAny,hJr=Un.waitForAll,mJr=Un.waitForAllSettled,gJr=Un.isRecoilValue,vJr=Un.batchUpdates,yJr=Un.setBatcher,_Jr=Un.snapshot_UNSTABLE;var av=Z(we());var sP=Z(we()),Upr=e=>{let t=sP.useRef(e);return sP.useEffect(()=>{t.current=e}),t},lP=Upr;var Bpr=(e,t=100,r=!1)=>{let n=lP(e),o=av.useRef(),i=[t,r,n];function a(){o.current&&clearTimeout(o.current),o.current=void 0}av.useEffect(()=>a,i);function u(){o.current=void 0}return av.useCallback(function(){let p=arguments,{current:h}=o;if(h===void 0&&r)return o.current=setTimeout(u,t),n.current.apply(null,p);h&&clearTimeout(h),o.current=setTimeout(()=>{o.current=void 0,n.current.apply(null,p)},t)},i)},v6e=(e,t,r)=>{let n=av.useState(e);return[n[0],Bpr(n[1],t,r)]};var Rb=Z(we());function Vpr(e,t,r,n){let o=Rb.useRef(r),i=Rb.useRef(n);Rb.useEffect(()=>{o.current=r,i.current=n}),Rb.useEffect(()=>{let a=e&&"current"in e?e.current:e;if(!a)return;let u=0;function p(...g){u||o.current.apply(this,g)}a.addEventListener(t,p);let h=i.current;return()=>{u=1,a.removeEventListener(t,p),h&&h()}},[e,t])}var uP=Vpr;var Gpr={},EM=typeof window=="undefined"?null:window,Hpr=EM&&typeof EM.visualViewport!="undefined"?EM.visualViewport:null,y6e=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],Wpr=function(e){e===void 0&&(e=Gpr);let{wait:t,leading:r,initialWidth:n=0,initialHeight:o=0}=e,[i,a]=v6e(typeof document=="undefined"?[n,o]:y6e,t,r),u=()=>a(y6e);return uP(EM,"resize",u),uP(Hpr,"resize",u),uP(EM,"orientationchange",u),i};var _6e=e=>Wpr(e)[0];var Eat=Z(xt(),1);function uJ(e){var t=null,r=function(){return t==null&&(t=e()),t};return r}function M6e(e,t){return e.filter(function(r){return r!==t})}function C6e(e,t){var r=new Set,n=function(a){return r.add(a)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i){return o.push(i)}),o}function Zpr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Kpr(e,t,r){return t&&A6e(e.prototype,t),r&&A6e(e,r),e}function D6e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var N6e=function(){function e(t){Zpr(this,e),D6e(this,"entered",[]),D6e(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return Kpr(e,[{key:"enter",value:function(r){var n=this,o=this.entered.length,i=function(u){return n.isNodeInDocument(u)&&(!u.contains||u.contains(r))};return this.entered=C6e(this.entered.filter(i),[r]),o===0&&this.entered.length>0}},{key:"leave",value:function(r){var n=this.entered.length;return this.entered=M6e(this.entered.filter(this.isNodeInDocument),r),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),e}();var O6e=uJ(function(){return /firefox/i.test(navigator.userAgent)}),cJ=uJ(function(){return!!window.safari});function Xpr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jpr(e,t,r){return t&&L6e(e.prototype,t),r&&L6e(e,r),e}function SM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fJ=function(){function e(t,r){Xpr(this,e),SM(this,"xs",void 0),SM(this,"ys",void 0),SM(this,"c1s",void 0),SM(this,"c2s",void 0),SM(this,"c3s",void 0);for(var n=t.length,o=[],i=0;i<n;i++)o.push(i);o.sort(function(ue,Me){return t[ue]<t[Me]?-1:1});for(var a=[],u=[],p=[],h,g,x=0;x<n-1;x++)h=t[x+1]-t[x],g=r[x+1]-r[x],u.push(h),a.push(g),p.push(g/h);for(var b=[p[0]],T=0;T<u.length-1;T++){var A=p[T],L=p[T+1];if(A*L<=0)b.push(0);else{h=u[T];var P=u[T+1],k=h+P;b.push(3*k/((k+P)/A+(k+h)/L))}}b.push(p[p.length-1]);for(var q=[],U=[],H,X=0;X<b.length-1;X++){H=p[X];var ee=b[X],ne=1/u[X],me=ee+b[X+1]-H-H;q.push((H-ee-me)*ne),U.push(me*ne*ne)}this.xs=t,this.ys=r,this.c1s=b,this.c2s=q,this.c3s=U}return Jpr(e,[{key:"interpolate",value:function(r){var n=this.xs,o=this.ys,i=this.c1s,a=this.c2s,u=this.c3s,p=n.length-1;if(r===n[p])return o[p];for(var h=0,g=u.length-1,x;h<=g;){x=Math.floor(.5*(h+g));var b=n[x];if(b<r)h=x+1;else if(b>r)g=x-1;else return o[x]}p=Math.max(0,g);var T=r-n[p],A=T*T;return o[p]+i[p]*T+a[p]*A+u[p]*T*A}}]),e}();var Qpr=1;function pJ(e){var t=e.nodeType===Qpr?e:e.parentElement;if(!t)return null;var r=t.getBoundingClientRect(),n=r.top,o=r.left;return{x:o,y:n}}function IM(e){return{x:e.clientX,y:e.clientY}}function edr(e){var t;return e.nodeName==="IMG"&&(O6e()||!((t=document.documentElement)!==null&&t!==void 0&&t.contains(e)))}function tdr(e,t,r,n){var o=e?t.width:r,i=e?t.height:n;return cJ()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}function P6e(e,t,r,n,o){var i=edr(t),a=i?e:t,u=pJ(a),p={x:r.x-u.x,y:r.y-u.y},h=e.offsetWidth,g=e.offsetHeight,x=n.anchorX,b=n.anchorY,T=tdr(i,t,h,g),A=T.dragPreviewWidth,L=T.dragPreviewHeight,P=function(){var ne=new fJ([0,.5,1],[p.y,p.y/g*L,p.y+L-g]),me=ne.interpolate(b);return cJ()&&i&&(me+=(window.devicePixelRatio-1)*L),me},k=function(){var ne=new fJ([0,.5,1],[p.x,p.x/h*A,p.x+A-h]);return ne.interpolate(x)},q=o.offsetX,U=o.offsetY,H=q===0||q,X=U===0||U;return{x:H?q:k(),y:X?U:P()}}var sv={};n2(sv,{FILE:()=>dJ,HTML:()=>gJ,TEXT:()=>mJ,URL:()=>hJ});var dJ="__NATIVE_FILE__",hJ="__NATIVE_URL__",mJ="__NATIVE_TEXT__",gJ="__NATIVE_HTML__";function cP(e,t,r){var n=t.reduce(function(o,i){return o||e.getData(i)},"");return n!=null?n:r}var jb;function fP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pP=(jb={},fP(jb,dJ,{exposeProperties:{files:function(t){return Array.prototype.slice.call(t.files)},items:function(t){return t.items},dataTransfer:function(t){return t}},matchesTypes:["Files"]}),fP(jb,gJ,{exposeProperties:{html:function(t,r){return cP(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Html","text/html"]}),fP(jb,hJ,{exposeProperties:{urls:function(t,r){return cP(t,r,"").split(`
`)},dataTransfer:function(t){return t}},matchesTypes:["Url","text/uri-list"]}),fP(jb,mJ,{exposeProperties:{text:function(t,r){return cP(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Text","text/plain"]}),jb);function rdr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ndr(e,t,r){return t&&k6e(e.prototype,t),r&&k6e(e,r),e}function R6e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j6e=function(){function e(t){rdr(this,e),R6e(this,"item",void 0),R6e(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return ndr(e,[{key:"initializeExposedProperties",value:function(){var r=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(r.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,"\" until the drop event.")),null}})})}},{key:"loadDataTransfer",value:function(r){var n=this;if(r){var o={};Object.keys(this.config.exposeProperties).forEach(function(i){o[i]={value:n.config.exposeProperties[i](r,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,o)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(r,n){return n===r.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();function q6e(e,t){var r=new j6e(pP[e]);return r.loadDataTransfer(t),r}function dP(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(pP).filter(function(r){var n=pP[r].matchesTypes;return n.some(function(o){return t.indexOf(o)>-1})})[0]||null}function odr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function idr(e,t,r){return t&&z6e(e.prototype,t),r&&z6e(e,r),e}function vJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F6e=function(){function e(t,r){odr(this,e),vJ(this,"ownerDocument",null),vJ(this,"globalContext",void 0),vJ(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=r}return idr(e,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}},{key:"document",get:function(){var r;return(r=this.globalContext)!==null&&r!==void 0&&r.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var r;return((r=this.optionsArgs)===null||r===void 0?void 0:r.rootElement)||this.window}}]),e}();function U6e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function B6e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?U6e(Object(r),!0).forEach(function(n){On(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U6e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function adr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function sdr(e,t,r){return t&&V6e(e.prototype,t),r&&V6e(e,r),e}function On(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var G6e=function(){function e(t,r,n){var o=this;adr(this,e),On(this,"options",void 0),On(this,"actions",void 0),On(this,"monitor",void 0),On(this,"registry",void 0),On(this,"enterLeaveCounter",void 0),On(this,"sourcePreviewNodes",new Map),On(this,"sourcePreviewNodeOptions",new Map),On(this,"sourceNodes",new Map),On(this,"sourceNodeOptions",new Map),On(this,"dragStartSourceIds",null),On(this,"dropTargetIds",[]),On(this,"dragEnterTargetIds",[]),On(this,"currentNativeSource",null),On(this,"currentNativeHandle",null),On(this,"currentDragSourceNode",null),On(this,"altKeyPressed",!1),On(this,"mouseMoveTimeoutTimer",null),On(this,"asyncEndDragFrameId",null),On(this,"dragOverTargetIds",null),On(this,"lastClientOffset",null),On(this,"hoverRafId",null),On(this,"getSourceClientOffset",function(i){var a=o.sourceNodes.get(i);return a&&pJ(a)||null}),On(this,"endDragNativeItem",function(){o.isDraggingNativeItem()&&(o.actions.endDrag(),o.currentNativeHandle&&o.registry.removeSource(o.currentNativeHandle),o.currentNativeHandle=null,o.currentNativeSource=null)}),On(this,"isNodeInDocument",function(i){return!!(i&&o.document&&o.document.body&&o.document.body.contains(i))}),On(this,"endDragIfSourceWasRemovedFromDOM",function(){var i=o.currentDragSourceNode;i==null||o.isNodeInDocument(i)||o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),On(this,"handleTopDragStartCapture",function(){o.clearCurrentDragSourceNode(),o.dragStartSourceIds=[]}),On(this,"handleTopDragStart",function(i){if(!i.defaultPrevented){var a=o.dragStartSourceIds;o.dragStartSourceIds=null;var u=IM(i);o.monitor.isDragging()&&o.actions.endDrag(),o.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:o.getSourceClientOffset,clientOffset:u});var p=i.dataTransfer,h=dP(p);if(o.monitor.isDragging()){if(p&&typeof p.setDragImage=="function"){var g=o.monitor.getSourceId(),x=o.sourceNodes.get(g),b=o.sourcePreviewNodes.get(g)||x;if(b){var T=o.getCurrentSourcePreviewNodeOptions(),A=T.anchorX,L=T.anchorY,P=T.offsetX,k=T.offsetY,q={anchorX:A,anchorY:L},U={offsetX:P,offsetY:k},H=P6e(x,b,u,q,U);p.setDragImage(b,H.x,H.y)}}try{p==null||p.setData("application/json",{})}catch(ne){}o.setCurrentDragSourceNode(i.target);var X=o.getCurrentSourcePreviewNodeOptions(),ee=X.captureDraggingState;ee?o.actions.publishDragSource():setTimeout(function(){return o.actions.publishDragSource()},0)}else if(h)o.beginDragNativeItem(h);else{if(p&&!p.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}}}),On(this,"handleTopDragEndCapture",function(){o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),On(this,"handleTopDragEnterCapture",function(i){o.dragEnterTargetIds=[];var a=o.enterLeaveCounter.enter(i.target);if(!(!a||o.monitor.isDragging())){var u=i.dataTransfer,p=dP(u);p&&o.beginDragNativeItem(p,u)}}),On(this,"handleTopDragEnter",function(i){var a=o.dragEnterTargetIds;if(o.dragEnterTargetIds=[],!!o.monitor.isDragging()){o.altKeyPressed=i.altKey,a.length>0&&o.actions.hover(a,{clientOffset:IM(i)});var u=a.some(function(p){return o.monitor.canDropOnTarget(p)});u&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect()))}}),On(this,"handleTopDragOverCapture",function(){o.dragOverTargetIds=[]}),On(this,"handleTopDragOver",function(i){var a=o.dragOverTargetIds;if(o.dragOverTargetIds=[],!o.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}o.altKeyPressed=i.altKey,o.lastClientOffset=IM(i),o.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(o.hoverRafId=requestAnimationFrame(function(){o.monitor.isDragging()&&o.actions.hover(a||[],{clientOffset:o.lastClientOffset}),o.hoverRafId=null}));var u=(a||[]).some(function(p){return o.monitor.canDropOnTarget(p)});u?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect())):o.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))}),On(this,"handleTopDragLeaveCapture",function(i){o.isDraggingNativeItem()&&i.preventDefault();var a=o.enterLeaveCounter.leave(i.target);a&&o.isDraggingNativeItem()&&setTimeout(function(){return o.endDragNativeItem()},0)}),On(this,"handleTopDropCapture",function(i){if(o.dropTargetIds=[],o.isDraggingNativeItem()){var a;i.preventDefault(),(a=o.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else dP(i.dataTransfer)&&i.preventDefault();o.enterLeaveCounter.reset()}),On(this,"handleTopDrop",function(i){var a=o.dropTargetIds;o.dropTargetIds=[],o.actions.hover(a,{clientOffset:IM(i)}),o.actions.drop({dropEffect:o.getCurrentDropEffect()}),o.isDraggingNativeItem()?o.endDragNativeItem():o.monitor.isDragging()&&o.actions.endDrag()}),On(this,"handleSelectStart",function(i){var a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))}),this.options=new F6e(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new N6e(this.isNodeInDocument)}return sdr(e,[{key:"profile",value:function(){var r,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((r=this.dragStartSourceIds)===null||r===void 0?void 0:r.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var r=this.rootElement;if(r!==void 0){if(r.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");r.__isReactDndBackendSetUp=!0,this.addEventListeners(r)}}},{key:"teardown",value:function(){var r=this.rootElement;if(r!==void 0&&(r.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(r,n,o){var i=this;return this.sourcePreviewNodeOptions.set(r,o),this.sourcePreviewNodes.set(r,n),function(){i.sourcePreviewNodes.delete(r),i.sourcePreviewNodeOptions.delete(r)}}},{key:"connectDragSource",value:function(r,n,o){var i=this;this.sourceNodes.set(r,n),this.sourceNodeOptions.set(r,o);var a=function(h){return i.handleDragStart(h,r)},u=function(h){return i.handleSelectStart(h)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",u),function(){i.sourceNodes.delete(r),i.sourceNodeOptions.delete(r),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",u),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(r,n){var o=this,i=function(h){return o.handleDragEnter(h,r)},a=function(h){return o.handleDragOver(h,r)},u=function(h){return o.handleDrop(h,r)};return n.addEventListener("dragenter",i),n.addEventListener("dragover",a),n.addEventListener("drop",u),function(){n.removeEventListener("dragenter",i),n.removeEventListener("dragover",a),n.removeEventListener("drop",u)}}},{key:"addEventListeners",value:function(r){r.addEventListener&&(r.addEventListener("dragstart",this.handleTopDragStart),r.addEventListener("dragstart",this.handleTopDragStartCapture,!0),r.addEventListener("dragend",this.handleTopDragEndCapture,!0),r.addEventListener("dragenter",this.handleTopDragEnter),r.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.addEventListener("dragover",this.handleTopDragOver),r.addEventListener("dragover",this.handleTopDragOverCapture,!0),r.addEventListener("drop",this.handleTopDrop),r.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(r){r.removeEventListener&&(r.removeEventListener("dragstart",this.handleTopDragStart),r.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),r.removeEventListener("dragend",this.handleTopDragEndCapture,!0),r.removeEventListener("dragenter",this.handleTopDragEnter),r.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.removeEventListener("dragover",this.handleTopDragOver),r.removeEventListener("dragover",this.handleTopDragOverCapture,!0),r.removeEventListener("drop",this.handleTopDrop),r.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(r);return B6e({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(r);return B6e({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var r=this.monitor.getItemType();return Object.keys(sv).some(function(n){return sv[n]===r})}},{key:"beginDragNativeItem",value:function(r,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=q6e(r,n),this.currentNativeHandle=this.registry.addSource(r,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(r){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=r;var o=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var i;return(i=n.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},o)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var r;(r=this.window)===null||r===void 0||r.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(r,n){r.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(r,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(r,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(r,n){this.dropTargetIds.unshift(n)}}]),e}();var H6e=function(t,r,n){return new G6e(t,r,n)};function W6e(e,t,...r){if(ldr()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;n=new Error(t.replace(/%s/g,function(){return r[o++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function ldr(){return typeof process!="undefined"&&!0}var Ph;(function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"})(Ph||(Ph={}));var udr={Left:1,Right:2,Center:4},cdr={Left:0,Center:1,Right:2};function hP(e){return e.button===void 0||e.button===cdr.Left}function $6e(e){return e.buttons===void 0||(e.buttons&udr.Left)===0}function mP(e){return!!e.targetTouches}var fdr=1;function Y6e(e){let t=e.nodeType===fdr?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function pdr(e,t){if(e.targetTouches.length===1)return TM(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return TM(e.touches[0])}function TM(e,t){return mP(e)?pdr(e,t):{x:e.clientX,y:e.clientY}}function Z6e(e,t,r,n){return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(n-t),2))}function K6e(e,t,r,n,o){if(!o)return!1;let i=Math.atan2(n-t,r-e)*180/Math.PI+180;for(let a=0;a<o.length;++a){let u=o[a];if(u&&(u.start==null||i>=u.start)&&(u.end==null||i<=u.end))return!0}return!1}var yJ=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return e=!0,!0}}))}catch(t){}return e})();var gP=class{get delay(){var t;return(t=this.args.delay)!==null&&t!==void 0?t:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var t;return(t=this.args.ignoreContextMenu)!==null&&t!==void 0?t:!1}get enableHoverOutsideTarget(){var t;return(t=this.args.enableHoverOutsideTarget)!==null&&t!==void 0?t:!1}get enableKeyboardEvents(){var t;return(t=this.args.enableKeyboardEvents)!==null&&t!==void 0?t:!1}get enableMouseEvents(){var t;return(t=this.args.enableMouseEvents)!==null&&t!==void 0?t:!1}get enableTouchEvents(){var t;return(t=this.args.enableTouchEvents)!==null&&t!==void 0?t:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get delayMouseStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}get document(){var t;if(!((t=this.context)===null||t===void 0)&&t.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var t;return((t=this.args)===null||t===void 0?void 0:t.rootElement)||this.document}constructor(t,r){this.args=t,this.context=r}};var MM={[Ph.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Ph.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Ph.keyboard]:{keydown:"keydown"}},vP=class e{profile(){var t;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(W6e(!e.isSetUp,"Cannot have two Touch backends at the same time."),e.isSetUp=!0,this.addEventListener(t,"start",this.getTopMoveStartHandler()),this.addEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(t,"move",this.handleTopMove),this.addEventListener(t,"move",this.handleTopMoveCapture,!0),this.addEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,"keydown",this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(t,"start",this.handleTopMoveStart),this.removeEventListener(t,"move",this.handleTopMoveCapture,!0),this.removeEventListener(t,"move",this.handleTopMove),this.removeEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(t,r,n,o=!1){let i=yJ?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let u=MM[a][r];u&&t.addEventListener(u,n,i)})}removeEventListener(t,r,n,o=!1){let i=yJ?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let u=MM[a][r];u&&t.removeEventListener(u,n,i)})}connectDragSource(t,r){let n=this.handleMoveStart.bind(this,t);return this.sourceNodes.set(t,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(t),this.removeEventListener(r,"start",n)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDropTarget(t,r){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let o=i=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(i.type){case MM.mouse.move:a={x:i.clientX,y:i.clientY};break;case MM.touch.move:var u,p;a={x:((u=i.touches[0])===null||u===void 0?void 0:u.clientX)||0,y:((p=i.touches[0])===null||p===void 0?void 0:p.clientY)||0};break;}let h=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,g=h&&r.contains(h);if(h===r||g)return this.handleMove(i,t)};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(t,r),()=>{this.document&&(this.targetNodes.delete(t),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(t){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=t,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{t&&!t.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!t||!t.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(t.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(t,r,n){this.getSourceClientOffset=o=>{let i=this.sourceNodes.get(o);return i&&Y6e(i)},this.handleTopMoveStartCapture=o=>{hP(o)&&(this.moveStartSourceIds=[])},this.handleMoveStart=o=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(o)},this.handleTopMoveStart=o=>{if(!hP(o))return;let i=TM(o);i&&(mP(o)&&(this.lastTargetTouchFallback=o.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=o=>{if(!hP(o))return;let i=o.type===MM.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,o),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(o,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=o=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:i,dragOverTargetIds:a}=this,u=this.options.enableHoverOutsideTarget,p=TM(o,this.lastTargetTouchFallback);if(!p)return;if(this._isScrolling||!this.monitor.isDragging()&&K6e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,p.x,p.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&Z6e(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,p.x,p.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let h=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(h),this.actions.publishDragSource(),o.cancelable&&o.preventDefault();let g=(a||[]).map(A=>this.targetNodes.get(A)).filter(A=>!!A),x=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(p.x,p.y,g):this.document.elementsFromPoint(p.x,p.y),b=[];for(let A in x){if(!x.hasOwnProperty(A))continue;let L=x[A];for(L!=null&&b.push(L);L;)L=L.parentElement,L&&b.indexOf(L)===-1&&b.push(L)}let T=b.filter(A=>g.indexOf(A)>-1).map(A=>this._getDropTargetId(A)).filter(A=>!!A).filter((A,L,P)=>P.indexOf(A)===L);if(u)for(let A in this.targetNodes){let L=this.targetNodes.get(A);if(h&&L&&L.contains(h)&&T.indexOf(A)===-1){T.unshift(A);break}}T.reverse(),this.actions.hover(T,{clientOffset:p})},this._getDropTargetId=o=>{let i=this.targetNodes.keys(),a=i.next();for(;a.done===!1;){let u=a.value;if(o===this.targetNodes.get(u))return u;a=i.next()}},this.handleTopMoveEndCapture=o=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!$6e(o)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}o.cancelable&&o.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=o=>{o.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new gP(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Ph.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Ph.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Ph.keyboard)}};var X6e=function(t,r={},n={}){return new vP(t,r,n)};function _J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ddr(e,t,r){hdr(e,t),t.set(e,r)}function hdr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function yP(e,t){var r=J6e(e,t,"get");return mdr(e,r)}function mdr(e,t){return t.get?t.get.call(e):t.value}function gdr(e,t,r){var n=J6e(e,t,"set");return vdr(e,n,r),r}function J6e(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function vdr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var qb=new WeakMap,_P=class{constructor(){ddr(this,qb,{writable:!0,value:void 0}),_J(this,"register",t=>{yP(this,qb).push(t)}),_J(this,"unregister",t=>{let r;for(;(r=yP(this,qb).indexOf(t))!==-1;)yP(this,qb).splice(r,1)}),_J(this,"backendChanged",t=>{for(let r of yP(this,qb))r.backendChanged(t)}),gdr(this,qb,[])}};function Ff(e,t,r){ydr(e,t),t.set(e,r)}function ydr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Wp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dn(e,t){var r=rqe(e,t,"get");return _dr(e,r)}function _dr(e,t){return t.get?t.get.call(e):t.value}function zb(e,t,r){var n=rqe(e,t,"set");return xdr(e,n,r),r}function rqe(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function xdr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var Rc=new WeakMap,xP=new WeakMap,jc=new WeakMap,lv=new WeakMap,k0=new WeakMap,Q6e=new WeakMap,eqe=new WeakMap,tqe=new WeakMap,xJ=new WeakMap,bJ=new WeakMap,bP=new WeakMap,CM=class e{constructor(t,r,n){if(Ff(this,Rc,{writable:!0,value:void 0}),Ff(this,xP,{writable:!0,value:void 0}),Ff(this,jc,{writable:!0,value:void 0}),Ff(this,lv,{writable:!0,value:void 0}),Ff(this,k0,{writable:!0,value:void 0}),Ff(this,Q6e,{writable:!0,value:(o,i,a)=>{var u,p;if(!a.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(a)));let h=a.backend(o,i,a.options),g=a.id,x=!a.id&&h&&h.constructor;if(x&&(g=h.constructor.name),g)x&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(a),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(dn(this,jc)[g])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(a)," (conflicts with: ").concat(JSON.stringify(dn(this,jc)[g]),")"));return{id:g,instance:h,preview:(u=a.preview)!==null&&u!==void 0?u:!1,transition:a.transition,skipDispatchOnTransition:(p=a.skipDispatchOnTransition)!==null&&p!==void 0?p:!1}}}),Wp(this,"setup",()=>{if(typeof window!="undefined"){if(e.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");e.isSetUp=!0,dn(this,eqe).call(this,window),dn(this,jc)[dn(this,Rc)].instance.setup()}}),Wp(this,"teardown",()=>{typeof window!="undefined"&&(e.isSetUp=!1,dn(this,tqe).call(this,window),dn(this,jc)[dn(this,Rc)].instance.teardown())}),Wp(this,"connectDragSource",(o,i,a)=>dn(this,bP).call(this,"connectDragSource",o,i,a)),Wp(this,"connectDragPreview",(o,i,a)=>dn(this,bP).call(this,"connectDragPreview",o,i,a)),Wp(this,"connectDropTarget",(o,i,a)=>dn(this,bP).call(this,"connectDropTarget",o,i,a)),Wp(this,"profile",()=>dn(this,jc)[dn(this,Rc)].instance.profile()),Wp(this,"previewEnabled",()=>dn(this,jc)[dn(this,Rc)].preview),Wp(this,"previewsList",()=>dn(this,xP)),Wp(this,"backendsList",()=>dn(this,lv)),Ff(this,eqe,{writable:!0,value:o=>{dn(this,lv).forEach(i=>{i.transition&&o.addEventListener(i.transition.event,dn(this,xJ))})}}),Ff(this,tqe,{writable:!0,value:o=>{dn(this,lv).forEach(i=>{i.transition&&o.removeEventListener(i.transition.event,dn(this,xJ))})}}),Ff(this,xJ,{writable:!0,value:o=>{let i=dn(this,Rc);if(dn(this,lv).some(u=>u.id!==dn(this,Rc)&&u.transition&&u.transition.check(o)?(zb(this,Rc,u.id),!0):!1),dn(this,Rc)!==i){var a;dn(this,jc)[i].instance.teardown(),Object.keys(dn(this,k0)).forEach(g=>{let x=dn(this,k0)[g];x.unsubscribe(),x.unsubscribe=dn(this,bJ).call(this,x.func,...x.args)}),dn(this,xP).backendChanged(this);let u=dn(this,jc)[dn(this,Rc)];if(u.instance.setup(),u.skipDispatchOnTransition)return;let p=o.constructor,h=new p(o.type,o);(a=o.target)===null||a===void 0||a.dispatchEvent(h)}}}),Ff(this,bJ,{writable:!0,value:(o,i,a,u)=>dn(this,jc)[dn(this,Rc)].instance[o](i,a,u)}),Ff(this,bP,{writable:!0,value:(o,i,a,u)=>{let p="".concat(o,"_").concat(i),h=dn(this,bJ).call(this,o,i,a,u);return dn(this,k0)[p]={func:o,args:[i,a,u],unsubscribe:h},()=>{dn(this,k0)[p].unsubscribe(),delete dn(this,k0)[p]}}}),!n||!n.backends||n.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);zb(this,xP,new _P),zb(this,jc,{}),zb(this,lv,[]),n.backends.forEach(o=>{let i=dn(this,Q6e).call(this,t,r,o);dn(this,jc)[i.id]=i,dn(this,lv).push(i)}),zb(this,Rc,dn(this,lv)[0].id),zb(this,k0,{})}};Wp(CM,"isSetUp",!1);var wJ=(e,t,r)=>new CM(e,t,r);var AM=(e,t)=>({event:e,check:t});var EJ=AM("touchstart",e=>{let t=e;return t.touches!==null&&t.touches!==void 0}),bdr=AM("dragstart",e=>e.type.indexOf("drag")!==-1||e.type.indexOf("drop")!==-1),wdr=AM("mousedown",e=>e.type.indexOf("touch")===-1&&e.type.indexOf("mouse")!==-1),SJ=AM("pointerdown",e=>e.pointerType=="mouse");var IJ={backends:[{id:"html5",backend:H6e,transition:SJ},{id:"touch",backend:X6e,options:{enableMouseEvents:!0},preview:!0,transition:EJ}]};var dv=Z(we());var nqe=Z(we()),wP=(0,nqe.createContext)({dragDropManager:void 0});var hze=Z(lqe()),LP=Z(we());var Yu;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Yu||(Yu={}));function Dr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(!e){var i;if(t===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;i=new Error(t.replace(/%s/g,function(){return n[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}var Fb="dnd-core/INIT_COORDS",uv="dnd-core/BEGIN_DRAG",Ub="dnd-core/PUBLISH_DRAG_SOURCE",cv="dnd-core/HOVER",fv="dnd-core/DROP",pv="dnd-core/END_DRAG";function MJ(e,t){return{type:Fb,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function EP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?EP=function(r){return typeof r}:EP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},EP(e)}function uqe(e,t,r){return t.split(".").reduce(function(n,o){return n&&n[o]?n[o]:r||null},e)}function cqe(e,t){return e.filter(function(r){return r!==t})}function SP(e){return EP(e)==="object"}function fqe(e,t){var r=new Map,n=function(a){r.set(a,r.has(a)?r.get(a)+1:1)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i,a){i===1&&o.push(a)}),o}function pqe(e,t){return e.filter(function(r){return t.indexOf(r)>-1})}var Mdr={type:Fb,payload:{clientOffset:null,sourceClientOffset:null}};function dqe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},o=n.publishSource,i=o===void 0?!0:o,a=n.clientOffset,u=n.getSourceClientOffset,p=e.getMonitor(),h=e.getRegistry();e.dispatch(MJ(a)),Cdr(r,p,h);var g=Ndr(r,p);if(g===null){e.dispatch(Mdr);return}var x=null;if(a){if(!u)throw new Error("getSourceClientOffset must be defined");Adr(u),x=u(g)}e.dispatch(MJ(a,x));var b=h.getSource(g),T=b.beginDrag(p,g);if(T!=null){Ddr(T),h.pinSource(g);var A=h.getSourceType(g);return{type:uv,payload:{itemType:A,item:T,sourceId:g,clientOffset:a||null,sourceClientOffset:x||null,isSourcePublic:!!i}}}}}function Cdr(e,t,r){Dr(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){Dr(r.getSource(n),"Expected sourceIds to be registered.")})}function Adr(e){Dr(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Ddr(e){Dr(SP(e),"Item must be an object.")}function Ndr(e,t){for(var r=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function hqe(e){return function(){var r=e.getMonitor();if(r.isDragging())return{type:Ub}}}function NM(e,t){return t===null?e===null:Array.isArray(e)?e.some(function(r){return r===t}):e===t}function mqe(e){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.clientOffset;Odr(r);var i=r.slice(0),a=e.getMonitor(),u=e.getRegistry();Ldr(i,a,u);var p=a.getItemType();return Pdr(i,u,p),kdr(i,a,u),{type:cv,payload:{targetIds:i,clientOffset:o||null}}}}function Odr(e){Dr(Array.isArray(e),"Expected targetIds to be an array.")}function Ldr(e,t,r){Dr(t.isDragging(),"Cannot call hover while not dragging."),Dr(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var o=e[n];Dr(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var i=r.getTarget(o);Dr(i,"Expected targetIds to be registered.")}}function Pdr(e,t,r){for(var n=e.length-1;n>=0;n--){var o=e[n],i=t.getTargetType(o);NM(i,r)||e.splice(n,1)}}function kdr(e,t,r){e.forEach(function(n){var o=r.getTarget(n);o.hover(t,n)})}function gqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function vqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gqe(Object(r),!0).forEach(function(n){Rdr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rdr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yqe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getMonitor(),o=e.getRegistry();jdr(n);var i=Fdr(n);i.forEach(function(a,u){var p=qdr(a,u,o,n),h={type:fv,payload:{dropResult:vqe(vqe({},r),p)}};e.dispatch(h)})}}function jdr(e){Dr(e.isDragging(),"Cannot call drop while not dragging."),Dr(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function qdr(e,t,r,n){var o=r.getTarget(e),i=o?o.drop(n,e):void 0;return zdr(i),typeof i=="undefined"&&(i=t===0?{}:n.getDropResult()),i}function zdr(e){Dr(typeof e=="undefined"||SP(e),"Drop result must either be an object or undefined.")}function Fdr(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function _qe(e){return function(){var r=e.getMonitor(),n=e.getRegistry();Udr(r);var o=r.getSourceId();if(o!=null){var i=n.getSource(o,!0);i.endDrag(r,o),n.unpinSource()}return{type:pv}}}function Udr(e){Dr(e.isDragging(),"Cannot call endDrag while not dragging.")}function xqe(e){return{beginDrag:dqe(e),publishDragSource:hqe(e),hover:mqe(e),drop:yqe(e),endDrag:_qe(e)}}function Bdr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bqe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vdr(e,t,r){return t&&bqe(e.prototype,t),r&&bqe(e,r),e}function OM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wqe=function(){function e(t,r){var n=this;Bdr(this,e),OM(this,"store",void 0),OM(this,"monitor",void 0),OM(this,"backend",void 0),OM(this,"isSetUp",!1),OM(this,"handleRefCountChange",function(){var o=n.store.getState().refCount>0;n.backend&&(o&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!o&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}return Vdr(e,[{key:"receiveBackend",value:function(r){this.backend=r}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var r=this,n=this.store.dispatch;function o(a){return function(){for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];var g=a.apply(r,p);typeof g!="undefined"&&n(g)}}var i=xqe(this);return Object.keys(i).reduce(function(a,u){var p=i[u];return a[u]=o(p),a},{})}},{key:"dispatch",value:function(r){this.store.dispatch(r)}}]),e}();function no(e){"@babel/helpers - typeof";return no=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(e)}function Eqe(e,t){if(no(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(no(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IP(e){var t=Eqe(e,"string");return no(t)=="symbol"?t:t+""}function Ot(e,t,r){return(t=IP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sqe(Object(r),!0).forEach(function(n){Ot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qc(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Iqe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),CJ=function(){return Math.random().toString(36).substring(7).split("").join(".")},Tqe={INIT:"@@redux/INIT"+CJ(),REPLACE:"@@redux/REPLACE"+CJ(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+CJ()}};function Gdr(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function AJ(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(qc(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(qc(1));return r(AJ)(e,t)}if(typeof e!="function")throw new Error(qc(2));var o=e,i=t,a=[],u=a,p=!1;function h(){u===a&&(u=a.slice())}function g(){if(p)throw new Error(qc(3));return i}function x(L){if(typeof L!="function")throw new Error(qc(4));if(p)throw new Error(qc(5));var P=!0;return h(),u.push(L),function(){if(P){if(p)throw new Error(qc(6));P=!1,h();var q=u.indexOf(L);u.splice(q,1),a=null}}}function b(L){if(!Gdr(L))throw new Error(qc(7));if(typeof L.type=="undefined")throw new Error(qc(8));if(p)throw new Error(qc(9));try{p=!0,i=o(i,L)}finally{p=!1}for(var P=a=u,k=0;k<P.length;k++){var q=P[k];q()}return L}function T(L){if(typeof L!="function")throw new Error(qc(10));o=L,b({type:Tqe.REPLACE})}function A(){var L,P=x;return L={subscribe:function(q){if(typeof q!="object"||q===null)throw new Error(qc(11));function U(){q.next&&q.next(g())}U();var H=P(U);return{unsubscribe:H}}},L[Iqe]=function(){return this},L}return b({type:Tqe.INIT}),n={dispatch:b,subscribe:x,getState:g,replaceReducer:T},n[Iqe]=A,n}var Hdr=function(t,r){return t===r};function Mqe(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function Cqe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hdr;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function Aqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Dqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Aqe(Object(r),!0).forEach(function(n){Wdr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Aqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Wdr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nqe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Oqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Nqe,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case Fb:case uv:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case cv:return Mqe(e.clientOffset,r.clientOffset)?e:Dqe(Dqe({},e),{},{clientOffset:r.clientOffset});case pv:case fv:return Nqe;default:return e;}}var LM="dnd-core/ADD_SOURCE",PM="dnd-core/ADD_TARGET",kM="dnd-core/REMOVE_SOURCE",R0="dnd-core/REMOVE_TARGET";function Lqe(e){return{type:LM,payload:{sourceId:e}}}function Pqe(e){return{type:PM,payload:{targetId:e}}}function kqe(e){return{type:kM,payload:{sourceId:e}}}function Rqe(e){return{type:R0,payload:{targetId:e}}}function jqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function zc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jqe(Object(r),!0).forEach(function(n){$dr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $dr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ydr={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function qqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ydr,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case uv:return zc(zc({},e),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Ub:return zc(zc({},e),{},{isSourcePublic:!0});case cv:return zc(zc({},e),{},{targetIds:r.targetIds});case R0:return e.targetIds.indexOf(r.targetId)===-1?e:zc(zc({},e),{},{targetIds:cqe(e.targetIds,r.targetId)});case fv:return zc(zc({},e),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case pv:return zc(zc({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e;}}function zqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case LM:case PM:return e+1;case kM:case R0:return e-1;default:return e;}}var Bb=[],TP=[];Bb.__IS_NONE__=!0;TP.__IS_ALL__=!0;function Fqe(e,t){if(e===Bb)return!1;if(e===TP||typeof t=="undefined")return!0;var r=pqe(t,e);return r.length>0}function Uqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Bb,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cv:break;case LM:case PM:case R0:case kM:return Bb;case uv:case Ub:case pv:case fv:default:return TP;}var r=t.payload,n=r.targetIds,o=n===void 0?[]:n,i=r.prevTargetIds,a=i===void 0?[]:i,u=fqe(o,a),p=u.length>0||!Cqe(o,a);if(!p)return Bb;var h=a[a.length-1],g=o[o.length-1];return h!==g&&(h&&u.push(h),g&&u.push(g)),u}function Bqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e+1}function Vqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Gqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Vqe(Object(r),!0).forEach(function(n){Zdr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zdr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Uqe(e.dirtyHandlerIds,{type:t.type,payload:Gqe(Gqe({},t.payload),{},{prevTargetIds:uqe(e,"dragOperation.targetIds",[])})}),dragOffset:Oqe(e.dragOffset,t),refCount:zqe(e.refCount,t),dragOperation:qqe(e.dragOperation,t),stateId:Bqe(e.stateId)}}function Kdr(e,t){return{x:e.x+t.x,y:e.y+t.y}}function Wqe(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $qe(e){var t=e.clientOffset,r=e.initialClientOffset,n=e.initialSourceClientOffset;return!t||!r||!n?null:Wqe(Kdr(t,n),r)}function Yqe(e){var t=e.clientOffset,r=e.initialClientOffset;return!t||!r?null:Wqe(t,r)}function Xdr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zqe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Jdr(e,t,r){return t&&Zqe(e.prototype,t),r&&Zqe(e,r),e}function Kqe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xqe=function(){function e(t,r){Xdr(this,e),Kqe(this,"store",void 0),Kqe(this,"registry",void 0),this.store=t,this.registry=r}return Jdr(e,[{key:"subscribeToStateChange",value:function(r){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=o.handlerIds;Dr(typeof r=="function","listener must be a function."),Dr(typeof i=="undefined"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,u=function(){var h=n.store.getState(),g=h.stateId;try{var x=g===a||g===a+1&&!Fqe(h.dirtyHandlerIds,i);x||r()}finally{a=g}};return this.store.subscribe(u)}},{key:"subscribeToOffsetChange",value:function(r){var n=this;Dr(typeof r=="function","listener must be a function.");var o=this.store.getState().dragOffset,i=function(){var u=n.store.getState().dragOffset;u!==o&&(o=u,r())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r);return Dr(n,"Expected to find a valid source. sourceId=".concat(r)),this.isDragging()?!1:n.canDrag(this,r)}},{key:"canDropOnTarget",value:function(r){if(!r)return!1;var n=this.registry.getTarget(r);if(Dr(n,"Expected to find a valid target. targetId=".concat(r)),!this.isDragging()||this.didDrop())return!1;var o=this.registry.getTargetType(r),i=this.getItemType();return NM(o,i)&&n.canDrop(this,r)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r,!0);if(Dr(n,"Expected to find a valid source. sourceId=".concat(r)),!this.isDragging()||!this.isSourcePublic())return!1;var o=this.registry.getSourceType(r),i=this.getItemType();return o!==i?!1:n.isDragging(this,r)}},{key:"isOverTarget",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!r)return!1;var o=n.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(r),a=this.getItemType();if(a&&!NM(i,a))return!1;var u=this.getTargetIds();if(!u.length)return!1;var p=u.indexOf(r);return o?p===u.length-1:p>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return $qe(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return Yqe(this.store.getState().dragOffset)}}]),e}();var Qdr=0;function Jqe(){return Qdr++}function MP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?MP=function(r){return typeof r}:MP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},MP(e)}function Qqe(e){Dr(typeof e.canDrag=="function","Expected canDrag to be a function."),Dr(typeof e.beginDrag=="function","Expected beginDrag to be a function."),Dr(typeof e.endDrag=="function","Expected endDrag to be a function.")}function eze(e){Dr(typeof e.canDrop=="function","Expected canDrop to be a function."),Dr(typeof e.hover=="function","Expected hover to be a function."),Dr(typeof e.drop=="function","Expected beginDrag to be a function.")}function CP(e,t){if(t&&Array.isArray(e)){e.forEach(function(r){return CP(r,!1)});return}Dr(typeof e=="string"||MP(e)==="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var tze=typeof global!="undefined"?global:self,rze=tze.MutationObserver||tze.WebKitMutationObserver;function DJ(e){return function(){let r=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(r),clearInterval(n),e()}}}function ehr(e){let t=1,r=new rze(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var nze=typeof rze=="function"?ehr:DJ;var AP=class{enqueueTask(t){let{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,o=t.length-this.index;n<o;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=nze(this.flush),this.requestErrorThrow=DJ(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};var DP=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}};var NP=class{create(t){let r=this.freeTasks,n=r.length?r.pop():new DP(this.onError,o=>r[r.length]=o);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var oze=new AP,thr=new NP(oze.registerPendingError);function ize(e){oze.enqueueTask(thr.create(e))}function rhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function nhr(e,t,r){return t&&aze(e.prototype,t),r&&aze(e,r),e}function Vb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ohr(e,t){return lhr(e)||shr(e,t)||ahr(e,t)||ihr()}function ihr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ahr(e,t){if(e){if(typeof e=="string")return sze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sze(e,t)}}function sze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function shr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function lhr(e){if(Array.isArray(e))return e}function uhr(e){var t=Jqe().toString();switch(e){case Yu.SOURCE:return"S".concat(t);case Yu.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e));}}function lze(e){switch(e[0]){case"S":return Yu.SOURCE;case"T":return Yu.TARGET;default:Dr(!1,"Cannot parse handler ID: ".concat(e));}}function uze(e,t){var r=e.entries(),n=!1;do{var o=r.next(),i=o.done,a=ohr(o.value,2),u=a[1];if(u===t)return!0;n=!!i}while(!n);return!1}var cze=function(){function e(t){rhr(this,e),Vb(this,"types",new Map),Vb(this,"dragSources",new Map),Vb(this,"dropTargets",new Map),Vb(this,"pinnedSourceId",null),Vb(this,"pinnedSource",null),Vb(this,"store",void 0),this.store=t}return nhr(e,[{key:"addSource",value:function(r,n){CP(r),Qqe(n);var o=this.addHandler(Yu.SOURCE,r,n);return this.store.dispatch(Lqe(o)),o}},{key:"addTarget",value:function(r,n){CP(r,!0),eze(n);var o=this.addHandler(Yu.TARGET,r,n);return this.store.dispatch(Pqe(o)),o}},{key:"containsHandler",value:function(r){return uze(this.dragSources,r)||uze(this.dropTargets,r)}},{key:"getSource",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Dr(this.isSourceId(r),"Expected a valid source ID.");var o=n&&r===this.pinnedSourceId,i=o?this.pinnedSource:this.dragSources.get(r);return i}},{key:"getTarget",value:function(r){return Dr(this.isTargetId(r),"Expected a valid target ID."),this.dropTargets.get(r)}},{key:"getSourceType",value:function(r){return Dr(this.isSourceId(r),"Expected a valid source ID."),this.types.get(r)}},{key:"getTargetType",value:function(r){return Dr(this.isTargetId(r),"Expected a valid target ID."),this.types.get(r)}},{key:"isSourceId",value:function(r){var n=lze(r);return n===Yu.SOURCE}},{key:"isTargetId",value:function(r){var n=lze(r);return n===Yu.TARGET}},{key:"removeSource",value:function(r){var n=this;Dr(this.getSource(r),"Expected an existing source."),this.store.dispatch(kqe(r)),ize(function(){n.dragSources.delete(r),n.types.delete(r)})}},{key:"removeTarget",value:function(r){Dr(this.getTarget(r),"Expected an existing target."),this.store.dispatch(Rqe(r)),this.dropTargets.delete(r),this.types.delete(r)}},{key:"pinSource",value:function(r){var n=this.getSource(r);Dr(n,"Expected an existing source."),this.pinnedSourceId=r,this.pinnedSource=n}},{key:"unpinSource",value:function(){Dr(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(r,n,o){var i=uhr(r);return this.types.set(i,n),r===Yu.SOURCE?this.dragSources.set(i,o):r===Yu.TARGET&&this.dropTargets.set(i,o),i}}]),e}();function fze(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=chr(n),i=new Xqe(o,new cze(o)),a=new wqe(o,i),u=e(a,t,r);return a.receiveBackend(u),a}function chr(e){var t=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return AJ(Hqe,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var fhr=["children"];function phr(e,t){return ghr(e)||mhr(e,t)||hhr(e,t)||dhr()}function dhr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hhr(e,t){if(e){if(typeof e=="string")return pze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pze(e,t)}}function pze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mhr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function ghr(e){if(Array.isArray(e))return e}function vhr(e,t){if(e==null)return{};var r=yhr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yhr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var dze=0,OP=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),mze=(0,LP.memo)(function(t){var r=t.children,n=vhr(t,fhr),o=_hr(n),i=phr(o,2),a=i[0],u=i[1];return(0,LP.useEffect)(function(){if(u){var p=gze();return++dze,function(){--dze===0&&(p[OP]=null)}}},[]),(0,hze.jsx)(wP.Provider,Object.assign({value:a},{children:r}),void 0)});function _hr(e){if("manager"in e){var t={dragDropManager:e.manager};return[t,!1]}var r=xhr(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[r,n]}function xhr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gze(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t;return o[OP]||(o[OP]={dragDropManager:fze(e,t,r,n)}),o[OP]}function gze(){return typeof global!="undefined"?global:window}function bhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function whr(e,t,r){return t&&vze(e.prototype,t),r&&vze(e,r),e}function yze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NJ=!1,OJ=!1,_ze=function(){function e(t){bhr(this,e),yze(this,"internalMonitor",void 0),yze(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return whr(e,[{key:"receiveHandlerId",value:function(r){this.sourceId=r}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Dr(!NJ,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return NJ=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{NJ=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Dr(!OJ,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return OJ=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{OJ=!1}}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"isDraggingSource",value:function(r){return this.internalMonitor.isDraggingSource(r)}},{key:"isOverTarget",value:function(r,n){return this.internalMonitor.isOverTarget(r,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(r){return this.internalMonitor.subscribeToOffsetChange(r)}},{key:"canDragSource",value:function(r){return this.internalMonitor.canDragSource(r)}},{key:"canDropOnTarget",value:function(r){return this.internalMonitor.canDropOnTarget(r)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();function Ehr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Shr(e,t,r){return t&&xze(e.prototype,t),r&&xze(e,r),e}function bze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var LJ=!1,wze=function(){function e(t){Ehr(this,e),bze(this,"internalMonitor",void 0),bze(this,"targetId",null),this.internalMonitor=t.getMonitor()}return Shr(e,[{key:"receiveHandlerId",value:function(r){this.targetId=r}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Dr(!LJ,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return LJ=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{LJ=!1}}},{key:"isOver",value:function(r){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,r):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();var RM=Z(we());function Ihr(e){if(typeof e.type!="string"){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function Thr(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!(0,RM.isValidElement)(t)){var n=t;return e(n,r),n}var o=t;Ihr(o);var i=r?function(a){return e(a,r)}:e;return Mhr(o,i)}}function PP(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var o=Thr(n);t[r]=function(){return o}}}),t}function Eze(e,t){typeof e=="function"?e(t):e.current=t}function Mhr(e,t){var r=e.ref;return Dr(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,RM.cloneElement)(e,{ref:function(o){Eze(r,o),Eze(t,o)}}):(0,RM.cloneElement)(e,{ref:t})}function kP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?kP=function(r){return typeof r}:kP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},kP(e)}function jM(e){return e!==null&&kP(e)==="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function qM(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),p=0;p<i.length;p++){var h=i[p];if(!u(h))return!1;var g=e[h],x=t[h];if(o=r?r.call(n,g,x,h):void 0,o===!1||o===void 0&&g!==x)return!1}return!0}function Chr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ahr(e,t,r){return t&&Sze(e.prototype,t),r&&Sze(e,r),e}function Hs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ize=function(){function e(t){var r=this;Chr(this,e),Hs(this,"hooks",PP({dragSource:function(o,i){r.clearDragSource(),r.dragSourceOptions=i||null,jM(o)?r.dragSourceRef=o:r.dragSourceNode=o,r.reconnectDragSource()},dragPreview:function(o,i){r.clearDragPreview(),r.dragPreviewOptions=i||null,jM(o)?r.dragPreviewRef=o:r.dragPreviewNode=o,r.reconnectDragPreview()}})),Hs(this,"handlerId",null),Hs(this,"dragSourceRef",null),Hs(this,"dragSourceNode",void 0),Hs(this,"dragSourceOptionsInternal",null),Hs(this,"dragSourceUnsubscribe",void 0),Hs(this,"dragPreviewRef",null),Hs(this,"dragPreviewNode",void 0),Hs(this,"dragPreviewOptionsInternal",null),Hs(this,"dragPreviewUnsubscribe",void 0),Hs(this,"lastConnectedHandlerId",null),Hs(this,"lastConnectedDragSource",null),Hs(this,"lastConnectedDragSourceOptions",null),Hs(this,"lastConnectedDragPreview",null),Hs(this,"lastConnectedDragPreviewOptions",null),Hs(this,"backend",void 0),this.backend=t}return Ahr(e,[{key:"receiveHandlerId",value:function(r){this.handlerId!==r&&(this.handlerId=r,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(r){this.dragSourceOptionsInternal=r}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(r){this.dragPreviewOptionsInternal=r}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var r=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!r){this.lastConnectedDragSource=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=r,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,r,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var r=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!qM(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!qM(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}();function Dhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nhr(e,t,r){return t&&Tze(e.prototype,t),r&&Tze(e,r),e}function $p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Mze=function(){function e(t){var r=this;Dhr(this,e),$p(this,"hooks",PP({dropTarget:function(o,i){r.clearDropTarget(),r.dropTargetOptions=i,jM(o)?r.dropTargetRef=o:r.dropTargetNode=o,r.reconnect()}})),$p(this,"handlerId",null),$p(this,"dropTargetRef",null),$p(this,"dropTargetNode",void 0),$p(this,"dropTargetOptionsInternal",null),$p(this,"unsubscribeDropTarget",void 0),$p(this,"lastConnectedHandlerId",null),$p(this,"lastConnectedDropTarget",null),$p(this,"lastConnectedDropTargetOptions",null),$p(this,"backend",void 0),this.backend=t}return Nhr(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var r=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();r&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(r){r!==this.handlerId&&(this.handlerId=r,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(r){this.dropTargetOptionsInternal=r}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!qM(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e}();function Cze(e,t,r){var n=r.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}function Aze(e,t,r){var n=r.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}var RP=Z(we()),Zu=typeof window!="undefined"?RP.useLayoutEffect:RP.useEffect;var qP=Z(we());function jP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?jP=function(r){return typeof r}:jP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},jP(e)}function Ohr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Lhr(e,t,r){return t&&Dze(e.prototype,t),r&&Dze(e,r),e}function PJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nze=function(){function e(t,r,n){Ohr(this,e),PJ(this,"spec",void 0),PJ(this,"monitor",void 0),PJ(this,"connector",void 0),this.spec=t,this.monitor=r,this.connector=n}return Lhr(e,[{key:"beginDrag",value:function(){var r,n=this.spec,o=this.monitor,i=null;return jP(n.item)==="object"?i=n.item:typeof n.item=="function"?i=n.item(o):i={},(r=i)!==null&&r!==void 0?r:null}},{key:"canDrag",value:function(){var r=this.spec,n=this.monitor;return typeof r.canDrag=="boolean"?r.canDrag:typeof r.canDrag=="function"?r.canDrag(n):!0}},{key:"isDragging",value:function(r,n){var o=this.spec,i=this.monitor,a=o.isDragging;return a?a(i):n===r.getSourceId()}},{key:"endDrag",value:function(){var r=this.spec,n=this.monitor,o=this.connector,i=r.end;i&&i(n.getItem(),n),o.reconnect()}}]),e}();function Oze(e,t,r){var n=(0,qP.useMemo)(function(){return new Nze(e,t,r)},[t,r]);return(0,qP.useEffect)(function(){n.spec=e},[e]),n}var Lze=Z(we());function Fc(){var e=(0,Lze.useContext)(wP),t=e.dragDropManager;return Dr(t!=null,"Expected drag drop context"),t}var Pze=Z(we());function kze(e){return(0,Pze.useMemo)(function(){var t=e.type;return Dr(t!=null,"spec.type must be defined"),t},[e])}function Phr(e,t){return qhr(e)||jhr(e,t)||Rhr(e,t)||khr()}function khr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rhr(e,t){if(e){if(typeof e=="string")return Rze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Rze(e,t)}}function Rze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jhr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function qhr(e){if(Array.isArray(e))return e}function jze(e,t,r){var n=Fc(),o=Oze(e,t,r),i=kze(e);Zu(function(){if(i!=null){var u=Aze(i,o,n),p=Phr(u,2),h=p[0],g=p[1];return t.receiveHandlerId(h),r.receiveHandlerId(h),g}},[n,t,r,o,i])}var qze=Z(we());function zhr(e){return Vhr(e)||Bhr(e)||Uhr(e)||Fhr()}function Fhr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uhr(e,t){if(e){if(typeof e=="string")return kJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kJ(e,t)}}function Bhr(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vhr(e){if(Array.isArray(e))return kJ(e)}function kJ(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zP(e,t){var r=zhr(t||[]);return t==null&&typeof e!="function"&&r.push(e),(0,qze.useMemo)(function(){return typeof e=="function"?e():e},r)}var zze=Z(we());function Fze(){var e=Fc();return(0,zze.useMemo)(function(){return new _ze(e)},[e])}var Uze=Z(we());function Bze(e,t){var r=Fc(),n=(0,Uze.useMemo)(function(){return new Ize(r.getBackend())},[r]);return Zu(function(){return n.dragSourceOptions=e||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,e]),Zu(function(){return n.dragPreviewOptions=t||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,t]),n}var Hze=Z(FP()),UP=Z(we());function Ghr(e,t){return Yhr(e)||$hr(e,t)||Whr(e,t)||Hhr()}function Hhr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Whr(e,t){if(e){if(typeof e=="string")return Gze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Gze(e,t)}}function Gze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $hr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Yhr(e){if(Array.isArray(e))return e}function Wze(e,t,r){var n=(0,UP.useState)(function(){return t(e)}),o=Ghr(n,2),i=o[0],a=o[1],u=(0,UP.useCallback)(function(){var p=t(e);(0,Hze.default)(i,p)||(a(p),r&&r())},[i,e,r]);return Zu(u),[i,u]}function Zhr(e,t){return Qhr(e)||Jhr(e,t)||Xhr(e,t)||Khr()}function Khr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xhr(e,t){if(e){if(typeof e=="string")return $ze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $ze(e,t)}}function $ze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jhr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Qhr(e){if(Array.isArray(e))return e}function Yze(e,t,r){var n=Wze(e,t,r),o=Zhr(n,2),i=o[0],a=o[1];return Zu(function(){var p=e.getHandlerId();if(p!=null)return e.subscribeToStateChange(a,{handlerIds:[p]})},[e,a]),i}function BP(e,t,r){return Yze(t,e||function(){return{}},function(){return r.reconnect()})}var RJ=Z(we());function Zze(e){return(0,RJ.useMemo)(function(){return e.hooks.dragSource()},[e])}function Kze(e){return(0,RJ.useMemo)(function(){return e.hooks.dragPreview()},[e])}function Xze(e,t){var r=zP(e,t);Dr(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=Fze(),o=Bze(r.options,r.previewOptions);return jze(r,n,o),[BP(r.collect,n,o),Zze(o),Kze(o)]}var Jze=Z(we());function Qze(e){var t=e.accept;return(0,Jze.useMemo)(function(){return Dr(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]},[t])}var VP=Z(we());function emr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tmr(e,t,r){return t&&e8e(e.prototype,t),r&&e8e(e,r),e}function t8e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var r8e=function(){function e(t,r){emr(this,e),t8e(this,"spec",void 0),t8e(this,"monitor",void 0),this.spec=t,this.monitor=r}return tmr(e,[{key:"canDrop",value:function(){var r=this.spec,n=this.monitor;return r.canDrop?r.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var r=this.spec,n=this.monitor;r.hover&&r.hover(n.getItem(),n)}},{key:"drop",value:function(){var r=this.spec,n=this.monitor;if(r.drop)return r.drop(n.getItem(),n)}}]),e}();function n8e(e,t){var r=(0,VP.useMemo)(function(){return new r8e(e,t)},[t]);return(0,VP.useEffect)(function(){r.spec=e},[e]),r}function rmr(e,t){return amr(e)||imr(e,t)||omr(e,t)||nmr()}function nmr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function omr(e,t){if(e){if(typeof e=="string")return o8e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o8e(e,t)}}function o8e(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function imr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function amr(e){if(Array.isArray(e))return e}function i8e(e,t,r){var n=Fc(),o=n8e(e,t),i=Qze(e);Zu(function(){var u=Cze(i,o,n),p=rmr(u,2),h=p[0],g=p[1];return t.receiveHandlerId(h),r.receiveHandlerId(h),g},[n,t,o,r,i.map(function(a){return a.toString()}).join("|")])}var a8e=Z(we());function s8e(){var e=Fc();return(0,a8e.useMemo)(function(){return new wze(e)},[e])}var l8e=Z(we());function u8e(e){var t=Fc(),r=(0,l8e.useMemo)(function(){return new Mze(t.getBackend())},[t]);return Zu(function(){return r.dropTargetOptions=e||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[e]),r}var c8e=Z(we());function f8e(e){return(0,c8e.useMemo)(function(){return e.hooks.dropTarget()},[e])}function GP(e,t){var r=zP(e,t),n=s8e(),o=u8e(r.options);return i8e(r,n,o),[BP(r.collect,n,o),f8e(o)]}function jJ(){return jJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jJ.apply(this,arguments)}var smr=(0,dv.createContext)(null),qJ=e=>{let i=e,{portal:t}=i,r=wn(i,["portal"]),[n,o]=(0,dv.useState)(null);return dv.default.createElement(smr.Provider,{value:t!=null?t:n},dv.default.createElement(mze,jJ({backend:wJ},r)),t?null:dv.default.createElement("div",{ref:o}))};var Xu=Z(we(),1);var vk=Z(xt(),1);var Ii=en({key:"notificationState",default:null});var Vf=Z(we(),1);var Uc=[];var p8e=function(){return Uc.some(function(e){return e.activeTargets.length>0})};var d8e=function(){return Uc.some(function(e){return e.skippedTargets.length>0})};var h8e="ResizeObserver loop completed with undelivered notifications.",m8e=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:h8e}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=h8e),window.dispatchEvent(e)};var j0;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(j0||(j0={}));var Uf=function(e){return Object.freeze(e)};var zJ=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,Uf(this)}return e}();var FJ=function(){function e(t,r,n,o){return this.x=t,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Uf(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,o=t.top,i=t.right,a=t.bottom,u=t.left,p=t.width,h=t.height;return{x:r,y:n,top:o,right:i,bottom:a,left:u,width:p,height:h}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}();var zM=function(e){return e instanceof SVGElement&&"getBBox"in e},HP=function(e){if(zM(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},UJ=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},g8e=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0;}return!1};var q0=typeof window!="undefined"?window:{};var WP=new WeakMap,v8e=/auto|scroll/,lmr=/^tb|vertical/,umr=/msie|trident/i.test(q0.navigator&&q0.navigator.userAgent),Yp=function(e){return parseFloat(e||"0")},Gb=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new zJ((r?t:e)||0,(r?e:t)||0)},y8e=Uf({devicePixelContentBoxSize:Gb(),borderBoxSize:Gb(),contentBoxSize:Gb(),contentRect:new FJ(0,0,0,0)}),BJ=function(e,t){if(t===void 0&&(t=!1),WP.has(e)&&!t)return WP.get(e);if(HP(e))return WP.set(e,y8e),y8e;var r=getComputedStyle(e),n=zM(e)&&e.ownerSVGElement&&e.getBBox(),o=!umr&&r.boxSizing==="border-box",i=lmr.test(r.writingMode||""),a=!n&&v8e.test(r.overflowY||""),u=!n&&v8e.test(r.overflowX||""),p=n?0:Yp(r.paddingTop),h=n?0:Yp(r.paddingRight),g=n?0:Yp(r.paddingBottom),x=n?0:Yp(r.paddingLeft),b=n?0:Yp(r.borderTopWidth),T=n?0:Yp(r.borderRightWidth),A=n?0:Yp(r.borderBottomWidth),L=n?0:Yp(r.borderLeftWidth),P=x+h,k=p+g,q=L+T,U=b+A,H=u?e.offsetHeight-U-e.clientHeight:0,X=a?e.offsetWidth-q-e.clientWidth:0,ee=o?P+q:0,ne=o?k+U:0,me=n?n.width:Yp(r.width)-ee-X,ue=n?n.height:Yp(r.height)-ne-H,Me=me+P+X+q,ke=ue+k+H+U,Te=Uf({devicePixelContentBoxSize:Gb(Math.round(me*devicePixelRatio),Math.round(ue*devicePixelRatio),i),borderBoxSize:Gb(Me,ke,i),contentBoxSize:Gb(me,ue,i),contentRect:new FJ(x,p,me,ue)});return WP.set(e,Te),Te},$P=function(e,t,r){var n=BJ(e,r),o=n.borderBoxSize,i=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case j0.DEVICE_PIXEL_CONTENT_BOX:return a;case j0.BORDER_BOX:return o;default:return i;}};var VJ=function(){function e(t){var r=BJ(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=Uf([r.borderBoxSize]),this.contentBoxSize=Uf([r.contentBoxSize]),this.devicePixelContentBoxSize=Uf([r.devicePixelContentBoxSize])}return e}();var YP=function(e){if(HP(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t};var _8e=function(){var e=1/0,t=[];Uc.forEach(function(a){if(a.activeTargets.length!==0){var u=[];a.activeTargets.forEach(function(h){var g=new VJ(h.target),x=YP(h.target);u.push(g),h.lastReportedSize=$P(h.target,h.observedBox),x<e&&(e=x)}),t.push(function(){a.callback.call(a.observer,u,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var o=n[r];o()}return e};var GJ=function(e){Uc.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(YP(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var x8e=function(){var e=0;for(GJ(e);p8e();)e=_8e(),GJ(e);return d8e()&&m8e(),e>0};var HJ,b8e=[],cmr=function(){return b8e.splice(0).forEach(function(e){return e()})},w8e=function(e){if(!HJ){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return cmr()}).observe(r,n),HJ=function(){r.textContent="".concat(t?t--:t++)}}b8e.push(e),HJ()};var E8e=function(e){w8e(function(){requestAnimationFrame(e)})};var ZP=0,fmr=function(){return!!ZP},pmr=250,dmr={attributes:!0,characterData:!0,childList:!0,subtree:!0},S8e=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],I8e=function(e){return e===void 0&&(e=0),Date.now()+e},WJ=!1,hmr=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=pmr),!WJ){WJ=!0;var n=I8e(t);E8e(function(){var o=!1;try{o=x8e()}finally{if(WJ=!1,t=n-I8e(),!fmr())return;o?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,dmr)};document.body?r():q0.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),S8e.forEach(function(r){return q0.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),S8e.forEach(function(r){return q0.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),KP=new hmr,$J=function(e){!ZP&&e>0&&KP.start(),ZP+=e,!ZP&&KP.stop()};var mmr=function(e){return!zM(e)&&!g8e(e)&&getComputedStyle(e).display==="inline"},T8e=function(){function e(t,r){this.target=t,this.observedBox=r||j0.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=$P(this.target,this.observedBox,!0);return mmr(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}();var M8e=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}();var XP=new WeakMap,C8e=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},FM=function(){function e(){}return e.connect=function(t,r){var n=new M8e(t,r);XP.set(t,n)},e.observe=function(t,r,n){var o=XP.get(t),i=o.observationTargets.length===0;C8e(o.observationTargets,r)<0&&(i&&Uc.push(o),o.observationTargets.push(new T8e(r,n&&n.box)),$J(1),KP.schedule())},e.unobserve=function(t,r){var n=XP.get(t),o=C8e(n.observationTargets,r),i=n.observationTargets.length===1;o>=0&&(i&&Uc.splice(Uc.indexOf(n),1),n.observationTargets.splice(o,1),$J(-1))},e.disconnect=function(t){var r=this,n=XP.get(t);n.observationTargets.slice().forEach(function(o){return r.unobserve(t,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}();var YJ=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");FM.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!UJ(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");FM.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!UJ(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");FM.unobserve(this,t)},e.prototype.disconnect=function(){FM.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();var A8e=Z(we()),gmr=A8e.default[typeof document!="undefined"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],D8e=gmr;var vmr=typeof window!="undefined"&&"ResizeObserver"in window?window.ResizeObserver:YJ;function ymr(){}function _mr(e,t){let r=bmr(),n=lP(t);return D8e(()=>{let o=!1,i=e&&"current"in e?e.current:e;if(!i)return ymr;function a(u,p){o||n.current(u,p)}return r.subscribe(i,a),()=>{o=!0,r.unsubscribe(i,a)}},[e,r,n]),r.observer}function xmr(){let e=!1,t=[],r=new Map,n=new vmr((o,i)=>{t=t.concat(o);function a(){let u=new Set;for(let p=0;p<t.length;p++){if(u.has(t[p].target))continue;u.add(t[p].target);let h=r.get(t[p].target);h==null||h.forEach(g=>g(t[p],i))}t=[],e=!1}e||window.requestAnimationFrame(a),e=!0});return{observer:n,subscribe(o,i){var a;n.observe(o);let u=(a=r.get(o))!==null&&a!==void 0?a:[];u.push(i),r.set(o,u)},unsubscribe(o,i){var a;let u=(a=r.get(o))!==null&&a!==void 0?a:[];if(u.length===1){n.unobserve(o),r.delete(o);return}let p=u.indexOf(i);p!==-1&&u.splice(p,1),r.set(o,u)}}}var ZJ,bmr=()=>ZJ||(ZJ=xmr()),N8e=_mr;var t9e=Z(hv(),1);var Bf=Z(GM(),1);var mgr="vkf-unique-control-panel",yQ="basemap-selector",vQ=class{constructor(){ct(this,"id",yQ)}onAdd(t){this._map=t;let r=`maplibregl-ctrl maplibregl-ctrl-group basemap-selector ${mgr}`,n=document.createElement("div");return n.className=r,this._container=n,n}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},qFe=vQ;var F0=Z(YFe(),1);var ZFe=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};var ik=3,KFe=e=>`${(0,F0.default)(e[0],7)},${(0,F0.default)(e[1],7)}`,ak=class{constructor(){ct(this,"buttonCopyPosition");ct(this,"textElCurrentPosition");ct(this,"textElSavedPosition");ct(this,"targetEl");ct(this,"_container");ct(this,"_button");ct(this,"savedPosition");ct(this,"generateSavedText",()=>{if(this.savedPosition===void 0)return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="none"),de("control-mouseposition-save-helper");{let t=de("control-mouseposition-saved-label");return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="block"),t+": Lon: "+(0,F0.default)(this.savedPosition[0],ik)+" Lat: "+(0,F0.default)(this.savedPosition[1],ik)}});ct(this,"savePosition",t=>{if(this._map){let r=t.lngLat.toArray();this.savedPosition=r.slice(),navigator.clipboard.writeText(KFe(r)),this.updatePosition(t)}});ct(this,"updatePosition",t=>{let r=this.textElCurrentPosition,n=this.textElSavedPosition,{lngLat:o}=t;r.innerHTML="Lon: "+(0,F0.default)(o.lng,ik)+", Lat: "+(0,F0.default)(o.lat,ik),n.innerHTML=this.generateSavedText()});ct(this,"handleCopyButtonClick",t=>{t.preventDefault(),t.stopPropagation();let r=this.savedPosition;r!==void 0&&navigator.clipboard.writeText(KFe(r)),t.target.blur()});ct(this,"toggleMousePosition",t=>{t.preventDefault();let r="active",n=this._button.classList.contains(r),o=this._map;if(!o)return;this._button.classList.toggle(r);let i=this.targetEl,a=ZFe(o);if(this.targetEl===void 0){i=document.createElement("div"),i.className="ol-control ol-mouse-position-box";let u=document.createElement("p");this.textElCurrentPosition=u;let p=document.createElement("p");this.textElSavedPosition=p;let h=document.createElement("button");h.id="position-copy-to-clipboard",h.innerHTML="<span class=\"glyphicon glyphicon-copy\"></span>",h.title=de("control-mouseposition-button-title"),this.buttonCopyPosition=h,h.addEventListener("click",this.handleCopyButtonClick);let g=document.createElement("div");g.className="saved-position-container",g.appendChild(p),g.appendChild(h),i.appendChild(u),i.appendChild(g),a.appendChild(i),this.targetEl=i}else this.textElCurrentPosition.innerHTML="",this.textElSavedPosition.innerHTML="";n?(o.off("mousemove",this.updatePosition),o.off("click",this.savePosition)):(this.savedPosition=void 0,o.on("mousemove",this.updatePosition),o.on("click",this.savePosition)),this.updatePosition({lngLat:o.unproject([t.clientX,t.clientY])}),i.classList.toggle(r),a.classList.toggle(`mouseposition-${r}`)})}onAdd(t){this._map=t;let r=document.createElement("div");r.className="maplibregl-ctrl maplibregl-ctrl-group";let n=document.createElement("button");return n.title=de("control-mouseposition-title"),n.className="maplibregl-ctrl-mouse-position",n.type="button",r.appendChild(n),this._container=r,this._button=n,n.addEventListener("click",this.toggleMousePosition,!1),this._container}onRemove(){this._map.off("mousemove",this.updatePosition),this._map.off("click",this.savePosition),this._map=null,this._container.parentNode.removeChild(this._container)}};function XFe(e,t){for(let r of e)typeof t[r]=="function"&&(t[r]=t[r].bind(t))}function Yb(e,t,r){let n=window.document.createElement(e);return t!==void 0&&(n.className=t),r&&r.appendChild(n),n}function JFe(e){e.parentNode&&e.parentNode.removeChild(e)}var bQ="permalink-control",xQ=class{constructor(){ct(this,"id",bQ)}onAdd(t){return this._map=t,this._container=Yb("div","maplibregl-ctrl maplibregl-ctrl-group permalink-control"),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},QFe=xQ;var sk=class{constructor(){ct(this,"_map");ct(this,"_container");ct(this,"_terrainButton");XFe(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=Yb("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=Yb("button","maplibregl-ctrl-terrain",this._container),Yb("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){JFe(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}};function Ge(e){return e!=null}function lk(e){return typeof e=="string"||e instanceof String}function de(e){let t=hr.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var e9e=()=>[{position:"top-left",control:new Bf.NavigationControl({showZoom:!0,showCompass:!1,visualizePitch:!1})},{position:"top-left",control:new Bf.FullscreenControl},{position:"top-left",control:new Bf.NavigationControl({showZoom:!1,showCompass:!0,visualizePitch:!0})},{position:"top-left",control:new ak},{position:"top-left",control:new sk},{position:"top-left",control:new qFe},{position:"top-left",control:new Bf.GeolocateControl({trackUserLocation:!0})},{position:"top-left",control:new QFe},{position:"bottom-right",control:new Bf.AttributionControl({compact:!0})},{position:"bottom-right",control:new Bf.ScaleControl({maxWidth:137})}];var mv={EN:"en",DE:"de"},kgr=typeof process!="undefined"&&Ge(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&Ge(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",uk=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),Il={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:mv.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},hr={axiosApiInstance:null,appendSettings(e){Il=Object.assign({},Il,e)},getSettings(){return Il},getBaseMaps(){return Il.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Il.MAPVIEW_PARAMS)},getLanguageDict(){return Il.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Il.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Il.TERRAIN_TILES)},getUsername(){return Il.USERNAME},isUserAuthenticated(){return Il.USER_ISAUTHENTICATED===!0},updateSettings(e){Il=e},_initAxiosApiInstance(){let e=Il.API_GEOREFERENCE_BASEURL,t=lk(e)&&e.length===0;if(!Ge(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},kgr?{headers:{get:uk(),post:uk(),put:uk(),delete:uk()}}:{});this.axiosApiInstance=t9e.default.create(r)},getGeoreferenceApiClient(){return Ge(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Il.MARKER_URL;if(!Ge(e))throw new Error("The marker icon url is not set.");return{id:Il.MARKER_IMAGE_ID,url:e}},getUserRole(){return Il.USER_ROLE}};var gv="vkf-terrain";var r9e=new Set(["fill-opacity","line-opacity","circle-opacity","icon-opacity","text-opacity","raster-opacity"]),n9e=new Set(["visibility"]),cu={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"},xa={controlAdded:"controlAdded",controlRemoved:"controlRemoved",opacityChanged:"opacityChanged",visibilityChanged:"visibilityChanged"};var ko={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},fu={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},Ws={STANDARD:"STANDARD",DRAW:"DRAW"},Rgr={EXTRA_SMALL:600,SMALL:600,MEDIUM:768,LARGE:992},o9e=e=>e>=Rgr.LARGE?fu.HORIZONTAL:fu.VERTICAL,i9e=e=>{switch(e){case fu.HORIZONTAL:default:return"ol-map-large";case fu.VERTICAL:return"ol-map-small";}};var Kp=en({key:"activeBasemapId",default:hr.getSettings().BASEMAPS[0].id}),ck=en({key:"currentApplicationState",default:void 0}),fk=en({key:"elementScreenSize",default:{map:{height:0,width:0}}}),a9e={facets:[],georeference:!1},Bc=en({key:"facetState",default:{facets:[],georeference:!1}}),Zb=en({key:"layoutState",default:fu.VERTICAL}),Vc=en({key:"horizontalLayoutModeState",default:Ws.STANDARD}),wr=en({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),s9e=en({key:"map3dState",default:!1}),Kb=en({key:"mapCountState",default:10}),pk=en({key:"searchIsLoadingState",default:!1}),Ln=en({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),dk=en({key:"selectedOriginalMapIdState",default:void 0}),$s=en({key:"selectedGeoJsonLayerIdState",default:void 0}),Xb=en({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),Xp=lu({key:"selectedGeoJsonLayerState",get:({get:e})=>{let t=e($s),r=e(Ln),n=e(Xb);return{selectedLayer:r.find(i=>i.getId()===t),lastUpdated:n}},dangerouslyAllowMutability:!0}),Jp=en({key:"selectedGeoJsonFeatureIdentifierState",default:null}),l9e=lu({key:"isGeoJsonFeatureSelectedState",get:({get:e})=>{let t=e(Jp);if(!Ge(t))return!1;let{featureId:r,sourceId:n}=t;return Ge(r)&&Ge(n)}}),vv=en({key:"timeExtentState",default:[1850,1970]}),wQ=[1850,1970],yv=en({key:"timeRangeState",default:wQ}),hk=en({key:"baseMapStyleLayersState",default:[]}),u9e=en({key:"activeDialogState",default:cu.None}),Fa=en({key:"drawState",default:void 0}),ba=en({key:"editedGeojsonState",default:null}),Ys=en({key:"metadataDrawState",default:null}),Jn=en({key:"vectorMapState",default:null}),_v=en({key:"vectorMapActiveVersionDrawState",default:null}),mk=en({key:"showDropZoneState",default:!1}),gk=en({key:"addedFileState",default:null}),c9e=en({key:"addGeoJsonDialogState",default:!1}),la=en({key:"drawModePanelState",default:ko.NONE});function f9e(e,t=250){let r=(0,Vf.useRef)();return(0,Vf.useEffect)(()=>{clearTimeout(r.current)},[e]),(...n)=>{r.current=window.setTimeout(()=>{e.apply(this,n)},t)}}function p9e(e){let[t,r]=(0,Vf.useState)(e);return(0,Vf.useEffect)(()=>{r(e)},[e]),t}function d9e(e,t){let r=Ar(fk),n=HM(e);(0,Vf.useEffect)(()=>{let{height:o,width:i}=n;r(a=>Object.assign({},a,{[t]:{height:o,width:i}}))},[n])}var HM=e=>{let[t,r]=(0,Vf.useState)({height:0,width:0});return(0,Vf.useLayoutEffect)(()=>{r(e.current.getBoundingClientRect())},[e]),N8e(e,n=>r(n.contentRect)),t};function h9e(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=h9e(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function jgr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=h9e(e))&&(n&&(n+=" "),n+=t);return n}var Et=jgr;var m9e=e=>{let{onClose:t,text:r,type:n}=e;return Xu.default.createElement("div",{className:"notification-item"},Xu.default.createElement("div",{className:Et("alert","alert-"+n),role:"alert"},Xu.default.createElement("div",{className:"close"},Xu.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:t},Xu.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),Xu.default.createElement("div",{className:"text"},r)))};m9e.propTypes={onClose:vk.default.func,text:vk.default.string,type:vk.default.string};var qgr=()=>{let e=vt(Ii),t=p9e(e),[r,n]=(0,Xu.useState)([]);return(0,Xu.useEffect)(()=>{if(e!==null&&e.id!==null&&e!==t){let o=[...r],i=r.findIndex(a=>a.id===e.id);i>-1?o.splice(i,1,e.text!==null?e:void 0):o.splice(0,0,e),n(o.filter(a=>a!==void 0))}},[e,r,t]),Xu.default.createElement("div",{className:Et("vkf-notifications",r.length===0?"hide":"")},r.map(({type:o,text:i},a)=>Xu.default.createElement(m9e,{key:a,onClose:()=>{let u=[...r];u.splice(a,1),n(u)},type:o,text:i})))},g9e=qgr;var v9e=g9e;var Pv=Z(we(),1);var JYe=Z(IQ(),1);var cw=Z(we(),1);var it={id:"id",timePublished:"time_published",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"},Rh={id:"vkf:layer_id"},Mn={HISTORIC_MAP:"historic_map",MOSAIC_MAP:"mosaic",VECTOR_MAP:"vector",LEGACY_GEOJSON:"geojson"};var Jb=class e{constructor({metadata:t,geometry:r}){ct(this,"metadata",{});ct(this,"geometry",{});if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`);this.metadata=t,this.geometry=r}getGeometry(){return this.geometry}getId(){return this.metadata.id}getMetadata(t){return Ge(t)?this.metadata[t]:this.metadata}updateMetadata(t,r){if(!Ge(t)||!Ge(r)){console.warn("Trying to update metadata without key or value");return}if(!Object.values(it).includes(t)){console.warn(`Trying to update metadata with invalid key '${t}'`);return}this.metadata[t]=r}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getType(){throw new Error("Method 'getType' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}moveToTop(){throw new Error("Method 'moveToTop' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}getMapLibreLayerId(){throw new Error("Method 'getMapLibreLayerId' must be implemented.")}removeLayer(){throw new Error("Method 'removeLayer' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}serialize(){throw new Error("Method 'serialize' must be implemented.")}};var _k=Z(we(),1);var WM=Z(we(),1);var yk=Z(xt(),1);var R9e=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({id:r,type:"fill",source:t,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),e.addLayer({id:n,type:"line",source:t,paint:{"line-color":"#ff0000","line-width":1}})},Ygr=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.getLayer(r)&&e.removeLayer(r),e.getLayer(n)&&e.removeLayer(n),e.getSource(t)&&e.removeSource(t)},j9e=e=>{let t=vt(wr);return(0,WM.useEffect)(()=>{if(Ge(t)){let r=()=>{R9e(t,Se({},e))};return t._loaded?R9e(t,Se({},e)):t.once("load",r),()=>{Ygr(t,Se({},e)),t.off("load",r)}}},[t]),WM.default.createElement(WM.default.Fragment,null)};j9e.propTypes={sourceId:yk.default.string.isRequired,fillId:yk.default.string.isRequired,outlineId:yk.default.string.isRequired};var q9e=j9e;var z9e=q9e;var F9e="vkf-map-overlay-source",Gc="vkf-map-overlay-fill",Zgr="vkf-map-overlay-outline",TQ=(e,t)=>{let r=e.getSource(F9e);r&&r.setData(t)},U9e=()=>_k.default.createElement(_k.default.Fragment,null,_k.default.createElement(z9e,{sourceId:F9e,fillId:Gc,outlineId:Zgr}));U9e.propTypes={};var B9e=U9e;var V9e=(e,t,r,n)=>{var a,u;let o=e.getId();t.addSource(o,Ft(Se({type:"raster"},r),{bounds:e.getMetadata(it.bounds)}));let i=t.getLayer(Gc)!==void 0?Gc:void 0;t.addLayer({id:o,type:"raster",metadata:{[Rh.id]:o},source:o,layout:{visibility:(a=n==null?void 0:n.visibility)!=null?a:"visible"},paint:{"raster-opacity":(u=n==null?void 0:n.opacity)!=null?u:1}},i)};function MQ(e,t,r){if(e!==null)for(var n,o,i,a,u,p,h,g=0,x=0,b,T=e.type,A=T==="FeatureCollection",L=T==="Feature",P=A?e.features.length:1,k=0;k<P;k++){h=A?e.features[k].geometry:L?e.geometry:e,b=h?h.type==="GeometryCollection":!1,u=b?h.geometries.length:1;for(var q=0;q<u;q++){var U=0,H=0;if(a=b?h.geometries[q]:h,a!==null){p=a.coordinates;var X=a.type;switch(g=r&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(p,x,k,U,H)===!1)return!1;x++,U++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(t(p[n],x,k,U,H)===!1)return!1;x++,X==="MultiPoint"&&U++}X==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(o=0;o<p[n].length-g;o++){if(t(p[n][o],x,k,U,H)===!1)return!1;x++}X==="MultiLineString"&&U++,X==="Polygon"&&H++}X==="Polygon"&&U++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for(H=0,o=0;o<p[n].length;o++){for(i=0;i<p[n][o].length-g;i++){if(t(p[n][o][i],x,k,U,H)===!1)return!1;x++}H++}U++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(MQ(a.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type");}}}}}function $M(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return MQ(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}var YM,xk,G9e,CQ=class extends Jb{constructor({metadata:r,geometry:n}){super({metadata:r,geometry:n});ng(this,xk);ng(this,YM,!1);$l(this,xk,G9e).call(this)}addLayerToMap(r,{sourceSettings:n,layerSettings:o}){if(r.getSource(this.getId())){console.error(`Source with id '${this.getId()}' exists already in map.`);return}return V9e(this,r,n,o)}addToOverlay(r,n){let o=r.getSource(n);if(o){let i=this.getPreviewFeature();i.id=this.getId();let a=[i];o.updateData({add:a})}}removeFromOverlay(r,n){let o=r.getSource(n);if(o){let i=[this.getId()];o.updateData({remove:i})}}getPreviewFeature(){return{type:"Feature",properties:{},geometry:this.geometry}}isDisplayedInMap(r){return r.getSource(this.getId())!==void 0&&r.getLayer(this.getId())!==void 0}getType(){return Mn.HISTORIC_MAP}setOpacity(r,n){r.getLayer(this.getId())&&r.setPaintProperty(this.getId(),"raster-opacity",n)}getOpacity(r){var n;return r.getLayer(this.getId())?(n=r.getPaintProperty(this.getId(),"raster-opacity"))!=null?n:1:null}moveToTop(r){this.move(r,null)}move(r,n){let o=n;Ge(n)||(Ge(r.getLayer(Gc))?o=Gc:o=null),r.moveLayer(this.getId(),o)}getMapLibreLayerId(){return this.getId()}removeMapLibreLayers(r){r.getLayer(this.getMapLibreLayerId())&&r.removeLayer(this.getMapLibreLayerId()),r.getSource(this.getId())&&r.removeSource(this.getId())}setVisibility(r,n){r.setLayoutProperty(this.getMapLibreLayerId(),"visibility",n)}isVisible(r){return r.getLayoutProperty(this.getMapLibreLayerId(),"visibility")==="visible"}isMissing(){return Ep(this,YM)}setIsMissing(r){qy(this,YM,r)}};YM=new WeakMap,xk=new WeakSet,G9e=function(){let r=this.geometry?$M(this.geometry):void 0;this.metadata[it.bounds]=r};var H9e=CQ;var jh=H9e;var Ur={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},AQ={[Ur.LINE]:"line-opacity",[Ur.FILL]:"fill-opacity",[Ur.OUTLINE]:"outline-opacity"},DQ={[Ur.LINE]:"stroke-opacity",[Ur.FILL]:"fill-opacity",[Ur.OUTLINE]:"stroke-opacity"},NQ=e=>Object.keys(DQ).includes(e),zn={[Ur.SYMBOL]:{COLOR:"#0000FF"},[Ur.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Ur.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Ur.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},OQ={[Ur.SYMBOL]:{type:"symbol",layout:{"icon-image":hr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom"},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],zn[Ur.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Ur.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],zn[Ur.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],zn[Ur.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],zn[Ur.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Ur.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],zn[Ur.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],zn[Ur.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],zn[Ur.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Ur.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],zn[Ur.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],zn[Ur.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var ZM=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},W9e=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(W9e.test(e)){let t=Date.prototype[e.replace(W9e,"$1UTC")];t&&(ZM.prototype[e]=t)}});var bk=class extends ZM{toString(){let t=this.toDateString(),r=this.toTimeString();return`${t} ${r}`}toDateString(){let t=Kgr.format(this),r=Xgr.format(this),n=this.getFullYear();return`${t} ${r} ${n}`}toTimeString(){return`${Jgr.format(this)} GMT+0000 (Coordinated Universal Time)`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,Se({timeZone:"UTC"},r))}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,Se({timeZone:"UTC"},r))}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,Se({timeZone:"UTC"},r))}},Kgr=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),Xgr=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),Jgr=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});var xv=e=>new bk(+new Date(e));var Qgr=Math.pow(10,8)*24*60*60*1e3,jsn=-Qgr,wk=6048e5,$9e=864e5,KM=6e4,XM=36e5,Y9e=1e3;var evr=3600;var Z9e=evr*24,qsn=Z9e*7,tvr=Z9e*365.2425,rvr=tvr/12,zsn=rvr*3,LQ=Symbol.for("constructDateFrom");function Bn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&LQ in e?e[LQ](t):e instanceof Date?new e.constructor(t):new Date(t)}function tn(e,t){return Bn(t||e,e)}function Ek(e,t,r){let n=tn(e,r==null?void 0:r.in);return isNaN(t)?Bn((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}var nvr={};function Hc(){return nvr}function du(e,t){var u,p,h,g,x,b,T,A;let r=Hc(),n=(A=(T=(g=(h=t==null?void 0:t.weekStartsOn)!=null?h:(p=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:p.weekStartsOn)!=null?g:r.weekStartsOn)!=null?T:(b=(x=r.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?A:0,o=tn(e,t==null?void 0:t.in),i=o.getDay(),a=(i<n?7:0)+i-n;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Gf(e,t){return du(e,Ft(Se({},t),{weekStartsOn:1}))}function Sk(e,t){let r=tn(e,t==null?void 0:t.in),n=r.getFullYear(),o=Bn(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);let i=Gf(o),a=Bn(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);let u=Gf(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function U0(e){let t=tn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function K9e(e,...t){let r=Bn.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function JM(e,t){let r=tn(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function X9e(e,t,r){let[n,o]=K9e(r==null?void 0:r.in,e,t),i=JM(n),a=JM(o),u=+i-U0(i),p=+a-U0(a);return Math.round((u-p)/$9e)}function J9e(e,t){let r=Sk(e,t),n=Bn((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Gf(n)}function Q9e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ik(e){return!(!Q9e(e)&&typeof e!="number"||isNaN(+tn(e)))}function e7e(e,t){let r=tn(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}var ovr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},t7e=(e,t,r)=>{let n,o=ovr[e];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Tk(e){return(t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var ivr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},avr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},svr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},r7e={date:Tk({formats:ivr,defaultWidth:"full"}),time:Tk({formats:avr,defaultWidth:"full"}),dateTime:Tk({formats:svr,defaultWidth:"full"})};var lvr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},n7e=(e,t,r,n)=>lvr[e];function Qb(e){return(t,r)=>{let n=r!=null&&r.context?String(r.context):"standalone",o;if(n==="formatting"&&e.formattingValues){let a=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):a;o=e.formattingValues[u]||e.formattingValues[a]}else{let a=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;o=e.values[u]||e.values[a]}let i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}var uvr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},cvr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fvr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pvr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dvr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hvr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},mvr=(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd";}return r+"th"},o7e={ordinalNumber:mvr,era:Qb({values:uvr,defaultWidth:"wide"}),quarter:Qb({values:cvr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qb({values:fvr,defaultWidth:"wide"}),day:Qb({values:pvr,defaultWidth:"wide"}),dayPeriod:Qb({values:dvr,defaultWidth:"wide",formattingValues:hvr,defaultFormattingWidth:"wide"})};function ew(e){return(t,r={})=>{let n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;let a=i[0],u=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],p=Array.isArray(u)?vvr(u,x=>x.test(a)):gvr(u,x=>x.test(a)),h;h=e.valueCallback?e.valueCallback(p):p,h=r.valueCallback?r.valueCallback(h):h;let g=t.slice(a.length);return{value:h,rest:g}}}function gvr(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function vvr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function i7e(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let o=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;let u=t.slice(o.length);return{value:a,rest:u}}}var yvr=/^(\d+)(th|st|nd|rd)?/i,_vr=/\d+/i,xvr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},bvr={any:[/^b/i,/^(a|c)/i]},wvr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Evr={any:[/1/i,/2/i,/3/i,/4/i]},Svr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Ivr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tvr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mvr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Cvr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Avr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},a7e={ordinalNumber:i7e({matchPattern:yvr,parsePattern:_vr,valueCallback:e=>parseInt(e,10)}),era:ew({matchPatterns:xvr,defaultMatchWidth:"wide",parsePatterns:bvr,defaultParseWidth:"any"}),quarter:ew({matchPatterns:wvr,defaultMatchWidth:"wide",parsePatterns:Evr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ew({matchPatterns:Svr,defaultMatchWidth:"wide",parsePatterns:Ivr,defaultParseWidth:"any"}),day:ew({matchPatterns:Tvr,defaultMatchWidth:"wide",parsePatterns:Mvr,defaultParseWidth:"any"}),dayPeriod:ew({matchPatterns:Cvr,defaultMatchWidth:"any",parsePatterns:Avr,defaultParseWidth:"any"})};var QM={code:"en-US",formatDistance:t7e,formatLong:r7e,formatRelative:n7e,localize:o7e,match:a7e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function s7e(e,t){let r=tn(e,t==null?void 0:t.in);return X9e(r,e7e(r))+1}function Mk(e,t){let r=tn(e,t==null?void 0:t.in),n=+Gf(r)-+J9e(r);return Math.round(n/wk)+1}function tw(e,t){var g,x,b,T,A,L,P,k;let r=tn(e,t==null?void 0:t.in),n=r.getFullYear(),o=Hc(),i=(k=(P=(T=(b=t==null?void 0:t.firstWeekContainsDate)!=null?b:(x=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)!=null?T:o.firstWeekContainsDate)!=null?P:(L=(A=o.locale)==null?void 0:A.options)==null?void 0:L.firstWeekContainsDate)!=null?k:1,a=Bn((t==null?void 0:t.in)||e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);let u=du(a,t),p=Bn((t==null?void 0:t.in)||e,0);p.setFullYear(n,0,i),p.setHours(0,0,0,0);let h=du(p,t);return+r>=+u?n+1:+r>=+h?n:n-1}function l7e(e,t){var u,p,h,g,x,b,T,A;let r=Hc(),n=(A=(T=(g=(h=t==null?void 0:t.firstWeekContainsDate)!=null?h:(p=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:p.firstWeekContainsDate)!=null?g:r.firstWeekContainsDate)!=null?T:(b=(x=r.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?A:1,o=tw(e,t),i=Bn((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),du(i,t)}function Ck(e,t){let r=tn(e,t==null?void 0:t.in),n=+du(r,t)-+l7e(r,t);return Math.round(n/wk)+1}function En(e,t){let r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}var qh={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return En(t==="yy"?n%100:n,t.length)},M(e,t){let r=e.getMonth();return t==="M"?String(r+1):En(r+1,2)},d(e,t){return En(e.getDate(),t.length)},a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m.";}},h(e,t){return En(e.getHours()%12||12,t.length)},H(e,t){return En(e.getHours(),t.length)},m(e,t){return En(e.getMinutes(),t.length)},s(e,t){return En(e.getSeconds(),t.length)},S(e,t){let r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return En(o,t.length)}};var rw={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},PQ={G:function(e,t,r){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"});}},y:function(e,t,r){if(t==="yo"){let n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return qh.y(e,t)},Y:function(e,t,r,n){let o=tw(e,n),i=o>0?o:1-o;if(t==="YY"){let a=i%100;return En(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):En(i,t.length)},R:function(e,t){let r=Sk(e);return En(r,t.length)},u:function(e,t){let r=e.getFullYear();return En(r,t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return En(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"});}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return En(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"});}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return qh.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"});}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return En(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"});}},w:function(e,t,r,n){let o=Ck(e,n);return t==="wo"?r.ordinalNumber(o,{unit:"week"}):En(o,t.length)},I:function(e,t,r){let n=Mk(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):En(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):qh.d(e,t)},D:function(e,t,r){let n=s7e(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):En(n,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"});}},e:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return En(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"});}},c:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return En(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"});}},i:function(e,t,r){let n=e.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return En(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"});}},a:function(e,t,r){let o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"});}},b:function(e,t,r){let n=e.getHours(),o;switch(n===12?o=rw.noon:n===0?o=rw.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"});}},B:function(e,t,r){let n=e.getHours(),o;switch(n>=17?o=rw.evening:n>=12?o=rw.afternoon:n>=4?o=rw.morning:o=rw.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"});}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return qh.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):qh.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):En(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):En(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):qh.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):qh.s(e,t)},S:function(e,t){return qh.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return c7e(n);case"XXXX":case"XX":return B0(n);case"XXXXX":case"XXX":default:return B0(n,":");}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return c7e(n);case"xxxx":case"xx":return B0(n);case"xxxxx":case"xxx":default:return B0(n,":");}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+u7e(n,":");case"OOOO":default:return"GMT"+B0(n,":");}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+u7e(n,":");case"zzzz":default:return"GMT"+B0(n,":");}},t:function(e,t,r){let n=Math.trunc(+e/1e3);return En(n,t.length)},T:function(e,t,r){return En(+e,t.length)}};function u7e(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return i===0?r+String(o):r+String(o)+t+En(i,2)}function c7e(e,t){return e%60===0?(e>0?"-":"+")+En(Math.abs(e)/60,2):B0(e,t)}function B0(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=En(Math.trunc(n/60),2),i=En(n%60,2);return r+o+t+i}var f7e=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"});}},p7e=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"});}},Dvr=(e,t)=>{let r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return f7e(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break;}return i.replace("{{date}}",f7e(n,t)).replace("{{time}}",p7e(o,t))},eC={p:p7e,P:Dvr};var Nvr=/^D+$/,Ovr=/^Y+$/,Lvr=["D","DD","YY","YYYY"];function Ak(e){return Nvr.test(e)}function Dk(e){return Ovr.test(e)}function tC(e,t,r){let n=Pvr(e,t,r);if(console.warn(n),Lvr.includes(e))throw new RangeError(n)}function Pvr(e,t,r){let n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var kvr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rvr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,jvr=/^'([^]*?)'?$/,qvr=/''/g,zvr=/[a-zA-Z]/;function kQ(e,t,r){var g,x,b,T,A,L,P,k,q,U,H,X,ee,ne,me,ue,Me,ke;let n=Hc(),o=(x=(g=r==null?void 0:r.locale)!=null?g:n.locale)!=null?x:QM,i=(U=(q=(L=(A=r==null?void 0:r.firstWeekContainsDate)!=null?A:(T=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:T.firstWeekContainsDate)!=null?L:n.firstWeekContainsDate)!=null?q:(k=(P=n.locale)==null?void 0:P.options)==null?void 0:k.firstWeekContainsDate)!=null?U:1,a=(ke=(Me=(ne=(ee=r==null?void 0:r.weekStartsOn)!=null?ee:(X=(H=r==null?void 0:r.locale)==null?void 0:H.options)==null?void 0:X.weekStartsOn)!=null?ne:n.weekStartsOn)!=null?Me:(ue=(me=n.locale)==null?void 0:me.options)==null?void 0:ue.weekStartsOn)!=null?ke:0,u=tn(e,r==null?void 0:r.in);if(!Ik(u))throw new RangeError("Invalid time value");let p=t.match(Rvr).map(Te=>{let Ee=Te[0];if(Ee==="p"||Ee==="P"){let Ze=eC[Ee];return Ze(Te,o.formatLong)}return Te}).join("").match(kvr).map(Te=>{if(Te==="''")return{isToken:!1,value:"'"};let Ee=Te[0];if(Ee==="'")return{isToken:!1,value:Fvr(Te)};if(PQ[Ee])return{isToken:!0,value:Te};if(Ee.match(zvr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ee+"`");return{isToken:!1,value:Te}});o.localize.preprocessor&&(p=o.localize.preprocessor(u,p));let h={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return p.map(Te=>{if(!Te.isToken)return Te.value;let Ee=Te.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Dk(Ee)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Ak(Ee))&&tC(Ee,t,String(e));let Ze=PQ[Ee[0]];return Ze(u,Ee,o.localize,h)}).join("")}function Fvr(e){let t=e.match(jvr);return t?t[1].replace(qvr,"'"):e}function d7e(e,t){var h,g;let r=tn(e,t==null?void 0:t.in);if(isNaN(+r))throw new RangeError("Invalid time value");let n=(h=t==null?void 0:t.format)!=null?h:"extended",o=(g=t==null?void 0:t.representation)!=null?g:"complete",i="",a="",u=n==="extended"?"-":"",p=n==="extended"?":":"";if(o!=="time"){let x=En(r.getDate(),2),b=En(r.getMonth()+1,2);i=`${En(r.getFullYear(),4)}${u}${b}${u}${x}`}if(o!=="date"){let x=r.getTimezoneOffset();if(x!==0){let k=Math.abs(x),q=En(Math.trunc(k/60),2),U=En(k%60,2);a=`${x<0?"+":"-"}${q}:${U}`}else a="Z";let b=En(r.getHours(),2),T=En(r.getMinutes(),2),A=En(r.getSeconds(),2),L=i===""?"":"T",P=[b,T,A].join(p);i=`${i}${L}${P}${a}`}return i}function h7e(){return Object.assign({},Hc())}function m7e(e,t){let r=tn(e,t==null?void 0:t.in).getDay();return r===0?7:r}function g7e(e){return Math.trunc(+tn(e)/1e3)}function v7e(e,t){let r=Uvr(t)?new t(0):Bn(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function Uvr(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}var Bvr=10,Nk=class{constructor(){ct(this,"subPriority",0)}validate(t,r){return!0}},Ok=class extends Nk{constructor(t,r,n,o,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=o,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}},Lk=class extends Nk{constructor(r,n){super();ct(this,"priority",Bvr);ct(this,"subPriority",-1);this.context=r||(o=>Bn(n,o))}set(r,n){return n.timestampIsSet?r:Bn(r,v7e(r,this.context))}};var xr=class{run(t,r,n,o){let i=this.parse(t,r,n,o);return i?{setter:new Ok(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}};var Pk=class extends xr{constructor(){super(...arguments);ct(this,"priority",140);ct(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});case"GGGGG":return o.era(r,{width:"narrow"});case"GGGG":default:return o.era(r,{width:"wide"})||o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});}}set(r,n,o){return n.era=o,r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};var Yn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Wc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function bo(e,t){return e&&{value:t(e.value),rest:e.rest}}function Vn(e,t){let r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function $c(e,t){let r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};let n=r[1]==="+"?1:-1,o=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,a=r[5]?parseInt(r[5],10):0;return{value:n*(o*XM+i*KM+a*Y9e),rest:t.slice(r[0].length)}}function kk(e){return Vn(Yn.anyDigitsSigned,e)}function hn(e,t){switch(e){case 1:return Vn(Yn.singleDigit,t);case 2:return Vn(Yn.twoDigits,t);case 3:return Vn(Yn.threeDigits,t);case 4:return Vn(Yn.fourDigits,t);default:return Vn(new RegExp("^\\d{1,"+e+"}"),t);}}function nw(e,t){switch(e){case 1:return Vn(Yn.singleDigitSigned,t);case 2:return Vn(Yn.twoDigitsSigned,t);case 3:return Vn(Yn.threeDigitsSigned,t);case 4:return Vn(Yn.fourDigitsSigned,t);default:return Vn(new RegExp("^-?\\d{1,"+e+"}"),t);}}function ow(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0;}}function Rk(e,t){let r=t>0,n=r?t:1-t,o;if(n<=50)o=e||100;else{let i=n+50,a=Math.trunc(i/100)*100,u=e>=i%100;o=e+a-(u?100:0)}return r?o:1-o}function jk(e){return e%400===0||e%4===0&&e%100!==0}var qk=class extends xr{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return bo(hn(4,r),i);case"yo":return bo(o.ordinalNumber(r,{unit:"year"}),i);default:return bo(hn(n.length,r),i);}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o){let i=r.getFullYear();if(o.isTwoDigitYear){let u=Rk(o.year,i);return r.setFullYear(u,0,1),r.setHours(0,0,0,0),r}let a=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}};var zk=class extends xr{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return bo(hn(4,r),i);case"Yo":return bo(o.ordinalNumber(r,{unit:"year"}),i);default:return bo(hn(n.length,r),i);}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o,i){let a=tw(r,i);if(o.isTwoDigitYear){let p=Rk(o.year,a);return r.setFullYear(p,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),du(r,i)}let u=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(u,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),du(r,i)}};var Fk=class extends xr{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return n==="R"?nw(4,r):nw(n.length,r)}set(r,n,o){let i=Bn(r,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),Gf(i)}};var Uk=class extends xr{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return n==="u"?nw(4,r):nw(n.length,r)}set(r,n,o){return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};var Bk=class extends xr{constructor(){super(...arguments);ct(this,"priority",120);ct(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"Q":case"QQ":return hn(n.length,r);case"Qo":return o.ordinalNumber(r,{unit:"quarter"});case"QQQ":return o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(r,{width:"wide",context:"formatting"})||o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};var Vk=class extends xr{constructor(){super(...arguments);ct(this,"priority",120);ct(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"q":case"qq":return hn(n.length,r);case"qo":return o.ordinalNumber(r,{unit:"quarter"});case"qqq":return o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(r,{width:"wide",context:"standalone"})||o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};var Gk=class extends xr{constructor(){super(...arguments);ct(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ct(this,"priority",110)}parse(r,n,o){let i=a=>a-1;switch(n){case"M":return bo(Vn(Yn.month,r),i);case"MM":return bo(hn(2,r),i);case"Mo":return bo(o.ordinalNumber(r,{unit:"month"}),i);case"MMM":return o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(r,{width:"wide",context:"formatting"})||o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};var Hk=class extends xr{constructor(){super(...arguments);ct(this,"priority",110);ct(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,o){let i=a=>a-1;switch(n){case"L":return bo(Vn(Yn.month,r),i);case"LL":return bo(hn(2,r),i);case"Lo":return bo(o.ordinalNumber(r,{unit:"month"}),i);case"LLL":return o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(r,{width:"wide",context:"standalone"})||o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};function y7e(e,t,r){let n=tn(e,r==null?void 0:r.in),o=Ck(n,r)-t;return n.setDate(n.getDate()-o*7),tn(n,r==null?void 0:r.in)}var Wk=class extends xr{constructor(){super(...arguments);ct(this,"priority",100);ct(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,o){switch(n){case"w":return Vn(Yn.week,r);case"wo":return o.ordinalNumber(r,{unit:"week"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=53}set(r,n,o,i){return du(y7e(r,o,i),i)}};function _7e(e,t,r){let n=tn(e,r==null?void 0:r.in),o=Mk(n,r)-t;return n.setDate(n.getDate()-o*7),n}var $k=class extends xr{constructor(){super(...arguments);ct(this,"priority",100);ct(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,o){switch(n){case"I":return Vn(Yn.week,r);case"Io":return o.ordinalNumber(r,{unit:"week"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=53}set(r,n,o){return Gf(_7e(r,o))}};var Vvr=[31,28,31,30,31,30,31,31,30,31,30,31],Gvr=[31,29,31,30,31,30,31,31,30,31,30,31],Yk=class extends xr{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"subPriority",1);ct(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"d":return Vn(Yn.date,r);case"do":return o.ordinalNumber(r,{unit:"date"});default:return hn(n.length,r);}}validate(r,n){let o=r.getFullYear(),i=jk(o),a=r.getMonth();return i?n>=1&&n<=Gvr[a]:n>=1&&n<=Vvr[a]}set(r,n,o){return r.setDate(o),r.setHours(0,0,0,0),r}};var Zk=class extends xr{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"subpriority",1);ct(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,o){switch(n){case"D":case"DD":return Vn(Yn.dayOfYear,r);case"Do":return o.ordinalNumber(r,{unit:"date"});default:return hn(n.length,r);}}validate(r,n){let o=r.getFullYear();return jk(o)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,o){return r.setMonth(0,o),r.setHours(0,0,0,0),r}};function iw(e,t,r){var x,b,T,A,L,P,k,q;let n=Hc(),o=(q=(k=(A=(T=r==null?void 0:r.weekStartsOn)!=null?T:(b=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?A:n.weekStartsOn)!=null?k:(P=(L=n.locale)==null?void 0:L.options)==null?void 0:P.weekStartsOn)!=null?q:0,i=tn(e,r==null?void 0:r.in),a=i.getDay(),p=(t%7+7)%7,h=7-o,g=t<0||t>6?t-(a+h)%7:(p+h)%7-(a+h)%7;return Ek(i,g,r)}var Kk=class extends xr{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=iw(r,o,i),r.setHours(0,0,0,0),r}};var Xk=class extends xr{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,o,i){let a=u=>{let p=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+p};switch(n){case"e":case"ee":return bo(hn(n.length,r),a);case"eo":return bo(o.ordinalNumber(r,{unit:"day"}),a);case"eee":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeeee":return o.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=iw(r,o,i),r.setHours(0,0,0,0),r}};var Jk=class extends xr{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,o,i){let a=u=>{let p=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+p};switch(n){case"c":case"cc":return bo(hn(n.length,r),a);case"co":return bo(o.ordinalNumber(r,{unit:"day"}),a);case"ccc":return o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"ccccc":return o.day(r,{width:"narrow",context:"standalone"});case"cccccc":return o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(r,{width:"wide",context:"standalone"})||o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=iw(r,o,i),r.setHours(0,0,0,0),r}};function x7e(e,t,r){let n=tn(e,r==null?void 0:r.in),o=m7e(n,r),i=t-o;return Ek(n,i,r)}var Qk=class extends xr{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,o){let i=a=>a===0?7:a;switch(n){case"i":case"ii":return hn(n.length,r);case"io":return o.ordinalNumber(r,{unit:"day"});case"iii":return bo(o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return bo(o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return bo(o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return bo(o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);}}validate(r,n){return n>=1&&n<=7}set(r,n,o){return r=x7e(r,o),r.setHours(0,0,0,0),r}};var eR=class extends xr{constructor(){super(...arguments);ct(this,"priority",80);ct(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});}}set(r,n,o){return r.setHours(ow(o),0,0,0),r}};var tR=class extends xr{constructor(){super(...arguments);ct(this,"priority",80);ct(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});}}set(r,n,o){return r.setHours(ow(o),0,0,0),r}};var rR=class extends xr{constructor(){super(...arguments);ct(this,"priority",80);ct(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});}}set(r,n,o){return r.setHours(ow(o),0,0,0),r}};var nR=class extends xr{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,o){switch(n){case"h":return Vn(Yn.hour12h,r);case"ho":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=12}set(r,n,o){let i=r.getHours()>=12;return i&&o<12?r.setHours(o+12,0,0,0):!i&&o===12?r.setHours(0,0,0,0):r.setHours(o,0,0,0),r}};var oR=class extends xr{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,o){switch(n){case"H":return Vn(Yn.hour23h,r);case"Ho":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=23}set(r,n,o){return r.setHours(o,0,0,0),r}};var iR=class extends xr{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,o){switch(n){case"K":return Vn(Yn.hour11h,r);case"Ko":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.getHours()>=12&&o<12?r.setHours(o+12,0,0,0):r.setHours(o,0,0,0),r}};var aR=class extends xr{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,o){switch(n){case"k":return Vn(Yn.hour24h,r);case"ko":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=24}set(r,n,o){let i=o<=24?o%24:o;return r.setHours(i,0,0,0),r}};var sR=class extends xr{constructor(){super(...arguments);ct(this,"priority",60);ct(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"m":return Vn(Yn.minute,r);case"mo":return o.ordinalNumber(r,{unit:"minute"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setMinutes(o,0,0),r}};var lR=class extends xr{constructor(){super(...arguments);ct(this,"priority",50);ct(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"s":return Vn(Yn.second,r);case"so":return o.ordinalNumber(r,{unit:"second"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setSeconds(o,0),r}};var uR=class extends xr{constructor(){super(...arguments);ct(this,"priority",30);ct(this,"incompatibleTokens",["t","T"])}parse(r,n){let o=i=>Math.trunc(i*Math.pow(10,-n.length+3));return bo(hn(n.length,r),o)}set(r,n,o){return r.setMilliseconds(o),r}};var cR=class extends xr{constructor(){super(...arguments);ct(this,"priority",10);ct(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return $c(Wc.basicOptionalMinutes,r);case"XX":return $c(Wc.basic,r);case"XXXX":return $c(Wc.basicOptionalSeconds,r);case"XXXXX":return $c(Wc.extendedOptionalSeconds,r);case"XXX":default:return $c(Wc.extended,r);}}set(r,n,o){return n.timestampIsSet?r:Bn(r,r.getTime()-U0(r)-o)}};var fR=class extends xr{constructor(){super(...arguments);ct(this,"priority",10);ct(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return $c(Wc.basicOptionalMinutes,r);case"xx":return $c(Wc.basic,r);case"xxxx":return $c(Wc.basicOptionalSeconds,r);case"xxxxx":return $c(Wc.extendedOptionalSeconds,r);case"xxx":default:return $c(Wc.extended,r);}}set(r,n,o){return n.timestampIsSet?r:Bn(r,r.getTime()-U0(r)-o)}};var pR=class extends xr{constructor(){super(...arguments);ct(this,"priority",40);ct(this,"incompatibleTokens","*")}parse(r){return kk(r)}set(r,n,o){return[Bn(r,o*1e3),{timestampIsSet:!0}]}};var dR=class extends xr{constructor(){super(...arguments);ct(this,"priority",20);ct(this,"incompatibleTokens","*")}parse(r){return kk(r)}set(r,n,o){return[Bn(r,o),{timestampIsSet:!0}]}};var b7e={G:new Pk,y:new qk,Y:new zk,R:new Fk,u:new Uk,Q:new Bk,q:new Vk,M:new Gk,L:new Hk,w:new Wk,I:new $k,d:new Yk,D:new Zk,E:new Kk,e:new Xk,c:new Jk,i:new Qk,a:new eR,b:new tR,B:new rR,h:new nR,H:new oR,K:new iR,k:new aR,m:new sR,s:new lR,S:new uR,X:new cR,x:new fR,t:new pR,T:new dR};var Hvr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Wvr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$vr=/^'([^]*?)'?$/,Yvr=/''/g,Zvr=/\S/,Kvr=/[a-zA-Z]/;function RQ(e,t,r,n){var P,k,q,U,H,X,ee,ne,me,ue,Me,ke,Te,Ee,Ze,Qe,Fe,ze;let o=()=>Bn((n==null?void 0:n.in)||r,NaN),i=h7e(),a=(k=(P=n==null?void 0:n.locale)!=null?P:i.locale)!=null?k:QM,u=(ue=(me=(X=(H=n==null?void 0:n.firstWeekContainsDate)!=null?H:(U=(q=n==null?void 0:n.locale)==null?void 0:q.options)==null?void 0:U.firstWeekContainsDate)!=null?X:i.firstWeekContainsDate)!=null?me:(ne=(ee=i.locale)==null?void 0:ee.options)==null?void 0:ne.firstWeekContainsDate)!=null?ue:1,p=(ze=(Fe=(Ee=(Te=n==null?void 0:n.weekStartsOn)!=null?Te:(ke=(Me=n==null?void 0:n.locale)==null?void 0:Me.options)==null?void 0:ke.weekStartsOn)!=null?Ee:i.weekStartsOn)!=null?Fe:(Qe=(Ze=i.locale)==null?void 0:Ze.options)==null?void 0:Qe.weekStartsOn)!=null?ze:0;if(!t)return e?o():tn(r,n==null?void 0:n.in);let h={firstWeekContainsDate:u,weekStartsOn:p,locale:a},g=[new Lk(n==null?void 0:n.in,r)],x=t.match(Wvr).map(Ne=>{let et=Ne[0];if(et in eC){let st=eC[et];return st(Ne,a.formatLong)}return Ne}).join("").match(Hvr),b=[];for(let Ne of x){!(n!=null&&n.useAdditionalWeekYearTokens)&&Dk(Ne)&&tC(Ne,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Ak(Ne)&&tC(Ne,t,e);let et=Ne[0],st=b7e[et];if(st){let{incompatibleTokens:ft}=st;if(Array.isArray(ft)){let tt=b.find(lt=>ft.includes(lt.token)||lt.token===et);if(tt)throw new RangeError(`The format string mustn't contain \`${tt.fullToken}\` and \`${Ne}\` at the same time`)}else if(st.incompatibleTokens==="*"&&b.length>0)throw new RangeError(`The format string mustn't contain \`${Ne}\` and any other token at the same time`);b.push({token:et,fullToken:Ne});let Ye=st.run(e,Ne,a.match,h);if(!Ye)return o();g.push(Ye.setter),e=Ye.rest}else{if(et.match(Kvr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+et+"`");if(Ne==="''"?Ne="'":et==="'"&&(Ne=Xvr(Ne)),e.indexOf(Ne)===0)e=e.slice(Ne.length);else return o()}}if(e.length>0&&Zvr.test(e))return o();let T=g.map(Ne=>Ne.priority).sort((Ne,et)=>et-Ne).filter((Ne,et,st)=>st.indexOf(Ne)===et).map(Ne=>g.filter(et=>et.priority===Ne).sort((et,st)=>st.subPriority-et.subPriority)).map(Ne=>Ne[0]),A=tn(r,n==null?void 0:n.in);if(isNaN(+A))return o();let L={};for(let Ne of T){if(!Ne.validate(A,h))return o();let et=Ne.set(A,L,h);Array.isArray(et)?(A=et[0],Object.assign(L,et[1])):A=et}return A}function Xvr(e){return e.match($vr)[1].replace(Yvr,"'")}function w7e(e,t){var h;let r=()=>Bn(t==null?void 0:t.in,NaN),n=(h=t==null?void 0:t.additionalDigits)!=null?h:2,o=tyr(e),i;if(o.date){let g=ryr(o.date,n);i=nyr(g.restDateString,g.year)}if(!i||isNaN(+i))return r();let a=+i,u=0,p;if(o.time&&(u=oyr(o.time),isNaN(u)))return r();if(o.timezone){if(p=iyr(o.timezone),isNaN(p))return r()}else{let g=new Date(a+u),x=tn(0,t==null?void 0:t.in);return x.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),x.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),x}return tn(a+u+p,t==null?void 0:t.in)}var hR={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Jvr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Qvr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,eyr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function tyr(e){let t={},r=e.split(hR.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],hR.timeZoneDelimiter.test(t.date)&&(t.date=e.split(hR.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){let o=hR.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function ryr(e,t){let r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?o:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function nyr(e,t){if(t===null)return new Date(NaN);let r=e.match(Jvr);if(!r)return new Date(NaN);let n=!!r[4],o=rC(r[1]),i=rC(r[2])-1,a=rC(r[3]),u=rC(r[4]),p=rC(r[5])-1;if(n)return cyr(t,u,p)?ayr(t,u,p):new Date(NaN);{let h=new Date(0);return!lyr(t,i,a)||!uyr(t,o)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(o,a)),h)}}function rC(e){return e?parseInt(e):1}function oyr(e){let t=e.match(Qvr);if(!t)return NaN;let r=jQ(t[1]),n=jQ(t[2]),o=jQ(t[3]);return fyr(r,n,o)?r*XM+n*KM+o*1e3:NaN}function jQ(e){return e&&parseFloat(e.replace(",","."))||0}function iyr(e){if(e==="Z")return 0;let t=e.match(eyr);if(!t)return 0;let r=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return pyr(n,o)?r*(n*XM+o*KM):NaN}function ayr(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let o=n.getUTCDay()||7,i=(t-1)*7+r+1-o;return n.setUTCDate(n.getUTCDate()+i),n}var syr=[31,null,31,30,31,30,31,31,30,31,30,31];function E7e(e){return e%400===0||e%4===0&&e%100!==0}function lyr(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(syr[t]||(E7e(e)?29:28))}function uyr(e,t){return t>=1&&t<=(E7e(e)?366:365)}function cyr(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function fyr(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function pyr(e,t){return t>=0&&t<=59}var aw={en:"MM/dd/yyyy",de:"dd.MM.yyyy"};function Ju(e){let t=hr.getSettings().LANGUAGE_CODE,r=new Date(e);return Qp(r)?Object.hasOwn(aw,t)?kQ(r,aw[t],{in:xv}):kQ(r,aw[mv.EN],{in:xv}):e}function nC(e){let t=hr.getSettings().LANGUAGE_CODE,r=new Date;return Object.hasOwn(aw,t)?RQ(e,aw[t],r,{in:xv}):RQ(e,aw[mv.EN],r,{in:xv})}function S7e(e){let t="";try{t=d7e(e,{in:xv})}catch(r){t=""}return t}function I7e(e){return!Ge(e)||!lk(e)?new Date("invalid"):w7e(e,{in:xv})}function Qp(e){return Ik(e)}function sw(e){return JM(e,{in:xv})}function mR(e){return Ge(e)?g7e(e):Number.NaN}var uw={type:"FeatureCollection",features:[]},dyr=e=>["MultiLineString","LineString"].includes(e),hyr=e=>["MultiPolygon","Polygon"].includes(e),qQ=e=>dyr(e)?Ur.LINE:hyr(e)?Ur.OUTLINE:Ur.LINE,lw={marker:()=>zn[Ur.SYMBOL].COLOR,fill:()=>zn[Ur.FILL].COLOR,"fill-opacity":()=>zn[Ur.FILL].OPACITY,stroke:e=>{let t=qQ(e);return zn[t].COLOR},"stroke-opacity":e=>{let t=qQ(e);return zn[t].OPACITY},"stroke-width":e=>{let t=qQ(e);return zn[t].WIDTH}},V0={marker:{default:lw.marker,geometryTypes:["Point","MultiPoint"],inputProps:{type:"color"}},fill:{default:lw.fill,geometryTypes:["MultiPolygon","Polygon","GeometryCollection"],inputProps:{type:"color"}},"fill-opacity":{default:lw["fill-opacity"],geometryTypes:["MultiPolygon","Polygon","GeometryCollection"],inputProps:{step:.05,min:0,max:1,type:"number"}},stroke:{default:lw.stroke,geometryTypes:["MultiPolygon","Polygon","GeometryCollection","LineString","MultiLineString"],inputProps:{type:"color"}},"stroke-opacity":{default:lw["stroke-opacity"],geometryTypes:["MultiPolygon","Polygon","GeometryCollection","LineString","MultiLineString"],inputProps:{max:1,min:0,step:.05,type:"number"}},"stroke-width":{default:lw["stroke-width"],geometryTypes:["MultiPolygon","Polygon","GeometryCollection","LineString","MultiLineString"],inputProps:{step:.1,min:0,max:20,type:"number"}}},gR={img_link:{inputProps:{type:"text"}},title:{inputProps:{type:"text"}},description:{inputProps:{type:"text"}},time:{inputProps:{type:"text"}}},zQ=["geometry"],FQ=Object.keys(V0),oC=Object.keys(gR),Tl={POINT:"Point",MULTI_POINT:"MultiPoint",POLYGON:"Polygon",MULTI_POLYGON:"MultiPolygon",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",GEOMETRY_COLLECTION:"GeometryCollection"},ci={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"},Hi={LOCAL:"local",REMOTE:"remote"};var T7e=e=>({type:"Polygon",coordinates:[[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]]]}),M7e=e=>{let t={};for(let r of Object.keys(Ur)){let n=Ur[r],o=`${e}-${n}`;t[o]=Ft(Se({id:o,source:e,metadata:{[Rh.id]:e}},OQ[n]),{layout:Ft(Se({},OQ[n].layout),{visibility:"visible"})})}return t},C7e=e=>{let{properties:t}=e,r=gyr(t);return Ft(Se({},e),{properties:r})},UQ=e=>{Object.hasOwn(e,"properties")||(e.properties={});let{properties:t}=e,r=myr(t);return Ft(Se({},e),{properties:r})},myr=e=>{var o;let t=(o=e[ci.time])!=null?o:"",r=sw(I7e(t)).valueOf();return Number.isNaN(r)?(delete e[ci.time],e):Ft(Se({},e),{[ci.time]:r})},gyr=e=>{var o;let t=(o=e[ci.time])!=null?o:"",r=S7e(t);return r===""?(delete e[ci.time],e):Ft(Se({},e),{[ci.time]:r})},A7e=e=>{if(!Ge(e))return[];let[t,r]=e;return!Ge(t)||!Ge(r)?[]:["any",["!",["has",ci.time]],["all",[">=",["get",ci.time],t*1e3],["<=",["get",ci.time],r*1e3]]]};var D7e=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],G0,bv,iC,hs,N7e,O7e,L7e,zh,Fh=class Fh extends Jb{constructor({metadata:r,geometry:n,geoJson:o}){if(!Ep(Fh,G0))throw new TypeError("Constructor is private. Use GeoJsonLayer.fromApplication() or GeoJsonLayer.fromPersistence() instead.");qy(Fh,G0,!1);super({metadata:r,geometry:n});ng(this,hs);ct(this,"geoJSON",{});ng(this,bv,[]);ng(this,iC,{});$l(this,hs,N7e).call(this,o)}static fromApplication(r){return qy(Fh,G0,!0),new Fh(r)}static fromPersistence({metadata:r,geometry:n,geoJson:o}){qy(Fh,G0,!0);let i=o.features.map(UQ),a=Ft(Se({},o),{features:i});return new Fh({metadata:r,geometry:n,geoJson:a})}addLayerToMap(r,n){var p,h;if(!Ge(r))return;let o=this.getId(),i=this.getGeoJson(),a=M7e(o);r.addSource(o,{type:"geojson",data:i});let u=r.getLayer(Gc)!==void 0?Gc:void 0;for(let[g,x]of Object.entries(a))r.addLayer(x,u),Ep(this,bv).push(g),Ep(this,iC)[g]=x.filter;if(Ge(n)){let{layerSettings:g}=n,x=(p=g==null?void 0:g.opacity)!=null?p:1,b=(h=g==null?void 0:g.visibility)!=null?h:"visible";this.setOpacity(r,x),this.setVisibility(r,b)}$l(this,hs,O7e).call(this,r)}updateDataOnMap(r,n){return!Ge(r)||!Ge(n)?Promise.reject():r.getSource(this.getId()).updateData(n).getData().then(i=>(this.setGeoJson(i),i))}setDataOnMap(r,n){if(!Ge(r)||!Ge(n))return;let o=r.getSource(this.getId());this.setGeoJson(n),o.setData(this.geoJSON)}removeFeatureFromMap(r,n){r.getSource(this.getId()).updateData({remove:[n]}),this.removeFeature(n)}getGeoJsonForPersistence(){var o;let r=structuredClone(this.getGeoJson()),n=(o=r.features)!=null?o:[];return n=n.map(C7e),r.features=n,r}static toApplicationState(r){var i;if(!Ge(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(UQ),n.features=o,n}getGeoJson(){return this.geoJSON}setGeoJson(r){let n=r.features.map((i,a)=>(Object.hasOwn(i,"properties")||(i.properties={}),Ft(Se({},i),{id:a+1}))),o=Ft(Se({},r),{features:n});this.geoJSON=o}getFeature(r){let n=this.geoJSON.features.find(o=>o.id===r);return Ge(n)?n:(console.warn(`No feature found for id '${r}'`),null)}removeFeature(r){let n=this.geoJSON.features.findIndex(o=>o.id===r);if(n<0){console.warn(`Trying to remove a feature with non existing id '${r}'`);return}this.geoJSON.features.splice(n,1)}setFeatureState(r,n,o){if(!Ge(r)||!Ge(n)||!Ge(o))return;let i=this.getId();r.setFeatureState({source:i,id:n},o)}getPreviewFeature(){let r=this.getMetadata(it.bounds);return{type:"Feature",properties:{},geometry:T7e(r)}}isDisplayedInMap(r){return r.getSource(this.getId())!==void 0}getType(){return Mn.VECTOR_MAP}isRemote(){return Ge(this.metadata[it.vectorMapId])}isLocal(){return!this.isRemote()}getMapLibreLayerId(){return Ep(this,bv).length>0?Ep(this,bv)[0]:null}removeMapLibreLayers(r){if(Ge(r)){for(let{id:n}of $l(this,hs,zh).call(this,r))$l(this,hs,L7e).call(this,r,n),r.removeLayer(n);r.removeSource(this.getId()),qy(this,bv,[])}}getOpacity(r){let n=$l(this,hs,zh).call(this,r),o=1,i=1;if(n.length===0)return null;for(let{id:a,type:u}of n){if(!NQ(u))continue;let p=AQ[u];o=r.getPaintProperty(a,p);break}if(typeof o=="number")return o;if(Array.isArray(o)&&o.length>0){if(o[0]==="*")return o[2];if(o[0]==="coalesce")return o[3]}return i}setOpacity(r,n){let o=$l(this,hs,zh).call(this,r);if(!(o.length===0||!Ge(n)))for(let{id:i,type:a}of o){if(!NQ(a))continue;let u=zn[a].OPACITY,p=AQ[a],h=DQ[a];r.setPaintProperty(i,p,["*",["coalesce",["feature-state",h],["get",h],u],n])}}isVisible(r){let n=$l(this,hs,zh).call(this,r);return n.length===0?!1:r.getLayoutProperty(n[0].id,"visibility")==="visible"}setVisibility(r,n){let o=$l(this,hs,zh).call(this,r);if(!(o.length===0||!Ge(n)))for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n)}move(r,n){let o=$l(this,hs,zh).call(this,r),i=n;Ge(n)||(Ge(r.getLayer(Gc))?i=Gc:i=null),o.forEach(({id:a})=>{r.moveLayer(a,i)})}moveToTop(r){this.move(r,null)}setFilters(r,n){let o=$l(this,hs,zh).call(this,r);if(o.length===0)return;let i=n==null?void 0:n.timeExtent,a=A7e(i);for(let u of o){let{id:p}=u,h=Ep(this,iC)[p],g=["all",h];Ge(a)&&a.length>0&&g.push(a),g.length===1?r.setFilter(p,h):r.setFilter(p,g)}}};G0=new WeakMap,bv=new WeakMap,iC=new WeakMap,hs=new WeakSet,N7e=function(r){var o,i;this.setGeoJson(r);let n=this.geometry?$M(this.geometry):$M(this.geoJSON);this.metadata[it.bounds]=n,this.metadata[it.id]=(o=this.metadata[it.id])!=null?o:crypto.randomUUID(),this.metadata[it.timePublished]=(i=this.metadata[it.timePublished])!=null?i:new Date().getFullYear(),this.metadata[it.hasGeoReference]=!0},O7e=function(r){for(let{id:n}of $l(this,hs,zh).call(this,r))for(let{type:o,handler:i}of D7e)r.on(o,n,i)},L7e=function(r,n){for(let{type:o,handler:i}of D7e)r.off(o,n,i)},zh=function(r){let n=Ep(this,bv).map(o=>r.getLayer(o));return n[0]===void 0?[]:n},ng(Fh,G0,!1);var BQ=Fh,P7e=BQ;var Ua=P7e;var k7e=Z(GM(),1);var R7e=e=>Object.values(e).every(t=>t===void 0||Object.entries(t).length===0),VQ=(e,t=4)=>{if(Array.isArray(e))return e.map(r=>VQ(r,t));if(typeof e=="object"&&e!==null){let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=VQ(o)}),r}else return isNaN(e)||e===null?e:e.toFixed(Math.min(yyr(e),t))},vyr=(e,t=4)=>{let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=VQ(o,t)}),r},yyr=e=>Math.floor(e)===e?0:e.toString().split(".")[1].length||0,GQ=({geojson:e,properties:t})=>Ua.fromPersistence({metadata:t,geoJson:e!=null?e:structuredClone(uw)}),j7e=(e,t)=>{let r;t.forEach(n=>{let o=n.getMetadata(it.bounds);r=r===void 0?new k7e.LngLatBounds(o):r.extend(o)}),r!==void 0&&e.fitBounds(r,{animate:!1,padding:{left:350,right:350,top:50,bottom:50}})},q7e=(e,t)=>{let r;if(e===void 0)r=t;else if(t===void 0)r=e;else{let n=Array.isArray(e),o=Array.isArray(t),i=n?e:[e],a=o?t:[t];r=Array.from(new Set([...i,...a]))}return r},z7e=(e,t)=>{let r=e.isVisible(t),n=e.getOpacity(t),o=e.getType(),i={isVisible:r,opacity:n};return o===Mn.VECTOR_MAP&&e.isLocal()?Object.assign(i,{geojson:e.getGeoJsonForPersistence(),type:Mn.VECTOR_MAP,properties:e.getMetadata()}):Object.assign(i,{id:e.getId(),type:o===Mn.HISTORIC_MAP?Mn.HISTORIC_MAP:Mn.VECTOR_MAP})},vR=(e,t=!1)=>{let r={center:e.getCenter().toArray(),bearing:e.getBearing(),pitch:e.getPitch(),zoom:e.getZoom()};return t?vyr(r,5):r};function Hf(e,t){let r=()=>{if(typeof window=="undefined")return t;try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn(`Error reading localStorage key \u201C${e}\u201D:`,a),t}},[n,o]=(0,cw.useState)(r),i=a=>{typeof window=="undefined"&&console.warn(`Tried setting localStorage key \u201C${e}\u201D even though environment is not a client`);try{let u=a instanceof Function?a(n):a;window.localStorage.setItem(e,JSON.stringify(u)),o(u),window.dispatchEvent(new Event("local-storage"))}catch(u){console.warn(`Error setting localStorage key \u201C${e}\u201D:`,u)}};return(0,cw.useEffect)(()=>{o(r())},[]),(0,cw.useEffect)(()=>{let a=()=>{o(r())};return window.addEventListener("storage",a),window.addEventListener("local-storage",a),()=>{window.removeEventListener("storage",a),window.removeEventListener("local-storage",a)}},[]),[n,i]}var F7e=e=>{(0,cw.useEffect)(()=>{let t="onpagehide"in window.self?"pagehide":"unload";return window.addEventListener(t,e,{capture:!0}),()=>{window.removeEventListener(t,e,{capture:!0})}},[e])};var U7e=e=>e.r!==void 0||e.d!==void 0||e.ri!==void 0||e.u!==void 0,B7e=e=>e.rotation!==void 0||e.direction!==void 0||e.right!==void 0||e.up!==void 0,V7e=e=>{let{c:t,r,d:n,u:o,p:i,z:a}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{rotation:r},a===void 0?null:{zoom:a},i===void 0?null:{position:i},n===void 0?null:{direction:n},o===void 0?null:{up:o})},_yr=e=>{let[t,r,n]=e,o=Math.log2(6378137/n)+6;return{center:[t,r],pitch:50,zoom:o}},xyr=(e,t)=>({bearing:byr(t),legacy3dMapView:!0}),G7e=e=>e*(180/Math.PI),byr=e=>{let t=Math.PI+(Math.atan2(e[0],e[1])-Math.PI/2);return G7e(t)};function yR(e){let{center:t,rotation:r,direction:n,position:o,zoom:i}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{pitch:G7e(r)},i===void 0?null:{zoom:i},o===void 0?null:_yr(o),n===void 0||o===void 0?null:xyr(o,n))}var _R={"2D":0,"3D":1},H7e=e=>{if(e!==void 0)return e===_R["3D"]},W7e=e=>{if(U7e(e)){let i=V7e(e);return yR(i)}let{c:t,be:r,p:n,z:o}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{bearing:r},n===void 0?null:{pitch:n},o===void 0?null:{zoom:o})};var H0=Z(we(),1);var wyr=function(){let e=vt(Kp),t=vt(Bc),r=vt(wr),n=vt(vv),o=vt(yv),i=vt(Ln),a=Ar(ck),[,u]=Hf(HQ,{operationalLayers:[],is3dEnabled:!1}),p=(0,H0.useCallback)(()=>{if(r!==void 0){let h=r.hasTerrain(),g={activeBasemapId:e,is3dEnabled:h,operationalLayers:i.map(x=>z7e(x,r)).filter(x=>x!==null),searchOptions:{facets:t,timeExtent:n,timeRange:o}};return g.cameraOptions=vR(r),u(g),g}},[e,r,t,i,n,o]);return F7e(p),(0,H0.useEffect)(()=>{a(()=>p)},[p]),H0.default.createElement(H0.default.Fragment,null)},$7e=wyr;var Y7e=Z(hv(),1);function fw(e){return Nt(this,null,function*(){let t=hr.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let r=yield Y7e.default.get(`${t}/_doc/${e}`);if(r.status===200)return r.data._source;console.error("Something went wrong while trying to fetch search document.")})}var aC=function(e,t){let r="geometry"in t?t.geometry:void 0,n={};delete t.geometry;for(let i in t)if(Object.hasOwn(t,i))if(i==="time_published"){let a=t[i].split("-")[0];n[i]=a}else n[i]=t[i];return n.id=e,n.type===Mn.VECTOR_MAP?(n[it.vectorMapId]=e,Ua.fromPersistence({geometry:r,metadata:n,geoJson:structuredClone(uw)})):new jh({metadata:n,geometry:r})},Z7e=function(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(aC(e[r]._id,e[r]._source));return t};var K7e=e=>fw(e).then(t=>aC(e,t)).catch(()=>{let t=new jh({metadata:{id:e,has_georeference:!1}});return t.setIsMissing(!0),t});var Xs=Z(we(),1);var aee=Z(rBe(),1);function ir(){return ir=aee.default?aee.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ir.apply(null,arguments)}var IBe=Z(hBe(),1);var uee=Z(SBe(),1);function AR(e,t){return AR=uee.default?uee.default.bind():function(r,n){return r.__proto__=n,r},AR(e,t)}function jr(e,t){e.prototype=(0,IBe.default)(t.prototype),e.prototype.constructor=e,AR(e,t)}function Wr(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Pn(){return Pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pn.apply(null,arguments)}function dw(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}var fee=Z(we());var agn=Z(NR()),M0r=function(){};function MBe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[hw(n)]=M0r,0)var o}),r}function cee(e,t){return e[t]!==void 0}function hw(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function CBe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function mw(e,t){return mw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},mw(e,t)}function OR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mw(e,t)}var gw=Z(we()),LBe=Z(dee()),PBe=Z(NR());var A0r="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function W0(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",o=CBe(e),i=Object.keys(t),a=i.map(hw);o||!r.length||(0,PBe.default)(!1);var u=function(h){OR(g,h);function g(){for(var b,T=arguments.length,A=new Array(T),L=0;L<T;L++)A[L]=arguments[L];b=h.call.apply(h,[this].concat(A))||this,b.handlers=Object.create(null),i.forEach(function(k){var q=t[k],U=function(X){if(b.props[q]){var ee;b._notifying=!0;for(var ne=arguments.length,me=new Array(ne>1?ne-1:0),ue=1;ue<ne;ue++)me[ue-1]=arguments[ue];(ee=b.props)[q].apply(ee,[X].concat(me)),b._notifying=!1}b.unmounted||b.setState(function(Me){var ke,Te=Me.values;return{values:Pn(Object.create(null),Te,(ke={},ke[k]=X,ke))}})};b.handlers[q]=U}),r.length&&(b.attachRef=function(k){b.inner=k});var P=Object.create(null);return i.forEach(function(k){P[k]=b.props[hw(k)]}),b.state={values:P,prevProps:{}},b}var x=g.prototype;return x.shouldComponentUpdate=function(){return!this._notifying},g.getDerivedStateFromProps=function(T,A){var L=A.values,P=A.prevProps,k={values:Pn(Object.create(null),L),prevProps:{}};return i.forEach(function(q){k.prevProps[q]=T[q],!cee(T,q)&&cee(P,q)&&(k.values[q]=T[hw(q)])}),k},x.componentWillUnmount=function(){this.unmounted=!0},x.render=function(){var T=this,A=this.props,L=A.innerRef,P=dw(A,["innerRef"]);a.forEach(function(q){delete P[q]});var k={};return i.forEach(function(q){var U=T.props[q];k[q]=U!==void 0?U:T.state.values[q]}),gw.default.createElement(e,Pn({},P,k,this.handlers,{ref:L||this.attachRef}))},g}(gw.default.Component);(0,LBe.polyfill)(u),u.displayName="Uncontrolled("+n+")",u.propTypes=Pn({innerRef:function(){}},MBe(t,n)),r.forEach(function(h){u.prototype[h]=function(){var x;return(x=this.inner)[h].apply(x,arguments)}});var p=u;return gw.default.forwardRef&&(p=gw.default.forwardRef(function(h,g){return gw.default.createElement(u,Pn({},h,{innerRef:g,__source:{fileName:A0r,lineNumber:128},__self:this}))}),p.propTypes=u.propTypes),p.ControlledComponent=e,p.deferControlTo=function(h,g,x){return g===void 0&&(g={}),W0(h,Pn({},t,g),x)},p}var gee=Z(mee());var BBe=Z(NR()),LR=Z(xt());var Ks={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},fC={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var UBe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},pC={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function vee(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[r.length-1];return typeof o=="function"?e.apply(void 0,r):function(i){return e.apply(void 0,r.concat([i]))}}}function po(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,BBe.default)(!1),r+(t?"-"+t:"")}var Cn=vee(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=LR.default.string,n.bsClass=e,t}),PR=vee(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],o=r.propTypes||{};e.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var i=LR.default.oneOf(n);if(r.STYLES=n,i._values=n,r.propTypes=ir({},o,{bsStyle:i}),t!==void 0){var a=r.defaultProps||(r.defaultProps={});a.bsStyle=t}return r}),ed=vee(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],o=r.propTypes||{};e.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var i=[];n.forEach(function(u){var p=fC[u];p&&p!==u&&i.push(p),i.push(u)});var a=LR.default.oneOf(i);return a._values=i,r.SIZES=n,r.propTypes=ir({},o,{bsSize:a}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function oo(e){var t,r=(t={},t[po(e)]=!0,t);if(e.bsSize){var n=fC[e.bsSize]||e.bsSize;r[po(e,n)]=!0}return e.bsStyle&&(r[po(e,e.bsStyle)]=!0),r}function VBe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function GBe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function Ro(e){var t={};return(0,gee.default)(e).forEach(function(r){var n=r[0],o=r[1];GBe(n)||(t[n]=o)}),[VBe(e),t]}function vw(e,t){var r={};t.forEach(function(o){r[o]=!0});var n={};return(0,gee.default)(e).forEach(function(o){var i=o[0],a=o[1];!GBe(i)&&!r[i]&&(n[i]=a)}),[VBe(e),n]}var ms=Z(we());function k0r(e,t,r){var n=0;return ms.default.Children.map(e,function(o){return ms.default.isValidElement(o)?t.call(r,o,n++):o})}function R0r(e,t,r){var n=0;ms.default.Children.forEach(e,function(o){ms.default.isValidElement(o)&&t.call(r,o,n++)})}function j0r(e){var t=0;return ms.default.Children.forEach(e,function(r){ms.default.isValidElement(r)&&++t}),t}function q0r(e,t,r){var n=0,o=[];return ms.default.Children.forEach(e,function(i){ms.default.isValidElement(i)&&t.call(r,i,n++)&&o.push(i)}),o}function z0r(e,t,r){var n=0,o;return ms.default.Children.forEach(e,function(i){o||ms.default.isValidElement(i)&&t.call(r,i,n++)&&(o=i)}),o}function F0r(e,t,r){var n=0,o=!0;return ms.default.Children.forEach(e,function(i){o&&ms.default.isValidElement(i)&&(t.call(r,i,n++)||(o=!1))}),o}function U0r(e,t,r){var n=0,o=!1;return ms.default.Children.forEach(e,function(i){o||ms.default.isValidElement(i)&&t.call(r,i,n++)&&(o=!0)}),o}function B0r(e){var t=[];return ms.default.Children.forEach(e,function(r){ms.default.isValidElement(r)&&t.push(r)}),t}var Wf={map:k0r,forEach:R0r,count:j0r,find:z0r,filter:q0r,every:F0r,some:U0r,toArray:B0r};var yee=Z(xt()),dC=Z(we()),H0r={label:yee.default.string.isRequired,onClick:yee.default.func},W0r={label:"Close"},_ee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.label,a=o.onClick;return dC.default.createElement("button",{type:"button",className:"close",onClick:a},dC.default.createElement("span",{"aria-hidden":"true"},"\xD7"),dC.default.createElement("span",{className:"sr-only"},i))},t}(dC.default.Component);_ee.propTypes=H0r;_ee.defaultProps=W0r;var JBe=_ee;function wo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Eee=Z(we()),Uh=Z(xt()),aVe=Z(Ml());function o1r(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,o){if(typeof o!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?o:function(){for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];n.apply(this,u),o.apply(this,u)}},null)}var Cl=o1r;var i1r={href:Uh.default.string,onClick:Uh.default.func,onKeyDown:Uh.default.func,disabled:Uh.default.bool,role:Uh.default.string,tabIndex:Uh.default.oneOfType([Uh.default.number,Uh.default.string]),componentClass:aVe.default},a1r={componentClass:"a"};function iVe(e){return!e||e.trim()==="#"}var See=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(wo(wo(i))),i.handleKeyDown=i.handleKeyDown.bind(wo(wo(i))),i}var r=t.prototype;return r.handleClick=function(o){var i=this.props,a=i.disabled,u=i.href,p=i.onClick;if((a||iVe(u))&&o.preventDefault(),a){o.stopPropagation();return}p&&p(o)},r.handleKeyDown=function(o){o.key===" "&&(o.preventDefault(),this.handleClick(o))},r.render=function(){var o=this.props,i=o.componentClass,a=o.disabled,u=o.onKeyDown,p=Wr(o,["componentClass","disabled","onKeyDown"]);return iVe(p.href)&&(p.role=p.role||"button",p.href=p.href||"#"),a&&(p.tabIndex=-1,p.style=ir({pointerEvents:"none"},p.style)),Eee.default.createElement(i,ir({},p,{onClick:this.handleClick,onKeyDown:Cl(this.handleKeyDown,u)}))},t}(Eee.default.Component);See.propTypes=i1r;See.defaultProps=a1r;var YR=See;var sVe=Z(XBe());var Iee=Z(Zn()),ZR=Z(we()),$0=Z(xt()),lVe=Z(Ml());var s1r={active:$0.default.bool,disabled:$0.default.bool,block:$0.default.bool,onClick:$0.default.func,componentClass:lVe.default,href:$0.default.string,type:$0.default.oneOf(["button","reset","submit"])},l1r={active:!1,block:!1,disabled:!1},Tee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderAnchor=function(o,i){return ZR.default.createElement(YR,ir({},o,{className:(0,Iee.default)(i,o.disabled&&"disabled")}))},r.renderButton=function(o,i){var a=o.componentClass,u=Wr(o,["componentClass"]),p=a||"button";return ZR.default.createElement(p,ir({},u,{type:u.type||"button",className:i}))},r.render=function(){var o,i=this.props,a=i.active,u=i.block,p=i.className,h=Wr(i,["active","block","className"]),g=Ro(h),x=g[0],b=g[1],T=ir({},oo(x),(o={active:a},o[po(x,"block")]=u,o)),A=(0,Iee.default)(p,T);return b.href?this.renderAnchor(b,A):this.renderButton(b,A)},t}(ZR.default.Component);Tee.propTypes=s1r;Tee.defaultProps=l1r;var KR=Cn("btn",ed([Ks.LARGE,Ks.SMALL,Ks.XSMALL],PR((0,sVe.default)(UBe).concat([pC.DEFAULT,pC.PRIMARY,pC.LINK]),pC.DEFAULT,Tee)));var fVe=Z(Zn()),Mee=Z(we()),pVe=Z(xt());var d1r={glyph:pVe.default.string.isRequired},dVe=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.glyph,u=i.className,p=Wr(i,["glyph","className"]),h=Ro(p),g=h[0],x=h[1],b=ir({},oo(g),(o={},o[po(g,a)]=!0,o));return Mee.default.createElement("span",ir({},x,{className:(0,fVe.default)(u,b)}))},t}(Mee.default.Component);dVe.propTypes=d1r;var Bh=Cn("glyphicon",dVe);var mVe=Z(Zn()),Cee=Z(we()),JR=Z(xt()),pvn=Z(Y0());var m1r={htmlFor:JR.default.string,srOnly:JR.default.bool},g1r={srOnly:!1},v1r={$bs_formGroup:JR.default.object},QR=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,u=a.htmlFor,p=u===void 0?i:u,h=a.srOnly,g=a.className,x=Wr(a,["htmlFor","srOnly","className"]),b=Ro(x),T=b[0],A=b[1],L=ir({},oo(T),{"sr-only":h});return Cee.default.createElement("label",ir({},A,{htmlFor:p,className:(0,mVe.default)(g,L)}))},t}(Cee.default.Component);QR.propTypes=m1r;QR.defaultProps=g1r;QR.contextTypes=v1r;var ej=Cn("control-label",QR);var aGe=Z(mee());function Bee(e,t){var r=t.propTypes,n={},o={};return(0,aGe.default)(e).forEach(function(i){var a=i[0],u=i[1];r[a]?n[a]=u:o[a]=u}),[n,o]}var sGe=Z(Zn()),Sj=Z(we()),Yc=Z(xt()),ww=Z(zVe()),Ej,G_r={in:Yc.default.bool,mountOnEnter:Yc.default.bool,unmountOnExit:Yc.default.bool,appear:Yc.default.bool,timeout:Yc.default.number,onEnter:Yc.default.func,onEntering:Yc.default.func,onEntered:Yc.default.func,onExit:Yc.default.func,onExiting:Yc.default.func,onExited:Yc.default.func},H_r={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},W_r=(Ej={},Ej[ww.ENTERING]="in",Ej[ww.ENTERED]="in",Ej),Vee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.className,a=o.children,u=Wr(o,["className","children"]);return Sj.default.createElement(ww.default,u,function(p,h){return Sj.default.cloneElement(a,ir({},h,{className:(0,sGe.default)("fade",i,a.props.className,W_r[p])}))})},t}(Sj.default.Component);Vee.propTypes=G_r;Vee.defaultProps=H_r;var Sv=Vee;var dGe=Z(Zn()),Yee=Z(we()),EC=Z(xt()),hGe=Z(Ml()),Uvn=Z(Y0());var Gee=Z(Zn()),wC=Z(we()),lGe=Z(xt());var $_r={bsRole:"feedback"},Y_r={$bs_formGroup:lGe.default.object},Hee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getGlyph=function(o){switch(o){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null;}},r.renderDefaultFeedback=function(o,i,a,u){var p=this.getGlyph(o&&o.validationState);return p?wC.default.createElement(Bh,ir({},u,{glyph:p,className:(0,Gee.default)(i,a)})):null},r.render=function(){var o=this.props,i=o.className,a=o.children,u=Wr(o,["className","children"]),p=Ro(u),h=p[0],g=p[1],x=oo(h);if(!a)return this.renderDefaultFeedback(this.context.$bs_formGroup,i,x,g);var b=wC.default.Children.only(a);return wC.default.cloneElement(b,ir({},g,{className:(0,Gee.default)(b.props.className,i,x)}))},t}(wC.default.Component);Hee.defaultProps=$_r;Hee.contextTypes=Y_r;var uGe=Cn("form-control-feedback",Hee);var cGe=Z(Zn()),Wee=Z(we()),fGe=Z(Ml());var Z_r={componentClass:fGe.default},K_r={componentClass:"p"},$ee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=Ro(u),h=p[0],g=p[1],x=oo(h);return Wee.default.createElement(i,ir({},g,{className:(0,cGe.default)(a,x)}))},t}(Wee.default.Component);$ee.propTypes=Z_r;$ee.defaultProps=K_r;var pGe=Cn("form-control-static",$ee);var X_r={componentClass:hGe.default,type:EC.default.string,id:EC.default.string,inputRef:EC.default.func},J_r={componentClass:"input"},Q_r={$bs_formGroup:EC.default.object},Ew=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,u=a.componentClass,p=a.type,h=a.id,g=h===void 0?i:h,x=a.inputRef,b=a.className,T=a.bsSize,A=Wr(a,["componentClass","type","id","inputRef","className","bsSize"]),L=Ro(A),P=L[0],k=L[1],q;if(p!=="file"&&(q=oo(P)),T){var U=fC[T]||T;q[po({bsClass:"input"},U)]=!0}return Yee.default.createElement(u,ir({},k,{type:p,id:g,ref:x,className:(0,dGe.default)(b,q)}))},t}(Yee.default.Component);Ew.propTypes=X_r;Ew.defaultProps=J_r;Ew.contextTypes=Q_r;Ew.Feedback=uGe;Ew.Static=pGe;var Zee=Cn("form-control",ed([Ks.SMALL,Ks.LARGE],Ew));var mGe=Z(Zn()),Kee=Z(we()),Ij=Z(xt());var exr={controlId:Ij.default.string,validationState:Ij.default.oneOf(["success","warning","error",null])},txr={$bs_formGroup:Ij.default.object.isRequired},Xee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.controlId,a=o.validationState;return{$bs_formGroup:{controlId:i,validationState:a}}},r.hasFeedback=function(o){var i=this;return Wf.some(o,function(a){return a.props.bsRole==="feedback"||a.props.children&&i.hasFeedback(a.props.children)})},r.render=function(){var o=this.props,i=o.validationState,a=o.className,u=o.children,p=Wr(o,["validationState","className","children"]),h=vw(p,["controlId"]),g=h[0],x=h[1],b=ir({},oo(g),{"has-feedback":this.hasFeedback(u)});return i&&(b["has-"+i]=!0),Kee.default.createElement("div",ir({},x,{className:(0,mGe.default)(a,b)}),u)},t}(Kee.default.Component);Xee.propTypes=exr;Xee.childContextTypes=txr;var Tj=Cn("form-group",ed([Ks.LARGE,Ks.SMALL],Xee));var wte=Z(Zn()),Ete=Z(CGe()),FHe=Z(X0()),UHe=Z(td()),Ste=Z(ete()),Tw=Z(we()),Va=Z(xt()),BHe=Z(Si()),Mw=Z(DHe()),VHe=Z(ote()),GHe=Z(Ml());var NHe=Z(Zn()),mte=Z(we()),OHe=Z(Ml());var pwr={componentClass:OHe.default},dwr={componentClass:"div"},gte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=Ro(u),h=p[0],g=p[1],x=oo(h);return mte.default.createElement(i,ir({},g,{className:(0,NHe.default)(a,x)}))},t}(mte.default.Component);gte.propTypes=pwr;gte.defaultProps=dwr;var AC=Cn("modal-body",gte);var vte=Z(Zn()),DC=Z(we()),LHe=Z(xt());var hwr={dialogClassName:LHe.default.string},PHe=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.dialogClassName,u=i.className,p=i.style,h=i.children,g=i.onMouseDownDialog,x=Wr(i,["dialogClassName","className","style","children","onMouseDownDialog"]),b=Ro(x),T=b[0],A=b[1],L=po(T),P=ir({display:"block"},p),k=ir({},oo(T),(o={},o[L]=!1,o[po(T,"dialog")]=!0,o));return DC.default.createElement("div",ir({},A,{tabIndex:"-1",role:"dialog",style:P,className:(0,vte.default)(u,L)}),DC.default.createElement("div",{className:(0,vte.default)(a,k),onMouseDown:g},DC.default.createElement("div",{className:po(T,"content"),role:"document"},h)))},t}(DC.default.Component);PHe.propTypes=hwr;var $j=Cn("modal",ed([Ks.LARGE,Ks.SMALL],PHe));var kHe=Z(Zn()),yte=Z(we()),RHe=Z(Ml());var mwr={componentClass:RHe.default},gwr={componentClass:"div"},_te=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=Ro(u),h=p[0],g=p[1],x=oo(h);return yte.default.createElement(i,ir({},g,{className:(0,kHe.default)(a,x)}))},t}(yte.default.Component);_te.propTypes=mwr;_te.defaultProps=gwr;var NC=Cn("modal-footer",_te);var jHe=Z(Zn()),Iw=Z(xt()),Yj=Z(we());var vwr={closeLabel:Iw.default.string,closeButton:Iw.default.bool,onHide:Iw.default.func},ywr={closeLabel:"Close",closeButton:!1},_wr={$bs_modal:Iw.default.shape({onHide:Iw.default.func})},Zj=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.closeLabel,a=o.closeButton,u=o.onHide,p=o.className,h=o.children,g=Wr(o,["closeLabel","closeButton","onHide","className","children"]),x=this.context.$bs_modal,b=Ro(g),T=b[0],A=b[1],L=oo(T);return Yj.default.createElement("div",ir({},A,{className:(0,jHe.default)(p,L)}),a&&Yj.default.createElement(JBe,{label:i,onClick:Cl(x&&x.onHide,u)}),h)},t}(Yj.default.Component);Zj.propTypes=vwr;Zj.defaultProps=ywr;Zj.contextTypes=_wr;var OC=Cn("modal-header",Zj);var qHe=Z(Zn()),xte=Z(we()),zHe=Z(Ml());var xwr={componentClass:zHe.default},bwr={componentClass:"h4"},bte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=Ro(u),h=p[0],g=p[1],x=oo(h);return xte.default.createElement(i,ir({},g,{className:(0,qHe.default)(a,x)}))},t}(xte.default.Component);bte.propTypes=xwr;bte.defaultProps=bwr;var LC=Cn("modal-title",bte);var wwr=ir({},Mw.default.propTypes,$j.propTypes,{backdrop:Va.default.oneOf(["static",!0,!1]),backdropClassName:Va.default.string,keyboard:Va.default.bool,animation:Va.default.bool,dialogComponentClass:GHe.default,autoFocus:Va.default.bool,enforceFocus:Va.default.bool,restoreFocus:Va.default.bool,show:Va.default.bool,onHide:Va.default.func,onEnter:Va.default.func,onEntering:Va.default.func,onEntered:Va.default.func,onExit:Va.default.func,onExiting:Va.default.func,onExited:Va.default.func,container:Mw.default.propTypes.container}),Ewr=ir({},Mw.default.defaultProps,{animation:!0,dialogComponentClass:$j}),Swr={$bs_modal:Va.default.shape({onHide:Va.default.func})};function Iwr(e){return Tw.default.createElement(Sv,ir({},e,{timeout:ec.TRANSITION_DURATION}))}function Twr(e){return Tw.default.createElement(Sv,ir({},e,{timeout:ec.BACKDROP_TRANSITION_DURATION}))}var ec=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleDialogBackdropMouseDown=function(){i._waitingForMouseUp=!0},i.handleMouseUp=function(a){var u=i._modal.getDialogElement();i._waitingForMouseUp&&a.target===u&&(i._ignoreBackdropClick=!0),i._waitingForMouseUp=!1},i.handleEntering=i.handleEntering.bind(wo(wo(i))),i.handleExited=i.handleExited.bind(wo(wo(i))),i.handleWindowResize=i.handleWindowResize.bind(wo(wo(i))),i.handleDialogClick=i.handleDialogClick.bind(wo(wo(i))),i.setModalRef=i.setModalRef.bind(wo(wo(i))),i.state={style:{}},i}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(o){this._modal=o},r.handleDialogClick=function(o){if(this._ignoreBackdropClick||o.target!==o.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){Ete.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){Ete.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(UHe.default){var o=this._modal.getDialogElement(),i=o.scrollHeight,a=(0,FHe.default)(o),u=(0,VHe.default)(BHe.default.findDOMNode(this.props.container||a.body)),p=i>a.documentElement.clientHeight;this.setState({style:{paddingRight:u&&!p?(0,Ste.default)():void 0,paddingLeft:!u&&p?(0,Ste.default)():void 0}})}},r.render=function(){var o=this.props,i=o.backdrop,a=o.backdropClassName,u=o.animation,p=o.show,h=o.dialogComponentClass,g=o.className,x=o.style,b=o.children,T=o.onEntering,A=o.onExited,L=Wr(o,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),P=Bee(L,Mw.default),k=P[0],q=P[1],U=p&&!u&&"in";return Tw.default.createElement(Mw.default,ir({},k,{ref:this.setModalRef,show:p,containerClassName:po(L,"open"),transition:u?Iwr:void 0,backdrop:i,backdropTransition:u?Twr:void 0,backdropClassName:(0,wte.default)(po(L,"backdrop"),a,U),onEntering:Cl(T,this.handleEntering),onExited:Cl(A,this.handleExited),onMouseUp:this.handleMouseUp}),Tw.default.createElement(h,ir({},q,{style:ir({},this.state.style,x),className:(0,wte.default)(g,U),onClick:i===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),b))},t}(Tw.default.Component);ec.propTypes=wwr;ec.defaultProps=Ewr;ec.childContextTypes=Swr;ec.Body=AC;ec.Header=OC;ec.Title=LC;ec.Footer=NC;ec.Dialog=$j;ec.TRANSITION_DURATION=300;ec.BACKDROP_TRANSITION_DURATION=150;var Gh=Cn("modal",ed([Ks.LARGE,Ks.SMALL],ec));var HHe=Z(Zn()),PC=Z(YVe()),kC=Z(we()),Ga=Z(xt()),WHe=Z(Si()),$He=Z(cVe()),Jyn=Z(Y0());var Mwr={activeKey:Ga.default.any,activeHref:Ga.default.string,stacked:Ga.default.bool,justified:(0,$He.default)(Ga.default.bool,function(e){var t=e.justified,r=e.navbar;return t&&r?Error("justified navbar `Nav`s are not supported"):null}),onSelect:Ga.default.func,role:Ga.default.string,navbar:Ga.default.bool,pullRight:Ga.default.bool,pullLeft:Ga.default.bool},Cwr={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},Awr={$bs_navbar:Ga.default.shape({bsClass:Ga.default.string,onSelect:Ga.default.func}),$bs_tabContainer:Ga.default.shape({activeKey:Ga.default.any,onSelect:Ga.default.func.isRequired,getTabId:Ga.default.func.isRequired,getPaneId:Ga.default.func.isRequired})},Kj=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.componentDidUpdate=function(){var o=this;if(this._needsRefocus){this._needsRefocus=!1;var i=this.props.children,a=this.getActiveProps(),u=a.activeKey,p=a.activeHref,h=Wf.find(i,function(A){return o.isActive(A,u,p)}),g=Wf.toArray(i),x=g.indexOf(h),b=WHe.default.findDOMNode(this).children,T=b&&b[x];!T||!T.firstChild||T.firstChild.focus()}},r.getActiveProps=function(){var o=this.context.$bs_tabContainer;return o||this.props},r.getNextActiveChild=function(o){var i=this,a=this.props.children,u=Wf.filter(a,function(L){return L.props.eventKey!=null&&!L.props.disabled}),p=this.getActiveProps(),h=p.activeKey,g=p.activeHref,x=Wf.find(a,function(L){return i.isActive(L,h,g)}),b=u.indexOf(x);if(b===-1)return u[0];var T=b+o,A=u.length;return T>=A?T=0:T<0&&(T=A-1),u[T]},r.getTabProps=function(o,i,a,u,p){var h=this;if(!i&&a!=="tablist")return null;var g=o.props,x=g.id,b=g["aria-controls"],T=g.eventKey,A=g.role,L=g.onKeyDown,P=g.tabIndex;return i&&(x=i.getTabId(T),b=i.getPaneId(T)),a==="tablist"&&(A=A||"tab",L=Cl(function(k){return h.handleTabKeyDown(p,k)},L),P=u?P:-1),{id:x,role:A,onKeyDown:L,"aria-controls":b,tabIndex:P}},r.handleTabKeyDown=function(o,i){var a;switch(i.keyCode){case PC.default.codes.left:case PC.default.codes.up:a=this.getNextActiveChild(-1);break;case PC.default.codes.right:case PC.default.codes.down:a=this.getNextActiveChild(1);break;default:return;}i.preventDefault(),o&&a&&a.props.eventKey!=null&&o(a.props.eventKey),this._needsRefocus=!0},r.isActive=function(o,i,a){var u=o.props;return u.active||i!=null&&u.eventKey===i||a&&u.href===a?!0:u.active},r.render=function(){var o,i=this,a=this.props,u=a.stacked,p=a.justified,h=a.onSelect,g=a.role,x=a.navbar,b=a.pullRight,T=a.pullLeft,A=a.className,L=a.children,P=Wr(a,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),k=this.context.$bs_tabContainer,q=g||(k?"tablist":null),U=this.getActiveProps(),H=U.activeKey,X=U.activeHref;delete P.activeKey,delete P.activeHref;var ee=Ro(P),ne=ee[0],me=ee[1],ue=ir({},oo(ne),(o={},o[po(ne,"stacked")]=u,o[po(ne,"justified")]=p,o)),Me=x!=null?x:this.context.$bs_navbar,ke,Te;if(Me){var Ee=this.context.$bs_navbar||{bsClass:"navbar"};ue[po(Ee,"nav")]=!0,Te=po(Ee,"right"),ke=po(Ee,"left")}else Te="pull-right",ke="pull-left";return ue[Te]=b,ue[ke]=T,kC.default.createElement("ul",ir({},me,{role:q,className:(0,HHe.default)(A,ue)}),Wf.map(L,function(Ze){var Qe=i.isActive(Ze,H,X),Fe=Cl(Ze.props.onSelect,h,Me&&Me.onSelect,k&&k.onSelect);return(0,kC.cloneElement)(Ze,ir({},i.getTabProps(Ze,k,q,Qe,Fe),{active:Qe,activeKey:H,activeHref:X,onSelect:Fe}))}))},t}(kC.default.Component);Kj.propTypes=Mwr;Kj.defaultProps=Cwr;Kj.contextTypes=Awr;var YHe=Cn("nav",PR(["tabs","pills"],Kj));var ZHe=Z(Zn()),Xj=Z(we()),Cv=Z(xt());var Dwr={active:Cv.default.bool,disabled:Cv.default.bool,role:Cv.default.string,href:Cv.default.string,onClick:Cv.default.func,onSelect:Cv.default.func,eventKey:Cv.default.any},Nwr={active:!1,disabled:!1},Ite=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(wo(wo(i))),i}var r=t.prototype;return r.handleClick=function(o){if(this.props.disabled){o.preventDefault();return}this.props.onSelect&&this.props.onSelect(this.props.eventKey,o)},r.render=function(){var o=this.props,i=o.active,a=o.disabled,u=o.onClick,p=o.className,h=o.style,g=Wr(o,["active","disabled","onClick","className","style"]);return delete g.onSelect,delete g.eventKey,delete g.activeKey,delete g.activeHref,g.role?g.role==="tab"&&(g["aria-selected"]=i):g.href==="#"&&(g.role="button"),Xj.default.createElement("li",{role:"presentation",className:(0,ZHe.default)(p,{active:i,disabled:a}),style:h},Xj.default.createElement(YR,ir({},g,{disabled:a,onClick:Cl(u,this.handleClick)})))},t}(Xj.default.Component);Ite.propTypes=Dwr;Ite.defaultProps=Nwr;var KHe=Ite;var IWe=Z(Zn()),qC=Z(we()),tc=Z(xt()),Ote=Z(SWe()),TWe=Z(Ml());var LEr=ir({},Ote.default.propTypes,{show:tc.default.bool,rootClose:tc.default.bool,onHide:tc.default.func,animation:tc.default.oneOfType([tc.default.bool,TWe.default]),onEnter:tc.default.func,onEntering:tc.default.func,onEntered:tc.default.func,onExit:tc.default.func,onExiting:tc.default.func,onExited:tc.default.func,placement:tc.default.oneOf(["top","right","bottom","left"])}),PEr={animation:Sv,rootClose:!1,show:!1,placement:"right"},Lte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.animation,a=o.children,u=Wr(o,["animation","children"]),p=i===!0?Sv:i||null,h;return p?h=a:h=(0,qC.cloneElement)(a,{className:(0,IWe.default)(a.props.className,"in")}),qC.default.createElement(Ote.default,ir({},u,{transition:p}),h)},t}(qC.default.Component);Lte.propTypes=LEr;Lte.defaultProps=PEr;var Pte=Lte;var kte=Z(Zn()),Dw=Z(we()),Nw=Z(xt()),x0n=Z(Y0());var kEr={inline:Nw.default.bool,disabled:Nw.default.bool,title:Nw.default.string,validationState:Nw.default.oneOf(["success","warning","error",null]),inputRef:Nw.default.func},REr={inline:!1,disabled:!1,title:""},Rte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.inline,a=o.disabled,u=o.validationState,p=o.inputRef,h=o.className,g=o.style,x=o.title,b=o.children,T=Wr(o,["inline","disabled","validationState","inputRef","className","style","title","children"]),A=Ro(T),L=A[0],P=A[1],k=Dw.default.createElement("input",ir({},P,{ref:p,type:"radio",disabled:a}));if(i){var q,U=(q={},q[po(L,"inline")]=!0,q.disabled=a,q);return Dw.default.createElement("label",{className:(0,kte.default)(h,U),style:g,title:x},k,b)}var H=ir({},oo(L),{disabled:a});return u&&(H["has-"+u]=!0),Dw.default.createElement("div",{className:(0,kte.default)(h,H),style:g},Dw.default.createElement("label",{title:x},k,b))},t}(Dw.default.Component);Rte.propTypes=kEr;Rte.defaultProps=REr;var jte=Cn("radio",Rte);var Ute=Z(we()),m6=Z(xt());var l6=Z(we()),Zc=Z(xt());var jEr="tab",qEr="pane",zEr=Zc.default.oneOfType([Zc.default.string,Zc.default.number]),FEr={id:function(t){var r=null;if(!t.generateChildId){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r=zEr.apply(void 0,[t].concat(o)),!r&&!t.id&&(r=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return r},generateChildId:Zc.default.func,onSelect:Zc.default.func,activeKey:Zc.default.any},UEr={$bs_tabContainer:Zc.default.shape({activeKey:Zc.default.any,onSelect:Zc.default.func.isRequired,getTabId:Zc.default.func.isRequired,getPaneId:Zc.default.func.isRequired})},qte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.activeKey,a=o.onSelect,u=o.generateChildId,p=o.id,h=u||function(g,x){return p?p+"-"+x+"-"+g:null};return{$bs_tabContainer:{activeKey:i,onSelect:a,getTabId:function(x){return h(x,jEr)},getPaneId:function(x){return h(x,qEr)}}}},r.render=function(){var o=this.props,i=o.children,a=Wr(o,["children"]);return delete a.generateChildId,delete a.onSelect,delete a.activeKey,l6.default.cloneElement(l6.default.Children.only(i),a)},t}(l6.default.Component);qte.propTypes=FEr;qte.childContextTypes=UEr;var u6=W0(qte,{activeKey:"onSelect"});var MWe=Z(Zn()),zte=Z(we()),vs=Z(xt()),c6=Z(Ml());var BEr={componentClass:c6.default,animation:vs.default.oneOfType([vs.default.bool,c6.default]),mountOnEnter:vs.default.bool,unmountOnExit:vs.default.bool},VEr={componentClass:"div",animation:!0,mountOnEnter:!1,unmountOnExit:!1},GEr={$bs_tabContainer:vs.default.shape({activeKey:vs.default.any})},HEr={$bs_tabContent:vs.default.shape({bsClass:vs.default.string,animation:vs.default.oneOfType([vs.default.bool,c6.default]),activeKey:vs.default.any,mountOnEnter:vs.default.bool,unmountOnExit:vs.default.bool,onPaneEnter:vs.default.func.isRequired,onPaneExited:vs.default.func.isRequired,exiting:vs.default.bool.isRequired})},zC=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handlePaneEnter=i.handlePaneEnter.bind(wo(wo(i))),i.handlePaneExited=i.handlePaneExited.bind(wo(wo(i))),i.state={activeKey:null,activeChild:null},i}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.bsClass,a=o.animation,u=o.mountOnEnter,p=o.unmountOnExit,h=this.state.activeKey,g=this.getContainerActiveKey(),x=h!=null?h:g,b=h!=null&&h!==g;return{$bs_tabContent:{bsClass:i,animation:a,activeKey:x,mountOnEnter:u,unmountOnExit:p,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:b}}},r.UNSAFE_componentWillReceiveProps=function(o){!o.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},r.componentWillUnmount=function(){this.isUnmounted=!0},r.getContainerActiveKey=function(){var o=this.context.$bs_tabContainer;return o&&o.activeKey},r.handlePaneEnter=function(o,i){return!this.props.animation||i!==this.getContainerActiveKey()?!1:(this.setState({activeKey:i,activeChild:o}),!0)},r.handlePaneExited=function(o){this.isUnmounted||this.setState(function(i){var a=i.activeChild;return a!==o?null:{activeKey:null,activeChild:null}})},r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=vw(u,["animation","mountOnEnter","unmountOnExit"]),h=p[0],g=p[1];return zte.default.createElement(i,ir({},g,{className:(0,MWe.default)(a,po(h,"content"))}))},t}(zte.default.Component);zC.propTypes=BEr;zC.defaultProps=VEr;zC.contextTypes=GEr;zC.childContextTypes=HEr;var f6=Cn("tab",zC);var CWe=Z(Zn()),p6=Z(we()),So=Z(xt()),Fte=Z(Ml()),q0n=Z(Y0());var WEr={eventKey:So.default.any,animation:So.default.oneOfType([So.default.bool,Fte.default]),id:So.default.string,"aria-labelledby":So.default.string,bsClass:So.default.string,onEnter:So.default.func,onEntering:So.default.func,onEntered:So.default.func,onExit:So.default.func,onExiting:So.default.func,onExited:So.default.func,mountOnEnter:So.default.bool,unmountOnExit:So.default.bool},$Er={$bs_tabContainer:So.default.shape({getTabId:So.default.func,getPaneId:So.default.func}),$bs_tabContent:So.default.shape({bsClass:So.default.string,animation:So.default.oneOfType([So.default.bool,Fte.default]),activeKey:So.default.any,mountOnEnter:So.default.bool,unmountOnExit:So.default.bool,onPaneEnter:So.default.func.isRequired,onPaneExited:So.default.func.isRequired,exiting:So.default.bool.isRequired})},YEr={$bs_tabContainer:So.default.oneOf([null])},d6=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleEnter=i.handleEnter.bind(wo(wo(i))),i.handleExited=i.handleExited.bind(wo(wo(i))),i.in=!1,i}var r=t.prototype;return r.getChildContext=function(){return{$bs_tabContainer:null}},r.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},r.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},r.componentWillUnmount=function(){this.in&&this.handleExited()},r.getAnimation=function(){if(this.props.animation!=null)return this.props.animation;var o=this.context.$bs_tabContent;return o&&o.animation},r.handleEnter=function(){var o=this.context.$bs_tabContent;o&&(this.in=o.onPaneEnter(this,this.props.eventKey))},r.handleExited=function(){var o=this.context.$bs_tabContent;o&&(o.onPaneExited(this),this.in=!1)},r.isActive=function(){var o=this.context.$bs_tabContent,i=o&&o.activeKey;return this.props.eventKey===i},r.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},r.render=function(){var o=this.props,i=o.eventKey,a=o.className,u=o.onEnter,p=o.onEntering,h=o.onEntered,g=o.onExit,x=o.onExiting,b=o.onExited,T=o.mountOnEnter,A=o.unmountOnExit,L=Wr(o,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit"]),P=this.context,k=P.$bs_tabContent,q=P.$bs_tabContainer,U=vw(L,["animation"]),H=U[0],X=U[1],ee=this.isActive(),ne=this.getAnimation(),me=T!=null?T:k&&k.mountOnEnter,ue=A!=null?A:k&&k.unmountOnExit;if(!ee&&!ne&&ue)return null;var Me=ne===!0?Sv:ne||null;k&&(H.bsClass=po(k,"pane"));var ke=ir({},oo(H),{active:ee});q&&(X.id=q.getPaneId(i),X["aria-labelledby"]=q.getTabId(i));var Te=p6.default.createElement("div",ir({},X,{role:"tabpanel","aria-hidden":!ee,className:(0,CWe.default)(a,ke)}));if(Me){var Ee=k&&k.exiting;return p6.default.createElement(Me,{in:ee&&!Ee,onEnter:Cl(this.handleEnter,u),onEntering:p,onEntered:h,onExit:g,onExiting:x,onExited:Cl(this.handleExited,b),mountOnEnter:me,unmountOnExit:ue},Te)}return Te},t}(p6.default.Component);d6.propTypes=WEr;d6.contextTypes=$Er;d6.childContextTypes=YEr;var h6=Cn("tab-pane",d6);var ZEr=ir({},h6.propTypes,{disabled:m6.default.bool,title:m6.default.node,tabClassName:m6.default.string}),FC=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=ir({},this.props);return delete o.title,delete o.disabled,delete o.tabClassName,Ute.default.createElement(h6,o)},t}(Ute.default.Component);FC.propTypes=ZEr;FC.Container=u6;FC.Content=f6;FC.Pane=h6;var g6=FC;var r1=Z(we()),$f=Z(xt()),AWe=Z(zee());var DWe=Z(Ml());var KEr=u6.ControlledComponent,XEr={activeKey:$f.default.any,bsStyle:$f.default.oneOf(["tabs","pills"]),animation:$f.default.oneOfType([$f.default.bool,DWe.default]),id:(0,AWe.default)($f.default.oneOfType([$f.default.string,$f.default.number])),onSelect:$f.default.func,mountOnEnter:$f.default.bool,unmountOnExit:$f.default.bool},JEr={bsStyle:"tabs",animation:!0,mountOnEnter:!1,unmountOnExit:!1};function QEr(e){var t;return Wf.forEach(e,function(r){t==null&&(t=r.props.eventKey)}),t}var v6=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderTab=function(o){var i=o.props,a=i.title,u=i.eventKey,p=i.disabled,h=i.tabClassName;return a==null?null:r1.default.createElement(KHe,{eventKey:u,disabled:p,className:h},a)},r.render=function(){var o=this.props,i=o.id,a=o.onSelect,u=o.animation,p=o.mountOnEnter,h=o.unmountOnExit,g=o.bsClass,x=o.className,b=o.style,T=o.children,A=o.activeKey,L=A===void 0?QEr(T):A,P=Wr(o,["id","onSelect","animation","mountOnEnter","unmountOnExit","bsClass","className","style","children","activeKey"]);return r1.default.createElement(KEr,{id:i,activeKey:L,onSelect:a,className:x,style:b},r1.default.createElement("div",null,r1.default.createElement(YHe,ir({},P,{role:"tablist"}),Wf.map(T,this.renderTab)),r1.default.createElement(f6,{bsClass:g,animation:u,mountOnEnter:p,unmountOnExit:h},T)))},t}(r1.default.Component);v6.propTypes=XEr;v6.defaultProps=JEr;Cn("tab",v6);var Bte=W0(v6,{activeKey:"onSelect"});var NWe=Z(Zn()),UC=Z(we()),ys=Z(xt()),OWe=Z(zee());var eSr={id:(0,OWe.default)(ys.default.oneOfType([ys.default.string,ys.default.number])),placement:ys.default.oneOf(["top","right","bottom","left"]),positionTop:ys.default.oneOfType([ys.default.number,ys.default.string]),positionLeft:ys.default.oneOfType([ys.default.number,ys.default.string]),arrowOffsetTop:ys.default.oneOfType([ys.default.number,ys.default.string]),arrowOffsetLeft:ys.default.oneOfType([ys.default.number,ys.default.string])},tSr={placement:"right"},Vte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.placement,u=i.positionTop,p=i.positionLeft,h=i.arrowOffsetTop,g=i.arrowOffsetLeft,x=i.className,b=i.style,T=i.children,A=Wr(i,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),L=Ro(A),P=L[0],k=L[1],q=ir({},oo(P),(o={},o[a]=!0,o)),U=ir({top:u,left:p},b),H={top:h,left:g};return UC.default.createElement("div",ir({},k,{role:"tooltip",className:(0,NWe.default)(x,q),style:U}),UC.default.createElement("div",{className:po(P,"arrow"),style:H}),UC.default.createElement("div",{className:po(P,"inner")},T))},t}(UC.default.Component);Vte.propTypes=eSr;Vte.defaultProps=tSr;var Gte=Cn("tooltip",Vte);var WC=Z(xt(),1);var Io=Z(we(),1);var Zte=Z(xt(),1);var UWe=Z(hv(),1);var Rn=e=>e!==void 0,LWe=(e,t,r)=>t in e?e[t]:e[t]=r,BC={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},$te=class{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return x6(t,r).join("")}};function x6(e,t){return PWe(e,t,[]).join("")}function PWe(e,t,r){if(e.nodeType===BC.CDATA_SECTION||e.nodeType===BC.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)PWe(n,t,r)}return r}function rSr(e,t,r,n){for(var o=nSr(t);o;o=oSr(o)){var i=o.namespaceURI||null,a=e[i];if(Rn(a)){var u=a[o.localName];Rn(u)&&u.call(n,o,r)}}}function nSr(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==BC.ELEMENT;)t=t.nextSibling;return t}function oSr(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==BC.ELEMENT;)t=t.nextSibling;return t}function _s(e,t,r){return iSr(e,t,r)}function iSr(e,t,r){var n=Rn(r)?r:{},o,i;for(o=0,i=e.length;o<i;++o)n[e[o]]=t;return n}function kWe(e,t){return function(r,n){var o=e.call(Rn(t)?t:this,r,n);if(Rn(o)){var i=n[n.length-1];i.push(o)}}}function Ha(e,t,r,n,o){return n.push(e),rSr(t,r,n,o),n.pop()}function Mr(e,t,r){return function(n,o){let i=e.call(Rn(r)?r:this,n,o);if(Rn(i)){var a=o[o.length-1],u=Rn(t)?t:n.localName;a[u]=i}}}function mu(e,t,r){return function(n,o){var i=e.call(Rn(r)?r:this,n,o);if(Rn(i)){var a=o[o.length-1],u=Rn(t)?t:n.localName,p=LWe(a,u,[]);p.push(i)}}}var aSr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function sSr(e){return e.replace(aSr,"")}function n1(e){let t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Rn(t[1])||!1}function Ow(e){return $h(x6(e,!1))}function $h(e){let t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function Hte(e){return y6(x6(e,!1))}function y6(e){let t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function io(e){return sSr(x6(e,!1))}var lSr="http://www.w3.org/1999/xlink";function Yte(e){return e.getAttributeNS(lSr,"href")}function uSr(e,t){return Ha({},RSr,e,t)}function RWe(e){return[$h(e.getAttribute("minx")),$h(e.getAttribute("miny")),$h(e.getAttribute("maxx")),$h(e.getAttribute("maxy"))]}function cSr(e,t){let r=RWe(e),n=[$h(e.getAttribute("resx")),$h(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function fSr(e,t){let r=RWe(e);if(!(!Rn(r[0])||!Rn(r[1])||!Rn(r[2])||!Rn(r[3])))return r}function pSr(e,t){let r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function dSr(e,t){let r=Ha({},jSr,e,t);if(!Rn(r))return;let n=r.westBoundLongitude,o=r.southBoundLatitude,i=r.eastBoundLongitude,a=r.northBoundLatitude;if(!(!Rn(n)||!Rn(o)||!Rn(i)||!Rn(a)))return[n,o,i,a]}function hSr(e,t){return Ha({},DSr,e,t)}function mSr(e,t){return Ha({},NSr,e,t)}function gSr(e,t){return Ha({},OSr,e,t)}function vSr(e,t){return Ha({},LSr,e,t)}function ySr(e,t){return Ha({},PSr,e,t)}function _Sr(e,t){return Ha([],kSr,e,t)}function xSr(e,t){let r=n1(e.getAttribute("queryable"));return Ha({queryable:Rn(r)?r:!1},zWe,e,t)}function bSr(e,t){var r=t[t.length-1];let n=Ha({},zWe,e,t);if(!Rn(n))return;let o=n1(e.getAttribute("queryable"));Rn(o)||(o=r.queryable),n.queryable=Rn(o)?o:!1;let i=y6(e.getAttribute("cascaded"));Rn(i)||(i=r.cascaded),n.cascaded=i;let a=n1(e.getAttribute("opaque"));Rn(a)||(a=r.opaque),n.opaque=Rn(a)?a:!1;let u=n1(e.getAttribute("noSubsets"));Rn(u)||(u=r.noSubsets),n.noSubsets=Rn(u)?u:!1;let p=$h(e.getAttribute("fixedWidth"));Rn(p)||(p=r.fixedWidth),n.fixedWidth=p;let h=$h(e.getAttribute("fixedHeight"));Rn(h)||(h=r.fixedHeight),n.fixedHeight=h;let g=["Style","CRS","AuthorityURL"];for(let b=0,T=g.length;b<T;b++){let A=g[b],L=r[A];if(Rn(L)){let P=LWe(n,A,[]);P=P.concat(L),n[A]=P}}let x=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let b=0,T=x.length;b<T;b++){let A=x[b],L=n[A];if(!Rn(L)){let P=r[A];n[A]=P}}return n}function wSr(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:n1(e.getAttribute("multipleValues")),nearestValue:n1(e.getAttribute("nearestValue")),current:n1(e.getAttribute("current")),values:io(e)}}function Yh(e,t){return Ha({},VSr,e,t)}function ESr(e,t){return Ha({},qSr,e,t)}function SSr(e,t){return Ha({},FSr,e,t)}function ISr(e,t){return Ha({},USr,e,t)}function Wte(e,t){return Ha({},zSr,e,t)}function jWe(e,t){var r=Yh(e,t);if(Rn(r)){let n=[y6(e.getAttribute("width")),y6(e.getAttribute("height"))];return r.size=n,r}}function TSr(e,t){var r=Yh(e,t);if(Rn(r))return r.name=e.getAttribute("name"),r}function MSr(e,t){var r=Yh(e,t);if(Rn(r))return r.type=e.getAttribute("type"),r}function CSr(e,t){return Ha({},BSr,e,t)}function qWe(e,t){return Ha([],GSr,e,t)}var xs=[null,"http://www.opengis.net/wms"],ASr=_s(xs,{Service:Mr(mSr),Capability:Mr(hSr)}),DSr=_s(xs,{Request:Mr(ESr),Exception:Mr(_Sr),Layer:Mr(xSr)}),NSr=_s(xs,{Name:Mr(io),Title:Mr(io),Abstract:Mr(io),KeywordList:Mr(qWe),OnlineResource:Mr(Yte),ContactInformation:Mr(gSr),Fees:Mr(io),AccessConstraints:Mr(io),LayerLimit:Mr(Hte),MaxWidth:Mr(Hte),MaxHeight:Mr(Hte)}),OSr=_s(xs,{ContactPersonPrimary:Mr(vSr),ContactPosition:Mr(io),ContactAddress:Mr(ySr),ContactVoiceTelephone:Mr(io),ContactFacsimileTelephone:Mr(io),ContactElectronicMailAddress:Mr(io)}),LSr=_s(xs,{ContactPerson:Mr(io),ContactOrganization:Mr(io)}),PSr=_s(xs,{AddressType:Mr(io),Address:Mr(io),City:Mr(io),StateOrProvince:Mr(io),PostCode:Mr(io),Country:Mr(io)}),kSr=_s(xs,{Format:kWe(io)}),zWe=_s(xs,{Name:Mr(io),Title:Mr(io),Abstract:Mr(io),KeywordList:Mr(qWe),CRS:mu(io),SRS:mu(io),EX_GeographicBoundingBox:Mr(dSr),LatLonBoundingBox:Mr(fSr),BoundingBox:mu(cSr),Dimension:mu(wSr),Attribution:Mr(uSr),AuthorityURL:mu(TSr),Identifier:mu(io),MetadataURL:mu(MSr),DataURL:mu(Yh),FeatureListURL:mu(Yh),Style:mu(CSr),MinScaleDenominator:Mr(Ow),MaxScaleDenominator:Mr(Ow),ScaleHint:Mr(pSr),Layer:mu(bSr)}),RSr=_s(xs,{Title:Mr(io),OnlineResource:Mr(Yte),LogoURL:Mr(jWe)}),jSr=_s(xs,{westBoundLongitude:Mr(Ow),eastBoundLongitude:Mr(Ow),southBoundLatitude:Mr(Ow),northBoundLatitude:Mr(Ow)}),qSr=_s(xs,{GetCapabilities:Mr(Wte),GetMap:Mr(Wte),GetFeatureInfo:Mr(Wte)}),zSr=_s(xs,{Format:mu(io),DCPType:mu(SSr)}),FSr=_s(xs,{HTTP:Mr(ISr)}),USr=_s(xs,{Get:Mr(Yh),Post:Mr(Yh)}),BSr=_s(xs,{Name:Mr(io),Title:Mr(io),Abstract:Mr(io),LegendURL:mu(jWe),StyleSheetURL:Mr(Yh),StyleURL:Mr(Yh)}),VSr=_s(xs,{Format:Mr(io),OnlineResource:Mr(Yte)}),GSr=_s(xs,{Keyword:kWe(io)}),_6=class{constructor(t,r){!r&&typeof window!="undefined"&&(r=window.DOMParser),this.version=void 0,this._parser=new $te(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==BC.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),Ha({version:this.version},ASr,t,[])||null}};var b6="wms-base-map-layer",VC="wms-base-map-source",GC="xyz-base-map-layer",w6="xyz-base-map-source";function BWe(e){let t;try{t=new URL(e)}catch(r){return!1}return t.protocol==="http:"||t.protocol==="https:"}function FWe(e,t){return t.Capability.Layer.Layer.filter(r=>r.CRS.includes("EPSG:3857")).map(r=>{let o=r.Name;return{id:r.Title,label:r.Title,urls:[`${e}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.0&request=GetMap&srs=EPSG:3857&transparent=true&width=512&height=512&layers=${o}`],type:"wms",layers:o,tileSize:512}})}function E6(e){return Nt(this,null,function*(){let t=yield UWe.default.get(e);if(t.status===200){let r=new _6().parse(t.data);return console.log("parse",FWe(e.split("?")[0],r)),FWe(e.split("?")[0],r)}else throw new Error(`Could not fetch wms capabilities document at ${e}`)})}var VWe=(e,t,r)=>{if(!t)return!1;if(WWe(e,r),!e.getSource(VC)){let n={type:"raster",tiles:[`${t.urls[0]}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=2.0.0&request=GetMap&CRS=EPSG:3857&transparent=true&width=512&height=512&layers=${t.layers}&STYLES=`]};t.attribution&&(n.attribution=t.attribution),e.addSource(VC,n);let o=e.getStyle().layers[0].id;e.addLayer({id:b6,type:"raster",source:VC,paint:{}},o)}},GWe=e=>{for(let{id:t}of e.getStyle().layers)(t===b6||t===GC)&&e.setLayoutProperty(t,"visibility","visible")},HC=e=>{GWe(e),e.getLayer(b6)&&e.removeLayer(b6),e.getSource(VC)&&e.removeSource(VC)},HWe=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","visible")})},WWe=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","none")})},$We=(e,t,r)=>{if(!t)return!1;if(WWe(e,r),HC(e),!e.getSource(GC)){e.addSource(w6,{type:"raster",tiles:[t.urls[0]],attribution:t.attribution});let n=e.getStyle().layers[0].id;e.addLayer({id:GC,type:"raster",source:w6,paint:{}},n)}},YWe=e=>{GWe(e),e.getLayer(GC)&&e.removeLayer(GC),e.getSource(w6)&&e.removeSource(w6)};var ZWe=e=>{let{onClose:t,onSubmit:r}=e,[n,o]=(0,Io.useState)(""),[i,a]=(0,Io.useState)(!1),[u,p]=(0,Io.useState)([]),[h,g]=(0,Io.useState)(null),x=Ar(Ii),b=(0,Io.useRef)(),T=(0,Io.useRef)(),A=X=>{p([]),g(null),x({id:"dialog-add-wms",type:"danger",text:X})},L=()=>{t()},P=()=>{r(h),L()},k=()=>Nt(void 0,null,function*(){if(!BWe(n)){a(!0);return}try{let X=yield E6(n);X.length!==0&&(p(X),g(X[0]))}catch(X){A(de("dialog.add-wms.error.invalid-url"))}}),q=X=>{o(X.target.value)},U=X=>{X.code==="Enter"&&k()},H=X=>{let ee=u.find(ne=>ne.id===X.target.value);g(ee)};return Io.default.createElement("div",null,Io.default.createElement(Gh,{className:"vkf-dialog-addwms",show:!0,onHide:L},Io.default.createElement(Gh.Header,null,Io.default.createElement(Gh.Title,null,de("control-basemapselector-addwms-title"))),Io.default.createElement(Gh.Body,null,Io.default.createElement("div",{className:"dialog-content"},Io.default.createElement("div",{className:Et("form-group","set-url",i?"has-warning":"")},Io.default.createElement("label",{htmlFor:b.current},de("control-basemapselector-addwms-input-label")),Io.default.createElement("div",{className:"form-group-capabilities"},Io.default.createElement("input",{type:"url",className:"form-control",ref:b,placeholder:"https://meinwms.de?Request=GetCapabilities&Service=WMS&Version=1.3.0",value:n,onChange:q,onKeyDown:U}),Io.default.createElement("button",{type:"submit",className:"btn",onClick:k},de("control-basemapselector-addwms-btn-load-capabilities"))),Io.default.createElement("p",{className:"help-block"},de("control-basemapselector-addwms-input-description"))),u.length>0&&h!==null&&Io.default.createElement("div",{className:Et("form-group","set-layer")},Io.default.createElement("label",{htmlFor:T.current},de("control-basemapselector-addwms-select-label")),Io.default.createElement("select",{ref:T,value:h.id,onChange:H,className:"form-control"},u.map(X=>Io.default.createElement("option",{key:X.id,value:X.id},X.label))),Io.default.createElement("p",{className:"help-block"},de("control-basemapselector-addwms-select-description"))))),Io.default.createElement(Gh.Footer,null,Io.default.createElement(KR,{onClick:L},de("control-basemapselector-addwms-btn-canel")),Io.default.createElement(KR,{onClick:P,bsStyle:"primary",className:Et(h===null?"disabled":"")},de("control-basemapselector-addwms-btn-submit")))))};ZWe.propTypes={onClose:Zte.default.func.isRequired,onSubmit:Zte.default.func.isRequired};var KWe=ZWe;var o1="vkf-custom-basemaps",XWe=e=>{let{map:t}=e,[r,n]=Nn(Kp),[o,i]=Hf(o1,[]),a=hr.getBaseMaps(),u=Ar(Ii),[p,h]=(0,Xs.useState)(!1),g=A=>{n(A.id)},x=()=>{h(!0)},b=A=>{A.type==="wms"&&HC(t,A),r===A.id&&n(a[0].id),i(L=>L.filter(P=>P.id!==A.id))},T=A=>{if([...a,...o].find(P=>P.id===A.id||P.label===A.label))u({id:"basemapSelector",type:"danger",text:de("control-basemapselector-error-initializiation")});else{let P=Ft(Se({},A),{allowDeletion:!0});i(k=>[...k,P])}};return Xs.default.createElement(Xs.default.Fragment,null,r!==void 0&&Xs.default.createElement(Xs.default.Fragment,null,Xs.default.createElement("h2",null,de("control-basemapselector-label"),":"),Xs.default.createElement("ul",{className:"wms-entries"},[...a,...o].map(A=>Xs.default.createElement("li",{key:A.id,className:"basemap-selector-entry"},Xs.default.createElement(jte,{onChange:()=>g(A),name:A.id,value:A.id,checked:r===A.id},A.label),A.allowDeletion&&Xs.default.createElement("button",{className:"delete-basemap-button",onClick:L=>{L.preventDefault(),L.stopPropagation(),b(A)},title:"Remove basemap"},Xs.default.createElement(Bh,{glyph:"remove"}))))),Xs.default.createElement("div",{className:"controls-container"},Xs.default.createElement("button",{className:"add-wms-button",onClick:x},de("control-basemapselector-btn-addwms")))),p&&Xs.default.createElement(KWe,{onClose:()=>h(!1),onSubmit:T}))};XWe.propTypes={map:WC.default.object,onBasemapChange:WC.default.func,onSetNotification:WC.default.func,activeBasemapId:WC.default.string};var JWe=XWe;var Yf={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},n_n={9001:Yf.METERS,9002:Yf.FEET,9003:Yf.USFEET,9101:Yf.RADIANS,9102:Yf.DEGREES};var gu={};gu[Yf.RADIANS]=6370997/(2*Math.PI);gu[Yf.DEGREES]=2*Math.PI*6370997/360;gu[Yf.FEET]=.3048;gu[Yf.METERS]=1;gu[Yf.USFEET]=1200/3937;var vu=Yf;var HSr=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||gu[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),S6=HSr;function Ho(e,t,r){return Math.min(Math.max(e,t),r)}var QWe=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),I6=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function e$e(e,t,r,n,o,i){var a=o-r,u=i-n;if(a!==0||u!==0){var p=((e-r)*a+(t-n)*u)/(a*a+u*u);p>1?(r=o,n=i):p>0&&(r+=a*p,n+=u*p)}return Zh(e,t,r,n)}function Zh(e,t,r,n){var o=r-e,i=n-t;return o*o+i*i}function t$e(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,o=Math.abs(e[r][r]),i=r+1;i<t;i++){var a=Math.abs(e[i][r]);a>o&&(o=a,n=i)}if(o===0)return null;var u=e[n];e[n]=e[r],e[r]=u;for(var p=r+1;p<t;p++)for(var h=-e[p][r]/e[r][r],g=r;g<t+1;g++)r==g?e[p][g]=0:e[p][g]+=h*e[r][g]}for(var x=new Array(t),b=t-1;b>=0;b--){x[b]=e[b][t]/e[b][b];for(var T=b-1;T>=0;T--)e[T][t]-=e[T][b]*x[b]}return x}function Lw(e){return e*Math.PI/180}function Zf(e,t){var r=e%t;return r*t<0?r+t:r}function r$e(e,t,r){return e+r*(t-e)}function n$e(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function $C(e,t){return Math.floor(n$e(e,t))}function YC(e,t){return Math.ceil(n$e(e,t))}var WSr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZC=6378137,kw=Math.PI*ZC,$Sr=[-kw,-kw,kw,kw],YSr=[-180,-85,180,85],T6=ZC*Math.log(Math.tan(Math.PI/2)),Pw=function(e){WSr(t,e);function t(r){return e.call(this,{code:r,units:vu.METERS,extent:$Sr,global:!0,worldExtent:YSr,getPointResolution:function(n,o){return n/QWe(o[1]/ZC)}})||this}return t}(S6),Kte=[new Pw("EPSG:3857"),new Pw("EPSG:102100"),new Pw("EPSG:102113"),new Pw("EPSG:900913"),new Pw("http://www.opengis.net/def/crs/EPSG/0/3857"),new Pw("http://www.opengis.net/gml/srs/epsg.xml#3857")];function o$e(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o){i[a]=kw*e[a]/180;var u=ZC*Math.log(Math.tan(Math.PI*(+e[a+1]+90)/360));u>T6?u=T6:u<-T6&&(u=-T6),i[a+1]=u}return i}function i$e(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o)i[a]=180*e[a]/kw,i[a+1]=360*Math.atan(Math.exp(e[a+1]/ZC))/Math.PI-90;return i}var ZSr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KSr=6378137,a$e=[-180,-90,180,90],XSr=Math.PI*KSr/180,i1=function(e){ZSr(t,e);function t(r,n){return e.call(this,{code:r,units:vu.DEGREES,extent:a$e,axisOrientation:n,global:!0,metersPerUnit:XSr,worldExtent:a$e})||this}return t}(S6),Xte=[new i1("CRS:84"),new i1("EPSG:4326","neu"),new i1("urn:ogc:def:crs:OGC:1.3:CRS84"),new i1("urn:ogc:def:crs:OGC:2:84"),new i1("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new i1("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new i1("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var Jte={};function s$e(e){return Jte[e]||Jte[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function l$e(e,t){Jte[e]=t}var jo=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,o=arguments.length;n<o;++n){var i=arguments[n];if(i!=null)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])}return r};function Kc(e){for(var t in e)delete e[t]}var u$e=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function c$e(e){var t;for(t in e)return!1;return!t}var Rw={};function KC(e,t,r){var n=e.getCode(),o=t.getCode();n in Rw||(Rw[n]={}),Rw[n][o]=r}function f$e(e,t){var r;return e in Rw&&t in Rw[e]&&(r=Rw[e][t]),r}var Wa={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Gn(){return function(){throw new Error("Unimplemented abstract method.")}()}var JSr=0;function $i(e){return e.ol_uid||(e.ol_uid=String(++JSr))}var M6="6.15.1";var QSr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e2r=function(e){QSr(t,e);function t(r){var n=this,o=M6==="latest"?M6:"v"+M6.split("-")[0],i="Assertion failed. See https://openlayers.org/en/"+o+"/doc/errors/#"+r+" for details.";return n=e.call(this,i)||this,n.code=r,n.name="AssertionError",n.message=i,n}return t}(Error),C6=e2r;function Xr(e,t){if(!e)throw new C6(t)}function XC(e){for(var t=od(),r=0,n=e.length;r<n;++r)QC(t,e[r]);return t}function t2r(e,t,r){var n=Math.min.apply(null,e),o=Math.min.apply(null,t),i=Math.max.apply(null,e),a=Math.max.apply(null,t);return Xh(n,o,i,a,r)}function d$e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function A6(e,t,r){var n,o;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?o=e[1]-r:e[3]<r?o=r-e[3]:o=0,n*n+o*o}function Kh(e,t){return Qte(e,t[0],t[1])}function h$e(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function Qte(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function p$e(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=t[0],u=t[1],p=Wa.UNKNOWN;return a<r?p=p|Wa.LEFT:a>o&&(p=p|Wa.RIGHT),u<n?p=p|Wa.BELOW:u>i&&(p=p|Wa.ABOVE),p===Wa.UNKNOWN&&(p=Wa.INTERSECTING),p}function od(){return[1/0,1/0,-1/0,-1/0]}function Xh(e,t,r,n,o){return o?(o[0]=e,o[1]=t,o[2]=r,o[3]=n,o):[e,t,r,n]}function jw(e){return Xh(1/0,1/0,-1/0,-1/0,e)}function m$e(e,t){var r=e[0],n=e[1];return Xh(r,n,r,n,t)}function g$e(e,t,r,n,o){var i=jw(o);return ere(i,e,t,r,n)}function JC(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function v$e(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function QC(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function ere(e,t,r,n,o){for(;r<n;r+=o)r2r(e,t[r],t[r+1]);return e}function r2r(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function D6(e,t){var r;return r=t(N6(e)),r||(r=t(O6(e)),r)||(r=t(L6(e)),r)||(r=t(Dv(e)),r)?r:!1}function eA(e){var t=0;return a1(e)||(t=fi(e)*bs(e)),t}function N6(e){return[e[0],e[1]]}function O6(e){return[e[2],e[1]]}function Kf(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function y$e(e,t){var r;return t==="bottom-left"?r=N6(e):t==="bottom-right"?r=O6(e):t==="top-left"?r=Dv(e):t==="top-right"?r=L6(e):Xr(!1,13),r}function tA(e,t,r,n,o){var i=n2r(e,t,r,n),a=i[0],u=i[1],p=i[2],h=i[3],g=i[4],x=i[5],b=i[6],T=i[7];return Xh(Math.min(a,p,g,b),Math.min(u,h,x,T),Math.max(a,p,g,b),Math.max(u,h,x,T),o)}function n2r(e,t,r,n){var o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),u=Math.sin(r),p=o*a,h=o*u,g=i*a,x=i*u,b=e[0],T=e[1];return[b-p+x,T-h-g,b-p-x,T-h+g,b+p-x,T+h+g,b+p+x,T+h-g,b-p+x,T-h-g]}function bs(e){return e[3]-e[1]}function id(e,t,r){var n=r||od();return rA(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):jw(n),n}function Dv(e){return[e[0],e[3]]}function L6(e){return[e[2],e[3]]}function fi(e){return e[2]-e[0]}function rA(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function a1(e){return e[2]<e[0]||e[3]<e[1]}function _$e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function x$e(e,t,r){var n=!1,o=p$e(e,t),i=p$e(e,r);if(o===Wa.INTERSECTING||i===Wa.INTERSECTING)n=!0;else{var a=e[0],u=e[1],p=e[2],h=e[3],g=t[0],x=t[1],b=r[0],T=r[1],A=(T-x)/(b-g),L=void 0,P=void 0;i&Wa.ABOVE&&!(o&Wa.ABOVE)&&(L=b-(T-h)/A,n=L>=a&&L<=p),!n&&i&Wa.RIGHT&&!(o&Wa.RIGHT)&&(P=T-(b-p)*A,n=P>=u&&P<=h),!n&&i&Wa.BELOW&&!(o&Wa.BELOW)&&(L=b-(T-u)/A,n=L>=a&&L<=p),!n&&i&Wa.LEFT&&!(o&Wa.LEFT)&&(P=T-(b-a)*A,n=P>=u&&P<=h)}return n}function b$e(e,t,r,n){var o=[];if(n>1)for(var i=e[2]-e[0],a=e[3]-e[1],u=0;u<n;++u)o.push(e[0]+i*u/n,e[1],e[2],e[1]+a*u/n,e[2]-i*u/n,e[3],e[0],e[3]-a*u/n);else o=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(o,o,2);for(var p=[],h=[],u=0,g=o.length;u<g;u+=2)p.push(o[u]),h.push(o[u+1]);return t2r(p,h,r)}function w$e(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function s1(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function qw(e,t){var r=Math.cos(t),n=Math.sin(t),o=e[0]*r-e[1]*n,i=e[1]*r+e[0]*n;return e[0]=o,e[1]=i,e}function E$e(e,t){return e[0]*=t,e[1]*=t,e}function S$e(e,t){if(t.canWrapX()){var r=fi(t.getExtent()),n=I$e(e,t,r);n&&(e[0]-=n*r)}return e}function I$e(e,t,r){var n=t.getExtent(),o=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var i=r||fi(n);o=Math.floor((e[0]-n[0])/i)}return o}var o2r=6371008.8;function tre(e,t,r){var n=r||o2r,o=Lw(e[1]),i=Lw(t[1]),a=(i-o)/2,u=Lw(t[0]-e[0])/2,p=Math.sin(a)*Math.sin(a)+Math.sin(u)*Math.sin(u)*Math.cos(o)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(p),Math.sqrt(1-p))}var rre=!0;function M$e(e){var t=e===void 0?!0:e;rre=!t}function nre(e,t,r){var n;if(t!==void 0){for(var o=0,i=e.length;o<i;++o)t[o]=e[o];n=t}else n=e.slice();return n}function C$e(e,t,r){if(t!==void 0&&e!==t){for(var n=0,o=e.length;n<o;++n)t[n]=e[n];e=t}return e}function i2r(e){l$e(e.getCode(),e),KC(e,e,nre)}function a2r(e){e.forEach(i2r)}function yu(e){return typeof e=="string"?s$e(e):e||null}function ore(e,t,r,n){e=yu(e);var o,i=e.getPointResolutionFunc();if(i){if(o=i(t,r),n&&n!==e.getUnits()){var a=e.getMetersPerUnit();a&&(o=o*a/gu[n])}}else{var u=e.getUnits();if(u==vu.DEGREES&&!n||n==vu.DEGREES)o=t;else{var p=ire(e,yu("EPSG:4326"));if(p===C$e&&u!==vu.DEGREES)o=t*e.getMetersPerUnit();else{var h=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];h=p(h,h,2);var g=tre(h.slice(0,2),h.slice(2,4)),x=tre(h.slice(4,6),h.slice(6,8));o=(g+x)/2}var a=n?gu[n]:e.getMetersPerUnit();a!==void 0&&(o/=a)}}return o}function T$e(e){a2r(e),e.forEach(function(t){e.forEach(function(r){t!==r&&KC(t,r,nre)})})}function s2r(e,t,r,n){e.forEach(function(o){t.forEach(function(i){KC(o,i,r),KC(i,o,n)})})}function P6(e,t){return e?typeof e=="string"?yu(e):e:yu(t)}function A$e(e,t){var r=nA(e,t!==void 0?t:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Zf(n+180,360)-180),r}function Nv(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=ire(e,t);return n===nre&&r}function ire(e,t){var r=e.getCode(),n=t.getCode(),o=f$e(r,n);return o||(o=C$e),o}function l1(e,t){var r=yu(e),n=yu(t);return ire(r,n)}function nA(e,t,r){var n=l1(t,r);return n(e,void 0,e.length)}function D$e(e,t,r,n){var o=l1(t,r);return b$e(e,o,void 0,n)}var Jh=null;function N$e(){return Jh}function oA(e,t){return Jh?nA(e,t,Jh):e}function Xf(e,t){return Jh?nA(e,Jh,t):(rre&&!s1(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(rre=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function O$e(e,t){return Jh?D$e(e,t,Jh):e}function Ov(e,t){return Jh?D$e(e,Jh,t):e}function l2r(){T$e(Kte),T$e(Xte),s2r(Xte,Kte,o$e,i$e)}l2r();var ua=Z(we(),1);var Fw=Z(we(),1),are=Z(xt(),1);var u1=Z(we(),1),zw=Z(xt(),1),L$e=({checked:e,georeferenceMode:t,id:r,onClick:n,title:o})=>r!=="ToGeoref"||r==="toGeoref"&&t?u1.default.createElement("li",null,u1.default.createElement("label",{htmlFor:r},u1.default.createElement("input",{checked:e,className:"facet-search-el",onChange:()=>{n(r)},id:r,title:o,type:"checkbox"}),u1.default.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))):u1.default.createElement(u1.default.Fragment,null);L$e.propTypes={checked:zw.default.bool,georeferenceMode:zw.default.bool,id:zw.default.string,onClick:zw.default.func,title:zw.default.string};var P$e=L$e;var sre={AE:"map_type-ae",AK:"map_type-ak",CM:"map_type-cm",GL:"map_type-gl",MB:"map_type-mb",MTB:"map_type-mtb",TK:"map_type-tk",TKX:"map_type-tkx",MM:"type-mosaic",VM:"type-vector"},u2r=(e,t)=>e.title>t.title?1:e.title<t.title?-1:0,c2r=()=>{let e=Object.keys(sre).map(t=>({key:t,title:de(`facet-${t.toLowerCase()}`)}));return e.sort(u2r),e},f2r={};Object.keys(sre).forEach(e=>{f2r[e]=!1});var k$e=({georeferenceMode:e,mosaicMode:t})=>{let[r,n]=Nn(Bc),o=(0,Fw.useMemo)(()=>{let u=Se({},sre);return t&&(delete u.MM,delete u.VM),u},[t]),i=(0,Fw.useMemo)(()=>c2r(),[]),a=u=>{n(p=>{let{facets:h,georeference:g}=p;if(u==="ToGeoref")return{facets:h,georeference:!g};{let x=h.slice(),b=x.findIndex(T=>T.id===u);if(b>-1)x.splice(b,1);else{let[T,A]=o[u].split("-");x.push({key:T,value:A,id:u})}return{facets:x,georeference:g}}})};return Fw.default.createElement("ul",{className:"search-facet"},i.map(({key:u,title:p})=>Fw.default.createElement(P$e,{checked:r.facets.findIndex(h=>h.id===u)!==-1,key:u,georeferenceMode:e,onClick:a,id:u,title:p})))};k$e.propTypes={georeferenceMode:are.default.bool,mosaicMode:are.default.bool};var R$e=k$e;var k6=R$e;var tm=Z(we(),1);var Lre=Z(xt(),1);var Yi=Z(we(),1),_u=Z(xt(),1);function Jr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var j$e=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function p2r(e,t){return!!(e===t||j$e(e)&&j$e(t))}function d2r(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!p2r(e[r],t[r]))return!1;return!0}function h2r(e,t){t===void 0&&(t=d2r);var r,n=[],o,i=!1;function a(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];return i&&r===this&&t(u,n)||(o=e.apply(this,u),i=!0,r=this,n=u),o}return a}var R6=h2r;var Bw=Z(we());var m2r=typeof performance=="object"&&typeof performance.now=="function",q$e=m2r?function(){return performance.now()}:function(){return Date.now()};function z$e(e){cancelAnimationFrame(e.id)}function g2r(e,t){var r=q$e();function n(){q$e()-r>=t?e.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var lre=-1;function F$e(e){if(e===void 0&&(e=!1),lre===-1||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),lre=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return lre}var Uw=null;function U$e(e){if(e===void 0&&(e=!1),Uw===null||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?Uw="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?Uw="negative":Uw="positive-ascending"),document.body.removeChild(t),Uw}return Uw}var v2r=150,y2r=function(t,r){return t};function _2r(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,o=e.getItemSize,i=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,u=e.getStopIndexForStartIndex,p=e.initInstanceProps,h=e.shouldResetStyleCacheOnItemSizeChange,g=e.validateProps;return t=function(x){OR(b,x);function b(A){var L;return L=x.call(this,A)||this,L._instanceProps=p(L.props,Jr(L)),L._outerRef=void 0,L._resetIsScrollingTimeoutId=null,L.state={instance:Jr(L),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof L.props.initialScrollOffset=="number"?L.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},L._callOnItemsRendered=void 0,L._callOnItemsRendered=R6(function(P,k,q,U){return L.props.onItemsRendered({overscanStartIndex:P,overscanStopIndex:k,visibleStartIndex:q,visibleStopIndex:U})}),L._callOnScroll=void 0,L._callOnScroll=R6(function(P,k,q){return L.props.onScroll({scrollDirection:P,scrollOffset:k,scrollUpdateWasRequested:q})}),L._getItemStyle=void 0,L._getItemStyle=function(P){var k=L.props,q=k.direction,U=k.itemSize,H=k.layout,X=L._getItemStyleCache(h&&U,h&&H,h&&q),ee;if(X.hasOwnProperty(P))ee=X[P];else{var ne=r(L.props,P,L._instanceProps),me=o(L.props,P,L._instanceProps),ue=q==="horizontal"||H==="horizontal",Me=q==="rtl",ke=ue?ne:0;X[P]=ee={position:"absolute",left:Me?void 0:ke,right:Me?ke:void 0,top:ue?0:ne,height:ue?"100%":me,width:ue?me:"100%"}}return ee},L._getItemStyleCache=void 0,L._getItemStyleCache=R6(function(P,k,q){return{}}),L._onScrollHorizontal=function(P){var k=P.currentTarget,q=k.clientWidth,U=k.scrollLeft,H=k.scrollWidth;L.setState(function(X){if(X.scrollOffset===U)return null;var ee=L.props.direction,ne=U;if(ee==="rtl")switch(U$e()){case"negative":ne=-U;break;case"positive-descending":ne=H-q-U;break;}return ne=Math.max(0,Math.min(ne,H-q)),{isScrolling:!0,scrollDirection:X.scrollOffset<ne?"forward":"backward",scrollOffset:ne,scrollUpdateWasRequested:!1}},L._resetIsScrollingDebounced)},L._onScrollVertical=function(P){var k=P.currentTarget,q=k.clientHeight,U=k.scrollHeight,H=k.scrollTop;L.setState(function(X){if(X.scrollOffset===H)return null;var ee=Math.max(0,Math.min(H,U-q));return{isScrolling:!0,scrollDirection:X.scrollOffset<ee?"forward":"backward",scrollOffset:ee,scrollUpdateWasRequested:!1}},L._resetIsScrollingDebounced)},L._outerRefSetter=function(P){var k=L.props.outerRef;L._outerRef=P,typeof k=="function"?k(P):k!=null&&typeof k=="object"&&k.hasOwnProperty("current")&&(k.current=P)},L._resetIsScrollingDebounced=function(){L._resetIsScrollingTimeoutId!==null&&z$e(L._resetIsScrollingTimeoutId),L._resetIsScrollingTimeoutId=g2r(L._resetIsScrolling,v2r)},L._resetIsScrolling=function(){L._resetIsScrollingTimeoutId=null,L.setState({isScrolling:!1},function(){L._getItemStyleCache(-1,null)})},L}b.getDerivedStateFromProps=function(L,P){return x2r(L,P),g(L),null};var T=b.prototype;return T.scrollTo=function(L){L=Math.max(0,L),this.setState(function(P){return P.scrollOffset===L?null:{scrollDirection:P.scrollOffset<L?"forward":"backward",scrollOffset:L,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},T.scrollToItem=function(L,P){P===void 0&&(P="auto");var k=this.props,q=k.itemCount,U=k.layout,H=this.state.scrollOffset;L=Math.max(0,Math.min(L,q-1));var X=0;if(this._outerRef){var ee=this._outerRef;U==="vertical"?X=ee.scrollWidth>ee.clientWidth?F$e():0:X=ee.scrollHeight>ee.clientHeight?F$e():0}this.scrollTo(i(this.props,L,P,H,this._instanceProps,X))},T.componentDidMount=function(){var L=this.props,P=L.direction,k=L.initialScrollOffset,q=L.layout;if(typeof k=="number"&&this._outerRef!=null){var U=this._outerRef;P==="horizontal"||q==="horizontal"?U.scrollLeft=k:U.scrollTop=k}this._callPropsCallbacks()},T.componentDidUpdate=function(){var L=this.props,P=L.direction,k=L.layout,q=this.state,U=q.scrollOffset,H=q.scrollUpdateWasRequested;if(H&&this._outerRef!=null){var X=this._outerRef;if(P==="horizontal"||k==="horizontal"){if(P==="rtl")switch(U$e()){case"negative":X.scrollLeft=-U;break;case"positive-ascending":X.scrollLeft=U;break;default:var ee=X.clientWidth,ne=X.scrollWidth;X.scrollLeft=ne-ee-U;break;}else X.scrollLeft=U;}else X.scrollTop=U}this._callPropsCallbacks()},T.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&z$e(this._resetIsScrollingTimeoutId)},T.render=function(){var L=this.props,P=L.children,k=L.className,q=L.direction,U=L.height,H=L.innerRef,X=L.innerElementType,ee=L.innerTagName,ne=L.itemCount,me=L.itemData,ue=L.itemKey,Me=ue===void 0?y2r:ue,ke=L.layout,Te=L.outerElementType,Ee=L.outerTagName,Ze=L.style,Qe=L.useIsScrolling,Fe=L.width,ze=this.state.isScrolling,Ne=q==="horizontal"||ke==="horizontal",et=Ne?this._onScrollHorizontal:this._onScrollVertical,st=this._getRangeToRender(),ft=st[0],Ye=st[1],tt=[];if(ne>0)for(var lt=ft;lt<=Ye;lt++)tt.push((0,Bw.createElement)(P,{data:me,key:Me(lt,me),index:lt,isScrolling:Qe?ze:void 0,style:this._getItemStyle(lt)}));var je=n(this.props,this._instanceProps);return(0,Bw.createElement)(Te||Ee||"div",{className:k,onScroll:et,ref:this._outerRefSetter,style:Pn({position:"relative",height:U,width:Fe,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:q},Ze)},(0,Bw.createElement)(X||ee||"div",{children:tt,ref:H,style:{height:Ne?"100%":je,pointerEvents:ze?"none":void 0,width:Ne?je:"100%"}}))},T._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var L=this.props.itemCount;if(L>0){var P=this._getRangeToRender(),k=P[0],q=P[1],U=P[2],H=P[3];this._callOnItemsRendered(k,q,U,H)}}if(typeof this.props.onScroll=="function"){var X=this.state,ee=X.scrollDirection,ne=X.scrollOffset,me=X.scrollUpdateWasRequested;this._callOnScroll(ee,ne,me)}},T._getRangeToRender=function(){var L=this.props,P=L.itemCount,k=L.overscanCount,q=this.state,U=q.isScrolling,H=q.scrollDirection,X=q.scrollOffset;if(P===0)return[0,0,0,0];var ee=a(this.props,X,this._instanceProps),ne=u(this.props,ee,X,this._instanceProps),me=!U||H==="backward"?Math.max(1,k):1,ue=!U||H==="forward"?Math.max(1,k):1;return[Math.max(0,ee-me),Math.max(0,Math.min(P-1,ne+ue)),ee,ne]},b}(Bw.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var x2r=function(t,r){var n=t.children,o=t.direction,i=t.height,a=t.layout,u=t.innerTagName,p=t.outerTagName,h=t.width,g=r.instance;if(0)var x};var j6=_2r({getItemOffset:function(t,r){var n=t.itemSize;return r*n},getItemSize:function(t,r){var n=t.itemSize;return n},getEstimatedTotalSize:function(t){var r=t.itemCount,n=t.itemSize;return n*r},getOffsetForIndexAndAlignment:function(t,r,n,o,i,a){var u=t.direction,p=t.height,h=t.itemCount,g=t.itemSize,x=t.layout,b=t.width,T=u==="horizontal"||x==="horizontal",A=T?b:p,L=Math.max(0,h*g-A),P=Math.min(L,r*g),k=Math.max(0,r*g-A+g+a);switch(n==="smart"&&(o>=k-A&&o<=P+A?n="auto":n="center"),n){case"start":return P;case"end":return k;case"center":{var q=Math.round(k+(P-k)/2);return q<Math.ceil(A/2)?0:q>L+Math.floor(A/2)?L:q}case"auto":default:return o>=k&&o<=P?o:o<k?k:P;}},getStartIndexForOffset:function(t,r){var n=t.itemCount,o=t.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/o)))},getStopIndexForStartIndex:function(t,r,n){var o=t.direction,i=t.height,a=t.itemCount,u=t.itemSize,p=t.layout,h=t.width,g=o==="horizontal"||p==="horizontal",x=r*u,b=g?h:i,T=Math.ceil((b+n-x)/u);return Math.max(0,Math.min(a-1,r+T-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var r=t.itemSize}});var V$e=Z(we());function b2r(e){var t=e.lastRenderedStartIndex,r=e.lastRenderedStopIndex,n=e.startIndex,o=e.stopIndex;return!(n>r||o<t)}function w2r(e){for(var t=e.isItemLoaded,r=e.itemCount,n=e.minimumBatchSize,o=e.startIndex,i=e.stopIndex,a=[],u=null,p=null,h=o;h<=i;h++){var g=t(h);g?p!==null&&(a.push(u,p),u=p=null):(p=h,u===null&&(u=h))}if(p!==null){for(var x=Math.min(Math.max(p,u+n-1),r-1),b=p+1;b<=x&&!t(b);b++)p=b;a.push(u,p)}if(a.length)for(;a[1]-a[0]+1<n&&a[0]>0;){var T=a[0]-1;if(!t(T))a[0]=T;else break}return a}var E2r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},S2r=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),I2r=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},B$e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},T2r=function(e){I2r(t,e);function t(){var r,n,o,i;E2r(this,t);for(var a=arguments.length,u=Array(a),p=0;p<a;p++)u[p]=arguments[p];return i=(n=(o=B$e(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(u))),o),o._lastRenderedStartIndex=-1,o._lastRenderedStopIndex=-1,o._memoizedUnloadedRanges=[],o._onItemsRendered=function(h){var g=h.visibleStartIndex,x=h.visibleStopIndex;o._lastRenderedStartIndex=g,o._lastRenderedStopIndex=x,o._ensureRowsLoaded(g,x)},o._setRef=function(h){o._listRef=h},n),B$e(o,i)}return S2r(t,[{key:"resetloadMoreItemsCache",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._memoizedUnloadedRanges=[],n&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var n=this.props.children;return n({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(n,o){var i=this.props,a=i.isItemLoaded,u=i.itemCount,p=i.minimumBatchSize,h=p===void 0?10:p,g=i.threshold,x=g===void 0?15:g,b=w2r({isItemLoaded:a,itemCount:u,minimumBatchSize:h,startIndex:Math.max(0,n-x),stopIndex:Math.min(u-1,o+x)});(this._memoizedUnloadedRanges.length!==b.length||this._memoizedUnloadedRanges.some(function(T,A){return b[A]!==T}))&&(this._memoizedUnloadedRanges=b,this._loadUnloadedRanges(b))}},{key:"_loadUnloadedRanges",value:function(n){for(var o=this,i=this.props.loadMoreItems||this.props.loadMoreRows,a=function(h){var g=n[h],x=n[h+1],b=i(g,x);b!=null&&b.then(function(){if(b2r({lastRenderedStartIndex:o._lastRenderedStartIndex,lastRenderedStopIndex:o._lastRenderedStopIndex,startIndex:g,stopIndex:x})){if(o._listRef==null)return;typeof o._listRef.resetAfterIndex=="function"?o._listRef.resetAfterIndex(g,!0):(typeof o._listRef._getItemStyleCache=="function"&&o._listRef._getItemStyleCache(-1),o._listRef.forceUpdate())}})},u=0;u<n.length;u+=2)a(u)}}]),t}(V$e.PureComponent),G$e=T2r;var iA=Z(we(),1);var q6=Z(xt(),1);var H$e=({onClick:e,sortOrder:t,type:r})=>{let n=()=>{e(r)},o=a=>{a.keyCode===13&&n()},i=de(`mapsearch-${r}`)===""?de(r):de(`mapsearch-${r}`);return iA.default.createElement("div",{className:Et("inner-col",r)},iA.default.createElement("div",{className:Et("sort-element",r,t),onClick:n,onKeyDown:o,tabIndex:0},i,iA.default.createElement("span",{className:"caret-container"},iA.default.createElement("span",{className:"caret caret-reversed"}))))};H$e.propTypes={onClick:q6.default.func,sortOrder:q6.default.string,type:q6.default.string};var W$e=H$e;var OYe=Z(we(),1);var cA=Z(we(),1);var Qn=Z(we(),1),rc=Z(xt(),1);var uA=Z(Dre(),1);var bYe=(e,t)=>e.findIndex(r=>r.getId()===t.getId())!==-1,SIr="http://www.deutschefotothek.de/images/noimage/image120.jpg",lA=e=>e.getType()===Mn.VECTOR_MAP?hr.getSettings().FALLBACK_THUMBNAIL:SIr,V6=e=>{let t=e.getMetadata(it.thumbnailUrl);return!Ge(t)||t===""?lA(e):t.replace("http:","")};var wYe=({children:e,data:t,index:r,onClick:n,onMouseEnter:o,onMouseLeave:i,style:a})=>{var me;let{direction:u,maps:p}=t,h=(me=p[r])!=null?me:f1,g=vt(Ln),[x,b]=(0,Qn.useState)(!1),T=(0,Qn.useMemo)(()=>V6(h),[h]),A=(0,Qn.useMemo)(()=>lA(h),[h]),L=()=>{n(h)},P=ue=>{ue.key==="Enter"&&L()},k=(0,Qn.useCallback)(()=>{T!==""&&T!==A&&b(!0)},[T,A]);(0,Qn.useEffect)(()=>{b(!1)},[h.getId()]);let q=h===f1,U=bYe(g,h)&&!q,H=h.getMetadata(it.mapScale)==="0"||h.getMetadata(it.mapScale)===0?de("mapsearch-listelement-unknown"):`1:${h.getMetadata(it.mapScale)}`,X=parseInt(h.getMetadata(it.timePublished),0),ee=h.getMetadata(it.type)===Mn.MOSAIC_MAP,ne=h.getMetadata(it.type)===Mn.VECTOR_MAP;return Qn.default.createElement("li",{tabIndex:0,style:a,className:Et("vkf-mapsearch-record",h.getMetadata(it.type),U&&"selected",u,q&&"loading"),id:h.getMetadata(it.id),onClick:q?void 0:L,onKeyDown:q?void 0:P,onMouseEnter:o,onMouseLeave:i},e,Qn.default.createElement("span",{className:"data-col time"},isNaN(X)?"":X),Qn.default.createElement("span",{className:"data-col title"},h.getMetadata(it.title)),Qn.default.createElement("span",{className:"data-col time"},"1"),Qn.default.createElement("div",{className:"view-item"},Qn.default.createElement("span",{className:"thumbnail",href:"#"},q?Qn.default.createElement(uA.default.default,{height:"calc(100% - 6px)"}):Qn.default.createElement(Qn.default.Fragment,null,Qn.default.createElement("img",{alt:`Thumbnail Image of Map ${h.getMetadata(it.title)} ${h.getMetadata(it.timePublished)}`,onError:k,src:x?A:T}),ee&&Qn.default.createElement("span",{className:Et("mosaic-badge",U&&"selected")},de("mosaic-badge-title")),ne&&Qn.default.createElement("span",{className:Et("vector-badge",U&&"selected")},de("vector-badge-title"))),U&&Qn.default.createElement("span",{className:"badge selected-badge"},Qn.default.createElement("span",{className:"glyphicon glyphicon-ok"})," ")),Qn.default.createElement("div",{className:"overview"},Qn.default.createElement("h2",null,q?Qn.default.createElement(uA.default.default,null):h.getMetadata(it.title)),Qn.default.createElement("div",{className:"details"},Qn.default.createElement("div",{className:"timestamp"},q?Qn.default.createElement(uA.default.default,null):`${de("mapsearch-listelement-time")} ${h.getMetadata(it.timePublished)}`),!ne&&Qn.default.createElement("div",{className:"scale"},q?Qn.default.createElement(uA.default.default,null):`${de("mapsearch-listelement-scale")} ${H}`),!h.getMetadata(it.hasGeoReference)&&Qn.default.createElement("div",{className:"georeference"},de("mapsearch-listelement-no-georef"))))))};wYe.propTypes={children:rc.default.element,data:rc.default.shape({direction:rc.default.oneOf(["horizontal","vertical"]),feature:rc.default.object,is3d:rc.default.bool,maps:rc.default.object,selected:rc.default.bool}),onClick:rc.default.func,onMouseEnter:rc.default.func,onMouseLeave:rc.default.func,index:rc.default.number,style:rc.default.object};var Nre=wYe;var EYe=e=>{var p;let{data:t,index:r}=e,{maps:n}=t,o=vt(wr),i=(p=n[r])!=null?p:f1,a=(0,cA.useCallback)(()=>{Ge(o)&&TQ(o,i.getPreviewFeature())},[o,i]),u=(0,cA.useCallback)(()=>{Ge(o)&&TQ(o,{type:"FeatureCollection",features:[]})},[o,i]);return cA.default.createElement(Nre,Se({onMouseEnter:a,onMouseLeave:u},e))};EYe.propTypes=Se({},Nre.propTypes);var Ore=EYe;var SYe=Z(hv(),1);var IIr=e=>Nt(void 0,null,function*(){var t;try{let r=yield SYe.default.get(`${e}/tilemapresource.xml`),n=new DOMParser().parseFromString(r.data,"text/xml"),o=n.getElementsByTagName("BoundingBox")[0],i=[o.getAttribute("minx"),o.getAttribute("miny"),o.getAttribute("maxx"),o.getAttribute("maxy")].map(parseFloat),a=n.getElementsByTagName("TileSet"),u=(t=parseInt(n.getElementsByTagName("TileFormat")[0].getAttribute("width")))!=null?t:256;return{bounds:i,maxZoom:a.length-1,tileSize:u}}catch(r){return console.error("Error fetching or parsing XML:",r),null}}),Gw=e=>Nt(void 0,null,function*(){let t=e.getMetadata(it.tmsUrls),r=e.getMetadata(it.onlineResources).find(i=>i.type==="WMS").url,n=Array.isArray(t)&&t.length>0,o;if(n){let{maxZoom:i,bounds:a,tileSize:u}=yield IIr(t[0]);o={bounds:a,tileSize:u,maxzoom:i,tiles:t.map(p=>`${p}/{z}/{x}/{y}.png`),scheme:"tms"}}else o={tiles:(yield E6(r))[0].urls};return o});var IYe=(e,t)=>Nt(void 0,null,function*(){return(yield hr.getGeoreferenceApiClient().post("/vector_maps/",Se({geojson:e},t))).data.id}),TYe=(e,t,r,n)=>Nt(void 0,null,function*(){let o=hr.getGeoreferenceApiClient(),i=`/vector_maps/${e}`;return(yield o.patch(i,{geojson:t,metadata:r,current_version:n})).data.version}),Hw=e=>Nt(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.get(r)).data}),MYe=e=>Nt(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.delete(r)).data}),CYe=e=>Nt(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/versions`;return(yield t.get(r)).data}),AYe=(e,t)=>Nt(void 0,null,function*(){let r=hr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/versions/${t}`;return(yield r.get(n)).data}),DYe=e=>Nt(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/roles`;return(yield t.get(r)).data}),NYe=(e,t)=>Nt(void 0,null,function*(){let r=hr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/roles`;return(yield r.patch(n,Se({},t))).data});var TIr=()=>Rr(({snapshot:e,set:t})=>r=>Nt(void 0,null,function*(){let n=yield e.getPromise(Ln),o=yield e.getPromise(wr);t($s,void 0);let i=n.find(u=>u.getId()===r.getId());if(i){t(Ln,n.filter(u=>u.getId()!==r.getId())),i.removeMapLibreLayers(o);return}if(r.getMetadata(it.type)===Mn.VECTOR_MAP){let u=yield Hw(r.getMetadata(it.vectorMapId));r.updateMetadata(it.userRole,u[it.userRole]),r.updateMetadata(it.version,u[it.version]),r.setGeoJson(u.geojson),r.addLayerToMap(o),t(Ln,p=>p.concat(r))}else{let u=yield Gw(r);r.addLayerToMap(o,{sourceSettings:u}),t(Ln,p=>p.concat(r))}})),LYe=e=>{let t=TIr();return OYe.default.createElement(Ore,Se({onClick:t},e))};LYe.propTypes=Se({},Ore.propTypes);var PYe=LYe;var MIr=["map_scale","time_published","title","georeference"],f1=new jh({metadata:{has_georeference:!0,map_scale:"0",thumb_url:"",time_published:"",title:"Loading"}}),G6=({direction:e="vertical",itemSize:t=110,ListItemComponent:r=PYe,minimumBatchSize:n,onFetchResults:o,onUpdateSortType:i,renderHeader:a=!0,searchResultDescriptor:{itemCount:u,id:p},sortSettings:h})=>{let{activeType:g,sortOrder:x}=h,b=vt(s9e),[T,A]=(0,Yi.useState)({}),L=(0,Yi.useRef)(!1),P=(0,Yi.useRef)(),k=(0,Yi.useRef)(),{height:q,width:U}=HM(k),H=(0,Yi.useCallback)(ee=>!L.current&&T[ee]!==void 0&&T[ee]!==f1,[T]),X=(0,Yi.useCallback)((ee,ne)=>{if(ee!==void 0&&ne!==void 0){let me=ne-ee+1;return o(ee,me).then(ue=>{ue&&A(Me=>{let ke=L.current?{}:Object.assign({},Me);return L.current=!1,ue.forEach((Te,Ee)=>{ke[ee+Ee]=Te}),ke})})}},[o]);return(0,Yi.useEffect)(()=>{f1.updateMetadata("title",de("mapsearch-listelement-loading"))},[]),(0,Yi.useEffect)(()=>{L.current=!0,P.current.resetloadMoreItemsCache(!0)},[p]),Yi.default.createElement("div",{className:Et("vkf-mapsearch-result-list",e)},a&&Yi.default.createElement("div",{className:"list-header"},Yi.default.createElement("strong",{className:"list-label"},de("mapsearch-sorting"),":"),Yi.default.createElement("div",{className:"inner-columns"},MIr.map(ee=>Yi.default.createElement(W$e,{key:ee,onClick:i,sortOrder:g===ee?x:"",type:ee})))),Yi.default.createElement("div",{className:"mapsearch-contentlist-container",ref:k},Yi.default.createElement(G$e,{isItemLoaded:H,itemCount:u,loadMoreItems:X,minimumBatchSize:n,ref:P},({onItemsRendered:ee,ref:ne})=>Yi.default.createElement(j6,{height:q,innerElementType:"ul",itemCount:u,itemSize:t,itemData:{direction:e,maps:T,is3d:b},layout:e,onItemsRendered:ee,ref:ne,width:U},r))))};G6.propTypes={direction:_u.default.oneOf(["horizontal","vertical"]),itemSize:_u.default.number,minimumBatchSize:_u.default.number,ListItemComponent:_u.default.elementType,renderHeader:_u.default.bool,onFetchResults:_u.default.func,onUpdateSortType:_u.default.func,searchResultDescriptor:_u.default.shape({id:_u.default.number,itemCount:_u.default.number}),sortSettings:_u.default.shape({activeType:_u.default.string,sortOrder:_u.default.string})};var CIr="title",fA={ASCENDING:"ascending",DESCENDING:"descending"},kYe=o=>{var i=o,{customQuery:e,DataProvider:t,enableOverlayLayer:r=!0}=i,n=wn(i,["customQuery","DataProvider","enableOverlayLayer"]);let[a,u]=(0,tm.useState)({activeType:CIr,sortOrder:fA.ASCENDING}),{activeType:p,sortOrder:h}=a,g=b=>{let T=b===p&&h===fA.ASCENDING?fA.DESCENDING:fA.ASCENDING;u({sortOrder:T,activeType:b})};return tm.default.createElement(tm.Fragment,null,r&&tm.default.createElement(B9e,{sortSettings:a}),tm.default.createElement(t,{customQuery:e,renderConsumer:b=>tm.default.createElement(G6,Se(Se({onUpdateSortType:g,sortSettings:a},n),b)),sortSettings:a}))};kYe.propTypes=Se({DataProvider:Lre.default.elementType.isRequired,enableOverlayLayer:Lre.default.bool},G6.propTypes);var H6=kYe;var kre=Z(we(),1),Rre=Z(xt(),1);var Pre=Z(we(),1),W6=Z(xt(),1);var RYe=({name:e,color:t,size:r})=>Pre.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${e}`,fill:t,width:r,height:r},Pre.default.createElement("use",{xlinkHref:`${hr.getSettings().ICON_SPRITE}#${e}`}));RYe.propTypes={name:W6.default.string.isRequired,color:W6.default.string,size:W6.default.number};var Js=RYe;var jYe=({onClick:e,isOpen:t})=>{let r=vt(Bc);return kre.default.createElement("button",{className:Et("vkf-toggle-facets",r.facets.length>0&&"active"),onClick:e,title:de(`mapsearch-facetedsearch-${t?"close":"open"}`)},kre.default.createElement(Js,{name:"icon-filter"}))};jYe.propTypes={isOpen:Rre.default.bool,onClick:Rre.default.func};var $6=jYe;var ud=Z(we(),1);var AIr=()=>ud.default.createElement("div",{className:"lds-roller"},ud.default.createElement("div",null),ud.default.createElement("div",null),ud.default.createElement("div",null),ud.default.createElement("div",null),ud.default.createElement("div",null),ud.default.createElement("div",null),ud.default.createElement("div",null),ud.default.createElement("div",null)),Y6=AIr;var Qs=Z(we(),1),Lv=Z(xt(),1);var zre=Z(hv(),1);var DIr=function(e){let t=[],r={bool:{should:t}};for(let n=0;n<e.length;n++){let o=e[n],i={term:{}};i.term[o.key]=o.value.toLowerCase(),t.push(i)}return r},qYe=function(e){return{aggs:{summary:{stats:{field:e}}}}},zYe=function(e,t,r,n,o,i,a,u){return{query:{bool:{filter:[{range:{[e]:{gte:t[0],lte:t[1]}}},{geo_shape:{[r]:{relation:"intersects",shape:{type:"envelope",coordinates:n}}}},DIr(a),{term:{has_georeference:!0}},...(u||[])],must:[{match_all:{}}]}},sort:{[o]:{order:i}}}};var Z6={height:15,width:15},FYe={height:15,width:0},jre={width:340},qre={width:340},UYe=(e,t)=>{let{map:r}=e,n,o,i,a;return t===fu.VERTICAL?(n=0,o=r.height,i=r.width,a=0):(n=0+jre.width+Z6.width,o=r.height-FYe.height-Z6.height,i=r.width-qre.width-Z6.width,a=FYe.height+Z6.height),[[n,o],[n,a],[i,o],[i,a]]},BYe=(e,t=[[-180,85.06],[180,-85.06]])=>{let[[r,n],[o,i]]=e,[[a,u],[p,h]]=t;return[[Math.max(a,r),Math.min(n,u)],[Math.min(p,o),Math.max(i,h)]]};var VYe=Z(GM(),1),GYe=({customQuery:e,minimumBatchSize:t=20,renderConsumer:r,sortSettings:n})=>{let{activeType:o,sortOrder:i}=n,a=vt(fk),{facets:u}=vt(Bc),p=vt(Zb),h=vt(wr),[g,x]=(0,Qs.useState)(void 0),b=Ar(pk),T=Ar(Kb),[A,L]=Nn(yv),[P,k]=Nn(vv),[q,U]=(0,Qs.useState)({itemCount:10,id:Date.now()}),X=hr.getSettings().API_SEARCH,ee=(0,Qs.useCallback)(ke=>{let Te=i==="ascending"?"asc":"desc",Ee=BYe([[ke[0],ke[3]],[ke[2],ke[1]]]);return zYe("time_published",[`${P[0]}-01-01`,`${P[1]}-12-31`],"geometry",Ee,o,Te,u,e)},[u,o,i,P]),ne=(0,Qs.useCallback)((ke,Te,Ee=!1)=>{if(g===void 0)return b(!1),new Promise(Fe=>Fe([]));let Ze=ee(g,"ESPG:4326"),Qe=X+"/_search?from="+ke+"&size="+Te;return b(!0),zre.default.post(Qe,Ze).then(Fe=>{if(Fe.status===200){let ze=Fe.data;return Ee?ze:Z7e(ze.hits.hits)}}).catch(Fe=>{console.warn(Fe)}).finally(()=>{b(!1)})},[ee,g]),me=(0,Qs.useCallback)(()=>{ne(0,0,!0).then(ke=>{let Te=ke.hits.total.value;T(Te),U({itemCount:Te,id:Date.now()})})},[ne]),ue=f9e(me,30),Me=(0,Qs.useCallback)(()=>{if(Ge(h)){let ke=UYe(a,p),Te=new VYe.LngLatBounds;ke.forEach(Ze=>{let Qe=h.unproject(Ze);Te.extend(Qe)});let Ee=Te.toArray().flat();(g===void 0||!JC(Ee,g))&&x(Ee)}},[h,g,a]);return(0,Qs.useEffect)(()=>{if(Ge(h))return h.on("moveend",Me),()=>{h.off("moveend",Me)}},[h,Me]),(0,Qs.useEffect)(()=>{ue()},[u,me,g,o,i,P]),(0,Qs.useEffect)(()=>{Me()},[a,h]),(0,Qs.useEffect)(()=>{let ke=`${X}/_search?`,Te=qYe("time_published");zre.default.post(ke,Te,{}).then(Ee=>{if(Ee.status===200){let Ze=Ee.data,Qe=new Date(Ze.aggregations.summary.max),ze=[new Date(Ze.aggregations.summary.min).getUTCFullYear(),Qe.getUTCFullYear()];(A===void 0||wQ===A||ze[0]!==A[0]||ze[1]!==A[1])&&(L(ze),k(ze))}})},[]),Qs.default.createElement(Qs.default.Fragment,null,r({minimumBatchSize:t,onRefresh:me,onFetchResults:ne,searchResultDescriptor:q}))};GYe.propTypes={customQuery:Lv.default.array,minimumBatchSize:Lv.default.number,projection:Lv.default.string,renderConsumer:Lv.default.func,sortSettings:Lv.default.shape({activeType:Lv.default.string,sortOrder:Lv.default.string})};var K6=GYe;var X6=Z(xt(),1),HYe="EPSG:3857",WYe=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let[n,o]=Nn(Bc),[i,a]=(0,ua.useState)(!1),[u,p]=(0,ua.useState)(!1),h=vt(pk),g=vt(Kb),x=()=>{a(T=>!T)},b=()=>{o(a9e)};return(0,ua.useEffect)(()=>{p(h)},[h]),ua.default.createElement("div",{className:Et("mapsearch-container",i&&"facetedsearch-open")},ua.default.createElement("div",{className:"panel panel-default searchTablePanel"},ua.default.createElement("div",{className:"panel-heading"},ua.default.createElement("div",{className:"content"},ua.default.createElement("div",null,g===0?de("mapsearch-found-no-maps"):`${g} ${de("mapsearch-found-maps")}`),n.facets.length>0&&ua.default.createElement("button",{className:"remove-filter",onClick:b},ua.default.createElement(Js,{name:"icon-filter"})),u&&ua.default.createElement("div",{className:"loading-spinner"},ua.default.createElement(Y6,null)),ua.default.createElement($6,{onClick:x,isOpen:i})),ua.default.createElement("div",{className:"facet-container"},ua.default.createElement(k6,{georeferenceMode:!1,mosaicMode:r}))),ua.default.createElement("div",{className:"panel-body"},ua.default.createElement(H6,{customQuery:e,DataProvider:K6,ListItemComponent:t}))))};WYe.propTypes={customQuery:X6.default.array,MapSearchListItemComponent:X6.default.elementType,mosaicMode:X6.default.bool};var $Ye=WYe;var YYe=e=>typeof e=="string"||e instanceof String,NIr=e=>{if(e===void 0||!Array.isArray(e)||e.length<2)return!1;let[t,r,...n]=e;if(isNaN(t)||isNaN(r)||n.some(o=>isNaN(o)))return!1;if(!ZYe(t,r)){let[o,i]=A$e([t,r],HYe);return ZYe(o,i)}return!0},ZYe=(e,t)=>e<=180&&e>=-180&&t<=90&&t>=-90,KYe=e=>{let{activeBasemapId:t,is3dEnabled:r,oid:n,operationalLayers:o,mapView:i}=e,a=!0;return a&&(a=t===void 0||YYe(t)),a&&(a=r===void 0||typeof r=="boolean"),a&&(a=n===void 0||YYe(n)||Array.isArray(n)),a&&(a=o===void 0||Array.isArray(o)),a&&(a=i===void 0||OIr(i,r)),a},OIr=e=>{let t,{bearing:r,center:n,pitch:o,zoom:i}=e;return t=n===void 0||NIr(n),t&&(t=o===void 0||!isNaN(o)&&o>=0),t&&(t=r===void 0||!isNaN(r)),t&&(t=i===void 0||!isNaN(i)),t};var LIr=Object.values(Mn);function XYe(e){return Nt(this,null,function*(){let x=e,{id:t,type:r,isVisible:n,opacity:o}=x,i=wn(x,["id","type","isVisible","opacity"]),u={visibility:n?"visible":"none",opacity:o};if(!LIr.includes(r))throw console.error("Unknown layer type: ",r),new Error(`Layer type "${r}" not supported`);if(r===Mn.LEGACY_GEOJSON)return{layer:GQ(i),settings:{layerSettings:u}};if(r===Mn.VECTOR_MAP&&!Ge(t)){if(!Ge(i.properties)||!Ge(i.geojson))throw new Error("Cannot restore local vector map layer without geojson or properties");return{layer:GQ(i),settings:{layerSettings:u}}}if(!Ge(t))throw new Error("Cannot restore remote layers with missing id");let p=yield fw(t),h=aC(t,p),g={layer:h,settings:{layerSettings:u}};if(r===Mn.HISTORIC_MAP&&(g.settings.sourceSettings=yield Gw(h)),r===Mn.VECTOR_MAP){let b=yield Hw(t);h.updateMetadata(it.userRole,b[it.userRole]),h.updateMetadata(it.version,b[it.version]),h.updateMetadata(it.vectorMapId,t),h.setGeoJson(b.geojson)}return g})}var HQ="vk_persistence_container",QYe=()=>{let e=vt(wr),[t,r]=(0,Pv.useState)(void 0),n=Ar(Kp),o=Ar(Bc),i=Ar(Ii),a=Ar(Ln),u=Ar(yv),p=Ar(vv),h=hr.getGeoreferenceApiClient(),[g]=Hf(HQ,{operationalLayers:[],is3dEnabled:!1}),[x,b]=Hf(o1,[]),T=(A,L="danger")=>{i({id:"persistence-controller",type:L,text:A})};return(0,Pv.useEffect)(()=>{let H=(0,JYe.parse)(location.search,{arrayFormat:"comma",parseNumbers:!0}),{b:A,v:L,oid:P,map_id:k,map_view_id:q}=H,U=wn(H,["b","v","oid","map_id","map_view_id"]);if(q!==void 0){let ee=`/map_view/${q}`;h.get(ee).then(ne=>{let{map_view_json:me}=ne.data,ke=JSON.parse(me),{customBasemaps:ue}=ke,Me=wn(ke,["customBasemaps"]);ue!==void 0&&ue.length>0&&b(ue.concat(x).filter((Te,Ee,Ze)=>Ze.findIndex(Qe=>Qe.id===Te.id)===Ee)),Me.mapView&&B7e(Me.mapView)&&(Me.mapView=yR(Me.mapView)),r(Me)})}else{let X=H7e(L),ee={activeBasemapId:A,is3dEnabled:X,cameraOptions:W7e(U),oid:q7e(P,k)},ne=!R7e(ee)||P!==void 0;r(ne?ee:g)}},[]),(0,Pv.useEffect)(()=>{if(t!==void 0){let{activeBasemapId:A,is3dEnabled:L,oid:P,operationalLayers:k,cameraOptions:q={}}=t;if(!KYe(t)){T(de("persistencecontroller-error-persistence-object"));return}try{if(A!==void 0&&n(A),e!==void 0){let U=Object.assign({},hr.getDefaultMapView(),q);if(e.jumpTo(U),U.legacy3dMapView){let H=e.getCanvas(),X=H.height,ee=H.width,ne=e.unproject([ee/2,X*.3]);e.setCenter(ne),T(de("persistencecontroller-deprecated-3d-map-view"),"warning")}if(L&&e.enableTerrain(),k!==void 0&&k.length>0&&P===void 0)try{let H=[];for(let X of k){let ee=XYe(X);H.push(ee)}Promise.all(H).then(X=>{for(let{layer:ne,settings:me}of X)ne.addLayerToMap(e,me);let ee=X.map(({layer:ne})=>ne);a(ee)}).catch(X=>{throw new Error(X)})}catch(H){console.error(H),T(de("persistencecontroller-error-persistence-object"))}else if(P!==void 0){let X=(Array.isArray(P)?P:[P]).map(ee=>K7e(ee));Promise.all(X).then(ee=>{Promise.all(ee.map(ne=>ne.getType()===Mn.VECTOR_MAP?Hw(ne.getMetadata(it.vectorMapId)).then(me=>(ne.updateMetadata(it.userRole,me[it.userRole]),ne.updateMetadata(it.version,me[it.version]),ne.setGeoJson(me.geojson),{layer:ne})):new Promise(me=>Gw(ne).then(ue=>me({layer:ne,sourceSettings:ue}))))).then(ne=>{for(let{layer:me,sourceSettings:ue}of ne)me.addLayerToMap(e,{sourceSettings:ue});a(ee)}),(q===void 0||Object.entries(q).length===0)&&j7e(e,ee)}).catch(ee=>{console.error(ee),T(de("persistencecontroller-error-single-map"),"warning")})}}}catch(U){console.error(U),T(de("persistencecontroller-error-persistence-object"))}}},[e,t]),(0,Pv.useEffect)(()=>{if(t!==void 0){let{searchOptions:A}=t;if(A!==void 0){let{facets:L,timeExtent:P,timeRange:k}=A;L!==void 0&&o(L),k!==void 0&&u(k),P!==void 0&&p(P)}}},[t]),Pv.default.createElement($7e,null)};var jD=Z(we(),1),xat=Z(xt(),1);var sc=Z(we(),1);var Mi=Z(we(),1);var ep=Z(we(),1),Ure=Z(xt(),1);var $a=Z(we(),1),J6=Z(xt(),1);var ar=Z(we(),1),eZe=Z(xt(),1);var PIr={addVectorMap:ar.default.createElement("svg",{width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M5.3888 13.0958C5.31376 12.9926 5.21482 12.9091 5.10047 12.8525C4.19363 12.4067 3.42983 11.7158 2.89568 10.8581C2.36152 10.0003 2.0784 9.01005 2.0784 7.99957C2.0784 6.9891 2.36152 5.99884 2.89568 5.14109C3.42983 4.28334 4.19363 3.59241 5.10047 3.14666C5.21477 3.09032 5.3137 3.00711 5.3888 2.90416L5.4063 2.87916C5.51654 2.73062 5.57378 2.54941 5.56886 2.3645C5.56394 2.17959 5.49715 2.00167 5.37917 1.85921C5.26118 1.71674 5.09883 1.61797 4.91808 1.57868C4.73732 1.53939 4.54861 1.56186 4.38214 1.64249C3.19133 2.22398 2.18778 3.12823 1.48579 4.25223C0.783811 5.37623 0.411621 6.67479 0.411621 7.99999C0.411621 9.32519 0.783811 10.6237 1.48579 11.7477C2.18778 12.8717 3.19133 13.776 4.38214 14.3575C4.54869 14.4376 4.73726 14.4596 4.9178 14.4201C5.09833 14.3805 5.26043 14.2817 5.37826 14.1393C5.4961 13.997 5.56288 13.8192 5.56796 13.6345C5.57304 13.4498 5.51613 13.2686 5.4063 13.12L5.3888 13.0958Z",fill:"currentColor"}),ar.default.createElement("path",{d:"M12.4946 0.5C11.0113 0.5 9.56122 0.939867 8.32785 1.76398C7.09449 2.58809 6.13319 3.75943 5.56554 5.12987C4.99788 6.50032 4.84935 8.00832 5.13874 9.46318C5.42813 10.918 6.14244 12.2544 7.19133 13.3033C8.24022 14.3522 9.5766 15.0665 11.0315 15.3559C12.4863 15.6453 13.9943 15.4968 15.3648 14.9291C16.7352 14.3614 17.9065 13.4001 18.7307 12.1668C19.5548 10.9334 19.9946 9.48336 19.9946 8C19.9924 6.01155 19.2015 4.10518 17.7955 2.69914C16.3895 1.29309 14.4831 0.502206 12.4946 0.5ZM12.4946 13.8333C11.3409 13.8333 10.2131 13.4912 9.25381 12.8502C8.29452 12.2093 7.54685 11.2982 7.10533 10.2323C6.66382 9.16642 6.5483 7.99353 6.77338 6.86197C6.99846 5.73042 7.55404 4.69102 8.36984 3.87521C9.18565 3.0594 10.225 2.50383 11.3566 2.27875C12.4882 2.05367 13.661 2.16919 14.727 2.6107C15.7929 3.05221 16.7039 3.79989 17.3449 4.75917C17.9858 5.71846 18.328 6.84628 18.328 8C18.3262 9.54655 17.7111 11.0293 16.6175 12.1228C15.5239 13.2164 14.0412 13.8316 12.4946 13.8333Z",fill:"currentColor"}),ar.default.createElement("path",{d:"M15.6321 6.9583H13.7446C13.6893 6.9583 13.6364 6.93635 13.5973 6.89728C13.5582 6.85821 13.5363 6.80522 13.5363 6.74997V4.86247C13.5363 4.5862 13.4265 4.32125 13.2312 4.1259C13.0358 3.93055 12.7709 3.8208 12.4946 3.8208C12.2183 3.8208 11.9534 3.93055 11.758 4.1259C11.5627 4.32125 11.4529 4.5862 11.4529 4.86247V6.74997C11.4529 6.80522 11.431 6.85821 11.3919 6.89728C11.3528 6.93635 11.2999 6.9583 11.2446 6.9583H9.3571C9.08083 6.9583 8.81588 7.06805 8.62053 7.2634C8.42518 7.45875 8.31543 7.7237 8.31543 7.99997C8.31543 8.27623 8.42518 8.54119 8.62053 8.73654C8.81588 8.93189 9.08083 9.04163 9.3571 9.04163H11.2446C11.2999 9.04163 11.3528 9.06358 11.3919 9.10265C11.431 9.14172 11.4529 9.19471 11.4529 9.24997V11.1366C11.4529 11.4129 11.5627 11.6779 11.758 11.8732C11.9534 12.0686 12.2183 12.1783 12.4946 12.1783C12.7709 12.1783 13.0358 12.0686 13.2312 11.8732C13.4265 11.6779 13.5363 11.4129 13.5363 11.1366V9.24997C13.5363 9.19471 13.5582 9.14172 13.5973 9.10265C13.6364 9.06358 13.6893 9.04163 13.7446 9.04163H15.6321C15.9084 9.04163 16.1733 8.93189 16.3687 8.73654C16.564 8.54119 16.6738 8.27623 16.6738 7.99997C16.6738 7.7237 16.564 7.45875 16.3687 7.2634C16.1733 7.06805 15.9084 6.9583 15.6321 6.9583Z",fill:"currentColor"})),uploadVectorMap:ar.default.createElement("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M17.6616 10.5C13.9366 10.5 10.9116 13.525 10.9116 17.25C10.9116 20.975 13.9366 24 17.6616 24C21.3866 24 24.4116 20.975 24.4116 17.25C24.4116 13.525 21.3866 10.5 17.6616 10.5ZM17.6616 12C20.5596 12 22.9116 14.352 22.9116 17.25C22.9116 20.148 20.5596 22.5 17.6616 22.5C14.7636 22.5 12.4116 20.148 12.4116 17.25C12.4116 14.352 14.7636 12 17.6616 12ZM8.66162 19.5H2.66162C2.25062 19.5 1.91162 19.161 1.91162 18.75V2.25C1.91162 1.839 2.25062 1.5 2.66162 1.5H13.2896C13.4886 1.5 13.6796 1.579 13.8206 1.719L16.6936 4.591C16.8346 4.731 16.9136 4.922 16.9136 5.121V8.25C16.9136 8.664 17.2496 9 17.6636 9C18.0776 9 18.4136 8.664 18.4136 8.25V5.121C18.4136 4.524 18.1756 3.951 17.7536 3.529L14.8806 0.658C14.4586 0.237 13.8856 0 13.2896 0H2.66162C1.42762 0 0.411621 1.016 0.411621 2.25V18.75C0.411621 19.984 1.42762 21 2.66162 21H8.66162C9.07562 21 9.41162 20.664 9.41162 20.25C9.41162 19.836 9.07562 19.5 8.66162 19.5ZM8.88162 6.53L10.6006 8.25L8.88162 9.97C8.58862 10.262 8.58862 10.738 8.88162 11.03C9.17362 11.323 9.64962 11.323 9.94162 11.03L12.1916 8.78C12.4846 8.487 12.4846 8.013 12.1916 7.72L9.94162 5.47C9.64962 5.177 9.17362 5.177 8.88162 5.47C8.58862 5.762 8.58862 6.238 8.88162 6.53ZM5.88162 5.47L3.63162 7.72C3.33862 8.013 3.33862 8.487 3.63162 8.78L5.88162 11.03C6.17362 11.323 6.64962 11.323 6.94162 11.03C7.23462 10.738 7.23462 10.262 6.94162 9.97L5.22262 8.25L6.94162 6.53C7.23462 6.238 7.23462 5.762 6.94162 5.47C6.64962 5.177 6.17362 5.177 5.88162 5.47Z",fill:"currentColor"}),ar.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.7167 13.6361C18.2138 13.6361 18.6167 14.0391 18.6167 14.5361V19.8171C18.6167 20.3141 18.2138 20.7171 17.7167 20.7171C17.2197 20.7171 16.8167 20.3141 16.8167 19.8171L16.8167 14.5361C16.8167 14.0391 17.2197 13.6361 17.7167 13.6361Z",fill:"currentColor"}),ar.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2572 17.1766C21.2572 17.6736 20.8543 18.0766 20.3572 18.0766H15.0763C14.5792 18.0766 14.1763 17.6736 14.1763 17.1766C14.1763 16.6795 14.5792 16.2766 15.0763 16.2766L20.3572 16.2766C20.8543 16.2766 21.2572 16.6795 21.2572 17.1766Z",fill:"currentColor"})),edit:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},ar.default.createElement("path",{d:"M16.667 9.573a.833.833 0 0 0-.834.834v7.083a.834.834 0 0 1-.833.833H2.5a.833.833 0 0 1-.833-.833V3.323A.833.833 0 0 1 2.5 2.49h8.333a.833.833 0 0 0 0-1.667H2.5a2.5 2.5 0 0 0-2.5 2.5V17.49a2.5 2.5 0 0 0 2.5 2.5H15a2.5 2.5 0 0 0 2.5-2.5v-7.083a.833.833 0 0 0-.833-.834ZM19.513.482a1.706 1.706 0 0 0-2.357 0l-.884.884a.417.417 0 0 0 0 .589l1.767 1.767a.417.417 0 0 0 .59 0l.884-.884a1.666 1.666 0 0 0 0-2.356Z"}),ar.default.createElement("path",{d:"m9.466 8.762 1.767 1.767a.417.417 0 0 0 .59 0l5.303-5.303a.417.417 0 0 0 0-.59l-1.769-1.769a.43.43 0 0 0-.589 0L9.466 8.172a.417.417 0 0 0 0 .59ZM8.624 9.363a.422.422 0 0 0-.303.25l-1.01 2.529a.416.416 0 0 0 .092.449.44.44 0 0 0 .45.092l2.525-1.01a.417.417 0 0 0 .14-.681L9 9.477a.417.417 0 0 0-.376-.114Z"})),"edit-inverse":ar.default.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M7.98408 8.41697C7.87252 8.52907 7.73909 8.61704 7.59208 8.67538L5.53 9.50197C5.31774 9.58487 5.08603 9.60464 4.86279 9.5589C4.63955 9.51315 4.4343 9.40384 4.27175 9.24413C4.11028 9.0827 3.99972 8.87744 3.95379 8.65377C3.90785 8.43011 3.92856 8.19789 4.01333 7.98588L4.83758 5.92497C4.89649 5.77794 4.9846 5.64439 5.09658 5.53238L8.53067 2.09772C8.55074 2.07732 8.56439 2.05149 8.56994 2.02342C8.57549 1.99535 8.57269 1.96627 8.5619 1.93977C8.5511 1.91327 8.53277 1.89052 8.50918 1.87432C8.48559 1.85812 8.45778 1.84919 8.42917 1.84863H1.81883C1.33645 1.84863 0.873821 2.04026 0.532724 2.38136C0.191627 2.72245 0 3.18508 0 3.66747V11.6971C-1.22907e-08 11.9359 0.0470497 12.1724 0.138462 12.393C0.229874 12.6136 0.363857 12.8141 0.532759 12.983C0.701661 13.1518 0.902173 13.2857 1.12284 13.3771C1.34351 13.4684 1.58001 13.5154 1.81883 13.5153H9.84842C10.0872 13.5154 10.3237 13.4684 10.5443 13.3771C10.765 13.2857 10.9654 13.1518 11.1343 12.9829C11.3031 12.8141 11.4371 12.6136 11.5284 12.393C11.6198 12.1723 11.6667 11.9358 11.6667 11.6971V5.08847C11.6666 5.05971 11.658 5.03161 11.642 5.0077C11.6261 4.98379 11.6033 4.96515 11.5768 4.95412C11.5502 4.94308 11.521 4.94014 11.4928 4.94568C11.4646 4.95121 11.4386 4.96497 11.4182 4.98522L7.98408 8.41697Z"}),ar.default.createElement("path",{d:"M10.8312 1.77357C10.7755 1.72081 10.7017 1.69141 10.625 1.69141C10.5483 1.69141 10.4745 1.72081 10.4188 1.77357L5.8612 6.33174C5.83328 6.35975 5.81127 6.39307 5.79645 6.42974L4.97162 8.49241C4.95035 8.54548 4.94514 8.60363 4.95666 8.65964C4.96817 8.71564 4.99589 8.76703 5.03637 8.80741C5.0775 8.84649 5.12878 8.87323 5.18437 8.88457C5.23997 8.89592 5.29763 8.89142 5.35078 8.87157L7.41287 8.04674C7.44959 8.03203 7.48293 8.01 7.51087 7.98199L12.069 3.42441C12.1237 3.36971 12.1544 3.29554 12.1544 3.2182C12.1544 3.14086 12.1237 3.06669 12.069 3.01199L10.8312 1.77357Z"}),ar.default.createElement("path",{d:"M13.513 1.98011C13.7317 1.76133 13.8546 1.46464 13.8546 1.15528C13.8546 0.845921 13.7317 0.549228 13.513 0.330445C13.2908 0.118342 12.9954 0 12.6882 0C12.381 0 12.0856 0.118342 11.8634 0.330445L11.2444 0.949362C11.2354 0.961013 11.2272 0.973295 11.2199 0.986112C11.1818 1.03444 11.1604 1.09377 11.1587 1.15528C11.1587 1.19365 11.1663 1.23164 11.181 1.26707C11.1957 1.30251 11.2173 1.33469 11.2444 1.36178L12.4834 2.59903C12.5324 2.64926 12.5983 2.67943 12.6683 2.68364C12.7383 2.68785 12.8074 2.66579 12.862 2.62178C12.8739 2.61508 12.8852 2.60747 12.8959 2.59903L13.513 1.98011Z"})),close:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},ar.default.createElement("path",{d:"M0 0h30v30H0z"}),ar.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"scale(.98773 1.01212) rotate(45 -7.565 16.188)"}),ar.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"matrix(-.69843 .71568 -.69843 -.71568 19.883 9)"})),add:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 19"},ar.default.createElement("path",{d:"M.875 9A8.625 8.625 0 1 0 9.5.375 8.635 8.635 0 0 0 .875 9Zm3.75-.375a.75.75 0 0 1 .75-.75h2.813a.187.187 0 0 0 .187-.188V4.876a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v2.813a.188.188 0 0 0 .188.187h2.812a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-2.813a.188.188 0 0 0-.187.188v2.812a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-2.813a.188.188 0 0 0-.188-.187H5.376a.75.75 0 0 1-.75-.75v-.75Z"})),delete:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},ar.default.createElement("path",{d:"M14.354 6.748H3.103a.375.375 0 0 0-.375.375V16.5a1.5 1.5 0 0 0 1.5 1.5h9.001a1.5 1.5 0 0 0 1.5-1.5V7.123a.375.375 0 0 0-.375-.375Zm-6.938 8.627a.563.563 0 1 1-1.125 0V9.749a.563.563 0 1 1 1.125 0v5.626Zm3.75 0a.563.563 0 1 1-1.125 0V9.749a.563.563 0 0 1 1.125 0v5.626ZM15.337 1.912l-3.498.675a.188.188 0 0 1-.22-.15l-.178-.92A1.875 1.875 0 0 0 9.244.033l-3.68.714A1.875 1.875 0 0 0 4.08 2.945l.178.92a.187.187 0 0 1-.15.22l-3.498.676a.75.75 0 0 0-.596.878.774.774 0 0 0 .88.595l14.729-2.85a.75.75 0 1 0-.285-1.474v.002Zm-9.788.75a.375.375 0 0 1 .3-.44l3.683-.712a.375.375 0 0 1 .438.3l.179.922a.188.188 0 0 1-.15.22l-4.052.776a.187.187 0 0 1-.22-.15l-.178-.916Z"})),discard:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},ar.default.createElement("path",{d:"m5 5 4.125 4.125M11 5l-6 6"}),ar.default.createElement("path",{d:"M14.667 0H1.333A1.333 1.333 0 0 0 0 1.333v13.334A1.333 1.333 0 0 0 1.333 16h9.334c.177 0 .346-.07.471-.195l4.667-4.667a.667.667 0 0 0 .195-.471V1.333A1.334 1.334 0 0 0 14.667 0ZM1.333 1.667a.333.333 0 0 1 .334-.334h12.666a.333.333 0 0 1 .334.334V10a.333.333 0 0 1-.334.333h-2.666a1.333 1.333 0 0 0-1.334 1.334v2.666a.333.333 0 0 1-.333.334H1.667a.333.333 0 0 1-.334-.334V1.667Z"})),save:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},ar.default.createElement("path",{d:"M12.0122 5.20332C12.0936 5.10023 12.154 4.98212 12.1897 4.85572C12.2255 4.72932 12.236 4.59711 12.2207 4.46665C12.2054 4.33618 12.1645 4.21001 12.1004 4.09534C12.0364 3.98067 11.9503 3.87974 11.8472 3.79832C11.7441 3.7169 11.626 3.65658 11.4996 3.62081C11.3732 3.58504 11.241 3.57451 11.1106 3.58984C10.9801 3.60516 10.8539 3.64603 10.7392 3.71011C10.6246 3.77419 10.5236 3.86023 10.4422 3.96332L6.71356 8.68665C6.69905 8.70522 6.68075 8.72048 6.65989 8.73143C6.63902 8.74238 6.61606 8.74876 6.59254 8.75015C6.56902 8.75153 6.54547 8.7479 6.52346 8.73948C6.50145 8.73106 6.48149 8.71805 6.46489 8.70132L5.04823 7.28465C4.85963 7.1025 4.60702 7.0017 4.34483 7.00398C4.08263 7.00626 3.83182 7.11143 3.64641 7.29684C3.461 7.48224 3.35583 7.73306 3.35355 7.99525C3.35128 8.25745 3.45207 8.51005 3.63423 8.69865L5.44823 10.5133C5.61595 10.6772 5.81604 10.8042 6.0357 10.8863C6.25536 10.9684 6.48974 11.0037 6.72383 10.99C6.95792 10.9762 7.18656 10.9137 7.3951 10.8065C7.60365 10.6993 7.7875 10.5497 7.93489 10.3673L12.0122 5.20332Z"}),ar.default.createElement("path",{d:"M14.6667 0H1.33333C0.979711 0 0.640573 0.140476 0.390524 0.390524C0.140476 0.640573 0 0.979711 0 1.33333L0 14.6667C0 15.0203 0.140476 15.3594 0.390524 15.6095C0.640573 15.8595 0.979711 16 1.33333 16H10.6667C10.8435 16 11.013 15.9297 11.138 15.8047L15.8047 11.138C15.9297 11.013 16 10.8435 16 10.6667V1.33333C16 0.979711 15.8595 0.640573 15.6095 0.390524C15.3594 0.140476 15.0203 0 14.6667 0ZM1.33333 1.66667C1.33333 1.57826 1.36845 1.49348 1.43096 1.43096C1.49348 1.36845 1.57826 1.33333 1.66667 1.33333H14.3333C14.4217 1.33333 14.5065 1.36845 14.569 1.43096C14.6315 1.49348 14.6667 1.57826 14.6667 1.66667V10C14.6667 10.0884 14.6315 10.1732 14.569 10.2357C14.5065 10.2982 14.4217 10.3333 14.3333 10.3333H11.6667C11.313 10.3333 10.9739 10.4738 10.7239 10.7239C10.4738 10.9739 10.3333 11.313 10.3333 11.6667V14.3333C10.3333 14.4217 10.2982 14.5065 10.2357 14.569C10.1732 14.6315 10.0884 14.6667 10 14.6667H1.66667C1.57826 14.6667 1.49348 14.6315 1.43096 14.569C1.36845 14.5065 1.33333 14.4217 1.33333 14.3333V1.66667Z"})),caret:ar.default.createElement("svg",{viewBox:"0 0 28 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M12.9393 10.0607L14 11.1213L15.0607 10.0607L21.0607 4.06066L23.6213 1.5H20H8H4.37868L6.93934 4.06066L12.9393 10.0607Z",fill:"#00655A",stroke:"white",strokeWidth:"3"})),"export-geojson":ar.default.createElement("svg",{viewBox:"0 0 21 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M10.4136 1V16",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M5.91357 11.5L10.4136 16L14.9136 11.5",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M14.1636 4.74902H16.4116C17.2073 4.74902 17.9703 5.06509 18.5329 5.6277C19.0956 6.19031 19.4116 6.95337 19.4116 7.74902V20.499C19.4116 21.2947 19.0956 22.0577 18.5329 22.6203C17.9703 23.183 17.2073 23.499 16.4116 23.499H4.41162C3.61597 23.499 2.85291 23.183 2.2903 22.6203C1.72769 22.0577 1.41162 21.2947 1.41162 20.499V7.74902C1.41162 6.95337 1.72769 6.19031 2.2903 5.6277C2.85291 5.06509 3.61597 4.74902 4.41162 4.74902H6.66162",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"user-roles":ar.default.createElement("svg",{viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("g",{clipPath:"url(#clip0_1491_11619)"},ar.default.createElement("path",{d:"M5.66626 2.74115C6.15948 3.25291 6.75085 3.65994 7.40499 3.9379C8.05913 4.21586 8.76261 4.35905 9.47336 4.35889C10.1932 4.3591 10.9056 4.2125 11.5668 3.92806",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M8.41156 7.54465C10.171 7.54465 11.5973 6.11835 11.5973 4.35892C11.5973 2.59949 10.171 1.17319 8.41156 1.17319C6.65213 1.17319 5.22583 2.59949 5.22583 4.35892C5.22583 6.11835 6.65213 7.54465 8.41156 7.54465Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M2.49536 14.8263C2.49536 13.2572 3.11869 11.7524 4.22822 10.6428C5.33776 9.5333 6.8426 8.90997 8.41172 8.90997C9.98084 8.90997 11.4857 9.5333 12.5952 10.6428C13.7048 11.7524 14.3281 13.2572 14.3281 14.8263",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),ar.default.createElement("defs",null,ar.default.createElement("clipPath",{id:"clip0_1491_11619"},ar.default.createElement("rect",{width:"16",height:"16",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),filter:ar.default.createElement("svg",{viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M10.75 9.75C16.1348 9.75 20.5 7.73528 20.5 5.25C20.5 2.76472 16.1348 0.75 10.75 0.75C5.36522 0.75 1 2.76472 1 5.25C1 7.73528 5.36522 9.75 10.75 9.75Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M1 5.25C1.00123 7.44343 1.74225 9.57232 3.10325 11.2924C4.46425 13.0126 6.36565 14.2233 8.5 14.729V21C8.5 21.5967 8.73705 22.169 9.15901 22.591C9.58097 23.0129 10.1533 23.25 10.75 23.25C11.3467 23.25 11.919 23.0129 12.341 22.591C12.7629 22.169 13 21.5967 13 21V14.729C15.1343 14.2233 17.0358 13.0126 18.3967 11.2924C19.7577 9.57232 20.4988 7.44343 20.5 5.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"metadata-panel":ar.default.createElement("svg",{viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("g",{clipPath:"url(#clip0_1419_7239)"},ar.default.createElement("path",{d:"M12.2444 13.3538C12.7967 13.3538 13.2444 12.906 13.2444 12.3538C13.2444 11.8015 12.7967 11.3538 12.2444 11.3538C11.6921 11.3538 11.2444 11.8015 11.2444 12.3538C11.2444 12.906 11.6921 13.3538 12.2444 13.3538Z",fill:"currentColor"}),ar.default.createElement("path",{d:"M16.0896 11.4357C16.263 11.2498 16.3723 11.0132 16.4013 10.7606C16.4303 10.508 16.3774 10.2528 16.2506 10.0324C16.1237 9.8121 15.9296 9.63826 15.6966 9.53649C15.4636 9.43471 15.2041 9.41037 14.9562 9.46705L14.0155 9.68438C13.9412 9.70131 13.8631 9.6894 13.7972 9.65104C13.7312 9.61268 13.6823 9.55074 13.6602 9.47771L13.3775 8.54905C13.3044 8.30537 13.1546 8.09176 12.9505 7.93991C12.7463 7.78806 12.4986 7.70605 12.2442 7.70605C11.9898 7.70605 11.7421 7.78806 11.538 7.93991C11.3338 8.09176 11.1841 8.30537 11.1109 8.54905L10.8282 9.47771C10.806 9.55065 10.757 9.6125 10.6911 9.65083C10.6252 9.68916 10.5473 9.70115 10.4729 9.68438L9.53288 9.46638C9.28515 9.40991 9.02585 9.43436 8.79304 9.53613C8.56023 9.6379 8.36617 9.81162 8.23938 10.0318C8.11258 10.252 8.05971 10.507 8.08854 10.7595C8.11737 11.0119 8.22637 11.2485 8.39955 11.4344L9.05822 12.145C9.11026 12.2019 9.13913 12.2763 9.13913 12.3534C9.13913 12.4305 9.11026 12.5048 9.05822 12.5617L8.39955 13.271C8.22608 13.4569 8.11682 13.6936 8.08783 13.9461C8.05884 14.1987 8.11165 14.454 8.2385 14.6743C8.36535 14.8947 8.55955 15.0685 8.79254 15.1703C9.02553 15.272 9.28503 15.2964 9.53288 15.2397L10.4735 15.0224C10.548 15.0058 10.626 15.018 10.6919 15.0564C10.7577 15.0948 10.8067 15.1567 10.8289 15.2297L11.1115 16.157C11.1843 16.4011 11.334 16.6151 11.5382 16.7673C11.7423 16.9195 11.9902 17.0017 12.2449 17.0017C12.4996 17.0017 12.7474 16.9195 12.9516 16.7673C13.1558 16.6151 13.3054 16.4011 13.3782 16.157L13.6609 15.229C13.6827 15.1558 13.7315 15.0936 13.7975 15.0551C13.8635 15.0166 13.9417 15.0046 14.0162 15.0217L14.9569 15.239C15.2046 15.2955 15.4639 15.2711 15.6967 15.1693C15.9295 15.0675 16.1236 14.8938 16.2504 14.6736C16.3772 14.4534 16.4301 14.1984 16.4012 13.946C16.3724 13.6935 16.2634 13.457 16.0902 13.271L15.4316 12.561C15.3795 12.5041 15.3506 12.4298 15.3506 12.3527C15.3506 12.2756 15.3795 12.2013 15.4316 12.1444L16.0896 11.4357ZM12.2442 14.3537C11.8487 14.3537 11.462 14.2364 11.1331 14.0167C10.8042 13.7969 10.5478 13.4845 10.3965 13.1191C10.2451 12.7536 10.2055 12.3515 10.2826 11.9635C10.3598 11.5756 10.5503 11.2192 10.83 10.9395C11.1097 10.6598 11.4661 10.4693 11.854 10.3921C12.242 10.315 12.6441 10.3546 13.0096 10.506C13.375 10.6573 13.6874 10.9137 13.9072 11.2426C14.1269 11.5715 14.2442 11.9581 14.2442 12.3537C14.2442 12.8841 14.0335 13.3929 13.6584 13.7679C13.2834 14.143 12.7746 14.3537 12.2442 14.3537Z",fill:"currentColor"}),ar.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.09017 13.782C7.0974 13.8043 7.09994 13.8278 7.09762 13.8511C7.06412 14.1643 7.09939 14.481 7.20095 14.7791C7.2097 14.8042 7.2123 14.831 7.20855 14.8572C7.20479 14.8835 7.19479 14.9085 7.17938 14.9301C7.16396 14.9517 7.14359 14.9693 7.11997 14.9815C7.09635 14.9936 7.07017 14.9999 7.04362 14.9998H2.41162C1.88119 14.9998 1.37248 14.789 0.997407 14.414C0.622335 14.0389 0.411621 13.5302 0.411621 12.9998V3.99976C0.411621 3.46932 0.622335 2.96062 0.997407 2.58554C1.37248 2.21047 1.88119 1.99976 2.41162 1.99976H11.745C12.2754 1.99976 12.7841 2.21047 13.1592 2.58554C13.5342 2.96062 13.745 3.46932 13.745 3.99976V6.95976C13.745 6.99007 13.7368 7.01983 13.7212 7.0458C13.7056 7.07177 13.6831 7.09297 13.6563 7.10709C13.6293 7.12109 13.599 7.12756 13.5686 7.1258C13.5382 7.12404 13.5088 7.11412 13.4836 7.09709C13.4779 7.09315 13.4721 7.08924 13.4664 7.08536C13.1685 6.74277 12.7022 6.52222 12.178 6.52222C11.6135 6.52222 11.1161 6.77796 10.824 7.16642H9.74495C9.70075 7.16642 9.65836 7.18398 9.6271 7.21524C9.59585 7.24649 9.57829 7.28889 9.57829 7.33309V8.28442C9.57831 8.30728 9.57364 8.32989 9.56458 8.35087C9.55553 8.37186 9.54226 8.39076 9.52562 8.40642C9.50904 8.42206 9.48941 8.4341 9.46795 8.44178C9.4465 8.44947 9.42369 8.45264 9.40095 8.45109C9.19328 8.43777 8.98476 8.45393 8.78162 8.49909C8.75723 8.50469 8.73189 8.50466 8.70751 8.499C8.68314 8.49334 8.66038 8.4822 8.64095 8.46642C8.62099 8.45049 8.60495 8.43018 8.59409 8.40706C8.58322 8.38394 8.57782 8.35863 8.57829 8.33309V7.33309C8.57829 7.28889 8.56073 7.24649 8.52947 7.21524C8.49822 7.18398 8.45582 7.16642 8.41162 7.16642H5.74495C5.70075 7.16642 5.65836 7.18398 5.6271 7.21524C5.59585 7.24649 5.57829 7.28889 5.57829 7.33309V9.66842C5.57829 9.71263 5.59585 9.75502 5.6271 9.78627C5.65836 9.81753 5.70075 9.83509 5.74495 9.83509H6.99562C7.02151 9.83498 7.04707 9.84096 7.07023 9.85254C7.09339 9.86412 7.1135 9.88098 7.12895 9.90176C7.1445 9.92219 7.15511 9.94593 7.15997 9.97114C7.16483 9.99635 7.1638 10.0223 7.15695 10.0471C7.10109 10.2487 7.07459 10.4573 7.07829 10.6664C7.07847 10.7102 7.06133 10.7523 7.03061 10.7835C6.99989 10.8147 6.95808 10.8326 6.91429 10.8331H5.74495C5.70075 10.8331 5.65836 10.8506 5.6271 10.8819C5.59585 10.9132 5.57829 10.9556 5.57829 10.9998V13.4998C5.57829 13.544 5.59585 13.5864 5.6271 13.6176C5.65836 13.6489 5.70075 13.6664 5.74495 13.6664H6.93162C6.95502 13.6664 6.97815 13.6714 6.99951 13.6809C7.02088 13.6904 7.03999 13.7043 7.05562 13.7218C7.07118 13.7392 7.08294 13.7598 7.09017 13.782ZM4.52881 9.78427C4.56006 9.75302 4.57762 9.71063 4.57762 9.66642L4.57829 7.33309C4.57829 7.28889 4.56073 7.24649 4.52947 7.21524C4.49822 7.18398 4.45582 7.16642 4.41162 7.16642H1.91162C1.86742 7.16642 1.82503 7.18398 1.79377 7.21524C1.76251 7.24649 1.74495 7.28889 1.74495 7.33309V9.66642C1.74495 9.71051 1.76242 9.7528 1.79353 9.78404C1.82465 9.81528 1.86687 9.83291 1.91095 9.83309H4.41095C4.45516 9.83309 4.49755 9.81553 4.52881 9.78427ZM5.68097 6.15393C5.70127 6.16226 5.72301 6.16651 5.74495 6.16642H8.41162C8.45582 6.16642 8.49822 6.14886 8.52947 6.11761C8.56073 6.08635 8.57829 6.04396 8.57829 5.99976V3.49976C8.57829 3.45555 8.56073 3.41316 8.52947 3.3819C8.49822 3.35065 8.45582 3.33309 8.41162 3.33309H5.74495C5.72301 3.333 5.70127 3.33725 5.68097 3.34558C5.66067 3.35392 5.64222 3.36618 5.62667 3.38167C5.61112 3.39715 5.59879 3.41556 5.59037 3.43582C5.58195 3.45609 5.57762 3.47781 5.57762 3.49976V5.99976C5.57762 6.0217 5.58195 6.04343 5.59037 6.06369C5.59879 6.08396 5.61112 6.10236 5.62667 6.11784C5.64222 6.13333 5.66067 6.14559 5.68097 6.15393ZM12.2164 3.52835C12.0913 3.40333 11.9218 3.33309 11.745 3.33309H9.74495C9.70075 3.33309 9.65836 3.35065 9.6271 3.3819C9.59585 3.41316 9.57829 3.45555 9.57829 3.49976V5.99976C9.57829 6.04396 9.59585 6.08635 9.6271 6.11761C9.65836 6.14886 9.70075 6.16642 9.74495 6.16642H12.245C12.2892 6.16642 12.3315 6.14886 12.3628 6.11761C12.3941 6.08635 12.4116 6.04396 12.4116 5.99976V3.99976C12.4116 3.82294 12.3414 3.65338 12.2164 3.52835ZM4.41162 3.33309H2.41162C2.23481 3.33309 2.06524 3.40333 1.94022 3.52835C1.81519 3.65338 1.74495 3.82294 1.74495 3.99976V5.99976C1.74495 6.04384 1.76242 6.08613 1.79353 6.11737C1.82465 6.14861 1.86687 6.16625 1.91095 6.16642H4.41162C4.45582 6.16642 4.49822 6.14886 4.52947 6.11761C4.56073 6.08635 4.57829 6.04396 4.57829 5.99976V3.49976C4.57829 3.45555 4.56073 3.41316 4.52947 3.3819C4.49822 3.35065 4.45582 3.33309 4.41162 3.33309ZM1.74495 10.9998V12.9998C1.74495 13.1766 1.81519 13.3461 1.94022 13.4712C2.06524 13.5962 2.23481 13.6664 2.41162 13.6664H4.41162C4.45582 13.6664 4.49822 13.6489 4.52947 13.6176C4.56073 13.5864 4.57829 13.544 4.57829 13.4998V10.9998C4.57829 10.9556 4.56073 10.9132 4.52947 10.8819C4.49822 10.8506 4.45582 10.8331 4.41162 10.8331H1.91162C1.86742 10.8331 1.82503 10.8506 1.79377 10.8819C1.76251 10.9132 1.74495 10.9556 1.74495 10.9998Z",fill:"currentColor"})),ar.default.createElement("defs",null,ar.default.createElement("clipPath",{id:"clip0_1419_7239"},ar.default.createElement("rect",{width:"16",height:"18",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),clock:ar.default.createElement("svg",{viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M5.71093 8.93449L3.56128 6.79363L1.41162 8.93449M3.42462 7.6044C3.46047 9.22172 4.09697 10.7684 5.21112 11.9456C6.32527 13.1228 7.838 13.847 9.45702 13.9782C11.076 14.1094 12.6864 13.6383 13.977 12.656C15.2676 11.6736 16.1468 10.2498 16.4447 8.6595C16.7427 7.06923 16.4382 5.42542 15.5901 4.04569C14.742 2.66597 13.4105 1.64826 11.8529 1.18921C10.2953 0.730155 8.62218 0.862343 7.15674 1.56023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"}),ar.default.createElement("path",{d:"M9.04295 8.08988L10.7639 5.10907",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"}),ar.default.createElement("path",{d:"M9.04288 8.0901L12.0237 9.81107",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"})),"image-placeholder":ar.default.createElement("svg",{viewBox:"0 0 66 66",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M59.7357 1.99231H14.2691C11.9863 1.99231 10.1357 3.84287 10.1357 6.12564V51.5923C10.1357 53.8751 11.9863 55.7256 14.2691 55.7256H59.7357C62.0185 55.7256 63.8691 53.8751 63.8691 51.5923V6.12564C63.8691 3.84287 62.0185 1.99231 59.7357 1.99231Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M55.6025 63.9924H6.00247C4.90625 63.9924 3.85492 63.5569 3.07977 62.7817C2.30462 62.0066 1.86914 60.9553 1.86914 59.859V10.259",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M23.5662 18.5256C23.362 18.5262 23.1625 18.5872 22.9929 18.7011C22.8233 18.815 22.6913 18.9766 22.6135 19.1654C22.5357 19.3543 22.5157 19.562 22.5558 19.7622C22.596 19.9625 22.6947 20.1464 22.8393 20.2906C22.9839 20.4349 23.168 20.533 23.3684 20.5726C23.5688 20.6123 23.7764 20.5917 23.965 20.5134C24.1537 20.4351 24.3149 20.3026 24.4284 20.1328C24.5418 19.9629 24.6023 19.7632 24.6023 19.559C24.6023 19.2849 24.4934 19.0221 24.2997 18.8283C24.1059 18.6345 23.843 18.5256 23.569 18.5256",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M55.6022 43.3257L44.9382 27.2443C44.7512 26.9648 44.4986 26.7353 44.2026 26.5757C43.9066 26.4161 43.5761 26.3313 43.2398 26.3286C42.9036 26.3258 42.5717 26.4053 42.2732 26.5601C41.9746 26.7149 41.7184 26.9403 41.5269 27.2167L36.0295 35.07L32.6209 32.3448C32.3972 32.1661 32.1387 32.0359 31.862 31.9624C31.5853 31.8889 31.2963 31.8736 31.0134 31.9177C30.7305 31.9617 30.4598 32.0641 30.2186 32.2182C29.9773 32.3724 29.7707 32.575 29.6118 32.8132L22.5962 43.3257H55.6022Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})),[Tl.POINT]:ar.default.createElement("svg",{viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M5 0C3.67439 0.001577 2.40351 0.54425 1.46616 1.50897C0.528809 2.47369 0.00153226 3.78169 0 5.14601C0 8.69242 3.44105 11.9106 4.49526 12.8125C4.637 12.9337 4.81547 13 4.99974 13C5.18401 13 5.36247 12.9337 5.50421 12.8125C6.55684 11.9106 10 8.69134 10 5.14547C9.99833 3.78124 9.47099 2.47339 8.53366 1.50878C7.59632 0.544176 6.32552 0.00157672 5 0ZM5 7.85443C4.47952 7.85443 3.97073 7.69559 3.53797 7.39798C3.10521 7.10037 2.76792 6.67738 2.56874 6.18248C2.36956 5.68758 2.31745 5.143 2.41899 4.61762C2.52053 4.09224 2.77116 3.60964 3.13919 3.23086C3.50723 2.85208 3.97613 2.59413 4.4866 2.48962C4.99708 2.38512 5.5262 2.43875 6.00706 2.64375C6.48792 2.84874 6.89892 3.19589 7.18808 3.64129C7.47724 4.08669 7.63158 4.61033 7.63158 5.14601C7.63158 5.50168 7.56351 5.85388 7.43126 6.18248C7.29901 6.51108 7.10517 6.80965 6.86081 7.06115C6.61644 7.31265 6.32634 7.51216 6.00706 7.64827C5.68778 7.78438 5.34558 7.85443 5 7.85443Z",fill:"#999999"})),[Tl.LINE_STRING]:ar.default.createElement("svg",{viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M10 2L2 10",stroke:"#999999",strokeWidth:"1.5"}),ar.default.createElement("circle",{cx:"2",cy:"10",r:"2",fill:"#999999"}),ar.default.createElement("circle",{cx:"10",cy:"2",r:"2",fill:"#999999"})),[Tl.POLYGON]:ar.default.createElement("svg",{viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M1.50439 12.282L4.13685 5.51279L10.53 2.50427L9.77783 7.39312L9.0257 11.5298L1.50439 12.282Z",stroke:"#999999",strokeWidth:"1.5"}),ar.default.createElement("circle",{cx:"11",cy:"2",r:"2",fill:"#999999"}),ar.default.createElement("circle",{cx:"9",cy:"11",r:"2",fill:"#999999"}),ar.default.createElement("path",{d:"M4 12C4 13.1046 3.10457 14 2 14C0.89543 14 0 13.1046 0 12C0 10.8954 0.89543 10 2 10C3.10457 10 4 10.8954 4 12Z",fill:"#999999"}),ar.default.createElement("path",{d:"M6 5C6 6.10457 5.10457 7 4 7C2.89543 7 2 6.10457 2 5C2 3.89543 2.89543 3 4 3C5.10457 3 6 3.89543 6 5Z",fill:"#999999"}))},tZe=({name:e})=>{var t;return(t=PIr[e])!=null?t:""};tZe.propTypes={name:eZe.default.string.isRequired};var rZe=tZe;var qr=rZe;var nZe=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o,geometry:i}=n,a=(0,$a.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:u,defaultTime:p}=(0,$a.useMemo)(()=>({defaultTitle:de("geojson-featureview-no-title"),defaultTime:de("geojson-featureview-no-time")}),[]),h=(0,$a.useMemo)(()=>{let{type:b}=i;return b===Tl.MULTI_LINE_STRING?Tl.LINE_STRING:b===Tl.MULTI_POLYGON?Tl.POLYGON:b===Tl.MULTI_POINT?Tl.POINT:b===Tl.GEOMETRY_COLLECTION?Tl.POLYGON:Object.values(Tl).includes(b)?b:Tl.POLYGON},[i]),g=(0,$a.useMemo)(()=>{let b=o[ci.time];return Ge(b)?Qp(b)?Ju(b):de("geojson-featureview-invalid-time"):p},[o[ci.time]]),x=(0,$a.useMemo)(()=>{var b;return(b=o[ci.title])!=null?b:u},[o[ci.title]]);return $a.default.createElement("li",{className:"geojson-feature-item-root",onClick:a,style:r},$a.default.createElement("div",{className:"geojson-feature-item-container"},$a.default.createElement("div",{className:"sub-headline"},$a.default.createElement("div",{className:`type-icon icon--${h}`},$a.default.createElement(qr,{name:h})),$a.default.createElement("div",{className:"type-text"},h)),$a.default.createElement("div",{className:"title"},x),$a.default.createElement("div",{className:"details"},de("geojson-featureview-time")," ",g)))};nZe.propTypes={data:J6.default.object.isRequired,index:J6.default.number.isRequired,style:J6.default.object};var oZe=(0,$a.memo)(nZe);var iZe=oZe;var Zi={INITIAL:1,FILTER:2,EDIT:3},kv=en({key:"geoJsonLayerViewViewModeState",default:Zi.INITIAL}),Rv=en({key:"geoJsonLayerViewLayerState",default:null,dangerouslyAllowMutability:!0}),aZe=lu({key:"geoJsonLayerViewFeaturesState",get:({get:e})=>{var r,n;let t=e(Rv);return e(Xb),(n=(r=t==null?void 0:t.getGeoJson())==null?void 0:r.features)!=null?n:[]},dangerouslyAllowMutability:!0}),Ww=en({key:"geoJsonLayerViewTimeExtentFilterState",default:null}),Fre=lu({key:"geoJsonLayerViewTimeRangeState",get:({get:e})=>{let r=e(aZe).map(({properties:i})=>new Date(i.time)).filter(i=>Qp(i)).sort((i,a)=>i.valueOf()-a.valueOf());if(r.length<2)return[];let n=mR(sw(r[0])),o=mR(sw(r[r.length-1]));return n===o?[]:[n,o]}}),Q6=lu({key:"geoJsonLayerViewIsValidTimeRangeState",get:({get:e})=>e(Fre).length===2}),pA=lu({key:"geoJsonLayerViewFilteredFeaturesState",get:({get:e})=>{let t=e(kv),r=e(aZe);if(t!==Zi.FILTER)return r;let n=r,o=e(Ww);if(o!==null){let[i,a]=o;n=n.filter(({properties:u})=>{let p=u.time,h=mR(sw(new Date(p)));return Number.isNaN(h)?!0:h>=i&&h<=a})}return n}}),sZe=lu({key:"geoJsonLayerViewExistFilteredFeaturesState",get:({get:e})=>e(pA).length>0}),lZe=lu({key:"geoJsonLayerViewMapFilters",get:({get:e})=>{let t=e(kv),r=e(Ww);return t!==Zi.FILTER||r===null?null:{timeExtent:r}}});var uZe=({className:e,onFeatureClick:t})=>{let r=vt(pA),n=(0,ep.useMemo)(()=>({features:r,onFeatureClick:t}),[r,t]),o=(0,ep.useRef)(null),{height:i}=HM(o);return ep.default.createElement(ep.default.Fragment,null,ep.default.createElement("div",{className:e,ref:o},ep.default.createElement("div",{className:"geojson-layer-feature-list-container"},r.length===0&&ep.default.createElement("div",{className:"no-feature-container"},de("geojsonlayerpanel-no-features")),r.length>0&&ep.default.createElement(j6,{height:i,overscanCount:3,innerElementType:"ul",itemData:n,itemCount:r.length,width:340,itemSize:110},iZe))))};uZe.propTypes={className:Ure.default.string,onFeatureClick:Ure.default.func.isRequired};var cZe=uZe;var fZe=cZe;var tp=Z(we(),1),hA=Z(xt(),1);var eq=Z(we(),1),rm=Z(xt(),1);var pZe=(0,eq.forwardRef)(function(t,r){let{children:n,className:o="",onClick:i,type:a="default",disabled:u=!1,title:p,buttonType:h,form:g}=t;return eq.default.createElement("button",{className:`vkf-button-${a} ${o}`,disabled:u,onClick:i,ref:r,title:p,type:h,form:g},n)});pZe.propTypes={children:rm.default.node,className:rm.default.string,onClick:rm.default.func,disabled:rm.default.bool,title:rm.default.string,type:rm.default.oneOf(["primary","default","delete","discard","edit","save"]),buttonType:rm.default.string,form:rm.default.string};var dA=pZe;var mn=dA;var dZe=({isEditAllowed:e=!0,title:t,onCloseClick:r,onEditClick:n})=>{let o=(0,tp.useMemo)(()=>!Ge(n),[n]);return tp.default.createElement("div",{className:"geojson-panel-header-root"},tp.default.createElement("div",{className:"header-buttons"},!o&&tp.default.createElement(mn,{disabled:!e,className:"edit-button",onClick:n,type:"edit"},tp.default.createElement(qr,{name:"edit"})),tp.default.createElement(mn,{className:"close-button",onClick:r},tp.default.createElement(qr,{name:"close"}))),tp.default.createElement("div",{className:"header-info"},tp.default.createElement("span",{className:"header-title"},t)))};dZe.propTypes={isEditAllowed:hA.default.bool,title:hA.default.string.isRequired,onCloseClick:hA.default.func.isRequired,onEditClick:hA.default.func};var hZe=dZe;var cd=hZe;var RIr=Z(we(),1),jIr=Z(Si(),1),DSn=Z(_X(),1);var Bre=Z(we(),1);var Vre=Z(we(),1);var tq=Z(we(),1);var Gre=Z(we(),1);var p1=hr;var $w="vk2-admin",mA="vk2-editor",rq="owner",mZe="editor",nq=()=>{let e=p1.getUserRole();return e===$w||e===mA},gZe=e=>{if(!Ge(e.getMetadata(it.vectorMapId)))return!0;let r=e.getMetadata(it.userRole),n=p1.getUserRole();return n===$w?!0:n===mA?r===mZe||r===rq:!1},oq=e=>{if(e===null)return!0;let{type:t,layerRole:r,id:n}=e;if(t===Hi.LOCAL)return!0;let i=p1.getUserRole();return i===$w?!0:i===mA?r===rq||!Ge(n):!1},vZe=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=p1.getUserRole();return n===$w?!0:n===mA?(t===mZe||t===rq)&&Ge(r):!1},gA=e=>{if(e===null)return!0;let{id:t}=e;return!!(p1.getUserRole()===$w&&Ge(t))},vA=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=p1.getUserRole();return n===$w&&Ge(r)?!0:n===mA?t===rq&&Ge(r):!1};var qo=Z(we(),1),gd=Z(xt(),1);function el(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yZe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,IP(n.key),n)}}function tl(e,t,r){return t&&yZe(e.prototype,t),r&&yZe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&mw(e,t)}function rp(e){return rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rp(e)}function Hre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Hre=function(){return!!e})()}function _Ze(e,t){if(t&&(no(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jr(e)}function nl(e){var t=Hre();return function(){var r,n=rp(e);if(t){var o=rp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _Ze(this,r)}}var rne=Z(we());var Wre={},qIr=[],zIr=function(t){qIr.push(t)};function FIr(e,t){if(0)var r}function UIr(e,t){if(0)var r}function BIr(){Wre={}}function xZe(e,t,r){!t&&!Wre[r]&&(e(!1,r),Wre[r]=!0)}function iq(e,t){xZe(FIr,e,t)}function VIr(e,t){xZe(UIr,e,t)}iq.preMessage=zIr;iq.resetWarned=BIr;iq.noteOnce=VIr;var fd=iq;var bZe=Z(we()),GIr=function(t){var r,n,o=t.className,i=t.included,a=t.vertical,u=t.style,p=t.length,h=t.offset,g=t.reverse;p<0&&(g=!g,p=Math.abs(p),h=100-h);var x=a?(r={},Ot(r,g?"top":"bottom","".concat(h,"%")),Ot(r,g?"bottom":"top","auto"),Ot(r,"height","".concat(p,"%")),r):(n={},Ot(n,g?"right":"left","".concat(h,"%")),Ot(n,g?"left":"right","auto"),Ot(n,"width","".concat(p,"%")),n),b=qt(qt({},u),x);return i?bZe.default.createElement("div",{className:o,style:b}):null},aq=GIr;function Al(e,t){if(e==null)return{};var r,n,o=dw(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function yA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function wZe(e){if(Array.isArray(e))return yA(e)}function $re(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _A(e,t){if(e){if(typeof e=="string")return yA(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yA(e,t):void 0}}function EZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xc(e){return wZe(e)||$re(e)||_A(e)||EZe()}function SZe(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=rp(e))!==null;);return e}function Yw(){return Yw=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=SZe(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Yw.apply(null,arguments)}var Kw=Z(we());var Yre=Z(Si());function Dl(e,t,r,n){var o=Yre.default.unstable_batchedUpdates?function(a){Yre.default.unstable_batchedUpdates(r,a)}:r;return e!=null&&e.addEventListener&&e.addEventListener(t,o,n),{remove:function(){e!=null&&e.removeEventListener&&e.removeEventListener(t,o,n)}}}var LZe=Z(Zn());var Zre=Z(we()),IZe=Z(Zn());var HIr=function(t,r,n,o,i,a){fd(n?o>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var u=Object.keys(r).map(parseFloat).sort(function(h,g){return h-g});if(n&&o)for(var p=i;p<=a;p+=o)u.indexOf(p)===-1&&u.push(p);return u},WIr=function(t){var r=t.prefixCls,n=t.vertical,o=t.reverse,i=t.marks,a=t.dots,u=t.step,p=t.included,h=t.lowerBound,g=t.upperBound,x=t.max,b=t.min,T=t.dotStyle,A=t.activeDotStyle,L=x-b,P=HIr(n,i,a,u,b,x).map(function(k){var q,U="".concat(Math.abs(k-b)/L*100,"%"),H=!p&&k===g||p&&k<=g&&k>=h,X=n?qt(qt({},T),{},Ot({},o?"top":"bottom",U)):qt(qt({},T),{},Ot({},o?"right":"left",U));H&&(X=qt(qt({},X),A));var ee=(0,IZe.default)((q={},Ot(q,"".concat(r,"-dot"),!0),Ot(q,"".concat(r,"-dot-active"),H),Ot(q,"".concat(r,"-dot-reverse"),o),q));return Zre.default.createElement("span",{className:ee,style:X,key:k})});return Zre.default.createElement("div",{className:"".concat(r,"-step")},P)},TZe=WIr;var sq=Z(we()),MZe=Z(Zn()),$Ir=function(t){var r=t.className,n=t.vertical,o=t.reverse,i=t.marks,a=t.included,u=t.upperBound,p=t.lowerBound,h=t.max,g=t.min,x=t.onClickLabel,b=Object.keys(i),T=h-g,A=b.map(parseFloat).sort(function(L,P){return L-P}).map(function(L){var P,k=i[L],q=no(k)==="object"&&!sq.default.isValidElement(k),U=q?k.label:k;if(!U&&U!==0)return null;var H=!a&&L===u||a&&L<=u&&L>=p,X=(0,MZe.default)((P={},Ot(P,"".concat(r,"-text"),!0),Ot(P,"".concat(r,"-text-active"),H),P)),ee=Ot({marginBottom:"-50%"},o?"top":"bottom","".concat((L-g)/T*100,"%")),ne=Ot({transform:"translateX(".concat(o?"50%":"-50%",")"),msTransform:"translateX(".concat(o?"50%":"-50%",")")},o?"right":"left","".concat((L-g)/T*100,"%")),me=n?ee:ne,ue=q?qt(qt({},me),k.style):me;return sq.default.createElement("span",{className:X,style:ue,key:L,onMouseDown:function(ke){return x(ke,L)},onTouchStart:function(ke){return x(ke,L)}},U)});return sq.default.createElement("div",{className:r},A)},CZe=$Ir;var Kre=Z(we()),AZe=Z(Zn());var Zw=function(e){rl(r,e);var t=nl(r);function r(){var n;return el(this,r),n=t.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(o){n.handle=o},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(o){o.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return tl(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Dl(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(o){this.setState({clickFocused:o})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var o,i,a=this.props,u=a.prefixCls,p=a.vertical,h=a.reverse,g=a.offset,x=a.style,b=a.disabled,T=a.min,A=a.max,L=a.value,P=a.tabIndex,k=a.ariaLabel,q=a.ariaLabelledBy,U=a.ariaValueTextFormatter,H=Al(a,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),X=(0,AZe.default)(this.props.className,Ot({},"".concat(u,"-handle-click-focused"),this.state.clickFocused)),ee=p?(o={},Ot(o,h?"top":"bottom","".concat(g,"%")),Ot(o,h?"bottom":"top","auto"),Ot(o,"transform",h?null:"translateY(+50%)"),o):(i={},Ot(i,h?"right":"left","".concat(g,"%")),Ot(i,h?"left":"right","auto"),Ot(i,"transform","translateX(".concat(h?"+":"-","50%)")),i),ne=qt(qt({},x),ee),me=P||0;(b||P===null)&&(me=null);var ue;return U&&(ue=U(L)),Kre.default.createElement("div",Pn({ref:this.setHandleRef,tabIndex:me},H,{className:X,style:ne,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":T,"aria-valuemax":A,"aria-valuenow":L,"aria-disabled":!!b,"aria-label":k,"aria-labelledby":q,"aria-valuetext":ue}))}}]),r}(Kre.default.Component);var NZe=Z(Si());var $r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=$r.F1&&r<=$r.F12)return!1;switch(r){case $r.ALT:case $r.CAPS_LOCK:case $r.CONTEXT_MENU:case $r.CTRL:case $r.DOWN:case $r.END:case $r.ESC:case $r.HOME:case $r.INSERT:case $r.LEFT:case $r.MAC_FF_META:case $r.META:case $r.NUMLOCK:case $r.NUM_CENTER:case $r.PAGE_DOWN:case $r.PAGE_UP:case $r.PAUSE:case $r.PRINT_SCREEN:case $r.RIGHT:case $r.SHIFT:case $r.UP:case $r.WIN_KEY:case $r.WIN_KEY_RIGHT:return!1;default:return!0;}},isCharacterKey:function(t){if(t>=$r.ZERO&&t<=$r.NINE||t>=$r.NUM_ZERO&&t<=$r.NUM_MULTIPLY||t>=$r.A&&t<=$r.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case $r.SPACE:case $r.QUESTION_MARK:case $r.NUM_PLUS:case $r.NUM_MINUS:case $r.NUM_PERIOD:case $r.NUM_DIVISION:case $r.SEMICOLON:case $r.DASH:case $r.EQUALS:case $r.COMMA:case $r.PERIOD:case $r.SLASH:case $r.APOSTROPHE:case $r.SINGLE_QUOTE:case $r.OPEN_SQUARE_BRACKET:case $r.BACKSLASH:case $r.CLOSE_SQUARE_BRACKET:return!0;default:return!1;}}},nm=$r;function lq(e,t){try{return Object.keys(t).some(function(r){return e.target===(0,NZe.findDOMNode)(t[r])})}catch(r){return!1}}function uq(e,t){var r=t.min,n=t.max;return e<r||e>n}function Xre(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}function DZe(e,t){var r=t.marks,n=t.step,o=t.min,i=t.max,a=Object.keys(r).map(parseFloat);if(n!==null){var u=Math.pow(10,OZe(n)),p=Math.floor((i*u-o*u)/(n*u)),h=Math.min((e-o)/n,p),g=Math.round(h)*n+o;a.push(g)}var x=a.map(function(b){return Math.abs(e-b)});return a[x.indexOf(Math.min.apply(Math,Xc(x)))]}function OZe(e){var t=e.toString(),r=0;return t.indexOf(".")>=0&&(r=t.length-t.indexOf(".")-1),r}function Jre(e,t){return e?t.clientY:t.pageX}function Qre(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function ene(e,t){var r=t.getBoundingClientRect();return e?r.top+r.height*.5:window.pageXOffset+r.left+r.width*.5}function xA(e,t){var r=t.max,n=t.min;return e<=n?n:e>=r?r:e}function cq(e,t){var r=t.step,n=isFinite(DZe(e,t))?DZe(e,t):0;return r===null?n:parseFloat(n.toFixed(OZe(r)))}function om(e){e.stopPropagation(),e.preventDefault()}function YIr(e,t,r){var n={increase:function(u,p){return u+p},decrease:function(u,p){return u-p}},o=n[e](Object.keys(r.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(r.marks)[o];return r.step?n[e](t,r.step):Object.keys(r.marks).length&&r.marks[i]?r.marks[i]:t}function fq(e,t,r){var n="increase",o="decrease",i=n;switch(e.keyCode){case nm.UP:i=t&&r?o:n;break;case nm.RIGHT:i=!t&&r?o:n;break;case nm.DOWN:i=t&&r?n:o;break;case nm.LEFT:i=!t&&r?n:o;break;case nm.END:return function(a,u){return u.max};case nm.HOME:return function(a,u){return u.min};case nm.PAGE_UP:return function(a,u){return a+u.step*2};case nm.PAGE_DOWN:return function(a,u){return a-u.step*2};default:return;}return function(a,u){return YIr(i,a,u)}}function pd(){}function bA(e){var t;return t=function(r){rl(o,r);var n=nl(o);function o(i){var a;el(this,o),a=n.call(this,i),a.onDown=function(x,b){var T=b,A=a.props,L=A.draggableTrack,P=A.vertical,k=a.state.bounds,q=L&&a.positionGetValue?a.positionGetValue(T)||[]:[],U=lq(x,a.handlesRefs);if(a.dragTrack=L&&k.length>=2&&!U&&!q.map(function(X,ee){var ne=ee?!0:X>=k[ee];return ee===q.length-1?X<=k[ee]:ne}).some(function(X){return!X}),a.dragTrack)a.dragOffset=T,a.startBounds=Xc(k);else{if(!U)a.dragOffset=0;else{var H=ene(P,x.target);a.dragOffset=T-H,T=H}a.onStart(T)}},a.onMouseDown=function(x){if(x.button===0){a.removeDocumentEvents();var b=a.props.vertical,T=Jre(b,x);a.onDown(x,T),a.addDocumentMouseEvents()}},a.onTouchStart=function(x){if(!Xre(x)){var b=a.props.vertical,T=Qre(b,x);a.onDown(x,T),a.addDocumentTouchEvents(),om(x)}},a.onFocus=function(x){var b=a.props,T=b.onFocus,A=b.vertical;if(lq(x,a.handlesRefs)&&!a.dragTrack){var L=ene(A,x.target);a.dragOffset=0,a.onStart(L),om(x),T&&T(x)}},a.onBlur=function(x){var b=a.props.onBlur;a.dragTrack||a.onEnd(),b&&b(x)},a.onMouseUp=function(){a.handlesRefs[a.prevMovedHandleIndex]&&a.handlesRefs[a.prevMovedHandleIndex].clickFocus()},a.onMouseMove=function(x){if(!a.sliderRef){a.onEnd();return}var b=Jre(a.props.vertical,x);a.onMove(x,b-a.dragOffset,a.dragTrack,a.startBounds)},a.onTouchMove=function(x){if(Xre(x)||!a.sliderRef){a.onEnd();return}var b=Qre(a.props.vertical,x);a.onMove(x,b-a.dragOffset,a.dragTrack,a.startBounds)},a.onKeyDown=function(x){a.sliderRef&&lq(x,a.handlesRefs)&&a.onKeyboard(x)},a.onClickMarkLabel=function(x,b){x.stopPropagation(),a.onChange({value:b}),a.setState({value:b},function(){return a.onEnd(!0)})},a.saveSlider=function(x){a.sliderRef=x};var u=i.step,p=i.max,h=i.min,g=isFinite(p-h)?(p-h)%u===0:!0;return fd(u&&Math.floor(u)===u?g:!0,"Slider[max] - Slider[min] (".concat(p-h,") should be a multiple of Slider[step] (").concat(u,")")),a.handlesRefs={},a}return tl(o,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var a=this.props,u=a.autoFocus,p=a.disabled;u&&!p&&this.focus()}},{key:"componentWillUnmount",value:function(){Yw(rp(o.prototype),"componentWillUnmount",this)&&Yw(rp(o.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var a=this.sliderRef,u=this.props,p=u.vertical,h=u.reverse,g=a.getBoundingClientRect();return p?h?g.bottom:g.top:window.pageXOffset+(h?g.right:g.left)}},{key:"getSliderLength",value:function(){var a=this.sliderRef;if(!a)return 0;var u=a.getBoundingClientRect();return this.props.vertical?u.height:u.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Dl(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Dl(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Dl(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Dl(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var a;this.props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()}},{key:"blur",value:function(){var a=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(u){var p,h;(p=a.handlesRefs[u])===null||p===void 0||(h=p.blur)===null||h===void 0||h.call(p)})}},{key:"calcValue",value:function(a){var u=this.props,p=u.vertical,h=u.min,g=u.max,x=Math.abs(Math.max(a,0)/this.getSliderLength()),b=p?(1-x)*(g-h)+h:x*(g-h)+h;return b}},{key:"calcValueByPos",value:function(a){var u=this.props.reverse?-1:1,p=u*(a-this.getSliderStart()),h=this.trimAlignValue(this.calcValue(p));return h}},{key:"calcOffset",value:function(a){var u=this.props,p=u.min,h=u.max,g=(a-p)/(h-p);return Math.max(0,g*100)}},{key:"saveHandle",value:function(a,u){this.handlesRefs[a]=u}},{key:"render",value:function(){var a,u=this.props,p=u.prefixCls,h=u.className,g=u.marks,x=u.dots,b=u.step,T=u.included,A=u.disabled,L=u.vertical,P=u.reverse,k=u.min,q=u.max,U=u.children,H=u.maximumTrackStyle,X=u.style,ee=u.railStyle,ne=u.dotStyle,me=u.activeDotStyle,ue=Yw(rp(o.prototype),"render",this).call(this),Me=ue.tracks,ke=ue.handles,Te=(0,LZe.default)(p,(a={},Ot(a,"".concat(p,"-with-marks"),Object.keys(g).length),Ot(a,"".concat(p,"-disabled"),A),Ot(a,"".concat(p,"-vertical"),L),Ot(a,h,h),a));return Kw.default.createElement("div",{ref:this.saveSlider,className:Te,onTouchStart:A?pd:this.onTouchStart,onMouseDown:A?pd:this.onMouseDown,onMouseUp:A?pd:this.onMouseUp,onKeyDown:A?pd:this.onKeyDown,onFocus:A?pd:this.onFocus,onBlur:A?pd:this.onBlur,style:X},Kw.default.createElement("div",{className:"".concat(p,"-rail"),style:qt(qt({},H),ee)}),Me,Kw.default.createElement(TZe,{prefixCls:p,vertical:L,reverse:P,marks:g,dots:x,step:b,included:T,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:k,dotStyle:ne,activeDotStyle:me}),ke,Kw.default.createElement(CZe,{className:"".concat(p,"-mark"),onClickLabel:A?pd:this.onClickMarkLabel,vertical:L,marks:g,included:T,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:k,reverse:P}),U)}}]),o}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=qt(qt({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var o=n.index,i=Al(n,["index"]);return delete i.dragging,i.value===null?null:Kw.default.createElement(Zw,Pn({},i,{key:o}))},onBeforeChange:pd,onChange:pd,onAfterChange:pd,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),t}var ZIr=function(e){rl(r,e);var t=nl(r);function r(n){var o;el(this,r),o=t.call(this,n),o.positionGetValue=function(u){return[]},o.onEnd=function(u){var p=o.state.dragging;o.removeDocumentEvents(),(p||u)&&o.props.onAfterChange(o.getValue()),o.setState({dragging:!1})};var i=n.defaultValue!==void 0?n.defaultValue:n.min,a=n.value!==void 0?n.value:i;return o.state={value:o.trimAlignValue(a),dragging:!1},fd(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),fd(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),o}return tl(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this.props,u=a.min,p=a.max,h=a.value,g=a.onChange;if("min"in this.props||"max"in this.props){var x=h!==void 0?h:i.value,b=this.trimAlignValue(x,this.props);b!==i.value&&(this.setState({value:b}),!(u===o.min&&p===o.max)&&uq(x,this.props)&&g(b))}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i),u=o.value>this.props.max?qt(qt({},o),{},{value:this.props.max}):o;a&&this.setState(u);var p=u.value;i.onChange(p)}},{key:"onStart",value:function(o){this.setState({dragging:!0});var i=this.props,a=this.getValue();i.onBeforeChange(a);var u=this.calcValueByPos(o);this.startValue=u,this.startPosition=o,u!==a&&(this.prevMovedHandleIndex=0,this.onChange({value:u}))}},{key:"onMove",value:function(o,i){om(o);var a=this.state.value,u=this.calcValueByPos(i);u!==a&&this.onChange({value:u})}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,u=i.vertical,p=fq(o,u,a);if(p){om(o);var h=this.state,g=h.value,x=p(g,this.props),b=this.trimAlignValue(x);if(b===g)return;this.onChange({value:b}),this.props.onAfterChange(b),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var o=this.props.startPoint||this.props.min;return this.state.value>o?o:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o===null)return null;var a=qt(qt({},this.props),i),u=xA(o,a);return cq(u,a)}},{key:"render",value:function(){var o=this,i=this.props,a=i.prefixCls,u=i.vertical,p=i.included,h=i.disabled,g=i.minimumTrackStyle,x=i.trackStyle,b=i.handleStyle,T=i.tabIndex,A=i.ariaLabelForHandle,L=i.ariaLabelledByForHandle,P=i.ariaValueTextFormatterForHandle,k=i.min,q=i.max,U=i.startPoint,H=i.reverse,X=i.handle,ee=this.state,ne=ee.value,me=ee.dragging,ue=this.calcOffset(ne),Me=X({className:"".concat(a,"-handle"),prefixCls:a,vertical:u,offset:ue,value:ne,dragging:me,disabled:h,min:k,max:q,reverse:H,index:0,tabIndex:T,ariaLabel:A,ariaLabelledBy:L,ariaValueTextFormatter:P,style:b[0]||b,ref:function(Qe){return o.saveHandle(0,Qe)}}),ke=U!==void 0?this.calcOffset(U):0,Te=x[0]||x,Ee=rne.default.createElement(aq,{className:"".concat(a,"-track"),vertical:u,included:p,offset:ke,reverse:H,length:ue-ke,style:qt(qt({},g),Te)});return{tracks:Ee,handles:Me}}}]),r}(rne.default.Component),PZe=bA(ZIr);var nne=Z(we()),one=Z(Zn());var wA=function(t){var r=t.value,n=t.handle,o=t.bounds,i=t.props,a=i.allowCross,u=i.pushable,p=Number(u),h=xA(r,i),g=h;return!a&&n!=null&&o!==void 0&&(n>0&&h<=o[n-1]+p&&(g=o[n-1]+p),n<o.length-1&&h>=o[n+1]-p&&(g=o[n+1]-p)),cq(g,i)},ine=function(e){rl(r,e);var t=nl(r);function r(n){var o;el(this,r),o=t.call(this,n),o.positionGetValue=function(T){var A=o.getValue(),L=o.calcValueByPos(T),P=o.getClosestBound(L),k=o.getBoundNeedMoving(L,P),q=A[k];if(L===q)return null;var U=Xc(A);return U[k]=L,U},o.onEnd=function(T){var A=o.state.handle;o.removeDocumentEvents(),A||(o.dragTrack=!1),(A!==null||T)&&o.props.onAfterChange(o.getValue()),o.setState({handle:null})};var i=n.count,a=n.min,u=n.max,p=Array.apply(void 0,Xc(Array(i+1))).map(function(){return a}),h="defaultValue"in n?n.defaultValue:p,g=n.value!==void 0?n.value:h,x=g.map(function(T,A){return wA({value:T,handle:A,props:n})}),b=x[0]===u?0:x.length-1;return o.state={handle:null,recent:b,bounds:x},o}return tl(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this,u=this.props,p=u.onChange,h=u.value,g=u.min,x=u.max;if(("min"in this.props||"max"in this.props)&&!(g===o.min&&x===o.max)){var b=h||i.bounds;if(b.some(function(A){return uq(A,a.props)})){var T=b.map(function(A){return xA(A,a.props)});p(T)}}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i);if(a)this.setState(o);else{var u={};["handle","recent"].forEach(function(g){o[g]!==void 0&&(u[g]=o[g])}),Object.keys(u).length&&this.setState(u)}var p=qt(qt({},this.state),o),h=p.bounds;i.onChange(h)}},{key:"onStart",value:function(o){var i=this.props,a=this.state,u=this.getValue();i.onBeforeChange(u);var p=this.calcValueByPos(o);this.startValue=p,this.startPosition=o;var h=this.getClosestBound(p);this.prevMovedHandleIndex=this.getBoundNeedMoving(p,h),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var g=u[this.prevMovedHandleIndex];if(p!==g){var x=Xc(a.bounds);x[this.prevMovedHandleIndex]=p,this.onChange({bounds:x})}}},{key:"onMove",value:function(o,i,a,u){om(o);var p=this.state,h=this.props,g=h.max||100,x=h.min||0;if(a){var b=h.vertical?-i:i;b=h.reverse?-b:b;var T=g-Math.max.apply(Math,Xc(u)),A=x-Math.min.apply(Math,Xc(u)),L=Math.min(Math.max(b/(this.getSliderLength()/(g-x)),A),T),P=u.map(function(U){return Math.floor(Math.max(Math.min(U+L,g),x))});p.bounds.map(function(U,H){return U===P[H]}).some(function(U){return!U})&&this.onChange({bounds:P});return}var k=this.calcValueByPos(i),q=p.bounds[p.handle];k!==q&&this.moveTo(k)}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,u=i.vertical,p=fq(o,u,a);if(p){om(o);var h=this.state,g=this.props,x=h.bounds,b=h.handle,T=x[b===null?h.recent:b],A=p(T,g),L=wA({value:A,handle:b,bounds:h.bounds,props:g});if(L===T)return;var P=!0;this.moveTo(L,P)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(o){for(var i=this.state.bounds,a=0,u=1;u<i.length-1;u+=1)o>=i[u]&&(a=u);return Math.abs(i[a+1]-o)<Math.abs(i[a]-o)&&(a+=1),a}},{key:"getBoundNeedMoving",value:function(o,i){var a=this.state,u=a.bounds,p=a.recent,h=i,g=u[i+1]===u[i];return g&&u[p]===u[i]&&(h=p),g&&o!==u[i+1]&&(h=o<u[i+1]?i:i+1),h}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var o=this.state.bounds;return o[o.length-1]}},{key:"getPoints",value:function(){var o=this.props,i=o.marks,a=o.step,u=o.min,p=o.max,h=this.internalPointsCache;if(!h||h.marks!==i||h.step!==a){var g=qt({},i);if(a!==null)for(var x=u;x<=p;x+=a)g[x]=x;var b=Object.keys(g).map(parseFloat);b.sort(function(T,A){return T-A}),this.internalPointsCache={marks:i,step:a,points:b}}return this.internalPointsCache.points}},{key:"moveTo",value:function(o,i){var a=this,u=this.state,p=this.props,h=Xc(u.bounds),g=u.handle===null?u.recent:u.handle;h[g]=o;var x=g;p.pushable!==!1?this.pushSurroundingHandles(h,x):p.allowCross&&(h.sort(function(b,T){return b-T}),x=h.indexOf(o)),this.onChange({recent:x,handle:x,bounds:h}),i&&(this.props.onAfterChange(h),this.setState({},function(){a.handlesRefs[x].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(o,i){var a=o[i],u=this.props.pushable,p=Number(u),h=0;if(o[i+1]-a<p&&(h=1),a-o[i-1]<p&&(h=-1),h!==0){var g=i+h,x=h*(o[g]-a);this.pushHandle(o,g,h,p-x)||(o[i]=o[g]-h*p)}}},{key:"pushHandle",value:function(o,i,a,u){for(var p=o[i],h=o[i];a*(h-p)<u;){if(!this.pushHandleOnePoint(o,i,a))return o[i]=p,!1;h=o[i]}return!0}},{key:"pushHandleOnePoint",value:function(o,i,a){var u=this.getPoints(),p=u.indexOf(o[i]),h=p+a;if(h>=u.length||h<0)return!1;var g=i+a,x=u[h],b=this.props.pushable,T=Number(b),A=a*(o[g]-x);return this.pushHandle(o,g,a,T-A)?(o[i]=x,!0):!1}},{key:"trimAlignValue",value:function(o){var i=this.state,a=i.handle,u=i.bounds;return wA({value:o,handle:a,bounds:u,props:this.props})}},{key:"render",value:function(){var o=this,i=this.state,a=i.handle,u=i.bounds,p=this.props,h=p.prefixCls,g=p.vertical,x=p.included,b=p.disabled,T=p.min,A=p.max,L=p.reverse,P=p.handle,k=p.trackStyle,q=p.handleStyle,U=p.tabIndex,H=p.ariaLabelGroupForHandles,X=p.ariaLabelledByGroupForHandles,ee=p.ariaValueTextFormatterGroupForHandles,ne=u.map(function(ke){return o.calcOffset(ke)}),me="".concat(h,"-handle"),ue=u.map(function(ke,Te){var Ee,Ze=U[Te]||0;(b||U[Te]===null)&&(Ze=null);var Qe=a===Te;return P({className:(0,one.default)((Ee={},Ot(Ee,me,!0),Ot(Ee,"".concat(me,"-").concat(Te+1),!0),Ot(Ee,"".concat(me,"-dragging"),Qe),Ee)),prefixCls:h,vertical:g,dragging:Qe,offset:ne[Te],value:ke,index:Te,tabIndex:Ze,min:T,max:A,reverse:L,disabled:b,style:q[Te],ref:function(ze){return o.saveHandle(Te,ze)},ariaLabel:H[Te],ariaLabelledBy:X[Te],ariaValueTextFormatter:ee[Te]})}),Me=u.slice(0,-1).map(function(ke,Te){var Ee,Ze=Te+1,Qe=(0,one.default)((Ee={},Ot(Ee,"".concat(h,"-track"),!0),Ot(Ee,"".concat(h,"-track-").concat(Ze),!0),Ee));return nne.default.createElement(aq,{className:Qe,vertical:g,reverse:L,included:x,offset:ne[Ze-1],length:ne[Ze]-ne[Ze-1],style:k[Te],key:Ze})});return{tracks:Me,handles:ue}}}],[{key:"getDerivedStateFromProps",value:function(o,i){if(!("value"in o||"min"in o||"max"in o))return null;var a=o.value||i.bounds,u=a.map(function(p,h){return wA({value:p,handle:h,bounds:i.bounds,props:o})});if(i.bounds.length===u.length){if(u.every(function(p,h){return p===i.bounds[h]}))return null}else u=a.map(function(p,h){return wA({value:p,handle:h,props:o})});return qt(qt({},i),{},{bounds:u})}}]),r}(nne.default.Component);ine.displayName="Range";ine.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var pq=bA(ine);var PA=Z(we());var sm=Z(we());var Une=Z(we()),oE=Z(we());var oc=Z(we()),_Xe=Z(Si());var RZe=function(t){return+setTimeout(t,16)},jZe=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(RZe=function(t){return window.requestAnimationFrame(t)},jZe=function(t){return window.cancelAnimationFrame(t)});var kZe=0,ane=new Map;function qZe(e){ane.delete(e)}var zZe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;kZe+=1;var n=kZe;function o(i){if(i===0)qZe(n),t();else{var a=RZe(function(){o(i-1)});ane.set(n,a)}}return o(r),n};zZe.cancel=function(e){var t=ane.get(e);return qZe(e),jZe(t)};var xu=zZe;function d1(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var UZe=Z(we()),sne=Z(Si());function FZe(e){return e instanceof HTMLElement||e instanceof SVGElement}function KIr(e){return e&&no(e)==="object"&&FZe(e.nativeElement)?e.nativeElement:FZe(e)?e:null}function EA(e){var t=KIr(e);if(t)return t;if(e instanceof UZe.default.Component){var r;return(r=sne.default.findDOMNode)===null||r===void 0?void 0:r.call(sne.default,e)}return null}var Eq=Z(we()),h1=Z(HZe());var QIr=Z(we());var cne=function(t,r){typeof t=="function"?t(r):no(t)==="object"&&t&&"current"in t&&(t.current=r)},Xw=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.filter(Boolean);return o.length<=1?o[0]:function(i){r.forEach(function(a){cne(a,i)})}};var SA=function(t){var r,n,o=(0,h1.isMemo)(t)?t.type.type:t.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==h1.ForwardRef||typeof t=="function"&&!((n=t.prototype)!==null&&n!==void 0&&n.render)&&t.$$typeof!==h1.ForwardRef)};function WZe(e){return(0,Eq.isValidElement)(e)&&!(0,h1.isFragment)(e)}var qIn=Number(Eq.version.split(".")[0])>=19?function(e){return WZe(e)?e.props.ref:null}:function(e){return WZe(e)?e.ref:null};var np=Z(we()),$Ze=Z(Si());function dd(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var eTr=(0,np.forwardRef)(function(e,t){var r=e.didUpdate,n=e.getContainer,o=e.children,i=(0,np.useRef)(),a=(0,np.useRef)();(0,np.useImperativeHandle)(t,function(){return{}});var u=(0,np.useRef)(!1);return!u.current&&dd()&&(a.current=n(),i.current=a.current.parentNode,u.current=!0),(0,np.useEffect)(function(){r==null||r(e)}),(0,np.useEffect)(function(){return a.current.parentNode===null&&i.current!==null&&i.current.appendChild(a.current),function(){var p;(p=a.current)===null||p===void 0||(p=p.parentNode)===null||p===void 0||p.removeChild(a.current)}},[]),a.current?$Ze.default.createPortal(o,a.current):null}),YZe=eTr;var xXe=Z(Zn());function tTr(e,t,r){return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function ZZe(e,t,r){var n=e[t]||{};return qt(qt({},n),r)}function KZe(e,t,r,n){for(var o=r.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u=i[a];if(tTr(e[u].points,o,n))return"".concat(t,"-placement-").concat(u)}return""}function fne(e){if(Array.isArray(e))return e}function XZe(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,u=[],p=!0,h=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;p=!1}else for(;!(p=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);p=!0);}catch(g){h=!0,o=g}finally{try{if(!p&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(h)throw o}}return u}}function pne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kn(e,t){return fne(e)||XZe(e,t)||_A(e,t)||pne()}var y1=Z(we()),LA=Z(we());var JZe=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var wne=Z(we()),yKe=Z(Zn());var gKe=Z(Zn());var wu=Z(we()),bne=Z(we());var dne=Z(we());var QZe=dne.createContext({});var eKe=Z(we()),rTr=function(e){rl(r,e);var t=nl(r);function r(){return el(this,r),t.apply(this,arguments)}return tl(r,[{key:"render",value:function(){return this.props.children}}]),r}(eKe.Component),tKe=rTr;var Sq=Z(we());function jv(e){var t=Sq.useRef();t.current=e;var r=Sq.useCallback(function(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=t.current)===null||n===void 0?void 0:n.call.apply(n,[t].concat(i))},[]);return r}var Jw=Z(we());var rKe=dd()?Jw.useLayoutEffect:Jw.useEffect,nTr=function(t,r){var n=Jw.useRef(!0);rKe(function(){return t(n.current)},r),rKe(function(){return n.current=!1,function(){n.current=!0}},[])};var IA=nTr;var Qw=Z(we());function im(e){var t=Qw.useRef(!1),r=Qw.useState(e),n=Kn(r,2),o=n[0],i=n[1];Qw.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function a(u,p){p&&t.current||i(u)}return[o,a]}var Iq=Z(we());function hne(e){var t=Iq.useReducer(function(u){return u+1},0),r=Kn(t,2),n=r[1],o=Iq.useRef(e),i=jv(function(){return o.current}),a=jv(function(u){o.current=typeof u=="function"?u(o.current):u,n()});return[i,a]}var Pq=Z(we()),zv=Z(we());var hd="none",TA="appear",MA="enter",CA="leave",mne="none",bu="prepare",am="start",qv="active",Tq="end",Mq="prepared";var uKe=Z(we()),cKe=Z(we());function nKe(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function iTr(e,t){var r={animationend:nKe("Animation","AnimationEnd"),transitionend:nKe("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var aTr=iTr(dd(),typeof window!="undefined"?window:{}),iKe={};dd()&&(oKe=document.createElement("div"),iKe=oKe.style);var oKe,Cq={};function aKe(e){if(Cq[e])return Cq[e];var t=aTr[e];if(t)for(var r=Object.keys(t),n=r.length,o=0;o<n;o+=1){var i=r[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in iKe)return Cq[e]=t[i],Cq[e]}return""}var sKe=aKe("animationend"),lKe=aKe("transitionend"),Aq=!!(sKe&&lKe),gne=sKe||"animationend",vne=lKe||"transitionend";function yne(e,t){if(!e)return null;if(no(e)==="object"){var r=t.replace(/-\w/g,function(n){return n[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}var fKe=function(e){var t=(0,cKe.useRef)();function r(o){o&&(o.removeEventListener(vne,e),o.removeEventListener(gne,e))}function n(o){t.current&&t.current!==o&&r(t.current),o&&o!==t.current&&(o.addEventListener(vne,e),o.addEventListener(gne,e),t.current=o)}return uKe.useEffect(function(){return function(){r(t.current)}},[]),[n,r]};var Dq=Z(we()),sTr=dd()?Dq.useLayoutEffect:Dq.useEffect,Nq=sTr;var dKe=Z(we());var Oq=Z(we()),pKe=function(){var e=Oq.useRef(null);function t(){xu.cancel(e.current)}function r(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var i=xu(function(){o<=1?n({isCanceled:function(){return i!==e.current}}):r(n,o-1)});e.current=i}return Oq.useEffect(function(){return function(){t()}},[]),[r,t]};var lTr=[bu,am,qv,Tq],uTr=[bu,Mq],_ne=!1,hKe=!0;function Lq(e){return e===qv||e===Tq}var mKe=function(e,t,r){var n=im(mne),o=Kn(n,2),i=o[0],a=o[1],u=pKe(),p=Kn(u,2),h=p[0],g=p[1];function x(){a(bu,!0)}var b=t?uTr:lTr;return Nq(function(){if(i!==mne&&i!==Tq){var T=b.indexOf(i),A=b[T+1],L=r(i);L===_ne?a(A,!0):A&&h(function(P){function k(){P.isCanceled()||a(A,!0)}L===!0?k():Promise.resolve(L).then(k)})}},[e,i]),dKe.useEffect(function(){return function(){g()}},[]),[x,i]};function xne(e,t,r,n){var o=n.motionEnter,i=o===void 0?!0:o,a=n.motionAppear,u=a===void 0?!0:a,p=n.motionLeave,h=p===void 0?!0:p,g=n.motionDeadline,x=n.motionLeaveImmediately,b=n.onAppearPrepare,T=n.onEnterPrepare,A=n.onLeavePrepare,L=n.onAppearStart,P=n.onEnterStart,k=n.onLeaveStart,q=n.onAppearActive,U=n.onEnterActive,H=n.onLeaveActive,X=n.onAppearEnd,ee=n.onEnterEnd,ne=n.onLeaveEnd,me=n.onVisibleChanged,ue=im(),Me=Kn(ue,2),ke=Me[0],Te=Me[1],Ee=hne(hd),Ze=Kn(Ee,2),Qe=Ze[0],Fe=Ze[1],ze=im(null),Ne=Kn(ze,2),et=Ne[0],st=Ne[1],ft=Qe(),Ye=(0,zv.useRef)(!1),tt=(0,zv.useRef)(null);function lt(){return r()}var je=(0,zv.useRef)(!1);function ge(){Fe(hd),st(null,!0)}var We=jv(function(Ue){var ht=Qe();if(ht!==hd){var yt=lt();if(!(Ue&&!Ue.deadline&&Ue.target!==yt)){var mt=je.current,_t;ht===TA&&mt?_t=X==null?void 0:X(yt,Ue):ht===MA&&mt?_t=ee==null?void 0:ee(yt,Ue):ht===CA&&mt&&(_t=ne==null?void 0:ne(yt,Ue)),mt&&_t!==!1&&ge()}}}),Oe=fKe(We),at=Kn(Oe,1),ot=at[0],Pt=function(ht){switch(ht){case TA:return Ot(Ot(Ot({},bu,b),am,L),qv,q);case MA:return Ot(Ot(Ot({},bu,T),am,P),qv,U);case CA:return Ot(Ot(Ot({},bu,A),am,k),qv,H);default:return{};}},Mt=Pq.useMemo(function(){return Pt(ft)},[ft]),Dt=mKe(ft,!e,function(Ue){if(Ue===bu){var ht=Mt[bu];return ht?ht(lt()):_ne}if(Wt in Mt){var yt;st(((yt=Mt[Wt])===null||yt===void 0?void 0:yt.call(Mt,lt(),null))||null)}return Wt===qv&&ft!==hd&&(ot(lt()),g>0&&(clearTimeout(tt.current),tt.current=setTimeout(function(){We({deadline:!0})},g))),Wt===Mq&&ge(),hKe}),Ae=Kn(Dt,2),Lt=Ae[0],Wt=Ae[1],Ct=Lq(Wt);je.current=Ct,Nq(function(){Te(t);var Ue=Ye.current;Ye.current=!0;var ht;!Ue&&t&&u&&(ht=TA),Ue&&t&&i&&(ht=MA),(Ue&&!t&&h||!Ue&&x&&!t&&h)&&(ht=CA);var yt=Pt(ht);ht&&(e||yt[bu])?(Fe(ht),Lt()):Fe(hd)},[t]),(0,zv.useEffect)(function(){(ft===TA&&!u||ft===MA&&!i||ft===CA&&!h)&&Fe(hd)},[u,i,h]),(0,zv.useEffect)(function(){return function(){Ye.current=!1,clearTimeout(tt.current)}},[]);var ce=Pq.useRef(!1);(0,zv.useEffect)(function(){ke&&(ce.current=!0),ke!==void 0&&ft===hd&&((ce.current||ke)&&(me==null||me(ke)),ce.current=!0)},[ke,ft]);var qe=et;return Mt[bu]&&Wt===am&&(qe=qt({transition:"none"},qe)),[ft,Wt,qe,ke!=null?ke:t]}function cTr(e){var t=e;no(e)==="object"&&(t=e.transitionSupport);function r(o,i){return!!(o.motionName&&t&&i!==!1)}var n=wu.forwardRef(function(o,i){var a=o.visible,u=a===void 0?!0:a,p=o.removeOnLeave,h=p===void 0?!0:p,g=o.forceRender,x=o.children,b=o.motionName,T=o.leavedClassName,A=o.eventProps,L=wu.useContext(QZe),P=L.motion,k=r(o,P),q=(0,bne.useRef)(),U=(0,bne.useRef)();function H(){try{return q.current instanceof HTMLElement?q.current:EA(U.current)}catch(et){return null}}var X=xne(k,u,H,o),ee=Kn(X,4),ne=ee[0],me=ee[1],ue=ee[2],Me=ee[3],ke=wu.useRef(Me);Me&&(ke.current=!0);var Te=wu.useCallback(function(et){q.current=et,cne(i,et)},[i]),Ee,Ze=qt(qt({},A),{},{visible:u});if(!x)Ee=null;else if(ne===hd)Me?Ee=x(qt({},Ze),Te):!h&&ke.current&&T?Ee=x(qt(qt({},Ze),{},{className:T}),Te):g||!h&&!T?Ee=x(qt(qt({},Ze),{},{style:{display:"none"}}),Te):Ee=null;else{var Qe;me===bu?Qe="prepare":Lq(me)?Qe="active":me===am&&(Qe="start");var Fe=yne(b,"".concat(ne,"-").concat(Qe));Ee=x(qt(qt({},Ze),{},{className:(0,gKe.default)(yne(b,ne),Ot(Ot({},Fe,Fe&&Qe),b,typeof b=="string")),style:ue}),Te)}if(wu.isValidElement(Ee)&&SA(Ee)){var ze=Ee,Ne=ze.ref;Ne||(Ee=wu.cloneElement(Ee,{ref:Te}))}return wu.createElement(tKe,{ref:U},Ee)});return n.displayName="CSSMotion",n}var kq=cTr(Aq);var m1=Z(we());var Rq="add",jq="keep",qq="remove",Fq="removed";function fTr(e){var t;return e&&no(e)==="object"&&"key"in e?t=e:t={key:e},qt(qt({},t),{},{key:String(t.key)})}function zq(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(fTr)}function vKe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,o=t.length,i=zq(e),a=zq(t);i.forEach(function(h){for(var g=!1,x=n;x<o;x+=1){var b=a[x];if(b.key===h.key){n<x&&(r=r.concat(a.slice(n,x).map(function(T){return qt(qt({},T),{},{status:Rq})})),n=x),r.push(qt(qt({},b),{},{status:jq})),n+=1,g=!0;break}}g||r.push(qt(qt({},h),{},{status:qq}))}),n<o&&(r=r.concat(a.slice(n).map(function(h){return qt(qt({},h),{},{status:Rq})})));var u={};r.forEach(function(h){var g=h.key;u[g]=(u[g]||0)+1});var p=Object.keys(u).filter(function(h){return u[h]>1});return p.forEach(function(h){r=r.filter(function(g){var x=g.key,b=g.status;return x!==h||b!==qq}),r.forEach(function(g){g.key===h&&(g.status=jq)})}),r}var pTr=["component","children","onVisibleChanged","onAllRemoved"],dTr=["status"],hTr=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function mTr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:kq,r=function(n){rl(i,n);var o=nl(i);function i(){var a;el(this,i);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return a=o.call.apply(o,[this].concat(p)),Ot(Jr(a),"state",{keyEntities:[]}),Ot(Jr(a),"removeKey",function(g){a.setState(function(x){var b=x.keyEntities.map(function(T){return T.key!==g?T:qt(qt({},T),{},{status:Fq})});return{keyEntities:b}},function(){var x=a.state.keyEntities,b=x.filter(function(T){var A=T.status;return A!==Fq}).length;b===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return tl(i,[{key:"render",value:function(){var u=this,p=this.state.keyEntities,h=this.props,g=h.component,x=h.children,b=h.onVisibleChanged,T=h.onAllRemoved,A=Al(h,pTr),L=g||m1.Fragment,P={};return hTr.forEach(function(k){P[k]=A[k],delete A[k]}),delete A.keys,m1.createElement(L,A,p.map(function(k,q){var U=k.status,H=Al(k,dTr),X=U===Rq||U===jq;return m1.createElement(t,Pn({},P,{key:H.key,visible:X,eventProps:H,onVisibleChanged:function(ne){b==null||b(ne,{key:H.key}),ne||u.removeKey(H.key)}}),function(ee,ne){return x(qt(qt({},ee),{},{index:q}),ne)})}))}}],[{key:"getDerivedStateFromProps",value:function(u,p){var h=u.keys,g=p.keyEntities,x=zq(h),b=vKe(g,x);return{keyEntities:b.filter(function(T){var A=g.find(function(L){var P=L.key;return T.key===P});return!(A&&A.status===Fq&&T.status===qq)})}}}]),i}(m1.Component);return Ot(r,"defaultProps",{component:"div"}),r}var gTr=mTr(Aq);var eE=kq;function Uq(e){var t=e.prefixCls,r=e.motion,n=e.animation,o=e.transitionName;return r||(n?{motionName:"".concat(t,"-").concat(n)}:o?{motionName:o}:null)}function Ene(e){var t=e.prefixCls,r=e.visible,n=e.zIndex,o=e.mask,i=e.maskMotion,a=e.maskAnimation,u=e.maskTransitionName;if(!o)return null;var p={};return(i||u||a)&&(p=qt({motionAppear:!0},Uq({motion:i,prefixCls:t,transitionName:u,animation:a}))),wne.createElement(eE,Pn({},p,{visible:r,removeOnLeave:!0}),function(h){var g=h.className;return wne.createElement("div",{style:{zIndex:n},className:(0,yKe.default)("".concat(t,"-mask"),g)})})}var nc=Z(we()),v1=Z(we());function _Ke(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function xKe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_Ke(Object(r),!0).forEach(function(n){vTr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_Ke(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cne(e){"@babel/helpers - typeof";return Cne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cne(e)}function vTr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var AA,yTr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Wq(){if(AA!==void 0)return AA;AA="";var e=document.createElement("p").style,t="Transform";for(var r in yTr)r+t in e&&(AA=r);return AA}function LKe(){return Wq()?"".concat(Wq(),"TransitionProperty"):"transitionProperty"}function $q(){return Wq()?"".concat(Wq(),"Transform"):"transform"}function bKe(e,t){var r=LKe();r&&(e.style[r]=t,r!=="transitionProperty"&&(e.style.transitionProperty=t))}function Sne(e,t){var r=$q();r&&(e.style[r]=t,r!=="transform"&&(e.style.transform=t))}function _Tr(e){return e.style.transitionProperty||e.style[LKe()]}function xTr(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("transform")||t.getPropertyValue($q());if(r&&r!=="none"){var n=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var bTr=/matrix\((.*)\)/,wTr=/matrix3d\((.*)\)/;function ETr(e,t){var r=window.getComputedStyle(e,null),n=r.getPropertyValue("transform")||r.getPropertyValue($q());if(n&&n!=="none"){var o,i=n.match(bTr);if(i)i=i[1],o=i.split(",").map(function(u){return parseFloat(u,10)}),o[4]=t.x,o[5]=t.y,Sne(e,"matrix(".concat(o.join(","),")"));else{var a=n.match(wTr)[1];o=a.split(",").map(function(u){return parseFloat(u,10)}),o[12]=t.x,o[13]=t.y,Sne(e,"matrix3d(".concat(o.join(","),")"))}}else Sne(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var STr=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,OA;function wKe(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function tE(e,t,r){var n=r;if(Cne(t)==="object"){for(var o in t)t.hasOwnProperty(o)&&tE(e,o,t[o]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),e.style[t]=n;return}return OA(e,t)}function ITr(e){var t,r,n,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top),r-=a.clientLeft||i.clientLeft||0,n-=a.clientTop||i.clientTop||0,{left:r,top:n}}function PKe(e,t){var r=e["page".concat(t?"Y":"X","Offset")],n="scroll".concat(t?"Top":"Left");if(typeof r!="number"){var o=e.document;r=o.documentElement[n],typeof r!="number"&&(r=o.body[n])}return r}function kKe(e){return PKe(e)}function RKe(e){return PKe(e,!0)}function NA(e){var t=ITr(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return t.left+=kKe(n),t.top+=RKe(n),t}function One(e){return e!=null&&e==e.window}function jKe(e){return One(e)?e.document:e.nodeType===9?e:e.ownerDocument}function TTr(e,t,r){var n=r,o="",i=jKe(e);return n=n||i.defaultView.getComputedStyle(e,null),n&&(o=n.getPropertyValue(t)||n[t]),o}var MTr=new RegExp("^(".concat(STr,")(?!px)[a-z%]+$"),"i"),CTr=/^(top|right|bottom|left)$/,Ine="currentStyle",Tne="runtimeStyle",g1="left",ATr="px";function DTr(e,t){var r=e[Ine]&&e[Ine][t];if(MTr.test(r)&&!CTr.test(t)){var n=e.style,o=n[g1],i=e[Tne][g1];e[Tne][g1]=e[Ine][g1],n[g1]=t==="fontSize"?"1em":r||0,r=n.pixelLeft+ATr,n[g1]=o,e[Tne][g1]=i}return r===""?"auto":r}typeof window!="undefined"&&(OA=window.getComputedStyle?TTr:DTr);function Bq(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function EKe(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function SKe(e,t,r){tE(e,"position")==="static"&&(e.style.position="relative");var n=-999,o=-999,i=Bq("left",r),a=Bq("top",r),u=EKe(i),p=EKe(a);i!=="left"&&(n=999),a!=="top"&&(o=999);var h="",g=NA(e);("left"in t||"top"in t)&&(h=_Tr(e)||"",bKe(e,"none")),"left"in t&&(e.style[u]="",e.style[i]="".concat(n,"px")),"top"in t&&(e.style[p]="",e.style[a]="".concat(o,"px")),wKe(e);var x=NA(e),b={};for(var T in t)if(t.hasOwnProperty(T)){var A=Bq(T,r),L=T==="left"?n:o,P=g[T]-x[T];A===T?b[A]=L+P:b[A]=L-P}tE(e,b),wKe(e),("left"in t||"top"in t)&&bKe(e,h);var k={};for(var q in t)if(t.hasOwnProperty(q)){var U=Bq(q,r),H=t[q]-g[q];q===U?k[U]=b[U]+H:k[U]=b[U]-H}tE(e,k)}function NTr(e,t){var r=NA(e),n=xTr(e),o={x:n.x,y:n.y};"left"in t&&(o.x=n.x+t.left-r.left),"top"in t&&(o.y=n.y+t.top-r.top),ETr(e,o)}function OTr(e,t,r){if(r.ignoreShake){var n=NA(e),o=n.left.toFixed(0),i=n.top.toFixed(0),a=t.left.toFixed(0),u=t.top.toFixed(0);if(o===a&&i===u)return}r.useCssRight||r.useCssBottom?SKe(e,t,r):r.useCssTransform&&$q()in document.body.style?NTr(e,t):SKe(e,t,r)}function Lne(e,t){for(var r=0;r<e.length;r++)t(e[r])}function qKe(e){return OA(e,"boxSizing")==="border-box"}var LTr=["margin","border","padding"],Ane=-1,PTr=2,Dne=1,kTr=0;function RTr(e,t,r){var n={},o=e.style,i;for(i in t)t.hasOwnProperty(i)&&(n[i]=o[i],o[i]=t[i]);r.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=n[i])}function DA(e,t,r){var n=0,o,i,a;for(i=0;i<t.length;i++)if(o=t[i],o)for(a=0;a<r.length;a++){var u=void 0;o==="border"?u="".concat(o).concat(r[a],"Width"):u=o+r[a],n+=parseFloat(OA(e,u))||0}return n}var md={getParent:function(t){var r=t;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};Lne(["Width","Height"],function(e){md["doc".concat(e)]=function(t){var r=t.document;return Math.max(r.documentElement["scroll".concat(e)],r.body["scroll".concat(e)],md["viewport".concat(e)](r))},md["viewport".concat(e)]=function(t){var r="client".concat(e),n=t.document,o=n.body,i=n.documentElement,a=i[r];return n.compatMode==="CSS1Compat"&&a||o&&o[r]||a}});function IKe(e,t,r){var n=r;if(One(e))return t==="width"?md.viewportWidth(e):md.viewportHeight(e);if(e.nodeType===9)return t==="width"?md.docWidth(e):md.docHeight(e);var o=t==="width"?["Left","Right"]:["Top","Bottom"],i=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),a=qKe(e),u=0;(i==null||i<=0)&&(i=void 0,u=OA(e,t),(u==null||Number(u)<0)&&(u=e.style[t]||0),u=Math.floor(parseFloat(u))||0),n===void 0&&(n=a?Dne:Ane);var p=i!==void 0||a,h=i||u;return n===Ane?p?h-DA(e,["border","padding"],o):u:p?n===Dne?h:h+(n===PTr?-DA(e,["border"],o):DA(e,["margin"],o)):u+DA(e,LTr.slice(n),o)}var jTr={position:"absolute",visibility:"hidden",display:"block"};function TKe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return o.offsetWidth!==0?n=IKe.apply(void 0,t):RTr(o,jTr,function(){n=IKe.apply(void 0,t)}),n}Lne(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);md["outer".concat(t)]=function(n,o){return n&&TKe(n,e,o?kTr:Dne)};var r=e==="width"?["Left","Right"]:["Top","Bottom"];md[e]=function(n,o){var i=o;if(i!==void 0){if(n){var a=qKe(n);return a&&(i+=DA(n,["padding","border"],r)),tE(n,e,i)}return}return n&&TKe(n,e,Ane)}});function zKe(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var ln={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var r=t.ownerDocument||t;return r.defaultView||r.parentWindow},getDocument:jKe,offset:function(t,r,n){if(typeof r!="undefined")OTr(t,r,n||{});else return NA(t)},isWindow:One,each:Lne,css:tE,clone:function(t){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);var o=t.overflow;if(o)for(r in t)t.hasOwnProperty(r)&&(n.overflow[r]=t.overflow[r]);return n},mix:zKe,getWindowScrollLeft:function(t){return kKe(t)},getWindowScrollTop:function(t){return RKe(t)},merge:function(){for(var t={},r=0;r<arguments.length;r++)ln.mix(t,r<0||arguments.length<=r?void 0:arguments[r]);return t},viewportWidth:0,viewportHeight:0};zKe(ln,md);var Mne=ln.getParent;function Nne(e){if(ln.isWindow(e)||e.nodeType===9)return null;var t=ln.getDocument(e),r=t.body,n,o=ln.css(e,"position"),i=o==="fixed"||o==="absolute";if(!i)return e.nodeName.toLowerCase()==="html"?null:Mne(e);for(n=Mne(e);n&&n!==r&&n.nodeType!==9;n=Mne(n))if(o=ln.css(n,"position"),o!=="static")return n;return null}var MKe=ln.getParent;function qTr(e){if(ln.isWindow(e)||e.nodeType===9)return!1;var t=ln.getDocument(e),r=t.body,n=null;for(n=MKe(e);n&&n!==r&&n!==t;n=MKe(n)){var o=ln.css(n,"position");if(o==="fixed")return!0}return!1}function Pne(e,t){for(var r={left:0,right:1/0,top:0,bottom:1/0},n=Nne(e),o=ln.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,u=o.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==a&&n!==u&&ln.css(n,"overflow")!=="visible"){var p=ln.offset(n);p.left+=n.clientLeft,p.top+=n.clientTop,r.top=Math.max(r.top,p.top),r.right=Math.min(r.right,p.left+n.clientWidth),r.bottom=Math.min(r.bottom,p.top+n.clientHeight),r.left=Math.max(r.left,p.left)}else if(n===a||n===u)break;n=Nne(n)}var h=null;if(!ln.isWindow(e)&&e.nodeType!==9){h=e.style.position;var g=ln.css(e,"position");g==="absolute"&&(e.style.position="fixed")}var x=ln.getWindowScrollLeft(i),b=ln.getWindowScrollTop(i),T=ln.viewportWidth(i),A=ln.viewportHeight(i),L=u.scrollWidth,P=u.scrollHeight,k=window.getComputedStyle(a);if(k.overflowX==="hidden"&&(L=i.innerWidth),k.overflowY==="hidden"&&(P=i.innerHeight),e.style&&(e.style.position=h),t||qTr(e))r.left=Math.max(r.left,x),r.top=Math.max(r.top,b),r.right=Math.min(r.right,x+T),r.bottom=Math.min(r.bottom,b+A);else{var q=Math.max(L,x+T);r.right=Math.min(r.right,q);var U=Math.max(P,b+A);r.bottom=Math.min(r.bottom,U)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function zTr(e,t,r,n){var o=ln.clone(e),i={width:t.width,height:t.height};return n.adjustX&&o.left<r.left&&(o.left=r.left),n.resizeWidth&&o.left>=r.left&&o.left+i.width>r.right&&(i.width-=o.left+i.width-r.right),n.adjustX&&o.left+i.width>r.right&&(o.left=Math.max(r.right-i.width,r.left)),n.adjustY&&o.top<r.top&&(o.top=r.top),n.resizeHeight&&o.top>=r.top&&o.top+i.height>r.bottom&&(i.height-=o.top+i.height-r.bottom),n.adjustY&&o.top+i.height>r.bottom&&(o.top=Math.max(r.bottom-i.height,r.top)),ln.mix(o,i)}function kne(e){var t,r,n;if(!ln.isWindow(e)&&e.nodeType!==9)t=ln.offset(e),r=ln.outerWidth(e),n=ln.outerHeight(e);else{var o=ln.getWindow(e);t={left:ln.getWindowScrollLeft(o),top:ln.getWindowScrollTop(o)},r=ln.viewportWidth(o),n=ln.viewportHeight(o)}return t.width=r,t.height=n,t}function CKe(e,t){var r=t.charAt(0),n=t.charAt(1),o=e.width,i=e.height,a=e.left,u=e.top;return r==="c"?u+=i/2:r==="b"&&(u+=i),n==="c"?a+=o/2:n==="r"&&(a+=o),{left:a,top:u}}function Vq(e,t,r,n,o){var i=CKe(t,r[1]),a=CKe(e,r[0]),u=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-u[0]+n[0]-o[0]),top:Math.round(e.top-u[1]+n[1]-o[1])}}function AKe(e,t,r){return e.left<r.left||e.left+t.width>r.right}function DKe(e,t,r){return e.top<r.top||e.top+t.height>r.bottom}function FTr(e,t,r){return e.left>r.right||e.left+t.width<r.left}function UTr(e,t,r){return e.top>r.bottom||e.top+t.height<r.top}function Gq(e,t,r){var n=[];return ln.each(e,function(o){n.push(o.replace(t,function(i){return r[i]}))}),n}function Hq(e,t){return e[t]=-e[t],e}function NKe(e,t){var r;return /%$/.test(e)?r=parseInt(e.substring(0,e.length-1),10)/100*t:r=parseInt(e,10),r||0}function OKe(e,t){e[0]=NKe(e[0],t.width),e[1]=NKe(e[1],t.height)}function FKe(e,t,r,n){var o=r.points,i=r.offset||[0,0],a=r.targetOffset||[0,0],u=r.overflow,p=r.source||e;i=[].concat(i),a=[].concat(a),u=u||{};var h={},g=0,x=!!(u&&u.alwaysByViewport),b=Pne(p,x),T=kne(p);OKe(i,T),OKe(a,t);var A=Vq(T,t,o,i,a),L=ln.merge(T,A);if(b&&(u.adjustX||u.adjustY)&&n){if(u.adjustX&&AKe(A,T,b)){var P=Gq(o,/[lr]/gi,{l:"r",r:"l"}),k=Hq(i,0),q=Hq(a,0),U=Vq(T,t,P,k,q);FTr(U,T,b)||(g=1,o=P,i=k,a=q)}if(u.adjustY&&DKe(A,T,b)){var H=Gq(o,/[tb]/gi,{t:"b",b:"t"}),X=Hq(i,1),ee=Hq(a,1),ne=Vq(T,t,H,X,ee);UTr(ne,T,b)||(g=1,o=H,i=X,a=ee)}g&&(A=Vq(T,t,o,i,a),ln.mix(L,A));var me=AKe(A,T,b),ue=DKe(A,T,b);if(me||ue){var Me=o;me&&(Me=Gq(o,/[lr]/gi,{l:"r",r:"l"})),ue&&(Me=Gq(o,/[tb]/gi,{t:"b",b:"t"})),o=Me,i=r.offset||[0,0],a=r.targetOffset||[0,0]}h.adjustX=u.adjustX&&me,h.adjustY=u.adjustY&&ue,(h.adjustX||h.adjustY)&&(L=zTr(A,T,b,h))}return L.width!==T.width&&ln.css(p,"width",ln.width(p)+L.width-T.width),L.height!==T.height&&ln.css(p,"height",ln.height(p)+L.height-T.height),ln.offset(p,{left:L.left,top:L.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:h}}function BTr(e,t){var r=Pne(e,t),n=kne(e);return!r||n.left+n.width<=r.left||n.top+n.height<=r.top||n.left>=r.right||n.top>=r.bottom}function Yq(e,t,r){var n=r.target||t,o=kne(n),i=!BTr(n,r.overflow&&r.overflow.alwaysByViewport);return FKe(e,o,r,i)}Yq.__getOffsetParent=Nne;Yq.__getVisibleRectForElement=Pne;function UKe(e,t,r){var n,o,i=ln.getDocument(e),a=i.defaultView||i.parentWindow,u=ln.getWindowScrollLeft(a),p=ln.getWindowScrollTop(a),h=ln.viewportWidth(a),g=ln.viewportHeight(a);"pageX"in t?n=t.pageX:n=u+t.clientX,"pageY"in t?o=t.pageY:o=p+t.clientY;var x={left:n,top:o,width:0,height:0},b=n>=0&&n<=u+h&&o>=0&&o<=p+g,T=[r.points[0],"cc"];return FKe(e,x,xKe(xKe({},r),{},{points:T}),b)}function VTr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function o(i,a){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,p=n.has(i);if(fd(!p,"Warning: There may be circular references"),p)return!1;if(i===a)return!0;if(r&&u>1)return!1;n.add(i);var h=u+1;if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(var g=0;g<i.length;g++)if(!o(i[g],a[g],h))return!1;return!0}if(i&&a&&no(i)==="object"&&no(a)==="object"){var x=Object.keys(i);return x.length!==Object.keys(a).length?!1:x.every(function(b){return o(i[b],a[b],h)})}return!1}return o(e,t)}var BKe=VTr;var VKe=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,n=t.height;if(r||n)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var ws=Z(we());var Rne=Z(we()),GKe=function(e,t){var r=Rne.default.useRef(!1),n=Rne.default.useRef(null);function o(){window.clearTimeout(n.current)}function i(a){if(o(),!r.current||a===!0){if(e(a)===!1)return;r.current=!0,n.current=window.setTimeout(function(){r.current=!1},t)}else n.current=window.setTimeout(function(){r.current=!1,i()},t)}return[i,function(){r.current=!1,o()}]};var WKe=function(){if(typeof Map!="undefined")return Map;function e(t,r){var n=-1;return t.some(function(o,i){return o[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(r,n){var o=e(this.__entries__,r);~o?this.__entries__[o][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,o=e(n,r);~o&&n.splice(o,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var o=0,i=this.__entries__;o<i.length;o++){var a=i[o];r.call(n,a[1],a[0])}},t}()}(),jne=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Zq=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),GTr=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Zq):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),HTr=2;function WTr(e,t){var r=!1,n=!1,o=0;function i(){r&&(r=!1,e()),n&&u()}function a(){GTr(i)}function u(){var p=Date.now();if(r){if(p-o<HTr)return;n=!0}else r=!0,n=!1,setTimeout(a,t);o=p}return u}var $Tr=20,YTr=["top","right","bottom","left","width","height","size","weight"],ZTr=typeof MutationObserver!="undefined",KTr=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=WTr(this.refresh.bind(this),$Tr)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!jne||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ZTr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!jne||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,o=YTr.some(function(i){return!!~n.indexOf(i)});o&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),$Ke=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},rE=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Zq},YKe=Xq(0,0,0,0);function Kq(e){return parseFloat(e)||0}function HKe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,o){var i=e["border-"+o+"-width"];return n+Kq(i)},0)}function XTr(e){for(var t=["top","right","bottom","left"],r={},n=0,o=t;n<o.length;n++){var i=o[n],a=e["padding-"+i];r[i]=Kq(a)}return r}function JTr(e){var t=e.getBBox();return Xq(0,0,t.width,t.height)}function QTr(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return YKe;var n=rE(e).getComputedStyle(e),o=XTr(n),i=o.left+o.right,a=o.top+o.bottom,u=Kq(n.width),p=Kq(n.height);if(n.boxSizing==="border-box"&&(Math.round(u+i)!==t&&(u-=HKe(n,"left","right")+i),Math.round(p+a)!==r&&(p-=HKe(n,"top","bottom")+a)),!tMr(e)){var h=Math.round(u+i)-t,g=Math.round(p+a)-r;Math.abs(h)!==1&&(u-=h),Math.abs(g)!==1&&(p-=g)}return Xq(o.left,o.top,u,p)}var eMr=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof rE(e).SVGGraphicsElement}:function(e){return e instanceof rE(e).SVGElement&&typeof e.getBBox=="function"}}();function tMr(e){return e===rE(e).document.documentElement}function rMr(e){return jne?eMr(e)?JTr(e):QTr(e):YKe}function nMr(e){var t=e.x,r=e.y,n=e.width,o=e.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return $Ke(a,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),a}function Xq(e,t,r,n){return{x:e,y:t,width:r,height:n}}var oMr=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Xq(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=rMr(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),iMr=function(){function e(t,r){var n=nMr(r);$Ke(this,{target:t,contentRect:n})}return e}(),aMr=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new WKe,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof rE(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)||(r.set(t,new oMr(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof rE(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new iMr(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),ZKe=typeof WeakMap!="undefined"?new WeakMap:new WKe,KKe=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=KTr.getInstance(),n=new aMr(t,r,this);ZKe.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){KKe.prototype[e]=function(){var t;return(t=ZKe.get(this))[e].apply(t,arguments)}});var sMr=function(){return typeof Zq.ResizeObserver!="undefined"?Zq.ResizeObserver:KKe}(),XKe=sMr;function JKe(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function QKe(e,t){e!==document.activeElement&&d1(t,e)&&typeof e.focus=="function"&&e.focus()}function qne(e,t){var r=null,n=null;function o(a){var u=Kn(a,1),p=u[0].target;if(document.documentElement.contains(p)){var h=p.getBoundingClientRect(),g=h.width,x=h.height,b=Math.floor(g),T=Math.floor(x);(r!==b||n!==T)&&Promise.resolve().then(function(){t({width:b,height:T})}),r=b,n=T}}var i=new XKe(o);return e&&i.observe(e),function(){i.disconnect()}}function eXe(e){return typeof e!="function"?null:e()}function tXe(e){return no(e)!=="object"||!e?null:e}var lMr=function(t,r){var n=t.children,o=t.disabled,i=t.target,a=t.align,u=t.onAlign,p=t.monitorWindowResize,h=t.monitorBufferTime,g=h===void 0?0:h,x=ws.default.useRef({}),b=ws.default.useRef(),T=ws.default.Children.only(n),A=ws.default.useRef({});A.current.disabled=o,A.current.target=i,A.current.align=a,A.current.onAlign=u;var L=GKe(function(){var ke=A.current,Te=ke.disabled,Ee=ke.target,Ze=ke.align,Qe=ke.onAlign,Fe=b.current;if(!Te&&Ee&&Fe){var ze,Ne=eXe(Ee),et=tXe(Ee);x.current.element=Ne,x.current.point=et,x.current.align=Ze;var st=document,ft=st.activeElement;return Ne&&VKe(Ne)?ze=Yq(Fe,Ne,Ze):et&&(ze=UKe(Fe,et,Ze)),QKe(ft,Fe),Qe&&ze&&Qe(Fe,ze),!0}return!1},g),P=Kn(L,2),k=P[0],q=P[1],U=ws.default.useState(),H=Kn(U,2),X=H[0],ee=H[1],ne=ws.default.useState(),me=Kn(ne,2),ue=me[0],Me=me[1];return IA(function(){ee(eXe(i)),Me(tXe(i))}),ws.default.useEffect(function(){(x.current.element!==X||!JKe(x.current.point,ue)||!BKe(x.current.align,a))&&k()}),ws.default.useEffect(function(){var ke=qne(b.current,k);return ke},[b.current]),ws.default.useEffect(function(){var ke=qne(X,k);return ke},[X]),ws.default.useEffect(function(){o?q():k()},[o]),ws.default.useEffect(function(){if(p){var ke=Dl(window,"resize",k);return ke.remove}},[p]),ws.default.useEffect(function(){return function(){q()}},[]),ws.default.useImperativeHandle(r,function(){return{forceAlign:function(){return k(!0)}}}),ws.default.isValidElement(T)&&(T=ws.default.cloneElement(T,{ref:Xw(T.ref,b)})),T},rXe=ws.default.forwardRef(lMr);rXe.displayName="Align";var nXe=rXe;var oXe=nXe;var cXe=Z(Zn());function Jq(){"use strict";Jq=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(Fe,ze,Ne){Fe[ze]=Ne.value},i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",p=i.toStringTag||"@@toStringTag";function h(Fe,ze,Ne){return Object.defineProperty(Fe,ze,{value:Ne,enumerable:!0,configurable:!0,writable:!0}),Fe[ze]}try{h({},"")}catch(Fe){h=function(Ne,et,st){return Ne[et]=st}}function g(Fe,ze,Ne,et){var st=ze&&ze.prototype instanceof k?ze:k,ft=Object.create(st.prototype),Ye=new Ze(et||[]);return o(ft,"_invoke",{value:Me(Fe,Ne,Ye)}),ft}function x(Fe,ze,Ne){try{return{type:"normal",arg:Fe.call(ze,Ne)}}catch(et){return{type:"throw",arg:et}}}t.wrap=g;var b="suspendedStart",T="suspendedYield",A="executing",L="completed",P={};function k(){}function q(){}function U(){}var H={};h(H,a,function(){return this});var X=Object.getPrototypeOf,ee=X&&X(X(Qe([])));ee&&ee!==r&&n.call(ee,a)&&(H=ee);var ne=U.prototype=k.prototype=Object.create(H);function me(Fe){["next","throw","return"].forEach(function(ze){h(Fe,ze,function(Ne){return this._invoke(ze,Ne)})})}function ue(Fe,ze){function Ne(st,ft,Ye,tt){var lt=x(Fe[st],Fe,ft);if(lt.type!=="throw"){var je=lt.arg,ge=je.value;return ge&&no(ge)=="object"&&n.call(ge,"__await")?ze.resolve(ge.__await).then(function(We){Ne("next",We,Ye,tt)},function(We){Ne("throw",We,Ye,tt)}):ze.resolve(ge).then(function(We){je.value=We,Ye(je)},function(We){return Ne("throw",We,Ye,tt)})}tt(lt.arg)}var et;o(this,"_invoke",{value:function(ft,Ye){function tt(){return new ze(function(lt,je){Ne(ft,Ye,lt,je)})}return et=et?et.then(tt,tt):tt()}})}function Me(Fe,ze,Ne){var et=b;return function(st,ft){if(et===A)throw Error("Generator is already running");if(et===L){if(st==="throw")throw ft;return{value:e,done:!0}}for(Ne.method=st,Ne.arg=ft;;){var Ye=Ne.delegate;if(Ye){var tt=ke(Ye,Ne);if(tt){if(tt===P)continue;return tt}}if(Ne.method==="next")Ne.sent=Ne._sent=Ne.arg;else if(Ne.method==="throw"){if(et===b)throw et=L,Ne.arg;Ne.dispatchException(Ne.arg)}else Ne.method==="return"&&Ne.abrupt("return",Ne.arg);et=A;var lt=x(Fe,ze,Ne);if(lt.type==="normal"){if(et=Ne.done?L:T,lt.arg===P)continue;return{value:lt.arg,done:Ne.done}}lt.type==="throw"&&(et=L,Ne.method="throw",Ne.arg=lt.arg)}}}function ke(Fe,ze){var Ne=ze.method,et=Fe.iterator[Ne];if(et===e)return ze.delegate=null,Ne==="throw"&&Fe.iterator.return&&(ze.method="return",ze.arg=e,ke(Fe,ze),ze.method==="throw")||Ne!=="return"&&(ze.method="throw",ze.arg=new TypeError("The iterator does not provide a '"+Ne+"' method")),P;var st=x(et,Fe.iterator,ze.arg);if(st.type==="throw")return ze.method="throw",ze.arg=st.arg,ze.delegate=null,P;var ft=st.arg;return ft?ft.done?(ze[Fe.resultName]=ft.value,ze.next=Fe.nextLoc,ze.method!=="return"&&(ze.method="next",ze.arg=e),ze.delegate=null,P):ft:(ze.method="throw",ze.arg=new TypeError("iterator result is not an object"),ze.delegate=null,P)}function Te(Fe){var ze={tryLoc:Fe[0]};1 in Fe&&(ze.catchLoc=Fe[1]),2 in Fe&&(ze.finallyLoc=Fe[2],ze.afterLoc=Fe[3]),this.tryEntries.push(ze)}function Ee(Fe){var ze=Fe.completion||{};ze.type="normal",delete ze.arg,Fe.completion=ze}function Ze(Fe){this.tryEntries=[{tryLoc:"root"}],Fe.forEach(Te,this),this.reset(!0)}function Qe(Fe){if(Fe||Fe===""){var ze=Fe[a];if(ze)return ze.call(Fe);if(typeof Fe.next=="function")return Fe;if(!isNaN(Fe.length)){var Ne=-1,et=function st(){for(;++Ne<Fe.length;)if(n.call(Fe,Ne))return st.value=Fe[Ne],st.done=!1,st;return st.value=e,st.done=!0,st};return et.next=et}}throw new TypeError(no(Fe)+" is not iterable")}return q.prototype=U,o(ne,"constructor",{value:U,configurable:!0}),o(U,"constructor",{value:q,configurable:!0}),q.displayName=h(U,p,"GeneratorFunction"),t.isGeneratorFunction=function(Fe){var ze=typeof Fe=="function"&&Fe.constructor;return!!ze&&(ze===q||(ze.displayName||ze.name)==="GeneratorFunction")},t.mark=function(Fe){return Object.setPrototypeOf?Object.setPrototypeOf(Fe,U):(Fe.__proto__=U,h(Fe,p,"GeneratorFunction")),Fe.prototype=Object.create(ne),Fe},t.awrap=function(Fe){return{__await:Fe}},me(ue.prototype),h(ue.prototype,u,function(){return this}),t.AsyncIterator=ue,t.async=function(Fe,ze,Ne,et,st){st===void 0&&(st=Promise);var ft=new ue(g(Fe,ze,Ne,et),st);return t.isGeneratorFunction(ze)?ft:ft.next().then(function(Ye){return Ye.done?Ye.value:ft.next()})},me(ne),h(ne,p,"Generator"),h(ne,a,function(){return this}),h(ne,"toString",function(){return"[object Generator]"}),t.keys=function(Fe){var ze=Object(Fe),Ne=[];for(var et in ze)Ne.push(et);return Ne.reverse(),function st(){for(;Ne.length;){var ft=Ne.pop();if(ft in ze)return st.value=ft,st.done=!1,st}return st.done=!0,st}},t.values=Qe,Ze.prototype={constructor:Ze,reset:function(ze){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Ee),!ze)for(var Ne in this)Ne.charAt(0)==="t"&&n.call(this,Ne)&&!isNaN(+Ne.slice(1))&&(this[Ne]=e)},stop:function(){this.done=!0;var ze=this.tryEntries[0].completion;if(ze.type==="throw")throw ze.arg;return this.rval},dispatchException:function(ze){if(this.done)throw ze;var Ne=this;function et(je,ge){return Ye.type="throw",Ye.arg=ze,Ne.next=je,ge&&(Ne.method="next",Ne.arg=e),!!ge}for(var st=this.tryEntries.length-1;st>=0;--st){var ft=this.tryEntries[st],Ye=ft.completion;if(ft.tryLoc==="root")return et("end");if(ft.tryLoc<=this.prev){var tt=n.call(ft,"catchLoc"),lt=n.call(ft,"finallyLoc");if(tt&&lt){if(this.prev<ft.catchLoc)return et(ft.catchLoc,!0);if(this.prev<ft.finallyLoc)return et(ft.finallyLoc)}else if(tt){if(this.prev<ft.catchLoc)return et(ft.catchLoc,!0)}else{if(!lt)throw Error("try statement without catch or finally");if(this.prev<ft.finallyLoc)return et(ft.finallyLoc)}}}},abrupt:function(ze,Ne){for(var et=this.tryEntries.length-1;et>=0;--et){var st=this.tryEntries[et];if(st.tryLoc<=this.prev&&n.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var ft=st;break}}ft&&(ze==="break"||ze==="continue")&&ft.tryLoc<=Ne&&Ne<=ft.finallyLoc&&(ft=null);var Ye=ft?ft.completion:{};return Ye.type=ze,Ye.arg=Ne,ft?(this.method="next",this.next=ft.finallyLoc,P):this.complete(Ye)},complete:function(ze,Ne){if(ze.type==="throw")throw ze.arg;return ze.type==="break"||ze.type==="continue"?this.next=ze.arg:ze.type==="return"?(this.rval=this.arg=ze.arg,this.method="return",this.next="end"):ze.type==="normal"&&Ne&&(this.next=Ne),P},finish:function(ze){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var et=this.tryEntries[Ne];if(et.finallyLoc===ze)return this.complete(et.completion,et.afterLoc),Ee(et),P}},catch:function(ze){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var et=this.tryEntries[Ne];if(et.tryLoc===ze){var st=et.completion;if(st.type==="throw"){var ft=st.arg;Ee(et)}return ft}}throw Error("illegal catch attempt")},delegateYield:function(ze,Ne,et){return this.delegate={iterator:Qe(ze),resultName:Ne,nextLoc:et},this.method==="next"&&(this.arg=e),P}},t}function iXe(e,t,r,n,o,i,a){try{var u=e[i](a),p=u.value}catch(h){return void r(h)}u.done?t(p):Promise.resolve(p).then(n,o)}function aXe(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(p){iXe(i,n,o,a,u,"next",p)}function u(p){iXe(i,n,o,a,u,"throw",p)}a(void 0)})}}var nE=Z(we());var sXe=["measure","alignPre","align",null,"motion"],lXe=function(e,t){var r=im(null),n=Kn(r,2),o=n[0],i=n[1],a=(0,nE.useRef)();function u(g){i(g,!0)}function p(){xu.cancel(a.current)}function h(g){p(),a.current=xu(function(){u(function(x){switch(o){case"align":return"motion";case"motion":return"stable";default:}return x}),g==null||g()})}return(0,nE.useEffect)(function(){u("measure")},[e]),(0,nE.useEffect)(function(){switch(o){case"measure":t();break;default:}o&&(a.current=xu(aXe(Jq().mark(function g(){var x,b;return Jq().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:x=sXe.indexOf(o),b=sXe[x+1],b&&x!==-1&&u(b);case 3:case"end":return A.stop();}},g)}))))},[o]),(0,nE.useEffect)(function(){return function(){p()}},[]),[o,h]};var Qq=Z(we()),uXe=function(e){var t=Qq.useState({width:0,height:0}),r=Kn(t,2),n=r[0],o=r[1];function i(u){var p=u.offsetWidth,h=u.offsetHeight,g=u.getBoundingClientRect(),x=g.width,b=g.height;Math.abs(p-x)<1&&Math.abs(h-b)<1&&(p=x,h=b),o({width:p,height:h})}var a=Qq.useMemo(function(){var u={};if(e){var p=n.width,h=n.height;e.indexOf("height")!==-1&&h?u.height=h:e.indexOf("minHeight")!==-1&&h&&(u.minHeight=h),e.indexOf("width")!==-1&&p?u.width=p:e.indexOf("minWidth")!==-1&&p&&(u.minWidth=p)}return u},[e,n]);return[a,i]};var fXe=nc.forwardRef(function(e,t){var r=e.visible,n=e.prefixCls,o=e.className,i=e.style,a=e.children,u=e.zIndex,p=e.stretch,h=e.destroyPopupOnHide,g=e.forceRender,x=e.align,b=e.point,T=e.getRootDomNode,A=e.getClassNameFromAlign,L=e.onAlign,P=e.onMouseEnter,k=e.onMouseLeave,q=e.onMouseDown,U=e.onTouchStart,H=e.onClick,X=(0,v1.useRef)(),ee=(0,v1.useRef)(),ne=(0,v1.useState)(),me=Kn(ne,2),ue=me[0],Me=me[1],ke=uXe(p),Te=Kn(ke,2),Ee=Te[0],Ze=Te[1];function Qe(){p&&Ze(T())}var Fe=lXe(r,Qe),ze=Kn(Fe,2),Ne=ze[0],et=ze[1],st=(0,v1.useState)(0),ft=Kn(st,2),Ye=ft[0],tt=ft[1],lt=(0,v1.useRef)();IA(function(){Ne==="alignPre"&&tt(0)},[Ne]);function je(){return b||T}function ge(){var Dt;(Dt=X.current)===null||Dt===void 0||Dt.forceAlign()}function We(Dt,Ae){var Lt=A(Ae);ue!==Lt&&Me(Lt),tt(function(Wt){return Wt+1}),Ne==="align"&&(L==null||L(Dt,Ae))}IA(function(){Ne==="align"&&(Ye<3?ge():et(function(){var Dt;(Dt=lt.current)===null||Dt===void 0||Dt.call(lt)}))},[Ye]);var Oe=qt({},Uq(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Dt){var Ae=Oe[Dt];Oe[Dt]=function(Lt,Wt){return et(),Ae==null?void 0:Ae(Lt,Wt)}});function at(){return new Promise(function(Dt){lt.current=Dt})}nc.useEffect(function(){!Oe.motionName&&Ne==="motion"&&et()},[Oe.motionName,Ne]),nc.useImperativeHandle(t,function(){return{forceAlign:ge,getElement:function(){return ee.current}}});var ot=qt(qt({},Ee),{},{zIndex:u,opacity:Ne==="motion"||Ne==="stable"||!r?void 0:0,pointerEvents:!r&&Ne!=="stable"?"none":void 0},i),Pt=!0;x!=null&&x.points&&(Ne==="align"||Ne==="stable")&&(Pt=!1);var Mt=a;return nc.Children.count(a)>1&&(Mt=nc.createElement("div",{className:"".concat(n,"-content")},a)),nc.createElement(eE,Pn({visible:r,ref:ee,leavedClassName:"".concat(n,"-hidden")},Oe,{onAppearPrepare:at,onEnterPrepare:at,removeOnLeave:h,forceRender:g}),function(Dt,Ae){var Lt=Dt.className,Wt=Dt.style,Ct=(0,cXe.default)(n,o,ue,Lt);return nc.createElement(oXe,{target:je(),key:"popup",ref:X,monitorWindowResize:!0,disabled:Pt,align:x,onAlign:We},nc.createElement("div",{ref:Ae,className:Ct,onMouseEnter:P,onMouseLeave:k,onMouseDownCapture:q,onTouchStartCapture:U,onClick:H,style:qt(qt({},Wt),ot)},Mt))})});fXe.displayName="PopupInner";var pXe=fXe;var Qc=Z(we());var dXe=Z(Zn()),hXe=Qc.forwardRef(function(e,t){var r=e.prefixCls,n=e.visible,o=e.zIndex,i=e.children,a=e.mobile;a=a===void 0?{}:a;var u=a.popupClassName,p=a.popupStyle,h=a.popupMotion,g=h===void 0?{}:h,x=a.popupRender,b=e.onClick,T=Qc.useRef();Qc.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return T.current}}});var A=qt({zIndex:o},p),L=i;return Qc.Children.count(i)>1&&(L=Qc.createElement("div",{className:"".concat(r,"-content")},i)),x&&(L=x(L)),Qc.createElement(eE,Pn({visible:n,ref:T,removeOnLeave:!0},g),function(P,k){var q=P.className,U=P.style,H=(0,dXe.default)(r,u,q);return Qc.createElement("div",{ref:k,className:H,onClick:b,style:qt(qt({},U),A)},L)})});hXe.displayName="MobilePopupInner";var mXe=hXe;var uMr=["visible","mobile"],gXe=y1.forwardRef(function(e,t){var r=e.visible,n=e.mobile,o=Al(e,uMr),i=(0,LA.useState)(r),a=Kn(i,2),u=a[0],p=a[1],h=(0,LA.useState)(!1),g=Kn(h,2),x=g[0],b=g[1],T=qt(qt({},o),{},{visible:u});(0,LA.useEffect)(function(){p(r),r&&n&&b(JZe())},[r,n]);var A=x?y1.createElement(mXe,Pn({},T,{mobile:n,ref:t})):y1.createElement(pXe,Pn({},T,{ref:t}));return y1.createElement("div",null,y1.createElement(Ene,T),A)});gXe.displayName="Popup";var vXe=gXe;var yXe=Z(we()),cMr=yXe.createContext(null),zne=cMr;function Fne(){}function fMr(){return""}function pMr(e){return e?e.ownerDocument:window.document}var dMr=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function hMr(e){var t=function(r){rl(o,r);var n=nl(o);function o(i){var a;el(this,o),a=n.call(this,i),Ot(Jr(a),"popupRef",oc.createRef()),Ot(Jr(a),"triggerRef",oc.createRef()),Ot(Jr(a),"portalContainer",void 0),Ot(Jr(a),"attachId",void 0),Ot(Jr(a),"clickOutsideHandler",void 0),Ot(Jr(a),"touchOutsideHandler",void 0),Ot(Jr(a),"contextMenuOutsideHandler1",void 0),Ot(Jr(a),"contextMenuOutsideHandler2",void 0),Ot(Jr(a),"mouseDownTimeout",void 0),Ot(Jr(a),"focusTime",void 0),Ot(Jr(a),"preClickTime",void 0),Ot(Jr(a),"preTouchTime",void 0),Ot(Jr(a),"delayTimer",void 0),Ot(Jr(a),"hasPopupMouseDown",void 0),Ot(Jr(a),"onMouseEnter",function(p){var h=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",p),a.delaySetPopupVisible(!0,h,h?null:p)}),Ot(Jr(a),"onMouseMove",function(p){a.fireEvents("onMouseMove",p),a.setPoint(p)}),Ot(Jr(a),"onMouseLeave",function(p){a.fireEvents("onMouseLeave",p),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Ot(Jr(a),"onPopupMouseEnter",function(){a.clearDelayTimer()}),Ot(Jr(a),"onPopupMouseLeave",function(p){var h;p.relatedTarget&&!p.relatedTarget.setTimeout&&d1((h=a.popupRef.current)===null||h===void 0?void 0:h.getElement(),p.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Ot(Jr(a),"onFocus",function(p){a.fireEvents("onFocus",p),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))}),Ot(Jr(a),"onMouseDown",function(p){a.fireEvents("onMouseDown",p),a.preClickTime=Date.now()}),Ot(Jr(a),"onTouchStart",function(p){a.fireEvents("onTouchStart",p),a.preTouchTime=Date.now()}),Ot(Jr(a),"onBlur",function(p){a.fireEvents("onBlur",p),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)}),Ot(Jr(a),"onContextMenu",function(p){p.preventDefault(),a.fireEvents("onContextMenu",p),a.setPopupVisible(!0,p)}),Ot(Jr(a),"onContextMenuClose",function(){a.isContextMenuToShow()&&a.close()}),Ot(Jr(a),"onClick",function(p){if(a.fireEvents("onClick",p),a.focusTime){var h;if(a.preClickTime&&a.preTouchTime?h=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?h=a.preClickTime:a.preTouchTime&&(h=a.preTouchTime),Math.abs(h-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&p&&p.preventDefault&&p.preventDefault();var g=!a.state.popupVisible;(a.isClickToHide()&&!g||g&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,p)}),Ot(Jr(a),"onPopupMouseDown",function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var p;(p=a.context).onPopupMouseDown.apply(p,arguments)}}),Ot(Jr(a),"onDocumentClick",function(p){if(!(a.props.mask&&!a.props.maskClosable)){var h=p.target,g=a.getRootDomNode(),x=a.getPopupDomNode();(!d1(g,h)||a.isContextMenuOnly())&&!d1(x,h)&&!a.hasPopupMouseDown&&a.close()}}),Ot(Jr(a),"getRootDomNode",function(){var p=a.props.getTriggerDOMNode;if(p)return p(a.triggerRef.current);try{var h=EA(a.triggerRef.current);if(h)return h}catch(g){}return _Xe.default.findDOMNode(Jr(a))}),Ot(Jr(a),"getPopupClassNameFromAlign",function(p){var h=[],g=a.props,x=g.popupPlacement,b=g.builtinPlacements,T=g.prefixCls,A=g.alignPoint,L=g.getPopupClassNameFromAlign;return x&&b&&h.push(KZe(b,T,p,A)),L&&h.push(L(p)),h.join(" ")}),Ot(Jr(a),"getComponent",function(){var p=a.props,h=p.prefixCls,g=p.destroyPopupOnHide,x=p.popupClassName,b=p.onPopupAlign,T=p.popupMotion,A=p.popupAnimation,L=p.popupTransitionName,P=p.popupStyle,k=p.mask,q=p.maskAnimation,U=p.maskTransitionName,H=p.maskMotion,X=p.zIndex,ee=p.popup,ne=p.stretch,me=p.alignPoint,ue=p.mobile,Me=p.forceRender,ke=p.onPopupClick,Te=a.state,Ee=Te.popupVisible,Ze=Te.point,Qe=a.getPopupAlign(),Fe={};return a.isMouseEnterToShow()&&(Fe.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(Fe.onMouseLeave=a.onPopupMouseLeave),Fe.onMouseDown=a.onPopupMouseDown,Fe.onTouchStart=a.onPopupMouseDown,oc.createElement(vXe,Pn({prefixCls:h,destroyPopupOnHide:g,visible:Ee,point:me&&Ze,className:x,align:Qe,onAlign:b,animation:A,getClassNameFromAlign:a.getPopupClassNameFromAlign},Fe,{stretch:ne,getRootDomNode:a.getRootDomNode,style:P,mask:k,zIndex:X,transitionName:L,maskAnimation:q,maskTransitionName:U,maskMotion:H,ref:a.popupRef,motion:T,mobile:ue,forceRender:Me,onClick:ke}),typeof ee=="function"?ee():ee)}),Ot(Jr(a),"attachParent",function(p){xu.cancel(a.attachId);var h=a.props,g=h.getPopupContainer,x=h.getDocument,b=a.getRootDomNode(),T;g?(b||g.length===0)&&(T=g(b)):T=x(a.getRootDomNode()).body,T?T.appendChild(p):a.attachId=xu(function(){a.attachParent(p)})}),Ot(Jr(a),"getContainer",function(){if(!a.portalContainer){var p=a.props.getDocument,h=p(a.getRootDomNode()).createElement("div");h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.width="100%",a.portalContainer=h}return a.attachParent(a.portalContainer),a.portalContainer}),Ot(Jr(a),"setPoint",function(p){var h=a.props.alignPoint;!h||!p||a.setState({point:{pageX:p.pageX,pageY:p.pageY}})}),Ot(Jr(a),"handlePortalUpdate",function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)}),Ot(Jr(a),"triggerContextValue",{onPopupMouseDown:a.onPopupMouseDown});var u;return"popupVisible"in i?u=!!i.popupVisible:u=!!i.defaultPopupVisible,a.state={prevPopupVisible:u,popupVisible:u},dMr.forEach(function(p){a["fire".concat(p)]=function(h){a.fireEvents(p,h)}}),a}return tl(o,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,u=this.state;if(u.popupVisible){var p;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(p=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Dl(p,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(p=p||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Dl(p,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(p=p||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Dl(p,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Dl(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),xu.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,u=a.popupPlacement,p=a.popupAlign,h=a.builtinPlacements;return u&&h?ZZe(h,u,p):p}},{key:"setPopupVisible",value:function(a,u){var p=this.props.alignPoint,h=this.state.popupVisible;this.clearDelayTimer(),h!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:h}),this.props.onPopupVisibleChange(a)),p&&u&&a&&this.setPoint(u)}},{key:"delaySetPopupVisible",value:function(a,u,p){var h=this,g=u*1e3;if(this.clearDelayTimer(),g){var x=p?{pageX:p.pageX,pageY:p.pageY}:null;this.delayTimer=window.setTimeout(function(){h.setPopupVisible(a,x),h.clearDelayTimer()},g)}else this.setPopupVisible(a,p)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var u=this.props.children.props,p=this.props;return u[a]&&p[a]?this["fire".concat(a)]:u[a]||p[a]}},{key:"isClickToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("contextMenu")!==-1||p.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,u=a.action,p=a.hideAction;return u.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("hover")!==-1||p.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,u=a.action,p=a.hideAction;return u.indexOf("hover")!==-1||p.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("focus")!==-1||p.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,u=a.action,p=a.hideAction;return u.indexOf("focus")!==-1||p.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,u){var p=this.props.children.props[a];p&&p(u);var h=this.props[a];h&&h(u)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,u=this.props,p=u.children,h=u.forceRender,g=u.alignPoint,x=u.className,b=u.autoDestroy,T=oc.Children.only(p),A={key:"trigger"};this.isContextMenuToShow()?A.onContextMenu=this.onContextMenu:A.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(A.onClick=this.onClick,A.onMouseDown=this.onMouseDown,A.onTouchStart=this.onTouchStart):(A.onClick=this.createTwoChains("onClick"),A.onMouseDown=this.createTwoChains("onMouseDown"),A.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(A.onMouseEnter=this.onMouseEnter,g&&(A.onMouseMove=this.onMouseMove)):A.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?A.onMouseLeave=this.onMouseLeave:A.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(A.onFocus=this.onFocus,A.onBlur=this.onBlur):(A.onFocus=this.createTwoChains("onFocus"),A.onBlur=this.createTwoChains("onBlur"));var L=(0,xXe.default)(T&&T.props&&T.props.className,x);L&&(A.className=L);var P=qt({},A);SA(T)&&(P.ref=Xw(this.triggerRef,T.ref));var k=oc.cloneElement(T,P),q;return(a||this.popupRef.current||h)&&(q=oc.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&b&&(q=null),oc.createElement(zne.Provider,{value:this.triggerContextValue},k,q)}}],[{key:"getDerivedStateFromProps",value:function(a,u){var p=a.popupVisible,h={};return p!==void 0&&u.popupVisible!==p&&(h.popupVisible=p,h.prevPopupVisible=u.popupVisible),h}}]),o}(oc.Component);return Ot(t,"contextType",zne),Ot(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:fMr,getDocument:pMr,onPopupVisibleChange:Fne,afterPopupVisibleChange:Fne,onPopupAlign:Fne,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}var bXe=hMr(YZe);var ef={adjustX:1,adjustY:1},tf=[0,0],wXe={left:{points:["cr","cl"],overflow:ef,offset:[-4,0],targetOffset:tf},right:{points:["cl","cr"],overflow:ef,offset:[4,0],targetOffset:tf},top:{points:["bc","tc"],overflow:ef,offset:[0,-4],targetOffset:tf},bottom:{points:["tc","bc"],overflow:ef,offset:[0,4],targetOffset:tf},topLeft:{points:["bl","tl"],overflow:ef,offset:[0,-4],targetOffset:tf},leftTop:{points:["tr","tl"],overflow:ef,offset:[-4,0],targetOffset:tf},topRight:{points:["br","tr"],overflow:ef,offset:[0,-4],targetOffset:tf},rightTop:{points:["tl","tr"],overflow:ef,offset:[4,0],targetOffset:tf},bottomRight:{points:["tr","br"],overflow:ef,offset:[0,4],targetOffset:tf},rightBottom:{points:["bl","br"],overflow:ef,offset:[4,0],targetOffset:tf},bottomLeft:{points:["tl","bl"],overflow:ef,offset:[0,4],targetOffset:tf},leftBottom:{points:["br","bl"],overflow:ef,offset:[-4,0],targetOffset:tf}};var ez=Z(we()),EXe=Z(Zn());function tz(e){var t=e.showArrow,r=e.arrowContent,n=e.children,o=e.prefixCls,i=e.id,a=e.overlayInnerStyle,u=e.className,p=e.style;return ez.createElement("div",{className:(0,EXe.default)("".concat(o,"-content"),u),style:p},t!==!1&&ez.createElement("div",{className:"".concat(o,"-arrow"),key:"arrow"},r),ez.createElement("div",{className:"".concat(o,"-inner"),id:i,role:"tooltip",style:a},typeof n=="function"?n():n))}var mMr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],gMr=function(t,r){var n=t.overlayClassName,o=t.trigger,i=o===void 0?["hover"]:o,a=t.mouseEnterDelay,u=a===void 0?0:a,p=t.mouseLeaveDelay,h=p===void 0?.1:p,g=t.overlayStyle,x=t.prefixCls,b=x===void 0?"rc-tooltip":x,T=t.children,A=t.onVisibleChange,L=t.afterVisibleChange,P=t.transitionName,k=t.animation,q=t.motion,U=t.placement,H=U===void 0?"right":U,X=t.align,ee=X===void 0?{}:X,ne=t.destroyTooltipOnHide,me=ne===void 0?!1:ne,ue=t.defaultVisible,Me=t.getTooltipContainer,ke=t.overlayInnerStyle,Te=t.arrowContent,Ee=t.overlay,Ze=t.id,Qe=t.showArrow,Fe=Qe===void 0?!0:Qe,ze=Al(t,mMr),Ne=(0,oE.useRef)(null);(0,oE.useImperativeHandle)(r,function(){return Ne.current});var et=qt({},ze);"visible"in t&&(et.popupVisible=t.visible);var st=function(){return Une.createElement(tz,{showArrow:Fe,arrowContent:Te,key:"content",prefixCls:b,id:Ze,overlayInnerStyle:ke},Ee)},ft=!1,Ye=!1;if(typeof me=="boolean")ft=me;else if(me&&no(me)==="object"){var tt=me.keepParent;ft=tt===!0,Ye=tt===!1}return Une.createElement(bXe,Pn({popupClassName:n,prefixCls:b,popup:st,action:i,builtinPlacements:wXe,popupPlacement:H,ref:Ne,popupAlign:ee,getPopupContainer:Me,onPopupVisibleChange:A,afterPopupVisibleChange:L,popupTransitionName:P,popupAnimation:k,popupMotion:q,defaultPopupVisible:ue,destroyPopupOnHide:ft,autoDestroy:Ye,mouseLeaveDelay:h,popupStyle:g,mouseEnterDelay:u},et),T)},SXe=(0,oE.forwardRef)(gMr);var IXe=SXe;var vMr=sm.forwardRef(function(e,t){var r=e.visible,n=e.overlay,o=sm.useRef(null),i=Xw(t,o),a=sm.useRef(null);function u(){xu.cancel(a.current)}function p(){a.current=xu(function(){var h;(h=o.current)===null||h===void 0||h.forcePopupAlign()})}return sm.useEffect(function(){return r?p():u(),u},[r,n]),sm.createElement(IXe,Pn({ref:i},e))}),Bne=vMr;function Vne(e){var t;return t=function(r){rl(o,r);var n=nl(o);function o(){var i;return el(this,o),i=n.apply(this,arguments),i.state={visibles:{}},i.handleTooltipVisibleChange=function(a,u){i.setState(function(p){return{visibles:qt(qt({},p.visibles),{},Ot({},a,u))}})},i.handleWithTooltip=function(a){var u=a.value,p=a.dragging,h=a.index,g=a.disabled,x=Al(a,["value","dragging","index","disabled"]),b=i.props,T=b.tipFormatter,A=b.tipProps,L=b.handleStyle,P=b.getTooltipContainer,k=A.prefixCls,q=k===void 0?"rc-slider-tooltip":k,U=A.overlay,H=U===void 0?T(u):U,X=A.placement,ee=X===void 0?"top":X,ne=A.visible,me=ne===void 0?!1:ne,ue=Al(A,["prefixCls","overlay","placement","visible"]),Me;return Array.isArray(L)?Me=L[h]||L[0]:Me=L,PA.default.createElement(Bne,Pn({},ue,{getTooltipContainer:P,prefixCls:q,overlay:H,placement:ee,visible:!g&&(i.state.visibles[h]||p)||me,key:h}),PA.default.createElement(Zw,Pn({},x,{style:qt({},Me),value:u,onMouseEnter:function(){return i.handleTooltipVisibleChange(h,!0)},onMouseLeave:function(){return i.handleTooltipVisibleChange(h,!1)}})))},i}return tl(o,[{key:"render",value:function(){return PA.default.createElement(e,Pn({},this.props,{handle:this.handleWithTooltip}))}}]),o}(PA.default.Component),t.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},t}var rz=PZe;rz.Range=pq;rz.Handle=Zw;rz.createSliderWithTooltip=Vne;var nz=rz;var iE=Z(xt(),1),pi=Z(we(),1);var lm=Z(xt(),1),Eu=Z(we(),1);function yMr(e,t){function r(n){return n>="0"&&n<="9"}return e.split("").some(n=>!r(n)&&n!==t)}var TXe=(0,Eu.forwardRef)(function({className:t,value:r,onBlur:n=()=>{},onKeyDown:o=()=>{},onChange:i=()=>{},readOnly:a,tabIndex:u,placeholder:p},h){let[g,x]=(0,Eu.useState)(r),b=(0,Eu.useMemo)(()=>hr.getSettings().LANGUAGE_CODE===mv.DE?".":"/",[]),T=(0,Eu.useCallback)(L=>{let P=`${L.target.value}`;yMr(P,b)||P.length>10||(x(L.target.value),i(L.target.value))},[b]),A=(0,Eu.useCallback)(L=>{n(L,g)},[g,n]);return(0,Eu.useEffect)(()=>{x(r)},[r]),Eu.default.createElement("div",{className:"date-input-root"},Eu.default.createElement("input",{className:Et(a&&"readonly",t),ref:h,value:g,onBlur:A,onKeyDown:o,onChange:T,readOnly:a!=null?a:void 0,tabIndex:u!=null?u:void 0,placeholder:p!=null?p:void 0}))});TXe.propTypes={value:lm.default.string.isRequired,className:lm.default.string,onBlur:lm.default.func,onKeyDown:lm.default.func,onChange:lm.default.func,readOnly:lm.default.bool,tabIndex:lm.default.number,placeholder:lm.default.string};var MXe=TXe;var kA=MXe;var CXe=({values:e,min:t,max:r,onChange:n})=>{let[o,i]=(0,pi.useState)(e),[a,u]=(0,pi.useState)(!1),[p,h]=(0,pi.useState)(0),[g,x]=(0,pi.useState)(1),b=(0,pi.useRef)(),T=(0,pi.useRef)(),A=(0,pi.useRef)(),{start:L,end:P}=(0,pi.useMemo)(()=>({start:Ju(o[0]*1e3),end:Ju(o[1]*1e3)}),[o]),k=(0,pi.useCallback)((X,ee)=>{let ne=nC(ee).valueOf()/1e3,me=o[1];if(X.relatedTarget!==T.current&&X.relatedTarget!==A.current&&u(!1),!Qp(ne)||ne>me||ne<t){n([o[0],o[1]]),h(Date.now());return}n([ne,me])},[o]),q=(0,pi.useCallback)((X,ee)=>{let ne=o[0],me=nC(ee).valueOf()/1e3;if(X.relatedTarget!==b.current&&X.relatedTarget!==A.current&&u(!1),!Qp(me)||ne>me||me>r){n([o[0],o[1]]),x(Date.now());return}n([ne,me])},[o]),U=(0,pi.useCallback)(X=>{X.key==="Enter"&&(X.target===b.current&&T.current.focus(),X.target===T.current&&(X.target.blur(),u(!1)))},[]),H=(0,pi.useCallback)(()=>{a||b.current.focus(),u(X=>!X)},[]);return(0,pi.useEffect)(()=>{i(e)},[e]),pi.default.createElement("div",{className:"timeslider-controls-root"},pi.default.createElement(kA,{ref:b,key:p,value:L,onBlur:k,onKeyDown:U,readOnly:!a,tabIndex:a?void 0:-1}),pi.default.createElement("span",null,"\u2013"),pi.default.createElement(kA,{ref:T,key:g,value:P,onBlur:q,onKeyDown:U,readOnly:!a,tabIndex:a?void 0:-1}),pi.default.createElement("button",{ref:A,className:Et("edit-button",a&&"edit-state"),onClick:H},pi.default.createElement(qr,{name:"edit-inverse"})))};CXe.propTypes={values:iE.default.arrayOf(iE.default.number).isRequired,min:iE.default.number.isRequired,max:iE.default.number.isRequired,onChange:iE.default.func.isRequired};var AXe=CXe;var _1=Z(xt(),1),aE=Z(we(),1);var DXe=(0,aE.forwardRef)(function({className:t,posX:r,shouldUseDate:n,value:o},i){let a=(0,aE.useMemo)(()=>Array.isArray(o)?n?`${Ju(o[0]*1e3)} - ${Ju(o[1]*1e3)}`:`${o[0]} - ${o[1]}`:n?Ju(o*1e3):o,[o]);return aE.default.createElement("div",{ref:i,className:t,style:{transform:`translate(${r}px)`}},a)});DXe.propTypes={className:_1.default.string,posX:_1.default.number.isRequired,shouldUseDate:_1.default.bool.isRequired,value:_1.default.oneOfType([_1.default.array,_1.default.number]).isRequired};var oz=DXe;var NXe=(e,t,r,n)=>{let o=e.map(h=>(h-t[0])/(t[1]-t[0])),i=o[0]*n,a=o[1]*n,u=Gne(i,r,n),p=Gne(a,r,n);return{posMin:u,posMax:p}},OXe=(e,t,r,n)=>{let a=((e[1]-e[0])/2+e[0]-t[0])/(t[1]-t[0])*n;return Gne(a,r,n)},Gne=(e,t,r)=>e<t/2?0:e>r-t/2?r-t:e-t/2;var Hne=[1e3,1e3],Wne=e=>{let{title:t,values:r,timeRange:n,onChange:o,sliderProps:i,shouldUseDate:a,showControls:u}=e,[p,h]=(0,qo.useState)(r),[g,x]=(0,qo.useState)(0),[b,T]=(0,qo.useState)(0),[A,L]=(0,qo.useState)(0),[P,k]=(0,qo.useState)({min:0,max:0}),[q,U]=(0,qo.useState)(0),[H,X]=(0,qo.useState)(!1),ee=(0,qo.useRef)(),ne=(0,qo.useRef)(),me=(0,qo.useRef)(),ue=(0,qo.useCallback)(ke=>{let{posMin:Te,posMax:Ee}=NXe(ke,n,g,A);if(Math.abs(Te-Ee)<g){X(!0);let Qe=OXe(ke,n,b,A);U(Qe);return}X(!1),k({min:Te,max:Ee})},[n,g,A]),Me=(0,qo.useCallback)(ke=>{ue(ke),h(ke)},[ue]);return(0,qo.useEffect)(()=>{if(ee.current&&ne.current&&me.current){let ke=ee.current.getBoundingClientRect().width,Te=ne.current.getBoundingClientRect().width,Ee=me.current.getBoundingClientRect().width;k({min:0,max:ke-Te}),T(Ee),L(ke),x(Te)}},[]),(0,qo.useEffect)(()=>{h(r),ue(r)},[r,ue]),qo.default.createElement("div",{className:"timeslider-container"},qo.default.createElement("div",{className:"timeslider-control-container"},qo.default.createElement("label",null,t),u&&qo.default.createElement(AXe,{min:n[0],max:n[1],values:p,onChange:Me})),qo.default.createElement("div",{ref:ee,className:"slider-container"},qo.default.createElement(pq,Se({allowCross:!1,ariaLabelledByGroupForHandles:["min-value","max-value"],min:n[0],max:n[1],onChange:Me,onAfterChange:o,value:p},i)),qo.default.createElement(oz,{className:Et("tooltip min-value",H&&"labels-too-close"),posX:P.min,ref:ne,value:H?Hne[0]:p[0],shouldUseDate:a}),qo.default.createElement(oz,{className:Et("tooltip max-value",H&&"labels-too-close"),posX:P.max,value:H?Hne[1]:p[1],shouldUseDate:a}),qo.default.createElement(oz,{className:Et("tooltip min-max-value",H&&"labels-too-close"),posX:q,ref:me,value:H?p:Hne,shouldUseDate:a})))};Wne.defaultProps={timeRange:[1850,1970],shouldUseDate:!1,showControls:!1};Wne.propTypes={title:gd.default.string.isRequired,values:gd.default.arrayOf(gd.default.number),timeRange:gd.default.arrayOf(gd.default.number),onChange:gd.default.func.isRequired,sliderProps:gd.default.object,shouldUseDate:gd.default.bool,showControls:gd.default.bool};var LXe=Wne;var iz=LXe;var um=Z(we(),1);var $ne=Z(we(),1);var PXe=()=>{let e=vt(lZe),t=Rr(({snapshot:n})=>()=>Nt(void 0,null,function*(){let o=yield n.getPromise(wr),i=yield n.getPromise(Rv);Ge(o)&&Ge(i)&&i.setFilters(o)})),r=Rr(({snapshot:n})=>o=>Nt(void 0,null,function*(){let i=yield n.getPromise(wr),a=yield n.getPromise(Rv);Ge(i)&&Ge(a)&&a.setFilters(i,o)}));return(0,$ne.useEffect)(()=>{e===null?t():r(e)},[e]),(0,$ne.useEffect)(()=>()=>{t()},[]),null};var kXe=()=>{let e=vt(Q6),t=vt(Fre),r=vt(kv),n=Ar(Ww);return um.default.createElement(um.default.Fragment,null,um.default.createElement("div",{className:Et("plain-divider",r===Zi.FILTER&&e&&"filtered")},um.default.createElement("span",{className:Et("caret-container",r===Zi.FILTER&&e&&"filtered")},um.default.createElement(qr,{name:"caret"}))),um.default.createElement("div",{className:Et("filter-container",r===Zi.FILTER&&e&&"in")},r!==Zi.EDIT&&e&&um.default.createElement(iz,{title:`${de("geojsonlayerpanel-timefilter-title")}: `,timeRange:t,onChange:o=>n(o),values:t,sliderProps:{step:86400,draggableTrack:!0},shouldUseDate:!0,showControls:!0})),um.default.createElement(PXe,null))};var qXe=Z(xt(),1);var cm=Z(we(),1);var RXe=(e,t)=>{let r="data:text/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`${e}.json`),n.click()};var _Mr=()=>{let e=vt(sZe),[t,r]=Nn(kv),n=vt(Q6),o=(0,cm.useCallback)(()=>{r(a=>a===Zi.FILTER?Zi.INITIAL:Zi.FILTER)},[]),i=Rr(({snapshot:a})=>()=>Nt(void 0,null,function*(){let u=yield a.getPromise(pA),p=yield a.getPromise(Rv),h={type:"FeatureCollection",features:u},g=Ua.toPersistence(h),x=JSON.stringify(g),b=p.getMetadata("title");RXe(b,x)}),[]);return cm.default.createElement(cm.default.Fragment,null,cm.default.createElement(mn,{className:"geojson-headline--button export-button",disabled:!e,onClick:i,title:de("layermanagement-export-geojson")},cm.default.createElement(qr,{name:"export-geojson"})),cm.default.createElement(mn,{className:"geojson-headline--button filter-button",disabled:t===Zi.EDIT||!n,onClick:o,title:de("layermanagement-filter-geojson-features")},cm.default.createElement(qr,{name:"filter"})))},jXe=_Mr;var zXe=({selectedLayer:e})=>{let[t,r]=Nn(kv),n=Ar(Ww),o=Ar(Rv),i=Ar($s),a=Ar(Jp),u=Ar(ba),p=Ar(Ys),h=Ar(Jn),g=Ar(Vc),x=vt(wr),{title:b,description:T,timePublished:A,layerId:L}=(0,Mi.useMemo)(()=>({title:e==null?void 0:e.getMetadata(it.title),description:e==null?void 0:e.getMetadata(it.description),timePublished:e==null?void 0:e.getMetadata(it.timePublished),layerId:e==null?void 0:e.getMetadata(it.id)}),[e==null?void 0:e.getMetadata(it.title),e==null?void 0:e.getMetadata(it.timePublished)]),P=(0,Mi.useMemo)(()=>A!=null?A:de("geojson-featureview-no-time"),[A]),k=(0,Mi.useCallback)(()=>{i(null),r(Zi.INITIAL),n(null)},[]),q=(0,Mi.useCallback)(()=>{var ne;r(Zi.EDIT),g(Ws.DRAW),e.setVisibility(x,"none"),u(e.getGeoJson()),p({[it.title]:e.getMetadata(it.title),[it.description]:e.getMetadata(it.description),[it.thumbnailUrl]:e.getMetadata(it.thumbnailUrl)});let X=e.getMetadata(it.vectorMapId),ee=e.getMetadata(it.version);h({type:X?"remote":"local",id:X!=null?X:null,version:ee!=null?ee:null,layerRole:(ne=e.getMetadata(it.userRole))!=null?ne:null})},[e]),U=(0,Mi.useCallback)(()=>{e.setVisibility(x,"visible"),r(Zi.INITIAL),g(Ws.STANDARD)},[e]),H=(0,Mi.useCallback)(X=>{a({featureId:X,sourceId:L})},[L]);return(0,Mi.useEffect)(()=>(o(e),()=>{r(Zi.INITIAL),n(null),o(null)}),[e]),Mi.default.createElement(Mi.default.Fragment,null,Mi.default.createElement(cd,{title:de("geojsonlayerpanel-header-title"),onEditClick:t!==Zi.EDIT&&gZe(e)?q:void 0,onCloseClick:t===Zi.EDIT?U:k}),Mi.default.createElement("div",{className:"headline-container"},Mi.default.createElement("div",{className:"geojson-headline--date"},P),Mi.default.createElement("div",{className:"title-row"},Mi.default.createElement("div",{className:"geojson-headline--title"},b),Mi.default.createElement(jXe,null)),Mi.default.createElement("div",{className:"description-row"},Mi.default.createElement("div",{className:"geojson-headline--description"},T))),Mi.default.createElement(kXe,null),Mi.default.createElement(fZe,{className:Et("geojson-layer-feature-list-root ",t!==Zi.EDIT&&["in","scrollable"]),onFeatureClick:H}))};zXe.propTypes={selectedLayer:qXe.default.instanceOf(Ua)};var FXe=zXe;var UXe=FXe;var bi=Z(we(),1);var lE=Z(xt(),1);var fm=Z(we(),1);var xMr=()=>{let e=vt(wr),[t,r]=(0,fm.useState)(!0),n=vt(Ln),o=de(t?"layermanagement-deactivate-all-maps":"layermanagement-activate-all-maps"),i=(0,fm.useCallback)(()=>{n.forEach(a=>{a.setVisibility(e,t?"none":"visible")})},[e,t,n]);return(0,fm.useEffect)(()=>{if(e){let a=()=>{let p=n.length===0?!0:n.some(h=>h.isVisible(e));r(p)},u=()=>{a()};return e._loaded?a():e.on("load",a),e.on(xa.visibilityChanged,u),()=>{e.off(xa.visibilityChanged,u),e.off("load",a)}}},[e,n]),fm.default.createElement("button",{onClick:i,className:Et("deactivate-map-col-control",t?"deactivate":""),title:o,id:"deactivate-all-maps"},fm.default.createElement(Js,{name:"layermanagement-deactivate","aria-labelledby":"deactivate-all-maps",alt:o}))},BXe=xMr;var VXe=BXe;var Es=Z(we(),1);var az=Z(xt(),1);var GXe=(e,t)=>{for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].forEach(o=>{o.setOpacity(t,0),o.setVisibility(t,"visible")})},HXe=e=>e.slice().sort((t,r)=>{let n=t.getMetadata(it.timePublished),o=r.getMetadata(it.timePublished);return n>o?1:n<o?-1:0}),WXe=(e,t)=>{let r={};return e.forEach(n=>{n.move(t,null);let o=n.getMetadata(it.timePublished);o in r?r[o].push(n):r[o]=[n]}),r};var $Xe=({animationOptions:e={}})=>{let[t,r]=(0,Es.useState)(!1),[n,o]=(0,Es.useState)(void 0),[i,a]=(0,Es.useState)(!1),u=vt(wr),p=de(`dynamicmapvis-${i?"close":"open"}`),[h,g]=Nn(Ln),x=(0,Es.useRef)(!1),b=U=>{let{layers:H,delay:X=500}=U;H.forEach(ee=>{ee.setOpacity(u,0),ee.setVisibility(u,"visible")}),setTimeout(()=>{T(U)},X)},T=U=>{var me;let{layers:H,steps:X=.1,delay:ee=500,successCallback:ne}=U;if(x.current){let ue=((me=H[0].getOpacity(u))!=null?me:0)+X;ue>1?(H.forEach(Me=>{Me.setOpacity(u,1)}),Ge(ne)&&ne()):(H.forEach(Me=>{Me.setOpacity(u,ue)}),setTimeout(()=>{T(U)},ee))}},A=U=>{let{sortedLayers:H,delay:X=500}=U;if(GXe(H,u),x.current){let ne=Object.keys(H);if(ne.length>0){let me=ne[0],ue=H[me],ee=H,{[me]:Me}=ee,ke=wn(ee,[Ole(me)]),Te=()=>{A(Ft(Se({},U),{sortedLayers:ke}))};setTimeout(()=>{b(Ft(Se({},U),{layers:ue,successCallback:Te}),X)}),o(me)}else P()}},L=()=>{r(!0),x.current=!0;let U=HXe(h),H=WXe(U,u);g(U),A(Ft(Se({},e),{sortedLayers:H}))},P=()=>{r(!1),x.current=!1,o(void 0)},k=U=>{U.preventDefault(),i?(P(),a(!1)):a(!0)},q=n&&n.length>4?n.split(" ")[2]:n;return Es.default.createElement("div",{className:Et("vkf-dyn-vis-control",t&&"play",i&&"open"),title:p,"aria-label":p,id:"dynamic-map-visualization"},Es.default.createElement("button",{type:"button",className:"open-dyn-vis",onClick:k,"aria-labelledby":"dynamic-map-visualization"},Es.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 30 30",version:"1.1",xmlns:"http://www.w3.org/2000/svg",alt:p},Es.default.createElement("path",{className:"arrow",d:"M14.822,4.521c0.057,-0.014 0.117,-0.021 0.178,-0.021c1.561,0 3.047,0.348 4.385,0.97c1.342,0.611 2.573,1.513 3.589,2.699c0.83,0.969 1.452,2.052 1.868,3.192c0.425,1.136 0.658,2.363 0.658,3.639c0,1.561 -0.348,3.047 -0.97,4.385c-0.611,1.342 -1.513,2.573 -2.699,3.589c-0.969,0.83 -2.052,1.452 -3.192,1.868c-1.136,0.425 -2.363,0.658 -3.639,0.658c-1.561,0 -3.047,-0.348 -4.385,-0.97c-1.342,-0.611 -2.573,-1.513 -3.589,-2.699l-0.488,-0.569c-0.075,-0.088 -0.126,-0.188 -0.154,-0.292c-1.033,-1.48 -1.696,-3.234 -1.85,-5.122l-1.685,1.685c-0.293,0.293 -0.768,0.293 -1.061,0c-0.293,-0.292 -0.293,-0.768 0,-1.06l3,-3c0.293,-0.293 0.768,-0.293 1.061,0l3,3c0.292,0.292 0.292,0.768 0,1.06c-0.293,0.293 -0.768,0.293 -1.061,0l-1.754,-1.754c0.286,3.268 2.35,6.059 5.208,7.389c2.154,0.98 4.642,1.084 6.877,0.268c2.229,-0.835 4.051,-2.533 5.049,-4.678c0.98,-2.154 1.084,-4.642 0.268,-6.877c-0.835,-2.229 -2.533,-4.051 -4.678,-5.049c-3.095,-1.408 -6.88,-1.008 -9.613,1.333c-0.315,0.269 -0.788,0.233 -1.058,-0.082c-0.269,-0.314 -0.233,-0.788 0.082,-1.057c1.921,-1.646 4.287,-2.469 6.653,-2.505Z"}),Es.default.createElement("path",{className:"minute-hand",d:"M14.238,8.795l0,5.47c0,0.414 0.336,0.75 0.75,0.75c0.414,0 0.75,-0.336 0.75,-0.75l0,-5.47c0,-0.414 -0.336,-0.75 -0.75,-0.75c-0.414,-0 -0.75,0.336 -0.75,0.75Z"}),Es.default.createElement("path",{className:"hour-hand",d:"M21.18,14.263l-5.47,-0c-0.414,-0 -0.75,0.336 -0.75,0.75c-0,0.413 0.336,0.75 0.75,0.75l5.47,-0c0.414,-0 0.75,-0.337 0.75,-0.75c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))),Es.default.createElement("div",{className:"content"},Es.default.createElement("div",{className:Et("feedback",n!==void 0&&"running")},q),Es.default.createElement("button",{"aria-label":de("dynamicmapvis-start"),className:"start-button",onClick:L,tabIndex:i?void 0:-1,title:de("dynamicmapvis-start"),type:"button"},"Start"),Es.default.createElement("button",{"aria-label":de("dynamicmapvis-stop"),className:"stop-button",onClick:P,tabIndex:i?void 0:-1,title:de("dynamicmapvis-stop"),type:"button"},"Stop")))};$Xe.propTypes={animationOptions:az.default.shape({delay:az.default.number,steps:az.default.number})};var YXe=$Xe;var ZXe=YXe;var Mo=Z(we(),1);var Uv=Z(xt(),1);var sz=Z(we(),1);function KXe(e,t=300,r={}){let n=(0,sz.useRef)(null),o=(0,sz.useCallback)(i=>{n.current?(clearTimeout(n.current),n.current=null,e&&e(i)):n.current=setTimeout(()=>{r.onSingleTap&&r.onSingleTap(i),n.current=null},t)},[e,t,r.onSingleTap]);return e?{onClick:o}:{}}var rf=Z(we(),1);var RA=Z(xt(),1);var Yne=e=>{let{onEndDrag:t,onStartDrag:r,orientation:n="horizontal",layer:o}=e,i=vt(wr),[a,u]=(0,rf.useState)(o.getOpacity(i)*100),p=(0,rf.useRef)(null),h=0,g=100,x=(A,L)=>{if(n==="vertical"){var P=100-(A-h)/(g-h)*100;L.style.top=P+"%",L.innerHTML=A.toFixed(0)+"%";return}let k=(A-h)/(g-h)*100;L.style.left=k+"%",L.innerHTML=A+"%"},b=A=>{let{layerId:L}=A;if(L===o.getId()){let P=o.getOpacity(i)*100;u(P)}},T=A=>{u(A),Ge(i)&&o.setOpacity(i,A/100)};return(0,rf.useEffect)(()=>{x(Math.round(a),p.current)},[a]),(0,rf.useEffect)(()=>{if(i)return i.on(xa.opacityChanged,b),()=>{i.off(xa.opacityChanged,b)}},[i]),rf.default.createElement("div",{className:"opacity-container"},rf.default.createElement("div",{className:"slider-container"},rf.default.createElement(nz,{onAfterChange:t,onBeforeChange:r,onChange:T,value:a,vertical:n==="vertical"}),rf.default.createElement("div",{className:"tooltip value",ref:p},"100%")))};Yne.propTypes={onEndDrag:RA.default.func,onStartDrag:RA.default.func,layer:RA.default.object.isRequired,orientation:RA.default.oneOf(["horizontal","vertical"])};var sE=Z(we(),1),XXe=Z(xt(),1);var JXe=r=>{var n=r,{active:e}=n,t=wn(n,["active"]);let o=hr.getSettings();return sE.default.createElement("button",Se({className:Et("vkf-drag-button",e&&"active"),title:o==="de"?"Ebene verschieben":"Move layer"},t),sE.default.createElement("span",null),sE.default.createElement("span",null),sE.default.createElement("span",null),sE.default.createElement("span",null))};JXe.propTypes={active:XXe.default.bool};var QXe=JXe;var eJe=Z(xt(),1),Fv=Z(we(),1);var tJe=e=>{let{layer:t}=e,r=t.getMetadata(it.title),n=vt(wr),o=(0,Fv.useMemo)(()=>t.isVisible(n),[t,n]),[i,a]=(0,Fv.useState)(o),u=h=>{h.preventDefault(),h.stopPropagation(),a(!i),n&&t.setVisibility(n,i?"none":"visible")},p=({layerId:h,value:g})=>{h===t.getId()&&a(g==="visible")};return(0,Fv.useEffect)(()=>{if(n)return n.on(xa.visibilityChanged,p),()=>{n.off(xa.visibilityChanged,p)}},[n]),Fv.default.createElement("button",{className:Et("disable-layer minimize-tool",i?"record-visible":"record-hidden"),onClick:u,type:"button",title:de("layermanagement-show-map")},` ${de("layermanagement-show-map")}: ${r}`)};tJe.propTypes={layer:eJe.default.object};var rJe=tJe;var nf=Js;var Zne=Z(we(),1);var nJe=Z(xt(),1);var oJe=e=>{let{layer:t}=e,r=vt(wr),n=Ar(Ln),[o,i]=Nn(Jp);return Zne.default.createElement("button",{className:"remove-layer minimize-tool",onClick:u=>{u.stopPropagation(),Ge(r)&&(t.removeMapLibreLayers(r),n(p=>p.filter(h=>h.getId()!==t.getId())),t.getType()===Mn.VECTOR_MAP&&(o==null?void 0:o.sourceId)===t.getId()&&i(null))},type:"button",title:de("layermanagement-remove-map")},Zne.default.createElement(nf,{name:"layeraction-remove-map"}))};oJe.propTypes={layer:nJe.default.object.isRequired};var iJe=oJe;var jA=Z(we(),1),sJe=Z(xt(),1);var Kne=24,aJe=100,bMr={left:Kne+jre.width+aJe,right:Kne+qre.width+aJe,top:60,bottom:Kne},wMr={left:50,right:50,top:75,bottom:150},EMr=e=>({padding:e===fu.HORIZONTAL?bMr:wMr,animate:!1}),SMr=()=>({zoomToExtent:Rr(({snapshot:t})=>r=>Nt(void 0,null,function*(){let n=yield t.getPromise(wr),o=yield t.getPromise(Zb),i=EMr(o);if(Ge(n)){let a=r.getMetadata(it.bounds);n.fitBounds(a,i)}}),[])}),lz=SMr;var lJe=e=>{let{layer:t}=e,{zoomToExtent:r}=lz(),n=(0,jA.useCallback)(()=>{r(t)},[r,t]);return jA.default.createElement("button",{className:"zoom-layer minimize-tool",onClick:n,type:"button",title:de("layermanagement-zoom-to-map")},jA.default.createElement(nf,{name:"layeraction-center"}))};lJe.propTypes={layer:sJe.default.object.isRequired};var uJe=lJe;var Xne=Z(we(),1);var cJe=Z(xt(),1),fJe=e=>{let{layer:t}=e,r=vt(wr),n=Ar(Ln);return Xne.default.createElement("button",{className:"move-layer-top minimize-tool",onClick:i=>{i.stopPropagation(),t.moveToTop(r),n(a=>[...a.filter(u=>u!==t),t])},type:"button",title:de("layermanagement-move-top")},Xne.default.createElement(Js,{name:"layeraction-totop"}))};fJe.propTypes={layer:cJe.default.object.isRequired};var pJe=fJe;var of=Z(we(),1),dJe=Z(xt(),1);var hJe=({layer:e})=>{let[t,r]=(0,of.useState)(V6(e)),n=(0,of.useMemo)(()=>lA(e),[e]),{layerType:o,layerTitle:i,isMosaic:a,isRemoteVectorMap:u}=(0,of.useMemo)(()=>({layerType:e.getType(),layerTitle:e.getMetadata(it.title),isMosaic:e.getMetadata(it.type)===Mn.MOSAIC_MAP,isRemoteVectorMap:Ge(e.getMetadata(it.vectorMapId))}),[e]),p=(0,of.useCallback)(()=>{t!==n&&r(n)},[n]);return of.default.createElement("div",{className:"thumbnail-container"},of.default.createElement("img",{onError:p,src:t,alt:`Thumbnail Image of Map for ${i}`}),o===Mn.VECTOR_MAP&&of.default.createElement("span",{className:Et("vector-badge",!u&&"local-vector-badge")},de("vector-badge-title")),a&&of.default.createElement("span",{className:"mosaic-badge"},de("mosaic-badge-title")))};hJe.propTypes={layer:dJe.default.object.isRequired};var mJe=hJe;var qA=Z(we(),1);var gJe=Z(xt(),1),vJe=({layer:e})=>{let t=Ar(dk),r=(0,qA.useCallback)(()=>{t(e.getId())},[e]);return qA.default.createElement("button",{className:"show-original",onClick:r,type:"button",title:de("layermanagement-show-original")},qA.default.createElement(nf,{name:"layeraction-showoriginal"}))};vJe.propTypes={layer:gJe.default.object};var yJe=vJe;var zA=Z(we(),1),_Je=Z(xt(),1);var xJe=({layer:e})=>{let t=Ar($s),r=(0,zA.useCallback)(()=>{e&&Ge(e.getId())&&t(e.getId())},[e]);return zA.default.createElement("button",{className:"show-geojson-layer",onClick:r,type:"button",title:de("layermanagement-show-geojson")},zA.default.createElement(Js,{name:"layermanagement-show-geojson"}))};xJe.propTypes={layer:_Je.default.instanceOf(Ua).isRequired};var bJe=xJe;var wJe={LAYER:"LAYER"},EJe=e=>{let{id:t,index:r,layer:n,onMoveLayer:o}=e,[i,a]=(0,Mo.useState)(!1),[u,p]=(0,Mo.useState)(!1),[h,g]=(0,Mo.useState)(!1),[x,b]=(0,Mo.useState)(!1),T=(0,Mo.useRef)(null),A=hr.getSettings(),[{handlerId:L},P]=GP({accept:wJe.LAYER,collect(Fe){return{handlerId:Fe.getHandlerId()}},hover(Fe,ze){var lt;if(!T.current)return;let Ne=Fe.index,et=r;if(Ne===et)return;let st=(lt=T.current)==null?void 0:lt.getBoundingClientRect(),ft=(st.bottom-st.top)/2,tt=ze.getClientOffset().y-st.top;Ne<et&&tt<ft||Ne>et&&tt>ft||(o(Ne,et),Fe.index=et)}}),[{draggedItem:k,isDragging:q},U]=Xze({type:wJe.LAYER,item:()=>({id:t,index:r}),collect:Fe=>({isDragging:Fe.isDragging(),draggedItem:Fe.getItem()})}),H=()=>setTimeout(()=>{T.current!==null&&(T.current.contains(document.activeElement)||ee())},100),X=()=>{a(!0)},ee=()=>{a(!1)},ne=KXe(()=>{g(Fe=>!Fe)},500),me=()=>{p(!0)},ue=()=>{p(!1)};(0,Mo.useEffect)(()=>{i?k===null&&!x&&b(!0):k!==void 0&&!u&&b(!1)},[i,x,u,k]),U(P(T));let Me=n.getId(),ke=n.getType(),Te=n.getMetadata(it.timePublished),Ee=n.getMetadata(it.title),Qe=n.getMetadata(it.type)==="mosaic";return Mo.default.createElement("li",Ft(Se({className:Et("vkf-layermanagement-record",q&&"drag-and-drop-placeholder",h&&"show-actions",ke===Mn.VECTOR_MAP&&"geojson-data",x&&(k===null||k.id===Me)&&"force-hover"),id:r,"data-id":Me,"data-handler-id":L,onFocus:X,onBlur:H,onMouseEnter:X,onMouseOver:X,onMouseLeave:ee},ne),{ref:T}),Mo.default.createElement("div",{className:"visibility-container"},Mo.default.createElement(rJe,{layer:n})),Mo.default.createElement(mJe,{layer:n}),Mo.default.createElement("div",{className:"metadata-container"},Mo.default.createElement("h3",null,Ee),Mo.default.createElement("div",{className:"timestamps"},Mo.default.createElement("span",{className:"timestamps-label"},`${de("mapsearch-listelement-time")} ${Te}`))),Mo.default.createElement("div",{className:"control-container"},Mo.default.createElement(pJe,{layer:n}),Mo.default.createElement(iJe,{layer:n}),Mo.default.createElement(uJe,{layer:n}),ke!==Mn.VECTOR_MAP?Mo.default.createElement(yJe,{layer:n}):Mo.default.createElement(bJe,{layer:n}),!Qe&&A.LINK_TO_GEOREFERENCE!==void 0&&ke!==Mn.VECTOR_MAP&&Mo.default.createElement("button",{className:"georeference-update",title:`${de("layermangement-georef-update")} ...`,onClick:()=>{window.open(`${A.LINK_TO_GEOREFERENCE}?map_id=${Me}`,"_blank")}},Mo.default.createElement(Js,{name:"icon-point-move"})),Mo.default.createElement(Yne,{onStartDrag:me,onEndDrag:ue,orientation:"horizontal",layer:n})),Mo.default.createElement("div",{className:"drag-container"},Mo.default.createElement(QXe,{tabIndex:-1})))};EJe.propTypes={id:Uv.default.string,index:Uv.default.number,layer:Uv.default.oneOfType([Uv.default.instanceOf(Ua),Uv.default.instanceOf(jh)]),onMoveLayer:Uv.default.func,showActions:Uv.default.func};var SJe=EJe;var IJe=SJe;var ic=Z(we(),1);var TJe=()=>Rr(({set:e})=>()=>Nt(void 0,null,function*(){e(ba,structuredClone(uw)),e(Ys,{}),e(Jn,{type:Hi.REMOTE,id:null,layerRole:"owner"}),e(Vc,Ws.DRAW),e(la,ko.METADATA)}));function Jne(){let e=TJe(),t=Ar(mk),r=(0,ic.useCallback)(()=>{e()},[]),n=(0,ic.useCallback)(()=>{t(!0)},[]);return ic.default.createElement("div",{className:"geojson-container"},ic.default.createElement("div",{className:"geojson-action"},ic.default.createElement("button",{disabled:!nq(),onClick:r},ic.default.createElement(qr,{name:"addVectorMap"}),ic.default.createElement("span",null,de("layermanagement-create-vector-map")))),ic.default.createElement("div",{className:"geojson-action"},ic.default.createElement("button",{onClick:n},ic.default.createElement(nf,{name:"layermanagement-upload"}),ic.default.createElement("span",null,de("layermanagement-add-vector-map")))))}var MJe=({showControls:e={showBadge:!0,showHideButton:!0,showDynamicMapVisualization:!0},showHeader:t=!0})=>{let{showBadge:r,showDynamicMapVisualization:n,showHideButton:o}=e,[i,a]=(0,bi.useState)(!1),u=vt(wr),p=vt($s),[h,g]=Nn(Ln),x=(0,bi.useMemo)(()=>Ge(p),[p]),b=(0,bi.useMemo)(()=>h.toReversed(),[h]),T=(L,P)=>{let k=[...b],q=k.splice(L,1)[0];k.splice(P,0,q);let U=P-1,H=U<0?null:k[U].getMapLibreLayerId();q.move(u,H),g(k.reverse())},A=()=>{a(L=>!L)};return bi.default.createElement("div",{className:Et("vkf-layermanagement-root",!x&&"in",i&&"show-controls")},r&&h.length!==0&&bi.default.createElement("span",{className:"badge"},h.length),t&&bi.default.createElement("div",{className:"heading"},bi.default.createElement("span",{className:"header-label"},de("layermanagement-header-lbl")),bi.default.createElement("div",{className:"header-functions"},bi.default.createElement("span",{className:"deco-caret"},bi.default.createElement(qr,{name:"caret"})),bi.default.createElement("button",{className:"geojson-upload",onClick:A},bi.default.createElement(qr,{name:"uploadVectorMap"}),bi.default.createElement("span",{className:"label",id:"geojson-upload-label"},de("geojson-adddialog-title"))),o&&bi.default.createElement(VXe,null),n&&bi.default.createElement(ZXe,{animationOptions:{delay:30,steps:.01}}))),bi.default.createElement(Jne,null),bi.default.createElement("ul",{className:"layermanagement-body"},h===void 0||h.length===0?bi.default.createElement("li",{className:"empty"},bi.default.createElement("h4",null,de("layermanagement-start-msg-header")),bi.default.createElement("p",null,de("layermanagement-start-msg-body"))):b.map((L,P)=>{let k=L.getId();return bi.default.createElement(IJe,{onMoveLayer:T,layer:L,index:P,key:k,id:k})})))};MJe.propTypes={showControls:lE.default.shape({showBadge:lE.default.bool,showDynamicMapVisualization:lE.default.bool,showHideButton:lE.default.bool}),showHeader:lE.default.bool};var uz=MJe;var Vv=Z(we(),1);var Ez=Z(xt(),1);var cz=Z(we(),1);var CJe=()=>{let e=vt(yv),[t,r]=Nn(vv),n=(0,cz.useCallback)(o=>r(o),[]);return cz.default.createElement(iz,{title:de("timeslider-adjust-timeperiod"),timeRange:e,onChange:n,values:t,sliderProps:{draggableTrack:!0}})};CJe.propTypes={};var AJe=CJe;var fz=AJe;var bz=Z(we(),1);var b1=Z(we(),1),Hoe=Z(xt(),1);var Ol=Z(we(),1);var Bt=Z(xt()),kt=Z(we()),kMr=Z(jJe());function qJe(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function zJe(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function eoe(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return zJe(r.overflowY,t)||zJe(r.overflowX,t)||function(n){var o=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch(a){return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(e)}return!1}function hz(e,t,r,n,o,i,a,u){return i<e&&a>t||i>e&&a<t?0:i<=e&&u<=r||a>=t&&u>=r?i-e-n:a>t&&u<r||i<e&&u>r?a-t+o:0}var FJe=function(e,t){var r=window,n=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,u=t.skipOverflowHiddenElements,p=typeof a=="function"?a:function(Ae){return Ae!==a};if(!qJe(e))throw new TypeError("Invalid target");for(var h,g,x=document.scrollingElement||document.documentElement,b=[],T=e;qJe(T)&&p(T);){if((T=(g=(h=T).parentElement)==null?h.getRootNode().host||null:g)===x){b.push(T);break}T!=null&&T===document.body&&eoe(T)&&!eoe(document.documentElement)||T!=null&&eoe(T,u)&&b.push(T)}for(var A=r.visualViewport?r.visualViewport.width:innerWidth,L=r.visualViewport?r.visualViewport.height:innerHeight,P=window.scrollX||pageXOffset,k=window.scrollY||pageYOffset,q=e.getBoundingClientRect(),U=q.height,H=q.width,X=q.top,ee=q.right,ne=q.bottom,me=q.left,ue=o==="start"||o==="nearest"?X:o==="end"?ne:X+U/2,Me=i==="center"?me+H/2:i==="end"?ee:me,ke=[],Te=0;Te<b.length;Te++){var Ee=b[Te],Ze=Ee.getBoundingClientRect(),Qe=Ze.height,Fe=Ze.width,ze=Ze.top,Ne=Ze.right,et=Ze.bottom,st=Ze.left;if(n==="if-needed"&&X>=0&&me>=0&&ne<=L&&ee<=A&&X>=ze&&ne<=et&&me>=st&&ee<=Ne)return ke;var ft=getComputedStyle(Ee),Ye=parseInt(ft.borderLeftWidth,10),tt=parseInt(ft.borderTopWidth,10),lt=parseInt(ft.borderRightWidth,10),je=parseInt(ft.borderBottomWidth,10),ge=0,We=0,Oe="offsetWidth"in Ee?Ee.offsetWidth-Ee.clientWidth-Ye-lt:0,at="offsetHeight"in Ee?Ee.offsetHeight-Ee.clientHeight-tt-je:0,ot="offsetWidth"in Ee?Ee.offsetWidth===0?0:Fe/Ee.offsetWidth:0,Pt="offsetHeight"in Ee?Ee.offsetHeight===0?0:Qe/Ee.offsetHeight:0;if(x===Ee)ge=o==="start"?ue:o==="end"?ue-L:o==="nearest"?hz(k,k+L,L,tt,je,k+ue,k+ue+U,U):ue-L/2,We=i==="start"?Me:i==="center"?Me-A/2:i==="end"?Me-A:hz(P,P+A,A,Ye,lt,P+Me,P+Me+H,H),ge=Math.max(0,ge+k),We=Math.max(0,We+P);else{ge=o==="start"?ue-ze-tt:o==="end"?ue-et+je+at:o==="nearest"?hz(ze,et,Qe,tt,je+at,ue,ue+U,U):ue-(ze+Qe/2)+at/2,We=i==="start"?Me-st-Ye:i==="center"?Me-(st+Fe/2)+Oe/2:i==="end"?Me-Ne+lt+Oe:hz(st,Ne,Fe,Ye,lt+Oe,Me,Me+H,H);var Mt=Ee.scrollLeft,Dt=Ee.scrollTop;ue+=Dt-(ge=Math.max(0,Math.min(Dt+ge/Pt,Ee.scrollHeight-Qe/Pt+at))),Me+=Mt-(We=Math.max(0,Math.min(Mt+We/ot,Ee.scrollWidth-Fe/ot+Oe)))}ke.push({el:Ee,top:ge,left:We})}return ke};var ZA=function(){return ZA=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ZA.apply(this,arguments)};var RMr=0;function eD(){}function jMr(e,t){if(!e)return;FJe(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:o,top:i,left:a}=n;o.scrollTop=i,o.scrollLeft=a})}function UJe(e,t,r){return e===t||t instanceof r.Node&&e.contains&&e.contains(t)}function roe(e,t){let r;function n(){r&&clearTimeout(r)}function o(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];n(),r=setTimeout(()=>{r=null,e(...a)},t)}return o.cancel=n,o}function wa(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return t.some(u=>(u&&u(n,...i),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function vd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=>{t.forEach(o=>{typeof o=="function"?o(n):o&&(o.current=n)})}}function qMr(){return String(RMr++)}function zMr(e){let{isOpen:t,resultCount:r,previousResultCount:n}=e;return t?r?r!==n?`${r} result${r===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function mz(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=YJe(t,n)?t[n]:e[n],r),{})}function YJe(e,t){return e[t]!==void 0}function JA(e){let{key:t,keyCode:r}=e;return r>=37&&r<=40&&t.indexOf("Arrow")!==0?`Arrow${t}`:t}function QA(e,t,r,n,o){if(o===void 0&&(o=!0),r===0)return-1;let i=r-1;(typeof t!="number"||t<0||t>=r)&&(t=e>0?-1:i+1);let a=t+e;a<0?a=o?i:0:a>i&&(a=o?0:i);let u=x1(e,a,r,n,o);return u===-1?t>=r?-1:t:u}function x1(e,t,r,n,o){let i=n(t);if(!i||!i.hasAttribute("disabled"))return t;if(e>0){for(let a=t+1;a<r;a++)if(!n(a).hasAttribute("disabled"))return a}else for(let a=t-1;a>=0;a--)if(!n(a).hasAttribute("disabled"))return a;return o?e>0?x1(1,0,r,n,!1):x1(-1,r-1,r,n,!1):-1}function BJe(e,t,r,n){return n===void 0&&(n=!0),t.some(o=>o&&(UJe(o,e,r)||n&&UJe(o,r.document.activeElement,r)))}var FMr=roe(e=>{KJe(e).textContent=""},500);function ZJe(e,t){let r=KJe(t);e&&(r.textContent=e,FMr(t))}function KJe(e){e===void 0&&(e=document);let t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var XJe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function UMr(e,t,r){let{props:n,type:o}=e,i={};Object.keys(t).forEach(a=>{BMr(a,e,t,r),r[a]!==t[a]&&(i[a]=r[a])}),n.onStateChange&&Object.keys(i).length&&n.onStateChange(Se({type:o},i))}function BMr(e,t,r,n){let{props:o,type:i}=t,a=`on${ooe(e)}Change`;o[a]&&n[e]!==void 0&&n[e]!==r[e]&&o[a](Se({type:i},n))}function VMr(e,t){return t.changes}function GMr(e){let{selectedItem:t,itemToString:r}=e;return t?`${r(t)} has been selected.`:""}var HMr=roe((e,t)=>{ZJe(e(),t)},200),WMr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?kt.useLayoutEffect:kt.useEffect;function JJe(e){let{id:t=`downshift-${qMr()}`,labelId:r,menuId:n,getItemId:o,toggleButtonId:i,inputId:a}=e;return(0,kt.useRef)({labelId:r||`${t}-label`,menuId:n||`${t}-menu`,getItemId:o||(p=>`${t}-item-${p}`),toggleButtonId:i||`${t}-toggle-button`,inputId:a||`${t}-input`}).current}function noe(e,t,r){return e!==void 0?e:r.length===0?-1:r.indexOf(t)}function $Mr(e){return e?String(e):""}function VJe(e){return /^\S{1}$/.test(e)}function ooe(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`}function _z(e){let t=(0,kt.useRef)(e);return t.current=e,t}function QJe(e,t,r){let n=(0,kt.useRef)(),o=(0,kt.useRef)(),i=(0,kt.useCallback)((x,b)=>{o.current=b,x=mz(x,b.props);let T=e(x,b);return b.props.stateReducer(x,Ft(Se({},b),{changes:T}))},[e]),[a,u]=(0,kt.useReducer)(i,t),p=_z(r),h=(0,kt.useCallback)(x=>u(Se({props:p.current},x)),[p]),g=o.current;return(0,kt.useEffect)(()=>{g&&n.current&&n.current!==a&&UMr(g,mz(n.current,g.props),a),n.current=a},[a,r,g]),[a,h]}function eQe(e,t,r){let[n,o]=QJe(e,t,r);return[mz(n,r),o]}var XA={itemToString:$Mr,stateReducer:VMr,getA11ySelectionMessage:GMr,scrollIntoView:jMr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function Nl(e,t,r){r===void 0&&(r=XJe);let n=e[`default${ooe(t)}`];return n!==void 0?n:r[t]}function KA(e,t,r){r===void 0&&(r=XJe);let n=e[t];if(n!==void 0)return n;let o=e[`initial${ooe(t)}`];return o!==void 0?o:Nl(e,t,r)}function tQe(e){let t=KA(e,"selectedItem"),r=KA(e,"isOpen"),n=KA(e,"highlightedIndex"),o=KA(e,"inputValue");return{highlightedIndex:n<0&&t&&r?e.items.indexOf(t):n,isOpen:r,selectedItem:t,inputValue:o}}function uE(e,t,r,n){let{items:o,initialHighlightedIndex:i,defaultHighlightedIndex:a}=e,{selectedItem:u,highlightedIndex:p}=t;return o.length===0?-1:i!==void 0&&p===i?i:a!==void 0?a:u?r===0?o.indexOf(u):QA(r,o.indexOf(u),o.length,n,!1):r===0?-1:r<0?o.length-1:0}function rQe(e,t,r,n){let o=(0,kt.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,kt.useEffect)(()=>{let i=()=>{o.current.isMouseDown=!0},a=g=>{o.current.isMouseDown=!1,e&&!BJe(g.target,t.map(x=>x.current),r)&&n()},u=()=>{o.current.isTouchMove=!1},p=()=>{o.current.isTouchMove=!0},h=g=>{e&&!o.current.isTouchMove&&!BJe(g.target,t.map(x=>x.current),r,!1)&&n()};return r.addEventListener("mousedown",i),r.addEventListener("mouseup",a),r.addEventListener("touchstart",u),r.addEventListener("touchmove",p),r.addEventListener("touchend",h),function(){r.removeEventListener("mousedown",i),r.removeEventListener("mouseup",a),r.removeEventListener("touchstart",u),r.removeEventListener("touchmove",p),r.removeEventListener("touchend",h)}},[e,r]),o}var ioe=()=>eD;function gz(e,t,r){let p=r,{isInitialMount:n,highlightedIndex:o,items:i,environment:a}=p,u=wn(p,["isInitialMount","highlightedIndex","items","environment"]);(0,kt.useEffect)(()=>{n||HMr(()=>e(Se({highlightedIndex:o,highlightedItem:i[o],resultCount:i.length},u)),a.document)},t)}function nQe(e){let{highlightedIndex:t,isOpen:r,itemRefs:n,getItemNodeFromIndex:o,menuElement:i,scrollIntoView:a}=e,u=(0,kt.useRef)(!0);return WMr(()=>{t<0||!r||!Object.keys(n.current).length||(u.current===!1?u.current=!0:a(o(t),i))},[t]),u}var aoe=eD;function oQe(e,t,r){let{type:n,props:o}=t,i;switch(n){case r.ItemMouseMove:i={highlightedIndex:t.disabled?-1:t.index};break;case r.MenuMouseLeave:i={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:i={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:uE(o,e,0)};break;case r.FunctionOpenMenu:i={isOpen:!0,highlightedIndex:uE(o,e,0)};break;case r.FunctionCloseMenu:i={isOpen:!1};break;case r.FunctionSetHighlightedIndex:i={highlightedIndex:t.highlightedIndex};break;case r.FunctionSetInputValue:i={inputValue:t.inputValue};break;case r.FunctionReset:i={highlightedIndex:Nl(o,"highlightedIndex"),isOpen:Nl(o,"isOpen"),selectedItem:Nl(o,"selectedItem"),inputValue:Nl(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.");}return Se(Se({},e),i)}function GJe(e){for(var t=e.keysSoFar,r=e.highlightedIndex,n=e.items,o=e.itemToString,i=e.getItemNodeFromIndex,a=t.toLowerCase(),u=0;u<n.length;u++){var p=(u+r+1)%n.length,h=n[p];if(h!==void 0&&o(h).toLowerCase().startsWith(a)){var g=i(p);if(!(g!=null&&g.hasAttribute("disabled")))return p}}return r}var bOn={items:Bt.default.array.isRequired,itemToString:Bt.default.func,getA11yStatusMessage:Bt.default.func,getA11ySelectionMessage:Bt.default.func,circularNavigation:Bt.default.bool,highlightedIndex:Bt.default.number,defaultHighlightedIndex:Bt.default.number,initialHighlightedIndex:Bt.default.number,isOpen:Bt.default.bool,defaultIsOpen:Bt.default.bool,initialIsOpen:Bt.default.bool,selectedItem:Bt.default.any,initialSelectedItem:Bt.default.any,defaultSelectedItem:Bt.default.any,id:Bt.default.string,labelId:Bt.default.string,menuId:Bt.default.string,getItemId:Bt.default.func,toggleButtonId:Bt.default.string,stateReducer:Bt.default.func,onSelectedItemChange:Bt.default.func,onHighlightedIndexChange:Bt.default.func,onStateChange:Bt.default.func,onIsOpenChange:Bt.default.func,environment:Bt.default.shape({addEventListener:Bt.default.func,removeEventListener:Bt.default.func,document:Bt.default.shape({getElementById:Bt.default.func,activeElement:Bt.default.any,body:Bt.default.any})})};function YMr(e){var t=e.isOpen,r=e.resultCount,n=e.previousResultCount;return t?r?r!==n?"".concat(r," result").concat(r===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var ZMr=ZA(ZA({},XA),{getA11yStatusMessage:YMr}),KMr=eD,soe=0,loe=1,uoe=2,coe=3,foe=4,poe=5,doe=6,hoe=7,vz=8,iQe=9,aQe=10,moe=11,sQe=12,goe=13,voe=14,yoe=15,lQe=16,uQe=17,cQe=18,fQe=19,_oe=20,toe=21,pQe=22,dQe=Object.freeze({__proto__:null,MenuKeyDownArrowDown:soe,MenuKeyDownArrowUp:loe,MenuKeyDownEscape:uoe,MenuKeyDownHome:coe,MenuKeyDownEnd:foe,MenuKeyDownEnter:poe,MenuKeyDownSpaceButton:doe,MenuKeyDownCharacter:hoe,MenuBlur:vz,MenuMouseLeave:iQe,ItemMouseMove:aQe,ItemClick:moe,ToggleButtonClick:sQe,ToggleButtonKeyDownArrowDown:goe,ToggleButtonKeyDownArrowUp:voe,ToggleButtonKeyDownCharacter:yoe,FunctionToggleMenu:lQe,FunctionOpenMenu:uQe,FunctionCloseMenu:cQe,FunctionSetHighlightedIndex:fQe,FunctionSelectItem:_oe,FunctionSetInputValue:toe,FunctionReset:pQe});function XMr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case moe:i={isOpen:Nl(n,"isOpen"),highlightedIndex:Nl(n,"highlightedIndex"),selectedItem:n.items[t.index]};break;case yoe:{let a=t.key,u=`${e.inputValue}${a}`,p=GJe({keysSoFar:u,highlightedIndex:e.selectedItem?n.items.indexOf(e.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Se({inputValue:u},p>=0&&{selectedItem:n.items[p]})}break;case goe:i={highlightedIndex:uE(n,e,1,t.getItemNodeFromIndex),isOpen:!0};break;case voe:i={highlightedIndex:uE(n,e,-1,t.getItemNodeFromIndex),isOpen:!0};break;case poe:case doe:i=Se({isOpen:Nl(n,"isOpen"),highlightedIndex:Nl(n,"highlightedIndex")},e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex]});break;case coe:i={highlightedIndex:x1(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case foe:i={highlightedIndex:x1(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case uoe:i={isOpen:!1,highlightedIndex:-1};break;case vz:i={isOpen:!1,highlightedIndex:-1};break;case hoe:{let a=t.key,u=`${e.inputValue}${a}`,p=GJe({keysSoFar:u,highlightedIndex:e.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Se({inputValue:u},p>=0&&{highlightedIndex:p})}break;case soe:i={highlightedIndex:QA(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case loe:i={highlightedIndex:QA(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case _oe:i={selectedItem:t.selectedItem};break;default:return oQe(e,t,dQe);}return Se(Se({},e),i)}hQe.stateChangeTypes=dQe;function hQe(e){e===void 0&&(e={}),KMr(e,hQe);let t=Se(Se({},ZMr),e),{items:r,scrollIntoView:n,environment:o,initialIsOpen:i,defaultIsOpen:a,itemToString:u,getA11ySelectionMessage:p,getA11yStatusMessage:h}=t,g=tQe(t),[x,b]=eQe(XMr,g,t),{isOpen:T,highlightedIndex:A,selectedItem:L,inputValue:P}=x,k=(0,kt.useRef)(null),q=(0,kt.useRef)(null),U=(0,kt.useRef)({}),H=(0,kt.useRef)(!0),X=(0,kt.useRef)(null),ee=JJe(t),ne=(0,kt.useRef)(),me=(0,kt.useRef)(!0),ue=_z({state:x,props:t}),Me=(0,kt.useCallback)(We=>U.current[ee.getItemId(We)],[ee]);gz(h,[T,A,P,r],Se({isInitialMount:me.current,previousResultCount:ne.current,items:r,environment:o,itemToString:u},x)),gz(p,[L],Se({isInitialMount:me.current,previousResultCount:ne.current,items:r,environment:o,itemToString:u},x));let ke=nQe({menuElement:q.current,highlightedIndex:A,isOpen:T,itemRefs:U,scrollIntoView:n,getItemNodeFromIndex:Me});(0,kt.useEffect)(()=>(X.current=roe(We=>{We({type:toe,inputValue:""})},500),()=>{X.current.cancel()}),[]),(0,kt.useEffect)(()=>{P&&X.current(b)},[b,P]),aoe({isInitialMount:me.current,props:t,state:x}),(0,kt.useEffect)(()=>{if(me.current){(i||a||T)&&q.current&&q.current.focus();return}if(T){q.current&&q.current.focus();return}o.document.activeElement===q.current&&k.current&&(H.current=!1,k.current.focus())},[T]),(0,kt.useEffect)(()=>{me.current||(ne.current=r.length)});let Te=rQe(T,[q,k],o,()=>{b({type:vz})}),Ee=ioe("getMenuProps","getToggleButtonProps");(0,kt.useEffect)(()=>{me.current=!1},[]),(0,kt.useEffect)(()=>{T||(U.current={})},[T]);let Ze=(0,kt.useMemo)(()=>({ArrowDown(We){We.preventDefault(),b({type:goe,getItemNodeFromIndex:Me,shiftKey:We.shiftKey})},ArrowUp(We){We.preventDefault(),b({type:voe,getItemNodeFromIndex:Me,shiftKey:We.shiftKey})}}),[b,Me]),Qe=(0,kt.useMemo)(()=>({ArrowDown(We){We.preventDefault(),b({type:soe,getItemNodeFromIndex:Me,shiftKey:We.shiftKey})},ArrowUp(We){We.preventDefault(),b({type:loe,getItemNodeFromIndex:Me,shiftKey:We.shiftKey})},Home(We){We.preventDefault(),b({type:coe,getItemNodeFromIndex:Me})},End(We){We.preventDefault(),b({type:foe,getItemNodeFromIndex:Me})},Escape(){b({type:uoe})},Enter(We){We.preventDefault(),b({type:poe})}," "(We){We.preventDefault(),b({type:doe})}}),[b,Me]),Fe=(0,kt.useCallback)(()=>{b({type:lQe})},[b]),ze=(0,kt.useCallback)(()=>{b({type:cQe})},[b]),Ne=(0,kt.useCallback)(()=>{b({type:uQe})},[b]),et=(0,kt.useCallback)(We=>{b({type:fQe,highlightedIndex:We})},[b]),st=(0,kt.useCallback)(We=>{b({type:_oe,selectedItem:We})},[b]),ft=(0,kt.useCallback)(()=>{b({type:pQe})},[b]),Ye=(0,kt.useCallback)(We=>{b({type:toe,inputValue:We})},[b]),tt=(0,kt.useCallback)(We=>Se({id:ee.labelId,htmlFor:ee.toggleButtonId},We),[ee]),lt=(0,kt.useCallback)(function(We,Oe){let Ue=We===void 0?{}:We,{onMouseLeave:at,refKey:ot="ref",onKeyDown:Pt,onBlur:Mt,ref:Dt}=Ue,Ae=wn(Ue,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:Lt=!1}=Oe===void 0?{}:Oe,Wt=ue.current.state,Ct=ht=>{let yt=JA(ht);yt&&Qe[yt]?Qe[yt](ht):VJe(yt)&&b({type:hoe,key:yt,getItemNodeFromIndex:Me})},ce=()=>{if(H.current===!1){H.current=!0;return}!Te.current.isMouseDown&&b({type:vz})},qe=()=>{b({type:iQe})};return Ee("getMenuProps",Lt,ot,q),Se(Ft(Se({[ot]:vd(Dt,ht=>{q.current=ht}),id:ee.menuId,role:"listbox","aria-labelledby":ee.labelId,tabIndex:-1},Wt.isOpen&&Wt.highlightedIndex>-1&&{"aria-activedescendant":ee.getItemId(Wt.highlightedIndex)}),{onMouseLeave:wa(at,qe),onKeyDown:wa(Pt,Ct),onBlur:wa(Mt,ce)}),Ae)},[b,ue,Qe,Te,Ee,ee,Me]),je=(0,kt.useCallback)(function(We,Oe){let ce=We===void 0?{}:We,{onClick:at,onKeyDown:ot,refKey:Pt="ref",ref:Mt}=ce,Dt=wn(ce,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:Ae=!1}=Oe===void 0?{}:Oe,Lt=()=>{b({type:sQe})},Wt=qe=>{let Ue=JA(qe);Ue&&Ze[Ue]?Ze[Ue](qe):VJe(Ue)&&b({type:yoe,key:Ue,getItemNodeFromIndex:Me})},Ct=Se({[Pt]:vd(Mt,qe=>{k.current=qe}),id:ee.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":ue.current.state.isOpen,"aria-labelledby":`${ee.labelId} ${ee.toggleButtonId}`},Dt);return Dt.disabled||(Ct.onClick=wa(at,Lt),Ct.onKeyDown=wa(ot,Wt)),Ee("getToggleButtonProps",Ae,Pt,k),Ct},[b,ue,Ze,Ee,ee,Me]),ge=(0,kt.useCallback)(function(We){let yt=We===void 0?{}:We,{item:Oe,index:at,onMouseMove:ot,onClick:Pt,refKey:Mt="ref",ref:Dt,disabled:Ae}=yt,Lt=wn(yt,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Wt,props:Ct}=ue.current,ce=()=>{at!==Wt.highlightedIndex&&(ke.current=!1,b({type:aQe,index:at,disabled:Ae}))},qe=()=>{b({type:moe,index:at})},Ue=noe(at,Oe,Ct.items);if(Ue<0)throw new Error("Pass either item or item index in getItemProps!");let ht=Se({disabled:Ae,role:"option","aria-selected":`${Ue===Wt.highlightedIndex}`,id:ee.getItemId(Ue),[Mt]:vd(Dt,mt=>{mt&&(U.current[ee.getItemId(Ue)]=mt)})},Lt);return Ae||(ht.onClick=wa(Pt,qe)),ht.onMouseMove=wa(ot,ce),ht},[b,ue,ke,ee]);return{getToggleButtonProps:je,getLabelProps:tt,getMenuProps:lt,getItemProps:ge,toggleMenu:Fe,openMenu:Ne,closeMenu:ze,setHighlightedIndex:et,selectItem:st,reset:ft,setInputValue:Ye,highlightedIndex:A,isOpen:T,selectedItem:L,inputValue:P}}var xoe=0,boe=1,woe=2,Eoe=3,Soe=4,Ioe=5,Toe=6,yz=7,mQe=8,gQe=9,Moe=10,vQe=11,yQe=12,_Qe=13,xQe=14,bQe=15,Coe=16,wQe=17,EQe=18,Aoe=19,SQe=Object.freeze({__proto__:null,InputKeyDownArrowDown:xoe,InputKeyDownArrowUp:boe,InputKeyDownEscape:woe,InputKeyDownHome:Eoe,InputKeyDownEnd:Soe,InputKeyDownEnter:Ioe,InputChange:Toe,InputBlur:yz,MenuMouseLeave:mQe,ItemMouseMove:gQe,ItemClick:Moe,ToggleButtonClick:vQe,FunctionToggleMenu:yQe,FunctionOpenMenu:_Qe,FunctionCloseMenu:xQe,FunctionSetHighlightedIndex:bQe,FunctionSelectItem:Coe,FunctionSetInputValue:wQe,FunctionReset:EQe,ControlledPropUpdatedSelectedItem:Aoe});function JMr(e){let t=tQe(e),{selectedItem:r}=t,{inputValue:n}=t;return n===""&&r&&e.defaultInputValue===void 0&&e.initialInputValue===void 0&&e.inputValue===void 0&&(n=e.itemToString(r)),Ft(Se({},t),{inputValue:n})}var wOn={items:Bt.default.array.isRequired,itemToString:Bt.default.func,getA11yStatusMessage:Bt.default.func,getA11ySelectionMessage:Bt.default.func,circularNavigation:Bt.default.bool,highlightedIndex:Bt.default.number,defaultHighlightedIndex:Bt.default.number,initialHighlightedIndex:Bt.default.number,isOpen:Bt.default.bool,defaultIsOpen:Bt.default.bool,initialIsOpen:Bt.default.bool,selectedItem:Bt.default.any,initialSelectedItem:Bt.default.any,defaultSelectedItem:Bt.default.any,inputValue:Bt.default.string,defaultInputValue:Bt.default.string,initialInputValue:Bt.default.string,id:Bt.default.string,labelId:Bt.default.string,menuId:Bt.default.string,getItemId:Bt.default.func,inputId:Bt.default.string,toggleButtonId:Bt.default.string,stateReducer:Bt.default.func,onSelectedItemChange:Bt.default.func,onHighlightedIndexChange:Bt.default.func,onStateChange:Bt.default.func,onIsOpenChange:Bt.default.func,onInputValueChange:Bt.default.func,environment:Bt.default.shape({addEventListener:Bt.default.func,removeEventListener:Bt.default.func,document:Bt.default.shape({getElementById:Bt.default.func,activeElement:Bt.default.any,body:Bt.default.any})})};function QMr(e,t,r){let n=(0,kt.useRef)(),[o,i]=QJe(e,t,r);return(0,kt.useEffect)(()=>{YJe(r,"selectedItem")&&(n.current!==r.selectedItem&&i({type:Aoe,inputValue:r.itemToString(r.selectedItem)}),n.current=o.selectedItem===n.current?r.selectedItem:o.selectedItem)}),[mz(o,r),i]}var eCr=eD,tCr=Ft(Se({},XA),{getA11yStatusMessage:zMr,circularNavigation:!0});function rCr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case Moe:i={isOpen:Nl(n,"isOpen"),highlightedIndex:Nl(n,"highlightedIndex"),selectedItem:n.items[t.index],inputValue:n.itemToString(n.items[t.index])};break;case xoe:e.isOpen?i={highlightedIndex:QA(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:uE(n,e,1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case boe:e.isOpen?i={highlightedIndex:QA(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:uE(n,e,-1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case Ioe:i=Se({},e.isOpen&&e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex],isOpen:Nl(n,"isOpen"),highlightedIndex:Nl(n,"highlightedIndex"),inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case woe:i=Se({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case Eoe:i={highlightedIndex:x1(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case Soe:i={highlightedIndex:x1(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case yz:i=Se({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&t.selectItem&&{selectedItem:n.items[e.highlightedIndex],inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case Toe:i={isOpen:!0,highlightedIndex:Nl(n,"highlightedIndex"),inputValue:t.inputValue};break;case Coe:i={selectedItem:t.selectedItem,inputValue:n.itemToString(t.selectedItem)};break;case Aoe:i={inputValue:t.inputValue};break;default:return oQe(e,t,SQe);}return Se(Se({},e),i)}xz.stateChangeTypes=SQe;function xz(e){e===void 0&&(e={}),eCr(e,xz);let t=Se(Se({},tCr),e),{initialIsOpen:r,defaultIsOpen:n,items:o,scrollIntoView:i,environment:a,getA11yStatusMessage:u,getA11ySelectionMessage:p,itemToString:h}=t,g=JMr(t),[x,b]=QMr(rCr,g,t),{isOpen:T,highlightedIndex:A,selectedItem:L,inputValue:P}=x,k=(0,kt.useRef)(null),q=(0,kt.useRef)({}),U=(0,kt.useRef)(null),H=(0,kt.useRef)(null),X=(0,kt.useRef)(null),ee=(0,kt.useRef)(!0),ne=JJe(t),me=(0,kt.useRef)(),ue=_z({state:x,props:t}),Me=(0,kt.useCallback)(Oe=>q.current[ne.getItemId(Oe)],[ne]);gz(u,[T,A,P,o],Se({isInitialMount:ee.current,previousResultCount:me.current,items:o,environment:a,itemToString:h},x)),gz(p,[L],Se({isInitialMount:ee.current,previousResultCount:me.current,items:o,environment:a,itemToString:h},x));let ke=nQe({menuElement:k.current,highlightedIndex:A,isOpen:T,itemRefs:q,scrollIntoView:i,getItemNodeFromIndex:Me});aoe({isInitialMount:ee.current,props:t,state:x}),(0,kt.useEffect)(()=>{(r||n||T)&&U.current&&U.current.focus()},[]),(0,kt.useEffect)(()=>{ee.current||(me.current=o.length)});let Te=rQe(T,[X,k,H],a,()=>{b({type:yz,selectItem:!1})}),Ee=ioe("getInputProps","getComboboxProps","getMenuProps");(0,kt.useEffect)(()=>{ee.current=!1},[]),(0,kt.useEffect)(()=>{T||(q.current={})},[T]);let Ze=(0,kt.useMemo)(()=>({ArrowDown(Oe){Oe.preventDefault(),b({type:xoe,shiftKey:Oe.shiftKey,getItemNodeFromIndex:Me})},ArrowUp(Oe){Oe.preventDefault(),b({type:boe,shiftKey:Oe.shiftKey,getItemNodeFromIndex:Me})},Home(Oe){ue.current.state.isOpen&&(Oe.preventDefault(),b({type:Eoe,getItemNodeFromIndex:Me}))},End(Oe){ue.current.state.isOpen&&(Oe.preventDefault(),b({type:Soe,getItemNodeFromIndex:Me}))},Escape(Oe){let at=ue.current.state;(at.isOpen||at.inputValue||at.selectedItem||at.highlightedIndex>-1)&&(Oe.preventDefault(),b({type:woe}))},Enter(Oe){let at=ue.current.state;!at.isOpen||at.highlightedIndex<0||Oe.which===229||(Oe.preventDefault(),b({type:Ioe,getItemNodeFromIndex:Me}))}}),[b,ue,Me]),Qe=(0,kt.useCallback)(Oe=>Se({id:ne.labelId,htmlFor:ne.inputId},Oe),[ne]),Fe=(0,kt.useCallback)(function(Oe,at){let Lt=Oe===void 0?{}:Oe,{onMouseLeave:ot,refKey:Pt="ref",ref:Mt}=Lt,Dt=wn(Lt,["onMouseLeave","refKey","ref"]),{suppressRefError:Ae=!1}=at===void 0?{}:at;return Ee("getMenuProps",Ae,Pt,k),Se({[Pt]:vd(Mt,Wt=>{k.current=Wt}),id:ne.menuId,role:"listbox","aria-labelledby":ne.labelId,onMouseLeave:wa(ot,()=>{b({type:mQe})})},Dt)},[b,Ee,ne]),ze=(0,kt.useCallback)(function(Oe){let zr=Oe===void 0?{}:Oe,{item:at,index:ot,refKey:Pt="ref",ref:Mt,onMouseMove:Dt,onMouseDown:Ae,onClick:Lt,onPress:Wt,disabled:Ct}=zr,ce=wn(zr,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:qe,state:Ue}=ue.current,ht=noe(ot,at,qe.items);if(ht<0)throw new Error("Pass either item or item index in getItemProps!");let yt="onClick",mt=Lt,_t=()=>{ot!==Ue.highlightedIndex&&(ke.current=!1,b({type:gQe,index:ot,disabled:Ct}))},Yt=()=>{b({type:Moe,index:ot})},nt=on=>on.preventDefault();return Se(Ft(Se({[Pt]:vd(Mt,on=>{on&&(q.current[ne.getItemId(ht)]=on)}),disabled:Ct,role:"option","aria-selected":`${ht===Ue.highlightedIndex}`,id:ne.getItemId(ht)},!Ct&&{[yt]:wa(mt,Yt)}),{onMouseMove:wa(Dt,_t),onMouseDown:wa(Ae,nt)}),ce)},[b,ue,ke,ne]),Ne=(0,kt.useCallback)(function(Oe){let Lt=Oe===void 0?{}:Oe,{onClick:at,onPress:ot,refKey:Pt="ref",ref:Mt}=Lt,Dt=wn(Lt,["onClick","onPress","refKey","ref"]),Ae=()=>{b({type:vQe}),!ue.current.state.isOpen&&U.current&&U.current.focus()};return Se(Se({[Pt]:vd(Mt,Wt=>{H.current=Wt}),id:ne.toggleButtonId,tabIndex:-1},!Dt.disabled&&{onClick:wa(at,Ae)}),Dt)},[b,ue,ne]),et=(0,kt.useCallback)(function(Oe,at){let Yt=Oe===void 0?{}:Oe,{onKeyDown:ot,onChange:Pt,onInput:Mt,onBlur:Dt,onChangeText:Ae,refKey:Lt="ref",ref:Wt}=Yt,Ct=wn(Yt,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:ce=!1}=at===void 0?{}:at;Ee("getInputProps",ce,Lt,U);let qe=ue.current.state,Ue=nt=>{let zr=JA(nt);zr&&Ze[zr]&&Ze[zr](nt)},ht=nt=>{b({type:Toe,inputValue:nt.target.value})},yt=()=>{qe.isOpen&&!Te.current.isMouseDown&&b({type:yz,selectItem:!0})},mt="onChange",_t={};return Ct.disabled||(_t={[mt]:wa(Pt,Mt,ht),onKeyDown:wa(ot,Ue),onBlur:wa(Dt,yt)}),Se(Se(Ft(Se({[Lt]:vd(Wt,nt=>{U.current=nt}),id:ne.inputId,"aria-autocomplete":"list","aria-controls":ne.menuId},qe.isOpen&&qe.highlightedIndex>-1&&{"aria-activedescendant":ne.getItemId(qe.highlightedIndex)}),{"aria-labelledby":ne.labelId,autoComplete:"off",value:qe.inputValue}),_t),Ct)},[b,Ze,ue,Te,Ee,ne]),st=(0,kt.useCallback)(function(Oe,at){let Ae=Oe===void 0?{}:Oe,{refKey:ot="ref",ref:Pt}=Ae,Mt=wn(Ae,["refKey","ref"]),{suppressRefError:Dt=!1}=at===void 0?{}:at;return Ee("getComboboxProps",Dt,ot,X),Se({[ot]:vd(Pt,Lt=>{X.current=Lt}),role:"combobox","aria-haspopup":"listbox","aria-owns":ne.menuId,"aria-expanded":ue.current.state.isOpen},Mt)},[ue,Ee,ne]),ft=(0,kt.useCallback)(()=>{b({type:yQe})},[b]),Ye=(0,kt.useCallback)(()=>{b({type:xQe})},[b]),tt=(0,kt.useCallback)(()=>{b({type:_Qe})},[b]),lt=(0,kt.useCallback)(Oe=>{b({type:bQe,highlightedIndex:Oe})},[b]),je=(0,kt.useCallback)(Oe=>{b({type:Coe,selectedItem:Oe})},[b]),ge=(0,kt.useCallback)(Oe=>{b({type:wQe,inputValue:Oe})},[b]),We=(0,kt.useCallback)(()=>{b({type:EQe})},[b]);return{getItemProps:ze,getLabelProps:Qe,getMenuProps:Fe,getInputProps:et,getComboboxProps:st,getToggleButtonProps:Ne,toggleMenu:ft,openMenu:tt,closeMenu:Ye,setHighlightedIndex:lt,setInputValue:ge,selectItem:je,reset:We,highlightedIndex:A,isOpen:T,selectedItem:L,inputValue:P}}var IQe={activeIndex:-1,selectedItems:[]};function HJe(e,t){return KA(e,t,IQe)}function WJe(e,t){return Nl(e,t,IQe)}function nCr(e){let t=HJe(e,"activeIndex"),r=HJe(e,"selectedItems");return{activeIndex:t,selectedItems:r}}function $Je(e){if(e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)return!1;let t=e.target;return!(t instanceof HTMLInputElement&&t.value!==""&&(t.selectionStart!==0||t.selectionEnd!==0))}function oCr(e){let{removedSelectedItem:t,itemToString:r}=e;return`${r(t)} has been removed.`}var EOn={selectedItems:Bt.default.array,initialSelectedItems:Bt.default.array,defaultSelectedItems:Bt.default.array,itemToString:Bt.default.func,getA11yRemovalMessage:Bt.default.func,stateReducer:Bt.default.func,activeIndex:Bt.default.number,initialActiveIndex:Bt.default.number,defaultActiveIndex:Bt.default.number,onActiveIndexChange:Bt.default.func,onSelectedItemsChange:Bt.default.func,keyNavigationNext:Bt.default.string,keyNavigationPrevious:Bt.default.string,environment:Bt.default.shape({addEventListener:Bt.default.func,removeEventListener:Bt.default.func,document:Bt.default.shape({getElementById:Bt.default.func,activeElement:Bt.default.any,body:Bt.default.any})})},iCr={itemToString:XA.itemToString,stateReducer:XA.stateReducer,environment:XA.environment,getA11yRemovalMessage:oCr,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},aCr=eD,Doe=0,Noe=1,Ooe=2,Loe=3,Poe=4,koe=5,Roe=6,joe=7,qoe=8,zoe=9,Foe=10,Uoe=11,Boe=12,sCr=Object.freeze({__proto__:null,SelectedItemClick:Doe,SelectedItemKeyDownDelete:Noe,SelectedItemKeyDownBackspace:Ooe,SelectedItemKeyDownNavigationNext:Loe,SelectedItemKeyDownNavigationPrevious:Poe,DropdownKeyDownNavigationPrevious:koe,DropdownKeyDownBackspace:Roe,DropdownClick:joe,FunctionAddSelectedItem:qoe,FunctionRemoveSelectedItem:zoe,FunctionSetSelectedItems:Foe,FunctionSetActiveIndex:Uoe,FunctionReset:Boe});function lCr(e,t){let{type:r,index:n,props:o,selectedItem:i}=t,{activeIndex:a,selectedItems:u}=e,p;switch(r){case Doe:p={activeIndex:n};break;case Poe:p={activeIndex:a-1<0?0:a-1};break;case Loe:p={activeIndex:a+1>=u.length?-1:a+1};break;case Ooe:case Noe:{let h=a;u.length===1?h=-1:a===u.length-1&&(h=u.length-2),p={selectedItems:[...u.slice(0,a),...u.slice(a+1)],activeIndex:h};break}case koe:p={activeIndex:u.length-1};break;case Roe:p={selectedItems:u.slice(0,u.length-1)};break;case qoe:p={selectedItems:[...u,i]};break;case joe:p={activeIndex:-1};break;case zoe:{let h=a,g=u.indexOf(i);g>=0&&(u.length===1?h=-1:g===u.length-1&&(h=u.length-2),p={selectedItems:[...u.slice(0,g),...u.slice(g+1)],activeIndex:h});break}case Foe:{let{selectedItems:h}=t;p={selectedItems:h};break}case Uoe:{let{activeIndex:h}=t;p={activeIndex:h};break}case Boe:p={activeIndex:WJe(o,"activeIndex"),selectedItems:WJe(o,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.");}return Se(Se({},e),p)}TQe.stateChangeTypes=sCr;function TQe(e){e===void 0&&(e={}),aCr(e,TQe);let t=Se(Se({},iCr),e),{getA11yRemovalMessage:r,itemToString:n,environment:o,keyNavigationNext:i,keyNavigationPrevious:a}=t,[u,p]=eQe(lCr,nCr(t),t),{activeIndex:h,selectedItems:g}=u,x=(0,kt.useRef)(!0),b=(0,kt.useRef)(null),T=(0,kt.useRef)(g),A=(0,kt.useRef)();A.current=[];let L=_z({state:u,props:t});(0,kt.useEffect)(()=>{if(!x.current){if(g.length<T.current.length){let Me=T.current.find(ke=>g.indexOf(ke)<0);ZJe(r({itemToString:n,resultCount:g.length,removedSelectedItem:Me,activeIndex:h,activeSelectedItem:g[h]}),o.document)}T.current=g}},[g.length]),(0,kt.useEffect)(()=>{x.current||(h===-1&&b.current?b.current.focus():A.current[h]&&A.current[h].focus())},[h]),aoe({isInitialMount:x.current,props:t,state:u});let P=ioe("getDropdownProps");(0,kt.useEffect)(()=>{x.current=!1},[]);let k=(0,kt.useMemo)(()=>({[a](){p({type:Poe})},[i](){p({type:Loe})},Delete(){p({type:Noe})},Backspace(){p({type:Ooe})}}),[p,i,a]),q=(0,kt.useMemo)(()=>({[a](Me){$Je(Me)&&p({type:koe})},Backspace(Me){$Je(Me)&&p({type:Roe})}}),[p,a]),U=(0,kt.useCallback)(function(Me){let Ye=Me===void 0?{}:Me,{refKey:ke="ref",ref:Te,onClick:Ee,onKeyDown:Ze,selectedItem:Qe,index:Fe}=Ye,ze=wn(Ye,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:Ne}=L.current;if(noe(Fe,Qe,Ne.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let st=()=>{p({type:Doe,index:Fe})},ft=tt=>{let lt=JA(tt);lt&&k[lt]&&k[lt](tt)};return Se({[ke]:vd(Te,tt=>{tt&&A.current.push(tt)}),tabIndex:Fe===Ne.activeIndex?0:-1,onClick:wa(Ee,st),onKeyDown:wa(Ze,ft)},ze)},[p,L,k]),H=(0,kt.useCallback)(function(Me,ke){let ft=Me===void 0?{}:Me,{refKey:Te="ref",ref:Ee,onKeyDown:Ze,onClick:Qe,preventKeyAction:Fe=!1}=ft,ze=wn(ft,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:Ne=!1}=ke===void 0?{}:ke;P("getDropdownProps",Ne,Te,b);let et=Ye=>{let tt=JA(Ye);tt&&q[tt]&&q[tt](Ye)},st=()=>{p({type:joe})};return Se(Se({[Te]:vd(Ee,Ye=>{Ye&&(b.current=Ye)})},!Fe&&{onKeyDown:wa(Ze,et),onClick:wa(Qe,st)}),ze)},[p,q,P]),X=(0,kt.useCallback)(Me=>{p({type:qoe,selectedItem:Me})},[p]),ee=(0,kt.useCallback)(Me=>{p({type:zoe,selectedItem:Me})},[p]),ne=(0,kt.useCallback)(Me=>{p({type:Foe,selectedItems:Me})},[p]),me=(0,kt.useCallback)(Me=>{p({type:Uoe,activeIndex:Me})},[p]),ue=(0,kt.useCallback)(()=>{p({type:Boe})},[p]);return{getSelectedItemProps:U,getDropdownProps:H,addSelectedItem:X,removeSelectedItem:ee,setSelectedItems:ne,setActiveIndex:me,reset:ue,selectedItems:g,activeIndex:h}}var Bv=Z(xt(),1);function Voe({buttonProps:e,fetchInputItems:t,label:r,itemToString:n,inputProps:o,onSelectedItemChange:i,timeout:a=300}){let[u,p]=(0,Ol.useState)([]),[h,g]=(0,Ol.useState)(void 0),x=(0,Ol.useRef)(),b=(0,Ol.useRef)(null),T=Ze=>{clearTimeout(b.current),b.current=setTimeout(()=>{t(Ze).then(Qe=>p(Qe))},a)},A=({inputValue:Ze})=>{h!==void 0&&g(void 0),T(Ze)},L=({selectedItem:Ze})=>{i!==void 0&&i(Ze),g(Ze)},{isOpen:P,getToggleButtonProps:k,getLabelProps:q,getMenuProps:U,getInputProps:H,getComboboxProps:X,getItemProps:ee,highlightedIndex:ne}=xz({items:u,itemToString:n,onInputValueChange:A,onSelectedItemChange:L}),Te=e!=null?e:{},{onClick:me}=Te,ue=wn(Te,["onClick"]),Ee=H(),{ref:Me}=Ee,ke=wn(Ee,["ref"]);return Ol.default.createElement("div",{className:"vkf-autocomplete-container"},Ol.default.createElement("label",Ft(Se({},q()),{id:ke["aria-labelledby"],className:"visually-hidden"}),r!==void 0?r:o.placeholder),Ol.default.createElement("div",Se({className:"form-group"},X()),Ol.default.createElement("input",Se(Ft(Se({},ke),{ref:Ze=>{Me(Ze),x.current=Ze},type:"text"}),o)),Ol.default.createElement("button",Se(Se(Ft(Se({type:"button"},k()),{"aria-label":"toggle menu"}),ue),me!==void 0?{onClick:()=>{me(h,x.current!==null?x.current.value:"")}}:{}),"\u2193")),Ol.default.createElement("div",{className:"autocomplete-dropdown"},Ol.default.createElement("ul",Ft(Se({className:"autocomplete-result-list"},U()),{id:ke["aria-controls"]}),P&&u.map((Ze,Qe)=>Ol.default.createElement("li",Se({className:Et("ui-menu-item",ne===Qe&&"highlighted",h===Ze&&"selected"),key:`${Ze.label}${Qe}`},ee({item:Ze,index:Qe})),Ze.label)))))}Voe.propTypes={buttonProps:Bv.default.object,fetchInputItems:Bv.default.func,label:Bv.default.string,inputProps:Bv.default.object,itemToString:Bv.default.func,onSelectedItemChange:Bv.default.func,timeout:Bv.default.number};var MQe=Z(hv(),1),Goe=(e,t,r)=>{let n=e+"?format=json&q="+t;return MQe.default.get(n).then(o=>{let a=o.data.map(u=>({label:u.display_name,value:u.display_name,lonlat:{x:parseFloat(u.lon),y:parseFloat(u.lat)},type:u.type}));return r!==void 0&&r(),a})};var uCr=e=>e?e.label:"",CQe=e=>{let{onSelectPosition:t,searchUrl:r}=e,[n,o]=(0,b1.useState)(!1),i=Ar(Ii),a=(0,b1.useCallback)(p=>(o(!0),Goe(r,p,()=>{o(!1)})),[r]),u=(p,h)=>{p!==void 0?t(p):Goe(r,h).then(g=>{if(g.length>0)t(g[0]);else throw new Error(de("placenamesearch-unknown-placename"))}).catch(()=>{i({id:"placenamesearch",type:"warning",text:de("placenamesearch-unknown-placename")})})};return b1.default.createElement("div",{className:"gazetteersearch-container"},b1.default.createElement(Voe,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:u,"aria-label":de("placenamesearch-submit"),title:de("placenamesearch-submit")},fetchInputItems:a,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:de("placenamesearch-placeholder")},itemToString:uCr,onSelectedItemChange:u}))};CQe.propTypes={onSelectPosition:Hoe.default.func.isRequired,searchUrl:Hoe.default.string.isRequired};var AQe=CQe;var DQe=Z(xt(),1),NQe=({searchUrl:e})=>{let t=vt(wr),r=(0,bz.useCallback)(n=>{if(t){let o=[n.lonlat.x,n.lonlat.y];t.flyTo({center:o,zoom:12})}},[t]);return bz.default.createElement(AQe,{onSelectPosition:r,searchUrl:e})};NQe.propTypes={searchUrl:DQe.default.string.isRequired};var wz=NQe;var OQe=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let n=vt(l9e);return Vv.default.createElement("div",{className:Et("vkf-spatialsearch-root",!n&&"in")},Vv.default.createElement("div",{className:"spatialsearch-inner-container"},Vv.default.createElement("div",{className:"spatialsearch-content-panel"},Vv.default.createElement("div",{className:"body-container"},Vv.default.createElement(wz,{searchUrl:hr.getNominatimUrl()}),Vv.default.createElement(fz,null),Vv.default.createElement($Ye,{customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})))))};OQe.propTypes={customQuery:Ez.default.array,MapSearchListItemComponent:Ez.default.elementType,mosaicMode:Ez.default.bool};var LQe=OQe;var In=Z(we(),1),o8=Z(xt(),1);var Gv=Z(we(),1),w1=Z(xt(),1);var PQe=({isOpen:e,onClose:t,modalClassName:r,renderContent:n,renderFooter:o,title:i})=>Gv.default.createElement(Gh,{className:"vkf-modal",onHide:t,show:e,dialogClassName:r},Gv.default.createElement(OC,null,Gv.default.createElement(LC,null,i),Gv.default.createElement(mn,{className:"close-button",onClick:t},Gv.default.createElement(qr,{name:"close"}))),Gv.default.createElement(AC,null,n()),o!==void 0&&Gv.default.createElement(NC,null,o()));PQe.propTypes={isOpen:w1.default.bool,onClose:w1.default.func,modalClassName:w1.default.string,renderContent:w1.default.func,renderFooter:w1.default.func,title:w1.default.string};var kQe=PQe;var af=kQe;var ME=Z(we(),1),Prt=Z(hv(),1),yD=Z(xt(),1);var cCr=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var ol=cCr;var pm={PROPERTYCHANGE:"propertychange"};var fCr=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),Hv=fCr;function tD(e,t){return e>t?1:e<t?-1:0}function cE(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var o=void 0;if(r>0){for(o=1;o<n;++o)if(e[o]<t)return o-1}else if(r<0){for(o=1;o<n;++o)if(e[o]<=t)return o}else for(o=1;o<n;++o){if(e[o]==t)return o;if(e[o]<t)return typeof r=="function"?r(t,e[o-1],e[o])>0?o-1:o:e[o-1]-t<t-e[o]?o-1:o}return n-1}function RQe(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,o=0;o<n;o++)e[e.length]=r[o]}function Sz(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function jQe(e,t,r){var n=t||tD;return e.every(function(o,i){if(i===0)return!0;var a=n(e[i-1],o);return!(a>0||r&&a===0)})}function Wv(){return!0}function dm(){return!1}function hm(){}function qQe(e){var t=!1,r,n,o;return function(){var i=Array.prototype.slice.call(arguments);return(!t||this!==o||!Sz(i,n))&&(t=!0,o=this,n=i,r=e.apply(this,arguments)),r}}var pCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dCr=function(e){pCr(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var o=this.listeners_||(this.listeners_={}),i=o[r]||(o[r]=[]);i.indexOf(n)===-1&&i.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",o=n?r:r.type,i=this.listeners_&&this.listeners_[o];if(i){var a=n?new ol(r):r;a.target||(a.target=this.eventTarget_||this);var u=this.dispatching_||(this.dispatching_={}),p=this.pendingRemovals_||(this.pendingRemovals_={});o in u||(u[o]=0,p[o]=0),++u[o];for(var h,g=0,x=i.length;g<x;++g)if("handleEvent"in i[g]?h=i[g].handleEvent(a):h=i[g].call(this,a),h===!1||a.propagationStopped){h=!1;break}if(--u[o]===0){var b=p[o];for(delete p[o];b--;)this.removeEventListener(o,hm);delete u[o]}return h}},t.prototype.disposeInternal=function(){this.listeners_&&Kc(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var o=this.listeners_&&this.listeners_[r];if(o){var i=o.indexOf(n);i!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(o[i]=hm,++this.pendingRemovals_[r]):(o.splice(i,1),o.length===0&&delete this.listeners_[r]))}},t}(Hv),sf=dCr;var yr={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function Sn(e,t,r,n,o){if(n&&n!==e&&(r=r.bind(n)),o){var i=r;r=function(){e.removeEventListener(t,r),i.apply(this,arguments)}}var a={target:e,type:t,listener:r};return e.addEventListener(t,r),a}function fE(e,t,r,n){return Sn(e,t,r,n,!0)}function ao(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Kc(e))}var hCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Iz=function(e){hCr(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(yr.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var o=r.length,i=new Array(o),a=0;a<o;++a)i[a]=Sn(this,r[a],n);return i}else return Sn(this,r,n)},t.prototype.onceInternal=function(r,n){var o;if(Array.isArray(r)){var i=r.length;o=new Array(i);for(var a=0;a<i;++a)o[a]=fE(this,r[a],n)}else o=fE(this,r,n);return n.ol_key=o,o},t.prototype.unInternal=function(r,n){var o=n.ol_key;if(o)mCr(o);else if(Array.isArray(r))for(var i=0,a=r.length;i<a;++i)this.removeEventListener(r[i],n);else this.removeEventListener(r,n)},t}(sf);Iz.prototype.on;Iz.prototype.once;Iz.prototype.un;function mCr(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)ao(e[t]);else ao(e)}var Tz=Iz;var FQe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zQe=function(e){FQe(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.key=n,i.oldValue=o,i}return t}(ol);var gCr=function(e){FQe(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,$i(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&jo({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var o;o="change:".concat(r),this.hasListener(o)&&this.dispatchEvent(new zQe(o,r,n)),o=pm.PROPERTYCHANGE,this.hasListener(o)&&this.dispatchEvent(new zQe(o,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,o){var i=this.values_||(this.values_={});if(o)i[r]=n;else{var a=i[r];i[r]=n,a!==n&&this.notify(r,a)}},t.prototype.setProperties=function(r,n){for(var o in r)this.set(o,r[o],n)},t.prototype.applyProperties=function(r){r.values_&&jo(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var o=this.values_[r];delete this.values_[r],c$e(this.values_)&&(this.values_=null),n||this.notify(r,o)}},t}(Tz),Za=gCr;var Woe={ACTIVE:"active"};function $oe(e){return Math.pow(e,3)}function lf(e){return 1-$oe(1-e)}function UQe(e){return 3*e*e-2*e*e*e}function BQe(e){return e}var vCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yCr=function(e){vCr(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(Woe.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(Woe.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(Za);function VQe(e,t,r){var n=e.getCenterInternal();if(n){var o=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:BQe,center:e.getConstrainedCenter(o)})}}function pE(e,t,r,n){var o=e.getZoom();if(o!==void 0){var i=e.getConstrainedZoom(o+t),a=e.getResolutionForZoom(i);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:r,duration:n!==void 0?n:250,easing:lf})}}var yd=yCr;var ri={SINGLECLICK:"singleclick",CLICK:yr.CLICK,DBLCLICK:yr.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var _Cr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xCr=function(e){_Cr(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==ri.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==ri.POINTERUP){var o=this.handleUpEvent(r);this.handlingDownUpSequence=o&&this.targetPointers.length>0}}else if(r.type==ri.POINTERDOWN){var i=this.handleDownEvent(r);this.handlingDownUpSequence=i,n=this.stopDown(i)}else r.type==ri.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(yd);function dE(e){for(var t=e.length,r=0,n=0,o=0;o<t;o++)r+=e[o].clientX,n+=e[o].clientY;return[r/t,n/t]}var _d=xCr;var il={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var $v=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",GQe=$v.indexOf("firefox")!==-1,bCr=$v.indexOf("safari")!==-1&&$v.indexOf("chrom")==-1,HQe=bCr&&!!($v.indexOf("version/15.4")>=0||$v.match(/cpu (os|iphone os) 15_4 like mac os x/)),WQe=$v.indexOf("webkit")!==-1&&$v.indexOf("edge")==-1,$Qe=$v.indexOf("macintosh")!==-1,Mz=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,YQe=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,ZQe=typeof Image!="undefined"&&Image.prototype.decode,Cz=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var Yoe=new Array(6);function uf(){return[1,0,0,1,0,0]}function hE(e){return Az(e,1,0,0,1,0,0)}function Zoe(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=e[5],p=t[0],h=t[1],g=t[2],x=t[3],b=t[4],T=t[5];return e[0]=r*p+o*h,e[1]=n*p+i*h,e[2]=r*g+o*x,e[3]=n*g+i*x,e[4]=r*b+o*T+a,e[5]=n*b+i*T+u,e}function Az(e,t,r,n,o,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e}function Yv(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function Dz(e,t){var r=Math.cos(t),n=Math.sin(t);return Zoe(e,Az(Yoe,r,n,-n,r,0,0))}function rD(e,t,r){return Zoe(e,Az(Yoe,t,0,0,r,0,0))}function KQe(e,t,r){return Zoe(e,Az(Yoe,1,0,0,1,t,r))}function Zv(e,t,r,n,o,i,a,u){var p=Math.sin(i),h=Math.cos(i);return e[0]=n*h,e[1]=o*p,e[2]=-n*p,e[3]=o*h,e[4]=a*n*h-u*n*p+t,e[5]=a*o*p+u*o*h+r,e}function XQe(e,t){var r=wCr(t);Xr(r!==0,32);var n=t[0],o=t[1],i=t[2],a=t[3],u=t[4],p=t[5];return e[0]=a/r,e[1]=-o/r,e[2]=-i/r,e[3]=n/r,e[4]=(i*p-a*u)/r,e[5]=-(n*p-o*u)/r,e}function wCr(e){return e[0]*e[3]-e[1]*e[2]}function Koe(e,t,r,n,o,i){for(var a=i||[],u=0,p=t;p<r;p+=n){var h=e[p],g=e[p+1];a[u++]=o[0]*h+o[2]*g+o[4],a[u++]=o[1]*h+o[3]*g+o[5]}return i&&a.length!=u&&(a.length=u),a}function JQe(e,t,r,n,o,i,a){for(var u=a||[],p=Math.cos(o),h=Math.sin(o),g=i[0],x=i[1],b=0,T=t;T<r;T+=n){var A=e[T]-g,L=e[T+1]-x;u[b++]=g+A*p-L*h,u[b++]=x+A*h+L*p;for(var P=T+2;P<T+n;++P)u[b++]=e[P]}return a&&u.length!=b&&(u.length=b),u}function QQe(e,t,r,n,o,i,a,u){for(var p=u||[],h=a[0],g=a[1],x=0,b=t;b<r;b+=n){var T=e[b]-h,A=e[b+1]-g;p[x++]=h+o*T,p[x++]=g+i*A;for(var L=b+2;L<b+n;++L)p[x++]=e[L]}return u&&p.length!=x&&(p.length=x),p}function eet(e,t,r,n,o,i,a){for(var u=a||[],p=0,h=t;h<r;h+=n){u[p++]=e[h]+o,u[p++]=e[h+1]+i;for(var g=h+2;g<h+n;++g)u[p++]=e[g]}return a&&u.length!=p&&(u.length=p),u}var ECr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tet=uf(),SCr=function(e){ECr(t,e);function t(){var r=e.call(this)||this;return r.extent_=od(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=qQe(function(n,o,i){if(!i)return this.getSimplifiedGeometry(o);var a=this.clone();return a.applyTransform(i),a.getSimplifiedGeometry(o)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return Gn()},t.prototype.closestPointXY=function(r,n,o,i){return Gn()},t.prototype.containsXY=function(r,n){var o=this.getClosestPoint([r,n]);return o[0]===r&&o[1]===n},t.prototype.getClosestPoint=function(r,n){var o=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],o,1/0),o},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return Gn()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&jw(n),this.extentRevision_=this.getRevision()}return _$e(this.extent_,r)},t.prototype.rotate=function(r,n){Gn()},t.prototype.scale=function(r,n,o){Gn()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return Gn()},t.prototype.getType=function(){return Gn()},t.prototype.applyTransform=function(r){Gn()},t.prototype.intersectsExtent=function(r){return Gn()},t.prototype.translate=function(r,n){Gn()},t.prototype.transform=function(r,n){var o=yu(r),i=o.getUnits()==vu.TILE_PIXELS?function(a,u,p){var h=o.getExtent(),g=o.getWorldExtent(),x=bs(g)/bs(h);return Zv(tet,g[0],g[3],x,-x,0,0,0),Koe(a,0,a.length,p,tet,u),l1(o,n)(a,u,p)}:l1(o,n);return this.applyTransform(i),this},t}(Za),ret=SCr;var ICr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TCr=function(e){ICr(t,e);function t(){var r=e.call(this)||this;return r.layout=il.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return g$e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return Gn()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),o=n.getFlatCoordinates();return o.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=net(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){Gn()},t.prototype.setLayout=function(r,n,o){var i;if(r)i=net(r);else{for(var a=0;a<o;++a)if(n.length===0){this.layout=il.XY,this.stride=2;return}else n=n[0];i=n.length,r=MCr(i)}this.layout=r,this.stride=i},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();JQe(o,0,o.length,i,r,n,o),this.changed()}},t.prototype.scale=function(r,n,o){var i=n;i===void 0&&(i=r);var a=o;a||(a=Kf(this.getExtent()));var u=this.getFlatCoordinates();if(u){var p=this.getStride();QQe(u,0,u.length,p,r,i,a,u),this.changed()}},t.prototype.translate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();eet(o,0,o.length,i,r,n,o),this.changed()}},t}(ret);function MCr(e){var t;return e==2?t=il.XY:e==3?t=il.XYZ:e==4&&(t=il.XYZM),t}function net(e){var t;return e==il.XY?t=2:e==il.XYZ||e==il.XYM?t=3:e==il.XYZM&&(t=4),t}var mE=TCr;function oet(e,t,r,n,o,i,a){var u=e[t],p=e[t+1],h=e[r]-u,g=e[r+1]-p,x;if(h===0&&g===0)x=t;else{var b=((o-u)*h+(i-p)*g)/(h*h+g*g);if(b>1)x=r;else if(b>0){for(var T=0;T<n;++T)a[T]=r$e(e[t+T],e[r+T],b);a.length=n;return}else x=t}for(var T=0;T<n;++T)a[T]=e[x+T];a.length=n}function Xoe(e,t,r,n,o){var i=e[t],a=e[t+1];for(t+=n;t<r;t+=n){var u=e[t],p=e[t+1],h=Zh(i,a,u,p);h>o&&(o=h),i=u,a=p}return o}function iet(e,t,r,n,o){for(var i=0,a=r.length;i<a;++i){var u=r[i];o=Xoe(e,t,u,n,o),t=u}return o}function Joe(e,t,r,n,o,i,a,u,p,h,g){if(t==r)return h;var x,b;if(o===0)if(b=Zh(a,u,e[t],e[t+1]),b<h){for(x=0;x<n;++x)p[x]=e[t+x];return p.length=n,b}else return h;for(var T=g||[NaN,NaN],A=t+n;A<r;)if(oet(e,A-n,A,n,a,u,T),b=Zh(a,u,T[0],T[1]),b<h){for(h=b,x=0;x<n;++x)p[x]=T[x];p.length=n,A+=n}else A+=n*Math.max((Math.sqrt(b)-Math.sqrt(h))/o|0,1);if(i&&(oet(e,r-n,t,n,a,u,T),b=Zh(a,u,T[0],T[1]),b<h)){for(h=b,x=0;x<n;++x)p[x]=T[x];p.length=n}return h}function aet(e,t,r,n,o,i,a,u,p,h,g){for(var x=g||[NaN,NaN],b=0,T=r.length;b<T;++b){var A=r[b];h=Joe(e,t,A,n,o,i,a,u,p,h,x),t=A}return h}function set(e,t,r,n){for(var o=0,i=r.length;o<i;++o)e[t++]=r[o];return t}function Qoe(e,t,r,n){for(var o=0,i=r.length;o<i;++o)for(var a=r[o],u=0;u<n;++u)e[t++]=a[u];return t}function uet(e,t,r,n,o){for(var i=o||[],a=0,u=0,p=r.length;u<p;++u){var h=Qoe(e,t,r[u],n);i[a++]=h,t=h}return i.length=a,i}function cet(e,t,r,n,o,i,a){var u=(r-t)/n;if(u<3){for(;t<r;t+=n)i[a++]=e[t],i[a++]=e[t+1];return a}var p=new Array(u);p[0]=1,p[u-1]=1;for(var h=[t,r-n],g=0;h.length>0;){for(var x=h.pop(),b=h.pop(),T=0,A=e[b],L=e[b+1],P=e[x],k=e[x+1],q=b+n;q<x;q+=n){var U=e[q],H=e[q+1],X=e$e(U,H,A,L,P,k);X>T&&(g=q,T=X)}T>o&&(p[(g-t)/n]=1,b+n<g&&h.push(b,g),g+n<x&&h.push(g,x))}for(var q=0;q<u;++q)p[q]&&(i[a++]=e[t+q*n],i[a++]=e[t+q*n+1]);return a}function gE(e,t){return t*Math.round(e/t)}function CCr(e,t,r,n,o,i,a){if(t==r)return a;var u=gE(e[t],o),p=gE(e[t+1],o);t+=n,i[a++]=u,i[a++]=p;var h,g;do if(h=gE(e[t],o),g=gE(e[t+1],o),t+=n,t==r)return i[a++]=h,i[a++]=g,a;while(h==u&&g==p);for(;t<r;){var x=gE(e[t],o),b=gE(e[t+1],o);if(t+=n,!(x==h&&b==g)){var T=h-u,A=g-p,L=x-u,P=b-p;if(T*P==A*L&&(T<0&&L<T||T==L||T>0&&L>T)&&(A<0&&P<A||A==P||A>0&&P>A)){h=x,g=b;continue}i[a++]=h,i[a++]=g,u=h,p=g,h=x,g=b}}return i[a++]=h,i[a++]=g,a}function fet(e,t,r,n,o,i,a,u){for(var p=0,h=r.length;p<h;++p){var g=r[p];a=CCr(e,t,g,n,o,i,a),u.push(a),t=g}return a}function eie(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,u=t;u<r;u+=n)i[a++]=e.slice(u,u+n);return i.length=a,i}function pet(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,u=0,p=r.length;u<p;++u){var h=r[u];i[a++]=eie(e,t,h,n,i[a]),t=h}return i.length=a,i}function tie(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var u=e[t],p=e[t+1];o+=a*u-i*p,i=u,a=p}return o/2}function det(e,t,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var u=r[i];o+=tie(e,t,u,n),t=u}return o}var ACr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DCr=function(e){ACr(t,e);function t(r,n){var o=e.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?o.setFlatCoordinates(n,r):o.setCoordinates(r,n),o}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,o,i){return i<A6(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Xoe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Joe(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.getArea=function(){return tie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return eie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=cet(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,il.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Qoe(this.flatCoordinates,0,r,this.stride),this.changed()},t}(mE),rie=DCr;var NCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OCr=function(e){NCr(t,e);function t(r,n){var o=e.call(this)||this;return o.setCoordinates(r,n),o}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){var a=this.flatCoordinates,u=Zh(r,n,a[0],a[1]);if(u<i){for(var p=this.stride,h=0;h<p;++h)o[h]=a[h];return o.length=p,u}else return i},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return m$e(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return Qte(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=set(this.flatCoordinates,0,r,this.stride),this.changed()},t}(mE),het=OCr;function met(e,t,r,n,o){var i=D6(o,function(a){return!Kv(e,t,r,n,a[0],a[1])});return!i}function Kv(e,t,r,n,o,i){for(var a=0,u=e[r-n],p=e[r-n+1];t<r;t+=n){var h=e[t],g=e[t+1];p<=i?g>i&&(h-u)*(i-p)-(o-u)*(g-p)>0&&a++:g<=i&&(h-u)*(i-p)-(o-u)*(g-p)<0&&a--,u=h,p=g}return a!==0}function Nz(e,t,r,n,o,i){if(r.length===0||!Kv(e,t,r[0],n,o,i))return!1;for(var a=1,u=r.length;a<u;++a)if(Kv(e,r[a-1],r[a],n,o,i))return!1;return!0}function get(e,t,r,n,o,i,a){for(var u,p,h,g,x,b,T,A=o[i+1],L=[],P=0,k=r.length;P<k;++P){var q=r[P];for(g=e[q-n],b=e[q-n+1],u=t;u<q;u+=n)x=e[u],T=e[u+1],(A<=b&&T<=A||b<=A&&A<=T)&&(h=(A-b)/(T-b)*(x-g)+g,L.push(h)),g=x,b=T}var U=NaN,H=-1/0;for(L.sort(tD),g=L[0],u=1,p=L.length;u<p;++u){x=L[u];var X=Math.abs(x-g);X>H&&(h=(g+x)/2,Nz(e,t,r,n,h,A)&&(U=h,H=X)),g=x}return isNaN(U)&&(U=o[i]),a?(a.push(U,A,H),a):[U,A,H]}function vet(e,t,r,n,o){var i;for(t+=n;t<r;t+=n)if(i=o(e.slice(t-n,t),e.slice(t,t+n)),i)return i;return!1}function yet(e,t,r,n,o){var i=ere(od(),e,t,r,n);return rA(o,i)?h$e(o,i)||i[0]>=o[0]&&i[2]<=o[2]||i[1]>=o[1]&&i[3]<=o[3]?!0:vet(e,t,r,n,function(a,u){return x$e(o,a,u)}):!1}function nie(e,t,r,n,o){return!!(yet(e,t,r,n,o)||Kv(e,t,r,n,o[0],o[1])||Kv(e,t,r,n,o[0],o[3])||Kv(e,t,r,n,o[2],o[1])||Kv(e,t,r,n,o[2],o[3]))}function _et(e,t,r,n,o){if(!nie(e,t,r[0],n,o))return!1;if(r.length===1)return!0;for(var i=1,a=r.length;i<a;++i)if(met(e,r[i-1],r[i],n,o)&&!yet(e,r[i-1],r[i],n,o))return!1;return!0}function xet(e,t,r,n){for(;t<r-n;){for(var o=0;o<n;++o){var i=e[t+o];e[t+o]=e[r-n+o],e[r-n+o]=i}t+=n,r-=n}}function bet(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var u=e[t],p=e[t+1];o+=(u-i)*(p+a),i=u,a=p}return o===0?void 0:o>0}function wet(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,u=r.length;a<u;++a){var p=r[a],h=bet(e,t,p,n);if(a===0){if(i&&h||!i&&!h)return!1}else if(i&&!h||!i&&h)return!1;t=p}return!0}function oie(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,u=r.length;a<u;++a){var p=r[a],h=bet(e,t,p,n),g=a===0?i&&h||!i&&!h:i&&!h||!i&&h;g&&xet(e,t,p,n),t=p}return t}var LCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eet=function(e){LCr(t,e);function t(r,n,o){var i=e.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,n!==void 0&&o?(i.setFlatCoordinates(n,r),i.ends_=o):i.setCoordinates(r,n),i}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?RQe(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){return i<A6(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iet(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),aet(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.containsXY=function(r,n){return Nz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return det(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),oie(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,pet(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Kf(this.getExtent());this.flatInteriorPoint_=get(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new het(this.getFlatInteriorPoint(),il.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new rie(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,o=this.ends_,i=[],a=0,u=0,p=o.length;u<p;++u){var h=o[u],g=new rie(n.slice(a,h),r);i.push(g),a=h}return i},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;wet(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=oie(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],o=[];return n.length=fet(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,o),new t(n,il.XY,o)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return _et(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=uet(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=o.length===0?0:o[o.length-1],this.changed()},t}(mE),Iet=Eet;function nD(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=[t,r,t,o,n,o,n,r,t,r];return new Eet(i,il.XY,[i.length])}var PCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kCr=function(e){PCr(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,o="px",i=this.element_.style;i.left=Math.min(r[0],n[0])+o,i.top=Math.min(r[1],n[1])+o,i.width=Math.abs(n[0]-r[0])+o,i.height=Math.abs(n[1]-r[1])+o},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,o=[r,[r[0],n[1]],n,[n[0],r[1]]],i=o.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new Iet([i])},t.prototype.getGeometry=function(){return this.geometry_},t}(Hv),Tet=kCr;function oD(e){var t=arguments;return function(r){for(var n=!0,o=0,i=t.length;o<i&&(n=n&&t[o](r),!!n);++o);return n}}var Met=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},RCr=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},Oz=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?RCr(e):!0},Cet=Wv;var Lz=function(e){var t=e.originalEvent;return t.button==0&&!(WQe&&$Qe&&t.ctrlKey)};var Pz=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var Aet=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},kz=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},Rz=function(e){var t=e.originalEvent;return Xr(t!==void 0,56),t.pointerType=="mouse"};var Det=function(e){var t=e.originalEvent;return Xr(t!==void 0,56),t.isPrimary&&t.button===0};var Net=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jz={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},iie=function(e){Net(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return t}(ol);var jCr=function(e){Net(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=r||{};return n.box_=new Tet(o.className||"ol-dragbox"),n.minArea_=o.minArea!==void 0?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:Lz,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,o){var i=o[0]-n[0],a=o[1]-n[1];return i*i+a*a>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new iie(jz.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new iie(n?jz.BOXEND:jz.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new iie(jz.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}(_d),Oet=jCr;var qCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zCr=function(e){qCr(t,e);function t(r){var n=this,o=r||{},i=o.condition?o.condition:Aet;return n=e.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this,n.duration_=o.duration!==void 0?o.duration:200,n.out_=o.out!==void 0?o.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),o=n.getView(),i=this.getGeometry();if(this.out_){var a=o.rotatedExtentForGeometry(i),u=o.getResolutionForExtentInternal(a),p=o.getResolution()/u;i=i.clone(),i.scale(p*p)}o.fitInternal(i,{duration:this.duration_,easing:lf})},t}(Oet),qz=zCr;var xd={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};function mm(e,t,r,n){var o;return r&&r.length?o=r.shift():YQe?o=new OffscreenCanvas(e||300,t||300):o=document.createElement("canvas"),e&&(o.width=e),t&&(o.height=t),o.getContext("2d",n)}function Let(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function vE(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function iD(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Pet(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function ket(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],i=t[n];if(!o&&!i)break;if(o!==i){if(!o){e.appendChild(i);continue}if(!i){e.removeChild(o),--n;continue}e.insertBefore(i,o)}}}var FCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UCr=function(e){FCr(t,e);function t(r){var n=e.call(this)||this,o=r.element;return o&&!r.target&&!o.style.pointerEvents&&(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){iD(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&iD(this.element);for(var n=0,o=this.listenerKeys.length;n<o;++n)ao(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var i=this.target_?this.target_:r.getOverlayContainerStopEvent();i.appendChild(this.element),this.render!==hm&&this.listenerKeys.push(Sn(r,xd.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(Za),ac=UCr;var ca={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var aD="ol-hidden";var cf="ol-unselectable",aie="ol-unsupported",bd="ol-control",sie="ol-collapsed",BCr=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Ret=["style","variant","weight","size","lineHeight","family"],jet=function(e){var t=e.match(BCr);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=Ret.length;n<o;++n){var i=t[n+1];i!==void 0&&(r[Ret[n]]=i)}return r.families=r.family.split(/,\s?/),r};var VCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qet=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],zet={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},GCr=function(e){VCr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.on,n.once,n.un,n.keys_=o.keys!==void 0?o.keys:!1,n.source_=o.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=o.className!==void 0?o.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=o.activeClassName!==void 0?o.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=o.inactiveClassName!==void 0?o.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var i=o.label!==void 0?o.label:"\u2922";n.labelNode_=typeof i=="string"?document.createTextNode(i):i;var a=o.labelActive!==void 0?o.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var u=o.tipLabel?o.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=u,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(yr.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(cf," ").concat(bd),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(Fet(n))if(Uet(n))WCr(n);else{var o=void 0;this.source_?o=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:o=r.getTargetElement(),this.keys_?HCr(o):Bet(o)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=Uet(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(vE(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(zet.ENTERFULLSCREEN)):(vE(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(zet.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var o,i,a,u;n?((o=r.classList).remove.apply(o,this.inactiveClassName_),(i=r.classList).add.apply(i,this.activeClassName_)):((a=r.classList).remove.apply(a,this.activeClassName_),(u=r.classList).add.apply(u,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(ca.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(ca.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,o=r.length;n<o;++n)ao(r[n]);r.length=0;var i=this.getMap();if(i){var a=i.getOwnerDocument();Fet(a)?this.element.classList.remove(aie):this.element.classList.add(aie);for(var n=0,o=qet.length;n<o;++n)r.push(Sn(a,qet[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(ac);function Fet(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function Uet(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function Bet(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function HCr(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():Bet(e)}function WCr(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var Vet=GCr;var Ll={ADD:"add",REMOVE:"remove"};var Het=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Get={LENGTH:"length"},zz=function(e){Het(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.element=n,i.index=o,i}return t}(ol);var $Cr=function(e){Het(t,e);function t(r,n){var o=e.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=r||[],o.unique_)for(var a=0,u=o.array_.length;a<u;++a)o.assertUnique_(o.array_[a],a);return o.updateLength_(),o}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,o=r.length;n<o;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)r(n[o],o,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(Get.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new zz(Ll.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)if(n[o]===r)return this.removeAt(o)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new zz(Ll.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var o=this.getLength();if(r<o){this.unique_&&this.assertUnique_(n,r);var i=this.array_[r];this.array_[r]=n,this.dispatchEvent(new zz(Ll.REMOVE,i,r)),this.dispatchEvent(new zz(Ll.ADD,n,r))}else{for(var a=o;a<r;++a)this.insertAt(a,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(Get.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var o=0,i=this.array_.length;o<i;++o)if(this.array_[o]===r&&o!==n)throw new C6(58)},t}(Za),Pl=$Cr;var YCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZCr=function(e){YCr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==ri.DBLCLICK){var o=r.originalEvent,i=r.map,a=r.coordinate,u=o.shiftKey?-this.delta_:this.delta_,p=i.getView();pE(p,u,a,this.duration_),o.preventDefault(),n=!0}return!n},t}(yd),Wet=ZCr;var KCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XCr=function(e){KCr(t,e);function t(r){var n=e.call(this,{stopDown:dm})||this,o=r||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:oD(Pz,Det);return n.condition_=o.onFocusOnly?oD(Oz,i):i,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,o=dE(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var i=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],a=r.map,u=a.getView();E$e(i,u.getResolution()),qw(i,u.getRotation()),u.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,o=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),u=o.getCenterInternal(),p=n.getPixelFromCoordinateInternal(u),h=n.getCoordinateFromPixelInternal([p[0]-i*Math.cos(a),p[1]-i*Math.sin(a)]);o.animateInternal({center:o.getConstrainedCenter(h),duration:500,easing:lf})}return this.panning_&&(this.panning_=!1,o.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,o=n.getView();return this.lastCentroid=null,o.getAnimating()&&o.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(_d),$et=XCr;function yE(e){if(e!==void 0)return 0}function lie(e){if(e!==void 0)return e}function Yet(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function Zet(e){var t=e||Lw(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var JCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QCr=function(e){JCr(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,{stopDown:dm})||this,n.condition_=o.condition?o.condition:Met,n.lastAngle_=void 0,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){if(Rz(r)){var n=r.map,o=n.getView();if(o.getConstraints().rotation!==yE){var i=n.getSize(),a=r.pixel,u=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){var p=u-this.lastAngle_;o.adjustRotationInternal(-p)}this.lastAngle_=u}}},t.prototype.handleUpEvent=function(r){if(!Rz(r))return!0;var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!Rz(r))return!1;if(Lz(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(_d),Ket=QCr;var Xv={LEFT:37,UP:38,RIGHT:39,DOWN:40};var eAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tAr=function(e){eAr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.defaultCondition_=function(i){return Pz(i)&&kz(i)},n.condition_=o.condition!==void 0?o.condition:n.defaultCondition_,n.duration_=o.duration!==void 0?o.duration:100,n.pixelDelta_=o.pixelDelta!==void 0?o.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==yr.KEYDOWN){var o=r.originalEvent,i=o.keyCode;if(this.condition_(r)&&(i==Xv.DOWN||i==Xv.LEFT||i==Xv.RIGHT||i==Xv.UP)){var a=r.map,u=a.getView(),p=u.getResolution()*this.pixelDelta_,h=0,g=0;i==Xv.DOWN?g=-p:i==Xv.LEFT?h=-p:i==Xv.RIGHT?h=p:g=p;var x=[h,g];qw(x,u.getRotation()),VQe(u,x,this.duration_),o.preventDefault(),n=!0}}return!n},t}(yd),Xet=tAr;var rAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nAr=function(e){rAr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.condition_=o.condition?o.condition:kz,n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==yr.KEYDOWN||r.type==yr.KEYPRESS){var o=r.originalEvent,i=o.charCode;if(this.condition_(r)&&(i==43||i==45)){var a=r.map,u=i==43?this.delta_:-this.delta_,p=a.getView();pE(p,u,void 0,this.duration_),o.preventDefault(),n=!0}}return!n},t}(yd),Jet=nAr;var oAr=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[r+2]-this.points_[n+2];if(o<16.666666666666668)return!1;var i=this.points_[r]-this.points_[n],a=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(a,i),this.initialVelocity_=Math.sqrt(i*i+a*a)/o,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),Qet=oAr;var iAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uie={TRACKPAD:"trackpad",WHEEL:"wheel"},aAr=function(e){iAr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,o)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=o.maxDelta!==void 0?o.maxDelta:1,n.duration_=o.duration!==void 0?o.duration:250,n.timeout_=o.timeout!==void 0?o.timeout:80,n.useAnchor_=o.useAnchor!==void 0?o.useAnchor:!0,n.constrainResolution_=o.constrainResolution!==void 0?o.constrainResolution:!1;var i=o.condition?o.condition:Cet;return n.condition_=o.onFocusOnly?oD(Oz,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==yr.WHEEL)return!0;var o=r.map,i=r.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var a;if(r.type==yr.WHEEL&&(a=i.deltaY,GQe&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=Mz),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?uie.TRACKPAD:uie.WHEEL);var p=o.getView();if(this.mode_===uie.TRACKPAD&&!(p.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(p.getAnimating()&&p.cancelAnimations(),p.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),p.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=u,!1;this.totalDelta_+=a;var h=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),h),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var o=-Ho(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),pE(n,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(yd),ett=aAr;var sAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lAr=function(e){sAr(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=dm),n=e.call(this,i)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=o.threshold!==void 0?o.threshold:.3,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(this.lastAngle_!==void 0){var u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=a;var p=r.map,h=p.getView();if(h.getConstraints().rotation!==yE){var g=p.getViewport().getBoundingClientRect(),x=dE(this.targetPointers);x[0]-=g.left,x[1]-=g.top,this.anchor_=p.getCoordinateFromPixelInternal(x),this.rotating_&&(p.render(),h.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(_d),ttt=lAr;var uAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cAr=function(e){uAr(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=dm),n=e.call(this,i)||this,n.anchor_=null,n.duration_=o.duration!==void 0?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,o=this.targetPointers[0],i=this.targetPointers[1],a=o.clientX-i.clientX,u=o.clientY-i.clientY,p=Math.sqrt(a*a+u*u);this.lastDistance_!==void 0&&(n=this.lastDistance_/p),this.lastDistance_=p;var h=r.map,g=h.getView();n!=1&&(this.lastScaleDelta_=n);var x=h.getViewport().getBoundingClientRect(),b=dE(this.targetPointers);b[0]-=x.left,b[1]-=x.top,this.anchor_=h.getCoordinateFromPixelInternal(b),h.render(),g.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView(),i=this.lastScaleDelta_>1?1:-1;return o.endInteraction(this.duration_,i),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(_d),rtt=cAr;var fAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pAr=function(e){fAr(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.map=n,i.frameState=o!==void 0?o:null,i}return t}(ol),Jv=pAr;var dAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hAr=function(e){dAr(t,e);function t(r,n,o,i,a,u){var p=e.call(this,r,n,a)||this;return p.originalEvent=o,p.pixel_=null,p.coordinate_=null,p.dragging=i!==void 0?i:!1,p.activePointers=u,p}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Jv),wd=hAr;var Hn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var mAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gAr=function(e){mAr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var o=jo({},r);return typeof r.properties=="object"&&(delete o.properties,jo(o,r.properties)),o[Hn.OPACITY]=r.opacity!==void 0?r.opacity:1,Xr(typeof o[Hn.OPACITY]=="number",64),o[Hn.VISIBLE]=r.visible!==void 0?r.visible:!0,o[Hn.Z_INDEX]=r.zIndex,o[Hn.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,o[Hn.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,o[Hn.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,o[Hn.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=o.className!==void 0?o.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},o=this.getZIndex();return n.opacity=Ho(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=o===void 0&&!n.managed?1/0:o,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return Gn()},t.prototype.getLayerStatesArray=function(r){return Gn()},t.prototype.getExtent=function(){return this.get(Hn.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Hn.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Hn.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Hn.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Hn.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Hn.OPACITY)},t.prototype.getSourceState=function(){return Gn()},t.prototype.getVisible=function(){return this.get(Hn.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Hn.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Hn.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Hn.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Hn.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Hn.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Hn.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){Xr(typeof r=="number",64),this.set(Hn.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Hn.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Hn.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(Za),Fz=gAr;var al={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var vAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yAr=function(e){vAr(t,e);function t(r){var n=this,o=jo({},r);delete o.source,n=e.call(this,o)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Hn.SOURCE,n.handleSourcePropertyChange_);var i=r.source?r.source:null;return n.setSource(i),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Hn.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ao(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=Sn(r,yr.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var o=this.getRenderer();if(o.prepareFrame(r))return this.rendered=!0,o.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Hn.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Hn.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&(ao(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(ao(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=Sn(r,al.PRECOMPOSE,function(n){var o=n,i=o.frameState.layerStatesArray,a=this.getLayerState(!1);Xr(!i.some(function(u){return u.layer===a.layer}),67),i.push(a)},this),this.mapRenderKey_=Sn(this,yr.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Hn.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(Fz);function E1(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var sD=yAr;var Su={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function cie(e){return e[0]>0&&e[1]>0}function ntt(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function Ka(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}var itt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,att=/^([a-z]*)$|^hsla?\(.*\)$/i;function stt(e){return typeof e=="string"?e:xAr(e)}function ltt(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var fie=function(){var e=1024,t={},r=0;return function(n){var o;if(t.hasOwnProperty(n))o=t[n];else{if(r>=e){var i=0;for(var a in t)i++&3||(delete t[a],--r)}o=_Ar(n),t[n]=o,++r}return o}}();function utt(e){return Array.isArray(e)?e:fie(e)}function _Ar(e){var t,r,n,o,i;if(att.exec(e)&&(e=ltt(e)),itt.exec(e)){var a=e.length-1,u=void 0;a<=4?u=1:u=2;var p=a===4||a===8;t=parseInt(e.substr(1+0*u,u),16),r=parseInt(e.substr(1+1*u,u),16),n=parseInt(e.substr(1+2*u,u),16),p?o=parseInt(e.substr(1+3*u,u),16):o=255,u==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,p&&(o=(o<<4)+o)),i=[t,r,n,o/255]}else e.indexOf("rgba(")==0?(i=e.slice(5,-1).split(",").map(Number),ott(i)):e.indexOf("rgb(")==0?(i=e.slice(4,-1).split(",").map(Number),i.push(1),ott(i)):Xr(!1,14);return i}function ott(e){return e[0]=Ho(e[0]+.5|0,0,255),e[1]=Ho(e[1]+.5|0,0,255),e[2]=Ho(e[2]+.5|0,0,255),e[3]=Ho(e[3],0,1),e}function xAr(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var o=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+o+")"}function ctt(e){return att.test(e)&&(e=ltt(e)),itt.test(e)||e.indexOf("rgba(")===0||e.indexOf("rgb(")===0}var Ed=new Za,bAr=new sf;bAr.setSize=function(){console.warn("labelCache is deprecated.")};var _E=null,pie,wAr={},hRn=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,o="wmytzilWMYTZIL@#/&?$%10\uF013",i,a;function u(h,g,x){for(var b=!0,T=0;T<n;++T){var A=r[T];if(a=ftt(h+" "+g+" "+t+A,o),x!=A){var L=ftt(h+" "+g+" "+t+x+","+A,o);b=b&&L!=a}}return!!b}function p(){for(var h=!0,g=Ed.getKeys(),x=0,b=g.length;x<b;++x){var T=g[x];Ed.get(T)<e&&(u.apply(this,T.split(`
`))?(Kc(wAr),_E=null,pie=void 0,Ed.set(T,e)):(Ed.set(T,Ed.get(T)+1,!0),h=!1))}h&&(clearInterval(i),i=void 0)}return function(h){var g=jet(h);if(g)for(var x=g.families,b=0,T=x.length;b<T;++b){var A=x[b],L=g.style+`
`+g.weight+`
`+A;Ed.get(L)===void 0&&(Ed.set(L,e,!0),u(g.style,g.weight,A)||(Ed.set(L,0,!0),i===void 0&&(i=setInterval(p,32))))}}}();function EAr(e,t){return _E||(_E=mm(1,1)),e!=pie&&(_E.font=e,pie=_E.font),_E.measureText(t)}function ftt(e,t){return EAr(e,t).width}var SAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IAr=function(e){SAr(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return Gn()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return Gn()},t.prototype.renderFrame=function(r,n){return Gn()},t.prototype.loadedTileCallback=function(r,n,o){r[n]||(r[n]={}),r[n][o.tileCoord.toString()]=o},t.prototype.createLoadedTileFinder=function(r,n,o){return function(i,a){var u=this.loadedTileCallback.bind(this,o,i);return r.forEachLoadedTile(n,i,a,u)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a){},t.prototype.getDataAtPixel=function(r,n,o){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===Su.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=Su.LOADED&&n!=Su.ERROR&&r.addEventListener(yr.CHANGE,this.boundHandleImageChange_),n==Su.IDLE&&(r.load(),n=r.getState()),n==Su.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(Tz),ptt=IAr;var TAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MAr=function(e){TAr(t,e);function t(r,n,o,i){var a=e.call(this,r)||this;return a.inversePixelTransform=n,a.frameState=o,a.context=i,a}return t}(ol),xE=MAr;var Iu={ANIMATING:0,INTERACTING:1};var CAr=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];!(t++&3)&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var o=dtt(t,r,n);return o in this.cache_?this.cache_[o]:null},e.prototype.set=function(t,r,n,o){var i=dtt(t,r,n);this.cache_[i]=o,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function dtt(e,t,r){var n=r?stt(r):"null";return t+":"+e+":"+n}var die=new CAr;var AAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DAr=function(e){AAr(t,e);function t(r,n,o,i){var a=e.call(this)||this;return a.extent=r,a.pixelRatio_=o,a.resolution=n,a.state=i,a}return t.prototype.changed=function(){this.dispatchEvent(yr.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Gn()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Gn()},t}(sf),htt=DAr;var NAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),RRn=function(e){NAr(t,e);function t(r,n,o,i,a,u){var p=e.call(this,r,n,o,Su.IDLE)||this;return p.src_=i,p.image_=new Image,a!==null&&(p.image_.crossOrigin=a),p.unlisten_=null,p.state=Su.IDLE,p.imageLoadFunction_=u,p}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=Su.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=bs(this.extent)/this.image_.height),this.state=Su.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==Su.IDLE||this.state==Su.ERROR)&&(this.state=Su.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=hie(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=bs(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(htt);function hie(e,t,r){var n=e,o=!0,i=!1,a=!1,u=[fE(n,yr.LOAD,function(){a=!0,i||t()})];return n.src&&ZQe?(i=!0,n.decode().then(function(){o&&t()}).catch(function(p){o&&(a?t():r())})):u.push(fE(n,yr.ERROR,r)),function(){o=!1,u.forEach(ao)}}var OAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LAr=function(e){OAr(t,e);function t(r){var n=e.call(this)||this;n.projection=yu(r.projection),n.attributions_=mtt(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var o=n;return n.viewPromise_=new Promise(function(i,a){o.viewResolver=i,o.viewRejector=a}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return Gn()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=mtt(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(Za);function mtt(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var gtt=LAr;function Uz(e){var t=e||{},r=new Pl,n=new Qet(-.005,.05,100),o=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;o&&r.push(new Ket);var i=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;i&&r.push(new Wet({delta:t.zoomDelta,duration:t.zoomDuration}));var a=t.dragPan!==void 0?t.dragPan:!0;a&&r.push(new $et({onFocusOnly:t.onFocusOnly,kinetic:n}));var u=t.pinchRotate!==void 0?t.pinchRotate:!0;u&&r.push(new ttt);var p=t.pinchZoom!==void 0?t.pinchZoom:!0;p&&r.push(new rtt({duration:t.zoomDuration}));var h=t.keyboard!==void 0?t.keyboard:!0;h&&(r.push(new Xet),r.push(new Jet({delta:t.zoomDelta,duration:t.zoomDuration})));var g=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;g&&r.push(new ett({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var x=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return x&&r.push(new qz({duration:t.zoomDuration})),r}var PAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kAr=function(e){PAr(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){Gn()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,o=r.coordinateToPixelTransform,i=r.pixelToCoordinateTransform;Zv(o,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),XQe(i,o)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a,u,p,h){var g,x=n.viewState;function b(Qe,Fe,ze,Ne){return a.call(u,Fe,Qe?ze:null,Ne)}var T=x.projection,A=S$e(r.slice(),T),L=[[0,0]];if(T.canWrapX()&&i){var P=T.getExtent(),k=fi(P);L.push([-k,0],[k,0])}for(var q=n.layerStatesArray,U=q.length,H=[],X=[],ee=0;ee<L.length;ee++)for(var ne=U-1;ne>=0;--ne){var me=q[ne],ue=me.layer;if(ue.hasRenderer()&&E1(me,x)&&p.call(h,ue)){var Me=ue.getRenderer(),ke=ue.getSource();if(Me&&ke){var Te=ke.getWrapX()?A:r,Ee=b.bind(null,me.managed);X[0]=Te[0]+L[ee][0],X[1]=Te[1]+L[ee][1],g=Me.forEachFeatureAtCoordinate(X,n,o,Ee,H)}if(g)return g}}if(H.length!==0){var Ze=1/H.length;return H.forEach(function(Qe,Fe){return Qe.distanceSq+=Fe*Ze}),H.sort(function(Qe,Fe){return Qe.distanceSq-Fe.distanceSq}),H.some(function(Qe){return g=Qe.callback(Qe.feature,Qe.layer,Qe.geometry)}),g}},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){return Gn()},t.prototype.hasFeatureAtCoordinate=function(r,n,o,i,a,u){var p=this.forEachFeatureAtCoordinate(r,n,o,i,Wv,this,a,u);return p!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){Gn()},t.prototype.scheduleExpireIconCache=function(r){die.canExpireCache()&&r.postRenderFunctions.push(RAr)},t}(Hv);function RAr(e,t){die.expire()}var vtt=kAr;var jAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qAr=function(e){jAr(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=Sn(Ed,pm.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var o=n.element_.style;o.position="absolute",o.width="100%",o.height="100%",o.zIndex="0",n.element_.className=cf+" ol-layers";var i=r.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var o=this.getMap();if(o.hasListener(r)){var i=new xE(r,void 0,n);o.dispatchEvent(i)}},t.prototype.disposeInternal=function(){ao(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(al.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(T,A){return T.zIndex-A.zIndex}),o=r.viewState;this.children_.length=0;for(var i=[],a=null,u=0,p=n.length;u<p;++u){var h=n[u];r.layerIndex=u;var g=h.layer,x=g.getSourceState();if(!E1(h,o)||x!="ready"&&x!="undefined"){g.unrender();continue}var b=g.render(r,a);b&&(b!==a&&(this.children_.push(b),a=b),"getDeclutter"in g&&i.push(g))}for(var u=i.length-1;u>=0;--u)i[u].renderDeclutter(r);ket(this.element_,this.children_),this.dispatchRenderEvent(al.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){for(var u=n.viewState,p=n.layerStatesArray,h=p.length,g=h-1;g>=0;--g){var x=p[g],b=x.layer;if(b.hasRenderer()&&E1(x,u)&&a(b)){var T=b.getRenderer(),A=T.getDataAtPixel(r,n,o);if(A){var L=i(b,A);if(L)return L}}}},t}(vtt),ytt=qAr;var _tt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gm=function(e){_tt(t,e);function t(r,n){var o=e.call(this,r)||this;return o.layer=n,o}return t}(ol);var mie={LAYERS:"layers"},zAr=function(e){_tt(t,e);function t(r){var n=this,o=r||{},i=jo({},o);delete i.layers;var a=o.layers;return n=e.call(this,i)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(mie.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new Pl(a.slice(),{unique:!0}):Xr(typeof a.getArray=="function",43):a=new Pl(void 0,{unique:!0}),n.setLayers(a),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(ao),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(Sn(r,Ll.ADD,this.handleLayersAdd_,this),Sn(r,Ll.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(ao);Kc(this.listenerKeys_);for(var o=r.getArray(),i=0,a=o.length;i<a;i++){var u=o[i];this.registerLayerListeners_(u),this.dispatchEvent(new gm("addlayer",u))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[Sn(r,pm.PROPERTYCHANGE,this.handleLayerChange_,this),Sn(r,yr.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(Sn(r,"addlayer",this.handleLayerGroupAdd_,this),Sn(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[$i(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new gm("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new gm("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new gm("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,o=$i(n);this.listenerKeys_[o].forEach(ao),delete this.listenerKeys_[o],this.dispatchEvent(new gm("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(mie.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var o=n.getArray(),i=0,a=o.length;i<a;++i)this.dispatchEvent(new gm("removelayer",o[i]));this.set(mie.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(o){o.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],o=n.length;this.getLayers().forEach(function(g){g.getLayerStatesArray(n)});var i=this.getLayerState(),a=i.zIndex;!r&&i.zIndex===void 0&&(a=0);for(var u=o,p=n.length;u<p;u++){var h=n[u];h.opacity*=i.opacity,h.visible=h.visible&&i.visible,h.maxResolution=Math.min(h.maxResolution,i.maxResolution),h.minResolution=Math.max(h.minResolution,i.minResolution),h.minZoom=Math.max(h.minZoom,i.minZoom),h.maxZoom=Math.min(h.maxZoom,i.maxZoom),i.extent!==void 0&&(h.extent!==void 0?h.extent=id(h.extent,i.extent):h.extent=i.extent),h.zIndex===void 0&&(h.zIndex=a)}return n},t.prototype.getSourceState=function(){return"ready"},t}(Fz),lD=zAr;var uD={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var FAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UAr=function(e){FAr(t,e);function t(r,n){var o=e.call(this,r)||this;o.map_=r,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=n===void 0?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=[],o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=Sn(i,uD.POINTERDOWN,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=Sn(i,uD.POINTERMOVE,o.relayMoveEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(yr.TOUCHMOVE,o.boundHandleTouchMove_,Cz?{passive:!1}:!1),o}return t.prototype.emulateClick_=function(r){var n=new wd(ri.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new wd(ri.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var o=new wd(ri.SINGLECLICK,this.map_,r);this.dispatchEvent(o)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,o=n.pointerId;if(n.type==ri.POINTERUP||n.type==ri.POINTERCANCEL){delete this.trackedTouches_[o];for(var i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==ri.POINTERDOWN||n.type==ri.POINTERMOVE)&&(this.trackedTouches_[o]=n);this.activePointers_=u$e(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new wd(ri.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ao),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new wd(ri.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var o in r){var i=r[o];this.down_[o]=typeof i=="function"?hm:i}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(Sn(a,ri.POINTERMOVE,this.handlePointerMove_,this),Sn(a,ri.POINTERUP,this.handlePointerUp_,this),Sn(this.element_,ri.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(Sn(this.element_.getRootNode(),ri.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new wd(ri.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new wd(ri.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ao(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(yr.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ao(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ao),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(sf),xtt=UAr;var cD=1/0,BAr=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Kc(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},e.prototype.enqueue=function(t){Xr(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=cD?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,o=r.length,i=r[t],a=n[t],u=t;t<o>>1;){var p=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),g=h<o&&n[h]<n[p]?h:p;r[t]=r[g],n[t]=n[g],t=g}r[t]=i,n[t]=a,this.siftDown_(u,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,o=this.priorities_,i=n[r],a=o[r];r>t;){var u=this.getParentIndex_(r);if(o[u]>a)n[r]=n[u],o[r]=o[u],r=u;else break}n[r]=i,o[r]=a},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,o=0,i=r.length,a,u,p;for(u=0;u<i;++u)a=r[u],p=t(a),p==cD?delete this.queuedElements_[this.keyFunction_(a)]:(n[o]=p,r[o++]=a);r.length=o,n.length=o,this.heapify_()},e}(),btt=BAr;var _r={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var VAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GAr=function(e){VAr(t,e);function t(r,n){var o=e.call(this,function(i){return r.apply(null,i)},function(i){return i[0].getKey()})||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var o=r[0];o.addEventListener(yr.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,o=n.getState();if(o===_r.LOADED||o===_r.ERROR||o===_r.EMPTY){n.removeEventListener(yr.CHANGE,this.boundHandleTileChange_);var i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var o=0,i,a,u;this.tilesLoading_<r&&o<n&&this.getCount()>0;)a=this.dequeue()[0],u=a.getKey(),i=a.getState(),i===_r.IDLE&&!(u in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[u]=!0,++this.tilesLoading_,++o,a.load())},t}(btt),wtt=GAr;function Ett(e,t,r,n,o){if(!e||!(r in e.wantedTiles))return cD;if(!e.wantedTiles[r][t.getKey()])return cD;var i=e.viewState.center,a=n[0]-i[0],u=n[1]-i[1];return 65536*Math.log(o)+Math.sqrt(a*a+u*u)/o}var ff={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Stt=42,Qv=256;function gie(e,t,r){return function(n,o,i,a,u){if(n){if(!o&&!t)return n;var p=t?0:i[0]*o,h=t?0:i[1]*o,g=u?u[0]:0,x=u?u[1]:0,b=e[0]+p/2+g,T=e[2]-p/2+g,A=e[1]+h/2+x,L=e[3]-h/2+x;b>T&&(b=(T+b)/2,T=b),A>L&&(A=(L+A)/2,L=A);var P=Ho(n[0],b,T),k=Ho(n[1],A,L);if(a&&r&&o){var q=30*o;P+=-q*Math.log(1+Math.max(0,b-n[0])/q)+q*Math.log(1+Math.max(0,n[0]-T)/q),k+=-q*Math.log(1+Math.max(0,A-n[1])/q)+q*Math.log(1+Math.max(0,n[1]-L)/q)}return[P,k]}}}function Itt(e){return e}function vie(e,t,r,n){var o=fi(t)/r[0],i=bs(t)/r[1];return n?Math.min(e,Math.max(o,i)):Math.min(e,Math.min(o,i))}function yie(e,t,r){var n=Math.min(e,t),o=50;return n*=Math.log(1+o*Math.max(0,e/t-1))/o+1,r&&(n=Math.max(n,r),n/=Math.log(1+o*Math.max(0,r/e-1))/o+1),Ho(n,r/2,t*2)}function Ttt(e,t,r,n){return function(o,i,a,u){if(o!==void 0){var p=e[0],h=e[e.length-1],g=r?vie(p,r,a,n):p;if(u){var x=t!==void 0?t:!0;return x?yie(o,g,h):Ho(o,h,g)}var b=Math.min(g,o),T=Math.floor(cE(e,b,i));return e[T]>g&&T<e.length-1?e[T+1]:e[T]}else return}}function Mtt(e,t,r,n,o,i){return function(a,u,p,h){if(a!==void 0){var g=o?vie(t,o,p,i):t,x=r!==void 0?r:0;if(h){var b=n!==void 0?n:!0;return b?yie(a,g,x):Ho(a,x,g)}var T=1e-9,A=Math.ceil(Math.log(t/g)/Math.log(e)-T),L=-u*(.5-T)+.5,P=Math.min(g,a),k=Math.floor(Math.log(t/P)/Math.log(e)+L),q=Math.max(A,k),U=t/Math.pow(e,q);return Ho(U,x,g)}else return}}function _ie(e,t,r,n,o){return function(i,a,u,p){if(i!==void 0){var h=n?vie(e,n,u,o):e,g=r!==void 0?r:!0;return!g||!p?Ho(i,t,h):yie(i,h,t)}else return}}var HAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xie=0,WAr=function(e){HAr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=jo({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=P6(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,o.projection&&M$e(),o.center&&(o.center=Xf(o.center,n.projection_)),o.extent&&(o.extent=Ov(o.extent,n.projection_)),n.applyOptions_(o),n}return t.prototype.applyOptions_=function(r){var n=jo({},r);for(var o in ff)delete n[o];this.setProperties(n,!0);var i=YAr(r);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=i.minZoom;var a=$Ar(r),u=i.constraint,p=ZAr(r);this.constraints_={center:a,resolution:u,rotation:p},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var o=this.getCenter();if(o){var i=r||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),u=a/2*(i[3]-n[3]+n[1]-i[1]),p=a/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([o[0]+u,o[1]-p])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),jo({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),o=0;o<n.length;++o){var i=arguments[o];i.center&&(i=jo({},i),i.center=Xf(i.center,this.getProjection())),i.anchor&&(i=jo({},i),i.anchor=Xf(i.anchor,this.getProjection())),n[o]=i}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,o;n>1&&typeof arguments[n-1]=="function"&&(o=arguments[n-1],--n);for(var i=0;i<n&&!this.isDef();++i){var a=arguments[i];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(i===n){o&&Bz(o,!0);return}for(var u=Date.now(),p=this.targetCenter_.slice(),h=this.targetResolution_,g=this.targetRotation_,x=[];i<n;++i){var b=arguments[i],T={start:u,complete:!1,anchor:b.anchor,duration:b.duration!==void 0?b.duration:1e3,easing:b.easing||UQe,callback:o};if(b.center&&(T.sourceCenter=p,T.targetCenter=b.center.slice(),p=T.targetCenter),b.zoom!==void 0?(T.sourceResolution=h,T.targetResolution=this.getResolutionForZoom(b.zoom),h=T.targetResolution):b.resolution&&(T.sourceResolution=h,T.targetResolution=b.resolution,h=T.targetResolution),b.rotation!==void 0){T.sourceRotation=g;var A=Zf(b.rotation-g+Math.PI,2*Math.PI)-Math.PI;T.targetRotation=g+A,g=T.targetRotation}KAr(T)?T.complete=!0:u+=T.duration,x.push(T)}this.animations_.push(x),this.setHint(Iu.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[Iu.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[Iu.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(Iu.ANIMATING,-this.hints_[Iu.ANIMATING]);for(var r,n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&Bz(i[0].callback,!1),!r)for(var a=0,u=i.length;a<u;++a){var p=i[a];if(!p.complete){r=p.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],a=!0,u=0,p=i.length;u<p;++u){var h=i[u];if(!h.complete){var g=r-h.start,x=h.duration>0?g/h.duration:1;x>=1?(h.complete=!0,x=1):a=!1;var b=h.easing(x);if(h.sourceCenter){var T=h.sourceCenter[0],A=h.sourceCenter[1],L=h.targetCenter[0],P=h.targetCenter[1];this.nextCenter_=h.targetCenter;var k=T+b*(L-T),q=A+b*(P-A);this.targetCenter_=[k,q]}if(h.sourceResolution&&h.targetResolution){var U=b===1?h.targetResolution:h.sourceResolution+b*(h.targetResolution-h.sourceResolution);if(h.anchor){var H=this.getViewportSize_(this.getRotation()),X=this.constraints_.resolution(U,0,H,!0);this.targetCenter_=this.calculateCenterZoom(X,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=U,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){var ee=b===1?Zf(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+b*(h.targetRotation-h.sourceRotation);if(h.anchor){var ne=this.constraints_.rotation(ee,!0);this.targetCenter_=this.calculateCenterRotate(ne,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=ee}if(this.applyTargetState_(!0),n=!0,!h.complete)break}}if(a){this.animations_[o]=null,this.setHint(Iu.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var me=i[0].callback;me&&Bz(me,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var o,i=this.getCenterInternal();return i!==void 0&&(o=[i[0]-n[0],i[1]-n[1]],qw(o,r-this.getRotation()),w$e(o,n)),o},t.prototype.calculateCenterZoom=function(r,n){var o,i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){var u=n[0]-r*(n[0]-i[0])/a,p=n[1]-r*(n[1]-i[1])/a;o=[u,p]}return o},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var o=n[0],i=n[1];return[Math.abs(o*Math.cos(r))+Math.abs(i*Math.sin(r)),Math.abs(o*Math.sin(r))+Math.abs(i*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&oA(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(ff.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return O$e(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),o=this.getCenterInternal();Xr(o,1);var i=this.getResolution();Xr(i!==void 0,2);var a=this.getRotation();return Xr(a!==void 0,3),tA(o,i,a,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(ff.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(Ov(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var o=n||this.getViewportSizeMinusPadding_(),i=fi(r)/o[0],a=bs(r)/o[1];return Math.max(i,a)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/Math.log(n);return function(u){var p=o/Math.pow(n,u*a);return p}},t.prototype.getRotation=function(){return this.get(ff.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/n;return function(u){var p=Math.log(o/u)/n/a;return p}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),o=this.padding_;return o&&(n=[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),o=this.getRotation(),i=this.getCenterInternal(),a=this.padding_;if(a){var u=this.getViewportSizeMinusPadding_();i=bie(i,this.getViewportSize_(),[u[0]/2+a[3],u[1]/2+a[0]],n,o)}return{center:i.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:o,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,o,i;if(this.resolutions_){var a=cE(this.resolutions_,r,1);n=a,o=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=o/this.resolutions_[a+1]}else o=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(o/r)/Math.log(i)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Ho(Math.floor(r),0,this.resolutions_.length-2),o=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(o,Ho(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var o;if(Xr(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){Xr(!a1(r),25);var i=Ov(r,this.getProjection());o=nD(i)}else if(r.getType()==="Circle"){var i=Ov(r.getExtent(),this.getProjection());o=nD(i),o.rotate(this.getRotation(),Kf(i))}else{var a=N$e();a?o=r.clone().transform(a,this.getProjection()):o=r}this.fitInternal(o,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),o=Math.cos(n),i=Math.sin(-n),a=r.getFlatCoordinates(),u=r.getStride(),p=1/0,h=1/0,g=-1/0,x=-1/0,b=0,T=a.length;b<T;b+=u){var A=a[b]*o-a[b+1]*i,L=a[b]*i+a[b+1]*o;p=Math.min(p,A),h=Math.min(h,L),g=Math.max(g,A),x=Math.max(x,L)}return[p,h,g,x]},t.prototype.fitInternal=function(r,n){var o=n||{},i=o.size;i||(i=this.getViewportSizeMinusPadding_());var a=o.padding!==void 0?o.padding:[0,0,0,0],u=o.nearest!==void 0?o.nearest:!1,p;o.minResolution!==void 0?p=o.minResolution:o.maxZoom!==void 0?p=this.getResolutionForZoom(o.maxZoom):p=0;var h=this.rotatedExtentForGeometry(r),g=this.getResolutionForExtentInternal(h,[i[0]-a[1]-a[3],i[1]-a[0]-a[2]]);g=isNaN(g)?p:Math.max(g,p),g=this.getConstrainedResolution(g,u?0:1);var x=this.getRotation(),b=Math.sin(x),T=Math.cos(x),A=Kf(h);A[0]+=(a[1]-a[3])/2*g,A[1]+=(a[0]-a[2])/2*g;var L=A[0]*T-A[1]*b,P=A[1]*T+A[0]*b,k=this.getConstrainedCenter([L,P],g),q=o.callback?o.callback:hm;o.duration!==void 0?this.animateInternal({resolution:g,center:k,duration:o.duration,easing:o.easing},q):(this.targetResolution_=g,this.targetCenter_=k,this.applyTargetState_(!1,!0),Bz(q,!0))},t.prototype.centerOn=function(r,n,o){this.centerOnInternal(Xf(r,this.getProjection()),n,o)},t.prototype.centerOnInternal=function(r,n,o){this.setCenterInternal(bie(r,n,o,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,o,i){var a,u=this.padding_;if(u&&r){var p=this.getViewportSizeMinusPadding_(-o),h=bie(r,i,[p[0]/2+u[3],p[1]/2+u[0]],n,o);a=[r[0]-h[0],r[1]-h[1]]}return a},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=oA(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var o=n&&Xf(n,this.getProjection());this.adjustResolutionInternal(r,o)},t.prototype.adjustResolutionInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*r,0,i,o);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=Xf(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+r,o);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&Xf(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var o=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,o),a=this.getViewportSize_(i),u=this.constraints_.resolution(this.targetResolution_,0,a,o),p=this.constraints_.center(this.targetCenter_,u,a,o,this.calculateCenterShift(this.targetCenter_,u,i,a));this.get(ff.ROTATION)!==i&&this.set(ff.ROTATION,i),this.get(ff.RESOLUTION)!==u&&(this.set(ff.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!p||!this.get(ff.CENTER)||!s1(this.get(ff.CENTER),p))&&this.set(ff.CENTER,p),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,o){var i=r!==void 0?r:200,a=n||0,u=this.constraints_.rotation(this.targetRotation_),p=this.getViewportSize_(u),h=this.constraints_.resolution(this.targetResolution_,a,p),g=this.constraints_.center(this.targetCenter_,h,p,!1,this.calculateCenterShift(this.targetCenter_,h,u,p));if(i===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=u,this.targetCenter_=g,this.applyTargetState_();return}var x=o||(i===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==u||!this.getCenterInternal()||!s1(this.getCenterInternal(),g))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:u,center:g,resolution:h,duration:i,easing:lf,anchor:x}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Iu.INTERACTING,1)},t.prototype.endInteraction=function(r,n,o){var i=o&&Xf(o,this.getProjection());this.endInteractionInternal(r,n,i)},t.prototype.endInteractionInternal=function(r,n,o){this.setHint(Iu.INTERACTING,-1),this.resolveConstraints(r,n,o)},t.prototype.getConstrainedCenter=function(r,n){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),o)},t.prototype.getConstrainedZoom=function(r,n){var o=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(o,n))},t.prototype.getConstrainedResolution=function(r,n){var o=n||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,o,i)},t}(Za);function Bz(e,t){setTimeout(function(){e(t)},0)}function $Ar(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return gie(e.extent,e.constrainOnlyCenter,t)}var r=P6(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,gie(n,!1,!1)}return Itt}function YAr(e){var t,r,n,o=28,i=2,a=e.minZoom!==void 0?e.minZoom:xie,u=e.maxZoom!==void 0?e.maxZoom:o,p=e.zoomFactor!==void 0?e.zoomFactor:i,h=e.multiWorld!==void 0?e.multiWorld:!1,g=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,x=e.showFullExtent!==void 0?e.showFullExtent:!1,b=P6(e.projection,"EPSG:3857"),T=b.getExtent(),A=e.constrainOnlyCenter,L=e.extent;if(!h&&!L&&b.isGlobal()&&(A=!1,L=T),e.resolutions!==void 0){var P=e.resolutions;r=P[a],n=P[u]!==void 0?P[u]:P[P.length-1],e.constrainResolution?t=Ttt(P,g,!A&&L,x):t=_ie(r,n,g,!A&&L,x)}else{var k=T?Math.max(fi(T),bs(T)):360*gu[vu.DEGREES]/b.getMetersPerUnit(),q=k/Qv/Math.pow(i,xie),U=q/Math.pow(i,o-xie);r=e.maxResolution,r!==void 0?a=0:r=q/Math.pow(p,a),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(p,u):n=q/Math.pow(p,u):n=U),u=a+Math.floor(Math.log(r/n)/Math.log(p)),n=r/Math.pow(p,u-a),e.constrainResolution?t=Mtt(p,r,n,g,!A&&L,x):t=_ie(r,n,g,!A&&L,x)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:a,zoomFactor:p}}function ZAr(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?Zet():r===!1?lie:typeof r=="number"?Yet(r):lie}else return yE}function KAr(e){return!(e.sourceCenter&&e.targetCenter&&!s1(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function bie(e,t,r,n,o){var i=Math.cos(-o),a=Math.sin(-o),u=e[0]*i-e[1]*a,p=e[1]*i+e[0]*a;u+=(t[0]/2-r[0])*n,p+=(r[1]-t[1]/2)*n,a=-a;var h=u*i-p*a,g=p*i+u*a;return[h,g]}var Sd=WAr;var XAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Ctt(e){if(e instanceof sD){e.setMapInternal(null);return}e instanceof lD&&e.getLayers().forEach(Ctt)}function Att(e,t){if(e instanceof sD){e.setMapInternal(t);return}if(e instanceof lD)for(var r=e.getLayers().getArray(),n=0,o=r.length;n<o;++n)Att(r[n],t)}var JAr=function(e){XAr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=QAr(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:Mz,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=uf(),n.pixelToCoordinateTransform_=uf(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=o.controls||new Pl,n.interactions=o.interactions||new Pl,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new wtt(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(ca.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(ca.VIEW,n.handleViewChanged_),n.addChangeListener(ca.SIZE,n.handleSizeChanged_),n.addChangeListener(ca.TARGET,n.handleTargetChanged_),n.setProperties(o.values);var i=n;return r.view&&!(r.view instanceof Sd)&&r.view.then(function(a){i.setView(new Sd(a))}),n.controls.addEventListener(Ll.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener(Ll.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener(Ll.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener(Ll.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(Ll.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener(Ll.REMOVE,function(a){var u=a.element,p=u.getId();p!==void 0&&delete this.overlayIdIndex_[p.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){Att(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=this.getCoordinateFromPixelInternal(r);o=o!==void 0?o:{};var a=o.hitTolerance!==void 0?o.hitTolerance:0,u=o.layerFilter!==void 0?o.layerFilter:Wv,p=o.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,p,n,null,u,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var o=[];return this.forEachFeatureAtPixel(r,function(i){o.push(i)},n),o},t.prototype.getAllLayers=function(){var r=[];function n(o){o.forEach(function(i){i instanceof lD?n(i.getLayers()):r.push(i)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=o||{},a=i.hitTolerance!==void 0?i.hitTolerance:0,u=i.layerFilter||Wv;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,a,n,u)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var o=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var i=n.layerFilter!==void 0?n.layerFilter:Wv,a=n.hitTolerance!==void 0?n.hitTolerance:0,u=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(o,this.frameState_,a,u,i,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),o="changedTouches"in r?r.changedTouches[0]:r;return[o.clientX-n.left,o.clientY-n.top]},t.prototype.getTarget=function(){return this.get(ca.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return oA(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?Yv(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(ca.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof Pl){n.setLayers(r);return}var o=n.getLayers();o.clear(),o.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n];if(i.visible){var a=i.layer.getRenderer();if(a&&!a.ready)return!0;var u=i.layer.getSource();if(u&&u.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=Xf(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?Yv(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(ca.SIZE)},t.prototype.getView=function(){return this.get(ca.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,o,i){return Ett(this.frameState_,r,n,o,i)},t.prototype.handleBrowserEvent=function(r,n){var o=n||r.type,i=new wd(o,this,r);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,o=n.type;if(o===uD.POINTERDOWN||o===yr.WHEEL||o===yr.KEYDOWN){var i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,u=n.target;if(this.overlayContainerStopEvent_.contains(u)||!(a===i?i.documentElement:a).contains(u))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var p=this.getInteractions().getArray().slice(),h=p.length-1;h>=0;h--){var g=p[h];if(!(g.getMap()!==this||!g.getActive()||!this.getTargetElement())){var x=g.handleEvent(r);if(!x||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var o=this.maxTilesLoading_,i=o;if(r){var a=r.viewHints;if(a[Iu.ANIMATING]||a[Iu.INTERACTING]){var u=Date.now()-r.time>8;o=u?0:8,i=u?0:2}}n.getTilesLoading()<o&&(n.reprioritize(),n.loadMoreTiles(o,i))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(al.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(al.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Jv(xd.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Jv(xd.LOADSTART,this,r))));for(var p=this.postRenderFunctions_,h=0,g=p.length;h<g;++h)p[h](this,r);p.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)ao(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(yr.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(yr.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,iD(this.viewport_)}var o=this.getTargetElement();if(!o)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{o.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new xtt(this,this.moveTolerance_);for(var i in ri)this.mapBrowserEventHandler_.addEventListener(ri[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(yr.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(yr.WHEEL,this.boundHandleBrowserEvent_,Cz?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,u=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[Sn(u,yr.KEYDOWN,this.handleBrowserEvent,this),Sn(u,yr.KEYPRESS,this.handleBrowserEvent,this),Sn(a,yr.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ao(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ao(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=Sn(r,pm.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=Sn(r,yr.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ao),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new gm("addlayer",r)),this.layerGroupPropertyListenerKeys_=[Sn(r,pm.PROPERTYCHANGE,this.render,this),Sn(r,yr.CHANGE,this.render,this),Sn(r,"addlayer",this.handleLayerAdd_,this),Sn(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){Ctt(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,o=this.getSize(),i=this.getView(),a=this.frameState_,u=null;if(o!==void 0&&cie(o)&&i&&i.isDef()){var p=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=i.getState();if(u={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:tA(h.center,h.resolution,h.rotation,o),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:h,viewHints:p,wantedTiles:{},mapId:$i(this),renderTargets:{}},h.nextCenter&&h.nextResolution){var g=isNaN(h.nextRotation)?h.rotation:h.nextRotation;u.nextExtent=tA(h.nextCenter,h.nextResolution,g,o)}}if(this.frameState_=u,this.renderer_.renderFrame(u),u){if(u.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,u.postRenderFunctions),a){var x=!this.previousExtent_||!a1(this.previousExtent_)&&!JC(u.extent,this.previousExtent_);x&&(this.dispatchEvent(new Jv(xd.MOVESTART,this,a)),this.previousExtent_=jw(this.previousExtent_))}var b=this.previousExtent_&&!u.viewHints[Iu.ANIMATING]&&!u.viewHints[Iu.INTERACTING]&&!JC(u.extent,this.previousExtent_);b&&(this.dispatchEvent(new Jv(xd.MOVEEND,this,u)),d$e(u.extent,this.previousExtent_))}this.dispatchEvent(new Jv(xd.POSTRENDER,this,u)),this.renderComplete_=this.hasListener(xd.LOADSTART)||this.hasListener(xd.LOADEND)||this.hasListener(al.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new gm("removelayer",n)),this.set(ca.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(ca.SIZE,r)},t.prototype.setTarget=function(r){this.set(ca.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof Sd){this.set(ca.VIEW,r);return}this.set(ca.VIEW,new Sd);var n=this;r.then(function(o){n.setView(new Sd(o))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var o=getComputedStyle(r),i=r.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),a=r.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(i)&&!isNaN(a)&&(n=[i,a],!cie(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,o=getComputedStyle(this.viewport_);o.width&&o.height&&(n=[parseInt(o.width,10),parseInt(o.height,10)]),r.setViewportSize(n)}},t}(Za);function QAr(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new lD({layers:e.layers});r[ca.LAYERGROUP]=n,r[ca.TARGET]=e.target,r[ca.VIEW]=e.view instanceof Sd?e.view:new Sd;var o;e.controls!==void 0&&(Array.isArray(e.controls)?o=new Pl(e.controls.slice()):(Xr(typeof e.controls.getArray=="function",47),o=e.controls));var i;e.interactions!==void 0&&(Array.isArray(e.interactions)?i=new Pl(e.interactions.slice()):(Xr(typeof e.interactions.getArray=="function",48),i=e.interactions));var a;return e.overlays!==void 0?Array.isArray(e.overlays)?a=new Pl(e.overlays.slice()):(Xr(typeof e.overlays.getArray=="function",49),a=e.overlays):a=new Pl,{controls:o,interactions:i,keyboardEventTarget:t,overlays:a,values:r}}var Dtt=JAr;var eDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tDr=function(e){eDr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=o.collapsed!==void 0?o.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=o.collapsible!==void 0,n.collapsible_=o.collapsible!==void 0?o.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var i=o.className!==void 0?o.className:"ol-attribution",a=o.tipLabel!==void 0?o.tipLabel:"Attributions",u=o.expandClassName!==void 0?o.expandClassName:i+"-expand",p=o.collapseLabel!==void 0?o.collapseLabel:"\u203A",h=o.collapseClassName!==void 0?o.collapseClassName:i+"-collapse";typeof p=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=p,n.collapseLabel_.className=h):n.collapseLabel_=p;var g=o.label!==void 0?o.label:"i";typeof g=="string"?(n.label_=document.createElement("span"),n.label_.textContent=g,n.label_.className=u):n.label_=g;var x=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(x),n.toggleButton_.addEventListener(yr.CLICK,n.handleClick_.bind(n),!1);var b=i+" "+cf+" "+bd+(n.collapsed_&&n.collapsible_?" "+sie:"")+(n.collapsible_?"":" ol-uncollapsible"),T=n.element;return T.className=b,T.appendChild(n.toggleButton_),T.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},o=[],i=!0,a=r.layerStatesArray,u=0,p=a.length;u<p;++u){var h=a[u];if(E1(h,r.viewState)){var g=h.layer.getSource();if(g){var x=g.getAttributions();if(x){var b=x(r);if(b)if(i=i&&g.getAttributionsCollapsible()!==!1,Array.isArray(b))for(var T=0,A=b.length;T<A;++T)b[T]in n||(o.push(b[T]),n[b[T]]=!0);else b in n||(o.push(b),n[b]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),o},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),o=n.length>0;if(this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),!Sz(n,this.renderedAttributions_)){Pet(this.ulElement_);for(var i=0,a=n.length;i<a;++i){var u=document.createElement("li");u.innerHTML=n[i],this.ulElement_.appendChild(u)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(sie),this.collapsed_?vE(this.collapseLabel_,this.label_):vE(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(ac),Ntt=tDr;var rDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nDr=function(e){rDr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=o.className!==void 0?o.className:"ol-rotate",a=o.label!==void 0?o.label:"\u21E7",u=o.compassClassName!==void 0?o.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=u,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(u));var p=o.tipLabel?o.tipLabel:"Reset rotation",h=document.createElement("button");h.className=i+"-reset",h.setAttribute("type","button"),h.title=p,h.appendChild(n.label_),h.addEventListener(yr.CLICK,n.handleClick_.bind(n),!1);var g=i+" "+cf+" "+bd,x=n.element;return x.className=g,x.appendChild(h),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=o.duration!==void 0?o.duration:250,n.autoHide_=o.autoHide!==void 0?o.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(aD),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var o=n.getRotation();o!==void 0&&(this.duration_>0&&o%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:lf}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var o=n.viewState.rotation;if(o!=this.rotation_){var i="rotate("+o+"rad)";if(this.autoHide_){var a=this.element.classList.contains(aD);!a&&o===0?this.element.classList.add(aD):a&&o!==0&&this.element.classList.remove(aD)}this.label_.style.transform=i}this.rotation_=o}},t}(ac),Ott=nDr;var oDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iDr=function(e){oDr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this;var i=o.className!==void 0?o.className:"ol-zoom",a=o.delta!==void 0?o.delta:1,u=o.zoomInClassName!==void 0?o.zoomInClassName:i+"-in",p=o.zoomOutClassName!==void 0?o.zoomOutClassName:i+"-out",h=o.zoomInLabel!==void 0?o.zoomInLabel:"+",g=o.zoomOutLabel!==void 0?o.zoomOutLabel:"\u2013",x=o.zoomInTipLabel!==void 0?o.zoomInTipLabel:"Zoom in",b=o.zoomOutTipLabel!==void 0?o.zoomOutTipLabel:"Zoom out",T=document.createElement("button");T.className=u,T.setAttribute("type","button"),T.title=x,T.appendChild(typeof h=="string"?document.createTextNode(h):h),T.addEventListener(yr.CLICK,n.handleClick_.bind(n,a),!1);var A=document.createElement("button");A.className=p,A.setAttribute("type","button"),A.title=b,A.appendChild(typeof g=="string"?document.createTextNode(g):g),A.addEventListener(yr.CLICK,n.handleClick_.bind(n,-a),!1);var L=i+" "+cf+" "+bd,P=n.element;return P.className=L,P.appendChild(T),P.appendChild(A),n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),o=n.getView();if(o){var i=o.getZoom();if(i!==void 0){var a=o.getConstrainedZoom(i+r);this.duration_>0?(o.getAnimating()&&o.cancelAnimations(),o.animate({zoom:a,duration:this.duration_,easing:lf})):o.setZoom(a)}}},t}(ac),Vz=iDr;var aDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sDr=function(e){aDr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.extent=o.extent?o.extent:null;var i=o.className!==void 0?o.className:"ol-zoom-extent",a=o.label!==void 0?o.label:"E",u=o.tipLabel!==void 0?o.tipLabel:"Fit to extent",p=document.createElement("button");p.setAttribute("type","button"),p.title=u,p.appendChild(typeof a=="string"?document.createTextNode(a):a),p.addEventListener(yr.CLICK,n.handleClick_.bind(n),!1);var h=i+" "+cf+" "+bd,g=n.element;return g.className=h,g.appendChild(p),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),o=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(nD(o))},t}(ac),Ltt=sDr;function Ptt(e){var t=e||{},r=new Pl,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new Vz(t.zoomOptions));var o=t.rotate!==void 0?t.rotate:!0;o&&r.push(new Ott(t.rotateOptions));var i=t.attribution!==void 0?t.attribution:!0;return i&&r.push(new Ntt(t.attributionOptions)),r}var lDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uDr=function(e){lDr(t,e);function t(r){return r=jo({},r),r.controls||(r.controls=Ptt()),r.interactions||(r.interactions=Uz({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new ytt(this)},t}(Dtt),ktt=uDr;var fD={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var cDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fDr=function(e){cDr(t,e);function t(r){var n=this,o=r||{},i=jo({},o);return delete i.preload,delete i.useInterimTilesOnError,n=e.call(this,i)||this,n.on,n.once,n.un,n.setPreload(o.preload!==void 0?o.preload:0),n.setUseInterimTilesOnError(o.useInterimTilesOnError!==void 0?o.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(fD.PRELOAD)},t.prototype.setPreload=function(r){this.set(fD.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(fD.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(fD.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(sD),Rtt=fDr;var pDr=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return Xr(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return Xr(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){Xr(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),Gz=pDr;var jtt=function(){function e(t,r,n,o){this.minX=t,this.maxX=r,this.minY=n,this.maxY=o}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function S1(e,t,r,n,o){return o!==void 0?(o.minX=e,o.maxX=t,o.minY=r,o.maxY=n,o):new jtt(e,t,r,n)}var Hz=jtt;var dDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hDr=function(e){dDr(t,e);function t(r,n,o){var i=e.call(this)||this,a=o||{};return i.tileCoord=r,i.state=n,i.interimTile=null,i.key="",i.transition_=a.transition===void 0?250:a.transition,i.transitionStarts_={},i.interpolate=!!a.interpolate,i}return t.prototype.changed=function(){this.dispatchEvent(yr.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==_r.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==_r.LOADED){r.interimTile=null;break}else r.getState()==_r.LOADING?n=r:r.getState()==_r.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==_r.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){Gn()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var o=this.transitionStarts_[r];if(!o)o=n,this.transitionStarts_[r]=o;else if(o===-1)return 1;var i=n-o+1e3/60;return i>=this.transition_?1:$oe(i/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(sf),bE=hDr;var mDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gDr=function(e){mDr(t,e);function t(r){var n=this,o=_r.IDLE;return n=e.call(this,r.tileCoord,o,{transition:r.transition,interpolate:r.interpolate})||this,n.loader_=r.loader,n.data_=null,n.error_=null,n.size_=r.size||[256,256],n}return t.prototype.getSize=function(){return this.size_},t.prototype.getData=function(){return this.data_},t.prototype.getError=function(){return this.error_},t.prototype.load=function(){if(!(this.state!==_r.IDLE&&this.state!==_r.ERROR)){this.state=_r.LOADING,this.changed();var r=this;this.loader_().then(function(n){r.data_=n,r.state=_r.LOADED,r.changed()}).catch(function(n){r.error_=n,r.state=_r.ERROR,r.changed()})}},t}(bE),qtt=gDr;var vDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yDr=function(e){vDr(t,e);function t(r,n,o,i,a,u){var p=e.call(this,r,n,u)||this;return p.crossOrigin_=i,p.src_=o,p.key=o,p.image_=new Image,i!==null&&(p.image_.crossOrigin=i),p.unlisten_=null,p.tileLoadFunction_=a,p}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=_r.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=_r.ERROR,this.unlistenImage_(),this.image_=_Dr(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=_r.LOADED:this.state=_r.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==_r.ERROR&&(this.state=_r.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==_r.IDLE&&(this.state=_r.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=hie(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(bE);function _Dr(){var e=mm(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var I1=yDr;var ztt=.5,Id=!0;var xDr=10,Ftt=.25,bDr=function(){function e(t,r,n,o,i,a){this.sourceProj_=t,this.targetProj_=r;var u={},p=l1(this.targetProj_,this.sourceProj_);this.transformInv_=function(U){var H=U[0]+"/"+U[1];return u[H]||(u[H]=p(U)),u[H]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&fi(o)==fi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?fi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?fi(this.targetProj_.getExtent()):null;var h=Dv(n),g=L6(n),x=O6(n),b=N6(n),T=this.transformInv_(h),A=this.transformInv_(g),L=this.transformInv_(x),P=this.transformInv_(b),k=xDr+(a?Math.max(0,Math.ceil(I6(eA(n)/(a*a*256*256)))):0);if(this.addQuad_(h,g,x,b,T,A,L,P,k),this.wrapsXInSource_){var q=1/0;this.triangles_.forEach(function(U,H,X){q=Math.min(q,U.source[0][0],U.source[1][0],U.source[2][0])}),this.triangles_.forEach(function(U){if(Math.max(U.source[0][0],U.source[1][0],U.source[2][0])-q>this.sourceWorldWidth_/2){var H=[[U.source[0][0],U.source[0][1]],[U.source[1][0],U.source[1][1]],[U.source[2][0],U.source[2][1]]];H[0][0]-q>this.sourceWorldWidth_/2&&(H[0][0]-=this.sourceWorldWidth_),H[1][0]-q>this.sourceWorldWidth_/2&&(H[1][0]-=this.sourceWorldWidth_),H[2][0]-q>this.sourceWorldWidth_/2&&(H[2][0]-=this.sourceWorldWidth_);var X=Math.min(H[0][0],H[1][0],H[2][0]),ee=Math.max(H[0][0],H[1][0],H[2][0]);ee-X<this.sourceWorldWidth_/2&&(U.source=H)}}.bind(this))}u={}}return e.prototype.addTriangle_=function(t,r,n,o,i,a){this.triangles_.push({source:[o,i,a],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,o,i,a,u,p,h){var g=XC([i,a,u,p]),x=this.sourceWorldWidth_?fi(g)/this.sourceWorldWidth_:null,b=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&x>.5&&x<1,A=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var L=XC([t,r,n,o]),P=fi(L)/this.targetWorldWidth_;A=P>Ftt||A}!T&&this.sourceProj_.isGlobal()&&x&&(A=x>Ftt||A)}if(!(!A&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!rA(g,this.maxSourceExtent_))){var k=0;if(!A&&(!isFinite(i[0])||!isFinite(i[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(p[0])||!isFinite(p[1]))){if(h>0)A=!0;else if(k=(!isFinite(i[0])||!isFinite(i[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),k!=1&&k!=2&&k!=4&&k!=8)return}if(h>0){if(!A){var q=[(t[0]+n[0])/2,(t[1]+n[1])/2],U=this.transformInv_(q),H=void 0;if(T){var X=(Zf(i[0],b)+Zf(u[0],b))/2;H=X-Zf(U[0],b)}else H=(i[0]+u[0])/2-U[0];var ee=(i[1]+u[1])/2-U[1],ne=H*H+ee*ee;A=ne>this.errorThresholdSquared_}if(A){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var me=[(r[0]+n[0])/2,(r[1]+n[1])/2],ue=this.transformInv_(me),Me=[(o[0]+t[0])/2,(o[1]+t[1])/2],ke=this.transformInv_(Me);this.addQuad_(t,r,me,Me,i,a,ue,ke,h-1),this.addQuad_(Me,me,n,o,ke,ue,u,p,h-1)}else{var Te=[(t[0]+r[0])/2,(t[1]+r[1])/2],Ee=this.transformInv_(Te),Ze=[(n[0]+o[0])/2,(n[1]+o[1])/2],Qe=this.transformInv_(Ze);this.addQuad_(t,Te,Ze,o,i,Ee,Qe,p,h-1),this.addQuad_(Te,r,n,Ze,Ee,a,u,Qe,h-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}k&11||this.addTriangle_(t,n,o,i,u,p),k&14||this.addTriangle_(t,n,r,i,u,a),k&&(k&13||this.addTriangle_(r,o,t,a,p,i),k&7||this.addTriangle_(r,o,n,a,p,u))}},e.prototype.calculateSourceExtent=function(){var t=od();return this.triangles_.forEach(function(r,n,o){var i=r.source;QC(t,i[0]),QC(t,i[1]),QC(t,i[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),Utt=bDr;var wie={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};var Eie,Iie=[];function Btt(e,t,r,n,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,o)),e.restore()}function Sie(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function wDr(){if(Eie===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Btt(e,4,5,4,0),Btt(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;Eie=Sie(t,0)||Sie(t,4)||Sie(t,8)}return Eie}function Vtt(e,t,r,n){var o=nA(r,t,e),i=ore(t,n,r),a=t.getMetersPerUnit();a!==void 0&&(i*=a);var u=e.getMetersPerUnit();u!==void 0&&(i/=u);var p=e.getExtent();if(!p||Kh(p,o)){var h=ore(e,i,o)/i;isFinite(h)&&h>0&&(i/=h)}return i}function Gtt(e,t,r,n){var o=Kf(r),i=Vtt(e,t,o,n);return(!isFinite(i)||i<=0)&&D6(r,function(a){return i=Vtt(e,t,a,n),isFinite(i)&&i>0}),i}function Htt(e,t,r,n,o,i,a,u,p,h,g,x){var b=mm(Math.round(r*e),Math.round(r*t),Iie);if(x||jo(b,wie),p.length===0)return b.canvas;b.scale(r,r);function T(H){return Math.round(H*r)/r}b.globalCompositeOperation="lighter";var A=od();p.forEach(function(H,X,ee){v$e(A,H.extent)});var L=fi(A),P=bs(A),k=mm(Math.round(r*L/n),Math.round(r*P/n));x||jo(k,wie);var q=r/n;p.forEach(function(H,X,ee){var ne=H.extent[0]-A[0],me=-(H.extent[3]-A[3]),ue=fi(H.extent),Me=bs(H.extent);H.image.width>0&&H.image.height>0&&k.drawImage(H.image,h,h,H.image.width-2*h,H.image.height-2*h,ne*q,me*q,ue*q,Me*q)});var U=Dv(a);return u.getTriangles().forEach(function(H,X,ee){var ne=H.source,me=H.target,ue=ne[0][0],Me=ne[0][1],ke=ne[1][0],Te=ne[1][1],Ee=ne[2][0],Ze=ne[2][1],Qe=T((me[0][0]-U[0])/i),Fe=T(-(me[0][1]-U[1])/i),ze=T((me[1][0]-U[0])/i),Ne=T(-(me[1][1]-U[1])/i),et=T((me[2][0]-U[0])/i),st=T(-(me[2][1]-U[1])/i),ft=ue,Ye=Me;ue=0,Me=0,ke-=ft,Te-=Ye,Ee-=ft,Ze-=Ye;var tt=[[ke,Te,0,0,ze-Qe],[Ee,Ze,0,0,et-Qe],[0,0,ke,Te,Ne-Fe],[0,0,Ee,Ze,st-Fe]],lt=t$e(tt);if(lt){if(b.save(),b.beginPath(),wDr()||!x){b.moveTo(ze,Ne);for(var je=4,ge=Qe-ze,We=Fe-Ne,Oe=0;Oe<je;Oe++)b.lineTo(ze+T((Oe+1)*ge/je),Ne+T(Oe*We/(je-1))),Oe!=je-1&&b.lineTo(ze+T((Oe+1)*ge/je),Ne+T((Oe+1)*We/(je-1)));b.lineTo(et,st)}else b.moveTo(ze,Ne),b.lineTo(Qe,Fe),b.lineTo(et,st);b.clip(),b.transform(lt[0],lt[2],lt[1],lt[3],Qe,Fe),b.translate(A[0]-ft,A[3]-Ye),b.scale(n/r,-n/r),b.drawImage(k.canvas,0,0),b.restore()}}),g&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,u.getTriangles().forEach(function(H,X,ee){var ne=H.target,me=(ne[0][0]-U[0])/i,ue=-(ne[0][1]-U[1])/i,Me=(ne[1][0]-U[0])/i,ke=-(ne[1][1]-U[1])/i,Te=(ne[2][0]-U[0])/i,Ee=-(ne[2][1]-U[1])/i;b.beginPath(),b.moveTo(Me,ke),b.lineTo(me,ue),b.lineTo(Te,Ee),b.closePath(),b.stroke()}),b.restore()),b.canvas}var EDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SDr=function(e){EDr(t,e);function t(r,n,o,i,a,u,p,h,g,x,b,T){var A=e.call(this,a,_r.IDLE,{interpolate:!!T})||this;A.renderEdges_=b!==void 0?b:!1,A.pixelRatio_=p,A.gutter_=h,A.canvas_=null,A.sourceTileGrid_=n,A.targetTileGrid_=i,A.wrappedTileCoord_=u||a,A.sourceTiles_=[],A.sourcesListenerKeys_=null,A.sourceZ_=0;var L=i.getTileCoordExtent(A.wrappedTileCoord_),P=A.targetTileGrid_.getExtent(),k=A.sourceTileGrid_.getExtent(),q=P?id(L,P):L;if(eA(q)===0)return A.state=_r.EMPTY,A;var U=r.getExtent();U&&(k?k=id(k,U):k=U);var H=i.getResolution(A.wrappedTileCoord_[0]),X=Gtt(r,o,q,H);if(!isFinite(X)||X<=0)return A.state=_r.EMPTY,A;var ee=x!==void 0?x:ztt;if(A.triangulation_=new Utt(r,o,q,k,X*ee,H),A.triangulation_.getTriangles().length===0)return A.state=_r.EMPTY,A;A.sourceZ_=n.getZForResolution(X);var ne=A.triangulation_.calculateSourceExtent();if(k&&(r.canWrapX()?(ne[1]=Ho(ne[1],k[1],k[3]),ne[3]=Ho(ne[3],k[1],k[3])):ne=id(ne,k)),!eA(ne))A.state=_r.EMPTY;else{for(var me=n.getTileRangeForExtentAndZ(ne,A.sourceZ_),ue=me.minX;ue<=me.maxX;ue++)for(var Me=me.minY;Me<=me.maxY;Me++){var ke=g(A.sourceZ_,ue,Me,p);ke&&A.sourceTiles_.push(ke)}A.sourceTiles_.length===0&&(A.state=_r.EMPTY)}return A}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(g,x,b){g&&g.getState()==_r.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(g.tileCoord),image:g.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=_r.ERROR;else{var n=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(n),i=typeof o=="number"?o:o[0],a=typeof o=="number"?o:o[1],u=this.targetTileGrid_.getResolution(n),p=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=Htt(i,a,this.pixelRatio_,p,this.sourceTileGrid_.getExtent(),u,h,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=_r.LOADED}this.changed()},t.prototype.load=function(){if(this.state==_r.IDLE){this.state=_r.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();if(a==_r.IDLE||a==_r.LOADING){r++;var u=Sn(n,yr.CHANGE,function(p){var h=n.getState();(h==_r.LOADED||h==_r.ERROR||h==_r.EMPTY)&&(ao(u),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();a==_r.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ao),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Let(this.canvas_.getContext("2d")),Iie.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(bE),Wz=SDr;var pD=34962,dD=34963,$tt=35040,wE=35044,Ytt=35048,Ztt=5121,Ktt=5123,Xtt=5125,Tie=5126,Wtt=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Mie(e,t){for(var r=jo({preserveDrawingBuffer:!0,antialias:!HQe},t),n=Wtt.length,o=0;o<n;++o)try{var i=e.getContext(Wtt[o],r);if(i)return i}catch(a){}return null}var IDr={STATIC_DRAW:wE,STREAM_DRAW:$tt,DYNAMIC_DRAW:Ytt},TDr=function(){function e(t,r){this.array=null,this.type=t,Xr(t===pD||t===dD,62),this.usage=r!==void 0?r:IDr.STATIC_DRAW}return e.prototype.ofSize=function(t){this.array=new(Cie(this.type))(t)},e.prototype.fromArray=function(t){var r=Cie(this.type);this.array=r.from?r.from(t):new r(t)},e.prototype.fromArrayBuffer=function(t){this.array=new(Cie(this.type))(t)},e.prototype.getType=function(){return this.type},e.prototype.getArray=function(){return this.array},e.prototype.getUsage=function(){return this.usage},e.prototype.getSize=function(){return this.array?this.array.length:0},e}();function Cie(e){switch(e){case pD:return Float32Array;case dD:return Uint32Array;default:return Float32Array;}}var $z=TDr;var MDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Qtt(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function CDr(e,t,r,n){Qtt(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}function Jtt(e,t,r,n,o,i){var a=e.getGL(),u,p;if(r instanceof Float32Array){u=a.FLOAT,e.getExtension("OES_texture_float");var h=e.getExtension("OES_texture_float_linear");p=h!==null}else u=a.UNSIGNED_BYTE,p=!0;Qtt(a,t,i&&p);var g=r.byteLength/n[1],x=1;g%8===0?x=8:g%4===0?x=4:g%2===0&&(x=2);var b;switch(o){case 1:{b=a.LUMINANCE;break}case 2:{b=a.LUMINANCE_ALPHA;break}case 3:{b=a.RGB;break}case 4:{b=a.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(o));}var T=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,x),a.texImage2D(a.TEXTURE_2D,0,b,n[0],n[1],0,b,u,r),a.pixelStorei(a.UNPACK_ALIGNMENT,T)}var EE=null;function ADr(){var e=document.createElement("canvas");e.width=1,e.height=1,EE=e.getContext("2d")}var DDr=function(e){MDr(t,e);function t(r){var n=e.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=Ka(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var o=new $z(pD,wE);return o.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(o),n.coords=o,n.setTile(r.tile),n}return t.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(yr.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===_r.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof I1){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(yr.CHANGE,this.handleTileChange_)}},t.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),o=this.tile;if(o instanceof I1||o instanceof Wz){var i=n.createTexture();this.textures.push(i),this.bandCount=4,CDr(n,i,o.getImage(),o.interpolate);return}var a=o.getSize(),u=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],p=o.getData(),h=p instanceof Float32Array,g=u[0]*u[1],x=h?Float32Array:Uint8Array,b=x.BYTES_PER_ELEMENT,T=p.byteLength/u[1];this.bandCount=Math.floor(T/b/u[0]);var A=Math.ceil(this.bandCount/4);if(A===1){var i=n.createTexture();this.textures.push(i),Jtt(r,i,p,u,this.bandCount,o.interpolate);return}for(var L=new Array(A),P=0;P<A;++P){var i=n.createTexture();this.textures.push(i);var k=P<A-1?4:this.bandCount%4;L[P]=new x(g*k)}for(var q=0,U=0,H=u[0]*this.bandCount,X=0;X<u[1];++X){for(var ee=0;ee<H;++ee){var ne=p[U+ee],me=Math.floor(q/this.bandCount),ue=ee%this.bandCount,P=Math.floor(ue/4),Me=L[P],k=Me.length/g,ke=ue%4;Me[me*k+ke]=ne,++q}U+=T/b}for(var P=0;P<A;++P){var i=this.textures[P],Me=L[P],k=Me.length/g;Jtt(r,i,Me,u,k,o.interpolate)}},t.prototype.handleTileChange_=function(){this.tile.getState()===_r.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(yr.CHANGE))},t.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(yr.CHANGE,this.handleTileChange_)},t.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var o=this.renderSize_[0],i=this.renderSize_[1],a=this.gutter_;if(this.tile instanceof qtt){var u=this.tile.getSize(),p=u[0],h=u[1],g=p+2*a,x=h+2*a,b=a+Math.floor(p*(r/o)),T=a+Math.floor(h*(n/i)),A=this.tile.getData();if(A instanceof DataView){var L=A.byteLength/(g*x),P=L*(T*g+b),k=A.buffer.slice(P,P+L);return new DataView(k)}var q=this.bandCount*(T*g+b);return A.slice(q,q+this.bandCount)}EE||ADr(),EE.clearRect(0,0,1,1);var U=this.tile.getImage(),H=U.width,X=U.height,ee=H-2*a,ne=X-2*a,me=a+Math.floor(ee*(r/o)),ue=a+Math.floor(ne*(n/i)),Me;try{EE.drawImage(U,me,ue,1,1,0,0,1,1),Me=EE.getImageData(0,0,1,1).data}catch(ke){return EE=null,null}return Me},t}(sf),ert=DDr;var hD={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var NDr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,ODr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,LDr=function(){function e(t){this.gl_=t.webGlContext;var r=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=r.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=r.createFramebuffer();var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,t.vertexShader||NDr),r.compileShader(n);var o=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(o,t.fragmentShader||ODr),r.compileShader(o),this.renderTargetProgram_=r.createProgram(),r.attachShader(this.renderTargetProgram_,n),r.attachShader(this.renderTargetProgram_,o),r.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=r.createBuffer();var i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i),r.STATIC_DRAW),this.renderTargetAttribLocation_=r.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(a){this.uniforms_.push({value:t.uniforms[a],location:r.getUniformLocation(this.renderTargetProgram_,a)})}.bind(this))}return e.prototype.getGL=function(){return this.gl_},e.prototype.init=function(t){var r=this.getGL(),n=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var o=0,i=r.RGBA,a=0,u=r.RGBA,p=r.UNSIGNED_BYTE,h=null;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,o,i,n[0],n[1],a,u,p,h),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},e.prototype.apply=function(t,r,n,o){var i=this.getGL(),a=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,r?r.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!r){var u=$i(i.canvas);if(!t.renderTargets[u]){var p=i.getContextAttributes();p&&p.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[u]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var h=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,h),this.applyUniforms(t),n&&n(i,t),i.drawArrays(i.TRIANGLES,0,6),o&&o(i,t)},e.prototype.getFrameBuffer=function(){return this.frameBuffer_},e.prototype.applyUniforms=function(t){var r=this.getGL(),n,o=1;this.uniforms_.forEach(function(i){if(n=typeof i.value=="function"?i.value(t):i.value,n instanceof HTMLCanvasElement||n instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(o)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(i.location,o++);else if(Array.isArray(n))switch(n.length){case 2:r.uniform2f(i.location,n[0],n[1]);return;case 3:r.uniform3f(i.location,n[0],n[1],n[2]);return;case 4:r.uniform4f(i.location,n[0],n[1],n[2],n[3]);return;default:return;}else typeof n=="number"&&r.uniform1f(i.location,n)})},e}(),Aie=LDr;function Yz(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function SE(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}var PDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var mD={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},IE={UNSIGNED_BYTE:Ztt,UNSIGNED_SHORT:Ktt,UNSIGNED_INT:Xtt,FLOAT:Tie},Zz={};function trt(e){return"shared/"+e}var rrt=0;function kDr(){var e="unique/"+rrt;return rrt+=1,e}function RDr(e){var t=Zz[e];if(!t){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",t={users:0,canvas:r},Zz[e]=t}return t.users+=1,t.canvas}function jDr(e){var t=Zz[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.canvas,n=Mie(r),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),delete Zz[e]}}var qDr=function(e){PDr(t,e);function t(r){var n=e.call(this)||this,o=r||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=o.canvasCacheKey?trt(o.canvasCacheKey):kDr(),n.canvas_=RDr(n.canvasCacheKey_),n.gl_=Mie(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(hD.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(hD.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=uf(),n.offsetScaleMatrix_=uf(),n.tmpMat4_=Yz(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],o.uniforms&&n.setUniforms(o.uniforms);var i=n.getGL();return n.postProcessPasses_=o.postProcesses?o.postProcesses.map(function(a){return new Aie({webGlContext:i,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new Aie({webGlContext:i})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return t.prototype.setUniforms=function(r){this.uniforms_=[];for(var n in r)this.uniforms_.push({name:n,value:r[n]});this.uniformLocations_={}},t.prototype.canvasCacheKeyMatches=function(r){return this.canvasCacheKey_===trt(r)},t.prototype.getExtension=function(r){if(r in this.extensionCache_)return this.extensionCache_[r];var n=this.gl_.getExtension(r);return this.extensionCache_[r]=n,n},t.prototype.bindBuffer=function(r){var n=this.getGL(),o=$i(r),i=this.bufferCache_[o];if(!i){var a=n.createBuffer();i={buffer:r,webGlBuffer:a},this.bufferCache_[o]=i}n.bindBuffer(r.getType(),i.webGlBuffer)},t.prototype.flushBufferData=function(r){var n=this.getGL();this.bindBuffer(r),n.bufferData(r.getType(),r.getArray(),r.getUsage())},t.prototype.deleteBuffer=function(r){var n=this.getGL(),o=$i(r),i=this.bufferCache_[o];i&&!n.isContextLost()&&n.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[o]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener(hD.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(hD.RESTORED,this.boundHandleWebGLContextRestored_),jDr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},t.prototype.prepareDraw=function(r,n){var o=this.getGL(),i=this.getCanvas(),a=r.size,u=r.pixelRatio;i.width=a[0]*u,i.height=a[1]*u,i.style.width=a[0]+"px",i.style.height=a[1]+"px",o.useProgram(this.currentProgram_);for(var p=this.postProcessPasses_.length-1;p>=0;p--)this.postProcessPasses_[p].init(r);o.bindTexture(o.TEXTURE_2D,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,n?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.prepareDrawToRenderTarget=function(r,n,o){var i=this.getGL(),a=n.getSize();i.bindFramebuffer(i.FRAMEBUFFER,n.getFramebuffer()),i.viewport(0,0,a[0],a[1]),i.bindTexture(i.TEXTURE_2D,n.getTexture()),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,o?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.drawElements=function(r,n){var o=this.getGL();this.getExtension("OES_element_index_uint");var i=o.UNSIGNED_INT,a=4,u=n-r,p=r*a;o.drawElements(o.TRIANGLES,u,i,p)},t.prototype.finalizeDraw=function(r,n,o){for(var i=0,a=this.postProcessPasses_.length;i<a;i++)i===a-1?this.postProcessPasses_[i].apply(r,null,n,o):this.postProcessPasses_[i].apply(r,this.postProcessPasses_[i+1])},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(r){var n=r.size,o=r.viewState.rotation,i=hE(this.offsetScaleMatrix_);rD(i,2/n[0],2/n[1]);var a=hE(this.offsetRotateMatrix_);o!==0&&Dz(a,-o),this.setUniformMatrixValue(mD.OFFSET_SCALE_MATRIX,SE(this.tmpMat4_,i)),this.setUniformMatrixValue(mD.OFFSET_ROTATION_MATRIX,SE(this.tmpMat4_,a)),this.setUniformFloatValue(mD.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(mD.ZOOM,r.viewState.zoom),this.setUniformFloatValue(mD.RESOLUTION,r.viewState.resolution)},t.prototype.applyUniforms=function(r){var n=this.getGL(),o,i=0;this.uniforms_.forEach(function(a){if(o=typeof a.value=="function"?a.value(r):a.value,o instanceof HTMLCanvasElement||o instanceof HTMLImageElement||o instanceof ImageData){a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(i)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var u=!(o instanceof HTMLImageElement)||o.complete;u&&a.prevValue!==o&&(a.prevValue=o,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o)),n.uniform1i(this.getUniformLocation(a.name),i++)}else if(Array.isArray(o)&&o.length===6)this.setUniformMatrixValue(a.name,SE(this.tmpMat4_,o));else if(Array.isArray(o)&&o.length<=4)switch(o.length){case 2:n.uniform2f(this.getUniformLocation(a.name),o[0],o[1]);return;case 3:n.uniform3f(this.getUniformLocation(a.name),o[0],o[1],o[2]);return;case 4:n.uniform4f(this.getUniformLocation(a.name),o[0],o[1],o[2],o[3]);return;default:return;}else typeof o=="number"&&n.uniform1f(this.getUniformLocation(a.name),o)}.bind(this))},t.prototype.useProgram=function(r){if(r==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},!0},t.prototype.compileShader=function(r,n){var o=this.getGL(),i=o.createShader(n);return o.shaderSource(i,r),o.compileShader(i),i},t.prototype.getProgram=function(r,n){var o=this.getGL(),i=this.compileShader(r,o.FRAGMENT_SHADER),a=this.compileShader(n,o.VERTEX_SHADER),u=o.createProgram();if(o.attachShader(u,i),o.attachShader(u,a),o.linkProgram(u),!o.getShaderParameter(i,o.COMPILE_STATUS)){var p="Fragment shader compliation failed: ".concat(o.getShaderInfoLog(i));throw new Error(p)}if(o.deleteShader(i),!o.getShaderParameter(a,o.COMPILE_STATUS)){var p="Vertex shader compilation failed: ".concat(o.getShaderInfoLog(a));throw new Error(p)}if(o.deleteShader(a),!o.getProgramParameter(u,o.LINK_STATUS)){var p="GL program linking failed: ".concat(o.getShaderInfoLog(a));throw new Error(p)}return u},t.prototype.getUniformLocation=function(r){return this.uniformLocations_[r]===void 0&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]},t.prototype.getAttributeLocation=function(r){return this.attribLocations_[r]===void 0&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]},t.prototype.makeProjectionTransform=function(r,n){var o=r.size,i=r.viewState.rotation,a=r.viewState.resolution,u=r.viewState.center;return hE(n),Zv(n,0,0,2/(a*o[0]),2/(a*o[1]),-i,-u[0],-u[1]),n},t.prototype.setUniformFloatValue=function(r,n){this.getGL().uniform1f(this.getUniformLocation(r),n)},t.prototype.setUniformFloatVec4=function(r,n){this.getGL().uniform4fv(this.getUniformLocation(r),n)},t.prototype.setUniformMatrixValue=function(r,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,n)},t.prototype.enableAttributeArray_=function(r,n,o,i,a){var u=this.getAttributeLocation(r);u<0||(this.getGL().enableVertexAttribArray(u),this.getGL().vertexAttribPointer(u,n,o,!1,i,a))},t.prototype.enableAttributes=function(r){for(var n=zDr(r),o=0,i=0;i<r.length;i++){var a=r[i];this.enableAttributeArray_(a.name,a.size,a.type||Tie,n,o),o+=a.size*nrt(a.type)}},t.prototype.handleWebGLContextLost=function(){Kc(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(r,n,o){var i=this.getGL(),a=o||i.createTexture(),u=0,p=i.RGBA,h=0,g=i.RGBA,x=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,a),n?i.texImage2D(i.TEXTURE_2D,u,p,g,x,n):i.texImage2D(i.TEXTURE_2D,u,p,r[0],r[1],h,g,x,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),a},t}(Hv);function zDr(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*nrt(n.type)}return t}function nrt(e){switch(e){case IE.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case IE.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case IE.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case IE.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT;}}var ort=qDr;var FDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var UDr=function(e){FDr(t,e);function t(r,n){var o=e.call(this,r)||this,i=n||{};return o.inversePixelTransform_=uf(),o.pixelContext_=null,o.postProcesses_=i.postProcesses,o.uniforms_=i.uniforms,o.helper,r.addChangeListener(Hn.MAP,o.removeHelper.bind(o)),o.dispatchPreComposeEvent=o.dispatchPreComposeEvent.bind(o),o.dispatchPostComposeEvent=o.dispatchPostComposeEvent.bind(o),o}return t.prototype.dispatchPreComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(al.PRECOMPOSE)){var i=new xE(al.PRECOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.dispatchPostComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(al.POSTCOMPOSE)){var i=new xE(al.POSTCOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.reset=function(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},t.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},t.prototype.prepareFrame=function(r){if(this.getLayer().getRenderSource()){for(var n=!0,o=-1,i=void 0,a=0,u=r.layerStatesArray.length;a<u;a++){var p=r.layerStatesArray[a].layer,h=p.getRenderer();if(!(h instanceof t)){n=!0;continue}var g=p.getClassName();if((n||g!==i)&&(o+=1,n=!1),i=g,h===this)break}var x="map/"+r.mapId+"/group/"+o;(!this.helper||!this.helper.canvasCacheKeyMatches(x))&&(this.removeHelper(),this.helper=new ort({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:x}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(r)},t.prototype.afterHelperCreated=function(){},t.prototype.prepareFrameInternal=function(r){return!0},t.prototype.disposeInternal=function(){this.removeHelper(),e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(r,n,o){var i=this.getLayer();if(i.hasListener(r)){Zv(this.inversePixelTransform_,0,0,o.pixelRatio,-o.pixelRatio,0,0,-o.size[1]);var a=new xE(r,this.inversePixelTransform_,o,n);i.dispatchEvent(a)}},t.prototype.preRender=function(r,n){this.dispatchRenderEvent_(al.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(al.POSTRENDER,r,n)},t.prototype.getDataAtPixel=function(r,n,o){var i=Yv([n.pixelRatio,0,0,n.pixelRatio,0,0],r.slice()),a=this.helper.getGL();if(!a)return null;var u=this.getLayer(),p=u.getExtent();if(p){var h=Yv(n.pixelToCoordinateTransform,r.slice());if(!Kh(p,h))return null}var g=a.getContextAttributes();if(!g||!g.preserveDrawingBuffer)return new Uint8Array;var x=Math.round(i[0]),b=Math.round(i[1]),T=this.pixelContext_;if(!T){var A=document.createElement("canvas");A.width=1,A.height=1,T=A.getContext("2d"),this.pixelContext_=T}T.clearRect(0,0,1,1);var L;try{T.drawImage(a.canvas,x,b,1,1,0,0,1,1),L=T.getImageData(0,0,1,1).data}catch(P){return L}return L[3]===0?null:L},t}(ptt);var irt=UDr;function TE(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function T1(e,t,r){return e+"/"+t+"/"+r}function ey(e){return T1(e[0],e[1],e[2])}function art(e){return e.split("/").map(Number)}function srt(e){return(e[1]<<e[0])+e[2]}function lrt(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var i=t.getFullTileRange(r);return i?i.containsXY(n,o):!0}var BDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rn={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},gD={TEXTURE_COORD:"a_textureCoord"},VDr=[{name:gD.TEXTURE_COORD,size:2,type:IE.FLOAT}],GDr={};function HDr(e){return 2*(1-1/(e+1))-1}function urt(e,t,r){r in e||(e[r]=[]),e[r].push(t)}function Die(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=id(t,Ov(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var o=n.getTileGridForProjection(e.viewState.projection).getExtent();o&&(t=id(t,o))}return t}function Nie(e,t){return"".concat(e.getKey(),",").concat(ey(t))}var WDr=function(e){BDr(t,e);function t(r,n){var o=e.call(this,r,{uniforms:n.uniforms})||this;o.renderComplete=!1,o.tileTransform_=uf(),o.tempMat4_=Yz(),o.tempTileRange_=new Hz(0,0,0,0),o.tempTileCoord_=TE(0,0,0),o.tempSize_=[0,0],o.program_,o.vertexShader_=n.vertexShader,o.fragmentShader_=n.fragmentShader,o.indices_=new $z(dD,wE),o.indices_.fromArray([0,1,3,1,2,3]);var i=n.cacheSize!==void 0?n.cacheSize:512;return o.tileTextureCache_=new Gz(i),o.paletteTextures_=n.paletteTextures||[],o.frameState_=null,o}return t.prototype.reset=function(r){e.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},t.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},t.prototype.isDrawableTile_=function(r){var n=this.getLayer(),o=r.getState(),i=n.getUseInterimTilesOnError();return o==_r.LOADED||o==_r.EMPTY||o==_r.ERROR&&!i},t.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),o=n.getRenderSource();return!o||a1(Die(r,r.extent))?!1:o.getState()==="ready"},t.prototype.enqueueTiles=function(r,n,o,i){var a=r.viewState,u=this.getLayer(),p=u.getRenderSource(),h=p.getTileGridForProjection(a.projection),g=p.getGutterForProjection(a.projection),x=$i(p);x in r.wantedTiles||(r.wantedTiles[x]={});for(var b=r.wantedTiles[x],T=this.tileTextureCache_,A=Math.max(o-u.getPreload(),h.getMinZoom(),u.getMinZoom()),L=o;L>=A;--L)for(var P=h.getTileRangeForExtentAndZ(n,L,this.tempTileRange_),k=h.getResolution(L),q=P.minX;q<=P.maxX;++q)for(var U=P.minY;U<=P.maxY;++U){var H=TE(L,q,U,this.tempTileCoord_),X=Nie(p,H),ee=void 0,ne=void 0;if(T.containsKey(X)&&(ee=T.get(X),ne=ee.tile),!ee||ee.tile.key!==p.getKey())if(ne=p.getTile(L,q,U,r.pixelRatio,a.projection),!ee)ee=new ert({tile:ne,grid:h,helper:this.helper,gutter:g}),T.set(X,ee);else if(this.isDrawableTile_(ne))ee.setTile(ne);else{var me=ne.getInterimTile();ee.setTile(me)}urt(i,ee,L);var ue=ne.getKey();b[ue]=!0,ne.getState()===_r.IDLE&&(r.tileQueue.isKeyQueued(ue)||r.tileQueue.enqueue([ne,x,h.getTileCoordCenter(H),k]))}},t.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var o=r.viewState,i=this.getLayer(),a=i.getRenderSource(),u=a.getTileGridForProjection(o.projection),p=a.getGutterForProjection(o.projection),h=Die(r,r.extent),g=u.getZForResolution(o.resolution,a.zDirection),x={};if(r.nextExtent){var b=u.getZForResolution(o.nextResolution,a.zDirection),T=Die(r,r.nextExtent);this.enqueueTiles(r,T,b,x)}this.enqueueTiles(r,h,g,x);for(var A={},L=$i(this),P=r.time,k=!1,q=x[g],U=0,H=q.length;U<H;++U){var X=q[U],ee=X.tile,ne=ee.tileCoord;if(X.loaded){var me=ee.getAlpha(L,P);if(me===1){ee.endTransition(L);continue}k=!0;var ue=ey(ne);A[ue]=me}this.renderComplete=!1;var Me=this.findAltTiles_(u,ne,g+1,x);if(!Me)for(var ke=u.getMinZoom(),Te=g-1;Te>=ke;--Te){var Ee=this.findAltTiles_(u,ne,Te,x);if(Ee)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!k);for(var Ze=Object.keys(x).map(Number).sort(tD),Qe=o.center[0],Fe=o.center[1],ze=0,Ne=Ze.length;ze<Ne;++ze)for(var et=Ze[ze],st=u.getResolution(et),ft=Ka(u.getTileSize(et),this.tempSize_),Ye=u.getOrigin(et),tt=ft[0]+2*p,lt=ft[1]+2*p,je=tt/lt,ge=(Qe-Ye[0])/(ft[0]*st),We=(Ye[1]-Fe)/(ft[1]*st),Oe=o.resolution/st,at=HDr(et),ot=x[et],U=0,H=ot.length;U<H;++U){var X=ot[U];if(X.loaded){var ee=X.tile,ne=ee.tileCoord,ue=ey(ne),Pt=ne[1],Mt=ne[2];hE(this.tileTransform_),rD(this.tileTransform_,2/(r.size[0]*Oe/tt),-2/(r.size[1]*Oe/tt)),Dz(this.tileTransform_,o.rotation),rD(this.tileTransform_,1,1/je),KQe(this.tileTransform_,(ft[0]*(Pt-ge)-p)/tt,(ft[1]*(Mt-We)-p)/lt),this.helper.setUniformMatrixValue(rn.TILE_TRANSFORM,SE(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(X.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(VDr);for(var Dt=0;Dt<X.textures.length;){var Ae="TEXTURE"+Dt,Lt="".concat(rn.TILE_TEXTURE_ARRAY,"[").concat(Dt,"]");n.activeTexture(n[Ae]),n.bindTexture(n.TEXTURE_2D,X.textures[Dt]),n.uniform1i(this.helper.getUniformLocation(Lt),Dt),++Dt}for(var Wt=0;Wt<this.paletteTextures_.length;++Wt){var Ct=this.paletteTextures_[Wt];n.activeTexture(n["TEXTURE"+Dt]);var ce=Ct.getTexture(n);n.bindTexture(n.TEXTURE_2D,ce),n.uniform1i(this.helper.getUniformLocation(Ct.name),Dt),++Dt}var me=ue in A?A[ue]:1;me<1&&(r.animate=!0),this.helper.setUniformFloatValue(rn.TRANSITION_ALPHA,me),this.helper.setUniformFloatValue(rn.DEPTH,at),this.helper.setUniformFloatValue(rn.TEXTURE_PIXEL_WIDTH,tt),this.helper.setUniformFloatValue(rn.TEXTURE_PIXEL_HEIGHT,lt),this.helper.setUniformFloatValue(rn.TEXTURE_RESOLUTION,st),this.helper.setUniformFloatValue(rn.TEXTURE_ORIGIN_X,Ye[0]+Pt*ft[0]*st-p*st),this.helper.setUniformFloatValue(rn.TEXTURE_ORIGIN_Y,Ye[1]-Mt*ft[1]*st+p*st);var qe=h;p>0&&(qe=u.getTileCoordExtent(ne),id(qe,h,qe)),this.helper.setUniformFloatVec4(rn.RENDER_EXTENT,qe),this.helper.setUniformFloatValue(rn.RESOLUTION,o.resolution),this.helper.setUniformFloatValue(rn.ZOOM,o.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Ue=this.helper.getCanvas(),ht=this.tileTextureCache_;ht.canExpireCache();){var X=ht.pop();X.dispose()}var yt=function(mt,_t){a.expireCache(_t.viewState.projection,GDr)};return r.postRenderFunctions.push(yt),this.postRender(n,r),Ue},t.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var o=this.frameState_;if(!o)return null;var i=this.getLayer(),a=Yv(o.pixelToCoordinateTransform,r.slice()),u=o.viewState,p=i.getExtent();if(p&&!Kh(Ov(p,u.projection),a))return null;var h=i.getSources(XC([a]),u.resolution),g,x,b;for(g=h.length-1;g>=0;--g)if(x=h[g],x.getState()==="ready"){if(b=x.getTileGridForProjection(u.projection),x.getWrapX())break;var T=b.getExtent();if(!T||Kh(T,a))break}if(g<0)return null;for(var A=this.tileTextureCache_,L=b.getZForResolution(u.resolution);L>=b.getMinZoom();--L){var P=b.getTileCoordForCoordAndZ(a,L),k=Nie(x,P);if(A.containsKey(k)){var q=A.get(k);if(q.loaded){var U=b.getOrigin(L),H=Ka(b.getTileSize(L)),X=b.getResolution(L),ee=(a[0]-U[0])/X-P[1]*H[0],ne=(U[1]-a[1])/X-P[2]*H[1];return q.getPixelData(ee,ne)}}}return null},t.prototype.findAltTiles_=function(r,n,o,i){var a=r.getTileRangeForTileCoordAndZ(n,o,this.tempTileRange_);if(!a)return!1;for(var u=!0,p=this.tileTextureCache_,h=this.getLayer().getRenderSource(),g=a.minX;g<=a.maxX;++g)for(var x=a.minY;x<=a.maxY;++x){var b=Nie(h,[o,g,x]),T=!1;if(p.containsKey(b)){var A=p.get(b);A.loaded&&(urt(i,A,o),T=!0)}T||(u=!1)}return u},t.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}e.prototype.removeHelper.call(this)},t.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}e.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},t}(irt),crt=WDr;var $Dr=function(){function e(t,r){this.name=t,this.data=r,this.texture_=null}return e.prototype.getTexture=function(t){if(!this.texture_){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},e}(),frt=$Dr;var mr={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},_n={};function Td(e){if(typeof e=="number")return mr.NUMBER;if(typeof e=="boolean")return mr.BOOLEAN;if(typeof e=="string")return ctt(e)?mr.COLOR|mr.STRING:mr.STRING;if(!Array.isArray(e))throw new Error("Unhandled value type: ".concat(JSON.stringify(e)));var t=e,r=t.every(function(o){return typeof o=="number"});if(r)return t.length===3||t.length===4?mr.COLOR|mr.NUMBER_ARRAY:mr.NUMBER_ARRAY;if(typeof t[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(t)));var n=_n[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.getReturnType(t.slice(1))}function YDr(e){return I6(e)%1===0}function Kz(e){var t=e.toString();return t.indexOf(".")===-1?t+".0":t}function prt(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(e.length,"(").concat(e.map(Kz).join(", "),")")}function ZDr(e){var t=utt(e).slice();return t.length<4&&t.push(1),prt(t.map(function(r,n){return n<3?r/255:r}))}function Lie(e,t){return e.stringLiteralsMap[t]===void 0&&(e.stringLiteralsMap[t]=Object.keys(e.stringLiteralsMap).length),e.stringLiteralsMap[t]}function KDr(e,t){return Kz(Lie(e,t))}function br(e,t,r){if(Array.isArray(t)&&typeof t[0]=="string"){var n=_n[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.toGlsl(e,t.slice(1),r)}var o=Td(t);if((o&mr.NUMBER)>0)return Kz(t);if((o&mr.BOOLEAN)>0)return t.toString();if((o&mr.STRING)>0&&(r===void 0||r==mr.STRING))return KDr(e,t.toString());if((o&mr.COLOR)>0&&(r===void 0||r==mr.COLOR))return ZDr(t);if((o&mr.NUMBER_ARRAY)>0)return prt(t);throw new Error("Unexpected expression ".concat(t," (expected type ").concat(r,")"))}function drt(e){if(!(Td(e)&mr.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(e)," instead"))}function Ki(e){for(var t=0;t<e.length;t++)drt(e[t])}function hrt(e){if(!(Td(e)&mr.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(e)," instead"))}function Pie(e){if(!(Td(e)&mr.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(e)," instead"))}function ni(e,t){if(e.length!==t)throw new Error("Exactly ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function ty(e,t){if(e.length<t)throw new Error("At least ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function Xz(e,t){if(e.length>t)throw new Error("At most ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function mrt(e){if(e.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(e," instead"))}function XDr(e){if(e.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(e," instead"))}function kie(e,t){if(!YDr(t))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(e)))}_n.get={getReturnType:function(e){return mr.ANY},toGlsl:function(e,t){ni(t,1),hrt(t[0]);var r=t[0].toString();e.attributes.indexOf(r)===-1&&e.attributes.push(r);var n=e.inFragmentShader?"v_":"a_";return n+r}};function Rie(e){return"u_var_"+e}_n.var={getReturnType:function(e){return mr.ANY},toGlsl:function(e,t){ni(t,1),hrt(t[0]);var r=t[0].toString();return e.variables.indexOf(r)===-1&&e.variables.push(r),Rie(r)}};var jie="u_paletteTextures";_n.palette={getReturnType:function(e){return mr.COLOR},toGlsl:function(e,t){ni(t,2),drt(t[0]);var r=br(e,t[0]),n=t[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var o=n.length,i=new Uint8Array(o*4),a=0;a<o;a++){var u=n[a],p=void 0;if(typeof u=="string")p=fie(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var h=u.length;if(h===4)p=u;else{if(h!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(h));p=[u[0],u[1],u[2],1]}}var g=a*4;i[g]=p[0],i[g+1]=p[1],i[g+2]=p[2],i[g+3]=p[3]*255}e.paletteTextures||(e.paletteTextures=[]);var x="".concat(jie,"[").concat(e.paletteTextures.length,"]"),b=new frt(x,i);return e.paletteTextures.push(b),"texture2D(".concat(x,", vec2((").concat(r," + 0.5) / ").concat(o,".0, 0.5))")}};var Oie="getBandValue";_n.band={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){ty(t,1),Xz(t,3);var r=t[0];if(!(Oie in e.functions)){for(var n="",o=e.bandCount||1,i=0;i<o;i++){var a=Math.floor(i/4),u=i%4;u===o-1&&u===1&&(u=3);var p="".concat(rn.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+=`
          if (band == `.concat(i+1,`.0) {
            return texture2D(`).concat(p,", v_textureCoord + vec2(dx, dy))[").concat(u,`];
          }
        `)}e.functions[Oie]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(rn.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(rn.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var h=br(e,r),g=br(e,t[1]||0),x=br(e,t[2]||0);return"".concat(Oie,"(").concat(h,", ").concat(g,", ").concat(x,")")}};_n.time={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,0),"u_time"}};_n.zoom={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,0),"u_zoom"}};_n.resolution={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,0),"u_resolution"}};_n["*"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," * ").concat(br(e,t[1]),")")}};_n["/"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," / ").concat(br(e,t[1]),")")}};_n["+"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," + ").concat(br(e,t[1]),")")}};_n["-"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," - ").concat(br(e,t[1]),")")}};_n.clamp={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){ni(t,3),Ki(t);var r=br(e,t[1]),n=br(e,t[2]);return"clamp(".concat(br(e,t[0]),", ").concat(r,", ").concat(n,")")}};_n["%"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"mod(".concat(br(e,t[0]),", ").concat(br(e,t[1]),")")}};_n["^"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"pow(".concat(br(e,t[0]),", ").concat(br(e,t[1]),")")}};_n.abs={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"abs(".concat(br(e,t[0]),")")}};_n.floor={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"floor(".concat(br(e,t[0]),")")}};_n.round={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"floor(".concat(br(e,t[0])," + 0.5)")}};_n.ceil={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"ceil(".concat(br(e,t[0]),")")}};_n.sin={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"sin(".concat(br(e,t[0]),")")}};_n.cos={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"cos(".concat(br(e,t[0]),")")}};_n.atan={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ty(t,1),Xz(t,2),Ki(t),t.length===2?"atan(".concat(br(e,t[0]),", ").concat(br(e,t[1]),")"):"atan(".concat(br(e,t[0]),")")}};_n[">"]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," > ").concat(br(e,t[1]),")")}};_n[">="]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," >= ").concat(br(e,t[1]),")")}};_n["<"]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," < ").concat(br(e,t[1]),")")}};_n["<="]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(br(e,t[0])," <= ").concat(br(e,t[1]),")")}};function grt(e){return{getReturnType:function(t){return mr.BOOLEAN},toGlsl:function(t,r){ni(r,2);for(var n=mr.ANY,o=0;o<r.length;o++)n&=Td(r[o]);if(n===mr.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~mr.COLOR,"(".concat(br(t,r[0],n)," ").concat(e," ").concat(br(t,r[1],n),")")}}}_n["=="]=grt("==");_n["!="]=grt("!=");_n["!"]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,1),Pie(t[0]),"(!".concat(br(e,t[0]),")")}};function vrt(e){return{getReturnType:function(t){return mr.BOOLEAN},toGlsl:function(t,r){ty(r,2);for(var n=0;n<r.length;n++)Pie(r[n]);var o="";return o=r.map(function(i){return br(t,i)}).join(" ".concat(e," ")),o="(".concat(o,")"),o}}}_n.all=vrt("&&");_n.any=vrt("||");_n.between={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){ni(t,3),Ki(t);var r=br(e,t[1]),n=br(e,t[2]),o=br(e,t[0]);return"(".concat(o," >= ").concat(r," && ").concat(o," <= ").concat(n,")")}};_n.array={getReturnType:function(e){return mr.NUMBER_ARRAY},toGlsl:function(e,t){ty(t,2),Xz(t,4),Ki(t);var r=t.map(function(n){return br(e,n,mr.NUMBER)});return"vec".concat(t.length,"(").concat(r.join(", "),")")}};_n.color={getReturnType:function(e){return mr.COLOR},toGlsl:function(e,t){ty(t,3),Xz(t,4),Ki(t);var r=t;t.length===3&&r.push(1);var n=t.map(function(o,i){return br(e,o,mr.NUMBER)+(i<3?" / 255.0":"")});return"vec".concat(t.length,"(").concat(n.join(", "),")")}};_n.interpolate={getReturnType:function(e){for(var t=mr.COLOR|mr.NUMBER,r=3;r<e.length;r+=2)t=t&Td(e[r]);return t},toGlsl:function(e,t,r){mrt(t),ty(t,6);var n=t[0],o;switch(n[0]){case"linear":o=1;break;case"exponential":o=n[1];break;default:o=null;}if(!o)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var i=r!==void 0?r:mr.ANY,a=_n.interpolate.getReturnType(t)&i;kie(t,a);for(var u=br(e,t[1]),p=Kz(o),h="",g=2;g<t.length-2;g+=2){var x=br(e,t[g]),b=h||br(e,t[g+1],a),T=br(e,t[g+2]),A=br(e,t[g+3],a);h="mix(".concat(b,", ").concat(A,", pow(clamp((").concat(u," - ").concat(x,") / (").concat(T," - ").concat(x,"), 0.0, 1.0), ").concat(p,"))")}return h}};_n.match={getReturnType:function(e){for(var t=mr.ANY,r=2;r<e.length;r+=2)t=t&Td(e[r]);return t=t&Td(e[e.length-1]),t},toGlsl:function(e,t,r){mrt(t),ty(t,4);var n=r!==void 0?r:mr.ANY,o=_n.match.getReturnType(t)&n;kie(t,o);for(var i=br(e,t[0]),a=br(e,t[t.length-1],o),u=null,p=t.length-3;p>=1;p-=2){var h=br(e,t[p]),g=br(e,t[p+1],o);u="(".concat(i," == ").concat(h," ? ").concat(g," : ").concat(u||a,")")}return u}};_n.case={getReturnType:function(e){for(var t=mr.ANY,r=1;r<e.length;r+=2)t=t&Td(e[r]);return t=t&Td(e[e.length-1]),t},toGlsl:function(e,t,r){XDr(t),ty(t,3);var n=r!==void 0?r:mr.ANY,o=_n.case.getReturnType(t)&n;kie(t,o);for(var i=0;i<t.length-1;i+=2)Pie(t[i]);for(var a=br(e,t[t.length-1],o),u=null,i=t.length-3;i>=0;i-=2){var p=br(e,t[i]),h=br(e,t[i+1],o);u="(".concat(p," ? ").concat(h," : ").concat(u||a,")")}return u}};var JDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function yrt(e,t){var r=`
    attribute vec2 `.concat(gD.TEXTURE_COORD,`;
    uniform mat4 `).concat(rn.TILE_TRANSFORM,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(rn.TEXTURE_RESOLUTION,`;
    uniform float `).concat(rn.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(rn.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(rn.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(gD.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(rn.TEXTURE_ORIGIN_X," + ").concat(rn.TEXTURE_RESOLUTION," * ").concat(rn.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(rn.TEXTURE_ORIGIN_Y," - ").concat(rn.TEXTURE_RESOLUTION," * ").concat(rn.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(rn.TILE_TRANSFORM," * vec4(").concat(gD.TEXTURE_COORD,", ").concat(rn.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:t},o=[];if(e.color!==void 0){var i=br(n,e.color,mr.COLOR);o.push("color = ".concat(i,";"))}if(e.contrast!==void 0){var a=br(n,e.contrast,mr.NUMBER);o.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.exposure!==void 0){var u=br(n,e.exposure,mr.NUMBER);o.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.saturation!==void 0){var p=br(n,e.saturation,mr.NUMBER);o.push(`
      float saturation = `.concat(p,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(e.gamma!==void 0){var h=br(n,e.gamma,mr.NUMBER);o.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(h,"));"))}if(e.brightness!==void 0){var g=br(n,e.brightness,mr.NUMBER);o.push("color.rgb = clamp(color.rgb + ".concat(g,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var x={},b=n.variables.length;if(b>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var T=function(U){var H=n.variables[U];if(!(H in e.variables))throw new Error("Missing '".concat(H,"' in style variables"));var X=Rie(H);x[X]=function(){var ee=e.variables[H];return typeof ee=="string"&&(ee=Lie(n,ee)),ee!==void 0?ee:-9999999}},A=0;A<b;++A)T(A);var L=Object.keys(x).map(function(U){return"uniform float ".concat(U,";")}),P=Math.ceil(t/4);L.push("uniform sampler2D ".concat(rn.TILE_TEXTURE_ARRAY,"[").concat(P,"];")),n.paletteTextures&&L.push("uniform sampler2D ".concat(jie,"[").concat(n.paletteTextures.length,"];"));var k=Object.keys(n.functions).map(function(U){return n.functions[U]}),q=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(rn.RENDER_EXTENT,`;
    uniform float `).concat(rn.TRANSITION_ALPHA,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(rn.RESOLUTION,`;
    uniform float `).concat(rn.ZOOM,`;

    `).concat(L.join(`
`),`

    `).concat(k.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(rn.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(rn.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(rn.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(rn.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(rn.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(o.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(rn.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:q,uniforms:x,paletteTextures:n.paletteTextures}}var _rt=function(e){JDr(t,e);function t(r){var n=this,o=r?jo({},r):{},i=o.style||{};delete o.style;var a=o.cacheSize;return delete o.cacheSize,n=e.call(this,o)||this,n.sources_=o.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=i,n.cacheSize_=a,n.styleVariables_=n.style_.variables||{},n.addChangeListener(Hn.SOURCE,n.handleSourceUpdate_),n}return t.prototype.getSources=function(r,n){var o=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:o?[o]:[]},t.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},t.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},t.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},t.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},t.prototype.createRenderer=function(){var r=yrt(this.style_,this.getSourceBandCount_());return new crt(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},t.prototype.renderSources=function(r,n){for(var o=this.getRenderer(),i,a=0,u=n.length;a<u;++a)this.renderedSource_=n[a],o.prepareFrame(r)&&(i=o.renderFrame(r));return i},t.prototype.render=function(r,n){var o=this;this.rendered=!0;for(var i=r.viewState,a=this.getSources(r.extent,i.resolution),u=!0,p=function(T,A){var L=a[T],P=L.getState();if(P=="loading"){var k=function(){L.getState()=="ready"&&(L.removeEventListener("change",k),o.changed())};L.addEventListener("change",k)}u=u&&P=="ready"},h=0,g=a.length;h<g;++h)p(h,g);var x=this.renderSources(r,a);if(this.getRenderer().renderComplete&&u)return this.renderedResolution_=i.resolution,x;if(this.renderedResolution_>.5*i.resolution){var b=this.getSources(r.extent,this.renderedResolution_).filter(function(T){return!a.includes(T)});if(b.length>0)return this.renderSources(r,b)}return x},t.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=yrt(this.style_,this.getSourceBandCount_()),o=this.getRenderer();o.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},t.prototype.updateStyleVariables=function(r){jo(this.styleVariables_,r),this.changed()},t}(Rtt);_rt.prototype.dispose;var xrt=_rt;var QDr=[0,0,0],ry=5,e4r=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Xr(jQe(this.resolutions_,function(a,u){return u-a},!0),17);var r;if(!t.origins){for(var n=0,o=this.resolutions_.length-1;n<o;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Xr(this.origins_.length==this.resolutions_.length,20));var i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Dv(i)),Xr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Xr(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Qv,Xr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(a,u){var p=new Hz(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(i){var h=this.getTileRangeForExtentAndZ(i,u);p.minX=Math.max(h.minX,p.minX),p.maxX=Math.min(h.maxX,p.maxX),p.minY=Math.max(h.minY,p.minY),p.maxY=Math.min(h.maxY,p.maxY)}return p},this):i&&this.calculateTileRanges_(i)}return e.prototype.forEachTileCoord=function(t,r,n){for(var o=this.getTileRangeForExtentAndZ(t,r),i=o.minX,a=o.maxX;i<=a;++i)for(var u=o.minY,p=o.maxY;u<=p;++u)n([r,i,u])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,o){var i,a,u,p=null,h=t[0]-1;for(this.zoomFactor_===2?(a=t[1],u=t[2]):p=this.getTileCoordExtent(t,o);h>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),u=Math.floor(u/2),i=S1(a,a,u,u,n)):i=this.getTileRangeForExtentAndZ(p,h,n),r(h,i))return!0;--h}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var o=t[1]*2,i=t[2]*2;return S1(o,o+1,i,i+1,r)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var o=t[0],i=t[1],a=t[2];if(r===o)return S1(i,a,i,a,n);if(this.zoomFactor_){var u=Math.pow(this.zoomFactor_,r-o),p=Math.floor(i*u),h=Math.floor(a*u);if(r<o)return S1(p,p,h,h,n);var g=Math.floor(u*(i+1))-1,x=Math.floor(u*(a+1))-1;return S1(p,g,h,x,n)}var b=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(b,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var o=this.getOrigin(t),i=this.getResolution(t),a=Ka(this.getTileSize(t),this.tmpSize_),u=o[0]+r.minX*a[0]*i,p=o[0]+(r.maxX+1)*a[0]*i,h=o[1]+r.minY*a[1]*i,g=o[1]+(r.maxY+1)*a[1]*i;return Xh(u,h,p,g,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var o=QDr;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,o);var i=o[1],a=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,o),S1(i,o[1],a,o[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=Ka(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*o[0]*n,r[1]-(t[2]+.5)*o[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=Ka(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*i[0]*o,u=n[1]-(t[2]+1)*i[1]*o,p=a+i[0]*o,h=u+i[1]*o;return Xh(a,u,p,h,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,o,i){var a=this.getZForResolution(n),u=n/this.getResolution(a),p=this.getOrigin(a),h=Ka(this.getTileSize(a),this.tmpSize_),g=u*(t-p[0])/n/h[0],x=u*(p[1]-r)/n/h[1];return o?(g=YC(g,ry)-1,x=YC(x,ry)-1):(g=$C(g,ry),x=$C(x,ry)),TE(a,g,x,i)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,o,i){var a=this.getOrigin(n),u=this.getResolution(n),p=Ka(this.getTileSize(n),this.tmpSize_),h=(t-a[0])/u/p[0],g=(a[1]-r)/u/p[1];return o?(h=YC(h,ry)-1,g=YC(g,ry)-1):(h=$C(h,ry),g=$C(g,ry)),TE(n,h,g,i)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=cE(this.resolutions_,t,r||0);return Ho(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return nie(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),o=this.minZoom;o<r;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},e}(),Jz=e4r;var t4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r4r=function(e){t4r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=art(r),o=n[0];this.forEach(function(i){i.tileCoord[0]!==o&&(this.remove(ey(i.tileCoord)),i.release())}.bind(this))}},t}(Gz),Qz=r4r;var e8={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function t8(e){var t=e.getDefaultTileGrid();return t||(t=i4r(e),e.setDefaultTileGrid(t)),t}function brt(e,t,r){var n=t[0],o=e.getTileCoordCenter(t),i=wrt(r);if(Kh(i,o))return t;var a=fi(i),u=Math.ceil((i[0]-o[0])/a);return o[0]+=a*u,e.getTileCoordForCoordAndZ(o,n)}function n4r(e,t,r,n){var o=n!==void 0?n:"top-left",i=o4r(e,t,r);return new Jz({extent:e,origin:y$e(e,o),resolutions:i,tileSize:r})}function o4r(e,t,r,n){for(var o=t!==void 0?t:Stt,i=bs(e),a=fi(e),u=Ka(r!==void 0?r:Qv),p=n>0?n:Math.max(a/u[0],i/u[1]),h=o+1,g=new Array(h),x=0;x<h;++x)g[x]=p/Math.pow(2,x);return g}function i4r(e,t,r,n){var o=wrt(e);return n4r(o,t,r,n)}function wrt(e){e=yu(e);var t=e.getExtent();if(!t){var r=180*gu[vu.DEGREES]/e.getMetersPerUnit();t=Xh(-r,-r,r,r)}return t}var Ert=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a4r=function(e){Ert(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var o=[256,256];return n.tileGrid&&Ka(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),o),n.tileCache=new Qz(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var o=this.getTileCacheForProjection(r);o&&o.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,o,i){var a=this.getTileCacheForProjection(r);if(!a)return!1;for(var u=!0,p,h,g,x=o.minX;x<=o.maxX;++x)for(var b=o.minY;b<=o.maxY;++b)h=T1(n,x,b),g=!1,a.containsKey(h)&&(p=a.get(h),g=p.getState()===_r.LOADED,g&&(g=i(p)!==!1)),g||(u=!1);return u},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,o,i,a){return Gn()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:t8(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return Xr(n===null||Nv(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,o){var i=this.getTileGridForProjection(o),a=this.getTilePixelRatio(n),u=Ka(i.getTileSize(r),this.tmpSize);return a==1?u:ntt(u,a,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var o=n!==void 0?n:this.getProjection(),i=this.getTileGridForProjection(o);return this.getWrapX()&&o.isGlobal()&&(r=brt(i,r,o)),lrt(r,i)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var o=this.getTileCacheForProjection(n);r>o.highWaterMark&&(o.highWaterMark=r)},t.prototype.useTile=function(r,n,o,i){},t}(gtt),Srt=function(e){Ert(t,e);function t(r,n){var o=e.call(this,r)||this;return o.tile=n,o}return t}(ol);var Irt=a4r;function s4r(e,t){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(a,u,p){if(a)return e.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(i,function(){var h=a[0],g=t.getFullTileRange(h);Xr(g,55);var x=g.getHeight()-a[2]-1;return x.toString()})}}function Trt(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=s4r(e[o],t);return qie(n)}function qie(e){return e.length===1?e[0]:function(t,r,n){if(t){var o=srt(t),i=Zf(o,e.length);return e[i](t,r,n)}else return}}function r8(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),o=r[2].charCodeAt(0),i=void 0;for(i=n;i<=o;++i)t.push(e.replace(r[0],String.fromCharCode(i)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var a=parseInt(r[2],10),u=parseInt(r[1],10);u<=a;u++)t.push(e.replace(r[0],u.toString()));return t}return t.push(e),t}var l4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u4r=function(e){l4r(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,o=$i(n),i=n.getState(),a;i==_r.LOADING?(this.tileLoadingKeys_[o]=!0,a=e8.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],a=i==_r.ERROR?e8.TILELOADERROR:i==_r.LOADED?e8.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Srt(a,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=r8(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Trt(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,o){},t.prototype.useTile=function(r,n,o){var i=T1(r,n,o);this.tileCache.containsKey(i)&&this.tileCache.get(i)},t}(Irt),Mrt=u4r;var c4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f4r=function(e){c4r(t,e);function t(r){var n=this,o=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(o=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:p4r,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:o,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:I1,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!Id)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!Id){e.prototype.expireCache.call(this,r,n);return}var o=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==o?n:{});for(var i in this.tileCacheForProjection){var a=this.tileCacheForProjection[i];a.expireCache(a==o?n:{})}},t.prototype.getGutterForProjection=function(r){return Id&&this.getProjection()&&r&&!Nv(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return Id&&this.getProjection()&&r&&!Nv(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!Id)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||Nv(n,r)))return this.tileGrid;var o=$i(r);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=t8(r)),this.tileGridForProjection[o]},t.prototype.getTileCacheForProjection=function(r){if(!Id)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||Nv(n,r))return this.tileCache;var o=$i(r);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new Qz(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},t.prototype.createTile_=function(r,n,o,i,a,u){var p=[r,n,o],h=this.getTileCoordForTileUrlFunction(p,a),g=h?this.tileUrlFunction(h,i,a):void 0,x=new this.tileClass(p,g!==void 0?_r.IDLE:_r.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=u,x.addEventListener(yr.CHANGE,this.handleTileChange.bind(this)),x},t.prototype.getTile=function(r,n,o,i,a){var u=this.getProjection();if(!Id||!u||!a||Nv(u,a))return this.getTileInternal(r,n,o,i,u||a);var p=this.getTileCacheForProjection(a),h=[r,n,o],g=void 0,x=ey(h);p.containsKey(x)&&(g=p.get(x));var b=this.getKey();if(g&&g.key==b)return g;var T=this.getTileGridForProjection(u),A=this.getTileGridForProjection(a),L=this.getTileCoordForTileUrlFunction(h,a),P=new Wz(u,T,a,A,h,L,this.getTilePixelRatio(i),this.getGutter(),function(k,q,U,H){return this.getTileInternal(k,q,U,H,u)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return P.key=b,g?(P.interimTile=g,P.refreshInterimChain(),p.replace(x,P)):p.set(x,P),P},t.prototype.getTileInternal=function(r,n,o,i,a){var u=null,p=T1(r,n,o),h=this.getKey();if(!this.tileCache.containsKey(p))u=this.createTile_(r,n,o,i,a,h),this.tileCache.set(p,u);else if(u=this.tileCache.get(p),u.key!=h){var g=u;u=this.createTile_(r,n,o,i,a,h),g.getState()==_r.IDLE?u.interimTile=g.interimTile:u.interimTile=g,u.refreshInterimChain(),this.tileCache.replace(p,u)}return u},t.prototype.setRenderReprojectionEdges=function(r){if(!(!Id||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(Id){var o=yu(r);if(o){var i=$i(o);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}},t}(Mrt);function p4r(e,t){e.getImage().src=t}var Crt=f4r;var Art=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zie={DEFAULT:"default",TRUNCATED:"truncated"},d4r=function(e){Art(t,e);function t(r,n,o,i,a,u,p){var h=e.call(this,n,o,i,a,u,p)||this;return h.zoomifyImage_=null,h.tileSize_=r,h}return t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var r=e.prototype.getImage.call(this);if(this.state==_r.LOADED){var n=this.tileSize_;if(r.width==n[0]&&r.height==n[1])return this.zoomifyImage_=r,r;var o=mm(n[0],n[1]);return o.drawImage(r,0,0),this.zoomifyImage_=o.canvas,o.canvas}else return r},t}(I1);var h4r=function(e){Art(t,e);function t(r){var n=this,o=r,i=o.imageSmoothing!==void 0?o.imageSmoothing:!0;o.interpolate!==void 0&&(i=o.interpolate);var a=o.size,u=o.tierSizeCalculation!==void 0?o.tierSizeCalculation:zie.DEFAULT,p=o.tilePixelRatio||1,h=a[0],g=a[1],x=[],b=o.tileSize||Qv,T=b*p;switch(u){case zie.DEFAULT:for(;h>T||g>T;)x.push([Math.ceil(h/T),Math.ceil(g/T)]),T+=T;break;case zie.TRUNCATED:for(var A=h,L=g;A>T||L>T;)x.push([Math.ceil(A/T),Math.ceil(L/T)]),A>>=1,L>>=1;break;default:Xr(!1,53);break;}x.push([1,1]),x.reverse();for(var P=[p],k=[0],q=1,U=x.length;q<U;q++)P.push(p<<q),k.push(x[q-1][0]*x[q-1][1]+k[q-1]);P.reverse();var H=new Jz({tileSize:b,extent:o.extent||[0,-g,h,0],resolutions:P}),X=o.url;X&&X.indexOf("{TileGroup}")==-1&&X.indexOf("{tileIndex}")==-1&&(X+="{TileGroup}/{z}-{x}-{y}.jpg");var ee=r8(X),ne=b*p;function me(Ze){return function(Qe,Fe,ze){if(Qe){var Ne=Qe[0],et=Qe[1],st=Qe[2],ft=et+st*x[Ne][0],Ye=(ft+k[Ne])/ne|0,tt={z:Ne,x:et,y:st,tileIndex:ft,TileGroup:"TileGroup"+Ye};return Ze.replace(/\{(\w+?)\}/g,function(lt,je){return tt[je]})}else return}}var ue=qie(ee.map(me)),Me=d4r.bind(null,Ka(b*p));n=e.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,interpolate:i,projection:o.projection,tilePixelRatio:p,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:Me,tileGrid:H,tileUrlFunction:ue,transition:o.transition})||this,n.zDirection=o.zDirection;var ke=H.getTileCoordForCoordAndResolution(Kf(H.getExtent()),P[P.length-1]),Te=ue(ke,1,null),Ee=new Image;return Ee.addEventListener("error",function(){ne=b,this.changed()}.bind(n)),Ee.src=Te,n}return t}(Crt),Drt=h4r;var Tu=Z(we(),1),Nrt=Z(Si(),1),vm=Z(xt(),1);var vD={brightness:0,contrast:0,saturation:0},n8=e=>{let{max:t=1,min:r=0,onChange:n=()=>console.warn("onChange is not implemented."),step:o=.01,type:i="",value:a=.5,tooltip:u}=e,p=h=>{n(i,h)};return Tu.default.createElement("div",{className:"filter-slider",title:u},Tu.default.createElement("span",{className:Et("slider-icon",i),title:u}),Tu.default.createElement("div",null,Tu.default.createElement(nz,{title:u,ariaLabelForHandle:u,max:t,min:r,onChange:p,step:o,value:a})),Tu.default.createElement("span",{className:"slider-tooltip",title:u},a))};n8.propTypes={max:vm.default.number,min:vm.default.number,onChange:vm.default.func,step:vm.default.number,tooltip:vm.default.string,type:vm.default.string,value:vm.default.number};var Ort=e=>{let{layer:t}=e,[r,n]=(0,Tu.useState)(Se({},vD)),o=(a,u)=>{let p=Object.assign({},r,{[a]:u});n(p),t.updateStyleVariables(p)},i=()=>{n(Se({},vD)),t.updateStyleVariables(Se({},vD))};return Tu.default.createElement("div",null,Tu.default.createElement(n8,{max:1,min:-1,onChange:o,step:.01,type:"contrast",value:r.contrast,tooltip:de("control-imagemanipulation-contrast")}),Tu.default.createElement(n8,{max:1,min:-1,onChange:o,step:.01,type:"saturation",value:r.saturation,tooltip:de("control-imagemanipulation-saturation")}),Tu.default.createElement(n8,{max:1,min:-1,onChange:o,step:.01,type:"brightness",value:r.brightness,tooltip:de("control-imagemanipulation-brightness")}),Tu.default.createElement("button",{className:"btn-reset",title:de("control-imagemanipulation-reset"),onClick:i},de("control-imagemanipulation-reset")))};Ort.propTypes={layer:vm.default.object};var Fie=class extends ac{constructor(t){let r="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=r;let o=document.createElement("button");o.title=de("control-imagemanipulation-open"),o.innerHTML="I",o.type="button",n.appendChild(o);let i=document.createElement("div");i.className="content-container",i.style.display="none",n.appendChild(i);let a=()=>{let u=i.style.display==="block";n.className=u?r:`${r} active`,i.style.display=u?"none":"block"};Nrt.default.render(Tu.default.createElement(Ort,{layer:t.layer}),i),o.addEventListener("click",a,!1),o.addEventListener("touchstart",a,!1),super({element:n,target:t.target})}},Lrt=Fie;function m4r(e){return Nt(this,null,function*(){try{let t=yield Prt.default.get(e);if(t.status===200){let n=new DOMParser().parseFromString(t.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:e.substring(0,e.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(t){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(t)}})}var krt=e=>{let{className:t="",onLoad:r,urlImageProperties:n,withImageManipulation:o=!1}=e,i=(0,ME.useRef)(null);return(0,ME.useEffect)(()=>{Nt(void 0,null,function*(){let p=yield m4r(n),h=new Drt({url:p.url,size:[p.width,p.height],crossOrigin:"anonymous",zDirection:-1}),g=h.getTileGrid().getExtent(),x=new xrt({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:Se({},vD)},source:h}),b=new Sd({resolutions:x.getSource().getTileGrid().getResolutions(),extent:g,constrainOnlyCenter:!0}),T=new ktt({controls:[new Vet({tipLabel:de("control-fullscreen-title")}),new Vz({zoomInTipLabel:de("control-zoom-in"),zoomOutTipLabel:de("control-zoom-in")})],interactions:Uz().extend([new qz]),layers:[x],target:i.current,view:b});b.fit(g,{padding:[50,50,50,50]});let A=T.getSize();T.addControl(new Ltt({tipLabel:de("control-zoomtoextent-title"),extent:b.calculateExtent([A[0]+50,A[1]+50])})),o&&T.addControl(new Lrt({layer:x})),r&&r({layer:x,map:T,source:h,zoomifyProps:p})})},[n]),ME.default.createElement("div",{className:Et("vk-mapview-zoomify",t),ref:i})};krt.propTypes={className:yD.default.string,onLoad:yD.default.func,urlImageProperties:yD.default.string.isRequired,withImageManipulation:yD.default.bool};var Rrt=krt;var jrt=Rrt;var qrt=e=>{let{isOpen:t,onClose:r,map_id:n}=e,[o,i]=(0,In.useState)(null),a=()=>{i(null),r()};if((0,In.useEffect)(()=>{n!==void 0&&Nt(void 0,null,function*(){let A=yield fw(n);i(A)})},[n,i]),o===null)return In.default.createElement("div",{className:"vkf-view-original-map container"});let u=o.online_resources,p=u.find(T=>T.type==="Permalink"),h=u.find(T=>T.type==="WMS"),g=u.find(T=>T.type==="WCS"),x=u.find(T=>T.type==="download"),b=o.type==="mosaic";return In.default.createElement(af,{key:n,modalClassName:Et("vkf-modal-original-map",o.type),onClose:a,renderContent:()=>In.default.createElement("div",{className:"vkf-view-original-map"},In.default.createElement("div",{className:"title"},In.default.createElement("h1",null,o.title," ",In.default.createElement("small",null,"/ ",o.title_long)),In.default.createElement("div",{className:"header-functions"},!b&&In.default.createElement("a",{href:o.permalink,rel:"noreferrer",className:"btn btn-default",target:"_blank"},de("originalview-link-slub-label")),x!==void 0&&In.default.createElement("a",{href:x.url,rel:"noreferrer",className:"btn btn-default btn-download",target:"_blank",title:de("originalview-link-download-label")},de("originalview-link-download-label")))),o.thumb_url!==void 0&&b&&In.default.createElement("div",null,In.default.createElement("img",{className:"thumbnail",height:200,width:200,src:o.thumb_url})),In.default.createElement("div",{className:"content-metadata"},In.default.createElement("dl",null,In.default.createElement("dt",null,de("originalview-label-desc")),In.default.createElement("dd",null,o.description),In.default.createElement("dt",null,de("originalview-label-identifier")),In.default.createElement("dd",null,n),In.default.createElement("dt",null,de("originalview-label-scale")),In.default.createElement("dd",null,"1:",o.map_scale),p!==void 0&&In.default.createElement(In.default.Fragment,null,In.default.createElement("dt",null,"Permalink"),In.default.createElement("dd",null,In.default.createElement("a",{href:p.url,rel:"noreferrer",target:"_blank"},p.url))),(h!==void 0||g!==void 0)&&In.default.createElement(In.default.Fragment,null,In.default.createElement("dt",null,de("originalview-label-services")),h!==void 0&&In.default.createElement("dd",null,In.default.createElement("a",{href:h.url,rel:"noreferrer",target:"_blank"},"WMS")),g!==void 0&&In.default.createElement("dd",null,In.default.createElement("a",{href:g.url,rel:"noreferrer",target:"_blank"},"WCS"))))),!b&&In.default.createElement("div",{className:"content-map"},In.default.createElement(jrt,{urlImageProperties:o.zoomify_url,withImageManipulation:!0}))),isOpen:t,title:de(b?"originalview-title-mosaic":"originalview-title")})};qrt.propTypes={isOpen:o8.default.bool,onClose:o8.default.func,map_id:o8.default.string};var g4r=()=>{let[e,t]=Nn(dk);return In.default.createElement(qrt,{isOpen:e!==void 0,onClose:()=>t(void 0),map_id:e})},zrt=g4r;var zo=Z(we(),1),ny=Z(xt(),1);var Frt=e=>([t,r])=>{let n=e[t];return Object.hasOwn(e,t)&&Ge(n)&&n!==""?[t,n]:[t,r]},Uie=e=>{var t;return(t=e==null?void 0:e.geometry)==null?void 0:t.type},v4r=()=>{let e=Object.values(V0).map(({geometryTypes:r})=>r);return new Set(e.flat(2))},Bie=(()=>{let e=v4r(),t={};for(let r of e)t[r]=([n])=>FQ.includes(n)&&V0[n].geometryTypes.includes(r);return t})(),y4r=([e])=>!oC.includes(e),_4r=([e])=>!zQ.includes(e);var x4r=e=>{let t=Uie(e),n=Object.entries(e.properties).filter(o=>!Bie[t](o));return Object.fromEntries(n)},b4r=e=>{let t=Uie(e),n=Object.entries(e.properties).filter(o=>Bie[t](o));return Object.fromEntries(n)},Vie=e=>{let t=Uie(e),r=b4r(e);return Object.entries(V0).filter(Bie[t]).map(([o,{default:i}])=>[o,i(t)]).map(Frt(r))},Gie=e=>{let t=x4r(e),n=oC.map(i=>[i,""]).map(Frt(t)),o=Object.entries(t).filter(y4r).filter(_4r);return[...n,...o]},Urt=e=>{let t=["marker","stroke","stroke-opacity","stroke-width","fill","fill-opacity","geometry"];return Object.keys(e.properties).filter(n=>!t.includes(n)).reduce((n,o)=>Ft(Se({},n),{[o]:e.properties[o]}),{})},w4r=(e,t)=>Object.keys(e).filter(n=>{let o=zQ.includes(n),i=FQ.includes(n),a=!Ge(t[n])||t[n]==="";return!o&&!i&&a}),Brt=({oldProperties:e,propertyFields:t,styleFields:r})=>{let n={};t.forEach(([p,h])=>{let g=h==="",x=p==="";Ge(p)&&!x&&!g&&(n[p]=h)}),r.forEach(([p,h])=>{n[p]=h});let o=Object.fromEntries(t),i=w4r(e,o);return{addOrUpdateProperties:Object.entries(n).map(([p,h])=>({key:p,value:h})),removeProperties:i}},Vrt=(e,t,r)=>{let n={key:!1,value:!1},o=r.some(([i])=>i.toLowerCase()===e.toLowerCase());return(!e.trim()||o)&&(n.key=!0),t.trim()||(n.value=!0),{isValid:!n.key&&!n.value,errors:n}},Md=e=>{e(la,ko.NONE),e(Vc,Ws.STANDARD),e(Jn,null),e(_v,null),e(ba,null),e(Ys,null)};var sl=Z(we(),1),i8=Z(xt(),1),Grt=Z(Dre(),1);var Mu={INITIAL:0,IMAGE:1,ERROR:2,PLACEHOLDER:3,LOADING:4},Hie=({imageUrl:e,showPlaceholder:t,imageAsPreview:r})=>{let[n,o]=(0,sl.useState)(Mu.INITIAL),i=(0,sl.useRef)(e);e!==i.current&&(o(Mu.INITIAL),i.current=e),n===Mu.INITIAL&&(e.length===0&&t?o(Mu.PLACEHOLDER):o(Mu.LOADING));let a=n===Mu.LOADING||n===Mu.IMAGE,u=(0,sl.useMemo)(()=>n===Mu.PLACEHOLDER?"placeholder":n===Mu.ERROR?"error":"image",[n]);return sl.default.createElement("div",{className:"image-with-fallback-root"},sl.default.createElement("div",{className:`image-container ${u}`},a&&sl.default.createElement(sl.default.Fragment,null,n===Mu.LOADING&&sl.default.createElement(Grt.default.default,{height:180}),sl.default.createElement("img",{className:`${r?"preview":""} ${n===Mu.LOADING?"loading":""}`,src:e,onLoad:()=>o(Mu.IMAGE),onError:()=>o(Mu.ERROR)})),!a&&sl.default.createElement("div",{className:`image-fallback-icon ${u}`},sl.default.createElement(qr,{name:"image-placeholder"})),n===Mu.ERROR&&sl.default.createElement("p",{className:"image-fallback-text"},de("geojson-image-fallback-p"))))};Hie.defaultPropTypes={imageAsPreview:!1,showPlaceholder:!1,imageUrl:""};Hie.propTypes={imageUrl:i8.default.string,showPlaceholder:i8.default.bool,imageAsPreview:i8.default.bool};var Hrt=Hie;var CE=Hrt;var E4r=[...oC],Wrt=({feature:e,onClose:t})=>{let r=(0,zo.useMemo)(()=>Urt(e),[e]),{defaultTitle:n,defaultTime:o,defaultDescription:i}=(0,zo.useMemo)(()=>({defaultTitle:de("geojson-featureview-no-title"),defaultTime:de("geojson-featureview-no-time"),defaultDescription:de("geojson-featureview-no-description")}),[]),a=(0,zo.useCallback)(T=>Ge(T)?Qp(T)?Ju(T):de("geojson-featureview-invalid-time"):o,[]),{imageLink:u,title:p,description:h,time:g}=(0,zo.useMemo)(()=>{var T,A;return{imageLink:r[ci.imgLink],title:(T=r[ci.title])!=null?T:n,description:(A=r[ci.description])!=null?A:i,time:a(r[ci.time])}},[r]),x=(0,zo.useMemo)(()=>Ge(u)&&u.length>0,[u]),b=(0,zo.useMemo)(()=>Object.entries(r).filter(([T])=>!E4r.includes(T)),[r]);return zo.default.createElement("div",{className:"geojson-feature-panel-root vkf-geojson-feature-view-content"},zo.default.createElement(cd,{title:de("geojson-featureview-header-text"),onCloseClick:t}),zo.default.createElement("div",{className:"property-container scrollable"},x&&zo.default.createElement(CE,{imageUrl:u}),zo.default.createElement("div",{className:"predefined-properties-container"},zo.default.createElement("div",{className:"title-section "},zo.default.createElement("span",{className:"geojson-feature-property-label"},de("geojson-featureview-title")),zo.default.createElement("span",{className:"title"},p)),zo.default.createElement("div",{className:"description-section"},zo.default.createElement("p",{className:"geojson-feature-property-label"},de("geojson-featureview-description")),zo.default.createElement("p",{className:"description geojson-feature-property-input"},h)),zo.default.createElement("div",{className:"time-section"},zo.default.createElement("p",{className:"geojson-feature-property-label"},de("geojson-featureview-time")),zo.default.createElement("p",{className:"time geojson-feature-property-input"},g))),zo.default.createElement("div",{className:"properties-container"},b.length>0&&zo.default.createElement("p",{className:"geojson-feature-property-label"},de("geojson-featureview-metadata")),b.map(([T,A])=>zo.default.createElement("div",{key:T},zo.default.createElement("label",{htmlFor:T,className:"geojson-feature-property-label"},T),zo.default.createElement("p",{className:"geojson-feature-property-input",key:T},A))))))};Wrt.propTypes={feature:ny.default.shape({id:ny.default.oneOfType([ny.default.number,ny.default.string]).isRequired,geometry:ny.default.object.isRequired,properties:ny.default.object.isRequired}).isRequired,onClose:ny.default.func};var $rt=Wrt;var AE=Z(we(),1),Wie=Z(xt(),1);var Yrt=({geoJsonFeature:e,resetFeature:t})=>{let r=(0,AE.useCallback)(()=>{t()},[t]);return AE.default.createElement(AE.default.Fragment,null,AE.default.createElement(Zrt,{feature:e,onClose:r}))};Yrt.propTypes={geoJsonFeature:Wie.default.object.isRequired,resetFeature:Wie.default.func.isRequired};var $ie=Yrt;var Zrt=$rt;var _D=Z(xt(),1),ym=Z(we(),1);var Yie=({className:e,Component:t,props:r,onExit:n})=>{let o=(0,ym.useRef)(null),[i,a]=(0,ym.useState)(null),u=Ge(r);u&&o.current!==r&&(a(ym.default.createElement(t,Se({},r))),o.current=r);let p=(0,ym.useCallback)(()=>{u||(o.current=null,a(null),n&&n())},[u,n]);return ym.default.createElement("div",{onTransitionEnd:p,className:Et(e,r!==null&&"in")},i)};Yie.propTypes={className:_D.default.string.isRequired,Component:_D.default.func.isRequired,props:_D.default.object,onExit:_D.default.func};Yie.defaultPropTypes={props:null};var Krt=Yie;var DE=Krt;var Cd=Z(we(),1);var S4r=e=>{var t;return Ge((t=e.layer.metadata)==null?void 0:t[Rh.id])},a8=(e,t)=>`${e}-${t}`,I4r=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},T4r=e=>{let{properties:t,type:r,id:n,geometry:o}=e;return{id:n,geometry:o,properties:t,type:r}},M4r=2;function C4r(){let e=vt(wr),t=vt(Ln),[r,n]=Nn(Jp),[o,i]=(0,Cd.useState)(null),a=(0,Cd.useRef)(null),u=(0,Cd.useCallback)(()=>{a.current=null,i(null),n(null)},[]),p=(0,Cd.useCallback)(h=>{let{point:g}=h,x=I4r(g,M4r),b=e.queryRenderedFeatures(x).filter(S4r).at(0);if(Ge(b)){let{id:T,source:A}=b;if(a8(T,A)===a.current)return;n({featureId:T,sourceId:A}),a.current=a8(T,A),i(T4r(b))}else u()},[]);return(0,Cd.useEffect)(()=>{if(Ge(e))return e.on("click",p),()=>{e.off("click",p)}},[]),(0,Cd.useEffect)(()=>{if(!Ge(r)){Ge(a.current)&&u();return}if(Ge(t)&&t.length>0){let{featureId:h,sourceId:g}=r;if(a8(h,g)===a.current)return;let x=t.find(T=>T.getId()===g);if(!Ge(x)){console.error(`No layer found with id '${g}'.`),u();return}let b=x.getFeature(h);if(!Ge(b)){console.error(`No feature found with id '${h}'.`),u();return}a.current=a8(h,g),i(b)}},[t,r]),o===null?null:{geoJsonFeature:o,resetFeature:u}}var Xrt=C4r;var Ci=Z(we(),1),M1=Z(xt(),1);var Jrt=Z(we(),1);var Qrt=()=>{let{zoomToExtent:e}=lz(),t=Rr(({snapshot:n,set:o})=>(i,a)=>Nt(void 0,null,function*(){let u=yield n.getPromise(wr);if(Ge(u)){try{let p={[it.title]:i},h=Ua.fromPersistence({metadata:p,geoJson:a});h.addLayerToMap(u),e(h),o(Ln,g=>[...g,h]),o($s,h.getId())}catch(p){console.log(p),o(Ii,{id:"mapWrapper",type:"danger",text:de("mapwrapper-geojson-parse-error")})}o(c9e,!1)}}),[e]),r=Rr(({set:n})=>(o,i)=>Nt(void 0,null,function*(){let a=Ua.toApplicationState(i);n(ba,a),n(Ys,{[it.title]:o}),n(Jn,{type:Hi.REMOTE,id:null,layerRole:"owner"}),n(Vc,Ws.DRAW)}),[]);return(0,Jrt.useCallback)((n,o,i)=>i?r(n,o):t(n,o),[t,r])};var s8=Z(we(),1);var Zie=Z(xt(),1),ent=({disabled:e,id:t})=>s8.default.createElement("span",{className:"toggle-switch"},s8.default.createElement("input",{className:"toggle__input",disabled:e,name:t,type:"checkbox",id:t}),s8.default.createElement("div",{className:"toggle__fill"}));ent.propTypes={disabled:Zie.default.bool,id:Zie.default.string.isRequired};var tnt=ent;var rnt="persistGeoJson",nnt=({onSubmit:e,initialName:t,onClose:r})=>Ci.default.createElement(Ci.default.Fragment,null,Ci.default.createElement("form",{id:"add-geojson-form",onSubmit:e},Ci.default.createElement(Tj,null,Ci.default.createElement("p",{className:"adddialog-description"},de("geojson-adddialog-description")),Ci.default.createElement(ej,{className:"geojson-label",htmlFor:"title"},de("geojson-adddialog-layer-title-label")),Ci.default.createElement(Zee,{autoFocus:!0,defaultValue:t!=null?t:"Unknown",name:"title",type:"text",className:"geojson-input"})),Ci.default.createElement(Tj,null,Ci.default.createElement(ej,{className:"switch-label",htmlFor:rnt},Ci.default.createElement(tnt,{disabled:!nq(),id:rnt}),Ci.default.createElement("p",{className:"geojson-label persistent-button-label"},de("geojson-adddialog-persistent-button-label"))),Ci.default.createElement("div",null,Ci.default.createElement("p",{className:"persistent-button-description"},de("geojson-adddialog-persistent-description"))))),Ci.default.createElement("div",{className:"add-geojson-buttons"},Ci.default.createElement(mn,{type:"save",form:"add-geojson-form",className:"btn btn-primary confirm-button"},de("geojson-adddialog-confirm")),Ci.default.createElement(mn,{className:"cancel-button",type:"discard",onClick:r},de("geojson-adddialog-cancel"))));nnt.propTypes={onSubmit:M1.default.func.isRequired,initialName:M1.default.string,onClose:M1.default.func.isRequired};var ont=({initialName:e,onClose:t,onSubmit:r})=>Ci.default.createElement(af,{isOpen:!0,onClose:t,title:de("geojson-adddialog-title"),renderContent:()=>Ci.default.createElement(nnt,{initialName:e,onSubmit:r,onClose:t}),modalClassName:"vkf-dialog-add-geojson"});ont.propTypes={initialName:M1.default.string,onClose:M1.default.func.isRequired,onSubmit:M1.default.func.isRequired};var A4r=()=>{let[e,t]=Nn(gk),r=Qrt(),n=(0,Ci.useCallback)(()=>{t(null)},[]),o=(0,Ci.useCallback)(i=>{i.preventDefault();let a=new FormData(i.currentTarget),u=a.get("title"),p=a.get("persistGeoJson")==="on";r(u,e.content,p).then(()=>{t(null)})},[r,e,t]);return e?Ci.default.createElement(ont,{initialName:e.name,onClose:n,onSubmit:o}):null},int=A4r;var fa=Z(we(),1),unt=Z(xt(),1);var ant=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=function(){try{t({content:JSON.parse(this.result),modified:e.lastModified,name:e.name.split(".")[0]})}catch(o){console.log(o),r()}},n.readAsText(e)});var oy=Z(we(),1);var Kie=Z(xt(),1),snt=({refFileInput:e,onSelectFile:t})=>{let r=(0,oy.useCallback)(o=>{t(o.target.files[0])},[]),n=(0,oy.useCallback)(o=>{o.stopPropagation()},[]);return oy.default.createElement(oy.default.Fragment,null,oy.default.createElement("label",{className:"visually-hidden",htmlFor:"geojson-upload-file"},"GeoJSON Upload"),oy.default.createElement("input",{onClick:n,id:"geojson-upload-file",accept:"application/json, application/geo+json, .geojson",className:"hidden-file-input",type:"file",ref:e,onChange:r}))};snt.propTypes={refFileInput:Kie.default.object.isRequired,onSelectFile:Kie.default.func.isRequired};var lnt=snt;var cnt=Z(Si(),1),{FILE:D4r}=sv,N4r={WRONG_FILETYPE:"wrong-filetype"},fnt=()=>{let[e,t]=(0,fa.useState)(void 0),[r,n]=Nn(mk),o=Ar(gk),i=Ar(Ii),a=(0,fa.useRef)(),u=(0,fa.useCallback)(A=>{console.error(A),i({id:"mapWrapper",type:"danger",text:de("mapwrapper-geojson-parse-error")})},[]),p=(0,fa.useCallback)(()=>{n(!1)},[]),h=(0,fa.useCallback)(A=>{A.preventDefault(),A.stopPropagation(),a.current!==void 0&&a.current!==null&&(a.current.click(),document.activeElement.blur())},[]),g=(0,fa.useCallback)(A=>{ant(A).then(L=>{o(L),n(!1)}).catch(L=>u(L))},[u]),x=(0,fa.useMemo)(()=>({accept:D4r,canDrop:()=>r,collect(A){return{canDrop:A.canDrop(),isOver:A.isOver()}},drop:A=>{g(A.files[0])},hover:(A,L)=>{let P=L.getItem();P.items.length>0&&P.items[0].type!=="application/json"&&P.items[0].type!=="application/geo+json"&&t(N4r.WRONG_FILETYPE)}}),[g,r]),[{isOver:b},T]=GP(x);return(0,fa.useEffect)(()=>{b||t(void 0)},[b]),r?(0,cnt.createPortal)(fa.default.createElement("div",{className:Et("vkf-dropzone",r&&"animation-show"),ref:T},fa.default.createElement("div",{className:"dropzone-content-container",onClick:p},fa.default.createElement("button",{onClick:h,className:"dropzone-content"},fa.default.createElement(Js,{name:"dropzone-upload"}),fa.default.createElement("p",{className:Et("dropzone-info",e!==void 0&&"error")},e===void 0?de("dropzone-drop"):de(`dropzone-${e}`))),fa.default.createElement(lnt,{refFileInput:a,onSelectFile:g}))),document.body):null};fnt.propTypes={children:unt.default.node};var pnt=fnt;var Xie=()=>{let e=Xrt(),{selectedLayer:t}=vt(Xp);return sc.default.createElement(sc.default.Fragment,null,sc.default.createElement("div",{className:"vkf-horizontal-layout"},sc.default.createElement("div",{className:"spatialsearch-container",id:"spatialsearch-container"},sc.default.createElement(LQe,null)),sc.default.createElement(DE,{className:"geojson-feature-panel-container",Component:$ie,props:e}),sc.default.createElement("div",{className:"layermanagement-container",id:"layermanagement-container"},sc.default.createElement(uz,null)),sc.default.createElement(DE,{className:"vkf-geojson-layer-view-root",Component:UXe,props:t?{selectedLayer:t}:null})),sc.default.createElement(zrt,null),sc.default.createElement(int,null),sc.default.createElement(pnt,null))};var vf=Z(we(),1);var uae=Z(we(),1);var O4r=function(e,t){let r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(i,a,u){if(r[i]===void 0)throw new Error(`Invalid event type: ${i}`);r[i].push({selector:a,fn:u})},render(i){t.store.featureChanged(i)}},o=function(i,a){let u=r[i],p=u.length;for(;p--;){let h=u[p];if(h.selector(a)){h.fn.call(n,a)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(i){o("drag",i)},click(i){o("click",i)},mousemove(i){o("mousemove",i)},mousedown(i){o("mousedown",i)},mouseup(i){o("mouseup",i)},mouseout(i){o("mouseout",i)},keydown(i){o("keydown",i)},keyup(i){o("keyup",i)},touchstart(i){o("touchstart",i)},touchmove(i){o("touchmove",i)},touchend(i){o("touchend",i)},tap(i){o("tap",i)}}},xD=O4r;var _nt=Z(vnt(),1);var Fo={};n2(Fo,{LAT_MAX:()=>P4r,LAT_MIN:()=>L4r,LAT_RENDERED_MAX:()=>c8,LAT_RENDERED_MIN:()=>u8,LNG_MAX:()=>R4r,LNG_MIN:()=>k4r,activeStates:()=>$o,classes:()=>Ss,cursors:()=>ho,events:()=>qi,geojsonTypes:()=>lr,interactions:()=>tae,meta:()=>di,modes:()=>nn,sources:()=>kl,types:()=>Ea,updateActions:()=>iy});var Ss={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},kl={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},ho={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},Ea={POLYGON:"polygon",LINE:"line_string",POINT:"point"},lr={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},nn={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},qi={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},iy={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},di={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},$o={ACTIVE:"true",INACTIVE:"false"},tae=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],L4r=-90,u8=-85,P4r=90,c8=85,k4r=-270,R4r=270;var ynt={Point:0,LineString:1,MultiLineString:1,Polygon:2};function j4r(e,t){let r=ynt[e.geometry.type]-ynt[t.geometry.type];return r===0&&e.geometry.type===lr.POLYGON?e.area-t.area:r}function q4r(e){return e.map(t=>(t.geometry.type===lr.POLYGON&&(t.area=_nt.default.geometry({type:lr.FEATURE,property:{},geometry:t.geometry})),t)).sort(j4r).map(t=>(delete t.area,t))}var f8=q4r;function z4r(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}var p8=z4r;function NE(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,r=e.length;t<r;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}NE.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};NE.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};NE.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};NE.prototype.values=function(){let e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,r)=>t.v-r.v).map(t=>t.k)};NE.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var pf=NE;var F4r=[di.FEATURE,di.MIDPOINT,di.VERTEX],ip={click:U4r,touch:B4r};function U4r(e,t,r){return xnt(e,t,r,r.options.clickBuffer)}function B4r(e,t,r){return xnt(e,t,r,r.options.touchBuffer)}function xnt(e,t,r,n){if(r.map===null)return[];let o=e?p8(e,n):t,i={};r.options.styles&&(i.layers=r.options.styles.map(h=>h.id).filter(h=>r.map.getLayer(h)!=null));let a=r.map.queryRenderedFeatures(o,i).filter(h=>F4r.indexOf(h.properties.meta)!==-1),u=new pf,p=[];return a.forEach(h=>{let g=h.properties.id;u.has(g)||(u.add(g),p.push(h))}),f8(p)}function C1(e,t){let r=ip.click(e,null,t),n={mouse:ho.NONE};return r[0]&&(n.mouse=r[0].properties.active===$o.ACTIVE?ho.MOVE:ho.POINTER,n.feature=r[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(n.mouse=ho.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),r[0]}function OE(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}var V4r=4,G4r=12,H4r=500;function LE(e,t,r={}){let n=r.fineTolerance!=null?r.fineTolerance:V4r,o=r.grossTolerance!=null?r.grossTolerance:G4r,i=r.interval!=null?r.interval:H4r;e.point=e.point||t.point,e.time=e.time||t.time;let a=OE(e.point,t.point);return a<n||a<o&&t.time-e.time<i}var W4r=25,$4r=250;function PE(e,t,r={}){let n=r.tolerance!=null?r.tolerance:W4r,o=r.interval!=null?r.interval:$4r;return e.point=e.point||t.point,e.time=e.time||t.time,OE(e.point,t.point)<n&&t.time-e.time<o}var bnt=(e,t=21)=>(r=t)=>{let n="",o=r|0;for(;o--;)n+=e[Math.random()*e.length|0];return n};var Y4r=bnt("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function kE(){return Y4r()}var ay=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||kE(),this.type=t.geometry.type};ay.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};ay.prototype.incomingCoords=function(e){this.setCoordinates(e)};ay.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};ay.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};ay.prototype.setProperty=function(e,t){this.properties[e]=t};ay.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:lr.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};ay.prototype.internal=function(e){let t={id:this.id,meta:di.FEATURE,"meta:type":this.type,active:$o.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(let r in this.properties)t[`user_${r}`]=this.properties[r];return{type:lr.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var df=ay;var bD=function(e,t){df.call(this,e,t)};bD.prototype=Object.create(df.prototype);bD.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};bD.prototype.updateCoordinate=function(e,t,r){arguments.length===3?this.coordinates=[t,r]:this.coordinates=[e,t],this.changed()};bD.prototype.getCoordinate=function(){return this.getCoordinates()};var A1=bD;var D1=function(e,t){df.call(this,e,t)};D1.prototype=Object.create(df.prototype);D1.prototype.isValid=function(){return this.coordinates.length>1};D1.prototype.addCoordinate=function(e,t,r){this.changed();let n=parseInt(e,10);this.coordinates.splice(n,0,[t,r])};D1.prototype.getCoordinate=function(e){let t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};D1.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};D1.prototype.updateCoordinate=function(e,t,r){let n=parseInt(e,10);this.coordinates[n]=[t,r],this.changed()};var N1=D1;var Ad=function(e,t){df.call(this,e,t),this.coordinates=this.coordinates.map(r=>r.slice(0,-1))};Ad.prototype=Object.create(df.prototype);Ad.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Ad.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Ad.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Ad.prototype.addCoordinate=function(e,t,r){this.changed();let n=e.split(".").map(i=>parseInt(i,10));this.coordinates[n[0]].splice(n[1],0,[t,r])};Ad.prototype.removeCoordinate=function(e){this.changed();let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];r&&(r.splice(t[1],1),r.length<3&&this.coordinates.splice(t[0],1))};Ad.prototype.getCoordinate=function(e){let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];return JSON.parse(JSON.stringify(r[t[1]]))};Ad.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Ad.prototype.updateCoordinate=function(e,t,r){this.changed();let n=e.split("."),o=parseInt(n[0],10),i=parseInt(n[1],10);this.coordinates[o]===void 0&&(this.coordinates[o]=[]),this.coordinates[o][i]=[t,r]};var O1=Ad;var Z4r={MultiPoint:A1,MultiLineString:N1,MultiPolygon:O1},d8=(e,t,r,n,o)=>{let i=r.split("."),a=parseInt(i[0],10),u=i[1]?i.slice(1).join("."):null;return e[a][t](u,n,o)},ap=function(e,t){if(df.call(this,e,t),delete this.coordinates,this.model=Z4r[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};ap.prototype=Object.create(df.prototype);ap.prototype._coordinatesToFeatures=function(e){let t=this.model.bind(this);return e.map(r=>new t(this.ctx,{id:kE(),type:lr.FEATURE,properties:{},geometry:{coordinates:r,type:this.type.replace("Multi","")}}))};ap.prototype.isValid=function(){return this.features.every(e=>e.isValid())};ap.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};ap.prototype.getCoordinate=function(e){return d8(this.features,"getCoordinate",e)};ap.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===lr.POLYGON?e.getCoordinates():e.coordinates)))};ap.prototype.updateCoordinate=function(e,t,r){d8(this.features,"updateCoordinate",e,t,r),this.changed()};ap.prototype.addCoordinate=function(e,t,r){d8(this.features,"addCoordinate",e,t,r),this.changed()};ap.prototype.removeCoordinate=function(e){d8(this.features,"removeCoordinate",e),this.changed()};ap.prototype.getFeatures=function(){return this.features};var L1=ap;function gn(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}gn.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};gn.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,r)=>(t[r.feature_id]===void 0&&(t[r.feature_id]=!0,this._ctx.store.get(r.feature_id).changed()),t),{})};gn.prototype.getSelected=function(){return this._ctx.store.getSelected()};gn.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};gn.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};gn.prototype.getFeature=function(e){return this._ctx.store.get(e)};gn.prototype.select=function(e){return this._ctx.store.select(e)};gn.prototype.deselect=function(e){return this._ctx.store.deselect(e)};gn.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};gn.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};gn.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};gn.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};gn.prototype.setActionableState=function(e={}){let t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};gn.prototype.changeMode=function(e,t={},r={}){return this._ctx.events.changeMode(e,t,r)};gn.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};gn.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};gn.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};gn.prototype.featuresAt=function(e,t,r="click"){if(r!=="click"&&r!=="touch")throw new Error("invalid buffer type");return ip[r](e,t,this._ctx)};gn.prototype.newFeature=function(e){let t=e.geometry.type;return t===lr.POINT?new A1(this._ctx,e):t===lr.LINE_STRING?new N1(this._ctx,e):t===lr.POLYGON?new O1(this._ctx,e):new L1(this._ctx,e)};gn.prototype.isInstanceOf=function(e,t){if(e===lr.POINT)return t instanceof A1;if(e===lr.LINE_STRING)return t instanceof N1;if(e===lr.POLYGON)return t instanceof O1;if(e==="MultiFeature")return t instanceof L1;throw new Error(`Unknown feature class: ${e}`)};gn.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};var wnt=gn;gn.prototype.onSetup=function(){};gn.prototype.onDrag=function(){};gn.prototype.onClick=function(){};gn.prototype.onMouseMove=function(){};gn.prototype.onMouseDown=function(){};gn.prototype.onMouseUp=function(){};gn.prototype.onMouseOut=function(){};gn.prototype.onKeyUp=function(){};gn.prototype.onKeyDown=function(){};gn.prototype.onTouchStart=function(){};gn.prototype.onTouchMove=function(){};gn.prototype.onTouchEnd=function(){};gn.prototype.onTap=function(){};gn.prototype.onStop=function(){};gn.prototype.onTrash=function(){};gn.prototype.onCombineFeature=function(){};gn.prototype.onUncombineFeature=function(){};gn.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Ent={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},K4r=Object.keys(Ent);function Snt(e){let t=Object.keys(e);return function(r,n={}){let o={},i=t.reduce((u,p)=>(u[p]=e[p],u),new wnt(r));function a(u){return p=>i[u](o,p)}return{start(){o=i.onSetup(n),K4r.forEach(u=>{let p=Ent[u],h=()=>!1;e[p]&&(h=()=>!0),this.on(u,h,a(p))})},stop(){i.onStop(o)},trash(){i.onTrash(o)},combineFeatures(){i.onCombineFeatures(o)},uncombineFeatures(){i.onUncombineFeatures(o)},render(u,p){i.toDisplayFeatures(o,u,p)}}}}function Int(e){let t=Object.keys(e.options.modes).reduce((b,T)=>(b[T]=Snt(e.options.modes[T]),b),{}),r={},n={},o={},i=null,a=null;o.drag=function(b,T){T({point:b.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:ho.DRAG}),a.drag(b)):b.originalEvent.stopPropagation()},o.mousedrag=function(b){o.drag(b,T=>!LE(r,T))},o.touchdrag=function(b){o.drag(b,T=>!PE(n,T))},o.mousemove=function(b){if((b.originalEvent.buttons!==void 0?b.originalEvent.buttons:b.originalEvent.which)===1)return o.mousedrag(b);let A=C1(b,e);b.featureTarget=A,a.mousemove(b)},o.mousedown=function(b){r={time:new Date().getTime(),point:b.point};let T=C1(b,e);b.featureTarget=T,a.mousedown(b)},o.mouseup=function(b){let T=C1(b,e);b.featureTarget=T,LE(r,{point:b.point,time:new Date().getTime()})?a.click(b):a.mouseup(b)},o.mouseout=function(b){a.mouseout(b)},o.touchstart=function(b){if(!e.options.touchEnabled)return;n={time:new Date().getTime(),point:b.point};let T=ip.touch(b,null,e)[0];b.featureTarget=T,a.touchstart(b)},o.touchmove=function(b){if(e.options.touchEnabled)return a.touchmove(b),o.touchdrag(b)},o.touchend=function(b){if(b.originalEvent.preventDefault(),!e.options.touchEnabled)return;let T=ip.touch(b,null,e)[0];b.featureTarget=T,PE(n,{time:new Date().getTime(),point:b.point})?a.tap(b):a.touchend(b)};let u=b=>!(b===8||b===46||b>=48&&b<=57);o.keydown=function(b){(b.srcElement||b.target).classList.contains(Ss.CANVAS)&&((b.keyCode===8||b.keyCode===46)&&e.options.controls.trash?(b.preventDefault(),a.trash()):u(b.keyCode)?a.keydown(b):b.keyCode===49&&e.options.controls.point?p(nn.DRAW_POINT):b.keyCode===50&&e.options.controls.line_string?p(nn.DRAW_LINE_STRING):b.keyCode===51&&e.options.controls.polygon&&p(nn.DRAW_POLYGON))},o.keyup=function(b){u(b.keyCode)&&a.keyup(b)},o.zoomend=function(){e.store.changeZoom()},o.data=function(b){if(b.dataType==="style"){let{setup:T,map:A,options:L,store:P}=e;L.styles.some(q=>A.getLayer(q.id))||(T.addLayers(),P.setDirty(),P.render())}};function p(b,T,A={}){a.stop();let L=t[b];if(L===void 0)throw new Error(`${b} is not valid`);i=b;let P=L(e,T);a=xD(P,e),A.silent||e.map.fire(qi.MODE_CHANGE,{mode:b}),e.store.setDirty(),e.store.render()}let h={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function g(b){let T=!1;Object.keys(b).forEach(A=>{if(h[A]===void 0)throw new Error("Invalid action type");h[A]!==b[A]&&(T=!0),h[A]=b[A]}),T&&e.map.fire(qi.ACTIONABLE,{actions:h})}return{start(){i=e.options.defaultMode,a=xD(t[i](e),e)},changeMode:p,actionable:g,currentModeName(){return i},currentModeRender(b,T){return a.render(b,T)},fire(b,T){e.map&&e.map.fire(b,T)},addEventListeners(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash(b){a.trash(b)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode(){return i}}}function X4r(e){return[].concat(e).filter(t=>t!==void 0)}var P1=X4r;function rae(){let e=this;if(!(e.ctx.map&&e.ctx.map.getSource(kl.HOT)!==void 0))return p();let r=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:r});let n=[],o=[];e.isDirty?o=e.getAllIds():(n=e.getChangedIds().filter(h=>e.get(h)!==void 0),o=e.sources.hot.filter(h=>h.properties.id&&n.indexOf(h.properties.id)===-1&&e.get(h.properties.id)!==void 0).map(h=>h.properties.id)),e.sources.hot=[];let i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(h=>{let g=h.properties.id||h.properties.parent;return n.indexOf(g)===-1});let a=i!==e.sources.cold.length||o.length>0;n.forEach(h=>u(h,"hot")),o.forEach(h=>u(h,"cold"));function u(h,g){let b=e.get(h).internal(r);e.ctx.events.currentModeRender(b,T=>{T.properties.mode=r,e.sources[g].push(T)})}a&&e.ctx.map.getSource(kl.COLD).setData({type:lr.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(kl.HOT).setData({type:lr.FEATURE_COLLECTION,features:e.sources.hot}),p();function p(){e.isDirty=!1,e.clearChangedIds()}}function Uo(e){this._features={},this._featureIds=new pf,this._selectedFeatureIds=new pf,this._selectedCoordinates=[],this._changedFeatureIds=new pf,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,rae.call(this),this._emitSelectionChange&&(this.ctx.events.fire(qi.SELECTION_CHANGE,{features:this.getSelected().map(r=>r.toGeoJSON()),points:this.getSelectedCoordinates().map(r=>({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:r.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(qi.RENDER,{})}))},this.isDirty=!1}Uo.prototype.createRenderBatch=function(){let e=this.render,t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Uo.prototype.setDirty=function(){return this.isDirty=!0,this};Uo.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){let n=this.get(e);this.ctx.events.fire(qi.CREATE,{features:[n.toGeoJSON()]})}return this};Uo.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(qi.UPDATE,{action:t.action?t.action:iy.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Uo.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Uo.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Uo.prototype.getAllIds=function(){return this._featureIds.values()};Uo.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Uo.prototype.delete=function(e,t={}){let r=[];return P1(e).forEach(n=>{this._featureIds.has(n)&&(this._featureIds.delete(n),this._selectedFeatureIds.delete(n),t.silent||r.indexOf(this._features[n])===-1&&r.push(this._features[n].toGeoJSON()),delete this._features[n],this.isDirty=!0)}),r.length&&this.ctx.events.fire(qi.DELETE,{features:r}),Tnt(this,t),this};Uo.prototype.get=function(e){return this._features[e]};Uo.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Uo.prototype.select=function(e,t={}){return P1(e).forEach(r=>{this._selectedFeatureIds.has(r)||(this._selectedFeatureIds.add(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),this};Uo.prototype.deselect=function(e,t={}){return P1(e).forEach(r=>{this._selectedFeatureIds.has(r)&&(this._selectedFeatureIds.delete(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),Tnt(this,t),this};Uo.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Uo.prototype.setSelected=function(e,t={}){return e=P1(e),this.deselect(this._selectedFeatureIds.values().filter(r=>e.indexOf(r)===-1),{silent:t.silent}),this.select(e.filter(r=>!this._selectedFeatureIds.has(r)),{silent:t.silent}),this};Uo.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Uo.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Uo.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Uo.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Uo.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Uo.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Uo.prototype.setFeatureProperty=function(e,t,r,n={}){this.get(e).setProperty(t,r),this.featureChanged(e,{silent:n.silent,action:iy.CHANGE_PROPERTIES})};function Tnt(e,t={}){let r=e._selectedCoordinates.filter(n=>e._selectedFeatureIds.has(n.feature_id));e._selectedCoordinates.length!==r.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=r}Uo.prototype.storeMapConfig=function(){tae.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Uo.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Uo.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};var J4r=["mode","feature","mouse"];function Mnt(e){let t={},r=null,n={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function i(){a({mode:null,feature:null,mouse:null}),u()}function a(T){o=Object.assign(o,T)}function u(){if(!e.container)return;let T=[],A=[];J4r.forEach(L=>{o[L]!==n[L]&&(T.push(`${L}-${n[L]}`),o[L]!==null&&A.push(`${L}-${o[L]}`))}),T.length>0&&e.container.classList.remove(...T),A.length>0&&e.container.classList.add(...A),n=Object.assign(n,o)}function p(T,A={}){let L=document.createElement("button");return L.className=`${Ss.CONTROL_BUTTON} ${A.className}`,L.setAttribute("title",A.title),A.container.appendChild(L),L.addEventListener("click",P=>{if(P.preventDefault(),P.stopPropagation(),P.target===r){h(),A.onDeactivate();return}g(T),A.onActivate()},!0),L}function h(){r&&(r.classList.remove(Ss.ACTIVE_BUTTON),r=null)}function g(T){h();let A=t[T];A&&A&&T!=="trash"&&(A.classList.add(Ss.ACTIVE_BUTTON),r=A)}function x(){let T=e.options.controls,A=document.createElement("div");return A.className=`${Ss.CONTROL_GROUP} ${Ss.CONTROL_BASE}`,T&&(T[Ea.LINE]&&(t[Ea.LINE]=p(Ea.LINE,{container:A,className:Ss.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(nn.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),T[Ea.POLYGON]&&(t[Ea.POLYGON]=p(Ea.POLYGON,{container:A,className:Ss.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(nn.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),T[Ea.POINT]&&(t[Ea.POINT]=p(Ea.POINT,{container:A,className:Ss.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(nn.DRAW_POINT),onDeactivate:()=>e.events.trash()})),T.trash&&(t.trash=p("trash",{container:A,className:Ss.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),T.combine_features&&(t.combine_features=p("combineFeatures",{container:A,className:Ss.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),T.uncombine_features&&(t.uncombine_features=p("uncombineFeatures",{container:A,className:Ss.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),A}function b(){Object.keys(t).forEach(T=>{let A=t[T];A.parentNode&&A.parentNode.removeChild(A),delete t[T]})}return{setActiveButton:g,queueMapClasses:a,updateMapClasses:u,clearMapClasses:i,addButtons:x,removeButtons:b}}function Cnt(e){let t=null,r=null,n={onRemove(){return e.map.off("load",n.connect),clearInterval(r),n.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",n.connect),clearInterval(r),n.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(o){if(e.map=o,e.events=Int(e),e.ui=Mnt(e),e.container=o.getContainer(),e.store=new Uo(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=o.boxZoom.isEnabled(),o.boxZoom.disable();let i=o.dragPan.isEnabled();o.dragPan.disable(),o.dragPan.enable(),i||o.dragPan.disable()}return o.loaded()?n.connect():(o.on("load",n.connect),r=setInterval(()=>{o.loaded()&&n.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(kl.COLD,{data:{type:lr.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(kl.HOT,{data:{type:lr.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(o=>{e.map.addLayer(o)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(o=>{e.map.getLayer(o.id)&&e.map.removeLayer(o.id)}),e.map.getSource(kl.COLD)&&e.map.removeSource(kl.COLD),e.map.getSource(kl.HOT)&&e.map.removeSource(kl.HOT)}};return e.setup=n,n}var nae="#3bb2d0",wD="#fbb03b",Ant="#fff",h8=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],wD,nae],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],wD,nae],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Ant}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],wD,nae]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Ant}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":wD}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":wD}}];var q1={};n2(q1,{isActiveFeature:()=>_m,isEnterKey:()=>j1,isEscapeKey:()=>R1,isFeature:()=>g8,isInactiveFeature:()=>m8,isOfMetaType:()=>RE,isShiftDown:()=>qE,isShiftMousedown:()=>oae,isTrue:()=>Q4r,isVertex:()=>k1,noTarget:()=>jE});function RE(e){return function(t){let r=t.featureTarget;return!r||!r.properties?!1:r.properties.meta===e}}function oae(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function _m(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===$o.ACTIVE&&e.featureTarget.properties.meta===di.FEATURE}function m8(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===$o.INACTIVE&&e.featureTarget.properties.meta===di.FEATURE}function jE(e){return e.featureTarget===void 0}function g8(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===di.FEATURE}function k1(e){let t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===di.VERTEX}function qE(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function R1(e){return e.keyCode===27}function j1(e){return e.keyCode===13}function Q4r(){return!0}function Dd(e,t){this.x=e,this.y=t}Dd.prototype={clone(){return new Dd(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){let t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){let t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){let e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){let t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,o=r*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround(e,t){let r=Math.cos(e),n=Math.sin(e),o=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=o,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Dd};Dd.convert=function(e){if(e instanceof Dd)return e;if(Array.isArray(e))return new Dd(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new Dd(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function eNr(e,t){let r=t.getBoundingClientRect();return new Dd(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))}var v8=eNr;function Nd(e,t,r,n){return{type:lr.FEATURE,properties:{meta:di.VERTEX,parent:e,coord_path:r,active:n?$o.ACTIVE:$o.INACTIVE},geometry:{type:lr.POINT,coordinates:t}}}function y8(e,t,r){let n=t.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>c8||n[1]<u8||o[1]>c8||o[1]<u8)return null;let i={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:lr.FEATURE,properties:{meta:di.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:r.properties.coord_path},geometry:{type:lr.POINT,coordinates:[i.lng,i.lat]}}}function Dnt(e,t={},r=null){let{type:n,coordinates:o}=e.geometry,i=e.properties&&e.properties.id,a=[];n===lr.POINT?a.push(Nd(i,o,r,p(r))):n===lr.POLYGON?o.forEach((g,x)=>{u(g,r!==null?`${r}.${x}`:String(x))}):n===lr.LINE_STRING?u(o,r):n.indexOf(lr.MULTI_PREFIX)===0&&h();function u(g,x){let b="",T=null;g.forEach((A,L)=>{let P=x!=null?`${x}.${L}`:String(L),k=Nd(i,A,P,p(P));if(t.midpoints&&T){let U=y8(i,T,k);U&&a.push(U)}T=k;let q=JSON.stringify(A);b!==q&&a.push(k),L===0&&(b=q)})}function p(g){return t.selectedPaths?t.selectedPaths.indexOf(g)!==-1:!1}function h(){let g=n.replace(lr.MULTI_PREFIX,"");o.forEach((x,b)=>{let T={type:lr.FEATURE,properties:e.properties,geometry:{type:g,coordinates:x}};a=a.concat(Dnt(T,t,b))})}return a}var zE=Dnt;var ll={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}};var{LAT_MIN:_8,LAT_MAX:x8,LAT_RENDERED_MIN:Nnt,LAT_RENDERED_MAX:Ont,LNG_MIN:Lnt,LNG_MAX:Pnt}=Fo;function tNr(e){let t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],r=[e.geometry.coordinates].flat(t),n=r.map(u=>u[0]),o=r.map(u=>u[1]),i=u=>Math.min.apply(null,u),a=u=>Math.max.apply(null,u);return[i(n),i(o),a(n),a(o)]}function FE(e,t){let r=_8,n=x8,o=_8,i=x8,a=Pnt,u=Lnt;e.forEach(h=>{let g=tNr(h),x=g[1],b=g[3],T=g[0],A=g[2];x>r&&(r=x),b<n&&(n=b),b>o&&(o=b),x<i&&(i=x),T<a&&(a=T),A>u&&(u=A)});let p=t;return r+p.lat>Ont&&(p.lat=Ont-r),o+p.lat>x8&&(p.lat=x8-o),n+p.lat<Nnt&&(p.lat=Nnt-n),i+p.lat<_8&&(p.lat=_8-i),a+p.lng<=Lnt&&(p.lng+=Math.ceil(Math.abs(p.lng)/360)*360),u+p.lng>=Pnt&&(p.lng-=Math.ceil(Math.abs(p.lng)/360)*360),p}function UE(e,t){let r=FE(e.map(n=>n.toGeoJSON()),t);e.forEach(n=>{let o=n.getCoordinates(),i=h=>{let g={lng:h[0]+r.lng,lat:h[1]+r.lat};return[g.lng,g.lat]},a=h=>h.map(g=>i(g)),u=h=>h.map(g=>a(g)),p;n.type===lr.POINT?p=i(o):n.type===lr.LINE_STRING||n.type===lr.MULTI_POINT?p=o.map(i):n.type===lr.POLYGON||n.type===lr.MULTI_LINE_STRING?p=o.map(a):n.type===lr.MULTI_POLYGON&&(p=o.map(u)),n.incomingCoords(p)})}var Yo={};Yo.onSetup=function(e){let t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(r=>this.getFeature(r)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};Yo.fireUpdate=function(){this.fire(qi.UPDATE,{action:iy.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};Yo.fireActionable=function(){let e=this.getSelected(),t=e.filter(i=>this.isInstanceOf("MultiFeature",i)),r=!1;if(e.length>1){r=!0;let i=e[0].type.replace("Multi","");e.forEach(a=>{a.type.replace("Multi","")!==i&&(r=!1)})}let n=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:n,trash:o})};Yo.getUniqueIds=function(e){return e.length?e.map(r=>r.properties.id).filter(r=>r!==void 0).reduce((r,n)=>(r.add(n),r),new pf).values():[]};Yo.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};Yo.onStop=function(){ll.enable(this)};Yo.onMouseMove=function(e,t){return g8(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};Yo.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};Yo.onTap=Yo.onClick=function(e,t){if(jE(t))return this.clickAnywhere(e,t);if(RE(di.VERTEX)(t))return this.clickOnVertex(e,t);if(g8(t))return this.clickOnFeature(e,t)};Yo.clickAnywhere=function(e){let t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(r=>this.doRender(r))),ll.enable(this),this.stopExtendedInteractions(e)};Yo.clickOnVertex=function(e,t){this.changeMode(nn.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:ho.MOVE})};Yo.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Yo.clickOnFeature=function(e,t){ll.disable(this),this.stopExtendedInteractions(e);let r=qE(t),n=this.getSelectedIds(),o=t.featureTarget.properties.id,i=this.isSelected(o);if(!r&&i&&this.getFeature(o).type!==lr.POINT)return this.changeMode(nn.DIRECT_SELECT,{featureId:o});i&&r?(this.deselect(o),this.updateUIClasses({mouse:ho.POINTER}),n.length===1&&ll.enable(this)):!i&&r?(this.select(o),this.updateUIClasses({mouse:ho.MOVE})):!i&&!r&&(n.forEach(a=>this.doRender(a)),this.setSelected(o),this.updateUIClasses({mouse:ho.MOVE})),this.doRender(o)};Yo.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),_m(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&oae(t))return this.startBoxSelect(e,t)};Yo.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=v8(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};Yo.onTouchStart=function(e,t){if(_m(t))return this.startOnActiveFeature(e,t)};Yo.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};Yo.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:ho.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(Ss.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));let r=v8(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),o=Math.max(e.boxSelectStartLocation.x,r.x),i=Math.min(e.boxSelectStartLocation.y,r.y),a=Math.max(e.boxSelectStartLocation.y,r.y),u=`translate(${n}px, ${i}px)`;e.boxSelectElement.style.transform=u,e.boxSelectElement.style.WebkitTransform=u,e.boxSelectElement.style.width=`${o-n}px`,e.boxSelectElement.style.height=`${a-i}px`};Yo.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};UE(this.getSelected(),r),e.dragMoveLocation=t.lngLat};Yo.onTouchEnd=Yo.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){let r=[e.boxSelectStartLocation,v8(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,r,"click"),o=this.getUniqueIds(n).filter(i=>!this.isSelected(i));o.length&&(this.select(o),o.forEach(i=>this.doRender(i)),this.updateUIClasses({mouse:ho.MOVE}))}this.stopExtendedInteractions(e)};Yo.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?$o.ACTIVE:$o.INACTIVE,r(t),this.fireActionable(),!(t.properties.active!==$o.ACTIVE||t.geometry.type===lr.POINT)&&zE(t).forEach(r)};Yo.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};Yo.onCombineFeatures=function(){let e=this.getSelected();if(e.length===0||e.length<2)return;let t=[],r=[],n=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){let i=e[o];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach(a=>{t.push(a)}):t.push(i.getCoordinates()),r.push(i.toGeoJSON())}if(r.length>1){let o=this.newFeature({type:lr.FEATURE,properties:r[0].properties,geometry:{type:`Multi${n}`,coordinates:t}});this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.fire(qi.COMBINE_FEATURES,{createdFeatures:[o.toGeoJSON()],deletedFeatures:r})}this.fireActionable()};Yo.onUncombineFeatures=function(){let e=this.getSelected();if(e.length===0)return;let t=[],r=[];for(let n=0;n<e.length;n++){let o=e[n];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(i=>{this.addFeature(i),i.properties=o.properties,t.push(i.toGeoJSON()),this.select([i.id])}),this.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))}t.length>1&&this.fire(qi.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:r}),this.fireActionable()};var knt=Yo;var Rnt=RE(di.VERTEX),jnt=RE(di.MIDPOINT),Zo={};Zo.fireUpdate=function(){this.fire(qi.UPDATE,{action:iy.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};Zo.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};Zo.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Zo.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};Zo.onVertex=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);!qE(t)&&n===-1?e.selectedCoordPaths=[r.coord_path]:qE(t)&&n===-1&&e.selectedCoordPaths.push(r.coord_path);let o=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(o)};Zo.onMidpoint=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]};Zo.pathsToCoordinates=function(e,t){return t.map(r=>({feature_id:e,coord_path:r}))};Zo.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};Zo.dragFeature=function(e,t,r){UE(this.getSelected(),r),e.dragMoveLocation=t.lngLat};Zo.dragVertex=function(e,t,r){let n=e.selectedCoordPaths.map(a=>e.feature.getCoordinate(a)),o=n.map(a=>({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:a}})),i=FE(o,r);for(let a=0;a<n.length;a++){let u=n[a];e.feature.updateCoordinate(e.selectedCoordPaths[a],u[0]+i.lng,u[1]+i.lat)}};Zo.clickNoTarget=function(){this.changeMode(nn.SIMPLE_SELECT)};Zo.clickInactive=function(){this.changeMode(nn.SIMPLE_SELECT)};Zo.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};Zo.onSetup=function(e){let t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===lr.POINT)throw new TypeError("direct_select mode doesn't handle point features");let n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),ll.disable(this),this.setActionableState({trash:!0}),n};Zo.onStop=function(){ll.enable(this),this.clearSelectedCoordinates()};Zo.toDisplayFeatures=function(e,t,r){e.featureId===t.properties.id?(t.properties.active=$o.ACTIVE,r(t),zE(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=$o.INACTIVE,r(t)),this.fireActionable(e)};Zo.onTrash=function(e){e.selectedCoordPaths.sort((t,r)=>r.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(nn.SIMPLE_SELECT,{}))};Zo.onMouseMove=function(e,t){let r=_m(t),n=Rnt(t),o=jnt(t),i=e.selectedCoordPaths.length===0;return r&&i?this.updateUIClasses({mouse:ho.MOVE}):n&&!i?this.updateUIClasses({mouse:ho.MOVE}):this.updateUIClasses({mouse:ho.NONE}),(n||r||o)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};Zo.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};Zo.onTouchStart=Zo.onMouseDown=function(e,t){if(Rnt(t))return this.onVertex(e,t);if(_m(t))return this.onFeature(e,t);if(jnt(t))return this.onMidpoint(e,t)};Zo.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat};Zo.onClick=function(e,t){if(jE(t))return this.clickNoTarget(e,t);if(_m(t))return this.clickActiveFeature(e,t);if(m8(t))return this.clickInactive(e,t);this.stopDragging(e)};Zo.onTap=function(e,t){if(jE(t))return this.clickNoTarget(e,t);if(_m(t))return this.clickActiveFeature(e,t);if(m8(t))return this.clickInactive(e,t)};Zo.onTouchEnd=Zo.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var qnt=Zo;var Od={};Od.onSetup=function(){let e=this.newFeature({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:ho.ADD}),this.activateUIButton(Ea.POINT),this.setActionableState({trash:!0}),{point:e}};Od.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)};Od.onTap=Od.onClick=function(e,t){this.updateUIClasses({mouse:ho.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(qi.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.point.id]})};Od.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};Od.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.point.id;if(t.properties.active=n?$o.ACTIVE:$o.INACTIVE,!n)return r(t)};Od.onTrash=Od.stopDrawingAndRemove;Od.onKeyUp=function(e,t){if(R1(t)||j1(t))return this.stopDrawingAndRemove(e,t)};var znt=Od;function rNr(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}var z1=rNr;var sp={};sp.onSetup=function(){let e=this.newFeature({type:lr.FEATURE,properties:{},geometry:{type:lr.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),ll.disable(this),this.updateUIClasses({mouse:ho.ADD}),this.activateUIButton(Ea.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};sp.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&z1(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:ho.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};sp.clickOnVertex=function(e){return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};sp.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),k1(t)&&this.updateUIClasses({mouse:ho.POINTER})};sp.onTap=sp.onClick=function(e,t){return k1(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};sp.onKeyUp=function(e,t){R1(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)):j1(t)&&this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};sp.onStop=function(e){this.updateUIClasses({mouse:ho.NONE}),ll.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(qi.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT,{},{silent:!0})))};sp.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.polygon.id;if(t.properties.active=n?$o.ACTIVE:$o.INACTIVE,!n)return r(t);if(t.geometry.coordinates.length===0)return;let o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=di.FEATURE,r(Nd(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){let i=t.geometry.coordinates[0].length-3;r(Nd(e.polygon.id,t.geometry.coordinates[0][i],`0.${i}`,!1))}if(o<=4){let i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:lr.FEATURE,properties:t.properties,geometry:{coordinates:i,type:lr.LINE_STRING}}),o===3)return}return r(t)}};sp.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)};var Fnt=sp;var lp={};lp.onSetup=function(e){e=e||{};let t=e.featureId,r,n,o="forward";if(t){if(r=this.getFeature(t),!r)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");let a=r.coordinates.length-1;if(r.coordinates[a][0]===i[0]&&r.coordinates[a][1]===i[1])n=a+1,r.addCoordinate(n,...r.coordinates[a]);else if(r.coordinates[0][0]===i[0]&&r.coordinates[0][1]===i[1])o="backwards",n=0,r.addCoordinate(n,...r.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else r=this.newFeature({type:lr.FEATURE,properties:{},geometry:{type:lr.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(r);return this.clearSelectedFeatures(),ll.disable(this),this.updateUIClasses({mouse:ho.ADD}),this.activateUIButton(Ea.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:n,direction:o}};lp.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&z1(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&z1(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:ho.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};lp.clickOnVertex=function(e){return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.line.id]})};lp.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),k1(t)&&this.updateUIClasses({mouse:ho.POINTER})};lp.onTap=lp.onClick=function(e,t){if(k1(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};lp.onKeyUp=function(e,t){j1(t)?this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.line.id]}):R1(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT))};lp.onStop=function(e){ll.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(qi.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT,{},{silent:!0})))};lp.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)};lp.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.line.id;if(t.properties.active=n?$o.ACTIVE:$o.INACTIVE,!n)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=di.FEATURE,r(Nd(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),r(t))};var Unt=lp;var b8={simple_select:knt,direct_select:qnt,draw_point:znt,draw_polygon:Fnt,draw_line_string:Unt};var nNr={defaultMode:nn.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:h8,modes:b8,controls:{},userProperties:!1,suppressAPIEvents:!0},oNr={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},iNr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function Bnt(e,t){return e.map(r=>r.source?r:Object.assign({},r,{id:`${r.id}.${t}`,source:t==="hot"?kl.HOT:kl.COLD}))}function Vnt(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},iNr,e.controls):t.controls=Object.assign({},oNr,e.controls),t=Object.assign({},nNr,t),t.styles=Bnt(t.styles,"cold").concat(Bnt(t.styles,"hot")),t}var iae=Z(FP(),1),Wnt=Z(Hnt(),1);function w8(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(r=>r).sort())===JSON.stringify(t.map(r=>r).sort())}var lNr={Polygon:O1,LineString:N1,Point:A1,MultiPolygon:L1,MultiLineString:L1,MultiPoint:L1};function $nt(e,t){t.modes=nn;let r=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(n){return ip.click({point:n},null,e).map(i=>i.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:lr.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(n=>e.store.get(n)).map(n=>n.toGeoJSON())}},t.getSelectedPoints=function(){return{type:lr.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(n=>({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:n.coordinates}}))}},t.set=function(n){if(n.type===void 0||n.type!==lr.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");let o=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),a=t.add(n),u=new pf(a);return i=i.filter(p=>!u.has(p)),i.length&&t.delete(i),o(),a},t.add=function(n){let i=JSON.parse(JSON.stringify((0,Wnt.default)(n))).features.map(a=>{if(a.id=a.id||kE(),a.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(a.id)===void 0||e.store.get(a.id).type!==a.geometry.type){let u=lNr[a.geometry.type];if(u===void 0)throw new Error(`Invalid geometry type: ${a.geometry.type}.`);let p=new u(e,a);e.store.add(p,{silent:r})}else{let u=e.store.get(a.id),p=u.properties;u.properties=a.properties,(0,iae.default)(p,a.properties)||e.store.featureChanged(u.id,{silent:r}),(0,iae.default)(u.getCoordinates(),a.geometry.coordinates)||u.incomingCoords(a.geometry.coordinates)}return a.id});return e.store.render(),i},t.get=function(n){let o=e.store.get(n);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:lr.FEATURE_COLLECTION,features:e.store.getAll().map(n=>n.toGeoJSON())}},t.delete=function(n){return e.store.delete(n,{silent:r}),t.getMode()===nn.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(nn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:r}),t.getMode()===nn.DIRECT_SELECT?e.events.changeMode(nn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.changeMode=function(n,o={}){return n===nn.SIMPLE_SELECT&&t.getMode()===nn.SIMPLE_SELECT?(w8(o.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(o.featureIds,{silent:r}),e.store.render()),t):(n===nn.DIRECT_SELECT&&t.getMode()===nn.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,o,{silent:r}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:r}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:r}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:r}),t},t.setFeatureProperty=function(n,o,i){return e.store.setFeatureProperty(n,o,i,{silent:r}),t},t}var aae={};n2(aae,{CommonSelectors:()=>q1,ModeHandler:()=>xD,StringSet:()=>pf,constrainFeatureMovement:()=>FE,createMidPoint:()=>y8,createSupplementaryPoints:()=>zE,createVertex:()=>Nd,doubleClickZoom:()=>ll,euclideanDistance:()=>OE,featuresAt:()=>ip,getFeatureAtAndSetCursors:()=>C1,isClick:()=>LE,isEventAtCoordinates:()=>z1,isTap:()=>PE,mapEventToBoundingBox:()=>p8,moveFeatures:()=>UE,sortFeatures:()=>f8,stringSetsAreEqual:()=>w8,theme:()=>h8,toDenseArray:()=>P1});var uNr=function(e,t){e=Vnt(e);let r={options:e};t=$nt(r,t),r.api=t;let n=Cnt(r);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=Ea,t.options=e,t};function E8(e){uNr(e,this)}E8.modes=b8;E8.constants=Fo;E8.lib=aae;var Ynt=E8;var Znt=Z(we(),1);var sae=en({key:"trackingHandlerState",default:null}),up=en({key:"geoJsonChangeTrackingState",default:null}),S8=()=>{let e=Ar(up),t=(0,Znt.useCallback)(i=>{e(a=>{if(a.addIds.includes(i))return Ft(Se({},a),{addIds:a.addIds.filter(p=>p!==i)});{let p=new Map(a.dirtyMap);return p.delete(i),Ft(Se({},a),{dirtyMap:p,deleteIds:[...a.deleteIds,i]})}})},[]),r=Rr(({snapshot:i,set:a})=>u=>Nt(void 0,null,function*(){let h=(yield i.getPromise(ba)).features.find(g=>g.id===u.id);h!==void 0&&(Object.keys(h.properties).length!==Object.keys(u.properties).length||Object.keys(h.properties).some(g=>h.properties[g]!==u.properties[g])?a(up,g=>{let x=new Map(g.dirtyMap);return x.set(u.id,!0),Ft(Se({},g),{dirtyMap:x})}):a(up,g=>{if(g.dirtyMap.has(u.id)&&g.dirtyMap.get(u.id)){let x=new Map(g.dirtyMap);return x.set(u.id,!1),Ft(Se({},g),{dirtyMap:x})}return g}))}),[]),n=Rr(({snapshot:i,set:a})=>()=>Nt(void 0,null,function*(){let u=yield i.getPromise(wr);if(Ge(u)){let g={"draw.update":x=>{let b=x.features[0];a(up,T=>{if(T.dirtyMap.has(b.id)&&!T.dirtyMap.get(b.id)){let A=new Map(T.dirtyMap);return A.set(b.id,!0),Ft(Se({},T),{dirtyMap:A})}return T})},"draw.create":x=>{a(up,b=>Ft(Se({},b),{addIds:[...b.addIds,x.features[0].id]}))},"draw.delete":x=>{a(up,b=>{if(b.addIds.includes(x.features[0].id))return Ft(Se({},b),{addIds:b.addIds.filter(A=>A!==x.features[0].id)});{let A=new Map(b.dirtyMap);return A.delete(x.features[0].id),Ft(Se({},b),{dirtyMap:A,deleteIds:[...b.deleteIds,x.features[0].id]})}})}};Object.keys(g).forEach(x=>{u.on(x,g[x])}),a(sae,g)}let p=yield i.getPromise(ba),h=new Map;p.features.forEach(g=>{h.set(g.id,!1)}),a(up,{dirtyMap:h,deleteIds:[],addIds:[]})}),[]),o=Rr(({snapshot:i,set:a})=>()=>Nt(void 0,null,function*(){let u=yield i.getPromise(wr);if(Ge(u)){let p=yield i.getPromise(sae);p!==null&&(Object.keys(p).forEach(h=>{u.off(h,p[h])}),a(sae,null))}}),[]);return{handleDeleteFeature:t,handleUpdateFeature:r,registerMapEventHandler:n,unregisterMapEventHandler:o}};var Rl="user_",cNr="rgb(0, 177, 158)",lae=cNr,Knt=[{id:"polygon-fill",type:"fill",paint:{"fill-color":["coalesce",["get",`${Rl}fill`],zn[Ur.FILL].COLOR],"fill-opacity":["coalesce",["get",`${Rl}fill-opacity`],zn[Ur.FILL].OPACITY]},filter:["all",["==",["geometry-type"],"Polygon"]]},{id:"polygon-outline-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${Rl}stroke`],zn[Ur.OUTLINE].COLOR],"line-width":["coalesce",["get",`${Rl}stroke-width`],zn[Ur.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${Rl}stroke-opacity`],zn[Ur.OUTLINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["any",["==",["geometry-type"],"Polygon"],["all",["==",["get","mode"],"draw_polygon"],["==",["geometry-type"],"LineString"]]]]},{id:"polygon-outline-cold",type:"line",paint:{"line-color":["coalesce",["get",`${Rl}stroke`],zn[Ur.OUTLINE].COLOR],"line-width":["coalesce",["get",`${Rl}stroke-width`],zn[Ur.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${Rl}stroke-opacity`],zn[Ur.OUTLINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"Polygon"]]},{id:"line-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${Rl}stroke`],zn[Ur.LINE].COLOR],"line-width":["coalesce",["get",`${Rl}stroke-width`],zn[Ur.LINE].WIDTH],"line-opacity":["coalesce",["get",`${Rl}stroke-opacity`],zn[Ur.LINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["==",["geometry-type"],"LineString"],["!=",["get","mode"],"draw_polygon"]]},{id:"line-cold",type:"line",paint:{"line-color":["coalesce",["get",`${Rl}stroke`],zn[Ur.LINE].COLOR],"line-width":["coalesce",["get",`${Rl}stroke-width`],zn[Ur.LINE].WIDTH],"line-opacity":["coalesce",["get",`${Rl}stroke-opacity`],zn[Ur.LINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"LineString"]]},{id:"point",type:"symbol",layout:{"icon-image":hr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["get",`${Rl}marker`],zn[Ur.SYMBOL].COLOR],"icon-halo-color":["case",["==",["get","active"],"true"],lae,"#fff"],"icon-halo-width":["case",["==",["get","active"],"true"],2,1]},filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"feature"]]},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":"#fff"}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":lae}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==",["get","meta"],"midpoint"]],paint:{"circle-radius":3,"circle-color":lae}}];var fNr={styles:Knt,userProperties:!0,controls:{combine_features:!1,uncombine_features:!1}},Xnt="draw",ED="shifted",cae={LEFT:"left",RIGHT:"right"},F1={topLeft:".maplibregl-ctrl-top-left",topRight:".maplibregl-ctrl-top-right",bottomRight:".maplibregl-ctrl-bottom-right"},pNr=e=>{let t=e?F1.topLeft:F1.topRight,r=e?F1.topRight:F1.topLeft;return{add:t,remove:r}},dNr=e=>{let r=e._controlContainer.querySelector(F1.topRight).querySelectorAll("button");for(let n of r){let o=document.createElement("div");o.classList.add("maplibregl-ctrl","maplibregl-ctrl-group"),n.before(o),o.appendChild(n)}},fae=()=>{let e=Rr(({snapshot:r,set:n})=>()=>Nt(void 0,null,function*(){let o=yield r.getPromise(wr),i=yield r.getPromise(ba);if(Ge(o)&&Ge(i)){let a=new Ynt(fNr);n(Fa,a),o.addControl(a,"top-right"),a.add(i),o._controlContainer.classList.add(Xnt),dNr(o)}}),[]),t=Rr(({snapshot:r,set:n})=>()=>Nt(void 0,null,function*(){let o=yield r.getPromise(wr),i=yield r.getPromise(Fa),{selectedLayer:a}=yield r.getPromise(Xp);Ge(o)&&Ge(a)&&!a.isVisible(o)&&a.setVisibility(o,"visible"),Ge(o)&&Ge(i)&&(o.removeControl(i),n(Fa,void 0),o._controlContainer.classList.remove(Xnt),Md(n))}),[]);return{initializeDraw:e,removeDraw:t}},hNr=()=>{let e=Rr(({snapshot:r})=>n=>Nt(void 0,null,function*(){let o=yield r.getPromise(wr);if(Ge(o)){let i=n===cae.LEFT,{add:a,remove:u}=pNr(i);o._controlContainer.querySelector(a).classList.add(ED),o._controlContainer.querySelector(u).classList.remove(ED);let g=o._controlContainer.querySelector(F1.bottomRight);i?g.classList.remove(ED):g.classList.add(ED)}}),[]),t=Rr(({snapshot:r})=>()=>Nt(void 0,null,function*(){let n=yield r.getPromise(wr);if(Ge(n))for(let o of Object.values(F1))n._controlContainer.querySelector(o).classList.remove(ED)}),[]);return{shiftControls:e,removeControlShifts:t}},mNr=()=>{let e=vt(la),{initializeDraw:t,removeDraw:r}=fae(),{shiftControls:n,removeControlShifts:o}=hNr(),{registerMapEventHandler:i,unregisterMapEventHandler:a}=S8();return(0,uae.useEffect)(()=>(t(),i(),()=>{r(),o(),a()}),[]),(0,uae.useEffect)(()=>{let u=e===ko.FEATURE,p=e===ko.METADATA||e===ko.HISTORY;u?n(cae.LEFT):p?n(cae.RIGHT):o()},[e]),null},Jnt=mNr;var Qnt=Jnt;var so=Z(we(),1);var pae=Z(FP(),1);var sy=e=>({id:"mapWrapper",type:"danger",text:de(e)}),gNr=e=>{let t=[it.title,it.description,it.thumbnailUrl];return Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))},eot=e=>{let t=structuredClone(e),r={[it.thumbnailUrl]:"link_thumb"};for(let[n,o]of Object.entries(r)){let i=t[n];t[o]=i,delete t[n]}return Object.fromEntries(Object.entries(t).map(([n,o])=>!Ge(o)||o===""?[n,null]:[n,o]))},vNr=()=>{let e=Rr(({snapshot:n,set:o})=>()=>Nt(void 0,null,function*(){let i=yield n.getPromise(Fa);if(i){let a=i.getAll(),u=yield n.getPromise(wr),p=yield n.getPromise(Ys),h=null;try{h=yield IYe(a,eot(p))}catch(g){if(g.response){if(g.response.status===401){o(Ii,sy("common-errors-http-401"));return}if(g.response.status===403){o(Ii,sy("common-errors-http-403"));return}}o(Ii,sy("common-errors-unexpected")),console.error(g);return}if(Ge(h)){let g=Ua.fromApplication({metadata:Ft(Se({},p),{[it.id]:h,[it.vectorMapId]:h,[it.version]:0,[it.userRole]:"owner"}),geoJson:a});g.addLayerToMap(u),o(Ln,x=>x.concat(g)),o($s,g.getId())}Md(o)}})),t=Rr(({snapshot:n,set:o})=>()=>Nt(void 0,null,function*(){let i=yield n.getPromise(Fa);if(i){let{selectedLayer:a}=yield n.getPromise(Xp),u=yield n.getPromise(wr),p=yield n.getPromise(Ys),h=yield n.getPromise(Jn),g=yield n.getPromise(ba),x=gNr(a.getMetadata()),b=i.getAll(),T=(0,pae.default)(g,b)?null:b,A=!(0,pae.default)(x,p),L=null;oq(h)&&A&&(L=eot(p));let P=null;try{P=yield TYe(h.id,T,L,h.version)}catch(k){if(k.response){if(k.response.status===401){o(Ii,sy("common-errors-http-401"));return}if(k.response.status===403){o(Ii,sy("common-errors-http-403"));return}if(k.response.status===409){o(Ii,sy("geojson-draw-version-conflict"));return}if(k.response.status===422){o(Ii,sy("geojson-draw-error-invalid-input"));return}}o(Ii,sy("common-errors-unexpected")),console.error(k);return}Ge(P)&&Ge(u)&&Ge(a)&&(a.setDataOnMap(u,b),a.updateMetadata(it.version,P),Object.keys(p).forEach(k=>{a.updateMetadata(k,p[k])}),o(Xb,Date.now()),Md(o))}})),r=Rr(({snapshot:n,set:o})=>()=>Nt(void 0,null,function*(){let i=yield n.getPromise(Fa);if(i){let{selectedLayer:a}=yield n.getPromise(Xp),u=yield n.getPromise(wr),p=yield n.getPromise(Ys);if(Ge(u)&&Ge(a)){let h=i.getAll();a.setDataOnMap(u,h),Object.keys(p).forEach(g=>{a.updateMetadata(g,p[g])}),o(Xb,Date.now()),Md(o)}}}));return Rr(({snapshot:n})=>()=>Nt(void 0,null,function*(){let o=yield n.getPromise(Jn);o!==null&&(o.type===Hi.REMOTE?o.id===null?yield e():yield t():yield r())}))},tot=vNr;var Xi=Z(we(),1),M8=Z(xt(),1);var U1=Z(we(),1);var dae=hr.getSettings().LANGUAGE_CODE===mv.DE?"de-DE":"en-US",rot=new Intl.PluralRules(dae),not=new Intl.NumberFormat(dae,{signDisplay:"exceptZero"}),yNr=new Intl.DateTimeFormat(dae,{hour:"2-digit",minute:"2-digit",hour12:!1,day:"2-digit",month:"2-digit",year:"numeric"});function oot(e,t="de"){let r=yNr.formatToParts(e),n={hour:r.find(o=>o.type==="hour").value,minute:r.find(o=>o.type==="minute").value,day:r.find(o=>o.type==="day").value,month:r.find(o=>o.type==="month").value,year:r.find(o=>o.type==="year").value};return t==="de"?`${n.hour}:${n.minute} Uhr ${n.day}.${n.month}.${n.year}`:`${n.hour}:${n.minute} o'clock ${n.day}.${n.month}.${n.year}`}var I8=Z(xt(),1),iot=({count:e,id:t,formatFunction:r})=>{let n=(0,U1.useMemo)(()=>r?r(e):not.format(e),[e]),o=(0,U1.useMemo)(()=>rot.select(e)==="one"?de(`geojson-control-bar-${t}`):de(`geojson-control-bar-${t}-plural`),[e,t]);return U1.default.createElement("span",{className:t},U1.default.createElement("span",{className:"bold"},n)," ",U1.default.createElement("span",null,o))};iot.propTypes={count:I8.default.number,id:I8.default.string,formatFunction:I8.default.func};var T8=iot;var _Nr=e=>`x${e}`,aot=({onUpdateViewMode:e,formattedFeatureCount:t,viewState:r})=>{let n=vt(up);(0,Xi.useEffect)(()=>{if(n===null)return;let i=n.addIds.length>0||n.deleteIds.length>0||Array.from(n.dirtyMap.values()).some(a=>a);e(i?jl.UNSAVED_FEATURE_CHANGES:jl.INITIAL)},[n]);let o=(0,Xi.useMemo)(()=>n?Array.from(n.dirtyMap.values()).filter(i=>i).length:0,[n==null?void 0:n.dirtyMap]);return Xi.default.createElement("div",{className:"control-bar-main"},Xi.default.createElement("div",{className:"control-bar-content"},r===jl.UNSAVED_FEATURE_CHANGES&&Xi.default.createElement(Xi.default.Fragment,null,Xi.default.createElement(T8,{count:n.addIds.length,id:"new"}),Xi.default.createElement("span",{className:"separator"}),Xi.default.createElement(T8,{count:-n.deleteIds.length,id:"deleted"}),Xi.default.createElement("span",{className:"separator"}),Xi.default.createElement(T8,{count:o,id:"changed",formatFunction:_Nr})),r===jl.SHOW_FEATURE_COUNT&&Xi.default.createElement(Xi.default.Fragment,null,Xi.default.createElement("span",{className:"bold"},t)," ",de("geojson-control-bar-hint-features-present")),r===jl.NO_TITLE&&Xi.default.createElement("span",{className:"bold"},de("geojson-control-bar-hint-add-title")),r===jl.NO_FEATURES&&Xi.default.createElement("span",{className:"bold"},de("geojson-control-bar-hint-add-feature"))))};aot.propTypes={viewState:M8.default.number.isRequired,onUpdateViewMode:M8.default.func.isRequired,formattedFeatureCount:M8.default.string};var sot=(0,Xi.memo)(aot);var C8=Z(we(),1);var lot=Z(xt(),1);var uot=({onClick:e})=>{let t=vt(_v),r=vt(Jn);return(r==null?void 0:r.type)===Hi.REMOTE?C8.default.createElement(mn,{disabled:!vZe(r),className:"control-bar-layer-buttons--button layer-history-button",onClick:e,title:de("geojson-control-bar-history-btn-title")},C8.default.createElement("span",{className:Et("control-bar-layer-buttons--badge",t!==null&&"in")}),C8.default.createElement(qr,{name:"clock"})):null};uot.propTypes={onClick:lot.default.func.isRequired};var cot=uot;var SD=Z(we(),1),fot=Z(xt(),1);var pot=({onClick:e})=>{let t=vt(Jn),{type:r}=t,n=(0,SD.useMemo)(()=>vA(t)||gA(t),[t]);return r===Hi.REMOTE&&n?SD.default.createElement(mn,{className:"control-bar-layer-buttons--button layer-roles-button",onClick:e,title:de("geojson-control-bar-roles-btn-title")},SD.default.createElement(qr,{name:"user-roles"})):null};pot.propTypes={onClick:fot.default.func.isRequired};var dot=pot;var Ld=Z(we(),1);var ly=en({key:"geoJsonFeatureDrawState",default:null}),A8=en({key:"undoStylePropertiesState",default:[]}),xNr=()=>{let[e,t]=Nn(ly),{handleDeleteFeature:r,handleUpdateFeature:n}=S8(),o=Rr(({snapshot:h})=>(A,L,P)=>Nt(void 0,[A,L,P],function*({addOrUpdateProperties:g,removeProperties:x},b,T){let k=yield h.getPromise(Fa),q=yield h.getPromise(ly),U=Object.assign({},q);try{let{properties:H}=U,X=Object.assign({},H);for(let me of x)delete X[me];for(let{key:me,value:ue}of g)X[me]=ue;U.properties=X;let ee=k.get(U.id),{geometry:ne}=ee;U.geometry=ne,n(U),k.add(U),Ge(b)&&typeof b=="function"&&b()}catch(H){Ge(T)&&typeof T=="function"&&T(H)}}),[]),i=Rr(({snapshot:h,set:g})=>(x,b)=>Nt(void 0,null,function*(){let T=yield h.getPromise(Fa),A=yield h.getPromise(ly),{id:L}=A,P=A.properties[x];g(A8,k=>[...k,[L,x,P]]),T.setFeatureProperty(L,x,b),T.add(T.get(L))}),[]),a=Rr(({snapshot:h})=>g=>Nt(void 0,null,function*(){let x=yield h.getPromise(Fa),b=yield h.getPromise(ly),{id:T}=b;x.delete(T),r(T),Ge(g)&&typeof g=="function"&&g()}),[]),u=Rr(({snapshot:h,set:g})=>()=>Nt(void 0,null,function*(){let x=yield h.getPromise(A8),b=yield h.getPromise(Fa);for(let T of x)b.setFeatureProperty(...T);g(A8,[])}),[]),p=Rr(({snapshot:h,set:g})=>(...A)=>Nt(void 0,[...A],function*({skipPanelState:x,skipResetPreview:b,skipDeselect:T}={skipResetPreview:!1,skipPanelState:!1,skipDeselect:!1}){if(!T){let L=yield h.getPromise(Fa);Ge(L)&&L.changeMode("simple_select",{featureIds:[]})}b||u(),x||g(la,ko.NONE),g(A8,[]),g(ly,null)}),[u]);return{geoJsonFeature:e,setFeature:t,resetFeature:p,resetFeaturePreview:u,saveFeature:o,saveFeaturePreview:i,deleteFeature:a}},B1=xNr;var hot="user_",mot={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},D8={DIRECT_SELECT:"direct_select",SIMPLE_SELECT:"simple_select",DRAW_POLYGON:"draw_polygon",DRAW_LINE_STRING:"draw_line_string"},bNr=e=>{let{source:t}=e,{properties:r}=e,{meta:n,mode:o}=r,i=(t===mot.COLD||t===mot.HOT)&&n==="feature",a=o===D8.DIRECT_SELECT||o===D8.SIMPLE_SELECT;return i&&a},wNr=e=>{let{properties:t,type:r,geometry:n}=e,{id:o}=t,i=Object.entries(t).filter(([a])=>a.startsWith(hot)).map(([a,u])=>[a.slice(hot.length),u]);return{id:o,geometry:n,properties:Object.fromEntries(i),type:r}},ENr=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},SNr=2,INr=()=>{let{setFeature:e,resetFeature:t,resetFeaturePreview:r}=B1(),n=vt(la),o=(0,Ld.useRef)(!1),i=Rr(({snapshot:x,set:b})=>T=>Nt(void 0,null,function*(){let A=yield x.getPromise(wr),L=yield x.getPromise(Fa),P=yield x.getPromise(ly),{point:k}=T,q=ENr(k,SNr),U=A.queryRenderedFeatures(q).filter(bNr).at(0);if(Ge(U)){let{id:H}=U.properties;if((P==null?void 0:P.id)===H)return;r(),e(wNr(U)),b(la,ko.FEATURE)}else Ge(P)&&!o.current&&([D8.DRAW_LINE_STRING,D8.DRAW_POLYGON].includes(L.getMode())?t({skipDeselect:!0}):t()),o.current=!1}),[e,t,r]),a=(0,Ld.useCallback)(()=>{t()},[t]),u=Rr(({set:x})=>b=>{o.current=!0;let T=b.features[0];e(T),x(la,ko.FEATURE)},[e]),p=Rr(({snapshot:x})=>()=>Nt(void 0,null,function*(){let b=yield x.getPromise(wr);Ge(b)&&(b.on("click",i),b.on("draw.delete",a),b.on("draw.create",u))}),[]),h=Rr(({snapshot:x})=>()=>Nt(void 0,null,function*(){let b=yield x.getPromise(wr);Ge(b)&&(b.off("click",i),b.off("draw.delete",a),b.off("draw.create",u))}),[]),g=Rr(({snapshot:x})=>b=>Nt(void 0,null,function*(){let T=yield x.getPromise(ly);Ge(T)&&b!==ko.FEATURE&&t({skipPanelState:!0})}),[t]);return(0,Ld.useEffect)(()=>(p(),()=>{h()}),[]),(0,Ld.useEffect)(()=>{g(n)},[n,g]),Ld.default.createElement(Ld.default.Fragment,null)},got=INr;var vot=got;var Pd=Z(we(),1),ID=Z(xt(),1);var yot=({onClose:e,onSave:t,onDiscard:r,show:n})=>{let o=(0,Pd.useCallback)(()=>{t().finally(()=>{e()})},[t,e]);return Pd.default.createElement(af,{isOpen:n,title:de("geojson-discard-modal-title"),modalClassName:"vkf-discard-dialog",onClose:e,renderContent:()=>Pd.default.createElement(Pd.default.Fragment,null,Pd.default.createElement("p",null,de("geojson-discard-modal-description")),Pd.default.createElement("div",{className:"discard-modal-buttons"},Pd.default.createElement(mn,{type:"discard",onClick:r},de("geojson-discard-modal-discard-button")),Pd.default.createElement(mn,{type:"save",onClick:o},de("geojson-discard-modal-save-button"))))})};yot.propTypes={onClose:ID.default.func.isRequired,onDiscard:ID.default.func.isRequired,onSave:ID.default.func.isRequired,show:ID.default.bool.isRequired};var _ot=yot;var jd=Z(we(),1);var cp=Z(we());var TNr=(0,cp.createContext)(null),hae={didCatch:!1,error:null},BE=class extends cp.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=hae}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){let{error:t}=this.state;if(t!==null){for(var r,n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(hae)}}componentDidCatch(t,r){var n,o;(n=(o=this.props).onError)===null||n===void 0||n.call(o,t,r)}componentDidUpdate(t,r){let{didCatch:n}=this.state,{resetKeys:o}=this.props;if(n&&r.error!==null&&MNr(t.resetKeys,o)){var i,a;(i=(a=this.props).onReset)===null||i===void 0||i.call(a,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(hae)}}render(){let{children:t,fallbackRender:r,FallbackComponent:n,fallback:o}=this.props,{didCatch:i,error:a}=this.state,u=t;if(i){let p={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")u=r(p);else if(n)u=(0,cp.createElement)(n,p);else if(o!==void 0)u=o;else throw a}return(0,cp.createElement)(TNr.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},u)}};function MNr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Dae=Z(xt(),1);var xot=Z(we(),1);var VE={OWNER:"owner",EDITOR:"editor"},ul={OWNERS:"owners",EDITORS:"editors"};var bot=en({key:"vectorMapRolesQueryIdState",default:0}),CNr=lu({key:"vectorMapRolesQuery",get:t=>Nt(void 0,[t],function*({get:e}){e(bot);let{id:r,type:n}=e(Jn),o={editors:[],owners:[]};if(n===Hi.LOCAL||!Ge(r))return o;let i=yield DYe(r);for(let{user_id:a,role:u}of i)u===VE.EDITOR?o.editors.push(a):u===VE.OWNER?o.owners.push(a):console.warn(`Cannot map unknown role '${u}'`);return o})}),mae=()=>Rr(({set:t})=>()=>{t(bot,r=>r+1)},[]),ANr=()=>{let e=mae(),t=vt(CNr);return(0,xot.useEffect)(()=>()=>{e()},[]),t},wot=ANr;var Xo=Z(we(),1);var Bo=Z(we(),1);var DD=e=>e.type==="checkbox",V1=e=>e instanceof Date,ql=e=>e==null,Oot=e=>typeof e=="object",Ji=e=>!ql(e)&&!Array.isArray(e)&&Oot(e)&&!V1(e),Lot=e=>Ji(e)&&e.target?DD(e.target)?e.target.checked:e.target.value:e,DNr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Pot=(e,t)=>e.has(DNr(t)),NNr=e=>{let t=e.constructor&&e.constructor.prototype;return Ji(t)&&t.hasOwnProperty("isPrototypeOf")},xae=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Cu(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(xae&&(e instanceof Blob||e instanceof FileList))&&(r||Ji(e))){if(t=r?[]:{},!r&&!NNr(e))t=e;else for(let n in e)e.hasOwnProperty(n)&&(t[n]=Cu(e[n]));}else return e;return t}var R8=e=>Array.isArray(e)?e.filter(Boolean):[],zi=e=>e===void 0,nr=(e,t,r)=>{if(!t||!Ji(e))return r;let n=R8(t.split(/[,[\].]+?/)).reduce((o,i)=>ql(o)?o:o[i],e);return zi(n)||n===e?zi(e[t])?r:e[t]:n},hf=e=>typeof e=="boolean",bae=e=>/^\w*$/.test(e),kot=e=>R8(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ko=(e,t,r)=>{let n=-1,o=bae(t)?[t]:kot(t),i=o.length,a=i-1;for(;++n<i;){let u=o[n],p=r;if(n!==a){let h=e[u];p=Ji(h)||Array.isArray(h)?h:isNaN(+o[n+1])?{}:[]}if(u==="__proto__")return;e[u]=p,e=e[u]}return e},O8={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},fp={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},xm={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},ONr=Bo.default.createContext(null),wae=()=>Bo.default.useContext(ONr);var Rot=(e,t,r,n=!0)=>{let o={defaultValues:t._defaultValues};for(let i in e)Object.defineProperty(o,i,{get:()=>{let a=i;return t._proxyFormState[a]!==fp.all&&(t._proxyFormState[a]=!n||fp.all),r&&(r[a]=!0),e[a]}});return o},Au=e=>Ji(e)&&!Object.keys(e).length,jot=(e,t,r,n)=>{r(e);let a=e,{name:o}=a,i=wn(a,["name"]);return Au(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(u=>t[u]===(!n||fp.all))},CD=e=>Array.isArray(e)?e:[e],qot=(e,t,r)=>!e||!t||e===t||CD(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n)));function Eae(e){let t=Bo.default.useRef(e);t.current=e,Bo.default.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function LNr(e){let t=wae(),{control:r=t.control,disabled:n,name:o,exact:i}=e||{},[a,u]=Bo.default.useState(r._formState),p=Bo.default.useRef(!0),h=Bo.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),g=Bo.default.useRef(o);return g.current=o,Eae({disabled:n,next:x=>p.current&&qot(g.current,x.name,i)&&jot(x,h.current,r._updateFormState)&&u(Se(Se({},r._formState),x)),subject:r._subjects.state}),Bo.default.useEffect(()=>(p.current=!0,h.current.isValid&&r._updateValid(!0),()=>{p.current=!1}),[r]),Rot(a,r,h.current,!1)}var Rd=e=>typeof e=="string",zot=(e,t,r,n,o)=>Rd(e)?(n&&t.watch.add(e),nr(r,e,o)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),nr(r,i))):(n&&(t.watchAll=!0),r);function PNr(e){let t=wae(),{control:r=t.control,name:n,defaultValue:o,disabled:i,exact:a}=e||{},u=Bo.default.useRef(n);u.current=n,Eae({disabled:i,subject:r._subjects.values,next:g=>{qot(u.current,g.name,a)&&h(Cu(zot(u.current,r._names,g.values||r._formValues,!1,o)))}});let[p,h]=Bo.default.useState(r._getWatch(n,o));return Bo.default.useEffect(()=>r._removeUnmounted()),p}function kNr(e){let t=wae(),{name:r,disabled:n,control:o=t.control,shouldUnregister:i}=e,a=Pot(o._names.array,r),u=PNr({control:o,name:r,defaultValue:nr(o._formValues,r,nr(o._defaultValues,r,e.defaultValue)),exact:!0}),p=LNr({control:o,name:r,exact:!0}),h=Bo.default.useRef(o.register(r,Se(Ft(Se({},e.rules),{value:u}),hf(e.disabled)?{disabled:e.disabled}:{})));return Bo.default.useEffect(()=>{let g=o._options.shouldUnregister||i,x=(b,T)=>{let A=nr(o._fields,b);A&&A._f&&(A._f.mount=T)};if(x(r,!0),g){let b=Cu(nr(o._options.defaultValues,r));Ko(o._defaultValues,r,b),zi(nr(o._formValues,r))&&Ko(o._formValues,r,b)}return()=>{(a?g&&!o._state.action:g)?o.unregister(r):x(r,!1)}},[r,o,a,i]),Bo.default.useEffect(()=>{nr(o._fields,r)&&o._updateDisabledField({disabled:n,fields:o._fields,name:r,value:nr(o._fields,r)._f.value})},[n,r,o]),{field:Ft(Se({name:r,value:u},hf(n)||p.disabled?{disabled:p.disabled||n}:{}),{onChange:Bo.default.useCallback(g=>h.current.onChange({target:{value:Lot(g),name:r},type:O8.CHANGE}),[r]),onBlur:Bo.default.useCallback(()=>h.current.onBlur({target:{value:nr(o._formValues,r),name:r},type:O8.BLUR}),[r,o]),ref:Bo.default.useCallback(g=>{let x=nr(o._fields,r);x&&g&&(x._f.ref={focus:()=>g.focus(),select:()=>g.select(),setCustomValidity:b=>g.setCustomValidity(b),reportValidity:()=>g.reportValidity()})},[o._fields,r])}),formState:p,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!nr(p.errors,r)},isDirty:{enumerable:!0,get:()=>!!nr(p.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!nr(p.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!nr(p.validatingFields,r)},error:{enumerable:!0,get:()=>nr(p.errors,r)}})}}var Sae=e=>e.render(kNr(e));var RNr=(e,t,r,n,o)=>t?Ft(Se({},r[e]),{types:Ft(Se({},r[e]&&r[e].types?r[e].types:{}),{[n]:o||!0})}):{};var Eot=e=>({isOnSubmit:!e||e===fp.onSubmit,isOnBlur:e===fp.onBlur,isOnChange:e===fp.onChange,isOnAll:e===fp.all,isOnTouch:e===fp.onTouched}),Sot=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),AD=(e,t,r,n)=>{for(let i of r||Object.keys(e)){let a=nr(e,i);if(a){let o=a,{_f:u}=o,p=wn(o,["_f"]);if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],i)&&!n)return!0;if(u.ref&&t(u.ref,u.name)&&!n)return!0;if(AD(p,t))break}else if(Ji(p)&&AD(p,t))break}}},jNr=(e,t,r)=>{let n=CD(nr(e,r));return Ko(n,"root",t[r]),Ko(e,r,n),e},Iae=e=>e.type==="file",kd=e=>typeof e=="function",L8=e=>{if(!xae)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},N8=e=>Rd(e),Tae=e=>e.type==="radio",P8=e=>e instanceof RegExp,Iot={value:!1,isValid:!1},Tot={value:!0,isValid:!0},Fot=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!zi(e[0].attributes.value)?zi(e[0].value)||e[0].value===""?Tot:{value:e[0].value,isValid:!0}:Tot:Iot}return Iot},Mot={isValid:!1,value:null},Uot=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,Mot):Mot;function Cot(e,t,r="validate"){if(N8(e)||Array.isArray(e)&&e.every(N8)||hf(e)&&!e)return{type:r,message:N8(e)?e:"",ref:t}}var GE=e=>Ji(e)&&!P8(e)?e:{value:e,message:""},Aot=(e,t,r,n,o)=>Nt(void 0,null,function*(){let{ref:i,refs:a,required:u,maxLength:p,minLength:h,min:g,max:x,pattern:b,validate:T,name:A,valueAsNumber:L,mount:P,disabled:k}=e._f,q=nr(t,A);if(!P||k)return{};let U=a?a[0]:i,H=Te=>{n&&U.reportValidity&&(U.setCustomValidity(hf(Te)?"":Te||""),U.reportValidity())},X={},ee=Tae(i),ne=DD(i),me=ee||ne,ue=(L||Iae(i))&&zi(i.value)&&zi(q)||L8(i)&&i.value===""||q===""||Array.isArray(q)&&!q.length,Me=RNr.bind(null,A,r,X),ke=(Te,Ee,Ze,Qe=xm.maxLength,Fe=xm.minLength)=>{let ze=Te?Ee:Ze;X[A]=Se({type:Te?Qe:Fe,message:ze,ref:i},Me(Te?Qe:Fe,ze))};if(o?!Array.isArray(q)||!q.length:u&&(!me&&(ue||ql(q))||hf(q)&&!q||ne&&!Fot(a).isValid||ee&&!Uot(a).isValid)){let{value:Te,message:Ee}=N8(u)?{value:!!u,message:u}:GE(u);if(Te&&(X[A]=Se({type:xm.required,message:Ee,ref:U},Me(xm.required,Ee)),!r))return H(Ee),X}if(!ue&&(!ql(g)||!ql(x))){let Te,Ee,Ze=GE(x),Qe=GE(g);if(!ql(q)&&!isNaN(q)){let Fe=i.valueAsNumber||q&&+q;ql(Ze.value)||(Te=Fe>Ze.value),ql(Qe.value)||(Ee=Fe<Qe.value)}else{let Fe=i.valueAsDate||new Date(q),ze=st=>new Date(new Date().toDateString()+" "+st),Ne=i.type=="time",et=i.type=="week";Rd(Ze.value)&&q&&(Te=Ne?ze(q)>ze(Ze.value):et?q>Ze.value:Fe>new Date(Ze.value)),Rd(Qe.value)&&q&&(Ee=Ne?ze(q)<ze(Qe.value):et?q<Qe.value:Fe<new Date(Qe.value))}if((Te||Ee)&&(ke(!!Te,Ze.message,Qe.message,xm.max,xm.min),!r))return H(X[A].message),X}if((p||h)&&!ue&&(Rd(q)||o&&Array.isArray(q))){let Te=GE(p),Ee=GE(h),Ze=!ql(Te.value)&&q.length>+Te.value,Qe=!ql(Ee.value)&&q.length<+Ee.value;if((Ze||Qe)&&(ke(Ze,Te.message,Ee.message),!r))return H(X[A].message),X}if(b&&!ue&&Rd(q)){let{value:Te,message:Ee}=GE(b);if(P8(Te)&&!q.match(Te)&&(X[A]=Se({type:xm.pattern,message:Ee,ref:i},Me(xm.pattern,Ee)),!r))return H(Ee),X}if(T){if(kd(T)){let Te=yield T(q,t),Ee=Cot(Te,U);if(Ee&&(X[A]=Se(Se({},Ee),Me(xm.validate,Ee.message)),!r))return H(Ee.message),X}else if(Ji(T)){let Te={};for(let Ee in T){if(!Au(Te)&&!r)break;let Ze=Cot((yield T[Ee](q,t)),U,Ee);Ze&&(Te=Se(Se({},Ze),Me(Ee,Ze.message)),H(Ze.message),r&&(X[A]=Te))}if(!Au(Te)&&(X[A]=Se({ref:U},Te),!r))return X}}return H(!0),X});function qNr(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=zi(e)?n++:e[t[n++]];return e}function zNr(e){for(let t in e)if(e.hasOwnProperty(t)&&!zi(e[t]))return!1;return!0}function Sa(e,t){let r=Array.isArray(t)?t:bae(t)?[t]:kot(t),n=r.length===1?e:qNr(e,r),o=r.length-1,i=r[o];return n&&delete n[i],o!==0&&(Ji(n)&&Au(n)||Array.isArray(n)&&zNr(n))&&Sa(e,r.slice(0,-1)),e}var gae=()=>{let e=[];return{get observers(){return e},next:o=>{for(let i of e)i.next&&i.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(i=>i!==o)}}),unsubscribe:()=>{e=[]}}},_ae=e=>ql(e)||!Oot(e);function uy(e,t){if(_ae(e)||_ae(t))return e===t;if(V1(e)&&V1(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o of r){let i=e[o];if(!n.includes(o))return!1;if(o!=="ref"){let a=t[o];if(V1(i)&&V1(a)||Ji(i)&&Ji(a)||Array.isArray(i)&&Array.isArray(a)?!uy(i,a):i!==a)return!1}}return!0}var Bot=e=>e.type==="select-multiple",FNr=e=>Tae(e)||DD(e),vae=e=>L8(e)&&e.isConnected,Vot=e=>{for(let t in e)if(kd(e[t]))return!0;return!1};function k8(e,t={}){let r=Array.isArray(e);if(Ji(e)||r)for(let n in e)Array.isArray(e[n])||Ji(e[n])&&!Vot(e[n])?(t[n]=Array.isArray(e[n])?[]:{},k8(e[n],t[n])):ql(e[n])||(t[n]=!0);return t}function Got(e,t,r){let n=Array.isArray(e);if(Ji(e)||n)for(let o in e)Array.isArray(e[o])||Ji(e[o])&&!Vot(e[o])?zi(t)||_ae(r[o])?r[o]=Array.isArray(e[o])?k8(e[o],[]):Se({},k8(e[o])):Got(e[o],ql(t)?{}:t[o],r[o]):r[o]=!uy(e[o],t[o]);return r}var TD=(e,t)=>Got(e,t,k8(t)),Hot=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>zi(e)?e:t?e===""?NaN:e&&+e:r&&Rd(e)?new Date(e):n?n(e):e;function yae(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return Iae(t)?t.files:Tae(t)?Uot(e.refs).value:Bot(t)?[...t.selectedOptions].map(({value:r})=>r):DD(t)?Fot(e.refs).value:Hot(zi(t.value)?e.ref.value:t.value,e)}var UNr=(e,t,r,n)=>{let o={};for(let i of e){let a=nr(t,i);a&&Ko(o,i,a._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},MD=e=>zi(e)?e:P8(e)?e.source:Ji(e)?P8(e.value)?e.value.source:e.value:e,Dot="AsyncFunction",BNr=e=>(!e||!e.validate)&&!!(kd(e.validate)&&e.validate.constructor.name===Dot||Ji(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Dot)),VNr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Not(e,t,r){let n=nr(e,r);if(n||bae(r))return{error:n,name:r};let o=r.split(".");for(;o.length;){let i=o.join("."),a=nr(t,i),u=nr(e,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};o.pop()}return{name:r}}var GNr=(e,t,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,HNr=(e,t)=>!R8(nr(e,t)).length&&Sa(e,t),WNr={mode:fp.onSubmit,reValidateMode:fp.onChange,shouldFocusError:!0};function $Nr(e={}){let t=Se(Se({},WNr),e),r={submitCount:0,isDirty:!1,isLoading:kd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},o=Ji(t.defaultValues)||Ji(t.values)?Cu(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Cu(o),a={action:!1,mount:!1,watch:!1},u={mount:new Set,unMount:new Set,array:new Set,watch:new Set},p,h=0,g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:gae(),array:gae(),state:gae()},b=Eot(t.mode),T=Eot(t.reValidateMode),A=t.criteriaMode===fp.all,L=ce=>qe=>{clearTimeout(h),h=setTimeout(ce,qe)},P=ce=>Nt(this,null,function*(){if(!t.disabled&&(g.isValid||ce)){let qe=t.resolver?Au((yield me()).errors):yield Me(n,!0);qe!==r.isValid&&x.state.next({isValid:qe})}}),k=(ce,qe)=>{!t.disabled&&(g.isValidating||g.validatingFields)&&((ce||Array.from(u.mount)).forEach(Ue=>{Ue&&(qe?Ko(r.validatingFields,Ue,qe):Sa(r.validatingFields,Ue))}),x.state.next({validatingFields:r.validatingFields,isValidating:!Au(r.validatingFields)}))},q=(ce,qe=[],Ue,ht,yt=!0,mt=!0)=>{if(ht&&Ue&&!t.disabled){if(a.action=!0,mt&&Array.isArray(nr(n,ce))){let _t=Ue(nr(n,ce),ht.argA,ht.argB);yt&&Ko(n,ce,_t)}if(mt&&Array.isArray(nr(r.errors,ce))){let _t=Ue(nr(r.errors,ce),ht.argA,ht.argB);yt&&Ko(r.errors,ce,_t),HNr(r.errors,ce)}if(g.touchedFields&&mt&&Array.isArray(nr(r.touchedFields,ce))){let _t=Ue(nr(r.touchedFields,ce),ht.argA,ht.argB);yt&&Ko(r.touchedFields,ce,_t)}g.dirtyFields&&(r.dirtyFields=TD(o,i)),x.state.next({name:ce,isDirty:Te(ce,qe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ko(i,ce,qe)},U=(ce,qe)=>{Ko(r.errors,ce,qe),x.state.next({errors:r.errors})},H=ce=>{r.errors=ce,x.state.next({errors:r.errors,isValid:!1})},X=(ce,qe,Ue,ht)=>{let yt=nr(n,ce);if(yt){let mt=nr(i,ce,zi(Ue)?nr(o,ce):Ue);zi(mt)||ht&&ht.defaultChecked||qe?Ko(i,ce,qe?mt:yae(yt._f)):Qe(ce,mt),a.mount&&P()}},ee=(ce,qe,Ue,ht,yt)=>{let mt=!1,_t=!1,Yt={name:ce};if(!t.disabled){let nt=!!(nr(n,ce)&&nr(n,ce)._f&&nr(n,ce)._f.disabled);if(!Ue||ht){g.isDirty&&(_t=r.isDirty,r.isDirty=Yt.isDirty=Te(),mt=_t!==Yt.isDirty);let zr=nt||uy(nr(o,ce),qe);_t=!!(!nt&&nr(r.dirtyFields,ce)),zr||nt?Sa(r.dirtyFields,ce):Ko(r.dirtyFields,ce,!0),Yt.dirtyFields=r.dirtyFields,mt=mt||g.dirtyFields&&_t!==!zr}if(Ue){let zr=nr(r.touchedFields,ce);zr||(Ko(r.touchedFields,ce,Ue),Yt.touchedFields=r.touchedFields,mt=mt||g.touchedFields&&zr!==Ue)}mt&&yt&&x.state.next(Yt)}return mt?Yt:{}},ne=(ce,qe,Ue,ht)=>{let yt=nr(r.errors,ce),mt=g.isValid&&hf(qe)&&r.isValid!==qe;if(e.delayError&&Ue?(p=L(()=>U(ce,Ue)),p(e.delayError)):(clearTimeout(h),p=null,Ue?Ko(r.errors,ce,Ue):Sa(r.errors,ce)),(Ue?!uy(yt,Ue):yt)||!Au(ht)||mt){let _t=Ft(Se(Se({},ht),mt&&hf(qe)?{isValid:qe}:{}),{errors:r.errors,name:ce});r=Se(Se({},r),_t),x.state.next(_t)}},me=ce=>Nt(this,null,function*(){k(ce,!0);let qe=yield t.resolver(i,t.context,UNr(ce||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return k(ce),qe}),ue=ce=>Nt(this,null,function*(){let{errors:qe}=yield me(ce);if(ce)for(let Ue of ce){let ht=nr(qe,Ue);ht?Ko(r.errors,Ue,ht):Sa(r.errors,Ue)}else r.errors=qe;return qe}),Me=(ht,yt,...mt)=>Nt(this,[ht,yt,...mt],function*(ce,qe,Ue={valid:!0}){for(let Yt in ce){let nt=ce[Yt];if(nt){let _t=nt,{_f:zr}=_t,on=wn(_t,["_f"]);if(zr){let pa=u.array.has(zr.name),da=nt._f&&BNr(nt._f);da&&g.validatingFields&&k([Yt],!0);let St=yield Aot(nt,i,A,t.shouldUseNativeValidation&&!qe,pa);if(da&&g.validatingFields&&k([Yt]),St[zr.name]&&(Ue.valid=!1,qe))break;!qe&&(nr(St,zr.name)?pa?jNr(r.errors,St,zr.name):Ko(r.errors,zr.name,St[zr.name]):Sa(r.errors,zr.name))}!Au(on)&&(yield Me(on,qe,Ue))}}return Ue.valid}),ke=()=>{for(let ce of u.unMount){let qe=nr(n,ce);qe&&(qe._f.refs?qe._f.refs.every(Ue=>!vae(Ue)):!vae(qe._f.ref))&&ge(ce)}u.unMount=new Set},Te=(ce,qe)=>!t.disabled&&(ce&&qe&&Ko(i,ce,qe),!uy(ft(),o)),Ee=(ce,qe,Ue)=>zot(ce,u,Se({},a.mount?i:zi(qe)?o:Rd(ce)?{[ce]:qe}:qe),Ue,qe),Ze=ce=>R8(nr(a.mount?i:o,ce,e.shouldUnregister?nr(o,ce,[]):[])),Qe=(ce,qe,Ue={})=>{let ht=nr(n,ce),yt=qe;if(ht){let mt=ht._f;mt&&(!mt.disabled&&Ko(i,ce,Hot(qe,mt)),yt=L8(mt.ref)&&ql(qe)?"":qe,Bot(mt.ref)?[...mt.ref.options].forEach(_t=>_t.selected=yt.includes(_t.value)):mt.refs?DD(mt.ref)?mt.refs.length>1?mt.refs.forEach(_t=>(!_t.defaultChecked||!_t.disabled)&&(_t.checked=Array.isArray(yt)?!!yt.find(Yt=>Yt===_t.value):yt===_t.value)):mt.refs[0]&&(mt.refs[0].checked=!!yt):mt.refs.forEach(_t=>_t.checked=_t.value===yt):Iae(mt.ref)?mt.ref.value="":(mt.ref.value=yt,mt.ref.type||x.values.next({name:ce,values:Se({},i)})))}(Ue.shouldDirty||Ue.shouldTouch)&&ee(ce,yt,Ue.shouldTouch,Ue.shouldDirty,!0),Ue.shouldValidate&&st(ce)},Fe=(ce,qe,Ue)=>{for(let ht in qe){let yt=qe[ht],mt=`${ce}.${ht}`,_t=nr(n,mt);(u.array.has(ce)||Ji(yt)||_t&&!_t._f)&&!V1(yt)?Fe(mt,yt,Ue):Qe(mt,yt,Ue)}},ze=(ce,qe,Ue={})=>{let ht=nr(n,ce),yt=u.array.has(ce),mt=Cu(qe);Ko(i,ce,mt),yt?(x.array.next({name:ce,values:Se({},i)}),(g.isDirty||g.dirtyFields)&&Ue.shouldDirty&&x.state.next({name:ce,dirtyFields:TD(o,i),isDirty:Te(ce,mt)})):ht&&!ht._f&&!ql(mt)?Fe(ce,mt,Ue):Qe(ce,mt,Ue),Sot(ce,u)&&x.state.next(Se({},r)),x.values.next({name:a.mount?ce:void 0,values:Se({},i)})},Ne=ce=>Nt(this,null,function*(){a.mount=!0;let qe=ce.target,Ue=qe.name,ht=!0,yt=nr(n,Ue),mt=()=>qe.type?yae(yt._f):Lot(ce),_t=Yt=>{ht=Number.isNaN(Yt)||V1(Yt)&&isNaN(Yt.getTime())||uy(Yt,nr(i,Ue,Yt))};if(yt){let Yt,nt,zr=mt(),on=ce.type===O8.BLUR||ce.type===O8.FOCUS_OUT,pa=!VNr(yt._f)&&!t.resolver&&!nr(r.errors,Ue)&&!yt._f.deps||GNr(on,nr(r.touchedFields,Ue),r.isSubmitted,T,b),da=Sot(Ue,u,on);Ko(i,Ue,zr),on?(yt._f.onBlur&&yt._f.onBlur(ce),p&&p(0)):yt._f.onChange&&yt._f.onChange(ce);let St=ee(Ue,zr,on,!1),Vr=!Au(St)||da;if(!on&&x.values.next({name:Ue,type:ce.type,values:Se({},i)}),pa)return g.isValid&&(e.mode==="onBlur"?on&&P():P()),Vr&&x.state.next(Se({name:Ue},da?{}:St));if(!on&&da&&x.state.next(Se({},r)),t.resolver){let{errors:Er}=yield me([Ue]);if(_t(zr),ht){let Qi=Not(r.errors,n,Ue),Ta=Not(Er,n,Qi.name||Ue);Yt=Ta.error,Ue=Ta.name,nt=Au(Er)}}else k([Ue],!0),Yt=(yield Aot(yt,i,A,t.shouldUseNativeValidation))[Ue],k([Ue]),_t(zr),ht&&(Yt?nt=!1:g.isValid&&(nt=yield Me(n,!0)));ht&&(yt._f.deps&&st(yt._f.deps),ne(Ue,nt,Yt,St))}}),et=(ce,qe)=>{if(nr(r.errors,qe)&&ce.focus)return ce.focus(),1},st=(Ue,...ht)=>Nt(this,[Ue,...ht],function*(ce,qe={}){let yt,mt,_t=CD(ce);if(t.resolver){let Yt=yield ue(zi(ce)?ce:_t);yt=Au(Yt),mt=ce?!_t.some(nt=>nr(Yt,nt)):yt}else ce?(mt=(yield Promise.all(_t.map(Yt=>Nt(this,null,function*(){let nt=nr(n,Yt);return yield Me(nt&&nt._f?{[Yt]:nt}:nt)})))).every(Boolean),!(!mt&&!r.isValid)&&P()):mt=yt=yield Me(n);return x.state.next(Ft(Se(Se({},!Rd(ce)||g.isValid&&yt!==r.isValid?{}:{name:ce}),t.resolver||!ce?{isValid:yt}:{}),{errors:r.errors})),qe.shouldFocus&&!mt&&AD(n,et,ce?_t:u.mount),mt}),ft=ce=>{let qe=Se({},a.mount?i:o);return zi(ce)?qe:Rd(ce)?nr(qe,ce):ce.map(Ue=>nr(qe,Ue))},Ye=(ce,qe)=>({invalid:!!nr((qe||r).errors,ce),isDirty:!!nr((qe||r).dirtyFields,ce),error:nr((qe||r).errors,ce),isValidating:!!nr(r.validatingFields,ce),isTouched:!!nr((qe||r).touchedFields,ce)}),tt=ce=>{ce&&CD(ce).forEach(qe=>Sa(r.errors,qe)),x.state.next({errors:ce?r.errors:{}})},lt=(ce,qe,Ue)=>{let ht=(nr(n,ce,{_f:{}})._f||{}).ref,zr=nr(r.errors,ce)||{},{ref:mt,message:_t,type:Yt}=zr,nt=wn(zr,["ref","message","type"]);Ko(r.errors,ce,Ft(Se(Se({},nt),qe),{ref:ht})),x.state.next({name:ce,errors:r.errors,isValid:!1}),Ue&&Ue.shouldFocus&&ht&&ht.focus&&ht.focus()},je=(ce,qe)=>kd(ce)?x.values.subscribe({next:Ue=>ce(Ee(void 0,qe),Ue)}):Ee(ce,qe,!0),ge=(ce,qe={})=>{for(let Ue of ce?CD(ce):u.mount)u.mount.delete(Ue),u.array.delete(Ue),qe.keepValue||(Sa(n,Ue),Sa(i,Ue)),!qe.keepError&&Sa(r.errors,Ue),!qe.keepDirty&&Sa(r.dirtyFields,Ue),!qe.keepTouched&&Sa(r.touchedFields,Ue),!qe.keepIsValidating&&Sa(r.validatingFields,Ue),!t.shouldUnregister&&!qe.keepDefaultValue&&Sa(o,Ue);x.values.next({values:Se({},i)}),x.state.next(Se(Se({},r),qe.keepDirty?{isDirty:Te()}:{})),!qe.keepIsValid&&P()},We=({disabled:ce,name:qe,field:Ue,fields:ht,value:yt})=>{if(hf(ce)&&a.mount||ce){let mt=ce?void 0:zi(yt)?yae(Ue?Ue._f:nr(ht,qe)._f):yt;Ko(i,qe,mt),ee(qe,mt,!1,!1,!0)}},Oe=(ce,qe={})=>{let Ue=nr(n,ce),ht=hf(qe.disabled)||hf(t.disabled);return Ko(n,ce,Ft(Se({},Ue||{}),{_f:Se(Ft(Se({},Ue&&Ue._f?Ue._f:{ref:{name:ce}}),{name:ce,mount:!0}),qe)})),u.mount.add(ce),Ue?We({field:Ue,disabled:hf(qe.disabled)?qe.disabled:t.disabled,name:ce,value:qe.value}):X(ce,!0,qe.value),Ft(Se(Se({},ht?{disabled:qe.disabled||t.disabled}:{}),t.progressive?{required:!!qe.required,min:MD(qe.min),max:MD(qe.max),minLength:MD(qe.minLength),maxLength:MD(qe.maxLength),pattern:MD(qe.pattern)}:{}),{name:ce,onChange:Ne,onBlur:Ne,ref:yt=>{if(yt){Oe(ce,qe),Ue=nr(n,ce);let mt=zi(yt.value)&&yt.querySelectorAll&&yt.querySelectorAll("input,select,textarea")[0]||yt,_t=FNr(mt),Yt=Ue._f.refs||[];if(_t?Yt.find(nt=>nt===mt):mt===Ue._f.ref)return;Ko(n,ce,{_f:Se(Se({},Ue._f),_t?{refs:[...Yt.filter(vae),mt,...(Array.isArray(nr(o,ce))?[{}]:[])],ref:{type:mt.type,name:ce}}:{ref:mt})}),X(ce,!1,void 0,mt)}else Ue=nr(n,ce,{}),Ue._f&&(Ue._f.mount=!1),(t.shouldUnregister||qe.shouldUnregister)&&!(Pot(u.array,ce)&&a.action)&&u.unMount.add(ce)}})},at=()=>t.shouldFocusError&&AD(n,et,u.mount),ot=ce=>{hf(ce)&&(x.state.next({disabled:ce}),AD(n,(qe,Ue)=>{let ht=nr(n,Ue);ht&&(qe.disabled=ht._f.disabled||ce,Array.isArray(ht._f.refs)&&ht._f.refs.forEach(yt=>{yt.disabled=ht._f.disabled||ce}))},0,!1))},Pt=(ce,qe)=>Ue=>Nt(this,null,function*(){let ht;if(Ue&&(Ue.preventDefault&&Ue.preventDefault(),Ue.persist&&Ue.persist()),t.disabled){qe&&(yield qe(Se({},r.errors),Ue));return}let yt=Cu(i);if(x.state.next({isSubmitting:!0}),t.resolver){let{errors:mt,values:_t}=yield me();r.errors=mt,yt=_t}else yield Me(n);if(Sa(r.errors,"root"),Au(r.errors)){x.state.next({errors:{}});try{yield ce(yt,Ue)}catch(mt){ht=mt}}else qe&&(yield qe(Se({},r.errors),Ue)),at(),setTimeout(at);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Au(r.errors)&&!ht,submitCount:r.submitCount+1,errors:r.errors}),ht)throw ht}),Mt=(ce,qe={})=>{nr(n,ce)&&(zi(qe.defaultValue)?ze(ce,Cu(nr(o,ce))):(ze(ce,qe.defaultValue),Ko(o,ce,Cu(qe.defaultValue))),qe.keepTouched||Sa(r.touchedFields,ce),qe.keepDirty||(Sa(r.dirtyFields,ce),r.isDirty=qe.defaultValue?Te(ce,Cu(nr(o,ce))):Te()),qe.keepError||(Sa(r.errors,ce),g.isValid&&P()),x.state.next(Se({},r)))},Dt=(ce,qe={})=>{let Ue=ce?Cu(ce):o,ht=Cu(Ue),yt=Au(ce),mt=yt?o:ht;if(qe.keepDefaultValues||(o=Ue),!qe.keepValues){if(qe.keepDirtyValues){let _t=new Set([...u.mount,...Object.keys(TD(o,i))]);for(let Yt of Array.from(_t))nr(r.dirtyFields,Yt)?Ko(mt,Yt,nr(i,Yt)):ze(Yt,nr(mt,Yt))}else{if(xae&&zi(ce))for(let _t of u.mount){let Yt=nr(n,_t);if(Yt&&Yt._f){let nt=Array.isArray(Yt._f.refs)?Yt._f.refs[0]:Yt._f.ref;if(L8(nt)){let zr=nt.closest("form");if(zr){zr.reset();break}}}}n={}}i=e.shouldUnregister?qe.keepDefaultValues?Cu(o):{}:Cu(mt),x.array.next({values:Se({},mt)}),x.values.next({values:Se({},mt)})}u={mount:qe.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!g.isValid||!!qe.keepIsValid||!!qe.keepDirtyValues,a.watch=!!e.shouldUnregister,x.state.next({submitCount:qe.keepSubmitCount?r.submitCount:0,isDirty:yt?!1:qe.keepDirty?r.isDirty:!!(qe.keepDefaultValues&&!uy(ce,o)),isSubmitted:qe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:yt?{}:qe.keepDirtyValues?qe.keepDefaultValues&&i?TD(o,i):r.dirtyFields:qe.keepDefaultValues&&ce?TD(o,ce):qe.keepDirty?r.dirtyFields:{},touchedFields:qe.keepTouched?r.touchedFields:{},errors:qe.keepErrors?r.errors:{},isSubmitSuccessful:qe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ae=(ce,qe)=>Dt(kd(ce)?ce(i):ce,qe);return{control:{register:Oe,unregister:ge,getFieldState:Ye,handleSubmit:Pt,setError:lt,_executeSchema:me,_getWatch:Ee,_getDirty:Te,_updateValid:P,_removeUnmounted:ke,_updateFieldArray:q,_updateDisabledField:We,_getFieldArray:Ze,_reset:Dt,_resetDefaultValues:()=>kd(t.defaultValues)&&t.defaultValues().then(ce=>{Ae(ce,t.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:ce=>{r=Se(Se({},r),ce)},_disableForm:ot,_subjects:x,_proxyFormState:g,_setErrors:H,get _fields(){return n},get _formValues(){return i},get _state(){return a},set _state(ce){a=ce},get _defaultValues(){return o},get _names(){return u},set _names(ce){u=ce},get _formState(){return r},set _formState(ce){r=ce},get _options(){return t},set _options(ce){t=Se(Se({},t),ce)}},trigger:st,register:Oe,handleSubmit:Pt,watch:je,setValue:ze,getValues:ft,reset:Ae,resetField:Mt,clearErrors:tt,unregister:ge,setError:lt,setFocus:(ce,qe={})=>{let Ue=nr(n,ce),ht=Ue&&Ue._f;if(ht){let yt=ht.refs?ht.refs[0]:ht.ref;yt.focus&&(yt.focus(),qe.shouldSelect&&kd(yt.select)&&yt.select())}},getFieldState:Ye}}function j8(e={}){let t=Bo.default.useRef(),r=Bo.default.useRef(),[n,o]=Bo.default.useState({isDirty:!1,isValidating:!1,isLoading:kd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:kd(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=Ft(Se({},$Nr(e)),{formState:n}));let i=t.current.control;return i._options=e,Eae({subject:i._subjects.state,next:a=>{jot(a,i._proxyFormState,i._updateFormState,!0)&&o(Se({},i._formState))}}),Bo.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Bo.default.useEffect(()=>{if(i._proxyFormState.isDirty){let a=i._getDirty();a!==n.isDirty&&i._subjects.state.next({isDirty:a})}},[i,n.isDirty]),Bo.default.useEffect(()=>{e.values&&!uy(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,o(a=>Se({},a))):i._resetDefaultValues()},[e.values,i]),Bo.default.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),Bo.default.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(Se({},i._formState))),i._removeUnmounted()}),Bo.default.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=Rot(n,i),t.current}var Cae=Z(xt(),1);var G1=Z(xt(),1),mf=Z(we(),1);var ND=Z(we(),1),OD=Z(xt(),1);var Wot=({className:e,value:t,onDeleteClick:r,disabled:n})=>ND.default.createElement("div",{className:`vkf-pill-root ${e}`},ND.default.createElement("span",{className:"value"},t," "),!n&&ND.default.createElement(mn,{className:"delete-button",onClick:()=>r(t),disabled:n},ND.default.createElement(qr,{name:"delete"})));Wot.propTypes={value:OD.default.string.isRequired,onDeleteClick:OD.default.func.isRequired,className:OD.default.string,disabled:OD.default.bool};var $ot=Wot;var Yot=$ot;var Zot=(0,mf.forwardRef)(function(t,r){let{name:n,onChange:o=()=>{},onBlur:i=()=>{},value:a=[],disabled:u=!1,placeholder:p=""}=t,[h,g]=(0,mf.useState)(a!=null?a:[]),x=(0,mf.useCallback)(T=>{if(!Ge(T))return;let A=[...h];A.splice(T,1),g(A),o(A)},[h]),b=(0,mf.useCallback)(T=>{var k;if(T.key!=="Enter")return;let A=(k=T.target.value)!=null?k:"";if(A===""||h.findIndex(q=>q===A)>-1)return;T.target.value="";let P=[...h,A];g(P),o(P)},[h]);return mf.default.createElement("div",{className:"multi-value-input-root"},mf.default.createElement("div",{className:"input-field"},h.map((T,A)=>mf.default.createElement(Yot,{className:"pill",key:T,value:T,onDeleteClick:()=>x(A),disabled:u})),mf.default.createElement("input",{className:"vkf-form-input",ref:r,name:n,onKeyDown:b,onBlur:i,disabled:u,placeholder:u?void 0:p})))});Zot.propTypes={name:G1.default.string.isRequired,value:G1.default.array,disabled:G1.default.bool,onChange:G1.default.func,onBlur:G1.default.func,placeholder:G1.default.string};var Kot=Zot;var Mae=Kot;var YNr=()=>Rr(({snapshot:t})=>r=>Nt(void 0,null,function*(){let{id:n,type:o}=yield t.getPromise(Jn);return o===Hi.LOCAL||!Ge(n)?Promise.resolve():NYe(n,r)}),[]),Xot=YNr;var ZNr={owners:VE.OWNER,editors:VE.EDITOR},Jot=(e,t)=>{let r={remove:[],create_or_update:[]};for(let o of Object.values(ul)){let i=ZNr[o];if(!Ge(i)||!Ge(e[o]))continue;let a=e[o].filter(p=>!t[o].includes(p)),u=t[o].filter(p=>!e[o].includes(p));a=a.map(p=>({user_id:p,role:i})),u=u.map(p=>({user_id:p,role:i})),r.create_or_update.push(...a),r.remove.push(...u)}let n=r.remove.filter(({user_id:o})=>r.create_or_update.findIndex(({user_id:u})=>u===o)===-1===-1);return r.remove=n,r};var Qot="vkf-geojson-roles-form",KNr="PLACEHOLDER",XNr=(e,t)=>{let r=t[ul.EDITORS],n=t[ul.OWNERS];for(let o of r)if(n.findIndex(a=>a===o)!==-1)return de("geojson-roles-form.error.duplicateRoles").replace(KNr,o);return!0},eit=e=>{let{onCancelClick:t=()=>{},onSubmitted:r=()=>{}}=e,[n,o]=(0,Xo.useState)(""),{handleSubmit:i,trigger:a,control:u,formState:{errors:p}}=j8(),h=wot(),g=Xot(),x=vt(Jn),b=(0,Xo.useMemo)(()=>!Ge(x.id),[x.id]),T=(0,Xo.useCallback)(L=>{let P=Jot(L,h);g(P).then(()=>{r()}).catch(k=>{if(console.log(k),k.response){if(k.response.status===401){o(de("common-errors-http-401"));return}if(k.response.status===403){o(de("common-errors-http-403"));return}}o(de("common-errors-unexpected"))})},[r]),A=(0,Xo.useCallback)(L=>{L.key==="Enter"&&Object.values(ul).includes(L.target.name)&&L.preventDefault()},[]);return Xo.default.createElement("div",{className:"vkf-geojson-roles-form-root"},Xo.default.createElement("div",{className:"intro-text"},b?de("geojson-roles-form-intro-unsaved"):de("geojson-roles-form-intro")),Xo.default.createElement("form",{id:Qot,onSubmit:i(T),onKeyDown:A},Xo.default.createElement("div",{className:Et("vkf-form-control",p[ul.OWNERS]&&"error")},Xo.default.createElement("label",{className:"vkf-form-label"},de("geojson-roles-owner")),Xo.default.createElement(Sae,{name:ul.OWNERS,control:u,defaultValue:h.owners,rules:{required:de("geojson-roles-form.error.required")},disabled:!gA(x),render:({field:L})=>Xo.default.createElement(Mae,Ft(Se({},L),{onChange:P=>{L.onChange(P),a(ul.EDITORS),o("")},readOnly:L.disabled,placeholder:de("geojson-roles-insert-username")}))}),p[ul.OWNERS]&&Xo.default.createElement("div",{className:"vkf-form-error"},p[ul.OWNERS].message)),Xo.default.createElement("div",{className:Et("vkf-form-control",p[ul.EDITORS]&&"error")},Xo.default.createElement("label",{className:"vkf-form-label"},de("geojson-roles-authors")),Xo.default.createElement(Sae,{name:ul.EDITORS,control:u,defaultValue:h.editors,disabled:!vA(x),rules:{validate:XNr},render:({field:L})=>Xo.default.createElement(Mae,Ft(Se({},L),{onChange:P=>{L.onChange(P),a(ul.EDITORS),o("")},readOnly:L.disabled,placeholder:de("geojson-roles-insert-username")}))}),p[ul.EDITORS]&&Xo.default.createElement("div",{className:"vkf-form-error"},p[ul.EDITORS].message))),n.length!==""&&Xo.default.createElement("div",{className:"error-message"},n),Xo.default.createElement("div",{className:"buttons"},Xo.default.createElement(mn,{form:Qot,disabled:!vA(x)&&!gA(x),buttonType:"submit",type:"save",className:"submit-button"},Xo.default.createElement(qr,{name:"save"}),de("geojson-roles-btn-save")),Xo.default.createElement(mn,{className:"cancel-button",type:"discard",onClick:t},Xo.default.createElement(qr,{name:"discard"}),de("geojson-cancel-btn"))))};eit.propTypes={onCancelClick:Cae.default.func,onSubmitted:Cae.default.func};var tit=eit;var rit=tit;var Aae=Z(xt(),1),q8=Z(we(),1),nit=({className:e,resetErrorBoundary:t})=>((0,q8.useEffect)(()=>()=>{t()},[t]),q8.default.createElement("div",{className:e},de("common-errors-unexpected")));nit.propTypes={className:Aae.default.string,resetErrorBoundary:Aae.default.func.isRequired};var oit=nit;var z8=oit;var iit=({show:e,onClose:t})=>{let r=mae(),n=(0,jd.useCallback)(()=>{t()},[t]);return jd.default.createElement(af,{isOpen:e,onClose:t,title:de("geojson-roles-modal-title"),renderContent:()=>jd.default.createElement(BE,{FallbackComponent:z8,onReset:r},jd.default.createElement(jd.Suspense,{fallback:jd.default.createElement("div",null,"Loading ...")},jd.default.createElement(rit,{onCancelClick:t,onSubmitted:n}))),modalClassName:"vkf-dialog-geojson-roles"})};iit.propTypes={show:Dae.default.bool,onClose:Dae.default.func};var ait=iit;var sit=ait;var lit=sit;var jl={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3,UNSAVED_FEATURE_CHANGES:4},HE={NONE:0,ROLES:1,DISCARD:2},uit=()=>{let e=Ar(Vc),t=Ar(la),{removeDraw:r}=fae(),n=tot(),{resetFeaturePreview:o}=B1(),i=vt(Jn),a=vt(Ys),u=vt(ba),[p,h]=(0,so.useState)(jl.INITIAL),[g,x]=(0,so.useState)(HE.NONE);p===jl.INITIAL?Ge(a[it.title])?u.features.length===0?h(jl.NO_FEATURES):h(jl.SHOW_FEATURE_COUNT):h(jl.NO_TITLE):p===jl.NO_TITLE&&Ge(a[it.title])&&(u.features.length===0?h(jl.NO_FEATURES):h(jl.SHOW_FEATURE_COUNT));let b=(0,so.useMemo)(()=>{var ne;let ee=(ne=a[it.title])!=null?ne:"";return ee===""?`[${de("geojson-featureview-no-title")}]`:ee},[a[it.title]]),T=(0,so.useMemo)(()=>Ge(a[it.title])&&a[it.title]!=="",[a[it.title]]),A=(0,so.useMemo)(()=>{let ee=u.features.length;return ee>1?`${ee} ${de("geojson-control-bar-feature-plural")}`:ee===1?`1 ${de("geojson-control-bar-feature")}`:`${de("geojson-control-bar-no-features")}`},[u]),L=(0,so.useCallback)(()=>{t(ko.METADATA)},[]),P=(0,so.useCallback)(()=>{t(ko.HISTORY)},[]),k=(0,so.useCallback)(()=>{x(HE.ROLES)},[]),q=(0,so.useCallback)(()=>{x(HE.NONE)},[]),U=(0,so.useCallback)(()=>(o(),n()),[o,n]),H=(0,so.useCallback)(()=>{r().then(()=>{e(Ws.STANDARD)}),q()},[r]),X=(0,so.useCallback)(()=>{x(HE.DISCARD)},[]);return so.default.createElement("div",{className:"vkf-geojson-control-bar-root"},so.default.createElement("div",{className:"control-bar-header"},so.default.createElement("div",{className:"control-bar-title"},b),so.default.createElement("div",{className:"control-bar-layer-buttons"},oq(i)&&so.default.createElement(mn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:L,title:de("geojson-control-bar-metadata-btn-title")},so.default.createElement(qr,{name:"metadata-panel"})),so.default.createElement(cot,{onClick:P}),so.default.createElement(dot,{onClick:k}))),so.default.createElement(sot,{onUpdateViewMode:h,viewState:p,formattedFeatureCount:A}),so.default.createElement("div",{className:"control-bar-footer"},so.default.createElement(mn,{className:"discard-button",onClick:X,type:"discard"},so.default.createElement(qr,{name:"discard"}),de("geojson-cancel-btn")),so.default.createElement(mn,{disabled:!T,className:"save-button",onClick:U,type:"save"},so.default.createElement(qr,{name:"save"}),de("geojson-save-btn"))),so.default.createElement(_ot,{show:g===HE.DISCARD,onSave:U,onDiscard:H,onClose:q}),so.default.createElement(lit,{show:g===HE.ROLES,onClose:q}))};uit.propTypes={};var cit=uit;var fit=cit;var oi=Z(we(),1);var qd=Z(we(),1),LD=Z(xt(),1);var pit=({show:e,onClose:t,onDelete:r,description:n})=>qd.default.createElement(af,{isOpen:e,onClose:t,title:de("geojson-deletemodal-title"),renderContent:()=>qd.default.createElement(qd.default.Fragment,null,qd.default.createElement("p",null,n),qd.default.createElement("div",{className:"delete-feature-modal-buttons"},qd.default.createElement(dA,{className:"delete-btn",onClick:r,type:"delete"},qd.default.createElement(qr,{name:"delete"}),de("geojson-deletemodal-delete-btn")),qd.default.createElement(dA,{className:"cancel-btn",onClick:t,type:"discard"},qd.default.createElement(qr,{name:"discard"}),de("geojson-cancel-btn")))),modalClassName:"vkf-delete-dialog"});pit.propTypes={show:LD.default.bool,onClose:LD.default.func,onDelete:LD.default.func,description:LD.default.string};var dit=pit;var F8=dit;var JNr=()=>{let e=Rr(({snapshot:n,set:o})=>()=>Nt(void 0,null,function*(){let{selectedLayer:i}=yield n.getPromise(Xp),a=i.getMetadata(it.vectorMapId),u=i.getId();yield MYe(a),o(Jp,null),o($s,null),o(Ln,p=>p.filter(h=>h.getId()!==u)),Md(o)})),t=Rr(({set:n})=>()=>Nt(void 0,null,function*(){Md(n)})),r=Rr(({snapshot:n,set:o})=>()=>Nt(void 0,null,function*(){let{selectedLayer:i}=yield n.getPromise(Xp),a=i.getId();o(Jp,null),o($s,null),o(Ln,u=>u.filter(p=>p.getId()!==a)),Md(o)}));return Rr(({snapshot:n})=>()=>Nt(void 0,null,function*(){let o=yield n.getPromise(Jn);if(!Ge(o))return;let{type:i,id:a}=o;i===Hi.REMOTE?Ge(a)?yield e():yield t():yield r()}))},hit=JNr;var cy=Z(we(),1),U8=Z(xt(),1);var mit=({description:e,onDeleteClick:t,buttonLabel:r})=>cy.default.createElement("div",{className:"danger-zone-root"},cy.default.createElement("p",{className:"text text-header"},"danger zone"),cy.default.createElement("div",{className:"danger-zone-content"},cy.default.createElement("p",{className:"text text-description"},e),cy.default.createElement(mn,{className:"delete-button",onClick:t,type:"delete"},cy.default.createElement(qr,{name:"delete"}),cy.default.createElement("p",{className:"text text-button"},r))));mit.propTypes={description:U8.default.string.isRequired,onDeleteClick:U8.default.func.isRequired,buttonLabel:U8.default.string.isRequired};var git=mit;var B8=git;var H1=Z(xt(),1),Xa=Z(we(),1);var QNr=e=>e===""||URL.canParse(e),Nae=({formId:e,data:t,onValidatedFormSubmit:r})=>{var h,g,x,b;let[n,o]=(0,Xa.useState)((h=t[it.thumbnailUrl])!=null?h:""),{register:i,handleSubmit:a,formState:{errors:u}}=j8(),p=(0,Xa.useCallback)(T=>o(T.target.value),[]);return Xa.default.createElement("form",{className:"geojson-metadata-form-root",id:e,onSubmit:a(r)},Xa.default.createElement("div",{className:"geojson-metadata-form-fields"},Xa.default.createElement("div",{className:Et("vkf-form-control",u[it.title]&&"error")},Xa.default.createElement("label",{className:"vkf-form-label",htmlFor:it.title},de("geojson-metadata-title")),Xa.default.createElement("input",Se({className:"vkf-form-input",placeholder:de("geojson-placeholder-title"),defaultValue:(g=t[it.title])!=null?g:""},i(it.title,{required:!0})))),Xa.default.createElement("div",{className:Et("vkf-form-control",u[it.description]&&"error")},Xa.default.createElement("label",{className:"vkf-form-label",htmlFor:it.description},de("geojson-metadata-description")),Xa.default.createElement("textarea",Se({className:"vkf-form-textarea",placeholder:de("geojson-placeholder-description"),defaultValue:(x=t[it.description])!=null?x:""},i(it.description)))),Xa.default.createElement("div",{className:Et("vkf-form-control",u[it.thumbnailUrl]&&"error")},Xa.default.createElement("label",{className:"vkf-form-label",htmlFor:it.thumbnailUrl},de("geojson-metadata-thumbnailUrl")),Xa.default.createElement("div",{className:"image-with-fallback-container"},Xa.default.createElement(CE,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),Xa.default.createElement("input",Se({className:"vkf-form-input",placeholder:de("geojson-placeholder-thumbnailUrl"),defaultValue:(b=t[it.thumbnailUrl])!=null?b:""},i(it.thumbnailUrl,{onBlur:p,validate:QNr}))))))};Nae.defaultPropTypes={};Nae.propTypes={onValidatedFormSubmit:H1.default.func.isRequired,formId:H1.default.string.isRequired,data:H1.default.shape({[it.title]:H1.default.string,[it.description]:H1.default.string,[it.thumbnailUrl]:H1.default.string})};var vit=Nae;var yit=vit;var _it="vkf-geojson-metadata-form",PD={INITIAL:0,DELETE_DIALOG:1},xit=()=>{let e=Ar(la),[t,r]=Nn(Ys),n=vt(Jn),o=hit(),[i,a]=(0,oi.useState)(PD.INITIAL),{introText:u,title:p}=(0,oi.useMemo)(()=>{if(!Ge(n))return{introText:"",title:""};let{type:L,id:P}=n,k={introText:de("geojson-metadata-panel-intro-edit"),title:de("geojson-metadata-panel-header-edit")},q={introText:de("geojson-metadata-panel-intro-create"),title:de("geojson-metadata-panel-header-create")};return L===Hi.REMOTE?Ge(P)?k:q:k},[n]),h=(0,oi.useMemo)(()=>{if(!Ge(n))return!1;let{type:L,id:P}=n;return L===Hi.REMOTE&&!Ge(P)},[n]),g=(0,oi.useCallback)(()=>{a(PD.INITIAL)},[]),x=(0,oi.useCallback)(()=>{o()},[o]),b=(0,oi.useCallback)(()=>{i!==PD.DELETE_DIALOG&&a(PD.DELETE_DIALOG)},[i]),T=(0,oi.useCallback)(()=>{e(ko.NONE)},[]),A=(0,oi.useCallback)(L=>{r(L),T()},[]);return oi.default.createElement("div",{className:"geojson-metadata-panel-root"},oi.default.createElement(cd,{title:p,onCloseClick:T}),oi.default.createElement("div",{className:"geojson-metadata-panel-content"},oi.default.createElement("div",{className:"introduction-text content-padding"},u),oi.default.createElement("div",{className:"metadata-form-container content-padding"},oi.default.createElement(yit,{formId:_it,data:t,onValidatedFormSubmit:A})),!h&&oi.default.createElement("div",{className:"danger-zone-container"},oi.default.createElement(B8,{description:de("geojson-metadata-panel-delete"),onDeleteClick:b,buttonLabel:de("geojson-metadata-panel-delete-btn")}))),oi.default.createElement("div",{className:"footer-container"},oi.default.createElement(mn,{className:"save-button",type:"save",buttonType:"submit",form:_it},oi.default.createElement(qr,{name:"save"}),de("geojson-apply-btn")),oi.default.createElement(mn,{className:"discard-button",onClick:T,type:"discard"},oi.default.createElement(qr,{name:"discard"}),de("geojson-cancel-btn"))),oi.default.createElement(F8,{show:i===PD.DELETE_DIALOG,onClose:g,onDelete:x,description:de("geojson-metadata-delete-vector")}))};xit.propTypes={};var bit=xit;var wit=bit;var Qr=Z(we(),1),pp=Z(xt(),1);var Is=Z(we(),1),WE=Z(xt(),1);var Eit=({existingFields:e,onAddField:t,onClose:r,isDisplayed:n,onError:o})=>{let[i,a]=(0,Is.useState)({key:"",value:""}),[u,p]=(0,Is.useState)({key:!1,value:!1}),h=(0,Is.useRef)(),g=L=>{let{name:P,value:k}=L.target;a(q=>Ft(Se({},q),{[P]:k}))},x=(0,Is.useCallback)(L=>{if(L.relatedTarget===h.current)return;let{key:P,value:k}=i,{isValid:q,errors:U}=Vrt(P,k,e);p(U),o(U),q&&(t({key:P.trim().toLowerCase(),value:k.trim().toLowerCase()}),a({key:"",value:""}))},[i,e,t]),b=()=>{r(),a({key:"",value:""}),p({key:!1,value:!1})},T=L=>{L.key==="Enter"&&L.target.blur()},A=(0,Is.useCallback)(L=>{L&&n&&L.focus()},[n]);return Is.default.createElement("div",{className:"new-field-root"},Is.default.createElement("div",{className:"label-section"},Is.default.createElement("input",{className:Et("geojson-feature-property-label",{error:u.key}),type:"text",name:"key",value:i.key,onChange:g,onBlur:x,onKeyDown:T,onFocus:()=>p(L=>({key:!1,value:L.value})),ref:A,placeholder:de("geojson-editfeature-input-placeholder")})),Is.default.createElement("div",{className:"input-section"},Is.default.createElement("input",{className:Et("geojson-feature-property-input",{error:u.value}),type:"text",name:"value",value:i.value,onChange:g,onBlur:x,onKeyDown:T,onFocus:()=>p(L=>({key:L.key,value:!1})),tabIndex:n?0:-1,placeholder:de("geojson-editfeature-label-placeholder")})),Is.default.createElement(mn,{className:"delete-button",type:"discard",onClick:b,ref:h},Is.default.createElement("span",null,de("geojson-featureview-delete-field-btn")),Is.default.createElement(qr,{name:"delete"})))};Eit.propTypes={existingFields:WE.default.array.isRequired,onAddField:WE.default.func.isRequired,onClose:WE.default.func.isRequired,isDisplayed:WE.default.bool,onError:WE.default.func};var Sit=Eit;var gf=Z(we(),1),W1=Z(xt(),1);var Oae="FF",Lae=e=>Number(e.toFixed(0)).toString(16).padStart(2,"0"),e5r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(",").map(n=>parseInt(n,10)).map(Lae).join("");return t?`#${r}${Oae}`:`#${r}`},t5r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(","),n=r.slice(0,3).map(i=>parseInt(i,10)).map(Lae).join(""),o=Lae(parseFloat(r[3])*255);return t?`#${n}${o}`:`#${n}`},r5r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.trim();if(r.startsWith("rgba"))return t5r(r,{useAlpha:t});if(r.startsWith("rgb"))return e5r(r,{useAlpha:t});if(r.startsWith("#"))if(e.length===4){let n=e.slice(1,3).map(o=>`${o}${o}`);return t?`#${n}${Oae}`:`#${n}`}else{if(e.length===7)return t?`${e}${Oae}`:e;if(e.length===9)return t?e:e.slice(0,7)}throw new Error("Unknown color format")},n5r=e=>{let t={blue:"#0000ff",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",yellow:"#ffff00"};if(!Ge(e)&&typeof e!="string")throw new Error("No input specified");let r=e.trim().toLowerCase();if(!Object.hasOwn(t,r))throw new Error("No matching legacy color found");return t[r]},Iit=e=>{let t=e;try{t=r5r(e)}catch(r){t=n5r(e)}return t};var Tit=({title:e,value:t,inputProps:r={},onChange:n,onBlur:o,id:i})=>{let a=(0,gf.useRef)(),u=(0,gf.useCallback)(x=>{let{type:b,min:T,max:A}=r,L=x;if(b==="number")L=Number.isNaN(Number.parseFloat(L))?1:parseFloat(L),L=Ge(T)?Math.max(T,L):L,L=Ge(A)?Math.min(A,L):L;else if(b==="color")try{L=Iit(L)}catch(P){L=zn[Ur.SYMBOL].COLOR}return L},[r]),p=(0,gf.useMemo)(()=>u(t),[t,u]),h=(0,gf.useCallback)(()=>{let x=u(a.current.value);o([e,x])},[o,u]),g=(0,gf.useCallback)(x=>{if(Ge(n)){let b=u(x.target.value);n([e,b])}},[u,n]);return gf.default.createElement("div",{className:"style-property-item"},gf.default.createElement("label",{htmlFor:"style-input",className:"geojson-feature-property-input"},e),gf.default.createElement("input",Ft(Se({className:"geojson-feature-property-input"},r),{defaultValue:p,onChange:g,onBlur:h,ref:a,key:i})))};Tit.propTypes={title:W1.default.string.isRequired,value:W1.default.any,inputProps:W1.default.object,onChange:W1.default.func,onBlur:W1.default.func,id:W1.default.string.isRequired};var Mit=Tit;var Ai=Z(we(),1),zd=Z(xt(),1);var Cit=({title:e,value:t,onChange:r,onBlur:n,onDelete:o,isHeaderEditable:i,existingFields:a,onError:u,id:p})=>{let[h,g]=(0,Ai.useState)({key:!1,value:!1}),x=(0,Ai.useMemo)(()=>e===ci.imgLink,[e]),b=(0,Ai.useRef)(),T=(0,Ai.useRef)(),A=()=>{let q=b.current.value,U=T.current.value,H={key:!1,value:!1},X=q!==e,ee=U==="",ne=X&&a.some(([ue])=>ue.toLowerCase()===q.toLowerCase());if(e===ci.time){if(U!==""){let ue=nC(U).valueOf();Number.isNaN(ue)?H={key:!1,value:!0}:U=ue}}else H={key:ne||q==="",value:i&&ee};g(H),u(H),!H.key&&!H.value&&(n([q,U]),g({key:!1,value:!1}))},L=q=>{q.key==="Enter"&&q.target.blur()},P=(0,Ai.useCallback)(q=>{Ge(r)&&r(q.target.value)},[r]),k=(0,Ai.useCallback)(()=>{Ge(o)&&o()},[o,h]);return Ai.default.createElement(Ai.default.Fragment,null,x&&Ai.default.createElement("div",{className:"none-style-property-item"},Ai.default.createElement("input",{className:"geojson-feature-property-label not-editable",defaultValue:de("geojson-featureview-image-title"),type:"text",tabIndex:"-1",readOnly:!0}),Ai.default.createElement(CE,{imageUrl:t,showPlaceholder:!0,imageAsPreview:!0})),Ai.default.createElement("div",{className:"none-style-property-item"},Ai.default.createElement("input",{className:Et("geojson-feature-property-label",i?"editable":"not-editable",{error:h.key}),onBlur:i?A:void 0,type:"text",defaultValue:e,readOnly:!i,tabIndex:i?0:-1,onKeyDown:i?L:void 0,ref:b,placeholder:de("geojson-editfeature-input-placeholder"),key:`header-${p}`}),e!==ci.time&&Ai.default.createElement("input",{className:Et("geojson-feature-property-input",{error:h.value}),defaultValue:t,onChange:P,onBlur:A,onKeyDown:L,ref:T,placeholder:de("geojson-editfeature-label-placeholder"),key:`value-${p}`}),e===ci.time&&Ai.default.createElement(kA,{className:Et("geojson-feature-property-input",{error:h.value}),value:t===""?"":Ju(new Date(t)),onBlur:A,onKeyDown:L,ref:T,placeholder:de("geojson-editfeature-input-placeholder-date"),key:`value-${p}`}),i&&Ai.default.createElement(mn,{className:"delete-button",type:"discard",onClick:k},Ai.default.createElement("p",null,de("geojson-featureview-delete-field-btn")),Ai.default.createElement(qr,{name:"delete"}))))};Cit.propTypes={title:zd.default.string.isRequired,value:zd.default.any,onChange:zd.default.func,onBlur:zd.default.func,onDelete:zd.default.func,isHeaderEditable:zd.default.bool,existingFields:zd.default.array,onError:zd.default.func,id:zd.default.string.isRequired};var Ait=Cit;var Pae=e=>{let{feature:t,onDelete:r,onClose:n,onSave:o,onSavePreview:i}=e,[a,u]=(0,Qr.useState)(Gie(t)),[p,h]=(0,Qr.useState)(Vie(t)),g=(0,Qr.useRef)(t.id);t.id!==g.current&&(u(Gie(t)),h(Vie(t)),g.current=t.id);let[x,b]=(0,Qr.useState)(!1),[T,A]=(0,Qr.useState)(!1),[L,P]=(0,Qr.useState)({}),k=(0,Qr.useCallback)(ke=>Te=>{h(Ee=>{let Ze=[...Ee];return Ze[ke]=Te,Ze}),i(Te)},[o]),q=(0,Qr.useCallback)(ke=>Te=>{u(Ee=>{let Ze=[...Ee];return Ze[ke]=Te,Ze})},[u]),U=(0,Qr.useCallback)(()=>{A(!0)},[]),H=(0,Qr.useCallback)(ke=>()=>{u(Te=>{let Ee=[...Te];return Ee.splice(ke,1),Ee}),P({})},[u]),X=(0,Qr.useCallback)(()=>{n({doRemoveFeatureState:!0})},[n]),ee=(0,Qr.useCallback)(()=>{let ke=Brt({oldProperties:t.properties,propertyFields:a,styleFields:p});o(ke)},[o,t,a,p]),ne=(0,Qr.useCallback)(()=>{b(ke=>!ke)},[]),me=(0,Qr.useCallback)(()=>{b(!1)},[b]),ue=(0,Qr.useCallback)(()=>{r(t),ne()},[r,t,ne]),Me=(0,Qr.useCallback)(ke=>{u(Te=>[...Te,[ke.key,ke.value]]),A(!1)},[u]);return Qr.default.createElement("div",{className:"geojson-feature-edit-panel-root vkf-geojson-feature-view-content full-height"},Qr.default.createElement(cd,{title:de("geojson-editview-header-text"),onCloseClick:n}),Qr.default.createElement("div",{className:"geojson-feature-edit-panel-content"},Qr.default.createElement("div",{className:"introduction-text"},de("geojson-editview-intro-text")),Qr.default.createElement("div",{className:"properties-container"},Qr.default.createElement("div",{className:"style-property-header"},Qr.default.createElement("p",{className:"header-text geojson-feature-property-label"},de("geojson-editfeature-style-header"))),Qr.default.createElement("div",{className:"style-properties-container"},p.map((ke,Te)=>{let[Ee,Ze]=ke,{inputProps:Qe}=V0[Ee];return Qr.default.createElement(Mit,{onChange:k(Te),onBlur:k(Te),key:`${Ee}-${t.id}`,title:Ee,inputProps:Qe,value:Ze,id:`${Ee}-${t.id}`})})),Qr.default.createElement("div",{className:"none-style-properties-container"},a.map((ke,Te)=>{var ze;let[Ee,Ze]=ke,Qe=Ge(gR[Ee]),Fe=(ze=gR[Ee])==null?void 0:ze.inputProps;return Qr.default.createElement(Ait,{onBlur:q(Te),key:`${Ee}-${t.id}`,isHeaderEditable:!Qe,title:Ee,inputProps:Fe,value:Ze,onDelete:Qe?void 0:H(Te),existingFields:a,onError:P,id:`${Ee}-${t.id}`})})),Qr.default.createElement("div",{className:"new-field-container"},Qr.default.createElement("div",{className:Et("new-fields",T&&"in")},Qr.default.createElement(Sit,{existingFields:a,onAddField:Me,onClose:()=>{A(!1),P({})},isDisplayed:T,onError:P})),Qr.default.createElement("div",{className:Et("new-field-button-container",!T&&"in")},Qr.default.createElement(mn,{className:"new-field-button",onClick:U,disabled:T||L.key||L.value},Qr.default.createElement(qr,{name:"add"}),Qr.default.createElement("p",{className:"geojson-feature-property-label"},de("geojson-editfeature-add-new-field-button")))))),Qr.default.createElement("div",{className:"danger-zone-container"},Qr.default.createElement(B8,{description:de("geojson-editfeature-danger-zone-title"),onDeleteClick:ne,buttonLabel:de("geojson-featureview-delete-btn")}))),Qr.default.createElement("div",{className:"footer-container"},Qr.default.createElement(mn,{className:"save-button",onClick:ee,type:"save",disabled:L.key||L.value||T},Qr.default.createElement(qr,{name:"save"}),de("geojson-apply-btn")),Qr.default.createElement(mn,{className:"discard-button",onClick:X,type:"discard"},Qr.default.createElement(qr,{name:"discard"}),de("geojson-cancel-btn"))),Qr.default.createElement(F8,{show:x,onClose:me,onDelete:ue,description:de("geojson-deletemodal-body")}))};Pae.defaultPropTypes={onSavePreview:()=>{}};Pae.propTypes={feature:pp.default.shape({id:pp.default.oneOfType([pp.default.number,pp.default.string]).isRequired,geometry:pp.default.object.isRequired,properties:pp.default.object.isRequired}).isRequired,onClose:pp.default.func.isRequired,onDelete:pp.default.func.isRequired,onSave:pp.default.func.isRequired,onSavePreview:pp.default.func};var Dit=Pae;var bm=Z(we(),1),$E=Z(xt(),1);var kae=({geoJsonFeature:e,saveFeature:t,saveFeaturePreview:r,deleteFeature:n,resetFeature:o})=>{let i=(0,bm.useCallback)(h=>{o(h)},[o]),a=(0,bm.useCallback)(h=>{t(h,()=>{i({skipResetPreview:!0})},()=>{console.error("The feature could not be saved"),i()})},[t,i]),u=(0,bm.useCallback)(([h,g])=>{r(h,g)},[r]),p=(0,bm.useCallback)(()=>{n(()=>i())},[n,i]);return bm.default.createElement(bm.default.Fragment,null,bm.default.createElement(Nit,{feature:e,onDelete:p,onClose:i,onSave:a,onSavePreview:u}))};kae.defaultPropTypes={saveFeaturePreview:()=>{}};kae.propTypes={geoJsonFeature:$E.default.object.isRequired,resetFeature:$E.default.func.isRequired,saveFeature:$E.default.func.isRequired,deleteFeature:$E.default.func.isRequired,saveFeaturePreview:$E.default.func};var Rae=kae;var Nit=Dit;var Ia=Z(we(),1);var jae=Z(we(),1);var $1=Z(xt(),1),dp=Z(we(),1);var Oit=()=>Rr(({snapshot:e,set:t})=>r=>Nt(void 0,null,function*(){let n=yield e.getPromise(Jn),o=yield e.getPromise(Fa),i=yield AYe(n.id,r);if(o){o.deleteAll().add(i.geojson);let a=new Map;i.geojson.features.forEach(u=>{a.set(u.id,!1)}),t(ba,i.geojson),t(up,{dirtyMap:a,deleteIds:[],addIds:[]}),t(_v,r===n.version?null:r)}}),[]);var Lit=({isSelected:e,version:t,isMostRecent:r})=>{let n=Oit(),o=(0,dp.useCallback)(()=>{n(t.version)},[n,t]);return dp.default.createElement("li",{className:Et("version-history-entry",r?"current-version":"older-version",e?"selected":""),key:t.version},dp.default.createElement("div",{className:"version-history-entry-content"},dp.default.createElement(dp.default.Fragment,null,dp.default.createElement("span",{className:"time"},oot(new Date(t.submitted))),dp.default.createElement("span",{className:"author"},t.created_by),!r||r&&!e?dp.default.createElement(mn,{className:"version-history-reset-button",onClick:o},dp.default.createElement(qr,{name:"clock"})):null)))};Lit.propTypes={isSelected:$1.default.bool,isMostRecent:$1.default.bool,version:$1.default.shape({version:$1.default.number,submitted:$1.default.string,created_by:$1.default.string}).isRequired};var Pit=Lit;var kit=en({key:"vectorMapVersionsQueryIdState",default:0}),o5r=lu({key:"vectorMapVersionsQuery",get:t=>Nt(void 0,[t],function*({get:e}){e(kit);let r=e(Jn);return!Ge(r)||r.type==="local"||r.id===null?null:yield CYe(r.id)})}),Rit=()=>Rr(({set:t})=>()=>{t(kit,r=>r+1)},[]),i5r=()=>vt(o5r),jit=i5r;var a5r=()=>{let e=vt(_v),t=jit();return t?jae.default.createElement("ul",{className:"version-history"},t.map((r,n)=>jae.default.createElement(Pit,{isMostRecent:n===0,isSelected:e===null?n===0:e===r.version,key:r.version,version:r}))):null},qit=a5r;var zit=()=>{let e=Ar(la),t=vt(Jn),r=Rit(),n=(0,Ia.useMemo)(()=>!Ge(t.id),[t.id]),o=(0,Ia.useMemo)(()=>n?de("geojson-metadata-panel-intro-history-unsaved"):de("geojson-metadata-panel-intro-history"),[n]),i=(0,Ia.useMemo)(()=>de("geojson-metadata-panel-header-history"),[]),a=(0,Ia.useCallback)(()=>{e(ko.NONE)},[]);return Ia.default.createElement("div",{className:"geojson-history-panel-root"},Ia.default.createElement(cd,{title:i,onCloseClick:a}),Ia.default.createElement("div",{className:"geojson-history-panel-content"},Ia.default.createElement("div",{className:"introduction-text"},o),Ia.default.createElement("div",{className:"history-list-container"},Ia.default.createElement(BE,{fallbackRender:({resetErrorBoundary:u})=>Ia.default.createElement(z8,{className:"error-fallback",resetErrorBoundary:u}),onReset:r},Ia.default.createElement(Ia.Suspense,{fallback:Ia.default.createElement("div",{className:"suspense-fallback"},"Loading...")},Ia.default.createElement(qit,null))))))};zit.propTypes={};var Fit=zit;var qae=()=>{let e=vt(la),t=B1(),r=(0,vf.useMemo)(()=>Ge(t.geoJsonFeature)?t:null,[t.geoJsonFeature]);return vf.default.createElement(vf.default.Fragment,null,vf.default.createElement("div",{className:"vkf-horizontal-layout-draw"},vf.default.createElement("div",{className:"geojson-control-bar-container"},vf.default.createElement(fit,null)),vf.default.createElement(DE,{className:"geojson-metadata-panel-container",Component:e===ko.HISTORY?Fit:wit,props:e===ko.METADATA||e===ko.HISTORY?{}:null}),vf.default.createElement(DE,{className:"geojson-feature-edit-panel-container",Component:Rae,props:e===ko.FEATURE?r:null})),vf.default.createElement(Qnt,null),vf.default.createElement(vot,null))};qae.propTypes={};var Ts=Z(we(),1);var Fi=Z(we(),1),H8=Z(xt(),1);var zae=Z(we(),1),Fae=Z(xt(),1);var Uit=({onClick:e})=>zae.default.createElement("button",{className:"vkf-toggle-search-button",onClick:e,title:"toggle search"},zae.default.createElement(nf,{name:"icon-search"}));Uit.propTypes={isOpen:Fae.default.bool,onClick:Fae.default.func};var Bit=Uit;var V8=Z(we(),1),G8=Z(xt(),1);var Uae=({disabled:e,onClick:t,isOpen:r})=>V8.default.createElement("button",{className:Et("vkf-toggle-search-result-list",r?"open":"closed",e&&"disabled"),disabled:e,onClick:t},V8.default.createElement("div",{className:"background"}),V8.default.createElement("div",{className:"chevron"}));Uae.propTypes={disabled:G8.default.bool,isOpen:G8.default.bool,onClick:G8.default.func};var Vit=({enableReopenResultList:e=!0,onToggleFacets:t,showFacets:r})=>{let n=vt(Kb),[o,i]=(0,Fi.useState)(!1),[a,u]=(0,Fi.useState)(!1),[p,h]=(0,Fi.useState)(!1),g=()=>{i(T=>!T)},x=()=>{u(T=>!T)};(0,Fi.useEffect)(()=>{n===0&&o?(i(!1),h(!0)):e&&n>0&&p&&(i(!0),h(!1))},[n]);let b=o?"show-search-result-list":"hide-search-result-list";return Fi.default.createElement(Fi.Fragment,null,Fi.default.createElement("div",{className:"vkf-search-header"},Fi.default.createElement("div",{className:"top-container"},Fi.default.createElement("div",{className:"result-summary"},n===0?de("mapsearch-found-no-maps"):`${n} ${de("mapsearch-found-maps")}`),Fi.default.createElement("div",{className:"controls-container"},Fi.default.createElement($6,{onClick:t,isOpen:r}),Fi.default.createElement(Bit,{onClick:x,isOpen:a}))),a&&Fi.default.createElement("div",{className:"bottom-container"},Fi.default.createElement(wz,{searchUrl:hr.getNominatimUrl()}),Fi.default.createElement(fz,null))),Fi.default.createElement(Uae,{disabled:n===0,onClick:g,isOpen:o}),Fi.default.createElement("div",{className:Et("vkf-search-result-container",b)},Fi.default.createElement(H6,{enableOverlayLayer:!1,DataProvider:K6,direction:"horizontal",itemSize:170,renderHeader:!1})))};Vit.propTypes={enableReopenResultList:H8.default.bool,onToggleFacets:H8.default.func,showFacets:H8.default.bool};var Git=Vit;var W8=Z(we(),1);var Bae=Z(xt(),1);var Hit=({buttonState:e,onClick:t})=>{let r=vt(Ln),n=r.length===0;return W8.default.createElement("button",{className:Et("vkf-toggle-layermanagement-button",!n&&e&&"opened",n&&"disabled"),disabled:n,onClick:t},!n&&W8.default.createElement("span",{className:"badge"},r.length),W8.default.createElement(nf,{name:"layers"}))};Hit.propTypes={buttonState:Bae.default.bool,onClick:Bae.default.func};var Wit=Hit;var $it=uz;var Yit=Z(we(),1),Zit=Z(xt(),1),Kit=({onCloseLayerManagement:e})=>{let t=vt(Ln);return(0,Yit.useEffect)(()=>{t.length===0&&e()},[t]),null};Kit.propTypes={onCloseLayerManagement:Zit.default.func.isRequired};var Xit=Kit;var s5r=()=>{let[e,t]=(0,Ts.useState)(!1),[r,n]=(0,Ts.useState)(!1),o=(0,Ts.useCallback)(()=>{n(!1)},[]),i=(0,Ts.useCallback)(()=>{n(u=>!u)},[]),a=()=>{t(u=>!u)};return Ts.default.createElement(Ts.default.Fragment,null,Ts.default.createElement(Xit,{onCloseLayerManagement:o}),Ts.default.createElement("div",{className:"vkf-vertical-layout"},Ts.default.createElement(Git,{onToggleFacets:a,showFacets:e}),Ts.default.createElement(Wit,{buttonState:r,onClick:i}),Ts.default.createElement("div",{className:Et("layermanagement-container",!r&&"closed")},Ts.default.createElement($it,{showControls:{showBadge:!1,showDynamicMapVisualization:!1,showHideButton:!0}}))),Ts.default.createElement(af,{modalClassName:"faceted-search-modal",onClose:a,renderContent:()=>Ts.default.createElement(k6,{georeferenceMode:!1}),isOpen:e,title:"Filter"}))},Vae=s5r;var yf=Z(we(),1),hp=Z(xt(),1);var kD=Z(we(),1),Jit=Z(Si(),1);var Fd=Z(we(),1);var l5r=(e,t)=>{let r=vt(wr),[n,o]=(0,Fd.useState)(null),[i,a]=Nn(u9e),u=(0,Fd.useRef)(null),p=(0,Fd.useCallback)(g=>{u.current&&!u.current.contains(g.target)&&a(cu.None)},[]),h=(0,Fd.useCallback)(()=>{a(g=>g===t?cu.None:t)},[t]);return(0,Fd.useEffect)(()=>{if(Ge(r)){let g=b=>{var T;((T=b.control)==null?void 0:T.id)===e&&o(b.control._container)},x=b=>{var T;((T=b.control)==null?void 0:T.id)===e&&o(null)};return r.on(xa.controlAdded,g),r.on(xa.controlRemoved,x),()=>{r.off(xa.controlAdded,g),r.off(xa.controlRemoved,x)}}},[r]),(0,Fd.useEffect)(()=>(i===t?document.addEventListener("mousedown",p):document.removeEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}),[i,t,p]),{baseMapControlEl:n,activeDialog:i,toggleDialog:h,dialogRef:u}},$8=l5r;var u5r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=$8(yQ,cu.BasemapSelector);return e!==null?(0,Jit.createPortal)(kD.default.createElement("div",{ref:n},kD.default.createElement("button",{onClick:r,title:de("control-basemapselector-open"),className:Et("maplibregl-ctrl-basemap-selector",t===cu.BasemapSelector&&"active")}),t===cu.BasemapSelector&&kD.default.createElement("div",{className:Et("basemap-selector-modal",t===cu.BasemapSelector&&"active")},kD.default.createElement(JWe,null))),e):null},Qit=u5r;var eat=Qit;function Gae(e,t){return new Promise(function(r){let n=()=>{r(!1)},o=()=>{t.signal.removeEventListener("abort",n)};t.signal.addEventListener("abort",n,{once:!0}),e.once("moveend",()=>{r(!0),o()}),e.once("touchstart",()=>{r(!1),o()}),e.once("mousedown",()=>{r(!1),o()}),e.flyTo(t)})}function tat(e){return new Promise(t=>setTimeout(t,e))}var rat=Z(GM(),1);var Y8=class extends rat.Map{constructor(){super(...arguments);ct(this,"terrainConfiguration",hr.getTerrain());ct(this,"terrainExaggeration",this.terrainConfiguration.exaggeration);ct(this,"isTerrainEnabled",!1);ct(this,"abortController",new AbortController)}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(r,n=1e3){if(!this.terrain)return;let o=performance.now(),i=this.terrain.exaggeration,a=r-i,u=()=>{if(!this.terrain||this.terrainFlattening)return;let p=(performance.now()-o)/n;if(p<.99){let h=1-jy(1-p,4),g=i+h*a;this.terrain.exaggeration=g,requestAnimationFrame(u)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=r;this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(u)}enableTerrain(r=this.terrainExaggeration){if(r<0){console.warn("Terrain exaggeration cannot be negative.");return}let n=i=>Nt(this,null,function*(){!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!==gv||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),this.growTerrain(r))}),o=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=r,this.addSource(gv,{attribution:this.terrainConfiguration.attribution,type:"raster-dem",tiles:[this.terrainConfiguration.url],tileSize:256,minzoom:this.terrainConfiguration.minZoom,maxzoom:this.terrainConfiguration.maxZoom,encoding:"terrarium"}),this.setTerrain({source:gv,exaggeration:0}),this.abortController.abort(),this.abortController=new AbortController,Gae(this,{signal:this.abortController.signal,pitch:60,duration:700}).then(()=>tat(500)).then(()=>{this.getSource(gv).loaded()?this.growTerrain(r):this.on("data",n)})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(r);return}this.loaded()||this.isTerrainEnabled?o():this.once("load",()=>{this.getTerrain()&&this.getSource(gv)||o()})}disableTerrain(){return Nt(this,null,function*(){if(!this.terrain)return;this.isTerrainEnabled=!1;let r=1*1e3,n=performance.now(),o=this.terrain.exaggeration,i=()=>{if(!this.terrain||this.terrainGrowing)return;let a=(performance.now()-n)/r;if(this._elevationFreeze=!1,a<.99){let u=jy(1-a,4),p=o*u;this.terrain.exaggeration=p,requestAnimationFrame(i)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(gv)&&this.removeSource(gv),this.abortController.abort(),this.abortController=new AbortController,Gae(this,{pitch:0,signal:this.abortController.signal,duration:700});this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(i)})}setTerrainExaggeration(r,n=!0){!n&&this.terrain?(this.terrainExaggeration=r,this.terrain.exaggeration=r,this.triggerRepaint()):this.enableTerrain(r)}};var Hae=class extends Y8{addControl(t,r){let n=super.addControl(t,r);return this.fire(xa.controlAdded,{control:t}),n}removeControl(t){let r=super.removeControl(t);return this.fire(xa.controlRemoved,{control:t}),r}setPaintProperty(t,r,n,o){var p;let i=super.setPaintProperty(t,r,n,o),a=this.getLayer(t),u=(p=a==null?void 0:a.metadata)==null?void 0:p[Rh.id];return r9e.has(r)&&u&&this.fire(xa.opacityChanged,{layerId:u,property:r,value:n}),i}setLayoutProperty(t,r,n,o){var p;let i=super.setLayoutProperty(t,r,n,o),a=this.getLayer(t),u=(p=a==null?void 0:a.metadata)==null?void 0:p[Rh.id];return n9e.has(r)&&u&&this.fire(xa.visibilityChanged,{layerId:u,property:r,value:n}),i}},nat=Hae;var oat=nat;var RD=Z(we(),1),hat=Z(Si(),1);var Ud=Z(we(),1);var Ms=Z(we(),1);var iat=e=>{let{center:t,bearing:r,pitch:n,zoom:o}=e;return Object.assign({},t===void 0?null:{c:t},r===void 0?null:{be:r},n===void 0?null:{p:n},o===void 0?null:{z:o})},aat=e=>hr.getBaseMaps().filter(n=>n.id===e).length>0?{b:e}:{},sat=e=>({map_id:e.filter(t=>t.getType()===Mn.HISTORIC_MAP||t.getMetadata(it.vectorMapId)).map(t=>t.getId())}),lat=e=>({v:e?_R["3D"]:_R["2D"]});var cat=Z(IQ(),1);var cl=Z(we(),1),Wae=Z(xt(),1);var uat=({onClick:e,value:t})=>{let[r,n]=(0,cl.useState)(!1),o=(0,cl.useRef)(),i=(0,cl.useRef)(),a=(0,cl.useCallback)(()=>{(e!==void 0&&t===""?e():new Promise(p=>p())).then(p=>{clearTimeout(i.current),navigator.clipboard.writeText(p!==void 0?p:t),n(!0)})},[e,t]);return(0,cl.useEffect)(()=>(r&&(i.current=setTimeout(()=>{n(!1)},1e3)),()=>{clearTimeout(i.current)}),[r]),cl.default.createElement(cl.default.Fragment,null,cl.default.createElement("button",{className:"copy-button",onClick:a,ref:o,title:de("control-permalink-exporter-copy-title")},cl.default.createElement(Bh,{glyph:"copy"})),cl.default.createElement(Pte,{placement:"right",target:o.current,show:r},cl.default.createElement(Gte,{id:"copy-state-indicator"},de("control-permalink-exporter-copy"))))};uat.propTypes={onClick:Wae.default.func,value:Wae.default.string};var Z8=uat;var c5r=()=>{let e=vt(wr),t=vt(Ln),r=vt(Kp),[n,o]=(0,Ms.useState)(""),i=(0,Ms.useRef)(),a=(0,Ms.useCallback)(()=>{if(!Ge(e))return;let u=iat(vR(e,!0)),p=lat(e.hasTerrain()),h=sat(t),g=aat(r),x=(0,cat.stringify)(Object.assign({},u,p,h,g),{arrayFormat:"comma"});o(K8(x))},[e]);return(0,Ms.useEffect)(()=>{if(e)return a(),e.on("moveend",a),()=>{e.off("moveend",a)}},[e,a]),Ms.default.createElement(Ms.default.Fragment,null,Ms.default.createElement("div",{className:"action-content"},Ms.default.createElement("label",{htmlFor:"permalink-value",className:"visually-hidden"},"Permalink"),Ms.default.createElement("input",{readOnly:!0,ref:i,value:n,id:"permalink-value"}),Ms.default.createElement(Z8,{value:n})),Ms.default.createElement("div",{className:"description"},Ms.default.createElement("p",null,de("control-permalink-exporter-permalink-description"))))},fat=c5r;var Cs=Z(we(),1);var pat=()=>{let[e]=Hf(o1,[]),[t,r]=(0,Cs.useState)(!1),[n,o]=(0,Cs.useState)(""),i=vt(ck),a=hr.getGeoreferenceApiClient(),u="/map_view/",p=(0,Cs.useCallback)(()=>{if(i!==void 0){let h=i(),{searchOptions:g}=h,x=wn(h,["searchOptions"]),b=e.filter(A=>A.id===x.activeBasemapId),T=Object.assign({},x,b.length>0?{customBasemaps:b}:null);return r(!0),a.post(u,{map_view_json:T}).then(A=>{if(A.status===200&&A.data!==void 0){let{map_view_id:L}=A.data,P=K8(`map_view_id=${L}`);return o(P),r(!1),P}})}},[e,i]);return Cs.default.createElement(Cs.default.Fragment,null,Cs.default.createElement("div",{className:"action-content"},Cs.default.createElement("label",{htmlFor:"permalink-mapview",className:"visually-hidden"},"Permalink"),Cs.default.createElement("input",{placeholder:de("control-permalink-input-mapview-placeholder"),readOnly:!0,value:n,id:"permalink-mapview"}),Cs.default.createElement(Z8,{onClick:p,value:n}),Cs.default.createElement("button",{className:Et("upload-button",t&&"loading"),onClick:p},t?Cs.default.createElement(Y6,null):Cs.default.createElement(Bh,{glyph:"upload"}),"Upload")),Cs.default.createElement("div",{className:"description"},Cs.default.createElement("p",null,de("control-permalink-exporter-mapview-description"))))};var K8=e=>`${window.location.origin}${window.location.pathname}?${e}`,f5r=()=>{let e=!hr.isUserAuthenticated();return Ud.default.createElement("div",{className:"vkf-permalink-exporter"},Ud.default.createElement(Bte,{defaultActiveKey:1,id:"permalink-exporter-tabs"},Ud.default.createElement(g6,{eventKey:1,title:de("control-permalink-title-permalink")},Ud.default.createElement("div",{className:"permalink-exporter-content"},Ud.default.createElement(fat,null))),Ud.default.createElement(g6,{disabled:e,eventKey:2,title:de("control-permalink-title-map-view")},Ud.default.createElement("div",{className:"permalink-exporter-content"},!e&&Ud.default.createElement(pat,null)))))},dat=Ud.default.memo(f5r);var p5r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=$8(bQ,cu.Permalink);return e!==null?(0,hat.createPortal)(RD.default.createElement("div",{ref:n},RD.default.createElement("button",{className:Et("maplibregl-ctrl-permalink",t===cu.Permalink&&"active"),onClick:r,title:de("control-permalink-open")}),t===cu.Permalink&&RD.default.createElement("div",{className:"content-container"},RD.default.createElement(dat,null))),e):null},mat=p5r;var X8=Z(we(),1);var d5r=()=>{let e=vt(wr),t=vt(Kp),r=vt(hk),[n]=Hf(o1,[]),o=hr.getBaseMaps(),i=(0,X8.useMemo)(()=>[...o,...n],[n,o]);return(0,X8.useEffect)(()=>{if(Ge(e)){let a=i.find(p=>p.id===t);if(a===void 0)return;let u=a;if(HC(e),YWe(e),u.type==="vector")HWe(e,r);else if(u.type==="wms")VWe(e,u,r);else if(u.type==="xyz")$We(e,u,r);else throw new Error("Unknown layer type")}},[t,e,r]),null},gat=d5r;function vat(){return{"NavigationControl.ZoomIn":de("control-zoom-in"),"NavigationControl.ZoomOut":de("control-zoom-out"),"FullscreenControl.Enter":de("control-fullscreen-Enter"),"FullscreenControl.Exit":de("control-fullscreen-Exit"),"NavigationControl.ResetBearing":de("control-rotate"),"TerrainControl.Enable":de("control-toggleviewmode-title"),"TerrainControl.Disable":de("control-toggleviewmode-title"),"GeolocateControl.FindMyLocation":de("control-locateme-title"),"GeolocateControl.LocationNotAvailable":de("control-locateme-location-not-available")}}var h5r="https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json";function yat(e){let{ChildComponent:t,layout:r,mapViewSettings:n={center:[13.5981217,59.562795],projection:"EPSG:3857",zoom:2},loadMarkerIcon:o=!0}=e,[i,a]=Nn(wr),u=Ar(hk),p=(0,yf.useRef)();return d9e(p,"map"),(0,yf.useEffect)(()=>{let h=new oat({container:p.current,center:n.center,zoom:n.zoom,maxZoom:n.maxZoom,style:h5r,locale:vat(),attributionControl:!1}),g=()=>{if(a(h),u(h.getStyle().layers),o===!0){let{id:x,url:b}=hr.getMarkerSettings();h.loadImage(b).then(T=>{h.addImage(x,T.data,{sdf:!0})})}};return h.on("style.load",g),()=>{h.off("style.load",g),a(void 0),h.remove()}},[]),(0,yf.useEffect)(()=>{if(Ge(i)){let h=e9e();return h.forEach(({control:g,position:x})=>{i.addControl(g,x)}),()=>{h.forEach(({control:g})=>{i.removeControl(g)})}}},[i]),yf.default.createElement("div",{className:"map-container"},yf.default.createElement("div",{ref:p,className:Et("map-div","olMap",i9e(r)),tabIndex:0},Ge(i)&&yf.default.createElement(t,null),yf.default.createElement(eat,null),yf.default.createElement(mat,null),yf.default.createElement(gat,null)))}var m5r={baseMapUrl:hp.default.arrayOf(hp.default.string),ChildComponent:hp.default.func,layout:hp.default.string,mapViewSettings:hp.default.shape({center:hp.default.arrayOf(hp.default.number),projection:hp.default.string,zoom:hp.default.number}),loadMarkerIcon:hp.default.bool};yat.propTypes=m5r;var _at=yat;var g5r=e=>{switch(e){case Ws.STANDARD:return Xie;case Ws.DRAW:return qae;default:Xie;}},v5r=(e,t)=>{switch(e){case fu.HORIZONTAL:return g5r(t);case fu.VERTICAL:return Vae;default:return Vae;}},bat=e=>{let{layout:t}=e,r=Ar(Zb),n=vt(Vc),o=v5r(t,n);return(0,jD.useEffect)(()=>{r(t)},[t]),jD.default.createElement(_at,{baseMapUrl:hr.getDefaultBaseMapUrls(),enable3d:!0,enableTerrain:!0,layout:t,mapViewSettings:hr.getDefaultMapView(),ChildComponent:o})};bat.propTypes={layout:xat.default.oneOf(Object.values(fu))};var wat=jD.default.memo(bat);var y5r=IJ.backends.map(e=>e.id==="touch"?Ft(Se({},e),{options:Ft(Se({},e.options),{scrollAngleRanges:[{start:30,end:150},{start:210,end:330}]})}):e),Sat=()=>{let e=_6e(),t=o9e(e),r=(0,wm.useMemo)(()=>Object.assign({},IJ,{backends:y5r}),[]);return wm.default.createElement(qJ,{options:r},wm.default.createElement(g6e,null,wm.default.createElement("div",{className:"vkf-plugin-map"},wm.default.createElement(v9e,null),wm.default.createElement(wat,{layout:t}),wm.default.createElement(QYe,null))))};Sat.propTypes={id:Eat.default.string.isRequired};var Iat=Sat;var _5r=hr;function x5r(e){Mat.default.render(Tat.default.createElement(Iat,{id:e.id}),e)}return Tlt(b5r)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (** @license React v17.0.2
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

wms-capabilities/dist/wms-capabilities.mjs:
  (**
   * wms-capabilities @0.6.0
   * @description WMS service Capabilities > JSON, based on openlayers 
   * @license BSD-2-Clause
   * @preserve
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/