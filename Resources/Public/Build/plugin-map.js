var vk2=(()=>{var klt=Object.create;var i2=Object.defineProperty,Rlt=Object.defineProperties,jlt=Object.getOwnPropertyDescriptor,qlt=Object.getOwnPropertyDescriptors,zlt=Object.getOwnPropertyNames,G4=Object.getOwnPropertySymbols,Flt=Object.getPrototypeOf,w9=Object.prototype.hasOwnProperty,zle=Object.prototype.propertyIsEnumerable;var Fle=e=>{throw TypeError(e)},Ry=Math.pow,b9=(e,t,r)=>t in e?i2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,Se=(e,t)=>{for(var r in t||(t={}))w9.call(t,r)&&b9(e,r,t[r]);if(G4)for(var r of G4(t))zle.call(t,r)&&b9(e,r,t[r]);return e},qt=(e,t)=>Rlt(e,qlt(t));var Ule=e=>typeof e=="symbol"?e:e+"",En=(e,t)=>{var r={};for(var n in e)w9.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&G4)for(var n of G4(e))t.indexOf(n)<0&&zle.call(e,n)&&(r[n]=e[n]);return r};var M=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),a2=(e,t)=>{for(var r in t)i2(e,r,{get:t[r],enumerable:!0})},Ble=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of zlt(t))!w9.call(e,o)&&o!==r&&i2(e,o,{get:()=>t[o],enumerable:!(n=jlt(t,o))||n.enumerable});return e};var Z=(e,t,r)=>(r=e!=null?klt(Flt(e)):{},Ble(t||!e||!e.__esModule?i2(r,"default",{value:e,enumerable:!0}):r,e)),Ult=e=>Ble(i2({},"__esModule",{value:!0}),e);var ct=(e,t,r)=>b9(e,typeof t!="symbol"?t+"":t,r),E9=(e,t,r)=>t.has(e)||Fle("Cannot "+r);var Tp=(e,t,r)=>(E9(e,t,"read from private field"),r?r.call(e):t.get(e)),og=(e,t,r)=>t.has(e)?Fle("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),jy=(e,t,r,n)=>(E9(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Zl=(e,t,r)=>(E9(e,t,"access private method"),r);var At=(e,t,r)=>new Promise((n,o)=>{var i=p=>{try{u(r.next(p))}catch(h){o(h)}},a=p=>{try{u(r.throw(p))}catch(h){o(h)}},u=p=>p.done?n(p.value):Promise.resolve(p.value).then(i,a);u((r=r.apply(e,t)).next())});var H4=M((z5r,Gle)=>{"use strict";var Vle=Object.getOwnPropertySymbols,Blt=Object.prototype.hasOwnProperty,Vlt=Object.prototype.propertyIsEnumerable;function Glt(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Hlt(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(t).map(function(i){return t[i]});if(n.join("")!=="0123456789")return!1;var o={};return"abcdefghijklmnopqrst".split("").forEach(function(i){o[i]=i}),Object.keys(Object.assign({},o)).join("")==="abcdefghijklmnopqrst"}catch(i){return!1}}Gle.exports=Hlt()?Object.assign:function(e,t){for(var r,n=Glt(e),o,i=1;i<arguments.length;i++){r=Object(arguments[i]);for(var a in r)Blt.call(r,a)&&(n[a]=r[a]);if(Vle){o=Vle(r);for(var u=0;u<o.length;u++)Vlt.call(r,o[u])&&(n[o[u]]=r[o[u]])}}return n}});var aue=M(Xn=>{"use strict";var I9=H4(),U_=60103,$le=60106;Xn.Fragment=60107;Xn.StrictMode=60108;Xn.Profiler=60114;var Yle=60109,Zle=60110,Kle=60112;Xn.Suspense=60113;var Xle=60115,Jle=60116;typeof Symbol=="function"&&Symbol.for&&(mc=Symbol.for,U_=mc("react.element"),$le=mc("react.portal"),Xn.Fragment=mc("react.fragment"),Xn.StrictMode=mc("react.strict_mode"),Xn.Profiler=mc("react.profiler"),Yle=mc("react.provider"),Zle=mc("react.context"),Kle=mc("react.forward_ref"),Xn.Suspense=mc("react.suspense"),Xle=mc("react.memo"),Jle=mc("react.lazy"));var mc,Hle=typeof Symbol=="function"&&Symbol.iterator;function Wlt(e){return e===null||typeof e!="object"?null:(e=Hle&&e[Hle]||e["@@iterator"],typeof e=="function"?e:null)}function s2(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qle={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},eue={};function B_(e,t,r){this.props=e,this.context=t,this.refs=eue,this.updater=r||Qle}B_.prototype.isReactComponent={};B_.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(s2(85));this.updater.enqueueSetState(this,e,t,"setState")};B_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tue(){}tue.prototype=B_.prototype;function T9(e,t,r){this.props=e,this.context=t,this.refs=eue,this.updater=r||Qle}var M9=T9.prototype=new tue;M9.constructor=T9;I9(M9,B_.prototype);M9.isPureReactComponent=!0;var C9={current:null},rue=Object.prototype.hasOwnProperty,nue={key:!0,ref:!0,__self:!0,__source:!0};function oue(e,t,r){var n,o={},i=null,a=null;if(t!=null)for(n in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(i=""+t.key),t)rue.call(t,n)&&!nue.hasOwnProperty(n)&&(o[n]=t[n]);var u=arguments.length-2;if(u===1)o.children=r;else if(1<u){for(var p=Array(u),h=0;h<u;h++)p[h]=arguments[h+2];o.children=p}if(e&&e.defaultProps)for(n in u=e.defaultProps,u)o[n]===void 0&&(o[n]=u[n]);return{$$typeof:U_,type:e,key:i,ref:a,props:o,_owner:C9.current}}function $lt(e,t){return{$$typeof:U_,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function A9(e){return typeof e=="object"&&e!==null&&e.$$typeof===U_}function Ylt(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Wle=/\/+/g;function S9(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ylt(""+e.key):t.toString(36)}function $4(e,t,r,n,o){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case U_:case $le:a=!0;}}if(a)return a=e,o=o(a),e=n===""?"."+S9(a,0):n,Array.isArray(o)?(r="",e!=null&&(r=e.replace(Wle,"$&/")+"/"),$4(o,t,r,"",function(h){return h})):o!=null&&(A9(o)&&(o=$lt(o,r+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Wle,"$&/")+"/")+e)),t.push(o)),1;if(a=0,n=n===""?".":n+":",Array.isArray(e))for(var u=0;u<e.length;u++){i=e[u];var p=n+S9(i,u);a+=$4(i,t,r,p,o)}else if(p=Wlt(e),typeof p=="function")for(e=p.call(e),u=0;!(i=e.next()).done;)i=i.value,p=n+S9(i,u++),a+=$4(i,t,r,p,o);else if(i==="object")throw t=""+e,Error(s2(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return a}function W4(e,t,r){if(e==null)return e;var n=[],o=0;return $4(e,n,"","",function(i){return t.call(r,i,o++)}),n}function Zlt(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(r){e._status===0&&(r=r.default,e._status=1,e._result=r)},function(r){e._status===0&&(e._status=2,e._result=r)})}if(e._status===1)return e._result;throw e._result}var iue={current:null};function ih(){var e=iue.current;if(e===null)throw Error(s2(321));return e}var Klt={ReactCurrentDispatcher:iue,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:C9,IsSomeRendererActing:{current:!1},assign:I9};Xn.Children={map:W4,forEach:function(e,t,r){W4(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return W4(e,function(){t++}),t},toArray:function(e){return W4(e,function(t){return t})||[]},only:function(e){if(!A9(e))throw Error(s2(143));return e}};Xn.Component=B_;Xn.PureComponent=T9;Xn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Klt;Xn.cloneElement=function(e,t,r){if(e==null)throw Error(s2(267,e));var n=I9({},e.props),o=e.key,i=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,a=C9.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(p in t)rue.call(t,p)&&!nue.hasOwnProperty(p)&&(n[p]=t[p]===void 0&&u!==void 0?u[p]:t[p])}var p=arguments.length-2;if(p===1)n.children=r;else if(1<p){u=Array(p);for(var h=0;h<p;h++)u[h]=arguments[h+2];n.children=u}return{$$typeof:U_,type:e.type,key:o,ref:i,props:n,_owner:a}};Xn.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:Zle,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:Yle,_context:e},e.Consumer=e};Xn.createElement=oue;Xn.createFactory=function(e){var t=oue.bind(null,e);return t.type=e,t};Xn.createRef=function(){return{current:null}};Xn.forwardRef=function(e){return{$$typeof:Kle,render:e}};Xn.isValidElement=A9;Xn.lazy=function(e){return{$$typeof:Jle,_payload:{_status:-1,_result:e},_init:Zlt}};Xn.memo=function(e,t){return{$$typeof:Xle,type:e,compare:t===void 0?null:t}};Xn.useCallback=function(e,t){return ih().useCallback(e,t)};Xn.useContext=function(e,t){return ih().useContext(e,t)};Xn.useDebugValue=function(){};Xn.useEffect=function(e,t){return ih().useEffect(e,t)};Xn.useImperativeHandle=function(e,t,r){return ih().useImperativeHandle(e,t,r)};Xn.useLayoutEffect=function(e,t){return ih().useLayoutEffect(e,t)};Xn.useMemo=function(e,t){return ih().useMemo(e,t)};Xn.useReducer=function(e,t,r){return ih().useReducer(e,t,r)};Xn.useRef=function(e){return ih().useRef(e)};Xn.useState=function(e){return ih().useState(e)};Xn.version="17.0.2"});var we=M((U5r,sue)=>{"use strict";sue.exports=aue()});var due=M(go=>{"use strict";var G_,c2,X4,R9;typeof performance=="object"&&typeof performance.now=="function"?(lue=performance,go.unstable_now=function(){return lue.now()}):(D9=Date,uue=D9.now(),go.unstable_now=function(){return D9.now()-uue});var lue,D9,uue;typeof window=="undefined"||typeof MessageChannel!="function"?(V_=null,N9=null,O9=function(){if(V_!==null)try{var e=go.unstable_now();V_(!0,e),V_=null}catch(t){throw setTimeout(O9,0),t}},G_=function(e){V_!==null?setTimeout(G_,0,e):(V_=e,setTimeout(O9,0))},c2=function(e,t){N9=setTimeout(e,t)},X4=function(){clearTimeout(N9)},go.unstable_shouldYield=function(){return!1},R9=go.unstable_forceFrameRate=function(){}):(cue=window.setTimeout,fue=window.clearTimeout,typeof console!="undefined"&&(pue=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof pue!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),l2=!1,u2=null,Y4=-1,L9=5,P9=0,go.unstable_shouldYield=function(){return go.unstable_now()>=P9},R9=function(){},go.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L9=0<e?Math.floor(1e3/e):5},k9=new MessageChannel,Z4=k9.port2,k9.port1.onmessage=function(){if(u2!==null){var e=go.unstable_now();P9=e+L9;try{u2(!0,e)?Z4.postMessage(null):(l2=!1,u2=null)}catch(t){throw Z4.postMessage(null),t}}else l2=!1},G_=function(e){u2=e,l2||(l2=!0,Z4.postMessage(null))},c2=function(e,t){Y4=cue(function(){e(go.unstable_now())},t)},X4=function(){fue(Y4),Y4=-1});var V_,N9,O9,cue,fue,pue,l2,u2,Y4,L9,P9,k9,Z4;function j9(e,t){var r=e.length;e.push(t);e:for(;;){var n=r-1>>>1,o=e[n];if(o!==void 0&&0<K4(o,t))e[n]=t,e[r]=o,r=n;else break e}}function Tf(e){return e=e[0],e===void 0?null:e}function J4(e){var t=e[0];if(t!==void 0){var r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,o=e.length;n<o;){var i=2*(n+1)-1,a=e[i],u=i+1,p=e[u];if(a!==void 0&&0>K4(a,r))p!==void 0&&0>K4(p,a)?(e[n]=p,e[u]=r,n=u):(e[n]=a,e[i]=r,n=i);else if(p!==void 0&&0>K4(p,r))e[n]=p,e[u]=r,n=u;else break e}}return t}return null}function K4(e,t){var r=e.sortIndex-t.sortIndex;return r!==0?r:e.id-t.id}var Mp=[],ig=[],Xlt=1,gc=null,js=3,Q4=!1,qy=!1,f2=!1;function q9(e){for(var t=Tf(ig);t!==null;){if(t.callback===null)J4(ig);else if(t.startTime<=e)J4(ig),t.sortIndex=t.expirationTime,j9(Mp,t);else break;t=Tf(ig)}}function z9(e){if(f2=!1,q9(e),!qy)if(Tf(Mp)!==null)qy=!0,G_(F9);else{var t=Tf(ig);t!==null&&c2(z9,t.startTime-e)}}function F9(e,t){qy=!1,f2&&(f2=!1,X4()),Q4=!0;var r=js;try{for(q9(t),gc=Tf(Mp);gc!==null&&(!(gc.expirationTime>t)||e&&!go.unstable_shouldYield());){var n=gc.callback;if(typeof n=="function"){gc.callback=null,js=gc.priorityLevel;var o=n(gc.expirationTime<=t);t=go.unstable_now(),typeof o=="function"?gc.callback=o:gc===Tf(Mp)&&J4(Mp),q9(t)}else J4(Mp);gc=Tf(Mp)}if(gc!==null)var i=!0;else{var a=Tf(ig);a!==null&&c2(z9,a.startTime-t),i=!1}return i}finally{gc=null,js=r,Q4=!1}}var Jlt=R9;go.unstable_IdlePriority=5;go.unstable_ImmediatePriority=1;go.unstable_LowPriority=4;go.unstable_NormalPriority=3;go.unstable_Profiling=null;go.unstable_UserBlockingPriority=2;go.unstable_cancelCallback=function(e){e.callback=null};go.unstable_continueExecution=function(){qy||Q4||(qy=!0,G_(F9))};go.unstable_getCurrentPriorityLevel=function(){return js};go.unstable_getFirstCallbackNode=function(){return Tf(Mp)};go.unstable_next=function(e){switch(js){case 1:case 2:case 3:var t=3;break;default:t=js;}var r=js;js=t;try{return e()}finally{js=r}};go.unstable_pauseExecution=function(){};go.unstable_requestPaint=Jlt;go.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var r=js;js=e;try{return t()}finally{js=r}};go.unstable_scheduleCallback=function(e,t,r){var n=go.unstable_now();switch(typeof r=="object"&&r!==null?(r=r.delay,r=typeof r=="number"&&0<r?n+r:n):r=n,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3;}return o=r+o,e={id:Xlt++,callback:t,priorityLevel:e,startTime:r,expirationTime:o,sortIndex:-1},r>n?(e.sortIndex=r,j9(ig,e),Tf(Mp)===null&&e===Tf(ig)&&(f2?X4():f2=!0,c2(z9,r-n))):(e.sortIndex=o,j9(Mp,e),qy||Q4||(qy=!0,G_(F9))),e};go.unstable_wrapCallback=function(e){var t=js;return function(){var r=js;js=t;try{return e.apply(this,arguments)}finally{js=r}}}});var mue=M((V5r,hue)=>{"use strict";hue.exports=due()});var tpe=M(wc=>{"use strict";var WN=we(),vi=H4(),ka=mue();function Gt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!WN)throw Error(Gt(227));var Cce=new Set,U2={};function Zy(e,t){fx(e,t),fx(e+"Capture",t)}function fx(e,t){for(U2[e]=t,e=0;e<t.length;e++)Cce.add(t[e])}var fh=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Qlt=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gue=Object.prototype.hasOwnProperty,vue={},yue={};function eut(e){return gue.call(yue,e)?!0:gue.call(vue,e)?!1:Qlt.test(e)?yue[e]=!0:(vue[e]=!0,!1)}function tut(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function rut(e,t,r,n){if(t===null||typeof t=="undefined"||tut(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function bl(e,t,r,n,o,i,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var is={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){is[e]=new bl(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];is[t]=new bl(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){is[e]=new bl(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){is[e]=new bl(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){is[e]=new bl(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){is[e]=new bl(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){is[e]=new bl(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){is[e]=new bl(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){is[e]=new bl(e,5,!1,e.toLowerCase(),null,!1,!1)});var Z7=/[\-:]([a-z])/g;function K7(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Z7,K7);is[t]=new bl(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Z7,K7);is[t]=new bl(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Z7,K7);is[t]=new bl(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){is[e]=new bl(e,1,!1,e.toLowerCase(),null,!1,!1)});is.xlinkHref=new bl("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){is[e]=new bl(e,1,!1,e.toLowerCase(),null,!0,!0)});function X7(e,t,r,n){var o=is.hasOwnProperty(t)?is[t]:null,i=o!==null?o.type===0:n?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");i||(rut(t,r,o,n)&&(r=null),n||o===null?eut(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):o.mustUseProperty?e[o.propertyName]=r===null?o.type===3?!1:"":r:(t=o.attributeName,n=o.attributeNamespace,r===null?e.removeAttribute(t):(o=o.type,r=o===3||o===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Ky=WN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S2=60103,Fy=60106,sg=60107,J7=60108,A2=60114,Q7=60109,eU=60110,$N=60112,D2=60113,EN=60120,YN=60115,tU=60116,rU=60121,nU=60128,Ace=60129,oU=60130,u7=60131;typeof Symbol=="function"&&Symbol.for&&(va=Symbol.for,S2=va("react.element"),Fy=va("react.portal"),sg=va("react.fragment"),J7=va("react.strict_mode"),A2=va("react.profiler"),Q7=va("react.provider"),eU=va("react.context"),$N=va("react.forward_ref"),D2=va("react.suspense"),EN=va("react.suspense_list"),YN=va("react.memo"),tU=va("react.lazy"),rU=va("react.block"),va("react.scope"),nU=va("react.opaque.id"),Ace=va("react.debug_trace_mode"),oU=va("react.offscreen"),u7=va("react.legacy_hidden"));var va,_ue=typeof Symbol=="function"&&Symbol.iterator;function p2(e){return e===null||typeof e!="object"?null:(e=_ue&&e[_ue]||e["@@iterator"],typeof e=="function"?e:null)}var U9;function I2(e){if(U9===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);U9=t&&t[1]||""}return`
`+U9+e}var B9=!1;function eN(e,t){if(!e||B9)return"";B9=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(p){var n=p}Reflect.construct(e,[],t)}else{try{t.call()}catch(p){n=p}e.call(t.prototype)}}else{try{throw Error()}catch(p){n=p}e()}}catch(p){if(p&&n&&typeof p.stack=="string"){for(var o=p.stack.split(`
`),i=n.stack.split(`
`),a=o.length-1,u=i.length-1;1<=a&&0<=u&&o[a]!==i[u];)u--;for(;1<=a&&0<=u;a--,u--)if(o[a]!==i[u]){if(a!==1||u!==1)do if(a--,u--,0>u||o[a]!==i[u])return`
`+o[a].replace(" at new "," at ");while(1<=a&&0<=u);break}}}finally{B9=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?I2(e):""}function nut(e){switch(e.tag){case 5:return I2(e.type);case 16:return I2("Lazy");case 13:return I2("Suspense");case 19:return I2("SuspenseList");case 0:case 2:case 15:return e=eN(e.type,!1),e;case 11:return e=eN(e.type.render,!1),e;case 22:return e=eN(e.type._render,!1),e;case 1:return e=eN(e.type,!0),e;default:return"";}}function tx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case sg:return"Fragment";case Fy:return"Portal";case A2:return"Profiler";case J7:return"StrictMode";case D2:return"Suspense";case EN:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case eU:return(e.displayName||"Context")+".Consumer";case Q7:return(e._context.displayName||"Context")+".Provider";case $N:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case YN:return tx(e.type);case rU:return tx(e._render);case tU:t=e._payload,e=e._init;try{return tx(e(t))}catch(r){}}return null}function _g(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function Dce(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function out(e){var t=Dce(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r!="undefined"&&typeof r.get=="function"&&typeof r.set=="function"){var o=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function tN(e){e._valueTracker||(e._valueTracker=out(e))}function Nce(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Dce(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function SN(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function c7(e,t){var r=t.checked;return vi({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r!=null?r:e._wrapperState.initialChecked})}function xue(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=_g(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Oce(e,t){t=t.checked,t!=null&&X7(e,"checked",t,!1)}function f7(e,t){Oce(e,t);var r=_g(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?p7(e,t.type,r):t.hasOwnProperty("defaultValue")&&p7(e,t.type,_g(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bue(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function p7(e,t,r){(t!=="number"||SN(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}function iut(e){var t="";return WN.Children.forEach(e,function(r){r!=null&&(t+=r)}),t}function d7(e,t){return e=vi({children:void 0},t),(t=iut(t.children))&&(e.children=t),e}function rx(e,t,r,n){if(e=e.options,t){t={};for(var o=0;o<r.length;o++)t["$"+r[o]]=!0;for(r=0;r<e.length;r++)o=t.hasOwnProperty("$"+e[r].value),e[r].selected!==o&&(e[r].selected=o),o&&n&&(e[r].defaultSelected=!0)}else{for(r=""+_g(r),t=null,o=0;o<e.length;o++){if(e[o].value===r){e[o].selected=!0,n&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function h7(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Gt(91));return vi({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function wue(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Gt(92));if(Array.isArray(r)){if(!(1>=r.length))throw Error(Gt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:_g(r)}}function Lce(e,t){var r=_g(t.value),n=_g(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Eue(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var m7={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Pce(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function g7(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Pce(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var rN,kce=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,r,n,o){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,o)})}:e}(function(e,t){if(e.namespaceURI!==m7.svg||"innerHTML"in e)e.innerHTML=t;else{for(rN=rN||document.createElement("div"),rN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=rN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function B2(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var N2={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},aut=["Webkit","ms","Moz","O"];Object.keys(N2).forEach(function(e){aut.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),N2[t]=N2[e]})});function Rce(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||N2.hasOwnProperty(e)&&N2[e]?(""+t).trim():t+"px"}function jce(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,o=Rce(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,o):e[r]=o}}var sut=vi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function v7(e,t){if(t){if(sut[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Gt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Gt(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Gt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Gt(62))}}function y7(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function iU(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _7=null,nx=null,ox=null;function Sue(e){if(e=rI(e)){if(typeof _7!="function")throw Error(Gt(280));var t=e.stateNode;t&&(t=e5(t),_7(e.stateNode,e.type,t))}}function qce(e){nx?ox?ox.push(e):ox=[e]:nx=e}function zce(){if(nx){var e=nx,t=ox;if(ox=nx=null,Sue(e),t)for(e=0;e<t.length;e++)Sue(t[e])}}function aU(e,t){return e(t)}function Fce(e,t,r,n,o){return e(t,r,n,o)}function sU(){}var Uce=aU,Uy=!1,V9=!1;function lU(){(nx!==null||ox!==null)&&(sU(),zce())}function lut(e,t,r){if(V9)return e(t,r);V9=!0;try{return Uce(e,t,r)}finally{V9=!1,lU()}}function V2(e,t){var r=e.stateNode;if(r===null)return null;var n=e5(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1;}if(e)return null;if(r&&typeof r!="function")throw Error(Gt(231,t,typeof r));return r}var x7=!1;if(fh)try{H_={},Object.defineProperty(H_,"passive",{get:function(){x7=!0}}),window.addEventListener("test",H_,H_),window.removeEventListener("test",H_,H_)}catch(e){x7=!1}var H_;function uut(e,t,r,n,o,i,a,u,p){var h=Array.prototype.slice.call(arguments,3);try{t.apply(r,h)}catch(g){this.onError(g)}}var O2=!1,IN=null,TN=!1,b7=null,cut={onError:function(e){O2=!0,IN=e}};function fut(e,t,r,n,o,i,a,u,p){O2=!1,IN=null,uut.apply(cut,arguments)}function put(e,t,r,n,o,i,a,u,p){if(fut.apply(this,arguments),O2){if(O2){var h=IN;O2=!1,IN=null}else throw Error(Gt(198));TN||(TN=!0,b7=h)}}function Xy(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Bce(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Iue(e){if(Xy(e)!==e)throw Error(Gt(188))}function dut(e){var t=e.alternate;if(!t){if(t=Xy(e),t===null)throw Error(Gt(188));return t!==e?null:e}for(var r=e,n=t;;){var o=r.return;if(o===null)break;var i=o.alternate;if(i===null){if(n=o.return,n!==null){r=n;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===r)return Iue(o),e;if(i===n)return Iue(o),t;i=i.sibling}throw Error(Gt(188))}if(r.return!==n.return)r=o,n=i;else{for(var a=!1,u=o.child;u;){if(u===r){a=!0,r=o,n=i;break}if(u===n){a=!0,n=o,r=i;break}u=u.sibling}if(!a){for(u=i.child;u;){if(u===r){a=!0,r=i,n=o;break}if(u===n){a=!0,n=i,r=o;break}u=u.sibling}if(!a)throw Error(Gt(189))}}if(r.alternate!==n)throw Error(Gt(190))}if(r.tag!==3)throw Error(Gt(188));return r.stateNode.current===r?e:t}function Vce(e){if(e=dut(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Tue(e,t){for(var r=e.alternate;t!==null;){if(t===e||t===r)return!0;t=t.return}return!1}var Gce,uU,Hce,Wce,w7=!1,Cp=[],fg=null,pg=null,dg=null,G2=new Map,H2=new Map,d2=[],Mue="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function E7(e,t,r,n,o){return{blockedOn:e,domEventName:t,eventSystemFlags:r|16,nativeEvent:o,targetContainers:[n]}}function Cue(e,t){switch(e){case"focusin":case"focusout":fg=null;break;case"dragenter":case"dragleave":pg=null;break;case"mouseover":case"mouseout":dg=null;break;case"pointerover":case"pointerout":G2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":H2.delete(t.pointerId);}}function h2(e,t,r,n,o,i){return e===null||e.nativeEvent!==i?(e=E7(t,r,n,o,i),t!==null&&(t=rI(t),t!==null&&uU(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function hut(e,t,r,n,o){switch(t){case"focusin":return fg=h2(fg,e,t,r,n,o),!0;case"dragenter":return pg=h2(pg,e,t,r,n,o),!0;case"mouseover":return dg=h2(dg,e,t,r,n,o),!0;case"pointerover":var i=o.pointerId;return G2.set(i,h2(G2.get(i)||null,e,t,r,n,o)),!0;case"gotpointercapture":return i=o.pointerId,H2.set(i,h2(H2.get(i)||null,e,t,r,n,o)),!0;}return!1}function mut(e){var t=By(e.target);if(t!==null){var r=Xy(t);if(r!==null){if(t=r.tag,t===13){if(t=Bce(r),t!==null){e.blockedOn=t,Wce(e.lanePriority,function(){ka.unstable_runWithPriority(e.priority,function(){Hce(r)})});return}}else if(t===3&&r.stateNode.hydrate){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function dN(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=dU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null)return t=rI(r),t!==null&&uU(t),e.blockedOn=r,!1;t.shift()}return!0}function Aue(e,t,r){dN(e)&&r.delete(t)}function gut(){for(w7=!1;0<Cp.length;){var e=Cp[0];if(e.blockedOn!==null){e=rI(e.blockedOn),e!==null&&Gce(e);break}for(var t=e.targetContainers;0<t.length;){var r=dU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r!==null){e.blockedOn=r;break}t.shift()}e.blockedOn===null&&Cp.shift()}fg!==null&&dN(fg)&&(fg=null),pg!==null&&dN(pg)&&(pg=null),dg!==null&&dN(dg)&&(dg=null),G2.forEach(Aue),H2.forEach(Aue)}function m2(e,t){e.blockedOn===t&&(e.blockedOn=null,w7||(w7=!0,ka.unstable_scheduleCallback(ka.unstable_NormalPriority,gut)))}function $ce(e){function t(o){return m2(o,e)}if(0<Cp.length){m2(Cp[0],e);for(var r=1;r<Cp.length;r++){var n=Cp[r];n.blockedOn===e&&(n.blockedOn=null)}}for(fg!==null&&m2(fg,e),pg!==null&&m2(pg,e),dg!==null&&m2(dg,e),G2.forEach(t),H2.forEach(t),r=0;r<d2.length;r++)n=d2[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<d2.length&&(r=d2[0],r.blockedOn===null);)mut(r),r.blockedOn===null&&d2.shift()}function nN(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Z_={animationend:nN("Animation","AnimationEnd"),animationiteration:nN("Animation","AnimationIteration"),animationstart:nN("Animation","AnimationStart"),transitionend:nN("Transition","TransitionEnd")},G9={},Yce={};fh&&(Yce=document.createElement("div").style,"AnimationEvent"in window||(delete Z_.animationend.animation,delete Z_.animationiteration.animation,delete Z_.animationstart.animation),"TransitionEvent"in window||delete Z_.transitionend.transition);function ZN(e){if(G9[e])return G9[e];if(!Z_[e])return e;var t=Z_[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Yce)return G9[e]=t[r];return e}var Zce=ZN("animationend"),Kce=ZN("animationiteration"),Xce=ZN("animationstart"),Jce=ZN("transitionend"),Qce=new Map,cU=new Map,vut=["abort","abort",Zce,"animationEnd",Kce,"animationIteration",Xce,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Jce,"transitionEnd","waiting","waiting"];function fU(e,t){for(var r=0;r<e.length;r+=2){var n=e[r],o=e[r+1];o="on"+(o[0].toUpperCase()+o.slice(1)),cU.set(n,t),Qce.set(n,o),Zy(o,[n])}}var yut=ka.unstable_now;yut();var Jo=8;function $_(e){if(1&e)return Jo=15,1;if(2&e)return Jo=14,2;if(4&e)return Jo=13,4;var t=24&e;return t!==0?(Jo=12,t):e&32?(Jo=11,32):(t=192&e,t!==0?(Jo=10,t):e&256?(Jo=9,256):(t=3584&e,t!==0?(Jo=8,t):e&4096?(Jo=7,4096):(t=4186112&e,t!==0?(Jo=6,t):(t=62914560&e,t!==0?(Jo=5,t):e&67108864?(Jo=4,67108864):e&134217728?(Jo=3,134217728):(t=805306368&e,t!==0?(Jo=2,t):1073741824&e?(Jo=1,1073741824):(Jo=8,e))))))}function _ut(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function xut(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Gt(358,e));}}function W2(e,t){var r=e.pendingLanes;if(r===0)return Jo=0;var n=0,o=0,i=e.expiredLanes,a=e.suspendedLanes,u=e.pingedLanes;if(i!==0)n=i,o=Jo=15;else if(i=r&134217727,i!==0){var p=i&~a;p!==0?(n=$_(p),o=Jo):(u&=i,u!==0&&(n=$_(u),o=Jo))}else i=r&~a,i!==0?(n=$_(i),o=Jo):u!==0&&(n=$_(u),o=Jo);if(n===0)return 0;if(n=31-xg(n),n=r&((0>n?0:1<<n)<<1)-1,t!==0&&t!==n&&!(t&a)){if($_(t),o<=Jo)return t;Jo=o}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-xg(t),o=1<<r,n|=e[r],t&=~o;return n}function efe(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function MN(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Y_(24&~t),e===0?MN(10,t):e;case 10:return e=Y_(192&~t),e===0?MN(8,t):e;case 8:return e=Y_(3584&~t),e===0&&(e=Y_(4186112&~t),e===0&&(e=512)),e;case 2:return t=Y_(805306368&~t),t===0&&(t=268435456),t;}throw Error(Gt(358,e))}function Y_(e){return e&-e}function H9(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function KN(e,t,r){e.pendingLanes|=t;var n=t-1;e.suspendedLanes&=n,e.pingedLanes&=n,e=e.eventTimes,t=31-xg(t),e[t]=r}var xg=Math.clz32?Math.clz32:Eut,but=Math.log,wut=Math.LN2;function Eut(e){return e===0?32:31-(but(e)/wut|0)|0}var Sut=ka.unstable_UserBlockingPriority,Iut=ka.unstable_runWithPriority,hN=!0;function Tut(e,t,r,n){Uy||sU();var o=pU,i=Uy;Uy=!0;try{Fce(o,e,t,r,n)}finally{(Uy=i)||lU()}}function Mut(e,t,r,n){Iut(Sut,pU.bind(null,e,t,r,n))}function pU(e,t,r,n){if(hN){var o;if((o=(t&4)===0)&&0<Cp.length&&-1<Mue.indexOf(e))e=E7(null,e,t,r,n),Cp.push(e);else{var i=dU(e,t,r,n);if(i===null)o&&Cue(e,n);else{if(o){if(-1<Mue.indexOf(e)){e=E7(i,e,t,r,n),Cp.push(e);return}if(hut(i,e,t,r,n))return;Cue(e,n)}dfe(e,t,n,null,r)}}}}function dU(e,t,r,n){var o=iU(n);if(o=By(o),o!==null){var i=Xy(o);if(i===null)o=null;else{var a=i.tag;if(a===13){if(o=Bce(i),o!==null)return o;o=null}else if(a===3){if(i.stateNode.hydrate)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null)}}return dfe(e,t,n,o,r),null}var lg=null,hU=null,mN=null;function tfe(){if(mN)return mN;var e,t=hU,r=t.length,n,o="value"in lg?lg.value:lg.textContent,i=o.length;for(e=0;e<r&&t[e]===o[e];e++);var a=r-e;for(n=1;n<=a&&t[r-n]===o[i-n];n++);return mN=o.slice(e,1<n?1-n:void 0)}function gN(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function oN(){return!0}function Due(){return!1}function Gu(e){function t(r,n,o,i,a){this._reactName=r,this._targetInst=o,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(r=e[u],this[u]=r?r(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?oN:Due,this.isPropagationStopped=Due,this}return vi(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=oN)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=oN)},persist:function(){},isPersistent:oN}),t}var mx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mU=Gu(mx),tI=vi({},mx,{view:0,detail:0}),Cut=Gu(tI),W9,$9,g2,XN=vi({},tI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gU,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==g2&&(g2&&e.type==="mousemove"?(W9=e.screenX-g2.screenX,$9=e.screenY-g2.screenY):$9=W9=0,g2=e),W9)},movementY:function(e){return"movementY"in e?e.movementY:$9}}),Nue=Gu(XN),Aut=vi({},XN,{dataTransfer:0}),Dut=Gu(Aut),Nut=vi({},tI,{relatedTarget:0}),Y9=Gu(Nut),Out=vi({},mx,{animationName:0,elapsedTime:0,pseudoElement:0}),Lut=Gu(Out),Put=vi({},mx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kut=Gu(Put),Rut=vi({},mx,{data:0}),Oue=Gu(Rut),jut={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qut={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zut={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fut(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zut[e])?!!t[e]:!1}function gU(){return Fut}var Uut=vi({},tI,{key:function(e){if(e.key){var t=jut[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=gN(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qut[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gU,charCode:function(e){return e.type==="keypress"?gN(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?gN(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),But=Gu(Uut),Vut=vi({},XN,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Lue=Gu(Vut),Gut=vi({},tI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gU}),Hut=Gu(Gut),Wut=vi({},mx,{propertyName:0,elapsedTime:0,pseudoElement:0}),$ut=Gu(Wut),Yut=vi({},XN,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zut=Gu(Yut),Kut=[9,13,27,32],vU=fh&&"CompositionEvent"in window,L2=null;fh&&"documentMode"in document&&(L2=document.documentMode);var Xut=fh&&"TextEvent"in window&&!L2,rfe=fh&&(!vU||L2&&8<L2&&11>=L2),Pue=" ",kue=!1;function nfe(e,t){switch(e){case"keyup":return Kut.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function ofe(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var K_=!1;function Jut(e,t){switch(e){case"compositionend":return ofe(t);case"keypress":return t.which!==32?null:(kue=!0,Pue);case"textInput":return e=t.data,e===Pue&&kue?null:e;default:return null;}}function Qut(e,t){if(K_)return e==="compositionend"||!vU&&nfe(e,t)?(e=tfe(),mN=hU=lg=null,K_=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return rfe&&t.locale!=="ko"?null:t.data;default:return null;}}var ect={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rue(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ect[e.type]:t==="textarea"}function ife(e,t,r,n){qce(n),t=CN(t,"onChange"),0<t.length&&(r=new mU("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var P2=null,$2=null;function tct(e){cfe(e,0)}function JN(e){var t=J_(e);if(Nce(t))return e}function rct(e,t){if(e==="change")return t}var afe=!1;fh&&(fh?(aN="oninput"in document,aN||(Z9=document.createElement("div"),Z9.setAttribute("oninput","return;"),aN=typeof Z9.oninput=="function"),iN=aN):iN=!1,afe=iN&&(!document.documentMode||9<document.documentMode));var iN,aN,Z9;function jue(){P2&&(P2.detachEvent("onpropertychange",sfe),$2=P2=null)}function sfe(e){if(e.propertyName==="value"&&JN($2)){var t=[];if(ife(t,$2,e,iU(e)),e=tct,Uy)e(t);else{Uy=!0;try{aU(e,t)}finally{Uy=!1,lU()}}}}function nct(e,t,r){e==="focusin"?(jue(),P2=t,$2=r,P2.attachEvent("onpropertychange",sfe)):e==="focusout"&&jue()}function oct(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return JN($2)}function ict(e,t){if(e==="click")return JN(t)}function act(e,t){if(e==="input"||e==="change")return JN(t)}function sct(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vc=typeof Object.is=="function"?Object.is:sct,lct=Object.prototype.hasOwnProperty;function Y2(e,t){if(vc(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++)if(!lct.call(t,r[n])||!vc(e[r[n]],t[r[n]]))return!1;return!0}function que(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zue(e,t){var r=que(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=que(r)}}function lfe(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?lfe(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Fue(){for(var e=window,t=SN();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch(n){r=!1}if(r)e=t.contentWindow;else break;t=SN(e.document)}return t}function S7(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var uct=fh&&"documentMode"in document&&11>=document.documentMode,X_=null,I7=null,k2=null,T7=!1;function Uue(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;T7||X_==null||X_!==SN(n)||(n=X_,"selectionStart"in n&&S7(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),k2&&Y2(k2,n)||(k2=n,n=CN(I7,"onSelect"),0<n.length&&(t=new mU("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=X_)))}fU("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);fU("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);fU(vut,2);for(K9="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),sN=0;sN<K9.length;sN++)cU.set(K9[sN],0);var K9,sN;fx("onMouseEnter",["mouseout","mouseover"]);fx("onMouseLeave",["mouseout","mouseover"]);fx("onPointerEnter",["pointerout","pointerover"]);fx("onPointerLeave",["pointerout","pointerover"]);Zy("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zy("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zy("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zy("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zy("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zy("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var T2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ufe=new Set("cancel close invalid load scroll toggle".split(" ").concat(T2));function Bue(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,put(n,t,void 0,e),e.currentTarget=null}function cfe(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],o=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var a=n.length-1;0<=a;a--){var u=n[a],p=u.instance,h=u.currentTarget;if(u=u.listener,p!==i&&o.isPropagationStopped())break e;Bue(o,u,h),i=p}else for(a=0;a<n.length;a++){if(u=n[a],p=u.instance,h=u.currentTarget,u=u.listener,p!==i&&o.isPropagationStopped())break e;Bue(o,u,h),i=p}}}if(TN)throw e=b7,TN=!1,b7=null,e}function si(e,t){var r=mfe(t),n=e+"__bubble";r.has(n)||(pfe(t,e,2,!1),r.add(n))}var Vue="_reactListening"+Math.random().toString(36).slice(2);function ffe(e){e[Vue]||(e[Vue]=!0,Cce.forEach(function(t){ufe.has(t)||Gue(t,!1,e,null),Gue(t,!0,e,null)}))}function Gue(e,t,r,n){var o=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,i=r;if(e==="selectionchange"&&r.nodeType!==9&&(i=r.ownerDocument),n!==null&&!t&&ufe.has(e)){if(e!=="scroll")return;o|=2,i=n}var a=mfe(i),u=e+"__"+(t?"capture":"bubble");a.has(u)||(t&&(o|=4),pfe(i,e,o,t),a.add(u))}function pfe(e,t,r,n){var o=cU.get(t);switch(o===void 0?2:o){case 0:o=Tut;break;case 1:o=Mut;break;default:o=pU;}r=o.bind(null,t,r,e),o=void 0,!x7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),n?o!==void 0?e.addEventListener(t,r,{capture:!0,passive:o}):e.addEventListener(t,r,!0):o!==void 0?e.addEventListener(t,r,{passive:o}):e.addEventListener(t,r,!1)}function dfe(e,t,r,n,o){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var u=n.stateNode.containerInfo;if(u===o||u.nodeType===8&&u.parentNode===o)break;if(a===4)for(a=n.return;a!==null;){var p=a.tag;if((p===3||p===4)&&(p=a.stateNode.containerInfo,p===o||p.nodeType===8&&p.parentNode===o))return;a=a.return}for(;u!==null;){if(a=By(u),a===null)return;if(p=a.tag,p===5||p===6){n=i=a;continue e}u=u.parentNode}}n=n.return}lut(function(){var h=i,g=iU(r),x=[];e:{var b=Qce.get(e);if(b!==void 0){var T=mU,A=e;switch(e){case"keypress":if(gN(r)===0)break e;case"keydown":case"keyup":T=But;break;case"focusin":A="focus",T=Y9;break;case"focusout":A="blur",T=Y9;break;case"beforeblur":case"afterblur":T=Y9;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=Nue;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=Dut;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=Hut;break;case Zce:case Kce:case Xce:T=Lut;break;case Jce:T=$ut;break;case"scroll":T=Cut;break;case"wheel":T=Zut;break;case"copy":case"cut":case"paste":T=kut;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=Lue;}var L=(t&4)!==0,P=!L&&e==="scroll",k=L?b!==null?b+"Capture":null:b;L=[];for(var q=h,U;q!==null;){U=q;var H=U.stateNode;if(U.tag===5&&H!==null&&(U=H,k!==null&&(H=V2(q,k),H!=null&&L.push(Z2(q,H,U)))),P)break;q=q.return}0<L.length&&(b=new T(b,A,null,r,g),x.push({event:b,listeners:L}))}}if(!(t&7)){e:{if(b=e==="mouseover"||e==="pointerover",T=e==="mouseout"||e==="pointerout",b&&!(t&16)&&(A=r.relatedTarget||r.fromElement)&&(By(A)||A[gx]))break e;if((T||b)&&(b=g.window===g?g:(b=g.ownerDocument)?b.defaultView||b.parentWindow:window,T?(A=r.relatedTarget||r.toElement,T=h,A=A?By(A):null,A!==null&&(P=Xy(A),A!==P||A.tag!==5&&A.tag!==6)&&(A=null)):(T=null,A=h),T!==A)){if(L=Nue,H="onMouseLeave",k="onMouseEnter",q="mouse",(e==="pointerout"||e==="pointerover")&&(L=Lue,H="onPointerLeave",k="onPointerEnter",q="pointer"),P=T==null?b:J_(T),U=A==null?b:J_(A),b=new L(H,q+"leave",T,r,g),b.target=P,b.relatedTarget=U,H=null,By(g)===h&&(L=new L(k,q+"enter",A,r,g),L.target=U,L.relatedTarget=P,H=L),P=H,T&&A)t:{for(L=T,k=A,q=0,U=L;U;U=W_(U))q++;for(U=0,H=k;H;H=W_(H))U++;for(;0<q-U;)L=W_(L),q--;for(;0<U-q;)k=W_(k),U--;for(;q--;){if(L===k||k!==null&&L===k.alternate)break t;L=W_(L),k=W_(k)}L=null}else L=null;T!==null&&Hue(x,b,T,L,!1),A!==null&&P!==null&&Hue(x,P,A,L,!0)}}e:{if(b=h?J_(h):window,T=b.nodeName&&b.nodeName.toLowerCase(),T==="select"||T==="input"&&b.type==="file")var X=rct;else if(Rue(b)){if(afe)X=act;else{X=oct;var ee=nct}}else(T=b.nodeName)&&T.toLowerCase()==="input"&&(b.type==="checkbox"||b.type==="radio")&&(X=ict);if(X&&(X=X(e,h))){ife(x,X,r,g);break e}ee&&ee(e,b,h),e==="focusout"&&(ee=b._wrapperState)&&ee.controlled&&b.type==="number"&&p7(b,"number",b.value)}switch(ee=h?J_(h):window,e){case"focusin":(Rue(ee)||ee.contentEditable==="true")&&(X_=ee,I7=h,k2=null);break;case"focusout":k2=I7=X_=null;break;case"mousedown":T7=!0;break;case"contextmenu":case"mouseup":case"dragend":T7=!1,Uue(x,r,g);break;case"selectionchange":if(uct)break;case"keydown":case"keyup":Uue(x,r,g);}var ne;if(vU)e:{switch(e){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e;}pe=void 0}else K_?nfe(e,r)&&(pe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(pe="onCompositionStart");pe&&(rfe&&r.locale!=="ko"&&(K_||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&K_&&(ne=tfe()):(lg=g,hU="value"in lg?lg.value:lg.textContent,K_=!0)),ee=CN(h,pe),0<ee.length&&(pe=new Oue(pe,e,null,r,g),x.push({event:pe,listeners:ee}),ne?pe.data=ne:(ne=ofe(r),ne!==null&&(pe.data=ne)))),(ne=Xut?Jut(e,r):Qut(e,r))&&(h=CN(h,"onBeforeInput"),0<h.length&&(g=new Oue("onBeforeInput","beforeinput",null,r,g),x.push({event:g,listeners:h}),g.data=ne))}cfe(x,t)})}function Z2(e,t,r){return{instance:e,listener:t,currentTarget:r}}function CN(e,t){for(var r=t+"Capture",n=[];e!==null;){var o=e,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=V2(e,r),i!=null&&n.unshift(Z2(e,i,o)),i=V2(e,t),i!=null&&n.push(Z2(e,i,o))),e=e.return}return n}function W_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Hue(e,t,r,n,o){for(var i=t._reactName,a=[];r!==null&&r!==n;){var u=r,p=u.alternate,h=u.stateNode;if(p!==null&&p===n)break;u.tag===5&&h!==null&&(u=h,o?(p=V2(r,i),p!=null&&a.unshift(Z2(r,p,u))):o||(p=V2(r,i),p!=null&&a.push(Z2(r,p,u)))),r=r.return}a.length!==0&&e.push({event:t,listeners:a})}function AN(){}var X9=null,J9=null;function hfe(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function M7(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Wue=typeof setTimeout=="function"?setTimeout:void 0,cct=typeof clearTimeout=="function"?clearTimeout:void 0;function yU(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function ix(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function $ue(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Q9=0;function fct(e){return{$$typeof:nU,toString:e,valueOf:e}}var QN=Math.random().toString(36).slice(2),ug="__reactFiber$"+QN,DN="__reactProps$"+QN,gx="__reactContainer$"+QN,Yue="__reactEvents$"+QN;function By(e){var t=e[ug];if(t)return t;for(var r=e.parentNode;r;){if(t=r[gx]||r[ug]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=$ue(e);e!==null;){if(r=e[ug])return r;e=$ue(e)}return t}e=r,r=e.parentNode}return null}function rI(e){return e=e[ug]||e[gx],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function J_(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Gt(33))}function e5(e){return e[DN]||null}function mfe(e){var t=e[Yue];return t===void 0&&(t=e[Yue]=new Set),t}var C7=[],Q_=-1;function Sg(e){return{current:e}}function li(e){0>Q_||(e.current=C7[Q_],C7[Q_]=null,Q_--)}function Li(e,t){Q_++,C7[Q_]=e.current,e.current=t}var bg={},Us=Sg(bg),Jl=Sg(!1),Wy=bg;function px(e,t){var r=e.type.contextTypes;if(!r)return bg;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in r)o[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ql(e){return e=e.childContextTypes,e!=null}function NN(){li(Jl),li(Us)}function Zue(e,t,r){if(Us.current!==bg)throw Error(Gt(168));Li(Us,t),Li(Jl,r)}function gfe(e,t,r){var n=e.stateNode;if(e=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var o in n)if(!(o in e))throw Error(Gt(108,tx(t)||"Unknown",o));return vi({},r,n)}function vN(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||bg,Wy=Us.current,Li(Us,e),Li(Jl,Jl.current),!0}function Kue(e,t,r){var n=e.stateNode;if(!n)throw Error(Gt(169));r?(e=gfe(e,t,Wy),n.__reactInternalMemoizedMergedChildContext=e,li(Jl),li(Us),Li(Us,e)):li(Jl),Li(Jl,r)}var _U=null,Hy=null,pct=ka.unstable_runWithPriority,xU=ka.unstable_scheduleCallback,A7=ka.unstable_cancelCallback,dct=ka.unstable_shouldYield,Xue=ka.unstable_requestPaint,D7=ka.unstable_now,hct=ka.unstable_getCurrentPriorityLevel,t5=ka.unstable_ImmediatePriority,vfe=ka.unstable_UserBlockingPriority,yfe=ka.unstable_NormalPriority,_fe=ka.unstable_LowPriority,xfe=ka.unstable_IdlePriority,e7={},mct=Xue!==void 0?Xue:function(){},ah=null,yN=null,t7=!1,Jue=D7(),zs=1e4>Jue?D7:function(){return D7()-Jue};function dx(){switch(hct()){case t5:return 99;case vfe:return 98;case yfe:return 97;case _fe:return 96;case xfe:return 95;default:throw Error(Gt(332));}}function bfe(e){switch(e){case 99:return t5;case 98:return vfe;case 97:return yfe;case 96:return _fe;case 95:return xfe;default:throw Error(Gt(332));}}function $y(e,t){return e=bfe(e),pct(e,t)}function K2(e,t,r){return e=bfe(e),xU(e,t,r)}function Lp(){if(yN!==null){var e=yN;yN=null,A7(e)}wfe()}function wfe(){if(!t7&&ah!==null){t7=!0;var e=0;try{var t=ah;$y(99,function(){for(;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}}),ah=null}catch(r){throw ah!==null&&(ah=ah.slice(e+1)),xU(t5,Lp),r}finally{t7=!1}}}var gct=Ky.ReactCurrentBatchConfig;function Mf(e,t){if(e&&e.defaultProps){t=vi({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var ON=Sg(null),LN=null,ex=null,PN=null;function bU(){PN=ex=LN=null}function wU(e){var t=ON.current;li(ON),e.type._context._currentValue=t}function Efe(e,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)===t){if(r===null||(r.childLanes&t)===t)break;r.childLanes|=t}else e.childLanes|=t,r!==null&&(r.childLanes|=t);e=e.return}}function ax(e,t){LN=e,PN=ex=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Cf=!0),e.firstContext=null)}function xc(e,t){if(PN!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(PN=e,t=1073741823),t={context:e,observedBits:t,next:null},ex===null){if(LN===null)throw Error(Gt(308));ex=t,LN.dependencies={lanes:0,firstContext:t,responders:null}}else ex=ex.next=t;return e._currentValue}var ag=!1;function EU(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function Sfe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function hg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function mg(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}}function Que(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var o=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?o=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?o=i=t:i=i.next=t}else o=i=t;r={baseState:n.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function X2(e,t,r,n){var o=e.updateQueue;ag=!1;var i=o.firstBaseUpdate,a=o.lastBaseUpdate,u=o.shared.pending;if(u!==null){o.shared.pending=null;var p=u,h=p.next;p.next=null,a===null?i=h:a.next=h,a=p;var g=e.alternate;if(g!==null){g=g.updateQueue;var x=g.lastBaseUpdate;x!==a&&(x===null?g.firstBaseUpdate=h:x.next=h,g.lastBaseUpdate=p)}}if(i!==null){x=o.baseState,a=0,g=h=p=null;do{u=i.lane;var b=i.eventTime;if((n&u)===u){g!==null&&(g=g.next={eventTime:b,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var T=e,A=i;switch(u=t,b=r,A.tag){case 1:if(T=A.payload,typeof T=="function"){x=T.call(b,x,u);break e}x=T;break e;case 3:T.flags=T.flags&-4097|64;case 0:if(T=A.payload,u=typeof T=="function"?T.call(b,x,u):T,u==null)break e;x=vi({},x,u);break e;case 2:ag=!0;}}i.callback!==null&&(e.flags|=32,u=o.effects,u===null?o.effects=[i]:u.push(i))}else b={eventTime:b,lane:u,tag:i.tag,payload:i.payload,callback:i.callback,next:null},g===null?(h=g=b,p=x):g=g.next=b,a|=u;if(i=i.next,i===null){if(u=o.shared.pending,u===null)break;i=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}while(!0);g===null&&(p=x),o.baseState=p,o.firstBaseUpdate=h,o.lastBaseUpdate=g,oI|=a,e.lanes=a,e.memoizedState=x}}function ece(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],o=n.callback;if(o!==null){if(n.callback=null,n=r,typeof o!="function")throw Error(Gt(191,o));o.call(n)}}}var Ife=new WN.Component().refs;function kN(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:vi({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var r5={isMounted:function(e){return(e=e._reactInternals)?Xy(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Vu(),o=gg(e),i=hg(n,o);i.payload=t,r!=null&&(i.callback=r),mg(e,i),vg(e,o,n)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Vu(),o=gg(e),i=hg(n,o);i.tag=1,i.payload=t,r!=null&&(i.callback=r),mg(e,i),vg(e,o,n)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Vu(),n=gg(e),o=hg(r,n);o.tag=2,t!=null&&(o.callback=t),mg(e,o),vg(e,n,r)}};function tce(e,t,r,n,o,i,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,a):t.prototype&&t.prototype.isPureReactComponent?!Y2(r,n)||!Y2(o,i):!0}function Tfe(e,t,r){var n=!1,o=bg,i=t.contextType;return typeof i=="object"&&i!==null?i=xc(i):(o=Ql(t)?Wy:Us.current,n=t.contextTypes,i=(n=n!=null)?px(e,o):bg),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=r5,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=i),t}function rce(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&r5.enqueueReplaceState(t,t.state,null)}function N7(e,t,r,n){var o=e.stateNode;o.props=r,o.state=e.memoizedState,o.refs=Ife,EU(e);var i=t.contextType;typeof i=="object"&&i!==null?o.context=xc(i):(i=Ql(t)?Wy:Us.current,o.context=px(e,i)),X2(e,r,o,n),o.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(kN(e,t,i,r),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&r5.enqueueReplaceState(o,o.state,null),X2(e,r,o,n),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4)}var lN=Array.isArray;function v2(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Gt(309));var n=r.stateNode}if(!n)throw Error(Gt(147,e));var o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(i){var a=n.refs;a===Ife&&(a=n.refs={}),i===null?delete a[o]:a[o]=i},t._stringRef=o,t)}if(typeof e!="string")throw Error(Gt(284));if(!r._owner)throw Error(Gt(290,e))}return e}function uN(e,t){if(e.type!=="textarea")throw Error(Gt(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function Mfe(e){function t(P,k){if(e){var q=P.lastEffect;q!==null?(q.nextEffect=k,P.lastEffect=k):P.firstEffect=P.lastEffect=k,k.nextEffect=null,k.flags=8}}function r(P,k){if(!e)return null;for(;k!==null;)t(P,k),k=k.sibling;return null}function n(P,k){for(P=new Map;k!==null;)k.key!==null?P.set(k.key,k):P.set(k.index,k),k=k.sibling;return P}function o(P,k){return P=Eg(P,k),P.index=0,P.sibling=null,P}function i(P,k,q){return P.index=q,e?(q=P.alternate,q!==null?(q=q.index,q<k?(P.flags=2,k):q):(P.flags=2,k)):k}function a(P){return e&&P.alternate===null&&(P.flags=2),P}function u(P,k,q,U){return k===null||k.tag!==6?(k=a7(q,P.mode,U),k.return=P,k):(k=o(k,q),k.return=P,k)}function p(P,k,q,U){return k!==null&&k.elementType===q.type?(U=o(k,q.props),U.ref=v2(P,k,q),U.return=P,U):(U=wN(q.type,q.key,q.props,null,P.mode,U),U.ref=v2(P,k,q),U.return=P,U)}function h(P,k,q,U){return k===null||k.tag!==4||k.stateNode.containerInfo!==q.containerInfo||k.stateNode.implementation!==q.implementation?(k=s7(q,P.mode,U),k.return=P,k):(k=o(k,q.children||[]),k.return=P,k)}function g(P,k,q,U,H){return k===null||k.tag!==7?(k=cx(q,P.mode,U,H),k.return=P,k):(k=o(k,q),k.return=P,k)}function x(P,k,q){if(typeof k=="string"||typeof k=="number")return k=a7(""+k,P.mode,q),k.return=P,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case S2:return q=wN(k.type,k.key,k.props,null,P.mode,q),q.ref=v2(P,null,k),q.return=P,q;case Fy:return k=s7(k,P.mode,q),k.return=P,k;}if(lN(k)||p2(k))return k=cx(k,P.mode,q,null),k.return=P,k;uN(P,k)}return null}function b(P,k,q,U){var H=k!==null?k.key:null;if(typeof q=="string"||typeof q=="number")return H!==null?null:u(P,k,""+q,U);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case S2:return q.key===H?q.type===sg?g(P,k,q.props.children,U,H):p(P,k,q,U):null;case Fy:return q.key===H?h(P,k,q,U):null;}if(lN(q)||p2(q))return H!==null?null:g(P,k,q,U,null);uN(P,q)}return null}function T(P,k,q,U,H){if(typeof U=="string"||typeof U=="number")return P=P.get(q)||null,u(k,P,""+U,H);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case S2:return P=P.get(U.key===null?q:U.key)||null,U.type===sg?g(k,P,U.props.children,H,U.key):p(k,P,U,H);case Fy:return P=P.get(U.key===null?q:U.key)||null,h(k,P,U,H);}if(lN(U)||p2(U))return P=P.get(q)||null,g(k,P,U,H,null);uN(k,U)}return null}function A(P,k,q,U){for(var H=null,X=null,ee=k,ne=k=0,pe=null;ee!==null&&ne<q.length;ne++){ee.index>ne?(pe=ee,ee=null):pe=ee.sibling;var ue=b(P,ee,q[ne],U);if(ue===null){ee===null&&(ee=pe);break}e&&ee&&ue.alternate===null&&t(P,ee),k=i(ue,k,ne),X===null?H=ue:X.sibling=ue,X=ue,ee=pe}if(ne===q.length)return r(P,ee),H;if(ee===null){for(;ne<q.length;ne++)ee=x(P,q[ne],U),ee!==null&&(k=i(ee,k,ne),X===null?H=ee:X.sibling=ee,X=ee);return H}for(ee=n(P,ee);ne<q.length;ne++)pe=T(ee,P,ne,q[ne],U),pe!==null&&(e&&pe.alternate!==null&&ee.delete(pe.key===null?ne:pe.key),k=i(pe,k,ne),X===null?H=pe:X.sibling=pe,X=pe);return e&&ee.forEach(function(Ie){return t(P,Ie)}),H}function L(P,k,q,U){var H=p2(q);if(typeof H!="function")throw Error(Gt(150));if(q=H.call(q),q==null)throw Error(Gt(151));for(var X=H=null,ee=k,ne=k=0,pe=null,ue=q.next();ee!==null&&!ue.done;ne++,ue=q.next()){ee.index>ne?(pe=ee,ee=null):pe=ee.sibling;var Ie=b(P,ee,ue.value,U);if(Ie===null){ee===null&&(ee=pe);break}e&&ee&&Ie.alternate===null&&t(P,ee),k=i(Ie,k,ne),X===null?H=Ie:X.sibling=Ie,X=Ie,ee=pe}if(ue.done)return r(P,ee),H;if(ee===null){for(;!ue.done;ne++,ue=q.next())ue=x(P,ue.value,U),ue!==null&&(k=i(ue,k,ne),X===null?H=ue:X.sibling=ue,X=ue);return H}for(ee=n(P,ee);!ue.done;ne++,ue=q.next())ue=T(ee,P,ne,ue.value,U),ue!==null&&(e&&ue.alternate!==null&&ee.delete(ue.key===null?ne:ue.key),k=i(ue,k,ne),X===null?H=ue:X.sibling=ue,X=ue);return e&&ee.forEach(function(Re){return t(P,Re)}),H}return function(P,k,q,U){var H=typeof q=="object"&&q!==null&&q.type===sg&&q.key===null;H&&(q=q.props.children);var X=typeof q=="object"&&q!==null;if(X)switch(q.$$typeof){case S2:e:{for(X=q.key,H=k;H!==null;){if(H.key===X){switch(H.tag){case 7:if(q.type===sg){r(P,H.sibling),k=o(H,q.props.children),k.return=P,P=k;break e}break;default:if(H.elementType===q.type){r(P,H.sibling),k=o(H,q.props),k.ref=v2(P,H,q),k.return=P,P=k;break e}}r(P,H);break}else t(P,H);H=H.sibling}q.type===sg?(k=cx(q.props.children,P.mode,U,q.key),k.return=P,P=k):(U=wN(q.type,q.key,q.props,null,P.mode,U),U.ref=v2(P,k,q),U.return=P,P=U)}return a(P);case Fy:e:{for(H=q.key;k!==null;){if(k.key===H){if(k.tag===4&&k.stateNode.containerInfo===q.containerInfo&&k.stateNode.implementation===q.implementation){r(P,k.sibling),k=o(k,q.children||[]),k.return=P,P=k;break e}else{r(P,k);break}}else t(P,k);k=k.sibling}k=s7(q,P.mode,U),k.return=P,P=k}return a(P);}if(typeof q=="string"||typeof q=="number")return q=""+q,k!==null&&k.tag===6?(r(P,k.sibling),k=o(k,q),k.return=P,P=k):(r(P,k),k=a7(q,P.mode,U),k.return=P,P=k),a(P);if(lN(q))return A(P,k,q,U);if(p2(q))return L(P,k,q,U);if(X&&uN(P,q),typeof q=="undefined"&&!H)switch(P.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Gt(152,tx(P.type)||"Component"));}return r(P,k)}}var RN=Mfe(!0),Cfe=Mfe(!1),nI={},Np=Sg(nI),J2=Sg(nI),Q2=Sg(nI);function Vy(e){if(e===nI)throw Error(Gt(174));return e}function O7(e,t){switch(Li(Q2,t),Li(J2,e),Li(Np,nI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:g7(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=g7(t,e);}li(Np),Li(Np,t)}function hx(){li(Np),li(J2),li(Q2)}function nce(e){Vy(Q2.current);var t=Vy(Np.current),r=g7(t,e.type);t!==r&&(Li(J2,e),Li(Np,r))}function SU(e){J2.current===e&&(li(Np),li(J2))}var Oi=Sg(0);function jN(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var lh=null,cg=null,Op=!1;function Afe(e,t){var r=yc(5,null,null,0);r.elementType="DELETED",r.type="DELETED",r.stateNode=t,r.return=e,r.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=r,e.lastEffect=r):e.firstEffect=e.lastEffect=r}function oce(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function L7(e){if(Op){var t=cg;if(t){var r=t;if(!oce(e,t)){if(t=ix(r.nextSibling),!t||!oce(e,t)){e.flags=e.flags&-1025|2,Op=!1,lh=e;return}Afe(lh,r)}lh=e,cg=ix(t.firstChild)}else e.flags=e.flags&-1025|2,Op=!1,lh=e}}function ice(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;lh=e}function cN(e){if(e!==lh)return!1;if(!Op)return ice(e),Op=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!M7(t,e.memoizedProps))for(t=cg;t;)Afe(e,t),t=ix(t.nextSibling);if(ice(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Gt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){cg=ix(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}cg=null}}else cg=lh?ix(e.stateNode.nextSibling):null;return!0}function r7(){cg=lh=null,Op=!1}var sx=[];function IU(){for(var e=0;e<sx.length;e++)sx[e]._workInProgressVersionPrimary=null;sx.length=0}var R2=Ky.ReactCurrentDispatcher,_c=Ky.ReactCurrentBatchConfig,eI=0,Bi=null,qs=null,ns=null,qN=!1,j2=!1;function Kl(){throw Error(Gt(321))}function TU(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!vc(e[r],t[r]))return!1;return!0}function MU(e,t,r,n,o,i){if(eI=i,Bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R2.current=e===null||e.memoizedState===null?yct:_ct,e=r(n,o),j2){i=0;do{if(j2=!1,!(25>i))throw Error(Gt(301));i+=1,ns=qs=null,t.updateQueue=null,R2.current=xct,e=r(n,o)}while(j2)}if(R2.current=BN,t=qs!==null&&qs.next!==null,eI=0,ns=qs=Bi=null,qN=!1,t)throw Error(Gt(300));return e}function Gy(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ns===null?Bi.memoizedState=ns=e:ns=ns.next=e,ns}function Jy(){if(qs===null){var e=Bi.alternate;e=e!==null?e.memoizedState:null}else e=qs.next;var t=ns===null?Bi.memoizedState:ns.next;if(t!==null)ns=t,qs=e;else{if(e===null)throw Error(Gt(310));qs=e,e={memoizedState:qs.memoizedState,baseState:qs.baseState,baseQueue:qs.baseQueue,queue:qs.queue,next:null},ns===null?Bi.memoizedState=ns=e:ns=ns.next=e}return ns}function Ap(e,t){return typeof t=="function"?t(e):t}function y2(e){var t=Jy(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var n=qs,o=n.baseQueue,i=r.pending;if(i!==null){if(o!==null){var a=o.next;o.next=i.next,i.next=a}n.baseQueue=o=i,r.pending=null}if(o!==null){o=o.next,n=n.baseState;var u=a=i=null,p=o;do{var h=p.lane;if((eI&h)===h)u!==null&&(u=u.next={lane:0,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null}),n=p.eagerReducer===e?p.eagerState:e(n,p.action);else{var g={lane:h,action:p.action,eagerReducer:p.eagerReducer,eagerState:p.eagerState,next:null};u===null?(a=u=g,i=n):u=u.next=g,Bi.lanes|=h,oI|=h}p=p.next}while(p!==null&&p!==o);u===null?i=n:u.next=a,vc(n,t.memoizedState)||(Cf=!0),t.memoizedState=n,t.baseState=i,t.baseQueue=u,r.lastRenderedState=n}return[t.memoizedState,r.dispatch]}function _2(e){var t=Jy(),r=t.queue;if(r===null)throw Error(Gt(311));r.lastRenderedReducer=e;var n=r.dispatch,o=r.pending,i=t.memoizedState;if(o!==null){r.pending=null;var a=o=o.next;do i=e(i,a.action),a=a.next;while(a!==o);vc(i,t.memoizedState)||(Cf=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function ace(e,t,r){var n=t._getVersion;n=n(t._source);var o=t._workInProgressVersionPrimary;if(o!==null?e=o===n:(e=e.mutableReadLanes,(e=(eI&e)===e)&&(t._workInProgressVersionPrimary=n,sx.push(t))),e)return r(t._source);throw sx.push(t),Error(Gt(350))}function Dfe(e,t,r,n){var o=xl;if(o===null)throw Error(Gt(349));var i=t._getVersion,a=i(t._source),u=R2.current,p=u.useState(function(){return ace(o,t,r)}),h=p[1],g=p[0];p=ns;var x=e.memoizedState,b=x.refs,T=b.getSnapshot,A=x.source;x=x.subscribe;var L=Bi;return e.memoizedState={refs:b,source:t,subscribe:n},u.useEffect(function(){b.getSnapshot=r,b.setSnapshot=h;var P=i(t._source);if(!vc(a,P)){P=r(t._source),vc(g,P)||(h(P),P=gg(L),o.mutableReadLanes|=P&o.pendingLanes),P=o.mutableReadLanes,o.entangledLanes|=P;for(var k=o.entanglements,q=P;0<q;){var U=31-xg(q),H=1<<U;k[U]|=P,q&=~H}}},[r,t,n]),u.useEffect(function(){return n(t._source,function(){var P=b.getSnapshot,k=b.setSnapshot;try{k(P(t._source));var q=gg(L);o.mutableReadLanes|=q&o.pendingLanes}catch(U){k(function(){throw U})}})},[t,n]),vc(T,r)&&vc(A,t)&&vc(x,n)||(e={pending:null,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:g},e.dispatch=h=DU.bind(null,Bi,e),p.queue=e,p.baseQueue=null,g=ace(o,t,r),p.memoizedState=p.baseState=g),g}function Nfe(e,t,r){var n=Jy();return Dfe(n,e,t,r)}function x2(e){var t=Gy();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Ap,lastRenderedState:e},e=e.dispatch=DU.bind(null,Bi,e),[t.memoizedState,e]}function zN(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Bi.updateQueue,t===null?(t={lastEffect:null},Bi.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function sce(e){var t=Gy();return e={current:e},t.memoizedState=e}function FN(){return Jy().memoizedState}function P7(e,t,r,n){var o=Gy();Bi.flags|=e,o.memoizedState=zN(1|t,r,void 0,n===void 0?null:n)}function CU(e,t,r,n){var o=Jy();n=n===void 0?null:n;var i=void 0;if(qs!==null){var a=qs.memoizedState;if(i=a.destroy,n!==null&&TU(n,a.deps)){zN(t,r,i,n);return}}Bi.flags|=e,o.memoizedState=zN(1|t,r,i,n)}function lce(e,t){return P7(516,4,e,t)}function UN(e,t){return CU(516,4,e,t)}function Ofe(e,t){return CU(4,2,e,t)}function Lfe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Pfe(e,t,r){return r=r!=null?r.concat([e]):null,CU(4,2,Lfe.bind(null,t,e),r)}function AU(){}function kfe(e,t){var r=Jy();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&TU(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Rfe(e,t){var r=Jy();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&TU(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function vct(e,t){var r=dx();$y(98>r?98:r,function(){e(!0)}),$y(97<r?97:r,function(){var n=_c.transition;_c.transition=1;try{e(!1),t()}finally{_c.transition=n}})}function DU(e,t,r){var n=Vu(),o=gg(e),i={lane:o,action:r,eagerReducer:null,eagerState:null,next:null},a=t.pending;if(a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i,a=e.alternate,e===Bi||a!==null&&a===Bi)j2=qN=!0;else{if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var u=t.lastRenderedState,p=a(u,r);if(i.eagerReducer=a,i.eagerState=p,vc(p,u))return}catch(h){}finally{}vg(e,o,n)}}var BN={readContext:xc,useCallback:Kl,useContext:Kl,useEffect:Kl,useImperativeHandle:Kl,useLayoutEffect:Kl,useMemo:Kl,useReducer:Kl,useRef:Kl,useState:Kl,useDebugValue:Kl,useDeferredValue:Kl,useTransition:Kl,useMutableSource:Kl,useOpaqueIdentifier:Kl,unstable_isNewReconciler:!1},yct={readContext:xc,useCallback:function(e,t){return Gy().memoizedState=[e,t===void 0?null:t],e},useContext:xc,useEffect:lce,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,P7(4,2,Lfe.bind(null,t,e),r)},useLayoutEffect:function(e,t){return P7(4,2,e,t)},useMemo:function(e,t){var r=Gy();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Gy();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e=n.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=DU.bind(null,Bi,e),[n.memoizedState,e]},useRef:sce,useState:x2,useDebugValue:AU,useDeferredValue:function(e){var t=x2(e),r=t[0],n=t[1];return lce(function(){var o=_c.transition;_c.transition=1;try{n(e)}finally{_c.transition=o}},[e]),r},useTransition:function(){var e=x2(!1),t=e[0];return e=vct.bind(null,e[1]),sce(e),[e,t]},useMutableSource:function(e,t,r){var n=Gy();return n.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:r},Dfe(n,e,t,r)},useOpaqueIdentifier:function(){if(Op){var e=!1,t=fct(function(){throw e||(e=!0,r("r:"+(Q9++).toString(36))),Error(Gt(355))}),r=x2(t)[1];return!(Bi.mode&2)&&(Bi.flags|=516,zN(5,function(){r("r:"+(Q9++).toString(36))},void 0,null)),t}return t="r:"+(Q9++).toString(36),x2(t),t},unstable_isNewReconciler:!1},_ct={readContext:xc,useCallback:kfe,useContext:xc,useEffect:UN,useImperativeHandle:Pfe,useLayoutEffect:Ofe,useMemo:Rfe,useReducer:y2,useRef:FN,useState:function(){return y2(Ap)},useDebugValue:AU,useDeferredValue:function(e){var t=y2(Ap),r=t[0],n=t[1];return UN(function(){var o=_c.transition;_c.transition=1;try{n(e)}finally{_c.transition=o}},[e]),r},useTransition:function(){var e=y2(Ap)[0];return[FN().current,e]},useMutableSource:Nfe,useOpaqueIdentifier:function(){return y2(Ap)[0]},unstable_isNewReconciler:!1},xct={readContext:xc,useCallback:kfe,useContext:xc,useEffect:UN,useImperativeHandle:Pfe,useLayoutEffect:Ofe,useMemo:Rfe,useReducer:_2,useRef:FN,useState:function(){return _2(Ap)},useDebugValue:AU,useDeferredValue:function(e){var t=_2(Ap),r=t[0],n=t[1];return UN(function(){var o=_c.transition;_c.transition=1;try{n(e)}finally{_c.transition=o}},[e]),r},useTransition:function(){var e=_2(Ap)[0];return[FN().current,e]},useMutableSource:Nfe,useOpaqueIdentifier:function(){return _2(Ap)[0]},unstable_isNewReconciler:!1},bct=Ky.ReactCurrentOwner,Cf=!1;function Xl(e,t,r,n){t.child=e===null?Cfe(t,null,r,n):RN(t,e.child,r,n)}function uce(e,t,r,n,o){r=r.render;var i=t.ref;return ax(t,o),n=MU(e,t,r,n,i,o),e!==null&&!Cf?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,uh(e,t,o)):(t.flags|=1,Xl(e,t,n,o),t.child)}function cce(e,t,r,n,o,i){if(e===null){var a=r.type;return typeof a=="function"&&!RU(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,jfe(e,t,a,n,o,i)):(e=wN(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}return a=e.child,!(o&i)&&(o=a.memoizedProps,r=r.compare,r=r!==null?r:Y2,r(o,n)&&e.ref===t.ref)?uh(e,t,i):(t.flags|=1,e=Eg(a,n),e.ref=t.ref,e.return=t,t.child=e)}function jfe(e,t,r,n,o,i){if(e!==null&&Y2(e.memoizedProps,n)&&e.ref===t.ref)if(Cf=!1,(i&o)!==0)e.flags&16384&&(Cf=!0);else return t.lanes=e.lanes,uh(e,t,i);return k7(e,t,r,n,i)}function n7(e,t,r){var n=t.pendingProps,o=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden"||n.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},pN(t,r);else if(r&1073741824)t.memoizedState={baseLanes:0},pN(t,i!==null?i.baseLanes:r);else return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},pN(t,e),null;}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,pN(t,n);return Xl(e,t,o,r),t.child}function qfe(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=128)}function k7(e,t,r,n,o){var i=Ql(r)?Wy:Us.current;return i=px(t,i),ax(t,o),r=MU(e,t,r,n,i,o),e!==null&&!Cf?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~o,uh(e,t,o)):(t.flags|=1,Xl(e,t,r,o),t.child)}function fce(e,t,r,n,o){if(Ql(r)){var i=!0;vN(t)}else i=!1;if(ax(t,o),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),Tfe(t,r,n),N7(t,r,n,o),n=!0;else if(e===null){var a=t.stateNode,u=t.memoizedProps;a.props=u;var p=a.context,h=r.contextType;typeof h=="object"&&h!==null?h=xc(h):(h=Ql(r)?Wy:Us.current,h=px(t,h));var g=r.getDerivedStateFromProps,x=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function";x||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==n||p!==h)&&rce(t,a,n,h),ag=!1;var b=t.memoizedState;a.state=b,X2(t,n,a,o),p=t.memoizedState,u!==n||b!==p||Jl.current||ag?(typeof g=="function"&&(kN(t,r,g,n),p=t.memoizedState),(u=ag||tce(t,r,u,n,b,p,h))?(x||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4)):(typeof a.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=h,n=u):(typeof a.componentDidMount=="function"&&(t.flags|=4),n=!1)}else{a=t.stateNode,Sfe(e,t),u=t.memoizedProps,h=t.type===t.elementType?u:Mf(t.type,u),a.props=h,x=t.pendingProps,b=a.context,p=r.contextType,typeof p=="object"&&p!==null?p=xc(p):(p=Ql(r)?Wy:Us.current,p=px(t,p));var T=r.getDerivedStateFromProps;(g=typeof T=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(u!==x||b!==p)&&rce(t,a,n,p),ag=!1,b=t.memoizedState,a.state=b,X2(t,n,a,o);var A=t.memoizedState;u!==x||b!==A||Jl.current||ag?(typeof T=="function"&&(kN(t,r,T,n),A=t.memoizedState),(h=ag||tce(t,r,h,n,b,A,p))?(g||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,A,p),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,A,p)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=256),t.memoizedProps=n,t.memoizedState=A),a.props=n,a.state=A,a.context=p,n=h):(typeof a.componentDidUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&b===e.memoizedState||(t.flags|=256),n=!1)}return R7(e,t,r,n,i,o)}function R7(e,t,r,n,o,i){qfe(e,t);var a=(t.flags&64)!==0;if(!n&&!a)return o&&Kue(t,r,!1),uh(e,t,i);n=t.stateNode,bct.current=t;var u=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&a?(t.child=RN(t,e.child,null,i),t.child=RN(t,null,u,i)):Xl(e,t,u,i),t.memoizedState=n.state,o&&Kue(t,r,!0),t.child}function pce(e){var t=e.stateNode;t.pendingContext?Zue(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Zue(e,t.context,!1),O7(e,t.containerInfo)}var fN={dehydrated:null,retryLane:0};function dce(e,t,r){var n=t.pendingProps,o=Oi.current,i=!1,a;return(a=(t.flags&64)!==0)||(a=e!==null&&e.memoizedState===null?!1:(o&2)!==0),a?(i=!0,t.flags&=-65):e!==null&&e.memoizedState===null||n.fallback===void 0||n.unstable_avoidThisFallback===!0||(o|=1),Li(Oi,o&1),e===null?(n.fallback!==void 0&&L7(t),e=n.children,o=n.fallback,i?(e=hce(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=fN,e):typeof n.unstable_expectedLoadTime=="number"?(e=hce(t,e,o,r),t.child.memoizedState={baseLanes:r},t.memoizedState=fN,t.lanes=33554432,e):(r=jU({mode:"visible",children:e},t.mode,r,null),r.return=t,t.child=r)):e.memoizedState!==null?i?(n=gce(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=fN,n):(r=mce(e,t,n.children,r),t.memoizedState=null,r):i?(n=gce(e,t,n.children,n.fallback,r),i=t.child,o=e.child.memoizedState,i.memoizedState=o===null?{baseLanes:r}:{baseLanes:o.baseLanes|r},i.childLanes=e.childLanes&~r,t.memoizedState=fN,n):(r=mce(e,t,n.children,r),t.memoizedState=null,r)}function hce(e,t,r,n){var o=e.mode,i=e.child;return t={mode:"hidden",children:t},!(o&2)&&i!==null?(i.childLanes=0,i.pendingProps=t):i=jU(t,o,0,null),r=cx(r,o,n,null),i.return=e,r.return=e,i.sibling=r,e.child=i,r}function mce(e,t,r,n){var o=e.child;return e=o.sibling,r=Eg(o,{mode:"visible",children:r}),!(t.mode&2)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=r}function gce(e,t,r,n,o){var i=t.mode,a=e.child;e=a.sibling;var u={mode:"hidden",children:r};return!(i&2)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=u,a=r.lastEffect,a!==null?(t.firstEffect=r.firstEffect,t.lastEffect=a,a.nextEffect=null):t.firstEffect=t.lastEffect=null):r=Eg(a,u),e!==null?n=Eg(e,n):(n=cx(n,i,o,null),n.flags|=2),n.return=t,r.return=t,r.sibling=n,t.child=r,n}function vce(e,t){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Efe(e.return,t)}function o7(e,t,r,n,o,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:o,lastEffect:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=o,a.lastEffect=i)}function yce(e,t,r){var n=t.pendingProps,o=n.revealOrder,i=n.tail;if(Xl(e,t,n.children,r),n=Oi.current,n&2)n=n&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&vce(e,r);else if(e.tag===19)vce(e,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(Li(Oi,n),!(t.mode&2))t.memoizedState=null;else switch(o){case"forwards":for(r=t.child,o=null;r!==null;)e=r.alternate,e!==null&&jN(e)===null&&(o=r),r=r.sibling;r=o,r===null?(o=t.child,t.child=null):(o=r.sibling,r.sibling=null),o7(t,!1,o,r,i,t.lastEffect);break;case"backwards":for(r=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&jN(e)===null){t.child=o;break}e=o.sibling,o.sibling=r,r=o,o=e}o7(t,!0,r,null,i,t.lastEffect);break;case"together":o7(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function uh(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),oI|=t.lanes,r&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(Gt(153));if(t.child!==null){for(e=t.child,r=Eg(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Eg(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}return null}var zfe,j7,Ffe,Ufe;zfe=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};j7=function(){};Ffe=function(e,t,r,n){var o=e.memoizedProps;if(o!==n){e=t.stateNode,Vy(Np.current);var i=null;switch(r){case"input":o=c7(e,o),n=c7(e,n),i=[];break;case"option":o=d7(e,o),n=d7(e,n),i=[];break;case"select":o=vi({},o,{value:void 0}),n=vi({},n,{value:void 0}),i=[];break;case"textarea":o=h7(e,o),n=h7(e,n),i=[];break;default:typeof o.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=AN);}v7(r,n);var a;r=null;for(h in o)if(!n.hasOwnProperty(h)&&o.hasOwnProperty(h)&&o[h]!=null)if(h==="style"){var u=o[h];for(a in u)u.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(U2.hasOwnProperty(h)?i||(i=[]):(i=i||[]).push(h,null));for(h in n){var p=n[h];if(u=o!=null?o[h]:void 0,n.hasOwnProperty(h)&&p!==u&&(p!=null||u!=null))if(h==="style"){if(u){for(a in u)!u.hasOwnProperty(a)||p&&p.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in p)p.hasOwnProperty(a)&&u[a]!==p[a]&&(r||(r={}),r[a]=p[a])}else r||(i||(i=[]),i.push(h,r)),r=p;}else h==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,u=u?u.__html:void 0,p!=null&&u!==p&&(i=i||[]).push(h,p)):h==="children"?typeof p!="string"&&typeof p!="number"||(i=i||[]).push(h,""+p):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(U2.hasOwnProperty(h)?(p!=null&&h==="onScroll"&&si("scroll",e),i||u===p||(i=[])):typeof p=="object"&&p!==null&&p.$$typeof===nU?p.toString():(i=i||[]).push(h,p))}r&&(i=i||[]).push("style",r);var h=i;(t.updateQueue=h)&&(t.flags|=4)}};Ufe=function(e,t,r,n){r!==n&&(t.flags|=4)};function b2(e,t){if(!Op)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null;}}function wct(e,t,r){var n=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Ql(t.type)&&NN(),null;case 3:return hx(),li(Jl),li(Us),IU(),n=t.stateNode,n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(cN(t)?t.flags|=4:n.hydrate||(t.flags|=256)),j7(t),null;case 5:SU(t);var o=Vy(Q2.current);if(r=t.type,e!==null&&t.stateNode!=null)Ffe(e,t,r,n,o),e.ref!==t.ref&&(t.flags|=128);else{if(!n){if(t.stateNode===null)throw Error(Gt(166));return null}if(e=Vy(Np.current),cN(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[ug]=t,n[DN]=i,r){case"dialog":si("cancel",n),si("close",n);break;case"iframe":case"object":case"embed":si("load",n);break;case"video":case"audio":for(e=0;e<T2.length;e++)si(T2[e],n);break;case"source":si("error",n);break;case"img":case"image":case"link":si("error",n),si("load",n);break;case"details":si("toggle",n);break;case"input":xue(n,i),si("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},si("invalid",n);break;case"textarea":wue(n,i),si("invalid",n);}v7(r,i),e=null;for(var a in i)i.hasOwnProperty(a)&&(o=i[a],a==="children"?typeof o=="string"?n.textContent!==o&&(e=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(e=["children",""+o]):U2.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&si("scroll",n));switch(r){case"input":tN(n),bue(n,i,!0);break;case"textarea":tN(n),Eue(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=AN);}n=e,t.updateQueue=n,n!==null&&(t.flags|=4)}else{switch(a=o.nodeType===9?o:o.ownerDocument,e===m7.html&&(e=Pce(r)),e===m7.html?r==="script"?(e=a.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=a.createElement(r,{is:n.is}):(e=a.createElement(r),r==="select"&&(a=e,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):e=a.createElementNS(e,r),e[ug]=t,e[DN]=n,zfe(e,t,!1,!1),t.stateNode=e,a=y7(r,n),r){case"dialog":si("cancel",e),si("close",e),o=n;break;case"iframe":case"object":case"embed":si("load",e),o=n;break;case"video":case"audio":for(o=0;o<T2.length;o++)si(T2[o],e);o=n;break;case"source":si("error",e),o=n;break;case"img":case"image":case"link":si("error",e),si("load",e),o=n;break;case"details":si("toggle",e),o=n;break;case"input":xue(e,n),o=c7(e,n),si("invalid",e);break;case"option":o=d7(e,n);break;case"select":e._wrapperState={wasMultiple:!!n.multiple},o=vi({},n,{value:void 0}),si("invalid",e);break;case"textarea":wue(e,n),o=h7(e,n),si("invalid",e);break;default:o=n;}v7(r,o);var u=o;for(i in u)if(u.hasOwnProperty(i)){var p=u[i];i==="style"?jce(e,p):i==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&kce(e,p)):i==="children"?typeof p=="string"?(r!=="textarea"||p!=="")&&B2(e,p):typeof p=="number"&&B2(e,""+p):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(U2.hasOwnProperty(i)?p!=null&&i==="onScroll"&&si("scroll",e):p!=null&&X7(e,i,p,a))}switch(r){case"input":tN(e),bue(e,n,!1);break;case"textarea":tN(e),Eue(e);break;case"option":n.value!=null&&e.setAttribute("value",""+_g(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?rx(e,!!n.multiple,i,!1):n.defaultValue!=null&&rx(e,!!n.multiple,n.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=AN);}hfe(r,n)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)Ufe(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Gt(166));r=Vy(Q2.current),Vy(Np.current),cN(t)?(n=t.stateNode,r=t.memoizedProps,n[ug]=t,n.nodeValue!==r&&(t.flags|=4)):(n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ug]=t,t.stateNode=n)}return null;case 13:return li(Oi),n=t.memoizedState,t.flags&64?(t.lanes=r,t):(n=n!==null,r=!1,e===null?t.memoizedProps.fallback!==void 0&&cN(t):r=e.memoizedState!==null,n&&!r&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Oi.current&1?os===0&&(os=3):((os===0||os===3)&&(os=4),xl===null||!(oI&134217727)&&!(yx&134217727)||lx(xl,Fs))),(n||r)&&(t.flags|=4),null);case 4:return hx(),j7(t),e===null&&ffe(t.stateNode.containerInfo),null;case 10:return wU(t),null;case 17:return Ql(t.type)&&NN(),null;case 19:if(li(Oi),n=t.memoizedState,n===null)return null;if(i=(t.flags&64)!==0,a=n.rendering,a===null){if(i)b2(n,!1);else{if(os!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(a=jN(e),a!==null){for(t.flags|=64,b2(n,!1),i=a.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),n.lastEffect===null&&(t.firstEffect=null),t.lastEffect=n.lastEffect,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=2,i.nextEffect=null,i.firstEffect=null,i.lastEffect=null,a=i.alternate,a===null?(i.childLanes=0,i.lanes=e,i.child=null,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,e=a.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Li(Oi,Oi.current&1|2),t.child}e=e.sibling}n.tail!==null&&zs()>V7&&(t.flags|=64,i=!0,b2(n,!1),t.lanes=33554432)}}else{if(!i)if(e=jN(a),e!==null){if(t.flags|=64,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),b2(n,!0),n.tail===null&&n.tailMode==="hidden"&&!a.alternate&&!Op)return t=t.lastEffect=n.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*zs()-n.renderingStartTime>V7&&r!==1073741824&&(t.flags|=64,i=!0,b2(n,!1),t.lanes=33554432);n.isBackwards?(a.sibling=t.child,t.child=a):(r=n.last,r!==null?r.sibling=a:t.child=a,n.last=a)}return n.tail!==null?(r=n.tail,n.rendering=r,n.tail=r.sibling,n.lastEffect=t.lastEffect,n.renderingStartTime=zs(),r.sibling=null,t=Oi.current,Li(Oi,i?t&1|2:t&1),r):null;case 23:case 24:return kU(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&n.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(Gt(156,t.tag))}function Ect(e){switch(e.tag){case 1:Ql(e.type)&&NN();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(hx(),li(Jl),li(Us),IU(),t=e.flags,t&64)throw Error(Gt(285));return e.flags=t&-4097|64,e;case 5:return SU(e),null;case 13:return li(Oi),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return li(Oi),null;case 4:return hx(),null;case 10:return wU(e),null;case 23:case 24:return kU(),null;default:return null;}}function NU(e,t){try{var r="",n=t;do r+=nut(n),n=n.return;while(n);var o=r}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:o}}function q7(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Sct=typeof WeakMap=="function"?WeakMap:Map;function Bfe(e,t,r){r=hg(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){GN||(GN=!0,G7=n),q7(e,t)},r}function Vfe(e,t,r){r=hg(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var o=t.value;r.payload=function(){return q7(e,t),n(o)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){typeof n!="function"&&(Dp===null?Dp=new Set([this]):Dp.add(this),q7(e,t));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),r}var Ict=typeof WeakSet=="function"?WeakSet:Set;function _ce(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){yg(e,r)}else t.current=null}function Tct(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var r=e.memoizedProps,n=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?r:Mf(t.type,r),n),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&yU(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(Gt(163))}function Mct(e,t,r){switch(r.tag){case 0:case 11:case 15:case 22:if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var n=e.create;e.destroy=n()}e=e.next}while(e!==t)}if(t=r.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var o=e;n=o.next,o=o.tag,o&4&&o&1&&(Jfe(r,e),kct(r,e)),e=n}while(e!==t)}return;case 1:e=r.stateNode,r.flags&4&&(t===null?e.componentDidMount():(n=r.elementType===r.type?t.memoizedProps:Mf(r.type,t.memoizedProps),e.componentDidUpdate(n,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=r.updateQueue,t!==null&&ece(r,t,e);return;case 3:if(t=r.updateQueue,t!==null){if(e=null,r.child!==null)switch(r.child.tag){case 5:e=r.child.stateNode;break;case 1:e=r.child.stateNode;}ece(r,t,e)}return;case 5:e=r.stateNode,t===null&&r.flags&4&&hfe(r.type,r.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:r.memoizedState===null&&(r=r.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&$ce(r))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(Gt(163))}function xce(e,t){for(var r=e;;){if(r.tag===5){var n=r.stateNode;if(t)n=n.style,typeof n.setProperty=="function"?n.setProperty("display","none","important"):n.display="none";else{n=r.stateNode;var o=r.memoizedProps.style;o=o!=null&&o.hasOwnProperty("display")?o.display:null,n.style.display=Rce("display",o)}}else if(r.tag===6)r.stateNode.nodeValue=t?"":r.memoizedProps;else if((r.tag!==23&&r.tag!==24||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}}function bce(e,t){if(Hy&&typeof Hy.onCommitFiberUnmount=="function")try{Hy.onCommitFiberUnmount(_U,t)}catch(i){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var r=e=e.next;do{var n=r,o=n.destroy;if(n=n.tag,o!==void 0)if(n&4)Jfe(t,r);else{n=t;try{o()}catch(i){yg(n,i)}}r=r.next}while(r!==e)}break;case 1:if(_ce(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(i){yg(t,i)}break;case 5:_ce(t);break;case 4:Gfe(e,t);}}function wce(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function Ece(e){return e.tag===5||e.tag===3||e.tag===4}function Sce(e){e:{for(var t=e.return;t!==null;){if(Ece(t))break e;t=t.return}throw Error(Gt(160))}var r=t;switch(t=r.stateNode,r.tag){case 5:var n=!1;break;case 3:t=t.containerInfo,n=!0;break;case 4:t=t.containerInfo,n=!0;break;default:throw Error(Gt(161));}r.flags&16&&(B2(t,""),r.flags&=-17);e:t:for(r=e;;){for(;r.sibling===null;){if(r.return===null||Ece(r.return)){r=null;break e}r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue t;r.child.return=r,r=r.child}if(!(r.flags&2)){r=r.stateNode;break e}}n?z7(e,r,t):F7(e,r,t)}function z7(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=AN));else if(n!==4&&(e=e.child,e!==null))for(z7(e,t,r),e=e.sibling;e!==null;)z7(e,t,r),e=e.sibling}function F7(e,t,r){var n=e.tag,o=n===5||n===6;if(o)e=o?e.stateNode:e.stateNode.instance,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(F7(e,t,r),e=e.sibling;e!==null;)F7(e,t,r),e=e.sibling}function Gfe(e,t){for(var r=t,n=!1,o,i;;){if(!n){n=r.return;e:for(;;){if(n===null)throw Error(Gt(160));switch(o=n.stateNode,n.tag){case 5:i=!1;break e;case 3:o=o.containerInfo,i=!0;break e;case 4:o=o.containerInfo,i=!0;break e;}n=n.return}n=!0}if(r.tag===5||r.tag===6){e:for(var a=e,u=r,p=u;;)if(bce(a,p),p.child!==null&&p.tag!==4)p.child.return=p,p=p.child;else{if(p===u)break e;for(;p.sibling===null;){if(p.return===null||p.return===u)break e;p=p.return}p.sibling.return=p.return,p=p.sibling}i?(a=o,u=r.stateNode,a.nodeType===8?a.parentNode.removeChild(u):a.removeChild(u)):o.removeChild(r.stateNode)}else if(r.tag===4){if(r.child!==null){o=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(bce(e,r),r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return,r.tag===4&&(n=!1)}r.sibling.return=r.return,r=r.sibling}}function i7(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var n=r=r.next;do(n.tag&3)===3&&(e=n.destroy,n.destroy=void 0,e!==void 0&&e()),n=n.next;while(n!==r)}return;case 1:return;case 5:if(r=t.stateNode,r!=null){n=t.memoizedProps;var o=e!==null?e.memoizedProps:n;e=t.type;var i=t.updateQueue;if(t.updateQueue=null,i!==null){for(r[DN]=n,e==="input"&&n.type==="radio"&&n.name!=null&&Oce(r,n),y7(e,o),t=y7(e,n),o=0;o<i.length;o+=2){var a=i[o],u=i[o+1];a==="style"?jce(r,u):a==="dangerouslySetInnerHTML"?kce(r,u):a==="children"?B2(r,u):X7(r,a,u,t)}switch(e){case"input":f7(r,n);break;case"textarea":Lce(r,n);break;case"select":e=r._wrapperState.wasMultiple,r._wrapperState.wasMultiple=!!n.multiple,i=n.value,i!=null?rx(r,!!n.multiple,i,!1):e!==!!n.multiple&&(n.defaultValue!=null?rx(r,!!n.multiple,n.defaultValue,!0):rx(r,!!n.multiple,n.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(Gt(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:r=t.stateNode,r.hydrate&&(r.hydrate=!1,$ce(r.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(PU=zs(),xce(t.child,!0)),Ice(t);return;case 19:Ice(t);return;case 17:return;case 23:case 24:xce(t,t.memoizedState!==null);return;}throw Error(Gt(163))}function Ice(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Ict),t.forEach(function(n){var o=qct.bind(null,e,n);r.has(n)||(r.add(n),n.then(o,o))})}}function Cct(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var Act=Math.ceil,VN=Ky.ReactCurrentDispatcher,OU=Ky.ReactCurrentOwner,Zr=0,xl=null,ya=null,Fs=0,Yy=0,U7=Sg(0),os=0,n5=null,vx=0,oI=0,yx=0,LU=0,B7=null,PU=0,V7=1/0;function _x(){V7=zs()+500}var vr=null,GN=!1,G7=null,Dp=null,wg=!1,q2=null,M2=90,H7=[],W7=[],ch=null,z2=0,$7=null,_N=-1,sh=0,xN=0,F2=null,bN=!1;function Vu(){return Zr&48?zs():_N!==-1?_N:_N=zs()}function gg(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return dx()===99?1:2;if(sh===0&&(sh=vx),gct.transition!==0){xN!==0&&(xN=B7!==null?B7.pendingLanes:0),e=sh;var t=4186112&~xN;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=dx(),Zr&4&&e===98?e=MN(12,sh):(e=_ut(e),e=MN(e,sh)),e}function vg(e,t,r){if(50<z2)throw z2=0,$7=null,Error(Gt(185));if(e=o5(e,t),e===null)return null;KN(e,t,r),e===xl&&(yx|=t,os===4&&lx(e,Fs));var n=dx();t===1?Zr&8&&!(Zr&48)?Y7(e):(bc(e,r),Zr===0&&(_x(),Lp())):(!(Zr&4)||n!==98&&n!==99||(ch===null?ch=new Set([e]):ch.add(e)),bc(e,r)),B7=e}function o5(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function bc(e,t){for(var r=e.callbackNode,n=e.suspendedLanes,o=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var u=31-xg(a),p=1<<u,h=i[u];if(h===-1){if(!(p&n)||p&o){h=t,$_(p);var g=Jo;i[u]=10<=g?h+250:6<=g?h+5e3:-1}}else h<=t&&(e.expiredLanes|=p);a&=~p}if(n=W2(e,e===xl?Fs:0),t=Jo,n===0)r!==null&&(r!==e7&&A7(r),e.callbackNode=null,e.callbackPriority=0);else{if(r!==null){if(e.callbackPriority===t)return;r!==e7&&A7(r)}t===15?(r=Y7.bind(null,e),ah===null?(ah=[r],yN=xU(t5,wfe)):ah.push(r),r=e7):t===14?r=K2(99,Y7.bind(null,e)):(r=xut(t),r=K2(r,Hfe.bind(null,e))),e.callbackPriority=t,e.callbackNode=r}}function Hfe(e){if(_N=-1,xN=sh=0,Zr&48)throw Error(Gt(327));var t=e.callbackNode;if(Ig()&&e.callbackNode!==t)return null;var r=W2(e,e===xl?Fs:0);if(r===0)return null;var n=r,o=Zr;Zr|=16;var i=Zfe();(xl!==e||Fs!==n)&&(_x(),ux(e,n));do try{Oct();break}catch(u){Yfe(e,u)}while(!0);if(bU(),VN.current=i,Zr=o,ya!==null?n=0:(xl=null,Fs=0,n=os),vx&yx)ux(e,0);else if(n!==0){if(n===2&&(Zr|=64,e.hydrate&&(e.hydrate=!1,yU(e.containerInfo)),r=efe(e),r!==0&&(n=C2(e,r))),n===1)throw t=n5,ux(e,0),lx(e,r),bc(e,zs()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=r,n){case 0:case 1:throw Error(Gt(345));case 2:zy(e);break;case 3:if(lx(e,r),(r&62914560)===r&&(n=PU+500-zs(),10<n)){if(W2(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Vu(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Wue(zy.bind(null,e),n);break}zy(e);break;case 4:if(lx(e,r),(r&4186112)===r)break;for(n=e.eventTimes,o=-1;0<r;){var a=31-xg(r);i=1<<a,a=n[a],a>o&&(o=a),r&=~i}if(r=o,r=zs()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Act(r/1960))-r,10<r){e.timeoutHandle=Wue(zy.bind(null,e),r);break}zy(e);break;case 5:zy(e);break;default:throw Error(Gt(329));}}return bc(e,zs()),e.callbackNode===t?Hfe.bind(null,e):null}function lx(e,t){for(t&=~LU,t&=~yx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-xg(t),n=1<<r;e[r]=-1,t&=~n}}function Y7(e){if(Zr&48)throw Error(Gt(327));if(Ig(),e===xl&&e.expiredLanes&Fs){var t=Fs,r=C2(e,t);vx&yx&&(t=W2(e,t),r=C2(e,t))}else t=W2(e,0),r=C2(e,t);if(e.tag!==0&&r===2&&(Zr|=64,e.hydrate&&(e.hydrate=!1,yU(e.containerInfo)),t=efe(e),t!==0&&(r=C2(e,t))),r===1)throw r=n5,ux(e,0),lx(e,t),bc(e,zs()),r;return e.finishedWork=e.current.alternate,e.finishedLanes=t,zy(e),bc(e,zs()),null}function Dct(){if(ch!==null){var e=ch;ch=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,bc(t,zs())})}Lp()}function Wfe(e,t){var r=Zr;Zr|=1;try{return e(t)}finally{Zr=r,Zr===0&&(_x(),Lp())}}function $fe(e,t){var r=Zr;Zr&=-2,Zr|=8;try{return e(t)}finally{Zr=r,Zr===0&&(_x(),Lp())}}function pN(e,t){Li(U7,Yy),Yy|=t,vx|=t}function kU(){Yy=U7.current,li(U7)}function ux(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,cct(r)),ya!==null)for(r=ya.return;r!==null;){var n=r;switch(n.tag){case 1:n=n.type.childContextTypes,n!=null&&NN();break;case 3:hx(),li(Jl),li(Us),IU();break;case 5:SU(n);break;case 4:hx();break;case 13:li(Oi);break;case 19:li(Oi);break;case 10:wU(n);break;case 23:case 24:kU();}r=r.return}xl=e,ya=Eg(e.current,null),Fs=Yy=vx=t,os=0,n5=null,LU=yx=oI=0}function Yfe(e,t){do{var r=ya;try{if(bU(),R2.current=BN,qN){for(var n=Bi.memoizedState;n!==null;){var o=n.queue;o!==null&&(o.pending=null),n=n.next}qN=!1}if(eI=0,ns=qs=Bi=null,j2=!1,OU.current=null,r===null||r.return===null){os=1,n5=t,ya=null;break}e:{var i=e,a=r.return,u=r,p=t;if(t=Fs,u.flags|=2048,u.firstEffect=u.lastEffect=null,p!==null&&typeof p=="object"&&typeof p.then=="function"){var h=p;if(!(u.mode&2)){var g=u.alternate;g?(u.updateQueue=g.updateQueue,u.memoizedState=g.memoizedState,u.lanes=g.lanes):(u.updateQueue=null,u.memoizedState=null)}var x=(Oi.current&1)!==0,b=a;do{var T;if(T=b.tag===13){var A=b.memoizedState;if(A!==null)T=A.dehydrated!==null;else{var L=b.memoizedProps;T=L.fallback===void 0?!1:L.unstable_avoidThisFallback!==!0?!0:!x}}if(T){var P=b.updateQueue;if(P===null){var k=new Set;k.add(h),b.updateQueue=k}else P.add(h);if(!(b.mode&2)){if(b.flags|=64,u.flags|=16384,u.flags&=-2981,u.tag===1)if(u.alternate===null)u.tag=17;else{var q=hg(-1,1);q.tag=2,mg(u,q)}u.lanes|=1;break e}p=void 0,u=t;var U=i.pingCache;if(U===null?(U=i.pingCache=new Sct,p=new Set,U.set(h,p)):(p=U.get(h),p===void 0&&(p=new Set,U.set(h,p))),!p.has(u)){p.add(u);var H=jct.bind(null,i,h,u);h.then(H,H)}b.flags|=4096,b.lanes=t;break e}b=b.return}while(b!==null);p=Error((tx(u.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}os!==5&&(os=2),p=NU(p,u),b=a;do{switch(b.tag){case 3:i=p,b.flags|=4096,t&=-t,b.lanes|=t;var X=Bfe(b,i,t);Que(b,X);break e;case 1:i=p;var ee=b.type,ne=b.stateNode;if(!(b.flags&64)&&(typeof ee.getDerivedStateFromError=="function"||ne!==null&&typeof ne.componentDidCatch=="function"&&(Dp===null||!Dp.has(ne)))){b.flags|=4096,t&=-t,b.lanes|=t;var pe=Vfe(b,i,t);Que(b,pe);break e}}b=b.return}while(b!==null)}Xfe(r)}catch(ue){t=ue,ya===r&&r!==null&&(ya=r=r.return);continue}break}while(!0)}function Zfe(){var e=VN.current;return VN.current=BN,e===null?BN:e}function C2(e,t){var r=Zr;Zr|=16;var n=Zfe();xl===e&&Fs===t||ux(e,t);do try{Nct();break}catch(o){Yfe(e,o)}while(!0);if(bU(),Zr=r,VN.current=n,ya!==null)throw Error(Gt(261));return xl=null,Fs=0,os}function Nct(){for(;ya!==null;)Kfe(ya)}function Oct(){for(;ya!==null&&!dct();)Kfe(ya)}function Kfe(e){var t=Qfe(e.alternate,e,Yy);e.memoizedProps=e.pendingProps,t===null?Xfe(e):ya=t,OU.current=null}function Xfe(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&2048){if(r=Ect(t),r!==null){r.flags&=2047,ya=r;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(r=wct(r,t,Yy),r!==null){ya=r;return}if(r=t,r.tag!==24&&r.tag!==23||r.memoizedState===null||Yy&1073741824||!(r.mode&4)){for(var n=0,o=r.child;o!==null;)n|=o.lanes|o.childLanes,o=o.sibling;r.childLanes=n}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){ya=t;return}ya=t=e}while(t!==null);os===0&&(os=5)}function zy(e){var t=dx();return $y(99,Lct.bind(null,e,t)),null}function Lct(e,t){do Ig();while(q2!==null);if(Zr&48)throw Error(Gt(327));var r=e.finishedWork;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Gt(177));e.callbackNode=null;var n=r.lanes|r.childLanes,o=n,i=e.pendingLanes&~o;e.pendingLanes=o,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=o,e.mutableReadLanes&=o,e.entangledLanes&=o,o=e.entanglements;for(var a=e.eventTimes,u=e.expirationTimes;0<i;){var p=31-xg(i),h=1<<p;o[p]=0,a[p]=-1,u[p]=-1,i&=~h}if(ch!==null&&!(n&24)&&ch.has(e)&&ch.delete(e),e===xl&&(ya=xl=null,Fs=0),1<r.flags?r.lastEffect!==null?(r.lastEffect.nextEffect=r,n=r.firstEffect):n=r:n=r.firstEffect,n!==null){if(o=Zr,Zr|=32,OU.current=null,X9=hN,a=Fue(),S7(a)){if("selectionStart"in a)u={start:a.selectionStart,end:a.selectionEnd};else e:if(u=(u=a.ownerDocument)&&u.defaultView||window,(h=u.getSelection&&u.getSelection())&&h.rangeCount!==0){u=h.anchorNode,i=h.anchorOffset,p=h.focusNode,h=h.focusOffset;try{u.nodeType,p.nodeType}catch(ue){u=null;break e}var g=0,x=-1,b=-1,T=0,A=0,L=a,P=null;t:for(;;){for(var k;L!==u||i!==0&&L.nodeType!==3||(x=g+i),L!==p||h!==0&&L.nodeType!==3||(b=g+h),L.nodeType===3&&(g+=L.nodeValue.length),(k=L.firstChild)!==null;)P=L,L=k;for(;;){if(L===a)break t;if(P===u&&++T===i&&(x=g),P===p&&++A===h&&(b=g),(k=L.nextSibling)!==null)break;L=P,P=L.parentNode}L=k}u=x===-1||b===-1?null:{start:x,end:b}}else u=null;u=u||{start:0,end:0}}else u=null;J9={focusedElem:a,selectionRange:u},hN=!1,F2=null,bN=!1,vr=n;do try{Pct()}catch(ue){if(vr===null)throw Error(Gt(330));yg(vr,ue),vr=vr.nextEffect}while(vr!==null);F2=null,vr=n;do try{for(a=e;vr!==null;){var q=vr.flags;if(q&16&&B2(vr.stateNode,""),q&128){var U=vr.alternate;if(U!==null){var H=U.ref;H!==null&&(typeof H=="function"?H(null):H.current=null)}}switch(q&1038){case 2:Sce(vr),vr.flags&=-3;break;case 6:Sce(vr),vr.flags&=-3,i7(vr.alternate,vr);break;case 1024:vr.flags&=-1025;break;case 1028:vr.flags&=-1025,i7(vr.alternate,vr);break;case 4:i7(vr.alternate,vr);break;case 8:u=vr,Gfe(a,u);var X=u.alternate;wce(u),X!==null&&wce(X);}vr=vr.nextEffect}}catch(ue){if(vr===null)throw Error(Gt(330));yg(vr,ue),vr=vr.nextEffect}while(vr!==null);if(H=J9,U=Fue(),q=H.focusedElem,a=H.selectionRange,U!==q&&q&&q.ownerDocument&&lfe(q.ownerDocument.documentElement,q)){for(a!==null&&S7(q)&&(U=a.start,H=a.end,H===void 0&&(H=U),("selectionStart"in q)?(q.selectionStart=U,q.selectionEnd=Math.min(H,q.value.length)):(H=(U=q.ownerDocument||document)&&U.defaultView||window,H.getSelection&&(H=H.getSelection(),u=q.textContent.length,X=Math.min(a.start,u),a=a.end===void 0?X:Math.min(a.end,u),!H.extend&&X>a&&(u=a,a=X,X=u),u=zue(q,X),i=zue(q,a),u&&i&&(H.rangeCount!==1||H.anchorNode!==u.node||H.anchorOffset!==u.offset||H.focusNode!==i.node||H.focusOffset!==i.offset)&&(U=U.createRange(),U.setStart(u.node,u.offset),H.removeAllRanges(),X>a?(H.addRange(U),H.extend(i.node,i.offset)):(U.setEnd(i.node,i.offset),H.addRange(U)))))),U=[],H=q;H=H.parentNode;)H.nodeType===1&&U.push({element:H,left:H.scrollLeft,top:H.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<U.length;q++)H=U[q],H.element.scrollLeft=H.left,H.element.scrollTop=H.top}hN=!!X9,J9=X9=null,e.current=r,vr=n;do try{for(q=e;vr!==null;){var ee=vr.flags;if(ee&36&&Mct(q,vr.alternate,vr),ee&128){U=void 0;var ne=vr.ref;if(ne!==null){var pe=vr.stateNode;switch(vr.tag){case 5:U=pe;break;default:U=pe;}typeof ne=="function"?ne(U):ne.current=U}}vr=vr.nextEffect}}catch(ue){if(vr===null)throw Error(Gt(330));yg(vr,ue),vr=vr.nextEffect}while(vr!==null);vr=null,mct(),Zr=o}else e.current=r;if(wg)wg=!1,q2=e,M2=t;else for(vr=n;vr!==null;)t=vr.nextEffect,vr.nextEffect=null,vr.flags&8&&(ee=vr,ee.sibling=null,ee.stateNode=null),vr=t;if(n=e.pendingLanes,n===0&&(Dp=null),n===1?e===$7?z2++:(z2=0,$7=e):z2=0,r=r.stateNode,Hy&&typeof Hy.onCommitFiberRoot=="function")try{Hy.onCommitFiberRoot(_U,r,void 0,(r.current.flags&64)===64)}catch(ue){}if(bc(e,zs()),GN)throw GN=!1,e=G7,G7=null,e;return Zr&8||Lp(),null}function Pct(){for(;vr!==null;){var e=vr.alternate;bN||F2===null||(vr.flags&8?Tue(vr,F2)&&(bN=!0):vr.tag===13&&Cct(e,vr)&&Tue(vr,F2)&&(bN=!0));var t=vr.flags;t&256&&Tct(e,vr),!(t&512)||wg||(wg=!0,K2(97,function(){return Ig(),null})),vr=vr.nextEffect}}function Ig(){if(M2!==90){var e=97<M2?97:M2;return M2=90,$y(e,Rct)}return!1}function kct(e,t){H7.push(t,e),wg||(wg=!0,K2(97,function(){return Ig(),null}))}function Jfe(e,t){W7.push(t,e),wg||(wg=!0,K2(97,function(){return Ig(),null}))}function Rct(){if(q2===null)return!1;var e=q2;if(q2=null,Zr&48)throw Error(Gt(331));var t=Zr;Zr|=32;var r=W7;W7=[];for(var n=0;n<r.length;n+=2){var o=r[n],i=r[n+1],a=o.destroy;if(o.destroy=void 0,typeof a=="function")try{a()}catch(p){if(i===null)throw Error(Gt(330));yg(i,p)}}for(r=H7,H7=[],n=0;n<r.length;n+=2){o=r[n],i=r[n+1];try{var u=o.create;o.destroy=u()}catch(p){if(i===null)throw Error(Gt(330));yg(i,p)}}for(u=e.current.firstEffect;u!==null;)e=u.nextEffect,u.nextEffect=null,u.flags&8&&(u.sibling=null,u.stateNode=null),u=e;return Zr=t,Lp(),!0}function Tce(e,t,r){t=NU(r,t),t=Bfe(e,t,1),mg(e,t),t=Vu(),e=o5(e,1),e!==null&&(KN(e,1,t),bc(e,t))}function yg(e,t){if(e.tag===3)Tce(e,e,t);else for(var r=e.return;r!==null;){if(r.tag===3){Tce(r,e,t);break}else if(r.tag===1){var n=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Dp===null||!Dp.has(n))){e=NU(t,e);var o=Vfe(r,e,1);if(mg(r,o),o=Vu(),r=o5(r,1),r!==null)KN(r,1,o),bc(r,o);else if(typeof n.componentDidCatch=="function"&&(Dp===null||!Dp.has(n)))try{n.componentDidCatch(t,e)}catch(i){}break}}r=r.return}}function jct(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Vu(),e.pingedLanes|=e.suspendedLanes&r,xl===e&&(Fs&r)===r&&(os===4||os===3&&(Fs&62914560)===Fs&&500>zs()-PU?ux(e,0):LU|=r),bc(e,t)}function qct(e,t){var r=e.stateNode;r!==null&&r.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(sh===0&&(sh=vx),t=Y_(62914560&~sh),t===0&&(t=4194304)):t=dx()===99?1:2:t=1),r=Vu(),e=o5(e,t),e!==null&&(KN(e,t,r),bc(e,r))}var Qfe;Qfe=function(e,t,r){var n=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Jl.current)Cf=!0;else if(r&n)Cf=!!(e.flags&16384);else{switch(Cf=!1,t.tag){case 3:pce(t),r7();break;case 5:nce(t);break;case 1:Ql(t.type)&&vN(t);break;case 4:O7(t,t.stateNode.containerInfo);break;case 10:n=t.memoizedProps.value;var o=t.type._context;Li(ON,o._currentValue),o._currentValue=n;break;case 13:if(t.memoizedState!==null)return r&t.child.childLanes?dce(e,t,r):(Li(Oi,Oi.current&1),t=uh(e,t,r),t!==null?t.sibling:null);Li(Oi,Oi.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&64){if(n)return yce(e,t,r);t.flags|=64}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Li(Oi,Oi.current),n)break;return null;case 23:case 24:return t.lanes=0,n7(e,t,r);}return uh(e,t,r)}}else Cf=!1;switch(t.lanes=0,t.tag){case 2:if(n=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=px(t,Us.current),ax(t,r),o=MU(null,t,n,e,o,r),t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ql(n)){var i=!0;vN(t)}else i=!1;t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,EU(t);var a=n.getDerivedStateFromProps;typeof a=="function"&&kN(t,n,a,e),o.updater=r5,t.stateNode=o,o._reactInternals=t,N7(t,n,e,r),t=R7(null,t,n,!0,i,r)}else t.tag=0,Xl(null,t,o,r),t=t.child;return t;case 16:o=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=o._init,o=i(o._payload),t.type=o,i=t.tag=Fct(o),e=Mf(o,e),i){case 0:t=k7(null,t,o,e,r);break e;case 1:t=fce(null,t,o,e,r);break e;case 11:t=uce(null,t,o,e,r);break e;case 14:t=cce(null,t,o,Mf(o.type,e),n,r);break e;}throw Error(Gt(306,o,""))}return t;case 0:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Mf(n,o),k7(e,t,n,o,r);case 1:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Mf(n,o),fce(e,t,n,o,r);case 3:if(pce(t),n=t.updateQueue,e===null||n===null)throw Error(Gt(282));if(n=t.pendingProps,o=t.memoizedState,o=o!==null?o.element:null,Sfe(e,t),X2(t,n,null,r),n=t.memoizedState.element,n===o)r7(),t=uh(e,t,r);else{if(o=t.stateNode,(i=o.hydrate)&&(cg=ix(t.stateNode.containerInfo.firstChild),lh=t,i=Op=!0),i){if(e=o.mutableSourceEagerHydrationData,e!=null)for(o=0;o<e.length;o+=2)i=e[o],i._workInProgressVersionPrimary=e[o+1],sx.push(i);for(r=Cfe(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|1024,r=r.sibling}else Xl(e,t,n,r),r7();t=t.child}return t;case 5:return nce(t),e===null&&L7(t),n=t.type,o=t.pendingProps,i=e!==null?e.memoizedProps:null,a=o.children,M7(n,o)?a=null:i!==null&&M7(n,i)&&(t.flags|=16),qfe(e,t),Xl(e,t,a,r),t.child;case 6:return e===null&&L7(t),null;case 13:return dce(e,t,r);case 4:return O7(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=RN(t,null,n,r):Xl(e,t,n,r),t.child;case 11:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Mf(n,o),uce(e,t,n,o,r);case 7:return Xl(e,t,t.pendingProps,r),t.child;case 8:return Xl(e,t,t.pendingProps.children,r),t.child;case 12:return Xl(e,t,t.pendingProps.children,r),t.child;case 10:e:{n=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value;var u=t.type._context;if(Li(ON,u._currentValue),u._currentValue=i,a!==null)if(u=a.value,i=vc(u,i)?0:(typeof n._calculateChangedBits=="function"?n._calculateChangedBits(u,i):1073741823)|0,i===0){if(a.children===o.children&&!Jl.current){t=uh(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var p=u.dependencies;if(p!==null){a=u.child;for(var h=p.firstContext;h!==null;){if(h.context===n&&h.observedBits&i){u.tag===1&&(h=hg(-1,r&-r),h.tag=2,mg(u,h)),u.lanes|=r,h=u.alternate,h!==null&&(h.lanes|=r),Efe(u.return,r),p.lanes|=r;break}h=h.next}}else a=u.tag===10&&u.type===t.type?null:u.child;if(a!==null)a.return=u;else for(a=u;a!==null;){if(a===t){a=null;break}if(u=a.sibling,u!==null){u.return=a.return,a=u;break}a=a.return}u=a}Xl(e,t,o.children,r),t=t.child}return t;case 9:return o=t.type,i=t.pendingProps,n=i.children,ax(t,r),o=xc(o,i.unstable_observedBits),n=n(o),t.flags|=1,Xl(e,t,n,r),t.child;case 14:return o=t.type,i=Mf(o,t.pendingProps),i=Mf(o.type,i),cce(e,t,o,i,n,r);case 15:return jfe(e,t,t.type,t.pendingProps,n,r);case 17:return n=t.type,o=t.pendingProps,o=t.elementType===n?o:Mf(n,o),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Ql(n)?(e=!0,vN(t)):e=!1,ax(t,r),Tfe(t,n,o),N7(t,n,o,r),R7(null,t,n,!0,e,r);case 19:return yce(e,t,r);case 23:return n7(e,t,r);case 24:return n7(e,t,r);}throw Error(Gt(156,t.tag))};function zct(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function yc(e,t,r,n){return new zct(e,t,r,n)}function RU(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Fct(e){if(typeof e=="function")return RU(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$N)return 11;if(e===YN)return 14}return 2}function Eg(e,t){var r=e.alternate;return r===null?(r=yc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function wN(e,t,r,n,o,i){var a=2;if(n=e,typeof e=="function")RU(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case sg:return cx(r.children,o,i,t);case Ace:a=8,o|=16;break;case J7:a=8,o|=1;break;case A2:return e=yc(12,r,t,o|8),e.elementType=A2,e.type=A2,e.lanes=i,e;case D2:return e=yc(13,r,t,o),e.type=D2,e.elementType=D2,e.lanes=i,e;case EN:return e=yc(19,r,t,o),e.elementType=EN,e.lanes=i,e;case oU:return jU(r,o,i,t);case u7:return e=yc(24,r,t,o),e.elementType=u7,e.lanes=i,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q7:a=10;break e;case eU:a=9;break e;case $N:a=11;break e;case YN:a=14;break e;case tU:a=16,n=null;break e;case rU:a=22;break e;}throw Error(Gt(130,e==null?e:typeof e,""));}return t=yc(a,r,t,o),t.elementType=e,t.type=n,t.lanes=i,t}function cx(e,t,r,n){return e=yc(7,e,n,t),e.lanes=r,e}function jU(e,t,r,n){return e=yc(23,e,n,t),e.elementType=oU,e.lanes=r,e}function a7(e,t,r){return e=yc(6,e,null,t),e.lanes=r,e}function s7(e,t,r){return t=yc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uct(e,t,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=r,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=H9(0),this.expirationTimes=H9(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=H9(0),this.mutableSourceEagerHydrationData=null}function Bct(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fy,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function HN(e,t,r,n){var o=t.current,i=Vu(),a=gg(o);e:if(r){r=r._reactInternals;t:{if(Xy(r)!==r||r.tag!==1)throw Error(Gt(170));var u=r;do{switch(u.tag){case 3:u=u.stateNode.context;break t;case 1:if(Ql(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break t}}u=u.return}while(u!==null);throw Error(Gt(171))}if(r.tag===1){var p=r.type;if(Ql(p)){r=gfe(r,p,u);break e}}r=u}else r=bg;return t.context===null?t.context=r:t.pendingContext=r,t=hg(i,a),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),mg(o,t),vg(o,a,i),a}function l7(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function Mce(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function qU(e,t){Mce(e,t),(e=e.alternate)&&Mce(e,t)}function Vct(){return null}function zU(e,t,r){var n=r!=null&&r.hydrationOptions!=null&&r.hydrationOptions.mutableSources||null;if(r=new Uct(e,t,r!=null&&r.hydrate===!0),t=yc(3,null,null,t===2?7:t===1?3:0),r.current=t,t.stateNode=r,EU(t),e[gx]=r.current,ffe(e.nodeType===8?e.parentNode:e),n)for(e=0;e<n.length;e++){t=n[e];var o=t._getVersion;o=o(t._source),r.mutableSourceEagerHydrationData==null?r.mutableSourceEagerHydrationData=[t,o]:r.mutableSourceEagerHydrationData.push(t,o)}this._internalRoot=r}zU.prototype.render=function(e){HN(e,this._internalRoot,null,null)};zU.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;HN(null,e,null,function(){t[gx]=null})};function iI(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Gct(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var r;r=e.lastChild;)e.removeChild(r);return new zU(e,0,t?{hydrate:!0}:void 0)}function i5(e,t,r,n,o){var i=r._reactRootContainer;if(i){var a=i._internalRoot;if(typeof o=="function"){var u=o;o=function(){var h=l7(a);u.call(h)}}HN(t,a,e,o)}else{if(i=r._reactRootContainer=Gct(r,n),a=i._internalRoot,typeof o=="function"){var p=o;o=function(){var h=l7(a);p.call(h)}}$fe(function(){HN(t,a,e,o)})}return l7(a)}Gce=function(e){if(e.tag===13){var t=Vu();vg(e,4,t),qU(e,4)}};uU=function(e){if(e.tag===13){var t=Vu();vg(e,67108864,t),qU(e,67108864)}};Hce=function(e){if(e.tag===13){var t=Vu(),r=gg(e);vg(e,r,t),qU(e,r)}};Wce=function(e,t){return t()};_7=function(e,t,r){switch(t){case"input":if(f7(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var o=e5(n);if(!o)throw Error(Gt(90));Nce(n),f7(n,o)}}}break;case"textarea":Lce(e,r);break;case"select":t=r.value,t!=null&&rx(e,!!r.multiple,t,!1);}};aU=Wfe;Fce=function(e,t,r,n,o){var i=Zr;Zr|=4;try{return $y(98,e.bind(null,t,r,n,o))}finally{Zr=i,Zr===0&&(_x(),Lp())}};sU=function(){!(Zr&49)&&(Dct(),Ig())};Uce=function(e,t){var r=Zr;Zr|=2;try{return e(t)}finally{Zr=r,Zr===0&&(_x(),Lp())}};function epe(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!iI(t))throw Error(Gt(200));return Bct(e,t,null,r)}var Hct={Events:[rI,J_,e5,qce,zce,Ig,{current:!1}]},w2={findFiberByHostInstance:By,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Wct={bundleType:w2.bundleType,version:w2.version,rendererPackageName:w2.rendererPackageName,rendererConfig:w2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ky.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Vce(e),e===null?null:e.stateNode},findFiberByHostInstance:w2.findFiberByHostInstance||Vct,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(E2=__REACT_DEVTOOLS_GLOBAL_HOOK__,!E2.isDisabled&&E2.supportsFiber))try{_U=E2.inject(Wct),Hy=E2}catch(e){}var E2;wc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Hct;wc.createPortal=epe;wc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Gt(188)):Error(Gt(268,Object.keys(e)));return e=Vce(t),e=e===null?null:e.stateNode,e};wc.flushSync=function(e,t){var r=Zr;if(r&48)return e(t);Zr|=1;try{if(e)return $y(99,e.bind(null,t))}finally{Zr=r,Lp()}};wc.hydrate=function(e,t,r){if(!iI(t))throw Error(Gt(200));return i5(null,e,t,!0,r)};wc.render=function(e,t,r){if(!iI(t))throw Error(Gt(200));return i5(null,e,t,!1,r)};wc.unmountComponentAtNode=function(e){if(!iI(e))throw Error(Gt(40));return e._reactRootContainer?($fe(function(){i5(null,null,e,!1,function(){e._reactRootContainer=null,e[gx]=null})}),!0):!1};wc.unstable_batchedUpdates=Wfe;wc.unstable_createPortal=function(e,t){return epe(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};wc.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!iI(r))throw Error(Gt(200));if(e==null||e._reactInternals===void 0)throw Error(Gt(38));return i5(e,t,r,!1,n)};wc.version="17.0.2"});var Si=M((H5r,npe)=>{"use strict";function rpe(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rpe)}catch(e){console.error(e)}}rpe(),npe.exports=tpe()});var $t=M((FU,ope)=>{"use strict";var aI=function(e){return e&&e.Math===Math&&e};ope.exports=aI(typeof globalThis=="object"&&globalThis)||aI(typeof window=="object"&&window)||aI(typeof self=="object"&&self)||aI(typeof global=="object"&&global)||aI(typeof FU=="object"&&FU)||function(){return this}()||Function("return this")()});var Tt=M((W5r,ipe)=>{"use strict";ipe.exports=function(e){try{return!!e()}catch(t){return!0}}});var Tr=M(($5r,ape)=>{"use strict";var $ct=Tt();ape.exports=!$ct(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var xx=M((Y5r,spe)=>{"use strict";var Yct=Tt();spe.exports=!Yct(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var er=M((Z5r,lpe)=>{"use strict";var Zct=xx(),a5=Function.prototype.call;lpe.exports=Zct?a5.bind(a5):function(){return a5.apply(a5,arguments)}});var sI=M(fpe=>{"use strict";var upe={}.propertyIsEnumerable,cpe=Object.getOwnPropertyDescriptor,Kct=cpe&&!upe.call({1:2},1);fpe.f=Kct?function(t){var r=cpe(this,t);return!!r&&r.enumerable}:upe});var eu=M((X5r,ppe)=>{"use strict";ppe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var vt=M((J5r,mpe)=>{"use strict";var dpe=xx(),hpe=Function.prototype,UU=hpe.call,Xct=dpe&&hpe.bind.bind(UU,UU);mpe.exports=dpe?Xct:function(e){return function(){return UU.apply(e,arguments)}}});var as=M((Q5r,vpe)=>{"use strict";var gpe=vt(),Jct=gpe({}.toString),Qct=gpe("".slice);vpe.exports=function(e){return Qct(Jct(e),8,-1)}});var ph=M((eOr,ype)=>{"use strict";var eft=vt(),tft=Tt(),rft=as(),BU=Object,nft=eft("".split);ype.exports=tft(function(){return!BU("z").propertyIsEnumerable(0)})?function(e){return rft(e)==="String"?nft(e,""):BU(e)}:BU});var oa=M((tOr,_pe)=>{"use strict";_pe.exports=function(e){return e==null}});var Go=M((rOr,xpe)=>{"use strict";var oft=oa(),ift=TypeError;xpe.exports=function(e){if(oft(e))throw new ift("Can't call method on "+e);return e}});var ia=M((nOr,bpe)=>{"use strict";var aft=ph(),sft=Go();bpe.exports=function(e){return aft(sft(e))}});var Kr=M((oOr,wpe)=>{"use strict";var VU=typeof document=="object"&&document.all;wpe.exports=typeof VU=="undefined"&&VU!==void 0?function(e){return typeof e=="function"||e===VU}:function(e){return typeof e=="function"}});var Br=M((iOr,Epe)=>{"use strict";var lft=Kr();Epe.exports=function(e){return typeof e=="object"?e!==null:lft(e)}});var Fr=M((aOr,Spe)=>{"use strict";var GU=$t(),uft=Kr(),cft=function(e){return uft(e)?e:void 0};Spe.exports=function(e,t){return arguments.length<2?cft(GU[e]):GU[e]&&GU[e][t]}});var ss=M((sOr,Ipe)=>{"use strict";var fft=vt();Ipe.exports=fft({}.isPrototypeOf)});var Af=M((lOr,Cpe)=>{"use strict";var pft=$t(),Tpe=pft.navigator,Mpe=Tpe&&Tpe.userAgent;Cpe.exports=Mpe?String(Mpe):""});var Pp=M((uOr,Ppe)=>{"use strict";var Lpe=$t(),HU=Af(),Ape=Lpe.process,Dpe=Lpe.Deno,Npe=Ape&&Ape.versions||Dpe&&Dpe.version,Ope=Npe&&Npe.v8,Df,s5;Ope&&(Df=Ope.split("."),s5=Df[0]>0&&Df[0]<4?1:+(Df[0]+Df[1]));!s5&&HU&&(Df=HU.match(/Edge\/(\d+)/),(!Df||Df[1]>=74)&&(Df=HU.match(/Chrome\/(\d+)/),Df&&(s5=+Df[1])));Ppe.exports=s5});var Tg=M((cOr,Rpe)=>{"use strict";var kpe=Pp(),dft=Tt(),hft=$t(),mft=hft.String;Rpe.exports=!!Object.getOwnPropertySymbols&&!dft(function(){var e=Symbol("symbol detection");return!mft(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&kpe&&kpe<41})});var WU=M((fOr,jpe)=>{"use strict";var gft=Tg();jpe.exports=gft&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var dh=M((pOr,qpe)=>{"use strict";var vft=Fr(),yft=Kr(),_ft=ss(),xft=WU(),bft=Object;qpe.exports=xft?function(e){return typeof e=="symbol"}:function(e){var t=vft("Symbol");return yft(t)&&_ft(t.prototype,bft(e))}});var Mg=M((dOr,zpe)=>{"use strict";var wft=String;zpe.exports=function(e){try{return wft(e)}catch(t){return"Object"}}});var Rr=M((hOr,Fpe)=>{"use strict";var Eft=Kr(),Sft=Mg(),Ift=TypeError;Fpe.exports=function(e){if(Eft(e))return e;throw new Ift(Sft(e)+" is not a function")}});var Pi=M((mOr,Upe)=>{"use strict";var Tft=Rr(),Mft=oa();Upe.exports=function(e,t){var r=e[t];return Mft(r)?void 0:Tft(r)}});var KU=M((gOr,Bpe)=>{"use strict";var $U=er(),YU=Kr(),ZU=Br(),Cft=TypeError;Bpe.exports=function(e,t){var r,n;if(t==="string"&&YU(r=e.toString)&&!ZU(n=$U(r,e))||YU(r=e.valueOf)&&!ZU(n=$U(r,e))||t!=="string"&&YU(r=e.toString)&&!ZU(n=$U(r,e)))return n;throw new Cft("Can't convert object to primitive value")}});var fn=M((vOr,Vpe)=>{"use strict";Vpe.exports=!1});var l5=M((yOr,Hpe)=>{"use strict";var Gpe=$t(),Aft=Object.defineProperty;Hpe.exports=function(e,t){try{Aft(Gpe,e,{value:t,configurable:!0,writable:!0})}catch(r){Gpe[e]=t}return t}});var lI=M((_Or,Ype)=>{"use strict";var Dft=fn(),Nft=$t(),Oft=l5(),Wpe="__core-js_shared__",$pe=Ype.exports=Nft[Wpe]||Oft(Wpe,{});($pe.versions||($pe.versions=[])).push({version:"3.39.0",mode:Dft?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var hh=M((xOr,Kpe)=>{"use strict";var Zpe=lI();Kpe.exports=function(e,t){return Zpe[e]||(Zpe[e]=t||{})}});var pn=M((bOr,Xpe)=>{"use strict";var Lft=Go(),Pft=Object;Xpe.exports=function(e){return Pft(Lft(e))}});var sn=M((wOr,Jpe)=>{"use strict";var kft=vt(),Rft=pn(),jft=kft({}.hasOwnProperty);Jpe.exports=Object.hasOwn||function(t,r){return jft(Rft(t),r)}});var Cg=M((EOr,Qpe)=>{"use strict";var qft=vt(),zft=0,Fft=Math.random(),Uft=qft(1 .toString);Qpe.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Uft(++zft+Fft,36)}});var Nr=M((SOr,tde)=>{"use strict";var Bft=$t(),Vft=hh(),ede=sn(),Gft=Cg(),Hft=Tg(),Wft=WU(),bx=Bft.Symbol,XU=Vft("wks"),$ft=Wft?bx.for||bx:bx&&bx.withoutSetter||Gft;tde.exports=function(e){return ede(XU,e)||(XU[e]=Hft&&ede(bx,e)?bx[e]:$ft("Symbol."+e)),XU[e]}});var uI=M((IOr,ode)=>{"use strict";var Yft=er(),rde=Br(),nde=dh(),Zft=Pi(),Kft=KU(),Xft=Nr(),Jft=TypeError,Qft=Xft("toPrimitive");ode.exports=function(e,t){if(!rde(e)||nde(e))return e;var r=Zft(e,Qft),n;if(r){if(t===void 0&&(t="default"),n=Yft(r,e,t),!rde(n)||nde(n))return n;throw new Jft("Can't convert object to primitive value")}return t===void 0&&(t="number"),Kft(e,t)}});var kp=M((TOr,ide)=>{"use strict";var ept=uI(),tpt=dh();ide.exports=function(e){var t=ept(e,"string");return tpt(t)?t:t+""}});var cI=M((MOr,sde)=>{"use strict";var rpt=$t(),ade=Br(),JU=rpt.document,npt=ade(JU)&&ade(JU.createElement);sde.exports=function(e){return npt?JU.createElement(e):{}}});var QU=M((COr,lde)=>{"use strict";var opt=Tr(),ipt=Tt(),apt=cI();lde.exports=!opt&&!ipt(function(){return Object.defineProperty(apt("div"),"a",{get:function(){return 7}}).a!==7})});var Ra=M(cde=>{"use strict";var spt=Tr(),lpt=er(),upt=sI(),cpt=eu(),fpt=ia(),ppt=kp(),dpt=sn(),hpt=QU(),ude=Object.getOwnPropertyDescriptor;cde.f=spt?ude:function(t,r){if(t=fpt(t),r=ppt(r),hpt)try{return ude(t,r)}catch(n){}if(dpt(t,r))return cpt(!lpt(upt.f,t,r),t[r])}});var eB=M((DOr,fde)=>{"use strict";var mpt=Tr(),gpt=Tt();fde.exports=mpt&&gpt(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Jt=M((NOr,pde)=>{"use strict";var vpt=Br(),ypt=String,_pt=TypeError;pde.exports=function(e){if(vpt(e))return e;throw new _pt(ypt(e)+" is not an object")}});var ko=M(hde=>{"use strict";var xpt=Tr(),bpt=QU(),wpt=eB(),u5=Jt(),dde=kp(),Ept=TypeError,tB=Object.defineProperty,Spt=Object.getOwnPropertyDescriptor,rB="enumerable",nB="configurable",oB="writable";hde.f=xpt?wpt?function(t,r,n){if(u5(t),r=dde(r),u5(n),typeof t=="function"&&r==="prototype"&&"value"in n&&oB in n&&!n[oB]){var o=Spt(t,r);o&&o[oB]&&(t[r]=n.value,n={configurable:nB in n?n[nB]:o[nB],enumerable:rB in n?n[rB]:o[rB],writable:!1})}return tB(t,r,n)}:tB:function(t,r,n){if(u5(t),r=dde(r),u5(n),bpt)try{return tB(t,r,n)}catch(o){}if("get"in n||"set"in n)throw new Ept("Accessors not supported");return"value"in n&&(t[r]=n.value),t}});var aa=M((LOr,mde)=>{"use strict";var Ipt=Tr(),Tpt=ko(),Mpt=eu();mde.exports=Ipt?function(e,t,r){return Tpt.f(e,t,Mpt(1,r))}:function(e,t,r){return e[t]=r,e}});var Qy=M((POr,vde)=>{"use strict";var iB=Tr(),Cpt=sn(),gde=Function.prototype,Apt=iB&&Object.getOwnPropertyDescriptor,aB=Cpt(gde,"name"),Dpt=aB&&function(){}.name==="something",Npt=aB&&(!iB||iB&&Apt(gde,"name").configurable);vde.exports={EXISTS:aB,PROPER:Dpt,CONFIGURABLE:Npt}});var fI=M((kOr,yde)=>{"use strict";var Opt=vt(),Lpt=Kr(),sB=lI(),Ppt=Opt(Function.toString);Lpt(sB.inspectSource)||(sB.inspectSource=function(e){return Ppt(e)});yde.exports=sB.inspectSource});var lB=M((ROr,xde)=>{"use strict";var kpt=$t(),Rpt=Kr(),_de=kpt.WeakMap;xde.exports=Rpt(_de)&&/native code/.test(String(_de))});var pI=M((jOr,wde)=>{"use strict";var jpt=hh(),qpt=Cg(),bde=jpt("keys");wde.exports=function(e){return bde[e]||(bde[e]=qpt(e))}});var wx=M((qOr,Ede)=>{"use strict";Ede.exports={}});var ro=M((zOr,Tde)=>{"use strict";var zpt=lB(),Ide=$t(),Fpt=Br(),Upt=aa(),uB=sn(),cB=lI(),Bpt=pI(),Vpt=wx(),Sde="Object already initialized",fB=Ide.TypeError,Gpt=Ide.WeakMap,c5,dI,f5,Hpt=function(e){return f5(e)?dI(e):c5(e,{})},Wpt=function(e){return function(t){var r;if(!Fpt(t)||(r=dI(t)).type!==e)throw new fB("Incompatible receiver, "+e+" required");return r}};zpt||cB.state?(Nf=cB.state||(cB.state=new Gpt),Nf.get=Nf.get,Nf.has=Nf.has,Nf.set=Nf.set,c5=function(e,t){if(Nf.has(e))throw new fB(Sde);return t.facade=e,Nf.set(e,t),t},dI=function(e){return Nf.get(e)||{}},f5=function(e){return Nf.has(e)}):(e0=Bpt("state"),Vpt[e0]=!0,c5=function(e,t){if(uB(e,e0))throw new fB(Sde);return t.facade=e,Upt(e,e0,t),t},dI=function(e){return uB(e,e0)?e[e0]:{}},f5=function(e){return uB(e,e0)});var Nf,e0;Tde.exports={set:c5,get:dI,has:f5,enforce:Hpt,getterFor:Wpt}});var hI=M((FOr,Ade)=>{"use strict";var dB=vt(),$pt=Tt(),Ypt=Kr(),p5=sn(),pB=Tr(),Zpt=Qy().CONFIGURABLE,Kpt=fI(),Cde=ro(),Xpt=Cde.enforce,Jpt=Cde.get,Mde=String,d5=Object.defineProperty,Qpt=dB("".slice),edt=dB("".replace),tdt=dB([].join),rdt=pB&&!$pt(function(){return d5(function(){},"length",{value:8}).length!==8}),ndt=String(String).split("String"),odt=Ade.exports=function(e,t,r){Qpt(Mde(t),0,7)==="Symbol("&&(t="["+edt(Mde(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!p5(e,"name")||Zpt&&e.name!==t)&&(pB?d5(e,"name",{value:t,configurable:!0}):e.name=t),rdt&&r&&p5(r,"arity")&&e.length!==r.arity&&d5(e,"length",{value:r.arity});try{r&&p5(r,"constructor")&&r.constructor?pB&&d5(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var n=Xpt(e);return p5(n,"source")||(n.source=tdt(ndt,typeof t=="string"?t:"")),e};Function.prototype.toString=odt(function(){return Ypt(this)&&Jpt(this).source||Kpt(this)},"toString")});var fo=M((UOr,Dde)=>{"use strict";var idt=Kr(),adt=ko(),sdt=hI(),ldt=l5();Dde.exports=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(idt(r)&&sdt(r,i,n),n.global)o?e[t]=r:ldt(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch(a){}o?e[t]=r:adt.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e}});var hB=M((BOr,Nde)=>{"use strict";var udt=Math.ceil,cdt=Math.floor;Nde.exports=Math.trunc||function(t){var r=+t;return(r>0?cdt:udt)(r)}});var Qo=M((VOr,Ode)=>{"use strict";var fdt=hB();Ode.exports=function(e){var t=+e;return t!==t||t===0?0:fdt(t)}});var Of=M((GOr,Lde)=>{"use strict";var pdt=Qo(),ddt=Math.max,hdt=Math.min;Lde.exports=function(e,t){var r=pdt(e);return r<0?ddt(r+t,0):hdt(r,t)}});var tu=M((HOr,Pde)=>{"use strict";var mdt=Qo(),gdt=Math.min;Pde.exports=function(e){var t=mdt(e);return t>0?gdt(t,9007199254740991):0}});var Mn=M((WOr,kde)=>{"use strict";var vdt=tu();kde.exports=function(e){return vdt(e.length)}});var Ex=M(($Or,jde)=>{"use strict";var ydt=ia(),_dt=Of(),xdt=Mn(),Rde=function(e){return function(t,r,n){var o=ydt(t),i=xdt(o);if(i===0)return!e&&-1;var a=_dt(n,i),u;if(e&&r!==r){for(;i>a;)if(u=o[a++],u!==u)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}};jde.exports={includes:Rde(!0),indexOf:Rde(!1)}});var gB=M((YOr,zde)=>{"use strict";var bdt=vt(),mB=sn(),wdt=ia(),Edt=Ex().indexOf,Sdt=wx(),qde=bdt([].push);zde.exports=function(e,t){var r=wdt(e),n=0,o=[],i;for(i in r)!mB(Sdt,i)&&mB(r,i)&&qde(o,i);for(;t.length>n;)mB(r,i=t[n++])&&(~Edt(o,i)||qde(o,i));return o}});var h5=M((ZOr,Fde)=>{"use strict";Fde.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Ag=M(Ude=>{"use strict";var Idt=gB(),Tdt=h5(),Mdt=Tdt.concat("length","prototype");Ude.f=Object.getOwnPropertyNames||function(t){return Idt(t,Mdt)}});var mI=M(Bde=>{"use strict";Bde.f=Object.getOwnPropertySymbols});var m5=M((JOr,Vde)=>{"use strict";var Cdt=Fr(),Adt=vt(),Ddt=Ag(),Ndt=mI(),Odt=Jt(),Ldt=Adt([].concat);Vde.exports=Cdt("Reflect","ownKeys")||function(t){var r=Ddt.f(Odt(t)),n=Ndt.f;return n?Ldt(r,n(t)):r}});var t0=M((QOr,Hde)=>{"use strict";var Gde=sn(),Pdt=m5(),kdt=Ra(),Rdt=ko();Hde.exports=function(e,t,r){for(var n=Pdt(t),o=Rdt.f,i=kdt.f,a=0;a<n.length;a++){var u=n[a];!Gde(e,u)&&!(r&&Gde(r,u))&&o(e,u,i(t,u))}}});var Sx=M((eLr,Wde)=>{"use strict";var jdt=Tt(),qdt=Kr(),zdt=/#|\.prototype\./,gI=function(e,t){var r=Udt[Fdt(e)];return r===Vdt?!0:r===Bdt?!1:qdt(t)?jdt(t):!!t},Fdt=gI.normalize=function(e){return String(e).replace(zdt,".").toLowerCase()},Udt=gI.data={},Bdt=gI.NATIVE="N",Vdt=gI.POLYFILL="P";Wde.exports=gI});var re=M((tLr,$de)=>{"use strict";var g5=$t(),Gdt=Ra().f,Hdt=aa(),Wdt=fo(),$dt=l5(),Ydt=t0(),Zdt=Sx();$de.exports=function(e,t){var r=e.target,n=e.global,o=e.stat,i,a,u,p,h,g;if(n?a=g5:o?a=g5[r]||$dt(r,{}):a=g5[r]&&g5[r].prototype,a)for(u in t){if(h=t[u],e.dontCallGetSet?(g=Gdt(a,u),p=g&&g.value):p=a[u],i=Zdt(n?u:r+(o?".":"#")+u,e.forced),!i&&p!==void 0){if(typeof h==typeof p)continue;Ydt(h,p)}(e.sham||p&&p.sham)&&Hdt(h,"sham",!0),Wdt(a,u,h,e)}}});var v5=M((rLr,Zde)=>{"use strict";var Kdt=Nr(),Xdt=Kdt("toStringTag"),Yde={};Yde[Xdt]="z";Zde.exports=String(Yde)==="[object z]"});var ru=M((nLr,Kde)=>{"use strict";var Jdt=v5(),Qdt=Kr(),y5=as(),eht=Nr(),tht=eht("toStringTag"),rht=Object,nht=y5(function(){return arguments}())==="Arguments",oht=function(e,t){try{return e[t]}catch(r){}};Kde.exports=Jdt?y5:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=oht(t=rht(e),tht))=="string"?r:nht?y5(t):(n=y5(t))==="Object"&&Qdt(t.callee)?"Arguments":n}});var Hr=M((oLr,Xde)=>{"use strict";var iht=ru(),aht=String;Xde.exports=function(e){if(iht(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return aht(e)}});var r0=M((iLr,Jde)=>{"use strict";var sht=gB(),lht=h5();Jde.exports=Object.keys||function(t){return sht(t,lht)}});var _5=M(Qde=>{"use strict";var uht=Tr(),cht=eB(),fht=ko(),pht=Jt(),dht=ia(),hht=r0();Qde.f=uht&&!cht?Object.defineProperties:function(t,r){pht(t);for(var n=dht(r),o=hht(r),i=o.length,a=0,u;i>a;)fht.f(t,u=o[a++],n[u]);return t}});var vB=M((sLr,ehe)=>{"use strict";var mht=Fr();ehe.exports=mht("document","documentElement")});var ki=M((lLr,she)=>{"use strict";var ght=Jt(),vht=_5(),the=h5(),yht=wx(),_ht=vB(),xht=cI(),bht=pI(),rhe=">",nhe="<",_B="prototype",xB="script",ihe=bht("IE_PROTO"),yB=function(){},ahe=function(e){return nhe+xB+rhe+e+nhe+"/"+xB+rhe},ohe=function(e){e.write(ahe("")),e.close();var t=e.parentWindow.Object;return e=null,t},wht=function(){var e=xht("iframe"),t="java"+xB+":",r;return e.style.display="none",_ht.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(ahe("document.F=Object")),r.close(),r.F},x5,b5=function(){try{x5=new ActiveXObject("htmlfile")}catch(t){}b5=typeof document!="undefined"?document.domain&&x5?ohe(x5):wht():ohe(x5);for(var e=the.length;e--;)delete b5[_B][the[e]];return b5()};yht[ihe]=!0;she.exports=Object.create||function(t,r){var n;return t!==null?(yB[_B]=ght(t),n=new yB,yB[_B]=null,n[ihe]=t):n=b5(),r===void 0?n:vht.f(n,r)}});var nu=M((uLr,lhe)=>{"use strict";var Eht=vt();lhe.exports=Eht([].slice)});var w5=M((cLr,fhe)=>{"use strict";var Sht=as(),Iht=ia(),uhe=Ag().f,Tht=nu(),che=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Mht=function(e){try{return uhe(e)}catch(t){return Tht(che)}};fhe.exports.f=function(t){return che&&Sht(t)==="Window"?Mht(t):uhe(Iht(t))}});var ei=M((fLr,dhe)=>{"use strict";var phe=hI(),Cht=ko();dhe.exports=function(e,t,r){return r.get&&phe(r.get,t,{getter:!0}),r.set&&phe(r.set,t,{setter:!0}),Cht.f(e,t,r)}});var bB=M(hhe=>{"use strict";var Aht=Nr();hhe.f=Aht});var E5=M((dLr,mhe)=>{"use strict";var Dht=$t();mhe.exports=Dht});var yi=M((hLr,vhe)=>{"use strict";var ghe=E5(),Nht=sn(),Oht=bB(),Lht=ko().f;vhe.exports=function(e){var t=ghe.Symbol||(ghe.Symbol={});Nht(t,e)||Lht(t,e,{value:Oht.f(e)})}});var wB=M((mLr,yhe)=>{"use strict";var Pht=er(),kht=Fr(),Rht=Nr(),jht=fo();yhe.exports=function(){var e=kht("Symbol"),t=e&&e.prototype,r=t&&t.valueOf,n=Rht("toPrimitive");t&&!t[n]&&jht(t,n,function(o){return Pht(r,this)},{arity:1})}});var wl=M((gLr,xhe)=>{"use strict";var qht=ko().f,zht=sn(),Fht=Nr(),_he=Fht("toStringTag");xhe.exports=function(e,t,r){e&&!r&&(e=e.prototype),e&&!zht(e,_he)&&qht(e,_he,{configurable:!0,value:t})}});var mh=M((vLr,bhe)=>{"use strict";var Uht=as(),Bht=vt();bhe.exports=function(e){if(Uht(e)==="Function")return Bht(e)}});var xo=M((yLr,Ehe)=>{"use strict";var whe=mh(),Vht=Rr(),Ght=xx(),Hht=whe(whe.bind);Ehe.exports=function(e,t){return Vht(e),t===void 0?e:Ght?Hht(e,t):function(){return e.apply(t,arguments)}}});var Lf=M((_Lr,She)=>{"use strict";var Wht=as();She.exports=Array.isArray||function(t){return Wht(t)==="Array"}});var Pf=M((xLr,Ahe)=>{"use strict";var $ht=vt(),Yht=Tt(),Ihe=Kr(),Zht=ru(),Kht=Fr(),Xht=fI(),The=function(){},Mhe=Kht("Reflect","construct"),EB=/^\s*(?:class|function)\b/,Jht=$ht(EB.exec),Qht=!EB.test(The),vI=function(t){if(!Ihe(t))return!1;try{return Mhe(The,[],t),!0}catch(r){return!1}},Che=function(t){if(!Ihe(t))return!1;switch(Zht(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return Qht||!!Jht(EB,Xht(t))}catch(r){return!0}};Che.sham=!0;Ahe.exports=!Mhe||Yht(function(){var e;return vI(vI.call)||!vI(Object)||!vI(function(){e=!0})||e})?Che:vI});var Lhe=M((bLr,Ohe)=>{"use strict";var Dhe=Lf(),emt=Pf(),tmt=Br(),rmt=Nr(),nmt=rmt("species"),Nhe=Array;Ohe.exports=function(e){var t;return Dhe(e)&&(t=e.constructor,emt(t)&&(t===Nhe||Dhe(t.prototype))?t=void 0:tmt(t)&&(t=t[nmt],t===null&&(t=void 0))),t===void 0?Nhe:t}});var Ix=M((wLr,Phe)=>{"use strict";var omt=Lhe();Phe.exports=function(e,t){return new(omt(e))(t===0?0:t)}});var Ri=M((ELr,Rhe)=>{"use strict";var imt=xo(),amt=vt(),smt=ph(),lmt=pn(),umt=Mn(),cmt=Ix(),khe=amt([].push),Dg=function(e){var t=e===1,r=e===2,n=e===3,o=e===4,i=e===6,a=e===7,u=e===5||i;return function(p,h,g,x){for(var b=lmt(p),T=smt(b),A=umt(T),L=imt(h,g),P=0,k=x||cmt,q=t?k(p,A):r||a?k(p,0):void 0,U,H;A>P;P++)if((u||P in T)&&(U=T[P],H=L(U,P,b),e))if(t)q[P]=H;else if(H)switch(e){case 3:return!0;case 5:return U;case 6:return P;case 2:khe(q,U);}else switch(e){case 4:return!1;case 7:khe(q,U);}return i?-1:n||o?o:q}};Rhe.exports={forEach:Dg(0),map:Dg(1),filter:Dg(2),some:Dg(3),every:Dg(4),find:Dg(5),findIndex:Dg(6),filterReject:Dg(7)}});var Qhe=M(()=>{"use strict";var S5=re(),xI=$t(),OB=er(),fmt=vt(),pmt=fn(),Tx=Tr(),Mx=Tg(),dmt=Tt(),ja=sn(),hmt=ss(),MB=Jt(),I5=ia(),LB=kp(),mmt=Hr(),CB=eu(),Cx=ki(),zhe=r0(),gmt=Ag(),Fhe=w5(),vmt=mI(),Uhe=Ra(),Bhe=ko(),ymt=_5(),Vhe=sI(),SB=fo(),_mt=ei(),PB=hh(),xmt=pI(),Ghe=wx(),jhe=Cg(),bmt=Nr(),wmt=bB(),Emt=yi(),Smt=wB(),Imt=wl(),Hhe=ro(),T5=Ri().forEach,ou=xmt("hidden"),M5="Symbol",_I="prototype",Tmt=Hhe.set,qhe=Hhe.getterFor(M5),Ec=Object[_I],n0=xI.Symbol,yI=n0&&n0[_I],Mmt=xI.RangeError,Cmt=xI.TypeError,IB=xI.QObject,Whe=Uhe.f,o0=Bhe.f,$he=Fhe.f,Amt=Vhe.f,Yhe=fmt([].push),gh=PB("symbols"),bI=PB("op-symbols"),Dmt=PB("wks"),AB=!IB||!IB[_I]||!IB[_I].findChild,Zhe=function(e,t,r){var n=Whe(Ec,t);n&&delete Ec[t],o0(e,t,r),n&&e!==Ec&&o0(Ec,t,n)},DB=Tx&&dmt(function(){return Cx(o0({},"a",{get:function(){return o0(this,"a",{value:7}).a}})).a!==7})?Zhe:o0,TB=function(e,t){var r=gh[e]=Cx(yI);return Tmt(r,{type:M5,tag:e,description:t}),Tx||(r.description=t),r},C5=function(t,r,n){t===Ec&&C5(bI,r,n),MB(t);var o=LB(r);return MB(n),ja(gh,o)?(n.enumerable?(ja(t,ou)&&t[ou][o]&&(t[ou][o]=!1),n=Cx(n,{enumerable:CB(0,!1)})):(ja(t,ou)||o0(t,ou,CB(1,Cx(null))),t[ou][o]=!0),DB(t,o,n)):o0(t,o,n)},kB=function(t,r){MB(t);var n=I5(r),o=zhe(n).concat(Jhe(n));return T5(o,function(i){(!Tx||OB(NB,n,i))&&C5(t,i,n[i])}),t},Nmt=function(t,r){return r===void 0?Cx(t):kB(Cx(t),r)},NB=function(t){var r=LB(t),n=OB(Amt,this,r);return this===Ec&&ja(gh,r)&&!ja(bI,r)?!1:n||!ja(this,r)||!ja(gh,r)||ja(this,ou)&&this[ou][r]?n:!0},Khe=function(t,r){var n=I5(t),o=LB(r);if(!(n===Ec&&ja(gh,o)&&!ja(bI,o))){var i=Whe(n,o);return i&&ja(gh,o)&&!(ja(n,ou)&&n[ou][o])&&(i.enumerable=!0),i}},Xhe=function(t){var r=$he(I5(t)),n=[];return T5(r,function(o){!ja(gh,o)&&!ja(Ghe,o)&&Yhe(n,o)}),n},Jhe=function(e){var t=e===Ec,r=$he(t?bI:I5(e)),n=[];return T5(r,function(o){ja(gh,o)&&(!t||ja(Ec,o))&&Yhe(n,gh[o])}),n};Mx||(n0=function(){if(hmt(yI,this))throw new Cmt("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:mmt(arguments[0]),r=jhe(t),n=function(o){var i=this===void 0?xI:this;i===Ec&&OB(n,bI,o),ja(i,ou)&&ja(i[ou],r)&&(i[ou][r]=!1);var a=CB(1,o);try{DB(i,r,a)}catch(u){if(!(u instanceof Mmt))throw u;Zhe(i,r,a)}};return Tx&&AB&&DB(Ec,r,{configurable:!0,set:n}),TB(r,t)},yI=n0[_I],SB(yI,"toString",function(){return qhe(this).tag}),SB(n0,"withoutSetter",function(e){return TB(jhe(e),e)}),Vhe.f=NB,Bhe.f=C5,ymt.f=kB,Uhe.f=Khe,gmt.f=Fhe.f=Xhe,vmt.f=Jhe,wmt.f=function(e){return TB(bmt(e),e)},Tx&&(_mt(yI,"description",{configurable:!0,get:function(){return qhe(this).description}}),pmt||SB(Ec,"propertyIsEnumerable",NB,{unsafe:!0})));S5({global:!0,constructor:!0,wrap:!0,forced:!Mx,sham:!Mx},{Symbol:n0});T5(zhe(Dmt),function(e){Emt(e)});S5({target:M5,stat:!0,forced:!Mx},{useSetter:function(){AB=!0},useSimple:function(){AB=!1}});S5({target:"Object",stat:!0,forced:!Mx,sham:!Tx},{create:Nmt,defineProperty:C5,defineProperties:kB,getOwnPropertyDescriptor:Khe});S5({target:"Object",stat:!0,forced:!Mx},{getOwnPropertyNames:Xhe});Smt();Imt(n0,M5);Ghe[ou]=!0});var RB=M((TLr,eme)=>{"use strict";var Omt=Tg();eme.exports=Omt&&!!Symbol.for&&!!Symbol.keyFor});var rme=M(()=>{"use strict";var Lmt=re(),Pmt=Fr(),kmt=sn(),Rmt=Hr(),tme=hh(),jmt=RB(),jB=tme("string-to-symbol-registry"),qmt=tme("symbol-to-string-registry");Lmt({target:"Symbol",stat:!0,forced:!jmt},{for:function(e){var t=Rmt(e);if(kmt(jB,t))return jB[t];var r=Pmt("Symbol")(t);return jB[t]=r,qmt[r]=t,r}})});var ome=M(()=>{"use strict";var zmt=re(),Fmt=sn(),Umt=dh(),Bmt=Mg(),Vmt=hh(),Gmt=RB(),nme=Vmt("symbol-to-string-registry");zmt({target:"Symbol",stat:!0,forced:!Gmt},{keyFor:function(t){if(!Umt(t))throw new TypeError(Bmt(t)+" is not a symbol");if(Fmt(nme,t))return nme[t]}})});var Bs=M((NLr,lme)=>{"use strict";var Hmt=xx(),sme=Function.prototype,ime=sme.apply,ame=sme.call;lme.exports=typeof Reflect=="object"&&Reflect.apply||(Hmt?ame.bind(ime):function(){return ame.apply(ime,arguments)})});var qB=M((OLr,pme)=>{"use strict";var Wmt=vt(),ume=Lf(),$mt=Kr(),cme=as(),Ymt=Hr(),fme=Wmt([].push);pme.exports=function(e){if($mt(e))return e;if(ume(e)){for(var t=e.length,r=[],n=0;n<t;n++){var o=e[n];typeof o=="string"?fme(r,o):(typeof o=="number"||cme(o)==="Number"||cme(o)==="String")&&fme(r,Ymt(o))}var i=r.length,a=!0;return function(u,p){if(a)return a=!1,p;if(ume(this))return p;for(var h=0;h<i;h++)if(r[h]===u)return p}}}});var zB=M(()=>{"use strict";var Zmt=re(),xme=Fr(),bme=Bs(),Kmt=er(),wI=vt(),wme=Tt(),dme=Kr(),hme=dh(),Eme=nu(),Xmt=qB(),Jmt=Tg(),Qmt=String,Ng=xme("JSON","stringify"),A5=wI(/./.exec),mme=wI("".charAt),egt=wI("".charCodeAt),tgt=wI("".replace),rgt=wI(1 .toString),ngt=/[\uD800-\uDFFF]/g,gme=/^[\uD800-\uDBFF]$/,vme=/^[\uDC00-\uDFFF]$/,yme=!Jmt||wme(function(){var e=xme("Symbol")("stringify detection");return Ng([e])!=="[null]"||Ng({a:e})!=="{}"||Ng(Object(e))!=="{}"}),_me=wme(function(){return Ng("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Ng("\uDEAD")!=="\"\\udead\""}),ogt=function(e,t){var r=Eme(arguments),n=Xmt(t);if(!(!dme(n)&&(e===void 0||hme(e))))return r[1]=function(o,i){if(dme(n)&&(i=Kmt(n,this,Qmt(o),i)),!hme(i))return i},bme(Ng,null,r)},igt=function(e,t,r){var n=mme(r,t-1),o=mme(r,t+1);return A5(gme,e)&&!A5(vme,o)||A5(vme,e)&&!A5(gme,n)?"\\u"+rgt(egt(e,0),16):e};Ng&&Zmt({target:"JSON",stat:!0,arity:3,forced:yme||_me},{stringify:function(t,r,n){var o=Eme(arguments),i=bme(yme?ogt:Ng,null,o);return _me&&typeof i=="string"?tgt(i,ngt,igt):i}})});var Ime=M(()=>{"use strict";var agt=re(),sgt=Tg(),lgt=Tt(),Sme=mI(),ugt=pn(),cgt=!sgt||lgt(function(){Sme.f(1)});agt({target:"Object",stat:!0,forced:cgt},{getOwnPropertySymbols:function(t){var r=Sme.f;return r?r(ugt(t)):[]}})});var Tme=M(()=>{"use strict";Qhe();rme();ome();zB();Ime()});var Lme=M(()=>{"use strict";var fgt=re(),pgt=Tr(),dgt=$t(),D5=vt(),hgt=sn(),mgt=Kr(),ggt=ss(),vgt=Hr(),ygt=ei(),_gt=t0(),vh=dgt.Symbol,i0=vh&&vh.prototype;pgt&&mgt(vh)&&(!("description"in i0)||vh().description!==void 0)&&(FB={},EI=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:vgt(arguments[0]),r=ggt(i0,this)?new vh(t):t===void 0?vh():vh(t);return t===""&&(FB[r]=!0),r},_gt(EI,vh),EI.prototype=i0,i0.constructor=EI,Mme=String(vh("description detection"))==="Symbol(description detection)",Cme=D5(i0.valueOf),Ame=D5(i0.toString),Dme=/^Symbol\((.*)\)[^)]+$/,Nme=D5("".replace),Ome=D5("".slice),ygt(i0,"description",{configurable:!0,get:function(){var t=Cme(this);if(hgt(FB,t))return"";var r=Ame(t),n=Mme?Ome(r,7,-1):Nme(r,Dme,"$1");return n===""?void 0:n}}),fgt({global:!0,constructor:!0,forced:!0},{Symbol:EI}));var FB,EI,Mme,Cme,Ame,Dme,Nme,Ome});var Pme=M(()=>{"use strict";var xgt=yi();xgt("asyncIterator")});var kme=M(()=>{"use strict";var bgt=yi();bgt("hasInstance")});var Rme=M(()=>{"use strict";var wgt=yi();wgt("isConcatSpreadable")});var jme=M(()=>{"use strict";var Egt=yi();Egt("iterator")});var qme=M(()=>{"use strict";var Sgt=yi();Sgt("match")});var zme=M(()=>{"use strict";var Igt=yi();Igt("matchAll")});var Fme=M(()=>{"use strict";var Tgt=yi();Tgt("replace")});var Ume=M(()=>{"use strict";var Mgt=yi();Mgt("search")});var Bme=M(()=>{"use strict";var Cgt=yi();Cgt("species")});var Vme=M(()=>{"use strict";var Agt=yi();Agt("split")});var Gme=M(()=>{"use strict";var Dgt=yi(),Ngt=wB();Dgt("toPrimitive");Ngt()});var Hme=M(()=>{"use strict";var Ogt=Fr(),Lgt=yi(),Pgt=wl();Lgt("toStringTag");Pgt(Ogt("Symbol"),"Symbol")});var Wme=M(()=>{"use strict";var kgt=yi();kgt("unscopables")});var SI=M((d3r,$me)=>{"use strict";var Rgt=vt(),jgt=Rr();$me.exports=function(e,t,r){try{return Rgt(jgt(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}}});var UB=M((h3r,Yme)=>{"use strict";var qgt=Br();Yme.exports=function(e){return qgt(e)||e===null}});var BB=M((m3r,Zme)=>{"use strict";var zgt=UB(),Fgt=String,Ugt=TypeError;Zme.exports=function(e){if(zgt(e))return e;throw new Ugt("Can't set "+Fgt(e)+" as a prototype")}});var Sc=M((g3r,Kme)=>{"use strict";var Bgt=SI(),Vgt=Br(),Ggt=Go(),Hgt=BB();Kme.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=Bgt(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(o,i){return Ggt(o),Hgt(i),Vgt(o)&&(e?r(o,i):o.__proto__=i),o}}():void 0)});var VB=M((v3r,Xme)=>{"use strict";var Wgt=ko().f;Xme.exports=function(e,t,r){r in e||Wgt(e,r,{configurable:!0,get:function(){return t[r]},set:function(n){t[r]=n}})}});var Og=M((y3r,Qme)=>{"use strict";var $gt=Kr(),Ygt=Br(),Jme=Sc();Qme.exports=function(e,t,r){var n,o;return Jme&&$gt(n=t.constructor)&&n!==r&&Ygt(o=n.prototype)&&o!==r.prototype&&Jme(e,o),e}});var a0=M((_3r,ege)=>{"use strict";var Zgt=Hr();ege.exports=function(e,t){return e===void 0?arguments.length<2?"":t:Zgt(e)}});var GB=M((x3r,tge)=>{"use strict";var Kgt=Br(),Xgt=aa();tge.exports=function(e,t){Kgt(t)&&"cause"in t&&Xgt(e,"cause",t.cause)}});var N5=M((b3r,oge)=>{"use strict";var Jgt=vt(),rge=Error,Qgt=Jgt("".replace),evt=function(e){return String(new rge(e).stack)}("zxcasd"),nge=/\n\s*at [^:]*:[^\n]*/,tvt=nge.test(evt);oge.exports=function(e,t){if(tvt&&typeof e=="string"&&!rge.prepareStackTrace)for(;t--;)e=Qgt(e,nge,"");return e}});var HB=M((w3r,ige)=>{"use strict";var rvt=Tt(),nvt=eu();ige.exports=!rvt(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",nvt(1,7)),e.stack!==7):!0})});var O5=M((E3r,sge)=>{"use strict";var ovt=aa(),ivt=N5(),avt=HB(),age=Error.captureStackTrace;sge.exports=function(e,t,r,n){avt&&(age?age(e,t):ovt(e,"stack",ivt(r,n)))}});var WB=M((S3r,hge)=>{"use strict";var lge=Fr(),svt=sn(),uge=aa(),lvt=ss(),cge=Sc(),fge=t0(),pge=VB(),uvt=Og(),cvt=a0(),fvt=GB(),pvt=O5(),dvt=Tr(),dge=fn();hge.exports=function(e,t,r,n){var o="stackTraceLimit",i=n?2:1,a=e.split("."),u=a[a.length-1],p=lge.apply(null,a);if(p){var h=p.prototype;if(!dge&&svt(h,"cause")&&delete h.cause,!r)return p;var g=lge("Error"),x=t(function(b,T){var A=cvt(n?T:b,void 0),L=n?new p(b):new p;return A!==void 0&&uge(L,"message",A),pvt(L,x,L.stack,2),this&&lvt(h,this)&&uvt(L,this,x),arguments.length>i&&fvt(L,arguments[i]),L});if(x.prototype=h,u!=="Error"?cge?cge(x,g):fge(x,g,{name:!0}):dvt&&o in p&&(pge(x,p,o),pge(x,p,"prepareStackTrace")),fge(x,p),!dge)try{h.name!==u&&uge(h,"name",u),h.constructor=x}catch(b){}return x}}});var yge=M(()=>{"use strict";var gge=re(),hvt=$t(),Rp=Bs(),vge=WB(),$B="WebAssembly",mge=hvt[$B],L5=new Error("e",{cause:7}).cause!==7,s0=function(e,t){var r={};r[e]=vge(e,t,L5),gge({global:!0,constructor:!0,arity:1,forced:L5},r)},YB=function(e,t){if(mge&&mge[e]){var r={};r[e]=vge($B+"."+e,t,L5),gge({target:$B,stat:!0,constructor:!0,arity:1,forced:L5},r)}};s0("Error",function(e){return function(r){return Rp(e,this,arguments)}});s0("EvalError",function(e){return function(r){return Rp(e,this,arguments)}});s0("RangeError",function(e){return function(r){return Rp(e,this,arguments)}});s0("ReferenceError",function(e){return function(r){return Rp(e,this,arguments)}});s0("SyntaxError",function(e){return function(r){return Rp(e,this,arguments)}});s0("TypeError",function(e){return function(r){return Rp(e,this,arguments)}});s0("URIError",function(e){return function(r){return Rp(e,this,arguments)}});YB("CompileError",function(e){return function(r){return Rp(e,this,arguments)}});YB("LinkError",function(e){return function(r){return Rp(e,this,arguments)}});YB("RuntimeError",function(e){return function(r){return Rp(e,this,arguments)}})});var ZB=M((M3r,xge)=>{"use strict";var mvt=Tr(),gvt=Tt(),vvt=Jt(),_ge=a0(),P5=Error.prototype.toString,yvt=gvt(function(){if(mvt){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(P5.call(e)!=="true")return!0}return P5.call({message:1,name:2})!=="2: 1"||P5.call({})!=="Error"});xge.exports=yvt?function(){var t=vvt(this),r=_ge(t.name,"Error"),n=_ge(t.message);return r?n?r+": "+n:r:n}:P5});var Ege=M(()=>{"use strict";var _vt=fo(),bge=ZB(),wge=Error.prototype;wge.toString!==bge&&_vt(wge,"toString",bge)});var k5=M((D3r,Sge)=>{"use strict";var xvt=Tt();Sge.exports=!xvt(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var sa=M((N3r,Tge)=>{"use strict";var bvt=sn(),wvt=Kr(),Evt=pn(),Svt=pI(),Ivt=k5(),Ige=Svt("IE_PROTO"),KB=Object,Tvt=KB.prototype;Tge.exports=Ivt?KB.getPrototypeOf:function(e){var t=Evt(e);if(bvt(t,Ige))return t[Ige];var r=t.constructor;return wvt(r)&&t instanceof r?r.prototype:t instanceof KB?Tvt:null}});var l0=M((O3r,Mge)=>{"use strict";Mge.exports={}});var R5=M((L3r,Cge)=>{"use strict";var Mvt=Nr(),Cvt=l0(),Avt=Mvt("iterator"),Dvt=Array.prototype;Cge.exports=function(e){return e!==void 0&&(Cvt.Array===e||Dvt[Avt]===e)}});var jp=M((P3r,Dge)=>{"use strict";var Nvt=ru(),Age=Pi(),Ovt=oa(),Lvt=l0(),Pvt=Nr(),kvt=Pvt("iterator");Dge.exports=function(e){if(!Ovt(e))return Age(e,kvt)||Age(e,"@@iterator")||Lvt[Nvt(e)]}});var Lg=M((k3r,Nge)=>{"use strict";var Rvt=er(),jvt=Rr(),qvt=Jt(),zvt=Mg(),Fvt=jp(),Uvt=TypeError;Nge.exports=function(e,t){var r=arguments.length<2?Fvt(e):t;if(jvt(r))return qvt(Rvt(r,e));throw new Uvt(zvt(e)+" is not iterable")}});var yh=M((R3r,Lge)=>{"use strict";var Bvt=er(),Oge=Jt(),Vvt=Pi();Lge.exports=function(e,t,r){var n,o;Oge(e);try{if(n=Vvt(e,"return"),!n){if(t==="throw")throw r;return r}n=Bvt(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return Oge(n),r}});var _i=M((j3r,jge)=>{"use strict";var Gvt=xo(),Hvt=er(),Wvt=Jt(),$vt=Mg(),Yvt=R5(),Zvt=Mn(),Pge=ss(),Kvt=Lg(),Xvt=jp(),kge=yh(),Jvt=TypeError,j5=function(e,t){this.stopped=e,this.result=t},Rge=j5.prototype;jge.exports=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),a=!!(r&&r.IS_ITERATOR),u=!!(r&&r.INTERRUPTED),p=Gvt(t,n),h,g,x,b,T,A,L,P=function(q){return h&&kge(h,"normal",q),new j5(!0,q)},k=function(q){return o?(Wvt(q),u?p(q[0],q[1],P):p(q[0],q[1])):u?p(q,P):p(q)};if(i)h=e.iterator;else if(a)h=e;else{if(g=Xvt(e),!g)throw new Jvt($vt(e)+" is not iterable");if(Yvt(g)){for(x=0,b=Zvt(e);b>x;x++)if(T=k(e[x]),T&&Pge(Rge,T))return T;return new j5(!1)}h=Kvt(e,g)}for(A=i?e.next:h.next;!(L=Hvt(A,h)).done;){try{T=k(L.value)}catch(q){kge(h,"throw",q)}if(typeof T=="object"&&T&&Pge(Rge,T))return T}return new j5(!1)}});var zge=M(()=>{"use strict";var Qvt=re(),eyt=ss(),tyt=sa(),q5=Sc(),ryt=t0(),qge=ki(),XB=aa(),JB=eu(),nyt=GB(),oyt=O5(),iyt=_i(),ayt=a0(),syt=Nr(),lyt=syt("toStringTag"),z5=Error,uyt=[].push,Ax=function(t,r){var n=eyt(QB,this),o;q5?o=q5(new z5,n?tyt(this):QB):(o=n?this:qge(QB),XB(o,lyt,"Error")),r!==void 0&&XB(o,"message",ayt(r)),oyt(o,Ax,o.stack,1),arguments.length>2&&nyt(o,arguments[2]);var i=[];return iyt(t,uyt,{that:i}),XB(o,"errors",i),o};q5?q5(Ax,z5):ryt(Ax,z5,{name:!0});var QB=Ax.prototype=qge(z5.prototype,{constructor:JB(1,Ax),message:JB(1,""),name:JB(1,"AggregateError")});Qvt({global:!0,constructor:!0,arity:2},{AggregateError:Ax})});var eV=M(()=>{"use strict";zge()});var Vge=M(()=>{"use strict";var cyt=re(),fyt=Fr(),pyt=Bs(),Fge=Tt(),dyt=WB(),tV="AggregateError",Uge=fyt(tV),Bge=!Fge(function(){return Uge([1]).errors[0]!==1})&&Fge(function(){return Uge([1],tV,{cause:7}).cause!==7});cyt({global:!0,constructor:!0,arity:2,forced:Bge},{AggregateError:dyt(tV,function(e){return function(r,n){return pyt(e,this,arguments)}},Bge,!0)})});var xi=M((G3r,Gge)=>{"use strict";var hyt=Nr(),myt=ki(),gyt=ko().f,rV=hyt("unscopables"),nV=Array.prototype;nV[rV]===void 0&&gyt(nV,rV,{configurable:!0,value:myt(null)});Gge.exports=function(e){nV[rV][e]=!0}});var oV=M(()=>{"use strict";var vyt=re(),yyt=pn(),_yt=Mn(),xyt=Qo(),byt=xi();vyt({target:"Array",proto:!0},{at:function(t){var r=yyt(this),n=_yt(r),o=xyt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]}});byt("at")});var Pg=M(($3r,Hge)=>{"use strict";var wyt=TypeError,Eyt=9007199254740991;Hge.exports=function(e){if(e>Eyt)throw wyt("Maximum allowed index exceeded");return e}});var Ic=M((Y3r,Wge)=>{"use strict";var Syt=Tr(),Iyt=ko(),Tyt=eu();Wge.exports=function(e,t,r){Syt?Iyt.f(e,t,Tyt(0,r)):e[t]=r}});var Dx=M((Z3r,$ge)=>{"use strict";var Myt=Tt(),Cyt=Nr(),Ayt=Pp(),Dyt=Cyt("species");$ge.exports=function(e){return Ayt>=51||!Myt(function(){var t=[],r=t.constructor={};return r[Dyt]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var Xge=M(()=>{"use strict";var Nyt=re(),Oyt=Tt(),Lyt=Lf(),Pyt=Br(),kyt=pn(),Ryt=Mn(),Yge=Pg(),Zge=Ic(),jyt=Ix(),qyt=Dx(),zyt=Nr(),Fyt=Pp(),Kge=zyt("isConcatSpreadable"),Uyt=Fyt>=51||!Oyt(function(){var e=[];return e[Kge]=!1,e.concat()[0]!==e}),Byt=function(e){if(!Pyt(e))return!1;var t=e[Kge];return t!==void 0?!!t:Lyt(e)},Vyt=!Uyt||!qyt("concat");Nyt({target:"Array",proto:!0,arity:1,forced:Vyt},{concat:function(t){var r=kyt(this),n=jyt(r,0),o=0,i,a,u,p,h;for(i=-1,u=arguments.length;i<u;i++)if(h=i===-1?r:arguments[i],Byt(h))for(p=Ryt(h),Yge(o+p),a=0;a<p;a++,o++)a in h&&Zge(n,o,h[a]);else Yge(o+1),Zge(n,o++,h);return n.length=o,n}})});var II=M((J3r,Qge)=>{"use strict";var Jge=Mg(),Gyt=TypeError;Qge.exports=function(e,t){if(!delete e[t])throw new Gyt("Cannot delete property "+Jge(t)+" of "+Jge(e))}});var aV=M((Q3r,eve)=>{"use strict";var Hyt=pn(),iV=Of(),Wyt=Mn(),$yt=II(),Yyt=Math.min;eve.exports=[].copyWithin||function(t,r){var n=Hyt(this),o=Wyt(n),i=iV(t,o),a=iV(r,o),u=arguments.length>2?arguments[2]:void 0,p=Yyt((u===void 0?o:iV(u,o))-a,o-i),h=1;for(a<i&&i<a+p&&(h=-1,a+=p-1,i+=p-1);p-->0;)a in n?n[i]=n[a]:$yt(n,i),i+=h,a+=h;return n}});var tve=M(()=>{"use strict";var Zyt=re(),Kyt=aV(),Xyt=xi();Zyt({target:"Array",proto:!0},{copyWithin:Kyt});Xyt("copyWithin")});var Tc=M((rPr,rve)=>{"use strict";var Jyt=Tt();rve.exports=function(e,t){var r=[][e];return!!r&&Jyt(function(){r.call(null,t||function(){return 1},1)})}});var nve=M(()=>{"use strict";var Qyt=re(),e0t=Ri().every,t0t=Tc(),r0t=t0t("every");Qyt({target:"Array",proto:!0,forced:!r0t},{every:function(t){return e0t(this,t,arguments.length>1?arguments[1]:void 0)}})});var F5=M((iPr,ive)=>{"use strict";var n0t=pn(),ove=Of(),o0t=Mn();ive.exports=function(t){for(var r=n0t(this),n=o0t(r),o=arguments.length,i=ove(o>1?arguments[1]:void 0,n),a=o>2?arguments[2]:void 0,u=a===void 0?n:ove(a,n);u>i;)r[i++]=t;return r}});var ave=M(()=>{"use strict";var i0t=re(),a0t=F5(),s0t=xi();i0t({target:"Array",proto:!0},{fill:a0t});s0t("fill")});var sve=M(()=>{"use strict";var l0t=re(),u0t=Ri().filter,c0t=Dx(),f0t=c0t("filter");l0t({target:"Array",proto:!0,forced:!f0t},{filter:function(t){return u0t(this,t,arguments.length>1?arguments[1]:void 0)}})});var uve=M(()=>{"use strict";var p0t=re(),d0t=Ri().find,h0t=xi(),sV="find",lve=!0;sV in[]&&Array(1)[sV](function(){lve=!1});p0t({target:"Array",proto:!0,forced:lve},{find:function(t){return d0t(this,t,arguments.length>1?arguments[1]:void 0)}});h0t(sV)});var fve=M(()=>{"use strict";var m0t=re(),g0t=Ri().findIndex,v0t=xi(),lV="findIndex",cve=!0;lV in[]&&Array(1)[lV](function(){cve=!1});m0t({target:"Array",proto:!0,forced:cve},{findIndex:function(t){return g0t(this,t,arguments.length>1?arguments[1]:void 0)}});v0t(lV)});var TI=M((hPr,dve)=>{"use strict";var y0t=xo(),_0t=ph(),x0t=pn(),b0t=Mn(),pve=function(e){var t=e===1;return function(r,n,o){for(var i=x0t(r),a=_0t(i),u=b0t(a),p=y0t(n,o),h,g;u-->0;)if(h=a[u],g=p(h,u,i),g)switch(e){case 0:return h;case 1:return u;}return t?-1:void 0}};dve.exports={findLast:pve(0),findLastIndex:pve(1)}});var uV=M(()=>{"use strict";var w0t=re(),E0t=TI().findLast,S0t=xi();w0t({target:"Array",proto:!0},{findLast:function(t){return E0t(this,t,arguments.length>1?arguments[1]:void 0)}});S0t("findLast")});var cV=M(()=>{"use strict";var I0t=re(),T0t=TI().findLastIndex,M0t=xi();I0t({target:"Array",proto:!0},{findLastIndex:function(t){return T0t(this,t,arguments.length>1?arguments[1]:void 0)}});M0t("findLastIndex")});var fV=M((_Pr,mve)=>{"use strict";var C0t=Lf(),A0t=Mn(),D0t=Pg(),N0t=xo(),hve=function(e,t,r,n,o,i,a,u){for(var p=o,h=0,g=a?N0t(a,u):!1,x,b;h<n;)h in r&&(x=g?g(r[h],h,t):r[h],i>0&&C0t(x)?(b=A0t(x),p=hve(e,t,x,b,p,i-1)-1):(D0t(p+1),e[p]=x),p++),h++;return p};mve.exports=hve});var gve=M(()=>{"use strict";var O0t=re(),L0t=fV(),P0t=pn(),k0t=Mn(),R0t=Qo(),j0t=Ix();O0t({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,r=P0t(this),n=k0t(r),o=j0t(r,0);return o.length=L0t(o,r,r,n,0,t===void 0?1:R0t(t)),o}})});var vve=M(()=>{"use strict";var q0t=re(),z0t=fV(),F0t=Rr(),U0t=pn(),B0t=Mn(),V0t=Ix();q0t({target:"Array",proto:!0},{flatMap:function(t){var r=U0t(this),n=B0t(r),o;return F0t(t),o=V0t(r,0),o.length=z0t(o,r,r,n,0,1,t,arguments.length>1?arguments[1]:void 0),o}})});var pV=M((SPr,yve)=>{"use strict";var G0t=Ri().forEach,H0t=Tc(),W0t=H0t("forEach");yve.exports=W0t?[].forEach:function(t){return G0t(this,t,arguments.length>1?arguments[1]:void 0)}});var xve=M(()=>{"use strict";var $0t=re(),_ve=pV();$0t({target:"Array",proto:!0,forced:[].forEach!==_ve},{forEach:_ve})});var U5=M((MPr,bve)=>{"use strict";var Y0t=Jt(),Z0t=yh();bve.exports=function(e,t,r,n){try{return n?t(Y0t(r)[0],r[1]):t(r)}catch(o){Z0t(e,"throw",o)}}});var dV=M((CPr,Sve)=>{"use strict";var K0t=xo(),X0t=er(),J0t=pn(),Q0t=U5(),e1t=R5(),t1t=Pf(),r1t=Mn(),wve=Ic(),n1t=Lg(),o1t=jp(),Eve=Array;Sve.exports=function(t){var r=J0t(t),n=t1t(this),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0;a&&(i=K0t(i,o>2?arguments[2]:void 0));var u=o1t(r),p=0,h,g,x,b,T,A;if(u&&!(this===Eve&&e1t(u)))for(g=n?new this:[],b=n1t(r,u),T=b.next;!(x=X0t(T,b)).done;p++)A=a?Q0t(b,i,[x.value,p],!0):x.value,wve(g,p,A);else for(h=r1t(r),g=n?new this(h):Eve(h);h>p;p++)A=a?i(r[p],p):r[p],wve(g,p,A);return g.length=p,g}});var MI=M((APr,Cve)=>{"use strict";var i1t=Nr(),Tve=i1t("iterator"),Mve=!1;try{Ive=0,hV={next:function(){return{done:!!Ive++}},return:function(){Mve=!0}},hV[Tve]=function(){return this},Array.from(hV,function(){throw 2})}catch(e){}var Ive,hV;Cve.exports=function(e,t){try{if(!t&&!Mve)return!1}catch(o){return!1}var r=!1;try{var n={};n[Tve]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(o){}return r}});var Ave=M(()=>{"use strict";var a1t=re(),s1t=dV(),l1t=MI(),u1t=!l1t(function(e){Array.from(e)});a1t({target:"Array",stat:!0,forced:u1t},{from:s1t})});var Dve=M(()=>{"use strict";var c1t=re(),f1t=Ex().includes,p1t=Tt(),d1t=xi(),h1t=p1t(function(){return!Array(1).includes()});c1t({target:"Array",proto:!0,forced:h1t},{includes:function(t){return f1t(this,t,arguments.length>1?arguments[1]:void 0)}});d1t("includes")});var Ove=M(()=>{"use strict";var m1t=re(),g1t=mh(),v1t=Ex().indexOf,y1t=Tc(),mV=g1t([].indexOf),Nve=!!mV&&1/mV([1],1,-0)<0,_1t=Nve||!y1t("indexOf");m1t({target:"Array",proto:!0,forced:_1t},{indexOf:function(t){var r=arguments.length>1?arguments[1]:void 0;return Nve?mV(this,t,r)||0:v1t(this,t,r)}})});var Lve=M(()=>{"use strict";var x1t=re(),b1t=Lf();x1t({target:"Array",stat:!0},{isArray:b1t})});var u0=M((qPr,Rve)=>{"use strict";var w1t=Tt(),E1t=Kr(),S1t=Br(),I1t=ki(),Pve=sa(),T1t=fo(),M1t=Nr(),C1t=fn(),yV=M1t("iterator"),kve=!1,_h,gV,vV;[].keys&&(vV=[].keys(),"next"in vV?(gV=Pve(Pve(vV)),gV!==Object.prototype&&(_h=gV)):kve=!0);var A1t=!S1t(_h)||w1t(function(){var e={};return _h[yV].call(e)!==e});A1t?_h={}:C1t&&(_h=I1t(_h));E1t(_h[yV])||T1t(_h,yV,function(){return this});Rve.exports={IteratorPrototype:_h,BUGGY_SAFARI_ITERATORS:kve}});var kg=M((zPr,jve)=>{"use strict";var D1t=u0().IteratorPrototype,N1t=ki(),O1t=eu(),L1t=wl(),P1t=l0(),k1t=function(){return this};jve.exports=function(e,t,r,n){var o=t+" Iterator";return e.prototype=N1t(D1t,{next:O1t(+!n,r)}),L1t(e,o,!1,!0),P1t[o]=k1t,e}});var G5=M((FPr,$ve)=>{"use strict";var R1t=re(),j1t=er(),B5=fn(),Hve=Qy(),q1t=Kr(),z1t=kg(),qve=sa(),zve=Sc(),F1t=wl(),U1t=aa(),_V=fo(),B1t=Nr(),Fve=l0(),Wve=u0(),V1t=Hve.PROPER,G1t=Hve.CONFIGURABLE,Uve=Wve.IteratorPrototype,V5=Wve.BUGGY_SAFARI_ITERATORS,CI=B1t("iterator"),Bve="keys",AI="values",Vve="entries",Gve=function(){return this};$ve.exports=function(e,t,r,n,o,i,a){z1t(r,t,n);var u=function(k){if(k===o&&b)return b;if(!V5&&k&&k in g)return g[k];switch(k){case Bve:return function(){return new r(this,k)};case AI:return function(){return new r(this,k)};case Vve:return function(){return new r(this,k)};}return function(){return new r(this)}},p=t+" Iterator",h=!1,g=e.prototype,x=g[CI]||g["@@iterator"]||o&&g[o],b=!V5&&x||u(o),T=t==="Array"&&g.entries||x,A,L,P;if(T&&(A=qve(T.call(new e)),A!==Object.prototype&&A.next&&(!B5&&qve(A)!==Uve&&(zve?zve(A,Uve):q1t(A[CI])||_V(A,CI,Gve)),F1t(A,p,!0,!0),B5&&(Fve[p]=Gve))),V1t&&o===AI&&x&&x.name!==AI&&(!B5&&G1t?U1t(g,"name",AI):(h=!0,b=function(){return j1t(x,this)})),o)if(L={values:u(AI),keys:i?b:u(Bve),entries:u(Vve)},a)for(P in L)(V5||h||!(P in g))&&_V(g,P,L[P]);else R1t({target:t,proto:!0,forced:V5||h},L);return(!B5||a)&&g[CI]!==b&&_V(g,CI,b,{name:o}),Fve[t]=b,L}});var qa=M((UPr,Yve)=>{"use strict";Yve.exports=function(e,t){return{value:e,done:t}}});var DI=M((BPr,Qve)=>{"use strict";var H1t=ia(),xV=xi(),Zve=l0(),Xve=ro(),W1t=ko().f,$1t=G5(),H5=qa(),Y1t=fn(),Z1t=Tr(),Jve="Array Iterator",K1t=Xve.set,X1t=Xve.getterFor(Jve);Qve.exports=$1t(Array,"Array",function(e,t){K1t(this,{type:Jve,target:H1t(e),index:0,kind:t})},function(){var e=X1t(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=null,H5(void 0,!0);switch(e.kind){case"keys":return H5(r,!1);case"values":return H5(t[r],!1);}return H5([r,t[r]],!1)},"values");var Kve=Zve.Arguments=Zve.Array;xV("keys");xV("values");xV("entries");if(!Y1t&&Z1t&&Kve.name!=="values")try{W1t(Kve,"name",{value:"values"})}catch(e){}});var eye=M(()=>{"use strict";var J1t=re(),Q1t=vt(),e_t=ph(),t_t=ia(),r_t=Tc(),n_t=Q1t([].join),o_t=e_t!==Object,i_t=o_t||!r_t("join",",");J1t({target:"Array",proto:!0,forced:i_t},{join:function(t){return n_t(t_t(this),t===void 0?",":t)}})});var wV=M((HPr,rye)=>{"use strict";var a_t=Bs(),s_t=ia(),l_t=Qo(),u_t=Mn(),c_t=Tc(),f_t=Math.min,bV=[].lastIndexOf,tye=!!bV&&1/[1].lastIndexOf(1,-0)<0,p_t=c_t("lastIndexOf"),d_t=tye||!p_t;rye.exports=d_t?function(t){if(tye)return a_t(bV,this,arguments)||0;var r=s_t(this),n=u_t(r);if(n===0)return-1;var o=n-1;for(arguments.length>1&&(o=f_t(o,l_t(arguments[1]))),o<0&&(o=n+o);o>=0;o--)if(o in r&&r[o]===t)return o||0;return-1}:bV});var oye=M(()=>{"use strict";var h_t=re(),nye=wV();h_t({target:"Array",proto:!0,forced:nye!==[].lastIndexOf},{lastIndexOf:nye})});var iye=M(()=>{"use strict";var m_t=re(),g_t=Ri().map,v_t=Dx(),y_t=v_t("map");m_t({target:"Array",proto:!0,forced:!y_t},{map:function(t){return g_t(this,t,arguments.length>1?arguments[1]:void 0)}})});var sye=M(()=>{"use strict";var __t=re(),x_t=Tt(),b_t=Pf(),w_t=Ic(),aye=Array,E_t=x_t(function(){function e(){}return!(aye.of.call(e)instanceof e)});__t({target:"Array",stat:!0,forced:E_t},{of:function(){for(var t=0,r=arguments.length,n=new(b_t(this)?this:aye)(r);r>t;)w_t(n,t,arguments[t++]);return n.length=r,n}})});var W5=M((JPr,lye)=>{"use strict";var S_t=Tr(),I_t=Lf(),T_t=TypeError,M_t=Object.getOwnPropertyDescriptor,C_t=S_t&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();lye.exports=C_t?function(e,t){if(I_t(e)&&!M_t(e,"length").writable)throw new T_t("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var uye=M(()=>{"use strict";var A_t=re(),D_t=pn(),N_t=Mn(),O_t=W5(),L_t=Pg(),P_t=Tt(),k_t=P_t(function(){return[].push.call({length:4294967296},1)!==4294967297}),R_t=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},j_t=k_t||!R_t();A_t({target:"Array",proto:!0,arity:1,forced:j_t},{push:function(t){var r=D_t(this),n=N_t(r),o=arguments.length;L_t(n+o);for(var i=0;i<o;i++)r[n]=arguments[i],n++;return O_t(r,n),n}})});var NI=M((tkr,dye)=>{"use strict";var q_t=Rr(),z_t=pn(),F_t=ph(),U_t=Mn(),cye=TypeError,fye="Reduce of empty array with no initial value",pye=function(e){return function(t,r,n,o){var i=z_t(t),a=F_t(i),u=U_t(i);if(q_t(r),u===0&&n<2)throw new cye(fye);var p=e?u-1:0,h=e?-1:1;if(n<2)for(;;){if(p in a){o=a[p],p+=h;break}if(p+=h,e?p<0:u<=p)throw new cye(fye)}for(;e?p>=0:u>p;p+=h)p in a&&(o=r(o,a[p],p,i));return o}};dye.exports={left:pye(!1),right:pye(!0)}});var LI=M((rkr,hye)=>{"use strict";var OI=$t(),B_t=Af(),V_t=as(),$5=function(e){return B_t.slice(0,e.length)===e};hye.exports=function(){return $5("Bun/")?"BUN":$5("Cloudflare-Workers")?"CLOUDFLARE":$5("Deno/")?"DENO":$5("Node.js/")?"NODE":OI.Bun&&typeof Bun.version=="string"?"BUN":OI.Deno&&typeof Deno.version=="object"?"DENO":V_t(OI.process)==="process"?"NODE":OI.window&&OI.document?"BROWSER":"REST"}()});var c0=M((nkr,mye)=>{"use strict";var G_t=LI();mye.exports=G_t==="NODE"});var vye=M(()=>{"use strict";var H_t=re(),W_t=NI().left,$_t=Tc(),gye=Pp(),Y_t=c0(),Z_t=!Y_t&&gye>79&&gye<83,K_t=Z_t||!$_t("reduce");H_t({target:"Array",proto:!0,forced:K_t},{reduce:function(t){var r=arguments.length;return W_t(this,t,r,r>1?arguments[1]:void 0)}})});var _ye=M(()=>{"use strict";var X_t=re(),J_t=NI().right,Q_t=Tc(),yye=Pp(),ext=c0(),txt=!ext&&yye>79&&yye<83,rxt=txt||!Q_t("reduceRight");X_t({target:"Array",proto:!0,forced:rxt},{reduceRight:function(t){return J_t(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var bye=M(()=>{"use strict";var nxt=re(),oxt=vt(),ixt=Lf(),axt=oxt([].reverse),xye=[1,2];nxt({target:"Array",proto:!0,forced:String(xye)===String(xye.reverse())},{reverse:function(){return ixt(this)&&(this.length=this.length),axt(this)}})});var Sye=M(()=>{"use strict";var sxt=re(),wye=Lf(),lxt=Pf(),uxt=Br(),Eye=Of(),cxt=Mn(),fxt=ia(),pxt=Ic(),dxt=Nr(),hxt=Dx(),mxt=nu(),gxt=hxt("slice"),vxt=dxt("species"),EV=Array,yxt=Math.max;sxt({target:"Array",proto:!0,forced:!gxt},{slice:function(t,r){var n=fxt(this),o=cxt(n),i=Eye(t,o),a=Eye(r===void 0?o:r,o),u,p,h;if(wye(n)&&(u=n.constructor,lxt(u)&&(u===EV||wye(u.prototype))?u=void 0:uxt(u)&&(u=u[vxt],u===null&&(u=void 0)),u===EV||u===void 0))return mxt(n,i,a);for(p=new(u===void 0?EV:u)(yxt(a-i,0)),h=0;i<a;i++,h++)i in n&&pxt(p,h,n[i]);return p.length=h,p}})});var Iye=M(()=>{"use strict";var _xt=re(),xxt=Ri().some,bxt=Tc(),wxt=bxt("some");_xt({target:"Array",proto:!0,forced:!wxt},{some:function(t){return xxt(this,t,arguments.length>1?arguments[1]:void 0)}})});var Y5=M((hkr,Mye)=>{"use strict";var Tye=nu(),Ext=Math.floor,SV=function(e,t){var r=e.length;if(r<8)for(var n=1,o,i;n<r;){for(i=n,o=e[n];i&&t(e[i-1],o)>0;)e[i]=e[--i];i!==n++&&(e[i]=o)}else for(var a=Ext(r/2),u=SV(Tye(e,0,a),t),p=SV(Tye(e,a),t),h=u.length,g=p.length,x=0,b=0;x<h||b<g;)e[x+b]=x<h&&b<g?t(u[x],p[b])<=0?u[x++]:p[b++]:x<h?u[x++]:p[b++];return e};Mye.exports=SV});var IV=M((mkr,Aye)=>{"use strict";var Sxt=Af(),Cye=Sxt.match(/firefox\/(\d+)/i);Aye.exports=!!Cye&&+Cye[1]});var TV=M((gkr,Dye)=>{"use strict";var Ixt=Af();Dye.exports=/MSIE|Trident/.test(Ixt)});var Z5=M((vkr,Oye)=>{"use strict";var Txt=Af(),Nye=Txt.match(/AppleWebKit\/(\d+)\./);Oye.exports=!!Nye&&+Nye[1]});var Uye=M(()=>{"use strict";var Mxt=re(),zye=vt(),Cxt=Rr(),Axt=pn(),Lye=Mn(),Dxt=II(),Pye=Hr(),MV=Tt(),Nxt=Y5(),Oxt=Tc(),kye=IV(),Lxt=TV(),Rye=Pp(),jye=Z5(),Rg=[],qye=zye(Rg.sort),Pxt=zye(Rg.push),kxt=MV(function(){Rg.sort(void 0)}),Rxt=MV(function(){Rg.sort(null)}),jxt=Oxt("sort"),Fye=!MV(function(){if(Rye)return Rye<70;if(!(kye&&kye>3)){if(Lxt)return!0;if(jye)return jye<603;var e="",t,r,n,o;for(t=65;t<76;t++){switch(r=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:n=3;break;case 68:case 71:n=4;break;default:n=2;}for(o=0;o<47;o++)Rg.push({k:r+o,v:n})}for(Rg.sort(function(i,a){return a.v-i.v}),o=0;o<Rg.length;o++)r=Rg[o].k.charAt(0),e.charAt(e.length-1)!==r&&(e+=r);return e!=="DGBEFHACIJK"}}),qxt=kxt||!Rxt||!jxt||!Fye,zxt=function(e){return function(t,r){return r===void 0?-1:t===void 0?1:e!==void 0?+e(t,r)||0:Pye(t)>Pye(r)?1:-1}};Mxt({target:"Array",proto:!0,forced:qxt},{sort:function(t){t!==void 0&&Cxt(t);var r=Axt(this);if(Fye)return t===void 0?qye(r):qye(r,t);var n=[],o=Lye(r),i,a;for(a=0;a<o;a++)a in r&&Pxt(n,r[a]);for(Nxt(n,zxt(t)),i=Lye(n),a=0;a<i;)r[a]=n[a++];for(;a<o;)Dxt(r,a++);return r}})});var jg=M((xkr,Vye)=>{"use strict";var Fxt=Fr(),Uxt=ei(),Bxt=Nr(),Vxt=Tr(),Bye=Bxt("species");Vye.exports=function(e){var t=Fxt(e);Vxt&&t&&!t[Bye]&&Uxt(t,Bye,{configurable:!0,get:function(){return this}})}});var Gye=M(()=>{"use strict";var Gxt=jg();Gxt("Array")});var Hye=M(()=>{"use strict";var Hxt=re(),Wxt=pn(),$xt=Of(),Yxt=Qo(),Zxt=Mn(),Kxt=W5(),Xxt=Pg(),Jxt=Ix(),Qxt=Ic(),CV=II(),ebt=Dx(),tbt=ebt("splice"),rbt=Math.max,nbt=Math.min;Hxt({target:"Array",proto:!0,forced:!tbt},{splice:function(t,r){var n=Wxt(this),o=Zxt(n),i=$xt(t,o),a=arguments.length,u,p,h,g,x,b;for(a===0?u=p=0:a===1?(u=0,p=o-i):(u=a-2,p=nbt(rbt(Yxt(r),0),o-i)),Xxt(o+u-p),h=Jxt(n,p),g=0;g<p;g++)x=i+g,x in n&&Qxt(h,g,n[x]);if(h.length=p,u<p){for(g=i;g<o-p;g++)x=g+p,b=g+u,x in n?n[b]=n[x]:CV(n,b);for(g=o;g>o-p+u;g--)CV(n,g-1)}else if(u>p)for(g=o-p;g>i;g--)x=g+p-1,b=g+u-1,x in n?n[b]=n[x]:CV(n,b);for(g=0;g<u;g++)n[g+i]=arguments[g+2];return Kxt(n,o-p+u),h}})});var AV=M((Ikr,Wye)=>{"use strict";var obt=Mn();Wye.exports=function(e,t){for(var r=obt(e),n=new t(r),o=0;o<r;o++)n[o]=e[r-o-1];return n}});var DV=M(()=>{"use strict";var ibt=re(),abt=AV(),sbt=ia(),lbt=xi(),ubt=Array;ibt({target:"Array",proto:!0},{toReversed:function(){return abt(sbt(this),ubt)}});lbt("toReversed")});var xh=M((Ckr,$ye)=>{"use strict";var cbt=Mn();$ye.exports=function(e,t,r){for(var n=0,o=arguments.length>2?r:cbt(t),i=new e(o);o>n;)i[n]=t[n++];return i}});var NV=M((Akr,Yye)=>{"use strict";var fbt=$t();Yye.exports=function(e,t){var r=fbt[e],n=r&&r.prototype;return n&&n[t]}});var OV=M(()=>{"use strict";var pbt=re(),dbt=vt(),hbt=Rr(),mbt=ia(),gbt=xh(),vbt=NV(),ybt=xi(),_bt=Array,xbt=dbt(vbt("Array","sort"));pbt({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&hbt(t);var r=mbt(this),n=gbt(_bt,r);return xbt(n,t)}});ybt("toSorted")});var LV=M(()=>{"use strict";var bbt=re(),wbt=xi(),Ebt=Pg(),Sbt=Mn(),Ibt=Of(),Tbt=ia(),Mbt=Qo(),Cbt=Array,Abt=Math.max,Dbt=Math.min;bbt({target:"Array",proto:!0},{toSpliced:function(t,r){var n=Tbt(this),o=Sbt(n),i=Ibt(t,o),a=arguments.length,u=0,p,h,g,x;for(a===0?p=h=0:a===1?(p=0,h=o-i):(p=a-2,h=Dbt(Abt(Mbt(r),0),o-i)),g=Ebt(o+p-h),x=Cbt(g);u<i;u++)x[u]=n[u];for(;u<i+p;u++)x[u]=arguments[u-i+2];for(;u<g;u++)x[u]=n[u+h-p];return x}});wbt("toSpliced")});var Zye=M(()=>{"use strict";var Nbt=xi();Nbt("flat")});var Kye=M(()=>{"use strict";var Obt=xi();Obt("flatMap")});var Xye=M(()=>{"use strict";var Lbt=re(),Pbt=pn(),kbt=Mn(),Rbt=W5(),jbt=II(),qbt=Pg(),zbt=[].unshift(0)!==1,Fbt=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},Ubt=zbt||!Fbt();Lbt({target:"Array",proto:!0,arity:1,forced:Ubt},{unshift:function(t){var r=Pbt(this),n=kbt(r),o=arguments.length;if(o){qbt(n+o);for(var i=n;i--;){var a=i+o;i in r?r[a]=r[i]:jbt(r,a)}for(var u=0;u<o;u++)r[u]=arguments[u]}return Rbt(r,n+o)}})});var PV=M((Fkr,Jye)=>{"use strict";var Bbt=Mn(),Vbt=Qo(),Gbt=RangeError;Jye.exports=function(e,t,r,n){var o=Bbt(e),i=Vbt(r),a=i<0?o+i:i;if(a>=o||a<0)throw new Gbt("Incorrect index");for(var u=new t(o),p=0;p<o;p++)u[p]=p===a?n:e[p];return u}});var kV=M(()=>{"use strict";var Hbt=re(),Wbt=PV(),$bt=ia(),Ybt=Array;Hbt({target:"Array",proto:!0},{with:function(e,t){return Wbt($bt(this),Ybt,e,t)}})});var K5=M((Vkr,Qye)=>{"use strict";Qye.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var Mc=M((Gkr,e0e)=>{"use strict";var Zbt=fo();e0e.exports=function(e,t,r){for(var n in t)Zbt(e,n,t[n],r);return e}});var Vs=M((Hkr,t0e)=>{"use strict";var Kbt=ss(),Xbt=TypeError;t0e.exports=function(e,t){if(Kbt(t,e))return e;throw new Xbt("Incorrect invocation")}});var Nx=M((Wkr,r0e)=>{"use strict";var Jbt=Qo(),Qbt=tu(),ewt=RangeError;r0e.exports=function(e){if(e===void 0)return 0;var t=Jbt(e),r=Qbt(t);if(t!==r)throw new ewt("Wrong length or index");return r}});var X5=M(($kr,n0e)=>{"use strict";n0e.exports=Math.sign||function(t){var r=+t;return r===0||r!==r?r:r<0?-1:1}});var RV=M((Ykr,a0e)=>{"use strict";var twt=X5(),rwt=Math.abs,i0e=2220446049250313e-31,o0e=1/i0e,nwt=function(e){return e+o0e-o0e};a0e.exports=function(e,t,r,n){var o=+e,i=rwt(o),a=twt(o);if(i<n)return a*nwt(i/n/t)*n*t;var u=(1+t/i0e)*i,p=u-(u-i);return p>r||p!==p?a*(1/0):a*p}});var J5=M((Zkr,s0e)=>{"use strict";var owt=RV(),iwt=1.1920928955078125e-7,awt=34028234663852886e22,swt=11754943508222875e-54;s0e.exports=Math.fround||function(t){return owt(t,iwt,awt,swt)}});var Q5=M((Kkr,l0e)=>{"use strict";var lwt=Array,uwt=Math.abs,bh=Math.pow,cwt=Math.floor,fwt=Math.log,pwt=Math.LN2,dwt=function(e,t,r){var n=lwt(r),o=r*8-t-1,i=(1<<o)-1,a=i>>1,u=t===23?bh(2,-24)-bh(2,-77):0,p=e<0||e===0&&1/e<0?1:0,h=0,g,x,b;for(e=uwt(e),e!==e||e===1/0?(x=e!==e?1:0,g=i):(g=cwt(fwt(e)/pwt),b=bh(2,-g),e*b<1&&(g--,b*=2),g+a>=1?e+=u/b:e+=u*bh(2,1-a),e*b>=2&&(g++,b/=2),g+a>=i?(x=0,g=i):g+a>=1?(x=(e*b-1)*bh(2,t),g+=a):(x=e*bh(2,a-1)*bh(2,t),g=0));t>=8;)n[h++]=x&255,x/=256,t-=8;for(g=g<<t|x,o+=t;o>0;)n[h++]=g&255,g/=256,o-=8;return n[h-1]|=p*128,n},hwt=function(e,t){var r=e.length,n=r*8-t-1,o=(1<<n)-1,i=o>>1,a=n-7,u=r-1,p=e[u--],h=p&127,g;for(p>>=7;a>0;)h=h*256+e[u--],a-=8;for(g=h&(1<<-a)-1,h>>=-a,a+=t;a>0;)g=g*256+e[u--],a-=8;if(h===0)h=1-i;else{if(h===o)return g?NaN:p?-1/0:1/0;g+=bh(2,t),h-=i}return(p?-1:1)*g*bh(2,h-t)};l0e.exports={pack:dwt,unpack:hwt}});var RI=M((Xkr,I0e)=>{"use strict";var oO=$t(),UV=vt(),jV=Tr(),mwt=K5(),x0e=Qy(),gwt=aa(),vwt=ei(),u0e=Mc(),qV=Tt(),eO=Vs(),ywt=Qo(),_wt=tu(),rO=Nx(),xwt=J5(),b0e=Q5(),bwt=sa(),c0e=Sc(),wwt=F5(),Ewt=nu(),Swt=Og(),Iwt=t0(),w0e=wl(),BV=ro(),Twt=x0e.PROPER,f0e=x0e.CONFIGURABLE,Lx="ArrayBuffer",iO="DataView",Px="prototype",Mwt="Wrong length",E0e="Wrong index",p0e=BV.getterFor(Lx),kI=BV.getterFor(iO),d0e=BV.set,kf=oO[Lx],Hu=kf,Ox=Hu&&Hu[Px],qp=oO[iO],f0=qp&&qp[Px],h0e=Object.prototype,Cwt=oO.Array,nO=oO.RangeError,Awt=UV(wwt),Dwt=UV([].reverse),S0e=b0e.pack,m0e=b0e.unpack,g0e=function(e){return[e&255]},v0e=function(e){return[e&255,e>>8&255]},y0e=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},_0e=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},Nwt=function(e){return S0e(xwt(e),23,4)},Owt=function(e){return S0e(e,52,8)},tO=function(e,t,r){vwt(e[Px],t,{configurable:!0,get:function(){return r(this)[t]}})},qg=function(e,t,r,n){var o=kI(e),i=rO(r),a=!!n;if(i+t>o.byteLength)throw new nO(E0e);var u=o.bytes,p=i+o.byteOffset,h=Ewt(u,p,p+t);return a?h:Dwt(h)},zg=function(e,t,r,n,o,i){var a=kI(e),u=rO(r),p=n(+o),h=!!i;if(u+t>a.byteLength)throw new nO(E0e);for(var g=a.bytes,x=u+a.byteOffset,b=0;b<t;b++)g[x+b]=p[h?b:t-b-1]};mwt?(zV=Twt&&kf.name!==Lx,!qV(function(){kf(1)})||!qV(function(){new kf(-1)})||qV(function(){return new kf,new kf(1.5),new kf(NaN),kf.length!==1||zV&&!f0e})?(Hu=function(t){return eO(this,Ox),Swt(new kf(rO(t)),this,Hu)},Hu[Px]=Ox,Ox.constructor=Hu,Iwt(Hu,kf)):zV&&f0e&&gwt(kf,"name",Lx),c0e&&bwt(f0)!==h0e&&c0e(f0,h0e),PI=new qp(new Hu(2)),FV=UV(f0.setInt8),PI.setInt8(0,2147483648),PI.setInt8(1,2147483649),(PI.getInt8(0)||!PI.getInt8(1))&&u0e(f0,{setInt8:function(t,r){FV(this,t,r<<24>>24)},setUint8:function(t,r){FV(this,t,r<<24>>24)}},{unsafe:!0})):(Hu=function(t){eO(this,Ox);var r=rO(t);d0e(this,{type:Lx,bytes:Awt(Cwt(r),0),byteLength:r}),jV||(this.byteLength=r,this.detached=!1)},Ox=Hu[Px],qp=function(t,r,n){eO(this,f0),eO(t,Ox);var o=p0e(t),i=o.byteLength,a=ywt(r);if(a<0||a>i)throw new nO("Wrong offset");if(n=n===void 0?i-a:_wt(n),a+n>i)throw new nO(Mwt);d0e(this,{type:iO,buffer:t,byteLength:n,byteOffset:a,bytes:o.bytes}),jV||(this.buffer=t,this.byteLength=n,this.byteOffset=a)},f0=qp[Px],jV&&(tO(Hu,"byteLength",p0e),tO(qp,"buffer",kI),tO(qp,"byteLength",kI),tO(qp,"byteOffset",kI)),u0e(f0,{getInt8:function(t){return qg(this,1,t)[0]<<24>>24},getUint8:function(t){return qg(this,1,t)[0]},getInt16:function(t){var r=qg(this,2,t,arguments.length>1?arguments[1]:!1);return(r[1]<<8|r[0])<<16>>16},getUint16:function(t){var r=qg(this,2,t,arguments.length>1?arguments[1]:!1);return r[1]<<8|r[0]},getInt32:function(t){return _0e(qg(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return _0e(qg(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return m0e(qg(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return m0e(qg(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,r){zg(this,1,t,g0e,r)},setUint8:function(t,r){zg(this,1,t,g0e,r)},setInt16:function(t,r){zg(this,2,t,v0e,r,arguments.length>2?arguments[2]:!1)},setUint16:function(t,r){zg(this,2,t,v0e,r,arguments.length>2?arguments[2]:!1)},setInt32:function(t,r){zg(this,4,t,y0e,r,arguments.length>2?arguments[2]:!1)},setUint32:function(t,r){zg(this,4,t,y0e,r,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,r){zg(this,4,t,Nwt,r,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,r){zg(this,8,t,Owt,r,arguments.length>2?arguments[2]:!1)}}));var zV,PI,FV;w0e(Hu,Lx);w0e(qp,iO);I0e.exports={ArrayBuffer:Hu,DataView:qp}});var M0e=M(()=>{"use strict";var Lwt=re(),Pwt=$t(),kwt=RI(),Rwt=jg(),VV="ArrayBuffer",T0e=kwt[VV],jwt=Pwt[VV];Lwt({global:!0,constructor:!0,forced:jwt!==T0e},{ArrayBuffer:T0e});Rwt(VV)});var cn=M((eRr,j0e)=>{"use strict";var qwt=K5(),$V=Tr(),El=$t(),N0e=Kr(),lO=Br(),Ug=sn(),YV=ru(),zwt=Mg(),Fwt=aa(),GV=fo(),Uwt=ei(),Bwt=ss(),uO=sa(),Rx=Sc(),Vwt=Nr(),Gwt=Cg(),O0e=ro(),L0e=O0e.enforce,Hwt=O0e.get,aO=El.Int8Array,HV=aO&&aO.prototype,C0e=El.Uint8ClampedArray,A0e=C0e&&C0e.prototype,zp=aO&&uO(aO),Rf=HV&&uO(HV),Wwt=Object.prototype,ZV=El.TypeError,D0e=Vwt("toStringTag"),WV=Gwt("TYPED_ARRAY_TAG"),sO="TypedArrayConstructor",wh=qwt&&!!Rx&&YV(El.opera)!=="Opera",P0e=!1,iu,Fg,kx,Eh={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},KV={BigInt64Array:8,BigUint64Array:8},$wt=function(t){if(!lO(t))return!1;var r=YV(t);return r==="DataView"||Ug(Eh,r)||Ug(KV,r)},k0e=function(e){var t=uO(e);if(lO(t)){var r=Hwt(t);return r&&Ug(r,sO)?r[sO]:k0e(t)}},R0e=function(e){if(!lO(e))return!1;var t=YV(e);return Ug(Eh,t)||Ug(KV,t)},Ywt=function(e){if(R0e(e))return e;throw new ZV("Target is not a typed array")},Zwt=function(e){if(N0e(e)&&(!Rx||Bwt(zp,e)))return e;throw new ZV(zwt(e)+" is not a typed array constructor")},Kwt=function(e,t,r,n){if($V){if(r)for(var o in Eh){var i=El[o];if(i&&Ug(i.prototype,e))try{delete i.prototype[e]}catch(a){try{i.prototype[e]=t}catch(u){}}}(!Rf[e]||r)&&GV(Rf,e,r?t:wh&&HV[e]||t,n)}},Xwt=function(e,t,r){var n,o;if($V){if(Rx){if(r){for(n in Eh)if(o=El[n],o&&Ug(o,e))try{delete o[e]}catch(i){}}if(!zp[e]||r)try{return GV(zp,e,r?t:wh&&zp[e]||t)}catch(i){}else return}for(n in Eh)o=El[n],o&&(!o[e]||r)&&GV(o,e,t)}};for(iu in Eh)Fg=El[iu],kx=Fg&&Fg.prototype,kx?L0e(kx)[sO]=Fg:wh=!1;for(iu in KV)Fg=El[iu],kx=Fg&&Fg.prototype,kx&&(L0e(kx)[sO]=Fg);if((!wh||!N0e(zp)||zp===Function.prototype)&&(zp=function(){throw new ZV("Incorrect invocation")},wh))for(iu in Eh)El[iu]&&Rx(El[iu],zp);if((!wh||!Rf||Rf===Wwt)&&(Rf=zp.prototype,wh))for(iu in Eh)El[iu]&&Rx(El[iu].prototype,Rf);wh&&uO(A0e)!==Rf&&Rx(A0e,Rf);if($V&&!Ug(Rf,D0e)){P0e=!0,Uwt(Rf,D0e,{configurable:!0,get:function(){return lO(this)?this[WV]:void 0}});for(iu in Eh)El[iu]&&Fwt(El[iu],WV,iu)}j0e.exports={NATIVE_ARRAY_BUFFER_VIEWS:wh,TYPED_ARRAY_TAG:P0e&&WV,aTypedArray:Ywt,aTypedArrayConstructor:Zwt,exportTypedArrayMethod:Kwt,exportTypedArrayStaticMethod:Xwt,getTypedArrayConstructor:k0e,isView:$wt,isTypedArray:R0e,TypedArray:zp,TypedArrayPrototype:Rf}});var z0e=M(()=>{"use strict";var Jwt=re(),q0e=cn(),Qwt=q0e.NATIVE_ARRAY_BUFFER_VIEWS;Jwt({target:"ArrayBuffer",stat:!0,forced:!Qwt},{isView:q0e.isView})});var H0e=M(()=>{"use strict";var eEt=re(),JV=mh(),tEt=Tt(),V0e=RI(),F0e=Jt(),U0e=Of(),rEt=tu(),QV=V0e.ArrayBuffer,XV=V0e.DataView,G0e=XV.prototype,B0e=JV(QV.prototype.slice),nEt=JV(G0e.getUint8),oEt=JV(G0e.setUint8),iEt=tEt(function(){return!new QV(2).slice(1,void 0).byteLength});eEt({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:iEt},{slice:function(t,r){if(B0e&&r===void 0)return B0e(F0e(this),t);for(var n=F0e(this).byteLength,o=U0e(t,n),i=U0e(r===void 0?n:r,n),a=new QV(rEt(i-o)),u=new XV(this),p=new XV(a),h=0;o<i;)oEt(p,h++,nEt(u,o++));return a}})});var W0e=M(()=>{"use strict";var aEt=re(),sEt=RI(),lEt=K5();aEt({global:!0,constructor:!0,forced:!lEt},{DataView:sEt.DataView})});var $0e=M(()=>{"use strict";W0e()});var eG=M((uRr,K0e)=>{"use strict";var Z0e=$t(),uEt=SI(),cEt=as(),Y0e=Z0e.ArrayBuffer,fEt=Z0e.TypeError;K0e.exports=Y0e&&uEt(Y0e.prototype,"byteLength","get")||function(e){if(cEt(e)!=="ArrayBuffer")throw new fEt("ArrayBuffer expected");return e.byteLength}});var tG=M((cRr,e1e)=>{"use strict";var pEt=$t(),dEt=mh(),hEt=eG(),X0e=pEt.ArrayBuffer,J0e=X0e&&X0e.prototype,Q0e=J0e&&dEt(J0e.slice);e1e.exports=function(e){if(hEt(e)!==0||!Q0e)return!1;try{return Q0e(e,0,0),!1}catch(t){return!0}}});var rG=M(()=>{"use strict";var mEt=Tr(),gEt=ei(),vEt=tG(),t1e=ArrayBuffer.prototype;mEt&&!("detached"in t1e)&&gEt(t1e,"detached",{configurable:!0,get:function(){return vEt(this)}})});var jx=M((dRr,r1e)=>{"use strict";var yEt=tG(),_Et=TypeError;r1e.exports=function(e){if(yEt(e))throw new _Et("ArrayBuffer is detached");return e}});var nG=M((hRr,n1e)=>{"use strict";var xEt=$t(),bEt=c0();n1e.exports=function(e){if(bEt){try{return xEt.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var cO=M((mRr,i1e)=>{"use strict";var wEt=$t(),EEt=Tt(),oG=Pp(),iG=LI(),o1e=wEt.structuredClone;i1e.exports=!!o1e&&!EEt(function(){if(iG==="DENO"&&oG>92||iG==="NODE"&&oG>94||iG==="BROWSER"&&oG>97)return!1;var e=new ArrayBuffer(8),t=o1e(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var cG=M((gRr,l1e)=>{"use strict";var uG=$t(),SEt=nG(),IEt=cO(),TEt=uG.structuredClone,a1e=uG.ArrayBuffer,fO=uG.MessageChannel,lG=!1,aG,s1e,pO,sG;if(IEt)lG=function(e){TEt(e,{transfer:[e]})};else if(a1e)try{fO||(aG=SEt("worker_threads"),aG&&(fO=aG.MessageChannel)),fO&&(s1e=new fO,pO=new a1e(2),sG=function(e){s1e.port1.postMessage(null,[e])},pO.byteLength===2&&(sG(pO),pO.byteLength===0&&(lG=sG)))}catch(e){}l1e.exports=lG});var gG=M((vRr,m1e)=>{"use strict";var dG=$t(),hG=vt(),p1e=SI(),MEt=Nx(),CEt=jx(),AEt=eG(),u1e=cG(),fG=cO(),DEt=dG.structuredClone,d1e=dG.ArrayBuffer,pG=dG.DataView,NEt=Math.min,mG=d1e.prototype,h1e=pG.prototype,OEt=hG(mG.slice),c1e=p1e(mG,"resizable","get"),f1e=p1e(mG,"maxByteLength","get"),LEt=hG(h1e.getInt8),PEt=hG(h1e.setInt8);m1e.exports=(fG||u1e)&&function(e,t,r){var n=AEt(e),o=t===void 0?n:MEt(t),i=!c1e||!c1e(e),a;if(CEt(e),fG&&(e=DEt(e,{transfer:[e]}),n===o&&(r||i)))return e;if(n>=o&&(!r||i))a=OEt(e,0,o);else{var u=r&&!i&&f1e?{maxByteLength:f1e(e)}:void 0;a=new d1e(o,u);for(var p=new pG(e),h=new pG(a),g=NEt(o,n),x=0;x<g;x++)PEt(h,x,LEt(p,x))}return fG||u1e(e),a}});var vG=M(()=>{"use strict";var kEt=re(),g1e=gG();g1e&&kEt({target:"ArrayBuffer",proto:!0},{transfer:function(){return g1e(this,arguments.length?arguments[0]:void 0,!0)}})});var yG=M(()=>{"use strict";var REt=re(),v1e=gG();v1e&&REt({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return v1e(this,arguments.length?arguments[0]:void 0,!1)}})});var y1e=M(()=>{"use strict";var jEt=re(),qEt=vt(),zEt=Tt(),FEt=zEt(function(){return new Date(16e11).getYear()!==120}),UEt=qEt(Date.prototype.getFullYear);jEt({target:"Date",proto:!0,forced:FEt},{getYear:function(){return UEt(this)-1900}})});var x1e=M(()=>{"use strict";var BEt=re(),VEt=vt(),_1e=Date,GEt=VEt(_1e.prototype.getTime);BEt({target:"Date",stat:!0},{now:function(){return GEt(new _1e)}})});var E1e=M(()=>{"use strict";var HEt=re(),b1e=vt(),WEt=Qo(),w1e=Date.prototype,$Et=b1e(w1e.getTime),YEt=b1e(w1e.setFullYear);HEt({target:"Date",proto:!0},{setYear:function(t){$Et(this);var r=WEt(t),n=r>=0&&r<=99?r+1900:r;return YEt(this,n)}})});var S1e=M(()=>{"use strict";var ZEt=re();ZEt({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var jI=M((DRr,I1e)=>{"use strict";var KEt=Qo(),XEt=Hr(),JEt=Go(),QEt=RangeError;I1e.exports=function(t){var r=XEt(JEt(this)),n="",o=KEt(t);if(o<0||o===1/0)throw new QEt("Wrong number of repetitions");for(;o>0;(o>>>=1)&&(r+=r))o&1&&(n+=r);return n}});var qI=M((NRr,A1e)=>{"use strict";var C1e=vt(),eSt=tu(),T1e=Hr(),tSt=jI(),rSt=Go(),nSt=C1e(tSt),oSt=C1e("".slice),iSt=Math.ceil,M1e=function(e){return function(t,r,n){var o=T1e(rSt(t)),i=eSt(r),a=o.length,u=n===void 0?" ":T1e(n),p,h;return i<=a||u===""?o:(p=i-a,h=nSt(u,iSt(p/u.length)),h.length>p&&(h=oSt(h,0,p)),e?o+h:h+o)}};A1e.exports={start:M1e(!1),end:M1e(!0)}});var O1e=M((ORr,N1e)=>{"use strict";var Bg=vt(),D1e=Tt(),p0=qI().start,aSt=RangeError,sSt=isFinite,lSt=Math.abs,Sh=Date.prototype,_G=Sh.toISOString,uSt=Bg(Sh.getTime),cSt=Bg(Sh.getUTCDate),fSt=Bg(Sh.getUTCFullYear),pSt=Bg(Sh.getUTCHours),dSt=Bg(Sh.getUTCMilliseconds),hSt=Bg(Sh.getUTCMinutes),mSt=Bg(Sh.getUTCMonth),gSt=Bg(Sh.getUTCSeconds);N1e.exports=D1e(function(){return _G.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!D1e(function(){_G.call(new Date(NaN))})?function(){if(!sSt(uSt(this)))throw new aSt("Invalid time value");var t=this,r=fSt(t),n=dSt(t),o=r<0?"-":r>9999?"+":"";return o+p0(lSt(r),o?6:4,0)+"-"+p0(mSt(t)+1,2,0)+"-"+p0(cSt(t),2,0)+"T"+p0(pSt(t),2,0)+":"+p0(hSt(t),2,0)+":"+p0(gSt(t),2,0)+"."+p0(n,3,0)+"Z"}:_G});var P1e=M(()=>{"use strict";var vSt=re(),L1e=O1e();vSt({target:"Date",proto:!0,forced:Date.prototype.toISOString!==L1e},{toISOString:L1e})});var k1e=M(()=>{"use strict";var ySt=re(),_St=Tt(),xSt=pn(),bSt=uI(),wSt=_St(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});ySt({target:"Date",proto:!0,arity:1,forced:wSt},{toJSON:function(t){var r=xSt(this),n=bSt(r,"number");return typeof n=="number"&&!isFinite(n)?null:r.toISOString()}})});var j1e=M((jRr,R1e)=>{"use strict";var ESt=Jt(),SSt=KU(),ISt=TypeError;R1e.exports=function(e){if(ESt(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new ISt("Incorrect hint");return SSt(this,e)}});var F1e=M(()=>{"use strict";var TSt=sn(),MSt=fo(),CSt=j1e(),ASt=Nr(),q1e=ASt("toPrimitive"),z1e=Date.prototype;TSt(z1e,q1e)||MSt(z1e,q1e,CSt)});var G1e=M(()=>{"use strict";var B1e=vt(),DSt=fo(),xG=Date.prototype,U1e="Invalid Date",V1e="toString",NSt=B1e(xG[V1e]),OSt=B1e(xG.getTime);String(new Date(NaN))!==U1e&&DSt(xG,V1e,function(){var t=OSt(this);return t===t?NSt(this):U1e})});var W1e=M(()=>{"use strict";var LSt=re(),zI=vt(),PSt=Hr(),kSt=zI("".charAt),RSt=zI("".charCodeAt),jSt=zI(/./.exec),qSt=zI(1 .toString),zSt=zI("".toUpperCase),FSt=/[\w*+\-./@]/,H1e=function(e,t){for(var r=qSt(e,16);r.length<t;)r="0"+r;return r};LSt({global:!0},{escape:function(t){for(var r=PSt(t),n="",o=r.length,i=0,a,u;i<o;)a=kSt(r,i++),jSt(FSt,a)?n+=a:(u=RSt(a,0),u<256?n+="%"+H1e(u,2):n+="%u"+zSt(H1e(u,4)));return n}})});var wG=M((GRr,K1e)=>{"use strict";var Y1e=vt(),USt=Rr(),BSt=Br(),VSt=sn(),$1e=nu(),GSt=xx(),Z1e=Function,HSt=Y1e([].concat),WSt=Y1e([].join),bG={},$St=function(e,t,r){if(!VSt(bG,t)){for(var n=[],o=0;o<t;o++)n[o]="a["+o+"]";bG[t]=Z1e("C,a","return new C("+WSt(n,",")+")")}return bG[t](e,r)};K1e.exports=GSt?Z1e.bind:function(t){var r=USt(this),n=r.prototype,o=$1e(arguments,1),i=function(){var u=HSt(o,$1e(arguments));return this instanceof i?$St(r,u.length,u):r.apply(t,u)};return BSt(n)&&(i.prototype=n),i}});var J1e=M(()=>{"use strict";var YSt=re(),X1e=wG();YSt({target:"Function",proto:!0,forced:Function.bind!==X1e},{bind:X1e})});var t_e=M(()=>{"use strict";var ZSt=Kr(),Q1e=Br(),KSt=ko(),XSt=ss(),JSt=Nr(),QSt=hI(),EG=JSt("hasInstance"),e_e=Function.prototype;EG in e_e||KSt.f(e_e,EG,{value:QSt(function(e){if(!ZSt(this)||!Q1e(e))return!1;var t=this.prototype;return Q1e(t)?XSt(t,e):e instanceof this},EG)})});var i_e=M(()=>{"use strict";var e2t=Tr(),t2t=Qy().EXISTS,r_e=vt(),r2t=ei(),n_e=Function.prototype,n2t=r_e(n_e.toString),o_e=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,o2t=r_e(o_e.exec),i2t="name";e2t&&!t2t&&r2t(n_e,i2t,{configurable:!0,get:function(){try{return o2t(o_e,n2t(this))[1]}catch(e){return""}}})});var IG=M(()=>{"use strict";var a2t=re(),SG=$t();a2t({global:!0,forced:SG.globalThis!==SG},{globalThis:SG})});var DG=M(()=>{"use strict";var s2t=re(),l2t=$t(),u2t=Vs(),c2t=Jt(),f2t=Kr(),p2t=sa(),d2t=ei(),h2t=Ic(),m2t=Tt(),CG=sn(),g2t=Nr(),Fp=u0().IteratorPrototype,v2t=Tr(),y2t=fn(),TG="constructor",s_e="Iterator",a_e=g2t("toStringTag"),l_e=TypeError,MG=l2t[s_e],u_e=y2t||!f2t(MG)||MG.prototype!==Fp||!m2t(function(){MG({})}),AG=function(){if(u2t(this,Fp),p2t(this)===Fp)throw new l_e("Abstract class Iterator not directly constructable")},c_e=function(e,t){v2t?d2t(Fp,e,{configurable:!0,get:function(){return t},set:function(r){if(c2t(this),this===Fp)throw new l_e("You can't redefine this property");CG(this,e)?this[e]=r:h2t(this,e,r)}}):Fp[e]=t};CG(Fp,a_e)||c_e(a_e,s_e);(u_e||!CG(Fp,TG)||Fp[TG]===Object)&&c_e(TG,AG);AG.prototype=Fp;s2t({global:!0,constructor:!0,forced:u_e},{Iterator:AG})});var ui=M((tjr,f_e)=>{"use strict";f_e.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var FI=M((rjr,p_e)=>{"use strict";var _2t=RangeError;p_e.exports=function(e){if(e===e)return e;throw new _2t("NaN is not allowed")}});var qx=M((njr,d_e)=>{"use strict";var x2t=Qo(),b2t=RangeError;d_e.exports=function(e){var t=x2t(e);if(t<0)throw new b2t("The argument can't be less than 0");return t}});var Vg=M((ojr,x_e)=>{"use strict";var w2t=er(),E2t=ki(),S2t=aa(),I2t=Mc(),T2t=Nr(),h_e=ro(),M2t=Pi(),C2t=u0().IteratorPrototype,NG=qa(),OG=yh(),A2t=T2t("toStringTag"),m_e="IteratorHelper",g_e="WrapForValidIterator",D2t=h_e.set,v_e=function(e){var t=h_e.getterFor(e?g_e:m_e);return I2t(E2t(C2t),{next:function(){var n=t(this);if(e)return n.nextHandler();try{var o=n.done?void 0:n.nextHandler();return NG(o,n.done)}catch(i){throw n.done=!0,i}},return:function(){var r=t(this),n=r.iterator;if(r.done=!0,e){var o=M2t(n,"return");return o?w2t(o,n):NG(void 0,!0)}if(r.inner)try{OG(r.inner.iterator,"normal")}catch(i){return OG(n,"throw",i)}return n&&OG(n,"normal"),NG(void 0,!0)}})},N2t=v_e(!0),y_e=v_e(!1);S2t(y_e,A2t,"Iterator Helper");x_e.exports=function(e,t){var r=function(o,i){i?(i.iterator=o.iterator,i.next=o.next):i=o,i.type=t?g_e:m_e,i.nextHandler=e,i.counter=0,i.done=!1,D2t(this,i)};return r.prototype=t?N2t:y_e,r}});var PG=M(()=>{"use strict";var O2t=re(),b_e=er(),LG=Jt(),L2t=ui(),P2t=FI(),k2t=qx(),R2t=Vg(),j2t=fn(),q2t=R2t(function(){for(var e=this.iterator,t=this.next,r,n;this.remaining;)if(this.remaining--,r=LG(b_e(t,e)),n=this.done=!!r.done,n)return;if(r=LG(b_e(t,e)),n=this.done=!!r.done,!n)return r.value});O2t({target:"Iterator",proto:!0,real:!0,forced:j2t},{drop:function(t){LG(this);var r=k2t(P2t(+t));return new q2t(L2t(this),{remaining:r})}})});var kG=M(()=>{"use strict";var z2t=re(),F2t=_i(),U2t=Rr(),B2t=Jt(),V2t=ui();z2t({target:"Iterator",proto:!0,real:!0},{every:function(t){B2t(this),U2t(t);var r=V2t(this),n=0;return!F2t(r,function(o,i){if(!t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var RG=M(()=>{"use strict";var G2t=re(),H2t=er(),W2t=Rr(),w_e=Jt(),$2t=ui(),Y2t=Vg(),Z2t=U5(),K2t=fn(),X2t=Y2t(function(){for(var e=this.iterator,t=this.predicate,r=this.next,n,o,i;;){if(n=w_e(H2t(r,e)),o=this.done=!!n.done,o)return;if(i=n.value,Z2t(e,t,[i,this.counter++],!0))return i}});G2t({target:"Iterator",proto:!0,real:!0,forced:K2t},{filter:function(t){return w_e(this),W2t(t),new X2t($2t(this),{predicate:t})}})});var jG=M(()=>{"use strict";var J2t=re(),Q2t=_i(),eIt=Rr(),tIt=Jt(),rIt=ui();J2t({target:"Iterator",proto:!0,real:!0},{find:function(t){tIt(this),eIt(t);var r=rIt(this),n=0;return Q2t(r,function(o,i){if(t(o,n++))return i(o)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var qG=M((djr,S_e)=>{"use strict";var nIt=er(),E_e=Jt(),oIt=ui(),iIt=jp();S_e.exports=function(e,t){(!t||typeof e!="string")&&E_e(e);var r=iIt(e);return oIt(E_e(r!==void 0?nIt(r,e):e))}});var FG=M(()=>{"use strict";var aIt=re(),I_e=er(),sIt=Rr(),zG=Jt(),lIt=ui(),uIt=qG(),cIt=Vg(),T_e=yh(),fIt=fn(),pIt=cIt(function(){for(var e=this.iterator,t=this.mapper,r,n;;){if(n=this.inner)try{if(r=zG(I_e(n.next,n.iterator)),!r.done)return r.value;this.inner=null}catch(o){T_e(e,"throw",o)}if(r=zG(I_e(this.next,e)),this.done=!!r.done)return;try{this.inner=uIt(t(r.value,this.counter++),!1)}catch(o){T_e(e,"throw",o)}}});aIt({target:"Iterator",proto:!0,real:!0,forced:fIt},{flatMap:function(t){return zG(this),sIt(t),new pIt(lIt(this),{mapper:t,inner:null})}})});var UG=M(()=>{"use strict";var dIt=re(),hIt=_i(),mIt=Rr(),gIt=Jt(),vIt=ui();dIt({target:"Iterator",proto:!0,real:!0},{forEach:function(t){gIt(this),mIt(t);var r=vIt(this),n=0;hIt(r,function(o){t(o,n++)},{IS_RECORD:!0})}})});var BG=M(()=>{"use strict";var yIt=re(),_It=er(),xIt=pn(),bIt=ss(),wIt=u0().IteratorPrototype,EIt=Vg(),SIt=qG(),IIt=fn(),TIt=EIt(function(){return _It(this.next,this.iterator)},!0);yIt({target:"Iterator",stat:!0,forced:IIt},{from:function(t){var r=SIt(typeof t=="string"?xIt(t):t,!0);return bIt(wIt,r.iterator)?r.iterator:new TIt(r)}})});var VG=M((xjr,C_e)=>{"use strict";var MIt=er(),CIt=Rr(),M_e=Jt(),AIt=ui(),DIt=Vg(),NIt=U5(),OIt=DIt(function(){var e=this.iterator,t=M_e(MIt(this.next,e)),r=this.done=!!t.done;if(!r)return NIt(e,this.mapper,[t.value,this.counter++],!0)});C_e.exports=function(t){return M_e(this),CIt(t),new OIt(AIt(this),{mapper:t})}});var GG=M(()=>{"use strict";var LIt=re(),PIt=VG(),kIt=fn();LIt({target:"Iterator",proto:!0,real:!0,forced:kIt},{map:PIt})});var HG=M(()=>{"use strict";var RIt=re(),jIt=_i(),qIt=Rr(),zIt=Jt(),FIt=ui(),UIt=TypeError;RIt({target:"Iterator",proto:!0,real:!0},{reduce:function(t){zIt(this),qIt(t);var r=FIt(this),n=arguments.length<2,o=n?void 0:arguments[1],i=0;if(jIt(r,function(a){n?(n=!1,o=a):o=t(o,a,i),i++},{IS_RECORD:!0}),n)throw new UIt("Reduce of empty iterator with no initial value");return o}})});var WG=M(()=>{"use strict";var BIt=re(),VIt=_i(),GIt=Rr(),HIt=Jt(),WIt=ui();BIt({target:"Iterator",proto:!0,real:!0},{some:function(t){HIt(this),GIt(t);var r=WIt(this),n=0;return VIt(r,function(o,i){if(t(o,n++))return i()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var $G=M(()=>{"use strict";var $It=re(),YIt=er(),A_e=Jt(),ZIt=ui(),KIt=FI(),XIt=qx(),JIt=Vg(),QIt=yh(),eTt=fn(),tTt=JIt(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,QIt(e,"normal",void 0);var t=A_e(YIt(this.next,e)),r=this.done=!!t.done;if(!r)return t.value});$It({target:"Iterator",proto:!0,real:!0,forced:eTt},{take:function(t){A_e(this);var r=XIt(KIt(+t));return new tTt(ZIt(this),{remaining:r})}})});var YG=M(()=>{"use strict";var rTt=re(),nTt=Jt(),oTt=_i(),iTt=ui(),aTt=[].push;rTt({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return oTt(iTt(nTt(this)),aTt,{that:t,IS_RECORD:!0}),t}})});var D_e=M(()=>{"use strict";var sTt=$t(),lTt=wl();lTt(sTt.JSON,"JSON",!0)});var dO=M((Ljr,N_e)=>{"use strict";var uTt=Tt();N_e.exports=uTt(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var mO=M((Pjr,L_e)=>{"use strict";var cTt=Tt(),fTt=Br(),pTt=as(),O_e=dO(),hO=Object.isExtensible,dTt=cTt(function(){hO(1)});L_e.exports=dTt||O_e?function(t){return!fTt(t)||O_e&&pTt(t)==="ArrayBuffer"?!1:hO?hO(t):!0}:hO});var Ih=M((kjr,P_e)=>{"use strict";var hTt=Tt();P_e.exports=!hTt(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Gg=M((Rjr,j_e)=>{"use strict";var mTt=re(),gTt=vt(),vTt=wx(),yTt=Br(),ZG=sn(),_Tt=ko().f,k_e=Ag(),xTt=w5(),KG=mO(),bTt=Cg(),wTt=Ih(),R_e=!1,Th=bTt("meta"),ETt=0,XG=function(e){_Tt(e,Th,{value:{objectID:"O"+ETt++,weakData:{}}})},STt=function(e,t){if(!yTt(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!ZG(e,Th)){if(!KG(e))return"F";if(!t)return"E";XG(e)}return e[Th].objectID},ITt=function(e,t){if(!ZG(e,Th)){if(!KG(e))return!0;if(!t)return!1;XG(e)}return e[Th].weakData},TTt=function(e){return wTt&&R_e&&KG(e)&&!ZG(e,Th)&&XG(e),e},MTt=function(){CTt.enable=function(){},R_e=!0;var e=k_e.f,t=gTt([].splice),r={};r[Th]=1,e(r).length&&(k_e.f=function(n){for(var o=e(n),i=0,a=o.length;i<a;i++)if(o[i]===Th){t(o,i,1);break}return o},mTt({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:xTt.f}))},CTt=j_e.exports={enable:MTt,fastKey:STt,getWeakData:ITt,onFreeze:TTt};vTt[Th]=!0});var UI=M((jjr,z_e)=>{"use strict";var ATt=re(),DTt=$t(),NTt=vt(),q_e=Sx(),OTt=fo(),LTt=Gg(),PTt=_i(),kTt=Vs(),RTt=Kr(),jTt=oa(),JG=Br(),QG=Tt(),qTt=MI(),zTt=wl(),FTt=Og();z_e.exports=function(e,t,r){var n=e.indexOf("Map")!==-1,o=e.indexOf("Weak")!==-1,i=n?"set":"add",a=DTt[e],u=a&&a.prototype,p=a,h={},g=function(k){var q=NTt(u[k]);OTt(u,k,k==="add"?function(H){return q(this,H===0?0:H),this}:k==="delete"?function(U){return o&&!JG(U)?!1:q(this,U===0?0:U)}:k==="get"?function(H){return o&&!JG(H)?void 0:q(this,H===0?0:H)}:k==="has"?function(H){return o&&!JG(H)?!1:q(this,H===0?0:H)}:function(H,X){return q(this,H===0?0:H,X),this})},x=q_e(e,!RTt(a)||!(o||u.forEach&&!QG(function(){new a().entries().next()})));if(x)p=r.getConstructor(t,e,n,i),LTt.enable();else if(q_e(e,!0)){var b=new p,T=b[i](o?{}:-0,1)!==b,A=QG(function(){b.has(1)}),L=qTt(function(k){new a(k)}),P=!o&&QG(function(){for(var k=new a,q=5;q--;)k[i](q,q);return!k.has(-0)});L||(p=t(function(k,q){kTt(k,u);var U=FTt(new a,k,p);return jTt(q)||PTt(q,U[i],{that:U,AS_ENTRIES:n}),U}),p.prototype=u,u.constructor=p),(A||P)&&(g("delete"),g("has"),n&&g("get")),(P||T)&&g(i),o&&u.clear&&delete u.clear}return h[e]=p,ATt({global:!0,constructor:!0,forced:p!==a},h),zTt(p,e),o||r.setStrong(p,e,n),p}});var tH=M((qjr,H_e)=>{"use strict";var F_e=ki(),UTt=ei(),U_e=Mc(),BTt=xo(),VTt=Vs(),GTt=oa(),HTt=_i(),WTt=G5(),gO=qa(),$Tt=jg(),BI=Tr(),B_e=Gg().fastKey,G_e=ro(),V_e=G_e.set,eH=G_e.getterFor;H_e.exports={getConstructor:function(e,t,r,n){var o=e(function(h,g){VTt(h,i),V_e(h,{type:t,index:F_e(null),first:null,last:null,size:0}),BI||(h.size=0),GTt(g)||HTt(g,h[n],{that:h,AS_ENTRIES:r})}),i=o.prototype,a=eH(t),u=function(h,g,x){var b=a(h),T=p(h,g),A,L;return T?T.value=x:(b.last=T={index:L=B_e(g,!0),key:g,value:x,previous:A=b.last,next:null,removed:!1},b.first||(b.first=T),A&&(A.next=T),BI?b.size++:h.size++,L!=="F"&&(b.index[L]=T)),h},p=function(h,g){var x=a(h),b=B_e(g),T;if(b!=="F")return x.index[b];for(T=x.first;T;T=T.next)if(T.key===g)return T};return U_e(i,{clear:function(){for(var g=this,x=a(g),b=x.first;b;)b.removed=!0,b.previous&&(b.previous=b.previous.next=null),b=b.next;x.first=x.last=null,x.index=F_e(null),BI?x.size=0:g.size=0},delete:function(h){var g=this,x=a(g),b=p(g,h);if(b){var T=b.next,A=b.previous;delete x.index[b.index],b.removed=!0,A&&(A.next=T),T&&(T.previous=A),x.first===b&&(x.first=T),x.last===b&&(x.last=A),BI?x.size--:g.size--}return!!b},forEach:function(g){for(var x=a(this),b=BTt(g,arguments.length>1?arguments[1]:void 0),T;T=T?T.next:x.first;)for(b(T.value,T.key,this);T&&T.removed;)T=T.previous},has:function(g){return!!p(this,g)}}),U_e(i,r?{get:function(g){var x=p(this,g);return x&&x.value},set:function(g,x){return u(this,g===0?0:g,x)}}:{add:function(g){return u(this,g=g===0?0:g,g)}}),BI&&UTt(i,"size",{configurable:!0,get:function(){return a(this).size}}),o},setStrong:function(e,t,r){var n=t+" Iterator",o=eH(t),i=eH(n);WTt(e,t,function(a,u){V_e(this,{type:n,target:a,state:o(a),kind:u,last:null})},function(){for(var a=i(this),u=a.kind,p=a.last;p&&p.removed;)p=p.previous;return!a.target||!(a.last=p=p?p.next:a.state.first)?(a.target=null,gO(void 0,!0)):gO(u==="keys"?p.key:u==="values"?p.value:[p.key,p.value],!1)},r?"entries":"values",!r,!0),$Tt(t)}}});var W_e=M(()=>{"use strict";var YTt=UI(),ZTt=tH();YTt("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},ZTt)});var vO=M(()=>{"use strict";W_e()});var _a=M((Vjr,$_e)=>{"use strict";var yO=vt(),VI=Map.prototype;$_e.exports={Map,set:yO(VI.set),get:yO(VI.get),has:yO(VI.has),remove:yO(VI.delete),proto:VI}});var rH=M(()=>{"use strict";var KTt=re(),XTt=vt(),JTt=Rr(),QTt=Go(),eMt=_i(),_O=_a(),Y_e=fn(),tMt=Tt(),Z_e=_O.Map,rMt=_O.has,nMt=_O.get,oMt=_O.set,iMt=XTt([].push),aMt=Y_e||tMt(function(){return Z_e.groupBy("ab",function(e){return e}).get("a").length!==1});KTt({target:"Map",stat:!0,forced:Y_e||aMt},{groupBy:function(t,r){QTt(t),JTt(r);var n=new Z_e,o=0;return eMt(t,function(i){var a=r(i,o++);rMt(n,a)?iMt(nMt(n,a),i):oMt(n,a,[i])}),n}})});var nH=M((Wjr,K_e)=>{"use strict";var sMt=Math.log;K_e.exports=Math.log1p||function(t){var r=+t;return r>-1e-8&&r<1e-8?r-r*r/2:sMt(1+r)}});var J_e=M(()=>{"use strict";var lMt=re(),uMt=nH(),oH=Math.acosh,cMt=Math.log,X_e=Math.sqrt,fMt=Math.LN2,pMt=!oH||Math.floor(oH(Number.MAX_VALUE))!==710||oH(1/0)!==1/0;lMt({target:"Math",stat:!0,forced:pMt},{acosh:function(t){var r=+t;return r<1?NaN:r>94906265.62425156?cMt(r)+fMt:uMt(r-1+X_e(r-1)*X_e(r+1))}})});var txe=M(()=>{"use strict";var dMt=re(),Q_e=Math.asinh,hMt=Math.log,mMt=Math.sqrt;function exe(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-exe(-t):hMt(t+mMt(t*t+1))}var gMt=!(Q_e&&1/Q_e(0)>0);dMt({target:"Math",stat:!0,forced:gMt},{asinh:exe})});var nxe=M(()=>{"use strict";var vMt=re(),rxe=Math.atanh,yMt=Math.log,_Mt=!(rxe&&1/rxe(-0)<0);vMt({target:"Math",stat:!0,forced:_Mt},{atanh:function(t){var r=+t;return r===0?r:yMt((1+r)/(1-r))/2}})});var oxe=M(()=>{"use strict";var xMt=re(),bMt=X5(),wMt=Math.abs,EMt=Math.pow;xMt({target:"Math",stat:!0},{cbrt:function(t){var r=+t;return bMt(r)*EMt(wMt(r),1/3)}})});var ixe=M(()=>{"use strict";var SMt=re(),IMt=Math.floor,TMt=Math.log,MMt=Math.LOG2E;SMt({target:"Math",stat:!0},{clz32:function(t){var r=t>>>0;return r?31-IMt(TMt(r+.5)*MMt):32}})});var HI=M((n6r,axe)=>{"use strict";var GI=Math.expm1,CMt=Math.exp;axe.exports=!GI||GI(10)>22025.465794806718||GI(10)<22025.465794806718||GI(-2e-17)!==-2e-17?function(t){var r=+t;return r===0?r:r>-1e-6&&r<1e-6?r+r*r/2:CMt(r)-1}:GI});var lxe=M(()=>{"use strict";var AMt=re(),DMt=HI(),sxe=Math.cosh,NMt=Math.abs,iH=Math.E,OMt=!sxe||sxe(710)===1/0;AMt({target:"Math",stat:!0,forced:OMt},{cosh:function(t){var r=DMt(NMt(t)-1)+1;return(r+1/(r*iH*iH))*(iH/2)}})});var cxe=M(()=>{"use strict";var LMt=re(),uxe=HI();LMt({target:"Math",stat:!0,forced:uxe!==Math.expm1},{expm1:uxe})});var fxe=M(()=>{"use strict";var PMt=re(),kMt=J5();PMt({target:"Math",stat:!0},{fround:kMt})});var dxe=M(()=>{"use strict";var RMt=re(),pxe=Math.hypot,jMt=Math.abs,qMt=Math.sqrt,zMt=!!pxe&&pxe(1/0,NaN)!==1/0;RMt({target:"Math",stat:!0,arity:2,forced:zMt},{hypot:function(t,r){for(var n=0,o=0,i=arguments.length,a=0,u,p;o<i;)u=jMt(arguments[o++]),a<u?(p=a/u,n=n*p*p+1,a=u):u>0?(p=u/a,n+=p*p):n+=u;return a===1/0?1/0:a*qMt(n)}})});var mxe=M(()=>{"use strict";var FMt=re(),UMt=Tt(),hxe=Math.imul,BMt=UMt(function(){return hxe(4294967295,5)!==-5||hxe.length!==2});FMt({target:"Math",stat:!0,forced:BMt},{imul:function(t,r){var n=65535,o=+t,i=+r,a=n&o,u=n&i;return 0|a*u+((n&o>>>16)*u+a*(n&i>>>16)<<16>>>0)}})});var aH=M((h6r,gxe)=>{"use strict";var VMt=Math.log,GMt=Math.LOG10E;gxe.exports=Math.log10||function(t){return VMt(t)*GMt}});var vxe=M(()=>{"use strict";var HMt=re(),WMt=aH();HMt({target:"Math",stat:!0},{log10:WMt})});var yxe=M(()=>{"use strict";var $Mt=re(),YMt=nH();$Mt({target:"Math",stat:!0},{log1p:YMt})});var _xe=M(()=>{"use strict";var ZMt=re(),KMt=Math.log,XMt=Math.LN2;ZMt({target:"Math",stat:!0},{log2:function(t){return KMt(t)/XMt}})});var xxe=M(()=>{"use strict";var JMt=re(),QMt=X5();JMt({target:"Math",stat:!0},{sign:QMt})});var Exe=M(()=>{"use strict";var eCt=re(),tCt=Tt(),bxe=HI(),rCt=Math.abs,wxe=Math.exp,nCt=Math.E,oCt=tCt(function(){return Math.sinh(-2e-17)!==-2e-17});eCt({target:"Math",stat:!0,forced:oCt},{sinh:function(t){var r=+t;return rCt(r)<1?(bxe(r)-bxe(-r))/2:(wxe(r-1)-wxe(-r-1))*(nCt/2)}})});var Txe=M(()=>{"use strict";var iCt=re(),Sxe=HI(),Ixe=Math.exp;iCt({target:"Math",stat:!0},{tanh:function(t){var r=+t,n=Sxe(r),o=Sxe(-r);return n===1/0?1:o===1/0?-1:(n-o)/(Ixe(r)+Ixe(-r))}})});var Mxe=M(()=>{"use strict";var aCt=wl();aCt(Math,"Math",!0)});var Cxe=M(()=>{"use strict";var sCt=re(),lCt=hB();sCt({target:"Math",stat:!0},{trunc:lCt})});var WI=M((N6r,Axe)=>{"use strict";var uCt=vt();Axe.exports=uCt(1 .valueOf)});var d0=M((O6r,Dxe)=>{"use strict";Dxe.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var h0=M((L6r,Oxe)=>{"use strict";var cCt=vt(),fCt=Go(),pCt=Hr(),lH=d0(),Nxe=cCt("".replace),dCt=RegExp("^["+lH+"]+"),hCt=RegExp("(^|[^"+lH+"])["+lH+"]+$"),sH=function(e){return function(t){var r=pCt(fCt(t));return e&1&&(r=Nxe(r,dCt,"")),e&2&&(r=Nxe(r,hCt,"$1")),r}};Oxe.exports={start:sH(1),end:sH(2),trim:sH(3)}});var zxe=M(()=>{"use strict";var mCt=re(),uH=fn(),gCt=Tr(),kxe=$t(),cH=E5(),Rxe=vt(),vCt=Sx(),Lxe=sn(),yCt=Og(),_Ct=ss(),xCt=dh(),jxe=uI(),bCt=Tt(),wCt=Ag().f,ECt=Ra().f,SCt=ko().f,ICt=WI(),TCt=h0().trim,$I="Number",zx=kxe[$I],Pxe=cH[$I],fH=zx.prototype,MCt=kxe.TypeError,CCt=Rxe("".slice),xO=Rxe("".charCodeAt),ACt=function(e){var t=jxe(e,"number");return typeof t=="bigint"?t:DCt(t)},DCt=function(e){var t=jxe(e,"number"),r,n,o,i,a,u,p,h;if(xCt(t))throw new MCt("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=TCt(t),r=xO(t,0),r===43||r===45){if(n=xO(t,2),n===88||n===120)return NaN}else if(r===48){switch(xO(t,1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+t;}for(a=CCt(t,2),u=a.length,p=0;p<u;p++)if(h=xO(a,p),h<48||h>i)return NaN;return parseInt(a,o)}}return+t},pH=vCt($I,!zx(" 0o1")||!zx("0b1")||zx("+0x1")),NCt=function(e){return _Ct(fH,e)&&bCt(function(){ICt(e)})},bO=function(t){var r=arguments.length<1?0:zx(ACt(t));return NCt(this)?yCt(Object(r),this,bO):r};bO.prototype=fH;pH&&!uH&&(fH.constructor=bO);mCt({global:!0,constructor:!0,wrap:!0,forced:pH},{Number:bO});var qxe=function(e,t){for(var r=gCt?wCt(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),n=0,o;r.length>n;n++)Lxe(t,o=r[n])&&!Lxe(e,o)&&SCt(e,o,ECt(t,o))};uH&&Pxe&&qxe(cH[$I],Pxe);(pH||uH)&&qxe(cH[$I],zx)});var Fxe=M(()=>{"use strict";var OCt=re();OCt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var dH=M((q6r,Uxe)=>{"use strict";var LCt=$t(),PCt=LCt.isFinite;Uxe.exports=Number.isFinite||function(t){return typeof t=="number"&&PCt(t)}});var Bxe=M(()=>{"use strict";var kCt=re(),RCt=dH();kCt({target:"Number",stat:!0},{isFinite:RCt})});var wO=M((U6r,Vxe)=>{"use strict";var jCt=Br(),qCt=Math.floor;Vxe.exports=Number.isInteger||function(t){return!jCt(t)&&isFinite(t)&&qCt(t)===t}});var Gxe=M(()=>{"use strict";var zCt=re(),FCt=wO();zCt({target:"Number",stat:!0},{isInteger:FCt})});var Hxe=M(()=>{"use strict";var UCt=re();UCt({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var Wxe=M(()=>{"use strict";var BCt=re(),VCt=wO(),GCt=Math.abs;BCt({target:"Number",stat:!0},{isSafeInteger:function(t){return VCt(t)&&GCt(t)<=9007199254740991}})});var $xe=M(()=>{"use strict";var HCt=re();HCt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var Yxe=M(()=>{"use strict";var WCt=re();WCt({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var hH=M((J6r,Jxe)=>{"use strict";var Xxe=$t(),$Ct=Tt(),YCt=vt(),ZCt=Hr(),KCt=h0().trim,XCt=d0(),JCt=YCt("".charAt),EO=Xxe.parseFloat,Zxe=Xxe.Symbol,Kxe=Zxe&&Zxe.iterator,QCt=1/EO(XCt+"-0")!==-1/0||Kxe&&!$Ct(function(){EO(Object(Kxe))});Jxe.exports=QCt?function(t){var r=KCt(ZCt(t)),n=EO(r);return n===0&&JCt(r,0)==="-"?-0:n}:EO});var ebe=M(()=>{"use strict";var eAt=re(),Qxe=hH();eAt({target:"Number",stat:!0,forced:Number.parseFloat!==Qxe},{parseFloat:Qxe})});var mH=M((tqr,abe)=>{"use strict";var obe=$t(),tAt=Tt(),rAt=vt(),nAt=Hr(),oAt=h0().trim,tbe=d0(),YI=obe.parseInt,rbe=obe.Symbol,nbe=rbe&&rbe.iterator,ibe=/^[+-]?0x/i,iAt=rAt(ibe.exec),aAt=YI(tbe+"08")!==8||YI(tbe+"0x16")!==22||nbe&&!tAt(function(){YI(Object(nbe))});abe.exports=aAt?function(t,r){var n=oAt(nAt(t));return YI(n,r>>>0||(iAt(ibe,n)?16:10))}:YI});var lbe=M(()=>{"use strict";var sAt=re(),sbe=mH();sAt({target:"Number",stat:!0,forced:Number.parseInt!==sbe},{parseInt:sbe})});var dbe=M(()=>{"use strict";var lAt=re(),vH=vt(),uAt=Qo(),cAt=WI(),fAt=jI(),pAt=aH(),gH=Tt(),dAt=RangeError,ube=String,hAt=isFinite,mAt=Math.abs,gAt=Math.floor,cbe=Math.pow,vAt=Math.round,Up=vH(1 .toExponential),yAt=vH(fAt),fbe=vH("".slice),pbe=Up(-69e-12,4)==="-6.9000e-11"&&Up(1.255,2)==="1.25e+0"&&Up(12345,3)==="1.235e+4"&&Up(25,0)==="3e+1",_At=function(){return gH(function(){Up(1,1/0)})&&gH(function(){Up(1,-1/0)})},xAt=function(){return!gH(function(){Up(1/0,1/0),Up(NaN,1/0)})},bAt=!pbe||!_At()||!xAt();lAt({target:"Number",proto:!0,forced:bAt},{toExponential:function(t){var r=cAt(this);if(t===void 0)return Up(r);var n=uAt(t);if(!hAt(r))return String(r);if(n<0||n>20)throw new dAt("Incorrect fraction digits");if(pbe)return Up(r,n);var o="",i,a,u,p;if(r<0&&(o="-",r=-r),r===0)a=0,i=yAt("0",n+1);else{var h=pAt(r);a=gAt(h);var g=cbe(10,a-n),x=vAt(r/g);2*r>=(2*x+1)*g&&(x+=1),x>=cbe(10,n+1)&&(x/=10,a+=1),i=ube(x)}return n!==0&&(i=fbe(i,0,1)+"."+fbe(i,1)),a===0?(u="+",p="0"):(u=a>0?"+":"-",p=ube(mAt(a))),i+="e"+u+p,o+i}})});var _be=M(()=>{"use strict";var wAt=re(),xH=vt(),EAt=Qo(),SAt=WI(),IAt=jI(),hbe=Tt(),TAt=RangeError,vbe=String,ybe=Math.floor,_H=xH(IAt),mbe=xH("".slice),ZI=xH(1 .toFixed),Ux=function(e,t,r){return t===0?r:t%2===1?Ux(e,t-1,r*e):Ux(e*e,t/2,r)},MAt=function(e){for(var t=0,r=e;r>=4096;)t+=12,r/=4096;for(;r>=2;)t+=1,r/=2;return t},Fx=function(e,t,r){for(var n=-1,o=r;++n<6;)o+=t*e[n],e[n]=o%1e7,o=ybe(o/1e7)},yH=function(e,t){for(var r=6,n=0;--r>=0;)n+=e[r],e[r]=ybe(n/t),n=n%t*1e7},gbe=function(e){for(var t=6,r="";--t>=0;)if(r!==""||t===0||e[t]!==0){var n=vbe(e[t]);r=r===""?n:r+_H("0",7-n.length)+n}return r},CAt=hbe(function(){return ZI(8e-5,3)!=="0.000"||ZI(.9,0)!=="1"||ZI(1.255,2)!=="1.25"||ZI(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!hbe(function(){ZI({})});wAt({target:"Number",proto:!0,forced:CAt},{toFixed:function(t){var r=SAt(this),n=EAt(t),o=[0,0,0,0,0,0],i="",a="0",u,p,h,g;if(n<0||n>20)throw new TAt("Incorrect fraction digits");if(r!==r)return"NaN";if(r<=-1e21||r>=1e21)return vbe(r);if(r<0&&(i="-",r=-r),r>1e-21)if(u=MAt(r*Ux(2,69,1))-69,p=u<0?r*Ux(2,-u,1):r/Ux(2,u,1),p*=4503599627370496,u=52-u,u>0){for(Fx(o,0,p),h=n;h>=7;)Fx(o,1e7,0),h-=7;for(Fx(o,Ux(10,h,1),0),h=u-1;h>=23;)yH(o,1<<23),h-=23;yH(o,1<<h),Fx(o,1,1),yH(o,2),a=gbe(o)}else Fx(o,0,p),Fx(o,1<<-u,0),a=gbe(o)+_H("0",n);return n>0?(g=a.length,a=i+(g<=n?"0."+_H("0",n-g)+a:mbe(a,0,g-n)+"."+mbe(a,g-n))):a=i+a,a}})});var wbe=M(()=>{"use strict";var AAt=re(),DAt=vt(),xbe=Tt(),bbe=WI(),SO=DAt(1 .toPrecision),NAt=xbe(function(){return SO(1,void 0)!=="1"})||!xbe(function(){SO({})});AAt({target:"Number",proto:!0,forced:NAt},{toPrecision:function(t){return t===void 0?SO(bbe(this)):SO(bbe(this),t)}})});var wH=M((cqr,Ibe)=>{"use strict";var Ebe=Tr(),OAt=vt(),LAt=er(),PAt=Tt(),bH=r0(),kAt=mI(),RAt=sI(),jAt=pn(),qAt=ph(),Bx=Object.assign,Sbe=Object.defineProperty,zAt=OAt([].concat);Ibe.exports=!Bx||PAt(function(){if(Ebe&&Bx({b:1},Bx(Sbe({},"a",{enumerable:!0,get:function(){Sbe(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},r=Symbol("assign detection"),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),Bx({},e)[r]!==7||bH(Bx({},t)).join("")!==n})?function(t,r){for(var n=jAt(t),o=arguments.length,i=1,a=kAt.f,u=RAt.f;o>i;)for(var p=qAt(arguments[i++]),h=a?zAt(bH(p),a(p)):bH(p),g=h.length,x=0,b;g>x;)b=h[x++],(!Ebe||LAt(u,p,b))&&(n[b]=p[b]);return n}:Bx});var Mbe=M(()=>{"use strict";var FAt=re(),Tbe=wH();FAt({target:"Object",stat:!0,arity:2,forced:Object.assign!==Tbe},{assign:Tbe})});var Cbe=M(()=>{"use strict";var UAt=re(),BAt=Tr(),VAt=ki();UAt({target:"Object",stat:!0,sham:!BAt},{create:VAt})});var KI=M((mqr,Dbe)=>{"use strict";var GAt=fn(),HAt=$t(),WAt=Tt(),Abe=Z5();Dbe.exports=GAt||!WAt(function(){if(!(Abe&&Abe<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete HAt[e]}})});var Nbe=M(()=>{"use strict";var $At=re(),YAt=Tr(),ZAt=KI(),KAt=Rr(),XAt=pn(),JAt=ko();YAt&&$At({target:"Object",proto:!0,forced:ZAt},{__defineGetter__:function(t,r){JAt.f(XAt(this),t,{get:KAt(r),enumerable:!0,configurable:!0})}})});var Lbe=M(()=>{"use strict";var QAt=re(),eDt=Tr(),Obe=_5().f;QAt({target:"Object",stat:!0,forced:Object.defineProperties!==Obe,sham:!eDt},{defineProperties:Obe})});var kbe=M(()=>{"use strict";var tDt=re(),rDt=Tr(),Pbe=ko().f;tDt({target:"Object",stat:!0,forced:Object.defineProperty!==Pbe,sham:!rDt},{defineProperty:Pbe})});var Rbe=M(()=>{"use strict";var nDt=re(),oDt=Tr(),iDt=KI(),aDt=Rr(),sDt=pn(),lDt=ko();oDt&&nDt({target:"Object",proto:!0,forced:iDt},{__defineSetter__:function(t,r){lDt.f(sDt(this),t,{set:aDt(r),enumerable:!0,configurable:!0})}})});var EH=M((Sqr,Ube)=>{"use strict";var qbe=Tr(),uDt=Tt(),zbe=vt(),cDt=sa(),fDt=r0(),pDt=ia(),dDt=sI().f,Fbe=zbe(dDt),hDt=zbe([].push),mDt=qbe&&uDt(function(){var e=Object.create(null);return e[2]=2,!Fbe(e,2)}),jbe=function(e){return function(t){for(var r=pDt(t),n=fDt(r),o=mDt&&cDt(r)===null,i=n.length,a=0,u=[],p;i>a;)p=n[a++],(!qbe||(o?p in r:Fbe(r,p)))&&hDt(u,e?[p,r[p]]:r[p]);return u}};Ube.exports={entries:jbe(!0),values:jbe(!1)}});var Bbe=M(()=>{"use strict";var gDt=re(),vDt=EH().entries;gDt({target:"Object",stat:!0},{entries:function(t){return vDt(t)}})});var Vbe=M(()=>{"use strict";var yDt=re(),_Dt=Ih(),xDt=Tt(),bDt=Br(),wDt=Gg().onFreeze,SH=Object.freeze,EDt=xDt(function(){SH(1)});yDt({target:"Object",stat:!0,forced:EDt,sham:!_Dt},{freeze:function(t){return SH&&bDt(t)?SH(wDt(t)):t}})});var Gbe=M(()=>{"use strict";var SDt=re(),IDt=_i(),TDt=Ic();SDt({target:"Object",stat:!0},{fromEntries:function(t){var r={};return IDt(t,function(n,o){TDt(r,n,o)},{AS_ENTRIES:!0}),r}})});var $be=M(()=>{"use strict";var MDt=re(),CDt=Tt(),ADt=ia(),Hbe=Ra().f,Wbe=Tr(),DDt=!Wbe||CDt(function(){Hbe(1)});MDt({target:"Object",stat:!0,forced:DDt,sham:!Wbe},{getOwnPropertyDescriptor:function(t,r){return Hbe(ADt(t),r)}})});var Ybe=M(()=>{"use strict";var NDt=re(),ODt=Tr(),LDt=m5(),PDt=ia(),kDt=Ra(),RDt=Ic();NDt({target:"Object",stat:!0,sham:!ODt},{getOwnPropertyDescriptors:function(t){for(var r=PDt(t),n=kDt.f,o=LDt(r),i={},a=0,u,p;o.length>a;)p=n(r,u=o[a++]),p!==void 0&&RDt(i,u,p);return i}})});var Zbe=M(()=>{"use strict";var jDt=re(),qDt=Tt(),zDt=w5().f,FDt=qDt(function(){return!Object.getOwnPropertyNames(1)});jDt({target:"Object",stat:!0,forced:FDt},{getOwnPropertyNames:zDt})});var Xbe=M(()=>{"use strict";var UDt=re(),BDt=Tt(),VDt=pn(),Kbe=sa(),GDt=k5(),HDt=BDt(function(){Kbe(1)});UDt({target:"Object",stat:!0,forced:HDt,sham:!GDt},{getPrototypeOf:function(t){return Kbe(VDt(t))}})});var IH=M(()=>{"use strict";var WDt=re(),$Dt=Fr(),YDt=vt(),ZDt=Rr(),KDt=Go(),XDt=kp(),JDt=_i(),QDt=Tt(),Jbe=Object.groupBy,e4t=$Dt("Object","create"),t4t=YDt([].push),r4t=!Jbe||QDt(function(){return Jbe("ab",function(e){return e}).a.length!==1});WDt({target:"Object",stat:!0,forced:r4t},{groupBy:function(t,r){KDt(t),ZDt(r);var n=e4t(null),o=0;return JDt(t,function(i){var a=XDt(r(i,o++));a in n?t4t(n[a],i):n[a]=[i]}),n}})});var TH=M(()=>{"use strict";var n4t=re(),o4t=sn();n4t({target:"Object",stat:!0},{hasOwn:o4t})});var MH=M((Vqr,Qbe)=>{"use strict";Qbe.exports=Object.is||function(t,r){return t===r?t!==0||1/t===1/r:t!==t&&r!==r}});var ewe=M(()=>{"use strict";var i4t=re(),a4t=MH();i4t({target:"Object",stat:!0},{is:a4t})});var rwe=M(()=>{"use strict";var s4t=re(),twe=mO();s4t({target:"Object",stat:!0,forced:Object.isExtensible!==twe},{isExtensible:twe})});var owe=M(()=>{"use strict";var l4t=re(),u4t=Tt(),c4t=Br(),f4t=as(),nwe=dO(),CH=Object.isFrozen,p4t=nwe||u4t(function(){CH(1)});l4t({target:"Object",stat:!0,forced:p4t},{isFrozen:function(t){return!c4t(t)||nwe&&f4t(t)==="ArrayBuffer"?!0:CH?CH(t):!1}})});var awe=M(()=>{"use strict";var d4t=re(),h4t=Tt(),m4t=Br(),g4t=as(),iwe=dO(),AH=Object.isSealed,v4t=iwe||h4t(function(){AH(1)});d4t({target:"Object",stat:!0,forced:v4t},{isSealed:function(t){return!m4t(t)||iwe&&g4t(t)==="ArrayBuffer"?!0:AH?AH(t):!1}})});var lwe=M(()=>{"use strict";var y4t=re(),_4t=pn(),swe=r0(),x4t=Tt(),b4t=x4t(function(){swe(1)});y4t({target:"Object",stat:!0,forced:b4t},{keys:function(t){return swe(_4t(t))}})});var uwe=M(()=>{"use strict";var w4t=re(),E4t=Tr(),S4t=KI(),I4t=pn(),T4t=kp(),M4t=sa(),C4t=Ra().f;E4t&&w4t({target:"Object",proto:!0,forced:S4t},{__lookupGetter__:function(t){var r=I4t(this),n=T4t(t),o;do if(o=C4t(r,n))return o.get;while(r=M4t(r))}})});var cwe=M(()=>{"use strict";var A4t=re(),D4t=Tr(),N4t=KI(),O4t=pn(),L4t=kp(),P4t=sa(),k4t=Ra().f;D4t&&A4t({target:"Object",proto:!0,forced:N4t},{__lookupSetter__:function(t){var r=O4t(this),n=L4t(t),o;do if(o=k4t(r,n))return o.set;while(r=P4t(r))}})});var fwe=M(()=>{"use strict";var R4t=re(),j4t=Br(),q4t=Gg().onFreeze,z4t=Ih(),F4t=Tt(),DH=Object.preventExtensions,U4t=F4t(function(){DH(1)});R4t({target:"Object",stat:!0,forced:U4t,sham:!z4t},{preventExtensions:function(t){return DH&&j4t(t)?DH(q4t(t)):t}})});var gwe=M(()=>{"use strict";var B4t=Tr(),V4t=ei(),G4t=Br(),H4t=UB(),W4t=pn(),$4t=Go(),pwe=Object.getPrototypeOf,dwe=Object.setPrototypeOf,hwe=Object.prototype,mwe="__proto__";if(B4t&&pwe&&dwe&&!(mwe in hwe))try{V4t(hwe,mwe,{configurable:!0,get:function(){return pwe(W4t(this))},set:function(t){var r=$4t(this);H4t(t)&&G4t(r)&&dwe(r,t)}})}catch(e){}});var vwe=M(()=>{"use strict";var Y4t=re(),Z4t=Br(),K4t=Gg().onFreeze,X4t=Ih(),J4t=Tt(),NH=Object.seal,Q4t=J4t(function(){NH(1)});Y4t({target:"Object",stat:!0,forced:Q4t,sham:!X4t},{seal:function(t){return NH&&Z4t(t)?NH(K4t(t)):t}})});var ywe=M(()=>{"use strict";var eNt=re(),tNt=Sc();eNt({target:"Object",stat:!0},{setPrototypeOf:tNt})});var xwe=M((pzr,_we)=>{"use strict";var rNt=v5(),nNt=ru();_we.exports=rNt?{}.toString:function(){return"[object "+nNt(this)+"]"}});var bwe=M(()=>{"use strict";var oNt=v5(),iNt=fo(),aNt=xwe();oNt||iNt(Object.prototype,"toString",aNt,{unsafe:!0})});var wwe=M(()=>{"use strict";var sNt=re(),lNt=EH().values;sNt({target:"Object",stat:!0},{values:function(t){return lNt(t)}})});var Swe=M(()=>{"use strict";var uNt=re(),Ewe=hH();uNt({global:!0,forced:parseFloat!==Ewe},{parseFloat:Ewe})});var Twe=M(()=>{"use strict";var cNt=re(),Iwe=mH();cNt({global:!0,forced:parseInt!==Iwe},{parseInt:Iwe})});var XI=M((bzr,Mwe)=>{"use strict";var fNt=Pf(),pNt=Mg(),dNt=TypeError;Mwe.exports=function(e){if(fNt(e))return e;throw new dNt(pNt(e)+" is not a constructor")}});var JI=M((wzr,Awe)=>{"use strict";var Cwe=Jt(),hNt=XI(),mNt=oa(),gNt=Nr(),vNt=gNt("species");Awe.exports=function(e,t){var r=Cwe(e).constructor,n;return r===void 0||mNt(n=Cwe(r)[vNt])?t:hNt(n)}});var Wu=M((Ezr,Dwe)=>{"use strict";var yNt=TypeError;Dwe.exports=function(e,t){if(e<t)throw new yNt("Not enough arguments");return e}});var OH=M((Szr,Nwe)=>{"use strict";var _Nt=Af();Nwe.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(_Nt)});var tT=M((Izr,Fwe)=>{"use strict";var $u=$t(),xNt=Bs(),bNt=xo(),Owe=Kr(),wNt=sn(),zwe=Tt(),Lwe=vB(),ENt=nu(),Pwe=cI(),SNt=Wu(),INt=OH(),TNt=c0(),qH=$u.setImmediate,zH=$u.clearImmediate,MNt=$u.process,LH=$u.Dispatch,CNt=$u.Function,kwe=$u.MessageChannel,ANt=$u.String,PH=0,QI={},Rwe="onreadystatechange",eT,m0,kH,RH;zwe(function(){eT=$u.location});var FH=function(e){if(wNt(QI,e)){var t=QI[e];delete QI[e],t()}},jH=function(e){return function(){FH(e)}},jwe=function(e){FH(e.data)},qwe=function(e){$u.postMessage(ANt(e),eT.protocol+"//"+eT.host)};(!qH||!zH)&&(qH=function(t){SNt(arguments.length,1);var r=Owe(t)?t:CNt(t),n=ENt(arguments,1);return QI[++PH]=function(){xNt(r,void 0,n)},m0(PH),PH},zH=function(t){delete QI[t]},TNt?m0=function(e){MNt.nextTick(jH(e))}:LH&&LH.now?m0=function(e){LH.now(jH(e))}:kwe&&!INt?(kH=new kwe,RH=kH.port2,kH.port1.onmessage=jwe,m0=bNt(RH.postMessage,RH)):$u.addEventListener&&Owe($u.postMessage)&&!$u.importScripts&&eT&&eT.protocol!=="file:"&&!zwe(qwe)?(m0=qwe,$u.addEventListener("message",jwe,!1)):Rwe in Pwe("script")?m0=function(e){Lwe.appendChild(Pwe("script"))[Rwe]=function(){Lwe.removeChild(this),FH(e)}}:m0=function(e){setTimeout(jH(e),0)});Fwe.exports={set:qH,clear:zH}});var UH=M((Tzr,Bwe)=>{"use strict";var Uwe=$t(),DNt=Tr(),NNt=Object.getOwnPropertyDescriptor;Bwe.exports=function(e){if(!DNt)return Uwe[e];var t=NNt(Uwe,e);return t&&t.value}});var BH=M((Mzr,Gwe)=>{"use strict";var Vwe=function(){this.head=null,this.tail=null};Vwe.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};Gwe.exports=Vwe});var Wwe=M((Czr,Hwe)=>{"use strict";var ONt=Af();Hwe.exports=/ipad|iphone|ipod/i.test(ONt)&&typeof Pebble!="undefined"});var Ywe=M((Azr,$we)=>{"use strict";var LNt=Af();$we.exports=/web0s(?!.*chrome)/i.test(LNt)});var YH=M((Dzr,eEe)=>{"use strict";var Gx=$t(),PNt=UH(),Zwe=xo(),VH=tT().set,kNt=BH(),RNt=OH(),jNt=Wwe(),qNt=Ywe(),GH=c0(),Kwe=Gx.MutationObserver||Gx.WebKitMutationObserver,Xwe=Gx.document,Jwe=Gx.process,IO=Gx.Promise,$H=PNt("queueMicrotask"),Vx,HH,WH,TO,Qwe;$H||(rT=new kNt,nT=function(){var e,t;for(GH&&(e=Jwe.domain)&&e.exit();t=rT.get();)try{t()}catch(r){throw rT.head&&Vx(),r}e&&e.enter()},!RNt&&!GH&&!qNt&&Kwe&&Xwe?(HH=!0,WH=Xwe.createTextNode(""),new Kwe(nT).observe(WH,{characterData:!0}),Vx=function(){WH.data=HH=!HH}):!jNt&&IO&&IO.resolve?(TO=IO.resolve(void 0),TO.constructor=IO,Qwe=Zwe(TO.then,TO),Vx=function(){Qwe(nT)}):GH?Vx=function(){Jwe.nextTick(nT)}:(VH=Zwe(VH,Gx),Vx=function(){VH(nT)}),$H=function(e){rT.head||Vx(),rT.add(e)});var rT,nT;eEe.exports=$H});var ZH=M((Nzr,tEe)=>{"use strict";tEe.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}}});var Hg=M((Ozr,rEe)=>{"use strict";rEe.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var g0=M((Lzr,nEe)=>{"use strict";var zNt=$t();nEe.exports=zNt.Promise});var Hx=M((Pzr,sEe)=>{"use strict";var FNt=$t(),oT=g0(),UNt=Kr(),BNt=Sx(),VNt=fI(),GNt=Nr(),oEe=LI(),HNt=fn(),KH=Pp(),iEe=oT&&oT.prototype,WNt=GNt("species"),XH=!1,aEe=UNt(FNt.PromiseRejectionEvent),$Nt=BNt("Promise",function(){var e=VNt(oT),t=e!==String(oT);if(!t&&KH===66||HNt&&!(iEe.catch&&iEe.finally))return!0;if(!KH||KH<51||!/native code/.test(e)){var r=new oT(function(i){i(1)}),n=function(i){i(function(){},function(){})},o=r.constructor={};if(o[WNt]=n,XH=r.then(function(){})instanceof n,!XH)return!0}return!t&&(oEe==="BROWSER"||oEe==="DENO")&&!aEe});sEe.exports={CONSTRUCTOR:$Nt,REJECTION_EVENT:aEe,SUBCLASSING:XH}});var Bp=M((kzr,uEe)=>{"use strict";var lEe=Rr(),YNt=TypeError,ZNt=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new YNt("Bad Promise constructor");t=n,r=o}),this.resolve=lEe(t),this.reject=lEe(r)};uEe.exports.f=function(e){return new ZNt(e)}});var CEe=M(()=>{"use strict";var KNt=re(),XNt=fn(),DO=c0(),Wg=$t(),Zx=er(),cEe=fo(),fEe=Sc(),JNt=wl(),QNt=jg(),e5t=Rr(),AO=Kr(),t5t=Br(),r5t=Vs(),n5t=JI(),gEe=tT().set,rW=YH(),o5t=ZH(),i5t=Hg(),a5t=BH(),vEe=ro(),NO=g0(),nW=Hx(),yEe=Bp(),OO="Promise",_Ee=nW.CONSTRUCTOR,s5t=nW.REJECTION_EVENT,l5t=nW.SUBCLASSING,JH=vEe.getterFor(OO),u5t=vEe.set,Wx=NO&&NO.prototype,v0=NO,MO=Wx,xEe=Wg.TypeError,QH=Wg.document,oW=Wg.process,eW=yEe.f,c5t=eW,f5t=!!(QH&&QH.createEvent&&Wg.dispatchEvent),bEe="unhandledrejection",p5t="rejectionhandled",pEe=0,wEe=1,d5t=2,iW=1,EEe=2,CO,dEe,h5t,hEe,SEe=function(e){var t;return t5t(e)&&AO(t=e.then)?t:!1},IEe=function(e,t){var r=t.value,n=t.state===wEe,o=n?e.ok:e.fail,i=e.resolve,a=e.reject,u=e.domain,p,h,g;try{o?(n||(t.rejection===EEe&&g5t(t),t.rejection=iW),o===!0?p=r:(u&&u.enter(),p=o(r),u&&(u.exit(),g=!0)),p===e.promise?a(new xEe("Promise-chain cycle")):(h=SEe(p))?Zx(h,p,i,a):i(p)):a(r)}catch(x){u&&!g&&u.exit(),a(x)}},TEe=function(e,t){e.notified||(e.notified=!0,rW(function(){for(var r=e.reactions,n;n=r.get();)IEe(n,e);e.notified=!1,t&&!e.rejection&&m5t(e)}))},MEe=function(e,t,r){var n,o;f5t?(n=QH.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),Wg.dispatchEvent(n)):n={promise:t,reason:r},!s5t&&(o=Wg["on"+e])?o(n):e===bEe&&o5t("Unhandled promise rejection",r)},m5t=function(e){Zx(gEe,Wg,function(){var t=e.facade,r=e.value,n=mEe(e),o;if(n&&(o=i5t(function(){DO?oW.emit("unhandledRejection",r,t):MEe(bEe,t,r)}),e.rejection=DO||mEe(e)?EEe:iW,o.error))throw o.value})},mEe=function(e){return e.rejection!==iW&&!e.parent},g5t=function(e){Zx(gEe,Wg,function(){var t=e.facade;DO?oW.emit("rejectionHandled",t):MEe(p5t,t,e.value)})},$x=function(e,t,r){return function(n){e(t,n,r)}},Yx=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=d5t,TEe(e,!0))},tW=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new xEe("Promise can't be resolved itself");var n=SEe(t);n?rW(function(){var o={done:!1};try{Zx(n,t,$x(tW,o,e),$x(Yx,o,e))}catch(i){Yx(o,i,e)}}):(e.value=t,e.state=wEe,TEe(e,!1))}catch(o){Yx({done:!1},o,e)}}};if(_Ee&&(v0=function(t){r5t(this,MO),e5t(t),Zx(CO,this);var r=JH(this);try{t($x(tW,r),$x(Yx,r))}catch(n){Yx(r,n)}},MO=v0.prototype,CO=function(t){u5t(this,{type:OO,done:!1,notified:!1,parent:!1,reactions:new a5t,rejection:!1,state:pEe,value:null})},CO.prototype=cEe(MO,"then",function(t,r){var n=JH(this),o=eW(n5t(this,v0));return n.parent=!0,o.ok=AO(t)?t:!0,o.fail=AO(r)&&r,o.domain=DO?oW.domain:void 0,n.state===pEe?n.reactions.add(o):rW(function(){IEe(o,n)}),o.promise}),dEe=function(){var e=new CO,t=JH(e);this.promise=e,this.resolve=$x(tW,t),this.reject=$x(Yx,t)},yEe.f=eW=function(e){return e===v0||e===h5t?new dEe(e):c5t(e)},!XNt&&AO(NO)&&Wx!==Object.prototype)){hEe=Wx.then,l5t||cEe(Wx,"then",function(t,r){var n=this;return new v0(function(o,i){Zx(hEe,n,o,i)}).then(t,r)},{unsafe:!0});try{delete Wx.constructor}catch(e){}fEe&&fEe(Wx,MO)}KNt({global:!0,constructor:!0,wrap:!0,forced:_Ee},{Promise:v0});JNt(v0,OO,!1,!0);QNt(OO)});var iT=M((qzr,AEe)=>{"use strict";var v5t=g0(),y5t=MI(),_5t=Hx().CONSTRUCTOR;AEe.exports=_5t||!y5t(function(e){v5t.all(e).then(void 0,function(){})})});var DEe=M(()=>{"use strict";var x5t=re(),b5t=er(),w5t=Rr(),E5t=Bp(),S5t=Hg(),I5t=_i(),T5t=iT();x5t({target:"Promise",stat:!0,forced:T5t},{all:function(t){var r=this,n=E5t.f(r),o=n.resolve,i=n.reject,a=S5t(function(){var u=w5t(r.resolve),p=[],h=0,g=1;I5t(t,function(x){var b=h++,T=!1;g++,b5t(u,r,x).then(function(A){T||(T=!0,p[b]=A,--g||o(p))},i)}),--g||o(p)});return a.error&&i(a.value),n.promise}})});var OEe=M(()=>{"use strict";var M5t=re(),C5t=fn(),A5t=Hx().CONSTRUCTOR,sW=g0(),D5t=Fr(),N5t=Kr(),O5t=fo(),NEe=sW&&sW.prototype;M5t({target:"Promise",proto:!0,forced:A5t,real:!0},{catch:function(e){return this.then(void 0,e)}});!C5t&&N5t(sW)&&(aW=D5t("Promise").prototype.catch,NEe.catch!==aW&&O5t(NEe,"catch",aW,{unsafe:!0}));var aW});var LEe=M(()=>{"use strict";var L5t=re(),P5t=er(),k5t=Rr(),R5t=Bp(),j5t=Hg(),q5t=_i(),z5t=iT();L5t({target:"Promise",stat:!0,forced:z5t},{race:function(t){var r=this,n=R5t.f(r),o=n.reject,i=j5t(function(){var a=k5t(r.resolve);q5t(t,function(u){P5t(a,r,u).then(n.resolve,o)})});return i.error&&o(i.value),n.promise}})});var PEe=M(()=>{"use strict";var F5t=re(),U5t=Bp(),B5t=Hx().CONSTRUCTOR;F5t({target:"Promise",stat:!0,forced:B5t},{reject:function(t){var r=U5t.f(this),n=r.reject;return n(t),r.promise}})});var lW=M(($zr,kEe)=>{"use strict";var V5t=Jt(),G5t=Br(),H5t=Bp();kEe.exports=function(e,t){if(V5t(e),G5t(t)&&t.constructor===e)return t;var r=H5t.f(e),n=r.resolve;return n(t),r.promise}});var qEe=M(()=>{"use strict";var W5t=re(),$5t=Fr(),REe=fn(),Y5t=g0(),jEe=Hx().CONSTRUCTOR,Z5t=lW(),K5t=$5t("Promise"),X5t=REe&&!jEe;W5t({target:"Promise",stat:!0,forced:REe||jEe},{resolve:function(t){return Z5t(X5t&&this===K5t?Y5t:this,t)}})});var zEe=M(()=>{"use strict";CEe();DEe();OEe();LEe();PEe();qEe()});var uW=M(()=>{"use strict";var J5t=re(),Q5t=er(),eOt=Rr(),tOt=Bp(),rOt=Hg(),nOt=_i(),oOt=iT();J5t({target:"Promise",stat:!0,forced:oOt},{allSettled:function(t){var r=this,n=tOt.f(r),o=n.resolve,i=n.reject,a=rOt(function(){var u=eOt(r.resolve),p=[],h=0,g=1;nOt(t,function(x){var b=h++,T=!1;g++,Q5t(u,r,x).then(function(A){T||(T=!0,p[b]={status:"fulfilled",value:A},--g||o(p))},function(A){T||(T=!0,p[b]={status:"rejected",reason:A},--g||o(p))})}),--g||o(p)});return a.error&&i(a.value),n.promise}})});var cW=M(()=>{"use strict";var iOt=re(),aOt=er(),sOt=Rr(),lOt=Fr(),uOt=Bp(),cOt=Hg(),fOt=_i(),pOt=iT(),FEe="No one promise resolved";iOt({target:"Promise",stat:!0,forced:pOt},{any:function(t){var r=this,n=lOt("AggregateError"),o=uOt.f(r),i=o.resolve,a=o.reject,u=cOt(function(){var p=sOt(r.resolve),h=[],g=0,x=1,b=!1;fOt(t,function(T){var A=g++,L=!1;x++,aOt(p,r,T).then(function(P){L||b||(b=!0,i(P))},function(P){L||b||(L=!0,h[A]=P,--x||a(new n(h,FEe)))})}),--x||a(new n(h,FEe))});return u.error&&a(u.value),o.promise}})});var GEe=M(()=>{"use strict";var dOt=re(),hOt=fn(),LO=g0(),mOt=Tt(),BEe=Fr(),VEe=Kr(),gOt=JI(),UEe=lW(),vOt=fo(),pW=LO&&LO.prototype,yOt=!!LO&&mOt(function(){pW.finally.call({then:function(){}},function(){})});dOt({target:"Promise",proto:!0,real:!0,forced:yOt},{finally:function(e){var t=gOt(this,BEe("Promise")),r=VEe(e);return this.then(r?function(n){return UEe(t,e()).then(function(){return n})}:e,r?function(n){return UEe(t,e()).then(function(){throw n})}:e)}});!hOt&&VEe(LO)&&(fW=BEe("Promise").prototype.finally,pW.finally!==fW&&vOt(pW,"finally",fW,{unsafe:!0}));var fW});var hW=M(()=>{"use strict";var _Ot=re(),xOt=$t(),bOt=Bs(),wOt=nu(),EOt=Bp(),SOt=Rr(),WEe=Hg(),dW=xOt.Promise,HEe=!1,IOt=!dW||!dW.try||WEe(function(){dW.try(function(e){HEe=e===8},8)}).error||!HEe;_Ot({target:"Promise",stat:!0,forced:IOt},{try:function(e){var t=arguments.length>1?wOt(arguments,1):[],r=EOt.f(this),n=WEe(function(){return bOt(SOt(e),void 0,t)});return(n.error?r.reject:r.resolve)(n.value),r.promise}})});var mW=M(()=>{"use strict";var TOt=re(),MOt=Bp();TOt({target:"Promise",stat:!0},{withResolvers:function(){var t=MOt.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var $Ee=M(()=>{"use strict";var COt=re(),AOt=Bs(),DOt=Rr(),NOt=Jt(),OOt=Tt(),LOt=!OOt(function(){Reflect.apply(function(){})});COt({target:"Reflect",stat:!0,forced:LOt},{apply:function(t,r,n){return AOt(DOt(t),r,NOt(n))}})});var eSe=M(()=>{"use strict";var POt=re(),kOt=Fr(),gW=Bs(),ROt=wG(),YEe=XI(),jOt=Jt(),ZEe=Br(),qOt=ki(),XEe=Tt(),vW=kOt("Reflect","construct"),zOt=Object.prototype,FOt=[].push,JEe=XEe(function(){function e(){}return!(vW(function(){},[],e)instanceof e)}),QEe=!XEe(function(){vW(function(){})}),KEe=JEe||QEe;POt({target:"Reflect",stat:!0,forced:KEe,sham:KEe},{construct:function(t,r){YEe(t),jOt(r);var n=arguments.length<3?t:YEe(arguments[2]);if(QEe&&!JEe)return vW(t,r,n);if(t===n){switch(r.length){case 0:return new t;case 1:return new t(r[0]);case 2:return new t(r[0],r[1]);case 3:return new t(r[0],r[1],r[2]);case 4:return new t(r[0],r[1],r[2],r[3]);}var o=[null];return gW(FOt,o,r),new(gW(ROt,t,o))}var i=n.prototype,a=qOt(ZEe(i)?i:zOt),u=gW(t,a,r);return ZEe(u)?u:a}})});var nSe=M(()=>{"use strict";var UOt=re(),BOt=Tr(),tSe=Jt(),VOt=kp(),rSe=ko(),GOt=Tt(),HOt=GOt(function(){Reflect.defineProperty(rSe.f({},1,{value:1}),1,{value:2})});UOt({target:"Reflect",stat:!0,forced:HOt,sham:!BOt},{defineProperty:function(t,r,n){tSe(t);var o=VOt(r);tSe(n);try{return rSe.f(t,o,n),!0}catch(i){return!1}}})});var oSe=M(()=>{"use strict";var WOt=re(),$Ot=Jt(),YOt=Ra().f;WOt({target:"Reflect",stat:!0},{deleteProperty:function(t,r){var n=YOt($Ot(t),r);return n&&!n.configurable?!1:delete t[r]}})});var yW=M((g8r,aSe)=>{"use strict";var iSe=sn();aSe.exports=function(e){return e!==void 0&&(iSe(e,"value")||iSe(e,"writable"))}});var lSe=M(()=>{"use strict";var ZOt=re(),KOt=er(),XOt=Br(),JOt=Jt(),QOt=yW(),eLt=Ra(),tLt=sa();function sSe(e,t){var r=arguments.length<3?e:arguments[2],n,o;if(JOt(e)===r)return e[t];if(n=eLt.f(e,t),n)return QOt(n)?n.value:n.get===void 0?void 0:KOt(n.get,r);if(XOt(o=tLt(e)))return sSe(o,t,r)}ZOt({target:"Reflect",stat:!0},{get:sSe})});var uSe=M(()=>{"use strict";var rLt=re(),nLt=Tr(),oLt=Jt(),iLt=Ra();rLt({target:"Reflect",stat:!0,sham:!nLt},{getOwnPropertyDescriptor:function(t,r){return iLt.f(oLt(t),r)}})});var cSe=M(()=>{"use strict";var aLt=re(),sLt=Jt(),lLt=sa(),uLt=k5();aLt({target:"Reflect",stat:!0,sham:!uLt},{getPrototypeOf:function(t){return lLt(sLt(t))}})});var fSe=M(()=>{"use strict";var cLt=re();cLt({target:"Reflect",stat:!0},{has:function(t,r){return r in t}})});var pSe=M(()=>{"use strict";var fLt=re(),pLt=Jt(),dLt=mO();fLt({target:"Reflect",stat:!0},{isExtensible:function(t){return pLt(t),dLt(t)}})});var dSe=M(()=>{"use strict";var hLt=re(),mLt=m5();hLt({target:"Reflect",stat:!0},{ownKeys:mLt})});var hSe=M(()=>{"use strict";var gLt=re(),vLt=Fr(),yLt=Jt(),_Lt=Ih();gLt({target:"Reflect",stat:!0,sham:!_Lt},{preventExtensions:function(t){yLt(t);try{var r=vLt("Object","preventExtensions");return r&&r(t),!0}catch(n){return!1}}})});var _Se=M(()=>{"use strict";var xLt=re(),bLt=er(),wLt=Jt(),mSe=Br(),ELt=yW(),SLt=Tt(),_W=ko(),gSe=Ra(),ILt=sa(),vSe=eu();function ySe(e,t,r){var n=arguments.length<4?e:arguments[3],o=gSe.f(wLt(e),t),i,a,u;if(!o){if(mSe(a=ILt(e)))return ySe(a,t,r,n);o=vSe(0)}if(ELt(o)){if(o.writable===!1||!mSe(n))return!1;if(i=gSe.f(n,t)){if(i.get||i.set||i.writable===!1)return!1;i.value=r,_W.f(n,t,i)}else _W.f(n,t,vSe(0,r))}else{if(u=o.set,u===void 0)return!1;bLt(u,n,r)}return!0}var TLt=SLt(function(){var e=function(){},t=_W.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});xLt({target:"Reflect",stat:!0,forced:TLt},{set:ySe})});var bSe=M(()=>{"use strict";var MLt=re(),CLt=Jt(),ALt=BB(),xSe=Sc();xSe&&MLt({target:"Reflect",stat:!0},{setPrototypeOf:function(t,r){CLt(t),ALt(r);try{return xSe(t,r),!0}catch(n){return!1}}})});var wSe=M(()=>{"use strict";var DLt=re(),NLt=$t(),OLt=wl();DLt({global:!0},{Reflect:{}});OLt(NLt.Reflect,"Reflect",!0)});var aT=M((j8r,ESe)=>{"use strict";var LLt=Br(),PLt=as(),kLt=Nr(),RLt=kLt("match");ESe.exports=function(e){var t;return LLt(e)&&((t=e[RLt])!==void 0?!!t:PLt(e)==="RegExp")}});var PO=M((q8r,SSe)=>{"use strict";var jLt=Jt();SSe.exports=function(){var e=jLt(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var Kx=M((z8r,TSe)=>{"use strict";var qLt=er(),zLt=sn(),FLt=ss(),ULt=PO(),ISe=RegExp.prototype;TSe.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in ISe)&&!zLt(e,"flags")&&FLt(ISe,e)?qLt(ULt,e):t}});var sT=M((F8r,MSe)=>{"use strict";var xW=Tt(),BLt=$t(),bW=BLt.RegExp,wW=xW(function(){var e=bW("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),VLt=wW||xW(function(){return!bW("a","y").sticky}),GLt=wW||xW(function(){var e=bW("^r","gy");return e.lastIndex=2,e.exec("str")!==null});MSe.exports={BROKEN_CARET:GLt,MISSED_STICKY:VLt,UNSUPPORTED_Y:wW}});var kO=M((U8r,CSe)=>{"use strict";var HLt=Tt(),WLt=$t(),$Lt=WLt.RegExp;CSe.exports=HLt(function(){var e=$Lt(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var EW=M((B8r,ASe)=>{"use strict";var YLt=Tt(),ZLt=$t(),KLt=ZLt.RegExp;ASe.exports=YLt(function(){var e=KLt("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var zSe=M(()=>{"use strict";var XLt=Tr(),MW=$t(),lT=vt(),JLt=Sx(),QLt=Og(),e3t=aa(),t3t=ki(),r3t=Ag().f,DSe=ss(),n3t=aT(),NSe=Hr(),o3t=Kx(),kSe=sT(),i3t=VB(),a3t=fo(),s3t=Tt(),l3t=sn(),u3t=ro().enforce,c3t=jg(),f3t=Nr(),RSe=kO(),jSe=EW(),p3t=f3t("match"),Yg=MW.RegExp,Xx=Yg.prototype,d3t=MW.SyntaxError,h3t=lT(Xx.exec),RO=lT("".charAt),OSe=lT("".replace),LSe=lT("".indexOf),PSe=lT("".slice),m3t=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,y0=/a/g,SW=/a/g,g3t=new Yg(y0)!==y0,qSe=kSe.MISSED_STICKY,v3t=kSe.UNSUPPORTED_Y,y3t=XLt&&(!g3t||qSe||RSe||jSe||s3t(function(){return SW[p3t]=!1,Yg(y0)!==y0||Yg(SW)===SW||String(Yg(y0,"i"))!=="/a/i"})),_3t=function(e){for(var t=e.length,r=0,n="",o=!1,i;r<=t;r++){if(i=RO(e,r),i==="\\"){n+=i+RO(e,++r);continue}!o&&i==="."?n+="[\\s\\S]":(i==="["?o=!0:i==="]"&&(o=!1),n+=i)}return n},x3t=function(e){for(var t=e.length,r=0,n="",o=[],i=t3t(null),a=!1,u=!1,p=0,h="",g;r<=t;r++){if(g=RO(e,r),g==="\\")g+=RO(e,++r);else if(g==="]")a=!1;else if(!a)switch(!0){case g==="[":a=!0;break;case g==="(":if(n+=g,PSe(e,r+1,r+3)==="?:")continue;h3t(m3t,PSe(e,r+1))&&(r+=2,u=!0),p++;continue;case g===">"&&u:if(h===""||l3t(i,h))throw new d3t("Invalid capture group name");i[h]=!0,o[o.length]=[h,p],u=!1,h="";continue;}u?h+=g:n+=g}return[n,o]};if(JLt("RegExp",y3t)){for($g=function(t,r){var n=DSe(Xx,this),o=n3t(t),i=r===void 0,a=[],u=t,p,h,g,x,b,T;if(!n&&o&&i&&t.constructor===$g)return t;if((o||DSe(Xx,t))&&(t=t.source,i&&(r=o3t(u))),t=t===void 0?"":NSe(t),r=r===void 0?"":NSe(r),u=t,RSe&&("dotAll"in y0)&&(h=!!r&&LSe(r,"s")>-1,h&&(r=OSe(r,/s/g,""))),p=r,qSe&&("sticky"in y0)&&(g=!!r&&LSe(r,"y")>-1,g&&v3t&&(r=OSe(r,/y/g,""))),jSe&&(x=x3t(t),t=x[0],a=x[1]),b=QLt(Yg(t,r),n?this:Xx,$g),(h||g||a.length)&&(T=u3t(b),h&&(T.dotAll=!0,T.raw=$g(_3t(t),p)),g&&(T.sticky=!0),a.length&&(T.groups=a)),t!==u)try{e3t(b,"source",u===""?"(?:)":u)}catch(A){}return b},IW=r3t(Yg),TW=0;IW.length>TW;)i3t($g,Yg,IW[TW++]);Xx.constructor=$g,$g.prototype=Xx,a3t(MW,"RegExp",$g,{constructor:!0})}var $g,IW,TW;c3t("RegExp")});var USe=M(()=>{"use strict";var b3t=Tr(),w3t=kO(),E3t=as(),S3t=ei(),I3t=ro().get,FSe=RegExp.prototype,T3t=TypeError;b3t&&w3t&&S3t(FSe,"dotAll",{configurable:!0,get:function(){if(this!==FSe){if(E3t(this)==="RegExp")return!!I3t(this).dotAll;throw new T3t("Incompatible receiver, RegExp required")}}})});var zO=M(($8r,VSe)=>{"use strict";var Jx=er(),qO=vt(),M3t=Hr(),C3t=PO(),A3t=sT(),D3t=hh(),N3t=ki(),O3t=ro().get,L3t=kO(),P3t=EW(),k3t=D3t("native-string-replace",String.prototype.replace),jO=RegExp.prototype.exec,AW=jO,R3t=qO("".charAt),j3t=qO("".indexOf),q3t=qO("".replace),CW=qO("".slice),DW=function(){var e=/a/,t=/b*/g;return Jx(jO,e,"a"),Jx(jO,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),BSe=A3t.BROKEN_CARET,NW=/()??/.exec("")[1]!==void 0,z3t=DW||NW||BSe||L3t||P3t;z3t&&(AW=function(t){var r=this,n=O3t(r),o=M3t(t),i=n.raw,a,u,p,h,g,x,b;if(i)return i.lastIndex=r.lastIndex,a=Jx(AW,i,o),r.lastIndex=i.lastIndex,a;var T=n.groups,A=BSe&&r.sticky,L=Jx(C3t,r),P=r.source,k=0,q=o;if(A&&(L=q3t(L,"y",""),j3t(L,"g")===-1&&(L+="g"),q=CW(o,r.lastIndex),r.lastIndex>0&&(!r.multiline||r.multiline&&R3t(o,r.lastIndex-1)!==`
`)&&(P="(?: "+P+")",q=" "+q,k++),u=new RegExp("^(?:"+P+")",L)),NW&&(u=new RegExp("^"+P+"$(?!\\s)",L)),DW&&(p=r.lastIndex),h=Jx(jO,A?u:r,q),A?h?(h.input=CW(h.input,k),h[0]=CW(h[0],k),h.index=r.lastIndex,r.lastIndex+=h[0].length):r.lastIndex=0:DW&&h&&(r.lastIndex=r.global?h.index+h[0].length:p),NW&&h&&h.length>1&&Jx(k3t,h[0],u,function(){for(g=1;g<arguments.length-2;g++)arguments[g]===void 0&&(h[g]=void 0)}),h&&T)for(h.groups=x=N3t(null),g=0;g<T.length;g++)b=T[g],x[b[0]]=h[b[1]];return h});VSe.exports=AW});var FO=M(()=>{"use strict";var F3t=re(),GSe=zO();F3t({target:"RegExp",proto:!0,forced:/./.exec!==GSe},{exec:GSe})});var $Se=M(()=>{"use strict";var U3t=$t(),B3t=Tr(),V3t=ei(),G3t=PO(),H3t=Tt(),HSe=U3t.RegExp,WSe=HSe.prototype,W3t=B3t&&H3t(function(){var e=!0;try{HSe(".","d")}catch(p){e=!1}var t={},r="",n=e?"dgimsy":"gimsy",o=function(p,h){Object.defineProperty(t,p,{get:function(){return r+=h,!0}})},i={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(i.hasIndices="d");for(var a in i)o(a,i[a]);var u=Object.getOwnPropertyDescriptor(WSe,"flags").get.call(t);return u!==n||r!==n});W3t&&V3t(WSe,"flags",{configurable:!0,get:G3t})});var ZSe=M(()=>{"use strict";var $3t=Tr(),Y3t=sT().MISSED_STICKY,Z3t=as(),K3t=ei(),X3t=ro().get,YSe=RegExp.prototype,J3t=TypeError;$3t&&Y3t&&K3t(YSe,"sticky",{configurable:!0,get:function(){if(this!==YSe){if(Z3t(this)==="RegExp")return!!X3t(this).sticky;throw new J3t("Incompatible receiver, RegExp required")}}})});var JSe=M(()=>{"use strict";FO();var Q3t=re(),KSe=er(),ePt=Kr(),XSe=Jt(),tPt=Hr(),rPt=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),nPt=/./.test;Q3t({target:"RegExp",proto:!0,forced:!rPt},{test:function(e){var t=XSe(this),r=tPt(e),n=t.exec;if(!ePt(n))return KSe(nPt,t,r);var o=KSe(n,t,r);return o===null?!1:(XSe(o),!0)}})});var r2e=M(()=>{"use strict";var oPt=Qy().PROPER,iPt=fo(),aPt=Jt(),QSe=Hr(),sPt=Tt(),lPt=Kx(),OW="toString",e2e=RegExp.prototype,t2e=e2e[OW],uPt=sPt(function(){return t2e.call({source:"a",flags:"b"})!=="/a/b"}),cPt=oPt&&t2e.name!==OW;(uPt||cPt)&&iPt(e2e,OW,function(){var t=aPt(this),r=QSe(t.source),n=QSe(lPt(t));return"/"+r+"/"+n},{unsafe:!0})});var n2e=M(()=>{"use strict";var fPt=UI(),pPt=tH();fPt("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},pPt)});var o2e=M(()=>{"use strict";n2e()});var za=M((lFr,i2e)=>{"use strict";var LW=vt(),UO=Set.prototype;i2e.exports={Set,add:LW(UO.add),has:LW(UO.has),remove:LW(UO.delete),proto:UO}});var ls=M((uFr,a2e)=>{"use strict";var dPt=za().has;a2e.exports=function(e){return dPt(e),e}});var Mh=M((cFr,s2e)=>{"use strict";var hPt=er();s2e.exports=function(e,t,r){for(var n=r?e:e.iterator,o=e.next,i,a;!(i=hPt(o,n)).done;)if(a=t(i.value),a!==void 0)return a}});var au=M((fFr,p2e)=>{"use strict";var l2e=vt(),mPt=Mh(),u2e=za(),gPt=u2e.Set,c2e=u2e.proto,vPt=l2e(c2e.forEach),f2e=l2e(c2e.keys),yPt=f2e(new gPt).next;p2e.exports=function(e,t,r){return r?mPt({iterator:f2e(e),next:yPt},t):vPt(e,t)}});var BO=M((pFr,h2e)=>{"use strict";var d2e=za(),_Pt=au(),xPt=d2e.Set,bPt=d2e.add;h2e.exports=function(e){var t=new xPt;return _Pt(e,function(r){bPt(t,r)}),t}});var Qx=M((dFr,m2e)=>{"use strict";var wPt=SI(),EPt=za();m2e.exports=wPt(EPt.proto,"size","get")||function(e){return e.size}});var Zg=M((hFr,b2e)=>{"use strict";var g2e=Rr(),_2e=Jt(),v2e=er(),SPt=Qo(),IPt=ui(),y2e="Invalid size",TPt=RangeError,MPt=TypeError,CPt=Math.max,x2e=function(e,t){this.set=e,this.size=CPt(t,0),this.has=g2e(e.has),this.keys=g2e(e.keys)};x2e.prototype={getIterator:function(){return IPt(_2e(v2e(this.keys,this.set)))},includes:function(e){return v2e(this.has,this.set,e)}};b2e.exports=function(e){_2e(e);var t=+e.size;if(t!==t)throw new MPt(y2e);var r=SPt(t);if(r<0)throw new TPt(y2e);return new x2e(e,r)}});var PW=M((mFr,S2e)=>{"use strict";var APt=ls(),E2e=za(),DPt=BO(),NPt=Qx(),OPt=Zg(),LPt=au(),PPt=Mh(),kPt=E2e.has,w2e=E2e.remove;S2e.exports=function(t){var r=APt(this),n=OPt(t),o=DPt(r);return NPt(r)<=n.size?LPt(r,function(i){n.includes(i)&&w2e(o,i)}):PPt(n.getIterator(),function(i){kPt(r,i)&&w2e(o,i)}),o}});var Kg=M((gFr,T2e)=>{"use strict";var RPt=Fr(),I2e=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};T2e.exports=function(e){var t=RPt("Set");try{new t()[e](I2e(0));try{return new t()[e](I2e(-1)),!1}catch(r){return!0}}catch(r){return!1}}});var kW=M(()=>{"use strict";var jPt=re(),qPt=PW(),zPt=Kg();jPt({target:"Set",proto:!0,real:!0,forced:!zPt("difference")},{difference:qPt})});var jW=M((_Fr,C2e)=>{"use strict";var FPt=ls(),RW=za(),UPt=Qx(),BPt=Zg(),VPt=au(),GPt=Mh(),HPt=RW.Set,M2e=RW.add,WPt=RW.has;C2e.exports=function(t){var r=FPt(this),n=BPt(t),o=new HPt;return UPt(r)>n.size?GPt(n.getIterator(),function(i){WPt(r,i)&&M2e(o,i)}):VPt(r,function(i){n.includes(i)&&M2e(o,i)}),o}});var qW=M(()=>{"use strict";var $Pt=re(),YPt=Tt(),ZPt=jW(),KPt=Kg(),XPt=!KPt("intersection")||YPt(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});$Pt({target:"Set",proto:!0,real:!0,forced:XPt},{intersection:ZPt})});var zW=M((wFr,A2e)=>{"use strict";var JPt=ls(),QPt=za().has,ekt=Qx(),tkt=Zg(),rkt=au(),nkt=Mh(),okt=yh();A2e.exports=function(t){var r=JPt(this),n=tkt(t);if(ekt(r)<=n.size)return rkt(r,function(i){if(n.includes(i))return!1},!0)!==!1;var o=n.getIterator();return nkt(o,function(i){if(QPt(r,i))return okt(o,"normal",!1)})!==!1}});var FW=M(()=>{"use strict";var ikt=re(),akt=zW(),skt=Kg();ikt({target:"Set",proto:!0,real:!0,forced:!skt("isDisjointFrom")},{isDisjointFrom:akt})});var UW=M((IFr,D2e)=>{"use strict";var lkt=ls(),ukt=Qx(),ckt=au(),fkt=Zg();D2e.exports=function(t){var r=lkt(this),n=fkt(t);return ukt(r)>n.size?!1:ckt(r,function(o){if(!n.includes(o))return!1},!0)!==!1}});var BW=M(()=>{"use strict";var pkt=re(),dkt=UW(),hkt=Kg();pkt({target:"Set",proto:!0,real:!0,forced:!hkt("isSubsetOf")},{isSubsetOf:dkt})});var VW=M((CFr,N2e)=>{"use strict";var mkt=ls(),gkt=za().has,vkt=Qx(),ykt=Zg(),_kt=Mh(),xkt=yh();N2e.exports=function(t){var r=mkt(this),n=ykt(t);if(vkt(r)<n.size)return!1;var o=n.getIterator();return _kt(o,function(i){if(!gkt(r,i))return xkt(o,"normal",!1)})!==!1}});var GW=M(()=>{"use strict";var bkt=re(),wkt=VW(),Ekt=Kg();bkt({target:"Set",proto:!0,real:!0,forced:!Ekt("isSupersetOf")},{isSupersetOf:wkt})});var WW=M((NFr,O2e)=>{"use strict";var Skt=ls(),HW=za(),Ikt=BO(),Tkt=Zg(),Mkt=Mh(),Ckt=HW.add,Akt=HW.has,Dkt=HW.remove;O2e.exports=function(t){var r=Skt(this),n=Tkt(t).getIterator(),o=Ikt(r);return Mkt(n,function(i){Akt(r,i)?Dkt(o,i):Ckt(o,i)}),o}});var $W=M(()=>{"use strict";var Nkt=re(),Okt=WW(),Lkt=Kg();Nkt({target:"Set",proto:!0,real:!0,forced:!Lkt("symmetricDifference")},{symmetricDifference:Okt})});var YW=M((PFr,L2e)=>{"use strict";var Pkt=ls(),kkt=za().add,Rkt=BO(),jkt=Zg(),qkt=Mh();L2e.exports=function(t){var r=Pkt(this),n=jkt(t).getIterator(),o=Rkt(r);return qkt(n,function(i){kkt(o,i)}),o}});var ZW=M(()=>{"use strict";var zkt=re(),Fkt=YW(),Ukt=Kg();zkt({target:"Set",proto:!0,real:!0,forced:!Ukt("union")},{union:Fkt})});var P2e=M(()=>{"use strict";var Bkt=re(),Vkt=vt(),Gkt=Go(),Hkt=Qo(),Wkt=Hr(),$kt=Tt(),Ykt=Vkt("".charAt),Zkt=$kt(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Bkt({target:"String",proto:!0,forced:Zkt},{at:function(t){var r=Wkt(Gkt(this)),n=r.length,o=Hkt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:Ykt(r,i)}})});var _0=M((zFr,j2e)=>{"use strict";var KW=vt(),Kkt=Qo(),Xkt=Hr(),Jkt=Go(),Qkt=KW("".charAt),k2e=KW("".charCodeAt),eRt=KW("".slice),R2e=function(e){return function(t,r){var n=Xkt(Jkt(t)),o=Kkt(r),i=n.length,a,u;return o<0||o>=i?e?"":void 0:(a=k2e(n,o),a<55296||a>56319||o+1===i||(u=k2e(n,o+1))<56320||u>57343?e?Qkt(n,o):a:e?eRt(n,o,o+2):(a-55296<<10)+(u-56320)+65536)}};j2e.exports={codeAt:R2e(!1),charAt:R2e(!0)}});var q2e=M(()=>{"use strict";var tRt=re(),rRt=_0().codeAt;tRt({target:"String",proto:!0},{codePointAt:function(t){return rRt(this,t)}})});var VO=M((BFr,z2e)=>{"use strict";var nRt=aT(),oRt=TypeError;z2e.exports=function(e){if(nRt(e))throw new oRt("The method doesn't accept regular expressions");return e}});var GO=M((VFr,F2e)=>{"use strict";var iRt=Nr(),aRt=iRt("match");F2e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(r){try{return t[aRt]=!1,"/./"[e](t)}catch(n){}}return!1}});var V2e=M(()=>{"use strict";var sRt=re(),lRt=mh(),uRt=Ra().f,cRt=tu(),U2e=Hr(),fRt=VO(),pRt=Go(),dRt=GO(),hRt=fn(),mRt=lRt("".slice),gRt=Math.min,B2e=dRt("endsWith"),vRt=!hRt&&!B2e&&!!function(){var e=uRt(String.prototype,"endsWith");return e&&!e.writable}();sRt({target:"String",proto:!0,forced:!vRt&&!B2e},{endsWith:function(t){var r=U2e(pRt(this));fRt(t);var n=arguments.length>1?arguments[1]:void 0,o=r.length,i=n===void 0?o:gRt(cRt(n),o),a=U2e(t);return mRt(r,i-a.length,i)===a}})});var XW=M(()=>{"use strict";var yRt=re(),_Rt=vt(),xRt=Of(),bRt=RangeError,G2e=String.fromCharCode,H2e=String.fromCodePoint,wRt=_Rt([].join),ERt=!!H2e&&H2e.length!==1;yRt({target:"String",stat:!0,arity:1,forced:ERt},{fromCodePoint:function(t){for(var r=[],n=arguments.length,o=0,i;n>o;){if(i=+arguments[o++],xRt(i,1114111)!==i)throw new bRt(i+" is not a valid code point");r[o]=i<65536?G2e(i):G2e(((i-=65536)>>10)+55296,i%1024+56320)}return wRt(r,"")}})});var $2e=M(()=>{"use strict";var SRt=re(),IRt=vt(),TRt=VO(),MRt=Go(),W2e=Hr(),CRt=GO(),ARt=IRt("".indexOf);SRt({target:"String",proto:!0,forced:!CRt("includes")},{includes:function(t){return!!~ARt(W2e(MRt(this)),W2e(TRt(t)),arguments.length>1?arguments[1]:void 0)}})});var JW=M(()=>{"use strict";var DRt=re(),NRt=vt(),ORt=Go(),LRt=Hr(),Y2e=NRt("".charCodeAt);DRt({target:"String",proto:!0},{isWellFormed:function(){for(var t=LRt(ORt(this)),r=t.length,n=0;n<r;n++){var o=Y2e(t,n);if((o&63488)===55296&&(o>=56320||++n>=r||(Y2e(t,n)&64512)!==56320))return!1}return!0}})});var QW=M(()=>{"use strict";var PRt=_0().charAt,kRt=Hr(),K2e=ro(),RRt=G5(),Z2e=qa(),X2e="String Iterator",jRt=K2e.set,qRt=K2e.getterFor(X2e);RRt(String,"String",function(e){jRt(this,{type:X2e,string:kRt(e),index:0})},function(){var t=qRt(this),r=t.string,n=t.index,o;return n>=r.length?Z2e(void 0,!0):(o=PRt(r,n),t.index+=o.length,Z2e(o,!1))})});var uT=M((e9r,rIe)=>{"use strict";FO();var J2e=er(),Q2e=fo(),zRt=zO(),eIe=Tt(),tIe=Nr(),FRt=aa(),URt=tIe("species"),e$=RegExp.prototype;rIe.exports=function(e,t,r,n){var o=tIe(e),i=!eIe(function(){var h={};return h[o]=function(){return 7},""[e](h)!==7}),a=i&&!eIe(function(){var h=!1,g=/a/;return e==="split"&&(g={},g.constructor={},g.constructor[URt]=function(){return g},g.flags="",g[o]=/./[o]),g.exec=function(){return h=!0,null},g[o](""),!h});if(!i||!a||r){var u=/./[o],p=t(o,""[e],function(h,g,x,b,T){var A=g.exec;return A===zRt||A===e$.exec?i&&!T?{done:!0,value:J2e(u,g,x,b)}:{done:!0,value:J2e(h,x,g,b)}:{done:!1}});Q2e(String.prototype,e,p[0]),Q2e(e$,o,p[1])}n&&FRt(e$[o],"sham",!0)}});var cT=M((t9r,nIe)=>{"use strict";var BRt=_0().charAt;nIe.exports=function(e,t,r){return t+(r?BRt(e,t).length:1)}});var eb=M((r9r,iIe)=>{"use strict";var oIe=er(),VRt=Jt(),GRt=Kr(),HRt=as(),WRt=zO(),$Rt=TypeError;iIe.exports=function(e,t){var r=e.exec;if(GRt(r)){var n=oIe(r,e,t);return n!==null&&VRt(n),n}if(HRt(e)==="RegExp")return oIe(WRt,e,t);throw new $Rt("RegExp#exec called on incompatible receiver")}});var sIe=M(()=>{"use strict";var YRt=er(),ZRt=uT(),KRt=Jt(),XRt=oa(),JRt=tu(),t$=Hr(),QRt=Go(),ejt=Pi(),tjt=cT(),aIe=eb();ZRt("match",function(e,t,r){return[function(o){var i=QRt(this),a=XRt(o)?void 0:ejt(o,e);return a?YRt(a,o,i):new RegExp(o)[e](t$(i))},function(n){var o=KRt(this),i=t$(n),a=r(t,o,i);if(a.done)return a.value;if(!o.global)return aIe(o,i);var u=o.unicode;o.lastIndex=0;for(var p=[],h=0,g;(g=aIe(o,i))!==null;){var x=t$(g[0]);p[h]=x,x===""&&(o.lastIndex=tjt(i,JRt(o.lastIndex),u)),h++}return h===0?null:p}]})});var a$=M(()=>{"use strict";var rjt=re(),lIe=er(),fIe=mh(),njt=kg(),HO=qa(),uIe=Go(),pIe=tu(),fT=Hr(),ojt=Jt(),ijt=oa(),ajt=as(),sjt=aT(),dIe=Kx(),ljt=Pi(),ujt=fo(),cjt=Tt(),fjt=Nr(),pjt=JI(),djt=cT(),hjt=eb(),hIe=ro(),n$=fn(),WO=fjt("matchAll"),mIe="RegExp String",gIe=mIe+" Iterator",mjt=hIe.set,gjt=hIe.getterFor(gIe),cIe=RegExp.prototype,vjt=TypeError,o$=fIe("".indexOf),$O=fIe("".matchAll),r$=!!$O&&!cjt(function(){$O("a",/./)}),yjt=njt(function(t,r,n,o){mjt(this,{type:gIe,regexp:t,string:r,global:n,unicode:o,done:!1})},mIe,function(){var t=gjt(this);if(t.done)return HO(void 0,!0);var r=t.regexp,n=t.string,o=hjt(r,n);return o===null?(t.done=!0,HO(void 0,!0)):t.global?(fT(o[0])===""&&(r.lastIndex=djt(n,pIe(r.lastIndex),t.unicode)),HO(o,!1)):(t.done=!0,HO(o,!1))}),i$=function(e){var t=ojt(this),r=fT(e),n=pjt(t,RegExp),o=fT(dIe(t)),i,a,u;return i=new n(n===RegExp?t.source:t,o),a=!!~o$(o,"g"),u=!!~o$(o,"u"),i.lastIndex=pIe(t.lastIndex),new yjt(i,r,a,u)};rjt({target:"String",proto:!0,forced:r$},{matchAll:function(t){var r=uIe(this),n,o,i,a;if(ijt(t)){if(r$)return $O(r,t)}else{if(sjt(t)&&(n=fT(uIe(dIe(t))),!~o$(n,"g")))throw new vjt("`.matchAll` does not allow non-global regexes");if(r$)return $O(r,t);if(i=ljt(t,WO),i===void 0&&n$&&ajt(t)==="RegExp"&&(i=i$),i)return lIe(i,t,r)}return o=fT(r),a=new RegExp(t,"g"),n$?lIe(i$,a,o):a[WO](o)}});n$||WO in cIe||ujt(cIe,WO,i$)});var s$=M((s9r,vIe)=>{"use strict";var _jt=Af();vIe.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(_jt)});var yIe=M(()=>{"use strict";var xjt=re(),bjt=qI().end,wjt=s$();xjt({target:"String",proto:!0,forced:wjt},{padEnd:function(t){return bjt(this,t,arguments.length>1?arguments[1]:void 0)}})});var _Ie=M(()=>{"use strict";var Ejt=re(),Sjt=qI().start,Ijt=s$();Ejt({target:"String",proto:!0,forced:Ijt},{padStart:function(t){return Sjt(this,t,arguments.length>1?arguments[1]:void 0)}})});var EIe=M(()=>{"use strict";var Tjt=re(),wIe=vt(),Mjt=ia(),Cjt=pn(),xIe=Hr(),Ajt=Mn(),bIe=wIe([].push),Djt=wIe([].join);Tjt({target:"String",stat:!0},{raw:function(t){var r=Mjt(Cjt(t).raw),n=Ajt(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){if(bIe(i,xIe(r[a++])),a===n)return Djt(i,"");a<o&&bIe(i,xIe(arguments[a]))}}})});var SIe=M(()=>{"use strict";var Njt=re(),Ojt=jI();Njt({target:"String",proto:!0},{repeat:Ojt})});var f$=M((g9r,IIe)=>{"use strict";var c$=vt(),Ljt=pn(),Pjt=Math.floor,l$=c$("".charAt),kjt=c$("".replace),u$=c$("".slice),Rjt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,jjt=/\$([$&'`]|\d{1,2})/g;IIe.exports=function(e,t,r,n,o,i){var a=r+e.length,u=n.length,p=jjt;return o!==void 0&&(o=Ljt(o),p=Rjt),kjt(i,p,function(h,g){var x;switch(l$(g,0)){case"$":return"$";case"&":return e;case"`":return u$(t,0,r);case"'":return u$(t,a);case"<":x=o[u$(g,1,-1)];break;default:var b=+g;if(b===0)return h;if(b>u){var T=Pjt(b/10);return T===0?h:T<=u?n[T-1]===void 0?l$(g,1):n[T-1]+l$(g,1):h}x=n[b-1];}return x===void 0?"":x})}});var DIe=M(()=>{"use strict";var qjt=Bs(),TIe=er(),YO=vt(),zjt=uT(),Fjt=Tt(),Ujt=Jt(),Bjt=Kr(),Vjt=oa(),Gjt=Qo(),Hjt=tu(),tb=Hr(),Wjt=Go(),$jt=cT(),Yjt=Pi(),Zjt=f$(),Kjt=eb(),Xjt=Nr(),d$=Xjt("replace"),Jjt=Math.max,Qjt=Math.min,e6t=YO([].concat),p$=YO([].push),MIe=YO("".indexOf),CIe=YO("".slice),t6t=function(e){return e===void 0?e:String(e)},r6t=function(){return"a".replace(/./,"$0")==="$0"}(),AIe=function(){return /./[d$]?/./[d$]("a","$0")==="":!1}(),n6t=!Fjt(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});zjt("replace",function(e,t,r){var n=AIe?"$":"$0";return[function(i,a){var u=Wjt(this),p=Vjt(i)?void 0:Yjt(i,d$);return p?TIe(p,i,u,a):TIe(t,tb(u),i,a)},function(o,i){var a=Ujt(this),u=tb(o);if(typeof i=="string"&&MIe(i,n)===-1&&MIe(i,"$<")===-1){var p=r(t,a,u,i);if(p.done)return p.value}var h=Bjt(i);h||(i=tb(i));var g=a.global,x;g&&(x=a.unicode,a.lastIndex=0);for(var b=[],T;T=Kjt(a,u),!(T===null||(p$(b,T),!g));){var A=tb(T[0]);A===""&&(a.lastIndex=$jt(u,Hjt(a.lastIndex),x))}for(var L="",P=0,k=0;k<b.length;k++){T=b[k];for(var q=tb(T[0]),U=Jjt(Qjt(Gjt(T.index),u.length),0),H=[],X,ee=1;ee<T.length;ee++)p$(H,t6t(T[ee]));var ne=T.groups;if(h){var pe=e6t([q],H,U,u);ne!==void 0&&p$(pe,ne),X=tb(qjt(i,void 0,pe))}else X=Zjt(q,u,U,H,ne,i);U>=P&&(L+=CIe(u,P,U)+X,P=U+q.length)}return L+CIe(u,P)}]},!n6t||!r6t||AIe)});var g$=M(()=>{"use strict";var o6t=re(),i6t=er(),m$=vt(),NIe=Go(),a6t=Kr(),s6t=oa(),l6t=aT(),rb=Hr(),u6t=Pi(),c6t=Kx(),f6t=f$(),p6t=Nr(),d6t=fn(),h6t=p6t("replace"),m6t=TypeError,h$=m$("".indexOf),g6t=m$("".replace),OIe=m$("".slice),v6t=Math.max;o6t({target:"String",proto:!0},{replaceAll:function(t,r){var n=NIe(this),o,i,a,u,p,h,g,x,b,T,A=0,L="";if(!s6t(t)){if(o=l6t(t),o&&(i=rb(NIe(c6t(t))),!~h$(i,"g")))throw new m6t("`.replaceAll` does not allow non-global regexes");if(a=u6t(t,h6t),a)return i6t(a,t,n,r);if(d6t&&o)return g6t(rb(n),t,r)}for(u=rb(n),p=rb(t),h=a6t(r),h||(r=rb(r)),g=p.length,x=v6t(1,g),b=h$(u,p);b!==-1;)T=h?rb(r(p,b,u)):f6t(p,u,b,[],void 0,r),L+=OIe(u,A,b)+T,A=b+g,b=b+x>u.length?-1:h$(u,p,b+x);return A<u.length&&(L+=OIe(u,A)),L}})});var kIe=M(()=>{"use strict";var y6t=er(),_6t=uT(),x6t=Jt(),b6t=oa(),w6t=Go(),LIe=MH(),PIe=Hr(),E6t=Pi(),S6t=eb();_6t("search",function(e,t,r){return[function(o){var i=w6t(this),a=b6t(o)?void 0:E6t(o,e);return a?y6t(a,o,i):new RegExp(o)[e](PIe(i))},function(n){var o=x6t(this),i=PIe(n),a=r(t,o,i);if(a.done)return a.value;var u=o.lastIndex;LIe(u,0)||(o.lastIndex=0);var p=S6t(o,i);return LIe(o.lastIndex,u)||(o.lastIndex=u),p===null?-1:p.index}]})});var FIe=M(()=>{"use strict";var v$=er(),zIe=vt(),I6t=uT(),T6t=Jt(),M6t=oa(),C6t=Go(),A6t=JI(),D6t=cT(),N6t=tu(),RIe=Hr(),O6t=Pi(),jIe=eb(),L6t=sT(),P6t=Tt(),nb=L6t.UNSUPPORTED_Y,k6t=4294967295,R6t=Math.min,y$=zIe([].push),_$=zIe("".slice),j6t=!P6t(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var r="ab".split(e);return r.length!==2||r[0]!=="a"||r[1]!=="b"}),qIe="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;I6t("split",function(e,t,r){var n="0".split(void 0,0).length?function(o,i){return o===void 0&&i===0?[]:v$(t,this,o,i)}:t;return[function(i,a){var u=C6t(this),p=M6t(i)?void 0:O6t(i,e);return p?v$(p,i,u,a):v$(n,RIe(u),i,a)},function(o,i){var a=T6t(this),u=RIe(o);if(!qIe){var p=r(n,a,u,i,n!==t);if(p.done)return p.value}var h=A6t(a,RegExp),g=a.unicode,x=(a.ignoreCase?"i":"")+(a.multiline?"m":"")+(a.unicode?"u":"")+(nb?"g":"y"),b=new h(nb?"^(?:"+a.source+")":a,x),T=i===void 0?k6t:i>>>0;if(T===0)return[];if(u.length===0)return jIe(b,u)===null?[u]:[];for(var A=0,L=0,P=[];L<u.length;){b.lastIndex=nb?0:L;var k=jIe(b,nb?_$(u,L):u),q;if(k===null||(q=R6t(N6t(b.lastIndex+(nb?L:0)),u.length))===A)L=D6t(u,L,g);else{if(y$(P,_$(u,A,L)),P.length===T)return P;for(var U=1;U<=k.length-1;U++)if(y$(P,k[U]),P.length===T)return P;L=A=q}}return y$(P,_$(u,A)),P}]},qIe||!j6t,nb)});var VIe=M(()=>{"use strict";var q6t=re(),z6t=mh(),F6t=Ra().f,U6t=tu(),UIe=Hr(),B6t=VO(),V6t=Go(),G6t=GO(),H6t=fn(),W6t=z6t("".slice),$6t=Math.min,BIe=G6t("startsWith"),Y6t=!H6t&&!BIe&&!!function(){var e=F6t(String.prototype,"startsWith");return e&&!e.writable}();q6t({target:"String",proto:!0,forced:!Y6t&&!BIe},{startsWith:function(t){var r=UIe(V6t(this));B6t(t);var n=U6t($6t(arguments.length>1?arguments[1]:void 0,r.length)),o=UIe(t);return W6t(r,n,n+o.length)===o}})});var HIe=M(()=>{"use strict";var Z6t=re(),K6t=vt(),X6t=Go(),GIe=Qo(),J6t=Hr(),Q6t=K6t("".slice),eqt=Math.max,tqt=Math.min,rqt=!"".substr||"ab".substr(-1)!=="b";Z6t({target:"String",proto:!0,forced:rqt},{substr:function(t,r){var n=J6t(X6t(this)),o=n.length,i=GIe(t),a,u;return i===1/0&&(i=0),i<0&&(i=eqt(o+i,0)),a=r===void 0?o:GIe(r),a<=0||a===1/0?"":(u=tqt(i+a,o),i>=u?"":Q6t(n,i,u))}})});var E$=M(()=>{"use strict";var nqt=re(),YIe=er(),w$=vt(),oqt=Go(),iqt=Hr(),aqt=Tt(),sqt=Array,x$=w$("".charAt),WIe=w$("".charCodeAt),lqt=w$([].join),b$="".toWellFormed,uqt="\uFFFD",$Ie=b$&&aqt(function(){return YIe(b$,1)!=="1"});nqt({target:"String",proto:!0,forced:$Ie},{toWellFormed:function(){var t=iqt(oqt(this));if($Ie)return YIe(b$,t);for(var r=t.length,n=sqt(r),o=0;o<r;o++){var i=WIe(t,o);(i&63488)!==55296?n[o]=x$(t,o):i>=56320||o+1>=r||(WIe(t,o+1)&64512)!==56320?n[o]=uqt:(n[o]=x$(t,o),n[++o]=x$(t,o))}return lqt(n,"")}})});var ZO=M((N9r,XIe)=>{"use strict";var cqt=Qy().PROPER,fqt=Tt(),ZIe=d0(),KIe="\u200B\x85\u180E";XIe.exports=function(e){return fqt(function(){return!!ZIe[e]()||KIe[e]()!==KIe||cqt&&ZIe[e].name!==e})}});var JIe=M(()=>{"use strict";var pqt=re(),dqt=h0().trim,hqt=ZO();pqt({target:"String",proto:!0,forced:hqt("trim")},{trim:function(){return dqt(this)}})});var S$=M((P9r,QIe)=>{"use strict";var mqt=h0().end,gqt=ZO();QIe.exports=gqt("trimEnd")?function(){return mqt(this)}:"".trimEnd});var tTe=M(()=>{"use strict";var vqt=re(),eTe=S$();vqt({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==eTe},{trimRight:eTe})});var nTe=M(()=>{"use strict";tTe();var yqt=re(),rTe=S$();yqt({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==rTe},{trimEnd:rTe})});var I$=M((z9r,oTe)=>{"use strict";var _qt=h0().start,xqt=ZO();oTe.exports=xqt("trimStart")?function(){return _qt(this)}:"".trimStart});var aTe=M(()=>{"use strict";var bqt=re(),iTe=I$();bqt({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==iTe},{trimLeft:iTe})});var lTe=M(()=>{"use strict";aTe();var wqt=re(),sTe=I$();wqt({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==sTe},{trimStart:sTe})});var su=M((G9r,cTe)=>{"use strict";var Eqt=vt(),Sqt=Go(),uTe=Hr(),Iqt=/"/g,Tqt=Eqt("".replace);cTe.exports=function(e,t,r,n){var o=uTe(Sqt(e)),i="<"+t;return r!==""&&(i+=" "+r+"=\""+Tqt(uTe(n),Iqt,"&quot;")+"\""),i+">"+o+"</"+t+">"}});var lu=M((H9r,fTe)=>{"use strict";var Mqt=Tt();fTe.exports=function(e){return Mqt(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var pTe=M(()=>{"use strict";var Cqt=re(),Aqt=su(),Dqt=lu();Cqt({target:"String",proto:!0,forced:Dqt("anchor")},{anchor:function(t){return Aqt(this,"a","name",t)}})});var dTe=M(()=>{"use strict";var Nqt=re(),Oqt=su(),Lqt=lu();Nqt({target:"String",proto:!0,forced:Lqt("big")},{big:function(){return Oqt(this,"big","","")}})});var hTe=M(()=>{"use strict";var Pqt=re(),kqt=su(),Rqt=lu();Pqt({target:"String",proto:!0,forced:Rqt("blink")},{blink:function(){return kqt(this,"blink","","")}})});var mTe=M(()=>{"use strict";var jqt=re(),qqt=su(),zqt=lu();jqt({target:"String",proto:!0,forced:zqt("bold")},{bold:function(){return qqt(this,"b","","")}})});var gTe=M(()=>{"use strict";var Fqt=re(),Uqt=su(),Bqt=lu();Fqt({target:"String",proto:!0,forced:Bqt("fixed")},{fixed:function(){return Uqt(this,"tt","","")}})});var vTe=M(()=>{"use strict";var Vqt=re(),Gqt=su(),Hqt=lu();Vqt({target:"String",proto:!0,forced:Hqt("fontcolor")},{fontcolor:function(t){return Gqt(this,"font","color",t)}})});var yTe=M(()=>{"use strict";var Wqt=re(),$qt=su(),Yqt=lu();Wqt({target:"String",proto:!0,forced:Yqt("fontsize")},{fontsize:function(t){return $qt(this,"font","size",t)}})});var _Te=M(()=>{"use strict";var Zqt=re(),Kqt=su(),Xqt=lu();Zqt({target:"String",proto:!0,forced:Xqt("italics")},{italics:function(){return Kqt(this,"i","","")}})});var xTe=M(()=>{"use strict";var Jqt=re(),Qqt=su(),ezt=lu();Jqt({target:"String",proto:!0,forced:ezt("link")},{link:function(t){return Qqt(this,"a","href",t)}})});var bTe=M(()=>{"use strict";var tzt=re(),rzt=su(),nzt=lu();tzt({target:"String",proto:!0,forced:nzt("small")},{small:function(){return rzt(this,"small","","")}})});var wTe=M(()=>{"use strict";var ozt=re(),izt=su(),azt=lu();ozt({target:"String",proto:!0,forced:azt("strike")},{strike:function(){return izt(this,"strike","","")}})});var ETe=M(()=>{"use strict";var szt=re(),lzt=su(),uzt=lu();szt({target:"String",proto:!0,forced:uzt("sub")},{sub:function(){return lzt(this,"sub","","")}})});var STe=M(()=>{"use strict";var czt=re(),fzt=su(),pzt=lu();czt({target:"String",proto:!0,forced:pzt("sup")},{sup:function(){return fzt(this,"sup","","")}})});var KO=M((y7r,TTe)=>{"use strict";var ITe=$t(),T$=Tt(),dzt=MI(),hzt=cn().NATIVE_ARRAY_BUFFER_VIEWS,mzt=ITe.ArrayBuffer,x0=ITe.Int8Array;TTe.exports=!hzt||!T$(function(){x0(1)})||!T$(function(){new x0(-1)})||!dzt(function(e){new x0,new x0(null),new x0(1.5),new x0(e)},!0)||T$(function(){return new x0(new mzt(2),1,void 0).length!==1})});var M$=M((_7r,MTe)=>{"use strict";var gzt=qx(),vzt=RangeError;MTe.exports=function(e,t){var r=gzt(e);if(r%t)throw new vzt("Wrong offset");return r}});var C$=M((x7r,CTe)=>{"use strict";var yzt=Math.round;CTe.exports=function(e){var t=yzt(e);return t<0?0:t>255?255:t&255}});var XO=M((b7r,ATe)=>{"use strict";var _zt=ru();ATe.exports=function(e){var t=_zt(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var pT=M((w7r,DTe)=>{"use strict";var xzt=uI(),bzt=TypeError;DTe.exports=function(e){var t=xzt(e,"number");if(typeof t=="number")throw new bzt("Can't convert number to bigint");return BigInt(t)}});var A$=M((E7r,NTe)=>{"use strict";var wzt=xo(),Ezt=er(),Szt=XI(),Izt=pn(),Tzt=Mn(),Mzt=Lg(),Czt=jp(),Azt=R5(),Dzt=XO(),Nzt=cn().aTypedArrayConstructor,Ozt=pT();NTe.exports=function(t){var r=Szt(this),n=Izt(t),o=arguments.length,i=o>1?arguments[1]:void 0,a=i!==void 0,u=Czt(n),p,h,g,x,b,T,A,L;if(u&&!Azt(u))for(A=Mzt(n,u),L=A.next,n=[];!(T=Ezt(L,A)).done;)n.push(T.value);for(a&&o>2&&(i=wzt(i,arguments[2])),h=Tzt(n),g=new(Nzt(r))(h),x=Dzt(g),p=0;h>p;p++)b=a?i(n[p],p):n[p],g[p]=x?Ozt(b):+b;return g}});var Vp=M((S7r,R$)=>{"use strict";var OTe=re(),VTe=$t(),LTe=er(),Lzt=Tr(),Pzt=KO(),gT=cn(),GTe=RI(),PTe=Vs(),kzt=eu(),dT=aa(),Rzt=wO(),jzt=tu(),kTe=Nx(),D$=M$(),qzt=C$(),HTe=kp(),hT=sn(),zzt=ru(),L$=Br(),Fzt=dh(),Uzt=ki(),Bzt=ss(),JO=Sc(),Vzt=Ag().f,RTe=A$(),Gzt=Ri().forEach,Hzt=jg(),Wzt=ei(),WTe=ko(),$Te=Ra(),jTe=xh(),j$=ro(),$zt=Og(),P$=j$.get,Yzt=j$.set,Zzt=j$.enforce,YTe=WTe.f,Kzt=$Te.f,N$=VTe.RangeError,ZTe=GTe.ArrayBuffer,Xzt=ZTe.prototype,Jzt=GTe.DataView,QO=gT.NATIVE_ARRAY_BUFFER_VIEWS,qTe=gT.TYPED_ARRAY_TAG,zTe=gT.TypedArray,mT=gT.TypedArrayPrototype,k$=gT.isTypedArray,eL="BYTES_PER_ELEMENT",O$="Wrong length",tL=function(e,t){Wzt(e,t,{configurable:!0,get:function(){return P$(this)[t]}})},FTe=function(e){var t;return Bzt(Xzt,e)||(t=zzt(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},KTe=function(e,t){return k$(e)&&!Fzt(t)&&t in e&&Rzt(+t)&&t>=0},UTe=function(t,r){return r=HTe(r),KTe(t,r)?kzt(2,t[r]):Kzt(t,r)},BTe=function(t,r,n){return r=HTe(r),KTe(t,r)&&L$(n)&&hT(n,"value")&&!hT(n,"get")&&!hT(n,"set")&&!n.configurable&&(!hT(n,"writable")||n.writable)&&(!hT(n,"enumerable")||n.enumerable)?(t[r]=n.value,t):YTe(t,r,n)};Lzt?(QO||($Te.f=UTe,WTe.f=BTe,tL(mT,"buffer"),tL(mT,"byteOffset"),tL(mT,"byteLength"),tL(mT,"length")),OTe({target:"Object",stat:!0,forced:!QO},{getOwnPropertyDescriptor:UTe,defineProperty:BTe}),R$.exports=function(e,t,r){var n=e.match(/\d+/)[0]/8,o=e+(r?"Clamped":"")+"Array",i="get"+e,a="set"+e,u=VTe[o],p=u,h=p&&p.prototype,g={},x=function(L,P){var k=P$(L);return k.view[i](P*n+k.byteOffset,!0)},b=function(L,P,k){var q=P$(L);q.view[a](P*n+q.byteOffset,r?qzt(k):k,!0)},T=function(L,P){YTe(L,P,{get:function(){return x(this,P)},set:function(k){return b(this,P,k)},enumerable:!0})};QO?Pzt&&(p=t(function(L,P,k,q){return PTe(L,h),$zt(function(){return L$(P)?FTe(P)?q!==void 0?new u(P,D$(k,n),q):k!==void 0?new u(P,D$(k,n)):new u(P):k$(P)?jTe(p,P):LTe(RTe,p,P):new u(kTe(P))}(),L,p)}),JO&&JO(p,zTe),Gzt(Vzt(u),function(L){L in p||dT(p,L,u[L])}),p.prototype=h):(p=t(function(L,P,k,q){PTe(L,h);var U=0,H=0,X,ee,ne;if(!L$(P))ne=kTe(P),ee=ne*n,X=new ZTe(ee);else if(FTe(P)){X=P,H=D$(k,n);var pe=P.byteLength;if(q===void 0){if(pe%n)throw new N$(O$);if(ee=pe-H,ee<0)throw new N$(O$)}else if(ee=jzt(q)*n,ee+H>pe)throw new N$(O$);ne=ee/n}else return k$(P)?jTe(p,P):LTe(RTe,p,P);for(Yzt(L,{buffer:X,byteOffset:H,byteLength:ee,length:ne,view:new Jzt(X)});U<ne;)T(L,U++)}),JO&&JO(p,zTe),h=p.prototype=Uzt(mT)),h.constructor!==p&&dT(h,"constructor",p),Zzt(h).TypedArrayConstructor=p,qTe&&dT(h,qTe,o);var A=p!==u;g[o]=p,OTe({global:!0,constructor:!0,forced:A,sham:!QO},g),eL in p||dT(p,eL,n),eL in h||dT(h,eL,n),Hzt(o)}):R$.exports=function(){}});var XTe=M(()=>{"use strict";var Qzt=Vp();Qzt("Float32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var JTe=M(()=>{"use strict";var e8t=Vp();e8t("Float64",function(e){return function(r,n,o){return e(this,r,n,o)}})});var QTe=M(()=>{"use strict";var t8t=Vp();t8t("Int8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var eMe=M(()=>{"use strict";var r8t=Vp();r8t("Int16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var tMe=M(()=>{"use strict";var n8t=Vp();n8t("Int32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var rMe=M(()=>{"use strict";var o8t=Vp();o8t("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}})});var nMe=M(()=>{"use strict";var i8t=Vp();i8t("Uint8",function(e){return function(r,n,o){return e(this,r,n,o)}},!0)});var oMe=M(()=>{"use strict";var a8t=Vp();a8t("Uint16",function(e){return function(r,n,o){return e(this,r,n,o)}})});var iMe=M(()=>{"use strict";var s8t=Vp();s8t("Uint32",function(e){return function(r,n,o){return e(this,r,n,o)}})});var q$=M(()=>{"use strict";var aMe=cn(),l8t=Mn(),u8t=Qo(),c8t=aMe.aTypedArray,f8t=aMe.exportTypedArrayMethod;f8t("at",function(t){var r=c8t(this),n=l8t(r),o=u8t(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:r[i]})});var lMe=M(()=>{"use strict";var p8t=vt(),sMe=cn(),d8t=aV(),h8t=p8t(d8t),m8t=sMe.aTypedArray,g8t=sMe.exportTypedArrayMethod;g8t("copyWithin",function(t,r){return h8t(m8t(this),t,r,arguments.length>2?arguments[2]:void 0)})});var cMe=M(()=>{"use strict";var uMe=cn(),v8t=Ri().every,y8t=uMe.aTypedArray,_8t=uMe.exportTypedArrayMethod;_8t("every",function(t){return v8t(y8t(this),t,arguments.length>1?arguments[1]:void 0)})});var pMe=M(()=>{"use strict";var fMe=cn(),x8t=F5(),b8t=pT(),w8t=ru(),E8t=er(),S8t=vt(),I8t=Tt(),T8t=fMe.aTypedArray,M8t=fMe.exportTypedArrayMethod,C8t=S8t("".slice),A8t=I8t(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});M8t("fill",function(t){var r=arguments.length;T8t(this);var n=C8t(w8t(this),0,3)==="Big"?b8t(t):+t;return E8t(x8t,this,n,r>1?arguments[1]:void 0,r>2?arguments[2]:void 0)},A8t)});var rL=M((X7r,dMe)=>{"use strict";var D8t=xh(),N8t=cn().getTypedArrayConstructor;dMe.exports=function(e,t){return D8t(N8t(e),t)}});var mMe=M(()=>{"use strict";var hMe=cn(),O8t=Ri().filter,L8t=rL(),P8t=hMe.aTypedArray,k8t=hMe.exportTypedArrayMethod;k8t("filter",function(t){var r=O8t(P8t(this),t,arguments.length>1?arguments[1]:void 0);return L8t(this,r)})});var vMe=M(()=>{"use strict";var gMe=cn(),R8t=Ri().find,j8t=gMe.aTypedArray,q8t=gMe.exportTypedArrayMethod;q8t("find",function(t){return R8t(j8t(this),t,arguments.length>1?arguments[1]:void 0)})});var _Me=M(()=>{"use strict";var yMe=cn(),z8t=Ri().findIndex,F8t=yMe.aTypedArray,U8t=yMe.exportTypedArrayMethod;U8t("findIndex",function(t){return z8t(F8t(this),t,arguments.length>1?arguments[1]:void 0)})});var z$=M(()=>{"use strict";var xMe=cn(),B8t=TI().findLast,V8t=xMe.aTypedArray,G8t=xMe.exportTypedArrayMethod;G8t("findLast",function(t){return B8t(V8t(this),t,arguments.length>1?arguments[1]:void 0)})});var F$=M(()=>{"use strict";var bMe=cn(),H8t=TI().findLastIndex,W8t=bMe.aTypedArray,$8t=bMe.exportTypedArrayMethod;$8t("findLastIndex",function(t){return H8t(W8t(this),t,arguments.length>1?arguments[1]:void 0)})});var EMe=M(()=>{"use strict";var wMe=cn(),Y8t=Ri().forEach,Z8t=wMe.aTypedArray,K8t=wMe.exportTypedArrayMethod;K8t("forEach",function(t){Y8t(Z8t(this),t,arguments.length>1?arguments[1]:void 0)})});var SMe=M(()=>{"use strict";var X8t=KO(),J8t=cn().exportTypedArrayStaticMethod,Q8t=A$();J8t("from",Q8t,X8t)});var TMe=M(()=>{"use strict";var IMe=cn(),eFt=Ex().includes,tFt=IMe.aTypedArray,rFt=IMe.exportTypedArrayMethod;rFt("includes",function(t){return eFt(tFt(this),t,arguments.length>1?arguments[1]:void 0)})});var CMe=M(()=>{"use strict";var MMe=cn(),nFt=Ex().indexOf,oFt=MMe.aTypedArray,iFt=MMe.exportTypedArrayMethod;iFt("indexOf",function(t){return nFt(oFt(this),t,arguments.length>1?arguments[1]:void 0)})});var LMe=M(()=>{"use strict";var aFt=$t(),sFt=Tt(),U$=vt(),DMe=cn(),B$=DI(),lFt=Nr(),V$=lFt("iterator"),AMe=aFt.Uint8Array,uFt=U$(B$.values),cFt=U$(B$.keys),fFt=U$(B$.entries),G$=DMe.aTypedArray,nL=DMe.exportTypedArrayMethod,ob=AMe&&AMe.prototype,oL=!sFt(function(){ob[V$].call([1])}),NMe=!!ob&&ob.values&&ob[V$]===ob.values&&ob.values.name==="values",OMe=function(){return uFt(G$(this))};nL("entries",function(){return fFt(G$(this))},oL);nL("keys",function(){return cFt(G$(this))},oL);nL("values",OMe,oL||!NMe,{name:"values"});nL(V$,OMe,oL||!NMe,{name:"values"})});var kMe=M(()=>{"use strict";var PMe=cn(),pFt=vt(),dFt=PMe.aTypedArray,hFt=PMe.exportTypedArrayMethod,mFt=pFt([].join);hFt("join",function(t){return mFt(dFt(this),t)})});var jMe=M(()=>{"use strict";var RMe=cn(),gFt=Bs(),vFt=wV(),yFt=RMe.aTypedArray,_Ft=RMe.exportTypedArrayMethod;_Ft("lastIndexOf",function(t){var r=arguments.length;return gFt(vFt,yFt(this),r>1?[t,arguments[1]]:[t])})});var qMe=M(()=>{"use strict";var H$=cn(),xFt=Ri().map,bFt=H$.aTypedArray,wFt=H$.getTypedArrayConstructor,EFt=H$.exportTypedArrayMethod;EFt("map",function(t){return xFt(bFt(this),t,arguments.length>1?arguments[1]:void 0,function(r,n){return new(wFt(r))(n)})})});var FMe=M(()=>{"use strict";var zMe=cn(),SFt=KO(),IFt=zMe.aTypedArrayConstructor,TFt=zMe.exportTypedArrayStaticMethod;TFt("of",function(){for(var t=0,r=arguments.length,n=new(IFt(this))(r);r>t;)n[t]=arguments[t++];return n},SFt)});var BMe=M(()=>{"use strict";var UMe=cn(),MFt=NI().left,CFt=UMe.aTypedArray,AFt=UMe.exportTypedArrayMethod;AFt("reduce",function(t){var r=arguments.length;return MFt(CFt(this),t,r,r>1?arguments[1]:void 0)})});var GMe=M(()=>{"use strict";var VMe=cn(),DFt=NI().right,NFt=VMe.aTypedArray,OFt=VMe.exportTypedArrayMethod;OFt("reduceRight",function(t){var r=arguments.length;return DFt(NFt(this),t,r,r>1?arguments[1]:void 0)})});var WMe=M(()=>{"use strict";var HMe=cn(),LFt=HMe.aTypedArray,PFt=HMe.exportTypedArrayMethod,kFt=Math.floor;PFt("reverse",function(){for(var t=this,r=LFt(t).length,n=kFt(r/2),o=0,i;o<n;)i=t[o],t[o++]=t[--r],t[r]=i;return t})});var JMe=M(()=>{"use strict";var YMe=$t(),ZMe=er(),Y$=cn(),RFt=Mn(),jFt=M$(),qFt=pn(),KMe=Tt(),zFt=YMe.RangeError,W$=YMe.Int8Array,$Me=W$&&W$.prototype,XMe=$Me&&$Me.set,FFt=Y$.aTypedArray,UFt=Y$.exportTypedArrayMethod,$$=!KMe(function(){var e=new Uint8ClampedArray(2);return ZMe(XMe,e,{length:1,0:3},1),e[1]!==3}),BFt=$$&&Y$.NATIVE_ARRAY_BUFFER_VIEWS&&KMe(function(){var e=new W$(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});UFt("set",function(t){FFt(this);var r=jFt(arguments.length>1?arguments[1]:void 0,1),n=qFt(t);if($$)return ZMe(XMe,this,n,r);var o=this.length,i=RFt(n),a=0;if(i+r>o)throw new zFt("Wrong length");for(;a<i;)this[r+a]=n[a++]},!$$||BFt)});var QMe=M(()=>{"use strict";var Z$=cn(),VFt=Tt(),GFt=nu(),HFt=Z$.aTypedArray,WFt=Z$.getTypedArrayConstructor,$Ft=Z$.exportTypedArrayMethod,YFt=VFt(function(){new Int8Array(1).slice()});$Ft("slice",function(t,r){for(var n=GFt(HFt(this),t,r),o=WFt(this),i=0,a=n.length,u=new o(a);a>i;)u[i]=n[i++];return u},YFt)});var tCe=M(()=>{"use strict";var eCe=cn(),ZFt=Ri().some,KFt=eCe.aTypedArray,XFt=eCe.exportTypedArrayMethod;XFt("some",function(t){return ZFt(KFt(this),t,arguments.length>1?arguments[1]:void 0)})});var sCe=M(()=>{"use strict";var JFt=$t(),QFt=mh(),K$=Tt(),e9t=Rr(),t9t=Y5(),aCe=cn(),rCe=IV(),r9t=TV(),nCe=Pp(),oCe=Z5(),n9t=aCe.aTypedArray,o9t=aCe.exportTypedArrayMethod,vT=JFt.Uint16Array,ib=vT&&QFt(vT.prototype.sort),i9t=!!ib&&!(K$(function(){ib(new vT(2),null)})&&K$(function(){ib(new vT(2),{})})),iCe=!!ib&&!K$(function(){if(nCe)return nCe<74;if(rCe)return rCe<67;if(r9t)return!0;if(oCe)return oCe<602;var e=new vT(516),t=Array(516),r,n;for(r=0;r<516;r++)n=r%4,e[r]=515-r,t[r]=r-2*n+3;for(ib(e,function(o,i){return(o/4|0)-(i/4|0)}),r=0;r<516;r++)if(e[r]!==t[r])return!0}),a9t=function(e){return function(t,r){return e!==void 0?+e(t,r)||0:r!==r?-1:t!==t?1:t===0&&r===0?1/t>0&&1/r<0?1:-1:t>r}};o9t("sort",function(t){return t!==void 0&&e9t(t),iCe?ib(this,t):t9t(n9t(this),a9t(t))},!iCe||i9t)});var uCe=M(()=>{"use strict";var X$=cn(),s9t=tu(),lCe=Of(),l9t=X$.aTypedArray,u9t=X$.getTypedArrayConstructor,c9t=X$.exportTypedArrayMethod;c9t("subarray",function(t,r){var n=l9t(this),o=n.length,i=lCe(t,o),a=u9t(n);return new a(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,s9t((r===void 0?o:lCe(r,o))-i))})});var hCe=M(()=>{"use strict";var f9t=$t(),p9t=Bs(),pCe=cn(),J$=Tt(),cCe=nu(),iL=f9t.Int8Array,fCe=pCe.aTypedArray,d9t=pCe.exportTypedArrayMethod,dCe=[].toLocaleString,h9t=!!iL&&J$(function(){dCe.call(new iL(1))}),m9t=J$(function(){return[1,2].toLocaleString()!==new iL([1,2]).toLocaleString()})||!J$(function(){iL.prototype.toLocaleString.call([1,2])});d9t("toLocaleString",function(){return p9t(dCe,h9t?cCe(fCe(this)):fCe(this),cCe(arguments))},m9t)});var eY=M(()=>{"use strict";var g9t=AV(),Q$=cn(),v9t=Q$.aTypedArray,y9t=Q$.exportTypedArrayMethod,_9t=Q$.getTypedArrayConstructor;y9t("toReversed",function(){return g9t(v9t(this),_9t(this))})});var tY=M(()=>{"use strict";var aL=cn(),x9t=vt(),b9t=Rr(),w9t=xh(),E9t=aL.aTypedArray,S9t=aL.getTypedArrayConstructor,I9t=aL.exportTypedArrayMethod,T9t=x9t(aL.TypedArrayPrototype.sort);I9t("toSorted",function(t){t!==void 0&&b9t(t);var r=E9t(this),n=w9t(S9t(r),r);return T9t(n,t)})});var gCe=M(()=>{"use strict";var M9t=cn().exportTypedArrayMethod,C9t=Tt(),A9t=$t(),D9t=vt(),mCe=A9t.Uint8Array,N9t=mCe&&mCe.prototype||{},sL=[].toString,O9t=D9t([].join);C9t(function(){sL.call({})})&&(sL=function(){return O9t(this)});var L9t=N9t.toString!==sL;M9t("toString",sL,L9t)});var nY=M(()=>{"use strict";var P9t=PV(),rY=cn(),k9t=XO(),R9t=Qo(),j9t=pT(),q9t=rY.aTypedArray,z9t=rY.getTypedArrayConstructor,F9t=rY.exportTypedArrayMethod,U9t=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();F9t("with",function(e,t){var r=q9t(this),n=R9t(e),o=k9t(r)?j9t(t):+t;return P9t(r,z9t(r),n,o)},!U9t)});var bCe=M(()=>{"use strict";var B9t=re(),oY=vt(),V9t=Hr(),vCe=String.fromCharCode,yCe=oY("".charAt),_Ce=oY(/./.exec),xCe=oY("".slice),G9t=/^[\da-f]{2}$/i,H9t=/^[\da-f]{4}$/i;B9t({global:!0},{unescape:function(t){for(var r=V9t(t),n="",o=r.length,i=0,a,u;i<o;){if(a=yCe(r,i++),a==="%"){if(yCe(r,i)==="u"){if(u=xCe(r,i+1,i+5),_Ce(H9t,u)){n+=vCe(parseInt(u,16)),i+=5;continue}}else if(u=xCe(r,i,i+2),_Ce(G9t,u)){n+=vCe(parseInt(u,16)),i+=2;continue}}n+=a}return n}})});var sY=M((eBr,MCe)=>{"use strict";var W9t=vt(),wCe=Mc(),lL=Gg().getWeakData,$9t=Vs(),Y9t=Jt(),Z9t=oa(),iY=Br(),K9t=_i(),SCe=Ri(),ECe=sn(),ICe=ro(),X9t=ICe.set,J9t=ICe.getterFor,Q9t=SCe.find,e7t=SCe.findIndex,t7t=W9t([].splice),r7t=0,uL=function(e){return e.frozen||(e.frozen=new TCe)},TCe=function(){this.entries=[]},aY=function(e,t){return Q9t(e.entries,function(r){return r[0]===t})};TCe.prototype={get:function(e){var t=aY(this,e);if(t)return t[1]},has:function(e){return!!aY(this,e)},set:function(e,t){var r=aY(this,e);r?r[1]=t:this.entries.push([e,t])},delete:function(e){var t=e7t(this.entries,function(r){return r[0]===e});return~t&&t7t(this.entries,t,1),!!~t}};MCe.exports={getConstructor:function(e,t,r,n){var o=e(function(p,h){$9t(p,i),X9t(p,{type:t,id:r7t++,frozen:null}),Z9t(h)||K9t(h,p[n],{that:p,AS_ENTRIES:r})}),i=o.prototype,a=J9t(t),u=function(p,h,g){var x=a(p),b=lL(Y9t(h),!0);return b===!0?uL(x).set(h,g):b[x.id]=g,p};return wCe(i,{delete:function(p){var h=a(this);if(!iY(p))return!1;var g=lL(p);return g===!0?uL(h).delete(p):g&&ECe(g,h.id)&&delete g[h.id]},has:function(h){var g=a(this);if(!iY(h))return!1;var x=lL(h);return x===!0?uL(g).has(h):x&&ECe(x,g.id)}}),wCe(i,r?{get:function(h){var g=a(this);if(iY(h)){var x=lL(h);if(x===!0)return uL(g).get(h);if(x)return x[g.id]}},set:function(h,g){return u(this,h,g)}}:{add:function(h){return u(this,h,!0)}}),o}}});var kCe=M(()=>{"use strict";var n7t=Ih(),CCe=$t(),dL=vt(),ACe=Mc(),o7t=Gg(),i7t=UI(),DCe=sY(),cL=Br(),fL=ro().enforce,a7t=Tt(),s7t=lB(),xT=Object,l7t=Array.isArray,pL=xT.isExtensible,NCe=xT.isFrozen,u7t=xT.isSealed,OCe=xT.freeze,c7t=xT.seal,f7t=!CCe.ActiveXObject&&"ActiveXObject"in CCe,yT,LCe=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},PCe=i7t("WeakMap",LCe,DCe),ab=PCe.prototype,hL=dL(ab.set),p7t=function(){return n7t&&a7t(function(){var e=OCe([]);return hL(new PCe,e,1),!NCe(e)})};s7t&&(f7t?(yT=DCe.getConstructor(LCe,"WeakMap",!0),o7t.enable(),lY=dL(ab.delete),_T=dL(ab.has),uY=dL(ab.get),ACe(ab,{delete:function(e){if(cL(e)&&!pL(e)){var t=fL(this);return t.frozen||(t.frozen=new yT),lY(this,e)||t.frozen.delete(e)}return lY(this,e)},has:function(t){if(cL(t)&&!pL(t)){var r=fL(this);return r.frozen||(r.frozen=new yT),_T(this,t)||r.frozen.has(t)}return _T(this,t)},get:function(t){if(cL(t)&&!pL(t)){var r=fL(this);return r.frozen||(r.frozen=new yT),_T(this,t)?uY(this,t):r.frozen.get(t)}return uY(this,t)},set:function(t,r){if(cL(t)&&!pL(t)){var n=fL(this);n.frozen||(n.frozen=new yT),_T(this,t)?hL(this,t,r):n.frozen.set(t,r)}else hL(this,t,r);return this}})):p7t()&&ACe(ab,{set:function(t,r){var n;return l7t(t)&&(NCe(t)?n=OCe:u7t(t)&&(n=c7t)),hL(this,t,r),n&&n(t),this}}));var lY,_T,uY});var mL=M(()=>{"use strict";kCe()});var RCe=M(()=>{"use strict";var d7t=UI(),h7t=sY();d7t("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},h7t)});var jCe=M(()=>{"use strict";RCe()});var qCe=M(()=>{"use strict";eV()});var UCe=M(()=>{"use strict";var m7t=re(),g7t=$t(),v7t=ss(),zCe=sa(),vL=Sc(),y7t=t0(),FCe=ki(),gL=aa(),cY=eu(),_7t=O5(),x7t=a0(),b7t=Nr(),w7t=Tt(),E7t=fn(),sb=g7t.SuppressedError,S7t=b7t("toStringTag"),yL=Error,I7t=!!sb&&sb.length!==3,T7t=!!sb&&w7t(function(){return new sb(1,2,3,{cause:4}).cause===4}),_L=I7t||T7t,b0=function(t,r,n){var o=v7t(bT,this),i;return vL?i=_L&&(!o||zCe(this)===bT)?new sb:vL(new yL,o?zCe(this):bT):(i=o?this:FCe(bT),gL(i,S7t,"Error")),n!==void 0&&gL(i,"message",x7t(n)),_7t(i,b0,i.stack,1),gL(i,"error",t),gL(i,"suppressed",r),i};vL?vL(b0,yL):y7t(b0,yL,{name:!0});var bT=b0.prototype=_L?sb.prototype:FCe(yL.prototype,{constructor:cY(1,b0),message:cY(1,""),name:cY(1,"SuppressedError")});_L&&!E7t&&(bT.constructor=b0);m7t({global:!0,constructor:!0,arity:3,forced:_L},{SuppressedError:b0})});var lb=M((dBr,ZCe)=>{"use strict";var WCe=$t(),$Ce=lI(),YCe=Kr(),M7t=ki(),xL=sa(),C7t=fo(),A7t=Nr(),D7t=fn(),BCe="USE_FUNCTION_CONSTRUCTOR",VCe=A7t("asyncIterator"),GCe=WCe.AsyncIterator,HCe=$Ce.AsyncIteratorPrototype,Gp,fY;if(HCe)Gp=HCe;else if(YCe(GCe))Gp=GCe.prototype;else if($Ce[BCe]||WCe[BCe])try{fY=xL(xL(xL(Function("return async function*(){}()")()))),xL(fY)===Object.prototype&&(Gp=fY)}catch(e){}Gp?D7t&&(Gp=M7t(Gp)):Gp={};YCe(Gp[VCe])||C7t(Gp,VCe,function(){return this});ZCe.exports=Gp});var wT=M((hBr,oAe)=>{"use strict";var KCe=er(),XCe=Jt(),N7t=ki(),O7t=Pi(),L7t=Mc(),eAe=ro(),P7t=Fr(),k7t=lb(),tAe=qa(),pY=P7t("Promise"),rAe="AsyncFromSyncIterator",R7t=eAe.set,JCe=eAe.getterFor(rAe),QCe=function(e,t,r){var n=e.done;pY.resolve(e.value).then(function(o){t(tAe(o,n))},r)},nAe=function(t){t.type=rAe,R7t(this,t)};nAe.prototype=L7t(N7t(k7t),{next:function(){var t=JCe(this);return new pY(function(r,n){var o=XCe(KCe(t.next,t.iterator));QCe(o,r,n)})},return:function(){var e=JCe(this).iterator;return new pY(function(t,r){var n=O7t(e,"return");if(n===void 0)return t(tAe(void 0,!0));var o=XCe(KCe(n,e));QCe(o,t,r)})}});oAe.exports=nAe});var aAe=M((mBr,iAe)=>{"use strict";var j7t=er(),q7t=wT(),z7t=Jt(),F7t=Lg(),U7t=ui(),B7t=Pi(),V7t=Nr(),G7t=V7t("asyncIterator");iAe.exports=function(e,t){var r=arguments.length<2?B7t(e,G7t):t;return r?z7t(j7t(r,e)):new q7t(U7t(F7t(e)))}});var ub=M((gBr,sAe)=>{"use strict";var H7t=er(),W7t=Fr(),$7t=Pi();sAe.exports=function(e,t,r,n){try{var o=$7t(e,"return");if(o)return W7t("Promise").resolve(H7t(o,e)).then(function(){t(r)},function(i){n(i)})}catch(i){return n(i)}t(r)}});var w0=M((vBr,lAe)=>{"use strict";var Y7t=er(),Z7t=Rr(),dY=Jt(),K7t=Br(),X7t=Pg(),J7t=Fr(),Q7t=ui(),hY=ub(),ET=function(e){var t=e===0,r=e===1,n=e===2,o=e===3;return function(i,a,u){dY(i);var p=a!==void 0;(p||!t)&&Z7t(a);var h=Q7t(i),g=J7t("Promise"),x=h.iterator,b=h.next,T=0;return new g(function(A,L){var P=function(q){hY(x,L,q,L)},k=function(){try{if(p)try{X7t(T)}catch(q){P(q)}g.resolve(dY(Y7t(b,x))).then(function(q){try{if(dY(q).done)t?(u.length=T,A(u)):A(o?!1:n||void 0);else{var U=q.value;try{if(p){var H=a(U,T),X=function(ee){if(r)k();else if(n)ee?k():hY(x,A,!1,L);else if(t)try{u[T++]=ee,k()}catch(ne){P(ne)}else ee?hY(x,A,o||U,L):k()};K7t(H)?g.resolve(H).then(X,P):X(H)}else u[T++]=U,k()}catch(ee){P(ee)}}}catch(ee){L(ee)}},L)}catch(q){L(q)}};k()})}};lAe.exports={toArray:ET(0),forEach:ET(1),every:ET(2),some:ET(3),find:ET(4)}});var mY=M((yBr,pAe)=>{"use strict";var eUt=xo(),uAe=vt(),tUt=pn(),rUt=Pf(),nUt=aAe(),oUt=Lg(),iUt=ui(),aUt=jp(),sUt=Pi(),lUt=Fr(),uUt=NV(),cUt=Nr(),fUt=wT(),pUt=w0().toArray,dUt=cUt("asyncIterator"),cAe=uAe(uUt("Array","values")),hUt=uAe(cAe([]).next),mUt=function(){return new fAe(this)},fAe=function(e){this.iterator=cAe(e)};fAe.prototype.next=function(){return hUt(this.iterator)};pAe.exports=function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(lUt("Promise"))(function(a){var u=tUt(t);o!==void 0&&(o=eUt(o,i));var p=sUt(u,dUt),h=p?void 0:aUt(u)||mUt,g=rUt(r)?new r:[],x=p?nUt(u,p):new fUt(iUt(oUt(u,h)));a(pUt(x,o,g))})}});var hAe=M(()=>{"use strict";var gUt=re(),vUt=mY(),yUt=Tt(),dAe=Array.fromAsync,_Ut=!dAe||yUt(function(){var e=0;return dAe.call(function(){return e++,[]},{length:0}),e!==1});gUt({target:"Array",stat:!0,forced:_Ut},{fromAsync:vUt})});var mAe=M(()=>{"use strict";oV()});var gAe=M(()=>{"use strict";var xUt=re(),bUt=Ri().filterReject,wUt=xi();xUt({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return bUt(this,t,arguments.length>1?arguments[1]:void 0)}});wUt("filterOut")});var vAe=M(()=>{"use strict";var EUt=re(),SUt=Ri().filterReject,IUt=xi();EUt({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return SUt(this,t,arguments.length>1?arguments[1]:void 0)}});IUt("filterReject")});var yAe=M(()=>{"use strict";uV()});var _Ae=M(()=>{"use strict";cV()});var bL=M((NBr,xAe)=>{"use strict";var TUt=xo(),MUt=vt(),CUt=ph(),AUt=pn(),DUt=kp(),NUt=Mn(),OUt=ki(),LUt=xh(),PUt=Array,kUt=MUt([].push);xAe.exports=function(e,t,r,n){for(var o=AUt(e),i=CUt(o),a=TUt(t,r),u=OUt(null),p=NUt(i),h=0,g,x,b;p>h;h++)b=i[h],x=DUt(a(b,h,o)),x in u?kUt(u[x],b):u[x]=[b];if(n&&(g=n(o),g!==PUt))for(x in u)u[x]=LUt(g,u[x]);return u}});var bAe=M(()=>{"use strict";var RUt=re(),jUt=bL(),qUt=xi();RUt({target:"Array",proto:!0},{group:function(t){var r=arguments.length>1?arguments[1]:void 0;return jUt(this,t,r)}});qUt("group")});var wAe=M(()=>{"use strict";var zUt=re(),FUt=bL(),UUt=Tc(),BUt=xi();zUt({target:"Array",proto:!0,forced:!UUt("groupBy")},{groupBy:function(t){var r=arguments.length>1?arguments[1]:void 0;return FUt(this,t,r)}});BUt("groupBy")});var gY=M((RBr,EAe)=>{"use strict";var VUt=xo(),GUt=vt(),HUt=ph(),WUt=pn(),$Ut=Mn(),wL=_a(),YUt=wL.Map,ZUt=wL.get,KUt=wL.has,XUt=wL.set,JUt=GUt([].push);EAe.exports=function(t){for(var r=WUt(this),n=HUt(r),o=VUt(t,arguments.length>1?arguments[1]:void 0),i=new YUt,a=$Ut(n),u=0,p,h;a>u;u++)h=n[u],p=o(h,u,r),KUt(i,p)?JUt(ZUt(i,p),h):XUt(i,p,[h]);return i}});var SAe=M(()=>{"use strict";var QUt=re(),eBt=Tc(),tBt=xi(),rBt=gY(),nBt=fn();QUt({target:"Array",proto:!0,name:"groupToMap",forced:nBt||!eBt("groupByToMap")},{groupByToMap:rBt});tBt("groupByToMap")});var IAe=M(()=>{"use strict";var oBt=re(),iBt=xi(),aBt=gY(),sBt=fn();oBt({target:"Array",proto:!0,forced:sBt},{groupToMap:aBt});iBt("groupToMap")});var CAe=M(()=>{"use strict";var lBt=re(),uBt=Lf(),TAe=Object.isFrozen,MAe=function(e,t){if(!TAe||!uBt(e)||!TAe(e))return!1;for(var r=0,n=e.length,o;r<n;)if(o=e[r++],!(typeof o=="string"||t&&o===void 0))return!1;return n!==0};lBt({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!MAe(t,!0))return!1;var r=t.raw;return r.length===t.length&&MAe(r,!1)}})});var AAe=M(()=>{"use strict";var cBt=Tr(),fBt=xi(),pBt=pn(),dBt=Mn(),hBt=ei();cBt&&(hBt(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=pBt(this),r=dBt(t);return r===0?0:r-1}}),fBt("lastIndex"))});var OAe=M(()=>{"use strict";var mBt=Tr(),gBt=xi(),DAe=pn(),NAe=Mn(),vBt=ei();mBt&&(vBt(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=DAe(this),r=NAe(t);return r===0?void 0:t[r-1]},set:function(t){var r=DAe(this),n=NAe(r);return r[n===0?0:n-1]=t}}),gBt("lastItem"))});var LAe=M(()=>{"use strict";DV()});var PAe=M(()=>{"use strict";OV()});var kAe=M(()=>{"use strict";LV()});var Cc=M((QBr,FAe)=>{"use strict";var RAe=vt(),yBt=Mh(),jAe=_a(),_Bt=jAe.Map,qAe=jAe.proto,xBt=RAe(qAe.forEach),zAe=RAe(qAe.entries),bBt=zAe(new _Bt).next;FAe.exports=function(e,t,r){return r?yBt({iterator:zAe(e),next:bBt},function(n){return t(n[1],n[0])}):xBt(e,t)}});var EL=M((eVr,UAe)=>{"use strict";var wBt=vt(),EBt=Rr(),SBt=oa(),IBt=Mn(),TBt=pn(),vY=_a(),MBt=Cc(),CBt=vY.Map,ABt=vY.has,DBt=vY.set,NBt=wBt([].push);UAe.exports=function(t){var r=TBt(this),n=IBt(r),o=[],i=new CBt,a=SBt(t)?function(g){return g}:EBt(t),u,p,h;for(u=0;u<n;u++)p=r[u],h=a(p),ABt(i,h)||DBt(i,h,p);return MBt(i,function(g){NBt(o,g)}),o}});var BAe=M(()=>{"use strict";var OBt=re(),LBt=xi(),PBt=EL();OBt({target:"Array",proto:!0,forced:!0},{uniqueBy:PBt});LBt("uniqueBy")});var VAe=M(()=>{"use strict";kV()});var GAe=M(()=>{"use strict";rG()});var HAe=M(()=>{"use strict";vG()});var WAe=M(()=>{"use strict";yG()});var _Y=M((fVr,XAe)=>{"use strict";var kBt=er(),RBt=vt(),jBt=xo(),qBt=Jt(),zBt=Rr(),ZAe=oa(),yY=Pi(),KAe=Nr(),FBt=KAe("asyncDispose"),$Ae=KAe("dispose"),UBt=RBt([].push),BBt=function(e,t){if(t==="async-dispose"){var r=yY(e,FBt);return r!==void 0||(r=yY(e,$Ae),r===void 0)?r:function(){kBt(r,this)}}return yY(e,$Ae)},YAe=function(e,t,r){return arguments.length<3&&!ZAe(e)&&(r=zBt(BBt(qBt(e),t))),r===void 0?function(){}:jBt(r,e)};XAe.exports=function(e,t,r,n){var o;if(arguments.length<4){if(ZAe(t)&&r==="sync-dispose")return;o=YAe(t,r)}else o=YAe(void 0,r,n);UBt(e.stack,o)}});var oDe=M(()=>{"use strict";var VBt=re(),IL=Tr(),eDe=Fr(),JAe=Rr(),GBt=Vs(),tDe=fo(),HBt=Mc(),WBt=ei(),rDe=Nr(),nDe=ro(),xY=_Y(),QAe=eDe("Promise"),$Bt=eDe("SuppressedError"),YBt=ReferenceError,ZBt=rDe("asyncDispose"),KBt=rDe("toStringTag"),ML="AsyncDisposableStack",XBt=nDe.set,TL=nDe.getterFor(ML),bY="async-dispose",ST="disposed",JBt="pending",SL=function(e){var t=TL(e);if(t.state===ST)throw new YBt(ML+" already disposed");return t},wY=function(){XBt(GBt(this,cb),{type:ML,state:JBt,stack:[]}),IL||(this.disposed=!1)},cb=wY.prototype;HBt(cb,{disposeAsync:function(){var t=this;return new QAe(function(r,n){var o=TL(t);if(o.state===ST)return r(void 0);o.state=ST,IL||(t.disposed=!0);var i=o.stack,a=i.length,u=!1,p,h=function(x){u?p=new $Bt(x,p):(u=!0,p=x),g()},g=function(){if(a){var x=i[--a];i[a]=null;try{QAe.resolve(x()).then(g,h)}catch(b){h(b)}}else o.stack=null,u?n(p):r(void 0)};g()})},use:function(t){return xY(SL(this),t,bY),t},adopt:function(t,r){var n=SL(this);return JAe(r),xY(n,void 0,bY,function(){return r(t)}),t},defer:function(t){var r=SL(this);JAe(t),xY(r,void 0,bY,t)},move:function(){var t=SL(this),r=new wY;return TL(r).stack=t.stack,t.stack=[],t.state=ST,IL||(this.disposed=!0),r}});IL&&WBt(cb,"disposed",{configurable:!0,get:function(){return TL(this).state===ST}});tDe(cb,ZBt,cb.disposeAsync,{name:"disposeAsync"});tDe(cb,KBt,ML,{nonWritable:!0});VBt({global:!0,constructor:!0},{AsyncDisposableStack:wY})});var uDe=M(()=>{"use strict";var QBt=re(),eVt=Vs(),tVt=sa(),aDe=aa(),sDe=sn(),rVt=Nr(),Xg=lb(),lDe=fn(),iDe=rVt("toStringTag"),nVt=TypeError,EY=function(){if(eVt(this,Xg),tVt(this)===Xg)throw new nVt("Abstract class AsyncIterator not directly constructable")};EY.prototype=Xg;sDe(Xg,iDe)||aDe(Xg,iDe,"AsyncIterator");(lDe||!sDe(Xg,"constructor")||Xg.constructor===Object)&&aDe(Xg,"constructor",EY);QBt({global:!0,constructor:!0,forced:lDe},{AsyncIterator:EY})});var E0=M((gVr,vDe)=>{"use strict";var oVt=er(),CL=Hg(),cDe=Jt(),iVt=ki(),aVt=aa(),sVt=Mc(),lVt=Nr(),pDe=ro(),uVt=Fr(),cVt=Pi(),fVt=lb(),SY=qa(),fDe=yh(),Hp=uVt("Promise"),pVt=lVt("toStringTag"),dDe="AsyncIteratorHelper",hDe="WrapForValidAsyncIterator",dVt=pDe.set,mDe=function(e){var t=!e,r=pDe.getterFor(e?hDe:dDe),n=function(o){var i=CL(function(){return r(o)}),a=i.error,u=i.value;return a||t&&u.done?{exit:!0,value:a?Hp.reject(u):Hp.resolve(SY(void 0,!0))}:{exit:!1,value:u}};return sVt(iVt(fVt),{next:function(){var i=n(this),a=i.value;if(i.exit)return a;var u=CL(function(){return cDe(a.nextHandler(Hp))}),p=u.error,h=u.value;return p&&(a.done=!0),p?Hp.reject(h):Hp.resolve(h)},return:function(){var o=n(this),i=o.value;if(o.exit)return i;i.done=!0;var a=i.iterator,u,p,h=CL(function(){if(i.inner)try{fDe(i.inner.iterator,"normal")}catch(g){return fDe(a,"throw",g)}return cVt(a,"return")});return u=p=h.value,h.error?Hp.reject(p):u===void 0?Hp.resolve(SY(void 0,!0)):(h=CL(function(){return oVt(u,a)}),p=h.value,h.error?Hp.reject(p):e?Hp.resolve(p):Hp.resolve(p).then(function(g){return cDe(g),SY(void 0,!0)}))}})},hVt=mDe(!0),gDe=mDe(!1);aVt(gDe,pVt,"Async Iterator Helper");vDe.exports=function(e,t){var r=function(o,i){i?(i.iterator=o.iterator,i.next=o.next):i=o,i.type=t?hDe:dDe,i.nextHandler=e,i.counter=0,i.done=!1,dVt(this,i)};return r.prototype=t?hVt:gDe,r}});var TY=M((vVr,_De)=>{"use strict";var mVt=er(),gVt=Rr(),IY=Jt(),vVt=Br(),yVt=ui(),_Vt=E0(),yDe=qa(),xVt=ub(),bVt=_Vt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(p){t.done=!0,i(p)},u=function(p){xVt(r,a,p,a)};e.resolve(IY(mVt(t.next,r))).then(function(p){try{if(IY(p).done)t.done=!0,o(yDe(void 0,!0));else{var h=p.value;try{var g=n(h,t.counter++),x=function(b){o(yDe(b,!1))};vVt(g)?e.resolve(g).then(x,u):x(g)}catch(b){u(b)}}}catch(b){a(b)}},a)})});_De.exports=function(t){return IY(this),gVt(t),new bVt(yVt(this),{mapper:t})}});var MY=M((yVr,xDe)=>{"use strict";var wVt=er(),EVt=TY(),SVt=function(e,t){return[t,e]};xDe.exports=function(){return wVt(EVt,this,SVt)}});var bDe=M(()=>{"use strict";var IVt=re(),TVt=MY();IVt({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:TVt})});var IDe=M(()=>{"use strict";var MVt=er(),CVt=fo(),AVt=Fr(),DVt=Pi(),NVt=sn(),OVt=Nr(),wDe=lb(),EDe=OVt("asyncDispose"),SDe=AVt("Promise");NVt(wDe,EDe)||CVt(wDe,EDe,function(){var e=this;return new SDe(function(t,r){var n=DVt(e,"return");n?SDe.resolve(MVt(n,e)).then(function(){t(void 0)},r):t(void 0)})})});var MDe=M(()=>{"use strict";var LVt=re(),PVt=er(),CY=Jt(),kVt=ui(),RVt=FI(),jVt=qx(),qVt=E0(),TDe=qa(),zVt=fn(),FVt=qVt(function(e){var t=this;return new e(function(r,n){var o=function(a){t.done=!0,n(a)},i=function(){try{e.resolve(CY(PVt(t.next,t.iterator))).then(function(a){try{CY(a).done?(t.done=!0,r(TDe(void 0,!0))):t.remaining?(t.remaining--,i()):r(TDe(a.value,!1))}catch(u){o(u)}},o)}catch(a){o(a)}};i()})});LVt({target:"AsyncIterator",proto:!0,real:!0,forced:zVt},{drop:function(t){CY(this);var r=jVt(RVt(+t));return new FVt(kVt(this),{remaining:r})}})});var CDe=M(()=>{"use strict";var UVt=re(),BVt=w0().every;UVt({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return BVt(this,t)}})});var DDe=M(()=>{"use strict";var VVt=re(),GVt=er(),HVt=Rr(),AY=Jt(),WVt=Br(),$Vt=ui(),YVt=E0(),ADe=qa(),ZVt=ub(),KVt=fn(),XVt=YVt(function(e){var t=this,r=t.iterator,n=t.predicate;return new e(function(o,i){var a=function(h){t.done=!0,i(h)},u=function(h){ZVt(r,a,h,a)},p=function(){try{e.resolve(AY(GVt(t.next,r))).then(function(h){try{if(AY(h).done)t.done=!0,o(ADe(void 0,!0));else{var g=h.value;try{var x=n(g,t.counter++),b=function(T){T?o(ADe(g,!1)):p()};WVt(x)?e.resolve(x).then(b,u):b(x)}catch(T){u(T)}}}catch(T){a(T)}},a)}catch(h){a(h)}};p()})});VVt({target:"AsyncIterator",proto:!0,real:!0,forced:KVt},{filter:function(t){return AY(this),HVt(t),new XVt($Vt(this),{predicate:t})}})});var NDe=M(()=>{"use strict";var JVt=re(),QVt=w0().find;JVt({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return QVt(this,t)}})});var DY=M((NVr,PDe)=>{"use strict";var eGt=er(),tGt=Kr(),ODe=Jt(),LDe=ui(),rGt=jp(),nGt=Pi(),oGt=Nr(),iGt=wT(),aGt=oGt("asyncIterator");PDe.exports=function(e){var t=ODe(e),r=!0,n=nGt(t,aGt),o;return tGt(n)||(n=rGt(t),r=!1),n!==void 0?o=eGt(n,t):(o=t,r=!0),ODe(o),LDe(r?o:new iGt(LDe(o)))}});var jDe=M(()=>{"use strict";var sGt=re(),kDe=er(),lGt=Rr(),IT=Jt(),uGt=Br(),cGt=ui(),fGt=E0(),RDe=qa(),pGt=DY(),dGt=ub(),hGt=fn(),mGt=fGt(function(e){var t=this,r=t.iterator,n=t.mapper;return new e(function(o,i){var a=function(g){t.done=!0,i(g)},u=function(g){dGt(r,a,g,a)},p=function(){try{e.resolve(IT(kDe(t.next,r))).then(function(g){try{if(IT(g).done)t.done=!0,o(RDe(void 0,!0));else{var x=g.value;try{var b=n(x,t.counter++),T=function(A){try{t.inner=pGt(A),h()}catch(L){u(L)}};uGt(b)?e.resolve(b).then(T,u):T(b)}catch(A){u(A)}}}catch(A){a(A)}},a)}catch(g){a(g)}},h=function(){var g=t.inner;if(g)try{e.resolve(IT(kDe(g.next,g.iterator))).then(function(x){try{IT(x).done?(t.inner=null,p()):o(RDe(x.value,!1))}catch(b){u(b)}},u)}catch(x){u(x)}else p()};h()})});sGt({target:"AsyncIterator",proto:!0,real:!0,forced:hGt},{flatMap:function(t){return IT(this),lGt(t),new mGt(cGt(this),{mapper:t,inner:null})}})});var qDe=M(()=>{"use strict";var gGt=re(),vGt=w0().forEach;gGt({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return vGt(this,t)}})});var NY=M((RVr,zDe)=>{"use strict";var yGt=er(),_Gt=E0();zDe.exports=_Gt(function(){return yGt(this.next,this.iterator)},!0)});var FDe=M(()=>{"use strict";var xGt=re(),bGt=pn(),wGt=ss(),EGt=DY(),SGt=lb(),IGt=NY(),TGt=fn();xGt({target:"AsyncIterator",stat:!0,forced:TGt},{from:function(t){var r=EGt(typeof t=="string"?bGt(t):t);return wGt(SGt,r.iterator)?r.iterator:new IGt(r)}})});var UDe=M(()=>{"use strict";var MGt=re(),CGt=MY();MGt({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:CGt})});var BDe=M(()=>{"use strict";var AGt=re(),DGt=TY(),NGt=fn();AGt({target:"AsyncIterator",proto:!0,real:!0,forced:NGt},{map:DGt})});var VDe=M(()=>{"use strict";var OGt=re(),LGt=er(),PGt=Rr(),OY=Jt(),kGt=Br(),RGt=Fr(),jGt=ui(),qGt=ub(),LY=RGt("Promise"),zGt=TypeError;OGt({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){OY(this),PGt(t);var r=jGt(this),n=r.iterator,o=r.next,i=arguments.length<2,a=i?void 0:arguments[1],u=0;return new LY(function(p,h){var g=function(b){qGt(n,h,b,h)},x=function(){try{LY.resolve(OY(LGt(o,n))).then(function(b){try{if(OY(b).done)i?h(new zGt("Reduce of empty iterator with no initial value")):p(a);else{var T=b.value;if(i)i=!1,a=T,x();else try{var A=t(a,T,u),L=function(P){a=P,x()};kGt(A)?LY.resolve(A).then(L,g):L(A)}catch(P){g(P)}}u++}catch(P){h(P)}},h)}catch(b){h(b)}};x()})}})});var GDe=M(()=>{"use strict";var FGt=re(),UGt=w0().some;FGt({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return UGt(this,t)}})});var $De=M(()=>{"use strict";var BGt=re(),HDe=er(),WDe=Jt(),VGt=ui(),GGt=FI(),HGt=qx(),WGt=E0(),PY=qa(),$Gt=fn(),YGt=WGt(function(e){var t=this,r=t.iterator,n;if(!t.remaining--){var o=PY(void 0,!0);return t.done=!0,n=r.return,n!==void 0?e.resolve(HDe(n,r,void 0)).then(function(){return o}):o}return e.resolve(HDe(t.next,r)).then(function(i){return WDe(i).done?(t.done=!0,PY(void 0,!0)):PY(i.value,!1)}).then(null,function(i){throw t.done=!0,i})});BGt({target:"AsyncIterator",proto:!0,real:!0,forced:$Gt},{take:function(t){WDe(this);var r=HGt(GGt(+t));return new YGt(VGt(this),{remaining:r})}})});var YDe=M(()=>{"use strict";var ZGt=re(),KGt=w0().toArray;ZGt({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return KGt(this,void 0,[])}})});var DL=M((XVr,e4e)=>{"use strict";var KDe=ro(),XGt=kg(),kY=qa(),JGt=oa(),QGt=Br(),eHt=ei(),XDe=Tr(),TT="Incorrect Iterator.range arguments",jY="NumericRangeIterator",tHt=KDe.set,JDe=KDe.getterFor(jY),ZDe=RangeError,RY=TypeError,QDe=XGt(function(t,r,n,o,i,a){if(typeof t!=o||r!==1/0&&r!==-1/0&&typeof r!=o)throw new RY(TT);if(t===1/0||t===-1/0)throw new ZDe(TT);var u=r>t,p=!1,h;if(n===void 0)h=void 0;else if(QGt(n))h=n.step,p=!!n.inclusive;else if(typeof n==o)h=n;else throw new RY(TT);if(JGt(h)&&(h=u?a:-a),typeof h!=o)throw new RY(TT);if(h===1/0||h===-1/0||h===i&&t!==r)throw new ZDe(TT);var g=t!==t||r!==r||h!==h||r>t!=h>i;tHt(this,{type:jY,start:t,end:r,step:h,inclusive:p,hitsEnd:g,currentCount:i,zero:i}),XDe||(this.start=t,this.end=r,this.step=h,this.inclusive=p)},jY,function(){var t=JDe(this);if(t.hitsEnd)return kY(void 0,!0);var r=t.start,n=t.end,o=t.step,i=r+o*t.currentCount++;i===n&&(t.hitsEnd=!0);var a=t.inclusive,u;return n>r?u=a?i>n:i>=n:u=a?n>i:n>=i,u?(t.hitsEnd=!0,kY(void 0,!0)):kY(i,!1)}),AL=function(e){eHt(QDe.prototype,e,{get:function(){return JDe(this)[e]},set:function(){},configurable:!0,enumerable:!1})};XDe&&(AL("start"),AL("end"),AL("inclusive"),AL("step"));e4e.exports=QDe});var t4e=M(()=>{"use strict";var rHt=re(),nHt=DL();typeof BigInt=="function"&&rHt({target:"BigInt",stat:!0,forced:!0},{range:function(t,r,n){return new nHt(t,r,n,"bigint",BigInt(0),BigInt(1))}})});var qY=M((eGr,i4e)=>{"use strict";vO();mL();var o4e=Fr(),oHt=ki(),r4e=Br(),iHt=Object,aHt=TypeError,sHt=o4e("Map"),lHt=o4e("WeakMap"),NL=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=oHt(null)};NL.prototype.get=function(e,t){return this[e]||(this[e]=t())};NL.prototype.next=function(e,t,r){var n=r?this.objectsByIndex[e]||(this.objectsByIndex[e]=new lHt):this.primitives||(this.primitives=new sHt),o=n.get(t);return o||n.set(t,o=new NL),o};var n4e=new NL;i4e.exports=function(){var e=n4e,t=arguments.length,r,n;for(r=0;r<t;r++)r4e(n=arguments[r])&&(e=e.next(r,n,!0));if(this===iHt&&e===n4e)throw new aHt("Composite keys must contain a non-primitive component");for(r=0;r<t;r++)r4e(n=arguments[r])||(e=e.next(r,n,!1));return e}});var s4e=M(()=>{"use strict";var uHt=re(),cHt=Bs(),fHt=qY(),pHt=Fr(),a4e=ki(),dHt=Object,hHt=function(){var e=pHt("Object","freeze");return e?e(a4e(null)):a4e(null)};uHt({global:!0,forced:!0},{compositeKey:function(){return cHt(fHt,dHt,arguments).get("object",hHt)}})});var u4e=M(()=>{"use strict";var mHt=re(),gHt=qY(),l4e=Fr(),vHt=Bs();mHt({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?l4e("Symbol").for(arguments[0]):vHt(gHt,null,arguments).get("symbol",l4e("Symbol"))}})});var c4e=M(()=>{"use strict";var yHt=re(),_Ht=vt(),xHt=Q5().unpack,bHt=_Ht(DataView.prototype.getUint16);yHt({target:"DataView",proto:!0},{getFloat16:function(t){var r=bHt(this,t,arguments.length>1?arguments[1]:!1);return xHt([r&255,r>>8&255],10)}})});var f4e=M(()=>{"use strict";var wHt=re(),EHt=vt(),SHt=EHt(DataView.prototype.getUint8);wHt({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return SHt(this,t)}})});var zY=M((uGr,p4e)=>{"use strict";var IHt=ru(),THt=TypeError;p4e.exports=function(e){if(IHt(e)==="DataView")return e;throw new THt("Argument is not a DataView")}});var FY=M((cGr,d4e)=>{"use strict";var MHt=RV(),CHt=.0009765625,AHt=65504,DHt=6103515625e-14;d4e.exports=Math.f16round||function(t){return MHt(t,CHt,AHt,DHt)}});var h4e=M(()=>{"use strict";var NHt=re(),OHt=vt(),LHt=zY(),PHt=Nx(),kHt=Q5().pack,RHt=FY(),jHt=OHt(DataView.prototype.setUint16);NHt({target:"DataView",proto:!0},{setFloat16:function(t,r){LHt(this);var n=PHt(t),o=kHt(RHt(r),10,2);return jHt(this,n,o[1]<<8|o[0],arguments.length>2?arguments[2]:!1)}})});var m4e=M(()=>{"use strict";var qHt=re(),zHt=vt(),FHt=zY(),UHt=Nx(),BHt=C$(),VHt=zHt(DataView.prototype.setUint8);qHt({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,r){FHt(this);var n=UHt(t);return VHt(this,n,BHt(r))}})});var x4e=M(()=>{"use strict";var GHt=re(),LL=Tr(),HHt=Fr(),g4e=Rr(),WHt=Vs(),v4e=fo(),$Ht=Mc(),YHt=ei(),y4e=Nr(),_4e=ro(),UY=_Y(),ZHt=HHt("SuppressedError"),KHt=ReferenceError,XHt=y4e("dispose"),JHt=y4e("toStringTag"),kL="DisposableStack",QHt=_4e.set,PL=_4e.getterFor(kL),BY="sync-dispose",MT="disposed",eWt="pending",OL=function(e){var t=PL(e);if(t.state===MT)throw new KHt(kL+" already disposed");return t},VY=function(){QHt(WHt(this,fb),{type:kL,state:eWt,stack:[]}),LL||(this.disposed=!1)},fb=VY.prototype;$Ht(fb,{dispose:function(){var t=PL(this);if(t.state!==MT){t.state=MT,LL||(this.disposed=!0);for(var r=t.stack,n=r.length,o=!1,i;n;){var a=r[--n];r[n]=null;try{a()}catch(u){o?i=new ZHt(u,i):(o=!0,i=u)}}if(t.stack=null,o)throw i}},use:function(t){return UY(OL(this),t,BY),t},adopt:function(t,r){var n=OL(this);return g4e(r),UY(n,void 0,BY,function(){r(t)}),t},defer:function(t){var r=OL(this);g4e(t),UY(r,void 0,BY,t)},move:function(){var t=OL(this),r=new VY;return PL(r).stack=t.stack,t.stack=[],t.state=MT,LL||(this.disposed=!0),r}});LL&&YHt(fb,"disposed",{configurable:!0,get:function(){return PL(this).state===MT}});v4e(fb,XHt,fb.dispose,{name:"dispose"});v4e(fb,JHt,kL,{nonWritable:!0});GHt({global:!0,constructor:!0},{DisposableStack:VY})});var GY=M((vGr,b4e)=>{"use strict";var tWt=vt(),rWt=Rr();b4e.exports=function(){return tWt(rWt(this))}});var w4e=M(()=>{"use strict";var nWt=re(),oWt=GY();nWt({target:"Function",proto:!0,forced:!0},{demethodize:oWt})});var S4e=M(()=>{"use strict";var iWt=re(),aWt=vt(),sWt=Kr(),lWt=fI(),uWt=sn(),cWt=Tr(),fWt=Object.getOwnPropertyDescriptor,E4e=/^\s*class\b/,pWt=aWt(E4e.exec),dWt=function(e){try{if(!cWt||!pWt(E4e,lWt(e)))return!1}catch(r){}var t=fWt(e,"prototype");return!!t&&uWt(t,"writable")&&!t.writable};iWt({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return sWt(t)&&!dWt(t)}})});var I4e=M(()=>{"use strict";var hWt=re(),mWt=Pf();hWt({target:"Function",stat:!0,forced:!0},{isConstructor:mWt})});var C4e=M(()=>{"use strict";var gWt=Nr(),vWt=ko().f,T4e=gWt("metadata"),M4e=Function.prototype;M4e[T4e]===void 0&&vWt(M4e,T4e,{value:null})});var A4e=M(()=>{"use strict";var yWt=re(),_Wt=GY();yWt({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:_Wt})});var D4e=M(()=>{"use strict";IG()});var N4e=M(()=>{"use strict";DG()});var HY=M((OGr,O4e)=>{"use strict";var xWt=er(),bWt=VG(),wWt=function(e,t){return[t,e]};O4e.exports=function(){return xWt(bWt,this,wWt)}});var L4e=M(()=>{"use strict";var EWt=re(),SWt=HY();EWt({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:SWt})});var R4e=M(()=>{"use strict";var IWt=re(),P4e=er(),TWt=Rr(),k4e=Jt(),MWt=jp(),CWt=Vg(),AWt=Array,DWt=CWt(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,r=this.iterables;if(t>=r.length){this.done=!0;return}var n=r[t];this.iterables[t]=null,e=this.iterator=P4e(n.method,n.iterable),this.next=e.next}var o=k4e(P4e(this.next,e));if(o.done){this.iterator=null,this.next=null;continue}return o.value}});IWt({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,r=AWt(t),n=0;n<t;n++){var o=k4e(arguments[n]);r[n]={iterable:o,method:TWt(MWt(o))}}return new DWt({iterables:r,nextIterableIndex:0,iterator:null,next:null})}})});var z4e=M(()=>{"use strict";var NWt=er(),OWt=fo(),LWt=Pi(),PWt=sn(),kWt=Nr(),j4e=u0().IteratorPrototype,q4e=kWt("dispose");PWt(j4e,q4e)||OWt(j4e,q4e,function(){var e=LWt(this,"return");e&&NWt(e,this)})});var F4e=M(()=>{"use strict";PG()});var U4e=M(()=>{"use strict";kG()});var B4e=M(()=>{"use strict";RG()});var V4e=M(()=>{"use strict";jG()});var G4e=M(()=>{"use strict";FG()});var H4e=M(()=>{"use strict";UG()});var W4e=M(()=>{"use strict";BG()});var $4e=M(()=>{"use strict";var RWt=re(),jWt=HY();RWt({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:jWt})});var Y4e=M(()=>{"use strict";GG()});var K4e=M(()=>{"use strict";var qWt=re(),Z4e=DL(),zWt=TypeError;qWt({target:"Iterator",stat:!0,forced:!0},{range:function(t,r,n){if(typeof t=="number")return new Z4e(t,r,n,"number",0,1);if(typeof t=="bigint")return new Z4e(t,r,n,"bigint",BigInt(0),BigInt(1));throw new zWt("Incorrect Iterator.range arguments")}})});var X4e=M(()=>{"use strict";HG()});var J4e=M(()=>{"use strict";WG()});var Q4e=M(()=>{"use strict";$G()});var eNe=M(()=>{"use strict";YG()});var rNe=M(()=>{"use strict";var FWt=re(),UWt=Jt(),BWt=wT(),VWt=NY(),tNe=ui(),GWt=fn();FWt({target:"Iterator",proto:!0,real:!0,forced:GWt},{toAsync:function(){return new VWt(tNe(new BWt(tNe(UWt(this)))))}})});var WY=M((mHr,nNe)=>{"use strict";var HWt=Tt();nNe.exports=!HWt(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var $Y=M((gHr,oNe)=>{"use strict";var WWt=Br(),$Wt=ro().get;oNe.exports=function(t){if(!WWt(t))return!1;var r=$Wt(t);return!!r&&r.type==="RawJSON"}});var iNe=M(()=>{"use strict";var YWt=re(),ZWt=WY(),KWt=$Y();YWt({target:"JSON",stat:!0,forced:!ZWt},{isRawJSON:KWt})});var ZY=M((_Hr,uNe)=>{"use strict";var YY=vt(),XWt=sn(),RL=SyntaxError,JWt=parseInt,QWt=String.fromCharCode,e$t=YY("".charAt),aNe=YY("".slice),sNe=YY(/./.exec),lNe={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},t$t=/^[\da-f]{4}$/i,r$t=/^[\u0000-\u001F]$/;uNe.exports=function(e,t){for(var r=!0,n="";t<e.length;){var o=e$t(e,t);if(o==="\\"){var i=aNe(e,t,t+2);if(XWt(lNe,i))n+=lNe[i],t+=2;else if(i==="\\u"){t+=2;var a=aNe(e,t,t+4);if(!sNe(t$t,a))throw new RL("Bad Unicode escape at: "+t);n+=QWt(JWt(a,16)),t+=4}else throw new RL("Unknown escape sequence: \""+i+"\"")}else if(o==="\""){r=!1,t++;break}else{if(sNe(r$t,o))throw new RL("Bad control character in string literal at: "+t);n+=o,t++}}if(r)throw new RL("Unterminated string at: "+t);return{value:n,end:t}}});var vNe=M(()=>{"use strict";var n$t=re(),o$t=Tr(),nZ=$t(),i$t=Fr(),jL=vt(),a$t=er(),mNe=Kr(),s$t=Br(),l$t=Lf(),u$t=sn(),c$t=Hr(),cNe=Mn(),eZ=Ic(),gNe=Tt(),f$t=ZY(),p$t=Tg(),fNe=nZ.JSON,d$t=nZ.Number,pb=nZ.SyntaxError,oZ=fNe&&fNe.parse,h$t=i$t("Object","keys"),m$t=Object.getOwnPropertyDescriptor,us=jL("".charAt),KY=jL("".slice),XY=jL(/./.exec),pNe=jL([].push),JY=/^\d$/,g$t=/^[1-9]$/,v$t=/^[\d-]$/,CT=/^[\t\n\r ]$/,QY=0,dNe=1,y$t=function(e,t){e=c$t(e);var r=new rZ(e,0,""),n=r.parse(),o=n.value,i=r.skip(CT,n.end);if(i<e.length)throw new pb("Unexpected extra character: \""+us(e,i)+"\" after the parsed data at: "+i);return mNe(t)?tZ({"":o},"",t,n):o},tZ=function(e,t,r,n){var o=e[t],i=n&&o===n.value,a=i&&typeof n.source=="string"?{source:n.source}:{},u,p,h,g,x;if(s$t(o)){var b=l$t(o),T=i?n.nodes:b?[]:{};if(b)for(u=T.length,h=cNe(o),g=0;g<h;g++)hNe(o,g,tZ(o,""+g,r,g<u?T[g]:void 0));else for(p=h$t(o),h=cNe(p),g=0;g<h;g++)x=p[g],hNe(o,x,tZ(o,x,r,u$t(T,x)?T[x]:void 0))}return a$t(r,e,t,o,a)},hNe=function(e,t,r){if(o$t){var n=m$t(e,t);if(n&&!n.configurable)return}r===void 0?delete e[t]:eZ(e,t,r)},_$t=function(e,t,r,n){this.value=e,this.end=t,this.source=r,this.nodes=n},rZ=function(e,t){this.source=e,this.index=t};rZ.prototype={fork:function(e){return new rZ(this.source,e)},parse:function(){var e=this.source,t=this.skip(CT,this.index),r=this.fork(t),n=us(e,t);if(XY(v$t,n))return r.number();switch(n){case"{":return r.object();case"[":return r.array();case"\"":return r.string();case"t":return r.keyword(!0);case"f":return r.keyword(!1);case"n":return r.keyword(null);}throw new pb("Unexpected character: \""+n+"\" at: "+t)},node:function(e,t,r,n,o){return new _$t(t,n,e?null:KY(this.source,r,n),o)},object:function(){for(var e=this.source,t=this.index+1,r=!1,n={},o={};t<e.length;){if(t=this.until(["\"","}"],t),us(e,t)==="}"&&!r){t++;break}var i=this.fork(t).string(),a=i.value;t=i.end,t=this.until([":"],t)+1,t=this.skip(CT,t),i=this.fork(t).parse(),eZ(o,a,i),eZ(n,a,i.value),t=this.until([",","}"],i.end);var u=us(e,t);if(u===",")r=!0,t++;else if(u==="}"){t++;break}}return this.node(dNe,n,this.index,t,o)},array:function(){for(var e=this.source,t=this.index+1,r=!1,n=[],o=[];t<e.length;){if(t=this.skip(CT,t),us(e,t)==="]"&&!r){t++;break}var i=this.fork(t).parse();if(pNe(o,i),pNe(n,i.value),t=this.until([",","]"],i.end),us(e,t)===",")r=!0,t++;else if(us(e,t)==="]"){t++;break}}return this.node(dNe,n,this.index,t,o)},string:function(){var e=this.index,t=f$t(this.source,this.index+1);return this.node(QY,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,r=t;if(us(e,r)==="-"&&r++,us(e,r)==="0")r++;else if(XY(g$t,us(e,r)))r=this.skip(JY,r+1);else throw new pb("Failed to parse number at: "+r);if(us(e,r)==="."&&(r=this.skip(JY,r+1)),us(e,r)==="e"||us(e,r)==="E"){r++,(us(e,r)==="+"||us(e,r)==="-")&&r++;var n=r;if(r=this.skip(JY,r),n===r)throw new pb("Failed to parse number's exponent value at: "+r)}return this.node(QY,d$t(KY(e,t,r)),t,r)},keyword:function(e){var t=""+e,r=this.index,n=r+t.length;if(KY(this.source,r,n)!==t)throw new pb("Failed to parse value at: "+r);return this.node(QY,e,r,n)},skip:function(e,t){for(var r=this.source;t<r.length&&XY(e,us(r,t));t++);return t},until:function(e,t){t=this.skip(CT,t);for(var r=us(this.source,t),n=0;n<e.length;n++)if(e[n]===r)return t;throw new pb("Unexpected character: \""+r+"\" at: "+t)}};var x$t=gNe(function(){var e="9007199254740993",t;return oZ(e,function(r,n,o){t=o.source}),t!==e}),b$t=p$t&&!gNe(function(){return 1/oZ("-0 \t")!==-1/0});n$t({target:"JSON",stat:!0,forced:x$t},{parse:function(t,r){return b$t&&!mNe(r)?oZ(t):y$t(t,r)}})});var INe=M(()=>{"use strict";var ENe=re(),w$t=Ih(),SNe=WY(),qL=Fr(),E$t=er(),lZ=vt(),S$t=Kr(),I$t=$Y(),T$t=Hr(),M$t=Ic(),C$t=ZY(),A$t=qB(),D$t=Cg(),N$t=ro().set,O$t=String,yNe=SyntaxError,L$t=qL("JSON","parse"),_Ne=qL("JSON","stringify"),P$t=qL("Object","create"),k$t=qL("Object","freeze"),aZ=lZ("".charAt),iZ=lZ("".slice),R$t=lZ([].push),sZ=D$t(),xNe=sZ.length,bNe="Unacceptable as raw JSON",wNe=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};ENe({target:"JSON",stat:!0,forced:!SNe},{rawJSON:function(t){var r=T$t(t);if(r===""||wNe(aZ(r,0))||wNe(aZ(r,r.length-1)))throw new yNe(bNe);var n=L$t(r);if(typeof n=="object"&&n!==null)throw new yNe(bNe);var o=P$t(null);return N$t(o,{type:"RawJSON"}),M$t(o,"rawJSON",r),w$t?k$t(o):o}});_Ne&&ENe({target:"JSON",stat:!0,arity:3,forced:!SNe},{stringify:function(t,r,n){var o=A$t(r),i=[],a=_Ne(t,function(T,A){var L=S$t(o)?E$t(o,this,O$t(T),A):A;return I$t(L)?sZ+(R$t(i,L.rawJSON)-1):L},n);if(typeof a!="string")return a;for(var u="",p=a.length,h=0;h<p;h++){var g=aZ(a,h);if(g==="\""){var x=C$t(a,++h).end-1,b=iZ(a,h,x);u+=iZ(b,0,xNe)===sZ?i[iZ(b,xNe)]:"\""+b+"\"",h=x}else u+=g}return u}})});var cs=M((SHr,TNe)=>{"use strict";var j$t=_a().has;TNe.exports=function(e){return j$t(e),e}});var MNe=M(()=>{"use strict";var q$t=re(),z$t=cs(),F$t=_a().remove;q$t({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=z$t(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=F$t(t,arguments[o]),r=r&&n;return!!r}})});var ANe=M(()=>{"use strict";var U$t=re(),B$t=cs(),uZ=_a(),V$t=uZ.get,G$t=uZ.has,CNe=uZ.set;U$t({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=B$t(this),o,i;return G$t(n,t)?(o=V$t(n,t),"update"in r&&(o=r.update(o,t,n),CNe(n,t,o)),o):(i=r.insert(t,n),CNe(n,t,i),i)}})});var DNe=M(()=>{"use strict";var H$t=re(),W$t=xo(),$$t=cs(),Y$t=Cc();H$t({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var r=$$t(this),n=W$t(t,arguments.length>1?arguments[1]:void 0);return Y$t(r,function(o,i){if(!n(o,i,r))return!1},!0)!==!1}})});var ONe=M(()=>{"use strict";var Z$t=re(),K$t=xo(),X$t=cs(),NNe=_a(),J$t=Cc(),Q$t=NNe.Map,eYt=NNe.set;Z$t({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var r=X$t(this),n=K$t(t,arguments.length>1?arguments[1]:void 0),o=new Q$t;return J$t(r,function(i,a){n(i,a,r)&&eYt(o,a,i)}),o}})});var LNe=M(()=>{"use strict";var tYt=re(),rYt=xo(),nYt=cs(),oYt=Cc();tYt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var r=nYt(this),n=rYt(t,arguments.length>1?arguments[1]:void 0),o=oYt(r,function(i,a){if(n(i,a,r))return{value:i}},!0);return o&&o.value}})});var PNe=M(()=>{"use strict";var iYt=re(),aYt=xo(),sYt=cs(),lYt=Cc();iYt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var r=sYt(this),n=aYt(t,arguments.length>1?arguments[1]:void 0),o=lYt(r,function(i,a){if(n(i,a,r))return{key:a}},!0);return o&&o.key}})});var AT=M((jHr,kNe)=>{"use strict";var uYt=xo(),cYt=Jt(),fYt=pn(),pYt=_i();kNe.exports=function(e,t,r){return function(o){var i=fYt(o),a=arguments.length,u=a>1?arguments[1]:void 0,p=u!==void 0,h=p?uYt(u,a>2?arguments[2]:void 0):void 0,g=new e,x=0;return pYt(i,function(b){var T=p?h(b,x++):b;r?t(g,cYt(T)[0],T[1]):t(g,T)}),g}}});var jNe=M(()=>{"use strict";var dYt=re(),RNe=_a(),hYt=AT();dYt({target:"Map",stat:!0,forced:!0},{from:hYt(RNe.Map,RNe.set,!0)})});var qNe=M(()=>{"use strict";var mYt=re(),gYt=cs(),cZ=_a(),vYt=cZ.get,yYt=cZ.has,_Yt=cZ.set;mYt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return yYt(gYt(this),t)?vYt(this,t):(_Yt(this,t,r),r)}})});var zNe=M(()=>{"use strict";var xYt=re(),bYt=Rr(),wYt=cs(),fZ=_a(),EYt=fZ.get,SYt=fZ.has,IYt=fZ.set;xYt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(wYt(this),bYt(r),SYt(this,t))return EYt(this,t);t===0&&1/t===-1/0&&(t=0);var n=r(t);return IYt(this,t,n),n}})});var FNe=M(()=>{"use strict";rH()});var BNe=M((WHr,UNe)=>{"use strict";UNe.exports=function(e,t){return e===t||e!==e&&t!==t}});var VNe=M(()=>{"use strict";var TYt=re(),MYt=BNe(),CYt=cs(),AYt=Cc();TYt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return AYt(CYt(this),function(r){if(MYt(r,t))return!0},!0)===!0}})});var HNe=M(()=>{"use strict";var DYt=re(),NYt=er(),OYt=_i(),LYt=Kr(),GNe=Rr(),PYt=_a().Map;DYt({target:"Map",stat:!0,forced:!0},{keyBy:function(t,r){var n=LYt(this)?this:PYt,o=new n;GNe(r);var i=GNe(o.set);return OYt(t,function(a){NYt(i,o,r(a),a)}),o}})});var WNe=M(()=>{"use strict";var kYt=re(),RYt=cs(),jYt=Cc();kYt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var r=jYt(RYt(this),function(n,o){if(n===t)return{key:o}},!0);return r&&r.key}})});var YNe=M(()=>{"use strict";var qYt=re(),zYt=xo(),FYt=cs(),$Ne=_a(),UYt=Cc(),BYt=$Ne.Map,VYt=$Ne.set;qYt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var r=FYt(this),n=zYt(t,arguments.length>1?arguments[1]:void 0),o=new BYt;return UYt(r,function(i,a){VYt(o,n(i,a,r),i)}),o}})});var KNe=M(()=>{"use strict";var GYt=re(),HYt=xo(),WYt=cs(),ZNe=_a(),$Yt=Cc(),YYt=ZNe.Map,ZYt=ZNe.set;GYt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var r=WYt(this),n=HYt(t,arguments.length>1?arguments[1]:void 0),o=new YYt;return $Yt(r,function(i,a){ZYt(o,a,n(i,a,r))}),o}})});var XNe=M(()=>{"use strict";var KYt=re(),XYt=cs(),JYt=_i(),QYt=_a().set;KYt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var r=XYt(this),n=arguments.length,o=0;o<n;)JYt(arguments[o++],function(i,a){QYt(r,i,a)},{AS_ENTRIES:!0});return r}})});var DT=M((iWr,JNe)=>{"use strict";var eZt=Jt();JNe.exports=function(e,t,r){return function(){for(var o=new e,i=arguments.length,a=0;a<i;a++){var u=arguments[a];r?t(o,eZt(u)[0],u[1]):t(o,u)}return o}}});var e5e=M(()=>{"use strict";var tZt=re(),QNe=_a(),rZt=DT();tZt({target:"Map",stat:!0,forced:!0},{of:rZt(QNe.Map,QNe.set,!0)})});var t5e=M(()=>{"use strict";var nZt=re(),oZt=Rr(),iZt=cs(),aZt=Cc(),sZt=TypeError;nZt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=iZt(this),n=arguments.length<2,o=n?void 0:arguments[1];if(oZt(t),aZt(r,function(i,a){n?(n=!1,o=i):o=t(o,i,a,r)}),n)throw new sZt("Reduce of empty map with no initial value");return o}})});var r5e=M(()=>{"use strict";var lZt=re(),uZt=xo(),cZt=cs(),fZt=Cc();lZt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var r=cZt(this),n=uZt(t,arguments.length>1?arguments[1]:void 0);return fZt(r,function(o,i){if(n(o,i,r))return!0},!0)===!0}})});var o5e=M(()=>{"use strict";var pZt=re(),n5e=Rr(),dZt=cs(),pZ=_a(),hZt=TypeError,mZt=pZ.get,gZt=pZ.has,vZt=pZ.set;pZt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,r){var n=dZt(this),o=arguments.length;n5e(r);var i=gZt(n,t);if(!i&&o<3)throw new hZt("Updating absent value");var a=i?mZt(n,t):n5e(o>2?arguments[2]:void 0)(t,n);return vZt(n,t,r(a,t,n)),n}})});var UL=M((hWr,i5e)=>{"use strict";var zL=er(),dZ=Rr(),FL=Kr(),yZt=Jt(),_Zt=TypeError;i5e.exports=function(t,r){var n=yZt(this),o=dZ(n.get),i=dZ(n.has),a=dZ(n.set),u=arguments.length>2?arguments[2]:void 0,p;if(!FL(r)&&!FL(u))throw new _Zt("At least one callback required");return zL(i,n,t)?(p=zL(o,n,t),FL(r)&&(p=r(p),zL(a,n,t,p))):FL(u)&&(p=u(),zL(a,n,t,p)),p}});var a5e=M(()=>{"use strict";var xZt=re(),bZt=UL();xZt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:bZt})});var s5e=M(()=>{"use strict";var wZt=re(),EZt=UL();wZt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:EZt})});var l5e=M(()=>{"use strict";var SZt=re(),IZt=Math.min,TZt=Math.max;SZt({target:"Math",stat:!0,forced:!0},{clamp:function(t,r,n){return IZt(n,TZt(r,t))}})});var u5e=M(()=>{"use strict";var MZt=re();MZt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var c5e=M(()=>{"use strict";var CZt=re(),AZt=180/Math.PI;CZt({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*AZt}})});var hZ=M((IWr,f5e)=>{"use strict";f5e.exports=Math.scale||function(t,r,n,o,i){var a=+t,u=+r,p=+n,h=+o,g=+i;return a!==a||u!==u||p!==p||h!==h||g!==g?NaN:a===1/0||a===-1/0?a:(a-u)*(g-h)/(p-u)+h}});var p5e=M(()=>{"use strict";var DZt=re(),NZt=hZ(),OZt=J5();DZt({target:"Math",stat:!0,forced:!0},{fscale:function(t,r,n,o,i){return OZt(NZt(t,r,n,o,i))}})});var d5e=M(()=>{"use strict";var LZt=re(),PZt=FY();LZt({target:"Math",stat:!0},{f16round:PZt})});var h5e=M(()=>{"use strict";var kZt=re();kZt({target:"Math",stat:!0,forced:!0},{iaddh:function(t,r,n,o){var i=t>>>0,a=r>>>0,u=n>>>0;return a+(o>>>0)+((i&u|(i|u)&~(i+u>>>0))>>>31)|0}})});var m5e=M(()=>{"use strict";var RZt=re();RZt({target:"Math",stat:!0,forced:!0},{imulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,u=i&n,p=o>>16,h=i>>16,g=(p*u>>>0)+(a*u>>>16);return p*h+(g>>16)+((a*h>>>0)+(g&n)>>16)}})});var g5e=M(()=>{"use strict";var jZt=re();jZt({target:"Math",stat:!0,forced:!0},{isubh:function(t,r,n,o){var i=t>>>0,a=r>>>0,u=n>>>0;return a-(o>>>0)-((~i&u|~(i^u)&i-u>>>0)>>>31)|0}})});var v5e=M(()=>{"use strict";var qZt=re();qZt({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var y5e=M(()=>{"use strict";var zZt=re(),FZt=Math.PI/180;zZt({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*FZt}})});var _5e=M(()=>{"use strict";var UZt=re(),BZt=hZ();UZt({target:"Math",stat:!0,forced:!0},{scale:BZt})});var E5e=M(()=>{"use strict";var VZt=re(),GZt=Jt(),HZt=dH(),WZt=kg(),$Zt=qa(),x5e=ro(),b5e="Seeded Random",w5e=b5e+" Generator",YZt="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",ZZt=x5e.set,KZt=x5e.getterFor(w5e),XZt=TypeError,JZt=WZt(function(t){ZZt(this,{type:w5e,seed:t%2147483647})},b5e,function(){var t=KZt(this),r=t.seed=(t.seed*1103515245+12345)%2147483647;return $Zt((r&1073741823)/1073741823,!1)});VZt({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var r=GZt(t).seed;if(!HZt(r))throw new XZt(YZt);return new JZt(r)}})});var S5e=M(()=>{"use strict";var QZt=re();QZt({target:"Math",stat:!0,forced:!0},{signbit:function(t){var r=+t;return r===r&&r===0?1/r===-1/0:r<0}})});var A5e=M(()=>{"use strict";var eKt=re(),tKt=vt(),rKt=_i(),nKt=RangeError,oKt=TypeError,Ac=1/0,iKt=NaN,S0=Math.abs,yZ=Math.pow,I5e=tKt([].push),NT=yZ(2,1023),aKt=yZ(2,53)-1,T5e=Number.MAX_VALUE,M5e=yZ(2,971),OT={},mZ={},gZ={},vZ={},C5e={},BL=function(e,t){var r=e+t,n=t-(r-e);return{hi:r,lo:n}};eKt({target:"Math",stat:!0},{sumPrecise:function(t){var r=[],n=0,o=vZ;switch(rKt(t,function(U){if(++n>=aKt)throw new nKt("Maximum allowed index exceeded");if(typeof U!="number")throw new oKt("Value is not a number");o!==OT&&(U!==U?o=OT:U===Ac?o=o===mZ?OT:gZ:U===-Ac?o=o===gZ?OT:mZ:(U!==0||1/U===Ac)&&(o===vZ||o===C5e)&&(o=C5e,I5e(r,U)))}),o){case OT:return iKt;case mZ:return-Ac;case gZ:return Ac;case vZ:return-0;}for(var i=[],a=0,u,p,h,g,x,b,T=0;T<r.length;T++){u=r[T];for(var A=0,L=0;L<i.length;L++){if(p=i[L],S0(u)<S0(p)&&(b=u,u=p,p=b),h=BL(u,p),g=h.hi,x=h.lo,S0(g)===Ac){var P=g===Ac?1:-1;a+=P,u=u-P*NT-P*NT,S0(u)<S0(p)&&(b=u,u=p,p=b),h=BL(u,p),g=h.hi,x=h.lo}x!==0&&(i[A++]=x),u=g}i.length=A,u!==0&&I5e(i,u)}var k=i.length-1;if(g=0,x=0,a!==0){var q=k>=0?i[k]:0;if(k--,S0(a)>1||a>0&&q>0||a<0&&q<0)return a>0?Ac:-Ac;if(h=BL(a*NT,q/2),g=h.hi,x=h.lo,x*=2,S0(2*g)===Ac)return g>0?g===NT&&x===-(M5e/2)&&k>=0&&i[k]<0?T5e:Ac:g===-NT&&x===M5e/2&&k>=0&&i[k]>0?-T5e:-Ac;x!==0&&(i[++k]=x,x=0),g*=2}for(;k>=0&&(h=BL(g,i[k--]),g=h.hi,x=h.lo,x===0););return k>=0&&(x<0&&i[k]<0||x>0&&i[k]>0)&&(p=x*2,u=g+p,p===u-g&&(g=u)),g}})});var D5e=M(()=>{"use strict";var sKt=re();sKt({target:"Math",stat:!0,forced:!0},{umulh:function(t,r){var n=65535,o=+t,i=+r,a=o&n,u=i&n,p=o>>>16,h=i>>>16,g=(p*u>>>0)+(a*u>>>16);return p*h+(g>>>16)+((a*h>>>0)+(g&n)>>>16)}})});var L5e=M(()=>{"use strict";var lKt=re(),PT=vt(),uKt=Qo(),LT="Invalid number representation",cKt="Invalid radix",fKt=RangeError,VL=SyntaxError,pKt=TypeError,N5e=parseInt,dKt=Math.pow,O5e=/^[\d.a-z]+$/,hKt=PT("".charAt),mKt=PT(O5e.exec),gKt=PT(1 .toString),vKt=PT("".slice),yKt=PT("".split);lKt({target:"Number",stat:!0,forced:!0},{fromString:function(t,r){var n=1;if(typeof t!="string")throw new pKt(LT);if(!t.length)throw new VL(LT);if(hKt(t,0)==="-"&&(n=-1,t=vKt(t,1),!t.length))throw new VL(LT);var o=r===void 0?10:uKt(r);if(o<2||o>36)throw new fKt(cKt);if(!mKt(O5e,t))throw new VL(LT);var i=yKt(t,"."),a=N5e(i[0],o);if(i.length>1&&(a+=N5e(i[1],o)/dKt(o,i[1].length)),o===10&&gKt(a,o)!==t)throw new VL(LT);return n*a}})});var P5e=M(()=>{"use strict";var _Kt=re(),xKt=DL();_Kt({target:"Number",stat:!0,forced:!0},{range:function(t,r,n){return new xKt(t,r,n,"number",0,1)}})});var k5e=M(()=>{"use strict";TH()});var HL=M((r$r,q5e)=>{"use strict";var R5e=ro(),bKt=kg(),GL=qa(),wKt=sn(),EKt=r0(),SKt=pn(),j5e="Object Iterator",IKt=R5e.set,TKt=R5e.getterFor(j5e);q5e.exports=bKt(function(t,r){var n=SKt(t);IKt(this,{type:j5e,mode:r,object:n,keys:EKt(n),index:0})},"Object",function(){for(var t=TKt(this),r=t.keys;;){if(r===null||t.index>=r.length)return t.object=t.keys=null,GL(void 0,!0);var n=r[t.index++],o=t.object;if(wKt(o,n)){switch(t.mode){case"keys":return GL(n,!1);case"values":return GL(o[n],!1);}return GL([n,o[n]],!1)}}})});var z5e=M(()=>{"use strict";var MKt=re(),CKt=HL();MKt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new CKt(t,"entries")}})});var F5e=M(()=>{"use strict";var AKt=re(),DKt=HL();AKt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new DKt(t,"keys")}})});var U5e=M(()=>{"use strict";var NKt=re(),OKt=HL();NKt({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new OKt(t,"values")}})});var B5e=M(()=>{"use strict";IH()});var J5e=M(()=>{"use strict";var LKt=re(),WL=er(),kT=Tr(),PKt=jg(),V5e=Rr(),kKt=Jt(),RKt=Vs(),G5e=Kr(),jKt=oa(),qKt=Br(),$L=Pi(),zKt=fo(),_Z=Mc(),H5e=ei(),db=ZH(),FKt=Nr(),W5e=ro(),UKt=FKt("observable"),xZ="Observable",$5e="Subscription",Y5e="SubscriptionObserver",bZ=W5e.getterFor,wZ=W5e.set,BKt=bZ(xZ),Z5e=bZ($5e),YL=bZ(Y5e),K5e=function(e){this.observer=kKt(e),this.cleanup=null,this.subscriptionObserver=null};K5e.prototype={type:$5e,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){db(t)}}},close:function(){if(!kT){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var EZ=function(e,t){var r=wZ(this,new K5e(e)),n;kT||(this.closed=!1);try{(n=$L(e,"start"))&&WL(n,e,this)}catch(u){db(u)}if(!r.isClosed()){var o=r.subscriptionObserver=new SZ(r);try{var i=t(o),a=i;jKt(i)||(r.cleanup=G5e(i.unsubscribe)?function(){a.unsubscribe()}:V5e(i))}catch(u){o.error(u);return}r.isClosed()&&r.clean()}};EZ.prototype=_Z({},{unsubscribe:function(){var t=Z5e(this);t.isClosed()||(t.close(),t.clean())}});kT&&H5e(EZ.prototype,"closed",{configurable:!0,get:function(){return Z5e(this).isClosed()}});var SZ=function(e){wZ(this,{type:Y5e,subscriptionState:e}),kT||(this.closed=!1)};SZ.prototype=_Z({},{next:function(t){var r=YL(this).subscriptionState;if(!r.isClosed()){var n=r.observer;try{var o=$L(n,"next");o&&WL(o,n,t)}catch(i){db(i)}}},error:function(t){var r=YL(this).subscriptionState;if(!r.isClosed()){var n=r.observer;r.close();try{var o=$L(n,"error");o?WL(o,n,t):db(t)}catch(i){db(i)}r.clean()}},complete:function(){var t=YL(this).subscriptionState;if(!t.isClosed()){var r=t.observer;t.close();try{var n=$L(r,"complete");n&&WL(n,r)}catch(o){db(o)}t.clean()}}});kT&&H5e(SZ.prototype,"closed",{configurable:!0,get:function(){return YL(this).subscriptionState.isClosed()}});var X5e=function(t){RKt(this,IZ),wZ(this,{type:xZ,subscriber:V5e(t)})},IZ=X5e.prototype;_Z(IZ,{subscribe:function(t){var r=arguments.length;return new EZ(G5e(t)?{next:t,error:r>1?arguments[1]:void 0,complete:r>2?arguments[2]:void 0}:qKt(t)?t:{},BKt(this).subscriber)}});zKt(IZ,UKt,function(){return this});LKt({global:!0,constructor:!0,forced:!0},{Observable:X5e});PKt(xZ)});var eOe=M(()=>{"use strict";var VKt=re(),GKt=Fr(),HKt=er(),Q5e=Jt(),WKt=Pf(),$Kt=Lg(),YKt=Pi(),ZKt=_i(),KKt=Nr(),XKt=KKt("observable");VKt({target:"Observable",stat:!0,forced:!0},{from:function(t){var r=WKt(this)?this:GKt("Observable"),n=YKt(Q5e(t),XKt);if(n){var o=Q5e(HKt(n,t));return o.constructor===r?o:new r(function(a){return o.subscribe(a)})}var i=$Kt(t);return new r(function(a){ZKt(i,function(u,p){if(a.next(u),a.closed)return p()},{IS_ITERATOR:!0,INTERRUPTED:!0}),a.complete()})}})});var rOe=M(()=>{"use strict";var JKt=re(),tOe=Fr(),QKt=Pf(),eXt=tOe("Array");JKt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=QKt(this)?this:tOe("Observable"),r=arguments.length,n=eXt(r),o=0;o<r;)n[o]=arguments[o++];return new t(function(i){for(var a=0;a<r;a++)if(i.next(n[a]),i.closed)return;i.complete()})}})});var nOe=M(()=>{"use strict";J5e();eOe();rOe()});var oOe=M(()=>{"use strict";uW()});var iOe=M(()=>{"use strict";cW()});var aOe=M(()=>{"use strict";hW()});var sOe=M(()=>{"use strict";mW()});var Wp=M((M$r,fOe)=>{"use strict";vO();mL();var cOe=Fr(),tXt=vt(),rXt=hh(),lOe=cOe("Map"),nXt=cOe("WeakMap"),oXt=tXt([].push),uOe=rXt("metadata"),TZ=uOe.store||(uOe.store=new nXt),RT=function(e,t,r){var n=TZ.get(e);if(!n){if(!r)return;TZ.set(e,n=new lOe)}var o=n.get(t);if(!o){if(!r)return;n.set(t,o=new lOe)}return o},iXt=function(e,t,r){var n=RT(t,r,!1);return n===void 0?!1:n.has(e)},aXt=function(e,t,r){var n=RT(t,r,!1);return n===void 0?void 0:n.get(e)},sXt=function(e,t,r,n){RT(r,n,!0).set(e,t)},lXt=function(e,t){var r=RT(e,t,!1),n=[];return r&&r.forEach(function(o,i){oXt(n,i)}),n},uXt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};fOe.exports={store:TZ,getMap:RT,has:iXt,get:aXt,set:sXt,keys:lXt,toKey:uXt}});var dOe=M(()=>{"use strict";var cXt=re(),pOe=Wp(),fXt=Jt(),pXt=pOe.toKey,dXt=pOe.set;cXt({target:"Reflect",stat:!0},{defineMetadata:function(t,r,n){var o=arguments.length<4?void 0:pXt(arguments[3]);dXt(t,r,fXt(n),o)}})});var mOe=M(()=>{"use strict";var hXt=re(),MZ=Wp(),mXt=Jt(),gXt=MZ.toKey,vXt=MZ.getMap,hOe=MZ.store;hXt({target:"Reflect",stat:!0},{deleteMetadata:function(t,r){var n=arguments.length<3?void 0:gXt(arguments[2]),o=vXt(mXt(r),n,!1);if(o===void 0||!o.delete(t))return!1;if(o.size)return!0;var i=hOe.get(r);return i.delete(n),!!i.size||hOe.delete(r)}})});var vOe=M(()=>{"use strict";var yXt=re(),CZ=Wp(),_Xt=Jt(),xXt=sa(),bXt=CZ.has,wXt=CZ.get,EXt=CZ.toKey,gOe=function(e,t,r){var n=bXt(e,t,r);if(n)return wXt(e,t,r);var o=xXt(t);return o!==null?gOe(e,o,r):void 0};yXt({target:"Reflect",stat:!0},{getMetadata:function(t,r){var n=arguments.length<3?void 0:EXt(arguments[2]);return gOe(t,_Xt(r),n)}})});var bOe=M(()=>{"use strict";var SXt=re(),yOe=vt(),_Oe=Wp(),IXt=Jt(),TXt=sa(),MXt=EL(),CXt=yOe(MXt),AXt=yOe([].concat),DXt=_Oe.keys,NXt=_Oe.toKey,xOe=function(e,t){var r=DXt(e,t),n=TXt(e);if(n===null)return r;var o=xOe(n,t);return o.length?r.length?CXt(AXt(r,o)):o:r};SXt({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var r=arguments.length<2?void 0:NXt(arguments[1]);return xOe(IXt(t),r)}})});var EOe=M(()=>{"use strict";var OXt=re(),wOe=Wp(),LXt=Jt(),PXt=wOe.get,kXt=wOe.toKey;OXt({target:"Reflect",stat:!0},{getOwnMetadata:function(t,r){var n=arguments.length<3?void 0:kXt(arguments[2]);return PXt(t,LXt(r),n)}})});var IOe=M(()=>{"use strict";var RXt=re(),SOe=Wp(),jXt=Jt(),qXt=SOe.keys,zXt=SOe.toKey;RXt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var r=arguments.length<2?void 0:zXt(arguments[1]);return qXt(jXt(t),r)}})});var COe=M(()=>{"use strict";var FXt=re(),TOe=Wp(),UXt=Jt(),BXt=sa(),VXt=TOe.has,GXt=TOe.toKey,MOe=function(e,t,r){var n=VXt(e,t,r);if(n)return!0;var o=BXt(t);return o!==null?MOe(e,o,r):!1};FXt({target:"Reflect",stat:!0},{hasMetadata:function(t,r){var n=arguments.length<3?void 0:GXt(arguments[2]);return MOe(t,UXt(r),n)}})});var DOe=M(()=>{"use strict";var HXt=re(),AOe=Wp(),WXt=Jt(),$Xt=AOe.has,YXt=AOe.toKey;HXt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,r){var n=arguments.length<3?void 0:YXt(arguments[2]);return $Xt(t,WXt(r),n)}})});var OOe=M(()=>{"use strict";var ZXt=re(),NOe=Wp(),KXt=Jt(),XXt=NOe.toKey,JXt=NOe.set;ZXt({target:"Reflect",stat:!0},{metadata:function(t,r){return function(o,i){JXt(t,r,KXt(o),XXt(i))}}})});var jT=M((W$r,LOe)=>{"use strict";var QXt=TypeError;LOe.exports=function(e){if(typeof e=="string")return e;throw new QXt("Argument is not a string")}});var zOe=M(()=>{"use strict";var eJt=re(),qT=vt(),tJt=jT(),rJt=sn(),POe=qI().start,nJt=d0(),oJt=Array,kOe=RegExp.escape,ROe=qT("".charAt),NZ=qT("".charCodeAt),iJt=qT(1.1.toString),aJt=qT([].join),qOe=/^[0-9a-z]/i,sJt=/^[$()*+./?[\\\]^{|}]/,lJt=RegExp("^[!\"#%&',\\-:;<=>@`~"+nJt+"]"),AZ=qT(qOe.exec),jOe={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},DZ=function(e){var t=iJt(NZ(e,0),16);return t.length<3?"\\x"+POe(t,2,"0"):"\\u"+POe(t,4,"0")},uJt=!kOe||kOe("ab")!=="\\x61b";eJt({target:"RegExp",stat:!0,forced:uJt},{escape:function(t){tJt(t);for(var r=t.length,n=oJt(r),o=0;o<r;o++){var i=ROe(t,o);if(o===0&&AZ(qOe,i))n[o]=DZ(i);else if(rJt(jOe,i))n[o]="\\"+jOe[i];else if(AZ(sJt,i))n[o]="\\"+i;else if(AZ(lJt,i))n[o]=DZ(i);else{var a=NZ(i,0);(a&63488)!==55296?n[o]=i:a>=56320||o+1>=r||(NZ(t,o+1)&64512)!==56320?n[o]=DZ(i):(n[o]=i,n[++o]=ROe(t,o))}}return aJt(n,"")}})});var FOe=M(()=>{"use strict";var cJt=re(),fJt=ls(),pJt=za().add;cJt({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=fJt(this),r=0,n=arguments.length;r<n;r++)pJt(t,arguments[r]);return t}})});var UOe=M(()=>{"use strict";var dJt=re(),hJt=ls(),mJt=za().remove;dJt({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=hJt(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=mJt(t,arguments[o]),r=r&&n;return!!r}})});var BOe=M(()=>{"use strict";kW()});var GOe=M((tYr,VOe)=>{"use strict";var gJt=ru(),vJt=sn(),yJt=oa(),_Jt=Nr(),xJt=l0(),bJt=_Jt("iterator"),wJt=Object;VOe.exports=function(e){if(yJt(e))return!1;var t=wJt(e);return t[bJt]!==void 0||"@@iterator"in t||vJt(xJt,gJt(t))}});var Jg=M((rYr,WOe)=>{"use strict";var EJt=Fr(),HOe=Kr(),SJt=GOe(),IJt=Br(),TJt=EJt("Set"),MJt=function(e){return IJt(e)&&typeof e.size=="number"&&HOe(e.has)&&HOe(e.keys)};WOe.exports=function(e){return MJt(e)?e:SJt(e)?new TJt(e):e}});var $Oe=M(()=>{"use strict";var CJt=re(),AJt=er(),DJt=Jg(),NJt=PW();CJt({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return AJt(NJt,this,DJt(t))}})});var YOe=M(()=>{"use strict";var OJt=re(),LJt=xo(),PJt=ls(),kJt=au();OJt({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var r=PJt(this),n=LJt(t,arguments.length>1?arguments[1]:void 0);return kJt(r,function(o){if(!n(o,o,r))return!1},!0)!==!1}})});var KOe=M(()=>{"use strict";var RJt=re(),jJt=xo(),qJt=ls(),ZOe=za(),zJt=au(),FJt=ZOe.Set,UJt=ZOe.add;RJt({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var r=qJt(this),n=jJt(t,arguments.length>1?arguments[1]:void 0),o=new FJt;return zJt(r,function(i){n(i,i,r)&&UJt(o,i)}),o}})});var XOe=M(()=>{"use strict";var BJt=re(),VJt=xo(),GJt=ls(),HJt=au();BJt({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var r=GJt(this),n=VJt(t,arguments.length>1?arguments[1]:void 0),o=HJt(r,function(i){if(n(i,i,r))return{value:i}},!0);return o&&o.value}})});var QOe=M(()=>{"use strict";var WJt=re(),JOe=za(),$Jt=AT();WJt({target:"Set",stat:!0,forced:!0},{from:$Jt(JOe.Set,JOe.add,!1)})});var eLe=M(()=>{"use strict";qW()});var tLe=M(()=>{"use strict";var YJt=re(),ZJt=er(),KJt=Jg(),XJt=jW();YJt({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return ZJt(XJt,this,KJt(t))}})});var rLe=M(()=>{"use strict";FW()});var nLe=M(()=>{"use strict";var JJt=re(),QJt=er(),eQt=Jg(),tQt=zW();JJt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return QJt(tQt,this,eQt(t))}})});var oLe=M(()=>{"use strict";BW()});var iLe=M(()=>{"use strict";var rQt=re(),nQt=er(),oQt=Jg(),iQt=UW();rQt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return nQt(iQt,this,oQt(t))}})});var aLe=M(()=>{"use strict";GW()});var sLe=M(()=>{"use strict";var aQt=re(),sQt=er(),lQt=Jg(),uQt=VW();aQt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return sQt(uQt,this,lQt(t))}})});var uLe=M(()=>{"use strict";var cQt=re(),lLe=vt(),fQt=ls(),pQt=au(),dQt=Hr(),hQt=lLe([].join),mQt=lLe([].push);cQt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var r=fQt(this),n=t===void 0?",":dQt(t),o=[];return pQt(r,function(i){mQt(o,i)}),hQt(o,n)}})});var fLe=M(()=>{"use strict";var gQt=re(),vQt=xo(),yQt=ls(),cLe=za(),_Qt=au(),xQt=cLe.Set,bQt=cLe.add;gQt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var r=yQt(this),n=vQt(t,arguments.length>1?arguments[1]:void 0),o=new xQt;return _Qt(r,function(i){bQt(o,n(i,i,r))}),o}})});var dLe=M(()=>{"use strict";var wQt=re(),pLe=za(),EQt=DT();wQt({target:"Set",stat:!0,forced:!0},{of:EQt(pLe.Set,pLe.add,!1)})});var hLe=M(()=>{"use strict";var SQt=re(),IQt=Rr(),TQt=ls(),MQt=au(),CQt=TypeError;SQt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var r=TQt(this),n=arguments.length<2,o=n?void 0:arguments[1];if(IQt(t),MQt(r,function(i){n?(n=!1,o=i):o=t(o,i,i,r)}),n)throw new CQt("Reduce of empty set with no initial value");return o}})});var mLe=M(()=>{"use strict";var AQt=re(),DQt=xo(),NQt=ls(),OQt=au();AQt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var r=NQt(this),n=DQt(t,arguments.length>1?arguments[1]:void 0);return OQt(r,function(o){if(n(o,o,r))return!0},!0)===!0}})});var gLe=M(()=>{"use strict";$W()});var vLe=M(()=>{"use strict";var LQt=re(),PQt=er(),kQt=Jg(),RQt=WW();LQt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return PQt(RQt,this,kQt(t))}})});var yLe=M(()=>{"use strict";ZW()});var _Le=M(()=>{"use strict";var jQt=re(),qQt=er(),zQt=Jg(),FQt=YW();jQt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return qQt(FQt,this,zQt(t))}})});var xLe=M(()=>{"use strict";var UQt=re(),BQt=_0().charAt,VQt=Go(),GQt=Qo(),HQt=Hr();UQt({target:"String",proto:!0,forced:!0},{at:function(t){var r=HQt(VQt(this)),n=r.length,o=GQt(t),i=o>=0?o:n+o;return i<0||i>=n?void 0:BQt(r,i)}})});var OZ=M((ZYr,SLe)=>{"use strict";var ELe=vt(),WQt=ia(),bLe=Hr(),$Qt=Mn(),YQt=TypeError,wLe=ELe([].push),ZQt=ELe([].join);SLe.exports=function(t){var r=WQt(t),n=$Qt(r);if(!n)return"";for(var o=arguments.length,i=[],a=0;;){var u=r[a++];if(u===void 0)throw new YQt("Incorrect template");if(wLe(i,bLe(u)),a===n)return ZQt(i,"");a<o&&wLe(i,bLe(arguments[a]))}}});var ILe=M(()=>{"use strict";var KQt=re(),XQt=OZ();KQt({target:"String",stat:!0,forced:!0},{cooked:XQt})});var DLe=M(()=>{"use strict";var JQt=re(),QQt=kg(),TLe=qa(),eer=Go(),ter=Hr(),MLe=ro(),CLe=_0(),rer=CLe.codeAt,ner=CLe.charAt,ALe="String Iterator",oer=MLe.set,ier=MLe.getterFor(ALe),aer=QQt(function(t){oer(this,{type:ALe,string:t,index:0})},"String",function(){var t=ier(this),r=t.string,n=t.index,o;return n>=r.length?TLe(void 0,!0):(o=ner(r,n),t.index+=o.length,TLe({codePoint:rer(o,0),position:n},!1))});JQt({target:"String",proto:!0,forced:!0},{codePoints:function(){return new aer(ter(eer(this)))}})});var Ch=M((eZr,NLe)=>{"use strict";var ZL=vt(),KL=WeakMap.prototype;NLe.exports={WeakMap,set:ZL(KL.set),get:ZL(KL.get),has:ZL(KL.has),remove:ZL(KL.delete)}});var FLe=M((tZr,zLe)=>{"use strict";var ser=Fr(),XL=vt(),ler=String.fromCharCode,uer=ser("String","fromCodePoint"),LZ=XL("".charAt),jLe=XL("".charCodeAt),OLe=XL("".indexOf),LLe=XL("".slice),kZ=48,qLe=57,PLe=97,cer=102,kLe=65,fer=70,RLe=function(e,t){var r=jLe(e,t);return r>=kZ&&r<=qLe},PZ=function(e,t,r){if(r>=e.length)return-1;for(var n=0;t<r;t++){var o=per(jLe(e,t));if(o===-1)return-1;n=n*16+o}return n},per=function(e){return e>=kZ&&e<=qLe?e-kZ:e>=PLe&&e<=cer?e-PLe+10:e>=kLe&&e<=fer?e-kLe+10:-1};zLe.exports=function(e){for(var t="",r=0,n=0,o;(n=OLe(e,"\\",n))>-1;){if(t+=LLe(e,r,n),++n===e.length)return;var i=LZ(e,n++);switch(i){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":n<e.length&&LZ(e,n)===`
`&&++n;case`
`:case"\u2028":case"\u2029":break;case"0":if(RLe(e,n))return;t+="\0";break;case"x":if(o=PZ(e,n,n+2),o===-1)return;n+=2,t+=ler(o);break;case"u":if(n<e.length&&LZ(e,n)==="{"){var a=OLe(e,"}",++n);if(a===-1)return;o=PZ(e,n,a),n=a+1}else o=PZ(e,n,n+4),n+=4;if(o===-1||o>1114111)return;t+=uer(o);break;default:if(RLe(i,0))return;t+=i;}r=n}return t+LLe(e,r)}});var KLe=M(()=>{"use strict";var der=Ih(),her=re(),mer=hI(),JL=vt(),HLe=Bs(),WLe=Jt(),ger=pn(),ver=Kr(),yer=Mn(),_er=ko().f,xer=nu(),QL=Ch(),ber=OZ(),wer=FLe(),$Le=d0(),RZ=new QL.WeakMap,Eer=QL.get,Ser=QL.has,Ier=QL.set,jZ=Array,zT=TypeError,ULe=Object.freeze||Object,Ter=Object.isFrozen,Mer=Math.min,BLe=JL("".charAt),YLe=JL("".slice),Cer=JL("".split),VLe=JL(/./.exec),Aer=/([\n\u2028\u2029]|\r\n?)/g,Der=RegExp("^["+$Le+"]*"),Ner=RegExp("[^"+$Le+"]"),GLe="Invalid tag",Oer="Invalid opening line",Ler="Invalid closing line",Per=function(e){var t=e.raw;if(der&&!Ter(t))throw new zT("Raw template should be frozen");if(Ser(RZ,t))return Eer(RZ,t);var r=ker(t),n=jer(r);return _er(n,"raw",{value:ULe(r)}),ULe(n),Ier(RZ,t,n),n},ker=function(e){var t=ger(e),r=yer(t),n=jZ(r),o=jZ(r),i=0,a,u,p,h;if(!r)throw new zT(GLe);for(;i<r;i++){var g=t[i];if(typeof g=="string")n[i]=Cer(g,Aer);else throw new zT(GLe)}for(i=0;i<r;i++){var x=i+1===r;if(a=n[i],i===0){if(a.length===1||a[0].length>0)throw new zT(Oer);a[1]=""}if(x){if(a.length===1||VLe(Ner,a[a.length-1]))throw new zT(Ler);a[a.length-2]="",a[a.length-1]=""}for(var b=2;b<a.length;b+=2){var T=a[b],A=b+1===a.length&&!x,L=VLe(Der,T)[0];if(!A&&L.length===T.length){a[b]="";continue}u=Rer(L,u)}}var P=u?u.length:0;for(i=0;i<r;i++){for(a=n[i],p=a[0],h=1;h<a.length;h+=2)p+=a[h]+YLe(a[h+1],P);o[i]=p}return o},Rer=function(e,t){if(t===void 0||e===t)return e;for(var r=0,n=Mer(e.length,t.length);r<n&&BLe(e,r)===BLe(t,r);r++);return YLe(e,0,r)},jer=function(e){for(var t=0,r=e.length,n=jZ(r);t<r;t++)n[t]=wer(e[t]);return n},ZLe=function(e){return mer(function(t){var r=xer(arguments);return r[0]=Per(WLe(t)),HLe(e,this,r)},"")},qer=ZLe(ber);her({target:"String",stat:!0,forced:!0},{dedent:function(t){return WLe(t),ver(t)?ZLe(t):HLe(qer,this,arguments)}})});var XLe=M(()=>{"use strict";JW()});var JLe=M(()=>{"use strict";a$()});var QLe=M(()=>{"use strict";g$()});var e3e=M(()=>{"use strict";E$()});var t3e=M(()=>{"use strict";var zer=$t(),Fer=yi(),Uer=ko().f,Ber=Ra().f,qZ=zer.Symbol;Fer("asyncDispose");qZ&&(FT=Ber(qZ,"asyncDispose"),FT.enumerable&&FT.configurable&&FT.writable&&Uer(qZ,"asyncDispose",{value:FT.value,enumerable:!1,configurable:!1,writable:!1}));var FT});var r3e=M(()=>{"use strict";var Ver=yi();Ver("customMatcher")});var n3e=M(()=>{"use strict";var Ger=$t(),Her=yi(),Wer=ko().f,$er=Ra().f,zZ=Ger.Symbol;Her("dispose");zZ&&(UT=$er(zZ,"dispose"),UT.enumerable&&UT.configurable&&UT.writable&&Wer(zZ,"dispose",{value:UT.value,enumerable:!1,configurable:!1,writable:!1}));var UT});var UZ=M((yZr,o3e)=>{"use strict";var Yer=Fr(),Zer=vt(),FZ=Yer("Symbol"),Ker=FZ.keyFor,Xer=Zer(FZ.prototype.valueOf);o3e.exports=FZ.isRegisteredSymbol||function(t){try{return Ker(Xer(t))!==void 0}catch(r){return!1}}});var i3e=M(()=>{"use strict";var Jer=re(),Qer=UZ();Jer({target:"Symbol",stat:!0},{isRegisteredSymbol:Qer})});var a3e=M(()=>{"use strict";var etr=re(),ttr=UZ();etr({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:ttr})});var GZ=M((EZr,p3e)=>{"use strict";var rtr=hh(),c3e=Fr(),ntr=vt(),otr=dh(),itr=Nr(),t3=c3e("Symbol"),s3e=t3.isWellKnownSymbol,f3e=c3e("Object","getOwnPropertyNames"),atr=ntr(t3.prototype.valueOf),l3e=rtr("wks");for(e3=0,BZ=f3e(t3),u3e=BZ.length;e3<u3e;e3++)try{VZ=BZ[e3],otr(t3[VZ])&&itr(VZ)}catch(e){}var VZ,e3,BZ,u3e;p3e.exports=function(t){if(s3e&&s3e(t))return!0;try{for(var r=atr(t),n=0,o=f3e(l3e),i=o.length;n<i;n++)if(l3e[o[n]]==r)return!0}catch(a){}return!1}});var d3e=M(()=>{"use strict";var str=re(),ltr=GZ();str({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:ltr})});var h3e=M(()=>{"use strict";var utr=re(),ctr=GZ();utr({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:ctr})});var m3e=M(()=>{"use strict";var ftr=yi();ftr("matcher")});var g3e=M(()=>{"use strict";var ptr=yi();ptr("metadata")});var v3e=M(()=>{"use strict";var dtr=yi();dtr("metadataKey")});var y3e=M(()=>{"use strict";var htr=yi();htr("observable")});var _3e=M(()=>{"use strict";var mtr=yi();mtr("patternMatch")});var x3e=M(()=>{"use strict";var gtr=yi();gtr("replaceAll")});var w3e=M(()=>{"use strict";var vtr=Fr(),ytr=XI(),_tr=mY(),b3e=cn(),xtr=xh(),btr=b3e.aTypedArrayConstructor,wtr=b3e.exportTypedArrayStaticMethod;wtr("fromAsync",function(t){var r=this,n=arguments.length,o=n>1?arguments[1]:void 0,i=n>2?arguments[2]:void 0;return new(vtr("Promise"))(function(a){ytr(r),a(_tr(t,o,i))}).then(function(a){return xtr(btr(r),a)})},!0)});var E3e=M(()=>{"use strict";q$()});var I3e=M(()=>{"use strict";var S3e=cn(),Etr=Ri().filterReject,Str=rL(),Itr=S3e.aTypedArray,Ttr=S3e.exportTypedArrayMethod;Ttr("filterOut",function(t){var r=Etr(Itr(this),t,arguments.length>1?arguments[1]:void 0);return Str(this,r)},!0)});var M3e=M(()=>{"use strict";var T3e=cn(),Mtr=Ri().filterReject,Ctr=rL(),Atr=T3e.aTypedArray,Dtr=T3e.exportTypedArrayMethod;Dtr("filterReject",function(t){var r=Mtr(Atr(this),t,arguments.length>1?arguments[1]:void 0);return Ctr(this,r)},!0)});var C3e=M(()=>{"use strict";z$()});var A3e=M(()=>{"use strict";F$()});var D3e=M(()=>{"use strict";var HZ=cn(),Ntr=bL(),Otr=HZ.aTypedArray,Ltr=HZ.getTypedArrayConstructor,Ptr=HZ.exportTypedArrayMethod;Ptr("groupBy",function(t){var r=arguments.length>1?arguments[1]:void 0;return Ntr(Otr(this),t,r,Ltr)},!0)});var N3e=M(()=>{"use strict";eY()});var O3e=M(()=>{"use strict";tY()});var L3e=M(()=>{"use strict";var WZ=cn(),ktr=Mn(),Rtr=XO(),jtr=Of(),qtr=pT(),ztr=Qo(),Ftr=Tt(),Utr=WZ.aTypedArray,Btr=WZ.getTypedArrayConstructor,Vtr=WZ.exportTypedArrayMethod,Gtr=Math.max,Htr=Math.min,Wtr=!Ftr(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});Vtr("toSpliced",function(t,r){var n=Utr(this),o=Btr(n),i=ktr(n),a=jtr(t,i),u=arguments.length,p=0,h,g,x,b,T,A,L;if(u===0)h=g=0;else if(u===1)h=0,g=i-a;else if(g=Htr(Gtr(ztr(r),0),i-a),h=u-2,h){b=new o(h),x=Rtr(b);for(var P=2;P<u;P++)T=arguments[P],b[P-2]=x?qtr(T):+T}for(A=i+h-g,L=new o(A);p<a;p++)L[p]=n[p];for(;p<a+h;p++)L[p]=b[p-a];for(;p<A;p++)L[p]=n[p+g-h];return L},!Wtr)});var P3e=M(()=>{"use strict";var $tr=vt(),$Z=cn(),Ytr=xh(),Ztr=EL(),Ktr=$Z.aTypedArray,Xtr=$Z.getTypedArrayConstructor,Jtr=$Z.exportTypedArrayMethod,Qtr=$tr(Ztr);Jtr("uniqueBy",function(t){return Ktr(this),Ytr(Xtr(this),Qtr(this,t))},!0)});var k3e=M(()=>{"use strict";nY()});var YZ=M((cKr,R3e)=>{"use strict";var err=Br(),trr=String,rrr=TypeError;R3e.exports=function(e){if(e===void 0||err(e))return e;throw new rrr(trr(e)+" is not an object or undefined")}});var BT=M((fKr,U3e)=>{"use strict";var F3e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",j3e=F3e+"+/",q3e=F3e+"-_",z3e=function(e){for(var t={},r=0;r<64;r++)t[e.charAt(r)]=r;return t};U3e.exports={i2c:j3e,c2i:z3e(j3e),i2cUrl:q3e,c2iUrl:z3e(q3e)}});var ZZ=M((pKr,B3e)=>{"use strict";var nrr=TypeError;B3e.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new nrr("Incorrect `alphabet` option")}});var QZ=M((dKr,H3e)=>{"use strict";var V3e=$t(),orr=vt(),irr=YZ(),arr=jT(),srr=sn(),G3e=BT(),lrr=ZZ(),urr=jx(),crr=G3e.c2i,frr=G3e.c2iUrl,Qg=V3e.SyntaxError,prr=V3e.TypeError,I0=orr("".charAt),KZ=function(e,t){for(var r=e.length;t<r;t++){var n=I0(e,t);if(n!==" "&&n!=="\t"&&n!==`
`&&n!=="\f"&&n!=="\r")break}return t},XZ=function(e,t,r){var n=e.length;n<4&&(e+=n===2?"AA":"A");var o=(t[I0(e,0)]<<18)+(t[I0(e,1)]<<12)+(t[I0(e,2)]<<6)+t[I0(e,3)],i=[o>>16&255,o>>8&255,o&255];if(n===2){if(r&&i[1]!==0)throw new Qg("Extra bits");return[i[0]]}if(n===3){if(r&&i[2]!==0)throw new Qg("Extra bits");return[i[0],i[1]]}return i},JZ=function(e,t,r){for(var n=t.length,o=0;o<n;o++)e[r+o]=t[o];return r+n};H3e.exports=function(e,t,r,n){arr(e),irr(t);var o=lrr(t)==="base64"?crr:frr,i=t?t.lastChunkHandling:void 0;if(i===void 0&&(i="loose"),i!=="loose"&&i!=="strict"&&i!=="stop-before-partial")throw new prr("Incorrect `lastChunkHandling` option");r&&urr(r.buffer);var a=r||[],u=0,p=0,h="",g=0;if(n)for(;;){if(g=KZ(e,g),g===e.length){if(h.length>0){if(i==="stop-before-partial")break;if(i==="loose"){if(h.length===1)throw new Qg("Malformed padding: exactly one additional character");u=JZ(a,XZ(h,o,!1),u)}else throw new Qg("Missing padding")}p=e.length;break}var x=I0(e,g);if(++g,x==="="){if(h.length<2)throw new Qg("Padding is too early");if(g=KZ(e,g),h.length===2){if(g===e.length){if(i==="stop-before-partial")break;throw new Qg("Malformed padding: only one =")}I0(e,g)==="="&&(++g,g=KZ(e,g))}if(g<e.length)throw new Qg("Unexpected character after padding");u=JZ(a,XZ(h,o,i==="strict"),u),p=e.length;break}if(!srr(o,x))throw new Qg("Unexpected character");var b=n-u;if(b===1&&h.length===2||b===2&&h.length===3||(h+=x,h.length===4&&(u=JZ(a,XZ(h,o,!1),u),h="",p=g,u===n)))break}return{bytes:a,read:p,written:u}}});var $3e=M(()=>{"use strict";var drr=re(),hrr=$t(),mrr=xh(),grr=QZ(),W3e=hrr.Uint8Array;W3e&&drr({target:"Uint8Array",stat:!0},{fromBase64:function(t){var r=grr(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return mrr(W3e,r.bytes)}})});var tK=M((gKr,X3e)=>{"use strict";var eK=$t(),Z3e=vt(),vrr=eK.Uint8Array,Y3e=eK.SyntaxError,yrr=eK.parseInt,_rr=Math.min,K3e=/[^\da-f]/i,xrr=Z3e(K3e.exec),brr=Z3e("".slice);X3e.exports=function(e,t){var r=e.length;if(r%2!==0)throw new Y3e("String should be an even number of characters");for(var n=t?_rr(t.length,r/2):r/2,o=t||new vrr(n),i=0,a=0;a<n;){var u=brr(e,i,i+=2);if(xrr(K3e,u))throw new Y3e("String should only contain hex characters");o[a++]=yrr(u,16)}return{bytes:o,read:i}}});var J3e=M(()=>{"use strict";var wrr=re(),Err=$t(),Srr=jT(),Irr=tK();Err.Uint8Array&&wrr({target:"Uint8Array",stat:!0},{fromHex:function(t){return Irr(Srr(t)).bytes}})});var VT=M((_Kr,Q3e)=>{"use strict";var Trr=ru(),Mrr=TypeError;Q3e.exports=function(e){if(Trr(e)==="Uint8Array")return e;throw new Mrr("Argument is not an Uint8Array")}});var ePe=M(()=>{"use strict";var Crr=re(),Arr=$t(),Drr=QZ(),Nrr=VT(),Orr=Arr.Uint8Array;Orr&&Crr({target:"Uint8Array",proto:!0},{setFromBase64:function(t){Nrr(this);var r=Drr(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:r.read,written:r.written}}})});var tPe=M(()=>{"use strict";var Lrr=re(),Prr=$t(),krr=jT(),Rrr=VT(),jrr=jx(),qrr=tK();Prr.Uint8Array&&Lrr({target:"Uint8Array",proto:!0},{setFromHex:function(t){Rrr(this),krr(t),jrr(this.buffer);var r=qrr(t,this).read;return{read:r,written:r/2}}})});var nPe=M(()=>{"use strict";var zrr=re(),Frr=$t(),Urr=vt(),Brr=YZ(),Vrr=VT(),Grr=jx(),rPe=BT(),Hrr=ZZ(),Wrr=rPe.i2c,$rr=rPe.i2cUrl,Yrr=Urr("".charAt);Frr.Uint8Array&&zrr({target:"Uint8Array",proto:!0},{toBase64:function(){var t=Vrr(this),r=arguments.length?Brr(arguments[0]):void 0,n=Hrr(r)==="base64"?Wrr:$rr,o=!!r&&!!r.omitPadding;Grr(this.buffer);for(var i="",a=0,u=t.length,p,h=function(g){return Yrr(n,p>>6*g&63)};a+2<u;a+=3)p=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i+=h(3)+h(2)+h(1)+h(0);return a+2===u?(p=(t[a]<<16)+(t[a+1]<<8),i+=h(3)+h(2)+h(1)+(o?"":"=")):a+1===u&&(p=t[a]<<16,i+=h(3)+h(2)+(o?"":"==")),i}})});var oPe=M(()=>{"use strict";var Zrr=re(),Krr=$t(),Xrr=vt(),Jrr=VT(),Qrr=jx(),enr=Xrr(1 .toString);Krr.Uint8Array&&Zrr({target:"Uint8Array",proto:!0},{toHex:function(){Jrr(this),Qrr(this.buffer);for(var t="",r=0,n=this.length;r<n;r++){var o=enr(this[r],16);t+=o.length===1?"0"+o:o}return t}})});var GT=M((CKr,iPe)=>{"use strict";var tnr=Ch().has;iPe.exports=function(e){return tnr(e),e}});var aPe=M(()=>{"use strict";var rnr=re(),nnr=GT(),onr=Ch().remove;rnr({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=nnr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=onr(t,arguments[o]),r=r&&n;return!!r}})});var lPe=M(()=>{"use strict";var inr=re(),sPe=Ch(),anr=AT();inr({target:"WeakMap",stat:!0,forced:!0},{from:anr(sPe.WeakMap,sPe.set,!0)})});var cPe=M(()=>{"use strict";var snr=re(),uPe=Ch(),lnr=DT();snr({target:"WeakMap",stat:!0,forced:!0},{of:lnr(uPe.WeakMap,uPe.set,!0)})});var pPe=M(()=>{"use strict";var unr=re(),cnr=GT(),rK=Ch(),fnr=rK.get,pnr=rK.has,fPe=rK.set;unr({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,r){var n=cnr(this),o,i;return pnr(n,t)?(o=fnr(n,t),"update"in r&&(o=r.update(o,t,n),fPe(n,t,o)),o):(i=r.insert(t,n),fPe(n,t,i),i)}})});var dPe=M(()=>{"use strict";var dnr=re(),hnr=GT(),nK=Ch(),mnr=nK.get,gnr=nK.has,vnr=nK.set;dnr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,r){return gnr(hnr(this),t)?mnr(this,t):(vnr(this,t,r),r)}})});var mPe=M(()=>{"use strict";var ynr=re(),_nr=Rr(),xnr=GT(),oK=Ch(),bnr=oK.get,wnr=oK.has,hPe=oK.set;ynr({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,r){if(xnr(this),_nr(r),wnr(this,t))return bnr(this,t);hPe(this,t);var n=r(t);return hPe(this,t,n),n}})});var gPe=M(()=>{"use strict";var Enr=re(),Snr=UL();Enr({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Snr})});var hb=M((VKr,vPe)=>{"use strict";var iK=vt(),aK=WeakSet.prototype;vPe.exports={WeakSet,add:iK(aK.add),has:iK(aK.has),remove:iK(aK.delete)}});var sK=M((GKr,yPe)=>{"use strict";var Inr=hb().has;yPe.exports=function(e){return Inr(e),e}});var _Pe=M(()=>{"use strict";var Tnr=re(),Mnr=sK(),Cnr=hb().add;Tnr({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Mnr(this),r=0,n=arguments.length;r<n;r++)Cnr(t,arguments[r]);return t}})});var xPe=M(()=>{"use strict";var Anr=re(),Dnr=sK(),Nnr=hb().remove;Anr({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Dnr(this),r=!0,n,o=0,i=arguments.length;o<i;o++)n=Nnr(t,arguments[o]),r=r&&n;return!!r}})});var wPe=M(()=>{"use strict";var Onr=re(),bPe=hb(),Lnr=AT();Onr({target:"WeakSet",stat:!0,forced:!0},{from:Lnr(bPe.WeakSet,bPe.add,!1)})});var SPe=M(()=>{"use strict";var Pnr=re(),EPe=hb(),knr=DT();Pnr({target:"WeakSet",stat:!0,forced:!0},{of:knr(EPe.WeakSet,EPe.add,!1)})});var NPe=M(()=>{"use strict";var Rnr=re(),jnr=$t(),MPe=Fr(),lK=vt(),qnr=er(),r3=Tt(),znr=Hr(),Fnr=Wu(),IPe=BT().c2i,CPe=/[^\d+/a-z]/i,Unr=/[\t\n\f\r ]+/g,Bnr=/[=]{1,2}$/,T0=MPe("atob"),Vnr=String.fromCharCode,Gnr=lK("".charAt),TPe=lK("".replace),Hnr=lK(CPe.exec),mb=!!T0&&!r3(function(){return T0("aGk=")!=="hi"}),APe=mb&&r3(function(){return T0(" ")!==""}),DPe=mb&&!r3(function(){T0("a")}),Wnr=mb&&!r3(function(){T0()}),$nr=mb&&T0.length!==1,Ynr=!mb||APe||DPe||Wnr||$nr;Rnr({global:!0,bind:!0,enumerable:!0,forced:Ynr},{atob:function(t){if(Fnr(arguments.length,1),mb&&!APe&&!DPe)return qnr(T0,jnr,t);var r=TPe(znr(t),Unr,""),n="",o=0,i=0,a,u,p;if(r.length%4===0&&(r=TPe(r,Bnr,"")),a=r.length,a%4===1||Hnr(CPe,r))throw new(MPe("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;o<a;)u=Gnr(r,o++),p=i%4?p*64+IPe[u]:IPe[u],i++%4&&(n+=Vnr(255&p>>(-2*i&6)));return n}})});var RPe=M(()=>{"use strict";var Znr=re(),Knr=$t(),PPe=Fr(),kPe=vt(),Xnr=er(),uK=Tt(),OPe=Hr(),Jnr=Wu(),Qnr=BT().i2c,gb=PPe("btoa"),LPe=kPe("".charAt),eor=kPe("".charCodeAt),HT=!!gb&&!uK(function(){return gb("hi")!=="aGk="}),tor=HT&&!uK(function(){gb()}),ror=HT&&uK(function(){return gb(null)!=="bnVsbA=="}),nor=HT&&gb.length!==1;Znr({global:!0,bind:!0,enumerable:!0,forced:!HT||tor||ror||nor},{btoa:function(t){if(Jnr(arguments.length,1),HT)return Xnr(gb,Knr,OPe(t));for(var r=OPe(t),n="",o=0,i=Qnr,a,u;LPe(r,o)||(i="=",o%1);){if(u=eor(r,o+=3/4),u>255)throw new(PPe("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");a=a<<8|u,n+=LPe(i,63&a>>8-o%1*8)}return n}})});var cK=M((nXr,jPe)=>{"use strict";jPe.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var pK=M((oXr,zPe)=>{"use strict";var oor=cI(),fK=oor("span").classList,qPe=fK&&fK.constructor&&fK.constructor.prototype;zPe.exports=qPe===Object.prototype?void 0:qPe});var VPe=M(()=>{"use strict";var FPe=$t(),UPe=cK(),ior=pK(),dK=pV(),aor=aa(),BPe=function(e){if(e&&e.forEach!==dK)try{aor(e,"forEach",dK)}catch(t){e.forEach=dK}};for(n3 in UPe)UPe[n3]&&BPe(FPe[n3]&&FPe[n3].prototype);var n3;BPe(ior)});var YPe=M(()=>{"use strict";var GPe=$t(),WPe=cK(),sor=pK(),WT=DI(),HPe=aa(),lor=wl(),uor=Nr(),hK=uor("iterator"),mK=WT.values,$Pe=function(e,t){if(e){if(e[hK]!==mK)try{HPe(e,hK,mK)}catch(n){e[hK]=mK}if(lor(e,t,!0),WPe[t]){for(var r in WT)if(e[r]!==WT[r])try{HPe(e,r,WT[r])}catch(n){e[r]=WT[r]}}}};for(o3 in WPe)$Pe(GPe[o3]&&GPe[o3].prototype,o3);var o3;$Pe(sor,"DOMTokenList")});var gK=M((uXr,ZPe)=>{"use strict";ZPe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var ake=M(()=>{"use strict";var cor=re(),s3=Fr(),por=nG(),wK=Tt(),dor=ki(),EK=eu(),l3=ko().f,hor=fo(),i3=ei(),a3=sn(),mor=Vs(),gor=Jt(),JPe=ZB(),KPe=a0(),vb=gK(),vor=N5(),QPe=ro(),SK=Tr(),eke=fn(),yb="DOMException",bK="DATA_CLONE_ERR",c3=s3("Error"),Ah=s3(yb)||function(){try{var e=s3("MessageChannel")||por("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===bK&&t.code===25)return t.constructor}}(),yor=Ah&&Ah.prototype,tke=c3.prototype,_or=QPe.set,xor=QPe.getterFor(yb),bor="stack"in new c3(yb),rke=function(e){return a3(vb,e)&&vb[e].m?vb[e].c:0},IK=function(){mor(this,YT);var t=arguments.length,r=KPe(t<1?void 0:arguments[0]),n=KPe(t<2?void 0:arguments[1],"Error"),o=rke(n);if(_or(this,{type:yb,name:n,message:r,code:o}),SK||(this.name=n,this.message=r,this.code=o),bor){var i=new c3(r);i.name=yb,l3(this,"stack",EK(1,vor(i.stack,1)))}},YT=IK.prototype=dor(tke),nke=function(e){return{enumerable:!0,configurable:!0,get:e}},vK=function(e){return nke(function(){return xor(this)[e]})};SK&&(i3(YT,"code",vK("code")),i3(YT,"message",vK("message")),i3(YT,"name",vK("name")));l3(YT,"constructor",EK(1,IK));var f3=wK(function(){return!(new Ah instanceof c3)}),oke=f3||wK(function(){return tke.toString!==JPe||String(new Ah(1,2))!=="2: 1"}),ike=f3||wK(function(){return new Ah(1,"DataCloneError").code!==25}),wor=f3||Ah[bK]!==25||yor[bK]!==25,XPe=eke?oke||ike||wor:f3;cor({global:!0,constructor:!0,forced:XPe},{DOMException:XPe?IK:Ah});var ZT=s3(yb),u3=ZT.prototype;oke&&(eke||Ah===ZT)&&hor(u3,"toString",JPe);ike&&SK&&Ah===ZT&&i3(u3,"code",nke(function(){return rke(gor(this).name)}));for(yK in vb)a3(vb,yK)&&(_K=vb[yK],$T=_K.s,xK=EK(6,_K.c),a3(ZT,$T)||l3(ZT,$T,xK),a3(u3,$T)||l3(u3,$T,xK));var _K,$T,xK,yK});var dke=M(()=>{"use strict";var Eor=re(),Sor=$t(),LK=Fr(),NK=eu(),OK=ko().f,ske=sn(),Ior=Vs(),Tor=Og(),lke=a0(),TK=gK(),Mor=N5(),Cor=Tr(),fke=fn(),XT="DOMException",pke=LK("Error"),JT=LK(XT),PK=function(){Ior(this,Aor);var t=arguments.length,r=lke(t<1?void 0:arguments[0]),n=lke(t<2?void 0:arguments[1],"Error"),o=new JT(r,n),i=new pke(r);return i.name=XT,OK(o,"stack",NK(1,Mor(i.stack,1))),Tor(o,this,PK),o},Aor=PK.prototype=JT.prototype,Dor="stack"in new pke(XT),Nor="stack"in new JT(1,2),MK=JT&&Cor&&Object.getOwnPropertyDescriptor(Sor,XT),Oor=!!MK&&!(MK.writable&&MK.configurable),uke=Dor&&!Oor&&!Nor;Eor({global:!0,constructor:!0,forced:fke||uke},{DOMException:uke?PK:JT});var KT=LK(XT),cke=KT.prototype;if(cke.constructor!==KT){fke||OK(cke,"constructor",NK(1,KT));for(CK in TK)ske(TK,CK)&&(AK=TK[CK],DK=AK.s,ske(KT,DK)||OK(KT,DK,NK(6,AK.c)))}var AK,DK,CK});var mke=M(()=>{"use strict";var Lor=Fr(),Por=wl(),hke="DOMException";Por(Lor(hke),hke)});var vke=M(()=>{"use strict";var kor=re(),Ror=$t(),gke=tT().clear;kor({global:!0,bind:!0,enumerable:!0,forced:Ror.clearImmediate!==gke},{clearImmediate:gke})});var p3=M((yXr,_ke)=>{"use strict";var yke=$t(),jor=Bs(),qor=Kr(),zor=LI(),For=Af(),Uor=nu(),Bor=Wu(),Vor=yke.Function,Gor=/MSIE .\./.test(For)||zor==="BUN"&&function(){var e=yke.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();_ke.exports=function(e,t){var r=t?2:1;return Gor?function(n,o){var i=Bor(arguments.length,1)>r,a=qor(n)?n:Vor(n),u=i?Uor(arguments,r):[],p=i?function(){jor(a,this,u)}:a;return t?e(p,o):e(p)}:e}});var Eke=M(()=>{"use strict";var Hor=re(),wke=$t(),xke=tT().set,Wor=p3(),bke=wke.setImmediate?Wor(xke,!1):xke;Hor({global:!0,bind:!0,enumerable:!0,forced:wke.setImmediate!==bke},{setImmediate:bke})});var Ske=M(()=>{"use strict";vke();Eke()});var Ike=M(()=>{"use strict";var $or=re(),Yor=$t(),Zor=YH(),Kor=Rr(),Xor=Wu(),Jor=Tt(),Qor=Tr(),eir=Jor(function(){return Qor&&Object.getOwnPropertyDescriptor(Yor,"queueMicrotask").value.length!==1});$or({global:!0,enumerable:!0,dontCallGetSet:!0,forced:eir},{queueMicrotask:function(t){Xor(arguments.length,1),Zor(Kor(t))}})});var Mke=M(()=>{"use strict";var tir=re(),ev=$t(),rir=ei(),nir=Tr(),oir=TypeError,iir=Object.defineProperty,Tke=ev.self!==ev;try{nir?(d3=Object.getOwnPropertyDescriptor(ev,"self"),(Tke||!d3||!d3.get||!d3.enumerable)&&rir(ev,"self",{get:function(){return ev},set:function(t){if(this!==ev)throw new oir("Illegal invocation");iir(ev,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):tir({global:!0,simple:!0,forced:Tke},{self:ev})}catch(e){}var d3});var qke=M(()=>{"use strict";var air=fn(),sir=re(),ps=$t(),eM=Fr(),rM=vt(),FK=Tt(),lir=Cg(),xb=Kr(),uir=Pf(),cir=oa(),y3=Br(),fir=dh(),pir=_i(),Dke=Jt(),g3=ru(),dir=sn(),hir=Ic(),kK=aa(),h3=Mn(),mir=Wu(),gir=Kx(),_3=_a(),UK=za(),vir=au(),Cke=cG(),yir=HB(),BK=cO(),QT=ps.Object,_ir=ps.Array,Nke=ps.Date,Oke=ps.Error,xir=ps.TypeError,bir=ps.PerformanceMark,M0=eM("DOMException"),qK=_3.Map,VK=_3.has,Lke=_3.get,v3=_3.set,Pke=UK.Set,kke=UK.add,wir=UK.has,Eir=eM("Object","keys"),Sir=rM([].push),Iir=rM((!0).valueOf),Tir=rM(1 .valueOf),Mir=rM("".valueOf),Cir=rM(Nke.prototype.getTime),zK=lir("structuredClone"),tM="DataCloneError",m3="Transferring",Rke=function(e){return!FK(function(){var t=new ps.Set([7]),r=e(t),n=e(QT(7));return r===t||!r.has(7)||!y3(n)||+n!=7})&&e},Ake=function(e,t){return!FK(function(){var r=new t,n=e({a:r,b:r});return!(n&&n.a===n.b&&n.a instanceof t&&n.a.stack===r.stack)})},Air=function(e){return!FK(function(){var t=e(new ps.AggregateError([1],zK,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==zK||t.cause!==3})},_b=ps.structuredClone,Dir=air||!Ake(_b,Oke)||!Ake(_b,M0)||!Air(_b),Nir=!_b&&Rke(function(e){return new bir(zK,{detail:e}).detail}),Dh=Rke(_b)||Nir,RK=function(e){throw new M0("Uncloneable type: "+e,tM)},uu=function(e,t){throw new M0((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",tM)},jK=function(e,t){return Dh||uu(t),Dh(e)},Oir=function(){var e;try{e=new ps.DataTransfer}catch(t){try{e=new ps.ClipboardEvent("").clipboardData}catch(r){}}return e&&e.items&&e.files?e:null},jke=function(e,t,r){if(VK(t,e))return Lke(t,e);var n=r||g3(e),o,i,a,u,p,h;if(n==="SharedArrayBuffer")Dh?o=Dh(e):o=e;else{var g=ps.DataView;!g&&!xb(e.slice)&&uu("ArrayBuffer");try{if(xb(e.slice)&&!e.resizable)o=e.slice(0);else for(i=e.byteLength,a=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,o=new ArrayBuffer(i,a),u=new g(e),p=new g(o),h=0;h<i;h++)p.setUint8(h,u.getUint8(h))}catch(x){throw new M0("ArrayBuffer is detached",tM)}}return v3(t,e,o),o},Lir=function(e,t,r,n,o){var i=ps[t];return y3(i)||uu(t),new i(jke(e.buffer,o),r,n)},fs=function(e,t){if(fir(e)&&RK("Symbol"),!y3(e))return e;if(t){if(VK(t,e))return Lke(t,e)}else t=new qK;var r=g3(e),n,o,i,a,u,p,h,g;switch(r){case"Array":i=_ir(h3(e));break;case"Object":i={};break;case"Map":i=new qK;break;case"Set":i=new Pke;break;case"RegExp":i=new RegExp(e.source,gir(e));break;case"Error":switch(o=e.name,o){case"AggregateError":i=new(eM(o))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":i=new(eM(o));break;case"CompileError":case"LinkError":case"RuntimeError":i=new(eM("WebAssembly",o));break;default:i=new Oke;}break;case"DOMException":i=new M0(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":i=jke(e,t,r);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":p=r==="DataView"?e.byteLength:e.length,i=Lir(e,r,e.byteOffset,p,t);break;case"DOMQuad":try{i=new DOMQuad(fs(e.p1,t),fs(e.p2,t),fs(e.p3,t),fs(e.p4,t))}catch(x){i=jK(e,r)}break;case"File":if(Dh)try{i=Dh(e),g3(i)!==r&&(i=void 0)}catch(x){}if(!i)try{i=new File([e],e.name,e)}catch(x){}i||uu(r);break;case"FileList":if(a=Oir(),a){for(u=0,p=h3(e);u<p;u++)a.items.add(fs(e[u],t));i=a.files}else i=jK(e,r);break;case"ImageData":try{i=new ImageData(fs(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(x){i=jK(e,r)}break;default:if(Dh)i=Dh(e);else switch(r){case"BigInt":i=QT(e.valueOf());break;case"Boolean":i=QT(Iir(e));break;case"Number":i=QT(Tir(e));break;case"String":i=QT(Mir(e));break;case"Date":i=new Nke(Cir(e));break;case"Blob":try{i=e.slice(0,e.size,e.type)}catch(x){uu(r)}break;case"DOMPoint":case"DOMPointReadOnly":n=ps[r];try{i=n.fromPoint?n.fromPoint(e):new n(e.x,e.y,e.z,e.w)}catch(x){uu(r)}break;case"DOMRect":case"DOMRectReadOnly":n=ps[r];try{i=n.fromRect?n.fromRect(e):new n(e.x,e.y,e.width,e.height)}catch(x){uu(r)}break;case"DOMMatrix":case"DOMMatrixReadOnly":n=ps[r];try{i=n.fromMatrix?n.fromMatrix(e):new n(e)}catch(x){uu(r)}break;case"AudioData":case"VideoFrame":xb(e.clone)||uu(r);try{i=e.clone()}catch(x){RK(r)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":uu(r);default:RK(r);}}switch(v3(t,e,i),r){case"Array":case"Object":for(h=Eir(e),u=0,p=h3(h);u<p;u++)g=h[u],hir(i,g,fs(e[g],t));break;case"Map":e.forEach(function(x,b){v3(i,fs(b,t),fs(x,t))});break;case"Set":e.forEach(function(x){kke(i,fs(x,t))});break;case"Error":kK(i,"message",fs(e.message,t)),dir(e,"cause")&&kK(i,"cause",fs(e.cause,t)),o==="AggregateError"?i.errors=fs(e.errors,t):o==="SuppressedError"&&(i.error=fs(e.error,t),i.suppressed=fs(e.suppressed,t));case"DOMException":yir&&kK(i,"stack",fs(e.stack,t));}return i},Pir=function(e,t){if(!y3(e))throw new xir("Transfer option cannot be converted to a sequence");var r=[];pir(e,function(b){Sir(r,Dke(b))});for(var n=0,o=h3(r),i=new Pke,a,u,p,h,g,x;n<o;){if(a=r[n++],u=g3(a),u==="ArrayBuffer"?wir(i,a):VK(t,a))throw new M0("Duplicate transferable",tM);if(u==="ArrayBuffer"){kke(i,a);continue}if(BK)h=_b(a,{transfer:[a]});else switch(u){case"ImageBitmap":p=ps.OffscreenCanvas,uir(p)||uu(u,m3);try{g=new p(a.width,a.height),x=g.getContext("bitmaprenderer"),x.transferFromImageBitmap(a),h=g.transferToImageBitmap()}catch(b){}break;case"AudioData":case"VideoFrame":(!xb(a.clone)||!xb(a.close))&&uu(u,m3);try{h=a.clone(),a.close()}catch(b){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":uu(u,m3);}if(h===void 0)throw new M0("This object cannot be transferred: "+u,tM);v3(t,a,h)}return i},kir=function(e){vir(e,function(t){BK?Dh(t,{transfer:[t]}):xb(t.transfer)?t.transfer():Cke?Cke(t):uu("ArrayBuffer",m3)})};sir({global:!0,enumerable:!0,sham:!BK,forced:Dir},{structuredClone:function(t){var r=mir(arguments.length,1)>1&&!cir(arguments[1])?Dke(arguments[1]):void 0,n=r?r.transfer:void 0,o,i;n!==void 0&&(o=new qK,i=Pir(n,o));var a=fs(t,o);return i&&kir(i),a}})});var Uke=M(()=>{"use strict";var Rir=re(),Fke=$t(),jir=p3(),zke=jir(Fke.setInterval,!0);Rir({global:!0,bind:!0,forced:Fke.setInterval!==zke},{setInterval:zke})});var Gke=M(()=>{"use strict";var qir=re(),Vke=$t(),zir=p3(),Bke=zir(Vke.setTimeout,!0);qir({global:!0,bind:!0,forced:Vke.setTimeout!==Bke},{setTimeout:Bke})});var Hke=M(()=>{"use strict";Uke();Gke()});var nM=M((kXr,$ke)=>{"use strict";var Fir=Tt(),Uir=Nr(),Bir=Tr(),Wke=fn(),Vir=Uir("iterator");$ke.exports=!Fir(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,r=new URLSearchParams("a=1&a=2&b=3"),n="";return e.pathname="c%20d",t.forEach(function(o,i){t.delete("b"),n+=i+o}),r.delete("a",2),r.delete("b",void 0),Wke&&(!e.toJSON||!r.has("a",1)||r.has("a",2)||!r.has("a",void 0)||r.has("b"))||!t.size&&(Wke||!Bir)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[Vir]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||n!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var rRe=M((RXr,tRe)=>{"use strict";var C0=vt(),GK=2147483647,oM=36,Jke=1,$K=26,Gir=38,Hir=700,Wir=72,$ir=128,Yir="-",Zir=/[^\0-\u007E]/,Qke=/[.\u3002\uFF0E\uFF61]/g,Yke="Overflow: input needs wider integers to process",HK=oM-Jke,Zke=RangeError,Kir=C0(Qke.exec),bb=Math.floor,WK=String.fromCharCode,Kke=C0("".charCodeAt),eRe=C0([].join),tv=C0([].push),Xir=C0("".replace),Jir=C0("".split),Qir=C0("".toLowerCase),ear=function(e){for(var t=[],r=0,n=e.length;r<n;){var o=Kke(e,r++);if(o>=55296&&o<=56319&&r<n){var i=Kke(e,r++);(i&64512)===56320?tv(t,((o&1023)<<10)+(i&1023)+65536):(tv(t,o),r--)}else tv(t,o)}return t},Xke=function(e){return e+22+75*(e<26)},tar=function(e,t,r){var n=0;for(e=r?bb(e/Hir):e>>1,e+=bb(e/t);e>HK*$K>>1;)e=bb(e/HK),n+=oM;return bb(n+(HK+1)*e/(e+Gir))},rar=function(e){var t=[];e=ear(e);var r=e.length,n=$ir,o=0,i=Wir,a,u;for(a=0;a<e.length;a++)u=e[a],u<128&&tv(t,WK(u));var p=t.length,h=p;for(p&&tv(t,Yir);h<r;){var g=GK;for(a=0;a<e.length;a++)u=e[a],u>=n&&u<g&&(g=u);var x=h+1;if(g-n>bb((GK-o)/x))throw new Zke(Yke);for(o+=(g-n)*x,n=g,a=0;a<e.length;a++){if(u=e[a],u<n&&++o>GK)throw new Zke(Yke);if(u===n){for(var b=o,T=oM;;){var A=T<=i?Jke:T>=i+$K?$K:T-i;if(b<A)break;var L=b-A,P=oM-A;tv(t,WK(Xke(A+L%P))),b=bb(L/P),T+=oM}tv(t,WK(Xke(b))),i=tar(o,x,h===p),o=0,h++}}o++,n++}return eRe(t,"")};tRe.exports=function(e){var t=[],r=Jir(Xir(Qir(e),Qke,"."),"."),n,o;for(n=0;n<r.length;n++)o=r[n],tv(t,Kir(Zir,o)?"xn--"+rar(o):o);return eRe(t,".")}});var rX=M((jXr,IRe)=>{"use strict";DI();XW();var QK=re(),mRe=$t(),eX=UH(),nar=Fr(),x3=er(),jf=vt(),iM=Tr(),gRe=nM(),vRe=fo(),oar=ei(),iar=Mc(),aar=wl(),sar=kg(),tX=ro(),yRe=Vs(),YK=Kr(),lar=sn(),uar=xo(),car=ru(),far=Jt(),_Re=Br(),Sl=Hr(),par=ki(),nRe=eu(),oRe=Lg(),dar=jp(),b3=qa(),wb=Wu(),har=Nr(),mar=Y5(),gar=har("iterator"),Sb="URLSearchParams",xRe=Sb+"Iterator",bRe=tX.set,Dc=tX.getterFor(Sb),yar=tX.getterFor(xRe),iRe=eX("fetch"),S3=eX("Request"),aM=eX("Headers"),ZK=S3&&S3.prototype,aRe=aM&&aM.prototype,_ar=mRe.TypeError,xar=mRe.encodeURIComponent,bar=String.fromCharCode,war=nar("String","fromCodePoint"),Ear=parseInt,E3=jf("".charAt),sRe=jf([].join),rv=jf([].push),wRe=jf("".replace),Sar=jf([].shift),lRe=jf([].splice),uRe=jf("".split),ERe=jf("".slice),Iar=jf(/./.exec),Tar=/\+/g,KK="\uFFFD",Mar=/^[0-9a-f]+$/i,cRe=function(e,t){var r=ERe(e,t,t+2);return Iar(Mar,r)?Ear(r,16):NaN},Car=function(e){for(var t=0,r=128;r>0&&e&r;r>>=1)t++;return t},Aar=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break;}return t>1114111?null:t},fRe=function(e){e=wRe(e,Tar," ");for(var t=e.length,r="",n=0;n<t;){var o=E3(e,n);if(o==="%"){if(E3(e,n+1)==="%"||n+3>t){r+="%",n++;continue}var i=cRe(e,n+1);if(i!==i){r+=o,n++;continue}n+=2;var a=Car(i);if(a===0)o=bar(i);else{if(a===1||a>4){r+=KK,n++;continue}for(var u=[i],p=1;p<a&&(n++,!(n+3>t||E3(e,n)!=="%"));){var h=cRe(e,n+1);if(h!==h){n+=3;break}if(h>191||h<128)break;rv(u,h),n+=2,p++}if(u.length!==a){r+=KK;continue}var g=Aar(u);g===null?r+=KK:o=war(g)}}r+=o,n++}return r},Dar=/[!'()~]|%20/g,Nar={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Oar=function(e){return Nar[e]},pRe=function(e){return wRe(xar(e),Dar,Oar)},XK=sar(function(t,r){bRe(this,{type:xRe,target:Dc(t).entries,index:0,kind:r})},Sb,function(){var t=yar(this),r=t.target,n=t.index++;if(!r||n>=r.length)return t.target=null,b3(void 0,!0);var o=r[n];switch(t.kind){case"keys":return b3(o.key,!1);case"values":return b3(o.value,!1);}return b3([o.key,o.value],!1)},!0),SRe=function(e){this.entries=[],this.url=null,e!==void 0&&(_Re(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?E3(e,0)==="?"?ERe(e,1):e:Sl(e)))};SRe.prototype={type:Sb,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,r=dar(e),n,o,i,a,u,p,h;if(r)for(n=oRe(e,r),o=n.next;!(i=x3(o,n)).done;){if(a=oRe(far(i.value)),u=a.next,(p=x3(u,a)).done||(h=x3(u,a)).done||!x3(u,a).done)throw new _ar("Expected sequence with length 2");rv(t,{key:Sl(p.value),value:Sl(h.value)})}else for(var g in e)lar(e,g)&&rv(t,{key:g,value:Sl(e[g])})},parseQuery:function(e){if(e)for(var t=this.entries,r=uRe(e,"&"),n=0,o,i;n<r.length;)o=r[n++],o.length&&(i=uRe(o,"="),rv(t,{key:fRe(Sar(i)),value:fRe(sRe(i,"="))}))},serialize:function(){for(var e=this.entries,t=[],r=0,n;r<e.length;)n=e[r++],rv(t,pRe(n.key)+"="+pRe(n.value));return sRe(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var I3=function(){yRe(this,Eb);var t=arguments.length>0?arguments[0]:void 0,r=bRe(this,new SRe(t));iM||(this.size=r.entries.length)},Eb=I3.prototype;iar(Eb,{append:function(t,r){var n=Dc(this);wb(arguments.length,2),rv(n.entries,{key:Sl(t),value:Sl(r)}),iM||this.length++,n.updateURL()},delete:function(e){for(var t=Dc(this),r=wb(arguments.length,1),n=t.entries,o=Sl(e),i=r<2?void 0:arguments[1],a=i===void 0?i:Sl(i),u=0;u<n.length;){var p=n[u];if(p.key===o&&(a===void 0||p.value===a)){if(lRe(n,u,1),a!==void 0)break}else u++}iM||(this.size=n.length),t.updateURL()},get:function(t){var r=Dc(this).entries;wb(arguments.length,1);for(var n=Sl(t),o=0;o<r.length;o++)if(r[o].key===n)return r[o].value;return null},getAll:function(t){var r=Dc(this).entries;wb(arguments.length,1);for(var n=Sl(t),o=[],i=0;i<r.length;i++)r[i].key===n&&rv(o,r[i].value);return o},has:function(t){for(var r=Dc(this).entries,n=wb(arguments.length,1),o=Sl(t),i=n<2?void 0:arguments[1],a=i===void 0?i:Sl(i),u=0;u<r.length;){var p=r[u++];if(p.key===o&&(a===void 0||p.value===a))return!0}return!1},set:function(t,r){var n=Dc(this);wb(arguments.length,1);for(var o=n.entries,i=!1,a=Sl(t),u=Sl(r),p=0,h;p<o.length;p++)h=o[p],h.key===a&&(i?lRe(o,p--,1):(i=!0,h.value=u));i||rv(o,{key:a,value:u}),iM||(this.size=o.length),n.updateURL()},sort:function(){var t=Dc(this);mar(t.entries,function(r,n){return r.key>n.key?1:-1}),t.updateURL()},forEach:function(t){for(var r=Dc(this).entries,n=uar(t,arguments.length>1?arguments[1]:void 0),o=0,i;o<r.length;)i=r[o++],n(i.value,i.key,this)},keys:function(){return new XK(this,"keys")},values:function(){return new XK(this,"values")},entries:function(){return new XK(this,"entries")}},{enumerable:!0});vRe(Eb,gar,Eb.entries,{name:"entries"});vRe(Eb,"toString",function(){return Dc(this).serialize()},{enumerable:!0});iM&&oar(Eb,"size",{get:function(){return Dc(this).entries.length},configurable:!0,enumerable:!0});aar(I3,Sb);QK({global:!0,constructor:!0,forced:!gRe},{URLSearchParams:I3});!gRe&&YK(aM)&&(dRe=jf(aRe.has),hRe=jf(aRe.set),JK=function(e){if(_Re(e)){var t=e.body,r;if(car(t)===Sb)return r=e.headers?new aM(e.headers):new aM,dRe(r,"content-type")||hRe(r,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),par(e,{body:nRe(0,Sl(t)),headers:nRe(0,r)})}return e},YK(iRe)&&QK({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return iRe(t,arguments.length>1?JK(arguments[1]):{})}}),YK(S3)&&(w3=function(t){return yRe(this,ZK),new S3(t,arguments.length>1?JK(arguments[1]):{})},ZK.constructor=w3,w3.prototype=ZK,QK({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:w3})));var dRe,hRe,JK,w3;IRe.exports={URLSearchParams:I3,getState:Dc}});var VRe=M(()=>{"use strict";QW();var Lar=re(),_X=Tr(),Par=nM(),xX=$t(),TRe=xo(),kc=vt(),D3=fo(),Nc=ei(),kar=Vs(),gX=sn(),bX=wH(),Ib=dV(),qf=nu(),Rar=_0().codeAt,jar=rRe(),Oh=Hr(),qar=wl(),zar=Wu(),jRe=rX(),qRe=ro(),Far=qRe.set,N3=qRe.getterFor("URL"),Uar=jRe.URLSearchParams,Bar=jRe.getState,sM=xX.URL,vX=xX.TypeError,O3=xX.parseInt,Var=Math.floor,MRe=Math.pow,Pc=kc("".charAt),zf=kc(/./.exec),uM=kc([].join),Gar=kc(1 .toString),Har=kc([].pop),Mb=kc([].push),nX=kc("".replace),War=kc([].shift),$ar=kc("".split),fM=kc("".slice),L3=kc("".toLowerCase),Yar=kc([].unshift),Zar="Invalid authority",oX="Invalid scheme",A0="Invalid host",CRe="Invalid port",zRe=/[a-z]/i,Kar=/[\d+-.a-z]/i,yX=/\d/,Xar=/^0x/i,Jar=/^[0-7]+$/,Qar=/^\d+$/,FRe=/^[\da-f]+$/i,esr=/[\0\t\n\r #%/:<>?@[\\\]^|]/,tsr=/[\0\t\n\r #/:<>?@[\\\]^|]/,rsr=/^[\u0000-\u0020]+/,nsr=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,osr=/[\t\n\r]/g,Oc,isr=function(e){var t=$ar(e,"."),r,n,o,i,a,u,p;if(t.length&&t[t.length-1]===""&&t.length--,r=t.length,r>4)return e;for(n=[],o=0;o<r;o++){if(i=t[o],i==="")return e;if(a=10,i.length>1&&Pc(i,0)==="0"&&(a=zf(Xar,i)?16:8,i=fM(i,a===8?1:2)),i==="")u=0;else{if(!zf(a===10?Qar:a===8?Jar:FRe,i))return e;u=O3(i,a)}Mb(n,u)}for(o=0;o<r;o++)if(u=n[o],o===r-1){if(u>=MRe(256,5-r))return null}else if(u>255)return null;for(p=Har(n),o=0;o<n.length;o++)p+=n[o]*MRe(256,3-o);return p},asr=function(e){var t=[0,0,0,0,0,0,0,0],r=0,n=null,o=0,i,a,u,p,h,g,x,b=function(){return Pc(e,o)};if(b()===":"){if(Pc(e,1)!==":")return;o+=2,r++,n=r}for(;b();){if(r===8)return;if(b()===":"){if(n!==null)return;o++,r++,n=r;continue}for(i=a=0;a<4&&zf(FRe,b());)i=i*16+O3(b(),16),o++,a++;if(b()==="."){if(a===0||(o-=a,r>6))return;for(u=0;b();){if(p=null,u>0)if(b()==="."&&u<4)o++;else return;if(!zf(yX,b()))return;for(;zf(yX,b());){if(h=O3(b(),10),p===null)p=h;else{if(p===0)return;p=p*10+h}if(p>255)return;o++}t[r]=t[r]*256+p,u++,(u===2||u===4)&&r++}if(u!==4)return;break}else if(b()===":"){if(o++,!b())return}else if(b())return;t[r++]=i}if(n!==null)for(g=r-n,r=7;r!==0&&g>0;)x=t[r],t[r--]=t[n+g-1],t[n+--g]=x;else if(r!==8)return;return t},ssr=function(e){for(var t=null,r=1,n=null,o=0,i=0;i<8;i++)e[i]!==0?(o>r&&(t=n,r=o),n=null,o=0):(n===null&&(n=i),++o);return o>r?n:t},lM=function(e){var t,r,n,o;if(typeof e=="number"){for(t=[],r=0;r<4;r++)Yar(t,e%256),e=Var(e/256);return uM(t,".")}if(typeof e=="object"){for(t="",n=ssr(e),r=0;r<8;r++)o&&e[r]===0||(o&&(o=!1),n===r?(t+=r?":":"::",o=!0):(t+=Gar(e[r],16),r<7&&(t+=":")));return"["+t+"]"}return e},A3={},URe=bX({},A3,{" ":1,"\"":1,"<":1,">":1,"`":1}),BRe=bX({},URe,{"#":1,"?":1,"{":1,"}":1}),iX=bX({},BRe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),nv=function(e,t){var r=Rar(e,0);return r>32&&r<127&&!gX(t,e)?e:encodeURIComponent(e)},T3={ftp:21,file:null,http:80,https:443,ws:80,wss:443},cM=function(e,t){var r;return e.length===2&&zf(zRe,Pc(e,0))&&((r=Pc(e,1))===":"||!t&&r==="|")},ARe=function(e){var t;return e.length>1&&cM(fM(e,0,2))&&(e.length===2||(t=Pc(e,2))==="/"||t==="\\"||t==="?"||t==="#")},lsr=function(e){return e==="."||L3(e)==="%2e"},usr=function(e){return e=L3(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},aX={},DRe={},sX={},NRe={},ORe={},lX={},LRe={},PRe={},M3={},C3={},uX={},cX={},fX={},pX={},kRe={},dX={},Tb={},$p={},RRe={},D0={},Nh={},wX=function(e,t,r){var n=Oh(e),o,i,a;if(t){if(i=this.parse(n),i)throw new vX(i);this.searchParams=null}else{if(r!==void 0&&(o=new wX(r,!0)),i=this.parse(n,null,o),i)throw new vX(i);a=Bar(new Uar),a.bindURL(this),this.searchParams=a}};wX.prototype={type:"URL",parse:function(e,t,r){var n=this,o=t||aX,i=0,a="",u=!1,p=!1,h=!1,g,x,b,T;for(e=Oh(e),t||(n.scheme="",n.username="",n.password="",n.host=null,n.port=null,n.path=[],n.query=null,n.fragment=null,n.cannotBeABaseURL=!1,e=nX(e,rsr,""),e=nX(e,nsr,"$1")),e=nX(e,osr,""),g=Ib(e);i<=g.length;){switch(x=g[i],o){case aX:if(x&&zf(zRe,x))a+=L3(x),o=DRe;else{if(t)return oX;o=sX;continue}break;case DRe:if(x&&(zf(Kar,x)||x==="+"||x==="-"||x==="."))a+=L3(x);else if(x===":"){if(t&&(n.isSpecial()!==gX(T3,a)||a==="file"&&(n.includesCredentials()||n.port!==null)||n.scheme==="file"&&!n.host))return;if(n.scheme=a,t){n.isSpecial()&&T3[n.scheme]===n.port&&(n.port=null);return}a="",n.scheme==="file"?o=pX:n.isSpecial()&&r&&r.scheme===n.scheme?o=NRe:n.isSpecial()?o=PRe:g[i+1]==="/"?(o=ORe,i++):(n.cannotBeABaseURL=!0,Mb(n.path,""),o=RRe)}else{if(t)return oX;a="",o=sX,i=0;continue}break;case sX:if(!r||r.cannotBeABaseURL&&x!=="#")return oX;if(r.cannotBeABaseURL&&x==="#"){n.scheme=r.scheme,n.path=qf(r.path),n.query=r.query,n.fragment="",n.cannotBeABaseURL=!0,o=Nh;break}o=r.scheme==="file"?pX:lX;continue;case NRe:if(x==="/"&&g[i+1]==="/")o=M3,i++;else{o=lX;continue}break;case ORe:if(x==="/"){o=C3;break}else{o=$p;continue}case lX:if(n.scheme=r.scheme,x===Oc)n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=qf(r.path),n.query=r.query;else if(x==="/"||x==="\\"&&n.isSpecial())o=LRe;else if(x==="?")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=qf(r.path),n.query="",o=D0;else if(x==="#")n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=qf(r.path),n.query=r.query,n.fragment="",o=Nh;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,n.path=qf(r.path),n.path.length--,o=$p;continue}break;case LRe:if(n.isSpecial()&&(x==="/"||x==="\\"))o=M3;else if(x==="/")o=C3;else{n.username=r.username,n.password=r.password,n.host=r.host,n.port=r.port,o=$p;continue}break;case PRe:if(o=M3,x!=="/"||Pc(a,i+1)!=="/")continue;i++;break;case M3:if(x!=="/"&&x!=="\\"){o=C3;continue}break;case C3:if(x==="@"){u&&(a="%40"+a),u=!0,b=Ib(a);for(var A=0;A<b.length;A++){var L=b[A];if(L===":"&&!h){h=!0;continue}var P=nv(L,iX);h?n.password+=P:n.username+=P}a=""}else if(x===Oc||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(u&&a==="")return Zar;i-=Ib(a).length+1,a="",o=uX}else a+=x;break;case uX:case cX:if(t&&n.scheme==="file"){o=dX;continue}else if(x===":"&&!p){if(a==="")return A0;if(T=n.parseHost(a),T)return T;if(a="",o=fX,t===cX)return}else if(x===Oc||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()){if(n.isSpecial()&&a==="")return A0;if(t&&a===""&&(n.includesCredentials()||n.port!==null))return;if(T=n.parseHost(a),T)return T;if(a="",o=Tb,t)return;continue}else x==="["?p=!0:x==="]"&&(p=!1),a+=x;break;case fX:if(zf(yX,x))a+=x;else if(x===Oc||x==="/"||x==="?"||x==="#"||x==="\\"&&n.isSpecial()||t){if(a!==""){var k=O3(a,10);if(k>65535)return CRe;n.port=n.isSpecial()&&k===T3[n.scheme]?null:k,a=""}if(t)return;o=Tb;continue}else return CRe;break;case pX:if(n.scheme="file",x==="/"||x==="\\")o=kRe;else if(r&&r.scheme==="file")switch(x){case Oc:n.host=r.host,n.path=qf(r.path),n.query=r.query;break;case"?":n.host=r.host,n.path=qf(r.path),n.query="",o=D0;break;case"#":n.host=r.host,n.path=qf(r.path),n.query=r.query,n.fragment="",o=Nh;break;default:ARe(uM(qf(g,i),""))||(n.host=r.host,n.path=qf(r.path),n.shortenPath()),o=$p;continue;}else{o=$p;continue}break;case kRe:if(x==="/"||x==="\\"){o=dX;break}r&&r.scheme==="file"&&!ARe(uM(qf(g,i),""))&&(cM(r.path[0],!0)?Mb(n.path,r.path[0]):n.host=r.host),o=$p;continue;case dX:if(x===Oc||x==="/"||x==="\\"||x==="?"||x==="#"){if(!t&&cM(a))o=$p;else if(a===""){if(n.host="",t)return;o=Tb}else{if(T=n.parseHost(a),T)return T;if(n.host==="localhost"&&(n.host=""),t)return;a="",o=Tb}continue}else a+=x;break;case Tb:if(n.isSpecial()){if(o=$p,x!=="/"&&x!=="\\")continue}else if(!t&&x==="?")n.query="",o=D0;else if(!t&&x==="#")n.fragment="",o=Nh;else if(x!==Oc&&(o=$p,x!=="/"))continue;break;case $p:if(x===Oc||x==="/"||x==="\\"&&n.isSpecial()||!t&&(x==="?"||x==="#")){if(usr(a)?(n.shortenPath(),x!=="/"&&!(x==="\\"&&n.isSpecial())&&Mb(n.path,"")):lsr(a)?x!=="/"&&!(x==="\\"&&n.isSpecial())&&Mb(n.path,""):(n.scheme==="file"&&!n.path.length&&cM(a)&&(n.host&&(n.host=""),a=Pc(a,0)+":"),Mb(n.path,a)),a="",n.scheme==="file"&&(x===Oc||x==="?"||x==="#"))for(;n.path.length>1&&n.path[0]==="";)War(n.path);x==="?"?(n.query="",o=D0):x==="#"&&(n.fragment="",o=Nh)}else a+=nv(x,BRe);break;case RRe:x==="?"?(n.query="",o=D0):x==="#"?(n.fragment="",o=Nh):x!==Oc&&(n.path[0]+=nv(x,A3));break;case D0:!t&&x==="#"?(n.fragment="",o=Nh):x!==Oc&&(x==="'"&&n.isSpecial()?n.query+="%27":x==="#"?n.query+="%23":n.query+=nv(x,A3));break;case Nh:x!==Oc&&(n.fragment+=nv(x,URe));break;}i++}},parseHost:function(e){var t,r,n;if(Pc(e,0)==="["){if(Pc(e,e.length-1)!=="]"||(t=asr(fM(e,1,-1)),!t))return A0;this.host=t}else if(this.isSpecial()){if(e=jar(e),zf(esr,e)||(t=isr(e),t===null))return A0;this.host=t}else{if(zf(tsr,e))return A0;for(t="",r=Ib(e),n=0;n<r.length;n++)t+=nv(r[n],A3);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return gX(T3,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!cM(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,r=e.username,n=e.password,o=e.host,i=e.port,a=e.path,u=e.query,p=e.fragment,h=t+":";return o!==null?(h+="//",e.includesCredentials()&&(h+=r+(n?":"+n:"")+"@"),h+=lM(o),i!==null&&(h+=":"+i)):t==="file"&&(h+="//"),h+=e.cannotBeABaseURL?a[0]:a.length?"/"+uM(a,"/"):"",u!==null&&(h+="?"+u),p!==null&&(h+="#"+p),h},setHref:function(e){var t=this.parse(e);if(t)throw new vX(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Cb(e.path[0]).origin}catch(r){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+lM(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Oh(e)+":",aX)},getUsername:function(){return this.username},setUsername:function(e){var t=Ib(Oh(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var r=0;r<t.length;r++)this.username+=nv(t[r],iX)}},getPassword:function(){return this.password},setPassword:function(e){var t=Ib(Oh(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var r=0;r<t.length;r++)this.password+=nv(t[r],iX)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?lM(e):lM(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,uX)},getHostname:function(){var e=this.host;return e===null?"":lM(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,cX)},getPort:function(){var e=this.port;return e===null?"":Oh(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Oh(e),e===""?this.port=null:this.parse(e,fX))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+uM(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Tb))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Oh(e),e===""?this.query=null:(Pc(e,0)==="?"&&(e=fM(e,1)),this.query="",this.parse(e,D0)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Oh(e),e===""){this.fragment=null;return}Pc(e,0)==="#"&&(e=fM(e,1)),this.fragment="",this.parse(e,Nh)},update:function(){this.query=this.searchParams.serialize()||null}};var Cb=function(t){var r=kar(this,Il),n=zar(arguments.length,1)>1?arguments[1]:void 0,o=Far(r,new wX(t,!1,n));_X||(r.href=o.serialize(),r.origin=o.getOrigin(),r.protocol=o.getProtocol(),r.username=o.getUsername(),r.password=o.getPassword(),r.host=o.getHost(),r.hostname=o.getHostname(),r.port=o.getPort(),r.pathname=o.getPathname(),r.search=o.getSearch(),r.searchParams=o.getSearchParams(),r.hash=o.getHash())},Il=Cb.prototype,Lc=function(e,t){return{get:function(){return N3(this)[e]()},set:t&&function(r){return N3(this)[t](r)},configurable:!0,enumerable:!0}};_X&&(Nc(Il,"href",Lc("serialize","setHref")),Nc(Il,"origin",Lc("getOrigin")),Nc(Il,"protocol",Lc("getProtocol","setProtocol")),Nc(Il,"username",Lc("getUsername","setUsername")),Nc(Il,"password",Lc("getPassword","setPassword")),Nc(Il,"host",Lc("getHost","setHost")),Nc(Il,"hostname",Lc("getHostname","setHostname")),Nc(Il,"port",Lc("getPort","setPort")),Nc(Il,"pathname",Lc("getPathname","setPathname")),Nc(Il,"search",Lc("getSearch","setSearch")),Nc(Il,"searchParams",Lc("getSearchParams")),Nc(Il,"hash",Lc("getHash","setHash")));D3(Il,"toJSON",function(){return N3(this).serialize()},{enumerable:!0});D3(Il,"toString",function(){return N3(this).serialize()},{enumerable:!0});sM&&(hX=sM.createObjectURL,mX=sM.revokeObjectURL,hX&&D3(Cb,"createObjectURL",TRe(hX,sM)),mX&&D3(Cb,"revokeObjectURL",TRe(mX,sM)));var hX,mX;qar(Cb,"URL");Lar({global:!0,constructor:!0,forced:!Par,sham:!_X},{URL:Cb})});var GRe=M(()=>{"use strict";VRe()});var $Re=M(()=>{"use strict";var csr=re(),fsr=Fr(),WRe=Tt(),psr=Wu(),HRe=Hr(),dsr=nM(),EX=fsr("URL"),hsr=dsr&&WRe(function(){EX.canParse()}),msr=WRe(function(){return EX.canParse.length!==1});csr({target:"URL",stat:!0,forced:!hsr||msr},{canParse:function(t){var r=psr(arguments.length,1),n=HRe(t),o=r<2||arguments[1]===void 0?void 0:HRe(arguments[1]);try{return!!new EX(n,o)}catch(i){return!1}}})});var ZRe=M(()=>{"use strict";var gsr=re(),vsr=Fr(),ysr=Wu(),YRe=Hr(),_sr=nM(),xsr=vsr("URL");gsr({target:"URL",stat:!0,forced:!_sr},{parse:function(t){var r=ysr(arguments.length,1),n=YRe(t),o=r<2||arguments[1]===void 0?void 0:YRe(arguments[1]);try{return new xsr(n,o)}catch(i){return null}}})});var KRe=M(()=>{"use strict";var bsr=re(),wsr=er();bsr({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return wsr(URL.prototype.toString,this)}})});var XRe=M(()=>{"use strict";rX()});var tje=M(()=>{"use strict";var Esr=fo(),P3=vt(),JRe=Hr(),Ssr=Wu(),eje=URLSearchParams,k3=eje.prototype,Isr=P3(k3.append),QRe=P3(k3.delete),Tsr=P3(k3.forEach),Msr=P3([].push),SX=new eje("a=1&a=2&b=3");SX.delete("a",1);SX.delete("b",void 0);SX+""!="a=2"&&Esr(k3,"delete",function(e){var t=arguments.length,r=t<2?void 0:arguments[1];if(t&&r===void 0)return QRe(this,e);var n=[];Tsr(this,function(x,b){Msr(n,{key:b,value:x})}),Ssr(t,1);for(var o=JRe(e),i=JRe(r),a=0,u=0,p=!1,h=n.length,g;a<h;)g=n[a++],p||g.key===o?(p=!0,QRe(this,g.key)):u++;for(;u<h;)g=n[u++],g.key===o&&g.value===i||Isr(this,g.key,g.value)},{enumerable:!0,unsafe:!0})});var ije=M(()=>{"use strict";var Csr=fo(),nje=vt(),Asr=Hr(),Dsr=Wu(),oje=URLSearchParams,IX=oje.prototype,Nsr=nje(IX.getAll),Osr=nje(IX.has),rje=new oje("a=1");(rje.has("a",2)||!rje.has("a",void 0))&&Csr(IX,"has",function(t){var r=arguments.length,n=r<2?void 0:arguments[1];if(r&&n===void 0)return Osr(this,t);var o=Nsr(this,t);Dsr(r,1);for(var i=Asr(n),a=0;a<o.length;)if(o[a++]===i)return!0;return!1},{enumerable:!0,unsafe:!0})});var aje=M(()=>{"use strict";var Lsr=Tr(),Psr=vt(),ksr=ei(),TX=URLSearchParams.prototype,Rsr=Psr(TX.forEach);Lsr&&!("size"in TX)&&ksr(TX,"size",{get:function(){var t=0;return Rsr(this,function(){t++}),t},configurable:!0,enumerable:!0})});var lje=M((rJr,sje)=>{"use strict";Tme();Lme();Pme();kme();Rme();jme();qme();zme();Fme();Ume();Bme();Vme();Gme();Hme();Wme();yge();Ege();eV();Vge();oV();Xge();tve();nve();ave();sve();uve();fve();uV();cV();gve();vve();xve();Ave();Dve();Ove();Lve();DI();eye();oye();iye();sye();uye();vye();_ye();bye();Sye();Iye();Uye();Gye();Hye();DV();OV();LV();Zye();Kye();Xye();kV();M0e();z0e();H0e();$0e();rG();vG();yG();y1e();x1e();E1e();S1e();P1e();k1e();F1e();G1e();W1e();J1e();t_e();i_e();IG();DG();PG();kG();RG();jG();FG();UG();BG();GG();HG();WG();$G();YG();zB();D_e();vO();rH();J_e();txe();nxe();oxe();ixe();lxe();cxe();fxe();dxe();mxe();vxe();yxe();_xe();xxe();Exe();Txe();Mxe();Cxe();zxe();Fxe();Bxe();Gxe();Hxe();Wxe();$xe();Yxe();ebe();lbe();dbe();_be();wbe();Mbe();Cbe();Nbe();Lbe();kbe();Rbe();Bbe();Vbe();Gbe();$be();Ybe();Zbe();Xbe();IH();TH();ewe();rwe();owe();awe();lwe();uwe();cwe();fwe();gwe();vwe();ywe();bwe();wwe();Swe();Twe();zEe();uW();cW();GEe();hW();mW();$Ee();eSe();nSe();oSe();lSe();uSe();cSe();fSe();pSe();dSe();hSe();_Se();bSe();wSe();zSe();USe();FO();$Se();ZSe();JSe();r2e();o2e();kW();qW();FW();BW();GW();$W();ZW();P2e();q2e();V2e();XW();$2e();JW();QW();sIe();a$();yIe();_Ie();EIe();SIe();DIe();g$();kIe();FIe();VIe();HIe();E$();JIe();nTe();lTe();pTe();dTe();hTe();mTe();gTe();vTe();yTe();_Te();xTe();bTe();wTe();ETe();STe();XTe();JTe();QTe();eMe();tMe();rMe();nMe();oMe();iMe();q$();lMe();cMe();pMe();mMe();vMe();_Me();z$();F$();EMe();SMe();TMe();CMe();LMe();kMe();jMe();qMe();FMe();BMe();GMe();WMe();JMe();QMe();tCe();sCe();uCe();hCe();eY();tY();gCe();nY();bCe();mL();jCe();qCe();UCe();hAe();mAe();gAe();vAe();yAe();_Ae();bAe();wAe();SAe();IAe();CAe();AAe();OAe();LAe();PAe();kAe();BAe();VAe();GAe();HAe();WAe();oDe();uDe();bDe();IDe();MDe();CDe();DDe();NDe();jDe();qDe();FDe();UDe();BDe();VDe();GDe();$De();YDe();t4e();s4e();u4e();c4e();f4e();h4e();m4e();x4e();w4e();S4e();I4e();C4e();A4e();D4e();N4e();L4e();R4e();z4e();F4e();U4e();B4e();V4e();G4e();H4e();W4e();$4e();Y4e();K4e();X4e();J4e();Q4e();eNe();rNe();iNe();vNe();INe();MNe();ANe();DNe();ONe();LNe();PNe();jNe();qNe();zNe();FNe();VNe();HNe();WNe();YNe();KNe();XNe();e5e();t5e();r5e();o5e();a5e();s5e();l5e();u5e();c5e();p5e();d5e();h5e();m5e();g5e();v5e();y5e();_5e();E5e();S5e();A5e();D5e();L5e();P5e();k5e();z5e();F5e();U5e();B5e();nOe();oOe();iOe();aOe();sOe();dOe();mOe();vOe();bOe();EOe();IOe();COe();DOe();OOe();zOe();FOe();UOe();BOe();$Oe();YOe();KOe();XOe();QOe();eLe();tLe();rLe();nLe();oLe();iLe();aLe();sLe();uLe();fLe();dLe();hLe();mLe();gLe();vLe();yLe();_Le();xLe();ILe();DLe();KLe();XLe();JLe();QLe();e3e();t3e();r3e();n3e();i3e();a3e();d3e();h3e();m3e();g3e();v3e();y3e();_3e();x3e();w3e();E3e();I3e();M3e();C3e();A3e();D3e();N3e();O3e();L3e();P3e();k3e();$3e();J3e();ePe();tPe();nPe();oPe();aPe();lPe();cPe();pPe();dPe();mPe();gPe();_Pe();xPe();wPe();SPe();NPe();RPe();VPe();YPe();ake();dke();mke();Ske();Ike();Mke();qke();Hke();GRe();$Re();ZRe();KRe();XRe();tje();ije();aje();sje.exports=E5()});var MX=M((nJr,uje)=>{"use strict";uje.exports=lje()});var D6e=M((HJr,A6e)=>{"use strict";var ldr="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";A6e.exports=ldr});var P6e=M((WJr,L6e)=>{"use strict";var udr=D6e();function N6e(){}function O6e(){}O6e.resetWarningCache=N6e;L6e.exports=function(){function e(n,o,i,a,u,p){if(p!==udr){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:O6e,resetWarningCache:N6e};return r.PropTypes=r,r}});var xt=M((ZJr,k6e)=>{k6e.exports=P6e()();var $Jr,YJr});var mqe=M(LM=>{"use strict";H4();var qdr=we(),dqe=60103;LM.Fragment=60107;typeof Symbol=="function"&&Symbol.for&&(PJ=Symbol.for,dqe=PJ("react.element"),LM.Fragment=PJ("react.fragment"));var PJ,zdr=qdr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Fdr=Object.prototype.hasOwnProperty,Udr={key:!0,ref:!0,__self:!0,__source:!0};function hqe(e,t,r){var n,o={},i=null,a=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(a=t.ref);for(n in t)Fdr.call(t,n)&&!Udr.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)o[n]===void 0&&(o[n]=t[n]);return{$$typeof:dqe,type:e,key:i,ref:a,props:o,_owner:zdr.current}}LM.jsx=hqe;LM.jsxs=hqe});var vqe=M((nen,gqe)=>{"use strict";gqe.exports=mqe()});var GP=M((Yrn,Jze)=>{"use strict";Jze.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,o,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(o=n;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(o=n;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[o]))return!1;for(o=n;o--!==0;){var a=i[o];if(!e(t[a],r[a]))return!1}return!0}return t!==t&&r!==r}});var oQ=M((uin,U8e)=>{"use strict";U8e.exports=function(t,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}}});var cu=M((cin,G8e)=>{"use strict";var jmr=oQ(),q0=Object.prototype.toString;function sQ(e){return q0.call(e)==="[object Array]"}function iQ(e){return typeof e=="undefined"}function qmr(e){return e!==null&&!iQ(e)&&e.constructor!==null&&!iQ(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function zmr(e){return q0.call(e)==="[object ArrayBuffer]"}function Fmr(e){return typeof FormData!="undefined"&&e instanceof FormData}function Umr(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function Bmr(e){return typeof e=="string"}function Vmr(e){return typeof e=="number"}function B8e(e){return e!==null&&typeof e=="object"}function rk(e){if(q0.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Gmr(e){return q0.call(e)==="[object Date]"}function Hmr(e){return q0.call(e)==="[object File]"}function Wmr(e){return q0.call(e)==="[object Blob]"}function V8e(e){return q0.call(e)==="[object Function]"}function $mr(e){return B8e(e)&&V8e(e.pipe)}function Ymr(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function Zmr(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Kmr(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function lQ(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),sQ(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function aQ(){var e={};function t(o,i){rk(e[i])&&rk(o)?e[i]=aQ(e[i],o):rk(o)?e[i]=aQ({},o):sQ(o)?e[i]=o.slice():e[i]=o}for(var r=0,n=arguments.length;r<n;r++)lQ(arguments[r],t);return e}function Xmr(e,t,r){return lQ(t,function(o,i){r&&typeof o=="function"?e[i]=jmr(o,r):e[i]=o}),e}function Jmr(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}G8e.exports={isArray:sQ,isArrayBuffer:zmr,isBuffer:qmr,isFormData:Fmr,isArrayBufferView:Umr,isString:Bmr,isNumber:Vmr,isObject:B8e,isPlainObject:rk,isUndefined:iQ,isDate:Gmr,isFile:Hmr,isBlob:Wmr,isFunction:V8e,isStream:$mr,isURLSearchParams:Ymr,isStandardBrowserEnv:Kmr,forEach:lQ,merge:aQ,extend:Xmr,trim:Zmr,stripBOM:Jmr}});var uQ=M((fin,W8e)=>{"use strict";var Gb=cu();function H8e(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}W8e.exports=function(t,r,n){if(!r)return t;var o;if(n)o=n(r);else if(Gb.isURLSearchParams(r))o=r.toString();else{var i=[];Gb.forEach(r,function(p,h){p===null||typeof p=="undefined"||(Gb.isArray(p)?h=h+"[]":p=[p],Gb.forEach(p,function(x){Gb.isDate(x)?x=x.toISOString():Gb.isObject(x)&&(x=JSON.stringify(x)),i.push(H8e(h)+"="+H8e(x))}))}),o=i.join("&")}if(o){var a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}});var Y8e=M((pin,$8e)=>{"use strict";var Qmr=cu();function nk(){this.handlers=[]}nk.prototype.use=function(t,r,n){return this.handlers.push({fulfilled:t,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1};nk.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};nk.prototype.forEach=function(t){Qmr.forEach(this.handlers,function(n){n!==null&&t(n)})};$8e.exports=nk});var K8e=M((din,Z8e)=>{"use strict";var egr=cu();Z8e.exports=function(t,r){egr.forEach(t,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])})}});var cQ=M((hin,X8e)=>{"use strict";X8e.exports=function(t,r,n,o,i){return t.config=r,n&&(t.code=n),t.request=o,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var fQ=M((min,J8e)=>{"use strict";var tgr=cQ();J8e.exports=function(t,r,n,o,i){var a=new Error(t);return tgr(a,r,n,o,i)}});var eFe=M((gin,Q8e)=>{"use strict";var rgr=fQ();Q8e.exports=function(t,r,n){var o=n.config.validateStatus;!n.status||!o||o(n.status)?t(n):r(rgr("Request failed with status code "+n.status,n.config,null,n.request,n))}});var rFe=M((vin,tFe)=>{"use strict";var ok=cu();tFe.exports=ok.isStandardBrowserEnv()?function(){return{write:function(r,n,o,i,a,u){var p=[];p.push(r+"="+encodeURIComponent(n)),ok.isNumber(o)&&p.push("expires="+new Date(o).toGMTString()),ok.isString(i)&&p.push("path="+i),ok.isString(a)&&p.push("domain="+a),u===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(r){var n=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var oFe=M((yin,nFe)=>{"use strict";nFe.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var aFe=M((_in,iFe)=>{"use strict";iFe.exports=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t}});var lFe=M((xin,sFe)=>{"use strict";var ngr=oFe(),ogr=aFe();sFe.exports=function(t,r){return t&&!ngr(r)?ogr(t,r):r}});var cFe=M((bin,uFe)=>{"use strict";var pQ=cu(),igr=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];uFe.exports=function(t){var r={},n,o,i;return t&&pQ.forEach(t.split(`
`),function(u){if(i=u.indexOf(":"),n=pQ.trim(u.substr(0,i)).toLowerCase(),o=pQ.trim(u.substr(i+1)),n){if(r[n]&&igr.indexOf(n)>=0)return;n==="set-cookie"?r[n]=(r[n]?r[n]:[]).concat([o]):r[n]=r[n]?r[n]+", "+o:o}}),r}});var dFe=M((win,pFe)=>{"use strict";var fFe=cu();pFe.exports=fFe.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),n;function o(i){var a=i;return t&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return n=o(window.location.href),function(a){var u=fFe.isString(a)?o(a):a;return u.protocol===n.protocol&&u.host===n.host}}():function(){return function(){return!0}}()});var GM=M((Ein,hFe)=>{"use strict";function dQ(e){this.message=e}dQ.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};dQ.prototype.__CANCEL__=!0;hFe.exports=dQ});var mQ=M((Sin,mFe)=>{"use strict";var ik=cu(),agr=eFe(),sgr=rFe(),lgr=uQ(),ugr=lFe(),cgr=cFe(),fgr=dFe(),hQ=fQ(),pgr=HM(),dgr=GM();mFe.exports=function(t){return new Promise(function(n,o){var i=t.data,a=t.headers,u=t.responseType,p;function h(){t.cancelToken&&t.cancelToken.unsubscribe(p),t.signal&&t.signal.removeEventListener("abort",p)}ik.isFormData(i)&&delete a["Content-Type"];var g=new XMLHttpRequest;if(t.auth){var x=t.auth.username||"",b=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";a.Authorization="Basic "+btoa(x+":"+b)}var T=ugr(t.baseURL,t.url);g.open(t.method.toUpperCase(),lgr(T,t.params,t.paramsSerializer),!0),g.timeout=t.timeout;function A(){if(g){var P="getAllResponseHeaders"in g?cgr(g.getAllResponseHeaders()):null,k=!u||u==="text"||u==="json"?g.responseText:g.response,q={data:k,status:g.status,statusText:g.statusText,headers:P,config:t,request:g};agr(function(H){n(H),h()},function(H){o(H),h()},q),g=null}}if("onloadend"in g?g.onloadend=A:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(A)},g.onabort=function(){g&&(o(hQ("Request aborted",t,"ECONNABORTED",g)),g=null)},g.onerror=function(){o(hQ("Network Error",t,null,g)),g=null},g.ontimeout=function(){var k=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",q=t.transitional||pgr.transitional;t.timeoutErrorMessage&&(k=t.timeoutErrorMessage),o(hQ(k,t,q.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",g)),g=null},ik.isStandardBrowserEnv()){var L=(t.withCredentials||fgr(T))&&t.xsrfCookieName?sgr.read(t.xsrfCookieName):void 0;L&&(a[t.xsrfHeaderName]=L)}"setRequestHeader"in g&&ik.forEach(a,function(k,q){typeof i=="undefined"&&q.toLowerCase()==="content-type"?delete a[q]:g.setRequestHeader(q,k)}),ik.isUndefined(t.withCredentials)||(g.withCredentials=!!t.withCredentials),u&&u!=="json"&&(g.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&g.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&g.upload&&g.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(p=function(P){g&&(o(!P||P&&P.type?new dgr("canceled"):P),g.abort(),g=null)},t.cancelToken&&t.cancelToken.subscribe(p),t.signal&&(t.signal.aborted?p():t.signal.addEventListener("abort",p))),i||(i=null),g.send(i)})}});var HM=M((Iin,yFe)=>{"use strict";var ds=cu(),gFe=K8e(),hgr=cQ(),mgr={"Content-Type":"application/x-www-form-urlencoded"};function vFe(e,t){!ds.isUndefined(e)&&ds.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function ggr(){var e;return typeof XMLHttpRequest!="undefined"?e=mQ():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=mQ()),e}function vgr(e,t,r){if(ds.isString(e))try{return(t||JSON.parse)(e),ds.trim(e)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(e)}var ak={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:ggr(),transformRequest:[function(t,r){return gFe(r,"Accept"),gFe(r,"Content-Type"),ds.isFormData(t)||ds.isArrayBuffer(t)||ds.isBuffer(t)||ds.isStream(t)||ds.isFile(t)||ds.isBlob(t)?t:ds.isArrayBufferView(t)?t.buffer:ds.isURLSearchParams(t)?(vFe(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ds.isObject(t)||r&&r["Content-Type"]==="application/json"?(vFe(r,"application/json"),vgr(t)):t}],transformResponse:[function(t){var r=this.transitional||ak.transitional,n=r&&r.silentJSONParsing,o=r&&r.forcedJSONParsing,i=!n&&this.responseType==="json";if(i||o&&ds.isString(t)&&t.length)try{return JSON.parse(t)}catch(a){if(i)throw a.name==="SyntaxError"?hgr(a,this,"E_JSON_PARSE"):a}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ds.forEach(["delete","get","head"],function(t){ak.headers[t]={}});ds.forEach(["post","put","patch"],function(t){ak.headers[t]=ds.merge(mgr)});yFe.exports=ak});var xFe=M((Tin,_Fe)=>{"use strict";var ygr=cu(),_gr=HM();_Fe.exports=function(t,r,n){var o=this||_gr;return ygr.forEach(n,function(a){t=a.call(o,t,r)}),t}});var gQ=M((Min,bFe)=>{"use strict";bFe.exports=function(t){return!!(t&&t.__CANCEL__)}});var SFe=M((Cin,EFe)=>{"use strict";var wFe=cu(),vQ=xFe(),xgr=gQ(),bgr=HM(),wgr=GM();function yQ(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new wgr("canceled")}EFe.exports=function(t){yQ(t),t.headers=t.headers||{},t.data=vQ.call(t,t.data,t.headers,t.transformRequest),t.headers=wFe.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),wFe.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||bgr.adapter;return r(t).then(function(o){return yQ(t),o.data=vQ.call(t,o.data,o.headers,t.transformResponse),o},function(o){return xgr(o)||(yQ(t),o&&o.response&&(o.response.data=vQ.call(t,o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})}});var _Q=M((Ain,IFe)=>{"use strict";var Xu=cu();IFe.exports=function(t,r){r=r||{};var n={};function o(g,x){return Xu.isPlainObject(g)&&Xu.isPlainObject(x)?Xu.merge(g,x):Xu.isPlainObject(x)?Xu.merge({},x):Xu.isArray(x)?x.slice():x}function i(g){if(Xu.isUndefined(r[g])){if(!Xu.isUndefined(t[g]))return o(void 0,t[g])}else return o(t[g],r[g])}function a(g){if(!Xu.isUndefined(r[g]))return o(void 0,r[g])}function u(g){if(Xu.isUndefined(r[g])){if(!Xu.isUndefined(t[g]))return o(void 0,t[g])}else return o(void 0,r[g])}function p(g){if(g in r)return o(t[g],r[g]);if(g in t)return o(void 0,t[g])}var h={url:a,method:a,data:a,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:p};return Xu.forEach(Object.keys(t).concat(Object.keys(r)),function(x){var b=h[x]||i,T=b(x);Xu.isUndefined(T)&&b!==p||(n[x]=T)}),n}});var xQ=M((Din,TFe)=>{TFe.exports={version:"0.24.0"}});var AFe=M((Nin,CFe)=>{"use strict";var Egr=xQ().version,bQ={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){bQ[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});var MFe={};bQ.transitional=function(t,r,n){function o(i,a){return"[Axios v"+Egr+"] Transitional option '"+i+"'"+a+(n?". "+n:"")}return function(i,a,u){if(t===!1)throw new Error(o(a," has been removed"+(r?" in "+r:"")));return r&&!MFe[a]&&(MFe[a]=!0,console.warn(o(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(i,a,u):!0}};function Sgr(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var n=Object.keys(e),o=n.length;o-->0;){var i=n[o],a=t[i];if(a){var u=e[i],p=u===void 0||a(u,i,e);if(p!==!0)throw new TypeError("option "+i+" must be "+p);continue}if(r!==!0)throw Error("Unknown option "+i)}}CFe.exports={assertOptions:Sgr,validators:bQ}});var kFe=M((Oin,PFe)=>{"use strict";var OFe=cu(),Igr=uQ(),DFe=Y8e(),NFe=SFe(),sk=_Q(),LFe=AFe(),Hb=LFe.validators;function WM(e){this.defaults=e,this.interceptors={request:new DFe,response:new DFe}}WM.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=sk(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&LFe.assertOptions(r,{silentJSONParsing:Hb.transitional(Hb.boolean),forcedJSONParsing:Hb.transitional(Hb.boolean),clarifyTimeoutError:Hb.transitional(Hb.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(t)===!1||(o=o&&b.synchronous,n.unshift(b.fulfilled,b.rejected))});var i=[];this.interceptors.response.forEach(function(b){i.push(b.fulfilled,b.rejected)});var a;if(!o){var u=[NFe,void 0];for(Array.prototype.unshift.apply(u,n),u=u.concat(i),a=Promise.resolve(t);u.length;)a=a.then(u.shift(),u.shift());return a}for(var p=t;n.length;){var h=n.shift(),g=n.shift();try{p=h(p)}catch(x){g(x);break}}try{a=NFe(p)}catch(x){return Promise.reject(x)}for(;i.length;)a=a.then(i.shift(),i.shift());return a};WM.prototype.getUri=function(t){return t=sk(this.defaults,t),Igr(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};OFe.forEach(["delete","get","head","options"],function(t){WM.prototype[t]=function(r,n){return this.request(sk(n||{},{method:t,url:r,data:(n||{}).data}))}});OFe.forEach(["post","put","patch"],function(t){WM.prototype[t]=function(r,n,o){return this.request(sk(o||{},{method:t,url:r,data:n}))}});PFe.exports=WM});var jFe=M((Lin,RFe)=>{"use strict";var Tgr=GM();function Wb(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(o){t=o});var r=this;this.promise.then(function(n){if(r._listeners){var o,i=r._listeners.length;for(o=0;o<i;o++)r._listeners[o](n);r._listeners=null}}),this.promise.then=function(n){var o,i=new Promise(function(a){r.subscribe(a),o=a}).then(n);return i.cancel=function(){r.unsubscribe(o)},i},e(function(o){r.reason||(r.reason=new Tgr(o),t(r.reason))})}Wb.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Wb.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Wb.prototype.unsubscribe=function(t){if(this._listeners){var r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}};Wb.source=function(){var t,r=new Wb(function(o){t=o});return{token:r,cancel:t}};RFe.exports=Wb});var zFe=M((Pin,qFe)=>{"use strict";qFe.exports=function(t){return function(n){return t.apply(null,n)}}});var UFe=M((kin,FFe)=>{"use strict";FFe.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var GFe=M((Rin,wQ)=>{"use strict";var BFe=cu(),Mgr=oQ(),lk=kFe(),Cgr=_Q(),Agr=HM();function VFe(e){var t=new lk(e),r=Mgr(lk.prototype.request,t);return BFe.extend(r,lk.prototype,t),BFe.extend(r,t),r.create=function(o){return VFe(Cgr(e,o))},r}var Jp=VFe(Agr);Jp.Axios=lk;Jp.Cancel=GM();Jp.CancelToken=jFe();Jp.isCancel=gQ();Jp.VERSION=xQ().version;Jp.all=function(t){return Promise.all(t)};Jp.spread=zFe();Jp.isAxiosError=UFe();wQ.exports=Jp;wQ.exports.default=Jp});var mv=M((jin,HFe)=>{HFe.exports=GFe()});var $M=M((EQ,SQ)=>{(function(e,t){typeof EQ=="object"&&typeof SQ!="undefined"?SQ.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(EQ,function(){"use strict";var e={},t={};function r(o,i,a){if(t[o]=a,o==="index"){var u="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",p={};return t.shared(p),t.index(e,p),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([u],{type:"text/javascript"}))),e}}r("shared",["exports"],function(o){"use strict";function i(c,l,f,m){return new(f||(f=Promise))(function(_,S){function I(j){try{N(m.next(j))}catch(z){S(z)}}function C(j){try{N(m.throw(j))}catch(z){S(z)}}function N(j){var z;j.done?_(j.value):(z=j.value,z instanceof f?z:new f(function(B){B(z)})).then(I,C)}N((m=m.apply(c,l||[])).next())})}function a(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}typeof SuppressedError=="function"&&SuppressedError;var u=p;function p(c,l){this.x=c,this.y=l}p.prototype={clone:function(){return new p(this.x,this.y)},add:function(c){return this.clone()._add(c)},sub:function(c){return this.clone()._sub(c)},multByPoint:function(c){return this.clone()._multByPoint(c)},divByPoint:function(c){return this.clone()._divByPoint(c)},mult:function(c){return this.clone()._mult(c)},div:function(c){return this.clone()._div(c)},rotate:function(c){return this.clone()._rotate(c)},rotateAround:function(c,l){return this.clone()._rotateAround(c,l)},matMult:function(c){return this.clone()._matMult(c)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(c){return this.x===c.x&&this.y===c.y},dist:function(c){return Math.sqrt(this.distSqr(c))},distSqr:function(c){var l=c.x-this.x,f=c.y-this.y;return l*l+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith:function(c){return this.angleWithSep(c.x,c.y)},angleWithSep:function(c,l){return Math.atan2(this.x*l-this.y*c,this.x*c+this.y*l)},_matMult:function(c){var l=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=l,this},_add:function(c){return this.x+=c.x,this.y+=c.y,this},_sub:function(c){return this.x-=c.x,this.y-=c.y,this},_mult:function(c){return this.x*=c,this.y*=c,this},_div:function(c){return this.x/=c,this.y/=c,this},_multByPoint:function(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint:function(c){return this.x/=c.x,this.y/=c.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var c=this.y;return this.y=this.x,this.x=-c,this},_rotate:function(c){var l=Math.cos(c),f=Math.sin(c),m=f*this.x+l*this.y;return this.x=l*this.x-f*this.y,this.y=m,this},_rotateAround:function(c,l){var f=Math.cos(c),m=Math.sin(c),_=l.y+m*(this.x-l.x)+f*(this.y-l.y);return this.x=l.x+f*(this.x-l.x)-m*(this.y-l.y),this.y=_,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},p.convert=function(c){return c instanceof p?c:Array.isArray(c)?new p(c[0],c[1]):c};var h=a(u),g=x;function x(c,l,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=l,this.p2x=f,this.p2y=m}x.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,l){if(l===void 0&&(l=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var _=this.sampleCurveX(f)-c;if(Math.abs(_)<l)return f;var S=this.sampleCurveDerivativeX(f);if(Math.abs(S)<1e-6)break;f-=_/S}var I=0,C=1;for(f=c,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-c)<l));m++)c>_?I=f:C=f,f=.5*(C-I)+I;return f},solve:function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))}};var b=a(g);let T,A;function L(){return T==null&&(T=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),T}function P(){if(A==null&&(A=!1,L())){let l=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(l){for(let m=0;m<5*5;m++){let _=4*m;l.fillStyle=`rgb(${_},${_+1},${_+2})`,l.fillRect(m%5,Math.floor(m/5),1,1)}let f=l.getImageData(0,0,5,5).data;for(let m=0;m<5*5*4;m++)if(m%4!=3&&f[m]!==m){A=!0;break}}}return A||!1}function k(c,l,f,m){let _=new b(c,l,f,m);return S=>_.solve(S)}let q=k(.25,.1,.25,1);function U(c,l,f){return Math.min(f,Math.max(l,c))}function H(c,l,f){let m=f-l,_=((c-l)%m+m)%m+l;return _===l?f:_}function X(c,...l){for(let f of l)for(let m in f)c[m]=f[m];return c}let ee=1;function ne(c,l,f){let m={};for(let _ in c)m[_]=l.call(this,c[_],_,c);return m}function pe(c,l,f){let m={};for(let _ in c)l.call(this,c[_],_,c)&&(m[_]=c[_]);return m}function ue(c){return Array.isArray(c)?c.map(ue):typeof c=="object"&&c?ne(c,ue):c}let Ie={};function Re(c){Ie[c]||(typeof console!="undefined"&&console.warn(c),Ie[c]=!0)}function Te(c,l,f){return(f.y-c.y)*(l.x-c.x)>(l.y-c.y)*(f.x-c.x)}function Ee(c){return typeof WorkerGlobalScope!="undefined"&&c!==void 0&&c instanceof WorkerGlobalScope}let Ye=null;function Qe(c){return typeof ImageBitmap!="undefined"&&c instanceof ImageBitmap}let qe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ue(c,l,f,m,_){return i(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let S=new VideoFrame(c,{timestamp:0});try{let I=S==null?void 0:S.format;if(!I||!I.startsWith("BGR")&&!I.startsWith("RGB"))throw new Error(`Unrecognized format ${I}`);let C=I.startsWith("BGR"),N=new Uint8ClampedArray(m*_*4);if(yield S.copyTo(N,function(j,z,B,Y,K){let te=4*Math.max(-z,0),oe=(Math.max(0,B)-B)*Y*4+te,he=4*Y,ve=Math.max(0,z),$e=Math.max(0,B);return{rect:{x:ve,y:$e,width:Math.min(j.width,z+Y)-ve,height:Math.min(j.height,B+K)-$e},layout:[{offset:oe,stride:he}]}}(c,l,f,m,_)),C)for(let j=0;j<N.length;j+=4){let z=N[j];N[j]=N[j+2],N[j+2]=z}return N}finally{S.close()}})}let Ne,et,st="AbortError";function ft(){return new Error(st)}let Ze={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function tt(c){return Ze.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}let lt="global-dispatcher";class ze extends Error{constructor(l,f,m,_){super(`AJAXError: ${f} (${l}): ${m}`),this.status=l,this.statusText=f,this.url=m,this.body=_}}let ge=()=>Ee(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,We=function(c,l){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){let m=tt(c.url);if(m)return m(c,l);if(Ee(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:lt},l)}if(!(/^file:/.test(f=c.url)||/^file:/.test(ge())&&!/^\w+:/.test(f))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(m,_){return i(this,void 0,void 0,function*(){let S=new Request(m.url,{method:m.method||"GET",body:m.body,credentials:m.credentials,headers:m.headers,cache:m.cache,referrer:ge(),signal:_.signal});m.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");let I=yield fetch(S);if(!I.ok){let j=yield I.blob();throw new ze(I.status,I.statusText,m.url,j)}let C;C=m.type==="arrayBuffer"||m.type==="image"?I.arrayBuffer():m.type==="json"?I.json():I.text();let N=yield C;if(_.signal.aborted)throw ft();return{data:N,cacheControl:I.headers.get("Cache-Control"),expires:I.headers.get("Expires")}})}(c,l);if(Ee(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:lt},l)}var f;return function(m,_){return new Promise((S,I)=>{var C;let N=new XMLHttpRequest;N.open(m.method||"GET",m.url,!0),m.type!=="arrayBuffer"&&m.type!=="image"||(N.responseType="arraybuffer");for(let j in m.headers)N.setRequestHeader(j,m.headers[j]);m.type==="json"&&(N.responseType="text",!((C=m.headers)===null||C===void 0)&&C.Accept||N.setRequestHeader("Accept","application/json")),N.withCredentials=m.credentials==="include",N.onerror=()=>{I(new Error(N.statusText))},N.onload=()=>{if(!_.signal.aborted)if((N.status>=200&&N.status<300||N.status===0)&&N.response!==null){let j=N.response;if(m.type==="json")try{j=JSON.parse(N.response)}catch(z){return void I(z)}S({data:j,cacheControl:N.getResponseHeader("Cache-Control"),expires:N.getResponseHeader("Expires")})}else{let j=new Blob([N.response],{type:N.getResponseHeader("Content-Type")});I(new ze(N.status,N.statusText,m.url,j))}},_.signal.addEventListener("abort",()=>{N.abort(),I(ft())}),N.send(m.body)})}(c,l)};function Oe(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;let l=new URL(c),f=window.location;return l.protocol===f.protocol&&l.host===f.host}function at(c,l,f){f[c]&&f[c].indexOf(l)!==-1||(f[c]=f[c]||[],f[c].push(l))}function ot(c,l,f){if(f&&f[c]){let m=f[c].indexOf(l);m!==-1&&f[c].splice(m,1)}}class Pt{constructor(l,f={}){X(this,f),this.type=l}}class Mt extends Pt{constructor(l,f={}){super("error",X({error:l},f))}}class Nt{on(l,f){return this._listeners=this._listeners||{},at(l,f,this._listeners),this}off(l,f){return ot(l,f,this._listeners),ot(l,f,this._oneTimeListeners),this}once(l,f){return f?(this._oneTimeListeners=this._oneTimeListeners||{},at(l,f,this._oneTimeListeners),this):new Promise(m=>this.once(l,m))}fire(l,f){typeof l=="string"&&(l=new Pt(l,f||{}));let m=l.type;if(this.listens(m)){l.target=this;let _=this._listeners&&this._listeners[m]?this._listeners[m].slice():[];for(let C of _)C.call(this,l);let S=this._oneTimeListeners&&this._oneTimeListeners[m]?this._oneTimeListeners[m].slice():[];for(let C of S)ot(m,C,this._oneTimeListeners),C.call(this,l);let I=this._eventedParent;I&&(X(l,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),I.fire(l))}else l instanceof Mt&&console.error(l.error);return this}listens(l){return this._listeners&&this._listeners[l]&&this._listeners[l].length>0||this._oneTimeListeners&&this._oneTimeListeners[l]&&this._oneTimeListeners[l].length>0||this._eventedParent&&this._eventedParent.listens(l)}setEventedParent(l,f){return this._eventedParent=l,this._eventedParentData=f,this}}var Ae={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Lt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Wt(c,l){let f={};for(let m in c)m!=="ref"&&(f[m]=c[m]);return Lt.forEach(m=>{m in l&&(f[m]=l[m])}),f}function Ct(c,l){if(Array.isArray(c)){if(!Array.isArray(l)||c.length!==l.length)return!1;for(let f=0;f<c.length;f++)if(!Ct(c[f],l[f]))return!1;return!0}if(typeof c=="object"&&c!==null&&l!==null){if(typeof l!="object"||Object.keys(c).length!==Object.keys(l).length)return!1;for(let f in c)if(!Ct(c[f],l[f]))return!1;return!0}return c===l}function ce(c,l){c.push(l)}function Fe(c,l,f){ce(f,{command:"addSource",args:[c,l[c]]})}function Be(c,l,f){ce(l,{command:"removeSource",args:[c]}),f[c]=!0}function mt(c,l,f,m){Be(c,f,m),Fe(c,l,f)}function yt(c,l,f){let m;for(m in c[f])if(Object.prototype.hasOwnProperty.call(c[f],m)&&m!=="data"&&!Ct(c[f][m],l[f][m]))return!1;for(m in l[f])if(Object.prototype.hasOwnProperty.call(l[f],m)&&m!=="data"&&!Ct(c[f][m],l[f][m]))return!1;return!0}function gt(c,l,f,m,_,S){c=c||{},l=l||{};for(let I in c)Object.prototype.hasOwnProperty.call(c,I)&&(Ct(c[I],l[I])||f.push({command:S,args:[m,I,l[I],_]}));for(let I in l)Object.prototype.hasOwnProperty.call(l,I)&&!Object.prototype.hasOwnProperty.call(c,I)&&(Ct(c[I],l[I])||f.push({command:S,args:[m,I,l[I],_]}))}function _t(c){return c.id}function Yt(c,l){return c[l.id]=l,c}class nt{constructor(l,f,m,_){this.message=(l?`${l}: `:"")+m,_&&(this.identifier=_),f!=null&&f.__line__&&(this.line=f.__line__)}}function zr(c,...l){for(let f of l)for(let m in f)c[m]=f[m];return c}class on extends Error{constructor(l,f){super(f),this.message=f,this.key=l}}class pa{constructor(l,f=[]){this.parent=l,this.bindings={};for(let[m,_]of f)this.bindings[m]=_}concat(l){return new pa(this,l)}get(l){if(this.bindings[l])return this.bindings[l];if(this.parent)return this.parent.get(l);throw new Error(`${l} not found in scope.`)}has(l){return!!this.bindings[l]||!!this.parent&&this.parent.has(l)}}let da={kind:"null"},St={kind:"number"},Vr={kind:"string"},Er={kind:"boolean"},Qi={kind:"color"},Ta={kind:"object"},Pe={kind:"value"},Ge={kind:"collator"},wt={kind:"formatted"},Zt={kind:"padding"},Ht={kind:"resolvedImage"},ae={kind:"variableAnchorOffsetCollection"};function $(c,l){return{kind:"array",itemType:c,N:l}}function W(c){if(c.kind==="array"){let l=W(c.itemType);return typeof c.N=="number"?`array<${l}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${l}>`}return c.kind}let J=[da,St,Vr,Er,Qi,wt,Ta,$(Pe),Zt,Ht,ae];function se(c,l){if(l.kind==="error")return null;if(c.kind==="array"){if(l.kind==="array"&&(l.N===0&&l.itemType.kind==="value"||!se(c.itemType,l.itemType))&&(typeof c.N!="number"||c.N===l.N))return null}else{if(c.kind===l.kind)return null;if(c.kind==="value"){for(let f of J)if(!se(f,l))return null}}return`Expected ${W(c)} but found ${W(l)} instead.`}function be(c,l){return l.some(f=>f.kind===c.kind)}function De(c,l){return l.some(f=>f==="null"?c===null:f==="array"?Array.isArray(c):f==="object"?c&&!Array.isArray(c)&&typeof c=="object":f===typeof c)}function je(c,l){return c.kind==="array"&&l.kind==="array"?c.itemType.kind===l.itemType.kind&&typeof c.N=="number":c.kind===l.kind}let _e=.96422,Je=.82521,pt=4/29,Xe=6/29,Dt=3*Xe*Xe,ur=Xe*Xe*Xe,Sr=Math.PI/180,Dn=180/Math.PI;function Gr(c){return(c%=360)<0&&(c+=360),c}function Nn([c,l,f,m]){let _,S,I=Ai((.2225045*(c=vn(c))+.7168786*(l=vn(l))+.0606169*(f=vn(f)))/1);c===l&&l===f?_=S=I:(_=Ai((.4360747*c+.3850649*l+.1430804*f)/_e),S=Ai((.0139322*c+.0971045*l+.7141733*f)/Je));let C=116*I-16;return[C<0?0:C,500*(_-I),200*(I-S),m]}function vn(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function Ai(c){return c>ur?Math.pow(c,1/3):c/Dt+pt}function ii([c,l,f,m]){let _=(c+16)/116,S=isNaN(l)?_:_+l/500,I=isNaN(f)?_:_-f/200;return _=1*eo(_),S=_e*eo(S),I=Je*eo(I),[an(3.1338561*S-1.6168667*_-.4906146*I),an(-.9787684*S+1.9161415*_+.033454*I),an(.0719453*S-.2289914*_+1.4052427*I),m]}function an(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function eo(c){return c>Xe?c*c*c:Dt*(c-pt)}function Vo(c){return parseInt(c.padEnd(2,c),16)/255}function ea(c,l){return ha(l?c/100:c,0,1)}function ha(c,l,f){return Math.min(Math.max(l,c),f)}function Ja(c){return!c.some(Number.isNaN)}let Sm={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class to{constructor(l,f,m,_=1,S=!0){this.r=l,this.g=f,this.b=m,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[l,f,m,_]))}static parse(l){if(l instanceof to)return l;if(typeof l!="string")return;let f=function(m){if((m=m.toLowerCase().trim())==="transparent")return[0,0,0,0];let _=Sm[m];if(_){let[I,C,N]=_;return[I/255,C/255,N/255,1]}if(m.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(m)){let I=m.length<6?1:2,C=1;return[Vo(m.slice(C,C+=I)),Vo(m.slice(C,C+=I)),Vo(m.slice(C,C+=I)),Vo(m.slice(C,C+I)||"ff")]}if(m.startsWith("rgb")){let I=m.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(I){let[C,N,j,z,B,Y,K,te,oe,he,ve,$e]=I,Ce=[z||" ",K||" ",he].join("");if(Ce==="  "||Ce==="  /"||Ce===",,"||Ce===",,,"){let He=[j,Y,oe].join(""),rt=He==="%%%"?100:He===""?255:0;if(rt){let bt=[ha(+N/rt,0,1),ha(+B/rt,0,1),ha(+te/rt,0,1),ve?ea(+ve,$e):1];if(Ja(bt))return bt}}return}}let S=m.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){let[I,C,N,j,z,B,Y,K,te]=S,oe=[N||" ",z||" ",Y].join("");if(oe==="  "||oe==="  /"||oe===",,"||oe===",,,"){let he=[+C,ha(+j,0,100),ha(+B,0,100),K?ea(+K,te):1];if(Ja(he))return function([ve,$e,Ce,He]){function rt(bt){let Qt=(bt+ve/30)%12,Ir=$e*Math.min(Ce,1-Ce);return Ce-Ir*Math.max(-1,Math.min(Qt-3,9-Qt,1))}return ve=Gr(ve),$e/=100,Ce/=100,[rt(0),rt(8),rt(4),He]}(he)}}}(l);return f?new to(...f,!1):void 0}get rgb(){let{r:l,g:f,b:m,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[l/S,f/S,m/S,_])}get hcl(){return this.overwriteGetter("hcl",function(l){let[f,m,_,S]=Nn(l),I=Math.sqrt(m*m+_*_);return[Math.round(1e4*I)?Gr(Math.atan2(_,m)*Dn):NaN,I,f,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Nn(this.rgb))}overwriteGetter(l,f){return Object.defineProperty(this,l,{value:f}),f}toString(){let[l,f,m,_]=this.rgb;return`rgba(${[l,f,m].map(S=>Math.round(255*S)).join(",")},${_})`}}to.black=new to(0,0,0,1),to.white=new to(1,1,1,1),to.transparent=new to(0,0,0,0),to.red=new to(1,0,0,1);class XE{constructor(l,f,m){this.sensitivity=l?f?"variant":"case":f?"accent":"base",this.locale=m,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(l,f){return this.collator.compare(l,f)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class JE{constructor(l,f,m,_,S){this.text=l,this.image=f,this.scale=m,this.fontStack=_,this.textColor=S}}class pl{constructor(l){this.sections=l}static fromString(l){return new pl([new JE(l,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(l=>l.text.length!==0||l.image&&l.image.name.length!==0)}static factory(l){return l instanceof pl?l:pl.fromString(l)}toString(){return this.sections.length===0?"":this.sections.map(l=>l.text).join("")}}class dl{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof dl)return l;if(typeof l=="number")return new dl([l,l,l,l]);if(Array.isArray(l)&&!(l.length<1||l.length>4)){for(let f of l)if(typeof f!="number")return;switch(l.length){case 1:l=[l[0],l[0],l[0],l[0]];break;case 2:l=[l[0],l[1],l[0],l[1]];break;case 3:l=[l[0],l[1],l[2],l[1]];}return new dl(l)}}toString(){return JSON.stringify(this.values)}}let aF=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ul{constructor(l){this.values=l.slice()}static parse(l){if(l instanceof Ul)return l;if(Array.isArray(l)&&!(l.length<1)&&l.length%2==0){for(let f=0;f<l.length;f+=2){let m=l[f],_=l[f+1];if(typeof m!="string"||!aF.has(m)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new Ul(l)}}toString(){return JSON.stringify(this.values)}}class hl{constructor(l){this.name=l.name,this.available=l.available}toString(){return this.name}static fromString(l){return l?new hl({name:l,available:!1}):null}}function Im(c,l,f,m){return typeof c=="number"&&c>=0&&c<=255&&typeof l=="number"&&l>=0&&l<=255&&typeof f=="number"&&f>=0&&f<=255?m===void 0||typeof m=="number"&&m>=0&&m<=1?null:`Invalid rgba value [${[c,l,f,m].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof m=="number"?[c,l,f,m]:[c,l,f]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bd(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof to||c instanceof XE||c instanceof pl||c instanceof dl||c instanceof Ul||c instanceof hl)return!0;if(Array.isArray(c)){for(let l of c)if(!Bd(l))return!1;return!0}if(typeof c=="object"){for(let l in c)if(!Bd(c[l]))return!1;return!0}return!1}function Di(c){if(c===null)return da;if(typeof c=="string")return Vr;if(typeof c=="boolean")return Er;if(typeof c=="number")return St;if(c instanceof to)return Qi;if(c instanceof XE)return Ge;if(c instanceof pl)return wt;if(c instanceof dl)return Zt;if(c instanceof Ul)return ae;if(c instanceof hl)return Ht;if(Array.isArray(c)){let l=c.length,f;for(let m of c){let _=Di(m);if(f){if(f===_)continue;f=Pe;break}f=_}return $(f||Pe,l)}return Ta}function cy(c){let l=typeof c;return c===null?"":l==="string"||l==="number"||l==="boolean"?String(c):c instanceof to||c instanceof pl||c instanceof dl||c instanceof Ul||c instanceof hl?c.toString():JSON.stringify(c)}class Nu{constructor(l,f){this.type=l,this.value=f}static parse(l,f){if(l.length!==2)return f.error(`'literal' expression requires exactly one argument, but found ${l.length-1} instead.`);if(!Bd(l[1]))return f.error("invalid value");let m=l[1],_=Di(m),S=f.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new Nu(_,m)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class wi{constructor(l){this.name="ExpressionEvaluationError",this.message=l}toJSON(){return this.message}}let $1={string:Vr,number:St,boolean:Er,object:Ta};class Ou{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m,_=1,S=l[0];if(S==="array"){let C,N;if(l.length>2){let j=l[1];if(typeof j!="string"||!(j in $1)||j==="object")return f.error("The item type argument of \"array\" must be one of string, number, boolean",1);C=$1[j],_++}else C=Pe;if(l.length>3){if(l[2]!==null&&(typeof l[2]!="number"||l[2]<0||l[2]!==Math.floor(l[2])))return f.error("The length argument to \"array\" must be a positive integer literal",2);N=l[2],_++}m=$(C,N)}else{if(!$1[S])throw new Error(`Types doesn't contain name = ${S}`);m=$1[S]}let I=[];for(;_<l.length;_++){let C=f.parse(l[_],_,Pe);if(!C)return null;I.push(C)}return new Ou(m,I)}evaluate(l){for(let f=0;f<this.args.length;f++){let m=this.args[f].evaluate(l);if(!se(this.type,Di(m)))return m;if(f===this.args.length-1)throw new wi(`Expected value to be of type ${W(this.type)}, but found ${W(Di(m))} instead.`)}throw new Error}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let QE={"to-boolean":Er,"to-color":Qi,"to-number":St,"to-string":Vr};class Lu{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[0];if(!QE[m])throw new Error(`Can't parse ${m} as it is not part of the known types`);if((m==="to-boolean"||m==="to-string")&&l.length!==2)return f.error("Expected one argument.");let _=QE[m],S=[];for(let I=1;I<l.length;I++){let C=f.parse(l[I],I,Pe);if(!C)return null;S.push(C)}return new Lu(_,S)}evaluate(l){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(l);case"color":{let f,m;for(let _ of this.args){if(f=_.evaluate(l),m=null,f instanceof to)return f;if(typeof f=="string"){let S=l.parseColor(f);if(S)return S}else if(Array.isArray(f)&&(m=f.length<3||f.length>4?`Invalid rbga value ${JSON.stringify(f)}: expected an array containing either three or four numeric values.`:Im(f[0],f[1],f[2],f[3]),!m))return new to(f[0]/255,f[1]/255,f[2]/255,f[3])}throw new wi(m||`Could not parse color from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"padding":{let f;for(let m of this.args){f=m.evaluate(l);let _=dl.parse(f);if(_)return _}throw new wi(`Could not parse padding from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"variableAnchorOffsetCollection":{let f;for(let m of this.args){f=m.evaluate(l);let _=Ul.parse(f);if(_)return _}throw new wi(`Could not parse variableAnchorOffsetCollection from value '${typeof f=="string"?f:JSON.stringify(f)}'`)}case"number":{let f=null;for(let m of this.args){if(f=m.evaluate(l),f===null)return 0;let _=Number(f);if(!isNaN(_))return _}throw new wi(`Could not convert ${JSON.stringify(f)} to number.`)}case"formatted":return pl.fromString(cy(this.args[0].evaluate(l)));case"resolvedImage":return hl.fromString(cy(this.args[0].evaluate(l)));default:return cy(this.args[0].evaluate(l));}}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}let sF=["Unknown","Point","LineString","Polygon"];class Y1{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?sF[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(l){let f=this._parseColorCache[l];return f||(f=this._parseColorCache[l]=to.parse(l)),f}}class Vd{constructor(l,f,m=[],_,S=new pa,I=[]){this.registry=l,this.path=m,this.key=m.map(C=>`[${C}]`).join(""),this.scope=S,this.errors=I,this.expectedType=_,this._isConstant=f}parse(l,f,m,_,S={}){return f?this.concat(f,m,_)._parse(l,S):this._parse(l,S)}_parse(l,f){function m(_,S,I){return I==="assert"?new Ou(S,[_]):I==="coerce"?new Lu(S,[_]):_}if(l!==null&&typeof l!="string"&&typeof l!="boolean"&&typeof l!="number"||(l=["literal",l]),Array.isArray(l)){if(l.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let _=l[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let S=this.registry[_];if(S){let I=S.parse(l,this);if(!I)return null;if(this.expectedType){let C=this.expectedType,N=I.type;if(C.kind!=="string"&&C.kind!=="number"&&C.kind!=="boolean"&&C.kind!=="object"&&C.kind!=="array"||N.kind!=="value"){if(C.kind!=="color"&&C.kind!=="formatted"&&C.kind!=="resolvedImage"||N.kind!=="value"&&N.kind!=="string"){if(C.kind!=="padding"||N.kind!=="value"&&N.kind!=="number"&&N.kind!=="array"){if(C.kind!=="variableAnchorOffsetCollection"||N.kind!=="value"&&N.kind!=="array"){if(this.checkSubtype(C,N))return null}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"coerce");}else I=m(I,C,f.typeAnnotation||"assert")}if(!(I instanceof Nu)&&I.type.kind!=="resolvedImage"&&this._isConstant(I)){let C=new Y1;try{I=new Nu(I.type,I.evaluate(C))}catch(N){return this.error(N.message),null}}return I}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(l===void 0?"'undefined' value invalid. Use null instead.":typeof l=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof l} instead.`)}concat(l,f,m){let _=typeof l=="number"?this.path.concat(l):this.path,S=m?this.scope.concat(m):this.scope;return new Vd(this.registry,this._isConstant,_,f||null,S,this.errors)}error(l,...f){let m=`${this.key}${f.map(_=>`[${_}]`).join("")}`;this.errors.push(new on(m,l))}checkSubtype(l,f){let m=se(l,f);return m&&this.error(m),m}}class yp{constructor(l,f){this.type=f.type,this.bindings=[].concat(l),this.result=f}evaluate(l){return this.result.evaluate(l)}eachChild(l){for(let f of this.bindings)l(f[1]);l(this.result)}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found ${l.length-1} instead.`);let m=[];for(let S=1;S<l.length-1;S+=2){let I=l[S];if(typeof I!="string")return f.error(`Expected string, but found ${typeof I} instead.`,S);if(/[^a-zA-Z0-9_]/.test(I))return f.error("Variable names must contain only alphanumeric characters or '_'.",S);let C=f.parse(l[S+1],S+1);if(!C)return null;m.push([I,C])}let _=f.parse(l[l.length-1],l.length-1,f.expectedType,m);return _?new yp(m,_):null}outputDefined(){return this.result.outputDefined()}}class Fn{constructor(l,f){this.type=f.type,this.name=l,this.boundExpression=f}static parse(l,f){if(l.length!==2||typeof l[1]!="string")return f.error("'var' expression requires exactly one string literal argument.");let m=l[1];return f.scope.has(m)?new Fn(m,f.scope.get(m)):f.error(`Unknown variable "${m}". Make sure "${m}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(l){return this.boundExpression.evaluate(l)}eachChild(){}outputDefined(){return!1}}class eS{constructor(l,f,m){this.type=l,this.index=f,this.input=m}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,St),_=f.parse(l[2],2,$(f.expectedType||Pe));return m&&_?new eS(_.type.itemType,m,_):null}evaluate(l){let f=this.index.evaluate(l),m=this.input.evaluate(l);if(f<0)throw new wi(`Array index out of bounds: ${f} < 0.`);if(f>=m.length)throw new wi(`Array index out of bounds: ${f} > ${m.length-1}.`);if(f!==Math.floor(f))throw new wi(`Array index must be an integer, but found ${f} instead.`);return m[f]}eachChild(l){l(this.index),l(this.input)}outputDefined(){return!1}}class tS{constructor(l,f){this.type=Er,this.needle=l,this.haystack=f}static parse(l,f){if(l.length!==3)return f.error(`Expected 2 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Pe),_=f.parse(l[2],2,Pe);return m&&_?be(m.type,[Er,Vr,St,da,Pe])?new tS(m,_):f.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(m.type)} instead`):null}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!m)return!1;if(!De(f,["boolean","string","number","null"]))throw new wi(`Expected first argument to be of type boolean, string, number or null, but found ${W(Di(f))} instead.`);if(!De(m,["string","array"]))throw new wi(`Expected second argument to be of type array or string, but found ${W(Di(m))} instead.`);return m.indexOf(f)>=0}eachChild(l){l(this.needle),l(this.haystack)}outputDefined(){return!0}}class Tm{constructor(l,f,m){this.type=St,this.needle=l,this.haystack=f,this.fromIndex=m}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Pe),_=f.parse(l[2],2,Pe);if(!m||!_)return null;if(!be(m.type,[Er,Vr,St,da,Pe]))return f.error(`Expected first argument to be of type boolean, string, number or null, but found ${W(m.type)} instead`);if(l.length===4){let S=f.parse(l[3],3,St);return S?new Tm(m,_,S):null}return new Tm(m,_)}evaluate(l){let f=this.needle.evaluate(l),m=this.haystack.evaluate(l);if(!De(f,["boolean","string","number","null"]))throw new wi(`Expected first argument to be of type boolean, string, number or null, but found ${W(Di(f))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(l)),De(m,["string"])){let S=m.indexOf(f,_);return S===-1?-1:[...m.slice(0,S)].length}if(De(m,["array"]))return m.indexOf(f,_);throw new wi(`Expected second argument to be of type array or string, but found ${W(Di(m))} instead.`)}eachChild(l){l(this.needle),l(this.haystack),this.fromIndex&&l(this.fromIndex)}outputDefined(){return!1}}class rS{constructor(l,f,m,_,S,I){this.inputType=l,this.type=f,this.input=m,this.cases=_,this.outputs=S,this.otherwise=I}static parse(l,f){if(l.length<5)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if(l.length%2!=1)return f.error("Expected an even number of arguments.");let m,_;f.expectedType&&f.expectedType.kind!=="value"&&(_=f.expectedType);let S={},I=[];for(let j=2;j<l.length-1;j+=2){let z=l[j],B=l[j+1];Array.isArray(z)||(z=[z]);let Y=f.concat(j);if(z.length===0)return Y.error("Expected at least one branch label.");for(let te of z){if(typeof te!="number"&&typeof te!="string")return Y.error("Branch labels must be numbers or strings.");if(typeof te=="number"&&Math.abs(te)>Number.MAX_SAFE_INTEGER)return Y.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof te=="number"&&Math.floor(te)!==te)return Y.error("Numeric branch labels must be integer values.");if(m){if(Y.checkSubtype(m,Di(te)))return null}else m=Di(te);if(S[String(te)]!==void 0)return Y.error("Branch labels must be unique.");S[String(te)]=I.length}let K=f.parse(B,j,_);if(!K)return null;_=_||K.type,I.push(K)}let C=f.parse(l[1],1,Pe);if(!C)return null;let N=f.parse(l[l.length-1],l.length-1,_);return N?C.type.kind!=="value"&&f.concat(1).checkSubtype(m,C.type)?null:new rS(m,_,C,S,I,N):null}evaluate(l){let f=this.input.evaluate(l);return(Di(f)===this.inputType&&this.outputs[this.cases[f]]||this.otherwise).evaluate(l)}eachChild(l){l(this.input),this.outputs.forEach(l),l(this.otherwise)}outputDefined(){return this.outputs.every(l=>l.outputDefined())&&this.otherwise.outputDefined()}}class Z1{constructor(l,f,m){this.type=l,this.branches=f,this.otherwise=m}static parse(l,f){if(l.length<4)return f.error(`Expected at least 3 arguments, but found only ${l.length-1}.`);if(l.length%2!=0)return f.error("Expected an odd number of arguments.");let m;f.expectedType&&f.expectedType.kind!=="value"&&(m=f.expectedType);let _=[];for(let I=1;I<l.length-1;I+=2){let C=f.parse(l[I],I,Er);if(!C)return null;let N=f.parse(l[I+1],I+1,m);if(!N)return null;_.push([C,N]),m=m||N.type}let S=f.parse(l[l.length-1],l.length-1,m);if(!S)return null;if(!m)throw new Error("Can't infer output type");return new Z1(m,_,S)}evaluate(l){for(let[f,m]of this.branches)if(f.evaluate(l))return m.evaluate(l);return this.otherwise.evaluate(l)}eachChild(l){for(let[f,m]of this.branches)l(f),l(m);l(this.otherwise)}outputDefined(){return this.branches.every(([l,f])=>f.outputDefined())&&this.otherwise.outputDefined()}}class fy{constructor(l,f,m,_){this.type=l,this.input=f,this.beginIndex=m,this.endIndex=_}static parse(l,f){if(l.length<=2||l.length>=5)return f.error(`Expected 3 or 4 arguments, but found ${l.length-1} instead.`);let m=f.parse(l[1],1,Pe),_=f.parse(l[2],2,St);if(!m||!_)return null;if(!be(m.type,[$(Pe),Vr,Pe]))return f.error(`Expected first argument to be of type array or string, but found ${W(m.type)} instead`);if(l.length===4){let S=f.parse(l[3],3,St);return S?new fy(m.type,m,_,S):null}return new fy(m.type,m,_)}evaluate(l){let f=this.input.evaluate(l),m=this.beginIndex.evaluate(l),_;if(this.endIndex&&(_=this.endIndex.evaluate(l)),De(f,["string"]))return[...f].slice(m,_).join("");if(De(f,["array"]))return f.slice(m,_);throw new wi(`Expected first argument to be of type array or string, but found ${W(Di(f))} instead.`)}eachChild(l){l(this.input),l(this.beginIndex),this.endIndex&&l(this.endIndex)}outputDefined(){return!1}}function K1(c,l){let f=c.length-1,m,_,S=0,I=f,C=0;for(;S<=I;)if(C=Math.floor((S+I)/2),m=c[C],_=c[C+1],m<=l){if(C===f||l<_)return C;S=C+1}else{if(!(m>l))throw new wi("Input is not a number.");I=C-1}return 0}class Mm{constructor(l,f,m){this.type=l,this.input=f,this.labels=[],this.outputs=[];for(let[_,S]of m)this.labels.push(_),this.outputs.push(S)}static parse(l,f){if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");let m=f.parse(l[1],1,St);if(!m)return null;let _=[],S=null;f.expectedType&&f.expectedType.kind!=="value"&&(S=f.expectedType);for(let I=1;I<l.length;I+=2){let C=I===1?-1/0:l[I],N=l[I+1],j=I,z=I+1;if(typeof C!="number")return f.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",j);if(_.length&&_[_.length-1][0]>=C)return f.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",j);let B=f.parse(N,z,S);if(!B)return null;S=S||B.type,_.push([C,B])}return new Mm(S,m,_)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let S=f.length;return _>=f[S-1]?m[S-1].evaluate(l):m[K1(f,_)].evaluate(l)}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function BD(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var lF=VD;function VD(c,l,f,m){this.cx=3*c,this.bx=3*(f-c)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(m-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=c,this.p1y=l,this.p2x=f,this.p2y=m}VD.prototype={sampleCurveX:function(c){return((this.ax*c+this.bx)*c+this.cx)*c},sampleCurveY:function(c){return((this.ay*c+this.by)*c+this.cy)*c},sampleCurveDerivativeX:function(c){return(3*this.ax*c+2*this.bx)*c+this.cx},solveCurveX:function(c,l){if(l===void 0&&(l=1e-6),c<0)return 0;if(c>1)return 1;for(var f=c,m=0;m<8;m++){var _=this.sampleCurveX(f)-c;if(Math.abs(_)<l)return f;var S=this.sampleCurveDerivativeX(f);if(Math.abs(S)<1e-6)break;f-=_/S}var I=0,C=1;for(f=c,m=0;m<20&&(_=this.sampleCurveX(f),!(Math.abs(_-c)<l));m++)c>_?I=f:C=f,f=.5*(C-I)+I;return f},solve:function(c,l){return this.sampleCurveY(this.solveCurveX(c,l))}};var uF=BD(lF);function Gd(c,l,f){return c+f*(l-c)}function py(c,l,f){return c.map((m,_)=>Gd(m,l[_],f))}let As={number:Gd,color:function(c,l,f,m="rgb"){switch(m){case"rgb":{let[_,S,I,C]=py(c.rgb,l.rgb,f);return new to(_,S,I,C,!1)}case"hcl":{let[_,S,I,C]=c.hcl,[N,j,z,B]=l.hcl,Y,K;if(isNaN(_)||isNaN(N))isNaN(_)?isNaN(N)?Y=NaN:(Y=N,I!==1&&I!==0||(K=j)):(Y=_,z!==1&&z!==0||(K=S));else{let $e=N-_;N>_&&$e>180?$e-=360:N<_&&_-N>180&&($e+=360),Y=_+f*$e}let[te,oe,he,ve]=function([$e,Ce,He,rt]){return $e=isNaN($e)?0:$e*Sr,ii([He,Math.cos($e)*Ce,Math.sin($e)*Ce,rt])}([Y,K!=null?K:Gd(S,j,f),Gd(I,z,f),Gd(C,B,f)]);return new to(te,oe,he,ve,!1)}case"lab":{let[_,S,I,C]=ii(py(c.lab,l.lab,f));return new to(_,S,I,C,!1)}}},array:py,padding:function(c,l,f){return new dl(py(c.values,l.values,f))},variableAnchorOffsetCollection:function(c,l,f){let m=c.values,_=l.values;if(m.length!==_.length)throw new wi(`Cannot interpolate values of different length. from: ${c.toString()}, to: ${l.toString()}`);let S=[];for(let I=0;I<m.length;I+=2){if(m[I]!==_[I])throw new wi(`Cannot interpolate values containing mismatched anchors. from[${I}]: ${m[I]}, to[${I}]: ${_[I]}`);S.push(m[I]);let[C,N]=m[I+1],[j,z]=_[I+1];S.push([Gd(C,j,f),Gd(N,z,f)])}return new Ul(S)}};class Ds{constructor(l,f,m,_,S){this.type=l,this.operator=f,this.interpolation=m,this.input=_,this.labels=[],this.outputs=[];for(let[I,C]of S)this.labels.push(I),this.outputs.push(C)}static interpolationFactor(l,f,m,_){let S=0;if(l.name==="exponential")S=X1(f,l.base,m,_);else if(l.name==="linear")S=X1(f,1,m,_);else if(l.name==="cubic-bezier"){let I=l.controlPoints;S=new uF(I[0],I[1],I[2],I[3]).solve(X1(f,1,m,_))}return S}static parse(l,f){let[m,_,S,...I]=l;if(!Array.isArray(_)||_.length===0)return f.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){let j=_[1];if(typeof j!="number")return f.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:j}}else{if(_[0]!=="cubic-bezier")return f.error(`Unknown interpolation type ${String(_[0])}`,1,0);{let j=_.slice(1);if(j.length!==4||j.some(z=>typeof z!="number"||z<0||z>1))return f.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:j}}}if(l.length-1<4)return f.error(`Expected at least 4 arguments, but found only ${l.length-1}.`);if((l.length-1)%2!=0)return f.error("Expected an even number of arguments.");if(S=f.parse(S,2,St),!S)return null;let C=[],N=null;m==="interpolate-hcl"||m==="interpolate-lab"?N=Qi:f.expectedType&&f.expectedType.kind!=="value"&&(N=f.expectedType);for(let j=0;j<I.length;j+=2){let z=I[j],B=I[j+1],Y=j+3,K=j+4;if(typeof z!="number")return f.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",Y);if(C.length&&C[C.length-1][0]>=z)return f.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",Y);let te=f.parse(B,K,N);if(!te)return null;N=N||te.type,C.push([z,te])}return je(N,St)||je(N,Qi)||je(N,Zt)||je(N,ae)||je(N,$(St))?new Ds(N,m,_,S,C):f.error(`Type ${W(N)} is not interpolatable.`)}evaluate(l){let f=this.labels,m=this.outputs;if(f.length===1)return m[0].evaluate(l);let _=this.input.evaluate(l);if(_<=f[0])return m[0].evaluate(l);let S=f.length;if(_>=f[S-1])return m[S-1].evaluate(l);let I=K1(f,_),C=Ds.interpolationFactor(this.interpolation,_,f[I],f[I+1]),N=m[I].evaluate(l),j=m[I+1].evaluate(l);switch(this.operator){case"interpolate":return As[this.type.kind](N,j,C);case"interpolate-hcl":return As.color(N,j,C,"hcl");case"interpolate-lab":return As.color(N,j,C,"lab");}}eachChild(l){l(this.input);for(let f of this.outputs)l(f)}outputDefined(){return this.outputs.every(l=>l.outputDefined())}}function X1(c,l,f,m){let _=m-f,S=c-f;return _===0?0:l===1?S/_:(Math.pow(l,S)-1)/(Math.pow(l,_)-1)}class J1{constructor(l,f){this.type=l,this.args=f}static parse(l,f){if(l.length<2)return f.error("Expectected at least one argument.");let m=null,_=f.expectedType;_&&_.kind!=="value"&&(m=_);let S=[];for(let C of l.slice(1)){let N=f.parse(C,1+S.length,m,void 0,{typeAnnotation:"omit"});if(!N)return null;m=m||N.type,S.push(N)}if(!m)throw new Error("No output type");let I=_&&S.some(C=>se(_,C.type));return new J1(I?Pe:m,S)}evaluate(l){let f,m=null,_=0;for(let S of this.args)if(_++,m=S.evaluate(l),m&&m instanceof hl&&!m.available&&(f||(f=m.name),m=null,_===this.args.length&&(m=f)),m!==null)break;return m}eachChild(l){this.args.forEach(l)}outputDefined(){return this.args.every(l=>l.outputDefined())}}function Q1(c,l){return c==="=="||c==="!="?l.kind==="boolean"||l.kind==="string"||l.kind==="number"||l.kind==="null"||l.kind==="value":l.kind==="string"||l.kind==="number"||l.kind==="value"}function GD(c,l,f,m){return m.compare(l,f)===0}function Cm(c,l,f){let m=c!=="=="&&c!=="!=";return class WFe{constructor(S,I,C){this.type=Er,this.lhs=S,this.rhs=I,this.collator=C,this.hasUntypedArgument=S.type.kind==="value"||I.type.kind==="value"}static parse(S,I){if(S.length!==3&&S.length!==4)return I.error("Expected two or three arguments.");let C=S[0],N=I.parse(S[1],1,Pe);if(!N)return null;if(!Q1(C,N.type))return I.concat(1).error(`"${C}" comparisons are not supported for type '${W(N.type)}'.`);let j=I.parse(S[2],2,Pe);if(!j)return null;if(!Q1(C,j.type))return I.concat(2).error(`"${C}" comparisons are not supported for type '${W(j.type)}'.`);if(N.type.kind!==j.type.kind&&N.type.kind!=="value"&&j.type.kind!=="value")return I.error(`Cannot compare types '${W(N.type)}' and '${W(j.type)}'.`);m&&(N.type.kind==="value"&&j.type.kind!=="value"?N=new Ou(j.type,[N]):N.type.kind!=="value"&&j.type.kind==="value"&&(j=new Ou(N.type,[j])));let z=null;if(S.length===4){if(N.type.kind!=="string"&&j.type.kind!=="string"&&N.type.kind!=="value"&&j.type.kind!=="value")return I.error("Cannot use collator to compare non-string types.");if(z=I.parse(S[3],3,Ge),!z)return null}return new WFe(N,j,z)}evaluate(S){let I=this.lhs.evaluate(S),C=this.rhs.evaluate(S);if(m&&this.hasUntypedArgument){let N=Di(I),j=Di(C);if(N.kind!==j.kind||N.kind!=="string"&&N.kind!=="number")throw new wi(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${N.kind}, ${j.kind}) instead.`)}if(this.collator&&!m&&this.hasUntypedArgument){let N=Di(I),j=Di(C);if(N.kind!=="string"||j.kind!=="string")return l(S,I,C)}return this.collator?f(S,I,C,this.collator.evaluate(S)):l(S,I,C)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}let cF=Cm("==",function(c,l,f){return l===f},GD),HD=Cm("!=",function(c,l,f){return l!==f},function(c,l,f,m){return!GD(0,l,f,m)}),WD=Cm("<",function(c,l,f){return l<f},function(c,l,f,m){return m.compare(l,f)<0}),fF=Cm(">",function(c,l,f){return l>f},function(c,l,f,m){return m.compare(l,f)>0}),pF=Cm("<=",function(c,l,f){return l<=f},function(c,l,f,m){return m.compare(l,f)<=0}),$D=Cm(">=",function(c,l,f){return l>=f},function(c,l,f,m){return m.compare(l,f)>=0});class dy{constructor(l,f,m){this.type=Ge,this.locale=m,this.caseSensitive=l,this.diacriticSensitive=f}static parse(l,f){if(l.length!==2)return f.error("Expected one argument.");let m=l[1];if(typeof m!="object"||Array.isArray(m))return f.error("Collator options argument must be an object.");let _=f.parse(m["case-sensitive"]!==void 0&&m["case-sensitive"],1,Er);if(!_)return null;let S=f.parse(m["diacritic-sensitive"]!==void 0&&m["diacritic-sensitive"],1,Er);if(!S)return null;let I=null;return m.locale&&(I=f.parse(m.locale,1,Vr),!I)?null:new dy(_,S,I)}evaluate(l){return new XE(this.caseSensitive.evaluate(l),this.diacriticSensitive.evaluate(l),this.locale?this.locale.evaluate(l):null)}eachChild(l){l(this.caseSensitive),l(this.diacriticSensitive),this.locale&&l(this.locale)}outputDefined(){return!1}}class nS{constructor(l,f,m,_,S){this.type=Vr,this.number=l,this.locale=f,this.currency=m,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(l,f){if(l.length!==3)return f.error("Expected two arguments.");let m=f.parse(l[1],1,St);if(!m)return null;let _=l[2];if(typeof _!="object"||Array.isArray(_))return f.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=f.parse(_.locale,1,Vr),!S))return null;let I=null;if(_.currency&&(I=f.parse(_.currency,1,Vr),!I))return null;let C=null;if(_["min-fraction-digits"]&&(C=f.parse(_["min-fraction-digits"],1,St),!C))return null;let N=null;return _["max-fraction-digits"]&&(N=f.parse(_["max-fraction-digits"],1,St),!N)?null:new nS(m,S,I,C,N)}evaluate(l){return new Intl.NumberFormat(this.locale?this.locale.evaluate(l):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(l):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(l):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(l):void 0}).format(this.number.evaluate(l))}eachChild(l){l(this.number),this.locale&&l(this.locale),this.currency&&l(this.currency),this.minFractionDigits&&l(this.minFractionDigits),this.maxFractionDigits&&l(this.maxFractionDigits)}outputDefined(){return!1}}class e_{constructor(l){this.type=wt,this.sections=l}static parse(l,f){if(l.length<2)return f.error("Expected at least one argument.");let m=l[1];if(!Array.isArray(m)&&typeof m=="object")return f.error("First argument must be an image or text section.");let _=[],S=!1;for(let I=1;I<=l.length-1;++I){let C=l[I];if(S&&typeof C=="object"&&!Array.isArray(C)){S=!1;let N=null;if(C["font-scale"]&&(N=f.parse(C["font-scale"],1,St),!N))return null;let j=null;if(C["text-font"]&&(j=f.parse(C["text-font"],1,$(Vr)),!j))return null;let z=null;if(C["text-color"]&&(z=f.parse(C["text-color"],1,Qi),!z))return null;let B=_[_.length-1];B.scale=N,B.font=j,B.textColor=z}else{let N=f.parse(l[I],1,Pe);if(!N)return null;let j=N.type.kind;if(j!=="string"&&j!=="value"&&j!=="null"&&j!=="resolvedImage")return f.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:N,scale:null,font:null,textColor:null})}}return new e_(_)}evaluate(l){return new pl(this.sections.map(f=>{let m=f.content.evaluate(l);return Di(m)===Ht?new JE("",m,null,null,null):new JE(cy(m),null,f.scale?f.scale.evaluate(l):null,f.font?f.font.evaluate(l).join(","):null,f.textColor?f.textColor.evaluate(l):null)}))}eachChild(l){for(let f of this.sections)l(f.content),f.scale&&l(f.scale),f.font&&l(f.font),f.textColor&&l(f.textColor)}outputDefined(){return!1}}class oS{constructor(l){this.type=Ht,this.input=l}static parse(l,f){if(l.length!==2)return f.error("Expected two arguments.");let m=f.parse(l[1],1,Vr);return m?new oS(m):f.error("No image name provided.")}evaluate(l){let f=this.input.evaluate(l),m=hl.fromString(f);return m&&l.availableImages&&(m.available=l.availableImages.indexOf(f)>-1),m}eachChild(l){l(this.input)}outputDefined(){return!1}}class iS{constructor(l){this.type=St,this.input=l}static parse(l,f){if(l.length!==2)return f.error(`Expected 1 argument, but found ${l.length-1} instead.`);let m=f.parse(l[1],1);return m?m.type.kind!=="array"&&m.type.kind!=="string"&&m.type.kind!=="value"?f.error(`Expected argument of type string or array, but found ${W(m.type)} instead.`):new iS(m):null}evaluate(l){let f=this.input.evaluate(l);if(typeof f=="string")return[...f].length;if(Array.isArray(f))return f.length;throw new wi(`Expected value to be of type string or array, but found ${W(Di(f))} instead.`)}eachChild(l){l(this.input)}outputDefined(){return!1}}let uc=8192;function dF(c,l){let f=(180+c[0])/360,m=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,_=Math.pow(2,l.z);return[Math.round(f*_*uc),Math.round(m*_*uc)]}function aS(c,l){let f=Math.pow(2,l.z);return[(_=(c[0]/uc+l.x)/f,360*_-180),(m=(c[1]/uc+l.y)/f,360/Math.PI*Math.atan(Math.exp((180-360*m)*Math.PI/180))-90)];var m,_}function Hd(c,l){c[0]=Math.min(c[0],l[0]),c[1]=Math.min(c[1],l[1]),c[2]=Math.max(c[2],l[0]),c[3]=Math.max(c[3],l[1])}function _p(c,l){return!(c[0]<=l[0]||c[2]>=l[2]||c[1]<=l[1]||c[3]>=l[3])}function Wn(c,l,f){let m=c[0]-l[0],_=c[1]-l[1],S=c[0]-f[0],I=c[1]-f[1];return m*I-S*_==0&&m*S<=0&&_*I<=0}function t_(c,l,f,m){return(_=[m[0]-f[0],m[1]-f[1]])[0]*(S=[l[0]-c[0],l[1]-c[1]])[1]-_[1]*S[0]!=0&&!(!ZD(c,l,f,m)||!ZD(f,m,c,l));var _,S}function hF(c,l,f){for(let m of f)for(let _=0;_<m.length-1;++_)if(t_(c,l,m[_],m[_+1]))return!0;return!1}function Am(c,l,f=!1){let m=!1;for(let C of l)for(let N=0;N<C.length-1;N++){if(Wn(c,C[N],C[N+1]))return f;(S=C[N])[1]>(_=c)[1]!=(I=C[N+1])[1]>_[1]&&_[0]<(I[0]-S[0])*(_[1]-S[1])/(I[1]-S[1])+S[0]&&(m=!m)}var _,S,I;return m}function mF(c,l){for(let f of l)if(Am(c,f))return!0;return!1}function YD(c,l){for(let f of c)if(!Am(f,l))return!1;for(let f=0;f<c.length-1;++f)if(hF(c[f],c[f+1],l))return!1;return!0}function gF(c,l){for(let f of l)if(YD(c,f))return!0;return!1}function ZD(c,l,f,m){let _=m[0]-f[0],S=m[1]-f[1],I=(c[0]-f[0])*S-_*(c[1]-f[1]),C=(l[0]-f[0])*S-_*(l[1]-f[1]);return I>0&&C<0||I<0&&C>0}function sS(c,l,f){let m=[];for(let _=0;_<c.length;_++){let S=[];for(let I=0;I<c[_].length;I++){let C=dF(c[_][I],f);Hd(l,C),S.push(C)}m.push(S)}return m}function KD(c,l,f){let m=[];for(let _=0;_<c.length;_++){let S=sS(c[_],l,f);m.push(S)}return m}function XD(c,l,f,m){if(c[0]<f[0]||c[0]>f[2]){let _=.5*m,S=c[0]-f[0]>_?-m:f[0]-c[0]>_?m:0;S===0&&(S=c[0]-f[2]>_?-m:f[2]-c[0]>_?m:0),c[0]+=S}Hd(l,c)}function JD(c,l,f,m){let _=Math.pow(2,m.z)*uc,S=[m.x*uc,m.y*uc],I=[];for(let C of c)for(let N of C){let j=[N.x+S[0],N.y+S[1]];XD(j,l,f,_),I.push(j)}return I}function QD(c,l,f,m){let _=Math.pow(2,m.z)*uc,S=[m.x*uc,m.y*uc],I=[];for(let N of c){let j=[];for(let z of N){let B=[z.x+S[0],z.y+S[1]];Hd(l,B),j.push(B)}I.push(j)}if(l[2]-l[0]<=_/2){(C=l)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(let N of I)for(let j of N)XD(j,l,f,_)}var C;return I}class Wd{constructor(l,f){this.type=Er,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'within' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Bd(l[1])){let m=l[1];if(m.type==="FeatureCollection"){let _=[];for(let S of m.features){let{type:I,coordinates:C}=S.geometry;I==="Polygon"&&_.push(C),I==="MultiPolygon"&&_.push(...C)}if(_.length)return new Wd(m,{type:"MultiPolygon",coordinates:_})}else if(m.type==="Feature"){let _=m.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Wd(m,m.geometry)}else if(m.type==="Polygon"||m.type==="MultiPolygon")return new Wd(m,m)}return f.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=f.canonicalID();if(m.type==="Polygon"){let C=sS(m.coordinates,S,I),N=JD(f.geometry(),_,S,I);if(!_p(_,S))return!1;for(let j of N)if(!Am(j,C))return!1}if(m.type==="MultiPolygon"){let C=KD(m.coordinates,S,I),N=JD(f.geometry(),_,S,I);if(!_p(_,S))return!1;for(let j of N)if(!mF(j,C))return!1}return!0}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],I=f.canonicalID();if(m.type==="Polygon"){let C=sS(m.coordinates,S,I),N=QD(f.geometry(),_,S,I);if(!_p(_,S))return!1;for(let j of N)if(!YD(j,C))return!1}if(m.type==="MultiPolygon"){let C=KD(m.coordinates,S,I),N=QD(f.geometry(),_,S,I);if(!_p(_,S))return!1;for(let j of N)if(!gF(j,C))return!1}return!0}(l,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let e4=class{constructor(c=[],l=(f,m)=>f<m?-1:f>m?1:0){if(this.data=c,this.length=this.data.length,this.compare=l,this.length>0)for(let f=(this.length>>1)-1;f>=0;f--)this._down(f)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;let c=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),c}peek(){return this.data[0]}_up(c){let{data:l,compare:f}=this,m=l[c];for(;c>0;){let _=c-1>>1,S=l[_];if(f(m,S)>=0)break;l[c]=S,c=_}l[c]=m}_down(c){let{data:l,compare:f}=this,m=this.length>>1,_=l[c];for(;c<m;){let S=1+(c<<1),I=S+1;if(I<this.length&&f(l[I],l[S])<0&&(S=I),f(l[S],_)>=0)break;l[c]=l[S],c=S}l[c]=_}};function vF(c,l,f,m,_){t4(c,l,f,m||c.length-1,_||yF)}function t4(c,l,f,m,_){for(;m>f;){if(m-f>600){var S=m-f+1,I=l-f+1,C=Math.log(S),N=.5*Math.exp(2*C/3),j=.5*Math.sqrt(C*N*(S-N)/S)*(I-S/2<0?-1:1);t4(c,l,Math.max(f,Math.floor(l-I*N/S+j)),Math.min(m,Math.floor(l+(S-I)*N/S+j)),_)}var z=c[l],B=f,Y=m;for(hy(c,f,l),_(c[m],z)>0&&hy(c,f,m);B<Y;){for(hy(c,B,Y),B++,Y--;_(c[B],z)<0;)B++;for(;_(c[Y],z)>0;)Y--}_(c[f],z)===0?hy(c,f,Y):hy(c,++Y,m),Y<=l&&(f=Y+1),l<=Y&&(m=Y-1)}}function hy(c,l,f){var m=c[l];c[l]=c[f],c[f]=m}function yF(c,l){return c<l?-1:c>l?1:0}function r_(c,l){if(c.length<=1)return[c];let f=[],m,_;for(let S of c){let I=xF(S);I!==0&&(S.area=Math.abs(I),_===void 0&&(_=I<0),_===I<0?(m&&f.push(m),m=[S]):m.push(S))}if(m&&f.push(m),l>1)for(let S=0;S<f.length;S++)f[S].length<=l||(vF(f[S],l,1,f[S].length-1,_F),f[S]=f[S].slice(0,l));return f}function _F(c,l){return l.area-c.area}function xF(c){let l=0;for(let f,m,_=0,S=c.length,I=S-1;_<S;I=_++)f=c[_],m=c[I],l+=(m.x-f.x)*(f.y+m.y);return l}let r4=1/298.257223563,n4=r4*(2-r4),o4=Math.PI/180;class lS{constructor(l){let f=6378.137*o4*1e3,m=Math.cos(l*o4),_=1/(1-n4*(1-m*m)),S=Math.sqrt(_);this.kx=f*S*m,this.ky=f*S*_*(1-n4)}distance(l,f){let m=this.wrap(l[0]-f[0])*this.kx,_=(l[1]-f[1])*this.ky;return Math.sqrt(m*m+_*_)}pointOnLine(l,f){let m,_,S,I,C=1/0;for(let N=0;N<l.length-1;N++){let j=l[N][0],z=l[N][1],B=this.wrap(l[N+1][0]-j)*this.kx,Y=(l[N+1][1]-z)*this.ky,K=0;B===0&&Y===0||(K=(this.wrap(f[0]-j)*this.kx*B+(f[1]-z)*this.ky*Y)/(B*B+Y*Y),K>1?(j=l[N+1][0],z=l[N+1][1]):K>0&&(j+=B/this.kx*K,z+=Y/this.ky*K)),B=this.wrap(f[0]-j)*this.kx,Y=(f[1]-z)*this.ky;let te=B*B+Y*Y;te<C&&(C=te,m=j,_=z,S=N,I=K)}return{point:[m,_],index:S,t:Math.max(0,Math.min(1,I))}}wrap(l){for(;l<-180;)l+=360;for(;l>180;)l-=360;return l}}function i4(c,l){return l[0]-c[0]}function n_(c){return c[1]-c[0]+1}function bf(c,l){return c[1]>=c[0]&&c[1]<l}function uS(c,l){if(c[0]>c[1])return[null,null];let f=n_(c);if(l){if(f===2)return[c,null];let _=Math.floor(f/2);return[[c[0],c[0]+_],[c[0]+_,c[1]]]}if(f===1)return[c,null];let m=Math.floor(f/2)-1;return[[c[0],c[0]+m],[c[0]+m+1,c[1]]]}function cS(c,l){if(!bf(l,c.length))return[1/0,1/0,-1/0,-1/0];let f=[1/0,1/0,-1/0,-1/0];for(let m=l[0];m<=l[1];++m)Hd(f,c[m]);return f}function fS(c){let l=[1/0,1/0,-1/0,-1/0];for(let f of c)for(let m of f)Hd(l,m);return l}function o_(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function pS(c,l,f){if(!o_(c)||!o_(l))return NaN;let m=0,_=0;return c[2]<l[0]&&(m=l[0]-c[2]),c[0]>l[2]&&(m=c[0]-l[2]),c[1]>l[3]&&(_=c[1]-l[3]),c[3]<l[1]&&(_=l[1]-c[3]),f.distance([0,0],[m,_])}function $d(c,l,f){let m=f.pointOnLine(l,c);return f.distance(c,m.point)}function dS(c,l,f,m,_){let S=Math.min($d(c,[f,m],_),$d(l,[f,m],_)),I=Math.min($d(f,[c,l],_),$d(m,[c,l],_));return Math.min(S,I)}function bF(c,l,f,m,_){if(!bf(l,c.length)||!bf(m,f.length))return 1/0;let S=1/0;for(let I=l[0];I<l[1];++I){let C=c[I],N=c[I+1];for(let j=m[0];j<m[1];++j){let z=f[j],B=f[j+1];if(t_(C,N,z,B))return 0;S=Math.min(S,dS(C,N,z,B,_))}}return S}function hi(c,l,f,m,_){if(!bf(l,c.length)||!bf(m,f.length))return NaN;let S=1/0;for(let I=l[0];I<=l[1];++I)for(let C=m[0];C<=m[1];++C)if(S=Math.min(S,_.distance(c[I],f[C])),S===0)return S;return S}function wF(c,l,f){if(Am(c,l,!0))return 0;let m=1/0;for(let _ of l){let S=_[0],I=_[_.length-1];if(S!==I&&(m=Math.min(m,$d(c,[I,S],f)),m===0))return m;let C=f.pointOnLine(_,c);if(m=Math.min(m,f.distance(c,C.point)),m===0)return m}return m}function un(c,l,f,m){if(!bf(l,c.length))return NaN;for(let S=l[0];S<=l[1];++S)if(Am(c[S],f,!0))return 0;let _=1/0;for(let S=l[0];S<l[1];++S){let I=c[S],C=c[S+1];for(let N of f)for(let j=0,z=N.length,B=z-1;j<z;B=j++){let Y=N[B],K=N[j];if(t_(I,C,Y,K))return 0;_=Math.min(_,dS(I,C,Y,K,m))}}return _}function i_(c,l){for(let f of c)for(let m of f)if(Am(m,l,!0))return!0;return!1}function yo(c,l,f,m=1/0){let _=fS(c),S=fS(l);if(m!==1/0&&pS(_,S,f)>=m)return m;if(_p(_,S)){if(i_(c,l))return 0}else if(i_(l,c))return 0;let I=1/0;for(let C of c)for(let N=0,j=C.length,z=j-1;N<j;z=N++){let B=C[z],Y=C[N];for(let K of l)for(let te=0,oe=K.length,he=oe-1;te<oe;he=te++){let ve=K[he],$e=K[te];if(t_(B,Y,ve,$e))return 0;I=Math.min(I,dS(B,Y,ve,$e,f))}}return I}function lo(c,l,f,m,_,S){if(!S)return;let I=pS(cS(m,S),_,f);I<l&&c.push([I,S,[0,0]])}function Yd(c,l,f,m,_,S,I){if(!S||!I)return;let C=pS(cS(m,S),cS(_,I),f);C<l&&c.push([C,S,I])}function my(c,l,f,m,_=1/0){let S=Math.min(m.distance(c[0],f[0][0]),_);if(S===0)return S;let I=new e4([[0,[0,c.length-1],[0,0]]],i4),C=fS(f);for(;I.length>0;){let N=I.pop();if(N[0]>=S)continue;let j=N[1],z=l?50:100;if(n_(j)<=z){if(!bf(j,c.length))return NaN;if(l){let B=un(c,j,f,m);if(isNaN(B)||B===0)return B;S=Math.min(S,B)}else for(let B=j[0];B<=j[1];++B){let Y=wF(c[B],f,m);if(S=Math.min(S,Y),S===0)return 0}}else{let B=uS(j,l);lo(I,S,m,c,C,B[0]),lo(I,S,m,c,C,B[1])}}return S}function gy(c,l,f,m,_,S=1/0){let I=Math.min(S,_.distance(c[0],f[0]));if(I===0)return I;let C=new e4([[0,[0,c.length-1],[0,f.length-1]]],i4);for(;C.length>0;){let N=C.pop();if(N[0]>=I)continue;let j=N[1],z=N[2],B=l?50:100,Y=m?50:100;if(n_(j)<=B&&n_(z)<=Y){if(!bf(j,c.length)&&bf(z,f.length))return NaN;let K;if(l&&m)K=bF(c,j,f,z,_),I=Math.min(I,K);else if(l&&!m){let te=c.slice(j[0],j[1]+1);for(let oe=z[0];oe<=z[1];++oe)if(K=$d(f[oe],te,_),I=Math.min(I,K),I===0)return I}else if(!l&&m){let te=f.slice(z[0],z[1]+1);for(let oe=j[0];oe<=j[1];++oe)if(K=$d(c[oe],te,_),I=Math.min(I,K),I===0)return I}else K=hi(c,j,f,z,_),I=Math.min(I,K)}else{let K=uS(j,l),te=uS(z,m);Yd(C,I,_,c,f,K[0],te[0]),Yd(C,I,_,c,f,K[0],te[1]),Yd(C,I,_,c,f,K[1],te[0]),Yd(C,I,_,c,f,K[1],te[1])}}return I}function hS(c){return c.type==="MultiPolygon"?c.coordinates.map(l=>({type:"Polygon",coordinates:l})):c.type==="MultiLineString"?c.coordinates.map(l=>({type:"LineString",coordinates:l})):c.type==="MultiPoint"?c.coordinates.map(l=>({type:"Point",coordinates:l})):[c]}class Zd{constructor(l,f){this.type=St,this.geojson=l,this.geometries=f}static parse(l,f){if(l.length!==2)return f.error(`'distance' expression requires exactly one argument, but found ${l.length-1} instead.`);if(Bd(l[1])){let m=l[1];if(m.type==="FeatureCollection")return new Zd(m,m.features.map(_=>hS(_.geometry)).flat());if(m.type==="Feature")return new Zd(m,hS(m.geometry));if("type"in m&&"coordinates"in m)return new Zd(m,hS(m))}return f.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(l){if(l.geometry()!=null&&l.canonicalID()!=null){if(l.geometryType()==="Point")return function(f,m){let _=f.geometry(),S=_.flat().map(N=>aS([N.x,N.y],f.canonical));if(_.length===0)return NaN;let I=new lS(S[0][1]),C=1/0;for(let N of m){switch(N.type){case"Point":C=Math.min(C,gy(S,!1,[N.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,gy(S,!1,N.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,my(S,!1,N.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="LineString")return function(f,m){let _=f.geometry(),S=_.flat().map(N=>aS([N.x,N.y],f.canonical));if(_.length===0)return NaN;let I=new lS(S[0][1]),C=1/0;for(let N of m){switch(N.type){case"Point":C=Math.min(C,gy(S,!0,[N.coordinates],!1,I,C));break;case"LineString":C=Math.min(C,gy(S,!0,N.coordinates,!0,I,C));break;case"Polygon":C=Math.min(C,my(S,!0,N.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries);if(l.geometryType()==="Polygon")return function(f,m){let _=f.geometry();if(_.length===0||_[0].length===0)return NaN;let S=r_(_,0).map(N=>N.map(j=>j.map(z=>aS([z.x,z.y],f.canonical)))),I=new lS(S[0][0][0][1]),C=1/0;for(let N of m)for(let j of S){switch(N.type){case"Point":C=Math.min(C,my([N.coordinates],!1,j,I,C));break;case"LineString":C=Math.min(C,my(N.coordinates,!0,j,I,C));break;case"Polygon":C=Math.min(C,yo(j,N.coordinates,I,C));}if(C===0)return C}return C}(l,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let Dm={"==":cF,"!=":HD,">":fF,"<":WD,">=":$D,"<=":pF,array:Ou,at:eS,boolean:Ou,case:Z1,coalesce:J1,collator:dy,format:e_,image:oS,in:tS,"index-of":Tm,interpolate:Ds,"interpolate-hcl":Ds,"interpolate-lab":Ds,length:iS,let:yp,literal:Nu,match:rS,number:Ou,"number-format":nS,object:Ou,slice:fy,step:Mm,string:Ou,"to-boolean":Lu,"to-color":Lu,"to-number":Lu,"to-string":Lu,var:Fn,within:Wd,distance:Zd};class Bl{constructor(l,f,m,_){this.name=l,this.type=f,this._evaluate=m,this.args=_}evaluate(l){return this._evaluate(l,this.args)}eachChild(l){this.args.forEach(l)}outputDefined(){return!1}static parse(l,f){let m=l[0],_=Bl.definitions[m];if(!_)return f.error(`Unknown expression "${m}". If you wanted a literal array, use ["literal", [...]].`,0);let S=Array.isArray(_)?_[0]:_.type,I=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,C=I.filter(([j])=>!Array.isArray(j)||j.length===l.length-1),N=null;for(let[j,z]of C){N=new Vd(f.registry,vy,f.path,null,f.scope);let B=[],Y=!1;for(let K=1;K<l.length;K++){let te=l[K],oe=Array.isArray(j)?j[K-1]:j.type,he=N.parse(te,1+B.length,oe);if(!he){Y=!0;break}B.push(he)}if(!Y)if(Array.isArray(j)&&j.length!==B.length)N.error(`Expected ${j.length} arguments, but found ${B.length} instead.`);else{for(let K=0;K<B.length;K++){let te=Array.isArray(j)?j[K]:j.type,oe=B[K];N.concat(K+1).checkSubtype(te,oe.type)}if(N.errors.length===0)return new Bl(m,S,z,B)}}if(C.length===1)f.errors.push(...N.errors);else{let j=(C.length?C:I).map(([B])=>{return Y=B,Array.isArray(Y)?`(${Y.map(W).join(", ")})`:`(${W(Y.type)}...)`;var Y}).join(" | "),z=[];for(let B=1;B<l.length;B++){let Y=f.parse(l[B],1+z.length);if(!Y)return null;z.push(W(Y.type))}f.error(`Expected arguments of type ${j}, but found (${z.join(", ")}) instead.`)}return null}static register(l,f){Bl.definitions=f;for(let m in f)l[m]=Bl}}function mS(c,[l,f,m,_]){l=l.evaluate(c),f=f.evaluate(c),m=m.evaluate(c);let S=_?_.evaluate(c):1,I=Im(l,f,m,S);if(I)throw new wi(I);return new to(l/255,f/255,m/255,S,!1)}function gS(c,l){return c in l}function vS(c,l){let f=l[c];return f===void 0?null:f}function Kd(c){return{type:c}}function vy(c){if(c instanceof Fn)return vy(c.boundExpression);if(c instanceof Bl&&c.name==="error"||c instanceof dy||c instanceof Wd||c instanceof Zd)return!1;let l=c instanceof Lu||c instanceof Ou,f=!0;return c.eachChild(m=>{f=l?f&&vy(m):f&&m instanceof Nu}),!!f&&yy(c)&&_y(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function yy(c){if(c instanceof Bl&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Wd||c instanceof Zd)return!1;let l=!0;return c.eachChild(f=>{l&&!yy(f)&&(l=!1)}),l}function Nm(c){if(c instanceof Bl&&c.name==="feature-state")return!1;let l=!0;return c.eachChild(f=>{l&&!Nm(f)&&(l=!1)}),l}function _y(c,l){if(c instanceof Bl&&l.indexOf(c.name)>=0)return!1;let f=!0;return c.eachChild(m=>{f&&!_y(m,l)&&(f=!1)}),f}function a_(c){return{result:"success",value:c}}function Om(c){return{result:"error",value:c}}function Lm(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function a4(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function yS(c){return!!c.expression&&c.expression.interpolated}function jn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function s_(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)}function EF(c){return c}function s4(c,l){let f=l.type==="color",m=c.stops&&typeof c.stops[0][0]=="object",_=m||!(m||c.property!==void 0),S=c.type||(yS(l)?"exponential":"interval");if(f||l.type==="padding"){let z=f?to.parse:dl.parse;(c=zr({},c)).stops&&(c.stops=c.stops.map(B=>[B[0],z(B[1])])),c.default=z(c.default?c.default:l.default)}if(c.colorSpace&&(I=c.colorSpace)!=="rgb"&&I!=="hcl"&&I!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var I;let C,N,j;if(S==="exponential")C=u4;else if(S==="interval")C=l_;else if(S==="categorical"){C=l4,N=Object.create(null);for(let z of c.stops)N[z[0]]=z[1];j=typeof c.stops[0][0]}else{if(S!=="identity")throw new Error(`Unknown function type "${S}"`);C=c4}if(m){let z={},B=[];for(let te=0;te<c.stops.length;te++){let oe=c.stops[te],he=oe[0].zoom;z[he]===void 0&&(z[he]={zoom:he,type:c.type,property:c.property,default:c.default,stops:[]},B.push(he)),z[he].stops.push([oe[0].value,oe[1]])}let Y=[];for(let te of B)Y.push([z[te].zoom,s4(z[te],l)]);let K={name:"linear"};return{kind:"composite",interpolationType:K,interpolationFactor:Ds.interpolationFactor.bind(void 0,K),zoomStops:Y.map(te=>te[0]),evaluate:({zoom:te},oe)=>u4({stops:Y,base:c.base},l,te).evaluate(te,oe)}}if(_){let z=S==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:z,interpolationFactor:Ds.interpolationFactor.bind(void 0,z),zoomStops:c.stops.map(B=>B[0]),evaluate:({zoom:B})=>C(c,l,B,N,j)}}return{kind:"source",evaluate(z,B){let Y=B&&B.properties?B.properties[c.property]:void 0;return Y===void 0?Pm(c.default,l.default):C(c,l,Y,N,j)}}}function Pm(c,l,f){return c!==void 0?c:l!==void 0?l:f!==void 0?f:void 0}function l4(c,l,f,m,_){return Pm(typeof f===_?m[f]:void 0,c.default,l.default)}function l_(c,l,f){if(jn(f)!=="number")return Pm(c.default,l.default);let m=c.stops.length;if(m===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[m-1][0])return c.stops[m-1][1];let _=K1(c.stops.map(S=>S[0]),f);return c.stops[_][1]}function u4(c,l,f){let m=c.base!==void 0?c.base:1;if(jn(f)!=="number")return Pm(c.default,l.default);let _=c.stops.length;if(_===1||f<=c.stops[0][0])return c.stops[0][1];if(f>=c.stops[_-1][0])return c.stops[_-1][1];let S=K1(c.stops.map(z=>z[0]),f),I=function(z,B,Y,K){let te=K-Y,oe=z-Y;return te===0?0:B===1?oe/te:(Math.pow(B,oe)-1)/(Math.pow(B,te)-1)}(f,m,c.stops[S][0],c.stops[S+1][0]),C=c.stops[S][1],N=c.stops[S+1][1],j=As[l.type]||EF;return typeof C.evaluate=="function"?{evaluate(...z){let B=C.evaluate.apply(void 0,z),Y=N.evaluate.apply(void 0,z);if(B!==void 0&&Y!==void 0)return j(B,Y,I,c.colorSpace)}}:j(C,N,I,c.colorSpace)}function c4(c,l,f){switch(l.type){case"color":f=to.parse(f);break;case"formatted":f=pl.fromString(f.toString());break;case"resolvedImage":f=hl.fromString(f.toString());break;case"padding":f=dl.parse(f);break;default:jn(f)===l.type||l.type==="enum"&&l.values[f]||(f=void 0);}return Pm(f,c.default,l.default)}Bl.register(Dm,{error:[{kind:"error"},[Vr],(c,[l])=>{throw new wi(l.evaluate(c))}],typeof:[Vr,[Pe],(c,[l])=>W(Di(l.evaluate(c)))],"to-rgba":[$(St,4),[Qi],(c,[l])=>{let[f,m,_,S]=l.evaluate(c).rgb;return[255*f,255*m,255*_,S]}],rgb:[Qi,[St,St,St],mS],rgba:[Qi,[St,St,St,St],mS],has:{type:Er,overloads:[[[Vr],(c,[l])=>gS(l.evaluate(c),c.properties())],[[Vr,Ta],(c,[l,f])=>gS(l.evaluate(c),f.evaluate(c))]]},get:{type:Pe,overloads:[[[Vr],(c,[l])=>vS(l.evaluate(c),c.properties())],[[Vr,Ta],(c,[l,f])=>vS(l.evaluate(c),f.evaluate(c))]]},"feature-state":[Pe,[Vr],(c,[l])=>vS(l.evaluate(c),c.featureState||{})],properties:[Ta,[],c=>c.properties()],"geometry-type":[Vr,[],c=>c.geometryType()],id:[Pe,[],c=>c.id()],zoom:[St,[],c=>c.globals.zoom],"heatmap-density":[St,[],c=>c.globals.heatmapDensity||0],"line-progress":[St,[],c=>c.globals.lineProgress||0],accumulated:[Pe,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[St,Kd(St),(c,l)=>{let f=0;for(let m of l)f+=m.evaluate(c);return f}],"*":[St,Kd(St),(c,l)=>{let f=1;for(let m of l)f*=m.evaluate(c);return f}],"-":{type:St,overloads:[[[St,St],(c,[l,f])=>l.evaluate(c)-f.evaluate(c)],[[St],(c,[l])=>-l.evaluate(c)]]},"/":[St,[St,St],(c,[l,f])=>l.evaluate(c)/f.evaluate(c)],"%":[St,[St,St],(c,[l,f])=>l.evaluate(c)%f.evaluate(c)],ln2:[St,[],()=>Math.LN2],pi:[St,[],()=>Math.PI],e:[St,[],()=>Math.E],"^":[St,[St,St],(c,[l,f])=>Math.pow(l.evaluate(c),f.evaluate(c))],sqrt:[St,[St],(c,[l])=>Math.sqrt(l.evaluate(c))],log10:[St,[St],(c,[l])=>Math.log(l.evaluate(c))/Math.LN10],ln:[St,[St],(c,[l])=>Math.log(l.evaluate(c))],log2:[St,[St],(c,[l])=>Math.log(l.evaluate(c))/Math.LN2],sin:[St,[St],(c,[l])=>Math.sin(l.evaluate(c))],cos:[St,[St],(c,[l])=>Math.cos(l.evaluate(c))],tan:[St,[St],(c,[l])=>Math.tan(l.evaluate(c))],asin:[St,[St],(c,[l])=>Math.asin(l.evaluate(c))],acos:[St,[St],(c,[l])=>Math.acos(l.evaluate(c))],atan:[St,[St],(c,[l])=>Math.atan(l.evaluate(c))],min:[St,Kd(St),(c,l)=>Math.min(...l.map(f=>f.evaluate(c)))],max:[St,Kd(St),(c,l)=>Math.max(...l.map(f=>f.evaluate(c)))],abs:[St,[St],(c,[l])=>Math.abs(l.evaluate(c))],round:[St,[St],(c,[l])=>{let f=l.evaluate(c);return f<0?-Math.round(-f):Math.round(f)}],floor:[St,[St],(c,[l])=>Math.floor(l.evaluate(c))],ceil:[St,[St],(c,[l])=>Math.ceil(l.evaluate(c))],"filter-==":[Er,[Vr,Pe],(c,[l,f])=>c.properties()[l.value]===f.value],"filter-id-==":[Er,[Pe],(c,[l])=>c.id()===l.value],"filter-type-==":[Er,[Vr],(c,[l])=>c.geometryType()===l.value],"filter-<":[Er,[Vr,Pe],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m<_}],"filter-id-<":[Er,[Pe],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f<m}],"filter->":[Er,[Vr,Pe],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m>_}],"filter-id->":[Er,[Pe],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f>m}],"filter-<=":[Er,[Vr,Pe],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m<=_}],"filter-id-<=":[Er,[Pe],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f<=m}],"filter->=":[Er,[Vr,Pe],(c,[l,f])=>{let m=c.properties()[l.value],_=f.value;return typeof m==typeof _&&m>=_}],"filter-id->=":[Er,[Pe],(c,[l])=>{let f=c.id(),m=l.value;return typeof f==typeof m&&f>=m}],"filter-has":[Er,[Pe],(c,[l])=>l.value in c.properties()],"filter-has-id":[Er,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[Er,[$(Vr)],(c,[l])=>l.value.indexOf(c.geometryType())>=0],"filter-id-in":[Er,[$(Pe)],(c,[l])=>l.value.indexOf(c.id())>=0],"filter-in-small":[Er,[Vr,$(Pe)],(c,[l,f])=>f.value.indexOf(c.properties()[l.value])>=0],"filter-in-large":[Er,[Vr,$(Pe)],(c,[l,f])=>function(m,_,S,I){for(;S<=I;){let C=S+I>>1;if(_[C]===m)return!0;_[C]>m?I=C-1:S=C+1}return!1}(c.properties()[l.value],f.value,0,f.value.length-1)],all:{type:Er,overloads:[[[Er,Er],(c,[l,f])=>l.evaluate(c)&&f.evaluate(c)],[Kd(Er),(c,l)=>{for(let f of l)if(!f.evaluate(c))return!1;return!0}]]},any:{type:Er,overloads:[[[Er,Er],(c,[l,f])=>l.evaluate(c)||f.evaluate(c)],[Kd(Er),(c,l)=>{for(let f of l)if(f.evaluate(c))return!0;return!1}]]},"!":[Er,[Er],(c,[l])=>!l.evaluate(c)],"is-supported-script":[Er,[Vr],(c,[l])=>{let f=c.globals&&c.globals.isSupportedScript;return!f||f(l.evaluate(c))}],upcase:[Vr,[Vr],(c,[l])=>l.evaluate(c).toUpperCase()],downcase:[Vr,[Vr],(c,[l])=>l.evaluate(c).toLowerCase()],concat:[Vr,Kd(Pe),(c,l)=>l.map(f=>cy(f.evaluate(c))).join("")],"resolved-locale":[Vr,[Ge],(c,[l])=>l.evaluate(c).resolvedLocale()]});class u_{constructor(l,f){var m;this.expression=l,this._warningHistory={},this._evaluator=new Y1,this._defaultValue=f?(m=f).type==="color"&&s_(m.default)?new to(0,0,0,0):m.type==="color"?to.parse(m.default)||null:m.type==="padding"?dl.parse(m.default)||null:m.type==="variableAnchorOffsetCollection"?Ul.parse(m.default)||null:m.default===void 0?null:m.default:null,this._enumValues=f&&f.type==="enum"?f.values:null}evaluateWithoutErrorHandling(l,f,m,_,S,I){return this._evaluator.globals=l,this._evaluator.feature=f,this._evaluator.featureState=m,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I,this.expression.evaluate(this._evaluator)}evaluate(l,f,m,_,S,I){this._evaluator.globals=l,this._evaluator.feature=f||null,this._evaluator.featureState=m||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=I||null;try{let C=this.expression.evaluate(this._evaluator);if(C==null||typeof C=="number"&&C!=C)return this._defaultValue;if(this._enumValues&&!(C in this._enumValues))throw new wi(`Expected value to be one of ${Object.keys(this._enumValues).map(N=>JSON.stringify(N)).join(", ")}, but found ${JSON.stringify(C)} instead.`);return C}catch(C){return this._warningHistory[C.message]||(this._warningHistory[C.message]=!0,typeof console!="undefined"&&console.warn(C.message)),this._defaultValue}}}function c_(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in Dm}function km(c,l){let f=new Vd(Dm,vy,[],l?function(_){let S={color:Qi,string:Vr,number:St,enum:Vr,boolean:Er,formatted:wt,padding:Zt,resolvedImage:Ht,variableAnchorOffsetCollection:ae};return _.type==="array"?$(S[_.value]||Pe,_.length):S[_.type]}(l):void 0),m=f.parse(c,void 0,void 0,void 0,l&&l.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?a_(new u_(m,l)):Om(f.errors)}class Rm{constructor(l,f){this.kind=l,this._styleExpression=f,this.isStateDependent=l!=="constant"&&!Nm(f.expression)}evaluateWithoutErrorHandling(l,f,m,_,S,I){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,S,I)}evaluate(l,f,m,_,S,I){return this._styleExpression.evaluate(l,f,m,_,S,I)}}class jm{constructor(l,f,m,_){this.kind=l,this.zoomStops=m,this._styleExpression=f,this.isStateDependent=l!=="camera"&&!Nm(f.expression),this.interpolationType=_}evaluateWithoutErrorHandling(l,f,m,_,S,I){return this._styleExpression.evaluateWithoutErrorHandling(l,f,m,_,S,I)}evaluate(l,f,m,_,S,I){return this._styleExpression.evaluate(l,f,m,_,S,I)}interpolationFactor(l,f,m){return this.interpolationType?Ds.interpolationFactor(this.interpolationType,l,f,m):0}}function _S(c,l){let f=km(c,l);if(f.result==="error")return f;let m=f.value.expression,_=yy(m);if(!_&&!Lm(l))return Om([new on("","data expressions not supported")]);let S=_y(m,["zoom"]);if(!S&&!a4(l))return Om([new on("","zoom expressions not supported")]);let I=xy(m);return I||S?I instanceof on?Om([I]):I instanceof Ds&&!yS(l)?Om([new on("","\"interpolate\" expressions cannot be used with this property")]):a_(I?new jm(_?"camera":"composite",f.value,I.labels,I instanceof Ds?I.interpolation:void 0):new Rm(_?"constant":"source",f.value)):Om([new on("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class qm{constructor(l,f){this._parameters=l,this._specification=f,zr(this,s4(this._parameters,this._specification))}static deserialize(l){return new qm(l._parameters,l._specification)}static serialize(l){return{_parameters:l._parameters,_specification:l._specification}}}function xy(c){let l=null;if(c instanceof yp)l=xy(c.result);else if(c instanceof J1){for(let f of c.args)if(l=xy(f),l)break}else(c instanceof Mm||c instanceof Ds)&&c.input instanceof Bl&&c.input.name==="zoom"&&(l=c);return l instanceof on||c.eachChild(f=>{let m=xy(f);m instanceof on?l=m:!l&&m?l=new on("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):l&&m&&l!==m&&(l=new on("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),l}function f_(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(let l of c.slice(1))if(!f_(l)&&typeof l!="boolean")return!1;return!0;default:return!0;}}let p_={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function xS(c){if(c==null)return{filter:()=>!0,needGeometry:!1};f_(c)||(c=d_(c));let l=km(c,p_);if(l.result==="error")throw new Error(l.value.map(f=>`${f.key}: ${f.message}`).join(", "));return{filter:(f,m,_)=>l.value.evaluate(f,m,{},_),needGeometry:f4(c)}}function SF(c,l){return c<l?-1:c>l?1:0}function f4(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let l=1;l<c.length;l++)if(f4(c[l]))return!0;return!1}function d_(c){if(!c)return!0;let l=c[0];return c.length<=1?l!=="any":l==="=="?bS(c[1],c[2],"=="):l==="!="?Ma(bS(c[1],c[2],"==")):l==="<"||l===">"||l==="<="||l===">="?bS(c[1],c[2],l):l==="any"?(f=c.slice(1),["any"].concat(f.map(d_))):l==="all"?["all"].concat(c.slice(1).map(d_)):l==="none"?["all"].concat(c.slice(1).map(d_).map(Ma)):l==="in"?by(c[1],c.slice(2)):l==="!in"?Ma(by(c[1],c.slice(2))):l==="has"?wy(c[1]):l!=="!has"||Ma(wy(c[1]));var f}function bS(c,l,f){switch(c){case"$type":return[`filter-type-${f}`,l];case"$id":return[`filter-id-${f}`,l];default:return[`filter-${f}`,c,l];}}function by(c,l){if(l.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",l]];case"$id":return["filter-id-in",["literal",l]];default:return l.length>200&&!l.some(f=>typeof f!=typeof l[0])?["filter-in-large",c,["literal",l.sort(SF)]]:["filter-in-small",c,["literal",l]];}}function wy(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c];}}function Ma(c){return["!",c]}function Xd(c){let l=typeof c;if(l==="number"||l==="boolean"||l==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let _="[";for(let S of c)_+=`${Xd(S)},`;return`${_}]`}let f=Object.keys(c).sort(),m="{";for(let _=0;_<f.length;_++)m+=`${JSON.stringify(f[_])}:${Xd(c[f[_]])},`;return`${m}}`}function p4(c){let l="";for(let f of Lt)l+=`/${Xd(c[f])}`;return l}function d4(c){let l=c.value;return l?[new nt(c.key,l,"constants have been deprecated as of v8")]:[]}function mi(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function Pu(c){if(Array.isArray(c))return c.map(Pu);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){let l={};for(let f in c)l[f]=Pu(c[f]);return l}return mi(c)}function ml(c){let l=c.key,f=c.value,m=c.valueSpec||{},_=c.objectElementValidators||{},S=c.style,I=c.styleSpec,C=c.validateSpec,N=[],j=jn(f);if(j!=="object")return[new nt(l,f,`object expected, ${j} found`)];for(let z in f){let B=z.split(".")[0],Y=m[B]||m["*"],K;if(_[B])K=_[B];else if(m[B])K=C;else if(_["*"])K=_["*"];else{if(!m["*"]){N.push(new nt(l,f[z],`unknown property "${z}"`));continue}K=C}N=N.concat(K({key:(l&&`${l}.`)+z,value:f[z],valueSpec:Y,style:S,styleSpec:I,object:f,objectKey:z,validateSpec:C},f))}for(let z in m)_[z]||m[z].required&&m[z].default===void 0&&f[z]===void 0&&N.push(new nt(l,f,`missing required property "${z}"`));return N}function Ey(c){let l=c.value,f=c.valueSpec,m=c.style,_=c.styleSpec,S=c.key,I=c.arrayElementValidator||c.validateSpec;if(jn(l)!=="array")return[new nt(S,l,`array expected, ${jn(l)} found`)];if(f.length&&l.length!==f.length)return[new nt(S,l,`array length ${f.length} expected, length ${l.length} found`)];if(f["min-length"]&&l.length<f["min-length"])return[new nt(S,l,`array length at least ${f["min-length"]} expected, length ${l.length} found`)];let C={type:f.value,values:f.values};_.$version<7&&(C.function=f.function),jn(f.value)==="object"&&(C=f.value);let N=[];for(let j=0;j<l.length;j++)N=N.concat(I({array:l,arrayIndex:j,value:l[j],valueSpec:C,validateSpec:c.validateSpec,style:m,styleSpec:_,key:`${S}[${j}]`}));return N}function wS(c){let l=c.key,f=c.value,m=c.valueSpec,_=jn(f);return _==="number"&&f!=f&&(_="NaN"),_!=="number"?[new nt(l,f,`number expected, ${_} found`)]:"minimum"in m&&f<m.minimum?[new nt(l,f,`${f} is less than the minimum value ${m.minimum}`)]:"maximum"in m&&f>m.maximum?[new nt(l,f,`${f} is greater than the maximum value ${m.maximum}`)]:[]}function h_(c){let l=c.valueSpec,f=mi(c.value.type),m,_,S,I={},C=f!=="categorical"&&c.value.property===void 0,N=!C,j=jn(c.value.stops)==="array"&&jn(c.value.stops[0])==="array"&&jn(c.value.stops[0][0])==="object",z=ml({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(K){if(f==="identity")return[new nt(K.key,K.value,"identity function may not have a \"stops\" property")];let te=[],oe=K.value;return te=te.concat(Ey({key:K.key,value:oe,valueSpec:K.valueSpec,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,arrayElementValidator:B})),jn(oe)==="array"&&oe.length===0&&te.push(new nt(K.key,oe,"array must have at least one stop")),te},default:function(K){return K.validateSpec({key:K.key,value:K.value,valueSpec:l,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec})}}});return f==="identity"&&C&&z.push(new nt(c.key,c.value,"missing required property \"property\"")),f==="identity"||c.value.stops||z.push(new nt(c.key,c.value,"missing required property \"stops\"")),f==="exponential"&&c.valueSpec.expression&&!yS(c.valueSpec)&&z.push(new nt(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(N&&!Lm(c.valueSpec)?z.push(new nt(c.key,c.value,"property functions not supported")):C&&!a4(c.valueSpec)&&z.push(new nt(c.key,c.value,"zoom functions not supported"))),f!=="categorical"&&!j||c.value.property!==void 0||z.push(new nt(c.key,c.value,"\"property\" property is required")),z;function B(K){let te=[],oe=K.value,he=K.key;if(jn(oe)!=="array")return[new nt(he,oe,`array expected, ${jn(oe)} found`)];if(oe.length!==2)return[new nt(he,oe,`array length 2 expected, length ${oe.length} found`)];if(j){if(jn(oe[0])!=="object")return[new nt(he,oe,`object expected, ${jn(oe[0])} found`)];if(oe[0].zoom===void 0)return[new nt(he,oe,"object stop key must have zoom")];if(oe[0].value===void 0)return[new nt(he,oe,"object stop key must have value")];if(S&&S>mi(oe[0].zoom))return[new nt(he,oe[0].zoom,"stop zoom values must appear in ascending order")];mi(oe[0].zoom)!==S&&(S=mi(oe[0].zoom),_=void 0,I={}),te=te.concat(ml({key:`${he}[0]`,value:oe[0],valueSpec:{zoom:{}},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec,objectElementValidators:{zoom:wS,value:Y}}))}else te=te.concat(Y({key:`${he}[0]`,value:oe[0],valueSpec:{},validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec},oe));return c_(Pu(oe[1]))?te.concat([new nt(`${he}[1]`,oe[1],"expressions are not allowed in function stops.")]):te.concat(K.validateSpec({key:`${he}[1]`,value:oe[1],valueSpec:l,validateSpec:K.validateSpec,style:K.style,styleSpec:K.styleSpec}))}function Y(K,te){let oe=jn(K.value),he=mi(K.value),ve=K.value!==null?K.value:te;if(m){if(oe!==m)return[new nt(K.key,ve,`${oe} stop domain type must match previous stop domain type ${m}`)]}else m=oe;if(oe!=="number"&&oe!=="string"&&oe!=="boolean")return[new nt(K.key,ve,"stop domain value must be a number, string, or boolean")];if(oe!=="number"&&f!=="categorical"){let $e=`number expected, ${oe} found`;return Lm(l)&&f===void 0&&($e+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new nt(K.key,ve,$e)]}return f!=="categorical"||oe!=="number"||isFinite(he)&&Math.floor(he)===he?f!=="categorical"&&oe==="number"&&_!==void 0&&he<_?[new nt(K.key,ve,"stop domain values must appear in ascending order")]:(_=he,f==="categorical"&&he in I?[new nt(K.key,ve,"stop domain values must be unique")]:(I[he]=!0,[])):[new nt(K.key,ve,`integer expected, found ${he}`)]}}function zm(c){let l=(c.expressionContext==="property"?_S:km)(Pu(c.value),c.valueSpec);if(l.result==="error")return l.value.map(m=>new nt(`${c.key}${m.key}`,c.value,m.message));let f=l.value.expression||l.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!f.outputDefined())return[new nt(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Nm(f))return[new nt(c.key,c.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(c.expressionContext==="filter"&&!Nm(f))return[new nt(c.key,c.value,"\"feature-state\" data expressions are not supported with filters.")];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!_y(f,["zoom","feature-state"]))return[new nt(c.key,c.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(c.expressionContext==="cluster-initial"&&!yy(f))return[new nt(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function wf(c){let l=c.key,f=c.value,m=c.valueSpec,_=[];return Array.isArray(m.values)?m.values.indexOf(mi(f))===-1&&_.push(new nt(l,f,`expected one of [${m.values.join(", ")}], ${JSON.stringify(f)} found`)):Object.keys(m.values).indexOf(mi(f))===-1&&_.push(new nt(l,f,`expected one of [${Object.keys(m.values).join(", ")}], ${JSON.stringify(f)} found`)),_}function ES(c){return f_(Pu(c.value))?zm(zr({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):m_(c)}function m_(c){let l=c.value,f=c.key;if(jn(l)!=="array")return[new nt(f,l,`array expected, ${jn(l)} found`)];let m=c.styleSpec,_,S=[];if(l.length<1)return[new nt(f,l,"filter array must have at least 1 element")];switch(S=S.concat(wf({key:`${f}[0]`,value:l[0],valueSpec:m.filter_operator,style:c.style,styleSpec:c.styleSpec})),mi(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&mi(l[1])==="$type"&&S.push(new nt(f,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&S.push(new nt(f,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(_=jn(l[1]),_!=="string"&&S.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`)));for(let I=2;I<l.length;I++)_=jn(l[I]),mi(l[1])==="$type"?S=S.concat(wf({key:`${f}[${I}]`,value:l[I],valueSpec:m.geometry_type,style:c.style,styleSpec:c.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new nt(`${f}[${I}]`,l[I],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let I=1;I<l.length;I++)S=S.concat(m_({key:`${f}[${I}]`,value:l[I],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":_=jn(l[1]),l.length!==2?S.push(new nt(f,l,`filter array for "${l[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new nt(`${f}[1]`,l[1],`string expected, ${_} found`));}return S}function SS(c,l){let f=c.key,m=c.validateSpec,_=c.style,S=c.styleSpec,I=c.value,C=c.objectKey,N=S[`${l}_${c.layerType}`];if(!N)return[];let j=C.match(/^(.*)-transition$/);if(l==="paint"&&j&&N[j[1]]&&N[j[1]].transition)return m({key:f,value:I,valueSpec:S.transition,style:_,styleSpec:S});let z=c.valueSpec||N[C];if(!z)return[new nt(f,I,`unknown property "${C}"`)];let B;if(jn(I)==="string"&&Lm(z)&&!z.tokens&&(B=/^{([^}]+)}$/.exec(I)))return[new nt(f,I,`"${C}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(B[1])} }\`.`)];let Y=[];return c.layerType==="symbol"&&(C==="text-field"&&_&&!_.glyphs&&Y.push(new nt(f,I,"use of \"text-field\" requires a style \"glyphs\" property")),C==="text-font"&&s_(Pu(I))&&mi(I.type)==="identity"&&Y.push(new nt(f,I,"\"text-font\" does not support identity functions"))),Y.concat(m({key:c.key,value:I,valueSpec:z,style:_,styleSpec:S,expressionContext:"property",propertyType:l,propertyKey:C}))}function g_(c){return SS(c,"paint")}function IS(c){return SS(c,"layout")}function TS(c){let l=[],f=c.value,m=c.key,_=c.style,S=c.styleSpec;f.type||f.ref||l.push(new nt(m,f,"either \"type\" or \"ref\" is required"));let I=mi(f.type),C=mi(f.ref);if(f.id){let N=mi(f.id);for(let j=0;j<c.arrayIndex;j++){let z=_.layers[j];mi(z.id)===N&&l.push(new nt(m,f.id,`duplicate layer id "${f.id}", previously used at line ${z.id.__line__}`))}}if("ref"in f){let N;["type","source","source-layer","filter","layout"].forEach(j=>{j in f&&l.push(new nt(m,f[j],`"${j}" is prohibited for ref layers`))}),_.layers.forEach(j=>{mi(j.id)===C&&(N=j)}),N?N.ref?l.push(new nt(m,f.ref,"ref cannot reference another ref layer")):I=mi(N.type):l.push(new nt(m,f.ref,`ref layer "${C}" not found`))}else if(I!=="background")if(f.source){let N=_.sources&&_.sources[f.source],j=N&&mi(N.type);N?j==="vector"&&I==="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster source`)):j!=="raster-dem"&&I==="hillshade"?l.push(new nt(m,f.source,`layer "${f.id}" requires a raster-dem source`)):j==="raster"&&I!=="raster"?l.push(new nt(m,f.source,`layer "${f.id}" requires a vector source`)):j!=="vector"||f["source-layer"]?j==="raster-dem"&&I!=="hillshade"?l.push(new nt(m,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):I!=="line"||!f.paint||!f.paint["line-gradient"]||j==="geojson"&&N.lineMetrics||l.push(new nt(m,f,`layer "${f.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new nt(m,f,`layer "${f.id}" must specify a "source-layer"`)):l.push(new nt(m,f.source,`source "${f.source}" not found`))}else l.push(new nt(m,f,"missing required property \"source\""));return l=l.concat(ml({key:m,value:f,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${m}.type`,value:f.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:f,objectKey:"type"}),filter:ES,layout:N=>ml({layer:f,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":j=>IS(zr({layerType:I},j))}}),paint:N=>ml({layer:f,key:N.key,value:N.value,style:N.style,styleSpec:N.styleSpec,validateSpec:N.validateSpec,objectElementValidators:{"*":j=>g_(zr({layerType:I},j))}})}})),l}function Jd(c){let l=c.value,f=c.key,m=jn(l);return m!=="string"?[new nt(f,l,`string expected, ${m} found`)]:[]}let v_={promoteId:function({key:c,value:l}){if(jn(l)==="string")return Jd({key:c,value:l});{let f=[];for(let m in l)f.push(...Jd({key:`${c}.${m}`,value:l[m]}));return f}}};function Sy(c){let l=c.value,f=c.key,m=c.styleSpec,_=c.style,S=c.validateSpec;if(!l.type)return[new nt(f,l,"\"type\" is required")];let I=mi(l.type),C;switch(I){case"vector":case"raster":return C=ml({key:f,value:l,valueSpec:m[`source_${I.replace("-","_")}`],style:c.style,styleSpec:m,objectElementValidators:v_,validateSpec:S}),C;case"raster-dem":return C=function(N){var j;let z=(j=N.sourceName)!==null&&j!==void 0?j:"",B=N.value,Y=N.styleSpec,K=Y.source_raster_dem,te=N.style,oe=[],he=jn(B);if(B===void 0)return oe;if(he!=="object")return oe.push(new nt("source_raster_dem",B,`object expected, ${he} found`)),oe;let ve=mi(B.encoding)==="custom",$e=["redFactor","greenFactor","blueFactor","baseShift"],Ce=N.value.encoding?`"${N.value.encoding}"`:"Default";for(let He in B)!ve&&$e.includes(He)?oe.push(new nt(He,B[He],`In "${z}": "${He}" is only valid when "encoding" is set to "custom". ${Ce} encoding found`)):K[He]?oe=oe.concat(N.validateSpec({key:He,value:B[He],valueSpec:K[He],validateSpec:N.validateSpec,style:te,styleSpec:Y})):oe.push(new nt(He,B[He],`unknown property "${He}"`));return oe}({sourceName:f,value:l,style:c.style,styleSpec:m,validateSpec:S}),C;case"geojson":if(C=ml({key:f,value:l,valueSpec:m.source_geojson,style:_,styleSpec:m,validateSpec:S,objectElementValidators:v_}),l.cluster)for(let N in l.clusterProperties){let[j,z]=l.clusterProperties[N],B=typeof j=="string"?[j,["accumulated"],["get",N]]:j;C.push(...zm({key:`${f}.${N}.map`,value:z,validateSpec:S,expressionContext:"cluster-map"})),C.push(...zm({key:`${f}.${N}.reduce`,value:B,validateSpec:S,expressionContext:"cluster-reduce"}))}return C;case"video":return ml({key:f,value:l,valueSpec:m.source_video,style:_,validateSpec:S,styleSpec:m});case"image":return ml({key:f,value:l,valueSpec:m.source_image,style:_,validateSpec:S,styleSpec:m});case"canvas":return[new nt(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return wf({key:`${f}.type`,value:l.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:_,validateSpec:S,styleSpec:m});}}function MS(c){let l=c.value,f=c.styleSpec,m=f.light,_=c.style,S=[],I=jn(l);if(l===void 0)return S;if(I!=="object")return S=S.concat([new nt("light",l,`object expected, ${I} found`)]),S;for(let C in l){let N=C.match(/^(.*)-transition$/);S=S.concat(N&&m[N[1]]&&m[N[1]].transition?c.validateSpec({key:C,value:l[C],valueSpec:f.transition,validateSpec:c.validateSpec,style:_,styleSpec:f}):m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)])}return S}function CS(c){let l=c.value,f=c.styleSpec,m=f.sky,_=c.style,S=jn(l);if(l===void 0)return[];if(S!=="object")return[new nt("sky",l,`object expected, ${S} found`)];let I=[];for(let C in l)I=I.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return I}function AS(c){let l=c.value,f=c.styleSpec,m=f.terrain,_=c.style,S=[],I=jn(l);if(l===void 0)return S;if(I!=="object")return S=S.concat([new nt("terrain",l,`object expected, ${I} found`)]),S;for(let C in l)S=S.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],validateSpec:c.validateSpec,style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return S}function DS(c){let l=[],f=c.value,m=c.key;if(Array.isArray(f)){let _=[],S=[];for(let I in f)f[I].id&&_.includes(f[I].id)&&l.push(new nt(m,f,`all the sprites' ids must be unique, but ${f[I].id} is duplicated`)),_.push(f[I].id),f[I].url&&S.includes(f[I].url)&&l.push(new nt(m,f,`all the sprites' URLs must be unique, but ${f[I].url} is duplicated`)),S.push(f[I].url),l=l.concat(ml({key:`${m}[${I}]`,value:f[I],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return l}return Jd({key:m,value:f})}let y_={"*":()=>[],array:Ey,boolean:function(c){let l=c.value,f=c.key,m=jn(l);return m!=="boolean"?[new nt(f,l,`boolean expected, ${m} found`)]:[]},number:wS,color:function(c){let l=c.key,f=c.value,m=jn(f);return m!=="string"?[new nt(l,f,`color expected, ${m} found`)]:to.parse(String(f))?[]:[new nt(l,f,`color expected, "${f}" found`)]},constants:d4,enum:wf,filter:ES,function:h_,layer:TS,object:ml,source:Sy,light:MS,sky:CS,terrain:AS,projection:function(c){let l=c.value,f=c.styleSpec,m=f.projection,_=c.style,S=jn(l);if(l===void 0)return[];if(S!=="object")return[new nt("projection",l,`object expected, ${S} found`)];let I=[];for(let C in l)I=I.concat(m[C]?c.validateSpec({key:C,value:l[C],valueSpec:m[C],style:_,styleSpec:f}):[new nt(C,l[C],`unknown property "${C}"`)]);return I},string:Jd,formatted:function(c){return Jd(c).length===0?[]:zm(c)},resolvedImage:function(c){return Jd(c).length===0?[]:zm(c)},padding:function(c){let l=c.key,f=c.value;if(jn(f)==="array"){if(f.length<1||f.length>4)return[new nt(l,f,`padding requires 1 to 4 values; ${f.length} values found`)];let m={type:"number"},_=[];for(let S=0;S<f.length;S++)_=_.concat(c.validateSpec({key:`${l}[${S}]`,value:f[S],validateSpec:c.validateSpec,valueSpec:m}));return _}return wS({key:l,value:f,valueSpec:{}})},variableAnchorOffsetCollection:function(c){let l=c.key,f=c.value,m=jn(f),_=c.styleSpec;if(m!=="array"||f.length<1||f.length%2!=0)return[new nt(l,f,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let I=0;I<f.length;I+=2)S=S.concat(wf({key:`${l}[${I}]`,value:f[I],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(Ey({key:`${l}[${I+1}]`,value:f[I+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:_}));return S},sprite:DS};function Fm(c){let l=c.value,f=c.valueSpec,m=c.styleSpec;return c.validateSpec=Fm,f.expression&&s_(mi(l))?h_(c):f.expression&&c_(Pu(l))?zm(c):f.type&&y_[f.type]?y_[f.type](c):ml(zr({},c,{valueSpec:f.type?m[f.type]:f}))}function h4(c){let l=c.value,f=c.key,m=Jd(c);return m.length||(l.indexOf("{fontstack}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{fontstack}\" token")),l.indexOf("{range}")===-1&&m.push(new nt(f,l,"\"glyphs\" url must include a \"{range}\" token"))),m}function Vl(c,l=Ae){let f=[];return f=f.concat(Fm({key:"",value:c,valueSpec:l.$root,styleSpec:l,style:c,validateSpec:Fm,objectElementValidators:{glyphs:h4,"*":()=>[]}})),c.constants&&(f=f.concat(d4({key:"constants",value:c.constants,style:c,styleSpec:l,validateSpec:Fm}))),NS(f)}function cc(c){return function(l){return c(qt(Se({},l),{validateSpec:Fm}))}}function NS(c){return[].concat(c).sort((l,f)=>l.line-f.line)}function ku(c){return function(...l){return NS(c.apply(this,l))}}Vl.source=ku(cc(Sy)),Vl.sprite=ku(cc(DS)),Vl.glyphs=ku(cc(h4)),Vl.light=ku(cc(MS)),Vl.sky=ku(cc(CS)),Vl.terrain=ku(cc(AS)),Vl.layer=ku(cc(TS)),Vl.filter=ku(cc(ES)),Vl.paintProperty=ku(cc(g_)),Vl.layoutProperty=ku(cc(IS));let Qd=Vl,IF=Qd.light,TF=Qd.sky,m4=Qd.paintProperty,g4=Qd.layoutProperty;function OS(c,l){let f=!1;if(l&&l.length)for(let m of l)c.fire(new Mt(new Error(m.message))),f=!0;return f}class Um{constructor(l,f,m){let _=this.cells=[];if(l instanceof ArrayBuffer){this.arrayBuffer=l;let I=new Int32Array(this.arrayBuffer);l=I[0],this.d=(f=I[1])+2*(m=I[2]);for(let N=0;N<this.d*this.d;N++){let j=I[3+N],z=I[3+N+1];_.push(j===z?null:I.subarray(j,z))}let C=I[3+_.length+1];this.keys=I.subarray(I[3+_.length],C),this.bboxes=I.subarray(C),this.insert=this._insertReadonly}else{this.d=f+2*m;for(let I=0;I<this.d*this.d;I++)_.push([]);this.keys=[],this.bboxes=[]}this.n=f,this.extent=l,this.padding=m,this.scale=f/l,this.uid=0;let S=m/f*l;this.min=-S,this.max=l+S}insert(l,f,m,_,S){this._forEachCell(f,m,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(l),this.bboxes.push(f),this.bboxes.push(m),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(l,f,m,_,S,I){this.cells[S].push(I)}query(l,f,m,_,S){let I=this.min,C=this.max;if(l<=I&&f<=I&&C<=m&&C<=_&&!S)return Array.prototype.slice.call(this.keys);{let N=[];return this._forEachCell(l,f,m,_,this._queryCell,N,{},S),N}}_queryCell(l,f,m,_,S,I,C,N){let j=this.cells[S];if(j!==null){let z=this.keys,B=this.bboxes;for(let Y=0;Y<j.length;Y++){let K=j[Y];if(C[K]===void 0){let te=4*K;(N?N(B[te+0],B[te+1],B[te+2],B[te+3]):l<=B[te+2]&&f<=B[te+3]&&m>=B[te+0]&&_>=B[te+1])?(C[K]=!0,I.push(z[K])):C[K]=!1}}}}_forEachCell(l,f,m,_,S,I,C,N){let j=this._convertToCellCoord(l),z=this._convertToCellCoord(f),B=this._convertToCellCoord(m),Y=this._convertToCellCoord(_);for(let K=j;K<=B;K++)for(let te=z;te<=Y;te++){let oe=this.d*te+K;if((!N||N(this._convertFromCellCoord(K),this._convertFromCellCoord(te),this._convertFromCellCoord(K+1),this._convertFromCellCoord(te+1)))&&S.call(this,l,f,m,_,oe,I,C,N))return}}_convertFromCellCoord(l){return(l-this.padding)/this.scale}_convertToCellCoord(l){return Math.max(0,Math.min(this.d-1,Math.floor(l*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let l=this.cells,f=3+this.cells.length+1+1,m=0;for(let I=0;I<this.cells.length;I++)m+=this.cells[I].length;let _=new Int32Array(f+m+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=f;for(let I=0;I<l.length;I++){let C=l[I];_[3+I]=S,_.set(C,S),S+=C.length}return _[3+l.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+l.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(l,f){let m=l.toArrayBuffer();return f&&f.push(m),{buffer:m}}static deserialize(l){return new Um(l.buffer)}}let Gl={};function or(c,l,f={}){if(Gl[c])throw new Error(`${c} is already registered.`);Object.defineProperty(l,"_classRegistryKey",{value:c,writeable:!1}),Gl[c]={klass:l,omit:f.omit||[],shallow:f.shallow||[]}}or("Object",Object),or("TransferableGridIndex",Um),or("Color",to),or("Error",Error),or("AJAXError",ze),or("ResolvedImage",hl),or("StylePropertyFunction",qm),or("StyleExpression",u_,{omit:["_evaluator"]}),or("ZoomDependentExpression",jm),or("ZoomConstantExpression",Rm),or("CompoundExpression",Bl,{omit:["_evaluate"]});for(let c in Dm)Dm[c]._classRegistryKey||or(`Expression_${c}`,Dm[c]);function __(c){return c&&typeof ArrayBuffer!="undefined"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function LS(c){return c.$name||c.constructor._classRegistryKey}function v4(c){return!function(l){if(l===null||typeof l!="object")return!1;let f=LS(l);return!(!f||f==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||__(c)||Qe(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Bm(c,l){if(v4(c))return(__(c)||Qe(c))&&l&&l.push(c),ArrayBuffer.isView(c)&&l&&l.push(c.buffer),c instanceof ImageData&&l&&l.push(c.data.buffer),c;if(Array.isArray(c)){let S=[];for(let I of c)S.push(Bm(I,l));return S}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);let f=LS(c);if(!f)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Gl[f])throw new Error(`${f} is not registered.`);let{klass:m}=Gl[f],_=m.serialize?m.serialize(c,l):{};if(m.serialize){if(l&&_===l[l.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let S in c){if(!c.hasOwnProperty(S)||Gl[f].omit.indexOf(S)>=0)continue;let I=c[S];_[S]=Gl[f].shallow.indexOf(S)>=0?I:Bm(I,l)}c instanceof Error&&(_.message=c.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return f!=="Object"&&(_.$name=f),_}function Vm(c){if(v4(c))return c;if(Array.isArray(c))return c.map(Vm);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);let l=LS(c)||"Object";if(!Gl[l])throw new Error(`can't deserialize unregistered class ${l}`);let{klass:f}=Gl[l];if(!f)throw new Error(`can't deserialize unregistered class ${l}`);if(f.deserialize)return f.deserialize(c);let m=Object.create(f.prototype);for(let _ of Object.keys(c)){if(_==="$name")continue;let S=c[_];m[_]=Gl[l].shallow.indexOf(_)>=0?S:Vm(S)}return m}class PS{constructor(){this.first=!0}update(l,f){let m=Math.floor(l);return this.first?(this.first=!1,this.lastIntegerZoom=m,this.lastIntegerZoomTime=0,this.lastZoom=l,this.lastFloorZoom=m,!0):(this.lastFloorZoom>m?(this.lastIntegerZoom=m+1,this.lastIntegerZoomTime=f):this.lastFloorZoom<m&&(this.lastIntegerZoom=m,this.lastIntegerZoomTime=f),l!==this.lastZoom&&(this.lastZoom=l,this.lastFloorZoom=m,!0))}}let bn={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function kS(c){for(let l of c)if(jS(l.charCodeAt(0)))return!0;return!1}function MF(c){for(let l of c)if(!Gm(l.charCodeAt(0)))return!1;return!0}function RS(c){let l=c.map(f=>{try{return new RegExp(`\\p{sc=${f}}`,"u").source}catch(m){return null}}).filter(f=>f);return new RegExp(l.join("|"),"u")}let CF=RS(["Arab","Dupl","Mong","Ougr","Syrc"]);function Gm(c){return!CF.test(String.fromCodePoint(c))}let y4=RS(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function jS(c){return!(c!==746&&c!==747&&(c<4352||!(bn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||bn["CJK Compatibility"](c)||bn["CJK Strokes"](c)||!(!bn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||bn["Enclosed CJK Letters and Months"](c)||bn["Ideographic Description Characters"](c)||bn.Kanbun(c)||bn.Katakana(c)&&c!==12540||!(!bn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!bn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||bn["Vertical Forms"](c)||bn["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||y4.test(String.fromCodePoint(c)))))}function _4(c){return!(jS(c)||function(l){return!!(bn["Latin-1 Supplement"](l)&&(l===167||l===169||l===174||l===177||l===188||l===189||l===190||l===215||l===247)||bn["General Punctuation"](l)&&(l===8214||l===8224||l===8225||l===8240||l===8241||l===8251||l===8252||l===8258||l===8263||l===8264||l===8265||l===8273)||bn["Letterlike Symbols"](l)||bn["Number Forms"](l)||bn["Miscellaneous Technical"](l)&&(l>=8960&&l<=8967||l>=8972&&l<=8991||l>=8996&&l<=9e3||l===9003||l>=9085&&l<=9114||l>=9150&&l<=9165||l===9167||l>=9169&&l<=9179||l>=9186&&l<=9215)||bn["Control Pictures"](l)&&l!==9251||bn["Optical Character Recognition"](l)||bn["Enclosed Alphanumerics"](l)||bn["Geometric Shapes"](l)||bn["Miscellaneous Symbols"](l)&&!(l>=9754&&l<=9759)||bn["Miscellaneous Symbols and Arrows"](l)&&(l>=11026&&l<=11055||l>=11088&&l<=11097||l>=11192&&l<=11243)||bn["CJK Symbols and Punctuation"](l)||bn.Katakana(l)||bn["Private Use Area"](l)||bn["CJK Compatibility Forms"](l)||bn["Small Form Variants"](l)||bn["Halfwidth and Fullwidth Forms"](l)||l===8734||l===8756||l===8757||l>=9984&&l<=10087||l>=10102&&l<=10131||l===65532||l===65533)}(c))}let AF=RS(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function qS(c){return AF.test(String.fromCodePoint(c))}function DF(c,l){return!(!l&&qS(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||bn.Khmer(c))}function NF(c){for(let l of c)if(qS(l.charCodeAt(0)))return!0;return!1}let gl=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class Do{constructor(l,f){this.zoom=l,f?(this.now=f.now,this.fadeDuration=f.fadeDuration,this.zoomHistory=f.zoomHistory,this.transition=f.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new PS,this.transition={})}isSupportedScript(l){return function(f,m){for(let _ of f)if(!DF(_.charCodeAt(0),m))return!1;return!0}(l,gl.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let l=this.zoom,f=l-Math.floor(l),m=this.crossFadingFactor();return l>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:f+(1-f)*m}:{fromScale:.5,toScale:1,t:1-(1-m)*f}}}class Hm{constructor(l,f){this.property=l,this.value=f,this.expression=function(m,_){if(s_(m))return new qm(m,_);if(c_(m)){let S=_S(m,_);if(S.result==="error")throw new Error(S.value.map(I=>`${I.key}: ${I.message}`).join(", "));return S.value}{let S=m;return _.type==="color"&&typeof m=="string"?S=to.parse(m):_.type!=="padding"||typeof m!="number"&&!Array.isArray(m)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(m)&&(S=Ul.parse(m)):S=dl.parse(m),{kind:"constant",evaluate:()=>S}}}(f===void 0?l.specification.default:f,l.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(l,f,m){return this.property.possiblyEvaluate(this,l,f,m)}}class x_{constructor(l){this.property=l,this.value=new Hm(l,void 0)}transitioned(l,f){return new x4(this.property,this.value,f,X({},l.transition,this.transition),l.now)}untransitioned(){return new x4(this.property,this.value,null,{},0)}}class b_{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitionablePropertyValues)}getValue(l){return ue(this._values[l].value.value)}setValue(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new x_(this._values[l].property)),this._values[l].value=new Hm(this._values[l].property,f===null?void 0:ue(f))}getTransition(l){return ue(this._values[l].transition)}setTransition(l,f){Object.prototype.hasOwnProperty.call(this._values,l)||(this._values[l]=new x_(this._values[l].property)),this._values[l].transition=ue(f)||void 0}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m);let _=this.getTransition(f);_!==void 0&&(l[`${f}-transition`]=_)}return l}transitioned(l,f){let m=new Iy(this._properties);for(let _ of Object.keys(this._values))m._values[_]=this._values[_].transitioned(l,f._values[_]);return m}untransitioned(){let l=new Iy(this._properties);for(let f of Object.keys(this._values))l._values[f]=this._values[f].untransitioned();return l}}class x4{constructor(l,f,m,_,S){this.property=l,this.value=f,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,l.specification.transition&&(_.delay||_.duration)&&(this.prior=m)}possiblyEvaluate(l,f,m){let _=l.now||0,S=this.value.possiblyEvaluate(l,f,m),I=this.prior;if(I){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return I.possiblyEvaluate(l,f,m);{let C=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(I.possiblyEvaluate(l,f,m),S,function(N){if(N<=0)return 0;if(N>=1)return 1;let j=N*N,z=j*N;return 4*(N<.5?z:3*(N-j)+z-.75)}(C))}}return S}}class Iy{constructor(l){this._properties=l,this._values=Object.create(l.defaultTransitioningPropertyValues)}possiblyEvaluate(l,f,m){let _=new My(this._properties);for(let S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(l,f,m);return _}hasTransition(){for(let l of Object.keys(this._values))if(this._values[l].prior)return!0;return!1}}class Ty{constructor(l){this._properties=l,this._values=Object.create(l.defaultPropertyValues)}hasValue(l){return this._values[l].value!==void 0}getValue(l){return ue(this._values[l].value)}setValue(l,f){this._values[l]=new Hm(this._values[l].property,f===null?void 0:ue(f))}serialize(){let l={};for(let f of Object.keys(this._values)){let m=this.getValue(f);m!==void 0&&(l[f]=m)}return l}possiblyEvaluate(l,f,m){let _=new My(this._properties);for(let S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(l,f,m);return _}}class fc{constructor(l,f,m){this.property=l,this.value=f,this.parameters=m}isConstant(){return this.value.kind==="constant"}constantOr(l){return this.value.kind==="constant"?this.value.value:l}evaluate(l,f,m,_){return this.property.evaluate(this.value,this.parameters,l,f,m,_)}}class My{constructor(l){this._properties=l,this._values=Object.create(l.defaultPossiblyEvaluatedValues)}get(l){return this._values[l]}}class cr{constructor(l){this.specification=l}possiblyEvaluate(l,f){if(l.isDataDriven())throw new Error("Value should not be data driven");return l.expression.evaluate(f)}interpolate(l,f,m){let _=As[this.specification.type];return _?_(l,f,m):l}}class Ar{constructor(l,f){this.specification=l,this.overrides=f}possiblyEvaluate(l,f,m,_){return new fc(this,l.expression.kind==="constant"||l.expression.kind==="camera"?{kind:"constant",value:l.expression.evaluate(f,null,{},m,_)}:l.expression,f)}interpolate(l,f,m){if(l.value.kind!=="constant"||f.value.kind!=="constant")return l;if(l.value.value===void 0||f.value.value===void 0)return new fc(this,{kind:"constant",value:void 0},l.parameters);let _=As[this.specification.type];if(_){let S=_(l.value.value,f.value.value,m);return new fc(this,{kind:"constant",value:S},l.parameters)}return l}evaluate(l,f,m,_,S,I){return l.kind==="constant"?l.value:l.evaluate(f,m,_,S,I)}}class w_ extends Ar{possiblyEvaluate(l,f,m,_){if(l.value===void 0)return new fc(this,{kind:"constant",value:void 0},f);if(l.expression.kind==="constant"){let S=l.expression.evaluate(f,null,{},m,_),I=l.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,C=this._calculate(I,I,I,f);return new fc(this,{kind:"constant",value:C},f)}if(l.expression.kind==="camera"){let S=this._calculate(l.expression.evaluate({zoom:f.zoom-1}),l.expression.evaluate({zoom:f.zoom}),l.expression.evaluate({zoom:f.zoom+1}),f);return new fc(this,{kind:"constant",value:S},f)}return new fc(this,l.expression,f)}evaluate(l,f,m,_,S,I){if(l.kind==="source"){let C=l.evaluate(f,m,_,S,I);return this._calculate(C,C,C,f)}return l.kind==="composite"?this._calculate(l.evaluate({zoom:Math.floor(f.zoom)-1},m,_),l.evaluate({zoom:Math.floor(f.zoom)},m,_),l.evaluate({zoom:Math.floor(f.zoom)+1},m,_),f):l.value}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class E_{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){if(l.value!==void 0){if(l.expression.kind==="constant"){let S=l.expression.evaluate(f,null,{},m,_);return this._calculate(S,S,S,f)}return this._calculate(l.expression.evaluate(new Do(Math.floor(f.zoom-1),f)),l.expression.evaluate(new Do(Math.floor(f.zoom),f)),l.expression.evaluate(new Do(Math.floor(f.zoom+1),f)),f)}}_calculate(l,f,m,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:l,to:f}:{from:m,to:f}}interpolate(l){return l}}class zS{constructor(l){this.specification=l}possiblyEvaluate(l,f,m,_){return!!l.expression.evaluate(f,null,{},m,_)}interpolate(){return!1}}class E{constructor(l){this.properties=l,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let f in l){let m=l[f];m.specification.overridable&&this.overridableProperties.push(f);let _=this.defaultPropertyValues[f]=new Hm(m,void 0),S=this.defaultTransitionablePropertyValues[f]=new x_(m);this.defaultTransitioningPropertyValues[f]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[f]=_.possiblyEvaluate({})}}}or("DataDrivenProperty",Ar),or("DataConstantProperty",cr),or("CrossFadedDataDrivenProperty",w_),or("CrossFadedProperty",E_),or("ColorRampProperty",zS);let s="-transition";class d extends Nt{constructor(l,f){if(super(),this.id=l.id,this.type=l.type,this._featureFilter={filter:()=>!0,needGeometry:!1},l.type!=="custom"&&(this.metadata=l.metadata,this.minzoom=l.minzoom,this.maxzoom=l.maxzoom,l.type!=="background"&&(this.source=l.source,this.sourceLayer=l["source-layer"],this.filter=l.filter),f.layout&&(this._unevaluatedLayout=new Ty(f.layout)),f.paint)){this._transitionablePaint=new b_(f.paint);for(let m in l.paint)this.setPaintProperty(m,l.paint[m],{validate:!1});for(let m in l.layout)this.setLayoutProperty(m,l.layout[m],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new My(f.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(l){return l==="visibility"?this.visibility:this._unevaluatedLayout.getValue(l)}setLayoutProperty(l,f,m={}){f!=null&&this._validate(g4,`layers.${this.id}.layout.${l}`,l,f,m)||(l!=="visibility"?this._unevaluatedLayout.setValue(l,f):this.visibility=f)}getPaintProperty(l){return l.endsWith(s)?this._transitionablePaint.getTransition(l.slice(0,-11)):this._transitionablePaint.getValue(l)}setPaintProperty(l,f,m={}){if(f!=null&&this._validate(m4,`layers.${this.id}.paint.${l}`,l,f,m))return!1;if(l.endsWith(s))return this._transitionablePaint.setTransition(l.slice(0,-11),f||void 0),!1;{let _=this._transitionablePaint._values[l],S=_.property.specification["property-type"]==="cross-faded-data-driven",I=_.value.isDataDriven(),C=_.value;this._transitionablePaint.setValue(l,f),this._handleSpecialPaintPropertyUpdate(l);let N=this._transitionablePaint._values[l].value;return N.isDataDriven()||I||S||this._handleOverridablePaintPropertyUpdate(l,C,N)}}_handleSpecialPaintPropertyUpdate(l){}_handleOverridablePaintPropertyUpdate(l,f,m){return!1}isHidden(l){return!!(this.minzoom&&l<this.minzoom)||!!(this.maxzoom&&l>=this.maxzoom)||this.visibility==="none"}updateTransitions(l){this._transitioningPaint=this._transitionablePaint.transitioned(l,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(l,f){l.getCrossfadeParameters&&(this._crossfadeParameters=l.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(l,void 0,f)),this.paint=this._transitioningPaint.possiblyEvaluate(l,void 0,f)}serialize(){let l={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(l.layout=l.layout||{},l.layout.visibility=this.visibility),pe(l,(f,m)=>!(f===void 0||m==="layout"&&!Object.keys(f).length||m==="paint"&&!Object.keys(f).length))}_validate(l,f,m,_,S={}){return(!S||S.validate!==!1)&&OS(this,l.call(Qd,{key:f,layerType:this.type,objectKey:m,value:_,styleSpec:Ae,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let l in this.paint._values){let f=this.paint.get(l);if(f instanceof fc&&Lm(f.property.specification)&&(f.value.kind==="source"||f.value.kind==="composite")&&f.value.isStateDependent)return!0}return!1}}let v={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class y{constructor(l,f){this._structArray=l,this._pos1=f*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class w{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(l,f){return l._trim(),f&&(l.isTransferred=!0,f.push(l.arrayBuffer)),{length:l.length,arrayBuffer:l.arrayBuffer}}static deserialize(l){let f=Object.create(this.prototype);return f.arrayBuffer=l.arrayBuffer,f.length=l.length,f.capacity=l.arrayBuffer.byteLength/f.bytesPerElement,f._refreshViews(),f}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(l){this.reserve(l),this.length=l}reserve(l){if(l>this.capacity){this.capacity=Math.max(l,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let f=this.uint8;this._refreshViews(),f&&this.uint8.set(f)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function D(c,l=1){let f=0,m=0;return{members:c.map(_=>{let S=v[_.type].BYTES_PER_ELEMENT,I=f=O(f,Math.max(l,S)),C=_.components||1;return m=Math.max(m,S),f+=S*C,{name:_.name,type:_.type,components:C,offset:I}}),size:O(f,Math.max(m,l)),alignment:l}}function O(c,l){return Math.ceil(c/l)*l}class R extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.int16[_+0]=f,this.int16[_+1]=m,l}}R.prototype.bytesPerElement=4,or("StructArrayLayout2i4",R);class F extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.int16[S+0]=f,this.int16[S+1]=m,this.int16[S+2]=_,l}}F.prototype.bytesPerElement=6,or("StructArrayLayout3i6",F);class V extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let S=this.length;return this.resize(S+1),this.emplace(S,l,f,m,_)}emplace(l,f,m,_,S){let I=4*l;return this.int16[I+0]=f,this.int16[I+1]=m,this.int16[I+2]=_,this.int16[I+3]=S,l}}V.prototype.bytesPerElement=8,or("StructArrayLayout4i8",V);class G extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=6*l;return this.int16[N+0]=f,this.int16[N+1]=m,this.int16[N+2]=_,this.int16[N+3]=S,this.int16[N+4]=I,this.int16[N+5]=C,l}}G.prototype.bytesPerElement=12,or("StructArrayLayout2i4i12",G);class Q extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=4*l,j=8*l;return this.int16[N+0]=f,this.int16[N+1]=m,this.uint8[j+4]=_,this.uint8[j+5]=S,this.uint8[j+6]=I,this.uint8[j+7]=C,l}}Q.prototype.bytesPerElement=8,or("StructArrayLayout2i4ub8",Q);class ie extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.float32[_+0]=f,this.float32[_+1]=m,l}}ie.prototype.bytesPerElement=8,or("StructArrayLayout2f8",ie);class le extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z){let B=this.length;return this.resize(B+1),this.emplace(B,l,f,m,_,S,I,C,N,j,z)}emplace(l,f,m,_,S,I,C,N,j,z,B){let Y=10*l;return this.uint16[Y+0]=f,this.uint16[Y+1]=m,this.uint16[Y+2]=_,this.uint16[Y+3]=S,this.uint16[Y+4]=I,this.uint16[Y+5]=C,this.uint16[Y+6]=N,this.uint16[Y+7]=j,this.uint16[Y+8]=z,this.uint16[Y+9]=B,l}}le.prototype.bytesPerElement=20,or("StructArrayLayout10ui20",le);class me extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z,B,Y){let K=this.length;return this.resize(K+1),this.emplace(K,l,f,m,_,S,I,C,N,j,z,B,Y)}emplace(l,f,m,_,S,I,C,N,j,z,B,Y,K){let te=12*l;return this.int16[te+0]=f,this.int16[te+1]=m,this.int16[te+2]=_,this.int16[te+3]=S,this.uint16[te+4]=I,this.uint16[te+5]=C,this.uint16[te+6]=N,this.uint16[te+7]=j,this.int16[te+8]=z,this.int16[te+9]=B,this.int16[te+10]=Y,this.int16[te+11]=K,l}}me.prototype.bytesPerElement=24,or("StructArrayLayout4i4ui4i24",me);class ye extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.float32[S+0]=f,this.float32[S+1]=m,this.float32[S+2]=_,l}}ye.prototype.bytesPerElement=12,or("StructArrayLayout3f12",ye);class xe extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint32[1*l+0]=f,l}}xe.prototype.bytesPerElement=4,or("StructArrayLayout1ul4",xe);class Me extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j){let z=this.length;return this.resize(z+1),this.emplace(z,l,f,m,_,S,I,C,N,j)}emplace(l,f,m,_,S,I,C,N,j,z){let B=10*l,Y=5*l;return this.int16[B+0]=f,this.int16[B+1]=m,this.int16[B+2]=_,this.int16[B+3]=S,this.int16[B+4]=I,this.int16[B+5]=C,this.uint32[Y+3]=N,this.uint16[B+8]=j,this.uint16[B+9]=z,l}}Me.prototype.bytesPerElement=20,or("StructArrayLayout6i1ul2ui20",Me);class de extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=6*l;return this.int16[N+0]=f,this.int16[N+1]=m,this.int16[N+2]=_,this.int16[N+3]=S,this.int16[N+4]=I,this.int16[N+5]=C,l}}de.prototype.bytesPerElement=12,or("StructArrayLayout2i2i2i12",de);class ke extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S){let I=this.length;return this.resize(I+1),this.emplace(I,l,f,m,_,S)}emplace(l,f,m,_,S,I){let C=4*l,N=8*l;return this.float32[C+0]=f,this.float32[C+1]=m,this.float32[C+2]=_,this.int16[N+6]=S,this.int16[N+7]=I,l}}ke.prototype.bytesPerElement=16,or("StructArrayLayout2f1f2i16",ke);class Ve extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I){let C=this.length;return this.resize(C+1),this.emplace(C,l,f,m,_,S,I)}emplace(l,f,m,_,S,I,C){let N=16*l,j=4*l,z=8*l;return this.uint8[N+0]=f,this.uint8[N+1]=m,this.float32[j+1]=_,this.float32[j+2]=S,this.int16[z+6]=I,this.int16[z+7]=C,l}}Ve.prototype.bytesPerElement=16,or("StructArrayLayout2ub2f2i16",Ve);class Ke extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.uint16[S+0]=f,this.uint16[S+1]=m,this.uint16[S+2]=_,l}}Ke.prototype.bytesPerElement=6,or("StructArrayLayout3ui6",Ke);class dt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,he,ve){let $e=this.length;return this.resize($e+1),this.emplace($e,l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,he,ve)}emplace(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,he,ve,$e){let Ce=24*l,He=12*l,rt=48*l;return this.int16[Ce+0]=f,this.int16[Ce+1]=m,this.uint16[Ce+2]=_,this.uint16[Ce+3]=S,this.uint32[He+2]=I,this.uint32[He+3]=C,this.uint32[He+4]=N,this.uint16[Ce+10]=j,this.uint16[Ce+11]=z,this.uint16[Ce+12]=B,this.float32[He+7]=Y,this.float32[He+8]=K,this.uint8[rt+36]=te,this.uint8[rt+37]=oe,this.uint8[rt+38]=he,this.uint32[He+10]=ve,this.int16[Ce+22]=$e,l}}dt.prototype.bytesPerElement=48,or("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",dt);class It extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,he,ve,$e,Ce,He,rt,bt,Qt,Ir,Kt,Ut,dr,sr){let rr=this.length;return this.resize(rr+1),this.emplace(rr,l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,he,ve,$e,Ce,He,rt,bt,Qt,Ir,Kt,Ut,dr,sr)}emplace(l,f,m,_,S,I,C,N,j,z,B,Y,K,te,oe,he,ve,$e,Ce,He,rt,bt,Qt,Ir,Kt,Ut,dr,sr,rr){let ut=32*l,gr=16*l;return this.int16[ut+0]=f,this.int16[ut+1]=m,this.int16[ut+2]=_,this.int16[ut+3]=S,this.int16[ut+4]=I,this.int16[ut+5]=C,this.int16[ut+6]=N,this.int16[ut+7]=j,this.uint16[ut+8]=z,this.uint16[ut+9]=B,this.uint16[ut+10]=Y,this.uint16[ut+11]=K,this.uint16[ut+12]=te,this.uint16[ut+13]=oe,this.uint16[ut+14]=he,this.uint16[ut+15]=ve,this.uint16[ut+16]=$e,this.uint16[ut+17]=Ce,this.uint16[ut+18]=He,this.uint16[ut+19]=rt,this.uint16[ut+20]=bt,this.uint16[ut+21]=Qt,this.uint16[ut+22]=Ir,this.uint32[gr+12]=Kt,this.float32[gr+13]=Ut,this.float32[gr+14]=dr,this.uint16[ut+30]=sr,this.uint16[ut+31]=rr,l}}It.prototype.bytesPerElement=64,or("StructArrayLayout8i15ui1ul2f2ui64",It);class Vt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.float32[1*l+0]=f,l}}Vt.prototype.bytesPerElement=4,or("StructArrayLayout1f4",Vt);class tr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=3*l;return this.uint16[6*l+0]=f,this.float32[S+1]=m,this.float32[S+2]=_,l}}tr.prototype.bytesPerElement=12,or("StructArrayLayout1ui2f12",tr);class jt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f,m){let _=this.length;return this.resize(_+1),this.emplace(_,l,f,m)}emplace(l,f,m,_){let S=4*l;return this.uint32[2*l+0]=f,this.uint16[S+2]=m,this.uint16[S+3]=_,l}}jt.prototype.bytesPerElement=8,or("StructArrayLayout1ul2ui8",jt);class Rt extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l,f){let m=this.length;return this.resize(m+1),this.emplace(m,l,f)}emplace(l,f,m){let _=2*l;return this.uint16[_+0]=f,this.uint16[_+1]=m,l}}Rt.prototype.bytesPerElement=4,or("StructArrayLayout2ui4",Rt);class fr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(l){let f=this.length;return this.resize(f+1),this.emplace(f,l)}emplace(l,f){return this.uint16[1*l+0]=f,l}}fr.prototype.bytesPerElement=2,or("StructArrayLayout1ui2",fr);class kr extends w{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(l,f,m,_){let S=this.length;return this.resize(S+1),this.emplace(S,l,f,m,_)}emplace(l,f,m,_,S){let I=4*l;return this.float32[I+0]=f,this.float32[I+1]=m,this.float32[I+2]=_,this.float32[I+3]=S,l}}kr.prototype.bytesPerElement=16,or("StructArrayLayout4f16",kr);class Ft extends y{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new h(this.anchorPointX,this.anchorPointY)}}Ft.prototype.size=20;class Xt extends Me{get(l){return new Ft(this,l)}}or("CollisionBoxArray",Xt);class Lr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(l){this._structArray.uint8[this._pos1+37]=l}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(l){this._structArray.uint8[this._pos1+38]=l}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(l){this._structArray.uint32[this._pos4+10]=l}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Lr.prototype.size=48;class No extends dt{get(l){return new Lr(this,l)}}or("PlacedSymbolArray",No);class Yr extends y{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(l){this._structArray.uint32[this._pos4+12]=l}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Yr.prototype.size=64;class yn extends It{get(l){return new Yr(this,l)}}or("SymbolInstanceArray",yn);class Oo extends Vt{getoffsetX(l){return this.float32[1*l+0]}}or("GlyphOffsetArray",Oo);class Ca extends F{getx(l){return this.int16[3*l+0]}gety(l){return this.int16[3*l+1]}gettileUnitDistanceFromAnchor(l){return this.int16[3*l+2]}}or("SymbolLineVertexArray",Ca);class Ru extends y{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ru.prototype.size=12;class Lo extends tr{get(l){return new Ru(this,l)}}or("TextAnchorOffsetArray",Lo);class Ns extends y{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ns.prototype.size=8;class Qa extends jt{get(l){return new Ns(this,l)}}or("FeatureIndexArray",Qa);class Aa extends R{}class es extends R{}class pc extends R{}class Wm extends G{}class S_ extends Q{}class $m extends ie{}class Hl extends le{}class I_ extends me{}class FS extends ye{}class Wl extends xe{}class $l extends de{}class xp extends Ve{}class ju extends Ke{}class ma extends Rt{}let Da=D([{name:"a_pos",components:2,type:"Int16"}],4),{members:vl}=Da;class wn{constructor(l=[]){this.segments=l}prepareSegment(l,f,m,_){let S=this.segments[this.segments.length-1];return l>wn.MAX_VERTEX_ARRAY_LENGTH&&Re(`Max vertices per segment is ${wn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${l}`),(!S||S.vertexLength+l>wn.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_)&&(S={vertexOffset:f.length,primitiveOffset:m.length,vertexLength:0,primitiveLength:0},_!==void 0&&(S.sortKey=_),this.segments.push(S)),S}get(){return this.segments}destroy(){for(let l of this.segments)for(let f in l.vaos)l.vaos[f].destroy()}static simpleSegment(l,f,m,_){return new wn([{vertexOffset:l,primitiveOffset:f,vertexLength:m,primitiveLength:_,vaos:{},sortKey:0}])}}function eh(c,l){return 256*(c=U(Math.floor(c),0,255))+U(Math.floor(l),0,255)}wn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,or("SegmentVector",wn);let Ym=D([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Zm={exports:{}},b4={exports:{}};b4.exports=function(c,l){var f,m,_,S,I,C,N,j;for(m=c.length-(f=3&c.length),_=l,I=3432918353,C=461845907,j=0;j<m;)N=255&c.charCodeAt(j)|(255&c.charCodeAt(++j))<<8|(255&c.charCodeAt(++j))<<16|(255&c.charCodeAt(++j))<<24,++j,_=27492+(65535&(S=5*(65535&(_=(_^=N=(65535&(N=(N=(65535&N)*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*C+(((N>>>16)*C&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(S>>>16)&65535)<<16);switch(N=0,f){case 3:N^=(255&c.charCodeAt(j+2))<<16;case 2:N^=(255&c.charCodeAt(j+1))<<8;case 1:_^=N=(65535&(N=(N=(65535&(N^=255&c.charCodeAt(j)))*I+(((N>>>16)*I&65535)<<16)&4294967295)<<15|N>>>17))*C+(((N>>>16)*C&65535)<<16)&4294967295;}return _^=c.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0};var OF=b4.exports,w4={exports:{}};w4.exports=function(c,l){for(var f,m=c.length,_=l^m,S=0;m>=4;)f=1540483477*(65535&(f=255&c.charCodeAt(S)|(255&c.charCodeAt(++S))<<8|(255&c.charCodeAt(++S))<<16|(255&c.charCodeAt(++S))<<24))+((1540483477*(f>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),m-=4,++S;switch(m){case 3:_^=(255&c.charCodeAt(S+2))<<16;case 2:_^=(255&c.charCodeAt(S+1))<<8;case 1:_=1540483477*(65535&(_^=255&c.charCodeAt(S)))+((1540483477*(_>>>16)&65535)<<16);}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0};var bp=OF,E4=w4.exports;Zm.exports=bp,Zm.exports.murmur3=bp,Zm.exports.murmur2=E4;var T_=a(Zm.exports);class Cy{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(l,f,m,_){this.ids.push(M_(l)),this.positions.push(f,m,_)}getPositions(l){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let f=M_(l),m=0,_=this.ids.length-1;for(;m<_;){let I=m+_>>1;this.ids[I]>=f?_=I:m=I+1}let S=[];for(;this.ids[m]===f;)S.push({index:this.positions[3*m],start:this.positions[3*m+1],end:this.positions[3*m+2]}),m++;return S}static serialize(l,f){let m=new Float64Array(l.ids),_=new Uint32Array(l.positions);return C_(m,_,0,m.length-1),f&&f.push(m.buffer,_.buffer),{ids:m,positions:_}}static deserialize(l){let f=new Cy;return f.ids=l.ids,f.positions=l.positions,f.indexed=!0,f}}function M_(c){let l=+c;return!isNaN(l)&&l<=Number.MAX_SAFE_INTEGER?l:T_(String(c))}function C_(c,l,f,m){for(;f<m;){let _=c[f+m>>1],S=f-1,I=m+1;for(;;){do S++;while(c[S]<_);do I--;while(c[I]>_);if(S>=I)break;Km(c,S,I),Km(l,3*S,3*I),Km(l,3*S+1,3*I+1),Km(l,3*S+2,3*I+2)}I-f<m-I?(C_(c,l,f,I),f=I+1):(C_(c,l,I+1,m),m=I)}}function Km(c,l,f){let m=c[l];c[l]=c[f],c[f]=m}or("FeaturePositionMap",Cy);class Ay{constructor(l,f){this.gl=l.gl,this.location=f}}class S4 extends Ay{constructor(l,f){super(l,f),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1f(this.location,l))}}class rse extends Ay{constructor(l,f){super(l,f),this.current=[0,0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]&&l[3]===this.current[3]||(this.current=l,this.gl.uniform4f(this.location,l[0],l[1],l[2],l[3]))}}class nse extends Ay{constructor(l,f){super(l,f),this.current=to.transparent}set(l){l.r===this.current.r&&l.g===this.current.g&&l.b===this.current.b&&l.a===this.current.a||(this.current=l,this.gl.uniform4f(this.location,l.r,l.g,l.b,l.a))}}let Vat=new Float32Array(16);function LF(c){return[eh(255*c.r,255*c.g),eh(255*c.b,255*c.a)]}class US{constructor(l,f,m){this.value=l,this.uniformNames=f.map(_=>`u_${_}`),this.type=m}setUniform(l,f,m){l.set(m.constantOr(this.value))}getBinding(l,f,m){return this.type==="color"?new nse(l,f):new S4(l,f)}}class A_{constructor(l,f){this.uniformNames=f.map(m=>`u_${m}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(l,f){this.pixelRatioFrom=f.pixelRatio,this.pixelRatioTo=l.pixelRatio,this.patternFrom=f.tlbr,this.patternTo=l.tlbr}setUniform(l,f,m,_){let S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&l.set(S)}getBinding(l,f,m){return m.substr(0,9)==="u_pattern"?new rse(l,f):new S4(l,f)}}class th{constructor(l,f,m,_){this.expression=l,this.type=m,this.maxValue=0,this.paintVertexAttributes=f.map(S=>({name:`a_${S}`,type:"Float32",components:m==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(l,f,m,_,S){let I=this.paintVertexArray.length,C=this.expression.evaluate(new Do(0),f,{},_,[],S);this.paintVertexArray.resize(l),this._setPaintValue(I,l,C)}updatePaintArray(l,f,m,_){let S=this.expression.evaluate({zoom:0},m,_);this._setPaintValue(l,f,S)}_setPaintValue(l,f,m){if(this.type==="color"){let _=LF(m);for(let S=l;S<f;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=l;_<f;_++)this.paintVertexArray.emplace(_,m);this.maxValue=Math.max(this.maxValue,Math.abs(m))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ef{constructor(l,f,m,_,S,I){this.expression=l,this.uniformNames=f.map(C=>`u_${C}_t`),this.type=m,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=f.map(C=>({name:`a_${C}`,type:"Float32",components:m==="color"?4:2,offset:0})),this.paintVertexArray=new I}populatePaintArray(l,f,m,_,S){let I=this.expression.evaluate(new Do(this.zoom),f,{},_,[],S),C=this.expression.evaluate(new Do(this.zoom+1),f,{},_,[],S),N=this.paintVertexArray.length;this.paintVertexArray.resize(l),this._setPaintValue(N,l,I,C)}updatePaintArray(l,f,m,_){let S=this.expression.evaluate({zoom:this.zoom},m,_),I=this.expression.evaluate({zoom:this.zoom+1},m,_);this._setPaintValue(l,f,S,I)}_setPaintValue(l,f,m,_){if(this.type==="color"){let S=LF(m),I=LF(_);for(let C=l;C<f;C++)this.paintVertexArray.emplace(C,S[0],S[1],I[0],I[1])}else{for(let S=l;S<f;S++)this.paintVertexArray.emplace(S,m,_);this.maxValue=Math.max(this.maxValue,Math.abs(m),Math.abs(_))}}upload(l){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=l.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(l,f){let m=this.useIntegerZoom?Math.floor(f.zoom):f.zoom,_=U(this.expression.interpolationFactor(m,this.zoom,this.zoom+1),0,1);l.set(_)}getBinding(l,f,m){return new S4(l,f)}}class Xm{constructor(l,f,m,_,S,I){this.expression=l,this.type=f,this.useIntegerZoom=m,this.zoom=_,this.layerId=I,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(l,f,m){let _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(l),this.zoomOutPaintVertexArray.resize(l),this._setPaintValues(_,l,f.patterns&&f.patterns[this.layerId],m)}updatePaintArray(l,f,m,_,S){this._setPaintValues(l,f,m.patterns&&m.patterns[this.layerId],S)}_setPaintValues(l,f,m,_){if(!_||!m)return;let{min:S,mid:I,max:C}=m,N=_[S],j=_[I],z=_[C];if(N&&j&&z)for(let B=l;B<f;B++)this.zoomInPaintVertexArray.emplace(B,j.tl[0],j.tl[1],j.br[0],j.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],j.pixelRatio,N.pixelRatio),this.zoomOutPaintVertexArray.emplace(B,j.tl[0],j.tl[1],j.br[0],j.br[1],z.tl[0],z.tl[1],z.br[0],z.br[1],j.pixelRatio,z.pixelRatio)}upload(l){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=l.createVertexBuffer(this.zoomInPaintVertexArray,Ym.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=l.createVertexBuffer(this.zoomOutPaintVertexArray,Ym.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ose{constructor(l,f,m){this.binders={},this._buffers=[];let _=[];for(let S in l.paint._values){if(!m(S))continue;let I=l.paint.get(S);if(!(I instanceof fc&&Lm(I.property.specification)))continue;let C=Gat(S,l.type),N=I.value,j=I.property.specification.type,z=I.property.useIntegerZoom,B=I.property.specification["property-type"],Y=B==="cross-faded"||B==="cross-faded-data-driven";if(N.kind==="constant")this.binders[S]=Y?new A_(N.value,C):new US(N.value,C,j),_.push(`/u_${S}`);else if(N.kind==="source"||Y){let K=ise(S,j,"source");this.binders[S]=Y?new Xm(N,j,z,f,K,l.id):new th(N,C,j,K),_.push(`/a_${S}`)}else{let K=ise(S,j,"composite");this.binders[S]=new Ef(N,C,j,z,f,K),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(l){let f=this.binders[l];return f instanceof th||f instanceof Ef?f.maxValue:0}populatePaintArrays(l,f,m,_,S){for(let I in this.binders){let C=this.binders[I];(C instanceof th||C instanceof Ef||C instanceof Xm)&&C.populatePaintArray(l,f,m,_,S)}}setConstantPatternPositions(l,f){for(let m in this.binders){let _=this.binders[m];_ instanceof A_&&_.setConstantPatternPositions(l,f)}}updatePaintArrays(l,f,m,_,S){let I=!1;for(let C in l){let N=f.getPositions(C);for(let j of N){let z=m.feature(j.index);for(let B in this.binders){let Y=this.binders[B];if((Y instanceof th||Y instanceof Ef||Y instanceof Xm)&&Y.expression.isStateDependent===!0){let K=_.paint.get(B);Y.expression=K.value,Y.updatePaintArray(j.start,j.end,z,l[C],S),I=!0}}}}return I}defines(){let l=[];for(let f in this.binders){let m=this.binders[f];(m instanceof US||m instanceof A_)&&l.push(...m.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return l}getBinderAttributes(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof th||m instanceof Ef)for(let _=0;_<m.paintVertexAttributes.length;_++)l.push(m.paintVertexAttributes[_].name);else if(m instanceof Xm)for(let _=0;_<Ym.members.length;_++)l.push(Ym.members[_].name)}return l}getBinderUniforms(){let l=[];for(let f in this.binders){let m=this.binders[f];if(m instanceof US||m instanceof A_||m instanceof Ef)for(let _ of m.uniformNames)l.push(_)}return l}getPaintVertexBuffers(){return this._buffers}getUniforms(l,f){let m=[];for(let _ in this.binders){let S=this.binders[_];if(S instanceof US||S instanceof A_||S instanceof Ef){for(let I of S.uniformNames)if(f[I]){let C=S.getBinding(l,f[I],I);m.push({name:I,property:_,binding:C})}}}return m}setUniforms(l,f,m,_){for(let{name:S,property:I,binding:C}of f)this.binders[I].setUniform(C,_,m.get(I),S)}updatePaintBuffers(l){this._buffers=[];for(let f in this.binders){let m=this.binders[f];if(l&&m instanceof Xm){let _=l.fromScale===2?m.zoomInPaintVertexBuffer:m.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(m instanceof th||m instanceof Ef)&&m.paintVertexBuffer&&this._buffers.push(m.paintVertexBuffer)}}upload(l){for(let f in this.binders){let m=this.binders[f];(m instanceof th||m instanceof Ef||m instanceof Xm)&&m.upload(l)}this.updatePaintBuffers()}destroy(){for(let l in this.binders){let f=this.binders[l];(f instanceof th||f instanceof Ef||f instanceof Xm)&&f.destroy()}}}class Dy{constructor(l,f,m=()=>!0){this.programConfigurations={};for(let _ of l)this.programConfigurations[_.id]=new ose(_,f,m);this.needsUpload=!1,this._featureMap=new Cy,this._bufferOffset=0}populatePaintArrays(l,f,m,_,S,I){for(let C in this.programConfigurations)this.programConfigurations[C].populatePaintArrays(l,f,_,S,I);f.id!==void 0&&this._featureMap.add(f.id,m,this._bufferOffset,l),this._bufferOffset=l,this.needsUpload=!0}updatePaintArrays(l,f,m,_){for(let S of m)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(l,this._featureMap,f,S,_)||this.needsUpload}get(l){return this.programConfigurations[l]}upload(l){if(this.needsUpload){for(let f in this.programConfigurations)this.programConfigurations[f].upload(l);this.needsUpload=!1}}destroy(){for(let l in this.programConfigurations)this.programConfigurations[l].destroy()}}function Gat(c,l){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${l}-`,"").replace(/-/g,"_")]}function ise(c,l,f){let m={color:{source:ie,composite:kr},number:{source:Vt,composite:ie}},_=function(S){return{"line-pattern":{source:Hl,composite:Hl},"fill-pattern":{source:Hl,composite:Hl},"fill-extrusion-pattern":{source:Hl,composite:Hl}}[S]}(c);return _&&_[f]||m[l][f]}or("ConstantBinder",US),or("CrossFadedConstantBinder",A_),or("SourceExpressionBinder",th),or("CrossFadedCompositeBinder",Xm),or("CompositeExpressionBinder",Ef),or("ProgramConfiguration",ose,{omit:["_buffers"]}),or("ProgramConfigurationSet",Dy);let Ni=8192,PF=Math.pow(2,14)-1,ase=-PF-1;function Ny(c){let l=Ni/c.extent,f=c.loadGeometry();for(let m=0;m<f.length;m++){let _=f[m];for(let S=0;S<_.length;S++){let I=_[S],C=Math.round(I.x*l),N=Math.round(I.y*l);I.x=U(C,ase,PF),I.y=U(N,ase,PF),(C<I.x||C>I.x+1||N<I.y||N>I.y+1)&&Re("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return f}function Oy(c,l){return{type:c.type,id:c.id,properties:c.properties,geometry:l?Ny(c):[]}}function I4(c,l,f,m,_){c.emplaceBack(2*l+(m+1)/2,2*f+(_+1)/2)}class kF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new es,this.indexArray=new ju,this.segments=new wn,this.programConfigurations=new Dy(l.layers,l.zoom),this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){let _=this.layers[0],S=[],I=null,C=!1;_.type==="circle"&&(I=_.layout.get("circle-sort-key"),C=!I.isConstant());for(let{feature:N,id:j,index:z,sourceLayerIndex:B}of l){let Y=this.layers[0]._featureFilter.needGeometry,K=Oy(N,Y);if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),K,m))continue;let te=C?I.evaluate(K,{},m):void 0,oe={id:j,properties:N.properties,type:N.type,sourceLayerIndex:B,index:z,geometry:Y?K.geometry:Ny(N),patterns:{},sortKey:te};S.push(oe)}C&&S.sort((N,j)=>N.sortKey-j.sortKey);for(let N of S){let{geometry:j,index:z,sourceLayerIndex:B}=N,Y=l[z].feature;this.addFeature(N,j,z,m),f.featureIndex.insert(Y,j,z,B,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,vl),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(l,f,m,_){for(let S of f)for(let I of S){let C=I.x,N=I.y;if(C<0||C>=Ni||N<0||N>=Ni)continue;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,l.sortKey),z=j.vertexLength;I4(this.layoutVertexArray,C,N,-1,-1),I4(this.layoutVertexArray,C,N,1,-1),I4(this.layoutVertexArray,C,N,1,1),I4(this.layoutVertexArray,C,N,-1,1),this.indexArray.emplaceBack(z,z+1,z+2),this.indexArray.emplaceBack(z,z+3,z+2),j.vertexLength+=4,j.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,{},_)}}function sse(c,l){for(let f=0;f<c.length;f++)if(D_(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(D_(c,l[f]))return!0;return!!RF(c,l)}function Hat(c,l,f){return!!D_(c,l)||!!jF(l,c,f)}function lse(c,l){if(c.length===1)return cse(l,c[0]);for(let f=0;f<l.length;f++){let m=l[f];for(let _=0;_<m.length;_++)if(D_(c,m[_]))return!0}for(let f=0;f<c.length;f++)if(cse(l,c[f]))return!0;for(let f=0;f<l.length;f++)if(RF(c,l[f]))return!0;return!1}function Wat(c,l,f){if(c.length>1){if(RF(c,l))return!0;for(let m=0;m<l.length;m++)if(jF(l[m],c,f))return!0}for(let m=0;m<c.length;m++)if(jF(c[m],l,f))return!0;return!1}function RF(c,l){if(c.length===0||l.length===0)return!1;for(let f=0;f<c.length-1;f++){let m=c[f],_=c[f+1];for(let S=0;S<l.length-1;S++)if($at(m,_,l[S],l[S+1]))return!0}return!1}function $at(c,l,f,m){return Te(c,f,m)!==Te(l,f,m)&&Te(c,l,f)!==Te(c,l,m)}function jF(c,l,f){let m=f*f;if(l.length===1)return c.distSqr(l[0])<m;for(let _=1;_<l.length;_++)if(use(c,l[_-1],l[_])<m)return!0;return!1}function use(c,l,f){let m=l.distSqr(f);if(m===0)return c.distSqr(l);let _=((c.x-l.x)*(f.x-l.x)+(c.y-l.y)*(f.y-l.y))/m;return c.distSqr(_<0?l:_>1?f:f.sub(l)._mult(_)._add(l))}function cse(c,l){let f,m,_,S=!1;for(let I=0;I<c.length;I++){f=c[I];for(let C=0,N=f.length-1;C<f.length;N=C++)m=f[C],_=f[N],m.y>l.y!=_.y>l.y&&l.x<(_.x-m.x)*(l.y-m.y)/(_.y-m.y)+m.x&&(S=!S)}return S}function D_(c,l){let f=!1;for(let m=0,_=c.length-1;m<c.length;_=m++){let S=c[m],I=c[_];S.y>l.y!=I.y>l.y&&l.x<(I.x-S.x)*(l.y-S.y)/(I.y-S.y)+S.x&&(f=!f)}return f}function Yat(c,l,f){let m=f[0],_=f[2];if(c.x<m.x&&l.x<m.x||c.x>_.x&&l.x>_.x||c.y<m.y&&l.y<m.y||c.y>_.y&&l.y>_.y)return!1;let S=Te(c,l,f[0]);return S!==Te(c,l,f[1])||S!==Te(c,l,f[2])||S!==Te(c,l,f[3])}function BS(c,l,f){let m=l.paint.get(c).value;return m.kind==="constant"?m.value:f.programConfigurations.get(l.id).getMaxValue(c)}function T4(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function M4(c,l,f,m,_){if(!l[0]&&!l[1])return c;let S=h.convert(l)._mult(_);f==="viewport"&&S._rotate(-m);let I=[];for(let C=0;C<c.length;C++)I.push(c[C].sub(S));return I}let fse,pse;or("CircleBucket",kF,{omit:["layers"]});var Zat={get paint(){return pse=pse||new E({"circle-radius":new Ar(Ae.paint_circle["circle-radius"]),"circle-color":new Ar(Ae.paint_circle["circle-color"]),"circle-blur":new Ar(Ae.paint_circle["circle-blur"]),"circle-opacity":new Ar(Ae.paint_circle["circle-opacity"]),"circle-translate":new cr(Ae.paint_circle["circle-translate"]),"circle-translate-anchor":new cr(Ae.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new cr(Ae.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new cr(Ae.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ar(Ae.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ar(Ae.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ar(Ae.paint_circle["circle-stroke-opacity"])})},get layout(){return fse=fse||new E({"circle-sort-key":new Ar(Ae.layout_circle["circle-sort-key"])})}},Os=1e-6,N_=typeof Float32Array!="undefined"?Float32Array:Array;function qF(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function dse(c,l,f){var m=l[0],_=l[1],S=l[2],I=l[3],C=l[4],N=l[5],j=l[6],z=l[7],B=l[8],Y=l[9],K=l[10],te=l[11],oe=l[12],he=l[13],ve=l[14],$e=l[15],Ce=f[0],He=f[1],rt=f[2],bt=f[3];return c[0]=Ce*m+He*C+rt*B+bt*oe,c[1]=Ce*_+He*N+rt*Y+bt*he,c[2]=Ce*S+He*j+rt*K+bt*ve,c[3]=Ce*I+He*z+rt*te+bt*$e,c[4]=(Ce=f[4])*m+(He=f[5])*C+(rt=f[6])*B+(bt=f[7])*oe,c[5]=Ce*_+He*N+rt*Y+bt*he,c[6]=Ce*S+He*j+rt*K+bt*ve,c[7]=Ce*I+He*z+rt*te+bt*$e,c[8]=(Ce=f[8])*m+(He=f[9])*C+(rt=f[10])*B+(bt=f[11])*oe,c[9]=Ce*_+He*N+rt*Y+bt*he,c[10]=Ce*S+He*j+rt*K+bt*ve,c[11]=Ce*I+He*z+rt*te+bt*$e,c[12]=(Ce=f[12])*m+(He=f[13])*C+(rt=f[14])*B+(bt=f[15])*oe,c[13]=Ce*_+He*N+rt*Y+bt*he,c[14]=Ce*S+He*j+rt*K+bt*ve,c[15]=Ce*I+He*z+rt*te+bt*$e,c}Math.hypot||(Math.hypot=function(){for(var c=0,l=arguments.length;l--;)c+=arguments[l]*arguments[l];return Math.sqrt(c)});var VS,Kat=dse;function C4(c,l,f){var m=l[0],_=l[1],S=l[2],I=l[3];return c[0]=f[0]*m+f[4]*_+f[8]*S+f[12]*I,c[1]=f[1]*m+f[5]*_+f[9]*S+f[13]*I,c[2]=f[2]*m+f[6]*_+f[10]*S+f[14]*I,c[3]=f[3]*m+f[7]*_+f[11]*S+f[15]*I,c}VS=new N_(4),N_!=Float32Array&&(VS[0]=0,VS[1]=0,VS[2]=0,VS[3]=0);class Xat extends d{constructor(l){super(l,Zat)}createBucket(l){return new kF(l)}queryRadius(l){let f=l;return BS("circle-radius",this,f)+BS("circle-stroke-width",this,f)+T4(this.paint.get("circle-translate"))}queryIntersectsFeature(l,f,m,_,S,I,C,N){let j=M4(l,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),I.angle,C),z=this.paint.get("circle-radius").evaluate(f,m)+this.paint.get("circle-stroke-width").evaluate(f,m),B=this.paint.get("circle-pitch-alignment")==="map",Y=B?j:function(te,oe){return te.map(he=>hse(he,oe))}(j,N),K=B?z*C:z;for(let te of _)for(let oe of te){let he=B?oe:hse(oe,N),ve=K,$e=C4([],[oe.x,oe.y,0,1],N);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ve*=$e[3]/I.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ve*=I.cameraToCenterDistance/$e[3]),Hat(Y,he,ve))return!0}return!1}}function hse(c,l){let f=C4([],[c.x,c.y,0,1],l);return new h(f[0]/f[3],f[1]/f[3])}class mse extends kF{}let gse;or("HeatmapBucket",mse,{omit:["layers"]});var Jat={get paint(){return gse=gse||new E({"heatmap-radius":new Ar(Ae.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ar(Ae.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new cr(Ae.paint_heatmap["heatmap-intensity"]),"heatmap-color":new zS(Ae.paint_heatmap["heatmap-color"]),"heatmap-opacity":new cr(Ae.paint_heatmap["heatmap-opacity"])})}};function zF(c,{width:l,height:f},m,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==l*f*m)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${l*f*m}`)}else _=new Uint8Array(l*f*m);return c.width=l,c.height=f,c.data=_,c}function vse(c,{width:l,height:f},m){if(l===c.width&&f===c.height)return;let _=zF({},{width:l,height:f},m);FF(c,_,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,l),height:Math.min(c.height,f)},m),c.width=l,c.height=f,c.data=_.data}function FF(c,l,f,m,_,S){if(_.width===0||_.height===0)return l;if(_.width>c.width||_.height>c.height||f.x>c.width-_.width||f.y>c.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>l.width||_.height>l.height||m.x>l.width-_.width||m.y>l.height-_.height)throw new RangeError("out of range destination coordinates for image copy");let I=c.data,C=l.data;if(I===C)throw new Error("srcData equals dstData, so image is already copied");for(let N=0;N<_.height;N++){let j=((f.y+N)*c.width+f.x)*S,z=((m.y+N)*l.width+m.x)*S;for(let B=0;B<_.width*S;B++)C[z+B]=I[j+B]}return l}class GS{constructor(l,f){zF(this,l,1,f)}resize(l){vse(this,l,1)}clone(){return new GS({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,S){FF(l,f,m,_,S,1)}}class qu{constructor(l,f){zF(this,l,4,f)}resize(l){vse(this,l,4)}replace(l,f){f?this.data.set(l):this.data=l instanceof Uint8ClampedArray?new Uint8Array(l.buffer):l}clone(){return new qu({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(l,f,m,_,S){FF(l,f,m,_,S,4)}}function yse(c){let l={},f=c.resolution||256,m=c.clips?c.clips.length:1,_=c.image||new qu({width:f,height:m});if(Math.log(f)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${f}`);let S=(I,C,N)=>{l[c.evaluationKey]=N;let j=c.expression.evaluate(l);_.data[I+C+0]=Math.floor(255*j.r/j.a),_.data[I+C+1]=Math.floor(255*j.g/j.a),_.data[I+C+2]=Math.floor(255*j.b/j.a),_.data[I+C+3]=Math.floor(255*j.a)};if(c.clips)for(let I=0,C=0;I<m;++I,C+=4*f)for(let N=0,j=0;N<f;N++,j+=4){let z=N/(f-1),{start:B,end:Y}=c.clips[I];S(C,j,B*(1-z)+Y*z)}else for(let I=0,C=0;I<f;I++,C+=4)S(0,C,I/(f-1));return _}or("AlphaImage",GS),or("RGBAImage",qu);let UF="big-fb";class Qat extends d{createBucket(l){return new mse(l)}constructor(l){super(l,Jat),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(l){l==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yse({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(UF)&&this.heatmapFbos.delete(UF)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let _se;var est={get paint(){return _se=_se||new E({"hillshade-illumination-direction":new cr(Ae.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new cr(Ae.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new cr(Ae.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new cr(Ae.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new cr(Ae.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new cr(Ae.paint_hillshade["hillshade-accent-color"])})}};class tst extends d{constructor(l){super(l,est)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let rst=D([{name:"a_pos",components:2,type:"Int16"}],4),{members:nst}=rst;function xse(c,l,f=2){let m=l&&l.length,_=m?l[0]*f:c.length,S=bse(c,0,_,f,!0),I=[];if(!S||S.next===S.prev)return I;let C,N,j;if(m&&(S=function(z,B,Y,K){let te=[];for(let oe=0,he=B.length;oe<he;oe++){let ve=bse(z,B[oe]*K,oe<he-1?B[oe+1]*K:z.length,K,!1);ve===ve.next&&(ve.steiner=!0),te.push(fst(ve))}te.sort(lst);for(let oe=0;oe<te.length;oe++)Y=ust(te[oe],Y);return Y}(c,l,S,f)),c.length>80*f){C=1/0,N=1/0;let z=-1/0,B=-1/0;for(let Y=f;Y<_;Y+=f){let K=c[Y],te=c[Y+1];K<C&&(C=K),te<N&&(N=te),K>z&&(z=K),te>B&&(B=te)}j=Math.max(z-C,B-N),j=j!==0?32767/j:0}return HS(S,I,f,C,N,j,0),I}function bse(c,l,f,m,_){let S;if(_===function(I,C,N,j){let z=0;for(let B=C,Y=N-j;B<N;B+=j)z+=(I[Y]-I[B])*(I[B+1]+I[Y+1]),Y=B;return z}(c,l,f,m)>0)for(let I=l;I<f;I+=m)S=Sse(I/m|0,c[I],c[I+1],S);else for(let I=f-m;I>=l;I-=m)S=Sse(I/m|0,c[I],c[I+1],S);return S&&A4(S,S.next)&&($S(S),S=S.next),S}function Ly(c,l){if(!c)return c;l||(l=c);let f,m=c;do if(f=!1,m.steiner||!A4(m,m.next)&&Ei(m.prev,m,m.next)!==0)m=m.next;else{if($S(m),m=l=m.prev,m===m.next)break;f=!0}while(f||m!==l);return l}function HS(c,l,f,m,_,S,I){if(!c)return;!I&&S&&function(N,j,z,B){let Y=N;do Y.z===0&&(Y.z=BF(Y.x,Y.y,j,z,B)),Y.prevZ=Y.prev,Y.nextZ=Y.next,Y=Y.next;while(Y!==N);Y.prevZ.nextZ=null,Y.prevZ=null,function(K){let te,oe=1;do{let he,ve=K;K=null;let $e=null;for(te=0;ve;){te++;let Ce=ve,He=0;for(let bt=0;bt<oe&&(He++,Ce=Ce.nextZ,Ce);bt++);let rt=oe;for(;He>0||rt>0&&Ce;)He!==0&&(rt===0||!Ce||ve.z<=Ce.z)?(he=ve,ve=ve.nextZ,He--):(he=Ce,Ce=Ce.nextZ,rt--),$e?$e.nextZ=he:K=he,he.prevZ=$e,$e=he;ve=Ce}$e.nextZ=null,oe*=2}while(te>1)}(Y)}(c,m,_,S);let C=c;for(;c.prev!==c.next;){let N=c.prev,j=c.next;if(S?ist(c,m,_,S):ost(c))l.push(N.i,c.i,j.i),$S(c),c=j.next,C=j.next;else if((c=j)===C){I?I===1?HS(c=ast(Ly(c),l),l,f,m,_,S,2):I===2&&sst(c,l,f,m,_,S):HS(Ly(c),l,f,m,_,S,1);break}}}function ost(c){let l=c.prev,f=c,m=c.next;if(Ei(l,f,m)>=0)return!1;let _=l.x,S=f.x,I=m.x,C=l.y,N=f.y,j=m.y,z=_<S?_<I?_:I:S<I?S:I,B=C<N?C<j?C:j:N<j?N:j,Y=_>S?_>I?_:I:S>I?S:I,K=C>N?C>j?C:j:N>j?N:j,te=m.next;for(;te!==l;){if(te.x>=z&&te.x<=Y&&te.y>=B&&te.y<=K&&O_(_,C,S,N,I,j,te.x,te.y)&&Ei(te.prev,te,te.next)>=0)return!1;te=te.next}return!0}function ist(c,l,f,m){let _=c.prev,S=c,I=c.next;if(Ei(_,S,I)>=0)return!1;let C=_.x,N=S.x,j=I.x,z=_.y,B=S.y,Y=I.y,K=C<N?C<j?C:j:N<j?N:j,te=z<B?z<Y?z:Y:B<Y?B:Y,oe=C>N?C>j?C:j:N>j?N:j,he=z>B?z>Y?z:Y:B>Y?B:Y,ve=BF(K,te,l,f,m),$e=BF(oe,he,l,f,m),Ce=c.prevZ,He=c.nextZ;for(;Ce&&Ce.z>=ve&&He&&He.z<=$e;){if(Ce.x>=K&&Ce.x<=oe&&Ce.y>=te&&Ce.y<=he&&Ce!==_&&Ce!==I&&O_(C,z,N,B,j,Y,Ce.x,Ce.y)&&Ei(Ce.prev,Ce,Ce.next)>=0||(Ce=Ce.prevZ,He.x>=K&&He.x<=oe&&He.y>=te&&He.y<=he&&He!==_&&He!==I&&O_(C,z,N,B,j,Y,He.x,He.y)&&Ei(He.prev,He,He.next)>=0))return!1;He=He.nextZ}for(;Ce&&Ce.z>=ve;){if(Ce.x>=K&&Ce.x<=oe&&Ce.y>=te&&Ce.y<=he&&Ce!==_&&Ce!==I&&O_(C,z,N,B,j,Y,Ce.x,Ce.y)&&Ei(Ce.prev,Ce,Ce.next)>=0)return!1;Ce=Ce.prevZ}for(;He&&He.z<=$e;){if(He.x>=K&&He.x<=oe&&He.y>=te&&He.y<=he&&He!==_&&He!==I&&O_(C,z,N,B,j,Y,He.x,He.y)&&Ei(He.prev,He,He.next)>=0)return!1;He=He.nextZ}return!0}function ast(c,l){let f=c;do{let m=f.prev,_=f.next.next;!A4(m,_)&&wse(m,f,f.next,_)&&WS(m,_)&&WS(_,m)&&(l.push(m.i,f.i,_.i),$S(f),$S(f.next),f=c=_),f=f.next}while(f!==c);return Ly(f)}function sst(c,l,f,m,_,S){let I=c;do{let C=I.next.next;for(;C!==I.prev;){if(I.i!==C.i&&pst(I,C)){let N=Ese(I,C);return I=Ly(I,I.next),N=Ly(N,N.next),HS(I,l,f,m,_,S,0),void HS(N,l,f,m,_,S,0)}C=C.next}I=I.next}while(I!==c)}function lst(c,l){return c.x-l.x}function ust(c,l){let f=function(_,S){let I=S,C=_.x,N=_.y,j,z=-1/0;do{if(N<=I.y&&N>=I.next.y&&I.next.y!==I.y){let oe=I.x+(N-I.y)*(I.next.x-I.x)/(I.next.y-I.y);if(oe<=C&&oe>z&&(z=oe,j=I.x<I.next.x?I:I.next,oe===C))return j}I=I.next}while(I!==S);if(!j)return null;let B=j,Y=j.x,K=j.y,te=1/0;I=j;do{if(C>=I.x&&I.x>=Y&&C!==I.x&&O_(N<K?C:z,N,Y,K,N<K?z:C,N,I.x,I.y)){let oe=Math.abs(N-I.y)/(C-I.x);WS(I,_)&&(oe<te||oe===te&&(I.x>j.x||I.x===j.x&&cst(j,I)))&&(j=I,te=oe)}I=I.next}while(I!==B);return j}(c,l);if(!f)return l;let m=Ese(f,c);return Ly(m,m.next),Ly(f,f.next)}function cst(c,l){return Ei(c.prev,c,l.prev)<0&&Ei(l.next,c,c.next)<0}function BF(c,l,f,m,_){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-f)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-m)*_|0)|l<<8))|l<<4))|l<<2))|l<<1))<<1}function fst(c){let l=c,f=c;do(l.x<f.x||l.x===f.x&&l.y<f.y)&&(f=l),l=l.next;while(l!==c);return f}function O_(c,l,f,m,_,S,I,C){return(_-I)*(l-C)>=(c-I)*(S-C)&&(c-I)*(m-C)>=(f-I)*(l-C)&&(f-I)*(S-C)>=(_-I)*(m-C)}function pst(c,l){return c.next.i!==l.i&&c.prev.i!==l.i&&!function(f,m){let _=f;do{if(_.i!==f.i&&_.next.i!==f.i&&_.i!==m.i&&_.next.i!==m.i&&wse(_,_.next,f,m))return!0;_=_.next}while(_!==f);return!1}(c,l)&&(WS(c,l)&&WS(l,c)&&function(f,m){let _=f,S=!1,I=(f.x+m.x)/2,C=(f.y+m.y)/2;do _.y>C!=_.next.y>C&&_.next.y!==_.y&&I<(_.next.x-_.x)*(C-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==f);return S}(c,l)&&(Ei(c.prev,c,l.prev)||Ei(c,l.prev,l))||A4(c,l)&&Ei(c.prev,c,c.next)>0&&Ei(l.prev,l,l.next)>0)}function Ei(c,l,f){return(l.y-c.y)*(f.x-l.x)-(l.x-c.x)*(f.y-l.y)}function A4(c,l){return c.x===l.x&&c.y===l.y}function wse(c,l,f,m){let _=N4(Ei(c,l,f)),S=N4(Ei(c,l,m)),I=N4(Ei(f,m,c)),C=N4(Ei(f,m,l));return _!==S&&I!==C||!(_!==0||!D4(c,f,l))||!(S!==0||!D4(c,m,l))||!(I!==0||!D4(f,c,m))||!(C!==0||!D4(f,l,m))}function D4(c,l,f){return l.x<=Math.max(c.x,f.x)&&l.x>=Math.min(c.x,f.x)&&l.y<=Math.max(c.y,f.y)&&l.y>=Math.min(c.y,f.y)}function N4(c){return c>0?1:c<0?-1:0}function WS(c,l){return Ei(c.prev,c,c.next)<0?Ei(c,l,c.next)>=0&&Ei(c,c.prev,l)>=0:Ei(c,l,c.prev)<0||Ei(c,c.next,l)<0}function Ese(c,l){let f=VF(c.i,c.x,c.y),m=VF(l.i,l.x,l.y),_=c.next,S=l.prev;return c.next=l,l.prev=c,f.next=_,_.prev=f,m.next=f,f.prev=m,S.next=m,m.prev=S,m}function Sse(c,l,f,m){let _=VF(c,l,f);return m?(_.next=m.next,_.prev=m,m.next.prev=_,m.next=_):(_.prev=_,_.next=_),_}function $S(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function VF(c,l,f){return{i:c,x:l,y:f,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function GF(c,l,f){let m=f.patternDependencies,_=!1;for(let S of l){let I=S.paint.get(`${c}-pattern`);I.isConstant()||(_=!0);let C=I.constantOr(null);C&&(_=!0,m[C.to]=!0,m[C.from]=!0)}return _}function HF(c,l,f,m,_){let S=_.patternDependencies;for(let I of l){let C=I.paint.get(`${c}-pattern`).value;if(C.kind!=="constant"){let N=C.evaluate({zoom:m-1},f,{},_.availableImages),j=C.evaluate({zoom:m},f,{},_.availableImages),z=C.evaluate({zoom:m+1},f,{},_.availableImages);N=N&&N.name?N.name:N,j=j&&j.name?j.name:j,z=z&&z.name?z.name:z,S[N]=!0,S[j]=!0,S[z]=!0,f.patterns[I.id]={min:N,mid:j,max:z}}}return f}class WF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new pc,this.indexArray=new ju,this.indexArray2=new ma,this.programConfigurations=new Dy(l.layers,l.zoom),this.segments=new wn,this.segments2=new wn,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=GF("fill",this.layers,f);let _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),I=[];for(let{feature:C,id:N,index:j,sourceLayerIndex:z}of l){let B=this.layers[0]._featureFilter.needGeometry,Y=Oy(C,B);if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),Y,m))continue;let K=S?_.evaluate(Y,{},m,f.availableImages):void 0,te={id:N,properties:C.properties,type:C.type,sourceLayerIndex:z,index:j,geometry:B?Y.geometry:Ny(C),patterns:{},sortKey:K};I.push(te)}S&&I.sort((C,N)=>C.sortKey-N.sortKey);for(let C of I){let{geometry:N,index:j,sourceLayerIndex:z}=C;if(this.hasPattern){let B=HF("fill",this.layers,C,this.zoom,f);this.patternFeatures.push(B)}else this.addFeature(C,N,j,m,{});f.featureIndex.insert(l[j].feature,N,j,z,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,nst),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.indexBuffer2=l.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(l,f,m,_,S){for(let I of r_(f,500)){let C=0;for(let K of I)C+=K.length;let N=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray),j=N.vertexLength,z=[],B=[];for(let K of I){if(K.length===0)continue;K!==I[0]&&B.push(z.length/2);let te=this.segments2.prepareSegment(K.length,this.layoutVertexArray,this.indexArray2),oe=te.vertexLength;this.layoutVertexArray.emplaceBack(K[0].x,K[0].y),this.indexArray2.emplaceBack(oe+K.length-1,oe),z.push(K[0].x),z.push(K[0].y);for(let he=1;he<K.length;he++)this.layoutVertexArray.emplaceBack(K[he].x,K[he].y),this.indexArray2.emplaceBack(oe+he-1,oe+he),z.push(K[he].x),z.push(K[he].y);te.vertexLength+=K.length,te.primitiveLength+=K.length}let Y=xse(z,B);for(let K=0;K<Y.length;K+=3)this.indexArray.emplaceBack(j+Y[K],j+Y[K+1],j+Y[K+2]);N.vertexLength+=C,N.primitiveLength+=Y.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}}let Ise,Tse;or("FillBucket",WF,{omit:["layers","patternFeatures"]});var dst={get paint(){return Tse=Tse||new E({"fill-antialias":new cr(Ae.paint_fill["fill-antialias"]),"fill-opacity":new Ar(Ae.paint_fill["fill-opacity"]),"fill-color":new Ar(Ae.paint_fill["fill-color"]),"fill-outline-color":new Ar(Ae.paint_fill["fill-outline-color"]),"fill-translate":new cr(Ae.paint_fill["fill-translate"]),"fill-translate-anchor":new cr(Ae.paint_fill["fill-translate-anchor"]),"fill-pattern":new w_(Ae.paint_fill["fill-pattern"])})},get layout(){return Ise=Ise||new E({"fill-sort-key":new Ar(Ae.layout_fill["fill-sort-key"])})}};class hst extends d{constructor(l){super(l,dst)}recalculate(l,f){super.recalculate(l,f);let m=this.paint._values["fill-outline-color"];m.value.kind==="constant"&&m.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(l){return new WF(l)}queryRadius(){return T4(this.paint.get("fill-translate"))}queryIntersectsFeature(l,f,m,_,S,I,C){return lse(M4(l,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),I.angle,C),_)}isTileClipped(){return!0}}let mst=D([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),gst=D([{name:"a_centroid",components:2,type:"Int16"}],4),{members:vst}=mst;var Jm={},yst=u,Mse=L_;function L_(c,l,f,m,_){this.properties={},this.extent=f,this.type=0,this._pbf=c,this._geometry=-1,this._keys=m,this._values=_,c.readFields(_st,this,l)}function _st(c,l,f){c==1?l.id=f.readVarint():c==2?function(m,_){for(var S=m.readVarint()+m.pos;m.pos<S;){var I=_._keys[m.readVarint()],C=_._values[m.readVarint()];_.properties[I]=C}}(f,l):c==3?l.type=f.readVarint():c==4&&(l._geometry=f.pos)}function xst(c){for(var l,f,m=0,_=0,S=c.length,I=S-1;_<S;I=_++)m+=((f=c[I]).x-(l=c[_]).x)*(l.y+f.y);return m}L_.types=["Unknown","Point","LineString","Polygon"],L_.prototype.loadGeometry=function(){var c=this._pbf;c.pos=this._geometry;for(var l,f=c.readVarint()+c.pos,m=1,_=0,S=0,I=0,C=[];c.pos<f;){if(_<=0){var N=c.readVarint();m=7&N,_=N>>3}if(_--,m===1||m===2)S+=c.readSVarint(),I+=c.readSVarint(),m===1&&(l&&C.push(l),l=[]),l.push(new yst(S,I));else{if(m!==7)throw new Error("unknown command "+m);l&&l.push(l[0].clone())}}return l&&C.push(l),C},L_.prototype.bbox=function(){var c=this._pbf;c.pos=this._geometry;for(var l=c.readVarint()+c.pos,f=1,m=0,_=0,S=0,I=1/0,C=-1/0,N=1/0,j=-1/0;c.pos<l;){if(m<=0){var z=c.readVarint();f=7&z,m=z>>3}if(m--,f===1||f===2)(_+=c.readSVarint())<I&&(I=_),_>C&&(C=_),(S+=c.readSVarint())<N&&(N=S),S>j&&(j=S);else if(f!==7)throw new Error("unknown command "+f)}return[I,N,C,j]},L_.prototype.toGeoJSON=function(c,l,f){var m,_,S=this.extent*Math.pow(2,f),I=this.extent*c,C=this.extent*l,N=this.loadGeometry(),j=L_.types[this.type];function z(K){for(var te=0;te<K.length;te++){var oe=K[te];K[te]=[360*(oe.x+I)/S-180,360/Math.PI*Math.atan(Math.exp((180-360*(oe.y+C)/S)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(m=0;m<N.length;m++)B[m]=N[m][0];z(N=B);break;case 2:for(m=0;m<N.length;m++)z(N[m]);break;case 3:for(N=function(K){var te=K.length;if(te<=1)return[K];for(var oe,he,ve=[],$e=0;$e<te;$e++){var Ce=xst(K[$e]);Ce!==0&&(he===void 0&&(he=Ce<0),he===Ce<0?(oe&&ve.push(oe),oe=[K[$e]]):oe.push(K[$e]))}return oe&&ve.push(oe),ve}(N),m=0;m<N.length;m++)for(_=0;_<N[m].length;_++)z(N[m][_]);}N.length===1?N=N[0]:j="Multi"+j;var Y={type:"Feature",geometry:{type:j,coordinates:N},properties:this.properties};return"id"in this&&(Y.id=this.id),Y};var bst=Mse,Cse=Ase;function Ase(c,l){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=c,this._keys=[],this._values=[],this._features=[],c.readFields(wst,this,l),this.length=this._features.length}function wst(c,l,f){c===15?l.version=f.readVarint():c===1?l.name=f.readString():c===5?l.extent=f.readVarint():c===2?l._features.push(f.pos):c===3?l._keys.push(f.readString()):c===4&&l._values.push(function(m){for(var _=null,S=m.readVarint()+m.pos;m.pos<S;){var I=m.readVarint()>>3;_=I===1?m.readString():I===2?m.readFloat():I===3?m.readDouble():I===4?m.readVarint64():I===5?m.readVarint():I===6?m.readSVarint():I===7?m.readBoolean():null}return _}(f))}Ase.prototype.feature=function(c){if(c<0||c>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[c];var l=this._pbf.readVarint()+this._pbf.pos;return new bst(this._pbf,l,this.extent,this._keys,this._values)};var Est=Cse;function Sst(c,l,f){if(c===3){var m=new Est(f,f.readVarint()+f.pos);m.length&&(l[m.name]=m)}}Jm.VectorTile=function(c,l){this.layers=c.readFields(Sst,{},l)},Jm.VectorTileFeature=Mse,Jm.VectorTileLayer=Cse;let Ist=Jm.VectorTileFeature.types,$F=Math.pow(2,13);function YS(c,l,f,m,_,S,I,C){c.emplaceBack(l,f,2*Math.floor(m*$F)+I,_*$F*2,S*$F*2,Math.round(C))}class YF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.layoutVertexArray=new Wm,this.centroidVertexArray=new Aa,this.indexArray=new ju,this.programConfigurations=new Dy(l.layers,l.zoom),this.segments=new wn,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.features=[],this.hasPattern=GF("fill-extrusion",this.layers,f);for(let{feature:_,id:S,index:I,sourceLayerIndex:C}of l){let N=this.layers[0]._featureFilter.needGeometry,j=Oy(_,N);if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),j,m))continue;let z={id:S,sourceLayerIndex:C,index:I,geometry:N?j.geometry:Ny(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(HF("fill-extrusion",this.layers,z,this.zoom,f)):this.addFeature(z,z.geometry,I,m,{}),f.featureIndex.insert(_,z.geometry,I,C,this.index,!0)}}addFeatures(l,f,m){for(let _ of this.features){let{geometry:S}=_;this.addFeature(_,S,_.index,f,m)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,vst),this.centroidVertexBuffer=l.createVertexBuffer(this.centroidVertexArray,gst.members,!0),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(l,f,m,_,S){for(let I of r_(f,500)){let C={x:0,y:0,vertexCount:0},N=0;for(let te of I)N+=te.length;let j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let te of I){if(te.length===0||Mst(te))continue;let oe=0;for(let he=0;he<te.length;he++){let ve=te[he];if(he>=1){let $e=te[he-1];if(!Tst(ve,$e)){j.vertexLength+4>wn.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let Ce=ve.sub($e)._perp()._unit(),He=$e.dist(ve);oe+He>32768&&(oe=0),YS(this.layoutVertexArray,ve.x,ve.y,Ce.x,Ce.y,0,0,oe),YS(this.layoutVertexArray,ve.x,ve.y,Ce.x,Ce.y,0,1,oe),C.x+=2*ve.x,C.y+=2*ve.y,C.vertexCount+=2,oe+=He,YS(this.layoutVertexArray,$e.x,$e.y,Ce.x,Ce.y,0,0,oe),YS(this.layoutVertexArray,$e.x,$e.y,Ce.x,Ce.y,0,1,oe),C.x+=2*$e.x,C.y+=2*$e.y,C.vertexCount+=2;let rt=j.vertexLength;this.indexArray.emplaceBack(rt,rt+2,rt+1),this.indexArray.emplaceBack(rt+1,rt+2,rt+3),j.vertexLength+=4,j.primitiveLength+=2}}}}if(j.vertexLength+N>wn.MAX_VERTEX_ARRAY_LENGTH&&(j=this.segments.prepareSegment(N,this.layoutVertexArray,this.indexArray)),Ist[l.type]!=="Polygon")continue;let z=[],B=[],Y=j.vertexLength;for(let te of I)if(te.length!==0){te!==I[0]&&B.push(z.length/2);for(let oe=0;oe<te.length;oe++){let he=te[oe];YS(this.layoutVertexArray,he.x,he.y,0,0,1,1,0),C.x+=he.x,C.y+=he.y,C.vertexCount+=1,z.push(he.x),z.push(he.y)}}let K=xse(z,B);for(let te=0;te<K.length;te+=3)this.indexArray.emplaceBack(Y+K[te],Y+K[te+2],Y+K[te+1]);j.primitiveLength+=K.length/3,j.vertexLength+=N;for(let te=0;te<C.vertexCount;te++){let oe=Math.floor(C.x/C.vertexCount),he=Math.floor(C.y/C.vertexCount);this.centroidVertexArray.emplaceBack(oe,he)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}}function Tst(c,l){return c.x===l.x&&(c.x<0||c.x>Ni)||c.y===l.y&&(c.y<0||c.y>Ni)}function Mst(c){return c.every(l=>l.x<0)||c.every(l=>l.x>Ni)||c.every(l=>l.y<0)||c.every(l=>l.y>Ni)}let Dse;or("FillExtrusionBucket",YF,{omit:["layers","features"]});var Cst={get paint(){return Dse=Dse||new E({"fill-extrusion-opacity":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ar(Ae["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new w_(Ae["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ar(Ae["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ar(Ae["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new cr(Ae["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Ast extends d{constructor(l){super(l,Cst)}createBucket(l){return new YF(l)}queryRadius(){return T4(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(l,f,m,_,S,I,C,N){let j=M4(l,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),I.angle,C),z=this.paint.get("fill-extrusion-height").evaluate(f,m),B=this.paint.get("fill-extrusion-base").evaluate(f,m),Y=function(te,oe,he,ve){let $e=[];for(let Ce of te){let He=[Ce.x,Ce.y,0,1];C4(He,He,oe),$e.push(new h(He[0]/He[3],He[1]/He[3]))}return $e}(j,N),K=function(te,oe,he,ve){let $e=[],Ce=[],He=ve[8]*oe,rt=ve[9]*oe,bt=ve[10]*oe,Qt=ve[11]*oe,Ir=ve[8]*he,Kt=ve[9]*he,Ut=ve[10]*he,dr=ve[11]*he;for(let sr of te){let rr=[],ut=[];for(let gr of sr){let pr=gr.x,Pr=gr.y,mo=ve[0]*pr+ve[4]*Pr+ve[12],co=ve[1]*pr+ve[5]*Pr+ve[13],ta=ve[2]*pr+ve[6]*Pr+ve[14],dc=ve[3]*pr+ve[7]*Pr+ve[15],Oa=ta+bt,ra=dc+Qt,Ls=mo+Ir,Ps=co+Kt,ks=ta+Ut,gi=dc+dr,na=new h((mo+He)/ra,(co+rt)/ra);na.z=Oa/ra,rr.push(na);let ts=new h(Ls/gi,Ps/gi);ts.z=ks/gi,ut.push(ts)}$e.push(rr),Ce.push(ut)}return[$e,Ce]}(_,B,z,N);return function(te,oe,he){let ve=1/0;lse(he,oe)&&(ve=Nse(he,oe[0]));for(let $e=0;$e<oe.length;$e++){let Ce=oe[$e],He=te[$e];for(let rt=0;rt<Ce.length-1;rt++){let bt=Ce[rt],Qt=[bt,Ce[rt+1],He[rt+1],He[rt],bt];sse(he,Qt)&&(ve=Math.min(ve,Nse(he,Qt)))}}return ve!==1/0&&ve}(K[0],K[1],Y)}}function ZS(c,l){return c.x*l.x+c.y*l.y}function Nse(c,l){if(c.length===1){let f=0,m=l[f++],_;for(;!_||m.equals(_);)if(_=l[f++],!_)return 1/0;for(;f<l.length;f++){let S=l[f],I=c[0],C=_.sub(m),N=S.sub(m),j=I.sub(m),z=ZS(C,C),B=ZS(C,N),Y=ZS(N,N),K=ZS(j,C),te=ZS(j,N),oe=z*Y-B*B,he=(Y*K-B*te)/oe,ve=(z*te-B*K)/oe,$e=m.z*(1-he-ve)+_.z*he+S.z*ve;if(isFinite($e))return $e}return 1/0}{let f=1/0;for(let m of l)f=Math.min(f,m.z);return f}}let Dst=D([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Nst}=Dst,Ost=D([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Lst}=Ost,Pst=Jm.VectorTileFeature.types,kst=Math.cos(Math.PI/180*37.5),Ose=Math.pow(2,14)/.5;class ZF{constructor(l){this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(f=>f.id),this.index=l.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(f=>{this.gradients[f.id]={}}),this.layoutVertexArray=new S_,this.layoutVertexArray2=new $m,this.indexArray=new ju,this.programConfigurations=new Dy(l.layers,l.zoom),this.segments=new wn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(f=>f.isStateDependent()).map(f=>f.id)}populate(l,f,m){this.hasPattern=GF("line",this.layers,f);let _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),I=[];for(let{feature:C,id:N,index:j,sourceLayerIndex:z}of l){let B=this.layers[0]._featureFilter.needGeometry,Y=Oy(C,B);if(!this.layers[0]._featureFilter.filter(new Do(this.zoom),Y,m))continue;let K=S?_.evaluate(Y,{},m):void 0,te={id:N,properties:C.properties,type:C.type,sourceLayerIndex:z,index:j,geometry:B?Y.geometry:Ny(C),patterns:{},sortKey:K};I.push(te)}S&&I.sort((C,N)=>C.sortKey-N.sortKey);for(let C of I){let{geometry:N,index:j,sourceLayerIndex:z}=C;if(this.hasPattern){let B=HF("line",this.layers,C,this.zoom,f);this.patternFeatures.push(B)}else this.addFeature(C,N,j,m,{});f.featureIndex.insert(l[j].feature,N,j,z,this.index)}}update(l,f,m){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(l,f,this.stateDependentLayers,m)}addFeatures(l,f,m){for(let _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,f,m)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(l){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=l.createVertexBuffer(this.layoutVertexArray2,Lst)),this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,Nst),this.indexBuffer=l.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(l),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(l){if(l.properties&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(l.properties,"mapbox_clip_end"))return{start:+l.properties.mapbox_clip_start,end:+l.properties.mapbox_clip_end}}addFeature(l,f,m,_,S){let I=this.layers[0].layout,C=I.get("line-join").evaluate(l,{}),N=I.get("line-cap"),j=I.get("line-miter-limit"),z=I.get("line-round-limit");this.lineClips=this.lineFeatureClips(l);for(let B of f)this.addLine(B,l,C,N,j,z);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,l,m,S,_)}addLine(l,f,m,_,S,I){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ve=0;ve<l.length-1;ve++)this.totalDistance+=l[ve].dist(l[ve+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let C=Pst[f.type]==="Polygon",N=l.length;for(;N>=2&&l[N-1].equals(l[N-2]);)N--;let j=0;for(;j<N-1&&l[j].equals(l[j+1]);)j++;if(N<(C?3:2))return;m==="bevel"&&(S=1.05);let z=this.overscaling<=16?15*Ni/(512*this.overscaling):0,B=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray),Y,K,te,oe,he;this.e1=this.e2=-1,C&&(Y=l[N-2],he=l[j].sub(Y)._unit()._perp());for(let ve=j;ve<N;ve++){if(te=ve===N-1?C?l[j+1]:void 0:l[ve+1],te&&l[ve].equals(te))continue;he&&(oe=he),Y&&(K=Y),Y=l[ve],he=te?te.sub(Y)._unit()._perp():oe,oe=oe||he;let $e=oe.add(he);$e.x===0&&$e.y===0||$e._unit();let Ce=oe.x*he.x+oe.y*he.y,He=$e.x*he.x+$e.y*he.y,rt=He!==0?1/He:1/0,bt=2*Math.sqrt(2-2*He),Qt=He<kst&&K&&te,Ir=oe.x*he.y-oe.y*he.x>0;if(Qt&&ve>j){let dr=Y.dist(K);if(dr>2*z){let sr=Y.sub(Y.sub(K)._mult(z/dr)._round());this.updateDistance(K,sr),this.addCurrentVertex(sr,oe,0,0,B),K=sr}}let Kt=K&&te,Ut=Kt?m:C?"butt":_;if(Kt&&Ut==="round"&&(rt<I?Ut="miter":rt<=2&&(Ut="fakeround")),Ut==="miter"&&rt>S&&(Ut="bevel"),Ut==="bevel"&&(rt>2&&(Ut="flipbevel"),rt<S&&(Ut="miter")),K&&this.updateDistance(K,Y),Ut==="miter")$e._mult(rt),this.addCurrentVertex(Y,$e,0,0,B);else if(Ut==="flipbevel"){if(rt>100)$e=he.mult(-1);else{let dr=rt*oe.add(he).mag()/oe.sub(he).mag();$e._perp()._mult(dr*(Ir?-1:1))}this.addCurrentVertex(Y,$e,0,0,B),this.addCurrentVertex(Y,$e.mult(-1),0,0,B)}else if(Ut==="bevel"||Ut==="fakeround"){let dr=-Math.sqrt(rt*rt-1),sr=Ir?dr:0,rr=Ir?0:dr;if(K&&this.addCurrentVertex(Y,oe,sr,rr,B),Ut==="fakeround"){let ut=Math.round(180*bt/Math.PI/20);for(let gr=1;gr<ut;gr++){let pr=gr/ut;if(pr!==.5){let mo=pr-.5;pr+=pr*mo*(pr-1)*((1.0904+Ce*(Ce*(3.55645-1.43519*Ce)-3.2452))*mo*mo+(.848013+Ce*(.215638*Ce-1.06021)))}let Pr=he.sub(oe)._mult(pr)._add(oe)._unit()._mult(Ir?-1:1);this.addHalfVertex(Y,Pr.x,Pr.y,!1,Ir,0,B)}}te&&this.addCurrentVertex(Y,he,-sr,-rr,B)}else if(Ut==="butt")this.addCurrentVertex(Y,$e,0,0,B);else if(Ut==="square"){let dr=K?1:-1;this.addCurrentVertex(Y,$e,dr,dr,B)}else Ut==="round"&&(K&&(this.addCurrentVertex(Y,oe,0,0,B),this.addCurrentVertex(Y,oe,1,1,B,!0)),te&&(this.addCurrentVertex(Y,he,-1,-1,B,!0),this.addCurrentVertex(Y,he,0,0,B)));if(Qt&&ve<N-1){let dr=Y.dist(te);if(dr>2*z){let sr=Y.add(te.sub(Y)._mult(z/dr)._round());this.updateDistance(Y,sr),this.addCurrentVertex(sr,he,0,0,B),Y=sr}}}}addCurrentVertex(l,f,m,_,S,I=!1){let C=f.y*_-f.x,N=-f.y-f.x*_;this.addHalfVertex(l,f.x+f.y*m,f.y-f.x*m,I,!1,m,S),this.addHalfVertex(l,C,N,I,!0,-_,S),this.distance>Ose/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(l,f,m,_,S,I))}addHalfVertex({x:l,y:f},m,_,S,I,C,N){let j=.5*(this.lineClips?this.scaledDistance*(Ose-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((l<<1)+(S?1:0),(f<<1)+(I?1:0),Math.round(63*m)+128,Math.round(63*_)+128,1+(C===0?0:C<0?-1:1)|(63&j)<<2,j>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let z=N.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,z),N.primitiveLength++),I?this.e2=z:this.e1=z}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(l,f){this.distance+=l.dist(f),this.updateScaledDistance()}}let Lse,Pse;or("LineBucket",ZF,{omit:["layers","patternFeatures"]});var kse={get paint(){return Pse=Pse||new E({"line-opacity":new Ar(Ae.paint_line["line-opacity"]),"line-color":new Ar(Ae.paint_line["line-color"]),"line-translate":new cr(Ae.paint_line["line-translate"]),"line-translate-anchor":new cr(Ae.paint_line["line-translate-anchor"]),"line-width":new Ar(Ae.paint_line["line-width"]),"line-gap-width":new Ar(Ae.paint_line["line-gap-width"]),"line-offset":new Ar(Ae.paint_line["line-offset"]),"line-blur":new Ar(Ae.paint_line["line-blur"]),"line-dasharray":new E_(Ae.paint_line["line-dasharray"]),"line-pattern":new w_(Ae.paint_line["line-pattern"]),"line-gradient":new zS(Ae.paint_line["line-gradient"])})},get layout(){return Lse=Lse||new E({"line-cap":new cr(Ae.layout_line["line-cap"]),"line-join":new Ar(Ae.layout_line["line-join"]),"line-miter-limit":new cr(Ae.layout_line["line-miter-limit"]),"line-round-limit":new cr(Ae.layout_line["line-round-limit"]),"line-sort-key":new Ar(Ae.layout_line["line-sort-key"])})}};class Rst extends Ar{possiblyEvaluate(l,f){return f=new Do(Math.floor(f.zoom),{now:f.now,fadeDuration:f.fadeDuration,zoomHistory:f.zoomHistory,transition:f.transition}),super.possiblyEvaluate(l,f)}evaluate(l,f,m,_){return f=X({},f,{zoom:Math.floor(f.zoom)}),super.evaluate(l,f,m,_)}}let O4;class jst extends d{constructor(l){super(l,kse),this.gradientVersion=0,O4||(O4=new Rst(kse.paint.properties["line-width"].specification),O4.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(l){if(l==="line-gradient"){let f=this.gradientExpression();this.stepInterpolant=!!function(m){return m._styleExpression!==void 0}(f)&&f._styleExpression.expression instanceof Mm,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(l,f){super.recalculate(l,f),this.paint._values["line-floorwidth"]=O4.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,l)}createBucket(l){return new ZF(l)}queryRadius(l){let f=l,m=Rse(BS("line-width",this,f),BS("line-gap-width",this,f)),_=BS("line-offset",this,f);return m/2+Math.abs(_)+T4(this.paint.get("line-translate"))}queryIntersectsFeature(l,f,m,_,S,I,C){let N=M4(l,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),I.angle,C),j=C/2*Rse(this.paint.get("line-width").evaluate(f,m),this.paint.get("line-gap-width").evaluate(f,m)),z=this.paint.get("line-offset").evaluate(f,m);return z&&(_=function(B,Y){let K=[];for(let te=0;te<B.length;te++){let oe=B[te],he=[];for(let ve=0;ve<oe.length;ve++){let $e=oe[ve-1],Ce=oe[ve],He=oe[ve+1],rt=ve===0?new h(0,0):Ce.sub($e)._unit()._perp(),bt=ve===oe.length-1?new h(0,0):He.sub(Ce)._unit()._perp(),Qt=rt._add(bt)._unit(),Ir=Qt.x*bt.x+Qt.y*bt.y;Ir!==0&&Qt._mult(1/Ir),he.push(Qt._mult(Y)._add(Ce))}K.push(he)}return K}(_,z*C)),function(B,Y,K){for(let te=0;te<Y.length;te++){let oe=Y[te];if(B.length>=3){for(let he=0;he<oe.length;he++)if(D_(B,oe[he]))return!0}if(Wat(B,oe,K))return!0}return!1}(N,_,j)}isTileClipped(){return!0}}function Rse(c,l){return l>0?l+2*c:c}let qst=D([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),zst=D([{name:"a_projected_pos",components:3,type:"Float32"}],4);D([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Fst=D([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);D([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let jse=D([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ust=D([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Bst(c,l,f){return c.sections.forEach(m=>{m.text=function(_,S,I){let C=S.layout.get("text-transform").evaluate(I,{});return C==="uppercase"?_=_.toLocaleUpperCase():C==="lowercase"&&(_=_.toLocaleLowerCase()),gl.applyArabicShaping&&(_=gl.applyArabicShaping(_)),_}(m.text,l,f)}),c}D([{name:"triangle",components:3,type:"Uint16"}]),D([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),D([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),D([{type:"Float32",name:"offsetX"}]),D([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),D([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let KS={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Ui=24,qse=uo,zse=function(c,l,f,m,_){var S,I,C=8*_-m-1,N=(1<<C)-1,j=N>>1,z=-7,B=f?_-1:0,Y=f?-1:1,K=c[l+B];for(B+=Y,S=K&(1<<-z)-1,K>>=-z,z+=C;z>0;S=256*S+c[l+B],B+=Y,z-=8);for(I=S&(1<<-z)-1,S>>=-z,z+=m;z>0;I=256*I+c[l+B],B+=Y,z-=8);if(S===0)S=1-j;else{if(S===N)return I?NaN:1/0*(K?-1:1);I+=Math.pow(2,m),S-=j}return(K?-1:1)*I*Math.pow(2,S-m)},Fse=function(c,l,f,m,_,S){var I,C,N,j=8*S-_-1,z=(1<<j)-1,B=z>>1,Y=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,K=m?0:S-1,te=m?1:-1,oe=l<0||l===0&&1/l<0?1:0;for(l=Math.abs(l),isNaN(l)||l===1/0?(C=isNaN(l)?1:0,I=z):(I=Math.floor(Math.log(l)/Math.LN2),l*(N=Math.pow(2,-I))<1&&(I--,N*=2),(l+=I+B>=1?Y/N:Y*Math.pow(2,1-B))*N>=2&&(I++,N/=2),I+B>=z?(C=0,I=z):I+B>=1?(C=(l*N-1)*Math.pow(2,_),I+=B):(C=l*Math.pow(2,B-1)*Math.pow(2,_),I=0));_>=8;c[f+K]=255&C,K+=te,C/=256,_-=8);for(I=I<<_|C,j+=_;j>0;c[f+K]=255&I,K+=te,I/=256,j-=8);c[f+K-te]|=128*oe};function uo(c){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(c)?c:new Uint8Array(c||0),this.pos=0,this.type=0,this.length=this.buf.length}uo.Varint=0,uo.Fixed64=1,uo.Bytes=2,uo.Fixed32=5;var KF=4294967296,Use=1/KF,Bse=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function rh(c){return c.type===uo.Bytes?c.readVarint()+c.pos:c.pos+1}function P_(c,l,f){return f?4294967296*l+(c>>>0):4294967296*(l>>>0)+(c>>>0)}function Vse(c,l,f){var m=l<=16383?1:l<=2097151?2:l<=268435455?3:Math.floor(Math.log(l)/(7*Math.LN2));f.realloc(m);for(var _=f.pos-1;_>=c;_--)f.buf[_+m]=f.buf[_]}function Vst(c,l){for(var f=0;f<c.length;f++)l.writeVarint(c[f])}function Gst(c,l){for(var f=0;f<c.length;f++)l.writeSVarint(c[f])}function Hst(c,l){for(var f=0;f<c.length;f++)l.writeFloat(c[f])}function Wst(c,l){for(var f=0;f<c.length;f++)l.writeDouble(c[f])}function $st(c,l){for(var f=0;f<c.length;f++)l.writeBoolean(c[f])}function Yst(c,l){for(var f=0;f<c.length;f++)l.writeFixed32(c[f])}function Zst(c,l){for(var f=0;f<c.length;f++)l.writeSFixed32(c[f])}function Kst(c,l){for(var f=0;f<c.length;f++)l.writeFixed64(c[f])}function Xst(c,l){for(var f=0;f<c.length;f++)l.writeSFixed64(c[f])}function L4(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+16777216*c[l+3]}function k_(c,l,f){c[f]=l,c[f+1]=l>>>8,c[f+2]=l>>>16,c[f+3]=l>>>24}function Gse(c,l){return(c[l]|c[l+1]<<8|c[l+2]<<16)+(c[l+3]<<24)}uo.prototype={destroy:function(){this.buf=null},readFields:function(c,l,f){for(f=f||this.length;this.pos<f;){var m=this.readVarint(),_=m>>3,S=this.pos;this.type=7&m,c(_,l,this),this.pos===S&&this.skip(m)}return l},readMessage:function(c,l){return this.readFields(c,l,this.readVarint()+this.pos)},readFixed32:function(){var c=L4(this.buf,this.pos);return this.pos+=4,c},readSFixed32:function(){var c=Gse(this.buf,this.pos);return this.pos+=4,c},readFixed64:function(){var c=L4(this.buf,this.pos)+L4(this.buf,this.pos+4)*KF;return this.pos+=8,c},readSFixed64:function(){var c=L4(this.buf,this.pos)+Gse(this.buf,this.pos+4)*KF;return this.pos+=8,c},readFloat:function(){var c=zse(this.buf,this.pos,!0,23,4);return this.pos+=4,c},readDouble:function(){var c=zse(this.buf,this.pos,!0,52,8);return this.pos+=8,c},readVarint:function(c){var l,f,m=this.buf;return l=127&(f=m[this.pos++]),f<128?l:(l|=(127&(f=m[this.pos++]))<<7,f<128?l:(l|=(127&(f=m[this.pos++]))<<14,f<128?l:(l|=(127&(f=m[this.pos++]))<<21,f<128?l:function(_,S,I){var C,N,j=I.buf;if(C=(112&(N=j[I.pos++]))>>4,N<128||(C|=(127&(N=j[I.pos++]))<<3,N<128)||(C|=(127&(N=j[I.pos++]))<<10,N<128)||(C|=(127&(N=j[I.pos++]))<<17,N<128)||(C|=(127&(N=j[I.pos++]))<<24,N<128)||(C|=(1&(N=j[I.pos++]))<<31,N<128))return P_(_,C,S);throw new Error("Expected varint not more than 10 bytes")}(l|=(15&(f=m[this.pos]))<<28,c,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var c=this.readVarint();return c%2==1?(c+1)/-2:c/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var c=this.readVarint()+this.pos,l=this.pos;return this.pos=c,c-l>=12&&Bse?function(f,m,_){return Bse.decode(f.subarray(m,_))}(this.buf,l,c):function(f,m,_){for(var S="",I=m;I<_;){var C,N,j,z=f[I],B=null,Y=z>239?4:z>223?3:z>191?2:1;if(I+Y>_)break;Y===1?z<128&&(B=z):Y===2?(192&(C=f[I+1]))==128&&(B=(31&z)<<6|63&C)<=127&&(B=null):Y===3?(N=f[I+2],(192&(C=f[I+1]))==128&&(192&N)==128&&((B=(15&z)<<12|(63&C)<<6|63&N)<=2047||B>=55296&&B<=57343)&&(B=null)):Y===4&&(N=f[I+2],j=f[I+3],(192&(C=f[I+1]))==128&&(192&N)==128&&(192&j)==128&&((B=(15&z)<<18|(63&C)<<12|(63&N)<<6|63&j)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,Y=1):B>65535&&(B-=65536,S+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),S+=String.fromCharCode(B),I+=Y}return S}(this.buf,l,c)},readBytes:function(){var c=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,c);return this.pos=c,l},readPackedVarint:function(c,l){if(this.type!==uo.Bytes)return c.push(this.readVarint(l));var f=rh(this);for(c=c||[];this.pos<f;)c.push(this.readVarint(l));return c},readPackedSVarint:function(c){if(this.type!==uo.Bytes)return c.push(this.readSVarint());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readSVarint());return c},readPackedBoolean:function(c){if(this.type!==uo.Bytes)return c.push(this.readBoolean());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readBoolean());return c},readPackedFloat:function(c){if(this.type!==uo.Bytes)return c.push(this.readFloat());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readFloat());return c},readPackedDouble:function(c){if(this.type!==uo.Bytes)return c.push(this.readDouble());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readDouble());return c},readPackedFixed32:function(c){if(this.type!==uo.Bytes)return c.push(this.readFixed32());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readFixed32());return c},readPackedSFixed32:function(c){if(this.type!==uo.Bytes)return c.push(this.readSFixed32());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed32());return c},readPackedFixed64:function(c){if(this.type!==uo.Bytes)return c.push(this.readFixed64());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readFixed64());return c},readPackedSFixed64:function(c){if(this.type!==uo.Bytes)return c.push(this.readSFixed64());var l=rh(this);for(c=c||[];this.pos<l;)c.push(this.readSFixed64());return c},skip:function(c){var l=7&c;if(l===uo.Varint)for(;this.buf[this.pos++]>127;);else if(l===uo.Bytes)this.pos=this.readVarint()+this.pos;else if(l===uo.Fixed32)this.pos+=4;else{if(l!==uo.Fixed64)throw new Error("Unimplemented type: "+l);this.pos+=8}},writeTag:function(c,l){this.writeVarint(c<<3|l)},realloc:function(c){for(var l=this.length||16;l<this.pos+c;)l*=2;if(l!==this.length){var f=new Uint8Array(l);f.set(this.buf),this.buf=f,this.length=l}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(c){this.realloc(4),k_(this.buf,c,this.pos),this.pos+=4},writeSFixed32:function(c){this.realloc(4),k_(this.buf,c,this.pos),this.pos+=4},writeFixed64:function(c){this.realloc(8),k_(this.buf,-1&c,this.pos),k_(this.buf,Math.floor(c*Use),this.pos+4),this.pos+=8},writeSFixed64:function(c){this.realloc(8),k_(this.buf,-1&c,this.pos),k_(this.buf,Math.floor(c*Use),this.pos+4),this.pos+=8},writeVarint:function(c){(c=+c||0)>268435455||c<0?function(l,f){var m,_;if(l>=0?(m=l%4294967296|0,_=l/4294967296|0):(_=~(-l/4294967296),4294967295^(m=~(-l%4294967296))?m=m+1|0:(m=0,_=_+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),function(S,I,C){C.buf[C.pos++]=127&S|128,S>>>=7,C.buf[C.pos++]=127&S|128,S>>>=7,C.buf[C.pos++]=127&S|128,S>>>=7,C.buf[C.pos++]=127&S|128,C.buf[C.pos]=127&(S>>>=7)}(m,0,f),function(S,I){var C=(7&S)<<4;I.buf[I.pos++]|=C|((S>>>=3)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S|((S>>>=7)?128:0),S&&(I.buf[I.pos++]=127&S)))))}(_,f)}(c,this):(this.realloc(4),this.buf[this.pos++]=127&c|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=127&(c>>>=7)|(c>127?128:0),c<=127||(this.buf[this.pos++]=c>>>7&127))))},writeSVarint:function(c){this.writeVarint(c<0?2*-c-1:2*c)},writeBoolean:function(c){this.writeVarint(!!c)},writeString:function(c){c=String(c),this.realloc(4*c.length),this.pos++;var l=this.pos;this.pos=function(m,_,S){for(var I,C,N=0;N<_.length;N++){if((I=_.charCodeAt(N))>55295&&I<57344){if(!C){I>56319||N+1===_.length?(m[S++]=239,m[S++]=191,m[S++]=189):C=I;continue}if(I<56320){m[S++]=239,m[S++]=191,m[S++]=189,C=I;continue}I=C-55296<<10|I-56320|65536,C=null}else C&&(m[S++]=239,m[S++]=191,m[S++]=189,C=null);I<128?m[S++]=I:(I<2048?m[S++]=I>>6|192:(I<65536?m[S++]=I>>12|224:(m[S++]=I>>18|240,m[S++]=I>>12&63|128),m[S++]=I>>6&63|128),m[S++]=63&I|128)}return S}(this.buf,c,this.pos);var f=this.pos-l;f>=128&&Vse(l,f,this),this.pos=l-1,this.writeVarint(f),this.pos+=f},writeFloat:function(c){this.realloc(4),Fse(this.buf,c,this.pos,!0,23,4),this.pos+=4},writeDouble:function(c){this.realloc(8),Fse(this.buf,c,this.pos,!0,52,8),this.pos+=8},writeBytes:function(c){var l=c.length;this.writeVarint(l),this.realloc(l);for(var f=0;f<l;f++)this.buf[this.pos++]=c[f]},writeRawMessage:function(c,l){this.pos++;var f=this.pos;c(l,this);var m=this.pos-f;m>=128&&Vse(f,m,this),this.pos=f-1,this.writeVarint(m),this.pos+=m},writeMessage:function(c,l,f){this.writeTag(c,uo.Bytes),this.writeRawMessage(l,f)},writePackedVarint:function(c,l){l.length&&this.writeMessage(c,Vst,l)},writePackedSVarint:function(c,l){l.length&&this.writeMessage(c,Gst,l)},writePackedBoolean:function(c,l){l.length&&this.writeMessage(c,$st,l)},writePackedFloat:function(c,l){l.length&&this.writeMessage(c,Hst,l)},writePackedDouble:function(c,l){l.length&&this.writeMessage(c,Wst,l)},writePackedFixed32:function(c,l){l.length&&this.writeMessage(c,Yst,l)},writePackedSFixed32:function(c,l){l.length&&this.writeMessage(c,Zst,l)},writePackedFixed64:function(c,l){l.length&&this.writeMessage(c,Kst,l)},writePackedSFixed64:function(c,l){l.length&&this.writeMessage(c,Xst,l)},writeBytesField:function(c,l){this.writeTag(c,uo.Bytes),this.writeBytes(l)},writeFixed32Field:function(c,l){this.writeTag(c,uo.Fixed32),this.writeFixed32(l)},writeSFixed32Field:function(c,l){this.writeTag(c,uo.Fixed32),this.writeSFixed32(l)},writeFixed64Field:function(c,l){this.writeTag(c,uo.Fixed64),this.writeFixed64(l)},writeSFixed64Field:function(c,l){this.writeTag(c,uo.Fixed64),this.writeSFixed64(l)},writeVarintField:function(c,l){this.writeTag(c,uo.Varint),this.writeVarint(l)},writeSVarintField:function(c,l){this.writeTag(c,uo.Varint),this.writeSVarint(l)},writeStringField:function(c,l){this.writeTag(c,uo.Bytes),this.writeString(l)},writeFloatField:function(c,l){this.writeTag(c,uo.Fixed32),this.writeFloat(l)},writeDoubleField:function(c,l){this.writeTag(c,uo.Fixed64),this.writeDouble(l)},writeBooleanField:function(c,l){this.writeVarintField(c,!!l)}};var XF=a(qse);let JF=3;function Jst(c,l,f){c===1&&f.readMessage(Qst,l)}function Qst(c,l,f){if(c===3){let{id:m,bitmap:_,width:S,height:I,left:C,top:N,advance:j}=f.readMessage(elt,{});l.push({id:m,bitmap:new GS({width:S+2*JF,height:I+2*JF},_),metrics:{width:S,height:I,left:C,top:N,advance:j}})}}function elt(c,l,f){c===1?l.id=f.readVarint():c===2?l.bitmap=f.readBytes():c===3?l.width=f.readVarint():c===4?l.height=f.readVarint():c===5?l.left=f.readSVarint():c===6?l.top=f.readSVarint():c===7&&(l.advance=f.readVarint())}let Hse=JF;function Wse(c){let l=0,f=0;for(let I of c)l+=I.w*I.h,f=Math.max(f,I.w);c.sort((I,C)=>C.h-I.h);let m=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(l/.95)),f),h:1/0}],_=0,S=0;for(let I of c)for(let C=m.length-1;C>=0;C--){let N=m[C];if(!(I.w>N.w||I.h>N.h)){if(I.x=N.x,I.y=N.y,S=Math.max(S,I.y+I.h),_=Math.max(_,I.x+I.w),I.w===N.w&&I.h===N.h){let j=m.pop();C<m.length&&(m[C]=j)}else I.h===N.h?(N.x+=I.w,N.w-=I.w):I.w===N.w?(N.y+=I.h,N.h-=I.h):(m.push({x:N.x+I.w,y:N.y,w:N.w-I.w,h:I.h}),N.y+=I.h,N.h-=I.h);break}}return{w:_,h:S,fill:l/(_*S)||0}}let yl=1;class QF{constructor(l,{pixelRatio:f,version:m,stretchX:_,stretchY:S,content:I,textFitWidth:C,textFitHeight:N}){this.paddedRect=l,this.pixelRatio=f,this.stretchX=_,this.stretchY=S,this.content=I,this.version=m,this.textFitWidth=C,this.textFitHeight=N}get tl(){return[this.paddedRect.x+yl,this.paddedRect.y+yl]}get br(){return[this.paddedRect.x+this.paddedRect.w-yl,this.paddedRect.y+this.paddedRect.h-yl]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*yl)/this.pixelRatio,(this.paddedRect.h-2*yl)/this.pixelRatio]}}class $se{constructor(l,f){let m={},_={};this.haveRenderCallbacks=[];let S=[];this.addImages(l,m,S),this.addImages(f,_,S);let{w:I,h:C}=Wse(S),N=new qu({width:I||1,height:C||1});for(let j in l){let z=l[j],B=m[j].paddedRect;qu.copy(z.data,N,{x:0,y:0},{x:B.x+yl,y:B.y+yl},z.data)}for(let j in f){let z=f[j],B=_[j].paddedRect,Y=B.x+yl,K=B.y+yl,te=z.data.width,oe=z.data.height;qu.copy(z.data,N,{x:0,y:0},{x:Y,y:K},z.data),qu.copy(z.data,N,{x:0,y:oe-1},{x:Y,y:K-1},{width:te,height:1}),qu.copy(z.data,N,{x:0,y:0},{x:Y,y:K+oe},{width:te,height:1}),qu.copy(z.data,N,{x:te-1,y:0},{x:Y-1,y:K},{width:1,height:oe}),qu.copy(z.data,N,{x:0,y:0},{x:Y+te,y:K},{width:1,height:oe})}this.image=N,this.iconPositions=m,this.patternPositions=_}addImages(l,f,m){for(let _ in l){let S=l[_],I={x:0,y:0,w:S.data.width+2*yl,h:S.data.height+2*yl};m.push(I),f[_]=new QF(I,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(l,f){l.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let m in l.updatedImages)this.patchUpdatedImage(this.iconPositions[m],l.getImage(m),f),this.patchUpdatedImage(this.patternPositions[m],l.getImage(m),f)}patchUpdatedImage(l,f,m){if(!l||!f||l.version===f.version)return;l.version=f.version;let[_,S]=l.tl;m.update(f.data,void 0,{x:_,y:S})}}var Qm;or("ImagePosition",QF),or("ImageAtlas",$se),o.ah=void 0,(Qm=o.ah||(o.ah={}))[Qm.none=0]="none",Qm[Qm.horizontal=1]="horizontal",Qm[Qm.vertical=2]="vertical",Qm[Qm.horizontalOnly=3]="horizontalOnly";let XS=-17;class JS{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(l,f){let m=new JS;return m.scale=l||1,m.fontStack=f,m}static forImage(l){let f=new JS;return f.imageName=l,f}}class R_{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(l,f){let m=new R_;for(let _=0;_<l.sections.length;_++){let S=l.sections[_];S.image?m.addImageSection(S):m.addTextSection(S,f)}return m}length(){return this.text.length}getSection(l){return this.sections[this.sectionIndex[l]]}getSectionIndex(l){return this.sectionIndex[l]}getCharCode(l){return this.text.charCodeAt(l)}verticalizePunctuation(){this.text=function(l){let f="";for(let m=0;m<l.length;m++){let _=l.charCodeAt(m+1)||null,S=l.charCodeAt(m-1)||null;f+=_&&_4(_)&&!KS[l[m+1]]||S&&_4(S)&&!KS[l[m-1]]||!KS[l[m]]?l[m]:KS[l[m]]}return f}(this.text)}trim(){let l=0;for(let m=0;m<this.text.length&&k4[this.text.charCodeAt(m)];m++)l++;let f=this.text.length;for(let m=this.text.length-1;m>=0&&m>=l&&k4[this.text.charCodeAt(m)];m--)f--;this.text=this.text.substring(l,f),this.sectionIndex=this.sectionIndex.slice(l,f)}substring(l,f){let m=new R_;return m.text=this.text.substring(l,f),m.sectionIndex=this.sectionIndex.slice(l,f),m.sections=this.sections,m}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((l,f)=>Math.max(l,this.sections[f].scale),0)}addTextSection(l,f){this.text+=l.text,this.sections.push(JS.forText(l.scale,l.fontStack||f));let m=this.sections.length-1;for(let _=0;_<l.text.length;++_)this.sectionIndex.push(m)}addImageSection(l){let f=l.image?l.image.name:"";if(f.length===0)return void Re("Can't add FormattedSection with an empty image.");let m=this.getNextImageSectionCharCode();m?(this.text+=String.fromCharCode(m),this.sections.push(JS.forImage(f)),this.sectionIndex.push(this.sections.length-1)):Re("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function P4(c,l,f,m,_,S,I,C,N,j,z,B,Y,K,te){let oe=R_.fromFeature(c,_),he;B===o.ah.vertical&&oe.verticalizePunctuation();let{processBidirectionalText:ve,processStyledBidirectionalText:$e}=gl;if(ve&&oe.sections.length===1){he=[];let rt=ve(oe.toString(),e9(oe,j,S,l,m,K));for(let bt of rt){let Qt=new R_;Qt.text=bt,Qt.sections=oe.sections;for(let Ir=0;Ir<bt.length;Ir++)Qt.sectionIndex.push(0);he.push(Qt)}}else if($e){he=[];let rt=$e(oe.text,oe.sectionIndex,e9(oe,j,S,l,m,K));for(let bt of rt){let Qt=new R_;Qt.text=bt[0],Qt.sectionIndex=bt[1],Qt.sections=oe.sections,he.push(Qt)}}else he=function(rt,bt){let Qt=[],Ir=rt.text,Kt=0;for(let Ut of bt)Qt.push(rt.substring(Kt,Ut)),Kt=Ut;return Kt<Ir.length&&Qt.push(rt.substring(Kt,Ir.length)),Qt}(oe,e9(oe,j,S,l,m,K));let Ce=[],He={positionedLines:Ce,text:oe.toString(),top:z[1],bottom:z[1],left:z[0],right:z[0],writingMode:B,iconsInText:!1,verticalizable:!1};return function(rt,bt,Qt,Ir,Kt,Ut,dr,sr,rr,ut,gr,pr){let Pr=0,mo=XS,co=0,ta=0,dc=sr==="right"?1:sr==="left"?0:.5,Oa=0;for(let gi of Kt){gi.trim();let na=gi.getMaxScale(),ts=(na-1)*Ui,La={positionedGlyphs:[],lineOffset:0};rt.positionedLines[Oa]=La;let Rs=La.positionedGlyphs,Pa=0;if(!gi.length()){mo+=Ut,++Oa;continue}for(let _l=0;_l<gi.length();_l++){let qn=gi.getSection(_l),_o=gi.getSectionIndex(_l),Po=gi.getCharCode(_l),Yl=0,ai=null,F_=null,Ep=null,Sp=Ui,hc=!(rr===o.ah.horizontal||!gr&&!jS(Po)||gr&&(k4[Po]||(ra=Po,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(ra)))));if(qn.imageName){let Uu=Ir[qn.imageName];if(!Uu)continue;Ep=qn.imageName,rt.iconsInText=rt.iconsInText||!0,F_=Uu.paddedRect;let ga=Uu.displaySize;qn.scale=qn.scale*Ui/pr,ai={width:ga[0],height:ga[1],left:yl,top:-Hse,advance:hc?ga[1]:ga[0]},Yl=ts+(Ui-ga[1]*qn.scale),Sp=ai.advance;let nh=hc?ga[0]*qn.scale-Ui*na:ga[1]*qn.scale-Ui*na;nh>0&&nh>Pa&&(Pa=nh)}else{let Uu=Qt[qn.fontStack],ga=Uu&&Uu[Po];if(ga&&ga.rect)F_=ga.rect,ai=ga.metrics;else{let nh=bt[qn.fontStack],o2=nh&&nh[Po];if(!o2)continue;ai=o2.metrics}Yl=(na-qn.scale)*Ui}hc?(rt.verticalizable=!0,Rs.push({glyph:Po,imageName:Ep,x:Pr,y:mo+Yl,vertical:hc,scale:qn.scale,fontStack:qn.fontStack,sectionIndex:_o,metrics:ai,rect:F_}),Pr+=Sp*qn.scale+ut):(Rs.push({glyph:Po,imageName:Ep,x:Pr,y:mo+Yl,vertical:hc,scale:qn.scale,fontStack:qn.fontStack,sectionIndex:_o,metrics:ai,rect:F_}),Pr+=ai.advance*qn.scale+ut)}Rs.length!==0&&(co=Math.max(Pr-ut,co),olt(Rs,0,Rs.length-1,dc,Pa)),Pr=0;let Fu=Ut*na+Pa;La.lineOffset=Math.max(Pa,ts),mo+=Fu,ta=Math.max(Fu,ta),++Oa}var ra;let Ls=mo-XS,{horizontalAlign:Ps,verticalAlign:ks}=t9(dr);(function(gi,na,ts,La,Rs,Pa,Fu,_l,qn){let _o=(na-ts)*Rs,Po=0;Po=Pa!==Fu?-_l*La-XS:(-La*qn+.5)*Fu;for(let Yl of gi)for(let ai of Yl.positionedGlyphs)ai.x+=_o,ai.y+=Po})(rt.positionedLines,dc,Ps,ks,co,ta,Ut,Ls,Kt.length),rt.top+=-ks*Ls,rt.bottom=rt.top+Ls,rt.left+=-Ps*co,rt.right=rt.left+co}(He,l,f,m,he,I,C,N,B,j,Y,te),!function(rt){for(let bt of rt)if(bt.positionedGlyphs.length!==0)return!1;return!0}(Ce)&&He}let k4={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tlt={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},rlt={40:!0};function Yse(c,l,f,m,_,S){if(l.imageName){let I=m[l.imageName];return I?I.displaySize[0]*l.scale*Ui/S+_:0}{let I=f[l.fontStack],C=I&&I[c];return C?C.metrics.advance*l.scale+_:0}}function Zse(c,l,f,m){let _=Math.pow(c-l,2);return m?c<l?_/2:2*_:_+Math.abs(f)*f}function nlt(c,l,f){let m=0;return c===10&&(m-=1e4),f&&(m+=150),c!==40&&c!==65288||(m+=50),l!==41&&l!==65289||(m+=50),m}function Kse(c,l,f,m,_,S){let I=null,C=Zse(l,f,_,S);for(let N of m){let j=Zse(l-N.x,f,_,S)+N.badness;j<=C&&(I=N,C=j)}return{index:c,x:l,priorBreak:I,badness:C}}function Xse(c){return c?Xse(c.priorBreak).concat(c.index):[]}function e9(c,l,f,m,_,S){if(!c)return[];let I=[],C=function(B,Y,K,te,oe,he){let ve=0;for(let $e=0;$e<B.length();$e++){let Ce=B.getSection($e);ve+=Yse(B.getCharCode($e),Ce,te,oe,Y,he)}return ve/Math.max(1,Math.ceil(ve/K))}(c,l,f,m,_,S),N=c.text.indexOf("\u200B")>=0,j=0;for(let B=0;B<c.length();B++){let Y=c.getSection(B),K=c.getCharCode(B);if(k4[K]||(j+=Yse(K,Y,m,_,l,S)),B<c.length()-1){let te=!((z=K)<11904)&&(!!bn["CJK Compatibility Forms"](z)||!!bn["CJK Compatibility"](z)||!!bn["CJK Strokes"](z)||!!bn["CJK Symbols and Punctuation"](z)||!!bn["Enclosed CJK Letters and Months"](z)||!!bn["Halfwidth and Fullwidth Forms"](z)||!!bn["Ideographic Description Characters"](z)||!!bn["Vertical Forms"](z)||y4.test(String.fromCodePoint(z)));(tlt[K]||te||Y.imageName||B!==c.length()-2&&rlt[c.getCharCode(B+1)])&&I.push(Kse(B+1,j,C,I,nlt(K,c.getCharCode(B+1),te&&N),!1))}}var z;return Xse(Kse(c.length(),j,C,I,0,!0))}function t9(c){let l=.5,f=.5;switch(c){case"right":case"top-right":case"bottom-right":l=1;break;case"left":case"top-left":case"bottom-left":l=0;}switch(c){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0;}return{horizontalAlign:l,verticalAlign:f}}function olt(c,l,f,m,_){if(!m&&!_)return;let S=c[f],I=(c[f].x+S.metrics.advance*S.scale)*m;for(let C=l;C<=f;C++)c[C].x-=I,c[C].y+=_}function ilt(c,l,f){let{horizontalAlign:m,verticalAlign:_}=t9(f),S=l[0]-c.displaySize[0]*m,I=l[1]-c.displaySize[1]*_;return{image:c,top:I,bottom:I+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function Jse(c){var l,f;let m=c.left,_=c.top,S=c.right-m,I=c.bottom-_,C=(l=c.image.textFitWidth)!==null&&l!==void 0?l:"stretchOrShrink",N=(f=c.image.textFitHeight)!==null&&f!==void 0?f:"stretchOrShrink",j=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(N==="proportional"){if(C==="stretchOnly"&&S/I<j||C==="proportional"){let z=Math.ceil(I*j);m*=z/S,S=z}}else if(C==="proportional"&&N==="stretchOnly"&&j!==0&&S/I>j){let z=Math.ceil(S/j);_*=z/I,I=z}return{x1:m,y1:_,x2:m+S,y2:_+I}}function Qse(c,l,f,m,_,S){let I=c.image,C;if(I.content){let he=I.content,ve=I.pixelRatio||1;C=[he[0]/ve,he[1]/ve,I.displaySize[0]-he[2]/ve,I.displaySize[1]-he[3]/ve]}let N=l.left*S,j=l.right*S,z,B,Y,K;f==="width"||f==="both"?(K=_[0]+N-m[3],B=_[0]+j+m[1]):(K=_[0]+(N+j-I.displaySize[0])/2,B=K+I.displaySize[0]);let te=l.top*S,oe=l.bottom*S;return f==="height"||f==="both"?(z=_[1]+te-m[0],Y=_[1]+oe+m[2]):(z=_[1]+(te+oe-I.displaySize[1])/2,Y=z+I.displaySize[1]),{image:I,top:z,right:B,bottom:Y,left:K,collisionPadding:C}}let QS=255,wp=128,eg=QS*wp;function ele(c,l){let{expression:f}=l;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new Do(c+1))};if(f.kind==="source")return{kind:"source"};{let{zoomStops:m,interpolationType:_}=f,S=0;for(;S<m.length&&m[S]<=c;)S++;S=Math.max(0,S-1);let I=S;for(;I<m.length&&m[I]<c+1;)I++;I=Math.min(m.length-1,I);let C=m[S],N=m[I];return f.kind==="composite"?{kind:"composite",minZoom:C,maxZoom:N,interpolationType:_}:{kind:"camera",minZoom:C,maxZoom:N,minSize:f.evaluate(new Do(C)),maxSize:f.evaluate(new Do(N)),interpolationType:_}}}function r9(c,l,f){let m="never",_=c.get(l);return _?m=_:c.get(f)&&(m="always"),m}let alt=Jm.VectorTileFeature.types,slt=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function R4(c,l,f,m,_,S,I,C,N,j,z,B,Y){let K=C?Math.min(eg,Math.round(C[0])):0,te=C?Math.min(eg,Math.round(C[1])):0;c.emplaceBack(l,f,Math.round(32*m),Math.round(32*_),S,I,(K<<1)+(N?1:0),te,16*j,16*z,256*B,256*Y)}function n9(c,l,f){c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f),c.emplaceBack(l.x,l.y,f)}function llt(c){for(let l of c.sections)if(NF(l.text))return!0;return!1}class o9{constructor(l){this.layoutVertexArray=new I_,this.indexArray=new ju,this.programConfigurations=l,this.segments=new wn,this.dynamicLayoutVertexArray=new FS,this.opacityVertexArray=new Wl,this.hasVisibleVertices=!1,this.placedSymbolArray=new No}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(l,f,m,_){this.isEmpty()||(m&&(this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,qst.members),this.indexBuffer=l.createIndexBuffer(this.indexArray,f),this.dynamicLayoutVertexBuffer=l.createVertexBuffer(this.dynamicLayoutVertexArray,zst.members,!0),this.opacityVertexBuffer=l.createVertexBuffer(this.opacityVertexArray,slt,!0),this.opacityVertexBuffer.itemSize=1),(m||_)&&this.programConfigurations.upload(l))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}or("SymbolBuffers",o9);class i9{constructor(l,f,m){this.layoutVertexArray=new l,this.layoutAttributes=f,this.indexArray=new m,this.segments=new wn,this.collisionVertexArray=new xp}upload(l){this.layoutVertexBuffer=l.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=l.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=l.createVertexBuffer(this.collisionVertexArray,Fst.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}or("CollisionBuffers",i9);class j_{constructor(l){this.collisionBoxArray=l.collisionBoxArray,this.zoom=l.zoom,this.overscaling=l.overscaling,this.layers=l.layers,this.layerIds=this.layers.map(I=>I.id),this.index=l.index,this.pixelRatio=l.pixelRatio,this.sourceLayerIndex=l.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=qF([]),this.placementViewportMatrix=qF([]);let f=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ele(this.zoom,f["text-size"]),this.iconSizeData=ele(this.zoom,f["icon-size"]);let m=this.layers[0].layout,_=m.get("symbol-sort-key"),S=m.get("symbol-z-order");this.canOverlap=r9(m,"text-overlap","text-allow-overlap")!=="never"||r9(m,"icon-overlap","icon-allow-overlap")!=="never"||m.get("text-ignore-placement")||m.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,m.get("symbol-placement")==="point"&&(this.writingModes=m.get("text-writing-mode").map(I=>o.ah[I])),this.stateDependentLayerIds=this.layers.filter(I=>I.isStateDependent()).map(I=>I.id),this.sourceID=l.sourceID}createArrays(){this.text=new o9(new Dy(this.layers,this.zoom,l=>/^text/.test(l))),this.icon=new o9(new Dy(this.layers,this.zoom,l=>/^icon/.test(l))),this.glyphOffsetArray=new Oo,this.lineVertexArray=new Ca,this.symbolInstances=new yn,this.textAnchorOffsets=new Lo}calculateGlyphDependencies(l,f,m,_,S){for(let I=0;I<l.length;I++)if(f[l.charCodeAt(I)]=!0,(m||_)&&S){let C=KS[l.charAt(I)];C&&(f[C.charCodeAt(0)]=!0)}}populate(l,f,m){let _=this.layers[0],S=_.layout,I=S.get("text-font"),C=S.get("text-field"),N=S.get("icon-image"),j=(C.value.kind!=="constant"||C.value.value instanceof pl&&!C.value.value.isEmpty()||C.value.value.toString().length>0)&&(I.value.kind!=="constant"||I.value.value.length>0),z=N.value.kind!=="constant"||!!N.value.value||Object.keys(N.parameters).length>0,B=S.get("symbol-sort-key");if(this.features=[],!j&&!z)return;let Y=f.iconDependencies,K=f.glyphDependencies,te=f.availableImages,oe=new Do(this.zoom);for(let{feature:he,id:ve,index:$e,sourceLayerIndex:Ce}of l){let He=_._featureFilter.needGeometry,rt=Oy(he,He);if(!_._featureFilter.filter(oe,rt,m))continue;let bt,Qt;if(He||(rt.geometry=Ny(he)),j){let Kt=_.getValueAndResolveTokens("text-field",rt,m,te),Ut=pl.factory(Kt),dr=this.hasRTLText=this.hasRTLText||llt(Ut);(!dr||gl.getRTLTextPluginStatus()==="unavailable"||dr&&gl.isParsed())&&(bt=Bst(Ut,_,rt))}if(z){let Kt=_.getValueAndResolveTokens("icon-image",rt,m,te);Qt=Kt instanceof hl?Kt:hl.fromString(Kt)}if(!bt&&!Qt)continue;let Ir=this.sortFeaturesByKey?B.evaluate(rt,{},m):void 0;if(this.features.push({id:ve,text:bt,icon:Qt,index:$e,sourceLayerIndex:Ce,geometry:rt.geometry,properties:he.properties,type:alt[he.type],sortKey:Ir}),Qt&&(Y[Qt.name]=!0),bt){let Kt=I.evaluate(rt,{},m).join(","),Ut=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(o.ah.vertical)>=0;for(let dr of bt.sections)if(dr.image)Y[dr.image.name]=!0;else{let sr=kS(bt.toString()),rr=dr.fontStack||Kt,ut=K[rr]=K[rr]||{};this.calculateGlyphDependencies(dr.text,ut,Ut,this.allowVerticalPlacement,sr)}}}S.get("symbol-placement")==="line"&&(this.features=function(he){let ve={},$e={},Ce=[],He=0;function rt(Kt){Ce.push(he[Kt]),He++}function bt(Kt,Ut,dr){let sr=$e[Kt];return delete $e[Kt],$e[Ut]=sr,Ce[sr].geometry[0].pop(),Ce[sr].geometry[0]=Ce[sr].geometry[0].concat(dr[0]),sr}function Qt(Kt,Ut,dr){let sr=ve[Ut];return delete ve[Ut],ve[Kt]=sr,Ce[sr].geometry[0].shift(),Ce[sr].geometry[0]=dr[0].concat(Ce[sr].geometry[0]),sr}function Ir(Kt,Ut,dr){let sr=dr?Ut[0][Ut[0].length-1]:Ut[0][0];return`${Kt}:${sr.x}:${sr.y}`}for(let Kt=0;Kt<he.length;Kt++){let Ut=he[Kt],dr=Ut.geometry,sr=Ut.text?Ut.text.toString():null;if(!sr){rt(Kt);continue}let rr=Ir(sr,dr),ut=Ir(sr,dr,!0);if(rr in $e&&ut in ve&&$e[rr]!==ve[ut]){let gr=Qt(rr,ut,dr),pr=bt(rr,ut,Ce[gr].geometry);delete ve[rr],delete $e[ut],$e[Ir(sr,Ce[pr].geometry,!0)]=pr,Ce[gr].geometry=null}else rr in $e?bt(rr,ut,dr):ut in ve?Qt(rr,ut,dr):(rt(Kt),ve[rr]=He-1,$e[ut]=He-1)}return Ce.filter(Kt=>Kt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((he,ve)=>he.sortKey-ve.sortKey)}update(l,f,m){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(l,f,this.layers,m),this.icon.programConfigurations.updatePaintArrays(l,f,this.layers,m))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(l){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(l),this.iconCollisionBox.upload(l)),this.text.upload(l,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(l,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(l,f){let m=this.lineVertexArray.length;if(l.segment!==void 0){let _=l.dist(f[l.segment+1]),S=l.dist(f[l.segment]),I={};for(let C=l.segment+1;C<f.length;C++)I[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:_},C<f.length-1&&(_+=f[C+1].dist(f[C]));for(let C=l.segment||0;C>=0;C--)I[C]={x:f[C].x,y:f[C].y,tileUnitDistanceFromAnchor:S},C>0&&(S+=f[C-1].dist(f[C]));for(let C=0;C<f.length;C++){let N=I[C];this.lineVertexArray.emplaceBack(N.x,N.y,N.tileUnitDistanceFromAnchor)}}return{lineStartIndex:m,lineLength:this.lineVertexArray.length-m}}addSymbols(l,f,m,_,S,I,C,N,j,z,B,Y){let K=l.indexArray,te=l.layoutVertexArray,oe=l.segments.prepareSegment(4*f.length,te,K,this.canOverlap?I.sortKey:void 0),he=this.glyphOffsetArray.length,ve=oe.vertexLength,$e=this.allowVerticalPlacement&&C===o.ah.vertical?Math.PI/2:0,Ce=I.text&&I.text.sections;for(let He=0;He<f.length;He++){let{tl:rt,tr:bt,bl:Qt,br:Ir,tex:Kt,pixelOffsetTL:Ut,pixelOffsetBR:dr,minFontScaleX:sr,minFontScaleY:rr,glyphOffset:ut,isSDF:gr,sectionIndex:pr}=f[He],Pr=oe.vertexLength,mo=ut[1];R4(te,N.x,N.y,rt.x,mo+rt.y,Kt.x,Kt.y,m,gr,Ut.x,Ut.y,sr,rr),R4(te,N.x,N.y,bt.x,mo+bt.y,Kt.x+Kt.w,Kt.y,m,gr,dr.x,Ut.y,sr,rr),R4(te,N.x,N.y,Qt.x,mo+Qt.y,Kt.x,Kt.y+Kt.h,m,gr,Ut.x,dr.y,sr,rr),R4(te,N.x,N.y,Ir.x,mo+Ir.y,Kt.x+Kt.w,Kt.y+Kt.h,m,gr,dr.x,dr.y,sr,rr),n9(l.dynamicLayoutVertexArray,N,$e),K.emplaceBack(Pr,Pr+1,Pr+2),K.emplaceBack(Pr+1,Pr+2,Pr+3),oe.vertexLength+=4,oe.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ut[0]),He!==f.length-1&&pr===f[He+1].sectionIndex||l.programConfigurations.populatePaintArrays(te.length,I,I.index,{},Y,Ce&&Ce[pr])}l.placedSymbolArray.emplaceBack(N.x,N.y,he,this.glyphOffsetArray.length-he,ve,j,z,N.segment,m?m[0]:0,m?m[1]:0,_[0],_[1],C,0,!1,0,B)}_addCollisionDebugVertex(l,f,m,_,S,I){return f.emplaceBack(0,0),l.emplaceBack(m.x,m.y,_,S,Math.round(I.x),Math.round(I.y))}addCollisionDebugVertices(l,f,m,_,S,I,C){let N=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),j=N.vertexLength,z=S.layoutVertexArray,B=S.collisionVertexArray,Y=C.anchorX,K=C.anchorY;this._addCollisionDebugVertex(z,B,I,Y,K,new h(l,f)),this._addCollisionDebugVertex(z,B,I,Y,K,new h(m,f)),this._addCollisionDebugVertex(z,B,I,Y,K,new h(m,_)),this._addCollisionDebugVertex(z,B,I,Y,K,new h(l,_)),N.vertexLength+=4;let te=S.indexArray;te.emplaceBack(j,j+1),te.emplaceBack(j+1,j+2),te.emplaceBack(j+2,j+3),te.emplaceBack(j+3,j),N.primitiveLength+=4}addDebugCollisionBoxes(l,f,m,_){for(let S=l;S<f;S++){let I=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(I.x1,I.y1,I.x2,I.y2,_?this.textCollisionBox:this.iconCollisionBox,I.anchorPoint,m)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new i9($l,jse.members,ma),this.iconCollisionBox=new i9($l,jse.members,ma);for(let l=0;l<this.symbolInstances.length;l++){let f=this.symbolInstances.get(l);this.addDebugCollisionBoxes(f.textBoxStartIndex,f.textBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f,!0),this.addDebugCollisionBoxes(f.iconBoxStartIndex,f.iconBoxEndIndex,f,!1),this.addDebugCollisionBoxes(f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex,f,!1)}}_deserializeCollisionBoxesForSymbol(l,f,m,_,S,I,C,N,j){let z={};for(let B=f;B<m;B++){let Y=l.get(B);z.textBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.textFeatureIndex=Y.featureIndex;break}for(let B=_;B<S;B++){let Y=l.get(B);z.verticalTextBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalTextFeatureIndex=Y.featureIndex;break}for(let B=I;B<C;B++){let Y=l.get(B);z.iconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.iconFeatureIndex=Y.featureIndex;break}for(let B=N;B<j;B++){let Y=l.get(B);z.verticalIconBox={x1:Y.x1,y1:Y.y1,x2:Y.x2,y2:Y.y2,anchorPointX:Y.anchorPointX,anchorPointY:Y.anchorPointY},z.verticalIconFeatureIndex=Y.featureIndex;break}return z}deserializeCollisionBoxes(l){this.collisionArrays=[];for(let f=0;f<this.symbolInstances.length;f++){let m=this.symbolInstances.get(f);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(l,m.textBoxStartIndex,m.textBoxEndIndex,m.verticalTextBoxStartIndex,m.verticalTextBoxEndIndex,m.iconBoxStartIndex,m.iconBoxEndIndex,m.verticalIconBoxStartIndex,m.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(l,f){let m=l.placedSymbolArray.get(f),_=m.vertexStartIndex+4*m.numGlyphs;for(let S=m.vertexStartIndex;S<_;S+=4)l.indexArray.emplaceBack(S,S+1,S+2),l.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(l){if(this.sortedAngle===l&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let f=Math.sin(l),m=Math.cos(l),_=[],S=[],I=[];for(let C=0;C<this.symbolInstances.length;++C){I.push(C);let N=this.symbolInstances.get(C);_.push(0|Math.round(f*N.anchorX+m*N.anchorY)),S.push(N.featureIndex)}return I.sort((C,N)=>_[C]-_[N]||S[N]-S[C]),I}addToSortKeyRanges(l,f){let m=this.sortKeyRanges[this.sortKeyRanges.length-1];m&&m.sortKey===f?m.symbolInstanceEnd=l+1:this.sortKeyRanges.push({sortKey:f,symbolInstanceStart:l,symbolInstanceEnd:l+1})}sortFeatures(l){if(this.sortFeaturesByY&&this.sortedAngle!==l&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(l),this.sortedAngle=l,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let f of this.symbolInstanceIndexes){let m=this.symbolInstances.get(f);this.featureSortOrder.push(m.featureIndex),[m.rightJustifiedTextSymbolIndex,m.centerJustifiedTextSymbolIndex,m.leftJustifiedTextSymbolIndex].forEach((_,S,I)=>{_>=0&&I.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),m.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,m.verticalPlacedTextSymbolIndex),m.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.placedIconSymbolIndex),m.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,m.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tle,rle;or("SymbolBucket",j_,{omit:["layers","collisionBoxArray","features","compareText"]}),j_.MAX_GLYPHS=65535,j_.addDynamicAttributes=n9;var a9={get paint(){return rle=rle||new E({"icon-opacity":new Ar(Ae.paint_symbol["icon-opacity"]),"icon-color":new Ar(Ae.paint_symbol["icon-color"]),"icon-halo-color":new Ar(Ae.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ar(Ae.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ar(Ae.paint_symbol["icon-halo-blur"]),"icon-translate":new cr(Ae.paint_symbol["icon-translate"]),"icon-translate-anchor":new cr(Ae.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ar(Ae.paint_symbol["text-opacity"]),"text-color":new Ar(Ae.paint_symbol["text-color"],{runtimeType:Qi,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new Ar(Ae.paint_symbol["text-halo-color"]),"text-halo-width":new Ar(Ae.paint_symbol["text-halo-width"]),"text-halo-blur":new Ar(Ae.paint_symbol["text-halo-blur"]),"text-translate":new cr(Ae.paint_symbol["text-translate"]),"text-translate-anchor":new cr(Ae.paint_symbol["text-translate-anchor"])})},get layout(){return tle=tle||new E({"symbol-placement":new cr(Ae.layout_symbol["symbol-placement"]),"symbol-spacing":new cr(Ae.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new cr(Ae.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ar(Ae.layout_symbol["symbol-sort-key"]),"symbol-z-order":new cr(Ae.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new cr(Ae.layout_symbol["icon-allow-overlap"]),"icon-overlap":new cr(Ae.layout_symbol["icon-overlap"]),"icon-ignore-placement":new cr(Ae.layout_symbol["icon-ignore-placement"]),"icon-optional":new cr(Ae.layout_symbol["icon-optional"]),"icon-rotation-alignment":new cr(Ae.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ar(Ae.layout_symbol["icon-size"]),"icon-text-fit":new cr(Ae.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new cr(Ae.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ar(Ae.layout_symbol["icon-image"]),"icon-rotate":new Ar(Ae.layout_symbol["icon-rotate"]),"icon-padding":new Ar(Ae.layout_symbol["icon-padding"]),"icon-keep-upright":new cr(Ae.layout_symbol["icon-keep-upright"]),"icon-offset":new Ar(Ae.layout_symbol["icon-offset"]),"icon-anchor":new Ar(Ae.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new cr(Ae.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new cr(Ae.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new cr(Ae.layout_symbol["text-rotation-alignment"]),"text-field":new Ar(Ae.layout_symbol["text-field"]),"text-font":new Ar(Ae.layout_symbol["text-font"]),"text-size":new Ar(Ae.layout_symbol["text-size"]),"text-max-width":new Ar(Ae.layout_symbol["text-max-width"]),"text-line-height":new cr(Ae.layout_symbol["text-line-height"]),"text-letter-spacing":new Ar(Ae.layout_symbol["text-letter-spacing"]),"text-justify":new Ar(Ae.layout_symbol["text-justify"]),"text-radial-offset":new Ar(Ae.layout_symbol["text-radial-offset"]),"text-variable-anchor":new cr(Ae.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Ar(Ae.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Ar(Ae.layout_symbol["text-anchor"]),"text-max-angle":new cr(Ae.layout_symbol["text-max-angle"]),"text-writing-mode":new cr(Ae.layout_symbol["text-writing-mode"]),"text-rotate":new Ar(Ae.layout_symbol["text-rotate"]),"text-padding":new cr(Ae.layout_symbol["text-padding"]),"text-keep-upright":new cr(Ae.layout_symbol["text-keep-upright"]),"text-transform":new Ar(Ae.layout_symbol["text-transform"]),"text-offset":new Ar(Ae.layout_symbol["text-offset"]),"text-allow-overlap":new cr(Ae.layout_symbol["text-allow-overlap"]),"text-overlap":new cr(Ae.layout_symbol["text-overlap"]),"text-ignore-placement":new cr(Ae.layout_symbol["text-ignore-placement"]),"text-optional":new cr(Ae.layout_symbol["text-optional"])})}};class nle{constructor(l){if(l.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=l.property.overrides?l.property.overrides.runtimeType:da,this.defaultValue=l}evaluate(l){if(l.formattedSection){let f=this.defaultValue.property.overrides;if(f&&f.hasOverride(l.formattedSection))return f.getOverride(l.formattedSection)}return l.feature&&l.featureState?this.defaultValue.evaluate(l.feature,l.featureState):this.defaultValue.property.specification.default}eachChild(l){this.defaultValue.isConstant()||l(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}or("FormatSectionOverride",nle,{omit:["defaultValue"]});class j4 extends d{constructor(l){super(l,a9)}recalculate(l,f){if(super.recalculate(l,f),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let m=this.layout.get("text-writing-mode");if(m){let _=[];for(let S of m)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(l,f,m,_){let S=this.layout.get(l).evaluate(f,{},m,_),I=this._unevaluatedLayout._values[l];return I.isDataDriven()||c_(I.value)||!S?S:function(C,N){return N.replace(/{([^{}]+)}/g,(j,z)=>C&&z in C?String(C[z]):"")}(f.properties,S)}createBucket(l){return new j_(l)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let l of a9.paint.overridableProperties){if(!j4.hasPaintOverride(this.layout,l))continue;let f=this.paint.get(l),m=new nle(f),_=new u_(m,f.property.specification),S=null;S=f.value.kind==="constant"||f.value.kind==="source"?new Rm("source",_):new jm("composite",_,f.value.zoomStops),this.paint._values[l]=new fc(f.property,S,f.parameters)}}_handleOverridablePaintPropertyUpdate(l,f,m){return!(!this.layout||f.isDataDriven()||m.isDataDriven())&&j4.hasPaintOverride(this.layout,l)}static hasPaintOverride(l,f){let m=l.get("text-field"),_=a9.paint.properties[f],S=!1,I=C=>{for(let N of C)if(_.overrides&&_.overrides.hasOverride(N))return void(S=!0)};if(m.value.kind==="constant"&&m.value.value instanceof pl)I(m.value.value.sections);else if(m.value.kind==="source"){let C=j=>{S||(j instanceof Nu&&Di(j.value)===wt?I(j.value.sections):j instanceof e_?I(j.sections):j.eachChild(C))},N=m.value;N._styleExpression&&C(N._styleExpression.expression)}return S}}let ole;var ult={get paint(){return ole=ole||new E({"background-color":new cr(Ae.paint_background["background-color"]),"background-pattern":new E_(Ae.paint_background["background-pattern"]),"background-opacity":new cr(Ae.paint_background["background-opacity"])})}};class clt extends d{constructor(l){super(l,ult)}}let ile;var flt={get paint(){return ile=ile||new E({"raster-opacity":new cr(Ae.paint_raster["raster-opacity"]),"raster-hue-rotate":new cr(Ae.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new cr(Ae.paint_raster["raster-brightness-min"]),"raster-brightness-max":new cr(Ae.paint_raster["raster-brightness-max"]),"raster-saturation":new cr(Ae.paint_raster["raster-saturation"]),"raster-contrast":new cr(Ae.paint_raster["raster-contrast"]),"raster-resampling":new cr(Ae.paint_raster["raster-resampling"]),"raster-fade-duration":new cr(Ae.paint_raster["raster-fade-duration"])})}};class plt extends d{constructor(l){super(l,flt)}}class dlt extends d{constructor(l){super(l,{}),this.onAdd=f=>{this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},this.onRemove=f=>{this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},this.implementation=l}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class hlt{constructor(l){this._methodToThrottle=l,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let s9=6371008.8;class tg{constructor(l,f){if(isNaN(l)||isNaN(f))throw new Error(`Invalid LngLat object: (${l}, ${f})`);if(this.lng=+l,this.lat=+f,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new tg(H(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(l){let f=Math.PI/180,m=this.lat*f,_=l.lat*f,S=Math.sin(m)*Math.sin(_)+Math.cos(m)*Math.cos(_)*Math.cos((l.lng-this.lng)*f);return s9*Math.acos(Math.min(S,1))}static convert(l){if(l instanceof tg)return l;if(Array.isArray(l)&&(l.length===2||l.length===3))return new tg(Number(l[0]),Number(l[1]));if(!Array.isArray(l)&&typeof l=="object"&&l!==null)return new tg(Number("lng"in l?l.lng:l.lon),Number(l.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let ale=2*Math.PI*s9;function sle(c){return ale*Math.cos(c*Math.PI/180)}function lle(c){return(180+c)/360}function ule(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function cle(c,l){return c/sle(l)}function l9(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}class e2{constructor(l,f,m=0){this.x=+l,this.y=+f,this.z=+m}static fromLngLat(l,f=0){let m=tg.convert(l);return new e2(lle(m.lng),ule(m.lat),cle(f,m.lat))}toLngLat(){return new tg(360*this.x-180,l9(this.y))}toAltitude(){return this.z*sle(l9(this.y))}meterInMercatorCoordinateUnits(){return 1/ale*(l=l9(this.y),1/Math.cos(l*Math.PI/180));var l}}function fle(c,l,f){var m=2*Math.PI*6378137/256/Math.pow(2,f);return[c*m-2*Math.PI*6378137/2,l*m-2*Math.PI*6378137/2]}class u9{constructor(l,f,m){if(!function(_,S,I){return!(_<0||_>25||I<0||I>=Math.pow(2,_)||S<0||S>=Math.pow(2,_))}(l,f,m))throw new Error(`x=${f}, y=${m}, z=${l} outside of bounds. 0<=x<${Math.pow(2,l)}, 0<=y<${Math.pow(2,l)} 0<=z<=25 `);this.z=l,this.x=f,this.y=m,this.key=t2(0,l,l,f,m)}equals(l){return this.z===l.z&&this.x===l.x&&this.y===l.y}url(l,f,m){let _=(I=this.y,C=this.z,N=fle(256*(S=this.x),256*(I=Math.pow(2,C)-I-1),C),j=fle(256*(S+1),256*(I+1),C),N[0]+","+N[1]+","+j[0]+","+j[1]);var S,I,C,N,j;let z=function(B,Y,K){let te,oe="";for(let he=B;he>0;he--)te=1<<he-1,oe+=(Y&te?1:0)+(K&te?2:0);return oe}(this.z,this.x,this.y);return l[(this.x+this.y)%l.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(m==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,f>1?"@2x":"").replace(/{quadkey}/g,z).replace(/{bbox-epsg-3857}/g,_)}isChildOf(l){let f=this.z-l.z;return f>0&&l.x===this.x>>f&&l.y===this.y>>f}getTilePoint(l){let f=Math.pow(2,this.z);return new h((l.x*f-this.x)*Ni,(l.y*f-this.y)*Ni)}toString(){return`${this.z}/${this.x}/${this.y}`}}class ple{constructor(l,f){this.wrap=l,this.canonical=f,this.key=t2(l,f.z,f.z,f.x,f.y)}}class zu{constructor(l,f,m,_,S){if(l<m)throw new Error(`overscaledZ should be >= z; overscaledZ = ${l}; z = ${m}`);this.overscaledZ=l,this.wrap=f,this.canonical=new u9(m,+_,+S),this.key=t2(f,l,m,_,S)}clone(){return new zu(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(l){return this.overscaledZ===l.overscaledZ&&this.wrap===l.wrap&&this.canonical.equals(l.canonical)}scaledTo(l){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let f=this.canonical.z-l;return l>this.canonical.z?new zu(l,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new zu(l,this.wrap,l,this.canonical.x>>f,this.canonical.y>>f)}calculateScaledKey(l,f){if(l>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${l}; overscaledZ = ${this.overscaledZ}`);let m=this.canonical.z-l;return l>this.canonical.z?t2(this.wrap*+f,l,this.canonical.z,this.canonical.x,this.canonical.y):t2(this.wrap*+f,l,l,this.canonical.x>>m,this.canonical.y>>m)}isChildOf(l){if(l.wrap!==this.wrap)return!1;let f=this.canonical.z-l.canonical.z;return l.overscaledZ===0||l.overscaledZ<this.overscaledZ&&l.canonical.x===this.canonical.x>>f&&l.canonical.y===this.canonical.y>>f}children(l){if(this.overscaledZ>=l)return[new zu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let f=this.canonical.z+1,m=2*this.canonical.x,_=2*this.canonical.y;return[new zu(f,this.wrap,f,m,_),new zu(f,this.wrap,f,m+1,_),new zu(f,this.wrap,f,m,_+1),new zu(f,this.wrap,f,m+1,_+1)]}isLessThan(l){return this.wrap<l.wrap||!(this.wrap>l.wrap)&&(this.overscaledZ<l.overscaledZ||!(this.overscaledZ>l.overscaledZ)&&(this.canonical.x<l.canonical.x||!(this.canonical.x>l.canonical.x)&&this.canonical.y<l.canonical.y))}wrapped(){return new zu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(l){return new zu(this.overscaledZ,l,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new ple(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(l){return this.canonical.getTilePoint(new e2(l.x-this.wrap,l.y))}}function t2(c,l,f,m,_){(c*=2)<0&&(c=-1*c-1);let S=1<<f;return(S*S*c+S*_+m).toString(36)+f.toString(36)+l.toString(36)}or("CanonicalTileID",u9),or("OverscaledTileID",zu,{omit:["posMatrix"]});class dle{constructor(l,f,m,_=1,S=1,I=1,C=0){if(this.uid=l,f.height!==f.width)throw new RangeError("DEM tiles must be square");if(m&&!["mapbox","terrarium","custom"].includes(m))return void Re(`"${m}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=f.height;let N=this.dim=f.height-2;switch(this.data=new Uint32Array(f.data.buffer),m){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=I,this.baseShift=C;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let j=0;j<N;j++)this.data[this._idx(-1,j)]=this.data[this._idx(0,j)],this.data[this._idx(N,j)]=this.data[this._idx(N-1,j)],this.data[this._idx(j,-1)]=this.data[this._idx(j,0)],this.data[this._idx(j,N)]=this.data[this._idx(j,N-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(N,-1)]=this.data[this._idx(N-1,0)],this.data[this._idx(-1,N)]=this.data[this._idx(0,N-1)],this.data[this._idx(N,N)]=this.data[this._idx(N-1,N-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let j=0;j<N;j++)for(let z=0;z<N;z++){let B=this.get(j,z);B>this.max&&(this.max=B),B<this.min&&(this.min=B)}}get(l,f){let m=new Uint8Array(this.data.buffer),_=4*this._idx(l,f);return this.unpack(m[_],m[_+1],m[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(l,f){if(l<-1||l>=this.dim+1||f<-1||f>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(f+1)*this.stride+(l+1)}unpack(l,f,m){return l*this.redFactor+f*this.greenFactor+m*this.blueFactor-this.baseShift}getPixels(){return new qu({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(l,f,m){if(this.dim!==l.dim)throw new Error("dem dimension mismatch");let _=f*this.dim,S=f*this.dim+this.dim,I=m*this.dim,C=m*this.dim+this.dim;switch(f){case-1:_=S-1;break;case 1:S=_+1;}switch(m){case-1:I=C-1;break;case 1:C=I+1;}let N=-f*this.dim,j=-m*this.dim;for(let z=I;z<C;z++)for(let B=_;B<S;B++)this.data[this._idx(B,z)]=l.data[this._idx(B+N,z+j)]}}or("DEMData",dle);class hle{constructor(l){this._stringToNumber={},this._numberToString=[];for(let f=0;f<l.length;f++){let m=l[f];this._stringToNumber[m]=f,this._numberToString[f]=m}}encode(l){return this._stringToNumber[l]}decode(l){if(l>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${l} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[l]}}class mle{constructor(l,f,m,_,S){this.type="Feature",this._vectorTileFeature=l,l._z=f,l._x=m,l._y=_,this.properties=l.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(l){this._geometry=l}toJSON(){let l={geometry:this.geometry};for(let f in this)f!=="_geometry"&&f!=="_vectorTileFeature"&&(l[f]=this[f]);return l}}class gle{constructor(l,f){this.tileID=l,this.x=l.canonical.x,this.y=l.canonical.y,this.z=l.canonical.z,this.grid=new Um(Ni,16,0),this.grid3D=new Um(Ni,16,0),this.featureIndexArray=new Qa,this.promoteId=f}insert(l,f,m,_,S,I){let C=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(m,_,S);let N=I?this.grid3D:this.grid;for(let j=0;j<f.length;j++){let z=f[j],B=[1/0,1/0,-1/0,-1/0];for(let Y=0;Y<z.length;Y++){let K=z[Y];B[0]=Math.min(B[0],K.x),B[1]=Math.min(B[1],K.y),B[2]=Math.max(B[2],K.x),B[3]=Math.max(B[3],K.y)}B[0]<Ni&&B[1]<Ni&&B[2]>=0&&B[3]>=0&&N.insert(C,B[0],B[1],B[2],B[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Jm.VectorTile(new XF(this.rawTileData)).layers,this.sourceLayerCoder=new hle(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(l,f,m,_){this.loadVTLayers();let S=l.params||{},I=Ni/l.tileSize/l.scale,C=xS(S.filter),N=l.queryGeometry,j=l.queryPadding*I,z=yle(N),B=this.grid.query(z.minX-j,z.minY-j,z.maxX+j,z.maxY+j),Y=yle(l.cameraQueryGeometry),K=this.grid3D.query(Y.minX-j,Y.minY-j,Y.maxX+j,Y.maxY+j,(he,ve,$e,Ce)=>function(He,rt,bt,Qt,Ir){for(let Ut of He)if(rt<=Ut.x&&bt<=Ut.y&&Qt>=Ut.x&&Ir>=Ut.y)return!0;let Kt=[new h(rt,bt),new h(rt,Ir),new h(Qt,Ir),new h(Qt,bt)];if(He.length>2){for(let Ut of Kt)if(D_(He,Ut))return!0}for(let Ut=0;Ut<He.length-1;Ut++)if(Yat(He[Ut],He[Ut+1],Kt))return!0;return!1}(l.cameraQueryGeometry,he-j,ve-j,$e+j,Ce+j));for(let he of K)B.push(he);B.sort(mlt);let te={},oe;for(let he=0;he<B.length;he++){let ve=B[he];if(ve===oe)continue;oe=ve;let $e=this.featureIndexArray.get(ve),Ce=null;this.loadMatchingFeature(te,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,C,S.layers,S.availableImages,f,m,_,(He,rt,bt)=>(Ce||(Ce=Ny(He)),rt.queryIntersectsFeature(N,He,bt,Ce,this.z,l.transform,I,l.pixelPosMatrix)))}return te}loadMatchingFeature(l,f,m,_,S,I,C,N,j,z,B){let Y=this.bucketLayerIDs[f];if(I&&!function(he,ve){for(let $e=0;$e<he.length;$e++)if(ve.indexOf(he[$e])>=0)return!0;return!1}(I,Y))return;let K=this.sourceLayerCoder.decode(m),te=this.vtLayers[K].feature(_);if(S.needGeometry){let he=Oy(te,!0);if(!S.filter(new Do(this.tileID.overscaledZ),he,this.tileID.canonical))return}else if(!S.filter(new Do(this.tileID.overscaledZ),te))return;let oe=this.getId(te,K);for(let he=0;he<Y.length;he++){let ve=Y[he];if(I&&I.indexOf(ve)<0)continue;let $e=N[ve];if(!$e)continue;let Ce={};oe&&z&&(Ce=z.getState($e.sourceLayer||"_geojsonTileLayer",oe));let He=X({},j[ve]);He.paint=vle(He.paint,$e.paint,te,Ce,C),He.layout=vle(He.layout,$e.layout,te,Ce,C);let rt=!B||B(te,$e,Ce);if(!rt)continue;let bt=new mle(te,this.z,this.x,this.y,oe);bt.layer=He;let Qt=l[ve];Qt===void 0&&(Qt=l[ve]=[]),Qt.push({featureIndex:_,feature:bt,intersectionZ:rt})}}lookupSymbolFeatures(l,f,m,_,S,I,C,N){let j={};this.loadVTLayers();let z=xS(S);for(let B of l)this.loadMatchingFeature(j,m,_,B,z,I,C,N,f);return j}hasLayer(l){for(let f of this.bucketLayerIDs)for(let m of f)if(l===m)return!0;return!1}getId(l,f){let m=l.id;return this.promoteId&&(m=l.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[f]],typeof m=="boolean"&&(m=Number(m))),m}}function vle(c,l,f,m,_){return ne(c,(S,I)=>{let C=l instanceof My?l.get(I):null;return C&&C.evaluate?C.evaluate(f,m,_):C})}function yle(c){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let S of c)l=Math.min(l,S.x),f=Math.min(f,S.y),m=Math.max(m,S.x),_=Math.max(_,S.y);return{minX:l,minY:f,maxX:m,maxY:_}}function mlt(c,l){return l-c}function _le(c,l,f,m,_){let S=[];for(let I=0;I<c.length;I++){let C=c[I],N;for(let j=0;j<C.length-1;j++){let z=C[j],B=C[j+1];z.x<l&&B.x<l||(z.x<l?z=new h(l,z.y+(l-z.x)/(B.x-z.x)*(B.y-z.y))._round():B.x<l&&(B=new h(l,z.y+(l-z.x)/(B.x-z.x)*(B.y-z.y))._round()),z.y<f&&B.y<f||(z.y<f?z=new h(z.x+(f-z.y)/(B.y-z.y)*(B.x-z.x),f)._round():B.y<f&&(B=new h(z.x+(f-z.y)/(B.y-z.y)*(B.x-z.x),f)._round()),z.x>=m&&B.x>=m||(z.x>=m?z=new h(m,z.y+(m-z.x)/(B.x-z.x)*(B.y-z.y))._round():B.x>=m&&(B=new h(m,z.y+(m-z.x)/(B.x-z.x)*(B.y-z.y))._round()),z.y>=_&&B.y>=_||(z.y>=_?z=new h(z.x+(_-z.y)/(B.y-z.y)*(B.x-z.x),_)._round():B.y>=_&&(B=new h(z.x+(_-z.y)/(B.y-z.y)*(B.x-z.x),_)._round()),N&&z.equals(N[N.length-1])||(N=[z],S.push(N)),N.push(B)))))}}return S}or("FeatureIndex",gle,{omit:["rawTileData","sourceLayerCoder"]});class rg extends h{constructor(l,f,m,_){super(l,f),this.angle=m,_!==void 0&&(this.segment=_)}clone(){return new rg(this.x,this.y,this.angle,this.segment)}}function xle(c,l,f,m,_){if(l.segment===void 0||f===0)return!0;let S=l,I=l.segment+1,C=0;for(;C>-f/2;){if(I--,I<0)return!1;C-=c[I].dist(S),S=c[I]}C+=c[I].dist(c[I+1]),I++;let N=[],j=0;for(;C<f/2;){let z=c[I],B=c[I+1];if(!B)return!1;let Y=c[I-1].angleTo(z)-z.angleTo(B);for(Y=Math.abs((Y+3*Math.PI)%(2*Math.PI)-Math.PI),N.push({distance:C,angleDelta:Y}),j+=Y;C-N[0].distance>m;)j-=N.shift().angleDelta;if(j>_)return!1;I++,C+=z.dist(B)}return!0}function ble(c){let l=0;for(let f=0;f<c.length-1;f++)l+=c[f].dist(c[f+1]);return l}function wle(c,l,f){return c?.6*l*f:0}function Ele(c,l){return Math.max(c?c.right-c.left:0,l?l.right-l.left:0)}function glt(c,l,f,m,_,S){let I=wle(f,_,S),C=Ele(f,m)*S,N=0,j=ble(c)/2;for(let z=0;z<c.length-1;z++){let B=c[z],Y=c[z+1],K=B.dist(Y);if(N+K>j){let te=(j-N)/K,oe=As.number(B.x,Y.x,te),he=As.number(B.y,Y.y,te),ve=new rg(oe,he,Y.angleTo(B),z);return ve._round(),!I||xle(c,ve,C,I,l)?ve:void 0}N+=K}}function vlt(c,l,f,m,_,S,I,C,N){let j=wle(m,S,I),z=Ele(m,_),B=z*I,Y=c[0].x===0||c[0].x===N||c[0].y===0||c[0].y===N;return l-B<l/4&&(l=B+l/4),Sle(c,Y?l/2*C%l:(z/2+2*S)*I*C%l,l,j,f,B,Y,!1,N)}function Sle(c,l,f,m,_,S,I,C,N){let j=S/2,z=ble(c),B=0,Y=l-f,K=[];for(let te=0;te<c.length-1;te++){let oe=c[te],he=c[te+1],ve=oe.dist(he),$e=he.angleTo(oe);for(;Y+f<B+ve;){Y+=f;let Ce=(Y-B)/ve,He=As.number(oe.x,he.x,Ce),rt=As.number(oe.y,he.y,Ce);if(He>=0&&He<N&&rt>=0&&rt<N&&Y-j>=0&&Y+j<=z){let bt=new rg(He,rt,$e,te);bt._round(),m&&!xle(c,bt,S,m,_)||K.push(bt)}}B+=ve}return C||K.length||I||(K=Sle(c,B/2,f,m,_,S,I,!0,N)),K}or("Anchor",rg);let q_=yl;function Ile(c,l,f,m){let _=[],S=c.image,I=S.pixelRatio,C=S.paddedRect.w-2*q_,N=S.paddedRect.h-2*q_,j={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom},z=S.stretchX||[[0,C]],B=S.stretchY||[[0,N]],Y=(ut,gr)=>ut+gr[1]-gr[0],K=z.reduce(Y,0),te=B.reduce(Y,0),oe=C-K,he=N-te,ve=0,$e=K,Ce=0,He=te,rt=0,bt=oe,Qt=0,Ir=he;if(S.content&&m){let ut=S.content,gr=ut[2]-ut[0],pr=ut[3]-ut[1];(S.textFitWidth||S.textFitHeight)&&(j=Jse(c)),ve=q4(z,0,ut[0]),Ce=q4(B,0,ut[1]),$e=q4(z,ut[0],ut[2]),He=q4(B,ut[1],ut[3]),rt=ut[0]-ve,Qt=ut[1]-Ce,bt=gr-$e,Ir=pr-He}let Kt=j.x1,Ut=j.y1,dr=j.x2-Kt,sr=j.y2-Ut,rr=(ut,gr,pr,Pr)=>{let mo=z4(ut.stretch-ve,$e,dr,Kt),co=F4(ut.fixed-rt,bt,ut.stretch,K),ta=z4(gr.stretch-Ce,He,sr,Ut),dc=F4(gr.fixed-Qt,Ir,gr.stretch,te),Oa=z4(pr.stretch-ve,$e,dr,Kt),ra=F4(pr.fixed-rt,bt,pr.stretch,K),Ls=z4(Pr.stretch-Ce,He,sr,Ut),Ps=F4(Pr.fixed-Qt,Ir,Pr.stretch,te),ks=new h(mo,ta),gi=new h(Oa,ta),na=new h(Oa,Ls),ts=new h(mo,Ls),La=new h(co/I,dc/I),Rs=new h(ra/I,Ps/I),Pa=l*Math.PI/180;if(Pa){let qn=Math.sin(Pa),_o=Math.cos(Pa),Po=[_o,-qn,qn,_o];ks._matMult(Po),gi._matMult(Po),ts._matMult(Po),na._matMult(Po)}let Fu=ut.stretch+ut.fixed,_l=gr.stretch+gr.fixed;return{tl:ks,tr:gi,bl:ts,br:na,tex:{x:S.paddedRect.x+q_+Fu,y:S.paddedRect.y+q_+_l,w:pr.stretch+pr.fixed-Fu,h:Pr.stretch+Pr.fixed-_l},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:La,pixelOffsetBR:Rs,minFontScaleX:bt/I/dr,minFontScaleY:Ir/I/sr,isSDF:f}};if(m&&(S.stretchX||S.stretchY)){let ut=Tle(z,oe,K),gr=Tle(B,he,te);for(let pr=0;pr<ut.length-1;pr++){let Pr=ut[pr],mo=ut[pr+1];for(let co=0;co<gr.length-1;co++)_.push(rr(Pr,gr[co],mo,gr[co+1]))}}else _.push(rr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:C+1},{fixed:0,stretch:N+1}));return _}function q4(c,l,f){let m=0;for(let _ of c)m+=Math.max(l,Math.min(f,_[1]))-Math.max(l,Math.min(f,_[0]));return m}function Tle(c,l,f){let m=[{fixed:-q_,stretch:0}];for(let[_,S]of c){let I=m[m.length-1];m.push({fixed:_-I.stretch,stretch:I.stretch}),m.push({fixed:_-I.stretch,stretch:I.stretch+(S-_)})}return m.push({fixed:l+q_,stretch:f}),m}function z4(c,l,f,m){return c/l*f+m}function F4(c,l,f,m){return c-l*f/m}class U4{constructor(l,f,m,_,S,I,C,N,j,z){var B;if(this.boxStartIndex=l.length,j){let Y=I.top,K=I.bottom,te=I.collisionPadding;te&&(Y-=te[1],K+=te[3]);let oe=K-Y;oe>0&&(oe=Math.max(10,oe),this.circleDiameter=oe)}else{let Y=!((B=I.image)===null||B===void 0)&&B.content&&(I.image.textFitWidth||I.image.textFitHeight)?Jse(I):{x1:I.left,y1:I.top,x2:I.right,y2:I.bottom};Y.y1=Y.y1*C-N[0],Y.y2=Y.y2*C+N[2],Y.x1=Y.x1*C-N[3],Y.x2=Y.x2*C+N[1];let K=I.collisionPadding;if(K&&(Y.x1-=K[0]*C,Y.y1-=K[1]*C,Y.x2+=K[2]*C,Y.y2+=K[3]*C),z){let te=new h(Y.x1,Y.y1),oe=new h(Y.x2,Y.y1),he=new h(Y.x1,Y.y2),ve=new h(Y.x2,Y.y2),$e=z*Math.PI/180;te._rotate($e),oe._rotate($e),he._rotate($e),ve._rotate($e),Y.x1=Math.min(te.x,oe.x,he.x,ve.x),Y.x2=Math.max(te.x,oe.x,he.x,ve.x),Y.y1=Math.min(te.y,oe.y,he.y,ve.y),Y.y2=Math.max(te.y,oe.y,he.y,ve.y)}l.emplaceBack(f.x,f.y,Y.x1,Y.y1,Y.x2,Y.y2,m,_,S)}this.boxEndIndex=l.length}}class ylt{constructor(l=[],f=(m,_)=>m<_?-1:m>_?1:0){if(this.data=l,this.length=this.data.length,this.compare=f,this.length>0)for(let m=(this.length>>1)-1;m>=0;m--)this._down(m)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],f=this.data.pop();return--this.length>0&&(this.data[0]=f,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:f,compare:m}=this,_=f[l];for(;l>0;){let S=l-1>>1,I=f[S];if(m(_,I)>=0)break;f[l]=I,l=S}f[l]=_}_down(l){let{data:f,compare:m}=this,_=this.length>>1,S=f[l];for(;l<_;){let I=1+(l<<1),C=I+1;if(C<this.length&&m(f[C],f[I])<0&&(I=C),m(f[I],S)>=0)break;f[l]=f[I],l=I}f[l]=S}}function _lt(c,l=1,f=!1){let m=1/0,_=1/0,S=-1/0,I=-1/0,C=c[0];for(let K=0;K<C.length;K++){let te=C[K];(!K||te.x<m)&&(m=te.x),(!K||te.y<_)&&(_=te.y),(!K||te.x>S)&&(S=te.x),(!K||te.y>I)&&(I=te.y)}let N=Math.min(S-m,I-_),j=N/2,z=new ylt([],xlt);if(N===0)return new h(m,_);for(let K=m;K<S;K+=N)for(let te=_;te<I;te+=N)z.push(new z_(K+j,te+j,j,c));let B=function(K){let te=0,oe=0,he=0,ve=K[0];for(let $e=0,Ce=ve.length,He=Ce-1;$e<Ce;He=$e++){let rt=ve[$e],bt=ve[He],Qt=rt.x*bt.y-bt.x*rt.y;oe+=(rt.x+bt.x)*Qt,he+=(rt.y+bt.y)*Qt,te+=3*Qt}return new z_(oe/te,he/te,0,K)}(c),Y=z.length;for(;z.length;){let K=z.pop();(K.d>B.d||!B.d)&&(B=K,f&&console.log("found best %d after %d probes",Math.round(1e4*K.d)/1e4,Y)),K.max-B.d<=l||(j=K.h/2,z.push(new z_(K.p.x-j,K.p.y-j,j,c)),z.push(new z_(K.p.x+j,K.p.y-j,j,c)),z.push(new z_(K.p.x-j,K.p.y+j,j,c)),z.push(new z_(K.p.x+j,K.p.y+j,j,c)),Y+=4)}return f&&(console.log(`num probes: ${Y}`),console.log(`best distance: ${B.d}`)),B.p}function xlt(c,l){return l.max-c.max}function z_(c,l,f,m){this.p=new h(c,l),this.h=f,this.d=function(_,S){let I=!1,C=1/0;for(let N=0;N<S.length;N++){let j=S[N];for(let z=0,B=j.length,Y=B-1;z<B;Y=z++){let K=j[z],te=j[Y];K.y>_.y!=te.y>_.y&&_.x<(te.x-K.x)*(_.y-K.y)/(te.y-K.y)+K.x&&(I=!I),C=Math.min(C,use(_,K,te))}}return(I?1:-1)*Math.sqrt(C)}(this.p,m),this.max=this.d+this.h*Math.SQRT2}var Na;o.aq=void 0,(Na=o.aq||(o.aq={}))[Na.center=1]="center",Na[Na.left=2]="left",Na[Na.right=3]="right",Na[Na.top=4]="top",Na[Na.bottom=5]="bottom",Na[Na["top-left"]=6]="top-left",Na[Na["top-right"]=7]="top-right",Na[Na["bottom-left"]=8]="bottom-left",Na[Na["bottom-right"]=9]="bottom-right";let ng=7,c9=Number.POSITIVE_INFINITY;function Mle(c,l){return l[1]!==c9?function(f,m,_){let S=0,I=0;switch(m=Math.abs(m),_=Math.abs(_),f){case"top-right":case"top-left":case"top":I=_-ng;break;case"bottom-right":case"bottom-left":case"bottom":I=-_+ng;}switch(f){case"top-right":case"bottom-right":case"right":S=-m;break;case"top-left":case"bottom-left":case"left":S=m;}return[S,I]}(c,l[0],l[1]):function(f,m){let _=0,S=0;m<0&&(m=0);let I=m/Math.SQRT2;switch(f){case"top-right":case"top-left":S=I-ng;break;case"bottom-right":case"bottom-left":S=-I+ng;break;case"bottom":S=-m+ng;break;case"top":S=m-ng;}switch(f){case"top-right":case"bottom-right":_=-I;break;case"top-left":case"bottom-left":_=I;break;case"left":_=m;break;case"right":_=-m;}return[_,S]}(c,l[0])}function Cle(c,l,f){var m;let _=c.layout,S=(m=_.get("text-variable-anchor-offset"))===null||m===void 0?void 0:m.evaluate(l,{},f);if(S){let C=S.values,N=[];for(let j=0;j<C.length;j+=2){let z=N[j]=C[j],B=C[j+1].map(Y=>Y*Ui);z.startsWith("top")?B[1]-=ng:z.startsWith("bottom")&&(B[1]+=ng),N[j+1]=B}return new Ul(N)}let I=_.get("text-variable-anchor");if(I){let C;C=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(l,{},f)*Ui,c9]:_.get("text-offset").evaluate(l,{},f).map(j=>j*Ui);let N=[];for(let j of I)N.push(j,Mle(j,C));return new Ul(N)}return null}function f9(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function blt(c,l,f,m,_,S,I,C,N,j,z){let B=S.textMaxSize.evaluate(l,{});B===void 0&&(B=I);let Y=c.layers[0].layout,K=Y.get("icon-offset").evaluate(l,{},z),te=Dle(f.horizontal),oe=I/24,he=c.tilePixelRatio*oe,ve=c.tilePixelRatio*B/24,$e=c.tilePixelRatio*C,Ce=c.tilePixelRatio*Y.get("symbol-spacing"),He=Y.get("text-padding")*c.tilePixelRatio,rt=function(ut,gr,pr,Pr=1){let mo=ut.get("icon-padding").evaluate(gr,{},pr),co=mo&&mo.values;return[co[0]*Pr,co[1]*Pr,co[2]*Pr,co[3]*Pr]}(Y,l,z,c.tilePixelRatio),bt=Y.get("text-max-angle")/180*Math.PI,Qt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",Ir=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",Kt=Y.get("symbol-placement"),Ut=Ce/2,dr=Y.get("icon-text-fit"),sr;m&&dr!=="none"&&(c.allowVerticalPlacement&&f.vertical&&(sr=Qse(m,f.vertical,dr,Y.get("icon-text-fit-padding"),K,oe)),te&&(m=Qse(m,te,dr,Y.get("icon-text-fit-padding"),K,oe)));let rr=(ut,gr)=>{gr.x<0||gr.x>=Ni||gr.y<0||gr.y>=Ni||function(pr,Pr,mo,co,ta,dc,Oa,ra,Ls,Ps,ks,gi,na,ts,La,Rs,Pa,Fu,_l,qn,_o,Po,Yl,ai,F_){let Ep=pr.addToLineVertexArray(Pr,mo),Sp,hc,Uu,ga,nh=0,o2=0,Ple=0,kle=0,_9=-1,x9=-1,oh={},Rle=T_("");if(pr.allowVerticalPlacement&&co.vertical){let rs=ra.layout.get("text-rotate").evaluate(_o,{},ai)+90;Uu=new U4(Ls,Pr,Ps,ks,gi,co.vertical,na,ts,La,rs),Oa&&(ga=new U4(Ls,Pr,Ps,ks,gi,Oa,Pa,Fu,La,rs))}if(ta){let rs=ra.layout.get("icon-rotate").evaluate(_o,{}),Bu=ra.layout.get("icon-text-fit")!=="none",Py=Ile(ta,rs,Yl,Bu),If=Oa?Ile(Oa,rs,Yl,Bu):void 0;hc=new U4(Ls,Pr,Ps,ks,gi,ta,Pa,Fu,!1,rs),nh=4*Py.length;let ky=pr.iconSizeData,Ip=null;ky.kind==="source"?(Ip=[wp*ra.layout.get("icon-size").evaluate(_o,{})],Ip[0]>eg&&Re(`${pr.layerIds[0]}: Value for "icon-size" is >= ${QS}. Reduce your "icon-size".`)):ky.kind==="composite"&&(Ip=[wp*Po.compositeIconSizes[0].evaluate(_o,{},ai),wp*Po.compositeIconSizes[1].evaluate(_o,{},ai)],(Ip[0]>eg||Ip[1]>eg)&&Re(`${pr.layerIds[0]}: Value for "icon-size" is >= ${QS}. Reduce your "icon-size".`)),pr.addSymbols(pr.icon,Py,Ip,qn,_l,_o,o.ah.none,Pr,Ep.lineStartIndex,Ep.lineLength,-1,ai),_9=pr.icon.placedSymbolArray.length-1,If&&(o2=4*If.length,pr.addSymbols(pr.icon,If,Ip,qn,_l,_o,o.ah.vertical,Pr,Ep.lineStartIndex,Ep.lineLength,-1,ai),x9=pr.icon.placedSymbolArray.length-1)}let jle=Object.keys(co.horizontal);for(let rs of jle){let Bu=co.horizontal[rs];if(!Sp){Rle=T_(Bu.text);let If=ra.layout.get("text-rotate").evaluate(_o,{},ai);Sp=new U4(Ls,Pr,Ps,ks,gi,Bu,na,ts,La,If)}let Py=Bu.positionedLines.length===1;if(Ple+=Ale(pr,Pr,Bu,dc,ra,La,_o,Rs,Ep,co.vertical?o.ah.horizontal:o.ah.horizontalOnly,Py?jle:[rs],oh,_9,Po,ai),Py)break}co.vertical&&(kle+=Ale(pr,Pr,co.vertical,dc,ra,La,_o,Rs,Ep,o.ah.vertical,["vertical"],oh,x9,Po,ai));let Slt=Sp?Sp.boxStartIndex:pr.collisionBoxArray.length,Ilt=Sp?Sp.boxEndIndex:pr.collisionBoxArray.length,Tlt=Uu?Uu.boxStartIndex:pr.collisionBoxArray.length,Mlt=Uu?Uu.boxEndIndex:pr.collisionBoxArray.length,Clt=hc?hc.boxStartIndex:pr.collisionBoxArray.length,Alt=hc?hc.boxEndIndex:pr.collisionBoxArray.length,Dlt=ga?ga.boxStartIndex:pr.collisionBoxArray.length,Nlt=ga?ga.boxEndIndex:pr.collisionBoxArray.length,Sf=-1,V4=(rs,Bu)=>rs&&rs.circleDiameter?Math.max(rs.circleDiameter,Bu):Bu;Sf=V4(Sp,Sf),Sf=V4(Uu,Sf),Sf=V4(hc,Sf),Sf=V4(ga,Sf);let qle=Sf>-1?1:0;qle&&(Sf*=F_/Ui),pr.glyphOffsetArray.length>=j_.MAX_GLYPHS&&Re("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),_o.sortKey!==void 0&&pr.addToSortKeyRanges(pr.symbolInstances.length,_o.sortKey);let Olt=Cle(ra,_o,ai),[Llt,Plt]=function(rs,Bu){let Py=rs.length,If=Bu==null?void 0:Bu.values;if((If==null?void 0:If.length)>0)for(let ky=0;ky<If.length;ky+=2){let Ip=If[ky+1];rs.emplaceBack(o.aq[If[ky]],Ip[0],Ip[1])}return[Py,rs.length]}(pr.textAnchorOffsets,Olt);pr.symbolInstances.emplaceBack(Pr.x,Pr.y,oh.right>=0?oh.right:-1,oh.center>=0?oh.center:-1,oh.left>=0?oh.left:-1,oh.vertical||-1,_9,x9,Rle,Slt,Ilt,Tlt,Mlt,Clt,Alt,Dlt,Nlt,Ps,Ple,kle,nh,o2,qle,0,na,Sf,Llt,Plt)}(c,gr,ut,f,m,_,sr,c.layers[0],c.collisionBoxArray,l.index,l.sourceLayerIndex,c.index,he,[He,He,He,He],Qt,N,$e,rt,Ir,K,l,S,j,z,I)};if(Kt==="line")for(let ut of _le(l.geometry,0,0,Ni,Ni)){let gr=vlt(ut,Ce,bt,f.vertical||te,m,24,ve,c.overscaling,Ni);for(let pr of gr)te&&wlt(c,te.text,Ut,pr)||rr(ut,pr)}else if(Kt==="line-center"){for(let ut of l.geometry)if(ut.length>1){let gr=glt(ut,bt,f.vertical||te,m,24,ve);gr&&rr(ut,gr)}}else if(l.type==="Polygon")for(let ut of r_(l.geometry,0)){let gr=_lt(ut,16);rr(ut[0],new rg(gr.x,gr.y,0))}else if(l.type==="LineString")for(let ut of l.geometry)rr(ut,new rg(ut[0].x,ut[0].y,0));else if(l.type==="Point")for(let ut of l.geometry)for(let gr of ut)rr([gr],new rg(gr.x,gr.y,0))}function Ale(c,l,f,m,_,S,I,C,N,j,z,B,Y,K,te){let oe=function($e,Ce,He,rt,bt,Qt,Ir,Kt){let Ut=rt.layout.get("text-rotate").evaluate(Qt,{})*Math.PI/180,dr=[];for(let sr of Ce.positionedLines)for(let rr of sr.positionedGlyphs){if(!rr.rect)continue;let ut=rr.rect||{},gr=Hse+1,pr=!0,Pr=1,mo=0,co=(bt||Kt)&&rr.vertical,ta=rr.metrics.advance*rr.scale/2;if(Kt&&Ce.verticalizable&&(mo=sr.lineOffset/2-(rr.imageName?-(Ui-rr.metrics.width*rr.scale)/2:(rr.scale-1)*Ui)),rr.imageName){let qn=Ir[rr.imageName];pr=qn.sdf,Pr=qn.pixelRatio,gr=yl/Pr}let dc=bt?[rr.x+ta,rr.y]:[0,0],Oa=bt?[0,0]:[rr.x+ta+He[0],rr.y+He[1]-mo],ra=[0,0];co&&(ra=Oa,Oa=[0,0]);let Ls=rr.metrics.isDoubleResolution?2:1,Ps=(rr.metrics.left-gr)*rr.scale-ta+Oa[0],ks=(-rr.metrics.top-gr)*rr.scale+Oa[1],gi=Ps+ut.w/Ls*rr.scale/Pr,na=ks+ut.h/Ls*rr.scale/Pr,ts=new h(Ps,ks),La=new h(gi,ks),Rs=new h(Ps,na),Pa=new h(gi,na);if(co){let qn=new h(-ta,ta-XS),_o=-Math.PI/2,Po=Ui/2-ta,Yl=new h(5-XS-Po,-(rr.imageName?Po:0)),ai=new h(...ra);ts._rotateAround(_o,qn)._add(Yl)._add(ai),La._rotateAround(_o,qn)._add(Yl)._add(ai),Rs._rotateAround(_o,qn)._add(Yl)._add(ai),Pa._rotateAround(_o,qn)._add(Yl)._add(ai)}if(Ut){let qn=Math.sin(Ut),_o=Math.cos(Ut),Po=[_o,-qn,qn,_o];ts._matMult(Po),La._matMult(Po),Rs._matMult(Po),Pa._matMult(Po)}let Fu=new h(0,0),_l=new h(0,0);dr.push({tl:ts,tr:La,bl:Rs,br:Pa,tex:ut,writingMode:Ce.writingMode,glyphOffset:dc,sectionIndex:rr.sectionIndex,isSDF:pr,pixelOffsetTL:Fu,pixelOffsetBR:_l,minFontScaleX:0,minFontScaleY:0})}return dr}(0,f,C,_,S,I,m,c.allowVerticalPlacement),he=c.textSizeData,ve=null;he.kind==="source"?(ve=[wp*_.layout.get("text-size").evaluate(I,{})],ve[0]>eg&&Re(`${c.layerIds[0]}: Value for "text-size" is >= ${QS}. Reduce your "text-size".`)):he.kind==="composite"&&(ve=[wp*K.compositeTextSizes[0].evaluate(I,{},te),wp*K.compositeTextSizes[1].evaluate(I,{},te)],(ve[0]>eg||ve[1]>eg)&&Re(`${c.layerIds[0]}: Value for "text-size" is >= ${QS}. Reduce your "text-size".`)),c.addSymbols(c.text,oe,ve,C,S,I,j,l,N.lineStartIndex,N.lineLength,Y,te);for(let $e of z)B[$e]=c.text.placedSymbolArray.length-1;return 4*oe.length}function Dle(c){for(let l in c)return c[l];return null}function wlt(c,l,f,m){let _=c.compareText;if(l in _){let S=_[l];for(let I=S.length-1;I>=0;I--)if(m.dist(S[I])<f)return!0}else _[l]=[];return _[l].push(m),!1}let Nle=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class p9{static from(l){if(!(l instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[f,m]=new Uint8Array(l,0,2);if(f!==219)throw new Error("Data does not appear to be in a KDBush format.");let _=m>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);let S=Nle[15&m];if(!S)throw new Error("Unrecognized array type.");let[I]=new Uint16Array(l,2,1),[C]=new Uint32Array(l,4,1);return new p9(C,I,S,l)}constructor(l,f=64,m=Float64Array,_){if(isNaN(l)||l<0)throw new Error(`Unpexpected numItems value: ${l}.`);this.numItems=+l,this.nodeSize=Math.min(Math.max(+f,2),65535),this.ArrayType=m,this.IndexArrayType=l<65536?Uint16Array:Uint32Array;let S=Nle.indexOf(this.ArrayType),I=2*l*this.ArrayType.BYTES_PER_ELEMENT,C=l*this.IndexArrayType.BYTES_PER_ELEMENT,N=(8-C%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${m}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+N,2*l),this._pos=2*l,this._finished=!0):(this.data=new ArrayBuffer(8+I+C+N),this.ids=new this.IndexArrayType(this.data,8,l),this.coords=new this.ArrayType(this.data,8+C+N,2*l),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=f,new Uint32Array(this.data,4,1)[0]=l)}add(l,f){let m=this._pos>>1;return this.ids[m]=m,this.coords[this._pos++]=l,this.coords[this._pos++]=f,m}finish(){let l=this._pos>>1;if(l!==this.numItems)throw new Error(`Added ${l} items when expected ${this.numItems}.`);return d9(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(l,f,m,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:S,coords:I,nodeSize:C}=this,N=[0,S.length-1,0],j=[];for(;N.length;){let z=N.pop()||0,B=N.pop()||0,Y=N.pop()||0;if(B-Y<=C){for(let he=Y;he<=B;he++){let ve=I[2*he],$e=I[2*he+1];ve>=l&&ve<=m&&$e>=f&&$e<=_&&j.push(S[he])}continue}let K=Y+B>>1,te=I[2*K],oe=I[2*K+1];te>=l&&te<=m&&oe>=f&&oe<=_&&j.push(S[K]),(z===0?l<=te:f<=oe)&&(N.push(Y),N.push(K-1),N.push(1-z)),(z===0?m>=te:_>=oe)&&(N.push(K+1),N.push(B),N.push(1-z))}return j}within(l,f,m){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:_,coords:S,nodeSize:I}=this,C=[0,_.length-1,0],N=[],j=m*m;for(;C.length;){let z=C.pop()||0,B=C.pop()||0,Y=C.pop()||0;if(B-Y<=I){for(let he=Y;he<=B;he++)Lle(S[2*he],S[2*he+1],l,f)<=j&&N.push(_[he]);continue}let K=Y+B>>1,te=S[2*K],oe=S[2*K+1];Lle(te,oe,l,f)<=j&&N.push(_[K]),(z===0?l-m<=te:f-m<=oe)&&(C.push(Y),C.push(K-1),C.push(1-z)),(z===0?l+m>=te:f+m>=oe)&&(C.push(K+1),C.push(B),C.push(1-z))}return N}}function d9(c,l,f,m,_,S){if(_-m<=f)return;let I=m+_>>1;Ole(c,l,I,m,_,S),d9(c,l,f,m,I-1,1-S),d9(c,l,f,I+1,_,1-S)}function Ole(c,l,f,m,_,S){for(;_>m;){if(_-m>600){let j=_-m+1,z=f-m+1,B=Math.log(j),Y=.5*Math.exp(2*B/3),K=.5*Math.sqrt(B*Y*(j-Y)/j)*(z-j/2<0?-1:1);Ole(c,l,f,Math.max(m,Math.floor(f-z*Y/j+K)),Math.min(_,Math.floor(f+(j-z)*Y/j+K)),S)}let I=l[2*f+S],C=m,N=_;for(r2(c,l,m,f),l[2*_+S]>I&&r2(c,l,m,_);C<N;){for(r2(c,l,C,N),C++,N--;l[2*C+S]<I;)C++;for(;l[2*N+S]>I;)N--}l[2*m+S]===I?r2(c,l,m,N):(N++,r2(c,l,N,_)),N<=f&&(m=N+1),f<=N&&(_=N-1)}}function r2(c,l,f,m){h9(c,f,m),h9(l,2*f,2*m),h9(l,2*f+1,2*m+1)}function h9(c,l,f){let m=c[l];c[l]=c[f],c[f]=m}function Lle(c,l,f,m){let _=c-f,S=l-m;return _*_+S*S}var m9;o.bg=void 0,(m9=o.bg||(o.bg={})).create="create",m9.load="load",m9.fullLoad="fullLoad";let B4=null,n2=[],g9=1e3/60,v9="loadTime",y9="fullLoadTime",Elt={mark(c){performance.mark(c)},frame(c){let l=c;B4!=null&&n2.push(l-B4),B4=l},clearMetrics(){B4=null,n2=[],performance.clearMeasures(v9),performance.clearMeasures(y9);for(let c in o.bg)performance.clearMarks(o.bg[c])},getPerformanceMetrics(){performance.measure(v9,o.bg.create,o.bg.load),performance.measure(y9,o.bg.create,o.bg.fullLoad);let c=performance.getEntriesByName(v9)[0].duration,l=performance.getEntriesByName(y9)[0].duration,f=n2.length,m=1/(n2.reduce((S,I)=>S+I,0)/f/1e3),_=n2.filter(S=>S>g9).reduce((S,I)=>S+(I-g9)/g9,0);return{loadTime:c,fullLoadTime:l,fps:m,percentDroppedFrames:_/(f+_)*100,totalFrames:f}}};o.$=class extends V{},o.A=N_,o.B=TF,o.C=function(c){if(Ye==null){let l=c.navigator?c.navigator.userAgent:null;Ye=!!c.safari||!(!l||!(/\b(iPad|iPhone|iPod)\b/.test(l)||l.match("Safari")&&!l.match("Chrome")))}return Ye},o.D=cr,o.E=Nt,o.F=class{constructor(c,l){this.target=c,this.mapId=l,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new hlt(()=>this.process()),this.subscription=function(f,m,_,S){return f.addEventListener(m,_,!1),{unsubscribe:()=>{f.removeEventListener(m,_,!1)}}}(this.target,"message",f=>this.receive(f)),this.globalScope=Ee(self)?c:window}registerMessageHandler(c,l){this.messageHandlers[c]=l}sendAsync(c,l){return new Promise((f,m)=>{let _=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[_]={resolve:f,reject:m},l&&l.signal.addEventListener("abort",()=>{delete this.resolveRejects[_];let C={id:_,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(C)},{once:!0});let S=[],I=Object.assign(Object.assign({},c),{id:_,sourceMapId:this.mapId,origin:location.origin,data:Bm(c.data,S)});this.target.postMessage(I,{transfer:S})})}receive(c){let l=c.data,f=l.id;if(!(l.origin!=="file://"&&location.origin!=="file://"&&l.origin!=="resource://android"&&location.origin!=="resource://android"&&l.origin!==location.origin||l.targetMapId&&this.mapId!==l.targetMapId)){if(l.type==="<cancel>"){delete this.tasks[f];let m=this.abortControllers[f];return delete this.abortControllers[f],void(m&&m.abort())}if(Ee(self)||l.mustQueue)return this.tasks[f]=l,this.taskQueue.push(f),void this.invoker.trigger();this.processTask(f,l)}}process(){if(this.taskQueue.length===0)return;let c=this.taskQueue.shift(),l=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),l&&this.processTask(c,l)}processTask(c,l){return i(this,void 0,void 0,function*(){if(l.type==="<response>"){let _=this.resolveRejects[c];return delete this.resolveRejects[c],_?void(l.error?_.reject(Vm(l.error)):_.resolve(Vm(l.data))):void 0}if(!this.messageHandlers[l.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${l.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let f=Vm(l.data),m=new AbortController;this.abortControllers[c]=m;try{let _=yield this.messageHandlers[l.type](l.sourceMapId,f,m);this.completeTask(c,null,_)}catch(_){this.completeTask(c,_)}})}completeTask(c,l,f){let m=[];delete this.abortControllers[c];let _={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:l?Bm(l):null,data:Bm(f,m)};this.target.postMessage(_,{transfer:m})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},o.G=lt,o.H=function(){var c=new N_(16);return N_!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},o.I=QF,o.J=function(c,l,f){var m,_,S,I,C,N,j,z,B,Y,K,te,oe=f[0],he=f[1],ve=f[2];return l===c?(c[12]=l[0]*oe+l[4]*he+l[8]*ve+l[12],c[13]=l[1]*oe+l[5]*he+l[9]*ve+l[13],c[14]=l[2]*oe+l[6]*he+l[10]*ve+l[14],c[15]=l[3]*oe+l[7]*he+l[11]*ve+l[15]):(_=l[1],S=l[2],I=l[3],C=l[4],N=l[5],j=l[6],z=l[7],B=l[8],Y=l[9],K=l[10],te=l[11],c[0]=m=l[0],c[1]=_,c[2]=S,c[3]=I,c[4]=C,c[5]=N,c[6]=j,c[7]=z,c[8]=B,c[9]=Y,c[10]=K,c[11]=te,c[12]=m*oe+C*he+B*ve+l[12],c[13]=_*oe+N*he+Y*ve+l[13],c[14]=S*oe+j*he+K*ve+l[14],c[15]=I*oe+z*he+te*ve+l[15]),c},o.K=function(c,l,f){var m=f[0],_=f[1],S=f[2];return c[0]=l[0]*m,c[1]=l[1]*m,c[2]=l[2]*m,c[3]=l[3]*m,c[4]=l[4]*_,c[5]=l[5]*_,c[6]=l[6]*_,c[7]=l[7]*_,c[8]=l[8]*S,c[9]=l[9]*S,c[10]=l[10]*S,c[11]=l[11]*S,c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},o.L=dse,o.M=function(c,l){let f={};for(let m=0;m<l.length;m++){let _=l[m];_ in c&&(f[_]=c[_])}return f},o.N=tg,o.O=lle,o.P=h,o.Q=ule,o.R=qu,o.S=zu,o.T=b_,o.U=L,o.V=P,o.W=Ue,o.X=Ni,o.Y=D,o.Z=e2,o._=i,o.a=Ze,o.a$=function(c,l){var f=c[0],m=c[1],_=c[2],S=c[3],I=c[4],C=c[5],N=c[6],j=c[7],z=c[8],B=c[9],Y=c[10],K=c[11],te=c[12],oe=c[13],he=c[14],ve=c[15],$e=l[0],Ce=l[1],He=l[2],rt=l[3],bt=l[4],Qt=l[5],Ir=l[6],Kt=l[7],Ut=l[8],dr=l[9],sr=l[10],rr=l[11],ut=l[12],gr=l[13],pr=l[14],Pr=l[15];return Math.abs(f-$e)<=Os*Math.max(1,Math.abs(f),Math.abs($e))&&Math.abs(m-Ce)<=Os*Math.max(1,Math.abs(m),Math.abs(Ce))&&Math.abs(_-He)<=Os*Math.max(1,Math.abs(_),Math.abs(He))&&Math.abs(S-rt)<=Os*Math.max(1,Math.abs(S),Math.abs(rt))&&Math.abs(I-bt)<=Os*Math.max(1,Math.abs(I),Math.abs(bt))&&Math.abs(C-Qt)<=Os*Math.max(1,Math.abs(C),Math.abs(Qt))&&Math.abs(N-Ir)<=Os*Math.max(1,Math.abs(N),Math.abs(Ir))&&Math.abs(j-Kt)<=Os*Math.max(1,Math.abs(j),Math.abs(Kt))&&Math.abs(z-Ut)<=Os*Math.max(1,Math.abs(z),Math.abs(Ut))&&Math.abs(B-dr)<=Os*Math.max(1,Math.abs(B),Math.abs(dr))&&Math.abs(Y-sr)<=Os*Math.max(1,Math.abs(Y),Math.abs(sr))&&Math.abs(K-rr)<=Os*Math.max(1,Math.abs(K),Math.abs(rr))&&Math.abs(te-ut)<=Os*Math.max(1,Math.abs(te),Math.abs(ut))&&Math.abs(oe-gr)<=Os*Math.max(1,Math.abs(oe),Math.abs(gr))&&Math.abs(he-pr)<=Os*Math.max(1,Math.abs(he),Math.abs(pr))&&Math.abs(ve-Pr)<=Os*Math.max(1,Math.abs(ve),Math.abs(Pr))},o.a0=wn,o.a1=u9,o.a2=nt,o.a3=c=>{let l=window.document.createElement("video");return l.muted=!0,new Promise(f=>{l.onloadstart=()=>{f(l)};for(let m of c){let _=window.document.createElement("source");Oe(m)||(l.crossOrigin="Anonymous"),_.src=m,l.appendChild(_)}})},o.a4=function(){return ee++},o.a5=Xt,o.a6=j_,o.a7=xS,o.a8=Oy,o.a9=mle,o.aA=function(c){if(c.type==="custom")return new dlt(c);switch(c.type){case"background":return new clt(c);case"circle":return new Xat(c);case"fill":return new hst(c);case"fill-extrusion":return new Ast(c);case"heatmap":return new Qat(c);case"hillshade":return new tst(c);case"line":return new jst(c);case"raster":return new plt(c);case"symbol":return new j4(c);}},o.aB=ue,o.aC=function(c,l){if(!c)return[{command:"setStyle",args:[l]}];let f=[];try{if(!Ct(c.version,l.version))return[{command:"setStyle",args:[l]}];Ct(c.center,l.center)||f.push({command:"setCenter",args:[l.center]}),Ct(c.zoom,l.zoom)||f.push({command:"setZoom",args:[l.zoom]}),Ct(c.bearing,l.bearing)||f.push({command:"setBearing",args:[l.bearing]}),Ct(c.pitch,l.pitch)||f.push({command:"setPitch",args:[l.pitch]}),Ct(c.sprite,l.sprite)||f.push({command:"setSprite",args:[l.sprite]}),Ct(c.glyphs,l.glyphs)||f.push({command:"setGlyphs",args:[l.glyphs]}),Ct(c.transition,l.transition)||f.push({command:"setTransition",args:[l.transition]}),Ct(c.light,l.light)||f.push({command:"setLight",args:[l.light]}),Ct(c.terrain,l.terrain)||f.push({command:"setTerrain",args:[l.terrain]}),Ct(c.sky,l.sky)||f.push({command:"setSky",args:[l.sky]}),Ct(c.projection,l.projection)||f.push({command:"setProjection",args:[l.projection]});let m={},_=[];(function(I,C,N,j){let z;for(z in C=C||{},I=I||{})Object.prototype.hasOwnProperty.call(I,z)&&(Object.prototype.hasOwnProperty.call(C,z)||Be(z,N,j));for(z in C)Object.prototype.hasOwnProperty.call(C,z)&&(Object.prototype.hasOwnProperty.call(I,z)?Ct(I[z],C[z])||(I[z].type==="geojson"&&C[z].type==="geojson"&&yt(I,C,z)?ce(N,{command:"setGeoJSONSourceData",args:[z,C[z].data]}):mt(z,C,N,j)):Fe(z,C,N))})(c.sources,l.sources,_,m);let S=[];c.layers&&c.layers.forEach(I=>{"source"in I&&m[I.source]?f.push({command:"removeLayer",args:[I.id]}):S.push(I)}),f=f.concat(_),function(I,C,N){C=C||[];let j=(I=I||[]).map(_t),z=C.map(_t),B=I.reduce(Yt,{}),Y=C.reduce(Yt,{}),K=j.slice(),te=Object.create(null),oe,he,ve,$e,Ce;for(let He=0,rt=0;He<j.length;He++)oe=j[He],Object.prototype.hasOwnProperty.call(Y,oe)?rt++:(ce(N,{command:"removeLayer",args:[oe]}),K.splice(K.indexOf(oe,rt),1));for(let He=0,rt=0;He<z.length;He++)oe=z[z.length-1-He],K[K.length-1-He]!==oe&&(Object.prototype.hasOwnProperty.call(B,oe)?(ce(N,{command:"removeLayer",args:[oe]}),K.splice(K.lastIndexOf(oe,K.length-rt),1)):rt++,$e=K[K.length-He],ce(N,{command:"addLayer",args:[Y[oe],$e]}),K.splice(K.length-He,0,oe),te[oe]=!0);for(let He=0;He<z.length;He++)if(oe=z[He],he=B[oe],ve=Y[oe],!te[oe]&&!Ct(he,ve))if(Ct(he.source,ve.source)&&Ct(he["source-layer"],ve["source-layer"])&&Ct(he.type,ve.type)){for(Ce in gt(he.layout,ve.layout,N,oe,null,"setLayoutProperty"),gt(he.paint,ve.paint,N,oe,null,"setPaintProperty"),Ct(he.filter,ve.filter)||ce(N,{command:"setFilter",args:[oe,ve.filter]}),Ct(he.minzoom,ve.minzoom)&&Ct(he.maxzoom,ve.maxzoom)||ce(N,{command:"setLayerZoomRange",args:[oe,ve.minzoom,ve.maxzoom]}),he)Object.prototype.hasOwnProperty.call(he,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?gt(he[Ce],ve[Ce],N,oe,Ce.slice(6),"setPaintProperty"):Ct(he[Ce],ve[Ce])||ce(N,{command:"setLayerProperty",args:[oe,Ce,ve[Ce]]}));for(Ce in ve)Object.prototype.hasOwnProperty.call(ve,Ce)&&!Object.prototype.hasOwnProperty.call(he,Ce)&&Ce!=="layout"&&Ce!=="paint"&&Ce!=="filter"&&Ce!=="metadata"&&Ce!=="minzoom"&&Ce!=="maxzoom"&&(Ce.indexOf("paint.")===0?gt(he[Ce],ve[Ce],N,oe,Ce.slice(6),"setPaintProperty"):Ct(he[Ce],ve[Ce])||ce(N,{command:"setLayerProperty",args:[oe,Ce,ve[Ce]]}))}else ce(N,{command:"removeLayer",args:[oe]}),$e=K[K.lastIndexOf(oe)+1],ce(N,{command:"addLayer",args:[ve,$e]})}(S,l.layers,f)}catch(m){console.warn("Unable to compute style diff:",m),f=[{command:"setStyle",args:[l]}]}return f},o.aD=function(c){let l=[],f=c.id;return f===void 0&&l.push({message:`layers.${f}: missing required property "id"`}),c.render===void 0&&l.push({message:`layers.${f}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&l.push({message:`layers.${f}: property "renderingMode" must be either "2d" or "3d"`}),l},o.aE=function c(l,f){if(Array.isArray(l)){if(!Array.isArray(f)||l.length!==f.length)return!1;for(let m=0;m<l.length;m++)if(!c(l[m],f[m]))return!1;return!0}if(typeof l=="object"&&l!==null&&f!==null){if(typeof f!="object"||Object.keys(l).length!==Object.keys(f).length)return!1;for(let m in l)if(!c(l[m],f[m]))return!1;return!0}return l===f},o.aF=ne,o.aG=pe,o.aH=class extends Ay{constructor(c,l){super(c,l),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},o.aI=S4,o.aJ=class extends Ay{constructor(c,l){super(c,l),this.current=Vat}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let l=1;l<16;l++)if(c[l]!==this.current[l]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},o.aK=rse,o.aL=nse,o.aM=to,o.aN=class extends Ay{constructor(c,l){super(c,l),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},o.aO=class extends Ay{constructor(c,l){super(c,l),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},o.aP=function(c,l,f,m,_,S,I){var C=1/(l-f),N=1/(m-_),j=1/(S-I);return c[0]=-2*C,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*N,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*j,c[11]=0,c[12]=(l+f)*C,c[13]=(_+m)*N,c[14]=(I+S)*j,c[15]=1,c},o.aQ=Kat,o.aR=class extends ke{},o.aS=Ust,o.aT=class extends Ke{},o.aU=UF,o.aV=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},o.aW=yse,o.aX=Aa,o.aY=ju,o.aZ=class extends fr{},o.a_=function(c,l){return c[0]===l[0]&&c[1]===l[1]&&c[2]===l[2]&&c[3]===l[3]&&c[4]===l[4]&&c[5]===l[5]&&c[6]===l[6]&&c[7]===l[7]&&c[8]===l[8]&&c[9]===l[9]&&c[10]===l[10]&&c[11]===l[11]&&c[12]===l[12]&&c[13]===l[13]&&c[14]===l[14]&&c[15]===l[15]},o.aa=function(c){let l={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(f,m,_,S)=>{let I=_||S;return l[m]=!I||I.toLowerCase(),""}),l["max-age"]){let f=parseInt(l["max-age"],10);isNaN(f)?delete l["max-age"]:l["max-age"]=f}return l},o.ab=function(c,l){let f=[];for(let m in c)m in l||f.push(m);return f},o.ac=U,o.ad=function(c,l,f){var m=Math.sin(f),_=Math.cos(f),S=l[0],I=l[1],C=l[2],N=l[3],j=l[4],z=l[5],B=l[6],Y=l[7];return l!==c&&(c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[0]=S*_+j*m,c[1]=I*_+z*m,c[2]=C*_+B*m,c[3]=N*_+Y*m,c[4]=j*_-S*m,c[5]=z*_-I*m,c[6]=B*_-C*m,c[7]=Y*_-N*m,c},o.ae=function(c){var l=new N_(16);return l[0]=c[0],l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=c[6],l[7]=c[7],l[8]=c[8],l[9]=c[9],l[10]=c[10],l[11]=c[11],l[12]=c[12],l[13]=c[13],l[14]=c[14],l[15]=c[15],l},o.af=C4,o.ag=function(c,l){let f=0,m=0;if(c.kind==="constant")m=c.layoutSize;else if(c.kind!=="source"){let{interpolationType:_,minZoom:S,maxZoom:I}=c,C=_?U(Ds.interpolationFactor(_,l,S,I),0,1):0;c.kind==="camera"?m=As.number(c.minSize,c.maxSize,C):f=C}return{uSizeT:f,uSize:m}},o.ai=function(c,{uSize:l,uSizeT:f},{lowerSize:m,upperSize:_}){return c.kind==="source"?m/wp:c.kind==="composite"?As.number(m/wp,_/wp,f):l},o.aj=n9,o.ak=function(c,l,f,m){let _=l.y-c.y,S=l.x-c.x,I=m.y-f.y,C=m.x-f.x,N=I*S-C*_;if(N===0)return null;let j=(C*(c.y-f.y)-I*(c.x-f.x))/N;return new h(c.x+j*S,c.y+j*_)},o.al=_le,o.am=sse,o.an=qF,o.ao=function(c){let l=1/0,f=1/0,m=-1/0,_=-1/0;for(let S of c)l=Math.min(l,S.x),f=Math.min(f,S.y),m=Math.max(m,S.x),_=Math.max(_,S.y);return[l,f,m,_]},o.ap=Ui,o.ar=r9,o.as=function(c,l){var f=l[0],m=l[1],_=l[2],S=l[3],I=l[4],C=l[5],N=l[6],j=l[7],z=l[8],B=l[9],Y=l[10],K=l[11],te=l[12],oe=l[13],he=l[14],ve=l[15],$e=f*C-m*I,Ce=f*N-_*I,He=f*j-S*I,rt=m*N-_*C,bt=m*j-S*C,Qt=_*j-S*N,Ir=z*oe-B*te,Kt=z*he-Y*te,Ut=z*ve-K*te,dr=B*he-Y*oe,sr=B*ve-K*oe,rr=Y*ve-K*he,ut=$e*rr-Ce*sr+He*dr+rt*Ut-bt*Kt+Qt*Ir;return ut?(c[0]=(C*rr-N*sr+j*dr)*(ut=1/ut),c[1]=(_*sr-m*rr-S*dr)*ut,c[2]=(oe*Qt-he*bt+ve*rt)*ut,c[3]=(Y*bt-B*Qt-K*rt)*ut,c[4]=(N*Ut-I*rr-j*Kt)*ut,c[5]=(f*rr-_*Ut+S*Kt)*ut,c[6]=(he*He-te*Qt-ve*Ce)*ut,c[7]=(z*Qt-Y*He+K*Ce)*ut,c[8]=(I*sr-C*Ut+j*Ir)*ut,c[9]=(m*Ut-f*sr-S*Ir)*ut,c[10]=(te*bt-oe*He+ve*$e)*ut,c[11]=(B*He-z*bt-K*$e)*ut,c[12]=(C*Kt-I*dr-N*Ir)*ut,c[13]=(f*dr-m*Kt+_*Ir)*ut,c[14]=(oe*Ce-te*rt-he*$e)*ut,c[15]=(z*rt-B*Ce+Y*$e)*ut,c):null},o.at=f9,o.au=t9,o.av=p9,o.aw=function(){let c={},l=Ae.$version;for(let f in Ae.$root){let m=Ae.$root[f];if(m.required){let _=null;_=f==="version"?l:m.type==="array"?[]:{},_!=null&&(c[f]=_)}}return c},o.ax=PS,o.ay=ge,o.az=function(c){c=c.slice();let l=Object.create(null);for(let f=0;f<c.length;f++)l[c[f].id]=c[f];for(let f=0;f<c.length;f++)"ref"in c[f]&&(c[f]=Wt(c[f],l[c[f].ref]));return c},o.b=Qe,o.b0=function(c,l){return c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=l[6],c[7]=l[7],c[8]=l[8],c[9]=l[9],c[10]=l[10],c[11]=l[11],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15],c},o.b1=function(c,l,f){return c[0]=l[0]*f[0],c[1]=l[1]*f[1],c[2]=l[2]*f[2],c[3]=l[3]*f[3],c},o.b2=function(c,l){return c[0]*l[0]+c[1]*l[1]+c[2]*l[2]+c[3]*l[3]},o.b3=H,o.b4=ple,o.b5=cle,o.b6=function(c,l,f,m,_){var S,I=1/Math.tan(l/2);return c[0]=I/f,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=I,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,_!=null&&_!==1/0?(c[10]=(_+m)*(S=1/(m-_)),c[14]=2*_*m*S):(c[10]=-1,c[14]=-2*m),c},o.b7=function(c,l,f){var m=Math.sin(f),_=Math.cos(f),S=l[4],I=l[5],C=l[6],N=l[7],j=l[8],z=l[9],B=l[10],Y=l[11];return l!==c&&(c[0]=l[0],c[1]=l[1],c[2]=l[2],c[3]=l[3],c[12]=l[12],c[13]=l[13],c[14]=l[14],c[15]=l[15]),c[4]=S*_+j*m,c[5]=I*_+z*m,c[6]=C*_+B*m,c[7]=N*_+Y*m,c[8]=j*_-S*m,c[9]=z*_-I*m,c[10]=B*_-C*m,c[11]=Y*_-N*m,c},o.b8=k,o.b9=q,o.bA=qse,o.bB=function(c){return c.message===st},o.bC=km,o.bD=gl,o.ba=function(c){return c*Math.PI/180},o.bb=function(c,l){let{x:f,y:m}=e2.fromLngLat(l);return!(c<0||c>25||m<0||m>=1||f<0||f>=1)},o.bc=function(c,l){return c[0]=l[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=l[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=l[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},o.bd=class extends F{},o.be=s9,o.bf=Elt,o.bh=ze,o.bi=function(c,l){Ze.REGISTERED_PROTOCOLS[c]=l},o.bj=function(c){delete Ze.REGISTERED_PROTOCOLS[c]},o.bk=function(c,l){let f={};for(let _=0;_<c.length;_++){let S=l&&l[c[_].id]||p4(c[_]);l&&(l[c[_].id]=S);let I=f[S];I||(I=f[S]=[]),I.push(c[_])}let m=[];for(let _ in f)m.push(f[_]);return m},o.bl=or,o.bm=hle,o.bn=gle,o.bo=$se,o.bp=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Ni/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;let l=c.bucket.layers[0],f=l.layout,m=l._unevaluatedLayout._values,_={layoutIconSize:m["icon-size"].possiblyEvaluate(new Do(c.bucket.zoom+1),c.canonical),layoutTextSize:m["text-size"].possiblyEvaluate(new Do(c.bucket.zoom+1),c.canonical),textMaxSize:m["text-size"].possiblyEvaluate(new Do(18))};if(c.bucket.textSizeData.kind==="composite"){let{minZoom:j,maxZoom:z}=c.bucket.textSizeData;_.compositeTextSizes=[m["text-size"].possiblyEvaluate(new Do(j),c.canonical),m["text-size"].possiblyEvaluate(new Do(z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){let{minZoom:j,maxZoom:z}=c.bucket.iconSizeData;_.compositeIconSizes=[m["icon-size"].possiblyEvaluate(new Do(j),c.canonical),m["icon-size"].possiblyEvaluate(new Do(z),c.canonical)]}let S=f.get("text-line-height")*Ui,I=f.get("text-rotation-alignment")!=="viewport"&&f.get("symbol-placement")!=="point",C=f.get("text-keep-upright"),N=f.get("text-size");for(let j of c.bucket.features){let z=f.get("text-font").evaluate(j,{},c.canonical).join(","),B=N.evaluate(j,{},c.canonical),Y=_.layoutTextSize.evaluate(j,{},c.canonical),K=_.layoutIconSize.evaluate(j,{},c.canonical),te={horizontal:{},vertical:void 0},oe=j.text,he,ve=[0,0];if(oe){let He=oe.toString(),rt=f.get("text-letter-spacing").evaluate(j,{},c.canonical)*Ui,bt=MF(He)?rt:0,Qt=f.get("text-anchor").evaluate(j,{},c.canonical),Ir=Cle(l,j,c.canonical);if(!Ir){let sr=f.get("text-radial-offset").evaluate(j,{},c.canonical);ve=sr?Mle(Qt,[sr*Ui,c9]):f.get("text-offset").evaluate(j,{},c.canonical).map(rr=>rr*Ui)}let Kt=I?"center":f.get("text-justify").evaluate(j,{},c.canonical),Ut=f.get("symbol-placement")==="point"?f.get("text-max-width").evaluate(j,{},c.canonical)*Ui:1/0,dr=()=>{c.bucket.allowVerticalPlacement&&kS(He)&&(te.vertical=P4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,Qt,"left",bt,ve,o.ah.vertical,!0,Y,B))};if(!I&&Ir){let sr=new Set;if(Kt==="auto")for(let ut=0;ut<Ir.values.length;ut+=2)sr.add(f9(Ir.values[ut]));else sr.add(Kt);let rr=!1;for(let ut of sr)if(!te.horizontal[ut])if(rr)te.horizontal[ut]=te.horizontal[0];else{let gr=P4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,"center",ut,bt,ve,o.ah.horizontal,!1,Y,B);gr&&(te.horizontal[ut]=gr,rr=gr.positionedLines.length===1)}dr()}else{Kt==="auto"&&(Kt=f9(Qt));let sr=P4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,Qt,Kt,bt,ve,o.ah.horizontal,!1,Y,B);sr&&(te.horizontal[Kt]=sr),dr(),kS(He)&&I&&C&&(te.vertical=P4(oe,c.glyphMap,c.glyphPositions,c.imagePositions,z,Ut,S,Qt,Kt,bt,ve,o.ah.vertical,!1,Y,B))}}let $e=!1;if(j.icon&&j.icon.name){let He=c.imageMap[j.icon.name];He&&(he=ilt(c.imagePositions[j.icon.name],f.get("icon-offset").evaluate(j,{},c.canonical),f.get("icon-anchor").evaluate(j,{},c.canonical)),$e=!!He.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=$e:c.bucket.sdfIcons!==$e&&Re("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(He.pixelRatio!==c.bucket.pixelRatio||f.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}let Ce=Dle(te.horizontal)||te.vertical;c.bucket.iconsInText=!!Ce&&Ce.iconsInText,(Ce||he)&&blt(c.bucket,j,te,he,c.imageMap,_,Y,K,ve,$e,c.canonical)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},o.bq=ZF,o.br=WF,o.bs=YF,o.bt=Jm,o.bu=XF,o.bv=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},o.bw=function(c,l,f,m,_){return i(this,void 0,void 0,function*(){if(P())try{return yield Ue(c,l,f,m,_)}catch(S){}return function(S,I,C,N,j){let z=S.width,B=S.height;Ne&&et||(Ne=new OffscreenCanvas(z,B),et=Ne.getContext("2d",{willReadFrequently:!0})),Ne.width=z,Ne.height=B,et.drawImage(S,0,0,z,B);let Y=et.getImageData(I,C,N,j);return et.clearRect(0,0,z,B),Y.data}(c,l,f,m,_)})},o.bx=dle,o.by=a,o.bz=u,o.c=ft,o.d=c=>i(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));let l=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(l)}catch(f){throw new Error(`Could not load image because of ${f.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),o.e=X,o.f=c=>new Promise((l,f)=>{let m=new Image;m.onload=()=>{l(m),URL.revokeObjectURL(m.src),m.onload=null,window.requestAnimationFrame(()=>{m.src=qe})},m.onerror=()=>f(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let _=new Blob([new Uint8Array(c)],{type:"image/png"});m.src=c.byteLength?URL.createObjectURL(_):qe}),o.g=tt,o.h=(c,l)=>We(X(c,{type:"json"}),l),o.i=Ee,o.j=Mt,o.k=Pt,o.l=(c,l)=>We(X(c,{type:"arrayBuffer"}),l),o.m=We,o.n=function(c){return new XF(c).readFields(Jst,[])},o.o=GS,o.p=Wse,o.q=E,o.r=IF,o.s=Oe,o.t=OS,o.u=Qd,o.v=Ae,o.w=Re,o.x=function([c,l,f]){return l+=90,l*=Math.PI/180,f*=Math.PI/180,{x:c*Math.cos(l)*Math.sin(f),y:c*Math.sin(l)*Math.sin(f),z:c*Math.cos(f)}},o.y=As,o.z=Do}),r("worker",["./shared"],function(o){"use strict";class i{constructor($){this.keyCache={},$&&this.replace($)}replace($){this._layerConfigs={},this._layers={},this.update($,[])}update($,W){for(let se of $){this._layerConfigs[se.id]=se;let be=this._layers[se.id]=o.aA(se);be._featureFilter=o.a7(be.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(let se of W)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};let J=o.bk(Object.values(this._layerConfigs),this.keyCache);for(let se of J){let be=se.map(Xe=>this._layers[Xe.id]),De=be[0];if(De.visibility==="none")continue;let je=De.source||"",_e=this.familiesBySource[je];_e||(_e=this.familiesBySource[je]={});let Je=De.sourceLayer||"_geojsonTileLayer",pt=_e[Je];pt||(pt=_e[Je]=[]),pt.push(be)}}}class a{constructor($){let W={},J=[];for(let je in $){let _e=$[je],Je=W[je]={};for(let pt in _e){let Xe=_e[+pt];if(!Xe||Xe.bitmap.width===0||Xe.bitmap.height===0)continue;let Dt={x:0,y:0,w:Xe.bitmap.width+2,h:Xe.bitmap.height+2};J.push(Dt),Je[pt]={rect:Dt,metrics:Xe.metrics}}}let{w:se,h:be}=o.p(J),De=new o.o({width:se||1,height:be||1});for(let je in $){let _e=$[je];for(let Je in _e){let pt=_e[+Je];if(!pt||pt.bitmap.width===0||pt.bitmap.height===0)continue;let Xe=W[je][Je].rect;o.o.copy(pt.bitmap,De,{x:0,y:0},{x:Xe.x+1,y:Xe.y+1},pt.bitmap)}}this.image=De,this.positions=W}}o.bl("GlyphAtlas",a);class u{constructor($){this.tileID=new o.S($.tileID.overscaledZ,$.tileID.wrap,$.tileID.canonical.z,$.tileID.canonical.x,$.tileID.canonical.y),this.uid=$.uid,this.zoom=$.zoom,this.pixelRatio=$.pixelRatio,this.tileSize=$.tileSize,this.source=$.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=$.showCollisionBoxes,this.collectResourceTiming=!!$.collectResourceTiming,this.returnDependencies=!!$.returnDependencies,this.promoteId=$.promoteId,this.inFlightDependencies=[]}parse($,W,J,se){return o._(this,void 0,void 0,function*(){this.status="parsing",this.data=$,this.collisionBoxArray=new o.a5;let be=new o.bm(Object.keys($.layers).sort()),De=new o.bn(this.tileID,this.promoteId);De.bucketLayerIDs=[];let je={},_e={featureIndex:De,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J},Je=W.familiesBySource[this.source];for(let an in Je){let eo=$.layers[an];if(!eo)continue;eo.version===1&&o.w(`Vector tile source "${this.source}" layer "${an}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Vo=be.encode(an),ea=[];for(let ha=0;ha<eo.length;ha++){let Ja=eo.feature(ha),Sm=De.getId(Ja,an);ea.push({feature:Ja,id:Sm,index:ha,sourceLayerIndex:Vo})}for(let ha of Je[an]){let Ja=ha[0];Ja.source!==this.source&&o.w(`layer.source = ${Ja.source} does not equal this.source = ${this.source}`),Ja.minzoom&&this.zoom<Math.floor(Ja.minzoom)||Ja.maxzoom&&this.zoom>=Ja.maxzoom||Ja.visibility!=="none"&&(p(ha,this.zoom,J),(je[Ja.id]=Ja.createBucket({index:De.bucketLayerIDs.length,layers:ha,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Vo,sourceID:this.source})).populate(ea,_e,this.tileID.canonical),De.bucketLayerIDs.push(ha.map(Sm=>Sm.id)))}}let pt=o.aF(_e.glyphDependencies,an=>Object.keys(an).map(Number));this.inFlightDependencies.forEach(an=>an==null?void 0:an.abort()),this.inFlightDependencies=[];let Xe=Promise.resolve({});if(Object.keys(pt).length){let an=new AbortController;this.inFlightDependencies.push(an),Xe=se.sendAsync({type:"GG",data:{stacks:pt,source:this.source,tileID:this.tileID,type:"glyphs"}},an)}let Dt=Object.keys(_e.iconDependencies),ur=Promise.resolve({});if(Dt.length){let an=new AbortController;this.inFlightDependencies.push(an),ur=se.sendAsync({type:"GI",data:{icons:Dt,source:this.source,tileID:this.tileID,type:"icons"}},an)}let Sr=Object.keys(_e.patternDependencies),Dn=Promise.resolve({});if(Sr.length){let an=new AbortController;this.inFlightDependencies.push(an),Dn=se.sendAsync({type:"GI",data:{icons:Sr,source:this.source,tileID:this.tileID,type:"patterns"}},an)}let[Gr,Nn,vn]=yield Promise.all([Xe,ur,Dn]),Ai=new a(Gr),ii=new o.bo(Nn,vn);for(let an in je){let eo=je[an];eo instanceof o.a6?(p(eo.layers,this.zoom,J),o.bp({bucket:eo,glyphMap:Gr,glyphPositions:Ai.positions,imageMap:Nn,imagePositions:ii.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):eo.hasPattern&&(eo instanceof o.bq||eo instanceof o.br||eo instanceof o.bs)&&(p(eo.layers,this.zoom,J),eo.addFeatures(_e,this.tileID.canonical,ii.patternPositions))}return this.status="done",{buckets:Object.values(je).filter(an=>!an.isEmpty()),featureIndex:De,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Ai.image,imageAtlas:ii,glyphMap:this.returnDependencies?Gr:null,iconMap:this.returnDependencies?Nn:null,glyphPositions:this.returnDependencies?Ai.positions:null}})}}function p(ae,$,W){let J=new o.z($);for(let se of ae)se.recalculate(J,W)}class h{constructor($,W,J){this.actor=$,this.layerIndex=W,this.availableImages=J,this.fetching={},this.loading={},this.loaded={}}loadVectorTile($,W){return o._(this,void 0,void 0,function*(){let J=yield o.l($.request,W);try{return{vectorTile:new o.bt.VectorTile(new o.bu(J.data)),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(se){let be=new Uint8Array(J.data),De=`Unable to parse the tile at ${$.request.url}, `;throw De+=be[0]===31&&be[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${se.message}`,new Error(De)}})}loadTile($){return o._(this,void 0,void 0,function*(){let W=$.uid,J=!!($&&$.request&&$.request.collectResourceTiming)&&new o.bv($.request),se=new u($);this.loading[W]=se;let be=new AbortController;se.abort=be;try{let De=yield this.loadVectorTile($,be);if(delete this.loading[W],!De)return null;let je=De.rawData,_e={};De.expires&&(_e.expires=De.expires),De.cacheControl&&(_e.cacheControl=De.cacheControl);let Je={};if(J){let Xe=J.finish();Xe&&(Je.resourceTiming=JSON.parse(JSON.stringify(Xe)))}se.vectorTile=De.vectorTile;let pt=se.parse(De.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[W]=se,this.fetching[W]={rawTileData:je,cacheControl:_e,resourceTiming:Je};try{let Xe=yield pt;return o.e({rawTileData:je.slice(0)},Xe,_e,Je)}finally{delete this.fetching[W]}}catch(De){throw delete this.loading[W],se.status="done",this.loaded[W]=se,De}})}reloadTile($){return o._(this,void 0,void 0,function*(){let W=$.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let J=this.loaded[W];if(J.showCollisionBoxes=$.showCollisionBoxes,J.status==="parsing"){let se=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor),be;if(this.fetching[W]){let{rawTileData:De,cacheControl:je,resourceTiming:_e}=this.fetching[W];delete this.fetching[W],be=o.e({rawTileData:De.slice(0)},se,je,_e)}else be=se;return be}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile($){return o._(this,void 0,void 0,function*(){let W=this.loading,J=$.uid;W&&W[J]&&W[J].abort&&(W[J].abort.abort(),delete W[J])})}removeTile($){return o._(this,void 0,void 0,function*(){this.loaded&&this.loaded[$.uid]&&delete this.loaded[$.uid]})}}class g{constructor(){this.loaded={}}loadTile($){return o._(this,void 0,void 0,function*(){let{uid:W,encoding:J,rawImageData:se,redFactor:be,greenFactor:De,blueFactor:je,baseShift:_e}=$,Je=se.width+2,pt=se.height+2,Xe=o.b(se)?new o.R({width:Je,height:pt},(yield o.bw(se,-1,-1,Je,pt))):se,Dt=new o.bx(W,Xe,J,be,De,je,_e);return this.loaded=this.loaded||{},this.loaded[W]=Dt,Dt})}removeTile($){let W=this.loaded,J=$.uid;W&&W[J]&&delete W[J]}}function x(ae,$){if(ae.length!==0){b(ae[0],$);for(var W=1;W<ae.length;W++)b(ae[W],!$)}}function b(ae,$){for(var W=0,J=0,se=0,be=ae.length,De=be-1;se<be;De=se++){var je=(ae[se][0]-ae[De][0])*(ae[De][1]+ae[se][1]),_e=W+je;J+=Math.abs(W)>=Math.abs(je)?W-_e+je:je-_e+W,W=_e}W+J>=0!=!!$&&ae.reverse()}var T=o.by(function ae($,W){var J,se=$&&$.type;if(se==="FeatureCollection")for(J=0;J<$.features.length;J++)ae($.features[J],W);else if(se==="GeometryCollection")for(J=0;J<$.geometries.length;J++)ae($.geometries[J],W);else if(se==="Feature")ae($.geometry,W);else if(se==="Polygon")x($.coordinates,W);else if(se==="MultiPolygon")for(J=0;J<$.coordinates.length;J++)x($.coordinates[J],W);return $});let A=o.bt.VectorTileFeature.prototype.toGeoJSON;var L={exports:{}},P=o.bz,k=o.bt.VectorTileFeature,q=U;function U(ae,$){this.options=$||{},this.features=ae,this.length=ae.length}function H(ae,$){this.id=typeof ae.id=="number"?ae.id:void 0,this.type=ae.type,this.rawGeometry=ae.type===1?[ae.geometry]:ae.geometry,this.properties=ae.tags,this.extent=$||4096}U.prototype.feature=function(ae){return new H(this.features[ae],this.options.extent)},H.prototype.loadGeometry=function(){var ae=this.rawGeometry;this.geometry=[];for(var $=0;$<ae.length;$++){for(var W=ae[$],J=[],se=0;se<W.length;se++)J.push(new P(W[se][0],W[se][1]));this.geometry.push(J)}return this.geometry},H.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ae=this.geometry,$=1/0,W=-1/0,J=1/0,se=-1/0,be=0;be<ae.length;be++)for(var De=ae[be],je=0;je<De.length;je++){var _e=De[je];$=Math.min($,_e.x),W=Math.max(W,_e.x),J=Math.min(J,_e.y),se=Math.max(se,_e.y)}return[$,J,W,se]},H.prototype.toGeoJSON=k.prototype.toGeoJSON;var X=o.bA,ee=q;function ne(ae){var $=new X;return function(W,J){for(var se in W.layers)J.writeMessage(3,pe,W.layers[se])}(ae,$),$.finish()}function pe(ae,$){var W;$.writeVarintField(15,ae.version||1),$.writeStringField(1,ae.name||""),$.writeVarintField(5,ae.extent||4096);var J={keys:[],values:[],keycache:{},valuecache:{}};for(W=0;W<ae.length;W++)J.feature=ae.feature(W),$.writeMessage(2,ue,J);var se=J.keys;for(W=0;W<se.length;W++)$.writeStringField(3,se[W]);var be=J.values;for(W=0;W<be.length;W++)$.writeMessage(4,Ye,be[W])}function ue(ae,$){var W=ae.feature;W.id!==void 0&&$.writeVarintField(1,W.id),$.writeMessage(2,Ie,ae),$.writeVarintField(3,W.type),$.writeMessage(4,Ee,W)}function Ie(ae,$){var W=ae.feature,J=ae.keys,se=ae.values,be=ae.keycache,De=ae.valuecache;for(var je in W.properties){var _e=W.properties[je],Je=be[je];if(_e!==null){Je===void 0&&(J.push(je),be[je]=Je=J.length-1),$.writeVarint(Je);var pt=typeof _e;pt!=="string"&&pt!=="boolean"&&pt!=="number"&&(_e=JSON.stringify(_e));var Xe=pt+":"+_e,Dt=De[Xe];Dt===void 0&&(se.push(_e),De[Xe]=Dt=se.length-1),$.writeVarint(Dt)}}}function Re(ae,$){return($<<3)+(7&ae)}function Te(ae){return ae<<1^ae>>31}function Ee(ae,$){for(var W=ae.loadGeometry(),J=ae.type,se=0,be=0,De=W.length,je=0;je<De;je++){var _e=W[je],Je=1;J===1&&(Je=_e.length),$.writeVarint(Re(1,Je));for(var pt=J===3?_e.length-1:_e.length,Xe=0;Xe<pt;Xe++){Xe===1&&J!==1&&$.writeVarint(Re(2,pt-1));var Dt=_e[Xe].x-se,ur=_e[Xe].y-be;$.writeVarint(Te(Dt)),$.writeVarint(Te(ur)),se+=Dt,be+=ur}J===3&&$.writeVarint(Re(7,1))}}function Ye(ae,$){var W=typeof ae;W==="string"?$.writeStringField(1,ae):W==="boolean"?$.writeBooleanField(7,ae):W==="number"&&(ae%1!=0?$.writeDoubleField(3,ae):ae<0?$.writeSVarintField(6,ae):$.writeVarintField(5,ae))}L.exports=ne,L.exports.fromVectorTileJs=ne,L.exports.fromGeojsonVt=function(ae,$){$=$||{};var W={};for(var J in ae)W[J]=new ee(ae[J].features,$),W[J].name=J,W[J].version=$.version,W[J].extent=$.extent;return ne({layers:W})},L.exports.GeoJSONWrapper=ee;var Qe=o.by(L.exports);let qe={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ae=>ae},Ue=Math.fround||(Ne=new Float32Array(1),ae=>(Ne[0]=+ae,Ne[0]));var Ne;let et=3,st=5,ft=6;class Ze{constructor($){this.options=Object.assign(Object.create(qe),$),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load($){let{log:W,minZoom:J,maxZoom:se}=this.options;W&&console.time("total time");let be=`prepare ${$.length} points`;W&&console.time(be),this.points=$;let De=[];for(let _e=0;_e<$.length;_e++){let Je=$[_e];if(!Je.geometry)continue;let[pt,Xe]=Je.geometry.coordinates,Dt=Ue(ze(pt)),ur=Ue(ge(Xe));De.push(Dt,ur,1/0,_e,-1,1),this.options.reduce&&De.push(0)}let je=this.trees[se+1]=this._createTree(De);W&&console.timeEnd(be);for(let _e=se;_e>=J;_e--){let Je=+Date.now();je=this.trees[_e]=this._createTree(this._cluster(je,_e)),W&&console.log("z%d: %d clusters in %dms",_e,je.numItems,+Date.now()-Je)}return W&&console.timeEnd("total time"),this}getClusters($,W){let J=(($[0]+180)%360+360)%360-180,se=Math.max(-90,Math.min(90,$[1])),be=$[2]===180?180:(($[2]+180)%360+360)%360-180,De=Math.max(-90,Math.min(90,$[3]));if($[2]-$[0]>=360)J=-180,be=180;else if(J>be){let Xe=this.getClusters([J,se,180,De],W),Dt=this.getClusters([-180,se,be,De],W);return Xe.concat(Dt)}let je=this.trees[this._limitZoom(W)],_e=je.range(ze(J),ge(De),ze(be),ge(se)),Je=je.data,pt=[];for(let Xe of _e){let Dt=this.stride*Xe;pt.push(Je[Dt+st]>1?tt(Je,Dt,this.clusterProps):this.points[Je[Dt+et]])}return pt}getChildren($){let W=this._getOriginId($),J=this._getOriginZoom($),se="No cluster with the specified id.",be=this.trees[J];if(!be)throw new Error(se);let De=be.data;if(W*this.stride>=De.length)throw new Error(se);let je=this.options.radius/(this.options.extent*Math.pow(2,J-1)),_e=be.within(De[W*this.stride],De[W*this.stride+1],je),Je=[];for(let pt of _e){let Xe=pt*this.stride;De[Xe+4]===$&&Je.push(De[Xe+st]>1?tt(De,Xe,this.clusterProps):this.points[De[Xe+et]])}if(Je.length===0)throw new Error(se);return Je}getLeaves($,W,J){let se=[];return this._appendLeaves(se,$,W=W||10,J=J||0,0),se}getTile($,W,J){let se=this.trees[this._limitZoom($)],be=Math.pow(2,$),{extent:De,radius:je}=this.options,_e=je/De,Je=(J-_e)/be,pt=(J+1+_e)/be,Xe={features:[]};return this._addTileFeatures(se.range((W-_e)/be,Je,(W+1+_e)/be,pt),se.data,W,J,be,Xe),W===0&&this._addTileFeatures(se.range(1-_e/be,Je,1,pt),se.data,be,J,be,Xe),W===be-1&&this._addTileFeatures(se.range(0,Je,_e/be,pt),se.data,-1,J,be,Xe),Xe.features.length?Xe:null}getClusterExpansionZoom($){let W=this._getOriginZoom($)-1;for(;W<=this.options.maxZoom;){let J=this.getChildren($);if(W++,J.length!==1)break;$=J[0].properties.cluster_id}return W}_appendLeaves($,W,J,se,be){let De=this.getChildren(W);for(let je of De){let _e=je.properties;if(_e&&_e.cluster?be+_e.point_count<=se?be+=_e.point_count:be=this._appendLeaves($,_e.cluster_id,J,se,be):be<se?be++:$.push(je),$.length===J)break}return be}_createTree($){let W=new o.av($.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<$.length;J+=this.stride)W.add($[J],$[J+1]);return W.finish(),W.data=$,W}_addTileFeatures($,W,J,se,be,De){for(let je of $){let _e=je*this.stride,Je=W[_e+st]>1,pt,Xe,Dt;if(Je)pt=lt(W,_e,this.clusterProps),Xe=W[_e],Dt=W[_e+1];else{let Dn=this.points[W[_e+et]];pt=Dn.properties;let[Gr,Nn]=Dn.geometry.coordinates;Xe=ze(Gr),Dt=ge(Nn)}let ur={type:1,geometry:[[Math.round(this.options.extent*(Xe*be-J)),Math.round(this.options.extent*(Dt*be-se))]],tags:pt},Sr;Sr=Je||this.options.generateId?W[_e+et]:this.points[W[_e+et]].id,Sr!==void 0&&(ur.id=Sr),De.features.push(ur)}}_limitZoom($){return Math.max(this.options.minZoom,Math.min(Math.floor(+$),this.options.maxZoom+1))}_cluster($,W){let{radius:J,extent:se,reduce:be,minPoints:De}=this.options,je=J/(se*Math.pow(2,W)),_e=$.data,Je=[],pt=this.stride;for(let Xe=0;Xe<_e.length;Xe+=pt){if(_e[Xe+2]<=W)continue;_e[Xe+2]=W;let Dt=_e[Xe],ur=_e[Xe+1],Sr=$.within(_e[Xe],_e[Xe+1],je),Dn=_e[Xe+st],Gr=Dn;for(let Nn of Sr){let vn=Nn*pt;_e[vn+2]>W&&(Gr+=_e[vn+st])}if(Gr>Dn&&Gr>=De){let Nn,vn=Dt*Dn,Ai=ur*Dn,ii=-1,an=((Xe/pt|0)<<5)+(W+1)+this.points.length;for(let eo of Sr){let Vo=eo*pt;if(_e[Vo+2]<=W)continue;_e[Vo+2]=W;let ea=_e[Vo+st];vn+=_e[Vo]*ea,Ai+=_e[Vo+1]*ea,_e[Vo+4]=an,be&&(Nn||(Nn=this._map(_e,Xe,!0),ii=this.clusterProps.length,this.clusterProps.push(Nn)),be(Nn,this._map(_e,Vo)))}_e[Xe+4]=an,Je.push(vn/Gr,Ai/Gr,1/0,an,-1,Gr),be&&Je.push(ii)}else{for(let Nn=0;Nn<pt;Nn++)Je.push(_e[Xe+Nn]);if(Gr>1)for(let Nn of Sr){let vn=Nn*pt;if(!(_e[vn+2]<=W)){_e[vn+2]=W;for(let Ai=0;Ai<pt;Ai++)Je.push(_e[vn+Ai])}}}}return Je}_getOriginId($){return $-this.points.length>>5}_getOriginZoom($){return($-this.points.length)%32}_map($,W,J){if($[W+st]>1){let De=this.clusterProps[$[W+ft]];return J?Object.assign({},De):De}let se=this.points[$[W+et]].properties,be=this.options.map(se);return J&&be===se?Object.assign({},be):be}}function tt(ae,$,W){return{type:"Feature",id:ae[$+et],properties:lt(ae,$,W),geometry:{type:"Point",coordinates:[(J=ae[$],360*(J-.5)),We(ae[$+1])]}};var J}function lt(ae,$,W){let J=ae[$+st],se=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,be=ae[$+ft],De=be===-1?{}:Object.assign({},W[be]);return Object.assign(De,{cluster:!0,cluster_id:ae[$+et],point_count:J,point_count_abbreviated:se})}function ze(ae){return ae/360+.5}function ge(ae){let $=Math.sin(ae*Math.PI/180),W=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return W<0?0:W>1?1:W}function We(ae){let $=(180-360*ae)*Math.PI/180;return 360*Math.atan(Math.exp($))/Math.PI-90}function Oe(ae,$,W,J){let se=J,be=$+(W-$>>1),De,je=W-$,_e=ae[$],Je=ae[$+1],pt=ae[W],Xe=ae[W+1];for(let Dt=$+3;Dt<W;Dt+=3){let ur=at(ae[Dt],ae[Dt+1],_e,Je,pt,Xe);if(ur>se)De=Dt,se=ur;else if(ur===se){let Sr=Math.abs(Dt-be);Sr<je&&(De=Dt,je=Sr)}}se>J&&(De-$>3&&Oe(ae,$,De,J),ae[De+2]=se,W-De>3&&Oe(ae,De,W,J))}function at(ae,$,W,J,se,be){let De=se-W,je=be-J;if(De!==0||je!==0){let _e=((ae-W)*De+($-J)*je)/(De*De+je*je);_e>1?(W=se,J=be):_e>0&&(W+=De*_e,J+=je*_e)}return De=ae-W,je=$-J,De*De+je*je}function ot(ae,$,W,J){let se={id:ae==null?null:ae,type:$,geometry:W,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if($==="Point"||$==="MultiPoint"||$==="LineString")Pt(se,W);else if($==="Polygon")Pt(se,W[0]);else if($==="MultiLineString")for(let be of W)Pt(se,be);else if($==="MultiPolygon")for(let be of W)Pt(se,be[0]);return se}function Pt(ae,$){for(let W=0;W<$.length;W+=3)ae.minX=Math.min(ae.minX,$[W]),ae.minY=Math.min(ae.minY,$[W+1]),ae.maxX=Math.max(ae.maxX,$[W]),ae.maxY=Math.max(ae.maxY,$[W+1])}function Mt(ae,$,W,J){if(!$.geometry)return;let se=$.geometry.coordinates;if(se&&se.length===0)return;let be=$.geometry.type,De=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),je=[],_e=$.id;if(W.promoteId?_e=$.properties[W.promoteId]:W.generateId&&(_e=J||0),be==="Point")Nt(se,je);else if(be==="MultiPoint")for(let Je of se)Nt(Je,je);else if(be==="LineString")Ae(se,je,De,!1);else if(be==="MultiLineString"){if(W.lineMetrics){for(let Je of se)je=[],Ae(Je,je,De,!1),ae.push(ot(_e,"LineString",je,$.properties));return}Lt(se,je,De,!1)}else if(be==="Polygon")Lt(se,je,De,!0);else{if(be!=="MultiPolygon"){if(be==="GeometryCollection"){for(let Je of $.geometry.geometries)Mt(ae,{id:_e,geometry:Je,properties:$.properties},W,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Je of se){let pt=[];Lt(Je,pt,De,!0),je.push(pt)}}ae.push(ot(_e,be,je,$.properties))}function Nt(ae,$){$.push(Wt(ae[0]),Ct(ae[1]),0)}function Ae(ae,$,W,J){let se,be,De=0;for(let _e=0;_e<ae.length;_e++){let Je=Wt(ae[_e][0]),pt=Ct(ae[_e][1]);$.push(Je,pt,0),_e>0&&(De+=J?(se*pt-Je*be)/2:Math.sqrt(Math.pow(Je-se,2)+Math.pow(pt-be,2))),se=Je,be=pt}let je=$.length-3;$[2]=1,Oe($,0,je,W),$[je+2]=1,$.size=Math.abs(De),$.start=0,$.end=$.size}function Lt(ae,$,W,J){for(let se=0;se<ae.length;se++){let be=[];Ae(ae[se],be,W,J),$.push(be)}}function Wt(ae){return ae/360+.5}function Ct(ae){let $=Math.sin(ae*Math.PI/180),W=.5-.25*Math.log((1+$)/(1-$))/Math.PI;return W<0?0:W>1?1:W}function ce(ae,$,W,J,se,be,De,je){if(J/=$,be>=(W/=$)&&De<J)return ae;if(De<W||be>=J)return null;let _e=[];for(let Je of ae){let pt=Je.geometry,Xe=Je.type,Dt=se===0?Je.minX:Je.minY,ur=se===0?Je.maxX:Je.maxY;if(Dt>=W&&ur<J){_e.push(Je);continue}if(ur<W||Dt>=J)continue;let Sr=[];if(Xe==="Point"||Xe==="MultiPoint")Fe(pt,Sr,W,J,se);else if(Xe==="LineString")Be(pt,Sr,W,J,se,!1,je.lineMetrics);else if(Xe==="MultiLineString")yt(pt,Sr,W,J,se,!1);else if(Xe==="Polygon")yt(pt,Sr,W,J,se,!0);else if(Xe==="MultiPolygon")for(let Dn of pt){let Gr=[];yt(Dn,Gr,W,J,se,!0),Gr.length&&Sr.push(Gr)}if(Sr.length){if(je.lineMetrics&&Xe==="LineString"){for(let Dn of Sr)_e.push(ot(Je.id,Xe,Dn,Je.tags));continue}Xe!=="LineString"&&Xe!=="MultiLineString"||(Sr.length===1?(Xe="LineString",Sr=Sr[0]):Xe="MultiLineString"),Xe!=="Point"&&Xe!=="MultiPoint"||(Xe=Sr.length===3?"Point":"MultiPoint"),_e.push(ot(Je.id,Xe,Sr,Je.tags))}}return _e.length?_e:null}function Fe(ae,$,W,J,se){for(let be=0;be<ae.length;be+=3){let De=ae[be+se];De>=W&&De<=J&&gt($,ae[be],ae[be+1],ae[be+2])}}function Be(ae,$,W,J,se,be,De){let je=mt(ae),_e=se===0?_t:Yt,Je,pt,Xe=ae.start;for(let Gr=0;Gr<ae.length-3;Gr+=3){let Nn=ae[Gr],vn=ae[Gr+1],Ai=ae[Gr+2],ii=ae[Gr+3],an=ae[Gr+4],eo=se===0?Nn:vn,Vo=se===0?ii:an,ea=!1;De&&(Je=Math.sqrt(Math.pow(Nn-ii,2)+Math.pow(vn-an,2))),eo<W?Vo>W&&(pt=_e(je,Nn,vn,ii,an,W),De&&(je.start=Xe+Je*pt)):eo>J?Vo<J&&(pt=_e(je,Nn,vn,ii,an,J),De&&(je.start=Xe+Je*pt)):gt(je,Nn,vn,Ai),Vo<W&&eo>=W&&(pt=_e(je,Nn,vn,ii,an,W),ea=!0),Vo>J&&eo<=J&&(pt=_e(je,Nn,vn,ii,an,J),ea=!0),!be&&ea&&(De&&(je.end=Xe+Je*pt),$.push(je),je=mt(ae)),De&&(Xe+=Je)}let Dt=ae.length-3,ur=ae[Dt],Sr=ae[Dt+1],Dn=se===0?ur:Sr;Dn>=W&&Dn<=J&&gt(je,ur,Sr,ae[Dt+2]),Dt=je.length-3,be&&Dt>=3&&(je[Dt]!==je[0]||je[Dt+1]!==je[1])&&gt(je,je[0],je[1],je[2]),je.length&&$.push(je)}function mt(ae){let $=[];return $.size=ae.size,$.start=ae.start,$.end=ae.end,$}function yt(ae,$,W,J,se,be){for(let De of ae)Be(De,$,W,J,se,be,!1)}function gt(ae,$,W,J){ae.push($,W,J)}function _t(ae,$,W,J,se,be){let De=(be-$)/(J-$);return gt(ae,be,W+(se-W)*De,1),De}function Yt(ae,$,W,J,se,be){let De=(be-W)/(se-W);return gt(ae,$+(J-$)*De,be,1),De}function nt(ae,$){let W=[];for(let J=0;J<ae.length;J++){let se=ae[J],be=se.type,De;if(be==="Point"||be==="MultiPoint"||be==="LineString")De=zr(se.geometry,$);else if(be==="MultiLineString"||be==="Polygon"){De=[];for(let je of se.geometry)De.push(zr(je,$))}else if(be==="MultiPolygon"){De=[];for(let je of se.geometry){let _e=[];for(let Je of je)_e.push(zr(Je,$));De.push(_e)}}W.push(ot(se.id,be,De,se.tags))}return W}function zr(ae,$){let W=[];W.size=ae.size,ae.start!==void 0&&(W.start=ae.start,W.end=ae.end);for(let J=0;J<ae.length;J+=3)W.push(ae[J]+$,ae[J+1],ae[J+2]);return W}function on(ae,$){if(ae.transformed)return ae;let W=1<<ae.z,J=ae.x,se=ae.y;for(let be of ae.features){let De=be.geometry,je=be.type;if(be.geometry=[],je===1)for(let _e=0;_e<De.length;_e+=2)be.geometry.push(pa(De[_e],De[_e+1],$,W,J,se));else for(let _e=0;_e<De.length;_e++){let Je=[];for(let pt=0;pt<De[_e].length;pt+=2)Je.push(pa(De[_e][pt],De[_e][pt+1],$,W,J,se));be.geometry.push(Je)}}return ae.transformed=!0,ae}function pa(ae,$,W,J,se,be){return[Math.round(W*(ae*J-se)),Math.round(W*($*J-be))]}function da(ae,$,W,J,se){let be=$===se.maxZoom?0:se.tolerance/((1<<$)*se.extent),De={features:[],numPoints:0,numSimplified:0,numFeatures:ae.length,source:null,x:W,y:J,z:$,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let je of ae)St(De,je,be,se);return De}function St(ae,$,W,J){let se=$.geometry,be=$.type,De=[];if(ae.minX=Math.min(ae.minX,$.minX),ae.minY=Math.min(ae.minY,$.minY),ae.maxX=Math.max(ae.maxX,$.maxX),ae.maxY=Math.max(ae.maxY,$.maxY),be==="Point"||be==="MultiPoint")for(let je=0;je<se.length;je+=3)De.push(se[je],se[je+1]),ae.numPoints++,ae.numSimplified++;else if(be==="LineString")Vr(De,se,ae,W,!1,!1);else if(be==="MultiLineString"||be==="Polygon")for(let je=0;je<se.length;je++)Vr(De,se[je],ae,W,be==="Polygon",je===0);else if(be==="MultiPolygon")for(let je=0;je<se.length;je++){let _e=se[je];for(let Je=0;Je<_e.length;Je++)Vr(De,_e[Je],ae,W,!0,Je===0)}if(De.length){let je=$.tags||null;if(be==="LineString"&&J.lineMetrics){je={};for(let Je in $.tags)je[Je]=$.tags[Je];je.mapbox_clip_start=se.start/se.size,je.mapbox_clip_end=se.end/se.size}let _e={geometry:De,type:be==="Polygon"||be==="MultiPolygon"?3:be==="LineString"||be==="MultiLineString"?2:1,tags:je};$.id!==null&&(_e.id=$.id),ae.features.push(_e)}}function Vr(ae,$,W,J,se,be){let De=J*J;if(J>0&&$.size<(se?De:J))return void(W.numPoints+=$.length/3);let je=[];for(let _e=0;_e<$.length;_e+=3)(J===0||$[_e+2]>De)&&(W.numSimplified++,je.push($[_e],$[_e+1])),W.numPoints++;se&&function(_e,Je){let pt=0;for(let Xe=0,Dt=_e.length,ur=Dt-2;Xe<Dt;ur=Xe,Xe+=2)pt+=(_e[Xe]-_e[ur])*(_e[Xe+1]+_e[ur+1]);if(pt>0===Je)for(let Xe=0,Dt=_e.length;Xe<Dt/2;Xe+=2){let ur=_e[Xe],Sr=_e[Xe+1];_e[Xe]=_e[Dt-2-Xe],_e[Xe+1]=_e[Dt-1-Xe],_e[Dt-2-Xe]=ur,_e[Dt-1-Xe]=Sr}}(je,be),ae.push(je)}let Er={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Qi{constructor($,W){let J=(W=this.options=function(be,De){for(let je in De)be[je]=De[je];return be}(Object.create(Er),W)).debug;if(J&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let se=function(be,De){let je=[];if(be.type==="FeatureCollection")for(let _e=0;_e<be.features.length;_e++)Mt(je,be.features[_e],De,_e);else Mt(je,be.type==="Feature"?be:{geometry:be},De);return je}($,W);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=function(be,De){let je=De.buffer/De.extent,_e=be,Je=ce(be,1,-1-je,je,0,-1,2,De),pt=ce(be,1,1-je,2+je,0,-1,2,De);return(Je||pt)&&(_e=ce(be,1,-je,1+je,0,-1,2,De)||[],Je&&(_e=nt(Je,1).concat(_e)),pt&&(_e=_e.concat(nt(pt,-1)))),_e}(se,W),se.length&&this.splitTile(se,0,0,0),J&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile($,W,J,se,be,De,je){let _e=[$,W,J,se],Je=this.options,pt=Je.debug;for(;_e.length;){se=_e.pop(),J=_e.pop(),W=_e.pop(),$=_e.pop();let Xe=1<<W,Dt=Ta(W,J,se),ur=this.tiles[Dt];if(!ur&&(pt>1&&console.time("creation"),ur=this.tiles[Dt]=da($,W,J,se,Je),this.tileCoords.push({z:W,x:J,y:se}),pt)){pt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,J,se,ur.numFeatures,ur.numPoints,ur.numSimplified),console.timeEnd("creation"));let ea=`z${W}`;this.stats[ea]=(this.stats[ea]||0)+1,this.total++}if(ur.source=$,be==null){if(W===Je.indexMaxZoom||ur.numPoints<=Je.indexMaxPoints)continue}else{if(W===Je.maxZoom||W===be)continue;if(be!=null){let ea=be-W;if(J!==De>>ea||se!==je>>ea)continue}}if(ur.source=null,$.length===0)continue;pt>1&&console.time("clipping");let Sr=.5*Je.buffer/Je.extent,Dn=.5-Sr,Gr=.5+Sr,Nn=1+Sr,vn=null,Ai=null,ii=null,an=null,eo=ce($,Xe,J-Sr,J+Gr,0,ur.minX,ur.maxX,Je),Vo=ce($,Xe,J+Dn,J+Nn,0,ur.minX,ur.maxX,Je);$=null,eo&&(vn=ce(eo,Xe,se-Sr,se+Gr,1,ur.minY,ur.maxY,Je),Ai=ce(eo,Xe,se+Dn,se+Nn,1,ur.minY,ur.maxY,Je),eo=null),Vo&&(ii=ce(Vo,Xe,se-Sr,se+Gr,1,ur.minY,ur.maxY,Je),an=ce(Vo,Xe,se+Dn,se+Nn,1,ur.minY,ur.maxY,Je),Vo=null),pt>1&&console.timeEnd("clipping"),_e.push(vn||[],W+1,2*J,2*se),_e.push(Ai||[],W+1,2*J,2*se+1),_e.push(ii||[],W+1,2*J+1,2*se),_e.push(an||[],W+1,2*J+1,2*se+1)}}getTile($,W,J){$=+$,W=+W,J=+J;let se=this.options,{extent:be,debug:De}=se;if($<0||$>24)return null;let je=1<<$,_e=Ta($,W=W+je&je-1,J);if(this.tiles[_e])return on(this.tiles[_e],be);De>1&&console.log("drilling down to z%d-%d-%d",$,W,J);let Je,pt=$,Xe=W,Dt=J;for(;!Je&&pt>0;)pt--,Xe>>=1,Dt>>=1,Je=this.tiles[Ta(pt,Xe,Dt)];return Je&&Je.source?(De>1&&(console.log("found parent tile z%d-%d-%d",pt,Xe,Dt),console.time("drilling down")),this.splitTile(Je.source,pt,Xe,Dt,$,W,J),De>1&&console.timeEnd("drilling down"),this.tiles[_e]?on(this.tiles[_e],be):null):null}}function Ta(ae,$,W){return 32*((1<<ae)*W+$)+ae}function Pe(ae,$){return $?ae.properties[$]:ae.id}function Ge(ae,$){if(ae==null)return!0;if(ae.type==="Feature")return Pe(ae,$)!=null;if(ae.type==="FeatureCollection"){let W=new Set;for(let J of ae.features){let se=Pe(J,$);if(se==null||W.has(se))return!1;W.add(se)}return!0}return!1}function wt(ae,$){let W=new Map;if(ae!=null)if(ae.type==="Feature")W.set(Pe(ae,$),ae);else for(let J of ae.features)W.set(Pe(J,$),J);return W}class Zt extends h{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile($,W){return o._(this,void 0,void 0,function*(){let J=$.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let se=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!se)return null;let be=new class{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.X,this.length=je.length,this._features=je}feature(je){return new class{constructor(_e){this._feature=_e,this.extent=o.X,this.type=_e.type,this.properties=_e.tags,"id"in _e&&!isNaN(_e.id)&&(this.id=parseInt(_e.id,10))}loadGeometry(){if(this._feature.type===1){let _e=[];for(let Je of this._feature.geometry)_e.push([new o.P(Je[0],Je[1])]);return _e}{let _e=[];for(let Je of this._feature.geometry){let pt=[];for(let Xe of Je)pt.push(new o.P(Xe[0],Xe[1]));_e.push(pt)}return _e}}toGeoJSON(_e,Je,pt){return A.call(this,_e,Je,pt)}}(this._features[je])}}(se.features),De=Qe(be);return De.byteOffset===0&&De.byteLength===De.buffer.byteLength||(De=new Uint8Array(De)),{vectorTile:be,rawData:De.buffer}})}loadData($){return o._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();let J=!!($&&$.request&&$.request.collectResourceTiming)&&new o.bv($.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON($,this._pendingRequest),this._geoJSONIndex=$.cluster?new Ze(function({superclusterOptions:De,clusterProperties:je}){if(!je||!De)return De;let _e={},Je={},pt={accumulated:null,zoom:0},Xe={properties:null},Dt=Object.keys(je);for(let ur of Dt){let[Sr,Dn]=je[ur],Gr=o.bC(Dn),Nn=o.bC(typeof Sr=="string"?[Sr,["accumulated"],["get",ur]]:Sr);_e[ur]=Gr.value,Je[ur]=Nn.value}return De.map=ur=>{Xe.properties=ur;let Sr={};for(let Dn of Dt)Sr[Dn]=_e[Dn].evaluate(pt,Xe);return Sr},De.reduce=(ur,Sr)=>{Xe.properties=Sr;for(let Dn of Dt)pt.accumulated=ur[Dn],ur[Dn]=Je[Dn].evaluate(pt,Xe)},De}($)).load((yield this._pendingData).features):(se=yield this._pendingData,new Qi(se,$.geojsonVtOptions)),this.loaded={};let be={};if(J){let De=J.finish();De&&(be.resourceTiming={},be.resourceTiming[$.source]=JSON.parse(JSON.stringify(De)))}return be}catch(be){if(delete this._pendingRequest,o.bB(be))return{abandoned:!0};throw be}var se})}getData(){return o._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile($){let W=this.loaded;return W&&W[$.uid]?super.reloadTile($):this.loadTile($)}loadAndProcessGeoJSON($,W){return o._(this,void 0,void 0,function*(){let J=yield this.loadGeoJSON($,W);if(delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(T(J,!0),$.filter){let se=o.bC($.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(De=>`${De.key}: ${De.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(De=>se.value.evaluate({zoom:0},De))}}return J})}loadGeoJSON($,W){return o._(this,void 0,void 0,function*(){let{promoteId:J}=$;if($.request){let se=yield o.h($.request,W);return this._dataUpdateable=Ge(se.data,J)?wt(se.data,J):void 0,se.data}if(typeof $.data=="string")try{let se=JSON.parse($.data);return this._dataUpdateable=Ge(se,J)?wt(se,J):void 0,se}catch(se){throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`)}if(!$.dataDiff)throw new Error(`Input data given to '${$.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${$.source}`);return function(se,be,De){var je,_e,Je,pt;if(be.removeAll&&se.clear(),be.remove)for(let Xe of be.remove)se.delete(Xe);if(be.add)for(let Xe of be.add){let Dt=Pe(Xe,De);Dt!=null&&se.set(Dt,Xe)}if(be.update)for(let Xe of be.update){let Dt=se.get(Xe.id);if(Dt==null)continue;let ur=!Xe.removeAllProperties&&(((je=Xe.removeProperties)===null||je===void 0?void 0:je.length)>0||((_e=Xe.addOrUpdateProperties)===null||_e===void 0?void 0:_e.length)>0);if((Xe.newGeometry||Xe.removeAllProperties||ur)&&(Dt=Object.assign({},Dt),se.set(Xe.id,Dt),ur&&(Dt.properties=Object.assign({},Dt.properties))),Xe.newGeometry&&(Dt.geometry=Xe.newGeometry),Xe.removeAllProperties)Dt.properties={};else if(((Je=Xe.removeProperties)===null||Je===void 0?void 0:Je.length)>0)for(let Sr of Xe.removeProperties)Object.prototype.hasOwnProperty.call(Dt.properties,Sr)&&delete Dt.properties[Sr];if(((pt=Xe.addOrUpdateProperties)===null||pt===void 0?void 0:pt.length)>0)for(let{key:Sr,value:Dn}of Xe.addOrUpdateProperties)Dt.properties[Sr]=Dn}}(this._dataUpdateable,$.dataDiff,J),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource($){return o._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom($){return this._geoJSONIndex.getClusterExpansionZoom($.clusterId)}getClusterChildren($){return this._geoJSONIndex.getChildren($.clusterId)}getClusterLeaves($){return this._geoJSONIndex.getLeaves($.clusterId,$.limit,$.offset)}}class Ht{constructor($){this.self=$,this.actor=new o.F($),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,J)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=J},this.self.addProtocol=o.bi,this.self.removeProtocol=o.bj,this.self.registerRTLTextPlugin=W=>{if(o.bD.isParsed())throw new Error("RTL text plugin already registered.");o.bD.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,J)=>this._getDEMWorkerSource(W,J.source).loadTile(J)),this.actor.registerMessageHandler("RDT",(W,J)=>o._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,J.source).removeTile(J)})),this.actor.registerMessageHandler("GCEZ",(W,J)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(W,J.type,J.source).getClusterExpansionZoom(J)})),this.actor.registerMessageHandler("GCC",(W,J)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(W,J.type,J.source).getClusterChildren(J)})),this.actor.registerMessageHandler("GCL",(W,J)=>o._(this,void 0,void 0,function*(){return this._getWorkerSource(W,J.type,J.source).getClusterLeaves(J)})),this.actor.registerMessageHandler("LD",(W,J)=>this._getWorkerSource(W,J.type,J.source).loadData(J)),this.actor.registerMessageHandler("GD",(W,J)=>this._getWorkerSource(W,J.type,J.source).getData()),this.actor.registerMessageHandler("LT",(W,J)=>this._getWorkerSource(W,J.type,J.source).loadTile(J)),this.actor.registerMessageHandler("RT",(W,J)=>this._getWorkerSource(W,J.type,J.source).reloadTile(J)),this.actor.registerMessageHandler("AT",(W,J)=>this._getWorkerSource(W,J.type,J.source).abortTile(J)),this.actor.registerMessageHandler("RMT",(W,J)=>this._getWorkerSource(W,J.type,J.source).removeTile(J)),this.actor.registerMessageHandler("RS",(W,J)=>o._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][J.type]||!this.workerSources[W][J.type][J.source])return;let se=this.workerSources[W][J.type][J.source];delete this.workerSources[W][J.type][J.source],se.removeSource!==void 0&&se.removeSource(J)})),this.actor.registerMessageHandler("RM",W=>o._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,J)=>o._(this,void 0,void 0,function*(){this.referrer=J})),this.actor.registerMessageHandler("SRPS",(W,J)=>this._syncRTLPluginState(W,J)),this.actor.registerMessageHandler("IS",(W,J)=>o._(this,void 0,void 0,function*(){this.self.importScripts(J)})),this.actor.registerMessageHandler("SI",(W,J)=>this._setImages(W,J)),this.actor.registerMessageHandler("UL",(W,J)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(J.layers,J.removedIds)})),this.actor.registerMessageHandler("SL",(W,J)=>o._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(J)}))}_setImages($,W){return o._(this,void 0,void 0,function*(){this.availableImages[$]=W;for(let J in this.workerSources[$]){let se=this.workerSources[$][J];for(let be in se)se[be].availableImages=W}})}_syncRTLPluginState($,W){return o._(this,void 0,void 0,function*(){if(o.bD.isParsed())return o.bD.getState();if(W.pluginStatus!=="loading")return o.bD.setState(W),W;let J=W.pluginURL;if(this.self.importScripts(J),o.bD.isParsed()){let se={pluginStatus:"loaded",pluginURL:J};return o.bD.setState(se),se}throw o.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${J}`)})}_getAvailableImages($){let W=this.availableImages[$];return W||(W=[]),W}_getLayerIndex($){let W=this.layerIndexes[$];return W||(W=this.layerIndexes[$]=new i),W}_getWorkerSource($,W,J){if(this.workerSources[$]||(this.workerSources[$]={}),this.workerSources[$][W]||(this.workerSources[$][W]={}),!this.workerSources[$][W][J]){let se={sendAsync:(be,De)=>(be.targetMapId=$,this.actor.sendAsync(be,De))};switch(W){case"vector":this.workerSources[$][W][J]=new h(se,this._getLayerIndex($),this._getAvailableImages($));break;case"geojson":this.workerSources[$][W][J]=new Zt(se,this._getLayerIndex($),this._getAvailableImages($));break;default:this.workerSources[$][W][J]=new this.externalWorkerSourceTypes[W](se,this._getLayerIndex($),this._getAvailableImages($));}}return this.workerSources[$][W][J]}_getDEMWorkerSource($,W){return this.demWorkerSources[$]||(this.demWorkerSources[$]={}),this.demWorkerSources[$][W]||(this.demWorkerSources[$][W]=new g),this.demWorkerSources[$][W]}}return o.i(self)&&(self.worker=new Ht(self)),Ht}),r("index",["exports","./shared"],function(o,i){"use strict";var a="4.7.1";let u,p,h={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:E=>new Promise((s,d)=>{let v=requestAnimationFrame(s);E.signal.addEventListener("abort",()=>{cancelAnimationFrame(v),d(i.c())})}),getImageData(E,s=0){return this.getImageCanvasContext(E).getImageData(-s,-s,E.width+2*s,E.height+2*s)},getImageCanvasContext(E){let s=window.document.createElement("canvas"),d=s.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return s.width=E.width,s.height=E.height,d.drawImage(E,0,0,E.width,E.height),d},resolveURL:E=>(u||(u=document.createElement("a")),u.href=E,u.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(p==null&&(p=matchMedia("(prefers-reduced-motion: reduce)")),p.matches)}};class g{static testProp(s){if(!g.docStyle)return s[0];for(let d=0;d<s.length;d++)if(s[d]in g.docStyle)return s[d];return s[0]}static create(s,d,v){let y=window.document.createElement(s);return d!==void 0&&(y.className=d),v&&v.appendChild(y),y}static createNS(s,d){return window.document.createElementNS(s,d)}static disableDrag(){g.docStyle&&g.selectProp&&(g.userSelect=g.docStyle[g.selectProp],g.docStyle[g.selectProp]="none")}static enableDrag(){g.docStyle&&g.selectProp&&(g.docStyle[g.selectProp]=g.userSelect)}static setTransform(s,d){s.style[g.transformProp]=d}static addEventListener(s,d,v,y={}){s.addEventListener(d,v,"passive"in y?y:y.capture)}static removeEventListener(s,d,v,y={}){s.removeEventListener(d,v,"passive"in y?y:y.capture)}static suppressClickInternal(s){s.preventDefault(),s.stopPropagation(),window.removeEventListener("click",g.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",g.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",g.suppressClickInternal,!0)},0)}static getScale(s){let d=s.getBoundingClientRect();return{x:d.width/s.offsetWidth||1,y:d.height/s.offsetHeight||1,boundingClientRect:d}}static getPoint(s,d,v){let y=d.boundingClientRect;return new i.P((v.clientX-y.left)/d.x-s.clientLeft,(v.clientY-y.top)/d.y-s.clientTop)}static mousePos(s,d){let v=g.getScale(s);return g.getPoint(s,v,d)}static touchPos(s,d){let v=[],y=g.getScale(s);for(let w=0;w<d.length;w++)v.push(g.getPoint(s,y,d[w]));return v}static mouseButton(s){return s.button}static remove(s){s.parentNode&&s.parentNode.removeChild(s)}}g.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,g.selectProp=g.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),g.transformProp=g.testProp(["transform","WebkitTransform"]);let x={supported:!1,testSupport:function(E){!A&&T&&(L?P(E):b=E)}},b,T,A=!1,L=!1;function P(E){let s=E.createTexture();E.bindTexture(E.TEXTURE_2D,s);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,T),E.isContextLost())return;x.supported=!0}catch(d){}E.deleteTexture(s),A=!0}var k;typeof document!="undefined"&&(T=document.createElement("img"),T.onload=()=>{b&&P(b),b=null,L=!0},T.onerror=()=>{A=!0,b=null},T.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(E){let s,d,v,y;E.resetRequestQueue=()=>{s=[],d=0,v=0,y={}},E.addThrottleControl=R=>{let F=v++;return y[F]=R,F},E.removeThrottleControl=R=>{delete y[R],D()},E.getImage=(R,F,V=!0)=>new Promise((G,Q)=>{x.supported&&(R.headers||(R.headers={}),R.headers.accept="image/webp,*/*"),i.e(R,{type:"image"}),s.push({abortController:F,requestParameters:R,supportImageRefresh:V,state:"queued",onError:ie=>{Q(ie)},onSuccess:ie=>{G(ie)}}),D()});let w=R=>i._(this,void 0,void 0,function*(){R.state="running";let{requestParameters:F,supportImageRefresh:V,onError:G,onSuccess:Q,abortController:ie}=R,le=V===!1&&!i.i(self)&&!i.g(F.url)&&(!F.headers||Object.keys(F.headers).reduce((xe,Me)=>xe&&Me==="accept",!0));d++;let me=le?O(F,ie):i.m(F,ie);try{let xe=yield me;delete R.abortController,R.state="completed",xe.data instanceof HTMLImageElement||i.b(xe.data)?Q(xe):xe.data&&Q({data:yield(ye=xe.data,typeof createImageBitmap=="function"?i.d(ye):i.f(ye)),cacheControl:xe.cacheControl,expires:xe.expires})}catch(xe){delete R.abortController,G(xe)}finally{d--,D()}var ye}),D=()=>{let R=(()=>{for(let F of Object.keys(y))if(y[F]())return!0;return!1})()?i.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:i.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let F=d;F<R&&s.length>0;F++){let V=s.shift();V.abortController.signal.aborted?F--:w(V)}},O=(R,F)=>new Promise((V,G)=>{let Q=new Image,ie=R.url,le=R.credentials;le&&le==="include"?Q.crossOrigin="use-credentials":(le&&le==="same-origin"||!i.s(ie))&&(Q.crossOrigin="anonymous"),F.signal.addEventListener("abort",()=>{Q.src="",G(i.c())}),Q.fetchPriority="high",Q.onload=()=>{Q.onerror=Q.onload=null,V({data:Q})},Q.onerror=()=>{Q.onerror=Q.onload=null,F.signal.aborted||G(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},Q.src=ie})}(k||(k={})),k.resetRequestQueue();class q{constructor(s){this._transformRequestFn=s}transformRequest(s,d){return this._transformRequestFn&&this._transformRequestFn(s,d)||{url:s}}setTransformRequest(s){this._transformRequestFn=s}}function U(E){var s=new i.A(3);return s[0]=E[0],s[1]=E[1],s[2]=E[2],s}var H,X=function(E,s,d){return E[0]=s[0]-d[0],E[1]=s[1]-d[1],E[2]=s[2]-d[2],E};H=new i.A(3),i.A!=Float32Array&&(H[0]=0,H[1]=0,H[2]=0);var ee=function(E){var s=E[0],d=E[1];return s*s+d*d};function ne(E){let s=[];if(typeof E=="string")s.push({id:"default",url:E});else if(E&&E.length>0){let d=[];for(let{id:v,url:y}of E){let w=`${v}${y}`;d.indexOf(w)===-1&&(d.push(w),s.push({id:v,url:y}))}}return s}function pe(E,s,d){let v=E.split("?");return v[0]+=`${s}${d}`,v.join("?")}(function(){var E=new i.A(2);i.A!=Float32Array&&(E[0]=0,E[1]=0)})();class ue{constructor(s,d,v,y){this.context=s,this.format=v,this.texture=s.gl.createTexture(),this.update(d,y)}update(s,d,v){let{width:y,height:w}=s,D=!(this.size&&this.size[0]===y&&this.size[1]===w||v),{context:O}=this,{gl:R}=O;if(this.useMipmap=!!(d&&d.useMipmap),R.bindTexture(R.TEXTURE_2D,this.texture),O.pixelStoreUnpackFlipY.set(!1),O.pixelStoreUnpack.set(1),O.pixelStoreUnpackPremultiplyAlpha.set(this.format===R.RGBA&&(!d||d.premultiply!==!1)),D)this.size=[y,w],s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||i.b(s)?R.texImage2D(R.TEXTURE_2D,0,this.format,this.format,R.UNSIGNED_BYTE,s):R.texImage2D(R.TEXTURE_2D,0,this.format,y,w,0,this.format,R.UNSIGNED_BYTE,s.data);else{let{x:F,y:V}=v||{x:0,y:0};s instanceof HTMLImageElement||s instanceof HTMLCanvasElement||s instanceof HTMLVideoElement||s instanceof ImageData||i.b(s)?R.texSubImage2D(R.TEXTURE_2D,0,F,V,R.RGBA,R.UNSIGNED_BYTE,s):R.texSubImage2D(R.TEXTURE_2D,0,F,V,y,w,R.RGBA,R.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&R.generateMipmap(R.TEXTURE_2D)}bind(s,d,v){let{context:y}=this,{gl:w}=y;w.bindTexture(w.TEXTURE_2D,this.texture),v!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(v=w.LINEAR),s!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,v||s),this.filter=s),d!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,d),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,d),this.wrap=d)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:s}=this.context;s.deleteTexture(this.texture),this.texture=null}}function Ie(E){let{userImage:s}=E;return!!(s&&s.render&&s.render())&&(E.data.replace(new Uint8Array(s.data.buffer)),!0)}class Re extends i.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new i.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(s){if(this.loaded!==s&&(this.loaded=s,s)){for(let{ids:d,promiseResolve:v}of this.requestors)v(this._getImagesForIds(d));this.requestors=[]}}getImage(s){let d=this.images[s];if(d&&!d.data&&d.spriteData){let v=d.spriteData;d.data=new i.R({width:v.width,height:v.height},v.context.getImageData(v.x,v.y,v.width,v.height).data),d.spriteData=null}return d}addImage(s,d){if(this.images[s])throw new Error(`Image id ${s} already exist, use updateImage instead`);this._validate(s,d)&&(this.images[s]=d)}_validate(s,d){let v=!0,y=d.data||d.spriteData;return this._validateStretch(d.stretchX,y&&y.width)||(this.fire(new i.j(new Error(`Image "${s}" has invalid "stretchX" value`))),v=!1),this._validateStretch(d.stretchY,y&&y.height)||(this.fire(new i.j(new Error(`Image "${s}" has invalid "stretchY" value`))),v=!1),this._validateContent(d.content,d)||(this.fire(new i.j(new Error(`Image "${s}" has invalid "content" value`))),v=!1),v}_validateStretch(s,d){if(!s)return!0;let v=0;for(let y of s){if(y[0]<v||y[1]<y[0]||d<y[1])return!1;v=y[1]}return!0}_validateContent(s,d){if(!s)return!0;if(s.length!==4)return!1;let v=d.spriteData,y=v&&v.width||d.data.width,w=v&&v.height||d.data.height;return!(s[0]<0||y<s[0]||s[1]<0||w<s[1]||s[2]<0||y<s[2]||s[3]<0||w<s[3]||s[2]<s[0]||s[3]<s[1])}updateImage(s,d,v=!0){let y=this.getImage(s);if(v&&(y.data.width!==d.data.width||y.data.height!==d.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${d.data.width}x${d.data.height}).`);d.version=y.version+1,this.images[s]=d,this.updatedImages[s]=!0}removeImage(s){let d=this.images[s];delete this.images[s],delete this.patterns[s],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(s){return new Promise((d,v)=>{let y=!0;if(!this.isLoaded())for(let w of s)this.images[w]||(y=!1);this.isLoaded()||y?d(this._getImagesForIds(s)):this.requestors.push({ids:s,promiseResolve:d})})}_getImagesForIds(s){let d={};for(let v of s){let y=this.getImage(v);y||(this.fire(new i.k("styleimagemissing",{id:v})),y=this.getImage(v)),y?d[v]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:i.w(`Image "${v}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return d}getPixelSize(){let{width:s,height:d}=this.atlasImage;return{width:s,height:d}}getPattern(s){let d=this.patterns[s],v=this.getImage(s);if(!v)return null;if(d&&d.position.version===v.version)return d.position;if(d)d.position.version=v.version;else{let y={w:v.data.width+2,h:v.data.height+2,x:0,y:0},w=new i.I(y,v);this.patterns[s]={bin:y,position:w}}return this._updatePatternAtlas(),this.patterns[s].position}bind(s){let d=s.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ue(s,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)}_updatePatternAtlas(){let s=[];for(let w in this.patterns)s.push(this.patterns[w].bin);let{w:d,h:v}=i.p(s),y=this.atlasImage;y.resize({width:d||1,height:v||1});for(let w in this.patterns){let{bin:D}=this.patterns[w],O=D.x+1,R=D.y+1,F=this.getImage(w).data,V=F.width,G=F.height;i.R.copy(F,y,{x:0,y:0},{x:O,y:R},{width:V,height:G}),i.R.copy(F,y,{x:0,y:G-1},{x:O,y:R-1},{width:V,height:1}),i.R.copy(F,y,{x:0,y:0},{x:O,y:R+G},{width:V,height:1}),i.R.copy(F,y,{x:V-1,y:0},{x:O-1,y:R},{width:1,height:G}),i.R.copy(F,y,{x:0,y:0},{x:O+V,y:R},{width:1,height:G})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(s){for(let d of s){if(this.callbackDispatchedThisFrame[d])continue;this.callbackDispatchedThisFrame[d]=!0;let v=this.getImage(d);v||i.w(`Image with ID: "${d}" was not found`),Ie(v)&&this.updateImage(d,v)}}}let Te=1e20;function Ee(E,s,d,v,y,w,D,O,R){for(let F=s;F<s+v;F++)Ye(E,d*w+F,w,y,D,O,R);for(let F=d;F<d+y;F++)Ye(E,F*w+s,1,v,D,O,R)}function Ye(E,s,d,v,y,w,D){w[0]=0,D[0]=-Te,D[1]=Te,y[0]=E[s];for(let O=1,R=0,F=0;O<v;O++){y[O]=E[s+O*d];let V=O*O;do{let G=w[R];F=(y[O]-y[G]+V-G*G)/(O-G)/2}while(F<=D[R]&&--R>-1);R++,w[R]=O,D[R]=F,D[R+1]=Te}for(let O=0,R=0;O<v;O++){for(;D[R+1]<O;)R++;let F=w[R],V=O-F;E[s+O*d]=y[F]+V*V}}class Qe{constructor(s,d){this.requestManager=s,this.localIdeographFontFamily=d,this.entries={}}setURL(s){this.url=s}getGlyphs(s){return i._(this,void 0,void 0,function*(){let d=[];for(let w in s)for(let D of s[w])d.push(this._getAndCacheGlyphsPromise(w,D));let v=yield Promise.all(d),y={};for(let{stack:w,id:D,glyph:O}of v)y[w]||(y[w]={}),y[w][D]=O&&{id:O.id,bitmap:O.bitmap.clone(),metrics:O.metrics};return y})}_getAndCacheGlyphsPromise(s,d){return i._(this,void 0,void 0,function*(){let v=this.entries[s];v||(v=this.entries[s]={glyphs:{},requests:{},ranges:{}});let y=v.glyphs[d];if(y!==void 0)return{stack:s,id:d,glyph:y};if(y=this._tinySDF(v,s,d),y)return v.glyphs[d]=y,{stack:s,id:d,glyph:y};let w=Math.floor(d/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(v.ranges[w])return{stack:s,id:d,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!v.requests[w]){let O=Qe.loadGlyphRange(s,w,this.url,this.requestManager);v.requests[w]=O}let D=yield v.requests[w];for(let O in D)this._doesCharSupportLocalGlyph(+O)||(v.glyphs[+O]=D[+O]);return v.ranges[w]=!0,{stack:s,id:d,glyph:D[d]||null}})}_doesCharSupportLocalGlyph(s){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(s))}_tinySDF(s,d,v){let y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(v))return;let w=s.tinySDF;if(!w){let O="400";/bold/i.test(d)?O="900":/medium/i.test(d)?O="500":/light/i.test(d)&&(O="200"),w=s.tinySDF=new Qe.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:O})}let D=w.draw(String.fromCharCode(v));return{id:v,bitmap:new i.o({width:D.width||60,height:D.height||60},D.data),metrics:{width:D.glyphWidth/2||24,height:D.glyphHeight/2||24,left:D.glyphLeft/2+.5||0,top:D.glyphTop/2-27.5||-8,advance:D.glyphAdvance/2||24,isDoubleResolution:!0}}}}Qe.loadGlyphRange=function(E,s,d,v){return i._(this,void 0,void 0,function*(){let y=256*s,w=y+255,D=v.transformRequest(d.replace("{fontstack}",E).replace("{range}",`${y}-${w}`),"Glyphs"),O=yield i.l(D,new AbortController);if(!O||!O.data)throw new Error(`Could not load glyph range. range: ${s}, ${y}-${w}`);let R={};for(let F of i.n(O.data))R[F.id]=F;return R})},Qe.TinySDF=class{constructor({fontSize:E=24,buffer:s=3,radius:d=8,cutoff:v=.25,fontFamily:y="sans-serif",fontWeight:w="normal",fontStyle:D="normal"}={}){this.buffer=s,this.cutoff=v,this.radius=d;let O=this.size=E+4*s,R=this._createCanvas(O),F=this.ctx=R.getContext("2d",{willReadFrequently:!0});F.font=`${D} ${w} ${E}px ${y}`,F.textBaseline="alphabetic",F.textAlign="left",F.fillStyle="black",this.gridOuter=new Float64Array(O*O),this.gridInner=new Float64Array(O*O),this.f=new Float64Array(O),this.z=new Float64Array(O+1),this.v=new Uint16Array(O)}_createCanvas(E){let s=document.createElement("canvas");return s.width=s.height=E,s}draw(E){let{width:s,actualBoundingBoxAscent:d,actualBoundingBoxDescent:v,actualBoundingBoxLeft:y,actualBoundingBoxRight:w}=this.ctx.measureText(E),D=Math.ceil(d),O=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-y))),R=Math.min(this.size-this.buffer,D+Math.ceil(v)),F=O+2*this.buffer,V=R+2*this.buffer,G=Math.max(F*V,0),Q=new Uint8ClampedArray(G),ie={data:Q,width:F,height:V,glyphWidth:O,glyphHeight:R,glyphTop:D,glyphLeft:0,glyphAdvance:s};if(O===0||R===0)return ie;let{ctx:le,buffer:me,gridInner:ye,gridOuter:xe}=this;le.clearRect(me,me,O,R),le.fillText(E,me,me+D);let Me=le.getImageData(me,me,O,R);xe.fill(Te,0,G),ye.fill(0,0,G);for(let de=0;de<R;de++)for(let ke=0;ke<O;ke++){let Ve=Me.data[4*(de*O+ke)+3]/255;if(Ve===0)continue;let Ke=(de+me)*F+ke+me;if(Ve===1)xe[Ke]=0,ye[Ke]=Te;else{let dt=.5-Ve;xe[Ke]=dt>0?dt*dt:0,ye[Ke]=dt<0?dt*dt:0}}Ee(xe,0,0,F,V,F,this.f,this.v,this.z),Ee(ye,me,me,O,R,F,this.f,this.v,this.z);for(let de=0;de<G;de++){let ke=Math.sqrt(xe[de])-Math.sqrt(ye[de]);Q[de]=Math.round(255-255*(ke/this.radius+this.cutoff))}return ie}};class qe{constructor(){this.specification=i.v.light.position}possiblyEvaluate(s,d){return i.x(s.expression.evaluate(d))}interpolate(s,d,v){return{x:i.y.number(s.x,d.x,v),y:i.y.number(s.y,d.y,v),z:i.y.number(s.z,d.z,v)}}}let Ue;class Ne extends i.E{constructor(s){super(),Ue=Ue||new i.q({anchor:new i.D(i.v.light.anchor),position:new qe,color:new i.D(i.v.light.color),intensity:new i.D(i.v.light.intensity)}),this._transitionable=new i.T(Ue),this.setLight(s),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(s,d={}){if(!this._validate(i.r,s,d))for(let v in s){let y=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),y):this._transitionable.setValue(v,y)}}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v){return(!v||v.validate!==!1)&&i.t(this,s.call(i.u,{value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v}))}}let et=new i.q({"sky-color":new i.D(i.v.sky["sky-color"]),"horizon-color":new i.D(i.v.sky["horizon-color"]),"fog-color":new i.D(i.v.sky["fog-color"]),"fog-ground-blend":new i.D(i.v.sky["fog-ground-blend"]),"horizon-fog-blend":new i.D(i.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new i.D(i.v.sky["sky-horizon-blend"]),"atmosphere-blend":new i.D(i.v.sky["atmosphere-blend"])});class st extends i.E{constructor(s){super(),this._transitionable=new i.T(et),this.setSky(s),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new i.z(0))}setSky(s,d={}){if(!this._validate(i.B,s,d)){s||(s={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let v in s){let y=s[v];v.endsWith("-transition")?this._transitionable.setTransition(v.slice(0,-11),y):this._transitionable.setValue(v,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(s){this._transitioning=this._transitionable.transitioned(s,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(s){this.properties=this._transitioning.possiblyEvaluate(s)}_validate(s,d,v={}){return(v==null?void 0:v.validate)!==!1&&i.t(this,s.call(i.u,i.e({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.v})))}calculateFogBlendOpacity(s){return s<60?0:s<70?(s-60)/10:1}}class ft{constructor(s,d){this.width=s,this.height=d,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(s,d){let v=s.join(",")+String(d);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(s,d)),this.dashEntry[v]}getDashRanges(s,d,v){let y=[],w=s.length%2==1?-s[s.length-1]*v:0,D=s[0]*v,O=!0;y.push({left:w,right:D,isDash:O,zeroLength:s[0]===0});let R=s[0];for(let F=1;F<s.length;F++){O=!O;let V=s[F];w=R*v,R+=V,D=R*v,y.push({left:w,right:D,isDash:O,zeroLength:V===0})}return y}addRoundDash(s,d,v){let y=d/2;for(let w=-v;w<=v;w++){let D=this.width*(this.nextRow+v+w),O=0,R=s[O];for(let F=0;F<this.width;F++){F/R.right>1&&(R=s[++O]);let V=Math.abs(F-R.left),G=Math.abs(F-R.right),Q=Math.min(V,G),ie,le=w/v*(y+1);if(R.isDash){let me=y-Math.abs(le);ie=Math.sqrt(Q*Q+me*me)}else ie=y-Math.sqrt(Q*Q+le*le);this.data[D+F]=Math.max(0,Math.min(255,ie+128))}}}addRegularDash(s){for(let O=s.length-1;O>=0;--O){let R=s[O],F=s[O+1];R.zeroLength?s.splice(O,1):F&&F.isDash===R.isDash&&(F.left=R.left,s.splice(O,1))}let d=s[0],v=s[s.length-1];d.isDash===v.isDash&&(d.left=v.left-this.width,v.right=d.right+this.width);let y=this.width*this.nextRow,w=0,D=s[w];for(let O=0;O<this.width;O++){O/D.right>1&&(D=s[++w]);let R=Math.abs(O-D.left),F=Math.abs(O-D.right),V=Math.min(R,F);this.data[y+O]=Math.max(0,Math.min(255,(D.isDash?V:-V)+128))}}addDash(s,d){let v=d?7:0,y=2*v+1;if(this.nextRow+y>this.height)return i.w("LineAtlas out of space"),null;let w=0;for(let O=0;O<s.length;O++)w+=s[O];if(w!==0){let O=this.width/w,R=this.getDashRanges(s,this.width,O);d?this.addRoundDash(R,O,v):this.addRegularDash(R)}let D={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:w};return this.nextRow+=y,this.dirty=!0,D}bind(s){let d=s.gl;this.texture?(d.bindTexture(d.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,d.texSubImage2D(d.TEXTURE_2D,0,0,0,this.width,this.height,d.ALPHA,d.UNSIGNED_BYTE,this.data))):(this.texture=d.createTexture(),d.bindTexture(d.TEXTURE_2D,this.texture),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.REPEAT),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.LINEAR),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.LINEAR),d.texImage2D(d.TEXTURE_2D,0,d.ALPHA,this.width,this.height,0,d.ALPHA,d.UNSIGNED_BYTE,this.data))}}let Ze="maplibre_preloaded_worker_pool";class tt{constructor(){this.active={}}acquire(s){if(!this.workers)for(this.workers=[];this.workers.length<tt.workerCount;)this.workers.push(new Worker(i.a.WORKER_URL));return this.active[s]=!0,this.workers.slice()}release(s){delete this.active[s],this.numActive()===0&&(this.workers.forEach(d=>{d.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Ze]}numActive(){return Object.keys(this.active).length}}let lt=Math.floor(h.hardwareConcurrency/2),ze,ge;function We(){return ze||(ze=new tt),ze}tt.workerCount=i.C(globalThis)?Math.max(Math.min(lt,3),1):1;class Oe{constructor(s,d){this.workerPool=s,this.actors=[],this.currentActor=0,this.id=d;let v=this.workerPool.acquire(d);for(let y=0;y<v.length;y++){let w=new i.F(v[y],d);w.name=`Worker ${y}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(s,d){let v=[];for(let y of this.actors)v.push(y.sendAsync({type:s,data:d}));return Promise.all(v)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(s=!0){this.actors.forEach(d=>{d.remove()}),this.actors=[],s&&this.workerPool.release(this.id)}registerMessageHandler(s,d){for(let v of this.actors)v.registerMessageHandler(s,d)}}function at(){return ge||(ge=new Oe(We(),i.G),ge.registerMessageHandler("GR",(E,s,d)=>i.m(s,d))),ge}function ot(E,s){let d=i.H();return i.J(d,d,[1,1,0]),i.K(d,d,[.5*E.width,.5*E.height,1]),i.L(d,d,E.calculatePosMatrix(s.toUnwrapped()))}function Pt(E,s,d,v,y,w){let D=function(G,Q,ie){if(G)for(let le of G){let me=Q[le];if(me&&me.source===ie&&me.type==="fill-extrusion")return!0}else for(let le in Q){let me=Q[le];if(me.source===ie&&me.type==="fill-extrusion")return!0}return!1}(y&&y.layers,s,E.id),O=w.maxPitchScaleFactor(),R=E.tilesIn(v,O,D);R.sort(Mt);let F=[];for(let G of R)F.push({wrappedTileID:G.tileID.wrapped().key,queryResults:G.tile.queryRenderedFeatures(s,d,E._state,G.queryGeometry,G.cameraQueryGeometry,G.scale,y,w,O,ot(E.transform,G.tileID))});let V=function(G){let Q={},ie={};for(let le of G){let me=le.queryResults,ye=le.wrappedTileID,xe=ie[ye]=ie[ye]||{};for(let Me in me){let de=me[Me],ke=xe[Me]=xe[Me]||{},Ve=Q[Me]=Q[Me]||[];for(let Ke of de)ke[Ke.featureIndex]||(ke[Ke.featureIndex]=!0,Ve.push(Ke))}}return Q}(F);for(let G in V)V[G].forEach(Q=>{let ie=Q.feature,le=E.getFeatureState(ie.layer["source-layer"],ie.id);ie.source=ie.layer.source,ie.layer["source-layer"]&&(ie.sourceLayer=ie.layer["source-layer"]),ie.state=le});return V}function Mt(E,s){let d=E.tileID,v=s.tileID;return d.overscaledZ-v.overscaledZ||d.canonical.y-v.canonical.y||d.wrap-v.wrap||d.canonical.x-v.canonical.x}function Nt(E,s,d){return i._(this,void 0,void 0,function*(){let v=E;if(E.url?v=(yield i.h(s.transformRequest(E.url,"Source"),d)).data:yield h.frameAsync(d),!v)return null;let y=i.M(i.e(v,E),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in v&&v.vector_layers&&(y.vectorLayerIds=v.vector_layers.map(w=>w.id)),y})}class Ae{constructor(s,d){s&&(d?this.setSouthWest(s).setNorthEast(d):Array.isArray(s)&&(s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1])))}setNorthEast(s){return this._ne=s instanceof i.N?new i.N(s.lng,s.lat):i.N.convert(s),this}setSouthWest(s){return this._sw=s instanceof i.N?new i.N(s.lng,s.lat):i.N.convert(s),this}extend(s){let d=this._sw,v=this._ne,y,w;if(s instanceof i.N)y=s,w=s;else{if(!(s instanceof Ae))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Ae.convert(s)):this.extend(i.N.convert(s)):s&&("lng"in s||"lon"in s)&&"lat"in s?this.extend(i.N.convert(s)):this;if(y=s._sw,w=s._ne,!y||!w)return this}return d||v?(d.lng=Math.min(y.lng,d.lng),d.lat=Math.min(y.lat,d.lat),v.lng=Math.max(w.lng,v.lng),v.lat=Math.max(w.lat,v.lat)):(this._sw=new i.N(y.lng,y.lat),this._ne=new i.N(w.lng,w.lat)),this}getCenter(){return new i.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new i.N(this.getWest(),this.getNorth())}getSouthEast(){return new i.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(s){let{lng:d,lat:v}=i.N.convert(s),y=this._sw.lng<=d&&d<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=d&&d>=this._ne.lng),this._sw.lat<=v&&v<=this._ne.lat&&y}static convert(s){return s instanceof Ae?s:s&&new Ae(s)}static fromLngLat(s,d=0){let v=360*d/40075017,y=v/Math.cos(Math.PI/180*s.lat);return new Ae(new i.N(s.lng-y,s.lat-v),new i.N(s.lng+y,s.lat+v))}adjustAntiMeridian(){let s=new i.N(this._sw.lng,this._sw.lat),d=new i.N(this._ne.lng,this._ne.lat);return new Ae(s,s.lng>d.lng?new i.N(d.lng+360,d.lat):d)}}class Lt{constructor(s,d,v){this.bounds=Ae.convert(this.validateBounds(s)),this.minzoom=d||0,this.maxzoom=v||24}validateBounds(s){return Array.isArray(s)&&s.length===4?[Math.max(-180,s[0]),Math.max(-90,s[1]),Math.min(180,s[2]),Math.min(90,s[3])]:[-180,-90,180,90]}contains(s){let d=Math.pow(2,s.z),v=Math.floor(i.O(this.bounds.getWest())*d),y=Math.floor(i.Q(this.bounds.getNorth())*d),w=Math.ceil(i.O(this.bounds.getEast())*d),D=Math.ceil(i.Q(this.bounds.getSouth())*d);return s.x>=v&&s.x<w&&s.y>=y&&s.y<D}}class Wt extends i.E{constructor(s,d,v,y){if(super(),this.id=s,this.dispatcher=v,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.e(this,i.M(d,["url","scheme","tileSize","promoteId"])),this._options=i.e({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield Nt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),s&&(i.e(this,s),s.bounds&&(this.tileBounds=new Lt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new i.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new i.j(s))}})}loaded(){return this._loaded}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}onAdd(s){this.map=s,this.load()}setSourceProperty(s){this._tileJSONRequest&&this._tileJSONRequest.abort(),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return i.e({},this._options)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v={request:this.map._requestManager.transformRequest(d,"Tile"),uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,tileSize:this.tileSize*s.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};v.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(s.actor&&s.state!=="expired"){if(s.state==="loading")return new Promise((w,D)=>{s.reloadPromise={resolve:w,reject:D}})}else s.actor=this.dispatcher.getActor(),y="LT";s.abortController=new AbortController;try{let w=yield s.actor.sendAsync({type:y,data:v},s.abortController);if(delete s.abortController,s.aborted)return;this._afterTileLoadWorkerResponse(s,w)}catch(w){if(delete s.abortController,s.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(s,null)}})}_afterTileLoadWorkerResponse(s,d){if(d&&d.resourceTiming&&(s.resourceTiming=d.resourceTiming),d&&this.map._refreshExpiredTiles&&s.setExpiryData(d),s.loadVectorData(d,this.map.painter),s.reloadPromise){let v=s.reloadPromise;s.reloadPromise=null,this.loadTile(s).then(v.resolve).catch(v.reject)}}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.actor&&(yield s.actor.sendAsync({type:"AT",data:{uid:s.uid,type:this.type,source:this.id}}))})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),s.actor&&(yield s.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Ct extends i.E{constructor(s,d,v,y){super(),this.id=s,this.dispatcher=v,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.e({type:"raster"},d),i.e(this,i.M(d,["url","scheme","tileSize"]))}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let s=yield Nt(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(i.e(this,s),s.bounds&&(this.tileBounds=new Lt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new i.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.k("data",{dataType:"source",sourceDataType:"content"})))}catch(s){this._tileJSONRequest=null,this.fire(new i.j(s))}})}loaded(){return this._loaded}onAdd(s){this.map=s,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(s){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),s(),this.load()}setTiles(s){return this.setSourceProperty(()=>{this._options.tiles=s}),this}setUrl(s){return this.setSourceProperty(()=>{this.url=s,this._options.url=s}),this}serialize(){return i.e({},this._options)}hasTile(s){return!this.tileBounds||this.tileBounds.contains(s.canonical)}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);s.abortController=new AbortController;try{let v=yield k.getImage(this.map._requestManager.transformRequest(d,"Tile"),s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(v&&v.data){this.map._refreshExpiredTiles&&v.cacheControl&&v.expires&&s.setExpiryData({cacheControl:v.cacheControl,expires:v.expires});let y=this.map.painter.context,w=y.gl,D=v.data;s.texture=this.map.painter.getTileTexture(D.width),s.texture?s.texture.update(D,{useMipmap:!0}):(s.texture=new ue(y,D,w.RGBA,{useMipmap:!0}),s.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),s.state="loaded"}}catch(v){if(delete s.abortController,s.aborted)s.state="unloaded";else if(v)throw s.state="errored",v}})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController)})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.texture&&this.map.painter.saveTileTexture(s.texture)})}hasTransition(){return!1}}class ce extends Ct{constructor(s,d,v,y){super(s,d,v,y),this.type="raster-dem",this.maxzoom=22,this._options=i.e({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox",this.redFactor=d.redFactor,this.greenFactor=d.greenFactor,this.blueFactor=d.blueFactor,this.baseShift=d.baseShift}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),v=this.map._requestManager.transformRequest(d,"Tile");s.neighboringTiles=this._getNeighboringTiles(s.tileID),s.abortController=new AbortController;try{let y=yield k.getImage(v,s.abortController,this.map._refreshExpiredTiles);if(delete s.abortController,s.aborted)return void(s.state="unloaded");if(y&&y.data){let w=y.data;this.map._refreshExpiredTiles&&y.cacheControl&&y.expires&&s.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});let D=i.b(w)&&i.U()?w:yield this.readImageNow(w),O={type:this.type,uid:s.uid,source:this.id,rawImageData:D,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!s.actor||s.state==="expired"){s.actor=this.dispatcher.getActor();let R=yield s.actor.sendAsync({type:"LDT",data:O});s.dem=R,s.needsHillshadePrepare=!0,s.needsTerrainPrepare=!0,s.state="loaded"}}}catch(y){if(delete s.abortController,s.aborted)s.state="unloaded";else if(y)throw s.state="errored",y}})}readImageNow(s){return i._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&i.V()){let d=s.width+2,v=s.height+2;try{return new i.R({width:d,height:v},(yield i.W(s,-1,-1,d,v)))}catch(y){}}return h.getImageData(s,1)})}_getNeighboringTiles(s){let d=s.canonical,v=Math.pow(2,d.z),y=(d.x-1+v)%v,w=d.x===0?s.wrap-1:s.wrap,D=(d.x+1+v)%v,O=d.x+1===v?s.wrap+1:s.wrap,R={};return R[new i.S(s.overscaledZ,w,d.z,y,d.y).key]={backfilled:!1},R[new i.S(s.overscaledZ,O,d.z,D,d.y).key]={backfilled:!1},d.y>0&&(R[new i.S(s.overscaledZ,w,d.z,y,d.y-1).key]={backfilled:!1},R[new i.S(s.overscaledZ,s.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},R[new i.S(s.overscaledZ,O,d.z,D,d.y-1).key]={backfilled:!1}),d.y+1<v&&(R[new i.S(s.overscaledZ,w,d.z,y,d.y+1).key]={backfilled:!1},R[new i.S(s.overscaledZ,s.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},R[new i.S(s.overscaledZ,O,d.z,D,d.y+1).key]={backfilled:!1}),R}unloadTile(s){return i._(this,void 0,void 0,function*(){s.demTexture&&this.map.painter.saveTileTexture(s.demTexture),s.fbo&&(s.fbo.destroy(),delete s.fbo),s.dem&&delete s.dem,delete s.neighboringTiles,s.state="unloaded",s.actor&&(yield s.actor.sendAsync({type:"RDT",data:{type:this.type,uid:s.uid,source:this.id}}))})}}class Fe extends i.E{constructor(s,d,v,y){super(),this.id=s,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=v.getActor(),this.setEventedParent(y),this._data=d.data,this._options=i.e({},d),this._collectResourceTiming=d.collectResourceTiming,d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;let w=i.X/this.tileSize;d.clusterMaxZoom!==void 0&&this.maxzoom<=d.clusterMaxZoom&&i.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${d.clusterMaxZoom}".`),this.workerOptions=i.e({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*w,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*w,extent:i.X,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?d.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:i.X,radius:(d.clusterRadius||50)*w,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return i._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(s){this.map=s,this.load()}setData(s){return this._data=s,this._updateWorkerData(),this}updateData(s){return this._updateWorkerData(s),this}getData(){return i._(this,void 0,void 0,function*(){let s=i.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:s})})}setClusterOptions(s){return this.workerOptions.cluster=s.cluster,s&&(s.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=s.clusterRadius),s.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=s.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(s){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:s,source:this.id}})}getClusterChildren(s){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:s,source:this.id}})}getClusterLeaves(s,d,v){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:s,limit:d,offset:v}})}_updateWorkerData(s){return i._(this,void 0,void 0,function*(){let d=i.e({type:this.type},this.workerOptions);s?d.dataDiff=s:typeof this._data=="string"?(d.request=this.map._requestManager.transformRequest(h.resolveURL(this._data),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new i.k("dataloading",{dataType:"source"}));try{let v=yield this.actor.sendAsync({type:"LD",data:d});if(this._pendingLoads--,this._removed||v.abandoned)return void this.fire(new i.k("dataabort",{dataType:"source"}));let y=null;v.resourceTiming&&v.resourceTiming[this.id]&&(y=v.resourceTiming[this.id].slice(0));let w={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&i.e(w,{resourceTiming:y}),this.fire(new i.k("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new i.k("data",Object.assign(Object.assign({},w),{sourceDataType:"content"})))}catch(v){if(this._pendingLoads--,this._removed)return void this.fire(new i.k("dataabort",{dataType:"source"}));this.fire(new i.j(v))}})}loaded(){return this._pendingLoads===0}loadTile(s){return i._(this,void 0,void 0,function*(){let d=s.actor?"RT":"LT";s.actor=this.actor;let v={type:this.type,uid:s.uid,tileID:s.tileID,zoom:s.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};s.abortController=new AbortController;let y=yield this.actor.sendAsync({type:d,data:v},s.abortController);delete s.abortController,s.unloadVectorData(),s.aborted||s.loadVectorData(y,this.map.painter,d==="RT")})}abortTile(s){return i._(this,void 0,void 0,function*(){s.abortController&&(s.abortController.abort(),delete s.abortController),s.aborted=!0})}unloadTile(s){return i._(this,void 0,void 0,function*(){s.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:s.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return i.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var Be=i.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class mt extends i.E{constructor(s,d,v,y){super(),this.id=s,this.dispatcher=v,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=d}load(s){return i._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new i.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let d=yield k.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,d&&d.data&&(this.image=d.data,s&&(this.coordinates=s),this._finishLoading())}catch(d){this._request=null,this._loaded=!0,this.fire(new i.j(d))}})}loaded(){return this._loaded}updateImage(s){return s.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=s.url,this.load(s.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new i.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(s){this.map=s,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(s){this.coordinates=s;let d=s.map(i.Z.fromLngLat);this.tileID=function(y){let w=1/0,D=1/0,O=-1/0,R=-1/0;for(let Q of y)w=Math.min(w,Q.x),D=Math.min(D,Q.y),O=Math.max(O,Q.x),R=Math.max(R,Q.y);let F=Math.max(O-w,R-D),V=Math.max(0,Math.floor(-Math.log(F)/Math.LN2)),G=Math.pow(2,V);return new i.a1(V,Math.floor((w+O)/2*G),Math.floor((D+R)/2*G))}(d),this.minzoom=this.maxzoom=this.tileID.z;let v=d.map(y=>this.tileID.getTilePoint(y)._round());return this._boundsArray=new i.$,this._boundsArray.emplaceBack(v[0].x,v[0].y,0,0),this._boundsArray.emplaceBack(v[1].x,v[1].y,i.X,0),this._boundsArray.emplaceBack(v[3].x,v[3].y,0,i.X),this._boundsArray.emplaceBack(v[2].x,v[2].y,i.X,i.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new i.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Be.members)),this.boundsSegments||(this.boundsSegments=i.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ue(s,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,v=!0)}v&&this.fire(new i.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(s){return i._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(s.tileID.canonical)?(this.tiles[String(s.tileID.wrap)]=s,s.buckets={}):s.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class yt extends mt{constructor(s,d,v,y){super(s,d,v,y),this.roundZoom=!0,this.type="video",this.options=d}load(){return i._(this,void 0,void 0,function*(){this._loaded=!1;let s=this.options;this.urls=[];for(let d of s.urls)this.urls.push(this.map._requestManager.transformRequest(d,"Source").url);try{let d=yield i.a3(this.urls);if(this._loaded=!0,!d)return;this.video=d,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(d){this.fire(new i.j(d))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(s){if(this.video){let d=this.video.seekable;s<d.start(0)||s>d.end(0)?this.fire(new i.j(new i.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${d.start(0)} and ${d.end(0)}-second mark.`))):this.video.currentTime=s}}getVideo(){return this.video}onAdd(s){this.map||(this.map=s,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let s=this.map.painter.context,d=s.gl;this.boundsBuffer||(this.boundsBuffer=s.createVertexBuffer(this._boundsArray,Be.members)),this.boundsSegments||(this.boundsSegments=i.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new ue(s,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE));let v=!1;for(let y in this.tiles){let w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,v=!0)}v&&this.fire(new i.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class gt extends mt{constructor(s,d,v,y){super(s,d,v,y),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(D=>typeof D!="number"))||this.fire(new i.j(new i.a2(`sources.${s}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new i.j(new i.a2(`sources.${s}`,null,"missing required property \"coordinates\""))),d.animate&&typeof d.animate!="boolean"&&this.fire(new i.j(new i.a2(`sources.${s}`,null,"optional \"animate\" property must be a boolean value"))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof HTMLCanvasElement||this.fire(new i.j(new i.a2(`sources.${s}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new i.j(new i.a2(`sources.${s}`,null,"missing required property \"canvas\""))),this.options=d,this.animate=d.animate===void 0||d.animate}load(){return i._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(s){this.map=s,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let s=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,s=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,s=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let d=this.map.painter.context,v=d.gl;this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Be.members)),this.boundsSegments||(this.boundsSegments=i.a0.simpleSegment(0,0,4,2)),this.texture?(s||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ue(d,this.canvas,v.RGBA,{premultiply:!0});let y=!1;for(let w in this.tiles){let D=this.tiles[w];D.state!=="loaded"&&(D.state="loaded",D.texture=this.texture,y=!0)}y&&this.fire(new i.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let s of[this.canvas.width,this.canvas.height])if(isNaN(s)||s<=0)return!0;return!1}}let _t={},Yt=E=>{switch(E){case"geojson":return Fe;case"image":return mt;case"raster":return Ct;case"raster-dem":return ce;case"vector":return Wt;case"video":return yt;case"canvas":return gt;}return _t[E]},nt="RTLPluginLoaded";class zr extends i.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=at()}_syncState(s){return this.status=s,this.dispatcher.broadcast("SRPS",{pluginStatus:s,pluginURL:this.url}).catch(d=>{throw this.status="error",d})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(s){return i._(this,arguments,void 0,function*(d,v=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=h.resolveURL(d),!this.url)throw new Error(`requested url ${d} is invalid`);if(this.status==="unavailable"){if(!v)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return i._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new i.k(nt))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let on=null;function pa(){return on||(on=new zr),on}class da{constructor(s,d){this.timeAdded=0,this.fadeEndTime=0,this.tileID=s,this.uid=i.a4(),this.uses=0,this.tileSize=d,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(s){let d=s+this.timeAdded;d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(s){this.demTexture&&s.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(s,d,v){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=function(y,w){let D={};if(!w)return D;for(let O of y){let R=O.layerIds.map(F=>w.getLayer(F)).filter(Boolean);if(R.length!==0){O.layers=R,O.stateDependentLayerIds&&(O.stateDependentLayers=O.stateDependentLayerIds.map(F=>R.filter(V=>V.id===F)[0]));for(let F of R)D[F.id]=O}}return D}(s.buckets,d.style),this.hasSymbolBuckets=!1;for(let y in this.buckets){let w=this.buckets[y];if(w instanceof i.a6){if(this.hasSymbolBuckets=!0,!v)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let y in this.buckets){let w=this.buckets[y];if(w instanceof i.a6&&w.hasRTLText){this.hasRTLText=!0,pa().lazyLoad();break}}this.queryPadding=0;for(let y in this.buckets){let w=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,d.style.getLayer(y).queryRadius(w))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new i.a5}unloadVectorData(){for(let s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(s){return this.buckets[s.id]}upload(s){for(let v in this.buckets){let y=this.buckets[v];y.uploadPending()&&y.upload(s)}let d=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ue(s,this.imageAtlas.image,d.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ue(s,this.glyphAtlasImage,d.ALPHA),this.glyphAtlasImage=null)}prepare(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)}queryRenderedFeatures(s,d,v,y,w,D,O,R,F,V){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:D,tileSize:this.tileSize,pixelPosMatrix:V,transform:R,params:O,queryPadding:this.queryPadding*F},s,d,v):{}}querySourceFeatures(s,d){let v=this.latestFeatureIndex;if(!v||!v.rawTileData)return;let y=v.loadVTLayers(),w=d&&d.sourceLayer?d.sourceLayer:"",D=y._geojsonTileLayer||y[w];if(!D)return;let O=i.a7(d&&d.filter),{z:R,x:F,y:V}=this.tileID.canonical,G={z:R,x:F,y:V};for(let Q=0;Q<D.length;Q++){let ie=D.feature(Q);if(O.needGeometry){let ye=i.a8(ie,!0);if(!O.filter(new i.z(this.tileID.overscaledZ),ye,this.tileID.canonical))continue}else if(!O.filter(new i.z(this.tileID.overscaledZ),ie))continue;let le=v.getId(ie,w),me=new i.a9(ie,R,F,V,le);me.tile=G,s.push(me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(s){let d=this.expirationTime;if(s.cacheControl){let v=i.aa(s.cacheControl);v["max-age"]&&(this.expirationTime=Date.now()+1e3*v["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){let v=Date.now(),y=!1;if(this.expirationTime>v)y=!1;else if(d){if(this.expirationTime<d)y=!0;else{let w=this.expirationTime-d;w?this.expirationTime=v+Math.max(w,3e4):y=!0}}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(s,d){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(s).length===0)return;let v=this.latestFeatureIndex.loadVTLayers();for(let y in this.buckets){if(!d.style.hasLayer(y))continue;let w=this.buckets[y],D=w.layers[0].sourceLayer||"_geojsonTileLayer",O=v[D],R=s[D];if(!O||!R||Object.keys(R).length===0)continue;w.update(R,O,this.imageAtlas&&this.imageAtlas.patternPositions||{});let F=d&&d.style&&d.style.getLayer(y);F&&(this.queryPadding=Math.max(this.queryPadding,F.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<h.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(s){this.symbolFadeHoldUntil=h.now()+s}setDependencies(s,d){let v={};for(let y of d)v[y]=!0;this.dependencies[s]=v}hasDependency(s,d){for(let v of s){let y=this.dependencies[v];if(y){for(let w of d)if(y[w])return!0}}return!1}}class St{constructor(s,d){this.max=s,this.onRemove=d,this.reset()}reset(){for(let s in this.data)for(let d of this.data[s])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(s,d,v){let y=s.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);let w={value:d,timeout:void 0};if(v!==void 0&&(w.timeout=setTimeout(()=>{this.remove(s,w)},v)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){let D=this._getAndRemoveByKey(this.order[0]);D&&this.onRemove(D)}return this}has(s){return s.wrapped().key in this.data}getAndRemove(s){return this.has(s)?this._getAndRemoveByKey(s.wrapped().key):null}_getAndRemoveByKey(s){let d=this.data[s].shift();return d.timeout&&clearTimeout(d.timeout),this.data[s].length===0&&delete this.data[s],this.order.splice(this.order.indexOf(s),1),d.value}getByKey(s){let d=this.data[s];return d?d[0].value:null}get(s){return this.has(s)?this.data[s.wrapped().key][0].value:null}remove(s,d){if(!this.has(s))return this;let v=s.wrapped().key,y=d===void 0?0:this.data[v].indexOf(d),w=this.data[v][y];return this.data[v].splice(y,1),w.timeout&&clearTimeout(w.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(w.value),this.order.splice(this.order.indexOf(v),1),this}setMaxSize(s){for(this.max=s;this.order.length>this.max;){let d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(s){let d=[];for(let v in this.data)for(let y of this.data[v])s(y.value)||d.push(y);for(let v of d)this.remove(v.value.tileID,v)}}class Vr{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(s,d,v){let y=String(d);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][y]=this.stateChanges[s][y]||{},i.e(this.stateChanges[s][y],v),this.deletedStates[s]===null){this.deletedStates[s]={};for(let w in this.state[s])w!==y&&(this.deletedStates[s][w]=null)}else if(this.deletedStates[s]&&this.deletedStates[s][y]===null){this.deletedStates[s][y]={};for(let w in this.state[s][y])v[w]||(this.deletedStates[s][y][w]=null)}else for(let w in v)this.deletedStates[s]&&this.deletedStates[s][y]&&this.deletedStates[s][y][w]===null&&delete this.deletedStates[s][y][w]}removeFeatureState(s,d,v){if(this.deletedStates[s]===null)return;let y=String(d);if(this.deletedStates[s]=this.deletedStates[s]||{},v&&d!==void 0)this.deletedStates[s][y]!==null&&(this.deletedStates[s][y]=this.deletedStates[s][y]||{},this.deletedStates[s][y][v]=null);else if(d!==void 0){if(this.stateChanges[s]&&this.stateChanges[s][y])for(v in this.deletedStates[s][y]={},this.stateChanges[s][y])this.deletedStates[s][y][v]=null;else this.deletedStates[s][y]=null;}else this.deletedStates[s]=null}getState(s,d){let v=String(d),y=i.e({},(this.state[s]||{})[v],(this.stateChanges[s]||{})[v]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){let w=this.deletedStates[s][d];if(w===null)return{};for(let D in w)delete y[D]}return y}initializeTileState(s,d){s.setFeatureState(this.state,d)}coalesceChanges(s,d){let v={};for(let y in this.stateChanges){this.state[y]=this.state[y]||{};let w={};for(let D in this.stateChanges[y])this.state[y][D]||(this.state[y][D]={}),i.e(this.state[y][D],this.stateChanges[y][D]),w[D]=this.state[y][D];v[y]=w}for(let y in this.deletedStates){this.state[y]=this.state[y]||{};let w={};if(this.deletedStates[y]===null)for(let D in this.state[y])w[D]={},this.state[y][D]={};else for(let D in this.deletedStates[y]){if(this.deletedStates[y][D]===null)this.state[y][D]={};else for(let O of Object.keys(this.deletedStates[y][D]))delete this.state[y][D][O];w[D]=this.state[y][D]}v[y]=v[y]||{},i.e(v[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(v).length!==0)for(let y in s)s[y].setFeatureState(v,d)}}class Er extends i.E{constructor(s,d,v){super(),this.id=s,this.dispatcher=v,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,w,D,O)=>{let R=new(Yt(w.type))(y,w,D,O);if(R.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${R.id}`);return R})(s,d,v,this),this._tiles={},this._cache=new St(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Vr,this._didEmitContent=!1,this._updated=!1}onAdd(s){this.map=s,this._maxTileCacheSize=s?s._maxTileCacheSize:null,this._maxTileCacheZoomLevels=s?s._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(s)}onRemove(s){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(s)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let s in this._tiles){let d=this._tiles[s];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let s=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,s&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(s,d,v){return i._(this,void 0,void 0,function*(){try{yield this._source.loadTile(s),this._tileLoaded(s,d,v)}catch(y){s.state="errored",y.status!==404?this._source.fire(new i.j(y,{tile:s})):this.update(this.transform,this.terrain)}})}_unloadTile(s){this._source.unloadTile&&this._source.unloadTile(s)}_abortTile(s){this._source.abortTile&&this._source.abortTile(s),this._source.fire(new i.k("dataabort",{tile:s,coord:s.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(s){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let d in this._tiles){let v=this._tiles[d];v.upload(s),v.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(s=>s.tileID).sort(Qi).map(s=>s.key)}getRenderableIds(s){let d=[];for(let v in this._tiles)this._isIdRenderable(v,s)&&d.push(this._tiles[v]);return s?d.sort((v,y)=>{let w=v.tileID,D=y.tileID,O=new i.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle),R=new i.P(D.canonical.x,D.canonical.y)._rotate(this.transform.angle);return w.overscaledZ-D.overscaledZ||R.y-O.y||R.x-O.x}).map(v=>v.tileID.key):d.map(v=>v.tileID).sort(Qi).map(v=>v.key)}hasRenderableParent(s){let d=this.findLoadedParent(s,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(s,d){return this._tiles[s]&&this._tiles[s].hasData()&&!this._coveredTiles[s]&&(d||!this._tiles[s].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let s in this._tiles)this._tiles[s].state!=="errored"&&this._reloadTile(s,"reloading")}}_reloadTile(s,d){return i._(this,void 0,void 0,function*(){let v=this._tiles[s];v&&(v.state!=="loading"&&(v.state=d),yield this._loadTile(v,s,d))})}_tileLoaded(s,d,v){s.timeAdded=h.now(),v==="expired"&&(s.refreshedUponExpiration=!0),this._setTileReloadTimer(d,s),this.getSource().type==="raster-dem"&&s.dem&&this._backfillDEM(s),this._state.initializeTileState(s,this.map?this.map.painter:null),s.aborted||this._source.fire(new i.k("data",{dataType:"source",tile:s,coord:s.tileID}))}_backfillDEM(s){let d=this.getRenderableIds();for(let y=0;y<d.length;y++){let w=d[y];if(s.neighboringTiles&&s.neighboringTiles[w]){let D=this.getTileByID(w);v(s,D),v(D,s)}}function v(y,w){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let D=w.tileID.canonical.x-y.tileID.canonical.x,O=w.tileID.canonical.y-y.tileID.canonical.y,R=Math.pow(2,y.tileID.canonical.z),F=w.tileID.key;D===0&&O===0||Math.abs(O)>1||(Math.abs(D)>1&&(Math.abs(D+R)===1?D+=R:Math.abs(D-R)===1&&(D-=R)),w.dem&&y.dem&&(y.dem.backfillBorder(w.dem,D,O),y.neighboringTiles&&y.neighboringTiles[F]&&(y.neighboringTiles[F].backfilled=!0)))}}getTile(s){return this.getTileByID(s.key)}getTileByID(s){return this._tiles[s]}_retainLoadedChildren(s,d,v,y){for(let w in this._tiles){let D=this._tiles[w];if(y[w]||!D.hasData()||D.tileID.overscaledZ<=d||D.tileID.overscaledZ>v)continue;let O=D.tileID;for(;D&&D.tileID.overscaledZ>d+1;){let F=D.tileID.scaledTo(D.tileID.overscaledZ-1);D=this._tiles[F.key],D&&D.hasData()&&(O=F)}let R=O;for(;R.overscaledZ>d;)if(R=R.scaledTo(R.overscaledZ-1),s[R.key]){y[O.key]=O;break}}}findLoadedParent(s,d){if(s.key in this._loadedParentTiles){let v=this._loadedParentTiles[s.key];return v&&v.tileID.overscaledZ>=d?v:null}for(let v=s.overscaledZ-1;v>=d;v--){let y=s.scaledTo(v),w=this._getLoadedTile(y);if(w)return w}}findLoadedSibling(s){return this._getLoadedTile(s)}_getLoadedTile(s){let d=this._tiles[s.key];return d&&d.hasData()?d:this._cache.getByKey(s.wrapped().key)}updateCacheSize(s){let d=Math.ceil(s.width/this._source.tileSize)+1,v=Math.ceil(s.height/this._source.tileSize)+1,y=Math.floor(d*v*(this._maxTileCacheZoomLevels===null?i.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(w)}handleWrapJump(s){let d=Math.round((s-(this._prevLng===void 0?s:this._prevLng))/360);if(this._prevLng=s,d){let v={};for(let y in this._tiles){let w=this._tiles[y];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+d),v[w.tileID.key]=w}this._tiles=v;for(let y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(let y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(s,d,v,y,w,D){let O={},R={},F=Object.keys(s),V=h.now();for(let G of F){let Q=s[G],ie=this._tiles[G];if(!ie||ie.fadeEndTime!==0&&ie.fadeEndTime<=V)continue;let le=this.findLoadedParent(Q,d),me=this.findLoadedSibling(Q),ye=le||me||null;ye&&(this._addTile(ye.tileID),O[ye.tileID.key]=ye.tileID),R[G]=Q}this._retainLoadedChildren(R,y,v,s);for(let G in O)s[G]||(this._coveredTiles[G]=!0,s[G]=O[G]);if(D){let G={},Q={};for(let ie of w)this._tiles[ie.key].hasData()?G[ie.key]=ie:Q[ie.key]=ie;for(let ie in Q){let le=Q[ie].children(this._source.maxzoom);this._tiles[le[0].key]&&this._tiles[le[1].key]&&this._tiles[le[2].key]&&this._tiles[le[3].key]&&(G[le[0].key]=s[le[0].key]=le[0],G[le[1].key]=s[le[1].key]=le[1],G[le[2].key]=s[le[2].key]=le[2],G[le[3].key]=s[le[3].key]=le[3],delete Q[ie])}for(let ie in Q){let le=Q[ie],me=this.findLoadedParent(le,this._source.minzoom),ye=this.findLoadedSibling(le),xe=me||ye||null;if(xe){G[xe.tileID.key]=s[xe.tileID.key]=xe.tileID;for(let Me in G)G[Me].isChildOf(xe.tileID)&&delete G[Me]}}for(let ie in this._tiles)G[ie]||(this._coveredTiles[ie]=!0)}}update(s,d){if(!this._sourceLoaded||this._paused)return;let v;this.transform=s,this.terrain=d,this.updateCacheSize(s),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?v=s.getVisibleUnwrappedCoordinates(this._source.tileID).map(V=>new i.S(V.canonical.z,V.wrap,V.canonical.z,V.canonical.x,V.canonical.y)):(v=s.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:d}),this._source.hasTile&&(v=v.filter(V=>this._source.hasTile(V)))):v=[];let y=s.coveringZoomLevel(this._source),w=Math.max(y-Er.maxOverzooming,this._source.minzoom),D=Math.max(y+Er.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let V={};for(let G of v)if(G.canonical.z>this._source.minzoom){let Q=G.scaledTo(G.canonical.z-1);V[Q.key]=Q;let ie=G.scaledTo(Math.max(this._source.minzoom,Math.min(G.canonical.z,5)));V[ie.key]=ie}v=v.concat(Object.values(V))}let O=v.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,O&&this.fire(new i.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let R=this._updateRetainedTiles(v,y);Ta(this._source.type)&&this._updateCoveredAndRetainedTiles(R,w,D,y,v,d);for(let V in R)this._tiles[V].clearFadeHold();let F=i.ab(this._tiles,R);for(let V of F){let G=this._tiles[V];G.hasSymbolBuckets&&!G.holdingForFade()?G.setHoldDuration(this.map._fadeDuration):G.hasSymbolBuckets&&!G.symbolFadeFinished()||this._removeTile(V)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let s in this._tiles)this._tiles[s].holdingForFade()&&this._removeTile(s)}_updateRetainedTiles(s,d){var v;let y={},w={},D=Math.max(d-Er.maxOverzooming,this._source.minzoom),O=Math.max(d+Er.maxUnderzooming,this._source.minzoom),R={};for(let F of s){let V=this._addTile(F);y[F.key]=F,V.hasData()||d<this._source.maxzoom&&(R[F.key]=F)}this._retainLoadedChildren(R,d,O,y);for(let F of s){let V=this._tiles[F.key];if(V.hasData())continue;if(d+1>this._source.maxzoom){let Q=F.children(this._source.maxzoom)[0],ie=this.getTile(Q);if(ie&&ie.hasData()){y[Q.key]=Q;continue}}else{let Q=F.children(this._source.maxzoom);if(y[Q[0].key]&&y[Q[1].key]&&y[Q[2].key]&&y[Q[3].key])continue}let G=V.wasRequested();for(let Q=F.overscaledZ-1;Q>=D;--Q){let ie=F.scaledTo(Q);if(w[ie.key])break;if(w[ie.key]=!0,V=this.getTile(ie),!V&&G&&(V=this._addTile(ie)),V){let le=V.hasData();if((le||!(!((v=this.map)===null||v===void 0)&&v.cancelPendingTileRequestsWhileZooming)||G)&&(y[ie.key]=ie),G=V.wasRequested(),le)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let s in this._tiles){let d=[],v,y=this._tiles[s].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){v=this._loadedParentTiles[y.key];break}d.push(y.key);let w=y.scaledTo(y.overscaledZ-1);if(v=this._getLoadedTile(w),v)break;y=w}for(let w of d)this._loadedParentTiles[w]=v}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let s in this._tiles){let d=this._tiles[s].tileID,v=this._getLoadedTile(d);this._loadedSiblingTiles[d.key]=v}}_addTile(s){let d=this._tiles[s.key];if(d)return d;d=this._cache.getAndRemove(s),d&&(this._setTileReloadTimer(s.key,d),d.tileID=s,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[s.key]&&(clearTimeout(this._cacheTimers[s.key]),delete this._cacheTimers[s.key],this._setTileReloadTimer(s.key,d)));let v=d;return d||(d=new da(s,this._source.tileSize*s.overscaleFactor()),this._loadTile(d,s.key,d.state)),d.uses++,this._tiles[s.key]=d,v||this._source.fire(new i.k("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d}_setTileReloadTimer(s,d){s in this._timers&&(clearTimeout(this._timers[s]),delete this._timers[s]);let v=d.getExpiryTimeout();v&&(this._timers[s]=setTimeout(()=>{this._reloadTile(s,"expired"),delete this._timers[s]},v))}_removeTile(s){let d=this._tiles[s];d&&(d.uses--,delete this._tiles[s],this._timers[s]&&(clearTimeout(this._timers[s]),delete this._timers[s]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}_dataHandler(s){let d=s.sourceDataType;s.dataType==="source"&&d==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&s.dataType==="source"&&d==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let s in this._tiles)this._removeTile(s);this._cache.reset()}tilesIn(s,d,v){let y=[],w=this.transform;if(!w)return y;let D=v?w.getCameraQueryGeometry(s):s,O=s.map(le=>w.pointCoordinate(le,this.terrain)),R=D.map(le=>w.pointCoordinate(le,this.terrain)),F=this.getIds(),V=1/0,G=1/0,Q=-1/0,ie=-1/0;for(let le of R)V=Math.min(V,le.x),G=Math.min(G,le.y),Q=Math.max(Q,le.x),ie=Math.max(ie,le.y);for(let le=0;le<F.length;le++){let me=this._tiles[F[le]];if(me.holdingForFade())continue;let ye=me.tileID,xe=Math.pow(2,w.zoom-me.tileID.overscaledZ),Me=d*me.queryPadding*i.X/me.tileSize/xe,de=[ye.getTilePoint(new i.Z(V,G)),ye.getTilePoint(new i.Z(Q,ie))];if(de[0].x-Me<i.X&&de[0].y-Me<i.X&&de[1].x+Me>=0&&de[1].y+Me>=0){let ke=O.map(Ke=>ye.getTilePoint(Ke)),Ve=R.map(Ke=>ye.getTilePoint(Ke));y.push({tile:me,tileID:ye,queryGeometry:ke,cameraQueryGeometry:Ve,scale:xe})}}return y}getVisibleCoordinates(s){let d=this.getRenderableIds(s).map(v=>this._tiles[v].tileID);for(let v of d)v.posMatrix=this.transform.calculatePosMatrix(v.toUnwrapped());return d}hasTransition(){if(this._source.hasTransition())return!0;if(Ta(this._source.type)){let s=h.now();for(let d in this._tiles)if(this._tiles[d].fadeEndTime>=s)return!0}return!1}setFeatureState(s,d,v){this._state.updateState(s=s||"_geojsonTileLayer",d,v)}removeFeatureState(s,d,v){this._state.removeFeatureState(s=s||"_geojsonTileLayer",d,v)}getFeatureState(s,d){return this._state.getState(s=s||"_geojsonTileLayer",d)}setDependencies(s,d,v){let y=this._tiles[s];y&&y.setDependencies(d,v)}reloadTilesForDependencies(s,d){for(let v in this._tiles)this._tiles[v].hasDependency(s,d)&&this._reloadTile(v,"reloading");this._cache.filter(v=>!v.hasDependency(s,d))}}function Qi(E,s){let d=Math.abs(2*E.wrap)-+(E.wrap<0),v=Math.abs(2*s.wrap)-+(s.wrap<0);return E.overscaledZ-s.overscaledZ||v-d||s.canonical.y-E.canonical.y||s.canonical.x-E.canonical.x}function Ta(E){return E==="raster"||E==="image"||E==="video"}Er.maxOverzooming=10,Er.maxUnderzooming=3;class Pe{constructor(s,d){this.reset(s,d)}reset(s,d){this.points=s||[],this._distances=[0];for(let v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(s){if(this.points.length===1)return this.points[0];s=i.ac(s,0,1);let d=1,v=this._distances[d],y=s*this.paddedLength+this.padding;for(;v<y&&d<this._distances.length;)v=this._distances[++d];let w=d-1,D=this._distances[w],O=v-D,R=O>0?(y-D)/O:0;return this.points[w].mult(1-R).add(this.points[d].mult(R))}}function Ge(E,s){let d=!0;return E==="always"||E!=="never"&&s!=="never"||(d=!1),d}class wt{constructor(s,d,v){let y=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(s/v),this.yCellCount=Math.ceil(d/v);for(let D=0;D<this.xCellCount*this.yCellCount;D++)y.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=s,this.height=d,this.xScale=this.xCellCount/s,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(s,d,v,y,w){this._forEachCell(d,v,y,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(s),this.bboxes.push(d),this.bboxes.push(v),this.bboxes.push(y),this.bboxes.push(w)}insertCircle(s,d,v,y){this._forEachCell(d-y,v-y,d+y,v+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(s),this.circles.push(d),this.circles.push(v),this.circles.push(y)}_insertBoxCell(s,d,v,y,w,D){this.boxCells[w].push(D)}_insertCircleCell(s,d,v,y,w,D){this.circleCells[w].push(D)}_query(s,d,v,y,w,D,O){if(v<0||s>this.width||y<0||d>this.height)return[];let R=[];if(s<=0&&d<=0&&this.width<=v&&this.height<=y){if(w)return[{key:null,x1:s,y1:d,x2:v,y2:y}];for(let F=0;F<this.boxKeys.length;F++)R.push({key:this.boxKeys[F],x1:this.bboxes[4*F],y1:this.bboxes[4*F+1],x2:this.bboxes[4*F+2],y2:this.bboxes[4*F+3]});for(let F=0;F<this.circleKeys.length;F++){let V=this.circles[3*F],G=this.circles[3*F+1],Q=this.circles[3*F+2];R.push({key:this.circleKeys[F],x1:V-Q,y1:G-Q,x2:V+Q,y2:G+Q})}}else this._forEachCell(s,d,v,y,this._queryCell,R,{hitTest:w,overlapMode:D,seenUids:{box:{},circle:{}}},O);return R}query(s,d,v,y){return this._query(s,d,v,y,!1,null)}hitTest(s,d,v,y,w,D){return this._query(s,d,v,y,!0,w,D).length>0}hitTestCircle(s,d,v,y,w){let D=s-v,O=s+v,R=d-v,F=d+v;if(O<0||D>this.width||F<0||R>this.height)return!1;let V=[];return this._forEachCell(D,R,O,F,this._queryCellCircle,V,{hitTest:!0,overlapMode:y,circle:{x:s,y:d,radius:v},seenUids:{box:{},circle:{}}},w),V.length>0}_queryCell(s,d,v,y,w,D,O,R){let{seenUids:F,hitTest:V,overlapMode:G}=O,Q=this.boxCells[w];if(Q!==null){let le=this.bboxes;for(let me of Q)if(!F.box[me]){F.box[me]=!0;let ye=4*me,xe=this.boxKeys[me];if(s<=le[ye+2]&&d<=le[ye+3]&&v>=le[ye+0]&&y>=le[ye+1]&&(!R||R(xe))&&(!V||!Ge(G,xe.overlapMode))&&(D.push({key:xe,x1:le[ye],y1:le[ye+1],x2:le[ye+2],y2:le[ye+3]}),V))return!0}}let ie=this.circleCells[w];if(ie!==null){let le=this.circles;for(let me of ie)if(!F.circle[me]){F.circle[me]=!0;let ye=3*me,xe=this.circleKeys[me];if(this._circleAndRectCollide(le[ye],le[ye+1],le[ye+2],s,d,v,y)&&(!R||R(xe))&&(!V||!Ge(G,xe.overlapMode))){let Me=le[ye],de=le[ye+1],ke=le[ye+2];if(D.push({key:xe,x1:Me-ke,y1:de-ke,x2:Me+ke,y2:de+ke}),V)return!0}}}return!1}_queryCellCircle(s,d,v,y,w,D,O,R){let{circle:F,seenUids:V,overlapMode:G}=O,Q=this.boxCells[w];if(Q!==null){let le=this.bboxes;for(let me of Q)if(!V.box[me]){V.box[me]=!0;let ye=4*me,xe=this.boxKeys[me];if(this._circleAndRectCollide(F.x,F.y,F.radius,le[ye+0],le[ye+1],le[ye+2],le[ye+3])&&(!R||R(xe))&&!Ge(G,xe.overlapMode))return D.push(!0),!0}}let ie=this.circleCells[w];if(ie!==null){let le=this.circles;for(let me of ie)if(!V.circle[me]){V.circle[me]=!0;let ye=3*me,xe=this.circleKeys[me];if(this._circlesCollide(le[ye],le[ye+1],le[ye+2],F.x,F.y,F.radius)&&(!R||R(xe))&&!Ge(G,xe.overlapMode))return D.push(!0),!0}}}_forEachCell(s,d,v,y,w,D,O,R){let F=this._convertToXCellCoord(s),V=this._convertToYCellCoord(d),G=this._convertToXCellCoord(v),Q=this._convertToYCellCoord(y);for(let ie=F;ie<=G;ie++)for(let le=V;le<=Q;le++)if(w.call(this,s,d,v,y,this.xCellCount*le+ie,D,O,R))return}_convertToXCellCoord(s){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(s*this.xScale)))}_convertToYCellCoord(s){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(s*this.yScale)))}_circlesCollide(s,d,v,y,w,D){let O=y-s,R=w-d,F=v+D;return F*F>O*O+R*R}_circleAndRectCollide(s,d,v,y,w,D,O){let R=(D-y)/2,F=Math.abs(s-(y+R));if(F>R+v)return!1;let V=(O-w)/2,G=Math.abs(d-(w+V));if(G>V+v)return!1;if(F<=R||G<=V)return!0;let Q=F-R,ie=G-V;return Q*Q+ie*ie<=v*v}}function Zt(E,s,d,v,y){let w=i.H();return s?(i.K(w,w,[1/y,1/y,1]),d||i.ad(w,w,v.angle)):i.L(w,v.labelPlaneMatrix,E),w}function Ht(E,s,d,v,y){if(s){let w=i.ae(E);return i.K(w,w,[y,y,1]),d||i.ad(w,w,-v.angle),w}return v.glCoordMatrix}function ae(E,s,d,v){let y;v?(y=[E,s,v(E,s),1],i.af(y,y,d)):(y=[E,s,0,1],Dn(y,y,d));let w=y[3];return{point:new i.P(y[0]/w,y[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function $(E,s){return .5+E/s*.5}function W(E,s){return E.x>=-s[0]&&E.x<=s[0]&&E.y>=-s[1]&&E.y<=s[1]}function J(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie,le){let me=v?E.textSizeData:E.iconSizeData,ye=i.ag(me,d.transform.zoom),xe=[256/d.width*2+1,256/d.height*2+1],Me=v?E.text.dynamicLayoutVertexArray:E.icon.dynamicLayoutVertexArray;Me.clear();let de=E.lineVertexArray,ke=v?E.text.placedSymbolArray:E.icon.placedSymbolArray,Ve=d.transform.width/d.transform.height,Ke=!1;for(let dt=0;dt<ke.length;dt++){let It=ke.get(dt);if(It.hidden||It.writingMode===i.ah.vertical&&!Ke){Sr(It.numGlyphs,Me);continue}Ke=!1;let Vt=ae(It.anchorX,It.anchorY,s,le);if(!W(Vt.point,xe)){Sr(It.numGlyphs,Me);continue}let tr=$(d.transform.cameraToCenterDistance,Vt.signedDistanceFromCamera),jt=i.ai(me,ye,It),Rt=D?jt/tr:jt*tr,fr={getElevation:le,labelPlaneMatrix:y,lineVertexArray:de,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:F,tileAnchorPoint:new i.P(It.anchorX,It.anchorY),unwrappedTileID:V,width:G,height:Q,translation:ie},kr=De(fr,It,Rt,!1,O,s,w,E.glyphOffsetArray,Me,Ve,R);Ke=kr.useVertical,(kr.notEnoughRoom||Ke||kr.needsFlipping&&De(fr,It,Rt,!0,O,s,w,E.glyphOffsetArray,Me,Ve,R).notEnoughRoom)&&Sr(It.numGlyphs,Me)}v?E.text.dynamicLayoutVertexBuffer.updateData(Me):E.icon.dynamicLayoutVertexBuffer.updateData(Me)}function se(E,s,d,v,y,w,D,O){let R=w.glyphStartIndex+w.numGlyphs,F=w.lineStartIndex,V=w.lineStartIndex+w.lineLength,G=s.getoffsetX(w.glyphStartIndex),Q=s.getoffsetX(R-1),ie=Dt(E*G,d,v,y,w.segment,F,V,O,D);if(!ie)return null;let le=Dt(E*Q,d,v,y,w.segment,F,V,O,D);return le?O.projectionCache.anyProjectionOccluded?null:{first:ie,last:le}:null}function be(E,s,d,v){return E===i.ah.horizontal&&Math.abs(d.y-s.y)>Math.abs(d.x-s.x)*v?{useVertical:!0}:(E===i.ah.vertical?s.y<d.y:s.x>d.x)?{needsFlipping:!0}:null}function De(E,s,d,v,y,w,D,O,R,F,V){let G=d/24,Q=s.lineOffsetX*G,ie=s.lineOffsetY*G,le;if(s.numGlyphs>1){let me=s.glyphStartIndex+s.numGlyphs,ye=s.lineStartIndex,xe=s.lineStartIndex+s.lineLength,Me=se(G,O,Q,ie,v,s,V,E);if(!Me)return{notEnoughRoom:!0};let de=ae(Me.first.point.x,Me.first.point.y,D,E.getElevation).point,ke=ae(Me.last.point.x,Me.last.point.y,D,E.getElevation).point;if(y&&!v){let Ve=be(s.writingMode,de,ke,F);if(Ve)return Ve}le=[Me.first];for(let Ve=s.glyphStartIndex+1;Ve<me-1;Ve++)le.push(Dt(G*O.getoffsetX(Ve),Q,ie,v,s.segment,ye,xe,E,V));le.push(Me.last)}else{if(y&&!v){let ye=ae(E.tileAnchorPoint.x,E.tileAnchorPoint.y,w,E.getElevation).point,xe=s.lineStartIndex+s.segment+1,Me=new i.P(E.lineVertexArray.getx(xe),E.lineVertexArray.gety(xe)),de=ae(Me.x,Me.y,w,E.getElevation),ke=de.signedDistanceFromCamera>0?de.point:function(Ke,dt,It,Vt,tr,jt){return je(Ke,dt,It,1,tr,jt)}(E.tileAnchorPoint,Me,ye,0,w,E),Ve=be(s.writingMode,ye,ke,F);if(Ve)return Ve}let me=Dt(G*O.getoffsetX(s.glyphStartIndex),Q,ie,v,s.segment,s.lineStartIndex,s.lineStartIndex+s.lineLength,E,V);if(!me||E.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};le=[me]}for(let me of le)i.aj(R,me.point,me.angle);return{}}function je(E,s,d,v,y,w){let D=E.add(E.sub(s)._unit()),O=y!==void 0?ae(D.x,D.y,y,w.getElevation).point:Je(D.x,D.y,w).point,R=d.sub(O);return d.add(R._mult(v/R.mag()))}function _e(E,s,d){let v=s.projectionCache;if(v.projections[E])return v.projections[E];let y=new i.P(s.lineVertexArray.getx(E),s.lineVertexArray.gety(E)),w=Je(y.x,y.y,s);if(w.signedDistanceFromCamera>0)return v.projections[E]=w.point,v.anyProjectionOccluded=v.anyProjectionOccluded||w.isOccluded,w.point;let D=E-d.direction;return function(O,R,F,V,G){return je(O,R,F,V,void 0,G)}(d.distanceFromAnchor===0?s.tileAnchorPoint:new i.P(s.lineVertexArray.getx(D),s.lineVertexArray.gety(D)),y,d.previousVertex,d.absOffsetX-d.distanceFromAnchor+1,s)}function Je(E,s,d){let v=E+d.translation[0],y=s+d.translation[1],w;return!d.pitchWithMap&&d.projection.useSpecialProjectionForSymbols?(w=d.projection.projectTileCoordinates(v,y,d.unwrappedTileID,d.getElevation),w.point.x=(.5*w.point.x+.5)*d.width,w.point.y=(.5*-w.point.y+.5)*d.height):(w=ae(v,y,d.labelPlaneMatrix,d.getElevation),w.isOccluded=!1),w}function pt(E,s,d){return E._unit()._perp()._mult(s*d)}function Xe(E,s,d,v,y,w,D,O,R){if(O.projectionCache.offsets[E])return O.projectionCache.offsets[E];let F=d.add(s);if(E+R.direction<v||E+R.direction>=y)return O.projectionCache.offsets[E]=F,F;let V=_e(E+R.direction,O,R),G=pt(V.sub(d),D,R.direction),Q=d.add(G),ie=V.add(G);return O.projectionCache.offsets[E]=i.ak(w,F,Q,ie)||F,O.projectionCache.offsets[E]}function Dt(E,s,d,v,y,w,D,O,R){let F=v?E-s:E+s,V=F>0?1:-1,G=0;v&&(V*=-1,G=Math.PI),V<0&&(G+=Math.PI);let Q,ie=V>0?w+y:w+y+1;O.projectionCache.cachedAnchorPoint?Q=O.projectionCache.cachedAnchorPoint:(Q=Je(O.tileAnchorPoint.x,O.tileAnchorPoint.y,O).point,O.projectionCache.cachedAnchorPoint=Q);let le,me,ye=Q,xe=Q,Me=0,de=0,ke=Math.abs(F),Ve=[],Ke;for(;Me+de<=ke;){if(ie+=V,ie<w||ie>=D)return null;Me+=de,xe=ye,me=le;let Vt={absOffsetX:ke,direction:V,distanceFromAnchor:Me,previousVertex:xe};if(ye=_e(ie,O,Vt),d===0)Ve.push(xe),Ke=ye.sub(xe);else{let tr,jt=ye.sub(xe);tr=jt.mag()===0?pt(_e(ie+V,O,Vt).sub(ye),d,V):pt(jt,d,V),me||(me=xe.add(tr)),le=Xe(ie,tr,ye,w,D,me,d,O,Vt),Ve.push(me),Ke=le.sub(me)}de=Ke.mag()}let dt=Ke._mult((ke-Me)/de)._add(me||xe),It=G+Math.atan2(ye.y-xe.y,ye.x-xe.x);return Ve.push(dt),{point:dt,angle:R?It:0,path:Ve}}let ur=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Sr(E,s){for(let d=0;d<E;d++){let v=s.length;s.resize(v+4),s.float32.set(ur,3*v)}}function Dn(E,s,d){let v=s[0],y=s[1];return E[0]=d[0]*v+d[4]*y+d[12],E[1]=d[1]*v+d[5]*y+d[13],E[3]=d[3]*v+d[7]*y+d[15],E}let Gr=100;class Nn{constructor(s,d,v=new wt(s.width+200,s.height+200,25),y=new wt(s.width+200,s.height+200,25)){this.transform=s,this.mapProjection=d,this.grid=v,this.ignoredGrid=y,this.pitchFactor=Math.cos(s._pitch)*s.cameraToCenterDistance,this.screenRightBoundary=s.width+Gr,this.screenBottomBoundary=s.height+Gr,this.gridRightBoundary=s.width+200,this.gridBottomBoundary=s.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(s,d,v,y,w,D,O,R,F,V,G){let Q=s.anchorPointX+R[0],ie=s.anchorPointY+R[1],le=this.projectAndGetPerspectiveRatio(y,Q,ie,w,V),me=v*le.perspectiveRatio,ye;if(D||O)ye=this._projectCollisionBox(s,me,y,w,D,O,R,le,V,G);else{let Ve=le.point.x+(G?G.x*me:0),Ke=le.point.y+(G?G.y*me:0);ye={allPointsOccluded:!1,box:[Ve+s.x1*me,Ke+s.y1*me,Ve+s.x2*me,Ke+s.y2*me]}}let[xe,Me,de,ke]=ye.box;return this.mapProjection.useSpecialProjectionForSymbols&&(D?ye.allPointsOccluded:this.mapProjection.isOccluded(Q,ie,w))||le.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(xe,Me,de,ke)||d!=="always"&&this.grid.hitTest(xe,Me,de,ke,d,F)?{box:[xe,Me,de,ke],placeable:!1,offscreen:!1}:{box:[xe,Me,de,ke],placeable:!0,offscreen:this.isOffscreen(xe,Me,de,ke)}}placeCollisionCircles(s,d,v,y,w,D,O,R,F,V,G,Q,ie,le,me,ye){let xe=[],Me=new i.P(d.anchorX,d.anchorY),de=this.getPerspectiveRatio(D,Me.x,Me.y,O,ye),ke=(G?w/de:w*de)/i.ap,Ve={getElevation:ye,labelPlaneMatrix:R,lineVertexArray:v,pitchWithMap:G,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:Me,unwrappedTileID:O,width:this.transform.width,height:this.transform.height,translation:me},Ke=se(ke,y,d.lineOffsetX*ke,d.lineOffsetY*ke,!1,d,!1,Ve),dt=!1,It=!1,Vt=!0;if(Ke){let tr=.5*ie*de+le,jt=new i.P(-100,-100),Rt=new i.P(this.screenRightBoundary,this.screenBottomBoundary),fr=new Pe,kr=Ke.first,Ft=Ke.last,Xt=[];for(let Yr=kr.path.length-1;Yr>=1;Yr--)Xt.push(kr.path[Yr]);for(let Yr=1;Yr<Ft.path.length;Yr++)Xt.push(Ft.path[Yr]);let Lr=2.5*tr;if(F){let Yr=this.projectPathToScreenSpace(Xt,Ve,F);Xt=Yr.some(yn=>yn.signedDistanceFromCamera<=0)?[]:Yr.map(yn=>yn.point)}let No=[];if(Xt.length>0){let Yr=Xt[0].clone(),yn=Xt[0].clone();for(let Oo=1;Oo<Xt.length;Oo++)Yr.x=Math.min(Yr.x,Xt[Oo].x),Yr.y=Math.min(Yr.y,Xt[Oo].y),yn.x=Math.max(yn.x,Xt[Oo].x),yn.y=Math.max(yn.y,Xt[Oo].y);No=Yr.x>=jt.x&&yn.x<=Rt.x&&Yr.y>=jt.y&&yn.y<=Rt.y?[Xt]:yn.x<jt.x||Yr.x>Rt.x||yn.y<jt.y||Yr.y>Rt.y?[]:i.al([Xt],jt.x,jt.y,Rt.x,Rt.y)}for(let Yr of No){fr.reset(Yr,.25*tr);let yn=0;yn=fr.length<=.5*tr?1:Math.ceil(fr.paddedLength/Lr)+1;for(let Oo=0;Oo<yn;Oo++){let Ca=Oo/Math.max(yn-1,1),Ru=fr.lerp(Ca),Lo=Ru.x+Gr,Ns=Ru.y+Gr;xe.push(Lo,Ns,tr,0);let Qa=Lo-tr,Aa=Ns-tr,es=Lo+tr,pc=Ns+tr;if(Vt=Vt&&this.isOffscreen(Qa,Aa,es,pc),It=It||this.isInsideGrid(Qa,Aa,es,pc),s!=="always"&&this.grid.hitTestCircle(Lo,Ns,tr,s,Q)&&(dt=!0,!V))return{circles:[],offscreen:!1,collisionDetected:dt}}}}return{circles:!V&&dt||!It||de<this.perspectiveRatioCutoff?[]:xe,offscreen:Vt,collisionDetected:dt}}projectPathToScreenSpace(s,d,v){return s.map(y=>ae(y.x,y.y,v,d.getElevation))}queryRenderedSymbols(s){if(s.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let d=[],v=1/0,y=1/0,w=-1/0,D=-1/0;for(let V of s){let G=new i.P(V.x+Gr,V.y+Gr);v=Math.min(v,G.x),y=Math.min(y,G.y),w=Math.max(w,G.x),D=Math.max(D,G.y),d.push(G)}let O=this.grid.query(v,y,w,D).concat(this.ignoredGrid.query(v,y,w,D)),R={},F={};for(let V of O){let G=V.key;if(R[G.bucketInstanceId]===void 0&&(R[G.bucketInstanceId]={}),R[G.bucketInstanceId][G.featureIndex])continue;let Q=[new i.P(V.x1,V.y1),new i.P(V.x2,V.y1),new i.P(V.x2,V.y2),new i.P(V.x1,V.y2)];i.am(d,Q)&&(R[G.bucketInstanceId][G.featureIndex]=!0,F[G.bucketInstanceId]===void 0&&(F[G.bucketInstanceId]=[]),F[G.bucketInstanceId].push(G.featureIndex))}return F}insertCollisionBox(s,d,v,y,w,D){(v?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:D,overlapMode:d},s[0],s[1],s[2],s[3])}insertCollisionCircles(s,d,v,y,w,D){let O=v?this.ignoredGrid:this.grid,R={bucketInstanceId:y,featureIndex:w,collisionGroupID:D,overlapMode:d};for(let F=0;F<s.length;F+=4)O.insertCircle(R,s[F],s[F+1],s[F+2])}projectAndGetPerspectiveRatio(s,d,v,y,w){let D;w?(D=[d,v,w(d,v),1],i.af(D,D,s)):(D=[d,v,0,1],Dn(D,D,s));let O=D[3];return{point:new i.P((D[0]/O+1)/2*this.transform.width+Gr,(-D[1]/O+1)/2*this.transform.height+Gr),perspectiveRatio:.5+this.transform.cameraToCenterDistance/O*.5,isOccluded:!1,signedDistanceFromCamera:O}}getPerspectiveRatio(s,d,v,y,w){let D=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(d,v,y,w):ae(d,v,s,w);return .5+this.transform.cameraToCenterDistance/D.signedDistanceFromCamera*.5}isOffscreen(s,d,v,y){return v<Gr||s>=this.screenRightBoundary||y<Gr||d>this.screenBottomBoundary}isInsideGrid(s,d,v,y){return v>=0&&s<this.gridRightBoundary&&y>=0&&d<this.gridBottomBoundary}getViewportMatrix(){let s=i.an([]);return i.J(s,s,[-100,-100,0]),s}_projectCollisionBox(s,d,v,y,w,D,O,R,F,V){let G=new i.P(1,0),Q=new i.P(0,1),ie=new i.P(s.anchorPointX+O[0],s.anchorPointY+O[1]);if(D&&!w){let Vt=this.projectAndGetPerspectiveRatio(v,ie.x+1,ie.y,y,F).point.sub(R.point).unit(),tr=Math.atan(Vt.y/Vt.x)+(Vt.x<0?Math.PI:0),jt=Math.sin(tr),Rt=Math.cos(tr);G=new i.P(Rt,jt),Q=new i.P(-jt,Rt)}else if(!D&&w){let Vt=-this.transform.angle,tr=Math.sin(Vt),jt=Math.cos(Vt);G=new i.P(jt,tr),Q=new i.P(-tr,jt)}let le=R.point,me=d;if(w){le=ie;let Vt=this.transform.zoom-Math.floor(this.transform.zoom);me=Math.pow(2,-Vt),me*=this.mapProjection.getPitchedTextCorrection(this.transform,ie,y),V||(me*=i.ac(.5+R.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}V&&(le=le.add(G.mult(V.x*me)).add(Q.mult(V.y*me)));let ye=s.x1*me,xe=s.x2*me,Me=(ye+xe)/2,de=s.y1*me,ke=s.y2*me,Ve=(de+ke)/2,Ke=[{offsetX:ye,offsetY:de},{offsetX:Me,offsetY:de},{offsetX:xe,offsetY:de},{offsetX:xe,offsetY:Ve},{offsetX:xe,offsetY:ke},{offsetX:Me,offsetY:ke},{offsetX:ye,offsetY:ke},{offsetX:ye,offsetY:Ve}],dt=[];for(let{offsetX:Vt,offsetY:tr}of Ke)dt.push(new i.P(le.x+G.x*Vt+Q.x*tr,le.y+G.y*Vt+Q.y*tr));let It=!1;if(w){let Vt=dt.map(tr=>this.projectAndGetPerspectiveRatio(v,tr.x,tr.y,y,F));It=Vt.some(tr=>!tr.isOccluded),dt=Vt.map(tr=>tr.point)}else It=!0;return{box:i.ao(dt),allPointsOccluded:!It}}}function vn(E,s,d){return s*(i.X/(E.tileSize*Math.pow(2,d-E.tileID.overscaledZ)))}class Ai{constructor(s,d,v,y){this.opacity=s?Math.max(0,Math.min(1,s.opacity+(s.placed?d:-d))):y&&v?1:0,this.placed=v}isHidden(){return this.opacity===0&&!this.placed}}class ii{constructor(s,d,v,y,w){this.text=new Ai(s?s.text:null,d,v,w),this.icon=new Ai(s?s.icon:null,d,y,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class an{constructor(s,d,v){this.text=s,this.icon=d,this.skipFade=v}}class eo{constructor(){this.invProjMatrix=i.H(),this.viewportMatrix=i.H(),this.circles=[]}}class Vo{constructor(s,d,v,y,w){this.bucketInstanceId=s,this.featureIndex=d,this.sourceLayerIndex=v,this.bucketIndex=y,this.tileID=w}}class ea{constructor(s){this.crossSourceCollisions=s,this.maxGroupID=0,this.collisionGroups={}}get(s){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[s]){let d=++this.maxGroupID;this.collisionGroups[s]={ID:d,predicate:v=>v.collisionGroupID===d}}return this.collisionGroups[s]}}function ha(E,s,d,v,y){let{horizontalAlign:w,verticalAlign:D}=i.au(E);return new i.P(-(w-.5)*s+v[0]*y,-(D-.5)*d+v[1]*y)}class Ja{constructor(s,d,v,y,w,D){this.transform=s.clone(),this.terrain=v,this.collisionIndex=new Nn(this.transform,d),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ea(w),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=D,D&&(D.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(s){let d=this.terrain;return d?(v,y)=>d.getElevation(s,v,y):null}getBucketParts(s,d,v,y){let w=v.getBucket(d),D=v.latestFeatureIndex;if(!w||!D||d.id!==w.layerIds[0])return;let O=v.collisionBoxArray,R=w.layers[0].layout,F=w.layers[0].paint,V=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),G=v.tileSize/i.X,Q=v.tileID.toUnwrapped(),ie=this.transform.calculatePosMatrix(Q),le=R.get("text-pitch-alignment")==="map",me=R.get("text-rotation-alignment")==="map",ye=vn(v,1,this.transform.zoom),xe=this.collisionIndex.mapProjection.translatePosition(this.transform,v,F.get("text-translate"),F.get("text-translate-anchor")),Me=this.collisionIndex.mapProjection.translatePosition(this.transform,v,F.get("icon-translate"),F.get("icon-translate-anchor")),de=Zt(ie,le,me,this.transform,ye),ke=null;if(le){let Ke=Ht(ie,le,me,this.transform,ye);ke=i.L([],this.transform.labelPlaneMatrix,Ke)}this.retainedQueryData[w.bucketInstanceId]=new Vo(w.bucketInstanceId,D,w.sourceLayerIndex,w.index,v.tileID);let Ve={bucket:w,layout:R,translationText:xe,translationIcon:Me,posMatrix:ie,unwrappedTileID:Q,textLabelPlaneMatrix:de,labelToScreenMatrix:ke,scale:V,textPixelRatio:G,holdingForFade:v.holdingForFade(),collisionBoxArray:O,partiallyEvaluatedTextSize:i.ag(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(y)for(let Ke of w.sortKeyRanges){let{sortKey:dt,symbolInstanceStart:It,symbolInstanceEnd:Vt}=Ke;s.push({sortKey:dt,symbolInstanceStart:It,symbolInstanceEnd:Vt,parameters:Ve})}else s.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Ve})}attemptAnchorPlacement(s,d,v,y,w,D,O,R,F,V,G,Q,ie,le,me,ye,xe,Me,de){let ke=i.aq[s.textAnchor],Ve=[s.textOffset0,s.textOffset1],Ke=ha(ke,v,y,Ve,w),dt=this.collisionIndex.placeCollisionBox(d,Q,R,F,V,O,D,ye,G.predicate,de,Ke);if((!Me||this.collisionIndex.placeCollisionBox(Me,Q,R,F,V,O,D,xe,G.predicate,de,Ke).placeable)&&dt.placeable){let It;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID]&&this.prevPlacement.placements[ie.crossTileID].text&&(It=this.prevPlacement.variableOffsets[ie.crossTileID].anchor),ie.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ie.crossTileID]={textOffset:Ve,width:v,height:y,anchor:ke,textBoxScale:w,prevAnchor:It},this.markUsedJustification(le,ke,ie,me),le.allowVerticalPlacement&&(this.markUsedOrientation(le,me,ie),this.placedOrientations[ie.crossTileID]=me),{shift:Ke,placedGlyphBoxes:dt}}}placeLayerBucketPart(s,d,v){let{bucket:y,layout:w,translationText:D,translationIcon:O,posMatrix:R,unwrappedTileID:F,textLabelPlaneMatrix:V,labelToScreenMatrix:G,textPixelRatio:Q,holdingForFade:ie,collisionBoxArray:le,partiallyEvaluatedTextSize:me,collisionGroup:ye}=s.parameters,xe=w.get("text-optional"),Me=w.get("icon-optional"),de=i.ar(w,"text-overlap","text-allow-overlap"),ke=de==="always",Ve=i.ar(w,"icon-overlap","icon-allow-overlap"),Ke=Ve==="always",dt=w.get("text-rotation-alignment")==="map",It=w.get("text-pitch-alignment")==="map",Vt=w.get("icon-text-fit")!=="none",tr=w.get("symbol-z-order")==="viewport-y",jt=ke&&(Ke||!y.hasIconData()||Me),Rt=Ke&&(ke||!y.hasTextData()||xe);!y.collisionArrays&&le&&y.deserializeCollisionBoxes(le);let fr=this._getTerrainElevationFunc(this.retainedQueryData[y.bucketInstanceId].tileID),kr=(Ft,Xt,Lr)=>{var No,Yr;if(d[Ft.crossTileID])return;if(ie)return void(this.placements[Ft.crossTileID]=new an(!1,!1,!1));let yn=!1,Oo=!1,Ca=!0,Ru=null,Lo={box:null,placeable:!1,offscreen:null},Ns={box:null,placeable:!1,offscreen:null},Qa=null,Aa=null,es=null,pc=0,Wm=0,S_=0;Xt.textFeatureIndex?pc=Xt.textFeatureIndex:Ft.useRuntimeCollisionCircles&&(pc=Ft.featureIndex),Xt.verticalTextFeatureIndex&&(Wm=Xt.verticalTextFeatureIndex);let $m=Xt.textBox;if($m){let Wl=ma=>{let Da=i.ah.horizontal;if(y.allowVerticalPlacement&&!ma&&this.prevPlacement){let vl=this.prevPlacement.placedOrientations[Ft.crossTileID];vl&&(this.placedOrientations[Ft.crossTileID]=vl,Da=vl,this.markUsedOrientation(y,Da,Ft))}return Da},$l=(ma,Da)=>{if(y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&Xt.verticalTextBox){for(let vl of y.writingModes)if(vl===i.ah.vertical?(Lo=Da(),Ns=Lo):Lo=ma(),Lo&&Lo.placeable)break}else Lo=ma()},xp=Ft.textAnchorOffsetStartIndex,ju=Ft.textAnchorOffsetEndIndex;if(ju===xp){let ma=(Da,vl)=>{let wn=this.collisionIndex.placeCollisionBox(Da,de,Q,R,F,It,dt,D,ye.predicate,fr);return wn&&wn.placeable&&(this.markUsedOrientation(y,vl,Ft),this.placedOrientations[Ft.crossTileID]=vl),wn};$l(()=>ma($m,i.ah.horizontal),()=>{let Da=Xt.verticalTextBox;return y.allowVerticalPlacement&&Ft.numVerticalGlyphVertices>0&&Da?ma(Da,i.ah.vertical):{box:null,offscreen:null}}),Wl(Lo&&Lo.placeable)}else{let ma=i.aq[(Yr=(No=this.prevPlacement)===null||No===void 0?void 0:No.variableOffsets[Ft.crossTileID])===null||Yr===void 0?void 0:Yr.anchor],Da=(wn,eh,Ym)=>{let Zm=wn.x2-wn.x1,b4=wn.y2-wn.y1,OF=Ft.textBoxScale,w4=Vt&&Ve==="never"?eh:null,bp=null,E4=de==="never"?1:2,T_="never";ma&&E4++;for(let Cy=0;Cy<E4;Cy++){for(let M_=xp;M_<ju;M_++){let C_=y.textAnchorOffsets.get(M_);if(ma&&C_.textAnchor!==ma)continue;let Km=this.attemptAnchorPlacement(C_,wn,Zm,b4,OF,dt,It,Q,R,F,ye,T_,Ft,y,Ym,D,O,w4,fr);if(Km&&(bp=Km.placedGlyphBoxes,bp&&bp.placeable))return yn=!0,Ru=Km.shift,bp}ma?ma=null:T_=de}return v&&!bp&&(bp={box:this.collisionIndex.placeCollisionBox($m,"always",Q,R,F,It,dt,D,ye.predicate,fr,new i.P(0,0)).box,offscreen:!1,placeable:!1}),bp};$l(()=>Da($m,Xt.iconBox,i.ah.horizontal),()=>{let wn=Xt.verticalTextBox;return y.allowVerticalPlacement&&(!Lo||!Lo.placeable)&&Ft.numVerticalGlyphVertices>0&&wn?Da(wn,Xt.verticalIconBox,i.ah.vertical):{box:null,occluded:!0,offscreen:null}}),Lo&&(yn=Lo.placeable,Ca=Lo.offscreen);let vl=Wl(Lo&&Lo.placeable);if(!yn&&this.prevPlacement){let wn=this.prevPlacement.variableOffsets[Ft.crossTileID];wn&&(this.variableOffsets[Ft.crossTileID]=wn,this.markUsedJustification(y,wn.anchor,Ft,vl))}}}if(Qa=Lo,yn=Qa&&Qa.placeable,Ca=Qa&&Qa.offscreen,Ft.useRuntimeCollisionCircles){let Wl=y.text.placedSymbolArray.get(Ft.centerJustifiedTextSymbolIndex),$l=i.ai(y.textSizeData,me,Wl),xp=w.get("text-padding");Aa=this.collisionIndex.placeCollisionCircles(de,Wl,y.lineVertexArray,y.glyphOffsetArray,$l,R,F,V,G,v,It,ye.predicate,Ft.collisionCircleDiameter,xp,D,fr),Aa.circles.length&&Aa.collisionDetected&&!v&&i.w("Collisions detected, but collision boxes are not shown"),yn=ke||Aa.circles.length>0&&!Aa.collisionDetected,Ca=Ca&&Aa.offscreen}if(Xt.iconFeatureIndex&&(S_=Xt.iconFeatureIndex),Xt.iconBox){let Wl=$l=>this.collisionIndex.placeCollisionBox($l,Ve,Q,R,F,It,dt,O,ye.predicate,fr,Vt&&Ru?Ru:void 0);Ns&&Ns.placeable&&Xt.verticalIconBox?(es=Wl(Xt.verticalIconBox),Oo=es.placeable):(es=Wl(Xt.iconBox),Oo=es.placeable),Ca=Ca&&es.offscreen}let Hl=xe||Ft.numHorizontalGlyphVertices===0&&Ft.numVerticalGlyphVertices===0,I_=Me||Ft.numIconVertices===0;Hl||I_?I_?Hl||(Oo=Oo&&yn):yn=Oo&&yn:Oo=yn=Oo&&yn;let FS=Oo&&es.placeable;if(yn&&Qa.placeable&&this.collisionIndex.insertCollisionBox(Qa.box,de,w.get("text-ignore-placement"),y.bucketInstanceId,Ns&&Ns.placeable&&Wm?Wm:pc,ye.ID),FS&&this.collisionIndex.insertCollisionBox(es.box,Ve,w.get("icon-ignore-placement"),y.bucketInstanceId,S_,ye.ID),Aa&&yn&&this.collisionIndex.insertCollisionCircles(Aa.circles,de,w.get("text-ignore-placement"),y.bucketInstanceId,pc,ye.ID),v&&this.storeCollisionData(y.bucketInstanceId,Lr,Xt,Qa,es,Aa),Ft.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ft.crossTileID]=new an(yn||jt,Oo||Rt,Ca||y.justReloaded),d[Ft.crossTileID]=!0};if(tr){if(s.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ft=y.getSortedSymbolIndexes(this.transform.angle);for(let Xt=Ft.length-1;Xt>=0;--Xt){let Lr=Ft[Xt];kr(y.symbolInstances.get(Lr),y.collisionArrays[Lr],Lr)}}else for(let Ft=s.symbolInstanceStart;Ft<s.symbolInstanceEnd;Ft++)kr(y.symbolInstances.get(Ft),y.collisionArrays[Ft],Ft);if(v&&y.bucketInstanceId in this.collisionCircleArrays){let Ft=this.collisionCircleArrays[y.bucketInstanceId];i.as(Ft.invProjMatrix,R),Ft.viewportMatrix=this.collisionIndex.getViewportMatrix()}y.justReloaded=!1}storeCollisionData(s,d,v,y,w,D){if(v.textBox||v.iconBox){let O,R;this.collisionBoxArrays.has(s)?O=this.collisionBoxArrays.get(s):(O=new Map,this.collisionBoxArrays.set(s,O)),O.has(d)?R=O.get(d):(R={text:null,icon:null},O.set(d,R)),v.textBox&&(R.text=y.box),v.iconBox&&(R.icon=w.box)}if(D){let O=this.collisionCircleArrays[s];O===void 0&&(O=this.collisionCircleArrays[s]=new eo);for(let R=0;R<D.circles.length;R+=4)O.circles.push(D.circles[R+0]),O.circles.push(D.circles[R+1]),O.circles.push(D.circles[R+2]),O.circles.push(D.collisionDetected?1:0)}}markUsedJustification(s,d,v,y){let w;w=y===i.ah.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[i.at(d)];let D=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];for(let O of D)O>=0&&(s.text.placedSymbolArray.get(O).crossTileID=w>=0&&O!==w?0:v.crossTileID)}markUsedOrientation(s,d,v){let y=d===i.ah.horizontal||d===i.ah.horizontalOnly?d:0,w=d===i.ah.vertical?d:0,D=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];for(let O of D)s.text.placedSymbolArray.get(O).placedOrientation=y;v.verticalPlacedTextSymbolIndex&&(s.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(s){this.commitTime=s,this.zoomAtLastRecencyCheck=this.transform.zoom;let d=this.prevPlacement,v=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;let y=d?d.symbolFadeChange(s):1,w=d?d.opacities:{},D=d?d.variableOffsets:{},O=d?d.placedOrientations:{};for(let R in this.placements){let F=this.placements[R],V=w[R];V?(this.opacities[R]=new ii(V,y,F.text,F.icon),v=v||F.text!==V.text.placed||F.icon!==V.icon.placed):(this.opacities[R]=new ii(null,y,F.text,F.icon,F.skipFade),v=v||F.text||F.icon)}for(let R in w){let F=w[R];if(!this.opacities[R]){let V=new ii(F,y,!1,!1);V.isHidden()||(this.opacities[R]=V,v=v||F.text.placed||F.icon.placed)}}for(let R in D)this.variableOffsets[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.variableOffsets[R]=D[R]);for(let R in O)this.placedOrientations[R]||!this.opacities[R]||this.opacities[R].isHidden()||(this.placedOrientations[R]=O[R]);if(d&&d.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");v?this.lastPlacementChangeTime=s:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:s)}updateLayerOpacities(s,d){let v={};for(let y of d){let w=y.getBucket(s);w&&y.latestFeatureIndex&&s.id===w.layerIds[0]&&this.updateBucketOpacities(w,y.tileID,v,y.collisionBoxArray)}}updateBucketOpacities(s,d,v,y){s.hasTextData()&&(s.text.opacityVertexArray.clear(),s.text.hasVisibleVertices=!1),s.hasIconData()&&(s.icon.opacityVertexArray.clear(),s.icon.hasVisibleVertices=!1),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexArray.clear(),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexArray.clear();let w=s.layers[0],D=w.layout,O=new ii(null,0,!1,!1,!0),R=D.get("text-allow-overlap"),F=D.get("icon-allow-overlap"),V=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),G=D.get("text-rotation-alignment")==="map",Q=D.get("text-pitch-alignment")==="map",ie=D.get("icon-text-fit")!=="none",le=new ii(null,0,R&&(F||!s.hasIconData()||D.get("icon-optional")),F&&(R||!s.hasTextData()||D.get("text-optional")),!0);!s.collisionArrays&&y&&(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData())&&s.deserializeCollisionBoxes(y);let me=(xe,Me,de)=>{for(let ke=0;ke<Me/4;ke++)xe.opacityVertexArray.emplaceBack(de);xe.hasVisibleVertices=xe.hasVisibleVertices||de!==Im},ye=this.collisionBoxArrays.get(s.bucketInstanceId);for(let xe=0;xe<s.symbolInstances.length;xe++){let Me=s.symbolInstances.get(xe),{numHorizontalGlyphVertices:de,numVerticalGlyphVertices:ke,crossTileID:Ve}=Me,Ke=this.opacities[Ve];v[Ve]?Ke=O:Ke||(Ke=le,this.opacities[Ve]=Ke),v[Ve]=!0;let dt=Me.numIconVertices>0,It=this.placedOrientations[Me.crossTileID],Vt=It===i.ah.vertical,tr=It===i.ah.horizontal||It===i.ah.horizontalOnly;if(de>0||ke>0){let Rt=hl(Ke.text);me(s.text,de,Vt?Im:Rt),me(s.text,ke,tr?Im:Rt);let fr=Ke.text.isHidden();[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(Xt=>{Xt>=0&&(s.text.placedSymbolArray.get(Xt).hidden=fr||Vt?1:0)}),Me.verticalPlacedTextSymbolIndex>=0&&(s.text.placedSymbolArray.get(Me.verticalPlacedTextSymbolIndex).hidden=fr||tr?1:0);let kr=this.variableOffsets[Me.crossTileID];kr&&this.markUsedJustification(s,kr.anchor,Me,It);let Ft=this.placedOrientations[Me.crossTileID];Ft&&(this.markUsedJustification(s,"left",Me,Ft),this.markUsedOrientation(s,Ft,Me))}if(dt){let Rt=hl(Ke.icon),fr=!(ie&&Me.verticalPlacedIconSymbolIndex&&Vt);Me.placedIconSymbolIndex>=0&&(me(s.icon,Me.numIconVertices,fr?Rt:Im),s.icon.placedSymbolArray.get(Me.placedIconSymbolIndex).hidden=Ke.icon.isHidden()),Me.verticalPlacedIconSymbolIndex>=0&&(me(s.icon,Me.numVerticalIconVertices,fr?Im:Rt),s.icon.placedSymbolArray.get(Me.verticalPlacedIconSymbolIndex).hidden=Ke.icon.isHidden())}let jt=ye&&ye.has(xe)?ye.get(xe):{text:null,icon:null};if(s.hasIconCollisionBoxData()||s.hasTextCollisionBoxData()){let Rt=s.collisionArrays[xe];if(Rt){let fr=new i.P(0,0);if(Rt.textBox||Rt.verticalTextBox){let kr=!0;if(V){let Ft=this.variableOffsets[Ve];Ft?(fr=ha(Ft.anchor,Ft.width,Ft.height,Ft.textOffset,Ft.textBoxScale),G&&fr._rotate(Q?this.transform.angle:-this.transform.angle)):kr=!1}if(Rt.textBox||Rt.verticalTextBox){let Ft;Rt.textBox&&(Ft=Vt),Rt.verticalTextBox&&(Ft=tr),Sm(s.textCollisionBox.collisionVertexArray,Ke.text.placed,!kr||Ft,jt.text,fr.x,fr.y)}}if(Rt.iconBox||Rt.verticalIconBox){let kr=!!(!tr&&Rt.verticalIconBox),Ft;Rt.iconBox&&(Ft=kr),Rt.verticalIconBox&&(Ft=!kr),Sm(s.iconCollisionBox.collisionVertexArray,Ke.icon.placed,Ft,jt.icon,ie?fr.x:0,ie?fr.y:0)}}}}if(s.sortFeatures(this.transform.angle),this.retainedQueryData[s.bucketInstanceId]&&(this.retainedQueryData[s.bucketInstanceId].featureSortOrder=s.featureSortOrder),s.hasTextData()&&s.text.opacityVertexBuffer&&s.text.opacityVertexBuffer.updateData(s.text.opacityVertexArray),s.hasIconData()&&s.icon.opacityVertexBuffer&&s.icon.opacityVertexBuffer.updateData(s.icon.opacityVertexArray),s.hasIconCollisionBoxData()&&s.iconCollisionBox.collisionVertexBuffer&&s.iconCollisionBox.collisionVertexBuffer.updateData(s.iconCollisionBox.collisionVertexArray),s.hasTextCollisionBoxData()&&s.textCollisionBox.collisionVertexBuffer&&s.textCollisionBox.collisionVertexBuffer.updateData(s.textCollisionBox.collisionVertexArray),s.text.opacityVertexArray.length!==s.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${s.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${s.text.layoutVertexArray.length}) / 4`);if(s.icon.opacityVertexArray.length!==s.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${s.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${s.icon.layoutVertexArray.length}) / 4`);if(s.bucketInstanceId in this.collisionCircleArrays){let xe=this.collisionCircleArrays[s.bucketInstanceId];s.placementInvProjMatrix=xe.invProjMatrix,s.placementViewportMatrix=xe.viewportMatrix,s.collisionCircleArray=xe.circles,delete this.collisionCircleArrays[s.bucketInstanceId]}}symbolFadeChange(s){return this.fadeDuration===0?1:(s-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(s){return Math.max(0,(this.transform.zoom-s)/1.5)}hasTransitions(s){return this.stale||s-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(s,d){let v=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*v>s}setStale(){this.stale=!0}}function Sm(E,s,d,v,y,w){v&&v.length!==0||(v=[0,0,0,0]);let D=v[0]-Gr,O=v[1]-Gr,R=v[2]-Gr,F=v[3]-Gr;E.emplaceBack(s?1:0,d?1:0,y||0,w||0,D,O),E.emplaceBack(s?1:0,d?1:0,y||0,w||0,R,O),E.emplaceBack(s?1:0,d?1:0,y||0,w||0,R,F),E.emplaceBack(s?1:0,d?1:0,y||0,w||0,D,F)}let to=Math.pow(2,25),XE=Math.pow(2,24),JE=Math.pow(2,17),pl=Math.pow(2,16),dl=Math.pow(2,9),aF=Math.pow(2,8),Ul=Math.pow(2,1);function hl(E){if(E.opacity===0&&!E.placed)return 0;if(E.opacity===1&&E.placed)return 4294967295;let s=E.placed?1:0,d=Math.floor(127*E.opacity);return d*to+s*XE+d*JE+s*pl+d*dl+s*aF+d*Ul+s}let Im=0;function Bd(){return{isOccluded:(E,s,d)=>!1,getPitchedTextCorrection:(E,s,d)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(E,s,d,v){throw new Error("Not implemented.")},translatePosition:(E,s,d,v)=>function(y,w,D,O,R=!1){if(!D[0]&&!D[1])return[0,0];let F=R?O==="map"?y.angle:0:O==="viewport"?-y.angle:0;if(F){let V=Math.sin(F),G=Math.cos(F);D=[D[0]*G-D[1]*V,D[0]*V+D[1]*G]}return[R?D[0]:vn(w,D[0],y.zoom),R?D[1]:vn(w,D[1],y.zoom)]}(E,s,d,v),getCircleRadiusCorrection:E=>1}}class Di{constructor(s){this._sortAcrossTiles=s.layout.get("symbol-z-order")!=="viewport-y"&&!s.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(s,d,v,y,w){let D=this._bucketParts;for(;this._currentTileIndex<s.length;)if(d.getBucketParts(D,y,s[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,D.sort((O,R)=>O.sortKey-R.sortKey));this._currentPartIndex<D.length;)if(d.placeLayerBucketPart(D[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,w())return!0;return!1}}class cy{constructor(s,d,v,y,w,D,O,R){this.placement=new Ja(s,Bd(),d,D,O,R),this._currentPlacementIndex=v.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(s,d,v){let y=h.now(),w=()=>!this._forceFullPlacement&&h.now()-y>2;for(;this._currentPlacementIndex>=0;){let D=d[s[this._currentPlacementIndex]],O=this.placement.collisionIndex.transform.zoom;if(D.type==="symbol"&&(!D.minzoom||D.minzoom<=O)&&(!D.maxzoom||D.maxzoom>O)){if(this._inProgressLayer||(this._inProgressLayer=new Di(D)),this._inProgressLayer.continuePlacement(v[D.source],this.placement,this._showCollisionBoxes,D,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(s){return this.placement.commit(s),this.placement}}let Nu=512/i.X/2;class wi{constructor(s,d,v){this.tileID=s,this.bucketInstanceId=v,this._symbolsByKey={};let y=new Map;for(let w=0;w<d.length;w++){let D=d.get(w),O=D.key,R=y.get(O);R?R.push(D):y.set(O,[D])}for(let[w,D]of y){let O={positions:D.map(R=>({x:Math.floor(R.anchorX*Nu),y:Math.floor(R.anchorY*Nu)})),crossTileIDs:D.map(R=>R.crossTileID)};if(O.positions.length>128){let R=new i.av(O.positions.length,16,Uint16Array);for(let{x:F,y:V}of O.positions)R.add(F,V);R.finish(),delete O.positions,O.index=R}this._symbolsByKey[w]=O}}getScaledCoordinates(s,d){let{x:v,y,z:w}=this.tileID.canonical,{x:D,y:O,z:R}=d.canonical,F=Nu/Math.pow(2,R-w),V=(O*i.X+s.anchorY)*F,G=y*i.X*Nu;return{x:Math.floor((D*i.X+s.anchorX)*F-v*i.X*Nu),y:Math.floor(V-G)}}findMatches(s,d,v){let y=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z);for(let w=0;w<s.length;w++){let D=s.get(w);if(D.crossTileID)continue;let O=this._symbolsByKey[D.key];if(!O)continue;let R=this.getScaledCoordinates(D,d);if(O.index){let F=O.index.range(R.x-y,R.y-y,R.x+y,R.y+y).sort();for(let V of F){let G=O.crossTileIDs[V];if(!v[G]){v[G]=!0,D.crossTileID=G;break}}}else if(O.positions)for(let F=0;F<O.positions.length;F++){let V=O.positions[F],G=O.crossTileIDs[F];if(Math.abs(V.x-R.x)<=y&&Math.abs(V.y-R.y)<=y&&!v[G]){v[G]=!0,D.crossTileID=G;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:s})=>s)}}class $1{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ou{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(s){let d=Math.round((s-this.lng)/360);if(d!==0)for(let v in this.indexes){let y=this.indexes[v],w={};for(let D in y){let O=y[D];O.tileID=O.tileID.unwrapTo(O.tileID.wrap+d),w[O.tileID.key]=O}this.indexes[v]=w}this.lng=s}addBucket(s,d,v){if(this.indexes[s.overscaledZ]&&this.indexes[s.overscaledZ][s.key]){if(this.indexes[s.overscaledZ][s.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(s.overscaledZ,this.indexes[s.overscaledZ][s.key])}for(let w=0;w<d.symbolInstances.length;w++)d.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[s.overscaledZ]||(this.usedCrossTileIDs[s.overscaledZ]={});let y=this.usedCrossTileIDs[s.overscaledZ];for(let w in this.indexes){let D=this.indexes[w];if(Number(w)>s.overscaledZ)for(let O in D){let R=D[O];R.tileID.isChildOf(s)&&R.findMatches(d.symbolInstances,s,y)}else{let O=D[s.scaledTo(Number(w)).key];O&&O.findMatches(d.symbolInstances,s,y)}}for(let w=0;w<d.symbolInstances.length;w++){let D=d.symbolInstances.get(w);D.crossTileID||(D.crossTileID=v.generate(),y[D.crossTileID]=!0)}return this.indexes[s.overscaledZ]===void 0&&(this.indexes[s.overscaledZ]={}),this.indexes[s.overscaledZ][s.key]=new wi(s,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(s,d){for(let v of d.getCrossTileIDsLists())for(let y of v)delete this.usedCrossTileIDs[s][y]}removeStaleBuckets(s){let d=!1;for(let v in this.indexes){let y=this.indexes[v];for(let w in y)s[y[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,y[w]),delete y[w],d=!0)}return d}}class QE{constructor(){this.layerIndexes={},this.crossTileIDs=new $1,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(s,d,v){let y=this.layerIndexes[s.id];y===void 0&&(y=this.layerIndexes[s.id]=new Ou);let w=!1,D={};y.handleWrapJump(v);for(let O of d){let R=O.getBucket(s);R&&s.id===R.layerIds[0]&&(R.bucketInstanceId||(R.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(O.tileID,R,this.crossTileIDs)&&(w=!0),D[R.bucketInstanceId]=!0)}return y.removeStaleBuckets(D)&&(w=!0),w}pruneUnusedLayers(s){let d={};s.forEach(v=>{d[v]=!0});for(let v in this.layerIndexes)d[v]||delete this.layerIndexes[v]}}let Lu=(E,s)=>i.t(E,s&&s.filter(d=>d.identifier!=="source.canvas")),sF=i.aw();class Y1 extends i.E{constructor(s,d={}){super(),this._rtlPluginLoaded=()=>{for(let v in this.sourceCaches){let y=this.sourceCaches[v].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[v].reload()}},this.map=s,this.dispatcher=new Oe(We(),s._getMapId()),this.dispatcher.registerMessageHandler("GG",(v,y)=>this.getGlyphs(v,y)),this.dispatcher.registerMessageHandler("GI",(v,y)=>this.getImages(v,y)),this.imageManager=new Re,this.imageManager.setEventedParent(this),this.glyphManager=new Qe(s._requestManager,d.localIdeographFontFamily),this.lineAtlas=new ft(256,512),this.crossTileSymbolIndex=new QE,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new i.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",i.ay()),pa().on(nt,this._rtlPluginLoaded),this.on("data",v=>{if(v.dataType!=="source"||v.sourceDataType!=="metadata")return;let y=this.sourceCaches[v.sourceId];if(!y)return;let w=y.getSource();if(w&&w.vectorLayerIds)for(let D in this._layers){let O=this._layers[D];O.source===w.id&&this._validateLayer(O)}})}loadURL(s,d={},v){this.fire(new i.k("dataloading",{dataType:"style"})),d.validate=typeof d.validate!="boolean"||d.validate;let y=this.map._requestManager.transformRequest(s,"Style");this._loadStyleRequest=new AbortController;let w=this._loadStyleRequest;i.h(y,this._loadStyleRequest).then(D=>{this._loadStyleRequest=null,this._load(D.data,d,v)}).catch(D=>{this._loadStyleRequest=null,D&&!w.signal.aborted&&this.fire(new i.j(D))})}loadJSON(s,d={},v){this.fire(new i.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,h.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,d.validate=d.validate!==!1,this._load(s,d,v)}).catch(()=>{})}loadEmpty(){this.fire(new i.k("dataloading",{dataType:"style"})),this._load(sF,{validate:!1})}_load(s,d,v){var y;let w=d.transformStyle?d.transformStyle(v,s):s;if(!d.validate||!Lu(this,i.u(w))){this._loaded=!0,this.stylesheet=w;for(let D in w.sources)this.addSource(D,w.sources[D],{validate:!1});w.sprite?this._loadSprite(w.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(w.glyphs),this._createLayers(),this.light=new Ne(this.stylesheet.light),this.sky=new st(this.stylesheet.sky),this.map.setTerrain((y=this.stylesheet.terrain)!==null&&y!==void 0?y:null),this.fire(new i.k("data",{dataType:"style"})),this.fire(new i.k("style.load"))}}_createLayers(){let s=i.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",s),this._order=s.map(d=>d.id),this._layers={},this._serializedLayers=null;for(let d of s){let v=i.aA(d);v.setEventedParent(this,{layer:{id:d.id}}),this._layers[d.id]=v}}_loadSprite(s,d=!1,v=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,D,O,R){return i._(this,void 0,void 0,function*(){let F=ne(w),V=O>1?"@2x":"",G={},Q={};for(let{id:ie,url:le}of F){let me=D.transformRequest(pe(le,V,".json"),"SpriteJSON");G[ie]=i.h(me,R);let ye=D.transformRequest(pe(le,V,".png"),"SpriteImage");Q[ie]=k.getImage(ye,R)}return yield Promise.all([...Object.values(G),...Object.values(Q)]),function(ie,le){return i._(this,void 0,void 0,function*(){let me={};for(let ye in ie){me[ye]={};let xe=h.getImageCanvasContext((yield le[ye]).data),Me=(yield ie[ye]).data;for(let de in Me){let{width:ke,height:Ve,x:Ke,y:dt,sdf:It,pixelRatio:Vt,stretchX:tr,stretchY:jt,content:Rt,textFitWidth:fr,textFitHeight:kr}=Me[de];me[ye][de]={data:null,pixelRatio:Vt,sdf:It,stretchX:tr,stretchY:jt,content:Rt,textFitWidth:fr,textFitHeight:kr,spriteData:{width:ke,height:Ve,x:Ke,y:dt,context:xe}}}}return me})}(G,Q)})}(s,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(let D in w){this._spritesImagesIds[D]=[];let O=this._spritesImagesIds[D]?this._spritesImagesIds[D].filter(R=>!(R in w)):[];for(let R of O)this.imageManager.removeImage(R),this._changedImages[R]=!0;for(let R in w[D]){let F=D==="default"?R:`${D}:${R}`;this._spritesImagesIds[D].push(F),F in this.imageManager.images?this.imageManager.updateImage(F,w[D][R],!1):this.imageManager.addImage(F,w[D][R]),d&&(this._changedImages[F]=!0)}}}).catch(w=>{this._spriteRequest=null,y=w,this.fire(new i.j(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),d&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"})),v&&v(y)})}_unloadSprite(){for(let s of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(s),this._changedImages[s]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"}))}_validateLayer(s){let d=this.sourceCaches[s.source];if(!d)return;let v=s.sourceLayer;if(!v)return;let y=d.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(v)===-1)&&this.fire(new i.j(new Error(`Source layer "${v}" does not exist on source "${y.id}" as specified by style layer "${s.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let s in this.sourceCaches)if(!this.sourceCaches[s].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(s,d=!1){let v=this._serializedAllLayers();if(!s||s.length===0)return Object.values(d?i.aB(v):v);let y=[];for(let w of s)if(v[w]){let D=d?i.aB(v[w]):v[w];y.push(D)}return y}_serializedAllLayers(){let s=this._serializedLayers;if(s)return s;s=this._serializedLayers={};let d=Object.keys(this._layers);for(let v of d){let y=this._layers[v];y.type!=="custom"&&(s[v]=y.serialize())}return s}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let s in this.sourceCaches)if(this.sourceCaches[s].hasTransition())return!0;for(let s in this._layers)if(this._layers[s].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(s){if(!this._loaded)return;let d=this._changed;if(d){let y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(y.length||w.length)&&this._updateWorkerLayers(y,w);for(let D in this._updatedSources){let O=this._updatedSources[D];if(O==="reload")this._reloadSource(D);else{if(O!=="clear")throw new Error(`Invalid action ${O}`);this._clearSource(D)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let D in this._updatedPaintProps)this._layers[D].updateTransitions(s);this.light.updateTransitions(s),this.sky.updateTransitions(s),this._resetUpdates()}let v={};for(let y in this.sourceCaches){let w=this.sourceCaches[y];v[y]=w.used,w.used=!1}for(let y of this._order){let w=this._layers[y];w.recalculate(s,this._availableImages),!w.isHidden(s.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(let y in v){let w=this.sourceCaches[y];!!v[y]!=!!w.used&&w.fire(new i.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(s),this.sky.recalculate(s),this.z=s.zoom,d&&this.fire(new i.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let s=Object.keys(this._changedImages);if(s.length){for(let d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],s);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(s,d){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(s,!1),removedIds:d})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(s,d={}){var v;this._checkLoaded();let y=this.serialize();if(s=d.transformStyle?d.transformStyle(y,s):s,((v=d.validate)===null||v===void 0||v)&&Lu(this,i.u(s)))return!1;(s=i.aB(s)).layers=i.az(s.layers);let w=i.aC(y,s),D=this._getOperationsToPerform(w);if(D.unimplemented.length>0)throw new Error(`Unimplemented: ${D.unimplemented.join(", ")}.`);if(D.operations.length===0)return!1;for(let O of D.operations)O();return this.stylesheet=s,this._serializedLayers=null,!0}_getOperationsToPerform(s){let d=[],v=[];for(let y of s)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":d.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":d.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":d.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":d.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":d.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":d.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":d.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":d.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":d.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":d.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":d.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":d.push(()=>this.setSprite.apply(this,y.args));break;case"setSky":d.push(()=>this.setSky.apply(this,y.args));break;case"setTerrain":d.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setTransition":d.push(()=>{});break;default:v.push(y.command);}return{operations:d,unimplemented:v}}addImage(s,d){if(this.getImage(s))return this.fire(new i.j(new Error(`An image named "${s}" already exists.`)));this.imageManager.addImage(s,d),this._afterImageUpdated(s)}updateImage(s,d){this.imageManager.updateImage(s,d)}getImage(s){return this.imageManager.getImage(s)}removeImage(s){if(!this.getImage(s))return this.fire(new i.j(new Error(`An image named "${s}" does not exist.`)));this.imageManager.removeImage(s),this._afterImageUpdated(s)}_afterImageUpdated(s){this._availableImages=this.imageManager.listImages(),this._changedImages[s]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(s,d,v={}){if(this._checkLoaded(),this.sourceCaches[s]!==void 0)throw new Error(`Source "${s}" already exists.`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(i.u.source,`sources.${s}`,d,null,v))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);let y=this.sourceCaches[s]=new Er(s,d,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:s})),y.onAdd(this.map),this._changed=!0}removeSource(s){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error("There is no source with this ID");for(let v in this._layers)if(this._layers[v].source===s)return this.fire(new i.j(new Error(`Source "${s}" cannot be removed while layer "${v}" is using it.`)));let d=this.sourceCaches[s];delete this.sourceCaches[s],delete this._updatedSources[s],d.fire(new i.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:s})),d.setEventedParent(null),d.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(s,d){if(this._checkLoaded(),this.sourceCaches[s]===void 0)throw new Error(`There is no source with this ID=${s}`);let v=this.sourceCaches[s].getSource();if(v.type!=="geojson")throw new Error(`geojsonSource.type is ${v.type}, which is !== 'geojson`);v.setData(d),this._changed=!0}getSource(s){return this.sourceCaches[s]&&this.sourceCaches[s].getSource()}addLayer(s,d,v={}){this._checkLoaded();let y=s.id;if(this.getLayer(y))return void this.fire(new i.j(new Error(`Layer "${y}" already exists on this map.`)));let w;if(s.type==="custom"){if(Lu(this,i.aD(s)))return;w=i.aA(s)}else{if("source"in s&&typeof s.source=="object"&&(this.addSource(y,s.source),s=i.aB(s),s=i.e(s,{source:y})),this._validate(i.u.layer,`layers.${y}`,s,{arrayIndex:-1},v))return;w=i.aA(s),this._validateLayer(w),w.setEventedParent(this,{layer:{id:y}})}let D=d?this._order.indexOf(d):this._order.length;if(d&&D===-1)this.fire(new i.j(new Error(`Cannot add layer "${y}" before non-existing layer "${d}".`)));else{if(this._order.splice(D,0,y),this._layerOrderChanged=!0,this._layers[y]=w,this._removedLayers[y]&&w.source&&w.type!=="custom"){let O=this._removedLayers[y];delete this._removedLayers[y],O.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(s,d){if(this._checkLoaded(),this._changed=!0,!this._layers[s])return void this.fire(new i.j(new Error(`The layer '${s}' does not exist in the map's style and cannot be moved.`)));if(s===d)return;let v=this._order.indexOf(s);this._order.splice(v,1);let y=d?this._order.indexOf(d):this._order.length;d&&y===-1?this.fire(new i.j(new Error(`Cannot move layer "${s}" before non-existing layer "${d}".`))):(this._order.splice(y,0,s),this._layerOrderChanged=!0)}removeLayer(s){this._checkLoaded();let d=this._layers[s];if(!d)return void this.fire(new i.j(new Error(`Cannot remove non-existing layer "${s}".`)));d.setEventedParent(null);let v=this._order.indexOf(s);this._order.splice(v,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[s]=d,delete this._layers[s],this._serializedLayers&&delete this._serializedLayers[s],delete this._updatedLayers[s],delete this._updatedPaintProps[s],d.onRemove&&d.onRemove(this.map)}getLayer(s){return this._layers[s]}getLayersOrder(){return[...this._order]}hasLayer(s){return s in this._layers}setLayerZoomRange(s,d,v){this._checkLoaded();let y=this.getLayer(s);y?y.minzoom===d&&y.maxzoom===v||(d!=null&&(y.minzoom=d),v!=null&&(y.maxzoom=v),this._updateLayer(y)):this.fire(new i.j(new Error(`Cannot set the zoom range of non-existing layer "${s}".`)))}setFilter(s,d,v={}){this._checkLoaded();let y=this.getLayer(s);if(y){if(!i.aE(y.filter,d))return d==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(i.u.filter,`layers.${y.id}.filter`,d,null,v)||(y.filter=i.aB(d),this._updateLayer(y)))}else this.fire(new i.j(new Error(`Cannot filter non-existing layer "${s}".`)))}getFilter(s){return i.aB(this.getLayer(s).filter)}setLayoutProperty(s,d,v,y={}){this._checkLoaded();let w=this.getLayer(s);w?i.aE(w.getLayoutProperty(d),v)||(w.setLayoutProperty(d,v,y),this._updateLayer(w)):this.fire(new i.j(new Error(`Cannot style non-existing layer "${s}".`)))}getLayoutProperty(s,d){let v=this.getLayer(s);if(v)return v.getLayoutProperty(d);this.fire(new i.j(new Error(`Cannot get style of non-existing layer "${s}".`)))}setPaintProperty(s,d,v,y={}){this._checkLoaded();let w=this.getLayer(s);w?i.aE(w.getPaintProperty(d),v)||(w.setPaintProperty(d,v,y)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[s]=!0,this._serializedLayers=null):this.fire(new i.j(new Error(`Cannot style non-existing layer "${s}".`)))}getPaintProperty(s,d){return this.getLayer(s).getPaintProperty(d)}setFeatureState(s,d){this._checkLoaded();let v=s.source,y=s.sourceLayer,w=this.sourceCaches[v];if(w===void 0)return void this.fire(new i.j(new Error(`The source '${v}' does not exist in the map's style.`)));let D=w.getSource().type;D==="geojson"&&y?this.fire(new i.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):D!=="vector"||y?(s.id===void 0&&this.fire(new i.j(new Error("The feature id parameter must be provided."))),w.setFeatureState(y,s.id,d)):this.fire(new i.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(s,d){this._checkLoaded();let v=s.source,y=this.sourceCaches[v];if(y===void 0)return void this.fire(new i.j(new Error(`The source '${v}' does not exist in the map's style.`)));let w=y.getSource().type,D=w==="vector"?s.sourceLayer:void 0;w!=="vector"||D?d&&typeof s.id!="string"&&typeof s.id!="number"?this.fire(new i.j(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(D,s.id,d):this.fire(new i.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(s){this._checkLoaded();let d=s.source,v=s.sourceLayer,y=this.sourceCaches[d];if(y!==void 0)return y.getSource().type!=="vector"||v?(s.id===void 0&&this.fire(new i.j(new Error("The feature id parameter must be provided."))),y.getFeatureState(v,s.id)):void this.fire(new i.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new i.j(new Error(`The source '${d}' does not exist in the map's style.`)))}getTransition(){return i.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let s=i.aF(this.sourceCaches,w=>w.serialize()),d=this._serializeByIds(this._order,!0),v=this.map.getTerrain()||void 0,y=this.stylesheet;return i.aG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,sources:s,layers:d,terrain:v},w=>w!==void 0)}_updateLayer(s){this._updatedLayers[s.id]=!0,s.source&&!this._updatedSources[s.source]&&this.sourceCaches[s.source].getSource().type!=="raster"&&(this._updatedSources[s.source]="reload",this.sourceCaches[s.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(s){let d=D=>this._layers[D].type==="fill-extrusion",v={},y=[];for(let D=this._order.length-1;D>=0;D--){let O=this._order[D];if(d(O)){v[O]=D;for(let R of s){let F=R[O];if(F)for(let V of F)y.push(V)}}}y.sort((D,O)=>O.intersectionZ-D.intersectionZ);let w=[];for(let D=this._order.length-1;D>=0;D--){let O=this._order[D];if(d(O))for(let R=y.length-1;R>=0;R--){let F=y[R].feature;if(v[F.layer.id]<D)break;w.push(F),y.pop()}else for(let R of s){let F=R[O];if(F)for(let V of F)w.push(V.feature)}}return w}queryRenderedFeatures(s,d,v){d&&d.filter&&this._validate(i.u.filter,"queryRenderedFeatures.filter",d.filter,null,d);let y={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new i.j(new Error("parameters.layers must be an Array."))),[];for(let O of d.layers){let R=this._layers[O];if(!R)return this.fire(new i.j(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];y[R.source]=!0}}let w=[];d.availableImages=this._availableImages;let D=this._serializedAllLayers();for(let O in this.sourceCaches)d.layers&&!y[O]||w.push(Pt(this.sourceCaches[O],this._layers,D,s,d,v));return this.placement&&w.push(function(O,R,F,V,G,Q,ie){let le={},me=Q.queryRenderedSymbols(V),ye=[];for(let xe of Object.keys(me).map(Number))ye.push(ie[xe]);ye.sort(Mt);for(let xe of ye){let Me=xe.featureIndex.lookupSymbolFeatures(me[xe.bucketInstanceId],R,xe.bucketIndex,xe.sourceLayerIndex,G.filter,G.layers,G.availableImages,O);for(let de in Me){let ke=le[de]=le[de]||[],Ve=Me[de];Ve.sort((Ke,dt)=>{let It=xe.featureSortOrder;if(It){let Vt=It.indexOf(Ke.featureIndex);return It.indexOf(dt.featureIndex)-Vt}return dt.featureIndex-Ke.featureIndex});for(let Ke of Ve)ke.push(Ke)}}for(let xe in le)le[xe].forEach(Me=>{let de=Me.feature,ke=F[O[xe].source].getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=ke});return le}(this._layers,D,this.sourceCaches,s,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(s,d){d&&d.filter&&this._validate(i.u.filter,"querySourceFeatures.filter",d.filter,null,d);let v=this.sourceCaches[s];return v?function(y,w){let D=y.getRenderableIds().map(F=>y.getTileByID(F)),O=[],R={};for(let F=0;F<D.length;F++){let V=D[F],G=V.tileID.canonical.key;R[G]||(R[G]=!0,V.querySourceFeatures(O,w))}return O}(v,d):[]}getLight(){return this.light.getLight()}setLight(s,d={}){this._checkLoaded();let v=this.light.getLight(),y=!1;for(let D in s)if(!i.aE(s[D],v[D])){y=!0;break}if(!y)return;let w={now:h.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(s,d),this.light.updateTransitions(w)}getSky(){var s;return(s=this.stylesheet)===null||s===void 0?void 0:s.sky}setSky(s,d={}){let v=this.getSky(),y=!1;if(!s&&!v)return;if(s&&!v)y=!0;else if(!s&&v)y=!0;else for(let D in s)if(!i.aE(s[D],v[D])){y=!0;break}if(!y)return;let w={now:h.now(),transition:i.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=s,this.sky.setSky(s,d),this.sky.updateTransitions(w)}_validate(s,d,v,y,w={}){return(!w||w.validate!==!1)&&Lu(this,s.call(i.u,i.e({key:d,style:this.serialize(),value:v,styleSpec:i.v},y)))}_remove(s=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),pa().off(nt,this._rtlPluginLoaded);for(let d in this._layers)this._layers[d].setEventedParent(null);for(let d in this.sourceCaches){let v=this.sourceCaches[d];v.setEventedParent(null),v.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),s&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(s)}_clearSource(s){this.sourceCaches[s].clearTiles()}_reloadSource(s){this.sourceCaches[s].resume(),this.sourceCaches[s].reload()}_updateSources(s){for(let d in this.sourceCaches)this.sourceCaches[d].update(s,this.map.terrain)}_generateCollisionBoxes(){for(let s in this.sourceCaches)this._reloadSource(s)}_updatePlacement(s,d,v,y,w=!1){let D=!1,O=!1,R={};for(let F of this._order){let V=this._layers[F];if(V.type!=="symbol")continue;if(!R[V.source]){let Q=this.sourceCaches[V.source];R[V.source]=Q.getRenderableIds(!0).map(ie=>Q.getTileByID(ie)).sort((ie,le)=>le.tileID.overscaledZ-ie.tileID.overscaledZ||(ie.tileID.isLessThan(le.tileID)?-1:1))}let G=this.crossTileSymbolIndex.addLayer(V,R[V.source],s.center.lng);D=D||G}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||v===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.now(),s.zoom))&&(this.pauseablePlacement=new cy(s,this.map.terrain,this._order,w,d,v,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,R),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(h.now()),O=!0),D&&this.pauseablePlacement.placement.setStale()),O||D)for(let F of this._order){let V=this._layers[F];V.type==="symbol"&&this.placement.updateLayerOpacities(V,R[V.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.now())}_releaseSymbolFadeTiles(){for(let s in this.sourceCaches)this.sourceCaches[s].releaseSymbolFadeTiles()}getImages(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.imageManager.getImages(d.icons);this._updateTilesForChangedImages();let y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,d.icons),v})}getGlyphs(s,d){return i._(this,void 0,void 0,function*(){let v=yield this.glyphManager.getGlyphs(d.stacks),y=this.sourceCaches[d.source];return y&&y.setDependencies(d.tileID.key,d.type,[""]),v})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(s,d={}){this._checkLoaded(),s&&this._validate(i.u.glyphs,"glyphs",s,null,d)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=s,this.glyphManager.entries={},this.glyphManager.setURL(s))}addSprite(s,d,v={},y){this._checkLoaded();let w=[{id:s,url:d}],D=[...ne(this.stylesheet.sprite),...w];this._validate(i.u.sprite,"sprite",D,null,v)||(this.stylesheet.sprite=D,this._loadSprite(w,!0,y))}removeSprite(s){this._checkLoaded();let d=ne(this.stylesheet.sprite);if(d.find(v=>v.id===s)){if(this._spritesImagesIds[s])for(let v of this._spritesImagesIds[s])this.imageManager.removeImage(v),this._changedImages[v]=!0;d.splice(d.findIndex(v=>v.id===s),1),this.stylesheet.sprite=d.length>0?d:void 0,delete this._spritesImagesIds[s],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new i.k("data",{dataType:"style"}))}else this.fire(new i.j(new Error(`Sprite "${s}" doesn't exists on this map.`)))}getSprite(){return ne(this.stylesheet.sprite)}setSprite(s,d={},v){this._checkLoaded(),s&&this._validate(i.u.sprite,"sprite",s,null,d)||(this.stylesheet.sprite=s,s?this._loadSprite(s,!0,v):(this._unloadSprite(),v&&v(null)))}}var Vd=i.Y([{name:"a_pos",type:"Int16",components:2}]);let yp={prelude:Fn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Fn(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Fn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Fn(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Fn("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Fn(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Fn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Fn("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Fn("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Fn("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Fn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Fn(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Fn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Fn(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Fn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Fn(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Fn(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Fn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Fn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Fn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Fn(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Fn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Fn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Fn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Fn("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Fn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Fn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Fn(E,s){let d=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,v=s.match(/attribute ([\w]+) ([\w]+)/g),y=E.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=s.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),D=w?w.concat(y):y,O={};return{fragmentSource:E=E.replace(d,(R,F,V,G,Q)=>(O[Q]=!0,F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
varying ${V} ${G} ${Q};
#else
uniform ${V} ${G} u_${Q};
#endif
`:`
#ifdef HAS_UNIFORM_u_${Q}
    ${V} ${G} ${Q} = u_${Q};
#endif
`)),vertexSource:s=s.replace(d,(R,F,V,G,Q)=>{let ie=G==="float"?"vec2":"vec4",le=Q.match(/color/)?"color":ie;return O[Q]?F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
attribute ${V} ${ie} a_${Q};
varying ${V} ${G} ${Q};
#else
uniform ${V} ${G} u_${Q};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = a_${Q};
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${Q} = unpack_mix_${le}(a_${Q}, u_${Q}_t);
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`:F==="define"?`
#ifndef HAS_UNIFORM_u_${Q}
uniform lowp float u_${Q}_t;
attribute ${V} ${ie} a_${Q};
#else
uniform ${V} ${G} u_${Q};
#endif
`:le==="vec4"?`
#ifndef HAS_UNIFORM_u_${Q}
    ${V} ${G} ${Q} = a_${Q};
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`:`
#ifndef HAS_UNIFORM_u_${Q}
    ${V} ${G} ${Q} = unpack_mix_${le}(a_${Q}, u_${Q}_t);
#else
    ${V} ${G} ${Q} = u_${Q};
#endif
`}),staticAttributes:v,staticUniforms:D}}class eS{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(s,d,v,y,w,D,O,R,F){this.context=s;let V=this.boundPaintVertexBuffers.length!==y.length;for(let G=0;!V&&G<y.length;G++)this.boundPaintVertexBuffers[G]!==y[G]&&(V=!0);!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==v||V||this.boundIndexBuffer!==w||this.boundVertexOffset!==D||this.boundDynamicVertexBuffer!==O||this.boundDynamicVertexBuffer2!==R||this.boundDynamicVertexBuffer3!==F?this.freshBind(d,v,y,w,D,O,R,F):(s.bindVertexArray.set(this.vao),O&&O.bind(),w&&w.dynamicDraw&&w.bind(),R&&R.bind(),F&&F.bind())}freshBind(s,d,v,y,w,D,O,R){let F=s.numAttributes,V=this.context,G=V.gl;this.vao&&this.destroy(),this.vao=V.createVertexArray(),V.bindVertexArray.set(this.vao),this.boundProgram=s,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=y,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=D,this.boundDynamicVertexBuffer2=O,this.boundDynamicVertexBuffer3=R,d.enableAttributes(G,s);for(let Q of v)Q.enableAttributes(G,s);D&&D.enableAttributes(G,s),O&&O.enableAttributes(G,s),R&&R.enableAttributes(G,s),d.bind(),d.setVertexAttribPointers(G,s,w);for(let Q of v)Q.bind(),Q.setVertexAttribPointers(G,s,w);D&&(D.bind(),D.setVertexAttribPointers(G,s,w)),y&&y.bind(),O&&(O.bind(),O.setVertexAttribPointers(G,s,w)),R&&(R.bind(),R.setVertexAttribPointers(G,s,w)),V.currentNumAttributes=F}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let tS=(E,s,d,v,y)=>({u_matrix:E,u_texture:0,u_ele_delta:s,u_fog_matrix:d,u_fog_color:v?v.properties.get("fog-color"):i.aM.white,u_fog_ground_blend:v?v.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:v?v.calculateFogBlendOpacity(y):0,u_horizon_color:v?v.properties.get("horizon-color"):i.aM.white,u_horizon_fog_blend:v?v.properties.get("horizon-fog-blend"):1});function Tm(E){let s=[];for(let d=0;d<E.length;d++){if(E[d]===null)continue;let v=E[d].split(" ");s.push(v.pop())}return s}class rS{constructor(s,d,v,y,w,D){let O=s.gl;this.program=O.createProgram();let R=Tm(d.staticAttributes),F=v?v.getBinderAttributes():[],V=R.concat(F),G=yp.prelude.staticUniforms?Tm(yp.prelude.staticUniforms):[],Q=d.staticUniforms?Tm(d.staticUniforms):[],ie=v?v.getBinderUniforms():[],le=G.concat(Q).concat(ie),me=[];for(let Ke of le)me.indexOf(Ke)<0&&me.push(Ke);let ye=v?v.defines():[];w&&ye.push("#define OVERDRAW_INSPECTOR;"),D&&ye.push("#define TERRAIN3D;");let xe=ye.concat(yp.prelude.fragmentSource,d.fragmentSource).join(`
`),Me=ye.concat(yp.prelude.vertexSource,d.vertexSource).join(`
`),de=O.createShader(O.FRAGMENT_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(de,xe),O.compileShader(de),!O.getShaderParameter(de,O.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${O.getShaderInfoLog(de)}`);O.attachShader(this.program,de);let ke=O.createShader(O.VERTEX_SHADER);if(O.isContextLost())return void(this.failedToCreate=!0);if(O.shaderSource(ke,Me),O.compileShader(ke),!O.getShaderParameter(ke,O.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${O.getShaderInfoLog(ke)}`);O.attachShader(this.program,ke),this.attributes={};let Ve={};this.numAttributes=V.length;for(let Ke=0;Ke<this.numAttributes;Ke++)V[Ke]&&(O.bindAttribLocation(this.program,Ke,V[Ke]),this.attributes[V[Ke]]=Ke);if(O.linkProgram(this.program),!O.getProgramParameter(this.program,O.LINK_STATUS))throw new Error(`Program failed to link: ${O.getProgramInfoLog(this.program)}`);O.deleteShader(ke),O.deleteShader(de);for(let Ke=0;Ke<me.length;Ke++){let dt=me[Ke];if(dt&&!Ve[dt]){let It=O.getUniformLocation(this.program,dt);It&&(Ve[dt]=It)}}this.fixedUniforms=y(s,Ve),this.terrainUniforms=((Ke,dt)=>({u_depth:new i.aH(Ke,dt.u_depth),u_terrain:new i.aH(Ke,dt.u_terrain),u_terrain_dim:new i.aI(Ke,dt.u_terrain_dim),u_terrain_matrix:new i.aJ(Ke,dt.u_terrain_matrix),u_terrain_unpack:new i.aK(Ke,dt.u_terrain_unpack),u_terrain_exaggeration:new i.aI(Ke,dt.u_terrain_exaggeration)}))(s,Ve),this.binderUniforms=v?v.getUniforms(s,Ve):[]}draw(s,d,v,y,w,D,O,R,F,V,G,Q,ie,le,me,ye,xe,Me){let de=s.gl;if(this.failedToCreate)return;if(s.program.set(this.program),s.setDepthMode(v),s.setStencilMode(y),s.setColorMode(w),s.setCullFace(D),R){s.activeTexture.set(de.TEXTURE2),de.bindTexture(de.TEXTURE_2D,R.depthTexture),s.activeTexture.set(de.TEXTURE3),de.bindTexture(de.TEXTURE_2D,R.texture);for(let Ve in this.terrainUniforms)this.terrainUniforms[Ve].set(R[Ve])}for(let Ve in this.fixedUniforms)this.fixedUniforms[Ve].set(O[Ve]);me&&me.setUniforms(s,this.binderUniforms,ie,{zoom:le});let ke=0;switch(d){case de.LINES:ke=2;break;case de.TRIANGLES:ke=3;break;case de.LINE_STRIP:ke=1;}for(let Ve of Q.get()){let Ke=Ve.vaos||(Ve.vaos={});(Ke[F]||(Ke[F]=new eS)).bind(s,this,V,me?me.getPaintVertexBuffers():[],G,Ve.vertexOffset,ye,xe,Me),de.drawElements(d,Ve.primitiveLength*ke,de.UNSIGNED_SHORT,Ve.primitiveOffset*ke*2)}}}function Z1(E,s,d){let v=1/vn(d,1,s.transform.tileZoom),y=Math.pow(2,d.tileID.overscaledZ),w=d.tileSize*Math.pow(2,s.transform.tileZoom)/y,D=w*(d.tileID.canonical.x+d.tileID.wrap*y),O=w*d.tileID.canonical.y;return{u_image:0,u_texsize:d.imageAtlasTexture.size,u_scale:[v,E.fromScale,E.toScale],u_fade:E.t,u_pixel_coord_upper:[D>>16,O>>16],u_pixel_coord_lower:[65535&D,65535&O]}}let fy=(E,s,d,v)=>{let y=s.style.light,w=y.properties.get("position"),D=[w.x,w.y,w.z],O=function(){var F=new i.A(9);return i.A!=Float32Array&&(F[1]=0,F[2]=0,F[3]=0,F[5]=0,F[6]=0,F[7]=0),F[0]=1,F[4]=1,F[8]=1,F}();y.properties.get("anchor")==="viewport"&&function(F,V){var G=Math.sin(V),Q=Math.cos(V);F[0]=Q,F[1]=G,F[2]=0,F[3]=-G,F[4]=Q,F[5]=0,F[6]=0,F[7]=0,F[8]=1}(O,-s.transform.angle),function(F,V,G){var Q=V[0],ie=V[1],le=V[2];F[0]=Q*G[0]+ie*G[3]+le*G[6],F[1]=Q*G[1]+ie*G[4]+le*G[7],F[2]=Q*G[2]+ie*G[5]+le*G[8]}(D,D,O);let R=y.properties.get("color");return{u_matrix:E,u_lightpos:D,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[R.r,R.g,R.b],u_vertical_gradient:+d,u_opacity:v}},K1=(E,s,d,v,y,w,D)=>i.e(fy(E,s,d,v),Z1(w,s,D),{u_height_factor:-Math.pow(2,y.overscaledZ)/D.tileSize/8}),Mm=E=>({u_matrix:E}),BD=(E,s,d,v)=>i.e(Mm(E),Z1(d,s,v)),lF=(E,s)=>({u_matrix:E,u_world:s}),VD=(E,s,d,v,y)=>i.e(BD(E,s,d,v),{u_world:y}),uF=(E,s,d,v)=>{let y=E.transform,w,D;if(v.paint.get("circle-pitch-alignment")==="map"){let O=vn(d,1,y.zoom);w=!0,D=[O,O]}else w=!1,D=y.pixelsToGLUnits;return{u_camera_to_center_distance:y.cameraToCenterDistance,u_scale_with_map:+(v.paint.get("circle-pitch-scale")==="map"),u_matrix:E.translatePosMatrix(s.posMatrix,d,v.paint.get("circle-translate"),v.paint.get("circle-translate-anchor")),u_pitch_with_map:+w,u_device_pixel_ratio:E.pixelRatio,u_extrude_scale:D}},Gd=(E,s,d)=>({u_matrix:E,u_inv_matrix:s,u_camera_to_center_distance:d.cameraToCenterDistance,u_viewport_size:[d.width,d.height]}),py=(E,s,d=1)=>({u_matrix:E,u_color:s,u_overlay:0,u_overlay_scale:d}),As=E=>({u_matrix:E}),Ds=(E,s,d,v)=>({u_matrix:E,u_extrude_scale:vn(s,1,d),u_intensity:v}),X1=(E,s,d,v)=>{let y=i.H();i.aP(y,0,E.width,E.height,0,0,1);let w=E.context.gl;return{u_matrix:y,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:d,u_color_ramp:v,u_opacity:s.paint.get("heatmap-opacity")}};function J1(E,s){let d=Math.pow(2,s.canonical.z),v=s.canonical.y;return[new i.Z(0,v/d).toLngLat().lat,new i.Z(0,(v+1)/d).toLngLat().lat]}let Q1=(E,s,d,v)=>{let y=E.transform;return{u_matrix:WD(E,s,d,v),u_ratio:1/vn(s,1,y.zoom),u_device_pixel_ratio:E.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},GD=(E,s,d,v,y)=>i.e(Q1(E,s,d,y),{u_image:0,u_image_height:v}),Cm=(E,s,d,v,y)=>{let w=E.transform,D=HD(s,w);return{u_matrix:WD(E,s,d,y),u_texsize:s.imageAtlasTexture.size,u_ratio:1/vn(s,1,w.zoom),u_device_pixel_ratio:E.pixelRatio,u_image:0,u_scale:[D,v.fromScale,v.toScale],u_fade:v.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},cF=(E,s,d,v,y,w)=>{let D=E.lineAtlas,O=HD(s,E.transform),R=d.layout.get("line-cap")==="round",F=D.getDash(v.from,R),V=D.getDash(v.to,R),G=F.width*y.fromScale,Q=V.width*y.toScale;return i.e(Q1(E,s,d,w),{u_patternscale_a:[O/G,-F.height/2],u_patternscale_b:[O/Q,-V.height/2],u_sdfgamma:D.width/(256*Math.min(G,Q)*E.pixelRatio)/2,u_image:0,u_tex_y_a:F.y,u_tex_y_b:V.y,u_mix:y.t})};function HD(E,s){return 1/vn(E,1,s.tileZoom)}function WD(E,s,d,v){return E.translatePosMatrix(v?v.posMatrix:s.tileID.posMatrix,s,d.paint.get("line-translate"),d.paint.get("line-translate-anchor"))}let fF=(E,s,d,v,y)=>{return{u_matrix:E,u_tl_parent:s,u_scale_parent:d,u_buffer_scale:1,u_fade_t:v.mix,u_opacity:v.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(D=y.paint.get("raster-saturation"),D>0?1-1/(1.001-D):-D),u_contrast_factor:(w=y.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:pF(y.paint.get("raster-hue-rotate"))};var w,D};function pF(E){E*=Math.PI/180;let s=Math.sin(E),d=Math.cos(E);return[(2*d+1)/3,(-Math.sqrt(3)*s-d+1)/3,(Math.sqrt(3)*s-d+1)/3]}let $D=(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie)=>{let le=D.transform;return{u_is_size_zoom_constant:+(E==="constant"||E==="source"),u_is_size_feature_constant:+(E==="constant"||E==="camera"),u_size_t:s?s.uSizeT:0,u_size:s?s.uSize:0,u_camera_to_center_distance:le.cameraToCenterDistance,u_pitch:le.pitch/360*2*Math.PI,u_rotate_symbol:+d,u_aspect_ratio:le.width/le.height,u_fade_change:D.options.fadeDuration?D.symbolFadeChange:1,u_matrix:O,u_label_plane_matrix:R,u_coord_matrix:F,u_is_text:+G,u_pitch_with_map:+v,u_is_along_line:y,u_is_variable_anchor:w,u_texsize:Q,u_texture:0,u_translation:V,u_pitched_scale:ie}},dy=(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie,le)=>{let me=D.transform;return i.e($D(E,s,d,v,y,w,D,O,R,F,V,G,Q,le),{u_gamma_scale:v?Math.cos(me._pitch)*me.cameraToCenterDistance:1,u_device_pixel_ratio:D.pixelRatio,u_is_halo:+ie})},nS=(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie)=>i.e(dy(E,s,d,v,y,w,D,O,R,F,V,!0,G,!0,ie),{u_texsize_icon:Q,u_texture_icon:1}),e_=(E,s,d)=>({u_matrix:E,u_opacity:s,u_color:d}),oS=(E,s,d,v,y,w)=>i.e(function(D,O,R,F){let V=R.imageManager.getPattern(D.from.toString()),G=R.imageManager.getPattern(D.to.toString()),{width:Q,height:ie}=R.imageManager.getPixelSize(),le=Math.pow(2,F.tileID.overscaledZ),me=F.tileSize*Math.pow(2,R.transform.tileZoom)/le,ye=me*(F.tileID.canonical.x+F.tileID.wrap*le),xe=me*F.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:V.tl,u_pattern_br_a:V.br,u_pattern_tl_b:G.tl,u_pattern_br_b:G.br,u_texsize:[Q,ie],u_mix:O.t,u_pattern_size_a:V.displaySize,u_pattern_size_b:G.displaySize,u_scale_a:O.fromScale,u_scale_b:O.toScale,u_tile_units_to_pixels:1/vn(F,1,R.transform.tileZoom),u_pixel_coord_upper:[ye>>16,xe>>16],u_pixel_coord_lower:[65535&ye,65535&xe]}}(v,w,d,y),{u_matrix:E,u_opacity:s}),iS={fillExtrusion:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_lightpos:new i.aN(E,s.u_lightpos),u_lightintensity:new i.aI(E,s.u_lightintensity),u_lightcolor:new i.aN(E,s.u_lightcolor),u_vertical_gradient:new i.aI(E,s.u_vertical_gradient),u_opacity:new i.aI(E,s.u_opacity)}),fillExtrusionPattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_lightpos:new i.aN(E,s.u_lightpos),u_lightintensity:new i.aI(E,s.u_lightintensity),u_lightcolor:new i.aN(E,s.u_lightcolor),u_vertical_gradient:new i.aI(E,s.u_vertical_gradient),u_height_factor:new i.aI(E,s.u_height_factor),u_image:new i.aH(E,s.u_image),u_texsize:new i.aO(E,s.u_texsize),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade),u_opacity:new i.aI(E,s.u_opacity)}),fill:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix)}),fillPattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_image:new i.aH(E,s.u_image),u_texsize:new i.aO(E,s.u_texsize),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade)}),fillOutline:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_world:new i.aO(E,s.u_world)}),fillOutlinePattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_world:new i.aO(E,s.u_world),u_image:new i.aH(E,s.u_image),u_texsize:new i.aO(E,s.u_texsize),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade)}),circle:(E,s)=>({u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_scale_with_map:new i.aH(E,s.u_scale_with_map),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_extrude_scale:new i.aO(E,s.u_extrude_scale),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_matrix:new i.aJ(E,s.u_matrix)}),collisionBox:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_pixel_extrude_scale:new i.aO(E,s.u_pixel_extrude_scale)}),collisionCircle:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_inv_matrix:new i.aJ(E,s.u_inv_matrix),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_viewport_size:new i.aO(E,s.u_viewport_size)}),debug:(E,s)=>({u_color:new i.aL(E,s.u_color),u_matrix:new i.aJ(E,s.u_matrix),u_overlay:new i.aH(E,s.u_overlay),u_overlay_scale:new i.aI(E,s.u_overlay_scale)}),clippingMask:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix)}),heatmap:(E,s)=>({u_extrude_scale:new i.aI(E,s.u_extrude_scale),u_intensity:new i.aI(E,s.u_intensity),u_matrix:new i.aJ(E,s.u_matrix)}),heatmapTexture:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_world:new i.aO(E,s.u_world),u_image:new i.aH(E,s.u_image),u_color_ramp:new i.aH(E,s.u_color_ramp),u_opacity:new i.aI(E,s.u_opacity)}),hillshade:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_image:new i.aH(E,s.u_image),u_latrange:new i.aO(E,s.u_latrange),u_light:new i.aO(E,s.u_light),u_shadow:new i.aL(E,s.u_shadow),u_highlight:new i.aL(E,s.u_highlight),u_accent:new i.aL(E,s.u_accent)}),hillshadePrepare:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_image:new i.aH(E,s.u_image),u_dimension:new i.aO(E,s.u_dimension),u_zoom:new i.aI(E,s.u_zoom),u_unpack:new i.aK(E,s.u_unpack)}),line:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels)}),lineGradient:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels),u_image:new i.aH(E,s.u_image),u_image_height:new i.aI(E,s.u_image_height)}),linePattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_texsize:new i.aO(E,s.u_texsize),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_image:new i.aH(E,s.u_image),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels),u_scale:new i.aN(E,s.u_scale),u_fade:new i.aI(E,s.u_fade)}),lineSDF:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ratio:new i.aI(E,s.u_ratio),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_units_to_pixels:new i.aO(E,s.u_units_to_pixels),u_patternscale_a:new i.aO(E,s.u_patternscale_a),u_patternscale_b:new i.aO(E,s.u_patternscale_b),u_sdfgamma:new i.aI(E,s.u_sdfgamma),u_image:new i.aH(E,s.u_image),u_tex_y_a:new i.aI(E,s.u_tex_y_a),u_tex_y_b:new i.aI(E,s.u_tex_y_b),u_mix:new i.aI(E,s.u_mix)}),raster:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_tl_parent:new i.aO(E,s.u_tl_parent),u_scale_parent:new i.aI(E,s.u_scale_parent),u_buffer_scale:new i.aI(E,s.u_buffer_scale),u_fade_t:new i.aI(E,s.u_fade_t),u_opacity:new i.aI(E,s.u_opacity),u_image0:new i.aH(E,s.u_image0),u_image1:new i.aH(E,s.u_image1),u_brightness_low:new i.aI(E,s.u_brightness_low),u_brightness_high:new i.aI(E,s.u_brightness_high),u_saturation_factor:new i.aI(E,s.u_saturation_factor),u_contrast_factor:new i.aI(E,s.u_contrast_factor),u_spin_weights:new i.aN(E,s.u_spin_weights)}),symbolIcon:(E,s)=>({u_is_size_zoom_constant:new i.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.aH(E,s.u_is_size_feature_constant),u_size_t:new i.aI(E,s.u_size_t),u_size:new i.aI(E,s.u_size),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_pitch:new i.aI(E,s.u_pitch),u_rotate_symbol:new i.aH(E,s.u_rotate_symbol),u_aspect_ratio:new i.aI(E,s.u_aspect_ratio),u_fade_change:new i.aI(E,s.u_fade_change),u_matrix:new i.aJ(E,s.u_matrix),u_label_plane_matrix:new i.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new i.aJ(E,s.u_coord_matrix),u_is_text:new i.aH(E,s.u_is_text),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_is_along_line:new i.aH(E,s.u_is_along_line),u_is_variable_anchor:new i.aH(E,s.u_is_variable_anchor),u_texsize:new i.aO(E,s.u_texsize),u_texture:new i.aH(E,s.u_texture),u_translation:new i.aO(E,s.u_translation),u_pitched_scale:new i.aI(E,s.u_pitched_scale)}),symbolSDF:(E,s)=>({u_is_size_zoom_constant:new i.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.aH(E,s.u_is_size_feature_constant),u_size_t:new i.aI(E,s.u_size_t),u_size:new i.aI(E,s.u_size),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_pitch:new i.aI(E,s.u_pitch),u_rotate_symbol:new i.aH(E,s.u_rotate_symbol),u_aspect_ratio:new i.aI(E,s.u_aspect_ratio),u_fade_change:new i.aI(E,s.u_fade_change),u_matrix:new i.aJ(E,s.u_matrix),u_label_plane_matrix:new i.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new i.aJ(E,s.u_coord_matrix),u_is_text:new i.aH(E,s.u_is_text),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_is_along_line:new i.aH(E,s.u_is_along_line),u_is_variable_anchor:new i.aH(E,s.u_is_variable_anchor),u_texsize:new i.aO(E,s.u_texsize),u_texture:new i.aH(E,s.u_texture),u_gamma_scale:new i.aI(E,s.u_gamma_scale),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_is_halo:new i.aH(E,s.u_is_halo),u_translation:new i.aO(E,s.u_translation),u_pitched_scale:new i.aI(E,s.u_pitched_scale)}),symbolTextAndIcon:(E,s)=>({u_is_size_zoom_constant:new i.aH(E,s.u_is_size_zoom_constant),u_is_size_feature_constant:new i.aH(E,s.u_is_size_feature_constant),u_size_t:new i.aI(E,s.u_size_t),u_size:new i.aI(E,s.u_size),u_camera_to_center_distance:new i.aI(E,s.u_camera_to_center_distance),u_pitch:new i.aI(E,s.u_pitch),u_rotate_symbol:new i.aH(E,s.u_rotate_symbol),u_aspect_ratio:new i.aI(E,s.u_aspect_ratio),u_fade_change:new i.aI(E,s.u_fade_change),u_matrix:new i.aJ(E,s.u_matrix),u_label_plane_matrix:new i.aJ(E,s.u_label_plane_matrix),u_coord_matrix:new i.aJ(E,s.u_coord_matrix),u_is_text:new i.aH(E,s.u_is_text),u_pitch_with_map:new i.aH(E,s.u_pitch_with_map),u_is_along_line:new i.aH(E,s.u_is_along_line),u_is_variable_anchor:new i.aH(E,s.u_is_variable_anchor),u_texsize:new i.aO(E,s.u_texsize),u_texsize_icon:new i.aO(E,s.u_texsize_icon),u_texture:new i.aH(E,s.u_texture),u_texture_icon:new i.aH(E,s.u_texture_icon),u_gamma_scale:new i.aI(E,s.u_gamma_scale),u_device_pixel_ratio:new i.aI(E,s.u_device_pixel_ratio),u_is_halo:new i.aH(E,s.u_is_halo),u_translation:new i.aO(E,s.u_translation),u_pitched_scale:new i.aI(E,s.u_pitched_scale)}),background:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_opacity:new i.aI(E,s.u_opacity),u_color:new i.aL(E,s.u_color)}),backgroundPattern:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_opacity:new i.aI(E,s.u_opacity),u_image:new i.aH(E,s.u_image),u_pattern_tl_a:new i.aO(E,s.u_pattern_tl_a),u_pattern_br_a:new i.aO(E,s.u_pattern_br_a),u_pattern_tl_b:new i.aO(E,s.u_pattern_tl_b),u_pattern_br_b:new i.aO(E,s.u_pattern_br_b),u_texsize:new i.aO(E,s.u_texsize),u_mix:new i.aI(E,s.u_mix),u_pattern_size_a:new i.aO(E,s.u_pattern_size_a),u_pattern_size_b:new i.aO(E,s.u_pattern_size_b),u_scale_a:new i.aI(E,s.u_scale_a),u_scale_b:new i.aI(E,s.u_scale_b),u_pixel_coord_upper:new i.aO(E,s.u_pixel_coord_upper),u_pixel_coord_lower:new i.aO(E,s.u_pixel_coord_lower),u_tile_units_to_pixels:new i.aI(E,s.u_tile_units_to_pixels)}),terrain:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_texture:new i.aH(E,s.u_texture),u_ele_delta:new i.aI(E,s.u_ele_delta),u_fog_matrix:new i.aJ(E,s.u_fog_matrix),u_fog_color:new i.aL(E,s.u_fog_color),u_fog_ground_blend:new i.aI(E,s.u_fog_ground_blend),u_fog_ground_blend_opacity:new i.aI(E,s.u_fog_ground_blend_opacity),u_horizon_color:new i.aL(E,s.u_horizon_color),u_horizon_fog_blend:new i.aI(E,s.u_horizon_fog_blend)}),terrainDepth:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_ele_delta:new i.aI(E,s.u_ele_delta)}),terrainCoords:(E,s)=>({u_matrix:new i.aJ(E,s.u_matrix),u_texture:new i.aH(E,s.u_texture),u_terrain_coords_id:new i.aI(E,s.u_terrain_coords_id),u_ele_delta:new i.aI(E,s.u_ele_delta)}),sky:(E,s)=>({u_sky_color:new i.aL(E,s.u_sky_color),u_horizon_color:new i.aL(E,s.u_horizon_color),u_horizon:new i.aI(E,s.u_horizon),u_sky_horizon_blend:new i.aI(E,s.u_sky_horizon_blend)})};class uc{constructor(s,d,v){this.context=s;let y=s.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),s.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(s){let d=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,s.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let dF={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class aS{constructor(s,d,v,y){this.length=d.length,this.attributes=v,this.itemSize=d.bytesPerElement,this.dynamicDraw=y,this.context=s;let w=s.gl;this.buffer=w.createBuffer(),s.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete d.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(s){if(s.length!==this.length)throw new Error(`Length of new data is ${s.length}, which doesn't match current length of ${this.length}`);let d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,s.arrayBuffer)}enableAttributes(s,d){for(let v=0;v<this.attributes.length;v++){let y=d.attributes[this.attributes[v].name];y!==void 0&&s.enableVertexAttribArray(y)}}setVertexAttribPointers(s,d,v){for(let y=0;y<this.attributes.length;y++){let w=this.attributes[y],D=d.attributes[w.name];D!==void 0&&s.vertexAttribPointer(D,w.components,s[dF[w.type]],!1,this.itemSize,w.offset+this.itemSize*(v||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Hd=new WeakMap;function _p(E){var s;if(Hd.has(E))return Hd.get(E);{let d=(s=E.getParameter(E.VERSION))===null||s===void 0?void 0:s.startsWith("WebGL 2.0");return Hd.set(E,d),d}}class Wn{constructor(s){this.gl=s.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(s){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class t_ extends Wn{getDefault(){return i.aM.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.clearColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class hF extends Wn{getDefault(){return 1}set(s){(s!==this.current||this.dirty)&&(this.gl.clearDepth(s),this.current=s,this.dirty=!1)}}class Am extends Wn{getDefault(){return 0}set(s){(s!==this.current||this.dirty)&&(this.gl.clearStencil(s),this.current=s,this.dirty=!1)}}class mF extends Wn{getDefault(){return[!0,!0,!0,!0]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.colorMask(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class YD extends Wn{getDefault(){return!0}set(s){(s!==this.current||this.dirty)&&(this.gl.depthMask(s),this.current=s,this.dirty=!1)}}class gF extends Wn{getDefault(){return 255}set(s){(s!==this.current||this.dirty)&&(this.gl.stencilMask(s),this.current=s,this.dirty=!1)}}class ZD extends Wn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(s){let d=this.current;(s.func!==d.func||s.ref!==d.ref||s.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(s.func,s.ref,s.mask),this.current=s,this.dirty=!1)}}class sS extends Wn{getDefault(){let s=this.gl;return[s.KEEP,s.KEEP,s.KEEP]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(s[0],s[1],s[2]),this.current=s,this.dirty=!1)}}class KD extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=s,this.dirty=!1}}class XD extends Wn{getDefault(){return[0,1]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.depthRange(s[0],s[1]),this.current=s,this.dirty=!1)}}class JD extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=s,this.dirty=!1}}class QD extends Wn{getDefault(){return this.gl.LESS}set(s){(s!==this.current||this.dirty)&&(this.gl.depthFunc(s),this.current=s,this.dirty=!1)}}class Wd extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.BLEND):d.disable(d.BLEND),this.current=s,this.dirty=!1}}class e4 extends Wn{getDefault(){let s=this.gl;return[s.ONE,s.ZERO]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(s[0],s[1]),this.current=s,this.dirty=!1)}}class vF extends Wn{getDefault(){return i.aM.transparent}set(s){let d=this.current;(s.r!==d.r||s.g!==d.g||s.b!==d.b||s.a!==d.a||this.dirty)&&(this.gl.blendColor(s.r,s.g,s.b,s.a),this.current=s,this.dirty=!1)}}class t4 extends Wn{getDefault(){return this.gl.FUNC_ADD}set(s){(s!==this.current||this.dirty)&&(this.gl.blendEquation(s),this.current=s,this.dirty=!1)}}class hy extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;s?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=s,this.dirty=!1}}class yF extends Wn{getDefault(){return this.gl.BACK}set(s){(s!==this.current||this.dirty)&&(this.gl.cullFace(s),this.current=s,this.dirty=!1)}}class r_ extends Wn{getDefault(){return this.gl.CCW}set(s){(s!==this.current||this.dirty)&&(this.gl.frontFace(s),this.current=s,this.dirty=!1)}}class _F extends Wn{getDefault(){return null}set(s){(s!==this.current||this.dirty)&&(this.gl.useProgram(s),this.current=s,this.dirty=!1)}}class xF extends Wn{getDefault(){return this.gl.TEXTURE0}set(s){(s!==this.current||this.dirty)&&(this.gl.activeTexture(s),this.current=s,this.dirty=!1)}}class r4 extends Wn{getDefault(){let s=this.gl;return[0,0,s.drawingBufferWidth,s.drawingBufferHeight]}set(s){let d=this.current;(s[0]!==d[0]||s[1]!==d[1]||s[2]!==d[2]||s[3]!==d[3]||this.dirty)&&(this.gl.viewport(s[0],s[1],s[2],s[3]),this.current=s,this.dirty=!1)}}class n4 extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,s),this.current=s,this.dirty=!1}}class o4 extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class lS extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindTexture(d.TEXTURE_2D,s),this.current=s,this.dirty=!1}}class i4 extends Wn{getDefault(){return null}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class n_ extends Wn{getDefault(){return null}set(s){let d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,s),this.current=s,this.dirty=!1}}class bf extends Wn{getDefault(){return null}set(s){var d;if(s===this.current&&!this.dirty)return;let v=this.gl;_p(v)?v.bindVertexArray(s):(d=v.getExtension("OES_vertex_array_object"))===null||d===void 0||d.bindVertexArrayOES(s),this.current=s,this.dirty=!1}}class uS extends Wn{getDefault(){return 4}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,s),this.current=s,this.dirty=!1}}class cS extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s),this.current=s,this.dirty=!1}}class fS extends Wn{getDefault(){return!1}set(s){if(s===this.current&&!this.dirty)return;let d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,s),this.current=s,this.dirty=!1}}class o_ extends Wn{constructor(s,d){super(s),this.context=s,this.parent=d}getDefault(){return null}}class pS extends o_{setDirty(){this.dirty=!0}set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.current=s,this.dirty=!1}}class $d extends o_{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class dS extends o_{set(s){if(s===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_STENCIL_ATTACHMENT,d.RENDERBUFFER,s),this.current=s,this.dirty=!1}}class bF{constructor(s,d,v,y,w){this.context=s,this.width=d,this.height=v;let D=s.gl,O=this.framebuffer=D.createFramebuffer();if(this.colorAttachment=new pS(s,O),y)this.depthAttachment=w?new dS(s,O):new $d(s,O);else if(w)throw new Error("Stencil cannot be set without depth");if(D.checkFramebufferStatus(D.FRAMEBUFFER)!==D.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let s=this.context.gl,d=this.colorAttachment.get();if(d&&s.deleteTexture(d),this.depthAttachment){let v=this.depthAttachment.get();v&&s.deleteRenderbuffer(v)}s.deleteFramebuffer(this.framebuffer)}}class hi{constructor(s,d,v){this.blendFunction=s,this.blendColor=d,this.mask=v}}hi.Replace=[1,0],hi.disabled=new hi(hi.Replace,i.aM.transparent,[!1,!1,!1,!1]),hi.unblended=new hi(hi.Replace,i.aM.transparent,[!0,!0,!0,!0]),hi.alphaBlended=new hi([1,771],i.aM.transparent,[!0,!0,!0,!0]);class wF{constructor(s){var d,v;if(this.gl=s,this.clearColor=new t_(this),this.clearDepth=new hF(this),this.clearStencil=new Am(this),this.colorMask=new mF(this),this.depthMask=new YD(this),this.stencilMask=new gF(this),this.stencilFunc=new ZD(this),this.stencilOp=new sS(this),this.stencilTest=new KD(this),this.depthRange=new XD(this),this.depthTest=new JD(this),this.depthFunc=new QD(this),this.blend=new Wd(this),this.blendFunc=new e4(this),this.blendColor=new vF(this),this.blendEquation=new t4(this),this.cullFace=new hy(this),this.cullFaceSide=new yF(this),this.frontFace=new r_(this),this.program=new _F(this),this.activeTexture=new xF(this),this.viewport=new r4(this),this.bindFramebuffer=new n4(this),this.bindRenderbuffer=new o4(this),this.bindTexture=new lS(this),this.bindVertexBuffer=new i4(this),this.bindElementBuffer=new n_(this),this.bindVertexArray=new bf(this),this.pixelStoreUnpack=new uS(this),this.pixelStoreUnpackPremultiplyAlpha=new cS(this),this.pixelStoreUnpackFlipY=new fS(this),this.extTextureFilterAnisotropic=s.getExtension("EXT_texture_filter_anisotropic")||s.getExtension("MOZ_EXT_texture_filter_anisotropic")||s.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=s.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),_p(s)){this.HALF_FLOAT=s.HALF_FLOAT;let y=s.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(d=s.RGBA16F)!==null&&d!==void 0?d:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(v=s.RGB16F)!==null&&v!==void 0?v:y==null?void 0:y.RGB16F_EXT,s.getExtension("EXT_color_buffer_float")}else{s.getExtension("EXT_color_buffer_half_float"),s.getExtension("OES_texture_half_float_linear");let y=s.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(s,d){return new uc(this,s,d)}createVertexBuffer(s,d,v){return new aS(this,s,d,v)}createRenderbuffer(s,d,v){let y=this.gl,w=y.createRenderbuffer();return this.bindRenderbuffer.set(w),y.renderbufferStorage(y.RENDERBUFFER,s,d,v),this.bindRenderbuffer.set(null),w}createFramebuffer(s,d,v,y){return new bF(this,s,d,v,y)}clear({color:s,depth:d,stencil:v}){let y=this.gl,w=0;s&&(w|=y.COLOR_BUFFER_BIT,this.clearColor.set(s),this.colorMask.set([!0,!0,!0,!0])),d!==void 0&&(w|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),v!==void 0&&(w|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(v),this.stencilMask.set(255)),y.clear(w)}setCullFace(s){s.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(s.mode),this.frontFace.set(s.frontFace))}setDepthMode(s){s.func!==this.gl.ALWAYS||s.mask?(this.depthTest.set(!0),this.depthFunc.set(s.func),this.depthMask.set(s.mask),this.depthRange.set(s.range)):this.depthTest.set(!1)}setStencilMode(s){s.test.func!==this.gl.ALWAYS||s.mask?(this.stencilTest.set(!0),this.stencilMask.set(s.mask),this.stencilOp.set([s.fail,s.depthFail,s.pass]),this.stencilFunc.set({func:s.test.func,ref:s.ref,mask:s.test.mask})):this.stencilTest.set(!1)}setColorMode(s){i.aE(s.blendFunction,hi.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(s.blendFunction),this.blendColor.set(s.blendColor)),this.colorMask.set(s.mask)}createVertexArray(){var s;return _p(this.gl)?this.gl.createVertexArray():(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.createVertexArrayOES()}deleteVertexArray(s){var d;return _p(this.gl)?this.gl.deleteVertexArray(s):(d=this.gl.getExtension("OES_vertex_array_object"))===null||d===void 0?void 0:d.deleteVertexArrayOES(s)}unbindVAO(){this.bindVertexArray.set(null)}}class un{constructor(s,d,v){this.func=s,this.mask=d,this.range=v}}un.ReadOnly=!1,un.ReadWrite=!0,un.disabled=new un(519,un.ReadOnly,[0,1]);let i_=7680;class yo{constructor(s,d,v,y,w,D){this.test=s,this.ref=d,this.mask=v,this.fail=y,this.depthFail=w,this.pass=D}}yo.disabled=new yo({func:519,mask:0},0,0,i_,i_,i_);class lo{constructor(s,d,v){this.enable=s,this.mode=d,this.frontFace=v}}let Yd;function my(E,s,d,v,y){let w=E.context,D=w.gl,O=E.useProgram("collisionBox"),R=[],F=0,V=0;for(let xe=0;xe<v.length;xe++){let Me=v[xe],de=s.getTile(Me).getBucket(d);if(!de)continue;let ke=y?de.textCollisionBox:de.iconCollisionBox,Ve=de.collisionCircleArray;if(Ve.length>0){let Ke=i.H();i.aQ(Ke,de.placementInvProjMatrix,E.transform.glCoordMatrix),i.aQ(Ke,Ke,de.placementViewportMatrix),R.push({circleArray:Ve,circleOffset:V,transform:Me.posMatrix,invTransform:Ke,coord:Me}),F+=Ve.length/4,V=F}ke&&O.draw(w,D.LINES,un.disabled,yo.disabled,E.colorModeForRenderPass(),lo.disabled,{u_matrix:Me.posMatrix,u_pixel_extrude_scale:[1/(G=E.transform).width,1/G.height]},E.style.map.terrain&&E.style.map.terrain.getTerrainData(Me),d.id,ke.layoutVertexBuffer,ke.indexBuffer,ke.segments,null,E.transform.zoom,null,null,ke.collisionVertexBuffer)}var G;if(!y||!R.length)return;let Q=E.useProgram("collisionCircle"),ie=new i.aR;ie.resize(4*F),ie._trim();let le=0;for(let xe of R)for(let Me=0;Me<xe.circleArray.length/4;Me++){let de=4*Me,ke=xe.circleArray[de+0],Ve=xe.circleArray[de+1],Ke=xe.circleArray[de+2],dt=xe.circleArray[de+3];ie.emplace(le++,ke,Ve,Ke,dt,0),ie.emplace(le++,ke,Ve,Ke,dt,1),ie.emplace(le++,ke,Ve,Ke,dt,2),ie.emplace(le++,ke,Ve,Ke,dt,3)}(!Yd||Yd.length<2*F)&&(Yd=function(xe){let Me=2*xe,de=new i.aT;de.resize(Me),de._trim();for(let ke=0;ke<Me;ke++){let Ve=6*ke;de.uint16[Ve+0]=4*ke+0,de.uint16[Ve+1]=4*ke+1,de.uint16[Ve+2]=4*ke+2,de.uint16[Ve+3]=4*ke+2,de.uint16[Ve+4]=4*ke+3,de.uint16[Ve+5]=4*ke+0}return de}(F));let me=w.createIndexBuffer(Yd,!0),ye=w.createVertexBuffer(ie,i.aS.members,!0);for(let xe of R){let Me=Gd(xe.transform,xe.invTransform,E.transform);Q.draw(w,D.TRIANGLES,un.disabled,yo.disabled,E.colorModeForRenderPass(),lo.disabled,Me,E.style.map.terrain&&E.style.map.terrain.getTerrainData(xe.coord),d.id,ye,me,i.a0.simpleSegment(0,2*xe.circleOffset,xe.circleArray.length,xe.circleArray.length/2),null,E.transform.zoom,null,null,null)}ye.destroy(),me.destroy()}lo.disabled=new lo(!1,1029,2305),lo.backCCW=new lo(!0,1029,2305);let gy=i.an(new Float32Array(16));function hS(E,s,d,v,y,w){let{horizontalAlign:D,verticalAlign:O}=i.au(E);return new i.P((-(D-.5)*s/y+v[0])*w,(-(O-.5)*d/y+v[1])*w)}function Zd(E,s,d,v,y,w){let D=s.tileAnchorPoint.add(new i.P(s.translation[0],s.translation[1]));if(s.pitchWithMap){let O=v.mult(w);d||(O=O.rotate(-y));let R=D.add(O);return ae(R.x,R.y,s.labelPlaneMatrix,s.getElevation).point}if(d){let O=Je(s.tileAnchorPoint.x+1,s.tileAnchorPoint.y,s).point.sub(E),R=Math.atan(O.y/O.x)+(O.x<0?Math.PI:0);return E.add(v.rotate(R))}return E.add(v)}function Dm(E,s,d,v,y,w,D,O,R,F,V,G,Q,ie){let le=E.text.placedSymbolArray,me=E.text.dynamicLayoutVertexArray,ye=E.icon.dynamicLayoutVertexArray,xe={};me.clear();for(let Me=0;Me<le.length;Me++){let de=le.get(Me),ke=de.hidden||!de.crossTileID||E.allowVerticalPlacement&&!de.placedOrientation?null:v[de.crossTileID];if(ke){let Ve=new i.P(de.anchorX,de.anchorY),Ke={getElevation:ie,width:y.width,height:y.height,labelPlaneMatrix:w,lineVertexArray:null,pitchWithMap:d,projection:V,projectionCache:null,tileAnchorPoint:Ve,translation:G,unwrappedTileID:Q},dt=d?ae(Ve.x,Ve.y,D,ie):Je(Ve.x,Ve.y,Ke),It=$(y.cameraToCenterDistance,dt.signedDistanceFromCamera),Vt=i.ai(E.textSizeData,R,de)*It/i.ap;d&&(Vt*=E.tilePixelRatio/O);let{width:tr,height:jt,anchor:Rt,textOffset:fr,textBoxScale:kr}=ke,Ft=hS(Rt,tr,jt,fr,kr,Vt),Xt=V.getPitchedTextCorrection(y,Ve.add(new i.P(G[0],G[1])),Q),Lr=Zd(dt.point,Ke,s,Ft,y.angle,Xt),No=E.allowVerticalPlacement&&de.placedOrientation===i.ah.vertical?Math.PI/2:0;for(let Yr=0;Yr<de.numGlyphs;Yr++)i.aj(me,Lr,No);F&&de.associatedIconIndex>=0&&(xe[de.associatedIconIndex]={shiftedAnchor:Lr,angle:No})}else Sr(de.numGlyphs,me)}if(F){ye.clear();let Me=E.icon.placedSymbolArray;for(let de=0;de<Me.length;de++){let ke=Me.get(de);if(ke.hidden)Sr(ke.numGlyphs,ye);else{let Ve=xe[de];if(Ve)for(let Ke=0;Ke<ke.numGlyphs;Ke++)i.aj(ye,Ve.shiftedAnchor,Ve.angle);else Sr(ke.numGlyphs,ye)}}E.icon.dynamicLayoutVertexBuffer.updateData(ye)}E.text.dynamicLayoutVertexBuffer.updateData(me)}function Bl(E,s,d){return d.iconsInText&&s?"symbolTextAndIcon":E?"symbolSDF":"symbolIcon"}function mS(E,s,d,v,y,w,D,O,R,F,V,G){let Q=E.context,ie=Q.gl,le=E.transform,me=Bd(),ye=O==="map",xe=R==="map",Me=O!=="viewport"&&d.layout.get("symbol-placement")!=="point",de=ye&&!xe&&!Me,ke=!xe&&Me,Ve=!d.layout.get("symbol-sort-key").isConstant(),Ke=!1,dt=E.depthModeForSublayer(0,un.ReadOnly),It=d._unevaluatedLayout.hasValue("text-variable-anchor")||d._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Vt=[],tr=me.getCircleRadiusCorrection(le);for(let jt of v){let Rt=s.getTile(jt),fr=Rt.getBucket(d);if(!fr)continue;let kr=y?fr.text:fr.icon;if(!kr||!kr.segments.get().length||!kr.hasVisibleVertices)continue;let Ft=kr.programConfigurations.get(d.id),Xt=y||fr.sdfIcons,Lr=y?fr.textSizeData:fr.iconSizeData,No=xe||le.pitch!==0,Yr=E.useProgram(Bl(Xt,y,fr),Ft),yn=i.ag(Lr,le.zoom),Oo=E.style.map.terrain&&E.style.map.terrain.getTerrainData(jt),Ca,Ru,Lo,Ns,Qa=[0,0],Aa=null;if(y)Ru=Rt.glyphAtlasTexture,Lo=ie.LINEAR,Ca=Rt.glyphAtlasTexture.size,fr.iconsInText&&(Qa=Rt.imageAtlasTexture.size,Aa=Rt.imageAtlasTexture,Ns=No||E.options.rotating||E.options.zooming||Lr.kind==="composite"||Lr.kind==="camera"?ie.LINEAR:ie.NEAREST);else{let wn=d.layout.get("icon-size").constantOr(0)!==1||fr.iconsNeedLinear;Ru=Rt.imageAtlasTexture,Lo=Xt||E.options.rotating||E.options.zooming||wn||No?ie.LINEAR:ie.NEAREST,Ca=Rt.imageAtlasTexture.size}let es=vn(Rt,1,E.transform.zoom),pc=ke?jt.posMatrix:gy,Wm=Zt(pc,xe,ye,E.transform,es),S_=Ht(pc,xe,ye,E.transform,es),$m=Ht(jt.posMatrix,xe,ye,E.transform,es),Hl=me.translatePosition(E.transform,Rt,w,D),I_=It&&fr.hasTextData(),FS=d.layout.get("icon-text-fit")!=="none"&&I_&&fr.hasIconData();if(Me){let wn=E.style.map.terrain?(Ym,Zm)=>E.style.map.terrain.getElevation(jt,Ym,Zm):null,eh=d.layout.get("text-rotation-alignment")==="map";J(fr,jt.posMatrix,E,y,Wm,$m,xe,F,eh,me,jt.toUnwrapped(),le.width,le.height,Hl,wn)}let Wl=jt.posMatrix,$l=y&&It||FS,xp=Me||$l?gy:Wm,ju=S_,ma=Xt&&d.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Da;Da=Xt?fr.iconsInText?nS(Lr.kind,yn,de,xe,Me,$l,E,Wl,xp,ju,Hl,Ca,Qa,tr):dy(Lr.kind,yn,de,xe,Me,$l,E,Wl,xp,ju,Hl,y,Ca,!0,tr):$D(Lr.kind,yn,de,xe,Me,$l,E,Wl,xp,ju,Hl,y,Ca,tr);let vl={program:Yr,buffers:kr,uniformValues:Da,atlasTexture:Ru,atlasTextureIcon:Aa,atlasInterpolation:Lo,atlasInterpolationIcon:Ns,isSDF:Xt,hasHalo:ma};if(Ve&&fr.canOverlap){Ke=!0;let wn=kr.segments.get();for(let eh of wn)Vt.push({segments:new i.a0([eh]),sortKey:eh.sortKey,state:vl,terrainData:Oo})}else Vt.push({segments:kr.segments,sortKey:0,state:vl,terrainData:Oo})}Ke&&Vt.sort((jt,Rt)=>jt.sortKey-Rt.sortKey);for(let jt of Vt){let Rt=jt.state;if(Q.activeTexture.set(ie.TEXTURE0),Rt.atlasTexture.bind(Rt.atlasInterpolation,ie.CLAMP_TO_EDGE),Rt.atlasTextureIcon&&(Q.activeTexture.set(ie.TEXTURE1),Rt.atlasTextureIcon&&Rt.atlasTextureIcon.bind(Rt.atlasInterpolationIcon,ie.CLAMP_TO_EDGE)),Rt.isSDF){let fr=Rt.uniformValues;Rt.hasHalo&&(fr.u_is_halo=1,gS(Rt.buffers,jt.segments,d,E,Rt.program,dt,V,G,fr,jt.terrainData)),fr.u_is_halo=0}gS(Rt.buffers,jt.segments,d,E,Rt.program,dt,V,G,Rt.uniformValues,jt.terrainData)}}function gS(E,s,d,v,y,w,D,O,R,F){let V=v.context;y.draw(V,V.gl.TRIANGLES,w,D,O,lo.disabled,R,F,d.id,E.layoutVertexBuffer,E.indexBuffer,s,d.paint,v.transform.zoom,E.programConfigurations.get(d.id),E.dynamicLayoutVertexBuffer,E.opacityVertexBuffer)}function vS(E,s,d,v){let y=E.context,w=y.gl,D=yo.disabled,O=new hi([w.ONE,w.ONE],i.aM.transparent,[!0,!0,!0,!0]),R=s.getBucket(d);if(!R)return;let F=v.key,V=d.heatmapFbos.get(F);V||(V=vy(y,s.tileSize,s.tileSize),d.heatmapFbos.set(F,V)),y.bindFramebuffer.set(V.framebuffer),y.viewport.set([0,0,s.tileSize,s.tileSize]),y.clear({color:i.aM.transparent});let G=R.programConfigurations.get(d.id),Q=E.useProgram("heatmap",G),ie=E.style.map.terrain.getTerrainData(v);Q.draw(y,w.TRIANGLES,un.disabled,D,O,lo.disabled,Ds(v.posMatrix,s,E.transform.zoom,d.paint.get("heatmap-intensity")),ie,d.id,R.layoutVertexBuffer,R.indexBuffer,R.segments,d.paint,E.transform.zoom,G)}function Kd(E,s,d){let v=E.context,y=v.gl;v.setColorMode(E.colorModeForRenderPass());let w=yy(v,s),D=d.key,O=s.heatmapFbos.get(D);O&&(v.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,O.colorAttachment.get()),v.activeTexture.set(y.TEXTURE1),w.bind(y.LINEAR,y.CLAMP_TO_EDGE),E.useProgram("heatmapTexture").draw(v,y.TRIANGLES,un.disabled,yo.disabled,E.colorModeForRenderPass(),lo.disabled,X1(E,s,0,1),null,s.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments,s.paint,E.transform.zoom),O.destroy(),s.heatmapFbos.delete(D))}function vy(E,s,d){var v,y;let w=E.gl,D=w.createTexture();w.bindTexture(w.TEXTURE_2D,D),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);let O=(v=E.HALF_FLOAT)!==null&&v!==void 0?v:w.UNSIGNED_BYTE,R=(y=E.RGBA16F)!==null&&y!==void 0?y:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,R,s,d,0,w.RGBA,O,null);let F=E.createFramebuffer(s,d,!1,!1);return F.colorAttachment.set(D),F}function yy(E,s){return s.colorRampTexture||(s.colorRampTexture=new ue(E,s.colorRamp,E.gl.RGBA)),s.colorRampTexture}function Nm(E,s,d,v,y){if(!d||!v||!v.imageAtlas)return;let w=v.imageAtlas.patternPositions,D=w[d.to.toString()],O=w[d.from.toString()];if(!D&&O&&(D=O),!O&&D&&(O=D),!D||!O){let R=y.getPaintProperty(s);D=w[R],O=w[R]}D&&O&&E.setConstantPatternPositions(D,O)}function _y(E,s,d,v,y,w,D){let O=E.context.gl,R="fill-pattern",F=d.paint.get(R),V=F&&F.constantOr(1),G=d.getCrossfadeParameters(),Q,ie,le,me,ye;D?(ie=V&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",Q=O.LINES):(ie=V?"fillPattern":"fill",Q=O.TRIANGLES);let xe=F.constantOr(null);for(let Me of v){let de=s.getTile(Me);if(V&&!de.patternsLoaded())continue;let ke=de.getBucket(d);if(!ke)continue;let Ve=ke.programConfigurations.get(d.id),Ke=E.useProgram(ie,Ve),dt=E.style.map.terrain&&E.style.map.terrain.getTerrainData(Me);V&&(E.context.activeTexture.set(O.TEXTURE0),de.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),Ve.updatePaintBuffers(G)),Nm(Ve,R,xe,de,d);let It=dt?Me:null,Vt=E.translatePosMatrix(It?It.posMatrix:Me.posMatrix,de,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor"));if(D){me=ke.indexBuffer2,ye=ke.segments2;let tr=[O.drawingBufferWidth,O.drawingBufferHeight];le=ie==="fillOutlinePattern"&&V?VD(Vt,E,G,de,tr):lF(Vt,tr)}else me=ke.indexBuffer,ye=ke.segments,le=V?BD(Vt,E,G,de):Mm(Vt);Ke.draw(E.context,Q,y,E.stencilModeForClipping(Me),w,lo.disabled,le,dt,d.id,ke.layoutVertexBuffer,me,ye,d.paint,E.transform.zoom,Ve)}}function a_(E,s,d,v,y,w,D){let O=E.context,R=O.gl,F="fill-extrusion-pattern",V=d.paint.get(F),G=V.constantOr(1),Q=d.getCrossfadeParameters(),ie=d.paint.get("fill-extrusion-opacity"),le=V.constantOr(null);for(let me of v){let ye=s.getTile(me),xe=ye.getBucket(d);if(!xe)continue;let Me=E.style.map.terrain&&E.style.map.terrain.getTerrainData(me),de=xe.programConfigurations.get(d.id),ke=E.useProgram(G?"fillExtrusionPattern":"fillExtrusion",de);G&&(E.context.activeTexture.set(R.TEXTURE0),ye.imageAtlasTexture.bind(R.LINEAR,R.CLAMP_TO_EDGE),de.updatePaintBuffers(Q)),Nm(de,F,le,ye,d);let Ve=E.translatePosMatrix(me.posMatrix,ye,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Ke=d.paint.get("fill-extrusion-vertical-gradient"),dt=G?K1(Ve,E,Ke,ie,me,Q,ye):fy(Ve,E,Ke,ie);ke.draw(O,O.gl.TRIANGLES,y,w,D,lo.backCCW,dt,Me,d.id,xe.layoutVertexBuffer,xe.indexBuffer,xe.segments,d.paint,E.transform.zoom,de,E.style.map.terrain&&xe.centroidVertexBuffer)}}function Om(E,s,d,v,y,w,D){let O=E.context,R=O.gl,F=d.fbo;if(!F)return;let V=E.useProgram("hillshade"),G=E.style.map.terrain&&E.style.map.terrain.getTerrainData(s);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,F.colorAttachment.get()),V.draw(O,R.TRIANGLES,y,w,D,lo.disabled,((Q,ie,le,me)=>{let ye=le.paint.get("hillshade-shadow-color"),xe=le.paint.get("hillshade-highlight-color"),Me=le.paint.get("hillshade-accent-color"),de=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(de-=Q.transform.angle);let ke=!Q.options.moving;return{u_matrix:me?me.posMatrix:Q.transform.calculatePosMatrix(ie.tileID.toUnwrapped(),ke),u_image:0,u_latrange:J1(0,ie.tileID),u_light:[le.paint.get("hillshade-exaggeration"),de],u_shadow:ye,u_highlight:xe,u_accent:Me}})(E,d,v,G?s:null),G,v.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments)}function Lm(E,s,d,v,y,w){let D=E.context,O=D.gl,R=s.dem;if(R&&R.data){let F=R.dim,V=R.stride,G=R.getPixels();if(D.activeTexture.set(O.TEXTURE1),D.pixelStoreUnpackPremultiplyAlpha.set(!1),s.demTexture=s.demTexture||E.getTileTexture(V),s.demTexture){let ie=s.demTexture;ie.update(G,{premultiply:!1}),ie.bind(O.NEAREST,O.CLAMP_TO_EDGE)}else s.demTexture=new ue(D,G,O.RGBA,{premultiply:!1}),s.demTexture.bind(O.NEAREST,O.CLAMP_TO_EDGE);D.activeTexture.set(O.TEXTURE0);let Q=s.fbo;if(!Q){let ie=new ue(D,{width:F,height:F,data:null},O.RGBA);ie.bind(O.LINEAR,O.CLAMP_TO_EDGE),Q=s.fbo=D.createFramebuffer(F,F,!0,!1),Q.colorAttachment.set(ie.texture)}D.bindFramebuffer.set(Q.framebuffer),D.viewport.set([0,0,F,F]),E.useProgram("hillshadePrepare").draw(D,O.TRIANGLES,v,y,w,lo.disabled,((ie,le)=>{let me=le.stride,ye=i.H();return i.aP(ye,0,i.X,-i.X,0,0,1),i.J(ye,ye,[0,-i.X,0]),{u_matrix:ye,u_image:1,u_dimension:[me,me],u_zoom:ie.overscaledZ,u_unpack:le.getUnpackVector()}})(s.tileID,R),null,d.id,E.rasterBoundsBuffer,E.quadTriangleIndexBuffer,E.rasterBoundsSegments),s.needsHillshadePrepare=!1}}function a4(E,s,d,v,y,w){let D=v.paint.get("raster-fade-duration");if(!w&&D>0){let O=h.now(),R=(O-E.timeAdded)/D,F=s?(O-s.timeAdded)/D:-1,V=d.getSource(),G=y.coveringZoomLevel({tileSize:V.tileSize,roundZoom:V.roundZoom}),Q=!s||Math.abs(s.tileID.overscaledZ-G)>Math.abs(E.tileID.overscaledZ-G),ie=Q&&E.refreshedUponExpiration?1:i.ac(Q?R:1-F,0,1);return E.refreshedUponExpiration&&R>=1&&(E.refreshedUponExpiration=!1),s?{opacity:1,mix:1-ie}:{opacity:ie,mix:0}}return{opacity:1,mix:0}}let yS=new i.aM(1,0,0,1),jn=new i.aM(0,1,0,1),s_=new i.aM(0,0,1,1),EF=new i.aM(1,0,1,1),s4=new i.aM(0,1,1,1);function Pm(E,s,d,v){l_(E,0,s+d/2,E.transform.width,d,v)}function l4(E,s,d,v){l_(E,s-d/2,0,d,E.transform.height,v)}function l_(E,s,d,v,y,w){let D=E.context,O=D.gl;O.enable(O.SCISSOR_TEST),O.scissor(s*E.pixelRatio,d*E.pixelRatio,v*E.pixelRatio,y*E.pixelRatio),D.clear({color:w}),O.disable(O.SCISSOR_TEST)}function u4(E,s,d){let v=E.context,y=v.gl,w=d.posMatrix,D=E.useProgram("debug"),O=un.disabled,R=yo.disabled,F=E.colorModeForRenderPass(),V="$debug",G=E.style.map.terrain&&E.style.map.terrain.getTerrainData(d);v.activeTexture.set(y.TEXTURE0);let Q=s.getTileByID(d.key).latestRawTileData,ie=Math.floor((Q&&Q.byteLength||0)/1024),le=s.getTile(d).tileSize,me=512/Math.min(le,512)*(d.overscaledZ/E.transform.zoom)*.5,ye=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(ye+=` => ${d.overscaledZ}`),function(xe,Me){xe.initDebugOverlayCanvas();let de=xe.debugOverlayCanvas,ke=xe.context.gl,Ve=xe.debugOverlayCanvas.getContext("2d");Ve.clearRect(0,0,de.width,de.height),Ve.shadowColor="white",Ve.shadowBlur=2,Ve.lineWidth=1.5,Ve.strokeStyle="white",Ve.textBaseline="top",Ve.font="bold 36px Open Sans, sans-serif",Ve.fillText(Me,5,5),Ve.strokeText(Me,5,5),xe.debugOverlayTexture.update(de),xe.debugOverlayTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE)}(E,`${ye} ${ie}kB`),D.draw(v,y.TRIANGLES,O,R,hi.alphaBlended,lo.disabled,py(w,i.aM.transparent,me),null,V,E.debugBuffer,E.quadTriangleIndexBuffer,E.debugSegments),D.draw(v,y.LINE_STRIP,O,R,F,lo.disabled,py(w,i.aM.red),G,V,E.debugBuffer,E.tileBorderIndexBuffer,E.debugSegments)}function c4(E,s,d){let v=E.context,y=v.gl,w=E.colorModeForRenderPass(),D=new un(y.LEQUAL,un.ReadWrite,E.depthRangeFor3D),O=E.useProgram("terrain"),R=s.getTerrainMesh();v.bindFramebuffer.set(null),v.viewport.set([0,0,E.width,E.height]);for(let F of d){let V=E.renderToTexture.getTexture(F),G=s.getTerrainData(F.tileID);v.activeTexture.set(y.TEXTURE0),y.bindTexture(y.TEXTURE_2D,V.texture);let Q=E.transform.calculatePosMatrix(F.tileID.toUnwrapped()),ie=s.getMeshFrameDelta(E.transform.zoom),le=E.transform.calculateFogMatrix(F.tileID.toUnwrapped()),me=tS(Q,ie,le,E.style.sky,E.transform.pitch);O.draw(v,y.TRIANGLES,D,yo.disabled,w,lo.backCCW,me,G,"terrain",R.vertexBuffer,R.indexBuffer,R.segments)}}class u_{constructor(s,d,v){this.vertexBuffer=s,this.indexBuffer=d,this.segments=v}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class c_{constructor(s,d){this.context=new wF(s),this.transform=d,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:i.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Er.maxUnderzooming+Er.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new QE}resize(s,d,v){if(this.width=Math.floor(s*v),this.height=Math.floor(d*v),this.pixelRatio=v,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let y of this.style._order)this.style._layers[y].resize()}setup(){let s=this.context,d=new i.aX;d.emplaceBack(0,0),d.emplaceBack(i.X,0),d.emplaceBack(0,i.X),d.emplaceBack(i.X,i.X),this.tileExtentBuffer=s.createVertexBuffer(d,Vd.members),this.tileExtentSegments=i.a0.simpleSegment(0,0,4,2);let v=new i.aX;v.emplaceBack(0,0),v.emplaceBack(i.X,0),v.emplaceBack(0,i.X),v.emplaceBack(i.X,i.X),this.debugBuffer=s.createVertexBuffer(v,Vd.members),this.debugSegments=i.a0.simpleSegment(0,0,4,5);let y=new i.$;y.emplaceBack(0,0,0,0),y.emplaceBack(i.X,0,i.X,0),y.emplaceBack(0,i.X,0,i.X),y.emplaceBack(i.X,i.X,i.X,i.X),this.rasterBoundsBuffer=s.createVertexBuffer(y,Be.members),this.rasterBoundsSegments=i.a0.simpleSegment(0,0,4,2);let w=new i.aX;w.emplaceBack(0,0),w.emplaceBack(1,0),w.emplaceBack(0,1),w.emplaceBack(1,1),this.viewportBuffer=s.createVertexBuffer(w,Vd.members),this.viewportSegments=i.a0.simpleSegment(0,0,4,2);let D=new i.aZ;D.emplaceBack(0),D.emplaceBack(1),D.emplaceBack(3),D.emplaceBack(2),D.emplaceBack(0),this.tileBorderIndexBuffer=s.createIndexBuffer(D);let O=new i.aY;O.emplaceBack(0,1,2),O.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=s.createIndexBuffer(O);let R=this.context.gl;this.stencilClearMode=new yo({func:R.ALWAYS,mask:0},0,255,R.ZERO,R.ZERO,R.ZERO)}clearStencil(){let s=this.context,d=s.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let v=i.H();i.aP(v,0,this.width,this.height,0,0,1),i.K(v,v,[d.drawingBufferWidth,d.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(s,d.TRIANGLES,un.disabled,this.stencilClearMode,hi.disabled,lo.disabled,As(v),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(s,d){if(this.currentStencilSource===s.source||!s.isTileClipped()||!d||!d.length)return;this.currentStencilSource=s.source;let v=this.context,y=v.gl;this.nextStencilID+d.length>256&&this.clearStencil(),v.setColorMode(hi.disabled),v.setDepthMode(un.disabled);let w=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let D of d){let O=this._tileClippingMaskIDs[D.key]=this.nextStencilID++,R=this.style.map.terrain&&this.style.map.terrain.getTerrainData(D);w.draw(v,y.TRIANGLES,un.disabled,new yo({func:y.ALWAYS,mask:0},O,255,y.KEEP,y.KEEP,y.REPLACE),hi.disabled,lo.disabled,As(D.posMatrix),R,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let s=this.nextStencilID++,d=this.context.gl;return new yo({func:d.NOTEQUAL,mask:255},s,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(s){let d=this.context.gl;return new yo({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[s.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(s){let d=this.context.gl,v=s.sort((D,O)=>O.overscaledZ-D.overscaledZ),y=v[v.length-1].overscaledZ,w=v[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();let D={};for(let O=0;O<w;O++)D[O+y]=new yo({func:d.GEQUAL,mask:255},O+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=w,[D,v]}return[{[y]:yo.disabled},v]}colorModeForRenderPass(){let s=this.context.gl;return this._showOverdrawInspector?new hi([s.CONSTANT_COLOR,s.ONE],new i.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?hi.unblended:hi.alphaBlended}depthModeForSublayer(s,d,v){if(!this.opaquePassEnabledForLayer())return un.disabled;let y=1-((1+this.currentLayer)*this.numSublayers+s)*this.depthEpsilon;return new un(v||this.context.gl.LEQUAL,d,[y,y])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(s,d){this.style=s,this.options=d,this.lineAtlas=s.lineAtlas,this.imageManager=s.imageManager,this.glyphManager=s.glyphManager,this.symbolFadeChange=s.placement.symbolFadeChange(h.now()),this.imageManager.beginFrame();let v=this.style._order,y=this.style.sourceCaches,w={},D={},O={};for(let R in y){let F=y[R];F.used&&F.prepare(this.context),w[R]=F.getVisibleCoordinates(),D[R]=w[R].slice().reverse(),O[R]=F.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let R=0;R<v.length;R++)if(this.style._layers[v[R]].is3D()){this.opaquePassCutoff=R;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let R of v){let F=this.style._layers[R];if(!F.hasOffscreenPass()||F.isHidden(this.transform.zoom))continue;let V=D[F.source];(F.type==="custom"||V.length)&&this.renderLayer(this,y[F.source],F,V)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:d.showOverdrawInspector?i.aM.black:i.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(R,F){let V=R.context,G=V.gl,Q=((xe,Me,de)=>({u_sky_color:xe.properties.get("sky-color"),u_horizon_color:xe.properties.get("horizon-color"),u_horizon:(Me.height/2+Me.getHorizon())*de,u_sky_horizon_blend:xe.properties.get("sky-horizon-blend")*Me.height/2*de}))(F,R.style.map.transform,R.pixelRatio),ie=new un(G.LEQUAL,un.ReadWrite,[0,1]),le=yo.disabled,me=R.colorModeForRenderPass(),ye=R.useProgram("sky");if(!F.mesh){let xe=new i.aX;xe.emplaceBack(-1,-1),xe.emplaceBack(1,-1),xe.emplaceBack(1,1),xe.emplaceBack(-1,1);let Me=new i.aY;Me.emplaceBack(0,1,2),Me.emplaceBack(0,2,3),F.mesh=new u_(V.createVertexBuffer(xe,Vd.members),V.createIndexBuffer(Me),i.a0.simpleSegment(0,0,xe.length,Me.length))}ye.draw(V,G.TRIANGLES,ie,le,me,lo.disabled,Q,void 0,"sky",F.mesh.vertexBuffer,F.mesh.indexBuffer,F.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=d.showOverdrawInspector,this.depthRangeFor3D=[0,1-(s._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){let R=this.style._layers[v[this.currentLayer]],F=y[R.source],V=w[R.source];this._renderTileClippingMasks(R,V),this.renderLayer(this,F,R,V)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){let R=this.style._layers[v[this.currentLayer]],F=y[R.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(R))continue;let V=(R.type==="symbol"?O:D)[R.source];this._renderTileClippingMasks(R,w[R.source]),this.renderLayer(this,F,R,V)}if(this.options.showTileBoundaries){let R=function(F,V){let G=null,Q=Object.values(F._layers).flatMap(ye=>ye.source&&!ye.isHidden(V)?[F.sourceCaches[ye.source]]:[]),ie=Q.filter(ye=>ye.getSource().type==="vector"),le=Q.filter(ye=>ye.getSource().type!=="vector"),me=ye=>{(!G||G.getSource().maxzoom<ye.getSource().maxzoom)&&(G=ye)};return ie.forEach(ye=>me(ye)),G||le.forEach(ye=>me(ye)),G}(this.style,this.transform.zoom);R&&function(F,V,G){for(let Q=0;Q<G.length;Q++)u4(F,V,G[Q])}(this,R,R.getVisibleCoordinates())}this.options.showPadding&&function(R){let F=R.transform.padding;Pm(R,R.transform.height-(F.top||0),3,yS),Pm(R,F.bottom||0,3,jn),l4(R,F.left||0,3,s_),l4(R,R.transform.width-(F.right||0),3,EF);let V=R.transform.centerPoint;(function(G,Q,ie,le){l_(G,Q-1,ie-10,2,20,le),l_(G,Q-10,ie-1,20,2,le)})(R,V.x,R.transform.height-V.y,s4)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(s){if(!this.style||!this.style.map||!this.style.map.terrain)return;let d=this.terrainFacilitator.matrix,v=this.transform.modelViewProjectionMatrix,y=this.terrainFacilitator.dirty;y||(y=s?!i.a_(d,v):!i.a$(d,v)),y||(y=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),y&&(i.b0(d,v),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,D){let O=w.context,R=O.gl,F=hi.unblended,V=new un(R.LEQUAL,un.ReadWrite,[0,1]),G=D.getTerrainMesh(),Q=D.sourceCache.getRenderableTiles(),ie=w.useProgram("terrainDepth");O.bindFramebuffer.set(D.getFramebuffer("depth").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:i.aM.transparent,depth:1});for(let le of Q){let me=D.getTerrainData(le.tileID),ye={u_matrix:w.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_ele_delta:D.getMeshFrameDelta(w.transform.zoom)};ie.draw(O,R.TRIANGLES,V,yo.disabled,F,lo.backCCW,ye,me,"terrain",G.vertexBuffer,G.indexBuffer,G.segments)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,D){let O=w.context,R=O.gl,F=hi.unblended,V=new un(R.LEQUAL,un.ReadWrite,[0,1]),G=D.getTerrainMesh(),Q=D.getCoordsTexture(),ie=D.sourceCache.getRenderableTiles(),le=w.useProgram("terrainCoords");O.bindFramebuffer.set(D.getFramebuffer("coords").framebuffer),O.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),O.clear({color:i.aM.transparent,depth:1}),D.coordsIndex=[];for(let me of ie){let ye=D.getTerrainData(me.tileID);O.activeTexture.set(R.TEXTURE0),R.bindTexture(R.TEXTURE_2D,Q.texture);let xe={u_matrix:w.transform.calculatePosMatrix(me.tileID.toUnwrapped()),u_terrain_coords_id:(255-D.coordsIndex.length)/255,u_texture:0,u_ele_delta:D.getMeshFrameDelta(w.transform.zoom)};le.draw(O,R.TRIANGLES,V,yo.disabled,F,lo.backCCW,xe,ye,"terrain",G.vertexBuffer,G.indexBuffer,G.segments),D.coordsIndex.push(me.tileID.key)}O.bindFramebuffer.set(null),O.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(s,d,v,y){if(!v.isHidden(this.transform.zoom)&&(v.type==="background"||v.type==="custom"||(y||[]).length))switch(this.id=v.id,v.type){case"symbol":(function(w,D,O,R,F){if(w.renderPass!=="translucent")return;let V=yo.disabled,G=w.colorModeForRenderPass();(O._unevaluatedLayout.hasValue("text-variable-anchor")||O._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(Q,ie,le,me,ye,xe,Me,de,ke){let Ve=ie.transform,Ke=Bd(),dt=ye==="map",It=xe==="map";for(let Vt of Q){let tr=me.getTile(Vt),jt=tr.getBucket(le);if(!jt||!jt.text||!jt.text.segments.get().length)continue;let Rt=i.ag(jt.textSizeData,Ve.zoom),fr=vn(tr,1,ie.transform.zoom),kr=Zt(Vt.posMatrix,It,dt,ie.transform,fr),Ft=le.layout.get("icon-text-fit")!=="none"&&jt.hasIconData();if(Rt){let Xt=Math.pow(2,Ve.zoom-tr.tileID.overscaledZ),Lr=ie.style.map.terrain?(Yr,yn)=>ie.style.map.terrain.getElevation(Vt,Yr,yn):null,No=Ke.translatePosition(Ve,tr,Me,de);Dm(jt,dt,It,ke,Ve,kr,Vt.posMatrix,Xt,Rt,Ft,Ke,No,Vt.toUnwrapped(),Lr)}}}(R,w,O,D,O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),F),O.paint.get("icon-opacity").constantOr(1)!==0&&mS(w,D,O,R,!1,O.paint.get("icon-translate"),O.paint.get("icon-translate-anchor"),O.layout.get("icon-rotation-alignment"),O.layout.get("icon-pitch-alignment"),O.layout.get("icon-keep-upright"),V,G),O.paint.get("text-opacity").constantOr(1)!==0&&mS(w,D,O,R,!0,O.paint.get("text-translate"),O.paint.get("text-translate-anchor"),O.layout.get("text-rotation-alignment"),O.layout.get("text-pitch-alignment"),O.layout.get("text-keep-upright"),V,G),D.map.showCollisionBoxes&&(my(w,D,O,R,!0),my(w,D,O,R,!1))})(s,d,v,y,this.style.placement.variableOffsets);break;case"circle":(function(w,D,O,R){if(w.renderPass!=="translucent")return;let F=O.paint.get("circle-opacity"),V=O.paint.get("circle-stroke-width"),G=O.paint.get("circle-stroke-opacity"),Q=!O.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(V.constantOr(1)===0||G.constantOr(1)===0))return;let ie=w.context,le=ie.gl,me=w.depthModeForSublayer(0,un.ReadOnly),ye=yo.disabled,xe=w.colorModeForRenderPass(),Me=[];for(let de=0;de<R.length;de++){let ke=R[de],Ve=D.getTile(ke),Ke=Ve.getBucket(O);if(!Ke)continue;let dt=Ke.programConfigurations.get(O.id),It=w.useProgram("circle",dt),Vt=Ke.layoutVertexBuffer,tr=Ke.indexBuffer,jt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(ke),Rt={programConfiguration:dt,program:It,layoutVertexBuffer:Vt,indexBuffer:tr,uniformValues:uF(w,ke,Ve,O),terrainData:jt};if(Q){let fr=Ke.segments.get();for(let kr of fr)Me.push({segments:new i.a0([kr]),sortKey:kr.sortKey,state:Rt})}else Me.push({segments:Ke.segments,sortKey:0,state:Rt})}Q&&Me.sort((de,ke)=>de.sortKey-ke.sortKey);for(let de of Me){let{programConfiguration:ke,program:Ve,layoutVertexBuffer:Ke,indexBuffer:dt,uniformValues:It,terrainData:Vt}=de.state;Ve.draw(ie,le.TRIANGLES,me,ye,xe,lo.disabled,It,Vt,O.id,Ke,dt,de.segments,O.paint,w.transform.zoom,ke)}})(s,d,v,y);break;case"heatmap":(function(w,D,O,R){if(O.paint.get("heatmap-opacity")===0)return;let F=w.context;if(w.style.map.terrain){for(let V of R){let G=D.getTile(V);D.hasRenderableParent(V)||(w.renderPass==="offscreen"?vS(w,G,O,V):w.renderPass==="translucent"&&Kd(w,O,V))}F.viewport.set([0,0,w.width,w.height])}else w.renderPass==="offscreen"?function(V,G,Q,ie){let le=V.context,me=le.gl,ye=yo.disabled,xe=new hi([me.ONE,me.ONE],i.aM.transparent,[!0,!0,!0,!0]);(function(Me,de,ke){let Ve=Me.gl;Me.activeTexture.set(Ve.TEXTURE1),Me.viewport.set([0,0,de.width/4,de.height/4]);let Ke=ke.heatmapFbos.get(i.aU);Ke?(Ve.bindTexture(Ve.TEXTURE_2D,Ke.colorAttachment.get()),Me.bindFramebuffer.set(Ke.framebuffer)):(Ke=vy(Me,de.width/4,de.height/4),ke.heatmapFbos.set(i.aU,Ke))})(le,V,Q),le.clear({color:i.aM.transparent});for(let Me=0;Me<ie.length;Me++){let de=ie[Me];if(G.hasRenderableParent(de))continue;let ke=G.getTile(de),Ve=ke.getBucket(Q);if(!Ve)continue;let Ke=Ve.programConfigurations.get(Q.id),dt=V.useProgram("heatmap",Ke),{zoom:It}=V.transform;dt.draw(le,me.TRIANGLES,un.disabled,ye,xe,lo.disabled,Ds(de.posMatrix,ke,It,Q.paint.get("heatmap-intensity")),null,Q.id,Ve.layoutVertexBuffer,Ve.indexBuffer,Ve.segments,Q.paint,V.transform.zoom,Ke)}le.viewport.set([0,0,V.width,V.height])}(w,D,O,R):w.renderPass==="translucent"&&function(V,G){let Q=V.context,ie=Q.gl;Q.setColorMode(V.colorModeForRenderPass());let le=G.heatmapFbos.get(i.aU);le&&(Q.activeTexture.set(ie.TEXTURE0),ie.bindTexture(ie.TEXTURE_2D,le.colorAttachment.get()),Q.activeTexture.set(ie.TEXTURE1),yy(Q,G).bind(ie.LINEAR,ie.CLAMP_TO_EDGE),V.useProgram("heatmapTexture").draw(Q,ie.TRIANGLES,un.disabled,yo.disabled,V.colorModeForRenderPass(),lo.disabled,X1(V,G,0,1),null,G.id,V.viewportBuffer,V.quadTriangleIndexBuffer,V.viewportSegments,G.paint,V.transform.zoom))}(w,O)})(s,d,v,y);break;case"line":(function(w,D,O,R){if(w.renderPass!=="translucent")return;let F=O.paint.get("line-opacity"),V=O.paint.get("line-width");if(F.constantOr(1)===0||V.constantOr(1)===0)return;let G=w.depthModeForSublayer(0,un.ReadOnly),Q=w.colorModeForRenderPass(),ie=O.paint.get("line-dasharray"),le=O.paint.get("line-pattern"),me=le.constantOr(1),ye=O.paint.get("line-gradient"),xe=O.getCrossfadeParameters(),Me=me?"linePattern":ie?"lineSDF":ye?"lineGradient":"line",de=w.context,ke=de.gl,Ve=!0;for(let Ke of R){let dt=D.getTile(Ke);if(me&&!dt.patternsLoaded())continue;let It=dt.getBucket(O);if(!It)continue;let Vt=It.programConfigurations.get(O.id),tr=w.context.program.get(),jt=w.useProgram(Me,Vt),Rt=Ve||jt.program!==tr,fr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Ke),kr=le.constantOr(null);if(kr&&dt.imageAtlas){let Lr=dt.imageAtlas,No=Lr.patternPositions[kr.to.toString()],Yr=Lr.patternPositions[kr.from.toString()];No&&Yr&&Vt.setConstantPatternPositions(No,Yr)}let Ft=fr?Ke:null,Xt=me?Cm(w,dt,O,xe,Ft):ie?cF(w,dt,O,ie,xe,Ft):ye?GD(w,dt,O,It.lineClipsArray.length,Ft):Q1(w,dt,O,Ft);if(me)de.activeTexture.set(ke.TEXTURE0),dt.imageAtlasTexture.bind(ke.LINEAR,ke.CLAMP_TO_EDGE),Vt.updatePaintBuffers(xe);else if(ie&&(Rt||w.lineAtlas.dirty))de.activeTexture.set(ke.TEXTURE0),w.lineAtlas.bind(de);else if(ye){let Lr=It.gradients[O.id],No=Lr.texture;if(O.gradientVersion!==Lr.version){let Yr=256;if(O.stepInterpolant){let yn=D.getSource().maxzoom,Oo=Ke.canonical.z===yn?Math.ceil(1<<w.transform.maxZoom-Ke.canonical.z):1;Yr=i.ac(i.aV(It.maxLineLength/i.X*1024*Oo),256,de.maxTextureSize)}Lr.gradient=i.aW({expression:O.gradientExpression(),evaluationKey:"lineProgress",resolution:Yr,image:Lr.gradient||void 0,clips:It.lineClipsArray}),Lr.texture?Lr.texture.update(Lr.gradient):Lr.texture=new ue(de,Lr.gradient,ke.RGBA),Lr.version=O.gradientVersion,No=Lr.texture}de.activeTexture.set(ke.TEXTURE0),No.bind(O.stepInterpolant?ke.NEAREST:ke.LINEAR,ke.CLAMP_TO_EDGE)}jt.draw(de,ke.TRIANGLES,G,w.stencilModeForClipping(Ke),Q,lo.disabled,Xt,fr,O.id,It.layoutVertexBuffer,It.indexBuffer,It.segments,O.paint,w.transform.zoom,Vt,It.layoutVertexBuffer2),Ve=!1}})(s,d,v,y);break;case"fill":(function(w,D,O,R){let F=O.paint.get("fill-color"),V=O.paint.get("fill-opacity");if(V.constantOr(1)===0)return;let G=w.colorModeForRenderPass(),Q=O.paint.get("fill-pattern"),ie=w.opaquePassEnabledForLayer()&&!Q.constantOr(1)&&F.constantOr(i.aM.transparent).a===1&&V.constantOr(0)===1?"opaque":"translucent";if(w.renderPass===ie){let le=w.depthModeForSublayer(1,w.renderPass==="opaque"?un.ReadWrite:un.ReadOnly);_y(w,D,O,R,le,G,!1)}if(w.renderPass==="translucent"&&O.paint.get("fill-antialias")){let le=w.depthModeForSublayer(O.getPaintProperty("fill-outline-color")?2:0,un.ReadOnly);_y(w,D,O,R,le,G,!0)}})(s,d,v,y);break;case"fill-extrusion":(function(w,D,O,R){let F=O.paint.get("fill-extrusion-opacity");if(F!==0&&w.renderPass==="translucent"){let V=new un(w.context.gl.LEQUAL,un.ReadWrite,w.depthRangeFor3D);if(F!==1||O.paint.get("fill-extrusion-pattern").constantOr(1))a_(w,D,O,R,V,yo.disabled,hi.disabled),a_(w,D,O,R,V,w.stencilModeFor3D(),w.colorModeForRenderPass());else{let G=w.colorModeForRenderPass();a_(w,D,O,R,V,yo.disabled,G)}}})(s,d,v,y);break;case"hillshade":(function(w,D,O,R){if(w.renderPass!=="offscreen"&&w.renderPass!=="translucent")return;let F=w.context,V=w.depthModeForSublayer(0,un.ReadOnly),G=w.colorModeForRenderPass(),[Q,ie]=w.renderPass==="translucent"?w.stencilConfigForOverlap(R):[{},R];for(let le of ie){let me=D.getTile(le);me.needsHillshadePrepare!==void 0&&me.needsHillshadePrepare&&w.renderPass==="offscreen"?Lm(w,me,O,V,yo.disabled,G):w.renderPass==="translucent"&&Om(w,le,me,O,V,Q[le.overscaledZ],G)}F.viewport.set([0,0,w.width,w.height])})(s,d,v,y);break;case"raster":(function(w,D,O,R){if(w.renderPass!=="translucent"||O.paint.get("raster-opacity")===0||!R.length)return;let F=w.context,V=F.gl,G=D.getSource(),Q=w.useProgram("raster"),ie=w.colorModeForRenderPass(),[le,me]=G instanceof mt?[{},R]:w.stencilConfigForOverlap(R),ye=me[me.length-1].overscaledZ,xe=!w.options.moving;for(let Me of me){let de=w.depthModeForSublayer(Me.overscaledZ-ye,O.paint.get("raster-opacity")===1?un.ReadWrite:un.ReadOnly,V.LESS),ke=D.getTile(Me);ke.registerFadeDuration(O.paint.get("raster-fade-duration"));let Ve=D.findLoadedParent(Me,0),Ke=D.findLoadedSibling(Me),dt=a4(ke,Ve||Ke||null,D,O,w.transform,w.style.map.terrain),It,Vt,tr=O.paint.get("raster-resampling")==="nearest"?V.NEAREST:V.LINEAR;F.activeTexture.set(V.TEXTURE0),ke.texture.bind(tr,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),F.activeTexture.set(V.TEXTURE1),Ve?(Ve.texture.bind(tr,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),It=Math.pow(2,Ve.tileID.overscaledZ-ke.tileID.overscaledZ),Vt=[ke.tileID.canonical.x*It%1,ke.tileID.canonical.y*It%1]):ke.texture.bind(tr,V.CLAMP_TO_EDGE,V.LINEAR_MIPMAP_NEAREST),ke.texture.useMipmap&&F.extTextureFilterAnisotropic&&w.transform.pitch>20&&V.texParameterf(V.TEXTURE_2D,F.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,F.extTextureFilterAnisotropicMax);let jt=w.style.map.terrain&&w.style.map.terrain.getTerrainData(Me),Rt=jt?Me:null,fr=Rt?Rt.posMatrix:w.transform.calculatePosMatrix(Me.toUnwrapped(),xe),kr=fF(fr,Vt||[0,0],It||1,dt,O);G instanceof mt?Q.draw(F,V.TRIANGLES,de,yo.disabled,ie,lo.disabled,kr,jt,O.id,G.boundsBuffer,w.quadTriangleIndexBuffer,G.boundsSegments):Q.draw(F,V.TRIANGLES,de,le[Me.overscaledZ],ie,lo.disabled,kr,jt,O.id,w.rasterBoundsBuffer,w.quadTriangleIndexBuffer,w.rasterBoundsSegments)}})(s,d,v,y);break;case"background":(function(w,D,O,R){let F=O.paint.get("background-color"),V=O.paint.get("background-opacity");if(V===0)return;let G=w.context,Q=G.gl,ie=w.transform,le=ie.tileSize,me=O.paint.get("background-pattern");if(w.isPatternMissing(me))return;let ye=!me&&F.a===1&&V===1&&w.opaquePassEnabledForLayer()?"opaque":"translucent";if(w.renderPass!==ye)return;let xe=yo.disabled,Me=w.depthModeForSublayer(0,ye==="opaque"?un.ReadWrite:un.ReadOnly),de=w.colorModeForRenderPass(),ke=w.useProgram(me?"backgroundPattern":"background"),Ve=R||ie.coveringTiles({tileSize:le,terrain:w.style.map.terrain});me&&(G.activeTexture.set(Q.TEXTURE0),w.imageManager.bind(w.context));let Ke=O.getCrossfadeParameters();for(let dt of Ve){let It=R?dt.posMatrix:w.transform.calculatePosMatrix(dt.toUnwrapped()),Vt=me?oS(It,V,w,me,{tileID:dt,tileSize:le},Ke):e_(It,V,F),tr=w.style.map.terrain&&w.style.map.terrain.getTerrainData(dt);ke.draw(G,Q.TRIANGLES,Me,xe,de,lo.disabled,Vt,tr,O.id,w.tileExtentBuffer,w.quadTriangleIndexBuffer,w.tileExtentSegments)}})(s,0,v,y);break;case"custom":(function(w,D,O){let R=w.context,F=O.implementation;if(w.renderPass==="offscreen"){let V=F.prerender;V&&(w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),V.call(F,R.gl,w.transform.customLayerMatrix()),R.setDirty(),w.setBaseState())}else if(w.renderPass==="translucent"){w.setCustomLayerDefaults(),R.setColorMode(w.colorModeForRenderPass()),R.setStencilMode(yo.disabled);let V=F.renderingMode==="3d"?new un(w.context.gl.LEQUAL,un.ReadWrite,w.depthRangeFor3D):w.depthModeForSublayer(0,un.ReadOnly);R.setDepthMode(V),F.render(R.gl,w.transform.customLayerMatrix(),{farZ:w.transform.farZ,nearZ:w.transform.nearZ,fov:w.transform._fov,modelViewProjectionMatrix:w.transform.modelViewProjectionMatrix,projectionMatrix:w.transform.projectionMatrix}),R.setDirty(),w.setBaseState(),R.bindFramebuffer.set(null)}})(s,0,v);}}translatePosMatrix(s,d,v,y,w){if(!v[0]&&!v[1])return s;let D=w?y==="map"?this.transform.angle:0:y==="viewport"?-this.transform.angle:0;if(D){let F=Math.sin(D),V=Math.cos(D);v=[v[0]*V-v[1]*F,v[0]*F+v[1]*V]}let O=[w?v[0]:vn(d,v[0],this.transform.zoom),w?v[1]:vn(d,v[1],this.transform.zoom),0],R=new Float32Array(16);return i.J(R,s,O),R}saveTileTexture(s){let d=this._tileTextures[s.size[0]];d?d.push(s):this._tileTextures[s.size[0]]=[s]}getTileTexture(s){let d=this._tileTextures[s];return d&&d.length>0?d.pop():null}isPatternMissing(s){if(!s)return!1;if(!s.from||!s.to)return!0;let d=this.imageManager.getPattern(s.from.toString()),v=this.imageManager.getPattern(s.to.toString());return!d||!v}useProgram(s,d){this.cache=this.cache||{};let v=s+(d?d.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[v]||(this.cache[v]=new rS(this.context,yp[s],d,iS[s],this._showOverdrawInspector,this.style.map.terrain)),this.cache[v]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let s=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(s.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ue(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:s,drawingBufferHeight:d}=this.context.gl;return this.width!==s||this.height!==d}}class km{constructor(s,d){this.points=s,this.planes=d}static fromInvProjectionMatrix(s,d,v){let y=Math.pow(2,v),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(O=>{let R=1/(O=i.af([],O,s))[3]/d*y;return i.b1(O,O,[R,R,1/O[3],R])}),D=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(O=>{let R=function(Q,ie){var le=ie[0],me=ie[1],ye=ie[2],xe=le*le+me*me+ye*ye;return xe>0&&(xe=1/Math.sqrt(xe)),Q[0]=ie[0]*xe,Q[1]=ie[1]*xe,Q[2]=ie[2]*xe,Q}([],function(Q,ie,le){var me=ie[0],ye=ie[1],xe=ie[2],Me=le[0],de=le[1],ke=le[2];return Q[0]=ye*ke-xe*de,Q[1]=xe*Me-me*ke,Q[2]=me*de-ye*Me,Q}([],X([],w[O[0]],w[O[1]]),X([],w[O[2]],w[O[1]]))),F=-((V=R)[0]*(G=w[O[1]])[0]+V[1]*G[1]+V[2]*G[2]);var V,G;return R.concat(F)});return new km(w,D)}}class Rm{constructor(s,d){this.min=s,this.max=d,this.center=function(v,y,w){return v[0]=.5*y[0],v[1]=.5*y[1],v[2]=.5*y[2],v}([],function(v,y,w){return v[0]=y[0]+w[0],v[1]=y[1]+w[1],v[2]=y[2]+w[2],v}([],this.min,this.max))}quadrant(s){let d=[s%2==0,s<2],v=U(this.min),y=U(this.max);for(let w=0;w<d.length;w++)v[w]=d[w]?this.min[w]:this.center[w],y[w]=d[w]?this.center[w]:this.max[w];return y[2]=this.max[2],new Rm(v,y)}distanceX(s){return Math.max(Math.min(this.max[0],s[0]),this.min[0])-s[0]}distanceY(s){return Math.max(Math.min(this.max[1],s[1]),this.min[1])-s[1]}intersects(s){let d=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],v=!0;for(let y=0;y<s.planes.length;y++){let w=s.planes[y],D=0;for(let O=0;O<d.length;O++)i.b2(w,d[O])>=0&&D++;if(D===0)return 0;D!==d.length&&(v=!1)}if(v)return 2;for(let y=0;y<3;y++){let w=Number.MAX_VALUE,D=-Number.MAX_VALUE;for(let O=0;O<s.points.length;O++){let R=s.points[O][y]-this.min[y];w=Math.min(w,R),D=Math.max(D,R)}if(D<0||w>this.max[y]-this.min[y])return 0}return 1}}class jm{constructor(s=0,d=0,v=0,y=0){if(isNaN(s)||s<0||isNaN(d)||d<0||isNaN(v)||v<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=s,this.bottom=d,this.left=v,this.right=y}interpolate(s,d,v){return d.top!=null&&s.top!=null&&(this.top=i.y.number(s.top,d.top,v)),d.bottom!=null&&s.bottom!=null&&(this.bottom=i.y.number(s.bottom,d.bottom,v)),d.left!=null&&s.left!=null&&(this.left=i.y.number(s.left,d.left,v)),d.right!=null&&s.right!=null&&(this.right=i.y.number(s.right,d.right,v)),this}getCenter(s,d){let v=i.ac((this.left+s-this.right)/2,0,s),y=i.ac((this.top+d-this.bottom)/2,0,d);return new i.P(v,y)}equals(s){return this.top===s.top&&this.bottom===s.bottom&&this.left===s.left&&this.right===s.right}clone(){return new jm(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let _S=85.051129;class qm{constructor(s,d,v,y,w){this.tileSize=512,this._renderWorldCopies=w===void 0||!!w,this._minZoom=s||0,this._maxZoom=d||22,this._minPitch=v==null?0:v,this._maxPitch=y==null?60:y,this.setMaxBounds(),this.width=0,this.height=0,this._center=new i.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new jm,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let s=new qm(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return s.apply(this),s}apply(s){this.tileSize=s.tileSize,this.latRange=s.latRange,this.lngRange=s.lngRange,this.width=s.width,this.height=s.height,this._center=s._center,this._elevation=s._elevation,this.minElevationForCurrentTile=s.minElevationForCurrentTile,this.zoom=s.zoom,this.angle=s.angle,this._fov=s._fov,this._pitch=s._pitch,this._unmodified=s._unmodified,this._edgeInsets=s._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(s){this._minZoom!==s&&(this._minZoom=s,this.zoom=Math.max(this.zoom,s))}get maxZoom(){return this._maxZoom}set maxZoom(s){this._maxZoom!==s&&(this._maxZoom=s,this.zoom=Math.min(this.zoom,s))}get minPitch(){return this._minPitch}set minPitch(s){this._minPitch!==s&&(this._minPitch=s,this.pitch=Math.max(this.pitch,s))}get maxPitch(){return this._maxPitch}set maxPitch(s){this._maxPitch!==s&&(this._maxPitch=s,this.pitch=Math.min(this.pitch,s))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(s){s===void 0?s=!0:s===null&&(s=!1),this._renderWorldCopies=s}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(s){let d=-i.b3(s,-180,180)*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=function(){var v=new i.A(4);return i.A!=Float32Array&&(v[1]=0,v[2]=0),v[0]=1,v[3]=1,v}(),function(v,y,w){var D=y[0],O=y[1],R=y[2],F=y[3],V=Math.sin(w),G=Math.cos(w);v[0]=D*G+R*V,v[1]=O*G+F*V,v[2]=D*-V+R*G,v[3]=O*-V+F*G}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(s){let d=i.ac(s,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(s){s=Math.max(.01,Math.min(60,s)),this._fov!==s&&(this._unmodified=!1,this._fov=s/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(s){let d=Math.min(Math.max(s,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._zoom=d,this.tileZoom=Math.max(0,Math.floor(d)),this.scale=this.zoomScale(d),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(s){s.lat===this._center.lat&&s.lng===this._center.lng||(this._unmodified=!1,this._center=s,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(s){s!==this._elevation&&(this._elevation=s,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(s){this._edgeInsets.equals(s)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,s,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(s){return this._edgeInsets.equals(s)}interpolatePadding(s,d,v){this._unmodified=!1,this._edgeInsets.interpolate(s,d,v),this._constrain(),this._calcMatrices()}coveringZoomLevel(s){let d=(s.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/s.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(s){let d=[new i.b4(0,s)];if(this._renderWorldCopies){let v=this.pointCoordinate(new i.P(0,0)),y=this.pointCoordinate(new i.P(this.width,0)),w=this.pointCoordinate(new i.P(this.width,this.height)),D=this.pointCoordinate(new i.P(0,this.height)),O=Math.floor(Math.min(v.x,y.x,w.x,D.x)),R=Math.floor(Math.max(v.x,y.x,w.x,D.x)),F=1;for(let V=O-F;V<=R+F;V++)V!==0&&d.push(new i.b4(V,s))}return d}coveringTiles(s){var d,v;let y=this.coveringZoomLevel(s),w=y;if(s.minzoom!==void 0&&y<s.minzoom)return[];s.maxzoom!==void 0&&y>s.maxzoom&&(y=s.maxzoom);let D=this.pointCoordinate(this.getCameraPoint()),O=i.Z.fromLngLat(this.center),R=Math.pow(2,y),F=[R*D.x,R*D.y,0],V=[R*O.x,R*O.y,0],G=km.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,y),Q=s.minzoom||0;!s.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(Q=y);let ie=s.terrain?2/Math.min(this.tileSize,s.tileSize)*this.tileSize:3,le=de=>({aabb:new Rm([de*R,0,0],[(de+1)*R,R,0]),zoom:0,x:0,y:0,wrap:de,fullyVisible:!1}),me=[],ye=[],xe=y,Me=s.reparseOverscaled?w:y;if(this._renderWorldCopies)for(let de=1;de<=3;de++)me.push(le(-de)),me.push(le(de));for(me.push(le(0));me.length>0;){let de=me.pop(),ke=de.x,Ve=de.y,Ke=de.fullyVisible;if(!Ke){let jt=de.aabb.intersects(G);if(jt===0)continue;Ke=jt===2}let dt=s.terrain?F:V,It=de.aabb.distanceX(dt),Vt=de.aabb.distanceY(dt),tr=Math.max(Math.abs(It),Math.abs(Vt));if(de.zoom===xe||tr>ie+(1<<xe-de.zoom)-2&&de.zoom>=Q){let jt=xe-de.zoom,Rt=F[0]-.5-(ke<<jt),fr=F[1]-.5-(Ve<<jt);ye.push({tileID:new i.S(de.zoom===xe?Me:de.zoom,de.wrap,de.zoom,ke,Ve),distanceSq:ee([V[0]-.5-ke,V[1]-.5-Ve]),tileDistanceToCamera:Math.sqrt(Rt*Rt+fr*fr)})}else for(let jt=0;jt<4;jt++){let Rt=(ke<<1)+jt%2,fr=(Ve<<1)+(jt>>1),kr=de.zoom+1,Ft=de.aabb.quadrant(jt);if(s.terrain){let Xt=new i.S(kr,de.wrap,kr,Rt,fr),Lr=s.terrain.getMinMaxElevation(Xt),No=(d=Lr.minElevation)!==null&&d!==void 0?d:this.elevation,Yr=(v=Lr.maxElevation)!==null&&v!==void 0?v:this.elevation;Ft=new Rm([Ft.min[0],Ft.min[1],No],[Ft.max[0],Ft.max[1],Yr])}me.push({aabb:Ft,zoom:kr,x:Rt,y:fr,wrap:de.wrap,fullyVisible:Ke})}}return ye.sort((de,ke)=>de.distanceSq-ke.distanceSq).map(de=>de.tileID)}resize(s,d){this.width=s,this.height=d,this.pixelsToGLUnits=[2/s,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(s){return Math.pow(2,s)}scaleZoom(s){return Math.log(s)/Math.LN2}project(s){let d=i.ac(s.lat,-85.051129,_S);return new i.P(i.O(s.lng)*this.worldSize,i.Q(d)*this.worldSize)}unproject(s){return new i.Z(s.x/this.worldSize,s.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(s){let d=this.elevation,v=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,y=this.pointLocation(this.centerPoint,s),w=s.getElevationForLngLatZoom(y,this.tileZoom);if(!(this.elevation-w))return;let D=v+d-w,O=Math.cos(this._pitch)*this.cameraToCenterDistance/D/i.b5(1,y.lat),R=this.scaleZoom(O/this.tileSize);this._elevation=w,this._center=y,this.zoom=R}setLocationAtPoint(s,d){let v=this.pointCoordinate(d),y=this.pointCoordinate(this.centerPoint),w=this.locationCoordinate(s),D=new i.Z(w.x-(v.x-y.x),w.y-(v.y-y.y));this.center=this.coordinateLocation(D),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(s,d){return d?this.coordinatePoint(this.locationCoordinate(s),d.getElevationForLngLatZoom(s,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(s))}pointLocation(s,d){return this.coordinateLocation(this.pointCoordinate(s,d))}locationCoordinate(s){return i.Z.fromLngLat(s)}coordinateLocation(s){return s&&s.toLngLat()}pointCoordinate(s,d){if(d){let Q=d.pointCoordinate(s);if(Q!=null)return Q}let v=[s.x,s.y,0,1],y=[s.x,s.y,1,1];i.af(v,v,this.pixelMatrixInverse),i.af(y,y,this.pixelMatrixInverse);let w=v[3],D=y[3],O=v[1]/w,R=y[1]/D,F=v[2]/w,V=y[2]/D,G=F===V?0:(0-F)/(V-F);return new i.Z(i.y.number(v[0]/w,y[0]/D,G)/this.worldSize,i.y.number(O,R,G)/this.worldSize)}coordinatePoint(s,d=0,v=this.pixelMatrix){let y=[s.x*this.worldSize,s.y*this.worldSize,d,1];return i.af(y,y,v),new i.P(y[0]/y[3],y[1]/y[3])}getBounds(){let s=Math.max(0,this.height/2-this.getHorizon());return new Ae().extend(this.pointLocation(new i.P(0,s))).extend(this.pointLocation(new i.P(this.width,s))).extend(this.pointLocation(new i.P(this.width,this.height))).extend(this.pointLocation(new i.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Ae([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(s){s?(this.lngRange=[s.getWest(),s.getEast()],this.latRange=[s.getSouth(),s.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,_S])}calculateTileMatrix(s){let d=s.canonical,v=this.worldSize/this.zoomScale(d.z),y=d.x+Math.pow(2,d.z)*s.wrap,w=i.an(new Float64Array(16));return i.J(w,w,[y*v,d.y*v,0]),i.K(w,w,[v/i.X,v/i.X,1]),w}calculatePosMatrix(s,d=!1){let v=s.key,y=d?this._alignedPosMatrixCache:this._posMatrixCache;if(y[v])return y[v];let w=this.calculateTileMatrix(s);return i.L(w,d?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,w),y[v]=new Float32Array(w),y[v]}calculateFogMatrix(s){let d=s.key,v=this._fogMatrixCache;if(v[d])return v[d];let y=this.calculateTileMatrix(s);return i.L(y,this.fogMatrix,y),v[d]=new Float32Array(y),v[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(s,d){d=i.ac(+d,this.minZoom,this.maxZoom);let v={center:new i.N(s.lng,s.lat),zoom:d},y=this.lngRange;if(!this._renderWorldCopies&&y===null){let de=179.9999999999;y=[-de,de]}let w=this.tileSize*this.zoomScale(v.zoom),D=0,O=w,R=0,F=w,V=0,G=0,{x:Q,y:ie}=this.size;if(this.latRange){let de=this.latRange;D=i.Q(de[1])*w,O=i.Q(de[0])*w,O-D<ie&&(V=ie/(O-D))}y&&(R=i.b3(i.O(y[0])*w,0,w),F=i.b3(i.O(y[1])*w,0,w),F<R&&(F+=w),F-R<Q&&(G=Q/(F-R)));let{x:le,y:me}=this.project.call({worldSize:w},s),ye,xe,Me=Math.max(G||0,V||0);if(Me){let de=new i.P(G?(F+R)/2:le,V?(O+D)/2:me);return v.center=this.unproject.call({worldSize:w},de).wrap(),v.zoom+=this.scaleZoom(Me),v}if(this.latRange){let de=ie/2;me-de<D&&(xe=D+de),me+de>O&&(xe=O-de)}if(y){let de=(R+F)/2,ke=le;this._renderWorldCopies&&(ke=i.b3(le,de-w/2,de+w/2));let Ve=Q/2;ke-Ve<R&&(ye=R+Ve),ke+Ve>F&&(ye=F-Ve)}if(ye!==void 0||xe!==void 0){let de=new i.P(ye!=null?ye:le,xe!=null?xe:me);v.center=this.unproject.call({worldSize:w},de).wrap()}return v}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let s=this._unmodified,{center:d,zoom:v}=this.getConstrained(this.center,this.zoom);this.center=d,this.zoom=v,this._unmodified=s,this._constraining=!1}_calcMatrices(){if(!this.height)return;let s=this.centerOffset,d=this.point.x,v=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=i.b5(1,this.center.lat)*this.worldSize;let y=i.an(new Float64Array(16));i.K(y,y,[this.width/2,-this.height/2,1]),i.J(y,y,[1,-1,0]),this.labelPlaneMatrix=y,y=i.an(new Float64Array(16)),i.K(y,y,[1,-1,1]),i.J(y,y,[-1,-1,0]),i.K(y,y,[2/this.width,2/this.height,1]),this.glCoordMatrix=y;let w=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),D=Math.min(this.elevation,this.minElevationForCurrentTile),O=w-D*this._pixelPerMeter/Math.cos(this._pitch),R=D<0?O:w,F=Math.PI/2+this._pitch,V=this._fov*(.5+s.y/this.height),G=Math.sin(V)*R/Math.sin(i.ac(Math.PI-F-V,.01,Math.PI-.01)),Q=this.getHorizon(),ie=2*Math.atan(Q/this.cameraToCenterDistance)*(.5+s.y/(2*Q)),le=Math.sin(ie)*R/Math.sin(i.ac(Math.PI-F-ie,.01,Math.PI-.01)),me=Math.min(G,le);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*me+R),this.nearZ=this.height/50,y=new Float64Array(16),i.b6(y,this._fov,this.width/this.height,this.nearZ,this.farZ),y[8]=2*-s.x/this.width,y[9]=2*s.y/this.height,this.projectionMatrix=i.ae(y),i.K(y,y,[1,-1,1]),i.J(y,y,[0,0,-this.cameraToCenterDistance]),i.b7(y,y,this._pitch),i.ad(y,y,this.angle),i.J(y,y,[-d,-v,0]),this.mercatorMatrix=i.K([],y,[this.worldSize,this.worldSize,this.worldSize]),i.K(y,y,[1,1,this._pixelPerMeter]),this.pixelMatrix=i.L(new Float64Array(16),this.labelPlaneMatrix,y),i.J(y,y,[0,0,-this.elevation]),this.modelViewProjectionMatrix=y,this.invModelViewProjectionMatrix=i.as([],y),this.fogMatrix=new Float64Array(16),i.b6(this.fogMatrix,this._fov,this.width/this.height,w,this.farZ),this.fogMatrix[8]=2*-s.x/this.width,this.fogMatrix[9]=2*s.y/this.height,i.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),i.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),i.b7(this.fogMatrix,this.fogMatrix,this._pitch),i.ad(this.fogMatrix,this.fogMatrix,this.angle),i.J(this.fogMatrix,this.fogMatrix,[-d,-v,0]),i.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),i.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=i.L(new Float64Array(16),this.labelPlaneMatrix,y);let ye=this.width%2/2,xe=this.height%2/2,Me=Math.cos(this.angle),de=Math.sin(this.angle),ke=d-Math.round(d)+Me*ye+de*xe,Ve=v-Math.round(v)+Me*xe+de*ye,Ke=new Float64Array(y);if(i.J(Ke,Ke,[ke>.5?ke-1:ke,Ve>.5?Ve-1:Ve,0]),this.alignedModelViewProjectionMatrix=Ke,y=i.as(new Float64Array(16),this.pixelMatrix),!y)throw new Error("failed to invert matrix");this.pixelMatrixInverse=y,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let s=this.pointCoordinate(new i.P(0,0)),d=[s.x*this.worldSize,s.y*this.worldSize,0,1];return i.af(d,d,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let s=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,s))}getCameraQueryGeometry(s){let d=this.getCameraPoint();if(s.length===1)return[s[0],d];{let v=d.x,y=d.y,w=d.x,D=d.y;for(let O of s)v=Math.min(v,O.x),y=Math.min(y,O.y),w=Math.max(w,O.x),D=Math.max(D,O.y);return[new i.P(v,y),new i.P(w,y),new i.P(w,D),new i.P(v,D),new i.P(v,y)]}}lngLatToCameraDepth(s,d){let v=this.locationCoordinate(s),y=[v.x*this.worldSize,v.y*this.worldSize,d,1];return i.af(y,y,this.modelViewProjectionMatrix),y[2]/y[3]}}function xy(E,s){let d,v=!1,y=null,w=null,D=()=>{y=null,v&&(E.apply(w,d),y=setTimeout(D,s),v=!1)};return(...O)=>(v=!0,w=this,d=O,y||D(),y)}class f_{constructor(s){this._getCurrentHash=()=>{let d=window.location.hash.replace("#","");if(this._hashName){let v;return d.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(v=y)}),(v&&v[1]||"").split("/")}return d.split("/")},this._onHashChange=()=>{let d=this._getCurrentHash();if(d.length>=3&&!d.some(v=>isNaN(v))){let v=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(d[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:v,pitch:+(d[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let d=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,d)},this._removeHash=()=>{let d=this._getCurrentHash();if(d.length===0)return;let v=d.join("/"),y=v;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${v}`);let w=window.location.hash.replace(y,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let D=window.location.href.replace(/(#.+)?$/,w);D=D.replace("&&","&"),window.history.replaceState(window.history.state,null,D)},this._updateHash=xy(this._updateHashUnthrottled,300),this._hashName=s&&encodeURIComponent(s)}addTo(s){return this._map=s,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(s){let d=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,y=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,y),D=Math.round(d.lng*w)/w,O=Math.round(d.lat*w)/w,R=this._map.getBearing(),F=this._map.getPitch(),V="";if(V+=s?`/${D}/${O}/${v}`:`${v}/${O}/${D}`,(R||F)&&(V+="/"+Math.round(10*R)/10),F&&(V+=`/${Math.round(F)}`),this._hashName){let G=this._hashName,Q=!1,ie=window.location.hash.slice(1).split("&").map(le=>{let me=le.split("=")[0];return me===G?(Q=!0,`${me}=${V}`):le}).filter(le=>le);return Q||ie.push(`${G}=${V}`),`#${ie.join("&")}`}return`#${V}`}}let p_={linearity:.3,easing:i.b8(0,0,.3,1)},xS=i.e({deceleration:2500,maxSpeed:1400},p_),SF=i.e({deceleration:20,maxSpeed:1400},p_),f4=i.e({deceleration:1e3,maxSpeed:360},p_),d_=i.e({deceleration:1e3,maxSpeed:90},p_);class bS{constructor(s){this._map=s,this.clear()}clear(){this._inertiaBuffer=[]}record(s){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:h.now(),settings:s})}_drainInertiaBuffer(){let s=this._inertiaBuffer,d=h.now();for(;s.length>0&&d-s[0].time>160;)s.shift()}_onMoveEnd(s){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let d={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:w}of this._inertiaBuffer)d.zoom+=w.zoomDelta||0,d.bearing+=w.bearingDelta||0,d.pitch+=w.pitchDelta||0,w.panDelta&&d.pan._add(w.panDelta),w.around&&(d.around=w.around),w.pinchAround&&(d.pinchAround=w.pinchAround);let v=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(d.pan.mag()){let w=wy(d.pan.mag(),v,i.e({},xS,s||{}));y.offset=d.pan.mult(w.amount/d.pan.mag()),y.center=this._map.transform.center,by(y,w)}if(d.zoom){let w=wy(d.zoom,v,SF);y.zoom=this._map.transform.zoom+w.amount,by(y,w)}if(d.bearing){let w=wy(d.bearing,v,f4);y.bearing=this._map.transform.bearing+i.ac(w.amount,-179,179),by(y,w)}if(d.pitch){let w=wy(d.pitch,v,d_);y.pitch=this._map.transform.pitch+w.amount,by(y,w)}if(y.zoom||y.bearing){let w=d.pinchAround===void 0?d.around:d.pinchAround;y.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),i.e(y,{noMoveStart:!0})}}function by(E,s){(!E.duration||E.duration<s.duration)&&(E.duration=s.duration,E.easing=s.easing)}function wy(E,s,d){let{maxSpeed:v,linearity:y,deceleration:w}=d,D=i.ac(E*y/(s/1e3),-v,v),O=Math.abs(D)/(w*y);return{easing:d.easing,duration:1e3*O,amount:D*(O/2)}}class Ma extends i.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v,y={}){let w=g.mousePos(d.getCanvas(),v),D=d.unproject(w);super(s,i.e({point:w,lngLat:D,originalEvent:v},y)),this._defaultPrevented=!1,this.target=d}}class Xd extends i.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){let y=s==="touchend"?v.changedTouches:v.touches,w=g.touchPos(d.getCanvasContainer(),y),D=w.map(R=>d.unproject(R)),O=w.reduce((R,F,V,G)=>R.add(F.div(G.length)),new i.P(0,0));super(s,{points:w,point:O,lngLats:D,lngLat:d.unproject(O),originalEvent:v}),this._defaultPrevented=!1}}class p4 extends i.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(s,d,v){super(s,{originalEvent:v}),this._defaultPrevented=!1}}class d4{constructor(s,d){this._map=s,this._clickTolerance=d.clickTolerance}reset(){delete this._mousedownPos}wheel(s){return this._firePreventable(new p4(s.type,this._map,s))}mousedown(s,d){return this._mousedownPos=d,this._firePreventable(new Ma(s.type,this._map,s))}mouseup(s){this._map.fire(new Ma(s.type,this._map,s))}click(s,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||this._map.fire(new Ma(s.type,this._map,s))}dblclick(s){return this._firePreventable(new Ma(s.type,this._map,s))}mouseover(s){this._map.fire(new Ma(s.type,this._map,s))}mouseout(s){this._map.fire(new Ma(s.type,this._map,s))}touchstart(s){return this._firePreventable(new Xd(s.type,this._map,s))}touchmove(s){this._map.fire(new Xd(s.type,this._map,s))}touchend(s){this._map.fire(new Xd(s.type,this._map,s))}touchcancel(s){this._map.fire(new Xd(s.type,this._map,s))}_firePreventable(s){if(this._map.fire(s),s.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mi{constructor(s){this._map=s}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(s){this._map.fire(new Ma(s.type,this._map,s))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ma("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(s){this._delayContextMenu?this._contextMenuEvent=s:this._ignoreContextMenu||this._map.fire(new Ma(s.type,this._map,s)),this._map.listens("contextmenu")&&s.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Pu{constructor(s){this._map=s}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(s){return this.transform.pointLocation(i.P.convert(s),this._map.terrain)}}class ml{constructor(s,d){this._map=s,this._tr=new Pu(s),this._el=s.getCanvasContainer(),this._container=s.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(s,d){this.isEnabled()&&s.shiftKey&&s.button===0&&(g.disableDrag(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(s,d){if(!this._active)return;let v=d;if(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)return;let y=this._startPos;this._lastPos=v,this._box||(this._box=g.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",s));let w=Math.min(y.x,v.x),D=Math.max(y.x,v.x),O=Math.min(y.y,v.y),R=Math.max(y.y,v.y);g.setTransform(this._box,`translate(${w}px,${O}px)`),this._box.style.width=D-w+"px",this._box.style.height=R-O+"px"}mouseupWindow(s,d){if(!this._active||s.button!==0)return;let v=this._startPos,y=d;if(this.reset(),g.suppressClick(),v.x!==y.x||v.y!==y.y)return this._map.fire(new i.k("boxzoomend",{originalEvent:s})),{cameraAnimation:w=>w.fitScreenCoordinates(v,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",s)}keydown(s){this._active&&s.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",s))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(s,d){return this._map.fire(new i.k(s,{originalEvent:d}))}}function Ey(E,s){if(E.length!==s.length)throw new Error(`The number of touches and points are not equal - touches ${E.length}, points ${s.length}`);let d={};for(let v=0;v<E.length;v++)d[E[v].identifier]=s[v];return d}class wS{constructor(s){this.reset(),this.numTouches=s.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(s,d,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=s.timeStamp),v.length===this.numTouches&&(this.centroid=function(y){let w=new i.P(0,0);for(let D of y)w._add(D);return w.div(y.length)}(d),this.touches=Ey(v,d)))}touchmove(s,d,v){if(this.aborted||!this.centroid)return;let y=Ey(v,d);for(let w in this.touches){let D=y[w];(!D||D.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(s,d,v){if((!this.centroid||s.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){let y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class h_{constructor(s){this.singleTap=new wS(s),this.numTaps=s.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(s,d,v){this.singleTap.touchstart(s,d,v)}touchmove(s,d,v){this.singleTap.touchmove(s,d,v)}touchend(s,d,v){let y=this.singleTap.touchend(s,d,v);if(y){let w=s.timeStamp-this.lastTime<500,D=!this.lastTap||this.lastTap.dist(y)<30;if(w&&D||this.reset(),this.count++,this.lastTime=s.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class zm{constructor(s){this._tr=new Pu(s),this._zoomIn=new h_({numTouches:1,numTaps:2}),this._zoomOut=new h_({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(s,d,v){this._zoomIn.touchstart(s,d,v),this._zoomOut.touchstart(s,d,v)}touchmove(s,d,v){this._zoomIn.touchmove(s,d,v),this._zoomOut.touchmove(s,d,v)}touchend(s,d,v){let y=this._zoomIn.touchend(s,d,v),w=this._zoomOut.touchend(s,d,v),D=this._tr;return y?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:D.zoom+1,around:D.unproject(y)},{originalEvent:s})}):w?(this._active=!0,s.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:O=>O.easeTo({duration:300,zoom:D.zoom-1,around:D.unproject(w)},{originalEvent:s})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wf{constructor(s){this._enabled=!!s.enable,this._moveStateManager=s.moveStateManager,this._clickTolerance=s.clickTolerance||1,this._moveFunction=s.move,this._activateOnStart=!!s.activateOnStart,s.assignEvents(this),this.reset()}reset(s){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(s)}_move(...s){let d=this._moveFunction(...s);if(d.bearingDelta||d.pitchDelta||d.around||d.panDelta)return this._active=!0,d}dragStart(s,d){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(s)&&(this._moveStateManager.startMove(s),this._lastPoint=d.length?d[0]:d,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(s,d){if(!this.isEnabled())return;let v=this._lastPoint;if(!v)return;if(s.preventDefault(),!this._moveStateManager.isValidMoveEvent(s))return void this.reset(s);let y=d.length?d[0]:d;return!this._moved&&y.dist(v)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(v,y))}dragEnd(s){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(s)&&(this._moved&&g.suppressClick(),this.reset(s))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let ES={0:1,2:2};class m_{constructor(s){this._correctEvent=s.checkCorrectEvent}startMove(s){let d=g.mouseButton(s);this._eventButton=d}endMove(s){delete this._eventButton}isValidStartEvent(s){return this._correctEvent(s)}isValidMoveEvent(s){return!function(d,v){let y=ES[v];return d.buttons===void 0||(d.buttons&y)!==y}(s,this._eventButton)}isValidEndEvent(s){return g.mouseButton(s)===this._eventButton}}class SS{constructor(){this._firstTouch=void 0}_isOneFingerTouch(s){return s.targetTouches.length===1}_isSameTouchEvent(s){return s.targetTouches[0].identifier===this._firstTouch}startMove(s){this._firstTouch=s.targetTouches[0].identifier}endMove(s){delete this._firstTouch}isValidStartEvent(s){return this._isOneFingerTouch(s)}isValidMoveEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}isValidEndEvent(s){return this._isOneFingerTouch(s)&&this._isSameTouchEvent(s)}}let g_=E=>{E.mousedown=E.dragStart,E.mousemoveWindow=E.dragMove,E.mouseup=E.dragEnd,E.contextmenu=s=>{s.preventDefault()}},IS=({enable:E,clickTolerance:s,bearingDegreesPerPixelMoved:d=.8})=>{let v=new m_({checkCorrectEvent:y=>g.mouseButton(y)===0&&y.ctrlKey||g.mouseButton(y)===2});return new wf({clickTolerance:s,move:(y,w)=>({bearingDelta:(w.x-y.x)*d}),moveStateManager:v,enable:E,assignEvents:g_})},TS=({enable:E,clickTolerance:s,pitchDegreesPerPixelMoved:d=-.5})=>{let v=new m_({checkCorrectEvent:y=>g.mouseButton(y)===0&&y.ctrlKey||g.mouseButton(y)===2});return new wf({clickTolerance:s,move:(y,w)=>({pitchDelta:(w.y-y.y)*d}),moveStateManager:v,enable:E,assignEvents:g_})};class Jd{constructor(s,d){this._clickTolerance=s.clickTolerance||1,this._map=d,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}_shouldBePrevented(s){return s<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(s,d,v){return this._calculateTransform(s,d,v)}touchmove(s,d,v){if(this._active){if(!this._shouldBePrevented(v.length))return s.preventDefault(),this._calculateTransform(s,d,v);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",s)}}touchend(s,d,v){this._calculateTransform(s,d,v),this._active&&this._shouldBePrevented(v.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(s,d,v){v.length>0&&(this._active=!0);let y=Ey(v,d),w=new i.P(0,0),D=new i.P(0,0),O=0;for(let F in y){let V=y[F],G=this._touches[F];G&&(w._add(V),D._add(V.sub(G)),O++,y[F]=V)}if(this._touches=y,this._shouldBePrevented(O)||!D.mag())return;let R=D.div(O);return this._sum._add(R),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(O),panDelta:R}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class v_{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(s,d,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([d[0],d[1]]))}touchmove(s,d,v){if(!this._firstTwoTouches)return;s.preventDefault();let[y,w]=this._firstTwoTouches,D=Sy(v,d,y),O=Sy(v,d,w);if(!D||!O)return;let R=this._aroundCenter?null:D.add(O).div(2);return this._move([D,O],R,s)}touchend(s,d,v){if(!this._firstTwoTouches)return;let[y,w]=this._firstTwoTouches,D=Sy(v,d,y),O=Sy(v,d,w);D&&O||(this._active&&g.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(s){this._enabled=!0,this._aroundCenter=!!s&&s.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Sy(E,s,d){for(let v=0;v<E.length;v++)if(E[v].identifier===d)return s[v]}function MS(E,s){return Math.log(E/s)/Math.LN2}class CS extends v_{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(s){this._startDistance=this._distance=s[0].dist(s[1])}_move(s,d){let v=this._distance;if(this._distance=s[0].dist(s[1]),this._active||!(Math.abs(MS(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:MS(this._distance,v),pinchAround:d}}}function AS(E,s){return 180*E.angleWith(s)/Math.PI}class DS extends v_{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(s){this._startVector=this._vector=s[0].sub(s[1]),this._minDiameter=s[0].dist(s[1])}_move(s,d,v){let y=this._vector;if(this._vector=s[0].sub(s[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:AS(this._vector,y),pinchAround:d}}_isBelowThreshold(s){this._minDiameter=Math.min(this._minDiameter,s.mag());let d=25/(Math.PI*this._minDiameter)*360,v=AS(s,this._startVector);return Math.abs(v)<d}}function y_(E){return Math.abs(E.y)>Math.abs(E.x)}class Fm extends v_{constructor(s){super(),this._currentTouchCount=0,this._map=s}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(s,d,v){super.touchstart(s,d,v),this._currentTouchCount=v.length}_start(s){this._lastPoints=s,y_(s[0].sub(s[1]))&&(this._valid=!1)}_move(s,d,v){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let y=s[0].sub(this._lastPoints[0]),w=s[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,w,v.timeStamp),this._valid?(this._lastPoints=s,this._active=!0,{pitchDelta:(y.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(s,d,v){if(this._valid!==void 0)return this._valid;let y=s.mag()>=2,w=d.mag()>=2;if(!y&&!w)return;if(!y||!w)return this._firstMove===void 0&&(this._firstMove=v),v-this._firstMove<100&&void 0;let D=s.y>0==d.y>0;return y_(s)&&y_(d)&&D}}let h4={panStep:100,bearingStep:15,pitchStep:10};class Vl{constructor(s){this._tr=new Pu(s);let d=h4;this._panStep=d.panStep,this._bearingStep=d.bearingStep,this._pitchStep=d.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(s){if(s.altKey||s.ctrlKey||s.metaKey)return;let d=0,v=0,y=0,w=0,D=0;switch(s.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:s.shiftKey?v=-1:(s.preventDefault(),w=-1);break;case 39:s.shiftKey?v=1:(s.preventDefault(),w=1);break;case 38:s.shiftKey?y=1:(s.preventDefault(),D=-1);break;case 40:s.shiftKey?y=-1:(s.preventDefault(),D=1);break;default:return;}return this._rotationDisabled&&(v=0,y=0),{cameraAnimation:O=>{let R=this._tr;O.easeTo({duration:300,easeId:"keyboardHandler",easing:cc,zoom:d?Math.round(R.zoom)+d*(s.shiftKey?2:1):R.zoom,bearing:R.bearing+v*this._bearingStep,pitch:R.pitch+y*this._pitchStep,offset:[-w*this._panStep,-D*this._panStep],center:R.center},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function cc(E){return E*(2-E)}let NS=4.000244140625;class ku{constructor(s,d){this._onTimeout=v=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(v)},this._map=s,this._tr=new Pu(s),this._triggerRenderFrame=d,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(s){this._defaultZoomRate=s}setWheelZoomRate(s){this._wheelZoomRate=s}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(s){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!s&&s.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(s){return!!this._map.cooperativeGestures.isEnabled()&&!(s.ctrlKey||this._map.cooperativeGestures.isBypassed(s))}wheel(s){if(!this.isEnabled())return;if(this._shouldBePrevented(s))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",s);let d=s.deltaMode===WheelEvent.DOM_DELTA_LINE?40*s.deltaY:s.deltaY,v=h.now(),y=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,d!==0&&d%NS==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=d,this._timeout=setTimeout(this._onTimeout,40,s)):this._type||(this._type=Math.abs(y*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),s.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=s,this._delta-=d,this._active||this._start(s)),s.preventDefault()}_start(s){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let d=g.mousePos(this._map.getCanvas(),s),v=this._tr;this._around=d.y>v.transform.height/2-v.transform.getHorizon()?i.N.convert(this._aroundCenter?v.center:v.unproject(d)):i.N.convert(v.center),this._aroundPoint=v.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let s=this._tr.transform;if(this._delta!==0){let R=this._type==="wheel"&&Math.abs(this._delta)>NS?this._wheelZoomRate:this._defaultZoomRate,F=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&F!==0&&(F=1/F);let V=typeof this._targetZoom=="number"?s.zoomScale(this._targetZoom):s.scale;this._targetZoom=Math.min(s.maxZoom,Math.max(s.minZoom,s.scaleZoom(V*F))),this._type==="wheel"&&(this._startZoom=s.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let d=typeof this._targetZoom=="number"?this._targetZoom:s.zoom,v=this._startZoom,y=this._easing,w,D=!1,O=h.now()-this._lastWheelEventTime;if(this._type==="wheel"&&v&&y&&O){let R=Math.min(O/200,1),F=y(R);w=i.y.number(v,d,F),R<1?this._frameId||(this._frameId=!0):D=!0}else w=d,D=!0;return this._active=!0,D&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!D,zoomDelta:w-s.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(s){let d=i.b9;if(this._prevEase){let v=this._prevEase,y=(h.now()-v.start)/v.duration,w=v.easing(y+.01)-v.easing(y),D=.27/Math.sqrt(w*w+1e-4)*.01,O=Math.sqrt(.0729-D*D);d=i.b8(D,O,.25,1)}return this._prevEase={start:h.now(),duration:s,easing:d},d}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Qd{constructor(s,d){this._clickZoom=s,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class IF{constructor(s){this._tr=new Pu(s),this.reset()}reset(){this._active=!1}dblclick(s,d){return s.preventDefault(),{cameraAnimation:v=>{v.easeTo({duration:300,zoom:this._tr.zoom+(s.shiftKey?-1:1),around:this._tr.unproject(d)},{originalEvent:s})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class TF{constructor(){this._tap=new h_({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(s,d,v){if(!this._swipePoint)if(this._tapTime){let y=d[0],w=s.timeStamp-this._tapTime<500,D=this._tapPoint.dist(y)<30;w&&D?v.length>0&&(this._swipePoint=y,this._swipeTouch=v[0].identifier):this.reset()}else this._tap.touchstart(s,d,v)}touchmove(s,d,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;let y=d[0],w=y.y-this._swipePoint.y;return this._swipePoint=y,s.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(s,d,v)}touchend(s,d,v){if(this._tapTime)this._swipePoint&&v.length===0&&this.reset();else{let y=this._tap.touchend(s,d,v);y&&(this._tapTime=s.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class m4{constructor(s,d,v){this._el=s,this._mousePan=d,this._touchPan=v}enable(s){this._inertiaOptions=s||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class g4{constructor(s,d,v){this._pitchWithRotate=s.pitchWithRotate,this._mouseRotate=d,this._mousePitch=v}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class OS{constructor(s,d,v,y){this._el=s,this._touchZoom=d,this._touchRotate=v,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(s){this._touchZoom.enable(s),this._rotationDisabled||this._touchRotate.enable(s),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Um{constructor(s,d){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=s,this._options=d,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let s=this._map.getCanvasContainer();s.classList.add("maplibregl-cooperative-gestures"),this._container=g.create("div","maplibregl-cooperative-gesture-screen",s);let d=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(d=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let v=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=d,this._container.appendChild(y);let w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=v,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(g.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(s){return s[this._bypassKey]}notifyGestureBlocked(s,d){this._enabled&&(this._map.fire(new i.k("cooperativegestureprevented",{gestureType:s,originalEvent:d})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Gl=E=>E.zoom||E.drag||E.pitch||E.rotate;class or extends i.k{}function __(E){return E.panDelta&&E.panDelta.mag()||E.zoomDelta||E.bearingDelta||E.pitchDelta}class LS{constructor(s,d){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,w)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let D=y.type==="renderFrame"?void 0:y,O={needsRenderFrame:!1},R={},F={},V=y.touches,G=V?this._getMapTouches(V):void 0,Q=G?g.touchPos(this._map.getCanvas(),G):g.mousePos(this._map.getCanvas(),y);for(let{handlerName:me,handler:ye,allowed:xe}of this._handlers){if(!ye.isEnabled())continue;let Me;this._blockedByActive(F,xe,me)?ye.reset():ye[w||y.type]&&(Me=ye[w||y.type](y,Q,G),this.mergeHandlerResult(O,R,Me,me,D),Me&&Me.needsRenderFrame&&this._triggerRenderFrame()),(Me||ye.isActive())&&(F[me]=ye)}let ie={};for(let me in this._previousActiveHandlers)F[me]||(ie[me]=D);this._previousActiveHandlers=F,(Object.keys(ie).length||__(O))&&(this._changes.push([O,R,ie]),this._triggerRenderFrame()),(Object.keys(F).length||__(O))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:le}=O;le&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],le(this._map))},this._map=s,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new bS(s),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(d);let v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[window,"blur",void 0]];for(let[y,w,D]of this._listeners)g.addEventListener(y,w,y===document?this.handleWindowEvent:this.handleEvent,D)}destroy(){for(let[s,d,v]of this._listeners)g.removeEventListener(s,d,s===document?this.handleWindowEvent:this.handleEvent,v)}_addDefaultHandlers(s){let d=this._map,v=d.getCanvasContainer();this._add("mapEvent",new d4(d,s));let y=d.boxZoom=new ml(d,s);this._add("boxZoom",y),s.interactive&&s.boxZoom&&y.enable();let w=d.cooperativeGestures=new Um(d,s.cooperativeGestures);this._add("cooperativeGestures",w),s.cooperativeGestures&&w.enable();let D=new zm(d),O=new IF(d);d.doubleClickZoom=new Qd(O,D),this._add("tapZoom",D),this._add("clickZoom",O),s.interactive&&s.doubleClickZoom&&d.doubleClickZoom.enable();let R=new TF;this._add("tapDragZoom",R);let F=d.touchPitch=new Fm(d);this._add("touchPitch",F),s.interactive&&s.touchPitch&&d.touchPitch.enable(s.touchPitch);let V=IS(s),G=TS(s);d.dragRotate=new g4(s,V,G),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",G,["mouseRotate"]),s.interactive&&s.dragRotate&&d.dragRotate.enable();let Q=(({enable:Me,clickTolerance:de})=>{let ke=new m_({checkCorrectEvent:Ve=>g.mouseButton(Ve)===0&&!Ve.ctrlKey});return new wf({clickTolerance:de,move:(Ve,Ke)=>({around:Ke,panDelta:Ke.sub(Ve)}),activateOnStart:!0,moveStateManager:ke,enable:Me,assignEvents:g_})})(s),ie=new Jd(s,d);d.dragPan=new m4(v,Q,ie),this._add("mousePan",Q),this._add("touchPan",ie,["touchZoom","touchRotate"]),s.interactive&&s.dragPan&&d.dragPan.enable(s.dragPan);let le=new DS,me=new CS;d.touchZoomRotate=new OS(v,me,le,R),this._add("touchRotate",le,["touchPan","touchZoom"]),this._add("touchZoom",me,["touchPan","touchRotate"]),s.interactive&&s.touchZoomRotate&&d.touchZoomRotate.enable(s.touchZoomRotate);let ye=d.scrollZoom=new ku(d,()=>this._triggerRenderFrame());this._add("scrollZoom",ye,["mousePan"]),s.interactive&&s.scrollZoom&&d.scrollZoom.enable(s.scrollZoom);let xe=d.keyboard=new Vl(d);this._add("keyboard",xe),s.interactive&&s.keyboard&&d.keyboard.enable(),this._add("blockableMapEvent",new mi(d))}_add(s,d,v){this._handlers.push({handlerName:s,handler:d,allowed:v}),this._handlersById[s]=d}stop(s){if(!this._updatingCamera){for(let{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},s),this._changes=[]}}isActive(){for(let{handler:s}of this._handlers)if(s.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Gl(this._eventsInProgress)||this.isZooming()}_blockedByActive(s,d,v){for(let y in s)if(y!==v&&(!d||d.indexOf(y)<0))return!0;return!1}_getMapTouches(s){let d=[];for(let v of s)this._el.contains(v.target)&&d.push(v);return d}mergeHandlerResult(s,d,v,y,w){if(!v)return;i.e(s,v);let D={handlerName:y,originalEvent:v.originalEvent||w};v.zoomDelta!==void 0&&(d.zoom=D),v.panDelta!==void 0&&(d.drag=D),v.pitchDelta!==void 0&&(d.pitch=D),v.bearingDelta!==void 0&&(d.rotate=D)}_applyChanges(){let s={},d={},v={};for(let[y,w,D]of this._changes)y.panDelta&&(s.panDelta=(s.panDelta||new i.P(0,0))._add(y.panDelta)),y.zoomDelta&&(s.zoomDelta=(s.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(s.bearingDelta=(s.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(s.pitchDelta=(s.pitchDelta||0)+y.pitchDelta),y.around!==void 0&&(s.around=y.around),y.pinchAround!==void 0&&(s.pinchAround=y.pinchAround),y.noInertia&&(s.noInertia=y.noInertia),i.e(d,w),i.e(v,D);this._updateMapTransform(s,d,v),this._changes=[]}_updateMapTransform(s,d,v){let y=this._map,w=y._getTransformForUpdate(),D=y.terrain;if(!(__(s)||D&&this._terrainMovement))return this._fireEvents(d,v,!0);let{panDelta:O,zoomDelta:R,bearingDelta:F,pitchDelta:V,around:G,pinchAround:Q}=s;Q!==void 0&&(G=Q),y._stop(!0),G=G||y.transform.centerPoint;let ie=w.pointLocation(O?G.sub(O):G);F&&(w.bearing+=F),V&&(w.pitch+=V),R&&(w.zoom+=R),D?this._terrainMovement||!d.drag&&!d.zoom?d.drag&&this._terrainMovement?w.center=w.pointLocation(w.centerPoint.sub(O)):w.setLocationAtPoint(ie,G):(this._terrainMovement=!0,this._map._elevationFreeze=!0,w.setLocationAtPoint(ie,G)):w.setLocationAtPoint(ie,G),y._applyUpdatedTransform(w),this._map._update(),s.noInertia||this._inertia.record(s),this._fireEvents(d,v,!0)}_fireEvents(s,d,v){let y=Gl(this._eventsInProgress),w=Gl(s),D={};for(let G in s){let{originalEvent:Q}=s[G];this._eventsInProgress[G]||(D[`${G}start`]=Q),this._eventsInProgress[G]=s[G]}!y&&w&&this._fireEvent("movestart",w.originalEvent);for(let G in D)this._fireEvent(G,D[G]);w&&this._fireEvent("move",w.originalEvent);for(let G in s){let{originalEvent:Q}=s[G];this._fireEvent(G,Q)}let O={},R;for(let G in this._eventsInProgress){let{handlerName:Q,originalEvent:ie}=this._eventsInProgress[G];this._handlersById[Q].isActive()||(delete this._eventsInProgress[G],R=d[Q]||ie,O[`${G}end`]=R)}for(let G in O)this._fireEvent(G,O[G]);let F=Gl(this._eventsInProgress),V=(y||w)&&!F;if(V&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let G=this._map._getTransformForUpdate();G.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(G)}if(v&&V){this._updatingCamera=!0;let G=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Q=ie=>ie!==0&&-this._bearingSnap<ie&&ie<this._bearingSnap;!G||!G.essential&&h.prefersReducedMotion?(this._map.fire(new i.k("moveend",{originalEvent:R})),Q(this._map.getBearing())&&this._map.resetNorth()):(Q(G.bearing||this._map.getBearing())&&(G.bearing=0),G.freezeElevation=!0,this._map.easeTo(G,{originalEvent:R})),this._updatingCamera=!1}}_fireEvent(s,d){this._map.fire(new i.k(s,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(s=>{delete this._frameId,this.handleEvent(new or("renderFrame",{timeStamp:s})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class v4 extends i.E{constructor(s,d){super(),this._renderFrameCallback=()=>{let v=Math.min((h.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=s,this._bearingSnap=d.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new i.N(this.transform.center.lng,this.transform.center.lat)}setCenter(s,d){return this.jumpTo({center:s},d)}panBy(s,d,v){return s=i.P.convert(s).mult(-1),this.panTo(this.transform.center,i.e({offset:s},d),v)}panTo(s,d,v){return this.easeTo(i.e({center:s},d),v)}getZoom(){return this.transform.zoom}setZoom(s,d){return this.jumpTo({zoom:s},d),this}zoomTo(s,d,v){return this.easeTo(i.e({zoom:s},d),v)}zoomIn(s,d){return this.zoomTo(this.getZoom()+1,s,d),this}zoomOut(s,d){return this.zoomTo(this.getZoom()-1,s,d),this}getBearing(){return this.transform.bearing}setBearing(s,d){return this.jumpTo({bearing:s},d),this}getPadding(){return this.transform.padding}setPadding(s,d){return this.jumpTo({padding:s},d),this}rotateTo(s,d,v){return this.easeTo(i.e({bearing:s},d),v)}resetNorth(s,d){return this.rotateTo(0,i.e({duration:1e3},s),d),this}resetNorthPitch(s,d){return this.easeTo(i.e({bearing:0,pitch:0,duration:1e3},s),d),this}snapToNorth(s,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(s,d):this}getPitch(){return this.transform.pitch}setPitch(s,d){return this.jumpTo({pitch:s},d),this}cameraForBounds(s,d){s=Ae.convert(s).adjustAntiMeridian();let v=d&&d.bearing||0;return this._cameraForBoxAndBearing(s.getNorthWest(),s.getSouthEast(),v,d)}_cameraForBoxAndBearing(s,d,v,y){let w={top:0,bottom:0,right:0,left:0};if(typeof(y=i.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){let jt=y.padding;y.padding={top:jt,bottom:jt,right:jt,left:jt}}y.padding=i.e(w,y.padding);let D=this.transform,O=D.padding,R=new Ae(s,d),F=D.project(R.getNorthWest()),V=D.project(R.getNorthEast()),G=D.project(R.getSouthEast()),Q=D.project(R.getSouthWest()),ie=i.ba(-v),le=F.rotate(ie),me=V.rotate(ie),ye=G.rotate(ie),xe=Q.rotate(ie),Me=new i.P(Math.max(le.x,me.x,xe.x,ye.x),Math.max(le.y,me.y,xe.y,ye.y)),de=new i.P(Math.min(le.x,me.x,xe.x,ye.x),Math.min(le.y,me.y,xe.y,ye.y)),ke=Me.sub(de),Ve=(D.width-(O.left+O.right+y.padding.left+y.padding.right))/ke.x,Ke=(D.height-(O.top+O.bottom+y.padding.top+y.padding.bottom))/ke.y;if(Ke<0||Ve<0)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let dt=Math.min(D.scaleZoom(D.scale*Math.min(Ve,Ke)),y.maxZoom),It=i.P.convert(y.offset),Vt=new i.P((y.padding.left-y.padding.right)/2,(y.padding.top-y.padding.bottom)/2).rotate(i.ba(v)),tr=It.add(Vt).mult(D.scale/D.zoomScale(dt));return{center:D.unproject(F.add(G).div(2).sub(tr)),zoom:dt,bearing:v}}fitBounds(s,d,v){return this._fitInternal(this.cameraForBounds(s,d),d,v)}fitScreenCoordinates(s,d,v,y,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(i.P.convert(s)),this.transform.pointLocation(i.P.convert(d)),v,y),y,w)}_fitInternal(s,d,v){return s?(delete(d=i.e(s,d)).padding,d.linear?this.easeTo(d,v):this.flyTo(d,v)):this}jumpTo(s,d){this.stop();let v=this._getTransformForUpdate(),y=!1,w=!1,D=!1;return"zoom"in s&&v.zoom!==+s.zoom&&(y=!0,v.zoom=+s.zoom),s.center!==void 0&&(v.center=i.N.convert(s.center)),"bearing"in s&&v.bearing!==+s.bearing&&(w=!0,v.bearing=+s.bearing),"pitch"in s&&v.pitch!==+s.pitch&&(D=!0,v.pitch=+s.pitch),s.padding==null||v.isPaddingEqual(s.padding)||(v.padding=s.padding),this._applyUpdatedTransform(v),this.fire(new i.k("movestart",d)).fire(new i.k("move",d)),y&&this.fire(new i.k("zoomstart",d)).fire(new i.k("zoom",d)).fire(new i.k("zoomend",d)),w&&this.fire(new i.k("rotatestart",d)).fire(new i.k("rotate",d)).fire(new i.k("rotateend",d)),D&&this.fire(new i.k("pitchstart",d)).fire(new i.k("pitch",d)).fire(new i.k("pitchend",d)),this.fire(new i.k("moveend",d))}calculateCameraOptionsFromTo(s,d,v,y=0){let w=i.Z.fromLngLat(s,d),D=i.Z.fromLngLat(v,y),O=D.x-w.x,R=D.y-w.y,F=D.z-w.z,V=Math.hypot(O,R,F);if(V===0)throw new Error("Can't calculate camera options with same From and To");let G=Math.hypot(O,R),Q=this.transform.scaleZoom(this.transform.cameraToCenterDistance/V/this.transform.tileSize),ie=180*Math.atan2(O,-R)/Math.PI,le=180*Math.acos(G/V)/Math.PI;return le=F<0?90-le:90+le,{center:D.toLngLat(),zoom:Q,pitch:le,bearing:ie}}easeTo(s,d){var v;this._stop(!1,s.easeId),((s=i.e({offset:[0,0],duration:500,easing:i.b9},s)).animate===!1||!s.essential&&h.prefersReducedMotion)&&(s.duration=0);let y=this._getTransformForUpdate(),w=y.zoom,D=y.bearing,O=y.pitch,R=y.padding,F="bearing"in s?this._normalizeBearing(s.bearing,D):D,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,Q=i.P.convert(s.offset),ie=y.centerPoint.add(Q),le=y.pointLocation(ie),{center:me,zoom:ye}=y.getConstrained(i.N.convert(s.center||le),(v=s.zoom)!==null&&v!==void 0?v:w);this._normalizeCenter(me,y);let xe=y.project(le),Me=y.project(me).sub(xe),de=y.zoomScale(ye-w),ke,Ve;s.around&&(ke=i.N.convert(s.around),Ve=y.locationPoint(ke));let Ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ye!==w,this._rotating=this._rotating||D!==F,this._pitching=this._pitching||V!==O,this._padding=!y.isPaddingEqual(G),this._easeId=s.easeId,this._prepareEase(d,s.noMoveStart,Ke),this.terrain&&this._prepareElevation(me),this._ease(dt=>{if(this._zooming&&(y.zoom=i.y.number(w,ye,dt)),this._rotating&&(y.bearing=i.y.number(D,F,dt)),this._pitching&&(y.pitch=i.y.number(O,V,dt)),this._padding&&(y.interpolatePadding(R,G,dt),ie=y.centerPoint.add(Q)),this.terrain&&!s.freezeElevation&&this._updateElevation(dt),ke)y.setLocationAtPoint(ke,Ve);else{let It=y.zoomScale(y.zoom-w),Vt=ye>w?Math.min(2,de):Math.max(.5,de),tr=Math.pow(Vt,1-dt),jt=y.unproject(xe.add(Me.mult(dt*tr)).mult(It));y.setLocationAtPoint(y.renderWorldCopies?jt.wrap():jt,ie)}this._applyUpdatedTransform(y),this._fireMoveEvents(d)},dt=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d,dt)},s),this}_prepareEase(s,d,v={}){this._moving=!0,d||v.moving||this.fire(new i.k("movestart",s)),this._zooming&&!v.zooming&&this.fire(new i.k("zoomstart",s)),this._rotating&&!v.rotating&&this.fire(new i.k("rotatestart",s)),this._pitching&&!v.pitching&&this.fire(new i.k("pitchstart",s))}_prepareElevation(s){this._elevationCenter=s,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(s){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let d=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(s<1&&d!==this._elevationTarget){let v=this._elevationTarget-this._elevationStart;this._elevationStart+=s*(v-(d-(v*s+this._elevationStart))/(1-s)),this._elevationTarget=d}this.transform.elevation=i.y.number(this._elevationStart,this._elevationTarget,s)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(s){let d=s.getCameraPosition(),v=this.terrain.getElevationForLngLatZoom(d.lngLat,s.zoom);if(d.altitude<v){let y=this.calculateCameraOptionsFromTo(d.lngLat,v,s.center,s.elevation);return{pitch:y.pitch,zoom:y.zoom}}return{}}_applyUpdatedTransform(s){let d=[];if(this.terrain&&d.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&d.push(y=>this.transformCameraUpdate(y)),!d.length)return;let v=s.clone();for(let y of d){let w=v.clone(),{center:D,zoom:O,pitch:R,bearing:F,elevation:V}=y(w);D&&(w.center=D),O!==void 0&&(w.zoom=O),R!==void 0&&(w.pitch=R),F!==void 0&&(w.bearing=F),V!==void 0&&(w.elevation=V),v.apply(w)}this.transform.apply(v)}_fireMoveEvents(s){this.fire(new i.k("move",s)),this._zooming&&this.fire(new i.k("zoom",s)),this._rotating&&this.fire(new i.k("rotate",s)),this._pitching&&this.fire(new i.k("pitch",s))}_afterEase(s,d){if(this._easeId&&d&&this._easeId===d)return;delete this._easeId;let v=this._zooming,y=this._rotating,w=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,v&&this.fire(new i.k("zoomend",s)),y&&this.fire(new i.k("rotateend",s)),w&&this.fire(new i.k("pitchend",s)),this.fire(new i.k("moveend",s))}flyTo(s,d){var v;if(!s.essential&&h.prefersReducedMotion){let Xt=i.M(s,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Xt,d)}this.stop(),s=i.e({offset:[0,0],speed:1.2,curve:1.42,easing:i.b9},s);let y=this._getTransformForUpdate(),w=y.zoom,D=y.bearing,O=y.pitch,R=y.padding,F="bearing"in s?this._normalizeBearing(s.bearing,D):D,V="pitch"in s?+s.pitch:O,G="padding"in s?s.padding:y.padding,Q=i.P.convert(s.offset),ie=y.centerPoint.add(Q),le=y.pointLocation(ie),{center:me,zoom:ye}=y.getConstrained(i.N.convert(s.center||le),(v=s.zoom)!==null&&v!==void 0?v:w);this._normalizeCenter(me,y);let xe=y.zoomScale(ye-w),Me=y.project(le),de=y.project(me).sub(Me),ke=s.curve,Ve=Math.max(y.width,y.height),Ke=Ve/xe,dt=de.mag();if("minZoom"in s){let Xt=i.ac(Math.min(s.minZoom,w,ye),y.minZoom,y.maxZoom),Lr=Ve/y.zoomScale(Xt-w);ke=Math.sqrt(Lr/dt*2)}let It=ke*ke;function Vt(Xt){let Lr=(Ke*Ke-Ve*Ve+(Xt?-1:1)*It*It*dt*dt)/(2*(Xt?Ke:Ve)*It*dt);return Math.log(Math.sqrt(Lr*Lr+1)-Lr)}function tr(Xt){return(Math.exp(Xt)-Math.exp(-Xt))/2}function jt(Xt){return(Math.exp(Xt)+Math.exp(-Xt))/2}let Rt=Vt(!1),fr=function(Xt){return jt(Rt)/jt(Rt+ke*Xt)},kr=function(Xt){return Ve*((jt(Rt)*(tr(Lr=Rt+ke*Xt)/jt(Lr))-tr(Rt))/It)/dt;var Lr},Ft=(Vt(!0)-Rt)/ke;if(Math.abs(dt)<1e-6||!isFinite(Ft)){if(Math.abs(Ve-Ke)<1e-6)return this.easeTo(s,d);let Xt=Ke<Ve?-1:1;Ft=Math.abs(Math.log(Ke/Ve))/ke,kr=()=>0,fr=Lr=>Math.exp(Xt*ke*Lr)}return s.duration="duration"in s?+s.duration:1e3*Ft/("screenSpeed"in s?+s.screenSpeed/ke:+s.speed),s.maxDuration&&s.duration>s.maxDuration&&(s.duration=0),this._zooming=!0,this._rotating=D!==F,this._pitching=V!==O,this._padding=!y.isPaddingEqual(G),this._prepareEase(d,!1),this.terrain&&this._prepareElevation(me),this._ease(Xt=>{let Lr=Xt*Ft,No=1/fr(Lr);y.zoom=Xt===1?ye:w+y.scaleZoom(No),this._rotating&&(y.bearing=i.y.number(D,F,Xt)),this._pitching&&(y.pitch=i.y.number(O,V,Xt)),this._padding&&(y.interpolatePadding(R,G,Xt),ie=y.centerPoint.add(Q)),this.terrain&&!s.freezeElevation&&this._updateElevation(Xt);let Yr=Xt===1?me:y.unproject(Me.add(de.mult(kr(Lr))).mult(No));y.setLocationAtPoint(y.renderWorldCopies?Yr.wrap():Yr,ie),this._applyUpdatedTransform(y),this._fireMoveEvents(d)},()=>{this.terrain&&s.freezeElevation&&this._finalizeElevation(),this._afterEase(d)},s),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(s,d){var v;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,d)}return s||(v=this.handlers)===null||v===void 0||v.stop(!1),this}_ease(s,d,v){v.animate===!1||v.duration===0?(s(1),d()):(this._easeStart=h.now(),this._easeOptions=v,this._onEaseFrame=s,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(s,d){s=i.b3(s,-180,180);let v=Math.abs(s-d);return Math.abs(s-360-d)<v&&(s-=360),Math.abs(s+360-d)<v&&(s+=360),s}_normalizeCenter(s,d){if(!d.renderWorldCopies||d.lngRange)return;let v=s.lng-d.center.lng;s.lng+=v>180?-360:v<-180?360:0}queryTerrainElevation(s){return this.terrain?this.terrain.getElevationForLngLatZoom(i.N.convert(s),this.transform.tileZoom)-this.transform.elevation:null}}let Bm={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Vm{constructor(s=Bm){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=d=>{!d||d.sourceDataType!=="metadata"&&d.sourceDataType!=="visibility"&&d.dataType!=="style"&&d.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=s}getDefaultPosition(){return"bottom-right"}onAdd(s){return this._map=s,this._compact=this.options.compact,this._container=g.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=g.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(s,d){let v=this._map._getUIString(`AttributionControl.${d}`);s.title=v,s.setAttribute("aria-label",v)}_updateAttributions(){if(!this._map.style)return;let s=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?s=s.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&s.push(this.options.customAttribution)),this._map.style.stylesheet){let y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}let d=this._map.style.sourceCaches;for(let y in d){let w=d[y];if(w.used||w.usedForTerrain){let D=w.getSource();D.attribution&&s.indexOf(D.attribution)<0&&s.push(D.attribution)}}s=s.filter(y=>String(y).trim()),s.sort((y,w)=>y.length-w.length),s=s.filter((y,w)=>{for(let D=w+1;D<s.length;D++)if(s[D].indexOf(y)>=0)return!1;return!0});let v=s.join(" | ");v!==this._attribHTML&&(this._attribHTML=v,s.length?(this._innerContainer.innerHTML=v,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class PS{constructor(s={}){this._updateCompact=()=>{let d=this._container.children;if(d.length){let v=d[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&v.classList.add("maplibregl-compact"):v.classList.remove("maplibregl-compact")}},this.options=s}getDefaultPosition(){return"bottom-left"}onAdd(s){this._map=s,this._compact=this.options&&this.options.compact,this._container=g.create("div","maplibregl-ctrl");let d=g.create("a","maplibregl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://maplibre.org/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){g.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class bn{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(s){let d=++this._id;return this._queue.push({callback:s,id:d,cancelled:!1}),d}remove(s){let d=this._currentlyRunning,v=d?this._queue.concat(d):this._queue;for(let y of v)if(y.id===s)return void(y.cancelled=!0)}run(s=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let d=this._currentlyRunning=this._queue;this._queue=[];for(let v of d)if(!v.cancelled&&(v.callback(s),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var kS=i.Y([{name:"a_pos3d",type:"Int16",components:3}]);class MF extends i.E{constructor(s){super(),this.sourceCache=s,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,s.usedForTerrain=!0,s.tileSize=this.tileSize*Ry(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(s,d){this.sourceCache.update(s,d),this._renderableTilesKeys=[];let v={};for(let y of s.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:d}))v[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.posMatrix=new Float64Array(16),i.aP(y.posMatrix,0,i.X,0,i.X,0,1),this._tiles[y.key]=new da(y,this.tileSize));for(let y in this._tiles)v[y]||delete this._tiles[y]}freeRtt(s){for(let d in this._tiles){let v=this._tiles[d];(!s||v.tileID.equals(s)||v.tileID.isChildOf(s)||s.isChildOf(v.tileID))&&(v.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(s=>this.getTileByID(s))}getTileByID(s){return this._tiles[s]}getTerrainCoords(s){let d={};for(let v of this._renderableTilesKeys){let y=this._tiles[v].tileID;if(y.canonical.equals(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16),i.aP(w.posMatrix,0,i.X,0,i.X,0,1),d[v]=w}else if(y.canonical.isChildOf(s.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let D=y.canonical.z-s.canonical.z,O=y.canonical.x-(y.canonical.x>>D<<D),R=y.canonical.y-(y.canonical.y>>D<<D),F=i.X>>D;i.aP(w.posMatrix,0,F,0,F,0,1),i.J(w.posMatrix,w.posMatrix,[-O*F,-R*F,0]),d[v]=w}else if(s.canonical.isChildOf(y.canonical)){let w=s.clone();w.posMatrix=new Float64Array(16);let D=s.canonical.z-y.canonical.z,O=s.canonical.x-(s.canonical.x>>D<<D),R=s.canonical.y-(s.canonical.y>>D<<D),F=i.X>>D;i.aP(w.posMatrix,0,i.X,0,i.X,0,1),i.J(w.posMatrix,w.posMatrix,[O*F,R*F,0]),i.K(w.posMatrix,w.posMatrix,[1/Ry(2,D),1/Ry(2,D),0]),d[v]=w}}return d}getSourceTile(s,d){let v=this.sourceCache._source,y=s.overscaledZ-this.deltaZoom;if(y>v.maxzoom&&(y=v.maxzoom),y<v.minzoom)return null;this._sourceTileCache[s.key]||(this._sourceTileCache[s.key]=s.scaledTo(y).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[s.key]);if((!w||!w.dem)&&d)for(;y>=v.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(s.scaledTo(y--).key);return w}tilesAfterTime(s=Date.now()){return Object.values(this._tiles).filter(d=>d.timeAdded>=s)}}class RS{constructor(s,d,v){this.painter=s,this.sourceCache=new MF(d),this.options=v,this.exaggeration=typeof v.exaggeration=="number"?v.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(s,d,v,y=i.X){var w;if(!(d>=0&&d<y&&v>=0&&v<y))return 0;let D=this.getTerrainData(s),O=(w=D.tile)===null||w===void 0?void 0:w.dem;if(!O)return 0;let R=function(le,me,ye){var xe=me[0],Me=me[1];return le[0]=ye[0]*xe+ye[4]*Me+ye[12],le[1]=ye[1]*xe+ye[5]*Me+ye[13],le}([],[d/y*i.X,v/y*i.X],D.u_terrain_matrix),F=[R[0]*O.dim,R[1]*O.dim],V=Math.floor(F[0]),G=Math.floor(F[1]),Q=F[0]-V,ie=F[1]-G;return O.get(V,G)*(1-Q)*(1-ie)+O.get(V+1,G)*Q*(1-ie)+O.get(V,G+1)*(1-Q)*ie+O.get(V+1,G+1)*Q*ie}getElevationForLngLatZoom(s,d){if(!i.bb(d,s.wrap()))return 0;let{tileID:v,mercatorX:y,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(s,d);return this.getElevation(v,y%i.X,w%i.X,i.X)}getElevation(s,d,v,y=i.X){return this.getDEMElevation(s,d,v,y)*this.exaggeration}getTerrainData(s){if(!this._emptyDemTexture){let y=this.painter.context,w=new i.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ue(y,w,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ue(y,new i.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=i.an([])}let d=this.sourceCache.getSourceTile(s,!0);if(d&&d.dem&&(!d.demTexture||d.needsTerrainPrepare)){let y=this.painter.context;d.demTexture=this.painter.getTileTexture(d.dem.stride),d.demTexture?d.demTexture.update(d.dem.getPixels(),{premultiply:!1}):d.demTexture=new ue(y,d.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),d.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),d.needsTerrainPrepare=!1}let v=d&&d+d.tileID.key+s.key;if(v&&!this._demMatrixCache[v]){let y=this.sourceCache.sourceCache._source.maxzoom,w=s.canonical.z-d.tileID.canonical.z;s.overscaledZ>s.canonical.z&&(s.canonical.z>=y?w=s.canonical.z-y:i.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let D=s.canonical.x-(s.canonical.x>>w<<w),O=s.canonical.y-(s.canonical.y>>w<<w),R=i.bc(new Float64Array(16),[1/(i.X<<w),1/(i.X<<w),0]);i.J(R,R,[D*i.X,O*i.X,0]),this._demMatrixCache[s.key]={matrix:R,coord:s}}return{u_depth:2,u_terrain:3,u_terrain_dim:d&&d.dem&&d.dem.dim||1,u_terrain_matrix:v?this._demMatrixCache[s.key].matrix:this._emptyDemMatrix,u_terrain_unpack:d&&d.dem&&d.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(d&&d.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:d}}getFramebuffer(s){let d=this.painter,v=d.width/devicePixelRatio,y=d.height/devicePixelRatio;return!this._fbo||this._fbo.width===v&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ue(d.context,{width:v,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ue(d.context,{width:v,height:y,data:null},d.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(d.context.gl.NEAREST,d.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=d.context.createFramebuffer(v,y,!0,!1),this._fbo.depthAttachment.set(d.context.createRenderbuffer(d.context.gl.DEPTH_COMPONENT16,v,y))),this._fbo.colorAttachment.set(s==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let s=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let d=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,D=0;w<this._coordsTextureSize;w++)for(let O=0;O<this._coordsTextureSize;O++,D+=4)d[D+0]=255&O,d[D+1]=255&w,d[D+2]=O>>8<<4|w>>8,d[D+3]=0;let v=new i.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(d.buffer)),y=new ue(s,v,s.gl.RGBA,{premultiply:!1});return y.bind(s.gl.NEAREST,s.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(s){this.painter.maybeDrawDepthAndCoords(!0);let d=new Uint8Array(4),v=this.painter.context,y=v.gl,w=Math.round(s.x*this.painter.pixelRatio/devicePixelRatio),D=Math.round(s.y*this.painter.pixelRatio/devicePixelRatio),O=Math.round(this.painter.height/devicePixelRatio);v.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(w,O-D-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null);let R=d[0]+(d[2]>>4<<8),F=d[1]+((15&d[2])<<8),V=this.coordsIndex[255-d[3]],G=V&&this.sourceCache.getTileByID(V);if(!G)return null;let Q=this._coordsTextureSize,ie=(1<<G.tileID.canonical.z)*Q;return new i.Z((G.tileID.canonical.x*Q+R)/ie+G.tileID.wrap,(G.tileID.canonical.y*Q+F)/ie,this.getElevation(G.tileID,R,F,Q))}depthAtPoint(s){let d=new Uint8Array(4),v=this.painter.context,y=v.gl;return v.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(s.x,this.painter.height/devicePixelRatio-s.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,d),v.bindFramebuffer.set(null),(d[0]/16777216+d[1]/65536+d[2]/256+d[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let s=this.painter.context,d=new i.bd,v=new i.aY,y=this.meshSize,w=i.X/y,D=y*y;for(let G=0;G<=y;G++)for(let Q=0;Q<=y;Q++)d.emplaceBack(Q*w,G*w,0);for(let G=0;G<D;G+=y+1)for(let Q=0;Q<y;Q++)v.emplaceBack(Q+G,y+Q+G+1,y+Q+G+2),v.emplaceBack(Q+G,y+Q+G+2,Q+G+1);let O=d.length,R=O+2*(y+1);for(let G of[0,1])for(let Q=0;Q<=y;Q++)for(let ie of[0,1])d.emplaceBack(Q*w,G*i.X,ie);for(let G=0;G<2*y;G+=2)v.emplaceBack(R+G,R+G+1,R+G+3),v.emplaceBack(R+G,R+G+3,R+G+2),v.emplaceBack(O+G,O+G+3,O+G+1),v.emplaceBack(O+G,O+G+2,O+G+3);let F=d.length,V=F+2*(y+1);for(let G of[0,1])for(let Q=0;Q<=y;Q++)for(let ie of[0,1])d.emplaceBack(G*i.X,Q*w,ie);for(let G=0;G<2*y;G+=2)v.emplaceBack(F+G,F+G+1,F+G+3),v.emplaceBack(F+G,F+G+3,F+G+2),v.emplaceBack(V+G,V+G+3,V+G+1),v.emplaceBack(V+G,V+G+2,V+G+3);return this._mesh=new u_(s.createVertexBuffer(d,kS.members),s.createIndexBuffer(v),i.a0.simpleSegment(0,0,d.length,v.length)),this._mesh}getMeshFrameDelta(s){return 2*Math.PI*i.be/Math.pow(2,s)/5}getMinTileElevationForLngLatZoom(s,d){var v;let{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(s,d);return(v=this.getMinMaxElevation(y).minElevation)!==null&&v!==void 0?v:0}getMinMaxElevation(s){let d=this.getTerrainData(s).tile,v={minElevation:null,maxElevation:null};return d&&d.dem&&(v.minElevation=d.dem.min*this.exaggeration,v.maxElevation=d.dem.max*this.exaggeration),v}_getOverscaledTileIDFromLngLatZoom(s,d){let v=i.Z.fromLngLat(s.wrap()),y=(1<<d)*i.X,w=v.x*y,D=v.y*y,O=Math.floor(w/i.X),R=Math.floor(D/i.X);return{tileID:new i.S(d,0,d,O,R),mercatorX:w,mercatorY:D}}}class CF{constructor(s,d,v){this._context=s,this._size=d,this._tileSize=v,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let s of this._objects)s.texture.destroy(),s.fbo.destroy()}_createObject(s){let d=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),v=new ue(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return v.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),d.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),d.colorAttachment.set(v.texture),{id:s,fbo:d,texture:v,stamp:-1,inUse:!1}}getObjectForId(s){return this._objects[s]}useObject(s){s.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(d=>s.id!==d),this._recentlyUsed.push(s.id)}stampObject(s){s.stamp=++this._stamp}getOrCreateFreeObject(){for(let d of this._recentlyUsed)if(!this._objects[d].inUse)return this._objects[d];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let s=this._createObject(this._objects.length);return this._objects.push(s),s}freeObject(s){s.inUse=!1}freeAllObjects(){for(let s of this._objects)this.freeObject(s)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(s=>!s.inUse)===!1}}let Gm={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class y4{constructor(s,d){this.painter=s,this.terrain=d,this.pool=new CF(s.context,30,d.sourceCache.tileSize*d.qualityFactor)}destruct(){this.pool.destruct()}getTexture(s){return this.pool.getObjectForId(s.rtt[this._stacks.length-1].id).texture}prepareForRender(s,d){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=s._order.filter(v=>!s._layers[v].isHidden(d)),this._coordsDescendingInv={};for(let v in s.sourceCaches){this._coordsDescendingInv[v]={};let y=s.sourceCaches[v].getVisibleCoordinates();for(let w of y){let D=this.terrain.sourceCache.getTerrainCoords(w);for(let O in D)this._coordsDescendingInv[v][O]||(this._coordsDescendingInv[v][O]=[]),this._coordsDescendingInv[v][O].push(D[O])}}this._coordsDescendingInvStr={};for(let v of s._order){let y=s._layers[v],w=y.source;if(Gm[y.type]&&!this._coordsDescendingInvStr[w]){this._coordsDescendingInvStr[w]={};for(let D in this._coordsDescendingInv[w])this._coordsDescendingInvStr[w][D]=this._coordsDescendingInv[w][D].map(O=>O.key).sort().join()}}for(let v of this._renderableTiles)for(let y in this._coordsDescendingInvStr){let w=this._coordsDescendingInvStr[y][v.tileID.key];w&&w!==v.rttCoords[y]&&(v.rtt=[])}}renderLayer(s){if(s.isHidden(this.painter.transform.zoom))return!1;let d=s.type,v=this.painter,y=this._renderableLayerIds[this._renderableLayerIds.length-1]===s.id;if(Gm[d]&&(this._prevType&&Gm[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(s.id),!y))return!0;if(Gm[this._prevType]||Gm[d]&&y){this._prevType=d;let w=this._stacks.length-1,D=this._stacks[w]||[];for(let O of this._renderableTiles){if(this.pool.isFull()&&(c4(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[w]){let F=this.pool.getObjectForId(O.rtt[w].id);if(F.stamp===O.rtt[w].stamp){this.pool.useObject(F);continue}}let R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),O.rtt[w]={id:R.id,stamp:R.stamp},v.context.bindFramebuffer.set(R.fbo.framebuffer),v.context.clear({color:i.aM.transparent,stencil:0}),v.currentStencilSource=void 0;for(let F=0;F<D.length;F++){let V=v.style._layers[D[F]],G=V.source?this._coordsDescendingInv[V.source][O.tileID.key]:[O.tileID];v.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),v._renderTileClippingMasks(V,G),v.renderLayer(v,v.style.sourceCaches[V.source],V,G),V.source&&(O.rttCoords[V.source]=this._coordsDescendingInvStr[V.source][O.tileID.key])}}return c4(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Gm[d]}return!1}}let jS={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},_4=a,AF={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Bm,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:i.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},qS=E=>{E.touchstart=E.dragStart,E.touchmoveWindow=E.dragMove,E.touchend=E.dragEnd},DF={showCompass:!0,showZoom:!0,visualizePitch:!1};class NF{constructor(s,d,v=!1){this.mousedown=D=>{this.startMouse(i.e({},D,{ctrlKey:!0,preventDefault:()=>D.preventDefault()}),g.mousePos(this.element,D)),g.addEventListener(window,"mousemove",this.mousemove),g.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=D=>{this.moveMouse(D,g.mousePos(this.element,D))},this.mouseup=D=>{this.mouseRotate.dragEnd(D),this.mousePitch&&this.mousePitch.dragEnd(D),this.offTemp()},this.touchstart=D=>{D.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,D.targetTouches)[0],this.startTouch(D,this._startPos),g.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.addEventListener(window,"touchend",this.touchend))},this.touchmove=D=>{D.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,D.targetTouches)[0],this.moveTouch(D,this._lastPos))},this.touchend=D=>{D.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let y=s.dragRotate._mouseRotate.getClickTolerance(),w=s.dragRotate._mousePitch.getClickTolerance();this.element=d,this.mouseRotate=IS({clickTolerance:y,enable:!0}),this.touchRotate=(({enable:D,clickTolerance:O,bearingDegreesPerPixelMoved:R=.8})=>{let F=new SS;return new wf({clickTolerance:O,move:(V,G)=>({bearingDelta:(G.x-V.x)*R}),moveStateManager:F,enable:D,assignEvents:qS})})({clickTolerance:y,enable:!0}),this.map=s,v&&(this.mousePitch=TS({clickTolerance:w,enable:!0}),this.touchPitch=(({enable:D,clickTolerance:O,pitchDegreesPerPixelMoved:R=-.5})=>{let F=new SS;return new wf({clickTolerance:O,move:(V,G)=>({pitchDelta:(G.y-V.y)*R}),moveStateManager:F,enable:D,assignEvents:qS})})({clickTolerance:w,enable:!0})),g.addEventListener(d,"mousedown",this.mousedown),g.addEventListener(d,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(d,"touchcancel",this.reset)}startMouse(s,d){this.mouseRotate.dragStart(s,d),this.mousePitch&&this.mousePitch.dragStart(s,d),g.disableDrag()}startTouch(s,d){this.touchRotate.dragStart(s,d),this.touchPitch&&this.touchPitch.dragStart(s,d),g.disableDrag()}moveMouse(s,d){let v=this.map,{bearingDelta:y}=this.mouseRotate.dragMove(s,d)||{};if(y&&v.setBearing(v.getBearing()+y),this.mousePitch){let{pitchDelta:w}=this.mousePitch.dragMove(s,d)||{};w&&v.setPitch(v.getPitch()+w)}}moveTouch(s,d){let v=this.map,{bearingDelta:y}=this.touchRotate.dragMove(s,d)||{};if(y&&v.setBearing(v.getBearing()+y),this.touchPitch){let{pitchDelta:w}=this.touchPitch.dragMove(s,d)||{};w&&v.setPitch(v.getPitch()+w)}}off(){let s=this.element;g.removeEventListener(s,"mousedown",this.mousedown),g.removeEventListener(s,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend),g.removeEventListener(s,"touchcancel",this.reset),this.offTemp()}offTemp(){g.enableDrag(),g.removeEventListener(window,"mousemove",this.mousemove),g.removeEventListener(window,"mouseup",this.mouseup),g.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),g.removeEventListener(window,"touchend",this.touchend)}}let gl;function Do(E,s,d){let v=new i.N(E.lng,E.lat);if(E=new i.N(E.lng,E.lat),s){let y=new i.N(E.lng-360,E.lat),w=new i.N(E.lng+360,E.lat),D=d.locationPoint(E).distSqr(s);d.locationPoint(y).distSqr(s)<D?E=y:d.locationPoint(w).distSqr(s)<D&&(E=w)}for(;Math.abs(E.lng-d.center.lng)>180;){let y=d.locationPoint(E);if(y.x>=0&&y.y>=0&&y.x<=d.width&&y.y<=d.height)break;E.lng>d.center.lng?E.lng-=360:E.lng+=360}return E.lng!==v.lng&&d.locationPoint(E).y>d.height/2-d.getHorizon()?E:v}let Hm={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function x_(E,s,d){let v=E.classList;for(let y in Hm)v.remove(`maplibregl-${d}-anchor-${y}`);v.add(`maplibregl-${d}-anchor-${s}`)}class b_ extends i.E{constructor(s){if(super(),this._onKeyPress=d=>{let v=d.code,y=d.charCode||d.keyCode;v!=="Space"&&v!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=d=>{let v=d.originalEvent.target,y=this._element;this._popup&&(v===y||y.contains(v))&&this.togglePopup()},this._update=d=>{var v;if(!this._map)return;let y=this._map.loaded()&&!this._map.isMoving();((d==null?void 0:d.type)==="terrain"||(d==null?void 0:d.type)==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?Do(this._lngLat,this._flatPos,this._map.transform):(v=this._lngLat)===null||v===void 0?void 0:v.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let w="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?w=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(w=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let D="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?D="rotateX(0deg)":this._pitchAlignment==="map"&&(D=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||d&&d.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,`${Hm[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${D} ${w}`),h.frameAsync(new AbortController).then(()=>{this._updateOpacity(d&&d.type==="moveend")}).catch(()=>{})},this._onMove=d=>{if(!this._isDragging){let v=this._clickTolerance||this._map._clickTolerance;this._isDragging=d.point.dist(this._pointerdownPos)>=v}this._isDragging&&(this._pos=d.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.k("dragstart"))),this.fire(new i.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new i.k("dragend")),this._state="inactive"},this._addDragHandler=d=>{this._element.contains(d.originalEvent.target)&&(d.preventDefault(),this._positionDelta=d.point.sub(this._pos).add(this._offset),this._pointerdownPos=d.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=s&&s.anchor||"center",this._color=s&&s.color||"#3FB1CE",this._scale=s&&s.scale||1,this._draggable=s&&s.draggable||!1,this._clickTolerance=s&&s.clickTolerance||0,this._subpixelPositioning=s&&s.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=s&&s.rotation||0,this._rotationAlignment=s&&s.rotationAlignment||"auto",this._pitchAlignment=s&&s.pitchAlignment&&s.pitchAlignment!=="auto"?s.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(s==null?void 0:s.opacity,s==null?void 0:s.opacityWhenCovered),s&&s.element)this._element=s.element,this._offset=i.P.convert(s&&s.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div");let d=g.createNS("http://www.w3.org/2000/svg","svg"),v=41,y=27;d.setAttributeNS(null,"display","block"),d.setAttributeNS(null,"height",`${v}px`),d.setAttributeNS(null,"width",`${y}px`),d.setAttributeNS(null,"viewBox",`0 0 ${y} ${v}`);let w=g.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");let D=g.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"fill-rule","nonzero");let O=g.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"transform","translate(3.0, 29.0)"),O.setAttributeNS(null,"fill","#000000");let R=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let xe of R){let Me=g.createNS("http://www.w3.org/2000/svg","ellipse");Me.setAttributeNS(null,"opacity","0.04"),Me.setAttributeNS(null,"cx","10.5"),Me.setAttributeNS(null,"cy","5.80029008"),Me.setAttributeNS(null,"rx",xe.rx),Me.setAttributeNS(null,"ry",xe.ry),O.appendChild(Me)}let F=g.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"fill",this._color);let V=g.createNS("http://www.w3.org/2000/svg","path");V.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),F.appendChild(V);let G=g.createNS("http://www.w3.org/2000/svg","g");G.setAttributeNS(null,"opacity","0.25"),G.setAttributeNS(null,"fill","#000000");let Q=g.createNS("http://www.w3.org/2000/svg","path");Q.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),G.appendChild(Q);let ie=g.createNS("http://www.w3.org/2000/svg","g");ie.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ie.setAttributeNS(null,"fill","#FFFFFF");let le=g.createNS("http://www.w3.org/2000/svg","g");le.setAttributeNS(null,"transform","translate(8.0, 8.0)");let me=g.createNS("http://www.w3.org/2000/svg","circle");me.setAttributeNS(null,"fill","#000000"),me.setAttributeNS(null,"opacity","0.25"),me.setAttributeNS(null,"cx","5.5"),me.setAttributeNS(null,"cy","5.5"),me.setAttributeNS(null,"r","5.4999962");let ye=g.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#FFFFFF"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962"),le.appendChild(me),le.appendChild(ye),D.appendChild(O),D.appendChild(F),D.appendChild(G),D.appendChild(ie),D.appendChild(le),d.appendChild(D),d.setAttributeNS(null,"height",v*this._scale+"px"),d.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(d),this._offset=i.P.convert(s&&s.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",d=>{d.preventDefault()}),this._element.addEventListener("mousedown",d=>{d.preventDefault()}),x_(this._element,this._anchor,"marker"),s&&s.className)for(let d of s.className.split(" "))this._element.classList.add(d);this._popup=null}addTo(s){return this.remove(),this._map=s,this._element.setAttribute("aria-label",s._getUIString("Marker.Title")),s.getCanvasContainer().appendChild(this._element),s.on("move",this._update),s.on("moveend",this._update),s.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(s){return this._lngLat=i.N.convert(s),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(s){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),s){if(!("offset"in s.options)){let y=Math.abs(13.5)/Math.SQRT2;s.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=s,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(s){return this._subpixelPositioning=s,this}getPopup(){return this._popup}togglePopup(){let s=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:s?(s.isOpen()?s.remove():(s.setLngLat(this._lngLat),s.addTo(this._map)),this):this}_updateOpacity(s=!1){var d,v;if(!(!((d=this._map)===null||d===void 0)&&d.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(s)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let y=this._map,w=y.terrain.depthAtPoint(this._pos),D=y.terrain.getElevationForLngLatZoom(this._lngLat,y.transform.tileZoom);if(y.transform.lngLatToCameraDepth(this._lngLat,D)-w<.006)return void(this._element.style.opacity=this._opacity);let O=-this._offset.y/y.transform._pixelPerMeter,R=Math.sin(y.getPitch()*Math.PI/180)*O,F=y.terrain.depthAtPoint(new i.P(this._pos.x,this._pos.y-this._offset.y)),V=y.transform.lngLatToCameraDepth(this._lngLat,D+R)-F>.006;!((v=this._popup)===null||v===void 0)&&v.isOpen()&&V&&this._popup.remove(),this._element.style.opacity=V?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(s){return this._offset=i.P.convert(s),this._update(),this}addClassName(s){this._element.classList.add(s)}removeClassName(s){this._element.classList.remove(s)}toggleClassName(s){return this._element.classList.toggle(s)}setDraggable(s){return this._draggable=!!s,this._map&&(s?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(s){return this._rotation=s||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(s){return this._rotationAlignment=s||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(s){return this._pitchAlignment=s&&s!=="auto"?s:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(s,d){return s===void 0&&d===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),s!==void 0&&(this._opacity=s),d!==void 0&&(this._opacityWhenCovered=d),this._map&&this._updateOpacity(!0),this}}let x4={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Iy=0,Ty=!1,fc={maxWidth:100,unit:"metric"};function My(E,s,d){let v=d&&d.maxWidth||100,y=E._container.clientHeight/2,w=E.unproject([0,y]),D=E.unproject([v,y]),O=w.distanceTo(D);if(d&&d.unit==="imperial"){let R=3.2808*O;R>5280?cr(s,v,R/5280,E._getUIString("ScaleControl.Miles")):cr(s,v,R,E._getUIString("ScaleControl.Feet"))}else d&&d.unit==="nautical"?cr(s,v,O/1852,E._getUIString("ScaleControl.NauticalMiles")):O>=1e3?cr(s,v,O/1e3,E._getUIString("ScaleControl.Kilometers")):cr(s,v,O,E._getUIString("ScaleControl.Meters"))}function cr(E,s,d,v){let y=function(w){let D=Math.pow(10,`${Math.floor(w)}`.length-1),O=w/D;return O=O>=10?10:O>=5?5:O>=3?3:O>=2?2:O>=1?1:function(R){let F=Math.pow(10,Math.ceil(-Math.log(R)/Math.LN10));return Math.round(R*F)/F}(O),D*O}(d);E.style.width=s*(y/d)+"px",E.innerHTML=`${y}&nbsp;${v}`}let Ar={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},w_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function E_(E){if(E){if(typeof E=="number"){let s=Math.round(Math.abs(E)/Math.SQRT2);return{center:new i.P(0,0),top:new i.P(0,E),"top-left":new i.P(s,s),"top-right":new i.P(-s,s),bottom:new i.P(0,-E),"bottom-left":new i.P(s,-s),"bottom-right":new i.P(-s,-s),left:new i.P(E,0),right:new i.P(-E,0)}}if(E instanceof i.P||Array.isArray(E)){let s=i.P.convert(E);return{center:s,top:s,"top-left":s,"top-right":s,bottom:s,"bottom-left":s,"bottom-right":s,left:s,right:s}}return{center:i.P.convert(E.center||[0,0]),top:i.P.convert(E.top||[0,0]),"top-left":i.P.convert(E["top-left"]||[0,0]),"top-right":i.P.convert(E["top-right"]||[0,0]),bottom:i.P.convert(E.bottom||[0,0]),"bottom-left":i.P.convert(E["bottom-left"]||[0,0]),"bottom-right":i.P.convert(E["bottom-right"]||[0,0]),left:i.P.convert(E.left||[0,0]),right:i.P.convert(E.right||[0,0])}}return E_(new i.P(0,0))}let zS=a;o.AJAXError=i.bh,o.Evented=i.E,o.LngLat=i.N,o.MercatorCoordinate=i.Z,o.Point=i.P,o.addProtocol=i.bi,o.config=i.a,o.removeProtocol=i.bj,o.AttributionControl=Vm,o.BoxZoomHandler=ml,o.CanvasSource=gt,o.CooperativeGesturesHandler=Um,o.DoubleClickZoomHandler=Qd,o.DragPanHandler=m4,o.DragRotateHandler=g4,o.EdgeInsets=jm,o.FullscreenControl=class extends i.E{constructor(E={}){super(),this._onFullscreenChange=()=>{var s;let d=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((s=d==null?void 0:d.shadowRoot)===null||s===void 0)&&s.fullscreenElement;)d=d.shadowRoot.fullscreenElement;d===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,E&&E.container&&(E.container instanceof HTMLElement?this._container=E.container:i.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(E){return this._map=E,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){g.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let E=this._fullscreenButton=g.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);g.create("span","maplibregl-ctrl-icon",E).setAttribute("aria-hidden","true"),E.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let E=this._getTitle();this._fullscreenButton.setAttribute("aria-label",E),this._fullscreenButton.title=E}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new i.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new i.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},o.GeoJSONSource=Fe,o.GeolocateControl=class extends i.E{constructor(E){super(),this._onSuccess=s=>{if(this._map){if(this._isOutOfMapMaxBounds(s))return this._setErrorState(),this.fire(new i.k("outofmaxbounds",s)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=s,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(s),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(s),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new i.k("geolocate",s)),this._finish()}},this._updateCamera=s=>{let d=new i.N(s.coords.longitude,s.coords.latitude),v=s.coords.accuracy,y=this._map.getBearing(),w=i.e({bearing:y},this.options.fitBoundsOptions),D=Ae.fromLngLat(d,v);this._map.fitBounds(D,w,{geolocateSource:!0})},this._updateMarker=s=>{if(s){let d=new i.N(s.coords.longitude,s.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=s.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=s=>{if(this._map){if(this.options.trackUserLocation)if(s.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(s.code===3&&Ty)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new i.k("error",s)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",s=>s.preventDefault()),this._geolocateButton=g.create("button","maplibregl-ctrl-geolocate",this._container),g.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=s=>{if(this._map){if(s===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");let d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}else{let d=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new b_({element:this._dotElement}),this._circleElement=g.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new b_({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",d=>{d.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d.originalEvent&&d.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new i.k("trackuserlocationend")),this.fire(new i.k("userlocationlostfocus")))})}},this.options=i.e({},x4,E)}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return i._(this,arguments,void 0,function*(s=!1){if(gl!==void 0&&!s)return gl;if(window.navigator.permissions===void 0)return gl=!!window.navigator.geolocation,gl;try{gl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(d){gl=!!window.navigator.geolocation}return gl})}().then(s=>this._finishSetupUI(s)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Iy=0,Ty=!1}_isOutOfMapMaxBounds(E){let s=this._map.getMaxBounds(),d=E.coords;return s&&(d.longitude<s.getWest()||d.longitude>s.getEast()||d.latitude<s.getSouth()||d.latitude>s.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let E=this._map.getBounds(),s=E.getSouthEast(),d=E.getNorthEast(),v=s.distanceTo(d),y=Math.ceil(this._accuracy/(v/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Iy--,Ty=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new i.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.k("trackuserlocationstart")),this.fire(new i.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let E;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Iy++,Iy>1?(E={maximumAge:6e5,timeout:0},Ty=!0):(E=this.options.positionOptions,Ty=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,E)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},o.Hash=f_,o.ImageSource=mt,o.KeyboardHandler=Vl,o.LngLatBounds=Ae,o.LogoControl=PS,o.Map=class extends v4{constructor(E){i.bf.mark(i.bg.create);let s=Object.assign(Object.assign({},AF),E);if(s.minZoom!=null&&s.maxZoom!=null&&s.minZoom>s.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(s.minPitch!=null&&s.maxPitch!=null&&s.minPitch>s.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(s.minPitch!=null&&s.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(s.maxPitch!=null&&s.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new qm(s.minZoom,s.maxZoom,s.minPitch,s.maxPitch,s.renderWorldCopies),{bearingSnap:s.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new bn,this._controls=[],this._mapId=i.a4(),this._contextLost=d=>{d.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new i.k("webglcontextlost",{originalEvent:d}))},this._contextRestored=d=>{this._setupPainter(),this.resize(),this._update(),this.fire(new i.k("webglcontextrestored",{originalEvent:d}))},this._onMapScroll=d=>{if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=s.interactive,this._maxTileCacheSize=s.maxTileCacheSize,this._maxTileCacheZoomLevels=s.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=s.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=s.preserveDrawingBuffer===!0,this._antialias=s.antialias===!0,this._trackResize=s.trackResize===!0,this._bearingSnap=s.bearingSnap,this._refreshExpiredTiles=s.refreshExpiredTiles===!0,this._fadeDuration=s.fadeDuration,this._crossSourceCollisions=s.crossSourceCollisions===!0,this._collectResourceTiming=s.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},jS),s.locale),this._clickTolerance=s.clickTolerance,this._overridePixelRatio=s.pixelRatio,this._maxCanvasSize=s.maxCanvasSize,this.transformCameraUpdate=s.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=s.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=k.addThrottleControl(()=>this.isMoving()),this._requestManager=new q(s.transformRequest),typeof s.container=="string"){if(this._container=document.getElementById(s.container),!this._container)throw new Error(`Container '${s.container}' not found.`)}else{if(!(s.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=s.container}if(s.maxBounds&&this.setMaxBounds(s.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let d=!1,v=xy(y=>{this._trackResize&&!this._removed&&(this.resize(y),this.redraw())},50);this._resizeObserver=new ResizeObserver(y=>{d?v(y):d=!0}),this._resizeObserver.observe(this._container)}this.handlers=new LS(this,s),this._hash=s.hash&&new f_(typeof s.hash=="string"&&s.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:s.center,zoom:s.zoom,bearing:s.bearing,pitch:s.pitch}),s.bounds&&(this.resize(),this.fitBounds(s.bounds,i.e({},s.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=s.localIdeographFontFamily,this._validateStyle=s.validateStyle,s.style&&this.setStyle(s.style,{localIdeographFontFamily:s.localIdeographFontFamily}),s.attributionControl&&this.addControl(new Vm(typeof s.attributionControl=="boolean"?void 0:s.attributionControl)),s.maplibreLogo&&this.addControl(new PS,s.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new i.k(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new i.k(`${d.dataType}dataloading`,d))}),this.on("dataabort",d=>{this.fire(new i.k("sourcedataabort",d))})}_getMapId(){return this._mapId}addControl(E,s){if(s===void 0&&(s=E.getDefaultPosition?E.getDefaultPosition():"top-right"),!E||!E.onAdd)return this.fire(new i.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let d=E.onAdd(this);this._controls.push(E);let v=this._controlPositions[s];return s.indexOf("bottom")!==-1?v.insertBefore(d,v.firstChild):v.appendChild(d),this}removeControl(E){if(!E||!E.onRemove)return this.fire(new i.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let s=this._controls.indexOf(E);return s>-1&&this._controls.splice(s,1),E.onRemove(this),this}hasControl(E){return this._controls.indexOf(E)>-1}calculateCameraOptionsFromTo(E,s,d,v){return v==null&&this.terrain&&(v=this.terrain.getElevationForLngLatZoom(d,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(E,s,d,v)}resize(E){var s;let d=this._containerDimensions(),v=d[0],y=d[1],w=this._getClampedPixelRatio(v,y);if(this._resizeCanvas(v,y,w),this.painter.resize(v,y,w),this.painter.overLimit()){let O=this.painter.context.gl;this._maxCanvasSize=[O.drawingBufferWidth,O.drawingBufferHeight];let R=this._getClampedPixelRatio(v,y);this._resizeCanvas(v,y,R),this.painter.resize(v,y,R)}this.transform.resize(v,y),(s=this._requestedCameraState)===null||s===void 0||s.resize(v,y);let D=!this._moving;return D&&(this.stop(),this.fire(new i.k("movestart",E)).fire(new i.k("move",E))),this.fire(new i.k("resize",E)),D&&this.fire(new i.k("moveend",E)),this}_getClampedPixelRatio(E,s){let{0:d,1:v}=this._maxCanvasSize,y=this.getPixelRatio(),w=E*y,D=s*y;return Math.min(w>d?d/w:1,D>v?v/D:1)*y}getPixelRatio(){var E;return(E=this._overridePixelRatio)!==null&&E!==void 0?E:devicePixelRatio}setPixelRatio(E){this._overridePixelRatio=E,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(E){return this.transform.setMaxBounds(Ae.convert(E)),this._update()}setMinZoom(E){if((E=E==null?-2:E)>=-2&&E<=this.transform.maxZoom)return this.transform.minZoom=E,this._update(),this.getZoom()<E&&this.setZoom(E),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(E){if((E=E==null?22:E)>=this.transform.minZoom)return this.transform.maxZoom=E,this._update(),this.getZoom()>E&&this.setZoom(E),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(E){if((E=E==null?0:E)<0)throw new Error("minPitch must be greater than or equal to 0");if(E>=0&&E<=this.transform.maxPitch)return this.transform.minPitch=E,this._update(),this.getPitch()<E&&this.setPitch(E),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(E){if((E=E==null?60:E)>85)throw new Error("maxPitch must be less than or equal to 85");if(E>=this.transform.minPitch)return this.transform.maxPitch=E,this._update(),this.getPitch()>E&&this.setPitch(E),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(E){return this.transform.renderWorldCopies=E,this._update()}project(E){return this.transform.locationPoint(i.N.convert(E),this.style&&this.terrain)}unproject(E){return this.transform.pointLocation(i.P.convert(E),this.terrain)}isMoving(){var E;return this._moving||((E=this.handlers)===null||E===void 0?void 0:E.isMoving())}isZooming(){var E;return this._zooming||((E=this.handlers)===null||E===void 0?void 0:E.isZooming())}isRotating(){var E;return this._rotating||((E=this.handlers)===null||E===void 0?void 0:E.isRotating())}_createDelegatedListener(E,s,d){if(E==="mouseenter"||E==="mouseover"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:w=>{let D=s.filter(R=>this.getLayer(R)),O=D.length!==0?this.queryRenderedFeatures(w.point,{layers:D}):[];O.length?v||(v=!0,d.call(this,new Ma(E,this,w.originalEvent,{features:O}))):v=!1},mouseout:()=>{v=!1}}}}if(E==="mouseleave"||E==="mouseout"){let v=!1;return{layers:s,listener:d,delegates:{mousemove:D=>{let O=s.filter(R=>this.getLayer(R));(O.length!==0?this.queryRenderedFeatures(D.point,{layers:O}):[]).length?v=!0:v&&(v=!1,d.call(this,new Ma(E,this,D.originalEvent)))},mouseout:D=>{v&&(v=!1,d.call(this,new Ma(E,this,D.originalEvent)))}}}}{let v=y=>{let w=s.filter(O=>this.getLayer(O)),D=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];D.length&&(y.features=D,d.call(this,y),delete y.features)};return{layers:s,listener:d,delegates:{[E]:v}}}}_saveDelegatedListener(E,s){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[E]=this._delegatedListeners[E]||[],this._delegatedListeners[E].push(s)}_removeDelegatedListener(E,s,d){if(!this._delegatedListeners||!this._delegatedListeners[E])return;let v=this._delegatedListeners[E];for(let y=0;y<v.length;y++){let w=v[y];if(w.listener===d&&w.layers.length===s.length&&w.layers.every(D=>s.includes(D))){for(let D in w.delegates)this.off(D,w.delegates[D]);return void v.splice(y,1)}}}on(E,s,d){if(d===void 0)return super.on(E,s);let v=this._createDelegatedListener(E,typeof s=="string"?[s]:s,d);this._saveDelegatedListener(E,v);for(let y in v.delegates)this.on(y,v.delegates[y]);return this}once(E,s,d){if(d===void 0)return super.once(E,s);let v=typeof s=="string"?[s]:s,y=this._createDelegatedListener(E,v,d);for(let w in y.delegates){let D=y.delegates[w];y.delegates[w]=(...O)=>{this._removeDelegatedListener(E,v,d),D(...O)}}this._saveDelegatedListener(E,y);for(let w in y.delegates)this.once(w,y.delegates[w]);return this}off(E,s,d){return d===void 0?super.off(E,s):(this._removeDelegatedListener(E,typeof s=="string"?[s]:s,d),this)}queryRenderedFeatures(E,s){if(!this.style)return[];let d,v=E instanceof i.P||Array.isArray(E),y=v?E:[[0,0],[this.transform.width,this.transform.height]];if(s=s||(v?{}:E)||{},y instanceof i.P||typeof y[0]=="number")d=[i.P.convert(y)];else{let w=i.P.convert(y[0]),D=i.P.convert(y[1]);d=[w,new i.P(D.x,w.y),D,new i.P(w.x,D.y),w]}return this.style.queryRenderedFeatures(d,s,this.transform)}querySourceFeatures(E,s){return this.style.querySourceFeatures(E,s)}setStyle(E,s){return(s=i.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},s)).diff!==!1&&s.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&E?(this._diffStyle(E,s),this):(this._localIdeographFontFamily=s.localIdeographFontFamily,this._updateStyle(E,s))}setTransformRequest(E){return this._requestManager.setTransformRequest(E),this}_getUIString(E){let s=this._locale[E];if(s==null)throw new Error(`Missing UI string '${E}'`);return s}_updateStyle(E,s){if(s.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(E,s));let d=this.style&&s.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!E)),E?(this.style=new Y1(this,s||{}),this.style.setEventedParent(this,{style:this.style}),typeof E=="string"?this.style.loadURL(E,s,d):this.style.loadJSON(E,s,d),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Y1(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(E,s){if(typeof E=="string"){let d=this._requestManager.transformRequest(E,"Style");i.h(d,new AbortController).then(v=>{this._updateDiff(v.data,s)}).catch(v=>{v&&this.fire(new i.j(v))})}else typeof E=="object"&&this._updateDiff(E,s)}_updateDiff(E,s){try{this.style.setState(E,s)&&this._update(!0)}catch(d){i.w(`Unable to perform style diff: ${d.message||d.error||d}.  Rebuilding the style from scratch.`),this._updateStyle(E,s)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():i.w("There is no style added to the map.")}addSource(E,s){return this._lazyInitEmptyStyle(),this.style.addSource(E,s),this._update(!0)}isSourceLoaded(E){let s=this.style&&this.style.sourceCaches[E];if(s!==void 0)return s.loaded();this.fire(new i.j(new Error(`There is no source with ID '${E}'`)))}setTerrain(E){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),E){let s=this.style.sourceCaches[E.source];if(!s)throw new Error(`cannot load terrain, because there exists no source with ID: ${E.source}`);this.terrain===null&&s.reload();for(let d in this.style._layers){let v=this.style._layers[d];v.type==="hillshade"&&v.source===E.source&&i.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new RS(this.painter,s,E),this.painter.renderToTexture=new y4(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=d=>{d.dataType==="style"?this.terrain.sourceCache.freeRtt():d.dataType==="source"&&d.tile&&(d.sourceId!==E.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(d.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new i.k("terrain",{terrain:E})),this}getTerrain(){var E,s;return(s=(E=this.terrain)===null||E===void 0?void 0:E.options)!==null&&s!==void 0?s:null}areTilesLoaded(){let E=this.style&&this.style.sourceCaches;for(let s in E){let d=E[s]._tiles;for(let v in d){let y=d[v];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(E){return this.style.removeSource(E),this._update(!0)}getSource(E){return this.style.getSource(E)}addImage(E,s,d={}){let{pixelRatio:v=1,sdf:y=!1,stretchX:w,stretchY:D,content:O,textFitWidth:R,textFitHeight:F}=d;if(this._lazyInitEmptyStyle(),!(s instanceof HTMLImageElement||i.b(s))){if(s.width===void 0||s.height===void 0)return this.fire(new i.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:V,height:G,data:Q}=s,ie=s;return this.style.addImage(E,{data:new i.R({width:V,height:G},new Uint8Array(Q)),pixelRatio:v,stretchX:w,stretchY:D,content:O,textFitWidth:R,textFitHeight:F,sdf:y,version:0,userImage:ie}),ie.onAdd&&ie.onAdd(this,E),this}}{let{width:V,height:G,data:Q}=h.getImageData(s);this.style.addImage(E,{data:new i.R({width:V,height:G},Q),pixelRatio:v,stretchX:w,stretchY:D,content:O,textFitWidth:R,textFitHeight:F,sdf:y,version:0})}}updateImage(E,s){let d=this.style.getImage(E);if(!d)return this.fire(new i.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let v=s instanceof HTMLImageElement||i.b(s)?h.getImageData(s):s,{width:y,height:w,data:D}=v;if(y===void 0||w===void 0)return this.fire(new i.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==d.data.width||w!==d.data.height)return this.fire(new i.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let O=!(s instanceof HTMLImageElement||i.b(s));return d.data.replace(D,O),this.style.updateImage(E,d),this}getImage(E){return this.style.getImage(E)}hasImage(E){return E?!!this.style.getImage(E):(this.fire(new i.j(new Error("Missing required image id"))),!1)}removeImage(E){this.style.removeImage(E)}loadImage(E){return k.getImage(this._requestManager.transformRequest(E,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(E,s){return this._lazyInitEmptyStyle(),this.style.addLayer(E,s),this._update(!0)}moveLayer(E,s){return this.style.moveLayer(E,s),this._update(!0)}removeLayer(E){return this.style.removeLayer(E),this._update(!0)}getLayer(E){return this.style.getLayer(E)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(E,s,d){return this.style.setLayerZoomRange(E,s,d),this._update(!0)}setFilter(E,s,d={}){return this.style.setFilter(E,s,d),this._update(!0)}getFilter(E){return this.style.getFilter(E)}setPaintProperty(E,s,d,v={}){return this.style.setPaintProperty(E,s,d,v),this._update(!0)}getPaintProperty(E,s){return this.style.getPaintProperty(E,s)}setLayoutProperty(E,s,d,v={}){return this.style.setLayoutProperty(E,s,d,v),this._update(!0)}getLayoutProperty(E,s){return this.style.getLayoutProperty(E,s)}setGlyphs(E,s={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(E,s),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(E,s,d={}){return this._lazyInitEmptyStyle(),this.style.addSprite(E,s,d,v=>{v||this._update(!0)}),this}removeSprite(E){return this._lazyInitEmptyStyle(),this.style.removeSprite(E),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(E,s={}){return this._lazyInitEmptyStyle(),this.style.setSprite(E,s,d=>{d||this._update(!0)}),this}setLight(E,s={}){return this._lazyInitEmptyStyle(),this.style.setLight(E,s),this._update(!0)}getLight(){return this.style.getLight()}setSky(E){return this._lazyInitEmptyStyle(),this.style.setSky(E),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(E,s){return this.style.setFeatureState(E,s),this._update()}removeFeatureState(E,s){return this.style.removeFeatureState(E,s),this._update()}getFeatureState(E){return this.style.getFeatureState(E)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let E=0,s=0;return this._container&&(E=this._container.clientWidth||400,s=this._container.clientHeight||300),[E,s]}_setupContainer(){let E=this._container;E.classList.add("maplibregl-map");let s=this._canvasContainer=g.create("div","maplibregl-canvas-container",E);this._interactive&&s.classList.add("maplibregl-interactive"),this._canvas=g.create("canvas","maplibregl-canvas",s),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let d=this._containerDimensions(),v=this._getClampedPixelRatio(d[0],d[1]);this._resizeCanvas(d[0],d[1],v);let y=this._controlContainer=g.create("div","maplibregl-control-container",E),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(D=>{w[D]=g.create("div",`maplibregl-ctrl-${D} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(E,s,d){this._canvas.width=Math.floor(d*E),this._canvas.height=Math.floor(d*s),this._canvas.style.width=`${E}px`,this._canvas.style.height=`${s}px`}_setupPainter(){let E={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},s=null;this._canvas.addEventListener("webglcontextcreationerror",v=>{s={requestedAttributes:E},v&&(s.statusMessage=v.statusMessage,s.type=v.type)},{once:!0});let d=this._canvas.getContext("webgl2",E)||this._canvas.getContext("webgl",E);if(!d){let v="Failed to initialize WebGL";throw s?(s.message=v,new Error(JSON.stringify(s))):new Error(v)}this.painter=new c_(d,this.transform),x.testSupport(d)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(E){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||E,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(E){return this._update(),this._renderTaskQueue.add(E)}_cancelRenderFrame(E){this._renderTaskQueue.remove(E)}_render(E){let s=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(E),this._removed)return;let d=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let y=this.transform.zoom,w=h.now();this.style.zoomHistory.update(y,w);let D=new i.z(y,{now:w,fadeDuration:s,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),O=D.crossFadingFactor();O===1&&O===this._crossFadingFactor||(d=!0,this._crossFadingFactor=O),this.style.update(D)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,s,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:s,showPadding:this.showPadding}),this.fire(new i.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,i.bf.mark(i.bg.load),this.fire(new i.k("load"))),this.style&&(this.style.hasTransitions()||d)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let v=this._sourcesDirty||this._styleDirty||this._placementDirty;return v||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new i.k("idle")),!this._loaded||this._fullyLoaded||v||(this._fullyLoaded=!0,i.bf.mark(i.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var E;this._hash&&this._hash.remove();for(let d of this._controls)d.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),k.removeThrottleControl(this._imageQueueHandle),(E=this._resizeObserver)===null||E===void 0||E.disconnect();let s=this.painter.context.gl.getExtension("WEBGL_lose_context");s!=null&&s.loseContext&&s.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),g.remove(this._canvasContainer),g.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),i.bf.clearMetrics(),this._removed=!0,this.fire(new i.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,h.frameAsync(this._frameRequest).then(E=>{i.bf.frame(E),this._frameRequest=null,this._render(E)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(E){this._showTileBoundaries!==E&&(this._showTileBoundaries=E,this._update())}get showPadding(){return!!this._showPadding}set showPadding(E){this._showPadding!==E&&(this._showPadding=E,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(E){this._showCollisionBoxes!==E&&(this._showCollisionBoxes=E,E?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(E){this._showOverdrawInspector!==E&&(this._showOverdrawInspector=E,this._update())}get repaint(){return!!this._repaint}set repaint(E){this._repaint!==E&&(this._repaint=E,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(E){this._vertices=E,this._update()}get version(){return _4}getCameraTargetElevation(){return this.transform.elevation}},o.MapMouseEvent=Ma,o.MapTouchEvent=Xd,o.MapWheelEvent=p4,o.Marker=b_,o.NavigationControl=class{constructor(E){this._updateZoomButtons=()=>{let s=this._map.getZoom(),d=s===this._map.getMaxZoom(),v=s===this._map.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},this._rotateCompassArrow=()=>{let s=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=s},this._setButtonTitle=(s,d)=>{let v=this._map._getUIString(`NavigationControl.${d}`);s.title=v,s.setAttribute("aria-label",v)},this.options=i.e({},DF,E),this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",s=>s.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",s=>this._map.zoomIn({},{originalEvent:s})),g.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",s=>this._map.zoomOut({},{originalEvent:s})),g.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",s=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:s}):this._map.resetNorth({},{originalEvent:s})}),this._compassIcon=g.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(E){return this._map=E,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new NF(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(E,s){let d=g.create("button",E,this._container);return d.type="button",d.addEventListener("click",s),d}},o.Popup=class extends i.E{constructor(E){super(),this.remove=()=>(this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new i.k("close"))),this),this._onMouseUp=s=>{this._update(s.point)},this._onMouseMove=s=>{this._update(s.point)},this._onDrag=s=>{this._update(s.point)},this._update=s=>{var d;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=g.create("div","maplibregl-popup",this._map.getContainer()),this._tip=g.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let O of this.options.className.split(" "))this._container.classList.add(O);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?Do(this._lngLat,this._flatPos,this._map.transform):(d=this._lngLat)===null||d===void 0?void 0:d.wrap(),this._trackPointer&&!s)return;let v=this._flatPos=this._pos=this._trackPointer&&s?s:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&s?s:this._map.transform.locationPoint(this._lngLat));let y=this.options.anchor,w=E_(this.options.offset);if(!y){let O=this._container.offsetWidth,R=this._container.offsetHeight,F;F=v.y+w.bottom.y<R?["top"]:v.y>this._map.transform.height-R?["bottom"]:[],v.x<O/2?F.push("left"):v.x>this._map.transform.width-O/2&&F.push("right"),y=F.length===0?"bottom":F.join("-")}let D=v.add(w[y]);this.options.subpixelPositioning||(D=D.round()),g.setTransform(this._container,`${Hm[y]} translate(${D.x}px,${D.y}px)`),x_(this._container,y,"popup")},this._onClose=()=>{this.remove()},this.options=i.e(Object.create(Ar),E)}addTo(E){return this._map&&this.remove(),this._map=E,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new i.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(E){return this._lngLat=i.N.convert(E),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(E){return this.setDOMContent(document.createTextNode(E))}setHTML(E){let s=document.createDocumentFragment(),d=document.createElement("body"),v;for(d.innerHTML=E;v=d.firstChild,v;)s.appendChild(v);return this.setDOMContent(s)}getMaxWidth(){var E;return(E=this._container)===null||E===void 0?void 0:E.style.maxWidth}setMaxWidth(E){return this.options.maxWidth=E,this._update(),this}setDOMContent(E){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(E),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(E){return this._container&&this._container.classList.add(E),this}removeClassName(E){return this._container&&this._container.classList.remove(E),this}setOffset(E){return this.options.offset=E,this._update(),this}toggleClassName(E){if(this._container)return this._container.classList.toggle(E)}setSubpixelPositioning(E){this.options.subpixelPositioning=E}_createCloseButton(){this.options.closeButton&&(this._closeButton=g.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let E=this._container.querySelector(w_);E&&E.focus()}},o.RasterDEMTileSource=ce,o.RasterTileSource=Ct,o.ScaleControl=class{constructor(E){this._onMove=()=>{My(this._map,this._container,this.options)},this.setUnit=s=>{this.options.unit=s,My(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},fc),E)}getDefaultPosition(){return"bottom-left"}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-scale",E.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},o.ScrollZoomHandler=ku,o.Style=Y1,o.TerrainControl=class{constructor(E){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=E}onAdd(E){return this._map=E,this._container=g.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=g.create("button","maplibregl-ctrl-terrain",this._container),g.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){g.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},o.TwoFingersTouchPitchHandler=Fm,o.TwoFingersTouchRotateHandler=DS,o.TwoFingersTouchZoomHandler=CS,o.TwoFingersTouchZoomRotateHandler=OS,o.VectorTileSource=Wt,o.VideoSource=yt,o.addSourceType=(E,s)=>i._(void 0,void 0,void 0,function*(){if(Yt(E))throw new Error(`A source type called "${E}" already exists.`);((d,v)=>{_t[d]=v})(E,s)}),o.clearPrewarmedResources=function(){let E=ze;E&&(E.isPreloaded()&&E.numActive()===1?(E.release(Ze),ze=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},o.getMaxParallelImageRequests=function(){return i.a.MAX_PARALLEL_IMAGE_REQUESTS},o.getRTLTextPluginStatus=function(){return pa().getRTLTextPluginStatus()},o.getVersion=function(){return zS},o.getWorkerCount=function(){return tt.workerCount},o.getWorkerUrl=function(){return i.a.WORKER_URL},o.importScriptInWorkers=function(E){return at().broadcast("IS",E)},o.prewarm=function(){We().acquire(Ze)},o.setMaxParallelImageRequests=function(E){i.a.MAX_PARALLEL_IMAGE_REQUESTS=E},o.setRTLTextPlugin=function(E,s){return pa().setRTLTextPlugin(E,s)},o.setWorkerCount=function(E){tt.workerCount=E},o.setWorkerUrl=function(E){i.a.WORKER_URL=E}});var n=e;return n})});var n9e=M((can,r9e)=>{var MQ=1/0,Ngr=17976931348623157e292,YFe=NaN,Ogr="[object Symbol]",Lgr=/^\s+|\s+$/g,Pgr=/^[-+]0x[0-9a-f]+$/i,kgr=/^0b[01]+$/i,Rgr=/^0o[0-7]+$/i,jgr=parseInt,qgr=typeof global=="object"&&global&&global.Object===Object&&global,zgr=typeof self=="object"&&self&&self.Object===Object&&self,Fgr=qgr||zgr||Function("return this")(),Ugr=Object.prototype,Bgr=Ugr.toString,ZFe=Fgr.Symbol,Vgr=Math.min,KFe=ZFe?ZFe.prototype:void 0,XFe=KFe?KFe.toString:void 0;function Ggr(e){if(typeof e=="string")return e;if(e9e(e))return XFe?XFe.call(e):"";var t=e+"";return t=="0"&&1/e==-MQ?"-0":t}function Hgr(e){var t=Math[e];return function(r,n){if(r=t9e(r),n=Vgr(Ygr(n),292),n){var o=(QFe(r)+"e").split("e"),i=t(o[0]+"e"+(+o[1]+n));return o=(QFe(i)+"e").split("e"),+(o[0]+"e"+(+o[1]-n))}return t(r)}}function JFe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Wgr(e){return!!e&&typeof e=="object"}function e9e(e){return typeof e=="symbol"||Wgr(e)&&Bgr.call(e)==Ogr}function $gr(e){if(!e)return e===0?e:0;if(e=t9e(e),e===MQ||e===-MQ){var t=e<0?-1:1;return t*Ngr}return e===e?e:0}function Ygr(e){var t=$gr(e),r=t%1;return t===t?r?t-r:t:0}function t9e(e){if(typeof e=="number")return e;if(e9e(e))return YFe;if(JFe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=JFe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Lgr,"");var r=kgr.test(e);return r||Rgr.test(e)?jgr(e.slice(2),r?2:8):Pgr.test(e)?YFe:+e}function QFe(e){return e==null?"":Ggr(e)}var Zgr=Hgr("round");r9e.exports=Zgr});var A9e=M((isn,C9e)=>{"use strict";C9e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`)});var P9e=M((asn,L9e)=>{"use strict";var O9e="%[a-f0-9]{2}",D9e=new RegExp("("+O9e+")|([^%]+?)","gi"),N9e=new RegExp("("+O9e+")+","gi");function NQ(e,t){try{return[decodeURIComponent(e.join(""))]}catch(o){}if(e.length===1)return e;t=t||1;var r=e.slice(0,t),n=e.slice(t);return Array.prototype.concat.call([],NQ(r),NQ(n))}function evr(e){try{return decodeURIComponent(e)}catch(n){for(var t=e.match(D9e)||[],r=1;r<t.length;r++)e=NQ(t,r).join(""),t=e.match(D9e)||[];return e}}function tvr(e){for(var t={"%FE%FF":"\uFFFD\uFFFD","%FF%FE":"\uFFFD\uFFFD"},r=N9e.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(u){var n=evr(r[0]);n!==r[0]&&(t[r[0]]=n)}r=N9e.exec(e)}t["%C2"]="\uFFFD";for(var o=Object.keys(t),i=0;i<o.length;i++){var a=o[i];e=e.replace(new RegExp(a,"g"),t[a])}return e}L9e.exports=function(e){if(typeof e!="string")throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return tvr(e)}}});var R9e=M((ssn,k9e)=>{"use strict";k9e.exports=(e,t)=>{if(!(typeof e=="string"&&typeof t=="string"))throw new TypeError("Expected the arguments to be of type `string`");if(t==="")return[e];let r=e.indexOf(t);return r===-1?[e]:[e.slice(0,r),e.slice(r+t.length)]}});var q9e=M((lsn,j9e)=>{"use strict";j9e.exports=function(e,t){for(var r={},n=Object.keys(e),o=Array.isArray(t),i=0;i<n.length;i++){var a=n[i],u=e[a];(o?t.indexOf(a)!==-1:t(a,u,e))&&(r[a]=u)}return r}});var wk=M(du=>{"use strict";var rvr=A9e(),nvr=P9e(),F9e=R9e(),ovr=q9e(),ivr=e=>e==null,OQ=Symbol("encodeFragmentIdentifier");function avr(e){switch(e.arrayFormat){case"index":return t=>(r,n)=>{let o=r.length;return n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Gi(t,e),"[",o,"]"].join("")]:[...r,[Gi(t,e),"[",Gi(o,e),"]=",Gi(n,e)].join("")]};case"bracket":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Gi(t,e),"[]"].join("")]:[...r,[Gi(t,e),"[]=",Gi(n,e)].join("")];case"colon-list-separator":return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,[Gi(t,e),":list="].join("")]:[...r,[Gi(t,e),":list=",Gi(n,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t=e.arrayFormat==="bracket-separator"?"[]=":"=";return r=>(n,o)=>o===void 0||e.skipNull&&o===null||e.skipEmptyString&&o===""?n:(o=o===null?"":o,n.length===0?[[Gi(r,e),t,Gi(o,e)].join("")]:[[n,Gi(o,e)].join(e.arrayFormatSeparator)])}default:return t=>(r,n)=>n===void 0||e.skipNull&&n===null||e.skipEmptyString&&n===""?r:n===null?[...r,Gi(t,e)]:[...r,[Gi(t,e),"=",Gi(n,e)].join("")];}}function svr(e){let t;switch(e.arrayFormat){case"index":return(r,n,o)=>{if(t=/\[(\d*)\]$/.exec(r),r=r.replace(/\[\d*\]$/,""),!t){o[r]=n;return}o[r]===void 0&&(o[r]={}),o[r][t[1]]=n};case"bracket":return(r,n,o)=>{if(t=/(\[\])$/.exec(r),r=r.replace(/\[\]$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"colon-list-separator":return(r,n,o)=>{if(t=/(:list)$/.exec(r),r=r.replace(/:list$/,""),!t){o[r]=n;return}if(o[r]===void 0){o[r]=[n];return}o[r]=[].concat(o[r],n)};case"comma":case"separator":return(r,n,o)=>{let i=typeof n=="string"&&n.includes(e.arrayFormatSeparator),a=typeof n=="string"&&!i&&Rh(n,e).includes(e.arrayFormatSeparator);n=a?Rh(n,e):n;let u=i||a?n.split(e.arrayFormatSeparator).map(p=>Rh(p,e)):n===null?n:Rh(n,e);o[r]=u};case"bracket-separator":return(r,n,o)=>{let i=/(\[\])$/.test(r);if(r=r.replace(/\[\]$/,""),!i){o[r]=n&&Rh(n,e);return}let a=n===null?[]:n.split(e.arrayFormatSeparator).map(u=>Rh(u,e));if(o[r]===void 0){o[r]=a;return}o[r]=[].concat(o[r],a)};default:return(r,n,o)=>{if(o[r]===void 0){o[r]=n;return}o[r]=[].concat(o[r],n)};}}function U9e(e){if(typeof e!="string"||e.length!==1)throw new TypeError("arrayFormatSeparator must be single character string")}function Gi(e,t){return t.encode?t.strict?rvr(e):encodeURIComponent(e):e}function Rh(e,t){return t.decode?nvr(e):e}function B9e(e){return Array.isArray(e)?e.sort():typeof e=="object"?B9e(Object.keys(e)).sort((t,r)=>Number(t)-Number(r)).map(t=>e[t]):e}function V9e(e){let t=e.indexOf("#");return t!==-1&&(e=e.slice(0,t)),e}function lvr(e){let t="",r=e.indexOf("#");return r!==-1&&(t=e.slice(r)),t}function G9e(e){e=V9e(e);let t=e.indexOf("?");return t===-1?"":e.slice(t+1)}function z9e(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&typeof e=="string"&&e.trim()!==""?e=Number(e):t.parseBooleans&&e!==null&&(e.toLowerCase()==="true"||e.toLowerCase()==="false")&&(e=e.toLowerCase()==="true"),e}function H9e(e,t){t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t),U9e(t.arrayFormatSeparator);let r=svr(t),n=Object.create(null);if(typeof e!="string"||(e=e.trim().replace(/^[?#&]/,""),!e))return n;for(let o of e.split("&")){if(o==="")continue;let[i,a]=F9e(t.decode?o.replace(/\+/g," "):o,"=");a=a===void 0?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:Rh(a,t),r(Rh(i,t),a,n)}for(let o of Object.keys(n)){let i=n[o];if(typeof i=="object"&&i!==null)for(let a of Object.keys(i))i[a]=z9e(i[a],t);else n[o]=z9e(i,t)}return t.sort===!1?n:(t.sort===!0?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((o,i)=>{let a=n[i];return a&&typeof a=="object"&&!Array.isArray(a)?o[i]=B9e(a):o[i]=a,o},Object.create(null))}du.extract=G9e;du.parse=H9e;du.stringify=(e,t)=>{if(!e)return"";t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t),U9e(t.arrayFormatSeparator);let r=a=>t.skipNull&&ivr(e[a])||t.skipEmptyString&&e[a]==="",n=avr(t),o={};for(let a of Object.keys(e))r(a)||(o[a]=e[a]);let i=Object.keys(o);return t.sort!==!1&&i.sort(t.sort),i.map(a=>{let u=e[a];return u===void 0?"":u===null?Gi(a,t):Array.isArray(u)?u.length===0&&t.arrayFormat==="bracket-separator"?Gi(a,t)+"[]":u.reduce(n(a),[]).join("&"):Gi(a,t)+"="+Gi(u,t)}).filter(a=>a.length>0).join("&")};du.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[r,n]=F9e(e,"#");return Object.assign({url:r.split("?")[0]||"",query:H9e(G9e(e),t)},t&&t.parseFragmentIdentifier&&n?{fragmentIdentifier:Rh(n,t)}:{})};du.stringifyUrl=(e,t)=>{t=Object.assign({encode:!0,strict:!0,[OQ]:!0},t);let r=V9e(e.url).split("?")[0]||"",n=du.extract(e.url),o=du.parse(n,{sort:!1}),i=Object.assign(o,e.query),a=du.stringify(i,t);a&&(a=`?${a}`);let u=lvr(e.url);return e.fragmentIdentifier&&(u=`#${t[OQ]?Gi(e.fragmentIdentifier,t):e.fragmentIdentifier}`),`${r}${a}${u}`};du.pick=(e,t,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[OQ]:!1},r);let{url:n,query:o,fragmentIdentifier:i}=du.parseUrl(e,r);return du.stringifyUrl({url:n,query:ovr(o,t),fragmentIdentifier:i},r)};du.exclude=(e,t,r)=>{let n=Array.isArray(t)?o=>!t.includes(o):(o,i)=>!t(o,i);return du.pick(e,n,r)}});var cC=M((_mn,sUe)=>{var qyr=sUe.exports=typeof window!="undefined"&&window.Math==Math?window:typeof self!="undefined"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=qyr)});var wv=M((xmn,lUe)=>{var zyr=lUe.exports={version:"2.6.12"};typeof __e=="number"&&(__e=zyr)});var cUe=M((bmn,uUe)=>{uUe.exports=function(e){if(typeof e!="function")throw TypeError(e+" is not a function!");return e}});var eee=M((wmn,fUe)=>{var Fyr=cUe();fUe.exports=function(e,t,r){if(Fyr(e),t===void 0)return e;switch(r){case 1:return function(n){return e.call(t,n)};case 2:return function(n,o){return e.call(t,n,o)};case 3:return function(n,o,i){return e.call(t,n,o,i)};}return function(){return e.apply(t,arguments)}}});var fC=M((Emn,pUe)=>{pUe.exports=function(e){return typeof e=="object"?e!==null:typeof e=="function"}});var pC=M((Smn,dUe)=>{var Uyr=fC();dUe.exports=function(e){if(!Uyr(e))throw TypeError(e+" is not an object!");return e}});var SR=M((Imn,hUe)=>{hUe.exports=function(e){try{return!!e()}catch(t){return!0}}});var Ev=M((Tmn,mUe)=>{mUe.exports=!SR()(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7})});var ree=M((Mmn,vUe)=>{var gUe=fC(),tee=cC().document,Byr=gUe(tee)&&gUe(tee.createElement);vUe.exports=function(e){return Byr?tee.createElement(e):{}}});var nee=M((Cmn,yUe)=>{yUe.exports=!Ev()&&!SR()(function(){return Object.defineProperty(ree()("div"),"a",{get:function(){return 7}}).a!=7})});var oee=M((Amn,_Ue)=>{var IR=fC();_Ue.exports=function(e,t){if(!IR(e))return e;var r,n;if(t&&typeof(r=e.toString)=="function"&&!IR(n=r.call(e))||typeof(r=e.valueOf)=="function"&&!IR(n=r.call(e))||!t&&typeof(r=e.toString)=="function"&&!IR(n=r.call(e)))return n;throw TypeError("Can't convert object to primitive value")}});var iee=M(bUe=>{var xUe=pC(),Vyr=nee(),Gyr=oee(),Hyr=Object.defineProperty;bUe.f=Ev()?Object.defineProperty:function(t,r,n){if(xUe(t),r=Gyr(r,!0),xUe(n),Vyr)try{return Hyr(t,r,n)}catch(o){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[r]=n.value),t}});var aee=M((Nmn,wUe)=>{wUe.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var SUe=M((Omn,EUe)=>{var Wyr=iee(),$yr=aee();EUe.exports=Ev()?function(e,t,r){return Wyr.f(e,t,$yr(1,r))}:function(e,t,r){return e[t]=r,e}});var TR=M((Lmn,IUe)=>{var Yyr={}.hasOwnProperty;IUe.exports=function(e,t){return Yyr.call(e,t)}});var dw=M((Pmn,MUe)=>{var MR=cC(),see=wv(),TUe=eee(),Zyr=SUe(),Kyr=TR(),CR="prototype",Ks=function(e,t,r){var n=e&Ks.F,o=e&Ks.G,i=e&Ks.S,a=e&Ks.P,u=e&Ks.B,p=e&Ks.W,h=o?see:see[t]||(see[t]={}),g=h[CR],x=o?MR:i?MR[t]:(MR[t]||{})[CR],b,T,A;o&&(r=t);for(b in r)T=!n&&x&&x[b]!==void 0,!(T&&Kyr(h,b))&&(A=T?x[b]:r[b],h[b]=o&&typeof x[b]!="function"?r[b]:u&&T?TUe(A,MR):p&&x[b]==A?function(L){var P=function(k,q,U){if(this instanceof L){switch(arguments.length){case 0:return new L;case 1:return new L(k);case 2:return new L(k,q);}return new L(k,q,U)}return L.apply(this,arguments)};return P[CR]=L[CR],P}(A):a&&typeof A=="function"?TUe(Function.call,A):A,a&&((h.virtual||(h.virtual={}))[b]=A,e&Ks.R&&g&&!g[b]&&Zyr(g,b,A)))};Ks.F=1;Ks.G=2;Ks.S=4;Ks.P=8;Ks.B=16;Ks.W=32;Ks.U=64;Ks.R=128;MUe.exports=Ks});var AUe=M((kmn,CUe)=>{var Xyr={}.toString;CUe.exports=function(e){return Xyr.call(e).slice(8,-1)}});var lee=M((Rmn,DUe)=>{var Jyr=AUe();DUe.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return Jyr(e)=="String"?e.split(""):Object(e)}});var uee=M((jmn,NUe)=>{NUe.exports=function(e){if(e==null)throw TypeError("Can't call method on  "+e);return e}});var dC=M((qmn,OUe)=>{var Qyr=lee(),e0r=uee();OUe.exports=function(e){return Qyr(e0r(e))}});var cee=M((zmn,LUe)=>{var t0r=Math.ceil,r0r=Math.floor;LUe.exports=function(e){return isNaN(e=+e)?0:(e>0?r0r:t0r)(e)}});var kUe=M((Fmn,PUe)=>{var n0r=cee(),o0r=Math.min;PUe.exports=function(e){return e>0?o0r(n0r(e),9007199254740991):0}});var jUe=M((Umn,RUe)=>{var i0r=cee(),a0r=Math.max,s0r=Math.min;RUe.exports=function(e,t){return e=i0r(e),e<0?a0r(e+t,0):s0r(e,t)}});var zUe=M((Bmn,qUe)=>{var l0r=dC(),u0r=kUe(),c0r=jUe();qUe.exports=function(e){return function(t,r,n){var o=l0r(t),i=u0r(o.length),a=c0r(n,i),u;if(e&&r!=r){for(;i>a;)if(u=o[a++],u!=u)return!0}else for(;i>a;a++)if((e||a in o)&&o[a]===r)return e||a||0;return!e&&-1}}});var UUe=M((Vmn,FUe)=>{FUe.exports=!0});var WUe=M((Gmn,HUe)=>{var f0r=wv(),BUe=cC(),VUe="__core-js_shared__",GUe=BUe[VUe]||(BUe[VUe]={});(HUe.exports=function(e,t){return GUe[e]||(GUe[e]=t!==void 0?t:{})})("versions",[]).push({version:f0r.version,mode:UUe()?"pure":"global",copyright:"\xA9 2020 Denis Pushkarev (zloirock.ru)"})});var YUe=M((Hmn,$Ue)=>{var p0r=0,d0r=Math.random();$Ue.exports=function(e){return"Symbol(".concat(e===void 0?"":e,")_",(++p0r+d0r).toString(36))}});var fee=M((Wmn,KUe)=>{var ZUe=WUe()("keys"),h0r=YUe();KUe.exports=function(e){return ZUe[e]||(ZUe[e]=h0r(e))}});var QUe=M(($mn,JUe)=>{var XUe=TR(),m0r=dC(),g0r=zUe()(!1),v0r=fee()("IE_PROTO");JUe.exports=function(e,t){var r=m0r(e),n=0,o=[],i;for(i in r)i!=v0r&&XUe(r,i)&&o.push(i);for(;t.length>n;)XUe(r,i=t[n++])&&(~g0r(o,i)||o.push(i));return o}});var pee=M((Ymn,eBe)=>{eBe.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")});var AR=M((Zmn,tBe)=>{var y0r=QUe(),_0r=pee();tBe.exports=Object.keys||function(t){return y0r(t,_0r)}});var nBe=M(rBe=>{rBe.f=Object.getOwnPropertySymbols});var DR=M(oBe=>{oBe.f={}.propertyIsEnumerable});var aBe=M((Jmn,iBe)=>{var x0r=uee();iBe.exports=function(e){return Object(x0r(e))}});var uBe=M((Qmn,lBe)=>{"use strict";var b0r=Ev(),sBe=AR(),w0r=nBe(),E0r=DR(),S0r=aBe(),I0r=lee(),NR=Object.assign;lBe.exports=!NR||SR()(function(){var e={},t={},r=Symbol(),n="abcdefghijklmnopqrst";return e[r]=7,n.split("").forEach(function(o){t[o]=o}),NR({},e)[r]!=7||Object.keys(NR({},t)).join("")!=n})?function(t,r){for(var n=S0r(t),o=arguments.length,i=1,a=w0r.f,u=E0r.f;o>i;)for(var p=I0r(arguments[i++]),h=a?sBe(p).concat(a(p)):sBe(p),g=h.length,x=0,b;g>x;)b=h[x++],(!b0r||u.call(p,b))&&(n[b]=p[b]);return n}:NR});var cBe=M(()=>{var dee=dw();dee(dee.S+dee.F,"Object",{assign:uBe()})});var pBe=M((rgn,fBe)=>{cBe();fBe.exports=wv().Object.assign});var hBe=M((ogn,dBe)=>{var T0r=iee(),M0r=pC(),C0r=AR();dBe.exports=Ev()?Object.defineProperties:function(t,r){M0r(t);for(var n=C0r(r),o=n.length,i=0,a;o>i;)T0r.f(t,a=n[i++],r[a]);return t}});var vBe=M((ign,gBe)=>{var mBe=cC().document;gBe.exports=mBe&&mBe.documentElement});var xBe=M((agn,_Be)=>{var A0r=pC(),D0r=hBe(),yBe=pee(),N0r=fee()("IE_PROTO"),mee=function(){},gee="prototype",OR=function(){var e=ree()("iframe"),t=yBe.length,r="<",n=">",o;for(e.style.display="none",vBe().appendChild(e),e.src="javascript:",o=e.contentWindow.document,o.open(),o.write(r+"script"+n+"document.F=Object"+r+"/script"+n),o.close(),OR=o.F;t--;)delete OR[gee][yBe[t]];return OR()};_Be.exports=Object.create||function(t,r){var n;return t!==null?(mee[gee]=A0r(t),n=new mee,mee[gee]=null,n[N0r]=t):n=OR(),r===void 0?n:D0r(n,r)}});var wBe=M(()=>{var bBe=dw();bBe(bBe.S,"Object",{create:xBe()})});var SBe=M((ugn,EBe)=>{wBe();var O0r=wv().Object;EBe.exports=function(t,r){return O0r.create(t,r)}});var MBe=M(TBe=>{var L0r=DR(),P0r=aee(),k0r=dC(),R0r=oee(),j0r=TR(),q0r=nee(),IBe=Object.getOwnPropertyDescriptor;TBe.f=Ev()?IBe:function(t,r){if(t=k0r(t),r=R0r(r,!0),q0r)try{return IBe(t,r)}catch(n){}if(j0r(t,r))return P0r(!L0r.f.call(t,r),t[r])}});var DBe=M((fgn,ABe)=>{var z0r=fC(),F0r=pC(),CBe=function(e,t){if(F0r(e),!z0r(t)&&t!==null)throw TypeError(t+": can't set as prototype!")};ABe.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=eee()(Function.call,MBe().f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(n){t=!0}return function(o,i){return CBe(o,i),t?o.__proto__=i:r(o,i),o}}({},!1):void 0),check:CBe}});var OBe=M(()=>{var NBe=dw();NBe(NBe.S,"Object",{setPrototypeOf:DBe().set})});var PBe=M((hgn,LBe)=>{OBe();LBe.exports=wv().Object.setPrototypeOf});var Zn=M((_gn,PR)=>{(function(){"use strict";var e={}.hasOwnProperty;function t(){for(var o="",i=0;i<arguments.length;i++){var a=arguments[i];a&&(o=n(o,r(a)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return t.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var i="";for(var a in o)e.call(o,a)&&o[a]&&(i=n(i,a));return i}function n(o,i){return i?o?o+" "+i:o+i:o}typeof PR!="undefined"&&PR.exports?(t.default=t,PR.exports=t):typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("classnames",[],function(){return t}):window.classNames=t})()});var kR=M((wgn,RBe)=>{"use strict";var U0r=function(e,t,r,n,o,i,a,u){if(!e){var p;if(t===void 0)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var h=[r,n,o,i,a,u],g=0;p=new Error(t.replace(/%s/g,function(){return h[g++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};RBe.exports=U0r});var bee=M(xee=>{"use strict";Object.defineProperty(xee,"__esModule",{value:!0});function FBe(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);e!=null&&this.setState(e)}function UBe(e){function t(r){var n=this.constructor.getDerivedStateFromProps(e,r);return n!=null?n:null}this.setState(t.bind(this))}function BBe(e,t){try{var r=this.props,n=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(r,n)}finally{this.props=r,this.state=n}}FBe.__suppressDeprecationWarning=!0;UBe.__suppressDeprecationWarning=!0;BBe.__suppressDeprecationWarning=!0;function V0r(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if(typeof e.getDerivedStateFromProps!="function"&&typeof t.getSnapshotBeforeUpdate!="function")return e;var r=null,n=null,o=null;if(typeof t.componentWillMount=="function"?r="componentWillMount":typeof t.UNSAFE_componentWillMount=="function"&&(r="UNSAFE_componentWillMount"),typeof t.componentWillReceiveProps=="function"?n="componentWillReceiveProps":typeof t.UNSAFE_componentWillReceiveProps=="function"&&(n="UNSAFE_componentWillReceiveProps"),typeof t.componentWillUpdate=="function"?o="componentWillUpdate":typeof t.UNSAFE_componentWillUpdate=="function"&&(o="UNSAFE_componentWillUpdate"),r!==null||n!==null||o!==null){var i=e.displayName||e.name,a=typeof e.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+i+" uses "+a+" but also contains the following legacy lifecycles:"+(r!==null?`
  `+r:"")+(n!==null?`
  `+n:"")+(o!==null?`
  `+o:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof e.getDerivedStateFromProps=="function"&&(t.componentWillMount=FBe,t.componentWillReceiveProps=UBe),typeof t.getSnapshotBeforeUpdate=="function"){if(typeof t.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=BBe;var u=t.componentDidUpdate;t.componentDidUpdate=function(h,g,x){var b=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:x;u.call(this,h,g,b)}}return e}xee.polyfill=V0r});var wee=M((Ugn,HBe)=>{var H0r=Ev(),W0r=AR(),$0r=dC(),Y0r=DR().f;HBe.exports=function(e){return function(t){for(var r=$0r(t),n=W0r(r),o=n.length,i=0,a=[],u;o>i;)u=n[i++],(!H0r||Y0r.call(r,u))&&a.push(e?[u,r[u]]:r[u]);return a}}});var $Be=M(()=>{var WBe=dw(),Z0r=wee()(!0);WBe(WBe.S,"Object",{entries:function(t){return Z0r(t)}})});var ZBe=M((Ggn,YBe)=>{$Be();YBe.exports=wv().Object.entries});var Eee=M((Hgn,KBe)=>{KBe.exports=ZBe()});var FR=M((zR,tVe)=>{"use strict";Object.defineProperty(zR,"__esModule",{value:!0});zR.default=o1r;function o1r(e){function t(n,o,i,a,u,p){var h=a||"<<anonymous>>",g=p||i;if(o[i]==null)return n?new Error("Required "+u+" `"+g+"` was not specified "+("in `"+h+"`.")):null;for(var x=arguments.length,b=Array(x>6?x-6:0),T=6;T<x;T++)b[T-6]=arguments[T];return e.apply(void 0,[o,i,h,u,g].concat(b))}var r=t.bind(null,!1);return r.isRequired=t.bind(null,!0),r}tVe.exports=zR.default});var nVe=M(()=>{var rVe=dw(),i1r=wee()(!1);rVe(rVe.S,"Object",{values:function(t){return i1r(t)}})});var iVe=M((Qgn,oVe)=>{nVe();oVe.exports=wv().Object.values});var sVe=M((evn,aVe)=>{aVe.exports=iVe()});var cVe=M(Eo=>{"use strict";var Ba=typeof Symbol=="function"&&Symbol.for,Cee=Ba?Symbol.for("react.element"):60103,Aee=Ba?Symbol.for("react.portal"):60106,UR=Ba?Symbol.for("react.fragment"):60107,BR=Ba?Symbol.for("react.strict_mode"):60108,VR=Ba?Symbol.for("react.profiler"):60114,GR=Ba?Symbol.for("react.provider"):60109,HR=Ba?Symbol.for("react.context"):60110,Dee=Ba?Symbol.for("react.async_mode"):60111,WR=Ba?Symbol.for("react.concurrent_mode"):60111,$R=Ba?Symbol.for("react.forward_ref"):60112,YR=Ba?Symbol.for("react.suspense"):60113,l1r=Ba?Symbol.for("react.suspense_list"):60120,ZR=Ba?Symbol.for("react.memo"):60115,KR=Ba?Symbol.for("react.lazy"):60116,u1r=Ba?Symbol.for("react.block"):60121,c1r=Ba?Symbol.for("react.fundamental"):60117,f1r=Ba?Symbol.for("react.responder"):60118,p1r=Ba?Symbol.for("react.scope"):60119;function ec(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Cee:switch(e=e.type,e){case Dee:case WR:case UR:case VR:case BR:case YR:return e;default:switch(e=e&&e.$$typeof,e){case HR:case $R:case KR:case ZR:case GR:return e;default:return t;}}case Aee:return t;}}}function uVe(e){return ec(e)===WR}Eo.AsyncMode=Dee;Eo.ConcurrentMode=WR;Eo.ContextConsumer=HR;Eo.ContextProvider=GR;Eo.Element=Cee;Eo.ForwardRef=$R;Eo.Fragment=UR;Eo.Lazy=KR;Eo.Memo=ZR;Eo.Portal=Aee;Eo.Profiler=VR;Eo.StrictMode=BR;Eo.Suspense=YR;Eo.isAsyncMode=function(e){return uVe(e)||ec(e)===Dee};Eo.isConcurrentMode=uVe;Eo.isContextConsumer=function(e){return ec(e)===HR};Eo.isContextProvider=function(e){return ec(e)===GR};Eo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Cee};Eo.isForwardRef=function(e){return ec(e)===$R};Eo.isFragment=function(e){return ec(e)===UR};Eo.isLazy=function(e){return ec(e)===KR};Eo.isMemo=function(e){return ec(e)===ZR};Eo.isPortal=function(e){return ec(e)===Aee};Eo.isProfiler=function(e){return ec(e)===VR};Eo.isStrictMode=function(e){return ec(e)===BR};Eo.isSuspense=function(e){return ec(e)===YR};Eo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===UR||e===WR||e===VR||e===BR||e===YR||e===l1r||typeof e=="object"&&e!==null&&(e.$$typeof===KR||e.$$typeof===ZR||e.$$typeof===GR||e.$$typeof===HR||e.$$typeof===$R||e.$$typeof===c1r||e.$$typeof===f1r||e.$$typeof===p1r||e.$$typeof===u1r)};Eo.typeOf=ec});var pVe=M((ivn,fVe)=>{"use strict";fVe.exports=cVe()});var Al=M((XR,hVe)=>{"use strict";Object.defineProperty(XR,"__esModule",{value:!0});var d1r=we(),h1r=dVe(d1r),m1r=pVe(),g1r=FR(),v1r=dVe(g1r);function dVe(e){return e&&e.__esModule?e:{default:e}}function y1r(e,t,r,n,o){var i=e[t];return h1r.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`,expected an element type (a string ")+", component class, or function component)."):(0,m1r.isValidElementType)(i)?null:new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected an element type (a string ")+", component class, or function component).")}XR.default=(0,v1r.default)(y1r);hVe.exports=XR.default});var xVe=M((tj,_Ve)=>{"use strict";Object.defineProperty(tj,"__esModule",{value:!0});tj.default=M1r;var S1r=FR(),I1r=T1r(S1r);function T1r(e){return e&&e.__esModule?e:{default:e}}function M1r(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];function n(){for(var o=arguments.length,i=Array(o),a=0;a<o;a++)i[a]=arguments[a];var u=null;return t.forEach(function(p){if(u==null){var h=p.apply(void 0,i);h!=null&&(u=h)}}),u}return(0,I1r.default)(n)}_Ve.exports=tj.default});var $0=M((Ivn,SVe)=>{"use strict";var A1r=function(){};SVe.exports=A1r});var Wi=M((Lvn,vC)=>{function L1r(e){return e&&e.__esModule?e:{default:e}}vC.exports=L1r,vC.exports.__esModule=!0,vC.exports.default=vC.exports});var MVe=M((ij,TVe)=>{"use strict";ij.__esModule=!0;ij.default=k1r;var P1r=/-(.)/g;function k1r(e){return e.replace(P1r,function(t,r){return r.toUpperCase()})}TVe.exports=ij.default});var jee=M((aj,CVe)=>{"use strict";var R1r=Wi();aj.__esModule=!0;aj.default=z1r;var j1r=R1r(MVe()),q1r=/^-ms-/;function z1r(e){return(0,j1r.default)(e.replace(q1r,"ms-"))}CVe.exports=aj.default});var DVe=M((sj,AVe)=>{"use strict";sj.__esModule=!0;sj.default=U1r;var F1r=/([A-Z])/g;function U1r(e){return e.replace(F1r,"-$1").toLowerCase()}AVe.exports=sj.default});var OVe=M((lj,NVe)=>{"use strict";var B1r=Wi();lj.__esModule=!0;lj.default=H1r;var V1r=B1r(DVe()),G1r=/^ms-/;function H1r(e){return(0,V1r.default)(e).replace(G1r,"-ms-")}NVe.exports=lj.default});var PVe=M((uj,LVe)=>{"use strict";var W1r=Wi();uj.__esModule=!0;uj.default=K1r;var $1r=W1r(jee()),Y1r=/^(top|right|bottom|left)$/,Z1r=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;function K1r(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(n){var o=e.style;n=(0,$1r.default)(n),n=="float"&&(n="styleFloat");var i=e.currentStyle[n]||null;if(i==null&&o&&o[n]&&(i=o[n]),Z1r.test(i)&&!Y1r.test(n)){var a=o.left,u=e.runtimeStyle,p=u&&u.left;p&&(u.left=e.currentStyle.left),o.left=n==="fontSize"?"1em":i,i=o.pixelLeft+"px",o.left=a,p&&(u.left=p)}return i}}}LVe.exports=uj.default});var RVe=M((cj,kVe)=>{"use strict";cj.__esModule=!0;cj.default=X1r;function X1r(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}kVe.exports=cj.default});var rd=M((yC,jVe)=>{"use strict";yC.__esModule=!0;yC.default=void 0;var J1r=!!(typeof window!="undefined"&&window.document&&window.document.createElement);yC.default=J1r;jVe.exports=yC.default});var VVe=M(kn=>{"use strict";var Q1r=Wi();kn.__esModule=!0;kn.default=kn.animationEnd=kn.animationDelay=kn.animationTiming=kn.animationDuration=kn.animationName=kn.transitionEnd=kn.transitionDuration=kn.transitionDelay=kn.transitionTiming=kn.transitionProperty=kn.transform=void 0;var e_r=Q1r(rd()),pj="transform";kn.transform=pj;var nd,qee,qVe;kn.animationEnd=qVe;kn.transitionEnd=qee;var zee,Fee,Uee,Bee;kn.transitionDelay=Bee;kn.transitionTiming=Uee;kn.transitionDuration=Fee;kn.transitionProperty=zee;var zVe,FVe,UVe,BVe;kn.animationDelay=BVe;kn.animationTiming=UVe;kn.animationDuration=FVe;kn.animationName=zVe;e_r.default&&(fj=r_r(),nd=fj.prefix,kn.transitionEnd=qee=fj.transitionEnd,kn.animationEnd=qVe=fj.animationEnd,kn.transform=pj=nd+"-"+pj,kn.transitionProperty=zee=nd+"-transition-property",kn.transitionDuration=Fee=nd+"-transition-duration",kn.transitionDelay=Bee=nd+"-transition-delay",kn.transitionTiming=Uee=nd+"-transition-timing-function",kn.animationName=zVe=nd+"-animation-name",kn.animationDuration=FVe=nd+"-animation-duration",kn.animationTiming=UVe=nd+"-animation-delay",kn.animationDelay=BVe=nd+"-animation-timing-function");var fj,t_r={transform:pj,end:qee,property:zee,timing:Uee,delay:Bee,duration:Fee};kn.default=t_r;function r_r(){for(var e=document.createElement("div").style,t={O:function(h){return"o"+h.toLowerCase()},Moz:function(h){return h.toLowerCase()},Webkit:function(h){return"webkit"+h},ms:function(h){return"MS"+h}},r=Object.keys(t),n,o,i="",a=0;a<r.length;a++){var u=r[a];if(u+"TransitionProperty"in e){i="-"+u.toLowerCase(),n=t[u]("TransitionEnd"),o=t[u]("AnimationEnd");break}}return!n&&"transitionProperty"in e&&(n="transitionend"),!o&&"animationName"in e&&(o="animationend"),e=null,{animationEnd:o,transitionEnd:n,prefix:i}}});var HVe=M((dj,GVe)=>{"use strict";dj.__esModule=!0;dj.default=o_r;var n_r=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function o_r(e){return!!(e&&n_r.test(e))}GVe.exports=dj.default});var mj=M((hj,WVe)=>{"use strict";var _C=Wi();hj.__esModule=!0;hj.default=c_r;var i_r=_C(jee()),Vee=_C(OVe()),a_r=_C(PVe()),s_r=_C(RVe()),l_r=VVe(),u_r=_C(HVe());function c_r(e,t,r){var n="",o="",i=t;if(typeof t=="string"){if(r===void 0)return e.style[(0,i_r.default)(t)]||(0,a_r.default)(e).getPropertyValue((0,Vee.default)(t));(i={})[t]=r}Object.keys(i).forEach(function(a){var u=i[a];!u&&u!==0?(0,s_r.default)(e,(0,Vee.default)(a)):(0,u_r.default)(a)?o+=a+"("+u+") ":n+=(0,Vee.default)(a)+": "+u+";"}),o&&(n+=l_r.transform+": "+o+";"),e.style.cssText+=";"+n}WVe.exports=hj.default});var $Ve=M(_w=>{"use strict";_w.__esModule=!0;_w.classNamesShape=_w.timeoutsShape=void 0;var kvn=f_r(xt());function f_r(e){return e&&e.__esModule?e:{default:e}}var p_r=null;_w.timeoutsShape=p_r;var d_r=null;_w.classNamesShape=d_r});var ZVe=M(mu=>{"use strict";mu.__esModule=!0;mu.default=mu.EXITING=mu.ENTERED=mu.ENTERING=mu.EXITED=mu.UNMOUNTED=void 0;var h_r=v_r(xt()),Gee=YVe(we()),m_r=YVe(Si()),g_r=bee(),jvn=$Ve();function YVe(e){return e&&e.__esModule?e:{default:e}}function v_r(e){if(e&&e.__esModule)return e;var t={};if(e!=null){for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var n=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,r):{};n.get||n.set?Object.defineProperty(t,r,n):t[r]=e[r]}}return t.default=e,t}function y_r(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}function __r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var xC="unmounted";mu.UNMOUNTED=xC;var Y0="exited";mu.EXITED=Y0;var Z0="entering";mu.ENTERING=Z0;var bw="entered";mu.ENTERED=bw;var Hee="exiting";mu.EXITING=Hee;var od=function(e){__r(t,e);function t(n,o){var i;i=e.call(this,n,o)||this;var a=o.transitionGroup,u=a&&!a.isMounting?n.enter:n.appear,p;return i.appearStatus=null,n.in?u?(p=Y0,i.appearStatus=Z0):p=bw:n.unmountOnExit||n.mountOnEnter?p=xC:p=Y0,i.state={status:p},i.nextCallback=null,i}var r=t.prototype;return r.getChildContext=function(){return{transitionGroup:null}},t.getDerivedStateFromProps=function(o,i){var a=o.in;return a&&i.status===xC?{status:Y0}:null},r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(o){var i=null;if(o!==this.props){var a=this.state.status;this.props.in?a!==Z0&&a!==bw&&(i=Z0):(a===Z0||a===bw)&&(i=Hee)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var o=this.props.timeout,i,a,u;return i=a=u=o,o!=null&&typeof o!="number"&&(i=o.exit,a=o.enter,u=o.appear!==void 0?o.appear:a),{exit:i,enter:a,appear:u}},r.updateStatus=function(o,i){if(o===void 0&&(o=!1),i!==null){this.cancelNextCallback();var a=m_r.default.findDOMNode(this);i===Z0?this.performEnter(a,o):this.performExit(a)}else this.props.unmountOnExit&&this.state.status===Y0&&this.setState({status:xC})},r.performEnter=function(o,i){var a=this,u=this.props.enter,p=this.context.transitionGroup?this.context.transitionGroup.isMounting:i,h=this.getTimeouts(),g=p?h.appear:h.enter;if(!i&&!u){this.safeSetState({status:bw},function(){a.props.onEntered(o)});return}this.props.onEnter(o,p),this.safeSetState({status:Z0},function(){a.props.onEntering(o,p),a.onTransitionEnd(o,g,function(){a.safeSetState({status:bw},function(){a.props.onEntered(o,p)})})})},r.performExit=function(o){var i=this,a=this.props.exit,u=this.getTimeouts();if(!a){this.safeSetState({status:Y0},function(){i.props.onExited(o)});return}this.props.onExit(o),this.safeSetState({status:Hee},function(){i.props.onExiting(o),i.onTransitionEnd(o,u.exit,function(){i.safeSetState({status:Y0},function(){i.props.onExited(o)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(o,i){i=this.setNextCallback(i),this.setState(o,i)},r.setNextCallback=function(o){var i=this,a=!0;return this.nextCallback=function(u){a&&(a=!1,i.nextCallback=null,o(u))},this.nextCallback.cancel=function(){a=!1},this.nextCallback},r.onTransitionEnd=function(o,i,a){this.setNextCallback(a);var u=i==null&&!this.props.addEndListener;if(!o||u){setTimeout(this.nextCallback,0);return}this.props.addEndListener&&this.props.addEndListener(o,this.nextCallback),i!=null&&setTimeout(this.nextCallback,i)},r.render=function(){var o=this.state.status;if(o===xC)return null;var i=this.props,a=i.children,u=y_r(i,["children"]);if(delete u.in,delete u.mountOnEnter,delete u.unmountOnExit,delete u.appear,delete u.enter,delete u.exit,delete u.timeout,delete u.addEndListener,delete u.onEnter,delete u.onEntering,delete u.onEntered,delete u.onExit,delete u.onExiting,delete u.onExited,typeof a=="function")return a(o,u);var p=Gee.default.Children.only(a);return Gee.default.cloneElement(p,u)},t}(Gee.default.Component);od.contextTypes={transitionGroup:h_r.object};od.childContextTypes={transitionGroup:function(){}};od.propTypes={};function xw(){}od.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:xw,onEntering:xw,onEntered:xw,onExit:xw,onExiting:xw,onExited:xw};od.UNMOUNTED=0;od.EXITED=1;od.ENTERING=2;od.ENTERED=3;od.EXITING=4;var x_r=(0,g_r.polyfill)(od);mu.default=x_r});var K0=M((gj,KVe)=>{"use strict";gj.__esModule=!0;gj.default=b_r;function b_r(e){return e&&e.ownerDocument||document}KVe.exports=gj.default});var JVe=M((vj,XVe)=>{"use strict";var w_r=Wi();vj.__esModule=!0;vj.default=S_r;var E_r=w_r(K0());function S_r(e){e===void 0&&(e=(0,E_r.default)());try{return e.activeElement}catch(t){}}XVe.exports=vj.default});var wC=M((bC,eGe)=>{"use strict";var I_r=Wi();bC.__esModule=!0;bC.default=void 0;var T_r=I_r(rd()),M_r=function(){return T_r.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(e.compareDocumentPosition(t)&16):QVe(e,t)}:QVe}();bC.default=M_r;function QVe(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}eGe.exports=bC.default});var oGe=M((X0,nGe)=>{function tGe(e){if(e&&typeof e=="object"){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if(typeof e=="number")return rGe[e];var r=String(e),n=Gh[r.toLowerCase()];if(n)return n;var n=yj[r.toLowerCase()];if(n)return n;if(r.length===1)return r.charCodeAt(0)}tGe.isEventKey=function(t,r){if(t&&typeof t=="object"){var n=t.which||t.keyCode||t.charCode;if(n==null)return!1;if(typeof r=="string"){var o=Gh[r.toLowerCase()];if(o)return o===n;var o=yj[r.toLowerCase()];if(o)return o===n}else if(typeof r=="number")return r===n;return!1}};X0=nGe.exports=tGe;var Gh=X0.code=X0.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},yj=X0.aliases={windows:91,"\u21E7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(Ii=97;Ii<123;Ii++)Gh[String.fromCharCode(Ii)]=Ii-32;for(Ii=48;Ii<58;Ii++)Gh[Ii-48]=Ii;var Ii;for(Ii=1;Ii<13;Ii++)Gh["f"+Ii]=Ii+111;for(Ii=0;Ii<10;Ii++)Gh["numpad "+Ii]=Ii+96;var rGe=X0.names=X0.title={};for(Ii in Gh)rGe[Gh[Ii]]=Ii;for(Wee in yj)Gh[Wee]=yj[Wee];var Wee});var $ee=M((_j,iGe)=>{"use strict";Object.defineProperty(_j,"__esModule",{value:!0});_j.default=C_r;function C_r(e){return function(r,n,o,i,a){var u=o||"<<anonymous>>",p=a||n;if(r[n]==null)return new Error("The "+i+" `"+p+"` is required to make "+("`"+u+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var h=arguments.length,g=Array(h>5?h-5:0),x=5;x<h;x++)g[x-5]=arguments[x];return e.apply(void 0,[r,n,o,i,a].concat(g))}}iGe.exports=_j.default});var xj=M((EC,sGe)=>{"use strict";var A_r=Wi();EC.__esModule=!0;EC.default=void 0;var D_r=A_r(rd()),aGe=function(){};D_r.default&&(aGe=function(){if(document.addEventListener)return function(e,t,r,n){return e.addEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.attachEvent("on"+t,function(n){n=n||window.event,n.target=n.target||n.srcElement,n.currentTarget=e,r.call(e,n)})}}());var N_r=aGe;EC.default=N_r;sGe.exports=EC.default});var bj=M((SC,uGe)=>{"use strict";var O_r=Wi();SC.__esModule=!0;SC.default=void 0;var L_r=O_r(rd()),lGe=function(){};L_r.default&&(lGe=function(){if(document.addEventListener)return function(e,t,r,n){return e.removeEventListener(t,r,n||!1)};if(document.attachEvent)return function(e,t,r){return e.detachEvent("on"+t,r)}}());var P_r=lGe;SC.default=P_r;uGe.exports=SC.default});var Yee=M((wj,fGe)=>{"use strict";wj.__esModule=!0;wj.default=function(e,t,r,n){return(0,R_r.default)(e,t,r,n),{remove:function(){(0,q_r.default)(e,t,r,n)}}};var k_r=xj(),R_r=cGe(k_r),j_r=bj(),q_r=cGe(j_r);function cGe(e){return e&&e.__esModule?e:{default:e}}fGe.exports=wj.default});var J0=M((Ej,dGe)=>{"use strict";Ej.__esModule=!0;Ej.default=function(e){return(0,B_r.default)(F_r.default.findDOMNode(e))};var z_r=Si(),F_r=pGe(z_r),U_r=K0(),B_r=pGe(U_r);function pGe(e){return e&&e.__esModule?e:{default:e}}dGe.exports=Ej.default});var mGe=M((Tj,hGe)=>{"use strict";Tj.__esModule=!0;var V_r=wC(),G_r=ww(V_r),H_r=xt(),Sj=ww(H_r),W_r=we(),$_r=ww(W_r),Y_r=Si(),Z_r=ww(Y_r),K_r=Yee(),Zee=ww(K_r),X_r=J0(),J_r=ww(X_r);function ww(e){return e&&e.__esModule?e:{default:e}}function Q_r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function exr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function txr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var rxr=27;function nxr(e){return e.button===0}function oxr(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}var Ij=function(e){txr(t,e);function t(r,n){Q_r(this,t);var o=exr(this,e.call(this,r,n));return o.addEventListeners=function(){o.currentEvent=window.event;var i=o.props.event,a=(0,J_r.default)(o);o.documentMouseCaptureListener=(0,Zee.default)(a,i,o.handleMouseCapture,!0),o.documentMouseListener=(0,Zee.default)(a,i,o.handleMouse),o.documentKeyupListener=(0,Zee.default)(a,"keyup",o.handleKeyUp)},o.removeEventListeners=function(){o.documentMouseCaptureListener&&o.documentMouseCaptureListener.remove(),o.documentMouseListener&&o.documentMouseListener.remove(),o.documentKeyupListener&&o.documentKeyupListener.remove()},o.handleMouseCapture=function(i){o.preventMouseRootClose=oxr(i)||!nxr(i)||(0,G_r.default)(Z_r.default.findDOMNode(o),i.target)},o.handleMouse=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}!o.preventMouseRootClose&&o.props.onRootClose&&o.props.onRootClose(i)},o.handleKeyUp=function(i){if(i===o.currentEvent){o.currentEvent=void 0;return}i.keyCode===rxr&&o.props.onRootClose&&o.props.onRootClose(i)},o.preventMouseRootClose=!1,o}return t.prototype.componentDidMount=function(){this.props.disabled||this.addEventListeners()},t.prototype.componentDidUpdate=function(n){!this.props.disabled&&n.disabled?this.addEventListeners():this.props.disabled&&!n.disabled&&this.removeEventListeners()},t.prototype.componentWillUnmount=function(){this.props.disabled||this.removeEventListeners()},t.prototype.render=function(){return this.props.children},t}($_r.default.Component);Ij.displayName="RootCloseWrapper";Ij.propTypes={onRootClose:Sj.default.func,children:Sj.default.element,disabled:Sj.default.bool,event:Sj.default.oneOf(["click","mousedown"])};Ij.defaultProps={event:"click"};Tj.default=Ij;hGe.exports=Tj.default});var MGe=M((Nj,TGe)=>{"use strict";Nj.__esModule=!0;Nj.default=yxr;var vxr=/^[\w-]*$/,ate=Function.prototype.bind.call(Function.prototype.call,[].slice);function yxr(e,t){var r=t[0]==="#",n=t[0]===".",o=r||n?t.slice(1):t,i=vxr.test(o),a;return i?r?(e=e.getElementById?e:document,(a=e.getElementById(o))?[a]:[]):e.getElementsByClassName&&n?ate(e.getElementsByClassName(o)):ate(e.getElementsByTagName(t)):ate(e.querySelectorAll(t))}TGe.exports=Nj.default});var DGe=M((Oj,AGe)=>{"use strict";var CGe=Wi();Oj.__esModule=!0;Oj.default=bxr;var _xr=CGe(wC()),xxr=CGe(MGe());function bxr(e,t){return function(n){var o=n.currentTarget,i=n.target,a=(0,xxr.default)(o,e);a.some(function(u){return(0,_xr.default)(u,i)})&&t.call(this,n)}}AGe.exports=Oj.default});var LGe=M((MC,OGe)=>{"use strict";var ste=Wi();MC.__esModule=!0;MC.default=void 0;var wxr=ste(rd()),Exr=ste(xj()),Sxr=ste(bj()),NGe=function(){};wxr.default&&(NGe=function(t,r,n,o){return(0,Exr.default)(t,r,n,o),function(){(0,Sxr.default)(t,r,n,o)}});var Ixr=NGe;MC.default=Ixr;OGe.exports=MC.default});var qGe=M(Iv=>{"use strict";var Lj=Wi();Iv.__esModule=!0;Iv.default=void 0;var PGe=Lj(xj());Iv.on=PGe.default;var kGe=Lj(bj());Iv.off=kGe.default;var RGe=Lj(DGe());Iv.filter=RGe.default;var jGe=Lj(LGe());Iv.listen=jGe.default;var Txr={on:PGe.default,off:kGe.default,filter:RGe.default,listen:jGe.default};Iv.default=Txr});var lte=M((kj,zGe)=>{"use strict";var Mxr=Wi();kj.__esModule=!0;kj.default=Axr;var Cxr=Mxr(rd()),Pj;function Axr(e){if((!Pj&&Pj!==0||e)&&Cxr.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),Pj=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return Pj}zGe.exports=kj.default});var CC=M((Rj,UGe)=>{"use strict";Object.defineProperty(Rj,"__esModule",{value:!0});var Dxr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nxr=we(),Oxr=FGe(Nxr),Lxr=FR(),Pxr=FGe(Lxr);function FGe(e){return e&&e.__esModule?e:{default:e}}function kxr(e,t,r,n,o){var i=e[t],a=typeof i=="undefined"?"undefined":Dxr(i);return Oxr.default.isValidElement(i)?new Error("Invalid "+n+" `"+o+"` of type ReactElement "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):(a!=="object"||typeof i.render!="function")&&i.nodeType!==1?new Error("Invalid "+n+" `"+o+"` of value `"+i+"` "+("supplied to `"+r+"`, expected a ReactComponent or a ")+"DOMElement."):null}Rj.default=(0,Pxr.default)(kxr);UGe.exports=Rj.default});var HGe=M((_yn,GGe)=>{"use strict";var Rxr=!1,VGe=function(){};Rxr&&(BGe=function(t,r){var n=arguments.length;r=new Array(n>1?n-1:0);for(var o=1;o<n;o++)r[o-1]=arguments[o];var i=0,a="Warning: "+t.replace(/%s/g,function(){return r[i++]});typeof console!="undefined"&&console.error(a);try{throw new Error(a)}catch(u){}},VGe=function(e,t,r){var n=arguments.length;r=new Array(n>2?n-2:0);for(var o=2;o<n;o++)r[o-2]=arguments[o];if(t===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");e||BGe.apply(null,[t].concat(r))});var BGe;GGe.exports=VGe});var YGe=M((jj,$Ge)=>{"use strict";Object.defineProperty(jj,"__esModule",{value:!0});jj.default=WGe;var jxr=HGe(),qxr=zxr(jxr);function zxr(e){return e&&e.__esModule?e:{default:e}}var ute={};function WGe(e,t){return function(n,o,i,a,u){var p=i||"<<anonymous>>",h=u||o;if(n[o]!=null){var g=i+"."+o;(0,qxr.default)(ute[g],"The "+a+" `"+h+"` of "+("`"+p+"` is deprecated. "+t+".")),ute[g]=!0}for(var x=arguments.length,b=Array(x>5?x-5:0),T=5;T<x;T++)b[T-5]=arguments[T];return e.apply(void 0,[n,o,i,a,u].concat(b))}}function Fxr(){ute={}}WGe._resetWarned=Fxr;$Ge.exports=jj.default});var cte=M((qj,ZGe)=>{"use strict";qj.__esModule=!0;qj.default=Uxr;function Uxr(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}ZGe.exports=qj.default});var XGe=M((zj,KGe)=>{"use strict";var Bxr=Wi();zj.__esModule=!0;zj.default=Gxr;var Vxr=Bxr(cte());function Gxr(e,t){e.classList?e.classList.add(t):(0,Vxr.default)(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}KGe.exports=zj.default});var eHe=M((xyn,QGe)=>{"use strict";function JGe(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}QGe.exports=function(t,r){t.classList?t.classList.remove(r):typeof t.className=="string"?t.className=JGe(t.className,r):t.setAttribute("class",JGe(t.className&&t.className.baseVal||"",r))}});var oHe=M(Q0=>{"use strict";var fte=Wi();Q0.__esModule=!0;Q0.default=void 0;var tHe=fte(XGe());Q0.addClass=tHe.default;var rHe=fte(eHe());Q0.removeClass=rHe.default;var nHe=fte(cte());Q0.hasClass=nHe.default;var Hxr={addClass:tHe.default,removeClass:rHe.default,hasClass:nHe.default};Q0.default=Hxr});var AC=M((Fj,iHe)=>{"use strict";Fj.__esModule=!0;Fj.default=Wxr;function Wxr(e){return e===e.window?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}iHe.exports=Fj.default});var pte=M((Uj,lHe)=>{"use strict";Uj.__esModule=!0;Uj.default=Jxr;var $xr=AC(),aHe=sHe($xr),Yxr=K0(),Zxr=sHe(Yxr);function sHe(e){return e&&e.__esModule?e:{default:e}}function Kxr(e){return e&&e.tagName.toLowerCase()==="body"}function Xxr(e){var t=(0,Zxr.default)(e),r=(0,aHe.default)(t),n=r.innerWidth;if(!n){var o=t.documentElement.getBoundingClientRect();n=o.right-Math.abs(o.left)}return t.body.clientWidth<n}function Jxr(e){var t=(0,aHe.default)(e);return t||Kxr(e)?Xxr(e):e.scrollHeight>e.clientHeight}lHe.exports=Uj.default});var cHe=M(DC=>{"use strict";DC.__esModule=!0;DC.ariaHidden=dte;DC.hideSiblings=tbr;DC.showSiblings=rbr;var Qxr=["template","script","style"],ebr=function(t){var r=t.nodeType,n=t.tagName;return r===1&&Qxr.indexOf(n.toLowerCase())===-1},uHe=function(t,r,n){r=[].concat(r),[].forEach.call(t.children,function(o){r.indexOf(o)===-1&&ebr(o)&&n(o)})};function dte(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function tbr(e,t){uHe(e,t,function(r){return dte(!0,r)})}function rbr(e,t){uHe(e,t,function(r){return dte(!1,r)})}});var hHe=M((Vj,dHe)=>{"use strict";Vj.__esModule=!0;var nbr=oHe(),fHe=Bj(nbr),obr=mj(),pHe=Bj(obr),ibr=lte(),abr=Bj(ibr),sbr=pte(),lbr=Bj(sbr),hte=cHe();function Bj(e){return e&&e.__esModule?e:{default:e}}function ubr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cbr(e,t){var r=-1;return e.some(function(n,o){if(t(n,o))return r=o,!0}),r}function fbr(e,t){return cbr(e,function(r){return r.modals.indexOf(t)!==-1})}function pbr(e,t){var r={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(r.paddingRight=parseInt((0,pHe.default)(t,"paddingRight")||0,10)+(0,abr.default)()+"px"),(0,pHe.default)(t,r)}function dbr(e,t){var r=e.style;Object.keys(r).forEach(function(n){return t.style[n]=r[n]})}var hbr=function e(){var t=this,r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=r.hideSiblingNodes,o=n===void 0?!0:n,i=r.handleContainerOverflow,a=i===void 0?!0:i;ubr(this,e),this.add=function(u,p,h){var g=t.modals.indexOf(u),x=t.containers.indexOf(p);if(g!==-1)return g;if(g=t.modals.length,t.modals.push(u),t.hideSiblingNodes&&(0,hte.hideSiblings)(p,u.modalNode),x!==-1)return t.data[x].modals.push(u),g;var b={modals:[u],classes:h?h.split(/\s+/):[],overflowing:(0,lbr.default)(p)};return t.handleContainerOverflow&&pbr(b,p),b.classes.forEach(fHe.default.addClass.bind(null,p)),t.containers.push(p),t.data.push(b),g},this.remove=function(u){var p=t.modals.indexOf(u);if(p!==-1){var h=fbr(t.data,u),g=t.data[h],x=t.containers[h];g.modals.splice(g.modals.indexOf(u),1),t.modals.splice(p,1),g.modals.length===0?(g.classes.forEach(fHe.default.removeClass.bind(null,x)),t.handleContainerOverflow&&dbr(g,x),t.hideSiblingNodes&&(0,hte.showSiblings)(x,u.modalNode),t.containers.splice(h,1),t.data.splice(h,1)):t.hideSiblingNodes&&(0,hte.ariaHidden)(!1,g.modals[g.modals.length-1].modalNode)}},this.isTopModal=function(u){return!!t.modals.length&&t.modals[t.modals.length-1]===u},this.hideSiblingNodes=o,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]};Vj.default=hbr;dHe.exports=Vj.default});var NC=M((Gj,mHe)=>{"use strict";Gj.__esModule=!0;Gj.default=ybr;var mbr=Si(),gbr=vbr(mbr);function vbr(e){return e&&e.__esModule?e:{default:e}}function ybr(e,t){return e=typeof e=="function"?e():e,gbr.default.findDOMNode(e)||t}mHe.exports=Gj.default});var wHe=M((Hj,bHe)=>{"use strict";Hj.__esModule=!0;var _br=xt(),mte=Iw(_br),xbr=CC(),bbr=Iw(xbr),wbr=we(),gHe=Iw(wbr),Ebr=Si(),vHe=Iw(Ebr),Sbr=NC(),yHe=Iw(Sbr),Ibr=J0(),_He=Iw(Ibr);function Iw(e){return e&&e.__esModule?e:{default:e}}function Tbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xHe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Mbr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var gte=function(e){Mbr(t,e);function t(){var r,n,o;Tbr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=xHe(this,e.call.apply(e,[this].concat(a))),n),n._mountOverlayTarget=function(){n._overlayTarget||(n._overlayTarget=document.createElement("div"),n._portalContainerNode=(0,yHe.default)(n.props.container,(0,_He.default)(n).body),n._portalContainerNode.appendChild(n._overlayTarget))},n._unmountOverlayTarget=function(){n._overlayTarget&&(n._portalContainerNode.removeChild(n._overlayTarget),n._overlayTarget=null),n._portalContainerNode=null},n._renderOverlay=function(){var p=n.props.children?gHe.default.Children.only(n.props.children):null;if(p!==null){n._mountOverlayTarget();var h=!n._overlayInstance;n._overlayInstance=vHe.default.unstable_renderSubtreeIntoContainer(n,p,n._overlayTarget,function(){h&&n.props.onRendered&&n.props.onRendered()})}else n._unrenderOverlay(),n._unmountOverlayTarget()},n._unrenderOverlay=function(){n._overlayTarget&&(vHe.default.unmountComponentAtNode(n._overlayTarget),n._overlayInstance=null)},n.getMountNode=function(){return n._overlayTarget},r),xHe(n,o)}return t.prototype.componentDidMount=function(){this._isMounted=!0,this._renderOverlay()},t.prototype.componentDidUpdate=function(){this._renderOverlay()},t.prototype.UNSAFE_componentWillReceiveProps=function(n){this._overlayTarget&&n.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,yHe.default)(n.container,(0,_He.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},t.prototype.componentWillUnmount=function(){this._isMounted=!1,this._unrenderOverlay(),this._unmountOverlayTarget()},t.prototype.render=function(){return null},t}(gHe.default.Component);gte.displayName="Portal";gte.propTypes={container:mte.default.oneOfType([bbr.default,mte.default.func]),onRendered:mte.default.func};Hj.default=gte;bHe.exports=Hj.default});var xte=M((Wj,SHe)=>{"use strict";Wj.__esModule=!0;var Cbr=rd(),Abr=Tv(Cbr),Dbr=xt(),vte=Tv(Dbr),Nbr=CC(),Obr=Tv(Nbr),Lbr=we(),Pbr=Tv(Lbr),kbr=Si(),yte=Tv(kbr),Rbr=NC(),jbr=Tv(Rbr),qbr=J0(),zbr=Tv(qbr),Fbr=wHe(),Ubr=Tv(Fbr);function Tv(e){return e&&e.__esModule?e:{default:e}}function Bbr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EHe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Vbr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _te=function(e){Vbr(t,e);function t(){var r,n,o;Bbr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=EHe(this,e.call.apply(e,[this].concat(a))),n),n.getMountNode=function(){return n._portalContainerNode},r),EHe(n,o)}return t.prototype.UNSAFE_componentWillMount=function(){if(Abr.default){var n=this.props.container;typeof n=="function"&&(n=n()),!(n&&!yte.default.findDOMNode(n))&&this.setContainer(n)}},t.prototype.componentDidMount=function(){this._portalContainerNode?this.props.onRendered&&this.props.onRendered():(this.setContainer(this.props.container),this.forceUpdate(this.props.onRendered))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.container!==this.props.container&&this.setContainer(n.container)},t.prototype.componentWillUnmount=function(){this._portalContainerNode=null},t.prototype.setContainer=function(n){this._portalContainerNode=(0,jbr.default)(n,(0,zbr.default)(this).body)},t.prototype.render=function(){return this.props.children&&this._portalContainerNode?yte.default.createPortal(this.props.children,this._portalContainerNode):null},t}(Pbr.default.Component);_te.displayName="Portal";_te.propTypes={container:vte.default.oneOfType([Obr.default,vte.default.func]),onRendered:vte.default.func};Wj.default=yte.default.createPortal?_te:Ubr.default;SHe.exports=Wj.default});var CHe=M(($j,MHe)=>{"use strict";$j.__esModule=!0;var Gbr=xt(),Hbr=IHe(Gbr),Wbr=we(),$br=IHe(Wbr);function IHe(e){return e&&e.__esModule?e:{default:e}}function Ybr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zbr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Kbr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Xbr={children:Hbr.default.node},THe=function(e){Kbr(t,e);function t(){return Ybr(this,t),Zbr(this,e.apply(this,arguments))}return t.prototype.render=function(){return this.props.children},t}($br.default.Component);THe.propTypes=Xbr;$j.default=THe;MHe.exports=$j.default});var DHe=M((Yj,AHe)=>{"use strict";Yj.__esModule=!0;Yj.default=Jbr;function Jbr(e){var t=!document.addEventListener,r=void 0;return t?(document.attachEvent("onfocusin",e),r=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),r=function(){return document.removeEventListener("focus",e,!0)}),{remove:r}}AHe.exports=Yj.default});var FHe=M((Kj,zHe)=>{"use strict";Kj.__esModule=!0;var PHe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qbr=JVe(),bte=gs(Qbr),ewr=wC(),kHe=gs(ewr),twr=rd(),rwr=gs(twr),nwr=xt(),ti=gs(nwr),owr=CC(),iwr=gs(owr),awr=YGe(),swr=gs(awr),lwr=Al(),NHe=gs(lwr),RHe=we(),Mv=gs(RHe),uwr=Si(),cwr=gs(uwr),fwr=$0(),pwr=gs(fwr),dwr=hHe(),jHe=gs(dwr),hwr=xte(),qHe=gs(hwr),mwr=CHe(),gwr=gs(mwr),vwr=Yee(),OHe=gs(vwr),ywr=DHe(),_wr=gs(ywr),xwr=NC(),bwr=gs(xwr),wwr=J0(),wte=gs(wwr);function gs(e){return e&&e.__esModule?e:{default:e}}function Ewr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LHe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function Swr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Iwr=new jHe.default,Zj=function(e){Swr(t,e);function t(){var r,n,o;Ewr(this,t);for(var i=arguments.length,a=Array(i),u=0;u<i;u++)a[u]=arguments[u];return o=(r=(n=LHe(this,e.call.apply(e,[this].concat(a))),n),Twr.call(n),r),LHe(n,o)}return t.prototype.omitProps=function(n,o){var i=Object.keys(n),a={};return i.map(function(u){Object.prototype.hasOwnProperty.call(o,u)||(a[u]=n[u])}),a},t.prototype.render=function(){var n=this.props,o=n.show,i=n.container,a=n.children,u=n.transition,p=n.backdrop,h=n.className,g=n.style,x=n.onExit,b=n.onExiting,T=n.onEnter,A=n.onEntering,L=n.onEntered,P=Mv.default.Children.only(a),k=this.omitProps(this.props,t.propTypes),q=o||u&&!this.state.exited;if(!q)return null;var U=P.props,H=U.role,X=U.tabIndex;return(H===void 0||X===void 0)&&(P=(0,RHe.cloneElement)(P,{role:H===void 0?"document":H,tabIndex:X==null?"-1":X})),u&&(P=Mv.default.createElement(u,{appear:!0,unmountOnExit:!0,in:o,onExit:x,onExiting:b,onExited:this.handleHidden,onEnter:T,onEntering:A,onEntered:L},P)),Mv.default.createElement(qHe.default,{ref:this.setMountNode,container:i,onRendered:this.onPortalRendered},Mv.default.createElement("div",PHe({ref:this.setModalNodeRef,role:H||"dialog"},k,{style:g,className:h}),p&&this.renderBackdrop(),Mv.default.createElement(gwr.default,{ref:this.setDialogRef},P)))},t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.UNSAFE_componentWillUpdate=function(n){!this.props.show&&n.show&&this.checkForFocus()},t.prototype.componentDidMount=function(){this._isMounted=!0,this.props.show&&this.onShow()},t.prototype.componentDidUpdate=function(n){var o=this.props.transition;n.show&&!this.props.show&&!o?this.onHide():!n.show&&this.props.show&&this.onShow()},t.prototype.componentWillUnmount=function(){var n=this.props,o=n.show,i=n.transition;this._isMounted=!1,(o||i&&!this.state.exited)&&this.onHide()},t.prototype.autoFocus=function(){if(this.props.autoFocus){var n=this.getDialogElement(),o=(0,bte.default)((0,wte.default)(this));n&&!(0,kHe.default)(n,o)&&(this.lastFocus=o,n.hasAttribute("tabIndex")||((0,pwr.default)(!1,"The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to \"-1\"."),n.setAttribute("tabIndex",-1)),n.focus())}},t.prototype.restoreLastFocus=function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},t.prototype.getDialogElement=function(){return cwr.default.findDOMNode(this.dialog)},t.prototype.isTopModal=function(){return this.props.manager.isTopModal(this)},t}(Mv.default.Component);Zj.propTypes=PHe({},qHe.default.propTypes,{show:ti.default.bool,container:ti.default.oneOfType([iwr.default,ti.default.func]),onShow:ti.default.func,onHide:ti.default.func,backdrop:ti.default.oneOfType([ti.default.bool,ti.default.oneOf(["static"])]),renderBackdrop:ti.default.func,onEscapeKeyDown:ti.default.func,onEscapeKeyUp:(0,swr.default)(ti.default.func,"Please use onEscapeKeyDown instead for consistency"),onBackdropClick:ti.default.func,backdropStyle:ti.default.object,backdropClassName:ti.default.string,containerClassName:ti.default.string,keyboard:ti.default.bool,transition:NHe.default,backdropTransition:NHe.default,autoFocus:ti.default.bool,enforceFocus:ti.default.bool,restoreFocus:ti.default.bool,onEnter:ti.default.func,onEntering:ti.default.func,onEntered:ti.default.func,onExit:ti.default.func,onExiting:ti.default.func,onExited:ti.default.func,manager:ti.default.object.isRequired});Zj.defaultProps={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,onHide:function(){},manager:Iwr,renderBackdrop:function(t){return Mv.default.createElement("div",t)}};var Twr=function(){var t=this;this.state={exited:!this.props.show},this.renderBackdrop=function(){var r=t.props,n=r.backdropStyle,o=r.backdropClassName,i=r.renderBackdrop,a=r.backdropTransition,u=function(g){return t.backdrop=g},p=i({ref:u,style:n,className:o,onClick:t.handleBackdropClick});return a&&(p=Mv.default.createElement(a,{appear:!0,in:t.props.show},p)),p},this.onPortalRendered=function(){t.autoFocus(),t.props.onShow&&t.props.onShow()},this.onShow=function(){var r=(0,wte.default)(t),n=(0,bwr.default)(t.props.container,r.body);t.props.manager.add(t,n,t.props.containerClassName),t._onDocumentKeydownListener=(0,OHe.default)(r,"keydown",t.handleDocumentKeyDown),t._onDocumentKeyupListener=(0,OHe.default)(r,"keyup",t.handleDocumentKeyUp),t._onFocusinListener=(0,_wr.default)(t.enforceFocus)},this.onHide=function(){t.props.manager.remove(t),t._onDocumentKeydownListener.remove(),t._onDocumentKeyupListener.remove(),t._onFocusinListener.remove(),t.props.restoreFocus&&t.restoreLastFocus()},this.setMountNode=function(r){t.mountNode=r&&r.getMountNode()},this.setModalNodeRef=function(r){t.modalNode=r},this.setDialogRef=function(r){t.dialog=r},this.handleHidden=function(){if(t.setState({exited:!0}),t.onHide(),t.props.onExited){var r;(r=t.props).onExited.apply(r,arguments)}},this.handleBackdropClick=function(r){r.target===r.currentTarget&&(t.props.onBackdropClick&&t.props.onBackdropClick(r),t.props.backdrop===!0&&t.props.onHide())},this.handleDocumentKeyDown=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&(t.props.onEscapeKeyDown&&t.props.onEscapeKeyDown(r),t.props.onHide())},this.handleDocumentKeyUp=function(r){t.props.keyboard&&r.keyCode===27&&t.isTopModal()&&t.props.onEscapeKeyUp&&t.props.onEscapeKeyUp(r)},this.checkForFocus=function(){rwr.default&&(t.lastFocus=(0,bte.default)())},this.enforceFocus=function(){if(!(!t.props.enforceFocus||!t._isMounted||!t.isTopModal())){var r=t.getDialogElement(),n=(0,bte.default)((0,wte.default)(t));r&&!(0,kHe.default)(r,n)&&r.focus()}}};Zj.Manager=jHe.default;Kj.default=Zj;zHe.exports=Kj.default});var kte=M((r6,sWe)=>{"use strict";var Pte=Wi();r6.__esModule=!0;r6.default=Kwr;var $wr=Pte(wC()),Ywr=Pte(AC()),Zwr=Pte(K0());function Kwr(e){var t=(0,Zwr.default)(e),r=(0,Ywr.default)(t),n=t&&t.documentElement,o={top:0,left:0,height:0,width:0};if(t)return(0,$wr.default)(n,e)&&(e.getBoundingClientRect!==void 0&&(o=e.getBoundingClientRect()),o={top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0),width:(o.width==null?e.offsetWidth:o.width)||0,height:(o.height==null?e.offsetHeight:o.height)||0}),o}sWe.exports=r6.default});var lWe=M((C0n,Wh)=>{function Rte(){return Wh.exports=Rte=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Wh.exports.__esModule=!0,Wh.exports.default=Wh.exports,Rte.apply(null,arguments)}Wh.exports=Rte,Wh.exports.__esModule=!0,Wh.exports.default=Wh.exports});var fWe=M((n6,cWe)=>{"use strict";var uWe=Wi();n6.__esModule=!0;n6.default=eEr;var Xwr=uWe(K0()),Jwr=uWe(mj());function Qwr(e){return e.nodeName&&e.nodeName.toLowerCase()}function eEr(e){for(var t=(0,Xwr.default)(e),r=e&&e.offsetParent;r&&Qwr(e)!=="html"&&(0,Jwr.default)(r,"position")==="static";)r=r.offsetParent;return r||t.documentElement}cWe.exports=n6.default});var jte=M((o6,pWe)=>{"use strict";var tEr=Wi();o6.__esModule=!0;o6.default=nEr;var rEr=tEr(AC());function nEr(e,t){var r=(0,rEr.default)(e);if(t===void 0)return r?"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop:e.scrollTop;r?r.scrollTo("pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft,t):e.scrollTop=t}pWe.exports=o6.default});var hWe=M((i6,dWe)=>{"use strict";var oEr=Wi();i6.__esModule=!0;i6.default=aEr;var iEr=oEr(AC());function aEr(e,t){var r=(0,iEr.default)(e);if(t===void 0)return r?"pageXOffset"in r?r.pageXOffset:r.document.documentElement.scrollLeft:e.scrollLeft;r?r.scrollTo(t,"pageYOffset"in r?r.pageYOffset:r.document.documentElement.scrollTop):e.scrollLeft=t}dWe.exports=i6.default});var vWe=M((a6,gWe)=>{"use strict";var Aw=Wi();a6.__esModule=!0;a6.default=pEr;var sEr=Aw(lWe()),mWe=Aw(kte()),lEr=Aw(fWe()),uEr=Aw(jte()),cEr=Aw(hWe()),zC=Aw(mj());function fEr(e){return e.nodeName&&e.nodeName.toLowerCase()}function pEr(e,t){var r={top:0,left:0},n;return(0,zC.default)(e,"position")==="fixed"?n=e.getBoundingClientRect():(t=t||(0,lEr.default)(e),n=(0,mWe.default)(e),fEr(t)!=="html"&&(r=(0,mWe.default)(t)),r.top+=parseInt((0,zC.default)(t,"borderTopWidth"),10)-(0,uEr.default)(t)||0,r.left+=parseInt((0,zC.default)(t,"borderLeftWidth"),10)-(0,cEr.default)(t)||0),(0,sEr.default)({},n,{top:n.top-r.top-(parseInt((0,zC.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,zC.default)(e,"marginLeft"),10)||0)})}gWe.exports=a6.default});var xWe=M((l6,_We)=>{"use strict";l6.__esModule=!0;l6.default=bEr;var dEr=kte(),zte=s6(dEr),hEr=vWe(),mEr=s6(hEr),gEr=jte(),qte=s6(gEr),vEr=J0(),yEr=s6(vEr);function s6(e){return e&&e.__esModule?e:{default:e}}function yWe(e){var t=void 0,r=void 0,n=void 0;if(e.tagName==="BODY")t=window.innerWidth,r=window.innerHeight,n=(0,qte.default)((0,yEr.default)(e).documentElement)||(0,qte.default)(e);else{var o=(0,zte.default)(e);t=o.width,r=o.height,n=(0,qte.default)(e)}return{width:t,height:r,scroll:n}}function _Er(e,t,r,n){var o=yWe(r),i=o.scroll,a=o.height,u=e-n-i,p=e+n-i+t;return u<0?-u:p>a?a-p:0}function xEr(e,t,r,n){var o=yWe(r),i=o.width,a=e-n,u=e+n+t;return a<0?-a:u>i?i-u:0}function bEr(e,t,r,n,o){var i=n.tagName==="BODY"?(0,zte.default)(r):(0,mEr.default)(r,n),a=(0,zte.default)(t),u=a.height,p=a.width,h=void 0,g=void 0,x=void 0,b=void 0;if(e==="left"||e==="right"){g=i.top+(i.height-u)/2,e==="left"?h=i.left-p:h=i.left+i.width;var T=_Er(g,u,n,o);g+=T,b=50*(1-2*T/u)+"%",x=void 0}else if(e==="top"||e==="bottom"){h=i.left+(i.width-p)/2,e==="top"?g=i.top-u:g=i.top+i.height;var A=xEr(h,p,n,o);h+=A,x=50*(1-2*A/p)+"%",b=void 0}else throw new Error("calcOverlayPosition(): No such placement of \""+e+"\" found.");return{positionLeft:h,positionTop:g,arrowOffsetLeft:x,arrowOffsetTop:b}}_We.exports=l6.default});var CWe=M((c6,MWe)=>{"use strict";c6.__esModule=!0;var bWe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wEr=Zn(),EEr=Av(wEr),SEr=xt(),e1=Av(SEr),IEr=CC(),wWe=Av(IEr),TWe=we(),EWe=Av(TWe),TEr=Si(),SWe=Av(TEr),MEr=xWe(),CEr=Av(MEr),AEr=NC(),DEr=Av(AEr),NEr=J0(),OEr=Av(NEr);function Av(e){return e&&e.__esModule?e:{default:e}}function IWe(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function LEr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PEr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function kEr(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var u6=function(e){kEr(t,e);function t(r,n){LEr(this,t);var o=PEr(this,e.call(this,r,n));return o.getTarget=function(){var i=o.props.target,a=typeof i=="function"?i():i;return a&&SWe.default.findDOMNode(a)||null},o.maybeUpdatePosition=function(i){var a=o.getTarget();!o.props.shouldUpdatePosition&&a===o._lastTarget&&!i||o.updatePosition(a)},o.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},o._needsFlush=!1,o._lastTarget=null,o}return t.prototype.componentDidMount=function(){this.updatePosition(this.getTarget())},t.prototype.UNSAFE_componentWillReceiveProps=function(){this._needsFlush=!0},t.prototype.componentDidUpdate=function(n){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==n.placement))},t.prototype.render=function(){var n=this.props,o=n.children,i=n.className,a=IWe(n,["children","className"]),u=this.state,p=u.positionLeft,h=u.positionTop,g=IWe(u,["positionLeft","positionTop"]);delete a.target,delete a.container,delete a.containerPadding,delete a.shouldUpdatePosition;var x=EWe.default.Children.only(o);return(0,TWe.cloneElement)(x,bWe({},a,g,{positionLeft:p,positionTop:h,className:(0,EEr.default)(i,x.props.className),style:bWe({},x.props.style,{left:p,top:h})}))},t.prototype.updatePosition=function(n){if(this._lastTarget=n,!n){this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});return}var o=SWe.default.findDOMNode(this),i=(0,DEr.default)(this.props.container,(0,OEr.default)(this).body);this.setState((0,CEr.default)(this.props.placement,o,n,i,this.props.containerPadding))},t}(EWe.default.Component);u6.propTypes={target:e1.default.oneOfType([wWe.default,e1.default.func]),container:e1.default.oneOfType([wWe.default,e1.default.func]),containerPadding:e1.default.number,placement:e1.default.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:e1.default.bool};u6.displayName="Position";u6.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1};c6.default=u6;MWe.exports=c6.default});var PWe=M((f6,LWe)=>{"use strict";f6.__esModule=!0;var REr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jEr=xt(),$h=Dw(jEr),qEr=Al(),zEr=Dw(qEr),FEr=we(),FC=Dw(FEr),UEr=xte(),AWe=Dw(UEr),BEr=CWe(),DWe=Dw(BEr),VEr=mGe(),NWe=Dw(VEr);function Dw(e){return e&&e.__esModule?e:{default:e}}function GEr(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}function HEr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WEr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e}function $Er(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var OWe=function(e){$Er(t,e);function t(r,n){HEr(this,t);var o=WEr(this,e.call(this,r,n));return o.handleHidden=function(){if(o.setState({exited:!0}),o.props.onExited){var i;(i=o.props).onExited.apply(i,arguments)}},o.state={exited:!r.show},o.onHiddenListener=o.handleHidden.bind(o),o}return t.prototype.UNSAFE_componentWillReceiveProps=function(n){n.show?this.setState({exited:!1}):n.transition||this.setState({exited:!0})},t.prototype.render=function(){var n=this.props,o=n.container,i=n.containerPadding,a=n.target,u=n.placement,p=n.shouldUpdatePosition,h=n.rootClose,g=n.children,x=n.transition,b=GEr(n,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]),T=b.show||x&&!this.state.exited;if(!T)return null;var A=g;if(A=FC.default.createElement(DWe.default,{container:o,containerPadding:i,target:a,placement:u,shouldUpdatePosition:p},A),x){var L=b.onExit,P=b.onExiting,k=b.onEnter,q=b.onEntering,U=b.onEntered;A=FC.default.createElement(x,{in:b.show,appear:!0,onExit:L,onExiting:P,onExited:this.onHiddenListener,onEnter:k,onEntering:q,onEntered:U},A)}return h&&(A=FC.default.createElement(NWe.default,{onRootClose:b.onHide,event:b.rootCloseEvent},A)),FC.default.createElement(AWe.default,{container:o},A)},t}(FC.default.Component);OWe.propTypes=REr({},AWe.default.propTypes,DWe.default.propTypes,{show:$h.default.bool,rootClose:$h.default.bool,rootCloseEvent:NWe.default.propTypes.event,onHide:function(t){var r=$h.default.func;t.rootClose&&(r=r.isRequired);for(var n=arguments.length,o=Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return r.apply(void 0,[t].concat(o))},transition:zEr.default,onEnter:$h.default.func,onEntering:$h.default.func,onEntered:$h.default.func,onExit:$h.default.func,onExiting:$h.default.func,onExited:$h.default.func});f6.default=OWe;LWe.exports=f6.default});var nYe=M((Lxn,em)=>{function vre(e,t){return em.exports=vre=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},em.exports.__esModule=!0,em.exports.default=em.exports,vre(e,t)}em.exports=vre,em.exports.__esModule=!0,em.exports.default=em.exports});var yre=M((Pxn,uA)=>{var B2r=nYe();function V2r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B2r(e,t)}uA.exports=V2r,uA.exports.__esModule=!0,uA.exports.default=uA.exports});var xre=M(_re=>{"use strict";Object.defineProperty(_re,"__esModule",{value:!0});function G2r(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function H2r(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}var W2r=function(){function e(r){this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.before=null}var t=e.prototype;return t.insert=function(n){if(this.ctr%(this.isSpeedy?65e3:1)===0){var o=H2r(this),i;this.tags.length===0?i=this.before:i=this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(o,i),this.tags.push(o)}var a=this.tags[this.tags.length-1];if(this.isSpeedy){var u=G2r(a);try{var p=n.charCodeAt(1)===105&&n.charCodeAt(0)===64;u.insertRule(n,p?0:u.cssRules.length)}catch(h){}}else a.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){return n.parentNode.removeChild(n)}),this.tags=[],this.ctr=0},e}();_re.StyleSheet=W2r});var oYe=M(bre=>{"use strict";Object.defineProperty(bre,"__esModule",{value:!0});function $2r(e){function t(Ze,tt,lt,ze,ge){for(var We=0,Oe=0,at=0,ot=0,Pt,Mt,Nt=0,Ae=0,Lt,Wt=Lt=Pt=0,Ct=0,ce=0,Fe=0,Be=0,mt=lt.length,yt=mt-1,gt,_t="",Yt="",nt="",zr="",on;Ct<mt;){if(Mt=lt.charCodeAt(Ct),Ct===yt&&Oe+ot+at+We!==0&&(Oe!==0&&(Mt=Oe===47?10:47),ot=at=We=0,mt++,yt++),Oe+ot+at+We===0){if(Ct===yt&&(0<ce&&(_t=_t.replace(b,"")),0<_t.trim().length)){switch(Mt){case 32:case 9:case 59:case 13:case 10:break;default:_t+=lt.charAt(Ct);}Mt=59}switch(Mt){case 123:for(_t=_t.trim(),Pt=_t.charCodeAt(0),Lt=1,Be=++Ct;Ct<mt;){switch(Mt=lt.charCodeAt(Ct)){case 123:Lt++;break;case 125:Lt--;break;case 47:switch(Mt=lt.charCodeAt(Ct+1)){case 42:case 47:e:{for(Wt=Ct+1;Wt<yt;++Wt)switch(lt.charCodeAt(Wt)){case 47:if(Mt===42&&lt.charCodeAt(Wt-1)===42&&Ct+2!==Wt){Ct=Wt+1;break e}break;case 10:if(Mt===47){Ct=Wt+1;break e}}Ct=Wt}}break;case 91:Mt++;case 40:Mt++;case 34:case 39:for(;Ct++<yt&&lt.charCodeAt(Ct)!==Mt;);}if(Lt===0)break;Ct++}switch(Lt=lt.substring(Be,Ct),Pt===0&&(Pt=(_t=_t.replace(x,"").trim()).charCodeAt(0)),Pt){case 64:switch(0<ce&&(_t=_t.replace(b,"")),Mt=_t.charCodeAt(1),Mt){case 100:case 109:case 115:case 45:ce=tt;break;default:ce=qe;}if(Lt=t(tt,ce,Lt,Mt,ge+1),Be=Lt.length,0<Ne&&(ce=r(qe,_t,Fe),on=u(3,Lt,ce,tt,Ee,Te,Be,Mt,ge,ze),_t=ce.join(""),on!==void 0&&(Be=(Lt=on.trim()).length)===0&&(Mt=0,Lt="")),0<Be)switch(Mt){case 115:_t=_t.replace(ee,a);case 100:case 109:case 45:Lt=_t+"{"+Lt+"}";break;case 107:_t=_t.replace(q,"$1 $2"),Lt=_t+"{"+Lt+"}",Lt=Qe===1||Qe===2&&i("@"+Lt,3)?"@-webkit-"+Lt+"@"+Lt:"@"+Lt;break;default:Lt=_t+Lt,ze===112&&(Lt=(Yt+=Lt,""));}else Lt="";break;default:Lt=t(tt,r(tt,_t,Fe),Lt,ze,ge+1);}nt+=Lt,Lt=Fe=ce=Wt=Pt=0,_t="",Mt=lt.charCodeAt(++Ct);break;case 125:case 59:if(_t=(0<ce?_t.replace(b,""):_t).trim(),1<(Be=_t.length))switch(Wt===0&&(Pt=_t.charCodeAt(0),Pt===45||96<Pt&&123>Pt)&&(Be=(_t=_t.replace(" ",":")).length),0<Ne&&(on=u(1,_t,tt,Ze,Ee,Te,Yt.length,ze,ge,ze))!==void 0&&(Be=(_t=on.trim()).length)===0&&(_t="\0\0"),Pt=_t.charCodeAt(0),Mt=_t.charCodeAt(1),Pt){case 0:break;case 64:if(Mt===105||Mt===99){zr+=_t+lt.charAt(Ct);break}default:_t.charCodeAt(Be-1)!==58&&(Yt+=o(_t,Pt,Mt,_t.charCodeAt(2)));}Fe=ce=Wt=Pt=0,_t="",Mt=lt.charCodeAt(++Ct);}}switch(Mt){case 13:case 10:Oe===47?Oe=0:1+Pt===0&&ze!==107&&0<_t.length&&(ce=1,_t+="\0"),0<Ne*st&&u(0,_t,tt,Ze,Ee,Te,Yt.length,ze,ge,ze),Te=1,Ee++;break;case 59:case 125:if(Oe+ot+at+We===0){Te++;break}default:switch(Te++,gt=lt.charAt(Ct),Mt){case 9:case 32:if(ot+We+Oe===0)switch(Nt){case 44:case 58:case 9:case 32:gt="";break;default:Mt!==32&&(gt=" ");}break;case 0:gt="\\0";break;case 12:gt="\\f";break;case 11:gt="\\v";break;case 38:ot+Oe+We===0&&(ce=Fe=1,gt="\f"+gt);break;case 108:if(ot+Oe+We+Ye===0&&0<Wt)switch(Ct-Wt){case 2:Nt===112&&lt.charCodeAt(Ct-3)===58&&(Ye=Nt);case 8:Ae===111&&(Ye=Ae);}break;case 58:ot+Oe+We===0&&(Wt=Ct);break;case 44:Oe+at+ot+We===0&&(ce=1,gt+="\r");break;case 34:case 39:Oe===0&&(ot=ot===Mt?0:ot===0?Mt:ot);break;case 91:ot+Oe+at===0&&We++;break;case 93:ot+Oe+at===0&&We--;break;case 41:ot+Oe+We===0&&at--;break;case 40:if(ot+Oe+We===0){if(Pt===0)switch(2*Nt+3*Ae){case 533:break;default:Pt=1;}at++}break;case 64:Oe+at+ot+We+Wt+Lt===0&&(Lt=1);break;case 42:case 47:if(!(0<ot+We+at))switch(Oe){case 0:switch(2*Mt+3*lt.charCodeAt(Ct+1)){case 235:Oe=47;break;case 220:Be=Ct,Oe=42;}break;case 42:Mt===47&&Nt===42&&Be+2!==Ct&&(lt.charCodeAt(Be+2)===33&&(Yt+=lt.substring(Be,Ct+1)),gt="",Oe=0);}}Oe===0&&(_t+=gt);}Ae=Nt,Nt=Mt,Ct++}if(Be=Yt.length,0<Be){if(ce=tt,0<Ne&&(on=u(2,Yt,ce,Ze,Ee,Te,Be,ze,ge,ze),on!==void 0&&(Yt=on).length===0))return zr+Yt+nt;if(Yt=ce.join(",")+"{"+Yt+"}",Qe*Ye!==0){switch(Qe!==2||i(Yt,2)||(Ye=0),Ye){case 111:Yt=Yt.replace(H,":-moz-$1")+Yt;break;case 112:Yt=Yt.replace(U,"::-webkit-input-$1")+Yt.replace(U,"::-moz-$1")+Yt.replace(U,":-ms-input-$1")+Yt;}Ye=0}}return zr+Yt+nt}function r(Ze,tt,lt){var ze=tt.trim().split(P);tt=ze;var ge=ze.length,We=Ze.length;switch(We){case 0:case 1:var Oe=0;for(Ze=We===0?"":Ze[0]+" ";Oe<ge;++Oe)tt[Oe]=n(Ze,tt[Oe],lt).trim();break;default:var at=Oe=0;for(tt=[];Oe<ge;++Oe)for(var ot=0;ot<We;++ot)tt[at++]=n(Ze[ot]+" ",ze[Oe],lt).trim();}return tt}function n(Ze,tt,lt){var ze=tt.charCodeAt(0);switch(33>ze&&(ze=(tt=tt.trim()).charCodeAt(0)),ze){case 38:return tt.replace(k,"$1"+Ze.trim());case 58:return Ze.trim()+tt.replace(k,"$1"+Ze.trim());default:if(0<1*lt&&0<tt.indexOf("\f"))return tt.replace(k,(Ze.charCodeAt(0)===58?"":"$1")+Ze.trim());}return Ze+tt}function o(Ze,tt,lt,ze){var ge=Ze+";",We=2*tt+3*lt+4*ze;if(We===944){Ze=ge.indexOf(":",9)+1;var Oe=ge.substring(Ze,ge.length-1).trim();return Oe=ge.substring(0,Ze).trim()+Oe+";",Qe===1||Qe===2&&i(Oe,1)?"-webkit-"+Oe+Oe:Oe}if(Qe===0||Qe===2&&!i(ge,1))return ge;switch(We){case 1015:return ge.charCodeAt(10)===97?"-webkit-"+ge+ge:ge;case 951:return ge.charCodeAt(3)===116?"-webkit-"+ge+ge:ge;case 963:return ge.charCodeAt(5)===110?"-webkit-"+ge+ge:ge;case 1009:if(ge.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+ge+ge;case 978:return"-webkit-"+ge+"-moz-"+ge+ge;case 1019:case 983:return"-webkit-"+ge+"-moz-"+ge+"-ms-"+ge+ge;case 883:if(ge.charCodeAt(8)===45)return"-webkit-"+ge+ge;if(0<ge.indexOf("image-set(",11))return ge.replace(Re,"$1-webkit-$2")+ge;break;case 932:if(ge.charCodeAt(4)===45)switch(ge.charCodeAt(5)){case 103:return"-webkit-box-"+ge.replace("-grow","")+"-webkit-"+ge+"-ms-"+ge.replace("grow","positive")+ge;case 115:return"-webkit-"+ge+"-ms-"+ge.replace("shrink","negative")+ge;case 98:return"-webkit-"+ge+"-ms-"+ge.replace("basis","preferred-size")+ge;}return"-webkit-"+ge+"-ms-"+ge+ge;case 964:return"-webkit-"+ge+"-ms-flex-"+ge+ge;case 1023:if(ge.charCodeAt(8)!==99)break;return Oe=ge.substring(ge.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+Oe+"-webkit-"+ge+"-ms-flex-pack"+Oe+ge;case 1005:return A.test(ge)?ge.replace(T,":-webkit-")+ge.replace(T,":-moz-")+ge:ge;case 1e3:switch(Oe=ge.substring(13).trim(),tt=Oe.indexOf("-")+1,Oe.charCodeAt(0)+Oe.charCodeAt(tt)){case 226:Oe=ge.replace(X,"tb");break;case 232:Oe=ge.replace(X,"tb-rl");break;case 220:Oe=ge.replace(X,"lr");break;default:return ge;}return"-webkit-"+ge+"-ms-"+Oe+ge;case 1017:if(ge.indexOf("sticky",9)===-1)break;case 975:switch(tt=(ge=Ze).length-10,Oe=(ge.charCodeAt(tt)===33?ge.substring(0,tt):ge).substring(Ze.indexOf(":",7)+1).trim(),We=Oe.charCodeAt(0)+(Oe.charCodeAt(7)|0)){case 203:if(111>Oe.charCodeAt(8))break;case 115:ge=ge.replace(Oe,"-webkit-"+Oe)+";"+ge;break;case 207:case 102:ge=ge.replace(Oe,"-webkit-"+(102<We?"inline-":"")+"box")+";"+ge.replace(Oe,"-webkit-"+Oe)+";"+ge.replace(Oe,"-ms-"+Oe+"box")+";"+ge;}return ge+";";case 938:if(ge.charCodeAt(5)===45)switch(ge.charCodeAt(6)){case 105:return Oe=ge.replace("-items",""),"-webkit-"+ge+"-webkit-box-"+Oe+"-ms-flex-"+Oe+ge;case 115:return"-webkit-"+ge+"-ms-flex-item-"+ge.replace(pe,"")+ge;default:return"-webkit-"+ge+"-ms-flex-line-pack"+ge.replace("align-content","").replace(pe,"")+ge;}break;case 973:case 989:if(ge.charCodeAt(3)!==45||ge.charCodeAt(4)===122)break;case 931:case 953:if(Ie.test(Ze)===!0)return(Oe=Ze.substring(Ze.indexOf(":")+1)).charCodeAt(0)===115?o(Ze.replace("stretch","fill-available"),tt,lt,ze).replace(":fill-available",":stretch"):ge.replace(Oe,"-webkit-"+Oe)+ge.replace(Oe,"-moz-"+Oe.replace("fill-",""))+ge;break;case 962:if(ge="-webkit-"+ge+(ge.charCodeAt(5)===102?"-ms-"+ge:"")+ge,lt+ze===211&&ge.charCodeAt(13)===105&&0<ge.indexOf("transform",10))return ge.substring(0,ge.indexOf(";",27)+1).replace(L,"$1-webkit-$2")+ge;}return ge}function i(Ze,tt){var lt=Ze.indexOf(tt===1?":":"{"),ze=Ze.substring(0,tt!==3?lt:10);return lt=Ze.substring(lt+1,Ze.length-1),et(tt!==2?ze:ze.replace(ue,"$1"),lt,tt)}function a(Ze,tt){var lt=o(tt,tt.charCodeAt(0),tt.charCodeAt(1),tt.charCodeAt(2));return lt!==tt+";"?lt.replace(ne," or ($1)").substring(4):"("+tt+")"}function u(Ze,tt,lt,ze,ge,We,Oe,at,ot,Pt){for(var Mt=0,Nt=tt,Ae;Mt<Ne;++Mt)switch(Ae=Ue[Mt].call(g,Ze,Nt,lt,ze,ge,We,Oe,at,ot,Pt)){case void 0:case!1:case!0:case null:break;default:Nt=Ae;}if(Nt!==tt)return Nt}function p(Ze){switch(Ze){case void 0:case null:Ne=Ue.length=0;break;default:if(typeof Ze=="function")Ue[Ne++]=Ze;else if(typeof Ze=="object")for(var tt=0,lt=Ze.length;tt<lt;++tt)p(Ze[tt]);else st=!!Ze|0;}return p}function h(Ze){return Ze=Ze.prefix,Ze!==void 0&&(et=null,Ze?typeof Ze!="function"?Qe=1:(Qe=2,et=Ze):Qe=0),h}function g(Ze,tt){var lt=Ze;if(33>lt.charCodeAt(0)&&(lt=lt.trim()),ft=lt,lt=[ft],0<Ne){var ze=u(-1,tt,lt,lt,Ee,Te,0,0,0,0);ze!==void 0&&typeof ze=="string"&&(tt=ze)}var ge=t(qe,lt,tt,0,0);return 0<Ne&&(ze=u(-2,ge,lt,lt,Ee,Te,ge.length,0,0,0),ze!==void 0&&(ge=ze)),ft="",Ye=0,Te=Ee=1,ge}var x=/^\0+/g,b=/[\0\r\f]/g,T=/: */g,A=/zoo|gra/,L=/([,: ])(transform)/g,P=/,\r+?/g,k=/([\t\r\n ])*\f?&/g,q=/@(k\w+)\s*(\S*)\s*/,U=/::(place)/g,H=/:(read-only)/g,X=/[svh]\w+-[tblr]{2}/,ee=/\(\s*(.*)\s*\)/g,ne=/([\s\S]*?);/g,pe=/-self|flex-/g,ue=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ie=/stretch|:\s*\w+\-(?:conte|avail)/,Re=/([^-])(image-set\()/,Te=1,Ee=1,Ye=0,Qe=1,qe=[],Ue=[],Ne=0,et=null,st=0,ft="";return g.use=p,g.set=h,e!==void 0&&h(e),g}bre.default=$2r});var iYe=M(wre=>{"use strict";Object.defineProperty(wre,"__esModule",{value:!0});var Y2r=function(t){var r=new WeakMap;return function(n){if(r.has(n))return r.get(n);var o=t(n);return r.set(n,o),o}};wre.default=Y2r});var Ire=M(Sre=>{"use strict";Object.defineProperty(Sre,"__esModule",{value:!0});function Z2r(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var K2r=xre(),X2r=Z2r(oYe());iYe();var Ere="/*|*/",J2r=Ere+"}";function Q2r(e){e&&V6.current.insert(e+"}")}var V6={current:null},eIr=function(t,r,n,o,i,a,u,p,h,g){switch(t){case 1:{switch(r.charCodeAt(0)){case 64:return V6.current.insert(r+";"),"";case 108:if(r.charCodeAt(2)===98)return"";}break}case 2:{if(p===0)return r+Ere;break}case 3:switch(p){case 102:case 112:return V6.current.insert(n[0]+r),"";default:return r+(g===0?Ere:"");}case-2:r.split(J2r).forEach(Q2r);}},tIr=function(t){t===void 0&&(t={});var r=t.key||"css",n;t.prefix!==void 0&&(n={prefix:t.prefix});var o=new X2r(n),i={},a;{a=t.container||document.head;var u=document.querySelectorAll("style[data-emotion-"+r+"]");Array.prototype.forEach.call(u,function(b){var T=b.getAttribute("data-emotion-"+r);T.split(" ").forEach(function(A){i[A]=!0}),b.parentNode!==a&&a.appendChild(b)})}var p;if(o.use(t.stylisPlugins)(eIr),p=function(T,A,L,P){var k=A.name;if(V6.current=L,0)var q;o(T,A.styles),P&&(x.inserted[k]=!0)},0)var h,g;var x={key:r,sheet:new K2r.StyleSheet({key:r,container:a,nonce:t.nonce,speedy:t.speedy}),nonce:t.nonce,inserted:i,registered:{},insert:p};return x};Sre.default=tIr});var Tre=M(G6=>{"use strict";Object.defineProperty(G6,"__esModule",{value:!0});var rIr=!0;function nIr(e,t,r){var n="";return r.split(" ").forEach(function(o){e[o]!==void 0?t.push(e[o]):n+=o+" "}),n}var oIr=function(t,r,n){var o=t.key+"-"+r.name;if((n===!1||rIr===!1&&t.compat!==void 0)&&t.registered[o]===void 0&&(t.registered[o]=r.styles),t.inserted[r.name]===void 0){var i=r;do{var a=t.insert("."+o,i,t.sheet,!0);i=i.next}while(i!==void 0)}};G6.getRegisteredStyles=nIr;G6.insertStyles=oIr});var aYe=M(Mre=>{"use strict";Object.defineProperty(Mre,"__esModule",{value:!0});function iIr(e){for(var t=0,r,n=0,o=e.length;o>=4;++n,o-=4)r=e.charCodeAt(n)&255|(e.charCodeAt(++n)&255)<<8|(e.charCodeAt(++n)&255)<<16|(e.charCodeAt(++n)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(o){case 3:t^=(e.charCodeAt(n+2)&255)<<16;case 2:t^=(e.charCodeAt(n+1)&255)<<8;case 1:t^=e.charCodeAt(n)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16);}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}Mre.default=iIr});var sYe=M(Cre=>{"use strict";Object.defineProperty(Cre,"__esModule",{value:!0});var aIr={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};Cre.default=aIr});var lYe=M(Are=>{"use strict";Object.defineProperty(Are,"__esModule",{value:!0});function sIr(e){var t={};return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}Are.default=sIr});var H6=M(Ore=>{"use strict";Object.defineProperty(Ore,"__esModule",{value:!0});function Nre(e){return e&&typeof e=="object"&&"default"in e?e.default:e}var lIr=Nre(aYe()),uIr=Nre(sYe()),cIr=Nre(lYe()),fIr=/[A-Z]|^ms/g,pIr=/_EMO_([^_]+?)_([^]*?)_EMO_/g,pYe=function(t){return t.charCodeAt(1)===45},uYe=function(t){return t!=null&&typeof t!="boolean"},Dre=cIr(function(e){return pYe(e)?e:e.replace(fIr,"-$&").toLowerCase()}),cYe=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(pIr,function(n,o,i){return sd={name:o,styles:i,next:sd},o});}return uIr[t]!==1&&!pYe(t)&&typeof r=="number"&&r!==0?r+"px":r};function cA(e,t,r,n){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return sd={name:r.name,styles:r.styles,next:sd},r.name;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)sd={name:o.name,styles:o.styles,next:sd},o=o.next;var i=r.styles+";";return i}return dIr(e,t,r)}case"function":{if(e!==void 0){var a=sd,u=r(e);return sd=a,cA(e,t,u,n)}break}case"string":if(0)var p,h;break;}if(t==null)return r;var g=t[r];return g!==void 0&&!n?g:r}function dIr(e,t,r){var n="";if(Array.isArray(r))for(var o=0;o<r.length;o++)n+=cA(e,t,r[o],!1);else for(var i in r){var a=r[i];if(typeof a!="object")t!=null&&t[a]!==void 0?n+=i+"{"+t[a]+"}":uYe(a)&&(n+=Dre(i)+":"+cYe(i,a)+";");else if(Array.isArray(a)&&typeof a[0]=="string"&&(t==null||t[a[0]]===void 0))for(var u=0;u<a.length;u++)uYe(a[u])&&(n+=Dre(i)+":"+cYe(i,a[u])+";");else{var p=cA(e,t,a,!1);switch(i){case"animation":case"animationName":{n+=Dre(i)+":"+p+";";break}default:n+=i+"{"+p+"}";}}}return n}var fYe=/label:\s*([^\s;\n{]+)\s*;/g,sd,hIr=function(t,r,n){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var o=!0,i="";sd=void 0;var a=t[0];a==null||a.raw===void 0?(o=!1,i+=cA(n,r,a,!1)):i+=a[0];for(var u=1;u<t.length;u++)i+=cA(n,r,t[u],i.charCodeAt(i.length-1)===46),o&&(i+=a[u]);var p;fYe.lastIndex=0;for(var h="",g;(g=fYe.exec(i))!==null;)h+="-"+g[1];var x=lIr(i)+h;return{name:x,styles:i,next:sd}};Ore.serializeStyles=hIr});var yYe=M(u1=>{"use strict";yre();var tm=we(),mIr=Ire(),dYe=Tre(),gIr=H6();function vIr(e){return e&&e.__esModule?e:{default:e}}var yIr=vIr(mIr),Pre=Object.prototype.hasOwnProperty,mYe=tm.createContext(typeof HTMLElement!="undefined"?yIr.default():null),gYe=tm.createContext({}),_Ir=mYe.Provider,vYe=function(t){var r=function(o,i){return tm.createElement(mYe.Consumer,null,function(a){return t(o,a,i)})};return tm.forwardRef(r)},Lre="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",xIr=function(t,r){var n={};for(var o in r)Pre.call(r,o)&&(n[o]=r[o]);if(n[Lre]=t,0){var i;if(i.stack)var a}return n},bIr=function(){return null},hYe=function(t,r,n,o){var i=n===null?r.css:r.css(n);typeof i=="string"&&t.registered[i]!==void 0&&(i=t.registered[i]);var a=r[Lre],u=[i],p="";typeof r.className=="string"?p=dYe.getRegisteredStyles(t.registered,u,r.className):r.className!=null&&(p=r.className+" ");var h=gIr.serializeStyles(u);if(0)var g;var x=dYe.insertStyles(t,h,typeof a=="string");p+=t.key+"-"+h.name;var b={};for(var T in r)Pre.call(r,T)&&T!=="css"&&T!==Lre&&(b[T]=r[T]);b.ref=o,b.className=p;var A=tm.createElement(a,b),L=tm.createElement(bIr,null);return tm.createElement(tm.Fragment,null,L,A)},wIr=vYe(function(e,t,r){return typeof e.css=="function"?tm.createElement(gYe.Consumer,null,function(n){return hYe(t,e,n,r)}):hYe(t,e,null,r)});u1.CacheProvider=_Ir;u1.Emotion=wIr;u1.ThemeContext=gYe;u1.createEmotionProps=xIr;u1.hasOwnProperty=Pre;u1.withEmotionCache=vYe});var _Ye=M(kre=>{"use strict";Object.defineProperty(kre,"__esModule",{value:!0});var EIr=H6();function SIr(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return EIr.serializeStyles(t)}kre.default=SIr});var SYe=M(ep=>{"use strict";Object.defineProperty(ep,"__esModule",{value:!0});var IIr=yre(),ld=we();Ire();var ud=yYe(),jre=Tre(),Rre=H6(),TIr=xre(),MIr=_Ye();function bYe(e){return e&&e.__esModule?e:{default:e}}var CIr=bYe(IIr),wYe=bYe(MIr),EYe=function(t,r){var n=arguments;if(r==null||!ud.hasOwnProperty.call(r,"css"))return ld.createElement.apply(void 0,n);var o=n.length,i=new Array(o);i[0]=ud.Emotion,i[1]=ud.createEmotionProps(t,r);for(var a=2;a<o;a++)i[a]=n[a];return ld.createElement.apply(null,i)},AIr=ud.withEmotionCache(function(e,t){var r=e.styles;if(typeof r=="function")return ld.createElement(ud.ThemeContext.Consumer,null,function(o){var i=Rre.serializeStyles([r(o)]);return ld.createElement(xYe,{serialized:i,cache:t})});var n=Rre.serializeStyles([r]);return ld.createElement(xYe,{serialized:n,cache:t})}),xYe=function(e){CIr.default(t,e);function t(n,o,i){return e.call(this,n,o,i)||this}var r=t.prototype;return r.componentDidMount=function(){this.sheet=new TIr.StyleSheet({key:this.props.cache.key+"-global",nonce:this.props.cache.sheet.nonce,container:this.props.cache.sheet.container});var o=document.querySelector("style[data-emotion-"+this.props.cache.key+"=\""+this.props.serialized.name+"\"]");o!==null&&this.sheet.tags.push(o),this.props.cache.sheet.tags.length&&(this.sheet.before=this.props.cache.sheet.tags[0]),this.insertStyles()},r.componentDidUpdate=function(o){o.serialized.name!==this.props.serialized.name&&this.insertStyles()},r.insertStyles=function(){if(this.props.serialized.next!==void 0&&jre.insertStyles(this.props.cache,this.props.serialized.next,!0),this.sheet.tags.length){var o=this.sheet.tags[this.sheet.tags.length-1].nextElementSibling;this.sheet.before=o,this.sheet.flush()}this.props.cache.insert("",this.props.serialized,this.sheet,!1)},r.componentWillUnmount=function(){this.sheet.flush()},r.render=function(){return null},t}(ld.Component),DIr=function(){var t=wYe.default.apply(void 0,arguments),r="animation-"+t.name;return{name:r,styles:"@keyframes "+r+"{"+t.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},NIr=function e(t){for(var r=t.length,n=0,o="";n<r;n++){var i=t[n];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var u in i)i[u]&&u&&(a&&(a+=" "),a+=u)}break}default:a=i;}a&&(o&&(o+=" "),o+=a)}}return o};function OIr(e,t,r){var n=[],o=jre.getRegisteredStyles(e,n,r);return n.length<2?r:o+t(n)}var LIr=function(){return null},PIr=ud.withEmotionCache(function(e,t){return ld.createElement(ud.ThemeContext.Consumer,null,function(r){var n=!1,o=function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];var T=Rre.serializeStyles(x,t.registered);return jre.insertStyles(t,T,!1),t.key+"-"+T.name},i=function(){for(var g=arguments.length,x=new Array(g),b=0;b<g;b++)x[b]=arguments[b];return OIr(t.registered,o,NIr(x))},a={css:o,cx:i,theme:r},u=e.children(a);n=!0;var p=ld.createElement(LIr,null);return ld.createElement(ld.Fragment,null,p,u)})});ep.CacheProvider=ud.CacheProvider;ep.ThemeContext=ud.ThemeContext;ep.withEmotionCache=ud.withEmotionCache;Object.defineProperty(ep,"css",{enumerable:!0,get:function(){return wYe.default}});ep.ClassNames=PIr;ep.Global=AIr;ep.createElement=EYe;ep.jsx=EYe;ep.keyframes=DIr});var qre=M(tp=>{"use strict";Object.defineProperty(tp,"__esModule",{value:!0});tp.default=DYe;tp.skeletonStyles=tp.skeletonKeyframes=tp.defaultHighlightColor=tp.defaultBaseColor=void 0;var $xn=kIr(we()),Gw=SYe();function kIr(e){return e&&e.__esModule?e:{default:e}}function IYe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function RIr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?IYe(r,!0).forEach(function(n){jIr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):IYe(r).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jIr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TYe(){var e=qIr([`
  0% {
    background-position: -200px 0;
  }
  `,`
  100% {
    background-position: calc(200px + 100%) 0;
  }
`]);return TYe=function(){return e},e}function qIr(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var W6="#eee";tp.defaultBaseColor=W6;var MYe="#f5f5f5";tp.defaultHighlightColor=MYe;var CYe=function(t,r){return(0,Gw.keyframes)(TYe(),r>0?"".concat(Math.floor(1/(t+r)*t*100),`% {
    background-position: calc(200px + 100%) 0;
  }`):void 0)};tp.skeletonKeyframes=CYe;var AYe=(0,Gw.css)("background-color:",W6,";background-image:linear-gradient( 90deg,",W6,",",MYe,",",W6," );background-size:200px 100%;background-repeat:no-repeat;border-radius:4px;display:inline-block;line-height:1;width:100%;;label:skeletonStyles;");tp.skeletonStyles=AYe;function DYe(e){for(var t=e.count,r=e.duration,n=e.width,o=e.wrapper,i=e.height,a=e.circle,u=e.delay,p=e.style,h=e.className,g=[],x=0;x<t;x++){var b={};n!==null&&(b.width=n),i!==null&&(b.height=i),n!==null&&i!==null&&a&&(b.borderRadius="50%");var T="react-loading-skeleton";h&&(T+=" "+h),g.push((0,Gw.jsx)("span",{key:x,className:T,css:(0,Gw.css)(AYe," animation:",CYe(r,u)," ",r+u,"s ease-in-out infinite;label:Skeleton;"),style:RIr({},p,{},b)},"\u200C"))}return(0,Gw.jsx)("span",null,o?g.map(function(A,L){return(0,Gw.jsx)(o,{key:L},A,"\u200C")}):g)}DYe.defaultProps={count:1,duration:1.2,width:null,wrapper:null,height:null,circle:!1,delay:0}});var QZe=M(To=>{"use strict";var gne=Symbol.for("react.element"),vne=Symbol.for("react.portal"),vq=Symbol.for("react.fragment"),yq=Symbol.for("react.strict_mode"),_q=Symbol.for("react.profiler"),xq=Symbol.for("react.provider"),bq=Symbol.for("react.context"),pTr=Symbol.for("react.server_context"),wq=Symbol.for("react.forward_ref"),Eq=Symbol.for("react.suspense"),Sq=Symbol.for("react.suspense_list"),Iq=Symbol.for("react.memo"),Tq=Symbol.for("react.lazy"),dTr=Symbol.for("react.offscreen"),JZe;JZe=Symbol.for("react.module.reference");function ef(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gne:switch(e=e.type,e){case vq:case _q:case yq:case Eq:case Sq:return e;default:switch(e=e&&e.$$typeof,e){case pTr:case bq:case wq:case Tq:case Iq:case xq:return e;default:return t;}}case vne:return t;}}}To.ContextConsumer=bq;To.ContextProvider=xq;To.Element=gne;To.ForwardRef=wq;To.Fragment=vq;To.Lazy=Tq;To.Memo=Iq;To.Portal=vne;To.Profiler=_q;To.StrictMode=yq;To.Suspense=Eq;To.SuspenseList=Sq;To.isAsyncMode=function(){return!1};To.isConcurrentMode=function(){return!1};To.isContextConsumer=function(e){return ef(e)===bq};To.isContextProvider=function(e){return ef(e)===xq};To.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gne};To.isForwardRef=function(e){return ef(e)===wq};To.isFragment=function(e){return ef(e)===vq};To.isLazy=function(e){return ef(e)===Tq};To.isMemo=function(e){return ef(e)===Iq};To.isPortal=function(e){return ef(e)===vne};To.isProfiler=function(e){return ef(e)===_q};To.isStrictMode=function(e){return ef(e)===yq};To.isSuspense=function(e){return ef(e)===Eq};To.isSuspenseList=function(e){return ef(e)===Sq};To.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===vq||e===_q||e===yq||e===Eq||e===Sq||e===dTr||typeof e=="object"&&e!==null&&(e.$$typeof===Tq||e.$$typeof===Iq||e.$$typeof===xq||e.$$typeof===bq||e.$$typeof===wq||e.$$typeof===JZe||e.getModuleId!==void 0)};To.typeOf=ef});var tKe=M((KIn,eKe)=>{"use strict";eKe.exports=QZe()});var HJe=M(Wo=>{"use strict";var gz=60103,vz=60106,BA=60107,VA=60108,GA=60114,HA=60109,WA=60110,$A=60112,YA=60113,soe=60120,ZA=60115,KA=60116,FJe=60121,UJe=60122,BJe=60117,VJe=60129,GJe=60131;typeof Symbol=="function"&&Symbol.for&&(Ya=Symbol.for,gz=Ya("react.element"),vz=Ya("react.portal"),BA=Ya("react.fragment"),VA=Ya("react.strict_mode"),GA=Ya("react.profiler"),HA=Ya("react.provider"),WA=Ya("react.context"),$A=Ya("react.forward_ref"),YA=Ya("react.suspense"),soe=Ya("react.suspense_list"),ZA=Ya("react.memo"),KA=Ya("react.lazy"),FJe=Ya("react.block"),UJe=Ya("react.server.block"),BJe=Ya("react.fundamental"),VJe=Ya("react.debug_trace_mode"),GJe=Ya("react.legacy_hidden"));var Ya;function ap(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case gz:switch(e=e.type,e){case BA:case GA:case VA:case YA:case soe:return e;default:switch(e=e&&e.$$typeof,e){case WA:case $A:case KA:case ZA:case HA:return e;default:return t;}}case vz:return t;}}}var FMr=HA,UMr=gz,BMr=$A,VMr=BA,GMr=KA,HMr=ZA,WMr=vz,$Mr=GA,YMr=VA,ZMr=YA;Wo.ContextConsumer=WA;Wo.ContextProvider=FMr;Wo.Element=UMr;Wo.ForwardRef=BMr;Wo.Fragment=VMr;Wo.Lazy=GMr;Wo.Memo=HMr;Wo.Portal=WMr;Wo.Profiler=$Mr;Wo.StrictMode=YMr;Wo.Suspense=ZMr;Wo.isAsyncMode=function(){return!1};Wo.isConcurrentMode=function(){return!1};Wo.isContextConsumer=function(e){return ap(e)===WA};Wo.isContextProvider=function(e){return ap(e)===HA};Wo.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===gz};Wo.isForwardRef=function(e){return ap(e)===$A};Wo.isFragment=function(e){return ap(e)===BA};Wo.isLazy=function(e){return ap(e)===KA};Wo.isMemo=function(e){return ap(e)===ZA};Wo.isPortal=function(e){return ap(e)===vz};Wo.isProfiler=function(e){return ap(e)===GA};Wo.isStrictMode=function(e){return ap(e)===VA};Wo.isSuspense=function(e){return ap(e)===YA};Wo.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===BA||e===GA||e===VJe||e===VA||e===YA||e===soe||e===GJe||typeof e=="object"&&e!==null&&(e.$$typeof===KA||e.$$typeof===ZA||e.$$typeof===HA||e.$$typeof===WA||e.$$typeof===$A||e.$$typeof===BJe||e.$$typeof===FJe||e[0]===UJe)};Wo.typeOf=ap});var $Je=M((LOn,WJe)=>{"use strict";WJe.exports=HJe()});var Pnt=M((TBn,y8)=>{y8.exports.RADIUS=6378137;y8.exports.FLATTENING=1/298.257223563;y8.exports.POLAR_RADIUS=6356752.3142});var qnt=M((MBn,cae)=>{var knt=Pnt();cae.exports.geometry=jnt;cae.exports.ring=uae;function jnt(e){var t=0,r;switch(e.type){case"Polygon":return Rnt(e.coordinates);case"MultiPolygon":for(r=0;r<e.coordinates.length;r++)t+=Rnt(e.coordinates[r]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(r=0;r<e.geometries.length;r++)t+=jnt(e.geometries[r]);return t;}}function Rnt(e){var t=0;if(e&&e.length>0){t+=Math.abs(uae(e[0]));for(var r=1;r<e.length;r++)t-=Math.abs(uae(e[r]))}return t}function uae(e){var t,r,n,o,i,a,u,p=0,h=e.length;if(h>2){for(u=0;u<h;u++)u===h-2?(o=h-2,i=h-1,a=0):u===h-1?(o=h-1,i=0,a=1):(o=u,i=u+1,a=u+2),t=e[o],r=e[i],n=e[a],p+=(lae(n[0])-lae(t[0]))*Math.sin(lae(r[1]));p=p*knt.RADIUS*knt.RADIUS/2}return p}function lae(e){return e*Math.PI/180}});var pot=M((EGn,fot)=>{fot.exports=SNr;var ENr={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"};function SNr(e){if(!e||!e.type)return null;var t=ENr[e.type];if(!t)return null;if(t==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]};if(t==="feature")return{type:"FeatureCollection",features:[e]};if(t==="featurecollection")return e}});var j5r={};a2(j5r,{SettingsProvider:()=>k5r,renderApp:()=>R5r});var Uat=Z(we(),1),Bat=Z(Si(),1),jeo=Z(MX(),1);var Em=Z(we(),1);var Gs=Z(we()),Mje=Z(Si());function jsr(e){return!!e&&typeof e.then=="function"}var Vi=jsr;function qsr(e,t){if(e!=null)return e;throw new Error(t!=null?t:"Got unexpected null or undefined")}var vo=qsr,F3=class{},zsr=new F3,YX={valueMaybe(){},valueOrThrow(){throw new Error(`Loadable expected value, but in "${this.state}" state`)},errorMaybe(){},errorOrThrow(){throw new Error(`Loadable expected error, but in "${this.state}" state`)},promiseMaybe(){},promiseOrThrow(){throw new Error(`Loadable expected promise, but in "${this.state}" state`)},is(e){return e.state===this.state&&e.contents===this.contents},map(e){if(this.state==="hasError")return this;if(this.state==="hasValue")try{let r=e(this.contents);return Vi(r)?Db(r.then(n=>({__value:n}))):ZX(r)}catch(r){return Vi(r)?Db(r.next(()=>e(this.contents))):KX(r)}if(this.state==="loading")return Db(this.contents.then(r=>({__value:e(r.__value)})).catch(r=>{if(Vi(r))return r.then(()=>e(this.contents));throw r}));throw new Error("Invalid Loadable state")}};function ZX(e){return Object.freeze(qt(Se({state:"hasValue",contents:e},YX),{getValue(){return this.contents},toPromise(){return Promise.resolve(this.contents)},valueMaybe(){return this.contents},valueOrThrow(){return this.contents}}))}function KX(e){return Object.freeze(qt(Se({state:"hasError",contents:e},YX),{getValue(){throw this.contents},toPromise(){return Promise.reject(this.contents)},errorMaybe(){return this.contents},errorOrThrow(){return this.contents}}))}function Db(e){return Object.freeze(qt(Se({state:"loading",contents:e},YX),{getValue(){throw this.contents.then(({__value:t})=>t)},toPromise(){return this.contents.then(({__value:t})=>t)},promiseMaybe(){return this.contents.then(({__value:t})=>t)},promiseOrThrow(){return this.contents.then(({__value:t})=>t)}}))}function Fsr(){return Db(new Promise(()=>{}))}function Usr(e){return e.every(t=>t.state==="hasValue")?ZX(e.map(t=>t.contents)):e.some(t=>t.state==="hasError")?KX(vo(e.find(t=>t.state==="hasError"),"Invalid loadable passed to loadableAll").contents):Db(Promise.all(e.map(t=>t.contents)).then(t=>({__value:t})))}var EM={loadableWithValue:ZX,loadableWithError:KX,loadableWithPromise:Db,loadableLoading:Fsr,loadableAll:Usr,Canceled:F3,CANCELED:zsr},CX,Cje=(CX=Gs.default.useMutableSource)!==null&&CX!==void 0?CX:Gs.default.unstable_useMutableSource;function Bsr(){return Cje&&!(typeof window!="undefined"&&window.$disableRecoilValueMutableSource_TEMP_HACK_DO_NOT_USE)}var Aje={mutableSourceExists:Bsr,useMutableSource:Cje},{mutableSourceExists:Vsr}=Aje,XX=new Map().set("recoil_hamt_2020",!0).set("recoil_memory_managament_2020",!0).set("recoil_suppress_rerender_in_callback",!0);function JX(e){var t;return e==="recoil_early_rendering_2021"&&!Vsr()?!1:(t=XX.get(e))!==null&&t!==void 0?t:!1}JX.setPass=e=>{XX.set(e,!0)};JX.setFail=e=>{XX.set(e,!1)};var Ro=JX;function Gsr(e,t,{error:r}={}){return null}var Hsr=Gsr,Yp=Hsr;function Wsr(e,t){let r=new Set(e);return r.add(t),r}function $sr(e,t){let r=new Set(e);return r.delete(t),r}function Ysr(e,t,r){let n=new Map(e);return n.set(t,r),n}function Zsr(e,t,r){let n=new Map(e);return n.set(t,r(n.get(t))),n}function Ksr(e,t){let r=new Map(e);return r.delete(t),r}function Xsr(e,t){let r=new Map(e);return t.forEach(n=>r.delete(n)),r}var Dje={setByAddingToSet:Wsr,setByDeletingFromSet:$sr,mapBySettingInMap:Ysr,mapByUpdatingInMap:Zsr,mapByDeletingFromMap:Ksr,mapByDeletingMultipleFromMap:Xsr};function*Jsr(e,t){let r=0;for(let n of e)t(n,r++)&&(yield n)}var Nje=Jsr;function Qsr(e,t){return function*(){let r=0;for(let n of e)yield t(n,r++)}()}var Oje=Qsr;function elr(e,...t){}var tlr=elr,QX=tlr;function $n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xM=class{constructor(t){$n(this,"key",void 0),this.key=t}},U3=class extends xM{},B3=class extends xM{};function rlr(e){return e instanceof U3||e instanceof B3}var Q3={AbstractRecoilValue:xM,RecoilState:U3,RecoilValueReadOnly:B3,isRecoilValue:rlr},nlr=Q3.AbstractRecoilValue,olr=Q3.RecoilState,ilr=Q3.RecoilValueReadOnly,alr=Q3.isRecoilValue,iv=Object.freeze({__proto__:null,AbstractRecoilValue:nlr,RecoilState:olr,RecoilValueReadOnly:ilr,isRecoilValue:alr}),V3=class{},slr=new V3,OX=class extends Error{constructor(t){super(`Tried to set the value of Recoil selector ${t} using an updater function, but it is an async selector in a pending or error state; this is not supported.`)}},O0=new Map,eJ=new Map;function llr(e){return Oje(e,t=>vo(eJ.get(t)))}function ulr(e){if(O0.has(e.key)){let r=`Duplicate atom key "${e.key}". This is a FATAL ERROR in
      production. But it is safe to ignore this warning if it occurred because of
      hot module replacement.`;console.warn(r)}O0.set(e.key,e);let t=e.set==null?new iv.RecoilValueReadOnly(e.key):new iv.RecoilState(e.key);return eJ.set(e.key,t),t}var G3=class extends Error{};function clr(e){let t=O0.get(e);if(t==null)throw new G3(`Missing definition for RecoilValue: "${e}""`);return t}function flr(e){return O0.get(e)}var H3=new Map;function plr(e){var t;if(!Ro("recoil_memory_managament_2020"))return;let r=O0.get(e);if(!(r==null||(t=r.shouldDeleteConfigOnRelease)===null||t===void 0)&&t.call(r)){var n;O0.delete(e),(n=Lje(e))===null||n===void 0||n(),H3.delete(e)}}function dlr(e,t){Ro("recoil_memory_managament_2020")&&(t===void 0?H3.delete(e):H3.set(e,t))}function Lje(e){return H3.get(e)}var Rc={nodes:O0,recoilValues:eJ,registerNode:ulr,getNode:clr,getNodeMaybe:flr,deleteNodeConfigIfPossible:plr,setConfigDeletionHandler:dlr,getConfigDeletionHandler:Lje,recoilValuesForKeys:llr,NodeMissingError:G3,DefaultValue:V3,DEFAULT_VALUE:slr,RecoilValueNotReady:OX},W3=class{};function hlr(){return new W3}var eP={RetentionZone:W3,retentionZone:hlr},{setByAddingToSet:mlr}=Dje,{getNode:tP,getNodeMaybe:glr,recoilValuesForKeys:cje}=Rc,{RetentionZone:fje}=eP,vlr=Object.freeze(new Set),LX=class extends Error{};function ylr(e,t,r){if(!Ro("recoil_memory_managament_2020"))return()=>{};let{nodesRetainedByZone:n}=e.getState().retention;function o(i){let a=n.get(i);a||n.set(i,a=new Set),a.add(t)}if(r instanceof fje)o(r);else if(Array.isArray(r))for(let i of r)o(i);return()=>{if(!Ro("recoil_memory_managament_2020"))return;let i=e.getState().retention.nodesRetainedByZone;function a(u){let p=i.get(u);p&&p.delete(t),p&&p.size===0&&i.delete(u)}if(r instanceof fje)a(r);else if(Array.isArray(r))for(let u of r)a(u)}}function tJ(e,t,r,n){let o=e.getState();if(o.nodeCleanupFunctions.has(r))return;let i=tP(r),a=ylr(e,r,i.retainedBy),u=i.init(e,t,n);o.nodeCleanupFunctions.set(r,()=>{u(),a()})}function _lr(e,t){var r;let n=e.getState();(r=n.nodeCleanupFunctions.get(t))===null||r===void 0||r(),n.nodeCleanupFunctions.delete(t)}function xlr(e,t,r){return tJ(e,t,r,"get"),tP(r).get(e,t)}function Pje(e,t,r){return tP(r).peek(e,t)}function blr(e,t,r){var n;let o=glr(t);return o==null||(n=o.invalidate)===null||n===void 0||n.call(o,e),qt(Se({},e),{atomValues:e.atomValues.clone().delete(t),nonvalidatedAtoms:e.nonvalidatedAtoms.clone().set(t,r),dirtyAtoms:mlr(e.dirtyAtoms,t)})}function wlr(e,t,r,n){let o=tP(r);if(o.set==null)throw new LX(`Attempt to set read-only RecoilValue: ${r}`);let i=o.set;return tJ(e,t,r,"set"),i(e,t,n)}function Elr(e,t,r){var n,o,i;let a=e.getState(),u=e.getGraph(t.version),p=a.knownAtoms.has(r)?"atom":a.knownSelectors.has(r)?"selector":void 0,h=Nje(kje(e,t,new Set([r])),g=>g!==r);return{loadable:Pje(e,t,r),isActive:a.knownAtoms.has(r)||a.knownSelectors.has(r),isSet:p==="selector"?!1:t.atomValues.has(r),isModified:t.dirtyAtoms.has(r),type:p,deps:cje((n=u.nodeDeps.get(r))!==null&&n!==void 0?n:[]),subscribers:{nodes:cje(h),components:Oje((o=(i=a.nodeToComponentSubscriptions.get(r))===null||i===void 0?void 0:i.values())!==null&&o!==void 0?o:[],([g])=>({name:g}))}}}function kje(e,t,r){let n=new Set,o=Array.from(r),i=e.getGraph(t.version);for(let u=o.pop();u;u=o.pop()){var a;n.add(u);let p=(a=i.nodeToNodeSubscriptions.get(u))!==null&&a!==void 0?a:vlr;for(let h of p)n.has(h)||o.push(h)}return n}var Pb={getNodeLoadable:xlr,peekNodeLoadable:Pje,setNodeValue:wlr,cleanUpNode:_lr,setUnvalidatedAtomValue_DEPRECATED:blr,peekNodeInfo:Elr,getDownstreamNodes:kje,initializeNodeIfNewToStore:tJ},{CANCELED:Slr}=EM,{getDownstreamNodes:Ilr,getNodeLoadable:Rje,setNodeValue:Tlr}=Pb,{getNodeMaybe:jje}=Rc,{DefaultValue:rJ,RecoilValueNotReady:Mlr}=Rc,{AbstractRecoilValue:Clr,RecoilState:Alr,RecoilValueReadOnly:Dlr,isRecoilValue:Nlr}=iv;function Olr(e,{key:t},r=e.getState().currentTree){var n,o;let i=e.getState();r.version===i.currentTree.version||r.version===((n=i.nextTree)===null||n===void 0?void 0:n.version)||r.version===((o=i.previousTree)===null||o===void 0?void 0:o.version)||Yp("Tried to read from a discarded tree");let a=Rje(e,r,t);return a.state==="loading"&&a.contents.catch(()=>Slr),a}function Llr(e,t){let r=e.clone();return t.forEach((n,o)=>{n.state==="hasValue"&&n.contents instanceof rJ?r.delete(o):r.set(o,n)}),r}function Plr(e,t,{key:r},n){if(typeof n=="function"){let o=Rje(e,t,r);if(o.state==="loading")throw new Mlr(r);if(o.state==="hasError")throw o.contents;return n(o.contents)}else return n}function klr(e,t,r){if(r.type==="set"){let{recoilValue:o,valueOrUpdater:i}=r,a=Plr(e,t,o,i),u=Tlr(e,t,o.key,a);for(let[p,h]of u.entries())PX(t,p,h)}else if(r.type==="setLoadable"){let{recoilValue:{key:o},loadable:i}=r;PX(t,o,i)}else if(r.type==="markModified"){let{recoilValue:{key:o}}=r;t.dirtyAtoms.add(o)}else if(r.type==="setUnvalidated"){var n;let{recoilValue:{key:o},unvalidatedValue:i}=r,a=jje(o);a==null||(n=a.invalidate)===null||n===void 0||n.call(a,t),t.atomValues.delete(o),t.nonvalidatedAtoms.set(o,i),t.dirtyAtoms.add(o)}else Yp(`Unknown action ${r.type}`)}function PX(e,t,r){r.state==="hasValue"&&r.contents instanceof rJ?e.atomValues.delete(t):e.atomValues.set(t,r),e.dirtyAtoms.add(t),e.nonvalidatedAtoms.delete(t)}function qje(e,t){e.replaceState(r=>{let n=zje(r);for(let o of t)klr(e,n,o);return kX(e,n),n})}function rP(e,t){if(yM.length){let r=yM[yM.length-1],n=r.get(e);n||r.set(e,n=[]),n.push(t)}else qje(e,[t])}var yM=[];function Rlr(){let e=new Map;return yM.push(e),()=>{for(let[r,n]of e)qje(r,n);yM.pop()!==e&&Yp("Incorrect order of batch popping")}}function zje(e){return qt(Se({},e),{atomValues:e.atomValues.clone(),nonvalidatedAtoms:e.nonvalidatedAtoms.clone(),dirtyAtoms:new Set(e.dirtyAtoms)})}function kX(e,t){let r=Ilr(e,t,t.dirtyAtoms);for(let i of r){var n,o;(n=jje(i))===null||n===void 0||(o=n.invalidate)===null||o===void 0||o.call(n,t)}}function Fje(e,t,r){rP(e,{type:"set",recoilValue:t,valueOrUpdater:r})}function jlr(e,t,r){if(r instanceof rJ)return Fje(e,t,r);rP(e,{type:"setLoadable",recoilValue:t,loadable:r})}function qlr(e,t){rP(e,{type:"markModified",recoilValue:t})}function zlr(e,t,r){rP(e,{type:"setUnvalidated",recoilValue:t,unvalidatedValue:r})}var Flr=0;function Ulr(e,{key:t},r,n=null){let o=Flr++,i=e.getState();if(i.nodeToComponentSubscriptions.has(t)||i.nodeToComponentSubscriptions.set(t,new Map),vo(i.nodeToComponentSubscriptions.get(t)).set(o,[n!=null?n:"<not captured>",r]),Ro("recoil_early_rendering_2021")){let a=e.getState().nextTree;a&&a.dirtyAtoms.has(t)&&r(a)}return{release:()=>{let a=e.getState(),u=a.nodeToComponentSubscriptions.get(t);if(u===void 0||!u.has(o)){Yp(`Subscription missing at release time for atom ${t}. This is a bug in Recoil.`);return}u.delete(o),u.size===0&&a.nodeToComponentSubscriptions.delete(t)}}}var L0={RecoilValueReadOnly:Dlr,AbstractRecoilValue:Clr,RecoilState:Alr,getRecoilValueAsLoadable:Olr,setRecoilValue:Fje,setRecoilValueLoadable:jlr,markRecoilValueModified:qlr,setUnvalidatedRecoilValue:zlr,subscribeToRecoilValue:Ulr,isRecoilValue:Nlr,applyAtomValueWrites:Llr,batchStart:Rlr,writeLoadableToTreeState:PX,invalidateDownstreams:kX,copyTreeState:zje,invalidateDownstreams_FOR_TESTING:kX},{unstable_batchedUpdates:Blr}=Mje.default,Vlr={unstable_batchedUpdates:Blr},{unstable_batchedUpdates:Glr}=Vlr,Hlr={unstable_batchedUpdates:Glr},{batchStart:Wlr}=L0,{unstable_batchedUpdates:$lr}=Hlr,nJ=$lr,Ylr=e=>{nJ=e},Zlr=()=>nJ,Klr=e=>{nJ(()=>{let t=()=>{};try{t=Wlr(),e()}finally{t()}})},oJ={getBatcher:Zlr,setBatcher:Ylr,batchUpdates:Klr};function Xlr(e,t){t()}var Jlr={enqueueExecution:Xlr};function Qlr(e,...t){let r=new Set;e:for(let n of e){for(let o of t)if(o.has(n))continue e;r.add(n)}return r}var $3=Qlr;function eur(e,t){let r=new Map;return e.forEach((n,o)=>{r.set(o,t(n,o))}),r}var Y3=eur;function tur(){return{nodeDeps:new Map,nodeToNodeSubscriptions:new Map}}function rur(e){return{nodeDeps:Y3(e.nodeDeps,t=>new Set(t)),nodeToNodeSubscriptions:Y3(e.nodeToNodeSubscriptions,t=>new Set(t))}}function AX(e,t,r){let{nodeDeps:n,nodeToNodeSubscriptions:o}=t;e.forEach((i,a)=>{let u=n.get(a);if(u&&r&&u!==r.nodeDeps.get(a))return;n.set(a,new Set(i)),(u==null?i:$3(i,u)).forEach(h=>{o.has(h)||o.set(h,new Set),vo(o.get(h)).add(a)}),u&&$3(u,i).forEach(g=>{if(!o.has(g))return;let x=vo(o.get(g));x.delete(a),x.size===0&&o.delete(g)})})}function nur(e,t,r){var n,o,i,a;let u=t.getState();r===u.currentTree.version||r===((n=u.nextTree)===null||n===void 0?void 0:n.version)||r===((o=u.previousTree)===null||o===void 0?void 0:o.version)||Yp("Tried to save dependencies to a discarded tree");let p=t.getGraph(r);if(AX(e,p),r===((i=u.previousTree)===null||i===void 0?void 0:i.version)){let g=t.getGraph(u.currentTree.version);AX(e,g,p)}if(r===((a=u.previousTree)===null||a===void 0?void 0:a.version)||r===u.currentTree.version){var h;let g=(h=u.nextTree)===null||h===void 0?void 0:h.version;if(g!==void 0){let x=t.getGraph(g);AX(e,x,p)}}}function our(e,t){e.forEach((r,n)=>{t.has(n)||t.set(n,new Set);let o=vo(t.get(n));r.forEach(i=>o.add(i))})}function iur(e,t,r){r.has(e)||r.set(e,new Set),vo(r.get(e)).add(t)}var SM={addToDependencyMap:iur,cloneGraph:rur,graph:tur,mergeDepsIntoDependencyMap:our,saveDependencyMapToStore:nur};function aur(e,t){return t={exports:{}},e(t,t.exports),t.exports}var sur=aur(function(e){var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Pe){return typeof Pe}:function(Pe){return Pe&&typeof Symbol=="function"&&Pe.constructor===Symbol&&Pe!==Symbol.prototype?"symbol":typeof Pe},r={},n=5,o=Math.pow(2,n),i=o-1,a=o/2,u=o/4,p={},h=function(Ge){return function(){return Ge}},g=r.hash=function(Pe){var Ge=typeof Pe=="undefined"?"undefined":t(Pe);if(Ge==="number")return Pe;Ge!=="string"&&(Pe+="");for(var wt=0,Zt=0,Ht=Pe.length;Zt<Ht;++Zt){var ae=Pe.charCodeAt(Zt);wt=(wt<<5)-wt+ae|0}return wt},x=function(Ge){return Ge-=Ge>>1&1431655765,Ge=(Ge&858993459)+(Ge>>2&858993459),Ge=Ge+(Ge>>4)&252645135,Ge+=Ge>>8,Ge+=Ge>>16,Ge&127},b=function(Ge,wt){return wt>>>Ge&i},T=function(Ge){return 1<<Ge},A=function(Ge,wt){return x(Ge&wt-1)},L=function(Ge,wt,Zt,Ht){var ae=Ht;if(!Ge){var $=Ht.length;ae=new Array($);for(var W=0;W<$;++W)ae[W]=Ht[W]}return ae[wt]=Zt,ae},P=function(Ge,wt,Zt){var Ht=Zt.length-1,ae=0,$=0,W=Zt;if(Ge)ae=$=wt;else for(W=new Array(Ht);ae<wt;)W[$++]=Zt[ae++];for(++ae;ae<=Ht;)W[$++]=Zt[ae++];return Ge&&(W.length=Ht),W},k=function(Ge,wt,Zt,Ht){var ae=Ht.length;if(Ge){for(var $=ae;$>=wt;)Ht[$--]=Ht[$];return Ht[wt]=Zt,Ht}for(var W=0,J=0,se=new Array(ae+1);W<wt;)se[J++]=Ht[W++];for(se[wt]=Zt;W<ae;)se[++J]=Ht[W++];return se},q=1,U=2,H=3,X=4,ee={__hamt_isEmpty:!0},ne=function(Ge){return Ge===ee||Ge&&Ge.__hamt_isEmpty},pe=function(Ge,wt,Zt,Ht){return{type:q,edit:Ge,hash:wt,key:Zt,value:Ht,_modify:Ne}},ue=function(Ge,wt,Zt){return{type:U,edit:Ge,hash:wt,children:Zt,_modify:et}},Ie=function(Ge,wt,Zt){return{type:H,edit:Ge,mask:wt,children:Zt,_modify:st}},Re=function(Ge,wt,Zt){return{type:X,edit:Ge,size:wt,children:Zt,_modify:ft}},Te=function(Ge){return Ge===ee||Ge.type===q||Ge.type===U},Ee=function(Ge,wt,Zt,Ht,ae){for(var $=[],W=Ht,J=0,se=0;W;++se)W&1&&($[se]=ae[J++]),W>>>=1;return $[wt]=Zt,Re(Ge,J+1,$)},Ye=function(Ge,wt,Zt,Ht){for(var ae=new Array(wt-1),$=0,W=0,J=0,se=Ht.length;J<se;++J)if(J!==Zt){var be=Ht[J];be&&!ne(be)&&(ae[$++]=be,W|=1<<J)}return Ie(Ge,W,ae)},Qe=function Pe(Ge,wt,Zt,Ht,ae,$){if(Zt===ae)return ue(Ge,Zt,[$,Ht]);var W=b(wt,Zt),J=b(wt,ae);return Ie(Ge,T(W)|T(J),W===J?[Pe(Ge,wt+n,Zt,Ht,ae,$)]:W<J?[Ht,$]:[$,Ht])},qe=function(Ge,wt,Zt,Ht,ae,$,W,J){for(var se=ae.length,be=0;be<se;++be){var De=ae[be];if(Zt(W,De.key)){var je=De.value,_e=$(je);return _e===je?ae:_e===p?(--J.value,P(Ge,be,ae)):L(Ge,be,pe(wt,Ht,W,_e),ae)}}var Je=$();return Je===p?ae:(++J.value,L(Ge,se,pe(wt,Ht,W,Je),ae))},Ue=function(Ge,wt){return Ge===wt.edit},Ne=function(Ge,wt,Zt,Ht,ae,$,W){if(wt($,this.key)){var J=Ht(this.value);return J===this.value?this:J===p?(--W.value,ee):Ue(Ge,this)?(this.value=J,this):pe(Ge,ae,$,J)}var se=Ht();return se===p?this:(++W.value,Qe(Ge,Zt,this.hash,this,ae,pe(Ge,ae,$,se)))},et=function(Ge,wt,Zt,Ht,ae,$,W){if(ae===this.hash){var J=Ue(Ge,this),se=qe(J,Ge,wt,this.hash,this.children,Ht,$,W);return se===this.children?this:se.length>1?ue(Ge,this.hash,se):se[0]}var be=Ht();return be===p?this:(++W.value,Qe(Ge,Zt,this.hash,this,ae,pe(Ge,ae,$,be)))},st=function(Ge,wt,Zt,Ht,ae,$,W){var J=this.mask,se=this.children,be=b(Zt,ae),De=T(be),je=A(J,De),_e=J&De,Je=_e?se[je]:ee,pt=Je._modify(Ge,wt,Zt+n,Ht,ae,$,W);if(Je===pt)return this;var Xe=Ue(Ge,this),Dt=J,ur=void 0;if(_e&&ne(pt)){if(Dt&=~De,!Dt)return ee;if(se.length<=2&&Te(se[je^1]))return se[je^1];ur=P(Xe,je,se)}else if(!_e&&!ne(pt)){if(se.length>=a)return Ee(Ge,be,pt,J,se);Dt|=De,ur=k(Xe,je,pt,se)}else ur=L(Xe,je,pt,se);return Xe?(this.mask=Dt,this.children=ur,this):Ie(Ge,Dt,ur)},ft=function(Ge,wt,Zt,Ht,ae,$,W){var J=this.size,se=this.children,be=b(Zt,ae),De=se[be],je=(De||ee)._modify(Ge,wt,Zt+n,Ht,ae,$,W);if(De===je)return this;var _e=Ue(Ge,this),Je=void 0;if(ne(De)&&!ne(je))++J,Je=L(_e,be,je,se);else if(!ne(De)&&ne(je)){if(--J,J<=u)return Ye(Ge,J,be,se);Je=L(_e,be,ee,se)}else Je=L(_e,be,je,se);return _e?(this.size=J,this.children=Je,this):Re(Ge,J,Je)};ee._modify=function(Pe,Ge,wt,Zt,Ht,ae,$){var W=Zt();return W===p?ee:(++$.value,pe(Pe,Ht,ae,W))};function Ze(Pe,Ge,wt,Zt,Ht){this._editable=Pe,this._edit=Ge,this._config=wt,this._root=Zt,this._size=Ht}Ze.prototype.setTree=function(Pe,Ge){return this._editable?(this._root=Pe,this._size=Ge,this):Pe===this._root?this:new Ze(this._editable,this._edit,this._config,Pe,Ge)};var tt=r.tryGetHash=function(Pe,Ge,wt,Zt){for(var Ht=Zt._root,ae=0,$=Zt._config.keyEq;;)switch(Ht.type){case q:return $(wt,Ht.key)?Ht.value:Pe;case U:{if(Ge===Ht.hash)for(var W=Ht.children,J=0,se=W.length;J<se;++J){var be=W[J];if($(wt,be.key))return be.value}return Pe}case H:{var De=b(ae,Ge),je=T(De);if(Ht.mask&je){Ht=Ht.children[A(Ht.mask,je)],ae+=n;break}return Pe}case X:{if(Ht=Ht.children[b(ae,Ge)],Ht){ae+=n;break}return Pe}default:return Pe;}};Ze.prototype.tryGetHash=function(Pe,Ge,wt){return tt(Pe,Ge,wt,this)};var lt=r.tryGet=function(Pe,Ge,wt){return tt(Pe,wt._config.hash(Ge),Ge,wt)};Ze.prototype.tryGet=function(Pe,Ge){return lt(Pe,Ge,this)};var ze=r.getHash=function(Pe,Ge,wt){return tt(void 0,Pe,Ge,wt)};Ze.prototype.getHash=function(Pe,Ge){return ze(Pe,Ge,this)};var ge=r.get=function(Pe,Ge){return tt(void 0,Ge._config.hash(Pe),Pe,Ge)};Ze.prototype.get=function(Pe,Ge){return lt(Ge,Pe,this)};var We=r.has=function(Pe,Ge,wt){return tt(p,Pe,Ge,wt)!==p};Ze.prototype.hasHash=function(Pe,Ge){return We(Pe,Ge,this)};var Oe=r.has=function(Pe,Ge){return We(Ge._config.hash(Pe),Pe,Ge)};Ze.prototype.has=function(Pe){return Oe(Pe,this)};var at=function(Ge,wt){return Ge===wt};r.make=function(Pe){return new Ze(0,0,{keyEq:Pe&&Pe.keyEq||at,hash:Pe&&Pe.hash||g},ee,0)},r.empty=r.make();var ot=r.isEmpty=function(Pe){return Pe&&!!ne(Pe._root)};Ze.prototype.isEmpty=function(){return ot(this)};var Pt=r.modifyHash=function(Pe,Ge,wt,Zt){var Ht={value:Zt._size},ae=Zt._root._modify(Zt._editable?Zt._edit:NaN,Zt._config.keyEq,0,Pe,Ge,wt,Ht);return Zt.setTree(ae,Ht.value)};Ze.prototype.modifyHash=function(Pe,Ge,wt){return Pt(wt,Pe,Ge,this)};var Mt=r.modify=function(Pe,Ge,wt){return Pt(Pe,wt._config.hash(Ge),Ge,wt)};Ze.prototype.modify=function(Pe,Ge){return Mt(Ge,Pe,this)};var Nt=r.setHash=function(Pe,Ge,wt,Zt){return Pt(h(wt),Pe,Ge,Zt)};Ze.prototype.setHash=function(Pe,Ge,wt){return Nt(Pe,Ge,wt,this)};var Ae=r.set=function(Pe,Ge,wt){return Nt(wt._config.hash(Pe),Pe,Ge,wt)};Ze.prototype.set=function(Pe,Ge){return Ae(Pe,Ge,this)};var Lt=h(p),Wt=r.removeHash=function(Pe,Ge,wt){return Pt(Lt,Pe,Ge,wt)};Ze.prototype.removeHash=Ze.prototype.deleteHash=function(Pe,Ge){return Wt(Pe,Ge,this)};var Ct=r.remove=function(Pe,Ge){return Wt(Ge._config.hash(Pe),Pe,Ge)};Ze.prototype.remove=Ze.prototype.delete=function(Pe){return Ct(Pe,this)};var ce=r.beginMutation=function(Pe){return new Ze(Pe._editable+1,Pe._edit+1,Pe._config,Pe._root,Pe._size)};Ze.prototype.beginMutation=function(){return ce(this)};var Fe=r.endMutation=function(Pe){return Pe._editable=Pe._editable&&Pe._editable-1,Pe};Ze.prototype.endMutation=function(){return Fe(this)};var Be=r.mutate=function(Pe,Ge){var wt=ce(Ge);return Pe(wt),Fe(wt)};Ze.prototype.mutate=function(Pe){return Be(Pe,this)};var mt=function(Ge){return Ge&&yt(Ge[0],Ge[1],Ge[2],Ge[3],Ge[4])},yt=function(Ge,wt,Zt,Ht,ae){for(;Zt<Ge;){var $=wt[Zt++];if($&&!ne($))return gt($,Ht,[Ge,wt,Zt,Ht,ae])}return mt(ae)},gt=function(Ge,wt,Zt){switch(Ge.type){case q:return{value:wt(Ge),rest:Zt};case U:case X:case H:var Ht=Ge.children;return yt(Ht.length,Ht,0,wt,Zt);default:return mt(Zt);}},_t={done:!0};function Yt(Pe){this.v=Pe}Yt.prototype.next=function(){if(!this.v)return _t;var Pe=this.v;return this.v=mt(Pe.rest),Pe},Yt.prototype[Symbol.iterator]=function(){return this};var nt=function(Ge,wt){return new Yt(gt(Ge._root,wt))},zr=function(Ge){return[Ge.key,Ge.value]},on=r.entries=function(Pe){return nt(Pe,zr)};Ze.prototype.entries=Ze.prototype[Symbol.iterator]=function(){return on(this)};var pa=function(Ge){return Ge.key},da=r.keys=function(Pe){return nt(Pe,pa)};Ze.prototype.keys=function(){return da(this)};var St=function(Ge){return Ge.value},Vr=r.values=Ze.prototype.values=function(Pe){return nt(Pe,St)};Ze.prototype.values=function(){return Vr(this)};var Er=r.fold=function(Pe,Ge,wt){var Zt=wt._root;if(Zt.type===q)return Pe(Ge,Zt.value,Zt.key);for(var Ht=[Zt.children],ae=void 0;ae=Ht.pop();)for(var $=0,W=ae.length;$<W;){var J=ae[$++];J&&J.type&&(J.type===q?Ge=Pe(Ge,J.value,J.key):Ht.push(J.children))}return Ge};Ze.prototype.fold=function(Pe,Ge){return Er(Pe,Ge,this)};var Qi=r.forEach=function(Pe,Ge){return Er(function(wt,Zt,Ht){return Pe(Zt,Ht,Ge)},null,Ge)};Ze.prototype.forEach=function(Pe){return Qi(Pe,this)};var Ta=r.count=function(Pe){return Pe._size};Ze.prototype.count=function(){return Ta(this)},Object.defineProperty(Ze.prototype,"size",{get:Ze.prototype.count}),e.exports?e.exports=r:(void 0).hamt=r}),RX=class{constructor(t){$n(this,"_map",void 0),this._map=new Map(t==null?void 0:t.entries())}keys(){return this._map.keys()}entries(){return this._map.entries()}get(t){return this._map.get(t)}has(t){return this._map.has(t)}set(t,r){return this._map.set(t,r),this}delete(t){return this._map.delete(t),this}clone(){return iJ(this)}toMap(){return new Map(this._map)}},jX=class e{constructor(t){if($n(this,"_hamt",sur.empty.beginMutation()),t instanceof e){let r=t._hamt.endMutation();t._hamt=r.beginMutation(),this._hamt=r.beginMutation()}else if(t)for(let[r,n]of t.entries())this._hamt.set(r,n)}keys(){return this._hamt.keys()}entries(){return this._hamt.entries()}get(t){return this._hamt.get(t)}has(t){return this._hamt.has(t)}set(t,r){return this._hamt.set(t,r),this}delete(t){return this._hamt.delete(t),this}clone(){return iJ(this)}toMap(){return new Map(this._hamt)}};function iJ(e){return Ro("recoil_hamt_2020")?new jX(e):new RX(e)}var lur={persistentMap:iJ},uur=lur.persistentMap,cur=Object.freeze({__proto__:null,persistentMap:uur}),{graph:fur}=SM,{persistentMap:pje}=cur,pur=0,Uje=()=>pur++;function Bje(){let e=Uje();return{version:e,stateID:e,transactionMetadata:{},dirtyAtoms:new Set,atomValues:pje(),nonvalidatedAtoms:pje()}}function dur(){let e=Bje();return{currentTree:e,nextTree:null,previousTree:null,commitDepth:0,knownAtoms:new Set,knownSelectors:new Set,transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(e.version,fur()),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}var Vje={makeEmptyTreeState:Bje,makeEmptyStoreState:dur,getNextTreeStateVersion:Uje};function hur(...e){let t=new Set;for(let r of e)for(let n of r)t.add(n);return t}var mur=hur;function gur(e,t,r){let n=e.entries(),o=n.next();for(;!o.done;){let i=o.value;if(t.call(r,i[1],i[0],e))return!0;o=n.next()}return!1}var vur=gur,{cleanUpNode:yur}=Pb,{deleteNodeConfigIfPossible:_ur,getNode:Gje}=Rc,{RetentionZone:Hje}=eP,Wje=new Set;function $je(e,t){let r=e.getState(),n=r.currentTree;if(r.nextTree){Yp("releaseNodesNowOnCurrentTree should only be called at the end of a batch");return}let o=new Set;for(let a of t)if(a instanceof Hje)for(let u of Eur(r,a))o.add(u);else o.add(a);let i=xur(e,o);for(let a of i)wur(e,n,a)}function xur(e,t){let r=e.getState(),n=r.currentTree,o=e.getGraph(n.version),i=new Set,a=new Set;return u(t),i;function u(p){let h=new Set,g=bur(e,n,p,i,a);for(let A of g){var x;if(Gje(A).retainedBy==="recoilRoot"){a.add(A);continue}if(((x=r.retention.referenceCounts.get(A))!==null&&x!==void 0?x:0)>0){a.add(A);continue}if(Yje(A).some(P=>r.retention.referenceCounts.get(P))){a.add(A);continue}let L=o.nodeToNodeSubscriptions.get(A);if(L&&vur(L,P=>a.has(P))){a.add(A);continue}i.add(A),h.add(A)}let b=new Set;for(let A of h)for(let L of(T=o.nodeDeps.get(A))!==null&&T!==void 0?T:Wje){var T;i.has(L)||b.add(L)}b.size&&u(b)}}function bur(e,t,r,n,o){let i=e.getGraph(t.version),a=[],u=new Set;for(;r.size>0;)p(vo(r.values().next().value));return a;function p(h){if(n.has(h)||o.has(h)){r.delete(h);return}if(u.has(h))return;let g=i.nodeToNodeSubscriptions.get(h);if(g)for(let x of g)p(x);u.add(h),r.delete(h),a.push(h)}}function wur(e,t,r){if(!Ro("recoil_memory_managament_2020"))return;yur(e,r);let n=e.getState();n.knownAtoms.delete(r),n.knownSelectors.delete(r),n.nodeTransactionSubscriptions.delete(r),n.retention.referenceCounts.delete(r);let o=Yje(r);for(let p of o){var i;(i=n.retention.nodesRetainedByZone.get(p))===null||i===void 0||i.delete(r)}t.atomValues.delete(r),t.dirtyAtoms.delete(r),t.nonvalidatedAtoms.delete(r);let a=n.graphsByVersion.get(t.version);if(a){let p=a.nodeDeps.get(r);if(p!==void 0){a.nodeDeps.delete(r);for(let h of p){var u;(u=a.nodeToNodeSubscriptions.get(h))===null||u===void 0||u.delete(r)}}a.nodeToNodeSubscriptions.delete(r)}_ur(r)}function Eur(e,t){var r;return(r=e.retention.nodesRetainedByZone.get(t))!==null&&r!==void 0?r:Wje}function Yje(e){let t=Gje(e).retainedBy;return t===void 0||t==="components"||t==="recoilRoot"?[]:t instanceof Hje?[t]:t}function Sur(e,t){let r=e.getState();r.nextTree?r.retention.retainablesToCheckForRelease.add(t):$je(e,new Set([t]))}function Iur(e,t,r){var n;if(!Ro("recoil_memory_managament_2020"))return;let o=e.getState().retention.referenceCounts,i=((n=o.get(t))!==null&&n!==void 0?n:0)+r;i===0?Zje(e,t):o.set(t,i)}function Zje(e,t){if(!Ro("recoil_memory_managament_2020"))return;e.getState().retention.referenceCounts.delete(t),Sur(e,t)}function Tur(e){if(!Ro("recoil_memory_managament_2020"))return;let t=e.getState();$je(e,t.retention.retainablesToCheckForRelease),t.retention.retainablesToCheckForRelease.clear()}function Mur(e){return e===void 0?"recoilRoot":e}var IM={updateRetainCount:Iur,updateRetainCountToZero:Zje,releaseScheduledRetainablesNow:Tur,retainedByOptionWithDefault:Mur};function*Cur(e){for(let t of e)for(let r of t)yield r}var Aur=Cur,Dur=typeof window=="undefined",Nur=typeof navigator!="undefined"&&navigator.product==="ReactNative",aJ={isSSR:Dur,isReactNative:Nur},{isSSR:Our}=aJ,{batchUpdates:qX}=oJ,{initializeNodeIfNewToStore:Lur,peekNodeInfo:Pur}=Pb,{graph:kur}=SM,{DEFAULT_VALUE:Rur,recoilValues:dje,recoilValuesForKeys:hje}=Rc,{AbstractRecoilValue:jur,getRecoilValueAsLoadable:qur,setRecoilValue:mje,setUnvalidatedRecoilValue:zur}=L0,{updateRetainCount:z3}=IM,{getNextTreeStateVersion:Fur,makeEmptyStoreState:Uur}=Vje;var Ob=class{constructor(t){$n(this,"_store",void 0),$n(this,"_refCount",0),$n(this,"getLoadable",r=>(this.checkRefCount_INTERNAL(),qur(this._store,r))),$n(this,"getPromise",r=>(this.checkRefCount_INTERNAL(),this.getLoadable(r).toPromise())),$n(this,"getNodes_UNSTABLE",r=>{if(this.checkRefCount_INTERNAL(),(r==null?void 0:r.isModified)===!0){if((r==null?void 0:r.isInitialized)===!1)return[];let i=this._store.getState().currentTree;return hje(i.dirtyAtoms)}let n=this._store.getState().knownAtoms,o=this._store.getState().knownSelectors;return(r==null?void 0:r.isInitialized)==null?dje.values():r.isInitialized===!0?hje(Aur([this._store.getState().knownAtoms,this._store.getState().knownSelectors])):Nje(dje.values(),({key:i})=>!n.has(i)&&!o.has(i))}),$n(this,"getInfo_UNSTABLE",({key:r})=>(this.checkRefCount_INTERNAL(),Pur(this._store,this._store.getState().currentTree,r))),$n(this,"map",r=>{this.checkRefCount_INTERNAL();let n=new bM(this,qX);return r(n),zX(n.getStore_INTERNAL())}),$n(this,"asyncMap",r=>At(this,null,function*(){this.checkRefCount_INTERNAL();let n=new bM(this,qX);return yield r(n),zX(n.getStore_INTERNAL())})),this._store={getState:()=>t,replaceState:r=>{t.currentTree=r(t.currentTree)},getGraph:r=>{let n=t.graphsByVersion;if(n.has(r))return vo(n.get(r));let o=kur();return n.set(r,o),o},subscribeToTransactions:()=>({release:()=>{}}),addTransactionMetadata:()=>{throw new Error("Cannot subscribe to Snapshots")}};for(let r of this._store.getState().nodeCleanupFunctions.keys())Lur(this._store,t.currentTree,r,"get"),z3(this._store,r,1);this.retain(),this.autorelease_INTERNAL()}retain(){if(!Ro("recoil_memory_managament_2020"))return()=>{};this._refCount++;let t=!1;return()=>{t||(t=!0,this.release_INTERNAL())}}autorelease_INTERNAL(){Ro("recoil_memory_managament_2020")&&(Our||window.setTimeout(()=>this.release_INTERNAL(),0))}release_INTERNAL(){Ro("recoil_memory_managament_2020")&&(this._refCount--,this._refCount)}checkRefCount_INTERNAL(){Ro("recoil_memory_managament_2020")&&this._refCount<=0}getStore_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store}getID(){return this.checkRefCount_INTERNAL(),this.getID_INTERNAL()}getID_INTERNAL(){return this.checkRefCount_INTERNAL(),this._store.getState().currentTree.stateID}};function Kje(e,t,r=!1){let n=e.getState(),o=r?Fur():t.version;return{currentTree:r?{version:o,stateID:o,transactionMetadata:Se({},t.transactionMetadata),dirtyAtoms:new Set(t.dirtyAtoms),atomValues:t.atomValues.clone(),nonvalidatedAtoms:t.nonvalidatedAtoms.clone()}:t,commitDepth:0,nextTree:null,previousTree:null,knownAtoms:new Set(n.knownAtoms),knownSelectors:new Set(n.knownSelectors),transactionSubscriptions:new Map,nodeTransactionSubscriptions:new Map,nodeToComponentSubscriptions:new Map,queuedComponentCallbacks_DEPRECATED:[],suspendedComponentResolvers:new Set,graphsByVersion:new Map().set(o,e.getGraph(t.version)),versionsUsedByComponent:new Map,retention:{referenceCounts:new Map,nodesRetainedByZone:new Map,retainablesToCheckForRelease:new Set},nodeCleanupFunctions:new Map}}function Bur(e){let t=new Ob(Uur());return e!=null?t.map(e):t}function zX(e,t="current"){let r=e.getState(),n=t==="current"?r.currentTree:vo(r.previousTree);return new Ob(Kje(e,n))}var bM=class extends Ob{constructor(t,r){super(Kje(t.getStore_INTERNAL(),t.getStore_INTERNAL().getState().currentTree,!0)),$n(this,"_batch",void 0),$n(this,"set",(n,o)=>{this.checkRefCount_INTERNAL();let i=this.getStore_INTERNAL();this._batch(()=>{z3(i,n.key,1),mje(this.getStore_INTERNAL(),n,o)})}),$n(this,"reset",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();this._batch(()=>{z3(o,n.key,1),mje(this.getStore_INTERNAL(),n,Rur)})}),$n(this,"setUnvalidatedAtomValues_DEPRECATED",n=>{this.checkRefCount_INTERNAL();let o=this.getStore_INTERNAL();qX(()=>{for(let[i,a]of n.entries())z3(o,i,1),zur(o,new jur(i),a)})}),this._batch=r}},nP={Snapshot:Ob,MutableSnapshot:bM,freshSnapshot:Bur,cloneSnapshot:zX},Vur=nP.Snapshot,Gur=nP.MutableSnapshot,Hur=nP.freshSnapshot,Wur=nP.cloneSnapshot,oP=Object.freeze({__proto__:null,Snapshot:Vur,MutableSnapshot:Gur,freshSnapshot:Hur,cloneSnapshot:Wur}),{getNextTreeStateVersion:$ur,makeEmptyStoreState:Xje}=Vje,{cleanUpNode:Yur,getDownstreamNodes:Zur,setNodeValue:Kur,setUnvalidatedAtomValue_DEPRECATED:Xur}=Pb,{graph:Jur}=SM,{cloneGraph:Qur}=SM,{applyAtomValueWrites:ecr}=L0,{releaseScheduledRetainablesNow:Jje}=IM,{freshSnapshot:tcr}=oP,{useCallback:rcr,useContext:Qje,useEffect:FX,useMemo:ncr,useRef:DX,useState:ocr}=Gs.default;function pM(){throw new Error("This component must be used inside a <RecoilRoot> component.")}var e6e=Object.freeze({getState:pM,replaceState:pM,getGraph:pM,subscribeToTransactions:pM,addTransactionMetadata:pM}),UX=!1;function gje(e){if(UX)throw new Error("An atom update was triggered within the execution of a state updater function. State updater functions provided to Recoil must be pure functions.");let t=e.getState();if(t.nextTree===null){Ro("recoil_memory_managament_2020")&&Ro("recoil_release_on_cascading_update_killswitch_2021")&&t.commitDepth>0&&Jje(e);let r=t.currentTree.version,n=$ur();t.nextTree=qt(Se({},t.currentTree),{version:n,stateID:n,dirtyAtoms:new Set,transactionMetadata:{}}),t.graphsByVersion.set(n,Qur(vo(t.graphsByVersion.get(r))))}}var t6e=Gs.default.createContext({current:e6e}),sJ=()=>Qje(t6e),r6e=Gs.default.createContext(null);function icr(){let e=Qje(r6e);return e==null&&QX("Attempted to use a Recoil hook outside of a <RecoilRoot>. <RecoilRoot> must be an ancestor of any component that uses Recoil hooks."),e}function lJ(e,t,r){let n=Zur(e,r,r.dirtyAtoms);for(let o of n){let i=t.nodeToComponentSubscriptions.get(o);if(i)for(let[a,[u,p]]of i)p(r)}}function n6e(e){let t=e.getState(),r=t.currentTree,n=r.dirtyAtoms;if(n.size){for(let[o,i]of t.nodeTransactionSubscriptions)if(n.has(o))for(let[a,u]of i)u(e);for(let[o,i]of t.transactionSubscriptions)i(e);(!Ro("recoil_early_rendering_2021")||t.suspendedComponentResolvers.size)&&(lJ(e,t,r),t.suspendedComponentResolvers.forEach(o=>o()),t.suspendedComponentResolvers.clear())}t.queuedComponentCallbacks_DEPRECATED.forEach(o=>o(r)),t.queuedComponentCallbacks_DEPRECATED.splice(0,t.queuedComponentCallbacks_DEPRECATED.length)}function acr(e){let t=e.current.getState();t.commitDepth++;try{let{nextTree:r}=t;if(r===null)return;t.previousTree=t.currentTree,t.currentTree=r,t.nextTree=null,n6e(e.current),t.previousTree!=null?t.graphsByVersion.delete(t.previousTree.version):Yp("Ended batch with no previous state, which is unexpected","recoil"),t.previousTree=null,Ro("recoil_memory_managament_2020")&&Jje(e.current)}finally{t.commitDepth--}}function scr({setNotifyBatcherOfChange:e}){let t=sJ(),[r,n]=ocr([]);return e(()=>n({})),FX(()=>{Jlr.enqueueExecution("Batcher",()=>{acr(t)})}),FX(()=>()=>{e(()=>{})},[e]),null}function lcr(e,t){let r=Xje();return t({set:(n,o)=>{let i=r.currentTree,a=Kur(e,i,n.key,o),u=new Set(a.keys()),p=i.nonvalidatedAtoms.clone();for(let h of u)p.delete(h);r.currentTree=qt(Se({},i),{dirtyAtoms:mur(i.dirtyAtoms,u),atomValues:ecr(i.atomValues,a),nonvalidatedAtoms:p})},setUnvalidatedAtomValues:n=>{n.forEach((o,i)=>{r.currentTree=Xur(r.currentTree,i,o)})}}),r}function ucr(e){return tcr().map(e).getStore_INTERNAL().getState()}var vje=0;function ccr({initializeState_DEPRECATED:e,initializeState:t,store_INTERNAL:r,children:n}){var o;let i,a=P=>{let k=i.current.graphsByVersion;if(k.has(P))return vo(k.get(P));let q=Jur();return k.set(P,q),q},u=(P,k)=>{if(k==null){let{transactionSubscriptions:q}=A.current.getState(),U=vje++;return q.set(U,P),{release:()=>{q.delete(U)}}}else{let{nodeTransactionSubscriptions:q}=A.current.getState();q.has(k)||q.set(k,new Map);let U=vje++;return vo(q.get(k)).set(U,P),{release:()=>{let H=q.get(k);H&&(H.delete(U),H.size===0&&q.delete(k))}}}},p=P=>{gje(A.current);for(let k of Object.keys(P))vo(A.current.getState().nextTree).transactionMetadata[k]=P[k]},h=P=>{let k=A.current.getState();gje(A.current);let q=vo(k.nextTree),U;try{UX=!0,U=P(q)}finally{UX=!1}U!==q&&(k.nextTree=U,Ro("recoil_early_rendering_2021")&&lJ(T,k,U),vo(g.current)())},g=DX(null),x=rcr(P=>{g.current=P},[g]),b=(o=Gs.default.createMutableSource)!==null&&o!==void 0?o:Gs.default.unstable_createMutableSource,T=r!=null?r:{getState:()=>i.current,replaceState:h,getGraph:a,subscribeToTransactions:u,addTransactionMetadata:p},A=DX(T);i=DX(e!=null?lcr(T,e):t!=null?ucr(t):Xje());let L=ncr(()=>b?b(i,()=>i.current.currentTree.version):null,[b,i]);return FX(()=>()=>{for(let P of A.current.getState().knownAtoms)Yur(A.current,P)},[]),Gs.default.createElement(t6e.Provider,{value:A},Gs.default.createElement(r6e.Provider,{value:L},Gs.default.createElement(scr,{setNotifyBatcherOfChange:x}),n))}function fcr(e){let o=e,{override:t}=o,r=En(o,["override"]),n=sJ();return t===!1&&n.current!==e6e?e.children:Gs.default.createElement(ccr,r)}var iP={useStoreRef:sJ,useRecoilMutableSource:icr,RecoilRoot:fcr,notifyComponents_FOR_TESTING:lJ,sendEndOfBatchNotifications_FOR_TESTING:n6e},{loadableWithValue:pcr}=EM,{DEFAULT_VALUE:dcr,getNode:hcr}=Rc,{copyTreeState:mcr,getRecoilValueAsLoadable:gcr,invalidateDownstreams:vcr,writeLoadableToTreeState:ycr}=L0;function yje(e){return hcr(e.key).nodeType==="atom"}var BX=class{constructor(t,r){$n(this,"_store",void 0),$n(this,"_treeState",void 0),$n(this,"_changes",void 0),$n(this,"get",n=>{if(this._changes.has(n.key))return this._changes.get(n.key);if(!yje(n))throw new Error("Reading selectors within atomicUpdate is not supported");let o=gcr(this._store,n,this._treeState);if(o.state==="hasValue")return o.contents;throw o.state==="hasError"?o.contents:new Error(`Expected Recoil atom ${n.key} to have a value, but it is in a loading state.`)}),$n(this,"set",(n,o)=>{if(!yje(n))throw new Error("Setting selectors within atomicUpdate is not supported");if(typeof o=="function"){let i=this.get(n);this._changes.set(n.key,o(i))}else this._changes.set(n.key,o)}),$n(this,"reset",n=>{this.set(n,dcr)}),this._store=t,this._treeState=r,this._changes=new Map}newTreeState_INTERNAL(){if(this._changes.size===0)return this._treeState;let t=mcr(this._treeState);for(let[r,n]of this._changes)ycr(t,r,pcr(n));return vcr(this._store,t),t}};function _cr(e){return t=>{e.replaceState(r=>{let n=new BX(e,r);return t(n),n.newTreeState_INTERNAL()})}}var xcr={atomicUpdater:_cr},bcr=xcr.atomicUpdater,wcr=Object.freeze({__proto__:null,atomicUpdater:bcr});function Ecr(e,t){let r=new Map;for(let[n,o]of e)t(o,n)&&r.set(n,o);return r}var Scr=Ecr;function Icr(e,t){let r=new Set;for(let n of e)t(n)&&r.add(n);return r}var Tcr=Icr;function Mcr(e,t){if(!e)throw new Error(t)}var Ccr=Mcr,Z3=Ccr;function Acr(...e){let t=new Map;for(let r=0;r<e.length;r++){let n=e[r].keys(),o;for(;!(o=n.next()).done;)t.set(o.value,e[r].get(o.value))}return t}var Dcr=Acr;function Ncr(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0,n=e.length;r<n;r++)if(e[r]!==t[r])return!1;return!0}var Ocr=Ncr;var{useRef:Lcr}=Gs.default;function Pcr(){let e=Lcr();if(0&&Ro("recoil_infer_component_names"))var t;return"<component name not available>"}var uJ=Pcr,{atomicUpdater:o6e}=wcr,{batchUpdates:cJ}=oJ,{DEFAULT_VALUE:aP,getNode:i6e,nodes:kcr}=Rc,{useRecoilMutableSource:Rcr,useStoreRef:Yu}=iP,{isRecoilValue:oJr}=iv,{AbstractRecoilValue:fJ,getRecoilValueAsLoadable:_M,setRecoilValue:Lb,setRecoilValueLoadable:jcr,setUnvalidatedRecoilValue:qcr,subscribeToRecoilValue:pJ}=L0,{updateRetainCount:dM}=IM,{RetentionZone:zcr}=eP,{Snapshot:iJr,cloneSnapshot:wM}=oP,{setByAddingToSet:Fcr}=Dje,{isSSR:K3}=aJ,{mutableSourceExists:Ucr,useMutableSource:Bcr}=Aje,{useCallback:Uf,useEffect:Lh,useMemo:a6e,useRef:ov,useState:dJ}=Gs.default,s6e=12e4;function l6e(e,t,r){if(e.state==="hasValue")return e.contents;throw e.state==="loading"?new Promise(o=>{r.current.getState().suspendedComponentResolvers.add(o)}):e.state==="hasError"?e.contents:new Error(`Invalid value of loadable atom "${t.key}"`)}function Vcr(){let e=Yu(),[t,r]=dJ([]),n=ov(new Set);n.current=new Set;let o=ov(new Set),i=ov(new Map),a=Uf(p=>{let h=i.current.get(p);h&&(h.release(),i.current.delete(p))},[i]),u=uJ();return Lh(()=>{let p=e.current;function h(g,x){i.current.has(x)&&r([])}$3(n.current,o.current).forEach(g=>{if(i.current.has(g)){QX(`Double subscription to RecoilValue "${g}"`);return}let x=pJ(p,new fJ(g),T=>{h(T,g)},u);i.current.set(g,x),p.getState().nextTree?p.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{h(p.getState(),g)}):h(p.getState(),g)}),$3(o.current,n.current).forEach(g=>{a(g)}),o.current=n.current}),Lh(()=>{let p=i.current;return()=>p.forEach((h,g)=>a(g))},[a]),a6e(()=>{function p(A){return L=>{Lb(e.current,A,L)}}function h(A){return()=>Lb(e.current,A,aP)}function g(A){var L;n.current.has(A.key)||(n.current=Fcr(n.current,A.key));let P=e.current.getState();return _M(e.current,A,Ro("recoil_early_rendering_2021")&&(L=P.nextTree)!==null&&L!==void 0?L:P.currentTree)}function x(A){let L=g(A);return l6e(L,A,e)}function b(A){return[x(A),p(A)]}function T(A){return[g(A),p(A)]}return{getRecoilValue:x,getRecoilValueLoadable:g,getRecoilState:b,getRecoilStateLoadable:T,getSetRecoilState:p,getResetRecoilState:h}},[n,e])}var Gcr={current:0};function Hcr(e){let t=Yu(),r=Uf(()=>{var h;let g=t.current,x=g.getState(),b=Ro("recoil_early_rendering_2021")&&(h=x.nextTree)!==null&&h!==void 0?h:x.currentTree;return _M(g,e,b)},[t,e]),n=Uf(()=>r(),[r]),o=uJ(),i=Uf((h,g)=>{let x=t.current;return pJ(x,e,()=>{if(!Ro("recoil_suppress_rerender_in_callback"))return g();let T=r();p.current.is(T)||g(),p.current=T},o).release},[t,e,o,r]),a=Rcr(),u=Bcr(a,n,i),p=ov(u);return Lh(()=>{p.current=u}),u}function Wcr(e){let t=Yu(),[r,n]=dJ([]),o=uJ();Lh(()=>{let u=t.current,p=u.getState(),h=pJ(u,e,x=>{var b;if(!Ro("recoil_suppress_rerender_in_callback"))return n([]);let T=_M(u,e,u.getState().currentTree);!((b=a.current)===null||b===void 0)&&b.is(T)||n(T),a.current=T},o);if(p.nextTree)u.getState().queuedComponentCallbacks_DEPRECATED.push(()=>{a.current=null,n([])});else{var g;if(!Ro("recoil_suppress_rerender_in_callback"))return n([]);let x=_M(u,e,u.getState().currentTree);!((g=a.current)===null||g===void 0)&&g.is(x)||n(x),a.current=x}return h.release},[o,e,t]);let i=_M(t.current,e),a=ov(i);return Lh(()=>{a.current=i}),i}function hJ(e){return Ro("recoil_memory_managament_2020")&&p6e(e),Ucr()?Hcr(e):Wcr(e)}function u6e(e){let t=Yu(),r=hJ(e);return l6e(r,e,t)}function mJ(e){let t=Yu();return Uf(r=>{Lb(t.current,e,r)},[t,e])}function $cr(e){let t=Yu();return Uf(()=>{Lb(t.current,e,aP)},[t,e])}function Ycr(e){return[u6e(e),mJ(e)]}function Zcr(e){return[hJ(e),mJ(e)]}function sP(e){let t=Yu();Lh(()=>t.current.subscribeToTransactions(e).release,[e,t])}function _je(e){let t=e.atomValues.toMap(),r=Y3(Scr(t,(n,o)=>{let a=i6e(o).persistence_UNSTABLE;return a!=null&&a.type!=="none"&&n.state==="hasValue"}),n=>n.contents);return Dcr(e.nonvalidatedAtoms.toMap(),r)}function Kcr(e){sP(Uf(t=>{let r=t.getState().previousTree,n=t.getState().currentTree;r||(Yp("Transaction subscribers notified without a previous tree being present -- this is a bug in Recoil"),r=t.getState().currentTree);let o=_je(n),i=_je(r),a=Y3(kcr,p=>{var h,g,x,b;return{persistence_UNSTABLE:{type:(h=(g=p.persistence_UNSTABLE)===null||g===void 0?void 0:g.type)!==null&&h!==void 0?h:"none",backButton:(x=(b=p.persistence_UNSTABLE)===null||b===void 0?void 0:b.backButton)!==null&&x!==void 0?x:!1}}}),u=Tcr(n.dirtyAtoms,p=>o.has(p)||i.has(p));e({atomValues:o,previousAtomValues:i,atomInfo:a,modifiedAtoms:u,transactionMetadata:Se({},n.transactionMetadata)})},[e]))}function Xcr(e){sP(Uf(t=>{let r=wM(t,"current"),n=wM(t,"previous");e({snapshot:r,previousSnapshot:n})},[e]))}function c6e(e){let t=ov();return Lh(()=>{t.current=e}),t.current}function Jcr(){let e=Yu(),[t,r]=dJ(()=>wM(e.current)),n=c6e(t),o=ov();return Lh(()=>(o.current&&!K3&&window.clearTimeout(o.current),t.retain()),[t]),sP(Uf(i=>r(wM(i)),[])),n!==t&&!K3&&(o.current&&(n==null||n.release_INTERNAL(),window.clearTimeout(o.current)),t.retain(),o.current=window.setTimeout(()=>{t.release_INTERNAL(),o.current=null},s6e)),t}function f6e(){let e=Yu();return Uf(t=>{var r;let n=e.current.getState(),o=(r=n.nextTree)!==null&&r!==void 0?r:n.currentTree,i=t.getStore_INTERNAL().getState().currentTree;cJ(()=>{let a=new Set;for(let h of[o.atomValues.keys(),i.atomValues.keys()])for(let g of h){var u,p;((u=o.atomValues.get(g))===null||u===void 0?void 0:u.contents)!==((p=i.atomValues.get(g))===null||p===void 0?void 0:p.contents)&&i6e(g).shouldRestoreFromSnapshots&&a.add(g)}a.forEach(h=>{jcr(e.current,new fJ(h),i.atomValues.has(h)?vo(i.atomValues.get(h)):aP)}),e.current.replaceState(h=>qt(Se({},h),{stateID:t.getID_INTERNAL()}))})},[e])}function Qcr(){let e=Yu();return(t,r={})=>{cJ(()=>{e.current.addTransactionMetadata(r),t.forEach((n,o)=>qcr(e.current,new fJ(o),n))})}}var X3=class{},efr=new X3;function tfr(e,t){let r=Yu(),n=f6e();return Uf((...o)=>{function i(g,x){Lb(r.current,g,x)}function a(g){Lb(r.current,g,aP)}let u=wM(r.current),p=o6e(r.current),h=efr;return cJ(()=>{let g="useRecoilCallback expects a function that returns a function: it accepts a function of the type (RecoilInterface) => T = R and returns a callback function T => R, where RecoilInterface is an object {snapshot, set, ...} and T and R are the argument and return types of the callback you want to create.  Please see the docs at recoiljs.org for details.";if(typeof e!="function")throw new Error(g);let x=e({set:i,reset:a,snapshot:u,gotoSnapshot:n,transact_UNSTABLE:p});if(typeof x!="function")throw new Error(g);h=x(...o)}),h instanceof X3&&Z3(!1),h},t!=null?[...t,r]:void 0)}function p6e(e){if(Ro("recoil_memory_managament_2020"))return rfr(e)}function rfr(e){let r=(Array.isArray(e)?e:[e]).map(a=>a instanceof zcr?a:a.key),n=Yu();Lh(()=>{if(!Ro("recoil_memory_managament_2020"))return;let a=n.current;if(o.current&&!K3)window.clearTimeout(o.current),o.current=null;else for(let u of r)dM(a,u,1);return()=>{for(let u of r)dM(a,u,-1)}},[n,...r]);let o=ov(),i=c6e(r);if(!K3&&(i===void 0||!Ocr(i,r))){let a=n.current;for(let u of r)dM(a,u,1);if(i)for(let u of i)dM(a,u,-1);o.current&&window.clearTimeout(o.current),o.current=window.setTimeout(()=>{o.current=null;for(let u of r)dM(a,u,-1)},s6e)}}function nfr(e,t){let r=Yu();return a6e(()=>(...n)=>{o6e(r.current)(i=>{e(i)(...n)})},t!=null?[...t,r]:void 0)}var ofr={recoilComponentGetRecoilValueCount_FOR_TESTING:Gcr,useGotoRecoilSnapshot:f6e,useRecoilCallback:tfr,useRecoilInterface:Vcr,useRecoilSnapshot:Jcr,useRecoilState:Ycr,useRecoilStateLoadable:Zcr,useRecoilTransaction:nfr,useRecoilTransactionObserver:Xcr,useRecoilValue:u6e,useRecoilValueLoadable:hJ,useRetain:p6e,useResetRecoilState:$cr,useSetRecoilState:mJ,useSetUnvalidatedAtomValues:Qcr,useTransactionObservation_DEPRECATED:Kcr,useTransactionSubscription_DEPRECATED:sP},{peekNodeInfo:ifr}=Pb,{useStoreRef:afr}=iP;function sfr(){let e=afr();return({key:t})=>ifr(e.current,e.current.getState().currentTree,t)}var lfr=sfr,{RecoilRoot:ufr,useStoreRef:cfr}=iP,{useMemo:ffr}=Gs.default;function pfr(){let e=cfr().current;return ffr(()=>{function t({children:r}){return Gs.default.createElement(ufr,{store_INTERNAL:e},r)}return t},[e])}var dfr=pfr;var{isReactNative:aJr,isSSR:sJr}=aJ;function Ff(e,t,r){if(typeof e=="string"&&!e.includes("\"")&&!e.includes("\\"))return`"${e}"`;switch(typeof e){case"undefined":return"";case"boolean":return e?"true":"false";case"number":case"symbol":return String(e);case"string":return JSON.stringify(e);case"function":if((t==null?void 0:t.allowFunctions)!==!0)throw new Error("Attempt to serialize function in a Recoil cache key");return`__FUNCTION(${e.name})__`;}if(e===null)return"null";if(typeof e!="object"){var n;return(n=JSON.stringify(e))!==null&&n!==void 0?n:""}if(Vi(e))return"__PROMISE__";if(Array.isArray(e))return`[${e.map((o,i)=>Ff(o,t,i.toString()))}]`;if(typeof e.toJSON=="function")return Ff(e.toJSON(r),t,r);if(e instanceof Map){let o={};for(let[i,a]of e)o[typeof i=="string"?i:Ff(i,t)]=a;return Ff(o,t,r)}return e instanceof Set?Ff(Array.from(e).sort((o,i)=>Ff(o,t).localeCompare(Ff(i,t))),t,r):Symbol!==void 0&&e[Symbol.iterator]!=null&&typeof e[Symbol.iterator]=="function"?Ff(Array.from(e),t,r):`{${Object.keys(e).filter(o=>e[o]!==void 0).sort().map(o=>`${Ff(o,t)}:${Ff(e[o],t,o)}`).join(",")}}`}function hfr(e,t={allowFunctions:!1}){return Ff(e,t)}var lP=hfr,VX=class{constructor(t){var r,n,o;$n(this,"_numLeafs",void 0),$n(this,"_root",void 0),$n(this,"_onHit",void 0),$n(this,"_onSet",void 0),$n(this,"_mapNodeValue",void 0),this._numLeafs=0,this._root=null,this._onHit=(r=t==null?void 0:t.onHit)!==null&&r!==void 0?r:()=>{},this._onSet=(n=t==null?void 0:t.onSet)!==null&&n!==void 0?n:()=>{},this._mapNodeValue=(o=t==null?void 0:t.mapNodeValue)!==null&&o!==void 0?o:i=>i}size(){return this._numLeafs}root(){return this._root}get(t,r){var n;return(n=this.getLeafNode(t,r))===null||n===void 0?void 0:n.value}getLeafNode(t,r){return d6e(this.root(),n=>this._mapNodeValue(t(n)),{onNodeVisit:n=>{r==null||r.onNodeVisit(n),n.type==="leaf"&&this._onHit(n)}})}set(t,r,n){let o,i=GX(this.root(),t.map(([a,u])=>[a,this._mapNodeValue(u)]),null,r,null,{onNodeVisit:a=>{n==null||n.onNodeVisit(a),a.type==="leaf"&&(o=a)}});this.root()||(this._root=i),this._numLeafs++,this._onSet(vo(o))}delete(t){if(!this.root())return!1;let r=vo(this.root());return mfr(r,t,t.parent)?t===r||r.type==="branch"&&!r.branches.size?(this._root=null,this._numLeafs=0,!0):(this._numLeafs-=m6e(t),!0):!1}clear(){this._numLeafs=0,this._root=null}},d6e=(e,t,r)=>{var n;if(e==null)return;if(r==null||(n=r.onNodeVisit)===null||n===void 0||n.call(r,e),e.type==="leaf")return e;let o=t(e.nodeKey);return d6e(e.branches.get(o),t,r)},GX=(e,t,r,n,o,i)=>{var a;let u;if(e==null){if(t.length===0)u={type:"leaf",value:n,parent:r,branchKey:o};else{let[p,...h]=t,[g,x]=p;u={type:"branch",nodeKey:g,parent:r,branches:new Map,branchKey:o},u.branches.set(x,GX(null,h,u,n,x,i))}}else if(u=e,t.length){let[p,...h]=t,[g,x]=p;e.type==="branch"&&e.nodeKey===g||Z3(!1),e.branches.set(x,GX(e.branches.get(x),h,e,n,x,i))}return i==null||(a=i.onNodeVisit)===null||a===void 0||a.call(i,u),u},mfr=(e,t,r)=>r?(r.branches.delete(t.branchKey),h6e(e,r,r.parent)):e===t,h6e=(e,t,r)=>r?(t.branches.size===0&&r.branches.delete(t.branchKey),h6e(e,r,r.parent)):e===t,m6e=e=>e.type==="leaf"?1:Array.from(e.branches.values()).reduce((t,r)=>t+m6e(r),0),gfr={TreeCache:VX},vfr=gfr.TreeCache,g6e=Object.freeze({__proto__:null,TreeCache:vfr}),HX=class{constructor(t){var r;$n(this,"_maxSize",void 0),$n(this,"_size",void 0),$n(this,"_head",void 0),$n(this,"_tail",void 0),$n(this,"_map",void 0),$n(this,"_keyMapper",void 0),this._maxSize=t.maxSize,this._size=0,this._head=null,this._tail=null,this._map=new Map,this._keyMapper=(r=t.mapKey)!==null&&r!==void 0?r:n=>n}head(){return this._head}tail(){return this._tail}size(){return this._size}maxSize(){return this._maxSize}has(t){return this._map.has(this._keyMapper(t))}get(t){let r=this._keyMapper(t),n=this._map.get(r);if(n)return this.set(t,n.value),n.value}set(t,r){let n=this._keyMapper(t);this._map.get(n)&&this.delete(t);let i=this.head(),a={key:t,right:i,left:null,value:r};i?i.left=a:this._tail=a,this._map.set(n,a),this._head=a,this._size++,this._maybeDeleteLRU()}_maybeDeleteLRU(){this.size()>this.maxSize()&&this.deleteLru()}deleteLru(){let t=this.tail();t&&this.delete(t.key)}delete(t){let r=this._keyMapper(t);if(!this._size||!this._map.has(r))return;let n=vo(this._map.get(r)),o=n.right,i=n.left;o&&(o.left=n.left),i&&(i.right=n.right),n===this.head()&&(this._head=o),n===this.tail()&&(this._tail=i),this._map.delete(r),this._size--}clear(){this._size=0,this._head=null,this._tail=null,this._map=new Map}},yfr={LRUCache:HX},_fr=yfr.LRUCache,v6e=Object.freeze({__proto__:null,LRUCache:_fr}),{LRUCache:xfr}=v6e,{TreeCache:bfr}=g6e;function wfr(e,t=r=>r){let r=new xfr({maxSize:e}),n=new bfr({mapNodeValue:t,onHit:o=>{r.set(o,!0)},onSet:o=>{let i=r.tail();r.set(o,!0),i&&n.size()>e&&n.delete(i.key)}});return n}var xje=wfr,{TreeCache:Efr}=g6e,R3={equality:"reference",eviction:"keep-all",maxSize:1/0};function Sfr({equality:e=R3.equality,eviction:t=R3.eviction,maxSize:r=R3.maxSize}=R3){let n=Ifr(e);return Tfr(t,r,n)}function Ifr(e){switch(e){case"reference":return t=>t;case"value":return t=>lP(t);}throw new Error(`Unrecognized equality policy ${e}`)}function Tfr(e,t,r){switch(e){case"keep-all":return new Efr({mapNodeValue:r});case"lru":return xje(vo(t),r);case"most-recent":return xje(1,r);}throw new Error(`Unrecognized eviction policy ${e}`)}var Mfr=Sfr;function Cfr(e){return()=>null}var Afr={startPerfBlock:Cfr},{CANCELED:hM,Canceled:Dfr,loadableWithError:mM,loadableWithPromise:Nfr,loadableWithValue:NX}=EM,{getNodeLoadable:bje,peekNodeLoadable:Ofr,setNodeValue:Lfr}=Pb,{saveDependencyMapToStore:Pfr}=SM,{DEFAULT_VALUE:kfr,RecoilValueNotReady:Rfr,getConfigDeletionHandler:jfr,registerNode:wje}=Rc,{isRecoilValue:qfr}=iv,{AbstractRecoilValue:zfr}=iv,{setRecoilValueLoadable:Ffr}=L0,{retainedByOptionWithDefault:Ufr}=IM,{cloneSnapshot:Bfr}=oP,{startPerfBlock:Vfr}=Afr,gM=[],j3=new Map,Gfr=(()=>{let e=0;return()=>e++})();function Hfr(){return{depValuesDiscoveredSoFarDuringAsyncWork:null,latestLoadable:null,latestExecutionId:null,stateVersion:null}}function Wfr(e){let{key:t,get:r,cachePolicy_UNSTABLE:n}=e,o=e.set!=null?e.set:void 0,i=Mfr(n!=null?n:{equality:"reference",eviction:"keep-all"}),a=Ufr(e.retainedBy_UNSTABLE),u=new Map,p=0;function h(){return!Ro("recoil_memory_managament_2020")||p>0}function g(ze){return u.has(ze)||u.set(ze,Hfr()),vo(u.get(ze))}function x(ze){return p++,ze.getState().knownSelectors.add(t),()=>{p--,ze.getState().knownSelectors.delete(t),u.delete(ze)}}function b(){return jfr(t)!==void 0&&!h()}function T(ze,ge,We){if(ge.state==="loading"){let Oe=j3.get(We);Oe==null&&j3.set(We,Oe=new Set),Oe.add(ze)}}function A(ze,ge){let We=j3.get(ge);if(We!==void 0){for(let Oe of We)Ffr(Oe,new zfr(t),ze);j3.delete(ge)}}function L(ze,ge,We){let Oe=ze.getState().knownSelectors.has(We);if(Oe&&ge.atomValues.has(We))return vo(ge.atomValues.get(We));let at=bje(ze,ge,We);return at.state!=="loading"&&Oe&&ge.atomValues.set(We,at),at}function P(ze,ge,We,Oe,at){return ge.then(ot=>{if(!h())return qe(ze,at),hM;let Pt=NX(ot);return st(We,ne(Oe),Pt),U(ze,We,new Set(Oe.keys()),at),q(ze,Pt,at),{__value:ot,__key:t}}).catch(ot=>{if(!h())return qe(ze,at),hM;if(Ue(ze,at)&&Qe(Oe,ze,at),Vi(ot))return k(ze,ot,We,Oe,at);let Pt=mM(ot);throw st(We,ne(Oe),Pt),U(ze,We,new Set(Oe.keys()),at),q(ze,Pt,at),ot})}function k(ze,ge,We,Oe,at){return ge.then(ot=>{if(!h())return qe(ze,at),hM;if(ot instanceof Dfr)return Yp("Selector was released while it had dependencies"),hM;let{__key:Pt,__value:Mt}=ot!=null?ot:{},Nt=!0;Pt!=null&&(We.atomValues.set(Pt,NX(Mt)),Nt=!1);let Ae=ee(ze,We);if(Ae&&Ae.state==="hasValue")return Ee(Ae,ze),{__value:Ae.contents,__key:t};if(!Ue(ze,at)){var Lt;let ce=Ie(We);if((ce==null||(Lt=ce.latestLoadable)===null||Lt===void 0?void 0:Lt.state)==="loading")return ce.latestLoadable.contents}let[Wt,Ct]=X(ze,We,at,Nt);if(Ue(ze,at)&&Qe(Ct,ze,at),Ne(Wt),Wt.state!=="loading"&&(st(We,ne(Ct),Wt),U(ze,We,new Set(Ct.keys()),at),q(ze,Wt,at)),Wt.state==="hasError")throw Wt.contents;return Wt.state==="hasValue"?{__value:Wt.contents,__key:t}:Wt.contents}).catch(ot=>{if(!h())return qe(ze,at),hM;let Pt=mM(ot);throw st(We,ne(Oe),mM(ot)),U(ze,We,new Set(Oe.keys()),at),q(ze,Pt,at),ot})}function q(ze,ge,We){Ue(ze,We)&&(Ee(ge,ze),A(ge,We))}function U(ze,ge,We,Oe){var at,ot,Pt,Mt;if(Ue(ze,Oe)||ge.version===((at=ze.getState())===null||at===void 0||(ot=at.currentTree)===null||ot===void 0?void 0:ot.version)||ge.version===((Pt=ze.getState())===null||Pt===void 0||(Mt=Pt.nextTree)===null||Mt===void 0?void 0:Mt.version)){var Nt,Ae,Lt;Pfr(new Map([[t,We]]),ze,(Nt=(Ae=ze.getState())===null||Ae===void 0||(Lt=Ae.nextTree)===null||Lt===void 0?void 0:Lt.version)!==null&&Nt!==void 0?Nt:ze.getState().currentTree.version)}}function H(ze,ge,We,Oe,at){We.add(Oe),U(ze,ge,We,at)}function X(ze,ge,We,Oe=!1){let at=Vfr(t),ot,Pt=!1,Mt,Nt=new Map,Ae=new Set;U(ze,ge,Ae,We);function Lt(ce){let{key:Fe}=ce;H(ze,ge,Ae,Fe,We);let Be=Oe?bje(ze,ge,Fe):L(ze,ge,Fe);if(Ne(Be),Nt.set(Fe,Be),Be.state==="hasValue")return Be.contents;throw Be.contents}let Wt=!1,Ct=ce=>(...Fe)=>{if(!Wt)throw new Error("getCallback() should only be called asynchronously after the selector is evalutated.  It can be used for selectors to return objects with callbacks that can obtain the current Recoil state without a subscription.");let Be=Bfr(ze),mt=ce({snapshot:Be});if(typeof mt!="function")throw new Error("getCallback() expects a function that returns a function.");return mt(...Fe)};try{ot=r({get:Lt,getCallback:Ct}),ot=qfr(ot)?Lt(ot):ot,Wt=!0,Vi(ot)?ot=P(ze,ot,ge,Nt,We).finally(at):at()}catch(ce){ot=ce,Vi(ot)?ot=k(ze,ot,ge,Nt,We).finally(at):(Pt=!0,at())}return Pt?Mt=mM(ot):Vi(ot)?Mt=Nfr(ot):Mt=NX(ot),Ne(Mt),[Mt,Nt]}function ee(ze,ge){let We=new Set,Oe=g(ze),at=i.get(ot=>(typeof ot!="string"&&Z3(!1),L(ze,ge,ot).contents),{onNodeVisit:ot=>{ot.type==="branch"&&ot.nodeKey!==t&&typeof ot.nodeKey=="string"&&We.add(ot.nodeKey)}});return at&&U(ze,ge,We,Oe.latestExecutionId),at}function ne(ze){return Array.from(ze.entries()).map(([ge,We])=>[ge,We.contents])}function pe(ze,ge){let We=Gfr(),[Oe,at]=X(ze,ge,We);return Ee(Oe,ze,at,We,ge),Ye(ge,ne(at),Oe),T(ze,Oe,We),Oe}function ue(ze,ge){let We=ee(ze,ge);if(We!=null)return Ee(We,ze),We;let Oe=Ie(ge);if(Oe){let at=Oe;return T(ze,vo(at.latestLoadable),vo(at.latestExecutionId)),vo(at.latestLoadable)}return pe(ze,ge)}function Ie(ze){var ge;let[,We]=(ge=Array.from(u.entries()).find(([Oe,at])=>at.latestLoadable!=null&&at.latestExecutionId!=null&&!Te(Oe,ze)))!==null&&ge!==void 0?ge:[];return We}let Re=new Map;function Te(ze,ge){var We,Oe;let at=g(ze),ot=(We=at.depValuesDiscoveredSoFarDuringAsyncWork)!==null&&We!==void 0?We:new Map,Pt=Array(((Oe=Re.get(ge.version))!==null&&Oe!==void 0?Oe:new Map).entries()),Mt=Re.has(ge.version)&&Pt.length===ot.size&&Pt.every(([Nt,Ae])=>ot.get(Nt)===Ae);return ot==null||ge.version===at.stateVersion||Mt?!1:(Re.set(ge.version,new Map(ot)),Array.from(ot).some(([Nt,Ae])=>L(ze,ge,Nt).contents!==Ae.contents))}function Ee(ze,ge,We,Oe,at){let ot=g(ge);ze.state==="loading"?(ot.depValuesDiscoveredSoFarDuringAsyncWork=We,ot.latestExecutionId=Oe,ot.latestLoadable=ze,ot.stateVersion=at==null?void 0:at.version):(ot.depValuesDiscoveredSoFarDuringAsyncWork=null,ot.latestExecutionId=null,ot.latestLoadable=null,ot.stateVersion=null)}function Ye(ze,ge,We){We.state!=="loading"&&st(ze,ge,We)}function Qe(ze,ge,We){let Oe=g(ge);Ue(ge,We)&&(Oe.depValuesDiscoveredSoFarDuringAsyncWork=ze)}function qe(ze,ge){Ue(ze,ge)&&u.delete(ze)}function Ue(ze,ge){let We=g(ze);return ge===We.latestExecutionId}function Ne(ze){ze.state!=="loading"&&(ze.contents,void 0)}function et(ze){}function st(ze,ge,We){ze.atomValues.set(t,We),i.set(ge,We)}function ft(ze){if(gM.includes(t)){let ge=`Recoil selector has circular dependencies: ${gM.slice(gM.indexOf(t)).join(" \u2192 ")}`;return mM(new Error(ge))}gM.push(t);try{return ze()}finally{gM.pop()}}function Ze(ze,ge){return i.get(Oe=>{typeof Oe!="string"&&Z3(!1);let at=Ofr(ze,ge,Oe);return at==null?void 0:at.contents})}function tt(ze,ge){return ft(()=>ue(ze,ge))}function lt(ze){ze.atomValues.delete(t)}return o!=null?wje({key:t,nodeType:"selector",peek:Ze,get:tt,set:(ge,We,Oe)=>{let at=!1,ot=new Map;function Pt({key:Lt}){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Wt=L(ge,We,Lt);if(Ne(Wt),Wt.state==="hasValue")return Wt.contents;throw Wt.state==="loading"?new Rfr(Lt):Wt.contents}function Mt(Lt,Wt){if(at)throw new Error("Recoil: Async selector sets are not currently supported.");let Ct=typeof Wt=="function"?Wt(Pt(Lt)):Wt;Lfr(ge,We,Lt.key,Ct).forEach((Fe,Be)=>ot.set(Be,Fe))}function Nt(Lt){Mt(Lt,kfr)}let Ae=o({set:Mt,get:Pt,reset:Nt},Oe);if(Ae!==void 0)throw Vi(Ae)?new Error("Recoil: Async selector sets are not currently supported."):new Error("Recoil: selector set should be a void function.");return at=!0,ot},init:x,invalidate:lt,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a}):wje({key:t,nodeType:"selector",peek:Ze,get:tt,init:x,invalidate:lt,shouldDeleteConfigOnRelease:b,dangerouslyAllowMutability:e.dangerouslyAllowMutability,shouldRestoreFromSnapshots:!1,retainedBy:a})}var J3=Wfr,{loadableWithError:Eje,loadableWithPromise:Sje,loadableWithValue:vM}=EM,{DEFAULT_VALUE:N0,DefaultValue:Ab,getConfigDeletionHandler:y6e,registerNode:$fr,setConfigDeletionHandler:Yfr}=Rc,{isRecoilValue:Zfr}=iv,{markRecoilValueModified:Kfr,setRecoilValue:Ije,setRecoilValueLoadable:Xfr}=L0,{retainedByOptionWithDefault:Jfr}=IM;function Qfr(e){let{key:t,persistence_UNSTABLE:r}=e,n=Jfr(e.retainedBy_UNSTABLE),o=0,i=Vi(e.default)?Sje(e.default.then(P=>(i=vM(P),{__key:t,__value:P})).catch(P=>{throw i=Eje(P),P})):vM(e.default),a,u=new Map;function p(P,k){let q=k.then(U=>{var H,X;return((X=((H=P.getState().nextTree)!==null&&H!==void 0?H:P.getState().currentTree).atomValues.get(t))===null||X===void 0?void 0:X.contents)===q&&Ije(P,L,U),{__key:t,__value:U}}).catch(U=>{var H,X;throw((X=((H=P.getState().nextTree)!==null&&H!==void 0?H:P.getState().currentTree).atomValues.get(t))===null||X===void 0?void 0:X.contents)===q&&Xfr(P,L,Eje(U)),U});return q}function h(P,k,q){o++;let U=P.getState().knownAtoms.has(t);if(P.getState().knownAtoms.add(t),i.state==="loading"){let ue=()=>{var Ie;((Ie=P.getState().nextTree)!==null&&Ie!==void 0?Ie:P.getState().currentTree).atomValues.has(t)||Kfr(P,L)};i.contents.then(ue).catch(ue)}let H=N0,X=null;if(e.effects_UNSTABLE!=null&&!U){let ue=!0,Ie=Ee=>Ye=>{if(ue){let Qe=H instanceof Ab||Vi(H)?i.state==="hasValue"?i.contents:N0:H;H=typeof Ye=="function"?Ye(Qe):Ye,Vi(H)&&(H=H.then(qe=>(X={effect:Ee,value:qe},qe)))}else{if(Vi(Ye))throw new Error("Setting atoms to async values is not implemented.");typeof Ye!="function"&&(X={effect:Ee,value:Ye}),Ije(P,L,typeof Ye=="function"?Qe=>{let qe=Ye(Qe);return X={effect:Ee,value:qe},qe}:Ye)}},Re=Ee=>()=>Ie(Ee)(N0),Te=Ee=>Ye=>{P.subscribeToTransactions(Qe=>{var qe;let{currentTree:Ue,previousTree:Ne}=Qe.getState();Ne||(Yp("Transaction subscribers notified without a next tree being present -- this is a bug in Recoil"),Ne=Ue);let et=(qe=Ue.atomValues.get(t))!==null&&qe!==void 0?qe:i;if(et.state==="hasValue"){var st,ft,Ze,tt;let lt=et.contents,ze=(st=Ne.atomValues.get(t))!==null&&st!==void 0?st:i,ge=ze.state==="hasValue"?ze.contents:N0;((ft=X)===null||ft===void 0?void 0:ft.effect)!==Ee||((Ze=X)===null||Ze===void 0?void 0:Ze.value)!==lt?Ye(lt,ge):((tt=X)===null||tt===void 0?void 0:tt.effect)===Ee&&(X=null)}},t)};for(let Ee of(ee=e.effects_UNSTABLE)!==null&&ee!==void 0?ee:[]){var ee;let Ye=Ee({node:L,trigger:q,setSelf:Ie(Ee),resetSelf:Re(Ee),onSet:Te(Ee)});if(Ye!=null){var ne;u.set(P,[...((ne=u.get(P))!==null&&ne!==void 0?ne:[]),Ye])}}ue=!1}if(!(H instanceof Ab)){var pe;let ue=Vi(H)?Sje(p(P,H)):vM(H);k.atomValues.set(t,ue),(pe=P.getState().nextTree)===null||pe===void 0||pe.atomValues.set(t,ue)}return()=>{var ue;o--,(ue=u.get(P))===null||ue===void 0||ue.forEach(Ie=>Ie()),u.delete(P),P.getState().knownAtoms.delete(t)}}function g(P,k){var q,U,H;return(q=(U=k.atomValues.get(t))!==null&&U!==void 0?U:(H=a)===null||H===void 0?void 0:H[1])!==null&&q!==void 0?q:i}function x(P,k){if(k.atomValues.has(t))return vo(k.atomValues.get(t));if(k.nonvalidatedAtoms.has(t)){if(a!=null)return a;if(r==null)return QX(`Tried to restore a persisted value for atom ${t} but it has no persistence settings.`),i;let q=k.nonvalidatedAtoms.get(t),U=r.validator(q,N0);return a=U instanceof Ab?i:vM(U),a}else return i}function b(){a=void 0}function T(P,k,q){if(k.atomValues.has(t)){let U=vo(k.atomValues.get(t));if(U.state==="hasValue"&&q===U.contents)return new Map}else if(!k.nonvalidatedAtoms.has(t)&&q instanceof Ab)return new Map;return a=void 0,new Map().set(t,vM(q))}function A(){return y6e(t)!==void 0&&o<=0}let L=$fr({key:t,nodeType:"atom",peek:g,get:x,set:T,init:h,invalidate:b,shouldDeleteConfigOnRelease:A,dangerouslyAllowMutability:e.dangerouslyAllowMutability,persistence_UNSTABLE:e.persistence_UNSTABLE?{type:e.persistence_UNSTABLE.type,backButton:e.persistence_UNSTABLE.backButton}:void 0,shouldRestoreFromSnapshots:!0,retainedBy:n});return L}function _6e(e){let n=e,{default:t}=n,r=En(n,["default"]);return Zfr(t)?epr(qt(Se({},r),{default:t})):Qfr(qt(Se({},r),{default:t}))}function epr(e){let t=_6e(qt(Se({},e),{default:N0,persistence_UNSTABLE:e.persistence_UNSTABLE===void 0?void 0:qt(Se({},e.persistence_UNSTABLE),{validator:n=>n instanceof Ab?n:vo(e.persistence_UNSTABLE).validator(n,N0)}),effects_UNSTABLE:e.effects_UNSTABLE})),r=J3({key:`${e.key}__withFallback`,get:({get:n})=>{let o=n(t);return o instanceof Ab?e.default:o},set:({set:n},o)=>n(t,o),dangerouslyAllowMutability:e.dangerouslyAllowMutability});return Yfr(r.key,y6e(e.key)),r}var x6e=_6e,WX=class{constructor(t){var r;$n(this,"_map",void 0),$n(this,"_keyMapper",void 0),this._map=new Map,this._keyMapper=(r=t==null?void 0:t.mapKey)!==null&&r!==void 0?r:n=>n}size(){return this._map.size}has(t){return this._map.has(this._keyMapper(t))}get(t){return this._map.get(this._keyMapper(t))}set(t,r){this._map.set(this._keyMapper(t),r)}delete(t){this._map.delete(this._keyMapper(t))}clear(){this._map.clear()}},tpr={MapCache:WX},rpr=tpr.MapCache,npr=Object.freeze({__proto__:null,MapCache:rpr}),{LRUCache:Tje}=v6e,{MapCache:opr}=npr,q3={equality:"reference",eviction:"none",maxSize:1/0};function ipr({equality:e=q3.equality,eviction:t=q3.eviction,maxSize:r=q3.maxSize}=q3){let n=apr(e);return spr(t,r,n)}function apr(e){switch(e){case"reference":return t=>t;case"value":return t=>lP(t);}throw new Error(`Unrecognized equality policy ${e}`)}function spr(e,t,r){switch(e){case"keep-all":return new opr({mapKey:r});case"lru":return new Tje({mapKey:r,maxSize:vo(t)});case"most-recent":return new Tje({mapKey:r,maxSize:1});}throw new Error(`Unrecognized eviction policy ${e}`)}var b6e=ipr,{setConfigDeletionHandler:lpr}=Rc;function upr(e){var t,r;let n=b6e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let g=e,{cachePolicyForParams_UNSTABLE:u}=g,p=En(g,["cachePolicyForParams_UNSTABLE"]),h=x6e(qt(Se({},p),{key:`${e.key}__${(i=lP(o))!==null&&i!==void 0?i:"void"}`,default:typeof e.default=="function"?e.default(o):e.default,retainedBy_UNSTABLE:typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,effects_UNSTABLE:typeof e.effects_UNSTABLE=="function"?e.effects_UNSTABLE(o):e.effects_UNSTABLE}));return n.set(o,h),lpr(h.key,()=>{n.delete(o)}),h}}var cpr=upr,{setConfigDeletionHandler:fpr}=Rc,ppr=0;function dpr(e){var t,r;let n=b6e({equality:(t=(r=e.cachePolicyForParams_UNSTABLE)===null||r===void 0?void 0:r.equality)!==null&&t!==void 0?t:"value",eviction:"keep-all"});return o=>{var i;let a=n.get(o);if(a!=null)return a;let u=`${e.key}__selectorFamily/${(i=lP(o,{allowFunctions:!0}))!==null&&i!==void 0?i:"void"}/${ppr++}`,p=b=>e.get(o)(b),h=e.cachePolicy_UNSTABLE,g=typeof e.retainedBy_UNSTABLE=="function"?e.retainedBy_UNSTABLE(o):e.retainedBy_UNSTABLE,x;if(e.set!=null){let b=e.set;x=J3({key:u,get:p,set:(A,L)=>b(o)(A,L),cachePolicy_UNSTABLE:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:g})}else x=J3({key:u,get:p,cachePolicy_UNSTABLE:h,dangerouslyAllowMutability:e.dangerouslyAllowMutability,retainedBy_UNSTABLE:g});return n.set(o,x),fpr(x.key,()=>{n.delete(o)}),x}}var av=dpr,hpr=av({key:"__constant",get:e=>()=>e,cachePolicyForParams_UNSTABLE:{equality:"reference"}});function mpr(e){return hpr(e)}var gpr=mpr,vpr=av({key:"__error",get:e=>()=>{throw new Error(e)},cachePolicyForParams_UNSTABLE:{equality:"reference"}});function ypr(e){return vpr(e)}var _pr=ypr;function xpr(e){return e}var bpr=xpr,{loadableWithError:w6e,loadableWithPromise:E6e,loadableWithValue:S6e}=EM;function uP(e,t){let r=Array(t.length).fill(void 0),n=Array(t.length).fill(void 0);for(let[o,i]of t.entries())try{r[o]=e(i)}catch(a){n[o]=a}return[r,n]}function wpr(e){return e!=null&&!Vi(e)}function cP(e){return Array.isArray(e)?e:Object.getOwnPropertyNames(e).map(t=>e[t])}function gJ(e){return e!=null&&typeof e=="object"&&e.hasOwnProperty("__value")?e.__value:e}function $X(e,t){return Array.isArray(e)?t:Object.getOwnPropertyNames(e).reduce((r,n,o)=>qt(Se({},r),{[n]:t[o]}),{})}function Nb(e,t,r){let n=r.map((o,i)=>o==null?S6e(t[i]):Vi(o)?E6e(o):w6e(o));return $X(e,n)}function Epr(e,t){return t.map((r,n)=>r===void 0?e[n]:r)}var Spr=av({key:"__waitForNone",get:e=>({get:t})=>{let r=cP(e),[n,o]=uP(t,r);return Nb(e,n,o)},dangerouslyAllowMutability:!0}),Ipr=av({key:"__waitForAny",get:e=>({get:t})=>{let r=cP(e),[n,o]=uP(t,r);return o.some(i=>!Vi(i))?Nb(e,n,o):new Promise(i=>{for(let[a,u]of o.entries())Vi(u)&&u.then(p=>{n[a]=gJ(p),o[a]=void 0,i(Nb(e,n,o))}).catch(p=>{o[a]=p,i(Nb(e,n,o))})})},dangerouslyAllowMutability:!0}),Tpr=av({key:"__waitForAll",get:e=>({get:t})=>{let r=cP(e),[n,o]=uP(t,r);if(o.every(a=>a==null))return $X(e,n);let i=o.find(wpr);if(i!=null)throw i;return Promise.all(o).then(a=>$X(e,Epr(n,a).map(gJ)))},dangerouslyAllowMutability:!0}),Mpr=av({key:"__waitForAllSettled",get:e=>({get:t})=>{let r=cP(e),[n,o]=uP(t,r);return o.every(i=>!Vi(i))?Nb(e,n,o):Promise.all(o.map((i,a)=>Vi(i)?i.then(u=>{n[a]=gJ(u),o[a]=void 0}).catch(u=>{n[a]=void 0,o[a]=u}):null)).then(()=>Nb(e,n,o))},dangerouslyAllowMutability:!0}),Cpr=av({key:"__noWait",get:e=>({get:t})=>{try{return S6e(t(e))}catch(r){return Vi(r)?E6e(r):w6e(r)}},dangerouslyAllowMutability:!0}),Apr={waitForNone:Spr,waitForAny:Ipr,waitForAll:Tpr,waitForAllSettled:Mpr,noWait:Cpr},{batchUpdates:Dpr,setBatcher:Npr}=oJ,{DefaultValue:Opr}=Rc,{RecoilRoot:Lpr}=iP,{isRecoilValue:Ppr}=iv,{retentionZone:kpr}=eP,{freshSnapshot:Rpr}=oP,{useGotoRecoilSnapshot:jpr,useRecoilCallback:qpr,useRecoilSnapshot:zpr,useRecoilState:Fpr,useRecoilStateLoadable:Upr,useRecoilTransaction:Bpr,useRecoilTransactionObserver:Vpr,useRecoilValue:Gpr,useRecoilValueLoadable:Hpr,useResetRecoilState:Wpr,useRetain:$pr,useSetRecoilState:Ypr,useSetUnvalidatedAtomValues:Zpr,useTransactionObservation_DEPRECATED:Kpr}=ofr,{noWait:Xpr,waitForAll:Jpr,waitForAllSettled:Qpr,waitForAny:edr,waitForNone:tdr}=Apr,Un={DefaultValue:Opr,RecoilRoot:Lpr,useRecoilBridgeAcrossReactRoots_UNSTABLE:dfr,atom:x6e,selector:J3,retentionZone:kpr,atomFamily:cpr,selectorFamily:av,constSelector:gpr,errorSelector:_pr,readOnlySelector:bpr,useRecoilValue:Gpr,useRecoilValueLoadable:Hpr,useRecoilState:Fpr,useRecoilStateLoadable:Upr,useSetRecoilState:Ypr,useResetRecoilState:Wpr,useGetRecoilValueInfo_UNSTABLE:lfr,useRetain:$pr,useRecoilCallback:qpr,useRecoilTransaction_UNSTABLE:Bpr,useGotoRecoilSnapshot:jpr,useRecoilSnapshot:zpr,useRecoilTransactionObserver_UNSTABLE:Vpr,useTransactionObservation_UNSTABLE:Kpr,useSetUnvalidatedAtomValues_UNSTABLE:Zpr,noWait:Xpr,waitForNone:tdr,waitForAny:edr,waitForAll:Jpr,waitForAllSettled:Qpr,isRecoilValue:Ppr,batchUpdates:Dpr,setBatcher:Npr,snapshot_UNSTABLE:Rpr},lJr=Un.DefaultValue,I6e=Un.RecoilRoot,uJr=Un.useRecoilBridgeAcrossReactRoots_UNSTABLE,en=Un.atom,Tl=Un.selector,cJr=Un.retentionZone,fJr=Un.atomFamily,pJr=Un.selectorFamily,dJr=Un.constSelector,hJr=Un.errorSelector,mJr=Un.readOnlySelector,ht=Un.useRecoilValue,gJr=Un.useRecoilValueLoadable,On=Un.useRecoilState,vJr=Un.useRecoilStateLoadable,Mr=Un.useSetRecoilState,yJr=Un.useResetRecoilState,_Jr=Un.useGetRecoilValueInfo_UNSTABLE,xJr=Un.useRetain,Or=Un.useRecoilCallback,bJr=Un.useRecoilTransaction_UNSTABLE,wJr=Un.useGotoRecoilSnapshot,EJr=Un.useRecoilSnapshot,SJr=Un.useRecoilTransactionObserver_UNSTABLE,IJr=Un.useTransactionObservation_UNSTABLE,TJr=Un.useSetUnvalidatedAtomValues_UNSTABLE,MJr=Un.noWait,CJr=Un.waitForNone,AJr=Un.waitForAny,DJr=Un.waitForAll,NJr=Un.waitForAllSettled,OJr=Un.isRecoilValue,LJr=Un.batchUpdates,PJr=Un.setBatcher,kJr=Un.snapshot_UNSTABLE;var sv=Z(we());var fP=Z(we()),rdr=e=>{let t=fP.useRef(e);return fP.useEffect(()=>{t.current=e}),t},pP=rdr;var ndr=(e,t=100,r=!1)=>{let n=pP(e),o=sv.useRef(),i=[t,r,n];function a(){o.current&&clearTimeout(o.current),o.current=void 0}sv.useEffect(()=>a,i);function u(){o.current=void 0}return sv.useCallback(function(){let p=arguments,{current:h}=o;if(h===void 0&&r)return o.current=setTimeout(u,t),n.current.apply(null,p);h&&clearTimeout(h),o.current=setTimeout(()=>{o.current=void 0,n.current.apply(null,p)},t)},i)},T6e=(e,t,r)=>{let n=sv.useState(e);return[n[0],ndr(n[1],t,r)]};var kb=Z(we());function odr(e,t,r,n){let o=kb.useRef(r),i=kb.useRef(n);kb.useEffect(()=>{o.current=r,i.current=n}),kb.useEffect(()=>{let a=e&&"current"in e?e.current:e;if(!a)return;let u=0;function p(...g){u||o.current.apply(this,g)}a.addEventListener(t,p);let h=i.current;return()=>{u=1,a.removeEventListener(t,p),h&&h()}},[e,t])}var dP=odr;var idr={},TM=typeof window=="undefined"?null:window,adr=TM&&typeof TM.visualViewport!="undefined"?TM.visualViewport:null,M6e=()=>[document.documentElement.clientWidth,document.documentElement.clientHeight],sdr=function(e){e===void 0&&(e=idr);let{wait:t,leading:r,initialWidth:n=0,initialHeight:o=0}=e,[i,a]=T6e(typeof document=="undefined"?[n,o]:M6e,t,r),u=()=>a(M6e);return dP(TM,"resize",u),dP(adr,"resize",u),dP(TM,"orientationchange",u),i};var C6e=e=>sdr(e)[0];var qat=Z(xt(),1);function vJ(e){var t=null,r=function(){return t==null&&(t=e()),t};return r}function R6e(e,t){return e.filter(function(r){return r!==t})}function j6e(e,t){var r=new Set,n=function(a){return r.add(a)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i){return o.push(i)}),o}function cdr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fdr(e,t,r){return t&&q6e(e.prototype,t),r&&q6e(e,r),e}function z6e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F6e=function(){function e(t){cdr(this,e),z6e(this,"entered",[]),z6e(this,"isNodeInDocument",void 0),this.isNodeInDocument=t}return fdr(e,[{key:"enter",value:function(r){var n=this,o=this.entered.length,i=function(u){return n.isNodeInDocument(u)&&(!u.contains||u.contains(r))};return this.entered=j6e(this.entered.filter(i),[r]),o===0&&this.entered.length>0}},{key:"leave",value:function(r){var n=this.entered.length;return this.entered=R6e(this.entered.filter(this.isNodeInDocument),r),n>0&&this.entered.length===0}},{key:"reset",value:function(){this.entered=[]}}]),e}();var U6e=vJ(function(){return /firefox/i.test(navigator.userAgent)}),yJ=vJ(function(){return!!window.safari});function pdr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function B6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ddr(e,t,r){return t&&B6e(e.prototype,t),r&&B6e(e,r),e}function MM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _J=function(){function e(t,r){pdr(this,e),MM(this,"xs",void 0),MM(this,"ys",void 0),MM(this,"c1s",void 0),MM(this,"c2s",void 0),MM(this,"c3s",void 0);for(var n=t.length,o=[],i=0;i<n;i++)o.push(i);o.sort(function(ue,Ie){return t[ue]<t[Ie]?-1:1});for(var a=[],u=[],p=[],h,g,x=0;x<n-1;x++)h=t[x+1]-t[x],g=r[x+1]-r[x],u.push(h),a.push(g),p.push(g/h);for(var b=[p[0]],T=0;T<u.length-1;T++){var A=p[T],L=p[T+1];if(A*L<=0)b.push(0);else{h=u[T];var P=u[T+1],k=h+P;b.push(3*k/((k+P)/A+(k+h)/L))}}b.push(p[p.length-1]);for(var q=[],U=[],H,X=0;X<b.length-1;X++){H=p[X];var ee=b[X],ne=1/u[X],pe=ee+b[X+1]-H-H;q.push((H-ee-pe)*ne),U.push(pe*ne*ne)}this.xs=t,this.ys=r,this.c1s=b,this.c2s=q,this.c3s=U}return ddr(e,[{key:"interpolate",value:function(r){var n=this.xs,o=this.ys,i=this.c1s,a=this.c2s,u=this.c3s,p=n.length-1;if(r===n[p])return o[p];for(var h=0,g=u.length-1,x;h<=g;){x=Math.floor(.5*(h+g));var b=n[x];if(b<r)h=x+1;else if(b>r)g=x-1;else return o[x]}p=Math.max(0,g);var T=r-n[p],A=T*T;return o[p]+i[p]*T+a[p]*A+u[p]*T*A}}]),e}();var hdr=1;function xJ(e){var t=e.nodeType===hdr?e:e.parentElement;if(!t)return null;var r=t.getBoundingClientRect(),n=r.top,o=r.left;return{x:o,y:n}}function CM(e){return{x:e.clientX,y:e.clientY}}function mdr(e){var t;return e.nodeName==="IMG"&&(U6e()||!((t=document.documentElement)!==null&&t!==void 0&&t.contains(e)))}function gdr(e,t,r,n){var o=e?t.width:r,i=e?t.height:n;return yJ()&&e&&(i/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:i}}function V6e(e,t,r,n,o){var i=mdr(t),a=i?e:t,u=xJ(a),p={x:r.x-u.x,y:r.y-u.y},h=e.offsetWidth,g=e.offsetHeight,x=n.anchorX,b=n.anchorY,T=gdr(i,t,h,g),A=T.dragPreviewWidth,L=T.dragPreviewHeight,P=function(){var ne=new _J([0,.5,1],[p.y,p.y/g*L,p.y+L-g]),pe=ne.interpolate(b);return yJ()&&i&&(pe+=(window.devicePixelRatio-1)*L),pe},k=function(){var ne=new _J([0,.5,1],[p.x,p.x/h*A,p.x+A-h]);return ne.interpolate(x)},q=o.offsetX,U=o.offsetY,H=q===0||q,X=U===0||U;return{x:H?q:k(),y:X?U:P()}}var lv={};a2(lv,{FILE:()=>bJ,HTML:()=>SJ,TEXT:()=>EJ,URL:()=>wJ});var bJ="__NATIVE_FILE__",wJ="__NATIVE_URL__",EJ="__NATIVE_TEXT__",SJ="__NATIVE_HTML__";function hP(e,t,r){var n=t.reduce(function(o,i){return o||e.getData(i)},"");return n!=null?n:r}var Rb;function mP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gP=(Rb={},mP(Rb,bJ,{exposeProperties:{files:function(t){return Array.prototype.slice.call(t.files)},items:function(t){return t.items},dataTransfer:function(t){return t}},matchesTypes:["Files"]}),mP(Rb,SJ,{exposeProperties:{html:function(t,r){return hP(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Html","text/html"]}),mP(Rb,wJ,{exposeProperties:{urls:function(t,r){return hP(t,r,"").split(`
`)},dataTransfer:function(t){return t}},matchesTypes:["Url","text/uri-list"]}),mP(Rb,EJ,{exposeProperties:{text:function(t,r){return hP(t,r,"")},dataTransfer:function(t){return t}},matchesTypes:["Text","text/plain"]}),Rb);function vdr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function G6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ydr(e,t,r){return t&&G6e(e.prototype,t),r&&G6e(e,r),e}function H6e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W6e=function(){function e(t){vdr(this,e),H6e(this,"item",void 0),H6e(this,"config",void 0),this.config=t,this.item={},this.initializeExposedProperties()}return ydr(e,[{key:"initializeExposedProperties",value:function(){var r=this;Object.keys(this.config.exposeProperties).forEach(function(n){Object.defineProperty(r.item,n,{configurable:!0,enumerable:!0,get:function(){return console.warn(`Browser doesn't allow reading "`.concat(n,"\" until the drop event.")),null}})})}},{key:"loadDataTransfer",value:function(r){var n=this;if(r){var o={};Object.keys(this.config.exposeProperties).forEach(function(i){o[i]={value:n.config.exposeProperties[i](r,n.config.matchesTypes),configurable:!0,enumerable:!0}}),Object.defineProperties(this.item,o)}}},{key:"canDrag",value:function(){return!0}},{key:"beginDrag",value:function(){return this.item}},{key:"isDragging",value:function(r,n){return n===r.getSourceId()}},{key:"endDrag",value:function(){}}]),e}();function $6e(e,t){var r=new W6e(gP[e]);return r.loadDataTransfer(t),r}function vP(e){if(!e)return null;var t=Array.prototype.slice.call(e.types||[]);return Object.keys(gP).filter(function(r){var n=gP[r].matchesTypes;return n.some(function(o){return t.indexOf(o)>-1})})[0]||null}function _dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function xdr(e,t,r){return t&&Y6e(e.prototype,t),r&&Y6e(e,r),e}function IJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Z6e=function(){function e(t,r){_dr(this,e),IJ(this,"ownerDocument",null),IJ(this,"globalContext",void 0),IJ(this,"optionsArgs",void 0),this.globalContext=t,this.optionsArgs=r}return xdr(e,[{key:"window",get:function(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}},{key:"document",get:function(){var r;return(r=this.globalContext)!==null&&r!==void 0&&r.document?this.globalContext.document:this.window?this.window.document:void 0}},{key:"rootElement",get:function(){var r;return((r=this.optionsArgs)===null||r===void 0?void 0:r.rootElement)||this.window}}]),e}();function K6e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function X6e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K6e(Object(r),!0).forEach(function(n){Ln(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K6e(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bdr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J6e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wdr(e,t,r){return t&&J6e(e.prototype,t),r&&J6e(e,r),e}function Ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Q6e=function(){function e(t,r,n){var o=this;bdr(this,e),Ln(this,"options",void 0),Ln(this,"actions",void 0),Ln(this,"monitor",void 0),Ln(this,"registry",void 0),Ln(this,"enterLeaveCounter",void 0),Ln(this,"sourcePreviewNodes",new Map),Ln(this,"sourcePreviewNodeOptions",new Map),Ln(this,"sourceNodes",new Map),Ln(this,"sourceNodeOptions",new Map),Ln(this,"dragStartSourceIds",null),Ln(this,"dropTargetIds",[]),Ln(this,"dragEnterTargetIds",[]),Ln(this,"currentNativeSource",null),Ln(this,"currentNativeHandle",null),Ln(this,"currentDragSourceNode",null),Ln(this,"altKeyPressed",!1),Ln(this,"mouseMoveTimeoutTimer",null),Ln(this,"asyncEndDragFrameId",null),Ln(this,"dragOverTargetIds",null),Ln(this,"lastClientOffset",null),Ln(this,"hoverRafId",null),Ln(this,"getSourceClientOffset",function(i){var a=o.sourceNodes.get(i);return a&&xJ(a)||null}),Ln(this,"endDragNativeItem",function(){o.isDraggingNativeItem()&&(o.actions.endDrag(),o.currentNativeHandle&&o.registry.removeSource(o.currentNativeHandle),o.currentNativeHandle=null,o.currentNativeSource=null)}),Ln(this,"isNodeInDocument",function(i){return!!(i&&o.document&&o.document.body&&o.document.body.contains(i))}),Ln(this,"endDragIfSourceWasRemovedFromDOM",function(){var i=o.currentDragSourceNode;i==null||o.isNodeInDocument(i)||o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),Ln(this,"handleTopDragStartCapture",function(){o.clearCurrentDragSourceNode(),o.dragStartSourceIds=[]}),Ln(this,"handleTopDragStart",function(i){if(!i.defaultPrevented){var a=o.dragStartSourceIds;o.dragStartSourceIds=null;var u=CM(i);o.monitor.isDragging()&&o.actions.endDrag(),o.actions.beginDrag(a||[],{publishSource:!1,getSourceClientOffset:o.getSourceClientOffset,clientOffset:u});var p=i.dataTransfer,h=vP(p);if(o.monitor.isDragging()){if(p&&typeof p.setDragImage=="function"){var g=o.monitor.getSourceId(),x=o.sourceNodes.get(g),b=o.sourcePreviewNodes.get(g)||x;if(b){var T=o.getCurrentSourcePreviewNodeOptions(),A=T.anchorX,L=T.anchorY,P=T.offsetX,k=T.offsetY,q={anchorX:A,anchorY:L},U={offsetX:P,offsetY:k},H=V6e(x,b,u,q,U);p.setDragImage(b,H.x,H.y)}}try{p==null||p.setData("application/json",{})}catch(ne){}o.setCurrentDragSourceNode(i.target);var X=o.getCurrentSourcePreviewNodeOptions(),ee=X.captureDraggingState;ee?o.actions.publishDragSource():setTimeout(function(){return o.actions.publishDragSource()},0)}else if(h)o.beginDragNativeItem(h);else{if(p&&!p.types&&(i.target&&!i.target.hasAttribute||!i.target.hasAttribute("draggable")))return;i.preventDefault()}}}),Ln(this,"handleTopDragEndCapture",function(){o.clearCurrentDragSourceNode()&&o.monitor.isDragging()&&o.actions.endDrag()}),Ln(this,"handleTopDragEnterCapture",function(i){o.dragEnterTargetIds=[];var a=o.enterLeaveCounter.enter(i.target);if(!(!a||o.monitor.isDragging())){var u=i.dataTransfer,p=vP(u);p&&o.beginDragNativeItem(p,u)}}),Ln(this,"handleTopDragEnter",function(i){var a=o.dragEnterTargetIds;if(o.dragEnterTargetIds=[],!!o.monitor.isDragging()){o.altKeyPressed=i.altKey,a.length>0&&o.actions.hover(a,{clientOffset:CM(i)});var u=a.some(function(p){return o.monitor.canDropOnTarget(p)});u&&(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect()))}}),Ln(this,"handleTopDragOverCapture",function(){o.dragOverTargetIds=[]}),Ln(this,"handleTopDragOver",function(i){var a=o.dragOverTargetIds;if(o.dragOverTargetIds=[],!o.monitor.isDragging()){i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none");return}o.altKeyPressed=i.altKey,o.lastClientOffset=CM(i),o.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(o.hoverRafId=requestAnimationFrame(function(){o.monitor.isDragging()&&o.actions.hover(a||[],{clientOffset:o.lastClientOffset}),o.hoverRafId=null}));var u=(a||[]).some(function(p){return o.monitor.canDropOnTarget(p)});u?(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect=o.getCurrentDropEffect())):o.isDraggingNativeItem()?i.preventDefault():(i.preventDefault(),i.dataTransfer&&(i.dataTransfer.dropEffect="none"))}),Ln(this,"handleTopDragLeaveCapture",function(i){o.isDraggingNativeItem()&&i.preventDefault();var a=o.enterLeaveCounter.leave(i.target);a&&o.isDraggingNativeItem()&&setTimeout(function(){return o.endDragNativeItem()},0)}),Ln(this,"handleTopDropCapture",function(i){if(o.dropTargetIds=[],o.isDraggingNativeItem()){var a;i.preventDefault(),(a=o.currentNativeSource)===null||a===void 0||a.loadDataTransfer(i.dataTransfer)}else vP(i.dataTransfer)&&i.preventDefault();o.enterLeaveCounter.reset()}),Ln(this,"handleTopDrop",function(i){var a=o.dropTargetIds;o.dropTargetIds=[],o.actions.hover(a,{clientOffset:CM(i)}),o.actions.drop({dropEffect:o.getCurrentDropEffect()}),o.isDraggingNativeItem()?o.endDragNativeItem():o.monitor.isDragging()&&o.actions.endDrag()}),Ln(this,"handleSelectStart",function(i){var a=i.target;typeof a.dragDrop=="function"&&(a.tagName==="INPUT"||a.tagName==="SELECT"||a.tagName==="TEXTAREA"||a.isContentEditable||(i.preventDefault(),a.dragDrop()))}),this.options=new Z6e(r,n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enterLeaveCounter=new F6e(this.isNodeInDocument)}return wdr(e,[{key:"profile",value:function(){var r,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((r=this.dragStartSourceIds)===null||r===void 0?void 0:r.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}},{key:"window",get:function(){return this.options.window}},{key:"document",get:function(){return this.options.document}},{key:"rootElement",get:function(){return this.options.rootElement}},{key:"setup",value:function(){var r=this.rootElement;if(r!==void 0){if(r.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");r.__isReactDndBackendSetUp=!0,this.addEventListeners(r)}}},{key:"teardown",value:function(){var r=this.rootElement;if(r!==void 0&&(r.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}},{key:"connectDragPreview",value:function(r,n,o){var i=this;return this.sourcePreviewNodeOptions.set(r,o),this.sourcePreviewNodes.set(r,n),function(){i.sourcePreviewNodes.delete(r),i.sourcePreviewNodeOptions.delete(r)}}},{key:"connectDragSource",value:function(r,n,o){var i=this;this.sourceNodes.set(r,n),this.sourceNodeOptions.set(r,o);var a=function(h){return i.handleDragStart(h,r)},u=function(h){return i.handleSelectStart(h)};return n.setAttribute("draggable","true"),n.addEventListener("dragstart",a),n.addEventListener("selectstart",u),function(){i.sourceNodes.delete(r),i.sourceNodeOptions.delete(r),n.removeEventListener("dragstart",a),n.removeEventListener("selectstart",u),n.setAttribute("draggable","false")}}},{key:"connectDropTarget",value:function(r,n){var o=this,i=function(h){return o.handleDragEnter(h,r)},a=function(h){return o.handleDragOver(h,r)},u=function(h){return o.handleDrop(h,r)};return n.addEventListener("dragenter",i),n.addEventListener("dragover",a),n.addEventListener("drop",u),function(){n.removeEventListener("dragenter",i),n.removeEventListener("dragover",a),n.removeEventListener("drop",u)}}},{key:"addEventListeners",value:function(r){r.addEventListener&&(r.addEventListener("dragstart",this.handleTopDragStart),r.addEventListener("dragstart",this.handleTopDragStartCapture,!0),r.addEventListener("dragend",this.handleTopDragEndCapture,!0),r.addEventListener("dragenter",this.handleTopDragEnter),r.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.addEventListener("dragover",this.handleTopDragOver),r.addEventListener("dragover",this.handleTopDragOverCapture,!0),r.addEventListener("drop",this.handleTopDrop),r.addEventListener("drop",this.handleTopDropCapture,!0))}},{key:"removeEventListeners",value:function(r){r.removeEventListener&&(r.removeEventListener("dragstart",this.handleTopDragStart),r.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),r.removeEventListener("dragend",this.handleTopDragEndCapture,!0),r.removeEventListener("dragenter",this.handleTopDragEnter),r.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),r.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),r.removeEventListener("dragover",this.handleTopDragOver),r.removeEventListener("dragover",this.handleTopDragOverCapture,!0),r.removeEventListener("drop",this.handleTopDrop),r.removeEventListener("drop",this.handleTopDropCapture,!0))}},{key:"getCurrentSourceNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(r);return X6e({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}},{key:"getCurrentDropEffect",value:function(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}},{key:"getCurrentSourcePreviewNodeOptions",value:function(){var r=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(r);return X6e({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}},{key:"isDraggingNativeItem",value:function(){var r=this.monitor.getItemType();return Object.keys(lv).some(function(n){return lv[n]===r})}},{key:"beginDragNativeItem",value:function(r,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=$6e(r,n),this.currentNativeHandle=this.registry.addSource(r,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}},{key:"setCurrentDragSourceNode",value:function(r){var n=this;this.clearCurrentDragSourceNode(),this.currentDragSourceNode=r;var o=1e3;this.mouseMoveTimeoutTimer=setTimeout(function(){var i;return(i=n.rootElement)===null||i===void 0?void 0:i.addEventListener("mousemove",n.endDragIfSourceWasRemovedFromDOM,!0)},o)}},{key:"clearCurrentDragSourceNode",value:function(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var r;(r=this.window)===null||r===void 0||r.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}},{key:"handleDragStart",value:function(r,n){r.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}},{key:"handleDragEnter",value:function(r,n){this.dragEnterTargetIds.unshift(n)}},{key:"handleDragOver",value:function(r,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}},{key:"handleDrop",value:function(r,n){this.dropTargetIds.unshift(n)}}]),e}();var eqe=function(t,r,n){return new Q6e(t,r,n)};function tqe(e,t,...r){if(Edr()&&t===void 0)throw new Error("invariant requires an error message argument");if(!e){let n;if(t===void 0)n=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;n=new Error(t.replace(/%s/g,function(){return r[o++]})),n.name="Invariant Violation"}throw n.framesToPop=1,n}}function Edr(){return typeof process!="undefined"&&!0}var Ph;(function(e){e.mouse="mouse",e.touch="touch",e.keyboard="keyboard"})(Ph||(Ph={}));var Sdr={Left:1,Right:2,Center:4},Idr={Left:0,Center:1,Right:2};function yP(e){return e.button===void 0||e.button===Idr.Left}function rqe(e){return e.buttons===void 0||(e.buttons&Sdr.Left)===0}function _P(e){return!!e.targetTouches}var Tdr=1;function nqe(e){let t=e.nodeType===Tdr?e:e.parentElement;if(!t)return;let{top:r,left:n}=t.getBoundingClientRect();return{x:n,y:r}}function Mdr(e,t){if(e.targetTouches.length===1)return AM(e.targetTouches[0]);if(t&&e.touches.length===1&&e.touches[0].target===t.target)return AM(e.touches[0])}function AM(e,t){return _P(e)?Mdr(e,t):{x:e.clientX,y:e.clientY}}function oqe(e,t,r,n){return Math.sqrt(Math.pow(Math.abs(r-e),2)+Math.pow(Math.abs(n-t),2))}function iqe(e,t,r,n,o){if(!o)return!1;let i=Math.atan2(n-t,r-e)*180/Math.PI+180;for(let a=0;a<o.length;++a){let u=o[a];if(u&&(u.start==null||i>=u.start)&&(u.end==null||i<=u.end))return!0}return!1}var TJ=(()=>{let e=!1;try{addEventListener("test",()=>{},Object.defineProperty({},"passive",{get(){return e=!0,!0}}))}catch(t){}return e})();var xP=class{get delay(){var t;return(t=this.args.delay)!==null&&t!==void 0?t:0}get scrollAngleRanges(){return this.args.scrollAngleRanges}get getDropTargetElementsAtPoint(){return this.args.getDropTargetElementsAtPoint}get ignoreContextMenu(){var t;return(t=this.args.ignoreContextMenu)!==null&&t!==void 0?t:!1}get enableHoverOutsideTarget(){var t;return(t=this.args.enableHoverOutsideTarget)!==null&&t!==void 0?t:!1}get enableKeyboardEvents(){var t;return(t=this.args.enableKeyboardEvents)!==null&&t!==void 0?t:!1}get enableMouseEvents(){var t;return(t=this.args.enableMouseEvents)!==null&&t!==void 0?t:!1}get enableTouchEvents(){var t;return(t=this.args.enableTouchEvents)!==null&&t!==void 0?t:!0}get touchSlop(){return this.args.touchSlop||0}get delayTouchStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayTouchStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get delayMouseStart(){var t,r,n,o;return(o=(n=(t=this.args)===null||t===void 0?void 0:t.delayMouseStart)!==null&&n!==void 0?n:(r=this.args)===null||r===void 0?void 0:r.delay)!==null&&o!==void 0?o:0}get window(){if(this.context&&this.context.window)return this.context.window;if(typeof window!="undefined")return window}get document(){var t;if(!((t=this.context)===null||t===void 0)&&t.document)return this.context.document;if(this.window)return this.window.document}get rootElement(){var t;return((t=this.args)===null||t===void 0?void 0:t.rootElement)||this.document}constructor(t,r){this.args=t,this.context=r}};var DM={[Ph.mouse]:{start:"mousedown",move:"mousemove",end:"mouseup",contextmenu:"contextmenu"},[Ph.touch]:{start:"touchstart",move:"touchmove",end:"touchend"},[Ph.keyboard]:{keydown:"keydown"}},bP=class e{profile(){var t;return{sourceNodes:this.sourceNodes.size,sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,targetNodes:this.targetNodes.size,dragOverTargetIds:((t=this.dragOverTargetIds)===null||t===void 0?void 0:t.length)||0}}get document(){return this.options.document}setup(){let t=this.options.rootElement;t&&(tqe(!e.isSetUp,"Cannot have two Touch backends at the same time."),e.isSetUp=!0,this.addEventListener(t,"start",this.getTopMoveStartHandler()),this.addEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(t,"move",this.handleTopMove),this.addEventListener(t,"move",this.handleTopMoveCapture,!0),this.addEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.addEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.addEventListener(t,"keydown",this.handleCancelOnEscape,!0))}teardown(){let t=this.options.rootElement;t&&(e.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(t,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(t,"start",this.handleTopMoveStart),this.removeEventListener(t,"move",this.handleTopMoveCapture,!0),this.removeEventListener(t,"move",this.handleTopMove),this.removeEventListener(t,"end",this.handleTopMoveEndCapture,!0),this.options.enableMouseEvents&&!this.options.ignoreContextMenu&&this.removeEventListener(t,"contextmenu",this.handleTopMoveEndCapture),this.options.enableKeyboardEvents&&this.removeEventListener(t,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}addEventListener(t,r,n,o=!1){let i=TJ?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let u=DM[a][r];u&&t.addEventListener(u,n,i)})}removeEventListener(t,r,n,o=!1){let i=TJ?{capture:o,passive:!1}:o;this.listenerTypes.forEach(function(a){let u=DM[a][r];u&&t.removeEventListener(u,n,i)})}connectDragSource(t,r){let n=this.handleMoveStart.bind(this,t);return this.sourceNodes.set(t,r),this.addEventListener(r,"start",n),()=>{this.sourceNodes.delete(t),this.removeEventListener(r,"start",n)}}connectDragPreview(t,r,n){return this.sourcePreviewNodeOptions.set(t,n),this.sourcePreviewNodes.set(t,r),()=>{this.sourcePreviewNodes.delete(t),this.sourcePreviewNodeOptions.delete(t)}}connectDropTarget(t,r){let n=this.options.rootElement;if(!this.document||!n)return()=>{};let o=i=>{if(!this.document||!n||!this.monitor.isDragging())return;let a;switch(i.type){case DM.mouse.move:a={x:i.clientX,y:i.clientY};break;case DM.touch.move:var u,p;a={x:((u=i.touches[0])===null||u===void 0?void 0:u.clientX)||0,y:((p=i.touches[0])===null||p===void 0?void 0:p.clientY)||0};break;}let h=a!=null?this.document.elementFromPoint(a.x,a.y):void 0,g=h&&r.contains(h);if(h===r||g)return this.handleMove(i,t)};return this.addEventListener(this.document.body,"move",o),this.targetNodes.set(t,r),()=>{this.document&&(this.targetNodes.delete(t),this.removeEventListener(this.document.body,"move",o))}}getTopMoveStartHandler(){return!this.options.delayTouchStart&&!this.options.delayMouseStart?this.handleTopMoveStart:this.handleTopMoveStartDelay}installSourceNodeRemovalObserver(t){this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=t,this.draggedSourceNodeRemovalObserver=new MutationObserver(()=>{t&&!t.parentElement&&(this.resurrectSourceNode(),this.uninstallSourceNodeRemovalObserver())}),!(!t||!t.parentElement)&&this.draggedSourceNodeRemovalObserver.observe(t.parentElement,{childList:!0})}resurrectSourceNode(){this.document&&this.draggedSourceNode&&(this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),this.document.body.appendChild(this.draggedSourceNode))}uninstallSourceNodeRemovalObserver(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=void 0,this.draggedSourceNode=void 0}constructor(t,r,n){this.getSourceClientOffset=o=>{let i=this.sourceNodes.get(o);return i&&nqe(i)},this.handleTopMoveStartCapture=o=>{yP(o)&&(this.moveStartSourceIds=[])},this.handleMoveStart=o=>{Array.isArray(this.moveStartSourceIds)&&this.moveStartSourceIds.unshift(o)},this.handleTopMoveStart=o=>{if(!yP(o))return;let i=AM(o);i&&(_P(o)&&(this.lastTargetTouchFallback=o.targetTouches[0]),this._mouseClientOffset=i),this.waitingForDelay=!1},this.handleTopMoveStartDelay=o=>{if(!yP(o))return;let i=o.type===DM.touch.start?this.options.delayTouchStart:this.options.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,o),i),this.waitingForDelay=!0},this.handleTopMoveCapture=()=>{this.dragOverTargetIds=[]},this.handleMove=(o,i)=>{this.dragOverTargetIds&&this.dragOverTargetIds.unshift(i)},this.handleTopMove=o=>{if(this.timeout&&clearTimeout(this.timeout),!this.document||this.waitingForDelay)return;let{moveStartSourceIds:i,dragOverTargetIds:a}=this,u=this.options.enableHoverOutsideTarget,p=AM(o,this.lastTargetTouchFallback);if(!p)return;if(this._isScrolling||!this.monitor.isDragging()&&iqe(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,p.x,p.y,this.options.scrollAngleRanges)){this._isScrolling=!0;return}if(!this.monitor.isDragging()&&this._mouseClientOffset.hasOwnProperty("x")&&i&&oqe(this._mouseClientOffset.x||0,this._mouseClientOffset.y||0,p.x,p.y)>(this.options.touchSlop?this.options.touchSlop:0)&&(this.moveStartSourceIds=void 0,this.actions.beginDrag(i,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),!this.monitor.isDragging())return;let h=this.sourceNodes.get(this.monitor.getSourceId());this.installSourceNodeRemovalObserver(h),this.actions.publishDragSource(),o.cancelable&&o.preventDefault();let g=(a||[]).map(A=>this.targetNodes.get(A)).filter(A=>!!A),x=this.options.getDropTargetElementsAtPoint?this.options.getDropTargetElementsAtPoint(p.x,p.y,g):this.document.elementsFromPoint(p.x,p.y),b=[];for(let A in x){if(!x.hasOwnProperty(A))continue;let L=x[A];for(L!=null&&b.push(L);L;)L=L.parentElement,L&&b.indexOf(L)===-1&&b.push(L)}let T=b.filter(A=>g.indexOf(A)>-1).map(A=>this._getDropTargetId(A)).filter(A=>!!A).filter((A,L,P)=>P.indexOf(A)===L);if(u)for(let A in this.targetNodes){let L=this.targetNodes.get(A);if(h&&L&&L.contains(h)&&T.indexOf(A)===-1){T.unshift(A);break}}T.reverse(),this.actions.hover(T,{clientOffset:p})},this._getDropTargetId=o=>{let i=this.targetNodes.keys(),a=i.next();for(;a.done===!1;){let u=a.value;if(o===this.targetNodes.get(u))return u;a=i.next()}},this.handleTopMoveEndCapture=o=>{if(this._isScrolling=!1,this.lastTargetTouchFallback=void 0,!!rqe(o)){if(!this.monitor.isDragging()||this.monitor.didDrop()){this.moveStartSourceIds=void 0;return}o.cancelable&&o.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},this.handleCancelOnEscape=o=>{o.key==="Escape"&&this.monitor.isDragging()&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())},this.options=new xP(n,r),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.sourceNodes=new Map,this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.targetNodes=new Map,this.listenerTypes=[],this._mouseClientOffset={},this._isScrolling=!1,this.options.enableMouseEvents&&this.listenerTypes.push(Ph.mouse),this.options.enableTouchEvents&&this.listenerTypes.push(Ph.touch),this.options.enableKeyboardEvents&&this.listenerTypes.push(Ph.keyboard)}};var aqe=function(t,r={},n={}){return new bP(t,r,n)};function MJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cdr(e,t,r){Adr(e,t),t.set(e,r)}function Adr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wP(e,t){var r=sqe(e,t,"get");return Ddr(e,r)}function Ddr(e,t){return t.get?t.get.call(e):t.value}function Ndr(e,t,r){var n=sqe(e,t,"set");return Odr(e,n,r),r}function sqe(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function Odr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var jb=new WeakMap,EP=class{constructor(){Cdr(this,jb,{writable:!0,value:void 0}),MJ(this,"register",t=>{wP(this,jb).push(t)}),MJ(this,"unregister",t=>{let r;for(;(r=wP(this,jb).indexOf(t))!==-1;)wP(this,jb).splice(r,1)}),MJ(this,"backendChanged",t=>{for(let r of wP(this,jb))r.backendChanged(t)}),Ndr(this,jb,[])}};function Bf(e,t,r){Ldr(e,t),t.set(e,r)}function Ldr(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Zp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dn(e,t){var r=fqe(e,t,"get");return Pdr(e,r)}function Pdr(e,t){return t.get?t.get.call(e):t.value}function qb(e,t,r){var n=fqe(e,t,"set");return kdr(e,n,r),r}function fqe(e,t,r){if(!t.has(e))throw new TypeError("attempted to "+r+" private field on non-instance");return t.get(e)}function kdr(e,t,r){if(t.set)t.set.call(e,r);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=r}}var jc=new WeakMap,SP=new WeakMap,qc=new WeakMap,uv=new WeakMap,P0=new WeakMap,lqe=new WeakMap,uqe=new WeakMap,cqe=new WeakMap,CJ=new WeakMap,AJ=new WeakMap,IP=new WeakMap,NM=class e{constructor(t,r,n){if(Bf(this,jc,{writable:!0,value:void 0}),Bf(this,SP,{writable:!0,value:void 0}),Bf(this,qc,{writable:!0,value:void 0}),Bf(this,uv,{writable:!0,value:void 0}),Bf(this,P0,{writable:!0,value:void 0}),Bf(this,lqe,{writable:!0,value:(o,i,a)=>{var u,p;if(!a.backend)throw new Error("You must specify a 'backend' property in your Backend entry: ".concat(JSON.stringify(a)));let h=a.backend(o,i,a.options),g=a.id,x=!a.id&&h&&h.constructor;if(x&&(g=h.constructor.name),g)x&&console.warn(`Deprecation notice: You are using a pipeline which doesn't include backends' 'id'.
        This might be unsupported in the future, please specify 'id' explicitely for every backend.`);else throw new Error("You must specify an 'id' property in your Backend entry: ".concat(JSON.stringify(a),`
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-5xx`));if(dn(this,qc)[g])throw new Error(`You must specify a unique 'id' property in your Backend entry:
        `.concat(JSON.stringify(a)," (conflicts with: ").concat(JSON.stringify(dn(this,qc)[g]),")"));return{id:g,instance:h,preview:(u=a.preview)!==null&&u!==void 0?u:!1,transition:a.transition,skipDispatchOnTransition:(p=a.skipDispatchOnTransition)!==null&&p!==void 0?p:!1}}}),Zp(this,"setup",()=>{if(typeof window!="undefined"){if(e.isSetUp)throw new Error("Cannot have two MultiBackends at the same time.");e.isSetUp=!0,dn(this,uqe).call(this,window),dn(this,qc)[dn(this,jc)].instance.setup()}}),Zp(this,"teardown",()=>{typeof window!="undefined"&&(e.isSetUp=!1,dn(this,cqe).call(this,window),dn(this,qc)[dn(this,jc)].instance.teardown())}),Zp(this,"connectDragSource",(o,i,a)=>dn(this,IP).call(this,"connectDragSource",o,i,a)),Zp(this,"connectDragPreview",(o,i,a)=>dn(this,IP).call(this,"connectDragPreview",o,i,a)),Zp(this,"connectDropTarget",(o,i,a)=>dn(this,IP).call(this,"connectDropTarget",o,i,a)),Zp(this,"profile",()=>dn(this,qc)[dn(this,jc)].instance.profile()),Zp(this,"previewEnabled",()=>dn(this,qc)[dn(this,jc)].preview),Zp(this,"previewsList",()=>dn(this,SP)),Zp(this,"backendsList",()=>dn(this,uv)),Bf(this,uqe,{writable:!0,value:o=>{dn(this,uv).forEach(i=>{i.transition&&o.addEventListener(i.transition.event,dn(this,CJ))})}}),Bf(this,cqe,{writable:!0,value:o=>{dn(this,uv).forEach(i=>{i.transition&&o.removeEventListener(i.transition.event,dn(this,CJ))})}}),Bf(this,CJ,{writable:!0,value:o=>{let i=dn(this,jc);if(dn(this,uv).some(u=>u.id!==dn(this,jc)&&u.transition&&u.transition.check(o)?(qb(this,jc,u.id),!0):!1),dn(this,jc)!==i){var a;dn(this,qc)[i].instance.teardown(),Object.keys(dn(this,P0)).forEach(g=>{let x=dn(this,P0)[g];x.unsubscribe(),x.unsubscribe=dn(this,AJ).call(this,x.func,...x.args)}),dn(this,SP).backendChanged(this);let u=dn(this,qc)[dn(this,jc)];if(u.instance.setup(),u.skipDispatchOnTransition)return;let p=o.constructor,h=new p(o.type,o);(a=o.target)===null||a===void 0||a.dispatchEvent(h)}}}),Bf(this,AJ,{writable:!0,value:(o,i,a,u)=>dn(this,qc)[dn(this,jc)].instance[o](i,a,u)}),Bf(this,IP,{writable:!0,value:(o,i,a,u)=>{let p="".concat(o,"_").concat(i),h=dn(this,AJ).call(this,o,i,a,u);return dn(this,P0)[p]={func:o,args:[i,a,u],unsubscribe:h},()=>{dn(this,P0)[p].unsubscribe(),delete dn(this,P0)[p]}}}),!n||!n.backends||n.backends.length<1)throw new Error(`You must specify at least one Backend, if you are coming from 2.x.x (or don't understand this error)
        see this guide: https://github.com/louisbrunner/dnd-multi-backend/tree/master/packages/react-dnd-multi-backend#migrating-from-2xx`);qb(this,SP,new EP),qb(this,qc,{}),qb(this,uv,[]),n.backends.forEach(o=>{let i=dn(this,lqe).call(this,t,r,o);dn(this,qc)[i.id]=i,dn(this,uv).push(i)}),qb(this,jc,dn(this,uv)[0].id),qb(this,P0,{})}};Zp(NM,"isSetUp",!1);var DJ=(e,t,r)=>new NM(e,t,r);var OM=(e,t)=>({event:e,check:t});var NJ=OM("touchstart",e=>{let t=e;return t.touches!==null&&t.touches!==void 0}),Rdr=OM("dragstart",e=>e.type.indexOf("drag")!==-1||e.type.indexOf("drop")!==-1),jdr=OM("mousedown",e=>e.type.indexOf("touch")===-1&&e.type.indexOf("mouse")!==-1),OJ=OM("pointerdown",e=>e.pointerType=="mouse");var LJ={backends:[{id:"html5",backend:eqe,transition:OJ},{id:"touch",backend:aqe,options:{enableMouseEvents:!0},preview:!0,transition:NJ}]};var hv=Z(we());var pqe=Z(we()),TP=(0,pqe.createContext)({dragDropManager:void 0});var Eze=Z(vqe()),jP=Z(we());var Zu;(function(e){e.SOURCE="SOURCE",e.TARGET="TARGET"})(Zu||(Zu={}));function Dr(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];if(!e){var i;if(t===void 0)i=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;i=new Error(t.replace(/%s/g,function(){return n[a++]})),i.name="Invariant Violation"}throw i.framesToPop=1,i}}var zb="dnd-core/INIT_COORDS",cv="dnd-core/BEGIN_DRAG",Fb="dnd-core/PUBLISH_DRAG_SOURCE",fv="dnd-core/HOVER",pv="dnd-core/DROP",dv="dnd-core/END_DRAG";function kJ(e,t){return{type:zb,payload:{sourceClientOffset:t||null,clientOffset:e||null}}}function MP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?MP=function(r){return typeof r}:MP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},MP(e)}function yqe(e,t,r){return t.split(".").reduce(function(n,o){return n&&n[o]?n[o]:r||null},e)}function _qe(e,t){return e.filter(function(r){return r!==t})}function CP(e){return MP(e)==="object"}function xqe(e,t){var r=new Map,n=function(a){r.set(a,r.has(a)?r.get(a)+1:1)};e.forEach(n),t.forEach(n);var o=[];return r.forEach(function(i,a){i===1&&o.push(a)}),o}function bqe(e,t){return e.filter(function(r){return t.indexOf(r)>-1})}var Bdr={type:zb,payload:{clientOffset:null,sourceClientOffset:null}};function wqe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{publishSource:!0},o=n.publishSource,i=o===void 0?!0:o,a=n.clientOffset,u=n.getSourceClientOffset,p=e.getMonitor(),h=e.getRegistry();e.dispatch(kJ(a)),Vdr(r,p,h);var g=Wdr(r,p);if(g===null){e.dispatch(Bdr);return}var x=null;if(a){if(!u)throw new Error("getSourceClientOffset must be defined");Gdr(u),x=u(g)}e.dispatch(kJ(a,x));var b=h.getSource(g),T=b.beginDrag(p,g);if(T!=null){Hdr(T),h.pinSource(g);var A=h.getSourceType(g);return{type:cv,payload:{itemType:A,item:T,sourceId:g,clientOffset:a||null,sourceClientOffset:x||null,isSourcePublic:!!i}}}}}function Vdr(e,t,r){Dr(!t.isDragging(),"Cannot call beginDrag while dragging."),e.forEach(function(n){Dr(r.getSource(n),"Expected sourceIds to be registered.")})}function Gdr(e){Dr(typeof e=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Hdr(e){Dr(CP(e),"Item must be an object.")}function Wdr(e,t){for(var r=null,n=e.length-1;n>=0;n--)if(t.canDragSource(e[n])){r=e[n];break}return r}function Eqe(e){return function(){var r=e.getMonitor();if(r.isDragging())return{type:Fb}}}function PM(e,t){return t===null?e===null:Array.isArray(e)?e.some(function(r){return r===t}):e===t}function Sqe(e){return function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=n.clientOffset;$dr(r);var i=r.slice(0),a=e.getMonitor(),u=e.getRegistry();Ydr(i,a,u);var p=a.getItemType();return Zdr(i,u,p),Kdr(i,a,u),{type:fv,payload:{targetIds:i,clientOffset:o||null}}}}function $dr(e){Dr(Array.isArray(e),"Expected targetIds to be an array.")}function Ydr(e,t,r){Dr(t.isDragging(),"Cannot call hover while not dragging."),Dr(!t.didDrop(),"Cannot call hover after drop.");for(var n=0;n<e.length;n++){var o=e[n];Dr(e.lastIndexOf(o)===n,"Expected targetIds to be unique in the passed array.");var i=r.getTarget(o);Dr(i,"Expected targetIds to be registered.")}}function Zdr(e,t,r){for(var n=e.length-1;n>=0;n--){var o=e[n],i=t.getTargetType(o);PM(i,r)||e.splice(n,1)}}function Kdr(e,t,r){e.forEach(function(n){var o=r.getTarget(n);o.hover(t,n)})}function Iqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Tqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iqe(Object(r),!0).forEach(function(n){Xdr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Xdr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mqe(e){return function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.getMonitor(),o=e.getRegistry();Jdr(n);var i=thr(n);i.forEach(function(a,u){var p=Qdr(a,u,o,n),h={type:pv,payload:{dropResult:Tqe(Tqe({},r),p)}};e.dispatch(h)})}}function Jdr(e){Dr(e.isDragging(),"Cannot call drop while not dragging."),Dr(!e.didDrop(),"Cannot call drop twice during one drag operation.")}function Qdr(e,t,r,n){var o=r.getTarget(e),i=o?o.drop(n,e):void 0;return ehr(i),typeof i=="undefined"&&(i=t===0?{}:n.getDropResult()),i}function ehr(e){Dr(typeof e=="undefined"||CP(e),"Drop result must either be an object or undefined.")}function thr(e){var t=e.getTargetIds().filter(e.canDropOnTarget,e);return t.reverse(),t}function Cqe(e){return function(){var r=e.getMonitor(),n=e.getRegistry();rhr(r);var o=r.getSourceId();if(o!=null){var i=n.getSource(o,!0);i.endDrag(r,o),n.unpinSource()}return{type:dv}}}function rhr(e){Dr(e.isDragging(),"Cannot call endDrag while not dragging.")}function Aqe(e){return{beginDrag:wqe(e),publishDragSource:Eqe(e),hover:Sqe(e),drop:Mqe(e),endDrag:Cqe(e)}}function nhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dqe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ohr(e,t,r){return t&&Dqe(e.prototype,t),r&&Dqe(e,r),e}function kM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nqe=function(){function e(t,r){var n=this;nhr(this,e),kM(this,"store",void 0),kM(this,"monitor",void 0),kM(this,"backend",void 0),kM(this,"isSetUp",!1),kM(this,"handleRefCountChange",function(){var o=n.store.getState().refCount>0;n.backend&&(o&&!n.isSetUp?(n.backend.setup(),n.isSetUp=!0):!o&&n.isSetUp&&(n.backend.teardown(),n.isSetUp=!1))}),this.store=t,this.monitor=r,t.subscribe(this.handleRefCountChange)}return ohr(e,[{key:"receiveBackend",value:function(r){this.backend=r}},{key:"getMonitor",value:function(){return this.monitor}},{key:"getBackend",value:function(){return this.backend}},{key:"getRegistry",value:function(){return this.monitor.registry}},{key:"getActions",value:function(){var r=this,n=this.store.dispatch;function o(a){return function(){for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];var g=a.apply(r,p);typeof g!="undefined"&&n(g)}}var i=Aqe(this);return Object.keys(i).reduce(function(a,u){var p=i[u];return a[u]=o(p),a},{})}},{key:"dispatch",value:function(r){this.store.dispatch(r)}}]),e}();function no(e){"@babel/helpers - typeof";return no=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},no(e)}function Oqe(e,t){if(no(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(no(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function AP(e){var t=Oqe(e,"string");return no(t)=="symbol"?t:t+""}function Ot(e,t,r){return(t=AP(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Lqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lqe(Object(r),!0).forEach(function(n){Ot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zc(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Pqe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),RJ=function(){return Math.random().toString(36).substring(7).split("").join(".")},kqe={INIT:"@@redux/INIT"+RJ(),REPLACE:"@@redux/REPLACE"+RJ(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+RJ()}};function ihr(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function jJ(e,t,r){var n;if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(zc(0));if(typeof t=="function"&&typeof r=="undefined"&&(r=t,t=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(zc(1));return r(jJ)(e,t)}if(typeof e!="function")throw new Error(zc(2));var o=e,i=t,a=[],u=a,p=!1;function h(){u===a&&(u=a.slice())}function g(){if(p)throw new Error(zc(3));return i}function x(L){if(typeof L!="function")throw new Error(zc(4));if(p)throw new Error(zc(5));var P=!0;return h(),u.push(L),function(){if(P){if(p)throw new Error(zc(6));P=!1,h();var q=u.indexOf(L);u.splice(q,1),a=null}}}function b(L){if(!ihr(L))throw new Error(zc(7));if(typeof L.type=="undefined")throw new Error(zc(8));if(p)throw new Error(zc(9));try{p=!0,i=o(i,L)}finally{p=!1}for(var P=a=u,k=0;k<P.length;k++){var q=P[k];q()}return L}function T(L){if(typeof L!="function")throw new Error(zc(10));o=L,b({type:kqe.REPLACE})}function A(){var L,P=x;return L={subscribe:function(q){if(typeof q!="object"||q===null)throw new Error(zc(11));function U(){q.next&&q.next(g())}U();var H=P(U);return{unsubscribe:H}}},L[Pqe]=function(){return this},L}return b({type:kqe.INIT}),n={dispatch:b,subscribe:x,getState:g,replaceReducer:T},n[Pqe]=A,n}var ahr=function(t,r){return t===r};function Rqe(e,t){return!e&&!t?!0:!e||!t?!1:e.x===t.x&&e.y===t.y}function jqe(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ahr;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!r(e[n],t[n]))return!1;return!0}function qqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function zqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qqe(Object(r),!0).forEach(function(n){shr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function shr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fqe={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Uqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Fqe,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case zb:case cv:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case fv:return Rqe(e.clientOffset,r.clientOffset)?e:zqe(zqe({},e),{},{clientOffset:r.clientOffset});case dv:case pv:return Fqe;default:return e;}}var RM="dnd-core/ADD_SOURCE",jM="dnd-core/ADD_TARGET",qM="dnd-core/REMOVE_SOURCE",k0="dnd-core/REMOVE_TARGET";function Bqe(e){return{type:RM,payload:{sourceId:e}}}function Vqe(e){return{type:jM,payload:{targetId:e}}}function Gqe(e){return{type:qM,payload:{sourceId:e}}}function Hqe(e){return{type:k0,payload:{targetId:e}}}function Wqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Fc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wqe(Object(r),!0).forEach(function(n){lhr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lhr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uhr={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function $qe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:uhr,t=arguments.length>1?arguments[1]:void 0,r=t.payload;switch(t.type){case cv:return Fc(Fc({},e),{},{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Fb:return Fc(Fc({},e),{},{isSourcePublic:!0});case fv:return Fc(Fc({},e),{},{targetIds:r.targetIds});case k0:return e.targetIds.indexOf(r.targetId)===-1?e:Fc(Fc({},e),{},{targetIds:_qe(e.targetIds,r.targetId)});case pv:return Fc(Fc({},e),{},{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case dv:return Fc(Fc({},e),{},{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return e;}}function Yqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case RM:case jM:return e+1;case qM:case k0:return e-1;default:return e;}}var Ub=[],DP=[];Ub.__IS_NONE__=!0;DP.__IS_ALL__=!0;function Zqe(e,t){if(e===Ub)return!1;if(e===DP||typeof t=="undefined")return!0;var r=bqe(t,e);return r.length>0}function Kqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ub,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fv:break;case RM:case jM:case k0:case qM:return Ub;case cv:case Fb:case dv:case pv:default:return DP;}var r=t.payload,n=r.targetIds,o=n===void 0?[]:n,i=r.prevTargetIds,a=i===void 0?[]:i,u=xqe(o,a),p=u.length>0||!jqe(o,a);if(!p)return Ub;var h=a[a.length-1],g=o[o.length-1];return h!==g&&(h&&u.push(h),g&&u.push(g)),u}function Xqe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return e+1}function Jqe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function Qqe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Jqe(Object(r),!0).forEach(function(n){chr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jqe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function chr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eze(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{dirtyHandlerIds:Kqe(e.dirtyHandlerIds,{type:t.type,payload:Qqe(Qqe({},t.payload),{},{prevTargetIds:yqe(e,"dragOperation.targetIds",[])})}),dragOffset:Uqe(e.dragOffset,t),refCount:Yqe(e.refCount,t),dragOperation:$qe(e.dragOperation,t),stateId:Xqe(e.stateId)}}function fhr(e,t){return{x:e.x+t.x,y:e.y+t.y}}function tze(e,t){return{x:e.x-t.x,y:e.y-t.y}}function rze(e){var t=e.clientOffset,r=e.initialClientOffset,n=e.initialSourceClientOffset;return!t||!r||!n?null:tze(fhr(t,n),r)}function nze(e){var t=e.clientOffset,r=e.initialClientOffset;return!t||!r?null:tze(t,r)}function phr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dhr(e,t,r){return t&&oze(e.prototype,t),r&&oze(e,r),e}function ize(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aze=function(){function e(t,r){phr(this,e),ize(this,"store",void 0),ize(this,"registry",void 0),this.store=t,this.registry=r}return dhr(e,[{key:"subscribeToStateChange",value:function(r){var n=this,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{handlerIds:void 0},i=o.handlerIds;Dr(typeof r=="function","listener must be a function."),Dr(typeof i=="undefined"||Array.isArray(i),"handlerIds, when specified, must be an array of strings.");var a=this.store.getState().stateId,u=function(){var h=n.store.getState(),g=h.stateId;try{var x=g===a||g===a+1&&!Zqe(h.dirtyHandlerIds,i);x||r()}finally{a=g}};return this.store.subscribe(u)}},{key:"subscribeToOffsetChange",value:function(r){var n=this;Dr(typeof r=="function","listener must be a function.");var o=this.store.getState().dragOffset,i=function(){var u=n.store.getState().dragOffset;u!==o&&(o=u,r())};return this.store.subscribe(i)}},{key:"canDragSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r);return Dr(n,"Expected to find a valid source. sourceId=".concat(r)),this.isDragging()?!1:n.canDrag(this,r)}},{key:"canDropOnTarget",value:function(r){if(!r)return!1;var n=this.registry.getTarget(r);if(Dr(n,"Expected to find a valid target. targetId=".concat(r)),!this.isDragging()||this.didDrop())return!1;var o=this.registry.getTargetType(r),i=this.getItemType();return PM(o,i)&&n.canDrop(this,r)}},{key:"isDragging",value:function(){return!!this.getItemType()}},{key:"isDraggingSource",value:function(r){if(!r)return!1;var n=this.registry.getSource(r,!0);if(Dr(n,"Expected to find a valid source. sourceId=".concat(r)),!this.isDragging()||!this.isSourcePublic())return!1;var o=this.registry.getSourceType(r),i=this.getItemType();return o!==i?!1:n.isDragging(this,r)}},{key:"isOverTarget",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shallow:!1};if(!r)return!1;var o=n.shallow;if(!this.isDragging())return!1;var i=this.registry.getTargetType(r),a=this.getItemType();if(a&&!PM(i,a))return!1;var u=this.getTargetIds();if(!u.length)return!1;var p=u.indexOf(r);return o?p===u.length-1:p>-1}},{key:"getItemType",value:function(){return this.store.getState().dragOperation.itemType}},{key:"getItem",value:function(){return this.store.getState().dragOperation.item}},{key:"getSourceId",value:function(){return this.store.getState().dragOperation.sourceId}},{key:"getTargetIds",value:function(){return this.store.getState().dragOperation.targetIds}},{key:"getDropResult",value:function(){return this.store.getState().dragOperation.dropResult}},{key:"didDrop",value:function(){return this.store.getState().dragOperation.didDrop}},{key:"isSourcePublic",value:function(){return!!this.store.getState().dragOperation.isSourcePublic}},{key:"getInitialClientOffset",value:function(){return this.store.getState().dragOffset.initialClientOffset}},{key:"getInitialSourceClientOffset",value:function(){return this.store.getState().dragOffset.initialSourceClientOffset}},{key:"getClientOffset",value:function(){return this.store.getState().dragOffset.clientOffset}},{key:"getSourceClientOffset",value:function(){return rze(this.store.getState().dragOffset)}},{key:"getDifferenceFromInitialOffset",value:function(){return nze(this.store.getState().dragOffset)}}]),e}();var hhr=0;function sze(){return hhr++}function NP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?NP=function(r){return typeof r}:NP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},NP(e)}function lze(e){Dr(typeof e.canDrag=="function","Expected canDrag to be a function."),Dr(typeof e.beginDrag=="function","Expected beginDrag to be a function."),Dr(typeof e.endDrag=="function","Expected endDrag to be a function.")}function uze(e){Dr(typeof e.canDrop=="function","Expected canDrop to be a function."),Dr(typeof e.hover=="function","Expected hover to be a function."),Dr(typeof e.drop=="function","Expected beginDrag to be a function.")}function OP(e,t){if(t&&Array.isArray(e)){e.forEach(function(r){return OP(r,!1)});return}Dr(typeof e=="string"||NP(e)==="symbol",t?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var cze=typeof global!="undefined"?global:self,fze=cze.MutationObserver||cze.WebKitMutationObserver;function qJ(e){return function(){let r=setTimeout(o,0),n=setInterval(o,50);function o(){clearTimeout(r),clearInterval(n),e()}}}function mhr(e){let t=1,r=new fze(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}var pze=typeof fze=="function"?mhr:qJ;var LP=class{enqueueTask(t){let{queue:r,requestFlush:n}=this;r.length||(n(),this.flushing=!0),r[r.length]=t}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{let{queue:t}=this;for(;this.index<t.length;){let r=this.index;if(this.index++,t[r].call(),this.index>this.capacity){for(let n=0,o=t.length-this.index;n<o;n++)t[n]=t[n+this.index];t.length-=this.index,this.index=0}}t.length=0,this.index=0,this.flushing=!1},this.registerPendingError=t=>{this.pendingErrors.push(t),this.requestErrorThrow()},this.requestFlush=pze(this.flush),this.requestErrorThrow=qJ(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}};var PP=class{call(){try{this.task&&this.task()}catch(t){this.onError(t)}finally{this.task=null,this.release(this)}}constructor(t,r){this.onError=t,this.release=r,this.task=null}};var kP=class{create(t){let r=this.freeTasks,n=r.length?r.pop():new PP(this.onError,o=>r[r.length]=o);return n.task=t,n}constructor(t){this.onError=t,this.freeTasks=[]}};var dze=new LP,ghr=new kP(dze.registerPendingError);function hze(e){dze.enqueueTask(ghr.create(e))}function vhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yhr(e,t,r){return t&&mze(e.prototype,t),r&&mze(e,r),e}function Bb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _hr(e,t){return Ehr(e)||whr(e,t)||bhr(e,t)||xhr()}function xhr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bhr(e,t){if(e){if(typeof e=="string")return gze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gze(e,t)}}function gze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function whr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Ehr(e){if(Array.isArray(e))return e}function Shr(e){var t=sze().toString();switch(e){case Zu.SOURCE:return"S".concat(t);case Zu.TARGET:return"T".concat(t);default:throw new Error("Unknown Handler Role: ".concat(e));}}function vze(e){switch(e[0]){case"S":return Zu.SOURCE;case"T":return Zu.TARGET;default:Dr(!1,"Cannot parse handler ID: ".concat(e));}}function yze(e,t){var r=e.entries(),n=!1;do{var o=r.next(),i=o.done,a=_hr(o.value,2),u=a[1];if(u===t)return!0;n=!!i}while(!n);return!1}var _ze=function(){function e(t){vhr(this,e),Bb(this,"types",new Map),Bb(this,"dragSources",new Map),Bb(this,"dropTargets",new Map),Bb(this,"pinnedSourceId",null),Bb(this,"pinnedSource",null),Bb(this,"store",void 0),this.store=t}return yhr(e,[{key:"addSource",value:function(r,n){OP(r),lze(n);var o=this.addHandler(Zu.SOURCE,r,n);return this.store.dispatch(Bqe(o)),o}},{key:"addTarget",value:function(r,n){OP(r,!0),uze(n);var o=this.addHandler(Zu.TARGET,r,n);return this.store.dispatch(Vqe(o)),o}},{key:"containsHandler",value:function(r){return yze(this.dragSources,r)||yze(this.dropTargets,r)}},{key:"getSource",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Dr(this.isSourceId(r),"Expected a valid source ID.");var o=n&&r===this.pinnedSourceId,i=o?this.pinnedSource:this.dragSources.get(r);return i}},{key:"getTarget",value:function(r){return Dr(this.isTargetId(r),"Expected a valid target ID."),this.dropTargets.get(r)}},{key:"getSourceType",value:function(r){return Dr(this.isSourceId(r),"Expected a valid source ID."),this.types.get(r)}},{key:"getTargetType",value:function(r){return Dr(this.isTargetId(r),"Expected a valid target ID."),this.types.get(r)}},{key:"isSourceId",value:function(r){var n=vze(r);return n===Zu.SOURCE}},{key:"isTargetId",value:function(r){var n=vze(r);return n===Zu.TARGET}},{key:"removeSource",value:function(r){var n=this;Dr(this.getSource(r),"Expected an existing source."),this.store.dispatch(Gqe(r)),hze(function(){n.dragSources.delete(r),n.types.delete(r)})}},{key:"removeTarget",value:function(r){Dr(this.getTarget(r),"Expected an existing target."),this.store.dispatch(Hqe(r)),this.dropTargets.delete(r),this.types.delete(r)}},{key:"pinSource",value:function(r){var n=this.getSource(r);Dr(n,"Expected an existing source."),this.pinnedSourceId=r,this.pinnedSource=n}},{key:"unpinSource",value:function(){Dr(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}},{key:"addHandler",value:function(r,n,o){var i=Shr(r);return this.types.set(i,n),r===Zu.SOURCE?this.dragSources.set(i,o):r===Zu.TARGET&&this.dropTargets.set(i,o),i}}]),e}();function xze(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=Ihr(n),i=new aze(o,new _ze(o)),a=new Nqe(o,i),u=e(a,t,r);return a.receiveBackend(u),a}function Ihr(e){var t=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return jJ(eze,e&&t&&t({name:"dnd-core",instanceId:"dnd-core"}))}var Thr=["children"];function Mhr(e,t){return Nhr(e)||Dhr(e,t)||Ahr(e,t)||Chr()}function Chr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ahr(e,t){if(e){if(typeof e=="string")return bze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bze(e,t)}}function bze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dhr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Nhr(e){if(Array.isArray(e))return e}function Ohr(e,t){if(e==null)return{};var r=Lhr(e,t),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Lhr(e,t){if(e==null)return{};var r={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(t.indexOf(o)>=0)&&(r[o]=e[o]);return r}var wze=0,RP=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__"),Sze=(0,jP.memo)(function(t){var r=t.children,n=Ohr(t,Thr),o=Phr(n),i=Mhr(o,2),a=i[0],u=i[1];return(0,jP.useEffect)(function(){if(u){var p=Ize();return++wze,function(){--wze===0&&(p[RP]=null)}}},[]),(0,Eze.jsx)(TP.Provider,Object.assign({value:a},{children:r}),void 0)});function Phr(e){if("manager"in e){var t={dragDropManager:e.manager};return[t,!1]}var r=khr(e.backend,e.context,e.options,e.debugMode),n=!e.context;return[r,n]}function khr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ize(),r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t;return o[RP]||(o[RP]={dragDropManager:xze(e,t,r,n)}),o[RP]}function Ize(){return typeof global!="undefined"?global:window}function Rhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jhr(e,t,r){return t&&Tze(e.prototype,t),r&&Tze(e,r),e}function Mze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var zJ=!1,FJ=!1,Cze=function(){function e(t){Rhr(this,e),Mze(this,"internalMonitor",void 0),Mze(this,"sourceId",null),this.internalMonitor=t.getMonitor()}return jhr(e,[{key:"receiveHandlerId",value:function(r){this.sourceId=r}},{key:"getHandlerId",value:function(){return this.sourceId}},{key:"canDrag",value:function(){Dr(!zJ,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return zJ=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{zJ=!1}}},{key:"isDragging",value:function(){if(!this.sourceId)return!1;Dr(!FJ,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return FJ=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{FJ=!1}}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"isDraggingSource",value:function(r){return this.internalMonitor.isDraggingSource(r)}},{key:"isOverTarget",value:function(r,n){return this.internalMonitor.isOverTarget(r,n)}},{key:"getTargetIds",value:function(){return this.internalMonitor.getTargetIds()}},{key:"isSourcePublic",value:function(){return this.internalMonitor.isSourcePublic()}},{key:"getSourceId",value:function(){return this.internalMonitor.getSourceId()}},{key:"subscribeToOffsetChange",value:function(r){return this.internalMonitor.subscribeToOffsetChange(r)}},{key:"canDragSource",value:function(r){return this.internalMonitor.canDragSource(r)}},{key:"canDropOnTarget",value:function(r){return this.internalMonitor.canDropOnTarget(r)}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();function qhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Aze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function zhr(e,t,r){return t&&Aze(e.prototype,t),r&&Aze(e,r),e}function Dze(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UJ=!1,Nze=function(){function e(t){qhr(this,e),Dze(this,"internalMonitor",void 0),Dze(this,"targetId",null),this.internalMonitor=t.getMonitor()}return zhr(e,[{key:"receiveHandlerId",value:function(r){this.targetId=r}},{key:"getHandlerId",value:function(){return this.targetId}},{key:"subscribeToStateChange",value:function(r,n){return this.internalMonitor.subscribeToStateChange(r,n)}},{key:"canDrop",value:function(){if(!this.targetId)return!1;Dr(!UJ,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return UJ=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{UJ=!1}}},{key:"isOver",value:function(r){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,r):!1}},{key:"getItemType",value:function(){return this.internalMonitor.getItemType()}},{key:"getItem",value:function(){return this.internalMonitor.getItem()}},{key:"getDropResult",value:function(){return this.internalMonitor.getDropResult()}},{key:"didDrop",value:function(){return this.internalMonitor.didDrop()}},{key:"getInitialClientOffset",value:function(){return this.internalMonitor.getInitialClientOffset()}},{key:"getInitialSourceClientOffset",value:function(){return this.internalMonitor.getInitialSourceClientOffset()}},{key:"getSourceClientOffset",value:function(){return this.internalMonitor.getSourceClientOffset()}},{key:"getClientOffset",value:function(){return this.internalMonitor.getClientOffset()}},{key:"getDifferenceFromInitialOffset",value:function(){return this.internalMonitor.getDifferenceFromInitialOffset()}}]),e}();var zM=Z(we());function Fhr(e){if(typeof e.type!="string"){var t=e.type.displayName||e.type.name||"the component";throw new Error("Only native element nodes can now be passed to React DnD connectors."+"You can either wrap ".concat(t," into a <div>, or turn it into a ")+"drag source or a drop target itself.")}}function Uhr(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(!(0,zM.isValidElement)(t)){var n=t;return e(n,r),n}var o=t;Fhr(o);var i=r?function(a){return e(a,r)}:e;return Bhr(o,i)}}function qP(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(r.endsWith("Ref"))t[r]=e[r];else{var o=Uhr(n);t[r]=function(){return o}}}),t}function Oze(e,t){typeof e=="function"?e(t):e.current=t}function Bhr(e,t){var r=e.ref;return Dr(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?(0,zM.cloneElement)(e,{ref:function(o){Oze(r,o),Oze(t,o)}}):(0,zM.cloneElement)(e,{ref:t})}function zP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?zP=function(r){return typeof r}:zP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},zP(e)}function FM(e){return e!==null&&zP(e)==="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function UM(e,t,r,n){var o=r?r.call(n,e,t):void 0;if(o!==void 0)return!!o;if(e===t)return!0;if(typeof e!="object"||!e||typeof t!="object"||!t)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),p=0;p<i.length;p++){var h=i[p];if(!u(h))return!1;var g=e[h],x=t[h];if(o=r?r.call(n,g,x,h):void 0,o===!1||o===void 0&&g!==x)return!1}return!0}function Vhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ghr(e,t,r){return t&&Lze(e.prototype,t),r&&Lze(e,r),e}function Hs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pze=function(){function e(t){var r=this;Vhr(this,e),Hs(this,"hooks",qP({dragSource:function(o,i){r.clearDragSource(),r.dragSourceOptions=i||null,FM(o)?r.dragSourceRef=o:r.dragSourceNode=o,r.reconnectDragSource()},dragPreview:function(o,i){r.clearDragPreview(),r.dragPreviewOptions=i||null,FM(o)?r.dragPreviewRef=o:r.dragPreviewNode=o,r.reconnectDragPreview()}})),Hs(this,"handlerId",null),Hs(this,"dragSourceRef",null),Hs(this,"dragSourceNode",void 0),Hs(this,"dragSourceOptionsInternal",null),Hs(this,"dragSourceUnsubscribe",void 0),Hs(this,"dragPreviewRef",null),Hs(this,"dragPreviewNode",void 0),Hs(this,"dragPreviewOptionsInternal",null),Hs(this,"dragPreviewUnsubscribe",void 0),Hs(this,"lastConnectedHandlerId",null),Hs(this,"lastConnectedDragSource",null),Hs(this,"lastConnectedDragSourceOptions",null),Hs(this,"lastConnectedDragPreview",null),Hs(this,"lastConnectedDragPreviewOptions",null),Hs(this,"backend",void 0),this.backend=t}return Ghr(e,[{key:"receiveHandlerId",value:function(r){this.handlerId!==r&&(this.handlerId=r,this.reconnect())}},{key:"connectTarget",get:function(){return this.dragSource}},{key:"dragSourceOptions",get:function(){return this.dragSourceOptionsInternal},set:function(r){this.dragSourceOptionsInternal=r}},{key:"dragPreviewOptions",get:function(){return this.dragPreviewOptionsInternal},set:function(r){this.dragPreviewOptionsInternal=r}},{key:"reconnect",value:function(){this.reconnectDragSource(),this.reconnectDragPreview()}},{key:"reconnectDragSource",value:function(){var r=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();if(n&&this.disconnectDragSource(),!!this.handlerId){if(!r){this.lastConnectedDragSource=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=r,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,r,this.dragSourceOptions))}}},{key:"reconnectDragPreview",value:function(){var r=this.dragPreview,n=this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(n&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didConnectedDragSourceChange",value:function(){return this.lastConnectedDragSource!==this.dragSource}},{key:"didConnectedDragPreviewChange",value:function(){return this.lastConnectedDragPreview!==this.dragPreview}},{key:"didDragSourceOptionsChange",value:function(){return!UM(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}},{key:"didDragPreviewOptionsChange",value:function(){return!UM(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}},{key:"disconnectDragSource",value:function(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}},{key:"disconnectDragPreview",value:function(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}},{key:"dragSource",get:function(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}},{key:"dragPreview",get:function(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}},{key:"clearDragSource",value:function(){this.dragSourceNode=null,this.dragSourceRef=null}},{key:"clearDragPreview",value:function(){this.dragPreviewNode=null,this.dragPreviewRef=null}}]),e}();function Hhr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Whr(e,t,r){return t&&kze(e.prototype,t),r&&kze(e,r),e}function Kp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Rze=function(){function e(t){var r=this;Hhr(this,e),Kp(this,"hooks",qP({dropTarget:function(o,i){r.clearDropTarget(),r.dropTargetOptions=i,FM(o)?r.dropTargetRef=o:r.dropTargetNode=o,r.reconnect()}})),Kp(this,"handlerId",null),Kp(this,"dropTargetRef",null),Kp(this,"dropTargetNode",void 0),Kp(this,"dropTargetOptionsInternal",null),Kp(this,"unsubscribeDropTarget",void 0),Kp(this,"lastConnectedHandlerId",null),Kp(this,"lastConnectedDropTarget",null),Kp(this,"lastConnectedDropTargetOptions",null),Kp(this,"backend",void 0),this.backend=t}return Whr(e,[{key:"connectTarget",get:function(){return this.dropTarget}},{key:"reconnect",value:function(){var r=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();r&&this.disconnectDropTarget();var n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}},{key:"receiveHandlerId",value:function(r){r!==this.handlerId&&(this.handlerId=r,this.reconnect())}},{key:"dropTargetOptions",get:function(){return this.dropTargetOptionsInternal},set:function(r){this.dropTargetOptionsInternal=r}},{key:"didHandlerIdChange",value:function(){return this.lastConnectedHandlerId!==this.handlerId}},{key:"didDropTargetChange",value:function(){return this.lastConnectedDropTarget!==this.dropTarget}},{key:"didOptionsChange",value:function(){return!UM(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}},{key:"disconnectDropTarget",value:function(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}},{key:"dropTarget",get:function(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}},{key:"clearDropTarget",value:function(){this.dropTargetRef=null,this.dropTargetNode=null}}]),e}();function jze(e,t,r){var n=r.getRegistry(),o=n.addTarget(e,t);return[o,function(){return n.removeTarget(o)}]}function qze(e,t,r){var n=r.getRegistry(),o=n.addSource(e,t);return[o,function(){return n.removeSource(o)}]}var FP=Z(we()),Ku=typeof window!="undefined"?FP.useLayoutEffect:FP.useEffect;var BP=Z(we());function UP(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?UP=function(r){return typeof r}:UP=function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},UP(e)}function $hr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zze(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yhr(e,t,r){return t&&zze(e.prototype,t),r&&zze(e,r),e}function BJ(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fze=function(){function e(t,r,n){$hr(this,e),BJ(this,"spec",void 0),BJ(this,"monitor",void 0),BJ(this,"connector",void 0),this.spec=t,this.monitor=r,this.connector=n}return Yhr(e,[{key:"beginDrag",value:function(){var r,n=this.spec,o=this.monitor,i=null;return UP(n.item)==="object"?i=n.item:typeof n.item=="function"?i=n.item(o):i={},(r=i)!==null&&r!==void 0?r:null}},{key:"canDrag",value:function(){var r=this.spec,n=this.monitor;return typeof r.canDrag=="boolean"?r.canDrag:typeof r.canDrag=="function"?r.canDrag(n):!0}},{key:"isDragging",value:function(r,n){var o=this.spec,i=this.monitor,a=o.isDragging;return a?a(i):n===r.getSourceId()}},{key:"endDrag",value:function(){var r=this.spec,n=this.monitor,o=this.connector,i=r.end;i&&i(n.getItem(),n),o.reconnect()}}]),e}();function Uze(e,t,r){var n=(0,BP.useMemo)(function(){return new Fze(e,t,r)},[t,r]);return(0,BP.useEffect)(function(){n.spec=e},[e]),n}var Bze=Z(we());function Uc(){var e=(0,Bze.useContext)(TP),t=e.dragDropManager;return Dr(t!=null,"Expected drag drop context"),t}var Vze=Z(we());function Gze(e){return(0,Vze.useMemo)(function(){var t=e.type;return Dr(t!=null,"spec.type must be defined"),t},[e])}function Zhr(e,t){return Qhr(e)||Jhr(e,t)||Xhr(e,t)||Khr()}function Khr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xhr(e,t){if(e){if(typeof e=="string")return Hze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hze(e,t)}}function Hze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Jhr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function Qhr(e){if(Array.isArray(e))return e}function Wze(e,t,r){var n=Uc(),o=Uze(e,t,r),i=Gze(e);Ku(function(){if(i!=null){var u=qze(i,o,n),p=Zhr(u,2),h=p[0],g=p[1];return t.receiveHandlerId(h),r.receiveHandlerId(h),g}},[n,t,r,o,i])}var $ze=Z(we());function emr(e){return omr(e)||nmr(e)||rmr(e)||tmr()}function tmr(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rmr(e,t){if(e){if(typeof e=="string")return VJ(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return VJ(e,t)}}function nmr(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function omr(e){if(Array.isArray(e))return VJ(e)}function VJ(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function VP(e,t){var r=emr(t||[]);return t==null&&typeof e!="function"&&r.push(e),(0,$ze.useMemo)(function(){return typeof e=="function"?e():e},r)}var Yze=Z(we());function Zze(){var e=Uc();return(0,Yze.useMemo)(function(){return new Cze(e)},[e])}var Kze=Z(we());function Xze(e,t){var r=Uc(),n=(0,Kze.useMemo)(function(){return new Pze(r.getBackend())},[r]);return Ku(function(){return n.dragSourceOptions=e||null,n.reconnect(),function(){return n.disconnectDragSource()}},[n,e]),Ku(function(){return n.dragPreviewOptions=t||null,n.reconnect(),function(){return n.disconnectDragPreview()}},[n,t]),n}var e8e=Z(GP()),HP=Z(we());function imr(e,t){return umr(e)||lmr(e,t)||smr(e,t)||amr()}function amr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function smr(e,t){if(e){if(typeof e=="string")return Qze(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Qze(e,t)}}function Qze(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lmr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function umr(e){if(Array.isArray(e))return e}function t8e(e,t,r){var n=(0,HP.useState)(function(){return t(e)}),o=imr(n,2),i=o[0],a=o[1],u=(0,HP.useCallback)(function(){var p=t(e);(0,e8e.default)(i,p)||(a(p),r&&r())},[i,e,r]);return Ku(u),[i,u]}function cmr(e,t){return hmr(e)||dmr(e,t)||pmr(e,t)||fmr()}function fmr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pmr(e,t){if(e){if(typeof e=="string")return r8e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return r8e(e,t)}}function r8e(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function dmr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function hmr(e){if(Array.isArray(e))return e}function n8e(e,t,r){var n=t8e(e,t,r),o=cmr(n,2),i=o[0],a=o[1];return Ku(function(){var p=e.getHandlerId();if(p!=null)return e.subscribeToStateChange(a,{handlerIds:[p]})},[e,a]),i}function WP(e,t,r){return n8e(t,e||function(){return{}},function(){return r.reconnect()})}var GJ=Z(we());function o8e(e){return(0,GJ.useMemo)(function(){return e.hooks.dragSource()},[e])}function i8e(e){return(0,GJ.useMemo)(function(){return e.hooks.dragPreview()},[e])}function a8e(e,t){var r=VP(e,t);Dr(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");var n=Zze(),o=Xze(r.options,r.previewOptions);return Wze(r,n,o),[WP(r.collect,n,o),o8e(o),i8e(o)]}var s8e=Z(we());function l8e(e){var t=e.accept;return(0,s8e.useMemo)(function(){return Dr(e.accept!=null,"accept must be defined"),Array.isArray(t)?t:[t]},[t])}var $P=Z(we());function mmr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u8e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gmr(e,t,r){return t&&u8e(e.prototype,t),r&&u8e(e,r),e}function c8e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f8e=function(){function e(t,r){mmr(this,e),c8e(this,"spec",void 0),c8e(this,"monitor",void 0),this.spec=t,this.monitor=r}return gmr(e,[{key:"canDrop",value:function(){var r=this.spec,n=this.monitor;return r.canDrop?r.canDrop(n.getItem(),n):!0}},{key:"hover",value:function(){var r=this.spec,n=this.monitor;r.hover&&r.hover(n.getItem(),n)}},{key:"drop",value:function(){var r=this.spec,n=this.monitor;if(r.drop)return r.drop(n.getItem(),n)}}]),e}();function p8e(e,t){var r=(0,$P.useMemo)(function(){return new f8e(e,t)},[t]);return(0,$P.useEffect)(function(){r.spec=e},[e]),r}function vmr(e,t){return bmr(e)||xmr(e,t)||_mr(e,t)||ymr()}function ymr(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _mr(e,t){if(e){if(typeof e=="string")return d8e(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d8e(e,t)}}function d8e(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xmr(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n=[],o=!0,i=!1,a,u;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(n.push(a.value),!(t&&n.length===t));o=!0);}catch(p){i=!0,u=p}finally{try{!o&&r.return!=null&&r.return()}finally{if(i)throw u}}return n}}function bmr(e){if(Array.isArray(e))return e}function h8e(e,t,r){var n=Uc(),o=p8e(e,t),i=l8e(e);Ku(function(){var u=jze(i,o,n),p=vmr(u,2),h=p[0],g=p[1];return t.receiveHandlerId(h),r.receiveHandlerId(h),g},[n,t,o,r,i.map(function(a){return a.toString()}).join("|")])}var m8e=Z(we());function g8e(){var e=Uc();return(0,m8e.useMemo)(function(){return new Nze(e)},[e])}var v8e=Z(we());function y8e(e){var t=Uc(),r=(0,v8e.useMemo)(function(){return new Rze(t.getBackend())},[t]);return Ku(function(){return r.dropTargetOptions=e||null,r.reconnect(),function(){return r.disconnectDropTarget()}},[e]),r}var _8e=Z(we());function x8e(e){return(0,_8e.useMemo)(function(){return e.hooks.dropTarget()},[e])}function YP(e,t){var r=VP(e,t),n=g8e(),o=y8e(r.options);return h8e(r,n,o),[WP(r.collect,n,o),x8e(o)]}function HJ(){return HJ=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},HJ.apply(this,arguments)}var wmr=(0,hv.createContext)(null),WJ=e=>{let i=e,{portal:t}=i,r=En(i,["portal"]),[n,o]=(0,hv.useState)(null);return hv.default.createElement(wmr.Provider,{value:t!=null?t:n},hv.default.createElement(Sze,HJ({backend:DJ},r)),t?null:hv.default.createElement("div",{ref:o}))};var Ju=Z(we(),1);var bk=Z(xt(),1);var ji=en({key:"notificationState",default:null});var Hf=Z(we(),1);var Bc=[];var b8e=function(){return Bc.some(function(e){return e.activeTargets.length>0})};var w8e=function(){return Bc.some(function(e){return e.skippedTargets.length>0})};var E8e="ResizeObserver loop completed with undelivered notifications.",S8e=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:E8e}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=E8e),window.dispatchEvent(e)};var R0;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(R0||(R0={}));var Vf=function(e){return Object.freeze(e)};var $J=function(){function e(t,r){this.inlineSize=t,this.blockSize=r,Vf(this)}return e}();var YJ=function(){function e(t,r,n,o){return this.x=t,this.y=r,this.width=n,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Vf(this)}return e.prototype.toJSON=function(){var t=this,r=t.x,n=t.y,o=t.top,i=t.right,a=t.bottom,u=t.left,p=t.width,h=t.height;return{x:r,y:n,top:o,right:i,bottom:a,left:u,width:p,height:h}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}();var BM=function(e){return e instanceof SVGElement&&"getBBox"in e},ZP=function(e){if(BM(e)){var t=e.getBBox(),r=t.width,n=t.height;return!r&&!n}var o=e,i=o.offsetWidth,a=o.offsetHeight;return!(i||a||e.getClientRects().length)},ZJ=function(e){var t;if(e instanceof Element)return!0;var r=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(r&&e instanceof r.Element)},I8e=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0;}return!1};var j0=typeof window!="undefined"?window:{};var KP=new WeakMap,T8e=/auto|scroll/,Emr=/^tb|vertical/,Smr=/msie|trident/i.test(j0.navigator&&j0.navigator.userAgent),Xp=function(e){return parseFloat(e||"0")},Vb=function(e,t,r){return e===void 0&&(e=0),t===void 0&&(t=0),r===void 0&&(r=!1),new $J((r?t:e)||0,(r?e:t)||0)},M8e=Vf({devicePixelContentBoxSize:Vb(),borderBoxSize:Vb(),contentBoxSize:Vb(),contentRect:new YJ(0,0,0,0)}),KJ=function(e,t){if(t===void 0&&(t=!1),KP.has(e)&&!t)return KP.get(e);if(ZP(e))return KP.set(e,M8e),M8e;var r=getComputedStyle(e),n=BM(e)&&e.ownerSVGElement&&e.getBBox(),o=!Smr&&r.boxSizing==="border-box",i=Emr.test(r.writingMode||""),a=!n&&T8e.test(r.overflowY||""),u=!n&&T8e.test(r.overflowX||""),p=n?0:Xp(r.paddingTop),h=n?0:Xp(r.paddingRight),g=n?0:Xp(r.paddingBottom),x=n?0:Xp(r.paddingLeft),b=n?0:Xp(r.borderTopWidth),T=n?0:Xp(r.borderRightWidth),A=n?0:Xp(r.borderBottomWidth),L=n?0:Xp(r.borderLeftWidth),P=x+h,k=p+g,q=L+T,U=b+A,H=u?e.offsetHeight-U-e.clientHeight:0,X=a?e.offsetWidth-q-e.clientWidth:0,ee=o?P+q:0,ne=o?k+U:0,pe=n?n.width:Xp(r.width)-ee-X,ue=n?n.height:Xp(r.height)-ne-H,Ie=pe+P+X+q,Re=ue+k+H+U,Te=Vf({devicePixelContentBoxSize:Vb(Math.round(pe*devicePixelRatio),Math.round(ue*devicePixelRatio),i),borderBoxSize:Vb(Ie,Re,i),contentBoxSize:Vb(pe,ue,i),contentRect:new YJ(x,p,pe,ue)});return KP.set(e,Te),Te},XP=function(e,t,r){var n=KJ(e,r),o=n.borderBoxSize,i=n.contentBoxSize,a=n.devicePixelContentBoxSize;switch(t){case R0.DEVICE_PIXEL_CONTENT_BOX:return a;case R0.BORDER_BOX:return o;default:return i;}};var XJ=function(){function e(t){var r=KJ(t);this.target=t,this.contentRect=r.contentRect,this.borderBoxSize=Vf([r.borderBoxSize]),this.contentBoxSize=Vf([r.contentBoxSize]),this.devicePixelContentBoxSize=Vf([r.devicePixelContentBoxSize])}return e}();var JP=function(e){if(ZP(e))return 1/0;for(var t=0,r=e.parentNode;r;)t+=1,r=r.parentNode;return t};var C8e=function(){var e=1/0,t=[];Bc.forEach(function(a){if(a.activeTargets.length!==0){var u=[];a.activeTargets.forEach(function(h){var g=new XJ(h.target),x=JP(h.target);u.push(g),h.lastReportedSize=XP(h.target,h.observedBox),x<e&&(e=x)}),t.push(function(){a.callback.call(a.observer,u,a.observer)}),a.activeTargets.splice(0,a.activeTargets.length)}});for(var r=0,n=t;r<n.length;r++){var o=n[r];o()}return e};var JJ=function(e){Bc.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(o){o.isActive()&&(JP(o.target)>e?r.activeTargets.push(o):r.skippedTargets.push(o))})})};var A8e=function(){var e=0;for(JJ(e);b8e();)e=C8e(),JJ(e);return w8e()&&S8e(),e>0};var QJ,D8e=[],Imr=function(){return D8e.splice(0).forEach(function(e){return e()})},N8e=function(e){if(!QJ){var t=0,r=document.createTextNode(""),n={characterData:!0};new MutationObserver(function(){return Imr()}).observe(r,n),QJ=function(){r.textContent="".concat(t?t--:t++)}}D8e.push(e),QJ()};var O8e=function(e){N8e(function(){requestAnimationFrame(e)})};var QP=0,Tmr=function(){return!!QP},Mmr=250,Cmr={attributes:!0,characterData:!0,childList:!0,subtree:!0},L8e=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],P8e=function(e){return e===void 0&&(e=0),Date.now()+e},eQ=!1,Amr=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var r=this;if(t===void 0&&(t=Mmr),!eQ){eQ=!0;var n=P8e(t);O8e(function(){var o=!1;try{o=A8e()}finally{if(eQ=!1,t=n-P8e(),!Tmr())return;o?r.run(1e3):t>0?r.run(t):r.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,r=function(){return t.observer&&t.observer.observe(document.body,Cmr)};document.body?r():j0.addEventListener("DOMContentLoaded",r)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),L8e.forEach(function(r){return j0.addEventListener(r,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),L8e.forEach(function(r){return j0.removeEventListener(r,t.listener,!0)}),this.stopped=!0)},e}(),ek=new Amr,tQ=function(e){!QP&&e>0&&ek.start(),QP+=e,!QP&&ek.stop()};var Dmr=function(e){return!BM(e)&&!I8e(e)&&getComputedStyle(e).display==="inline"},k8e=function(){function e(t,r){this.target=t,this.observedBox=r||R0.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=XP(this.target,this.observedBox,!0);return Dmr(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}();var R8e=function(){function e(t,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=r}return e}();var tk=new WeakMap,j8e=function(e,t){for(var r=0;r<e.length;r+=1)if(e[r].target===t)return r;return-1},VM=function(){function e(){}return e.connect=function(t,r){var n=new R8e(t,r);tk.set(t,n)},e.observe=function(t,r,n){var o=tk.get(t),i=o.observationTargets.length===0;j8e(o.observationTargets,r)<0&&(i&&Bc.push(o),o.observationTargets.push(new k8e(r,n&&n.box)),tQ(1),ek.schedule())},e.unobserve=function(t,r){var n=tk.get(t),o=j8e(n.observationTargets,r),i=n.observationTargets.length===1;o>=0&&(i&&Bc.splice(Bc.indexOf(n),1),n.observationTargets.splice(o,1),tQ(-1))},e.disconnect=function(t){var r=this,n=tk.get(t);n.observationTargets.slice().forEach(function(o){return r.unobserve(t,o.target)}),n.activeTargets.splice(0,n.activeTargets.length)},e}();var rQ=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");VM.connect(this,t)}return e.prototype.observe=function(t,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ZJ(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");VM.observe(this,t,r)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!ZJ(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");VM.unobserve(this,t)},e.prototype.disconnect=function(){VM.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();var q8e=Z(we()),Nmr=q8e.default[typeof document!="undefined"&&document.createElement!==void 0?"useLayoutEffect":"useEffect"],z8e=Nmr;var Omr=typeof window!="undefined"&&"ResizeObserver"in window?window.ResizeObserver:rQ;function Lmr(){}function Pmr(e,t){let r=Rmr(),n=pP(t);return z8e(()=>{let o=!1,i=e&&"current"in e?e.current:e;if(!i)return Lmr;function a(u,p){o||n.current(u,p)}return r.subscribe(i,a),()=>{o=!0,r.unsubscribe(i,a)}},[e,r,n]),r.observer}function kmr(){let e=!1,t=[],r=new Map,n=new Omr((o,i)=>{t=t.concat(o);function a(){let u=new Set;for(let p=0;p<t.length;p++){if(u.has(t[p].target))continue;u.add(t[p].target);let h=r.get(t[p].target);h==null||h.forEach(g=>g(t[p],i))}t=[],e=!1}e||window.requestAnimationFrame(a),e=!0});return{observer:n,subscribe(o,i){var a;n.observe(o);let u=(a=r.get(o))!==null&&a!==void 0?a:[];u.push(i),r.set(o,u)},unsubscribe(o,i){var a;let u=(a=r.get(o))!==null&&a!==void 0?a:[];if(u.length===1){n.unobserve(o),r.delete(o);return}let p=u.indexOf(i);p!==-1&&u.splice(p,1),r.set(o,u)}}}var nQ,Rmr=()=>nQ||(nQ=kmr()),F8e=Pmr;var c9e=Z(mv(),1);var Gf=Z($M(),1);var Dgr="vkf-unique-control-panel",TQ="basemap-selector",IQ=class{constructor(){ct(this,"id",TQ)}onAdd(t){this._map=t;let r=`maplibregl-ctrl maplibregl-ctrl-group basemap-selector ${Dgr}`,n=document.createElement("div");return n.className=r,this._container=n,n}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},$Fe=IQ;var z0=Z(n9e(),1);var o9e=(e,t="control-feedback-container")=>{let r=document.getElementById(t);if(r===null){let n=e.getCanvasContainer();r=document.createElement("div"),r.id=t,n.appendChild(r)}return r};var uk=3,i9e=e=>`${(0,z0.default)(e[0],7)},${(0,z0.default)(e[1],7)}`,ck=class{constructor(){ct(this,"buttonCopyPosition");ct(this,"textElCurrentPosition");ct(this,"textElSavedPosition");ct(this,"targetEl");ct(this,"_container");ct(this,"_button");ct(this,"savedPosition");ct(this,"generateSavedText",()=>{if(this.savedPosition===void 0)return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="none"),fe("control-mouseposition-save-helper");{let t=fe("control-mouseposition-saved-label");return this.buttonCopyPosition!==void 0&&(this.buttonCopyPosition.style.display="block"),t+": Lon: "+(0,z0.default)(this.savedPosition[0],uk)+" Lat: "+(0,z0.default)(this.savedPosition[1],uk)}});ct(this,"savePosition",t=>{if(this._map){let r=t.lngLat.toArray();this.savedPosition=r.slice(),navigator.clipboard.writeText(i9e(r)),this.updatePosition(t)}});ct(this,"updatePosition",t=>{let r=this.textElCurrentPosition,n=this.textElSavedPosition,{lngLat:o}=t;r.innerHTML="Lon: "+(0,z0.default)(o.lng,uk)+", Lat: "+(0,z0.default)(o.lat,uk),n.innerHTML=this.generateSavedText()});ct(this,"handleCopyButtonClick",t=>{t.preventDefault(),t.stopPropagation();let r=this.savedPosition;r!==void 0&&navigator.clipboard.writeText(i9e(r)),t.target.blur()});ct(this,"toggleMousePosition",t=>{t.preventDefault();let r="active",n=this._button.classList.contains(r),o=this._map;if(!o)return;this._button.classList.toggle(r);let i=this.targetEl,a=o9e(o);if(this.targetEl===void 0){i=document.createElement("div"),i.className="ol-control ol-mouse-position-box";let u=document.createElement("p");this.textElCurrentPosition=u;let p=document.createElement("p");this.textElSavedPosition=p;let h=document.createElement("button");h.id="position-copy-to-clipboard",h.innerHTML="<span class=\"glyphicon glyphicon-copy\"></span>",h.title=fe("control-mouseposition-button-title"),this.buttonCopyPosition=h,h.addEventListener("click",this.handleCopyButtonClick);let g=document.createElement("div");g.className="saved-position-container",g.appendChild(p),g.appendChild(h),i.appendChild(u),i.appendChild(g),a.appendChild(i),this.targetEl=i}else this.textElCurrentPosition.innerHTML="",this.textElSavedPosition.innerHTML="";n?(o.off("mousemove",this.updatePosition),o.off("click",this.savePosition)):(this.savedPosition=void 0,o.on("mousemove",this.updatePosition),o.on("click",this.savePosition)),this.updatePosition({lngLat:o.unproject([t.clientX,t.clientY])}),i.classList.toggle(r),a.classList.toggle(`mouseposition-${r}`)})}onAdd(t){this._map=t;let r=document.createElement("div");r.className="maplibregl-ctrl maplibregl-ctrl-group";let n=document.createElement("button");return n.title=fe("control-mouseposition-title"),n.className="maplibregl-ctrl-mouse-position",n.type="button",r.appendChild(n),this._container=r,this._button=n,n.addEventListener("click",this.toggleMousePosition,!1),this._container}onRemove(){this._map.off("mousemove",this.updatePosition),this._map.off("click",this.savePosition),this._map=null,this._container.parentNode.removeChild(this._container)}};function a9e(e,t){for(let r of e)typeof t[r]=="function"&&(t[r]=t[r].bind(t))}function $b(e,t,r){let n=window.document.createElement(e);return t!==void 0&&(n.className=t),r&&r.appendChild(n),n}function s9e(e){e.parentNode&&e.parentNode.removeChild(e)}var AQ="permalink-control",CQ=class{constructor(){ct(this,"id",AQ)}onAdd(t){return this._map=t,this._container=$b("div","maplibregl-ctrl maplibregl-ctrl-group permalink-control"),this._container}onRemove(){this._container.parentNode.removeChild(this._container),this._map=void 0}},l9e=CQ;var fk=class{constructor(){ct(this,"_map");ct(this,"_container");ct(this,"_terrainButton");a9e(["_toggleTerrain","_updateTerrainIcon"],this)}onAdd(t){return this._map=t,this._container=$b("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=$b("button","maplibregl-ctrl-terrain",this._container),$b("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){s9e(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}_toggleTerrain(){this._map.hasTerrain()?this._map.disableTerrain():this._map.enableTerrain(),this._updateTerrainIcon()}_updateTerrainIcon(){this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.hasTerrain()?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))}};function Le(e){return e!=null}function pk(e){return typeof e=="string"||e instanceof String}function fe(e){let t=hr.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let r=t[e];return r===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):r}var u9e=()=>[{position:"top-left",control:new Gf.NavigationControl({showZoom:!0,showCompass:!1,visualizePitch:!1})},{position:"top-left",control:new Gf.FullscreenControl},{position:"top-left",control:new Gf.NavigationControl({showZoom:!1,showCompass:!0,visualizePitch:!0})},{position:"top-left",control:new ck},{position:"top-left",control:new fk},{position:"top-left",control:new $Fe},{position:"top-left",control:new Gf.GeolocateControl({trackUserLocation:!0})},{position:"top-left",control:new l9e},{position:"bottom-right",control:new Gf.AttributionControl({compact:!0})},{position:"bottom-right",control:new Gf.ScaleControl({maxWidth:137})}];var gv={EN:"en",DE:"de"},Kgr=typeof process!="undefined"&&Le(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&Le(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",dk=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),Ml={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:gv.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},hr={axiosApiInstance:null,appendSettings(e){Ml=Object.assign({},Ml,e)},getSettings(){return Ml},getBaseMaps(){return Ml.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Ml.MAPVIEW_PARAMS)},getLanguageDict(){return Ml.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Ml.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Ml.TERRAIN_TILES)},getUsername(){return Ml.USERNAME},isUserAuthenticated(){return Ml.USER_ISAUTHENTICATED===!0},updateSettings(e){Ml=e},_initAxiosApiInstance(){let e=Ml.API_GEOREFERENCE_BASEURL,t=pk(e)&&e.length===0;if(!Le(e)||t)throw new Error("The URL for the georeference service is not set.");let r=Object.assign({baseURL:e,withCredentials:!0},Kgr?{headers:{get:dk(),post:dk(),put:dk(),delete:dk()}}:{});this.axiosApiInstance=c9e.default.create(r)},getGeoreferenceApiClient(){return Le(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Ml.MARKER_URL;if(!Le(e))throw new Error("The marker icon url is not set.");return{id:Ml.MARKER_IMAGE_ID,url:e}},getUserRole(){return Ml.USER_ROLE}};var vv="vkf-terrain";var f9e=new Set(["fill-opacity","line-opacity","circle-opacity","icon-opacity","text-opacity","raster-opacity"]),p9e=new Set(["visibility"]),fu={None:"NONE",BasemapSelector:"BASEMAP_SELECTOR",Permalink:"PERMALINK"},xa={controlAdded:"controlAdded",controlRemoved:"controlRemoved",opacityChanged:"opacityChanged",visibilityChanged:"visibilityChanged"};var jo={NONE:0,FEATURE:1,METADATA:2,HISTORY:3},pu={HORIZONTAL:"HORIZONTAL",VERTICAL:"VERTICAL"},Ws={STANDARD:"STANDARD",DRAW:"DRAW"},Xgr={EXTRA_SMALL:600,SMALL:600,MEDIUM:768,LARGE:992},d9e=e=>e>=Xgr.LARGE?pu.HORIZONTAL:pu.VERTICAL,h9e=e=>{switch(e){case pu.HORIZONTAL:default:return"ol-map-large";case pu.VERTICAL:return"ol-map-small";}};var Vc=en({key:"activeBasemapId",default:hr.getSettings().BASEMAPS[0].id}),hk=en({key:"currentApplicationState",default:void 0}),mk=en({key:"elementScreenSize",default:{map:{height:0,width:0}}}),m9e={facets:[],georeference:!1},Gc=en({key:"facetState",default:{facets:[],georeference:!1}}),Yb=en({key:"layoutState",default:pu.VERTICAL}),Hc=en({key:"horizontalLayoutModeState",default:Ws.STANDARD}),yr=en({key:"mapState",default:void 0,dangerouslyAllowMutability:!0}),g9e=en({key:"map3dState",default:!1}),Zb=en({key:"mapCountState",default:10}),gk=en({key:"searchIsLoadingState",default:!1}),_n=en({key:"selectedLayersState",default:[],dangerouslyAllowMutability:!0}),vk=en({key:"selectedOriginalMapIdState",default:void 0}),$s=en({key:"selectedGeoJsonLayerIdState",default:void 0}),Kb=en({key:"selectedGeoJsonLayerLastUpdatedState",default:0}),Qp=Tl({key:"selectedGeoJsonLayerState",get:({get:e})=>{let t=e($s),r=e(_n),n=e(Kb);return{selectedLayer:r.find(i=>i.getId()===t),lastUpdated:n}},dangerouslyAllowMutability:!0}),Ys=en({key:"selectedGeoJsonFeatureIdentifierState",default:null}),v9e=Tl({key:"isGeoJsonFeatureSelectedState",get:({get:e})=>{let t=e(Ys);if(!Le(t))return!1;let{featureId:r,sourceId:n}=t;return Le(r)&&Le(n)}}),yv=en({key:"timeExtentState",default:[1850,1970]}),DQ=[1850,1970],_v=en({key:"timeRangeState",default:DQ}),yk=en({key:"baseMapStyleLayersState",default:[]}),y9e=en({key:"activeDialogState",default:fu.None}),Fa=en({key:"drawState",default:void 0}),ba=en({key:"editedGeojsonState",default:null}),Zs=en({key:"metadataDrawState",default:null}),Jn=en({key:"vectorMapState",default:null}),kh=en({key:"vectorMapActiveVersionDrawState",default:null}),_9e=Tl({key:"isActiveVectorMapVersionDifferentState",get:({get:e})=>e(kh)!==null}),_k=en({key:"showDropZoneState",default:!1}),xk=en({key:"addedFileState",default:null}),x9e=en({key:"addGeoJsonDialogState",default:!1}),la=en({key:"drawModePanelState",default:jo.NONE});function b9e(e,t=250){let r=(0,Hf.useRef)();return(0,Hf.useEffect)(()=>{clearTimeout(r.current)},[e]),(...n)=>{r.current=window.setTimeout(()=>{e.apply(this,n)},t)}}function w9e(e){let[t,r]=(0,Hf.useState)(e);return(0,Hf.useEffect)(()=>{r(e)},[e]),t}function E9e(e,t){let r=Mr(mk),n=YM(e);(0,Hf.useEffect)(()=>{let{height:o,width:i}=n;r(a=>Object.assign({},a,{[t]:{height:o,width:i}}))},[n])}var YM=e=>{let[t,r]=(0,Hf.useState)({height:0,width:0});return(0,Hf.useLayoutEffect)(()=>{r(e.current.getBoundingClientRect())},[e]),F8e(e,n=>r(n.contentRect)),t};function S9e(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=S9e(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function Jgr(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=S9e(e))&&(n&&(n+=" "),n+=t);return n}var Et=Jgr;var I9e=e=>{let{onClose:t,text:r,type:n}=e;return Ju.default.createElement("div",{className:"notification-item"},Ju.default.createElement("div",{className:Et("alert","alert-"+n),role:"alert"},Ju.default.createElement("div",{className:"close"},Ju.default.createElement("button",{type:"button",className:"close","aria-label":"Close",onClick:t},Ju.default.createElement("span",{"aria-hidden":"true"},"\xD7"))),Ju.default.createElement("div",{className:"text"},r)))};I9e.propTypes={onClose:bk.default.func,text:bk.default.string,type:bk.default.string};var Qgr=()=>{let e=ht(ji),t=w9e(e),[r,n]=(0,Ju.useState)([]);return(0,Ju.useEffect)(()=>{if(e!==null&&e.id!==null&&e!==t){let o=[...r],i=r.findIndex(a=>a.id===e.id);i>-1?o.splice(i,1,e.text!==null?e:void 0):o.splice(0,0,e),n(o.filter(a=>a!==void 0))}},[e,r,t]),Ju.default.createElement("div",{className:Et("vkf-notifications",r.length===0?"hide":"")},r.map(({type:o,text:i},a)=>Ju.default.createElement(I9e,{key:a,onClose:()=>{let u=[...r];u.splice(a,1),n(u)},type:o,text:i})))},T9e=Qgr;var M9e=T9e;var Pv=Z(we(),1);var lZe=Z(wk(),1);var uw=Z(we(),1);var it={id:"id",timePublished:"time_published",timeChanged:"time_changed",title:"title",thumbnailUrl:"thumb_url",bounds:"bounds",hasGeoReference:"has_georeference",tmsUrls:"tms_urls",onlineResources:"online_resources",mapScale:"map_scale",rawMapIds:"raw_map_ids",name:"name",description:"description",type:"type",vectorMapId:"vector_map_id",version:"version",userRole:"user_role"},jh={id:"vkf:layer_id"},Cn={HISTORIC_MAP:"historic_map",MOSAIC_MAP:"mosaic",VECTOR_MAP:"vector",LEGACY_GEOJSON:"geojson"};var Xb=class e{constructor({metadata:t,geometry:r}){ct(this,"metadata",{});ct(this,"geometry",{});if(this.constructor===e)throw new Error(`Abstract class '${this.constructor}' cannot be instantiated.`);this.metadata=t,this.geometry=r}getGeometry(){return this.geometry}getId(){return this.metadata.id}getMetadata(t){return Le(t)?this.metadata[t]:this.metadata}updateMetadata(t,r){if(!Le(t)||!Le(r)){console.warn("Trying to update metadata without key or value");return}if(!Object.values(it).includes(t)){console.warn(`Trying to update metadata with invalid key '${t}'`);return}this.metadata[t]=r}addLayerToMap(){throw new Error("Method 'addLayerToMap' must be implemented.")}isDisplayedInMap(){throw new Error("Method 'isDisplayedInMap' must be implemented.")}getType(){throw new Error("Method 'getType' must be implemented.")}setOpacity(){throw new Error("Method 'setOpacity' must be implemented.")}getOpacity(){throw new Error("Method 'getOpacity' must be implemented.")}moveToTop(){throw new Error("Method 'moveToTop' must be implemented.")}move(){throw new Error("Method 'move' must be implemented.")}getMapLibreLayerId(){throw new Error("Method 'getMapLibreLayerId' must be implemented.")}removeLayer(){throw new Error("Method 'removeLayer' must be implemented.")}setVisibility(){throw new Error("Method 'setVisibility' must be implemented.")}isVisible(){throw new Error("Method 'isVisible' must be implemented.")}serialize(){throw new Error("Method 'serialize' must be implemented.")}};var Sk=Z(we(),1);var ZM=Z(we(),1);var Ek=Z(xt(),1);var W9e=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.addSource(t,{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({id:r,type:"fill",source:t,paint:{"fill-color":"#ff0000","fill-opacity":.2}}),e.addLayer({id:n,type:"line",source:t,paint:{"line-color":"#ff0000","line-width":1}})},uvr=(e,{sourceId:t,fillId:r,outlineId:n})=>{e.getLayer(r)&&e.removeLayer(r),e.getLayer(n)&&e.removeLayer(n),e.getSource(t)&&e.removeSource(t)},$9e=e=>{let t=ht(yr);return(0,ZM.useEffect)(()=>{if(Le(t)){let r=()=>{W9e(t,Se({},e))};return t._loaded?W9e(t,Se({},e)):t.once("load",r),()=>{uvr(t,Se({},e)),t.off("load",r)}}},[t]),ZM.default.createElement(ZM.default.Fragment,null)};$9e.propTypes={sourceId:Ek.default.string.isRequired,fillId:Ek.default.string.isRequired,outlineId:Ek.default.string.isRequired};var Y9e=$9e;var Z9e=Y9e;var K9e="vkf-map-overlay-source",Wc="vkf-map-overlay-fill",cvr="vkf-map-overlay-outline",LQ=(e,t)=>{let r=e.getSource(K9e);r&&r.setData(t)},X9e=()=>Sk.default.createElement(Sk.default.Fragment,null,Sk.default.createElement(Z9e,{sourceId:K9e,fillId:Wc,outlineId:cvr}));X9e.propTypes={};var J9e=X9e;var Q9e=(e,t,r,n)=>{var a,u;let o=e.getId();t.addSource(o,qt(Se({type:"raster"},r),{bounds:e.getMetadata(it.bounds)}));let i=t.getLayer(Wc)!==void 0?Wc:void 0;t.addLayer({id:o,type:"raster",metadata:{[jh.id]:o},source:o,layout:{visibility:(a=n==null?void 0:n.visibility)!=null?a:"visible"},paint:{"raster-opacity":(u=n==null?void 0:n.opacity)!=null?u:1}},i)};function PQ(e,t,r){if(e!==null)for(var n,o,i,a,u,p,h,g=0,x=0,b,T=e.type,A=T==="FeatureCollection",L=T==="Feature",P=A?e.features.length:1,k=0;k<P;k++){h=A?e.features[k].geometry:L?e.geometry:e,b=h?h.type==="GeometryCollection":!1,u=b?h.geometries.length:1;for(var q=0;q<u;q++){var U=0,H=0;if(a=b?h.geometries[q]:h,a!==null){p=a.coordinates;var X=a.type;switch(g=r&&(X==="Polygon"||X==="MultiPolygon")?1:0,X){case null:break;case"Point":if(t(p,x,k,U,H)===!1)return!1;x++,U++;break;case"LineString":case"MultiPoint":for(n=0;n<p.length;n++){if(t(p[n],x,k,U,H)===!1)return!1;x++,X==="MultiPoint"&&U++}X==="LineString"&&U++;break;case"Polygon":case"MultiLineString":for(n=0;n<p.length;n++){for(o=0;o<p[n].length-g;o++){if(t(p[n][o],x,k,U,H)===!1)return!1;x++}X==="MultiLineString"&&U++,X==="Polygon"&&H++}X==="Polygon"&&U++;break;case"MultiPolygon":for(n=0;n<p.length;n++){for(H=0,o=0;o<p[n].length;o++){for(i=0;i<p[n][o].length-g;i++){if(t(p[n][o][i],x,k,U,H)===!1)return!1;x++}H++}U++}break;case"GeometryCollection":for(n=0;n<a.geometries.length;n++)if(PQ(a.geometries[n],t,r)===!1)return!1;break;default:throw new Error("Unknown Geometry Type");}}}}}function KM(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let r=[1/0,1/0,-1/0,-1/0];return PQ(e,n=>{r[0]>n[0]&&(r[0]=n[0]),r[1]>n[1]&&(r[1]=n[1]),r[2]<n[0]&&(r[2]=n[0]),r[3]<n[1]&&(r[3]=n[1])}),r}var XM,Ik,e7e,kQ=class extends Xb{constructor({metadata:r,geometry:n}){super({metadata:r,geometry:n});og(this,Ik);og(this,XM,!1);Zl(this,Ik,e7e).call(this)}addLayerToMap(r,{sourceSettings:n,layerSettings:o}){if(r.getSource(this.getId())){console.error(`Source with id '${this.getId()}' exists already in map.`);return}return Q9e(this,r,n,o)}addToOverlay(r,n){let o=r.getSource(n);if(o){let i=this.getPreviewFeature();i.id=this.getId();let a=[i];o.updateData({add:a})}}removeFromOverlay(r,n){let o=r.getSource(n);if(o){let i=[this.getId()];o.updateData({remove:i})}}getPreviewFeature(){return{type:"Feature",properties:{},geometry:this.geometry}}isDisplayedInMap(r){return r.getSource(this.getId())!==void 0&&r.getLayer(this.getId())!==void 0}getType(){return Cn.HISTORIC_MAP}setOpacity(r,n){r.getLayer(this.getId())&&r.setPaintProperty(this.getId(),"raster-opacity",n)}getOpacity(r){var n;return r.getLayer(this.getId())?(n=r.getPaintProperty(this.getId(),"raster-opacity"))!=null?n:1:null}moveToTop(r){this.move(r,null)}move(r,n){let o=n;Le(n)||(Le(r.getLayer(Wc))?o=Wc:o=null),r.moveLayer(this.getId(),o)}getMapLibreLayerId(){return this.getId()}removeMapLibreLayers(r){r.getLayer(this.getMapLibreLayerId())&&r.removeLayer(this.getMapLibreLayerId()),r.getSource(this.getId())&&r.removeSource(this.getId())}setVisibility(r,n){r.setLayoutProperty(this.getMapLibreLayerId(),"visibility",n)}isVisible(r){return r.getLayoutProperty(this.getMapLibreLayerId(),"visibility")==="visible"}isMissing(){return Tp(this,XM)}setIsMissing(r){jy(this,XM,r)}};XM=new WeakMap,Ik=new WeakSet,e7e=function(){let r=this.geometry?KM(this.geometry):void 0;this.metadata[it.bounds]=r};var t7e=kQ;var qh=t7e;var Ur={SYMBOL:"symbol",LINE:"line",FILL:"fill",OUTLINE:"outline"},RQ={[Ur.LINE]:"line-opacity",[Ur.FILL]:"fill-opacity",[Ur.OUTLINE]:"outline-opacity"},jQ={[Ur.LINE]:"stroke-opacity",[Ur.FILL]:"fill-opacity",[Ur.OUTLINE]:"stroke-opacity"},qQ=e=>Object.keys(jQ).includes(e),zn={[Ur.SYMBOL]:{COLOR:"#0000FF"},[Ur.LINE]:{COLOR:"#00FF00",WIDTH:3,OPACITY:1},[Ur.OUTLINE]:{COLOR:"#0000FF",WIDTH:1,OPACITY:1},[Ur.FILL]:{COLOR:"#FFFF00",OPACITY:.27}},zQ={[Ur.SYMBOL]:{type:"symbol",layout:{"icon-image":hr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["feature-state","marker"],["get","marker"],zn[Ur.SYMBOL].COLOR],"icon-halo-color":"#FFF","icon-halo-width":1},filter:["==",["geometry-type"],"Point"]},[Ur.LINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],zn[Ur.LINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],zn[Ur.LINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],zn[Ur.LINE].OPACITY]},filter:["==",["geometry-type"],"LineString"]},[Ur.OUTLINE]:{type:"line",paint:{"line-color":["coalesce",["feature-state","stroke"],["get","stroke"],zn[Ur.OUTLINE].COLOR],"line-width":["coalesce",["feature-state","stroke-width"],["get","stroke-width"],zn[Ur.OUTLINE].WIDTH],"line-opacity":["coalesce",["feature-state","stroke-opacity"],["get","stroke-opacity"],zn[Ur.OUTLINE].OPACITY]},filter:["==",["geometry-type"],"Polygon"]},[Ur.FILL]:{type:"fill",paint:{"fill-color":["coalesce",["feature-state","fill"],["get","fill"],zn[Ur.FILL].COLOR],"fill-opacity":["coalesce",["feature-state","fill-opacity"],["get","fill-opacity"],zn[Ur.FILL].OPACITY]},filter:["==",["geometry-type"],"Polygon"]}};var JM=class extends Date{constructor(){super(),this.setTime(arguments.length===0?Date.now():arguments.length===1?typeof arguments[0]=="string"?+new Date(arguments[0]):arguments[0]:Date.UTC(...arguments))}getTimezoneOffset(){return 0}},r7e=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(e=>{if(r7e.test(e)){let t=Date.prototype[e.replace(r7e,"$1UTC")];t&&(JM.prototype[e]=t)}});var Tk=class extends JM{toString(){let t=this.toDateString(),r=this.toTimeString();return`${t} ${r}`}toDateString(){let t=fvr.format(this),r=pvr.format(this),n=this.getFullYear();return`${t} ${r} ${n}`}toTimeString(){return`${dvr.format(this)} GMT+0000 (Coordinated Universal Time)`}toLocaleString(t,r){return Date.prototype.toLocaleString.call(this,t,Se({timeZone:"UTC"},r))}toLocaleDateString(t,r){return Date.prototype.toLocaleDateString.call(this,t,Se({timeZone:"UTC"},r))}toLocaleTimeString(t,r){return Date.prototype.toLocaleTimeString.call(this,t,Se({timeZone:"UTC"},r))}},fvr=new Intl.DateTimeFormat("en-US",{weekday:"short",timeZone:"UTC"}),pvr=new Intl.DateTimeFormat("en-US",{month:"short",day:"numeric",timeZone:"UTC"}),dvr=new Intl.DateTimeFormat("en-GB",{hour12:!1,hour:"numeric",minute:"numeric",second:"numeric",timeZone:"UTC"});var xv=e=>new Tk(+new Date(e));var hvr=Math.pow(10,8)*24*60*60*1e3,Qsn=-hvr,Mk=6048e5,n7e=864e5,QM=6e4,eC=36e5,o7e=1e3;var mvr=3600;var i7e=mvr*24,eln=i7e*7,gvr=i7e*365.2425,vvr=gvr/12,tln=vvr*3,FQ=Symbol.for("constructDateFrom");function Bn(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&FQ in e?e[FQ](t):e instanceof Date?new e.constructor(t):new Date(t)}function tn(e,t){return Bn(t||e,e)}function Ck(e,t,r){let n=tn(e,r==null?void 0:r.in);return isNaN(t)?Bn((r==null?void 0:r.in)||e,NaN):(t&&n.setDate(n.getDate()+t),n)}var yvr={};function $c(){return yvr}function hu(e,t){var u,p,h,g,x,b,T,A;let r=$c(),n=(A=(T=(g=(h=t==null?void 0:t.weekStartsOn)!=null?h:(p=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:p.weekStartsOn)!=null?g:r.weekStartsOn)!=null?T:(b=(x=r.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?A:0,o=tn(e,t==null?void 0:t.in),i=o.getDay(),a=(i<n?7:0)+i-n;return o.setDate(o.getDate()-a),o.setHours(0,0,0,0),o}function Wf(e,t){return hu(e,qt(Se({},t),{weekStartsOn:1}))}function Ak(e,t){let r=tn(e,t==null?void 0:t.in),n=r.getFullYear(),o=Bn(r,0);o.setFullYear(n+1,0,4),o.setHours(0,0,0,0);let i=Wf(o),a=Bn(r,0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);let u=Wf(a);return r.getTime()>=i.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function F0(e){let t=tn(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function a7e(e,...t){let r=Bn.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function tC(e,t){let r=tn(e,t==null?void 0:t.in);return r.setHours(0,0,0,0),r}function s7e(e,t,r){let[n,o]=a7e(r==null?void 0:r.in,e,t),i=tC(n),a=tC(o),u=+i-F0(i),p=+a-F0(a);return Math.round((u-p)/n7e)}function l7e(e,t){let r=Ak(e,t),n=Bn((t==null?void 0:t.in)||e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Wf(n)}function u7e(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Dk(e){return!(!u7e(e)&&typeof e!="number"||isNaN(+tn(e)))}function c7e(e,t){let r=tn(e,t==null?void 0:t.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}var _vr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},f7e=(e,t,r)=>{let n,o=_vr[e];return typeof o=="string"?n=o:t===1?n=o.one:n=o.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Nk(e){return(t={})=>{let r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}var xvr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bvr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wvr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},p7e={date:Nk({formats:xvr,defaultWidth:"full"}),time:Nk({formats:bvr,defaultWidth:"full"}),dateTime:Nk({formats:wvr,defaultWidth:"full"})};var Evr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},d7e=(e,t,r,n)=>Evr[e];function Jb(e){return(t,r)=>{let n=r!=null&&r.context?String(r.context):"standalone",o;if(n==="formatting"&&e.formattingValues){let a=e.defaultFormattingWidth||e.defaultWidth,u=r!=null&&r.width?String(r.width):a;o=e.formattingValues[u]||e.formattingValues[a]}else{let a=e.defaultWidth,u=r!=null&&r.width?String(r.width):e.defaultWidth;o=e.values[u]||e.values[a]}let i=e.argumentCallback?e.argumentCallback(t):t;return o[i]}}var Svr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Ivr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Tvr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mvr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Cvr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Avr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dvr=(e,t)=>{let r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd";}return r+"th"},h7e={ordinalNumber:Dvr,era:Jb({values:Svr,defaultWidth:"wide"}),quarter:Jb({values:Ivr,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Jb({values:Tvr,defaultWidth:"wide"}),day:Jb({values:Mvr,defaultWidth:"wide"}),dayPeriod:Jb({values:Cvr,defaultWidth:"wide",formattingValues:Avr,defaultFormattingWidth:"wide"})};function Qb(e){return(t,r={})=>{let n=r.width,o=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(o);if(!i)return null;let a=i[0],u=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],p=Array.isArray(u)?Ovr(u,x=>x.test(a)):Nvr(u,x=>x.test(a)),h;h=e.valueCallback?e.valueCallback(p):p,h=r.valueCallback?r.valueCallback(h):h;let g=t.slice(a.length);return{value:h,rest:g}}}function Nvr(e,t){for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function Ovr(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function m7e(e){return(t,r={})=>{let n=t.match(e.matchPattern);if(!n)return null;let o=n[0],i=t.match(e.parsePattern);if(!i)return null;let a=e.valueCallback?e.valueCallback(i[0]):i[0];a=r.valueCallback?r.valueCallback(a):a;let u=t.slice(o.length);return{value:a,rest:u}}}var Lvr=/^(\d+)(th|st|nd|rd)?/i,Pvr=/\d+/i,kvr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Rvr={any:[/^b/i,/^(a|c)/i]},jvr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},qvr={any:[/1/i,/2/i,/3/i,/4/i]},zvr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fvr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Uvr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Bvr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Vvr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gvr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},g7e={ordinalNumber:m7e({matchPattern:Lvr,parsePattern:Pvr,valueCallback:e=>parseInt(e,10)}),era:Qb({matchPatterns:kvr,defaultMatchWidth:"wide",parsePatterns:Rvr,defaultParseWidth:"any"}),quarter:Qb({matchPatterns:jvr,defaultMatchWidth:"wide",parsePatterns:qvr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Qb({matchPatterns:zvr,defaultMatchWidth:"wide",parsePatterns:Fvr,defaultParseWidth:"any"}),day:Qb({matchPatterns:Uvr,defaultMatchWidth:"wide",parsePatterns:Bvr,defaultParseWidth:"any"}),dayPeriod:Qb({matchPatterns:Vvr,defaultMatchWidth:"any",parsePatterns:Gvr,defaultParseWidth:"any"})};var rC={code:"en-US",formatDistance:f7e,formatLong:p7e,formatRelative:d7e,localize:h7e,match:g7e,options:{weekStartsOn:0,firstWeekContainsDate:1}};function v7e(e,t){let r=tn(e,t==null?void 0:t.in);return s7e(r,c7e(r))+1}function Ok(e,t){let r=tn(e,t==null?void 0:t.in),n=+Wf(r)-+l7e(r);return Math.round(n/Mk)+1}function ew(e,t){var g,x,b,T,A,L,P,k;let r=tn(e,t==null?void 0:t.in),n=r.getFullYear(),o=$c(),i=(k=(P=(T=(b=t==null?void 0:t.firstWeekContainsDate)!=null?b:(x=(g=t==null?void 0:t.locale)==null?void 0:g.options)==null?void 0:x.firstWeekContainsDate)!=null?T:o.firstWeekContainsDate)!=null?P:(L=(A=o.locale)==null?void 0:A.options)==null?void 0:L.firstWeekContainsDate)!=null?k:1,a=Bn((t==null?void 0:t.in)||e,0);a.setFullYear(n+1,0,i),a.setHours(0,0,0,0);let u=hu(a,t),p=Bn((t==null?void 0:t.in)||e,0);p.setFullYear(n,0,i),p.setHours(0,0,0,0);let h=hu(p,t);return+r>=+u?n+1:+r>=+h?n:n-1}function y7e(e,t){var u,p,h,g,x,b,T,A;let r=$c(),n=(A=(T=(g=(h=t==null?void 0:t.firstWeekContainsDate)!=null?h:(p=(u=t==null?void 0:t.locale)==null?void 0:u.options)==null?void 0:p.firstWeekContainsDate)!=null?g:r.firstWeekContainsDate)!=null?T:(b=(x=r.locale)==null?void 0:x.options)==null?void 0:b.firstWeekContainsDate)!=null?A:1,o=ew(e,t),i=Bn((t==null?void 0:t.in)||e,0);return i.setFullYear(o,0,n),i.setHours(0,0,0,0),hu(i,t)}function Lk(e,t){let r=tn(e,t==null?void 0:t.in),n=+hu(r,t)-+y7e(r,t);return Math.round(n/Mk)+1}function Sn(e,t){let r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}var zh={y(e,t){let r=e.getFullYear(),n=r>0?r:1-r;return Sn(t==="yy"?n%100:n,t.length)},M(e,t){let r=e.getMonth();return t==="M"?String(r+1):Sn(r+1,2)},d(e,t){return Sn(e.getDate(),t.length)},a(e,t){let r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m.";}},h(e,t){return Sn(e.getHours()%12||12,t.length)},H(e,t){return Sn(e.getHours(),t.length)},m(e,t){return Sn(e.getMinutes(),t.length)},s(e,t){return Sn(e.getSeconds(),t.length)},S(e,t){let r=t.length,n=e.getMilliseconds(),o=Math.trunc(n*Math.pow(10,r-3));return Sn(o,t.length)}};var tw={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},UQ={G:function(e,t,r){let n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"});}},y:function(e,t,r){if(t==="yo"){let n=e.getFullYear(),o=n>0?n:1-n;return r.ordinalNumber(o,{unit:"year"})}return zh.y(e,t)},Y:function(e,t,r,n){let o=ew(e,n),i=o>0?o:1-o;if(t==="YY"){let a=i%100;return Sn(a,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):Sn(i,t.length)},R:function(e,t){let r=Ak(e);return Sn(r,t.length)},u:function(e,t){let r=e.getFullYear();return Sn(r,t.length)},Q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return Sn(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"});}},q:function(e,t,r){let n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return Sn(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"});}},M:function(e,t,r){let n=e.getMonth();switch(t){case"M":case"MM":return zh.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"});}},L:function(e,t,r){let n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return Sn(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"});}},w:function(e,t,r,n){let o=Lk(e,n);return t==="wo"?r.ordinalNumber(o,{unit:"week"}):Sn(o,t.length)},I:function(e,t,r){let n=Ok(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):Sn(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):zh.d(e,t)},D:function(e,t,r){let n=v7e(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):Sn(n,t.length)},E:function(e,t,r){let n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"});}},e:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return Sn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(o,{width:"short",context:"formatting"});case"eeee":default:return r.day(o,{width:"wide",context:"formatting"});}},c:function(e,t,r,n){let o=e.getDay(),i=(o-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return Sn(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(o,{width:"narrow",context:"standalone"});case"cccccc":return r.day(o,{width:"short",context:"standalone"});case"cccc":default:return r.day(o,{width:"wide",context:"standalone"});}},i:function(e,t,r){let n=e.getDay(),o=n===0?7:n;switch(t){case"i":return String(o);case"ii":return Sn(o,t.length);case"io":return r.ordinalNumber(o,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"});}},a:function(e,t,r){let o=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(o,{width:"wide",context:"formatting"});}},b:function(e,t,r){let n=e.getHours(),o;switch(n===12?o=tw.noon:n===0?o=tw.midnight:o=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(o,{width:"wide",context:"formatting"});}},B:function(e,t,r){let n=e.getHours(),o;switch(n>=17?o=tw.evening:n>=12?o=tw.afternoon:n>=4?o=tw.morning:o=tw.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(o,{width:"wide",context:"formatting"});}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return zh.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):zh.H(e,t)},K:function(e,t,r){let n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):Sn(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):Sn(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):zh.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):zh.s(e,t)},S:function(e,t){return zh.S(e,t)},X:function(e,t,r){let n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return x7e(n);case"XXXX":case"XX":return U0(n);case"XXXXX":case"XXX":default:return U0(n,":");}},x:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"x":return x7e(n);case"xxxx":case"xx":return U0(n);case"xxxxx":case"xxx":default:return U0(n,":");}},O:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+_7e(n,":");case"OOOO":default:return"GMT"+U0(n,":");}},z:function(e,t,r){let n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+_7e(n,":");case"zzzz":default:return"GMT"+U0(n,":");}},t:function(e,t,r){let n=Math.trunc(+e/1e3);return Sn(n,t.length)},T:function(e,t,r){return Sn(+e,t.length)}};function _7e(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=Math.trunc(n/60),i=n%60;return i===0?r+String(o):r+String(o)+t+Sn(i,2)}function x7e(e,t){return e%60===0?(e>0?"-":"+")+Sn(Math.abs(e)/60,2):U0(e,t)}function U0(e,t=""){let r=e>0?"-":"+",n=Math.abs(e),o=Sn(Math.trunc(n/60),2),i=Sn(n%60,2);return r+o+t+i}var b7e=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"});}},w7e=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"});}},Hvr=(e,t)=>{let r=e.match(/(P+)(p+)?/)||[],n=r[1],o=r[2];if(!o)return b7e(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break;}return i.replace("{{date}}",b7e(n,t)).replace("{{time}}",w7e(o,t))},nC={p:w7e,P:Hvr};var Wvr=/^D+$/,$vr=/^Y+$/,Yvr=["D","DD","YY","YYYY"];function Pk(e){return Wvr.test(e)}function kk(e){return $vr.test(e)}function oC(e,t,r){let n=Zvr(e,t,r);if(console.warn(n),Yvr.includes(e))throw new RangeError(n)}function Zvr(e,t,r){let n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var Kvr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xvr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jvr=/^'([^]*?)'?$/,Qvr=/''/g,eyr=/[a-zA-Z]/;function BQ(e,t,r){var g,x,b,T,A,L,P,k,q,U,H,X,ee,ne,pe,ue,Ie,Re;let n=$c(),o=(x=(g=r==null?void 0:r.locale)!=null?g:n.locale)!=null?x:rC,i=(U=(q=(L=(A=r==null?void 0:r.firstWeekContainsDate)!=null?A:(T=(b=r==null?void 0:r.locale)==null?void 0:b.options)==null?void 0:T.firstWeekContainsDate)!=null?L:n.firstWeekContainsDate)!=null?q:(k=(P=n.locale)==null?void 0:P.options)==null?void 0:k.firstWeekContainsDate)!=null?U:1,a=(Re=(Ie=(ne=(ee=r==null?void 0:r.weekStartsOn)!=null?ee:(X=(H=r==null?void 0:r.locale)==null?void 0:H.options)==null?void 0:X.weekStartsOn)!=null?ne:n.weekStartsOn)!=null?Ie:(ue=(pe=n.locale)==null?void 0:pe.options)==null?void 0:ue.weekStartsOn)!=null?Re:0,u=tn(e,r==null?void 0:r.in);if(!Dk(u))throw new RangeError("Invalid time value");let p=t.match(Xvr).map(Te=>{let Ee=Te[0];if(Ee==="p"||Ee==="P"){let Ye=nC[Ee];return Ye(Te,o.formatLong)}return Te}).join("").match(Kvr).map(Te=>{if(Te==="''")return{isToken:!1,value:"'"};let Ee=Te[0];if(Ee==="'")return{isToken:!1,value:tyr(Te)};if(UQ[Ee])return{isToken:!0,value:Te};if(Ee.match(eyr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+Ee+"`");return{isToken:!1,value:Te}});o.localize.preprocessor&&(p=o.localize.preprocessor(u,p));let h={firstWeekContainsDate:i,weekStartsOn:a,locale:o};return p.map(Te=>{if(!Te.isToken)return Te.value;let Ee=Te.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&kk(Ee)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&Pk(Ee))&&oC(Ee,t,String(e));let Ye=UQ[Ee[0]];return Ye(u,Ee,o.localize,h)}).join("")}function tyr(e){let t=e.match(Jvr);return t?t[1].replace(Qvr,"'"):e}function E7e(e,t){var h,g;let r=tn(e,t==null?void 0:t.in);if(isNaN(+r))throw new RangeError("Invalid time value");let n=(h=t==null?void 0:t.format)!=null?h:"extended",o=(g=t==null?void 0:t.representation)!=null?g:"complete",i="",a="",u=n==="extended"?"-":"",p=n==="extended"?":":"";if(o!=="time"){let x=Sn(r.getDate(),2),b=Sn(r.getMonth()+1,2);i=`${Sn(r.getFullYear(),4)}${u}${b}${u}${x}`}if(o!=="date"){let x=r.getTimezoneOffset();if(x!==0){let k=Math.abs(x),q=Sn(Math.trunc(k/60),2),U=Sn(k%60,2);a=`${x<0?"+":"-"}${q}:${U}`}else a="Z";let b=Sn(r.getHours(),2),T=Sn(r.getMinutes(),2),A=Sn(r.getSeconds(),2),L=i===""?"":"T",P=[b,T,A].join(p);i=`${i}${L}${P}${a}`}return i}function S7e(){return Object.assign({},$c())}function I7e(e,t){let r=tn(e,t==null?void 0:t.in).getDay();return r===0?7:r}function T7e(e){return Math.trunc(+tn(e)/1e3)}function M7e(e,t){let r=ryr(t)?new t(0):Bn(t,0);return r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),r}function ryr(e){var t;return typeof e=="function"&&((t=e.prototype)==null?void 0:t.constructor)===e}var nyr=10,Rk=class{constructor(){ct(this,"subPriority",0)}validate(t,r){return!0}},jk=class extends Rk{constructor(t,r,n,o,i){super(),this.value=t,this.validateValue=r,this.setValue=n,this.priority=o,i&&(this.subPriority=i)}validate(t,r){return this.validateValue(t,this.value,r)}set(t,r,n){return this.setValue(t,r,this.value,n)}},qk=class extends Rk{constructor(r,n){super();ct(this,"priority",nyr);ct(this,"subPriority",-1);this.context=r||(o=>Bn(n,o))}set(r,n){return n.timestampIsSet?r:Bn(r,M7e(r,this.context))}};var br=class{run(t,r,n,o){let i=this.parse(t,r,n,o);return i?{setter:new jk(i.value,this.validate,this.set,this.priority,this.subPriority),rest:i.rest}:null}validate(t,r,n){return!0}};var zk=class extends br{constructor(){super(...arguments);ct(this,"priority",140);ct(this,"incompatibleTokens",["R","u","t","T"])}parse(r,n,o){switch(n){case"G":case"GG":case"GGG":return o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});case"GGGGG":return o.era(r,{width:"narrow"});case"GGGG":default:return o.era(r,{width:"wide"})||o.era(r,{width:"abbreviated"})||o.era(r,{width:"narrow"});}}set(r,n,o){return n.era=o,r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};var Yn={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},Yc={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function bo(e,t){return e&&{value:t(e.value),rest:e.rest}}function Vn(e,t){let r=t.match(e);return r?{value:parseInt(r[0],10),rest:t.slice(r[0].length)}:null}function Zc(e,t){let r=t.match(e);if(!r)return null;if(r[0]==="Z")return{value:0,rest:t.slice(1)};let n=r[1]==="+"?1:-1,o=r[2]?parseInt(r[2],10):0,i=r[3]?parseInt(r[3],10):0,a=r[5]?parseInt(r[5],10):0;return{value:n*(o*eC+i*QM+a*o7e),rest:t.slice(r[0].length)}}function Fk(e){return Vn(Yn.anyDigitsSigned,e)}function hn(e,t){switch(e){case 1:return Vn(Yn.singleDigit,t);case 2:return Vn(Yn.twoDigits,t);case 3:return Vn(Yn.threeDigits,t);case 4:return Vn(Yn.fourDigits,t);default:return Vn(new RegExp("^\\d{1,"+e+"}"),t);}}function rw(e,t){switch(e){case 1:return Vn(Yn.singleDigitSigned,t);case 2:return Vn(Yn.twoDigitsSigned,t);case 3:return Vn(Yn.threeDigitsSigned,t);case 4:return Vn(Yn.fourDigitsSigned,t);default:return Vn(new RegExp("^-?\\d{1,"+e+"}"),t);}}function nw(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0;}}function Uk(e,t){let r=t>0,n=r?t:1-t,o;if(n<=50)o=e||100;else{let i=n+50,a=Math.trunc(i/100)*100,u=e>=i%100;o=e+a-(u?100:0)}return r?o:1-o}function Bk(e){return e%400===0||e%4===0&&e%100!==0}var Vk=class extends br{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="yy"});switch(n){case"y":return bo(hn(4,r),i);case"yo":return bo(o.ordinalNumber(r,{unit:"year"}),i);default:return bo(hn(n.length,r),i);}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o){let i=r.getFullYear();if(o.isTwoDigitYear){let u=Uk(o.year,i);return r.setFullYear(u,0,1),r.setHours(0,0,0,0),r}let a=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(a,0,1),r.setHours(0,0,0,0),r}};var Gk=class extends br{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(r,n,o){let i=a=>({year:a,isTwoDigitYear:n==="YY"});switch(n){case"Y":return bo(hn(4,r),i);case"Yo":return bo(o.ordinalNumber(r,{unit:"year"}),i);default:return bo(hn(n.length,r),i);}}validate(r,n){return n.isTwoDigitYear||n.year>0}set(r,n,o,i){let a=ew(r,i);if(o.isTwoDigitYear){let p=Uk(o.year,a);return r.setFullYear(p,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),hu(r,i)}let u=!("era"in n)||n.era===1?o.year:1-o.year;return r.setFullYear(u,0,i.firstWeekContainsDate),r.setHours(0,0,0,0),hu(r,i)}};var Hk=class extends br{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(r,n){return n==="R"?rw(4,r):rw(n.length,r)}set(r,n,o){let i=Bn(r,0);return i.setFullYear(o,0,4),i.setHours(0,0,0,0),Wf(i)}};var Wk=class extends br{constructor(){super(...arguments);ct(this,"priority",130);ct(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(r,n){return n==="u"?rw(4,r):rw(n.length,r)}set(r,n,o){return r.setFullYear(o,0,1),r.setHours(0,0,0,0),r}};var $k=class extends br{constructor(){super(...arguments);ct(this,"priority",120);ct(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"Q":case"QQ":return hn(n.length,r);case"Qo":return o.ordinalNumber(r,{unit:"quarter"});case"QQQ":return o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQQ":return o.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return o.quarter(r,{width:"wide",context:"formatting"})||o.quarter(r,{width:"abbreviated",context:"formatting"})||o.quarter(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};var Yk=class extends br{constructor(){super(...arguments);ct(this,"priority",120);ct(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"q":case"qq":return hn(n.length,r);case"qo":return o.ordinalNumber(r,{unit:"quarter"});case"qqq":return o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});case"qqqqq":return o.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return o.quarter(r,{width:"wide",context:"standalone"})||o.quarter(r,{width:"abbreviated",context:"standalone"})||o.quarter(r,{width:"narrow",context:"standalone"});}}validate(r,n){return n>=1&&n<=4}set(r,n,o){return r.setMonth((o-1)*3,1),r.setHours(0,0,0,0),r}};var Zk=class extends br{constructor(){super(...arguments);ct(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]);ct(this,"priority",110)}parse(r,n,o){let i=a=>a-1;switch(n){case"M":return bo(Vn(Yn.month,r),i);case"MM":return bo(hn(2,r),i);case"Mo":return bo(o.ordinalNumber(r,{unit:"month"}),i);case"MMM":return o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});case"MMMMM":return o.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return o.month(r,{width:"wide",context:"formatting"})||o.month(r,{width:"abbreviated",context:"formatting"})||o.month(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};var Kk=class extends br{constructor(){super(...arguments);ct(this,"priority",110);ct(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(r,n,o){let i=a=>a-1;switch(n){case"L":return bo(Vn(Yn.month,r),i);case"LL":return bo(hn(2,r),i);case"Lo":return bo(o.ordinalNumber(r,{unit:"month"}),i);case"LLL":return o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});case"LLLLL":return o.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return o.month(r,{width:"wide",context:"standalone"})||o.month(r,{width:"abbreviated",context:"standalone"})||o.month(r,{width:"narrow",context:"standalone"});}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.setMonth(o,1),r.setHours(0,0,0,0),r}};function C7e(e,t,r){let n=tn(e,r==null?void 0:r.in),o=Lk(n,r)-t;return n.setDate(n.getDate()-o*7),tn(n,r==null?void 0:r.in)}var Xk=class extends br{constructor(){super(...arguments);ct(this,"priority",100);ct(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(r,n,o){switch(n){case"w":return Vn(Yn.week,r);case"wo":return o.ordinalNumber(r,{unit:"week"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=53}set(r,n,o,i){return hu(C7e(r,o,i),i)}};function A7e(e,t,r){let n=tn(e,r==null?void 0:r.in),o=Ok(n,r)-t;return n.setDate(n.getDate()-o*7),n}var Jk=class extends br{constructor(){super(...arguments);ct(this,"priority",100);ct(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(r,n,o){switch(n){case"I":return Vn(Yn.week,r);case"Io":return o.ordinalNumber(r,{unit:"week"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=53}set(r,n,o){return Wf(A7e(r,o))}};var oyr=[31,28,31,30,31,30,31,31,30,31,30,31],iyr=[31,29,31,30,31,30,31,31,30,31,30,31],Qk=class extends br{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"subPriority",1);ct(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"d":return Vn(Yn.date,r);case"do":return o.ordinalNumber(r,{unit:"date"});default:return hn(n.length,r);}}validate(r,n){let o=r.getFullYear(),i=Bk(o),a=r.getMonth();return i?n>=1&&n<=iyr[a]:n>=1&&n<=oyr[a]}set(r,n,o){return r.setDate(o),r.setHours(0,0,0,0),r}};var eR=class extends br{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"subpriority",1);ct(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(r,n,o){switch(n){case"D":case"DD":return Vn(Yn.dayOfYear,r);case"Do":return o.ordinalNumber(r,{unit:"date"});default:return hn(n.length,r);}}validate(r,n){let o=r.getFullYear();return Bk(o)?n>=1&&n<=366:n>=1&&n<=365}set(r,n,o){return r.setMonth(0,o),r.setHours(0,0,0,0),r}};function ow(e,t,r){var x,b,T,A,L,P,k,q;let n=$c(),o=(q=(k=(A=(T=r==null?void 0:r.weekStartsOn)!=null?T:(b=(x=r==null?void 0:r.locale)==null?void 0:x.options)==null?void 0:b.weekStartsOn)!=null?A:n.weekStartsOn)!=null?k:(P=(L=n.locale)==null?void 0:L.options)==null?void 0:P.weekStartsOn)!=null?q:0,i=tn(e,r==null?void 0:r.in),a=i.getDay(),p=(t%7+7)%7,h=7-o,g=t<0||t>6?t-(a+h)%7:(p+h)%7-(a+h)%7;return Ck(i,g,r)}var tR=class extends br{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(r,n,o){switch(n){case"E":case"EE":case"EEE":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEEE":return o.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"EEEE":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=ow(r,o,i),r.setHours(0,0,0,0),r}};var rR=class extends br{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(r,n,o,i){let a=u=>{let p=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+p};switch(n){case"e":case"ee":return bo(hn(n.length,r),a);case"eo":return bo(o.ordinalNumber(r,{unit:"day"}),a);case"eee":return o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeeee":return o.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});case"eeee":default:return o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"});}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=ow(r,o,i),r.setHours(0,0,0,0),r}};var nR=class extends br{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(r,n,o,i){let a=u=>{let p=Math.floor((u-1)/7)*7;return(u+i.weekStartsOn+6)%7+p};switch(n){case"c":case"cc":return bo(hn(n.length,r),a);case"co":return bo(o.ordinalNumber(r,{unit:"day"}),a);case"ccc":return o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"ccccc":return o.day(r,{width:"narrow",context:"standalone"});case"cccccc":return o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});case"cccc":default:return o.day(r,{width:"wide",context:"standalone"})||o.day(r,{width:"abbreviated",context:"standalone"})||o.day(r,{width:"short",context:"standalone"})||o.day(r,{width:"narrow",context:"standalone"});}}validate(r,n){return n>=0&&n<=6}set(r,n,o,i){return r=ow(r,o,i),r.setHours(0,0,0,0),r}};function D7e(e,t,r){let n=tn(e,r==null?void 0:r.in),o=I7e(n,r),i=t-o;return Ck(n,i,r)}var oR=class extends br{constructor(){super(...arguments);ct(this,"priority",90);ct(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(r,n,o){let i=a=>a===0?7:a;switch(n){case"i":case"ii":return hn(n.length,r);case"io":return o.ordinalNumber(r,{unit:"day"});case"iii":return bo(o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiii":return bo(o.day(r,{width:"narrow",context:"formatting"}),i);case"iiiiii":return bo(o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);case"iiii":default:return bo(o.day(r,{width:"wide",context:"formatting"})||o.day(r,{width:"abbreviated",context:"formatting"})||o.day(r,{width:"short",context:"formatting"})||o.day(r,{width:"narrow",context:"formatting"}),i);}}validate(r,n){return n>=1&&n<=7}set(r,n,o){return r=D7e(r,o),r.setHours(0,0,0,0),r}};var iR=class extends br{constructor(){super(...arguments);ct(this,"priority",80);ct(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(r,n,o){switch(n){case"a":case"aa":case"aaa":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaaa":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});}}set(r,n,o){return r.setHours(nw(o),0,0,0),r}};var aR=class extends br{constructor(){super(...arguments);ct(this,"priority",80);ct(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(r,n,o){switch(n){case"b":case"bb":case"bbb":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbbb":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});}}set(r,n,o){return r.setHours(nw(o),0,0,0),r}};var sR=class extends br{constructor(){super(...arguments);ct(this,"priority",80);ct(this,"incompatibleTokens",["a","b","t","T"])}parse(r,n,o){switch(n){case"B":case"BB":case"BBB":return o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBBB":return o.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return o.dayPeriod(r,{width:"wide",context:"formatting"})||o.dayPeriod(r,{width:"abbreviated",context:"formatting"})||o.dayPeriod(r,{width:"narrow",context:"formatting"});}}set(r,n,o){return r.setHours(nw(o),0,0,0),r}};var lR=class extends br{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["H","K","k","t","T"])}parse(r,n,o){switch(n){case"h":return Vn(Yn.hour12h,r);case"ho":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=12}set(r,n,o){let i=r.getHours()>=12;return i&&o<12?r.setHours(o+12,0,0,0):!i&&o===12?r.setHours(0,0,0,0):r.setHours(o,0,0,0),r}};var uR=class extends br{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(r,n,o){switch(n){case"H":return Vn(Yn.hour23h,r);case"Ho":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=23}set(r,n,o){return r.setHours(o,0,0,0),r}};var cR=class extends br{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["h","H","k","t","T"])}parse(r,n,o){switch(n){case"K":return Vn(Yn.hour11h,r);case"Ko":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=11}set(r,n,o){return r.getHours()>=12&&o<12?r.setHours(o+12,0,0,0):r.setHours(o,0,0,0),r}};var fR=class extends br{constructor(){super(...arguments);ct(this,"priority",70);ct(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(r,n,o){switch(n){case"k":return Vn(Yn.hour24h,r);case"ko":return o.ordinalNumber(r,{unit:"hour"});default:return hn(n.length,r);}}validate(r,n){return n>=1&&n<=24}set(r,n,o){let i=o<=24?o%24:o;return r.setHours(i,0,0,0),r}};var pR=class extends br{constructor(){super(...arguments);ct(this,"priority",60);ct(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"m":return Vn(Yn.minute,r);case"mo":return o.ordinalNumber(r,{unit:"minute"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setMinutes(o,0,0),r}};var dR=class extends br{constructor(){super(...arguments);ct(this,"priority",50);ct(this,"incompatibleTokens",["t","T"])}parse(r,n,o){switch(n){case"s":return Vn(Yn.second,r);case"so":return o.ordinalNumber(r,{unit:"second"});default:return hn(n.length,r);}}validate(r,n){return n>=0&&n<=59}set(r,n,o){return r.setSeconds(o,0),r}};var hR=class extends br{constructor(){super(...arguments);ct(this,"priority",30);ct(this,"incompatibleTokens",["t","T"])}parse(r,n){let o=i=>Math.trunc(i*Math.pow(10,-n.length+3));return bo(hn(n.length,r),o)}set(r,n,o){return r.setMilliseconds(o),r}};var mR=class extends br{constructor(){super(...arguments);ct(this,"priority",10);ct(this,"incompatibleTokens",["t","T","x"])}parse(r,n){switch(n){case"X":return Zc(Yc.basicOptionalMinutes,r);case"XX":return Zc(Yc.basic,r);case"XXXX":return Zc(Yc.basicOptionalSeconds,r);case"XXXXX":return Zc(Yc.extendedOptionalSeconds,r);case"XXX":default:return Zc(Yc.extended,r);}}set(r,n,o){return n.timestampIsSet?r:Bn(r,r.getTime()-F0(r)-o)}};var gR=class extends br{constructor(){super(...arguments);ct(this,"priority",10);ct(this,"incompatibleTokens",["t","T","X"])}parse(r,n){switch(n){case"x":return Zc(Yc.basicOptionalMinutes,r);case"xx":return Zc(Yc.basic,r);case"xxxx":return Zc(Yc.basicOptionalSeconds,r);case"xxxxx":return Zc(Yc.extendedOptionalSeconds,r);case"xxx":default:return Zc(Yc.extended,r);}}set(r,n,o){return n.timestampIsSet?r:Bn(r,r.getTime()-F0(r)-o)}};var vR=class extends br{constructor(){super(...arguments);ct(this,"priority",40);ct(this,"incompatibleTokens","*")}parse(r){return Fk(r)}set(r,n,o){return[Bn(r,o*1e3),{timestampIsSet:!0}]}};var yR=class extends br{constructor(){super(...arguments);ct(this,"priority",20);ct(this,"incompatibleTokens","*")}parse(r){return Fk(r)}set(r,n,o){return[Bn(r,o),{timestampIsSet:!0}]}};var N7e={G:new zk,y:new Vk,Y:new Gk,R:new Hk,u:new Wk,Q:new $k,q:new Yk,M:new Zk,L:new Kk,w:new Xk,I:new Jk,d:new Qk,D:new eR,E:new tR,e:new rR,c:new nR,i:new oR,a:new iR,b:new aR,B:new sR,h:new lR,H:new uR,K:new cR,k:new fR,m:new pR,s:new dR,S:new hR,X:new mR,x:new gR,t:new vR,T:new yR};var ayr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,syr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,lyr=/^'([^]*?)'?$/,uyr=/''/g,cyr=/\S/,fyr=/[a-zA-Z]/;function VQ(e,t,r,n){var P,k,q,U,H,X,ee,ne,pe,ue,Ie,Re,Te,Ee,Ye,Qe,qe,Ue;let o=()=>Bn((n==null?void 0:n.in)||r,NaN),i=S7e(),a=(k=(P=n==null?void 0:n.locale)!=null?P:i.locale)!=null?k:rC,u=(ue=(pe=(X=(H=n==null?void 0:n.firstWeekContainsDate)!=null?H:(U=(q=n==null?void 0:n.locale)==null?void 0:q.options)==null?void 0:U.firstWeekContainsDate)!=null?X:i.firstWeekContainsDate)!=null?pe:(ne=(ee=i.locale)==null?void 0:ee.options)==null?void 0:ne.firstWeekContainsDate)!=null?ue:1,p=(Ue=(qe=(Ee=(Te=n==null?void 0:n.weekStartsOn)!=null?Te:(Re=(Ie=n==null?void 0:n.locale)==null?void 0:Ie.options)==null?void 0:Re.weekStartsOn)!=null?Ee:i.weekStartsOn)!=null?qe:(Qe=(Ye=i.locale)==null?void 0:Ye.options)==null?void 0:Qe.weekStartsOn)!=null?Ue:0;if(!t)return e?o():tn(r,n==null?void 0:n.in);let h={firstWeekContainsDate:u,weekStartsOn:p,locale:a},g=[new qk(n==null?void 0:n.in,r)],x=t.match(syr).map(Ne=>{let et=Ne[0];if(et in nC){let st=nC[et];return st(Ne,a.formatLong)}return Ne}).join("").match(ayr),b=[];for(let Ne of x){!(n!=null&&n.useAdditionalWeekYearTokens)&&kk(Ne)&&oC(Ne,t,e),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Pk(Ne)&&oC(Ne,t,e);let et=Ne[0],st=N7e[et];if(st){let{incompatibleTokens:ft}=st;if(Array.isArray(ft)){let tt=b.find(lt=>ft.includes(lt.token)||lt.token===et);if(tt)throw new RangeError(`The format string mustn't contain \`${tt.fullToken}\` and \`${Ne}\` at the same time`)}else if(st.incompatibleTokens==="*"&&b.length>0)throw new RangeError(`The format string mustn't contain \`${Ne}\` and any other token at the same time`);b.push({token:et,fullToken:Ne});let Ze=st.run(e,Ne,a.match,h);if(!Ze)return o();g.push(Ze.setter),e=Ze.rest}else{if(et.match(fyr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+et+"`");if(Ne==="''"?Ne="'":et==="'"&&(Ne=pyr(Ne)),e.indexOf(Ne)===0)e=e.slice(Ne.length);else return o()}}if(e.length>0&&cyr.test(e))return o();let T=g.map(Ne=>Ne.priority).sort((Ne,et)=>et-Ne).filter((Ne,et,st)=>st.indexOf(Ne)===et).map(Ne=>g.filter(et=>et.priority===Ne).sort((et,st)=>st.subPriority-et.subPriority)).map(Ne=>Ne[0]),A=tn(r,n==null?void 0:n.in);if(isNaN(+A))return o();let L={};for(let Ne of T){if(!Ne.validate(A,h))return o();let et=Ne.set(A,L,h);Array.isArray(et)?(A=et[0],Object.assign(L,et[1])):A=et}return A}function pyr(e){return e.match(lyr)[1].replace(uyr,"'")}function O7e(e,t){var h;let r=()=>Bn(t==null?void 0:t.in,NaN),n=(h=t==null?void 0:t.additionalDigits)!=null?h:2,o=gyr(e),i;if(o.date){let g=vyr(o.date,n);i=yyr(g.restDateString,g.year)}if(!i||isNaN(+i))return r();let a=+i,u=0,p;if(o.time&&(u=_yr(o.time),isNaN(u)))return r();if(o.timezone){if(p=xyr(o.timezone),isNaN(p))return r()}else{let g=new Date(a+u),x=tn(0,t==null?void 0:t.in);return x.setFullYear(g.getUTCFullYear(),g.getUTCMonth(),g.getUTCDate()),x.setHours(g.getUTCHours(),g.getUTCMinutes(),g.getUTCSeconds(),g.getUTCMilliseconds()),x}return tn(a+u+p,t==null?void 0:t.in)}var _R={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dyr=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,hyr=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,myr=/^([+-])(\d{2})(?::?(\d{2}))?$/;function gyr(e){let t={},r=e.split(_R.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],_R.timeZoneDelimiter.test(t.date)&&(t.date=e.split(_R.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){let o=_R.timezone.exec(n);o?(t.time=n.replace(o[1],""),t.timezone=o[1]):t.time=n}return t}function vyr(e,t){let r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};let o=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?o:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function yyr(e,t){if(t===null)return new Date(NaN);let r=e.match(dyr);if(!r)return new Date(NaN);let n=!!r[4],o=iC(r[1]),i=iC(r[2])-1,a=iC(r[3]),u=iC(r[4]),p=iC(r[5])-1;if(n)return Iyr(t,u,p)?byr(t,u,p):new Date(NaN);{let h=new Date(0);return!Eyr(t,i,a)||!Syr(t,o)?new Date(NaN):(h.setUTCFullYear(t,i,Math.max(o,a)),h)}}function iC(e){return e?parseInt(e):1}function _yr(e){let t=e.match(hyr);if(!t)return NaN;let r=GQ(t[1]),n=GQ(t[2]),o=GQ(t[3]);return Tyr(r,n,o)?r*eC+n*QM+o*1e3:NaN}function GQ(e){return e&&parseFloat(e.replace(",","."))||0}function xyr(e){if(e==="Z")return 0;let t=e.match(myr);if(!t)return 0;let r=t[1]==="+"?-1:1,n=parseInt(t[2]),o=t[3]&&parseInt(t[3])||0;return Myr(n,o)?r*(n*eC+o*QM):NaN}function byr(e,t,r){let n=new Date(0);n.setUTCFullYear(e,0,4);let o=n.getUTCDay()||7,i=(t-1)*7+r+1-o;return n.setUTCDate(n.getUTCDate()+i),n}var wyr=[31,null,31,30,31,30,31,31,30,31,30,31];function L7e(e){return e%400===0||e%4===0&&e%100!==0}function Eyr(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(wyr[t]||(L7e(e)?29:28))}function Syr(e,t){return t>=1&&t<=(L7e(e)?366:365)}function Iyr(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Tyr(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Myr(e,t){return t>=0&&t<=59}var iw={en:"MM/dd/yyyy",de:"dd.MM.yyyy"};function Qu(e){let t=hr.getSettings().LANGUAGE_CODE,r=new Date(e);return ed(r)?Object.hasOwn(iw,t)?BQ(r,iw[t],{in:xv}):BQ(r,iw[gv.EN],{in:xv}):e}function aC(e){let t=hr.getSettings().LANGUAGE_CODE,r=new Date;return Object.hasOwn(iw,t)?VQ(e,iw[t],r,{in:xv}):VQ(e,iw[gv.EN],r,{in:xv})}function P7e(e){let t="";try{t=E7e(e,{in:xv})}catch(r){t=""}return t}function k7e(e){return!Le(e)||!pk(e)?new Date("invalid"):O7e(e,{in:xv})}function ed(e){return Dk(e)}function aw(e){return tC(e,{in:xv})}function xR(e){return Le(e)?T7e(e):Number.NaN}var lw={type:"FeatureCollection",features:[]},Cyr=e=>["MultiLineString","LineString"].includes(e),Ayr=e=>["MultiPolygon","Polygon"].includes(e),HQ=e=>Cyr(e)?Ur.LINE:Ayr(e)?Ur.OUTLINE:Ur.LINE,sw={marker:()=>zn[Ur.SYMBOL].COLOR,fill:()=>zn[Ur.FILL].COLOR,"fill-opacity":()=>zn[Ur.FILL].OPACITY,stroke:e=>{let t=HQ(e);return zn[t].COLOR},"stroke-opacity":e=>{let t=HQ(e);return zn[t].OPACITY},"stroke-width":e=>{let t=HQ(e);return zn[t].WIDTH}},B0={marker:{default:sw.marker,geometryTypes:["Point","MultiPoint"],inputProps:{type:"color"}},fill:{default:sw.fill,geometryTypes:["MultiPolygon","Polygon","GeometryCollection"],inputProps:{type:"color"}},"fill-opacity":{default:sw["fill-opacity"],geometryTypes:["MultiPolygon","Polygon","GeometryCollection"],inputProps:{step:.05,min:0,max:1,type:"number"}},stroke:{default:sw.stroke,geometryTypes:["MultiPolygon","Polygon","GeometryCollection","LineString","MultiLineString"],inputProps:{type:"color"}},"stroke-opacity":{default:sw["stroke-opacity"],geometryTypes:["MultiPolygon","Polygon","GeometryCollection","LineString","MultiLineString"],inputProps:{max:1,min:0,step:.05,type:"number"}},"stroke-width":{default:sw["stroke-width"],geometryTypes:["MultiPolygon","Polygon","GeometryCollection","LineString","MultiLineString"],inputProps:{step:.1,min:0,max:20,type:"number"}}},bR={img_link:{inputProps:{type:"text"}},title:{inputProps:{type:"text"}},description:{inputProps:{type:"text"}},time:{inputProps:{type:"text"}}},WQ=["geometry"],$Q=Object.keys(B0),sC=Object.keys(bR),Cl={POINT:"Point",MULTI_POINT:"MultiPoint",POLYGON:"Polygon",MULTI_POLYGON:"MultiPolygon",LINE_STRING:"LineString",MULTI_LINE_STRING:"MultiLineString",GEOMETRY_COLLECTION:"GeometryCollection"},ci={imgLink:"img_link",title:"title",description:"description",time:"time",marker:"marker",fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity"},Hi={LOCAL:"local",REMOTE:"remote"};var R7e=e=>({type:"Polygon",coordinates:[[[e[0],e[1]],[e[2],e[1]],[e[2],e[3]],[e[0],e[3]],[e[0],e[1]]]]}),j7e=e=>{let t={};for(let r of Object.keys(Ur)){let n=Ur[r],o=`${e}-${n}`;t[o]=qt(Se({id:o,source:e,metadata:{[jh.id]:e}},zQ[n]),{layout:qt(Se({},zQ[n].layout),{visibility:"visible"})})}return t},YQ=e=>{let{properties:t}=e,r=Nyr(t);return qt(Se({},e),{properties:r})},ZQ=e=>{Object.hasOwn(e,"properties")||(e.properties={});let{properties:t}=e,r=Dyr(t);return qt(Se({},e),{properties:r})},Dyr=e=>{var o;let t=(o=e[ci.time])!=null?o:"",r=aw(k7e(t)).valueOf();return Number.isNaN(r)?(delete e[ci.time],e):qt(Se({},e),{[ci.time]:r})},Nyr=e=>{var o;let t=(o=e[ci.time])!=null?o:"",r=P7e(t);return r===""?(delete e[ci.time],e):qt(Se({},e),{[ci.time]:r})},q7e=e=>{if(!Le(e))return[];let[t,r]=e;return!Le(t)||!Le(r)?[]:["any",["!",["has",ci.time]],["all",[">=",["get",ci.time],t*1e3],["<=",["get",ci.time],r*1e3]]]};var z7e=[{type:"mousemove",handler:e=>e.target.getCanvas().style.cursor="pointer"},{type:"mouseleave",handler:e=>e.target.getCanvas().style.cursor=""}],V0,bv,lC,hs,F7e,U7e,B7e,Fh,Uh=class Uh extends Xb{constructor({metadata:r,geometry:n,geoJson:o}){if(!Tp(Uh,V0))throw new TypeError("Constructor is private. Use GeoJsonLayer.fromApplication() or GeoJsonLayer.fromPersistence() instead.");jy(Uh,V0,!1);super({metadata:r,geometry:n});og(this,hs);ct(this,"geoJSON",{});og(this,bv,[]);og(this,lC,{});Zl(this,hs,F7e).call(this,o)}static fromApplication(r){return jy(Uh,V0,!0),new Uh(r)}static fromPersistence({metadata:r,geometry:n,geoJson:o}){jy(Uh,V0,!0);let i=o.features.map(ZQ),a=qt(Se({},o),{features:i});return new Uh({metadata:r,geometry:n,geoJson:a})}addLayerToMap(r,n){var p,h;if(!Le(r))return;let o=this.getId(),i=this.getGeoJson(),a=j7e(o);r.addSource(o,{type:"geojson",data:i});let u=r.getLayer(Wc)!==void 0?Wc:void 0;for(let[g,x]of Object.entries(a))r.addLayer(x,u),Tp(this,bv).push(g),Tp(this,lC)[g]=x.filter;if(Le(n)){let{layerSettings:g}=n,x=(p=g==null?void 0:g.opacity)!=null?p:1,b=(h=g==null?void 0:g.visibility)!=null?h:"visible";this.setOpacity(r,x),this.setVisibility(r,b)}Zl(this,hs,U7e).call(this,r)}updateDataOnMap(r,n){return!Le(r)||!Le(n)?Promise.reject():r.getSource(this.getId()).updateData(n).getData().then(i=>(this.setGeoJson(i),i))}setDataOnMap(r,n){if(!Le(r)||!Le(n))return;let o=r.getSource(this.getId());this.setGeoJson(n),o.setData(this.geoJSON)}removeFeatureFromMap(r,n){r.getSource(this.getId()).updateData({remove:[n]}),this.removeFeature(n)}getGeoJsonForPersistence(){var o;let r=structuredClone(this.getGeoJson()),n=(o=r.features)!=null?o:[];return n=n.map(YQ),r.features=n,r}static toApplicationState(r){var i;if(!Le(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(ZQ),n.features=o,n}static toPersistenceState(r){var i;if(!Le(r))return r;let n=structuredClone(r),o=(i=n.features)!=null?i:[];return o=o.map(YQ),n.features=o,n}getGeoJson(){return this.geoJSON}setGeoJson(r){let n=r.features.map((i,a)=>(Object.hasOwn(i,"properties")||(i.properties={}),Le(i.id)?Se({},i):qt(Se({},i),{id:a+1}))),o=qt(Se({},r),{features:n});this.geoJSON=o}getFeature(r){let n=this.geoJSON.features.find(o=>o.id===r);return Le(n)?n:(console.warn(`No feature found for id '${r}'`),null)}removeFeature(r){let n=this.geoJSON.features.findIndex(o=>o.id===r);if(n<0){console.warn(`Trying to remove a feature with non existing id '${r}'`);return}this.geoJSON.features.splice(n,1)}setFeatureState(r,n,o){if(!Le(r)||!Le(n)||!Le(o))return;let i=this.getId();r.setFeatureState({source:i,id:n},o)}getPreviewFeature(){let r=this.getMetadata(it.bounds);return{type:"Feature",properties:{},geometry:R7e(r)}}isDisplayedInMap(r){return r.getSource(this.getId())!==void 0}getType(){return Cn.VECTOR_MAP}isRemote(){return Le(this.metadata[it.vectorMapId])}isLocal(){return!this.isRemote()}getMapLibreLayerId(){return Tp(this,bv).length>0?Tp(this,bv)[0]:null}removeMapLibreLayers(r){if(Le(r)){for(let{id:n}of Zl(this,hs,Fh).call(this,r))Zl(this,hs,B7e).call(this,r,n),r.removeLayer(n);r.removeSource(this.getId()),jy(this,bv,[])}}getOpacity(r){let n=Zl(this,hs,Fh).call(this,r),o=1,i=1;if(n.length===0)return null;for(let{id:a,type:u}of n){if(!qQ(u))continue;let p=RQ[u];o=r.getPaintProperty(a,p);break}if(typeof o=="number")return o;if(Array.isArray(o)&&o.length>0){if(o[0]==="*")return o[2];if(o[0]==="coalesce")return o[3]}return i}setOpacity(r,n){let o=Zl(this,hs,Fh).call(this,r);if(!(o.length===0||!Le(n)))for(let{id:i,type:a}of o){if(!qQ(a))continue;let u=zn[a].OPACITY,p=RQ[a],h=jQ[a];r.setPaintProperty(i,p,["*",["coalesce",["feature-state",h],["get",h],u],n])}}isVisible(r){let n=Zl(this,hs,Fh).call(this,r);return n.length===0?!1:r.getLayoutProperty(n[0].id,"visibility")==="visible"}setVisibility(r,n){let o=Zl(this,hs,Fh).call(this,r);if(!(o.length===0||!Le(n)))for(let{id:i}of o)r.setLayoutProperty(i,"visibility",n)}move(r,n){let o=Zl(this,hs,Fh).call(this,r),i=n;Le(n)||(Le(r.getLayer(Wc))?i=Wc:i=null),o.forEach(({id:a})=>{r.moveLayer(a,i)})}moveToTop(r){this.move(r,null)}setFilters(r,n){let o=Zl(this,hs,Fh).call(this,r);if(o.length===0)return;let i=n==null?void 0:n.timeExtent,a=q7e(i);for(let u of o){let{id:p}=u,h=Tp(this,lC)[p],g=["all",h];Le(a)&&a.length>0&&g.push(a),g.length===1?r.setFilter(p,h):r.setFilter(p,g)}}};V0=new WeakMap,bv=new WeakMap,lC=new WeakMap,hs=new WeakSet,F7e=function(r){var o,i;this.setGeoJson(r);let n=this.geometry?KM(this.geometry):KM(this.geoJSON);this.metadata[it.bounds]=n,this.metadata[it.id]=(o=this.metadata[it.id])!=null?o:crypto.randomUUID(),this.metadata[it.timePublished]=(i=this.metadata[it.timePublished])!=null?i:new Date().getFullYear(),this.metadata[it.hasGeoReference]=!0},U7e=function(r){for(let{id:n}of Zl(this,hs,Fh).call(this,r))for(let{type:o,handler:i}of z7e)r.on(o,n,i)},B7e=function(r,n){for(let{type:o,handler:i}of z7e)r.off(o,n,i)},Fh=function(r){let n=Tp(this,bv).map(o=>r.getLayer(o));return n[0]===void 0?[]:n},og(Uh,V0,!1);var KQ=Uh,V7e=KQ;var Ua=V7e;var G7e=Z($M(),1);var H7e=e=>Object.values(e).every(t=>t===void 0||Object.entries(t).length===0),XQ=(e,t=4)=>{if(Array.isArray(e))return e.map(r=>XQ(r,t));if(typeof e=="object"&&e!==null){let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=XQ(o)}),r}else return isNaN(e)||e===null?e:e.toFixed(Math.min(Lyr(e),t))},Oyr=(e,t=4)=>{let r={};return Object.entries(e).forEach(([n,o])=>{r[n]=XQ(o,t)}),r},Lyr=e=>Math.floor(e)===e?0:e.toString().split(".")[1].length||0,JQ=({geojson:e,properties:t})=>Ua.fromPersistence({metadata:t,geoJson:e!=null?e:structuredClone(lw)}),W7e=(e,t)=>{let r;t.forEach(n=>{let o=n.getMetadata(it.bounds);r=r===void 0?new G7e.LngLatBounds(o):r.extend(o)}),r!==void 0&&e.fitBounds(r,{animate:!1,padding:{left:350,right:350,top:50,bottom:50}})},$7e=(e,t)=>{let r;if(e===void 0)r=t;else if(t===void 0)r=e;else{let n=Array.isArray(e),o=Array.isArray(t),i=n?e:[e],a=o?t:[t];r=Array.from(new Set([...i,...a]))}return r},Y7e=(e,t)=>{let r=e.isVisible(t),n=e.getOpacity(t),o=e.getType(),i={isVisible:r,opacity:n};return o===Cn.VECTOR_MAP&&e.isLocal()?Object.assign(i,{geojson:e.getGeoJsonForPersistence(),type:Cn.VECTOR_MAP,properties:e.getMetadata()}):Object.assign(i,{id:e.getId(),type:o===Cn.HISTORIC_MAP?Cn.HISTORIC_MAP:Cn.VECTOR_MAP})},cw=(e,t=!1)=>{let r={center:e.getCenter().toArray(),bearing:e.getBearing(),pitch:e.getPitch(),zoom:e.getZoom()};return t?Oyr(r,5):r};function $f(e,t){let r=()=>{if(typeof window=="undefined")return t;try{let a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(a){return console.warn(`Error reading localStorage key \u201C${e}\u201D:`,a),t}},[n,o]=(0,uw.useState)(r),i=a=>{typeof window=="undefined"&&console.warn(`Tried setting localStorage key \u201C${e}\u201D even though environment is not a client`);try{let u=a instanceof Function?a(n):a;window.localStorage.setItem(e,JSON.stringify(u)),o(u),window.dispatchEvent(new Event("local-storage"))}catch(u){console.warn(`Error setting localStorage key \u201C${e}\u201D:`,u)}};return(0,uw.useEffect)(()=>{o(r())},[]),(0,uw.useEffect)(()=>{let a=()=>{o(r())};return window.addEventListener("storage",a),window.addEventListener("local-storage",a),()=>{window.removeEventListener("storage",a),window.removeEventListener("local-storage",a)}},[]),[n,i]}var Z7e=e=>{(0,uw.useEffect)(()=>{let t="onpagehide"in window.self?"pagehide":"unload";return window.addEventListener(t,e,{capture:!0}),()=>{window.removeEventListener(t,e,{capture:!0})}},[e])},fw=e=>`${window.location.origin}${window.location.pathname}?${e}`;var K7e=e=>e.r!==void 0||e.d!==void 0||e.ri!==void 0||e.u!==void 0,X7e=e=>e.rotation!==void 0||e.direction!==void 0||e.right!==void 0||e.up!==void 0,J7e=e=>{let{c:t,r,d:n,u:o,p:i,z:a}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{rotation:r},a===void 0?null:{zoom:a},i===void 0?null:{position:i},n===void 0?null:{direction:n},o===void 0?null:{up:o})},Pyr=e=>{let[t,r,n]=e,o=Math.log2(6378137/n)+6;return{center:[t,r],pitch:50,zoom:o}},kyr=(e,t)=>({bearing:Ryr(t),legacy3dMapView:!0}),Q7e=e=>e*(180/Math.PI),Ryr=e=>{let t=Math.PI+(Math.atan2(e[0],e[1])-Math.PI/2);return Q7e(t)};function wR(e){let{center:t,rotation:r,direction:n,position:o,zoom:i}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{pitch:Q7e(r)},i===void 0?null:{zoom:i},o===void 0?null:Pyr(o),n===void 0||o===void 0?null:kyr(o,n))}var ER={"2D":0,"3D":1},eUe=e=>{if(e!==void 0)return e===ER["3D"]},tUe=e=>{if(K7e(e)){let i=J7e(e);return wR(i)}let{c:t,be:r,p:n,z:o}=e;return Object.assign({},t===void 0?null:{center:t},r===void 0?null:{bearing:r},n===void 0?null:{pitch:n},o===void 0?null:{zoom:o})},rUe=e=>{let{fid:t,foid:r}=e;if(!Le(t)||!Le(r))return;let n=/^[0-9]+$/.test(t),o=Number.parseInt(t,10);if(!n||!Number.isFinite(o)){console.error(`The feature id cannot be parsed from url params. The id '${t}' cannot be coerced to type number.`);return}return{featureId:o,sourceId:r}};var G0=Z(we(),1);var jyr=function(){let e=ht(Vc),t=ht(Gc),r=ht(yr),n=ht(yv),o=ht(_v),i=ht(_n),a=Mr(hk),[,u]=$f(QQ,{operationalLayers:[],is3dEnabled:!1}),p=(0,G0.useCallback)(()=>{if(r!==void 0){let h=r.hasTerrain(),g={activeBasemapId:e,is3dEnabled:h,operationalLayers:i.map(x=>Y7e(x,r)).filter(x=>x!==null),searchOptions:{facets:t,timeExtent:n,timeRange:o}};return g.cameraOptions=cw(r),u(g),g}},[e,r,t,i,n,o]);return Z7e(p),(0,G0.useEffect)(()=>{a(()=>p)},[p]),G0.default.createElement(G0.default.Fragment,null)},nUe=jyr;var oUe=Z(mv(),1);function pw(e){return At(this,null,function*(){let t=hr.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let r=yield oUe.default.get(`${t}/_doc/${e}`);if(r.status===200)return r.data._source;console.error("Something went wrong while trying to fetch search document.")})}var uC=function(e,t){let r="geometry"in t?t.geometry:void 0,n={};delete t.geometry;for(let i in t)if(Object.hasOwn(t,i))if(i==="time_published"){let a=t[i].split("-")[0];n[i]=a}else n[i]=t[i];return n.id=e,n.type===Cn.VECTOR_MAP?(n[it.vectorMapId]=e,Ua.fromPersistence({geometry:r,metadata:n,geoJson:structuredClone(lw)})):new qh({metadata:n,geometry:r})},iUe=function(e){let t=[];for(let r=0,n=e.length;r<n;r++)t.push(uC(e[r]._id,e[r]._source));return t};var aUe=e=>pw(e).then(t=>uC(e,t)).catch(()=>{let t=new qh({metadata:{id:e,has_georeference:!1}});return t.setIsMissing(!0),t});var Js=Z(we(),1);var hee=Z(pBe(),1);function ir(){return ir=hee.default?hee.default.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ir.apply(null,arguments)}var kBe=Z(SBe(),1);var vee=Z(PBe(),1);function LR(e,t){return LR=vee.default?vee.default.bind():function(r,n){return r.__proto__=n,r},LR(e,t)}function jr(e,t){e.prototype=(0,kBe.default)(t.prototype),e.prototype.constructor=e,LR(e,t)}function Wr(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}function Pn(){return Pn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pn.apply(null,arguments)}function hw(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}var _ee=Z(we());var Egn=Z(kR()),B0r=function(){};function jBe(e,t){var r={};return Object.keys(e).forEach(function(n){if(r[mw(n)]=B0r,0)var o}),r}function yee(e,t){return e[t]!==void 0}function mw(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function qBe(e){return!!e&&(typeof e!="function"||e.prototype&&e.prototype.isReactComponent)}function gw(e,t){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},gw(e,t)}function RR(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,gw(e,t)}var vw=Z(we()),VBe=Z(bee()),GBe=Z(kR());var G0r="/Users/jquense/src/uncontrollable/src/uncontrollable.js";function H0(e,t,r){r===void 0&&(r=[]);var n=e.displayName||e.name||"Component",o=qBe(e),i=Object.keys(t),a=i.map(mw);o||!r.length||(0,GBe.default)(!1);var u=function(h){RR(g,h);function g(){for(var b,T=arguments.length,A=new Array(T),L=0;L<T;L++)A[L]=arguments[L];b=h.call.apply(h,[this].concat(A))||this,b.handlers=Object.create(null),i.forEach(function(k){var q=t[k],U=function(X){if(b.props[q]){var ee;b._notifying=!0;for(var ne=arguments.length,pe=new Array(ne>1?ne-1:0),ue=1;ue<ne;ue++)pe[ue-1]=arguments[ue];(ee=b.props)[q].apply(ee,[X].concat(pe)),b._notifying=!1}b.unmounted||b.setState(function(Ie){var Re,Te=Ie.values;return{values:Pn(Object.create(null),Te,(Re={},Re[k]=X,Re))}})};b.handlers[q]=U}),r.length&&(b.attachRef=function(k){b.inner=k});var P=Object.create(null);return i.forEach(function(k){P[k]=b.props[mw(k)]}),b.state={values:P,prevProps:{}},b}var x=g.prototype;return x.shouldComponentUpdate=function(){return!this._notifying},g.getDerivedStateFromProps=function(T,A){var L=A.values,P=A.prevProps,k={values:Pn(Object.create(null),L),prevProps:{}};return i.forEach(function(q){k.prevProps[q]=T[q],!yee(T,q)&&yee(P,q)&&(k.values[q]=T[mw(q)])}),k},x.componentWillUnmount=function(){this.unmounted=!0},x.render=function(){var T=this,A=this.props,L=A.innerRef,P=hw(A,["innerRef"]);a.forEach(function(q){delete P[q]});var k={};return i.forEach(function(q){var U=T.props[q];k[q]=U!==void 0?U:T.state.values[q]}),vw.default.createElement(e,Pn({},P,k,this.handlers,{ref:L||this.attachRef}))},g}(vw.default.Component);(0,VBe.polyfill)(u),u.displayName="Uncontrolled("+n+")",u.propTypes=Pn({innerRef:function(){}},jBe(t,n)),r.forEach(function(h){u.prototype[h]=function(){var x;return(x=this.inner)[h].apply(x,arguments)}});var p=u;return vw.default.forwardRef&&(p=vw.default.forwardRef(function(h,g){return vw.default.createElement(u,Pn({},h,{innerRef:g,__source:{fileName:G0r,lineNumber:128},__self:this}))}),p.propTypes=u.propTypes),p.ControlledComponent=e,p.deferControlTo=function(h,g,x){return g===void 0&&(g={}),H0(h,Pn({},t,g),x)},p}var See=Z(Eee());var JBe=Z(kR()),jR=Z(xt());var Xs={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},hC={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"};var XBe={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},mC={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"};function Iee(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[r.length-1];return typeof o=="function"?e.apply(void 0,r):function(i){return e.apply(void 0,r.concat([i]))}}}function po(e,t){var r=(e.bsClass||"").trim();return r==null&&(0,JBe.default)(!1),r+(t?"-"+t:"")}var An=Iee(function(e,t){var r=t.propTypes||(t.propTypes={}),n=t.defaultProps||(t.defaultProps={});return r.bsClass=jR.default.string,n.bsClass=e,t}),qR=Iee(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.STYLES||[],o=r.propTypes||{};e.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var i=jR.default.oneOf(n);if(r.STYLES=n,i._values=n,r.propTypes=ir({},o,{bsStyle:i}),t!==void 0){var a=r.defaultProps||(r.defaultProps={});a.bsStyle=t}return r}),td=Iee(function(e,t,r){typeof t!="string"&&(r=t,t=void 0);var n=r.SIZES||[],o=r.propTypes||{};e.forEach(function(u){n.indexOf(u)===-1&&n.push(u)});var i=[];n.forEach(function(u){var p=hC[u];p&&p!==u&&i.push(p),i.push(u)});var a=jR.default.oneOf(i);return a._values=i,r.SIZES=n,r.propTypes=ir({},o,{bsSize:a}),t!==void 0&&(r.defaultProps||(r.defaultProps={}),r.defaultProps.bsSize=t),r});function oo(e){var t,r=(t={},t[po(e)]=!0,t);if(e.bsSize){var n=hC[e.bsSize]||e.bsSize;r[po(e,n)]=!0}return e.bsStyle&&(r[po(e,e.bsStyle)]=!0),r}function QBe(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function eVe(e){return e==="bsClass"||e==="bsSize"||e==="bsStyle"||e==="bsRole"}function qo(e){var t={};return(0,See.default)(e).forEach(function(r){var n=r[0],o=r[1];eVe(n)||(t[n]=o)}),[QBe(e),t]}function yw(e,t){var r={};t.forEach(function(o){r[o]=!0});var n={};return(0,See.default)(e).forEach(function(o){var i=o[0],a=o[1];!eVe(i)&&!r[i]&&(n[i]=a)}),[QBe(e),n]}var ms=Z(we());function K0r(e,t,r){var n=0;return ms.default.Children.map(e,function(o){return ms.default.isValidElement(o)?t.call(r,o,n++):o})}function X0r(e,t,r){var n=0;ms.default.Children.forEach(e,function(o){ms.default.isValidElement(o)&&t.call(r,o,n++)})}function J0r(e){var t=0;return ms.default.Children.forEach(e,function(r){ms.default.isValidElement(r)&&++t}),t}function Q0r(e,t,r){var n=0,o=[];return ms.default.Children.forEach(e,function(i){ms.default.isValidElement(i)&&t.call(r,i,n++)&&o.push(i)}),o}function e1r(e,t,r){var n=0,o;return ms.default.Children.forEach(e,function(i){o||ms.default.isValidElement(i)&&t.call(r,i,n++)&&(o=i)}),o}function t1r(e,t,r){var n=0,o=!0;return ms.default.Children.forEach(e,function(i){o&&ms.default.isValidElement(i)&&(t.call(r,i,n++)||(o=!1))}),o}function r1r(e,t,r){var n=0,o=!1;return ms.default.Children.forEach(e,function(i){o||ms.default.isValidElement(i)&&t.call(r,i,n++)&&(o=!0)}),o}function n1r(e){var t=[];return ms.default.Children.forEach(e,function(r){ms.default.isValidElement(r)&&t.push(r)}),t}var Yf={map:K0r,forEach:X0r,count:J0r,find:e1r,filter:Q0r,every:t1r,some:r1r,toArray:n1r};var Tee=Z(xt()),gC=Z(we()),a1r={label:Tee.default.string.isRequired,onClick:Tee.default.func},s1r={label:"Close"},Mee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.label,a=o.onClick;return gC.default.createElement("button",{type:"button",className:"close",onClick:a},gC.default.createElement("span",{"aria-hidden":"true"},"\xD7"),gC.default.createElement("span",{className:"sr-only"},i))},t}(gC.default.Component);Mee.propTypes=a1r;Mee.defaultProps=s1r;var lVe=Mee;function wo(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var Nee=Z(we()),Bh=Z(xt()),gVe=Z(Al());function _1r(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(function(n){return n!=null}).reduce(function(n,o){if(typeof o!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return n===null?o:function(){for(var a=arguments.length,u=new Array(a),p=0;p<a;p++)u[p]=arguments[p];n.apply(this,u),o.apply(this,u)}},null)}var Dl=_1r;var x1r={href:Bh.default.string,onClick:Bh.default.func,onKeyDown:Bh.default.func,disabled:Bh.default.bool,role:Bh.default.string,tabIndex:Bh.default.oneOfType([Bh.default.number,Bh.default.string]),componentClass:gVe.default},b1r={componentClass:"a"};function mVe(e){return!e||e.trim()==="#"}var Oee=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(wo(wo(i))),i.handleKeyDown=i.handleKeyDown.bind(wo(wo(i))),i}var r=t.prototype;return r.handleClick=function(o){var i=this.props,a=i.disabled,u=i.href,p=i.onClick;if((a||mVe(u))&&o.preventDefault(),a){o.stopPropagation();return}p&&p(o)},r.handleKeyDown=function(o){o.key===" "&&(o.preventDefault(),this.handleClick(o))},r.render=function(){var o=this.props,i=o.componentClass,a=o.disabled,u=o.onKeyDown,p=Wr(o,["componentClass","disabled","onKeyDown"]);return mVe(p.href)&&(p.role=p.role||"button",p.href=p.href||"#"),a&&(p.tabIndex=-1,p.style=ir({pointerEvents:"none"},p.style)),Nee.default.createElement(i,ir({},p,{onClick:this.handleClick,onKeyDown:Dl(this.handleKeyDown,u)}))},t}(Nee.default.Component);Oee.propTypes=x1r;Oee.defaultProps=b1r;var JR=Oee;var vVe=Z(sVe());var Lee=Z(Zn()),QR=Z(we()),W0=Z(xt()),yVe=Z(Al());var w1r={active:W0.default.bool,disabled:W0.default.bool,block:W0.default.bool,onClick:W0.default.func,componentClass:yVe.default,href:W0.default.string,type:W0.default.oneOf(["button","reset","submit"])},E1r={active:!1,block:!1,disabled:!1},Pee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderAnchor=function(o,i){return QR.default.createElement(JR,ir({},o,{className:(0,Lee.default)(i,o.disabled&&"disabled")}))},r.renderButton=function(o,i){var a=o.componentClass,u=Wr(o,["componentClass"]),p=a||"button";return QR.default.createElement(p,ir({},u,{type:u.type||"button",className:i}))},r.render=function(){var o,i=this.props,a=i.active,u=i.block,p=i.className,h=Wr(i,["active","block","className"]),g=qo(h),x=g[0],b=g[1],T=ir({},oo(x),(o={active:a},o[po(x,"block")]=u,o)),A=(0,Lee.default)(p,T);return b.href?this.renderAnchor(b,A):this.renderButton(b,A)},t}(QR.default.Component);Pee.propTypes=w1r;Pee.defaultProps=E1r;var ej=An("btn",td([Xs.LARGE,Xs.SMALL,Xs.XSMALL],qR((0,vVe.default)(XBe).concat([mC.DEFAULT,mC.PRIMARY,mC.LINK]),mC.DEFAULT,Pee)));var bVe=Z(Zn()),kee=Z(we()),wVe=Z(xt());var C1r={glyph:wVe.default.string.isRequired},EVe=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.glyph,u=i.className,p=Wr(i,["glyph","className"]),h=qo(p),g=h[0],x=h[1],b=ir({},oo(g),(o={},o[po(g,a)]=!0,o));return kee.default.createElement("span",ir({},x,{className:(0,bVe.default)(u,b)}))},t}(kee.default.Component);EVe.propTypes=C1r;var Vh=An("glyphicon",EVe);var IVe=Z(Zn()),Ree=Z(we()),rj=Z(xt()),Avn=Z($0());var D1r={htmlFor:rj.default.string,srOnly:rj.default.bool},N1r={srOnly:!1},O1r={$bs_formGroup:rj.default.object},nj=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,u=a.htmlFor,p=u===void 0?i:u,h=a.srOnly,g=a.className,x=Wr(a,["htmlFor","srOnly","className"]),b=qo(x),T=b[0],A=b[1],L=ir({},oo(T),{"sr-only":h});return Ree.default.createElement("label",ir({},A,{htmlFor:p,className:(0,IVe.default)(g,L)}))},t}(Ree.default.Component);nj.propTypes=D1r;nj.defaultProps=N1r;nj.contextTypes=O1r;var oj=An("control-label",nj);var gGe=Z(Eee());function Kee(e,t){var r=t.propTypes,n={},o={};return(0,gGe.default)(e).forEach(function(i){var a=i[0],u=i[1];r[a]?n[a]=u:o[a]=u}),[n,o]}var vGe=Z(Zn()),Cj=Z(we()),Kc=Z(xt()),Ew=Z(ZVe()),Mj,ixr={in:Kc.default.bool,mountOnEnter:Kc.default.bool,unmountOnExit:Kc.default.bool,appear:Kc.default.bool,timeout:Kc.default.number,onEnter:Kc.default.func,onEntering:Kc.default.func,onEntered:Kc.default.func,onExit:Kc.default.func,onExiting:Kc.default.func,onExited:Kc.default.func},axr={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1},sxr=(Mj={},Mj[Ew.ENTERING]="in",Mj[Ew.ENTERED]="in",Mj),Xee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.className,a=o.children,u=Wr(o,["className","children"]);return Cj.default.createElement(Ew.default,u,function(p,h){return Cj.default.cloneElement(a,ir({},h,{className:(0,vGe.default)("fade",i,a.props.className,sxr[p])}))})},t}(Cj.default.Component);Xee.propTypes=ixr;Xee.defaultProps=axr;var Sv=Xee;var EGe=Z(Zn()),rte=Z(we()),TC=Z(xt()),SGe=Z(Al()),oyn=Z($0());var Jee=Z(Zn()),IC=Z(we()),yGe=Z(xt());var lxr={bsRole:"feedback"},uxr={$bs_formGroup:yGe.default.object},Qee=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getGlyph=function(o){switch(o){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null;}},r.renderDefaultFeedback=function(o,i,a,u){var p=this.getGlyph(o&&o.validationState);return p?IC.default.createElement(Vh,ir({},u,{glyph:p,className:(0,Jee.default)(i,a)})):null},r.render=function(){var o=this.props,i=o.className,a=o.children,u=Wr(o,["className","children"]),p=qo(u),h=p[0],g=p[1],x=oo(h);if(!a)return this.renderDefaultFeedback(this.context.$bs_formGroup,i,x,g);var b=IC.default.Children.only(a);return IC.default.cloneElement(b,ir({},g,{className:(0,Jee.default)(b.props.className,i,x)}))},t}(IC.default.Component);Qee.defaultProps=lxr;Qee.contextTypes=uxr;var _Ge=An("form-control-feedback",Qee);var xGe=Z(Zn()),ete=Z(we()),bGe=Z(Al());var cxr={componentClass:bGe.default},fxr={componentClass:"p"},tte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=qo(u),h=p[0],g=p[1],x=oo(h);return ete.default.createElement(i,ir({},g,{className:(0,xGe.default)(a,x)}))},t}(ete.default.Component);tte.propTypes=cxr;tte.defaultProps=fxr;var wGe=An("form-control-static",tte);var pxr={componentClass:SGe.default,type:TC.default.string,id:TC.default.string,inputRef:TC.default.func},dxr={componentClass:"input"},hxr={$bs_formGroup:TC.default.object},Sw=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.context.$bs_formGroup,i=o&&o.controlId,a=this.props,u=a.componentClass,p=a.type,h=a.id,g=h===void 0?i:h,x=a.inputRef,b=a.className,T=a.bsSize,A=Wr(a,["componentClass","type","id","inputRef","className","bsSize"]),L=qo(A),P=L[0],k=L[1],q;if(p!=="file"&&(q=oo(P)),T){var U=hC[T]||T;q[po({bsClass:"input"},U)]=!0}return rte.default.createElement(u,ir({},k,{type:p,id:g,ref:x,className:(0,EGe.default)(b,q)}))},t}(rte.default.Component);Sw.propTypes=pxr;Sw.defaultProps=dxr;Sw.contextTypes=hxr;Sw.Feedback=_Ge;Sw.Static=wGe;var nte=An("form-control",td([Xs.SMALL,Xs.LARGE],Sw));var IGe=Z(Zn()),ote=Z(we()),Aj=Z(xt());var mxr={controlId:Aj.default.string,validationState:Aj.default.oneOf(["success","warning","error",null])},gxr={$bs_formGroup:Aj.default.object.isRequired},ite=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.controlId,a=o.validationState;return{$bs_formGroup:{controlId:i,validationState:a}}},r.hasFeedback=function(o){var i=this;return Yf.some(o,function(a){return a.props.bsRole==="feedback"||a.props.children&&i.hasFeedback(a.props.children)})},r.render=function(){var o=this.props,i=o.validationState,a=o.className,u=o.children,p=Wr(o,["validationState","className","children"]),h=yw(p,["controlId"]),g=h[0],x=h[1],b=ir({},oo(g),{"has-feedback":this.hasFeedback(u)});return i&&(b["has-"+i]=!0),ote.default.createElement("div",ir({},x,{className:(0,IGe.default)(a,b)}),u)},t}(ote.default.Component);ite.propTypes=mxr;ite.childContextTypes=gxr;var Dj=An("form-group",td([Xs.LARGE,Xs.SMALL],ite));var Dte=Z(Zn()),Nte=Z(qGe()),KHe=Z(K0()),XHe=Z(rd()),Ote=Z(lte()),Mw=Z(we()),Va=Z(xt()),JHe=Z(Si()),Cw=Z(FHe()),QHe=Z(pte()),eWe=Z(Al());var UHe=Z(Zn()),Ete=Z(we()),BHe=Z(Al());var Mwr={componentClass:BHe.default},Cwr={componentClass:"div"},Ste=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=qo(u),h=p[0],g=p[1],x=oo(h);return Ete.default.createElement(i,ir({},g,{className:(0,UHe.default)(a,x)}))},t}(Ete.default.Component);Ste.propTypes=Mwr;Ste.defaultProps=Cwr;var OC=An("modal-body",Ste);var Ite=Z(Zn()),LC=Z(we()),VHe=Z(xt());var Awr={dialogClassName:VHe.default.string},GHe=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.dialogClassName,u=i.className,p=i.style,h=i.children,g=i.onMouseDownDialog,x=Wr(i,["dialogClassName","className","style","children","onMouseDownDialog"]),b=qo(x),T=b[0],A=b[1],L=po(T),P=ir({display:"block"},p),k=ir({},oo(T),(o={},o[L]=!1,o[po(T,"dialog")]=!0,o));return LC.default.createElement("div",ir({},A,{tabIndex:"-1",role:"dialog",style:P,className:(0,Ite.default)(u,L)}),LC.default.createElement("div",{className:(0,Ite.default)(a,k),onMouseDown:g},LC.default.createElement("div",{className:po(T,"content"),role:"document"},h)))},t}(LC.default.Component);GHe.propTypes=Awr;var Xj=An("modal",td([Xs.LARGE,Xs.SMALL],GHe));var HHe=Z(Zn()),Tte=Z(we()),WHe=Z(Al());var Dwr={componentClass:WHe.default},Nwr={componentClass:"div"},Mte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=qo(u),h=p[0],g=p[1],x=oo(h);return Tte.default.createElement(i,ir({},g,{className:(0,HHe.default)(a,x)}))},t}(Tte.default.Component);Mte.propTypes=Dwr;Mte.defaultProps=Nwr;var PC=An("modal-footer",Mte);var $He=Z(Zn()),Tw=Z(xt()),Jj=Z(we());var Owr={closeLabel:Tw.default.string,closeButton:Tw.default.bool,onHide:Tw.default.func},Lwr={closeLabel:"Close",closeButton:!1},Pwr={$bs_modal:Tw.default.shape({onHide:Tw.default.func})},Qj=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.closeLabel,a=o.closeButton,u=o.onHide,p=o.className,h=o.children,g=Wr(o,["closeLabel","closeButton","onHide","className","children"]),x=this.context.$bs_modal,b=qo(g),T=b[0],A=b[1],L=oo(T);return Jj.default.createElement("div",ir({},A,{className:(0,$He.default)(p,L)}),a&&Jj.default.createElement(lVe,{label:i,onClick:Dl(x&&x.onHide,u)}),h)},t}(Jj.default.Component);Qj.propTypes=Owr;Qj.defaultProps=Lwr;Qj.contextTypes=Pwr;var kC=An("modal-header",Qj);var YHe=Z(Zn()),Cte=Z(we()),ZHe=Z(Al());var kwr={componentClass:ZHe.default},Rwr={componentClass:"h4"},Ate=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=qo(u),h=p[0],g=p[1],x=oo(h);return Cte.default.createElement(i,ir({},g,{className:(0,YHe.default)(a,x)}))},t}(Cte.default.Component);Ate.propTypes=kwr;Ate.defaultProps=Rwr;var RC=An("modal-title",Ate);var jwr=ir({},Cw.default.propTypes,Xj.propTypes,{backdrop:Va.default.oneOf(["static",!0,!1]),backdropClassName:Va.default.string,keyboard:Va.default.bool,animation:Va.default.bool,dialogComponentClass:eWe.default,autoFocus:Va.default.bool,enforceFocus:Va.default.bool,restoreFocus:Va.default.bool,show:Va.default.bool,onHide:Va.default.func,onEnter:Va.default.func,onEntering:Va.default.func,onEntered:Va.default.func,onExit:Va.default.func,onExiting:Va.default.func,onExited:Va.default.func,container:Cw.default.propTypes.container}),qwr=ir({},Cw.default.defaultProps,{animation:!0,dialogComponentClass:Xj}),zwr={$bs_modal:Va.default.shape({onHide:Va.default.func})};function Fwr(e){return Mw.default.createElement(Sv,ir({},e,{timeout:tc.TRANSITION_DURATION}))}function Uwr(e){return Mw.default.createElement(Sv,ir({},e,{timeout:tc.BACKDROP_TRANSITION_DURATION}))}var tc=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleDialogBackdropMouseDown=function(){i._waitingForMouseUp=!0},i.handleMouseUp=function(a){var u=i._modal.getDialogElement();i._waitingForMouseUp&&a.target===u&&(i._ignoreBackdropClick=!0),i._waitingForMouseUp=!1},i.handleEntering=i.handleEntering.bind(wo(wo(i))),i.handleExited=i.handleExited.bind(wo(wo(i))),i.handleWindowResize=i.handleWindowResize.bind(wo(wo(i))),i.handleDialogClick=i.handleDialogClick.bind(wo(wo(i))),i.setModalRef=i.setModalRef.bind(wo(wo(i))),i.state={style:{}},i}var r=t.prototype;return r.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},r.componentWillUnmount=function(){this.handleExited()},r.setModalRef=function(o){this._modal=o},r.handleDialogClick=function(o){if(this._ignoreBackdropClick||o.target!==o.currentTarget){this._ignoreBackdropClick=!1;return}this.props.onHide()},r.handleEntering=function(){Nte.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},r.handleExited=function(){Nte.default.off(window,"resize",this.handleWindowResize)},r.handleWindowResize=function(){this.updateStyle()},r.updateStyle=function(){if(XHe.default){var o=this._modal.getDialogElement(),i=o.scrollHeight,a=(0,KHe.default)(o),u=(0,QHe.default)(JHe.default.findDOMNode(this.props.container||a.body)),p=i>a.documentElement.clientHeight;this.setState({style:{paddingRight:u&&!p?(0,Ote.default)():void 0,paddingLeft:!u&&p?(0,Ote.default)():void 0}})}},r.render=function(){var o=this.props,i=o.backdrop,a=o.backdropClassName,u=o.animation,p=o.show,h=o.dialogComponentClass,g=o.className,x=o.style,b=o.children,T=o.onEntering,A=o.onExited,L=Wr(o,["backdrop","backdropClassName","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),P=Kee(L,Cw.default),k=P[0],q=P[1],U=p&&!u&&"in";return Mw.default.createElement(Cw.default,ir({},k,{ref:this.setModalRef,show:p,containerClassName:po(L,"open"),transition:u?Fwr:void 0,backdrop:i,backdropTransition:u?Uwr:void 0,backdropClassName:(0,Dte.default)(po(L,"backdrop"),a,U),onEntering:Dl(T,this.handleEntering),onExited:Dl(A,this.handleExited),onMouseUp:this.handleMouseUp}),Mw.default.createElement(h,ir({},q,{style:ir({},this.state.style,x),className:(0,Dte.default)(g,U),onClick:i===!0?this.handleDialogClick:null,onMouseDownDialog:this.handleDialogBackdropMouseDown}),b))},t}(Mw.default.Component);tc.propTypes=jwr;tc.defaultProps=qwr;tc.childContextTypes=zwr;tc.Body=OC;tc.Header=kC;tc.Title=RC;tc.Footer=PC;tc.Dialog=Xj;tc.TRANSITION_DURATION=300;tc.BACKDROP_TRANSITION_DURATION=150;var Hh=An("modal",td([Xs.LARGE,Xs.SMALL],tc));var tWe=Z(Zn()),jC=Z(oGe()),qC=Z(we()),Ga=Z(xt()),rWe=Z(Si()),nWe=Z(xVe()),m0n=Z($0());var Bwr={activeKey:Ga.default.any,activeHref:Ga.default.string,stacked:Ga.default.bool,justified:(0,nWe.default)(Ga.default.bool,function(e){var t=e.justified,r=e.navbar;return t&&r?Error("justified navbar `Nav`s are not supported"):null}),onSelect:Ga.default.func,role:Ga.default.string,navbar:Ga.default.bool,pullRight:Ga.default.bool,pullLeft:Ga.default.bool},Vwr={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},Gwr={$bs_navbar:Ga.default.shape({bsClass:Ga.default.string,onSelect:Ga.default.func}),$bs_tabContainer:Ga.default.shape({activeKey:Ga.default.any,onSelect:Ga.default.func.isRequired,getTabId:Ga.default.func.isRequired,getPaneId:Ga.default.func.isRequired})},e6=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.componentDidUpdate=function(){var o=this;if(this._needsRefocus){this._needsRefocus=!1;var i=this.props.children,a=this.getActiveProps(),u=a.activeKey,p=a.activeHref,h=Yf.find(i,function(A){return o.isActive(A,u,p)}),g=Yf.toArray(i),x=g.indexOf(h),b=rWe.default.findDOMNode(this).children,T=b&&b[x];!T||!T.firstChild||T.firstChild.focus()}},r.getActiveProps=function(){var o=this.context.$bs_tabContainer;return o||this.props},r.getNextActiveChild=function(o){var i=this,a=this.props.children,u=Yf.filter(a,function(L){return L.props.eventKey!=null&&!L.props.disabled}),p=this.getActiveProps(),h=p.activeKey,g=p.activeHref,x=Yf.find(a,function(L){return i.isActive(L,h,g)}),b=u.indexOf(x);if(b===-1)return u[0];var T=b+o,A=u.length;return T>=A?T=0:T<0&&(T=A-1),u[T]},r.getTabProps=function(o,i,a,u,p){var h=this;if(!i&&a!=="tablist")return null;var g=o.props,x=g.id,b=g["aria-controls"],T=g.eventKey,A=g.role,L=g.onKeyDown,P=g.tabIndex;return i&&(x=i.getTabId(T),b=i.getPaneId(T)),a==="tablist"&&(A=A||"tab",L=Dl(function(k){return h.handleTabKeyDown(p,k)},L),P=u?P:-1),{id:x,role:A,onKeyDown:L,"aria-controls":b,tabIndex:P}},r.handleTabKeyDown=function(o,i){var a;switch(i.keyCode){case jC.default.codes.left:case jC.default.codes.up:a=this.getNextActiveChild(-1);break;case jC.default.codes.right:case jC.default.codes.down:a=this.getNextActiveChild(1);break;default:return;}i.preventDefault(),o&&a&&a.props.eventKey!=null&&o(a.props.eventKey),this._needsRefocus=!0},r.isActive=function(o,i,a){var u=o.props;return u.active||i!=null&&u.eventKey===i||a&&u.href===a?!0:u.active},r.render=function(){var o,i=this,a=this.props,u=a.stacked,p=a.justified,h=a.onSelect,g=a.role,x=a.navbar,b=a.pullRight,T=a.pullLeft,A=a.className,L=a.children,P=Wr(a,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),k=this.context.$bs_tabContainer,q=g||(k?"tablist":null),U=this.getActiveProps(),H=U.activeKey,X=U.activeHref;delete P.activeKey,delete P.activeHref;var ee=qo(P),ne=ee[0],pe=ee[1],ue=ir({},oo(ne),(o={},o[po(ne,"stacked")]=u,o[po(ne,"justified")]=p,o)),Ie=x!=null?x:this.context.$bs_navbar,Re,Te;if(Ie){var Ee=this.context.$bs_navbar||{bsClass:"navbar"};ue[po(Ee,"nav")]=!0,Te=po(Ee,"right"),Re=po(Ee,"left")}else Te="pull-right",Re="pull-left";return ue[Te]=b,ue[Re]=T,qC.default.createElement("ul",ir({},pe,{role:q,className:(0,tWe.default)(A,ue)}),Yf.map(L,function(Ye){var Qe=i.isActive(Ye,H,X),qe=Dl(Ye.props.onSelect,h,Ie&&Ie.onSelect,k&&k.onSelect);return(0,qC.cloneElement)(Ye,ir({},i.getTabProps(Ye,k,q,Qe,qe),{active:Qe,activeKey:H,activeHref:X,onSelect:qe}))}))},t}(qC.default.Component);e6.propTypes=Bwr;e6.defaultProps=Vwr;e6.contextTypes=Gwr;var oWe=An("nav",qR(["tabs","pills"],e6));var iWe=Z(Zn()),t6=Z(we()),Cv=Z(xt());var Hwr={active:Cv.default.bool,disabled:Cv.default.bool,role:Cv.default.string,href:Cv.default.string,onClick:Cv.default.func,onSelect:Cv.default.func,eventKey:Cv.default.any},Wwr={active:!1,disabled:!1},Lte=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleClick=i.handleClick.bind(wo(wo(i))),i}var r=t.prototype;return r.handleClick=function(o){if(this.props.disabled){o.preventDefault();return}this.props.onSelect&&this.props.onSelect(this.props.eventKey,o)},r.render=function(){var o=this.props,i=o.active,a=o.disabled,u=o.onClick,p=o.className,h=o.style,g=Wr(o,["active","disabled","onClick","className","style"]);return delete g.onSelect,delete g.eventKey,delete g.activeKey,delete g.activeHref,g.role?g.role==="tab"&&(g["aria-selected"]=i):g.href==="#"&&(g.role="button"),t6.default.createElement("li",{role:"presentation",className:(0,iWe.default)(p,{active:i,disabled:a}),style:h},t6.default.createElement(JR,ir({},g,{disabled:a,onClick:Dl(u,this.handleClick)})))},t}(t6.default.Component);Lte.propTypes=Hwr;Lte.defaultProps=Wwr;var aWe=Lte;var kWe=Z(Zn()),UC=Z(we()),rc=Z(xt()),Fte=Z(PWe()),RWe=Z(Al());var YEr=ir({},Fte.default.propTypes,{show:rc.default.bool,rootClose:rc.default.bool,onHide:rc.default.func,animation:rc.default.oneOfType([rc.default.bool,RWe.default]),onEnter:rc.default.func,onEntering:rc.default.func,onEntered:rc.default.func,onExit:rc.default.func,onExiting:rc.default.func,onExited:rc.default.func,placement:rc.default.oneOf(["top","right","bottom","left"])}),ZEr={animation:Sv,rootClose:!1,show:!1,placement:"right"},Ute=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.animation,a=o.children,u=Wr(o,["animation","children"]),p=i===!0?Sv:i||null,h;return p?h=a:h=(0,UC.cloneElement)(a,{className:(0,kWe.default)(a.props.className,"in")}),UC.default.createElement(Fte.default,ir({},u,{transition:p}),h)},t}(UC.default.Component);Ute.propTypes=YEr;Ute.defaultProps=ZEr;var Bte=Ute;var Vte=Z(Zn()),Nw=Z(we()),Ow=Z(xt()),j0n=Z($0());var KEr={inline:Ow.default.bool,disabled:Ow.default.bool,title:Ow.default.string,validationState:Ow.default.oneOf(["success","warning","error",null]),inputRef:Ow.default.func},XEr={inline:!1,disabled:!1,title:""},Gte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=this.props,i=o.inline,a=o.disabled,u=o.validationState,p=o.inputRef,h=o.className,g=o.style,x=o.title,b=o.children,T=Wr(o,["inline","disabled","validationState","inputRef","className","style","title","children"]),A=qo(T),L=A[0],P=A[1],k=Nw.default.createElement("input",ir({},P,{ref:p,type:"radio",disabled:a}));if(i){var q,U=(q={},q[po(L,"inline")]=!0,q.disabled=a,q);return Nw.default.createElement("label",{className:(0,Vte.default)(h,U),style:g,title:x},k,b)}var H=ir({},oo(L),{disabled:a});return u&&(H["has-"+u]=!0),Nw.default.createElement("div",{className:(0,Vte.default)(h,H),style:g},Nw.default.createElement("label",{title:x},k,b))},t}(Nw.default.Component);Gte.propTypes=KEr;Gte.defaultProps=XEr;var Hte=An("radio",Gte);var Zte=Z(we()),_6=Z(xt());var p6=Z(we()),Xc=Z(xt());var JEr="tab",QEr="pane",eSr=Xc.default.oneOfType([Xc.default.string,Xc.default.number]),tSr={id:function(t){var r=null;if(!t.generateChildId){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];r=eSr.apply(void 0,[t].concat(o)),!r&&!t.id&&(r=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return r},generateChildId:Xc.default.func,onSelect:Xc.default.func,activeKey:Xc.default.any},rSr={$bs_tabContainer:Xc.default.shape({activeKey:Xc.default.any,onSelect:Xc.default.func.isRequired,getTabId:Xc.default.func.isRequired,getPaneId:Xc.default.func.isRequired})},Wte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.activeKey,a=o.onSelect,u=o.generateChildId,p=o.id,h=u||function(g,x){return p?p+"-"+x+"-"+g:null};return{$bs_tabContainer:{activeKey:i,onSelect:a,getTabId:function(x){return h(x,JEr)},getPaneId:function(x){return h(x,QEr)}}}},r.render=function(){var o=this.props,i=o.children,a=Wr(o,["children"]);return delete a.generateChildId,delete a.onSelect,delete a.activeKey,p6.default.cloneElement(p6.default.Children.only(i),a)},t}(p6.default.Component);Wte.propTypes=tSr;Wte.childContextTypes=rSr;var d6=H0(Wte,{activeKey:"onSelect"});var jWe=Z(Zn()),$te=Z(we()),vs=Z(xt()),h6=Z(Al());var nSr={componentClass:h6.default,animation:vs.default.oneOfType([vs.default.bool,h6.default]),mountOnEnter:vs.default.bool,unmountOnExit:vs.default.bool},oSr={componentClass:"div",animation:!0,mountOnEnter:!1,unmountOnExit:!1},iSr={$bs_tabContainer:vs.default.shape({activeKey:vs.default.any})},aSr={$bs_tabContent:vs.default.shape({bsClass:vs.default.string,animation:vs.default.oneOfType([vs.default.bool,h6.default]),activeKey:vs.default.any,mountOnEnter:vs.default.bool,unmountOnExit:vs.default.bool,onPaneEnter:vs.default.func.isRequired,onPaneExited:vs.default.func.isRequired,exiting:vs.default.bool.isRequired})},BC=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handlePaneEnter=i.handlePaneEnter.bind(wo(wo(i))),i.handlePaneExited=i.handlePaneExited.bind(wo(wo(i))),i.state={activeKey:null,activeChild:null},i}var r=t.prototype;return r.getChildContext=function(){var o=this.props,i=o.bsClass,a=o.animation,u=o.mountOnEnter,p=o.unmountOnExit,h=this.state.activeKey,g=this.getContainerActiveKey(),x=h!=null?h:g,b=h!=null&&h!==g;return{$bs_tabContent:{bsClass:i,animation:a,activeKey:x,mountOnEnter:u,unmountOnExit:p,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:b}}},r.UNSAFE_componentWillReceiveProps=function(o){!o.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},r.componentWillUnmount=function(){this.isUnmounted=!0},r.getContainerActiveKey=function(){var o=this.context.$bs_tabContainer;return o&&o.activeKey},r.handlePaneEnter=function(o,i){return!this.props.animation||i!==this.getContainerActiveKey()?!1:(this.setState({activeKey:i,activeChild:o}),!0)},r.handlePaneExited=function(o){this.isUnmounted||this.setState(function(i){var a=i.activeChild;return a!==o?null:{activeKey:null,activeChild:null}})},r.render=function(){var o=this.props,i=o.componentClass,a=o.className,u=Wr(o,["componentClass","className"]),p=yw(u,["animation","mountOnEnter","unmountOnExit"]),h=p[0],g=p[1];return $te.default.createElement(i,ir({},g,{className:(0,jWe.default)(a,po(h,"content"))}))},t}($te.default.Component);BC.propTypes=nSr;BC.defaultProps=oSr;BC.contextTypes=iSr;BC.childContextTypes=aSr;var m6=An("tab",BC);var qWe=Z(Zn()),g6=Z(we()),So=Z(xt()),Yte=Z(Al()),t1n=Z($0());var sSr={eventKey:So.default.any,animation:So.default.oneOfType([So.default.bool,Yte.default]),id:So.default.string,"aria-labelledby":So.default.string,bsClass:So.default.string,onEnter:So.default.func,onEntering:So.default.func,onEntered:So.default.func,onExit:So.default.func,onExiting:So.default.func,onExited:So.default.func,mountOnEnter:So.default.bool,unmountOnExit:So.default.bool},lSr={$bs_tabContainer:So.default.shape({getTabId:So.default.func,getPaneId:So.default.func}),$bs_tabContent:So.default.shape({bsClass:So.default.string,animation:So.default.oneOfType([So.default.bool,Yte.default]),activeKey:So.default.any,mountOnEnter:So.default.bool,unmountOnExit:So.default.bool,onPaneEnter:So.default.func.isRequired,onPaneExited:So.default.func.isRequired,exiting:So.default.bool.isRequired})},uSr={$bs_tabContainer:So.default.oneOf([null])},v6=function(e){jr(t,e);function t(n,o){var i;return i=e.call(this,n,o)||this,i.handleEnter=i.handleEnter.bind(wo(wo(i))),i.handleExited=i.handleExited.bind(wo(wo(i))),i.in=!1,i}var r=t.prototype;return r.getChildContext=function(){return{$bs_tabContainer:null}},r.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},r.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},r.componentWillUnmount=function(){this.in&&this.handleExited()},r.getAnimation=function(){if(this.props.animation!=null)return this.props.animation;var o=this.context.$bs_tabContent;return o&&o.animation},r.handleEnter=function(){var o=this.context.$bs_tabContent;o&&(this.in=o.onPaneEnter(this,this.props.eventKey))},r.handleExited=function(){var o=this.context.$bs_tabContent;o&&(o.onPaneExited(this),this.in=!1)},r.isActive=function(){var o=this.context.$bs_tabContent,i=o&&o.activeKey;return this.props.eventKey===i},r.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},r.render=function(){var o=this.props,i=o.eventKey,a=o.className,u=o.onEnter,p=o.onEntering,h=o.onEntered,g=o.onExit,x=o.onExiting,b=o.onExited,T=o.mountOnEnter,A=o.unmountOnExit,L=Wr(o,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","mountOnEnter","unmountOnExit"]),P=this.context,k=P.$bs_tabContent,q=P.$bs_tabContainer,U=yw(L,["animation"]),H=U[0],X=U[1],ee=this.isActive(),ne=this.getAnimation(),pe=T!=null?T:k&&k.mountOnEnter,ue=A!=null?A:k&&k.unmountOnExit;if(!ee&&!ne&&ue)return null;var Ie=ne===!0?Sv:ne||null;k&&(H.bsClass=po(k,"pane"));var Re=ir({},oo(H),{active:ee});q&&(X.id=q.getPaneId(i),X["aria-labelledby"]=q.getTabId(i));var Te=g6.default.createElement("div",ir({},X,{role:"tabpanel","aria-hidden":!ee,className:(0,qWe.default)(a,Re)}));if(Ie){var Ee=k&&k.exiting;return g6.default.createElement(Ie,{in:ee&&!Ee,onEnter:Dl(this.handleEnter,u),onEntering:p,onEntered:h,onExit:g,onExiting:x,onExited:Dl(this.handleExited,b),mountOnEnter:pe,unmountOnExit:ue},Te)}return Te},t}(g6.default.Component);v6.propTypes=sSr;v6.contextTypes=lSr;v6.childContextTypes=uSr;var y6=An("tab-pane",v6);var cSr=ir({},y6.propTypes,{disabled:_6.default.bool,title:_6.default.node,tabClassName:_6.default.string}),VC=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o=ir({},this.props);return delete o.title,delete o.disabled,delete o.tabClassName,Zte.default.createElement(y6,o)},t}(Zte.default.Component);VC.propTypes=cSr;VC.Container=d6;VC.Content=m6;VC.Pane=y6;var x6=VC;var t1=Z(we()),Zf=Z(xt()),zWe=Z($ee());var FWe=Z(Al());var fSr=d6.ControlledComponent,pSr={activeKey:Zf.default.any,bsStyle:Zf.default.oneOf(["tabs","pills"]),animation:Zf.default.oneOfType([Zf.default.bool,FWe.default]),id:(0,zWe.default)(Zf.default.oneOfType([Zf.default.string,Zf.default.number])),onSelect:Zf.default.func,mountOnEnter:Zf.default.bool,unmountOnExit:Zf.default.bool},dSr={bsStyle:"tabs",animation:!0,mountOnEnter:!1,unmountOnExit:!1};function hSr(e){var t;return Yf.forEach(e,function(r){t==null&&(t=r.props.eventKey)}),t}var b6=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.renderTab=function(o){var i=o.props,a=i.title,u=i.eventKey,p=i.disabled,h=i.tabClassName;return a==null?null:t1.default.createElement(aWe,{eventKey:u,disabled:p,className:h},a)},r.render=function(){var o=this.props,i=o.id,a=o.onSelect,u=o.animation,p=o.mountOnEnter,h=o.unmountOnExit,g=o.bsClass,x=o.className,b=o.style,T=o.children,A=o.activeKey,L=A===void 0?hSr(T):A,P=Wr(o,["id","onSelect","animation","mountOnEnter","unmountOnExit","bsClass","className","style","children","activeKey"]);return t1.default.createElement(fSr,{id:i,activeKey:L,onSelect:a,className:x,style:b},t1.default.createElement("div",null,t1.default.createElement(oWe,ir({},P,{role:"tablist"}),Yf.map(T,this.renderTab)),t1.default.createElement(m6,{bsClass:g,animation:u,mountOnEnter:p,unmountOnExit:h},T)))},t}(t1.default.Component);b6.propTypes=pSr;b6.defaultProps=dSr;An("tab",b6);var Kte=H0(b6,{activeKey:"onSelect"});var UWe=Z(Zn()),GC=Z(we()),ys=Z(xt()),BWe=Z($ee());var mSr={id:(0,BWe.default)(ys.default.oneOfType([ys.default.string,ys.default.number])),placement:ys.default.oneOf(["top","right","bottom","left"]),positionTop:ys.default.oneOfType([ys.default.number,ys.default.string]),positionLeft:ys.default.oneOfType([ys.default.number,ys.default.string]),arrowOffsetTop:ys.default.oneOfType([ys.default.number,ys.default.string]),arrowOffsetLeft:ys.default.oneOfType([ys.default.number,ys.default.string])},gSr={placement:"right"},Xte=function(e){jr(t,e);function t(){return e.apply(this,arguments)||this}var r=t.prototype;return r.render=function(){var o,i=this.props,a=i.placement,u=i.positionTop,p=i.positionLeft,h=i.arrowOffsetTop,g=i.arrowOffsetLeft,x=i.className,b=i.style,T=i.children,A=Wr(i,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),L=qo(A),P=L[0],k=L[1],q=ir({},oo(P),(o={},o[a]=!0,o)),U=ir({top:u,left:p},b),H={top:h,left:g};return GC.default.createElement("div",ir({},k,{role:"tooltip",className:(0,UWe.default)(x,q),style:U}),GC.default.createElement("div",{className:po(P,"arrow"),style:H}),GC.default.createElement("div",{className:po(P,"inner")},T))},t}(GC.default.Component);Xte.propTypes=mSr;Xte.defaultProps=gSr;var Jte=An("tooltip",Xte);var ZC=Z(xt(),1);var Io=Z(we(),1);var nre=Z(xt(),1);var XWe=Z(mv(),1);var Rn=e=>e!==void 0,VWe=(e,t,r)=>t in e?e[t]:e[t]=r,HC={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},tre=class{constructor(t){this._parser=new t}toDocument(t){return this._parser.parseFromString(t,"application/xml")}getAllTextContent(t,r){return S6(t,r).join("")}};function S6(e,t){return GWe(e,t,[]).join("")}function GWe(e,t,r){if(e.nodeType===HC.CDATA_SECTION||e.nodeType===HC.TEXT)t?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{var n;for(n=e.firstChild;n;n=n.nextSibling)GWe(n,t,r)}return r}function vSr(e,t,r,n){for(var o=ySr(t);o;o=_Sr(o)){var i=o.namespaceURI||null,a=e[i];if(Rn(a)){var u=a[o.localName];Rn(u)&&u.call(n,o,r)}}}function ySr(e){let t=e.firstElementChild||e.firstChild;for(;t&&t.nodeType!==HC.ELEMENT;)t=t.nextSibling;return t}function _Sr(e){let t=e.nextElementSibling||e.nextSibling;for(;t&&t.nodeType!==HC.ELEMENT;)t=t.nextSibling;return t}function _s(e,t,r){return xSr(e,t,r)}function xSr(e,t,r){var n=Rn(r)?r:{},o,i;for(o=0,i=e.length;o<i;++o)n[e[o]]=t;return n}function HWe(e,t){return function(r,n){var o=e.call(Rn(t)?t:this,r,n);if(Rn(o)){var i=n[n.length-1];i.push(o)}}}function Ha(e,t,r,n,o){return n.push(e),vSr(t,r,n,o),n.pop()}function Cr(e,t,r){return function(n,o){let i=e.call(Rn(r)?r:this,n,o);if(Rn(i)){var a=o[o.length-1],u=Rn(t)?t:n.localName;a[u]=i}}}function gu(e,t,r){return function(n,o){var i=e.call(Rn(r)?r:this,n,o);if(Rn(i)){var a=o[o.length-1],u=Rn(t)?t:n.localName,p=VWe(a,u,[]);p.push(i)}}}var bSr=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function wSr(e){return e.replace(bSr,"")}function r1(e){let t=/^\s*(true|1)|(false|0)\s*$/.exec(e);if(t)return Rn(t[1])||!1}function Lw(e){return Yh(S6(e,!1))}function Yh(e){let t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(e);if(t)return parseFloat(t[1])}function Qte(e){return w6(S6(e,!1))}function w6(e){let t=/^\s*(\d+)\s*$/.exec(e);if(t)return parseInt(t[1],10)}function io(e){return wSr(S6(e,!1))}var ESr="http://www.w3.org/1999/xlink";function rre(e){return e.getAttributeNS(ESr,"href")}function SSr(e,t){return Ha({},XSr,e,t)}function WWe(e){return[Yh(e.getAttribute("minx")),Yh(e.getAttribute("miny")),Yh(e.getAttribute("maxx")),Yh(e.getAttribute("maxy"))]}function ISr(e,t){let r=WWe(e),n=[Yh(e.getAttribute("resx")),Yh(e.getAttribute("resy"))];return{crs:e.getAttribute("CRS")||e.getAttribute("SRS"),extent:r,res:n}}function TSr(e,t){let r=WWe(e);if(!(!Rn(r[0])||!Rn(r[1])||!Rn(r[2])||!Rn(r[3])))return r}function MSr(e,t){let r=parseFloat(e.getAttribute("min")),n=parseFloat(e.getAttribute("max"));return{min:r,max:n}}function CSr(e,t){let r=Ha({},JSr,e,t);if(!Rn(r))return;let n=r.westBoundLongitude,o=r.southBoundLatitude,i=r.eastBoundLongitude,a=r.northBoundLatitude;if(!(!Rn(n)||!Rn(o)||!Rn(i)||!Rn(a)))return[n,o,i,a]}function ASr(e,t){return Ha({},HSr,e,t)}function DSr(e,t){return Ha({},WSr,e,t)}function NSr(e,t){return Ha({},$Sr,e,t)}function OSr(e,t){return Ha({},YSr,e,t)}function LSr(e,t){return Ha({},ZSr,e,t)}function PSr(e,t){return Ha([],KSr,e,t)}function kSr(e,t){let r=r1(e.getAttribute("queryable"));return Ha({queryable:Rn(r)?r:!1},ZWe,e,t)}function RSr(e,t){var r=t[t.length-1];let n=Ha({},ZWe,e,t);if(!Rn(n))return;let o=r1(e.getAttribute("queryable"));Rn(o)||(o=r.queryable),n.queryable=Rn(o)?o:!1;let i=w6(e.getAttribute("cascaded"));Rn(i)||(i=r.cascaded),n.cascaded=i;let a=r1(e.getAttribute("opaque"));Rn(a)||(a=r.opaque),n.opaque=Rn(a)?a:!1;let u=r1(e.getAttribute("noSubsets"));Rn(u)||(u=r.noSubsets),n.noSubsets=Rn(u)?u:!1;let p=Yh(e.getAttribute("fixedWidth"));Rn(p)||(p=r.fixedWidth),n.fixedWidth=p;let h=Yh(e.getAttribute("fixedHeight"));Rn(h)||(h=r.fixedHeight),n.fixedHeight=h;let g=["Style","CRS","AuthorityURL"];for(let b=0,T=g.length;b<T;b++){let A=g[b],L=r[A];if(Rn(L)){let P=VWe(n,A,[]);P=P.concat(L),n[A]=P}}let x=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];for(let b=0,T=x.length;b<T;b++){let A=x[b],L=n[A];if(!Rn(L)){let P=r[A];n[A]=P}}return n}function jSr(e,t){return{name:e.getAttribute("name"),units:e.getAttribute("units"),unitSymbol:e.getAttribute("unitSymbol"),default:e.getAttribute("default"),multipleValues:r1(e.getAttribute("multipleValues")),nearestValue:r1(e.getAttribute("nearestValue")),current:r1(e.getAttribute("current")),values:io(e)}}function Zh(e,t){return Ha({},o2r,e,t)}function qSr(e,t){return Ha({},QSr,e,t)}function zSr(e,t){return Ha({},t2r,e,t)}function FSr(e,t){return Ha({},r2r,e,t)}function ere(e,t){return Ha({},e2r,e,t)}function $We(e,t){var r=Zh(e,t);if(Rn(r)){let n=[w6(e.getAttribute("width")),w6(e.getAttribute("height"))];return r.size=n,r}}function USr(e,t){var r=Zh(e,t);if(Rn(r))return r.name=e.getAttribute("name"),r}function BSr(e,t){var r=Zh(e,t);if(Rn(r))return r.type=e.getAttribute("type"),r}function VSr(e,t){return Ha({},n2r,e,t)}function YWe(e,t){return Ha([],i2r,e,t)}var xs=[null,"http://www.opengis.net/wms"],GSr=_s(xs,{Service:Cr(DSr),Capability:Cr(ASr)}),HSr=_s(xs,{Request:Cr(qSr),Exception:Cr(PSr),Layer:Cr(kSr)}),WSr=_s(xs,{Name:Cr(io),Title:Cr(io),Abstract:Cr(io),KeywordList:Cr(YWe),OnlineResource:Cr(rre),ContactInformation:Cr(NSr),Fees:Cr(io),AccessConstraints:Cr(io),LayerLimit:Cr(Qte),MaxWidth:Cr(Qte),MaxHeight:Cr(Qte)}),$Sr=_s(xs,{ContactPersonPrimary:Cr(OSr),ContactPosition:Cr(io),ContactAddress:Cr(LSr),ContactVoiceTelephone:Cr(io),ContactFacsimileTelephone:Cr(io),ContactElectronicMailAddress:Cr(io)}),YSr=_s(xs,{ContactPerson:Cr(io),ContactOrganization:Cr(io)}),ZSr=_s(xs,{AddressType:Cr(io),Address:Cr(io),City:Cr(io),StateOrProvince:Cr(io),PostCode:Cr(io),Country:Cr(io)}),KSr=_s(xs,{Format:HWe(io)}),ZWe=_s(xs,{Name:Cr(io),Title:Cr(io),Abstract:Cr(io),KeywordList:Cr(YWe),CRS:gu(io),SRS:gu(io),EX_GeographicBoundingBox:Cr(CSr),LatLonBoundingBox:Cr(TSr),BoundingBox:gu(ISr),Dimension:gu(jSr),Attribution:Cr(SSr),AuthorityURL:gu(USr),Identifier:gu(io),MetadataURL:gu(BSr),DataURL:gu(Zh),FeatureListURL:gu(Zh),Style:gu(VSr),MinScaleDenominator:Cr(Lw),MaxScaleDenominator:Cr(Lw),ScaleHint:Cr(MSr),Layer:gu(RSr)}),XSr=_s(xs,{Title:Cr(io),OnlineResource:Cr(rre),LogoURL:Cr($We)}),JSr=_s(xs,{westBoundLongitude:Cr(Lw),eastBoundLongitude:Cr(Lw),southBoundLatitude:Cr(Lw),northBoundLatitude:Cr(Lw)}),QSr=_s(xs,{GetCapabilities:Cr(ere),GetMap:Cr(ere),GetFeatureInfo:Cr(ere)}),e2r=_s(xs,{Format:gu(io),DCPType:gu(zSr)}),t2r=_s(xs,{HTTP:Cr(FSr)}),r2r=_s(xs,{Get:Cr(Zh),Post:Cr(Zh)}),n2r=_s(xs,{Name:Cr(io),Title:Cr(io),Abstract:Cr(io),LegendURL:gu($We),StyleSheetURL:Cr(Zh),StyleURL:Cr(Zh)}),o2r=_s(xs,{Format:Cr(io),OnlineResource:Cr(rre)}),i2r=_s(xs,{Keyword:HWe(io)}),E6=class{constructor(t,r){!r&&typeof window!="undefined"&&(r=window.DOMParser),this.version=void 0,this._parser=new tre(r),this._data=t}data(t){return this._data=t,this}toJSON(t){return t=t||this._data,this.parse(t)}parse(t){return this.readFromDocument(this._parser.toDocument(t))}readFromDocument(t){for(let r=t.firstChild;r;r=r.nextSibling)if(r.nodeType==HC.ELEMENT)return this.readFromNode(r);return null}readFromNode(t){return this.version=t.getAttribute("version"),Ha({version:this.version},GSr,t,[])||null}};var I6="wms-base-map-layer",WC="wms-base-map-source",$C="xyz-base-map-layer",T6="xyz-base-map-source";function JWe(e){let t;try{t=new URL(e)}catch(r){return!1}return t.protocol==="http:"||t.protocol==="https:"}function KWe(e,t){return t.Capability.Layer.Layer.filter(r=>r.CRS.includes("EPSG:3857")).map(r=>{let o=r.Name;return{id:r.Title,label:r.Title,urls:[`${e}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=1.1.0&request=GetMap&srs=EPSG:3857&transparent=true&width=512&height=512&layers=${o}`],type:"wms",layers:o,tileSize:512}})}function M6(e){return At(this,null,function*(){let t=yield XWe.default.get(e);if(t.status===200){let r=new E6().parse(t.data);return console.log("parse",KWe(e.split("?")[0],r)),KWe(e.split("?")[0],r)}else throw new Error(`Could not fetch wms capabilities document at ${e}`)})}var QWe=(e,t,r)=>{if(!t)return!1;if(r$e(e,r),!e.getSource(WC)){let n={type:"raster",tiles:[`${t.urls[0]}?bbox={bbox-epsg-3857}&format=image/png&service=WMS&version=2.0.0&request=GetMap&CRS=EPSG:3857&transparent=true&width=512&height=512&layers=${t.layers}&STYLES=`]};t.attribution&&(n.attribution=t.attribution),e.addSource(WC,n);let o=e.getStyle().layers[0].id;e.addLayer({id:I6,type:"raster",source:WC,paint:{}},o)}},e$e=e=>{for(let{id:t}of e.getStyle().layers)(t===I6||t===$C)&&e.setLayoutProperty(t,"visibility","visible")},YC=e=>{e$e(e),e.getLayer(I6)&&e.removeLayer(I6),e.getSource(WC)&&e.removeSource(WC)},t$e=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","visible")})},r$e=(e,t)=>{t.forEach(r=>{e.setLayoutProperty(r.id,"visibility","none")})},n$e=(e,t,r)=>{if(!t)return!1;if(r$e(e,r),YC(e),!e.getSource($C)){e.addSource(T6,{type:"raster",tiles:[t.urls[0]],attribution:t.attribution});let n=e.getStyle().layers[0].id;e.addLayer({id:$C,type:"raster",source:T6,paint:{}},n)}},o$e=e=>{e$e(e),e.getLayer($C)&&e.removeLayer($C),e.getSource(T6)&&e.removeSource(T6)};var i$e=e=>{let{onClose:t,onSubmit:r}=e,[n,o]=(0,Io.useState)(""),[i,a]=(0,Io.useState)(!1),[u,p]=(0,Io.useState)([]),[h,g]=(0,Io.useState)(null),x=Mr(ji),b=(0,Io.useRef)(),T=(0,Io.useRef)(),A=X=>{p([]),g(null),x({id:"dialog-add-wms",type:"danger",text:X})},L=()=>{t()},P=()=>{r(h),L()},k=()=>At(void 0,null,function*(){if(!JWe(n)){a(!0);return}try{let X=yield M6(n);X.length!==0&&(p(X),g(X[0]))}catch(X){A(fe("dialog.add-wms.error.invalid-url"))}}),q=X=>{o(X.target.value)},U=X=>{X.code==="Enter"&&k()},H=X=>{let ee=u.find(ne=>ne.id===X.target.value);g(ee)};return Io.default.createElement("div",null,Io.default.createElement(Hh,{className:"vkf-dialog-addwms",show:!0,onHide:L},Io.default.createElement(Hh.Header,null,Io.default.createElement(Hh.Title,null,fe("control-basemapselector-addwms-title"))),Io.default.createElement(Hh.Body,null,Io.default.createElement("div",{className:"dialog-content"},Io.default.createElement("div",{className:Et("form-group","set-url",i?"has-warning":"")},Io.default.createElement("label",{htmlFor:b.current},fe("control-basemapselector-addwms-input-label")),Io.default.createElement("div",{className:"form-group-capabilities"},Io.default.createElement("input",{type:"url",className:"form-control",ref:b,placeholder:"https://meinwms.de?Request=GetCapabilities&Service=WMS&Version=1.3.0",value:n,onChange:q,onKeyDown:U}),Io.default.createElement("button",{type:"submit",className:"btn",onClick:k},fe("control-basemapselector-addwms-btn-load-capabilities"))),Io.default.createElement("p",{className:"help-block"},fe("control-basemapselector-addwms-input-description"))),u.length>0&&h!==null&&Io.default.createElement("div",{className:Et("form-group","set-layer")},Io.default.createElement("label",{htmlFor:T.current},fe("control-basemapselector-addwms-select-label")),Io.default.createElement("select",{ref:T,value:h.id,onChange:H,className:"form-control"},u.map(X=>Io.default.createElement("option",{key:X.id,value:X.id},X.label))),Io.default.createElement("p",{className:"help-block"},fe("control-basemapselector-addwms-select-description"))))),Io.default.createElement(Hh.Footer,null,Io.default.createElement(ej,{onClick:L},fe("control-basemapselector-addwms-btn-canel")),Io.default.createElement(ej,{onClick:P,bsStyle:"primary",className:Et(h===null?"disabled":"")},fe("control-basemapselector-addwms-btn-submit")))))};i$e.propTypes={onClose:nre.default.func.isRequired,onSubmit:nre.default.func.isRequired};var a$e=i$e;var n1="vkf-custom-basemaps",s$e=e=>{let{map:t}=e,[r,n]=On(Vc),[o,i]=$f(n1,[]),a=hr.getBaseMaps(),u=Mr(ji),[p,h]=(0,Js.useState)(!1),g=A=>{n(A.id)},x=()=>{h(!0)},b=A=>{A.type==="wms"&&YC(t,A),r===A.id&&n(a[0].id),i(L=>L.filter(P=>P.id!==A.id))},T=A=>{if([...a,...o].find(P=>P.id===A.id||P.label===A.label))u({id:"basemapSelector",type:"danger",text:fe("control-basemapselector-error-initializiation")});else{let P=qt(Se({},A),{allowDeletion:!0});i(k=>[...k,P])}};return Js.default.createElement(Js.default.Fragment,null,r!==void 0&&Js.default.createElement(Js.default.Fragment,null,Js.default.createElement("h2",null,fe("control-basemapselector-label"),":"),Js.default.createElement("ul",{className:"wms-entries"},[...a,...o].map(A=>Js.default.createElement("li",{key:A.id,className:"basemap-selector-entry"},Js.default.createElement(Hte,{onChange:()=>g(A),name:A.id,value:A.id,checked:r===A.id},A.label),A.allowDeletion&&Js.default.createElement("button",{className:"delete-basemap-button",onClick:L=>{L.preventDefault(),L.stopPropagation(),b(A)},title:"Remove basemap"},Js.default.createElement(Vh,{glyph:"remove"}))))),Js.default.createElement("div",{className:"controls-container"},Js.default.createElement("button",{className:"add-wms-button",onClick:x},fe("control-basemapselector-btn-addwms")))),p&&Js.default.createElement(a$e,{onClose:()=>h(!1),onSubmit:T}))};s$e.propTypes={map:ZC.default.object,onBasemapChange:ZC.default.func,onSetNotification:ZC.default.func,activeBasemapId:ZC.default.string};var l$e=s$e;var Kf={RADIANS:"radians",DEGREES:"degrees",FEET:"ft",METERS:"m",PIXELS:"pixels",TILE_PIXELS:"tile-pixels",USFEET:"us-ft"},x_n={9001:Kf.METERS,9002:Kf.FEET,9003:Kf.USFEET,9101:Kf.RADIANS,9102:Kf.DEGREES};var vu={};vu[Kf.RADIANS]=6370997/(2*Math.PI);vu[Kf.DEGREES]=2*Math.PI*6370997/360;vu[Kf.FEET]=.3048;vu[Kf.METERS]=1;vu[Kf.USFEET]=1200/3937;var yu=Kf;var a2r=function(){function e(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}return e.prototype.canWrapX=function(){return this.canWrapX_},e.prototype.getCode=function(){return this.code_},e.prototype.getExtent=function(){return this.extent_},e.prototype.getUnits=function(){return this.units_},e.prototype.getMetersPerUnit=function(){return this.metersPerUnit_||vu[this.units_]},e.prototype.getWorldExtent=function(){return this.worldExtent_},e.prototype.getAxisOrientation=function(){return this.axisOrientation_},e.prototype.isGlobal=function(){return this.global_},e.prototype.setGlobal=function(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)},e.prototype.getDefaultTileGrid=function(){return this.defaultTileGrid_},e.prototype.setDefaultTileGrid=function(t){this.defaultTileGrid_=t},e.prototype.setExtent=function(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)},e.prototype.setWorldExtent=function(t){this.worldExtent_=t},e.prototype.setGetPointResolution=function(t){this.getPointResolutionFunc_=t},e.prototype.getPointResolutionFunc=function(){return this.getPointResolutionFunc_},e}(),C6=a2r;function Ho(e,t,r){return Math.min(Math.max(e,t),r)}var u$e=function(){var e;return"cosh"in Math?e=Math.cosh:e=function(t){var r=Math.exp(t);return(r+1/r)/2},e}(),A6=function(){var e;return"log2"in Math?e=Math.log2:e=function(t){return Math.log(t)*Math.LOG2E},e}();function c$e(e,t,r,n,o,i){var a=o-r,u=i-n;if(a!==0||u!==0){var p=((e-r)*a+(t-n)*u)/(a*a+u*u);p>1?(r=o,n=i):p>0&&(r+=a*p,n+=u*p)}return Kh(e,t,r,n)}function Kh(e,t,r,n){var o=r-e,i=n-t;return o*o+i*i}function f$e(e){for(var t=e.length,r=0;r<t;r++){for(var n=r,o=Math.abs(e[r][r]),i=r+1;i<t;i++){var a=Math.abs(e[i][r]);a>o&&(o=a,n=i)}if(o===0)return null;var u=e[n];e[n]=e[r],e[r]=u;for(var p=r+1;p<t;p++)for(var h=-e[p][r]/e[r][r],g=r;g<t+1;g++)r==g?e[p][g]=0:e[p][g]+=h*e[r][g]}for(var x=new Array(t),b=t-1;b>=0;b--){x[b]=e[b][t]/e[b][b];for(var T=b-1;T>=0;T--)e[T][t]-=e[T][b]*x[b]}return x}function Pw(e){return e*Math.PI/180}function Xf(e,t){var r=e%t;return r*t<0?r+t:r}function p$e(e,t,r){return e+r*(t-e)}function d$e(e,t){var r=Math.pow(10,t);return Math.round(e*r)/r}function KC(e,t){return Math.floor(d$e(e,t))}function XC(e,t){return Math.ceil(d$e(e,t))}var s2r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JC=6378137,Rw=Math.PI*JC,l2r=[-Rw,-Rw,Rw,Rw],u2r=[-180,-85,180,85],D6=JC*Math.log(Math.tan(Math.PI/2)),kw=function(e){s2r(t,e);function t(r){return e.call(this,{code:r,units:yu.METERS,extent:l2r,global:!0,worldExtent:u2r,getPointResolution:function(n,o){return n/u$e(o[1]/JC)}})||this}return t}(C6),ore=[new kw("EPSG:3857"),new kw("EPSG:102100"),new kw("EPSG:102113"),new kw("EPSG:900913"),new kw("http://www.opengis.net/def/crs/EPSG/0/3857"),new kw("http://www.opengis.net/gml/srs/epsg.xml#3857")];function h$e(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o){i[a]=Rw*e[a]/180;var u=JC*Math.log(Math.tan(Math.PI*(+e[a+1]+90)/360));u>D6?u=D6:u<-D6&&(u=-D6),i[a+1]=u}return i}function m$e(e,t,r){var n=e.length,o=r>1?r:2,i=t;i===void 0&&(o>2?i=e.slice():i=new Array(n));for(var a=0;a<n;a+=o)i[a]=180*e[a]/Rw,i[a+1]=360*Math.atan(Math.exp(e[a+1]/JC))/Math.PI-90;return i}var c2r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f2r=6378137,g$e=[-180,-90,180,90],p2r=Math.PI*f2r/180,o1=function(e){c2r(t,e);function t(r,n){return e.call(this,{code:r,units:yu.DEGREES,extent:g$e,axisOrientation:n,global:!0,metersPerUnit:p2r,worldExtent:g$e})||this}return t}(C6),ire=[new o1("CRS:84"),new o1("EPSG:4326","neu"),new o1("urn:ogc:def:crs:OGC:1.3:CRS84"),new o1("urn:ogc:def:crs:OGC:2:84"),new o1("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new o1("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new o1("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var are={};function v$e(e){return are[e]||are[e.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function y$e(e,t){are[e]=t}var zo=typeof Object.assign=="function"?Object.assign:function(e,t){if(e==null)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(e),n=1,o=arguments.length;n<o;++n){var i=arguments[n];if(i!=null)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a])}return r};function Jc(e){for(var t in e)delete e[t]}var _$e=typeof Object.values=="function"?Object.values:function(e){var t=[];for(var r in e)t.push(e[r]);return t};function x$e(e){var t;for(t in e)return!1;return!t}var jw={};function QC(e,t,r){var n=e.getCode(),o=t.getCode();n in jw||(jw[n]={}),jw[n][o]=r}function b$e(e,t){var r;return e in jw&&t in jw[e]&&(r=jw[e][t]),r}var Wa={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Gn(){return function(){throw new Error("Unimplemented abstract method.")}()}var d2r=0;function $i(e){return e.ol_uid||(e.ol_uid=String(++d2r))}var N6="6.15.1";var h2r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m2r=function(e){h2r(t,e);function t(r){var n=this,o=N6==="latest"?N6:"v"+N6.split("-")[0],i="Assertion failed. See https://openlayers.org/en/"+o+"/doc/errors/#"+r+" for details.";return n=e.call(this,i)||this,n.code=r,n.name="AssertionError",n.message=i,n}return t}(Error),O6=m2r;function Xr(e,t){if(!e)throw new O6(t)}function eA(e){for(var t=id(),r=0,n=e.length;r<n;++r)rA(t,e[r]);return t}function g2r(e,t,r){var n=Math.min.apply(null,e),o=Math.min.apply(null,t),i=Math.max.apply(null,e),a=Math.max.apply(null,t);return Jh(n,o,i,a,r)}function E$e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e.slice()}function L6(e,t,r){var n,o;return t<e[0]?n=e[0]-t:e[2]<t?n=t-e[2]:n=0,r<e[1]?o=e[1]-r:e[3]<r?o=r-e[3]:o=0,n*n+o*o}function Xh(e,t){return sre(e,t[0],t[1])}function S$e(e,t){return e[0]<=t[0]&&t[2]<=e[2]&&e[1]<=t[1]&&t[3]<=e[3]}function sre(e,t,r){return e[0]<=t&&t<=e[2]&&e[1]<=r&&r<=e[3]}function w$e(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=t[0],u=t[1],p=Wa.UNKNOWN;return a<r?p=p|Wa.LEFT:a>o&&(p=p|Wa.RIGHT),u<n?p=p|Wa.BELOW:u>i&&(p=p|Wa.ABOVE),p===Wa.UNKNOWN&&(p=Wa.INTERSECTING),p}function id(){return[1/0,1/0,-1/0,-1/0]}function Jh(e,t,r,n,o){return o?(o[0]=e,o[1]=t,o[2]=r,o[3]=n,o):[e,t,r,n]}function qw(e){return Jh(1/0,1/0,-1/0,-1/0,e)}function I$e(e,t){var r=e[0],n=e[1];return Jh(r,n,r,n,t)}function T$e(e,t,r,n,o){var i=qw(o);return lre(i,e,t,r,n)}function tA(e,t){return e[0]==t[0]&&e[2]==t[2]&&e[1]==t[1]&&e[3]==t[3]}function M$e(e,t){return t[0]<e[0]&&(e[0]=t[0]),t[2]>e[2]&&(e[2]=t[2]),t[1]<e[1]&&(e[1]=t[1]),t[3]>e[3]&&(e[3]=t[3]),e}function rA(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function lre(e,t,r,n,o){for(;r<n;r+=o)v2r(e,t[r],t[r+1]);return e}function v2r(e,t,r){e[0]=Math.min(e[0],t),e[1]=Math.min(e[1],r),e[2]=Math.max(e[2],t),e[3]=Math.max(e[3],r)}function P6(e,t){var r;return r=t(k6(e)),r||(r=t(R6(e)),r)||(r=t(j6(e)),r)||(r=t(Dv(e)),r)?r:!1}function nA(e){var t=0;return i1(e)||(t=fi(e)*bs(e)),t}function k6(e){return[e[0],e[1]]}function R6(e){return[e[2],e[1]]}function Jf(e){return[(e[0]+e[2])/2,(e[1]+e[3])/2]}function C$e(e,t){var r;return t==="bottom-left"?r=k6(e):t==="bottom-right"?r=R6(e):t==="top-left"?r=Dv(e):t==="top-right"?r=j6(e):Xr(!1,13),r}function oA(e,t,r,n,o){var i=y2r(e,t,r,n),a=i[0],u=i[1],p=i[2],h=i[3],g=i[4],x=i[5],b=i[6],T=i[7];return Jh(Math.min(a,p,g,b),Math.min(u,h,x,T),Math.max(a,p,g,b),Math.max(u,h,x,T),o)}function y2r(e,t,r,n){var o=t*n[0]/2,i=t*n[1]/2,a=Math.cos(r),u=Math.sin(r),p=o*a,h=o*u,g=i*a,x=i*u,b=e[0],T=e[1];return[b-p+x,T-h-g,b-p-x,T-h+g,b+p-x,T+h+g,b+p+x,T+h-g,b-p+x,T-h-g]}function bs(e){return e[3]-e[1]}function ad(e,t,r){var n=r||id();return iA(e,t)?(e[0]>t[0]?n[0]=e[0]:n[0]=t[0],e[1]>t[1]?n[1]=e[1]:n[1]=t[1],e[2]<t[2]?n[2]=e[2]:n[2]=t[2],e[3]<t[3]?n[3]=e[3]:n[3]=t[3]):qw(n),n}function Dv(e){return[e[0],e[3]]}function j6(e){return[e[2],e[3]]}function fi(e){return e[2]-e[0]}function iA(e,t){return e[0]<=t[2]&&e[2]>=t[0]&&e[1]<=t[3]&&e[3]>=t[1]}function i1(e){return e[2]<e[0]||e[3]<e[1]}function A$e(e,t){return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t):e}function D$e(e,t,r){var n=!1,o=w$e(e,t),i=w$e(e,r);if(o===Wa.INTERSECTING||i===Wa.INTERSECTING)n=!0;else{var a=e[0],u=e[1],p=e[2],h=e[3],g=t[0],x=t[1],b=r[0],T=r[1],A=(T-x)/(b-g),L=void 0,P=void 0;i&Wa.ABOVE&&!(o&Wa.ABOVE)&&(L=b-(T-h)/A,n=L>=a&&L<=p),!n&&i&Wa.RIGHT&&!(o&Wa.RIGHT)&&(P=T-(b-p)*A,n=P>=u&&P<=h),!n&&i&Wa.BELOW&&!(o&Wa.BELOW)&&(L=b-(T-u)/A,n=L>=a&&L<=p),!n&&i&Wa.LEFT&&!(o&Wa.LEFT)&&(P=T-(b-a)*A,n=P>=u&&P<=h)}return n}function N$e(e,t,r,n){var o=[];if(n>1)for(var i=e[2]-e[0],a=e[3]-e[1],u=0;u<n;++u)o.push(e[0]+i*u/n,e[1],e[2],e[1]+a*u/n,e[2]-i*u/n,e[3],e[0],e[3]-a*u/n);else o=[e[0],e[1],e[2],e[1],e[2],e[3],e[0],e[3]];t(o,o,2);for(var p=[],h=[],u=0,g=o.length;u<g;u+=2)p.push(o[u]),h.push(o[u+1]);return g2r(p,h,r)}function O$e(e,t){return e[0]+=+t[0],e[1]+=+t[1],e}function a1(e,t){for(var r=!0,n=e.length-1;n>=0;--n)if(e[n]!=t[n]){r=!1;break}return r}function zw(e,t){var r=Math.cos(t),n=Math.sin(t),o=e[0]*r-e[1]*n,i=e[1]*r+e[0]*n;return e[0]=o,e[1]=i,e}function L$e(e,t){return e[0]*=t,e[1]*=t,e}function P$e(e,t){if(t.canWrapX()){var r=fi(t.getExtent()),n=k$e(e,t,r);n&&(e[0]-=n*r)}return e}function k$e(e,t,r){var n=t.getExtent(),o=0;if(t.canWrapX()&&(e[0]<n[0]||e[0]>n[2])){var i=r||fi(n);o=Math.floor((e[0]-n[0])/i)}return o}var _2r=6371008.8;function ure(e,t,r){var n=r||_2r,o=Pw(e[1]),i=Pw(t[1]),a=(i-o)/2,u=Pw(t[0]-e[0])/2,p=Math.sin(a)*Math.sin(a)+Math.sin(u)*Math.sin(u)*Math.cos(o)*Math.cos(i);return 2*n*Math.atan2(Math.sqrt(p),Math.sqrt(1-p))}var cre=!0;function j$e(e){var t=e===void 0?!0:e;cre=!t}function fre(e,t,r){var n;if(t!==void 0){for(var o=0,i=e.length;o<i;++o)t[o]=e[o];n=t}else n=e.slice();return n}function q$e(e,t,r){if(t!==void 0&&e!==t){for(var n=0,o=e.length;n<o;++n)t[n]=e[n];e=t}return e}function x2r(e){y$e(e.getCode(),e),QC(e,e,fre)}function b2r(e){e.forEach(x2r)}function _u(e){return typeof e=="string"?v$e(e):e||null}function pre(e,t,r,n){e=_u(e);var o,i=e.getPointResolutionFunc();if(i){if(o=i(t,r),n&&n!==e.getUnits()){var a=e.getMetersPerUnit();a&&(o=o*a/vu[n])}}else{var u=e.getUnits();if(u==yu.DEGREES&&!n||n==yu.DEGREES)o=t;else{var p=dre(e,_u("EPSG:4326"));if(p===q$e&&u!==yu.DEGREES)o=t*e.getMetersPerUnit();else{var h=[r[0]-t/2,r[1],r[0]+t/2,r[1],r[0],r[1]-t/2,r[0],r[1]+t/2];h=p(h,h,2);var g=ure(h.slice(0,2),h.slice(2,4)),x=ure(h.slice(4,6),h.slice(6,8));o=(g+x)/2}var a=n?vu[n]:e.getMetersPerUnit();a!==void 0&&(o/=a)}}return o}function R$e(e){b2r(e),e.forEach(function(t){e.forEach(function(r){t!==r&&QC(t,r,fre)})})}function w2r(e,t,r,n){e.forEach(function(o){t.forEach(function(i){QC(o,i,r),QC(i,o,n)})})}function q6(e,t){return e?typeof e=="string"?_u(e):e:_u(t)}function z$e(e,t){var r=aA(e,t!==void 0?t:"EPSG:3857","EPSG:4326"),n=r[0];return(n<-180||n>180)&&(r[0]=Xf(n+180,360)-180),r}function Nv(e,t){if(e===t)return!0;var r=e.getUnits()===t.getUnits();if(e.getCode()===t.getCode())return r;var n=dre(e,t);return n===fre&&r}function dre(e,t){var r=e.getCode(),n=t.getCode(),o=b$e(r,n);return o||(o=q$e),o}function s1(e,t){var r=_u(e),n=_u(t);return dre(r,n)}function aA(e,t,r){var n=s1(t,r);return n(e,void 0,e.length)}function F$e(e,t,r,n){var o=s1(t,r);return N$e(e,o,void 0,n)}var Qh=null;function U$e(){return Qh}function sA(e,t){return Qh?aA(e,t,Qh):e}function Qf(e,t){return Qh?aA(e,Qh,t):(cre&&!a1(e,[0,0])&&e[0]>=-180&&e[0]<=180&&e[1]>=-90&&e[1]<=90&&(cre=!1,console.warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),e)}function B$e(e,t){return Qh?F$e(e,t,Qh):e}function Ov(e,t){return Qh?F$e(e,Qh,t):e}function E2r(){R$e(ore),R$e(ire),w2r(ire,ore,h$e,m$e)}E2r();var ua=Z(we(),1);var Uw=Z(we(),1),hre=Z(xt(),1);var l1=Z(we(),1),Fw=Z(xt(),1),V$e=({checked:e,georeferenceMode:t,id:r,onClick:n,title:o})=>r!=="ToGeoref"||r==="toGeoref"&&t?l1.default.createElement("li",null,l1.default.createElement("label",{htmlFor:r},l1.default.createElement("input",{checked:e,className:"facet-search-el",onChange:()=>{n(r)},id:r,title:o,type:"checkbox"}),l1.default.createElement("span",{dangerouslySetInnerHTML:{__html:o}}))):l1.default.createElement(l1.default.Fragment,null);V$e.propTypes={checked:Fw.default.bool,georeferenceMode:Fw.default.bool,id:Fw.default.string,onClick:Fw.default.func,title:Fw.default.string};var G$e=V$e;var mre={AE:"map_type-ae",AK:"map_type-ak",CM:"map_type-cm",GL:"map_type-gl",MB:"map_type-mb",MTB:"map_type-mtb",TK:"map_type-tk",TKX:"map_type-tkx",MM:"type-mosaic",VM:"type-vector"},S2r=(e,t)=>e.title>t.title?1:e.title<t.title?-1:0,I2r=()=>{let e=Object.keys(mre).map(t=>({key:t,title:fe(`facet-${t.toLowerCase()}`)}));return e.sort(S2r),e},T2r={};Object.keys(mre).forEach(e=>{T2r[e]=!1});var H$e=({georeferenceMode:e,mosaicMode:t})=>{let[r,n]=On(Gc),o=(0,Uw.useMemo)(()=>{let u=Se({},mre);return t&&(delete u.MM,delete u.VM),u},[t]),i=(0,Uw.useMemo)(()=>I2r(),[]),a=u=>{n(p=>{let{facets:h,georeference:g}=p;if(u==="ToGeoref")return{facets:h,georeference:!g};{let x=h.slice(),b=x.findIndex(T=>T.id===u);if(b>-1)x.splice(b,1);else{let[T,A]=o[u].split("-");x.push({key:T,value:A,id:u})}return{facets:x,georeference:g}}})};return Uw.default.createElement("ul",{className:"search-facet"},i.map(({key:u,title:p})=>Uw.default.createElement(G$e,{checked:r.facets.findIndex(h=>h.id===u)!==-1,key:u,georeferenceMode:e,onClick:a,id:u,title:p})))};H$e.propTypes={georeferenceMode:hre.default.bool,mosaicMode:hre.default.bool};var W$e=H$e;var z6=W$e;var rm=Z(we(),1);var Ure=Z(xt(),1);var Yi=Z(we(),1),xu=Z(xt(),1);function Jr(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var $$e=Number.isNaN||function(t){return typeof t=="number"&&t!==t};function M2r(e,t){return!!(e===t||$$e(e)&&$$e(t))}function C2r(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!M2r(e[r],t[r]))return!1;return!0}function A2r(e,t){t===void 0&&(t=C2r);var r,n=[],o,i=!1;function a(){for(var u=[],p=0;p<arguments.length;p++)u[p]=arguments[p];return i&&r===this&&t(u,n)||(o=e.apply(this,u),i=!0,r=this,n=u),o}return a}var F6=A2r;var Vw=Z(we());var D2r=typeof performance=="object"&&typeof performance.now=="function",Y$e=D2r?function(){return performance.now()}:function(){return Date.now()};function Z$e(e){cancelAnimationFrame(e.id)}function N2r(e,t){var r=Y$e();function n(){Y$e()-r>=t?e.call(null):o.id=requestAnimationFrame(n)}var o={id:requestAnimationFrame(n)};return o}var gre=-1;function K$e(e){if(e===void 0&&(e=!1),gre===-1||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",document.body.appendChild(t),gre=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return gre}var Bw=null;function X$e(e){if(e===void 0&&(e=!1),Bw===null||e){var t=document.createElement("div"),r=t.style;r.width="50px",r.height="50px",r.overflow="scroll",r.direction="rtl";var n=document.createElement("div"),o=n.style;return o.width="100px",o.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?Bw="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?Bw="negative":Bw="positive-ascending"),document.body.removeChild(t),Bw}return Bw}var O2r=150,L2r=function(t,r){return t};function P2r(e){var t,r=e.getItemOffset,n=e.getEstimatedTotalSize,o=e.getItemSize,i=e.getOffsetForIndexAndAlignment,a=e.getStartIndexForOffset,u=e.getStopIndexForStartIndex,p=e.initInstanceProps,h=e.shouldResetStyleCacheOnItemSizeChange,g=e.validateProps;return t=function(x){RR(b,x);function b(A){var L;return L=x.call(this,A)||this,L._instanceProps=p(L.props,Jr(L)),L._outerRef=void 0,L._resetIsScrollingTimeoutId=null,L.state={instance:Jr(L),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof L.props.initialScrollOffset=="number"?L.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},L._callOnItemsRendered=void 0,L._callOnItemsRendered=F6(function(P,k,q,U){return L.props.onItemsRendered({overscanStartIndex:P,overscanStopIndex:k,visibleStartIndex:q,visibleStopIndex:U})}),L._callOnScroll=void 0,L._callOnScroll=F6(function(P,k,q){return L.props.onScroll({scrollDirection:P,scrollOffset:k,scrollUpdateWasRequested:q})}),L._getItemStyle=void 0,L._getItemStyle=function(P){var k=L.props,q=k.direction,U=k.itemSize,H=k.layout,X=L._getItemStyleCache(h&&U,h&&H,h&&q),ee;if(X.hasOwnProperty(P))ee=X[P];else{var ne=r(L.props,P,L._instanceProps),pe=o(L.props,P,L._instanceProps),ue=q==="horizontal"||H==="horizontal",Ie=q==="rtl",Re=ue?ne:0;X[P]=ee={position:"absolute",left:Ie?void 0:Re,right:Ie?Re:void 0,top:ue?0:ne,height:ue?"100%":pe,width:ue?pe:"100%"}}return ee},L._getItemStyleCache=void 0,L._getItemStyleCache=F6(function(P,k,q){return{}}),L._onScrollHorizontal=function(P){var k=P.currentTarget,q=k.clientWidth,U=k.scrollLeft,H=k.scrollWidth;L.setState(function(X){if(X.scrollOffset===U)return null;var ee=L.props.direction,ne=U;if(ee==="rtl")switch(X$e()){case"negative":ne=-U;break;case"positive-descending":ne=H-q-U;break;}return ne=Math.max(0,Math.min(ne,H-q)),{isScrolling:!0,scrollDirection:X.scrollOffset<ne?"forward":"backward",scrollOffset:ne,scrollUpdateWasRequested:!1}},L._resetIsScrollingDebounced)},L._onScrollVertical=function(P){var k=P.currentTarget,q=k.clientHeight,U=k.scrollHeight,H=k.scrollTop;L.setState(function(X){if(X.scrollOffset===H)return null;var ee=Math.max(0,Math.min(H,U-q));return{isScrolling:!0,scrollDirection:X.scrollOffset<ee?"forward":"backward",scrollOffset:ee,scrollUpdateWasRequested:!1}},L._resetIsScrollingDebounced)},L._outerRefSetter=function(P){var k=L.props.outerRef;L._outerRef=P,typeof k=="function"?k(P):k!=null&&typeof k=="object"&&k.hasOwnProperty("current")&&(k.current=P)},L._resetIsScrollingDebounced=function(){L._resetIsScrollingTimeoutId!==null&&Z$e(L._resetIsScrollingTimeoutId),L._resetIsScrollingTimeoutId=N2r(L._resetIsScrolling,O2r)},L._resetIsScrolling=function(){L._resetIsScrollingTimeoutId=null,L.setState({isScrolling:!1},function(){L._getItemStyleCache(-1,null)})},L}b.getDerivedStateFromProps=function(L,P){return k2r(L,P),g(L),null};var T=b.prototype;return T.scrollTo=function(L){L=Math.max(0,L),this.setState(function(P){return P.scrollOffset===L?null:{scrollDirection:P.scrollOffset<L?"forward":"backward",scrollOffset:L,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},T.scrollToItem=function(L,P){P===void 0&&(P="auto");var k=this.props,q=k.itemCount,U=k.layout,H=this.state.scrollOffset;L=Math.max(0,Math.min(L,q-1));var X=0;if(this._outerRef){var ee=this._outerRef;U==="vertical"?X=ee.scrollWidth>ee.clientWidth?K$e():0:X=ee.scrollHeight>ee.clientHeight?K$e():0}this.scrollTo(i(this.props,L,P,H,this._instanceProps,X))},T.componentDidMount=function(){var L=this.props,P=L.direction,k=L.initialScrollOffset,q=L.layout;if(typeof k=="number"&&this._outerRef!=null){var U=this._outerRef;P==="horizontal"||q==="horizontal"?U.scrollLeft=k:U.scrollTop=k}this._callPropsCallbacks()},T.componentDidUpdate=function(){var L=this.props,P=L.direction,k=L.layout,q=this.state,U=q.scrollOffset,H=q.scrollUpdateWasRequested;if(H&&this._outerRef!=null){var X=this._outerRef;if(P==="horizontal"||k==="horizontal"){if(P==="rtl")switch(X$e()){case"negative":X.scrollLeft=-U;break;case"positive-ascending":X.scrollLeft=U;break;default:var ee=X.clientWidth,ne=X.scrollWidth;X.scrollLeft=ne-ee-U;break;}else X.scrollLeft=U;}else X.scrollTop=U}this._callPropsCallbacks()},T.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&Z$e(this._resetIsScrollingTimeoutId)},T.render=function(){var L=this.props,P=L.children,k=L.className,q=L.direction,U=L.height,H=L.innerRef,X=L.innerElementType,ee=L.innerTagName,ne=L.itemCount,pe=L.itemData,ue=L.itemKey,Ie=ue===void 0?L2r:ue,Re=L.layout,Te=L.outerElementType,Ee=L.outerTagName,Ye=L.style,Qe=L.useIsScrolling,qe=L.width,Ue=this.state.isScrolling,Ne=q==="horizontal"||Re==="horizontal",et=Ne?this._onScrollHorizontal:this._onScrollVertical,st=this._getRangeToRender(),ft=st[0],Ze=st[1],tt=[];if(ne>0)for(var lt=ft;lt<=Ze;lt++)tt.push((0,Vw.createElement)(P,{data:pe,key:Ie(lt,pe),index:lt,isScrolling:Qe?Ue:void 0,style:this._getItemStyle(lt)}));var ze=n(this.props,this._instanceProps);return(0,Vw.createElement)(Te||Ee||"div",{className:k,onScroll:et,ref:this._outerRefSetter,style:Pn({position:"relative",height:U,width:qe,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:q},Ye)},(0,Vw.createElement)(X||ee||"div",{children:tt,ref:H,style:{height:Ne?"100%":ze,pointerEvents:Ue?"none":void 0,width:Ne?ze:"100%"}}))},T._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var L=this.props.itemCount;if(L>0){var P=this._getRangeToRender(),k=P[0],q=P[1],U=P[2],H=P[3];this._callOnItemsRendered(k,q,U,H)}}if(typeof this.props.onScroll=="function"){var X=this.state,ee=X.scrollDirection,ne=X.scrollOffset,pe=X.scrollUpdateWasRequested;this._callOnScroll(ee,ne,pe)}},T._getRangeToRender=function(){var L=this.props,P=L.itemCount,k=L.overscanCount,q=this.state,U=q.isScrolling,H=q.scrollDirection,X=q.scrollOffset;if(P===0)return[0,0,0,0];var ee=a(this.props,X,this._instanceProps),ne=u(this.props,ee,X,this._instanceProps),pe=!U||H==="backward"?Math.max(1,k):1,ue=!U||H==="forward"?Math.max(1,k):1;return[Math.max(0,ee-pe),Math.max(0,Math.min(P-1,ne+ue)),ee,ne]},b}(Vw.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},t}var k2r=function(t,r){var n=t.children,o=t.direction,i=t.height,a=t.layout,u=t.innerTagName,p=t.outerTagName,h=t.width,g=r.instance;if(0)var x};var U6=P2r({getItemOffset:function(t,r){var n=t.itemSize;return r*n},getItemSize:function(t,r){var n=t.itemSize;return n},getEstimatedTotalSize:function(t){var r=t.itemCount,n=t.itemSize;return n*r},getOffsetForIndexAndAlignment:function(t,r,n,o,i,a){var u=t.direction,p=t.height,h=t.itemCount,g=t.itemSize,x=t.layout,b=t.width,T=u==="horizontal"||x==="horizontal",A=T?b:p,L=Math.max(0,h*g-A),P=Math.min(L,r*g),k=Math.max(0,r*g-A+g+a);switch(n==="smart"&&(o>=k-A&&o<=P+A?n="auto":n="center"),n){case"start":return P;case"end":return k;case"center":{var q=Math.round(k+(P-k)/2);return q<Math.ceil(A/2)?0:q>L+Math.floor(A/2)?L:q}case"auto":default:return o>=k&&o<=P?o:o<k?k:P;}},getStartIndexForOffset:function(t,r){var n=t.itemCount,o=t.itemSize;return Math.max(0,Math.min(n-1,Math.floor(r/o)))},getStopIndexForStartIndex:function(t,r,n){var o=t.direction,i=t.height,a=t.itemCount,u=t.itemSize,p=t.layout,h=t.width,g=o==="horizontal"||p==="horizontal",x=r*u,b=g?h:i,T=Math.ceil((b+n-x)/u);return Math.max(0,Math.min(a-1,r+T-1))},initInstanceProps:function(t){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(t){var r=t.itemSize}});var Q$e=Z(we());function R2r(e){var t=e.lastRenderedStartIndex,r=e.lastRenderedStopIndex,n=e.startIndex,o=e.stopIndex;return!(n>r||o<t)}function j2r(e){for(var t=e.isItemLoaded,r=e.itemCount,n=e.minimumBatchSize,o=e.startIndex,i=e.stopIndex,a=[],u=null,p=null,h=o;h<=i;h++){var g=t(h);g?p!==null&&(a.push(u,p),u=p=null):(p=h,u===null&&(u=h))}if(p!==null){for(var x=Math.min(Math.max(p,u+n-1),r-1),b=p+1;b<=x&&!t(b);b++)p=b;a.push(u,p)}if(a.length)for(;a[1]-a[0]+1<n&&a[0]>0;){var T=a[0]-1;if(!t(T))a[0]=T;else break}return a}var q2r=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},z2r=function(){function e(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),F2r=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},J$e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:e},U2r=function(e){F2r(t,e);function t(){var r,n,o,i;q2r(this,t);for(var a=arguments.length,u=Array(a),p=0;p<a;p++)u[p]=arguments[p];return i=(n=(o=J$e(this,(r=t.__proto__||Object.getPrototypeOf(t)).call.apply(r,[this].concat(u))),o),o._lastRenderedStartIndex=-1,o._lastRenderedStopIndex=-1,o._memoizedUnloadedRanges=[],o._onItemsRendered=function(h){var g=h.visibleStartIndex,x=h.visibleStopIndex;o._lastRenderedStartIndex=g,o._lastRenderedStopIndex=x,o._ensureRowsLoaded(g,x)},o._setRef=function(h){o._listRef=h},n),J$e(o,i)}return z2r(t,[{key:"resetloadMoreItemsCache",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;this._memoizedUnloadedRanges=[],n&&this._ensureRowsLoaded(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var n=this.props.children;return n({onItemsRendered:this._onItemsRendered,ref:this._setRef})}},{key:"_ensureRowsLoaded",value:function(n,o){var i=this.props,a=i.isItemLoaded,u=i.itemCount,p=i.minimumBatchSize,h=p===void 0?10:p,g=i.threshold,x=g===void 0?15:g,b=j2r({isItemLoaded:a,itemCount:u,minimumBatchSize:h,startIndex:Math.max(0,n-x),stopIndex:Math.min(u-1,o+x)});(this._memoizedUnloadedRanges.length!==b.length||this._memoizedUnloadedRanges.some(function(T,A){return b[A]!==T}))&&(this._memoizedUnloadedRanges=b,this._loadUnloadedRanges(b))}},{key:"_loadUnloadedRanges",value:function(n){for(var o=this,i=this.props.loadMoreItems||this.props.loadMoreRows,a=function(h){var g=n[h],x=n[h+1],b=i(g,x);b!=null&&b.then(function(){if(R2r({lastRenderedStartIndex:o._lastRenderedStartIndex,lastRenderedStopIndex:o._lastRenderedStopIndex,startIndex:g,stopIndex:x})){if(o._listRef==null)return;typeof o._listRef.resetAfterIndex=="function"?o._listRef.resetAfterIndex(g,!0):(typeof o._listRef._getItemStyleCache=="function"&&o._listRef._getItemStyleCache(-1),o._listRef.forceUpdate())}})},u=0;u<n.length;u+=2)a(u)}}]),t}(Q$e.PureComponent),eYe=U2r;var lA=Z(we(),1);var B6=Z(xt(),1);var tYe=({onClick:e,sortOrder:t,type:r})=>{let n=()=>{e(r)},o=a=>{a.keyCode===13&&n()},i=fe(`mapsearch-${r}`)===""?fe(r):fe(`mapsearch-${r}`);return lA.default.createElement("div",{className:Et("inner-col",r)},lA.default.createElement("div",{className:Et("sort-element",r,t),onClick:n,onKeyDown:o,tabIndex:0},i,lA.default.createElement("span",{className:"caret-container"},lA.default.createElement("span",{className:"caret caret-reversed"}))))};tYe.propTypes={onClick:B6.default.func,sortOrder:B6.default.string,type:B6.default.string};var rYe=tYe;var BYe=Z(we(),1);var dA=Z(we(),1);var Qn=Z(we(),1),nc=Z(xt(),1);var pA=Z(qre(),1);var NYe=(e,t)=>e.findIndex(r=>r.getId()===t.getId())!==-1,zIr="http://www.deutschefotothek.de/images/noimage/image120.jpg",fA=e=>e.getType()===Cn.VECTOR_MAP?hr.getSettings().FALLBACK_THUMBNAIL:zIr,$6=e=>{let t=e.getMetadata(it.thumbnailUrl);return!Le(t)||t===""?fA(e):t.replace("http:","")};var OYe=({children:e,data:t,index:r,onClick:n,onMouseEnter:o,onMouseLeave:i,style:a})=>{var pe;let{direction:u,maps:p}=t,h=(pe=p[r])!=null?pe:c1,g=ht(_n),[x,b]=(0,Qn.useState)(!1),T=(0,Qn.useMemo)(()=>$6(h),[h]),A=(0,Qn.useMemo)(()=>fA(h),[h]),L=()=>{n(h)},P=ue=>{ue.key==="Enter"&&L()},k=(0,Qn.useCallback)(()=>{T!==""&&T!==A&&b(!0)},[T,A]);(0,Qn.useEffect)(()=>{b(!1)},[h.getId()]);let q=h===c1,U=NYe(g,h)&&!q,H=h.getMetadata(it.mapScale)==="0"||h.getMetadata(it.mapScale)===0?fe("mapsearch-listelement-unknown"):`1:${h.getMetadata(it.mapScale)}`,X=parseInt(h.getMetadata(it.timePublished),0),ee=h.getMetadata(it.type)===Cn.MOSAIC_MAP,ne=h.getMetadata(it.type)===Cn.VECTOR_MAP;return Qn.default.createElement("li",{tabIndex:0,style:a,className:Et("vkf-mapsearch-record",h.getMetadata(it.type),U&&"selected",u,q&&"loading"),id:h.getMetadata(it.id),onClick:q?void 0:L,onKeyDown:q?void 0:P,onMouseEnter:o,onMouseLeave:i},e,Qn.default.createElement("span",{className:"data-col time"},isNaN(X)?"":X),Qn.default.createElement("span",{className:"data-col title"},h.getMetadata(it.title)),Qn.default.createElement("span",{className:"data-col time"},"1"),Qn.default.createElement("div",{className:"view-item"},Qn.default.createElement("span",{className:"thumbnail",href:"#"},q?Qn.default.createElement(pA.default.default,{height:"calc(100% - 6px)"}):Qn.default.createElement(Qn.default.Fragment,null,Qn.default.createElement("img",{alt:`Thumbnail Image of Map ${h.getMetadata(it.title)} ${h.getMetadata(it.timePublished)}`,onError:k,src:x?A:T}),ee&&Qn.default.createElement("span",{className:Et("mosaic-badge",U&&"selected")},fe("mosaic-badge-title")),ne&&Qn.default.createElement("span",{className:Et("vector-badge",U&&"selected")},fe("vector-badge-title"))),U&&Qn.default.createElement("span",{className:"badge selected-badge"},Qn.default.createElement("span",{className:"glyphicon glyphicon-ok"})," ")),Qn.default.createElement("div",{className:"overview"},Qn.default.createElement("h2",null,q?Qn.default.createElement(pA.default.default,null):h.getMetadata(it.title)),Qn.default.createElement("div",{className:"details"},Qn.default.createElement("div",{className:"timestamp"},q?Qn.default.createElement(pA.default.default,null):`${fe("mapsearch-listelement-time")} ${h.getMetadata(it.timePublished)}`),!ne&&Qn.default.createElement("div",{className:"scale"},q?Qn.default.createElement(pA.default.default,null):`${fe("mapsearch-listelement-scale")} ${H}`),!h.getMetadata(it.hasGeoReference)&&Qn.default.createElement("div",{className:"georeference"},fe("mapsearch-listelement-no-georef"))))))};OYe.propTypes={children:nc.default.element,data:nc.default.shape({direction:nc.default.oneOf(["horizontal","vertical"]),feature:nc.default.object,is3d:nc.default.bool,maps:nc.default.object,selected:nc.default.bool}),onClick:nc.default.func,onMouseEnter:nc.default.func,onMouseLeave:nc.default.func,index:nc.default.number,style:nc.default.object};var zre=OYe;var LYe=e=>{var p;let{data:t,index:r}=e,{maps:n}=t,o=ht(yr),i=(p=n[r])!=null?p:c1,a=(0,dA.useCallback)(()=>{Le(o)&&LQ(o,i.getPreviewFeature())},[o,i]),u=(0,dA.useCallback)(()=>{Le(o)&&LQ(o,{type:"FeatureCollection",features:[]})},[o,i]);return dA.default.createElement(zre,Se({onMouseEnter:a,onMouseLeave:u},e))};LYe.propTypes=Se({},zre.propTypes);var Fre=LYe;var PYe=Z(mv(),1);var FIr=e=>At(void 0,null,function*(){var t;try{let r=yield PYe.default.get(`${e}/tilemapresource.xml`),n=new DOMParser().parseFromString(r.data,"text/xml"),o=n.getElementsByTagName("BoundingBox")[0],i=[o.getAttribute("minx"),o.getAttribute("miny"),o.getAttribute("maxx"),o.getAttribute("maxy")].map(parseFloat),a=n.getElementsByTagName("TileSet"),u=(t=parseInt(n.getElementsByTagName("TileFormat")[0].getAttribute("width")))!=null?t:256;return{bounds:i,maxZoom:a.length-1,tileSize:u}}catch(r){return console.error("Error fetching or parsing XML:",r),null}}),Hw=e=>At(void 0,null,function*(){let t=e.getMetadata(it.tmsUrls),r=e.getMetadata(it.onlineResources).find(i=>i.type==="WMS").url,n=Array.isArray(t)&&t.length>0,o;if(n){let{maxZoom:i,bounds:a,tileSize:u}=yield FIr(t[0]);o={bounds:a,tileSize:u,maxzoom:i,tiles:t.map(p=>`${p}/{z}/{x}/{y}.png`),scheme:"tms"}}else o={tiles:(yield M6(r))[0].urls};return o});var kYe=(e,t)=>At(void 0,null,function*(){return(yield hr.getGeoreferenceApiClient().post("/vector_maps/",Se({geojson:e},t))).data.id}),RYe=(e,t,r,n)=>At(void 0,null,function*(){let o=hr.getGeoreferenceApiClient(),i=`/vector_maps/${e}`;return(yield o.patch(i,{geojson:t,metadata:r,current_version:n})).data.version}),Ww=e=>At(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.get(r)).data}),jYe=e=>At(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}`;return(yield t.delete(r)).data}),qYe=e=>At(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/versions`;return(yield t.get(r)).data}),zYe=(e,t)=>At(void 0,null,function*(){let r=hr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/versions/${t}`;return(yield r.get(n)).data}),FYe=e=>At(void 0,null,function*(){let t=hr.getGeoreferenceApiClient(),r=`/vector_maps/${e}/roles`;return(yield t.get(r)).data}),UYe=(e,t)=>At(void 0,null,function*(){let r=hr.getGeoreferenceApiClient(),n=`/vector_maps/${e}/roles`;return(yield r.patch(n,Se({},t))).data});var UIr=()=>Or(({snapshot:e,set:t})=>r=>At(void 0,null,function*(){let n=yield e.getPromise(_n),o=yield e.getPromise(yr);t($s,void 0);let i=n.find(u=>u.getId()===r.getId());if(i){t(_n,n.filter(u=>u.getId()!==r.getId())),i.removeMapLibreLayers(o);return}if(r.getMetadata(it.type)===Cn.VECTOR_MAP){let u=yield Ww(r.getMetadata(it.vectorMapId));r.updateMetadata(it.userRole,u[it.userRole]),r.updateMetadata(it.version,u[it.version]),r.setGeoJson(u.geojson),r.addLayerToMap(o),t(_n,p=>p.concat(r))}else{let u=yield Hw(r);r.addLayerToMap(o,{sourceSettings:u}),t(_n,p=>p.concat(r))}})),VYe=e=>{let t=UIr();return BYe.default.createElement(Fre,Se({onClick:t},e))};VYe.propTypes=Se({},Fre.propTypes);var GYe=VYe;var BIr=["map_scale","time_published","title","georeference"],c1=new qh({metadata:{has_georeference:!0,map_scale:"0",thumb_url:"",time_published:"",title:"Loading"}}),Y6=({direction:e="vertical",itemSize:t=110,ListItemComponent:r=GYe,minimumBatchSize:n,onFetchResults:o,onUpdateSortType:i,renderHeader:a=!0,searchResultDescriptor:{itemCount:u,id:p},sortSettings:h})=>{let{activeType:g,sortOrder:x}=h,b=ht(g9e),[T,A]=(0,Yi.useState)({}),L=(0,Yi.useRef)(!1),P=(0,Yi.useRef)(),k=(0,Yi.useRef)(),{height:q,width:U}=YM(k),H=(0,Yi.useCallback)(ee=>!L.current&&T[ee]!==void 0&&T[ee]!==c1,[T]),X=(0,Yi.useCallback)((ee,ne)=>{if(ee!==void 0&&ne!==void 0){let pe=ne-ee+1;return o(ee,pe).then(ue=>{ue&&A(Ie=>{let Re=L.current?{}:Object.assign({},Ie);return L.current=!1,ue.forEach((Te,Ee)=>{Re[ee+Ee]=Te}),Re})})}},[o]);return(0,Yi.useEffect)(()=>{c1.updateMetadata("title",fe("mapsearch-listelement-loading"))},[]),(0,Yi.useEffect)(()=>{L.current=!0,P.current.resetloadMoreItemsCache(!0)},[p]),Yi.default.createElement("div",{className:Et("vkf-mapsearch-result-list",e)},a&&Yi.default.createElement("div",{className:"list-header"},Yi.default.createElement("strong",{className:"list-label"},fe("mapsearch-sorting"),":"),Yi.default.createElement("div",{className:"inner-columns"},BIr.map(ee=>Yi.default.createElement(rYe,{key:ee,onClick:i,sortOrder:g===ee?x:"",type:ee})))),Yi.default.createElement("div",{className:"mapsearch-contentlist-container",ref:k},Yi.default.createElement(eYe,{isItemLoaded:H,itemCount:u,loadMoreItems:X,minimumBatchSize:n,ref:P},({onItemsRendered:ee,ref:ne})=>Yi.default.createElement(U6,{height:q,innerElementType:"ul",itemCount:u,itemSize:t,itemData:{direction:e,maps:T,is3d:b},layout:e,onItemsRendered:ee,ref:ne,width:U},r))))};Y6.propTypes={direction:xu.default.oneOf(["horizontal","vertical"]),itemSize:xu.default.number,minimumBatchSize:xu.default.number,ListItemComponent:xu.default.elementType,renderHeader:xu.default.bool,onFetchResults:xu.default.func,onUpdateSortType:xu.default.func,searchResultDescriptor:xu.default.shape({id:xu.default.number,itemCount:xu.default.number}),sortSettings:xu.default.shape({activeType:xu.default.string,sortOrder:xu.default.string})};var VIr="title",hA={ASCENDING:"ascending",DESCENDING:"descending"},HYe=o=>{var i=o,{customQuery:e,DataProvider:t,enableOverlayLayer:r=!0}=i,n=En(i,["customQuery","DataProvider","enableOverlayLayer"]);let[a,u]=(0,rm.useState)({activeType:VIr,sortOrder:hA.ASCENDING}),{activeType:p,sortOrder:h}=a,g=b=>{let T=b===p&&h===hA.ASCENDING?hA.DESCENDING:hA.ASCENDING;u({sortOrder:T,activeType:b})};return rm.default.createElement(rm.Fragment,null,r&&rm.default.createElement(J9e,{sortSettings:a}),rm.default.createElement(t,{customQuery:e,renderConsumer:b=>rm.default.createElement(Y6,Se(Se({onUpdateSortType:g,sortSettings:a},n),b)),sortSettings:a}))};HYe.propTypes=Se({DataProvider:Ure.default.elementType.isRequired,enableOverlayLayer:Ure.default.bool},Y6.propTypes);var Z6=HYe;var Vre=Z(we(),1),Gre=Z(xt(),1);var Bre=Z(we(),1),K6=Z(xt(),1);var WYe=({name:e,color:t,size:r})=>Bre.default.createElement("svg",{viewBox:"0 0 24 24",className:`icon ${e}`,fill:t,width:r,height:r},Bre.default.createElement("use",{xlinkHref:`${hr.getSettings().ICON_SPRITE}#${e}`}));WYe.propTypes={name:K6.default.string.isRequired,color:K6.default.string,size:K6.default.number};var Qs=WYe;var $Ye=({onClick:e,isOpen:t})=>{let r=ht(Gc);return Vre.default.createElement("button",{className:Et("vkf-toggle-facets",r.facets.length>0&&"active"),onClick:e,title:fe(`mapsearch-facetedsearch-${t?"close":"open"}`)},Vre.default.createElement(Qs,{name:"icon-filter"}))};$Ye.propTypes={isOpen:Gre.default.bool,onClick:Gre.default.func};var X6=$Ye;var cd=Z(we(),1);var GIr=()=>cd.default.createElement("div",{className:"lds-roller"},cd.default.createElement("div",null),cd.default.createElement("div",null),cd.default.createElement("div",null),cd.default.createElement("div",null),cd.default.createElement("div",null),cd.default.createElement("div",null),cd.default.createElement("div",null),cd.default.createElement("div",null)),J6=GIr;var el=Z(we(),1),Lv=Z(xt(),1);var $re=Z(mv(),1);var HIr=function(e){let t=[],r={bool:{should:t}};for(let n=0;n<e.length;n++){let o=e[n],i={term:{}};i.term[o.key]=o.value.toLowerCase(),t.push(i)}return r},YYe=function(e){return{aggs:{summary:{stats:{field:e}}}}},ZYe=function(e,t,r,n,o,i,a,u){return{query:{bool:{filter:[{range:{[e]:{gte:t[0],lte:t[1]}}},{geo_shape:{[r]:{relation:"intersects",shape:{type:"envelope",coordinates:n}}}},HIr(a),{term:{has_georeference:!0}},...(u||[])],must:[{match_all:{}}]}},sort:{[o]:{order:i}}}};var Q6={height:15,width:15},KYe={height:15,width:0},Hre={width:340},Wre={width:340},XYe=(e,t)=>{let{map:r}=e,n,o,i,a;return t===pu.VERTICAL?(n=0,o=r.height,i=r.width,a=0):(n=0+Hre.width+Q6.width,o=r.height-KYe.height-Q6.height,i=r.width-Wre.width-Q6.width,a=KYe.height+Q6.height),[[n,o],[n,a],[i,o],[i,a]]},JYe=(e,t=[[-180,85.06],[180,-85.06]])=>{let[[r,n],[o,i]]=e,[[a,u],[p,h]]=t;return[[Math.max(a,r),Math.min(n,u)],[Math.min(p,o),Math.max(i,h)]]};var QYe=Z($M(),1),eZe=({customQuery:e,minimumBatchSize:t=20,renderConsumer:r,sortSettings:n})=>{let{activeType:o,sortOrder:i}=n,a=ht(mk),{facets:u}=ht(Gc),p=ht(Yb),h=ht(yr),[g,x]=(0,el.useState)(void 0),b=Mr(gk),T=Mr(Zb),[A,L]=On(_v),[P,k]=On(yv),[q,U]=(0,el.useState)({itemCount:10,id:Date.now()}),X=hr.getSettings().API_SEARCH,ee=(0,el.useCallback)(Re=>{let Te=i==="ascending"?"asc":"desc",Ee=JYe([[Re[0],Re[3]],[Re[2],Re[1]]]);return ZYe("time_published",[`${P[0]}-01-01`,`${P[1]}-12-31`],"geometry",Ee,o,Te,u,e)},[u,o,i,P]),ne=(0,el.useCallback)((Re,Te,Ee=!1)=>{if(g===void 0)return b(!1),new Promise(qe=>qe([]));let Ye=ee(g,"ESPG:4326"),Qe=X+"/_search?from="+Re+"&size="+Te;return b(!0),$re.default.post(Qe,Ye).then(qe=>{if(qe.status===200){let Ue=qe.data;return Ee?Ue:iUe(Ue.hits.hits)}}).catch(qe=>{console.warn(qe)}).finally(()=>{b(!1)})},[ee,g]),pe=(0,el.useCallback)(()=>{ne(0,0,!0).then(Re=>{let Te=Re.hits.total.value;T(Te),U({itemCount:Te,id:Date.now()})})},[ne]),ue=b9e(pe,30),Ie=(0,el.useCallback)(()=>{if(Le(h)){let Re=XYe(a,p),Te=new QYe.LngLatBounds;Re.forEach(Ye=>{let Qe=h.unproject(Ye);Te.extend(Qe)});let Ee=Te.toArray().flat();(g===void 0||!tA(Ee,g))&&x(Ee)}},[h,g,a]);return(0,el.useEffect)(()=>{if(Le(h))return h.on("moveend",Ie),()=>{h.off("moveend",Ie)}},[h,Ie]),(0,el.useEffect)(()=>{ue()},[u,pe,g,o,i,P]),(0,el.useEffect)(()=>{Ie()},[a,h]),(0,el.useEffect)(()=>{let Re=`${X}/_search?`,Te=YYe("time_published");$re.default.post(Re,Te,{}).then(Ee=>{if(Ee.status===200){let Ye=Ee.data,Qe=new Date(Ye.aggregations.summary.max),Ue=[new Date(Ye.aggregations.summary.min).getUTCFullYear(),Qe.getUTCFullYear()];(A===void 0||DQ===A||Ue[0]!==A[0]||Ue[1]!==A[1])&&(L(Ue),k(Ue))}})},[]),el.default.createElement(el.default.Fragment,null,r({minimumBatchSize:t,onRefresh:pe,onFetchResults:ne,searchResultDescriptor:q}))};eZe.propTypes={customQuery:Lv.default.array,minimumBatchSize:Lv.default.number,projection:Lv.default.string,renderConsumer:Lv.default.func,sortSettings:Lv.default.shape({activeType:Lv.default.string,sortOrder:Lv.default.string})};var eq=eZe;var tq=Z(xt(),1),tZe="EPSG:3857",rZe=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let[n,o]=On(Gc),[i,a]=(0,ua.useState)(!1),[u,p]=(0,ua.useState)(!1),h=ht(gk),g=ht(Zb),x=()=>{a(T=>!T)},b=()=>{o(m9e)};return(0,ua.useEffect)(()=>{p(h)},[h]),ua.default.createElement("div",{className:Et("mapsearch-container",i&&"facetedsearch-open")},ua.default.createElement("div",{className:"panel panel-default searchTablePanel"},ua.default.createElement("div",{className:"panel-heading"},ua.default.createElement("div",{className:"content"},ua.default.createElement("div",null,g===0?fe("mapsearch-found-no-maps"):`${g} ${fe("mapsearch-found-maps")}`),n.facets.length>0&&ua.default.createElement("button",{className:"remove-filter",onClick:b},ua.default.createElement(Qs,{name:"icon-filter"})),u&&ua.default.createElement("div",{className:"loading-spinner"},ua.default.createElement(J6,null)),ua.default.createElement(X6,{onClick:x,isOpen:i})),ua.default.createElement("div",{className:"facet-container"},ua.default.createElement(z6,{georeferenceMode:!1,mosaicMode:r}))),ua.default.createElement("div",{className:"panel-body"},ua.default.createElement(Z6,{customQuery:e,DataProvider:eq,ListItemComponent:t}))))};rZe.propTypes={customQuery:tq.default.array,MapSearchListItemComponent:tq.default.elementType,mosaicMode:tq.default.bool};var nZe=rZe;var oZe=e=>typeof e=="string"||e instanceof String,WIr=e=>{if(e===void 0||!Array.isArray(e)||e.length<2)return!1;let[t,r,...n]=e;if(isNaN(t)||isNaN(r)||n.some(o=>isNaN(o)))return!1;if(!iZe(t,r)){let[o,i]=z$e([t,r],tZe);return iZe(o,i)}return!0},iZe=(e,t)=>e<=180&&e>=-180&&t<=90&&t>=-90,aZe=e=>{let{activeBasemapId:t,is3dEnabled:r,oid:n,operationalLayers:o,mapView:i}=e,a=!0;return a&&(a=t===void 0||oZe(t)),a&&(a=r===void 0||typeof r=="boolean"),a&&(a=n===void 0||oZe(n)||Array.isArray(n)),a&&(a=o===void 0||Array.isArray(o)),a&&(a=i===void 0||$Ir(i,r)),a},$Ir=e=>{let t,{bearing:r,center:n,pitch:o,zoom:i}=e;return t=n===void 0||WIr(n),t&&(t=o===void 0||!isNaN(o)&&o>=0),t&&(t=r===void 0||!isNaN(r)),t&&(t=i===void 0||!isNaN(i)),t};var YIr=Object.values(Cn);function sZe(e){return At(this,null,function*(){let x=e,{id:t,type:r,isVisible:n,opacity:o}=x,i=En(x,["id","type","isVisible","opacity"]),u={visibility:n?"visible":"none",opacity:o};if(!YIr.includes(r))throw console.error("Unknown layer type: ",r),new Error(`Layer type "${r}" not supported`);if(r===Cn.LEGACY_GEOJSON)return{layer:JQ(i),settings:{layerSettings:u}};if(r===Cn.VECTOR_MAP&&!Le(t)){if(!Le(i.properties)||!Le(i.geojson))throw new Error("Cannot restore local vector map layer without geojson or properties");return{layer:JQ(i),settings:{layerSettings:u}}}if(!Le(t))throw new Error("Cannot restore remote layers with missing id");let p=yield pw(t),h=uC(t,p),g={layer:h,settings:{layerSettings:u}};if(r===Cn.HISTORIC_MAP&&(g.settings.sourceSettings=yield Hw(h)),r===Cn.VECTOR_MAP){let b=yield Ww(t);h.updateMetadata(it.userRole,b[it.userRole]),h.updateMetadata(it.version,b[it.version]),h.updateMetadata(it.vectorMapId,t),h.setGeoJson(b.geojson)}return g})}var QQ="vk_persistence_container",uZe=()=>{let e=ht(yr),[t,r]=(0,Pv.useState)(void 0),n=Mr(Vc),o=Mr(Gc),i=Mr(ji),a=Mr(_n),u=Mr(_v),p=Mr(yv),h=Mr(Ys),g=hr.getGeoreferenceApiClient(),[x]=$f(QQ,{operationalLayers:[],is3dEnabled:!1}),[b,T]=$f(n1,[]),A=(L,P="danger")=>{i({id:"persistence-controller",type:P,text:L})};return(0,Pv.useEffect)(()=>{let X=(0,lZe.parse)(location.search,{arrayFormat:"comma",parseNumbers:!0}),{b:L,v:P,oid:k,map_id:q,map_view_id:U}=X,H=En(X,["b","v","oid","map_id","map_view_id"]);if(U!==void 0){let ne=`/map_view/${U}`;g.get(ne).then(pe=>{let{map_view_json:ue}=pe.data,Te=JSON.parse(ue),{customBasemaps:Ie}=Te,Re=En(Te,["customBasemaps"]);Ie!==void 0&&Ie.length>0&&T(Ie.concat(b).filter((Ee,Ye,Qe)=>Qe.findIndex(qe=>qe.id===Ee.id)===Ye)),Re.mapView&&X7e(Re.mapView)&&(Re.mapView=wR(Re.mapView)),r(Re)})}else{let ee=eUe(P),ne={activeBasemapId:L,is3dEnabled:ee,cameraOptions:tUe(H),oid:$7e(k,q),featureIdentifier:rUe(H)},pe=!H7e(ne)||k!==void 0;r(pe?ne:x)}},[]),(0,Pv.useEffect)(()=>{if(t!==void 0){let{activeBasemapId:L,is3dEnabled:P,oid:k,operationalLayers:q,cameraOptions:U={},featureIdentifier:H}=t;if(!aZe(t)){A(fe("persistencecontroller-error-persistence-object"));return}try{if(L!==void 0&&n(L),e!==void 0){let X=Object.assign({},hr.getDefaultMapView(),U);if(e.jumpTo(X),X.legacy3dMapView){let ee=e.getCanvas(),ne=ee.height,pe=ee.width,ue=e.unproject([pe/2,ne*.3]);e.setCenter(ue),A(fe("persistencecontroller-deprecated-3d-map-view"),"warning")}if(P&&e.enableTerrain(),q!==void 0&&q.length>0&&k===void 0)try{let ee=[];for(let ne of q){let pe=sZe(ne);ee.push(pe)}Promise.all(ee).then(ne=>{for(let{layer:ue,settings:Ie}of ne)ue.addLayerToMap(e,Ie);let pe=ne.map(({layer:ue})=>ue);a(pe)}).catch(ne=>{throw new Error(ne)})}catch(ee){console.error(ee),A(fe("persistencecontroller-error-persistence-object"))}else if(k!==void 0){let ne=(Array.isArray(k)?k:[k]).map(pe=>aUe(pe));Promise.all(ne).then(pe=>{Promise.all(pe.map(ue=>ue.getType()===Cn.VECTOR_MAP?Ww(ue.getMetadata(it.vectorMapId)).then(Ie=>(ue.updateMetadata(it.userRole,Ie[it.userRole]),ue.updateMetadata(it.version,Ie[it.version]),ue.setGeoJson(Ie.geojson),{layer:ue})):new Promise(Ie=>Hw(ue).then(Re=>Ie({layer:ue,sourceSettings:Re}))))).then(ue=>{for(let{layer:Ie,sourceSettings:Re}of ue)Ie.addLayerToMap(e,{sourceSettings:Re});a(pe),Le(H)&&h(H)}),(U===void 0||Object.entries(U).length===0)&&W7e(e,pe)}).catch(pe=>{console.error(pe),A(fe("persistencecontroller-error-single-map"),"warning")})}}}catch(X){console.error(X),A(fe("persistencecontroller-error-persistence-object"))}}},[e,t]),(0,Pv.useEffect)(()=>{if(t!==void 0){let{searchOptions:L}=t;if(L!==void 0){let{facets:P,timeExtent:k,timeRange:q}=L;P!==void 0&&o(P),q!==void 0&&u(q),k!==void 0&&p(k)}}},[t]),Pv.default.createElement(nUe,null)};var UD=Z(we(),1),kat=Z(xt(),1);var lc=Z(we(),1);var Ti=Z(we(),1);var rp=Z(we(),1),Zre=Z(xt(),1);var $a=Z(we(),1),rq=Z(xt(),1);var ar=Z(we(),1),cZe=Z(xt(),1);var ZIr={addVectorMap:ar.default.createElement("svg",{width:"20",height:"16",viewBox:"0 0 20 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M5.3888 13.0958C5.31376 12.9926 5.21482 12.9091 5.10047 12.8525C4.19363 12.4067 3.42983 11.7158 2.89568 10.8581C2.36152 10.0003 2.0784 9.01005 2.0784 7.99957C2.0784 6.9891 2.36152 5.99884 2.89568 5.14109C3.42983 4.28334 4.19363 3.59241 5.10047 3.14666C5.21477 3.09032 5.3137 3.00711 5.3888 2.90416L5.4063 2.87916C5.51654 2.73062 5.57378 2.54941 5.56886 2.3645C5.56394 2.17959 5.49715 2.00167 5.37917 1.85921C5.26118 1.71674 5.09883 1.61797 4.91808 1.57868C4.73732 1.53939 4.54861 1.56186 4.38214 1.64249C3.19133 2.22398 2.18778 3.12823 1.48579 4.25223C0.783811 5.37623 0.411621 6.67479 0.411621 7.99999C0.411621 9.32519 0.783811 10.6237 1.48579 11.7477C2.18778 12.8717 3.19133 13.776 4.38214 14.3575C4.54869 14.4376 4.73726 14.4596 4.9178 14.4201C5.09833 14.3805 5.26043 14.2817 5.37826 14.1393C5.4961 13.997 5.56288 13.8192 5.56796 13.6345C5.57304 13.4498 5.51613 13.2686 5.4063 13.12L5.3888 13.0958Z",fill:"currentColor"}),ar.default.createElement("path",{d:"M12.4946 0.5C11.0113 0.5 9.56122 0.939867 8.32785 1.76398C7.09449 2.58809 6.13319 3.75943 5.56554 5.12987C4.99788 6.50032 4.84935 8.00832 5.13874 9.46318C5.42813 10.918 6.14244 12.2544 7.19133 13.3033C8.24022 14.3522 9.5766 15.0665 11.0315 15.3559C12.4863 15.6453 13.9943 15.4968 15.3648 14.9291C16.7352 14.3614 17.9065 13.4001 18.7307 12.1668C19.5548 10.9334 19.9946 9.48336 19.9946 8C19.9924 6.01155 19.2015 4.10518 17.7955 2.69914C16.3895 1.29309 14.4831 0.502206 12.4946 0.5ZM12.4946 13.8333C11.3409 13.8333 10.2131 13.4912 9.25381 12.8502C8.29452 12.2093 7.54685 11.2982 7.10533 10.2323C6.66382 9.16642 6.5483 7.99353 6.77338 6.86197C6.99846 5.73042 7.55404 4.69102 8.36984 3.87521C9.18565 3.0594 10.225 2.50383 11.3566 2.27875C12.4882 2.05367 13.661 2.16919 14.727 2.6107C15.7929 3.05221 16.7039 3.79989 17.3449 4.75917C17.9858 5.71846 18.328 6.84628 18.328 8C18.3262 9.54655 17.7111 11.0293 16.6175 12.1228C15.5239 13.2164 14.0412 13.8316 12.4946 13.8333Z",fill:"currentColor"}),ar.default.createElement("path",{d:"M15.6321 6.9583H13.7446C13.6893 6.9583 13.6364 6.93635 13.5973 6.89728C13.5582 6.85821 13.5363 6.80522 13.5363 6.74997V4.86247C13.5363 4.5862 13.4265 4.32125 13.2312 4.1259C13.0358 3.93055 12.7709 3.8208 12.4946 3.8208C12.2183 3.8208 11.9534 3.93055 11.758 4.1259C11.5627 4.32125 11.4529 4.5862 11.4529 4.86247V6.74997C11.4529 6.80522 11.431 6.85821 11.3919 6.89728C11.3528 6.93635 11.2999 6.9583 11.2446 6.9583H9.3571C9.08083 6.9583 8.81588 7.06805 8.62053 7.2634C8.42518 7.45875 8.31543 7.7237 8.31543 7.99997C8.31543 8.27623 8.42518 8.54119 8.62053 8.73654C8.81588 8.93189 9.08083 9.04163 9.3571 9.04163H11.2446C11.2999 9.04163 11.3528 9.06358 11.3919 9.10265C11.431 9.14172 11.4529 9.19471 11.4529 9.24997V11.1366C11.4529 11.4129 11.5627 11.6779 11.758 11.8732C11.9534 12.0686 12.2183 12.1783 12.4946 12.1783C12.7709 12.1783 13.0358 12.0686 13.2312 11.8732C13.4265 11.6779 13.5363 11.4129 13.5363 11.1366V9.24997C13.5363 9.19471 13.5582 9.14172 13.5973 9.10265C13.6364 9.06358 13.6893 9.04163 13.7446 9.04163H15.6321C15.9084 9.04163 16.1733 8.93189 16.3687 8.73654C16.564 8.54119 16.6738 8.27623 16.6738 7.99997C16.6738 7.7237 16.564 7.45875 16.3687 7.2634C16.1733 7.06805 15.9084 6.9583 15.6321 6.9583Z",fill:"currentColor"})),uploadVectorMap:ar.default.createElement("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M17.6616 10.5C13.9366 10.5 10.9116 13.525 10.9116 17.25C10.9116 20.975 13.9366 24 17.6616 24C21.3866 24 24.4116 20.975 24.4116 17.25C24.4116 13.525 21.3866 10.5 17.6616 10.5ZM17.6616 12C20.5596 12 22.9116 14.352 22.9116 17.25C22.9116 20.148 20.5596 22.5 17.6616 22.5C14.7636 22.5 12.4116 20.148 12.4116 17.25C12.4116 14.352 14.7636 12 17.6616 12ZM8.66162 19.5H2.66162C2.25062 19.5 1.91162 19.161 1.91162 18.75V2.25C1.91162 1.839 2.25062 1.5 2.66162 1.5H13.2896C13.4886 1.5 13.6796 1.579 13.8206 1.719L16.6936 4.591C16.8346 4.731 16.9136 4.922 16.9136 5.121V8.25C16.9136 8.664 17.2496 9 17.6636 9C18.0776 9 18.4136 8.664 18.4136 8.25V5.121C18.4136 4.524 18.1756 3.951 17.7536 3.529L14.8806 0.658C14.4586 0.237 13.8856 0 13.2896 0H2.66162C1.42762 0 0.411621 1.016 0.411621 2.25V18.75C0.411621 19.984 1.42762 21 2.66162 21H8.66162C9.07562 21 9.41162 20.664 9.41162 20.25C9.41162 19.836 9.07562 19.5 8.66162 19.5ZM8.88162 6.53L10.6006 8.25L8.88162 9.97C8.58862 10.262 8.58862 10.738 8.88162 11.03C9.17362 11.323 9.64962 11.323 9.94162 11.03L12.1916 8.78C12.4846 8.487 12.4846 8.013 12.1916 7.72L9.94162 5.47C9.64962 5.177 9.17362 5.177 8.88162 5.47C8.58862 5.762 8.58862 6.238 8.88162 6.53ZM5.88162 5.47L3.63162 7.72C3.33862 8.013 3.33862 8.487 3.63162 8.78L5.88162 11.03C6.17362 11.323 6.64962 11.323 6.94162 11.03C7.23462 10.738 7.23462 10.262 6.94162 9.97L5.22262 8.25L6.94162 6.53C7.23462 6.238 7.23462 5.762 6.94162 5.47C6.64962 5.177 6.17362 5.177 5.88162 5.47Z",fill:"currentColor"}),ar.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.7167 13.6361C18.2138 13.6361 18.6167 14.0391 18.6167 14.5361V19.8171C18.6167 20.3141 18.2138 20.7171 17.7167 20.7171C17.2197 20.7171 16.8167 20.3141 16.8167 19.8171L16.8167 14.5361C16.8167 14.0391 17.2197 13.6361 17.7167 13.6361Z",fill:"currentColor"}),ar.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.2572 17.1766C21.2572 17.6736 20.8543 18.0766 20.3572 18.0766H15.0763C14.5792 18.0766 14.1763 17.6736 14.1763 17.1766C14.1763 16.6795 14.5792 16.2766 15.0763 16.2766L20.3572 16.2766C20.8543 16.2766 21.2572 16.6795 21.2572 17.1766Z",fill:"currentColor"})),edit:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},ar.default.createElement("path",{d:"M16.667 9.573a.833.833 0 0 0-.834.834v7.083a.834.834 0 0 1-.833.833H2.5a.833.833 0 0 1-.833-.833V3.323A.833.833 0 0 1 2.5 2.49h8.333a.833.833 0 0 0 0-1.667H2.5a2.5 2.5 0 0 0-2.5 2.5V17.49a2.5 2.5 0 0 0 2.5 2.5H15a2.5 2.5 0 0 0 2.5-2.5v-7.083a.833.833 0 0 0-.833-.834ZM19.513.482a1.706 1.706 0 0 0-2.357 0l-.884.884a.417.417 0 0 0 0 .589l1.767 1.767a.417.417 0 0 0 .59 0l.884-.884a1.666 1.666 0 0 0 0-2.356Z"}),ar.default.createElement("path",{d:"m9.466 8.762 1.767 1.767a.417.417 0 0 0 .59 0l5.303-5.303a.417.417 0 0 0 0-.59l-1.769-1.769a.43.43 0 0 0-.589 0L9.466 8.172a.417.417 0 0 0 0 .59ZM8.624 9.363a.422.422 0 0 0-.303.25l-1.01 2.529a.416.416 0 0 0 .092.449.44.44 0 0 0 .45.092l2.525-1.01a.417.417 0 0 0 .14-.681L9 9.477a.417.417 0 0 0-.376-.114Z"})),"edit-inverse":ar.default.createElement("svg",{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M7.98408 8.41697C7.87252 8.52907 7.73909 8.61704 7.59208 8.67538L5.53 9.50197C5.31774 9.58487 5.08603 9.60464 4.86279 9.5589C4.63955 9.51315 4.4343 9.40384 4.27175 9.24413C4.11028 9.0827 3.99972 8.87744 3.95379 8.65377C3.90785 8.43011 3.92856 8.19789 4.01333 7.98588L4.83758 5.92497C4.89649 5.77794 4.9846 5.64439 5.09658 5.53238L8.53067 2.09772C8.55074 2.07732 8.56439 2.05149 8.56994 2.02342C8.57549 1.99535 8.57269 1.96627 8.5619 1.93977C8.5511 1.91327 8.53277 1.89052 8.50918 1.87432C8.48559 1.85812 8.45778 1.84919 8.42917 1.84863H1.81883C1.33645 1.84863 0.873821 2.04026 0.532724 2.38136C0.191627 2.72245 0 3.18508 0 3.66747V11.6971C-1.22907e-08 11.9359 0.0470497 12.1724 0.138462 12.393C0.229874 12.6136 0.363857 12.8141 0.532759 12.983C0.701661 13.1518 0.902173 13.2857 1.12284 13.3771C1.34351 13.4684 1.58001 13.5154 1.81883 13.5153H9.84842C10.0872 13.5154 10.3237 13.4684 10.5443 13.3771C10.765 13.2857 10.9654 13.1518 11.1343 12.9829C11.3031 12.8141 11.4371 12.6136 11.5284 12.393C11.6198 12.1723 11.6667 11.9358 11.6667 11.6971V5.08847C11.6666 5.05971 11.658 5.03161 11.642 5.0077C11.6261 4.98379 11.6033 4.96515 11.5768 4.95412C11.5502 4.94308 11.521 4.94014 11.4928 4.94568C11.4646 4.95121 11.4386 4.96497 11.4182 4.98522L7.98408 8.41697Z"}),ar.default.createElement("path",{d:"M10.8312 1.77357C10.7755 1.72081 10.7017 1.69141 10.625 1.69141C10.5483 1.69141 10.4745 1.72081 10.4188 1.77357L5.8612 6.33174C5.83328 6.35975 5.81127 6.39307 5.79645 6.42974L4.97162 8.49241C4.95035 8.54548 4.94514 8.60363 4.95666 8.65964C4.96817 8.71564 4.99589 8.76703 5.03637 8.80741C5.0775 8.84649 5.12878 8.87323 5.18437 8.88457C5.23997 8.89592 5.29763 8.89142 5.35078 8.87157L7.41287 8.04674C7.44959 8.03203 7.48293 8.01 7.51087 7.98199L12.069 3.42441C12.1237 3.36971 12.1544 3.29554 12.1544 3.2182C12.1544 3.14086 12.1237 3.06669 12.069 3.01199L10.8312 1.77357Z"}),ar.default.createElement("path",{d:"M13.513 1.98011C13.7317 1.76133 13.8546 1.46464 13.8546 1.15528C13.8546 0.845921 13.7317 0.549228 13.513 0.330445C13.2908 0.118342 12.9954 0 12.6882 0C12.381 0 12.0856 0.118342 11.8634 0.330445L11.2444 0.949362C11.2354 0.961013 11.2272 0.973295 11.2199 0.986112C11.1818 1.03444 11.1604 1.09377 11.1587 1.15528C11.1587 1.19365 11.1663 1.23164 11.181 1.26707C11.1957 1.30251 11.2173 1.33469 11.2444 1.36178L12.4834 2.59903C12.5324 2.64926 12.5983 2.67943 12.6683 2.68364C12.7383 2.68785 12.8074 2.66579 12.862 2.62178C12.8739 2.61508 12.8852 2.60747 12.8959 2.59903L13.513 1.98011Z"})),close:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 30 30"},ar.default.createElement("path",{d:"M0 0h30v30H0z"}),ar.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"scale(.98773 1.01212) rotate(45 -7.565 16.188)"}),ar.default.createElement("path",{stroke:"#fff",strokeWidth:"2",d:"M0-1h15.582",transform:"matrix(-.69843 .71568 -.69843 -.71568 19.883 9)"})),add:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 19 19"},ar.default.createElement("path",{d:"M.875 9A8.625 8.625 0 1 0 9.5.375 8.635 8.635 0 0 0 .875 9Zm3.75-.375a.75.75 0 0 1 .75-.75h2.813a.187.187 0 0 0 .187-.188V4.876a.75.75 0 0 1 .75-.75h.75a.75.75 0 0 1 .75.75v2.813a.188.188 0 0 0 .188.187h2.812a.75.75 0 0 1 .75.75v.75a.75.75 0 0 1-.75.75h-2.813a.188.188 0 0 0-.187.188v2.812a.75.75 0 0 1-.75.75h-.75a.75.75 0 0 1-.75-.75v-2.813a.188.188 0 0 0-.188-.187H5.376a.75.75 0 0 1-.75-.75v-.75Z"})),delete:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 18 18"},ar.default.createElement("path",{d:"M14.354 6.748H3.103a.375.375 0 0 0-.375.375V16.5a1.5 1.5 0 0 0 1.5 1.5h9.001a1.5 1.5 0 0 0 1.5-1.5V7.123a.375.375 0 0 0-.375-.375Zm-6.938 8.627a.563.563 0 1 1-1.125 0V9.749a.563.563 0 1 1 1.125 0v5.626Zm3.75 0a.563.563 0 1 1-1.125 0V9.749a.563.563 0 0 1 1.125 0v5.626ZM15.337 1.912l-3.498.675a.188.188 0 0 1-.22-.15l-.178-.92A1.875 1.875 0 0 0 9.244.033l-3.68.714A1.875 1.875 0 0 0 4.08 2.945l.178.92a.187.187 0 0 1-.15.22l-3.498.676a.75.75 0 0 0-.596.878.774.774 0 0 0 .88.595l14.729-2.85a.75.75 0 1 0-.285-1.474v.002Zm-9.788.75a.375.375 0 0 1 .3-.44l3.683-.712a.375.375 0 0 1 .438.3l.179.922a.188.188 0 0 1-.15.22l-4.052.776a.187.187 0 0 1-.22-.15l-.178-.916Z"})),discard:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},ar.default.createElement("path",{d:"m5 5 4.125 4.125M11 5l-6 6"}),ar.default.createElement("path",{d:"M14.667 0H1.333A1.333 1.333 0 0 0 0 1.333v13.334A1.333 1.333 0 0 0 1.333 16h9.334c.177 0 .346-.07.471-.195l4.667-4.667a.667.667 0 0 0 .195-.471V1.333A1.334 1.334 0 0 0 14.667 0ZM1.333 1.667a.333.333 0 0 1 .334-.334h12.666a.333.333 0 0 1 .334.334V10a.333.333 0 0 1-.334.333h-2.666a1.333 1.333 0 0 0-1.334 1.334v2.666a.333.333 0 0 1-.333.334H1.667a.333.333 0 0 1-.334-.334V1.667Z"})),save:ar.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16"},ar.default.createElement("path",{d:"M12.0122 5.20332C12.0936 5.10023 12.154 4.98212 12.1897 4.85572C12.2255 4.72932 12.236 4.59711 12.2207 4.46665C12.2054 4.33618 12.1645 4.21001 12.1004 4.09534C12.0364 3.98067 11.9503 3.87974 11.8472 3.79832C11.7441 3.7169 11.626 3.65658 11.4996 3.62081C11.3732 3.58504 11.241 3.57451 11.1106 3.58984C10.9801 3.60516 10.8539 3.64603 10.7392 3.71011C10.6246 3.77419 10.5236 3.86023 10.4422 3.96332L6.71356 8.68665C6.69905 8.70522 6.68075 8.72048 6.65989 8.73143C6.63902 8.74238 6.61606 8.74876 6.59254 8.75015C6.56902 8.75153 6.54547 8.7479 6.52346 8.73948C6.50145 8.73106 6.48149 8.71805 6.46489 8.70132L5.04823 7.28465C4.85963 7.1025 4.60702 7.0017 4.34483 7.00398C4.08263 7.00626 3.83182 7.11143 3.64641 7.29684C3.461 7.48224 3.35583 7.73306 3.35355 7.99525C3.35128 8.25745 3.45207 8.51005 3.63423 8.69865L5.44823 10.5133C5.61595 10.6772 5.81604 10.8042 6.0357 10.8863C6.25536 10.9684 6.48974 11.0037 6.72383 10.99C6.95792 10.9762 7.18656 10.9137 7.3951 10.8065C7.60365 10.6993 7.7875 10.5497 7.93489 10.3673L12.0122 5.20332Z"}),ar.default.createElement("path",{d:"M14.6667 0H1.33333C0.979711 0 0.640573 0.140476 0.390524 0.390524C0.140476 0.640573 0 0.979711 0 1.33333L0 14.6667C0 15.0203 0.140476 15.3594 0.390524 15.6095C0.640573 15.8595 0.979711 16 1.33333 16H10.6667C10.8435 16 11.013 15.9297 11.138 15.8047L15.8047 11.138C15.9297 11.013 16 10.8435 16 10.6667V1.33333C16 0.979711 15.8595 0.640573 15.6095 0.390524C15.3594 0.140476 15.0203 0 14.6667 0ZM1.33333 1.66667C1.33333 1.57826 1.36845 1.49348 1.43096 1.43096C1.49348 1.36845 1.57826 1.33333 1.66667 1.33333H14.3333C14.4217 1.33333 14.5065 1.36845 14.569 1.43096C14.6315 1.49348 14.6667 1.57826 14.6667 1.66667V10C14.6667 10.0884 14.6315 10.1732 14.569 10.2357C14.5065 10.2982 14.4217 10.3333 14.3333 10.3333H11.6667C11.313 10.3333 10.9739 10.4738 10.7239 10.7239C10.4738 10.9739 10.3333 11.313 10.3333 11.6667V14.3333C10.3333 14.4217 10.2982 14.5065 10.2357 14.569C10.1732 14.6315 10.0884 14.6667 10 14.6667H1.66667C1.57826 14.6667 1.49348 14.6315 1.43096 14.569C1.36845 14.5065 1.33333 14.4217 1.33333 14.3333V1.66667Z"})),caret:ar.default.createElement("svg",{viewBox:"0 0 28 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M12.9393 10.0607L14 11.1213L15.0607 10.0607L21.0607 4.06066L23.6213 1.5H20H8H4.37868L6.93934 4.06066L12.9393 10.0607Z",fill:"#00655A",stroke:"white",strokeWidth:"3"})),"export-geojson":ar.default.createElement("svg",{viewBox:"0 0 21 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M10.4136 1V16",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M5.91357 11.5L10.4136 16L14.9136 11.5",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M14.1636 4.74902H16.4116C17.2073 4.74902 17.9703 5.06509 18.5329 5.6277C19.0956 6.19031 19.4116 6.95337 19.4116 7.74902V20.499C19.4116 21.2947 19.0956 22.0577 18.5329 22.6203C17.9703 23.183 17.2073 23.499 16.4116 23.499H4.41162C3.61597 23.499 2.85291 23.183 2.2903 22.6203C1.72769 22.0577 1.41162 21.2947 1.41162 20.499V7.74902C1.41162 6.95337 1.72769 6.19031 2.2903 5.6277C2.85291 5.06509 3.61597 4.74902 4.41162 4.74902H6.66162",stroke:"#666666",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"user-roles":ar.default.createElement("svg",{viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("g",{clipPath:"url(#clip0_1491_11619)"},ar.default.createElement("path",{d:"M5.66626 2.74115C6.15948 3.25291 6.75085 3.65994 7.40499 3.9379C8.05913 4.21586 8.76261 4.35905 9.47336 4.35889C10.1932 4.3591 10.9056 4.2125 11.5668 3.92806",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M8.41156 7.54465C10.171 7.54465 11.5973 6.11835 11.5973 4.35892C11.5973 2.59949 10.171 1.17319 8.41156 1.17319C6.65213 1.17319 5.22583 2.59949 5.22583 4.35892C5.22583 6.11835 6.65213 7.54465 8.41156 7.54465Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M2.49536 14.8263C2.49536 13.2572 3.11869 11.7524 4.22822 10.6428C5.33776 9.5333 6.8426 8.90997 8.41172 8.90997C9.98084 8.90997 11.4857 9.5333 12.5952 10.6428C13.7048 11.7524 14.3281 13.2572 14.3281 14.8263",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),ar.default.createElement("defs",null,ar.default.createElement("clipPath",{id:"clip0_1491_11619"},ar.default.createElement("rect",{width:"16",height:"16",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),filter:ar.default.createElement("svg",{viewBox:"0 0 22 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M10.75 9.75C16.1348 9.75 20.5 7.73528 20.5 5.25C20.5 2.76472 16.1348 0.75 10.75 0.75C5.36522 0.75 1 2.76472 1 5.25C1 7.73528 5.36522 9.75 10.75 9.75Z",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M1 5.25C1.00123 7.44343 1.74225 9.57232 3.10325 11.2924C4.46425 13.0126 6.36565 14.2233 8.5 14.729V21C8.5 21.5967 8.73705 22.169 9.15901 22.591C9.58097 23.0129 10.1533 23.25 10.75 23.25C11.3467 23.25 11.919 23.0129 12.341 22.591C12.7629 22.169 13 21.5967 13 21V14.729C15.1343 14.2233 17.0358 13.0126 18.3967 11.2924C19.7577 9.57232 20.4988 7.44343 20.5 5.25",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),"metadata-panel":ar.default.createElement("svg",{viewBox:"0 0 17 18",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("g",{clipPath:"url(#clip0_1419_7239)"},ar.default.createElement("path",{d:"M12.2444 13.3538C12.7967 13.3538 13.2444 12.906 13.2444 12.3538C13.2444 11.8015 12.7967 11.3538 12.2444 11.3538C11.6921 11.3538 11.2444 11.8015 11.2444 12.3538C11.2444 12.906 11.6921 13.3538 12.2444 13.3538Z",fill:"currentColor"}),ar.default.createElement("path",{d:"M16.0896 11.4357C16.263 11.2498 16.3723 11.0132 16.4013 10.7606C16.4303 10.508 16.3774 10.2528 16.2506 10.0324C16.1237 9.8121 15.9296 9.63826 15.6966 9.53649C15.4636 9.43471 15.2041 9.41037 14.9562 9.46705L14.0155 9.68438C13.9412 9.70131 13.8631 9.6894 13.7972 9.65104C13.7312 9.61268 13.6823 9.55074 13.6602 9.47771L13.3775 8.54905C13.3044 8.30537 13.1546 8.09176 12.9505 7.93991C12.7463 7.78806 12.4986 7.70605 12.2442 7.70605C11.9898 7.70605 11.7421 7.78806 11.538 7.93991C11.3338 8.09176 11.1841 8.30537 11.1109 8.54905L10.8282 9.47771C10.806 9.55065 10.757 9.6125 10.6911 9.65083C10.6252 9.68916 10.5473 9.70115 10.4729 9.68438L9.53288 9.46638C9.28515 9.40991 9.02585 9.43436 8.79304 9.53613C8.56023 9.6379 8.36617 9.81162 8.23938 10.0318C8.11258 10.252 8.05971 10.507 8.08854 10.7595C8.11737 11.0119 8.22637 11.2485 8.39955 11.4344L9.05822 12.145C9.11026 12.2019 9.13913 12.2763 9.13913 12.3534C9.13913 12.4305 9.11026 12.5048 9.05822 12.5617L8.39955 13.271C8.22608 13.4569 8.11682 13.6936 8.08783 13.9461C8.05884 14.1987 8.11165 14.454 8.2385 14.6743C8.36535 14.8947 8.55955 15.0685 8.79254 15.1703C9.02553 15.272 9.28503 15.2964 9.53288 15.2397L10.4735 15.0224C10.548 15.0058 10.626 15.018 10.6919 15.0564C10.7577 15.0948 10.8067 15.1567 10.8289 15.2297L11.1115 16.157C11.1843 16.4011 11.334 16.6151 11.5382 16.7673C11.7423 16.9195 11.9902 17.0017 12.2449 17.0017C12.4996 17.0017 12.7474 16.9195 12.9516 16.7673C13.1558 16.6151 13.3054 16.4011 13.3782 16.157L13.6609 15.229C13.6827 15.1558 13.7315 15.0936 13.7975 15.0551C13.8635 15.0166 13.9417 15.0046 14.0162 15.0217L14.9569 15.239C15.2046 15.2955 15.4639 15.2711 15.6967 15.1693C15.9295 15.0675 16.1236 14.8938 16.2504 14.6736C16.3772 14.4534 16.4301 14.1984 16.4012 13.946C16.3724 13.6935 16.2634 13.457 16.0902 13.271L15.4316 12.561C15.3795 12.5041 15.3506 12.4298 15.3506 12.3527C15.3506 12.2756 15.3795 12.2013 15.4316 12.1444L16.0896 11.4357ZM12.2442 14.3537C11.8487 14.3537 11.462 14.2364 11.1331 14.0167C10.8042 13.7969 10.5478 13.4845 10.3965 13.1191C10.2451 12.7536 10.2055 12.3515 10.2826 11.9635C10.3598 11.5756 10.5503 11.2192 10.83 10.9395C11.1097 10.6598 11.4661 10.4693 11.854 10.3921C12.242 10.315 12.6441 10.3546 13.0096 10.506C13.375 10.6573 13.6874 10.9137 13.9072 11.2426C14.1269 11.5715 14.2442 11.9581 14.2442 12.3537C14.2442 12.8841 14.0335 13.3929 13.6584 13.7679C13.2834 14.143 12.7746 14.3537 12.2442 14.3537Z",fill:"currentColor"}),ar.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.09017 13.782C7.0974 13.8043 7.09994 13.8278 7.09762 13.8511C7.06412 14.1643 7.09939 14.481 7.20095 14.7791C7.2097 14.8042 7.2123 14.831 7.20855 14.8572C7.20479 14.8835 7.19479 14.9085 7.17938 14.9301C7.16396 14.9517 7.14359 14.9693 7.11997 14.9815C7.09635 14.9936 7.07017 14.9999 7.04362 14.9998H2.41162C1.88119 14.9998 1.37248 14.789 0.997407 14.414C0.622335 14.0389 0.411621 13.5302 0.411621 12.9998V3.99976C0.411621 3.46932 0.622335 2.96062 0.997407 2.58554C1.37248 2.21047 1.88119 1.99976 2.41162 1.99976H11.745C12.2754 1.99976 12.7841 2.21047 13.1592 2.58554C13.5342 2.96062 13.745 3.46932 13.745 3.99976V6.95976C13.745 6.99007 13.7368 7.01983 13.7212 7.0458C13.7056 7.07177 13.6831 7.09297 13.6563 7.10709C13.6293 7.12109 13.599 7.12756 13.5686 7.1258C13.5382 7.12404 13.5088 7.11412 13.4836 7.09709C13.4779 7.09315 13.4721 7.08924 13.4664 7.08536C13.1685 6.74277 12.7022 6.52222 12.178 6.52222C11.6135 6.52222 11.1161 6.77796 10.824 7.16642H9.74495C9.70075 7.16642 9.65836 7.18398 9.6271 7.21524C9.59585 7.24649 9.57829 7.28889 9.57829 7.33309V8.28442C9.57831 8.30728 9.57364 8.32989 9.56458 8.35087C9.55553 8.37186 9.54226 8.39076 9.52562 8.40642C9.50904 8.42206 9.48941 8.4341 9.46795 8.44178C9.4465 8.44947 9.42369 8.45264 9.40095 8.45109C9.19328 8.43777 8.98476 8.45393 8.78162 8.49909C8.75723 8.50469 8.73189 8.50466 8.70751 8.499C8.68314 8.49334 8.66038 8.4822 8.64095 8.46642C8.62099 8.45049 8.60495 8.43018 8.59409 8.40706C8.58322 8.38394 8.57782 8.35863 8.57829 8.33309V7.33309C8.57829 7.28889 8.56073 7.24649 8.52947 7.21524C8.49822 7.18398 8.45582 7.16642 8.41162 7.16642H5.74495C5.70075 7.16642 5.65836 7.18398 5.6271 7.21524C5.59585 7.24649 5.57829 7.28889 5.57829 7.33309V9.66842C5.57829 9.71263 5.59585 9.75502 5.6271 9.78627C5.65836 9.81753 5.70075 9.83509 5.74495 9.83509H6.99562C7.02151 9.83498 7.04707 9.84096 7.07023 9.85254C7.09339 9.86412 7.1135 9.88098 7.12895 9.90176C7.1445 9.92219 7.15511 9.94593 7.15997 9.97114C7.16483 9.99635 7.1638 10.0223 7.15695 10.0471C7.10109 10.2487 7.07459 10.4573 7.07829 10.6664C7.07847 10.7102 7.06133 10.7523 7.03061 10.7835C6.99989 10.8147 6.95808 10.8326 6.91429 10.8331H5.74495C5.70075 10.8331 5.65836 10.8506 5.6271 10.8819C5.59585 10.9132 5.57829 10.9556 5.57829 10.9998V13.4998C5.57829 13.544 5.59585 13.5864 5.6271 13.6176C5.65836 13.6489 5.70075 13.6664 5.74495 13.6664H6.93162C6.95502 13.6664 6.97815 13.6714 6.99951 13.6809C7.02088 13.6904 7.03999 13.7043 7.05562 13.7218C7.07118 13.7392 7.08294 13.7598 7.09017 13.782ZM4.52881 9.78427C4.56006 9.75302 4.57762 9.71063 4.57762 9.66642L4.57829 7.33309C4.57829 7.28889 4.56073 7.24649 4.52947 7.21524C4.49822 7.18398 4.45582 7.16642 4.41162 7.16642H1.91162C1.86742 7.16642 1.82503 7.18398 1.79377 7.21524C1.76251 7.24649 1.74495 7.28889 1.74495 7.33309V9.66642C1.74495 9.71051 1.76242 9.7528 1.79353 9.78404C1.82465 9.81528 1.86687 9.83291 1.91095 9.83309H4.41095C4.45516 9.83309 4.49755 9.81553 4.52881 9.78427ZM5.68097 6.15393C5.70127 6.16226 5.72301 6.16651 5.74495 6.16642H8.41162C8.45582 6.16642 8.49822 6.14886 8.52947 6.11761C8.56073 6.08635 8.57829 6.04396 8.57829 5.99976V3.49976C8.57829 3.45555 8.56073 3.41316 8.52947 3.3819C8.49822 3.35065 8.45582 3.33309 8.41162 3.33309H5.74495C5.72301 3.333 5.70127 3.33725 5.68097 3.34558C5.66067 3.35392 5.64222 3.36618 5.62667 3.38167C5.61112 3.39715 5.59879 3.41556 5.59037 3.43582C5.58195 3.45609 5.57762 3.47781 5.57762 3.49976V5.99976C5.57762 6.0217 5.58195 6.04343 5.59037 6.06369C5.59879 6.08396 5.61112 6.10236 5.62667 6.11784C5.64222 6.13333 5.66067 6.14559 5.68097 6.15393ZM12.2164 3.52835C12.0913 3.40333 11.9218 3.33309 11.745 3.33309H9.74495C9.70075 3.33309 9.65836 3.35065 9.6271 3.3819C9.59585 3.41316 9.57829 3.45555 9.57829 3.49976V5.99976C9.57829 6.04396 9.59585 6.08635 9.6271 6.11761C9.65836 6.14886 9.70075 6.16642 9.74495 6.16642H12.245C12.2892 6.16642 12.3315 6.14886 12.3628 6.11761C12.3941 6.08635 12.4116 6.04396 12.4116 5.99976V3.99976C12.4116 3.82294 12.3414 3.65338 12.2164 3.52835ZM4.41162 3.33309H2.41162C2.23481 3.33309 2.06524 3.40333 1.94022 3.52835C1.81519 3.65338 1.74495 3.82294 1.74495 3.99976V5.99976C1.74495 6.04384 1.76242 6.08613 1.79353 6.11737C1.82465 6.14861 1.86687 6.16625 1.91095 6.16642H4.41162C4.45582 6.16642 4.49822 6.14886 4.52947 6.11761C4.56073 6.08635 4.57829 6.04396 4.57829 5.99976V3.49976C4.57829 3.45555 4.56073 3.41316 4.52947 3.3819C4.49822 3.35065 4.45582 3.33309 4.41162 3.33309ZM1.74495 10.9998V12.9998C1.74495 13.1766 1.81519 13.3461 1.94022 13.4712C2.06524 13.5962 2.23481 13.6664 2.41162 13.6664H4.41162C4.45582 13.6664 4.49822 13.6489 4.52947 13.6176C4.56073 13.5864 4.57829 13.544 4.57829 13.4998V10.9998C4.57829 10.9556 4.56073 10.9132 4.52947 10.8819C4.49822 10.8506 4.45582 10.8331 4.41162 10.8331H1.91162C1.86742 10.8331 1.82503 10.8506 1.79377 10.8819C1.76251 10.9132 1.74495 10.9556 1.74495 10.9998Z",fill:"currentColor"})),ar.default.createElement("defs",null,ar.default.createElement("clipPath",{id:"clip0_1419_7239"},ar.default.createElement("rect",{width:"16",height:"18",fill:"currentColor",transform:"translate(0.411621 -0.000244141)"})))),clock:ar.default.createElement("svg",{viewBox:"0 0 18 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M5.71093 8.93449L3.56128 6.79363L1.41162 8.93449M3.42462 7.6044C3.46047 9.22172 4.09697 10.7684 5.21112 11.9456C6.32527 13.1228 7.838 13.847 9.45702 13.9782C11.076 14.1094 12.6864 13.6383 13.977 12.656C15.2676 11.6736 16.1468 10.2498 16.4447 8.6595C16.7427 7.06923 16.4382 5.42542 15.5901 4.04569C14.742 2.66597 13.4105 1.64826 11.8529 1.18921C10.2953 0.730155 8.62218 0.862343 7.15674 1.56023",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round",stroke:"currentColor"}),ar.default.createElement("path",{d:"M9.04295 8.08988L10.7639 5.10907",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"}),ar.default.createElement("path",{d:"M9.04288 8.0901L12.0237 9.81107",strokeWidth:"1.5",strokeLinecap:"round",stroke:"currentColor"})),"image-placeholder":ar.default.createElement("svg",{viewBox:"0 0 66 66",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M59.7357 1.99231H14.2691C11.9863 1.99231 10.1357 3.84287 10.1357 6.12564V51.5923C10.1357 53.8751 11.9863 55.7256 14.2691 55.7256H59.7357C62.0185 55.7256 63.8691 53.8751 63.8691 51.5923V6.12564C63.8691 3.84287 62.0185 1.99231 59.7357 1.99231Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M55.6025 63.9924H6.00247C4.90625 63.9924 3.85492 63.5569 3.07977 62.7817C2.30462 62.0066 1.86914 60.9553 1.86914 59.859V10.259",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M23.5662 18.5256C23.362 18.5262 23.1625 18.5872 22.9929 18.7011C22.8233 18.815 22.6913 18.9766 22.6135 19.1654C22.5357 19.3543 22.5157 19.562 22.5558 19.7622C22.596 19.9625 22.6947 20.1464 22.8393 20.2906C22.9839 20.4349 23.168 20.533 23.3684 20.5726C23.5688 20.6123 23.7764 20.5917 23.965 20.5134C24.1537 20.4351 24.3149 20.3026 24.4284 20.1328C24.5418 19.9629 24.6023 19.7632 24.6023 19.559C24.6023 19.2849 24.4934 19.0221 24.2997 18.8283C24.1059 18.6345 23.843 18.5256 23.569 18.5256",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"}),ar.default.createElement("path",{d:"M55.6022 43.3257L44.9382 27.2443C44.7512 26.9648 44.4986 26.7353 44.2026 26.5757C43.9066 26.4161 43.5761 26.3313 43.2398 26.3286C42.9036 26.3258 42.5717 26.4053 42.2732 26.5601C41.9746 26.7149 41.7184 26.9403 41.5269 27.2167L36.0295 35.07L32.6209 32.3448C32.3972 32.1661 32.1387 32.0359 31.862 31.9624C31.5853 31.8889 31.2963 31.8736 31.0134 31.9177C30.7305 31.9617 30.4598 32.0641 30.2186 32.2182C29.9773 32.3724 29.7707 32.575 29.6118 32.8132L22.5962 43.3257H55.6022Z",stroke:"#cccccc",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round"})),[Cl.POINT]:ar.default.createElement("svg",{viewBox:"0 0 10 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M5 0C3.67439 0.001577 2.40351 0.54425 1.46616 1.50897C0.528809 2.47369 0.00153226 3.78169 0 5.14601C0 8.69242 3.44105 11.9106 4.49526 12.8125C4.637 12.9337 4.81547 13 4.99974 13C5.18401 13 5.36247 12.9337 5.50421 12.8125C6.55684 11.9106 10 8.69134 10 5.14547C9.99833 3.78124 9.47099 2.47339 8.53366 1.50878C7.59632 0.544176 6.32552 0.00157672 5 0ZM5 7.85443C4.47952 7.85443 3.97073 7.69559 3.53797 7.39798C3.10521 7.10037 2.76792 6.67738 2.56874 6.18248C2.36956 5.68758 2.31745 5.143 2.41899 4.61762C2.52053 4.09224 2.77116 3.60964 3.13919 3.23086C3.50723 2.85208 3.97613 2.59413 4.4866 2.48962C4.99708 2.38512 5.5262 2.43875 6.00706 2.64375C6.48792 2.84874 6.89892 3.19589 7.18808 3.64129C7.47724 4.08669 7.63158 4.61033 7.63158 5.14601C7.63158 5.50168 7.56351 5.85388 7.43126 6.18248C7.29901 6.51108 7.10517 6.80965 6.86081 7.06115C6.61644 7.31265 6.32634 7.51216 6.00706 7.64827C5.68778 7.78438 5.34558 7.85443 5 7.85443Z",fill:"#999999"})),[Cl.LINE_STRING]:ar.default.createElement("svg",{viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M10 2L2 10",stroke:"#999999",strokeWidth:"1.5"}),ar.default.createElement("circle",{cx:"2",cy:"10",r:"2",fill:"#999999"}),ar.default.createElement("circle",{cx:"10",cy:"2",r:"2",fill:"#999999"})),[Cl.POLYGON]:ar.default.createElement("svg",{viewBox:"0 0 13 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ar.default.createElement("path",{d:"M1.50439 12.282L4.13685 5.51279L10.53 2.50427L9.77783 7.39312L9.0257 11.5298L1.50439 12.282Z",stroke:"#999999",strokeWidth:"1.5"}),ar.default.createElement("circle",{cx:"11",cy:"2",r:"2",fill:"#999999"}),ar.default.createElement("circle",{cx:"9",cy:"11",r:"2",fill:"#999999"}),ar.default.createElement("path",{d:"M4 12C4 13.1046 3.10457 14 2 14C0.89543 14 0 13.1046 0 12C0 10.8954 0.89543 10 2 10C3.10457 10 4 10.8954 4 12Z",fill:"#999999"}),ar.default.createElement("path",{d:"M6 5C6 6.10457 5.10457 7 4 7C2.89543 7 2 6.10457 2 5C2 3.89543 2.89543 3 4 3C5.10457 3 6 3.89543 6 5Z",fill:"#999999"}))},fZe=({name:e})=>{var t;return(t=ZIr[e])!=null?t:""};fZe.propTypes={name:cZe.default.string.isRequired};var pZe=fZe;var qr=pZe;var dZe=({data:e,index:t,style:r})=>{let n=e.features[t],{properties:o,geometry:i}=n,a=(0,$a.useCallback)(()=>{e.onFeatureClick(n.id)},[e.onFeatureClick,n.id]),{defaultTitle:u,defaultTime:p}=(0,$a.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultTime:fe("geojson-featureview-no-time")}),[]),h=(0,$a.useMemo)(()=>{let{type:b}=i;return b===Cl.MULTI_LINE_STRING?Cl.LINE_STRING:b===Cl.MULTI_POLYGON?Cl.POLYGON:b===Cl.MULTI_POINT?Cl.POINT:b===Cl.GEOMETRY_COLLECTION?Cl.POLYGON:Object.values(Cl).includes(b)?b:Cl.POLYGON},[i]),g=(0,$a.useMemo)(()=>{let b=o[ci.time];return Le(b)?ed(b)?Qu(b):fe("geojson-featureview-invalid-time"):p},[o[ci.time]]),x=(0,$a.useMemo)(()=>{var b;return(b=o[ci.title])!=null?b:u},[o[ci.title]]);return $a.default.createElement("li",{className:"geojson-feature-item-root",onClick:a,style:r},$a.default.createElement("div",{className:"geojson-feature-item-container"},$a.default.createElement("div",{className:"sub-headline"},$a.default.createElement("div",{className:`type-icon icon--${h}`},$a.default.createElement(qr,{name:h})),$a.default.createElement("div",{className:"type-text"},h)),$a.default.createElement("div",{className:"title"},x),$a.default.createElement("div",{className:"details"},fe("geojson-featureview-time")," ",g)))};dZe.propTypes={data:rq.default.object.isRequired,index:rq.default.number.isRequired,style:rq.default.object};var hZe=(0,$a.memo)(dZe);var mZe=hZe;var Zi={INITIAL:1,FILTER:2,EDIT:3},kv=en({key:"geoJsonLayerViewViewModeState",default:Zi.INITIAL}),Rv=en({key:"geoJsonLayerViewLayerState",default:null,dangerouslyAllowMutability:!0}),gZe=Tl({key:"geoJsonLayerViewFeaturesState",get:({get:e})=>{var r,n;let t=e(Rv);return e(Kb),(n=(r=t==null?void 0:t.getGeoJson())==null?void 0:r.features)!=null?n:[]},dangerouslyAllowMutability:!0}),$w=en({key:"geoJsonLayerViewTimeExtentFilterState",default:null}),Yre=Tl({key:"geoJsonLayerViewTimeRangeState",get:({get:e})=>{let r=e(gZe).map(({properties:i})=>new Date(i.time)).filter(i=>ed(i)).sort((i,a)=>i.valueOf()-a.valueOf());if(r.length<2)return[];let n=xR(aw(r[0])),o=xR(aw(r[r.length-1]));return n===o?[]:[n,o]}}),nq=Tl({key:"geoJsonLayerViewIsValidTimeRangeState",get:({get:e})=>e(Yre).length===2}),mA=Tl({key:"geoJsonLayerViewFilteredFeaturesState",get:({get:e})=>{let t=e(kv),r=e(gZe);if(t!==Zi.FILTER)return r;let n=r,o=e($w);if(o!==null){let[i,a]=o;n=n.filter(({properties:u})=>{let p=u.time,h=xR(aw(new Date(p)));return Number.isNaN(h)?!0:h>=i&&h<=a})}return n}}),vZe=Tl({key:"geoJsonLayerViewExistFilteredFeaturesState",get:({get:e})=>e(mA).length>0}),yZe=Tl({key:"geoJsonLayerViewMapFilters",get:({get:e})=>{let t=e(kv),r=e($w);return t!==Zi.FILTER||r===null?null:{timeExtent:r}}});var _Ze=({className:e,onFeatureClick:t})=>{let r=ht(mA),n=(0,rp.useMemo)(()=>({features:r,onFeatureClick:t}),[r,t]),o=(0,rp.useRef)(null),{height:i}=YM(o);return rp.default.createElement(rp.default.Fragment,null,rp.default.createElement("div",{className:e,ref:o},rp.default.createElement("div",{className:"geojson-layer-feature-list-container"},r.length===0&&rp.default.createElement("div",{className:"no-feature-container"},fe("geojsonlayerpanel-no-features")),r.length>0&&rp.default.createElement(U6,{height:i,overscanCount:3,innerElementType:"ul",itemData:n,itemCount:r.length,width:340,itemSize:110},mZe))))};_Ze.propTypes={className:Zre.default.string,onFeatureClick:Zre.default.func.isRequired};var xZe=_Ze;var bZe=xZe;var np=Z(we(),1),Yw=Z(xt(),1);var oq=Z(we(),1),nm=Z(xt(),1);var wZe=(0,oq.forwardRef)(function(t,r){let{children:n,className:o="",onClick:i,type:a="default",disabled:u=!1,title:p,buttonType:h,form:g}=t;return oq.default.createElement("button",{className:`vkf-button-${a} ${o}`,disabled:u,onClick:i,ref:r,title:p,type:h,form:g},n)});wZe.propTypes={children:nm.default.node,className:nm.default.string,onClick:nm.default.func,disabled:nm.default.bool,title:nm.default.string,type:nm.default.oneOf(["primary","default","delete","discard","edit","save"]),buttonType:nm.default.string,form:nm.default.string};var gA=wZe;var mn=gA;var EZe=({extraButton:e,isEditAllowed:t=!0,title:r,onCloseClick:n,onEditClick:o})=>{let i=(0,np.useMemo)(()=>!Le(o),[o]);return np.default.createElement("div",{className:"geojson-panel-header-root"},np.default.createElement("div",{className:"header-buttons"},Le(e)&&e,!i&&np.default.createElement(mn,{disabled:!t,className:"edit-button",onClick:o,type:"edit"},np.default.createElement(qr,{name:"edit"})),np.default.createElement(mn,{className:"close-button",onClick:n},np.default.createElement(qr,{name:"close"}))),np.default.createElement("div",{className:"header-info"},np.default.createElement("span",{className:"header-title"},r)))};EZe.propTypes={extraButton:Yw.default.node,isEditAllowed:Yw.default.bool,title:Yw.default.string.isRequired,onCloseClick:Yw.default.func.isRequired,onEditClick:Yw.default.func};var SZe=EZe;var fd=SZe;var XIr=Z(we(),1),JIr=Z(Si(),1),$Sn=Z(MX(),1);var Kre=Z(we(),1);var Xre=Z(we(),1);var iq=Z(we(),1);var Jre=Z(we(),1);var f1=hr;var Zw="vk2-admin",vA="vk2-editor",aq="owner",IZe="editor",sq=()=>{let e=f1.getUserRole();return e===Zw||e===vA},TZe=e=>{if(!Le(e.getMetadata(it.vectorMapId)))return!0;let r=e.getMetadata(it.userRole),n=f1.getUserRole();return n===Zw?!0:n===vA?r===IZe||r===aq:!1},lq=e=>{if(e===null)return!0;let{type:t,layerRole:r,id:n}=e;if(t===Hi.LOCAL)return!0;let i=f1.getUserRole();return i===Zw?!0:i===vA?r===aq||!Le(n):!1},MZe=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=f1.getUserRole();return n===Zw?!0:n===vA?(t===IZe||t===aq)&&Le(r):!1},yA=e=>{if(e===null)return!0;let{id:t}=e;return!!(f1.getUserRole()===Zw&&Le(t))},_A=e=>{if(e===null)return!0;let{layerRole:t,id:r}=e,n=f1.getUserRole();return n===Zw&&Le(r)?!0:n===vA?t===aq&&Le(r):!1};var Mo=Z(we(),1),vd=Z(xt(),1);function tl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CZe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,AP(n.key),n)}}function rl(e,t,r){return t&&CZe(e.prototype,t),r&&CZe(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function nl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gw(e,t)}function op(e){return op=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},op(e)}function Qre(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Qre=function(){return!!e})()}function AZe(e,t){if(t&&(no(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jr(e)}function ol(e){var t=Qre();return function(){var r,n=op(e);if(t){var o=op(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return AZe(this,r)}}var cne=Z(we());var ene={},QIr=[],eTr=function(t){QIr.push(t)};function tTr(e,t){if(0)var r}function rTr(e,t){if(0)var r}function nTr(){ene={}}function DZe(e,t,r){!t&&!ene[r]&&(e(!1,r),ene[r]=!0)}function uq(e,t){DZe(tTr,e,t)}function oTr(e,t){DZe(rTr,e,t)}uq.preMessage=eTr;uq.resetWarned=nTr;uq.noteOnce=oTr;var pd=uq;var NZe=Z(we()),iTr=function(t){var r,n,o=t.className,i=t.included,a=t.vertical,u=t.style,p=t.length,h=t.offset,g=t.reverse;p<0&&(g=!g,p=Math.abs(p),h=100-h);var x=a?(r={},Ot(r,g?"top":"bottom","".concat(h,"%")),Ot(r,g?"bottom":"top","auto"),Ot(r,"height","".concat(p,"%")),r):(n={},Ot(n,g?"right":"left","".concat(h,"%")),Ot(n,g?"left":"right","auto"),Ot(n,"width","".concat(p,"%")),n),b=zt(zt({},u),x);return i?NZe.default.createElement("div",{className:o,style:b}):null},cq=iTr;function Nl(e,t){if(e==null)return{};var r,n,o=hw(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function xA(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function OZe(e){if(Array.isArray(e))return xA(e)}function tne(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function bA(e,t){if(e){if(typeof e=="string")return xA(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xA(e,t):void 0}}function LZe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qc(e){return OZe(e)||tne(e)||bA(e)||LZe()}function PZe(e,t){for(;!{}.hasOwnProperty.call(e,t)&&(e=op(e))!==null;);return e}function Kw(){return Kw=typeof Reflect!="undefined"&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=PZe(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Kw.apply(null,arguments)}var Jw=Z(we());var rne=Z(Si());function Ol(e,t,r,n){var o=rne.default.unstable_batchedUpdates?function(a){rne.default.unstable_batchedUpdates(r,a)}:r;return e!=null&&e.addEventListener&&e.addEventListener(t,o,n),{remove:function(){e!=null&&e.removeEventListener&&e.removeEventListener(t,o,n)}}}var VZe=Z(Zn());var nne=Z(we()),kZe=Z(Zn());var aTr=function(t,r,n,o,i,a){pd(n?o>0:!0,"`Slider[step]` should be a positive number in order to make Slider[dots] work.");var u=Object.keys(r).map(parseFloat).sort(function(h,g){return h-g});if(n&&o)for(var p=i;p<=a;p+=o)u.indexOf(p)===-1&&u.push(p);return u},sTr=function(t){var r=t.prefixCls,n=t.vertical,o=t.reverse,i=t.marks,a=t.dots,u=t.step,p=t.included,h=t.lowerBound,g=t.upperBound,x=t.max,b=t.min,T=t.dotStyle,A=t.activeDotStyle,L=x-b,P=aTr(n,i,a,u,b,x).map(function(k){var q,U="".concat(Math.abs(k-b)/L*100,"%"),H=!p&&k===g||p&&k<=g&&k>=h,X=n?zt(zt({},T),{},Ot({},o?"top":"bottom",U)):zt(zt({},T),{},Ot({},o?"right":"left",U));H&&(X=zt(zt({},X),A));var ee=(0,kZe.default)((q={},Ot(q,"".concat(r,"-dot"),!0),Ot(q,"".concat(r,"-dot-active"),H),Ot(q,"".concat(r,"-dot-reverse"),o),q));return nne.default.createElement("span",{className:ee,style:X,key:k})});return nne.default.createElement("div",{className:"".concat(r,"-step")},P)},RZe=sTr;var fq=Z(we()),jZe=Z(Zn()),lTr=function(t){var r=t.className,n=t.vertical,o=t.reverse,i=t.marks,a=t.included,u=t.upperBound,p=t.lowerBound,h=t.max,g=t.min,x=t.onClickLabel,b=Object.keys(i),T=h-g,A=b.map(parseFloat).sort(function(L,P){return L-P}).map(function(L){var P,k=i[L],q=no(k)==="object"&&!fq.default.isValidElement(k),U=q?k.label:k;if(!U&&U!==0)return null;var H=!a&&L===u||a&&L<=u&&L>=p,X=(0,jZe.default)((P={},Ot(P,"".concat(r,"-text"),!0),Ot(P,"".concat(r,"-text-active"),H),P)),ee=Ot({marginBottom:"-50%"},o?"top":"bottom","".concat((L-g)/T*100,"%")),ne=Ot({transform:"translateX(".concat(o?"50%":"-50%",")"),msTransform:"translateX(".concat(o?"50%":"-50%",")")},o?"right":"left","".concat((L-g)/T*100,"%")),pe=n?ee:ne,ue=q?zt(zt({},pe),k.style):pe;return fq.default.createElement("span",{className:X,style:ue,key:L,onMouseDown:function(Re){return x(Re,L)},onTouchStart:function(Re){return x(Re,L)}},U)});return fq.default.createElement("div",{className:r},A)},qZe=lTr;var one=Z(we()),zZe=Z(Zn());var Xw=function(e){nl(r,e);var t=ol(r);function r(){var n;return tl(this,r),n=t.apply(this,arguments),n.state={clickFocused:!1},n.setHandleRef=function(o){n.handle=o},n.handleMouseUp=function(){document.activeElement===n.handle&&n.setClickFocus(!0)},n.handleMouseDown=function(o){o.preventDefault(),n.focus()},n.handleBlur=function(){n.setClickFocus(!1)},n.handleKeyDown=function(){n.setClickFocus(!1)},n}return rl(r,[{key:"componentDidMount",value:function(){this.onMouseUpListener=Ol(document,"mouseup",this.handleMouseUp)}},{key:"componentWillUnmount",value:function(){this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"setClickFocus",value:function(o){this.setState({clickFocused:o})}},{key:"clickFocus",value:function(){this.setClickFocus(!0),this.focus()}},{key:"focus",value:function(){this.handle.focus()}},{key:"blur",value:function(){this.handle.blur()}},{key:"render",value:function(){var o,i,a=this.props,u=a.prefixCls,p=a.vertical,h=a.reverse,g=a.offset,x=a.style,b=a.disabled,T=a.min,A=a.max,L=a.value,P=a.tabIndex,k=a.ariaLabel,q=a.ariaLabelledBy,U=a.ariaValueTextFormatter,H=Nl(a,["prefixCls","vertical","reverse","offset","style","disabled","min","max","value","tabIndex","ariaLabel","ariaLabelledBy","ariaValueTextFormatter"]),X=(0,zZe.default)(this.props.className,Ot({},"".concat(u,"-handle-click-focused"),this.state.clickFocused)),ee=p?(o={},Ot(o,h?"top":"bottom","".concat(g,"%")),Ot(o,h?"bottom":"top","auto"),Ot(o,"transform",h?null:"translateY(+50%)"),o):(i={},Ot(i,h?"right":"left","".concat(g,"%")),Ot(i,h?"left":"right","auto"),Ot(i,"transform","translateX(".concat(h?"+":"-","50%)")),i),ne=zt(zt({},x),ee),pe=P||0;(b||P===null)&&(pe=null);var ue;return U&&(ue=U(L)),one.default.createElement("div",Pn({ref:this.setHandleRef,tabIndex:pe},H,{className:X,style:ne,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,role:"slider","aria-valuemin":T,"aria-valuemax":A,"aria-valuenow":L,"aria-disabled":!!b,"aria-label":k,"aria-labelledby":q,"aria-valuetext":ue}))}}]),r}(one.default.Component);var UZe=Z(Si());var $r={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var r=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||r>=$r.F1&&r<=$r.F12)return!1;switch(r){case $r.ALT:case $r.CAPS_LOCK:case $r.CONTEXT_MENU:case $r.CTRL:case $r.DOWN:case $r.END:case $r.ESC:case $r.HOME:case $r.INSERT:case $r.LEFT:case $r.MAC_FF_META:case $r.META:case $r.NUMLOCK:case $r.NUM_CENTER:case $r.PAGE_DOWN:case $r.PAGE_UP:case $r.PAUSE:case $r.PRINT_SCREEN:case $r.RIGHT:case $r.SHIFT:case $r.UP:case $r.WIN_KEY:case $r.WIN_KEY_RIGHT:return!1;default:return!0;}},isCharacterKey:function(t){if(t>=$r.ZERO&&t<=$r.NINE||t>=$r.NUM_ZERO&&t<=$r.NUM_MULTIPLY||t>=$r.A&&t<=$r.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case $r.SPACE:case $r.QUESTION_MARK:case $r.NUM_PLUS:case $r.NUM_MINUS:case $r.NUM_PERIOD:case $r.NUM_DIVISION:case $r.SEMICOLON:case $r.DASH:case $r.EQUALS:case $r.COMMA:case $r.PERIOD:case $r.SLASH:case $r.APOSTROPHE:case $r.SINGLE_QUOTE:case $r.OPEN_SQUARE_BRACKET:case $r.BACKSLASH:case $r.CLOSE_SQUARE_BRACKET:return!0;default:return!1;}}},om=$r;function pq(e,t){try{return Object.keys(t).some(function(r){return e.target===(0,UZe.findDOMNode)(t[r])})}catch(r){return!1}}function dq(e,t){var r=t.min,n=t.max;return e<r||e>n}function ine(e){return e.touches.length>1||e.type.toLowerCase()==="touchend"&&e.touches.length>0}function FZe(e,t){var r=t.marks,n=t.step,o=t.min,i=t.max,a=Object.keys(r).map(parseFloat);if(n!==null){var u=Math.pow(10,BZe(n)),p=Math.floor((i*u-o*u)/(n*u)),h=Math.min((e-o)/n,p),g=Math.round(h)*n+o;a.push(g)}var x=a.map(function(b){return Math.abs(e-b)});return a[x.indexOf(Math.min.apply(Math,Qc(x)))]}function BZe(e){var t=e.toString(),r=0;return t.indexOf(".")>=0&&(r=t.length-t.indexOf(".")-1),r}function ane(e,t){return e?t.clientY:t.pageX}function sne(e,t){return e?t.touches[0].clientY:t.touches[0].pageX}function lne(e,t){var r=t.getBoundingClientRect();return e?r.top+r.height*.5:window.pageXOffset+r.left+r.width*.5}function wA(e,t){var r=t.max,n=t.min;return e<=n?n:e>=r?r:e}function hq(e,t){var r=t.step,n=isFinite(FZe(e,t))?FZe(e,t):0;return r===null?n:parseFloat(n.toFixed(BZe(r)))}function im(e){e.stopPropagation(),e.preventDefault()}function uTr(e,t,r){var n={increase:function(u,p){return u+p},decrease:function(u,p){return u-p}},o=n[e](Object.keys(r.marks).indexOf(JSON.stringify(t)),1),i=Object.keys(r.marks)[o];return r.step?n[e](t,r.step):Object.keys(r.marks).length&&r.marks[i]?r.marks[i]:t}function mq(e,t,r){var n="increase",o="decrease",i=n;switch(e.keyCode){case om.UP:i=t&&r?o:n;break;case om.RIGHT:i=!t&&r?o:n;break;case om.DOWN:i=t&&r?n:o;break;case om.LEFT:i=!t&&r?n:o;break;case om.END:return function(a,u){return u.max};case om.HOME:return function(a,u){return u.min};case om.PAGE_UP:return function(a,u){return a+u.step*2};case om.PAGE_DOWN:return function(a,u){return a-u.step*2};default:return;}return function(a,u){return uTr(i,a,u)}}function dd(){}function EA(e){var t;return t=function(r){nl(o,r);var n=ol(o);function o(i){var a;tl(this,o),a=n.call(this,i),a.onDown=function(x,b){var T=b,A=a.props,L=A.draggableTrack,P=A.vertical,k=a.state.bounds,q=L&&a.positionGetValue?a.positionGetValue(T)||[]:[],U=pq(x,a.handlesRefs);if(a.dragTrack=L&&k.length>=2&&!U&&!q.map(function(X,ee){var ne=ee?!0:X>=k[ee];return ee===q.length-1?X<=k[ee]:ne}).some(function(X){return!X}),a.dragTrack)a.dragOffset=T,a.startBounds=Qc(k);else{if(!U)a.dragOffset=0;else{var H=lne(P,x.target);a.dragOffset=T-H,T=H}a.onStart(T)}},a.onMouseDown=function(x){if(x.button===0){a.removeDocumentEvents();var b=a.props.vertical,T=ane(b,x);a.onDown(x,T),a.addDocumentMouseEvents()}},a.onTouchStart=function(x){if(!ine(x)){var b=a.props.vertical,T=sne(b,x);a.onDown(x,T),a.addDocumentTouchEvents(),im(x)}},a.onFocus=function(x){var b=a.props,T=b.onFocus,A=b.vertical;if(pq(x,a.handlesRefs)&&!a.dragTrack){var L=lne(A,x.target);a.dragOffset=0,a.onStart(L),im(x),T&&T(x)}},a.onBlur=function(x){var b=a.props.onBlur;a.dragTrack||a.onEnd(),b&&b(x)},a.onMouseUp=function(){a.handlesRefs[a.prevMovedHandleIndex]&&a.handlesRefs[a.prevMovedHandleIndex].clickFocus()},a.onMouseMove=function(x){if(!a.sliderRef){a.onEnd();return}var b=ane(a.props.vertical,x);a.onMove(x,b-a.dragOffset,a.dragTrack,a.startBounds)},a.onTouchMove=function(x){if(ine(x)||!a.sliderRef){a.onEnd();return}var b=sne(a.props.vertical,x);a.onMove(x,b-a.dragOffset,a.dragTrack,a.startBounds)},a.onKeyDown=function(x){a.sliderRef&&pq(x,a.handlesRefs)&&a.onKeyboard(x)},a.onClickMarkLabel=function(x,b){x.stopPropagation(),a.onChange({value:b}),a.setState({value:b},function(){return a.onEnd(!0)})},a.saveSlider=function(x){a.sliderRef=x};var u=i.step,p=i.max,h=i.min,g=isFinite(p-h)?(p-h)%u===0:!0;return pd(u&&Math.floor(u)===u?g:!0,"Slider[max] - Slider[min] (".concat(p-h,") should be a multiple of Slider[step] (").concat(u,")")),a.handlesRefs={},a}return rl(o,[{key:"componentDidMount",value:function(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var a=this.props,u=a.autoFocus,p=a.disabled;u&&!p&&this.focus()}},{key:"componentWillUnmount",value:function(){Kw(op(o.prototype),"componentWillUnmount",this)&&Kw(op(o.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function(){var a=this.sliderRef,u=this.props,p=u.vertical,h=u.reverse,g=a.getBoundingClientRect();return p?h?g.bottom:g.top:window.pageXOffset+(h?g.right:g.left)}},{key:"getSliderLength",value:function(){var a=this.sliderRef;if(!a)return 0;var u=a.getBoundingClientRect();return this.props.vertical?u.height:u.width}},{key:"addDocumentTouchEvents",value:function(){this.onTouchMoveListener=Ol(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=Ol(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function(){this.onMouseMoveListener=Ol(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=Ol(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function(){var a;this.props.disabled||(a=this.handlesRefs[0])===null||a===void 0||a.focus()}},{key:"blur",value:function(){var a=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(u){var p,h;(p=a.handlesRefs[u])===null||p===void 0||(h=p.blur)===null||h===void 0||h.call(p)})}},{key:"calcValue",value:function(a){var u=this.props,p=u.vertical,h=u.min,g=u.max,x=Math.abs(Math.max(a,0)/this.getSliderLength()),b=p?(1-x)*(g-h)+h:x*(g-h)+h;return b}},{key:"calcValueByPos",value:function(a){var u=this.props.reverse?-1:1,p=u*(a-this.getSliderStart()),h=this.trimAlignValue(this.calcValue(p));return h}},{key:"calcOffset",value:function(a){var u=this.props,p=u.min,h=u.max,g=(a-p)/(h-p);return Math.max(0,g*100)}},{key:"saveHandle",value:function(a,u){this.handlesRefs[a]=u}},{key:"render",value:function(){var a,u=this.props,p=u.prefixCls,h=u.className,g=u.marks,x=u.dots,b=u.step,T=u.included,A=u.disabled,L=u.vertical,P=u.reverse,k=u.min,q=u.max,U=u.children,H=u.maximumTrackStyle,X=u.style,ee=u.railStyle,ne=u.dotStyle,pe=u.activeDotStyle,ue=Kw(op(o.prototype),"render",this).call(this),Ie=ue.tracks,Re=ue.handles,Te=(0,VZe.default)(p,(a={},Ot(a,"".concat(p,"-with-marks"),Object.keys(g).length),Ot(a,"".concat(p,"-disabled"),A),Ot(a,"".concat(p,"-vertical"),L),Ot(a,h,h),a));return Jw.default.createElement("div",{ref:this.saveSlider,className:Te,onTouchStart:A?dd:this.onTouchStart,onMouseDown:A?dd:this.onMouseDown,onMouseUp:A?dd:this.onMouseUp,onKeyDown:A?dd:this.onKeyDown,onFocus:A?dd:this.onFocus,onBlur:A?dd:this.onBlur,style:X},Jw.default.createElement("div",{className:"".concat(p,"-rail"),style:zt(zt({},H),ee)}),Ie,Jw.default.createElement(RZe,{prefixCls:p,vertical:L,reverse:P,marks:g,dots:x,step:b,included:T,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:k,dotStyle:ne,activeDotStyle:pe}),Re,Jw.default.createElement(qZe,{className:"".concat(p,"-mark"),onClickLabel:A?dd:this.onClickMarkLabel,vertical:L,marks:g,included:T,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:q,min:k,reverse:P}),U)}}]),o}(e),t.displayName="ComponentEnhancer(".concat(e.displayName,")"),t.defaultProps=zt(zt({},e.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function(n){var o=n.index,i=Nl(n,["index"]);return delete i.dragging,i.value===null?null:Jw.default.createElement(Xw,Pn({},i,{key:o}))},onBeforeChange:dd,onChange:dd,onAfterChange:dd,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),t}var cTr=function(e){nl(r,e);var t=ol(r);function r(n){var o;tl(this,r),o=t.call(this,n),o.positionGetValue=function(u){return[]},o.onEnd=function(u){var p=o.state.dragging;o.removeDocumentEvents(),(p||u)&&o.props.onAfterChange(o.getValue()),o.setState({dragging:!1})};var i=n.defaultValue!==void 0?n.defaultValue:n.min,a=n.value!==void 0?n.value:i;return o.state={value:o.trimAlignValue(a),dragging:!1},pd(!("minimumTrackStyle"in n),"minimumTrackStyle will be deprecated, please use trackStyle instead."),pd(!("maximumTrackStyle"in n),"maximumTrackStyle will be deprecated, please use railStyle instead."),o}return rl(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this.props,u=a.min,p=a.max,h=a.value,g=a.onChange;if("min"in this.props||"max"in this.props){var x=h!==void 0?h:i.value,b=this.trimAlignValue(x,this.props);b!==i.value&&(this.setState({value:b}),!(u===o.min&&p===o.max)&&dq(x,this.props)&&g(b))}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i),u=o.value>this.props.max?zt(zt({},o),{},{value:this.props.max}):o;a&&this.setState(u);var p=u.value;i.onChange(p)}},{key:"onStart",value:function(o){this.setState({dragging:!0});var i=this.props,a=this.getValue();i.onBeforeChange(a);var u=this.calcValueByPos(o);this.startValue=u,this.startPosition=o,u!==a&&(this.prevMovedHandleIndex=0,this.onChange({value:u}))}},{key:"onMove",value:function(o,i){im(o);var a=this.state.value,u=this.calcValueByPos(i);u!==a&&this.onChange({value:u})}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,u=i.vertical,p=mq(o,u,a);if(p){im(o);var h=this.state,g=h.value,x=p(g,this.props),b=this.trimAlignValue(x);if(b===g)return;this.onChange({value:b}),this.props.onAfterChange(b),this.onEnd()}}},{key:"getValue",value:function(){return this.state.value}},{key:"getLowerBound",value:function(){var o=this.props.startPoint||this.props.min;return this.state.value>o?o:this.state.value}},{key:"getUpperBound",value:function(){return this.state.value<this.props.startPoint?this.props.startPoint:this.state.value}},{key:"trimAlignValue",value:function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o===null)return null;var a=zt(zt({},this.props),i),u=wA(o,a);return hq(u,a)}},{key:"render",value:function(){var o=this,i=this.props,a=i.prefixCls,u=i.vertical,p=i.included,h=i.disabled,g=i.minimumTrackStyle,x=i.trackStyle,b=i.handleStyle,T=i.tabIndex,A=i.ariaLabelForHandle,L=i.ariaLabelledByForHandle,P=i.ariaValueTextFormatterForHandle,k=i.min,q=i.max,U=i.startPoint,H=i.reverse,X=i.handle,ee=this.state,ne=ee.value,pe=ee.dragging,ue=this.calcOffset(ne),Ie=X({className:"".concat(a,"-handle"),prefixCls:a,vertical:u,offset:ue,value:ne,dragging:pe,disabled:h,min:k,max:q,reverse:H,index:0,tabIndex:T,ariaLabel:A,ariaLabelledBy:L,ariaValueTextFormatter:P,style:b[0]||b,ref:function(Qe){return o.saveHandle(0,Qe)}}),Re=U!==void 0?this.calcOffset(U):0,Te=x[0]||x,Ee=cne.default.createElement(cq,{className:"".concat(a,"-track"),vertical:u,included:p,offset:Re,reverse:H,length:ue-Re,style:zt(zt({},g),Te)});return{tracks:Ee,handles:Ie}}}]),r}(cne.default.Component),GZe=EA(cTr);var fne=Z(we()),pne=Z(Zn());var SA=function(t){var r=t.value,n=t.handle,o=t.bounds,i=t.props,a=i.allowCross,u=i.pushable,p=Number(u),h=wA(r,i),g=h;return!a&&n!=null&&o!==void 0&&(n>0&&h<=o[n-1]+p&&(g=o[n-1]+p),n<o.length-1&&h>=o[n+1]-p&&(g=o[n+1]-p)),hq(g,i)},dne=function(e){nl(r,e);var t=ol(r);function r(n){var o;tl(this,r),o=t.call(this,n),o.positionGetValue=function(T){var A=o.getValue(),L=o.calcValueByPos(T),P=o.getClosestBound(L),k=o.getBoundNeedMoving(L,P),q=A[k];if(L===q)return null;var U=Qc(A);return U[k]=L,U},o.onEnd=function(T){var A=o.state.handle;o.removeDocumentEvents(),A||(o.dragTrack=!1),(A!==null||T)&&o.props.onAfterChange(o.getValue()),o.setState({handle:null})};var i=n.count,a=n.min,u=n.max,p=Array.apply(void 0,Qc(Array(i+1))).map(function(){return a}),h="defaultValue"in n?n.defaultValue:p,g=n.value!==void 0?n.value:h,x=g.map(function(T,A){return SA({value:T,handle:A,props:n})}),b=x[0]===u?0:x.length-1;return o.state={handle:null,recent:b,bounds:x},o}return rl(r,[{key:"calcValueByPos",value:function(o){return 0}},{key:"getSliderLength",value:function(){return 0}},{key:"calcOffset",value:function(o){return 0}},{key:"saveHandle",value:function(o,i){}},{key:"removeDocumentEvents",value:function(){}},{key:"componentDidUpdate",value:function(o,i){var a=this,u=this.props,p=u.onChange,h=u.value,g=u.min,x=u.max;if(("min"in this.props||"max"in this.props)&&!(g===o.min&&x===o.max)){var b=h||i.bounds;if(b.some(function(A){return dq(A,a.props)})){var T=b.map(function(A){return wA(A,a.props)});p(T)}}}},{key:"onChange",value:function(o){var i=this.props,a=!("value"in i);if(a)this.setState(o);else{var u={};["handle","recent"].forEach(function(g){o[g]!==void 0&&(u[g]=o[g])}),Object.keys(u).length&&this.setState(u)}var p=zt(zt({},this.state),o),h=p.bounds;i.onChange(h)}},{key:"onStart",value:function(o){var i=this.props,a=this.state,u=this.getValue();i.onBeforeChange(u);var p=this.calcValueByPos(o);this.startValue=p,this.startPosition=o;var h=this.getClosestBound(p);this.prevMovedHandleIndex=this.getBoundNeedMoving(p,h),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var g=u[this.prevMovedHandleIndex];if(p!==g){var x=Qc(a.bounds);x[this.prevMovedHandleIndex]=p,this.onChange({bounds:x})}}},{key:"onMove",value:function(o,i,a,u){im(o);var p=this.state,h=this.props,g=h.max||100,x=h.min||0;if(a){var b=h.vertical?-i:i;b=h.reverse?-b:b;var T=g-Math.max.apply(Math,Qc(u)),A=x-Math.min.apply(Math,Qc(u)),L=Math.min(Math.max(b/(this.getSliderLength()/(g-x)),A),T),P=u.map(function(U){return Math.floor(Math.max(Math.min(U+L,g),x))});p.bounds.map(function(U,H){return U===P[H]}).some(function(U){return!U})&&this.onChange({bounds:P});return}var k=this.calcValueByPos(i),q=p.bounds[p.handle];k!==q&&this.moveTo(k)}},{key:"onKeyboard",value:function(o){var i=this.props,a=i.reverse,u=i.vertical,p=mq(o,u,a);if(p){im(o);var h=this.state,g=this.props,x=h.bounds,b=h.handle,T=x[b===null?h.recent:b],A=p(T,g),L=SA({value:A,handle:b,bounds:h.bounds,props:g});if(L===T)return;var P=!0;this.moveTo(L,P)}}},{key:"getValue",value:function(){return this.state.bounds}},{key:"getClosestBound",value:function(o){for(var i=this.state.bounds,a=0,u=1;u<i.length-1;u+=1)o>=i[u]&&(a=u);return Math.abs(i[a+1]-o)<Math.abs(i[a]-o)&&(a+=1),a}},{key:"getBoundNeedMoving",value:function(o,i){var a=this.state,u=a.bounds,p=a.recent,h=i,g=u[i+1]===u[i];return g&&u[p]===u[i]&&(h=p),g&&o!==u[i+1]&&(h=o<u[i+1]?i:i+1),h}},{key:"getLowerBound",value:function(){return this.state.bounds[0]}},{key:"getUpperBound",value:function(){var o=this.state.bounds;return o[o.length-1]}},{key:"getPoints",value:function(){var o=this.props,i=o.marks,a=o.step,u=o.min,p=o.max,h=this.internalPointsCache;if(!h||h.marks!==i||h.step!==a){var g=zt({},i);if(a!==null)for(var x=u;x<=p;x+=a)g[x]=x;var b=Object.keys(g).map(parseFloat);b.sort(function(T,A){return T-A}),this.internalPointsCache={marks:i,step:a,points:b}}return this.internalPointsCache.points}},{key:"moveTo",value:function(o,i){var a=this,u=this.state,p=this.props,h=Qc(u.bounds),g=u.handle===null?u.recent:u.handle;h[g]=o;var x=g;p.pushable!==!1?this.pushSurroundingHandles(h,x):p.allowCross&&(h.sort(function(b,T){return b-T}),x=h.indexOf(o)),this.onChange({recent:x,handle:x,bounds:h}),i&&(this.props.onAfterChange(h),this.setState({},function(){a.handlesRefs[x].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function(o,i){var a=o[i],u=this.props.pushable,p=Number(u),h=0;if(o[i+1]-a<p&&(h=1),a-o[i-1]<p&&(h=-1),h!==0){var g=i+h,x=h*(o[g]-a);this.pushHandle(o,g,h,p-x)||(o[i]=o[g]-h*p)}}},{key:"pushHandle",value:function(o,i,a,u){for(var p=o[i],h=o[i];a*(h-p)<u;){if(!this.pushHandleOnePoint(o,i,a))return o[i]=p,!1;h=o[i]}return!0}},{key:"pushHandleOnePoint",value:function(o,i,a){var u=this.getPoints(),p=u.indexOf(o[i]),h=p+a;if(h>=u.length||h<0)return!1;var g=i+a,x=u[h],b=this.props.pushable,T=Number(b),A=a*(o[g]-x);return this.pushHandle(o,g,a,T-A)?(o[i]=x,!0):!1}},{key:"trimAlignValue",value:function(o){var i=this.state,a=i.handle,u=i.bounds;return SA({value:o,handle:a,bounds:u,props:this.props})}},{key:"render",value:function(){var o=this,i=this.state,a=i.handle,u=i.bounds,p=this.props,h=p.prefixCls,g=p.vertical,x=p.included,b=p.disabled,T=p.min,A=p.max,L=p.reverse,P=p.handle,k=p.trackStyle,q=p.handleStyle,U=p.tabIndex,H=p.ariaLabelGroupForHandles,X=p.ariaLabelledByGroupForHandles,ee=p.ariaValueTextFormatterGroupForHandles,ne=u.map(function(Re){return o.calcOffset(Re)}),pe="".concat(h,"-handle"),ue=u.map(function(Re,Te){var Ee,Ye=U[Te]||0;(b||U[Te]===null)&&(Ye=null);var Qe=a===Te;return P({className:(0,pne.default)((Ee={},Ot(Ee,pe,!0),Ot(Ee,"".concat(pe,"-").concat(Te+1),!0),Ot(Ee,"".concat(pe,"-dragging"),Qe),Ee)),prefixCls:h,vertical:g,dragging:Qe,offset:ne[Te],value:Re,index:Te,tabIndex:Ye,min:T,max:A,reverse:L,disabled:b,style:q[Te],ref:function(Ue){return o.saveHandle(Te,Ue)},ariaLabel:H[Te],ariaLabelledBy:X[Te],ariaValueTextFormatter:ee[Te]})}),Ie=u.slice(0,-1).map(function(Re,Te){var Ee,Ye=Te+1,Qe=(0,pne.default)((Ee={},Ot(Ee,"".concat(h,"-track"),!0),Ot(Ee,"".concat(h,"-track-").concat(Ye),!0),Ee));return fne.default.createElement(cq,{className:Qe,vertical:g,reverse:L,included:x,offset:ne[Ye-1],length:ne[Ye]-ne[Ye-1],style:k[Te],key:Ye})});return{tracks:Ie,handles:ue}}}],[{key:"getDerivedStateFromProps",value:function(o,i){if(!("value"in o||"min"in o||"max"in o))return null;var a=o.value||i.bounds,u=a.map(function(p,h){return SA({value:p,handle:h,bounds:i.bounds,props:o})});if(i.bounds.length===u.length){if(u.every(function(p,h){return p===i.bounds[h]}))return null}else u=a.map(function(p,h){return SA({value:p,handle:h,props:o})});return zt(zt({},i),{},{bounds:u})}}]),r}(fne.default.Component);dne.displayName="Range";dne.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};var gq=EA(dne);var RA=Z(we());var lm=Z(we());var Zne=Z(we()),aE=Z(we());var ic=Z(we()),AXe=Z(Si());var WZe=function(t){return+setTimeout(t,16)},$Ze=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(WZe=function(t){return window.requestAnimationFrame(t)},$Ze=function(t){return window.cancelAnimationFrame(t)});var HZe=0,hne=new Map;function YZe(e){hne.delete(e)}var ZZe=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;HZe+=1;var n=HZe;function o(i){if(i===0)YZe(n),t();else{var a=WZe(function(){o(i-1)});hne.set(n,a)}}return o(r),n};ZZe.cancel=function(e){var t=hne.get(e);return YZe(e),$Ze(t)};var bu=ZZe;function p1(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var r=t;r;){if(r===e)return!0;r=r.parentNode}return!1}var XZe=Z(we()),mne=Z(Si());function KZe(e){return e instanceof HTMLElement||e instanceof SVGElement}function fTr(e){return e&&no(e)==="object"&&KZe(e.nativeElement)?e.nativeElement:KZe(e)?e:null}function IA(e){var t=fTr(e);if(t)return t;if(e instanceof XZe.default.Component){var r;return(r=mne.default.findDOMNode)===null||r===void 0?void 0:r.call(mne.default,e)}return null}var Mq=Z(we()),d1=Z(tKe());var hTr=Z(we());var yne=function(t,r){typeof t=="function"?t(r):no(t)==="object"&&t&&"current"in t&&(t.current=r)},Qw=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r.filter(Boolean);return o.length<=1?o[0]:function(i){r.forEach(function(a){yne(a,i)})}};var TA=function(t){var r,n,o=(0,d1.isMemo)(t)?t.type.type:t.type;return!(typeof o=="function"&&!((r=o.prototype)!==null&&r!==void 0&&r.render)&&o.$$typeof!==d1.ForwardRef||typeof t=="function"&&!((n=t.prototype)!==null&&n!==void 0&&n.render)&&t.$$typeof!==d1.ForwardRef)};function rKe(e){return(0,Mq.isValidElement)(e)&&!(0,d1.isFragment)(e)}var tTn=Number(Mq.version.split(".")[0])>=19?function(e){return rKe(e)?e.props.ref:null}:function(e){return rKe(e)?e.ref:null};var ip=Z(we()),nKe=Z(Si());function hd(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var mTr=(0,ip.forwardRef)(function(e,t){var r=e.didUpdate,n=e.getContainer,o=e.children,i=(0,ip.useRef)(),a=(0,ip.useRef)();(0,ip.useImperativeHandle)(t,function(){return{}});var u=(0,ip.useRef)(!1);return!u.current&&hd()&&(a.current=n(),i.current=a.current.parentNode,u.current=!0),(0,ip.useEffect)(function(){r==null||r(e)}),(0,ip.useEffect)(function(){return a.current.parentNode===null&&i.current!==null&&i.current.appendChild(a.current),function(){var p;(p=a.current)===null||p===void 0||(p=p.parentNode)===null||p===void 0||p.removeChild(a.current)}},[]),a.current?nKe.default.createPortal(o,a.current):null}),oKe=mTr;var DXe=Z(Zn());function gTr(e,t,r){return r?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function iKe(e,t,r){var n=e[t]||{};return zt(zt({},n),r)}function aKe(e,t,r,n){for(var o=r.points,i=Object.keys(e),a=0;a<i.length;a+=1){var u=i[a];if(gTr(e[u].points,o,n))return"".concat(t,"-placement-").concat(u)}return""}function _ne(e){if(Array.isArray(e))return e}function sKe(e,t){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,o,i,a,u=[],p=!0,h=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;p=!1}else for(;!(p=(n=i.call(r)).done)&&(u.push(n.value),u.length!==t);p=!0);}catch(g){h=!0,o=g}finally{try{if(!p&&r.return!=null&&(a=r.return(),Object(a)!==a))return}finally{if(h)throw o}}return u}}function xne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kn(e,t){return _ne(e)||sKe(e,t)||bA(e,t)||xne()}var v1=Z(we()),kA=Z(we());var lKe=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4))};var Dne=Z(we()),CKe=Z(Zn());var TKe=Z(Zn());var Eu=Z(we()),Ane=Z(we());var bne=Z(we());var uKe=bne.createContext({});var cKe=Z(we()),vTr=function(e){nl(r,e);var t=ol(r);function r(){return tl(this,r),t.apply(this,arguments)}return rl(r,[{key:"render",value:function(){return this.props.children}}]),r}(cKe.Component),fKe=vTr;var Cq=Z(we());function jv(e){var t=Cq.useRef();t.current=e;var r=Cq.useCallback(function(){for(var n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];return(n=t.current)===null||n===void 0?void 0:n.call.apply(n,[t].concat(i))},[]);return r}var eE=Z(we());var pKe=hd()?eE.useLayoutEffect:eE.useEffect,yTr=function(t,r){var n=eE.useRef(!0);pKe(function(){return t(n.current)},r),pKe(function(){return n.current=!1,function(){n.current=!0}},[])};var MA=yTr;var tE=Z(we());function am(e){var t=tE.useRef(!1),r=tE.useState(e),n=Kn(r,2),o=n[0],i=n[1];tE.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function a(u,p){p&&t.current||i(u)}return[o,a]}var Aq=Z(we());function wne(e){var t=Aq.useReducer(function(u){return u+1},0),r=Kn(t,2),n=r[1],o=Aq.useRef(e),i=jv(function(){return o.current}),a=jv(function(u){o.current=typeof u=="function"?u(o.current):u,n()});return[i,a]}var qq=Z(we()),zv=Z(we());var md="none",CA="appear",AA="enter",DA="leave",Ene="none",wu="prepare",sm="start",qv="active",Dq="end",Nq="prepared";var _Ke=Z(we()),xKe=Z(we());function dKe(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit".concat(e)]="webkit".concat(t),r["Moz".concat(e)]="moz".concat(t),r["ms".concat(e)]="MS".concat(t),r["O".concat(e)]="o".concat(t.toLowerCase()),r}function xTr(e,t){var r={animationend:dKe("Animation","AnimationEnd"),transitionend:dKe("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete r.animationend.animation,"TransitionEvent"in t||delete r.transitionend.transition),r}var bTr=xTr(hd(),typeof window!="undefined"?window:{}),mKe={};hd()&&(hKe=document.createElement("div"),mKe=hKe.style);var hKe,Oq={};function gKe(e){if(Oq[e])return Oq[e];var t=bTr[e];if(t)for(var r=Object.keys(t),n=r.length,o=0;o<n;o+=1){var i=r[o];if(Object.prototype.hasOwnProperty.call(t,i)&&i in mKe)return Oq[e]=t[i],Oq[e]}return""}var vKe=gKe("animationend"),yKe=gKe("transitionend"),Lq=!!(vKe&&yKe),Sne=vKe||"animationend",Ine=yKe||"transitionend";function Tne(e,t){if(!e)return null;if(no(e)==="object"){var r=t.replace(/-\w/g,function(n){return n[1].toUpperCase()});return e[r]}return"".concat(e,"-").concat(t)}var bKe=function(e){var t=(0,xKe.useRef)();function r(o){o&&(o.removeEventListener(Ine,e),o.removeEventListener(Sne,e))}function n(o){t.current&&t.current!==o&&r(t.current),o&&o!==t.current&&(o.addEventListener(Ine,e),o.addEventListener(Sne,e),t.current=o)}return _Ke.useEffect(function(){return function(){r(t.current)}},[]),[n,r]};var Pq=Z(we()),wTr=hd()?Pq.useLayoutEffect:Pq.useEffect,kq=wTr;var EKe=Z(we());var Rq=Z(we()),wKe=function(){var e=Rq.useRef(null);function t(){bu.cancel(e.current)}function r(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var i=bu(function(){o<=1?n({isCanceled:function(){return i!==e.current}}):r(n,o-1)});e.current=i}return Rq.useEffect(function(){return function(){t()}},[]),[r,t]};var ETr=[wu,sm,qv,Dq],STr=[wu,Nq],Mne=!1,SKe=!0;function jq(e){return e===qv||e===Dq}var IKe=function(e,t,r){var n=am(Ene),o=Kn(n,2),i=o[0],a=o[1],u=wKe(),p=Kn(u,2),h=p[0],g=p[1];function x(){a(wu,!0)}var b=t?STr:ETr;return kq(function(){if(i!==Ene&&i!==Dq){var T=b.indexOf(i),A=b[T+1],L=r(i);L===Mne?a(A,!0):A&&h(function(P){function k(){P.isCanceled()||a(A,!0)}L===!0?k():Promise.resolve(L).then(k)})}},[e,i]),EKe.useEffect(function(){return function(){g()}},[]),[x,i]};function Cne(e,t,r,n){var o=n.motionEnter,i=o===void 0?!0:o,a=n.motionAppear,u=a===void 0?!0:a,p=n.motionLeave,h=p===void 0?!0:p,g=n.motionDeadline,x=n.motionLeaveImmediately,b=n.onAppearPrepare,T=n.onEnterPrepare,A=n.onLeavePrepare,L=n.onAppearStart,P=n.onEnterStart,k=n.onLeaveStart,q=n.onAppearActive,U=n.onEnterActive,H=n.onLeaveActive,X=n.onAppearEnd,ee=n.onEnterEnd,ne=n.onLeaveEnd,pe=n.onVisibleChanged,ue=am(),Ie=Kn(ue,2),Re=Ie[0],Te=Ie[1],Ee=wne(md),Ye=Kn(Ee,2),Qe=Ye[0],qe=Ye[1],Ue=am(null),Ne=Kn(Ue,2),et=Ne[0],st=Ne[1],ft=Qe(),Ze=(0,zv.useRef)(!1),tt=(0,zv.useRef)(null);function lt(){return r()}var ze=(0,zv.useRef)(!1);function ge(){qe(md),st(null,!0)}var We=jv(function(Be){var mt=Qe();if(mt!==md){var yt=lt();if(!(Be&&!Be.deadline&&Be.target!==yt)){var gt=ze.current,_t;mt===CA&&gt?_t=X==null?void 0:X(yt,Be):mt===AA&&gt?_t=ee==null?void 0:ee(yt,Be):mt===DA&&gt&&(_t=ne==null?void 0:ne(yt,Be)),gt&&_t!==!1&&ge()}}}),Oe=bKe(We),at=Kn(Oe,1),ot=at[0],Pt=function(mt){switch(mt){case CA:return Ot(Ot(Ot({},wu,b),sm,L),qv,q);case AA:return Ot(Ot(Ot({},wu,T),sm,P),qv,U);case DA:return Ot(Ot(Ot({},wu,A),sm,k),qv,H);default:return{};}},Mt=qq.useMemo(function(){return Pt(ft)},[ft]),Nt=IKe(ft,!e,function(Be){if(Be===wu){var mt=Mt[wu];return mt?mt(lt()):Mne}if(Wt in Mt){var yt;st(((yt=Mt[Wt])===null||yt===void 0?void 0:yt.call(Mt,lt(),null))||null)}return Wt===qv&&ft!==md&&(ot(lt()),g>0&&(clearTimeout(tt.current),tt.current=setTimeout(function(){We({deadline:!0})},g))),Wt===Nq&&ge(),SKe}),Ae=Kn(Nt,2),Lt=Ae[0],Wt=Ae[1],Ct=jq(Wt);ze.current=Ct,kq(function(){Te(t);var Be=Ze.current;Ze.current=!0;var mt;!Be&&t&&u&&(mt=CA),Be&&t&&i&&(mt=AA),(Be&&!t&&h||!Be&&x&&!t&&h)&&(mt=DA);var yt=Pt(mt);mt&&(e||yt[wu])?(qe(mt),Lt()):qe(md)},[t]),(0,zv.useEffect)(function(){(ft===CA&&!u||ft===AA&&!i||ft===DA&&!h)&&qe(md)},[u,i,h]),(0,zv.useEffect)(function(){return function(){Ze.current=!1,clearTimeout(tt.current)}},[]);var ce=qq.useRef(!1);(0,zv.useEffect)(function(){Re&&(ce.current=!0),Re!==void 0&&ft===md&&((ce.current||Re)&&(pe==null||pe(Re)),ce.current=!0)},[Re,ft]);var Fe=et;return Mt[wu]&&Wt===sm&&(Fe=zt({transition:"none"},Fe)),[ft,Wt,Fe,Re!=null?Re:t]}function ITr(e){var t=e;no(e)==="object"&&(t=e.transitionSupport);function r(o,i){return!!(o.motionName&&t&&i!==!1)}var n=Eu.forwardRef(function(o,i){var a=o.visible,u=a===void 0?!0:a,p=o.removeOnLeave,h=p===void 0?!0:p,g=o.forceRender,x=o.children,b=o.motionName,T=o.leavedClassName,A=o.eventProps,L=Eu.useContext(uKe),P=L.motion,k=r(o,P),q=(0,Ane.useRef)(),U=(0,Ane.useRef)();function H(){try{return q.current instanceof HTMLElement?q.current:IA(U.current)}catch(et){return null}}var X=Cne(k,u,H,o),ee=Kn(X,4),ne=ee[0],pe=ee[1],ue=ee[2],Ie=ee[3],Re=Eu.useRef(Ie);Ie&&(Re.current=!0);var Te=Eu.useCallback(function(et){q.current=et,yne(i,et)},[i]),Ee,Ye=zt(zt({},A),{},{visible:u});if(!x)Ee=null;else if(ne===md)Ie?Ee=x(zt({},Ye),Te):!h&&Re.current&&T?Ee=x(zt(zt({},Ye),{},{className:T}),Te):g||!h&&!T?Ee=x(zt(zt({},Ye),{},{style:{display:"none"}}),Te):Ee=null;else{var Qe;pe===wu?Qe="prepare":jq(pe)?Qe="active":pe===sm&&(Qe="start");var qe=Tne(b,"".concat(ne,"-").concat(Qe));Ee=x(zt(zt({},Ye),{},{className:(0,TKe.default)(Tne(b,ne),Ot(Ot({},qe,qe&&Qe),b,typeof b=="string")),style:ue}),Te)}if(Eu.isValidElement(Ee)&&TA(Ee)){var Ue=Ee,Ne=Ue.ref;Ne||(Ee=Eu.cloneElement(Ee,{ref:Te}))}return Eu.createElement(fKe,{ref:U},Ee)});return n.displayName="CSSMotion",n}var zq=ITr(Lq);var h1=Z(we());var Fq="add",Uq="keep",Bq="remove",Gq="removed";function TTr(e){var t;return e&&no(e)==="object"&&"key"in e?t=e:t={key:e},zt(zt({},t),{},{key:String(t.key)})}function Vq(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(TTr)}function MKe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],r=[],n=0,o=t.length,i=Vq(e),a=Vq(t);i.forEach(function(h){for(var g=!1,x=n;x<o;x+=1){var b=a[x];if(b.key===h.key){n<x&&(r=r.concat(a.slice(n,x).map(function(T){return zt(zt({},T),{},{status:Fq})})),n=x),r.push(zt(zt({},b),{},{status:Uq})),n+=1,g=!0;break}}g||r.push(zt(zt({},h),{},{status:Bq}))}),n<o&&(r=r.concat(a.slice(n).map(function(h){return zt(zt({},h),{},{status:Fq})})));var u={};r.forEach(function(h){var g=h.key;u[g]=(u[g]||0)+1});var p=Object.keys(u).filter(function(h){return u[h]>1});return p.forEach(function(h){r=r.filter(function(g){var x=g.key,b=g.status;return x!==h||b!==Bq}),r.forEach(function(g){g.key===h&&(g.status=Uq)})}),r}var MTr=["component","children","onVisibleChanged","onAllRemoved"],CTr=["status"],ATr=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function DTr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:zq,r=function(n){nl(i,n);var o=ol(i);function i(){var a;tl(this,i);for(var u=arguments.length,p=new Array(u),h=0;h<u;h++)p[h]=arguments[h];return a=o.call.apply(o,[this].concat(p)),Ot(Jr(a),"state",{keyEntities:[]}),Ot(Jr(a),"removeKey",function(g){a.setState(function(x){var b=x.keyEntities.map(function(T){return T.key!==g?T:zt(zt({},T),{},{status:Gq})});return{keyEntities:b}},function(){var x=a.state.keyEntities,b=x.filter(function(T){var A=T.status;return A!==Gq}).length;b===0&&a.props.onAllRemoved&&a.props.onAllRemoved()})}),a}return rl(i,[{key:"render",value:function(){var u=this,p=this.state.keyEntities,h=this.props,g=h.component,x=h.children,b=h.onVisibleChanged,T=h.onAllRemoved,A=Nl(h,MTr),L=g||h1.Fragment,P={};return ATr.forEach(function(k){P[k]=A[k],delete A[k]}),delete A.keys,h1.createElement(L,A,p.map(function(k,q){var U=k.status,H=Nl(k,CTr),X=U===Fq||U===Uq;return h1.createElement(t,Pn({},P,{key:H.key,visible:X,eventProps:H,onVisibleChanged:function(ne){b==null||b(ne,{key:H.key}),ne||u.removeKey(H.key)}}),function(ee,ne){return x(zt(zt({},ee),{},{index:q}),ne)})}))}}],[{key:"getDerivedStateFromProps",value:function(u,p){var h=u.keys,g=p.keyEntities,x=Vq(h),b=MKe(g,x);return{keyEntities:b.filter(function(T){var A=g.find(function(L){var P=L.key;return T.key===P});return!(A&&A.status===Gq&&T.status===Bq)})}}}]),i}(h1.Component);return Ot(r,"defaultProps",{component:"div"}),r}var NTr=DTr(Lq);var rE=zq;function Hq(e){var t=e.prefixCls,r=e.motion,n=e.animation,o=e.transitionName;return r||(n?{motionName:"".concat(t,"-").concat(n)}:o?{motionName:o}:null)}function Nne(e){var t=e.prefixCls,r=e.visible,n=e.zIndex,o=e.mask,i=e.maskMotion,a=e.maskAnimation,u=e.maskTransitionName;if(!o)return null;var p={};return(i||u||a)&&(p=zt({motionAppear:!0},Hq({motion:i,prefixCls:t,transitionName:u,animation:a}))),Dne.createElement(rE,Pn({},p,{visible:r,removeOnLeave:!0}),function(h){var g=h.className;return Dne.createElement("div",{style:{zIndex:n},className:(0,CKe.default)("".concat(t,"-mask"),g)})})}var oc=Z(we()),g1=Z(we());function AKe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),r.push.apply(r,n)}return r}function DKe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AKe(Object(r),!0).forEach(function(n){OTr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AKe(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rne(e){"@babel/helpers - typeof";return Rne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rne(e)}function OTr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NA,LTr={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Kq(){if(NA!==void 0)return NA;NA="";var e=document.createElement("p").style,t="Transform";for(var r in LTr)r+t in e&&(NA=r);return NA}function VKe(){return Kq()?"".concat(Kq(),"TransitionProperty"):"transitionProperty"}function Xq(){return Kq()?"".concat(Kq(),"Transform"):"transform"}function NKe(e,t){var r=VKe();r&&(e.style[r]=t,r!=="transitionProperty"&&(e.style.transitionProperty=t))}function One(e,t){var r=Xq();r&&(e.style[r]=t,r!=="transform"&&(e.style.transform=t))}function PTr(e){return e.style.transitionProperty||e.style[VKe()]}function kTr(e){var t=window.getComputedStyle(e,null),r=t.getPropertyValue("transform")||t.getPropertyValue(Xq());if(r&&r!=="none"){var n=r.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(n[12]||n[4],0),y:parseFloat(n[13]||n[5],0)}}return{x:0,y:0}}var RTr=/matrix\((.*)\)/,jTr=/matrix3d\((.*)\)/;function qTr(e,t){var r=window.getComputedStyle(e,null),n=r.getPropertyValue("transform")||r.getPropertyValue(Xq());if(n&&n!=="none"){var o,i=n.match(RTr);if(i)i=i[1],o=i.split(",").map(function(u){return parseFloat(u,10)}),o[4]=t.x,o[5]=t.y,One(e,"matrix(".concat(o.join(","),")"));else{var a=n.match(jTr)[1];o=a.split(",").map(function(u){return parseFloat(u,10)}),o[12]=t.x,o[13]=t.y,One(e,"matrix3d(".concat(o.join(","),")"))}}else One(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var zTr=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,PA;function OKe(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function nE(e,t,r){var n=r;if(Rne(t)==="object"){for(var o in t)t.hasOwnProperty(o)&&nE(e,o,t[o]);return}if(typeof n!="undefined"){typeof n=="number"&&(n="".concat(n,"px")),e.style[t]=n;return}return PA(e,t)}function FTr(e){var t,r,n,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return t=e.getBoundingClientRect(),r=Math.floor(t.left),n=Math.floor(t.top),r-=a.clientLeft||i.clientLeft||0,n-=a.clientTop||i.clientTop||0,{left:r,top:n}}function GKe(e,t){var r=e["page".concat(t?"Y":"X","Offset")],n="scroll".concat(t?"Top":"Left");if(typeof r!="number"){var o=e.document;r=o.documentElement[n],typeof r!="number"&&(r=o.body[n])}return r}function HKe(e){return GKe(e)}function WKe(e){return GKe(e,!0)}function LA(e){var t=FTr(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return t.left+=HKe(n),t.top+=WKe(n),t}function Fne(e){return e!=null&&e==e.window}function $Ke(e){return Fne(e)?e.document:e.nodeType===9?e:e.ownerDocument}function UTr(e,t,r){var n=r,o="",i=$Ke(e);return n=n||i.defaultView.getComputedStyle(e,null),n&&(o=n.getPropertyValue(t)||n[t]),o}var BTr=new RegExp("^(".concat(zTr,")(?!px)[a-z%]+$"),"i"),VTr=/^(top|right|bottom|left)$/,Lne="currentStyle",Pne="runtimeStyle",m1="left",GTr="px";function HTr(e,t){var r=e[Lne]&&e[Lne][t];if(BTr.test(r)&&!VTr.test(t)){var n=e.style,o=n[m1],i=e[Pne][m1];e[Pne][m1]=e[Lne][m1],n[m1]=t==="fontSize"?"1em":r||0,r=n.pixelLeft+GTr,n[m1]=o,e[Pne][m1]=i}return r===""?"auto":r}typeof window!="undefined"&&(PA=window.getComputedStyle?UTr:HTr);function Wq(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function LKe(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function PKe(e,t,r){nE(e,"position")==="static"&&(e.style.position="relative");var n=-999,o=-999,i=Wq("left",r),a=Wq("top",r),u=LKe(i),p=LKe(a);i!=="left"&&(n=999),a!=="top"&&(o=999);var h="",g=LA(e);("left"in t||"top"in t)&&(h=PTr(e)||"",NKe(e,"none")),"left"in t&&(e.style[u]="",e.style[i]="".concat(n,"px")),"top"in t&&(e.style[p]="",e.style[a]="".concat(o,"px")),OKe(e);var x=LA(e),b={};for(var T in t)if(t.hasOwnProperty(T)){var A=Wq(T,r),L=T==="left"?n:o,P=g[T]-x[T];A===T?b[A]=L+P:b[A]=L-P}nE(e,b),OKe(e),("left"in t||"top"in t)&&NKe(e,h);var k={};for(var q in t)if(t.hasOwnProperty(q)){var U=Wq(q,r),H=t[q]-g[q];q===U?k[U]=b[U]+H:k[U]=b[U]-H}nE(e,k)}function WTr(e,t){var r=LA(e),n=kTr(e),o={x:n.x,y:n.y};"left"in t&&(o.x=n.x+t.left-r.left),"top"in t&&(o.y=n.y+t.top-r.top),qTr(e,o)}function $Tr(e,t,r){if(r.ignoreShake){var n=LA(e),o=n.left.toFixed(0),i=n.top.toFixed(0),a=t.left.toFixed(0),u=t.top.toFixed(0);if(o===a&&i===u)return}r.useCssRight||r.useCssBottom?PKe(e,t,r):r.useCssTransform&&Xq()in document.body.style?WTr(e,t):PKe(e,t,r)}function Une(e,t){for(var r=0;r<e.length;r++)t(e[r])}function YKe(e){return PA(e,"boxSizing")==="border-box"}var YTr=["margin","border","padding"],jne=-1,ZTr=2,qne=1,KTr=0;function XTr(e,t,r){var n={},o=e.style,i;for(i in t)t.hasOwnProperty(i)&&(n[i]=o[i],o[i]=t[i]);r.call(e);for(i in t)t.hasOwnProperty(i)&&(o[i]=n[i])}function OA(e,t,r){var n=0,o,i,a;for(i=0;i<t.length;i++)if(o=t[i],o)for(a=0;a<r.length;a++){var u=void 0;o==="border"?u="".concat(o).concat(r[a],"Width"):u=o+r[a],n+=parseFloat(PA(e,u))||0}return n}var gd={getParent:function(t){var r=t;do r.nodeType===11&&r.host?r=r.host:r=r.parentNode;while(r&&r.nodeType!==1&&r.nodeType!==9);return r}};Une(["Width","Height"],function(e){gd["doc".concat(e)]=function(t){var r=t.document;return Math.max(r.documentElement["scroll".concat(e)],r.body["scroll".concat(e)],gd["viewport".concat(e)](r))},gd["viewport".concat(e)]=function(t){var r="client".concat(e),n=t.document,o=n.body,i=n.documentElement,a=i[r];return n.compatMode==="CSS1Compat"&&a||o&&o[r]||a}});function kKe(e,t,r){var n=r;if(Fne(e))return t==="width"?gd.viewportWidth(e):gd.viewportHeight(e);if(e.nodeType===9)return t==="width"?gd.docWidth(e):gd.docHeight(e);var o=t==="width"?["Left","Right"]:["Top","Bottom"],i=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),a=YKe(e),u=0;(i==null||i<=0)&&(i=void 0,u=PA(e,t),(u==null||Number(u)<0)&&(u=e.style[t]||0),u=Math.floor(parseFloat(u))||0),n===void 0&&(n=a?qne:jne);var p=i!==void 0||a,h=i||u;return n===jne?p?h-OA(e,["border","padding"],o):u:p?n===qne?h:h+(n===ZTr?-OA(e,["border"],o):OA(e,["margin"],o)):u+OA(e,YTr.slice(n),o)}var JTr={position:"absolute",visibility:"hidden",display:"block"};function RKe(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,o=t[0];return o.offsetWidth!==0?n=kKe.apply(void 0,t):XTr(o,JTr,function(){n=kKe.apply(void 0,t)}),n}Une(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);gd["outer".concat(t)]=function(n,o){return n&&RKe(n,e,o?KTr:qne)};var r=e==="width"?["Left","Right"]:["Top","Bottom"];gd[e]=function(n,o){var i=o;if(i!==void 0){if(n){var a=YKe(n);return a&&(i+=OA(n,["padding","border"],r)),nE(n,e,i)}return}return n&&RKe(n,e,jne)}});function ZKe(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}var ln={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var r=t.ownerDocument||t;return r.defaultView||r.parentWindow},getDocument:$Ke,offset:function(t,r,n){if(typeof r!="undefined")$Tr(t,r,n||{});else return LA(t)},isWindow:Fne,each:Une,css:nE,clone:function(t){var r,n={};for(r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);var o=t.overflow;if(o)for(r in t)t.hasOwnProperty(r)&&(n.overflow[r]=t.overflow[r]);return n},mix:ZKe,getWindowScrollLeft:function(t){return HKe(t)},getWindowScrollTop:function(t){return WKe(t)},merge:function(){for(var t={},r=0;r<arguments.length;r++)ln.mix(t,r<0||arguments.length<=r?void 0:arguments[r]);return t},viewportWidth:0,viewportHeight:0};ZKe(ln,gd);var kne=ln.getParent;function zne(e){if(ln.isWindow(e)||e.nodeType===9)return null;var t=ln.getDocument(e),r=t.body,n,o=ln.css(e,"position"),i=o==="fixed"||o==="absolute";if(!i)return e.nodeName.toLowerCase()==="html"?null:kne(e);for(n=kne(e);n&&n!==r&&n.nodeType!==9;n=kne(n))if(o=ln.css(n,"position"),o!=="static")return n;return null}var jKe=ln.getParent;function QTr(e){if(ln.isWindow(e)||e.nodeType===9)return!1;var t=ln.getDocument(e),r=t.body,n=null;for(n=jKe(e);n&&n!==r&&n!==t;n=jKe(n)){var o=ln.css(n,"position");if(o==="fixed")return!0}return!1}function Bne(e,t){for(var r={left:0,right:1/0,top:0,bottom:1/0},n=zne(e),o=ln.getDocument(e),i=o.defaultView||o.parentWindow,a=o.body,u=o.documentElement;n;){if((navigator.userAgent.indexOf("MSIE")===-1||n.clientWidth!==0)&&n!==a&&n!==u&&ln.css(n,"overflow")!=="visible"){var p=ln.offset(n);p.left+=n.clientLeft,p.top+=n.clientTop,r.top=Math.max(r.top,p.top),r.right=Math.min(r.right,p.left+n.clientWidth),r.bottom=Math.min(r.bottom,p.top+n.clientHeight),r.left=Math.max(r.left,p.left)}else if(n===a||n===u)break;n=zne(n)}var h=null;if(!ln.isWindow(e)&&e.nodeType!==9){h=e.style.position;var g=ln.css(e,"position");g==="absolute"&&(e.style.position="fixed")}var x=ln.getWindowScrollLeft(i),b=ln.getWindowScrollTop(i),T=ln.viewportWidth(i),A=ln.viewportHeight(i),L=u.scrollWidth,P=u.scrollHeight,k=window.getComputedStyle(a);if(k.overflowX==="hidden"&&(L=i.innerWidth),k.overflowY==="hidden"&&(P=i.innerHeight),e.style&&(e.style.position=h),t||QTr(e))r.left=Math.max(r.left,x),r.top=Math.max(r.top,b),r.right=Math.min(r.right,x+T),r.bottom=Math.min(r.bottom,b+A);else{var q=Math.max(L,x+T);r.right=Math.min(r.right,q);var U=Math.max(P,b+A);r.bottom=Math.min(r.bottom,U)}return r.top>=0&&r.left>=0&&r.bottom>r.top&&r.right>r.left?r:null}function eMr(e,t,r,n){var o=ln.clone(e),i={width:t.width,height:t.height};return n.adjustX&&o.left<r.left&&(o.left=r.left),n.resizeWidth&&o.left>=r.left&&o.left+i.width>r.right&&(i.width-=o.left+i.width-r.right),n.adjustX&&o.left+i.width>r.right&&(o.left=Math.max(r.right-i.width,r.left)),n.adjustY&&o.top<r.top&&(o.top=r.top),n.resizeHeight&&o.top>=r.top&&o.top+i.height>r.bottom&&(i.height-=o.top+i.height-r.bottom),n.adjustY&&o.top+i.height>r.bottom&&(o.top=Math.max(r.bottom-i.height,r.top)),ln.mix(o,i)}function Vne(e){var t,r,n;if(!ln.isWindow(e)&&e.nodeType!==9)t=ln.offset(e),r=ln.outerWidth(e),n=ln.outerHeight(e);else{var o=ln.getWindow(e);t={left:ln.getWindowScrollLeft(o),top:ln.getWindowScrollTop(o)},r=ln.viewportWidth(o),n=ln.viewportHeight(o)}return t.width=r,t.height=n,t}function qKe(e,t){var r=t.charAt(0),n=t.charAt(1),o=e.width,i=e.height,a=e.left,u=e.top;return r==="c"?u+=i/2:r==="b"&&(u+=i),n==="c"?a+=o/2:n==="r"&&(a+=o),{left:a,top:u}}function $q(e,t,r,n,o){var i=qKe(t,r[1]),a=qKe(e,r[0]),u=[a.left-i.left,a.top-i.top];return{left:Math.round(e.left-u[0]+n[0]-o[0]),top:Math.round(e.top-u[1]+n[1]-o[1])}}function zKe(e,t,r){return e.left<r.left||e.left+t.width>r.right}function FKe(e,t,r){return e.top<r.top||e.top+t.height>r.bottom}function tMr(e,t,r){return e.left>r.right||e.left+t.width<r.left}function rMr(e,t,r){return e.top>r.bottom||e.top+t.height<r.top}function Yq(e,t,r){var n=[];return ln.each(e,function(o){n.push(o.replace(t,function(i){return r[i]}))}),n}function Zq(e,t){return e[t]=-e[t],e}function UKe(e,t){var r;return /%$/.test(e)?r=parseInt(e.substring(0,e.length-1),10)/100*t:r=parseInt(e,10),r||0}function BKe(e,t){e[0]=UKe(e[0],t.width),e[1]=UKe(e[1],t.height)}function KKe(e,t,r,n){var o=r.points,i=r.offset||[0,0],a=r.targetOffset||[0,0],u=r.overflow,p=r.source||e;i=[].concat(i),a=[].concat(a),u=u||{};var h={},g=0,x=!!(u&&u.alwaysByViewport),b=Bne(p,x),T=Vne(p);BKe(i,T),BKe(a,t);var A=$q(T,t,o,i,a),L=ln.merge(T,A);if(b&&(u.adjustX||u.adjustY)&&n){if(u.adjustX&&zKe(A,T,b)){var P=Yq(o,/[lr]/gi,{l:"r",r:"l"}),k=Zq(i,0),q=Zq(a,0),U=$q(T,t,P,k,q);tMr(U,T,b)||(g=1,o=P,i=k,a=q)}if(u.adjustY&&FKe(A,T,b)){var H=Yq(o,/[tb]/gi,{t:"b",b:"t"}),X=Zq(i,1),ee=Zq(a,1),ne=$q(T,t,H,X,ee);rMr(ne,T,b)||(g=1,o=H,i=X,a=ee)}g&&(A=$q(T,t,o,i,a),ln.mix(L,A));var pe=zKe(A,T,b),ue=FKe(A,T,b);if(pe||ue){var Ie=o;pe&&(Ie=Yq(o,/[lr]/gi,{l:"r",r:"l"})),ue&&(Ie=Yq(o,/[tb]/gi,{t:"b",b:"t"})),o=Ie,i=r.offset||[0,0],a=r.targetOffset||[0,0]}h.adjustX=u.adjustX&&pe,h.adjustY=u.adjustY&&ue,(h.adjustX||h.adjustY)&&(L=eMr(A,T,b,h))}return L.width!==T.width&&ln.css(p,"width",ln.width(p)+L.width-T.width),L.height!==T.height&&ln.css(p,"height",ln.height(p)+L.height-T.height),ln.offset(p,{left:L.left,top:L.top},{useCssRight:r.useCssRight,useCssBottom:r.useCssBottom,useCssTransform:r.useCssTransform,ignoreShake:r.ignoreShake}),{points:o,offset:i,targetOffset:a,overflow:h}}function nMr(e,t){var r=Bne(e,t),n=Vne(e);return!r||n.left+n.width<=r.left||n.top+n.height<=r.top||n.left>=r.right||n.top>=r.bottom}function Jq(e,t,r){var n=r.target||t,o=Vne(n),i=!nMr(n,r.overflow&&r.overflow.alwaysByViewport);return KKe(e,o,r,i)}Jq.__getOffsetParent=zne;Jq.__getVisibleRectForElement=Bne;function XKe(e,t,r){var n,o,i=ln.getDocument(e),a=i.defaultView||i.parentWindow,u=ln.getWindowScrollLeft(a),p=ln.getWindowScrollTop(a),h=ln.viewportWidth(a),g=ln.viewportHeight(a);"pageX"in t?n=t.pageX:n=u+t.clientX,"pageY"in t?o=t.pageY:o=p+t.clientY;var x={left:n,top:o,width:0,height:0},b=n>=0&&n<=u+h&&o>=0&&o<=p+g,T=[r.points[0],"cc"];return KKe(e,x,DKe(DKe({},r),{},{points:T}),b)}function oMr(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=new Set;function o(i,a){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,p=n.has(i);if(pd(!p,"Warning: There may be circular references"),p)return!1;if(i===a)return!0;if(r&&u>1)return!1;n.add(i);var h=u+1;if(Array.isArray(i)){if(!Array.isArray(a)||i.length!==a.length)return!1;for(var g=0;g<i.length;g++)if(!o(i[g],a[g],h))return!1;return!0}if(i&&a&&no(i)==="object"&&no(a)==="object"){var x=Object.keys(i);return x.length!==Object.keys(a).length?!1:x.every(function(b){return o(i[b],a[b],h)})}return!1}return o(e,t)}var JKe=oMr;var QKe=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),r=t.width,n=t.height;if(r||n)return!0}if(e.getBoundingClientRect){var o=e.getBoundingClientRect(),i=o.width,a=o.height;if(i||a)return!0}}return!1};var ws=Z(we());var Gne=Z(we()),eXe=function(e,t){var r=Gne.default.useRef(!1),n=Gne.default.useRef(null);function o(){window.clearTimeout(n.current)}function i(a){if(o(),!r.current||a===!0){if(e(a)===!1)return;r.current=!0,n.current=window.setTimeout(function(){r.current=!1},t)}else n.current=window.setTimeout(function(){r.current=!1,i()},t)}return[i,function(){r.current=!1,o()}]};var rXe=function(){if(typeof Map!="undefined")return Map;function e(t,r){var n=-1;return t.some(function(o,i){return o[0]===r?(n=i,!0):!1}),n}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(r){var n=e(this.__entries__,r),o=this.__entries__[n];return o&&o[1]},t.prototype.set=function(r,n){var o=e(this.__entries__,r);~o?this.__entries__[o][1]=n:this.__entries__.push([r,n])},t.prototype.delete=function(r){var n=this.__entries__,o=e(n,r);~o&&n.splice(o,1)},t.prototype.has=function(r){return!!~e(this.__entries__,r)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(r,n){n===void 0&&(n=null);for(var o=0,i=this.__entries__;o<i.length;o++){var a=i[o];r.call(n,a[1],a[0])}},t}()}(),Hne=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,Qq=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),iMr=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Qq):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),aMr=2;function sMr(e,t){var r=!1,n=!1,o=0;function i(){r&&(r=!1,e()),n&&u()}function a(){iMr(i)}function u(){var p=Date.now();if(r){if(p-o<aMr)return;n=!0}else r=!0,n=!1,setTimeout(a,t);o=p}return u}var lMr=20,uMr=["top","right","bottom","left","width","height","size","weight"],cMr=typeof MutationObserver!="undefined",fMr=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=sMr(this.refresh.bind(this),lMr)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var r=this.observers_,n=r.indexOf(t);~n&&r.splice(n,1),!r.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(r){return r.gatherActive(),r.hasActive()});return t.forEach(function(r){return r.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Hne||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),cMr?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Hne||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var r=t.propertyName,n=r===void 0?"":r,o=uMr.some(function(i){return!!~n.indexOf(i)});o&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),nXe=function(e,t){for(var r=0,n=Object.keys(t);r<n.length;r++){var o=n[r];Object.defineProperty(e,o,{value:t[o],enumerable:!1,writable:!1,configurable:!0})}return e},oE=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||Qq},oXe=tz(0,0,0,0);function ez(e){return parseFloat(e)||0}function tXe(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return t.reduce(function(n,o){var i=e["border-"+o+"-width"];return n+ez(i)},0)}function pMr(e){for(var t=["top","right","bottom","left"],r={},n=0,o=t;n<o.length;n++){var i=o[n],a=e["padding-"+i];r[i]=ez(a)}return r}function dMr(e){var t=e.getBBox();return tz(0,0,t.width,t.height)}function hMr(e){var t=e.clientWidth,r=e.clientHeight;if(!t&&!r)return oXe;var n=oE(e).getComputedStyle(e),o=pMr(n),i=o.left+o.right,a=o.top+o.bottom,u=ez(n.width),p=ez(n.height);if(n.boxSizing==="border-box"&&(Math.round(u+i)!==t&&(u-=tXe(n,"left","right")+i),Math.round(p+a)!==r&&(p-=tXe(n,"top","bottom")+a)),!gMr(e)){var h=Math.round(u+i)-t,g=Math.round(p+a)-r;Math.abs(h)!==1&&(u-=h),Math.abs(g)!==1&&(p-=g)}return tz(o.left,o.top,u,p)}var mMr=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof oE(e).SVGGraphicsElement}:function(e){return e instanceof oE(e).SVGElement&&typeof e.getBBox=="function"}}();function gMr(e){return e===oE(e).document.documentElement}function vMr(e){return Hne?mMr(e)?dMr(e):hMr(e):oXe}function yMr(e){var t=e.x,r=e.y,n=e.width,o=e.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,a=Object.create(i.prototype);return nXe(a,{x:t,y:r,width:n,height:o,top:r,right:t+n,bottom:o+r,left:t}),a}function tz(e,t,r,n){return{x:e,y:t,width:r,height:n}}var _Mr=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=tz(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=vMr(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),xMr=function(){function e(t,r){var n=yMr(r);nXe(this,{target:t,contentRect:n})}return e}(),bMr=function(){function e(t,r,n){if(this.activeObservations_=[],this.observations_=new rXe,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=r,this.callbackCtx_=n}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof oE(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)||(r.set(t,new _Mr(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof oE(t).Element))throw new TypeError("parameter 1 is not of type \"Element\".");var r=this.observations_;r.has(t)&&(r.delete(t),r.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(r){r.isActive()&&t.activeObservations_.push(r)})},e.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,r=this.activeObservations_.map(function(n){return new xMr(n.target,n.broadcastRect())});this.callback_.call(t,r,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),iXe=typeof WeakMap!="undefined"?new WeakMap:new rXe,aXe=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var r=fMr.getInstance(),n=new bMr(t,r,this);iXe.set(this,n)}return e}();["observe","unobserve","disconnect"].forEach(function(e){aXe.prototype[e]=function(){var t;return(t=iXe.get(this))[e].apply(t,arguments)}});var wMr=function(){return typeof Qq.ResizeObserver!="undefined"?Qq.ResizeObserver:aXe}(),sXe=wMr;function lXe(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function uXe(e,t){e!==document.activeElement&&p1(t,e)&&typeof e.focus=="function"&&e.focus()}function Wne(e,t){var r=null,n=null;function o(a){var u=Kn(a,1),p=u[0].target;if(document.documentElement.contains(p)){var h=p.getBoundingClientRect(),g=h.width,x=h.height,b=Math.floor(g),T=Math.floor(x);(r!==b||n!==T)&&Promise.resolve().then(function(){t({width:b,height:T})}),r=b,n=T}}var i=new sXe(o);return e&&i.observe(e),function(){i.disconnect()}}function cXe(e){return typeof e!="function"?null:e()}function fXe(e){return no(e)!=="object"||!e?null:e}var EMr=function(t,r){var n=t.children,o=t.disabled,i=t.target,a=t.align,u=t.onAlign,p=t.monitorWindowResize,h=t.monitorBufferTime,g=h===void 0?0:h,x=ws.default.useRef({}),b=ws.default.useRef(),T=ws.default.Children.only(n),A=ws.default.useRef({});A.current.disabled=o,A.current.target=i,A.current.align=a,A.current.onAlign=u;var L=eXe(function(){var Re=A.current,Te=Re.disabled,Ee=Re.target,Ye=Re.align,Qe=Re.onAlign,qe=b.current;if(!Te&&Ee&&qe){var Ue,Ne=cXe(Ee),et=fXe(Ee);x.current.element=Ne,x.current.point=et,x.current.align=Ye;var st=document,ft=st.activeElement;return Ne&&QKe(Ne)?Ue=Jq(qe,Ne,Ye):et&&(Ue=XKe(qe,et,Ye)),uXe(ft,qe),Qe&&Ue&&Qe(qe,Ue),!0}return!1},g),P=Kn(L,2),k=P[0],q=P[1],U=ws.default.useState(),H=Kn(U,2),X=H[0],ee=H[1],ne=ws.default.useState(),pe=Kn(ne,2),ue=pe[0],Ie=pe[1];return MA(function(){ee(cXe(i)),Ie(fXe(i))}),ws.default.useEffect(function(){(x.current.element!==X||!lXe(x.current.point,ue)||!JKe(x.current.align,a))&&k()}),ws.default.useEffect(function(){var Re=Wne(b.current,k);return Re},[b.current]),ws.default.useEffect(function(){var Re=Wne(X,k);return Re},[X]),ws.default.useEffect(function(){o?q():k()},[o]),ws.default.useEffect(function(){if(p){var Re=Ol(window,"resize",k);return Re.remove}},[p]),ws.default.useEffect(function(){return function(){q()}},[]),ws.default.useImperativeHandle(r,function(){return{forceAlign:function(){return k(!0)}}}),ws.default.isValidElement(T)&&(T=ws.default.cloneElement(T,{ref:Qw(T.ref,b)})),T},pXe=ws.default.forwardRef(EMr);pXe.displayName="Align";var dXe=pXe;var hXe=dXe;var xXe=Z(Zn());function rz(){"use strict";rz=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(qe,Ue,Ne){qe[Ue]=Ne.value},i=typeof Symbol=="function"?Symbol:{},a=i.iterator||"@@iterator",u=i.asyncIterator||"@@asyncIterator",p=i.toStringTag||"@@toStringTag";function h(qe,Ue,Ne){return Object.defineProperty(qe,Ue,{value:Ne,enumerable:!0,configurable:!0,writable:!0}),qe[Ue]}try{h({},"")}catch(qe){h=function(Ne,et,st){return Ne[et]=st}}function g(qe,Ue,Ne,et){var st=Ue&&Ue.prototype instanceof k?Ue:k,ft=Object.create(st.prototype),Ze=new Ye(et||[]);return o(ft,"_invoke",{value:Ie(qe,Ne,Ze)}),ft}function x(qe,Ue,Ne){try{return{type:"normal",arg:qe.call(Ue,Ne)}}catch(et){return{type:"throw",arg:et}}}t.wrap=g;var b="suspendedStart",T="suspendedYield",A="executing",L="completed",P={};function k(){}function q(){}function U(){}var H={};h(H,a,function(){return this});var X=Object.getPrototypeOf,ee=X&&X(X(Qe([])));ee&&ee!==r&&n.call(ee,a)&&(H=ee);var ne=U.prototype=k.prototype=Object.create(H);function pe(qe){["next","throw","return"].forEach(function(Ue){h(qe,Ue,function(Ne){return this._invoke(Ue,Ne)})})}function ue(qe,Ue){function Ne(st,ft,Ze,tt){var lt=x(qe[st],qe,ft);if(lt.type!=="throw"){var ze=lt.arg,ge=ze.value;return ge&&no(ge)=="object"&&n.call(ge,"__await")?Ue.resolve(ge.__await).then(function(We){Ne("next",We,Ze,tt)},function(We){Ne("throw",We,Ze,tt)}):Ue.resolve(ge).then(function(We){ze.value=We,Ze(ze)},function(We){return Ne("throw",We,Ze,tt)})}tt(lt.arg)}var et;o(this,"_invoke",{value:function(ft,Ze){function tt(){return new Ue(function(lt,ze){Ne(ft,Ze,lt,ze)})}return et=et?et.then(tt,tt):tt()}})}function Ie(qe,Ue,Ne){var et=b;return function(st,ft){if(et===A)throw Error("Generator is already running");if(et===L){if(st==="throw")throw ft;return{value:e,done:!0}}for(Ne.method=st,Ne.arg=ft;;){var Ze=Ne.delegate;if(Ze){var tt=Re(Ze,Ne);if(tt){if(tt===P)continue;return tt}}if(Ne.method==="next")Ne.sent=Ne._sent=Ne.arg;else if(Ne.method==="throw"){if(et===b)throw et=L,Ne.arg;Ne.dispatchException(Ne.arg)}else Ne.method==="return"&&Ne.abrupt("return",Ne.arg);et=A;var lt=x(qe,Ue,Ne);if(lt.type==="normal"){if(et=Ne.done?L:T,lt.arg===P)continue;return{value:lt.arg,done:Ne.done}}lt.type==="throw"&&(et=L,Ne.method="throw",Ne.arg=lt.arg)}}}function Re(qe,Ue){var Ne=Ue.method,et=qe.iterator[Ne];if(et===e)return Ue.delegate=null,Ne==="throw"&&qe.iterator.return&&(Ue.method="return",Ue.arg=e,Re(qe,Ue),Ue.method==="throw")||Ne!=="return"&&(Ue.method="throw",Ue.arg=new TypeError("The iterator does not provide a '"+Ne+"' method")),P;var st=x(et,qe.iterator,Ue.arg);if(st.type==="throw")return Ue.method="throw",Ue.arg=st.arg,Ue.delegate=null,P;var ft=st.arg;return ft?ft.done?(Ue[qe.resultName]=ft.value,Ue.next=qe.nextLoc,Ue.method!=="return"&&(Ue.method="next",Ue.arg=e),Ue.delegate=null,P):ft:(Ue.method="throw",Ue.arg=new TypeError("iterator result is not an object"),Ue.delegate=null,P)}function Te(qe){var Ue={tryLoc:qe[0]};1 in qe&&(Ue.catchLoc=qe[1]),2 in qe&&(Ue.finallyLoc=qe[2],Ue.afterLoc=qe[3]),this.tryEntries.push(Ue)}function Ee(qe){var Ue=qe.completion||{};Ue.type="normal",delete Ue.arg,qe.completion=Ue}function Ye(qe){this.tryEntries=[{tryLoc:"root"}],qe.forEach(Te,this),this.reset(!0)}function Qe(qe){if(qe||qe===""){var Ue=qe[a];if(Ue)return Ue.call(qe);if(typeof qe.next=="function")return qe;if(!isNaN(qe.length)){var Ne=-1,et=function st(){for(;++Ne<qe.length;)if(n.call(qe,Ne))return st.value=qe[Ne],st.done=!1,st;return st.value=e,st.done=!0,st};return et.next=et}}throw new TypeError(no(qe)+" is not iterable")}return q.prototype=U,o(ne,"constructor",{value:U,configurable:!0}),o(U,"constructor",{value:q,configurable:!0}),q.displayName=h(U,p,"GeneratorFunction"),t.isGeneratorFunction=function(qe){var Ue=typeof qe=="function"&&qe.constructor;return!!Ue&&(Ue===q||(Ue.displayName||Ue.name)==="GeneratorFunction")},t.mark=function(qe){return Object.setPrototypeOf?Object.setPrototypeOf(qe,U):(qe.__proto__=U,h(qe,p,"GeneratorFunction")),qe.prototype=Object.create(ne),qe},t.awrap=function(qe){return{__await:qe}},pe(ue.prototype),h(ue.prototype,u,function(){return this}),t.AsyncIterator=ue,t.async=function(qe,Ue,Ne,et,st){st===void 0&&(st=Promise);var ft=new ue(g(qe,Ue,Ne,et),st);return t.isGeneratorFunction(Ue)?ft:ft.next().then(function(Ze){return Ze.done?Ze.value:ft.next()})},pe(ne),h(ne,p,"Generator"),h(ne,a,function(){return this}),h(ne,"toString",function(){return"[object Generator]"}),t.keys=function(qe){var Ue=Object(qe),Ne=[];for(var et in Ue)Ne.push(et);return Ne.reverse(),function st(){for(;Ne.length;){var ft=Ne.pop();if(ft in Ue)return st.value=ft,st.done=!1,st}return st.done=!0,st}},t.values=Qe,Ye.prototype={constructor:Ye,reset:function(Ue){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Ee),!Ue)for(var Ne in this)Ne.charAt(0)==="t"&&n.call(this,Ne)&&!isNaN(+Ne.slice(1))&&(this[Ne]=e)},stop:function(){this.done=!0;var Ue=this.tryEntries[0].completion;if(Ue.type==="throw")throw Ue.arg;return this.rval},dispatchException:function(Ue){if(this.done)throw Ue;var Ne=this;function et(ze,ge){return Ze.type="throw",Ze.arg=Ue,Ne.next=ze,ge&&(Ne.method="next",Ne.arg=e),!!ge}for(var st=this.tryEntries.length-1;st>=0;--st){var ft=this.tryEntries[st],Ze=ft.completion;if(ft.tryLoc==="root")return et("end");if(ft.tryLoc<=this.prev){var tt=n.call(ft,"catchLoc"),lt=n.call(ft,"finallyLoc");if(tt&&lt){if(this.prev<ft.catchLoc)return et(ft.catchLoc,!0);if(this.prev<ft.finallyLoc)return et(ft.finallyLoc)}else if(tt){if(this.prev<ft.catchLoc)return et(ft.catchLoc,!0)}else{if(!lt)throw Error("try statement without catch or finally");if(this.prev<ft.finallyLoc)return et(ft.finallyLoc)}}}},abrupt:function(Ue,Ne){for(var et=this.tryEntries.length-1;et>=0;--et){var st=this.tryEntries[et];if(st.tryLoc<=this.prev&&n.call(st,"finallyLoc")&&this.prev<st.finallyLoc){var ft=st;break}}ft&&(Ue==="break"||Ue==="continue")&&ft.tryLoc<=Ne&&Ne<=ft.finallyLoc&&(ft=null);var Ze=ft?ft.completion:{};return Ze.type=Ue,Ze.arg=Ne,ft?(this.method="next",this.next=ft.finallyLoc,P):this.complete(Ze)},complete:function(Ue,Ne){if(Ue.type==="throw")throw Ue.arg;return Ue.type==="break"||Ue.type==="continue"?this.next=Ue.arg:Ue.type==="return"?(this.rval=this.arg=Ue.arg,this.method="return",this.next="end"):Ue.type==="normal"&&Ne&&(this.next=Ne),P},finish:function(Ue){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var et=this.tryEntries[Ne];if(et.finallyLoc===Ue)return this.complete(et.completion,et.afterLoc),Ee(et),P}},catch:function(Ue){for(var Ne=this.tryEntries.length-1;Ne>=0;--Ne){var et=this.tryEntries[Ne];if(et.tryLoc===Ue){var st=et.completion;if(st.type==="throw"){var ft=st.arg;Ee(et)}return ft}}throw Error("illegal catch attempt")},delegateYield:function(Ue,Ne,et){return this.delegate={iterator:Qe(Ue),resultName:Ne,nextLoc:et},this.method==="next"&&(this.arg=e),P}},t}function mXe(e,t,r,n,o,i,a){try{var u=e[i](a),p=u.value}catch(h){return void r(h)}u.done?t(p):Promise.resolve(p).then(n,o)}function gXe(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(p){mXe(i,n,o,a,u,"next",p)}function u(p){mXe(i,n,o,a,u,"throw",p)}a(void 0)})}}var iE=Z(we());var vXe=["measure","alignPre","align",null,"motion"],yXe=function(e,t){var r=am(null),n=Kn(r,2),o=n[0],i=n[1],a=(0,iE.useRef)();function u(g){i(g,!0)}function p(){bu.cancel(a.current)}function h(g){p(),a.current=bu(function(){u(function(x){switch(o){case"align":return"motion";case"motion":return"stable";default:}return x}),g==null||g()})}return(0,iE.useEffect)(function(){u("measure")},[e]),(0,iE.useEffect)(function(){switch(o){case"measure":t();break;default:}o&&(a.current=bu(gXe(rz().mark(function g(){var x,b;return rz().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:x=vXe.indexOf(o),b=vXe[x+1],b&&x!==-1&&u(b);case 3:case"end":return A.stop();}},g)}))))},[o]),(0,iE.useEffect)(function(){return function(){p()}},[]),[o,h]};var nz=Z(we()),_Xe=function(e){var t=nz.useState({width:0,height:0}),r=Kn(t,2),n=r[0],o=r[1];function i(u){var p=u.offsetWidth,h=u.offsetHeight,g=u.getBoundingClientRect(),x=g.width,b=g.height;Math.abs(p-x)<1&&Math.abs(h-b)<1&&(p=x,h=b),o({width:p,height:h})}var a=nz.useMemo(function(){var u={};if(e){var p=n.width,h=n.height;e.indexOf("height")!==-1&&h?u.height=h:e.indexOf("minHeight")!==-1&&h&&(u.minHeight=h),e.indexOf("width")!==-1&&p?u.width=p:e.indexOf("minWidth")!==-1&&p&&(u.minWidth=p)}return u},[e,n]);return[a,i]};var bXe=oc.forwardRef(function(e,t){var r=e.visible,n=e.prefixCls,o=e.className,i=e.style,a=e.children,u=e.zIndex,p=e.stretch,h=e.destroyPopupOnHide,g=e.forceRender,x=e.align,b=e.point,T=e.getRootDomNode,A=e.getClassNameFromAlign,L=e.onAlign,P=e.onMouseEnter,k=e.onMouseLeave,q=e.onMouseDown,U=e.onTouchStart,H=e.onClick,X=(0,g1.useRef)(),ee=(0,g1.useRef)(),ne=(0,g1.useState)(),pe=Kn(ne,2),ue=pe[0],Ie=pe[1],Re=_Xe(p),Te=Kn(Re,2),Ee=Te[0],Ye=Te[1];function Qe(){p&&Ye(T())}var qe=yXe(r,Qe),Ue=Kn(qe,2),Ne=Ue[0],et=Ue[1],st=(0,g1.useState)(0),ft=Kn(st,2),Ze=ft[0],tt=ft[1],lt=(0,g1.useRef)();MA(function(){Ne==="alignPre"&&tt(0)},[Ne]);function ze(){return b||T}function ge(){var Nt;(Nt=X.current)===null||Nt===void 0||Nt.forceAlign()}function We(Nt,Ae){var Lt=A(Ae);ue!==Lt&&Ie(Lt),tt(function(Wt){return Wt+1}),Ne==="align"&&(L==null||L(Nt,Ae))}MA(function(){Ne==="align"&&(Ze<3?ge():et(function(){var Nt;(Nt=lt.current)===null||Nt===void 0||Nt.call(lt)}))},[Ze]);var Oe=zt({},Hq(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(Nt){var Ae=Oe[Nt];Oe[Nt]=function(Lt,Wt){return et(),Ae==null?void 0:Ae(Lt,Wt)}});function at(){return new Promise(function(Nt){lt.current=Nt})}oc.useEffect(function(){!Oe.motionName&&Ne==="motion"&&et()},[Oe.motionName,Ne]),oc.useImperativeHandle(t,function(){return{forceAlign:ge,getElement:function(){return ee.current}}});var ot=zt(zt({},Ee),{},{zIndex:u,opacity:Ne==="motion"||Ne==="stable"||!r?void 0:0,pointerEvents:!r&&Ne!=="stable"?"none":void 0},i),Pt=!0;x!=null&&x.points&&(Ne==="align"||Ne==="stable")&&(Pt=!1);var Mt=a;return oc.Children.count(a)>1&&(Mt=oc.createElement("div",{className:"".concat(n,"-content")},a)),oc.createElement(rE,Pn({visible:r,ref:ee,leavedClassName:"".concat(n,"-hidden")},Oe,{onAppearPrepare:at,onEnterPrepare:at,removeOnLeave:h,forceRender:g}),function(Nt,Ae){var Lt=Nt.className,Wt=Nt.style,Ct=(0,xXe.default)(n,o,ue,Lt);return oc.createElement(hXe,{target:ze(),key:"popup",ref:X,monitorWindowResize:!0,disabled:Pt,align:x,onAlign:We},oc.createElement("div",{ref:Ae,className:Ct,onMouseEnter:P,onMouseLeave:k,onMouseDownCapture:q,onTouchStartCapture:U,onClick:H,style:zt(zt({},Wt),ot)},Mt))})});bXe.displayName="PopupInner";var wXe=bXe;var tf=Z(we());var EXe=Z(Zn()),SXe=tf.forwardRef(function(e,t){var r=e.prefixCls,n=e.visible,o=e.zIndex,i=e.children,a=e.mobile;a=a===void 0?{}:a;var u=a.popupClassName,p=a.popupStyle,h=a.popupMotion,g=h===void 0?{}:h,x=a.popupRender,b=e.onClick,T=tf.useRef();tf.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return T.current}}});var A=zt({zIndex:o},p),L=i;return tf.Children.count(i)>1&&(L=tf.createElement("div",{className:"".concat(r,"-content")},i)),x&&(L=x(L)),tf.createElement(rE,Pn({visible:n,ref:T,removeOnLeave:!0},g),function(P,k){var q=P.className,U=P.style,H=(0,EXe.default)(r,u,q);return tf.createElement("div",{ref:k,className:H,onClick:b,style:zt(zt({},U),A)},L)})});SXe.displayName="MobilePopupInner";var IXe=SXe;var SMr=["visible","mobile"],TXe=v1.forwardRef(function(e,t){var r=e.visible,n=e.mobile,o=Nl(e,SMr),i=(0,kA.useState)(r),a=Kn(i,2),u=a[0],p=a[1],h=(0,kA.useState)(!1),g=Kn(h,2),x=g[0],b=g[1],T=zt(zt({},o),{},{visible:u});(0,kA.useEffect)(function(){p(r),r&&n&&b(lKe())},[r,n]);var A=x?v1.createElement(IXe,Pn({},T,{mobile:n,ref:t})):v1.createElement(wXe,Pn({},T,{ref:t}));return v1.createElement("div",null,v1.createElement(Nne,T),A)});TXe.displayName="Popup";var MXe=TXe;var CXe=Z(we()),IMr=CXe.createContext(null),$ne=IMr;function Yne(){}function TMr(){return""}function MMr(e){return e?e.ownerDocument:window.document}var CMr=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function AMr(e){var t=function(r){nl(o,r);var n=ol(o);function o(i){var a;tl(this,o),a=n.call(this,i),Ot(Jr(a),"popupRef",ic.createRef()),Ot(Jr(a),"triggerRef",ic.createRef()),Ot(Jr(a),"portalContainer",void 0),Ot(Jr(a),"attachId",void 0),Ot(Jr(a),"clickOutsideHandler",void 0),Ot(Jr(a),"touchOutsideHandler",void 0),Ot(Jr(a),"contextMenuOutsideHandler1",void 0),Ot(Jr(a),"contextMenuOutsideHandler2",void 0),Ot(Jr(a),"mouseDownTimeout",void 0),Ot(Jr(a),"focusTime",void 0),Ot(Jr(a),"preClickTime",void 0),Ot(Jr(a),"preTouchTime",void 0),Ot(Jr(a),"delayTimer",void 0),Ot(Jr(a),"hasPopupMouseDown",void 0),Ot(Jr(a),"onMouseEnter",function(p){var h=a.props.mouseEnterDelay;a.fireEvents("onMouseEnter",p),a.delaySetPopupVisible(!0,h,h?null:p)}),Ot(Jr(a),"onMouseMove",function(p){a.fireEvents("onMouseMove",p),a.setPoint(p)}),Ot(Jr(a),"onMouseLeave",function(p){a.fireEvents("onMouseLeave",p),a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Ot(Jr(a),"onPopupMouseEnter",function(){a.clearDelayTimer()}),Ot(Jr(a),"onPopupMouseLeave",function(p){var h;p.relatedTarget&&!p.relatedTarget.setTimeout&&p1((h=a.popupRef.current)===null||h===void 0?void 0:h.getElement(),p.relatedTarget)||a.delaySetPopupVisible(!1,a.props.mouseLeaveDelay)}),Ot(Jr(a),"onFocus",function(p){a.fireEvents("onFocus",p),a.clearDelayTimer(),a.isFocusToShow()&&(a.focusTime=Date.now(),a.delaySetPopupVisible(!0,a.props.focusDelay))}),Ot(Jr(a),"onMouseDown",function(p){a.fireEvents("onMouseDown",p),a.preClickTime=Date.now()}),Ot(Jr(a),"onTouchStart",function(p){a.fireEvents("onTouchStart",p),a.preTouchTime=Date.now()}),Ot(Jr(a),"onBlur",function(p){a.fireEvents("onBlur",p),a.clearDelayTimer(),a.isBlurToHide()&&a.delaySetPopupVisible(!1,a.props.blurDelay)}),Ot(Jr(a),"onContextMenu",function(p){p.preventDefault(),a.fireEvents("onContextMenu",p),a.setPopupVisible(!0,p)}),Ot(Jr(a),"onContextMenuClose",function(){a.isContextMenuToShow()&&a.close()}),Ot(Jr(a),"onClick",function(p){if(a.fireEvents("onClick",p),a.focusTime){var h;if(a.preClickTime&&a.preTouchTime?h=Math.min(a.preClickTime,a.preTouchTime):a.preClickTime?h=a.preClickTime:a.preTouchTime&&(h=a.preTouchTime),Math.abs(h-a.focusTime)<20)return;a.focusTime=0}a.preClickTime=0,a.preTouchTime=0,a.isClickToShow()&&(a.isClickToHide()||a.isBlurToHide())&&p&&p.preventDefault&&p.preventDefault();var g=!a.state.popupVisible;(a.isClickToHide()&&!g||g&&a.isClickToShow())&&a.setPopupVisible(!a.state.popupVisible,p)}),Ot(Jr(a),"onPopupMouseDown",function(){if(a.hasPopupMouseDown=!0,clearTimeout(a.mouseDownTimeout),a.mouseDownTimeout=window.setTimeout(function(){a.hasPopupMouseDown=!1},0),a.context){var p;(p=a.context).onPopupMouseDown.apply(p,arguments)}}),Ot(Jr(a),"onDocumentClick",function(p){if(!(a.props.mask&&!a.props.maskClosable)){var h=p.target,g=a.getRootDomNode(),x=a.getPopupDomNode();(!p1(g,h)||a.isContextMenuOnly())&&!p1(x,h)&&!a.hasPopupMouseDown&&a.close()}}),Ot(Jr(a),"getRootDomNode",function(){var p=a.props.getTriggerDOMNode;if(p)return p(a.triggerRef.current);try{var h=IA(a.triggerRef.current);if(h)return h}catch(g){}return AXe.default.findDOMNode(Jr(a))}),Ot(Jr(a),"getPopupClassNameFromAlign",function(p){var h=[],g=a.props,x=g.popupPlacement,b=g.builtinPlacements,T=g.prefixCls,A=g.alignPoint,L=g.getPopupClassNameFromAlign;return x&&b&&h.push(aKe(b,T,p,A)),L&&h.push(L(p)),h.join(" ")}),Ot(Jr(a),"getComponent",function(){var p=a.props,h=p.prefixCls,g=p.destroyPopupOnHide,x=p.popupClassName,b=p.onPopupAlign,T=p.popupMotion,A=p.popupAnimation,L=p.popupTransitionName,P=p.popupStyle,k=p.mask,q=p.maskAnimation,U=p.maskTransitionName,H=p.maskMotion,X=p.zIndex,ee=p.popup,ne=p.stretch,pe=p.alignPoint,ue=p.mobile,Ie=p.forceRender,Re=p.onPopupClick,Te=a.state,Ee=Te.popupVisible,Ye=Te.point,Qe=a.getPopupAlign(),qe={};return a.isMouseEnterToShow()&&(qe.onMouseEnter=a.onPopupMouseEnter),a.isMouseLeaveToHide()&&(qe.onMouseLeave=a.onPopupMouseLeave),qe.onMouseDown=a.onPopupMouseDown,qe.onTouchStart=a.onPopupMouseDown,ic.createElement(MXe,Pn({prefixCls:h,destroyPopupOnHide:g,visible:Ee,point:pe&&Ye,className:x,align:Qe,onAlign:b,animation:A,getClassNameFromAlign:a.getPopupClassNameFromAlign},qe,{stretch:ne,getRootDomNode:a.getRootDomNode,style:P,mask:k,zIndex:X,transitionName:L,maskAnimation:q,maskTransitionName:U,maskMotion:H,ref:a.popupRef,motion:T,mobile:ue,forceRender:Ie,onClick:Re}),typeof ee=="function"?ee():ee)}),Ot(Jr(a),"attachParent",function(p){bu.cancel(a.attachId);var h=a.props,g=h.getPopupContainer,x=h.getDocument,b=a.getRootDomNode(),T;g?(b||g.length===0)&&(T=g(b)):T=x(a.getRootDomNode()).body,T?T.appendChild(p):a.attachId=bu(function(){a.attachParent(p)})}),Ot(Jr(a),"getContainer",function(){if(!a.portalContainer){var p=a.props.getDocument,h=p(a.getRootDomNode()).createElement("div");h.style.position="absolute",h.style.top="0",h.style.left="0",h.style.width="100%",a.portalContainer=h}return a.attachParent(a.portalContainer),a.portalContainer}),Ot(Jr(a),"setPoint",function(p){var h=a.props.alignPoint;!h||!p||a.setState({point:{pageX:p.pageX,pageY:p.pageY}})}),Ot(Jr(a),"handlePortalUpdate",function(){a.state.prevPopupVisible!==a.state.popupVisible&&a.props.afterPopupVisibleChange(a.state.popupVisible)}),Ot(Jr(a),"triggerContextValue",{onPopupMouseDown:a.onPopupMouseDown});var u;return"popupVisible"in i?u=!!i.popupVisible:u=!!i.defaultPopupVisible,a.state={prevPopupVisible:u,popupVisible:u},CMr.forEach(function(p){a["fire".concat(p)]=function(h){a.fireEvents(p,h)}}),a}return rl(o,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var a=this.props,u=this.state;if(u.popupVisible){var p;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(p=a.getDocument(this.getRootDomNode()),this.clickOutsideHandler=Ol(p,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(p=p||a.getDocument(this.getRootDomNode()),this.touchOutsideHandler=Ol(p,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(p=p||a.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=Ol(p,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=Ol(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),bu.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var a;return((a=this.popupRef.current)===null||a===void 0?void 0:a.getElement())||null}},{key:"getPopupAlign",value:function(){var a=this.props,u=a.popupPlacement,p=a.popupAlign,h=a.builtinPlacements;return u&&h?iKe(h,u,p):p}},{key:"setPopupVisible",value:function(a,u){var p=this.props.alignPoint,h=this.state.popupVisible;this.clearDelayTimer(),h!==a&&("popupVisible"in this.props||this.setState({popupVisible:a,prevPopupVisible:h}),this.props.onPopupVisibleChange(a)),p&&u&&a&&this.setPoint(u)}},{key:"delaySetPopupVisible",value:function(a,u,p){var h=this,g=u*1e3;if(this.clearDelayTimer(),g){var x=p?{pageX:p.pageX,pageY:p.pageY}:null;this.delayTimer=window.setTimeout(function(){h.setPopupVisible(a,x),h.clearDelayTimer()},g)}else this.setPopupVisible(a,p)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(a){var u=this.props.children.props,p=this.props;return u[a]&&p[a]?this["fire".concat(a)]:u[a]||p[a]}},{key:"isClickToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var a=this.props.action;return a==="contextMenu"||a.length===1&&a[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("contextMenu")!==-1||p.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var a=this.props,u=a.action,p=a.hideAction;return u.indexOf("click")!==-1||p.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("hover")!==-1||p.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var a=this.props,u=a.action,p=a.hideAction;return u.indexOf("hover")!==-1||p.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var a=this.props,u=a.action,p=a.showAction;return u.indexOf("focus")!==-1||p.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var a=this.props,u=a.action,p=a.hideAction;return u.indexOf("focus")!==-1||p.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var a;(a=this.popupRef.current)===null||a===void 0||a.forceAlign()}}},{key:"fireEvents",value:function(a,u){var p=this.props.children.props[a];p&&p(u);var h=this.props[a];h&&h(u)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var a=this.state.popupVisible,u=this.props,p=u.children,h=u.forceRender,g=u.alignPoint,x=u.className,b=u.autoDestroy,T=ic.Children.only(p),A={key:"trigger"};this.isContextMenuToShow()?A.onContextMenu=this.onContextMenu:A.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(A.onClick=this.onClick,A.onMouseDown=this.onMouseDown,A.onTouchStart=this.onTouchStart):(A.onClick=this.createTwoChains("onClick"),A.onMouseDown=this.createTwoChains("onMouseDown"),A.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(A.onMouseEnter=this.onMouseEnter,g&&(A.onMouseMove=this.onMouseMove)):A.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?A.onMouseLeave=this.onMouseLeave:A.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(A.onFocus=this.onFocus,A.onBlur=this.onBlur):(A.onFocus=this.createTwoChains("onFocus"),A.onBlur=this.createTwoChains("onBlur"));var L=(0,DXe.default)(T&&T.props&&T.props.className,x);L&&(A.className=L);var P=zt({},A);TA(T)&&(P.ref=Qw(this.triggerRef,T.ref));var k=ic.cloneElement(T,P),q;return(a||this.popupRef.current||h)&&(q=ic.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!a&&b&&(q=null),ic.createElement($ne.Provider,{value:this.triggerContextValue},k,q)}}],[{key:"getDerivedStateFromProps",value:function(a,u){var p=a.popupVisible,h={};return p!==void 0&&u.popupVisible!==p&&(h.popupVisible=p,h.prevPopupVisible=u.popupVisible),h}}]),o}(ic.Component);return Ot(t,"contextType",$ne),Ot(t,"defaultProps",{prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:TMr,getDocument:MMr,onPopupVisibleChange:Yne,afterPopupVisibleChange:Yne,onPopupAlign:Yne,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1}),t}var NXe=AMr(oKe);var rf={adjustX:1,adjustY:1},nf=[0,0],OXe={left:{points:["cr","cl"],overflow:rf,offset:[-4,0],targetOffset:nf},right:{points:["cl","cr"],overflow:rf,offset:[4,0],targetOffset:nf},top:{points:["bc","tc"],overflow:rf,offset:[0,-4],targetOffset:nf},bottom:{points:["tc","bc"],overflow:rf,offset:[0,4],targetOffset:nf},topLeft:{points:["bl","tl"],overflow:rf,offset:[0,-4],targetOffset:nf},leftTop:{points:["tr","tl"],overflow:rf,offset:[-4,0],targetOffset:nf},topRight:{points:["br","tr"],overflow:rf,offset:[0,-4],targetOffset:nf},rightTop:{points:["tl","tr"],overflow:rf,offset:[4,0],targetOffset:nf},bottomRight:{points:["tr","br"],overflow:rf,offset:[0,4],targetOffset:nf},rightBottom:{points:["bl","br"],overflow:rf,offset:[4,0],targetOffset:nf},bottomLeft:{points:["tl","bl"],overflow:rf,offset:[0,4],targetOffset:nf},leftBottom:{points:["br","bl"],overflow:rf,offset:[-4,0],targetOffset:nf}};var oz=Z(we()),LXe=Z(Zn());function iz(e){var t=e.showArrow,r=e.arrowContent,n=e.children,o=e.prefixCls,i=e.id,a=e.overlayInnerStyle,u=e.className,p=e.style;return oz.createElement("div",{className:(0,LXe.default)("".concat(o,"-content"),u),style:p},t!==!1&&oz.createElement("div",{className:"".concat(o,"-arrow"),key:"arrow"},r),oz.createElement("div",{className:"".concat(o,"-inner"),id:i,role:"tooltip",style:a},typeof n=="function"?n():n))}var DMr=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],NMr=function(t,r){var n=t.overlayClassName,o=t.trigger,i=o===void 0?["hover"]:o,a=t.mouseEnterDelay,u=a===void 0?0:a,p=t.mouseLeaveDelay,h=p===void 0?.1:p,g=t.overlayStyle,x=t.prefixCls,b=x===void 0?"rc-tooltip":x,T=t.children,A=t.onVisibleChange,L=t.afterVisibleChange,P=t.transitionName,k=t.animation,q=t.motion,U=t.placement,H=U===void 0?"right":U,X=t.align,ee=X===void 0?{}:X,ne=t.destroyTooltipOnHide,pe=ne===void 0?!1:ne,ue=t.defaultVisible,Ie=t.getTooltipContainer,Re=t.overlayInnerStyle,Te=t.arrowContent,Ee=t.overlay,Ye=t.id,Qe=t.showArrow,qe=Qe===void 0?!0:Qe,Ue=Nl(t,DMr),Ne=(0,aE.useRef)(null);(0,aE.useImperativeHandle)(r,function(){return Ne.current});var et=zt({},Ue);"visible"in t&&(et.popupVisible=t.visible);var st=function(){return Zne.createElement(iz,{showArrow:qe,arrowContent:Te,key:"content",prefixCls:b,id:Ye,overlayInnerStyle:Re},Ee)},ft=!1,Ze=!1;if(typeof pe=="boolean")ft=pe;else if(pe&&no(pe)==="object"){var tt=pe.keepParent;ft=tt===!0,Ze=tt===!1}return Zne.createElement(NXe,Pn({popupClassName:n,prefixCls:b,popup:st,action:i,builtinPlacements:OXe,popupPlacement:H,ref:Ne,popupAlign:ee,getPopupContainer:Ie,onPopupVisibleChange:A,afterPopupVisibleChange:L,popupTransitionName:P,popupAnimation:k,popupMotion:q,defaultPopupVisible:ue,destroyPopupOnHide:ft,autoDestroy:Ze,mouseLeaveDelay:h,popupStyle:g,mouseEnterDelay:u},et),T)},PXe=(0,aE.forwardRef)(NMr);var kXe=PXe;var OMr=lm.forwardRef(function(e,t){var r=e.visible,n=e.overlay,o=lm.useRef(null),i=Qw(t,o),a=lm.useRef(null);function u(){bu.cancel(a.current)}function p(){a.current=bu(function(){var h;(h=o.current)===null||h===void 0||h.forcePopupAlign()})}return lm.useEffect(function(){return r?p():u(),u},[r,n]),lm.createElement(kXe,Pn({ref:i},e))}),Kne=OMr;function Xne(e){var t;return t=function(r){nl(o,r);var n=ol(o);function o(){var i;return tl(this,o),i=n.apply(this,arguments),i.state={visibles:{}},i.handleTooltipVisibleChange=function(a,u){i.setState(function(p){return{visibles:zt(zt({},p.visibles),{},Ot({},a,u))}})},i.handleWithTooltip=function(a){var u=a.value,p=a.dragging,h=a.index,g=a.disabled,x=Nl(a,["value","dragging","index","disabled"]),b=i.props,T=b.tipFormatter,A=b.tipProps,L=b.handleStyle,P=b.getTooltipContainer,k=A.prefixCls,q=k===void 0?"rc-slider-tooltip":k,U=A.overlay,H=U===void 0?T(u):U,X=A.placement,ee=X===void 0?"top":X,ne=A.visible,pe=ne===void 0?!1:ne,ue=Nl(A,["prefixCls","overlay","placement","visible"]),Ie;return Array.isArray(L)?Ie=L[h]||L[0]:Ie=L,RA.default.createElement(Kne,Pn({},ue,{getTooltipContainer:P,prefixCls:q,overlay:H,placement:ee,visible:!g&&(i.state.visibles[h]||p)||pe,key:h}),RA.default.createElement(Xw,Pn({},x,{style:zt({},Ie),value:u,onMouseEnter:function(){return i.handleTooltipVisibleChange(h,!0)},onMouseLeave:function(){return i.handleTooltipVisibleChange(h,!1)}})))},i}return rl(o,[{key:"render",value:function(){return RA.default.createElement(e,Pn({},this.props,{handle:this.handleWithTooltip}))}}]),o}(RA.default.Component),t.defaultProps={tipFormatter:function(n){return n},handleStyle:[{}],tipProps:{},getTooltipContainer:function(n){return n.parentNode}},t}var az=GZe;az.Range=gq;az.Handle=Xw;az.createSliderWithTooltip=Xne;var sz=az;var sE=Z(xt(),1),pi=Z(we(),1);var um=Z(xt(),1),Su=Z(we(),1);function LMr(e,t){function r(n){return n>="0"&&n<="9"}return e.split("").some(n=>!r(n)&&n!==t)}var RXe=(0,Su.forwardRef)(function({className:t,value:r,onBlur:n=()=>{},onKeyDown:o=()=>{},onChange:i=()=>{},readOnly:a,tabIndex:u,placeholder:p},h){let[g,x]=(0,Su.useState)(r),b=(0,Su.useMemo)(()=>hr.getSettings().LANGUAGE_CODE===gv.DE?".":"/",[]),T=(0,Su.useCallback)(L=>{let P=`${L.target.value}`;LMr(P,b)||P.length>10||(x(L.target.value),i(L.target.value))},[b]),A=(0,Su.useCallback)(L=>{n(L,g)},[g,n]);return(0,Su.useEffect)(()=>{x(r)},[r]),Su.default.createElement("div",{className:"date-input-root"},Su.default.createElement("input",{className:Et(a&&"readonly",t),ref:h,value:g,onBlur:A,onKeyDown:o,onChange:T,readOnly:a!=null?a:void 0,tabIndex:u!=null?u:void 0,placeholder:p!=null?p:void 0}))});RXe.propTypes={value:um.default.string.isRequired,className:um.default.string,onBlur:um.default.func,onKeyDown:um.default.func,onChange:um.default.func,readOnly:um.default.bool,tabIndex:um.default.number,placeholder:um.default.string};var jXe=RXe;var jA=jXe;var qXe=({values:e,min:t,max:r,onChange:n})=>{let[o,i]=(0,pi.useState)(e),[a,u]=(0,pi.useState)(!1),[p,h]=(0,pi.useState)(0),[g,x]=(0,pi.useState)(1),b=(0,pi.useRef)(),T=(0,pi.useRef)(),A=(0,pi.useRef)(),{start:L,end:P}=(0,pi.useMemo)(()=>({start:Qu(o[0]*1e3),end:Qu(o[1]*1e3)}),[o]),k=(0,pi.useCallback)((X,ee)=>{let ne=aC(ee).valueOf()/1e3,pe=o[1];if(X.relatedTarget!==T.current&&X.relatedTarget!==A.current&&u(!1),!ed(ne)||ne>pe||ne<t){n([o[0],o[1]]),h(Date.now());return}n([ne,pe])},[o]),q=(0,pi.useCallback)((X,ee)=>{let ne=o[0],pe=aC(ee).valueOf()/1e3;if(X.relatedTarget!==b.current&&X.relatedTarget!==A.current&&u(!1),!ed(pe)||ne>pe||pe>r){n([o[0],o[1]]),x(Date.now());return}n([ne,pe])},[o]),U=(0,pi.useCallback)(X=>{X.key==="Enter"&&(X.target===b.current&&T.current.focus(),X.target===T.current&&(X.target.blur(),u(!1)))},[]),H=(0,pi.useCallback)(()=>{a||b.current.focus(),u(X=>!X)},[]);return(0,pi.useEffect)(()=>{i(e)},[e]),pi.default.createElement("div",{className:"timeslider-controls-root"},pi.default.createElement(jA,{ref:b,key:p,value:L,onBlur:k,onKeyDown:U,readOnly:!a,tabIndex:a?void 0:-1}),pi.default.createElement("span",null,"\u2013"),pi.default.createElement(jA,{ref:T,key:g,value:P,onBlur:q,onKeyDown:U,readOnly:!a,tabIndex:a?void 0:-1}),pi.default.createElement("button",{ref:A,className:Et("edit-button",a&&"edit-state"),onClick:H},pi.default.createElement(qr,{name:"edit-inverse"})))};qXe.propTypes={values:sE.default.arrayOf(sE.default.number).isRequired,min:sE.default.number.isRequired,max:sE.default.number.isRequired,onChange:sE.default.func.isRequired};var zXe=qXe;var y1=Z(xt(),1),lE=Z(we(),1);var FXe=(0,lE.forwardRef)(function({className:t,posX:r,shouldUseDate:n,value:o},i){let a=(0,lE.useMemo)(()=>Array.isArray(o)?n?`${Qu(o[0]*1e3)} - ${Qu(o[1]*1e3)}`:`${o[0]} - ${o[1]}`:n?Qu(o*1e3):o,[o]);return lE.default.createElement("div",{ref:i,className:t,style:{transform:`translate(${r}px)`}},a)});FXe.propTypes={className:y1.default.string,posX:y1.default.number.isRequired,shouldUseDate:y1.default.bool.isRequired,value:y1.default.oneOfType([y1.default.array,y1.default.number]).isRequired};var lz=FXe;var UXe=(e,t,r,n)=>{let o=e.map(h=>(h-t[0])/(t[1]-t[0])),i=o[0]*n,a=o[1]*n,u=Jne(i,r,n),p=Jne(a,r,n);return{posMin:u,posMax:p}},BXe=(e,t,r,n)=>{let a=((e[1]-e[0])/2+e[0]-t[0])/(t[1]-t[0])*n;return Jne(a,r,n)},Jne=(e,t,r)=>e<t/2?0:e>r-t/2?r-t:e-t/2;var Qne=[1e3,1e3],eoe=e=>{let{title:t,values:r,timeRange:n,onChange:o,sliderProps:i,shouldUseDate:a,showControls:u}=e,[p,h]=(0,Mo.useState)(r),[g,x]=(0,Mo.useState)(0),[b,T]=(0,Mo.useState)(0),[A,L]=(0,Mo.useState)(0),[P,k]=(0,Mo.useState)({min:0,max:0}),[q,U]=(0,Mo.useState)(0),[H,X]=(0,Mo.useState)(!1),ee=(0,Mo.useRef)(),ne=(0,Mo.useRef)(),pe=(0,Mo.useRef)(),ue=(0,Mo.useCallback)(Te=>{let{posMin:Ee,posMax:Ye}=UXe(Te,n,g,A);if(Math.abs(Ee-Ye)<g){X(!0);let qe=BXe(Te,n,b,A);U(qe);return}X(!1),k({min:Ee,max:Ye})},[n,g,A]),Ie=(0,Mo.useCallback)(Te=>{ue(Te),h(Te)},[ue]),Re=(0,Mo.useCallback)(Te=>{Ie(Te),o(Te)},[Ie,o]);return(0,Mo.useEffect)(()=>{if(ee.current&&ne.current&&pe.current){let Te=ee.current.getBoundingClientRect().width,Ee=ne.current.getBoundingClientRect().width,Ye=pe.current.getBoundingClientRect().width;k({min:0,max:Te-Ee}),T(Ye),L(Te),x(Ee)}},[]),(0,Mo.useEffect)(()=>{h(r),ue(r)},[r,ue]),Mo.default.createElement("div",{className:"timeslider-container"},Mo.default.createElement("div",{className:"timeslider-control-container"},Mo.default.createElement("label",null,t),u&&Mo.default.createElement(zXe,{min:n[0],max:n[1],values:p,onChange:Re})),Mo.default.createElement("div",{ref:ee,className:"slider-container"},Mo.default.createElement(gq,Se({allowCross:!1,ariaLabelledByGroupForHandles:["min-value","max-value"],min:n[0],max:n[1],onChange:Ie,onAfterChange:o,value:p},i)),Mo.default.createElement(lz,{className:Et("tooltip min-value",H&&"labels-too-close"),posX:P.min,ref:ne,value:H?Qne[0]:p[0],shouldUseDate:a}),Mo.default.createElement(lz,{className:Et("tooltip max-value",H&&"labels-too-close"),posX:P.max,value:H?Qne[1]:p[1],shouldUseDate:a}),Mo.default.createElement(lz,{className:Et("tooltip min-max-value",H&&"labels-too-close"),posX:q,ref:pe,value:H?p:Qne,shouldUseDate:a})))};eoe.defaultProps={timeRange:[1850,1970],shouldUseDate:!1,showControls:!1};eoe.propTypes={title:vd.default.string.isRequired,values:vd.default.arrayOf(vd.default.number),timeRange:vd.default.arrayOf(vd.default.number),onChange:vd.default.func.isRequired,sliderProps:vd.default.object,shouldUseDate:vd.default.bool,showControls:vd.default.bool};var VXe=eoe;var uz=VXe;var cm=Z(we(),1);var toe=Z(we(),1);var GXe=()=>{let e=ht(yZe),t=Or(({snapshot:n})=>()=>At(void 0,null,function*(){let o=yield n.getPromise(yr),i=yield n.getPromise(Rv);Le(o)&&Le(i)&&i.setFilters(o)})),r=Or(({snapshot:n})=>o=>At(void 0,null,function*(){let i=yield n.getPromise(yr),a=yield n.getPromise(Rv);Le(i)&&Le(a)&&a.setFilters(i,o)}));return(0,toe.useEffect)(()=>{e===null?t():r(e)},[e]),(0,toe.useEffect)(()=>()=>{t()},[]),null};var HXe=()=>{let e=ht(nq),t=ht(Yre),r=ht(kv),n=Mr($w);return cm.default.createElement(cm.default.Fragment,null,cm.default.createElement("div",{className:Et("plain-divider",r===Zi.FILTER&&e&&"filtered")},cm.default.createElement("span",{className:Et("caret-container",r===Zi.FILTER&&e&&"filtered")},cm.default.createElement(qr,{name:"caret"}))),cm.default.createElement("div",{className:Et("filter-container",r===Zi.FILTER&&e&&"in")},r!==Zi.EDIT&&e&&cm.default.createElement(uz,{title:`${fe("geojsonlayerpanel-timefilter-title")}: `,timeRange:t,onChange:o=>n(o),values:t,sliderProps:{step:86400,draggableTrack:!0},shouldUseDate:!0,showControls:!0})),cm.default.createElement(GXe,null))};var YXe=Z(xt(),1);var fm=Z(we(),1);var WXe=(e,t)=>{let r="data:text/json;charset=utf-8,"+encodeURIComponent(t),n=document.createElement("a");n.setAttribute("href",r),n.setAttribute("download",`${e}.json`),n.click()};var PMr=()=>{let e=ht(vZe),[t,r]=On(kv),n=ht(nq),o=(0,fm.useCallback)(()=>{r(a=>a===Zi.FILTER?Zi.INITIAL:Zi.FILTER)},[]),i=Or(({snapshot:a})=>()=>At(void 0,null,function*(){let u=yield a.getPromise(mA),p=yield a.getPromise(Rv),h={type:"FeatureCollection",features:u},g=Ua.toPersistenceState(h),x=JSON.stringify(g),b=p.getMetadata("title");WXe(b,x)}),[]);return fm.default.createElement(fm.default.Fragment,null,fm.default.createElement(mn,{className:"geojson-headline--button export-button",disabled:!e,onClick:i,title:fe("layermanagement-export-geojson")},fm.default.createElement(qr,{name:"export-geojson"})),fm.default.createElement(mn,{className:"geojson-headline--button filter-button",disabled:t===Zi.EDIT||!n,onClick:o,title:fe("layermanagement-filter-geojson-features")},fm.default.createElement(qr,{name:"filter"})))},$Xe=PMr;var ZXe=({selectedLayer:e})=>{let[t,r]=On(kv),n=Mr($w),o=Mr(Rv),i=Mr($s),a=Mr(Ys),u=Mr(ba),p=Mr(Zs),h=Mr(Jn),g=Mr(Hc),x=ht(yr),{title:b,description:T,timePublished:A,layerId:L}=(0,Ti.useMemo)(()=>({title:e==null?void 0:e.getMetadata(it.title),description:e==null?void 0:e.getMetadata(it.description),timePublished:e==null?void 0:e.getMetadata(it.timePublished),layerId:e==null?void 0:e.getMetadata(it.id)}),[e==null?void 0:e.getMetadata(it.title),e==null?void 0:e.getMetadata(it.timePublished)]),P=(0,Ti.useMemo)(()=>A!=null?A:fe("geojson-featureview-no-time"),[A]),k=(0,Ti.useCallback)(()=>{i(null),r(Zi.INITIAL),n(null)},[]),q=(0,Ti.useCallback)(()=>{var ne;r(Zi.EDIT),g(Ws.DRAW),e.setVisibility(x,"none"),u(e.getGeoJson()),p({[it.title]:e.getMetadata(it.title),[it.description]:e.getMetadata(it.description),[it.thumbnailUrl]:e.getMetadata(it.thumbnailUrl)});let X=e.getMetadata(it.vectorMapId),ee=e.getMetadata(it.version);h({type:X?"remote":"local",id:X!=null?X:null,version:ee!=null?ee:null,layerRole:(ne=e.getMetadata(it.userRole))!=null?ne:null})},[e]),U=(0,Ti.useCallback)(()=>{e.setVisibility(x,"visible"),r(Zi.INITIAL),g(Ws.STANDARD)},[e]),H=(0,Ti.useCallback)(X=>{a({featureId:X,sourceId:L})},[L]);return(0,Ti.useEffect)(()=>(o(e),()=>{r(Zi.INITIAL),n(null),o(null)}),[e]),Ti.default.createElement(Ti.default.Fragment,null,Ti.default.createElement(fd,{title:fe("geojsonlayerpanel-header-title"),onEditClick:t!==Zi.EDIT&&TZe(e)?q:void 0,onCloseClick:t===Zi.EDIT?U:k}),Ti.default.createElement("div",{className:"headline-container"},Ti.default.createElement("div",{className:"geojson-headline--date"},P),Ti.default.createElement("div",{className:"title-row"},Ti.default.createElement("div",{className:"geojson-headline--title"},b),Ti.default.createElement($Xe,null)),Ti.default.createElement("div",{className:"description-row"},Ti.default.createElement("div",{className:"geojson-headline--description"},T))),Ti.default.createElement(HXe,null),Ti.default.createElement(bZe,{className:Et("geojson-layer-feature-list-root ",t!==Zi.EDIT&&["in","scrollable"]),onFeatureClick:H}))};ZXe.propTypes={selectedLayer:YXe.default.instanceOf(Ua)};var KXe=ZXe;var XXe=KXe;var bi=Z(we(),1);var cE=Z(xt(),1);var pm=Z(we(),1);var kMr=()=>{let e=ht(yr),[t,r]=(0,pm.useState)(!0),n=ht(_n),o=fe(t?"layermanagement-deactivate-all-maps":"layermanagement-activate-all-maps"),i=(0,pm.useCallback)(()=>{n.forEach(a=>{a.setVisibility(e,t?"none":"visible")})},[e,t,n]);return(0,pm.useEffect)(()=>{if(e){let a=()=>{let p=n.length===0?!0:n.some(h=>h.isVisible(e));r(p)},u=()=>{a()};return e._loaded?a():e.on("load",a),e.on(xa.visibilityChanged,u),()=>{e.off(xa.visibilityChanged,u),e.off("load",a)}}},[e,n]),pm.default.createElement("button",{onClick:i,className:Et("deactivate-map-col-control",t?"deactivate":""),title:o,id:"deactivate-all-maps"},pm.default.createElement(Qs,{name:"layermanagement-deactivate","aria-labelledby":"deactivate-all-maps",alt:o}))},JXe=kMr;var QXe=JXe;var Es=Z(we(),1);var cz=Z(xt(),1);var eJe=(e,t)=>{for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&e[r].forEach(o=>{o.setOpacity(t,0),o.setVisibility(t,"visible")})},tJe=e=>e.slice().sort((t,r)=>{let n=t.getMetadata(it.timePublished),o=r.getMetadata(it.timePublished);return n>o?1:n<o?-1:0}),rJe=(e,t)=>{let r={};return e.forEach(n=>{n.move(t,null);let o=n.getMetadata(it.timePublished);o in r?r[o].push(n):r[o]=[n]}),r};var nJe=({animationOptions:e={}})=>{let[t,r]=(0,Es.useState)(!1),[n,o]=(0,Es.useState)(void 0),[i,a]=(0,Es.useState)(!1),u=ht(yr),p=fe(`dynamicmapvis-${i?"close":"open"}`),[h,g]=On(_n),x=(0,Es.useRef)(!1),b=U=>{let{layers:H,delay:X=500}=U;H.forEach(ee=>{ee.setOpacity(u,0),ee.setVisibility(u,"visible")}),setTimeout(()=>{T(U)},X)},T=U=>{var pe;let{layers:H,steps:X=.1,delay:ee=500,successCallback:ne}=U;if(x.current){let ue=((pe=H[0].getOpacity(u))!=null?pe:0)+X;ue>1?(H.forEach(Ie=>{Ie.setOpacity(u,1)}),Le(ne)&&ne()):(H.forEach(Ie=>{Ie.setOpacity(u,ue)}),setTimeout(()=>{T(U)},ee))}},A=U=>{let{sortedLayers:H,delay:X=500}=U;if(eJe(H,u),x.current){let ne=Object.keys(H);if(ne.length>0){let pe=ne[0],ue=H[pe],ee=H,{[pe]:Ie}=ee,Re=En(ee,[Ule(pe)]),Te=()=>{A(qt(Se({},U),{sortedLayers:Re}))};setTimeout(()=>{b(qt(Se({},U),{layers:ue,successCallback:Te}),X)}),o(pe)}else P()}},L=()=>{r(!0),x.current=!0;let U=tJe(h),H=rJe(U,u);g(U),A(qt(Se({},e),{sortedLayers:H}))},P=()=>{r(!1),x.current=!1,o(void 0)},k=U=>{U.preventDefault(),i?(P(),a(!1)):a(!0)},q=n&&n.length>4?n.split(" ")[2]:n;return Es.default.createElement("div",{className:Et("vkf-dyn-vis-control",t&&"play",i&&"open"),title:p,"aria-label":p,id:"dynamic-map-visualization"},Es.default.createElement("button",{type:"button",className:"open-dyn-vis",onClick:k,"aria-labelledby":"dynamic-map-visualization"},Es.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 30 30",version:"1.1",xmlns:"http://www.w3.org/2000/svg",alt:p},Es.default.createElement("path",{className:"arrow",d:"M14.822,4.521c0.057,-0.014 0.117,-0.021 0.178,-0.021c1.561,0 3.047,0.348 4.385,0.97c1.342,0.611 2.573,1.513 3.589,2.699c0.83,0.969 1.452,2.052 1.868,3.192c0.425,1.136 0.658,2.363 0.658,3.639c0,1.561 -0.348,3.047 -0.97,4.385c-0.611,1.342 -1.513,2.573 -2.699,3.589c-0.969,0.83 -2.052,1.452 -3.192,1.868c-1.136,0.425 -2.363,0.658 -3.639,0.658c-1.561,0 -3.047,-0.348 -4.385,-0.97c-1.342,-0.611 -2.573,-1.513 -3.589,-2.699l-0.488,-0.569c-0.075,-0.088 -0.126,-0.188 -0.154,-0.292c-1.033,-1.48 -1.696,-3.234 -1.85,-5.122l-1.685,1.685c-0.293,0.293 -0.768,0.293 -1.061,0c-0.293,-0.292 -0.293,-0.768 0,-1.06l3,-3c0.293,-0.293 0.768,-0.293 1.061,0l3,3c0.292,0.292 0.292,0.768 0,1.06c-0.293,0.293 -0.768,0.293 -1.061,0l-1.754,-1.754c0.286,3.268 2.35,6.059 5.208,7.389c2.154,0.98 4.642,1.084 6.877,0.268c2.229,-0.835 4.051,-2.533 5.049,-4.678c0.98,-2.154 1.084,-4.642 0.268,-6.877c-0.835,-2.229 -2.533,-4.051 -4.678,-5.049c-3.095,-1.408 -6.88,-1.008 -9.613,1.333c-0.315,0.269 -0.788,0.233 -1.058,-0.082c-0.269,-0.314 -0.233,-0.788 0.082,-1.057c1.921,-1.646 4.287,-2.469 6.653,-2.505Z"}),Es.default.createElement("path",{className:"minute-hand",d:"M14.238,8.795l0,5.47c0,0.414 0.336,0.75 0.75,0.75c0.414,0 0.75,-0.336 0.75,-0.75l0,-5.47c0,-0.414 -0.336,-0.75 -0.75,-0.75c-0.414,-0 -0.75,0.336 -0.75,0.75Z"}),Es.default.createElement("path",{className:"hour-hand",d:"M21.18,14.263l-5.47,-0c-0.414,-0 -0.75,0.336 -0.75,0.75c-0,0.413 0.336,0.75 0.75,0.75l5.47,-0c0.414,-0 0.75,-0.337 0.75,-0.75c0,-0.414 -0.336,-0.75 -0.75,-0.75Z"}))),Es.default.createElement("div",{className:"content"},Es.default.createElement("div",{className:Et("feedback",n!==void 0&&"running")},q),Es.default.createElement("button",{"aria-label":fe("dynamicmapvis-start"),className:"start-button",onClick:L,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-start"),type:"button"},"Start"),Es.default.createElement("button",{"aria-label":fe("dynamicmapvis-stop"),className:"stop-button",onClick:P,tabIndex:i?void 0:-1,title:fe("dynamicmapvis-stop"),type:"button"},"Stop")))};nJe.propTypes={animationOptions:cz.default.shape({delay:cz.default.number,steps:cz.default.number})};var oJe=nJe;var iJe=oJe;var Co=Z(we(),1);var Uv=Z(xt(),1);var fz=Z(we(),1);function aJe(e,t=300,r={}){let n=(0,fz.useRef)(null),o=(0,fz.useCallback)(i=>{n.current?(clearTimeout(n.current),n.current=null,e&&e(i)):n.current=setTimeout(()=>{r.onSingleTap&&r.onSingleTap(i),n.current=null},t)},[e,t,r.onSingleTap]);return e?{onClick:o}:{}}var of=Z(we(),1);var qA=Z(xt(),1);var roe=e=>{let{onEndDrag:t,onStartDrag:r,orientation:n="horizontal",layer:o}=e,i=ht(yr),[a,u]=(0,of.useState)(o.getOpacity(i)*100),p=(0,of.useRef)(null),h=0,g=100,x=(A,L)=>{if(n==="vertical"){var P=100-(A-h)/(g-h)*100;L.style.top=P+"%",L.innerHTML=A.toFixed(0)+"%";return}let k=(A-h)/(g-h)*100;L.style.left=k+"%",L.innerHTML=A+"%"},b=A=>{let{layerId:L}=A;if(L===o.getId()){let P=o.getOpacity(i)*100;u(P)}},T=A=>{u(A),Le(i)&&o.setOpacity(i,A/100)};return(0,of.useEffect)(()=>{x(Math.round(a),p.current)},[a]),(0,of.useEffect)(()=>{if(i)return i.on(xa.opacityChanged,b),()=>{i.off(xa.opacityChanged,b)}},[i]),of.default.createElement("div",{className:"opacity-container"},of.default.createElement("div",{className:"slider-container"},of.default.createElement(sz,{onAfterChange:t,onBeforeChange:r,onChange:T,value:a,vertical:n==="vertical"}),of.default.createElement("div",{className:"tooltip value",ref:p},"100%")))};roe.propTypes={onEndDrag:qA.default.func,onStartDrag:qA.default.func,layer:qA.default.object.isRequired,orientation:qA.default.oneOf(["horizontal","vertical"])};var uE=Z(we(),1),sJe=Z(xt(),1);var lJe=r=>{var n=r,{active:e}=n,t=En(n,["active"]);let o=hr.getSettings();return uE.default.createElement("button",Se({className:Et("vkf-drag-button",e&&"active"),title:o==="de"?"Ebene verschieben":"Move layer"},t),uE.default.createElement("span",null),uE.default.createElement("span",null),uE.default.createElement("span",null),uE.default.createElement("span",null))};lJe.propTypes={active:sJe.default.bool};var uJe=lJe;var cJe=Z(xt(),1),Fv=Z(we(),1);var fJe=e=>{let{layer:t}=e,r=t.getMetadata(it.title),n=ht(yr),o=(0,Fv.useMemo)(()=>t.isVisible(n),[t,n]),[i,a]=(0,Fv.useState)(o),u=h=>{h.preventDefault(),h.stopPropagation(),a(!i),n&&t.setVisibility(n,i?"none":"visible")},p=({layerId:h,value:g})=>{h===t.getId()&&a(g==="visible")};return(0,Fv.useEffect)(()=>{if(n)return n.on(xa.visibilityChanged,p),()=>{n.off(xa.visibilityChanged,p)}},[n]),Fv.default.createElement("button",{className:Et("disable-layer minimize-tool",i?"record-visible":"record-hidden"),onClick:u,type:"button",title:fe("layermanagement-show-map")},` ${fe("layermanagement-show-map")}: ${r}`)};fJe.propTypes={layer:cJe.default.object};var pJe=fJe;var af=Qs;var noe=Z(we(),1);var dJe=Z(xt(),1);var hJe=e=>{let{layer:t}=e,r=ht(yr),n=Mr(_n),[o,i]=On(Ys);return noe.default.createElement("button",{className:"remove-layer minimize-tool",onClick:u=>{u.stopPropagation(),Le(r)&&(t.removeMapLibreLayers(r),n(p=>p.filter(h=>h.getId()!==t.getId())),t.getType()===Cn.VECTOR_MAP&&(o==null?void 0:o.sourceId)===t.getId()&&i(null))},type:"button",title:fe("layermanagement-remove-map")},noe.default.createElement(af,{name:"layeraction-remove-map"}))};hJe.propTypes={layer:dJe.default.object.isRequired};var mJe=hJe;var zA=Z(we(),1),vJe=Z(xt(),1);var ooe=24,gJe=100,RMr={left:ooe+Hre.width+gJe,right:ooe+Wre.width+gJe,top:60,bottom:ooe},jMr={left:50,right:50,top:75,bottom:150},qMr=e=>({padding:e===pu.HORIZONTAL?RMr:jMr,animate:!1}),zMr=()=>({zoomToExtent:Or(({snapshot:t})=>r=>At(void 0,null,function*(){let n=yield t.getPromise(yr),o=yield t.getPromise(Yb),i=qMr(o);if(Le(n)){let a=r.getMetadata(it.bounds);n.fitBounds(a,i)}}),[])}),pz=zMr;var yJe=e=>{let{layer:t}=e,{zoomToExtent:r}=pz(),n=(0,zA.useCallback)(()=>{r(t)},[r,t]);return zA.default.createElement("button",{className:"zoom-layer minimize-tool",onClick:n,type:"button",title:fe("layermanagement-zoom-to-map")},zA.default.createElement(af,{name:"layeraction-center"}))};yJe.propTypes={layer:vJe.default.object.isRequired};var _Je=yJe;var ioe=Z(we(),1);var xJe=Z(xt(),1),bJe=e=>{let{layer:t}=e,r=ht(yr),n=Mr(_n);return ioe.default.createElement("button",{className:"move-layer-top minimize-tool",onClick:i=>{i.stopPropagation(),t.moveToTop(r),n(a=>[...a.filter(u=>u!==t),t])},type:"button",title:fe("layermanagement-move-top")},ioe.default.createElement(Qs,{name:"layeraction-totop"}))};bJe.propTypes={layer:xJe.default.object.isRequired};var wJe=bJe;var sf=Z(we(),1),EJe=Z(xt(),1);var SJe=({layer:e})=>{let[t,r]=(0,sf.useState)($6(e)),n=(0,sf.useMemo)(()=>fA(e),[e]),{layerType:o,layerTitle:i,isMosaic:a,isRemoteVectorMap:u}=(0,sf.useMemo)(()=>({layerType:e.getType(),layerTitle:e.getMetadata(it.title),isMosaic:e.getMetadata(it.type)===Cn.MOSAIC_MAP,isRemoteVectorMap:Le(e.getMetadata(it.vectorMapId))}),[e]),p=(0,sf.useCallback)(()=>{t!==n&&r(n)},[n]);return sf.default.createElement("div",{className:"thumbnail-container"},sf.default.createElement("img",{onError:p,src:t,alt:`Thumbnail Image of Map for ${i}`}),o===Cn.VECTOR_MAP&&sf.default.createElement("span",{className:Et("vector-badge",!u&&"local-vector-badge")},fe("vector-badge-title")),a&&sf.default.createElement("span",{className:"mosaic-badge"},fe("mosaic-badge-title")))};SJe.propTypes={layer:EJe.default.object.isRequired};var IJe=SJe;var FA=Z(we(),1);var TJe=Z(xt(),1),MJe=({layer:e})=>{let t=Mr(vk),r=(0,FA.useCallback)(()=>{t(e.getId())},[e]);return FA.default.createElement("button",{className:"show-original",onClick:r,type:"button",title:fe("layermanagement-show-original")},FA.default.createElement(af,{name:"layeraction-showoriginal"}))};MJe.propTypes={layer:TJe.default.object};var CJe=MJe;var UA=Z(we(),1),AJe=Z(xt(),1);var DJe=({layer:e})=>{let t=Mr($s),r=(0,UA.useCallback)(()=>{e&&Le(e.getId())&&t(e.getId())},[e]);return UA.default.createElement("button",{className:"show-geojson-layer",onClick:r,type:"button",title:fe("layermanagement-show-geojson")},UA.default.createElement(Qs,{name:"layermanagement-show-geojson"}))};DJe.propTypes={layer:AJe.default.instanceOf(Ua).isRequired};var NJe=DJe;var OJe={LAYER:"LAYER"},LJe=e=>{let{id:t,index:r,layer:n,onMoveLayer:o}=e,[i,a]=(0,Co.useState)(!1),[u,p]=(0,Co.useState)(!1),[h,g]=(0,Co.useState)(!1),[x,b]=(0,Co.useState)(!1),T=(0,Co.useRef)(null),A=hr.getSettings(),[{handlerId:L},P]=YP({accept:OJe.LAYER,collect(qe){return{handlerId:qe.getHandlerId()}},hover(qe,Ue){var lt;if(!T.current)return;let Ne=qe.index,et=r;if(Ne===et)return;let st=(lt=T.current)==null?void 0:lt.getBoundingClientRect(),ft=(st.bottom-st.top)/2,tt=Ue.getClientOffset().y-st.top;Ne<et&&tt<ft||Ne>et&&tt>ft||(o(Ne,et),qe.index=et)}}),[{draggedItem:k,isDragging:q},U]=a8e({type:OJe.LAYER,item:()=>({id:t,index:r}),collect:qe=>({isDragging:qe.isDragging(),draggedItem:qe.getItem()})}),H=()=>setTimeout(()=>{T.current!==null&&(T.current.contains(document.activeElement)||ee())},100),X=()=>{a(!0)},ee=()=>{a(!1)},ne=aJe(()=>{g(qe=>!qe)},500),pe=()=>{p(!0)},ue=()=>{p(!1)};(0,Co.useEffect)(()=>{i?k===null&&!x&&b(!0):k!==void 0&&!u&&b(!1)},[i,x,u,k]),U(P(T));let Ie=n.getId(),Re=n.getType(),Te=n.getMetadata(it.timePublished),Ee=n.getMetadata(it.title),Qe=n.getMetadata(it.type)==="mosaic";return Co.default.createElement("li",qt(Se({className:Et("vkf-layermanagement-record",q&&"drag-and-drop-placeholder",h&&"show-actions",Re===Cn.VECTOR_MAP&&"geojson-data",x&&(k===null||k.id===Ie)&&"force-hover"),id:r,"data-id":Ie,"data-handler-id":L,onFocus:X,onBlur:H,onMouseEnter:X,onMouseOver:X,onMouseLeave:ee},ne),{ref:T}),Co.default.createElement("div",{className:"visibility-container"},Co.default.createElement(pJe,{layer:n})),Co.default.createElement(IJe,{layer:n}),Co.default.createElement("div",{className:"metadata-container"},Co.default.createElement("h3",null,Ee),Co.default.createElement("div",{className:"timestamps"},Co.default.createElement("span",{className:"timestamps-label"},`${fe("mapsearch-listelement-time")} ${Te}`))),Co.default.createElement("div",{className:"control-container"},Co.default.createElement(wJe,{layer:n}),Co.default.createElement(mJe,{layer:n}),Co.default.createElement(_Je,{layer:n}),Re!==Cn.VECTOR_MAP?Co.default.createElement(CJe,{layer:n}):Co.default.createElement(NJe,{layer:n}),!Qe&&A.LINK_TO_GEOREFERENCE!==void 0&&Re!==Cn.VECTOR_MAP&&Co.default.createElement("button",{className:"georeference-update",title:`${fe("layermangement-georef-update")} ...`,onClick:()=>{window.open(`${A.LINK_TO_GEOREFERENCE}?map_id=${Ie}`,"_blank")}},Co.default.createElement(Qs,{name:"icon-point-move"})),Co.default.createElement(roe,{onStartDrag:pe,onEndDrag:ue,orientation:"horizontal",layer:n})),Co.default.createElement("div",{className:"drag-container"},Co.default.createElement(uJe,{tabIndex:-1})))};LJe.propTypes={id:Uv.default.string,index:Uv.default.number,layer:Uv.default.oneOfType([Uv.default.instanceOf(Ua),Uv.default.instanceOf(qh)]),onMoveLayer:Uv.default.func,showActions:Uv.default.func};var PJe=LJe;var kJe=PJe;var ac=Z(we(),1);var RJe=()=>Or(({set:e})=>()=>At(void 0,null,function*(){e(ba,structuredClone(lw)),e(Zs,{}),e(Jn,{type:Hi.REMOTE,id:null,layerRole:"owner"}),e(Hc,Ws.DRAW),e(la,jo.METADATA)}));function aoe(){let e=RJe(),t=Mr(_k),r=(0,ac.useCallback)(()=>{e()},[]),n=(0,ac.useCallback)(()=>{t(!0)},[]);return ac.default.createElement("div",{className:"geojson-container"},ac.default.createElement("div",{className:"geojson-action"},ac.default.createElement("button",{disabled:!sq(),onClick:r},ac.default.createElement(qr,{name:"addVectorMap"}),ac.default.createElement("span",null,fe("layermanagement-create-vector-map")))),ac.default.createElement("div",{className:"geojson-action"},ac.default.createElement("button",{onClick:n},ac.default.createElement(af,{name:"layermanagement-upload"}),ac.default.createElement("span",null,fe("layermanagement-add-vector-map")))))}var jJe=({showControls:e={showBadge:!0,showHideButton:!0,showDynamicMapVisualization:!0},showHeader:t=!0})=>{let{showBadge:r,showDynamicMapVisualization:n,showHideButton:o}=e,[i,a]=(0,bi.useState)(!1),u=ht(yr),p=ht($s),[h,g]=On(_n),x=(0,bi.useMemo)(()=>Le(p),[p]),b=(0,bi.useMemo)(()=>h.toReversed(),[h]),T=(L,P)=>{let k=[...b],q=k.splice(L,1)[0];k.splice(P,0,q);let U=P-1,H=U<0?null:k[U].getMapLibreLayerId();q.move(u,H),g(k.reverse())},A=()=>{a(L=>!L)};return bi.default.createElement("div",{className:Et("vkf-layermanagement-root",!x&&"in",i&&"show-controls")},r&&h.length!==0&&bi.default.createElement("span",{className:"badge"},h.length),t&&bi.default.createElement("div",{className:"heading"},bi.default.createElement("span",{className:"header-label"},fe("layermanagement-header-lbl")),bi.default.createElement("div",{className:"header-functions"},bi.default.createElement("span",{className:"deco-caret"},bi.default.createElement(qr,{name:"caret"})),bi.default.createElement("button",{className:"geojson-upload",onClick:A},bi.default.createElement(qr,{name:"uploadVectorMap"}),bi.default.createElement("span",{className:"label",id:"geojson-upload-label"},fe("geojson-adddialog-title"))),o&&bi.default.createElement(QXe,null),n&&bi.default.createElement(iJe,{animationOptions:{delay:30,steps:.01}}))),bi.default.createElement(aoe,null),bi.default.createElement("ul",{className:"layermanagement-body"},h===void 0||h.length===0?bi.default.createElement("li",{className:"empty"},bi.default.createElement("h4",null,fe("layermanagement-start-msg-header")),bi.default.createElement("p",null,fe("layermanagement-start-msg-body"))):b.map((L,P)=>{let k=L.getId();return bi.default.createElement(kJe,{onMoveLayer:T,layer:L,index:P,key:k,id:k})})))};jJe.propTypes={showControls:cE.default.shape({showBadge:cE.default.bool,showDynamicMapVisualization:cE.default.bool,showHideButton:cE.default.bool}),showHeader:cE.default.bool};var dz=jJe;var Vv=Z(we(),1);var Mz=Z(xt(),1);var hz=Z(we(),1);var qJe=()=>{let e=ht(_v),[t,r]=On(yv),n=(0,hz.useCallback)(o=>r(o),[]);return hz.default.createElement(uz,{title:fe("timeslider-adjust-timeperiod"),timeRange:e,onChange:n,values:t,sliderProps:{draggableTrack:!0}})};qJe.propTypes={};var zJe=qJe;var mz=zJe;var Iz=Z(we(),1);var x1=Z(we(),1),Qoe=Z(xt(),1);var Pl=Z(we(),1);var Bt=Z(xt()),kt=Z(we()),KMr=Z($Je());function YJe(e){return typeof e=="object"&&e!=null&&e.nodeType===1}function ZJe(e,t){return(!t||e!=="hidden")&&e!=="visible"&&e!=="clip"}function loe(e,t){if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){var r=getComputedStyle(e,null);return ZJe(r.overflowY,t)||ZJe(r.overflowX,t)||function(n){var o=function(i){if(!i.ownerDocument||!i.ownerDocument.defaultView)return null;try{return i.ownerDocument.defaultView.frameElement}catch(a){return null}}(n);return!!o&&(o.clientHeight<n.scrollHeight||o.clientWidth<n.scrollWidth)}(e)}return!1}function yz(e,t,r,n,o,i,a,u){return i<e&&a>t||i>e&&a<t?0:i<=e&&u<=r||a>=t&&u>=r?i-e-n:a>t&&u<r||i<e&&u>r?a-t+o:0}var KJe=function(e,t){var r=window,n=t.scrollMode,o=t.block,i=t.inline,a=t.boundary,u=t.skipOverflowHiddenElements,p=typeof a=="function"?a:function(Ae){return Ae!==a};if(!YJe(e))throw new TypeError("Invalid target");for(var h,g,x=document.scrollingElement||document.documentElement,b=[],T=e;YJe(T)&&p(T);){if((T=(g=(h=T).parentElement)==null?h.getRootNode().host||null:g)===x){b.push(T);break}T!=null&&T===document.body&&loe(T)&&!loe(document.documentElement)||T!=null&&loe(T,u)&&b.push(T)}for(var A=r.visualViewport?r.visualViewport.width:innerWidth,L=r.visualViewport?r.visualViewport.height:innerHeight,P=window.scrollX||pageXOffset,k=window.scrollY||pageYOffset,q=e.getBoundingClientRect(),U=q.height,H=q.width,X=q.top,ee=q.right,ne=q.bottom,pe=q.left,ue=o==="start"||o==="nearest"?X:o==="end"?ne:X+U/2,Ie=i==="center"?pe+H/2:i==="end"?ee:pe,Re=[],Te=0;Te<b.length;Te++){var Ee=b[Te],Ye=Ee.getBoundingClientRect(),Qe=Ye.height,qe=Ye.width,Ue=Ye.top,Ne=Ye.right,et=Ye.bottom,st=Ye.left;if(n==="if-needed"&&X>=0&&pe>=0&&ne<=L&&ee<=A&&X>=Ue&&ne<=et&&pe>=st&&ee<=Ne)return Re;var ft=getComputedStyle(Ee),Ze=parseInt(ft.borderLeftWidth,10),tt=parseInt(ft.borderTopWidth,10),lt=parseInt(ft.borderRightWidth,10),ze=parseInt(ft.borderBottomWidth,10),ge=0,We=0,Oe="offsetWidth"in Ee?Ee.offsetWidth-Ee.clientWidth-Ze-lt:0,at="offsetHeight"in Ee?Ee.offsetHeight-Ee.clientHeight-tt-ze:0,ot="offsetWidth"in Ee?Ee.offsetWidth===0?0:qe/Ee.offsetWidth:0,Pt="offsetHeight"in Ee?Ee.offsetHeight===0?0:Qe/Ee.offsetHeight:0;if(x===Ee)ge=o==="start"?ue:o==="end"?ue-L:o==="nearest"?yz(k,k+L,L,tt,ze,k+ue,k+ue+U,U):ue-L/2,We=i==="start"?Ie:i==="center"?Ie-A/2:i==="end"?Ie-A:yz(P,P+A,A,Ze,lt,P+Ie,P+Ie+H,H),ge=Math.max(0,ge+k),We=Math.max(0,We+P);else{ge=o==="start"?ue-Ue-tt:o==="end"?ue-et+ze+at:o==="nearest"?yz(Ue,et,Qe,tt,ze+at,ue,ue+U,U):ue-(Ue+Qe/2)+at/2,We=i==="start"?Ie-st-Ze:i==="center"?Ie-(st+qe/2)+Oe/2:i==="end"?Ie-Ne+lt+Oe:yz(st,Ne,qe,Ze,lt+Oe,Ie,Ie+H,H);var Mt=Ee.scrollLeft,Nt=Ee.scrollTop;ue+=Nt-(ge=Math.max(0,Math.min(Nt+ge/Pt,Ee.scrollHeight-Qe/Pt+at))),Ie+=Mt-(We=Math.max(0,Math.min(Mt+We/ot,Ee.scrollWidth-qe/ot+Oe)))}Re.push({el:Ee,top:ge,left:We})}return Re};var XA=function(){return XA=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},XA.apply(this,arguments)};var XMr=0;function rD(){}function JMr(e,t){if(!e)return;KJe(e,{boundary:t,block:"nearest",scrollMode:"if-needed"}).forEach(n=>{let{el:o,top:i,left:a}=n;o.scrollTop=i,o.scrollLeft=a})}function XJe(e,t,r){return e===t||t instanceof r.Node&&e.contains&&e.contains(t)}function coe(e,t){let r;function n(){r&&clearTimeout(r)}function o(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];n(),r=setTimeout(()=>{r=null,e(...a)},t)}return o.cancel=n,o}function wa(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(n){for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];return t.some(u=>(u&&u(n,...i),n.preventDownshiftDefault||n.hasOwnProperty("nativeEvent")&&n.nativeEvent.preventDownshiftDefault))}}function yd(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return n=>{t.forEach(o=>{typeof o=="function"?o(n):o&&(o.current=n)})}}function QMr(){return String(XMr++)}function eCr(e){let{isOpen:t,resultCount:r,previousResultCount:n}=e;return t?r?r!==n?`${r} result${r===1?" is":"s are"} available, use up and down arrow keys to navigate. Press Enter key to select.`:"":"No results are available.":""}function _z(e,t){return Object.keys(e).reduce((r,n)=>(r[n]=oQe(t,n)?t[n]:e[n],r),{})}function oQe(e,t){return e[t]!==void 0}function eD(e){let{key:t,keyCode:r}=e;return r>=37&&r<=40&&t.indexOf("Arrow")!==0?`Arrow${t}`:t}function tD(e,t,r,n,o){if(o===void 0&&(o=!0),r===0)return-1;let i=r-1;(typeof t!="number"||t<0||t>=r)&&(t=e>0?-1:i+1);let a=t+e;a<0?a=o?i:0:a>i&&(a=o?0:i);let u=_1(e,a,r,n,o);return u===-1?t>=r?-1:t:u}function _1(e,t,r,n,o){let i=n(t);if(!i||!i.hasAttribute("disabled"))return t;if(e>0){for(let a=t+1;a<r;a++)if(!n(a).hasAttribute("disabled"))return a}else for(let a=t-1;a>=0;a--)if(!n(a).hasAttribute("disabled"))return a;return o?e>0?_1(1,0,r,n,!1):_1(-1,r-1,r,n,!1):-1}function JJe(e,t,r,n){return n===void 0&&(n=!0),t.some(o=>o&&(XJe(o,e,r)||n&&XJe(o,r.document.activeElement,r)))}var tCr=coe(e=>{aQe(e).textContent=""},500);function iQe(e,t){let r=aQe(t);e&&(r.textContent=e,tCr(t))}function aQe(e){e===void 0&&(e=document);let t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}var sQe={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function rCr(e,t,r){let{props:n,type:o}=e,i={};Object.keys(t).forEach(a=>{nCr(a,e,t,r),r[a]!==t[a]&&(i[a]=r[a])}),n.onStateChange&&Object.keys(i).length&&n.onStateChange(Se({type:o},i))}function nCr(e,t,r,n){let{props:o,type:i}=t,a=`on${poe(e)}Change`;o[a]&&n[e]!==void 0&&n[e]!==r[e]&&o[a](Se({type:i},n))}function oCr(e,t){return t.changes}function iCr(e){let{selectedItem:t,itemToString:r}=e;return t?`${r(t)} has been selected.`:""}var aCr=coe((e,t)=>{iQe(e(),t)},200),sCr=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?kt.useLayoutEffect:kt.useEffect;function lQe(e){let{id:t=`downshift-${QMr()}`,labelId:r,menuId:n,getItemId:o,toggleButtonId:i,inputId:a}=e;return(0,kt.useRef)({labelId:r||`${t}-label`,menuId:n||`${t}-menu`,getItemId:o||(p=>`${t}-item-${p}`),toggleButtonId:i||`${t}-toggle-button`,inputId:a||`${t}-input`}).current}function foe(e,t,r){return e!==void 0?e:r.length===0?-1:r.indexOf(t)}function lCr(e){return e?String(e):""}function QJe(e){return /^\S{1}$/.test(e)}function poe(e){return`${e.slice(0,1).toUpperCase()}${e.slice(1)}`}function Ez(e){let t=(0,kt.useRef)(e);return t.current=e,t}function uQe(e,t,r){let n=(0,kt.useRef)(),o=(0,kt.useRef)(),i=(0,kt.useCallback)((x,b)=>{o.current=b,x=_z(x,b.props);let T=e(x,b);return b.props.stateReducer(x,qt(Se({},b),{changes:T}))},[e]),[a,u]=(0,kt.useReducer)(i,t),p=Ez(r),h=(0,kt.useCallback)(x=>u(Se({props:p.current},x)),[p]),g=o.current;return(0,kt.useEffect)(()=>{g&&n.current&&n.current!==a&&rCr(g,_z(n.current,g.props),a),n.current=a},[a,r,g]),[a,h]}function cQe(e,t,r){let[n,o]=uQe(e,t,r);return[_z(n,r),o]}var QA={itemToString:lCr,stateReducer:oCr,getA11ySelectionMessage:iCr,scrollIntoView:JMr,circularNavigation:!1,environment:typeof window=="undefined"?{}:window};function Ll(e,t,r){r===void 0&&(r=sQe);let n=e[`default${poe(t)}`];return n!==void 0?n:r[t]}function JA(e,t,r){r===void 0&&(r=sQe);let n=e[t];if(n!==void 0)return n;let o=e[`initial${poe(t)}`];return o!==void 0?o:Ll(e,t,r)}function fQe(e){let t=JA(e,"selectedItem"),r=JA(e,"isOpen"),n=JA(e,"highlightedIndex"),o=JA(e,"inputValue");return{highlightedIndex:n<0&&t&&r?e.items.indexOf(t):n,isOpen:r,selectedItem:t,inputValue:o}}function fE(e,t,r,n){let{items:o,initialHighlightedIndex:i,defaultHighlightedIndex:a}=e,{selectedItem:u,highlightedIndex:p}=t;return o.length===0?-1:i!==void 0&&p===i?i:a!==void 0?a:u?r===0?o.indexOf(u):tD(r,o.indexOf(u),o.length,n,!1):r===0?-1:r<0?o.length-1:0}function pQe(e,t,r,n){let o=(0,kt.useRef)({isMouseDown:!1,isTouchMove:!1});return(0,kt.useEffect)(()=>{let i=()=>{o.current.isMouseDown=!0},a=g=>{o.current.isMouseDown=!1,e&&!JJe(g.target,t.map(x=>x.current),r)&&n()},u=()=>{o.current.isTouchMove=!1},p=()=>{o.current.isTouchMove=!0},h=g=>{e&&!o.current.isTouchMove&&!JJe(g.target,t.map(x=>x.current),r,!1)&&n()};return r.addEventListener("mousedown",i),r.addEventListener("mouseup",a),r.addEventListener("touchstart",u),r.addEventListener("touchmove",p),r.addEventListener("touchend",h),function(){r.removeEventListener("mousedown",i),r.removeEventListener("mouseup",a),r.removeEventListener("touchstart",u),r.removeEventListener("touchmove",p),r.removeEventListener("touchend",h)}},[e,r]),o}var doe=()=>rD;function xz(e,t,r){let p=r,{isInitialMount:n,highlightedIndex:o,items:i,environment:a}=p,u=En(p,["isInitialMount","highlightedIndex","items","environment"]);(0,kt.useEffect)(()=>{n||aCr(()=>e(Se({highlightedIndex:o,highlightedItem:i[o],resultCount:i.length},u)),a.document)},t)}function dQe(e){let{highlightedIndex:t,isOpen:r,itemRefs:n,getItemNodeFromIndex:o,menuElement:i,scrollIntoView:a}=e,u=(0,kt.useRef)(!0);return sCr(()=>{t<0||!r||!Object.keys(n.current).length||(u.current===!1?u.current=!0:a(o(t),i))},[t]),u}var hoe=rD;function hQe(e,t,r){let{type:n,props:o}=t,i;switch(n){case r.ItemMouseMove:i={highlightedIndex:t.disabled?-1:t.index};break;case r.MenuMouseLeave:i={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:i={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:fE(o,e,0)};break;case r.FunctionOpenMenu:i={isOpen:!0,highlightedIndex:fE(o,e,0)};break;case r.FunctionCloseMenu:i={isOpen:!1};break;case r.FunctionSetHighlightedIndex:i={highlightedIndex:t.highlightedIndex};break;case r.FunctionSetInputValue:i={inputValue:t.inputValue};break;case r.FunctionReset:i={highlightedIndex:Ll(o,"highlightedIndex"),isOpen:Ll(o,"isOpen"),selectedItem:Ll(o,"selectedItem"),inputValue:Ll(o,"inputValue")};break;default:throw new Error("Reducer called without proper action type.");}return Se(Se({},e),i)}function eQe(e){for(var t=e.keysSoFar,r=e.highlightedIndex,n=e.items,o=e.itemToString,i=e.getItemNodeFromIndex,a=t.toLowerCase(),u=0;u<n.length;u++){var p=(u+r+1)%n.length,h=n[p];if(h!==void 0&&o(h).toLowerCase().startsWith(a)){var g=i(p);if(!(g!=null&&g.hasAttribute("disabled")))return p}}return r}var qOn={items:Bt.default.array.isRequired,itemToString:Bt.default.func,getA11yStatusMessage:Bt.default.func,getA11ySelectionMessage:Bt.default.func,circularNavigation:Bt.default.bool,highlightedIndex:Bt.default.number,defaultHighlightedIndex:Bt.default.number,initialHighlightedIndex:Bt.default.number,isOpen:Bt.default.bool,defaultIsOpen:Bt.default.bool,initialIsOpen:Bt.default.bool,selectedItem:Bt.default.any,initialSelectedItem:Bt.default.any,defaultSelectedItem:Bt.default.any,id:Bt.default.string,labelId:Bt.default.string,menuId:Bt.default.string,getItemId:Bt.default.func,toggleButtonId:Bt.default.string,stateReducer:Bt.default.func,onSelectedItemChange:Bt.default.func,onHighlightedIndexChange:Bt.default.func,onStateChange:Bt.default.func,onIsOpenChange:Bt.default.func,environment:Bt.default.shape({addEventListener:Bt.default.func,removeEventListener:Bt.default.func,document:Bt.default.shape({getElementById:Bt.default.func,activeElement:Bt.default.any,body:Bt.default.any})})};function uCr(e){var t=e.isOpen,r=e.resultCount,n=e.previousResultCount;return t?r?r!==n?"".concat(r," result").concat(r===1?" is":"s are"," available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select."):"":"No results are available.":""}var cCr=XA(XA({},QA),{getA11yStatusMessage:uCr}),fCr=rD,moe=0,goe=1,voe=2,yoe=3,_oe=4,xoe=5,boe=6,woe=7,bz=8,mQe=9,gQe=10,Eoe=11,vQe=12,Soe=13,Ioe=14,Toe=15,yQe=16,_Qe=17,xQe=18,bQe=19,Moe=20,uoe=21,wQe=22,EQe=Object.freeze({__proto__:null,MenuKeyDownArrowDown:moe,MenuKeyDownArrowUp:goe,MenuKeyDownEscape:voe,MenuKeyDownHome:yoe,MenuKeyDownEnd:_oe,MenuKeyDownEnter:xoe,MenuKeyDownSpaceButton:boe,MenuKeyDownCharacter:woe,MenuBlur:bz,MenuMouseLeave:mQe,ItemMouseMove:gQe,ItemClick:Eoe,ToggleButtonClick:vQe,ToggleButtonKeyDownArrowDown:Soe,ToggleButtonKeyDownArrowUp:Ioe,ToggleButtonKeyDownCharacter:Toe,FunctionToggleMenu:yQe,FunctionOpenMenu:_Qe,FunctionCloseMenu:xQe,FunctionSetHighlightedIndex:bQe,FunctionSelectItem:Moe,FunctionSetInputValue:uoe,FunctionReset:wQe});function pCr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case Eoe:i={isOpen:Ll(n,"isOpen"),highlightedIndex:Ll(n,"highlightedIndex"),selectedItem:n.items[t.index]};break;case Toe:{let a=t.key,u=`${e.inputValue}${a}`,p=eQe({keysSoFar:u,highlightedIndex:e.selectedItem?n.items.indexOf(e.selectedItem):-1,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Se({inputValue:u},p>=0&&{selectedItem:n.items[p]})}break;case Soe:i={highlightedIndex:fE(n,e,1,t.getItemNodeFromIndex),isOpen:!0};break;case Ioe:i={highlightedIndex:fE(n,e,-1,t.getItemNodeFromIndex),isOpen:!0};break;case xoe:case boe:i=Se({isOpen:Ll(n,"isOpen"),highlightedIndex:Ll(n,"highlightedIndex")},e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex]});break;case yoe:i={highlightedIndex:_1(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case _oe:i={highlightedIndex:_1(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case voe:i={isOpen:!1,highlightedIndex:-1};break;case bz:i={isOpen:!1,highlightedIndex:-1};break;case woe:{let a=t.key,u=`${e.inputValue}${a}`,p=eQe({keysSoFar:u,highlightedIndex:e.highlightedIndex,items:n.items,itemToString:n.itemToString,getItemNodeFromIndex:t.getItemNodeFromIndex});i=Se({inputValue:u},p>=0&&{highlightedIndex:p})}break;case moe:i={highlightedIndex:tD(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case goe:i={highlightedIndex:tD(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)};break;case Moe:i={selectedItem:t.selectedItem};break;default:return hQe(e,t,EQe);}return Se(Se({},e),i)}SQe.stateChangeTypes=EQe;function SQe(e){e===void 0&&(e={}),fCr(e,SQe);let t=Se(Se({},cCr),e),{items:r,scrollIntoView:n,environment:o,initialIsOpen:i,defaultIsOpen:a,itemToString:u,getA11ySelectionMessage:p,getA11yStatusMessage:h}=t,g=fQe(t),[x,b]=cQe(pCr,g,t),{isOpen:T,highlightedIndex:A,selectedItem:L,inputValue:P}=x,k=(0,kt.useRef)(null),q=(0,kt.useRef)(null),U=(0,kt.useRef)({}),H=(0,kt.useRef)(!0),X=(0,kt.useRef)(null),ee=lQe(t),ne=(0,kt.useRef)(),pe=(0,kt.useRef)(!0),ue=Ez({state:x,props:t}),Ie=(0,kt.useCallback)(We=>U.current[ee.getItemId(We)],[ee]);xz(h,[T,A,P,r],Se({isInitialMount:pe.current,previousResultCount:ne.current,items:r,environment:o,itemToString:u},x)),xz(p,[L],Se({isInitialMount:pe.current,previousResultCount:ne.current,items:r,environment:o,itemToString:u},x));let Re=dQe({menuElement:q.current,highlightedIndex:A,isOpen:T,itemRefs:U,scrollIntoView:n,getItemNodeFromIndex:Ie});(0,kt.useEffect)(()=>(X.current=coe(We=>{We({type:uoe,inputValue:""})},500),()=>{X.current.cancel()}),[]),(0,kt.useEffect)(()=>{P&&X.current(b)},[b,P]),hoe({isInitialMount:pe.current,props:t,state:x}),(0,kt.useEffect)(()=>{if(pe.current){(i||a||T)&&q.current&&q.current.focus();return}if(T){q.current&&q.current.focus();return}o.document.activeElement===q.current&&k.current&&(H.current=!1,k.current.focus())},[T]),(0,kt.useEffect)(()=>{pe.current||(ne.current=r.length)});let Te=pQe(T,[q,k],o,()=>{b({type:bz})}),Ee=doe("getMenuProps","getToggleButtonProps");(0,kt.useEffect)(()=>{pe.current=!1},[]),(0,kt.useEffect)(()=>{T||(U.current={})},[T]);let Ye=(0,kt.useMemo)(()=>({ArrowDown(We){We.preventDefault(),b({type:Soe,getItemNodeFromIndex:Ie,shiftKey:We.shiftKey})},ArrowUp(We){We.preventDefault(),b({type:Ioe,getItemNodeFromIndex:Ie,shiftKey:We.shiftKey})}}),[b,Ie]),Qe=(0,kt.useMemo)(()=>({ArrowDown(We){We.preventDefault(),b({type:moe,getItemNodeFromIndex:Ie,shiftKey:We.shiftKey})},ArrowUp(We){We.preventDefault(),b({type:goe,getItemNodeFromIndex:Ie,shiftKey:We.shiftKey})},Home(We){We.preventDefault(),b({type:yoe,getItemNodeFromIndex:Ie})},End(We){We.preventDefault(),b({type:_oe,getItemNodeFromIndex:Ie})},Escape(){b({type:voe})},Enter(We){We.preventDefault(),b({type:xoe})}," "(We){We.preventDefault(),b({type:boe})}}),[b,Ie]),qe=(0,kt.useCallback)(()=>{b({type:yQe})},[b]),Ue=(0,kt.useCallback)(()=>{b({type:xQe})},[b]),Ne=(0,kt.useCallback)(()=>{b({type:_Qe})},[b]),et=(0,kt.useCallback)(We=>{b({type:bQe,highlightedIndex:We})},[b]),st=(0,kt.useCallback)(We=>{b({type:Moe,selectedItem:We})},[b]),ft=(0,kt.useCallback)(()=>{b({type:wQe})},[b]),Ze=(0,kt.useCallback)(We=>{b({type:uoe,inputValue:We})},[b]),tt=(0,kt.useCallback)(We=>Se({id:ee.labelId,htmlFor:ee.toggleButtonId},We),[ee]),lt=(0,kt.useCallback)(function(We,Oe){let Be=We===void 0?{}:We,{onMouseLeave:at,refKey:ot="ref",onKeyDown:Pt,onBlur:Mt,ref:Nt}=Be,Ae=En(Be,["onMouseLeave","refKey","onKeyDown","onBlur","ref"]),{suppressRefError:Lt=!1}=Oe===void 0?{}:Oe,Wt=ue.current.state,Ct=mt=>{let yt=eD(mt);yt&&Qe[yt]?Qe[yt](mt):QJe(yt)&&b({type:woe,key:yt,getItemNodeFromIndex:Ie})},ce=()=>{if(H.current===!1){H.current=!0;return}!Te.current.isMouseDown&&b({type:bz})},Fe=()=>{b({type:mQe})};return Ee("getMenuProps",Lt,ot,q),Se(qt(Se({[ot]:yd(Nt,mt=>{q.current=mt}),id:ee.menuId,role:"listbox","aria-labelledby":ee.labelId,tabIndex:-1},Wt.isOpen&&Wt.highlightedIndex>-1&&{"aria-activedescendant":ee.getItemId(Wt.highlightedIndex)}),{onMouseLeave:wa(at,Fe),onKeyDown:wa(Pt,Ct),onBlur:wa(Mt,ce)}),Ae)},[b,ue,Qe,Te,Ee,ee,Ie]),ze=(0,kt.useCallback)(function(We,Oe){let ce=We===void 0?{}:We,{onClick:at,onKeyDown:ot,refKey:Pt="ref",ref:Mt}=ce,Nt=En(ce,["onClick","onKeyDown","refKey","ref"]),{suppressRefError:Ae=!1}=Oe===void 0?{}:Oe,Lt=()=>{b({type:vQe})},Wt=Fe=>{let Be=eD(Fe);Be&&Ye[Be]?Ye[Be](Fe):QJe(Be)&&b({type:Toe,key:Be,getItemNodeFromIndex:Ie})},Ct=Se({[Pt]:yd(Mt,Fe=>{k.current=Fe}),id:ee.toggleButtonId,"aria-haspopup":"listbox","aria-expanded":ue.current.state.isOpen,"aria-labelledby":`${ee.labelId} ${ee.toggleButtonId}`},Nt);return Nt.disabled||(Ct.onClick=wa(at,Lt),Ct.onKeyDown=wa(ot,Wt)),Ee("getToggleButtonProps",Ae,Pt,k),Ct},[b,ue,Ye,Ee,ee,Ie]),ge=(0,kt.useCallback)(function(We){let yt=We===void 0?{}:We,{item:Oe,index:at,onMouseMove:ot,onClick:Pt,refKey:Mt="ref",ref:Nt,disabled:Ae}=yt,Lt=En(yt,["item","index","onMouseMove","onClick","refKey","ref","disabled"]),{state:Wt,props:Ct}=ue.current,ce=()=>{at!==Wt.highlightedIndex&&(Re.current=!1,b({type:gQe,index:at,disabled:Ae}))},Fe=()=>{b({type:Eoe,index:at})},Be=foe(at,Oe,Ct.items);if(Be<0)throw new Error("Pass either item or item index in getItemProps!");let mt=Se({disabled:Ae,role:"option","aria-selected":`${Be===Wt.highlightedIndex}`,id:ee.getItemId(Be),[Mt]:yd(Nt,gt=>{gt&&(U.current[ee.getItemId(Be)]=gt)})},Lt);return Ae||(mt.onClick=wa(Pt,Fe)),mt.onMouseMove=wa(ot,ce),mt},[b,ue,Re,ee]);return{getToggleButtonProps:ze,getLabelProps:tt,getMenuProps:lt,getItemProps:ge,toggleMenu:qe,openMenu:Ne,closeMenu:Ue,setHighlightedIndex:et,selectItem:st,reset:ft,setInputValue:Ze,highlightedIndex:A,isOpen:T,selectedItem:L,inputValue:P}}var Coe=0,Aoe=1,Doe=2,Noe=3,Ooe=4,Loe=5,Poe=6,wz=7,IQe=8,TQe=9,koe=10,MQe=11,CQe=12,AQe=13,DQe=14,NQe=15,Roe=16,OQe=17,LQe=18,joe=19,PQe=Object.freeze({__proto__:null,InputKeyDownArrowDown:Coe,InputKeyDownArrowUp:Aoe,InputKeyDownEscape:Doe,InputKeyDownHome:Noe,InputKeyDownEnd:Ooe,InputKeyDownEnter:Loe,InputChange:Poe,InputBlur:wz,MenuMouseLeave:IQe,ItemMouseMove:TQe,ItemClick:koe,ToggleButtonClick:MQe,FunctionToggleMenu:CQe,FunctionOpenMenu:AQe,FunctionCloseMenu:DQe,FunctionSetHighlightedIndex:NQe,FunctionSelectItem:Roe,FunctionSetInputValue:OQe,FunctionReset:LQe,ControlledPropUpdatedSelectedItem:joe});function dCr(e){let t=fQe(e),{selectedItem:r}=t,{inputValue:n}=t;return n===""&&r&&e.defaultInputValue===void 0&&e.initialInputValue===void 0&&e.inputValue===void 0&&(n=e.itemToString(r)),qt(Se({},t),{inputValue:n})}var zOn={items:Bt.default.array.isRequired,itemToString:Bt.default.func,getA11yStatusMessage:Bt.default.func,getA11ySelectionMessage:Bt.default.func,circularNavigation:Bt.default.bool,highlightedIndex:Bt.default.number,defaultHighlightedIndex:Bt.default.number,initialHighlightedIndex:Bt.default.number,isOpen:Bt.default.bool,defaultIsOpen:Bt.default.bool,initialIsOpen:Bt.default.bool,selectedItem:Bt.default.any,initialSelectedItem:Bt.default.any,defaultSelectedItem:Bt.default.any,inputValue:Bt.default.string,defaultInputValue:Bt.default.string,initialInputValue:Bt.default.string,id:Bt.default.string,labelId:Bt.default.string,menuId:Bt.default.string,getItemId:Bt.default.func,inputId:Bt.default.string,toggleButtonId:Bt.default.string,stateReducer:Bt.default.func,onSelectedItemChange:Bt.default.func,onHighlightedIndexChange:Bt.default.func,onStateChange:Bt.default.func,onIsOpenChange:Bt.default.func,onInputValueChange:Bt.default.func,environment:Bt.default.shape({addEventListener:Bt.default.func,removeEventListener:Bt.default.func,document:Bt.default.shape({getElementById:Bt.default.func,activeElement:Bt.default.any,body:Bt.default.any})})};function hCr(e,t,r){let n=(0,kt.useRef)(),[o,i]=uQe(e,t,r);return(0,kt.useEffect)(()=>{oQe(r,"selectedItem")&&(n.current!==r.selectedItem&&i({type:joe,inputValue:r.itemToString(r.selectedItem)}),n.current=o.selectedItem===n.current?r.selectedItem:o.selectedItem)}),[_z(o,r),i]}var mCr=rD,gCr=qt(Se({},QA),{getA11yStatusMessage:eCr,circularNavigation:!0});function vCr(e,t){let{type:r,props:n,shiftKey:o}=t,i;switch(r){case koe:i={isOpen:Ll(n,"isOpen"),highlightedIndex:Ll(n,"highlightedIndex"),selectedItem:n.items[t.index],inputValue:n.itemToString(n.items[t.index])};break;case Coe:e.isOpen?i={highlightedIndex:tD(o?5:1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:fE(n,e,1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case Aoe:e.isOpen?i={highlightedIndex:tD(o?-5:-1,e.highlightedIndex,n.items.length,t.getItemNodeFromIndex,n.circularNavigation)}:i={highlightedIndex:fE(n,e,-1,t.getItemNodeFromIndex),isOpen:n.items.length>=0};break;case Loe:i=Se({},e.isOpen&&e.highlightedIndex>=0&&{selectedItem:n.items[e.highlightedIndex],isOpen:Ll(n,"isOpen"),highlightedIndex:Ll(n,"highlightedIndex"),inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case Doe:i=Se({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case Noe:i={highlightedIndex:_1(1,0,n.items.length,t.getItemNodeFromIndex,!1)};break;case Ooe:i={highlightedIndex:_1(-1,n.items.length-1,n.items.length,t.getItemNodeFromIndex,!1)};break;case wz:i=Se({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&t.selectItem&&{selectedItem:n.items[e.highlightedIndex],inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case Poe:i={isOpen:!0,highlightedIndex:Ll(n,"highlightedIndex"),inputValue:t.inputValue};break;case Roe:i={selectedItem:t.selectedItem,inputValue:n.itemToString(t.selectedItem)};break;case joe:i={inputValue:t.inputValue};break;default:return hQe(e,t,PQe);}return Se(Se({},e),i)}Sz.stateChangeTypes=PQe;function Sz(e){e===void 0&&(e={}),mCr(e,Sz);let t=Se(Se({},gCr),e),{initialIsOpen:r,defaultIsOpen:n,items:o,scrollIntoView:i,environment:a,getA11yStatusMessage:u,getA11ySelectionMessage:p,itemToString:h}=t,g=dCr(t),[x,b]=hCr(vCr,g,t),{isOpen:T,highlightedIndex:A,selectedItem:L,inputValue:P}=x,k=(0,kt.useRef)(null),q=(0,kt.useRef)({}),U=(0,kt.useRef)(null),H=(0,kt.useRef)(null),X=(0,kt.useRef)(null),ee=(0,kt.useRef)(!0),ne=lQe(t),pe=(0,kt.useRef)(),ue=Ez({state:x,props:t}),Ie=(0,kt.useCallback)(Oe=>q.current[ne.getItemId(Oe)],[ne]);xz(u,[T,A,P,o],Se({isInitialMount:ee.current,previousResultCount:pe.current,items:o,environment:a,itemToString:h},x)),xz(p,[L],Se({isInitialMount:ee.current,previousResultCount:pe.current,items:o,environment:a,itemToString:h},x));let Re=dQe({menuElement:k.current,highlightedIndex:A,isOpen:T,itemRefs:q,scrollIntoView:i,getItemNodeFromIndex:Ie});hoe({isInitialMount:ee.current,props:t,state:x}),(0,kt.useEffect)(()=>{(r||n||T)&&U.current&&U.current.focus()},[]),(0,kt.useEffect)(()=>{ee.current||(pe.current=o.length)});let Te=pQe(T,[X,k,H],a,()=>{b({type:wz,selectItem:!1})}),Ee=doe("getInputProps","getComboboxProps","getMenuProps");(0,kt.useEffect)(()=>{ee.current=!1},[]),(0,kt.useEffect)(()=>{T||(q.current={})},[T]);let Ye=(0,kt.useMemo)(()=>({ArrowDown(Oe){Oe.preventDefault(),b({type:Coe,shiftKey:Oe.shiftKey,getItemNodeFromIndex:Ie})},ArrowUp(Oe){Oe.preventDefault(),b({type:Aoe,shiftKey:Oe.shiftKey,getItemNodeFromIndex:Ie})},Home(Oe){ue.current.state.isOpen&&(Oe.preventDefault(),b({type:Noe,getItemNodeFromIndex:Ie}))},End(Oe){ue.current.state.isOpen&&(Oe.preventDefault(),b({type:Ooe,getItemNodeFromIndex:Ie}))},Escape(Oe){let at=ue.current.state;(at.isOpen||at.inputValue||at.selectedItem||at.highlightedIndex>-1)&&(Oe.preventDefault(),b({type:Doe}))},Enter(Oe){let at=ue.current.state;!at.isOpen||at.highlightedIndex<0||Oe.which===229||(Oe.preventDefault(),b({type:Loe,getItemNodeFromIndex:Ie}))}}),[b,ue,Ie]),Qe=(0,kt.useCallback)(Oe=>Se({id:ne.labelId,htmlFor:ne.inputId},Oe),[ne]),qe=(0,kt.useCallback)(function(Oe,at){let Lt=Oe===void 0?{}:Oe,{onMouseLeave:ot,refKey:Pt="ref",ref:Mt}=Lt,Nt=En(Lt,["onMouseLeave","refKey","ref"]),{suppressRefError:Ae=!1}=at===void 0?{}:at;return Ee("getMenuProps",Ae,Pt,k),Se({[Pt]:yd(Mt,Wt=>{k.current=Wt}),id:ne.menuId,role:"listbox","aria-labelledby":ne.labelId,onMouseLeave:wa(ot,()=>{b({type:IQe})})},Nt)},[b,Ee,ne]),Ue=(0,kt.useCallback)(function(Oe){let zr=Oe===void 0?{}:Oe,{item:at,index:ot,refKey:Pt="ref",ref:Mt,onMouseMove:Nt,onMouseDown:Ae,onClick:Lt,onPress:Wt,disabled:Ct}=zr,ce=En(zr,["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"]),{props:Fe,state:Be}=ue.current,mt=foe(ot,at,Fe.items);if(mt<0)throw new Error("Pass either item or item index in getItemProps!");let yt="onClick",gt=Lt,_t=()=>{ot!==Be.highlightedIndex&&(Re.current=!1,b({type:TQe,index:ot,disabled:Ct}))},Yt=()=>{b({type:koe,index:ot})},nt=on=>on.preventDefault();return Se(qt(Se({[Pt]:yd(Mt,on=>{on&&(q.current[ne.getItemId(mt)]=on)}),disabled:Ct,role:"option","aria-selected":`${mt===Be.highlightedIndex}`,id:ne.getItemId(mt)},!Ct&&{[yt]:wa(gt,Yt)}),{onMouseMove:wa(Nt,_t),onMouseDown:wa(Ae,nt)}),ce)},[b,ue,Re,ne]),Ne=(0,kt.useCallback)(function(Oe){let Lt=Oe===void 0?{}:Oe,{onClick:at,onPress:ot,refKey:Pt="ref",ref:Mt}=Lt,Nt=En(Lt,["onClick","onPress","refKey","ref"]),Ae=()=>{b({type:MQe}),!ue.current.state.isOpen&&U.current&&U.current.focus()};return Se(Se({[Pt]:yd(Mt,Wt=>{H.current=Wt}),id:ne.toggleButtonId,tabIndex:-1},!Nt.disabled&&{onClick:wa(at,Ae)}),Nt)},[b,ue,ne]),et=(0,kt.useCallback)(function(Oe,at){let Yt=Oe===void 0?{}:Oe,{onKeyDown:ot,onChange:Pt,onInput:Mt,onBlur:Nt,onChangeText:Ae,refKey:Lt="ref",ref:Wt}=Yt,Ct=En(Yt,["onKeyDown","onChange","onInput","onBlur","onChangeText","refKey","ref"]),{suppressRefError:ce=!1}=at===void 0?{}:at;Ee("getInputProps",ce,Lt,U);let Fe=ue.current.state,Be=nt=>{let zr=eD(nt);zr&&Ye[zr]&&Ye[zr](nt)},mt=nt=>{b({type:Poe,inputValue:nt.target.value})},yt=()=>{Fe.isOpen&&!Te.current.isMouseDown&&b({type:wz,selectItem:!0})},gt="onChange",_t={};return Ct.disabled||(_t={[gt]:wa(Pt,Mt,mt),onKeyDown:wa(ot,Be),onBlur:wa(Nt,yt)}),Se(Se(qt(Se({[Lt]:yd(Wt,nt=>{U.current=nt}),id:ne.inputId,"aria-autocomplete":"list","aria-controls":ne.menuId},Fe.isOpen&&Fe.highlightedIndex>-1&&{"aria-activedescendant":ne.getItemId(Fe.highlightedIndex)}),{"aria-labelledby":ne.labelId,autoComplete:"off",value:Fe.inputValue}),_t),Ct)},[b,Ye,ue,Te,Ee,ne]),st=(0,kt.useCallback)(function(Oe,at){let Ae=Oe===void 0?{}:Oe,{refKey:ot="ref",ref:Pt}=Ae,Mt=En(Ae,["refKey","ref"]),{suppressRefError:Nt=!1}=at===void 0?{}:at;return Ee("getComboboxProps",Nt,ot,X),Se({[ot]:yd(Pt,Lt=>{X.current=Lt}),role:"combobox","aria-haspopup":"listbox","aria-owns":ne.menuId,"aria-expanded":ue.current.state.isOpen},Mt)},[ue,Ee,ne]),ft=(0,kt.useCallback)(()=>{b({type:CQe})},[b]),Ze=(0,kt.useCallback)(()=>{b({type:DQe})},[b]),tt=(0,kt.useCallback)(()=>{b({type:AQe})},[b]),lt=(0,kt.useCallback)(Oe=>{b({type:NQe,highlightedIndex:Oe})},[b]),ze=(0,kt.useCallback)(Oe=>{b({type:Roe,selectedItem:Oe})},[b]),ge=(0,kt.useCallback)(Oe=>{b({type:OQe,inputValue:Oe})},[b]),We=(0,kt.useCallback)(()=>{b({type:LQe})},[b]);return{getItemProps:Ue,getLabelProps:Qe,getMenuProps:qe,getInputProps:et,getComboboxProps:st,getToggleButtonProps:Ne,toggleMenu:ft,openMenu:tt,closeMenu:Ze,setHighlightedIndex:lt,setInputValue:ge,selectItem:ze,reset:We,highlightedIndex:A,isOpen:T,selectedItem:L,inputValue:P}}var kQe={activeIndex:-1,selectedItems:[]};function tQe(e,t){return JA(e,t,kQe)}function rQe(e,t){return Ll(e,t,kQe)}function yCr(e){let t=tQe(e,"activeIndex"),r=tQe(e,"selectedItems");return{activeIndex:t,selectedItems:r}}function nQe(e){if(e.shiftKey||e.metaKey||e.ctrlKey||e.altKey)return!1;let t=e.target;return!(t instanceof HTMLInputElement&&t.value!==""&&(t.selectionStart!==0||t.selectionEnd!==0))}function _Cr(e){let{removedSelectedItem:t,itemToString:r}=e;return`${r(t)} has been removed.`}var FOn={selectedItems:Bt.default.array,initialSelectedItems:Bt.default.array,defaultSelectedItems:Bt.default.array,itemToString:Bt.default.func,getA11yRemovalMessage:Bt.default.func,stateReducer:Bt.default.func,activeIndex:Bt.default.number,initialActiveIndex:Bt.default.number,defaultActiveIndex:Bt.default.number,onActiveIndexChange:Bt.default.func,onSelectedItemsChange:Bt.default.func,keyNavigationNext:Bt.default.string,keyNavigationPrevious:Bt.default.string,environment:Bt.default.shape({addEventListener:Bt.default.func,removeEventListener:Bt.default.func,document:Bt.default.shape({getElementById:Bt.default.func,activeElement:Bt.default.any,body:Bt.default.any})})},xCr={itemToString:QA.itemToString,stateReducer:QA.stateReducer,environment:QA.environment,getA11yRemovalMessage:_Cr,keyNavigationNext:"ArrowRight",keyNavigationPrevious:"ArrowLeft"},bCr=rD,qoe=0,zoe=1,Foe=2,Uoe=3,Boe=4,Voe=5,Goe=6,Hoe=7,Woe=8,$oe=9,Yoe=10,Zoe=11,Koe=12,wCr=Object.freeze({__proto__:null,SelectedItemClick:qoe,SelectedItemKeyDownDelete:zoe,SelectedItemKeyDownBackspace:Foe,SelectedItemKeyDownNavigationNext:Uoe,SelectedItemKeyDownNavigationPrevious:Boe,DropdownKeyDownNavigationPrevious:Voe,DropdownKeyDownBackspace:Goe,DropdownClick:Hoe,FunctionAddSelectedItem:Woe,FunctionRemoveSelectedItem:$oe,FunctionSetSelectedItems:Yoe,FunctionSetActiveIndex:Zoe,FunctionReset:Koe});function ECr(e,t){let{type:r,index:n,props:o,selectedItem:i}=t,{activeIndex:a,selectedItems:u}=e,p;switch(r){case qoe:p={activeIndex:n};break;case Boe:p={activeIndex:a-1<0?0:a-1};break;case Uoe:p={activeIndex:a+1>=u.length?-1:a+1};break;case Foe:case zoe:{let h=a;u.length===1?h=-1:a===u.length-1&&(h=u.length-2),p={selectedItems:[...u.slice(0,a),...u.slice(a+1)],activeIndex:h};break}case Voe:p={activeIndex:u.length-1};break;case Goe:p={selectedItems:u.slice(0,u.length-1)};break;case Woe:p={selectedItems:[...u,i]};break;case Hoe:p={activeIndex:-1};break;case $oe:{let h=a,g=u.indexOf(i);g>=0&&(u.length===1?h=-1:g===u.length-1&&(h=u.length-2),p={selectedItems:[...u.slice(0,g),...u.slice(g+1)],activeIndex:h});break}case Yoe:{let{selectedItems:h}=t;p={selectedItems:h};break}case Zoe:{let{activeIndex:h}=t;p={activeIndex:h};break}case Koe:p={activeIndex:rQe(o,"activeIndex"),selectedItems:rQe(o,"selectedItems")};break;default:throw new Error("Reducer called without proper action type.");}return Se(Se({},e),p)}RQe.stateChangeTypes=wCr;function RQe(e){e===void 0&&(e={}),bCr(e,RQe);let t=Se(Se({},xCr),e),{getA11yRemovalMessage:r,itemToString:n,environment:o,keyNavigationNext:i,keyNavigationPrevious:a}=t,[u,p]=cQe(ECr,yCr(t),t),{activeIndex:h,selectedItems:g}=u,x=(0,kt.useRef)(!0),b=(0,kt.useRef)(null),T=(0,kt.useRef)(g),A=(0,kt.useRef)();A.current=[];let L=Ez({state:u,props:t});(0,kt.useEffect)(()=>{if(!x.current){if(g.length<T.current.length){let Ie=T.current.find(Re=>g.indexOf(Re)<0);iQe(r({itemToString:n,resultCount:g.length,removedSelectedItem:Ie,activeIndex:h,activeSelectedItem:g[h]}),o.document)}T.current=g}},[g.length]),(0,kt.useEffect)(()=>{x.current||(h===-1&&b.current?b.current.focus():A.current[h]&&A.current[h].focus())},[h]),hoe({isInitialMount:x.current,props:t,state:u});let P=doe("getDropdownProps");(0,kt.useEffect)(()=>{x.current=!1},[]);let k=(0,kt.useMemo)(()=>({[a](){p({type:Boe})},[i](){p({type:Uoe})},Delete(){p({type:zoe})},Backspace(){p({type:Foe})}}),[p,i,a]),q=(0,kt.useMemo)(()=>({[a](Ie){nQe(Ie)&&p({type:Voe})},Backspace(Ie){nQe(Ie)&&p({type:Goe})}}),[p,a]),U=(0,kt.useCallback)(function(Ie){let Ze=Ie===void 0?{}:Ie,{refKey:Re="ref",ref:Te,onClick:Ee,onKeyDown:Ye,selectedItem:Qe,index:qe}=Ze,Ue=En(Ze,["refKey","ref","onClick","onKeyDown","selectedItem","index"]),{state:Ne}=L.current;if(foe(qe,Qe,Ne.selectedItems)<0)throw new Error("Pass either selectedItem or index in getSelectedItemProps!");let st=()=>{p({type:qoe,index:qe})},ft=tt=>{let lt=eD(tt);lt&&k[lt]&&k[lt](tt)};return Se({[Re]:yd(Te,tt=>{tt&&A.current.push(tt)}),tabIndex:qe===Ne.activeIndex?0:-1,onClick:wa(Ee,st),onKeyDown:wa(Ye,ft)},Ue)},[p,L,k]),H=(0,kt.useCallback)(function(Ie,Re){let ft=Ie===void 0?{}:Ie,{refKey:Te="ref",ref:Ee,onKeyDown:Ye,onClick:Qe,preventKeyAction:qe=!1}=ft,Ue=En(ft,["refKey","ref","onKeyDown","onClick","preventKeyAction"]),{suppressRefError:Ne=!1}=Re===void 0?{}:Re;P("getDropdownProps",Ne,Te,b);let et=Ze=>{let tt=eD(Ze);tt&&q[tt]&&q[tt](Ze)},st=()=>{p({type:Hoe})};return Se(Se({[Te]:yd(Ee,Ze=>{Ze&&(b.current=Ze)})},!qe&&{onKeyDown:wa(Ye,et),onClick:wa(Qe,st)}),Ue)},[p,q,P]),X=(0,kt.useCallback)(Ie=>{p({type:Woe,selectedItem:Ie})},[p]),ee=(0,kt.useCallback)(Ie=>{p({type:$oe,selectedItem:Ie})},[p]),ne=(0,kt.useCallback)(Ie=>{p({type:Yoe,selectedItems:Ie})},[p]),pe=(0,kt.useCallback)(Ie=>{p({type:Zoe,activeIndex:Ie})},[p]),ue=(0,kt.useCallback)(()=>{p({type:Koe})},[p]);return{getSelectedItemProps:U,getDropdownProps:H,addSelectedItem:X,removeSelectedItem:ee,setSelectedItems:ne,setActiveIndex:pe,reset:ue,selectedItems:g,activeIndex:h}}var Bv=Z(xt(),1);function Xoe({buttonProps:e,fetchInputItems:t,label:r,itemToString:n,inputProps:o,onSelectedItemChange:i,timeout:a=300}){let[u,p]=(0,Pl.useState)([]),[h,g]=(0,Pl.useState)(void 0),x=(0,Pl.useRef)(),b=(0,Pl.useRef)(null),T=Ye=>{clearTimeout(b.current),b.current=setTimeout(()=>{t(Ye).then(Qe=>p(Qe))},a)},A=({inputValue:Ye})=>{h!==void 0&&g(void 0),T(Ye)},L=({selectedItem:Ye})=>{i!==void 0&&i(Ye),g(Ye)},{isOpen:P,getToggleButtonProps:k,getLabelProps:q,getMenuProps:U,getInputProps:H,getComboboxProps:X,getItemProps:ee,highlightedIndex:ne}=Sz({items:u,itemToString:n,onInputValueChange:A,onSelectedItemChange:L}),Te=e!=null?e:{},{onClick:pe}=Te,ue=En(Te,["onClick"]),Ee=H(),{ref:Ie}=Ee,Re=En(Ee,["ref"]);return Pl.default.createElement("div",{className:"vkf-autocomplete-container"},Pl.default.createElement("label",qt(Se({},q()),{id:Re["aria-labelledby"],className:"visually-hidden"}),r!==void 0?r:o.placeholder),Pl.default.createElement("div",Se({className:"form-group"},X()),Pl.default.createElement("input",Se(qt(Se({},Re),{ref:Ye=>{Ie(Ye),x.current=Ye},type:"text"}),o)),Pl.default.createElement("button",Se(Se(qt(Se({type:"button"},k()),{"aria-label":"toggle menu"}),ue),pe!==void 0?{onClick:()=>{pe(h,x.current!==null?x.current.value:"")}}:{}),"\u2193")),Pl.default.createElement("div",{className:"autocomplete-dropdown"},Pl.default.createElement("ul",qt(Se({className:"autocomplete-result-list"},U()),{id:Re["aria-controls"]}),P&&u.map((Ye,Qe)=>Pl.default.createElement("li",Se({className:Et("ui-menu-item",ne===Qe&&"highlighted",h===Ye&&"selected"),key:`${Ye.label}${Qe}`},ee({item:Ye,index:Qe})),Ye.label)))))}Xoe.propTypes={buttonProps:Bv.default.object,fetchInputItems:Bv.default.func,label:Bv.default.string,inputProps:Bv.default.object,itemToString:Bv.default.func,onSelectedItemChange:Bv.default.func,timeout:Bv.default.number};var jQe=Z(mv(),1),Joe=(e,t,r)=>{let n=e+"?format=json&q="+t;return jQe.default.get(n).then(o=>{let a=o.data.map(u=>({label:u.display_name,value:u.display_name,lonlat:{x:parseFloat(u.lon),y:parseFloat(u.lat)},type:u.type}));return r!==void 0&&r(),a})};var SCr=e=>e?e.label:"",qQe=e=>{let{onSelectPosition:t,searchUrl:r}=e,[n,o]=(0,x1.useState)(!1),i=Mr(ji),a=(0,x1.useCallback)(p=>(o(!0),Joe(r,p,()=>{o(!1)})),[r]),u=(p,h)=>{p!==void 0?t(p):Joe(r,h).then(g=>{if(g.length>0)t(g[0]);else throw new Error(fe("placenamesearch-unknown-placename"))}).catch(()=>{i({id:"placenamesearch",type:"warning",text:fe("placenamesearch-unknown-placename")})})};return x1.default.createElement("div",{className:"gazetteersearch-container"},x1.default.createElement(Xoe,{buttonProps:{className:"form-control gazetteersearch-submit",onClick:u,"aria-label":fe("placenamesearch-submit"),title:fe("placenamesearch-submit")},fetchInputItems:a,inputProps:{className:`form-control gazetteersearch-input ${n?"loading":""}`,placeholder:fe("placenamesearch-placeholder")},itemToString:SCr,onSelectedItemChange:u}))};qQe.propTypes={onSelectPosition:Qoe.default.func.isRequired,searchUrl:Qoe.default.string.isRequired};var zQe=qQe;var FQe=Z(xt(),1),UQe=({searchUrl:e})=>{let t=ht(yr),r=(0,Iz.useCallback)(n=>{if(t){let o=[n.lonlat.x,n.lonlat.y];t.flyTo({center:o,zoom:12})}},[t]);return Iz.default.createElement(zQe,{onSelectPosition:r,searchUrl:e})};UQe.propTypes={searchUrl:FQe.default.string.isRequired};var Tz=UQe;var BQe=({customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})=>{let n=ht(v9e);return Vv.default.createElement("div",{className:Et("vkf-spatialsearch-root",!n&&"in")},Vv.default.createElement("div",{className:"spatialsearch-inner-container"},Vv.default.createElement("div",{className:"spatialsearch-content-panel"},Vv.default.createElement("div",{className:"body-container"},Vv.default.createElement(Tz,{searchUrl:hr.getNominatimUrl()}),Vv.default.createElement(mz,null),Vv.default.createElement(nZe,{customQuery:e,MapSearchListItemComponent:t,mosaicMode:r})))))};BQe.propTypes={customQuery:Mz.default.array,MapSearchListItemComponent:Mz.default.elementType,mosaicMode:Mz.default.bool};var VQe=BQe;var Tn=Z(we(),1),l8=Z(xt(),1);var Gv=Z(we(),1),b1=Z(xt(),1);var GQe=({isOpen:e,onClose:t,modalClassName:r,renderContent:n,renderFooter:o,title:i})=>Gv.default.createElement(Hh,{className:"vkf-modal",onHide:t,show:e,dialogClassName:r},Gv.default.createElement(kC,null,Gv.default.createElement(RC,null,i),Gv.default.createElement(mn,{className:"close-button",onClick:t},Gv.default.createElement(qr,{name:"close"}))),Gv.default.createElement(OC,null,n()),o!==void 0&&Gv.default.createElement(PC,null,o()));GQe.propTypes={isOpen:b1.default.bool,onClose:b1.default.func,modalClassName:b1.default.string,renderContent:b1.default.func,renderFooter:b1.default.func,title:b1.default.string};var HQe=GQe;var lf=HQe;var AE=Z(we(),1),Grt=Z(mv(),1),xD=Z(xt(),1);var ICr=function(){function e(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}return e.prototype.preventDefault=function(){this.defaultPrevented=!0},e.prototype.stopPropagation=function(){this.propagationStopped=!0},e}();var il=ICr;var dm={PROPERTYCHANGE:"propertychange"};var TCr=function(){function e(){this.disposed=!1}return e.prototype.dispose=function(){this.disposed||(this.disposed=!0,this.disposeInternal())},e.prototype.disposeInternal=function(){},e}(),Hv=TCr;function nD(e,t){return e>t?1:e<t?-1:0}function pE(e,t,r){var n=e.length;if(e[0]<=t)return 0;if(t<=e[n-1])return n-1;var o=void 0;if(r>0){for(o=1;o<n;++o)if(e[o]<t)return o-1}else if(r<0){for(o=1;o<n;++o)if(e[o]<=t)return o}else for(o=1;o<n;++o){if(e[o]==t)return o;if(e[o]<t)return typeof r=="function"?r(t,e[o-1],e[o])>0?o-1:o:e[o-1]-t<t-e[o]?o-1:o}return n-1}function WQe(e,t){for(var r=Array.isArray(t)?t:[t],n=r.length,o=0;o<n;o++)e[e.length]=r[o]}function Cz(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function $Qe(e,t,r){var n=t||nD;return e.every(function(o,i){if(i===0)return!0;var a=n(e[i-1],o);return!(a>0||r&&a===0)})}function Wv(){return!0}function hm(){return!1}function mm(){}function YQe(e){var t=!1,r,n,o;return function(){var i=Array.prototype.slice.call(arguments);return(!t||this!==o||!Cz(i,n))&&(t=!0,o=this,n=i,r=e.apply(this,arguments)),r}}var MCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CCr=function(e){MCr(t,e);function t(r){var n=e.call(this)||this;return n.eventTarget_=r,n.pendingRemovals_=null,n.dispatching_=null,n.listeners_=null,n}return t.prototype.addEventListener=function(r,n){if(!(!r||!n)){var o=this.listeners_||(this.listeners_={}),i=o[r]||(o[r]=[]);i.indexOf(n)===-1&&i.push(n)}},t.prototype.dispatchEvent=function(r){var n=typeof r=="string",o=n?r:r.type,i=this.listeners_&&this.listeners_[o];if(i){var a=n?new il(r):r;a.target||(a.target=this.eventTarget_||this);var u=this.dispatching_||(this.dispatching_={}),p=this.pendingRemovals_||(this.pendingRemovals_={});o in u||(u[o]=0,p[o]=0),++u[o];for(var h,g=0,x=i.length;g<x;++g)if("handleEvent"in i[g]?h=i[g].handleEvent(a):h=i[g].call(this,a),h===!1||a.propagationStopped){h=!1;break}if(--u[o]===0){var b=p[o];for(delete p[o];b--;)this.removeEventListener(o,mm);delete u[o]}return h}},t.prototype.disposeInternal=function(){this.listeners_&&Jc(this.listeners_)},t.prototype.getListeners=function(r){return this.listeners_&&this.listeners_[r]||void 0},t.prototype.hasListener=function(r){return this.listeners_?r?r in this.listeners_:Object.keys(this.listeners_).length>0:!1},t.prototype.removeEventListener=function(r,n){var o=this.listeners_&&this.listeners_[r];if(o){var i=o.indexOf(n);i!==-1&&(this.pendingRemovals_&&r in this.pendingRemovals_?(o[i]=mm,++this.pendingRemovals_[r]):(o.splice(i,1),o.length===0&&delete this.listeners_[r]))}},t}(Hv),uf=CCr;var _r={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function In(e,t,r,n,o){if(n&&n!==e&&(r=r.bind(n)),o){var i=r;r=function(){e.removeEventListener(t,r),i.apply(this,arguments)}}var a={target:e,type:t,listener:r};return e.addEventListener(t,r),a}function dE(e,t,r,n){return In(e,t,r,n,!0)}function ao(e){e&&e.target&&(e.target.removeEventListener(e.type,e.listener),Jc(e))}var ACr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Az=function(e){ACr(t,e);function t(){var r=e.call(this)||this;return r.on=r.onInternal,r.once=r.onceInternal,r.un=r.unInternal,r.revision_=0,r}return t.prototype.changed=function(){++this.revision_,this.dispatchEvent(_r.CHANGE)},t.prototype.getRevision=function(){return this.revision_},t.prototype.onInternal=function(r,n){if(Array.isArray(r)){for(var o=r.length,i=new Array(o),a=0;a<o;++a)i[a]=In(this,r[a],n);return i}else return In(this,r,n)},t.prototype.onceInternal=function(r,n){var o;if(Array.isArray(r)){var i=r.length;o=new Array(i);for(var a=0;a<i;++a)o[a]=dE(this,r[a],n)}else o=dE(this,r,n);return n.ol_key=o,o},t.prototype.unInternal=function(r,n){var o=n.ol_key;if(o)DCr(o);else if(Array.isArray(r))for(var i=0,a=r.length;i<a;++i)this.removeEventListener(r[i],n);else this.removeEventListener(r,n)},t}(uf);Az.prototype.on;Az.prototype.once;Az.prototype.un;function DCr(e){if(Array.isArray(e))for(var t=0,r=e.length;t<r;++t)ao(e[t]);else ao(e)}var Dz=Az;var KQe=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ZQe=function(e){KQe(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.key=n,i.oldValue=o,i}return t}(il);var NCr=function(e){KQe(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,$i(n),n.values_=null,r!==void 0&&n.setProperties(r),n}return t.prototype.get=function(r){var n;return this.values_&&this.values_.hasOwnProperty(r)&&(n=this.values_[r]),n},t.prototype.getKeys=function(){return this.values_&&Object.keys(this.values_)||[]},t.prototype.getProperties=function(){return this.values_&&zo({},this.values_)||{}},t.prototype.hasProperties=function(){return!!this.values_},t.prototype.notify=function(r,n){var o;o="change:".concat(r),this.hasListener(o)&&this.dispatchEvent(new ZQe(o,r,n)),o=dm.PROPERTYCHANGE,this.hasListener(o)&&this.dispatchEvent(new ZQe(o,r,n))},t.prototype.addChangeListener=function(r,n){this.addEventListener("change:".concat(r),n)},t.prototype.removeChangeListener=function(r,n){this.removeEventListener("change:".concat(r),n)},t.prototype.set=function(r,n,o){var i=this.values_||(this.values_={});if(o)i[r]=n;else{var a=i[r];i[r]=n,a!==n&&this.notify(r,a)}},t.prototype.setProperties=function(r,n){for(var o in r)this.set(o,r[o],n)},t.prototype.applyProperties=function(r){r.values_&&zo(this.values_||(this.values_={}),r.values_)},t.prototype.unset=function(r,n){if(this.values_&&r in this.values_){var o=this.values_[r];delete this.values_[r],x$e(this.values_)&&(this.values_=null),n||this.notify(r,o)}},t}(Dz),Za=NCr;var eie={ACTIVE:"active"};function tie(e){return Math.pow(e,3)}function cf(e){return 1-tie(1-e)}function XQe(e){return 3*e*e-2*e*e*e}function JQe(e){return e}var OCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LCr=function(e){OCr(t,e);function t(r){var n=e.call(this)||this;return n.on,n.once,n.un,r&&r.handleEvent&&(n.handleEvent=r.handleEvent),n.map_=null,n.setActive(!0),n}return t.prototype.getActive=function(){return this.get(eie.ACTIVE)},t.prototype.getMap=function(){return this.map_},t.prototype.handleEvent=function(r){return!0},t.prototype.setActive=function(r){this.set(eie.ACTIVE,r)},t.prototype.setMap=function(r){this.map_=r},t}(Za);function QQe(e,t,r){var n=e.getCenterInternal();if(n){var o=[n[0]+t[0],n[1]+t[1]];e.animateInternal({duration:r!==void 0?r:250,easing:JQe,center:e.getConstrainedCenter(o)})}}function hE(e,t,r,n){var o=e.getZoom();if(o!==void 0){var i=e.getConstrainedZoom(o+t),a=e.getResolutionForZoom(i);e.getAnimating()&&e.cancelAnimations(),e.animate({resolution:a,anchor:r,duration:n!==void 0?n:250,easing:cf})}}var _d=LCr;var ri={SINGLECLICK:"singleclick",CLICK:_r.CLICK,DBLCLICK:_r.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var PCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kCr=function(e){PCr(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,o)||this,o.handleDownEvent&&(n.handleDownEvent=o.handleDownEvent),o.handleDragEvent&&(n.handleDragEvent=o.handleDragEvent),o.handleMoveEvent&&(n.handleMoveEvent=o.handleMoveEvent),o.handleUpEvent&&(n.handleUpEvent=o.handleUpEvent),o.stopDown&&(n.stopDown=o.stopDown),n.handlingDownUpSequence=!1,n.targetPointers=[],n}return t.prototype.getPointerCount=function(){return this.targetPointers.length},t.prototype.handleDownEvent=function(r){return!1},t.prototype.handleDragEvent=function(r){},t.prototype.handleEvent=function(r){if(!r.originalEvent)return!0;var n=!1;if(this.updateTrackedPointers_(r),this.handlingDownUpSequence){if(r.type==ri.POINTERDRAG)this.handleDragEvent(r),r.originalEvent.preventDefault();else if(r.type==ri.POINTERUP){var o=this.handleUpEvent(r);this.handlingDownUpSequence=o&&this.targetPointers.length>0}}else if(r.type==ri.POINTERDOWN){var i=this.handleDownEvent(r);this.handlingDownUpSequence=i,n=this.stopDown(i)}else r.type==ri.POINTERMOVE&&this.handleMoveEvent(r);return!n},t.prototype.handleMoveEvent=function(r){},t.prototype.handleUpEvent=function(r){return!1},t.prototype.stopDown=function(r){return r},t.prototype.updateTrackedPointers_=function(r){r.activePointers&&(this.targetPointers=r.activePointers)},t}(_d);function mE(e){for(var t=e.length,r=0,n=0,o=0;o<t;o++)r+=e[o].clientX,n+=e[o].clientY;return[r/t,n/t]}var xd=kCr;var al={XY:"XY",XYZ:"XYZ",XYM:"XYM",XYZM:"XYZM"};var $v=typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"?navigator.userAgent.toLowerCase():"",eet=$v.indexOf("firefox")!==-1,RCr=$v.indexOf("safari")!==-1&&$v.indexOf("chrom")==-1,tet=RCr&&!!($v.indexOf("version/15.4")>=0||$v.match(/cpu (os|iphone os) 15_4 like mac os x/)),ret=$v.indexOf("webkit")!==-1&&$v.indexOf("edge")==-1,net=$v.indexOf("macintosh")!==-1,Nz=typeof devicePixelRatio!="undefined"?devicePixelRatio:1,oet=typeof WorkerGlobalScope!="undefined"&&typeof OffscreenCanvas!="undefined"&&self instanceof WorkerGlobalScope,iet=typeof Image!="undefined"&&Image.prototype.decode,Oz=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch(r){}return e}();var rie=new Array(6);function ff(){return[1,0,0,1,0,0]}function gE(e){return Lz(e,1,0,0,1,0,0)}function nie(e,t){var r=e[0],n=e[1],o=e[2],i=e[3],a=e[4],u=e[5],p=t[0],h=t[1],g=t[2],x=t[3],b=t[4],T=t[5];return e[0]=r*p+o*h,e[1]=n*p+i*h,e[2]=r*g+o*x,e[3]=n*g+i*x,e[4]=r*b+o*T+a,e[5]=n*b+i*T+u,e}function Lz(e,t,r,n,o,i,a){return e[0]=t,e[1]=r,e[2]=n,e[3]=o,e[4]=i,e[5]=a,e}function Yv(e,t){var r=t[0],n=t[1];return t[0]=e[0]*r+e[2]*n+e[4],t[1]=e[1]*r+e[3]*n+e[5],t}function Pz(e,t){var r=Math.cos(t),n=Math.sin(t);return nie(e,Lz(rie,r,n,-n,r,0,0))}function oD(e,t,r){return nie(e,Lz(rie,t,0,0,r,0,0))}function aet(e,t,r){return nie(e,Lz(rie,1,0,0,1,t,r))}function Zv(e,t,r,n,o,i,a,u){var p=Math.sin(i),h=Math.cos(i);return e[0]=n*h,e[1]=o*p,e[2]=-n*p,e[3]=o*h,e[4]=a*n*h-u*n*p+t,e[5]=a*o*p+u*o*h+r,e}function set(e,t){var r=jCr(t);Xr(r!==0,32);var n=t[0],o=t[1],i=t[2],a=t[3],u=t[4],p=t[5];return e[0]=a/r,e[1]=-o/r,e[2]=-i/r,e[3]=n/r,e[4]=(i*p-a*u)/r,e[5]=-(n*p-o*u)/r,e}function jCr(e){return e[0]*e[3]-e[1]*e[2]}function oie(e,t,r,n,o,i){for(var a=i||[],u=0,p=t;p<r;p+=n){var h=e[p],g=e[p+1];a[u++]=o[0]*h+o[2]*g+o[4],a[u++]=o[1]*h+o[3]*g+o[5]}return i&&a.length!=u&&(a.length=u),a}function uet(e,t,r,n,o,i,a){for(var u=a||[],p=Math.cos(o),h=Math.sin(o),g=i[0],x=i[1],b=0,T=t;T<r;T+=n){var A=e[T]-g,L=e[T+1]-x;u[b++]=g+A*p-L*h,u[b++]=x+A*h+L*p;for(var P=T+2;P<T+n;++P)u[b++]=e[P]}return a&&u.length!=b&&(u.length=b),u}function cet(e,t,r,n,o,i,a,u){for(var p=u||[],h=a[0],g=a[1],x=0,b=t;b<r;b+=n){var T=e[b]-h,A=e[b+1]-g;p[x++]=h+o*T,p[x++]=g+i*A;for(var L=b+2;L<b+n;++L)p[x++]=e[L]}return u&&p.length!=x&&(p.length=x),p}function fet(e,t,r,n,o,i,a){for(var u=a||[],p=0,h=t;h<r;h+=n){u[p++]=e[h]+o,u[p++]=e[h+1]+i;for(var g=h+2;g<h+n;++g)u[p++]=e[g]}return a&&u.length!=p&&(u.length=p),u}var qCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pet=ff(),zCr=function(e){qCr(t,e);function t(){var r=e.call(this)||this;return r.extent_=id(),r.extentRevision_=-1,r.simplifiedGeometryMaxMinSquaredTolerance=0,r.simplifiedGeometryRevision=0,r.simplifyTransformedInternal=YQe(function(n,o,i){if(!i)return this.getSimplifiedGeometry(o);var a=this.clone();return a.applyTransform(i),a.getSimplifiedGeometry(o)}),r}return t.prototype.simplifyTransformed=function(r,n){return this.simplifyTransformedInternal(this.getRevision(),r,n)},t.prototype.clone=function(){return Gn()},t.prototype.closestPointXY=function(r,n,o,i){return Gn()},t.prototype.containsXY=function(r,n){var o=this.getClosestPoint([r,n]);return o[0]===r&&o[1]===n},t.prototype.getClosestPoint=function(r,n){var o=n||[NaN,NaN];return this.closestPointXY(r[0],r[1],o,1/0),o},t.prototype.intersectsCoordinate=function(r){return this.containsXY(r[0],r[1])},t.prototype.computeExtent=function(r){return Gn()},t.prototype.getExtent=function(r){if(this.extentRevision_!=this.getRevision()){var n=this.computeExtent(this.extent_);(isNaN(n[0])||isNaN(n[1]))&&qw(n),this.extentRevision_=this.getRevision()}return A$e(this.extent_,r)},t.prototype.rotate=function(r,n){Gn()},t.prototype.scale=function(r,n,o){Gn()},t.prototype.simplify=function(r){return this.getSimplifiedGeometry(r*r)},t.prototype.getSimplifiedGeometry=function(r){return Gn()},t.prototype.getType=function(){return Gn()},t.prototype.applyTransform=function(r){Gn()},t.prototype.intersectsExtent=function(r){return Gn()},t.prototype.translate=function(r,n){Gn()},t.prototype.transform=function(r,n){var o=_u(r),i=o.getUnits()==yu.TILE_PIXELS?function(a,u,p){var h=o.getExtent(),g=o.getWorldExtent(),x=bs(g)/bs(h);return Zv(pet,g[0],g[3],x,-x,0,0,0),oie(a,0,a.length,p,pet,u),s1(o,n)(a,u,p)}:s1(o,n);return this.applyTransform(i),this},t}(Za),det=zCr;var FCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),UCr=function(e){FCr(t,e);function t(){var r=e.call(this)||this;return r.layout=al.XY,r.stride=2,r.flatCoordinates=null,r}return t.prototype.computeExtent=function(r){return T$e(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r)},t.prototype.getCoordinates=function(){return Gn()},t.prototype.getFirstCoordinate=function(){return this.flatCoordinates.slice(0,this.stride)},t.prototype.getFlatCoordinates=function(){return this.flatCoordinates},t.prototype.getLastCoordinate=function(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)},t.prototype.getLayout=function(){return this.layout},t.prototype.getSimplifiedGeometry=function(r){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),r<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&r<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;var n=this.getSimplifiedGeometryInternal(r),o=n.getFlatCoordinates();return o.length<this.flatCoordinates.length?n:(this.simplifiedGeometryMaxMinSquaredTolerance=r,this)},t.prototype.getSimplifiedGeometryInternal=function(r){return this},t.prototype.getStride=function(){return this.stride},t.prototype.setFlatCoordinates=function(r,n){this.stride=het(r),this.layout=r,this.flatCoordinates=n},t.prototype.setCoordinates=function(r,n){Gn()},t.prototype.setLayout=function(r,n,o){var i;if(r)i=het(r);else{for(var a=0;a<o;++a)if(n.length===0){this.layout=al.XY,this.stride=2;return}else n=n[0];i=n.length,r=BCr(i)}this.layout=r,this.stride=i},t.prototype.applyTransform=function(r){this.flatCoordinates&&(r(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())},t.prototype.rotate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();uet(o,0,o.length,i,r,n,o),this.changed()}},t.prototype.scale=function(r,n,o){var i=n;i===void 0&&(i=r);var a=o;a||(a=Jf(this.getExtent()));var u=this.getFlatCoordinates();if(u){var p=this.getStride();cet(u,0,u.length,p,r,i,a,u),this.changed()}},t.prototype.translate=function(r,n){var o=this.getFlatCoordinates();if(o){var i=this.getStride();fet(o,0,o.length,i,r,n,o),this.changed()}},t}(det);function BCr(e){var t;return e==2?t=al.XY:e==3?t=al.XYZ:e==4&&(t=al.XYZM),t}function het(e){var t;return e==al.XY?t=2:e==al.XYZ||e==al.XYM?t=3:e==al.XYZM&&(t=4),t}var vE=UCr;function met(e,t,r,n,o,i,a){var u=e[t],p=e[t+1],h=e[r]-u,g=e[r+1]-p,x;if(h===0&&g===0)x=t;else{var b=((o-u)*h+(i-p)*g)/(h*h+g*g);if(b>1)x=r;else if(b>0){for(var T=0;T<n;++T)a[T]=p$e(e[t+T],e[r+T],b);a.length=n;return}else x=t}for(var T=0;T<n;++T)a[T]=e[x+T];a.length=n}function iie(e,t,r,n,o){var i=e[t],a=e[t+1];for(t+=n;t<r;t+=n){var u=e[t],p=e[t+1],h=Kh(i,a,u,p);h>o&&(o=h),i=u,a=p}return o}function get(e,t,r,n,o){for(var i=0,a=r.length;i<a;++i){var u=r[i];o=iie(e,t,u,n,o),t=u}return o}function aie(e,t,r,n,o,i,a,u,p,h,g){if(t==r)return h;var x,b;if(o===0)if(b=Kh(a,u,e[t],e[t+1]),b<h){for(x=0;x<n;++x)p[x]=e[t+x];return p.length=n,b}else return h;for(var T=g||[NaN,NaN],A=t+n;A<r;)if(met(e,A-n,A,n,a,u,T),b=Kh(a,u,T[0],T[1]),b<h){for(h=b,x=0;x<n;++x)p[x]=T[x];p.length=n,A+=n}else A+=n*Math.max((Math.sqrt(b)-Math.sqrt(h))/o|0,1);if(i&&(met(e,r-n,t,n,a,u,T),b=Kh(a,u,T[0],T[1]),b<h)){for(h=b,x=0;x<n;++x)p[x]=T[x];p.length=n}return h}function vet(e,t,r,n,o,i,a,u,p,h,g){for(var x=g||[NaN,NaN],b=0,T=r.length;b<T;++b){var A=r[b];h=aie(e,t,A,n,o,i,a,u,p,h,x),t=A}return h}function yet(e,t,r,n){for(var o=0,i=r.length;o<i;++o)e[t++]=r[o];return t}function sie(e,t,r,n){for(var o=0,i=r.length;o<i;++o)for(var a=r[o],u=0;u<n;++u)e[t++]=a[u];return t}function _et(e,t,r,n,o){for(var i=o||[],a=0,u=0,p=r.length;u<p;++u){var h=sie(e,t,r[u],n);i[a++]=h,t=h}return i.length=a,i}function xet(e,t,r,n,o,i,a){var u=(r-t)/n;if(u<3){for(;t<r;t+=n)i[a++]=e[t],i[a++]=e[t+1];return a}var p=new Array(u);p[0]=1,p[u-1]=1;for(var h=[t,r-n],g=0;h.length>0;){for(var x=h.pop(),b=h.pop(),T=0,A=e[b],L=e[b+1],P=e[x],k=e[x+1],q=b+n;q<x;q+=n){var U=e[q],H=e[q+1],X=c$e(U,H,A,L,P,k);X>T&&(g=q,T=X)}T>o&&(p[(g-t)/n]=1,b+n<g&&h.push(b,g),g+n<x&&h.push(g,x))}for(var q=0;q<u;++q)p[q]&&(i[a++]=e[t+q*n],i[a++]=e[t+q*n+1]);return a}function yE(e,t){return t*Math.round(e/t)}function VCr(e,t,r,n,o,i,a){if(t==r)return a;var u=yE(e[t],o),p=yE(e[t+1],o);t+=n,i[a++]=u,i[a++]=p;var h,g;do if(h=yE(e[t],o),g=yE(e[t+1],o),t+=n,t==r)return i[a++]=h,i[a++]=g,a;while(h==u&&g==p);for(;t<r;){var x=yE(e[t],o),b=yE(e[t+1],o);if(t+=n,!(x==h&&b==g)){var T=h-u,A=g-p,L=x-u,P=b-p;if(T*P==A*L&&(T<0&&L<T||T==L||T>0&&L>T)&&(A<0&&P<A||A==P||A>0&&P>A)){h=x,g=b;continue}i[a++]=h,i[a++]=g,u=h,p=g,h=x,g=b}}return i[a++]=h,i[a++]=g,a}function bet(e,t,r,n,o,i,a,u){for(var p=0,h=r.length;p<h;++p){var g=r[p];a=VCr(e,t,g,n,o,i,a),u.push(a),t=g}return a}function lie(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,u=t;u<r;u+=n)i[a++]=e.slice(u,u+n);return i.length=a,i}function wet(e,t,r,n,o){for(var i=o!==void 0?o:[],a=0,u=0,p=r.length;u<p;++u){var h=r[u];i[a++]=lie(e,t,h,n,i[a]),t=h}return i.length=a,i}function uie(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var u=e[t],p=e[t+1];o+=a*u-i*p,i=u,a=p}return o/2}function Eet(e,t,r,n){for(var o=0,i=0,a=r.length;i<a;++i){var u=r[i];o+=uie(e,t,u,n),t=u}return o}var GCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HCr=function(e){GCr(t,e);function t(r,n){var o=e.call(this)||this;return o.maxDelta_=-1,o.maxDeltaRevision_=-1,n!==void 0&&!Array.isArray(r[0])?o.setFlatCoordinates(n,r):o.setCoordinates(r,n),o}return t.prototype.clone=function(){return new t(this.flatCoordinates.slice(),this.layout)},t.prototype.closestPointXY=function(r,n,o,i){return i<L6(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(iie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),aie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.getArea=function(){return uie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getCoordinates=function(){return lie(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[];return n.length=xet(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,r,n,0),new t(n,al.XY)},t.prototype.getType=function(){return"LinearRing"},t.prototype.intersectsExtent=function(r){return!1},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=sie(this.flatCoordinates,0,r,this.stride),this.changed()},t}(vE),cie=HCr;var WCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$Cr=function(e){WCr(t,e);function t(r,n){var o=e.call(this)||this;return o.setCoordinates(r,n),o}return t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout);return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){var a=this.flatCoordinates,u=Kh(r,n,a[0],a[1]);if(u<i){for(var p=this.stride,h=0;h<p;++h)o[h]=a[h];return o.length=p,u}else return i},t.prototype.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]},t.prototype.computeExtent=function(r){return I$e(this.flatCoordinates,r)},t.prototype.getType=function(){return"Point"},t.prototype.intersectsExtent=function(r){return sre(r,this.flatCoordinates[0],this.flatCoordinates[1])},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=yet(this.flatCoordinates,0,r,this.stride),this.changed()},t}(vE),Iet=$Cr;function Tet(e,t,r,n,o){var i=P6(o,function(a){return!Kv(e,t,r,n,a[0],a[1])});return!i}function Kv(e,t,r,n,o,i){for(var a=0,u=e[r-n],p=e[r-n+1];t<r;t+=n){var h=e[t],g=e[t+1];p<=i?g>i&&(h-u)*(i-p)-(o-u)*(g-p)>0&&a++:g<=i&&(h-u)*(i-p)-(o-u)*(g-p)<0&&a--,u=h,p=g}return a!==0}function kz(e,t,r,n,o,i){if(r.length===0||!Kv(e,t,r[0],n,o,i))return!1;for(var a=1,u=r.length;a<u;++a)if(Kv(e,r[a-1],r[a],n,o,i))return!1;return!0}function Met(e,t,r,n,o,i,a){for(var u,p,h,g,x,b,T,A=o[i+1],L=[],P=0,k=r.length;P<k;++P){var q=r[P];for(g=e[q-n],b=e[q-n+1],u=t;u<q;u+=n)x=e[u],T=e[u+1],(A<=b&&T<=A||b<=A&&A<=T)&&(h=(A-b)/(T-b)*(x-g)+g,L.push(h)),g=x,b=T}var U=NaN,H=-1/0;for(L.sort(nD),g=L[0],u=1,p=L.length;u<p;++u){x=L[u];var X=Math.abs(x-g);X>H&&(h=(g+x)/2,kz(e,t,r,n,h,A)&&(U=h,H=X)),g=x}return isNaN(U)&&(U=o[i]),a?(a.push(U,A,H),a):[U,A,H]}function Cet(e,t,r,n,o){var i;for(t+=n;t<r;t+=n)if(i=o(e.slice(t-n,t),e.slice(t,t+n)),i)return i;return!1}function Aet(e,t,r,n,o){var i=lre(id(),e,t,r,n);return iA(o,i)?S$e(o,i)||i[0]>=o[0]&&i[2]<=o[2]||i[1]>=o[1]&&i[3]<=o[3]?!0:Cet(e,t,r,n,function(a,u){return D$e(o,a,u)}):!1}function fie(e,t,r,n,o){return!!(Aet(e,t,r,n,o)||Kv(e,t,r,n,o[0],o[1])||Kv(e,t,r,n,o[0],o[3])||Kv(e,t,r,n,o[2],o[1])||Kv(e,t,r,n,o[2],o[3]))}function Det(e,t,r,n,o){if(!fie(e,t,r[0],n,o))return!1;if(r.length===1)return!0;for(var i=1,a=r.length;i<a;++i)if(Tet(e,r[i-1],r[i],n,o)&&!Aet(e,r[i-1],r[i],n,o))return!1;return!0}function Net(e,t,r,n){for(;t<r-n;){for(var o=0;o<n;++o){var i=e[t+o];e[t+o]=e[r-n+o],e[r-n+o]=i}t+=n,r-=n}}function Oet(e,t,r,n){for(var o=0,i=e[r-n],a=e[r-n+1];t<r;t+=n){var u=e[t],p=e[t+1];o+=(u-i)*(p+a),i=u,a=p}return o===0?void 0:o>0}function Let(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,u=r.length;a<u;++a){var p=r[a],h=Oet(e,t,p,n);if(a===0){if(i&&h||!i&&!h)return!1}else if(i&&!h||!i&&h)return!1;t=p}return!0}function pie(e,t,r,n,o){for(var i=o!==void 0?o:!1,a=0,u=r.length;a<u;++a){var p=r[a],h=Oet(e,t,p,n),g=a===0?i&&h||!i&&!h:i&&!h||!i&&h;g&&Net(e,t,p,n),t=p}return t}var YCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pet=function(e){YCr(t,e);function t(r,n,o){var i=e.call(this)||this;return i.ends_=[],i.flatInteriorPointRevision_=-1,i.flatInteriorPoint_=null,i.maxDelta_=-1,i.maxDeltaRevision_=-1,i.orientedRevision_=-1,i.orientedFlatCoordinates_=null,n!==void 0&&o?(i.setFlatCoordinates(n,r),i.ends_=o):i.setCoordinates(r,n),i}return t.prototype.appendLinearRing=function(r){this.flatCoordinates?WQe(this.flatCoordinates,r.getFlatCoordinates()):this.flatCoordinates=r.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()},t.prototype.clone=function(){var r=new t(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return r.applyProperties(this),r},t.prototype.closestPointXY=function(r,n,o,i){return i<L6(this.getExtent(),r,n)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(get(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),vet(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,r,n,o,i))},t.prototype.containsXY=function(r,n){return kz(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,n)},t.prototype.getArea=function(){return Eet(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)},t.prototype.getCoordinates=function(r){var n;return r!==void 0?(n=this.getOrientedFlatCoordinates().slice(),pie(n,0,this.ends_,this.stride,r)):n=this.flatCoordinates,wet(n,0,this.ends_,this.stride)},t.prototype.getEnds=function(){return this.ends_},t.prototype.getFlatInteriorPoint=function(){if(this.flatInteriorPointRevision_!=this.getRevision()){var r=Jf(this.getExtent());this.flatInteriorPoint_=Met(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_},t.prototype.getInteriorPoint=function(){return new Iet(this.getFlatInteriorPoint(),al.XYM)},t.prototype.getLinearRingCount=function(){return this.ends_.length},t.prototype.getLinearRing=function(r){return r<0||this.ends_.length<=r?null:new cie(this.flatCoordinates.slice(r===0?0:this.ends_[r-1],this.ends_[r]),this.layout)},t.prototype.getLinearRings=function(){for(var r=this.layout,n=this.flatCoordinates,o=this.ends_,i=[],a=0,u=0,p=o.length;u<p;++u){var h=o[u],g=new cie(n.slice(a,h),r);i.push(g),a=h}return i},t.prototype.getOrientedFlatCoordinates=function(){if(this.orientedRevision_!=this.getRevision()){var r=this.flatCoordinates;Let(r,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=r:(this.orientedFlatCoordinates_=r.slice(),this.orientedFlatCoordinates_.length=pie(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_},t.prototype.getSimplifiedGeometryInternal=function(r){var n=[],o=[];return n.length=bet(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(r),n,0,o),new t(n,al.XY,o)},t.prototype.getType=function(){return"Polygon"},t.prototype.intersectsExtent=function(r){return Det(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,r)},t.prototype.setCoordinates=function(r,n){this.setLayout(n,r,2),this.flatCoordinates||(this.flatCoordinates=[]);var o=_et(this.flatCoordinates,0,r,this.stride,this.ends_);this.flatCoordinates.length=o.length===0?0:o[o.length-1],this.changed()},t}(vE),ket=Pet;function iD(e){var t=e[0],r=e[1],n=e[2],o=e[3],i=[t,r,t,o,n,o,n,r,t,r];return new Pet(i,al.XY,[i.length])}var ZCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KCr=function(e){ZCr(t,e);function t(r){var n=e.call(this)||this;return n.geometry_=null,n.element_=document.createElement("div"),n.element_.style.position="absolute",n.element_.style.pointerEvents="auto",n.element_.className="ol-box "+r,n.map_=null,n.startPixel_=null,n.endPixel_=null,n}return t.prototype.disposeInternal=function(){this.setMap(null)},t.prototype.render_=function(){var r=this.startPixel_,n=this.endPixel_,o="px",i=this.element_.style;i.left=Math.min(r[0],n[0])+o,i.top=Math.min(r[1],n[1])+o,i.width=Math.abs(n[0]-r[0])+o,i.height=Math.abs(n[1]-r[1])+o},t.prototype.setMap=function(r){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);var n=this.element_.style;n.left="inherit",n.top="inherit",n.width="inherit",n.height="inherit"}this.map_=r,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)},t.prototype.setPixels=function(r,n){this.startPixel_=r,this.endPixel_=n,this.createOrUpdateGeometry(),this.render_()},t.prototype.createOrUpdateGeometry=function(){var r=this.startPixel_,n=this.endPixel_,o=[r,[r[0],n[1]],n,[n[0],r[1]]],i=o.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new ket([i])},t.prototype.getGeometry=function(){return this.geometry_},t}(Hv),Ret=KCr;function aD(e){var t=arguments;return function(r){for(var n=!0,o=0,i=t.length;o<i&&(n=n&&t[o](r),!!n);++o);return n}}var jet=function(e){var t=e.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},XCr=function(e){var t=e.map.getTargetElement(),r=e.map.getOwnerDocument().activeElement;return t.contains(r)},Rz=function(e){return e.map.getTargetElement().hasAttribute("tabindex")?XCr(e):!0},qet=Wv;var jz=function(e){var t=e.originalEvent;return t.button==0&&!(ret&&net&&t.ctrlKey)};var qz=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey};var zet=function(e){var t=e.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},zz=function(e){var t=e.originalEvent,r=t.target.tagName;return r!=="INPUT"&&r!=="SELECT"&&r!=="TEXTAREA"&&!t.target.isContentEditable},Fz=function(e){var t=e.originalEvent;return Xr(t!==void 0,56),t.pointerType=="mouse"};var Fet=function(e){var t=e.originalEvent;return Xr(t!==void 0,56),t.isPrimary&&t.button===0};var Uet=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Uz={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"},die=function(e){Uet(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.coordinate=n,i.mapBrowserEvent=o,i}return t}(il);var JCr=function(e){Uet(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=r||{};return n.box_=new Ret(o.className||"ol-dragbox"),n.minArea_=o.minArea!==void 0?o.minArea:64,o.onBoxEnd&&(n.onBoxEnd=o.onBoxEnd),n.startPixel_=null,n.condition_=o.condition?o.condition:jz,n.boxEndCondition_=o.boxEndCondition?o.boxEndCondition:n.defaultBoxEndCondition,n}return t.prototype.defaultBoxEndCondition=function(r,n,o){var i=o[0]-n[0],a=o[1]-n[1];return i*i+a*a>=this.minArea_},t.prototype.getGeometry=function(){return this.box_.getGeometry()},t.prototype.handleDragEvent=function(r){this.box_.setPixels(this.startPixel_,r.pixel),this.dispatchEvent(new die(Uz.BOXDRAG,r.coordinate,r))},t.prototype.handleUpEvent=function(r){this.box_.setMap(null);var n=this.boxEndCondition_(r,this.startPixel_,r.pixel);return n&&this.onBoxEnd(r),this.dispatchEvent(new die(n?Uz.BOXEND:Uz.BOXCANCEL,r.coordinate,r)),!1},t.prototype.handleDownEvent=function(r){return this.condition_(r)?(this.startPixel_=r.pixel,this.box_.setMap(r.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new die(Uz.BOXSTART,r.coordinate,r)),!0):!1},t.prototype.onBoxEnd=function(r){},t}(xd),Bet=JCr;var QCr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eAr=function(e){QCr(t,e);function t(r){var n=this,o=r||{},i=o.condition?o.condition:zet;return n=e.call(this,{condition:i,className:o.className||"ol-dragzoom",minArea:o.minArea})||this,n.duration_=o.duration!==void 0?o.duration:200,n.out_=o.out!==void 0?o.out:!1,n}return t.prototype.onBoxEnd=function(r){var n=this.getMap(),o=n.getView(),i=this.getGeometry();if(this.out_){var a=o.rotatedExtentForGeometry(i),u=o.getResolutionForExtentInternal(a),p=o.getResolution()/u;i=i.clone(),i.scale(p*p)}o.fitInternal(i,{duration:this.duration_,easing:cf})},t}(Bet),Bz=eAr;var bd={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"};function gm(e,t,r,n){var o;return r&&r.length?o=r.shift():oet?o=new OffscreenCanvas(e||300,t||300):o=document.createElement("canvas"),e&&(o.width=e),t&&(o.height=t),o.getContext("2d",n)}function Vet(e){var t=e.canvas;t.width=1,t.height=1,e.clearRect(0,0,1,1)}function _E(e,t){var r=t.parentNode;r&&r.replaceChild(e,t)}function sD(e){return e&&e.parentNode?e.parentNode.removeChild(e):null}function Get(e){for(;e.lastChild;)e.removeChild(e.lastChild)}function Het(e,t){for(var r=e.childNodes,n=0;;++n){var o=r[n],i=t[n];if(!o&&!i)break;if(o!==i){if(!o){e.appendChild(i);continue}if(!i){e.removeChild(o),--n;continue}e.insertBefore(i,o)}}}var tAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rAr=function(e){tAr(t,e);function t(r){var n=e.call(this)||this,o=r.element;return o&&!r.target&&!o.style.pointerEvents&&(o.style.pointerEvents="auto"),n.element=o||null,n.target_=null,n.map_=null,n.listenerKeys=[],r.render&&(n.render=r.render),r.target&&n.setTarget(r.target),n}return t.prototype.disposeInternal=function(){sD(this.element),e.prototype.disposeInternal.call(this)},t.prototype.getMap=function(){return this.map_},t.prototype.setMap=function(r){this.map_&&sD(this.element);for(var n=0,o=this.listenerKeys.length;n<o;++n)ao(this.listenerKeys[n]);if(this.listenerKeys.length=0,this.map_=r,r){var i=this.target_?this.target_:r.getOverlayContainerStopEvent();i.appendChild(this.element),this.render!==mm&&this.listenerKeys.push(In(r,bd.POSTRENDER,this.render,this)),r.render()}},t.prototype.render=function(r){},t.prototype.setTarget=function(r){this.target_=typeof r=="string"?document.getElementById(r):r},t}(Za),sc=rAr;var ca={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};var lD="ol-hidden";var pf="ol-unselectable",hie="ol-unsupported",wd="ol-control",mie="ol-collapsed",nAr=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),Wet=["style","variant","weight","size","lineHeight","family"],$et=function(e){var t=e.match(nAr);if(!t)return null;for(var r={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"},n=0,o=Wet.length;n<o;++n){var i=t[n+1];i!==void 0&&(r[Wet[n]]=i)}return r.families=r.family.split(/,\s?/),r};var oAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yet=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],Zet={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"},iAr=function(e){oAr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.on,n.once,n.un,n.keys_=o.keys!==void 0?o.keys:!1,n.source_=o.source,n.isInFullscreen_=!1,n.boundHandleMapTargetChange_=n.handleMapTargetChange_.bind(n),n.cssClassName_=o.className!==void 0?o.className:"ol-full-screen",n.documentListeners_=[],n.activeClassName_=o.activeClassName!==void 0?o.activeClassName.split(" "):[n.cssClassName_+"-true"],n.inactiveClassName_=o.inactiveClassName!==void 0?o.inactiveClassName.split(" "):[n.cssClassName_+"-false"];var i=o.label!==void 0?o.label:"\u2922";n.labelNode_=typeof i=="string"?document.createTextNode(i):i;var a=o.labelActive!==void 0?o.labelActive:"\xD7";n.labelActiveNode_=typeof a=="string"?document.createTextNode(a):a;var u=o.tipLabel?o.tipLabel:"Toggle full-screen";return n.button_=document.createElement("button"),n.button_.title=u,n.button_.setAttribute("type","button"),n.button_.appendChild(n.labelNode_),n.button_.addEventListener(_r.CLICK,n.handleClick_.bind(n),!1),n.setClassName_(n.button_,n.isInFullscreen_),n.element.className="".concat(n.cssClassName_," ").concat(pf," ").concat(wd),n.element.appendChild(n.button_),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleFullScreen_()},t.prototype.handleFullScreen_=function(){var r=this.getMap();if(r){var n=r.getOwnerDocument();if(Ket(n))if(Xet(n))sAr(n);else{var o=void 0;this.source_?o=typeof this.source_=="string"?n.getElementById(this.source_):this.source_:o=r.getTargetElement(),this.keys_?aAr(o):Jet(o)}}},t.prototype.handleFullScreenChange_=function(){var r=this.getMap();if(r){var n=this.isInFullscreen_;this.isInFullscreen_=Xet(r.getOwnerDocument()),n!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(_E(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(Zet.ENTERFULLSCREEN)):(_E(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(Zet.LEAVEFULLSCREEN)),r.updateSize())}},t.prototype.setClassName_=function(r,n){var o,i,a,u;n?((o=r.classList).remove.apply(o,this.inactiveClassName_),(i=r.classList).add.apply(i,this.activeClassName_)):((a=r.classList).remove.apply(a,this.activeClassName_),(u=r.classList).add.apply(u,this.inactiveClassName_))},t.prototype.setMap=function(r){var n=this.getMap();n&&n.removeChangeListener(ca.TARGET,this.boundHandleMapTargetChange_),e.prototype.setMap.call(this,r),this.handleMapTargetChange_(),r&&r.addChangeListener(ca.TARGET,this.boundHandleMapTargetChange_)},t.prototype.handleMapTargetChange_=function(){for(var r=this.documentListeners_,n=0,o=r.length;n<o;++n)ao(r[n]);r.length=0;var i=this.getMap();if(i){var a=i.getOwnerDocument();Ket(a)?this.element.classList.remove(hie):this.element.classList.add(hie);for(var n=0,o=Yet.length;n<o;++n)r.push(In(a,Yet[n],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}},t}(sc);function Ket(e){var t=e.body;return!!(t.webkitRequestFullscreen||t.msRequestFullscreen&&e.msFullscreenEnabled||t.requestFullscreen&&e.fullscreenEnabled)}function Xet(e){return!!(e.webkitIsFullScreen||e.msFullscreenElement||e.fullscreenElement)}function Jet(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function aAr(e){e.webkitRequestFullscreen?e.webkitRequestFullscreen():Jet(e)}function sAr(e){e.exitFullscreen?e.exitFullscreen():e.msExitFullscreen?e.msExitFullscreen():e.webkitExitFullscreen&&e.webkitExitFullscreen()}var Qet=iAr;var kl={ADD:"add",REMOVE:"remove"};var ttt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ett={LENGTH:"length"},Vz=function(e){ttt(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.element=n,i.index=o,i}return t}(il);var lAr=function(e){ttt(t,e);function t(r,n){var o=e.call(this)||this;o.on,o.once,o.un;var i=n||{};if(o.unique_=!!i.unique,o.array_=r||[],o.unique_)for(var a=0,u=o.array_.length;a<u;++a)o.assertUnique_(o.array_[a],a);return o.updateLength_(),o}return t.prototype.clear=function(){for(;this.getLength()>0;)this.pop()},t.prototype.extend=function(r){for(var n=0,o=r.length;n<o;++n)this.push(r[n]);return this},t.prototype.forEach=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)r(n[o],o,n)},t.prototype.getArray=function(){return this.array_},t.prototype.item=function(r){return this.array_[r]},t.prototype.getLength=function(){return this.get(ett.LENGTH)},t.prototype.insertAt=function(r,n){this.unique_&&this.assertUnique_(n),this.array_.splice(r,0,n),this.updateLength_(),this.dispatchEvent(new Vz(kl.ADD,n,r))},t.prototype.pop=function(){return this.removeAt(this.getLength()-1)},t.prototype.push=function(r){this.unique_&&this.assertUnique_(r);var n=this.getLength();return this.insertAt(n,r),this.getLength()},t.prototype.remove=function(r){for(var n=this.array_,o=0,i=n.length;o<i;++o)if(n[o]===r)return this.removeAt(o)},t.prototype.removeAt=function(r){var n=this.array_[r];return this.array_.splice(r,1),this.updateLength_(),this.dispatchEvent(new Vz(kl.REMOVE,n,r)),n},t.prototype.setAt=function(r,n){var o=this.getLength();if(r<o){this.unique_&&this.assertUnique_(n,r);var i=this.array_[r];this.array_[r]=n,this.dispatchEvent(new Vz(kl.REMOVE,i,r)),this.dispatchEvent(new Vz(kl.ADD,n,r))}else{for(var a=o;a<r;++a)this.insertAt(a,void 0);this.insertAt(r,n)}},t.prototype.updateLength_=function(){this.set(ett.LENGTH,this.array_.length)},t.prototype.assertUnique_=function(r,n){for(var o=0,i=this.array_.length;o<i;++o)if(this.array_[o]===r&&o!==n)throw new O6(58)},t}(Za),Rl=lAr;var uAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),cAr=function(e){uAr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==ri.DBLCLICK){var o=r.originalEvent,i=r.map,a=r.coordinate,u=o.shiftKey?-this.delta_:this.delta_,p=i.getView();hE(p,u,a,this.duration_),o.preventDefault(),n=!0}return!n},t}(_d),rtt=cAr;var fAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pAr=function(e){fAr(t,e);function t(r){var n=e.call(this,{stopDown:hm})||this,o=r||{};n.kinetic_=o.kinetic,n.lastCentroid=null,n.lastPointersCount_,n.panning_=!1;var i=o.condition?o.condition:aD(qz,Fet);return n.condition_=o.onFocusOnly?aD(Rz,i):i,n.noKinetic_=!1,n}return t.prototype.handleDragEvent=function(r){this.panning_||(this.panning_=!0,this.getMap().getView().beginInteraction());var n=this.targetPointers,o=mE(n);if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(o[0],o[1]),this.lastCentroid){var i=[this.lastCentroid[0]-o[0],o[1]-this.lastCentroid[1]],a=r.map,u=a.getView();L$e(i,u.getResolution()),zw(i,u.getRotation()),u.adjustCenterInternal(i)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=o,this.lastPointersCount_=n.length,r.originalEvent.preventDefault()},t.prototype.handleUpEvent=function(r){var n=r.map,o=n.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){var i=this.kinetic_.getDistance(),a=this.kinetic_.getAngle(),u=o.getCenterInternal(),p=n.getPixelFromCoordinateInternal(u),h=n.getCoordinateFromPixelInternal([p[0]-i*Math.cos(a),p[1]-i*Math.sin(a)]);o.animateInternal({center:o.getConstrainedCenter(h),duration:500,easing:cf})}return this.panning_&&(this.panning_=!1,o.endInteraction()),!1}else return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>0&&this.condition_(r)){var n=r.map,o=n.getView();return this.lastCentroid=null,o.getAnimating()&&o.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}else return!1},t}(xd),ntt=pAr;function xE(e){if(e!==void 0)return 0}function gie(e){if(e!==void 0)return e}function ott(e){var t=2*Math.PI/e;return function(r,n){if(n)return r;if(r!==void 0)return r=Math.floor(r/t+.5)*t,r}}function itt(e){var t=e||Pw(5);return function(r,n){if(n)return r;if(r!==void 0)return Math.abs(r)<=t?0:r}}var dAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hAr=function(e){dAr(t,e);function t(r){var n=this,o=r||{};return n=e.call(this,{stopDown:hm})||this,n.condition_=o.condition?o.condition:jet,n.lastAngle_=void 0,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){if(Fz(r)){var n=r.map,o=n.getView();if(o.getConstraints().rotation!==xE){var i=n.getSize(),a=r.pixel,u=Math.atan2(i[1]/2-a[1],a[0]-i[0]/2);if(this.lastAngle_!==void 0){var p=u-this.lastAngle_;o.adjustRotationInternal(-p)}this.lastAngle_=u}}},t.prototype.handleUpEvent=function(r){if(!Fz(r))return!0;var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1},t.prototype.handleDownEvent=function(r){if(!Fz(r))return!1;if(jz(r)&&this.condition_(r)){var n=r.map;return n.getView().beginInteraction(),this.lastAngle_=void 0,!0}else return!1},t}(xd),att=hAr;var Xv={LEFT:37,UP:38,RIGHT:39,DOWN:40};var mAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gAr=function(e){mAr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.defaultCondition_=function(i){return qz(i)&&zz(i)},n.condition_=o.condition!==void 0?o.condition:n.defaultCondition_,n.duration_=o.duration!==void 0?o.duration:100,n.pixelDelta_=o.pixelDelta!==void 0?o.pixelDelta:128,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==_r.KEYDOWN){var o=r.originalEvent,i=o.keyCode;if(this.condition_(r)&&(i==Xv.DOWN||i==Xv.LEFT||i==Xv.RIGHT||i==Xv.UP)){var a=r.map,u=a.getView(),p=u.getResolution()*this.pixelDelta_,h=0,g=0;i==Xv.DOWN?g=-p:i==Xv.LEFT?h=-p:i==Xv.RIGHT?h=p:g=p;var x=[h,g];zw(x,u.getRotation()),QQe(u,x,this.duration_),o.preventDefault(),n=!0}}return!n},t}(_d),stt=gAr;var vAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yAr=function(e){vAr(t,e);function t(r){var n=e.call(this)||this,o=r||{};return n.condition_=o.condition?o.condition:zz,n.delta_=o.delta?o.delta:1,n.duration_=o.duration!==void 0?o.duration:100,n}return t.prototype.handleEvent=function(r){var n=!1;if(r.type==_r.KEYDOWN||r.type==_r.KEYPRESS){var o=r.originalEvent,i=o.charCode;if(this.condition_(r)&&(i==43||i==45)){var a=r.map,u=i==43?this.delta_:-this.delta_,p=a.getView();hE(p,u,void 0,this.duration_),o.preventDefault(),n=!0}}return!n},t}(_d),ltt=yAr;var _Ar=function(){function e(t,r,n){this.decay_=t,this.minVelocity_=r,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}return e.prototype.begin=function(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0},e.prototype.update=function(t,r){this.points_.push(t,r,Date.now())},e.prototype.end=function(){if(this.points_.length<6)return!1;var t=Date.now()-this.delay_,r=this.points_.length-3;if(this.points_[r+2]<t)return!1;for(var n=r-3;n>0&&this.points_[n+2]>t;)n-=3;var o=this.points_[r+2]-this.points_[n+2];if(o<16.666666666666668)return!1;var i=this.points_[r]-this.points_[n],a=this.points_[r+1]-this.points_[n+1];return this.angle_=Math.atan2(a,i),this.initialVelocity_=Math.sqrt(i*i+a*a)/o,this.initialVelocity_>this.minVelocity_},e.prototype.getDistance=function(){return(this.minVelocity_-this.initialVelocity_)/this.decay_},e.prototype.getAngle=function(){return this.angle_},e}(),utt=_Ar;var xAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vie={TRACKPAD:"trackpad",WHEEL:"wheel"},bAr=function(e){xAr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,o)||this,n.totalDelta_=0,n.lastDelta_=0,n.maxDelta_=o.maxDelta!==void 0?o.maxDelta:1,n.duration_=o.duration!==void 0?o.duration:250,n.timeout_=o.timeout!==void 0?o.timeout:80,n.useAnchor_=o.useAnchor!==void 0?o.useAnchor:!0,n.constrainResolution_=o.constrainResolution!==void 0?o.constrainResolution:!1;var i=o.condition?o.condition:qet;return n.condition_=o.onFocusOnly?aD(Rz,i):i,n.lastAnchor_=null,n.startTime_=void 0,n.timeoutId_,n.mode_=void 0,n.trackpadEventGap_=400,n.trackpadTimeoutId_,n.deltaPerZoom_=300,n}return t.prototype.endInteraction_=function(){this.trackpadTimeoutId_=void 0;var r=this.getMap();if(r){var n=r.getView();n.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}},t.prototype.handleEvent=function(r){if(!this.condition_(r))return!0;var n=r.type;if(n!==_r.WHEEL)return!0;var o=r.map,i=r.originalEvent;i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=r.coordinate);var a;if(r.type==_r.WHEEL&&(a=i.deltaY,eet&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(a/=Nz),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(a*=40)),a===0)return!1;this.lastDelta_=a;var u=Date.now();this.startTime_===void 0&&(this.startTime_=u),(!this.mode_||u-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(a)<4?vie.TRACKPAD:vie.WHEEL);var p=o.getView();if(this.mode_===vie.TRACKPAD&&!(p.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(p.getAnimating()&&p.cancelAnimations(),p.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),p.adjustZoom(-a/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=u,!1;this.totalDelta_+=a;var h=Math.max(this.timeout_-(u-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,o),h),!1},t.prototype.handleWheelZoom_=function(r){var n=r.getView();n.getAnimating()&&n.cancelAnimations();var o=-Ho(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(n.getConstrainResolution()||this.constrainResolution_)&&(o=o?o>0?1:-1:0),hE(n,o,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0},t.prototype.setMouseAnchor=function(r){this.useAnchor_=r,r||(this.lastAnchor_=null)},t}(_d),ctt=bAr;var wAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EAr=function(e){wAr(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=hm),n=e.call(this,i)||this,n.anchor_=null,n.lastAngle_=void 0,n.rotating_=!1,n.rotationDelta_=0,n.threshold_=o.threshold!==void 0?o.threshold:.3,n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleDragEvent=function(r){var n=0,o=this.targetPointers[0],i=this.targetPointers[1],a=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(this.lastAngle_!==void 0){var u=a-this.lastAngle_;this.rotationDelta_+=u,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),n=u}this.lastAngle_=a;var p=r.map,h=p.getView();if(h.getConstraints().rotation!==xE){var g=p.getViewport().getBoundingClientRect(),x=mE(this.targetPointers);x[0]-=g.left,x[1]-=g.top,this.anchor_=p.getCoordinateFromPixelInternal(x),this.rotating_&&(p.render(),h.adjustRotationInternal(n,this.anchor_))}},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView();return o.endInteraction(this.duration_),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(xd),ftt=EAr;var SAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IAr=function(e){SAr(t,e);function t(r){var n=this,o=r||{},i=o;return i.stopDown||(i.stopDown=hm),n=e.call(this,i)||this,n.anchor_=null,n.duration_=o.duration!==void 0?o.duration:400,n.lastDistance_=void 0,n.lastScaleDelta_=1,n}return t.prototype.handleDragEvent=function(r){var n=1,o=this.targetPointers[0],i=this.targetPointers[1],a=o.clientX-i.clientX,u=o.clientY-i.clientY,p=Math.sqrt(a*a+u*u);this.lastDistance_!==void 0&&(n=this.lastDistance_/p),this.lastDistance_=p;var h=r.map,g=h.getView();n!=1&&(this.lastScaleDelta_=n);var x=h.getViewport().getBoundingClientRect(),b=mE(this.targetPointers);b[0]-=x.left,b[1]-=x.top,this.anchor_=h.getCoordinateFromPixelInternal(b),h.render(),g.adjustResolutionInternal(n,this.anchor_)},t.prototype.handleUpEvent=function(r){if(this.targetPointers.length<2){var n=r.map,o=n.getView(),i=this.lastScaleDelta_>1?1:-1;return o.endInteraction(this.duration_,i),!1}else return!0},t.prototype.handleDownEvent=function(r){if(this.targetPointers.length>=2){var n=r.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||n.getView().beginInteraction(),!0}else return!1},t}(xd),ptt=IAr;var TAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),MAr=function(e){TAr(t,e);function t(r,n,o){var i=e.call(this,r)||this;return i.map=n,i.frameState=o!==void 0?o:null,i}return t}(il),Jv=MAr;var CAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),AAr=function(e){CAr(t,e);function t(r,n,o,i,a,u){var p=e.call(this,r,n,a)||this;return p.originalEvent=o,p.pixel_=null,p.coordinate_=null,p.dragging=i!==void 0?i:!1,p.activePointers=u,p}return Object.defineProperty(t.prototype,"pixel",{get:function(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_},set:function(r){this.pixel_=r},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"coordinate",{get:function(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_},set:function(r){this.coordinate_=r},enumerable:!1,configurable:!0}),t.prototype.preventDefault=function(){e.prototype.preventDefault.call(this),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()},t.prototype.stopPropagation=function(){e.prototype.stopPropagation.call(this),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()},t}(Jv),Ed=AAr;var Hn={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};var DAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NAr=function(e){DAr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un,n.background_=r.background;var o=zo({},r);return typeof r.properties=="object"&&(delete o.properties,zo(o,r.properties)),o[Hn.OPACITY]=r.opacity!==void 0?r.opacity:1,Xr(typeof o[Hn.OPACITY]=="number",64),o[Hn.VISIBLE]=r.visible!==void 0?r.visible:!0,o[Hn.Z_INDEX]=r.zIndex,o[Hn.MAX_RESOLUTION]=r.maxResolution!==void 0?r.maxResolution:1/0,o[Hn.MIN_RESOLUTION]=r.minResolution!==void 0?r.minResolution:0,o[Hn.MIN_ZOOM]=r.minZoom!==void 0?r.minZoom:-1/0,o[Hn.MAX_ZOOM]=r.maxZoom!==void 0?r.maxZoom:1/0,n.className_=o.className!==void 0?o.className:"ol-layer",delete o.className,n.setProperties(o),n.state_=null,n}return t.prototype.getBackground=function(){return this.background_},t.prototype.getClassName=function(){return this.className_},t.prototype.getLayerState=function(r){var n=this.state_||{layer:this,managed:r===void 0?!0:r},o=this.getZIndex();return n.opacity=Ho(Math.round(this.getOpacity()*100)/100,0,1),n.visible=this.getVisible(),n.extent=this.getExtent(),n.zIndex=o===void 0&&!n.managed?1/0:o,n.maxResolution=this.getMaxResolution(),n.minResolution=Math.max(this.getMinResolution(),0),n.minZoom=this.getMinZoom(),n.maxZoom=this.getMaxZoom(),this.state_=n,n},t.prototype.getLayersArray=function(r){return Gn()},t.prototype.getLayerStatesArray=function(r){return Gn()},t.prototype.getExtent=function(){return this.get(Hn.EXTENT)},t.prototype.getMaxResolution=function(){return this.get(Hn.MAX_RESOLUTION)},t.prototype.getMinResolution=function(){return this.get(Hn.MIN_RESOLUTION)},t.prototype.getMinZoom=function(){return this.get(Hn.MIN_ZOOM)},t.prototype.getMaxZoom=function(){return this.get(Hn.MAX_ZOOM)},t.prototype.getOpacity=function(){return this.get(Hn.OPACITY)},t.prototype.getSourceState=function(){return Gn()},t.prototype.getVisible=function(){return this.get(Hn.VISIBLE)},t.prototype.getZIndex=function(){return this.get(Hn.Z_INDEX)},t.prototype.setBackground=function(r){this.background_=r,this.changed()},t.prototype.setExtent=function(r){this.set(Hn.EXTENT,r)},t.prototype.setMaxResolution=function(r){this.set(Hn.MAX_RESOLUTION,r)},t.prototype.setMinResolution=function(r){this.set(Hn.MIN_RESOLUTION,r)},t.prototype.setMaxZoom=function(r){this.set(Hn.MAX_ZOOM,r)},t.prototype.setMinZoom=function(r){this.set(Hn.MIN_ZOOM,r)},t.prototype.setOpacity=function(r){Xr(typeof r=="number",64),this.set(Hn.OPACITY,r)},t.prototype.setVisible=function(r){this.set(Hn.VISIBLE,r)},t.prototype.setZIndex=function(r){this.set(Hn.Z_INDEX,r)},t.prototype.disposeInternal=function(){this.state_&&(this.state_.layer=null,this.state_=null),e.prototype.disposeInternal.call(this)},t}(Za),Gz=NAr;var sl={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};var OAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LAr=function(e){OAr(t,e);function t(r){var n=this,o=zo({},r);delete o.source,n=e.call(this,o)||this,n.on,n.once,n.un,n.mapPrecomposeKey_=null,n.mapRenderKey_=null,n.sourceChangeKey_=null,n.renderer_=null,n.rendered=!1,r.render&&(n.render=r.render),r.map&&n.setMap(r.map),n.addChangeListener(Hn.SOURCE,n.handleSourcePropertyChange_);var i=r.source?r.source:null;return n.setSource(i),n}return t.prototype.getLayersArray=function(r){var n=r||[];return n.push(this),n},t.prototype.getLayerStatesArray=function(r){var n=r||[];return n.push(this.getLayerState()),n},t.prototype.getSource=function(){return this.get(Hn.SOURCE)||null},t.prototype.getRenderSource=function(){return this.getSource()},t.prototype.getSourceState=function(){var r=this.getSource();return r?r.getState():"undefined"},t.prototype.handleSourceChange_=function(){this.changed()},t.prototype.handleSourcePropertyChange_=function(){this.sourceChangeKey_&&(ao(this.sourceChangeKey_),this.sourceChangeKey_=null);var r=this.getSource();r&&(this.sourceChangeKey_=In(r,_r.CHANGE,this.handleSourceChange_,this)),this.changed()},t.prototype.getFeatures=function(r){return this.renderer_?this.renderer_.getFeatures(r):new Promise(function(n){return n([])})},t.prototype.getData=function(r){return!this.renderer_||!this.rendered?null:this.renderer_.getData(r)},t.prototype.render=function(r,n){var o=this.getRenderer();if(o.prepareFrame(r))return this.rendered=!0,o.renderFrame(r,n)},t.prototype.unrender=function(){this.rendered=!1},t.prototype.setMapInternal=function(r){r||this.unrender(),this.set(Hn.MAP,r)},t.prototype.getMapInternal=function(){return this.get(Hn.MAP)},t.prototype.setMap=function(r){this.mapPrecomposeKey_&&(ao(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),r||this.changed(),this.mapRenderKey_&&(ao(this.mapRenderKey_),this.mapRenderKey_=null),r&&(this.mapPrecomposeKey_=In(r,sl.PRECOMPOSE,function(n){var o=n,i=o.frameState.layerStatesArray,a=this.getLayerState(!1);Xr(!i.some(function(u){return u.layer===a.layer}),67),i.push(a)},this),this.mapRenderKey_=In(this,_r.CHANGE,r.render,r),this.changed())},t.prototype.setSource=function(r){this.set(Hn.SOURCE,r)},t.prototype.getRenderer=function(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_},t.prototype.hasRenderer=function(){return!!this.renderer_},t.prototype.createRenderer=function(){return null},t.prototype.disposeInternal=function(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),e.prototype.disposeInternal.call(this)},t}(Gz);function w1(e,t){if(!e.visible)return!1;var r=t.resolution;if(r<e.minResolution||r>=e.maxResolution)return!1;var n=t.zoom;return n>e.minZoom&&n<=e.maxZoom}var uD=LAr;var Iu={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function yie(e){return e[0]>0&&e[1]>0}function dtt(e,t,r){return r===void 0&&(r=[0,0]),r[0]=e[0]*t+.5|0,r[1]=e[1]*t+.5|0,r}function Ka(e,t){return Array.isArray(e)?e:(t===void 0?t=[e,e]:(t[0]=e,t[1]=e),t)}var mtt=/^#([a-f0-9]{3}|[a-f0-9]{4}(?:[a-f0-9]{2}){0,2})$/i,gtt=/^([a-z]*)$|^hsla?\(.*\)$/i;function vtt(e){return typeof e=="string"?e:kAr(e)}function ytt(e){var t=document.createElement("div");if(t.style.color=e,t.style.color!==""){document.body.appendChild(t);var r=getComputedStyle(t).color;return document.body.removeChild(t),r}else return""}var _ie=function(){var e=1024,t={},r=0;return function(n){var o;if(t.hasOwnProperty(n))o=t[n];else{if(r>=e){var i=0;for(var a in t)i++&3||(delete t[a],--r)}o=PAr(n),t[n]=o,++r}return o}}();function _tt(e){return Array.isArray(e)?e:_ie(e)}function PAr(e){var t,r,n,o,i;if(gtt.exec(e)&&(e=ytt(e)),mtt.exec(e)){var a=e.length-1,u=void 0;a<=4?u=1:u=2;var p=a===4||a===8;t=parseInt(e.substr(1+0*u,u),16),r=parseInt(e.substr(1+1*u,u),16),n=parseInt(e.substr(1+2*u,u),16),p?o=parseInt(e.substr(1+3*u,u),16):o=255,u==1&&(t=(t<<4)+t,r=(r<<4)+r,n=(n<<4)+n,p&&(o=(o<<4)+o)),i=[t,r,n,o/255]}else e.indexOf("rgba(")==0?(i=e.slice(5,-1).split(",").map(Number),htt(i)):e.indexOf("rgb(")==0?(i=e.slice(4,-1).split(",").map(Number),i.push(1),htt(i)):Xr(!1,14);return i}function htt(e){return e[0]=Ho(e[0]+.5|0,0,255),e[1]=Ho(e[1]+.5|0,0,255),e[2]=Ho(e[2]+.5|0,0,255),e[3]=Ho(e[3],0,1),e}function kAr(e){var t=e[0];t!=(t|0)&&(t=t+.5|0);var r=e[1];r!=(r|0)&&(r=r+.5|0);var n=e[2];n!=(n|0)&&(n=n+.5|0);var o=e[3]===void 0?1:Math.round(e[3]*100)/100;return"rgba("+t+","+r+","+n+","+o+")"}function xtt(e){return gtt.test(e)&&(e=ytt(e)),mtt.test(e)||e.indexOf("rgba(")===0||e.indexOf("rgb(")===0}var Sd=new Za,RAr=new uf;RAr.setSize=function(){console.warn("labelCache is deprecated.")};var bE=null,xie,jAr={},NRn=function(){var e=100,t="32px ",r=["monospace","serif"],n=r.length,o="wmytzilWMYTZIL@#/&?$%10\uF013",i,a;function u(h,g,x){for(var b=!0,T=0;T<n;++T){var A=r[T];if(a=btt(h+" "+g+" "+t+A,o),x!=A){var L=btt(h+" "+g+" "+t+x+","+A,o);b=b&&L!=a}}return!!b}function p(){for(var h=!0,g=Sd.getKeys(),x=0,b=g.length;x<b;++x){var T=g[x];Sd.get(T)<e&&(u.apply(this,T.split(`
`))?(Jc(jAr),bE=null,xie=void 0,Sd.set(T,e)):(Sd.set(T,Sd.get(T)+1,!0),h=!1))}h&&(clearInterval(i),i=void 0)}return function(h){var g=$et(h);if(g)for(var x=g.families,b=0,T=x.length;b<T;++b){var A=x[b],L=g.style+`
`+g.weight+`
`+A;Sd.get(L)===void 0&&(Sd.set(L,e,!0),u(g.style,g.weight,A)||(Sd.set(L,0,!0),i===void 0&&(i=setInterval(p,32))))}}}();function qAr(e,t){return bE||(bE=gm(1,1)),e!=xie&&(bE.font=e,xie=bE.font),bE.measureText(t)}function btt(e,t){return qAr(e,t).width}var zAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FAr=function(e){zAr(t,e);function t(r){var n=e.call(this)||this;return n.ready=!0,n.boundHandleImageChange_=n.handleImageChange_.bind(n),n.layer_=r,n.declutterExecutorGroup=null,n}return t.prototype.getFeatures=function(r){return Gn()},t.prototype.getData=function(r){return null},t.prototype.prepareFrame=function(r){return Gn()},t.prototype.renderFrame=function(r,n){return Gn()},t.prototype.loadedTileCallback=function(r,n,o){r[n]||(r[n]={}),r[n][o.tileCoord.toString()]=o},t.prototype.createLoadedTileFinder=function(r,n,o){return function(i,a){var u=this.loadedTileCallback.bind(this,o,i);return r.forEachLoadedTile(n,i,a,u)}.bind(this)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a){},t.prototype.getDataAtPixel=function(r,n,o){return null},t.prototype.getLayer=function(){return this.layer_},t.prototype.handleFontsChanged=function(){},t.prototype.handleImageChange_=function(r){var n=r.target;n.getState()===Iu.LOADED&&this.renderIfReadyAndVisible()},t.prototype.loadImage=function(r){var n=r.getState();return n!=Iu.LOADED&&n!=Iu.ERROR&&r.addEventListener(_r.CHANGE,this.boundHandleImageChange_),n==Iu.IDLE&&(r.load(),n=r.getState()),n==Iu.LOADED},t.prototype.renderIfReadyAndVisible=function(){var r=this.getLayer();r&&r.getVisible()&&r.getSourceState()==="ready"&&r.changed()},t.prototype.disposeInternal=function(){delete this.layer_,e.prototype.disposeInternal.call(this)},t}(Dz),wtt=FAr;var UAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),BAr=function(e){UAr(t,e);function t(r,n,o,i){var a=e.call(this,r)||this;return a.inversePixelTransform=n,a.frameState=o,a.context=i,a}return t}(il),wE=BAr;var Tu={ANIMATING:0,INTERACTING:1};var VAr=function(){function e(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}return e.prototype.clear=function(){this.cache_={},this.cacheSize_=0},e.prototype.canExpireCache=function(){return this.cacheSize_>this.maxCacheSize_},e.prototype.expire=function(){if(this.canExpireCache()){var t=0;for(var r in this.cache_){var n=this.cache_[r];!(t++&3)&&!n.hasListener()&&(delete this.cache_[r],--this.cacheSize_)}}},e.prototype.get=function(t,r,n){var o=Ett(t,r,n);return o in this.cache_?this.cache_[o]:null},e.prototype.set=function(t,r,n,o){var i=Ett(t,r,n);this.cache_[i]=o,++this.cacheSize_},e.prototype.setSize=function(t){this.maxCacheSize_=t,this.expire()},e}();function Ett(e,t,r){var n=r?vtt(r):"null";return t+":"+e+":"+n}var bie=new VAr;var GAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HAr=function(e){GAr(t,e);function t(r,n,o,i){var a=e.call(this)||this;return a.extent=r,a.pixelRatio_=o,a.resolution=n,a.state=i,a}return t.prototype.changed=function(){this.dispatchEvent(_r.CHANGE)},t.prototype.getExtent=function(){return this.extent},t.prototype.getImage=function(){return Gn()},t.prototype.getPixelRatio=function(){return this.pixelRatio_},t.prototype.getResolution=function(){return this.resolution},t.prototype.getState=function(){return this.state},t.prototype.load=function(){Gn()},t}(uf),Stt=HAr;var WAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QRn=function(e){WAr(t,e);function t(r,n,o,i,a,u){var p=e.call(this,r,n,o,Iu.IDLE)||this;return p.src_=i,p.image_=new Image,a!==null&&(p.image_.crossOrigin=a),p.unlisten_=null,p.state=Iu.IDLE,p.imageLoadFunction_=u,p}return t.prototype.getImage=function(){return this.image_},t.prototype.handleImageError_=function(){this.state=Iu.ERROR,this.unlistenImage_(),this.changed()},t.prototype.handleImageLoad_=function(){this.resolution===void 0&&(this.resolution=bs(this.extent)/this.image_.height),this.state=Iu.LOADED,this.unlistenImage_(),this.changed()},t.prototype.load=function(){(this.state==Iu.IDLE||this.state==Iu.ERROR)&&(this.state=Iu.LOADING,this.changed(),this.imageLoadFunction_(this,this.src_),this.unlisten_=wie(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.setImage=function(r){this.image_=r,this.resolution=bs(this.extent)/this.image_.height},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(Stt);function wie(e,t,r){var n=e,o=!0,i=!1,a=!1,u=[dE(n,_r.LOAD,function(){a=!0,i||t()})];return n.src&&iet?(i=!0,n.decode().then(function(){o&&t()}).catch(function(p){o&&(a?t():r())})):u.push(dE(n,_r.ERROR,r)),function(){o=!1,u.forEach(ao)}}var $Ar=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YAr=function(e){$Ar(t,e);function t(r){var n=e.call(this)||this;n.projection=_u(r.projection),n.attributions_=Itt(r.attributions),n.attributionsCollapsible_=r.attributionsCollapsible!==void 0?r.attributionsCollapsible:!0,n.loading=!1,n.state_=r.state!==void 0?r.state:"ready",n.wrapX_=r.wrapX!==void 0?r.wrapX:!1,n.interpolate_=!!r.interpolate,n.viewResolver=null,n.viewRejector=null;var o=n;return n.viewPromise_=new Promise(function(i,a){o.viewResolver=i,o.viewRejector=a}),n}return t.prototype.getAttributions=function(){return this.attributions_},t.prototype.getAttributionsCollapsible=function(){return this.attributionsCollapsible_},t.prototype.getProjection=function(){return this.projection},t.prototype.getResolutions=function(){return Gn()},t.prototype.getView=function(){return this.viewPromise_},t.prototype.getState=function(){return this.state_},t.prototype.getWrapX=function(){return this.wrapX_},t.prototype.getInterpolate=function(){return this.interpolate_},t.prototype.refresh=function(){this.changed()},t.prototype.setAttributions=function(r){this.attributions_=Itt(r),this.changed()},t.prototype.setState=function(r){this.state_=r,this.changed()},t}(Za);function Itt(e){return e?Array.isArray(e)?function(t){return e}:typeof e=="function"?e:function(t){return[e]}:null}var Ttt=YAr;function Hz(e){var t=e||{},r=new Rl,n=new utt(-.005,.05,100),o=t.altShiftDragRotate!==void 0?t.altShiftDragRotate:!0;o&&r.push(new att);var i=t.doubleClickZoom!==void 0?t.doubleClickZoom:!0;i&&r.push(new rtt({delta:t.zoomDelta,duration:t.zoomDuration}));var a=t.dragPan!==void 0?t.dragPan:!0;a&&r.push(new ntt({onFocusOnly:t.onFocusOnly,kinetic:n}));var u=t.pinchRotate!==void 0?t.pinchRotate:!0;u&&r.push(new ftt);var p=t.pinchZoom!==void 0?t.pinchZoom:!0;p&&r.push(new ptt({duration:t.zoomDuration}));var h=t.keyboard!==void 0?t.keyboard:!0;h&&(r.push(new stt),r.push(new ltt({delta:t.zoomDelta,duration:t.zoomDuration})));var g=t.mouseWheelZoom!==void 0?t.mouseWheelZoom:!0;g&&r.push(new ctt({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));var x=t.shiftDragZoom!==void 0?t.shiftDragZoom:!0;return x&&r.push(new Bz({duration:t.zoomDuration})),r}var ZAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KAr=function(e){ZAr(t,e);function t(r){var n=e.call(this)||this;return n.map_=r,n}return t.prototype.dispatchRenderEvent=function(r,n){Gn()},t.prototype.calculateMatrices2D=function(r){var n=r.viewState,o=r.coordinateToPixelTransform,i=r.pixelToCoordinateTransform;Zv(o,r.size[0]/2,r.size[1]/2,1/n.resolution,-1/n.resolution,-n.rotation,-n.center[0],-n.center[1]),set(i,o)},t.prototype.forEachFeatureAtCoordinate=function(r,n,o,i,a,u,p,h){var g,x=n.viewState;function b(Qe,qe,Ue,Ne){return a.call(u,qe,Qe?Ue:null,Ne)}var T=x.projection,A=P$e(r.slice(),T),L=[[0,0]];if(T.canWrapX()&&i){var P=T.getExtent(),k=fi(P);L.push([-k,0],[k,0])}for(var q=n.layerStatesArray,U=q.length,H=[],X=[],ee=0;ee<L.length;ee++)for(var ne=U-1;ne>=0;--ne){var pe=q[ne],ue=pe.layer;if(ue.hasRenderer()&&w1(pe,x)&&p.call(h,ue)){var Ie=ue.getRenderer(),Re=ue.getSource();if(Ie&&Re){var Te=Re.getWrapX()?A:r,Ee=b.bind(null,pe.managed);X[0]=Te[0]+L[ee][0],X[1]=Te[1]+L[ee][1],g=Ie.forEachFeatureAtCoordinate(X,n,o,Ee,H)}if(g)return g}}if(H.length!==0){var Ye=1/H.length;return H.forEach(function(Qe,qe){return Qe.distanceSq+=qe*Ye}),H.sort(function(Qe,qe){return Qe.distanceSq-qe.distanceSq}),H.some(function(Qe){return g=Qe.callback(Qe.feature,Qe.layer,Qe.geometry)}),g}},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){return Gn()},t.prototype.hasFeatureAtCoordinate=function(r,n,o,i,a,u){var p=this.forEachFeatureAtCoordinate(r,n,o,i,Wv,this,a,u);return p!==void 0},t.prototype.getMap=function(){return this.map_},t.prototype.renderFrame=function(r){Gn()},t.prototype.scheduleExpireIconCache=function(r){bie.canExpireCache()&&r.postRenderFunctions.push(XAr)},t}(Hv);function XAr(e,t){bie.expire()}var Mtt=KAr;var JAr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),QAr=function(e){JAr(t,e);function t(r){var n=e.call(this,r)||this;n.fontChangeListenerKey_=In(Sd,dm.PROPERTYCHANGE,r.redrawText.bind(r)),n.element_=document.createElement("div");var o=n.element_.style;o.position="absolute",o.width="100%",o.height="100%",o.zIndex="0",n.element_.className=pf+" ol-layers";var i=r.getViewport();return i.insertBefore(n.element_,i.firstChild||null),n.children_=[],n.renderedVisible_=!0,n}return t.prototype.dispatchRenderEvent=function(r,n){var o=this.getMap();if(o.hasListener(r)){var i=new wE(r,void 0,n);o.dispatchEvent(i)}},t.prototype.disposeInternal=function(){ao(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),e.prototype.disposeInternal.call(this)},t.prototype.renderFrame=function(r){if(!r){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(r),this.dispatchRenderEvent(sl.PRECOMPOSE,r);var n=r.layerStatesArray.sort(function(T,A){return T.zIndex-A.zIndex}),o=r.viewState;this.children_.length=0;for(var i=[],a=null,u=0,p=n.length;u<p;++u){var h=n[u];r.layerIndex=u;var g=h.layer,x=g.getSourceState();if(!w1(h,o)||x!="ready"&&x!="undefined"){g.unrender();continue}var b=g.render(r,a);b&&(b!==a&&(this.children_.push(b),a=b),"getDeclutter"in g&&i.push(g))}for(var u=i.length-1;u>=0;--u)i[u].renderDeclutter(r);Het(this.element_,this.children_),this.dispatchRenderEvent(sl.POSTCOMPOSE,r),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(r)},t.prototype.forEachLayerAtPixel=function(r,n,o,i,a){for(var u=n.viewState,p=n.layerStatesArray,h=p.length,g=h-1;g>=0;--g){var x=p[g],b=x.layer;if(b.hasRenderer()&&w1(x,u)&&a(b)){var T=b.getRenderer(),A=T.getDataAtPixel(r,n,o);if(A){var L=i(b,A);if(L)return L}}}},t}(Mtt),Ctt=QAr;var Att=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vm=function(e){Att(t,e);function t(r,n){var o=e.call(this,r)||this;return o.layer=n,o}return t}(il);var Eie={LAYERS:"layers"},eDr=function(e){Att(t,e);function t(r){var n=this,o=r||{},i=zo({},o);delete i.layers;var a=o.layers;return n=e.call(this,i)||this,n.on,n.once,n.un,n.layersListenerKeys_=[],n.listenerKeys_={},n.addChangeListener(Eie.LAYERS,n.handleLayersChanged_),a?Array.isArray(a)?a=new Rl(a.slice(),{unique:!0}):Xr(typeof a.getArray=="function",43):a=new Rl(void 0,{unique:!0}),n.setLayers(a),n}return t.prototype.handleLayerChange_=function(){this.changed()},t.prototype.handleLayersChanged_=function(){this.layersListenerKeys_.forEach(ao),this.layersListenerKeys_.length=0;var r=this.getLayers();this.layersListenerKeys_.push(In(r,kl.ADD,this.handleLayersAdd_,this),In(r,kl.REMOVE,this.handleLayersRemove_,this));for(var n in this.listenerKeys_)this.listenerKeys_[n].forEach(ao);Jc(this.listenerKeys_);for(var o=r.getArray(),i=0,a=o.length;i<a;i++){var u=o[i];this.registerLayerListeners_(u),this.dispatchEvent(new vm("addlayer",u))}this.changed()},t.prototype.registerLayerListeners_=function(r){var n=[In(r,dm.PROPERTYCHANGE,this.handleLayerChange_,this),In(r,_r.CHANGE,this.handleLayerChange_,this)];r instanceof t&&n.push(In(r,"addlayer",this.handleLayerGroupAdd_,this),In(r,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[$i(r)]=n},t.prototype.handleLayerGroupAdd_=function(r){this.dispatchEvent(new vm("addlayer",r.layer))},t.prototype.handleLayerGroupRemove_=function(r){this.dispatchEvent(new vm("removelayer",r.layer))},t.prototype.handleLayersAdd_=function(r){var n=r.element;this.registerLayerListeners_(n),this.dispatchEvent(new vm("addlayer",n)),this.changed()},t.prototype.handleLayersRemove_=function(r){var n=r.element,o=$i(n);this.listenerKeys_[o].forEach(ao),delete this.listenerKeys_[o],this.dispatchEvent(new vm("removelayer",n)),this.changed()},t.prototype.getLayers=function(){return this.get(Eie.LAYERS)},t.prototype.setLayers=function(r){var n=this.getLayers();if(n)for(var o=n.getArray(),i=0,a=o.length;i<a;++i)this.dispatchEvent(new vm("removelayer",o[i]));this.set(Eie.LAYERS,r)},t.prototype.getLayersArray=function(r){var n=r!==void 0?r:[];return this.getLayers().forEach(function(o){o.getLayersArray(n)}),n},t.prototype.getLayerStatesArray=function(r){var n=r!==void 0?r:[],o=n.length;this.getLayers().forEach(function(g){g.getLayerStatesArray(n)});var i=this.getLayerState(),a=i.zIndex;!r&&i.zIndex===void 0&&(a=0);for(var u=o,p=n.length;u<p;u++){var h=n[u];h.opacity*=i.opacity,h.visible=h.visible&&i.visible,h.maxResolution=Math.min(h.maxResolution,i.maxResolution),h.minResolution=Math.max(h.minResolution,i.minResolution),h.minZoom=Math.max(h.minZoom,i.minZoom),h.maxZoom=Math.min(h.maxZoom,i.maxZoom),i.extent!==void 0&&(h.extent!==void 0?h.extent=ad(h.extent,i.extent):h.extent=i.extent),h.zIndex===void 0&&(h.zIndex=a)}return n},t.prototype.getSourceState=function(){return"ready"},t}(Gz),cD=eDr;var fD={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};var tDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rDr=function(e){tDr(t,e);function t(r,n){var o=e.call(this,r)||this;o.map_=r,o.clickTimeoutId_,o.emulateClicks_=!1,o.dragging_=!1,o.dragListenerKeys_=[],o.moveTolerance_=n===void 0?1:n,o.down_=null;var i=o.map_.getViewport();return o.activePointers_=[],o.trackedTouches_={},o.element_=i,o.pointerdownListenerKey_=In(i,fD.POINTERDOWN,o.handlePointerDown_,o),o.originalPointerMoveEvent_,o.relayedListenerKey_=In(i,fD.POINTERMOVE,o.relayMoveEvent_,o),o.boundHandleTouchMove_=o.handleTouchMove_.bind(o),o.element_.addEventListener(_r.TOUCHMOVE,o.boundHandleTouchMove_,Oz?{passive:!1}:!1),o}return t.prototype.emulateClick_=function(r){var n=new Ed(ri.CLICK,this.map_,r);this.dispatchEvent(n),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,n=new Ed(ri.DBLCLICK,this.map_,r),this.dispatchEvent(n)):this.clickTimeoutId_=setTimeout(function(){this.clickTimeoutId_=void 0;var o=new Ed(ri.SINGLECLICK,this.map_,r);this.dispatchEvent(o)}.bind(this),250)},t.prototype.updateActivePointers_=function(r){var n=r,o=n.pointerId;if(n.type==ri.POINTERUP||n.type==ri.POINTERCANCEL){delete this.trackedTouches_[o];for(var i in this.trackedTouches_)if(this.trackedTouches_[i].target!==n.target){delete this.trackedTouches_[i];break}}else(n.type==ri.POINTERDOWN||n.type==ri.POINTERMOVE)&&(this.trackedTouches_[o]=n);this.activePointers_=_$e(this.trackedTouches_)},t.prototype.handlePointerUp_=function(r){this.updateActivePointers_(r);var n=new Ed(ri.POINTERUP,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.emulateClicks_&&!n.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(r)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(ao),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)},t.prototype.isMouseActionButton_=function(r){return r.button===0},t.prototype.handlePointerDown_=function(r){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(r);var n=new Ed(ri.POINTERDOWN,this.map_,r,void 0,void 0,this.activePointers_);this.dispatchEvent(n),this.down_={};for(var o in r){var i=r[o];this.down_[o]=typeof i=="function"?mm:i}if(this.dragListenerKeys_.length===0){var a=this.map_.getOwnerDocument();this.dragListenerKeys_.push(In(a,ri.POINTERMOVE,this.handlePointerMove_,this),In(a,ri.POINTERUP,this.handlePointerUp_,this),In(this.element_,ri.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==a&&this.dragListenerKeys_.push(In(this.element_.getRootNode(),ri.POINTERUP,this.handlePointerUp_,this))}},t.prototype.handlePointerMove_=function(r){if(this.isMoving_(r)){this.updateActivePointers_(r),this.dragging_=!0;var n=new Ed(ri.POINTERDRAG,this.map_,r,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(n)}},t.prototype.relayMoveEvent_=function(r){this.originalPointerMoveEvent_=r;var n=!!(this.down_&&this.isMoving_(r));this.dispatchEvent(new Ed(ri.POINTERMOVE,this.map_,r,n))},t.prototype.handleTouchMove_=function(r){var n=this.originalPointerMoveEvent_;(!n||n.defaultPrevented)&&(typeof r.cancelable!="boolean"||r.cancelable===!0)&&r.preventDefault()},t.prototype.isMoving_=function(r){return this.dragging_||Math.abs(r.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(r.clientY-this.down_.clientY)>this.moveTolerance_},t.prototype.disposeInternal=function(){this.relayedListenerKey_&&(ao(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(_r.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(ao(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(ao),this.dragListenerKeys_.length=0,this.element_=null,e.prototype.disposeInternal.call(this)},t}(uf),Dtt=rDr;var pD=1/0,nDr=function(){function e(t,r){this.priorityFunction_=t,this.keyFunction_=r,this.elements_=[],this.priorities_=[],this.queuedElements_={}}return e.prototype.clear=function(){this.elements_.length=0,this.priorities_.length=0,Jc(this.queuedElements_)},e.prototype.dequeue=function(){var t=this.elements_,r=this.priorities_,n=t[0];t.length==1?(t.length=0,r.length=0):(t[0]=t.pop(),r[0]=r.pop(),this.siftUp_(0));var o=this.keyFunction_(n);return delete this.queuedElements_[o],n},e.prototype.enqueue=function(t){Xr(!(this.keyFunction_(t)in this.queuedElements_),31);var r=this.priorityFunction_(t);return r!=pD?(this.elements_.push(t),this.priorities_.push(r),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1},e.prototype.getCount=function(){return this.elements_.length},e.prototype.getLeftChildIndex_=function(t){return t*2+1},e.prototype.getRightChildIndex_=function(t){return t*2+2},e.prototype.getParentIndex_=function(t){return t-1>>1},e.prototype.heapify_=function(){var t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)},e.prototype.isEmpty=function(){return this.elements_.length===0},e.prototype.isKeyQueued=function(t){return t in this.queuedElements_},e.prototype.isQueued=function(t){return this.isKeyQueued(this.keyFunction_(t))},e.prototype.siftUp_=function(t){for(var r=this.elements_,n=this.priorities_,o=r.length,i=r[t],a=n[t],u=t;t<o>>1;){var p=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),g=h<o&&n[h]<n[p]?h:p;r[t]=r[g],n[t]=n[g],t=g}r[t]=i,n[t]=a,this.siftDown_(u,t)},e.prototype.siftDown_=function(t,r){for(var n=this.elements_,o=this.priorities_,i=n[r],a=o[r];r>t;){var u=this.getParentIndex_(r);if(o[u]>a)n[r]=n[u],o[r]=o[u],r=u;else break}n[r]=i,o[r]=a},e.prototype.reprioritize=function(){var t=this.priorityFunction_,r=this.elements_,n=this.priorities_,o=0,i=r.length,a,u,p;for(u=0;u<i;++u)a=r[u],p=t(a),p==pD?delete this.queuedElements_[this.keyFunction_(a)]:(n[o]=p,r[o++]=a);r.length=o,n.length=o,this.heapify_()},e}(),Ntt=nDr;var xr={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};var oDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iDr=function(e){oDr(t,e);function t(r,n){var o=e.call(this,function(i){return r.apply(null,i)},function(i){return i[0].getKey()})||this;return o.boundHandleTileChange_=o.handleTileChange.bind(o),o.tileChangeCallback_=n,o.tilesLoading_=0,o.tilesLoadingKeys_={},o}return t.prototype.enqueue=function(r){var n=e.prototype.enqueue.call(this,r);if(n){var o=r[0];o.addEventListener(_r.CHANGE,this.boundHandleTileChange_)}return n},t.prototype.getTilesLoading=function(){return this.tilesLoading_},t.prototype.handleTileChange=function(r){var n=r.target,o=n.getState();if(o===xr.LOADED||o===xr.ERROR||o===xr.EMPTY){n.removeEventListener(_r.CHANGE,this.boundHandleTileChange_);var i=n.getKey();i in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[i],--this.tilesLoading_),this.tileChangeCallback_()}},t.prototype.loadMoreTiles=function(r,n){for(var o=0,i,a,u;this.tilesLoading_<r&&o<n&&this.getCount()>0;)a=this.dequeue()[0],u=a.getKey(),i=a.getState(),i===xr.IDLE&&!(u in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[u]=!0,++this.tilesLoading_,++o,a.load())},t}(Ntt),Ott=iDr;function Ltt(e,t,r,n,o){if(!e||!(r in e.wantedTiles))return pD;if(!e.wantedTiles[r][t.getKey()])return pD;var i=e.viewState.center,a=n[0]-i[0],u=n[1]-i[1];return 65536*Math.log(o)+Math.sqrt(a*a+u*u)/o}var df={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};var Ptt=42,Qv=256;function Sie(e,t,r){return function(n,o,i,a,u){if(n){if(!o&&!t)return n;var p=t?0:i[0]*o,h=t?0:i[1]*o,g=u?u[0]:0,x=u?u[1]:0,b=e[0]+p/2+g,T=e[2]-p/2+g,A=e[1]+h/2+x,L=e[3]-h/2+x;b>T&&(b=(T+b)/2,T=b),A>L&&(A=(L+A)/2,L=A);var P=Ho(n[0],b,T),k=Ho(n[1],A,L);if(a&&r&&o){var q=30*o;P+=-q*Math.log(1+Math.max(0,b-n[0])/q)+q*Math.log(1+Math.max(0,n[0]-T)/q),k+=-q*Math.log(1+Math.max(0,A-n[1])/q)+q*Math.log(1+Math.max(0,n[1]-L)/q)}return[P,k]}}}function ktt(e){return e}function Iie(e,t,r,n){var o=fi(t)/r[0],i=bs(t)/r[1];return n?Math.min(e,Math.max(o,i)):Math.min(e,Math.min(o,i))}function Tie(e,t,r){var n=Math.min(e,t),o=50;return n*=Math.log(1+o*Math.max(0,e/t-1))/o+1,r&&(n=Math.max(n,r),n/=Math.log(1+o*Math.max(0,r/e-1))/o+1),Ho(n,r/2,t*2)}function Rtt(e,t,r,n){return function(o,i,a,u){if(o!==void 0){var p=e[0],h=e[e.length-1],g=r?Iie(p,r,a,n):p;if(u){var x=t!==void 0?t:!0;return x?Tie(o,g,h):Ho(o,h,g)}var b=Math.min(g,o),T=Math.floor(pE(e,b,i));return e[T]>g&&T<e.length-1?e[T+1]:e[T]}else return}}function jtt(e,t,r,n,o,i){return function(a,u,p,h){if(a!==void 0){var g=o?Iie(t,o,p,i):t,x=r!==void 0?r:0;if(h){var b=n!==void 0?n:!0;return b?Tie(a,g,x):Ho(a,x,g)}var T=1e-9,A=Math.ceil(Math.log(t/g)/Math.log(e)-T),L=-u*(.5-T)+.5,P=Math.min(g,a),k=Math.floor(Math.log(t/P)/Math.log(e)+L),q=Math.max(A,k),U=t/Math.pow(e,q);return Ho(U,x,g)}else return}}function Mie(e,t,r,n,o){return function(i,a,u,p){if(i!==void 0){var h=n?Iie(e,n,u,o):e,g=r!==void 0?r:!0;return!g||!p?Ho(i,t,h):Tie(i,h,t)}else return}}var aDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cie=0,sDr=function(e){aDr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=zo({},r);return n.hints_=[0,0],n.animations_=[],n.updateAnimationKey_,n.projection_=q6(o.projection,"EPSG:3857"),n.viewportSize_=[100,100],n.targetCenter_=null,n.targetResolution_,n.targetRotation_,n.nextCenter_=null,n.nextResolution_,n.nextRotation_,n.cancelAnchor_=void 0,o.projection&&j$e(),o.center&&(o.center=Qf(o.center,n.projection_)),o.extent&&(o.extent=Ov(o.extent,n.projection_)),n.applyOptions_(o),n}return t.prototype.applyOptions_=function(r){var n=zo({},r);for(var o in df)delete n[o];this.setProperties(n,!0);var i=uDr(r);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=r.resolutions,this.padding_=r.padding,this.minZoom_=i.minZoom;var a=lDr(r),u=i.constraint,p=cDr(r);this.constraints_={center:a,resolution:u,rotation:p},this.setRotation(r.rotation!==void 0?r.rotation:0),this.setCenterInternal(r.center!==void 0?r.center:null),r.resolution!==void 0?this.setResolution(r.resolution):r.zoom!==void 0&&this.setZoom(r.zoom)},Object.defineProperty(t.prototype,"padding",{get:function(){return this.padding_},set:function(r){var n=this.padding_;this.padding_=r;var o=this.getCenter();if(o){var i=r||[0,0,0,0];n=n||[0,0,0,0];var a=this.getResolution(),u=a/2*(i[3]-n[3]+n[1]-i[1]),p=a/2*(i[0]-n[0]+n[2]-i[2]);this.setCenterInternal([o[0]+u,o[1]-p])}},enumerable:!1,configurable:!0}),t.prototype.getUpdatedOptions_=function(r){var n=this.getProperties();return n.resolution!==void 0?n.resolution=this.getResolution():n.zoom=this.getZoom(),n.center=this.getCenterInternal(),n.rotation=this.getRotation(),zo({},n,r)},t.prototype.animate=function(r){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);for(var n=new Array(arguments.length),o=0;o<n.length;++o){var i=arguments[o];i.center&&(i=zo({},i),i.center=Qf(i.center,this.getProjection())),i.anchor&&(i=zo({},i),i.anchor=Qf(i.anchor,this.getProjection())),n[o]=i}this.animateInternal.apply(this,n)},t.prototype.animateInternal=function(r){var n=arguments.length,o;n>1&&typeof arguments[n-1]=="function"&&(o=arguments[n-1],--n);for(var i=0;i<n&&!this.isDef();++i){var a=arguments[i];a.center&&this.setCenterInternal(a.center),a.zoom!==void 0?this.setZoom(a.zoom):a.resolution&&this.setResolution(a.resolution),a.rotation!==void 0&&this.setRotation(a.rotation)}if(i===n){o&&Wz(o,!0);return}for(var u=Date.now(),p=this.targetCenter_.slice(),h=this.targetResolution_,g=this.targetRotation_,x=[];i<n;++i){var b=arguments[i],T={start:u,complete:!1,anchor:b.anchor,duration:b.duration!==void 0?b.duration:1e3,easing:b.easing||XQe,callback:o};if(b.center&&(T.sourceCenter=p,T.targetCenter=b.center.slice(),p=T.targetCenter),b.zoom!==void 0?(T.sourceResolution=h,T.targetResolution=this.getResolutionForZoom(b.zoom),h=T.targetResolution):b.resolution&&(T.sourceResolution=h,T.targetResolution=b.resolution,h=T.targetResolution),b.rotation!==void 0){T.sourceRotation=g;var A=Xf(b.rotation-g+Math.PI,2*Math.PI)-Math.PI;T.targetRotation=g+A,g=T.targetRotation}fDr(T)?T.complete=!0:u+=T.duration,x.push(T)}this.animations_.push(x),this.setHint(Tu.ANIMATING,1),this.updateAnimations_()},t.prototype.getAnimating=function(){return this.hints_[Tu.ANIMATING]>0},t.prototype.getInteracting=function(){return this.hints_[Tu.INTERACTING]>0},t.prototype.cancelAnimations=function(){this.setHint(Tu.ANIMATING,-this.hints_[Tu.ANIMATING]);for(var r,n=0,o=this.animations_.length;n<o;++n){var i=this.animations_[n];if(i[0].callback&&Wz(i[0].callback,!1),!r)for(var a=0,u=i.length;a<u;++a){var p=i[a];if(!p.complete){r=p.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=r,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN},t.prototype.updateAnimations_=function(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!!this.getAnimating()){for(var r=Date.now(),n=!1,o=this.animations_.length-1;o>=0;--o){for(var i=this.animations_[o],a=!0,u=0,p=i.length;u<p;++u){var h=i[u];if(!h.complete){var g=r-h.start,x=h.duration>0?g/h.duration:1;x>=1?(h.complete=!0,x=1):a=!1;var b=h.easing(x);if(h.sourceCenter){var T=h.sourceCenter[0],A=h.sourceCenter[1],L=h.targetCenter[0],P=h.targetCenter[1];this.nextCenter_=h.targetCenter;var k=T+b*(L-T),q=A+b*(P-A);this.targetCenter_=[k,q]}if(h.sourceResolution&&h.targetResolution){var U=b===1?h.targetResolution:h.sourceResolution+b*(h.targetResolution-h.sourceResolution);if(h.anchor){var H=this.getViewportSize_(this.getRotation()),X=this.constraints_.resolution(U,0,H,!0);this.targetCenter_=this.calculateCenterZoom(X,h.anchor)}this.nextResolution_=h.targetResolution,this.targetResolution_=U,this.applyTargetState_(!0)}if(h.sourceRotation!==void 0&&h.targetRotation!==void 0){var ee=b===1?Xf(h.targetRotation+Math.PI,2*Math.PI)-Math.PI:h.sourceRotation+b*(h.targetRotation-h.sourceRotation);if(h.anchor){var ne=this.constraints_.rotation(ee,!0);this.targetCenter_=this.calculateCenterRotate(ne,h.anchor)}this.nextRotation_=h.targetRotation,this.targetRotation_=ee}if(this.applyTargetState_(!0),n=!0,!h.complete)break}}if(a){this.animations_[o]=null,this.setHint(Tu.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;var pe=i[0].callback;pe&&Wz(pe,!0)}}this.animations_=this.animations_.filter(Boolean),n&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}},t.prototype.calculateCenterRotate=function(r,n){var o,i=this.getCenterInternal();return i!==void 0&&(o=[i[0]-n[0],i[1]-n[1]],zw(o,r-this.getRotation()),O$e(o,n)),o},t.prototype.calculateCenterZoom=function(r,n){var o,i=this.getCenterInternal(),a=this.getResolution();if(i!==void 0&&a!==void 0){var u=n[0]-r*(n[0]-i[0])/a,p=n[1]-r*(n[1]-i[1])/a;o=[u,p]}return o},t.prototype.getViewportSize_=function(r){var n=this.viewportSize_;if(r){var o=n[0],i=n[1];return[Math.abs(o*Math.cos(r))+Math.abs(i*Math.sin(r)),Math.abs(o*Math.sin(r))+Math.abs(i*Math.cos(r))]}else return n},t.prototype.setViewportSize=function(r){this.viewportSize_=Array.isArray(r)?r.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)},t.prototype.getCenter=function(){var r=this.getCenterInternal();return r&&sA(r,this.getProjection())},t.prototype.getCenterInternal=function(){return this.get(df.CENTER)},t.prototype.getConstraints=function(){return this.constraints_},t.prototype.getConstrainResolution=function(){return this.get("constrainResolution")},t.prototype.getHints=function(r){return r!==void 0?(r[0]=this.hints_[0],r[1]=this.hints_[1],r):this.hints_.slice()},t.prototype.calculateExtent=function(r){var n=this.calculateExtentInternal(r);return B$e(n,this.getProjection())},t.prototype.calculateExtentInternal=function(r){var n=r||this.getViewportSizeMinusPadding_(),o=this.getCenterInternal();Xr(o,1);var i=this.getResolution();Xr(i!==void 0,2);var a=this.getRotation();return Xr(a!==void 0,3),oA(o,i,a,n)},t.prototype.getMaxResolution=function(){return this.maxResolution_},t.prototype.getMinResolution=function(){return this.minResolution_},t.prototype.getMaxZoom=function(){return this.getZoomForResolution(this.minResolution_)},t.prototype.setMaxZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({maxZoom:r}))},t.prototype.getMinZoom=function(){return this.getZoomForResolution(this.maxResolution_)},t.prototype.setMinZoom=function(r){this.applyOptions_(this.getUpdatedOptions_({minZoom:r}))},t.prototype.setConstrainResolution=function(r){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:r}))},t.prototype.getProjection=function(){return this.projection_},t.prototype.getResolution=function(){return this.get(df.RESOLUTION)},t.prototype.getResolutions=function(){return this.resolutions_},t.prototype.getResolutionForExtent=function(r,n){return this.getResolutionForExtentInternal(Ov(r,this.getProjection()),n)},t.prototype.getResolutionForExtentInternal=function(r,n){var o=n||this.getViewportSizeMinusPadding_(),i=fi(r)/o[0],a=bs(r)/o[1];return Math.max(i,a)},t.prototype.getResolutionForValueFunction=function(r){var n=r||2,o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/Math.log(n);return function(u){var p=o/Math.pow(n,u*a);return p}},t.prototype.getRotation=function(){return this.get(df.ROTATION)},t.prototype.getValueForResolutionFunction=function(r){var n=Math.log(r||2),o=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,a=Math.log(o/i)/n;return function(u){var p=Math.log(o/u)/n/a;return p}},t.prototype.getViewportSizeMinusPadding_=function(r){var n=this.getViewportSize_(r),o=this.padding_;return o&&(n=[n[0]-o[1]-o[3],n[1]-o[0]-o[2]]),n},t.prototype.getState=function(){var r=this.getProjection(),n=this.getResolution(),o=this.getRotation(),i=this.getCenterInternal(),a=this.padding_;if(a){var u=this.getViewportSizeMinusPadding_();i=Aie(i,this.getViewportSize_(),[u[0]/2+a[3],u[1]/2+a[0]],n,o)}return{center:i.slice(0),projection:r!==void 0?r:null,resolution:n,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:o,zoom:this.getZoom()}},t.prototype.getZoom=function(){var r,n=this.getResolution();return n!==void 0&&(r=this.getZoomForResolution(n)),r},t.prototype.getZoomForResolution=function(r){var n=this.minZoom_||0,o,i;if(this.resolutions_){var a=pE(this.resolutions_,r,1);n=a,o=this.resolutions_[a],a==this.resolutions_.length-1?i=2:i=o/this.resolutions_[a+1]}else o=this.maxResolution_,i=this.zoomFactor_;return n+Math.log(o/r)/Math.log(i)},t.prototype.getResolutionForZoom=function(r){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;var n=Ho(Math.floor(r),0,this.resolutions_.length-2),o=this.resolutions_[n]/this.resolutions_[n+1];return this.resolutions_[n]/Math.pow(o,Ho(r-n,0,1))}else return this.maxResolution_/Math.pow(this.zoomFactor_,r-this.minZoom_)},t.prototype.fit=function(r,n){var o;if(Xr(Array.isArray(r)||typeof r.getSimplifiedGeometry=="function",24),Array.isArray(r)){Xr(!i1(r),25);var i=Ov(r,this.getProjection());o=iD(i)}else if(r.getType()==="Circle"){var i=Ov(r.getExtent(),this.getProjection());o=iD(i),o.rotate(this.getRotation(),Jf(i))}else{var a=U$e();a?o=r.clone().transform(a,this.getProjection()):o=r}this.fitInternal(o,n)},t.prototype.rotatedExtentForGeometry=function(r){for(var n=this.getRotation(),o=Math.cos(n),i=Math.sin(-n),a=r.getFlatCoordinates(),u=r.getStride(),p=1/0,h=1/0,g=-1/0,x=-1/0,b=0,T=a.length;b<T;b+=u){var A=a[b]*o-a[b+1]*i,L=a[b]*i+a[b+1]*o;p=Math.min(p,A),h=Math.min(h,L),g=Math.max(g,A),x=Math.max(x,L)}return[p,h,g,x]},t.prototype.fitInternal=function(r,n){var o=n||{},i=o.size;i||(i=this.getViewportSizeMinusPadding_());var a=o.padding!==void 0?o.padding:[0,0,0,0],u=o.nearest!==void 0?o.nearest:!1,p;o.minResolution!==void 0?p=o.minResolution:o.maxZoom!==void 0?p=this.getResolutionForZoom(o.maxZoom):p=0;var h=this.rotatedExtentForGeometry(r),g=this.getResolutionForExtentInternal(h,[i[0]-a[1]-a[3],i[1]-a[0]-a[2]]);g=isNaN(g)?p:Math.max(g,p),g=this.getConstrainedResolution(g,u?0:1);var x=this.getRotation(),b=Math.sin(x),T=Math.cos(x),A=Jf(h);A[0]+=(a[1]-a[3])/2*g,A[1]+=(a[0]-a[2])/2*g;var L=A[0]*T-A[1]*b,P=A[1]*T+A[0]*b,k=this.getConstrainedCenter([L,P],g),q=o.callback?o.callback:mm;o.duration!==void 0?this.animateInternal({resolution:g,center:k,duration:o.duration,easing:o.easing},q):(this.targetResolution_=g,this.targetCenter_=k,this.applyTargetState_(!1,!0),Wz(q,!0))},t.prototype.centerOn=function(r,n,o){this.centerOnInternal(Qf(r,this.getProjection()),n,o)},t.prototype.centerOnInternal=function(r,n,o){this.setCenterInternal(Aie(r,n,o,this.getResolution(),this.getRotation()))},t.prototype.calculateCenterShift=function(r,n,o,i){var a,u=this.padding_;if(u&&r){var p=this.getViewportSizeMinusPadding_(-o),h=Aie(r,i,[p[0]/2+u[3],p[1]/2+u[0]],n,o);a=[r[0]-h[0],r[1]-h[1]]}return a},t.prototype.isDef=function(){return!!this.getCenterInternal()&&this.getResolution()!==void 0},t.prototype.adjustCenter=function(r){var n=sA(this.targetCenter_,this.getProjection());this.setCenter([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustCenterInternal=function(r){var n=this.targetCenter_;this.setCenterInternal([n[0]+r[0],n[1]+r[1]])},t.prototype.adjustResolution=function(r,n){var o=n&&Qf(n,this.getProjection());this.adjustResolutionInternal(r,o)},t.prototype.adjustResolutionInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),a=this.constraints_.resolution(this.targetResolution_*r,0,i,o);n&&(this.targetCenter_=this.calculateCenterZoom(a,n)),this.targetResolution_*=r,this.applyTargetState_()},t.prototype.adjustZoom=function(r,n){this.adjustResolution(Math.pow(this.zoomFactor_,-r),n)},t.prototype.adjustRotation=function(r,n){n&&(n=Qf(n,this.getProjection())),this.adjustRotationInternal(r,n)},t.prototype.adjustRotationInternal=function(r,n){var o=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+r,o);n&&(this.targetCenter_=this.calculateCenterRotate(i,n)),this.targetRotation_+=r,this.applyTargetState_()},t.prototype.setCenter=function(r){this.setCenterInternal(r&&Qf(r,this.getProjection()))},t.prototype.setCenterInternal=function(r){this.targetCenter_=r,this.applyTargetState_()},t.prototype.setHint=function(r,n){return this.hints_[r]+=n,this.changed(),this.hints_[r]},t.prototype.setResolution=function(r){this.targetResolution_=r,this.applyTargetState_()},t.prototype.setRotation=function(r){this.targetRotation_=r,this.applyTargetState_()},t.prototype.setZoom=function(r){this.setResolution(this.getResolutionForZoom(r))},t.prototype.applyTargetState_=function(r,n){var o=this.getAnimating()||this.getInteracting()||n,i=this.constraints_.rotation(this.targetRotation_,o),a=this.getViewportSize_(i),u=this.constraints_.resolution(this.targetResolution_,0,a,o),p=this.constraints_.center(this.targetCenter_,u,a,o,this.calculateCenterShift(this.targetCenter_,u,i,a));this.get(df.ROTATION)!==i&&this.set(df.ROTATION,i),this.get(df.RESOLUTION)!==u&&(this.set(df.RESOLUTION,u),this.set("zoom",this.getZoom(),!0)),(!p||!this.get(df.CENTER)||!a1(this.get(df.CENTER),p))&&this.set(df.CENTER,p),this.getAnimating()&&!r&&this.cancelAnimations(),this.cancelAnchor_=void 0},t.prototype.resolveConstraints=function(r,n,o){var i=r!==void 0?r:200,a=n||0,u=this.constraints_.rotation(this.targetRotation_),p=this.getViewportSize_(u),h=this.constraints_.resolution(this.targetResolution_,a,p),g=this.constraints_.center(this.targetCenter_,h,p,!1,this.calculateCenterShift(this.targetCenter_,h,u,p));if(i===0&&!this.cancelAnchor_){this.targetResolution_=h,this.targetRotation_=u,this.targetCenter_=g,this.applyTargetState_();return}var x=o||(i===0?this.cancelAnchor_:void 0);this.cancelAnchor_=void 0,(this.getResolution()!==h||this.getRotation()!==u||!this.getCenterInternal()||!a1(this.getCenterInternal(),g))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:u,center:g,resolution:h,duration:i,easing:cf,anchor:x}))},t.prototype.beginInteraction=function(){this.resolveConstraints(0),this.setHint(Tu.INTERACTING,1)},t.prototype.endInteraction=function(r,n,o){var i=o&&Qf(o,this.getProjection());this.endInteractionInternal(r,n,i)},t.prototype.endInteractionInternal=function(r,n,o){this.setHint(Tu.INTERACTING,-1),this.resolveConstraints(r,n,o)},t.prototype.getConstrainedCenter=function(r,n){var o=this.getViewportSize_(this.getRotation());return this.constraints_.center(r,n||this.getResolution(),o)},t.prototype.getConstrainedZoom=function(r,n){var o=this.getResolutionForZoom(r);return this.getZoomForResolution(this.getConstrainedResolution(o,n))},t.prototype.getConstrainedResolution=function(r,n){var o=n||0,i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(r,o,i)},t}(Za);function Wz(e,t){setTimeout(function(){e(t)},0)}function lDr(e){if(e.extent!==void 0){var t=e.smoothExtentConstraint!==void 0?e.smoothExtentConstraint:!0;return Sie(e.extent,e.constrainOnlyCenter,t)}var r=q6(e.projection,"EPSG:3857");if(e.multiWorld!==!0&&r.isGlobal()){var n=r.getExtent().slice();return n[0]=-1/0,n[2]=1/0,Sie(n,!1,!1)}return ktt}function uDr(e){var t,r,n,o=28,i=2,a=e.minZoom!==void 0?e.minZoom:Cie,u=e.maxZoom!==void 0?e.maxZoom:o,p=e.zoomFactor!==void 0?e.zoomFactor:i,h=e.multiWorld!==void 0?e.multiWorld:!1,g=e.smoothResolutionConstraint!==void 0?e.smoothResolutionConstraint:!0,x=e.showFullExtent!==void 0?e.showFullExtent:!1,b=q6(e.projection,"EPSG:3857"),T=b.getExtent(),A=e.constrainOnlyCenter,L=e.extent;if(!h&&!L&&b.isGlobal()&&(A=!1,L=T),e.resolutions!==void 0){var P=e.resolutions;r=P[a],n=P[u]!==void 0?P[u]:P[P.length-1],e.constrainResolution?t=Rtt(P,g,!A&&L,x):t=Mie(r,n,g,!A&&L,x)}else{var k=T?Math.max(fi(T),bs(T)):360*vu[yu.DEGREES]/b.getMetersPerUnit(),q=k/Qv/Math.pow(i,Cie),U=q/Math.pow(i,o-Cie);r=e.maxResolution,r!==void 0?a=0:r=q/Math.pow(p,a),n=e.minResolution,n===void 0&&(e.maxZoom!==void 0?e.maxResolution!==void 0?n=r/Math.pow(p,u):n=q/Math.pow(p,u):n=U),u=a+Math.floor(Math.log(r/n)/Math.log(p)),n=r/Math.pow(p,u-a),e.constrainResolution?t=jtt(p,r,n,g,!A&&L,x):t=Mie(r,n,g,!A&&L,x)}return{constraint:t,maxResolution:r,minResolution:n,minZoom:a,zoomFactor:p}}function cDr(e){var t=e.enableRotation!==void 0?e.enableRotation:!0;if(t){var r=e.constrainRotation;return r===void 0||r===!0?itt():r===!1?gie:typeof r=="number"?ott(r):gie}else return xE}function fDr(e){return!(e.sourceCenter&&e.targetCenter&&!a1(e.sourceCenter,e.targetCenter)||e.sourceResolution!==e.targetResolution||e.sourceRotation!==e.targetRotation)}function Aie(e,t,r,n,o){var i=Math.cos(-o),a=Math.sin(-o),u=e[0]*i-e[1]*a,p=e[1]*i+e[0]*a;u+=(t[0]/2-r[0])*n,p+=(r[1]-t[1]/2)*n,a=-a;var h=u*i-p*a,g=p*i+u*a;return[h,g]}var Id=sDr;var pDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function qtt(e){if(e instanceof uD){e.setMapInternal(null);return}e instanceof cD&&e.getLayers().forEach(qtt)}function ztt(e,t){if(e instanceof uD){e.setMapInternal(t);return}if(e instanceof cD)for(var r=e.getLayers().getArray(),n=0,o=r.length;n<o;++n)ztt(r[n],t)}var dDr=function(e){pDr(t,e);function t(r){var n=e.call(this)||this;n.on,n.once,n.un;var o=hDr(r);n.renderComplete_,n.loaded_=!0,n.boundHandleBrowserEvent_=n.handleBrowserEvent.bind(n),n.maxTilesLoading_=r.maxTilesLoading!==void 0?r.maxTilesLoading:16,n.pixelRatio_=r.pixelRatio!==void 0?r.pixelRatio:Nz,n.postRenderTimeoutHandle_,n.animationDelayKey_,n.animationDelay_=function(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}.bind(n),n.coordinateToPixelTransform_=ff(),n.pixelToCoordinateTransform_=ff(),n.frameIndex_=0,n.frameState_=null,n.previousExtent_=null,n.viewPropertyListenerKey_=null,n.viewChangeListenerKey_=null,n.layerGroupPropertyListenerKeys_=null,n.viewport_=document.createElement("div"),n.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),n.viewport_.style.position="relative",n.viewport_.style.overflow="hidden",n.viewport_.style.width="100%",n.viewport_.style.height="100%",n.overlayContainer_=document.createElement("div"),n.overlayContainer_.style.position="absolute",n.overlayContainer_.style.zIndex="0",n.overlayContainer_.style.width="100%",n.overlayContainer_.style.height="100%",n.overlayContainer_.style.pointerEvents="none",n.overlayContainer_.className="ol-overlaycontainer",n.viewport_.appendChild(n.overlayContainer_),n.overlayContainerStopEvent_=document.createElement("div"),n.overlayContainerStopEvent_.style.position="absolute",n.overlayContainerStopEvent_.style.zIndex="0",n.overlayContainerStopEvent_.style.width="100%",n.overlayContainerStopEvent_.style.height="100%",n.overlayContainerStopEvent_.style.pointerEvents="none",n.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",n.viewport_.appendChild(n.overlayContainerStopEvent_),n.mapBrowserEventHandler_=null,n.moveTolerance_=r.moveTolerance,n.keyboardEventTarget_=o.keyboardEventTarget,n.targetChangeHandlerKeys_=null,n.controls=o.controls||new Rl,n.interactions=o.interactions||new Rl,n.overlays_=o.overlays,n.overlayIdIndex_={},n.renderer_=null,n.postRenderFunctions_=[],n.tileQueue_=new Ott(n.getTilePriority.bind(n),n.handleTileChange_.bind(n)),n.addChangeListener(ca.LAYERGROUP,n.handleLayerGroupChanged_),n.addChangeListener(ca.VIEW,n.handleViewChanged_),n.addChangeListener(ca.SIZE,n.handleSizeChanged_),n.addChangeListener(ca.TARGET,n.handleTargetChanged_),n.setProperties(o.values);var i=n;return r.view&&!(r.view instanceof Id)&&r.view.then(function(a){i.setView(new Id(a))}),n.controls.addEventListener(kl.ADD,function(a){a.element.setMap(this)}.bind(n)),n.controls.addEventListener(kl.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.interactions.addEventListener(kl.ADD,function(a){a.element.setMap(this)}.bind(n)),n.interactions.addEventListener(kl.REMOVE,function(a){a.element.setMap(null)}.bind(n)),n.overlays_.addEventListener(kl.ADD,function(a){this.addOverlayInternal_(a.element)}.bind(n)),n.overlays_.addEventListener(kl.REMOVE,function(a){var u=a.element,p=u.getId();p!==void 0&&delete this.overlayIdIndex_[p.toString()],a.element.setMap(null)}.bind(n)),n.controls.forEach(function(a){a.setMap(this)}.bind(n)),n.interactions.forEach(function(a){a.setMap(this)}.bind(n)),n.overlays_.forEach(n.addOverlayInternal_.bind(n)),n}return t.prototype.createRenderer=function(){throw new Error("Use a map type that has a createRenderer method")},t.prototype.addControl=function(r){this.getControls().push(r)},t.prototype.addInteraction=function(r){this.getInteractions().push(r)},t.prototype.addLayer=function(r){var n=this.getLayerGroup().getLayers();n.push(r)},t.prototype.handleLayerAdd_=function(r){ztt(r.layer,this)},t.prototype.addOverlay=function(r){this.getOverlays().push(r)},t.prototype.addOverlayInternal_=function(r){var n=r.getId();n!==void 0&&(this.overlayIdIndex_[n.toString()]=r),r.setMap(this)},t.prototype.disposeInternal=function(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.setTarget(null),e.prototype.disposeInternal.call(this)},t.prototype.forEachFeatureAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=this.getCoordinateFromPixelInternal(r);o=o!==void 0?o:{};var a=o.hitTolerance!==void 0?o.hitTolerance:0,u=o.layerFilter!==void 0?o.layerFilter:Wv,p=o.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,a,p,n,null,u,null)}},t.prototype.getFeaturesAtPixel=function(r,n){var o=[];return this.forEachFeatureAtPixel(r,function(i){o.push(i)},n),o},t.prototype.getAllLayers=function(){var r=[];function n(o){o.forEach(function(i){i instanceof cD?n(i.getLayers()):r.push(i)})}return n(this.getLayers()),r},t.prototype.forEachLayerAtPixel=function(r,n,o){if(!(!this.frameState_||!this.renderer_)){var i=o||{},a=i.hitTolerance!==void 0?i.hitTolerance:0,u=i.layerFilter||Wv;return this.renderer_.forEachLayerAtPixel(r,this.frameState_,a,n,u)}},t.prototype.hasFeatureAtPixel=function(r,n){if(!this.frameState_||!this.renderer_)return!1;var o=this.getCoordinateFromPixelInternal(r);n=n!==void 0?n:{};var i=n.layerFilter!==void 0?n.layerFilter:Wv,a=n.hitTolerance!==void 0?n.hitTolerance:0,u=n.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(o,this.frameState_,a,u,i,null)},t.prototype.getEventCoordinate=function(r){return this.getCoordinateFromPixel(this.getEventPixel(r))},t.prototype.getEventCoordinateInternal=function(r){return this.getCoordinateFromPixelInternal(this.getEventPixel(r))},t.prototype.getEventPixel=function(r){var n=this.viewport_.getBoundingClientRect(),o="changedTouches"in r?r.changedTouches[0]:r;return[o.clientX-n.left,o.clientY-n.top]},t.prototype.getTarget=function(){return this.get(ca.TARGET)},t.prototype.getTargetElement=function(){var r=this.getTarget();return r!==void 0?typeof r=="string"?document.getElementById(r):r:null},t.prototype.getCoordinateFromPixel=function(r){return sA(this.getCoordinateFromPixelInternal(r),this.getView().getProjection())},t.prototype.getCoordinateFromPixelInternal=function(r){var n=this.frameState_;return n?Yv(n.pixelToCoordinateTransform,r.slice()):null},t.prototype.getControls=function(){return this.controls},t.prototype.getOverlays=function(){return this.overlays_},t.prototype.getOverlayById=function(r){var n=this.overlayIdIndex_[r.toString()];return n!==void 0?n:null},t.prototype.getInteractions=function(){return this.interactions},t.prototype.getLayerGroup=function(){return this.get(ca.LAYERGROUP)},t.prototype.setLayers=function(r){var n=this.getLayerGroup();if(r instanceof Rl){n.setLayers(r);return}var o=n.getLayers();o.clear(),o.extend(r)},t.prototype.getLayers=function(){var r=this.getLayerGroup().getLayers();return r},t.prototype.getLoadingOrNotReady=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n];if(i.visible){var a=i.layer.getRenderer();if(a&&!a.ready)return!0;var u=i.layer.getSource();if(u&&u.loading)return!0}}return!1},t.prototype.getPixelFromCoordinate=function(r){var n=Qf(r,this.getView().getProjection());return this.getPixelFromCoordinateInternal(n)},t.prototype.getPixelFromCoordinateInternal=function(r){var n=this.frameState_;return n?Yv(n.coordinateToPixelTransform,r.slice(0,2)):null},t.prototype.getRenderer=function(){return this.renderer_},t.prototype.getSize=function(){return this.get(ca.SIZE)},t.prototype.getView=function(){return this.get(ca.VIEW)},t.prototype.getViewport=function(){return this.viewport_},t.prototype.getOverlayContainer=function(){return this.overlayContainer_},t.prototype.getOverlayContainerStopEvent=function(){return this.overlayContainerStopEvent_},t.prototype.getOwnerDocument=function(){var r=this.getTargetElement();return r?r.ownerDocument:document},t.prototype.getTilePriority=function(r,n,o,i){return Ltt(this.frameState_,r,n,o,i)},t.prototype.handleBrowserEvent=function(r,n){var o=n||r.type,i=new Ed(o,this,r);this.handleMapBrowserEvent(i)},t.prototype.handleMapBrowserEvent=function(r){if(this.frameState_){var n=r.originalEvent,o=n.type;if(o===fD.POINTERDOWN||o===_r.WHEEL||o===_r.KEYDOWN){var i=this.getOwnerDocument(),a=this.viewport_.getRootNode?this.viewport_.getRootNode():i,u=n.target;if(this.overlayContainerStopEvent_.contains(u)||!(a===i?i.documentElement:a).contains(u))return}if(r.frameState=this.frameState_,this.dispatchEvent(r)!==!1)for(var p=this.getInteractions().getArray().slice(),h=p.length-1;h>=0;h--){var g=p[h];if(!(g.getMap()!==this||!g.getActive()||!this.getTargetElement())){var x=g.handleEvent(r);if(!x||r.propagationStopped)break}}}},t.prototype.handlePostRender=function(){var r=this.frameState_,n=this.tileQueue_;if(!n.isEmpty()){var o=this.maxTilesLoading_,i=o;if(r){var a=r.viewHints;if(a[Tu.ANIMATING]||a[Tu.INTERACTING]){var u=Date.now()-r.time>8;o=u?0:8,i=u?0:2}}n.getTilesLoading()<o&&(n.reprioritize(),n.loadMoreTiles(o,i))}r&&this.renderer_&&!r.animate&&(this.renderComplete_===!0?(this.hasListener(sl.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(sl.RENDERCOMPLETE,r),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Jv(bd.LOADEND,this,r)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Jv(bd.LOADSTART,this,r))));for(var p=this.postRenderFunctions_,h=0,g=p.length;h<g;++h)p[h](this,r);p.length=0},t.prototype.handleSizeChanged_=function(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()},t.prototype.handleTargetChanged_=function(){if(this.mapBrowserEventHandler_){for(var r=0,n=this.targetChangeHandlerKeys_.length;r<n;++r)ao(this.targetChangeHandlerKeys_[r]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(_r.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(_r.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,sD(this.viewport_)}var o=this.getTargetElement();if(!o)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{o.appendChild(this.viewport_),this.renderer_||(this.renderer_=this.createRenderer()),this.mapBrowserEventHandler_=new Dtt(this,this.moveTolerance_);for(var i in ri)this.mapBrowserEventHandler_.addEventListener(ri[i],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(_r.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(_r.WHEEL,this.boundHandleBrowserEvent_,Oz?{passive:!1}:!1);var a=this.getOwnerDocument().defaultView,u=this.keyboardEventTarget_?this.keyboardEventTarget_:o;this.targetChangeHandlerKeys_=[In(u,_r.KEYDOWN,this.handleBrowserEvent,this),In(u,_r.KEYPRESS,this.handleBrowserEvent,this),In(a,_r.RESIZE,this.updateSize,this)]}this.updateSize()},t.prototype.handleTileChange_=function(){this.render()},t.prototype.handleViewPropertyChanged_=function(){this.render()},t.prototype.handleViewChanged_=function(){this.viewPropertyListenerKey_&&(ao(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(ao(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);var r=this.getView();r&&(this.updateViewportSize_(),this.viewPropertyListenerKey_=In(r,dm.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=In(r,_r.CHANGE,this.handleViewPropertyChanged_,this),r.resolveConstraints(0)),this.render()},t.prototype.handleLayerGroupChanged_=function(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(ao),this.layerGroupPropertyListenerKeys_=null);var r=this.getLayerGroup();r&&(this.handleLayerAdd_(new vm("addlayer",r)),this.layerGroupPropertyListenerKeys_=[In(r,dm.PROPERTYCHANGE,this.render,this),In(r,_r.CHANGE,this.render,this),In(r,"addlayer",this.handleLayerAdd_,this),In(r,"removelayer",this.handleLayerRemove_,this)]),this.render()},t.prototype.isRendered=function(){return!!this.frameState_},t.prototype.renderSync=function(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()},t.prototype.redrawText=function(){for(var r=this.getLayerGroup().getLayerStatesArray(),n=0,o=r.length;n<o;++n){var i=r[n].layer;i.hasRenderer()&&i.getRenderer().handleFontsChanged()}},t.prototype.render=function(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))},t.prototype.removeControl=function(r){return this.getControls().remove(r)},t.prototype.removeInteraction=function(r){return this.getInteractions().remove(r)},t.prototype.removeLayer=function(r){var n=this.getLayerGroup().getLayers();return n.remove(r)},t.prototype.handleLayerRemove_=function(r){qtt(r.layer)},t.prototype.removeOverlay=function(r){return this.getOverlays().remove(r)},t.prototype.renderFrame_=function(r){var n=this,o=this.getSize(),i=this.getView(),a=this.frameState_,u=null;if(o!==void 0&&yie(o)&&i&&i.isDef()){var p=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),h=i.getState();if(u={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:oA(h.center,h.resolution,h.rotation,o),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:o,tileQueue:this.tileQueue_,time:r,usedTiles:{},viewState:h,viewHints:p,wantedTiles:{},mapId:$i(this),renderTargets:{}},h.nextCenter&&h.nextResolution){var g=isNaN(h.nextRotation)?h.rotation:h.nextRotation;u.nextExtent=oA(h.nextCenter,h.nextResolution,g,o)}}if(this.frameState_=u,this.renderer_.renderFrame(u),u){if(u.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,u.postRenderFunctions),a){var x=!this.previousExtent_||!i1(this.previousExtent_)&&!tA(u.extent,this.previousExtent_);x&&(this.dispatchEvent(new Jv(bd.MOVESTART,this,a)),this.previousExtent_=qw(this.previousExtent_))}var b=this.previousExtent_&&!u.viewHints[Tu.ANIMATING]&&!u.viewHints[Tu.INTERACTING]&&!tA(u.extent,this.previousExtent_);b&&(this.dispatchEvent(new Jv(bd.MOVEEND,this,u)),E$e(u.extent,this.previousExtent_))}this.dispatchEvent(new Jv(bd.POSTRENDER,this,u)),this.renderComplete_=this.hasListener(bd.LOADSTART)||this.hasListener(bd.LOADEND)||this.hasListener(sl.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(function(){n.postRenderTimeoutHandle_=void 0,n.handlePostRender()},0))},t.prototype.setLayerGroup=function(r){var n=this.getLayerGroup();n&&this.handleLayerRemove_(new vm("removelayer",n)),this.set(ca.LAYERGROUP,r)},t.prototype.setSize=function(r){this.set(ca.SIZE,r)},t.prototype.setTarget=function(r){this.set(ca.TARGET,r)},t.prototype.setView=function(r){if(!r||r instanceof Id){this.set(ca.VIEW,r);return}this.set(ca.VIEW,new Id);var n=this;r.then(function(o){n.setView(new Id(o))})},t.prototype.updateSize=function(){var r=this.getTargetElement(),n=void 0;if(r){var o=getComputedStyle(r),i=r.offsetWidth-parseFloat(o.borderLeftWidth)-parseFloat(o.paddingLeft)-parseFloat(o.paddingRight)-parseFloat(o.borderRightWidth),a=r.offsetHeight-parseFloat(o.borderTopWidth)-parseFloat(o.paddingTop)-parseFloat(o.paddingBottom)-parseFloat(o.borderBottomWidth);!isNaN(i)&&!isNaN(a)&&(n=[i,a],!yie(n)&&(r.offsetWidth||r.offsetHeight||r.getClientRects().length)&&console.warn("No map visible because the map container's width or height are 0."))}this.setSize(n),this.updateViewportSize_()},t.prototype.updateViewportSize_=function(){var r=this.getView();if(r){var n=void 0,o=getComputedStyle(this.viewport_);o.width&&o.height&&(n=[parseInt(o.width,10),parseInt(o.height,10)]),r.setViewportSize(n)}},t}(Za);function hDr(e){var t=null;e.keyboardEventTarget!==void 0&&(t=typeof e.keyboardEventTarget=="string"?document.getElementById(e.keyboardEventTarget):e.keyboardEventTarget);var r={},n=e.layers&&typeof e.layers.getLayers=="function"?e.layers:new cD({layers:e.layers});r[ca.LAYERGROUP]=n,r[ca.TARGET]=e.target,r[ca.VIEW]=e.view instanceof Id?e.view:new Id;var o;e.controls!==void 0&&(Array.isArray(e.controls)?o=new Rl(e.controls.slice()):(Xr(typeof e.controls.getArray=="function",47),o=e.controls));var i;e.interactions!==void 0&&(Array.isArray(e.interactions)?i=new Rl(e.interactions.slice()):(Xr(typeof e.interactions.getArray=="function",48),i=e.interactions));var a;return e.overlays!==void 0?Array.isArray(e.overlays)?a=new Rl(e.overlays.slice()):(Xr(typeof e.overlays.getArray=="function",49),a=e.overlays):a=new Rl,{controls:o,interactions:i,keyboardEventTarget:t,overlays:a,values:r}}var Ftt=dDr;var mDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gDr=function(e){mDr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this,n.ulElement_=document.createElement("ul"),n.collapsed_=o.collapsed!==void 0?o.collapsed:!0,n.userCollapsed_=n.collapsed_,n.overrideCollapsible_=o.collapsible!==void 0,n.collapsible_=o.collapsible!==void 0?o.collapsible:!0,n.collapsible_||(n.collapsed_=!1);var i=o.className!==void 0?o.className:"ol-attribution",a=o.tipLabel!==void 0?o.tipLabel:"Attributions",u=o.expandClassName!==void 0?o.expandClassName:i+"-expand",p=o.collapseLabel!==void 0?o.collapseLabel:"\u203A",h=o.collapseClassName!==void 0?o.collapseClassName:i+"-collapse";typeof p=="string"?(n.collapseLabel_=document.createElement("span"),n.collapseLabel_.textContent=p,n.collapseLabel_.className=h):n.collapseLabel_=p;var g=o.label!==void 0?o.label:"i";typeof g=="string"?(n.label_=document.createElement("span"),n.label_.textContent=g,n.label_.className=u):n.label_=g;var x=n.collapsible_&&!n.collapsed_?n.collapseLabel_:n.label_;n.toggleButton_=document.createElement("button"),n.toggleButton_.setAttribute("type","button"),n.toggleButton_.setAttribute("aria-expanded",String(!n.collapsed_)),n.toggleButton_.title=a,n.toggleButton_.appendChild(x),n.toggleButton_.addEventListener(_r.CLICK,n.handleClick_.bind(n),!1);var b=i+" "+pf+" "+wd+(n.collapsed_&&n.collapsible_?" "+mie:"")+(n.collapsible_?"":" ol-uncollapsible"),T=n.element;return T.className=b,T.appendChild(n.toggleButton_),T.appendChild(n.ulElement_),n.renderedAttributions_=[],n.renderedVisible_=!0,n}return t.prototype.collectSourceAttributions_=function(r){for(var n={},o=[],i=!0,a=r.layerStatesArray,u=0,p=a.length;u<p;++u){var h=a[u];if(w1(h,r.viewState)){var g=h.layer.getSource();if(g){var x=g.getAttributions();if(x){var b=x(r);if(b)if(i=i&&g.getAttributionsCollapsible()!==!1,Array.isArray(b))for(var T=0,A=b.length;T<A;++T)b[T]in n||(o.push(b[T]),n[b[T]]=!0);else b in n||(o.push(b),n[b]=!0)}}}}return this.overrideCollapsible_||this.setCollapsible(i),o},t.prototype.updateElement_=function(r){if(!r){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}var n=this.collectSourceAttributions_(r),o=n.length>0;if(this.renderedVisible_!=o&&(this.element.style.display=o?"":"none",this.renderedVisible_=o),!Cz(n,this.renderedAttributions_)){Get(this.ulElement_);for(var i=0,a=n.length;i<a;++i){var u=document.createElement("li");u.innerHTML=n[i],this.ulElement_.appendChild(u)}this.renderedAttributions_=n}},t.prototype.handleClick_=function(r){r.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_},t.prototype.handleToggle_=function(){this.element.classList.toggle(mie),this.collapsed_?_E(this.collapseLabel_,this.label_):_E(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))},t.prototype.getCollapsible=function(){return this.collapsible_},t.prototype.setCollapsible=function(r){this.collapsible_!==r&&(this.collapsible_=r,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())},t.prototype.setCollapsed=function(r){this.userCollapsed_=r,!(!this.collapsible_||this.collapsed_===r)&&this.handleToggle_()},t.prototype.getCollapsed=function(){return this.collapsed_},t.prototype.render=function(r){this.updateElement_(r.frameState)},t}(sc),Utt=gDr;var vDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yDr=function(e){vDr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),render:o.render,target:o.target})||this;var i=o.className!==void 0?o.className:"ol-rotate",a=o.label!==void 0?o.label:"\u21E7",u=o.compassClassName!==void 0?o.compassClassName:"ol-compass";n.label_=null,typeof a=="string"?(n.label_=document.createElement("span"),n.label_.className=u,n.label_.textContent=a):(n.label_=a,n.label_.classList.add(u));var p=o.tipLabel?o.tipLabel:"Reset rotation",h=document.createElement("button");h.className=i+"-reset",h.setAttribute("type","button"),h.title=p,h.appendChild(n.label_),h.addEventListener(_r.CLICK,n.handleClick_.bind(n),!1);var g=i+" "+pf+" "+wd,x=n.element;return x.className=g,x.appendChild(h),n.callResetNorth_=o.resetNorth?o.resetNorth:void 0,n.duration_=o.duration!==void 0?o.duration:250,n.autoHide_=o.autoHide!==void 0?o.autoHide:!0,n.rotation_=void 0,n.autoHide_&&n.element.classList.add(lD),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()},t.prototype.resetNorth_=function(){var r=this.getMap(),n=r.getView();if(n){var o=n.getRotation();o!==void 0&&(this.duration_>0&&o%(2*Math.PI)!==0?n.animate({rotation:0,duration:this.duration_,easing:cf}):n.setRotation(0))}},t.prototype.render=function(r){var n=r.frameState;if(n){var o=n.viewState.rotation;if(o!=this.rotation_){var i="rotate("+o+"rad)";if(this.autoHide_){var a=this.element.classList.contains(lD);!a&&o===0?this.element.classList.add(lD):a&&o!==0&&this.element.classList.remove(lD)}this.label_.style.transform=i}this.rotation_=o}},t}(sc),Btt=yDr;var _Dr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xDr=function(e){_Dr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this;var i=o.className!==void 0?o.className:"ol-zoom",a=o.delta!==void 0?o.delta:1,u=o.zoomInClassName!==void 0?o.zoomInClassName:i+"-in",p=o.zoomOutClassName!==void 0?o.zoomOutClassName:i+"-out",h=o.zoomInLabel!==void 0?o.zoomInLabel:"+",g=o.zoomOutLabel!==void 0?o.zoomOutLabel:"\u2013",x=o.zoomInTipLabel!==void 0?o.zoomInTipLabel:"Zoom in",b=o.zoomOutTipLabel!==void 0?o.zoomOutTipLabel:"Zoom out",T=document.createElement("button");T.className=u,T.setAttribute("type","button"),T.title=x,T.appendChild(typeof h=="string"?document.createTextNode(h):h),T.addEventListener(_r.CLICK,n.handleClick_.bind(n,a),!1);var A=document.createElement("button");A.className=p,A.setAttribute("type","button"),A.title=b,A.appendChild(typeof g=="string"?document.createTextNode(g):g),A.addEventListener(_r.CLICK,n.handleClick_.bind(n,-a),!1);var L=i+" "+pf+" "+wd,P=n.element;return P.className=L,P.appendChild(T),P.appendChild(A),n.duration_=o.duration!==void 0?o.duration:250,n}return t.prototype.handleClick_=function(r,n){n.preventDefault(),this.zoomByDelta_(r)},t.prototype.zoomByDelta_=function(r){var n=this.getMap(),o=n.getView();if(o){var i=o.getZoom();if(i!==void 0){var a=o.getConstrainedZoom(i+r);this.duration_>0?(o.getAnimating()&&o.cancelAnimations(),o.animate({zoom:a,duration:this.duration_,easing:cf})):o.setZoom(a)}}},t}(sc),$z=xDr;var bDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),wDr=function(e){bDr(t,e);function t(r){var n=this,o=r||{};n=e.call(this,{element:document.createElement("div"),target:o.target})||this,n.extent=o.extent?o.extent:null;var i=o.className!==void 0?o.className:"ol-zoom-extent",a=o.label!==void 0?o.label:"E",u=o.tipLabel!==void 0?o.tipLabel:"Fit to extent",p=document.createElement("button");p.setAttribute("type","button"),p.title=u,p.appendChild(typeof a=="string"?document.createTextNode(a):a),p.addEventListener(_r.CLICK,n.handleClick_.bind(n),!1);var h=i+" "+pf+" "+wd,g=n.element;return g.className=h,g.appendChild(p),n}return t.prototype.handleClick_=function(r){r.preventDefault(),this.handleZoomToExtent()},t.prototype.handleZoomToExtent=function(){var r=this.getMap(),n=r.getView(),o=this.extent?this.extent:n.getProjection().getExtent();n.fitInternal(iD(o))},t}(sc),Vtt=wDr;function Gtt(e){var t=e||{},r=new Rl,n=t.zoom!==void 0?t.zoom:!0;n&&r.push(new $z(t.zoomOptions));var o=t.rotate!==void 0?t.rotate:!0;o&&r.push(new Btt(t.rotateOptions));var i=t.attribution!==void 0?t.attribution:!0;return i&&r.push(new Utt(t.attributionOptions)),r}var EDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),SDr=function(e){EDr(t,e);function t(r){return r=zo({},r),r.controls||(r.controls=Gtt()),r.interactions||(r.interactions=Hz({onFocusOnly:!0})),e.call(this,r)||this}return t.prototype.createRenderer=function(){return new Ctt(this)},t}(Ftt),Htt=SDr;var dD={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};var IDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),TDr=function(e){IDr(t,e);function t(r){var n=this,o=r||{},i=zo({},o);return delete i.preload,delete i.useInterimTilesOnError,n=e.call(this,i)||this,n.on,n.once,n.un,n.setPreload(o.preload!==void 0?o.preload:0),n.setUseInterimTilesOnError(o.useInterimTilesOnError!==void 0?o.useInterimTilesOnError:!0),n}return t.prototype.getPreload=function(){return this.get(dD.PRELOAD)},t.prototype.setPreload=function(r){this.set(dD.PRELOAD,r)},t.prototype.getUseInterimTilesOnError=function(){return this.get(dD.USE_INTERIM_TILES_ON_ERROR)},t.prototype.setUseInterimTilesOnError=function(r){this.set(dD.USE_INTERIM_TILES_ON_ERROR,r)},t.prototype.getData=function(r){return e.prototype.getData.call(this,r)},t}(uD),Wtt=TDr;var MDr=function(){function e(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}return e.prototype.canExpireCache=function(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark},e.prototype.expireCache=function(t){for(;this.canExpireCache();)this.pop()},e.prototype.clear=function(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null},e.prototype.containsKey=function(t){return this.entries_.hasOwnProperty(t)},e.prototype.forEach=function(t){for(var r=this.oldest_;r;)t(r.value_,r.key_,this),r=r.newer},e.prototype.get=function(t,r){var n=this.entries_[t];return Xr(n!==void 0,15),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_},e.prototype.remove=function(t){var r=this.entries_[t];return Xr(r!==void 0,15),r===this.newest_?(this.newest_=r.older,this.newest_&&(this.newest_.newer=null)):r===this.oldest_?(this.oldest_=r.newer,this.oldest_&&(this.oldest_.older=null)):(r.newer.older=r.older,r.older.newer=r.newer),delete this.entries_[t],--this.count_,r.value_},e.prototype.getCount=function(){return this.count_},e.prototype.getKeys=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.key_;return t},e.prototype.getValues=function(){var t=new Array(this.count_),r=0,n;for(n=this.newest_;n;n=n.older)t[r++]=n.value_;return t},e.prototype.peekLast=function(){return this.oldest_.value_},e.prototype.peekLastKey=function(){return this.oldest_.key_},e.prototype.peekFirstKey=function(){return this.newest_.key_},e.prototype.peek=function(t){if(this.containsKey(t))return this.entries_[t].value_},e.prototype.pop=function(){var t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_},e.prototype.replace=function(t,r){this.get(t),this.entries_[t].value_=r},e.prototype.set=function(t,r){Xr(!(t in this.entries_),16);var n={key_:t,newer:null,older:this.newest_,value_:r};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_},e.prototype.setSize=function(t){this.highWaterMark=t},e}(),Yz=MDr;var $tt=function(){function e(t,r,n,o){this.minX=t,this.maxX=r,this.minY=n,this.maxY=o}return e.prototype.contains=function(t){return this.containsXY(t[1],t[2])},e.prototype.containsTileRange=function(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY},e.prototype.containsXY=function(t,r){return this.minX<=t&&t<=this.maxX&&this.minY<=r&&r<=this.maxY},e.prototype.equals=function(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY},e.prototype.extend=function(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)},e.prototype.getHeight=function(){return this.maxY-this.minY+1},e.prototype.getSize=function(){return[this.getWidth(),this.getHeight()]},e.prototype.getWidth=function(){return this.maxX-this.minX+1},e.prototype.intersects=function(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY},e}();function E1(e,t,r,n,o){return o!==void 0?(o.minX=e,o.maxX=t,o.minY=r,o.maxY=n,o):new $tt(e,t,r,n)}var Zz=$tt;var CDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ADr=function(e){CDr(t,e);function t(r,n,o){var i=e.call(this)||this,a=o||{};return i.tileCoord=r,i.state=n,i.interimTile=null,i.key="",i.transition_=a.transition===void 0?250:a.transition,i.transitionStarts_={},i.interpolate=!!a.interpolate,i}return t.prototype.changed=function(){this.dispatchEvent(_r.CHANGE)},t.prototype.release=function(){},t.prototype.getKey=function(){return this.key+"/"+this.tileCoord},t.prototype.getInterimTile=function(){if(!this.interimTile)return this;var r=this.interimTile;do{if(r.getState()==xr.LOADED)return this.transition_=0,r;r=r.interimTile}while(r);return this},t.prototype.refreshInterimChain=function(){if(this.interimTile){var r=this.interimTile,n=this;do{if(r.getState()==xr.LOADED){r.interimTile=null;break}else r.getState()==xr.LOADING?n=r:r.getState()==xr.IDLE?n.interimTile=r.interimTile:n=r;r=n.interimTile}while(r)}},t.prototype.getTileCoord=function(){return this.tileCoord},t.prototype.getState=function(){return this.state},t.prototype.setState=function(r){if(this.state!==xr.ERROR&&this.state>r)throw new Error("Tile load sequence violation");this.state=r,this.changed()},t.prototype.load=function(){Gn()},t.prototype.getAlpha=function(r,n){if(!this.transition_)return 1;var o=this.transitionStarts_[r];if(!o)o=n,this.transitionStarts_[r]=o;else if(o===-1)return 1;var i=n-o+1e3/60;return i>=this.transition_?1:tie(i/this.transition_)},t.prototype.inTransition=function(r){return this.transition_?this.transitionStarts_[r]!==-1:!1},t.prototype.endTransition=function(r){this.transition_&&(this.transitionStarts_[r]=-1)},t}(uf),EE=ADr;var DDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NDr=function(e){DDr(t,e);function t(r){var n=this,o=xr.IDLE;return n=e.call(this,r.tileCoord,o,{transition:r.transition,interpolate:r.interpolate})||this,n.loader_=r.loader,n.data_=null,n.error_=null,n.size_=r.size||[256,256],n}return t.prototype.getSize=function(){return this.size_},t.prototype.getData=function(){return this.data_},t.prototype.getError=function(){return this.error_},t.prototype.load=function(){if(!(this.state!==xr.IDLE&&this.state!==xr.ERROR)){this.state=xr.LOADING,this.changed();var r=this;this.loader_().then(function(n){r.data_=n,r.state=xr.LOADED,r.changed()}).catch(function(n){r.error_=n,r.state=xr.ERROR,r.changed()})}},t}(EE),Ytt=NDr;var ODr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),LDr=function(e){ODr(t,e);function t(r,n,o,i,a,u){var p=e.call(this,r,n,u)||this;return p.crossOrigin_=i,p.src_=o,p.key=o,p.image_=new Image,i!==null&&(p.image_.crossOrigin=i),p.unlisten_=null,p.tileLoadFunction_=a,p}return t.prototype.getImage=function(){return this.image_},t.prototype.setImage=function(r){this.image_=r,this.state=xr.LOADED,this.unlistenImage_(),this.changed()},t.prototype.handleImageError_=function(){this.state=xr.ERROR,this.unlistenImage_(),this.image_=PDr(),this.changed()},t.prototype.handleImageLoad_=function(){var r=this.image_;r.naturalWidth&&r.naturalHeight?this.state=xr.LOADED:this.state=xr.EMPTY,this.unlistenImage_(),this.changed()},t.prototype.load=function(){this.state==xr.ERROR&&(this.state=xr.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==xr.IDLE&&(this.state=xr.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=wie(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))},t.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},t}(EE);function PDr(){var e=gm(1,1);return e.fillStyle="rgba(0,0,0,0)",e.fillRect(0,0,1,1),e.canvas}var S1=LDr;var Ztt=.5,Td=!0;var kDr=10,Ktt=.25,RDr=function(){function e(t,r,n,o,i,a){this.sourceProj_=t,this.targetProj_=r;var u={},p=s1(this.targetProj_,this.sourceProj_);this.transformInv_=function(U){var H=U[0]+"/"+U[1];return u[H]||(u[H]=p(U)),u[H]},this.maxSourceExtent_=o,this.errorThresholdSquared_=i*i,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!o&&!!this.sourceProj_.getExtent()&&fi(o)==fi(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?fi(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?fi(this.targetProj_.getExtent()):null;var h=Dv(n),g=j6(n),x=R6(n),b=k6(n),T=this.transformInv_(h),A=this.transformInv_(g),L=this.transformInv_(x),P=this.transformInv_(b),k=kDr+(a?Math.max(0,Math.ceil(A6(nA(n)/(a*a*256*256)))):0);if(this.addQuad_(h,g,x,b,T,A,L,P,k),this.wrapsXInSource_){var q=1/0;this.triangles_.forEach(function(U,H,X){q=Math.min(q,U.source[0][0],U.source[1][0],U.source[2][0])}),this.triangles_.forEach(function(U){if(Math.max(U.source[0][0],U.source[1][0],U.source[2][0])-q>this.sourceWorldWidth_/2){var H=[[U.source[0][0],U.source[0][1]],[U.source[1][0],U.source[1][1]],[U.source[2][0],U.source[2][1]]];H[0][0]-q>this.sourceWorldWidth_/2&&(H[0][0]-=this.sourceWorldWidth_),H[1][0]-q>this.sourceWorldWidth_/2&&(H[1][0]-=this.sourceWorldWidth_),H[2][0]-q>this.sourceWorldWidth_/2&&(H[2][0]-=this.sourceWorldWidth_);var X=Math.min(H[0][0],H[1][0],H[2][0]),ee=Math.max(H[0][0],H[1][0],H[2][0]);ee-X<this.sourceWorldWidth_/2&&(U.source=H)}}.bind(this))}u={}}return e.prototype.addTriangle_=function(t,r,n,o,i,a){this.triangles_.push({source:[o,i,a],target:[t,r,n]})},e.prototype.addQuad_=function(t,r,n,o,i,a,u,p,h){var g=eA([i,a,u,p]),x=this.sourceWorldWidth_?fi(g)/this.sourceWorldWidth_:null,b=this.sourceWorldWidth_,T=this.sourceProj_.canWrapX()&&x>.5&&x<1,A=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){var L=eA([t,r,n,o]),P=fi(L)/this.targetWorldWidth_;A=P>Ktt||A}!T&&this.sourceProj_.isGlobal()&&x&&(A=x>Ktt||A)}if(!(!A&&this.maxSourceExtent_&&isFinite(g[0])&&isFinite(g[1])&&isFinite(g[2])&&isFinite(g[3])&&!iA(g,this.maxSourceExtent_))){var k=0;if(!A&&(!isFinite(i[0])||!isFinite(i[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(u[0])||!isFinite(u[1])||!isFinite(p[0])||!isFinite(p[1]))){if(h>0)A=!0;else if(k=(!isFinite(i[0])||!isFinite(i[1])?8:0)+(!isFinite(a[0])||!isFinite(a[1])?4:0)+(!isFinite(u[0])||!isFinite(u[1])?2:0)+(!isFinite(p[0])||!isFinite(p[1])?1:0),k!=1&&k!=2&&k!=4&&k!=8)return}if(h>0){if(!A){var q=[(t[0]+n[0])/2,(t[1]+n[1])/2],U=this.transformInv_(q),H=void 0;if(T){var X=(Xf(i[0],b)+Xf(u[0],b))/2;H=X-Xf(U[0],b)}else H=(i[0]+u[0])/2-U[0];var ee=(i[1]+u[1])/2-U[1],ne=H*H+ee*ee;A=ne>this.errorThresholdSquared_}if(A){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){var pe=[(r[0]+n[0])/2,(r[1]+n[1])/2],ue=this.transformInv_(pe),Ie=[(o[0]+t[0])/2,(o[1]+t[1])/2],Re=this.transformInv_(Ie);this.addQuad_(t,r,pe,Ie,i,a,ue,Re,h-1),this.addQuad_(Ie,pe,n,o,Re,ue,u,p,h-1)}else{var Te=[(t[0]+r[0])/2,(t[1]+r[1])/2],Ee=this.transformInv_(Te),Ye=[(n[0]+o[0])/2,(n[1]+o[1])/2],Qe=this.transformInv_(Ye);this.addQuad_(t,Te,Ye,o,i,Ee,Qe,p,h-1),this.addQuad_(Te,r,n,Ye,Ee,a,u,Qe,h-1)}return}}if(T){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}k&11||this.addTriangle_(t,n,o,i,u,p),k&14||this.addTriangle_(t,n,r,i,u,a),k&&(k&13||this.addTriangle_(r,o,t,a,p,i),k&7||this.addTriangle_(r,o,n,a,p,u))}},e.prototype.calculateSourceExtent=function(){var t=id();return this.triangles_.forEach(function(r,n,o){var i=r.source;rA(t,i[0]),rA(t,i[1]),rA(t,i[2])}),t},e.prototype.getTriangles=function(){return this.triangles_},e}(),Xtt=RDr;var Die={imageSmoothingEnabled:!1,msImageSmoothingEnabled:!1};var Nie,Lie=[];function Jtt(e,t,r,n,o){e.beginPath(),e.moveTo(0,0),e.lineTo(t,r),e.lineTo(n,o),e.closePath(),e.save(),e.clip(),e.fillRect(0,0,Math.max(t,n)+1,Math.max(r,o)),e.restore()}function Oie(e,t){return Math.abs(e[t*4]-210)>2||Math.abs(e[t*4+3]-.75*255)>2}function jDr(){if(Nie===void 0){var e=document.createElement("canvas").getContext("2d");e.globalCompositeOperation="lighter",e.fillStyle="rgba(210, 0, 0, 0.75)",Jtt(e,4,5,4,0),Jtt(e,4,5,0,5);var t=e.getImageData(0,0,3,3).data;Nie=Oie(t,0)||Oie(t,4)||Oie(t,8)}return Nie}function Qtt(e,t,r,n){var o=aA(r,t,e),i=pre(t,n,r),a=t.getMetersPerUnit();a!==void 0&&(i*=a);var u=e.getMetersPerUnit();u!==void 0&&(i/=u);var p=e.getExtent();if(!p||Xh(p,o)){var h=pre(e,i,o)/i;isFinite(h)&&h>0&&(i/=h)}return i}function ert(e,t,r,n){var o=Jf(r),i=Qtt(e,t,o,n);return(!isFinite(i)||i<=0)&&P6(r,function(a){return i=Qtt(e,t,a,n),isFinite(i)&&i>0}),i}function trt(e,t,r,n,o,i,a,u,p,h,g,x){var b=gm(Math.round(r*e),Math.round(r*t),Lie);if(x||zo(b,Die),p.length===0)return b.canvas;b.scale(r,r);function T(H){return Math.round(H*r)/r}b.globalCompositeOperation="lighter";var A=id();p.forEach(function(H,X,ee){M$e(A,H.extent)});var L=fi(A),P=bs(A),k=gm(Math.round(r*L/n),Math.round(r*P/n));x||zo(k,Die);var q=r/n;p.forEach(function(H,X,ee){var ne=H.extent[0]-A[0],pe=-(H.extent[3]-A[3]),ue=fi(H.extent),Ie=bs(H.extent);H.image.width>0&&H.image.height>0&&k.drawImage(H.image,h,h,H.image.width-2*h,H.image.height-2*h,ne*q,pe*q,ue*q,Ie*q)});var U=Dv(a);return u.getTriangles().forEach(function(H,X,ee){var ne=H.source,pe=H.target,ue=ne[0][0],Ie=ne[0][1],Re=ne[1][0],Te=ne[1][1],Ee=ne[2][0],Ye=ne[2][1],Qe=T((pe[0][0]-U[0])/i),qe=T(-(pe[0][1]-U[1])/i),Ue=T((pe[1][0]-U[0])/i),Ne=T(-(pe[1][1]-U[1])/i),et=T((pe[2][0]-U[0])/i),st=T(-(pe[2][1]-U[1])/i),ft=ue,Ze=Ie;ue=0,Ie=0,Re-=ft,Te-=Ze,Ee-=ft,Ye-=Ze;var tt=[[Re,Te,0,0,Ue-Qe],[Ee,Ye,0,0,et-Qe],[0,0,Re,Te,Ne-qe],[0,0,Ee,Ye,st-qe]],lt=f$e(tt);if(lt){if(b.save(),b.beginPath(),jDr()||!x){b.moveTo(Ue,Ne);for(var ze=4,ge=Qe-Ue,We=qe-Ne,Oe=0;Oe<ze;Oe++)b.lineTo(Ue+T((Oe+1)*ge/ze),Ne+T(Oe*We/(ze-1))),Oe!=ze-1&&b.lineTo(Ue+T((Oe+1)*ge/ze),Ne+T((Oe+1)*We/(ze-1)));b.lineTo(et,st)}else b.moveTo(Ue,Ne),b.lineTo(Qe,qe),b.lineTo(et,st);b.clip(),b.transform(lt[0],lt[2],lt[1],lt[3],Qe,qe),b.translate(A[0]-ft,A[3]-Ze),b.scale(n/r,-n/r),b.drawImage(k.canvas,0,0),b.restore()}}),g&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,u.getTriangles().forEach(function(H,X,ee){var ne=H.target,pe=(ne[0][0]-U[0])/i,ue=-(ne[0][1]-U[1])/i,Ie=(ne[1][0]-U[0])/i,Re=-(ne[1][1]-U[1])/i,Te=(ne[2][0]-U[0])/i,Ee=-(ne[2][1]-U[1])/i;b.beginPath(),b.moveTo(Ie,Re),b.lineTo(pe,ue),b.lineTo(Te,Ee),b.closePath(),b.stroke()}),b.restore()),b.canvas}var qDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zDr=function(e){qDr(t,e);function t(r,n,o,i,a,u,p,h,g,x,b,T){var A=e.call(this,a,xr.IDLE,{interpolate:!!T})||this;A.renderEdges_=b!==void 0?b:!1,A.pixelRatio_=p,A.gutter_=h,A.canvas_=null,A.sourceTileGrid_=n,A.targetTileGrid_=i,A.wrappedTileCoord_=u||a,A.sourceTiles_=[],A.sourcesListenerKeys_=null,A.sourceZ_=0;var L=i.getTileCoordExtent(A.wrappedTileCoord_),P=A.targetTileGrid_.getExtent(),k=A.sourceTileGrid_.getExtent(),q=P?ad(L,P):L;if(nA(q)===0)return A.state=xr.EMPTY,A;var U=r.getExtent();U&&(k?k=ad(k,U):k=U);var H=i.getResolution(A.wrappedTileCoord_[0]),X=ert(r,o,q,H);if(!isFinite(X)||X<=0)return A.state=xr.EMPTY,A;var ee=x!==void 0?x:Ztt;if(A.triangulation_=new Xtt(r,o,q,k,X*ee,H),A.triangulation_.getTriangles().length===0)return A.state=xr.EMPTY,A;A.sourceZ_=n.getZForResolution(X);var ne=A.triangulation_.calculateSourceExtent();if(k&&(r.canWrapX()?(ne[1]=Ho(ne[1],k[1],k[3]),ne[3]=Ho(ne[3],k[1],k[3])):ne=ad(ne,k)),!nA(ne))A.state=xr.EMPTY;else{for(var pe=n.getTileRangeForExtentAndZ(ne,A.sourceZ_),ue=pe.minX;ue<=pe.maxX;ue++)for(var Ie=pe.minY;Ie<=pe.maxY;Ie++){var Re=g(A.sourceZ_,ue,Ie,p);Re&&A.sourceTiles_.push(Re)}A.sourceTiles_.length===0&&(A.state=xr.EMPTY)}return A}return t.prototype.getImage=function(){return this.canvas_},t.prototype.reproject_=function(){var r=[];if(this.sourceTiles_.forEach(function(g,x,b){g&&g.getState()==xr.LOADED&&r.push({extent:this.sourceTileGrid_.getTileCoordExtent(g.tileCoord),image:g.getImage()})}.bind(this)),this.sourceTiles_.length=0,r.length===0)this.state=xr.ERROR;else{var n=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(n),i=typeof o=="number"?o:o[0],a=typeof o=="number"?o:o[1],u=this.targetTileGrid_.getResolution(n),p=this.sourceTileGrid_.getResolution(this.sourceZ_),h=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=trt(i,a,this.pixelRatio_,p,this.sourceTileGrid_.getExtent(),u,h,this.triangulation_,r,this.gutter_,this.renderEdges_,this.interpolate),this.state=xr.LOADED}this.changed()},t.prototype.load=function(){if(this.state==xr.IDLE){this.state=xr.LOADING,this.changed();var r=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();if(a==xr.IDLE||a==xr.LOADING){r++;var u=In(n,_r.CHANGE,function(p){var h=n.getState();(h==xr.LOADED||h==xr.ERROR||h==xr.EMPTY)&&(ao(u),r--,r===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(u)}}.bind(this)),r===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(n,o,i){var a=n.getState();a==xr.IDLE&&n.load()})}},t.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach(ao),this.sourcesListenerKeys_=null},t.prototype.release=function(){this.canvas_&&(Vet(this.canvas_.getContext("2d")),Lie.push(this.canvas_),this.canvas_=null),e.prototype.release.call(this)},t}(EE),Kz=zDr;var hD=34962,mD=34963,nrt=35040,SE=35044,ort=35048,irt=5121,art=5123,srt=5125,Pie=5126,rrt=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function kie(e,t){for(var r=zo({preserveDrawingBuffer:!0,antialias:!tet},t),n=rrt.length,o=0;o<n;++o)try{var i=e.getContext(rrt[o],r);if(i)return i}catch(a){}return null}var FDr={STATIC_DRAW:SE,STREAM_DRAW:nrt,DYNAMIC_DRAW:ort},UDr=function(){function e(t,r){this.array=null,this.type=t,Xr(t===hD||t===mD,62),this.usage=r!==void 0?r:FDr.STATIC_DRAW}return e.prototype.ofSize=function(t){this.array=new(Rie(this.type))(t)},e.prototype.fromArray=function(t){var r=Rie(this.type);this.array=r.from?r.from(t):new r(t)},e.prototype.fromArrayBuffer=function(t){this.array=new(Rie(this.type))(t)},e.prototype.getType=function(){return this.type},e.prototype.getArray=function(){return this.array},e.prototype.getUsage=function(){return this.usage},e.prototype.getSize=function(){return this.array?this.array.length:0},e}();function Rie(e){switch(e){case hD:return Float32Array;case mD:return Uint32Array;default:return Float32Array;}}var Xz=UDr;var BDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function urt(e,t,r){var n=r?e.LINEAR:e.NEAREST;e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n)}function VDr(e,t,r,n){urt(e,t,n),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)}function lrt(e,t,r,n,o,i){var a=e.getGL(),u,p;if(r instanceof Float32Array){u=a.FLOAT,e.getExtension("OES_texture_float");var h=e.getExtension("OES_texture_float_linear");p=h!==null}else u=a.UNSIGNED_BYTE,p=!0;urt(a,t,i&&p);var g=r.byteLength/n[1],x=1;g%8===0?x=8:g%4===0?x=4:g%2===0&&(x=2);var b;switch(o){case 1:{b=a.LUMINANCE;break}case 2:{b=a.LUMINANCE_ALPHA;break}case 3:{b=a.RGB;break}case 4:{b=a.RGBA;break}default:throw new Error("Unsupported number of bands: ".concat(o));}var T=a.getParameter(a.UNPACK_ALIGNMENT);a.pixelStorei(a.UNPACK_ALIGNMENT,x),a.texImage2D(a.TEXTURE_2D,0,b,n[0],n[1],0,b,u,r),a.pixelStorei(a.UNPACK_ALIGNMENT,T)}var IE=null;function GDr(){var e=document.createElement("canvas");e.width=1,e.height=1,IE=e.getContext("2d")}var HDr=function(e){BDr(t,e);function t(r){var n=e.call(this)||this;n.tile,n.textures=[],n.handleTileChange_=n.handleTileChange_.bind(n),n.renderSize_=Ka(r.grid.getTileSize(r.tile.tileCoord[0])),n.gutter_=r.gutter||0,n.bandCount=NaN,n.helper_=r.helper;var o=new Xz(hD,SE);return o.fromArray([0,1,1,1,1,0,0,0]),n.helper_.flushBufferData(o),n.coords=o,n.setTile(r.tile),n}return t.prototype.setTile=function(r){if(r!==this.tile)if(this.tile&&this.tile.removeEventListener(_r.CHANGE,this.handleTileChange_),this.tile=r,this.textures.length=0,this.loaded=r.getState()===xr.LOADED,this.loaded)this.uploadTile_();else{if(r instanceof S1){var n=r.getImage();n instanceof Image&&!n.crossOrigin&&(n.crossOrigin="anonymous")}r.addEventListener(_r.CHANGE,this.handleTileChange_)}},t.prototype.uploadTile_=function(){var r=this.helper_,n=r.getGL(),o=this.tile;if(o instanceof S1||o instanceof Kz){var i=n.createTexture();this.textures.push(i),this.bandCount=4,VDr(n,i,o.getImage(),o.interpolate);return}var a=o.getSize(),u=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],p=o.getData(),h=p instanceof Float32Array,g=u[0]*u[1],x=h?Float32Array:Uint8Array,b=x.BYTES_PER_ELEMENT,T=p.byteLength/u[1];this.bandCount=Math.floor(T/b/u[0]);var A=Math.ceil(this.bandCount/4);if(A===1){var i=n.createTexture();this.textures.push(i),lrt(r,i,p,u,this.bandCount,o.interpolate);return}for(var L=new Array(A),P=0;P<A;++P){var i=n.createTexture();this.textures.push(i);var k=P<A-1?4:this.bandCount%4;L[P]=new x(g*k)}for(var q=0,U=0,H=u[0]*this.bandCount,X=0;X<u[1];++X){for(var ee=0;ee<H;++ee){var ne=p[U+ee],pe=Math.floor(q/this.bandCount),ue=ee%this.bandCount,P=Math.floor(ue/4),Ie=L[P],k=Ie.length/g,Re=ue%4;Ie[pe*k+Re]=ne,++q}U+=T/b}for(var P=0;P<A;++P){var i=this.textures[P],Ie=L[P],k=Ie.length/g;lrt(r,i,Ie,u,k,o.interpolate)}},t.prototype.handleTileChange_=function(){this.tile.getState()===xr.LOADED&&(this.loaded=!0,this.uploadTile_(),this.dispatchEvent(_r.CHANGE))},t.prototype.disposeInternal=function(){var r=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(var n=0;n<this.textures.length;++n)r.deleteTexture(this.textures[n]);this.tile.removeEventListener(_r.CHANGE,this.handleTileChange_)},t.prototype.getPixelData=function(r,n){if(!this.loaded)return null;var o=this.renderSize_[0],i=this.renderSize_[1],a=this.gutter_;if(this.tile instanceof Ytt){var u=this.tile.getSize(),p=u[0],h=u[1],g=p+2*a,x=h+2*a,b=a+Math.floor(p*(r/o)),T=a+Math.floor(h*(n/i)),A=this.tile.getData();if(A instanceof DataView){var L=A.byteLength/(g*x),P=L*(T*g+b),k=A.buffer.slice(P,P+L);return new DataView(k)}var q=this.bandCount*(T*g+b);return A.slice(q,q+this.bandCount)}IE||GDr(),IE.clearRect(0,0,1,1);var U=this.tile.getImage(),H=U.width,X=U.height,ee=H-2*a,ne=X-2*a,pe=a+Math.floor(ee*(r/o)),ue=a+Math.floor(ne*(n/i)),Ie;try{IE.drawImage(U,pe,ue,1,1,0,0,1,1),Ie=IE.getImageData(0,0,1,1).data}catch(Re){return IE=null,null}return Ie},t}(uf),crt=HDr;var gD={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};var WDr=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,$Dr=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`,YDr=function(){function e(t){this.gl_=t.webGlContext;var r=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=r.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=r.createFramebuffer();var n=r.createShader(r.VERTEX_SHADER);r.shaderSource(n,t.vertexShader||WDr),r.compileShader(n);var o=r.createShader(r.FRAGMENT_SHADER);r.shaderSource(o,t.fragmentShader||$Dr),r.compileShader(o),this.renderTargetProgram_=r.createProgram(),r.attachShader(this.renderTargetProgram_,n),r.attachShader(this.renderTargetProgram_,o),r.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=r.createBuffer();var i=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.bufferData(r.ARRAY_BUFFER,new Float32Array(i),r.STATIC_DRAW),this.renderTargetAttribLocation_=r.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=r.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(function(a){this.uniforms_.push({value:t.uniforms[a],location:r.getUniformLocation(this.renderTargetProgram_,a)})}.bind(this))}return e.prototype.getGL=function(){return this.gl_},e.prototype.init=function(t){var r=this.getGL(),n=[r.drawingBufferWidth*this.scaleRatio_,r.drawingBufferHeight*this.scaleRatio_];if(r.bindFramebuffer(r.FRAMEBUFFER,this.getFrameBuffer()),r.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;var o=0,i=r.RGBA,a=0,u=r.RGBA,p=r.UNSIGNED_BYTE,h=null;r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),r.texImage2D(r.TEXTURE_2D,o,i,n[0],n[1],a,u,p,h),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,this.renderTargetTexture_,0)}},e.prototype.apply=function(t,r,n,o){var i=this.getGL(),a=t.size;if(i.bindFramebuffer(i.FRAMEBUFFER,r?r.getFrameBuffer():null),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.renderTargetTexture_),!r){var u=$i(i.canvas);if(!t.renderTargets[u]){var p=i.getContextAttributes();p&&p.preserveDrawingBuffer&&(i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),t.renderTargets[u]=!0}}i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.viewport(0,0,i.drawingBufferWidth,i.drawingBufferHeight),i.bindBuffer(i.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),i.useProgram(this.renderTargetProgram_),i.enableVertexAttribArray(this.renderTargetAttribLocation_),i.vertexAttribPointer(this.renderTargetAttribLocation_,2,i.FLOAT,!1,0,0),i.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),i.uniform1i(this.renderTargetTextureLocation_,0);var h=t.layerStatesArray[t.layerIndex].opacity;i.uniform1f(this.renderTargetOpacityLocation_,h),this.applyUniforms(t),n&&n(i,t),i.drawArrays(i.TRIANGLES,0,6),o&&o(i,t)},e.prototype.getFrameBuffer=function(){return this.frameBuffer_},e.prototype.applyUniforms=function(t){var r=this.getGL(),n,o=1;this.uniforms_.forEach(function(i){if(n=typeof i.value=="function"?i.value(t):i.value,n instanceof HTMLCanvasElement||n instanceof ImageData)i.texture||(i.texture=r.createTexture()),r.activeTexture(r["TEXTURE".concat(o)]),r.bindTexture(r.TEXTURE_2D,i.texture),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),n instanceof ImageData?r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,n.width,n.height,0,r.UNSIGNED_BYTE,new Uint8Array(n.data)):r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,n),r.uniform1i(i.location,o++);else if(Array.isArray(n))switch(n.length){case 2:r.uniform2f(i.location,n[0],n[1]);return;case 3:r.uniform3f(i.location,n[0],n[1],n[2]);return;case 4:r.uniform4f(i.location,n[0],n[1],n[2],n[3]);return;default:return;}else typeof n=="number"&&r.uniform1f(i.location,n)})},e}(),jie=YDr;function Jz(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function TE(e,t){return e[0]=t[0],e[1]=t[1],e[4]=t[2],e[5]=t[3],e[12]=t[4],e[13]=t[5],e}var ZDr=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var vD={PROJECTION_MATRIX:"u_projectionMatrix",OFFSET_SCALE_MATRIX:"u_offsetScaleMatrix",OFFSET_ROTATION_MATRIX:"u_offsetRotateMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution"},ME={UNSIGNED_BYTE:irt,UNSIGNED_SHORT:art,UNSIGNED_INT:srt,FLOAT:Pie},Qz={};function frt(e){return"shared/"+e}var prt=0;function KDr(){var e="unique/"+prt;return prt+=1,e}function XDr(e){var t=Qz[e];if(!t){var r=document.createElement("canvas");r.style.position="absolute",r.style.left="0",t={users:0,canvas:r},Qz[e]=t}return t.users+=1,t.canvas}function JDr(e){var t=Qz[e];if(t&&(t.users-=1,!(t.users>0))){var r=t.canvas,n=kie(r),o=n.getExtension("WEBGL_lose_context");o&&o.loseContext(),delete Qz[e]}}var QDr=function(e){ZDr(t,e);function t(r){var n=e.call(this)||this,o=r||{};n.boundHandleWebGLContextLost_=n.handleWebGLContextLost.bind(n),n.boundHandleWebGLContextRestored_=n.handleWebGLContextRestored.bind(n),n.canvasCacheKey_=o.canvasCacheKey?frt(o.canvasCacheKey):KDr(),n.canvas_=XDr(n.canvasCacheKey_),n.gl_=kie(n.canvas_),n.bufferCache_={},n.extensionCache_={},n.currentProgram_=null,n.canvas_.addEventListener(gD.LOST,n.boundHandleWebGLContextLost_),n.canvas_.addEventListener(gD.RESTORED,n.boundHandleWebGLContextRestored_),n.offsetRotateMatrix_=ff(),n.offsetScaleMatrix_=ff(),n.tmpMat4_=Jz(),n.uniformLocations_={},n.attribLocations_={},n.uniforms_=[],o.uniforms&&n.setUniforms(o.uniforms);var i=n.getGL();return n.postProcessPasses_=o.postProcesses?o.postProcesses.map(function(a){return new jie({webGlContext:i,scaleRatio:a.scaleRatio,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:a.uniforms})}):[new jie({webGlContext:i})],n.shaderCompileErrors_=null,n.startTime_=Date.now(),n}return t.prototype.setUniforms=function(r){this.uniforms_=[];for(var n in r)this.uniforms_.push({name:n,value:r[n]});this.uniformLocations_={}},t.prototype.canvasCacheKeyMatches=function(r){return this.canvasCacheKey_===frt(r)},t.prototype.getExtension=function(r){if(r in this.extensionCache_)return this.extensionCache_[r];var n=this.gl_.getExtension(r);return this.extensionCache_[r]=n,n},t.prototype.bindBuffer=function(r){var n=this.getGL(),o=$i(r),i=this.bufferCache_[o];if(!i){var a=n.createBuffer();i={buffer:r,webGlBuffer:a},this.bufferCache_[o]=i}n.bindBuffer(r.getType(),i.webGlBuffer)},t.prototype.flushBufferData=function(r){var n=this.getGL();this.bindBuffer(r),n.bufferData(r.getType(),r.getArray(),r.getUsage())},t.prototype.deleteBuffer=function(r){var n=this.getGL(),o=$i(r),i=this.bufferCache_[o];i&&!n.isContextLost()&&n.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[o]},t.prototype.disposeInternal=function(){this.canvas_.removeEventListener(gD.LOST,this.boundHandleWebGLContextLost_),this.canvas_.removeEventListener(gD.RESTORED,this.boundHandleWebGLContextRestored_),JDr(this.canvasCacheKey_),delete this.gl_,delete this.canvas_},t.prototype.prepareDraw=function(r,n){var o=this.getGL(),i=this.getCanvas(),a=r.size,u=r.pixelRatio;i.width=a[0]*u,i.height=a[1]*u,i.style.width=a[0]+"px",i.style.height=a[1]+"px",o.useProgram(this.currentProgram_);for(var p=this.postProcessPasses_.length-1;p>=0;p--)this.postProcessPasses_[p].init(r);o.bindTexture(o.TEXTURE_2D,null),o.clearColor(0,0,0,0),o.clear(o.COLOR_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,n?o.ZERO:o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.prepareDrawToRenderTarget=function(r,n,o){var i=this.getGL(),a=n.getSize();i.bindFramebuffer(i.FRAMEBUFFER,n.getFramebuffer()),i.viewport(0,0,a[0],a[1]),i.bindTexture(i.TEXTURE_2D,n.getTexture()),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,o?i.ZERO:i.ONE_MINUS_SRC_ALPHA),i.useProgram(this.currentProgram_),this.applyFrameState(r),this.applyUniforms(r)},t.prototype.drawElements=function(r,n){var o=this.getGL();this.getExtension("OES_element_index_uint");var i=o.UNSIGNED_INT,a=4,u=n-r,p=r*a;o.drawElements(o.TRIANGLES,u,i,p)},t.prototype.finalizeDraw=function(r,n,o){for(var i=0,a=this.postProcessPasses_.length;i<a;i++)i===a-1?this.postProcessPasses_[i].apply(r,null,n,o):this.postProcessPasses_[i].apply(r,this.postProcessPasses_[i+1])},t.prototype.getCanvas=function(){return this.canvas_},t.prototype.getGL=function(){return this.gl_},t.prototype.applyFrameState=function(r){var n=r.size,o=r.viewState.rotation,i=gE(this.offsetScaleMatrix_);oD(i,2/n[0],2/n[1]);var a=gE(this.offsetRotateMatrix_);o!==0&&Pz(a,-o),this.setUniformMatrixValue(vD.OFFSET_SCALE_MATRIX,TE(this.tmpMat4_,i)),this.setUniformMatrixValue(vD.OFFSET_ROTATION_MATRIX,TE(this.tmpMat4_,a)),this.setUniformFloatValue(vD.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(vD.ZOOM,r.viewState.zoom),this.setUniformFloatValue(vD.RESOLUTION,r.viewState.resolution)},t.prototype.applyUniforms=function(r){var n=this.getGL(),o,i=0;this.uniforms_.forEach(function(a){if(o=typeof a.value=="function"?a.value(r):a.value,o instanceof HTMLCanvasElement||o instanceof HTMLImageElement||o instanceof ImageData){a.texture||(a.prevValue=void 0,a.texture=n.createTexture()),n.activeTexture(n["TEXTURE".concat(i)]),n.bindTexture(n.TEXTURE_2D,a.texture),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE);var u=!(o instanceof HTMLImageElement)||o.complete;u&&a.prevValue!==o&&(a.prevValue=o,n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,o)),n.uniform1i(this.getUniformLocation(a.name),i++)}else if(Array.isArray(o)&&o.length===6)this.setUniformMatrixValue(a.name,TE(this.tmpMat4_,o));else if(Array.isArray(o)&&o.length<=4)switch(o.length){case 2:n.uniform2f(this.getUniformLocation(a.name),o[0],o[1]);return;case 3:n.uniform3f(this.getUniformLocation(a.name),o[0],o[1],o[2]);return;case 4:n.uniform4f(this.getUniformLocation(a.name),o[0],o[1],o[2],o[3]);return;default:return;}else typeof o=="number"&&n.uniform1f(this.getUniformLocation(a.name),o)}.bind(this))},t.prototype.useProgram=function(r){if(r==this.currentProgram_)return!1;var n=this.getGL();return n.useProgram(r),this.currentProgram_=r,this.uniformLocations_={},this.attribLocations_={},!0},t.prototype.compileShader=function(r,n){var o=this.getGL(),i=o.createShader(n);return o.shaderSource(i,r),o.compileShader(i),i},t.prototype.getProgram=function(r,n){var o=this.getGL(),i=this.compileShader(r,o.FRAGMENT_SHADER),a=this.compileShader(n,o.VERTEX_SHADER),u=o.createProgram();if(o.attachShader(u,i),o.attachShader(u,a),o.linkProgram(u),!o.getShaderParameter(i,o.COMPILE_STATUS)){var p="Fragment shader compliation failed: ".concat(o.getShaderInfoLog(i));throw new Error(p)}if(o.deleteShader(i),!o.getShaderParameter(a,o.COMPILE_STATUS)){var p="Vertex shader compilation failed: ".concat(o.getShaderInfoLog(a));throw new Error(p)}if(o.deleteShader(a),!o.getProgramParameter(u,o.LINK_STATUS)){var p="GL program linking failed: ".concat(o.getShaderInfoLog(a));throw new Error(p)}return u},t.prototype.getUniformLocation=function(r){return this.uniformLocations_[r]===void 0&&(this.uniformLocations_[r]=this.getGL().getUniformLocation(this.currentProgram_,r)),this.uniformLocations_[r]},t.prototype.getAttributeLocation=function(r){return this.attribLocations_[r]===void 0&&(this.attribLocations_[r]=this.getGL().getAttribLocation(this.currentProgram_,r)),this.attribLocations_[r]},t.prototype.makeProjectionTransform=function(r,n){var o=r.size,i=r.viewState.rotation,a=r.viewState.resolution,u=r.viewState.center;return gE(n),Zv(n,0,0,2/(a*o[0]),2/(a*o[1]),-i,-u[0],-u[1]),n},t.prototype.setUniformFloatValue=function(r,n){this.getGL().uniform1f(this.getUniformLocation(r),n)},t.prototype.setUniformFloatVec4=function(r,n){this.getGL().uniform4fv(this.getUniformLocation(r),n)},t.prototype.setUniformMatrixValue=function(r,n){this.getGL().uniformMatrix4fv(this.getUniformLocation(r),!1,n)},t.prototype.enableAttributeArray_=function(r,n,o,i,a){var u=this.getAttributeLocation(r);u<0||(this.getGL().enableVertexAttribArray(u),this.getGL().vertexAttribPointer(u,n,o,!1,i,a))},t.prototype.enableAttributes=function(r){for(var n=e4r(r),o=0,i=0;i<r.length;i++){var a=r[i];this.enableAttributeArray_(a.name,a.size,a.type||Pie,n,o),o+=a.size*drt(a.type)}},t.prototype.handleWebGLContextLost=function(){Jc(this.bufferCache_),this.currentProgram_=null},t.prototype.handleWebGLContextRestored=function(){},t.prototype.createTexture=function(r,n,o){var i=this.getGL(),a=o||i.createTexture(),u=0,p=i.RGBA,h=0,g=i.RGBA,x=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,a),n?i.texImage2D(i.TEXTURE_2D,u,p,g,x,n):i.texImage2D(i.TEXTURE_2D,u,p,r[0],r[1],h,g,x,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),a},t}(Hv);function e4r(e){for(var t=0,r=0;r<e.length;r++){var n=e[r];t+=n.size*drt(n.type)}return t}function drt(e){switch(e){case ME.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case ME.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case ME.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case ME.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT;}}var hrt=QDr;var t4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();var r4r=function(e){t4r(t,e);function t(r,n){var o=e.call(this,r)||this,i=n||{};return o.inversePixelTransform_=ff(),o.pixelContext_=null,o.postProcesses_=i.postProcesses,o.uniforms_=i.uniforms,o.helper,r.addChangeListener(Hn.MAP,o.removeHelper.bind(o)),o.dispatchPreComposeEvent=o.dispatchPreComposeEvent.bind(o),o.dispatchPostComposeEvent=o.dispatchPostComposeEvent.bind(o),o}return t.prototype.dispatchPreComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(sl.PRECOMPOSE)){var i=new wE(sl.PRECOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.dispatchPostComposeEvent=function(r,n){var o=this.getLayer();if(o.hasListener(sl.POSTCOMPOSE)){var i=new wE(sl.POSTCOMPOSE,void 0,n,r);o.dispatchEvent(i)}},t.prototype.reset=function(r){this.uniforms_=r.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)},t.prototype.removeHelper=function(){this.helper&&(this.helper.dispose(),delete this.helper)},t.prototype.prepareFrame=function(r){if(this.getLayer().getRenderSource()){for(var n=!0,o=-1,i=void 0,a=0,u=r.layerStatesArray.length;a<u;a++){var p=r.layerStatesArray[a].layer,h=p.getRenderer();if(!(h instanceof t)){n=!0;continue}var g=p.getClassName();if((n||g!==i)&&(o+=1,n=!1),i=g,h===this)break}var x="map/"+r.mapId+"/group/"+o;(!this.helper||!this.helper.canvasCacheKeyMatches(x))&&(this.removeHelper(),this.helper=new hrt({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:x}),i&&(this.helper.getCanvas().className=i),this.afterHelperCreated())}return this.prepareFrameInternal(r)},t.prototype.afterHelperCreated=function(){},t.prototype.prepareFrameInternal=function(r){return!0},t.prototype.disposeInternal=function(){this.removeHelper(),e.prototype.disposeInternal.call(this)},t.prototype.dispatchRenderEvent_=function(r,n,o){var i=this.getLayer();if(i.hasListener(r)){Zv(this.inversePixelTransform_,0,0,o.pixelRatio,-o.pixelRatio,0,0,-o.size[1]);var a=new wE(r,this.inversePixelTransform_,o,n);i.dispatchEvent(a)}},t.prototype.preRender=function(r,n){this.dispatchRenderEvent_(sl.PRERENDER,r,n)},t.prototype.postRender=function(r,n){this.dispatchRenderEvent_(sl.POSTRENDER,r,n)},t.prototype.getDataAtPixel=function(r,n,o){var i=Yv([n.pixelRatio,0,0,n.pixelRatio,0,0],r.slice()),a=this.helper.getGL();if(!a)return null;var u=this.getLayer(),p=u.getExtent();if(p){var h=Yv(n.pixelToCoordinateTransform,r.slice());if(!Xh(p,h))return null}var g=a.getContextAttributes();if(!g||!g.preserveDrawingBuffer)return new Uint8Array;var x=Math.round(i[0]),b=Math.round(i[1]),T=this.pixelContext_;if(!T){var A=document.createElement("canvas");A.width=1,A.height=1,T=A.getContext("2d"),this.pixelContext_=T}T.clearRect(0,0,1,1);var L;try{T.drawImage(a.canvas,x,b,1,1,0,0,1,1),L=T.getImageData(0,0,1,1).data}catch(P){return L}return L[3]===0?null:L},t}(wtt);var mrt=r4r;function CE(e,t,r,n){return n!==void 0?(n[0]=e,n[1]=t,n[2]=r,n):[e,t,r]}function I1(e,t,r){return e+"/"+t+"/"+r}function ey(e){return I1(e[0],e[1],e[2])}function grt(e){return e.split("/").map(Number)}function vrt(e){return(e[1]<<e[0])+e[2]}function yrt(e,t){var r=e[0],n=e[1],o=e[2];if(t.getMinZoom()>r||r>t.getMaxZoom())return!1;var i=t.getFullTileRange(r);return i?i.containsXY(n,o):!0}var n4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),rn={TILE_TEXTURE_ARRAY:"u_tileTextures",TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY",RENDER_EXTENT:"u_renderExtent",RESOLUTION:"u_resolution",ZOOM:"u_zoom"},yD={TEXTURE_COORD:"a_textureCoord"},o4r=[{name:yD.TEXTURE_COORD,size:2,type:ME.FLOAT}],i4r={};function a4r(e){return 2*(1-1/(e+1))-1}function _rt(e,t,r){r in e||(e[r]=[]),e[r].push(t)}function qie(e,t){var r=e.layerStatesArray[e.layerIndex];r.extent&&(t=ad(t,Ov(r.extent,e.viewState.projection)));var n=r.layer.getRenderSource();if(!n.getWrapX()){var o=n.getTileGridForProjection(e.viewState.projection).getExtent();o&&(t=ad(t,o))}return t}function zie(e,t){return"".concat(e.getKey(),",").concat(ey(t))}var s4r=function(e){n4r(t,e);function t(r,n){var o=e.call(this,r,{uniforms:n.uniforms})||this;o.renderComplete=!1,o.tileTransform_=ff(),o.tempMat4_=Jz(),o.tempTileRange_=new Zz(0,0,0,0),o.tempTileCoord_=CE(0,0,0),o.tempSize_=[0,0],o.program_,o.vertexShader_=n.vertexShader,o.fragmentShader_=n.fragmentShader,o.indices_=new Xz(mD,SE),o.indices_.fromArray([0,1,3,1,2,3]);var i=n.cacheSize!==void 0?n.cacheSize:512;return o.tileTextureCache_=new Yz(i),o.paletteTextures_=n.paletteTextures||[],o.frameState_=null,o}return t.prototype.reset=function(r){e.prototype.reset.call(this,{uniforms:r.uniforms}),this.vertexShader_=r.vertexShader,this.fragmentShader_=r.fragmentShader,this.paletteTextures_=r.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))},t.prototype.afterHelperCreated=function(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)},t.prototype.isDrawableTile_=function(r){var n=this.getLayer(),o=r.getState(),i=n.getUseInterimTilesOnError();return o==xr.LOADED||o==xr.EMPTY||o==xr.ERROR&&!i},t.prototype.prepareFrameInternal=function(r){var n=this.getLayer(),o=n.getRenderSource();return!o||i1(qie(r,r.extent))?!1:o.getState()==="ready"},t.prototype.enqueueTiles=function(r,n,o,i){var a=r.viewState,u=this.getLayer(),p=u.getRenderSource(),h=p.getTileGridForProjection(a.projection),g=p.getGutterForProjection(a.projection),x=$i(p);x in r.wantedTiles||(r.wantedTiles[x]={});for(var b=r.wantedTiles[x],T=this.tileTextureCache_,A=Math.max(o-u.getPreload(),h.getMinZoom(),u.getMinZoom()),L=o;L>=A;--L)for(var P=h.getTileRangeForExtentAndZ(n,L,this.tempTileRange_),k=h.getResolution(L),q=P.minX;q<=P.maxX;++q)for(var U=P.minY;U<=P.maxY;++U){var H=CE(L,q,U,this.tempTileCoord_),X=zie(p,H),ee=void 0,ne=void 0;if(T.containsKey(X)&&(ee=T.get(X),ne=ee.tile),!ee||ee.tile.key!==p.getKey())if(ne=p.getTile(L,q,U,r.pixelRatio,a.projection),!ee)ee=new crt({tile:ne,grid:h,helper:this.helper,gutter:g}),T.set(X,ee);else if(this.isDrawableTile_(ne))ee.setTile(ne);else{var pe=ne.getInterimTile();ee.setTile(pe)}_rt(i,ee,L);var ue=ne.getKey();b[ue]=!0,ne.getState()===xr.IDLE&&(r.tileQueue.isKeyQueued(ue)||r.tileQueue.enqueue([ne,x,h.getTileCoordCenter(H),k]))}},t.prototype.renderFrame=function(r){this.frameState_=r,this.renderComplete=!0;var n=this.helper.getGL();this.preRender(n,r);var o=r.viewState,i=this.getLayer(),a=i.getRenderSource(),u=a.getTileGridForProjection(o.projection),p=a.getGutterForProjection(o.projection),h=qie(r,r.extent),g=u.getZForResolution(o.resolution,a.zDirection),x={};if(r.nextExtent){var b=u.getZForResolution(o.nextResolution,a.zDirection),T=qie(r,r.nextExtent);this.enqueueTiles(r,T,b,x)}this.enqueueTiles(r,h,g,x);for(var A={},L=$i(this),P=r.time,k=!1,q=x[g],U=0,H=q.length;U<H;++U){var X=q[U],ee=X.tile,ne=ee.tileCoord;if(X.loaded){var pe=ee.getAlpha(L,P);if(pe===1){ee.endTransition(L);continue}k=!0;var ue=ey(ne);A[ue]=pe}this.renderComplete=!1;var Ie=this.findAltTiles_(u,ne,g+1,x);if(!Ie)for(var Re=u.getMinZoom(),Te=g-1;Te>=Re;--Te){var Ee=this.findAltTiles_(u,ne,Te,x);if(Ee)break}}this.helper.useProgram(this.program_),this.helper.prepareDraw(r,!k);for(var Ye=Object.keys(x).map(Number).sort(nD),Qe=o.center[0],qe=o.center[1],Ue=0,Ne=Ye.length;Ue<Ne;++Ue)for(var et=Ye[Ue],st=u.getResolution(et),ft=Ka(u.getTileSize(et),this.tempSize_),Ze=u.getOrigin(et),tt=ft[0]+2*p,lt=ft[1]+2*p,ze=tt/lt,ge=(Qe-Ze[0])/(ft[0]*st),We=(Ze[1]-qe)/(ft[1]*st),Oe=o.resolution/st,at=a4r(et),ot=x[et],U=0,H=ot.length;U<H;++U){var X=ot[U];if(X.loaded){var ee=X.tile,ne=ee.tileCoord,ue=ey(ne),Pt=ne[1],Mt=ne[2];gE(this.tileTransform_),oD(this.tileTransform_,2/(r.size[0]*Oe/tt),-2/(r.size[1]*Oe/tt)),Pz(this.tileTransform_,o.rotation),oD(this.tileTransform_,1,1/ze),aet(this.tileTransform_,(ft[0]*(Pt-ge)-p)/tt,(ft[1]*(Mt-We)-p)/lt),this.helper.setUniformMatrixValue(rn.TILE_TRANSFORM,TE(this.tempMat4_,this.tileTransform_)),this.helper.bindBuffer(X.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(o4r);for(var Nt=0;Nt<X.textures.length;){var Ae="TEXTURE"+Nt,Lt="".concat(rn.TILE_TEXTURE_ARRAY,"[").concat(Nt,"]");n.activeTexture(n[Ae]),n.bindTexture(n.TEXTURE_2D,X.textures[Nt]),n.uniform1i(this.helper.getUniformLocation(Lt),Nt),++Nt}for(var Wt=0;Wt<this.paletteTextures_.length;++Wt){var Ct=this.paletteTextures_[Wt];n.activeTexture(n["TEXTURE"+Nt]);var ce=Ct.getTexture(n);n.bindTexture(n.TEXTURE_2D,ce),n.uniform1i(this.helper.getUniformLocation(Ct.name),Nt),++Nt}var pe=ue in A?A[ue]:1;pe<1&&(r.animate=!0),this.helper.setUniformFloatValue(rn.TRANSITION_ALPHA,pe),this.helper.setUniformFloatValue(rn.DEPTH,at),this.helper.setUniformFloatValue(rn.TEXTURE_PIXEL_WIDTH,tt),this.helper.setUniformFloatValue(rn.TEXTURE_PIXEL_HEIGHT,lt),this.helper.setUniformFloatValue(rn.TEXTURE_RESOLUTION,st),this.helper.setUniformFloatValue(rn.TEXTURE_ORIGIN_X,Ze[0]+Pt*ft[0]*st-p*st),this.helper.setUniformFloatValue(rn.TEXTURE_ORIGIN_Y,Ze[1]-Mt*ft[1]*st+p*st);var Fe=h;p>0&&(Fe=u.getTileCoordExtent(ne),ad(Fe,h,Fe)),this.helper.setUniformFloatVec4(rn.RENDER_EXTENT,Fe),this.helper.setUniformFloatValue(rn.RESOLUTION,o.resolution),this.helper.setUniformFloatValue(rn.ZOOM,o.zoom),this.helper.drawElements(0,this.indices_.getSize())}}this.helper.finalizeDraw(r,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);for(var Be=this.helper.getCanvas(),mt=this.tileTextureCache_;mt.canExpireCache();){var X=mt.pop();X.dispose()}var yt=function(gt,_t){a.expireCache(_t.viewState.projection,i4r)};return r.postRenderFunctions.push(yt),this.postRender(n,r),Be},t.prototype.getData=function(r){var n=this.helper.getGL();if(!n)return null;var o=this.frameState_;if(!o)return null;var i=this.getLayer(),a=Yv(o.pixelToCoordinateTransform,r.slice()),u=o.viewState,p=i.getExtent();if(p&&!Xh(Ov(p,u.projection),a))return null;var h=i.getSources(eA([a]),u.resolution),g,x,b;for(g=h.length-1;g>=0;--g)if(x=h[g],x.getState()==="ready"){if(b=x.getTileGridForProjection(u.projection),x.getWrapX())break;var T=b.getExtent();if(!T||Xh(T,a))break}if(g<0)return null;for(var A=this.tileTextureCache_,L=b.getZForResolution(u.resolution);L>=b.getMinZoom();--L){var P=b.getTileCoordForCoordAndZ(a,L),k=zie(x,P);if(A.containsKey(k)){var q=A.get(k);if(q.loaded){var U=b.getOrigin(L),H=Ka(b.getTileSize(L)),X=b.getResolution(L),ee=(a[0]-U[0])/X-P[1]*H[0],ne=(U[1]-a[1])/X-P[2]*H[1];return q.getPixelData(ee,ne)}}}return null},t.prototype.findAltTiles_=function(r,n,o,i){var a=r.getTileRangeForTileCoordAndZ(n,o,this.tempTileRange_);if(!a)return!1;for(var u=!0,p=this.tileTextureCache_,h=this.getLayer().getRenderSource(),g=a.minX;g<=a.maxX;++g)for(var x=a.minY;x<=a.maxY;++x){var b=zie(h,[o,g,x]),T=!1;if(p.containsKey(b)){var A=p.get(b);A.loaded&&(_rt(i,A,o),T=!0)}T||(u=!1)}return u},t.prototype.removeHelper=function(){if(this.helper){var r=this.tileTextureCache_;r.forEach(function(n){return n.dispose()}),r.clear()}e.prototype.removeHelper.call(this)},t.prototype.disposeInternal=function(){var r=this.helper;if(r){var n=r.getGL();n.deleteProgram(this.program_),delete this.program_,r.deleteBuffer(this.indices_)}e.prototype.disposeInternal.call(this),delete this.indices_,delete this.tileTextureCache_,delete this.frameState_},t}(mrt),xrt=s4r;var l4r=function(){function e(t,r){this.name=t,this.data=r,this.texture_=null}return e.prototype.getTexture=function(t){if(!this.texture_){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=r}return this.texture_},e}(),brt=l4r;var mr={NUMBER:1,STRING:2,COLOR:4,BOOLEAN:8,NUMBER_ARRAY:16,ANY:31,NONE:0},xn={};function Md(e){if(typeof e=="number")return mr.NUMBER;if(typeof e=="boolean")return mr.BOOLEAN;if(typeof e=="string")return xtt(e)?mr.COLOR|mr.STRING:mr.STRING;if(!Array.isArray(e))throw new Error("Unhandled value type: ".concat(JSON.stringify(e)));var t=e,r=t.every(function(o){return typeof o=="number"});if(r)return t.length===3||t.length===4?mr.COLOR|mr.NUMBER_ARRAY:mr.NUMBER_ARRAY;if(typeof t[0]!="string")throw new Error("Expected an expression operator but received: ".concat(JSON.stringify(t)));var n=xn[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.getReturnType(t.slice(1))}function u4r(e){return A6(e)%1===0}function e8(e){var t=e.toString();return t.indexOf(".")===-1?t+".0":t}function wrt(e){if(e.length<2||e.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return"vec".concat(e.length,"(").concat(e.map(e8).join(", "),")")}function c4r(e){var t=_tt(e).slice();return t.length<4&&t.push(1),wrt(t.map(function(r,n){return n<3?r/255:r}))}function Uie(e,t){return e.stringLiteralsMap[t]===void 0&&(e.stringLiteralsMap[t]=Object.keys(e.stringLiteralsMap).length),e.stringLiteralsMap[t]}function f4r(e,t){return e8(Uie(e,t))}function wr(e,t,r){if(Array.isArray(t)&&typeof t[0]=="string"){var n=xn[t[0]];if(n===void 0)throw new Error("Unrecognized expression operator: ".concat(JSON.stringify(t)));return n.toGlsl(e,t.slice(1),r)}var o=Md(t);if((o&mr.NUMBER)>0)return e8(t);if((o&mr.BOOLEAN)>0)return t.toString();if((o&mr.STRING)>0&&(r===void 0||r==mr.STRING))return f4r(e,t.toString());if((o&mr.COLOR)>0&&(r===void 0||r==mr.COLOR))return c4r(t);if((o&mr.NUMBER_ARRAY)>0)return wrt(t);throw new Error("Unexpected expression ".concat(t," (expected type ").concat(r,")"))}function Ert(e){if(!(Md(e)&mr.NUMBER))throw new Error("A numeric value was expected, got ".concat(JSON.stringify(e)," instead"))}function Ki(e){for(var t=0;t<e.length;t++)Ert(e[t])}function Srt(e){if(!(Md(e)&mr.STRING))throw new Error("A string value was expected, got ".concat(JSON.stringify(e)," instead"))}function Bie(e){if(!(Md(e)&mr.BOOLEAN))throw new Error("A boolean value was expected, got ".concat(JSON.stringify(e)," instead"))}function ni(e,t){if(e.length!==t)throw new Error("Exactly ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function ty(e,t){if(e.length<t)throw new Error("At least ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function t8(e,t){if(e.length>t)throw new Error("At most ".concat(t," arguments were expected, got ").concat(e.length," instead"))}function Irt(e){if(e.length%2!==0)throw new Error("An even amount of arguments was expected, got ".concat(e," instead"))}function p4r(e){if(e.length%2===0)throw new Error("An odd amount of arguments was expected, got ".concat(e," instead"))}function Vie(e,t){if(!u4r(t))throw new Error("Could not infer only one type from the following expression: ".concat(JSON.stringify(e)))}xn.get={getReturnType:function(e){return mr.ANY},toGlsl:function(e,t){ni(t,1),Srt(t[0]);var r=t[0].toString();e.attributes.indexOf(r)===-1&&e.attributes.push(r);var n=e.inFragmentShader?"v_":"a_";return n+r}};function Gie(e){return"u_var_"+e}xn.var={getReturnType:function(e){return mr.ANY},toGlsl:function(e,t){ni(t,1),Srt(t[0]);var r=t[0].toString();return e.variables.indexOf(r)===-1&&e.variables.push(r),Gie(r)}};var Hie="u_paletteTextures";xn.palette={getReturnType:function(e){return mr.COLOR},toGlsl:function(e,t){ni(t,2),Ert(t[0]);var r=wr(e,t[0]),n=t[1];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");for(var o=n.length,i=new Uint8Array(o*4),a=0;a<o;a++){var u=n[a],p=void 0;if(typeof u=="string")p=_ie(u);else{if(!Array.isArray(u))throw new Error("The second argument of palette must be an array of strings or colors");var h=u.length;if(h===4)p=u;else{if(h!==3)throw new Error("Expected palette color to have 3 or 4 values, got ".concat(h));p=[u[0],u[1],u[2],1]}}var g=a*4;i[g]=p[0],i[g+1]=p[1],i[g+2]=p[2],i[g+3]=p[3]*255}e.paletteTextures||(e.paletteTextures=[]);var x="".concat(Hie,"[").concat(e.paletteTextures.length,"]"),b=new brt(x,i);return e.paletteTextures.push(b),"texture2D(".concat(x,", vec2((").concat(r," + 0.5) / ").concat(o,".0, 0.5))")}};var Fie="getBandValue";xn.band={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){ty(t,1),t8(t,3);var r=t[0];if(!(Fie in e.functions)){for(var n="",o=e.bandCount||1,i=0;i<o;i++){var a=Math.floor(i/4),u=i%4;u===o-1&&u===1&&(u=3);var p="".concat(rn.TILE_TEXTURE_ARRAY,"[").concat(a,"]");n+=`
          if (band == `.concat(i+1,`.0) {
            return texture2D(`).concat(p,", v_textureCoord + vec2(dx, dy))[").concat(u,`];
          }
        `)}e.functions[Fie]=`
        float getBandValue(float band, float xOffset, float yOffset) {
          float dx = xOffset / `.concat(rn.TEXTURE_PIXEL_WIDTH,`;
          float dy = yOffset / `).concat(rn.TEXTURE_PIXEL_HEIGHT,`;
          `).concat(n,`
        }
      `)}var h=wr(e,r),g=wr(e,t[1]||0),x=wr(e,t[2]||0);return"".concat(Fie,"(").concat(h,", ").concat(g,", ").concat(x,")")}};xn.time={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,0),"u_time"}};xn.zoom={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,0),"u_zoom"}};xn.resolution={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,0),"u_resolution"}};xn["*"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," * ").concat(wr(e,t[1]),")")}};xn["/"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," / ").concat(wr(e,t[1]),")")}};xn["+"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," + ").concat(wr(e,t[1]),")")}};xn["-"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," - ").concat(wr(e,t[1]),")")}};xn.clamp={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){ni(t,3),Ki(t);var r=wr(e,t[1]),n=wr(e,t[2]);return"clamp(".concat(wr(e,t[0]),", ").concat(r,", ").concat(n,")")}};xn["%"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"mod(".concat(wr(e,t[0]),", ").concat(wr(e,t[1]),")")}};xn["^"]={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,2),Ki(t),"pow(".concat(wr(e,t[0]),", ").concat(wr(e,t[1]),")")}};xn.abs={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"abs(".concat(wr(e,t[0]),")")}};xn.floor={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"floor(".concat(wr(e,t[0]),")")}};xn.round={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"floor(".concat(wr(e,t[0])," + 0.5)")}};xn.ceil={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"ceil(".concat(wr(e,t[0]),")")}};xn.sin={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"sin(".concat(wr(e,t[0]),")")}};xn.cos={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ni(t,1),Ki(t),"cos(".concat(wr(e,t[0]),")")}};xn.atan={getReturnType:function(e){return mr.NUMBER},toGlsl:function(e,t){return ty(t,1),t8(t,2),Ki(t),t.length===2?"atan(".concat(wr(e,t[0]),", ").concat(wr(e,t[1]),")"):"atan(".concat(wr(e,t[0]),")")}};xn[">"]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," > ").concat(wr(e,t[1]),")")}};xn[">="]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," >= ").concat(wr(e,t[1]),")")}};xn["<"]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," < ").concat(wr(e,t[1]),")")}};xn["<="]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,2),Ki(t),"(".concat(wr(e,t[0])," <= ").concat(wr(e,t[1]),")")}};function Trt(e){return{getReturnType:function(t){return mr.BOOLEAN},toGlsl:function(t,r){ni(r,2);for(var n=mr.ANY,o=0;o<r.length;o++)n&=Md(r[o]);if(n===mr.NONE)throw new Error("All arguments should be of compatible type, got ".concat(JSON.stringify(r)," instead"));return n&=~mr.COLOR,"(".concat(wr(t,r[0],n)," ").concat(e," ").concat(wr(t,r[1],n),")")}}}xn["=="]=Trt("==");xn["!="]=Trt("!=");xn["!"]={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){return ni(t,1),Bie(t[0]),"(!".concat(wr(e,t[0]),")")}};function Mrt(e){return{getReturnType:function(t){return mr.BOOLEAN},toGlsl:function(t,r){ty(r,2);for(var n=0;n<r.length;n++)Bie(r[n]);var o="";return o=r.map(function(i){return wr(t,i)}).join(" ".concat(e," ")),o="(".concat(o,")"),o}}}xn.all=Mrt("&&");xn.any=Mrt("||");xn.between={getReturnType:function(e){return mr.BOOLEAN},toGlsl:function(e,t){ni(t,3),Ki(t);var r=wr(e,t[1]),n=wr(e,t[2]),o=wr(e,t[0]);return"(".concat(o," >= ").concat(r," && ").concat(o," <= ").concat(n,")")}};xn.array={getReturnType:function(e){return mr.NUMBER_ARRAY},toGlsl:function(e,t){ty(t,2),t8(t,4),Ki(t);var r=t.map(function(n){return wr(e,n,mr.NUMBER)});return"vec".concat(t.length,"(").concat(r.join(", "),")")}};xn.color={getReturnType:function(e){return mr.COLOR},toGlsl:function(e,t){ty(t,3),t8(t,4),Ki(t);var r=t;t.length===3&&r.push(1);var n=t.map(function(o,i){return wr(e,o,mr.NUMBER)+(i<3?" / 255.0":"")});return"vec".concat(t.length,"(").concat(n.join(", "),")")}};xn.interpolate={getReturnType:function(e){for(var t=mr.COLOR|mr.NUMBER,r=3;r<e.length;r+=2)t=t&Md(e[r]);return t},toGlsl:function(e,t,r){Irt(t),ty(t,6);var n=t[0],o;switch(n[0]){case"linear":o=1;break;case"exponential":o=n[1];break;default:o=null;}if(!o)throw new Error("Invalid interpolation type for \"interpolate\" operator, received: ".concat(JSON.stringify(n)));var i=r!==void 0?r:mr.ANY,a=xn.interpolate.getReturnType(t)&i;Vie(t,a);for(var u=wr(e,t[1]),p=e8(o),h="",g=2;g<t.length-2;g+=2){var x=wr(e,t[g]),b=h||wr(e,t[g+1],a),T=wr(e,t[g+2]),A=wr(e,t[g+3],a);h="mix(".concat(b,", ").concat(A,", pow(clamp((").concat(u," - ").concat(x,") / (").concat(T," - ").concat(x,"), 0.0, 1.0), ").concat(p,"))")}return h}};xn.match={getReturnType:function(e){for(var t=mr.ANY,r=2;r<e.length;r+=2)t=t&Md(e[r]);return t=t&Md(e[e.length-1]),t},toGlsl:function(e,t,r){Irt(t),ty(t,4);var n=r!==void 0?r:mr.ANY,o=xn.match.getReturnType(t)&n;Vie(t,o);for(var i=wr(e,t[0]),a=wr(e,t[t.length-1],o),u=null,p=t.length-3;p>=1;p-=2){var h=wr(e,t[p]),g=wr(e,t[p+1],o);u="(".concat(i," == ").concat(h," ? ").concat(g," : ").concat(u||a,")")}return u}};xn.case={getReturnType:function(e){for(var t=mr.ANY,r=1;r<e.length;r+=2)t=t&Md(e[r]);return t=t&Md(e[e.length-1]),t},toGlsl:function(e,t,r){p4r(t),ty(t,3);var n=r!==void 0?r:mr.ANY,o=xn.case.getReturnType(t)&n;Vie(t,o);for(var i=0;i<t.length-1;i+=2)Bie(t[i]);for(var a=wr(e,t[t.length-1],o),u=null,i=t.length-3;i>=0;i-=2){var p=wr(e,t[i]),h=wr(e,t[i+1],o);u="(".concat(p," ? ").concat(h," : ").concat(u||a,")")}return u}};var d4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();function Crt(e,t){var r=`
    attribute vec2 `.concat(yD.TEXTURE_COORD,`;
    uniform mat4 `).concat(rn.TILE_TRANSFORM,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(rn.TEXTURE_RESOLUTION,`;
    uniform float `).concat(rn.TEXTURE_ORIGIN_X,`;
    uniform float `).concat(rn.TEXTURE_ORIGIN_Y,`;
    uniform float `).concat(rn.DEPTH,`;

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;

    void main() {
      v_textureCoord = `).concat(yD.TEXTURE_COORD,`;
      v_mapCoord = vec2(
        `).concat(rn.TEXTURE_ORIGIN_X," + ").concat(rn.TEXTURE_RESOLUTION," * ").concat(rn.TEXTURE_PIXEL_WIDTH,` * v_textureCoord[0],
        `).concat(rn.TEXTURE_ORIGIN_Y," - ").concat(rn.TEXTURE_RESOLUTION," * ").concat(rn.TEXTURE_PIXEL_HEIGHT,` * v_textureCoord[1]
      );
      gl_Position = `).concat(rn.TILE_TRANSFORM," * vec4(").concat(yD.TEXTURE_COORD,", ").concat(rn.DEPTH,`, 1.0);
    }
  `),n={inFragmentShader:!0,variables:[],attributes:[],stringLiteralsMap:{},functions:{},bandCount:t},o=[];if(e.color!==void 0){var i=wr(n,e.color,mr.COLOR);o.push("color = ".concat(i,";"))}if(e.contrast!==void 0){var a=wr(n,e.contrast,mr.NUMBER);o.push("color.rgb = clamp((".concat(a," + 1.0) * color.rgb - (").concat(a," / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.exposure!==void 0){var u=wr(n,e.exposure,mr.NUMBER);o.push("color.rgb = clamp((".concat(u," + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}if(e.saturation!==void 0){var p=wr(n,e.saturation,mr.NUMBER);o.push(`
      float saturation = `.concat(p,` + 1.0;
      float sr = (1.0 - saturation) * 0.2126;
      float sg = (1.0 - saturation) * 0.7152;
      float sb = (1.0 - saturation) * 0.0722;
      mat3 saturationMatrix = mat3(
        sr + saturation, sr, sr,
        sg, sg + saturation, sg,
        sb, sb, sb + saturation
      );
      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));
    `))}if(e.gamma!==void 0){var h=wr(n,e.gamma,mr.NUMBER);o.push("color.rgb = pow(color.rgb, vec3(1.0 / ".concat(h,"));"))}if(e.brightness!==void 0){var g=wr(n,e.brightness,mr.NUMBER);o.push("color.rgb = clamp(color.rgb + ".concat(g,", vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));"))}var x={},b=n.variables.length;if(b>1&&!e.variables)throw new Error("Missing variables in style (expected ".concat(n.variables,")"));for(var T=function(U){var H=n.variables[U];if(!(H in e.variables))throw new Error("Missing '".concat(H,"' in style variables"));var X=Gie(H);x[X]=function(){var ee=e.variables[H];return typeof ee=="string"&&(ee=Uie(n,ee)),ee!==void 0?ee:-9999999}},A=0;A<b;++A)T(A);var L=Object.keys(x).map(function(U){return"uniform float ".concat(U,";")}),P=Math.ceil(t/4);L.push("uniform sampler2D ".concat(rn.TILE_TEXTURE_ARRAY,"[").concat(P,"];")),n.paletteTextures&&L.push("uniform sampler2D ".concat(Hie,"[").concat(n.paletteTextures.length,"];"));var k=Object.keys(n.functions).map(function(U){return n.functions[U]}),q=`
    #ifdef GL_FRAGMENT_PRECISION_HIGH
    precision highp float;
    #else
    precision mediump float;
    #endif

    varying vec2 v_textureCoord;
    varying vec2 v_mapCoord;
    uniform vec4 `.concat(rn.RENDER_EXTENT,`;
    uniform float `).concat(rn.TRANSITION_ALPHA,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_WIDTH,`;
    uniform float `).concat(rn.TEXTURE_PIXEL_HEIGHT,`;
    uniform float `).concat(rn.RESOLUTION,`;
    uniform float `).concat(rn.ZOOM,`;

    `).concat(L.join(`
`),`

    `).concat(k.join(`
`),`

    void main() {
      if (
        v_mapCoord[0] < `).concat(rn.RENDER_EXTENT,`[0] ||
        v_mapCoord[1] < `).concat(rn.RENDER_EXTENT,`[1] ||
        v_mapCoord[0] > `).concat(rn.RENDER_EXTENT,`[2] ||
        v_mapCoord[1] > `).concat(rn.RENDER_EXTENT,`[3]
      ) {
        discard;
      }

      vec4 color = texture2D(`).concat(rn.TILE_TEXTURE_ARRAY,`[0],  v_textureCoord);

      `).concat(o.join(`
`),`

      if (color.a == 0.0) {
        discard;
      }

      gl_FragColor = color;
      gl_FragColor.rgb *= gl_FragColor.a;
      gl_FragColor *= `).concat(rn.TRANSITION_ALPHA,`;
    }`);return{vertexShader:r,fragmentShader:q,uniforms:x,paletteTextures:n.paletteTextures}}var Art=function(e){d4r(t,e);function t(r){var n=this,o=r?zo({},r):{},i=o.style||{};delete o.style;var a=o.cacheSize;return delete o.cacheSize,n=e.call(this,o)||this,n.sources_=o.sources,n.renderedSource_=null,n.renderedResolution_=NaN,n.style_=i,n.cacheSize_=a,n.styleVariables_=n.style_.variables||{},n.addChangeListener(Hn.SOURCE,n.handleSourceUpdate_),n}return t.prototype.getSources=function(r,n){var o=this.getSource();return this.sources_?typeof this.sources_=="function"?this.sources_(r,n):this.sources_:o?[o]:[]},t.prototype.getRenderSource=function(){return this.renderedSource_||this.getSource()},t.prototype.getSourceState=function(){var r=this.getRenderSource();return r?r.getState():"undefined"},t.prototype.handleSourceUpdate_=function(){this.getSource()&&this.setStyle(this.style_)},t.prototype.getSourceBandCount_=function(){var r=Number.MAX_SAFE_INTEGER,n=this.getSources([-r,-r,r,r],r);return n&&n.length&&"bandCount"in n[0]?n[0].bandCount:4},t.prototype.createRenderer=function(){var r=Crt(this.style_,this.getSourceBandCount_());return new xrt(this,{vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,cacheSize:this.cacheSize_,paletteTextures:r.paletteTextures})},t.prototype.renderSources=function(r,n){for(var o=this.getRenderer(),i,a=0,u=n.length;a<u;++a)this.renderedSource_=n[a],o.prepareFrame(r)&&(i=o.renderFrame(r));return i},t.prototype.render=function(r,n){var o=this;this.rendered=!0;for(var i=r.viewState,a=this.getSources(r.extent,i.resolution),u=!0,p=function(T,A){var L=a[T],P=L.getState();if(P=="loading"){var k=function(){L.getState()=="ready"&&(L.removeEventListener("change",k),o.changed())};L.addEventListener("change",k)}u=u&&P=="ready"},h=0,g=a.length;h<g;++h)p(h,g);var x=this.renderSources(r,a);if(this.getRenderer().renderComplete&&u)return this.renderedResolution_=i.resolution,x;if(this.renderedResolution_>.5*i.resolution){var b=this.getSources(r.extent,this.renderedResolution_).filter(function(T){return!a.includes(T)});if(b.length>0)return this.renderSources(r,b)}return x},t.prototype.setStyle=function(r){this.styleVariables_=r.variables||{},this.style_=r;var n=Crt(this.style_,this.getSourceBandCount_()),o=this.getRenderer();o.reset({vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,uniforms:n.uniforms,paletteTextures:n.paletteTextures}),this.changed()},t.prototype.updateStyleVariables=function(r){zo(this.styleVariables_,r),this.changed()},t}(Wtt);Art.prototype.dispose;var Drt=Art;var h4r=[0,0,0],ry=5,m4r=function(){function e(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Xr($Qe(this.resolutions_,function(a,u){return u-a},!0),17);var r;if(!t.origins){for(var n=0,o=this.resolutions_.length-1;n<o;++n)if(!r)r=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==r){r=void 0;break}}this.zoomFactor_=r,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Xr(this.origins_.length==this.resolutions_.length,20));var i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Dv(i)),Xr(!this.origin_&&this.origins_||this.origin_&&!this.origins_,18),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Xr(this.tileSizes_.length==this.resolutions_.length,19)),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Qv,Xr(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,22),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map(function(a,u){var p=new Zz(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1));if(i){var h=this.getTileRangeForExtentAndZ(i,u);p.minX=Math.max(h.minX,p.minX),p.maxX=Math.min(h.maxX,p.maxX),p.minY=Math.max(h.minY,p.minY),p.maxY=Math.min(h.maxY,p.maxY)}return p},this):i&&this.calculateTileRanges_(i)}return e.prototype.forEachTileCoord=function(t,r,n){for(var o=this.getTileRangeForExtentAndZ(t,r),i=o.minX,a=o.maxX;i<=a;++i)for(var u=o.minY,p=o.maxY;u<=p;++u)n([r,i,u])},e.prototype.forEachTileCoordParentTileRange=function(t,r,n,o){var i,a,u,p=null,h=t[0]-1;for(this.zoomFactor_===2?(a=t[1],u=t[2]):p=this.getTileCoordExtent(t,o);h>=this.minZoom;){if(this.zoomFactor_===2?(a=Math.floor(a/2),u=Math.floor(u/2),i=E1(a,a,u,u,n)):i=this.getTileRangeForExtentAndZ(p,h,n),r(h,i))return!0;--h}return!1},e.prototype.getExtent=function(){return this.extent_},e.prototype.getMaxZoom=function(){return this.maxZoom},e.prototype.getMinZoom=function(){return this.minZoom},e.prototype.getOrigin=function(t){return this.origin_?this.origin_:this.origins_[t]},e.prototype.getResolution=function(t){return this.resolutions_[t]},e.prototype.getResolutions=function(){return this.resolutions_},e.prototype.getTileCoordChildTileRange=function(t,r,n){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){var o=t[1]*2,i=t[2]*2;return E1(o,o+1,i,i+1,r)}var a=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t[0]+1,r)}return null},e.prototype.getTileRangeForTileCoordAndZ=function(t,r,n){if(r>this.maxZoom||r<this.minZoom)return null;var o=t[0],i=t[1],a=t[2];if(r===o)return E1(i,a,i,a,n);if(this.zoomFactor_){var u=Math.pow(this.zoomFactor_,r-o),p=Math.floor(i*u),h=Math.floor(a*u);if(r<o)return E1(p,p,h,h,n);var g=Math.floor(u*(i+1))-1,x=Math.floor(u*(a+1))-1;return E1(p,g,h,x,n)}var b=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(b,r,n)},e.prototype.getTileRangeExtent=function(t,r,n){var o=this.getOrigin(t),i=this.getResolution(t),a=Ka(this.getTileSize(t),this.tmpSize_),u=o[0]+r.minX*a[0]*i,p=o[0]+(r.maxX+1)*a[0]*i,h=o[1]+r.minY*a[1]*i,g=o[1]+(r.maxY+1)*a[1]*i;return Jh(u,h,p,g,n)},e.prototype.getTileRangeForExtentAndZ=function(t,r,n){var o=h4r;this.getTileCoordForXYAndZ_(t[0],t[3],r,!1,o);var i=o[1],a=o[2];return this.getTileCoordForXYAndZ_(t[2],t[1],r,!0,o),E1(i,o[1],a,o[2],n)},e.prototype.getTileCoordCenter=function(t){var r=this.getOrigin(t[0]),n=this.getResolution(t[0]),o=Ka(this.getTileSize(t[0]),this.tmpSize_);return[r[0]+(t[1]+.5)*o[0]*n,r[1]-(t[2]+.5)*o[1]*n]},e.prototype.getTileCoordExtent=function(t,r){var n=this.getOrigin(t[0]),o=this.getResolution(t[0]),i=Ka(this.getTileSize(t[0]),this.tmpSize_),a=n[0]+t[1]*i[0]*o,u=n[1]-(t[2]+1)*i[1]*o,p=a+i[0]*o,h=u+i[1]*o;return Jh(a,u,p,h,r)},e.prototype.getTileCoordForCoordAndResolution=function(t,r,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordForXYAndResolution_=function(t,r,n,o,i){var a=this.getZForResolution(n),u=n/this.getResolution(a),p=this.getOrigin(a),h=Ka(this.getTileSize(a),this.tmpSize_),g=u*(t-p[0])/n/h[0],x=u*(p[1]-r)/n/h[1];return o?(g=XC(g,ry)-1,x=XC(x,ry)-1):(g=KC(g,ry),x=KC(x,ry)),CE(a,g,x,i)},e.prototype.getTileCoordForXYAndZ_=function(t,r,n,o,i){var a=this.getOrigin(n),u=this.getResolution(n),p=Ka(this.getTileSize(n),this.tmpSize_),h=(t-a[0])/u/p[0],g=(a[1]-r)/u/p[1];return o?(h=XC(h,ry)-1,g=XC(g,ry)-1):(h=KC(h,ry),g=KC(g,ry)),CE(n,h,g,i)},e.prototype.getTileCoordForCoordAndZ=function(t,r,n){return this.getTileCoordForXYAndZ_(t[0],t[1],r,!1,n)},e.prototype.getTileCoordResolution=function(t){return this.resolutions_[t[0]]},e.prototype.getTileSize=function(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]},e.prototype.getFullTileRange=function(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null},e.prototype.getZForResolution=function(t,r){var n=pE(this.resolutions_,t,r||0);return Ho(n,this.minZoom,this.maxZoom)},e.prototype.tileCoordIntersectsViewport=function(t,r){return fie(r,0,r.length,2,this.getTileCoordExtent(t))},e.prototype.calculateTileRanges_=function(t){for(var r=this.resolutions_.length,n=new Array(r),o=this.minZoom;o<r;++o)n[o]=this.getTileRangeForExtentAndZ(t,o);this.fullTileRanges_=n},e}(),r8=m4r;var g4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v4r=function(e){g4r(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.expireCache=function(r){for(;this.canExpireCache();){var n=this.peekLast();if(n.getKey()in r)break;this.pop().release()}},t.prototype.pruneExceptNewestZ=function(){if(this.getCount()!==0){var r=this.peekFirstKey(),n=grt(r),o=n[0];this.forEach(function(i){i.tileCoord[0]!==o&&(this.remove(ey(i.tileCoord)),i.release())}.bind(this))}},t}(Yz),n8=v4r;var o8={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};function i8(e){var t=e.getDefaultTileGrid();return t||(t=x4r(e),e.setDefaultTileGrid(t)),t}function Nrt(e,t,r){var n=t[0],o=e.getTileCoordCenter(t),i=Ort(r);if(Xh(i,o))return t;var a=fi(i),u=Math.ceil((i[0]-o[0])/a);return o[0]+=a*u,e.getTileCoordForCoordAndZ(o,n)}function y4r(e,t,r,n){var o=n!==void 0?n:"top-left",i=_4r(e,t,r);return new r8({extent:e,origin:C$e(e,o),resolutions:i,tileSize:r})}function _4r(e,t,r,n){for(var o=t!==void 0?t:Ptt,i=bs(e),a=fi(e),u=Ka(r!==void 0?r:Qv),p=n>0?n:Math.max(a/u[0],i/u[1]),h=o+1,g=new Array(h),x=0;x<h;++x)g[x]=p/Math.pow(2,x);return g}function x4r(e,t,r,n){var o=Ort(e);return y4r(o,t,r,n)}function Ort(e){e=_u(e);var t=e.getExtent();if(!t){var r=180*vu[yu.DEGREES]/e.getMetersPerUnit();t=Jh(-r,-r,r,r)}return t}var Lrt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),b4r=function(e){Lrt(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,attributionsCollapsible:r.attributionsCollapsible,projection:r.projection,state:r.state,wrapX:r.wrapX,interpolate:r.interpolate})||this;n.on,n.once,n.un,n.opaque_=r.opaque!==void 0?r.opaque:!1,n.tilePixelRatio_=r.tilePixelRatio!==void 0?r.tilePixelRatio:1,n.tileGrid=r.tileGrid!==void 0?r.tileGrid:null;var o=[256,256];return n.tileGrid&&Ka(n.tileGrid.getTileSize(n.tileGrid.getMinZoom()),o),n.tileCache=new n8(r.cacheSize||0),n.tmpSize=[0,0],n.key_=r.key||"",n.tileOptions={transition:r.transition,interpolate:r.interpolate},n.zDirection=r.zDirection?r.zDirection:0,n}return t.prototype.canExpireCache=function(){return this.tileCache.canExpireCache()},t.prototype.expireCache=function(r,n){var o=this.getTileCacheForProjection(r);o&&o.expireCache(n)},t.prototype.forEachLoadedTile=function(r,n,o,i){var a=this.getTileCacheForProjection(r);if(!a)return!1;for(var u=!0,p,h,g,x=o.minX;x<=o.maxX;++x)for(var b=o.minY;b<=o.maxY;++b)h=I1(n,x,b),g=!1,a.containsKey(h)&&(p=a.get(h),g=p.getState()===xr.LOADED,g&&(g=i(p)!==!1)),g||(u=!1);return u},t.prototype.getGutterForProjection=function(r){return 0},t.prototype.getKey=function(){return this.key_},t.prototype.setKey=function(r){this.key_!==r&&(this.key_=r,this.changed())},t.prototype.getOpaque=function(r){return this.opaque_},t.prototype.getResolutions=function(){return this.tileGrid?this.tileGrid.getResolutions():null},t.prototype.getTile=function(r,n,o,i,a){return Gn()},t.prototype.getTileGrid=function(){return this.tileGrid},t.prototype.getTileGridForProjection=function(r){return this.tileGrid?this.tileGrid:i8(r)},t.prototype.getTileCacheForProjection=function(r){var n=this.getProjection();return Xr(n===null||Nv(n,r),68),this.tileCache},t.prototype.getTilePixelRatio=function(r){return this.tilePixelRatio_},t.prototype.getTilePixelSize=function(r,n,o){var i=this.getTileGridForProjection(o),a=this.getTilePixelRatio(n),u=Ka(i.getTileSize(r),this.tmpSize);return a==1?u:dtt(u,a,this.tmpSize)},t.prototype.getTileCoordForTileUrlFunction=function(r,n){var o=n!==void 0?n:this.getProjection(),i=this.getTileGridForProjection(o);return this.getWrapX()&&o.isGlobal()&&(r=Nrt(i,r,o)),yrt(r,i)?r:null},t.prototype.clear=function(){this.tileCache.clear()},t.prototype.refresh=function(){this.clear(),e.prototype.refresh.call(this)},t.prototype.updateCacheSize=function(r,n){var o=this.getTileCacheForProjection(n);r>o.highWaterMark&&(o.highWaterMark=r)},t.prototype.useTile=function(r,n,o,i){},t}(Ttt),Prt=function(e){Lrt(t,e);function t(r,n){var o=e.call(this,r)||this;return o.tile=n,o}return t}(il);var krt=b4r;function w4r(e,t){var r=/\{z\}/g,n=/\{x\}/g,o=/\{y\}/g,i=/\{-y\}/g;return function(a,u,p){if(a)return e.replace(r,a[0].toString()).replace(n,a[1].toString()).replace(o,a[2].toString()).replace(i,function(){var h=a[0],g=t.getFullTileRange(h);Xr(g,55);var x=g.getHeight()-a[2]-1;return x.toString()})}}function Rrt(e,t){for(var r=e.length,n=new Array(r),o=0;o<r;++o)n[o]=w4r(e[o],t);return Wie(n)}function Wie(e){return e.length===1?e[0]:function(t,r,n){if(t){var o=vrt(t),i=Xf(o,e.length);return e[i](t,r,n)}else return}}function a8(e){var t=[],r=/\{([a-z])-([a-z])\}/.exec(e);if(r){var n=r[1].charCodeAt(0),o=r[2].charCodeAt(0),i=void 0;for(i=n;i<=o;++i)t.push(e.replace(r[0],String.fromCharCode(i)));return t}if(r=/\{(\d+)-(\d+)\}/.exec(e),r){for(var a=parseInt(r[2],10),u=parseInt(r[1],10);u<=a;u++)t.push(e.replace(r[0],u.toString()));return t}return t.push(e),t}var E4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S4r=function(e){E4r(t,e);function t(r){var n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tilePixelRatio:r.tilePixelRatio,wrapX:r.wrapX,transition:r.transition,interpolate:r.interpolate,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this;return n.generateTileUrlFunction_=n.tileUrlFunction===t.prototype.tileUrlFunction,n.tileLoadFunction=r.tileLoadFunction,r.tileUrlFunction&&(n.tileUrlFunction=r.tileUrlFunction),n.urls=null,r.urls?n.setUrls(r.urls):r.url&&n.setUrl(r.url),n.tileLoadingKeys_={},n}return t.prototype.getTileLoadFunction=function(){return this.tileLoadFunction},t.prototype.getTileUrlFunction=function(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction},t.prototype.getUrls=function(){return this.urls},t.prototype.handleTileChange=function(r){var n=r.target,o=$i(n),i=n.getState(),a;i==xr.LOADING?(this.tileLoadingKeys_[o]=!0,a=o8.TILELOADSTART):o in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[o],a=i==xr.ERROR?o8.TILELOADERROR:i==xr.LOADED?o8.TILELOADEND:void 0),a!=null&&this.dispatchEvent(new Prt(a,n))},t.prototype.setTileLoadFunction=function(r){this.tileCache.clear(),this.tileLoadFunction=r,this.changed()},t.prototype.setTileUrlFunction=function(r,n){this.tileUrlFunction=r,this.tileCache.pruneExceptNewestZ(),typeof n!="undefined"?this.setKey(n):this.changed()},t.prototype.setUrl=function(r){var n=a8(r);this.urls=n,this.setUrls(n)},t.prototype.setUrls=function(r){this.urls=r;var n=r.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Rrt(r,this.tileGrid),n):this.setKey(n)},t.prototype.tileUrlFunction=function(r,n,o){},t.prototype.useTile=function(r,n,o){var i=I1(r,n,o);this.tileCache.containsKey(i)&&this.tileCache.get(i)},t}(krt),jrt=S4r;var I4r=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T4r=function(e){I4r(t,e);function t(r){var n=this,o=r.imageSmoothing!==void 0?r.imageSmoothing:!0;return r.interpolate!==void 0&&(o=r.interpolate),n=e.call(this,{attributions:r.attributions,cacheSize:r.cacheSize,opaque:r.opaque,projection:r.projection,state:r.state,tileGrid:r.tileGrid,tileLoadFunction:r.tileLoadFunction?r.tileLoadFunction:M4r,tilePixelRatio:r.tilePixelRatio,tileUrlFunction:r.tileUrlFunction,url:r.url,urls:r.urls,wrapX:r.wrapX,transition:r.transition,interpolate:o,key:r.key,attributionsCollapsible:r.attributionsCollapsible,zDirection:r.zDirection})||this,n.crossOrigin=r.crossOrigin!==void 0?r.crossOrigin:null,n.tileClass=r.tileClass!==void 0?r.tileClass:S1,n.tileCacheForProjection={},n.tileGridForProjection={},n.reprojectionErrorThreshold_=r.reprojectionErrorThreshold,n.renderReprojectionEdges_=!1,n}return t.prototype.canExpireCache=function(){if(!Td)return e.prototype.canExpireCache.call(this);if(this.tileCache.canExpireCache())return!0;for(var r in this.tileCacheForProjection)if(this.tileCacheForProjection[r].canExpireCache())return!0;return!1},t.prototype.expireCache=function(r,n){if(!Td){e.prototype.expireCache.call(this,r,n);return}var o=this.getTileCacheForProjection(r);this.tileCache.expireCache(this.tileCache==o?n:{});for(var i in this.tileCacheForProjection){var a=this.tileCacheForProjection[i];a.expireCache(a==o?n:{})}},t.prototype.getGutterForProjection=function(r){return Td&&this.getProjection()&&r&&!Nv(this.getProjection(),r)?0:this.getGutter()},t.prototype.getGutter=function(){return 0},t.prototype.getKey=function(){var r=e.prototype.getKey.call(this);return this.getInterpolate()||(r+=":disable-interpolation"),r},t.prototype.getOpaque=function(r){return Td&&this.getProjection()&&r&&!Nv(this.getProjection(),r)?!1:e.prototype.getOpaque.call(this,r)},t.prototype.getTileGridForProjection=function(r){if(!Td)return e.prototype.getTileGridForProjection.call(this,r);var n=this.getProjection();if(this.tileGrid&&(!n||Nv(n,r)))return this.tileGrid;var o=$i(r);return o in this.tileGridForProjection||(this.tileGridForProjection[o]=i8(r)),this.tileGridForProjection[o]},t.prototype.getTileCacheForProjection=function(r){if(!Td)return e.prototype.getTileCacheForProjection.call(this,r);var n=this.getProjection();if(!n||Nv(n,r))return this.tileCache;var o=$i(r);return o in this.tileCacheForProjection||(this.tileCacheForProjection[o]=new n8(this.tileCache.highWaterMark)),this.tileCacheForProjection[o]},t.prototype.createTile_=function(r,n,o,i,a,u){var p=[r,n,o],h=this.getTileCoordForTileUrlFunction(p,a),g=h?this.tileUrlFunction(h,i,a):void 0,x=new this.tileClass(p,g!==void 0?xr.IDLE:xr.EMPTY,g!==void 0?g:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return x.key=u,x.addEventListener(_r.CHANGE,this.handleTileChange.bind(this)),x},t.prototype.getTile=function(r,n,o,i,a){var u=this.getProjection();if(!Td||!u||!a||Nv(u,a))return this.getTileInternal(r,n,o,i,u||a);var p=this.getTileCacheForProjection(a),h=[r,n,o],g=void 0,x=ey(h);p.containsKey(x)&&(g=p.get(x));var b=this.getKey();if(g&&g.key==b)return g;var T=this.getTileGridForProjection(u),A=this.getTileGridForProjection(a),L=this.getTileCoordForTileUrlFunction(h,a),P=new Kz(u,T,a,A,h,L,this.getTilePixelRatio(i),this.getGutter(),function(k,q,U,H){return this.getTileInternal(k,q,U,H,u)}.bind(this),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.getInterpolate());return P.key=b,g?(P.interimTile=g,P.refreshInterimChain(),p.replace(x,P)):p.set(x,P),P},t.prototype.getTileInternal=function(r,n,o,i,a){var u=null,p=I1(r,n,o),h=this.getKey();if(!this.tileCache.containsKey(p))u=this.createTile_(r,n,o,i,a,h),this.tileCache.set(p,u);else if(u=this.tileCache.get(p),u.key!=h){var g=u;u=this.createTile_(r,n,o,i,a,h),g.getState()==xr.IDLE?u.interimTile=g.interimTile:u.interimTile=g,u.refreshInterimChain(),this.tileCache.replace(p,u)}return u},t.prototype.setRenderReprojectionEdges=function(r){if(!(!Td||this.renderReprojectionEdges_==r)){this.renderReprojectionEdges_=r;for(var n in this.tileCacheForProjection)this.tileCacheForProjection[n].clear();this.changed()}},t.prototype.setTileGridForProjection=function(r,n){if(Td){var o=_u(r);if(o){var i=$i(o);i in this.tileGridForProjection||(this.tileGridForProjection[i]=n)}}},t}(jrt);function M4r(e,t){e.getImage().src=t}var qrt=T4r;var zrt=function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])},e(t,r)};return function(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$ie={DEFAULT:"default",TRUNCATED:"truncated"},C4r=function(e){zrt(t,e);function t(r,n,o,i,a,u,p){var h=e.call(this,n,o,i,a,u,p)||this;return h.zoomifyImage_=null,h.tileSize_=r,h}return t.prototype.getImage=function(){if(this.zoomifyImage_)return this.zoomifyImage_;var r=e.prototype.getImage.call(this);if(this.state==xr.LOADED){var n=this.tileSize_;if(r.width==n[0]&&r.height==n[1])return this.zoomifyImage_=r,r;var o=gm(n[0],n[1]);return o.drawImage(r,0,0),this.zoomifyImage_=o.canvas,o.canvas}else return r},t}(S1);var A4r=function(e){zrt(t,e);function t(r){var n=this,o=r,i=o.imageSmoothing!==void 0?o.imageSmoothing:!0;o.interpolate!==void 0&&(i=o.interpolate);var a=o.size,u=o.tierSizeCalculation!==void 0?o.tierSizeCalculation:$ie.DEFAULT,p=o.tilePixelRatio||1,h=a[0],g=a[1],x=[],b=o.tileSize||Qv,T=b*p;switch(u){case $ie.DEFAULT:for(;h>T||g>T;)x.push([Math.ceil(h/T),Math.ceil(g/T)]),T+=T;break;case $ie.TRUNCATED:for(var A=h,L=g;A>T||L>T;)x.push([Math.ceil(A/T),Math.ceil(L/T)]),A>>=1,L>>=1;break;default:Xr(!1,53);break;}x.push([1,1]),x.reverse();for(var P=[p],k=[0],q=1,U=x.length;q<U;q++)P.push(p<<q),k.push(x[q-1][0]*x[q-1][1]+k[q-1]);P.reverse();var H=new r8({tileSize:b,extent:o.extent||[0,-g,h,0],resolutions:P}),X=o.url;X&&X.indexOf("{TileGroup}")==-1&&X.indexOf("{tileIndex}")==-1&&(X+="{TileGroup}/{z}-{x}-{y}.jpg");var ee=a8(X),ne=b*p;function pe(Ye){return function(Qe,qe,Ue){if(Qe){var Ne=Qe[0],et=Qe[1],st=Qe[2],ft=et+st*x[Ne][0],Ze=(ft+k[Ne])/ne|0,tt={z:Ne,x:et,y:st,tileIndex:ft,TileGroup:"TileGroup"+Ze};return Ye.replace(/\{(\w+?)\}/g,function(lt,ze){return tt[ze]})}else return}}var ue=Wie(ee.map(pe)),Ie=C4r.bind(null,Ka(b*p));n=e.call(this,{attributions:o.attributions,cacheSize:o.cacheSize,crossOrigin:o.crossOrigin,interpolate:i,projection:o.projection,tilePixelRatio:p,reprojectionErrorThreshold:o.reprojectionErrorThreshold,tileClass:Ie,tileGrid:H,tileUrlFunction:ue,transition:o.transition})||this,n.zDirection=o.zDirection;var Re=H.getTileCoordForCoordAndResolution(Jf(H.getExtent()),P[P.length-1]),Te=ue(Re,1,null),Ee=new Image;return Ee.addEventListener("error",function(){ne=b,this.changed()}.bind(n)),Ee.src=Te,n}return t}(qrt),Frt=A4r;var Mu=Z(we(),1),Urt=Z(Si(),1),ym=Z(xt(),1);var _D={brightness:0,contrast:0,saturation:0},s8=e=>{let{max:t=1,min:r=0,onChange:n=()=>console.warn("onChange is not implemented."),step:o=.01,type:i="",value:a=.5,tooltip:u}=e,p=h=>{n(i,h)};return Mu.default.createElement("div",{className:"filter-slider",title:u},Mu.default.createElement("span",{className:Et("slider-icon",i),title:u}),Mu.default.createElement("div",null,Mu.default.createElement(sz,{title:u,ariaLabelForHandle:u,max:t,min:r,onChange:p,step:o,value:a})),Mu.default.createElement("span",{className:"slider-tooltip",title:u},a))};s8.propTypes={max:ym.default.number,min:ym.default.number,onChange:ym.default.func,step:ym.default.number,tooltip:ym.default.string,type:ym.default.string,value:ym.default.number};var Brt=e=>{let{layer:t}=e,[r,n]=(0,Mu.useState)(Se({},_D)),o=(a,u)=>{let p=Object.assign({},r,{[a]:u});n(p),t.updateStyleVariables(p)},i=()=>{n(Se({},_D)),t.updateStyleVariables(Se({},_D))};return Mu.default.createElement("div",null,Mu.default.createElement(s8,{max:1,min:-1,onChange:o,step:.01,type:"contrast",value:r.contrast,tooltip:fe("control-imagemanipulation-contrast")}),Mu.default.createElement(s8,{max:1,min:-1,onChange:o,step:.01,type:"saturation",value:r.saturation,tooltip:fe("control-imagemanipulation-saturation")}),Mu.default.createElement(s8,{max:1,min:-1,onChange:o,step:.01,type:"brightness",value:r.brightness,tooltip:fe("control-imagemanipulation-brightness")}),Mu.default.createElement("button",{className:"btn-reset",title:fe("control-imagemanipulation-reset"),onClick:i},fe("control-imagemanipulation-reset")))};Brt.propTypes={layer:ym.default.object};var Yie=class extends sc{constructor(t){let r="ol-unselectable ol-control image-manipulation",n=document.createElement("div");n.className=r;let o=document.createElement("button");o.title=fe("control-imagemanipulation-open"),o.innerHTML="I",o.type="button",n.appendChild(o);let i=document.createElement("div");i.className="content-container",i.style.display="none",n.appendChild(i);let a=()=>{let u=i.style.display==="block";n.className=u?r:`${r} active`,i.style.display=u?"none":"block"};Urt.default.render(Mu.default.createElement(Brt,{layer:t.layer}),i),o.addEventListener("click",a,!1),o.addEventListener("touchstart",a,!1),super({element:n,target:t.target})}},Vrt=Yie;function D4r(e){return At(this,null,function*(){try{let t=yield Grt.default.get(e);if(t.status===200){let n=new DOMParser().parseFromString(t.data,"text/xml");return{width:parseInt(n.firstChild.attributes.WIDTH.value,0),height:parseInt(n.firstChild.attributes.HEIGHT.value,0),url:e.substring(0,e.lastIndexOf("/")+1)}}else throw new Error("Could not fetch ImageProperties.xml")}catch(t){console.error("Something went wrong while trying to fetch the ImageProperties.xml."),console.error(t)}})}var Hrt=e=>{let{className:t="",onLoad:r,urlImageProperties:n,withImageManipulation:o=!1}=e,i=(0,AE.useRef)(null);return(0,AE.useEffect)(()=>{At(void 0,null,function*(){let p=yield D4r(n),h=new Frt({url:p.url,size:[p.width,p.height],crossOrigin:"anonymous",zDirection:-1}),g=h.getTileGrid().getExtent(),x=new Drt({style:{brightness:["var","brightness"],contrast:["var","contrast"],saturation:["var","saturation"],variables:Se({},_D)},source:h}),b=new Id({resolutions:x.getSource().getTileGrid().getResolutions(),extent:g,constrainOnlyCenter:!0}),T=new Htt({controls:[new Qet({tipLabel:fe("control-fullscreen-title")}),new $z({zoomInTipLabel:fe("control-zoom-in"),zoomOutTipLabel:fe("control-zoom-in")})],interactions:Hz().extend([new Bz]),layers:[x],target:i.current,view:b});b.fit(g,{padding:[50,50,50,50]});let A=T.getSize();T.addControl(new Vtt({tipLabel:fe("control-zoomtoextent-title"),extent:b.calculateExtent([A[0]+50,A[1]+50])})),o&&T.addControl(new Vrt({layer:x})),r&&r({layer:x,map:T,source:h,zoomifyProps:p})})},[n]),AE.default.createElement("div",{className:Et("vk-mapview-zoomify",t),ref:i})};Hrt.propTypes={className:xD.default.string,onLoad:xD.default.func,urlImageProperties:xD.default.string.isRequired,withImageManipulation:xD.default.bool};var Wrt=Hrt;var $rt=Wrt;var Yrt=e=>{let{isOpen:t,onClose:r,map_id:n}=e,[o,i]=(0,Tn.useState)(null),a=()=>{i(null),r()};if((0,Tn.useEffect)(()=>{n!==void 0&&At(void 0,null,function*(){let A=yield pw(n);i(A)})},[n,i]),o===null)return Tn.default.createElement("div",{className:"vkf-view-original-map container"});let u=o.online_resources,p=u.find(T=>T.type==="Permalink"),h=u.find(T=>T.type==="WMS"),g=u.find(T=>T.type==="WCS"),x=u.find(T=>T.type==="download"),b=o.type==="mosaic";return Tn.default.createElement(lf,{key:n,modalClassName:Et("vkf-modal-original-map",o.type),onClose:a,renderContent:()=>Tn.default.createElement("div",{className:"vkf-view-original-map"},Tn.default.createElement("div",{className:"title"},Tn.default.createElement("h1",null,o.title," ",Tn.default.createElement("small",null,"/ ",o.title_long)),Tn.default.createElement("div",{className:"header-functions"},!b&&Tn.default.createElement("a",{href:o.permalink,rel:"noreferrer",className:"btn btn-default",target:"_blank"},fe("originalview-link-slub-label")),x!==void 0&&Tn.default.createElement("a",{href:x.url,rel:"noreferrer",className:"btn btn-default btn-download",target:"_blank",title:fe("originalview-link-download-label")},fe("originalview-link-download-label")))),o.thumb_url!==void 0&&b&&Tn.default.createElement("div",null,Tn.default.createElement("img",{className:"thumbnail",height:200,width:200,src:o.thumb_url})),Tn.default.createElement("div",{className:"content-metadata"},Tn.default.createElement("dl",null,Tn.default.createElement("dt",null,fe("originalview-label-desc")),Tn.default.createElement("dd",null,o.description),Tn.default.createElement("dt",null,fe("originalview-label-identifier")),Tn.default.createElement("dd",null,n),Tn.default.createElement("dt",null,fe("originalview-label-scale")),Tn.default.createElement("dd",null,"1:",o.map_scale),p!==void 0&&Tn.default.createElement(Tn.default.Fragment,null,Tn.default.createElement("dt",null,"Permalink"),Tn.default.createElement("dd",null,Tn.default.createElement("a",{href:p.url,rel:"noreferrer",target:"_blank"},p.url))),(h!==void 0||g!==void 0)&&Tn.default.createElement(Tn.default.Fragment,null,Tn.default.createElement("dt",null,fe("originalview-label-services")),h!==void 0&&Tn.default.createElement("dd",null,Tn.default.createElement("a",{href:h.url,rel:"noreferrer",target:"_blank"},"WMS")),g!==void 0&&Tn.default.createElement("dd",null,Tn.default.createElement("a",{href:g.url,rel:"noreferrer",target:"_blank"},"WCS"))))),!b&&Tn.default.createElement("div",{className:"content-map"},Tn.default.createElement($rt,{urlImageProperties:o.zoomify_url,withImageManipulation:!0}))),isOpen:t,title:fe(b?"originalview-title-mosaic":"originalview-title")})};Yrt.propTypes={isOpen:l8.default.bool,onClose:l8.default.func,map_id:l8.default.string};var N4r=()=>{let[e,t]=On(vk);return Tn.default.createElement(Yrt,{isOpen:e!==void 0,onClose:()=>t(void 0),map_id:e})},Zrt=N4r;var Ao=Z(we(),1),ny=Z(xt(),1);var Krt=e=>([t,r])=>{let n=e[t];return Object.hasOwn(e,t)&&Le(n)&&n!==""?[t,n]:[t,r]},Zie=e=>{var t;return(t=e==null?void 0:e.geometry)==null?void 0:t.type},O4r=()=>{let e=Object.values(B0).map(({geometryTypes:r})=>r);return new Set(e.flat(2))},Kie=(()=>{let e=O4r(),t={};for(let r of e)t[r]=([n])=>$Q.includes(n)&&B0[n].geometryTypes.includes(r);return t})(),L4r=([e])=>!sC.includes(e),P4r=([e])=>!WQ.includes(e);var k4r=e=>{let t=Zie(e),n=Object.entries(e.properties).filter(o=>!Kie[t](o));return Object.fromEntries(n)},R4r=e=>{let t=Zie(e),n=Object.entries(e.properties).filter(o=>Kie[t](o));return Object.fromEntries(n)},Xie=e=>{let t=Zie(e),r=R4r(e);return Object.entries(B0).filter(Kie[t]).map(([o,{default:i}])=>[o,i(t)]).map(Krt(r))},Jie=e=>{let t=k4r(e),n=sC.map(i=>[i,""]).map(Krt(t)),o=Object.entries(t).filter(L4r).filter(P4r);return[...n,...o]},Xrt=e=>{let t=["marker","stroke","stroke-opacity","stroke-width","fill","fill-opacity","geometry"];return Object.keys(e.properties).filter(n=>!t.includes(n)).reduce((n,o)=>qt(Se({},n),{[o]:e.properties[o]}),{})},j4r=(e,t)=>Object.keys(e).filter(n=>{let o=WQ.includes(n),i=$Q.includes(n),a=!Le(t[n])||t[n]==="";return!o&&!i&&a}),Jrt=({oldProperties:e,propertyFields:t,styleFields:r})=>{let n={};t.forEach(([p,h])=>{let g=h==="",x=p==="";Le(p)&&!x&&!g&&(n[p]=h)}),r.forEach(([p,h])=>{n[p]=h});let o=Object.fromEntries(t),i=j4r(e,o);return{addOrUpdateProperties:Object.entries(n).map(([p,h])=>({key:p,value:h})),removeProperties:i}},Qrt=(e,t,r)=>{let n={key:!1,value:!1},o=r.some(([i])=>i.toLowerCase()===e.toLowerCase());return(!e.trim()||o)&&(n.key=!0),t.trim()||(n.value=!0),{isValid:!n.key&&!n.value,errors:n}},sp=e=>{e(la,jo.NONE),e(Hc,Ws.STANDARD),e(Jn,null),e(kh,null),e(ba,null),e(Zs,null)},bD=e=>{if(!Le(e))return;let t=structuredClone(e);for(let r of t.features)delete r.id;return t},u8=65535,ent=(e,t)=>{if(!Le(u8))throw new Error("Cannot generate feature id. MAX_VALUE_UINT_16 is not specified");if(!Le(e)||!Le(t))throw new Error("Cannot generate feature id. Version or index is missing.");if(!Number.isInteger(e)||!Number.isInteger(t))throw new Error("Cannot generate feature id. Version or index is not of type number");if(e>u8||t>u8)throw new Error(`Cannot generate feature id. Version or index is > ${u8}`);let r=new ArrayBuffer(4),n=new DataView(r);return n.setUint16(0,e),n.setUint16(2,t),n.getUint32(0)},tnt=e=>{let t=structuredClone(e);for(let[r,n]of t.features.entries())n.id=ent(r+1,0);return t},rnt=(e,t,r)=>{let n=structuredClone(t),o=new Set;for(let a of t.features)e.features.find(p=>p.id===a.id)||o.add(a.id);if(o.size===0)return n;let i=n.features.map((a,u)=>o.has(a.id)?qt(Se({},a),{id:ent(u+1,r)}):a);return qt(Se({},n),{features:i})},Qie=(e,t)=>{let r=n=>({id:"mapWrapper",type:"danger",text:fe(n)});if(e.response){if(e.response.status===401){t(ji,r("common-errors-http-401"));return}if(e.response.status===403){t(ji,r("common-errors-http-403"));return}if(e.response.status===409){t(ji,r("geojson-draw-version-conflict"));return}if(e.response.status===422){t(ji,r("geojson-draw-error-invalid-input"));return}}t(ji,r("common-errors-unexpected")),console.error(e)},nnt=e=>{let t=[it.title,it.description,it.thumbnailUrl];return Object.fromEntries(Object.entries(e).filter(([n])=>t.includes(n)))},eae=e=>{let t=structuredClone(e),r={[it.thumbnailUrl]:"link_thumb"};for(let[n,o]of Object.entries(r)){let i=t[n];t[o]=i,delete t[n]}return Object.fromEntries(Object.entries(t).map(([n,o])=>!Le(o)||o===""?[n,null]:[n,o]))};var ll=Z(we(),1),c8=Z(xt(),1),ont=Z(qre(),1);var Cu={INITIAL:0,IMAGE:1,ERROR:2,PLACEHOLDER:3,LOADING:4},tae=({imageUrl:e,showPlaceholder:t,imageAsPreview:r})=>{let[n,o]=(0,ll.useState)(Cu.INITIAL),i=(0,ll.useRef)(e);e!==i.current&&(o(Cu.INITIAL),i.current=e),n===Cu.INITIAL&&(e.length===0&&t?o(Cu.PLACEHOLDER):o(Cu.LOADING));let a=n===Cu.LOADING||n===Cu.IMAGE,u=(0,ll.useMemo)(()=>n===Cu.PLACEHOLDER?"placeholder":n===Cu.ERROR?"error":"image",[n]);return ll.default.createElement("div",{className:"image-with-fallback-root"},ll.default.createElement("div",{className:`image-container ${u}`},a&&ll.default.createElement(ll.default.Fragment,null,n===Cu.LOADING&&ll.default.createElement(ont.default.default,{height:180}),ll.default.createElement("img",{className:`${r?"preview":""} ${n===Cu.LOADING?"loading":""}`,src:e,onLoad:()=>o(Cu.IMAGE),onError:()=>o(Cu.ERROR)})),!a&&ll.default.createElement("div",{className:`image-fallback-icon ${u}`},ll.default.createElement(qr,{name:"image-placeholder"})),n===Cu.ERROR&&ll.default.createElement("p",{className:"image-fallback-text"},fe("geojson-image-fallback-p"))))};tae.defaultPropTypes={imageAsPreview:!1,showPlaceholder:!1,imageUrl:""};tae.propTypes={imageUrl:c8.default.string,showPlaceholder:c8.default.bool,imageAsPreview:c8.default.bool};var int=tae;var DE=int;var wD=Z(we(),1);var ul=Z(we(),1),f8=Z(xt(),1);var ant=({title:e,onClick:t,value:r})=>{let[n,o]=(0,ul.useState)(!1),i=(0,ul.useRef)(),a=(0,ul.useRef)(),u=(0,ul.useCallback)(()=>{(t!==void 0&&r===""?t():new Promise(h=>h())).then(h=>{clearTimeout(a.current),navigator.clipboard.writeText(h!==void 0?h:r),o(!0)})},[t,r]);return(0,ul.useEffect)(()=>(n&&(a.current=setTimeout(()=>{o(!1)},1e3)),()=>{clearTimeout(a.current)}),[n]),ul.default.createElement(ul.default.Fragment,null,ul.default.createElement("button",{className:"copy-button",onClick:u,ref:i,title:e!=null?e:fe("control-permalink-exporter-copy-title")},ul.default.createElement(Vh,{glyph:"copy"})),ul.default.createElement(Bte,{placement:"right",target:i.current,show:n},ul.default.createElement(Jte,{id:"copy-state-indicator"},fe("control-permalink-exporter-copy"))))};ant.propTypes={title:f8.default.string,onClick:f8.default.func,value:f8.default.string};var snt=ant;var NE=snt;var p8=e=>{let{center:t,bearing:r,pitch:n,zoom:o}=e;return Object.assign({},t===void 0?null:{c:t},r===void 0?null:{be:r},n===void 0?null:{p:n},o===void 0?null:{z:o})},d8=e=>hr.getBaseMaps().filter(n=>n.id===e).length>0?{b:e}:{},h8=e=>({map_id:e.filter(t=>t.getType()===Cn.HISTORIC_MAP||t.getMetadata(it.vectorMapId)).map(t=>t.getId())}),m8=e=>({v:e?ER["3D"]:ER["2D"]}),lnt=({featureId:e,sourceId:t})=>({fid:e,foid:t});var unt=Z(wk(),1);var q4r=()=>Or(({snapshot:e})=>()=>At(void 0,null,function*(){let t=yield e.getPromise(yr),r=yield e.getPromise(Ys);if(!Le(t)||!Le(r))return;let n=yield e.getPromise(_n),o=yield e.getPromise(Vc),i=m8(t.hasTerrain()),a=h8(n),u=d8(o),p=p8(cw(t,!0)),h=lnt(r),g=(0,unt.stringify)(Object.assign({},p,i,a,h,u),{arrayFormat:"comma"});return Promise.resolve(fw(g))}),[]),cnt=q4r;var z4r=()=>{let e=ht(_n),t=ht(Ys),r=(0,wD.useMemo)(()=>{if(Le(t)&&Le(e)){let{sourceId:o}=t,i=e.find(a=>a.getId()===o);return Le(i==null?void 0:i.getMetadata(it.vectorMapId))}return!1},[e,t]),n=cnt();return r?wD.default.createElement("div",{className:"feature-permalink-button-root"},wD.default.createElement(NE,{title:fe("feature-permalink-exporter-copy-title"),onClick:n,value:""})):null},fnt=z4r;var pnt=fnt;var F4r=[...sC],dnt=({feature:e,onClose:t})=>{let r=(0,Ao.useMemo)(()=>Xrt(e),[e]),{defaultTitle:n,defaultTime:o,defaultDescription:i}=(0,Ao.useMemo)(()=>({defaultTitle:fe("geojson-featureview-no-title"),defaultTime:fe("geojson-featureview-no-time"),defaultDescription:fe("geojson-featureview-no-description")}),[]),a=(0,Ao.useCallback)(T=>Le(T)?ed(T)?Qu(T):fe("geojson-featureview-invalid-time"):o,[]),{imageLink:u,title:p,description:h,time:g}=(0,Ao.useMemo)(()=>{var T,A;return{imageLink:r[ci.imgLink],title:(T=r[ci.title])!=null?T:n,description:(A=r[ci.description])!=null?A:i,time:a(r[ci.time])}},[r]),x=(0,Ao.useMemo)(()=>Le(u)&&u.length>0,[u]),b=(0,Ao.useMemo)(()=>Object.entries(r).filter(([T])=>!F4r.includes(T)),[r]);return Ao.default.createElement("div",{className:"geojson-feature-panel-root vkf-geojson-feature-view-content"},Ao.default.createElement(fd,{extraButton:Ao.default.createElement(pnt,null),title:fe("geojson-featureview-header-text"),onCloseClick:t}),Ao.default.createElement("div",{className:"property-container scrollable"},x&&Ao.default.createElement(DE,{imageUrl:u}),Ao.default.createElement("div",{className:"predefined-properties-container"},Ao.default.createElement("div",{className:"title-section "},Ao.default.createElement("span",{className:"geojson-feature-property-label"},fe("geojson-featureview-title")),Ao.default.createElement("span",{className:"title"},p)),Ao.default.createElement("div",{className:"description-section"},Ao.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-description")),Ao.default.createElement("p",{className:"description geojson-feature-property-input"},h)),Ao.default.createElement("div",{className:"time-section"},Ao.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-time")),Ao.default.createElement("p",{className:"time geojson-feature-property-input"},g))),Ao.default.createElement("div",{className:"properties-container"},b.length>0&&Ao.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-featureview-metadata")),b.map(([T,A])=>Ao.default.createElement("div",{key:T},Ao.default.createElement("label",{htmlFor:T,className:"geojson-feature-property-label"},T),Ao.default.createElement("p",{className:"geojson-feature-property-input",key:T},A))))))};dnt.propTypes={feature:ny.default.shape({id:ny.default.oneOfType([ny.default.number,ny.default.string]).isRequired,geometry:ny.default.object.isRequired,properties:ny.default.object.isRequired}).isRequired,onClose:ny.default.func};var hnt=dnt;var OE=Z(we(),1),rae=Z(xt(),1);var mnt=({geoJsonFeature:e,resetFeature:t})=>{let r=(0,OE.useCallback)(()=>{t()},[t]);return OE.default.createElement(OE.default.Fragment,null,OE.default.createElement(gnt,{feature:e,onClose:r}))};mnt.propTypes={geoJsonFeature:rae.default.object.isRequired,resetFeature:rae.default.func.isRequired};var nae=mnt;var gnt=hnt;var ED=Z(xt(),1),_m=Z(we(),1);var oae=({className:e,Component:t,props:r,onExit:n})=>{let o=(0,_m.useRef)(null),[i,a]=(0,_m.useState)(null),u=Le(r);u&&o.current!==r&&(a(_m.default.createElement(t,Se({},r))),o.current=r);let p=(0,_m.useCallback)(()=>{u||(o.current=null,a(null),n&&n())},[u,n]);return _m.default.createElement("div",{onTransitionEnd:p,className:Et(e,r!==null&&"in")},i)};oae.propTypes={className:ED.default.string.isRequired,Component:ED.default.func.isRequired,props:ED.default.object,onExit:ED.default.func};oae.defaultPropTypes={props:null};var vnt=oae;var LE=vnt;var Cd=Z(we(),1);var U4r=e=>{var t;return Le((t=e.layer.metadata)==null?void 0:t[jh.id])},g8=(e,t)=>`${e}-${t}`,B4r=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},V4r=e=>{let{properties:t,type:r,id:n,geometry:o}=e;return{id:n,geometry:o,properties:t,type:r}},G4r=2;function H4r(){let e=Mr(ji),t=ht(yr),r=ht(_n),[n,o]=On(Ys),[i,a]=(0,Cd.useState)(null),u=(0,Cd.useRef)(null),p=(0,Cd.useCallback)(()=>{u.current=null,a(null),o(null)},[]),h=(0,Cd.useCallback)(g=>{let{point:x}=g,b=B4r(x,G4r),T=t.queryRenderedFeatures(b).filter(U4r).at(0);if(Le(T)){let{id:A,source:L}=T;if(!Le(A)){e({id:"no-feature-id",type:"warning",text:fe("error-no-feature-id")});return}if(g8(A,L)===u.current)return;o({featureId:A,sourceId:L}),u.current=g8(A,L),a(V4r(T))}else p()},[]);return(0,Cd.useEffect)(()=>{if(Le(t))return t.on("click",h),()=>{t.off("click",h)}},[]),(0,Cd.useEffect)(()=>{if(!Le(n)){Le(u.current)&&p();return}if(Le(r)&&r.length>0){let{featureId:g,sourceId:x}=n;if(g8(g,x)===u.current)return;let b=r.find(A=>A.getId()===x);if(!Le(b)){console.error(`No layer found with id '${x}'.`),p();return}let T=b.getFeature(g);if(!Le(T)){console.error(`No feature found with id '${g}'.`),p();return}u.current=g8(g,x),a(T)}},[r,n]),i===null?null:{geoJsonFeature:i,resetFeature:p}}var ynt=H4r;var Mi=Z(we(),1),T1=Z(xt(),1);var _nt=Z(we(),1);var xnt=()=>{let{zoomToExtent:e}=pz(),t=Or(({snapshot:n,set:o})=>(i,a)=>At(void 0,null,function*(){let u=yield n.getPromise(yr);if(Le(u)){try{let p={[it.title]:i},h=bD(a),g=Ua.fromPersistence({metadata:p,geoJson:h});g.addLayerToMap(u),e(g),o(_n,x=>[...x,g]),o($s,g.getId())}catch(p){console.log(p),o(ji,{id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})}o(x9e,!1)}}),[e]),r=Or(({set:n})=>(o,i)=>At(void 0,null,function*(){let a=bD(i);a=Ua.toApplicationState(a),n(ba,a),n(Zs,{[it.title]:o}),n(Jn,{type:Hi.REMOTE,id:null,layerRole:"owner"}),n(Hc,Ws.DRAW)}),[]);return(0,_nt.useCallback)((n,o,i)=>i?r(n,o):t(n,o),[t,r])};var v8=Z(we(),1);var iae=Z(xt(),1),bnt=({disabled:e,id:t})=>v8.default.createElement("span",{className:"toggle-switch"},v8.default.createElement("input",{className:"toggle__input",disabled:e,name:t,type:"checkbox",id:t}),v8.default.createElement("div",{className:"toggle__fill"}));bnt.propTypes={disabled:iae.default.bool,id:iae.default.string.isRequired};var wnt=bnt;var Ent="persistGeoJson",Snt=({onSubmit:e,initialName:t,onClose:r})=>Mi.default.createElement(Mi.default.Fragment,null,Mi.default.createElement("form",{id:"add-geojson-form",onSubmit:e},Mi.default.createElement(Dj,null,Mi.default.createElement("p",{className:"adddialog-description"},fe("geojson-adddialog-description")),Mi.default.createElement(oj,{className:"geojson-label",htmlFor:"title"},fe("geojson-adddialog-layer-title-label")),Mi.default.createElement(nte,{autoFocus:!0,defaultValue:t!=null?t:"Unknown",name:"title",type:"text",className:"geojson-input"})),Mi.default.createElement(Dj,null,Mi.default.createElement(oj,{className:"switch-label",htmlFor:Ent},Mi.default.createElement(wnt,{disabled:!sq(),id:Ent}),Mi.default.createElement("p",{className:"geojson-label persistent-button-label"},fe("geojson-adddialog-persistent-button-label"))),Mi.default.createElement("div",null,Mi.default.createElement("p",{className:"persistent-button-description"},fe("geojson-adddialog-persistent-description"))))),Mi.default.createElement("div",{className:"add-geojson-buttons"},Mi.default.createElement(mn,{type:"save",form:"add-geojson-form",className:"btn btn-primary confirm-button"},fe("geojson-adddialog-confirm")),Mi.default.createElement(mn,{className:"cancel-button",type:"discard",onClick:r},fe("geojson-adddialog-cancel"))));Snt.propTypes={onSubmit:T1.default.func.isRequired,initialName:T1.default.string,onClose:T1.default.func.isRequired};var Int=({initialName:e,onClose:t,onSubmit:r})=>Mi.default.createElement(lf,{isOpen:!0,onClose:t,title:fe("geojson-adddialog-title"),renderContent:()=>Mi.default.createElement(Snt,{initialName:e,onSubmit:r,onClose:t}),modalClassName:"vkf-dialog-add-geojson"});Int.propTypes={initialName:T1.default.string,onClose:T1.default.func.isRequired,onSubmit:T1.default.func.isRequired};var W4r=()=>{let[e,t]=On(xk),r=xnt(),n=(0,Mi.useCallback)(()=>{t(null)},[]),o=(0,Mi.useCallback)(i=>{i.preventDefault();let a=new FormData(i.currentTarget),u=a.get("title"),p=a.get("persistGeoJson")==="on";r(u,e.content,p).then(()=>{t(null)})},[r,e,t]);return e?Mi.default.createElement(Int,{initialName:e.name,onClose:n,onSubmit:o}):null},Tnt=W4r;var fa=Z(we(),1),Dnt=Z(xt(),1);var Mnt=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=function(){try{t({content:JSON.parse(this.result),modified:e.lastModified,name:e.name.split(".")[0]})}catch(o){console.log(o),r()}},n.readAsText(e)});var oy=Z(we(),1);var aae=Z(xt(),1),Cnt=({refFileInput:e,onSelectFile:t})=>{let r=(0,oy.useCallback)(o=>{t(o.target.files[0])},[]),n=(0,oy.useCallback)(o=>{o.stopPropagation()},[]);return oy.default.createElement(oy.default.Fragment,null,oy.default.createElement("label",{className:"visually-hidden",htmlFor:"geojson-upload-file"},"GeoJSON Upload"),oy.default.createElement("input",{onClick:n,id:"geojson-upload-file",accept:"application/json, application/geo+json, .geojson",className:"hidden-file-input",type:"file",ref:e,onChange:r}))};Cnt.propTypes={refFileInput:aae.default.object.isRequired,onSelectFile:aae.default.func.isRequired};var Ant=Cnt;var Nnt=Z(Si(),1),{FILE:$4r}=lv,Y4r={WRONG_FILETYPE:"wrong-filetype"},Ont=()=>{let[e,t]=(0,fa.useState)(void 0),[r,n]=On(_k),o=Mr(xk),i=Mr(ji),a=(0,fa.useRef)(),u=(0,fa.useCallback)(A=>{console.error(A),i({id:"mapWrapper",type:"danger",text:fe("mapwrapper-geojson-parse-error")})},[]),p=(0,fa.useCallback)(()=>{n(!1)},[]),h=(0,fa.useCallback)(A=>{A.preventDefault(),A.stopPropagation(),a.current!==void 0&&a.current!==null&&(a.current.click(),document.activeElement.blur())},[]),g=(0,fa.useCallback)(A=>{Mnt(A).then(L=>{o(L),n(!1)}).catch(L=>u(L))},[u]),x=(0,fa.useMemo)(()=>({accept:$4r,canDrop:()=>r,collect(A){return{canDrop:A.canDrop(),isOver:A.isOver()}},drop:A=>{g(A.files[0])},hover:(A,L)=>{let P=L.getItem();P.items.length>0&&P.items[0].type!=="application/json"&&P.items[0].type!=="application/geo+json"&&t(Y4r.WRONG_FILETYPE)}}),[g,r]),[{isOver:b},T]=YP(x);return(0,fa.useEffect)(()=>{b||t(void 0)},[b]),r?(0,Nnt.createPortal)(fa.default.createElement("div",{className:Et("vkf-dropzone",r&&"animation-show"),ref:T},fa.default.createElement("div",{className:"dropzone-content-container",onClick:p},fa.default.createElement("button",{onClick:h,className:"dropzone-content"},fa.default.createElement(Qs,{name:"dropzone-upload"}),fa.default.createElement("p",{className:Et("dropzone-info",e!==void 0&&"error")},e===void 0?fe("dropzone-drop"):fe(`dropzone-${e}`))),fa.default.createElement(Ant,{refFileInput:a,onSelectFile:g}))),document.body):null};Ont.propTypes={children:Dnt.default.node};var Lnt=Ont;var sae=()=>{let e=ynt(),{selectedLayer:t}=ht(Qp);return lc.default.createElement(lc.default.Fragment,null,lc.default.createElement("div",{className:"vkf-horizontal-layout"},lc.default.createElement("div",{className:"spatialsearch-container",id:"spatialsearch-container"},lc.default.createElement(VQe,null)),lc.default.createElement(LE,{className:"geojson-feature-panel-container",Component:nae,props:e}),lc.default.createElement("div",{className:"layermanagement-container",id:"layermanagement-container"},lc.default.createElement(dz,null)),lc.default.createElement(LE,{className:"vkf-geojson-layer-view-root",Component:XXe,props:t?{selectedLayer:t}:null})),lc.default.createElement(Zrt,null),lc.default.createElement(Tnt,null),lc.default.createElement(Lnt,null))};var _f=Z(we(),1);var _ae=Z(we(),1);var Z4r=function(e,t){let r={drag:[],click:[],mousemove:[],mousedown:[],mouseup:[],mouseout:[],keydown:[],keyup:[],touchstart:[],touchmove:[],touchend:[],tap:[]},n={on(i,a,u){if(r[i]===void 0)throw new Error(`Invalid event type: ${i}`);r[i].push({selector:a,fn:u})},render(i){t.store.featureChanged(i)}},o=function(i,a){let u=r[i],p=u.length;for(;p--;){let h=u[p];if(h.selector(a)){h.fn.call(n,a)||t.store.render(),t.ui.updateMapClasses();break}}};return e.start.call(n),{render:e.render,stop(){e.stop&&e.stop()},trash(){e.trash&&(e.trash(),t.store.render())},combineFeatures(){e.combineFeatures&&e.combineFeatures()},uncombineFeatures(){e.uncombineFeatures&&e.uncombineFeatures()},drag(i){o("drag",i)},click(i){o("click",i)},mousemove(i){o("mousemove",i)},mousedown(i){o("mousedown",i)},mouseup(i){o("mouseup",i)},mouseout(i){o("mouseout",i)},keydown(i){o("keydown",i)},keyup(i){o("keyup",i)},touchstart(i){o("touchstart",i)},touchmove(i){o("touchmove",i)},touchend(i){o("touchend",i)},tap(i){o("tap",i)}}},SD=Z4r;var Fnt=Z(qnt(),1);var Fo={};a2(Fo,{LAT_MAX:()=>X4r,LAT_MIN:()=>K4r,LAT_RENDERED_MAX:()=>x8,LAT_RENDERED_MIN:()=>_8,LNG_MAX:()=>Q4r,LNG_MIN:()=>J4r,activeStates:()=>$o,classes:()=>Ss,cursors:()=>ho,events:()=>qi,geojsonTypes:()=>lr,interactions:()=>fae,meta:()=>di,modes:()=>nn,sources:()=>jl,types:()=>Ea,updateActions:()=>iy});var Ss={CANVAS:"mapboxgl-canvas",CONTROL_BASE:"mapboxgl-ctrl",CONTROL_PREFIX:"mapboxgl-ctrl-",CONTROL_BUTTON:"mapbox-gl-draw_ctrl-draw-btn",CONTROL_BUTTON_LINE:"mapbox-gl-draw_line",CONTROL_BUTTON_POLYGON:"mapbox-gl-draw_polygon",CONTROL_BUTTON_POINT:"mapbox-gl-draw_point",CONTROL_BUTTON_TRASH:"mapbox-gl-draw_trash",CONTROL_BUTTON_COMBINE_FEATURES:"mapbox-gl-draw_combine",CONTROL_BUTTON_UNCOMBINE_FEATURES:"mapbox-gl-draw_uncombine",CONTROL_GROUP:"mapboxgl-ctrl-group",ATTRIBUTION:"mapboxgl-ctrl-attrib",ACTIVE_BUTTON:"active",BOX_SELECT:"mapbox-gl-draw_boxselect"},jl={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},ho={ADD:"add",MOVE:"move",DRAG:"drag",POINTER:"pointer",NONE:"none"},Ea={POLYGON:"polygon",LINE:"line_string",POINT:"point"},lr={FEATURE:"Feature",POLYGON:"Polygon",LINE_STRING:"LineString",POINT:"Point",FEATURE_COLLECTION:"FeatureCollection",MULTI_PREFIX:"Multi",MULTI_POINT:"MultiPoint",MULTI_LINE_STRING:"MultiLineString",MULTI_POLYGON:"MultiPolygon"},nn={DRAW_LINE_STRING:"draw_line_string",DRAW_POLYGON:"draw_polygon",DRAW_POINT:"draw_point",SIMPLE_SELECT:"simple_select",DIRECT_SELECT:"direct_select"},qi={CREATE:"draw.create",DELETE:"draw.delete",UPDATE:"draw.update",SELECTION_CHANGE:"draw.selectionchange",MODE_CHANGE:"draw.modechange",ACTIONABLE:"draw.actionable",RENDER:"draw.render",COMBINE_FEATURES:"draw.combine",UNCOMBINE_FEATURES:"draw.uncombine"},iy={MOVE:"move",CHANGE_PROPERTIES:"change_properties",CHANGE_COORDINATES:"change_coordinates"},di={FEATURE:"feature",MIDPOINT:"midpoint",VERTEX:"vertex"},$o={ACTIVE:"true",INACTIVE:"false"},fae=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate"],K4r=-90,_8=-85,X4r=90,x8=85,J4r=-270,Q4r=270;var znt={Point:0,LineString:1,MultiLineString:1,Polygon:2};function eNr(e,t){let r=znt[e.geometry.type]-znt[t.geometry.type];return r===0&&e.geometry.type===lr.POLYGON?e.area-t.area:r}function tNr(e){return e.map(t=>(t.geometry.type===lr.POLYGON&&(t.area=Fnt.default.geometry({type:lr.FEATURE,property:{},geometry:t.geometry})),t)).sort(eNr).map(t=>(delete t.area,t))}var b8=tNr;function rNr(e,t=0){return[[e.point.x-t,e.point.y-t],[e.point.x+t,e.point.y+t]]}var w8=rNr;function PE(e){if(this._items={},this._nums={},this._length=e?e.length:0,!!e)for(let t=0,r=e.length;t<r;t++)this.add(e[t]),e[t]!==void 0&&(typeof e[t]=="string"?this._items[e[t]]=t:this._nums[e[t]]=t)}PE.prototype.add=function(e){return this.has(e)?this:(this._length++,typeof e=="string"?this._items[e]=this._length:this._nums[e]=this._length,this)};PE.prototype.delete=function(e){return this.has(e)===!1?this:(this._length--,delete this._items[e],delete this._nums[e],this)};PE.prototype.has=function(e){return typeof e!="string"&&typeof e!="number"?!1:this._items[e]!==void 0||this._nums[e]!==void 0};PE.prototype.values=function(){let e=[];return Object.keys(this._items).forEach(t=>{e.push({k:t,v:this._items[t]})}),Object.keys(this._nums).forEach(t=>{e.push({k:JSON.parse(t),v:this._nums[t]})}),e.sort((t,r)=>t.v-r.v).map(t=>t.k)};PE.prototype.clear=function(){return this._length=0,this._items={},this._nums={},this};var hf=PE;var nNr=[di.FEATURE,di.MIDPOINT,di.VERTEX],lp={click:oNr,touch:iNr};function oNr(e,t,r){return Unt(e,t,r,r.options.clickBuffer)}function iNr(e,t,r){return Unt(e,t,r,r.options.touchBuffer)}function Unt(e,t,r,n){if(r.map===null)return[];let o=e?w8(e,n):t,i={};r.options.styles&&(i.layers=r.options.styles.map(h=>h.id).filter(h=>r.map.getLayer(h)!=null));let a=r.map.queryRenderedFeatures(o,i).filter(h=>nNr.indexOf(h.properties.meta)!==-1),u=new hf,p=[];return a.forEach(h=>{let g=h.properties.id;u.has(g)||(u.add(g),p.push(h))}),b8(p)}function M1(e,t){let r=lp.click(e,null,t),n={mouse:ho.NONE};return r[0]&&(n.mouse=r[0].properties.active===$o.ACTIVE?ho.MOVE:ho.POINTER,n.feature=r[0].properties.meta),t.events.currentModeName().indexOf("draw")!==-1&&(n.mouse=ho.ADD),t.ui.queueMapClasses(n),t.ui.updateMapClasses(),r[0]}function kE(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}var aNr=4,sNr=12,lNr=500;function RE(e,t,r={}){let n=r.fineTolerance!=null?r.fineTolerance:aNr,o=r.grossTolerance!=null?r.grossTolerance:sNr,i=r.interval!=null?r.interval:lNr;e.point=e.point||t.point,e.time=e.time||t.time;let a=kE(e.point,t.point);return a<n||a<o&&t.time-e.time<i}var uNr=25,cNr=250;function jE(e,t,r={}){let n=r.tolerance!=null?r.tolerance:uNr,o=r.interval!=null?r.interval:cNr;return e.point=e.point||t.point,e.time=e.time||t.time,kE(e.point,t.point)<n&&t.time-e.time<o}var Bnt=(e,t=21)=>(r=t)=>{let n="",o=r|0;for(;o--;)n+=e[Math.random()*e.length|0];return n};var fNr=Bnt("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",32);function qE(){return fNr()}var ay=function(e,t){this.ctx=e,this.properties=t.properties||{},this.coordinates=t.geometry.coordinates,this.id=t.id||qE(),this.type=t.geometry.type};ay.prototype.changed=function(){this.ctx.store.featureChanged(this.id)};ay.prototype.incomingCoords=function(e){this.setCoordinates(e)};ay.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};ay.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.coordinates))};ay.prototype.setProperty=function(e,t){this.properties[e]=t};ay.prototype.toGeoJSON=function(){return JSON.parse(JSON.stringify({id:this.id,type:lr.FEATURE,properties:this.properties,geometry:{coordinates:this.getCoordinates(),type:this.type}}))};ay.prototype.internal=function(e){let t={id:this.id,meta:di.FEATURE,"meta:type":this.type,active:$o.INACTIVE,mode:e};if(this.ctx.options.userProperties)for(let r in this.properties)t[`user_${r}`]=this.properties[r];return{type:lr.FEATURE,properties:t,geometry:{coordinates:this.getCoordinates(),type:this.type}}};var mf=ay;var ID=function(e,t){mf.call(this,e,t)};ID.prototype=Object.create(mf.prototype);ID.prototype.isValid=function(){return typeof this.coordinates[0]=="number"&&typeof this.coordinates[1]=="number"};ID.prototype.updateCoordinate=function(e,t,r){arguments.length===3?this.coordinates=[t,r]:this.coordinates=[e,t],this.changed()};ID.prototype.getCoordinate=function(){return this.getCoordinates()};var C1=ID;var A1=function(e,t){mf.call(this,e,t)};A1.prototype=Object.create(mf.prototype);A1.prototype.isValid=function(){return this.coordinates.length>1};A1.prototype.addCoordinate=function(e,t,r){this.changed();let n=parseInt(e,10);this.coordinates.splice(n,0,[t,r])};A1.prototype.getCoordinate=function(e){let t=parseInt(e,10);return JSON.parse(JSON.stringify(this.coordinates[t]))};A1.prototype.removeCoordinate=function(e){this.changed(),this.coordinates.splice(parseInt(e,10),1)};A1.prototype.updateCoordinate=function(e,t,r){let n=parseInt(e,10);this.coordinates[n]=[t,r],this.changed()};var D1=A1;var Ad=function(e,t){mf.call(this,e,t),this.coordinates=this.coordinates.map(r=>r.slice(0,-1))};Ad.prototype=Object.create(mf.prototype);Ad.prototype.isValid=function(){return this.coordinates.length===0?!1:this.coordinates.every(e=>e.length>2)};Ad.prototype.incomingCoords=function(e){this.coordinates=e.map(t=>t.slice(0,-1)),this.changed()};Ad.prototype.setCoordinates=function(e){this.coordinates=e,this.changed()};Ad.prototype.addCoordinate=function(e,t,r){this.changed();let n=e.split(".").map(i=>parseInt(i,10));this.coordinates[n[0]].splice(n[1],0,[t,r])};Ad.prototype.removeCoordinate=function(e){this.changed();let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];r&&(r.splice(t[1],1),r.length<3&&this.coordinates.splice(t[0],1))};Ad.prototype.getCoordinate=function(e){let t=e.split(".").map(n=>parseInt(n,10)),r=this.coordinates[t[0]];return JSON.parse(JSON.stringify(r[t[1]]))};Ad.prototype.getCoordinates=function(){return this.coordinates.map(e=>e.concat([e[0]]))};Ad.prototype.updateCoordinate=function(e,t,r){this.changed();let n=e.split("."),o=parseInt(n[0],10),i=parseInt(n[1],10);this.coordinates[o]===void 0&&(this.coordinates[o]=[]),this.coordinates[o][i]=[t,r]};var N1=Ad;var pNr={MultiPoint:C1,MultiLineString:D1,MultiPolygon:N1},E8=(e,t,r,n,o)=>{let i=r.split("."),a=parseInt(i[0],10),u=i[1]?i.slice(1).join("."):null;return e[a][t](u,n,o)},up=function(e,t){if(mf.call(this,e,t),delete this.coordinates,this.model=pNr[t.geometry.type],this.model===void 0)throw new TypeError(`${t.geometry.type} is not a valid type`);this.features=this._coordinatesToFeatures(t.geometry.coordinates)};up.prototype=Object.create(mf.prototype);up.prototype._coordinatesToFeatures=function(e){let t=this.model.bind(this);return e.map(r=>new t(this.ctx,{id:qE(),type:lr.FEATURE,properties:{},geometry:{coordinates:r,type:this.type.replace("Multi","")}}))};up.prototype.isValid=function(){return this.features.every(e=>e.isValid())};up.prototype.setCoordinates=function(e){this.features=this._coordinatesToFeatures(e),this.changed()};up.prototype.getCoordinate=function(e){return E8(this.features,"getCoordinate",e)};up.prototype.getCoordinates=function(){return JSON.parse(JSON.stringify(this.features.map(e=>e.type===lr.POLYGON?e.getCoordinates():e.coordinates)))};up.prototype.updateCoordinate=function(e,t,r){E8(this.features,"updateCoordinate",e,t,r),this.changed()};up.prototype.addCoordinate=function(e,t,r){E8(this.features,"addCoordinate",e,t,r),this.changed()};up.prototype.removeCoordinate=function(e){E8(this.features,"removeCoordinate",e),this.changed()};up.prototype.getFeatures=function(){return this.features};var O1=up;function gn(e){this.map=e.map,this.drawConfig=JSON.parse(JSON.stringify(e.options||{})),this._ctx=e}gn.prototype.setSelected=function(e){return this._ctx.store.setSelected(e)};gn.prototype.setSelectedCoordinates=function(e){this._ctx.store.setSelectedCoordinates(e),e.reduce((t,r)=>(t[r.feature_id]===void 0&&(t[r.feature_id]=!0,this._ctx.store.get(r.feature_id).changed()),t),{})};gn.prototype.getSelected=function(){return this._ctx.store.getSelected()};gn.prototype.getSelectedIds=function(){return this._ctx.store.getSelectedIds()};gn.prototype.isSelected=function(e){return this._ctx.store.isSelected(e)};gn.prototype.getFeature=function(e){return this._ctx.store.get(e)};gn.prototype.select=function(e){return this._ctx.store.select(e)};gn.prototype.deselect=function(e){return this._ctx.store.deselect(e)};gn.prototype.deleteFeature=function(e,t={}){return this._ctx.store.delete(e,t)};gn.prototype.addFeature=function(e,t={}){return this._ctx.store.add(e,t)};gn.prototype.clearSelectedFeatures=function(){return this._ctx.store.clearSelected()};gn.prototype.clearSelectedCoordinates=function(){return this._ctx.store.clearSelectedCoordinates()};gn.prototype.setActionableState=function(e={}){let t={trash:e.trash||!1,combineFeatures:e.combineFeatures||!1,uncombineFeatures:e.uncombineFeatures||!1};return this._ctx.events.actionable(t)};gn.prototype.changeMode=function(e,t={},r={}){return this._ctx.events.changeMode(e,t,r)};gn.prototype.fire=function(e,t){return this._ctx.events.fire(e,t)};gn.prototype.updateUIClasses=function(e){return this._ctx.ui.queueMapClasses(e)};gn.prototype.activateUIButton=function(e){return this._ctx.ui.setActiveButton(e)};gn.prototype.featuresAt=function(e,t,r="click"){if(r!=="click"&&r!=="touch")throw new Error("invalid buffer type");return lp[r](e,t,this._ctx)};gn.prototype.newFeature=function(e){let t=e.geometry.type;return t===lr.POINT?new C1(this._ctx,e):t===lr.LINE_STRING?new D1(this._ctx,e):t===lr.POLYGON?new N1(this._ctx,e):new O1(this._ctx,e)};gn.prototype.isInstanceOf=function(e,t){if(e===lr.POINT)return t instanceof C1;if(e===lr.LINE_STRING)return t instanceof D1;if(e===lr.POLYGON)return t instanceof N1;if(e==="MultiFeature")return t instanceof O1;throw new Error(`Unknown feature class: ${e}`)};gn.prototype.doRender=function(e){return this._ctx.store.featureChanged(e)};var Vnt=gn;gn.prototype.onSetup=function(){};gn.prototype.onDrag=function(){};gn.prototype.onClick=function(){};gn.prototype.onMouseMove=function(){};gn.prototype.onMouseDown=function(){};gn.prototype.onMouseUp=function(){};gn.prototype.onMouseOut=function(){};gn.prototype.onKeyUp=function(){};gn.prototype.onKeyDown=function(){};gn.prototype.onTouchStart=function(){};gn.prototype.onTouchMove=function(){};gn.prototype.onTouchEnd=function(){};gn.prototype.onTap=function(){};gn.prototype.onStop=function(){};gn.prototype.onTrash=function(){};gn.prototype.onCombineFeature=function(){};gn.prototype.onUncombineFeature=function(){};gn.prototype.toDisplayFeatures=function(){throw new Error("You must overwrite toDisplayFeatures")};var Gnt={drag:"onDrag",click:"onClick",mousemove:"onMouseMove",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseout:"onMouseOut",keyup:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",tap:"onTap"},dNr=Object.keys(Gnt);function Hnt(e){let t=Object.keys(e);return function(r,n={}){let o={},i=t.reduce((u,p)=>(u[p]=e[p],u),new Vnt(r));function a(u){return p=>i[u](o,p)}return{start(){o=i.onSetup(n),dNr.forEach(u=>{let p=Gnt[u],h=()=>!1;e[p]&&(h=()=>!0),this.on(u,h,a(p))})},stop(){i.onStop(o)},trash(){i.onTrash(o)},combineFeatures(){i.onCombineFeatures(o)},uncombineFeatures(){i.onUncombineFeatures(o)},render(u,p){i.toDisplayFeatures(o,u,p)}}}}function Wnt(e){let t=Object.keys(e.options.modes).reduce((b,T)=>(b[T]=Hnt(e.options.modes[T]),b),{}),r={},n={},o={},i=null,a=null;o.drag=function(b,T){T({point:b.point,time:new Date().getTime()})?(e.ui.queueMapClasses({mouse:ho.DRAG}),a.drag(b)):b.originalEvent.stopPropagation()},o.mousedrag=function(b){o.drag(b,T=>!RE(r,T))},o.touchdrag=function(b){o.drag(b,T=>!jE(n,T))},o.mousemove=function(b){if((b.originalEvent.buttons!==void 0?b.originalEvent.buttons:b.originalEvent.which)===1)return o.mousedrag(b);let A=M1(b,e);b.featureTarget=A,a.mousemove(b)},o.mousedown=function(b){r={time:new Date().getTime(),point:b.point};let T=M1(b,e);b.featureTarget=T,a.mousedown(b)},o.mouseup=function(b){let T=M1(b,e);b.featureTarget=T,RE(r,{point:b.point,time:new Date().getTime()})?a.click(b):a.mouseup(b)},o.mouseout=function(b){a.mouseout(b)},o.touchstart=function(b){if(!e.options.touchEnabled)return;n={time:new Date().getTime(),point:b.point};let T=lp.touch(b,null,e)[0];b.featureTarget=T,a.touchstart(b)},o.touchmove=function(b){if(e.options.touchEnabled)return a.touchmove(b),o.touchdrag(b)},o.touchend=function(b){if(b.originalEvent.preventDefault(),!e.options.touchEnabled)return;let T=lp.touch(b,null,e)[0];b.featureTarget=T,jE(n,{time:new Date().getTime(),point:b.point})?a.tap(b):a.touchend(b)};let u=b=>!(b===8||b===46||b>=48&&b<=57);o.keydown=function(b){(b.srcElement||b.target).classList.contains(Ss.CANVAS)&&((b.keyCode===8||b.keyCode===46)&&e.options.controls.trash?(b.preventDefault(),a.trash()):u(b.keyCode)?a.keydown(b):b.keyCode===49&&e.options.controls.point?p(nn.DRAW_POINT):b.keyCode===50&&e.options.controls.line_string?p(nn.DRAW_LINE_STRING):b.keyCode===51&&e.options.controls.polygon&&p(nn.DRAW_POLYGON))},o.keyup=function(b){u(b.keyCode)&&a.keyup(b)},o.zoomend=function(){e.store.changeZoom()},o.data=function(b){if(b.dataType==="style"){let{setup:T,map:A,options:L,store:P}=e;L.styles.some(q=>A.getLayer(q.id))||(T.addLayers(),P.setDirty(),P.render())}};function p(b,T,A={}){a.stop();let L=t[b];if(L===void 0)throw new Error(`${b} is not valid`);i=b;let P=L(e,T);a=SD(P,e),A.silent||e.map.fire(qi.MODE_CHANGE,{mode:b}),e.store.setDirty(),e.store.render()}let h={trash:!1,combineFeatures:!1,uncombineFeatures:!1};function g(b){let T=!1;Object.keys(b).forEach(A=>{if(h[A]===void 0)throw new Error("Invalid action type");h[A]!==b[A]&&(T=!0),h[A]=b[A]}),T&&e.map.fire(qi.ACTIONABLE,{actions:h})}return{start(){i=e.options.defaultMode,a=SD(t[i](e),e)},changeMode:p,actionable:g,currentModeName(){return i},currentModeRender(b,T){return a.render(b,T)},fire(b,T){e.map&&e.map.fire(b,T)},addEventListeners(){e.map.on("mousemove",o.mousemove),e.map.on("mousedown",o.mousedown),e.map.on("mouseup",o.mouseup),e.map.on("data",o.data),e.map.on("touchmove",o.touchmove),e.map.on("touchstart",o.touchstart),e.map.on("touchend",o.touchend),e.container.addEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.addEventListener("keydown",o.keydown),e.container.addEventListener("keyup",o.keyup))},removeEventListeners(){e.map.off("mousemove",o.mousemove),e.map.off("mousedown",o.mousedown),e.map.off("mouseup",o.mouseup),e.map.off("data",o.data),e.map.off("touchmove",o.touchmove),e.map.off("touchstart",o.touchstart),e.map.off("touchend",o.touchend),e.container.removeEventListener("mouseout",o.mouseout),e.options.keybindings&&(e.container.removeEventListener("keydown",o.keydown),e.container.removeEventListener("keyup",o.keyup))},trash(b){a.trash(b)},combineFeatures(){a.combineFeatures()},uncombineFeatures(){a.uncombineFeatures()},getMode(){return i}}}function hNr(e){return[].concat(e).filter(t=>t!==void 0)}var L1=hNr;function pae(){let e=this;if(!(e.ctx.map&&e.ctx.map.getSource(jl.HOT)!==void 0))return p();let r=e.ctx.events.currentModeName();e.ctx.ui.queueMapClasses({mode:r});let n=[],o=[];e.isDirty?o=e.getAllIds():(n=e.getChangedIds().filter(h=>e.get(h)!==void 0),o=e.sources.hot.filter(h=>h.properties.id&&n.indexOf(h.properties.id)===-1&&e.get(h.properties.id)!==void 0).map(h=>h.properties.id)),e.sources.hot=[];let i=e.sources.cold.length;e.sources.cold=e.isDirty?[]:e.sources.cold.filter(h=>{let g=h.properties.id||h.properties.parent;return n.indexOf(g)===-1});let a=i!==e.sources.cold.length||o.length>0;n.forEach(h=>u(h,"hot")),o.forEach(h=>u(h,"cold"));function u(h,g){let b=e.get(h).internal(r);e.ctx.events.currentModeRender(b,T=>{T.properties.mode=r,e.sources[g].push(T)})}a&&e.ctx.map.getSource(jl.COLD).setData({type:lr.FEATURE_COLLECTION,features:e.sources.cold}),e.ctx.map.getSource(jl.HOT).setData({type:lr.FEATURE_COLLECTION,features:e.sources.hot}),p();function p(){e.isDirty=!1,e.clearChangedIds()}}function Uo(e){this._features={},this._featureIds=new hf,this._selectedFeatureIds=new hf,this._selectedCoordinates=[],this._changedFeatureIds=new hf,this._emitSelectionChange=!1,this._mapInitialConfig={},this.ctx=e,this.sources={hot:[],cold:[]};let t;this.render=()=>{t||(t=requestAnimationFrame(()=>{t=null,pae.call(this),this._emitSelectionChange&&(this.ctx.events.fire(qi.SELECTION_CHANGE,{features:this.getSelected().map(r=>r.toGeoJSON()),points:this.getSelectedCoordinates().map(r=>({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:r.coordinates}}))}),this._emitSelectionChange=!1),this.ctx.events.fire(qi.RENDER,{})}))},this.isDirty=!1}Uo.prototype.createRenderBatch=function(){let e=this.render,t=0;return this.render=function(){t++},()=>{this.render=e,t>0&&this.render()}};Uo.prototype.setDirty=function(){return this.isDirty=!0,this};Uo.prototype.featureCreated=function(e,t={}){if(this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0){let n=this.get(e);this.ctx.events.fire(qi.CREATE,{features:[n.toGeoJSON()]})}return this};Uo.prototype.featureChanged=function(e,t={}){return this._changedFeatureIds.add(e),(t.silent!=null?t.silent:this.ctx.options.suppressAPIEvents)!==!0&&this.ctx.events.fire(qi.UPDATE,{action:t.action?t.action:iy.CHANGE_COORDINATES,features:[this.get(e).toGeoJSON()]}),this};Uo.prototype.getChangedIds=function(){return this._changedFeatureIds.values()};Uo.prototype.clearChangedIds=function(){return this._changedFeatureIds.clear(),this};Uo.prototype.getAllIds=function(){return this._featureIds.values()};Uo.prototype.add=function(e,t={}){return this._features[e.id]=e,this._featureIds.add(e.id),this.featureCreated(e.id,{silent:t.silent}),this};Uo.prototype.delete=function(e,t={}){let r=[];return L1(e).forEach(n=>{this._featureIds.has(n)&&(this._featureIds.delete(n),this._selectedFeatureIds.delete(n),t.silent||r.indexOf(this._features[n])===-1&&r.push(this._features[n].toGeoJSON()),delete this._features[n],this.isDirty=!0)}),r.length&&this.ctx.events.fire(qi.DELETE,{features:r}),$nt(this,t),this};Uo.prototype.get=function(e){return this._features[e]};Uo.prototype.getAll=function(){return Object.keys(this._features).map(e=>this._features[e])};Uo.prototype.select=function(e,t={}){return L1(e).forEach(r=>{this._selectedFeatureIds.has(r)||(this._selectedFeatureIds.add(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),this};Uo.prototype.deselect=function(e,t={}){return L1(e).forEach(r=>{this._selectedFeatureIds.has(r)&&(this._selectedFeatureIds.delete(r),this._changedFeatureIds.add(r),t.silent||(this._emitSelectionChange=!0))}),$nt(this,t),this};Uo.prototype.clearSelected=function(e={}){return this.deselect(this._selectedFeatureIds.values(),{silent:e.silent}),this};Uo.prototype.setSelected=function(e,t={}){return e=L1(e),this.deselect(this._selectedFeatureIds.values().filter(r=>e.indexOf(r)===-1),{silent:t.silent}),this.select(e.filter(r=>!this._selectedFeatureIds.has(r)),{silent:t.silent}),this};Uo.prototype.setSelectedCoordinates=function(e){return this._selectedCoordinates=e,this._emitSelectionChange=!0,this};Uo.prototype.clearSelectedCoordinates=function(){return this._selectedCoordinates=[],this._emitSelectionChange=!0,this};Uo.prototype.getSelectedIds=function(){return this._selectedFeatureIds.values()};Uo.prototype.getSelected=function(){return this.getSelectedIds().map(e=>this.get(e))};Uo.prototype.getSelectedCoordinates=function(){return this._selectedCoordinates.map(t=>({coordinates:this.get(t.feature_id).getCoordinate(t.coord_path)}))};Uo.prototype.isSelected=function(e){return this._selectedFeatureIds.has(e)};Uo.prototype.setFeatureProperty=function(e,t,r,n={}){this.get(e).setProperty(t,r),this.featureChanged(e,{silent:n.silent,action:iy.CHANGE_PROPERTIES})};function $nt(e,t={}){let r=e._selectedCoordinates.filter(n=>e._selectedFeatureIds.has(n.feature_id));e._selectedCoordinates.length!==r.length&&!t.silent&&(e._emitSelectionChange=!0),e._selectedCoordinates=r}Uo.prototype.storeMapConfig=function(){fae.forEach(e=>{this.ctx.map[e]&&(this._mapInitialConfig[e]=this.ctx.map[e].isEnabled())})};Uo.prototype.restoreMapConfig=function(){Object.keys(this._mapInitialConfig).forEach(e=>{this._mapInitialConfig[e]?this.ctx.map[e].enable():this.ctx.map[e].disable()})};Uo.prototype.getInitialConfigValue=function(e){return this._mapInitialConfig[e]!==void 0?this._mapInitialConfig[e]:!0};var mNr=["mode","feature","mouse"];function Ynt(e){let t={},r=null,n={mode:null,feature:null,mouse:null},o={mode:null,feature:null,mouse:null};function i(){a({mode:null,feature:null,mouse:null}),u()}function a(T){o=Object.assign(o,T)}function u(){if(!e.container)return;let T=[],A=[];mNr.forEach(L=>{o[L]!==n[L]&&(T.push(`${L}-${n[L]}`),o[L]!==null&&A.push(`${L}-${o[L]}`))}),T.length>0&&e.container.classList.remove(...T),A.length>0&&e.container.classList.add(...A),n=Object.assign(n,o)}function p(T,A={}){let L=document.createElement("button");return L.className=`${Ss.CONTROL_BUTTON} ${A.className}`,L.setAttribute("title",A.title),A.container.appendChild(L),L.addEventListener("click",P=>{if(P.preventDefault(),P.stopPropagation(),P.target===r){h(),A.onDeactivate();return}g(T),A.onActivate()},!0),L}function h(){r&&(r.classList.remove(Ss.ACTIVE_BUTTON),r=null)}function g(T){h();let A=t[T];A&&A&&T!=="trash"&&(A.classList.add(Ss.ACTIVE_BUTTON),r=A)}function x(){let T=e.options.controls,A=document.createElement("div");return A.className=`${Ss.CONTROL_GROUP} ${Ss.CONTROL_BASE}`,T&&(T[Ea.LINE]&&(t[Ea.LINE]=p(Ea.LINE,{container:A,className:Ss.CONTROL_BUTTON_LINE,title:`LineString tool ${e.options.keybindings?"(l)":""}`,onActivate:()=>e.events.changeMode(nn.DRAW_LINE_STRING),onDeactivate:()=>e.events.trash()})),T[Ea.POLYGON]&&(t[Ea.POLYGON]=p(Ea.POLYGON,{container:A,className:Ss.CONTROL_BUTTON_POLYGON,title:`Polygon tool ${e.options.keybindings?"(p)":""}`,onActivate:()=>e.events.changeMode(nn.DRAW_POLYGON),onDeactivate:()=>e.events.trash()})),T[Ea.POINT]&&(t[Ea.POINT]=p(Ea.POINT,{container:A,className:Ss.CONTROL_BUTTON_POINT,title:`Marker tool ${e.options.keybindings?"(m)":""}`,onActivate:()=>e.events.changeMode(nn.DRAW_POINT),onDeactivate:()=>e.events.trash()})),T.trash&&(t.trash=p("trash",{container:A,className:Ss.CONTROL_BUTTON_TRASH,title:"Delete",onActivate:()=>{e.events.trash()}})),T.combine_features&&(t.combine_features=p("combineFeatures",{container:A,className:Ss.CONTROL_BUTTON_COMBINE_FEATURES,title:"Combine",onActivate:()=>{e.events.combineFeatures()}})),T.uncombine_features&&(t.uncombine_features=p("uncombineFeatures",{container:A,className:Ss.CONTROL_BUTTON_UNCOMBINE_FEATURES,title:"Uncombine",onActivate:()=>{e.events.uncombineFeatures()}}))),A}function b(){Object.keys(t).forEach(T=>{let A=t[T];A.parentNode&&A.parentNode.removeChild(A),delete t[T]})}return{setActiveButton:g,queueMapClasses:a,updateMapClasses:u,clearMapClasses:i,addButtons:x,removeButtons:b}}function Znt(e){let t=null,r=null,n={onRemove(){return e.map.off("load",n.connect),clearInterval(r),n.removeLayers(),e.store.restoreMapConfig(),e.ui.removeButtons(),e.events.removeEventListeners(),e.ui.clearMapClasses(),e.boxZoomInitial&&e.map.boxZoom.enable(),e.map=null,e.container=null,e.store=null,t&&t.parentNode&&t.parentNode.removeChild(t),t=null,this},connect(){e.map.off("load",n.connect),clearInterval(r),n.addLayers(),e.store.storeMapConfig(),e.events.addEventListeners()},onAdd(o){if(e.map=o,e.events=Wnt(e),e.ui=Ynt(e),e.container=o.getContainer(),e.store=new Uo(e),t=e.ui.addButtons(),e.options.boxSelect){e.boxZoomInitial=o.boxZoom.isEnabled(),o.boxZoom.disable();let i=o.dragPan.isEnabled();o.dragPan.disable(),o.dragPan.enable(),i||o.dragPan.disable()}return o.loaded()?n.connect():(o.on("load",n.connect),r=setInterval(()=>{o.loaded()&&n.connect()},16)),e.events.start(),t},addLayers(){e.map.addSource(jl.COLD,{data:{type:lr.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.map.addSource(jl.HOT,{data:{type:lr.FEATURE_COLLECTION,features:[]},type:"geojson"}),e.options.styles.forEach(o=>{e.map.addLayer(o)}),e.store.setDirty(!0),e.store.render()},removeLayers(){e.options.styles.forEach(o=>{e.map.getLayer(o.id)&&e.map.removeLayer(o.id)}),e.map.getSource(jl.COLD)&&e.map.removeSource(jl.COLD),e.map.getSource(jl.HOT)&&e.map.removeSource(jl.HOT)}};return e.setup=n,n}var dae="#3bb2d0",TD="#fbb03b",Knt="#fff",S8=[{id:"gl-draw-polygon-fill",type:"fill",filter:["all",["==","$type","Polygon"]],paint:{"fill-color":["case",["==",["get","active"],"true"],TD,dae],"fill-opacity":.1}},{id:"gl-draw-lines",type:"line",filter:["any",["==","$type","LineString"],["==","$type","Polygon"]],layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["case",["==",["get","active"],"true"],TD,dae],"line-dasharray":["case",["==",["get","active"],"true"],[.2,2],[2,0]],"line-width":2}},{id:"gl-draw-point-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Knt}},{id:"gl-draw-point-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","feature"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":["case",["==",["get","active"],"true"],TD,dae]}},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":Knt}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==","$type","Point"],["==","meta","vertex"],["!=","mode","simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":TD}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==","meta","midpoint"]],paint:{"circle-radius":3,"circle-color":TD}}];var j1={};a2(j1,{isActiveFeature:()=>xm,isEnterKey:()=>R1,isEscapeKey:()=>k1,isFeature:()=>T8,isInactiveFeature:()=>I8,isOfMetaType:()=>zE,isShiftDown:()=>UE,isShiftMousedown:()=>hae,isTrue:()=>gNr,isVertex:()=>P1,noTarget:()=>FE});function zE(e){return function(t){let r=t.featureTarget;return!r||!r.properties?!1:r.properties.meta===e}}function hae(e){return!e.originalEvent||!e.originalEvent.shiftKey?!1:e.originalEvent.button===0}function xm(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===$o.ACTIVE&&e.featureTarget.properties.meta===di.FEATURE}function I8(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.active===$o.INACTIVE&&e.featureTarget.properties.meta===di.FEATURE}function FE(e){return e.featureTarget===void 0}function T8(e){return!e.featureTarget||!e.featureTarget.properties?!1:e.featureTarget.properties.meta===di.FEATURE}function P1(e){let t=e.featureTarget;return!t||!t.properties?!1:t.properties.meta===di.VERTEX}function UE(e){return e.originalEvent?e.originalEvent.shiftKey===!0:!1}function k1(e){return e.keyCode===27}function R1(e){return e.keyCode===13}function gNr(){return!0}function Dd(e,t){this.x=e,this.y=t}Dd.prototype={clone(){return new Dd(this.x,this.y)},add(e){return this.clone()._add(e)},sub(e){return this.clone()._sub(e)},multByPoint(e){return this.clone()._multByPoint(e)},divByPoint(e){return this.clone()._divByPoint(e)},mult(e){return this.clone()._mult(e)},div(e){return this.clone()._div(e)},rotate(e){return this.clone()._rotate(e)},rotateAround(e,t){return this.clone()._rotateAround(e,t)},matMult(e){return this.clone()._matMult(e)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(e){return this.x===e.x&&this.y===e.y},dist(e){return Math.sqrt(this.distSqr(e))},distSqr(e){let t=e.x-this.x,r=e.y-this.y;return t*t+r*r},angle(){return Math.atan2(this.y,this.x)},angleTo(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith(e){return this.angleWithSep(e.x,e.y)},angleWithSep(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult(e){let t=e[0]*this.x+e[1]*this.y,r=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=r,this},_add(e){return this.x+=e.x,this.y+=e.y,this},_sub(e){return this.x-=e.x,this.y-=e.y,this},_mult(e){return this.x*=e,this.y*=e,this},_div(e){return this.x/=e,this.y/=e,this},_multByPoint(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint(e){return this.x/=e.x,this.y/=e.y,this},_unit(){return this._div(this.mag()),this},_perp(){let e=this.y;return this.y=this.x,this.x=-e,this},_rotate(e){let t=Math.cos(e),r=Math.sin(e),n=t*this.x-r*this.y,o=r*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround(e,t){let r=Math.cos(e),n=Math.sin(e),o=t.x+r*(this.x-t.x)-n*(this.y-t.y),i=t.y+n*(this.x-t.x)+r*(this.y-t.y);return this.x=o,this.y=i,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:Dd};Dd.convert=function(e){if(e instanceof Dd)return e;if(Array.isArray(e))return new Dd(+e[0],+e[1]);if(e.x!==void 0&&e.y!==void 0)return new Dd(+e.x,+e.y);throw new Error("Expected [x, y] or {x, y} point format")};function vNr(e,t){let r=t.getBoundingClientRect();return new Dd(e.clientX-r.left-(t.clientLeft||0),e.clientY-r.top-(t.clientTop||0))}var M8=vNr;function Nd(e,t,r,n){return{type:lr.FEATURE,properties:{meta:di.VERTEX,parent:e,coord_path:r,active:n?$o.ACTIVE:$o.INACTIVE},geometry:{type:lr.POINT,coordinates:t}}}function C8(e,t,r){let n=t.geometry.coordinates,o=r.geometry.coordinates;if(n[1]>x8||n[1]<_8||o[1]>x8||o[1]<_8)return null;let i={lng:(n[0]+o[0])/2,lat:(n[1]+o[1])/2};return{type:lr.FEATURE,properties:{meta:di.MIDPOINT,parent:e,lng:i.lng,lat:i.lat,coord_path:r.properties.coord_path},geometry:{type:lr.POINT,coordinates:[i.lng,i.lat]}}}function Xnt(e,t={},r=null){let{type:n,coordinates:o}=e.geometry,i=e.properties&&e.properties.id,a=[];n===lr.POINT?a.push(Nd(i,o,r,p(r))):n===lr.POLYGON?o.forEach((g,x)=>{u(g,r!==null?`${r}.${x}`:String(x))}):n===lr.LINE_STRING?u(o,r):n.indexOf(lr.MULTI_PREFIX)===0&&h();function u(g,x){let b="",T=null;g.forEach((A,L)=>{let P=x!=null?`${x}.${L}`:String(L),k=Nd(i,A,P,p(P));if(t.midpoints&&T){let U=C8(i,T,k);U&&a.push(U)}T=k;let q=JSON.stringify(A);b!==q&&a.push(k),L===0&&(b=q)})}function p(g){return t.selectedPaths?t.selectedPaths.indexOf(g)!==-1:!1}function h(){let g=n.replace(lr.MULTI_PREFIX,"");o.forEach((x,b)=>{let T={type:lr.FEATURE,properties:e.properties,geometry:{type:g,coordinates:x}};a=a.concat(Xnt(T,t,b))})}return a}var BE=Xnt;var cl={enable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||!e._ctx||!e._ctx.store||!e._ctx.store.getInitialConfigValue||e._ctx.store.getInitialConfigValue("doubleClickZoom")&&e.map.doubleClickZoom.enable()},0)},disable(e){setTimeout(()=>{!e.map||!e.map.doubleClickZoom||e.map.doubleClickZoom.disable()},0)}};var{LAT_MIN:A8,LAT_MAX:D8,LAT_RENDERED_MIN:Jnt,LAT_RENDERED_MAX:Qnt,LNG_MIN:eot,LNG_MAX:tot}=Fo;function yNr(e){let t={Point:0,LineString:1,Polygon:2,MultiPoint:1,MultiLineString:2,MultiPolygon:3}[e.geometry.type],r=[e.geometry.coordinates].flat(t),n=r.map(u=>u[0]),o=r.map(u=>u[1]),i=u=>Math.min.apply(null,u),a=u=>Math.max.apply(null,u);return[i(n),i(o),a(n),a(o)]}function VE(e,t){let r=A8,n=D8,o=A8,i=D8,a=tot,u=eot;e.forEach(h=>{let g=yNr(h),x=g[1],b=g[3],T=g[0],A=g[2];x>r&&(r=x),b<n&&(n=b),b>o&&(o=b),x<i&&(i=x),T<a&&(a=T),A>u&&(u=A)});let p=t;return r+p.lat>Qnt&&(p.lat=Qnt-r),o+p.lat>D8&&(p.lat=D8-o),n+p.lat<Jnt&&(p.lat=Jnt-n),i+p.lat<A8&&(p.lat=A8-i),a+p.lng<=eot&&(p.lng+=Math.ceil(Math.abs(p.lng)/360)*360),u+p.lng>=tot&&(p.lng-=Math.ceil(Math.abs(p.lng)/360)*360),p}function GE(e,t){let r=VE(e.map(n=>n.toGeoJSON()),t);e.forEach(n=>{let o=n.getCoordinates(),i=h=>{let g={lng:h[0]+r.lng,lat:h[1]+r.lat};return[g.lng,g.lat]},a=h=>h.map(g=>i(g)),u=h=>h.map(g=>a(g)),p;n.type===lr.POINT?p=i(o):n.type===lr.LINE_STRING||n.type===lr.MULTI_POINT?p=o.map(i):n.type===lr.POLYGON||n.type===lr.MULTI_LINE_STRING?p=o.map(a):n.type===lr.MULTI_POLYGON&&(p=o.map(u)),n.incomingCoords(p)})}var Yo={};Yo.onSetup=function(e){let t={dragMoveLocation:null,boxSelectStartLocation:null,boxSelectElement:void 0,boxSelecting:!1,canBoxSelect:!1,dragMoving:!1,canDragMove:!1,initialDragPanState:this.map.dragPan.isEnabled(),initiallySelectedFeatureIds:e.featureIds||[]};return this.setSelected(t.initiallySelectedFeatureIds.filter(r=>this.getFeature(r)!==void 0)),this.fireActionable(),this.setActionableState({combineFeatures:!0,uncombineFeatures:!0,trash:!0}),t};Yo.fireUpdate=function(){this.fire(qi.UPDATE,{action:iy.MOVE,features:this.getSelected().map(e=>e.toGeoJSON())})};Yo.fireActionable=function(){let e=this.getSelected(),t=e.filter(i=>this.isInstanceOf("MultiFeature",i)),r=!1;if(e.length>1){r=!0;let i=e[0].type.replace("Multi","");e.forEach(a=>{a.type.replace("Multi","")!==i&&(r=!1)})}let n=t.length>0,o=e.length>0;this.setActionableState({combineFeatures:r,uncombineFeatures:n,trash:o})};Yo.getUniqueIds=function(e){return e.length?e.map(r=>r.properties.id).filter(r=>r!==void 0).reduce((r,n)=>(r.add(n),r),new hf).values():[]};Yo.stopExtendedInteractions=function(e){e.boxSelectElement&&(e.boxSelectElement.parentNode&&e.boxSelectElement.parentNode.removeChild(e.boxSelectElement),e.boxSelectElement=null),(e.canDragMove||e.canBoxSelect)&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.boxSelecting=!1,e.canBoxSelect=!1,e.dragMoving=!1,e.canDragMove=!1};Yo.onStop=function(){cl.enable(this)};Yo.onMouseMove=function(e,t){return T8(t)&&e.dragMoving&&this.fireUpdate(),this.stopExtendedInteractions(e),!0};Yo.onMouseOut=function(e){return e.dragMoving?this.fireUpdate():!0};Yo.onTap=Yo.onClick=function(e,t){if(FE(t))return this.clickAnywhere(e,t);if(zE(di.VERTEX)(t))return this.clickOnVertex(e,t);if(T8(t))return this.clickOnFeature(e,t)};Yo.clickAnywhere=function(e){let t=this.getSelectedIds();t.length&&(this.clearSelectedFeatures(),t.forEach(r=>this.doRender(r))),cl.enable(this),this.stopExtendedInteractions(e)};Yo.clickOnVertex=function(e,t){this.changeMode(nn.DIRECT_SELECT,{featureId:t.featureTarget.properties.parent,coordPath:t.featureTarget.properties.coord_path,startPos:t.lngLat}),this.updateUIClasses({mouse:ho.MOVE})};Yo.startOnActiveFeature=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),this.doRender(t.featureTarget.properties.id),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Yo.clickOnFeature=function(e,t){cl.disable(this),this.stopExtendedInteractions(e);let r=UE(t),n=this.getSelectedIds(),o=t.featureTarget.properties.id,i=this.isSelected(o);if(!r&&i&&this.getFeature(o).type!==lr.POINT)return this.changeMode(nn.DIRECT_SELECT,{featureId:o});i&&r?(this.deselect(o),this.updateUIClasses({mouse:ho.POINTER}),n.length===1&&cl.enable(this)):!i&&r?(this.select(o),this.updateUIClasses({mouse:ho.MOVE})):!i&&!r&&(n.forEach(a=>this.doRender(a)),this.setSelected(o),this.updateUIClasses({mouse:ho.MOVE})),this.doRender(o)};Yo.onMouseDown=function(e,t){if(e.initialDragPanState=this.map.dragPan.isEnabled(),xm(t))return this.startOnActiveFeature(e,t);if(this.drawConfig.boxSelect&&hae(t))return this.startBoxSelect(e,t)};Yo.startBoxSelect=function(e,t){this.stopExtendedInteractions(e),this.map.dragPan.disable(),e.boxSelectStartLocation=M8(t.originalEvent,this.map.getContainer()),e.canBoxSelect=!0};Yo.onTouchStart=function(e,t){if(xm(t))return this.startOnActiveFeature(e,t)};Yo.onDrag=function(e,t){if(e.canDragMove)return this.dragMove(e,t);if(this.drawConfig.boxSelect&&e.canBoxSelect)return this.whileBoxSelect(e,t)};Yo.whileBoxSelect=function(e,t){e.boxSelecting=!0,this.updateUIClasses({mouse:ho.ADD}),e.boxSelectElement||(e.boxSelectElement=document.createElement("div"),e.boxSelectElement.classList.add(Ss.BOX_SELECT),this.map.getContainer().appendChild(e.boxSelectElement));let r=M8(t.originalEvent,this.map.getContainer()),n=Math.min(e.boxSelectStartLocation.x,r.x),o=Math.max(e.boxSelectStartLocation.x,r.x),i=Math.min(e.boxSelectStartLocation.y,r.y),a=Math.max(e.boxSelectStartLocation.y,r.y),u=`translate(${n}px, ${i}px)`;e.boxSelectElement.style.transform=u,e.boxSelectElement.style.WebkitTransform=u,e.boxSelectElement.style.width=`${o-n}px`,e.boxSelectElement.style.height=`${a-i}px`};Yo.dragMove=function(e,t){e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};GE(this.getSelected(),r),e.dragMoveLocation=t.lngLat};Yo.onTouchEnd=Yo.onMouseUp=function(e,t){if(e.dragMoving)this.fireUpdate();else if(e.boxSelecting){let r=[e.boxSelectStartLocation,M8(t.originalEvent,this.map.getContainer())],n=this.featuresAt(null,r,"click"),o=this.getUniqueIds(n).filter(i=>!this.isSelected(i));o.length&&(this.select(o),o.forEach(i=>this.doRender(i)),this.updateUIClasses({mouse:ho.MOVE}))}this.stopExtendedInteractions(e)};Yo.toDisplayFeatures=function(e,t,r){t.properties.active=this.isSelected(t.properties.id)?$o.ACTIVE:$o.INACTIVE,r(t),this.fireActionable(),!(t.properties.active!==$o.ACTIVE||t.geometry.type===lr.POINT)&&BE(t).forEach(r)};Yo.onTrash=function(){this.deleteFeature(this.getSelectedIds()),this.fireActionable()};Yo.onCombineFeatures=function(){let e=this.getSelected();if(e.length===0||e.length<2)return;let t=[],r=[],n=e[0].type.replace("Multi","");for(let o=0;o<e.length;o++){let i=e[o];if(i.type.replace("Multi","")!==n)return;i.type.includes("Multi")?i.getCoordinates().forEach(a=>{t.push(a)}):t.push(i.getCoordinates()),r.push(i.toGeoJSON())}if(r.length>1){let o=this.newFeature({type:lr.FEATURE,properties:r[0].properties,geometry:{type:`Multi${n}`,coordinates:t}});this.addFeature(o),this.deleteFeature(this.getSelectedIds(),{silent:!0}),this.setSelected([o.id]),this.fire(qi.COMBINE_FEATURES,{createdFeatures:[o.toGeoJSON()],deletedFeatures:r})}this.fireActionable()};Yo.onUncombineFeatures=function(){let e=this.getSelected();if(e.length===0)return;let t=[],r=[];for(let n=0;n<e.length;n++){let o=e[n];this.isInstanceOf("MultiFeature",o)&&(o.getFeatures().forEach(i=>{this.addFeature(i),i.properties=o.properties,t.push(i.toGeoJSON()),this.select([i.id])}),this.deleteFeature(o.id,{silent:!0}),r.push(o.toGeoJSON()))}t.length>1&&this.fire(qi.UNCOMBINE_FEATURES,{createdFeatures:t,deletedFeatures:r}),this.fireActionable()};var rot=Yo;var not=zE(di.VERTEX),oot=zE(di.MIDPOINT),Zo={};Zo.fireUpdate=function(){this.fire(qi.UPDATE,{action:iy.CHANGE_COORDINATES,features:this.getSelected().map(e=>e.toGeoJSON())})};Zo.fireActionable=function(e){this.setActionableState({combineFeatures:!1,uncombineFeatures:!1,trash:e.selectedCoordPaths.length>0})};Zo.startDragging=function(e,t){e.initialDragPanState=this.map.dragPan.isEnabled(),this.map.dragPan.disable(),e.canDragMove=!0,e.dragMoveLocation=t.lngLat};Zo.stopDragging=function(e){e.canDragMove&&e.initialDragPanState===!0&&this.map.dragPan.enable(),e.dragMoving=!1,e.canDragMove=!1,e.dragMoveLocation=null};Zo.onVertex=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties,n=e.selectedCoordPaths.indexOf(r.coord_path);!UE(t)&&n===-1?e.selectedCoordPaths=[r.coord_path]:UE(t)&&n===-1&&e.selectedCoordPaths.push(r.coord_path);let o=this.pathsToCoordinates(e.featureId,e.selectedCoordPaths);this.setSelectedCoordinates(o)};Zo.onMidpoint=function(e,t){this.startDragging(e,t);let r=t.featureTarget.properties;e.feature.addCoordinate(r.coord_path,r.lng,r.lat),this.fireUpdate(),e.selectedCoordPaths=[r.coord_path]};Zo.pathsToCoordinates=function(e,t){return t.map(r=>({feature_id:e,coord_path:r}))};Zo.onFeature=function(e,t){e.selectedCoordPaths.length===0?this.startDragging(e,t):this.stopDragging(e)};Zo.dragFeature=function(e,t,r){GE(this.getSelected(),r),e.dragMoveLocation=t.lngLat};Zo.dragVertex=function(e,t,r){let n=e.selectedCoordPaths.map(a=>e.feature.getCoordinate(a)),o=n.map(a=>({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:a}})),i=VE(o,r);for(let a=0;a<n.length;a++){let u=n[a];e.feature.updateCoordinate(e.selectedCoordPaths[a],u[0]+i.lng,u[1]+i.lat)}};Zo.clickNoTarget=function(){this.changeMode(nn.SIMPLE_SELECT)};Zo.clickInactive=function(){this.changeMode(nn.SIMPLE_SELECT)};Zo.clickActiveFeature=function(e){e.selectedCoordPaths=[],this.clearSelectedCoordinates(),e.feature.changed()};Zo.onSetup=function(e){let t=e.featureId,r=this.getFeature(t);if(!r)throw new Error("You must provide a featureId to enter direct_select mode");if(r.type===lr.POINT)throw new TypeError("direct_select mode doesn't handle point features");let n={featureId:t,feature:r,dragMoveLocation:e.startPos||null,dragMoving:!1,canDragMove:!1,selectedCoordPaths:e.coordPath?[e.coordPath]:[]};return this.setSelectedCoordinates(this.pathsToCoordinates(t,n.selectedCoordPaths)),this.setSelected(t),cl.disable(this),this.setActionableState({trash:!0}),n};Zo.onStop=function(){cl.enable(this),this.clearSelectedCoordinates()};Zo.toDisplayFeatures=function(e,t,r){e.featureId===t.properties.id?(t.properties.active=$o.ACTIVE,r(t),BE(t,{map:this.map,midpoints:!0,selectedPaths:e.selectedCoordPaths}).forEach(r)):(t.properties.active=$o.INACTIVE,r(t)),this.fireActionable(e)};Zo.onTrash=function(e){e.selectedCoordPaths.sort((t,r)=>r.localeCompare(t,"en",{numeric:!0})).forEach(t=>e.feature.removeCoordinate(t)),this.fireUpdate(),e.selectedCoordPaths=[],this.clearSelectedCoordinates(),this.fireActionable(e),e.feature.isValid()===!1&&(this.deleteFeature([e.featureId]),this.changeMode(nn.SIMPLE_SELECT,{}))};Zo.onMouseMove=function(e,t){let r=xm(t),n=not(t),o=oot(t),i=e.selectedCoordPaths.length===0;return r&&i?this.updateUIClasses({mouse:ho.MOVE}):n&&!i?this.updateUIClasses({mouse:ho.MOVE}):this.updateUIClasses({mouse:ho.NONE}),(n||r||o)&&e.dragMoving&&this.fireUpdate(),this.stopDragging(e),!0};Zo.onMouseOut=function(e){return e.dragMoving&&this.fireUpdate(),!0};Zo.onTouchStart=Zo.onMouseDown=function(e,t){if(not(t))return this.onVertex(e,t);if(xm(t))return this.onFeature(e,t);if(oot(t))return this.onMidpoint(e,t)};Zo.onDrag=function(e,t){if(e.canDragMove!==!0)return;e.dragMoving=!0,t.originalEvent.stopPropagation();let r={lng:t.lngLat.lng-e.dragMoveLocation.lng,lat:t.lngLat.lat-e.dragMoveLocation.lat};e.selectedCoordPaths.length>0?this.dragVertex(e,t,r):this.dragFeature(e,t,r),e.dragMoveLocation=t.lngLat};Zo.onClick=function(e,t){if(FE(t))return this.clickNoTarget(e,t);if(xm(t))return this.clickActiveFeature(e,t);if(I8(t))return this.clickInactive(e,t);this.stopDragging(e)};Zo.onTap=function(e,t){if(FE(t))return this.clickNoTarget(e,t);if(xm(t))return this.clickActiveFeature(e,t);if(I8(t))return this.clickInactive(e,t)};Zo.onTouchEnd=Zo.onMouseUp=function(e){e.dragMoving&&this.fireUpdate(),this.stopDragging(e)};var iot=Zo;var Od={};Od.onSetup=function(){let e=this.newFeature({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:[]}});return this.addFeature(e),this.clearSelectedFeatures(),this.updateUIClasses({mouse:ho.ADD}),this.activateUIButton(Ea.POINT),this.setActionableState({trash:!0}),{point:e}};Od.stopDrawingAndRemove=function(e){this.deleteFeature([e.point.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)};Od.onTap=Od.onClick=function(e,t){this.updateUIClasses({mouse:ho.MOVE}),e.point.updateCoordinate("",t.lngLat.lng,t.lngLat.lat),this.fire(qi.CREATE,{features:[e.point.toGeoJSON()]}),this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.point.id]})};Od.onStop=function(e){this.activateUIButton(),e.point.getCoordinate().length||this.deleteFeature([e.point.id],{silent:!0})};Od.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.point.id;if(t.properties.active=n?$o.ACTIVE:$o.INACTIVE,!n)return r(t)};Od.onTrash=Od.stopDrawingAndRemove;Od.onKeyUp=function(e,t){if(k1(t)||R1(t))return this.stopDrawingAndRemove(e,t)};var aot=Od;function _Nr(e,t){return e.lngLat?e.lngLat.lng===t[0]&&e.lngLat.lat===t[1]:!1}var q1=_Nr;var cp={};cp.onSetup=function(){let e=this.newFeature({type:lr.FEATURE,properties:{},geometry:{type:lr.POLYGON,coordinates:[[]]}});return this.addFeature(e),this.clearSelectedFeatures(),cl.disable(this),this.updateUIClasses({mouse:ho.ADD}),this.activateUIButton(Ea.POLYGON),this.setActionableState({trash:!0}),{polygon:e,currentVertexPosition:0}};cp.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&q1(t,e.polygon.coordinates[0][e.currentVertexPosition-1]))return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.polygon.id]});this.updateUIClasses({mouse:ho.ADD}),e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),e.currentVertexPosition++,e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat)};cp.clickOnVertex=function(e){return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};cp.onMouseMove=function(e,t){e.polygon.updateCoordinate(`0.${e.currentVertexPosition}`,t.lngLat.lng,t.lngLat.lat),P1(t)&&this.updateUIClasses({mouse:ho.POINTER})};cp.onTap=cp.onClick=function(e,t){return P1(t)?this.clickOnVertex(e,t):this.clickAnywhere(e,t)};cp.onKeyUp=function(e,t){k1(t)?(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)):R1(t)&&this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.polygon.id]})};cp.onStop=function(e){this.updateUIClasses({mouse:ho.NONE}),cl.enable(this),this.activateUIButton(),this.getFeature(e.polygon.id)!==void 0&&(e.polygon.removeCoordinate(`0.${e.currentVertexPosition}`),e.polygon.isValid()?this.fire(qi.CREATE,{features:[e.polygon.toGeoJSON()]}):(this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT,{},{silent:!0})))};cp.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.polygon.id;if(t.properties.active=n?$o.ACTIVE:$o.INACTIVE,!n)return r(t);if(t.geometry.coordinates.length===0)return;let o=t.geometry.coordinates[0].length;if(!(o<3)){if(t.properties.meta=di.FEATURE,r(Nd(e.polygon.id,t.geometry.coordinates[0][0],"0.0",!1)),o>3){let i=t.geometry.coordinates[0].length-3;r(Nd(e.polygon.id,t.geometry.coordinates[0][i],`0.${i}`,!1))}if(o<=4){let i=[[t.geometry.coordinates[0][0][0],t.geometry.coordinates[0][0][1]],[t.geometry.coordinates[0][1][0],t.geometry.coordinates[0][1][1]]];if(r({type:lr.FEATURE,properties:t.properties,geometry:{coordinates:i,type:lr.LINE_STRING}}),o===3)return}return r(t)}};cp.onTrash=function(e){this.deleteFeature([e.polygon.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)};var sot=cp;var fp={};fp.onSetup=function(e){e=e||{};let t=e.featureId,r,n,o="forward";if(t){if(r=this.getFeature(t),!r)throw new Error("Could not find a feature with the provided featureId");let i=e.from;if(i&&i.type==="Feature"&&i.geometry&&i.geometry.type==="Point"&&(i=i.geometry),i&&i.type==="Point"&&i.coordinates&&i.coordinates.length===2&&(i=i.coordinates),!i||!Array.isArray(i))throw new Error("Please use the `from` property to indicate which point to continue the line from");let a=r.coordinates.length-1;if(r.coordinates[a][0]===i[0]&&r.coordinates[a][1]===i[1])n=a+1,r.addCoordinate(n,...r.coordinates[a]);else if(r.coordinates[0][0]===i[0]&&r.coordinates[0][1]===i[1])o="backwards",n=0,r.addCoordinate(n,...r.coordinates[0]);else throw new Error("`from` should match the point at either the start or the end of the provided LineString")}else r=this.newFeature({type:lr.FEATURE,properties:{},geometry:{type:lr.LINE_STRING,coordinates:[]}}),n=0,this.addFeature(r);return this.clearSelectedFeatures(),cl.disable(this),this.updateUIClasses({mouse:ho.ADD}),this.activateUIButton(Ea.LINE),this.setActionableState({trash:!0}),{line:r,currentVertexPosition:n,direction:o}};fp.clickAnywhere=function(e,t){if(e.currentVertexPosition>0&&q1(t,e.line.coordinates[e.currentVertexPosition-1])||e.direction==="backwards"&&q1(t,e.line.coordinates[e.currentVertexPosition+1]))return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.line.id]});this.updateUIClasses({mouse:ho.ADD}),e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),e.direction==="forward"?(e.currentVertexPosition++,e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat)):e.line.addCoordinate(0,t.lngLat.lng,t.lngLat.lat)};fp.clickOnVertex=function(e){return this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.line.id]})};fp.onMouseMove=function(e,t){e.line.updateCoordinate(e.currentVertexPosition,t.lngLat.lng,t.lngLat.lat),P1(t)&&this.updateUIClasses({mouse:ho.POINTER})};fp.onTap=fp.onClick=function(e,t){if(P1(t))return this.clickOnVertex(e,t);this.clickAnywhere(e,t)};fp.onKeyUp=function(e,t){R1(t)?this.changeMode(nn.SIMPLE_SELECT,{featureIds:[e.line.id]}):k1(t)&&(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT))};fp.onStop=function(e){cl.enable(this),this.activateUIButton(),this.getFeature(e.line.id)!==void 0&&(e.line.removeCoordinate(`${e.currentVertexPosition}`),e.line.isValid()?this.fire(qi.CREATE,{features:[e.line.toGeoJSON()]}):(this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT,{},{silent:!0})))};fp.onTrash=function(e){this.deleteFeature([e.line.id],{silent:!0}),this.changeMode(nn.SIMPLE_SELECT)};fp.toDisplayFeatures=function(e,t,r){let n=t.properties.id===e.line.id;if(t.properties.active=n?$o.ACTIVE:$o.INACTIVE,!n)return r(t);t.geometry.coordinates.length<2||(t.properties.meta=di.FEATURE,r(Nd(e.line.id,t.geometry.coordinates[e.direction==="forward"?t.geometry.coordinates.length-2:1],`${e.direction==="forward"?t.geometry.coordinates.length-2:1}`,!1)),r(t))};var lot=fp;var N8={simple_select:rot,direct_select:iot,draw_point:aot,draw_polygon:sot,draw_line_string:lot};var xNr={defaultMode:nn.SIMPLE_SELECT,keybindings:!0,touchEnabled:!0,clickBuffer:2,touchBuffer:25,boxSelect:!0,displayControlsDefault:!0,styles:S8,modes:N8,controls:{},userProperties:!1,suppressAPIEvents:!0},bNr={point:!0,line_string:!0,polygon:!0,trash:!0,combine_features:!0,uncombine_features:!0},wNr={point:!1,line_string:!1,polygon:!1,trash:!1,combine_features:!1,uncombine_features:!1};function uot(e,t){return e.map(r=>r.source?r:Object.assign({},r,{id:`${r.id}.${t}`,source:t==="hot"?jl.HOT:jl.COLD}))}function cot(e={}){let t=Object.assign({},e);return e.controls||(t.controls={}),e.displayControlsDefault===!1?t.controls=Object.assign({},wNr,e.controls):t.controls=Object.assign({},bNr,e.controls),t=Object.assign({},xNr,t),t.styles=uot(t.styles,"cold").concat(uot(t.styles,"hot")),t}var mae=Z(GP(),1),dot=Z(pot(),1);function O8(e,t){return e.length!==t.length?!1:JSON.stringify(e.map(r=>r).sort())===JSON.stringify(t.map(r=>r).sort())}var INr={Polygon:N1,LineString:D1,Point:C1,MultiPolygon:O1,MultiLineString:O1,MultiPoint:O1};function hot(e,t){t.modes=nn;let r=e.options.suppressAPIEvents!==void 0?!!e.options.suppressAPIEvents:!0;return t.getFeatureIdsAt=function(n){return lp.click({point:n},null,e).map(i=>i.properties.id)},t.getSelectedIds=function(){return e.store.getSelectedIds()},t.getSelected=function(){return{type:lr.FEATURE_COLLECTION,features:e.store.getSelectedIds().map(n=>e.store.get(n)).map(n=>n.toGeoJSON())}},t.getSelectedPoints=function(){return{type:lr.FEATURE_COLLECTION,features:e.store.getSelectedCoordinates().map(n=>({type:lr.FEATURE,properties:{},geometry:{type:lr.POINT,coordinates:n.coordinates}}))}},t.set=function(n){if(n.type===void 0||n.type!==lr.FEATURE_COLLECTION||!Array.isArray(n.features))throw new Error("Invalid FeatureCollection");let o=e.store.createRenderBatch(),i=e.store.getAllIds().slice(),a=t.add(n),u=new hf(a);return i=i.filter(p=>!u.has(p)),i.length&&t.delete(i),o(),a},t.add=function(n){let i=JSON.parse(JSON.stringify((0,dot.default)(n))).features.map(a=>{if(a.id=a.id||qE(),a.geometry===null)throw new Error("Invalid geometry: null");if(e.store.get(a.id)===void 0||e.store.get(a.id).type!==a.geometry.type){let u=INr[a.geometry.type];if(u===void 0)throw new Error(`Invalid geometry type: ${a.geometry.type}.`);let p=new u(e,a);e.store.add(p,{silent:r})}else{let u=e.store.get(a.id),p=u.properties;u.properties=a.properties,(0,mae.default)(p,a.properties)||e.store.featureChanged(u.id,{silent:r}),(0,mae.default)(u.getCoordinates(),a.geometry.coordinates)||u.incomingCoords(a.geometry.coordinates)}return a.id});return e.store.render(),i},t.get=function(n){let o=e.store.get(n);if(o)return o.toGeoJSON()},t.getAll=function(){return{type:lr.FEATURE_COLLECTION,features:e.store.getAll().map(n=>n.toGeoJSON())}},t.delete=function(n){return e.store.delete(n,{silent:r}),t.getMode()===nn.DIRECT_SELECT&&!e.store.getSelectedIds().length?e.events.changeMode(nn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.deleteAll=function(){return e.store.delete(e.store.getAllIds(),{silent:r}),t.getMode()===nn.DIRECT_SELECT?e.events.changeMode(nn.SIMPLE_SELECT,void 0,{silent:r}):e.store.render(),t},t.changeMode=function(n,o={}){return n===nn.SIMPLE_SELECT&&t.getMode()===nn.SIMPLE_SELECT?(O8(o.featureIds||[],e.store.getSelectedIds())||(e.store.setSelected(o.featureIds,{silent:r}),e.store.render()),t):(n===nn.DIRECT_SELECT&&t.getMode()===nn.DIRECT_SELECT&&o.featureId===e.store.getSelectedIds()[0]||e.events.changeMode(n,o,{silent:r}),t)},t.getMode=function(){return e.events.getMode()},t.trash=function(){return e.events.trash({silent:r}),t},t.combineFeatures=function(){return e.events.combineFeatures({silent:r}),t},t.uncombineFeatures=function(){return e.events.uncombineFeatures({silent:r}),t},t.setFeatureProperty=function(n,o,i){return e.store.setFeatureProperty(n,o,i,{silent:r}),t},t}var gae={};a2(gae,{CommonSelectors:()=>j1,ModeHandler:()=>SD,StringSet:()=>hf,constrainFeatureMovement:()=>VE,createMidPoint:()=>C8,createSupplementaryPoints:()=>BE,createVertex:()=>Nd,doubleClickZoom:()=>cl,euclideanDistance:()=>kE,featuresAt:()=>lp,getFeatureAtAndSetCursors:()=>M1,isClick:()=>RE,isEventAtCoordinates:()=>q1,isTap:()=>jE,mapEventToBoundingBox:()=>w8,moveFeatures:()=>GE,sortFeatures:()=>b8,stringSetsAreEqual:()=>O8,theme:()=>S8,toDenseArray:()=>L1});var TNr=function(e,t){e=cot(e);let r={options:e};t=hot(r,t),r.api=t;let n=Znt(r);return t.onAdd=n.onAdd,t.onRemove=n.onRemove,t.types=Ea,t.options=e,t};function L8(e){TNr(e,this)}L8.modes=N8;L8.constants=Fo;L8.lib=gae;var mot=L8;var got=Z(we(),1);var vae=en({key:"trackingHandlerState",default:null}),pp=en({key:"geoJsonChangeTrackingState",default:null}),P8=()=>{let e=Mr(pp),t=(0,got.useCallback)(i=>{e(a=>{if(a.addIds.includes(i))return qt(Se({},a),{addIds:a.addIds.filter(p=>p!==i)});{let p=new Map(a.dirtyMap);return p.delete(i),qt(Se({},a),{dirtyMap:p,deleteIds:[...a.deleteIds,i]})}})},[]),r=Or(({snapshot:i,set:a})=>u=>At(void 0,null,function*(){let h=(yield i.getPromise(ba)).features.find(g=>g.id===u.id);h!==void 0&&(Object.keys(h.properties).length!==Object.keys(u.properties).length||Object.keys(h.properties).some(g=>h.properties[g]!==u.properties[g])?a(pp,g=>{let x=new Map(g.dirtyMap);return x.set(u.id,!0),qt(Se({},g),{dirtyMap:x})}):a(pp,g=>{if(g.dirtyMap.has(u.id)&&g.dirtyMap.get(u.id)){let x=new Map(g.dirtyMap);return x.set(u.id,!1),qt(Se({},g),{dirtyMap:x})}return g}))}),[]),n=Or(({snapshot:i,set:a})=>()=>At(void 0,null,function*(){let u=yield i.getPromise(yr);if(Le(u)){let g={"draw.update":x=>{let b=x.features[0];a(pp,T=>{if(T.dirtyMap.has(b.id)&&!T.dirtyMap.get(b.id)){let A=new Map(T.dirtyMap);return A.set(b.id,!0),qt(Se({},T),{dirtyMap:A})}return T})},"draw.create":x=>{a(pp,b=>qt(Se({},b),{addIds:[...b.addIds,x.features[0].id]}))},"draw.delete":x=>{a(pp,b=>{if(b.addIds.includes(x.features[0].id))return qt(Se({},b),{addIds:b.addIds.filter(A=>A!==x.features[0].id)});{let A=new Map(b.dirtyMap);return A.delete(x.features[0].id),qt(Se({},b),{dirtyMap:A,deleteIds:[...b.deleteIds,x.features[0].id]})}})}};Object.keys(g).forEach(x=>{u.on(x,g[x])}),a(vae,g)}let p=yield i.getPromise(ba),h=new Map;p.features.forEach(g=>{h.set(g.id,!1)}),a(pp,{dirtyMap:h,deleteIds:[],addIds:[]})}),[]),o=Or(({snapshot:i,set:a})=>()=>At(void 0,null,function*(){let u=yield i.getPromise(yr);if(Le(u)){let p=yield i.getPromise(vae);p!==null&&(Object.keys(p).forEach(h=>{u.off(h,p[h])}),a(vae,null))}}),[]);return{handleDeleteFeature:t,handleUpdateFeature:r,registerMapEventHandler:n,unregisterMapEventHandler:o}};var ql="user_",MNr="rgb(0, 177, 158)",yae=MNr,vot=[{id:"polygon-fill",type:"fill",paint:{"fill-color":["coalesce",["get",`${ql}fill`],zn[Ur.FILL].COLOR],"fill-opacity":["coalesce",["get",`${ql}fill-opacity`],zn[Ur.FILL].OPACITY]},filter:["all",["==",["geometry-type"],"Polygon"]]},{id:"polygon-outline-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${ql}stroke`],zn[Ur.OUTLINE].COLOR],"line-width":["coalesce",["get",`${ql}stroke-width`],zn[Ur.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${ql}stroke-opacity`],zn[Ur.OUTLINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["any",["==",["geometry-type"],"Polygon"],["all",["==",["get","mode"],"draw_polygon"],["==",["geometry-type"],"LineString"]]]]},{id:"polygon-outline-cold",type:"line",paint:{"line-color":["coalesce",["get",`${ql}stroke`],zn[Ur.OUTLINE].COLOR],"line-width":["coalesce",["get",`${ql}stroke-width`],zn[Ur.OUTLINE].WIDTH],"line-opacity":["coalesce",["get",`${ql}stroke-opacity`],zn[Ur.OUTLINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"Polygon"]]},{id:"line-hot",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-color":["coalesce",["get",`${ql}stroke`],zn[Ur.LINE].COLOR],"line-width":["coalesce",["get",`${ql}stroke-width`],zn[Ur.LINE].WIDTH],"line-opacity":["coalesce",["get",`${ql}stroke-opacity`],zn[Ur.LINE].OPACITY],"line-dasharray":[.2,2]},filter:["all",["==",["get","active"],"true"],["==",["geometry-type"],"LineString"],["!=",["get","mode"],"draw_polygon"]]},{id:"line-cold",type:"line",paint:{"line-color":["coalesce",["get",`${ql}stroke`],zn[Ur.LINE].COLOR],"line-width":["coalesce",["get",`${ql}stroke-width`],zn[Ur.LINE].WIDTH],"line-opacity":["coalesce",["get",`${ql}stroke-opacity`],zn[Ur.LINE].OPACITY]},filter:["all",["==",["get","active"],"false"],["==",["geometry-type"],"LineString"]]},{id:"point",type:"symbol",layout:{"icon-image":hr.getSettings().MARKER_IMAGE_ID,"icon-size":.5,"icon-anchor":"bottom","icon-allow-overlap":!0},paint:{"icon-color":["to-color",["get",`${ql}marker`],zn[Ur.SYMBOL].COLOR],"icon-halo-color":["case",["==",["get","active"],"true"],yae,"#fff"],"icon-halo-width":["case",["==",["get","active"],"true"],2,1]},filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"feature"]]},{id:"gl-draw-vertex-outer",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],7,5],"circle-color":"#fff"}},{id:"gl-draw-vertex-inner",type:"circle",filter:["all",["==",["geometry-type"],"Point"],["==",["get","meta"],"vertex"],["!=",["get","mode"],"simple_select"]],paint:{"circle-radius":["case",["==",["get","active"],"true"],5,3],"circle-color":yae}},{id:"gl-draw-midpoint",type:"circle",filter:["all",["==",["get","meta"],"midpoint"]],paint:{"circle-radius":3,"circle-color":yae}}];var CNr={styles:vot,userProperties:!0,controls:{combine_features:!1,uncombine_features:!1}},yot="draw",MD="shifted",xae={LEFT:"left",RIGHT:"right"},z1={topLeft:".maplibregl-ctrl-top-left",topRight:".maplibregl-ctrl-top-right",bottomRight:".maplibregl-ctrl-bottom-right"},ANr=e=>{let t=e?z1.topLeft:z1.topRight,r=e?z1.topRight:z1.topLeft;return{add:t,remove:r}},DNr=e=>{let r=e._controlContainer.querySelector(z1.topRight).querySelectorAll("button");for(let n of r){let o=document.createElement("div");o.classList.add("maplibregl-ctrl","maplibregl-ctrl-group"),n.before(o),o.appendChild(n)}},bae=()=>{let e=Or(({snapshot:r,set:n})=>()=>At(void 0,null,function*(){let o=yield r.getPromise(yr),i=yield r.getPromise(ba);if(Le(o)&&Le(i)){let a=new mot(CNr);n(Fa,a),o.addControl(a,"top-right"),a.add(i),o._controlContainer.classList.add(yot),DNr(o)}}),[]),t=Or(({snapshot:r,set:n})=>()=>At(void 0,null,function*(){let o=yield r.getPromise(yr),i=yield r.getPromise(Fa),{selectedLayer:a}=yield r.getPromise(Qp);Le(o)&&Le(a)&&!a.isVisible(o)&&a.setVisibility(o,"visible"),Le(o)&&Le(i)&&(o.removeControl(i),n(Fa,void 0),o._controlContainer.classList.remove(yot),sp(n))}),[]);return{initializeDraw:e,removeDraw:t}},NNr=()=>{let e=Or(({snapshot:r})=>n=>At(void 0,null,function*(){let o=yield r.getPromise(yr);if(Le(o)){let i=n===xae.LEFT,{add:a,remove:u}=ANr(i);o._controlContainer.querySelector(a).classList.add(MD),o._controlContainer.querySelector(u).classList.remove(MD);let g=o._controlContainer.querySelector(z1.bottomRight);i?g.classList.remove(MD):g.classList.add(MD)}}),[]),t=Or(({snapshot:r})=>()=>At(void 0,null,function*(){let n=yield r.getPromise(yr);if(Le(n))for(let o of Object.values(z1))n._controlContainer.querySelector(o).classList.remove(MD)}),[]);return{shiftControls:e,removeControlShifts:t}},ONr=()=>{let e=ht(la),{initializeDraw:t,removeDraw:r}=bae(),{shiftControls:n,removeControlShifts:o}=NNr(),{registerMapEventHandler:i,unregisterMapEventHandler:a}=P8();return(0,_ae.useEffect)(()=>(t(),i(),()=>{r(),o(),a()}),[]),(0,_ae.useEffect)(()=>{let u=e===jo.FEATURE,p=e===jo.METADATA||e===jo.HISTORY;u?n(xae.LEFT):p?n(xae.RIGHT):o()},[e]),null},_ot=ONr;var xot=_ot;var so=Z(we(),1);var wae=Z(GP(),1);var LNr=()=>{let e=Or(({snapshot:n,set:o})=>()=>At(void 0,null,function*(){let i=yield n.getPromise(Fa);if(i){let a=tnt(i.getAll()),u=yield n.getPromise(yr),p=yield n.getPromise(Zs),h=null;try{h=yield kYe(a,eae(p))}catch(g){Qie(g,o)}if(Le(h)){let g=Ua.fromApplication({metadata:qt(Se({},p),{[it.id]:h,[it.vectorMapId]:h,[it.version]:0,[it.userRole]:"owner"}),geoJson:a});g.addLayerToMap(u),o(_n,x=>x.concat(g)),o($s,g.getId())}sp(o)}})),t=Or(({snapshot:n,set:o})=>()=>At(void 0,null,function*(){let i=yield n.getPromise(Fa);if(i){let{selectedLayer:a}=yield n.getPromise(Qp),u=yield n.getPromise(yr),p=yield n.getPromise(Zs),h=yield n.getPromise(Jn),g=yield n.getPromise(_9e),x=yield n.getPromise(ba),b=nnt(a.getMetadata()),T=i.getAll(),A=!(0,wae.default)(x,T)||g,P=!(0,wae.default)(b,p)&&lq(h);if(!A&&!P){sp(o);return}let k=h.version+1,q=rnt(x,T,k),U=eae(p),H=null;try{H=yield RYe(h.id,A?q:null,P?U:null,h.version)}catch(X){Qie(X,o)}Le(u)&&Le(a)&&Le(H)&&(A&&(a.setDataOnMap(u,q),a.updateMetadata(it.version,H)),P&&Object.keys(p).forEach(X=>{a.updateMetadata(X,p[X])}),o(Kb,Date.now()),sp(o))}})),r=Or(({snapshot:n,set:o})=>()=>At(void 0,null,function*(){let i=yield n.getPromise(Fa);if(i){let{selectedLayer:a}=yield n.getPromise(Qp),u=yield n.getPromise(yr),p=yield n.getPromise(Zs);if(Le(u)&&Le(a)){let h=bD(i.getAll());a.setDataOnMap(u,h),Object.keys(p).forEach(g=>{a.updateMetadata(g,p[g])}),o(Kb,Date.now()),sp(o)}}}));return Or(({snapshot:n})=>()=>At(void 0,null,function*(){let o=yield n.getPromise(Jn);o!==null&&(o.type===Hi.REMOTE?o.id===null?yield e():yield t():yield r())}))},bot=LNr;var Xi=Z(we(),1),j8=Z(xt(),1);var F1=Z(we(),1);var Eae=hr.getSettings().LANGUAGE_CODE===gv.DE?"de-DE":"en-US",wot=new Intl.PluralRules(Eae),Eot=new Intl.NumberFormat(Eae,{signDisplay:"exceptZero"}),PNr=new Intl.DateTimeFormat(Eae,{hour:"2-digit",minute:"2-digit",hour12:!1,day:"2-digit",month:"2-digit",year:"numeric"});function Sot(e,t="de"){let r=PNr.formatToParts(e),n={hour:r.find(o=>o.type==="hour").value,minute:r.find(o=>o.type==="minute").value,day:r.find(o=>o.type==="day").value,month:r.find(o=>o.type==="month").value,year:r.find(o=>o.type==="year").value};return t==="de"?`${n.hour}:${n.minute} Uhr ${n.day}.${n.month}.${n.year}`:`${n.hour}:${n.minute} o'clock ${n.day}.${n.month}.${n.year}`}var k8=Z(xt(),1),Iot=({count:e,id:t,formatFunction:r})=>{let n=(0,F1.useMemo)(()=>r?r(e):Eot.format(e),[e]),o=(0,F1.useMemo)(()=>wot.select(e)==="one"?fe(`geojson-control-bar-${t}`):fe(`geojson-control-bar-${t}-plural`),[e,t]);return F1.default.createElement("span",{className:t},F1.default.createElement("span",{className:"bold"},n)," ",F1.default.createElement("span",null,o))};Iot.propTypes={count:k8.default.number,id:k8.default.string,formatFunction:k8.default.func};var R8=Iot;var kNr=e=>`x${e}`,Tot=({onUpdateViewMode:e,formattedFeatureCount:t,viewState:r})=>{let n=ht(pp);(0,Xi.useEffect)(()=>{if(n===null)return;let i=n.addIds.length>0||n.deleteIds.length>0||Array.from(n.dirtyMap.values()).some(a=>a);e(i?zl.UNSAVED_FEATURE_CHANGES:zl.INITIAL)},[n]);let o=(0,Xi.useMemo)(()=>n?Array.from(n.dirtyMap.values()).filter(i=>i).length:0,[n==null?void 0:n.dirtyMap]);return Xi.default.createElement("div",{className:"control-bar-main"},Xi.default.createElement("div",{className:"control-bar-content"},r===zl.UNSAVED_FEATURE_CHANGES&&Xi.default.createElement(Xi.default.Fragment,null,Xi.default.createElement(R8,{count:n.addIds.length,id:"new"}),Xi.default.createElement("span",{className:"separator"}),Xi.default.createElement(R8,{count:-n.deleteIds.length,id:"deleted"}),Xi.default.createElement("span",{className:"separator"}),Xi.default.createElement(R8,{count:o,id:"changed",formatFunction:kNr})),r===zl.SHOW_FEATURE_COUNT&&Xi.default.createElement(Xi.default.Fragment,null,Xi.default.createElement("span",{className:"bold"},t)," ",fe("geojson-control-bar-hint-features-present")),r===zl.NO_TITLE&&Xi.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-title")),r===zl.NO_FEATURES&&Xi.default.createElement("span",{className:"bold"},fe("geojson-control-bar-hint-add-feature"))))};Tot.propTypes={viewState:j8.default.number.isRequired,onUpdateViewMode:j8.default.func.isRequired,formattedFeatureCount:j8.default.string};var Mot=(0,Xi.memo)(Tot);var q8=Z(we(),1);var Cot=Z(xt(),1);var Aot=({onClick:e})=>{let t=ht(kh),r=ht(Jn);return(r==null?void 0:r.type)===Hi.REMOTE?q8.default.createElement(mn,{disabled:!MZe(r),className:"control-bar-layer-buttons--button layer-history-button",onClick:e,title:fe("geojson-control-bar-history-btn-title")},q8.default.createElement("span",{className:Et("control-bar-layer-buttons--badge",t!==null&&"in")}),q8.default.createElement(qr,{name:"clock"})):null};Aot.propTypes={onClick:Cot.default.func.isRequired};var Dot=Aot;var CD=Z(we(),1),Not=Z(xt(),1);var Oot=({onClick:e})=>{let t=ht(Jn),{type:r}=t,n=(0,CD.useMemo)(()=>_A(t)||yA(t),[t]);return r===Hi.REMOTE&&n?CD.default.createElement(mn,{className:"control-bar-layer-buttons--button layer-roles-button",onClick:e,title:fe("geojson-control-bar-roles-btn-title")},CD.default.createElement(qr,{name:"user-roles"})):null};Oot.propTypes={onClick:Not.default.func.isRequired};var Lot=Oot;var Ld=Z(we(),1);var sy=en({key:"geoJsonFeatureDrawState",default:null}),z8=en({key:"undoStylePropertiesState",default:[]}),RNr=()=>{let[e,t]=On(sy),{handleDeleteFeature:r,handleUpdateFeature:n}=P8(),o=Or(({snapshot:h})=>(A,L,P)=>At(void 0,[A,L,P],function*({addOrUpdateProperties:g,removeProperties:x},b,T){let k=yield h.getPromise(Fa),q=yield h.getPromise(sy),U=Object.assign({},q);try{let{properties:H}=U,X=Object.assign({},H);for(let pe of x)delete X[pe];for(let{key:pe,value:ue}of g)X[pe]=ue;U.properties=X;let ee=k.get(U.id),{geometry:ne}=ee;U.geometry=ne,n(U),k.add(U),Le(b)&&typeof b=="function"&&b()}catch(H){Le(T)&&typeof T=="function"&&T(H)}}),[]),i=Or(({snapshot:h,set:g})=>(x,b)=>At(void 0,null,function*(){let T=yield h.getPromise(Fa),A=yield h.getPromise(sy),{id:L}=A,P=A.properties[x];g(z8,k=>[...k,[L,x,P]]),T.setFeatureProperty(L,x,b),T.add(T.get(L))}),[]),a=Or(({snapshot:h})=>g=>At(void 0,null,function*(){let x=yield h.getPromise(Fa),b=yield h.getPromise(sy),{id:T}=b;x.delete(T),r(T),Le(g)&&typeof g=="function"&&g()}),[]),u=Or(({snapshot:h,set:g})=>()=>At(void 0,null,function*(){let x=yield h.getPromise(z8),b=yield h.getPromise(Fa);for(let T of x)b.setFeatureProperty(...T);g(z8,[])}),[]),p=Or(({snapshot:h,set:g})=>(...A)=>At(void 0,[...A],function*({skipPanelState:x,skipResetPreview:b,skipDeselect:T}={skipResetPreview:!1,skipPanelState:!1,skipDeselect:!1}){if(!T){let L=yield h.getPromise(Fa);Le(L)&&L.changeMode("simple_select",{featureIds:[]})}b||u(),x||g(la,jo.NONE),g(z8,[]),g(sy,null)}),[u]);return{geoJsonFeature:e,setFeature:t,resetFeature:p,resetFeaturePreview:u,saveFeature:o,saveFeaturePreview:i,deleteFeature:a}},U1=RNr;var Pot="user_",kot={HOT:"mapbox-gl-draw-hot",COLD:"mapbox-gl-draw-cold"},F8={DIRECT_SELECT:"direct_select",SIMPLE_SELECT:"simple_select",DRAW_POLYGON:"draw_polygon",DRAW_LINE_STRING:"draw_line_string"},jNr=e=>{let{source:t}=e,{properties:r}=e,{meta:n,mode:o}=r,i=(t===kot.COLD||t===kot.HOT)&&n==="feature",a=o===F8.DIRECT_SELECT||o===F8.SIMPLE_SELECT;return i&&a},qNr=e=>{let{properties:t,type:r,geometry:n}=e,{id:o}=t,i=Object.entries(t).filter(([a])=>a.startsWith(Pot)).map(([a,u])=>[a.slice(Pot.length),u]);return{id:o,geometry:n,properties:Object.fromEntries(i),type:r}},zNr=(e,t)=>{let{x:r,y:n}=e;return[[r-t,n-t],[r+t,n+t]]},FNr=2,UNr=()=>{let{setFeature:e,resetFeature:t,resetFeaturePreview:r}=U1(),n=ht(la),o=(0,Ld.useRef)(!1),i=Or(({snapshot:x,set:b})=>T=>At(void 0,null,function*(){let A=yield x.getPromise(yr),L=yield x.getPromise(Fa),P=yield x.getPromise(sy),{point:k}=T,q=zNr(k,FNr),U=A.queryRenderedFeatures(q).filter(jNr).at(0);if(Le(U)){let{id:H}=U.properties;if((P==null?void 0:P.id)===H)return;r(),e(qNr(U)),b(la,jo.FEATURE)}else Le(P)&&!o.current&&([F8.DRAW_LINE_STRING,F8.DRAW_POLYGON].includes(L.getMode())?t({skipDeselect:!0}):t()),o.current=!1}),[e,t,r]),a=(0,Ld.useCallback)(()=>{t()},[t]),u=Or(({set:x})=>b=>{o.current=!0;let T=b.features[0];e(T),x(la,jo.FEATURE)},[e]),p=Or(({snapshot:x})=>()=>At(void 0,null,function*(){let b=yield x.getPromise(yr);Le(b)&&(b.on("click",i),b.on("draw.delete",a),b.on("draw.create",u))}),[]),h=Or(({snapshot:x})=>()=>At(void 0,null,function*(){let b=yield x.getPromise(yr);Le(b)&&(b.off("click",i),b.off("draw.delete",a),b.off("draw.create",u))}),[]),g=Or(({snapshot:x})=>b=>At(void 0,null,function*(){let T=yield x.getPromise(sy);Le(T)&&b!==jo.FEATURE&&t({skipPanelState:!0})}),[t]);return(0,Ld.useEffect)(()=>(p(),()=>{h()}),[]),(0,Ld.useEffect)(()=>{g(n)},[n,g]),Ld.default.createElement(Ld.default.Fragment,null)},Rot=UNr;var jot=Rot;var Pd=Z(we(),1),AD=Z(xt(),1);var qot=({onClose:e,onSave:t,onDiscard:r,show:n})=>{let o=(0,Pd.useCallback)(()=>{t().finally(()=>{e()})},[t,e]);return Pd.default.createElement(lf,{isOpen:n,title:fe("geojson-discard-modal-title"),modalClassName:"vkf-discard-dialog",onClose:e,renderContent:()=>Pd.default.createElement(Pd.default.Fragment,null,Pd.default.createElement("p",null,fe("geojson-discard-modal-description")),Pd.default.createElement("div",{className:"discard-modal-buttons"},Pd.default.createElement(mn,{type:"discard",onClick:r},fe("geojson-discard-modal-discard-button")),Pd.default.createElement(mn,{type:"save",onClick:o},fe("geojson-discard-modal-save-button"))))})};qot.propTypes={onClose:AD.default.func.isRequired,onDiscard:AD.default.func.isRequired,onSave:AD.default.func.isRequired,show:AD.default.bool.isRequired};var zot=qot;var jd=Z(we(),1);var dp=Z(we());var BNr=(0,dp.createContext)(null),Sae={didCatch:!1,error:null},HE=class extends dp.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Sae}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){let{error:t}=this.state;if(t!==null){for(var r,n,o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];(r=(n=this.props).onReset)===null||r===void 0||r.call(n,{args:i,reason:"imperative-api"}),this.setState(Sae)}}componentDidCatch(t,r){var n,o;(n=(o=this.props).onError)===null||n===void 0||n.call(o,t,r)}componentDidUpdate(t,r){let{didCatch:n}=this.state,{resetKeys:o}=this.props;if(n&&r.error!==null&&VNr(t.resetKeys,o)){var i,a;(i=(a=this.props).onReset)===null||i===void 0||i.call(a,{next:o,prev:t.resetKeys,reason:"keys"}),this.setState(Sae)}}render(){let{children:t,fallbackRender:r,FallbackComponent:n,fallback:o}=this.props,{didCatch:i,error:a}=this.state,u=t;if(i){let p={error:a,resetErrorBoundary:this.resetErrorBoundary};if(typeof r=="function")u=r(p);else if(n)u=(0,dp.createElement)(n,p);else if(o!==void 0)u=o;else throw a}return(0,dp.createElement)(BNr.Provider,{value:{didCatch:i,error:a,resetErrorBoundary:this.resetErrorBoundary}},u)}};function VNr(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((r,n)=>!Object.is(r,t[n]))}var Fae=Z(xt(),1);var Fot=Z(we(),1);var WE={OWNER:"owner",EDITOR:"editor"},fl={OWNERS:"owners",EDITORS:"editors"};var Uot=en({key:"vectorMapRolesQueryIdState",default:0}),GNr=Tl({key:"vectorMapRolesQuery",get:t=>At(void 0,[t],function*({get:e}){e(Uot);let{id:r,type:n}=e(Jn),o={editors:[],owners:[]};if(n===Hi.LOCAL||!Le(r))return o;let i=yield FYe(r);for(let{user_id:a,role:u}of i)u===WE.EDITOR?o.editors.push(a):u===WE.OWNER?o.owners.push(a):console.warn(`Cannot map unknown role '${u}'`);return o})}),Iae=()=>Or(({set:t})=>()=>{t(Uot,r=>r+1)},[]),HNr=()=>{let e=Iae(),t=ht(GNr);return(0,Fot.useEffect)(()=>()=>{e()},[]),t},Bot=HNr;var Xo=Z(we(),1);var Bo=Z(we(),1);var PD=e=>e.type==="checkbox",B1=e=>e instanceof Date,Fl=e=>e==null,Jot=e=>typeof e=="object",Ji=e=>!Fl(e)&&!Array.isArray(e)&&Jot(e)&&!B1(e),Qot=e=>Ji(e)&&e.target?PD(e.target)?e.target.checked:e.target.value:e,WNr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,eit=(e,t)=>e.has(WNr(t)),$Nr=e=>{let t=e.constructor&&e.constructor.prototype;return Ji(t)&&t.hasOwnProperty("isPrototypeOf")},Dae=typeof window!="undefined"&&typeof window.HTMLElement!="undefined"&&typeof document!="undefined";function Au(e){let t,r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(Dae&&(e instanceof Blob||e instanceof FileList))&&(r||Ji(e))){if(t=r?[]:{},!r&&!$Nr(e))t=e;else for(let n in e)e.hasOwnProperty(n)&&(t[n]=Au(e[n]));}else return e;return t}var W8=e=>Array.isArray(e)?e.filter(Boolean):[],zi=e=>e===void 0,nr=(e,t,r)=>{if(!t||!Ji(e))return r;let n=W8(t.split(/[,[\].]+?/)).reduce((o,i)=>Fl(o)?o:o[i],e);return zi(n)||n===e?zi(e[t])?r:e[t]:n},gf=e=>typeof e=="boolean",Nae=e=>/^\w*$/.test(e),tit=e=>W8(e.replace(/["|']|\]/g,"").split(/\.|\[/)),Ko=(e,t,r)=>{let n=-1,o=Nae(t)?[t]:tit(t),i=o.length,a=i-1;for(;++n<i;){let u=o[n],p=r;if(n!==a){let h=e[u];p=Ji(h)||Array.isArray(h)?h:isNaN(+o[n+1])?{}:[]}if(u==="__proto__")return;e[u]=p,e=e[u]}return e},B8={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},hp={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},bm={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},YNr=Bo.default.createContext(null),Oae=()=>Bo.default.useContext(YNr);var rit=(e,t,r,n=!0)=>{let o={defaultValues:t._defaultValues};for(let i in e)Object.defineProperty(o,i,{get:()=>{let a=i;return t._proxyFormState[a]!==hp.all&&(t._proxyFormState[a]=!n||hp.all),r&&(r[a]=!0),e[a]}});return o},Du=e=>Ji(e)&&!Object.keys(e).length,nit=(e,t,r,n)=>{r(e);let a=e,{name:o}=a,i=En(a,["name"]);return Du(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(u=>t[u]===(!n||hp.all))},OD=e=>Array.isArray(e)?e:[e],oit=(e,t,r)=>!e||!t||e===t||OD(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n)));function Lae(e){let t=Bo.default.useRef(e);t.current=e,Bo.default.useEffect(()=>{let r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}function ZNr(e){let t=Oae(),{control:r=t.control,disabled:n,name:o,exact:i}=e||{},[a,u]=Bo.default.useState(r._formState),p=Bo.default.useRef(!0),h=Bo.default.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),g=Bo.default.useRef(o);return g.current=o,Lae({disabled:n,next:x=>p.current&&oit(g.current,x.name,i)&&nit(x,h.current,r._updateFormState)&&u(Se(Se({},r._formState),x)),subject:r._subjects.state}),Bo.default.useEffect(()=>(p.current=!0,h.current.isValid&&r._updateValid(!0),()=>{p.current=!1}),[r]),rit(a,r,h.current,!1)}var Rd=e=>typeof e=="string",iit=(e,t,r,n,o)=>Rd(e)?(n&&t.watch.add(e),nr(r,e,o)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),nr(r,i))):(n&&(t.watchAll=!0),r);function KNr(e){let t=Oae(),{control:r=t.control,name:n,defaultValue:o,disabled:i,exact:a}=e||{},u=Bo.default.useRef(n);u.current=n,Lae({disabled:i,subject:r._subjects.values,next:g=>{oit(u.current,g.name,a)&&h(Au(iit(u.current,r._names,g.values||r._formValues,!1,o)))}});let[p,h]=Bo.default.useState(r._getWatch(n,o));return Bo.default.useEffect(()=>r._removeUnmounted()),p}function XNr(e){let t=Oae(),{name:r,disabled:n,control:o=t.control,shouldUnregister:i}=e,a=eit(o._names.array,r),u=KNr({control:o,name:r,defaultValue:nr(o._formValues,r,nr(o._defaultValues,r,e.defaultValue)),exact:!0}),p=ZNr({control:o,name:r,exact:!0}),h=Bo.default.useRef(o.register(r,Se(qt(Se({},e.rules),{value:u}),gf(e.disabled)?{disabled:e.disabled}:{})));return Bo.default.useEffect(()=>{let g=o._options.shouldUnregister||i,x=(b,T)=>{let A=nr(o._fields,b);A&&A._f&&(A._f.mount=T)};if(x(r,!0),g){let b=Au(nr(o._options.defaultValues,r));Ko(o._defaultValues,r,b),zi(nr(o._formValues,r))&&Ko(o._formValues,r,b)}return()=>{(a?g&&!o._state.action:g)?o.unregister(r):x(r,!1)}},[r,o,a,i]),Bo.default.useEffect(()=>{nr(o._fields,r)&&o._updateDisabledField({disabled:n,fields:o._fields,name:r,value:nr(o._fields,r)._f.value})},[n,r,o]),{field:qt(Se({name:r,value:u},gf(n)||p.disabled?{disabled:p.disabled||n}:{}),{onChange:Bo.default.useCallback(g=>h.current.onChange({target:{value:Qot(g),name:r},type:B8.CHANGE}),[r]),onBlur:Bo.default.useCallback(()=>h.current.onBlur({target:{value:nr(o._formValues,r),name:r},type:B8.BLUR}),[r,o]),ref:Bo.default.useCallback(g=>{let x=nr(o._fields,r);x&&g&&(x._f.ref={focus:()=>g.focus(),select:()=>g.select(),setCustomValidity:b=>g.setCustomValidity(b),reportValidity:()=>g.reportValidity()})},[o._fields,r])}),formState:p,fieldState:Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!nr(p.errors,r)},isDirty:{enumerable:!0,get:()=>!!nr(p.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!nr(p.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!nr(p.validatingFields,r)},error:{enumerable:!0,get:()=>nr(p.errors,r)}})}}var Pae=e=>e.render(XNr(e));var JNr=(e,t,r,n,o)=>t?qt(Se({},r[e]),{types:qt(Se({},r[e]&&r[e].types?r[e].types:{}),{[n]:o||!0})}):{};var Vot=e=>({isOnSubmit:!e||e===hp.onSubmit,isOnBlur:e===hp.onBlur,isOnChange:e===hp.onChange,isOnAll:e===hp.all,isOnTouch:e===hp.onTouched}),Got=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length)))),LD=(e,t,r,n)=>{for(let i of r||Object.keys(e)){let a=nr(e,i);if(a){let o=a,{_f:u}=o,p=En(o,["_f"]);if(u){if(u.refs&&u.refs[0]&&t(u.refs[0],i)&&!n)return!0;if(u.ref&&t(u.ref,u.name)&&!n)return!0;if(LD(p,t))break}else if(Ji(p)&&LD(p,t))break}}},QNr=(e,t,r)=>{let n=OD(nr(e,r));return Ko(n,"root",t[r]),Ko(e,r,n),e},kae=e=>e.type==="file",kd=e=>typeof e=="function",V8=e=>{if(!Dae)return!1;let t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},U8=e=>Rd(e),Rae=e=>e.type==="radio",G8=e=>e instanceof RegExp,Hot={value:!1,isValid:!1},Wot={value:!0,isValid:!0},ait=e=>{if(Array.isArray(e)){if(e.length>1){let t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!zi(e[0].attributes.value)?zi(e[0].value)||e[0].value===""?Wot:{value:e[0].value,isValid:!0}:Wot:Hot}return Hot},$ot={isValid:!1,value:null},sit=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,$ot):$ot;function Yot(e,t,r="validate"){if(U8(e)||Array.isArray(e)&&e.every(U8)||gf(e)&&!e)return{type:r,message:U8(e)?e:"",ref:t}}var $E=e=>Ji(e)&&!G8(e)?e:{value:e,message:""},Zot=(e,t,r,n,o)=>At(void 0,null,function*(){let{ref:i,refs:a,required:u,maxLength:p,minLength:h,min:g,max:x,pattern:b,validate:T,name:A,valueAsNumber:L,mount:P,disabled:k}=e._f,q=nr(t,A);if(!P||k)return{};let U=a?a[0]:i,H=Te=>{n&&U.reportValidity&&(U.setCustomValidity(gf(Te)?"":Te||""),U.reportValidity())},X={},ee=Rae(i),ne=PD(i),pe=ee||ne,ue=(L||kae(i))&&zi(i.value)&&zi(q)||V8(i)&&i.value===""||q===""||Array.isArray(q)&&!q.length,Ie=JNr.bind(null,A,r,X),Re=(Te,Ee,Ye,Qe=bm.maxLength,qe=bm.minLength)=>{let Ue=Te?Ee:Ye;X[A]=Se({type:Te?Qe:qe,message:Ue,ref:i},Ie(Te?Qe:qe,Ue))};if(o?!Array.isArray(q)||!q.length:u&&(!pe&&(ue||Fl(q))||gf(q)&&!q||ne&&!ait(a).isValid||ee&&!sit(a).isValid)){let{value:Te,message:Ee}=U8(u)?{value:!!u,message:u}:$E(u);if(Te&&(X[A]=Se({type:bm.required,message:Ee,ref:U},Ie(bm.required,Ee)),!r))return H(Ee),X}if(!ue&&(!Fl(g)||!Fl(x))){let Te,Ee,Ye=$E(x),Qe=$E(g);if(!Fl(q)&&!isNaN(q)){let qe=i.valueAsNumber||q&&+q;Fl(Ye.value)||(Te=qe>Ye.value),Fl(Qe.value)||(Ee=qe<Qe.value)}else{let qe=i.valueAsDate||new Date(q),Ue=st=>new Date(new Date().toDateString()+" "+st),Ne=i.type=="time",et=i.type=="week";Rd(Ye.value)&&q&&(Te=Ne?Ue(q)>Ue(Ye.value):et?q>Ye.value:qe>new Date(Ye.value)),Rd(Qe.value)&&q&&(Ee=Ne?Ue(q)<Ue(Qe.value):et?q<Qe.value:qe<new Date(Qe.value))}if((Te||Ee)&&(Re(!!Te,Ye.message,Qe.message,bm.max,bm.min),!r))return H(X[A].message),X}if((p||h)&&!ue&&(Rd(q)||o&&Array.isArray(q))){let Te=$E(p),Ee=$E(h),Ye=!Fl(Te.value)&&q.length>+Te.value,Qe=!Fl(Ee.value)&&q.length<+Ee.value;if((Ye||Qe)&&(Re(Ye,Te.message,Ee.message),!r))return H(X[A].message),X}if(b&&!ue&&Rd(q)){let{value:Te,message:Ee}=$E(b);if(G8(Te)&&!q.match(Te)&&(X[A]=Se({type:bm.pattern,message:Ee,ref:i},Ie(bm.pattern,Ee)),!r))return H(Ee),X}if(T){if(kd(T)){let Te=yield T(q,t),Ee=Yot(Te,U);if(Ee&&(X[A]=Se(Se({},Ee),Ie(bm.validate,Ee.message)),!r))return H(Ee.message),X}else if(Ji(T)){let Te={};for(let Ee in T){if(!Du(Te)&&!r)break;let Ye=Yot((yield T[Ee](q,t)),U,Ee);Ye&&(Te=Se(Se({},Ye),Ie(Ee,Ye.message)),H(Ye.message),r&&(X[A]=Te))}if(!Du(Te)&&(X[A]=Se({ref:U},Te),!r))return X}}return H(!0),X});function e5r(e,t){let r=t.slice(0,-1).length,n=0;for(;n<r;)e=zi(e)?n++:e[t[n++]];return e}function t5r(e){for(let t in e)if(e.hasOwnProperty(t)&&!zi(e[t]))return!1;return!0}function Sa(e,t){let r=Array.isArray(t)?t:Nae(t)?[t]:tit(t),n=r.length===1?e:e5r(e,r),o=r.length-1,i=r[o];return n&&delete n[i],o!==0&&(Ji(n)&&Du(n)||Array.isArray(n)&&t5r(n))&&Sa(e,r.slice(0,-1)),e}var Tae=()=>{let e=[];return{get observers(){return e},next:o=>{for(let i of e)i.next&&i.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(i=>i!==o)}}),unsubscribe:()=>{e=[]}}},Aae=e=>Fl(e)||!Jot(e);function ly(e,t){if(Aae(e)||Aae(t))return e===t;if(B1(e)&&B1(t))return e.getTime()===t.getTime();let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let o of r){let i=e[o];if(!n.includes(o))return!1;if(o!=="ref"){let a=t[o];if(B1(i)&&B1(a)||Ji(i)&&Ji(a)||Array.isArray(i)&&Array.isArray(a)?!ly(i,a):i!==a)return!1}}return!0}var lit=e=>e.type==="select-multiple",r5r=e=>Rae(e)||PD(e),Mae=e=>V8(e)&&e.isConnected,uit=e=>{for(let t in e)if(kd(e[t]))return!0;return!1};function H8(e,t={}){let r=Array.isArray(e);if(Ji(e)||r)for(let n in e)Array.isArray(e[n])||Ji(e[n])&&!uit(e[n])?(t[n]=Array.isArray(e[n])?[]:{},H8(e[n],t[n])):Fl(e[n])||(t[n]=!0);return t}function cit(e,t,r){let n=Array.isArray(e);if(Ji(e)||n)for(let o in e)Array.isArray(e[o])||Ji(e[o])&&!uit(e[o])?zi(t)||Aae(r[o])?r[o]=Array.isArray(e[o])?H8(e[o],[]):Se({},H8(e[o])):cit(e[o],Fl(t)?{}:t[o],r[o]):r[o]=!ly(e[o],t[o]);return r}var DD=(e,t)=>cit(e,t,H8(t)),fit=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>zi(e)?e:t?e===""?NaN:e&&+e:r&&Rd(e)?new Date(e):n?n(e):e;function Cae(e){let t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return kae(t)?t.files:Rae(t)?sit(e.refs).value:lit(t)?[...t.selectedOptions].map(({value:r})=>r):PD(t)?ait(e.refs).value:fit(zi(t.value)?e.ref.value:t.value,e)}var n5r=(e,t,r,n)=>{let o={};for(let i of e){let a=nr(t,i);a&&Ko(o,i,a._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:n}},ND=e=>zi(e)?e:G8(e)?e.source:Ji(e)?G8(e.value)?e.value.source:e.value:e,Kot="AsyncFunction",o5r=e=>(!e||!e.validate)&&!!(kd(e.validate)&&e.validate.constructor.name===Kot||Ji(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===Kot)),i5r=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function Xot(e,t,r){let n=nr(e,r);if(n||Nae(r))return{error:n,name:r};let o=r.split(".");for(;o.length;){let i=o.join("."),a=nr(t,i),u=nr(e,i);if(a&&!Array.isArray(a)&&r!==i)return{name:r};if(u&&u.type)return{name:i,error:u};o.pop()}return{name:r}}var a5r=(e,t,r,n,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||e):(r?n.isOnBlur:o.isOnBlur)?!e:(r?n.isOnChange:o.isOnChange)?e:!0,s5r=(e,t)=>!W8(nr(e,t)).length&&Sa(e,t),l5r={mode:hp.onSubmit,reValidateMode:hp.onChange,shouldFocusError:!0};function u5r(e={}){let t=Se(Se({},l5r),e),r={submitCount:0,isDirty:!1,isLoading:kd(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},o=Ji(t.defaultValues)||Ji(t.values)?Au(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Au(o),a={action:!1,mount:!1,watch:!1},u={mount:new Set,unMount:new Set,array:new Set,watch:new Set},p,h=0,g={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},x={values:Tae(),array:Tae(),state:Tae()},b=Vot(t.mode),T=Vot(t.reValidateMode),A=t.criteriaMode===hp.all,L=ce=>Fe=>{clearTimeout(h),h=setTimeout(ce,Fe)},P=ce=>At(this,null,function*(){if(!t.disabled&&(g.isValid||ce)){let Fe=t.resolver?Du((yield pe()).errors):yield Ie(n,!0);Fe!==r.isValid&&x.state.next({isValid:Fe})}}),k=(ce,Fe)=>{!t.disabled&&(g.isValidating||g.validatingFields)&&((ce||Array.from(u.mount)).forEach(Be=>{Be&&(Fe?Ko(r.validatingFields,Be,Fe):Sa(r.validatingFields,Be))}),x.state.next({validatingFields:r.validatingFields,isValidating:!Du(r.validatingFields)}))},q=(ce,Fe=[],Be,mt,yt=!0,gt=!0)=>{if(mt&&Be&&!t.disabled){if(a.action=!0,gt&&Array.isArray(nr(n,ce))){let _t=Be(nr(n,ce),mt.argA,mt.argB);yt&&Ko(n,ce,_t)}if(gt&&Array.isArray(nr(r.errors,ce))){let _t=Be(nr(r.errors,ce),mt.argA,mt.argB);yt&&Ko(r.errors,ce,_t),s5r(r.errors,ce)}if(g.touchedFields&&gt&&Array.isArray(nr(r.touchedFields,ce))){let _t=Be(nr(r.touchedFields,ce),mt.argA,mt.argB);yt&&Ko(r.touchedFields,ce,_t)}g.dirtyFields&&(r.dirtyFields=DD(o,i)),x.state.next({name:ce,isDirty:Te(ce,Fe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ko(i,ce,Fe)},U=(ce,Fe)=>{Ko(r.errors,ce,Fe),x.state.next({errors:r.errors})},H=ce=>{r.errors=ce,x.state.next({errors:r.errors,isValid:!1})},X=(ce,Fe,Be,mt)=>{let yt=nr(n,ce);if(yt){let gt=nr(i,ce,zi(Be)?nr(o,ce):Be);zi(gt)||mt&&mt.defaultChecked||Fe?Ko(i,ce,Fe?gt:Cae(yt._f)):Qe(ce,gt),a.mount&&P()}},ee=(ce,Fe,Be,mt,yt)=>{let gt=!1,_t=!1,Yt={name:ce};if(!t.disabled){let nt=!!(nr(n,ce)&&nr(n,ce)._f&&nr(n,ce)._f.disabled);if(!Be||mt){g.isDirty&&(_t=r.isDirty,r.isDirty=Yt.isDirty=Te(),gt=_t!==Yt.isDirty);let zr=nt||ly(nr(o,ce),Fe);_t=!!(!nt&&nr(r.dirtyFields,ce)),zr||nt?Sa(r.dirtyFields,ce):Ko(r.dirtyFields,ce,!0),Yt.dirtyFields=r.dirtyFields,gt=gt||g.dirtyFields&&_t!==!zr}if(Be){let zr=nr(r.touchedFields,ce);zr||(Ko(r.touchedFields,ce,Be),Yt.touchedFields=r.touchedFields,gt=gt||g.touchedFields&&zr!==Be)}gt&&yt&&x.state.next(Yt)}return gt?Yt:{}},ne=(ce,Fe,Be,mt)=>{let yt=nr(r.errors,ce),gt=g.isValid&&gf(Fe)&&r.isValid!==Fe;if(e.delayError&&Be?(p=L(()=>U(ce,Be)),p(e.delayError)):(clearTimeout(h),p=null,Be?Ko(r.errors,ce,Be):Sa(r.errors,ce)),(Be?!ly(yt,Be):yt)||!Du(mt)||gt){let _t=qt(Se(Se({},mt),gt&&gf(Fe)?{isValid:Fe}:{}),{errors:r.errors,name:ce});r=Se(Se({},r),_t),x.state.next(_t)}},pe=ce=>At(this,null,function*(){k(ce,!0);let Fe=yield t.resolver(i,t.context,n5r(ce||u.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return k(ce),Fe}),ue=ce=>At(this,null,function*(){let{errors:Fe}=yield pe(ce);if(ce)for(let Be of ce){let mt=nr(Fe,Be);mt?Ko(r.errors,Be,mt):Sa(r.errors,Be)}else r.errors=Fe;return Fe}),Ie=(mt,yt,...gt)=>At(this,[mt,yt,...gt],function*(ce,Fe,Be={valid:!0}){for(let Yt in ce){let nt=ce[Yt];if(nt){let _t=nt,{_f:zr}=_t,on=En(_t,["_f"]);if(zr){let pa=u.array.has(zr.name),da=nt._f&&o5r(nt._f);da&&g.validatingFields&&k([Yt],!0);let St=yield Zot(nt,i,A,t.shouldUseNativeValidation&&!Fe,pa);if(da&&g.validatingFields&&k([Yt]),St[zr.name]&&(Be.valid=!1,Fe))break;!Fe&&(nr(St,zr.name)?pa?QNr(r.errors,St,zr.name):Ko(r.errors,zr.name,St[zr.name]):Sa(r.errors,zr.name))}!Du(on)&&(yield Ie(on,Fe,Be))}}return Be.valid}),Re=()=>{for(let ce of u.unMount){let Fe=nr(n,ce);Fe&&(Fe._f.refs?Fe._f.refs.every(Be=>!Mae(Be)):!Mae(Fe._f.ref))&&ge(ce)}u.unMount=new Set},Te=(ce,Fe)=>!t.disabled&&(ce&&Fe&&Ko(i,ce,Fe),!ly(ft(),o)),Ee=(ce,Fe,Be)=>iit(ce,u,Se({},a.mount?i:zi(Fe)?o:Rd(ce)?{[ce]:Fe}:Fe),Be,Fe),Ye=ce=>W8(nr(a.mount?i:o,ce,e.shouldUnregister?nr(o,ce,[]):[])),Qe=(ce,Fe,Be={})=>{let mt=nr(n,ce),yt=Fe;if(mt){let gt=mt._f;gt&&(!gt.disabled&&Ko(i,ce,fit(Fe,gt)),yt=V8(gt.ref)&&Fl(Fe)?"":Fe,lit(gt.ref)?[...gt.ref.options].forEach(_t=>_t.selected=yt.includes(_t.value)):gt.refs?PD(gt.ref)?gt.refs.length>1?gt.refs.forEach(_t=>(!_t.defaultChecked||!_t.disabled)&&(_t.checked=Array.isArray(yt)?!!yt.find(Yt=>Yt===_t.value):yt===_t.value)):gt.refs[0]&&(gt.refs[0].checked=!!yt):gt.refs.forEach(_t=>_t.checked=_t.value===yt):kae(gt.ref)?gt.ref.value="":(gt.ref.value=yt,gt.ref.type||x.values.next({name:ce,values:Se({},i)})))}(Be.shouldDirty||Be.shouldTouch)&&ee(ce,yt,Be.shouldTouch,Be.shouldDirty,!0),Be.shouldValidate&&st(ce)},qe=(ce,Fe,Be)=>{for(let mt in Fe){let yt=Fe[mt],gt=`${ce}.${mt}`,_t=nr(n,gt);(u.array.has(ce)||Ji(yt)||_t&&!_t._f)&&!B1(yt)?qe(gt,yt,Be):Qe(gt,yt,Be)}},Ue=(ce,Fe,Be={})=>{let mt=nr(n,ce),yt=u.array.has(ce),gt=Au(Fe);Ko(i,ce,gt),yt?(x.array.next({name:ce,values:Se({},i)}),(g.isDirty||g.dirtyFields)&&Be.shouldDirty&&x.state.next({name:ce,dirtyFields:DD(o,i),isDirty:Te(ce,gt)})):mt&&!mt._f&&!Fl(gt)?qe(ce,gt,Be):Qe(ce,gt,Be),Got(ce,u)&&x.state.next(Se({},r)),x.values.next({name:a.mount?ce:void 0,values:Se({},i)})},Ne=ce=>At(this,null,function*(){a.mount=!0;let Fe=ce.target,Be=Fe.name,mt=!0,yt=nr(n,Be),gt=()=>Fe.type?Cae(yt._f):Qot(ce),_t=Yt=>{mt=Number.isNaN(Yt)||B1(Yt)&&isNaN(Yt.getTime())||ly(Yt,nr(i,Be,Yt))};if(yt){let Yt,nt,zr=gt(),on=ce.type===B8.BLUR||ce.type===B8.FOCUS_OUT,pa=!i5r(yt._f)&&!t.resolver&&!nr(r.errors,Be)&&!yt._f.deps||a5r(on,nr(r.touchedFields,Be),r.isSubmitted,T,b),da=Got(Be,u,on);Ko(i,Be,zr),on?(yt._f.onBlur&&yt._f.onBlur(ce),p&&p(0)):yt._f.onChange&&yt._f.onChange(ce);let St=ee(Be,zr,on,!1),Vr=!Du(St)||da;if(!on&&x.values.next({name:Be,type:ce.type,values:Se({},i)}),pa)return g.isValid&&(e.mode==="onBlur"?on&&P():P()),Vr&&x.state.next(Se({name:Be},da?{}:St));if(!on&&da&&x.state.next(Se({},r)),t.resolver){let{errors:Er}=yield pe([Be]);if(_t(zr),mt){let Qi=Xot(r.errors,n,Be),Ta=Xot(Er,n,Qi.name||Be);Yt=Ta.error,Be=Ta.name,nt=Du(Er)}}else k([Be],!0),Yt=(yield Zot(yt,i,A,t.shouldUseNativeValidation))[Be],k([Be]),_t(zr),mt&&(Yt?nt=!1:g.isValid&&(nt=yield Ie(n,!0)));mt&&(yt._f.deps&&st(yt._f.deps),ne(Be,nt,Yt,St))}}),et=(ce,Fe)=>{if(nr(r.errors,Fe)&&ce.focus)return ce.focus(),1},st=(Be,...mt)=>At(this,[Be,...mt],function*(ce,Fe={}){let yt,gt,_t=OD(ce);if(t.resolver){let Yt=yield ue(zi(ce)?ce:_t);yt=Du(Yt),gt=ce?!_t.some(nt=>nr(Yt,nt)):yt}else ce?(gt=(yield Promise.all(_t.map(Yt=>At(this,null,function*(){let nt=nr(n,Yt);return yield Ie(nt&&nt._f?{[Yt]:nt}:nt)})))).every(Boolean),!(!gt&&!r.isValid)&&P()):gt=yt=yield Ie(n);return x.state.next(qt(Se(Se({},!Rd(ce)||g.isValid&&yt!==r.isValid?{}:{name:ce}),t.resolver||!ce?{isValid:yt}:{}),{errors:r.errors})),Fe.shouldFocus&&!gt&&LD(n,et,ce?_t:u.mount),gt}),ft=ce=>{let Fe=Se({},a.mount?i:o);return zi(ce)?Fe:Rd(ce)?nr(Fe,ce):ce.map(Be=>nr(Fe,Be))},Ze=(ce,Fe)=>({invalid:!!nr((Fe||r).errors,ce),isDirty:!!nr((Fe||r).dirtyFields,ce),error:nr((Fe||r).errors,ce),isValidating:!!nr(r.validatingFields,ce),isTouched:!!nr((Fe||r).touchedFields,ce)}),tt=ce=>{ce&&OD(ce).forEach(Fe=>Sa(r.errors,Fe)),x.state.next({errors:ce?r.errors:{}})},lt=(ce,Fe,Be)=>{let mt=(nr(n,ce,{_f:{}})._f||{}).ref,zr=nr(r.errors,ce)||{},{ref:gt,message:_t,type:Yt}=zr,nt=En(zr,["ref","message","type"]);Ko(r.errors,ce,qt(Se(Se({},nt),Fe),{ref:mt})),x.state.next({name:ce,errors:r.errors,isValid:!1}),Be&&Be.shouldFocus&&mt&&mt.focus&&mt.focus()},ze=(ce,Fe)=>kd(ce)?x.values.subscribe({next:Be=>ce(Ee(void 0,Fe),Be)}):Ee(ce,Fe,!0),ge=(ce,Fe={})=>{for(let Be of ce?OD(ce):u.mount)u.mount.delete(Be),u.array.delete(Be),Fe.keepValue||(Sa(n,Be),Sa(i,Be)),!Fe.keepError&&Sa(r.errors,Be),!Fe.keepDirty&&Sa(r.dirtyFields,Be),!Fe.keepTouched&&Sa(r.touchedFields,Be),!Fe.keepIsValidating&&Sa(r.validatingFields,Be),!t.shouldUnregister&&!Fe.keepDefaultValue&&Sa(o,Be);x.values.next({values:Se({},i)}),x.state.next(Se(Se({},r),Fe.keepDirty?{isDirty:Te()}:{})),!Fe.keepIsValid&&P()},We=({disabled:ce,name:Fe,field:Be,fields:mt,value:yt})=>{if(gf(ce)&&a.mount||ce){let gt=ce?void 0:zi(yt)?Cae(Be?Be._f:nr(mt,Fe)._f):yt;Ko(i,Fe,gt),ee(Fe,gt,!1,!1,!0)}},Oe=(ce,Fe={})=>{let Be=nr(n,ce),mt=gf(Fe.disabled)||gf(t.disabled);return Ko(n,ce,qt(Se({},Be||{}),{_f:Se(qt(Se({},Be&&Be._f?Be._f:{ref:{name:ce}}),{name:ce,mount:!0}),Fe)})),u.mount.add(ce),Be?We({field:Be,disabled:gf(Fe.disabled)?Fe.disabled:t.disabled,name:ce,value:Fe.value}):X(ce,!0,Fe.value),qt(Se(Se({},mt?{disabled:Fe.disabled||t.disabled}:{}),t.progressive?{required:!!Fe.required,min:ND(Fe.min),max:ND(Fe.max),minLength:ND(Fe.minLength),maxLength:ND(Fe.maxLength),pattern:ND(Fe.pattern)}:{}),{name:ce,onChange:Ne,onBlur:Ne,ref:yt=>{if(yt){Oe(ce,Fe),Be=nr(n,ce);let gt=zi(yt.value)&&yt.querySelectorAll&&yt.querySelectorAll("input,select,textarea")[0]||yt,_t=r5r(gt),Yt=Be._f.refs||[];if(_t?Yt.find(nt=>nt===gt):gt===Be._f.ref)return;Ko(n,ce,{_f:Se(Se({},Be._f),_t?{refs:[...Yt.filter(Mae),gt,...(Array.isArray(nr(o,ce))?[{}]:[])],ref:{type:gt.type,name:ce}}:{ref:gt})}),X(ce,!1,void 0,gt)}else Be=nr(n,ce,{}),Be._f&&(Be._f.mount=!1),(t.shouldUnregister||Fe.shouldUnregister)&&!(eit(u.array,ce)&&a.action)&&u.unMount.add(ce)}})},at=()=>t.shouldFocusError&&LD(n,et,u.mount),ot=ce=>{gf(ce)&&(x.state.next({disabled:ce}),LD(n,(Fe,Be)=>{let mt=nr(n,Be);mt&&(Fe.disabled=mt._f.disabled||ce,Array.isArray(mt._f.refs)&&mt._f.refs.forEach(yt=>{yt.disabled=mt._f.disabled||ce}))},0,!1))},Pt=(ce,Fe)=>Be=>At(this,null,function*(){let mt;if(Be&&(Be.preventDefault&&Be.preventDefault(),Be.persist&&Be.persist()),t.disabled){Fe&&(yield Fe(Se({},r.errors),Be));return}let yt=Au(i);if(x.state.next({isSubmitting:!0}),t.resolver){let{errors:gt,values:_t}=yield pe();r.errors=gt,yt=_t}else yield Ie(n);if(Sa(r.errors,"root"),Du(r.errors)){x.state.next({errors:{}});try{yield ce(yt,Be)}catch(gt){mt=gt}}else Fe&&(yield Fe(Se({},r.errors),Be)),at(),setTimeout(at);if(x.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:Du(r.errors)&&!mt,submitCount:r.submitCount+1,errors:r.errors}),mt)throw mt}),Mt=(ce,Fe={})=>{nr(n,ce)&&(zi(Fe.defaultValue)?Ue(ce,Au(nr(o,ce))):(Ue(ce,Fe.defaultValue),Ko(o,ce,Au(Fe.defaultValue))),Fe.keepTouched||Sa(r.touchedFields,ce),Fe.keepDirty||(Sa(r.dirtyFields,ce),r.isDirty=Fe.defaultValue?Te(ce,Au(nr(o,ce))):Te()),Fe.keepError||(Sa(r.errors,ce),g.isValid&&P()),x.state.next(Se({},r)))},Nt=(ce,Fe={})=>{let Be=ce?Au(ce):o,mt=Au(Be),yt=Du(ce),gt=yt?o:mt;if(Fe.keepDefaultValues||(o=Be),!Fe.keepValues){if(Fe.keepDirtyValues){let _t=new Set([...u.mount,...Object.keys(DD(o,i))]);for(let Yt of Array.from(_t))nr(r.dirtyFields,Yt)?Ko(gt,Yt,nr(i,Yt)):Ue(Yt,nr(gt,Yt))}else{if(Dae&&zi(ce))for(let _t of u.mount){let Yt=nr(n,_t);if(Yt&&Yt._f){let nt=Array.isArray(Yt._f.refs)?Yt._f.refs[0]:Yt._f.ref;if(V8(nt)){let zr=nt.closest("form");if(zr){zr.reset();break}}}}n={}}i=e.shouldUnregister?Fe.keepDefaultValues?Au(o):{}:Au(gt),x.array.next({values:Se({},gt)}),x.values.next({values:Se({},gt)})}u={mount:Fe.keepDirtyValues?u.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!g.isValid||!!Fe.keepIsValid||!!Fe.keepDirtyValues,a.watch=!!e.shouldUnregister,x.state.next({submitCount:Fe.keepSubmitCount?r.submitCount:0,isDirty:yt?!1:Fe.keepDirty?r.isDirty:!!(Fe.keepDefaultValues&&!ly(ce,o)),isSubmitted:Fe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:yt?{}:Fe.keepDirtyValues?Fe.keepDefaultValues&&i?DD(o,i):r.dirtyFields:Fe.keepDefaultValues&&ce?DD(o,ce):Fe.keepDirty?r.dirtyFields:{},touchedFields:Fe.keepTouched?r.touchedFields:{},errors:Fe.keepErrors?r.errors:{},isSubmitSuccessful:Fe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Ae=(ce,Fe)=>Nt(kd(ce)?ce(i):ce,Fe);return{control:{register:Oe,unregister:ge,getFieldState:Ze,handleSubmit:Pt,setError:lt,_executeSchema:pe,_getWatch:Ee,_getDirty:Te,_updateValid:P,_removeUnmounted:Re,_updateFieldArray:q,_updateDisabledField:We,_getFieldArray:Ye,_reset:Nt,_resetDefaultValues:()=>kd(t.defaultValues)&&t.defaultValues().then(ce=>{Ae(ce,t.resetOptions),x.state.next({isLoading:!1})}),_updateFormState:ce=>{r=Se(Se({},r),ce)},_disableForm:ot,_subjects:x,_proxyFormState:g,_setErrors:H,get _fields(){return n},get _formValues(){return i},get _state(){return a},set _state(ce){a=ce},get _defaultValues(){return o},get _names(){return u},set _names(ce){u=ce},get _formState(){return r},set _formState(ce){r=ce},get _options(){return t},set _options(ce){t=Se(Se({},t),ce)}},trigger:st,register:Oe,handleSubmit:Pt,watch:ze,setValue:Ue,getValues:ft,reset:Ae,resetField:Mt,clearErrors:tt,unregister:ge,setError:lt,setFocus:(ce,Fe={})=>{let Be=nr(n,ce),mt=Be&&Be._f;if(mt){let yt=mt.refs?mt.refs[0]:mt.ref;yt.focus&&(yt.focus(),Fe.shouldSelect&&kd(yt.select)&&yt.select())}},getFieldState:Ze}}function $8(e={}){let t=Bo.default.useRef(),r=Bo.default.useRef(),[n,o]=Bo.default.useState({isDirty:!1,isValidating:!1,isLoading:kd(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:kd(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current=qt(Se({},u5r(e)),{formState:n}));let i=t.current.control;return i._options=e,Lae({subject:i._subjects.state,next:a=>{nit(a,i._proxyFormState,i._updateFormState,!0)&&o(Se({},i._formState))}}),Bo.default.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Bo.default.useEffect(()=>{if(i._proxyFormState.isDirty){let a=i._getDirty();a!==n.isDirty&&i._subjects.state.next({isDirty:a})}},[i,n.isDirty]),Bo.default.useEffect(()=>{e.values&&!ly(e.values,r.current)?(i._reset(e.values,i._options.resetOptions),r.current=e.values,o(a=>Se({},a))):i._resetDefaultValues()},[e.values,i]),Bo.default.useEffect(()=>{e.errors&&i._setErrors(e.errors)},[e.errors,i]),Bo.default.useEffect(()=>{i._state.mount||(i._updateValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next(Se({},i._formState))),i._removeUnmounted()}),Bo.default.useEffect(()=>{e.shouldUnregister&&i._subjects.values.next({values:i._getWatch()})},[e.shouldUnregister,i]),t.current.formState=rit(n,i),t.current}var qae=Z(xt(),1);var V1=Z(xt(),1),vf=Z(we(),1);var kD=Z(we(),1),RD=Z(xt(),1);var pit=({className:e,value:t,onDeleteClick:r,disabled:n})=>kD.default.createElement("div",{className:`vkf-pill-root ${e}`},kD.default.createElement("span",{className:"value"},t," "),!n&&kD.default.createElement(mn,{className:"delete-button",onClick:()=>r(t),disabled:n},kD.default.createElement(qr,{name:"delete"})));pit.propTypes={value:RD.default.string.isRequired,onDeleteClick:RD.default.func.isRequired,className:RD.default.string,disabled:RD.default.bool};var dit=pit;var hit=dit;var mit=(0,vf.forwardRef)(function(t,r){let{name:n,onChange:o=()=>{},onBlur:i=()=>{},value:a=[],disabled:u=!1,placeholder:p=""}=t,[h,g]=(0,vf.useState)(a!=null?a:[]),x=(0,vf.useCallback)(T=>{if(!Le(T))return;let A=[...h];A.splice(T,1),g(A),o(A)},[h]),b=(0,vf.useCallback)(T=>{var k;if(T.key!=="Enter")return;let A=(k=T.target.value)!=null?k:"";if(A===""||h.findIndex(q=>q===A)>-1)return;T.target.value="";let P=[...h,A];g(P),o(P)},[h]);return vf.default.createElement("div",{className:"multi-value-input-root"},vf.default.createElement("div",{className:"input-field"},h.map((T,A)=>vf.default.createElement(hit,{className:"pill",key:T,value:T,onDeleteClick:()=>x(A),disabled:u})),vf.default.createElement("input",{className:"vkf-form-input",ref:r,name:n,onKeyDown:b,onBlur:i,disabled:u,placeholder:u?void 0:p})))});mit.propTypes={name:V1.default.string.isRequired,value:V1.default.array,disabled:V1.default.bool,onChange:V1.default.func,onBlur:V1.default.func,placeholder:V1.default.string};var git=mit;var jae=git;var c5r=()=>Or(({snapshot:t})=>r=>At(void 0,null,function*(){let{id:n,type:o}=yield t.getPromise(Jn);return o===Hi.LOCAL||!Le(n)?Promise.resolve():UYe(n,r)}),[]),vit=c5r;var f5r={owners:WE.OWNER,editors:WE.EDITOR},yit=(e,t)=>{let r={remove:[],create_or_update:[]};for(let o of Object.values(fl)){let i=f5r[o];if(!Le(i)||!Le(e[o]))continue;let a=e[o].filter(p=>!t[o].includes(p)),u=t[o].filter(p=>!e[o].includes(p));a=a.map(p=>({user_id:p,role:i})),u=u.map(p=>({user_id:p,role:i})),r.create_or_update.push(...a),r.remove.push(...u)}let n=r.remove.filter(({user_id:o})=>r.create_or_update.findIndex(({user_id:u})=>u===o)===-1);return r.remove=n,r.remove.length===0&&r.create_or_update.length===0?null:r};var _it="vkf-geojson-roles-form",p5r="PLACEHOLDER",d5r=(e,t)=>{let r=t[fl.EDITORS],n=t[fl.OWNERS];for(let o of r)if(n.findIndex(a=>a===o)!==-1)return fe("geojson-roles-form.error.duplicateRoles").replace(p5r,`"${o}"`);return!0},xit=e=>{let{onCancelClick:t=()=>{},onSubmitted:r=()=>{}}=e,[n,o]=(0,Xo.useState)(""),{handleSubmit:i,trigger:a,control:u,formState:{errors:p}}=$8(),h=Bot(),g=vit(),x=ht(Jn),b=(0,Xo.useMemo)(()=>!Le(x.id),[x.id]),T=(0,Xo.useCallback)(L=>{let P=yit(L,h);if(!Le(P)){r();return}g(P).then(()=>{r()}).catch(k=>{if(console.log(k),k.response){if(k.response.status===401){o(fe("common-errors-http-401"));return}if(k.response.status===403){o(fe("common-errors-http-403"));return}}o(fe("common-errors-unexpected"))})},[r]),A=(0,Xo.useCallback)(L=>{L.key==="Enter"&&Object.values(fl).includes(L.target.name)&&L.preventDefault()},[]);return Xo.default.createElement("div",{className:"vkf-geojson-roles-form-root"},Xo.default.createElement("div",{className:"intro-text"},b?fe("geojson-roles-form-intro-unsaved"):fe("geojson-roles-form-intro")),Xo.default.createElement("form",{id:_it,onSubmit:i(T),onKeyDown:A},Xo.default.createElement("div",{className:Et("vkf-form-control",p[fl.OWNERS]&&"error")},Xo.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-owner")),Xo.default.createElement(Pae,{name:fl.OWNERS,control:u,defaultValue:h.owners,rules:{required:fe("geojson-roles-form.error.required")},render:({field:L})=>Xo.default.createElement(jae,qt(Se({},L),{onChange:P=>{L.onChange(P),a(fl.EDITORS),o("")},disabled:!yA(x),placeholder:fe("geojson-roles-insert-username")}))}),p[fl.OWNERS]&&Xo.default.createElement("div",{className:"vkf-form-error"},p[fl.OWNERS].message)),Xo.default.createElement("div",{className:Et("vkf-form-control",p[fl.EDITORS]&&"error")},Xo.default.createElement("label",{className:"vkf-form-label"},fe("geojson-roles-authors")),Xo.default.createElement(Pae,{name:fl.EDITORS,control:u,defaultValue:h.editors,rules:{validate:d5r},render:({field:L})=>Xo.default.createElement(jae,qt(Se({},L),{onChange:P=>{L.onChange(P),a(fl.EDITORS),o("")},disabled:!_A(x),placeholder:fe("geojson-roles-insert-username")}))}),p[fl.EDITORS]&&Xo.default.createElement("div",{className:"vkf-form-error"},p[fl.EDITORS].message))),n.length!==""&&Xo.default.createElement("div",{className:"error-message"},n),Xo.default.createElement("div",{className:"buttons"},Xo.default.createElement(mn,{form:_it,disabled:!_A(x)&&!yA(x),buttonType:"submit",type:"save",className:"submit-button"},Xo.default.createElement(qr,{name:"save"}),fe("geojson-roles-btn-save")),Xo.default.createElement(mn,{className:"cancel-button",type:"discard",onClick:t},Xo.default.createElement(qr,{name:"discard"}),fe("geojson-cancel-btn"))))};xit.propTypes={onCancelClick:qae.default.func,onSubmitted:qae.default.func};var bit=xit;var wit=bit;var zae=Z(xt(),1),Y8=Z(we(),1),Eit=({className:e,resetErrorBoundary:t})=>((0,Y8.useEffect)(()=>()=>{t()},[t]),Y8.default.createElement("div",{className:e},fe("common-errors-unexpected")));Eit.propTypes={className:zae.default.string,resetErrorBoundary:zae.default.func.isRequired};var Sit=Eit;var Z8=Sit;var Iit=({show:e,onClose:t})=>{let r=Iae(),n=(0,jd.useCallback)(()=>{t()},[t]);return jd.default.createElement(lf,{isOpen:e,onClose:t,title:fe("geojson-roles-modal-title"),renderContent:()=>jd.default.createElement(HE,{FallbackComponent:Z8,onReset:r},jd.default.createElement(jd.Suspense,{fallback:jd.default.createElement("div",null,"Loading ...")},jd.default.createElement(wit,{onCancelClick:t,onSubmitted:n}))),modalClassName:"vkf-dialog-geojson-roles"})};Iit.propTypes={show:Fae.default.bool,onClose:Fae.default.func};var Tit=Iit;var Mit=Tit;var Cit=Mit;var zl={INITIAL:0,SHOW_FEATURE_COUNT:1,NO_TITLE:2,NO_FEATURES:3,UNSAVED_FEATURE_CHANGES:4},YE={NONE:0,ROLES:1,DISCARD:2},Ait=()=>{let e=Mr(Hc),t=Mr(la),{removeDraw:r}=bae(),n=bot(),{resetFeaturePreview:o}=U1(),i=ht(Jn),a=ht(Zs),u=ht(ba),[p,h]=(0,so.useState)(zl.INITIAL),[g,x]=(0,so.useState)(YE.NONE);p===zl.INITIAL?Le(a[it.title])?u.features.length===0?h(zl.NO_FEATURES):h(zl.SHOW_FEATURE_COUNT):h(zl.NO_TITLE):p===zl.NO_TITLE&&Le(a[it.title])&&(u.features.length===0?h(zl.NO_FEATURES):h(zl.SHOW_FEATURE_COUNT));let b=(0,so.useMemo)(()=>{var ne;let ee=(ne=a[it.title])!=null?ne:"";return ee===""?`[${fe("geojson-featureview-no-title")}]`:ee},[a[it.title]]),T=(0,so.useMemo)(()=>Le(a[it.title])&&a[it.title]!=="",[a[it.title]]),A=(0,so.useMemo)(()=>{let ee=u.features.length;return ee>1?`${ee} ${fe("geojson-control-bar-feature-plural")}`:ee===1?`1 ${fe("geojson-control-bar-feature")}`:`${fe("geojson-control-bar-no-features")}`},[u]),L=(0,so.useCallback)(()=>{t(jo.METADATA)},[]),P=(0,so.useCallback)(()=>{t(jo.HISTORY)},[]),k=(0,so.useCallback)(()=>{x(YE.ROLES)},[]),q=(0,so.useCallback)(()=>{x(YE.NONE)},[]),U=(0,so.useCallback)(()=>(o(),n()),[o,n]),H=(0,so.useCallback)(()=>{r().then(()=>{e(Ws.STANDARD)}),q()},[r]),X=(0,so.useCallback)(()=>{x(YE.DISCARD)},[]);return so.default.createElement("div",{className:"vkf-geojson-control-bar-root"},so.default.createElement("div",{className:"control-bar-header"},so.default.createElement("div",{className:"control-bar-title"},b),so.default.createElement("div",{className:"control-bar-layer-buttons"},lq(i)&&so.default.createElement(mn,{className:"control-bar-layer-buttons--button layer-metadata-button",onClick:L,title:fe("geojson-control-bar-metadata-btn-title")},so.default.createElement(qr,{name:"metadata-panel"})),so.default.createElement(Dot,{onClick:P}),so.default.createElement(Lot,{onClick:k}))),so.default.createElement(Mot,{onUpdateViewMode:h,viewState:p,formattedFeatureCount:A}),so.default.createElement("div",{className:"control-bar-footer"},so.default.createElement(mn,{className:"discard-button",onClick:X,type:"discard"},so.default.createElement(qr,{name:"discard"}),fe("geojson-cancel-btn")),so.default.createElement(mn,{disabled:!T,className:"save-button",onClick:U,type:"save"},so.default.createElement(qr,{name:"save"}),fe("geojson-save-btn"))),so.default.createElement(zot,{show:g===YE.DISCARD,onSave:U,onDiscard:H,onClose:q}),so.default.createElement(Cit,{show:g===YE.ROLES,onClose:q}))};Ait.propTypes={};var Dit=Ait;var Nit=Dit;var oi=Z(we(),1);var qd=Z(we(),1),jD=Z(xt(),1);var Oit=({show:e,onClose:t,onDelete:r,description:n})=>qd.default.createElement(lf,{isOpen:e,onClose:t,title:fe("geojson-deletemodal-title"),renderContent:()=>qd.default.createElement(qd.default.Fragment,null,qd.default.createElement("p",null,n),qd.default.createElement("div",{className:"delete-feature-modal-buttons"},qd.default.createElement(gA,{className:"delete-btn",onClick:r,type:"delete"},qd.default.createElement(qr,{name:"delete"}),fe("geojson-deletemodal-delete-btn")),qd.default.createElement(gA,{className:"cancel-btn",onClick:t,type:"discard"},qd.default.createElement(qr,{name:"discard"}),fe("geojson-cancel-btn")))),modalClassName:"vkf-delete-dialog"});Oit.propTypes={show:jD.default.bool,onClose:jD.default.func,onDelete:jD.default.func,description:jD.default.string};var Lit=Oit;var K8=Lit;var h5r=()=>{let e=Or(({snapshot:n,set:o})=>()=>At(void 0,null,function*(){let{selectedLayer:i}=yield n.getPromise(Qp),a=i.getMetadata(it.vectorMapId),u=i.getId();yield jYe(a),o(Ys,null),o($s,null),o(_n,p=>p.filter(h=>h.getId()!==u)),sp(o)})),t=Or(({set:n})=>()=>At(void 0,null,function*(){sp(n)})),r=Or(({snapshot:n,set:o})=>()=>At(void 0,null,function*(){let{selectedLayer:i}=yield n.getPromise(Qp),a=i.getId();o(Ys,null),o($s,null),o(_n,u=>u.filter(p=>p.getId()!==a)),sp(o)}));return Or(({snapshot:n})=>()=>At(void 0,null,function*(){let o=yield n.getPromise(Jn);if(!Le(o))return;let{type:i,id:a}=o;i===Hi.REMOTE?Le(a)?yield e():yield t():yield r()}))},Pit=h5r;var uy=Z(we(),1),X8=Z(xt(),1);var kit=({description:e,onDeleteClick:t,buttonLabel:r})=>uy.default.createElement("div",{className:"danger-zone-root"},uy.default.createElement("p",{className:"text text-header"},"danger zone"),uy.default.createElement("div",{className:"danger-zone-content"},uy.default.createElement("p",{className:"text text-description"},e),uy.default.createElement(mn,{className:"delete-button",onClick:t,type:"delete"},uy.default.createElement(qr,{name:"delete"}),uy.default.createElement("p",{className:"text text-button"},r))));kit.propTypes={description:X8.default.string.isRequired,onDeleteClick:X8.default.func.isRequired,buttonLabel:X8.default.string.isRequired};var Rit=kit;var J8=Rit;var G1=Z(xt(),1),Xa=Z(we(),1);var m5r=e=>e===""||URL.canParse(e),Uae=({formId:e,data:t,onValidatedFormSubmit:r})=>{var h,g,x,b;let[n,o]=(0,Xa.useState)((h=t[it.thumbnailUrl])!=null?h:""),{register:i,handleSubmit:a,formState:{errors:u}}=$8(),p=(0,Xa.useCallback)(T=>o(T.target.value),[]);return Xa.default.createElement("form",{className:"geojson-metadata-form-root",id:e,onSubmit:a(r)},Xa.default.createElement("div",{className:"geojson-metadata-form-fields"},Xa.default.createElement("div",{className:Et("vkf-form-control",u[it.title]&&"error")},Xa.default.createElement("label",{className:"vkf-form-label",htmlFor:it.title},fe("geojson-metadata-title")),Xa.default.createElement("input",Se({className:"vkf-form-input",placeholder:fe("geojson-placeholder-title"),defaultValue:(g=t[it.title])!=null?g:""},i(it.title,{required:!0})))),Xa.default.createElement("div",{className:Et("vkf-form-control",u[it.description]&&"error")},Xa.default.createElement("label",{className:"vkf-form-label",htmlFor:it.description},fe("geojson-metadata-description")),Xa.default.createElement("textarea",Se({className:"vkf-form-textarea",placeholder:fe("geojson-placeholder-description"),defaultValue:(x=t[it.description])!=null?x:""},i(it.description)))),Xa.default.createElement("div",{className:Et("vkf-form-control",u[it.thumbnailUrl]&&"error")},Xa.default.createElement("label",{className:"vkf-form-label",htmlFor:it.thumbnailUrl},fe("geojson-metadata-thumbnailUrl")),Xa.default.createElement("div",{className:"image-with-fallback-container"},Xa.default.createElement(DE,{imageUrl:n,showPlaceholder:!0,imageAsPreview:!0})),Xa.default.createElement("input",Se({className:"vkf-form-input",placeholder:fe("geojson-placeholder-thumbnailUrl"),defaultValue:(b=t[it.thumbnailUrl])!=null?b:""},i(it.thumbnailUrl,{onBlur:p,validate:m5r}))))))};Uae.defaultPropTypes={};Uae.propTypes={onValidatedFormSubmit:G1.default.func.isRequired,formId:G1.default.string.isRequired,data:G1.default.shape({[it.title]:G1.default.string,[it.description]:G1.default.string,[it.thumbnailUrl]:G1.default.string})};var jit=Uae;var qit=jit;var zit="vkf-geojson-metadata-form",qD={INITIAL:0,DELETE_DIALOG:1},Fit=()=>{let e=Mr(la),[t,r]=On(Zs),n=ht(Jn),o=Pit(),[i,a]=(0,oi.useState)(qD.INITIAL),{introText:u,title:p}=(0,oi.useMemo)(()=>{if(!Le(n))return{introText:"",title:""};let{type:L,id:P}=n,k={introText:fe("geojson-metadata-panel-intro-edit"),title:fe("geojson-metadata-panel-header-edit")},q={introText:fe("geojson-metadata-panel-intro-create"),title:fe("geojson-metadata-panel-header-create")};return L===Hi.REMOTE?Le(P)?k:q:k},[n]),h=(0,oi.useMemo)(()=>{if(!Le(n))return!1;let{type:L,id:P}=n;return L===Hi.REMOTE&&!Le(P)},[n]),g=(0,oi.useCallback)(()=>{a(qD.INITIAL)},[]),x=(0,oi.useCallback)(()=>{o()},[o]),b=(0,oi.useCallback)(()=>{i!==qD.DELETE_DIALOG&&a(qD.DELETE_DIALOG)},[i]),T=(0,oi.useCallback)(()=>{e(jo.NONE)},[]),A=(0,oi.useCallback)(L=>{r(L),T()},[]);return oi.default.createElement("div",{className:"geojson-metadata-panel-root"},oi.default.createElement(fd,{title:p,onCloseClick:T}),oi.default.createElement("div",{className:"geojson-metadata-panel-content"},oi.default.createElement("div",{className:"introduction-text content-padding"},u),oi.default.createElement("div",{className:"metadata-form-container content-padding"},oi.default.createElement(qit,{formId:zit,data:t,onValidatedFormSubmit:A})),!h&&oi.default.createElement("div",{className:"danger-zone-container"},oi.default.createElement(J8,{description:fe("geojson-metadata-panel-delete"),onDeleteClick:b,buttonLabel:fe("geojson-metadata-panel-delete-btn")}))),oi.default.createElement("div",{className:"footer-container"},oi.default.createElement(mn,{className:"save-button",type:"save",buttonType:"submit",form:zit},oi.default.createElement(qr,{name:"save"}),fe("geojson-apply-btn")),oi.default.createElement(mn,{className:"discard-button",onClick:T,type:"discard"},oi.default.createElement(qr,{name:"discard"}),fe("geojson-cancel-btn"))),oi.default.createElement(K8,{show:i===qD.DELETE_DIALOG,onClose:g,onDelete:x,description:fe("geojson-metadata-delete-vector")}))};Fit.propTypes={};var Uit=Fit;var Bit=Uit;var Qr=Z(we(),1),mp=Z(xt(),1);var Is=Z(we(),1),ZE=Z(xt(),1);var Vit=({existingFields:e,onAddField:t,onClose:r,isDisplayed:n,onError:o})=>{let[i,a]=(0,Is.useState)({key:"",value:""}),[u,p]=(0,Is.useState)({key:!1,value:!1}),h=(0,Is.useRef)(),g=L=>{let{name:P,value:k}=L.target;a(q=>qt(Se({},q),{[P]:k}))},x=(0,Is.useCallback)(L=>{if(L.relatedTarget===h.current)return;let{key:P,value:k}=i,{isValid:q,errors:U}=Qrt(P,k,e);p(U),o(U),q&&(t({key:P.trim().toLowerCase(),value:k.trim().toLowerCase()}),a({key:"",value:""}))},[i,e,t]),b=()=>{r(),a({key:"",value:""}),p({key:!1,value:!1})},T=L=>{L.key==="Enter"&&L.target.blur()},A=(0,Is.useCallback)(L=>{L&&n&&L.focus()},[n]);return Is.default.createElement("div",{className:"new-field-root"},Is.default.createElement("div",{className:"label-section"},Is.default.createElement("input",{className:Et("geojson-feature-property-label",{error:u.key}),type:"text",name:"key",value:i.key,onChange:g,onBlur:x,onKeyDown:T,onFocus:()=>p(L=>({key:!1,value:L.value})),ref:A,placeholder:fe("geojson-editfeature-input-placeholder")})),Is.default.createElement("div",{className:"input-section"},Is.default.createElement("input",{className:Et("geojson-feature-property-input",{error:u.value}),type:"text",name:"value",value:i.value,onChange:g,onBlur:x,onKeyDown:T,onFocus:()=>p(L=>({key:L.key,value:!1})),tabIndex:n?0:-1,placeholder:fe("geojson-editfeature-label-placeholder")})),Is.default.createElement(mn,{className:"delete-button",type:"discard",onClick:b,ref:h},Is.default.createElement("span",null,fe("geojson-featureview-delete-field-btn")),Is.default.createElement(qr,{name:"delete"})))};Vit.propTypes={existingFields:ZE.default.array.isRequired,onAddField:ZE.default.func.isRequired,onClose:ZE.default.func.isRequired,isDisplayed:ZE.default.bool,onError:ZE.default.func};var Git=Vit;var yf=Z(we(),1),H1=Z(xt(),1);var Bae="FF",Vae=e=>Number(e.toFixed(0)).toString(16).padStart(2,"0"),g5r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(",").map(n=>parseInt(n,10)).map(Vae).join("");return t?`#${r}${Bae}`:`#${r}`},v5r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.split("(")[1].split(")")[0].split(","),n=r.slice(0,3).map(i=>parseInt(i,10)).map(Vae).join(""),o=Vae(parseFloat(r[3])*255);return t?`#${n}${o}`:`#${n}`},y5r=(e,{useAlpha:t}={useAlpha:!1})=>{let r=e.trim();if(r.startsWith("rgba"))return v5r(r,{useAlpha:t});if(r.startsWith("rgb"))return g5r(r,{useAlpha:t});if(r.startsWith("#"))if(e.length===4){let n=e.slice(1,3).map(o=>`${o}${o}`);return t?`#${n}${Bae}`:`#${n}`}else{if(e.length===7)return t?`${e}${Bae}`:e;if(e.length===9)return t?e:e.slice(0,7)}throw new Error("Unknown color format")},_5r=e=>{let t={blue:"#0000ff",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",yellow:"#ffff00"};if(!Le(e)&&typeof e!="string")throw new Error("No input specified");let r=e.trim().toLowerCase();if(!Object.hasOwn(t,r))throw new Error("No matching legacy color found");return t[r]},Hit=e=>{let t=e;try{t=y5r(e)}catch(r){t=_5r(e)}return t};var Wit=({title:e,value:t,inputProps:r={},onChange:n,onBlur:o,id:i})=>{let a=(0,yf.useRef)(),u=(0,yf.useCallback)(x=>{let{type:b,min:T,max:A}=r,L=x;if(b==="number")L=Number.isNaN(Number.parseFloat(L))?1:parseFloat(L),L=Le(T)?Math.max(T,L):L,L=Le(A)?Math.min(A,L):L;else if(b==="color")try{L=Hit(L)}catch(P){L=zn[Ur.SYMBOL].COLOR}return L},[r]),p=(0,yf.useMemo)(()=>u(t),[t,u]),h=(0,yf.useCallback)(()=>{let x=u(a.current.value);o([e,x])},[o,u]),g=(0,yf.useCallback)(x=>{if(Le(n)){let b=u(x.target.value);n([e,b])}},[u,n]);return yf.default.createElement("div",{className:"style-property-item"},yf.default.createElement("label",{htmlFor:"style-input",className:"geojson-feature-property-input"},e),yf.default.createElement("input",qt(Se({className:"geojson-feature-property-input"},r),{defaultValue:p,onChange:g,onBlur:h,ref:a,key:i})))};Wit.propTypes={title:H1.default.string.isRequired,value:H1.default.any,inputProps:H1.default.object,onChange:H1.default.func,onBlur:H1.default.func,id:H1.default.string.isRequired};var $it=Wit;var Ci=Z(we(),1),zd=Z(xt(),1);var Yit=({title:e,value:t,onChange:r,onBlur:n,onDelete:o,isHeaderEditable:i,existingFields:a,onError:u,id:p})=>{let[h,g]=(0,Ci.useState)({key:!1,value:!1}),x=(0,Ci.useMemo)(()=>e===ci.imgLink,[e]),b=(0,Ci.useRef)(),T=(0,Ci.useRef)(),A=()=>{let q=b.current.value,U=T.current.value,H={key:!1,value:!1},X=q!==e,ee=U==="",ne=X&&a.some(([ue])=>ue.toLowerCase()===q.toLowerCase());if(e===ci.time){if(U!==""){let ue=aC(U).valueOf();Number.isNaN(ue)?H={key:!1,value:!0}:U=ue}}else H={key:ne||q==="",value:i&&ee};g(H),u(H),!H.key&&!H.value&&(n([q,U]),g({key:!1,value:!1}))},L=q=>{q.key==="Enter"&&q.target.blur()},P=(0,Ci.useCallback)(q=>{Le(r)&&r(q.target.value)},[r]),k=(0,Ci.useCallback)(()=>{Le(o)&&o()},[o,h]);return Ci.default.createElement(Ci.default.Fragment,null,x&&Ci.default.createElement("div",{className:"none-style-property-item"},Ci.default.createElement("input",{className:"geojson-feature-property-label not-editable",defaultValue:fe("geojson-featureview-image-title"),type:"text",tabIndex:"-1",readOnly:!0}),Ci.default.createElement(DE,{imageUrl:t,showPlaceholder:!0,imageAsPreview:!0})),Ci.default.createElement("div",{className:"none-style-property-item"},Ci.default.createElement("input",{className:Et("geojson-feature-property-label",i?"editable":"not-editable",{error:h.key}),onBlur:i?A:void 0,type:"text",defaultValue:e,readOnly:!i,tabIndex:i?0:-1,onKeyDown:i?L:void 0,ref:b,placeholder:fe("geojson-editfeature-input-placeholder"),key:`header-${p}`}),e!==ci.time&&Ci.default.createElement("input",{className:Et("geojson-feature-property-input",{error:h.value}),defaultValue:t,onChange:P,onBlur:A,onKeyDown:L,ref:T,placeholder:fe("geojson-editfeature-label-placeholder"),key:`value-${p}`}),e===ci.time&&Ci.default.createElement(jA,{className:Et("geojson-feature-property-input",{error:h.value}),value:t===""?"":Qu(new Date(t)),onBlur:A,onKeyDown:L,ref:T,placeholder:fe("geojson-editfeature-input-placeholder-date"),key:`value-${p}`}),i&&Ci.default.createElement(mn,{className:"delete-button",type:"discard",onClick:k},Ci.default.createElement("p",null,fe("geojson-featureview-delete-field-btn")),Ci.default.createElement(qr,{name:"delete"}))))};Yit.propTypes={title:zd.default.string.isRequired,value:zd.default.any,onChange:zd.default.func,onBlur:zd.default.func,onDelete:zd.default.func,isHeaderEditable:zd.default.bool,existingFields:zd.default.array,onError:zd.default.func,id:zd.default.string.isRequired};var Zit=Yit;var Gae=e=>{let{feature:t,onDelete:r,onClose:n,onSave:o,onSavePreview:i}=e,[a,u]=(0,Qr.useState)(Jie(t)),[p,h]=(0,Qr.useState)(Xie(t)),g=(0,Qr.useRef)(t.id);t.id!==g.current&&(u(Jie(t)),h(Xie(t)),g.current=t.id);let[x,b]=(0,Qr.useState)(!1),[T,A]=(0,Qr.useState)(!1),[L,P]=(0,Qr.useState)({}),k=(0,Qr.useCallback)(Re=>Te=>{h(Ee=>{let Ye=[...Ee];return Ye[Re]=Te,Ye}),i(Te)},[o]),q=(0,Qr.useCallback)(Re=>Te=>{u(Ee=>{let Ye=[...Ee];return Ye[Re]=Te,Ye})},[u]),U=(0,Qr.useCallback)(()=>{A(!0)},[]),H=(0,Qr.useCallback)(Re=>()=>{u(Te=>{let Ee=[...Te];return Ee.splice(Re,1),Ee}),P({})},[u]),X=(0,Qr.useCallback)(()=>{n({doRemoveFeatureState:!0})},[n]),ee=(0,Qr.useCallback)(()=>{let Re=Jrt({oldProperties:t.properties,propertyFields:a,styleFields:p});o(Re)},[o,t,a,p]),ne=(0,Qr.useCallback)(()=>{b(Re=>!Re)},[]),pe=(0,Qr.useCallback)(()=>{b(!1)},[b]),ue=(0,Qr.useCallback)(()=>{r(t),ne()},[r,t,ne]),Ie=(0,Qr.useCallback)(Re=>{u(Te=>[...Te,[Re.key,Re.value]]),A(!1)},[u]);return Qr.default.createElement("div",{className:"geojson-feature-edit-panel-root vkf-geojson-feature-view-content full-height"},Qr.default.createElement(fd,{title:fe("geojson-editview-header-text"),onCloseClick:n}),Qr.default.createElement("div",{className:"geojson-feature-edit-panel-content"},Qr.default.createElement("div",{className:"introduction-text"},fe("geojson-editview-intro-text")),Qr.default.createElement("div",{className:"properties-container"},Qr.default.createElement("div",{className:"style-property-header"},Qr.default.createElement("p",{className:"header-text geojson-feature-property-label"},fe("geojson-editfeature-style-header"))),Qr.default.createElement("div",{className:"style-properties-container"},p.map((Re,Te)=>{let[Ee,Ye]=Re,{inputProps:Qe}=B0[Ee];return Qr.default.createElement($it,{onChange:k(Te),onBlur:k(Te),key:`${Ee}-${t.id}`,title:Ee,inputProps:Qe,value:Ye,id:`${Ee}-${t.id}`})})),Qr.default.createElement("div",{className:"none-style-properties-container"},a.map((Re,Te)=>{var Ue;let[Ee,Ye]=Re,Qe=Le(bR[Ee]),qe=(Ue=bR[Ee])==null?void 0:Ue.inputProps;return Qr.default.createElement(Zit,{onBlur:q(Te),key:`${Ee}-${t.id}`,isHeaderEditable:!Qe,title:Ee,inputProps:qe,value:Ye,onDelete:Qe?void 0:H(Te),existingFields:a,onError:P,id:`${Ee}-${t.id}`})})),Qr.default.createElement("div",{className:"new-field-container"},Qr.default.createElement("div",{className:Et("new-fields",T&&"in")},Qr.default.createElement(Git,{existingFields:a,onAddField:Ie,onClose:()=>{A(!1),P({})},isDisplayed:T,onError:P})),Qr.default.createElement("div",{className:Et("new-field-button-container",!T&&"in")},Qr.default.createElement(mn,{className:"new-field-button",onClick:U,disabled:T||L.key||L.value},Qr.default.createElement(qr,{name:"add"}),Qr.default.createElement("p",{className:"geojson-feature-property-label"},fe("geojson-editfeature-add-new-field-button")))))),Qr.default.createElement("div",{className:"danger-zone-container"},Qr.default.createElement(J8,{description:fe("geojson-editfeature-danger-zone-title"),onDeleteClick:ne,buttonLabel:fe("geojson-featureview-delete-btn")}))),Qr.default.createElement("div",{className:"footer-container"},Qr.default.createElement(mn,{className:"save-button",onClick:ee,type:"save",disabled:L.key||L.value||T},Qr.default.createElement(qr,{name:"save"}),fe("geojson-apply-btn")),Qr.default.createElement(mn,{className:"discard-button",onClick:X,type:"discard"},Qr.default.createElement(qr,{name:"discard"}),fe("geojson-cancel-btn"))),Qr.default.createElement(K8,{show:x,onClose:pe,onDelete:ue,description:fe("geojson-deletemodal-body")}))};Gae.defaultPropTypes={onSavePreview:()=>{}};Gae.propTypes={feature:mp.default.shape({id:mp.default.oneOfType([mp.default.number,mp.default.string]).isRequired,geometry:mp.default.object.isRequired,properties:mp.default.object.isRequired}).isRequired,onClose:mp.default.func.isRequired,onDelete:mp.default.func.isRequired,onSave:mp.default.func.isRequired,onSavePreview:mp.default.func};var Kit=Gae;var wm=Z(we(),1),KE=Z(xt(),1);var Hae=({geoJsonFeature:e,saveFeature:t,saveFeaturePreview:r,deleteFeature:n,resetFeature:o})=>{let i=(0,wm.useCallback)(h=>{o(h)},[o]),a=(0,wm.useCallback)(h=>{t(h,()=>{i({skipResetPreview:!0})},()=>{console.error("The feature could not be saved"),i()})},[t,i]),u=(0,wm.useCallback)(([h,g])=>{r(h,g)},[r]),p=(0,wm.useCallback)(()=>{n(()=>i())},[n,i]);return wm.default.createElement(wm.default.Fragment,null,wm.default.createElement(Xit,{feature:e,onDelete:p,onClose:i,onSave:a,onSavePreview:u}))};Hae.defaultPropTypes={saveFeaturePreview:()=>{}};Hae.propTypes={geoJsonFeature:KE.default.object.isRequired,resetFeature:KE.default.func.isRequired,saveFeature:KE.default.func.isRequired,deleteFeature:KE.default.func.isRequired,saveFeaturePreview:KE.default.func};var Wae=Hae;var Xit=Kit;var Ia=Z(we(),1);var $ae=Z(we(),1);var W1=Z(xt(),1),gp=Z(we(),1);var Jit=()=>Or(({snapshot:e,set:t})=>r=>At(void 0,null,function*(){let n=yield e.getPromise(Jn),o=yield e.getPromise(Fa),i=yield zYe(n.id,r);if(o){o.deleteAll().add(i.geojson);let a=new Map;i.geojson.features.forEach(u=>{a.set(u.id,!1)}),t(ba,i.geojson),t(pp,{dirtyMap:a,deleteIds:[],addIds:[]}),t(kh,r===n.version?null:r)}}),[]);var Qit=({isSelected:e,version:t,isMostRecent:r})=>{let n=Jit(),o=(0,gp.useCallback)(()=>{n(t.version)},[n,t]);return gp.default.createElement("li",{className:Et("version-history-entry",r?"current-version":"older-version",e?"selected":""),key:t.version},gp.default.createElement("div",{className:"version-history-entry-content"},gp.default.createElement(gp.default.Fragment,null,gp.default.createElement("span",{className:"time"},Sot(new Date(t.submitted))),gp.default.createElement("span",{className:"author"},t.created_by),!r||r&&!e?gp.default.createElement(mn,{className:"version-history-reset-button",onClick:o},gp.default.createElement(qr,{name:"clock"})):null)))};Qit.propTypes={isSelected:W1.default.bool,isMostRecent:W1.default.bool,version:W1.default.shape({version:W1.default.number,submitted:W1.default.string,created_by:W1.default.string}).isRequired};var eat=Qit;var tat=en({key:"vectorMapVersionsQueryIdState",default:0}),x5r=Tl({key:"vectorMapVersionsQuery",get:t=>At(void 0,[t],function*({get:e}){e(tat);let r=e(Jn);return!Le(r)||r.type==="local"||r.id===null?null:yield qYe(r.id)})}),rat=()=>Or(({set:t})=>()=>{t(tat,r=>r+1)},[]),b5r=()=>ht(x5r),nat=b5r;var w5r=()=>{let e=ht(kh),t=nat();return t?$ae.default.createElement("ul",{className:"version-history"},t.map((r,n)=>$ae.default.createElement(eat,{isMostRecent:n===0,isSelected:e===null?n===0:e===r.version,key:r.version,version:r}))):null},oat=w5r;var iat=()=>{let e=Mr(la),t=ht(Jn),r=rat(),n=(0,Ia.useMemo)(()=>!Le(t.id),[t.id]),o=(0,Ia.useMemo)(()=>n?fe("geojson-metadata-panel-intro-history-unsaved"):fe("geojson-metadata-panel-intro-history"),[n]),i=(0,Ia.useMemo)(()=>fe("geojson-metadata-panel-header-history"),[]),a=(0,Ia.useCallback)(()=>{e(jo.NONE)},[]);return Ia.default.createElement("div",{className:"geojson-history-panel-root"},Ia.default.createElement(fd,{title:i,onCloseClick:a}),Ia.default.createElement("div",{className:"geojson-history-panel-content"},Ia.default.createElement("div",{className:"introduction-text"},o),Ia.default.createElement("div",{className:"history-list-container"},Ia.default.createElement(HE,{fallbackRender:({resetErrorBoundary:u})=>Ia.default.createElement(Z8,{className:"error-fallback",resetErrorBoundary:u}),onReset:r},Ia.default.createElement(Ia.Suspense,{fallback:Ia.default.createElement("div",{className:"suspense-fallback"},"Loading...")},Ia.default.createElement(oat,null))))))};iat.propTypes={};var aat=iat;var Yae=()=>{let e=ht(la),t=U1(),r=(0,_f.useMemo)(()=>Le(t.geoJsonFeature)?t:null,[t.geoJsonFeature]);return _f.default.createElement(_f.default.Fragment,null,_f.default.createElement("div",{className:"vkf-horizontal-layout-draw"},_f.default.createElement("div",{className:"geojson-control-bar-container"},_f.default.createElement(Nit,null)),_f.default.createElement(LE,{className:"geojson-metadata-panel-container",Component:e===jo.HISTORY?aat:Bit,props:e===jo.METADATA||e===jo.HISTORY?{}:null}),_f.default.createElement(LE,{className:"geojson-feature-edit-panel-container",Component:Wae,props:e===jo.FEATURE?r:null})),_f.default.createElement(xot,null),_f.default.createElement(jot,null))};Yae.propTypes={};var Ts=Z(we(),1);var Fi=Z(we(),1),tF=Z(xt(),1);var Zae=Z(we(),1),Kae=Z(xt(),1);var sat=({onClick:e})=>Zae.default.createElement("button",{className:"vkf-toggle-search-button",onClick:e,title:"toggle search"},Zae.default.createElement(af,{name:"icon-search"}));sat.propTypes={isOpen:Kae.default.bool,onClick:Kae.default.func};var lat=sat;var Q8=Z(we(),1),eF=Z(xt(),1);var Xae=({disabled:e,onClick:t,isOpen:r})=>Q8.default.createElement("button",{className:Et("vkf-toggle-search-result-list",r?"open":"closed",e&&"disabled"),disabled:e,onClick:t},Q8.default.createElement("div",{className:"background"}),Q8.default.createElement("div",{className:"chevron"}));Xae.propTypes={disabled:eF.default.bool,isOpen:eF.default.bool,onClick:eF.default.func};var uat=({enableReopenResultList:e=!0,onToggleFacets:t,showFacets:r})=>{let n=ht(Zb),[o,i]=(0,Fi.useState)(!1),[a,u]=(0,Fi.useState)(!1),[p,h]=(0,Fi.useState)(!1),g=()=>{i(T=>!T)},x=()=>{u(T=>!T)};(0,Fi.useEffect)(()=>{n===0&&o?(i(!1),h(!0)):e&&n>0&&p&&(i(!0),h(!1))},[n]);let b=o?"show-search-result-list":"hide-search-result-list";return Fi.default.createElement(Fi.Fragment,null,Fi.default.createElement("div",{className:"vkf-search-header"},Fi.default.createElement("div",{className:"top-container"},Fi.default.createElement("div",{className:"result-summary"},n===0?fe("mapsearch-found-no-maps"):`${n} ${fe("mapsearch-found-maps")}`),Fi.default.createElement("div",{className:"controls-container"},Fi.default.createElement(X6,{onClick:t,isOpen:r}),Fi.default.createElement(lat,{onClick:x,isOpen:a}))),a&&Fi.default.createElement("div",{className:"bottom-container"},Fi.default.createElement(Tz,{searchUrl:hr.getNominatimUrl()}),Fi.default.createElement(mz,null))),Fi.default.createElement(Xae,{disabled:n===0,onClick:g,isOpen:o}),Fi.default.createElement("div",{className:Et("vkf-search-result-container",b)},Fi.default.createElement(Z6,{enableOverlayLayer:!1,DataProvider:eq,direction:"horizontal",itemSize:170,renderHeader:!1})))};uat.propTypes={enableReopenResultList:tF.default.bool,onToggleFacets:tF.default.func,showFacets:tF.default.bool};var cat=uat;var rF=Z(we(),1);var Jae=Z(xt(),1);var fat=({buttonState:e,onClick:t})=>{let r=ht(_n),n=r.length===0;return rF.default.createElement("button",{className:Et("vkf-toggle-layermanagement-button",!n&&e&&"opened",n&&"disabled"),disabled:n,onClick:t},!n&&rF.default.createElement("span",{className:"badge"},r.length),rF.default.createElement(af,{name:"layers"}))};fat.propTypes={buttonState:Jae.default.bool,onClick:Jae.default.func};var pat=fat;var dat=dz;var hat=Z(we(),1),mat=Z(xt(),1),gat=({onCloseLayerManagement:e})=>{let t=ht(_n);return(0,hat.useEffect)(()=>{t.length===0&&e()},[t]),null};gat.propTypes={onCloseLayerManagement:mat.default.func.isRequired};var vat=gat;var E5r=()=>{let[e,t]=(0,Ts.useState)(!1),[r,n]=(0,Ts.useState)(!1),o=(0,Ts.useCallback)(()=>{n(!1)},[]),i=(0,Ts.useCallback)(()=>{n(u=>!u)},[]),a=()=>{t(u=>!u)};return Ts.default.createElement(Ts.default.Fragment,null,Ts.default.createElement(vat,{onCloseLayerManagement:o}),Ts.default.createElement("div",{className:"vkf-vertical-layout"},Ts.default.createElement(cat,{onToggleFacets:a,showFacets:e}),Ts.default.createElement(pat,{buttonState:r,onClick:i}),Ts.default.createElement("div",{className:Et("layermanagement-container",!r&&"closed")},Ts.default.createElement(dat,{showControls:{showBadge:!1,showDynamicMapVisualization:!1,showHideButton:!0}}))),Ts.default.createElement(lf,{modalClassName:"faceted-search-modal",onClose:a,renderContent:()=>Ts.default.createElement(z6,{georeferenceMode:!1}),isOpen:e,title:"Filter"}))},Qae=E5r;var xf=Z(we(),1),vp=Z(xt(),1);var zD=Z(we(),1),yat=Z(Si(),1);var Fd=Z(we(),1);var S5r=(e,t)=>{let r=ht(yr),[n,o]=(0,Fd.useState)(null),[i,a]=On(y9e),u=(0,Fd.useRef)(null),p=(0,Fd.useCallback)(g=>{u.current&&!u.current.contains(g.target)&&a(fu.None)},[]),h=(0,Fd.useCallback)(()=>{a(g=>g===t?fu.None:t)},[t]);return(0,Fd.useEffect)(()=>{if(Le(r)){let g=b=>{var T;((T=b.control)==null?void 0:T.id)===e&&o(b.control._container)},x=b=>{var T;((T=b.control)==null?void 0:T.id)===e&&o(null)};return r.on(xa.controlAdded,g),r.on(xa.controlRemoved,x),()=>{r.off(xa.controlAdded,g),r.off(xa.controlRemoved,x)}}},[r]),(0,Fd.useEffect)(()=>(i===t?document.addEventListener("mousedown",p):document.removeEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}),[i,t,p]),{baseMapControlEl:n,activeDialog:i,toggleDialog:h,dialogRef:u}},nF=S5r;var I5r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=nF(TQ,fu.BasemapSelector);return e!==null?(0,yat.createPortal)(zD.default.createElement("div",{ref:n},zD.default.createElement("button",{onClick:r,title:fe("control-basemapselector-open"),className:Et("maplibregl-ctrl-basemap-selector",t===fu.BasemapSelector&&"active")}),t===fu.BasemapSelector&&zD.default.createElement("div",{className:Et("basemap-selector-modal",t===fu.BasemapSelector&&"active")},zD.default.createElement(l$e,null))),e):null},_at=I5r;var xat=_at;function ese(e,t){return new Promise(function(r){let n=()=>{r(!1)},o=()=>{t.signal.removeEventListener("abort",n)};t.signal.addEventListener("abort",n,{once:!0}),e.once("moveend",()=>{r(!0),o()}),e.once("touchstart",()=>{r(!1),o()}),e.once("mousedown",()=>{r(!1),o()}),e.flyTo(t)})}function bat(e){return new Promise(t=>setTimeout(t,e))}var wat=Z($M(),1);var oF=class extends wat.Map{constructor(){super(...arguments);ct(this,"terrainConfiguration",hr.getTerrain());ct(this,"terrainExaggeration",this.terrainConfiguration.exaggeration);ct(this,"isTerrainEnabled",!1);ct(this,"abortController",new AbortController)}getTerrainExaggeration(){return this.terrainExaggeration}hasTerrain(){return this.isTerrainEnabled}growTerrain(r,n=1e3){if(!this.terrain)return;let o=performance.now(),i=this.terrain.exaggeration,a=r-i,u=()=>{if(!this.terrain||this.terrainFlattening)return;let p=(performance.now()-o)/n;if(p<.99){let h=1-Ry(1-p,4),g=i+h*a;this.terrain.exaggeration=g,requestAnimationFrame(u)}else this.terrainGrowing=!1,this.terrainFlattening=!1,this.terrain.exaggeration=r;this._elevationFreeze=!1,this.triggerRepaint()};this.terrainGrowing=!0,this.terrainFlattening=!1,requestAnimationFrame(u)}enableTerrain(r=this.terrainExaggeration){if(r<0){console.warn("Terrain exaggeration cannot be negative.");return}let n=i=>At(this,null,function*(){!this.terrain||i.type!=="data"||i.dataType!=="source"||!("source"in i)||i.sourceId!==vv||i.source.type!=="raster-dem"||i.isSourceLoaded&&(this.off("data",n),this.growTerrain(r))}),o=()=>{this.isTerrainEnabled=!0,this.terrainExaggeration=r,this.addSource(vv,{attribution:this.terrainConfiguration.attribution,type:"raster-dem",tiles:[this.terrainConfiguration.url],tileSize:256,minzoom:this.terrainConfiguration.minZoom,maxzoom:this.terrainConfiguration.maxZoom,encoding:"terrarium"}),this.setTerrain({source:vv,exaggeration:0}),this.abortController.abort(),this.abortController=new AbortController,ese(this,{signal:this.abortController.signal,pitch:60,duration:700}).then(()=>bat(500)).then(()=>{this.getSource(vv).loaded()?this.growTerrain(r):this.on("data",n)})};if(this.getTerrain()){this.isTerrainEnabled=!0,this.growTerrain(r);return}this.loaded()||this.isTerrainEnabled?o():this.once("load",()=>{this.getTerrain()&&this.getSource(vv)||o()})}disableTerrain(){return At(this,null,function*(){if(!this.terrain)return;this.isTerrainEnabled=!1;let r=1*1e3,n=performance.now(),o=this.terrain.exaggeration,i=()=>{if(!this.terrain||this.terrainGrowing)return;let a=(performance.now()-n)/r;if(this._elevationFreeze=!1,a<.99){let u=Ry(1-a,4),p=o*u;this.terrain.exaggeration=p,requestAnimationFrame(i)}else this.terrain.exaggeration=0,this.terrainGrowing=!1,this.terrainFlattening=!1,this.setTerrain(),this.getSource(vv)&&this.removeSource(vv),this.abortController.abort(),this.abortController=new AbortController,ese(this,{pitch:0,signal:this.abortController.signal,duration:700});this.triggerRepaint()};this.terrainGrowing=!1,this.terrainFlattening=!0,requestAnimationFrame(i)})}setTerrainExaggeration(r,n=!0){!n&&this.terrain?(this.terrainExaggeration=r,this.terrain.exaggeration=r,this.triggerRepaint()):this.enableTerrain(r)}};var tse=class extends oF{addControl(t,r){let n=super.addControl(t,r);return this.fire(xa.controlAdded,{control:t}),n}removeControl(t){let r=super.removeControl(t);return this.fire(xa.controlRemoved,{control:t}),r}setPaintProperty(t,r,n,o){var p;let i=super.setPaintProperty(t,r,n,o),a=this.getLayer(t),u=(p=a==null?void 0:a.metadata)==null?void 0:p[jh.id];return f9e.has(r)&&u&&this.fire(xa.opacityChanged,{layerId:u,property:r,value:n}),i}setLayoutProperty(t,r,n,o){var p;let i=super.setLayoutProperty(t,r,n,o),a=this.getLayer(t),u=(p=a==null?void 0:a.metadata)==null?void 0:p[jh.id];return p9e.has(r)&&u&&this.fire(xa.visibilityChanged,{layerId:u,property:r,value:n}),i}},Eat=tse;var Sat=Eat;var FD=Z(we(),1),Aat=Z(Si(),1);var Ud=Z(we(),1);var Ms=Z(we(),1);var Iat=Z(wk(),1);var T5r=()=>{let e=ht(yr),t=ht(_n),r=ht(Vc),[n,o]=(0,Ms.useState)(""),i=(0,Ms.useRef)(),a=(0,Ms.useCallback)(()=>{if(!Le(e))return;let u=p8(cw(e,!0)),p=m8(e.hasTerrain()),h=h8(t),g=d8(r),x=(0,Iat.stringify)(Object.assign({},u,p,h,g),{arrayFormat:"comma"});o(fw(x))},[e]);return(0,Ms.useEffect)(()=>{if(e)return a(),e.on("moveend",a),()=>{e.off("moveend",a)}},[e,a]),Ms.default.createElement(Ms.default.Fragment,null,Ms.default.createElement("div",{className:"action-content"},Ms.default.createElement("label",{htmlFor:"permalink-value",className:"visually-hidden"},"Permalink"),Ms.default.createElement("input",{readOnly:!0,ref:i,value:n,id:"permalink-value"}),Ms.default.createElement(NE,{value:n})),Ms.default.createElement("div",{className:"description"},Ms.default.createElement("p",null,fe("control-permalink-exporter-permalink-description"))))},Tat=T5r;var Cs=Z(we(),1);var Mat=()=>{let[e]=$f(n1,[]),[t,r]=(0,Cs.useState)(!1),[n,o]=(0,Cs.useState)(""),i=ht(hk),a=hr.getGeoreferenceApiClient(),u="/map_view/",p=(0,Cs.useCallback)(()=>{if(i!==void 0){let h=i(),{searchOptions:g}=h,x=En(h,["searchOptions"]),b=e.filter(A=>A.id===x.activeBasemapId),T=Object.assign({},x,b.length>0?{customBasemaps:b}:null);return r(!0),a.post(u,{map_view_json:T}).then(A=>{if(A.status===200&&A.data!==void 0){let{map_view_id:L}=A.data,P=fw(`map_view_id=${L}`);return o(P),r(!1),P}})}},[e,i]);return Cs.default.createElement(Cs.default.Fragment,null,Cs.default.createElement("div",{className:"action-content"},Cs.default.createElement("label",{htmlFor:"permalink-mapview",className:"visually-hidden"},"Permalink"),Cs.default.createElement("input",{placeholder:fe("control-permalink-input-mapview-placeholder"),readOnly:!0,value:n,id:"permalink-mapview"}),Cs.default.createElement(NE,{onClick:p,value:n}),Cs.default.createElement("button",{className:Et("upload-button",t&&"loading"),onClick:p},t?Cs.default.createElement(J6,null):Cs.default.createElement(Vh,{glyph:"upload"}),"Upload")),Cs.default.createElement("div",{className:"description"},Cs.default.createElement("p",null,fe("control-permalink-exporter-mapview-description"))))};var M5r=()=>{let e=!hr.isUserAuthenticated();return Ud.default.createElement("div",{className:"vkf-permalink-exporter"},Ud.default.createElement(Kte,{defaultActiveKey:1,id:"permalink-exporter-tabs"},Ud.default.createElement(x6,{eventKey:1,title:fe("control-permalink-title-permalink")},Ud.default.createElement("div",{className:"permalink-exporter-content"},Ud.default.createElement(Tat,null))),Ud.default.createElement(x6,{disabled:e,eventKey:2,title:fe("control-permalink-title-map-view")},Ud.default.createElement("div",{className:"permalink-exporter-content"},!e&&Ud.default.createElement(Mat,null)))))},Cat=Ud.default.memo(M5r);var C5r=()=>{let{baseMapControlEl:e,activeDialog:t,toggleDialog:r,dialogRef:n}=nF(AQ,fu.Permalink);return e!==null?(0,Aat.createPortal)(FD.default.createElement("div",{ref:n},FD.default.createElement("button",{className:Et("maplibregl-ctrl-permalink",t===fu.Permalink&&"active"),onClick:r,title:fe("control-permalink-open")}),t===fu.Permalink&&FD.default.createElement("div",{className:"content-container"},FD.default.createElement(Cat,null))),e):null},Dat=C5r;var iF=Z(we(),1);var A5r=()=>{let e=ht(yr),t=ht(Vc),r=ht(yk),[n]=$f(n1,[]),o=hr.getBaseMaps(),i=(0,iF.useMemo)(()=>[...o,...n],[n,o]);return(0,iF.useEffect)(()=>{if(Le(e)){let a=i.find(p=>p.id===t);if(a===void 0)return;let u=a;if(YC(e),o$e(e),u.type==="vector")t$e(e,r);else if(u.type==="wms")QWe(e,u,r);else if(u.type==="xyz")n$e(e,u,r);else throw new Error("Unknown layer type")}},[t,e,r]),null},Nat=A5r;function Oat(){return{"NavigationControl.ZoomIn":fe("control-zoom-in"),"NavigationControl.ZoomOut":fe("control-zoom-out"),"FullscreenControl.Enter":fe("control-fullscreen-Enter"),"FullscreenControl.Exit":fe("control-fullscreen-Exit"),"NavigationControl.ResetBearing":fe("control-rotate"),"TerrainControl.Enable":fe("control-toggleviewmode-title"),"TerrainControl.Disable":fe("control-toggleviewmode-title"),"GeolocateControl.FindMyLocation":fe("control-locateme-title"),"GeolocateControl.LocationNotAvailable":fe("control-locateme-location-not-available")}}var D5r="https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json";function Lat(e){let{ChildComponent:t,layout:r,mapViewSettings:n={center:[13.5981217,59.562795],projection:"EPSG:3857",zoom:2},loadMarkerIcon:o=!0}=e,[i,a]=On(yr),u=Mr(yk),p=(0,xf.useRef)();return E9e(p,"map"),(0,xf.useEffect)(()=>{let h=new Sat({container:p.current,center:n.center,zoom:n.zoom,maxZoom:n.maxZoom,style:D5r,locale:Oat(),attributionControl:!1}),g=()=>{if(a(h),u(h.getStyle().layers),o===!0){let{id:x,url:b}=hr.getMarkerSettings();h.loadImage(b).then(T=>{h.addImage(x,T.data,{sdf:!0})})}};return h.on("style.load",g),()=>{h.off("style.load",g),a(void 0),h.remove()}},[]),(0,xf.useEffect)(()=>{if(Le(i)){let h=u9e();return h.forEach(({control:g,position:x})=>{i.addControl(g,x)}),()=>{h.forEach(({control:g})=>{i.removeControl(g)})}}},[i]),xf.default.createElement("div",{className:"map-container"},xf.default.createElement("div",{ref:p,className:Et("map-div","olMap",h9e(r)),tabIndex:0},Le(i)&&xf.default.createElement(t,null),xf.default.createElement(xat,null),xf.default.createElement(Dat,null),xf.default.createElement(Nat,null)))}var N5r={baseMapUrl:vp.default.arrayOf(vp.default.string),ChildComponent:vp.default.func,layout:vp.default.string,mapViewSettings:vp.default.shape({center:vp.default.arrayOf(vp.default.number),projection:vp.default.string,zoom:vp.default.number}),loadMarkerIcon:vp.default.bool};Lat.propTypes=N5r;var Pat=Lat;var O5r=e=>{switch(e){case Ws.STANDARD:return sae;case Ws.DRAW:return Yae;default:sae;}},L5r=(e,t)=>{switch(e){case pu.HORIZONTAL:return O5r(t);case pu.VERTICAL:return Qae;default:return Qae;}},Rat=e=>{let{layout:t}=e,r=Mr(Yb),n=ht(Hc),o=L5r(t,n);return(0,UD.useEffect)(()=>{r(t)},[t]),UD.default.createElement(Pat,{baseMapUrl:hr.getDefaultBaseMapUrls(),enable3d:!0,enableTerrain:!0,layout:t,mapViewSettings:hr.getDefaultMapView(),ChildComponent:o})};Rat.propTypes={layout:kat.default.oneOf(Object.values(pu))};var jat=UD.default.memo(Rat);var P5r=LJ.backends.map(e=>e.id==="touch"?qt(Se({},e),{options:qt(Se({},e.options),{scrollAngleRanges:[{start:30,end:150},{start:210,end:330}]})}):e),zat=()=>{let e=C6e(),t=d9e(e),r=(0,Em.useMemo)(()=>Object.assign({},LJ,{backends:P5r}),[]);return Em.default.createElement(WJ,{options:r},Em.default.createElement(I6e,null,Em.default.createElement("div",{className:"vkf-plugin-map"},Em.default.createElement(M9e,null),Em.default.createElement(jat,{layout:t}),Em.default.createElement(uZe,null))))};zat.propTypes={id:qat.default.string.isRequired};var Fat=zat;var k5r=hr;function R5r(e){Bat.default.render(Uat.default.createElement(Fat,{id:e.id}),e)}return Ult(j5r)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.min.js:
  (** @license React v17.0.2
   * react-jsx-runtime.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
   *)

classnames/index.js:
  (*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

keycode/index.js:
  (*!
   * Programatically add the following
   *)

react-is/cjs/react-is.production.min.js:
  (**
   * @license React
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

wms-capabilities/dist/wms-capabilities.mjs:
  (**
   * wms-capabilities @0.6.0
   * @description WMS service Capabilities > JSON, based on openlayers 
   * @license BSD-2-Clause
   * @preserve
   *)

@babel/runtime/helpers/esm/regeneratorRuntime.js:
  (*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE *)
*/