var vk2=(()=>{var zme=Object.create;var Ym=Object.defineProperty,Fme=Object.defineProperties,Nme=Object.getOwnPropertyDescriptor,Bme=Object.getOwnPropertyDescriptors,jme=Object.getOwnPropertyNames,FF=Object.getOwnPropertySymbols,Ume=Object.getPrototypeOf,BF=Object.prototype.hasOwnProperty,$me=Object.prototype.propertyIsEnumerable;var Bd=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),Vme=e=>{throw TypeError(e)},Jm=Math.pow,NF=(e,t,n)=>t in e?Ym(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Kn=(e,t)=>{for(var n in t||(t={}))BF.call(t,n)&&NF(e,n,t[n]);if(FF)for(var n of FF(t))$me.call(t,n)&&NF(e,n,t[n]);return e},Qm=(e,t)=>Fme(e,Bme(t));var Gme=(e,t)=>()=>(e&&(t=e(e=0)),t);var P=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),jF=(e,t)=>{for(var n in t)Ym(e,n,{get:t[n],enumerable:!0})},UF=(e,t,n,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of jme(t))!BF.call(e,c)&&c!==n&&Ym(e,c,{get:()=>t[c],enumerable:!(u=Nme(t,c))||u.enumerable});return e};var cs=(e,t,n)=>(n=e!=null?zme(Ume(e)):{},UF(t||!e||!e.__esModule?Ym(n,"default",{value:e,enumerable:!0}):n,e)),Zme=e=>UF(Ym({},"__esModule",{value:!0}),e);var $r=(e,t,n)=>new Promise((u,c)=>{var a=A=>{try{S(n.next(A))}catch(R){c(R)}},x=A=>{try{S(n.throw(A))}catch(R){c(R)}},S=A=>A.done?u(A.value):Promise.resolve(A.value).then(a,x);S((n=n.apply(e,t)).next())}),Vc=function(e,t){this[0]=e,this[1]=t},rE=(e,t,n)=>{var u=(x,S,A,R)=>{try{var D=n[x](S),L=(S=D.value)instanceof Vc,H=D.done;Promise.resolve(L?S[0]:S).then(ce=>L?u(x==="return"?x:"next",S[1]?{done:ce.done,value:ce.value}:ce,A,R):A({value:ce,done:H})).catch(ce=>u("throw",ce,A,R))}catch(ce){R(ce)}},c=x=>a[x]=S=>new Promise((A,R)=>u(x,S,A,R)),a={};return n=n.apply(e,t),a[Bd("asyncIterator")]=()=>a,c("next"),c("throw"),c("return"),a},iE=e=>{var t=e[Bd("asyncIterator")],n=!1,u,c={};return t==null?(t=e[Bd("iterator")](),u=a=>c[a]=x=>t[a](x)):(t=t.call(e),u=a=>c[a]=x=>{if(n){if(n=!1,a==="throw")throw x;return x}return n=!0,{done:!1,value:new Vc(new Promise(S=>{var A=t[a](x);A instanceof Object||Vme("Object expected"),S(A)}),1)}}),c[Bd("iterator")]=()=>c,u("next"),"throw"in t?u("throw"):c.throw=a=>{throw a},"return"in t&&u("return"),c},$F=(e,t,n)=>(t=e[Bd("asyncIterator")])?t.call(e):(e=e[Bd("iterator")](),t={},n=(u,c)=>(c=e[u])&&(t[u]=a=>new Promise((x,S,A)=>(a=c.call(e,a),A=a.done,Promise.resolve(a.value).then(R=>x({value:R,done:A}),S)))),n("next"),n("return"),t);var I,p=Gme(()=>{I={env:{}}});var nE=P((Evt,GF)=>{"use strict";p();var VF=Object.getOwnPropertySymbols,Hme=Object.prototype.hasOwnProperty,Kme=Object.prototype.propertyIsEnumerable;function Xme(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Yme(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var u=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(u.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}GF.exports=Yme()?Object.assign:function(e,t){for(var n,u=Xme(e),c,a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var x in n)Hme.call(n,x)&&(u[x]=n[x]);if(VF){c=VF(n);for(var S=0;S<c.length;S++)Kme.call(n,c[S])&&(u[c[S]]=n[c[S]])}}return u}});var sN=P(Qt=>{"use strict";p();var oE=nE(),jd=60103,HF=60106;Qt.Fragment=60107;Qt.StrictMode=60108;Qt.Profiler=60114;var KF=60109,XF=60110,YF=60112;Qt.Suspense=60113;var JF=60115,QF=60116;typeof Symbol=="function"&&Symbol.for&&(Ga=Symbol.for,jd=Ga("react.element"),HF=Ga("react.portal"),Qt.Fragment=Ga("react.fragment"),Qt.StrictMode=Ga("react.strict_mode"),Qt.Profiler=Ga("react.profiler"),KF=Ga("react.provider"),XF=Ga("react.context"),YF=Ga("react.forward_ref"),Qt.Suspense=Ga("react.suspense"),JF=Ga("react.memo"),QF=Ga("react.lazy"));var Ga,ZF=typeof Symbol=="function"&&Symbol.iterator;function Jme(e){return e===null||typeof e!="object"?null:(e=ZF&&e[ZF]||e["@@iterator"],typeof e=="function"?e:null)}function eg(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var eN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tN={};function Ud(e,t,n){this.props=e,this.context=t,this.refs=tN,this.updater=n||eN}Ud.prototype.isReactComponent={};Ud.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(eg(85));this.updater.enqueueSetState(this,e,t,"setState")};Ud.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function rN(){}rN.prototype=Ud.prototype;function sE(e,t,n){this.props=e,this.context=t,this.refs=tN,this.updater=n||eN}var lE=sE.prototype=new rN;lE.constructor=sE;oE(lE,Ud.prototype);lE.isPureReactComponent=!0;var uE={current:null},iN=Object.prototype.hasOwnProperty,nN={key:!0,ref:!0,__self:!0,__source:!0};function aN(e,t,n){var u,c={},a=null,x=null;if(t!=null)for(u in t.ref!==void 0&&(x=t.ref),t.key!==void 0&&(a=""+t.key),t)iN.call(t,u)&&!nN.hasOwnProperty(u)&&(c[u]=t[u]);var S=arguments.length-2;if(S===1)c.children=n;else if(1<S){for(var A=Array(S),R=0;R<S;R++)A[R]=arguments[R+2];c.children=A}if(e&&e.defaultProps)for(u in S=e.defaultProps,S)c[u]===void 0&&(c[u]=S[u]);return{$$typeof:jd,type:e,key:a,ref:x,props:c,_owner:uE.current}}function Qme(e,t){return{$$typeof:jd,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function cE(e){return typeof e=="object"&&e!==null&&e.$$typeof===jd}function ege(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var WF=/\/+/g;function aE(e,t){return typeof e=="object"&&e!==null&&e.key!=null?ege(""+e.key):t.toString(36)}function M0(e,t,n,u,c){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var x=!1;if(e===null)x=!0;else switch(a){case"string":case"number":x=!0;break;case"object":switch(e.$$typeof){case jd:case HF:x=!0}}if(x)return x=e,c=c(x),e=u===""?"."+aE(x,0):u,Array.isArray(c)?(n="",e!=null&&(n=e.replace(WF,"$&/")+"/"),M0(c,t,n,"",function(R){return R})):c!=null&&(cE(c)&&(c=Qme(c,n+(!c.key||x&&x.key===c.key?"":(""+c.key).replace(WF,"$&/")+"/")+e)),t.push(c)),1;if(x=0,u=u===""?".":u+":",Array.isArray(e))for(var S=0;S<e.length;S++){a=e[S];var A=u+aE(a,S);x+=M0(a,t,n,A,c)}else if(A=Jme(e),typeof A=="function")for(e=A.call(e),S=0;!(a=e.next()).done;)a=a.value,A=u+aE(a,S++),x+=M0(a,t,n,A,c);else if(a==="object")throw t=""+e,Error(eg(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return x}function C0(e,t,n){if(e==null)return e;var u=[],c=0;return M0(e,u,"","",function(a){return t.call(n,a,c++)}),u}function tge(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var oN={current:null};function nl(){var e=oN.current;if(e===null)throw Error(eg(321));return e}var rge={ReactCurrentDispatcher:oN,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:uE,IsSomeRendererActing:{current:!1},assign:oE};Qt.Children={map:C0,forEach:function(e,t,n){C0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return C0(e,function(){t++}),t},toArray:function(e){return C0(e,function(t){return t})||[]},only:function(e){if(!cE(e))throw Error(eg(143));return e}};Qt.Component=Ud;Qt.PureComponent=sE;Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rge;Qt.cloneElement=function(e,t,n){if(e==null)throw Error(eg(267,e));var u=oE({},e.props),c=e.key,a=e.ref,x=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,x=uE.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var S=e.type.defaultProps;for(A in t)iN.call(t,A)&&!nN.hasOwnProperty(A)&&(u[A]=t[A]===void 0&&S!==void 0?S[A]:t[A])}var A=arguments.length-2;if(A===1)u.children=n;else if(1<A){S=Array(A);for(var R=0;R<A;R++)S[R]=arguments[R+2];u.children=S}return{$$typeof:jd,type:e.type,key:c,ref:a,props:u,_owner:x}};Qt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:XF,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:KF,_context:e},e.Consumer=e};Qt.createElement=aN;Qt.createFactory=function(e){var t=aN.bind(null,e);return t.type=e,t};Qt.createRef=function(){return{current:null}};Qt.forwardRef=function(e){return{$$typeof:YF,render:e}};Qt.isValidElement=cE;Qt.lazy=function(e){return{$$typeof:QF,_payload:{_status:-1,_result:e},_init:tge}};Qt.memo=function(e,t){return{$$typeof:JF,type:e,compare:t===void 0?null:t}};Qt.useCallback=function(e,t){return nl().useCallback(e,t)};Qt.useContext=function(e,t){return nl().useContext(e,t)};Qt.useDebugValue=function(){};Qt.useEffect=function(e,t){return nl().useEffect(e,t)};Qt.useImperativeHandle=function(e,t,n){return nl().useImperativeHandle(e,t,n)};Qt.useLayoutEffect=function(e,t){return nl().useLayoutEffect(e,t)};Qt.useMemo=function(e,t){return nl().useMemo(e,t)};Qt.useReducer=function(e,t,n){return nl().useReducer(e,t,n)};Qt.useRef=function(e){return nl().useRef(e)};Qt.useState=function(e){return nl().useState(e)};Qt.version="17.0.2"});var Gc=P((Avt,lN)=>{"use strict";p();lN.exports=sN()});var pN=P(cr=>{"use strict";p();var Vd,ig,D0,vE;typeof performance=="object"&&typeof performance.now=="function"?(uN=performance,cr.unstable_now=function(){return uN.now()}):(hE=Date,cN=hE.now(),cr.unstable_now=function(){return hE.now()-cN});var uN,hE,cN;typeof window=="undefined"||typeof MessageChannel!="function"?($d=null,dE=null,fE=function(){if($d!==null)try{var e=cr.unstable_now();$d(!0,e),$d=null}catch(t){throw setTimeout(fE,0),t}},Vd=function(e){$d!==null?setTimeout(Vd,0,e):($d=e,setTimeout(fE,0))},ig=function(e,t){dE=setTimeout(e,t)},D0=function(){clearTimeout(dE)},cr.unstable_shouldYield=function(){return!1},vE=cr.unstable_forceFrameRate=function(){}):(hN=window.setTimeout,dN=window.clearTimeout,typeof console!="undefined"&&(fN=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof fN!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),tg=!1,rg=null,R0=-1,pE=5,mE=0,cr.unstable_shouldYield=function(){return cr.unstable_now()>=mE},vE=function(){},cr.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):pE=0<e?Math.floor(1e3/e):5},gE=new MessageChannel,O0=gE.port2,gE.port1.onmessage=function(){if(rg!==null){var e=cr.unstable_now();mE=e+pE;try{rg(!0,e)?O0.postMessage(null):(tg=!1,rg=null)}catch(t){throw O0.postMessage(null),t}}else tg=!1},Vd=function(e){rg=e,tg||(tg=!0,O0.postMessage(null))},ig=function(e,t){R0=hN(function(){e(cr.unstable_now())},t)},D0=function(){dN(R0),R0=-1});var $d,dE,fE,hN,dN,fN,tg,rg,R0,pE,mE,gE,O0;function yE(e,t){var n=e.length;e.push(t);e:for(;;){var u=n-1>>>1,c=e[u];if(c!==void 0&&0<k0(c,t))e[u]=t,e[n]=c,n=u;else break e}}function Eo(e){return e=e[0],e===void 0?null:e}function L0(e){var t=e[0];if(t!==void 0){var n=e.pop();if(n!==t){e[0]=n;e:for(var u=0,c=e.length;u<c;){var a=2*(u+1)-1,x=e[a],S=a+1,A=e[S];if(x!==void 0&&0>k0(x,n))A!==void 0&&0>k0(A,x)?(e[u]=A,e[S]=n,u=S):(e[u]=x,e[a]=n,u=a);else if(A!==void 0&&0>k0(A,n))e[u]=A,e[S]=n,u=S;else break e}}return t}return null}function k0(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}var hs=[],lu=[],ige=1,Za=null,bn=3,z0=!1,Zc=!1,ng=!1;function _E(e){for(var t=Eo(lu);t!==null;){if(t.callback===null)L0(lu);else if(t.startTime<=e)L0(lu),t.sortIndex=t.expirationTime,yE(hs,t);else break;t=Eo(lu)}}function xE(e){if(ng=!1,_E(e),!Zc)if(Eo(hs)!==null)Zc=!0,Vd(bE);else{var t=Eo(lu);t!==null&&ig(xE,t.startTime-e)}}function bE(e,t){Zc=!1,ng&&(ng=!1,D0()),z0=!0;var n=bn;try{for(_E(t),Za=Eo(hs);Za!==null&&(!(Za.expirationTime>t)||e&&!cr.unstable_shouldYield());){var u=Za.callback;if(typeof u=="function"){Za.callback=null,bn=Za.priorityLevel;var c=u(Za.expirationTime<=t);t=cr.unstable_now(),typeof c=="function"?Za.callback=c:Za===Eo(hs)&&L0(hs),_E(t)}else L0(hs);Za=Eo(hs)}if(Za!==null)var a=!0;else{var x=Eo(lu);x!==null&&ig(xE,x.startTime-t),a=!1}return a}finally{Za=null,bn=n,z0=!1}}var nge=vE;cr.unstable_IdlePriority=5;cr.unstable_ImmediatePriority=1;cr.unstable_LowPriority=4;cr.unstable_NormalPriority=3;cr.unstable_Profiling=null;cr.unstable_UserBlockingPriority=2;cr.unstable_cancelCallback=function(e){e.callback=null};cr.unstable_continueExecution=function(){Zc||z0||(Zc=!0,Vd(bE))};cr.unstable_getCurrentPriorityLevel=function(){return bn};cr.unstable_getFirstCallbackNode=function(){return Eo(hs)};cr.unstable_next=function(e){switch(bn){case 1:case 2:case 3:var t=3;break;default:t=bn}var n=bn;bn=t;try{return e()}finally{bn=n}};cr.unstable_pauseExecution=function(){};cr.unstable_requestPaint=nge;cr.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=bn;bn=e;try{return t()}finally{bn=n}};cr.unstable_scheduleCallback=function(e,t,n){var u=cr.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?u+n:u):n=u,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return c=n+c,e={id:ige++,callback:t,priorityLevel:e,startTime:n,expirationTime:c,sortIndex:-1},n>u?(e.sortIndex=n,yE(lu,e),Eo(hs)===null&&e===Eo(lu)&&(ng?D0():ng=!0,ig(xE,n-u))):(e.sortIndex=c,yE(hs,e),Zc||z0||(Zc=!0,Vd(bE))),e};cr.unstable_wrapCallback=function(e){var t=bn;return function(){var n=bn;bn=t;try{return e.apply(this,arguments)}finally{bn=n}}}});var gN=P((Ovt,mN)=>{"use strict";p();mN.exports=pN()});var rj=P(Ja=>{"use strict";p();var Cx=Gc(),Lr=nE(),$i=gN();function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!Cx)throw Error(Je(227));var AB=new Set,kg={};function ih(e,t){df(e,t),df(e+"Capture",t)}function df(e,t){for(kg[e]=t,e=0;e<t.length;e++)AB.add(t[e])}var cl=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),age=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vN=Object.prototype.hasOwnProperty,yN={},_N={};function oge(e){return vN.call(_N,e)?!0:vN.call(yN,e)?!1:age.test(e)?_N[e]=!0:(yN[e]=!0,!1)}function sge(e,t,n,u){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function lge(e,t,n,u){if(t===null||typeof t=="undefined"||sge(e,t,n,u))return!0;if(u)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function zn(e,t,n,u,c,a,x){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=x}var sn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){sn[e]=new zn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];sn[t]=new zn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){sn[e]=new zn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){sn[e]=new zn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){sn[e]=new zn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){sn[e]=new zn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){sn[e]=new zn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){sn[e]=new zn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){sn[e]=new zn(e,5,!1,e.toLowerCase(),null,!1,!1)});var CI=/[\-:]([a-z])/g;function MI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(CI,MI);sn[t]=new zn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(CI,MI);sn[t]=new zn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(CI,MI);sn[t]=new zn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){sn[e]=new zn(e,1,!1,e.toLowerCase(),null,!1,!1)});sn.xlinkHref=new zn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){sn[e]=new zn(e,1,!1,e.toLowerCase(),null,!0,!0)});function RI(e,t,n,u){var c=sn.hasOwnProperty(t)?sn[t]:null,a=c!==null?c.type===0:u?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(lge(t,n,c,u)&&(n=null),u||c===null?oge(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,u=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,u?e.setAttributeNS(u,t,n):e.setAttribute(t,n))))}var nh=Cx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vg=60103,Hc=60106,cu=60107,OI=60108,wg=60114,kI=60109,DI=60110,Mx=60112,Sg=60113,sx=60120,Rx=60115,LI=60116,zI=60121,FI=60128,CB=60129,NI=60130,VE=60131;typeof Symbol=="function"&&Symbol.for&&(Ri=Symbol.for,vg=Ri("react.element"),Hc=Ri("react.portal"),cu=Ri("react.fragment"),OI=Ri("react.strict_mode"),wg=Ri("react.profiler"),kI=Ri("react.provider"),DI=Ri("react.context"),Mx=Ri("react.forward_ref"),Sg=Ri("react.suspense"),sx=Ri("react.suspense_list"),Rx=Ri("react.memo"),LI=Ri("react.lazy"),zI=Ri("react.block"),Ri("react.scope"),FI=Ri("react.opaque.id"),CB=Ri("react.debug_trace_mode"),NI=Ri("react.offscreen"),VE=Ri("react.legacy_hidden"));var Ri,xN=typeof Symbol=="function"&&Symbol.iterator;function ag(e){return e===null||typeof e!="object"?null:(e=xN&&e[xN]||e["@@iterator"],typeof e=="function"?e:null)}var wE;function yg(e){if(wE===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);wE=t&&t[1]||""}return`
`+wE+e}var SE=!1;function F0(e,t){if(!e||SE)return"";SE=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(A){var u=A}Reflect.construct(e,[],t)}else{try{t.call()}catch(A){u=A}e.call(t.prototype)}}else{try{throw Error()}catch(A){u=A}e()}}catch(A){if(A&&u&&typeof A.stack=="string"){for(var c=A.stack.split(`
`),a=u.stack.split(`
`),x=c.length-1,S=a.length-1;1<=x&&0<=S&&c[x]!==a[S];)S--;for(;1<=x&&0<=S;x--,S--)if(c[x]!==a[S]){if(x!==1||S!==1)do if(x--,S--,0>S||c[x]!==a[S])return`
`+c[x].replace(" at new "," at ");while(1<=x&&0<=S);break}}}finally{SE=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?yg(e):""}function uge(e){switch(e.tag){case 5:return yg(e.type);case 16:return yg("Lazy");case 13:return yg("Suspense");case 19:return yg("SuspenseList");case 0:case 2:case 15:return e=F0(e.type,!1),e;case 11:return e=F0(e.type.render,!1),e;case 22:return e=F0(e.type._render,!1),e;case 1:return e=F0(e.type,!0),e;default:return""}}function tf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case cu:return"Fragment";case Hc:return"Portal";case wg:return"Profiler";case OI:return"StrictMode";case Sg:return"Suspense";case sx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case DI:return(e.displayName||"Context")+".Consumer";case kI:return(e._context.displayName||"Context")+".Provider";case Mx:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case Rx:return tf(e.type);case zI:return tf(e._render);case LI:t=e._payload,e=e._init;try{return tf(e(t))}catch(n){}}return null}function wu(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function MB(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function cge(e){var t=MB(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(x){u=""+x,a.call(this,x)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return u},setValue:function(x){u=""+x},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function N0(e){e._valueTracker||(e._valueTracker=cge(e))}function RB(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),u="";return e&&(u=MB(e)?e.checked?"true":"false":e.value),e=u,e!==n?(t.setValue(e),!0):!1}function lx(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function GE(e,t){var n=t.checked;return Lr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function bN(e,t){var n=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;n=wu(t.value!=null?t.value:n),e._wrapperState={initialChecked:u,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function OB(e,t){t=t.checked,t!=null&&RI(e,"checked",t,!1)}function ZE(e,t){OB(e,t);var n=wu(t.value),u=t.type;if(n!=null)u==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?WE(e,t.type,n):t.hasOwnProperty("defaultValue")&&WE(e,t.type,wu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function wN(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function WE(e,t,n){(t!=="number"||lx(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function hge(e){var t="";return Cx.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function HE(e,t){return e=Lr({children:void 0},t),(t=hge(t.children))&&(e.children=t),e}function rf(e,t,n,u){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&u&&(e[n].defaultSelected=!0)}else{for(n=""+wu(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,u&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function KE(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Lr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function SN(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Je(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Je(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:wu(n)}}function kB(e,t){var n=wu(t.value),u=wu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),u!=null&&(e.defaultValue=""+u)}function TN(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var XE={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function DB(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function YE(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?DB(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var B0,LB=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,u,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,u,c)})}:e}(function(e,t){if(e.namespaceURI!==XE.svg||"innerHTML"in e)e.innerHTML=t;else{for(B0=B0||document.createElement("div"),B0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=B0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Dg(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dge=["Webkit","ms","Moz","O"];Object.keys(Tg).forEach(function(e){dge.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tg[t]=Tg[e]})});function zB(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tg.hasOwnProperty(e)&&Tg[e]?(""+t).trim():t+"px"}function FB(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var u=n.indexOf("--")===0,c=zB(n,t[n],u);n==="float"&&(n="cssFloat"),u?e.setProperty(n,c):e[n]=c}}var fge=Lr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function JE(e,t){if(t){if(fge[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function QE(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function BI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var eI=null,nf=null,af=null;function EN(e){if(e=Kg(e)){if(typeof eI!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=Fx(t),eI(e.stateNode,e.type,t))}}function NB(e){nf?af?af.push(e):af=[e]:nf=e}function BB(){if(nf){var e=nf,t=af;if(af=nf=null,EN(e),t)for(e=0;e<t.length;e++)EN(t[e])}}function jI(e,t){return e(t)}function jB(e,t,n,u,c){return e(t,n,u,c)}function UI(){}var UB=jI,Kc=!1,TE=!1;function $I(){(nf!==null||af!==null)&&(UI(),BB())}function pge(e,t,n){if(TE)return e(t,n);TE=!0;try{return UB(e,t,n)}finally{TE=!1,$I()}}function Lg(e,t){var n=e.stateNode;if(n===null)return null;var u=Fx(n);if(u===null)return null;n=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Je(231,t,typeof n));return n}var tI=!1;if(cl)try{Gd={},Object.defineProperty(Gd,"passive",{get:function(){tI=!0}}),window.addEventListener("test",Gd,Gd),window.removeEventListener("test",Gd,Gd)}catch(e){tI=!1}var Gd;function mge(e,t,n,u,c,a,x,S,A){var R=Array.prototype.slice.call(arguments,3);try{t.apply(n,R)}catch(D){this.onError(D)}}var Eg=!1,ux=null,cx=!1,rI=null,gge={onError:function(e){Eg=!0,ux=e}};function vge(e,t,n,u,c,a,x,S,A){Eg=!1,ux=null,mge.apply(gge,arguments)}function yge(e,t,n,u,c,a,x,S,A){if(vge.apply(this,arguments),Eg){if(Eg){var R=ux;Eg=!1,ux=null}else throw Error(Je(198));cx||(cx=!0,rI=R)}}function ah(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function $B(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function IN(e){if(ah(e)!==e)throw Error(Je(188))}function _ge(e){var t=e.alternate;if(!t){if(t=ah(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var n=e,u=t;;){var c=n.return;if(c===null)break;var a=c.alternate;if(a===null){if(u=c.return,u!==null){n=u;continue}break}if(c.child===a.child){for(a=c.child;a;){if(a===n)return IN(c),e;if(a===u)return IN(c),t;a=a.sibling}throw Error(Je(188))}if(n.return!==u.return)n=c,u=a;else{for(var x=!1,S=c.child;S;){if(S===n){x=!0,n=c,u=a;break}if(S===u){x=!0,u=c,n=a;break}S=S.sibling}if(!x){for(S=a.child;S;){if(S===n){x=!0,n=a,u=c;break}if(S===u){x=!0,u=a,n=c;break}S=S.sibling}if(!x)throw Error(Je(189))}}if(n.alternate!==u)throw Error(Je(190))}if(n.tag!==3)throw Error(Je(188));return n.stateNode.current===n?e:t}function VB(e){if(e=_ge(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function qN(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var GB,VI,ZB,WB,iI=!1,ds=[],pu=null,mu=null,gu=null,zg=new Map,Fg=new Map,og=[],PN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function nI(e,t,n,u,c){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:c,targetContainers:[u]}}function AN(e,t){switch(e){case"focusin":case"focusout":pu=null;break;case"dragenter":case"dragleave":mu=null;break;case"mouseover":case"mouseout":gu=null;break;case"pointerover":case"pointerout":zg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fg.delete(t.pointerId)}}function sg(e,t,n,u,c,a){return e===null||e.nativeEvent!==a?(e=nI(t,n,u,c,a),t!==null&&(t=Kg(t),t!==null&&VI(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function xge(e,t,n,u,c){switch(t){case"focusin":return pu=sg(pu,e,t,n,u,c),!0;case"dragenter":return mu=sg(mu,e,t,n,u,c),!0;case"mouseover":return gu=sg(gu,e,t,n,u,c),!0;case"pointerover":var a=c.pointerId;return zg.set(a,sg(zg.get(a)||null,e,t,n,u,c)),!0;case"gotpointercapture":return a=c.pointerId,Fg.set(a,sg(Fg.get(a)||null,e,t,n,u,c)),!0}return!1}function bge(e){var t=Xc(e.target);if(t!==null){var n=ah(t);if(n!==null){if(t=n.tag,t===13){if(t=$B(n),t!==null){e.blockedOn=t,WB(e.lanePriority,function(){$i.unstable_runWithPriority(e.priority,function(){ZB(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Y0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=HI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=Kg(n),t!==null&&VI(t),e.blockedOn=n,!1;t.shift()}return!0}function CN(e,t,n){Y0(e)&&n.delete(t)}function wge(){for(iI=!1;0<ds.length;){var e=ds[0];if(e.blockedOn!==null){e=Kg(e.blockedOn),e!==null&&GB(e);break}for(var t=e.targetContainers;0<t.length;){var n=HI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&ds.shift()}pu!==null&&Y0(pu)&&(pu=null),mu!==null&&Y0(mu)&&(mu=null),gu!==null&&Y0(gu)&&(gu=null),zg.forEach(CN),Fg.forEach(CN)}function lg(e,t){e.blockedOn===t&&(e.blockedOn=null,iI||(iI=!0,$i.unstable_scheduleCallback($i.unstable_NormalPriority,wge)))}function HB(e){function t(c){return lg(c,e)}if(0<ds.length){lg(ds[0],e);for(var n=1;n<ds.length;n++){var u=ds[n];u.blockedOn===e&&(u.blockedOn=null)}}for(pu!==null&&lg(pu,e),mu!==null&&lg(mu,e),gu!==null&&lg(gu,e),zg.forEach(t),Fg.forEach(t),n=0;n<og.length;n++)u=og[n],u.blockedOn===e&&(u.blockedOn=null);for(;0<og.length&&(n=og[0],n.blockedOn===null);)bge(n),n.blockedOn===null&&og.shift()}function j0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Kd={animationend:j0("Animation","AnimationEnd"),animationiteration:j0("Animation","AnimationIteration"),animationstart:j0("Animation","AnimationStart"),transitionend:j0("Transition","TransitionEnd")},EE={},KB={};cl&&(KB=document.createElement("div").style,"AnimationEvent"in window||(delete Kd.animationend.animation,delete Kd.animationiteration.animation,delete Kd.animationstart.animation),"TransitionEvent"in window||delete Kd.transitionend.transition);function Ox(e){if(EE[e])return EE[e];if(!Kd[e])return e;var t=Kd[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in KB)return EE[e]=t[n];return e}var XB=Ox("animationend"),YB=Ox("animationiteration"),JB=Ox("animationstart"),QB=Ox("transitionend"),e3=new Map,GI=new Map,Sge=["abort","abort",XB,"animationEnd",YB,"animationIteration",JB,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",QB,"transitionEnd","waiting","waiting"];function ZI(e,t){for(var n=0;n<e.length;n+=2){var u=e[n],c=e[n+1];c="on"+(c[0].toUpperCase()+c.slice(1)),GI.set(u,t),e3.set(u,c),ih(c,[u])}}var Tge=$i.unstable_now;Tge();var xr=8;function Wd(e){if((1&e)!==0)return xr=15,1;if((2&e)!==0)return xr=14,2;if((4&e)!==0)return xr=13,4;var t=24&e;return t!==0?(xr=12,t):(e&32)!==0?(xr=11,32):(t=192&e,t!==0?(xr=10,t):(e&256)!==0?(xr=9,256):(t=3584&e,t!==0?(xr=8,t):(e&4096)!==0?(xr=7,4096):(t=4186112&e,t!==0?(xr=6,t):(t=62914560&e,t!==0?(xr=5,t):e&67108864?(xr=4,67108864):(e&134217728)!==0?(xr=3,134217728):(t=805306368&e,t!==0?(xr=2,t):(1073741824&e)!==0?(xr=1,1073741824):(xr=8,e))))))}function Ege(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function Ige(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Je(358,e))}}function Ng(e,t){var n=e.pendingLanes;if(n===0)return xr=0;var u=0,c=0,a=e.expiredLanes,x=e.suspendedLanes,S=e.pingedLanes;if(a!==0)u=a,c=xr=15;else if(a=n&134217727,a!==0){var A=a&~x;A!==0?(u=Wd(A),c=xr):(S&=a,S!==0&&(u=Wd(S),c=xr))}else a=n&~x,a!==0?(u=Wd(a),c=xr):S!==0&&(u=Wd(S),c=xr);if(u===0)return 0;if(u=31-Su(u),u=n&((0>u?0:1<<u)<<1)-1,t!==0&&t!==u&&(t&x)===0){if(Wd(t),c<=xr)return t;xr=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)n=31-Su(t),c=1<<n,u|=e[n],t&=~c;return u}function t3(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function hx(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Hd(24&~t),e===0?hx(10,t):e;case 10:return e=Hd(192&~t),e===0?hx(8,t):e;case 8:return e=Hd(3584&~t),e===0&&(e=Hd(4186112&~t),e===0&&(e=512)),e;case 2:return t=Hd(805306368&~t),t===0&&(t=268435456),t}throw Error(Je(358,e))}function Hd(e){return e&-e}function IE(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function kx(e,t,n){e.pendingLanes|=t;var u=t-1;e.suspendedLanes&=u,e.pingedLanes&=u,e=e.eventTimes,t=31-Su(t),e[t]=n}var Su=Math.clz32?Math.clz32:Age,qge=Math.log,Pge=Math.LN2;function Age(e){return e===0?32:31-(qge(e)/Pge|0)|0}var Cge=$i.unstable_UserBlockingPriority,Mge=$i.unstable_runWithPriority,J0=!0;function Rge(e,t,n,u){Kc||UI();var c=WI,a=Kc;Kc=!0;try{jB(c,e,t,n,u)}finally{(Kc=a)||$I()}}function Oge(e,t,n,u){Mge(Cge,WI.bind(null,e,t,n,u))}function WI(e,t,n,u){if(J0){var c;if((c=(t&4)===0)&&0<ds.length&&-1<PN.indexOf(e))e=nI(null,e,t,n,u),ds.push(e);else{var a=HI(e,t,n,u);if(a===null)c&&AN(e,u);else{if(c){if(-1<PN.indexOf(e)){e=nI(a,e,t,n,u),ds.push(e);return}if(xge(a,e,t,n,u))return;AN(e,u)}p3(e,t,u,null,n)}}}}function HI(e,t,n,u){var c=BI(u);if(c=Xc(c),c!==null){var a=ah(c);if(a===null)c=null;else{var x=a.tag;if(x===13){if(c=$B(a),c!==null)return c;c=null}else if(x===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;c=null}else a!==c&&(c=null)}}return p3(e,t,u,c,n),null}var hu=null,KI=null,Q0=null;function r3(){if(Q0)return Q0;var e,t=KI,n=t.length,u,c="value"in hu?hu.value:hu.textContent,a=c.length;for(e=0;e<n&&t[e]===c[e];e++);var x=n-e;for(u=1;u<=x&&t[n-u]===c[a-u];u++);return Q0=c.slice(e,1<u?1-u:void 0)}function ex(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function U0(){return!0}function MN(){return!1}function Ca(e){function t(n,u,c,a,x){this._reactName=n,this._targetInst=c,this.type=u,this.nativeEvent=a,this.target=x,this.currentTarget=null;for(var S in e)e.hasOwnProperty(S)&&(n=e[S],this[S]=n?n(a):a[S]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?U0:MN,this.isPropagationStopped=MN,this}return Lr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=U0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=U0)},persist:function(){},isPersistent:U0}),t}var gf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XI=Ca(gf),Hg=Lr({},gf,{view:0,detail:0}),kge=Ca(Hg),qE,PE,ug,Dx=Lr({},Hg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:YI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ug&&(ug&&e.type==="mousemove"?(qE=e.screenX-ug.screenX,PE=e.screenY-ug.screenY):PE=qE=0,ug=e),qE)},movementY:function(e){return"movementY"in e?e.movementY:PE}}),RN=Ca(Dx),Dge=Lr({},Dx,{dataTransfer:0}),Lge=Ca(Dge),zge=Lr({},Hg,{relatedTarget:0}),AE=Ca(zge),Fge=Lr({},gf,{animationName:0,elapsedTime:0,pseudoElement:0}),Nge=Ca(Fge),Bge=Lr({},gf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),jge=Ca(Bge),Uge=Lr({},gf,{data:0}),ON=Ca(Uge),$ge={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vge={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Gge={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zge(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Gge[e])?!!t[e]:!1}function YI(){return Zge}var Wge=Lr({},Hg,{key:function(e){if(e.key){var t=$ge[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ex(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Vge[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:YI,charCode:function(e){return e.type==="keypress"?ex(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ex(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Hge=Ca(Wge),Kge=Lr({},Dx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),kN=Ca(Kge),Xge=Lr({},Hg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:YI}),Yge=Ca(Xge),Jge=Lr({},gf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Qge=Ca(Jge),eve=Lr({},Dx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),tve=Ca(eve),rve=[9,13,27,32],JI=cl&&"CompositionEvent"in window,Ig=null;cl&&"documentMode"in document&&(Ig=document.documentMode);var ive=cl&&"TextEvent"in window&&!Ig,i3=cl&&(!JI||Ig&&8<Ig&&11>=Ig),DN=" ",LN=!1;function n3(e,t){switch(e){case"keyup":return rve.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function a3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Xd=!1;function nve(e,t){switch(e){case"compositionend":return a3(t);case"keypress":return t.which!==32?null:(LN=!0,DN);case"textInput":return e=t.data,e===DN&&LN?null:e;default:return null}}function ave(e,t){if(Xd)return e==="compositionend"||!JI&&n3(e,t)?(e=r3(),Q0=KI=hu=null,Xd=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return i3&&t.locale!=="ko"?null:t.data;default:return null}}var ove={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zN(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ove[e.type]:t==="textarea"}function o3(e,t,n,u){NB(u),t=dx(t,"onChange"),0<t.length&&(n=new XI("onChange","change",null,n,u),e.push({event:n,listeners:t}))}var qg=null,Bg=null;function sve(e){h3(e,0)}function Lx(e){var t=Jd(e);if(RB(t))return e}function lve(e,t){if(e==="change")return t}var s3=!1;cl&&(cl?(V0="oninput"in document,V0||(CE=document.createElement("div"),CE.setAttribute("oninput","return;"),V0=typeof CE.oninput=="function"),$0=V0):$0=!1,s3=$0&&(!document.documentMode||9<document.documentMode));var $0,V0,CE;function FN(){qg&&(qg.detachEvent("onpropertychange",l3),Bg=qg=null)}function l3(e){if(e.propertyName==="value"&&Lx(Bg)){var t=[];if(o3(t,Bg,e,BI(e)),e=sve,Kc)e(t);else{Kc=!0;try{jI(e,t)}finally{Kc=!1,$I()}}}}function uve(e,t,n){e==="focusin"?(FN(),qg=t,Bg=n,qg.attachEvent("onpropertychange",l3)):e==="focusout"&&FN()}function cve(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Lx(Bg)}function hve(e,t){if(e==="click")return Lx(t)}function dve(e,t){if(e==="input"||e==="change")return Lx(t)}function fve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Wa=typeof Object.is=="function"?Object.is:fve,pve=Object.prototype.hasOwnProperty;function jg(e,t){if(Wa(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),u=Object.keys(t);if(n.length!==u.length)return!1;for(u=0;u<n.length;u++)if(!pve.call(t,n[u])||!Wa(e[n[u]],t[n[u]]))return!1;return!0}function NN(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function BN(e,t){var n=NN(e);e=0;for(var u;n;){if(n.nodeType===3){if(u=e+n.textContent.length,e<=t&&u>=t)return{node:n,offset:t-e};e=u}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=NN(n)}}function u3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?u3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function jN(){for(var e=window,t=lx();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(u){n=!1}if(n)e=t.contentWindow;else break;t=lx(e.document)}return t}function aI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var mve=cl&&"documentMode"in document&&11>=document.documentMode,Yd=null,oI=null,Pg=null,sI=!1;function UN(e,t,n){var u=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sI||Yd==null||Yd!==lx(u)||(u=Yd,"selectionStart"in u&&aI(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Pg&&jg(Pg,u)||(Pg=u,u=dx(oI,"onSelect"),0<u.length&&(t=new XI("onSelect","select",null,t,n),e.push({event:t,listeners:u}),t.target=Yd)))}ZI("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);ZI("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);ZI(Sge,2);for(ME="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),G0=0;G0<ME.length;G0++)GI.set(ME[G0],0);var ME,G0;df("onMouseEnter",["mouseout","mouseover"]);df("onMouseLeave",["mouseout","mouseover"]);df("onPointerEnter",["pointerout","pointerover"]);df("onPointerLeave",["pointerout","pointerover"]);ih("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ih("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ih("onBeforeInput",["compositionend","keypress","textInput","paste"]);ih("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ih("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _g="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),c3=new Set("cancel close invalid load scroll toggle".split(" ").concat(_g));function $N(e,t,n){var u=e.type||"unknown-event";e.currentTarget=n,yge(u,t,void 0,e),e.currentTarget=null}function h3(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var u=e[n],c=u.event;u=u.listeners;e:{var a=void 0;if(t)for(var x=u.length-1;0<=x;x--){var S=u[x],A=S.instance,R=S.currentTarget;if(S=S.listener,A!==a&&c.isPropagationStopped())break e;$N(c,S,R),a=A}else for(x=0;x<u.length;x++){if(S=u[x],A=S.instance,R=S.currentTarget,S=S.listener,A!==a&&c.isPropagationStopped())break e;$N(c,S,R),a=A}}}if(cx)throw e=rI,cx=!1,rI=null,e}function Pr(e,t){var n=g3(t),u=e+"__bubble";n.has(u)||(f3(t,e,2,!1),n.add(u))}var VN="_reactListening"+Math.random().toString(36).slice(2);function d3(e){e[VN]||(e[VN]=!0,AB.forEach(function(t){c3.has(t)||GN(t,!1,e,null),GN(t,!0,e,null)}))}function GN(e,t,n,u){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=n;if(e==="selectionchange"&&n.nodeType!==9&&(a=n.ownerDocument),u!==null&&!t&&c3.has(e)){if(e!=="scroll")return;c|=2,a=u}var x=g3(a),S=e+"__"+(t?"capture":"bubble");x.has(S)||(t&&(c|=4),f3(a,e,c,t),x.add(S))}function f3(e,t,n,u){var c=GI.get(t);switch(c===void 0?2:c){case 0:c=Rge;break;case 1:c=Oge;break;default:c=WI}n=c.bind(null,t,n,e),c=void 0,!tI||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),u?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function p3(e,t,n,u,c){var a=u;if((t&1)===0&&(t&2)===0&&u!==null)e:for(;;){if(u===null)return;var x=u.tag;if(x===3||x===4){var S=u.stateNode.containerInfo;if(S===c||S.nodeType===8&&S.parentNode===c)break;if(x===4)for(x=u.return;x!==null;){var A=x.tag;if((A===3||A===4)&&(A=x.stateNode.containerInfo,A===c||A.nodeType===8&&A.parentNode===c))return;x=x.return}for(;S!==null;){if(x=Xc(S),x===null)return;if(A=x.tag,A===5||A===6){u=a=x;continue e}S=S.parentNode}}u=u.return}pge(function(){var R=a,D=BI(n),L=[];e:{var H=e3.get(e);if(H!==void 0){var ce=XI,de=e;switch(e){case"keypress":if(ex(n)===0)break e;case"keydown":case"keyup":ce=Hge;break;case"focusin":de="focus",ce=AE;break;case"focusout":de="blur",ce=AE;break;case"beforeblur":case"afterblur":ce=AE;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=RN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Lge;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=Yge;break;case XB:case YB:case JB:ce=Nge;break;case QB:ce=Qge;break;case"scroll":ce=kge;break;case"wheel":ce=tve;break;case"copy":case"cut":case"paste":ce=jge;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=kN}var ve=(t&4)!==0,X=!ve&&e==="scroll",ee=ve?H!==null?H+"Capture":null:H;ve=[];for(var oe=R,Te;oe!==null;){Te=oe;var Ae=Te.stateNode;if(Te.tag===5&&Ae!==null&&(Te=Ae,ee!==null&&(Ae=Lg(oe,ee),Ae!=null&&ve.push(Ug(oe,Ae,Te)))),X)break;oe=oe.return}0<ve.length&&(H=new ce(H,de,null,n,D),L.push({event:H,listeners:ve}))}}if((t&7)===0){e:{if(H=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",H&&(t&16)===0&&(de=n.relatedTarget||n.fromElement)&&(Xc(de)||de[vf]))break e;if((ce||H)&&(H=D.window===D?D:(H=D.ownerDocument)?H.defaultView||H.parentWindow:window,ce?(de=n.relatedTarget||n.toElement,ce=R,de=de?Xc(de):null,de!==null&&(X=ah(de),de!==X||de.tag!==5&&de.tag!==6)&&(de=null)):(ce=null,de=R),ce!==de)){if(ve=RN,Ae="onMouseLeave",ee="onMouseEnter",oe="mouse",(e==="pointerout"||e==="pointerover")&&(ve=kN,Ae="onPointerLeave",ee="onPointerEnter",oe="pointer"),X=ce==null?H:Jd(ce),Te=de==null?H:Jd(de),H=new ve(Ae,oe+"leave",ce,n,D),H.target=X,H.relatedTarget=Te,Ae=null,Xc(D)===R&&(ve=new ve(ee,oe+"enter",de,n,D),ve.target=Te,ve.relatedTarget=X,Ae=ve),X=Ae,ce&&de)t:{for(ve=ce,ee=de,oe=0,Te=ve;Te;Te=Zd(Te))oe++;for(Te=0,Ae=ee;Ae;Ae=Zd(Ae))Te++;for(;0<oe-Te;)ve=Zd(ve),oe--;for(;0<Te-oe;)ee=Zd(ee),Te--;for(;oe--;){if(ve===ee||ee!==null&&ve===ee.alternate)break t;ve=Zd(ve),ee=Zd(ee)}ve=null}else ve=null;ce!==null&&ZN(L,H,ce,ve,!1),de!==null&&X!==null&&ZN(L,X,de,ve,!0)}}e:{if(H=R?Jd(R):window,ce=H.nodeName&&H.nodeName.toLowerCase(),ce==="select"||ce==="input"&&H.type==="file")var it=lve;else if(zN(H)){if(s3)it=dve;else{it=cve;var Ge=uve}}else(ce=H.nodeName)&&ce.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(it=hve);if(it&&(it=it(e,R))){o3(L,it,n,D);break e}Ge&&Ge(e,H,R),e==="focusout"&&(Ge=H._wrapperState)&&Ge.controlled&&H.type==="number"&&WE(H,"number",H.value)}switch(Ge=R?Jd(R):window,e){case"focusin":(zN(Ge)||Ge.contentEditable==="true")&&(Yd=Ge,oI=R,Pg=null);break;case"focusout":Pg=oI=Yd=null;break;case"mousedown":sI=!0;break;case"contextmenu":case"mouseup":case"dragend":sI=!1,UN(L,n,D);break;case"selectionchange":if(mve)break;case"keydown":case"keyup":UN(L,n,D)}var nt;if(JI)e:{switch(e){case"compositionstart":var dt="onCompositionStart";break e;case"compositionend":dt="onCompositionEnd";break e;case"compositionupdate":dt="onCompositionUpdate";break e}dt=void 0}else Xd?n3(e,n)&&(dt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(dt="onCompositionStart");dt&&(i3&&n.locale!=="ko"&&(Xd||dt!=="onCompositionStart"?dt==="onCompositionEnd"&&Xd&&(nt=r3()):(hu=D,KI="value"in hu?hu.value:hu.textContent,Xd=!0)),Ge=dx(R,dt),0<Ge.length&&(dt=new ON(dt,e,null,n,D),L.push({event:dt,listeners:Ge}),nt?dt.data=nt:(nt=a3(n),nt!==null&&(dt.data=nt)))),(nt=ive?nve(e,n):ave(e,n))&&(R=dx(R,"onBeforeInput"),0<R.length&&(D=new ON("onBeforeInput","beforeinput",null,n,D),L.push({event:D,listeners:R}),D.data=nt))}h3(L,t)})}function Ug(e,t,n){return{instance:e,listener:t,currentTarget:n}}function dx(e,t){for(var n=t+"Capture",u=[];e!==null;){var c=e,a=c.stateNode;c.tag===5&&a!==null&&(c=a,a=Lg(e,n),a!=null&&u.unshift(Ug(e,a,c)),a=Lg(e,t),a!=null&&u.push(Ug(e,a,c))),e=e.return}return u}function Zd(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ZN(e,t,n,u,c){for(var a=t._reactName,x=[];n!==null&&n!==u;){var S=n,A=S.alternate,R=S.stateNode;if(A!==null&&A===u)break;S.tag===5&&R!==null&&(S=R,c?(A=Lg(n,a),A!=null&&x.unshift(Ug(n,A,S))):c||(A=Lg(n,a),A!=null&&x.push(Ug(n,A,S)))),n=n.return}x.length!==0&&e.push({event:t,listeners:x})}function fx(){}var RE=null,OE=null;function m3(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function lI(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var WN=typeof setTimeout=="function"?setTimeout:void 0,gve=typeof clearTimeout=="function"?clearTimeout:void 0;function QI(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function of(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function HN(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var kE=0;function vve(e){return{$$typeof:FI,toString:e,valueOf:e}}var zx=Math.random().toString(36).slice(2),du="__reactFiber$"+zx,px="__reactProps$"+zx,vf="__reactContainer$"+zx,KN="__reactEvents$"+zx;function Xc(e){var t=e[du];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vf]||n[du]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=HN(e);e!==null;){if(n=e[du])return n;e=HN(e)}return t}e=n,n=e.parentNode}return null}function Kg(e){return e=e[du]||e[vf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jd(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function Fx(e){return e[px]||null}function g3(e){var t=e[KN];return t===void 0&&(t=e[KN]=new Set),t}var uI=[],Qd=-1;function qu(e){return{current:e}}function Ar(e){0>Qd||(e.current=uI[Qd],uI[Qd]=null,Qd--)}function Jr(e,t){Qd++,uI[Qd]=e.current,e.current=t}var Tu={},En=qu(Tu),Jn=qu(!1),eh=Tu;function ff(e,t){var n=e.type.contextTypes;if(!n)return Tu;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var c={},a;for(a in n)c[a]=t[a];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Qn(e){return e=e.childContextTypes,e!=null}function mx(){Ar(Jn),Ar(En)}function XN(e,t,n){if(En.current!==Tu)throw Error(Je(168));Jr(En,t),Jr(Jn,n)}function v3(e,t,n){var u=e.stateNode;if(e=t.childContextTypes,typeof u.getChildContext!="function")return n;u=u.getChildContext();for(var c in u)if(!(c in e))throw Error(Je(108,tf(t)||"Unknown",c));return Lr({},n,u)}function tx(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tu,eh=En.current,Jr(En,e),Jr(Jn,Jn.current),!0}function YN(e,t,n){var u=e.stateNode;if(!u)throw Error(Je(169));n?(e=v3(e,t,eh),u.__reactInternalMemoizedMergedChildContext=e,Ar(Jn),Ar(En),Jr(En,e)):Ar(Jn),Jr(Jn,n)}var eq=null,Qc=null,yve=$i.unstable_runWithPriority,tq=$i.unstable_scheduleCallback,cI=$i.unstable_cancelCallback,_ve=$i.unstable_shouldYield,JN=$i.unstable_requestPaint,hI=$i.unstable_now,xve=$i.unstable_getCurrentPriorityLevel,Nx=$i.unstable_ImmediatePriority,y3=$i.unstable_UserBlockingPriority,_3=$i.unstable_NormalPriority,x3=$i.unstable_LowPriority,b3=$i.unstable_IdlePriority,DE={},bve=JN!==void 0?JN:function(){},al=null,rx=null,LE=!1,QN=hI(),Sn=1e4>QN?hI:function(){return hI()-QN};function pf(){switch(xve()){case Nx:return 99;case y3:return 98;case _3:return 97;case x3:return 96;case b3:return 95;default:throw Error(Je(332))}}function w3(e){switch(e){case 99:return Nx;case 98:return y3;case 97:return _3;case 96:return x3;case 95:return b3;default:throw Error(Je(332))}}function th(e,t){return e=w3(e),yve(e,t)}function $g(e,t,n){return e=w3(e),tq(e,t,n)}function vs(){if(rx!==null){var e=rx;rx=null,cI(e)}S3()}function S3(){if(!LE&&al!==null){LE=!0;var e=0;try{var t=al;th(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),al=null}catch(n){throw al!==null&&(al=al.slice(e+1)),tq(Nx,vs),n}finally{LE=!1}}}var wve=nh.ReactCurrentBatchConfig;function Io(e,t){if(e&&e.defaultProps){t=Lr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var gx=qu(null),vx=null,ef=null,yx=null;function rq(){yx=ef=vx=null}function iq(e){var t=gx.current;Ar(gx),e.type._context._currentValue=t}function T3(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function sf(e,t){vx=e,yx=ef=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(qo=!0),e.firstContext=null)}function Xa(e,t){if(yx!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(yx=e,t=1073741823),t={context:e,observedBits:t,next:null},ef===null){if(vx===null)throw Error(Je(308));ef=t,vx.dependencies={lanes:0,firstContext:t,responders:null}}else ef=ef.next=t;return e._currentValue}var uu=!1;function nq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function E3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vu(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function yu(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function eB(e,t){var n=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,n===u)){var c=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var x={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?c=a=x:a=a.next=x,n=n.next}while(n!==null);a===null?c=a=t:a=a.next=t}else c=a=t;n={baseState:u.baseState,firstBaseUpdate:c,lastBaseUpdate:a,shared:u.shared,effects:u.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Vg(e,t,n,u){var c=e.updateQueue;uu=!1;var a=c.firstBaseUpdate,x=c.lastBaseUpdate,S=c.shared.pending;if(S!==null){c.shared.pending=null;var A=S,R=A.next;A.next=null,x===null?a=R:x.next=R,x=A;var D=e.alternate;if(D!==null){D=D.updateQueue;var L=D.lastBaseUpdate;L!==x&&(L===null?D.firstBaseUpdate=R:L.next=R,D.lastBaseUpdate=A)}}if(a!==null){L=c.baseState,x=0,D=R=A=null;do{S=a.lane;var H=a.eventTime;if((u&S)===S){D!==null&&(D=D.next={eventTime:H,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var ce=e,de=a;switch(S=t,H=n,de.tag){case 1:if(ce=de.payload,typeof ce=="function"){L=ce.call(H,L,S);break e}L=ce;break e;case 3:ce.flags=ce.flags&-4097|64;case 0:if(ce=de.payload,S=typeof ce=="function"?ce.call(H,L,S):ce,S==null)break e;L=Lr({},L,S);break e;case 2:uu=!0}}a.callback!==null&&(e.flags|=32,S=c.effects,S===null?c.effects=[a]:S.push(a))}else H={eventTime:H,lane:S,tag:a.tag,payload:a.payload,callback:a.callback,next:null},D===null?(R=D=H,A=L):D=D.next=H,x|=S;if(a=a.next,a===null){if(S=c.shared.pending,S===null)break;a=S.next,S.next=null,c.lastBaseUpdate=S,c.shared.pending=null}}while(!0);D===null&&(A=L),c.baseState=A,c.firstBaseUpdate=R,c.lastBaseUpdate=D,Yg|=x,e.lanes=x,e.memoizedState=L}}function tB(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],c=u.callback;if(c!==null){if(u.callback=null,u=n,typeof c!="function")throw Error(Je(191,c));c.call(u)}}}var I3=new Cx.Component().refs;function _x(e,t,n,u){t=e.memoizedState,n=n(u,t),n=n==null?t:Lr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Bx={isMounted:function(e){return(e=e._reactInternals)?ah(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var u=Aa(),c=_u(e),a=vu(u,c);a.payload=t,n!=null&&(a.callback=n),yu(e,a),xu(e,c,u)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var u=Aa(),c=_u(e),a=vu(u,c);a.tag=1,a.payload=t,n!=null&&(a.callback=n),yu(e,a),xu(e,c,u)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Aa(),u=_u(e),c=vu(n,u);c.tag=2,t!=null&&(c.callback=t),yu(e,c),xu(e,u,n)}};function rB(e,t,n,u,c,a,x){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,a,x):t.prototype&&t.prototype.isPureReactComponent?!jg(n,u)||!jg(c,a):!0}function q3(e,t,n){var u=!1,c=Tu,a=t.contextType;return typeof a=="object"&&a!==null?a=Xa(a):(c=Qn(t)?eh:En.current,u=t.contextTypes,a=(u=u!=null)?ff(e,c):Tu),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Bx,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=a),t}function iB(e,t,n,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,u),t.state!==e&&Bx.enqueueReplaceState(t,t.state,null)}function dI(e,t,n,u){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=I3,nq(e);var a=t.contextType;typeof a=="object"&&a!==null?c.context=Xa(a):(a=Qn(t)?eh:En.current,c.context=ff(e,a)),Vg(e,n,c,u),c.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(_x(e,t,a,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Bx.enqueueReplaceState(c,c.state,null),Vg(e,n,c,u),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var Z0=Array.isArray;function cg(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Je(309));var u=n.stateNode}if(!u)throw Error(Je(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(a){var x=u.refs;x===I3&&(x=u.refs={}),a===null?delete x[c]:x[c]=a},t._stringRef=c,t)}if(typeof e!="string")throw Error(Je(284));if(!n._owner)throw Error(Je(290,e))}return e}function W0(e,t){if(e.type!=="textarea")throw Error(Je(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function P3(e){function t(X,ee){if(e){var oe=X.lastEffect;oe!==null?(oe.nextEffect=ee,X.lastEffect=ee):X.firstEffect=X.lastEffect=ee,ee.nextEffect=null,ee.flags=8}}function n(X,ee){if(!e)return null;for(;ee!==null;)t(X,ee),ee=ee.sibling;return null}function u(X,ee){for(X=new Map;ee!==null;)ee.key!==null?X.set(ee.key,ee):X.set(ee.index,ee),ee=ee.sibling;return X}function c(X,ee){return X=Iu(X,ee),X.index=0,X.sibling=null,X}function a(X,ee,oe){return X.index=oe,e?(oe=X.alternate,oe!==null?(oe=oe.index,oe<ee?(X.flags=2,ee):oe):(X.flags=2,ee)):ee}function x(X){return e&&X.alternate===null&&(X.flags=2),X}function S(X,ee,oe,Te){return ee===null||ee.tag!==6?(ee=jE(oe,X.mode,Te),ee.return=X,ee):(ee=c(ee,oe),ee.return=X,ee)}function A(X,ee,oe,Te){return ee!==null&&ee.elementType===oe.type?(Te=c(ee,oe.props),Te.ref=cg(X,ee,oe),Te.return=X,Te):(Te=ox(oe.type,oe.key,oe.props,null,X.mode,Te),Te.ref=cg(X,ee,oe),Te.return=X,Te)}function R(X,ee,oe,Te){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==oe.containerInfo||ee.stateNode.implementation!==oe.implementation?(ee=UE(oe,X.mode,Te),ee.return=X,ee):(ee=c(ee,oe.children||[]),ee.return=X,ee)}function D(X,ee,oe,Te,Ae){return ee===null||ee.tag!==7?(ee=hf(oe,X.mode,Te,Ae),ee.return=X,ee):(ee=c(ee,oe),ee.return=X,ee)}function L(X,ee,oe){if(typeof ee=="string"||typeof ee=="number")return ee=jE(""+ee,X.mode,oe),ee.return=X,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case vg:return oe=ox(ee.type,ee.key,ee.props,null,X.mode,oe),oe.ref=cg(X,null,ee),oe.return=X,oe;case Hc:return ee=UE(ee,X.mode,oe),ee.return=X,ee}if(Z0(ee)||ag(ee))return ee=hf(ee,X.mode,oe,null),ee.return=X,ee;W0(X,ee)}return null}function H(X,ee,oe,Te){var Ae=ee!==null?ee.key:null;if(typeof oe=="string"||typeof oe=="number")return Ae!==null?null:S(X,ee,""+oe,Te);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case vg:return oe.key===Ae?oe.type===cu?D(X,ee,oe.props.children,Te,Ae):A(X,ee,oe,Te):null;case Hc:return oe.key===Ae?R(X,ee,oe,Te):null}if(Z0(oe)||ag(oe))return Ae!==null?null:D(X,ee,oe,Te,null);W0(X,oe)}return null}function ce(X,ee,oe,Te,Ae){if(typeof Te=="string"||typeof Te=="number")return X=X.get(oe)||null,S(ee,X,""+Te,Ae);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case vg:return X=X.get(Te.key===null?oe:Te.key)||null,Te.type===cu?D(ee,X,Te.props.children,Ae,Te.key):A(ee,X,Te,Ae);case Hc:return X=X.get(Te.key===null?oe:Te.key)||null,R(ee,X,Te,Ae)}if(Z0(Te)||ag(Te))return X=X.get(oe)||null,D(ee,X,Te,Ae,null);W0(ee,Te)}return null}function de(X,ee,oe,Te){for(var Ae=null,it=null,Ge=ee,nt=ee=0,dt=null;Ge!==null&&nt<oe.length;nt++){Ge.index>nt?(dt=Ge,Ge=null):dt=Ge.sibling;var gt=H(X,Ge,oe[nt],Te);if(gt===null){Ge===null&&(Ge=dt);break}e&&Ge&&gt.alternate===null&&t(X,Ge),ee=a(gt,ee,nt),it===null?Ae=gt:it.sibling=gt,it=gt,Ge=dt}if(nt===oe.length)return n(X,Ge),Ae;if(Ge===null){for(;nt<oe.length;nt++)Ge=L(X,oe[nt],Te),Ge!==null&&(ee=a(Ge,ee,nt),it===null?Ae=Ge:it.sibling=Ge,it=Ge);return Ae}for(Ge=u(X,Ge);nt<oe.length;nt++)dt=ce(Ge,X,nt,oe[nt],Te),dt!==null&&(e&&dt.alternate!==null&&Ge.delete(dt.key===null?nt:dt.key),ee=a(dt,ee,nt),it===null?Ae=dt:it.sibling=dt,it=dt);return e&&Ge.forEach(function(Mr){return t(X,Mr)}),Ae}function ve(X,ee,oe,Te){var Ae=ag(oe);if(typeof Ae!="function")throw Error(Je(150));if(oe=Ae.call(oe),oe==null)throw Error(Je(151));for(var it=Ae=null,Ge=ee,nt=ee=0,dt=null,gt=oe.next();Ge!==null&&!gt.done;nt++,gt=oe.next()){Ge.index>nt?(dt=Ge,Ge=null):dt=Ge.sibling;var Mr=H(X,Ge,gt.value,Te);if(Mr===null){Ge===null&&(Ge=dt);break}e&&Ge&&Mr.alternate===null&&t(X,Ge),ee=a(Mr,ee,nt),it===null?Ae=Mr:it.sibling=Mr,it=Mr,Ge=dt}if(gt.done)return n(X,Ge),Ae;if(Ge===null){for(;!gt.done;nt++,gt=oe.next())gt=L(X,gt.value,Te),gt!==null&&(ee=a(gt,ee,nt),it===null?Ae=gt:it.sibling=gt,it=gt);return Ae}for(Ge=u(X,Ge);!gt.done;nt++,gt=oe.next())gt=ce(Ge,X,nt,gt.value,Te),gt!==null&&(e&&gt.alternate!==null&&Ge.delete(gt.key===null?nt:gt.key),ee=a(gt,ee,nt),it===null?Ae=gt:it.sibling=gt,it=gt);return e&&Ge.forEach(function(qn){return t(X,qn)}),Ae}return function(X,ee,oe,Te){var Ae=typeof oe=="object"&&oe!==null&&oe.type===cu&&oe.key===null;Ae&&(oe=oe.props.children);var it=typeof oe=="object"&&oe!==null;if(it)switch(oe.$$typeof){case vg:e:{for(it=oe.key,Ae=ee;Ae!==null;){if(Ae.key===it){switch(Ae.tag){case 7:if(oe.type===cu){n(X,Ae.sibling),ee=c(Ae,oe.props.children),ee.return=X,X=ee;break e}break;default:if(Ae.elementType===oe.type){n(X,Ae.sibling),ee=c(Ae,oe.props),ee.ref=cg(X,Ae,oe),ee.return=X,X=ee;break e}}n(X,Ae);break}else t(X,Ae);Ae=Ae.sibling}oe.type===cu?(ee=hf(oe.props.children,X.mode,Te,oe.key),ee.return=X,X=ee):(Te=ox(oe.type,oe.key,oe.props,null,X.mode,Te),Te.ref=cg(X,ee,oe),Te.return=X,X=Te)}return x(X);case Hc:e:{for(Ae=oe.key;ee!==null;){if(ee.key===Ae){if(ee.tag===4&&ee.stateNode.containerInfo===oe.containerInfo&&ee.stateNode.implementation===oe.implementation){n(X,ee.sibling),ee=c(ee,oe.children||[]),ee.return=X,X=ee;break e}else{n(X,ee);break}}else t(X,ee);ee=ee.sibling}ee=UE(oe,X.mode,Te),ee.return=X,X=ee}return x(X)}if(typeof oe=="string"||typeof oe=="number")return oe=""+oe,ee!==null&&ee.tag===6?(n(X,ee.sibling),ee=c(ee,oe),ee.return=X,X=ee):(n(X,ee),ee=jE(oe,X.mode,Te),ee.return=X,X=ee),x(X);if(Z0(oe))return de(X,ee,oe,Te);if(ag(oe))return ve(X,ee,oe,Te);if(it&&W0(X,oe),typeof oe=="undefined"&&!Ae)switch(X.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Je(152,tf(X.type)||"Component"))}return n(X,ee)}}var xx=P3(!0),A3=P3(!1),Xg={},ms=qu(Xg),Gg=qu(Xg),Zg=qu(Xg);function Yc(e){if(e===Xg)throw Error(Je(174));return e}function fI(e,t){switch(Jr(Zg,t),Jr(Gg,e),Jr(ms,Xg),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:YE(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=YE(t,e)}Ar(ms),Jr(ms,t)}function mf(){Ar(ms),Ar(Gg),Ar(Zg)}function nB(e){Yc(Zg.current);var t=Yc(ms.current),n=YE(t,e.type);t!==n&&(Jr(Gg,e),Jr(ms,n))}function aq(e){Gg.current===e&&(Ar(ms),Ar(Gg))}var Yr=qu(0);function bx(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var sl=null,fu=null,gs=!1;function C3(e,t){var n=Ha(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function aB(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function pI(e){if(gs){var t=fu;if(t){var n=t;if(!aB(e,t)){if(t=of(n.nextSibling),!t||!aB(e,t)){e.flags=e.flags&-1025|2,gs=!1,sl=e;return}C3(sl,n)}sl=e,fu=of(t.firstChild)}else e.flags=e.flags&-1025|2,gs=!1,sl=e}}function oB(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;sl=e}function H0(e){if(e!==sl)return!1;if(!gs)return oB(e),gs=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!lI(t,e.memoizedProps))for(t=fu;t;)C3(e,t),t=of(t.nextSibling);if(oB(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){fu=of(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}fu=null}}else fu=sl?of(e.stateNode.nextSibling):null;return!0}function zE(){fu=sl=null,gs=!1}var lf=[];function oq(){for(var e=0;e<lf.length;e++)lf[e]._workInProgressVersionPrimary=null;lf.length=0}var Ag=nh.ReactCurrentDispatcher,Ka=nh.ReactCurrentBatchConfig,Wg=0,fi=null,wn=null,an=null,wx=!1,Cg=!1;function Xn(){throw Error(Je(321))}function sq(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Wa(e[n],t[n]))return!1;return!0}function lq(e,t,n,u,c,a){if(Wg=a,fi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ag.current=e===null||e.memoizedState===null?Tve:Eve,e=n(u,c),Cg){a=0;do{if(Cg=!1,!(25>a))throw Error(Je(301));a+=1,an=wn=null,t.updateQueue=null,Ag.current=Ive,e=n(u,c)}while(Cg)}if(Ag.current=Ix,t=wn!==null&&wn.next!==null,Wg=0,an=wn=fi=null,wx=!1,t)throw Error(Je(300));return e}function Jc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return an===null?fi.memoizedState=an=e:an=an.next=e,an}function oh(){if(wn===null){var e=fi.alternate;e=e!==null?e.memoizedState:null}else e=wn.next;var t=an===null?fi.memoizedState:an.next;if(t!==null)an=t,wn=e;else{if(e===null)throw Error(Je(310));wn=e,e={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},an===null?fi.memoizedState=an=e:an=an.next=e}return an}function fs(e,t){return typeof t=="function"?t(e):t}function hg(e){var t=oh(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=e;var u=wn,c=u.baseQueue,a=n.pending;if(a!==null){if(c!==null){var x=c.next;c.next=a.next,a.next=x}u.baseQueue=c=a,n.pending=null}if(c!==null){c=c.next,u=u.baseState;var S=x=a=null,A=c;do{var R=A.lane;if((Wg&R)===R)S!==null&&(S=S.next={lane:0,action:A.action,eagerReducer:A.eagerReducer,eagerState:A.eagerState,next:null}),u=A.eagerReducer===e?A.eagerState:e(u,A.action);else{var D={lane:R,action:A.action,eagerReducer:A.eagerReducer,eagerState:A.eagerState,next:null};S===null?(x=S=D,a=u):S=S.next=D,fi.lanes|=R,Yg|=R}A=A.next}while(A!==null&&A!==c);S===null?a=u:S.next=x,Wa(u,t.memoizedState)||(qo=!0),t.memoizedState=u,t.baseState=a,t.baseQueue=S,n.lastRenderedState=u}return[t.memoizedState,n.dispatch]}function dg(e){var t=oh(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=e;var u=n.dispatch,c=n.pending,a=t.memoizedState;if(c!==null){n.pending=null;var x=c=c.next;do a=e(a,x.action),x=x.next;while(x!==c);Wa(a,t.memoizedState)||(qo=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,u]}function sB(e,t,n){var u=t._getVersion;u=u(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===u:(e=e.mutableReadLanes,(e=(Wg&e)===e)&&(t._workInProgressVersionPrimary=u,lf.push(t))),e)return n(t._source);throw lf.push(t),Error(Je(350))}function M3(e,t,n,u){var c=Ln;if(c===null)throw Error(Je(349));var a=t._getVersion,x=a(t._source),S=Ag.current,A=S.useState(function(){return sB(c,t,n)}),R=A[1],D=A[0];A=an;var L=e.memoizedState,H=L.refs,ce=H.getSnapshot,de=L.source;L=L.subscribe;var ve=fi;return e.memoizedState={refs:H,source:t,subscribe:u},S.useEffect(function(){H.getSnapshot=n,H.setSnapshot=R;var X=a(t._source);if(!Wa(x,X)){X=n(t._source),Wa(D,X)||(R(X),X=_u(ve),c.mutableReadLanes|=X&c.pendingLanes),X=c.mutableReadLanes,c.entangledLanes|=X;for(var ee=c.entanglements,oe=X;0<oe;){var Te=31-Su(oe),Ae=1<<Te;ee[Te]|=X,oe&=~Ae}}},[n,t,u]),S.useEffect(function(){return u(t._source,function(){var X=H.getSnapshot,ee=H.setSnapshot;try{ee(X(t._source));var oe=_u(ve);c.mutableReadLanes|=oe&c.pendingLanes}catch(Te){ee(function(){throw Te})}})},[t,u]),Wa(ce,n)&&Wa(de,t)&&Wa(L,u)||(e={pending:null,dispatch:null,lastRenderedReducer:fs,lastRenderedState:D},e.dispatch=R=hq.bind(null,fi,e),A.queue=e,A.baseQueue=null,D=sB(c,t,n),A.memoizedState=A.baseState=D),D}function R3(e,t,n){var u=oh();return M3(u,e,t,n)}function fg(e){var t=Jc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:fs,lastRenderedState:e},e=e.dispatch=hq.bind(null,fi,e),[t.memoizedState,e]}function Sx(e,t,n,u){return e={tag:e,create:t,destroy:n,deps:u,next:null},t=fi.updateQueue,t===null?(t={lastEffect:null},fi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(u=n.next,n.next=e,e.next=u,t.lastEffect=e)),e}function lB(e){var t=Jc();return e={current:e},t.memoizedState=e}function Tx(){return oh().memoizedState}function mI(e,t,n,u){var c=Jc();fi.flags|=e,c.memoizedState=Sx(1|t,n,void 0,u===void 0?null:u)}function uq(e,t,n,u){var c=oh();u=u===void 0?null:u;var a=void 0;if(wn!==null){var x=wn.memoizedState;if(a=x.destroy,u!==null&&sq(u,x.deps)){Sx(t,n,a,u);return}}fi.flags|=e,c.memoizedState=Sx(1|t,n,a,u)}function uB(e,t){return mI(516,4,e,t)}function Ex(e,t){return uq(516,4,e,t)}function O3(e,t){return uq(4,2,e,t)}function k3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function D3(e,t,n){return n=n!=null?n.concat([e]):null,uq(4,2,k3.bind(null,t,e),n)}function cq(){}function L3(e,t){var n=oh();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&sq(t,u[1])?u[0]:(n.memoizedState=[e,t],e)}function z3(e,t){var n=oh();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&sq(t,u[1])?u[0]:(e=e(),n.memoizedState=[e,t],e)}function Sve(e,t){var n=pf();th(98>n?98:n,function(){e(!0)}),th(97<n?97:n,function(){var u=Ka.transition;Ka.transition=1;try{e(!1),t()}finally{Ka.transition=u}})}function hq(e,t,n){var u=Aa(),c=_u(e),a={lane:c,action:n,eagerReducer:null,eagerState:null,next:null},x=t.pending;if(x===null?a.next=a:(a.next=x.next,x.next=a),t.pending=a,x=e.alternate,e===fi||x!==null&&x===fi)Cg=wx=!0;else{if(e.lanes===0&&(x===null||x.lanes===0)&&(x=t.lastRenderedReducer,x!==null))try{var S=t.lastRenderedState,A=x(S,n);if(a.eagerReducer=x,a.eagerState=A,Wa(A,S))return}catch(R){}finally{}xu(e,c,u)}}var Ix={readContext:Xa,useCallback:Xn,useContext:Xn,useEffect:Xn,useImperativeHandle:Xn,useLayoutEffect:Xn,useMemo:Xn,useReducer:Xn,useRef:Xn,useState:Xn,useDebugValue:Xn,useDeferredValue:Xn,useTransition:Xn,useMutableSource:Xn,useOpaqueIdentifier:Xn,unstable_isNewReconciler:!1},Tve={readContext:Xa,useCallback:function(e,t){return Jc().memoizedState=[e,t===void 0?null:t],e},useContext:Xa,useEffect:uB,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,mI(4,2,k3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return mI(4,2,e,t)},useMemo:function(e,t){var n=Jc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var u=Jc();return t=n!==void 0?n(t):t,u.memoizedState=u.baseState=t,e=u.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=hq.bind(null,fi,e),[u.memoizedState,e]},useRef:lB,useState:fg,useDebugValue:cq,useDeferredValue:function(e){var t=fg(e),n=t[0],u=t[1];return uB(function(){var c=Ka.transition;Ka.transition=1;try{u(e)}finally{Ka.transition=c}},[e]),n},useTransition:function(){var e=fg(!1),t=e[0];return e=Sve.bind(null,e[1]),lB(e),[e,t]},useMutableSource:function(e,t,n){var u=Jc();return u.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},M3(u,e,t,n)},useOpaqueIdentifier:function(){if(gs){var e=!1,t=vve(function(){throw e||(e=!0,n("r:"+(kE++).toString(36))),Error(Je(355))}),n=fg(t)[1];return(fi.mode&2)===0&&(fi.flags|=516,Sx(5,function(){n("r:"+(kE++).toString(36))},void 0,null)),t}return t="r:"+(kE++).toString(36),fg(t),t},unstable_isNewReconciler:!1},Eve={readContext:Xa,useCallback:L3,useContext:Xa,useEffect:Ex,useImperativeHandle:D3,useLayoutEffect:O3,useMemo:z3,useReducer:hg,useRef:Tx,useState:function(){return hg(fs)},useDebugValue:cq,useDeferredValue:function(e){var t=hg(fs),n=t[0],u=t[1];return Ex(function(){var c=Ka.transition;Ka.transition=1;try{u(e)}finally{Ka.transition=c}},[e]),n},useTransition:function(){var e=hg(fs)[0];return[Tx().current,e]},useMutableSource:R3,useOpaqueIdentifier:function(){return hg(fs)[0]},unstable_isNewReconciler:!1},Ive={readContext:Xa,useCallback:L3,useContext:Xa,useEffect:Ex,useImperativeHandle:D3,useLayoutEffect:O3,useMemo:z3,useReducer:dg,useRef:Tx,useState:function(){return dg(fs)},useDebugValue:cq,useDeferredValue:function(e){var t=dg(fs),n=t[0],u=t[1];return Ex(function(){var c=Ka.transition;Ka.transition=1;try{u(e)}finally{Ka.transition=c}},[e]),n},useTransition:function(){var e=dg(fs)[0];return[Tx().current,e]},useMutableSource:R3,useOpaqueIdentifier:function(){return dg(fs)[0]},unstable_isNewReconciler:!1},qve=nh.ReactCurrentOwner,qo=!1;function Yn(e,t,n,u){t.child=e===null?A3(t,null,n,u):xx(t,e.child,n,u)}function cB(e,t,n,u,c){n=n.render;var a=t.ref;return sf(t,c),u=lq(e,t,n,u,a,c),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,ll(e,t,c)):(t.flags|=1,Yn(e,t,u,c),t.child)}function hB(e,t,n,u,c,a){if(e===null){var x=n.type;return typeof x=="function"&&!vq(x)&&x.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=x,F3(e,t,x,u,c,a)):(e=ox(n.type,null,u,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return x=e.child,(c&a)===0&&(c=x.memoizedProps,n=n.compare,n=n!==null?n:jg,n(c,u)&&e.ref===t.ref)?ll(e,t,a):(t.flags|=1,e=Iu(x,u),e.ref=t.ref,e.return=t,t.child=e)}function F3(e,t,n,u,c,a){if(e!==null&&jg(e.memoizedProps,u)&&e.ref===t.ref)if(qo=!1,(a&c)!==0)(e.flags&16384)!==0&&(qo=!0);else return t.lanes=e.lanes,ll(e,t,a);return gI(e,t,n,u,a)}function FE(e,t,n){var u=t.pendingProps,c=u.children,a=e!==null?e.memoizedState:null;if(u.mode==="hidden"||u.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},X0(t,n);else if((n&1073741824)!==0)t.memoizedState={baseLanes:0},X0(t,a!==null?a.baseLanes:n);else return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},X0(t,e),null;}else a!==null?(u=a.baseLanes|n,t.memoizedState=null):u=n,X0(t,u);return Yn(e,t,c,n),t.child}function N3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function gI(e,t,n,u,c){var a=Qn(n)?eh:En.current;return a=ff(t,a),sf(t,c),n=lq(e,t,n,u,a,c),e!==null&&!qo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,ll(e,t,c)):(t.flags|=1,Yn(e,t,n,c),t.child)}function dB(e,t,n,u,c){if(Qn(n)){var a=!0;tx(t)}else a=!1;if(sf(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),q3(t,n,u),dI(t,n,u,c),u=!0;else if(e===null){var x=t.stateNode,S=t.memoizedProps;x.props=S;var A=x.context,R=n.contextType;typeof R=="object"&&R!==null?R=Xa(R):(R=Qn(n)?eh:En.current,R=ff(t,R));var D=n.getDerivedStateFromProps,L=typeof D=="function"||typeof x.getSnapshotBeforeUpdate=="function";L||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S!==u||A!==R)&&iB(t,x,u,R),uu=!1;var H=t.memoizedState;x.state=H,Vg(t,u,x,c),A=t.memoizedState,S!==u||H!==A||Jn.current||uu?(typeof D=="function"&&(_x(t,n,D,u),A=t.memoizedState),(S=uu||rB(t,n,S,u,H,A,R))?(L||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(t.flags|=4)):(typeof x.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=u,t.memoizedState=A),x.props=u,x.state=A,x.context=R,u=S):(typeof x.componentDidMount=="function"&&(t.flags|=4),u=!1)}else{x=t.stateNode,E3(e,t),S=t.memoizedProps,R=t.type===t.elementType?S:Io(t.type,S),x.props=R,L=t.pendingProps,H=x.context,A=n.contextType,typeof A=="object"&&A!==null?A=Xa(A):(A=Qn(n)?eh:En.current,A=ff(t,A));var ce=n.getDerivedStateFromProps;(D=typeof ce=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(S!==L||H!==A)&&iB(t,x,u,A),uu=!1,H=t.memoizedState,x.state=H,Vg(t,u,x,c);var de=t.memoizedState;S!==L||H!==de||Jn.current||uu?(typeof ce=="function"&&(_x(t,n,ce,u),de=t.memoizedState),(R=uu||rB(t,n,R,u,H,de,A))?(D||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(u,de,A),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(u,de,A)),typeof x.componentDidUpdate=="function"&&(t.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof x.componentDidUpdate!="function"||S===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&H===e.memoizedState||(t.flags|=256),t.memoizedProps=u,t.memoizedState=de),x.props=u,x.state=de,x.context=A,u=R):(typeof x.componentDidUpdate!="function"||S===e.memoizedProps&&H===e.memoizedState||(t.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&H===e.memoizedState||(t.flags|=256),u=!1)}return vI(e,t,n,u,a,c)}function vI(e,t,n,u,c,a){N3(e,t);var x=(t.flags&64)!==0;if(!u&&!x)return c&&YN(t,n,!1),ll(e,t,a);u=t.stateNode,qve.current=t;var S=x&&typeof n.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&x?(t.child=xx(t,e.child,null,a),t.child=xx(t,null,S,a)):Yn(e,t,S,a),t.memoizedState=u.state,c&&YN(t,n,!0),t.child}function fB(e){var t=e.stateNode;t.pendingContext?XN(e,t.pendingContext,t.pendingContext!==t.context):t.context&&XN(e,t.context,!1),fI(e,t.containerInfo)}var K0={dehydrated:null,retryLane:0};function pB(e,t,n){var u=t.pendingProps,c=Yr.current,a=!1,x;return(x=(t.flags&64)!==0)||(x=e!==null&&e.memoizedState===null?!1:(c&2)!==0),x?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||u.fallback===void 0||u.unstable_avoidThisFallback===!0||(c|=1),Jr(Yr,c&1),e===null?(u.fallback!==void 0&&pI(t),e=u.children,c=u.fallback,a?(e=mB(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=K0,e):typeof u.unstable_expectedLoadTime=="number"?(e=mB(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=K0,t.lanes=33554432,e):(n=yq({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?a?(u=vB(e,t,u.children,u.fallback,n),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=K0,u):(n=gB(e,t,u.children,n),t.memoizedState=null,n):a?(u=vB(e,t,u.children,u.fallback,n),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=K0,u):(n=gB(e,t,u.children,n),t.memoizedState=null,n)}function mB(e,t,n,u){var c=e.mode,a=e.child;return t={mode:"hidden",children:t},(c&2)===0&&a!==null?(a.childLanes=0,a.pendingProps=t):a=yq(t,c,0,null),n=hf(n,c,u,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function gB(e,t,n,u){var c=e.child;return e=c.sibling,n=Iu(c,{mode:"visible",children:n}),(t.mode&2)===0&&(n.lanes=u),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function vB(e,t,n,u,c){var a=t.mode,x=e.child;e=x.sibling;var S={mode:"hidden",children:n};return(a&2)===0&&t.child!==x?(n=t.child,n.childLanes=0,n.pendingProps=S,x=n.lastEffect,x!==null?(t.firstEffect=n.firstEffect,t.lastEffect=x,x.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Iu(x,S),e!==null?u=Iu(e,u):(u=hf(u,a,c,null),u.flags|=2),u.return=t,n.return=t,n.sibling=u,t.child=n,u}function yB(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),T3(e.return,t)}function NE(e,t,n,u,c,a){var x=e.memoizedState;x===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:n,tailMode:c,lastEffect:a}:(x.isBackwards=t,x.rendering=null,x.renderingStartTime=0,x.last=u,x.tail=n,x.tailMode=c,x.lastEffect=a)}function _B(e,t,n){var u=t.pendingProps,c=u.revealOrder,a=u.tail;if(Yn(e,t,u.children,n),u=Yr.current,(u&2)!==0)u=u&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&yB(e,n);else if(e.tag===19)yB(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Jr(Yr,u),(t.mode&2)===0)t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&bx(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),NE(t,!1,c,n,a,t.lastEffect);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&bx(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}NE(t,!0,n,null,a,t.lastEffect);break;case"together":NE(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function ll(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Yg|=t.lanes,(n&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,n=Iu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Iu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var B3,yI,j3,U3;B3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};yI=function(){};j3=function(e,t,n,u){var c=e.memoizedProps;if(c!==u){e=t.stateNode,Yc(ms.current);var a=null;switch(n){case"input":c=GE(e,c),u=GE(e,u),a=[];break;case"option":c=HE(e,c),u=HE(e,u),a=[];break;case"select":c=Lr({},c,{value:void 0}),u=Lr({},u,{value:void 0}),a=[];break;case"textarea":c=KE(e,c),u=KE(e,u),a=[];break;default:typeof c.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=fx)}JE(n,u);var x;n=null;for(R in c)if(!u.hasOwnProperty(R)&&c.hasOwnProperty(R)&&c[R]!=null)if(R==="style"){var S=c[R];for(x in S)S.hasOwnProperty(x)&&(n||(n={}),n[x]="")}else R!=="dangerouslySetInnerHTML"&&R!=="children"&&R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&R!=="autoFocus"&&(kg.hasOwnProperty(R)?a||(a=[]):(a=a||[]).push(R,null));for(R in u){var A=u[R];if(S=c!=null?c[R]:void 0,u.hasOwnProperty(R)&&A!==S&&(A!=null||S!=null))if(R==="style"){if(S){for(x in S)!S.hasOwnProperty(x)||A&&A.hasOwnProperty(x)||(n||(n={}),n[x]="");for(x in A)A.hasOwnProperty(x)&&S[x]!==A[x]&&(n||(n={}),n[x]=A[x])}else n||(a||(a=[]),a.push(R,n)),n=A;}else R==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,S=S?S.__html:void 0,A!=null&&S!==A&&(a=a||[]).push(R,A)):R==="children"?typeof A!="string"&&typeof A!="number"||(a=a||[]).push(R,""+A):R!=="suppressContentEditableWarning"&&R!=="suppressHydrationWarning"&&(kg.hasOwnProperty(R)?(A!=null&&R==="onScroll"&&Pr("scroll",e),a||S===A||(a=[])):typeof A=="object"&&A!==null&&A.$$typeof===FI?A.toString():(a=a||[]).push(R,A))}n&&(a=a||[]).push("style",n);var R=a;(t.updateQueue=R)&&(t.flags|=4)}};U3=function(e,t,n,u){n!==u&&(t.flags|=4)};function pg(e,t){if(!gs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var u=null;n!==null;)n.alternate!==null&&(u=n),n=n.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function Pve(e,t,n){var u=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Qn(t.type)&&mx(),null;case 3:return mf(),Ar(Jn),Ar(En),oq(),u=t.stateNode,u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(H0(t)?t.flags|=4:u.hydrate||(t.flags|=256)),yI(t),null;case 5:aq(t);var c=Yc(Zg.current);if(n=t.type,e!==null&&t.stateNode!=null)j3(e,t,n,u,c),e.ref!==t.ref&&(t.flags|=128);else{if(!u){if(t.stateNode===null)throw Error(Je(166));return null}if(e=Yc(ms.current),H0(t)){u=t.stateNode,n=t.type;var a=t.memoizedProps;switch(u[du]=t,u[px]=a,n){case"dialog":Pr("cancel",u),Pr("close",u);break;case"iframe":case"object":case"embed":Pr("load",u);break;case"video":case"audio":for(e=0;e<_g.length;e++)Pr(_g[e],u);break;case"source":Pr("error",u);break;case"img":case"image":case"link":Pr("error",u),Pr("load",u);break;case"details":Pr("toggle",u);break;case"input":bN(u,a),Pr("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!a.multiple},Pr("invalid",u);break;case"textarea":SN(u,a),Pr("invalid",u)}JE(n,a),e=null;for(var x in a)a.hasOwnProperty(x)&&(c=a[x],x==="children"?typeof c=="string"?u.textContent!==c&&(e=["children",c]):typeof c=="number"&&u.textContent!==""+c&&(e=["children",""+c]):kg.hasOwnProperty(x)&&c!=null&&x==="onScroll"&&Pr("scroll",u));switch(n){case"input":N0(u),wN(u,a,!0);break;case"textarea":N0(u),TN(u);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(u.onclick=fx)}u=e,t.updateQueue=u,u!==null&&(t.flags|=4)}else{switch(x=c.nodeType===9?c:c.ownerDocument,e===XE.html&&(e=DB(n)),e===XE.html?n==="script"?(e=x.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=x.createElement(n,{is:u.is}):(e=x.createElement(n),n==="select"&&(x=e,u.multiple?x.multiple=!0:u.size&&(x.size=u.size))):e=x.createElementNS(e,n),e[du]=t,e[px]=u,B3(e,t,!1,!1),t.stateNode=e,x=QE(n,u),n){case"dialog":Pr("cancel",e),Pr("close",e),c=u;break;case"iframe":case"object":case"embed":Pr("load",e),c=u;break;case"video":case"audio":for(c=0;c<_g.length;c++)Pr(_g[c],e);c=u;break;case"source":Pr("error",e),c=u;break;case"img":case"image":case"link":Pr("error",e),Pr("load",e),c=u;break;case"details":Pr("toggle",e),c=u;break;case"input":bN(e,u),c=GE(e,u),Pr("invalid",e);break;case"option":c=HE(e,u);break;case"select":e._wrapperState={wasMultiple:!!u.multiple},c=Lr({},u,{value:void 0}),Pr("invalid",e);break;case"textarea":SN(e,u),c=KE(e,u),Pr("invalid",e);break;default:c=u}JE(n,c);var S=c;for(a in S)if(S.hasOwnProperty(a)){var A=S[a];a==="style"?FB(e,A):a==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&LB(e,A)):a==="children"?typeof A=="string"?(n!=="textarea"||A!=="")&&Dg(e,A):typeof A=="number"&&Dg(e,""+A):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(kg.hasOwnProperty(a)?A!=null&&a==="onScroll"&&Pr("scroll",e):A!=null&&RI(e,a,A,x))}switch(n){case"input":N0(e),wN(e,u,!1);break;case"textarea":N0(e),TN(e);break;case"option":u.value!=null&&e.setAttribute("value",""+wu(u.value));break;case"select":e.multiple=!!u.multiple,a=u.value,a!=null?rf(e,!!u.multiple,a,!1):u.defaultValue!=null&&rf(e,!!u.multiple,u.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=fx)}m3(n,u)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)U3(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(Je(166));n=Yc(Zg.current),Yc(ms.current),H0(t)?(u=t.stateNode,n=t.memoizedProps,u[du]=t,u.nodeValue!==n&&(t.flags|=4)):(u=(n.nodeType===9?n:n.ownerDocument).createTextNode(u),u[du]=t,t.stateNode=u)}return null;case 13:return Ar(Yr),u=t.memoizedState,(t.flags&64)!==0?(t.lanes=n,t):(u=u!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&H0(t):n=e.memoizedState!==null,u&&!n&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Yr.current&1)!==0?on===0&&(on=3):((on===0||on===3)&&(on=4),Ln===null||(Yg&134217727)===0&&(_f&134217727)===0||uf(Ln,Tn))),(u||n)&&(t.flags|=4),null);case 4:return mf(),yI(t),e===null&&d3(t.stateNode.containerInfo),null;case 10:return iq(t),null;case 17:return Qn(t.type)&&mx(),null;case 19:if(Ar(Yr),u=t.memoizedState,u===null)return null;if(a=(t.flags&64)!==0,x=u.rendering,x===null){if(a)pg(u,!1);else{if(on!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(x=bx(e),x!==null){for(t.flags|=64,pg(u,!1),a=x.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),u.lastEffect===null&&(t.firstEffect=null),t.lastEffect=u.lastEffect,u=n,n=t.child;n!==null;)a=n,e=u,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,x=a.alternate,x===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=x.childLanes,a.lanes=x.lanes,a.child=x.child,a.memoizedProps=x.memoizedProps,a.memoizedState=x.memoizedState,a.updateQueue=x.updateQueue,a.type=x.type,e=x.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Jr(Yr,Yr.current&1|2),t.child}e=e.sibling}u.tail!==null&&Sn()>TI&&(t.flags|=64,a=!0,pg(u,!1),t.lanes=33554432)}}else{if(!a)if(e=bx(x),e!==null){if(t.flags|=64,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pg(u,!0),u.tail===null&&u.tailMode==="hidden"&&!x.alternate&&!gs)return t=t.lastEffect=u.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Sn()-u.renderingStartTime>TI&&n!==1073741824&&(t.flags|=64,a=!0,pg(u,!1),t.lanes=33554432);u.isBackwards?(x.sibling=t.child,t.child=x):(n=u.last,n!==null?n.sibling=x:t.child=x,u.last=x)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.lastEffect=t.lastEffect,u.renderingStartTime=Sn(),n.sibling=null,t=Yr.current,Jr(Yr,a?t&1|2:t&1),n):null;case 23:case 24:return gq(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&u.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(Je(156,t.tag))}function Ave(e){switch(e.tag){case 1:Qn(e.type)&&mx();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(mf(),Ar(Jn),Ar(En),oq(),t=e.flags,(t&64)!==0)throw Error(Je(285));return e.flags=t&-4097|64,e;case 5:return aq(e),null;case 13:return Ar(Yr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Ar(Yr),null;case 4:return mf(),null;case 10:return iq(e),null;case 23:case 24:return gq(),null;default:return null}}function dq(e,t){try{var n="",u=t;do n+=uge(u),u=u.return;while(u);var c=n}catch(a){c=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:c}}function _I(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Cve=typeof WeakMap=="function"?WeakMap:Map;function $3(e,t,n){n=vu(-1,n),n.tag=3,n.payload={element:null};var u=t.value;return n.callback=function(){Px||(Px=!0,EI=u),_I(e,t)},n}function V3(e,t,n){n=vu(-1,n),n.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var c=t.value;n.payload=function(){return _I(e,t),u(c)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){typeof u!="function"&&(ps===null?ps=new Set([this]):ps.add(this),_I(e,t));var x=t.stack;this.componentDidCatch(t.value,{componentStack:x!==null?x:""})}),n}var Mve=typeof WeakSet=="function"?WeakSet:Set;function xB(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){bu(e,n)}else t.current=null}function Rve(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,u=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:Io(t.type,n),u),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&QI(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Je(163))}function Ove(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var u=e.create;e.destroy=u()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;u=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(Q3(n,e),jve(n,e)),e=u}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(u=n.elementType===n.type?t.memoizedProps:Io(n.type,t.memoizedProps),e.componentDidUpdate(u,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&tB(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}tB(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&m3(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&HB(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Je(163))}function bB(e,t){for(var n=e;;){if(n.tag===5){var u=n.stateNode;if(t)u=u.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{u=n.stateNode;var c=n.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=zB("display",c)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function wB(e,t){if(Qc&&typeof Qc.onCommitFiberUnmount=="function")try{Qc.onCommitFiberUnmount(eq,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var u=n,c=u.destroy;if(u=u.tag,c!==void 0)if((u&4)!==0)Q3(t,n);else{u=t;try{c()}catch(a){bu(u,a)}}n=n.next}while(n!==e)}break;case 1:if(xB(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){bu(t,a)}break;case 5:xB(t);break;case 4:G3(e,t)}}function SB(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function TB(e){return e.tag===5||e.tag===3||e.tag===4}function EB(e){e:{for(var t=e.return;t!==null;){if(TB(t))break e;t=t.return}throw Error(Je(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var u=!1;break;case 3:t=t.containerInfo,u=!0;break;case 4:t=t.containerInfo,u=!0;break;default:throw Error(Je(161))}n.flags&16&&(Dg(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||TB(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}u?xI(e,n,t):bI(e,n,t)}function xI(e,t,n){var u=e.tag,c=u===5||u===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=fx));else if(u!==4&&(e=e.child,e!==null))for(xI(e,t,n),e=e.sibling;e!==null;)xI(e,t,n),e=e.sibling}function bI(e,t,n){var u=e.tag,c=u===5||u===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(bI(e,t,n),e=e.sibling;e!==null;)bI(e,t,n),e=e.sibling}function G3(e,t){for(var n=t,u=!1,c,a;;){if(!u){u=n.return;e:for(;;){if(u===null)throw Error(Je(160));switch(c=u.stateNode,u.tag){case 5:a=!1;break e;case 3:c=c.containerInfo,a=!0;break e;case 4:c=c.containerInfo,a=!0;break e}u=u.return}u=!0}if(n.tag===5||n.tag===6){e:for(var x=e,S=n,A=S;;)if(wB(x,A),A.child!==null&&A.tag!==4)A.child.return=A,A=A.child;else{if(A===S)break e;for(;A.sibling===null;){if(A.return===null||A.return===S)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}a?(x=c,S=n.stateNode,x.nodeType===8?x.parentNode.removeChild(S):x.removeChild(S)):c.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){c=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if(wB(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(u=!1)}n.sibling.return=n.return,n=n.sibling}}function BE(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var u=n=n.next;do(u.tag&3)===3&&(e=u.destroy,u.destroy=void 0,e!==void 0&&e()),u=u.next;while(u!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){u=t.memoizedProps;var c=e!==null?e.memoizedProps:u;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(n[px]=u,e==="input"&&u.type==="radio"&&u.name!=null&&OB(n,u),QE(e,c),t=QE(e,u),c=0;c<a.length;c+=2){var x=a[c],S=a[c+1];x==="style"?FB(n,S):x==="dangerouslySetInnerHTML"?LB(n,S):x==="children"?Dg(n,S):RI(n,x,S,t)}switch(e){case"input":ZE(n,u);break;case"textarea":kB(n,u);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!u.multiple,a=u.value,a!=null?rf(n,!!u.multiple,a,!1):e!==!!u.multiple&&(u.defaultValue!=null?rf(n,!!u.multiple,u.defaultValue,!0):rf(n,!!u.multiple,u.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(Je(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,HB(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(mq=Sn(),bB(t.child,!0)),IB(t);return;case 19:IB(t);return;case 17:return;case 23:case 24:bB(t,t.memoizedState!==null);return}throw Error(Je(163))}function IB(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Mve),t.forEach(function(u){var c=Vve.bind(null,e,u);n.has(u)||(n.add(u),u.then(c,c))})}}function kve(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var Dve=Math.ceil,qx=nh.ReactCurrentDispatcher,fq=nh.ReactCurrentOwner,Ot=0,Ln=null,Oi=null,Tn=0,rh=0,wI=qu(0),on=0,jx=null,yf=0,Yg=0,_f=0,pq=0,SI=null,mq=0,TI=1/0;function xf(){TI=Sn()+500}var ht=null,Px=!1,EI=null,ps=null,Eu=!1,Mg=null,xg=90,II=[],qI=[],ul=null,Rg=0,PI=null,ix=-1,ol=0,nx=0,Og=null,ax=!1;function Aa(){return(Ot&48)!==0?Sn():ix!==-1?ix:ix=Sn()}function _u(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return pf()===99?1:2;if(ol===0&&(ol=yf),wve.transition!==0){nx!==0&&(nx=SI!==null?SI.pendingLanes:0),e=ol;var t=4186112&~nx;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=pf(),(Ot&4)!==0&&e===98?e=hx(12,ol):(e=Ege(e),e=hx(e,ol)),e}function xu(e,t,n){if(50<Rg)throw Rg=0,PI=null,Error(Je(185));if(e=Ux(e,t),e===null)return null;kx(e,t,n),e===Ln&&(_f|=t,on===4&&uf(e,Tn));var u=pf();t===1?(Ot&8)!==0&&(Ot&48)===0?AI(e):(Ya(e,n),Ot===0&&(xf(),vs())):((Ot&4)===0||u!==98&&u!==99||(ul===null?ul=new Set([e]):ul.add(e)),Ya(e,n)),SI=e}function Ux(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function Ya(e,t){for(var n=e.callbackNode,u=e.suspendedLanes,c=e.pingedLanes,a=e.expirationTimes,x=e.pendingLanes;0<x;){var S=31-Su(x),A=1<<S,R=a[S];if(R===-1){if((A&u)===0||(A&c)!==0){R=t,Wd(A);var D=xr;a[S]=10<=D?R+250:6<=D?R+5e3:-1}}else R<=t&&(e.expiredLanes|=A);x&=~A}if(u=Ng(e,e===Ln?Tn:0),t=xr,u===0)n!==null&&(n!==DE&&cI(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==DE&&cI(n)}t===15?(n=AI.bind(null,e),al===null?(al=[n],rx=tq(Nx,S3)):al.push(n),n=DE):t===14?n=$g(99,AI.bind(null,e)):(n=Ige(t),n=$g(n,Z3.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function Z3(e){if(ix=-1,nx=ol=0,(Ot&48)!==0)throw Error(Je(327));var t=e.callbackNode;if(Pu()&&e.callbackNode!==t)return null;var n=Ng(e,e===Ln?Tn:0);if(n===0)return null;var u=n,c=Ot;Ot|=16;var a=X3();(Ln!==e||Tn!==u)&&(xf(),cf(e,u));do try{Fve();break}catch(S){K3(e,S)}while(!0);if(rq(),qx.current=a,Ot=c,Oi!==null?u=0:(Ln=null,Tn=0,u=on),(yf&_f)!==0)cf(e,0);else if(u!==0){if(u===2&&(Ot|=64,e.hydrate&&(e.hydrate=!1,QI(e.containerInfo)),n=t3(e),n!==0&&(u=bg(e,n))),u===1)throw t=jx,cf(e,0),uf(e,n),Ya(e,Sn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,u){case 0:case 1:throw Error(Je(345));case 2:Wc(e);break;case 3:if(uf(e,n),(n&62914560)===n&&(u=mq+500-Sn(),10<u)){if(Ng(e,0)!==0)break;if(c=e.suspendedLanes,(c&n)!==n){Aa(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=WN(Wc.bind(null,e),u);break}Wc(e);break;case 4:if(uf(e,n),(n&4186112)===n)break;for(u=e.eventTimes,c=-1;0<n;){var x=31-Su(n);a=1<<x,x=u[x],x>c&&(c=x),n&=~a}if(n=c,n=Sn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Dve(n/1960))-n,10<n){e.timeoutHandle=WN(Wc.bind(null,e),n);break}Wc(e);break;case 5:Wc(e);break;default:throw Error(Je(329))}}return Ya(e,Sn()),e.callbackNode===t?Z3.bind(null,e):null}function uf(e,t){for(t&=~pq,t&=~_f,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Su(t),u=1<<n;e[n]=-1,t&=~u}}function AI(e){if((Ot&48)!==0)throw Error(Je(327));if(Pu(),e===Ln&&(e.expiredLanes&Tn)!==0){var t=Tn,n=bg(e,t);(yf&_f)!==0&&(t=Ng(e,t),n=bg(e,t))}else t=Ng(e,0),n=bg(e,t);if(e.tag!==0&&n===2&&(Ot|=64,e.hydrate&&(e.hydrate=!1,QI(e.containerInfo)),t=t3(e),t!==0&&(n=bg(e,t))),n===1)throw n=jx,cf(e,0),uf(e,t),Ya(e,Sn()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Wc(e),Ya(e,Sn()),null}function Lve(){if(ul!==null){var e=ul;ul=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Ya(t,Sn())})}vs()}function W3(e,t){var n=Ot;Ot|=1;try{return e(t)}finally{Ot=n,Ot===0&&(xf(),vs())}}function H3(e,t){var n=Ot;Ot&=-2,Ot|=8;try{return e(t)}finally{Ot=n,Ot===0&&(xf(),vs())}}function X0(e,t){Jr(wI,rh),rh|=t,yf|=t}function gq(){rh=wI.current,Ar(wI)}function cf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,gve(n)),Oi!==null)for(n=Oi.return;n!==null;){var u=n;switch(u.tag){case 1:u=u.type.childContextTypes,u!=null&&mx();break;case 3:mf(),Ar(Jn),Ar(En),oq();break;case 5:aq(u);break;case 4:mf();break;case 13:Ar(Yr);break;case 19:Ar(Yr);break;case 10:iq(u);break;case 23:case 24:gq()}n=n.return}Ln=e,Oi=Iu(e.current,null),Tn=rh=yf=t,on=0,jx=null,pq=_f=Yg=0}function K3(e,t){do{var n=Oi;try{if(rq(),Ag.current=Ix,wx){for(var u=fi.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}wx=!1}if(Wg=0,an=wn=fi=null,Cg=!1,fq.current=null,n===null||n.return===null){on=1,jx=t,Oi=null;break}e:{var a=e,x=n.return,S=n,A=t;if(t=Tn,S.flags|=2048,S.firstEffect=S.lastEffect=null,A!==null&&typeof A=="object"&&typeof A.then=="function"){var R=A;if((S.mode&2)===0){var D=S.alternate;D?(S.updateQueue=D.updateQueue,S.memoizedState=D.memoizedState,S.lanes=D.lanes):(S.updateQueue=null,S.memoizedState=null)}var L=(Yr.current&1)!==0,H=x;do{var ce;if(ce=H.tag===13){var de=H.memoizedState;if(de!==null)ce=de.dehydrated!==null;else{var ve=H.memoizedProps;ce=ve.fallback===void 0?!1:ve.unstable_avoidThisFallback!==!0?!0:!L}}if(ce){var X=H.updateQueue;if(X===null){var ee=new Set;ee.add(R),H.updateQueue=ee}else X.add(R);if((H.mode&2)===0){if(H.flags|=64,S.flags|=16384,S.flags&=-2981,S.tag===1)if(S.alternate===null)S.tag=17;else{var oe=vu(-1,1);oe.tag=2,yu(S,oe)}S.lanes|=1;break e}A=void 0,S=t;var Te=a.pingCache;if(Te===null?(Te=a.pingCache=new Cve,A=new Set,Te.set(R,A)):(A=Te.get(R),A===void 0&&(A=new Set,Te.set(R,A))),!A.has(S)){A.add(S);var Ae=$ve.bind(null,a,R,S);R.then(Ae,Ae)}H.flags|=4096,H.lanes=t;break e}H=H.return}while(H!==null);A=Error((tf(S.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}on!==5&&(on=2),A=dq(A,S),H=x;do{switch(H.tag){case 3:a=A,H.flags|=4096,t&=-t,H.lanes|=t;var it=$3(H,a,t);eB(H,it);break e;case 1:a=A;var Ge=H.type,nt=H.stateNode;if((H.flags&64)===0&&(typeof Ge.getDerivedStateFromError=="function"||nt!==null&&typeof nt.componentDidCatch=="function"&&(ps===null||!ps.has(nt)))){H.flags|=4096,t&=-t,H.lanes|=t;var dt=V3(H,a,t);eB(H,dt);break e}}H=H.return}while(H!==null)}J3(n)}catch(gt){t=gt,Oi===n&&n!==null&&(Oi=n=n.return);continue}break}while(!0)}function X3(){var e=qx.current;return qx.current=Ix,e===null?Ix:e}function bg(e,t){var n=Ot;Ot|=16;var u=X3();Ln===e&&Tn===t||cf(e,t);do try{zve();break}catch(c){K3(e,c)}while(!0);if(rq(),Ot=n,qx.current=u,Oi!==null)throw Error(Je(261));return Ln=null,Tn=0,on}function zve(){for(;Oi!==null;)Y3(Oi)}function Fve(){for(;Oi!==null&&!_ve();)Y3(Oi)}function Y3(e){var t=ej(e.alternate,e,rh);e.memoizedProps=e.pendingProps,t===null?J3(e):Oi=t,fq.current=null}function J3(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&2048)===0){if(n=Pve(n,t,rh),n!==null){Oi=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||(rh&1073741824)!==0||(n.mode&4)===0){for(var u=0,c=n.child;c!==null;)u|=c.lanes|c.childLanes,c=c.sibling;n.childLanes=u}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(n=Ave(t),n!==null){n.flags&=2047,Oi=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Oi=t;return}Oi=t=e}while(t!==null);on===0&&(on=5)}function Wc(e){var t=pf();return th(99,Nve.bind(null,e,t)),null}function Nve(e,t){do Pu();while(Mg!==null);if((Ot&48)!==0)throw Error(Je(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Je(177));e.callbackNode=null;var u=n.lanes|n.childLanes,c=u,a=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var x=e.eventTimes,S=e.expirationTimes;0<a;){var A=31-Su(a),R=1<<A;c[A]=0,x[A]=-1,S[A]=-1,a&=~R}if(ul!==null&&(u&24)===0&&ul.has(e)&&ul.delete(e),e===Ln&&(Oi=Ln=null,Tn=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,u=n.firstEffect):u=n:u=n.firstEffect,u!==null){if(c=Ot,Ot|=32,fq.current=null,RE=J0,x=jN(),aI(x)){if("selectionStart"in x)S={start:x.selectionStart,end:x.selectionEnd};else e:if(S=(S=x.ownerDocument)&&S.defaultView||window,(R=S.getSelection&&S.getSelection())&&R.rangeCount!==0){S=R.anchorNode,a=R.anchorOffset,A=R.focusNode,R=R.focusOffset;try{S.nodeType,A.nodeType}catch(gt){S=null;break e}var D=0,L=-1,H=-1,ce=0,de=0,ve=x,X=null;t:for(;;){for(var ee;ve!==S||a!==0&&ve.nodeType!==3||(L=D+a),ve!==A||R!==0&&ve.nodeType!==3||(H=D+R),ve.nodeType===3&&(D+=ve.nodeValue.length),(ee=ve.firstChild)!==null;)X=ve,ve=ee;for(;;){if(ve===x)break t;if(X===S&&++ce===a&&(L=D),X===A&&++de===R&&(H=D),(ee=ve.nextSibling)!==null)break;ve=X,X=ve.parentNode}ve=ee}S=L===-1||H===-1?null:{start:L,end:H}}else S=null;S=S||{start:0,end:0}}else S=null;OE={focusedElem:x,selectionRange:S},J0=!1,Og=null,ax=!1,ht=u;do try{Bve()}catch(gt){if(ht===null)throw Error(Je(330));bu(ht,gt),ht=ht.nextEffect}while(ht!==null);Og=null,ht=u;do try{for(x=e;ht!==null;){var oe=ht.flags;if(oe&16&&Dg(ht.stateNode,""),oe&128){var Te=ht.alternate;if(Te!==null){var Ae=Te.ref;Ae!==null&&(typeof Ae=="function"?Ae(null):Ae.current=null)}}switch(oe&1038){case 2:EB(ht),ht.flags&=-3;break;case 6:EB(ht),ht.flags&=-3,BE(ht.alternate,ht);break;case 1024:ht.flags&=-1025;break;case 1028:ht.flags&=-1025,BE(ht.alternate,ht);break;case 4:BE(ht.alternate,ht);break;case 8:S=ht,G3(x,S);var it=S.alternate;SB(S),it!==null&&SB(it)}ht=ht.nextEffect}}catch(gt){if(ht===null)throw Error(Je(330));bu(ht,gt),ht=ht.nextEffect}while(ht!==null);if(Ae=OE,Te=jN(),oe=Ae.focusedElem,x=Ae.selectionRange,Te!==oe&&oe&&oe.ownerDocument&&u3(oe.ownerDocument.documentElement,oe)){for(x!==null&&aI(oe)&&(Te=x.start,Ae=x.end,Ae===void 0&&(Ae=Te),"selectionStart"in oe?(oe.selectionStart=Te,oe.selectionEnd=Math.min(Ae,oe.value.length)):(Ae=(Te=oe.ownerDocument||document)&&Te.defaultView||window,Ae.getSelection&&(Ae=Ae.getSelection(),S=oe.textContent.length,it=Math.min(x.start,S),x=x.end===void 0?it:Math.min(x.end,S),!Ae.extend&&it>x&&(S=x,x=it,it=S),S=BN(oe,it),a=BN(oe,x),S&&a&&(Ae.rangeCount!==1||Ae.anchorNode!==S.node||Ae.anchorOffset!==S.offset||Ae.focusNode!==a.node||Ae.focusOffset!==a.offset)&&(Te=Te.createRange(),Te.setStart(S.node,S.offset),Ae.removeAllRanges(),it>x?(Ae.addRange(Te),Ae.extend(a.node,a.offset)):(Te.setEnd(a.node,a.offset),Ae.addRange(Te)))))),Te=[],Ae=oe;Ae=Ae.parentNode;)Ae.nodeType===1&&Te.push({element:Ae,left:Ae.scrollLeft,top:Ae.scrollTop});for(typeof oe.focus=="function"&&oe.focus(),oe=0;oe<Te.length;oe++)Ae=Te[oe],Ae.element.scrollLeft=Ae.left,Ae.element.scrollTop=Ae.top}J0=!!RE,OE=RE=null,e.current=n,ht=u;do try{for(oe=e;ht!==null;){var Ge=ht.flags;if(Ge&36&&Ove(oe,ht.alternate,ht),Ge&128){Te=void 0;var nt=ht.ref;if(nt!==null){var dt=ht.stateNode;switch(ht.tag){case 5:Te=dt;break;default:Te=dt}typeof nt=="function"?nt(Te):nt.current=Te}}ht=ht.nextEffect}}catch(gt){if(ht===null)throw Error(Je(330));bu(ht,gt),ht=ht.nextEffect}while(ht!==null);ht=null,bve(),Ot=c}else e.current=n;if(Eu)Eu=!1,Mg=e,xg=t;else for(ht=u;ht!==null;)t=ht.nextEffect,ht.nextEffect=null,ht.flags&8&&(Ge=ht,Ge.sibling=null,Ge.stateNode=null),ht=t;if(u=e.pendingLanes,u===0&&(ps=null),u===1?e===PI?Rg++:(Rg=0,PI=e):Rg=0,n=n.stateNode,Qc&&typeof Qc.onCommitFiberRoot=="function")try{Qc.onCommitFiberRoot(eq,n,void 0,(n.current.flags&64)===64)}catch(gt){}if(Ya(e,Sn()),Px)throw Px=!1,e=EI,EI=null,e;return(Ot&8)!==0||vs(),null}function Bve(){for(;ht!==null;){var e=ht.alternate;ax||Og===null||((ht.flags&8)!==0?qN(ht,Og)&&(ax=!0):ht.tag===13&&kve(e,ht)&&qN(ht,Og)&&(ax=!0));var t=ht.flags;(t&256)!==0&&Rve(e,ht),(t&512)===0||Eu||(Eu=!0,$g(97,function(){return Pu(),null})),ht=ht.nextEffect}}function Pu(){if(xg!==90){var e=97<xg?97:xg;return xg=90,th(e,Uve)}return!1}function jve(e,t){II.push(t,e),Eu||(Eu=!0,$g(97,function(){return Pu(),null}))}function Q3(e,t){qI.push(t,e),Eu||(Eu=!0,$g(97,function(){return Pu(),null}))}function Uve(){if(Mg===null)return!1;var e=Mg;if(Mg=null,(Ot&48)!==0)throw Error(Je(331));var t=Ot;Ot|=32;var n=qI;qI=[];for(var u=0;u<n.length;u+=2){var c=n[u],a=n[u+1],x=c.destroy;if(c.destroy=void 0,typeof x=="function")try{x()}catch(A){if(a===null)throw Error(Je(330));bu(a,A)}}for(n=II,II=[],u=0;u<n.length;u+=2){c=n[u],a=n[u+1];try{var S=c.create;c.destroy=S()}catch(A){if(a===null)throw Error(Je(330));bu(a,A)}}for(S=e.current.firstEffect;S!==null;)e=S.nextEffect,S.nextEffect=null,S.flags&8&&(S.sibling=null,S.stateNode=null),S=e;return Ot=t,vs(),!0}function qB(e,t,n){t=dq(n,t),t=$3(e,t,1),yu(e,t),t=Aa(),e=Ux(e,1),e!==null&&(kx(e,1,t),Ya(e,t))}function bu(e,t){if(e.tag===3)qB(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){qB(n,e,t);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ps===null||!ps.has(u))){e=dq(t,e);var c=V3(n,e,1);if(yu(n,c),c=Aa(),n=Ux(n,1),n!==null)kx(n,1,c),Ya(n,c);else if(typeof u.componentDidCatch=="function"&&(ps===null||!ps.has(u)))try{u.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function $ve(e,t,n){var u=e.pingCache;u!==null&&u.delete(t),t=Aa(),e.pingedLanes|=e.suspendedLanes&n,Ln===e&&(Tn&n)===n&&(on===4||on===3&&(Tn&62914560)===Tn&&500>Sn()-mq?cf(e,0):pq|=n),Ya(e,t)}function Vve(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=pf()===99?1:2:(ol===0&&(ol=yf),t=Hd(62914560&~ol),t===0&&(t=4194304))),n=Aa(),e=Ux(e,t),e!==null&&(kx(e,t,n),Ya(e,n))}var ej;ej=function(e,t,n){var u=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Jn.current)qo=!0;else if((n&u)!==0)qo=(e.flags&16384)!==0;else{switch(qo=!1,t.tag){case 3:fB(t),zE();break;case 5:nB(t);break;case 1:Qn(t.type)&&tx(t);break;case 4:fI(t,t.stateNode.containerInfo);break;case 10:u=t.memoizedProps.value;var c=t.type._context;Jr(gx,c._currentValue),c._currentValue=u;break;case 13:if(t.memoizedState!==null)return(n&t.child.childLanes)!==0?pB(e,t,n):(Jr(Yr,Yr.current&1),t=ll(e,t,n),t!==null?t.sibling:null);Jr(Yr,Yr.current&1);break;case 19:if(u=(n&t.childLanes)!==0,(e.flags&64)!==0){if(u)return _B(e,t,n);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Jr(Yr,Yr.current),u)break;return null;case 23:case 24:return t.lanes=0,FE(e,t,n)}return ll(e,t,n)}}else qo=!1;switch(t.lanes=0,t.tag){case 2:if(u=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=ff(t,En.current),sf(t,n),c=lq(null,t,u,e,c,n),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Qn(u)){var a=!0;tx(t)}else a=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,nq(t);var x=u.getDerivedStateFromProps;typeof x=="function"&&_x(t,u,x,e),c.updater=Bx,t.stateNode=c,c._reactInternals=t,dI(t,u,e,n),t=vI(null,t,u,!0,a,n)}else t.tag=0,Yn(null,t,c,n),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=c._init,c=a(c._payload),t.type=c,a=t.tag=Zve(c),e=Io(c,e),a){case 0:t=gI(null,t,c,e,n);break e;case 1:t=dB(null,t,c,e,n);break e;case 11:t=cB(null,t,c,e,n);break e;case 14:t=hB(null,t,c,Io(c.type,e),u,n);break e}throw Error(Je(306,c,""))}return t;case 0:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Io(u,c),gI(e,t,u,c,n);case 1:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Io(u,c),dB(e,t,u,c,n);case 3:if(fB(t),u=t.updateQueue,e===null||u===null)throw Error(Je(282));if(u=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,E3(e,t),Vg(t,u,null,n),u=t.memoizedState.element,u===c)zE(),t=ll(e,t,n);else{if(c=t.stateNode,(a=c.hydrate)&&(fu=of(t.stateNode.containerInfo.firstChild),sl=t,a=gs=!0),a){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)a=e[c],a._workInProgressVersionPrimary=e[c+1],lf.push(a);for(n=A3(t,null,u,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else Yn(e,t,u,n),zE();t=t.child}return t;case 5:return nB(t),e===null&&pI(t),u=t.type,c=t.pendingProps,a=e!==null?e.memoizedProps:null,x=c.children,lI(u,c)?x=null:a!==null&&lI(u,a)&&(t.flags|=16),N3(e,t),Yn(e,t,x,n),t.child;case 6:return e===null&&pI(t),null;case 13:return pB(e,t,n);case 4:return fI(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=xx(t,null,u,n):Yn(e,t,u,n),t.child;case 11:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Io(u,c),cB(e,t,u,c,n);case 7:return Yn(e,t,t.pendingProps,n),t.child;case 8:return Yn(e,t,t.pendingProps.children,n),t.child;case 12:return Yn(e,t,t.pendingProps.children,n),t.child;case 10:e:{u=t.type._context,c=t.pendingProps,x=t.memoizedProps,a=c.value;var S=t.type._context;if(Jr(gx,S._currentValue),S._currentValue=a,x!==null)if(S=x.value,a=Wa(S,a)?0:(typeof u._calculateChangedBits=="function"?u._calculateChangedBits(S,a):1073741823)|0,a===0){if(x.children===c.children&&!Jn.current){t=ll(e,t,n);break e}}else for(S=t.child,S!==null&&(S.return=t);S!==null;){var A=S.dependencies;if(A!==null){x=S.child;for(var R=A.firstContext;R!==null;){if(R.context===u&&(R.observedBits&a)!==0){S.tag===1&&(R=vu(-1,n&-n),R.tag=2,yu(S,R)),S.lanes|=n,R=S.alternate,R!==null&&(R.lanes|=n),T3(S.return,n),A.lanes|=n;break}R=R.next}}else x=S.tag===10&&S.type===t.type?null:S.child;if(x!==null)x.return=S;else for(x=S;x!==null;){if(x===t){x=null;break}if(S=x.sibling,S!==null){S.return=x.return,x=S;break}x=x.return}S=x}Yn(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps,u=a.children,sf(t,n),c=Xa(c,a.unstable_observedBits),u=u(c),t.flags|=1,Yn(e,t,u,n),t.child;case 14:return c=t.type,a=Io(c,t.pendingProps),a=Io(c.type,a),hB(e,t,c,a,u,n);case 15:return F3(e,t,t.type,t.pendingProps,u,n);case 17:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:Io(u,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Qn(u)?(e=!0,tx(t)):e=!1,sf(t,n),q3(t,u,c),dI(t,u,c,n),vI(null,t,u,!0,e,n);case 19:return _B(e,t,n);case 23:return FE(e,t,n);case 24:return FE(e,t,n)}throw Error(Je(156,t.tag))};function Gve(e,t,n,u){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ha(e,t,n,u){return new Gve(e,t,n,u)}function vq(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zve(e){if(typeof e=="function")return vq(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Mx)return 11;if(e===Rx)return 14}return 2}function Iu(e,t){var n=e.alternate;return n===null?(n=Ha(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ox(e,t,n,u,c,a){var x=2;if(u=e,typeof e=="function")vq(e)&&(x=1);else if(typeof e=="string")x=5;else e:switch(e){case cu:return hf(n.children,c,a,t);case CB:x=8,c|=16;break;case OI:x=8,c|=1;break;case wg:return e=Ha(12,n,t,c|8),e.elementType=wg,e.type=wg,e.lanes=a,e;case Sg:return e=Ha(13,n,t,c),e.type=Sg,e.elementType=Sg,e.lanes=a,e;case sx:return e=Ha(19,n,t,c),e.elementType=sx,e.lanes=a,e;case NI:return yq(n,c,a,t);case VE:return e=Ha(24,n,t,c),e.elementType=VE,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case kI:x=10;break e;case DI:x=9;break e;case Mx:x=11;break e;case Rx:x=14;break e;case LI:x=16,u=null;break e;case zI:x=22;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=Ha(x,n,t,c),t.elementType=e,t.type=u,t.lanes=a,t}function hf(e,t,n,u){return e=Ha(7,e,u,t),e.lanes=n,e}function yq(e,t,n,u){return e=Ha(23,e,u,t),e.elementType=NI,e.lanes=n,e}function jE(e,t,n){return e=Ha(6,e,null,t),e.lanes=n,e}function UE(e,t,n){return t=Ha(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Wve(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=IE(0),this.expirationTimes=IE(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=IE(0),this.mutableSourceEagerHydrationData=null}function Hve(e,t,n){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hc,key:u==null?null:""+u,children:e,containerInfo:t,implementation:n}}function Ax(e,t,n,u){var c=t.current,a=Aa(),x=_u(c);e:if(n){n=n._reactInternals;t:{if(ah(n)!==n||n.tag!==1)throw Error(Je(170));var S=n;do{switch(S.tag){case 3:S=S.stateNode.context;break t;case 1:if(Qn(S.type)){S=S.stateNode.__reactInternalMemoizedMergedChildContext;break t}}S=S.return}while(S!==null);throw Error(Je(171))}if(n.tag===1){var A=n.type;if(Qn(A)){n=v3(n,A,S);break e}}n=S}else n=Tu;return t.context===null?t.context=n:t.pendingContext=n,t=vu(a,x),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),yu(c,t),xu(c,x,a),x}function $E(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function PB(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function _q(e,t){PB(e,t),(e=e.alternate)&&PB(e,t)}function Kve(){return null}function xq(e,t,n){var u=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new Wve(e,t,n!=null&&n.hydrate===!0),t=Ha(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,nq(t),e[vf]=n.current,d3(e.nodeType===8?e.parentNode:e),u)for(e=0;e<u.length;e++){t=u[e];var c=t._getVersion;c=c(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,c]:n.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=n}xq.prototype.render=function(e){Ax(e,this._internalRoot,null,null)};xq.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;Ax(null,e,null,function(){t[vf]=null})};function Jg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Xve(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new xq(e,0,t?{hydrate:!0}:void 0)}function $x(e,t,n,u,c){var a=n._reactRootContainer;if(a){var x=a._internalRoot;if(typeof c=="function"){var S=c;c=function(){var R=$E(x);S.call(R)}}Ax(t,x,e,c)}else{if(a=n._reactRootContainer=Xve(n,u),x=a._internalRoot,typeof c=="function"){var A=c;c=function(){var R=$E(x);A.call(R)}}H3(function(){Ax(t,x,e,c)})}return $E(x)}GB=function(e){if(e.tag===13){var t=Aa();xu(e,4,t),_q(e,4)}};VI=function(e){if(e.tag===13){var t=Aa();xu(e,67108864,t),_q(e,67108864)}};ZB=function(e){if(e.tag===13){var t=Aa(),n=_u(e);xu(e,n,t),_q(e,n)}};WB=function(e,t){return t()};eI=function(e,t,n){switch(t){case"input":if(ZE(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<n.length;t++){var u=n[t];if(u!==e&&u.form===e.form){var c=Fx(u);if(!c)throw Error(Je(90));RB(u),ZE(u,c)}}}break;case"textarea":kB(e,n);break;case"select":t=n.value,t!=null&&rf(e,!!n.multiple,t,!1)}};jI=W3;jB=function(e,t,n,u,c){var a=Ot;Ot|=4;try{return th(98,e.bind(null,t,n,u,c))}finally{Ot=a,Ot===0&&(xf(),vs())}};UI=function(){(Ot&49)===0&&(Lve(),Pu())};UB=function(e,t){var n=Ot;Ot|=2;try{return e(t)}finally{Ot=n,Ot===0&&(xf(),vs())}};function tj(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Jg(t))throw Error(Je(200));return Hve(e,t,null,n)}var Yve={Events:[Kg,Jd,Fx,NB,BB,Pu,{current:!1}]},mg={findFiberByHostInstance:Xc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Jve={bundleType:mg.bundleType,version:mg.version,rendererPackageName:mg.rendererPackageName,rendererConfig:mg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nh.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=VB(e),e===null?null:e.stateNode},findFiberByHostInstance:mg.findFiberByHostInstance||Kve,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(gg=__REACT_DEVTOOLS_GLOBAL_HOOK__,!gg.isDisabled&&gg.supportsFiber))try{eq=gg.inject(Jve),Qc=gg}catch(e){}var gg;Ja.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Yve;Ja.createPortal=tj;Ja.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):Error(Je(268,Object.keys(e)));return e=VB(t),e=e===null?null:e.stateNode,e};Ja.flushSync=function(e,t){var n=Ot;if((n&48)!==0)return e(t);Ot|=1;try{if(e)return th(99,e.bind(null,t))}finally{Ot=n,vs()}};Ja.hydrate=function(e,t,n){if(!Jg(t))throw Error(Je(200));return $x(null,e,t,!0,n)};Ja.render=function(e,t,n){if(!Jg(t))throw Error(Je(200));return $x(null,e,t,!1,n)};Ja.unmountComponentAtNode=function(e){if(!Jg(e))throw Error(Je(40));return e._reactRootContainer?(H3(function(){$x(null,null,e,!1,function(){e._reactRootContainer=null,e[vf]=null})}),!0):!1};Ja.unstable_batchedUpdates=W3;Ja.unstable_createPortal=function(e,t){return tj(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ja.unstable_renderSubtreeIntoContainer=function(e,t,n,u){if(!Jg(n))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return $x(e,t,n,!1,u)};Ja.version="17.0.2"});var aj=P((zvt,nj)=>{"use strict";p();function ij(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(ij)}catch(e){console.error(e)}}ij(),nj.exports=rj()});var Qe=P((bq,oj)=>{"use strict";p();var Qg=function(e){return e&&e.Math===Math&&e};oj.exports=Qg(typeof globalThis=="object"&&globalThis)||Qg(typeof window=="object"&&window)||Qg(typeof self=="object"&&self)||Qg(typeof global=="object"&&global)||Qg(typeof bq=="object"&&bq)||function(){return this}()||Function("return this")()});var Ue=P((Bvt,sj)=>{"use strict";p();sj.exports=function(e){try{return!!e()}catch(t){return!0}}});var pt=P((Uvt,lj)=>{"use strict";p();var Qve=Ue();lj.exports=!Qve(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var bf=P((Vvt,uj)=>{"use strict";p();var eye=Ue();uj.exports=!eye(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var et=P((Zvt,cj)=>{"use strict";p();var tye=bf(),Vx=Function.prototype.call;cj.exports=tye?Vx.bind(Vx):function(){return Vx.apply(Vx,arguments)}});var ev=P(fj=>{"use strict";p();var hj={}.propertyIsEnumerable,dj=Object.getOwnPropertyDescriptor,rye=dj&&!hj.call({1:2},1);fj.f=rye?function(t){var n=dj(this,t);return!!n&&n.enumerable}:hj});var ea=P((Xvt,pj)=>{"use strict";p();pj.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Fe=P((Jvt,vj)=>{"use strict";p();var mj=bf(),gj=Function.prototype,wq=gj.call,iye=mj&&gj.bind.bind(wq,wq);vj.exports=mj?iye:function(e){return function(){return wq.apply(e,arguments)}}});var ln=P((eyt,_j)=>{"use strict";p();var yj=Fe(),nye=yj({}.toString),aye=yj("".slice);_j.exports=function(e){return aye(nye(e),8,-1)}});var hl=P((ryt,xj)=>{"use strict";p();var oye=Fe(),sye=Ue(),lye=ln(),Sq=Object,uye=oye("".split);xj.exports=sye(function(){return!Sq("z").propertyIsEnumerable(0)})?function(e){return lye(e)==="String"?uye(e,""):Sq(e)}:Sq});var ta=P((nyt,bj)=>{"use strict";p();bj.exports=function(e){return e==null}});var vr=P((oyt,wj)=>{"use strict";p();var cye=ta(),hye=TypeError;wj.exports=function(e){if(cye(e))throw new hye("Can't call method on "+e);return e}});var wi=P((lyt,Sj)=>{"use strict";p();var dye=hl(),fye=vr();Sj.exports=function(e){return dye(fye(e))}});var kt=P((cyt,Tj)=>{"use strict";p();var Tq=typeof document=="object"&&document.all;Tj.exports=typeof Tq=="undefined"&&Tq!==void 0?function(e){return typeof e=="function"||e===Tq}:function(e){return typeof e=="function"}});var _t=P((dyt,Ej)=>{"use strict";p();var pye=kt();Ej.exports=function(e){return typeof e=="object"?e!==null:pye(e)}});var wt=P((pyt,Ij)=>{"use strict";p();var Eq=Qe(),mye=kt(),gye=function(e){return mye(e)?e:void 0};Ij.exports=function(e,t){return arguments.length<2?gye(Eq[e]):Eq[e]&&Eq[e][t]}});var un=P((gyt,qj)=>{"use strict";p();var vye=Fe();qj.exports=vye({}.isPrototypeOf)});var Po=P((yyt,Cj)=>{"use strict";p();var yye=Qe(),Pj=yye.navigator,Aj=Pj&&Pj.userAgent;Cj.exports=Aj?String(Aj):""});var Co=P((xyt,Lj)=>{"use strict";p();var Dj=Qe(),Iq=Po(),Mj=Dj.process,Rj=Dj.Deno,Oj=Mj&&Mj.versions||Rj&&Rj.version,kj=Oj&&Oj.v8,Ao,Gx;kj&&(Ao=kj.split("."),Gx=Ao[0]>0&&Ao[0]<4?1:+(Ao[0]+Ao[1]));!Gx&&Iq&&(Ao=Iq.match(/Edge\/(\d+)/),(!Ao||Ao[1]>=74)&&(Ao=Iq.match(/Chrome\/(\d+)/),Ao&&(Gx=+Ao[1])));Lj.exports=Gx});var Au=P((wyt,Fj)=>{"use strict";p();var zj=Co(),_ye=Ue(),xye=Qe(),bye=xye.String;Fj.exports=!!Object.getOwnPropertySymbols&&!_ye(function(){var e=Symbol("symbol detection");return!bye(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&zj&&zj<41})});var qq=P((Tyt,Nj)=>{"use strict";p();var wye=Au();Nj.exports=wye&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var dl=P((Iyt,Bj)=>{"use strict";p();var Sye=wt(),Tye=kt(),Eye=un(),Iye=qq(),qye=Object;Bj.exports=Iye?function(e){return typeof e=="symbol"}:function(e){var t=Sye("Symbol");return Tye(t)&&Eye(t.prototype,qye(e))}});var Cu=P((Pyt,jj)=>{"use strict";p();var Pye=String;jj.exports=function(e){try{return Pye(e)}catch(t){return"Object"}}});var St=P((Cyt,Uj)=>{"use strict";p();var Aye=kt(),Cye=Cu(),Mye=TypeError;Uj.exports=function(e){if(Aye(e))return e;throw new Mye(Cye(e)+" is not a function")}});var Qr=P((Ryt,$j)=>{"use strict";p();var Rye=St(),Oye=ta();$j.exports=function(e,t){var n=e[t];return Oye(n)?void 0:Rye(n)}});var Mq=P((kyt,Vj)=>{"use strict";p();var Pq=et(),Aq=kt(),Cq=_t(),kye=TypeError;Vj.exports=function(e,t){var n,u;if(t==="string"&&Aq(n=e.toString)&&!Cq(u=Pq(n,e))||Aq(n=e.valueOf)&&!Cq(u=Pq(n,e))||t!=="string"&&Aq(n=e.toString)&&!Cq(u=Pq(n,e)))return u;throw new kye("Can't convert object to primitive value")}});var Yt=P((Lyt,Gj)=>{"use strict";p();Gj.exports=!1});var Zx=P((Fyt,Wj)=>{"use strict";p();var Zj=Qe(),Dye=Object.defineProperty;Wj.exports=function(e,t){try{Dye(Zj,e,{value:t,configurable:!0,writable:!0})}catch(n){Zj[e]=t}return t}});var tv=P((Byt,Xj)=>{"use strict";p();var Lye=Yt(),zye=Qe(),Fye=Zx(),Hj="__core-js_shared__",Kj=Xj.exports=zye[Hj]||Fye(Hj,{});(Kj.versions||(Kj.versions=[])).push({version:"3.42.0",mode:Lye?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var fl=P((Uyt,Jj)=>{"use strict";p();var Yj=tv();Jj.exports=function(e,t){return Yj[e]||(Yj[e]=t||{})}});var $t=P((Vyt,Qj)=>{"use strict";p();var Nye=vr(),Bye=Object;Qj.exports=function(e){return Bye(Nye(e))}});var Dt=P((Zyt,e4)=>{"use strict";p();var jye=Fe(),Uye=$t(),$ye=jye({}.hasOwnProperty);e4.exports=Object.hasOwn||function(t,n){return $ye(Uye(t),n)}});var Mu=P((Hyt,t4)=>{"use strict";p();var Vye=Fe(),Gye=0,Zye=Math.random(),Wye=Vye(1 .toString);t4.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Wye(++Gye+Zye,36)}});var xt=P((Xyt,i4)=>{"use strict";p();var Hye=Qe(),Kye=fl(),r4=Dt(),Xye=Mu(),Yye=Au(),Jye=qq(),wf=Hye.Symbol,Rq=Kye("wks"),Qye=Jye?wf.for||wf:wf&&wf.withoutSetter||Xye;i4.exports=function(e){return r4(Rq,e)||(Rq[e]=Yye&&r4(wf,e)?wf[e]:Qye("Symbol."+e)),Rq[e]}});var rv=P((Jyt,o4)=>{"use strict";p();var e_e=et(),n4=_t(),a4=dl(),t_e=Qr(),r_e=Mq(),i_e=xt(),n_e=TypeError,a_e=i_e("toPrimitive");o4.exports=function(e,t){if(!n4(e)||a4(e))return e;var n=t_e(e,a_e),u;if(n){if(t===void 0&&(t="default"),u=e_e(n,e,t),!n4(u)||a4(u))return u;throw new n_e("Can't convert object to primitive value")}return t===void 0&&(t="number"),r_e(e,t)}});var ys=P((e_t,s4)=>{"use strict";p();var o_e=rv(),s_e=dl();s4.exports=function(e){var t=o_e(e,"string");return s_e(t)?t:t+""}});var iv=P((r_t,u4)=>{"use strict";p();var l_e=Qe(),l4=_t(),Oq=l_e.document,u_e=l4(Oq)&&l4(Oq.createElement);u4.exports=function(e){return u_e?Oq.createElement(e):{}}});var kq=P((n_t,c4)=>{"use strict";p();var c_e=pt(),h_e=Ue(),d_e=iv();c4.exports=!c_e&&!h_e(function(){return Object.defineProperty(d_e("div"),"a",{get:function(){return 7}}).a!==7})});var Vi=P(d4=>{"use strict";p();var f_e=pt(),p_e=et(),m_e=ev(),g_e=ea(),v_e=wi(),y_e=ys(),__e=Dt(),x_e=kq(),h4=Object.getOwnPropertyDescriptor;d4.f=f_e?h4:function(t,n){if(t=v_e(t),n=y_e(n),x_e)try{return h4(t,n)}catch(u){}if(__e(t,n))return g_e(!p_e(m_e.f,t,n),t[n])}});var Dq=P((l_t,f4)=>{"use strict";p();var b_e=pt(),w_e=Ue();f4.exports=b_e&&w_e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var rt=P((c_t,p4)=>{"use strict";p();var S_e=_t(),T_e=String,E_e=TypeError;p4.exports=function(e){if(S_e(e))return e;throw new E_e(T_e(e)+" is not an object")}});var gr=P(g4=>{"use strict";p();var I_e=pt(),q_e=kq(),P_e=Dq(),Wx=rt(),m4=ys(),A_e=TypeError,Lq=Object.defineProperty,C_e=Object.getOwnPropertyDescriptor,zq="enumerable",Fq="configurable",Nq="writable";g4.f=I_e?P_e?function(t,n,u){if(Wx(t),n=m4(n),Wx(u),typeof t=="function"&&n==="prototype"&&"value"in u&&Nq in u&&!u[Nq]){var c=C_e(t,n);c&&c[Nq]&&(t[n]=u.value,u={configurable:Fq in u?u[Fq]:c[Fq],enumerable:zq in u?u[zq]:c[zq],writable:!1})}return Lq(t,n,u)}:Lq:function(t,n,u){if(Wx(t),n=m4(n),Wx(u),q_e)try{return Lq(t,n,u)}catch(c){}if("get"in u||"set"in u)throw new A_e("Accessors not supported");return"value"in u&&(t[n]=u.value),t}});var Si=P((p_t,v4)=>{"use strict";p();var M_e=pt(),R_e=gr(),O_e=ea();v4.exports=M_e?function(e,t,n){return R_e.f(e,t,O_e(1,n))}:function(e,t,n){return e[t]=n,e}});var sh=P((g_t,_4)=>{"use strict";p();var Bq=pt(),k_e=Dt(),y4=Function.prototype,D_e=Bq&&Object.getOwnPropertyDescriptor,jq=k_e(y4,"name"),L_e=jq&&function(){}.name==="something",z_e=jq&&(!Bq||Bq&&D_e(y4,"name").configurable);_4.exports={EXISTS:jq,PROPER:L_e,CONFIGURABLE:z_e}});var nv=P((y_t,x4)=>{"use strict";p();var F_e=Fe(),N_e=kt(),Uq=tv(),B_e=F_e(Function.toString);N_e(Uq.inspectSource)||(Uq.inspectSource=function(e){return B_e(e)});x4.exports=Uq.inspectSource});var $q=P((x_t,w4)=>{"use strict";p();var j_e=Qe(),U_e=kt(),b4=j_e.WeakMap;w4.exports=U_e(b4)&&/native code/.test(String(b4))});var av=P((w_t,T4)=>{"use strict";p();var $_e=fl(),V_e=Mu(),S4=$_e("keys");T4.exports=function(e){return S4[e]||(S4[e]=V_e(e))}});var Sf=P((T_t,E4)=>{"use strict";p();E4.exports={}});var rr=P((I_t,P4)=>{"use strict";p();var G_e=$q(),q4=Qe(),Z_e=_t(),W_e=Si(),Vq=Dt(),Gq=tv(),H_e=av(),K_e=Sf(),I4="Object already initialized",Zq=q4.TypeError,X_e=q4.WeakMap,Hx,ov,Kx,Y_e=function(e){return Kx(e)?ov(e):Hx(e,{})},J_e=function(e){return function(t){var n;if(!Z_e(t)||(n=ov(t)).type!==e)throw new Zq("Incompatible receiver, "+e+" required");return n}};G_e||Gq.state?(Mo=Gq.state||(Gq.state=new X_e),Mo.get=Mo.get,Mo.has=Mo.has,Mo.set=Mo.set,Hx=function(e,t){if(Mo.has(e))throw new Zq(I4);return t.facade=e,Mo.set(e,t),t},ov=function(e){return Mo.get(e)||{}},Kx=function(e){return Mo.has(e)}):(lh=H_e("state"),K_e[lh]=!0,Hx=function(e,t){if(Vq(e,lh))throw new Zq(I4);return t.facade=e,W_e(e,lh,t),t},ov=function(e){return Vq(e,lh)?e[lh]:{}},Kx=function(e){return Vq(e,lh)});var Mo,lh;P4.exports={set:Hx,get:ov,has:Kx,enforce:Y_e,getterFor:J_e}});var sv=P((P_t,M4)=>{"use strict";p();var Hq=Fe(),Q_e=Ue(),e0e=kt(),Xx=Dt(),Wq=pt(),t0e=sh().CONFIGURABLE,r0e=nv(),C4=rr(),i0e=C4.enforce,n0e=C4.get,A4=String,Yx=Object.defineProperty,a0e=Hq("".slice),o0e=Hq("".replace),s0e=Hq([].join),l0e=Wq&&!Q_e(function(){return Yx(function(){},"length",{value:8}).length!==8}),u0e=String(String).split("String"),c0e=M4.exports=function(e,t,n){a0e(A4(t),0,7)==="Symbol("&&(t="["+o0e(A4(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!Xx(e,"name")||t0e&&e.name!==t)&&(Wq?Yx(e,"name",{value:t,configurable:!0}):e.name=t),l0e&&n&&Xx(n,"arity")&&e.length!==n.arity&&Yx(e,"length",{value:n.arity});try{n&&Xx(n,"constructor")&&n.constructor?Wq&&Yx(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(c){}var u=i0e(e);return Xx(u,"source")||(u.source=s0e(u0e,typeof t=="string"?t:"")),e};Function.prototype.toString=c0e(function(){return e0e(this)&&n0e(this).source||r0e(this)},"toString")});var or=P((C_t,R4)=>{"use strict";p();var h0e=kt(),d0e=gr(),f0e=sv(),p0e=Zx();R4.exports=function(e,t,n,u){u||(u={});var c=u.enumerable,a=u.name!==void 0?u.name:t;if(h0e(n)&&f0e(n,a,u),u.global)c?e[t]=n:p0e(t,n);else{try{u.unsafe?e[t]&&(c=!0):delete e[t]}catch(x){}c?e[t]=n:d0e.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}});var Kq=P((R_t,O4)=>{"use strict";p();var m0e=Math.ceil,g0e=Math.floor;O4.exports=Math.trunc||function(t){var n=+t;return(n>0?g0e:m0e)(n)}});var br=P((k_t,k4)=>{"use strict";p();var v0e=Kq();k4.exports=function(e){var t=+e;return t!==t||t===0?0:v0e(t)}});var Ro=P((L_t,D4)=>{"use strict";p();var y0e=br(),_0e=Math.max,x0e=Math.min;D4.exports=function(e,t){var n=y0e(e);return n<0?_0e(n+t,0):x0e(n,t)}});var ra=P((F_t,L4)=>{"use strict";p();var b0e=br(),w0e=Math.min;L4.exports=function(e){var t=b0e(e);return t>0?w0e(t,9007199254740991):0}});var Ht=P((B_t,z4)=>{"use strict";p();var S0e=ra();z4.exports=function(e){return S0e(e.length)}});var Tf=P((U_t,N4)=>{"use strict";p();var T0e=wi(),E0e=Ro(),I0e=Ht(),F4=function(e){return function(t,n,u){var c=T0e(t),a=I0e(c);if(a===0)return!e&&-1;var x=E0e(u,a),S;if(e&&n!==n){for(;a>x;)if(S=c[x++],S!==S)return!0}else for(;a>x;x++)if((e||x in c)&&c[x]===n)return e||x||0;return!e&&-1}};N4.exports={includes:F4(!0),indexOf:F4(!1)}});var Yq=P((V_t,j4)=>{"use strict";p();var q0e=Fe(),Xq=Dt(),P0e=wi(),A0e=Tf().indexOf,C0e=Sf(),B4=q0e([].push);j4.exports=function(e,t){var n=P0e(e),u=0,c=[],a;for(a in n)!Xq(C0e,a)&&Xq(n,a)&&B4(c,a);for(;t.length>u;)Xq(n,a=t[u++])&&(~A0e(c,a)||B4(c,a));return c}});var Jx=P((Z_t,U4)=>{"use strict";p();U4.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var Ru=P($4=>{"use strict";p();var M0e=Yq(),R0e=Jx(),O0e=R0e.concat("length","prototype");$4.f=Object.getOwnPropertyNames||function(t){return M0e(t,O0e)}});var lv=P(V4=>{"use strict";p();V4.f=Object.getOwnPropertySymbols});var Qx=P((J_t,G4)=>{"use strict";p();var k0e=wt(),D0e=Fe(),L0e=Ru(),z0e=lv(),F0e=rt(),N0e=D0e([].concat);G4.exports=k0e("Reflect","ownKeys")||function(t){var n=L0e.f(F0e(t)),u=z0e.f;return u?N0e(n,u(t)):n}});var uh=P((e0t,W4)=>{"use strict";p();var Z4=Dt(),B0e=Qx(),j0e=Vi(),U0e=gr();W4.exports=function(e,t,n){for(var u=B0e(t),c=U0e.f,a=j0e.f,x=0;x<u.length;x++){var S=u[x];!Z4(e,S)&&!(n&&Z4(n,S))&&c(e,S,a(t,S))}}});var Ef=P((r0t,H4)=>{"use strict";p();var $0e=Ue(),V0e=kt(),G0e=/#|\.prototype\./,uv=function(e,t){var n=W0e[Z0e(e)];return n===K0e?!0:n===H0e?!1:V0e(t)?$0e(t):!!t},Z0e=uv.normalize=function(e){return String(e).replace(G0e,".").toLowerCase()},W0e=uv.data={},H0e=uv.NATIVE="N",K0e=uv.POLYFILL="P";H4.exports=uv});var K=P((n0t,K4)=>{"use strict";p();var eb=Qe(),X0e=Vi().f,Y0e=Si(),J0e=or(),Q0e=Zx(),exe=uh(),txe=Ef();K4.exports=function(e,t){var n=e.target,u=e.global,c=e.stat,a,x,S,A,R,D;if(u?x=eb:c?x=eb[n]||Q0e(n,{}):x=eb[n]&&eb[n].prototype,x)for(S in t){if(R=t[S],e.dontCallGetSet?(D=X0e(x,S),A=D&&D.value):A=x[S],a=txe(u?S:n+(c?".":"#")+S,e.forced),!a&&A!==void 0){if(typeof R==typeof A)continue;exe(R,A)}(e.sham||A&&A.sham)&&Y0e(R,"sham",!0),J0e(x,S,R,e)}}});var tb=P((o0t,Y4)=>{"use strict";p();var rxe=xt(),ixe=rxe("toStringTag"),X4={};X4[ixe]="z";Y4.exports=String(X4)==="[object z]"});var Fn=P((l0t,J4)=>{"use strict";p();var nxe=tb(),axe=kt(),rb=ln(),oxe=xt(),sxe=oxe("toStringTag"),lxe=Object,uxe=rb(function(){return arguments}())==="Arguments",cxe=function(e,t){try{return e[t]}catch(n){}};J4.exports=nxe?rb:function(e){var t,n,u;return e===void 0?"Undefined":e===null?"Null":typeof(n=cxe(t=lxe(e),sxe))=="string"?n:uxe?rb(t):(u=rb(t))==="Object"&&axe(t.callee)?"Arguments":u}});var It=P((c0t,Q4)=>{"use strict";p();var hxe=Fn(),dxe=String;Q4.exports=function(e){if(hxe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return dxe(e)}});var ch=P((d0t,e5)=>{"use strict";p();var fxe=Yq(),pxe=Jx();e5.exports=Object.keys||function(t){return fxe(t,pxe)}});var ib=P(t5=>{"use strict";p();var mxe=pt(),gxe=Dq(),vxe=gr(),yxe=rt(),_xe=wi(),xxe=ch();t5.f=mxe&&!gxe?Object.defineProperties:function(t,n){yxe(t);for(var u=_xe(n),c=xxe(n),a=c.length,x=0,S;a>x;)vxe.f(t,S=c[x++],u[S]);return t}});var Jq=P((g0t,r5)=>{"use strict";p();var bxe=wt();r5.exports=bxe("document","documentElement")});var ei=P((y0t,u5)=>{"use strict";p();var wxe=rt(),Sxe=ib(),i5=Jx(),Txe=Sf(),Exe=Jq(),Ixe=iv(),qxe=av(),n5=">",a5="<",e2="prototype",t2="script",s5=qxe("IE_PROTO"),Qq=function(){},l5=function(e){return a5+t2+n5+e+a5+"/"+t2+n5},o5=function(e){e.write(l5("")),e.close();var t=e.parentWindow.Object;return e=null,t},Pxe=function(){var e=Ixe("iframe"),t="java"+t2+":",n;return e.style.display="none",Exe.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(l5("document.F=Object")),n.close(),n.F},nb,ab=function(){try{nb=new ActiveXObject("htmlfile")}catch(t){}ab=typeof document!="undefined"?document.domain&&nb?o5(nb):Pxe():o5(nb);for(var e=i5.length;e--;)delete ab[e2][i5[e]];return ab()};Txe[s5]=!0;u5.exports=Object.create||function(t,n){var u;return t!==null?(Qq[e2]=wxe(t),u=new Qq,Qq[e2]=null,u[s5]=t):u=ab(),n===void 0?u:Sxe.f(u,n)}});var ia=P((x0t,c5)=>{"use strict";p();var Axe=Fe();c5.exports=Axe([].slice)});var ob=P((w0t,f5)=>{"use strict";p();var Cxe=ln(),Mxe=wi(),h5=Ru().f,Rxe=ia(),d5=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Oxe=function(e){try{return h5(e)}catch(t){return Rxe(d5)}};f5.exports.f=function(t){return d5&&Cxe(t)==="Window"?Oxe(t):h5(Mxe(t))}});var wr=P((T0t,m5)=>{"use strict";p();var p5=sv(),kxe=gr();m5.exports=function(e,t,n){return n.get&&p5(n.get,t,{getter:!0}),n.set&&p5(n.set,t,{setter:!0}),kxe.f(e,t,n)}});var r2=P(g5=>{"use strict";p();var Dxe=xt();g5.f=Dxe});var sb=P((P0t,v5)=>{"use strict";p();var Lxe=Qe();v5.exports=Lxe});var zr=P((C0t,_5)=>{"use strict";p();var y5=sb(),zxe=Dt(),Fxe=r2(),Nxe=gr().f;_5.exports=function(e){var t=y5.Symbol||(y5.Symbol={});zxe(t,e)||Nxe(t,e,{value:Fxe.f(e)})}});var i2=P((R0t,x5)=>{"use strict";p();var Bxe=et(),jxe=wt(),Uxe=xt(),$xe=or();x5.exports=function(){var e=jxe("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,u=Uxe("toPrimitive");t&&!t[u]&&$xe(t,u,function(c){return Bxe(n,this)},{arity:1})}});var Nn=P((k0t,w5)=>{"use strict";p();var Vxe=gr().f,Gxe=Dt(),Zxe=xt(),b5=Zxe("toStringTag");w5.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Gxe(e,b5)&&Vxe(e,b5,{configurable:!0,value:t})}});var Ou=P((L0t,S5)=>{"use strict";p();var Wxe=ln(),Hxe=Fe();S5.exports=function(e){if(Wxe(e)==="Function")return Hxe(e)}});var dr=P((F0t,E5)=>{"use strict";p();var T5=Ou(),Kxe=St(),Xxe=bf(),Yxe=T5(T5.bind);E5.exports=function(e,t){return Kxe(e),t===void 0?e:Xxe?Yxe(e,t):function(){return e.apply(t,arguments)}}});var Oo=P((B0t,I5)=>{"use strict";p();var Jxe=ln();I5.exports=Array.isArray||function(t){return Jxe(t)==="Array"}});var ko=P((U0t,M5)=>{"use strict";p();var Qxe=Fe(),ebe=Ue(),q5=kt(),tbe=Fn(),rbe=wt(),ibe=nv(),P5=function(){},A5=rbe("Reflect","construct"),n2=/^\s*(?:class|function)\b/,nbe=Qxe(n2.exec),abe=!n2.test(P5),cv=function(t){if(!q5(t))return!1;try{return A5(P5,[],t),!0}catch(n){return!1}},C5=function(t){if(!q5(t))return!1;switch(tbe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return abe||!!nbe(n2,ibe(t))}catch(n){return!0}};C5.sham=!0;M5.exports=!A5||ebe(function(){var e;return cv(cv.call)||!cv(Object)||!cv(function(){e=!0})||e})?C5:cv});var D5=P((V0t,k5)=>{"use strict";p();var R5=Oo(),obe=ko(),sbe=_t(),lbe=xt(),ube=lbe("species"),O5=Array;k5.exports=function(e){var t;return R5(e)&&(t=e.constructor,obe(t)&&(t===O5||R5(t.prototype))?t=void 0:sbe(t)&&(t=t[ube],t===null&&(t=void 0))),t===void 0?O5:t}});var If=P((Z0t,L5)=>{"use strict";p();var cbe=D5();L5.exports=function(e,t){return new(cbe(e))(t===0?0:t)}});var ti=P((H0t,F5)=>{"use strict";p();var hbe=dr(),dbe=Fe(),fbe=hl(),pbe=$t(),mbe=Ht(),gbe=If(),z5=dbe([].push),ku=function(e){var t=e===1,n=e===2,u=e===3,c=e===4,a=e===6,x=e===7,S=e===5||a;return function(A,R,D,L){for(var H=pbe(A),ce=fbe(H),de=mbe(ce),ve=hbe(R,D),X=0,ee=L||gbe,oe=t?ee(A,de):n||x?ee(A,0):void 0,Te,Ae;de>X;X++)if((S||X in ce)&&(Te=ce[X],Ae=ve(Te,X,H),e))if(t)oe[X]=Ae;else if(Ae)switch(e){case 3:return!0;case 5:return Te;case 6:return X;case 2:z5(oe,Te)}else switch(e){case 4:return!1;case 7:z5(oe,Te)}return a?-1:u||c?c:oe}};F5.exports={forEach:ku(0),map:ku(1),filter:ku(2),some:ku(3),every:ku(4),find:ku(5),findIndex:ku(6),filterReject:ku(7)}});var tU=P(()=>{"use strict";p();var lb=K(),fv=Qe(),f2=et(),vbe=Fe(),ybe=Yt(),qf=pt(),Pf=Au(),_be=Ue(),Gi=Dt(),xbe=un(),l2=rt(),ub=wi(),p2=ys(),bbe=It(),u2=ea(),Af=ei(),j5=ch(),wbe=Ru(),U5=ob(),Sbe=lv(),$5=Vi(),V5=gr(),Tbe=ib(),G5=ev(),a2=or(),Ebe=wr(),m2=fl(),Ibe=av(),Z5=Sf(),N5=Mu(),qbe=xt(),Pbe=r2(),Abe=zr(),Cbe=i2(),Mbe=Nn(),W5=rr(),cb=ti().forEach,na=Ibe("hidden"),hb="Symbol",dv="prototype",Rbe=W5.set,B5=W5.getterFor(hb),Qa=Object[dv],hh=fv.Symbol,hv=hh&&hh[dv],Obe=fv.RangeError,kbe=fv.TypeError,o2=fv.QObject,H5=$5.f,dh=V5.f,K5=U5.f,Dbe=G5.f,X5=vbe([].push),pl=m2("symbols"),pv=m2("op-symbols"),Lbe=m2("wks"),c2=!o2||!o2[dv]||!o2[dv].findChild,Y5=function(e,t,n){var u=H5(Qa,t);u&&delete Qa[t],dh(e,t,n),u&&e!==Qa&&dh(Qa,t,u)},h2=qf&&_be(function(){return Af(dh({},"a",{get:function(){return dh(this,"a",{value:7}).a}})).a!==7})?Y5:dh,s2=function(e,t){var n=pl[e]=Af(hv);return Rbe(n,{type:hb,tag:e,description:t}),qf||(n.description=t),n},db=function(t,n,u){t===Qa&&db(pv,n,u),l2(t);var c=p2(n);return l2(u),Gi(pl,c)?(u.enumerable?(Gi(t,na)&&t[na][c]&&(t[na][c]=!1),u=Af(u,{enumerable:u2(0,!1)})):(Gi(t,na)||dh(t,na,u2(1,Af(null))),t[na][c]=!0),h2(t,c,u)):dh(t,c,u)},g2=function(t,n){l2(t);var u=ub(n),c=j5(u).concat(eU(u));return cb(c,function(a){(!qf||f2(d2,u,a))&&db(t,a,u[a])}),t},zbe=function(t,n){return n===void 0?Af(t):g2(Af(t),n)},d2=function(t){var n=p2(t),u=f2(Dbe,this,n);return this===Qa&&Gi(pl,n)&&!Gi(pv,n)?!1:u||!Gi(this,n)||!Gi(pl,n)||Gi(this,na)&&this[na][n]?u:!0},J5=function(t,n){var u=ub(t),c=p2(n);if(!(u===Qa&&Gi(pl,c)&&!Gi(pv,c))){var a=H5(u,c);return a&&Gi(pl,c)&&!(Gi(u,na)&&u[na][c])&&(a.enumerable=!0),a}},Q5=function(t){var n=K5(ub(t)),u=[];return cb(n,function(c){!Gi(pl,c)&&!Gi(Z5,c)&&X5(u,c)}),u},eU=function(e){var t=e===Qa,n=K5(t?pv:ub(e)),u=[];return cb(n,function(c){Gi(pl,c)&&(!t||Gi(Qa,c))&&X5(u,pl[c])}),u};Pf||(hh=function(){if(xbe(hv,this))throw new kbe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:bbe(arguments[0]),n=N5(t),u=function(c){var a=this===void 0?fv:this;a===Qa&&f2(u,pv,c),Gi(a,na)&&Gi(a[na],n)&&(a[na][n]=!1);var x=u2(1,c);try{h2(a,n,x)}catch(S){if(!(S instanceof Obe))throw S;Y5(a,n,x)}};return qf&&c2&&h2(Qa,n,{configurable:!0,set:u}),s2(n,t)},hv=hh[dv],a2(hv,"toString",function(){return B5(this).tag}),a2(hh,"withoutSetter",function(e){return s2(N5(e),e)}),G5.f=d2,V5.f=db,Tbe.f=g2,$5.f=J5,wbe.f=U5.f=Q5,Sbe.f=eU,Pbe.f=function(e){return s2(qbe(e),e)},qf&&(Ebe(hv,"description",{configurable:!0,get:function(){return B5(this).description}}),ybe||a2(Qa,"propertyIsEnumerable",d2,{unsafe:!0})));lb({global:!0,constructor:!0,wrap:!0,forced:!Pf,sham:!Pf},{Symbol:hh});cb(j5(Lbe),function(e){Abe(e)});lb({target:hb,stat:!0,forced:!Pf},{useSetter:function(){c2=!0},useSimple:function(){c2=!1}});lb({target:"Object",stat:!0,forced:!Pf,sham:!qf},{create:zbe,defineProperty:db,defineProperties:g2,getOwnPropertyDescriptor:J5});lb({target:"Object",stat:!0,forced:!Pf},{getOwnPropertyNames:Q5});Cbe();Mbe(hh,hb);Z5[na]=!0});var v2=P((Q0t,rU)=>{"use strict";p();var Fbe=Au();rU.exports=Fbe&&!!Symbol.for&&!!Symbol.keyFor});var nU=P(()=>{"use strict";p();var Nbe=K(),Bbe=wt(),jbe=Dt(),Ube=It(),iU=fl(),$be=v2(),y2=iU("string-to-symbol-registry"),Vbe=iU("symbol-to-string-registry");Nbe({target:"Symbol",stat:!0,forced:!$be},{for:function(e){var t=Ube(e);if(jbe(y2,t))return y2[t];var n=Bbe("Symbol")(t);return y2[t]=n,Vbe[n]=t,n}})});var oU=P(()=>{"use strict";p();var Gbe=K(),Zbe=Dt(),Wbe=dl(),Hbe=Cu(),Kbe=fl(),Xbe=v2(),aU=Kbe("symbol-to-string-registry");Gbe({target:"Symbol",stat:!0,forced:!Xbe},{keyFor:function(t){if(!Wbe(t))throw new TypeError(Hbe(t)+" is not a symbol");if(Zbe(aU,t))return aU[t]}})});var cn=P((sxt,cU)=>{"use strict";p();var Ybe=bf(),uU=Function.prototype,sU=uU.apply,lU=uU.call;cU.exports=typeof Reflect=="object"&&Reflect.apply||(Ybe?lU.bind(sU):function(){return lU.apply(sU,arguments)})});var _2=P((uxt,pU)=>{"use strict";p();var Jbe=Fe(),hU=Oo(),Qbe=kt(),dU=ln(),e1e=It(),fU=Jbe([].push);pU.exports=function(e){if(Qbe(e))return e;if(hU(e)){for(var t=e.length,n=[],u=0;u<t;u++){var c=e[u];typeof c=="string"?fU(n,c):(typeof c=="number"||dU(c)==="Number"||dU(c)==="String")&&fU(n,e1e(c))}var a=n.length,x=!0;return function(S,A){if(x)return x=!1,A;if(hU(this))return A;for(var R=0;R<a;R++)if(n[R]===S)return A}}}});var x2=P(()=>{"use strict";p();var t1e=K(),wU=wt(),SU=cn(),r1e=et(),mv=Fe(),TU=Ue(),mU=kt(),gU=dl(),EU=ia(),i1e=_2(),n1e=Au(),a1e=String,Du=wU("JSON","stringify"),fb=mv(/./.exec),vU=mv("".charAt),o1e=mv("".charCodeAt),s1e=mv("".replace),l1e=mv(1 .toString),u1e=/[\uD800-\uDFFF]/g,yU=/^[\uD800-\uDBFF]$/,_U=/^[\uDC00-\uDFFF]$/,xU=!n1e||TU(function(){var e=wU("Symbol")("stringify detection");return Du([e])!=="[null]"||Du({a:e})!=="{}"||Du(Object(e))!=="{}"}),bU=TU(function(){return Du("\uDF06\uD834")!=="\"\\udf06\\ud834\""||Du("\uDEAD")!=="\"\\udead\""}),c1e=function(e,t){var n=EU(arguments),u=i1e(t);if(!(!mU(u)&&(e===void 0||gU(e))))return n[1]=function(c,a){if(mU(u)&&(a=r1e(u,this,a1e(c),a)),!gU(a))return a},SU(Du,null,n)},h1e=function(e,t,n){var u=vU(n,t-1),c=vU(n,t+1);return fb(yU,e)&&!fb(_U,c)||fb(_U,e)&&!fb(yU,u)?"\\u"+l1e(o1e(e,0),16):e};Du&&t1e({target:"JSON",stat:!0,arity:3,forced:xU||bU},{stringify:function(t,n,u){var c=EU(arguments),a=SU(xU?c1e:Du,null,c);return bU&&typeof a=="string"?s1e(a,u1e,h1e):a}})});var qU=P(()=>{"use strict";p();var d1e=K(),f1e=Au(),p1e=Ue(),IU=lv(),m1e=$t(),g1e=!f1e||p1e(function(){IU.f(1)});d1e({target:"Object",stat:!0,forced:g1e},{getOwnPropertySymbols:function(t){var n=IU.f;return n?n(m1e(t)):[]}})});var PU=P(()=>{"use strict";p();tU();nU();oU();x2();qU()});var DU=P(()=>{"use strict";p();var v1e=K(),y1e=pt(),_1e=Qe(),pb=Fe(),x1e=Dt(),b1e=kt(),w1e=un(),S1e=It(),T1e=wr(),E1e=uh(),ml=_1e.Symbol,fh=ml&&ml.prototype;y1e&&b1e(ml)&&(!("description"in fh)||ml().description!==void 0)&&(b2={},gv=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:S1e(arguments[0]),n=w1e(fh,this)?new ml(t):t===void 0?ml():ml(t);return t===""&&(b2[n]=!0),n},E1e(gv,ml),gv.prototype=fh,fh.constructor=gv,AU=String(ml("description detection"))==="Symbol(description detection)",CU=pb(fh.valueOf),MU=pb(fh.toString),RU=/^Symbol\((.*)\)[^)]+$/,OU=pb("".replace),kU=pb("".slice),T1e(fh,"description",{configurable:!0,get:function(){var t=CU(this);if(x1e(b2,t))return"";var n=MU(t),u=AU?kU(n,7,-1):OU(n,RU,"$1");return u===""?void 0:u}}),v1e({global:!0,constructor:!0,forced:!0},{Symbol:gv}));var b2,gv,AU,CU,MU,RU,OU,kU});var LU=P(()=>{"use strict";p();var I1e=zr();I1e("asyncIterator")});var zU=P(()=>{"use strict";p();var q1e=zr();q1e("hasInstance")});var FU=P(()=>{"use strict";p();var P1e=zr();P1e("isConcatSpreadable")});var NU=P(()=>{"use strict";p();var A1e=zr();A1e("iterator")});var BU=P(()=>{"use strict";p();var C1e=zr();C1e("match")});var jU=P(()=>{"use strict";p();var M1e=zr();M1e("matchAll")});var UU=P(()=>{"use strict";p();var R1e=zr();R1e("replace")});var $U=P(()=>{"use strict";p();var O1e=zr();O1e("search")});var VU=P(()=>{"use strict";p();var k1e=zr();k1e("species")});var GU=P(()=>{"use strict";p();var D1e=zr();D1e("split")});var ZU=P(()=>{"use strict";p();var L1e=zr(),z1e=i2();L1e("toPrimitive");z1e()});var WU=P(()=>{"use strict";p();var F1e=wt(),N1e=zr(),B1e=Nn();N1e("toStringTag");B1e(F1e("Symbol"),"Symbol")});var HU=P(()=>{"use strict";p();var j1e=zr();j1e("unscopables")});var vv=P((lbt,KU)=>{"use strict";p();var U1e=Fe(),$1e=St();KU.exports=function(e,t,n){try{return U1e($1e(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(u){}}});var w2=P((cbt,XU)=>{"use strict";p();var V1e=_t();XU.exports=function(e){return V1e(e)||e===null}});var S2=P((dbt,YU)=>{"use strict";p();var G1e=w2(),Z1e=String,W1e=TypeError;YU.exports=function(e){if(G1e(e))return e;throw new W1e("Can't set "+Z1e(e)+" as a prototype")}});var eo=P((pbt,JU)=>{"use strict";p();var H1e=vv(),K1e=_t(),X1e=vr(),Y1e=S2();JU.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},n;try{n=H1e(Object.prototype,"__proto__","set"),n(t,[]),e=t instanceof Array}catch(u){}return function(c,a){return X1e(c),Y1e(a),K1e(c)&&(e?n(c,a):c.__proto__=a),c}}():void 0)});var T2=P((gbt,QU)=>{"use strict";p();var J1e=gr().f;QU.exports=function(e,t,n){n in e||J1e(e,n,{configurable:!0,get:function(){return t[n]},set:function(u){t[n]=u}})}});var Lu=P((ybt,t6)=>{"use strict";p();var Q1e=kt(),ewe=_t(),e6=eo();t6.exports=function(e,t,n){var u,c;return e6&&Q1e(u=t.constructor)&&u!==n&&ewe(c=u.prototype)&&c!==n.prototype&&e6(e,c),e}});var ph=P((xbt,r6)=>{"use strict";p();var twe=It();r6.exports=function(e,t){return e===void 0?arguments.length<2?"":t:twe(e)}});var E2=P((wbt,i6)=>{"use strict";p();var rwe=_t(),iwe=Si();i6.exports=function(e,t){rwe(t)&&"cause"in t&&iwe(e,"cause",t.cause)}});var mb=P((Tbt,o6)=>{"use strict";p();var nwe=Fe(),n6=Error,awe=nwe("".replace),owe=function(e){return String(new n6(e).stack)}("zxcasd"),a6=/\n\s*at [^:]*:[^\n]*/,swe=a6.test(owe);o6.exports=function(e,t){if(swe&&typeof e=="string"&&!n6.prepareStackTrace)for(;t--;)e=awe(e,a6,"");return e}});var I2=P((Ibt,s6)=>{"use strict";p();var lwe=Ue(),uwe=ea();s6.exports=!lwe(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",uwe(1,7)),e.stack!==7):!0})});var gb=P((Pbt,u6)=>{"use strict";p();var cwe=Si(),hwe=mb(),dwe=I2(),l6=Error.captureStackTrace;u6.exports=function(e,t,n,u){dwe&&(l6?l6(e,t):cwe(e,"stack",hwe(n,u)))}});var q2=P((Cbt,g6)=>{"use strict";p();var c6=wt(),fwe=Dt(),h6=Si(),pwe=un(),d6=eo(),f6=uh(),p6=T2(),mwe=Lu(),gwe=ph(),vwe=E2(),ywe=gb(),_we=pt(),m6=Yt();g6.exports=function(e,t,n,u){var c="stackTraceLimit",a=u?2:1,x=e.split("."),S=x[x.length-1],A=c6.apply(null,x);if(A){var R=A.prototype;if(!m6&&fwe(R,"cause")&&delete R.cause,!n)return A;var D=c6("Error"),L=t(function(H,ce){var de=gwe(u?ce:H,void 0),ve=u?new A(H):new A;return de!==void 0&&h6(ve,"message",de),ywe(ve,L,ve.stack,2),this&&pwe(R,this)&&mwe(ve,this,L),arguments.length>a&&vwe(ve,arguments[a]),ve});if(L.prototype=R,S!=="Error"?d6?d6(L,D):f6(L,D,{name:!0}):_we&&c in A&&(p6(L,A,c),p6(L,A,"prepareStackTrace")),f6(L,A),!m6)try{R.name!==S&&h6(R,"name",S),R.constructor=L}catch(H){}return L}}});var x6=P(()=>{"use strict";p();var y6=K(),xwe=Qe(),_s=cn(),_6=q2(),P2="WebAssembly",v6=xwe[P2],vb=new Error("e",{cause:7}).cause!==7,mh=function(e,t){var n={};n[e]=_6(e,t,vb),y6({global:!0,constructor:!0,arity:1,forced:vb},n)},A2=function(e,t){if(v6&&v6[e]){var n={};n[e]=_6(P2+"."+e,t,vb),y6({target:P2,stat:!0,constructor:!0,arity:1,forced:vb},n)}};mh("Error",function(e){return function(n){return _s(e,this,arguments)}});mh("EvalError",function(e){return function(n){return _s(e,this,arguments)}});mh("RangeError",function(e){return function(n){return _s(e,this,arguments)}});mh("ReferenceError",function(e){return function(n){return _s(e,this,arguments)}});mh("SyntaxError",function(e){return function(n){return _s(e,this,arguments)}});mh("TypeError",function(e){return function(n){return _s(e,this,arguments)}});mh("URIError",function(e){return function(n){return _s(e,this,arguments)}});A2("CompileError",function(e){return function(n){return _s(e,this,arguments)}});A2("LinkError",function(e){return function(n){return _s(e,this,arguments)}});A2("RuntimeError",function(e){return function(n){return _s(e,this,arguments)}})});var C2=P((Dbt,w6)=>{"use strict";p();var bwe=pt(),wwe=Ue(),Swe=rt(),b6=ph(),yb=Error.prototype.toString,Twe=wwe(function(){if(bwe){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(yb.call(e)!=="true")return!0}return yb.call({message:1,name:2})!=="2: 1"||yb.call({})!=="Error"});w6.exports=Twe?function(){var t=Swe(this),n=b6(t.name,"Error"),u=b6(t.message);return n?u?n+": "+u:n:u}:yb});var E6=P(()=>{"use strict";p();var Ewe=or(),S6=C2(),T6=Error.prototype;T6.toString!==S6&&Ewe(T6,"toString",S6)});var _b=P((Bbt,I6)=>{"use strict";p();var Iwe=Ue();I6.exports=!Iwe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var Ti=P((Ubt,P6)=>{"use strict";p();var qwe=Dt(),Pwe=kt(),Awe=$t(),Cwe=av(),Mwe=_b(),q6=Cwe("IE_PROTO"),M2=Object,Rwe=M2.prototype;P6.exports=Mwe?M2.getPrototypeOf:function(e){var t=Awe(e);if(qwe(t,q6))return t[q6];var n=t.constructor;return Pwe(n)&&t instanceof n?n.prototype:t instanceof M2?Rwe:null}});var gh=P((Vbt,A6)=>{"use strict";p();A6.exports={}});var xb=P((Zbt,C6)=>{"use strict";p();var Owe=xt(),kwe=gh(),Dwe=Owe("iterator"),Lwe=Array.prototype;C6.exports=function(e){return e!==void 0&&(kwe.Array===e||Lwe[Dwe]===e)}});var xs=P((Hbt,R6)=>{"use strict";p();var zwe=Fn(),M6=Qr(),Fwe=ta(),Nwe=gh(),Bwe=xt(),jwe=Bwe("iterator");R6.exports=function(e){if(!Fwe(e))return M6(e,jwe)||M6(e,"@@iterator")||Nwe[zwe(e)]}});var zu=P((Xbt,O6)=>{"use strict";p();var Uwe=et(),$we=St(),Vwe=rt(),Gwe=Cu(),Zwe=xs(),Wwe=TypeError;O6.exports=function(e,t){var n=arguments.length<2?Zwe(e):t;if($we(n))return Vwe(Uwe(n,e));throw new Wwe(Gwe(e)+" is not iterable")}});var Zi=P((Jbt,D6)=>{"use strict";p();var Hwe=et(),k6=rt(),Kwe=Qr();D6.exports=function(e,t,n){var u,c;k6(e);try{if(u=Kwe(e,"return"),!u){if(t==="throw")throw n;return n}u=Hwe(u,e)}catch(a){c=!0,u=a}if(t==="throw")throw n;if(c)throw u;return k6(u),n}});var Fr=P((e1t,N6)=>{"use strict";p();var Xwe=dr(),Ywe=et(),Jwe=rt(),Qwe=Cu(),eSe=xb(),tSe=Ht(),L6=un(),rSe=zu(),iSe=xs(),z6=Zi(),nSe=TypeError,bb=function(e,t){this.stopped=e,this.result=t},F6=bb.prototype;N6.exports=function(e,t,n){var u=n&&n.that,c=!!(n&&n.AS_ENTRIES),a=!!(n&&n.IS_RECORD),x=!!(n&&n.IS_ITERATOR),S=!!(n&&n.INTERRUPTED),A=Xwe(t,u),R,D,L,H,ce,de,ve,X=function(oe){return R&&z6(R,"normal",oe),new bb(!0,oe)},ee=function(oe){return c?(Jwe(oe),S?A(oe[0],oe[1],X):A(oe[0],oe[1])):S?A(oe,X):A(oe)};if(a)R=e.iterator;else if(x)R=e;else{if(D=iSe(e),!D)throw new nSe(Qwe(e)+" is not iterable");if(eSe(D)){for(L=0,H=tSe(e);H>L;L++)if(ce=ee(e[L]),ce&&L6(F6,ce))return ce;return new bb(!1)}R=rSe(e,D)}for(de=a?e.next:R.next;!(ve=Ywe(de,R)).done;){try{ce=ee(ve.value)}catch(oe){z6(R,"throw",oe)}if(typeof ce=="object"&&ce&&L6(F6,ce))return ce}return new bb(!1)}});var j6=P(()=>{"use strict";p();var aSe=K(),oSe=un(),sSe=Ti(),wb=eo(),lSe=uh(),B6=ei(),R2=Si(),O2=ea(),uSe=E2(),cSe=gb(),hSe=Fr(),dSe=ph(),fSe=xt(),pSe=fSe("toStringTag"),Sb=Error,mSe=[].push,Cf=function(t,n){var u=oSe(k2,this),c;wb?c=wb(new Sb,u?sSe(this):k2):(c=u?this:B6(k2),R2(c,pSe,"Error")),n!==void 0&&R2(c,"message",dSe(n)),cSe(c,Cf,c.stack,1),arguments.length>2&&uSe(c,arguments[2]);var a=[];return hSe(t,mSe,{that:a}),R2(c,"errors",a),c};wb?wb(Cf,Sb):lSe(Cf,Sb,{name:!0});var k2=Cf.prototype=B6(Sb.prototype,{constructor:O2(1,Cf),message:O2(1,""),name:O2(1,"AggregateError")});aSe({global:!0,constructor:!0,arity:2},{AggregateError:Cf})});var D2=P(()=>{"use strict";p();j6()});var G6=P(()=>{"use strict";p();var gSe=K(),vSe=wt(),ySe=cn(),U6=Ue(),_Se=q2(),L2="AggregateError",$6=vSe(L2),V6=!U6(function(){return $6([1]).errors[0]!==1})&&U6(function(){return $6([1],L2,{cause:7}).cause!==7});gSe({global:!0,constructor:!0,arity:2,forced:V6},{AggregateError:_Se(L2,function(e){return function(n,u){return ySe(e,this,arguments)}},V6,!0)})});var Nr=P((h1t,Z6)=>{"use strict";p();var xSe=xt(),bSe=ei(),wSe=gr().f,z2=xSe("unscopables"),F2=Array.prototype;F2[z2]===void 0&&wSe(F2,z2,{configurable:!0,value:bSe(null)});Z6.exports=function(e){F2[z2][e]=!0}});var N2=P(()=>{"use strict";p();var SSe=K(),TSe=$t(),ESe=Ht(),ISe=br(),qSe=Nr();SSe({target:"Array",proto:!0},{at:function(t){var n=TSe(this),u=ESe(n),c=ISe(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:n[a]}});qSe("at")});var Fu=P((g1t,W6)=>{"use strict";p();var PSe=TypeError,ASe=9007199254740991;W6.exports=function(e){if(e>ASe)throw PSe("Maximum allowed index exceeded");return e}});var to=P((y1t,H6)=>{"use strict";p();var CSe=pt(),MSe=gr(),RSe=ea();H6.exports=function(e,t,n){CSe?MSe.f(e,t,RSe(0,n)):e[t]=n}});var Mf=P((x1t,K6)=>{"use strict";p();var OSe=Ue(),kSe=xt(),DSe=Co(),LSe=kSe("species");K6.exports=function(e){return DSe>=51||!OSe(function(){var t=[],n=t.constructor={};return n[LSe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var Q6=P(()=>{"use strict";p();var zSe=K(),FSe=Ue(),NSe=Oo(),BSe=_t(),jSe=$t(),USe=Ht(),X6=Fu(),Y6=to(),$Se=If(),VSe=Mf(),GSe=xt(),ZSe=Co(),J6=GSe("isConcatSpreadable"),WSe=ZSe>=51||!FSe(function(){var e=[];return e[J6]=!1,e.concat()[0]!==e}),HSe=function(e){if(!BSe(e))return!1;var t=e[J6];return t!==void 0?!!t:NSe(e)},KSe=!WSe||!VSe("concat");zSe({target:"Array",proto:!0,arity:1,forced:KSe},{concat:function(t){var n=jSe(this),u=$Se(n,0),c=0,a,x,S,A,R;for(a=-1,S=arguments.length;a<S;a++)if(R=a===-1?n:arguments[a],HSe(R))for(A=USe(R),X6(c+A),x=0;x<A;x++,c++)x in R&&Y6(u,c,R[x]);else X6(c+1),Y6(u,c++,R);return u.length=c,u}})});var yv=P((E1t,t$)=>{"use strict";p();var e$=Cu(),XSe=TypeError;t$.exports=function(e,t){if(!delete e[t])throw new XSe("Cannot delete property "+e$(t)+" of "+e$(e))}});var j2=P((q1t,r$)=>{"use strict";p();var YSe=$t(),B2=Ro(),JSe=Ht(),QSe=yv(),eTe=Math.min;r$.exports=[].copyWithin||function(t,n){var u=YSe(this),c=JSe(u),a=B2(t,c),x=B2(n,c),S=arguments.length>2?arguments[2]:void 0,A=eTe((S===void 0?c:B2(S,c))-x,c-a),R=1;for(x<a&&a<x+A&&(R=-1,x+=A-1,a+=A-1);A-->0;)x in u?u[a]=u[x]:QSe(u,a),a+=R,x+=R;return u}});var i$=P(()=>{"use strict";p();var tTe=K(),rTe=j2(),iTe=Nr();tTe({target:"Array",proto:!0},{copyWithin:rTe});iTe("copyWithin")});var ro=P((R1t,n$)=>{"use strict";p();var nTe=Ue();n$.exports=function(e,t){var n=[][e];return!!n&&nTe(function(){n.call(null,t||function(){return 1},1)})}});var a$=P(()=>{"use strict";p();var aTe=K(),oTe=ti().every,sTe=ro(),lTe=sTe("every");aTe({target:"Array",proto:!0,forced:!lTe},{every:function(t){return oTe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Tb=P((z1t,s$)=>{"use strict";p();var uTe=$t(),o$=Ro(),cTe=Ht();s$.exports=function(t){for(var n=uTe(this),u=cTe(n),c=arguments.length,a=o$(c>1?arguments[1]:void 0,u),x=c>2?arguments[2]:void 0,S=x===void 0?u:o$(x,u);S>a;)n[a++]=t;return n}});var l$=P(()=>{"use strict";p();var hTe=K(),dTe=Tb(),fTe=Nr();hTe({target:"Array",proto:!0},{fill:dTe});fTe("fill")});var u$=P(()=>{"use strict";p();var pTe=K(),mTe=ti().filter,gTe=Mf(),vTe=gTe("filter");pTe({target:"Array",proto:!0,forced:!vTe},{filter:function(t){return mTe(this,t,arguments.length>1?arguments[1]:void 0)}})});var h$=P(()=>{"use strict";p();var yTe=K(),_Te=ti().find,xTe=Nr(),U2="find",c$=!0;U2 in[]&&Array(1)[U2](function(){c$=!1});yTe({target:"Array",proto:!0,forced:c$},{find:function(t){return _Te(this,t,arguments.length>1?arguments[1]:void 0)}});xTe(U2)});var f$=P(()=>{"use strict";p();var bTe=K(),wTe=ti().findIndex,STe=Nr(),$2="findIndex",d$=!0;$2 in[]&&Array(1)[$2](function(){d$=!1});bTe({target:"Array",proto:!0,forced:d$},{findIndex:function(t){return wTe(this,t,arguments.length>1?arguments[1]:void 0)}});STe($2)});var _v=P((Y1t,m$)=>{"use strict";p();var TTe=dr(),ETe=hl(),ITe=$t(),qTe=Ht(),p$=function(e){var t=e===1;return function(n,u,c){for(var a=ITe(n),x=ETe(a),S=qTe(x),A=TTe(u,c),R,D;S-->0;)if(R=x[S],D=A(R,S,a),D)switch(e){case 0:return R;case 1:return S}return t?-1:void 0}};m$.exports={findLast:p$(0),findLastIndex:p$(1)}});var V2=P(()=>{"use strict";p();var PTe=K(),ATe=_v().findLast,CTe=Nr();PTe({target:"Array",proto:!0},{findLast:function(t){return ATe(this,t,arguments.length>1?arguments[1]:void 0)}});CTe("findLast")});var G2=P(()=>{"use strict";p();var MTe=K(),RTe=_v().findLastIndex,OTe=Nr();MTe({target:"Array",proto:!0},{findLastIndex:function(t){return RTe(this,t,arguments.length>1?arguments[1]:void 0)}});OTe("findLastIndex")});var Z2=P((awt,v$)=>{"use strict";p();var kTe=Oo(),DTe=Ht(),LTe=Fu(),zTe=dr(),g$=function(e,t,n,u,c,a,x,S){for(var A=c,R=0,D=x?zTe(x,S):!1,L,H;R<u;)R in n&&(L=D?D(n[R],R,t):n[R],a>0&&kTe(L)?(H=DTe(L),A=g$(e,t,L,H,A,a-1)-1):(LTe(A+1),e[A]=L),A++),R++;return A};v$.exports=g$});var y$=P(()=>{"use strict";p();var FTe=K(),NTe=Z2(),BTe=$t(),jTe=Ht(),UTe=br(),$Te=If();FTe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,n=BTe(this),u=jTe(n),c=$Te(n,0);return c.length=NTe(c,n,n,u,0,t===void 0?1:UTe(t)),c}})});var _$=P(()=>{"use strict";p();var VTe=K(),GTe=Z2(),ZTe=St(),WTe=$t(),HTe=Ht(),KTe=If();VTe({target:"Array",proto:!0},{flatMap:function(t){var n=WTe(this),u=HTe(n),c;return ZTe(t),c=KTe(n,0),c.length=GTe(c,n,n,u,0,1,t,arguments.length>1?arguments[1]:void 0),c}})});var W2=P((fwt,x$)=>{"use strict";p();var XTe=ti().forEach,YTe=ro(),JTe=YTe("forEach");x$.exports=JTe?[].forEach:function(t){return XTe(this,t,arguments.length>1?arguments[1]:void 0)}});var w$=P(()=>{"use strict";p();var QTe=K(),b$=W2();QTe({target:"Array",proto:!0,forced:[].forEach!==b$},{forEach:b$})});var Eb=P((ywt,S$)=>{"use strict";p();var eEe=rt(),tEe=Zi();S$.exports=function(e,t,n,u){try{return u?t(eEe(n)[0],n[1]):t(n)}catch(c){tEe(e,"throw",c)}}});var H2=P((xwt,I$)=>{"use strict";p();var rEe=dr(),iEe=et(),nEe=$t(),aEe=Eb(),oEe=xb(),sEe=ko(),lEe=Ht(),T$=to(),uEe=zu(),cEe=xs(),E$=Array;I$.exports=function(t){var n=nEe(t),u=sEe(this),c=arguments.length,a=c>1?arguments[1]:void 0,x=a!==void 0;x&&(a=rEe(a,c>2?arguments[2]:void 0));var S=cEe(n),A=0,R,D,L,H,ce,de;if(S&&!(this===E$&&oEe(S)))for(D=u?new this:[],H=uEe(n,S),ce=H.next;!(L=iEe(ce,H)).done;A++)de=x?aEe(H,a,[L.value,A],!0):L.value,T$(D,A,de);else for(R=lEe(n),D=u?new this(R):E$(R);R>A;A++)de=x?a(n[A],A):n[A],T$(D,A,de);return D.length=A,D}});var xv=P((wwt,C$)=>{"use strict";p();var hEe=xt(),P$=hEe("iterator"),A$=!1;try{q$=0,K2={next:function(){return{done:!!q$++}},return:function(){A$=!0}},K2[P$]=function(){return this},Array.from(K2,function(){throw 2})}catch(e){}var q$,K2;C$.exports=function(e,t){try{if(!t&&!A$)return!1}catch(c){return!1}var n=!1;try{var u={};u[P$]=function(){return{next:function(){return{done:n=!0}}}},e(u)}catch(c){}return n}});var M$=P(()=>{"use strict";p();var dEe=K(),fEe=H2(),pEe=xv(),mEe=!pEe(function(e){Array.from(e)});dEe({target:"Array",stat:!0,forced:mEe},{from:fEe})});var R$=P(()=>{"use strict";p();var gEe=K(),vEe=Tf().includes,yEe=Ue(),_Ee=Nr(),xEe=yEe(function(){return!Array(1).includes()});gEe({target:"Array",proto:!0,forced:xEe},{includes:function(t){return vEe(this,t,arguments.length>1?arguments[1]:void 0)}});_Ee("includes")});var k$=P(()=>{"use strict";p();var bEe=K(),wEe=Ou(),SEe=Tf().indexOf,TEe=ro(),X2=wEe([].indexOf),O$=!!X2&&1/X2([1],1,-0)<0,EEe=O$||!TEe("indexOf");bEe({target:"Array",proto:!0,forced:EEe},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return O$?X2(this,t,n)||0:SEe(this,t,n)}})});var D$=P(()=>{"use strict";p();var IEe=K(),qEe=Oo();IEe({target:"Array",stat:!0},{isArray:qEe})});var Nu=P((Lwt,F$)=>{"use strict";p();var PEe=Ue(),AEe=kt(),CEe=_t(),MEe=ei(),L$=Ti(),REe=or(),OEe=xt(),kEe=Yt(),Q2=OEe("iterator"),z$=!1,gl,Y2,J2;[].keys&&(J2=[].keys(),"next"in J2?(Y2=L$(L$(J2)),Y2!==Object.prototype&&(gl=Y2)):z$=!0);var DEe=!CEe(gl)||PEe(function(){var e={};return gl[Q2].call(e)!==e});DEe?gl={}:kEe&&(gl=MEe(gl));AEe(gl[Q2])||REe(gl,Q2,function(){return this});F$.exports={IteratorPrototype:gl,BUGGY_SAFARI_ITERATORS:z$}});var Bu=P((Fwt,N$)=>{"use strict";p();var LEe=Nu().IteratorPrototype,zEe=ei(),FEe=ea(),NEe=Nn(),BEe=gh(),jEe=function(){return this};N$.exports=function(e,t,n,u){var c=t+" Iterator";return e.prototype=zEe(LEe,{next:FEe(+!u,n)}),NEe(e,c,!1,!0),BEe[c]=jEe,e}});var Pb=P((Bwt,K$)=>{"use strict";p();var UEe=K(),$Ee=et(),Ib=Yt(),W$=sh(),VEe=kt(),GEe=Bu(),B$=Ti(),j$=eo(),ZEe=Nn(),WEe=Si(),eP=or(),HEe=xt(),U$=gh(),H$=Nu(),KEe=W$.PROPER,XEe=W$.CONFIGURABLE,$$=H$.IteratorPrototype,qb=H$.BUGGY_SAFARI_ITERATORS,bv=HEe("iterator"),V$="keys",wv="values",G$="entries",Z$=function(){return this};K$.exports=function(e,t,n,u,c,a,x){GEe(n,t,u);var S=function(ee){if(ee===c&&H)return H;if(!qb&&ee&&ee in D)return D[ee];switch(ee){case V$:return function(){return new n(this,ee)};case wv:return function(){return new n(this,ee)};case G$:return function(){return new n(this,ee)}}return function(){return new n(this)}},A=t+" Iterator",R=!1,D=e.prototype,L=D[bv]||D["@@iterator"]||c&&D[c],H=!qb&&L||S(c),ce=t==="Array"&&D.entries||L,de,ve,X;if(ce&&(de=B$(ce.call(new e)),de!==Object.prototype&&de.next&&(!Ib&&B$(de)!==$$&&(j$?j$(de,$$):VEe(de[bv])||eP(de,bv,Z$)),ZEe(de,A,!0,!0),Ib&&(U$[A]=Z$))),KEe&&c===wv&&L&&L.name!==wv&&(!Ib&&XEe?WEe(D,"name",wv):(R=!0,H=function(){return $Ee(L,this)})),c)if(ve={values:S(wv),keys:a?H:S(V$),entries:S(G$)},x)for(X in ve)(qb||R||!(X in D))&&eP(D,X,ve[X]);else UEe({target:t,proto:!0,forced:qb||R},ve);return(!Ib||x)&&D[bv]!==H&&eP(D,bv,H,{name:c}),U$[t]=H,ve}});var ki=P((Uwt,X$)=>{"use strict";p();X$.exports=function(e,t){return{value:e,done:t}}});var Sv=P((Vwt,tV)=>{"use strict";p();var YEe=wi(),tP=Nr(),Y$=gh(),Q$=rr(),JEe=gr().f,QEe=Pb(),Ab=ki(),eIe=Yt(),tIe=pt(),eV="Array Iterator",rIe=Q$.set,iIe=Q$.getterFor(eV);tV.exports=QEe(Array,"Array",function(e,t){rIe(this,{type:eV,target:YEe(e),index:0,kind:t})},function(){var e=iIe(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,Ab(void 0,!0);switch(e.kind){case"keys":return Ab(n,!1);case"values":return Ab(t[n],!1)}return Ab([n,t[n]],!1)},"values");var J$=Y$.Arguments=Y$.Array;tP("keys");tP("values");tP("entries");if(!eIe&&tIe&&J$.name!=="values")try{JEe(J$,"name",{value:"values"})}catch(e){}});var rV=P(()=>{"use strict";p();var nIe=K(),aIe=Fe(),oIe=hl(),sIe=wi(),lIe=ro(),uIe=aIe([].join),cIe=oIe!==Object,hIe=cIe||!lIe("join",",");nIe({target:"Array",proto:!0,forced:hIe},{join:function(t){return uIe(sIe(this),t===void 0?",":t)}})});var iP=P((Kwt,nV)=>{"use strict";p();var dIe=cn(),fIe=wi(),pIe=br(),mIe=Ht(),gIe=ro(),vIe=Math.min,rP=[].lastIndexOf,iV=!!rP&&1/[1].lastIndexOf(1,-0)<0,yIe=gIe("lastIndexOf"),_Ie=iV||!yIe;nV.exports=_Ie?function(t){if(iV)return dIe(rP,this,arguments)||0;var n=fIe(this),u=mIe(n);if(u===0)return-1;var c=u-1;for(arguments.length>1&&(c=vIe(c,pIe(arguments[1]))),c<0&&(c=u+c);c>=0;c--)if(c in n&&n[c]===t)return c||0;return-1}:rP});var oV=P(()=>{"use strict";p();var xIe=K(),aV=iP();xIe({target:"Array",proto:!0,forced:aV!==[].lastIndexOf},{lastIndexOf:aV})});var sV=P(()=>{"use strict";p();var bIe=K(),wIe=ti().map,SIe=Mf(),TIe=SIe("map");bIe({target:"Array",proto:!0,forced:!TIe},{map:function(t){return wIe(this,t,arguments.length>1?arguments[1]:void 0)}})});var uV=P(()=>{"use strict";p();var EIe=K(),IIe=Ue(),qIe=ko(),PIe=to(),lV=Array,AIe=IIe(function(){function e(){}return!(lV.of.call(e)instanceof e)});EIe({target:"Array",stat:!0,forced:AIe},{of:function(){for(var t=0,n=arguments.length,u=new(qIe(this)?this:lV)(n);n>t;)PIe(u,t,arguments[t++]);return u.length=n,u}})});var Cb=P((oSt,cV)=>{"use strict";p();var CIe=pt(),MIe=Oo(),RIe=TypeError,OIe=Object.getOwnPropertyDescriptor,kIe=CIe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();cV.exports=kIe?function(e,t){if(MIe(e)&&!OIe(e,"length").writable)throw new RIe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var hV=P(()=>{"use strict";p();var DIe=K(),LIe=$t(),zIe=Ht(),FIe=Cb(),NIe=Fu(),BIe=Ue(),jIe=BIe(function(){return[].push.call({length:4294967296},1)!==4294967297}),UIe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},$Ie=jIe||!UIe();DIe({target:"Array",proto:!0,arity:1,forced:$Ie},{push:function(t){var n=LIe(this),u=zIe(n),c=arguments.length;NIe(u+c);for(var a=0;a<c;a++)n[u]=arguments[a],u++;return FIe(n,u),u}})});var Tv=P((hSt,mV)=>{"use strict";p();var VIe=St(),GIe=$t(),ZIe=hl(),WIe=Ht(),dV=TypeError,fV="Reduce of empty array with no initial value",pV=function(e){return function(t,n,u,c){var a=GIe(t),x=ZIe(a),S=WIe(a);if(VIe(n),S===0&&u<2)throw new dV(fV);var A=e?S-1:0,R=e?-1:1;if(u<2)for(;;){if(A in x){c=x[A],A+=R;break}if(A+=R,e?A<0:S<=A)throw new dV(fV)}for(;e?A>=0:S>A;A+=R)A in x&&(c=n(c,x[A],A,a));return c}};mV.exports={left:pV(!1),right:pV(!0)}});var Iv=P((fSt,gV)=>{"use strict";p();var Ev=Qe(),HIe=Po(),KIe=ln(),Mb=function(e){return HIe.slice(0,e.length)===e};gV.exports=function(){return Mb("Bun/")?"BUN":Mb("Cloudflare-Workers")?"CLOUDFLARE":Mb("Deno/")?"DENO":Mb("Node.js/")?"NODE":Ev.Bun&&typeof Bun.version=="string"?"BUN":Ev.Deno&&typeof Deno.version=="object"?"DENO":KIe(Ev.process)==="process"?"NODE":Ev.window&&Ev.document?"BROWSER":"REST"}()});var vh=P((mSt,vV)=>{"use strict";p();var XIe=Iv();vV.exports=XIe==="NODE"});var _V=P(()=>{"use strict";p();var YIe=K(),JIe=Tv().left,QIe=ro(),yV=Co(),eqe=vh(),tqe=!eqe&&yV>79&&yV<83,rqe=tqe||!QIe("reduce");YIe({target:"Array",proto:!0,forced:rqe},{reduce:function(t){var n=arguments.length;return JIe(this,t,n,n>1?arguments[1]:void 0)}})});var bV=P(()=>{"use strict";p();var iqe=K(),nqe=Tv().right,aqe=ro(),xV=Co(),oqe=vh(),sqe=!oqe&&xV>79&&xV<83,lqe=sqe||!aqe("reduceRight");iqe({target:"Array",proto:!0,forced:lqe},{reduceRight:function(t){return nqe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var SV=P(()=>{"use strict";p();var uqe=K(),cqe=Fe(),hqe=Oo(),dqe=cqe([].reverse),wV=[1,2];uqe({target:"Array",proto:!0,forced:String(wV)===String(wV.reverse())},{reverse:function(){return hqe(this)&&(this.length=this.length),dqe(this)}})});var IV=P(()=>{"use strict";p();var fqe=K(),TV=Oo(),pqe=ko(),mqe=_t(),EV=Ro(),gqe=Ht(),vqe=wi(),yqe=to(),_qe=xt(),xqe=Mf(),bqe=ia(),wqe=xqe("slice"),Sqe=_qe("species"),nP=Array,Tqe=Math.max;fqe({target:"Array",proto:!0,forced:!wqe},{slice:function(t,n){var u=vqe(this),c=gqe(u),a=EV(t,c),x=EV(n===void 0?c:n,c),S,A,R;if(TV(u)&&(S=u.constructor,pqe(S)&&(S===nP||TV(S.prototype))?S=void 0:mqe(S)&&(S=S[Sqe],S===null&&(S=void 0)),S===nP||S===void 0))return bqe(u,a,x);for(A=new(S===void 0?nP:S)(Tqe(x-a,0)),R=0;a<x;a++,R++)a in u&&yqe(A,R,u[a]);return A.length=R,A}})});var qV=P(()=>{"use strict";p();var Eqe=K(),Iqe=ti().some,qqe=ro(),Pqe=qqe("some");Eqe({target:"Array",proto:!0,forced:!Pqe},{some:function(t){return Iqe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Rb=P((RSt,AV)=>{"use strict";p();var PV=ia(),Aqe=Math.floor,aP=function(e,t){var n=e.length;if(n<8)for(var u=1,c,a;u<n;){for(a=u,c=e[u];a&&t(e[a-1],c)>0;)e[a]=e[--a];a!==u++&&(e[a]=c)}else for(var x=Aqe(n/2),S=aP(PV(e,0,x),t),A=aP(PV(e,x),t),R=S.length,D=A.length,L=0,H=0;L<R||H<D;)e[L+H]=L<R&&H<D?t(S[L],A[H])<=0?S[L++]:A[H++]:L<R?S[L++]:A[H++];return e};AV.exports=aP});var oP=P((kSt,MV)=>{"use strict";p();var Cqe=Po(),CV=Cqe.match(/firefox\/(\d+)/i);MV.exports=!!CV&&+CV[1]});var sP=P((LSt,RV)=>{"use strict";p();var Mqe=Po();RV.exports=/MSIE|Trident/.test(Mqe)});var Ob=P((FSt,kV)=>{"use strict";p();var Rqe=Po(),OV=Rqe.match(/AppleWebKit\/(\d+)\./);kV.exports=!!OV&&+OV[1]});var $V=P(()=>{"use strict";p();var Oqe=K(),jV=Fe(),kqe=St(),Dqe=$t(),DV=Ht(),Lqe=yv(),LV=It(),lP=Ue(),zqe=Rb(),Fqe=ro(),zV=oP(),Nqe=sP(),FV=Co(),NV=Ob(),ju=[],BV=jV(ju.sort),Bqe=jV(ju.push),jqe=lP(function(){ju.sort(void 0)}),Uqe=lP(function(){ju.sort(null)}),$qe=Fqe("sort"),UV=!lP(function(){if(FV)return FV<70;if(!(zV&&zV>3)){if(Nqe)return!0;if(NV)return NV<603;var e="",t,n,u,c;for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:u=3;break;case 68:case 71:u=4;break;default:u=2}for(c=0;c<47;c++)ju.push({k:n+c,v:u})}for(ju.sort(function(a,x){return x.v-a.v}),c=0;c<ju.length;c++)n=ju[c].k.charAt(0),e.charAt(e.length-1)!==n&&(e+=n);return e!=="DGBEFHACIJK"}}),Vqe=jqe||!Uqe||!$qe||!UV,Gqe=function(e){return function(t,n){return n===void 0?-1:t===void 0?1:e!==void 0?+e(t,n)||0:LV(t)>LV(n)?1:-1}};Oqe({target:"Array",proto:!0,forced:Vqe},{sort:function(t){t!==void 0&&kqe(t);var n=Dqe(this);if(UV)return t===void 0?BV(n):BV(n,t);var u=[],c=DV(n),a,x;for(x=0;x<c;x++)x in n&&Bqe(u,n[x]);for(zqe(u,Gqe(t)),a=DV(u),x=0;x<a;)n[x]=u[x++];for(;x<c;)Lqe(n,x++);return n}})});var Uu=P(($St,GV)=>{"use strict";p();var Zqe=wt(),Wqe=wr(),Hqe=xt(),Kqe=pt(),VV=Hqe("species");GV.exports=function(e){var t=Zqe(e);Kqe&&t&&!t[VV]&&Wqe(t,VV,{configurable:!0,get:function(){return this}})}});var ZV=P(()=>{"use strict";p();var Xqe=Uu();Xqe("Array")});var WV=P(()=>{"use strict";p();var Yqe=K(),Jqe=$t(),Qqe=Ro(),e2e=br(),t2e=Ht(),r2e=Cb(),i2e=Fu(),n2e=If(),a2e=to(),uP=yv(),o2e=Mf(),s2e=o2e("splice"),l2e=Math.max,u2e=Math.min;Yqe({target:"Array",proto:!0,forced:!s2e},{splice:function(t,n){var u=Jqe(this),c=t2e(u),a=Qqe(t,c),x=arguments.length,S,A,R,D,L,H;for(x===0?S=A=0:x===1?(S=0,A=c-a):(S=x-2,A=u2e(l2e(e2e(n),0),c-a)),i2e(c+S-A),R=n2e(u,A),D=0;D<A;D++)L=a+D,L in u&&a2e(R,D,u[L]);if(R.length=A,S<A){for(D=a;D<c-A;D++)L=D+A,H=D+S,L in u?u[H]=u[L]:uP(u,H);for(D=c;D>c-A+S;D--)uP(u,D-1)}else if(S>A)for(D=c-A;D>a;D--)L=D+A-1,H=D+S-1,L in u?u[H]=u[L]:uP(u,H);for(D=0;D<S;D++)u[D+a]=arguments[D+2];return r2e(u,c-A+S),R}})});var cP=P((YSt,HV)=>{"use strict";p();var c2e=Ht();HV.exports=function(e,t){for(var n=c2e(e),u=new t(n),c=0;c<n;c++)u[c]=e[n-c-1];return u}});var hP=P(()=>{"use strict";p();var h2e=K(),d2e=cP(),f2e=wi(),p2e=Nr(),m2e=Array;h2e({target:"Array",proto:!0},{toReversed:function(){return d2e(f2e(this),m2e)}});p2e("toReversed")});var vl=P((rTt,KV)=>{"use strict";p();var g2e=Ht();KV.exports=function(e,t,n){for(var u=0,c=arguments.length>2?n:g2e(t),a=new e(c);c>u;)a[u]=t[u++];return a}});var dP=P((nTt,XV)=>{"use strict";p();var v2e=Qe();XV.exports=function(e,t){var n=v2e[e],u=n&&n.prototype;return u&&u[t]}});var fP=P(()=>{"use strict";p();var y2e=K(),_2e=Fe(),x2e=St(),b2e=wi(),w2e=vl(),S2e=dP(),T2e=Nr(),E2e=Array,I2e=_2e(S2e("Array","sort"));y2e({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&x2e(t);var n=b2e(this),u=w2e(E2e,n);return I2e(u,t)}});T2e("toSorted")});var pP=P(()=>{"use strict";p();var q2e=K(),P2e=Nr(),A2e=Fu(),C2e=Ht(),M2e=Ro(),R2e=wi(),O2e=br(),k2e=Array,D2e=Math.max,L2e=Math.min;q2e({target:"Array",proto:!0},{toSpliced:function(t,n){var u=R2e(this),c=C2e(u),a=M2e(t,c),x=arguments.length,S=0,A,R,D,L;for(x===0?A=R=0:x===1?(A=0,R=c-a):(A=x-2,R=L2e(D2e(O2e(n),0),c-a)),D=A2e(c+A-R),L=k2e(D);S<a;S++)L[S]=u[S];for(;S<a+A;S++)L[S]=arguments[S-a+2];for(;S<D;S++)L[S]=u[S+R-A];return L}});P2e("toSpliced")});var YV=P(()=>{"use strict";p();var z2e=Nr();z2e("flat")});var JV=P(()=>{"use strict";p();var F2e=Nr();F2e("flatMap")});var QV=P(()=>{"use strict";p();var N2e=K(),B2e=$t(),j2e=Ht(),U2e=Cb(),$2e=yv(),V2e=Fu(),G2e=[].unshift(0)!==1,Z2e=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},W2e=G2e||!Z2e();N2e({target:"Array",proto:!0,arity:1,forced:W2e},{unshift:function(t){var n=B2e(this),u=j2e(n),c=arguments.length;if(c){V2e(u+c);for(var a=u;a--;){var x=a+c;a in n?n[x]=n[a]:$2e(n,x)}for(var S=0;S<c;S++)n[S]=arguments[S]}return U2e(n,u+c)}})});var mP=P((bTt,e8)=>{"use strict";p();var H2e=Ht(),K2e=br(),X2e=RangeError;e8.exports=function(e,t,n,u){var c=H2e(e),a=K2e(n),x=a<0?c+a:a;if(x>=c||x<0)throw new X2e("Incorrect index");for(var S=new t(c),A=0;A<c;A++)S[A]=A===x?u:e[A];return S}});var gP=P(()=>{"use strict";p();var Y2e=K(),J2e=mP(),Q2e=wi(),ePe=Array;Y2e({target:"Array",proto:!0},{with:function(e,t){return J2e(Q2e(this),ePe,e,t)}})});var qv=P((ITt,t8)=>{"use strict";p();t8.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var io=P((PTt,r8)=>{"use strict";p();var tPe=or();r8.exports=function(e,t,n){for(var u in t)tPe(e,u,t[u],n);return e}});var In=P((CTt,i8)=>{"use strict";p();var rPe=un(),iPe=TypeError;i8.exports=function(e,t){if(rPe(t,e))return e;throw new iPe("Incorrect invocation")}});var Rf=P((RTt,n8)=>{"use strict";p();var nPe=br(),aPe=ra(),oPe=RangeError;n8.exports=function(e){if(e===void 0)return 0;var t=nPe(e),n=aPe(t);if(t!==n)throw new oPe("Wrong length or index");return n}});var kb=P((kTt,a8)=>{"use strict";p();a8.exports=Math.sign||function(t){var n=+t;return n===0||n!==n?n:n<0?-1:1}});var vP=P((LTt,s8)=>{"use strict";p();var sPe=2220446049250313e-31,o8=1/sPe;s8.exports=function(e){return e+o8-o8}});var yP=P((FTt,l8)=>{"use strict";p();var lPe=kb(),uPe=vP(),cPe=Math.abs,hPe=2220446049250313e-31;l8.exports=function(e,t,n,u){var c=+e,a=cPe(c),x=lPe(c);if(a<u)return x*uPe(a/u/t)*u*t;var S=(1+t/hPe)*a,A=S-(S-a);return A>n||A!==A?x*(1/0):x*A}});var Db=P((BTt,u8)=>{"use strict";p();var dPe=yP(),fPe=1.1920928955078125e-7,pPe=34028234663852886e22,mPe=11754943508222875e-54;u8.exports=Math.fround||function(t){return dPe(t,fPe,pPe,mPe)}});var h8=P((UTt,c8)=>{"use strict";p();var gPe=Array,vPe=Math.abs,yl=Math.pow,yPe=Math.floor,_Pe=Math.log,xPe=Math.LN2,bPe=function(e,t,n){var u=gPe(n),c=n*8-t-1,a=(1<<c)-1,x=a>>1,S=t===23?yl(2,-24)-yl(2,-77):0,A=e<0||e===0&&1/e<0?1:0,R=0,D,L,H;for(e=vPe(e),e!==e||e===1/0?(L=e!==e?1:0,D=a):(D=yPe(_Pe(e)/xPe),H=yl(2,-D),e*H<1&&(D--,H*=2),D+x>=1?e+=S/H:e+=S*yl(2,1-x),e*H>=2&&(D++,H/=2),D+x>=a?(L=0,D=a):D+x>=1?(L=(e*H-1)*yl(2,t),D+=x):(L=e*yl(2,x-1)*yl(2,t),D=0));t>=8;)u[R++]=L&255,L/=256,t-=8;for(D=D<<t|L,c+=t;c>0;)u[R++]=D&255,D/=256,c-=8;return u[R-1]|=A*128,u},wPe=function(e,t){var n=e.length,u=n*8-t-1,c=(1<<u)-1,a=c>>1,x=u-7,S=n-1,A=e[S--],R=A&127,D;for(A>>=7;x>0;)R=R*256+e[S--],x-=8;for(D=R&(1<<-x)-1,R>>=-x,x+=t;x>0;)D=D*256+e[S--],x-=8;if(R===0)R=1-a;else{if(R===c)return D?NaN:A?-1/0:1/0;D+=yl(2,t),R-=a}return(A?-1:1)*D*yl(2,R-t)};c8.exports={pack:bPe,unpack:wPe}});var Cv=P((VTt,P8)=>{"use strict";p();var Bb=Qe(),SP=Fe(),_P=pt(),SPe=qv(),S8=sh(),TPe=Si(),EPe=wr(),d8=io(),xP=Ue(),Lb=In(),IPe=br(),qPe=ra(),Fb=Rf(),PPe=Db(),T8=h8(),APe=Ti(),f8=eo(),CPe=Tb(),MPe=ia(),RPe=Lu(),OPe=uh(),E8=Nn(),TP=rr(),kPe=S8.PROPER,p8=S8.CONFIGURABLE,kf="ArrayBuffer",jb="DataView",Df="prototype",DPe="Wrong length",I8="Wrong index",m8=TP.getterFor(kf),Av=TP.getterFor(jb),g8=TP.set,Do=Bb[kf],Ma=Do,Of=Ma&&Ma[Df],bs=Bb[jb],yh=bs&&bs[Df],v8=Object.prototype,LPe=Bb.Array,Nb=Bb.RangeError,zPe=SP(CPe),FPe=SP([].reverse),q8=T8.pack,y8=T8.unpack,_8=function(e){return[e&255]},x8=function(e){return[e&255,e>>8&255]},b8=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},w8=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},NPe=function(e){return q8(PPe(e),23,4)},BPe=function(e){return q8(e,52,8)},zb=function(e,t,n){EPe(e[Df],t,{configurable:!0,get:function(){return n(this)[t]}})},$u=function(e,t,n,u){var c=Av(e),a=Fb(n),x=!!u;if(a+t>c.byteLength)throw new Nb(I8);var S=c.bytes,A=a+c.byteOffset,R=MPe(S,A,A+t);return x?R:FPe(R)},Vu=function(e,t,n,u,c,a){var x=Av(e),S=Fb(n),A=u(+c),R=!!a;if(S+t>x.byteLength)throw new Nb(I8);for(var D=x.bytes,L=S+x.byteOffset,H=0;H<t;H++)D[L+H]=A[R?H:t-H-1]};SPe?(bP=kPe&&Do.name!==kf,!xP(function(){Do(1)})||!xP(function(){new Do(-1)})||xP(function(){return new Do,new Do(1.5),new Do(NaN),Do.length!==1||bP&&!p8})?(Ma=function(t){return Lb(this,Of),RPe(new Do(Fb(t)),this,Ma)},Ma[Df]=Of,Of.constructor=Ma,OPe(Ma,Do)):bP&&p8&&TPe(Do,"name",kf),f8&&APe(yh)!==v8&&f8(yh,v8),Pv=new bs(new Ma(2)),wP=SP(yh.setInt8),Pv.setInt8(0,2147483648),Pv.setInt8(1,2147483649),(Pv.getInt8(0)||!Pv.getInt8(1))&&d8(yh,{setInt8:function(t,n){wP(this,t,n<<24>>24)},setUint8:function(t,n){wP(this,t,n<<24>>24)}},{unsafe:!0})):(Ma=function(t){Lb(this,Of);var n=Fb(t);g8(this,{type:kf,bytes:zPe(LPe(n),0),byteLength:n}),_P||(this.byteLength=n,this.detached=!1)},Of=Ma[Df],bs=function(t,n,u){Lb(this,yh),Lb(t,Of);var c=m8(t),a=c.byteLength,x=IPe(n);if(x<0||x>a)throw new Nb("Wrong offset");if(u=u===void 0?a-x:qPe(u),x+u>a)throw new Nb(DPe);g8(this,{type:jb,buffer:t,byteLength:u,byteOffset:x,bytes:c.bytes}),_P||(this.buffer=t,this.byteLength=u,this.byteOffset=x)},yh=bs[Df],_P&&(zb(Ma,"byteLength",m8),zb(bs,"buffer",Av),zb(bs,"byteLength",Av),zb(bs,"byteOffset",Av)),d8(yh,{getInt8:function(t){return $u(this,1,t)[0]<<24>>24},getUint8:function(t){return $u(this,1,t)[0]},getInt16:function(t){var n=$u(this,2,t,arguments.length>1?arguments[1]:!1);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=$u(this,2,t,arguments.length>1?arguments[1]:!1);return n[1]<<8|n[0]},getInt32:function(t){return w8($u(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return w8($u(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return y8($u(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return y8($u(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,n){Vu(this,1,t,_8,n)},setUint8:function(t,n){Vu(this,1,t,_8,n)},setInt16:function(t,n){Vu(this,2,t,x8,n,arguments.length>2?arguments[2]:!1)},setUint16:function(t,n){Vu(this,2,t,x8,n,arguments.length>2?arguments[2]:!1)},setInt32:function(t,n){Vu(this,4,t,b8,n,arguments.length>2?arguments[2]:!1)},setUint32:function(t,n){Vu(this,4,t,b8,n,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,n){Vu(this,4,t,NPe,n,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,n){Vu(this,8,t,BPe,n,arguments.length>2?arguments[2]:!1)}}));var bP,Pv,wP;E8(Ma,kf);E8(bs,jb);P8.exports={ArrayBuffer:Ma,DataView:bs}});var C8=P(()=>{"use strict";p();var jPe=K(),UPe=Qe(),$Pe=Cv(),VPe=Uu(),EP="ArrayBuffer",A8=$Pe[EP],GPe=UPe[EP];jPe({global:!0,constructor:!0,forced:GPe!==A8},{ArrayBuffer:A8});VPe(EP)});var Bt=P((KTt,B8)=>{"use strict";p();var ZPe=qv(),AP=pt(),Bn=Qe(),k8=kt(),Vb=_t(),Zu=Dt(),CP=Fn(),WPe=Cu(),HPe=Si(),IP=or(),KPe=wr(),XPe=un(),Gb=Ti(),zf=eo(),YPe=xt(),JPe=Mu(),D8=rr(),L8=D8.enforce,QPe=D8.get,Ub=Bn.Int8Array,qP=Ub&&Ub.prototype,M8=Bn.Uint8ClampedArray,R8=M8&&M8.prototype,ws=Ub&&Gb(Ub),Lo=qP&&Gb(qP),eAe=Object.prototype,MP=Bn.TypeError,O8=YPe("toStringTag"),PP=JPe("TYPED_ARRAY_TAG"),$b="TypedArrayConstructor",_l=ZPe&&!!zf&&CP(Bn.opera)!=="Opera",z8=!1,aa,Gu,Lf,xl={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},RP={BigInt64Array:8,BigUint64Array:8},tAe=function(t){if(!Vb(t))return!1;var n=CP(t);return n==="DataView"||Zu(xl,n)||Zu(RP,n)},F8=function(e){var t=Gb(e);if(Vb(t)){var n=QPe(t);return n&&Zu(n,$b)?n[$b]:F8(t)}},N8=function(e){if(!Vb(e))return!1;var t=CP(e);return Zu(xl,t)||Zu(RP,t)},rAe=function(e){if(N8(e))return e;throw new MP("Target is not a typed array")},iAe=function(e){if(k8(e)&&(!zf||XPe(ws,e)))return e;throw new MP(WPe(e)+" is not a typed array constructor")},nAe=function(e,t,n,u){if(AP){if(n)for(var c in xl){var a=Bn[c];if(a&&Zu(a.prototype,e))try{delete a.prototype[e]}catch(x){try{a.prototype[e]=t}catch(S){}}}(!Lo[e]||n)&&IP(Lo,e,n?t:_l&&qP[e]||t,u)}},aAe=function(e,t,n){var u,c;if(AP){if(zf){if(n){for(u in xl)if(c=Bn[u],c&&Zu(c,e))try{delete c[e]}catch(a){}}if(!ws[e]||n)try{return IP(ws,e,n?t:_l&&ws[e]||t)}catch(a){}else return}for(u in xl)c=Bn[u],c&&(!c[e]||n)&&IP(c,e,t)}};for(aa in xl)Gu=Bn[aa],Lf=Gu&&Gu.prototype,Lf?L8(Lf)[$b]=Gu:_l=!1;for(aa in RP)Gu=Bn[aa],Lf=Gu&&Gu.prototype,Lf&&(L8(Lf)[$b]=Gu);if((!_l||!k8(ws)||ws===Function.prototype)&&(ws=function(){throw new MP("Incorrect invocation")},_l))for(aa in xl)Bn[aa]&&zf(Bn[aa],ws);if((!_l||!Lo||Lo===eAe)&&(Lo=ws.prototype,_l))for(aa in xl)Bn[aa]&&zf(Bn[aa].prototype,Lo);_l&&Gb(R8)!==Lo&&zf(R8,Lo);if(AP&&!Zu(Lo,O8)){z8=!0,KPe(Lo,O8,{configurable:!0,get:function(){return Vb(this)?this[PP]:void 0}});for(aa in xl)Bn[aa]&&HPe(Bn[aa],PP,aa)}B8.exports={NATIVE_ARRAY_BUFFER_VIEWS:_l,TYPED_ARRAY_TAG:z8&&PP,aTypedArray:rAe,aTypedArrayConstructor:iAe,exportTypedArrayMethod:nAe,exportTypedArrayStaticMethod:aAe,getTypedArrayConstructor:F8,isView:tAe,isTypedArray:N8,TypedArray:ws,TypedArrayPrototype:Lo}});var U8=P(()=>{"use strict";p();var oAe=K(),j8=Bt(),sAe=j8.NATIVE_ARRAY_BUFFER_VIEWS;oAe({target:"ArrayBuffer",stat:!0,forced:!sAe},{isView:j8.isView})});var H8=P(()=>{"use strict";p();var lAe=K(),kP=Ou(),uAe=Ue(),Z8=Cv(),$8=rt(),V8=Ro(),cAe=ra(),DP=Z8.ArrayBuffer,OP=Z8.DataView,W8=OP.prototype,G8=kP(DP.prototype.slice),hAe=kP(W8.getUint8),dAe=kP(W8.setUint8),fAe=uAe(function(){return!new DP(2).slice(1,void 0).byteLength});lAe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:fAe},{slice:function(t,n){if(G8&&n===void 0)return G8($8(this),t);for(var u=$8(this).byteLength,c=V8(t,u),a=V8(n===void 0?u:n,u),x=new DP(cAe(a-c)),S=new OP(this),A=new OP(x),R=0;c<a;)dAe(A,R++,hAe(S,c++));return x}})});var K8=P(()=>{"use strict";p();var pAe=K(),mAe=Cv(),gAe=qv();pAe({global:!0,constructor:!0,forced:!gAe},{DataView:mAe.DataView})});var X8=P(()=>{"use strict";p();K8()});var LP=P(()=>{"use strict";p();var vAe=K(),yAe=Fe(),eG=Math.pow,Y8=31,_Ae=1023,J8=eG(2,-24),Q8=.0009765625,xAe=function(e){var t=e>>>15,n=e>>>10&Y8,u=e&_Ae;return n===Y8?u===0?t===0?1/0:-1/0:NaN:n===0?u*(t===0?J8:-J8):eG(2,n-15)*(t===0?1+u*Q8:-1-u*Q8)},bAe=yAe(DataView.prototype.getUint16);vAe({target:"DataView",proto:!0},{getFloat16:function(t){var n=bAe(this,t,arguments.length>1?arguments[1]:!1);return xAe(n)}})});var zP=P((dEt,tG)=>{"use strict";p();var wAe=Fn(),SAe=TypeError;tG.exports=function(e){if(wAe(e)==="DataView")return e;throw new SAe("Argument is not a DataView")}});var FP=P((pEt,rG)=>{"use strict";p();var TAe=Math.log,EAe=Math.LN2;rG.exports=Math.log2||function(t){return TAe(t)/EAe}});var BP=P(()=>{"use strict";p();var IAe=K(),qAe=Fe(),PAe=zP(),AAe=Rf(),CAe=FP(),iG=vP(),MAe=Math.pow,RAe=65520,OAe=61005353927612305e-21,kAe=16777216,NP=1024,DAe=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=RAe)return t<<15|31744;if(e<OAe)return t<<15|iG(e*kAe);var n=CAe(e)|0;if(n===-15)return t<<15|NP;var u=iG((e*MAe(2,-n)-1)*NP);return u===NP?t<<15|n+16<<10:t<<15|n+15<<10|u},LAe=qAe(DataView.prototype.setUint16);IAe({target:"DataView",proto:!0},{setFloat16:function(t,n){PAe(this);var u=AAe(t),c=DAe(+n);return LAe(this,u,c,arguments.length>2?arguments[2]:!1)}})});var jP=P((_Et,oG)=>{"use strict";p();var aG=Qe(),zAe=vv(),FAe=ln(),nG=aG.ArrayBuffer,NAe=aG.TypeError;oG.exports=nG&&zAe(nG.prototype,"byteLength","get")||function(e){if(FAe(e)!=="ArrayBuffer")throw new NAe("ArrayBuffer expected");return e.byteLength}});var UP=P((bEt,sG)=>{"use strict";p();var BAe=Qe(),jAe=qv(),UAe=jP(),$Ae=BAe.DataView;sG.exports=function(e){if(!jAe||UAe(e)!==0)return!1;try{return new $Ae(e),!1}catch(t){return!0}}});var $P=P(()=>{"use strict";p();var VAe=pt(),GAe=wr(),ZAe=UP(),lG=ArrayBuffer.prototype;VAe&&!("detached"in lG)&&GAe(lG,"detached",{configurable:!0,get:function(){return ZAe(this)}})});var Ff=P((IEt,uG)=>{"use strict";p();var WAe=UP(),HAe=TypeError;uG.exports=function(e){if(WAe(e))throw new HAe("ArrayBuffer is detached");return e}});var VP=P((PEt,cG)=>{"use strict";p();var KAe=Qe(),XAe=vh();cG.exports=function(e){if(XAe){try{return KAe.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var Zb=P((CEt,dG)=>{"use strict";p();var YAe=Qe(),JAe=Ue(),GP=Co(),ZP=Iv(),hG=YAe.structuredClone;dG.exports=!!hG&&!JAe(function(){if(ZP==="DENO"&&GP>92||ZP==="NODE"&&GP>94||ZP==="BROWSER"&&GP>97)return!1;var e=new ArrayBuffer(8),t=hG(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var YP=P((REt,mG)=>{"use strict";p();var XP=Qe(),QAe=VP(),eCe=Zb(),tCe=XP.structuredClone,fG=XP.ArrayBuffer,Wb=XP.MessageChannel,KP=!1,WP,pG,Hb,HP;if(eCe)KP=function(e){tCe(e,{transfer:[e]})};else if(fG)try{Wb||(WP=QAe("worker_threads"),WP&&(Wb=WP.MessageChannel)),Wb&&(pG=new Wb,Hb=new fG(2),HP=function(e){pG.port1.postMessage(null,[e])},Hb.byteLength===2&&(HP(Hb),Hb.byteLength===0&&(KP=HP)))}catch(e){}mG.exports=KP});var iA=P((kEt,wG)=>{"use strict";p();var eA=Qe(),tA=Fe(),_G=vv(),rCe=Rf(),iCe=Ff(),nCe=jP(),gG=YP(),JP=Zb(),aCe=eA.structuredClone,xG=eA.ArrayBuffer,QP=eA.DataView,oCe=Math.min,rA=xG.prototype,bG=QP.prototype,sCe=tA(rA.slice),vG=_G(rA,"resizable","get"),yG=_G(rA,"maxByteLength","get"),lCe=tA(bG.getInt8),uCe=tA(bG.setInt8);wG.exports=(JP||gG)&&function(e,t,n){var u=nCe(e),c=t===void 0?u:rCe(t),a=!vG||!vG(e),x;if(iCe(e),JP&&(e=aCe(e,{transfer:[e]}),u===c&&(n||a)))return e;if(u>=c&&(!n||a))x=sCe(e,0,c);else{var S=n&&!a&&yG?{maxByteLength:yG(e)}:void 0;x=new xG(c,S);for(var A=new QP(e),R=new QP(x),D=oCe(c,u),L=0;L<D;L++)uCe(R,L,lCe(A,L))}return JP||gG(e),x}});var nA=P(()=>{"use strict";p();var cCe=K(),SG=iA();SG&&cCe({target:"ArrayBuffer",proto:!0},{transfer:function(){return SG(this,arguments.length?arguments[0]:void 0,!0)}})});var aA=P(()=>{"use strict";p();var hCe=K(),TG=iA();TG&&hCe({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return TG(this,arguments.length?arguments[0]:void 0,!1)}})});var EG=P(()=>{"use strict";p();var dCe=K(),fCe=Fe(),pCe=Ue(),mCe=pCe(function(){return new Date(16e11).getYear()!==120}),gCe=fCe(Date.prototype.getFullYear);dCe({target:"Date",proto:!0,forced:mCe},{getYear:function(){return gCe(this)-1900}})});var qG=P(()=>{"use strict";p();var vCe=K(),yCe=Fe(),IG=Date,_Ce=yCe(IG.prototype.getTime);vCe({target:"Date",stat:!0},{now:function(){return _Ce(new IG)}})});var CG=P(()=>{"use strict";p();var xCe=K(),PG=Fe(),bCe=br(),AG=Date.prototype,wCe=PG(AG.getTime),SCe=PG(AG.setFullYear);xCe({target:"Date",proto:!0},{setYear:function(t){wCe(this);var n=bCe(t),u=n>=0&&n<=99?n+1900:n;return SCe(this,u)}})});var MG=P(()=>{"use strict";p();var TCe=K();TCe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Mv=P((eIt,RG)=>{"use strict";p();var ECe=br(),ICe=It(),qCe=vr(),PCe=RangeError;RG.exports=function(t){var n=ICe(qCe(this)),u="",c=ECe(t);if(c<0||c===1/0)throw new PCe("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(n+=n))c&1&&(u+=n);return u}});var Rv=P((rIt,LG)=>{"use strict";p();var DG=Fe(),ACe=ra(),OG=It(),CCe=Mv(),MCe=vr(),RCe=DG(CCe),OCe=DG("".slice),kCe=Math.ceil,kG=function(e){return function(t,n,u){var c=OG(MCe(t)),a=ACe(n),x=c.length,S=u===void 0?" ":OG(u),A,R;return a<=x||S===""?c:(A=a-x,R=RCe(S,kCe(A/S.length)),R.length>A&&(R=OCe(R,0,A)),e?c+R:R+c)}};LG.exports={start:kG(!1),end:kG(!0)}});var NG=P((nIt,FG)=>{"use strict";p();var Wu=Fe(),zG=Ue(),_h=Rv().start,DCe=RangeError,LCe=isFinite,zCe=Math.abs,bl=Date.prototype,oA=bl.toISOString,FCe=Wu(bl.getTime),NCe=Wu(bl.getUTCDate),BCe=Wu(bl.getUTCFullYear),jCe=Wu(bl.getUTCHours),UCe=Wu(bl.getUTCMilliseconds),$Ce=Wu(bl.getUTCMinutes),VCe=Wu(bl.getUTCMonth),GCe=Wu(bl.getUTCSeconds);FG.exports=zG(function(){return oA.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!zG(function(){oA.call(new Date(NaN))})?function(){if(!LCe(FCe(this)))throw new DCe("Invalid time value");var t=this,n=BCe(t),u=UCe(t),c=n<0?"-":n>9999?"+":"";return c+_h(zCe(n),c?6:4,0)+"-"+_h(VCe(t)+1,2,0)+"-"+_h(NCe(t),2,0)+"T"+_h(jCe(t),2,0)+":"+_h($Ce(t),2,0)+":"+_h(GCe(t),2,0)+"."+_h(u,3,0)+"Z"}:oA});var jG=P(()=>{"use strict";p();var ZCe=K(),BG=NG();ZCe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==BG},{toISOString:BG})});var UG=P(()=>{"use strict";p();var WCe=K(),HCe=Ue(),KCe=$t(),XCe=rv(),YCe=HCe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});WCe({target:"Date",proto:!0,arity:1,forced:YCe},{toJSON:function(t){var n=KCe(this),u=XCe(n,"number");return typeof u=="number"&&!isFinite(u)?null:n.toISOString()}})});var VG=P((dIt,$G)=>{"use strict";p();var JCe=rt(),QCe=Mq(),eMe=TypeError;$G.exports=function(e){if(JCe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new eMe("Incorrect hint");return QCe(this,e)}});var WG=P(()=>{"use strict";p();var tMe=Dt(),rMe=or(),iMe=VG(),nMe=xt(),GG=nMe("toPrimitive"),ZG=Date.prototype;tMe(ZG,GG)||rMe(ZG,GG,iMe)});var YG=P(()=>{"use strict";p();var KG=Fe(),aMe=or(),sA=Date.prototype,HG="Invalid Date",XG="toString",oMe=KG(sA[XG]),sMe=KG(sA.getTime);String(new Date(NaN))!==HG&&aMe(sA,XG,function(){var t=sMe(this);return t===t?oMe(this):HG})});var QG=P(()=>{"use strict";p();var lMe=K(),Ov=Fe(),uMe=It(),cMe=Ov("".charAt),hMe=Ov("".charCodeAt),dMe=Ov(/./.exec),fMe=Ov(1 .toString),pMe=Ov("".toUpperCase),mMe=/[\w*+\-./@]/,JG=function(e,t){for(var n=fMe(e,16);n.length<t;)n="0"+n;return n};lMe({global:!0},{escape:function(t){for(var n=uMe(t),u="",c=n.length,a=0,x,S;a<c;)x=cMe(n,a++),dMe(mMe,x)?u+=x:(S=hMe(x,0),S<256?u+="%"+JG(S,2):u+="%u"+pMe(JG(S,4)));return u}})});var uA=P((SIt,iZ)=>{"use strict";p();var tZ=Fe(),gMe=St(),vMe=_t(),yMe=Dt(),eZ=ia(),_Me=bf(),rZ=Function,xMe=tZ([].concat),bMe=tZ([].join),lA={},wMe=function(e,t,n){if(!yMe(lA,t)){for(var u=[],c=0;c<t;c++)u[c]="a["+c+"]";lA[t]=rZ("C,a","return new C("+bMe(u,",")+")")}return lA[t](e,n)};iZ.exports=_Me?rZ.bind:function(t){var n=gMe(this),u=n.prototype,c=eZ(arguments,1),a=function(){var S=xMe(c,eZ(arguments));return this instanceof a?wMe(n,S.length,S):n.apply(t,S)};return vMe(u)&&(a.prototype=u),a}});var aZ=P(()=>{"use strict";p();var SMe=K(),nZ=uA();SMe({target:"Function",proto:!0,forced:Function.bind!==nZ},{bind:nZ})});var lZ=P(()=>{"use strict";p();var TMe=kt(),oZ=_t(),EMe=gr(),IMe=un(),qMe=xt(),PMe=sv(),cA=qMe("hasInstance"),sZ=Function.prototype;cA in sZ||EMe.f(sZ,cA,{value:PMe(function(e){if(!TMe(this)||!oZ(e))return!1;var t=this.prototype;return oZ(t)?IMe(t,e):e instanceof this},cA)})});var dZ=P(()=>{"use strict";p();var AMe=pt(),CMe=sh().EXISTS,uZ=Fe(),MMe=wr(),cZ=Function.prototype,RMe=uZ(cZ.toString),hZ=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,OMe=uZ(hZ.exec),kMe="name";AMe&&!CMe&&MMe(cZ,kMe,{configurable:!0,get:function(){try{return OMe(hZ,RMe(this))[1]}catch(e){return""}}})});var dA=P(()=>{"use strict";p();var DMe=K(),hA=Qe();DMe({global:!0,forced:hA.globalThis!==hA},{globalThis:hA})});var vA=P(()=>{"use strict";p();var LMe=K(),zMe=Qe(),FMe=In(),NMe=rt(),BMe=kt(),jMe=Ti(),UMe=wr(),$Me=to(),VMe=Ue(),mA=Dt(),GMe=xt(),Ss=Nu().IteratorPrototype,ZMe=pt(),WMe=Yt(),fA="constructor",pZ="Iterator",fZ=GMe("toStringTag"),mZ=TypeError,pA=zMe[pZ],gZ=WMe||!BMe(pA)||pA.prototype!==Ss||!VMe(function(){pA({})}),gA=function(){if(FMe(this,Ss),jMe(this)===Ss)throw new mZ("Abstract class Iterator not directly constructable")},vZ=function(e,t){ZMe?UMe(Ss,e,{configurable:!0,get:function(){return t},set:function(n){if(NMe(this),this===Ss)throw new mZ("You can't redefine this property");mA(this,e)?this[e]=n:$Me(this,e,n)}}):Ss[e]=t};mA(Ss,fZ)||vZ(fZ,pZ);(gZ||!mA(Ss,fA)||Ss[fA]===Object)&&vZ(fA,gA);gA.prototype=Ss;LMe({global:!0,constructor:!0,forced:gZ},{Iterator:gA})});var Cr=P((BIt,yZ)=>{"use strict";p();yZ.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var Nf=P((UIt,_Z)=>{"use strict";p();var HMe=RangeError;_Z.exports=function(e){if(e===e)return e;throw new HMe("NaN is not allowed")}});var Bf=P((VIt,xZ)=>{"use strict";p();var KMe=br(),XMe=RangeError;xZ.exports=function(e){var t=KMe(e);if(t<0)throw new XMe("The argument can't be less than 0");return t}});var Hu=P((ZIt,IZ)=>{"use strict";p();var YMe=et(),JMe=ei(),QMe=Si(),eRe=io(),tRe=xt(),bZ=rr(),rRe=Qr(),iRe=Nu().IteratorPrototype,Kb=ki(),yA=Zi(),nRe=tRe("toStringTag"),wZ="IteratorHelper",SZ="WrapForValidIterator",aRe=bZ.set,TZ=function(e){var t=bZ.getterFor(e?SZ:wZ);return eRe(JMe(iRe),{next:function(){var u=t(this);if(e)return u.nextHandler();if(u.done)return Kb(void 0,!0);try{var c=u.nextHandler();return u.returnHandlerResult?c:Kb(c,u.done)}catch(a){throw u.done=!0,a}},return:function(){var n=t(this),u=n.iterator;if(n.done=!0,e){var c=rRe(u,"return");return c?YMe(c,u):Kb(void 0,!0)}if(n.inner)try{yA(n.inner.iterator,"normal")}catch(a){return yA(u,"throw",a)}return u&&yA(u,"normal"),Kb(void 0,!0)}})},oRe=TZ(!0),EZ=TZ(!1);QMe(EZ,nRe,"Iterator Helper");IZ.exports=function(e,t,n){var u=function(a,x){x?(x.iterator=a.iterator,x.next=a.next):x=a,x.type=t?SZ:wZ,x.returnHandlerResult=!!n,x.nextHandler=e,x.counter=0,x.done=!1,aRe(this,x)};return u.prototype=t?oRe:EZ,u}});var zo=P((HIt,qZ)=>{"use strict";p();var sRe=Qe();qZ.exports=function(e,t){var n=sRe.Iterator,u=n&&n.prototype,c=u&&u[e],a=!1;if(c)try{c.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(x){x instanceof t||(a=!1)}if(!a)return c}});var wA=P(()=>{"use strict";p();var lRe=K(),xA=et(),bA=rt(),uRe=Cr(),cRe=Nf(),hRe=Bf(),dRe=Zi(),fRe=Hu(),pRe=zo(),PZ=Yt(),_A=!PZ&&pRe("drop",RangeError),mRe=fRe(function(){for(var e=this.iterator,t=this.next,n,u;this.remaining;)if(this.remaining--,n=bA(xA(t,e)),u=this.done=!!n.done,u)return;if(n=bA(xA(t,e)),u=this.done=!!n.done,!u)return n.value});lRe({target:"Iterator",proto:!0,real:!0,forced:PZ||_A},{drop:function(t){bA(this);var n;try{n=hRe(cRe(+t))}catch(u){dRe(this,"throw",u)}return _A?xA(_A,this,n):new mRe(uRe(this),{remaining:n})}})});var TA=P(()=>{"use strict";p();var gRe=K(),vRe=et(),yRe=Fr(),_Re=St(),xRe=rt(),bRe=Cr(),wRe=Zi(),SRe=zo(),SA=SRe("every",TypeError);gRe({target:"Iterator",proto:!0,real:!0,forced:SA},{every:function(t){xRe(this);try{_Re(t)}catch(c){wRe(this,"throw",c)}if(SA)return vRe(SA,this,t);var n=bRe(this),u=0;return!yRe(n,function(c,a){if(!t(c,u++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var IA=P(()=>{"use strict";p();var TRe=K(),AZ=et(),ERe=St(),CZ=rt(),IRe=Cr(),qRe=Hu(),PRe=Eb(),MZ=Yt(),ARe=Zi(),CRe=zo(),EA=!MZ&&CRe("filter",TypeError),MRe=qRe(function(){for(var e=this.iterator,t=this.predicate,n=this.next,u,c,a;;){if(u=CZ(AZ(n,e)),c=this.done=!!u.done,c)return;if(a=u.value,PRe(e,t,[a,this.counter++],!0))return a}});TRe({target:"Iterator",proto:!0,real:!0,forced:MZ||EA},{filter:function(t){CZ(this);try{ERe(t)}catch(n){ARe(this,"throw",n)}return EA?AZ(EA,this,t):new MRe(IRe(this),{predicate:t})}})});var PA=P(()=>{"use strict";p();var RRe=K(),ORe=et(),kRe=Fr(),DRe=St(),LRe=rt(),zRe=Cr(),FRe=Zi(),NRe=zo(),qA=NRe("find",TypeError);RRe({target:"Iterator",proto:!0,real:!0,forced:qA},{find:function(t){LRe(this);try{DRe(t)}catch(c){FRe(this,"throw",c)}if(qA)return ORe(qA,this,t);var n=zRe(this),u=0;return kRe(n,function(c,a){if(t(c,u++))return a(c)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var AA=P((lqt,OZ)=>{"use strict";p();var BRe=et(),RZ=rt(),jRe=Cr(),URe=xs();OZ.exports=function(e,t){(!t||typeof e!="string")&&RZ(e);var n=URe(e);return jRe(RZ(n!==void 0?BRe(n,e):e))}});var kA=P(()=>{"use strict";p();var $Re=K(),MA=et(),VRe=St(),RA=rt(),GRe=Cr(),ZRe=AA(),WRe=Hu(),OA=Zi(),kZ=Yt(),HRe=zo(),CA=!kZ&&HRe("flatMap",TypeError),KRe=WRe(function(){for(var e=this.iterator,t=this.mapper,n,u;;){if(u=this.inner)try{if(n=RA(MA(u.next,u.iterator)),!n.done)return n.value;this.inner=null}catch(c){OA(e,"throw",c)}if(n=RA(MA(this.next,e)),this.done=!!n.done)return;try{this.inner=ZRe(t(n.value,this.counter++),!1)}catch(c){OA(e,"throw",c)}}});$Re({target:"Iterator",proto:!0,real:!0,forced:kZ||CA},{flatMap:function(t){RA(this);try{VRe(t)}catch(n){OA(this,"throw",n)}return CA?MA(CA,this,t):new KRe(GRe(this),{mapper:t,inner:null})}})});var LA=P(()=>{"use strict";p();var XRe=K(),YRe=et(),JRe=Fr(),QRe=St(),eOe=rt(),tOe=Cr(),rOe=Zi(),iOe=zo(),DA=iOe("forEach",TypeError);XRe({target:"Iterator",proto:!0,real:!0,forced:DA},{forEach:function(t){eOe(this);try{QRe(t)}catch(c){rOe(this,"throw",c)}if(DA)return YRe(DA,this,t);var n=tOe(this),u=0;JRe(n,function(c){t(c,u++)},{IS_RECORD:!0})}})});var zA=P(()=>{"use strict";p();var nOe=K(),aOe=et(),oOe=$t(),sOe=un(),lOe=Nu().IteratorPrototype,uOe=Hu(),cOe=AA(),hOe=Yt(),dOe=uOe(function(){return aOe(this.next,this.iterator)},!0);nOe({target:"Iterator",stat:!0,forced:hOe},{from:function(t){var n=cOe(typeof t=="string"?oOe(t):t,!0);return sOe(lOe,n.iterator)?n.iterator:new dOe(n)}})});var Xb=P(()=>{"use strict";p();var fOe=K(),DZ=et(),pOe=St(),LZ=rt(),mOe=Cr(),gOe=Hu(),vOe=Eb(),yOe=Zi(),_Oe=zo(),zZ=Yt(),FA=!zZ&&_Oe("map",TypeError),xOe=gOe(function(){var e=this.iterator,t=LZ(DZ(this.next,e)),n=this.done=!!t.done;if(!n)return vOe(e,this.mapper,[t.value,this.counter++],!0)});fOe({target:"Iterator",proto:!0,real:!0,forced:zZ||FA},{map:function(t){LZ(this);try{pOe(t)}catch(n){yOe(this,"throw",n)}return FA?DZ(FA,this,t):new xOe(mOe(this),{mapper:t})}})});var BA=P(()=>{"use strict";p();var bOe=K(),wOe=Fr(),SOe=St(),TOe=rt(),EOe=Cr(),IOe=Zi(),qOe=zo(),POe=cn(),AOe=Ue(),FZ=TypeError,NZ=AOe(function(){[].keys().reduce(function(){},void 0)}),NA=!NZ&&qOe("reduce",FZ);bOe({target:"Iterator",proto:!0,real:!0,forced:NZ||NA},{reduce:function(t){TOe(this);try{SOe(t)}catch(x){IOe(this,"throw",x)}var n=arguments.length<2,u=n?void 0:arguments[1];if(NA)return POe(NA,this,n?[t]:[t,u]);var c=EOe(this),a=0;if(wOe(c,function(x){n?(n=!1,u=x):u=t(u,x,a),a++},{IS_RECORD:!0}),n)throw new FZ("Reduce of empty iterator with no initial value");return u}})});var UA=P(()=>{"use strict";p();var COe=K(),MOe=et(),ROe=Fr(),OOe=St(),kOe=rt(),DOe=Cr(),LOe=Zi(),zOe=zo(),jA=zOe("some",TypeError);COe({target:"Iterator",proto:!0,real:!0,forced:jA},{some:function(t){kOe(this);try{OOe(t)}catch(c){LOe(this,"throw",c)}if(jA)return MOe(jA,this,t);var n=DOe(this),u=0;return ROe(n,function(c,a){if(t(c,u++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var VA=P(()=>{"use strict";p();var FOe=K(),BZ=et(),jZ=rt(),NOe=Cr(),BOe=Nf(),jOe=Bf(),UOe=Hu(),UZ=Zi(),$Oe=zo(),$Z=Yt(),$A=!$Z&&$Oe("take",RangeError),VOe=UOe(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,UZ(e,"normal",void 0);var t=jZ(BZ(this.next,e)),n=this.done=!!t.done;if(!n)return t.value});FOe({target:"Iterator",proto:!0,real:!0,forced:$Z||$A},{take:function(t){jZ(this);var n;try{n=jOe(BOe(+t))}catch(u){UZ(this,"throw",u)}return $A?BZ($A,this,n):new VOe(NOe(this),{remaining:n})}})});var GA=P(()=>{"use strict";p();var GOe=K(),ZOe=rt(),WOe=Fr(),HOe=Cr(),KOe=[].push;GOe({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return WOe(HOe(ZOe(this)),KOe,{that:t,IS_RECORD:!0}),t}})});var VZ=P(()=>{"use strict";p();var XOe=Qe(),YOe=Nn();YOe(XOe.JSON,"JSON",!0)});var Yb=P((zqt,GZ)=>{"use strict";p();var JOe=Ue();GZ.exports=JOe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var Qb=P((Nqt,WZ)=>{"use strict";p();var QOe=Ue(),eke=_t(),tke=ln(),ZZ=Yb(),Jb=Object.isExtensible,rke=QOe(function(){Jb(1)});WZ.exports=rke||ZZ?function(t){return!eke(t)||ZZ&&tke(t)==="ArrayBuffer"?!1:Jb?Jb(t):!0}:Jb});var wl=P((jqt,HZ)=>{"use strict";p();var ike=Ue();HZ.exports=!ike(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Ku=P(($qt,YZ)=>{"use strict";p();var nke=K(),ake=Fe(),oke=Sf(),ske=_t(),ZA=Dt(),lke=gr().f,KZ=Ru(),uke=ob(),WA=Qb(),cke=Mu(),hke=wl(),XZ=!1,Sl=cke("meta"),dke=0,HA=function(e){lke(e,Sl,{value:{objectID:"O"+dke++,weakData:{}}})},fke=function(e,t){if(!ske(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!ZA(e,Sl)){if(!WA(e))return"F";if(!t)return"E";HA(e)}return e[Sl].objectID},pke=function(e,t){if(!ZA(e,Sl)){if(!WA(e))return!0;if(!t)return!1;HA(e)}return e[Sl].weakData},mke=function(e){return hke&&XZ&&WA(e)&&!ZA(e,Sl)&&HA(e),e},gke=function(){vke.enable=function(){},XZ=!0;var e=KZ.f,t=ake([].splice),n={};n[Sl]=1,e(n).length&&(KZ.f=function(u){for(var c=e(u),a=0,x=c.length;a<x;a++)if(c[a]===Sl){t(c,a,1);break}return c},nke({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:uke.f}))},vke=YZ.exports={enable:gke,fastKey:fke,getWeakData:pke,onFreeze:mke};oke[Sl]=!0});var kv=P((Gqt,QZ)=>{"use strict";p();var yke=K(),_ke=Qe(),xke=Fe(),JZ=Ef(),bke=or(),wke=Ku(),Ske=Fr(),Tke=In(),Eke=kt(),Ike=ta(),KA=_t(),XA=Ue(),qke=xv(),Pke=Nn(),Ake=Lu();QZ.exports=function(e,t,n){var u=e.indexOf("Map")!==-1,c=e.indexOf("Weak")!==-1,a=u?"set":"add",x=_ke[e],S=x&&x.prototype,A=x,R={},D=function(ee){var oe=xke(S[ee]);bke(S,ee,ee==="add"?function(Ae){return oe(this,Ae===0?0:Ae),this}:ee==="delete"?function(Te){return c&&!KA(Te)?!1:oe(this,Te===0?0:Te)}:ee==="get"?function(Ae){return c&&!KA(Ae)?void 0:oe(this,Ae===0?0:Ae)}:ee==="has"?function(Ae){return c&&!KA(Ae)?!1:oe(this,Ae===0?0:Ae)}:function(Ae,it){return oe(this,Ae===0?0:Ae,it),this})},L=JZ(e,!Eke(x)||!(c||S.forEach&&!XA(function(){new x().entries().next()})));if(L)A=n.getConstructor(t,e,u,a),wke.enable();else if(JZ(e,!0)){var H=new A,ce=H[a](c?{}:-0,1)!==H,de=XA(function(){H.has(1)}),ve=qke(function(ee){new x(ee)}),X=!c&&XA(function(){for(var ee=new x,oe=5;oe--;)ee[a](oe,oe);return!ee.has(-0)});ve||(A=t(function(ee,oe){Tke(ee,S);var Te=Ake(new x,ee,A);return Ike(oe)||Ske(oe,Te[a],{that:Te,AS_ENTRIES:u}),Te}),A.prototype=S,S.constructor=A),(de||X)&&(D("delete"),D("has"),u&&D("get")),(X||ce)&&D(a),c&&S.clear&&delete S.clear}return R[e]=A,yke({global:!0,constructor:!0,forced:A!==x},R),Pke(A,e),c||n.setStrong(A,e,u),A}});var JA=P((Wqt,aW)=>{"use strict";p();var eW=ei(),Cke=wr(),tW=io(),Mke=dr(),Rke=In(),Oke=ta(),kke=Fr(),Dke=Pb(),e1=ki(),Lke=Uu(),Dv=pt(),rW=Ku().fastKey,nW=rr(),iW=nW.set,YA=nW.getterFor;aW.exports={getConstructor:function(e,t,n,u){var c=e(function(R,D){Rke(R,a),iW(R,{type:t,index:eW(null),first:null,last:null,size:0}),Dv||(R.size=0),Oke(D)||kke(D,R[u],{that:R,AS_ENTRIES:n})}),a=c.prototype,x=YA(t),S=function(R,D,L){var H=x(R),ce=A(R,D),de,ve;return ce?ce.value=L:(H.last=ce={index:ve=rW(D,!0),key:D,value:L,previous:de=H.last,next:null,removed:!1},H.first||(H.first=ce),de&&(de.next=ce),Dv?H.size++:R.size++,ve!=="F"&&(H.index[ve]=ce)),R},A=function(R,D){var L=x(R),H=rW(D),ce;if(H!=="F")return L.index[H];for(ce=L.first;ce;ce=ce.next)if(ce.key===D)return ce};return tW(a,{clear:function(){for(var D=this,L=x(D),H=L.first;H;)H.removed=!0,H.previous&&(H.previous=H.previous.next=null),H=H.next;L.first=L.last=null,L.index=eW(null),Dv?L.size=0:D.size=0},delete:function(R){var D=this,L=x(D),H=A(D,R);if(H){var ce=H.next,de=H.previous;delete L.index[H.index],H.removed=!0,de&&(de.next=ce),ce&&(ce.previous=de),L.first===H&&(L.first=ce),L.last===H&&(L.last=de),Dv?L.size--:D.size--}return!!H},forEach:function(D){for(var L=x(this),H=Mke(D,arguments.length>1?arguments[1]:void 0),ce;ce=ce?ce.next:L.first;)for(H(ce.value,ce.key,this);ce&&ce.removed;)ce=ce.previous},has:function(D){return!!A(this,D)}}),tW(a,n?{get:function(D){var L=A(this,D);return L&&L.value},set:function(D,L){return S(this,D===0?0:D,L)}}:{add:function(D){return S(this,D=D===0?0:D,D)}}),Dv&&Cke(a,"size",{configurable:!0,get:function(){return x(this).size}}),c},setStrong:function(e,t,n){var u=t+" Iterator",c=YA(t),a=YA(u);Dke(e,t,function(x,S){iW(this,{type:u,target:x,state:c(x),kind:S,last:null})},function(){for(var x=a(this),S=x.kind,A=x.last;A&&A.removed;)A=A.previous;return!x.target||!(x.last=A=A?A.next:x.state.first)?(x.target=null,e1(void 0,!0)):e1(S==="keys"?A.key:S==="values"?A.value:[A.key,A.value],!1)},n?"entries":"values",!n,!0),Lke(t)}}});var oW=P(()=>{"use strict";p();var zke=kv(),Fke=JA();zke("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Fke)});var t1=P(()=>{"use strict";p();oW()});var Di=P((t2t,sW)=>{"use strict";p();var r1=Fe(),Lv=Map.prototype;sW.exports={Map,set:r1(Lv.set),get:r1(Lv.get),has:r1(Lv.has),remove:r1(Lv.delete),proto:Lv}});var QA=P(()=>{"use strict";p();var Nke=K(),Bke=Fe(),jke=St(),Uke=vr(),$ke=Fr(),i1=Di(),lW=Yt(),Vke=Ue(),uW=i1.Map,Gke=i1.has,Zke=i1.get,Wke=i1.set,Hke=Bke([].push),Kke=lW||Vke(function(){return uW.groupBy("ab",function(e){return e}).get("a").length!==1});Nke({target:"Map",stat:!0,forced:lW||Kke},{groupBy:function(t,n){Uke(t),jke(n);var u=new uW,c=0;return $ke(t,function(a){var x=n(a,c++);Gke(u,x)?Hke(Zke(u,x),a):Wke(u,x,[a])}),u}})});var eC=P((o2t,cW)=>{"use strict";p();var Xke=Math.log;cW.exports=Math.log1p||function(t){var n=+t;return n>-1e-8&&n<1e-8?n-n*n/2:Xke(1+n)}});var dW=P(()=>{"use strict";p();var Yke=K(),Jke=eC(),tC=Math.acosh,Qke=Math.log,hW=Math.sqrt,eDe=Math.LN2,tDe=!tC||Math.floor(tC(Number.MAX_VALUE))!==710||tC(1/0)!==1/0;Yke({target:"Math",stat:!0,forced:tDe},{acosh:function(t){var n=+t;return n<1?NaN:n>94906265.62425156?Qke(n)+eDe:Jke(n-1+hW(n-1)*hW(n+1))}})});var mW=P(()=>{"use strict";p();var rDe=K(),fW=Math.asinh,iDe=Math.log,nDe=Math.sqrt;function pW(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-pW(-t):iDe(t+nDe(t*t+1))}var aDe=!(fW&&1/fW(0)>0);rDe({target:"Math",stat:!0,forced:aDe},{asinh:pW})});var vW=P(()=>{"use strict";p();var oDe=K(),gW=Math.atanh,sDe=Math.log,lDe=!(gW&&1/gW(-0)<0);oDe({target:"Math",stat:!0,forced:lDe},{atanh:function(t){var n=+t;return n===0?n:sDe((1+n)/(1-n))/2}})});var yW=P(()=>{"use strict";p();var uDe=K(),cDe=kb(),hDe=Math.abs,dDe=Math.pow;uDe({target:"Math",stat:!0},{cbrt:function(t){var n=+t;return cDe(n)*dDe(hDe(n),1/3)}})});var _W=P(()=>{"use strict";p();var fDe=K(),pDe=Math.floor,mDe=Math.log,gDe=Math.LOG2E;fDe({target:"Math",stat:!0},{clz32:function(t){var n=t>>>0;return n?31-pDe(mDe(n+.5)*gDe):32}})});var Fv=P((S2t,xW)=>{"use strict";p();var zv=Math.expm1,vDe=Math.exp;xW.exports=!zv||zv(10)>22025.465794806718||zv(10)<22025.465794806718||zv(-2e-17)!==-2e-17?function(t){var n=+t;return n===0?n:n>-1e-6&&n<1e-6?n+n*n/2:vDe(n)-1}:zv});var wW=P(()=>{"use strict";p();var yDe=K(),_De=Fv(),bW=Math.cosh,xDe=Math.abs,rC=Math.E,bDe=!bW||bW(710)===1/0;yDe({target:"Math",stat:!0,forced:bDe},{cosh:function(t){var n=_De(xDe(t)-1)+1;return(n+1/(n*rC*rC))*(rC/2)}})});var TW=P(()=>{"use strict";p();var wDe=K(),SW=Fv();wDe({target:"Math",stat:!0,forced:SW!==Math.expm1},{expm1:SW})});var EW=P(()=>{"use strict";p();var SDe=K(),TDe=Db();SDe({target:"Math",stat:!0},{fround:TDe})});var iC=P(()=>{"use strict";p();var EDe=K(),IDe=yP(),qDe=.0009765625,PDe=65504,ADe=6103515625e-14;EDe({target:"Math",stat:!0},{f16round:function(t){return IDe(t,qDe,PDe,ADe)}})});var qW=P(()=>{"use strict";p();var CDe=K(),IW=Math.hypot,MDe=Math.abs,RDe=Math.sqrt,ODe=!!IW&&IW(1/0,NaN)!==1/0;CDe({target:"Math",stat:!0,arity:2,forced:ODe},{hypot:function(t,n){for(var u=0,c=0,a=arguments.length,x=0,S,A;c<a;)S=MDe(arguments[c++]),x<S?(A=x/S,u=u*A*A+1,x=S):S>0?(A=S/x,u+=A*A):u+=S;return x===1/0?1/0:x*RDe(u)}})});var AW=P(()=>{"use strict";p();var kDe=K(),DDe=Ue(),PW=Math.imul,LDe=DDe(function(){return PW(4294967295,5)!==-5||PW.length!==2});kDe({target:"Math",stat:!0,forced:LDe},{imul:function(t,n){var u=65535,c=+t,a=+n,x=u&c,S=u&a;return 0|x*S+((u&c>>>16)*S+x*(u&a>>>16)<<16>>>0)}})});var nC=P(($2t,CW)=>{"use strict";p();var zDe=Math.log,FDe=Math.LOG10E;CW.exports=Math.log10||function(t){return zDe(t)*FDe}});var MW=P(()=>{"use strict";p();var NDe=K(),BDe=nC();NDe({target:"Math",stat:!0},{log10:BDe})});var RW=P(()=>{"use strict";p();var jDe=K(),UDe=eC();jDe({target:"Math",stat:!0},{log1p:UDe})});var OW=P(()=>{"use strict";p();var $De=K(),VDe=FP();$De({target:"Math",stat:!0},{log2:VDe})});var kW=P(()=>{"use strict";p();var GDe=K(),ZDe=kb();GDe({target:"Math",stat:!0},{sign:ZDe})});var zW=P(()=>{"use strict";p();var WDe=K(),HDe=Ue(),DW=Fv(),KDe=Math.abs,LW=Math.exp,XDe=Math.E,YDe=HDe(function(){return Math.sinh(-2e-17)!==-2e-17});WDe({target:"Math",stat:!0,forced:YDe},{sinh:function(t){var n=+t;return KDe(n)<1?(DW(n)-DW(-n))/2:(LW(n-1)-LW(-n-1))*(XDe/2)}})});var BW=P(()=>{"use strict";p();var JDe=K(),FW=Fv(),NW=Math.exp;JDe({target:"Math",stat:!0},{tanh:function(t){var n=+t,u=FW(n),c=FW(-n);return u===1/0?1:c===1/0?-1:(u-c)/(NW(n)+NW(-n))}})});var jW=P(()=>{"use strict";p();var QDe=Nn();QDe(Math,"Math",!0)});var UW=P(()=>{"use strict";p();var eLe=K(),tLe=Kq();eLe({target:"Math",stat:!0},{trunc:tLe})});var Nv=P((mPt,$W)=>{"use strict";p();var rLe=Fe();$W.exports=rLe(1 .valueOf)});var xh=P((vPt,VW)=>{"use strict";p();VW.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var bh=P((_Pt,ZW)=>{"use strict";p();var iLe=Fe(),nLe=vr(),aLe=It(),oC=xh(),GW=iLe("".replace),oLe=RegExp("^["+oC+"]+"),sLe=RegExp("(^|[^"+oC+"])["+oC+"]+$"),aC=function(e){return function(t){var n=aLe(nLe(t));return e&1&&(n=GW(n,oLe,"")),e&2&&(n=GW(n,sLe,"$1")),n}};ZW.exports={start:aC(1),end:aC(2),trim:aC(3)}});var QW=P(()=>{"use strict";p();var lLe=K(),sC=Yt(),uLe=pt(),KW=Qe(),lC=sb(),XW=Fe(),cLe=Ef(),WW=Dt(),hLe=Lu(),dLe=un(),fLe=dl(),YW=rv(),pLe=Ue(),mLe=Ru().f,gLe=Vi().f,vLe=gr().f,yLe=Nv(),_Le=bh().trim,Bv="Number",jf=KW[Bv],HW=lC[Bv],uC=jf.prototype,xLe=KW.TypeError,bLe=XW("".slice),n1=XW("".charCodeAt),wLe=function(e){var t=YW(e,"number");return typeof t=="bigint"?t:SLe(t)},SLe=function(e){var t=YW(e,"number"),n,u,c,a,x,S,A,R;if(fLe(t))throw new xLe("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=_Le(t),n=n1(t,0),n===43||n===45){if(u=n1(t,2),u===88||u===120)return NaN}else if(n===48){switch(n1(t,1)){case 66:case 98:c=2,a=49;break;case 79:case 111:c=8,a=55;break;default:return+t}for(x=bLe(t,2),S=x.length,A=0;A<S;A++)if(R=n1(x,A),R<48||R>a)return NaN;return parseInt(x,c)}}return+t},cC=cLe(Bv,!jf(" 0o1")||!jf("0b1")||jf("+0x1")),TLe=function(e){return dLe(uC,e)&&pLe(function(){yLe(e)})},a1=function(t){var n=arguments.length<1?0:jf(wLe(t));return TLe(this)?hLe(Object(n),this,a1):n};a1.prototype=uC;cC&&!sC&&(uC.constructor=a1);lLe({global:!0,constructor:!0,wrap:!0,forced:cC},{Number:a1});var JW=function(e,t){for(var n=uLe?mLe(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),u=0,c;n.length>u;u++)WW(t,c=n[u])&&!WW(e,c)&&vLe(e,c,gLe(t,c))};sC&&HW&&JW(lC[Bv],HW);(cC||sC)&&JW(lC[Bv],jf)});var eH=P(()=>{"use strict";p();var ELe=K();ELe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var hC=P((qPt,tH)=>{"use strict";p();var ILe=Qe(),qLe=ILe.isFinite;tH.exports=Number.isFinite||function(t){return typeof t=="number"&&qLe(t)}});var rH=P(()=>{"use strict";p();var PLe=K(),ALe=hC();PLe({target:"Number",stat:!0},{isFinite:ALe})});var o1=P((RPt,iH)=>{"use strict";p();var CLe=_t(),MLe=Math.floor;iH.exports=Number.isInteger||function(t){return!CLe(t)&&isFinite(t)&&MLe(t)===t}});var nH=P(()=>{"use strict";p();var RLe=K(),OLe=o1();RLe({target:"Number",stat:!0},{isInteger:OLe})});var aH=P(()=>{"use strict";p();var kLe=K();kLe({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var oH=P(()=>{"use strict";p();var DLe=K(),LLe=o1(),zLe=Math.abs;DLe({target:"Number",stat:!0},{isSafeInteger:function(t){return LLe(t)&&zLe(t)<=9007199254740991}})});var sH=P(()=>{"use strict";p();var FLe=K();FLe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var lH=P(()=>{"use strict";p();var NLe=K();NLe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var dC=P((KPt,dH)=>{"use strict";p();var hH=Qe(),BLe=Ue(),jLe=Fe(),ULe=It(),$Le=bh().trim,VLe=xh(),GLe=jLe("".charAt),s1=hH.parseFloat,uH=hH.Symbol,cH=uH&&uH.iterator,ZLe=1/s1(VLe+"-0")!==-1/0||cH&&!BLe(function(){s1(Object(cH))});dH.exports=ZLe?function(t){var n=$Le(ULe(t)),u=s1(n);return u===0&&GLe(n,0)==="-"?-0:u}:s1});var pH=P(()=>{"use strict";p();var WLe=K(),fH=dC();WLe({target:"Number",stat:!0,forced:Number.parseFloat!==fH},{parseFloat:fH})});var fC=P((eAt,xH)=>{"use strict";p();var yH=Qe(),HLe=Ue(),KLe=Fe(),XLe=It(),YLe=bh().trim,mH=xh(),jv=yH.parseInt,gH=yH.Symbol,vH=gH&&gH.iterator,_H=/^[+-]?0x/i,JLe=KLe(_H.exec),QLe=jv(mH+"08")!==8||jv(mH+"0x16")!==22||vH&&!HLe(function(){jv(Object(vH))});xH.exports=QLe?function(t,n){var u=YLe(XLe(t));return jv(u,n>>>0||(JLe(_H,u)?16:10))}:jv});var wH=P(()=>{"use strict";p();var eze=K(),bH=fC();eze({target:"Number",stat:!0,forced:Number.parseInt!==bH},{parseInt:bH})});var qH=P(()=>{"use strict";p();var tze=K(),mC=Fe(),rze=br(),ize=Nv(),nze=Mv(),aze=nC(),pC=Ue(),oze=RangeError,SH=String,sze=isFinite,lze=Math.abs,uze=Math.floor,TH=Math.pow,cze=Math.round,Ts=mC(1 .toExponential),hze=mC(nze),EH=mC("".slice),IH=Ts(-69e-12,4)==="-6.9000e-11"&&Ts(1.255,2)==="1.25e+0"&&Ts(12345,3)==="1.235e+4"&&Ts(25,0)==="3e+1",dze=function(){return pC(function(){Ts(1,1/0)})&&pC(function(){Ts(1,-1/0)})},fze=function(){return!pC(function(){Ts(1/0,1/0),Ts(NaN,1/0)})},pze=!IH||!dze()||!fze();tze({target:"Number",proto:!0,forced:pze},{toExponential:function(t){var n=ize(this);if(t===void 0)return Ts(n);var u=rze(t);if(!sze(n))return String(n);if(u<0||u>20)throw new oze("Incorrect fraction digits");if(IH)return Ts(n,u);var c="",a,x,S,A;if(n<0&&(c="-",n=-n),n===0)x=0,a=hze("0",u+1);else{var R=aze(n);x=uze(R);var D=TH(10,x-u),L=cze(n/D);2*n>=(2*L+1)*D&&(L+=1),L>=TH(10,u+1)&&(L/=10,x+=1),a=SH(L)}return u!==0&&(a=EH(a,0,1)+"."+EH(a,1)),x===0?(S="+",A="0"):(S=x>0?"+":"-",A=SH(lze(x))),a+="e"+S+A,c+a}})});var OH=P(()=>{"use strict";p();var mze=K(),yC=Fe(),gze=br(),vze=Nv(),yze=Mv(),PH=Ue(),_ze=RangeError,MH=String,RH=Math.floor,vC=yC(yze),AH=yC("".slice),Uv=yC(1 .toFixed),$f=function(e,t,n){return t===0?n:t%2===1?$f(e,t-1,n*e):$f(e*e,t/2,n)},xze=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t},Uf=function(e,t,n){for(var u=-1,c=n;++u<6;)c+=t*e[u],e[u]=c%1e7,c=RH(c/1e7)},gC=function(e,t){for(var n=6,u=0;--n>=0;)u+=e[n],e[n]=RH(u/t),u=u%t*1e7},CH=function(e){for(var t=6,n="";--t>=0;)if(n!==""||t===0||e[t]!==0){var u=MH(e[t]);n=n===""?u:n+vC("0",7-u.length)+u}return n},bze=PH(function(){return Uv(8e-5,3)!=="0.000"||Uv(.9,0)!=="1"||Uv(1.255,2)!=="1.25"||Uv(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!PH(function(){Uv({})});mze({target:"Number",proto:!0,forced:bze},{toFixed:function(t){var n=vze(this),u=gze(t),c=[0,0,0,0,0,0],a="",x="0",S,A,R,D;if(u<0||u>20)throw new _ze("Incorrect fraction digits");if(n!==n)return"NaN";if(n<=-1e21||n>=1e21)return MH(n);if(n<0&&(a="-",n=-n),n>1e-21)if(S=xze(n*$f(2,69,1))-69,A=S<0?n*$f(2,-S,1):n/$f(2,S,1),A*=4503599627370496,S=52-S,S>0){for(Uf(c,0,A),R=u;R>=7;)Uf(c,1e7,0),R-=7;for(Uf(c,$f(10,R,1),0),R=S-1;R>=23;)gC(c,1<<23),R-=23;gC(c,1<<R),Uf(c,1,1),gC(c,2),x=CH(c)}else Uf(c,0,A),Uf(c,1<<-S,0),x=CH(c)+vC("0",u);return u>0?(D=x.length,x=a+(D<=u?"0."+vC("0",u-D)+x:AH(x,0,D-u)+"."+AH(x,D-u))):x=a+x,x}})});var LH=P(()=>{"use strict";p();var wze=K(),Sze=Fe(),kH=Ue(),DH=Nv(),l1=Sze(1 .toPrecision),Tze=kH(function(){return l1(1,void 0)!=="1"})||!kH(function(){l1({})});wze({target:"Number",proto:!0,forced:Tze},{toPrecision:function(t){return t===void 0?l1(DH(this)):l1(DH(this),t)}})});var xC=P((pAt,NH)=>{"use strict";p();var zH=pt(),Eze=Fe(),Ize=et(),qze=Ue(),_C=ch(),Pze=lv(),Aze=ev(),Cze=$t(),Mze=hl(),Vf=Object.assign,FH=Object.defineProperty,Rze=Eze([].concat);NH.exports=!Vf||qze(function(){if(zH&&Vf({b:1},Vf(FH({},"a",{enumerable:!0,get:function(){FH(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},n=Symbol("assign detection"),u="abcdefghijklmnopqrst";return e[n]=7,u.split("").forEach(function(c){t[c]=c}),Vf({},e)[n]!==7||_C(Vf({},t)).join("")!==u})?function(t,n){for(var u=Cze(t),c=arguments.length,a=1,x=Pze.f,S=Aze.f;c>a;)for(var A=Mze(arguments[a++]),R=x?Rze(_C(A),x(A)):_C(A),D=R.length,L=0,H;D>L;)H=R[L++],(!zH||Ize(S,A,H))&&(u[H]=A[H]);return u}:Vf});var jH=P(()=>{"use strict";p();var Oze=K(),BH=xC();Oze({target:"Object",stat:!0,arity:2,forced:Object.assign!==BH},{assign:BH})});var UH=P(()=>{"use strict";p();var kze=K(),Dze=pt(),Lze=ei();kze({target:"Object",stat:!0,sham:!Dze},{create:Lze})});var $v=P((wAt,VH)=>{"use strict";p();var zze=Yt(),Fze=Qe(),Nze=Ue(),$H=Ob();VH.exports=zze||!Nze(function(){if(!($H&&$H<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Fze[e]}})});var GH=P(()=>{"use strict";p();var Bze=K(),jze=pt(),Uze=$v(),$ze=St(),Vze=$t(),Gze=gr();jze&&Bze({target:"Object",proto:!0,forced:Uze},{__defineGetter__:function(t,n){Gze.f(Vze(this),t,{get:$ze(n),enumerable:!0,configurable:!0})}})});var WH=P(()=>{"use strict";p();var Zze=K(),Wze=pt(),ZH=ib().f;Zze({target:"Object",stat:!0,forced:Object.defineProperties!==ZH,sham:!Wze},{defineProperties:ZH})});var KH=P(()=>{"use strict";p();var Hze=K(),Kze=pt(),HH=gr().f;Hze({target:"Object",stat:!0,forced:Object.defineProperty!==HH,sham:!Kze},{defineProperty:HH})});var XH=P(()=>{"use strict";p();var Xze=K(),Yze=pt(),Jze=$v(),Qze=St(),eFe=$t(),tFe=gr();Yze&&Xze({target:"Object",proto:!0,forced:Jze},{__defineSetter__:function(t,n){tFe.f(eFe(this),t,{set:Qze(n),enumerable:!0,configurable:!0})}})});var bC=P((LAt,t7)=>{"use strict";p();var JH=pt(),rFe=Ue(),QH=Fe(),iFe=Ti(),nFe=ch(),aFe=wi(),oFe=ev().f,e7=QH(oFe),sFe=QH([].push),lFe=JH&&rFe(function(){var e=Object.create(null);return e[2]=2,!e7(e,2)}),YH=function(e){return function(t){for(var n=aFe(t),u=nFe(n),c=lFe&&iFe(n)===null,a=u.length,x=0,S=[],A;a>x;)A=u[x++],(!JH||(c?A in n:e7(n,A)))&&sFe(S,e?[A,n[A]]:n[A]);return S}};t7.exports={entries:YH(!0),values:YH(!1)}});var r7=P(()=>{"use strict";p();var uFe=K(),cFe=bC().entries;uFe({target:"Object",stat:!0},{entries:function(t){return cFe(t)}})});var i7=P(()=>{"use strict";p();var hFe=K(),dFe=wl(),fFe=Ue(),pFe=_t(),mFe=Ku().onFreeze,wC=Object.freeze,gFe=fFe(function(){wC(1)});hFe({target:"Object",stat:!0,forced:gFe,sham:!dFe},{freeze:function(t){return wC&&pFe(t)?wC(mFe(t)):t}})});var n7=P(()=>{"use strict";p();var vFe=K(),yFe=Fr(),_Fe=to();vFe({target:"Object",stat:!0},{fromEntries:function(t){var n={};return yFe(t,function(u,c){_Fe(n,u,c)},{AS_ENTRIES:!0}),n}})});var s7=P(()=>{"use strict";p();var xFe=K(),bFe=Ue(),wFe=wi(),a7=Vi().f,o7=pt(),SFe=!o7||bFe(function(){a7(1)});xFe({target:"Object",stat:!0,forced:SFe,sham:!o7},{getOwnPropertyDescriptor:function(t,n){return a7(wFe(t),n)}})});var l7=P(()=>{"use strict";p();var TFe=K(),EFe=pt(),IFe=Qx(),qFe=wi(),PFe=Vi(),AFe=to();TFe({target:"Object",stat:!0,sham:!EFe},{getOwnPropertyDescriptors:function(t){for(var n=qFe(t),u=PFe.f,c=IFe(n),a={},x=0,S,A;c.length>x;)A=u(n,S=c[x++]),A!==void 0&&AFe(a,S,A);return a}})});var u7=P(()=>{"use strict";p();var CFe=K(),MFe=Ue(),RFe=ob().f,OFe=MFe(function(){return!Object.getOwnPropertyNames(1)});CFe({target:"Object",stat:!0,forced:OFe},{getOwnPropertyNames:RFe})});var h7=P(()=>{"use strict";p();var kFe=K(),DFe=Ue(),LFe=$t(),c7=Ti(),zFe=_b(),FFe=DFe(function(){c7(1)});kFe({target:"Object",stat:!0,forced:FFe,sham:!zFe},{getPrototypeOf:function(t){return c7(LFe(t))}})});var SC=P(()=>{"use strict";p();var NFe=K(),BFe=wt(),jFe=Fe(),UFe=St(),$Fe=vr(),VFe=ys(),GFe=Fr(),ZFe=Ue(),d7=Object.groupBy,WFe=BFe("Object","create"),HFe=jFe([].push),KFe=!d7||ZFe(function(){return d7("ab",function(e){return e}).a.length!==1});NFe({target:"Object",stat:!0,forced:KFe},{groupBy:function(t,n){$Fe(t),UFe(n);var u=WFe(null),c=0;return GFe(t,function(a){var x=VFe(n(a,c++));x in u?HFe(u[x],a):u[x]=[a]}),u}})});var TC=P(()=>{"use strict";p();var XFe=K(),YFe=Dt();XFe({target:"Object",stat:!0},{hasOwn:YFe})});var u1=P((hCt,f7)=>{"use strict";p();f7.exports=Object.is||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}});var p7=P(()=>{"use strict";p();var JFe=K(),QFe=u1();JFe({target:"Object",stat:!0},{is:QFe})});var g7=P(()=>{"use strict";p();var eNe=K(),m7=Qb();eNe({target:"Object",stat:!0,forced:Object.isExtensible!==m7},{isExtensible:m7})});var y7=P(()=>{"use strict";p();var tNe=K(),rNe=Ue(),iNe=_t(),nNe=ln(),v7=Yb(),EC=Object.isFrozen,aNe=v7||rNe(function(){EC(1)});tNe({target:"Object",stat:!0,forced:aNe},{isFrozen:function(t){return!iNe(t)||v7&&nNe(t)==="ArrayBuffer"?!0:EC?EC(t):!1}})});var x7=P(()=>{"use strict";p();var oNe=K(),sNe=Ue(),lNe=_t(),uNe=ln(),_7=Yb(),IC=Object.isSealed,cNe=_7||sNe(function(){IC(1)});oNe({target:"Object",stat:!0,forced:cNe},{isSealed:function(t){return!lNe(t)||_7&&uNe(t)==="ArrayBuffer"?!0:IC?IC(t):!1}})});var w7=P(()=>{"use strict";p();var hNe=K(),dNe=$t(),b7=ch(),fNe=Ue(),pNe=fNe(function(){b7(1)});hNe({target:"Object",stat:!0,forced:pNe},{keys:function(t){return b7(dNe(t))}})});var S7=P(()=>{"use strict";p();var mNe=K(),gNe=pt(),vNe=$v(),yNe=$t(),_Ne=ys(),xNe=Ti(),bNe=Vi().f;gNe&&mNe({target:"Object",proto:!0,forced:vNe},{__lookupGetter__:function(t){var n=yNe(this),u=_Ne(t),c;do if(c=bNe(n,u))return c.get;while(n=xNe(n))}})});var T7=P(()=>{"use strict";p();var wNe=K(),SNe=pt(),TNe=$v(),ENe=$t(),INe=ys(),qNe=Ti(),PNe=Vi().f;SNe&&wNe({target:"Object",proto:!0,forced:TNe},{__lookupSetter__:function(t){var n=ENe(this),u=INe(t),c;do if(c=PNe(n,u))return c.set;while(n=qNe(n))}})});var E7=P(()=>{"use strict";p();var ANe=K(),CNe=_t(),MNe=Ku().onFreeze,RNe=wl(),ONe=Ue(),qC=Object.preventExtensions,kNe=ONe(function(){qC(1)});ANe({target:"Object",stat:!0,forced:kNe,sham:!RNe},{preventExtensions:function(t){return qC&&CNe(t)?qC(MNe(t)):t}})});var C7=P(()=>{"use strict";p();var DNe=pt(),LNe=wr(),zNe=_t(),FNe=w2(),NNe=$t(),BNe=vr(),I7=Object.getPrototypeOf,q7=Object.setPrototypeOf,P7=Object.prototype,A7="__proto__";if(DNe&&I7&&q7&&!(A7 in P7))try{LNe(P7,A7,{configurable:!0,get:function(){return I7(NNe(this))},set:function(t){var n=BNe(this);FNe(t)&&zNe(n)&&q7(n,t)}})}catch(e){}});var M7=P(()=>{"use strict";p();var jNe=K(),UNe=_t(),$Ne=Ku().onFreeze,VNe=wl(),GNe=Ue(),PC=Object.seal,ZNe=GNe(function(){PC(1)});jNe({target:"Object",stat:!0,forced:ZNe,sham:!VNe},{seal:function(t){return PC&&UNe(t)?PC($Ne(t)):t}})});var R7=P(()=>{"use strict";p();var WNe=K(),HNe=eo();WNe({target:"Object",stat:!0},{setPrototypeOf:HNe})});var k7=P((ZCt,O7)=>{"use strict";p();var KNe=tb(),XNe=Fn();O7.exports=KNe?{}.toString:function(){return"[object "+XNe(this)+"]"}});var D7=P(()=>{"use strict";p();var YNe=tb(),JNe=or(),QNe=k7();YNe||JNe(Object.prototype,"toString",QNe,{unsafe:!0})});var L7=P(()=>{"use strict";p();var eBe=K(),tBe=bC().values;eBe({target:"Object",stat:!0},{values:function(t){return tBe(t)}})});var F7=P(()=>{"use strict";p();var rBe=K(),z7=dC();rBe({global:!0,forced:parseFloat!==z7},{parseFloat:z7})});var B7=P(()=>{"use strict";p();var iBe=K(),N7=fC();iBe({global:!0,forced:parseInt!==N7},{parseInt:N7})});var Vv=P((oMt,j7)=>{"use strict";p();var nBe=ko(),aBe=Cu(),oBe=TypeError;j7.exports=function(e){if(nBe(e))return e;throw new oBe(aBe(e)+" is not a constructor")}});var Gv=P((lMt,$7)=>{"use strict";p();var U7=rt(),sBe=Vv(),lBe=ta(),uBe=xt(),cBe=uBe("species");$7.exports=function(e,t){var n=U7(e).constructor,u;return n===void 0||lBe(u=U7(n)[cBe])?t:sBe(u)}});var Ra=P((cMt,V7)=>{"use strict";p();var hBe=TypeError;V7.exports=function(e,t){if(e<t)throw new hBe("Not enough arguments");return e}});var AC=P((dMt,G7)=>{"use strict";p();var dBe=Po();G7.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(dBe)});var Hv=P((pMt,e9)=>{"use strict";p();var Oa=Qe(),fBe=cn(),pBe=dr(),Z7=kt(),mBe=Dt(),Q7=Ue(),W7=Jq(),gBe=ia(),H7=iv(),vBe=Ra(),yBe=AC(),_Be=vh(),DC=Oa.setImmediate,LC=Oa.clearImmediate,xBe=Oa.process,CC=Oa.Dispatch,bBe=Oa.Function,K7=Oa.MessageChannel,wBe=Oa.String,MC=0,Zv={},X7="onreadystatechange",Wv,wh,RC,OC;Q7(function(){Wv=Oa.location});var zC=function(e){if(mBe(Zv,e)){var t=Zv[e];delete Zv[e],t()}},kC=function(e){return function(){zC(e)}},Y7=function(e){zC(e.data)},J7=function(e){Oa.postMessage(wBe(e),Wv.protocol+"//"+Wv.host)};(!DC||!LC)&&(DC=function(t){vBe(arguments.length,1);var n=Z7(t)?t:bBe(t),u=gBe(arguments,1);return Zv[++MC]=function(){fBe(n,void 0,u)},wh(MC),MC},LC=function(t){delete Zv[t]},_Be?wh=function(e){xBe.nextTick(kC(e))}:CC&&CC.now?wh=function(e){CC.now(kC(e))}:K7&&!yBe?(RC=new K7,OC=RC.port2,RC.port1.onmessage=Y7,wh=pBe(OC.postMessage,OC)):Oa.addEventListener&&Z7(Oa.postMessage)&&!Oa.importScripts&&Wv&&Wv.protocol!=="file:"&&!Q7(J7)?(wh=J7,Oa.addEventListener("message",Y7,!1)):X7 in H7("script")?wh=function(e){W7.appendChild(H7("script"))[X7]=function(){W7.removeChild(this),zC(e)}}:wh=function(e){setTimeout(kC(e),0)});e9.exports={set:DC,clear:LC}});var FC=P((gMt,r9)=>{"use strict";p();var t9=Qe(),SBe=pt(),TBe=Object.getOwnPropertyDescriptor;r9.exports=function(e){if(!SBe)return t9[e];var t=TBe(t9,e);return t&&t.value}});var NC=P((yMt,n9)=>{"use strict";p();var i9=function(){this.head=null,this.tail=null};i9.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};n9.exports=i9});var o9=P((xMt,a9)=>{"use strict";p();var EBe=Po();a9.exports=/ipad|iphone|ipod/i.test(EBe)&&typeof Pebble!="undefined"});var l9=P((wMt,s9)=>{"use strict";p();var IBe=Po();s9.exports=/web0s(?!.*chrome)/i.test(IBe)});var GC=P((TMt,p9)=>{"use strict";p();var Zf=Qe(),qBe=FC(),u9=dr(),BC=Hv().set,PBe=NC(),ABe=AC(),CBe=o9(),MBe=l9(),jC=vh(),c9=Zf.MutationObserver||Zf.WebKitMutationObserver,h9=Zf.document,d9=Zf.process,c1=Zf.Promise,VC=qBe("queueMicrotask"),Gf,UC,$C,h1,f9;VC||(Kv=new PBe,Xv=function(){var e,t;for(jC&&(e=d9.domain)&&e.exit();t=Kv.get();)try{t()}catch(n){throw Kv.head&&Gf(),n}e&&e.enter()},!ABe&&!jC&&!MBe&&c9&&h9?(UC=!0,$C=h9.createTextNode(""),new c9(Xv).observe($C,{characterData:!0}),Gf=function(){$C.data=UC=!UC}):!CBe&&c1&&c1.resolve?(h1=c1.resolve(void 0),h1.constructor=c1,f9=u9(h1.then,h1),Gf=function(){f9(Xv)}):jC?Gf=function(){d9.nextTick(Xv)}:(BC=u9(BC,Zf),Gf=function(){BC(Xv)}),VC=function(e){Kv.head||Gf(),Kv.add(e)});var Kv,Xv;p9.exports=VC});var ZC=P((IMt,m9)=>{"use strict";p();m9.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(n){}}});var Xu=P((PMt,g9)=>{"use strict";p();g9.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var Sh=P((CMt,v9)=>{"use strict";p();var RBe=Qe();v9.exports=RBe.Promise});var Wf=P((RMt,b9)=>{"use strict";p();var OBe=Qe(),Yv=Sh(),kBe=kt(),DBe=Ef(),LBe=nv(),zBe=xt(),y9=Iv(),FBe=Yt(),WC=Co(),_9=Yv&&Yv.prototype,NBe=zBe("species"),HC=!1,x9=kBe(OBe.PromiseRejectionEvent),BBe=DBe("Promise",function(){var e=LBe(Yv),t=e!==String(Yv);if(!t&&WC===66||FBe&&!(_9.catch&&_9.finally))return!0;if(!WC||WC<51||!/native code/.test(e)){var n=new Yv(function(a){a(1)}),u=function(a){a(function(){},function(){})},c=n.constructor={};if(c[NBe]=u,HC=n.then(function(){})instanceof u,!HC)return!0}return!t&&(y9==="BROWSER"||y9==="DENO")&&!x9});b9.exports={CONSTRUCTOR:BBe,REJECTION_EVENT:x9,SUBCLASSING:HC}});var Es=P((kMt,S9)=>{"use strict";p();var w9=St(),jBe=TypeError,UBe=function(e){var t,n;this.promise=new e(function(u,c){if(t!==void 0||n!==void 0)throw new jBe("Bad Promise constructor");t=u,n=c}),this.resolve=w9(t),this.reject=w9(n)};S9.exports.f=function(e){return new UBe(e)}});var U9=P(()=>{"use strict";p();var $Be=K(),VBe=Yt(),m1=vh(),Yu=Qe(),Yf=et(),T9=or(),E9=eo(),GBe=Nn(),ZBe=Uu(),WBe=St(),p1=kt(),HBe=_t(),KBe=In(),XBe=Gv(),C9=Hv().set,QC=GC(),YBe=ZC(),JBe=Xu(),QBe=NC(),M9=rr(),g1=Sh(),eM=Wf(),R9=Es(),v1="Promise",O9=eM.CONSTRUCTOR,e3e=eM.REJECTION_EVENT,t3e=eM.SUBCLASSING,KC=M9.getterFor(v1),r3e=M9.set,Hf=g1&&g1.prototype,Th=g1,d1=Hf,k9=Yu.TypeError,XC=Yu.document,tM=Yu.process,YC=R9.f,i3e=YC,n3e=!!(XC&&XC.createEvent&&Yu.dispatchEvent),D9="unhandledrejection",a3e="rejectionhandled",I9=0,L9=1,o3e=2,rM=1,z9=2,f1,q9,s3e,P9,F9=function(e){var t;return HBe(e)&&p1(t=e.then)?t:!1},N9=function(e,t){var n=t.value,u=t.state===L9,c=u?e.ok:e.fail,a=e.resolve,x=e.reject,S=e.domain,A,R,D;try{c?(u||(t.rejection===z9&&u3e(t),t.rejection=rM),c===!0?A=n:(S&&S.enter(),A=c(n),S&&(S.exit(),D=!0)),A===e.promise?x(new k9("Promise-chain cycle")):(R=F9(A))?Yf(R,A,a,x):a(A)):x(n)}catch(L){S&&!D&&S.exit(),x(L)}},B9=function(e,t){e.notified||(e.notified=!0,QC(function(){for(var n=e.reactions,u;u=n.get();)N9(u,e);e.notified=!1,t&&!e.rejection&&l3e(e)}))},j9=function(e,t,n){var u,c;n3e?(u=XC.createEvent("Event"),u.promise=t,u.reason=n,u.initEvent(e,!1,!0),Yu.dispatchEvent(u)):u={promise:t,reason:n},!e3e&&(c=Yu["on"+e])?c(u):e===D9&&YBe("Unhandled promise rejection",n)},l3e=function(e){Yf(C9,Yu,function(){var t=e.facade,n=e.value,u=A9(e),c;if(u&&(c=JBe(function(){m1?tM.emit("unhandledRejection",n,t):j9(D9,t,n)}),e.rejection=m1||A9(e)?z9:rM,c.error))throw c.value})},A9=function(e){return e.rejection!==rM&&!e.parent},u3e=function(e){Yf(C9,Yu,function(){var t=e.facade;m1?tM.emit("rejectionHandled",t):j9(a3e,t,e.value)})},Kf=function(e,t,n){return function(u){e(t,u,n)}},Xf=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=o3e,B9(e,!0))},JC=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new k9("Promise can't be resolved itself");var u=F9(t);u?QC(function(){var c={done:!1};try{Yf(u,t,Kf(JC,c,e),Kf(Xf,c,e))}catch(a){Xf(c,a,e)}}):(e.value=t,e.state=L9,B9(e,!1))}catch(c){Xf({done:!1},c,e)}}};if(O9&&(Th=function(t){KBe(this,d1),WBe(t),Yf(f1,this);var n=KC(this);try{t(Kf(JC,n),Kf(Xf,n))}catch(u){Xf(n,u)}},d1=Th.prototype,f1=function(t){r3e(this,{type:v1,done:!1,notified:!1,parent:!1,reactions:new QBe,rejection:!1,state:I9,value:null})},f1.prototype=T9(d1,"then",function(t,n){var u=KC(this),c=YC(XBe(this,Th));return u.parent=!0,c.ok=p1(t)?t:!0,c.fail=p1(n)&&n,c.domain=m1?tM.domain:void 0,u.state===I9?u.reactions.add(c):QC(function(){N9(c,u)}),c.promise}),q9=function(){var e=new f1,t=KC(e);this.promise=e,this.resolve=Kf(JC,t),this.reject=Kf(Xf,t)},R9.f=YC=function(e){return e===Th||e===s3e?new q9(e):i3e(e)},!VBe&&p1(g1)&&Hf!==Object.prototype)){P9=Hf.then,t3e||T9(Hf,"then",function(t,n){var u=this;return new Th(function(c,a){Yf(P9,u,c,a)}).then(t,n)},{unsafe:!0});try{delete Hf.constructor}catch(e){}E9&&E9(Hf,d1)}$Be({global:!0,constructor:!0,wrap:!0,forced:O9},{Promise:Th});GBe(Th,v1,!1,!0);ZBe(v1)});var Jv=P((NMt,$9)=>{"use strict";p();var c3e=Sh(),h3e=xv(),d3e=Wf().CONSTRUCTOR;$9.exports=d3e||!h3e(function(e){c3e.all(e).then(void 0,function(){})})});var V9=P(()=>{"use strict";p();var f3e=K(),p3e=et(),m3e=St(),g3e=Es(),v3e=Xu(),y3e=Fr(),_3e=Jv();f3e({target:"Promise",stat:!0,forced:_3e},{all:function(t){var n=this,u=g3e.f(n),c=u.resolve,a=u.reject,x=v3e(function(){var S=m3e(n.resolve),A=[],R=0,D=1;y3e(t,function(L){var H=R++,ce=!1;D++,p3e(S,n,L).then(function(de){ce||(ce=!0,A[H]=de,--D||c(A))},a)}),--D||c(A)});return x.error&&a(x.value),u.promise}})});var Z9=P(()=>{"use strict";p();var x3e=K(),b3e=Yt(),w3e=Wf().CONSTRUCTOR,nM=Sh(),S3e=wt(),T3e=kt(),E3e=or(),G9=nM&&nM.prototype;x3e({target:"Promise",proto:!0,forced:w3e,real:!0},{catch:function(e){return this.then(void 0,e)}});!b3e&&T3e(nM)&&(iM=S3e("Promise").prototype.catch,G9.catch!==iM&&E3e(G9,"catch",iM,{unsafe:!0}));var iM});var W9=P(()=>{"use strict";p();var I3e=K(),q3e=et(),P3e=St(),A3e=Es(),C3e=Xu(),M3e=Fr(),R3e=Jv();I3e({target:"Promise",stat:!0,forced:R3e},{race:function(t){var n=this,u=A3e.f(n),c=u.reject,a=C3e(function(){var x=P3e(n.resolve);M3e(t,function(S){q3e(x,n,S).then(u.resolve,c)})});return a.error&&c(a.value),u.promise}})});var H9=P(()=>{"use strict";p();var O3e=K(),k3e=Es(),D3e=Wf().CONSTRUCTOR;O3e({target:"Promise",stat:!0,forced:D3e},{reject:function(t){var n=k3e.f(this),u=n.reject;return u(t),n.promise}})});var aM=P((QMt,K9)=>{"use strict";p();var L3e=rt(),z3e=_t(),F3e=Es();K9.exports=function(e,t){if(L3e(e),z3e(t)&&t.constructor===e)return t;var n=F3e.f(e),u=n.resolve;return u(t),n.promise}});var J9=P(()=>{"use strict";p();var N3e=K(),B3e=wt(),X9=Yt(),j3e=Sh(),Y9=Wf().CONSTRUCTOR,U3e=aM(),$3e=B3e("Promise"),V3e=X9&&!Y9;N3e({target:"Promise",stat:!0,forced:X9||Y9},{resolve:function(t){return U3e(V3e&&this===$3e?j3e:this,t)}})});var Q9=P(()=>{"use strict";p();U9();V9();Z9();W9();H9();J9()});var oM=P(()=>{"use strict";p();var G3e=K(),Z3e=et(),W3e=St(),H3e=Es(),K3e=Xu(),X3e=Fr(),Y3e=Jv();G3e({target:"Promise",stat:!0,forced:Y3e},{allSettled:function(t){var n=this,u=H3e.f(n),c=u.resolve,a=u.reject,x=K3e(function(){var S=W3e(n.resolve),A=[],R=0,D=1;X3e(t,function(L){var H=R++,ce=!1;D++,Z3e(S,n,L).then(function(de){ce||(ce=!0,A[H]={status:"fulfilled",value:de},--D||c(A))},function(de){ce||(ce=!0,A[H]={status:"rejected",reason:de},--D||c(A))})}),--D||c(A)});return x.error&&a(x.value),u.promise}})});var sM=P(()=>{"use strict";p();var J3e=K(),Q3e=et(),eje=St(),tje=wt(),rje=Es(),ije=Xu(),nje=Fr(),aje=Jv(),eK="No one promise resolved";J3e({target:"Promise",stat:!0,forced:aje},{any:function(t){var n=this,u=tje("AggregateError"),c=rje.f(n),a=c.resolve,x=c.reject,S=ije(function(){var A=eje(n.resolve),R=[],D=0,L=1,H=!1;nje(t,function(ce){var de=D++,ve=!1;L++,Q3e(A,n,ce).then(function(X){ve||H||(H=!0,a(X))},function(X){ve||H||(ve=!0,R[de]=X,--L||x(new u(R,eK)))})}),--L||x(new u(R,eK))});return S.error&&x(S.value),c.promise}})});var nK=P(()=>{"use strict";p();var oje=K(),sje=Yt(),y1=Sh(),lje=Ue(),rK=wt(),iK=kt(),uje=Gv(),tK=aM(),cje=or(),uM=y1&&y1.prototype,hje=!!y1&&lje(function(){uM.finally.call({then:function(){}},function(){})});oje({target:"Promise",proto:!0,real:!0,forced:hje},{finally:function(e){var t=uje(this,rK("Promise")),n=iK(e);return this.then(n?function(u){return tK(t,e()).then(function(){return u})}:e,n?function(u){return tK(t,e()).then(function(){throw u})}:e)}});!sje&&iK(y1)&&(lM=rK("Promise").prototype.finally,uM.finally!==lM&&cje(uM,"finally",lM,{unsafe:!0}));var lM});var hM=P(()=>{"use strict";p();var dje=K(),fje=Qe(),pje=cn(),mje=ia(),gje=Es(),vje=St(),oK=Xu(),cM=fje.Promise,aK=!1,yje=!cM||!cM.try||oK(function(){cM.try(function(e){aK=e===8},8)}).error||!aK;dje({target:"Promise",stat:!0,forced:yje},{try:function(e){var t=arguments.length>1?mje(arguments,1):[],n=gje.f(this),u=oK(function(){return pje(vje(e),void 0,t)});return(u.error?n.reject:n.resolve)(u.value),n.promise}})});var dM=P(()=>{"use strict";p();var _je=K(),xje=Es();_je({target:"Promise",stat:!0},{withResolvers:function(){var t=xje.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var sK=P(()=>{"use strict";p();var bje=K(),wje=cn(),Sje=St(),Tje=rt(),Eje=Ue(),Ije=!Eje(function(){Reflect.apply(function(){})});bje({target:"Reflect",stat:!0,forced:Ije},{apply:function(t,n,u){return wje(Sje(t),n,Tje(u))}})});var pK=P(()=>{"use strict";p();var qje=K(),Pje=wt(),fM=cn(),Aje=uA(),lK=Vv(),Cje=rt(),uK=_t(),Mje=ei(),hK=Ue(),pM=Pje("Reflect","construct"),Rje=Object.prototype,Oje=[].push,dK=hK(function(){function e(){}return!(pM(function(){},[],e)instanceof e)}),fK=!hK(function(){pM(function(){})}),cK=dK||fK;qje({target:"Reflect",stat:!0,forced:cK,sham:cK},{construct:function(t,n){lK(t),Cje(n);var u=arguments.length<3?t:lK(arguments[2]);if(fK&&!dK)return pM(t,n,u);if(t===u){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var c=[null];return fM(Oje,c,n),new(fM(Aje,t,c))}var a=u.prototype,x=Mje(uK(a)?a:Rje),S=fM(t,x,n);return uK(S)?S:x}})});var vK=P(()=>{"use strict";p();var kje=K(),Dje=pt(),mK=rt(),Lje=ys(),gK=gr(),zje=Ue(),Fje=zje(function(){Reflect.defineProperty(gK.f({},1,{value:1}),1,{value:2})});kje({target:"Reflect",stat:!0,forced:Fje,sham:!Dje},{defineProperty:function(t,n,u){mK(t);var c=Lje(n);mK(u);try{return gK.f(t,c,u),!0}catch(a){return!1}}})});var yK=P(()=>{"use strict";p();var Nje=K(),Bje=rt(),jje=Vi().f;Nje({target:"Reflect",stat:!0},{deleteProperty:function(t,n){var u=jje(Bje(t),n);return u&&!u.configurable?!1:delete t[n]}})});var mM=P((kRt,xK)=>{"use strict";p();var _K=Dt();xK.exports=function(e){return e!==void 0&&(_K(e,"value")||_K(e,"writable"))}});var wK=P(()=>{"use strict";p();var Uje=K(),$je=et(),Vje=_t(),Gje=rt(),Zje=mM(),Wje=Vi(),Hje=Ti();function bK(e,t){var n=arguments.length<3?e:arguments[2],u,c;if(Gje(e)===n)return e[t];if(u=Wje.f(e,t),u)return Zje(u)?u.value:u.get===void 0?void 0:$je(u.get,n);if(Vje(c=Hje(e)))return bK(c,t,n)}Uje({target:"Reflect",stat:!0},{get:bK})});var SK=P(()=>{"use strict";p();var Kje=K(),Xje=pt(),Yje=rt(),Jje=Vi();Kje({target:"Reflect",stat:!0,sham:!Xje},{getOwnPropertyDescriptor:function(t,n){return Jje.f(Yje(t),n)}})});var TK=P(()=>{"use strict";p();var Qje=K(),e4e=rt(),t4e=Ti(),r4e=_b();Qje({target:"Reflect",stat:!0,sham:!r4e},{getPrototypeOf:function(t){return t4e(e4e(t))}})});var EK=P(()=>{"use strict";p();var i4e=K();i4e({target:"Reflect",stat:!0},{has:function(t,n){return n in t}})});var IK=P(()=>{"use strict";p();var n4e=K(),a4e=rt(),o4e=Qb();n4e({target:"Reflect",stat:!0},{isExtensible:function(t){return a4e(t),o4e(t)}})});var qK=P(()=>{"use strict";p();var s4e=K(),l4e=Qx();s4e({target:"Reflect",stat:!0},{ownKeys:l4e})});var PK=P(()=>{"use strict";p();var u4e=K(),c4e=wt(),h4e=rt(),d4e=wl();u4e({target:"Reflect",stat:!0,sham:!d4e},{preventExtensions:function(t){h4e(t);try{var n=c4e("Object","preventExtensions");return n&&n(t),!0}catch(u){return!1}}})});var OK=P(()=>{"use strict";p();var f4e=K(),p4e=et(),m4e=rt(),AK=_t(),g4e=mM(),v4e=Ue(),gM=gr(),CK=Vi(),y4e=Ti(),MK=ea();function RK(e,t,n){var u=arguments.length<4?e:arguments[3],c=CK.f(m4e(e),t),a,x,S;if(!c){if(AK(x=y4e(e)))return RK(x,t,n,u);c=MK(0)}if(g4e(c)){if(c.writable===!1||!AK(u))return!1;if(a=CK.f(u,t)){if(a.get||a.set||a.writable===!1)return!1;a.value=n,gM.f(u,t,a)}else gM.f(u,t,MK(0,n))}else{if(S=c.set,S===void 0)return!1;p4e(S,u,n)}return!0}var _4e=v4e(function(){var e=function(){},t=gM.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});f4e({target:"Reflect",stat:!0,forced:_4e},{set:RK})});var DK=P(()=>{"use strict";p();var x4e=K(),b4e=rt(),w4e=S2(),kK=eo();kK&&x4e({target:"Reflect",stat:!0},{setPrototypeOf:function(t,n){b4e(t),w4e(n);try{return kK(t,n),!0}catch(u){return!1}}})});var LK=P(()=>{"use strict";p();var S4e=K(),T4e=Qe(),E4e=Nn();S4e({global:!0},{Reflect:{}});E4e(T4e.Reflect,"Reflect",!0)});var Qv=P((dOt,zK)=>{"use strict";p();var I4e=_t(),q4e=ln(),P4e=xt(),A4e=P4e("match");zK.exports=function(e){var t;return I4e(e)&&((t=e[A4e])!==void 0?!!t:q4e(e)==="RegExp")}});var _1=P((pOt,FK)=>{"use strict";p();var C4e=rt();FK.exports=function(){var e=C4e(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var Jf=P((gOt,BK)=>{"use strict";p();var M4e=et(),R4e=Dt(),O4e=un(),k4e=_1(),NK=RegExp.prototype;BK.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in NK)&&!R4e(e,"flags")&&O4e(NK,e)?M4e(k4e,e):t}});var ey=P((yOt,jK)=>{"use strict";p();var vM=Ue(),D4e=Qe(),yM=D4e.RegExp,_M=vM(function(){var e=yM("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),L4e=_M||vM(function(){return!yM("a","y").sticky}),z4e=_M||vM(function(){var e=yM("^r","gy");return e.lastIndex=2,e.exec("str")!==null});jK.exports={BROKEN_CARET:z4e,MISSED_STICKY:L4e,UNSUPPORTED_Y:_M}});var x1=P((xOt,UK)=>{"use strict";p();var F4e=Ue(),N4e=Qe(),B4e=N4e.RegExp;UK.exports=F4e(function(){var e=B4e(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var xM=P((wOt,$K)=>{"use strict";p();var j4e=Ue(),U4e=Qe(),$4e=U4e.RegExp;$K.exports=j4e(function(){var e=$4e("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var QK=P(()=>{"use strict";p();var V4e=pt(),TM=Qe(),ty=Fe(),G4e=Ef(),Z4e=Lu(),W4e=Si(),H4e=ei(),K4e=Ru().f,VK=un(),X4e=Qv(),GK=It(),Y4e=Jf(),KK=ey(),J4e=T2(),Q4e=or(),e5e=Ue(),t5e=Dt(),r5e=rr().enforce,i5e=Uu(),n5e=xt(),XK=x1(),YK=xM(),a5e=n5e("match"),Qu=TM.RegExp,Qf=Qu.prototype,o5e=TM.SyntaxError,s5e=ty(Qf.exec),b1=ty("".charAt),ZK=ty("".replace),WK=ty("".indexOf),HK=ty("".slice),l5e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Eh=/a/g,bM=/a/g,u5e=new Qu(Eh)!==Eh,JK=KK.MISSED_STICKY,c5e=KK.UNSUPPORTED_Y,h5e=V4e&&(!u5e||JK||XK||YK||e5e(function(){return bM[a5e]=!1,Qu(Eh)!==Eh||Qu(bM)===bM||String(Qu(Eh,"i"))!=="/a/i"})),d5e=function(e){for(var t=e.length,n=0,u="",c=!1,a;n<=t;n++){if(a=b1(e,n),a==="\\"){u+=a+b1(e,++n);continue}!c&&a==="."?u+="[\\s\\S]":(a==="["?c=!0:a==="]"&&(c=!1),u+=a)}return u},f5e=function(e){for(var t=e.length,n=0,u="",c=[],a=H4e(null),x=!1,S=!1,A=0,R="",D;n<=t;n++){if(D=b1(e,n),D==="\\")D+=b1(e,++n);else if(D==="]")x=!1;else if(!x)switch(!0){case D==="[":x=!0;break;case D==="(":if(u+=D,HK(e,n+1,n+3)==="?:")continue;s5e(l5e,HK(e,n+1))&&(n+=2,S=!0),A++;continue;case D===">"&&S:if(R===""||t5e(a,R))throw new o5e("Invalid capture group name");a[R]=!0,c[c.length]=[R,A],S=!1,R="";continue}S?R+=D:u+=D}return[u,c]};if(G4e("RegExp",h5e)){for(Ju=function(t,n){var u=VK(Qf,this),c=X4e(t),a=n===void 0,x=[],S=t,A,R,D,L,H,ce;if(!u&&c&&a&&t.constructor===Ju)return t;if((c||VK(Qf,t))&&(t=t.source,a&&(n=Y4e(S))),t=t===void 0?"":GK(t),n=n===void 0?"":GK(n),S=t,XK&&"dotAll"in Eh&&(R=!!n&&WK(n,"s")>-1,R&&(n=ZK(n,/s/g,""))),A=n,JK&&"sticky"in Eh&&(D=!!n&&WK(n,"y")>-1,D&&c5e&&(n=ZK(n,/y/g,""))),YK&&(L=f5e(t),t=L[0],x=L[1]),H=Z4e(Qu(t,n),u?this:Qf,Ju),(R||D||x.length)&&(ce=r5e(H),R&&(ce.dotAll=!0,ce.raw=Ju(d5e(t),A)),D&&(ce.sticky=!0),x.length&&(ce.groups=x)),t!==S)try{W4e(H,"source",S===""?"(?:)":S)}catch(de){}return H},wM=K4e(Qu),SM=0;wM.length>SM;)J4e(Ju,Qu,wM[SM++]);Qf.constructor=Ju,Ju.prototype=Qf,Q4e(TM,"RegExp",Ju,{constructor:!0})}var Ju,wM,SM;i5e("RegExp")});var ry=P((qOt,eX)=>{"use strict";p();var p5e=TypeError;eX.exports=function(e){if(typeof e=="string")return e;throw new p5e("Argument is not a string")}});var PM=P(()=>{"use strict";p();var m5e=K(),iy=Fe(),g5e=ry(),v5e=Dt(),tX=Rv().start,y5e=xh(),_5e=Array,rX=RegExp.escape,iX=iy("".charAt),qM=iy("".charCodeAt),x5e=iy(1.1.toString),b5e=iy([].join),aX=/^[0-9a-z]/i,w5e=/^[$()*+./?[\\\]^{|}]/,S5e=RegExp("^[!\"#%&',\\-:;<=>@`~"+y5e+"]"),EM=iy(aX.exec),nX={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},IM=function(e){var t=x5e(qM(e,0),16);return t.length<3?"\\x"+tX(t,2,"0"):"\\u"+tX(t,4,"0")},T5e=!rX||rX("ab")!=="\\x61b";m5e({target:"RegExp",stat:!0,forced:T5e},{escape:function(t){g5e(t);for(var n=t.length,u=_5e(n),c=0;c<n;c++){var a=iX(t,c);if(c===0&&EM(aX,a))u[c]=IM(a);else if(v5e(nX,a))u[c]="\\"+nX[a];else if(EM(w5e,a))u[c]="\\"+a;else if(EM(S5e,a))u[c]=IM(a);else{var x=qM(a,0);(x&63488)!==55296?u[c]=a:x>=56320||c+1>=n||(qM(t,c+1)&64512)!==56320?u[c]=IM(a):(u[c]=a,u[++c]=iX(t,c))}}return b5e(u,"")}})});var sX=P(()=>{"use strict";p();var E5e=pt(),I5e=x1(),q5e=ln(),P5e=wr(),A5e=rr().get,oX=RegExp.prototype,C5e=TypeError;E5e&&I5e&&P5e(oX,"dotAll",{configurable:!0,get:function(){if(this!==oX){if(q5e(this)==="RegExp")return!!A5e(this).dotAll;throw new C5e("Incompatible receiver, RegExp required")}}})});var T1=P((DOt,uX)=>{"use strict";p();var ep=et(),S1=Fe(),M5e=It(),R5e=_1(),O5e=ey(),k5e=fl(),D5e=ei(),L5e=rr().get,z5e=x1(),F5e=xM(),N5e=k5e("native-string-replace",String.prototype.replace),w1=RegExp.prototype.exec,CM=w1,B5e=S1("".charAt),j5e=S1("".indexOf),U5e=S1("".replace),AM=S1("".slice),MM=function(){var e=/a/,t=/b*/g;return ep(w1,e,"a"),ep(w1,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),lX=O5e.BROKEN_CARET,RM=/()??/.exec("")[1]!==void 0,$5e=MM||RM||lX||z5e||F5e;$5e&&(CM=function(t){var n=this,u=L5e(n),c=M5e(t),a=u.raw,x,S,A,R,D,L,H;if(a)return a.lastIndex=n.lastIndex,x=ep(CM,a,c),n.lastIndex=a.lastIndex,x;var ce=u.groups,de=lX&&n.sticky,ve=ep(R5e,n),X=n.source,ee=0,oe=c;if(de&&(ve=U5e(ve,"y",""),j5e(ve,"g")===-1&&(ve+="g"),oe=AM(c,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&B5e(c,n.lastIndex-1)!==`
`)&&(X="(?: "+X+")",oe=" "+oe,ee++),S=new RegExp("^(?:"+X+")",ve)),RM&&(S=new RegExp("^"+X+"$(?!\\s)",ve)),MM&&(A=n.lastIndex),R=ep(w1,de?S:n,oe),de?R?(R.input=AM(R.input,ee),R[0]=AM(R[0],ee),R.index=n.lastIndex,n.lastIndex+=R[0].length):n.lastIndex=0:MM&&R&&(n.lastIndex=n.global?R.index+R[0].length:A),RM&&R&&R.length>1&&ep(N5e,R[0],S,function(){for(D=1;D<arguments.length-2;D++)arguments[D]===void 0&&(R[D]=void 0)}),R&&ce)for(R.groups=L=D5e(null),D=0;D<ce.length;D++)H=ce[D],L[H[0]]=R[H[1]];return R});uX.exports=CM});var E1=P(()=>{"use strict";p();var V5e=K(),cX=T1();V5e({target:"RegExp",proto:!0,forced:/./.exec!==cX},{exec:cX})});var fX=P(()=>{"use strict";p();var G5e=Qe(),Z5e=pt(),W5e=wr(),H5e=_1(),K5e=Ue(),hX=G5e.RegExp,dX=hX.prototype,X5e=Z5e&&K5e(function(){var e=!0;try{hX(".","d")}catch(A){e=!1}var t={},n="",u=e?"dgimsy":"gimsy",c=function(A,R){Object.defineProperty(t,A,{get:function(){return n+=R,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(a.hasIndices="d");for(var x in a)c(x,a[x]);var S=Object.getOwnPropertyDescriptor(dX,"flags").get.call(t);return S!==u||n!==u});X5e&&W5e(dX,"flags",{configurable:!0,get:H5e})});var mX=P(()=>{"use strict";p();var Y5e=pt(),J5e=ey().MISSED_STICKY,Q5e=ln(),eUe=wr(),tUe=rr().get,pX=RegExp.prototype,rUe=TypeError;Y5e&&J5e&&eUe(pX,"sticky",{configurable:!0,get:function(){if(this!==pX){if(Q5e(this)==="RegExp")return!!tUe(this).sticky;throw new rUe("Incompatible receiver, RegExp required")}}})});var yX=P(()=>{"use strict";p();E1();var iUe=K(),gX=et(),nUe=kt(),vX=rt(),aUe=It(),oUe=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),sUe=/./.test;iUe({target:"RegExp",proto:!0,forced:!oUe},{test:function(e){var t=vX(this),n=aUe(e),u=t.exec;if(!nUe(u))return gX(sUe,t,n);var c=gX(u,t,n);return c===null?!1:(vX(c),!0)}})});var wX=P(()=>{"use strict";p();var lUe=sh().PROPER,uUe=or(),cUe=rt(),_X=It(),hUe=Ue(),dUe=Jf(),OM="toString",xX=RegExp.prototype,bX=xX[OM],fUe=hUe(function(){return bX.call({source:"a",flags:"b"})!=="/a/b"}),pUe=lUe&&bX.name!==OM;(fUe||pUe)&&uUe(xX,OM,function(){var t=cUe(this),n=_X(t.source),u=_X(dUe(t));return"/"+n+"/"+u},{unsafe:!0})});var SX=P(()=>{"use strict";p();var mUe=kv(),gUe=JA();mUe("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},gUe)});var TX=P(()=>{"use strict";p();SX()});var Wi=P((nkt,EX)=>{"use strict";p();var kM=Fe(),I1=Set.prototype;EX.exports={Set,add:kM(I1.add),has:kM(I1.has),remove:kM(I1.delete),proto:I1}});var hn=P((okt,IX)=>{"use strict";p();var vUe=Wi().has;IX.exports=function(e){return vUe(e),e}});var Tl=P((lkt,qX)=>{"use strict";p();var yUe=et();qX.exports=function(e,t,n){for(var u=n?e:e.iterator,c=e.next,a,x;!(a=yUe(c,u)).done;)if(x=t(a.value),x!==void 0)return x}});var oa=P((ckt,RX)=>{"use strict";p();var PX=Fe(),_Ue=Tl(),AX=Wi(),xUe=AX.Set,CX=AX.proto,bUe=PX(CX.forEach),MX=PX(CX.keys),wUe=MX(new xUe).next;RX.exports=function(e,t,n){return n?_Ue({iterator:MX(e),next:wUe},t):bUe(e,t)}});var q1=P((dkt,kX)=>{"use strict";p();var OX=Wi(),SUe=oa(),TUe=OX.Set,EUe=OX.add;kX.exports=function(e){var t=new TUe;return SUe(e,function(n){EUe(t,n)}),t}});var tp=P((pkt,DX)=>{"use strict";p();var IUe=vv(),qUe=Wi();DX.exports=IUe(qUe.proto,"size","get")||function(e){return e.size}});var ec=P((gkt,jX)=>{"use strict";p();var LX=St(),NX=rt(),zX=et(),PUe=br(),AUe=Cr(),FX="Invalid size",CUe=RangeError,MUe=TypeError,RUe=Math.max,BX=function(e,t){this.set=e,this.size=RUe(t,0),this.has=LX(e.has),this.keys=LX(e.keys)};BX.prototype={getIterator:function(){return AUe(NX(zX(this.keys,this.set)))},includes:function(e){return zX(this.has,this.set,e)}};jX.exports=function(e){NX(e);var t=+e.size;if(t!==t)throw new MUe(FX);var n=PUe(t);if(n<0)throw new CUe(FX);return new BX(e,n)}});var DM=P((ykt,VX)=>{"use strict";p();var OUe=hn(),$X=Wi(),kUe=q1(),DUe=tp(),LUe=ec(),zUe=oa(),FUe=Tl(),NUe=$X.has,UX=$X.remove;VX.exports=function(t){var n=OUe(this),u=LUe(t),c=kUe(n);return DUe(n)<=u.size?zUe(n,function(a){u.includes(a)&&UX(c,a)}):FUe(u.getIterator(),function(a){NUe(n,a)&&UX(c,a)}),c}});var tc=P((xkt,WX)=>{"use strict";p();var BUe=wt(),GX=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},ZX=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};WX.exports=function(e,t){var n=BUe("Set");try{new n()[e](GX(0));try{return new n()[e](GX(-1)),!1}catch(c){if(!t)return!0;try{return new n()[e](ZX(-1/0)),!1}catch(a){var u=new n;return u.add(1),u.add(2),t(u[e](ZX(1/0)))}}}catch(c){return!1}}});var LM=P(()=>{"use strict";p();var jUe=K(),UUe=DM(),$Ue=tc(),VUe=!$Ue("difference",function(e){return e.size===0});jUe({target:"Set",proto:!0,real:!0,forced:VUe},{difference:UUe})});var FM=P((Ekt,KX)=>{"use strict";p();var GUe=hn(),zM=Wi(),ZUe=tp(),WUe=ec(),HUe=oa(),KUe=Tl(),XUe=zM.Set,HX=zM.add,YUe=zM.has;KX.exports=function(t){var n=GUe(this),u=WUe(t),c=new XUe;return ZUe(n)>u.size?KUe(u.getIterator(),function(a){YUe(n,a)&&HX(c,a)}):HUe(n,function(a){u.includes(a)&&HX(c,a)}),c}});var NM=P(()=>{"use strict";p();var JUe=K(),QUe=Ue(),e6e=FM(),t6e=tc(),r6e=!t6e("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||QUe(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});JUe({target:"Set",proto:!0,real:!0,forced:r6e},{intersection:e6e})});var BM=P((Ckt,XX)=>{"use strict";p();var i6e=hn(),n6e=Wi().has,a6e=tp(),o6e=ec(),s6e=oa(),l6e=Tl(),u6e=Zi();XX.exports=function(t){var n=i6e(this),u=o6e(t);if(a6e(n)<=u.size)return s6e(n,function(a){if(u.includes(a))return!1},!0)!==!1;var c=u.getIterator();return l6e(c,function(a){if(n6e(n,a))return u6e(c,"normal",!1)})!==!1}});var jM=P(()=>{"use strict";p();var c6e=K(),h6e=BM(),d6e=tc(),f6e=!d6e("isDisjointFrom",function(e){return!e});c6e({target:"Set",proto:!0,real:!0,forced:f6e},{isDisjointFrom:h6e})});var UM=P((Dkt,YX)=>{"use strict";p();var p6e=hn(),m6e=tp(),g6e=oa(),v6e=ec();YX.exports=function(t){var n=p6e(this),u=v6e(t);return m6e(n)>u.size?!1:g6e(n,function(c){if(!u.includes(c))return!1},!0)!==!1}});var $M=P(()=>{"use strict";p();var y6e=K(),_6e=UM(),x6e=tc(),b6e=!x6e("isSubsetOf",function(e){return e});y6e({target:"Set",proto:!0,real:!0,forced:b6e},{isSubsetOf:_6e})});var VM=P((Bkt,JX)=>{"use strict";p();var w6e=hn(),S6e=Wi().has,T6e=tp(),E6e=ec(),I6e=Tl(),q6e=Zi();JX.exports=function(t){var n=w6e(this),u=E6e(t);if(T6e(n)<u.size)return!1;var c=u.getIterator();return I6e(c,function(a){if(!S6e(n,a))return q6e(c,"normal",!1)})!==!1}});var GM=P(()=>{"use strict";p();var P6e=K(),A6e=VM(),C6e=tc(),M6e=!C6e("isSupersetOf",function(e){return!e});P6e({target:"Set",proto:!0,real:!0,forced:M6e},{isSupersetOf:A6e})});var WM=P((Gkt,QX)=>{"use strict";p();var R6e=hn(),ZM=Wi(),O6e=q1(),k6e=ec(),D6e=Tl(),L6e=ZM.add,z6e=ZM.has,F6e=ZM.remove;QX.exports=function(t){var n=R6e(this),u=k6e(t).getIterator(),c=O6e(n);return D6e(u,function(a){z6e(n,a)?F6e(c,a):L6e(c,a)}),c}});var HM=P(()=>{"use strict";p();var N6e=K(),B6e=WM(),j6e=tc();N6e({target:"Set",proto:!0,real:!0,forced:!j6e("symmetricDifference")},{symmetricDifference:B6e})});var KM=P((Xkt,eY)=>{"use strict";p();var U6e=hn(),$6e=Wi().add,V6e=q1(),G6e=ec(),Z6e=Tl();eY.exports=function(t){var n=U6e(this),u=G6e(t).getIterator(),c=V6e(n);return Z6e(u,function(a){$6e(c,a)}),c}});var XM=P(()=>{"use strict";p();var W6e=K(),H6e=KM(),K6e=tc();W6e({target:"Set",proto:!0,real:!0,forced:!K6e("union")},{union:H6e})});var tY=P(()=>{"use strict";p();var X6e=K(),Y6e=Fe(),J6e=vr(),Q6e=br(),e$e=It(),t$e=Ue(),r$e=Y6e("".charAt),i$e=t$e(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});X6e({target:"String",proto:!0,forced:i$e},{at:function(t){var n=e$e(J6e(this)),u=n.length,c=Q6e(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:r$e(n,a)}})});var Ih=P((nDt,nY)=>{"use strict";p();var YM=Fe(),n$e=br(),a$e=It(),o$e=vr(),s$e=YM("".charAt),rY=YM("".charCodeAt),l$e=YM("".slice),iY=function(e){return function(t,n){var u=a$e(o$e(t)),c=n$e(n),a=u.length,x,S;return c<0||c>=a?e?"":void 0:(x=rY(u,c),x<55296||x>56319||c+1===a||(S=rY(u,c+1))<56320||S>57343?e?s$e(u,c):x:e?l$e(u,c,c+2):(x-55296<<10)+(S-56320)+65536)}};nY.exports={codeAt:iY(!1),charAt:iY(!0)}});var aY=P(()=>{"use strict";p();var u$e=K(),c$e=Ih().codeAt;u$e({target:"String",proto:!0},{codePointAt:function(t){return c$e(this,t)}})});var P1=P((uDt,oY)=>{"use strict";p();var h$e=Qv(),d$e=TypeError;oY.exports=function(e){if(h$e(e))throw new d$e("The method doesn't accept regular expressions");return e}});var A1=P((hDt,sY)=>{"use strict";p();var f$e=xt(),p$e=f$e("match");sY.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[p$e]=!1,"/./"[e](t)}catch(u){}}return!1}});var cY=P(()=>{"use strict";p();var m$e=K(),g$e=Ou(),v$e=Vi().f,y$e=ra(),lY=It(),_$e=P1(),x$e=vr(),b$e=A1(),w$e=Yt(),S$e=g$e("".slice),T$e=Math.min,uY=b$e("endsWith"),E$e=!w$e&&!uY&&!!function(){var e=v$e(String.prototype,"endsWith");return e&&!e.writable}();m$e({target:"String",proto:!0,forced:!E$e&&!uY},{endsWith:function(t){var n=lY(x$e(this));_$e(t);var u=arguments.length>1?arguments[1]:void 0,c=n.length,a=u===void 0?c:T$e(y$e(u),c),x=lY(t);return S$e(n,a-x.length,a)===x}})});var JM=P(()=>{"use strict";p();var I$e=K(),q$e=Fe(),P$e=Ro(),A$e=RangeError,hY=String.fromCharCode,dY=String.fromCodePoint,C$e=q$e([].join),M$e=!!dY&&dY.length!==1;I$e({target:"String",stat:!0,arity:1,forced:M$e},{fromCodePoint:function(t){for(var n=[],u=arguments.length,c=0,a;u>c;){if(a=+arguments[c++],P$e(a,1114111)!==a)throw new A$e(a+" is not a valid code point");n[c]=a<65536?hY(a):hY(((a-=65536)>>10)+55296,a%1024+56320)}return C$e(n,"")}})});var pY=P(()=>{"use strict";p();var R$e=K(),O$e=Fe(),k$e=P1(),D$e=vr(),fY=It(),L$e=A1(),z$e=O$e("".indexOf);R$e({target:"String",proto:!0,forced:!L$e("includes")},{includes:function(t){return!!~z$e(fY(D$e(this)),fY(k$e(t)),arguments.length>1?arguments[1]:void 0)}})});var QM=P(()=>{"use strict";p();var F$e=K(),N$e=Fe(),B$e=vr(),j$e=It(),mY=N$e("".charCodeAt);F$e({target:"String",proto:!0},{isWellFormed:function(){for(var t=j$e(B$e(this)),n=t.length,u=0;u<n;u++){var c=mY(t,u);if((c&63488)===55296&&(c>=56320||++u>=n||(mY(t,u)&64512)!==56320))return!1}return!0}})});var eR=P(()=>{"use strict";p();var U$e=Ih().charAt,$$e=It(),vY=rr(),V$e=Pb(),gY=ki(),yY="String Iterator",G$e=vY.set,Z$e=vY.getterFor(yY);V$e(String,"String",function(e){G$e(this,{type:yY,string:$$e(e),index:0})},function(){var t=Z$e(this),n=t.string,u=t.index,c;return u>=n.length?gY(void 0,!0):(c=U$e(n,u),t.index+=c.length,gY(c,!1))})});var ny=P((PDt,SY)=>{"use strict";p();E1();var _Y=et(),xY=or(),W$e=T1(),bY=Ue(),wY=xt(),H$e=Si(),K$e=wY("species"),tR=RegExp.prototype;SY.exports=function(e,t,n,u){var c=wY(e),a=!bY(function(){var R={};return R[c]=function(){return 7},""[e](R)!==7}),x=a&&!bY(function(){var R=!1,D=/a/;return e==="split"&&(D={},D.constructor={},D.constructor[K$e]=function(){return D},D.flags="",D[c]=/./[c]),D.exec=function(){return R=!0,null},D[c](""),!R});if(!a||!x||n){var S=/./[c],A=t(c,""[e],function(R,D,L,H,ce){var de=D.exec;return de===W$e||de===tR.exec?a&&!ce?{done:!0,value:_Y(S,D,L,H)}:{done:!0,value:_Y(R,L,D,H)}:{done:!1}});xY(String.prototype,e,A[0]),xY(tR,c,A[1])}u&&H$e(tR[c],"sham",!0)}});var ay=P((CDt,TY)=>{"use strict";p();var X$e=Ih().charAt;TY.exports=function(e,t,n){return t+(n?X$e(e,t).length:1)}});var rp=P((RDt,IY)=>{"use strict";p();var EY=et(),Y$e=rt(),J$e=kt(),Q$e=ln(),eVe=T1(),tVe=TypeError;IY.exports=function(e,t){var n=e.exec;if(J$e(n)){var u=EY(n,e,t);return u!==null&&Y$e(u),u}if(Q$e(e)==="RegExp")return EY(eVe,e,t);throw new tVe("RegExp#exec called on incompatible receiver")}});var PY=P(()=>{"use strict";p();var rVe=et(),iVe=ny(),nVe=rt(),aVe=_t(),oVe=ra(),rR=It(),sVe=vr(),lVe=Qr(),uVe=ay(),qY=rp();iVe("match",function(e,t,n){return[function(c){var a=sVe(this),x=aVe(c)?lVe(c,e):void 0;return x?rVe(x,c,a):new RegExp(c)[e](rR(a))},function(u){var c=nVe(this),a=rR(u),x=n(t,c,a);if(x.done)return x.value;if(!c.global)return qY(c,a);var S=c.unicode;c.lastIndex=0;for(var A=[],R=0,D;(D=qY(c,a))!==null;){var L=rR(D[0]);A[R]=L,L===""&&(c.lastIndex=uVe(a,oVe(c.lastIndex),S)),R++}return R===0?null:A}]})});var sR=P(()=>{"use strict";p();var cVe=K(),AY=et(),RY=Ou(),hVe=Bu(),C1=ki(),CY=vr(),OY=ra(),oy=It(),dVe=rt(),fVe=_t(),pVe=ln(),mVe=Qv(),kY=Jf(),gVe=Qr(),vVe=or(),yVe=Ue(),_Ve=xt(),xVe=Gv(),bVe=ay(),wVe=rp(),DY=rr(),nR=Yt(),M1=_Ve("matchAll"),LY="RegExp String",zY=LY+" Iterator",SVe=DY.set,TVe=DY.getterFor(zY),MY=RegExp.prototype,EVe=TypeError,aR=RY("".indexOf),R1=RY("".matchAll),iR=!!R1&&!yVe(function(){R1("a",/./)}),IVe=hVe(function(t,n,u,c){SVe(this,{type:zY,regexp:t,string:n,global:u,unicode:c,done:!1})},LY,function(){var t=TVe(this);if(t.done)return C1(void 0,!0);var n=t.regexp,u=t.string,c=wVe(n,u);return c===null?(t.done=!0,C1(void 0,!0)):t.global?(oy(c[0])===""&&(n.lastIndex=bVe(u,OY(n.lastIndex),t.unicode)),C1(c,!1)):(t.done=!0,C1(c,!1))}),oR=function(e){var t=dVe(this),n=oy(e),u=xVe(t,RegExp),c=oy(kY(t)),a,x,S;return a=new u(u===RegExp?t.source:t,c),x=!!~aR(c,"g"),S=!!~aR(c,"u"),a.lastIndex=OY(t.lastIndex),new IVe(a,n,x,S)};cVe({target:"String",proto:!0,forced:iR},{matchAll:function(t){var n=CY(this),u,c,a,x;if(fVe(t)){if(mVe(t)&&(u=oy(CY(kY(t))),!~aR(u,"g")))throw new EVe("`.matchAll` does not allow non-global regexes");if(iR)return R1(n,t);if(a=gVe(t,M1),a===void 0&&nR&&pVe(t)==="RegExp"&&(a=oR),a)return AY(a,t,n)}else if(iR)return R1(n,t);return c=oy(n),x=new RegExp(t,"g"),nR?AY(oR,x,c):x[M1](c)}});nR||M1 in MY||vVe(MY,M1,oR)});var lR=P((BDt,FY)=>{"use strict";p();var qVe=Po();FY.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(qVe)});var NY=P(()=>{"use strict";p();var PVe=K(),AVe=Rv().end,CVe=lR();PVe({target:"String",proto:!0,forced:CVe},{padEnd:function(t){return AVe(this,t,arguments.length>1?arguments[1]:void 0)}})});var BY=P(()=>{"use strict";p();var MVe=K(),RVe=Rv().start,OVe=lR();MVe({target:"String",proto:!0,forced:OVe},{padStart:function(t){return RVe(this,t,arguments.length>1?arguments[1]:void 0)}})});var VY=P(()=>{"use strict";p();var kVe=K(),$Y=Fe(),DVe=wi(),LVe=$t(),jY=It(),zVe=Ht(),UY=$Y([].push),FVe=$Y([].join);kVe({target:"String",stat:!0},{raw:function(t){var n=DVe(LVe(t).raw),u=zVe(n);if(!u)return"";for(var c=arguments.length,a=[],x=0;;){if(UY(a,jY(n[x++])),x===u)return FVe(a,"");x<c&&UY(a,jY(arguments[x]))}}})});var GY=P(()=>{"use strict";p();var NVe=K(),BVe=Mv();NVe({target:"String",proto:!0},{repeat:BVe})});var dR=P((eLt,ZY)=>{"use strict";p();var hR=Fe(),jVe=$t(),UVe=Math.floor,uR=hR("".charAt),$Ve=hR("".replace),cR=hR("".slice),VVe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,GVe=/\$([$&'`]|\d{1,2})/g;ZY.exports=function(e,t,n,u,c,a){var x=n+e.length,S=u.length,A=GVe;return c!==void 0&&(c=jVe(c),A=VVe),$Ve(a,A,function(R,D){var L;switch(uR(D,0)){case"$":return"$";case"&":return e;case"`":return cR(t,0,n);case"'":return cR(t,x);case"<":L=c[cR(D,1,-1)];break;default:var H=+D;if(H===0)return R;if(H>S){var ce=UVe(H/10);return ce===0?R:ce<=S?u[ce-1]===void 0?uR(D,1):u[ce-1]+uR(D,1):R}L=u[H-1]}return L===void 0?"":L})}});var YY=P(()=>{"use strict";p();var ZVe=cn(),WY=et(),O1=Fe(),WVe=ny(),HVe=Ue(),KVe=rt(),XVe=kt(),YVe=_t(),JVe=br(),QVe=ra(),ip=It(),e8e=vr(),t8e=ay(),r8e=Qr(),i8e=dR(),n8e=rp(),a8e=xt(),pR=a8e("replace"),o8e=Math.max,s8e=Math.min,l8e=O1([].concat),fR=O1([].push),HY=O1("".indexOf),KY=O1("".slice),u8e=function(e){return e===void 0?e:String(e)},c8e=function(){return"a".replace(/./,"$0")==="$0"}(),XY=function(){return /./[pR]?/./[pR]("a","$0")==="":!1}(),h8e=!HVe(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});WVe("replace",function(e,t,n){var u=XY?"$":"$0";return[function(a,x){var S=e8e(this),A=YVe(a)?r8e(a,pR):void 0;return A?WY(A,a,S,x):WY(t,ip(S),a,x)},function(c,a){var x=KVe(this),S=ip(c);if(typeof a=="string"&&HY(a,u)===-1&&HY(a,"$<")===-1){var A=n(t,x,S,a);if(A.done)return A.value}var R=XVe(a);R||(a=ip(a));var D=x.global,L;D&&(L=x.unicode,x.lastIndex=0);for(var H=[],ce;ce=n8e(x,S),!(ce===null||(fR(H,ce),!D));){var de=ip(ce[0]);de===""&&(x.lastIndex=t8e(S,QVe(x.lastIndex),L))}for(var ve="",X=0,ee=0;ee<H.length;ee++){ce=H[ee];for(var oe=ip(ce[0]),Te=o8e(s8e(JVe(ce.index),S.length),0),Ae=[],it,Ge=1;Ge<ce.length;Ge++)fR(Ae,u8e(ce[Ge]));var nt=ce.groups;if(R){var dt=l8e([oe],Ae,Te,S);nt!==void 0&&fR(dt,nt),it=ip(ZVe(a,void 0,dt))}else it=i8e(oe,S,Te,Ae,nt,a);Te>=X&&(ve+=KY(S,X,Te)+it,X=Te+oe.length)}return ve+KY(S,X)}]},!h8e||!c8e||XY)});var vR=P(()=>{"use strict";p();var d8e=K(),f8e=et(),gR=Fe(),JY=vr(),p8e=kt(),m8e=_t(),g8e=Qv(),np=It(),v8e=Qr(),y8e=Jf(),_8e=dR(),x8e=xt(),b8e=Yt(),w8e=x8e("replace"),S8e=TypeError,mR=gR("".indexOf),T8e=gR("".replace),QY=gR("".slice),E8e=Math.max;d8e({target:"String",proto:!0},{replaceAll:function(t,n){var u=JY(this),c,a,x,S,A,R,D,L,H,ce,de=0,ve="";if(m8e(t)){if(c=g8e(t),c&&(a=np(JY(y8e(t))),!~mR(a,"g")))throw new S8e("`.replaceAll` does not allow non-global regexes");if(x=v8e(t,w8e),x)return f8e(x,t,u,n);if(b8e&&c)return T8e(np(u),t,n)}for(S=np(u),A=np(t),R=p8e(n),R||(n=np(n)),D=A.length,L=E8e(1,D),H=mR(S,A);H!==-1;)ce=R?np(n(A,H,S)):_8e(A,S,H,[],void 0,n),ve+=QY(S,de,H)+ce,de=H+D,H=H+L>S.length?-1:mR(S,A,H+L);return de<S.length&&(ve+=QY(S,de)),ve}})});var rJ=P(()=>{"use strict";p();var I8e=et(),q8e=ny(),P8e=rt(),A8e=_t(),C8e=vr(),eJ=u1(),tJ=It(),M8e=Qr(),R8e=rp();q8e("search",function(e,t,n){return[function(c){var a=C8e(this),x=A8e(c)?M8e(c,e):void 0;return x?I8e(x,c,a):new RegExp(c)[e](tJ(a))},function(u){var c=P8e(this),a=tJ(u),x=n(t,c,a);if(x.done)return x.value;var S=c.lastIndex;eJ(S,0)||(c.lastIndex=0);var A=R8e(c,a);return eJ(c.lastIndex,S)||(c.lastIndex=S),A===null?-1:A.index}]})});var sJ=P(()=>{"use strict";p();var yR=et(),oJ=Fe(),O8e=ny(),k8e=rt(),D8e=_t(),L8e=vr(),z8e=Gv(),F8e=ay(),N8e=ra(),iJ=It(),B8e=Qr(),nJ=rp(),j8e=ey(),U8e=Ue(),ap=j8e.UNSUPPORTED_Y,$8e=4294967295,V8e=Math.min,_R=oJ([].push),xR=oJ("".slice),G8e=!U8e(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length!==2||n[0]!=="a"||n[1]!=="b"}),aJ="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;O8e("split",function(e,t,n){var u="0".split(void 0,0).length?function(c,a){return c===void 0&&a===0?[]:yR(t,this,c,a)}:t;return[function(a,x){var S=L8e(this),A=D8e(a)?B8e(a,e):void 0;return A?yR(A,a,S,x):yR(u,iJ(S),a,x)},function(c,a){var x=k8e(this),S=iJ(c);if(!aJ){var A=n(u,x,S,a,u!==t);if(A.done)return A.value}var R=z8e(x,RegExp),D=x.unicode,L=(x.ignoreCase?"i":"")+(x.multiline?"m":"")+(x.unicode?"u":"")+(ap?"g":"y"),H=new R(ap?"^(?:"+x.source+")":x,L),ce=a===void 0?$8e:a>>>0;if(ce===0)return[];if(S.length===0)return nJ(H,S)===null?[S]:[];for(var de=0,ve=0,X=[];ve<S.length;){H.lastIndex=ap?0:ve;var ee=nJ(H,ap?xR(S,ve):S),oe;if(ee===null||(oe=V8e(N8e(H.lastIndex+(ap?ve:0)),S.length))===de)ve=F8e(S,ve,D);else{if(_R(X,xR(S,de,ve)),X.length===ce)return X;for(var Te=1;Te<=ee.length-1;Te++)if(_R(X,ee[Te]),X.length===ce)return X;ve=de=oe}}return _R(X,xR(S,de)),X}]},aJ||!G8e,ap)});var cJ=P(()=>{"use strict";p();var Z8e=K(),W8e=Ou(),H8e=Vi().f,K8e=ra(),lJ=It(),X8e=P1(),Y8e=vr(),J8e=A1(),Q8e=Yt(),eGe=W8e("".slice),tGe=Math.min,uJ=J8e("startsWith"),rGe=!Q8e&&!uJ&&!!function(){var e=H8e(String.prototype,"startsWith");return e&&!e.writable}();Z8e({target:"String",proto:!0,forced:!rGe&&!uJ},{startsWith:function(t){var n=lJ(Y8e(this));X8e(t);var u=K8e(tGe(arguments.length>1?arguments[1]:void 0,n.length)),c=lJ(t);return eGe(n,u,u+c.length)===c}})});var dJ=P(()=>{"use strict";p();var iGe=K(),nGe=Fe(),aGe=vr(),hJ=br(),oGe=It(),sGe=nGe("".slice),lGe=Math.max,uGe=Math.min,cGe=!"".substr||"ab".substr(-1)!=="b";iGe({target:"String",proto:!0,forced:cGe},{substr:function(t,n){var u=oGe(aGe(this)),c=u.length,a=hJ(t),x,S;return a===1/0&&(a=0),a<0&&(a=lGe(c+a,0)),x=n===void 0?c:hJ(n),x<=0||x===1/0?"":(S=uGe(a+x,c),a>=S?"":sGe(u,a,S))}})});var TR=P(()=>{"use strict";p();var hGe=K(),mJ=et(),SR=Fe(),dGe=vr(),fGe=It(),pGe=Ue(),mGe=Array,bR=SR("".charAt),fJ=SR("".charCodeAt),gGe=SR([].join),wR="".toWellFormed,vGe="\uFFFD",pJ=wR&&pGe(function(){return mJ(wR,1)!=="1"});hGe({target:"String",proto:!0,forced:pJ},{toWellFormed:function(){var t=fGe(dGe(this));if(pJ)return mJ(wR,t);for(var n=t.length,u=mGe(n),c=0;c<n;c++){var a=fJ(t,c);(a&63488)!==55296?u[c]=bR(t,c):a>=56320||c+1>=n||(fJ(t,c+1)&64512)!==56320?u[c]=vGe:(u[c]=bR(t,c),u[++c]=bR(t,c))}return gGe(u,"")}})});var k1=P((SLt,yJ)=>{"use strict";p();var yGe=sh().PROPER,_Ge=Ue(),gJ=xh(),vJ="\u200B\x85\u180E";yJ.exports=function(e){return _Ge(function(){return!!gJ[e]()||vJ[e]()!==vJ||yGe&&gJ[e].name!==e})}});var _J=P(()=>{"use strict";p();var xGe=K(),bGe=bh().trim,wGe=k1();xGe({target:"String",proto:!0,forced:wGe("trim")},{trim:function(){return bGe(this)}})});var ER=P((PLt,xJ)=>{"use strict";p();var SGe=bh().end,TGe=k1();xJ.exports=TGe("trimEnd")?function(){return SGe(this)}:"".trimEnd});var wJ=P(()=>{"use strict";p();var EGe=K(),bJ=ER();EGe({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==bJ},{trimRight:bJ})});var TJ=P(()=>{"use strict";p();wJ();var IGe=K(),SJ=ER();IGe({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==SJ},{trimEnd:SJ})});var IR=P((LLt,EJ)=>{"use strict";p();var qGe=bh().start,PGe=k1();EJ.exports=PGe("trimStart")?function(){return qGe(this)}:"".trimStart});var qJ=P(()=>{"use strict";p();var AGe=K(),IJ=IR();AGe({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==IJ},{trimLeft:IJ})});var AJ=P(()=>{"use strict";p();qJ();var CGe=K(),PJ=IR();CGe({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==PJ},{trimStart:PJ})});var sa=P((VLt,MJ)=>{"use strict";p();var MGe=Fe(),RGe=vr(),CJ=It(),OGe=/"/g,kGe=MGe("".replace);MJ.exports=function(e,t,n,u){var c=CJ(RGe(e)),a="<"+t;return n!==""&&(a+=" "+n+"=\""+kGe(CJ(u),OGe,"&quot;")+"\""),a+">"+c+"</"+t+">"}});var la=P((ZLt,RJ)=>{"use strict";p();var DGe=Ue();RJ.exports=function(e){return DGe(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var OJ=P(()=>{"use strict";p();var LGe=K(),zGe=sa(),FGe=la();LGe({target:"String",proto:!0,forced:FGe("anchor")},{anchor:function(t){return zGe(this,"a","name",t)}})});var kJ=P(()=>{"use strict";p();var NGe=K(),BGe=sa(),jGe=la();NGe({target:"String",proto:!0,forced:jGe("big")},{big:function(){return BGe(this,"big","","")}})});var DJ=P(()=>{"use strict";p();var UGe=K(),$Ge=sa(),VGe=la();UGe({target:"String",proto:!0,forced:VGe("blink")},{blink:function(){return $Ge(this,"blink","","")}})});var LJ=P(()=>{"use strict";p();var GGe=K(),ZGe=sa(),WGe=la();GGe({target:"String",proto:!0,forced:WGe("bold")},{bold:function(){return ZGe(this,"b","","")}})});var zJ=P(()=>{"use strict";p();var HGe=K(),KGe=sa(),XGe=la();HGe({target:"String",proto:!0,forced:XGe("fixed")},{fixed:function(){return KGe(this,"tt","","")}})});var FJ=P(()=>{"use strict";p();var YGe=K(),JGe=sa(),QGe=la();YGe({target:"String",proto:!0,forced:QGe("fontcolor")},{fontcolor:function(t){return JGe(this,"font","color",t)}})});var NJ=P(()=>{"use strict";p();var eZe=K(),tZe=sa(),rZe=la();eZe({target:"String",proto:!0,forced:rZe("fontsize")},{fontsize:function(t){return tZe(this,"font","size",t)}})});var BJ=P(()=>{"use strict";p();var iZe=K(),nZe=sa(),aZe=la();iZe({target:"String",proto:!0,forced:aZe("italics")},{italics:function(){return nZe(this,"i","","")}})});var jJ=P(()=>{"use strict";p();var oZe=K(),sZe=sa(),lZe=la();oZe({target:"String",proto:!0,forced:lZe("link")},{link:function(t){return sZe(this,"a","href",t)}})});var UJ=P(()=>{"use strict";p();var uZe=K(),cZe=sa(),hZe=la();uZe({target:"String",proto:!0,forced:hZe("small")},{small:function(){return cZe(this,"small","","")}})});var $J=P(()=>{"use strict";p();var dZe=K(),fZe=sa(),pZe=la();dZe({target:"String",proto:!0,forced:pZe("strike")},{strike:function(){return fZe(this,"strike","","")}})});var VJ=P(()=>{"use strict";p();var mZe=K(),gZe=sa(),vZe=la();mZe({target:"String",proto:!0,forced:vZe("sub")},{sub:function(){return gZe(this,"sub","","")}})});var GJ=P(()=>{"use strict";p();var yZe=K(),_Ze=sa(),xZe=la();yZe({target:"String",proto:!0,forced:xZe("sup")},{sup:function(){return _Ze(this,"sup","","")}})});var D1=P((Ozt,WJ)=>{"use strict";p();var ZJ=Qe(),qR=Ue(),bZe=xv(),wZe=Bt().NATIVE_ARRAY_BUFFER_VIEWS,SZe=ZJ.ArrayBuffer,qh=ZJ.Int8Array;WJ.exports=!wZe||!qR(function(){qh(1)})||!qR(function(){new qh(-1)})||!bZe(function(e){new qh,new qh(null),new qh(1.5),new qh(e)},!0)||qR(function(){return new qh(new SZe(2),1,void 0).length!==1})});var PR=P((Dzt,HJ)=>{"use strict";p();var TZe=Bf(),EZe=RangeError;HJ.exports=function(e,t){var n=TZe(e);if(n%t)throw new EZe("Wrong offset");return n}});var AR=P((zzt,KJ)=>{"use strict";p();var IZe=Math.round;KJ.exports=function(e){var t=IZe(e);return t<0?0:t>255?255:t&255}});var L1=P((Nzt,XJ)=>{"use strict";p();var qZe=Fn();XJ.exports=function(e){var t=qZe(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var sy=P((jzt,YJ)=>{"use strict";p();var PZe=rv(),AZe=TypeError;YJ.exports=function(e){var t=PZe(e,"number");if(typeof t=="number")throw new AZe("Can't convert number to bigint");return BigInt(t)}});var CR=P(($zt,JJ)=>{"use strict";p();var CZe=dr(),MZe=et(),RZe=Vv(),OZe=$t(),kZe=Ht(),DZe=zu(),LZe=xs(),zZe=xb(),FZe=L1(),NZe=Bt().aTypedArrayConstructor,BZe=sy();JJ.exports=function(t){var n=RZe(this),u=OZe(t),c=arguments.length,a=c>1?arguments[1]:void 0,x=a!==void 0,S=LZe(u),A,R,D,L,H,ce,de,ve;if(S&&!zZe(S))for(de=DZe(u,S),ve=de.next,u=[];!(ce=MZe(ve,de)).done;)u.push(ce.value);for(x&&c>2&&(a=CZe(a,arguments[2])),R=kZe(u),D=new(NZe(n))(R),L=FZe(D),A=0;R>A;A++)H=x?a(u[A],A):u[A],D[A]=L?BZe(H):+H;return D}});var Is=P((Gzt,zR)=>{"use strict";p();var QJ=K(),cQ=Qe(),eQ=et(),jZe=pt(),UZe=D1(),hy=Bt(),hQ=Cv(),tQ=In(),$Ze=ea(),ly=Si(),VZe=o1(),GZe=ra(),rQ=Rf(),MR=PR(),ZZe=AR(),dQ=ys(),uy=Dt(),WZe=Fn(),kR=_t(),HZe=dl(),KZe=ei(),XZe=un(),z1=eo(),YZe=Ru().f,iQ=CR(),JZe=ti().forEach,QZe=Uu(),eWe=wr(),fQ=gr(),pQ=Vi(),nQ=vl(),FR=rr(),tWe=Lu(),DR=FR.get,rWe=FR.set,iWe=FR.enforce,mQ=fQ.f,nWe=pQ.f,RR=cQ.RangeError,gQ=hQ.ArrayBuffer,aWe=gQ.prototype,oWe=hQ.DataView,F1=hy.NATIVE_ARRAY_BUFFER_VIEWS,aQ=hy.TYPED_ARRAY_TAG,oQ=hy.TypedArray,cy=hy.TypedArrayPrototype,LR=hy.isTypedArray,N1="BYTES_PER_ELEMENT",OR="Wrong length",B1=function(e,t){eWe(e,t,{configurable:!0,get:function(){return DR(this)[t]}})},sQ=function(e){var t;return XZe(aWe,e)||(t=WZe(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},vQ=function(e,t){return LR(e)&&!HZe(t)&&t in e&&VZe(+t)&&t>=0},lQ=function(t,n){return n=dQ(n),vQ(t,n)?$Ze(2,t[n]):nWe(t,n)},uQ=function(t,n,u){return n=dQ(n),vQ(t,n)&&kR(u)&&uy(u,"value")&&!uy(u,"get")&&!uy(u,"set")&&!u.configurable&&(!uy(u,"writable")||u.writable)&&(!uy(u,"enumerable")||u.enumerable)?(t[n]=u.value,t):mQ(t,n,u)};jZe?(F1||(pQ.f=lQ,fQ.f=uQ,B1(cy,"buffer"),B1(cy,"byteOffset"),B1(cy,"byteLength"),B1(cy,"length")),QJ({target:"Object",stat:!0,forced:!F1},{getOwnPropertyDescriptor:lQ,defineProperty:uQ}),zR.exports=function(e,t,n){var u=e.match(/\d+/)[0]/8,c=e+(n?"Clamped":"")+"Array",a="get"+e,x="set"+e,S=cQ[c],A=S,R=A&&A.prototype,D={},L=function(ve,X){var ee=DR(ve);return ee.view[a](X*u+ee.byteOffset,!0)},H=function(ve,X,ee){var oe=DR(ve);oe.view[x](X*u+oe.byteOffset,n?ZZe(ee):ee,!0)},ce=function(ve,X){mQ(ve,X,{get:function(){return L(this,X)},set:function(ee){return H(this,X,ee)},enumerable:!0})};F1?UZe&&(A=t(function(ve,X,ee,oe){return tQ(ve,R),tWe(function(){return kR(X)?sQ(X)?oe!==void 0?new S(X,MR(ee,u),oe):ee!==void 0?new S(X,MR(ee,u)):new S(X):LR(X)?nQ(A,X):eQ(iQ,A,X):new S(rQ(X))}(),ve,A)}),z1&&z1(A,oQ),JZe(YZe(S),function(ve){ve in A||ly(A,ve,S[ve])}),A.prototype=R):(A=t(function(ve,X,ee,oe){tQ(ve,R);var Te=0,Ae=0,it,Ge,nt;if(!kR(X))nt=rQ(X),Ge=nt*u,it=new gQ(Ge);else if(sQ(X)){it=X,Ae=MR(ee,u);var dt=X.byteLength;if(oe===void 0){if(dt%u)throw new RR(OR);if(Ge=dt-Ae,Ge<0)throw new RR(OR)}else if(Ge=GZe(oe)*u,Ge+Ae>dt)throw new RR(OR);nt=Ge/u}else return LR(X)?nQ(A,X):eQ(iQ,A,X);for(rWe(ve,{buffer:it,byteOffset:Ae,byteLength:Ge,length:nt,view:new oWe(it)});Te<nt;)ce(ve,Te++)}),z1&&z1(A,oQ),R=A.prototype=KZe(cy)),R.constructor!==A&&ly(R,"constructor",A),iWe(R).TypedArrayConstructor=A,aQ&&ly(R,aQ,c);var de=A!==S;D[c]=A,QJ({global:!0,constructor:!0,forced:de,sham:!F1},D),N1 in A||ly(A,N1,u),N1 in R||ly(R,N1,u),QZe(c)}):zR.exports=function(){}});var yQ=P(()=>{"use strict";p();var sWe=Is();sWe("Float32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var _Q=P(()=>{"use strict";p();var lWe=Is();lWe("Float64",function(e){return function(n,u,c){return e(this,n,u,c)}})});var xQ=P(()=>{"use strict";p();var uWe=Is();uWe("Int8",function(e){return function(n,u,c){return e(this,n,u,c)}})});var bQ=P(()=>{"use strict";p();var cWe=Is();cWe("Int16",function(e){return function(n,u,c){return e(this,n,u,c)}})});var wQ=P(()=>{"use strict";p();var hWe=Is();hWe("Int32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var SQ=P(()=>{"use strict";p();var dWe=Is();dWe("Uint8",function(e){return function(n,u,c){return e(this,n,u,c)}})});var TQ=P(()=>{"use strict";p();var fWe=Is();fWe("Uint8",function(e){return function(n,u,c){return e(this,n,u,c)}},!0)});var EQ=P(()=>{"use strict";p();var pWe=Is();pWe("Uint16",function(e){return function(n,u,c){return e(this,n,u,c)}})});var IQ=P(()=>{"use strict";p();var mWe=Is();mWe("Uint32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var NR=P(()=>{"use strict";p();var qQ=Bt(),gWe=Ht(),vWe=br(),yWe=qQ.aTypedArray,_We=qQ.exportTypedArrayMethod;_We("at",function(t){var n=yWe(this),u=gWe(n),c=vWe(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:n[a]})});var AQ=P(()=>{"use strict";p();var xWe=Fe(),PQ=Bt(),bWe=j2(),wWe=xWe(bWe),SWe=PQ.aTypedArray,TWe=PQ.exportTypedArrayMethod;TWe("copyWithin",function(t,n){return wWe(SWe(this),t,n,arguments.length>2?arguments[2]:void 0)})});var MQ=P(()=>{"use strict";p();var CQ=Bt(),EWe=ti().every,IWe=CQ.aTypedArray,qWe=CQ.exportTypedArrayMethod;qWe("every",function(t){return EWe(IWe(this),t,arguments.length>1?arguments[1]:void 0)})});var OQ=P(()=>{"use strict";p();var RQ=Bt(),PWe=Tb(),AWe=sy(),CWe=Fn(),MWe=et(),RWe=Fe(),OWe=Ue(),kWe=RQ.aTypedArray,DWe=RQ.exportTypedArrayMethod,LWe=RWe("".slice),zWe=OWe(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});DWe("fill",function(t){var n=arguments.length;kWe(this);var u=LWe(CWe(this),0,3)==="Big"?AWe(t):+t;return MWe(PWe,this,u,n>1?arguments[1]:void 0,n>2?arguments[2]:void 0)},zWe)});var j1=P((RFt,kQ)=>{"use strict";p();var FWe=vl(),NWe=Bt().getTypedArrayConstructor;kQ.exports=function(e,t){return FWe(NWe(e),t)}});var LQ=P(()=>{"use strict";p();var DQ=Bt(),BWe=ti().filter,jWe=j1(),UWe=DQ.aTypedArray,$We=DQ.exportTypedArrayMethod;$We("filter",function(t){var n=BWe(UWe(this),t,arguments.length>1?arguments[1]:void 0);return jWe(this,n)})});var FQ=P(()=>{"use strict";p();var zQ=Bt(),VWe=ti().find,GWe=zQ.aTypedArray,ZWe=zQ.exportTypedArrayMethod;ZWe("find",function(t){return VWe(GWe(this),t,arguments.length>1?arguments[1]:void 0)})});var BQ=P(()=>{"use strict";p();var NQ=Bt(),WWe=ti().findIndex,HWe=NQ.aTypedArray,KWe=NQ.exportTypedArrayMethod;KWe("findIndex",function(t){return WWe(HWe(this),t,arguments.length>1?arguments[1]:void 0)})});var BR=P(()=>{"use strict";p();var jQ=Bt(),XWe=_v().findLast,YWe=jQ.aTypedArray,JWe=jQ.exportTypedArrayMethod;JWe("findLast",function(t){return XWe(YWe(this),t,arguments.length>1?arguments[1]:void 0)})});var jR=P(()=>{"use strict";p();var UQ=Bt(),QWe=_v().findLastIndex,eHe=UQ.aTypedArray,tHe=UQ.exportTypedArrayMethod;tHe("findLastIndex",function(t){return QWe(eHe(this),t,arguments.length>1?arguments[1]:void 0)})});var VQ=P(()=>{"use strict";p();var $Q=Bt(),rHe=ti().forEach,iHe=$Q.aTypedArray,nHe=$Q.exportTypedArrayMethod;nHe("forEach",function(t){rHe(iHe(this),t,arguments.length>1?arguments[1]:void 0)})});var GQ=P(()=>{"use strict";p();var aHe=D1(),oHe=Bt().exportTypedArrayStaticMethod,sHe=CR();oHe("from",sHe,aHe)});var WQ=P(()=>{"use strict";p();var ZQ=Bt(),lHe=Tf().includes,uHe=ZQ.aTypedArray,cHe=ZQ.exportTypedArrayMethod;cHe("includes",function(t){return lHe(uHe(this),t,arguments.length>1?arguments[1]:void 0)})});var KQ=P(()=>{"use strict";p();var HQ=Bt(),hHe=Tf().indexOf,dHe=HQ.aTypedArray,fHe=HQ.exportTypedArrayMethod;fHe("indexOf",function(t){return hHe(dHe(this),t,arguments.length>1?arguments[1]:void 0)})});var eee=P(()=>{"use strict";p();var pHe=Qe(),mHe=Ue(),UR=Fe(),YQ=Bt(),$R=Sv(),gHe=xt(),VR=gHe("iterator"),XQ=pHe.Uint8Array,vHe=UR($R.values),yHe=UR($R.keys),_He=UR($R.entries),GR=YQ.aTypedArray,U1=YQ.exportTypedArrayMethod,op=XQ&&XQ.prototype,$1=!mHe(function(){op[VR].call([1])}),JQ=!!op&&op.values&&op[VR]===op.values&&op.values.name==="values",QQ=function(){return vHe(GR(this))};U1("entries",function(){return _He(GR(this))},$1);U1("keys",function(){return yHe(GR(this))},$1);U1("values",QQ,$1||!JQ,{name:"values"});U1(VR,QQ,$1||!JQ,{name:"values"})});var ree=P(()=>{"use strict";p();var tee=Bt(),xHe=Fe(),bHe=tee.aTypedArray,wHe=tee.exportTypedArrayMethod,SHe=xHe([].join);wHe("join",function(t){return SHe(bHe(this),t)})});var nee=P(()=>{"use strict";p();var iee=Bt(),THe=cn(),EHe=iP(),IHe=iee.aTypedArray,qHe=iee.exportTypedArrayMethod;qHe("lastIndexOf",function(t){var n=arguments.length;return THe(EHe,IHe(this),n>1?[t,arguments[1]]:[t])})});var aee=P(()=>{"use strict";p();var ZR=Bt(),PHe=ti().map,AHe=ZR.aTypedArray,CHe=ZR.getTypedArrayConstructor,MHe=ZR.exportTypedArrayMethod;MHe("map",function(t){return PHe(AHe(this),t,arguments.length>1?arguments[1]:void 0,function(n,u){return new(CHe(n))(u)})})});var see=P(()=>{"use strict";p();var oee=Bt(),RHe=D1(),OHe=oee.aTypedArrayConstructor,kHe=oee.exportTypedArrayStaticMethod;kHe("of",function(){for(var t=0,n=arguments.length,u=new(OHe(this))(n);n>t;)u[t]=arguments[t++];return u},RHe)});var uee=P(()=>{"use strict";p();var lee=Bt(),DHe=Tv().left,LHe=lee.aTypedArray,zHe=lee.exportTypedArrayMethod;zHe("reduce",function(t){var n=arguments.length;return DHe(LHe(this),t,n,n>1?arguments[1]:void 0)})});var hee=P(()=>{"use strict";p();var cee=Bt(),FHe=Tv().right,NHe=cee.aTypedArray,BHe=cee.exportTypedArrayMethod;BHe("reduceRight",function(t){var n=arguments.length;return FHe(NHe(this),t,n,n>1?arguments[1]:void 0)})});var fee=P(()=>{"use strict";p();var dee=Bt(),jHe=dee.aTypedArray,UHe=dee.exportTypedArrayMethod,$He=Math.floor;UHe("reverse",function(){for(var t=this,n=jHe(t).length,u=$He(n/2),c=0,a;c<u;)a=t[c],t[c++]=t[--n],t[n]=a;return t})});var _ee=P(()=>{"use strict";p();var mee=Qe(),gee=et(),KR=Bt(),VHe=Ht(),GHe=PR(),ZHe=$t(),vee=Ue(),WHe=mee.RangeError,WR=mee.Int8Array,pee=WR&&WR.prototype,yee=pee&&pee.set,HHe=KR.aTypedArray,KHe=KR.exportTypedArrayMethod,HR=!vee(function(){var e=new Uint8ClampedArray(2);return gee(yee,e,{length:1,0:3},1),e[1]!==3}),XHe=HR&&KR.NATIVE_ARRAY_BUFFER_VIEWS&&vee(function(){var e=new WR(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});KHe("set",function(t){HHe(this);var n=GHe(arguments.length>1?arguments[1]:void 0,1),u=ZHe(t);if(HR)return gee(yee,this,u,n);var c=this.length,a=VHe(u),x=0;if(a+n>c)throw new WHe("Wrong length");for(;x<a;)this[n+x]=u[x++]},!HR||XHe)});var xee=P(()=>{"use strict";p();var XR=Bt(),YHe=Ue(),JHe=ia(),QHe=XR.aTypedArray,e7e=XR.getTypedArrayConstructor,t7e=XR.exportTypedArrayMethod,r7e=YHe(function(){new Int8Array(1).slice()});t7e("slice",function(t,n){for(var u=JHe(QHe(this),t,n),c=e7e(this),a=0,x=u.length,S=new c(x);x>a;)S[a]=u[a++];return S},r7e)});var wee=P(()=>{"use strict";p();var bee=Bt(),i7e=ti().some,n7e=bee.aTypedArray,a7e=bee.exportTypedArrayMethod;a7e("some",function(t){return i7e(n7e(this),t,arguments.length>1?arguments[1]:void 0)})});var Pee=P(()=>{"use strict";p();var o7e=Qe(),s7e=Ou(),YR=Ue(),l7e=St(),u7e=Rb(),qee=Bt(),See=oP(),c7e=sP(),Tee=Co(),Eee=Ob(),h7e=qee.aTypedArray,d7e=qee.exportTypedArrayMethod,dy=o7e.Uint16Array,sp=dy&&s7e(dy.prototype.sort),f7e=!!sp&&!(YR(function(){sp(new dy(2),null)})&&YR(function(){sp(new dy(2),{})})),Iee=!!sp&&!YR(function(){if(Tee)return Tee<74;if(See)return See<67;if(c7e)return!0;if(Eee)return Eee<602;var e=new dy(516),t=Array(516),n,u;for(n=0;n<516;n++)u=n%4,e[n]=515-n,t[n]=n-2*u+3;for(sp(e,function(c,a){return(c/4|0)-(a/4|0)}),n=0;n<516;n++)if(e[n]!==t[n])return!0}),p7e=function(e){return function(t,n){return e!==void 0?+e(t,n)||0:n!==n?-1:t!==t?1:t===0&&n===0?1/t>0&&1/n<0?1:-1:t>n}};d7e("sort",function(t){return t!==void 0&&l7e(t),Iee?sp(this,t):u7e(h7e(this),p7e(t))},!Iee||f7e)});var Cee=P(()=>{"use strict";p();var JR=Bt(),m7e=ra(),Aee=Ro(),g7e=JR.aTypedArray,v7e=JR.getTypedArrayConstructor,y7e=JR.exportTypedArrayMethod;y7e("subarray",function(t,n){var u=g7e(this),c=u.length,a=Aee(t,c),x=v7e(u);return new x(u.buffer,u.byteOffset+a*u.BYTES_PER_ELEMENT,m7e((n===void 0?c:Aee(n,c))-a))})});var Dee=P(()=>{"use strict";p();var _7e=Qe(),x7e=cn(),Oee=Bt(),QR=Ue(),Mee=ia(),V1=_7e.Int8Array,Ree=Oee.aTypedArray,b7e=Oee.exportTypedArrayMethod,kee=[].toLocaleString,w7e=!!V1&&QR(function(){kee.call(new V1(1))}),S7e=QR(function(){return[1,2].toLocaleString()!==new V1([1,2]).toLocaleString()})||!QR(function(){V1.prototype.toLocaleString.call([1,2])});b7e("toLocaleString",function(){return x7e(kee,w7e?Mee(Ree(this)):Ree(this),Mee(arguments))},S7e)});var tO=P(()=>{"use strict";p();var T7e=cP(),eO=Bt(),E7e=eO.aTypedArray,I7e=eO.exportTypedArrayMethod,q7e=eO.getTypedArrayConstructor;I7e("toReversed",function(){return T7e(E7e(this),q7e(this))})});var rO=P(()=>{"use strict";p();var G1=Bt(),P7e=Fe(),A7e=St(),C7e=vl(),M7e=G1.aTypedArray,R7e=G1.getTypedArrayConstructor,O7e=G1.exportTypedArrayMethod,k7e=P7e(G1.TypedArrayPrototype.sort);O7e("toSorted",function(t){t!==void 0&&A7e(t);var n=M7e(this),u=C7e(R7e(n),n);return k7e(u,t)})});var zee=P(()=>{"use strict";p();var D7e=Bt().exportTypedArrayMethod,L7e=Ue(),z7e=Qe(),F7e=Fe(),Lee=z7e.Uint8Array,N7e=Lee&&Lee.prototype||{},Z1=[].toString,B7e=F7e([].join);L7e(function(){Z1.call({})})&&(Z1=function(){return B7e(this)});var j7e=N7e.toString!==Z1;D7e("toString",Z1,j7e)});var nO=P(()=>{"use strict";p();var U7e=mP(),iO=Bt(),$7e=L1(),V7e=br(),G7e=sy(),Z7e=iO.aTypedArray,W7e=iO.getTypedArrayConstructor,H7e=iO.exportTypedArrayMethod,K7e=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();H7e("with",function(e,t){var n=Z7e(this),u=V7e(e),c=$7e(n)?G7e(t):+t;return U7e(n,W7e(n),u,c)},!K7e)});var Uee=P(()=>{"use strict";p();var X7e=K(),aO=Fe(),Y7e=It(),Fee=String.fromCharCode,Nee=aO("".charAt),Bee=aO(/./.exec),jee=aO("".slice),J7e=/^[\da-f]{2}$/i,Q7e=/^[\da-f]{4}$/i;X7e({global:!0},{unescape:function(t){for(var n=Y7e(t),u="",c=n.length,a=0,x,S;a<c;){if(x=Nee(n,a++),x==="%"){if(Nee(n,a)==="u"){if(S=jee(n,a+1,a+5),Bee(Q7e,S)){u+=Fee(parseInt(S,16)),a+=5;continue}}else if(S=jee(n,a,a+2),Bee(J7e,S)){u+=Fee(parseInt(S,16)),a+=2;continue}}u+=x}return u}})});var lO=P((cBt,Hee)=>{"use strict";p();var e9e=Fe(),$ee=io(),W1=Ku().getWeakData,t9e=In(),r9e=rt(),i9e=ta(),oO=_t(),n9e=Fr(),Gee=ti(),Vee=Dt(),Zee=rr(),a9e=Zee.set,o9e=Zee.getterFor,s9e=Gee.find,l9e=Gee.findIndex,u9e=e9e([].splice),c9e=0,H1=function(e){return e.frozen||(e.frozen=new Wee)},Wee=function(){this.entries=[]},sO=function(e,t){return s9e(e.entries,function(n){return n[0]===t})};Wee.prototype={get:function(e){var t=sO(this,e);if(t)return t[1]},has:function(e){return!!sO(this,e)},set:function(e,t){var n=sO(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=l9e(this.entries,function(n){return n[0]===e});return~t&&u9e(this.entries,t,1),!!~t}};Hee.exports={getConstructor:function(e,t,n,u){var c=e(function(A,R){t9e(A,a),a9e(A,{type:t,id:c9e++,frozen:null}),i9e(R)||n9e(R,A[u],{that:A,AS_ENTRIES:n})}),a=c.prototype,x=o9e(t),S=function(A,R,D){var L=x(A),H=W1(r9e(R),!0);return H===!0?H1(L).set(R,D):H[L.id]=D,A};return $ee(a,{delete:function(A){var R=x(this);if(!oO(A))return!1;var D=W1(A);return D===!0?H1(R).delete(A):D&&Vee(D,R.id)&&delete D[R.id]},has:function(R){var D=x(this);if(!oO(R))return!1;var L=W1(R);return L===!0?H1(D).has(R):L&&Vee(L,D.id)}}),$ee(a,n?{get:function(R){var D=x(this);if(oO(R)){var L=W1(R);if(L===!0)return H1(D).get(R);if(L)return L[D.id]}},set:function(R,D){return S(this,R,D)}}:{add:function(R){return S(this,R,!0)}}),c}}});var rte=P(()=>{"use strict";p();var h9e=wl(),Kee=Qe(),J1=Fe(),Xee=io(),d9e=Ku(),f9e=kv(),Yee=lO(),K1=_t(),X1=rr().enforce,p9e=Ue(),m9e=$q(),my=Object,g9e=Array.isArray,Y1=my.isExtensible,Jee=my.isFrozen,v9e=my.isSealed,Qee=my.freeze,y9e=my.seal,_9e=!Kee.ActiveXObject&&"ActiveXObject"in Kee,fy,ete=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},tte=f9e("WeakMap",ete,Yee),lp=tte.prototype,Q1=J1(lp.set),x9e=function(){return h9e&&p9e(function(){var e=Qee([]);return Q1(new tte,e,1),!Jee(e)})};m9e&&(_9e?(fy=Yee.getConstructor(ete,"WeakMap",!0),d9e.enable(),uO=J1(lp.delete),py=J1(lp.has),cO=J1(lp.get),Xee(lp,{delete:function(e){if(K1(e)&&!Y1(e)){var t=X1(this);return t.frozen||(t.frozen=new fy),uO(this,e)||t.frozen.delete(e)}return uO(this,e)},has:function(t){if(K1(t)&&!Y1(t)){var n=X1(this);return n.frozen||(n.frozen=new fy),py(this,t)||n.frozen.has(t)}return py(this,t)},get:function(t){if(K1(t)&&!Y1(t)){var n=X1(this);return n.frozen||(n.frozen=new fy),py(this,t)?cO(this,t):n.frozen.get(t)}return cO(this,t)},set:function(t,n){if(K1(t)&&!Y1(t)){var u=X1(this);u.frozen||(u.frozen=new fy),py(this,t)?Q1(this,t,n):u.frozen.set(t,n)}else Q1(this,t,n);return this}})):x9e()&&Xee(lp,{set:function(t,n){var u;return g9e(t)&&(Jee(t)?u=Qee:v9e(t)&&(u=y9e)),Q1(this,t,n),u&&u(t),this}}));var uO,py,cO});var ew=P(()=>{"use strict";p();rte()});var ite=P(()=>{"use strict";p();var b9e=kv(),w9e=lO();b9e("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},w9e)});var nte=P(()=>{"use strict";p();ite()});var ate=P(()=>{"use strict";p();D2()});var lte=P(()=>{"use strict";p();var S9e=K(),T9e=Qe(),E9e=un(),ote=Ti(),rw=eo(),I9e=uh(),ste=ei(),tw=Si(),hO=ea(),q9e=gb(),P9e=ph(),A9e=xt(),C9e=Ue(),M9e=Yt(),up=T9e.SuppressedError,R9e=A9e("toStringTag"),iw=Error,O9e=!!up&&up.length!==3,k9e=!!up&&C9e(function(){return new up(1,2,3,{cause:4}).cause===4}),nw=O9e||k9e,Ph=function(t,n,u){var c=E9e(gy,this),a;return rw?a=nw&&(!c||ote(this)===gy)?new up:rw(new iw,c?ote(this):gy):(a=c?this:ste(gy),tw(a,R9e,"Error")),u!==void 0&&tw(a,"message",P9e(u)),q9e(a,Ph,a.stack,1),tw(a,"error",t),tw(a,"suppressed",n),a};rw?rw(Ph,iw):I9e(Ph,iw,{name:!0});var gy=Ph.prototype=nw?up.prototype:ste(iw.prototype,{constructor:hO(1,Ph),message:hO(1,""),name:hO(1,"SuppressedError")});nw&&!M9e&&(gy.constructor=Ph);S9e({global:!0,constructor:!0,arity:3,forced:nw},{SuppressedError:Ph})});var cp=P((CBt,gte)=>{"use strict";p();var fte=Qe(),pte=tv(),mte=kt(),D9e=ei(),aw=Ti(),L9e=or(),z9e=xt(),F9e=Yt(),ute="USE_FUNCTION_CONSTRUCTOR",cte=z9e("asyncIterator"),hte=fte.AsyncIterator,dte=pte.AsyncIteratorPrototype,qs,dO;if(dte)qs=dte;else if(mte(hte))qs=hte.prototype;else if(pte[ute]||fte[ute])try{dO=aw(aw(aw(Function("return async function*(){}()")()))),aw(dO)===Object.prototype&&(qs=dO)}catch(e){}qs?F9e&&(qs=D9e(qs)):qs={};mte(qs[cte])||L9e(qs,cte,function(){return this});gte.exports=qs});var vy=P((RBt,Ete)=>{"use strict";p();var vte=et(),yte=rt(),N9e=ei(),B9e=Qr(),j9e=io(),bte=rr(),U9e=Zi(),$9e=wt(),V9e=cp(),wte=ki(),fO=$9e("Promise"),Ste="AsyncFromSyncIterator",G9e=bte.set,_te=bte.getterFor(Ste),xte=function(e,t,n,u,c){var a=e.done;fO.resolve(e.value).then(function(x){t(wte(x,a))},function(x){if(!a&&c)try{U9e(u,"throw",x)}catch(S){x=S}n(x)})},Tte=function(t){t.type=Ste,G9e(this,t)};Tte.prototype=j9e(N9e(V9e),{next:function(){var t=_te(this);return new fO(function(n,u){var c=yte(vte(t.next,t.iterator));xte(c,n,u,t.iterator,!0)})},return:function(){var e=_te(this).iterator;return new fO(function(t,n){var u=B9e(e,"return");if(u===void 0)return t(wte(void 0,!0));var c=yte(vte(u,e));xte(c,t,n,e)})}});Ete.exports=Tte});var qte=P((kBt,Ite)=>{"use strict";p();var Z9e=et(),W9e=vy(),H9e=rt(),K9e=zu(),X9e=Cr(),Y9e=Qr(),J9e=xt(),Q9e=J9e("asyncIterator");Ite.exports=function(e,t){var n=arguments.length<2?Y9e(e,Q9e):t;return n?H9e(Z9e(n,e)):new W9e(X9e(K9e(e)))}});var hp=P((LBt,Pte)=>{"use strict";p();var eKe=et(),tKe=wt(),rKe=Qr();Pte.exports=function(e,t,n,u){try{var c=rKe(e,"return");if(c)return tKe("Promise").resolve(eKe(c,e)).then(function(){t(n)},function(a){u(a)})}catch(a){return u(a)}t(n)}});var Ah=P((FBt,Ate)=>{"use strict";p();var iKe=et(),nKe=St(),pO=rt(),aKe=_t(),oKe=Fu(),sKe=wt(),lKe=Cr(),mO=hp(),yy=function(e){var t=e===0,n=e===1,u=e===2,c=e===3;return function(a,x,S){pO(a);var A=x!==void 0;(A||!t)&&nKe(x);var R=lKe(a),D=sKe("Promise"),L=R.iterator,H=R.next,ce=0;return new D(function(de,ve){var X=function(oe){mO(L,ve,oe,ve)},ee=function(){try{if(A)try{oKe(ce)}catch(oe){X(oe)}D.resolve(pO(iKe(H,L))).then(function(oe){try{if(pO(oe).done)t?(S.length=ce,de(S)):de(c?!1:u||void 0);else{var Te=oe.value;try{if(A){var Ae=x(Te,ce),it=function(Ge){if(n)ee();else if(u)Ge?ee():mO(L,de,!1,ve);else if(t)try{S[ce++]=Ge,ee()}catch(nt){X(nt)}else Ge?mO(L,de,c||Te,ve):ee()};aKe(Ae)?D.resolve(Ae).then(it,X):it(Ae)}else S[ce++]=Te,ee()}catch(Ge){X(Ge)}}}catch(Ge){ve(Ge)}},ve)}catch(oe){ve(oe)}};ee()})}};Ate.exports={toArray:yy(0),forEach:yy(1),every:yy(2),some:yy(3),find:yy(4)}});var gO=P((BBt,Ote)=>{"use strict";p();var uKe=dr(),Cte=Fe(),cKe=$t(),hKe=ko(),dKe=qte(),fKe=zu(),pKe=Cr(),mKe=xs(),gKe=Qr(),vKe=wt(),yKe=dP(),_Ke=xt(),xKe=vy(),bKe=Ah().toArray,wKe=_Ke("asyncIterator"),Mte=Cte(yKe("Array","values")),SKe=Cte(Mte([]).next),TKe=function(){return new Rte(this)},Rte=function(e){this.iterator=Mte(e)};Rte.prototype.next=function(){return SKe(this.iterator)};Ote.exports=function(t){var n=this,u=arguments.length,c=u>1?arguments[1]:void 0,a=u>2?arguments[2]:void 0;return new(vKe("Promise"))(function(x){var S=cKe(t);c!==void 0&&(c=uKe(c,a));var A=gKe(S,wKe),R=A?void 0:mKe(S)||TKe,D=hKe(n)?new n:[],L=A?dKe(S,A):new xKe(pKe(fKe(S,R)));x(bKe(L,c,D))})}});var Dte=P(()=>{"use strict";p();var EKe=K(),IKe=gO(),qKe=Ue(),kte=Array.fromAsync,PKe=!kte||qKe(function(){var e=0;return kte.call(function(){return e++,[]},{length:0}),e!==1});EKe({target:"Array",stat:!0,forced:PKe},{fromAsync:IKe})});var Lte=P(()=>{"use strict";p();N2()});var zte=P(()=>{"use strict";p();var AKe=K(),CKe=ti().filterReject,MKe=Nr();AKe({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return CKe(this,t,arguments.length>1?arguments[1]:void 0)}});MKe("filterOut")});var Fte=P(()=>{"use strict";p();var RKe=K(),OKe=ti().filterReject,kKe=Nr();RKe({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return OKe(this,t,arguments.length>1?arguments[1]:void 0)}});kKe("filterReject")});var Nte=P(()=>{"use strict";p();V2()});var Bte=P(()=>{"use strict";p();G2()});var ow=P((o3t,jte)=>{"use strict";p();var DKe=dr(),LKe=Fe(),zKe=hl(),FKe=$t(),NKe=ys(),BKe=Ht(),jKe=ei(),UKe=vl(),$Ke=Array,VKe=LKe([].push);jte.exports=function(e,t,n,u){for(var c=FKe(e),a=zKe(c),x=DKe(t,n),S=jKe(null),A=BKe(a),R=0,D,L,H;A>R;R++)H=a[R],L=NKe(x(H,R,c)),L in S?VKe(S[L],H):S[L]=[H];if(u&&(D=u(c),D!==$Ke))for(L in S)S[L]=UKe(D,S[L]);return S}});var Ute=P(()=>{"use strict";p();var GKe=K(),ZKe=ow(),WKe=Nr();GKe({target:"Array",proto:!0},{group:function(t){var n=arguments.length>1?arguments[1]:void 0;return ZKe(this,t,n)}});WKe("group")});var $te=P(()=>{"use strict";p();var HKe=K(),KKe=ow(),XKe=ro(),YKe=Nr();HKe({target:"Array",proto:!0,forced:!XKe("groupBy")},{groupBy:function(t){var n=arguments.length>1?arguments[1]:void 0;return KKe(this,t,n)}});YKe("groupBy")});var vO=P((p3t,Vte)=>{"use strict";p();var JKe=dr(),QKe=Fe(),eXe=hl(),tXe=$t(),rXe=Ht(),sw=Di(),iXe=sw.Map,nXe=sw.get,aXe=sw.has,oXe=sw.set,sXe=QKe([].push);Vte.exports=function(t){for(var n=tXe(this),u=eXe(n),c=JKe(t,arguments.length>1?arguments[1]:void 0),a=new iXe,x=rXe(u),S=0,A,R;x>S;S++)R=u[S],A=c(R,S,n),aXe(a,A)?sXe(nXe(a,A),R):oXe(a,A,[R]);return a}});var Gte=P(()=>{"use strict";p();var lXe=K(),uXe=ro(),cXe=Nr(),hXe=vO(),dXe=Yt();lXe({target:"Array",proto:!0,name:"groupToMap",forced:dXe||!uXe("groupByToMap")},{groupByToMap:hXe});cXe("groupByToMap")});var Zte=P(()=>{"use strict";p();var fXe=K(),pXe=Nr(),mXe=vO(),gXe=Yt();fXe({target:"Array",proto:!0,forced:gXe},{groupToMap:mXe});pXe("groupToMap")});var Kte=P(()=>{"use strict";p();var vXe=K(),yXe=Oo(),Wte=Object.isFrozen,Hte=function(e,t){if(!Wte||!yXe(e)||!Wte(e))return!1;for(var n=0,u=e.length,c;n<u;)if(c=e[n++],!(typeof c=="string"||t&&c===void 0))return!1;return u!==0};vXe({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!Hte(t,!0))return!1;var n=t.raw;return n.length===t.length&&Hte(n,!1)}})});var Xte=P(()=>{"use strict";p();var _Xe=pt(),xXe=Nr(),bXe=$t(),wXe=Ht(),SXe=wr();_Xe&&(SXe(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=bXe(this),n=wXe(t);return n===0?0:n-1}}),xXe("lastIndex"))});var Qte=P(()=>{"use strict";p();var TXe=pt(),EXe=Nr(),Yte=$t(),Jte=Ht(),IXe=wr();TXe&&(IXe(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=Yte(this),n=Jte(t);return n===0?void 0:t[n-1]},set:function(t){var n=Yte(this),u=Jte(n);return n[u===0?0:u-1]=t}}),EXe("lastItem"))});var ere=P(()=>{"use strict";p();hP()});var tre=P(()=>{"use strict";p();fP()});var rre=P(()=>{"use strict";p();pP()});var no=P((B3t,sre)=>{"use strict";p();var ire=Fe(),qXe=Tl(),nre=Di(),PXe=nre.Map,are=nre.proto,AXe=ire(are.forEach),ore=ire(are.entries),CXe=ore(new PXe).next;sre.exports=function(e,t,n){return n?qXe({iterator:ore(e),next:CXe},function(u){return t(u[1],u[0])}):AXe(e,t)}});var lw=P((U3t,lre)=>{"use strict";p();var MXe=Fe(),RXe=St(),OXe=ta(),kXe=Ht(),DXe=$t(),yO=Di(),LXe=no(),zXe=yO.Map,FXe=yO.has,NXe=yO.set,BXe=MXe([].push);lre.exports=function(t){var n=DXe(this),u=kXe(n),c=[],a=new zXe,x=OXe(t)?function(D){return D}:RXe(t),S,A,R;for(S=0;S<u;S++)A=n[S],R=x(A),FXe(a,R)||NXe(a,R,A);return LXe(a,function(D){BXe(c,D)}),c}});var ure=P(()=>{"use strict";p();var jXe=K(),UXe=Nr(),$Xe=lw();jXe({target:"Array",proto:!0,forced:!0},{uniqueBy:$Xe});UXe("uniqueBy")});var cre=P(()=>{"use strict";p();gP()});var hre=P(()=>{"use strict";p();$P()});var dre=P(()=>{"use strict";p();nA()});var fre=P(()=>{"use strict";p();aA()});var xO=P((ajt,yre)=>{"use strict";p();var VXe=wt(),GXe=et(),ZXe=Fe(),WXe=dr(),HXe=rt(),KXe=St(),gre=ta(),_O=Qr(),vre=xt(),XXe=vre("asyncDispose"),pre=vre("dispose"),YXe=ZXe([].push),JXe=function(e,t){if(t==="async-dispose"){var n=_O(e,XXe);return n!==void 0||(n=_O(e,pre),n===void 0)?n:function(){var u=this,c=VXe("Promise");return new c(function(a){GXe(n,u),a(void 0)})}}return _O(e,pre)},mre=function(e,t,n){return arguments.length<3&&!gre(e)&&(n=KXe(JXe(HXe(e),t))),n===void 0?function(){}:WXe(n,e)};yre.exports=function(e,t,n,u){var c;if(arguments.length<4){if(gre(t)&&n==="sync-dispose")return;c=mre(t,n)}else c=mre(void 0,n,u);YXe(e.stack,c)}});var Ire=P(()=>{"use strict";p();var QXe=K(),cw=pt(),wre=wt(),_re=St(),eYe=In(),Sre=or(),tYe=io(),rYe=wr(),Tre=xt(),Ere=rr(),bO=xO(),xre=Co(),bre=wre("Promise"),iYe=wre("SuppressedError"),nYe=ReferenceError,aYe=Tre("asyncDispose"),oYe=Tre("toStringTag"),dw="AsyncDisposableStack",sYe=Ere.set,hw=Ere.getterFor(dw),wO="async-dispose",_y="disposed",lYe="pending",uw=function(e){var t=hw(e);if(t.state===_y)throw new nYe(dw+" already disposed");return t},SO=function(){sYe(eYe(this,dp),{type:dw,state:lYe,stack:[]}),cw||(this.disposed=!1)},dp=SO.prototype;tYe(dp,{disposeAsync:function(){var t=this;return new bre(function(n,u){var c=hw(t);if(c.state===_y)return n(void 0);c.state=_y,cw||(t.disposed=!0);var a=c.stack,x=a.length,S=!1,A,R=function(L){S?A=new iYe(L,A):(S=!0,A=L),D()},D=function(){if(x){var L=a[--x];a[x]=null;try{bre.resolve(L()).then(D,R)}catch(H){R(H)}}else c.stack=null,S?u(A):n(void 0)};D()})},use:function(t){return bO(uw(this),t,wO),t},adopt:function(t,n){var u=uw(this);return _re(n),bO(u,void 0,wO,function(){return n(t)}),t},defer:function(t){var n=uw(this);_re(t),bO(n,void 0,wO,t)},move:function(){var t=uw(this),n=new SO;return hw(n).stack=t.stack,t.stack=[],t.state=_y,cw||(this.disposed=!0),n}});cw&&rYe(dp,"disposed",{configurable:!0,get:function(){return hw(this).state===_y}});Sre(dp,aYe,dp.disposeAsync,{name:"disposeAsync"});Sre(dp,oYe,dw,{nonWritable:!0});var uYe=xre&&xre<136;QXe({global:!0,constructor:!0,forced:uYe},{AsyncDisposableStack:SO})});var Mre=P(()=>{"use strict";p();var cYe=K(),hYe=In(),dYe=Ti(),Pre=Si(),Are=Dt(),fYe=xt(),rc=cp(),Cre=Yt(),qre=fYe("toStringTag"),pYe=TypeError,TO=function(){if(hYe(this,rc),dYe(this)===rc)throw new pYe("Abstract class AsyncIterator not directly constructable")};TO.prototype=rc;Are(rc,qre)||Pre(rc,qre,"AsyncIterator");(Cre||!Are(rc,"constructor")||rc.constructor===Object)&&Pre(rc,"constructor",TO);cYe({global:!0,constructor:!0,forced:Cre},{AsyncIterator:TO})});var Ch=P((fjt,Nre)=>{"use strict";p();var mYe=et(),fw=Xu(),Rre=rt(),gYe=ei(),vYe=Si(),yYe=io(),_Ye=xt(),kre=rr(),xYe=wt(),bYe=Qr(),wYe=cp(),EO=ki(),Ore=Zi(),Ps=xYe("Promise"),SYe=_Ye("toStringTag"),Dre="AsyncIteratorHelper",Lre="WrapForValidAsyncIterator",TYe=kre.set,zre=function(e){var t=!e,n=kre.getterFor(e?Lre:Dre),u=function(c){var a=fw(function(){return n(c)}),x=a.error,S=a.value;return x||t&&S.done?{exit:!0,value:x?Ps.reject(S):Ps.resolve(EO(void 0,!0))}:{exit:!1,value:S}};return yYe(gYe(wYe),{next:function(){var a=u(this),x=a.value;if(a.exit)return x;var S=fw(function(){return Rre(x.nextHandler(Ps))}),A=S.error,R=S.value;return A&&(x.done=!0),A?Ps.reject(R):Ps.resolve(R)},return:function(){var c=u(this),a=c.value;if(c.exit)return a;a.done=!0;var x=a.iterator,S,A,R=fw(function(){if(a.inner)try{Ore(a.inner.iterator,"normal")}catch(D){return Ore(x,"throw",D)}return bYe(x,"return")});return S=A=R.value,R.error?Ps.reject(A):S===void 0?Ps.resolve(EO(void 0,!0)):(R=fw(function(){return mYe(S,x)}),A=R.value,R.error?Ps.reject(A):e?Ps.resolve(A):Ps.resolve(A).then(function(D){return Rre(D),EO(void 0,!0)}))}})},EYe=zre(!0),Fre=zre(!1);vYe(Fre,SYe,"Async Iterator Helper");Nre.exports=function(e,t){var n=function(c,a){a?(a.iterator=c.iterator,a.next=c.next):a=c,a.type=t?Lre:Dre,a.nextHandler=e,a.counter=0,a.done=!1,TYe(this,a)};return n.prototype=t?EYe:Fre,n}});var qO=P((mjt,jre)=>{"use strict";p();var IYe=et(),qYe=St(),IO=rt(),PYe=_t(),AYe=Cr(),CYe=Ch(),Bre=ki(),MYe=hp(),RYe=CYe(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(c,a){var x=function(A){t.done=!0,a(A)},S=function(A){MYe(n,x,A,x)};e.resolve(IO(IYe(t.next,n))).then(function(A){try{if(IO(A).done)t.done=!0,c(Bre(void 0,!0));else{var R=A.value;try{var D=u(R,t.counter++),L=function(H){c(Bre(H,!1))};PYe(D)?e.resolve(D).then(L,S):L(D)}catch(H){S(H)}}}catch(H){x(H)}},x)})});jre.exports=function(t){return IO(this),qYe(t),new RYe(AYe(this),{mapper:t})}});var PO=P((vjt,Ure)=>{"use strict";p();var OYe=et(),kYe=qO(),DYe=function(e,t){return[t,e]};Ure.exports=function(){return OYe(kYe,this,DYe)}});var $re=P(()=>{"use strict";p();var LYe=K(),zYe=PO();LYe({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:zYe})});var Wre=P(()=>{"use strict";p();var FYe=et(),NYe=or(),BYe=wt(),jYe=Qr(),UYe=Dt(),$Ye=xt(),Vre=cp(),Gre=$Ye("asyncDispose"),Zre=BYe("Promise");UYe(Vre,Gre)||NYe(Vre,Gre,function(){var e=this;return new Zre(function(t,n){var u=jYe(e,"return");u?Zre.resolve(FYe(u,e)).then(function(){t(void 0)},n):t(void 0)})})});var Kre=P(()=>{"use strict";p();var VYe=K(),GYe=et(),AO=rt(),ZYe=Cr(),WYe=Nf(),HYe=Bf(),KYe=Ch(),Hre=ki(),XYe=KYe(function(e){var t=this;return new e(function(n,u){var c=function(x){t.done=!0,u(x)},a=function(){try{e.resolve(AO(GYe(t.next,t.iterator))).then(function(x){try{AO(x).done?(t.done=!0,n(Hre(void 0,!0))):t.remaining?(t.remaining--,a()):n(Hre(x.value,!1))}catch(S){c(S)}},c)}catch(x){c(x)}};a()})});VYe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){AO(this);var n=HYe(WYe(+t));return new XYe(ZYe(this),{remaining:n})}})});var Xre=P(()=>{"use strict";p();var YYe=K(),JYe=Ah().every;YYe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return JYe(this,t)}})});var Jre=P(()=>{"use strict";p();var QYe=K(),eJe=et(),tJe=St(),CO=rt(),rJe=_t(),iJe=Cr(),nJe=Ch(),Yre=ki(),aJe=hp(),oJe=nJe(function(e){var t=this,n=t.iterator,u=t.predicate;return new e(function(c,a){var x=function(R){t.done=!0,a(R)},S=function(R){aJe(n,x,R,x)},A=function(){try{e.resolve(CO(eJe(t.next,n))).then(function(R){try{if(CO(R).done)t.done=!0,c(Yre(void 0,!0));else{var D=R.value;try{var L=u(D,t.counter++),H=function(ce){ce?c(Yre(D,!1)):A()};rJe(L)?e.resolve(L).then(H,S):H(L)}catch(ce){S(ce)}}}catch(ce){x(ce)}},x)}catch(R){x(R)}};A()})});QYe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return CO(this),tJe(t),new oJe(iJe(this),{predicate:t})}})});var Qre=P(()=>{"use strict";p();var sJe=K(),lJe=Ah().find;sJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return lJe(this,t)}})});var MO=P((zjt,rie)=>{"use strict";p();var uJe=et(),cJe=kt(),eie=rt(),tie=Cr(),hJe=xs(),dJe=Qr(),fJe=xt(),pJe=vy(),mJe=fJe("asyncIterator");rie.exports=function(e){var t=eie(e),n=!0,u=dJe(t,mJe),c;return cJe(u)||(u=hJe(t),n=!1),u!==void 0?c=uJe(u,t):(c=t,n=!0),eie(c),tie(n?c:new pJe(tie(c)))}});var aie=P(()=>{"use strict";p();var gJe=K(),iie=et(),vJe=St(),xy=rt(),yJe=_t(),_Je=Cr(),xJe=Ch(),nie=ki(),bJe=MO(),wJe=hp(),SJe=xJe(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(c,a){var x=function(D){t.done=!0,a(D)},S=function(D){wJe(n,x,D,x)},A=function(){try{e.resolve(xy(iie(t.next,n))).then(function(D){try{if(xy(D).done)t.done=!0,c(nie(void 0,!0));else{var L=D.value;try{var H=u(L,t.counter++),ce=function(de){try{t.inner=bJe(de),R()}catch(ve){S(ve)}};yJe(H)?e.resolve(H).then(ce,S):ce(H)}catch(de){S(de)}}}catch(de){x(de)}},x)}catch(D){x(D)}},R=function(){var D=t.inner;if(D)try{e.resolve(xy(iie(D.next,D.iterator))).then(function(L){try{xy(L).done?(t.inner=null,A()):c(nie(L.value,!1))}catch(H){S(H)}},S)}catch(L){S(L)}else A()};R()})});gJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return xy(this),vJe(t),new SJe(_Je(this),{mapper:t,inner:null})}})});var oie=P(()=>{"use strict";p();var TJe=K(),EJe=Ah().forEach;TJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return EJe(this,t)}})});var RO=P((Gjt,sie)=>{"use strict";p();var IJe=et(),qJe=Ch();sie.exports=qJe(function(){return IJe(this.next,this.iterator)},!0)});var lie=P(()=>{"use strict";p();var PJe=K(),AJe=$t(),CJe=un(),MJe=MO(),RJe=cp(),OJe=RO();PJe({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var n=MJe(typeof t=="string"?AJe(t):t);return CJe(RJe,n.iterator)?n.iterator:new OJe(n)}})});var uie=P(()=>{"use strict";p();var kJe=K(),DJe=PO();kJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:DJe})});var cie=P(()=>{"use strict";p();var LJe=K(),zJe=qO();LJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:zJe})});var hie=P(()=>{"use strict";p();var FJe=K(),NJe=et(),BJe=St(),OO=rt(),jJe=_t(),UJe=wt(),$Je=Cr(),VJe=hp(),kO=UJe("Promise"),GJe=TypeError;FJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){OO(this),BJe(t);var n=$Je(this),u=n.iterator,c=n.next,a=arguments.length<2,x=a?void 0:arguments[1],S=0;return new kO(function(A,R){var D=function(H){VJe(u,R,H,R)},L=function(){try{kO.resolve(OO(NJe(c,u))).then(function(H){try{if(OO(H).done)a?R(new GJe("Reduce of empty iterator with no initial value")):A(x);else{var ce=H.value;if(a)a=!1,x=ce,L();else try{var de=t(x,ce,S),ve=function(X){x=X,L()};jJe(de)?kO.resolve(de).then(ve,D):ve(de)}catch(X){D(X)}}S++}catch(X){R(X)}},R)}catch(H){R(H)}};L()})}})});var die=P(()=>{"use strict";p();var ZJe=K(),WJe=Ah().some;ZJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return WJe(this,t)}})});var mie=P(()=>{"use strict";p();var HJe=K(),fie=et(),pie=rt(),KJe=Cr(),XJe=Nf(),YJe=Bf(),JJe=Ch(),DO=ki(),QJe=JJe(function(e){var t=this,n=t.iterator,u;if(!t.remaining--){var c=DO(void 0,!0);return t.done=!0,u=n.return,u!==void 0?e.resolve(fie(u,n,void 0)).then(function(){return c}):c}return e.resolve(fie(t.next,n)).then(function(a){return pie(a).done?(t.done=!0,DO(void 0,!0)):DO(a.value,!1)}).then(null,function(a){throw t.done=!0,a})});HJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){pie(this);var n=YJe(XJe(+t));return new QJe(KJe(this),{remaining:n})}})});var gie=P(()=>{"use strict";p();var eQe=K(),tQe=Ah().toArray;eQe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return tQe(this,void 0,[])}})});var mw=P((p4t,wie)=>{"use strict";p();var yie=rr(),rQe=Bu(),LO=ki(),iQe=ta(),nQe=_t(),aQe=wr(),_ie=pt(),by="Incorrect Iterator.range arguments",FO="NumericRangeIterator",oQe=yie.set,xie=yie.getterFor(FO),vie=RangeError,zO=TypeError,bie=rQe(function(t,n,u,c,a,x){if(typeof t!=c||n!==1/0&&n!==-1/0&&typeof n!=c)throw new zO(by);if(t===1/0||t===-1/0)throw new vie(by);var S=n>t,A=!1,R;if(u===void 0)R=void 0;else if(nQe(u))R=u.step,A=!!u.inclusive;else if(typeof u==c)R=u;else throw new zO(by);if(iQe(R)&&(R=S?x:-x),typeof R!=c)throw new zO(by);if(R===1/0||R===-1/0||R===a&&t!==n)throw new vie(by);var D=t!==t||n!==n||R!==R||n>t!=R>a;oQe(this,{type:FO,start:t,end:n,step:R,inclusive:A,hitsEnd:D,currentCount:a,zero:a}),_ie||(this.start=t,this.end=n,this.step=R,this.inclusive=A)},FO,function(){var t=xie(this);if(t.hitsEnd)return LO(void 0,!0);var n=t.start,u=t.end,c=t.step,a=n+c*t.currentCount++;a===u&&(t.hitsEnd=!0);var x=t.inclusive,S;return u>n?S=x?a>u:a>=u:S=x?u>a:u>=a,S?(t.hitsEnd=!0,LO(void 0,!0)):LO(a,!1)}),pw=function(e){aQe(bie.prototype,e,{get:function(){return xie(this)[e]},set:function(){},configurable:!0,enumerable:!1})};_ie&&(pw("start"),pw("end"),pw("inclusive"),pw("step"));wie.exports=bie});var Sie=P(()=>{"use strict";p();var sQe=K(),lQe=mw();typeof BigInt=="function"&&sQe({target:"BigInt",stat:!0,forced:!0},{range:function(t,n,u){return new lQe(t,n,u,"bigint",BigInt(0),BigInt(1))}})});var NO=P((_4t,qie)=>{"use strict";p();t1();ew();var Iie=wt(),uQe=ei(),Tie=_t(),cQe=Object,hQe=TypeError,dQe=Iie("Map"),fQe=Iie("WeakMap"),gw=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=uQe(null)};gw.prototype.get=function(e,t){return this[e]||(this[e]=t())};gw.prototype.next=function(e,t,n){var u=n?this.objectsByIndex[e]||(this.objectsByIndex[e]=new fQe):this.primitives||(this.primitives=new dQe),c=u.get(t);return c||u.set(t,c=new gw),c};var Eie=new gw;qie.exports=function(){var e=Eie,t=arguments.length,n,u;for(n=0;n<t;n++)Tie(u=arguments[n])&&(e=e.next(n,u,!0));if(this===cQe&&e===Eie)throw new hQe("Composite keys must contain a non-primitive component");for(n=0;n<t;n++)Tie(u=arguments[n])||(e=e.next(n,u,!1));return e}});var Aie=P(()=>{"use strict";p();var pQe=K(),mQe=cn(),gQe=NO(),vQe=wt(),Pie=ei(),yQe=Object,_Qe=function(){var e=vQe("Object","freeze");return e?e(Pie(null)):Pie(null)};pQe({global:!0,forced:!0},{compositeKey:function(){return mQe(gQe,yQe,arguments).get("object",_Qe)}})});var Mie=P(()=>{"use strict";p();var xQe=K(),bQe=NO(),Cie=wt(),wQe=cn();xQe({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?Cie("Symbol").for(arguments[0]):wQe(bQe,null,arguments).get("symbol",Cie("Symbol"))}})});var Rie=P(()=>{"use strict";p();LP()});var Oie=P(()=>{"use strict";p();var SQe=K(),TQe=Fe(),EQe=TQe(DataView.prototype.getUint8);SQe({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return EQe(this,t)}})});var kie=P(()=>{"use strict";p();BP()});var Die=P(()=>{"use strict";p();var IQe=K(),qQe=Fe(),PQe=zP(),AQe=Rf(),CQe=AR(),MQe=qQe(DataView.prototype.setUint8);IQe({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,n){PQe(this);var u=AQe(t);return MQe(this,u,CQe(n))}})});var Bie=P(()=>{"use strict";p();var RQe=K(),yw=pt(),OQe=wt(),Lie=St(),kQe=In(),zie=or(),DQe=io(),LQe=wr(),Fie=xt(),Nie=rr(),BO=xO(),zQe=OQe("SuppressedError"),FQe=ReferenceError,NQe=Fie("dispose"),BQe=Fie("toStringTag"),xw="DisposableStack",jQe=Nie.set,_w=Nie.getterFor(xw),jO="sync-dispose",wy="disposed",UQe="pending",vw=function(e){var t=_w(e);if(t.state===wy)throw new FQe(xw+" already disposed");return t},UO=function(){jQe(kQe(this,fp),{type:xw,state:UQe,stack:[]}),yw||(this.disposed=!1)},fp=UO.prototype;DQe(fp,{dispose:function(){var t=_w(this);if(t.state!==wy){t.state=wy,yw||(this.disposed=!0);for(var n=t.stack,u=n.length,c=!1,a;u;){var x=n[--u];n[u]=null;try{x()}catch(S){c?a=new zQe(S,a):(c=!0,a=S)}}if(t.stack=null,c)throw a}},use:function(t){return BO(vw(this),t,jO),t},adopt:function(t,n){var u=vw(this);return Lie(n),BO(u,void 0,jO,function(){n(t)}),t},defer:function(t){var n=vw(this);Lie(t),BO(n,void 0,jO,t)},move:function(){var t=vw(this),n=new UO;return _w(n).stack=t.stack,t.stack=[],t.state=wy,yw||(this.disposed=!0),n}});yw&&LQe(fp,"disposed",{configurable:!0,get:function(){return _w(this).state===wy}});zie(fp,NQe,fp.dispose,{name:"dispose"});zie(fp,BQe,xw,{nonWritable:!0});RQe({global:!0,constructor:!0},{DisposableStack:UO})});var Vie=P(()=>{"use strict";p();var $Qe=K(),Uie=wt(),VQe=_t(),GQe=Fn(),ZQe=Ue(),$ie="Error",VO="DOMException",WQe=Object.setPrototypeOf||{}.__proto__,jie=Uie(VO),$O=Error,bw=$O.isError,HQe=!bw||!WQe||ZQe(function(){return jie&&!bw(new jie(VO))||!bw(new $O($ie,{cause:function(){}}))||bw(Uie("Object","create")($O.prototype))});$Qe({target:"Error",stat:!0,sham:!0,forced:HQe},{isError:function(t){if(!VQe(t))return!1;var n=GQe(t);return n===$ie||n===VO}})});var GO=P((G4t,Gie)=>{"use strict";p();var KQe=Fe(),XQe=St();Gie.exports=function(){return KQe(XQe(this))}});var Zie=P(()=>{"use strict";p();var YQe=K(),JQe=GO();YQe({target:"Function",proto:!0,forced:!0},{demethodize:JQe})});var Hie=P(()=>{"use strict";p();var QQe=K(),eet=Fe(),tet=kt(),ret=nv(),iet=Dt(),net=pt(),aet=Object.getOwnPropertyDescriptor,Wie=/^\s*class\b/,oet=eet(Wie.exec),set=function(e){try{if(!net||!oet(Wie,ret(e)))return!1}catch(n){}var t=aet(e,"prototype");return!!t&&iet(t,"writable")&&!t.writable};QQe({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return tet(t)&&!set(t)}})});var Kie=P(()=>{"use strict";p();var uet=K(),cet=ko();uet({target:"Function",stat:!0,forced:!0},{isConstructor:cet})});var Jie=P(()=>{"use strict";p();var het=xt(),det=gr().f,Xie=het("metadata"),Yie=Function.prototype;Yie[Xie]===void 0&&det(Yie,Xie,{value:null})});var Qie=P(()=>{"use strict";p();var fet=K(),pet=GO();fet({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:pet})});var ene=P(()=>{"use strict";p();dA()});var tne=P(()=>{"use strict";p();vA()});var ZO=P((p5t,rne)=>{"use strict";p();Xb();var met=et(),get=Nu().IteratorPrototype.map,vet=function(e,t){return[t,e]};rne.exports=function(){return met(get,this,vet)}});var ine=P(()=>{"use strict";p();var yet=K(),_et=ZO();yet({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:_et})});var one=P(()=>{"use strict";p();var xet=K(),nne=et(),bet=St(),ane=rt(),wet=xs(),Tet=Hu(),Eet=ki(),Iet=Array,qet=Tet(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,n=this.iterables;if(t>=n.length)return this.done=!0,Eet(void 0,!0);var u=n[t];this.iterables[t]=null,e=this.iterator=nne(u.method,u.iterable),this.next=e.next}var c=ane(nne(this.next,e));if(c.done){this.iterator=null,this.next=null;continue}return c}},!1,!0);xet({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,n=Iet(t),u=0;u<t;u++){var c=ane(arguments[u]);n[u]={iterable:c,method:bet(wet(c))}}return new qet({iterables:n,nextIterableIndex:0,iterator:null,next:null})}})});var une=P(()=>{"use strict";p();var Pet=et(),Aet=or(),Cet=Qr(),Met=Dt(),Ret=xt(),sne=Nu().IteratorPrototype,lne=Ret("dispose");Met(sne,lne)||Aet(sne,lne,function(){var e=Cet(this,"return");e&&Pet(e,this)})});var cne=P(()=>{"use strict";p();wA()});var hne=P(()=>{"use strict";p();TA()});var dne=P(()=>{"use strict";p();IA()});var fne=P(()=>{"use strict";p();PA()});var pne=P(()=>{"use strict";p();kA()});var mne=P(()=>{"use strict";p();LA()});var gne=P(()=>{"use strict";p();zA()});var vne=P(()=>{"use strict";p();var Oet=K(),ket=ZO();Oet({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:ket})});var yne=P(()=>{"use strict";p();Xb()});var xne=P(()=>{"use strict";p();var Det=K(),_ne=mw(),Let=TypeError;Det({target:"Iterator",stat:!0,forced:!0},{range:function(t,n,u){if(typeof t=="number")return new _ne(t,n,u,"number",0,1);if(typeof t=="bigint")return new _ne(t,n,u,"bigint",BigInt(0),BigInt(1));throw new Let("Incorrect Iterator.range arguments")}})});var bne=P(()=>{"use strict";p();BA()});var wne=P(()=>{"use strict";p();UA()});var Sne=P(()=>{"use strict";p();VA()});var Tne=P(()=>{"use strict";p();GA()});var Ine=P(()=>{"use strict";p();var zet=K(),Fet=rt(),Net=vy(),Bet=RO(),Ene=Cr();zet({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new Bet(Ene(new Net(Ene(Fet(this)))))}})});var WO=P((gUt,qne)=>{"use strict";p();var jet=Ue();qne.exports=!jet(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var HO=P((yUt,Pne)=>{"use strict";p();var Uet=_t(),$et=rr().get;Pne.exports=function(t){if(!Uet(t))return!1;var n=$et(t);return!!n&&n.type==="RawJSON"}});var Ane=P(()=>{"use strict";p();var Vet=K(),Get=WO(),Zet=HO();Vet({target:"JSON",stat:!0,forced:!Get},{isRawJSON:Zet})});var XO=P((SUt,One)=>{"use strict";p();var KO=Fe(),Wet=Dt(),ww=SyntaxError,Het=parseInt,Ket=String.fromCharCode,Xet=KO("".charAt),Cne=KO("".slice),Mne=KO(/./.exec),Rne={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},Yet=/^[\da-f]{4}$/i,Jet=/^[\u0000-\u001F]$/;One.exports=function(e,t){for(var n=!0,u="";t<e.length;){var c=Xet(e,t);if(c==="\\"){var a=Cne(e,t,t+2);if(Wet(Rne,a))u+=Rne[a],t+=2;else if(a==="\\u"){t+=2;var x=Cne(e,t,t+4);if(!Mne(Yet,x))throw new ww("Bad Unicode escape at: "+t);u+=Ket(Het(x,16)),t+=4}else throw new ww("Unknown escape sequence: \""+a+"\"")}else if(c==="\""){n=!1,t++;break}else{if(Mne(Jet,c))throw new ww("Bad control character in string literal at: "+t);u+=c,t++}}if(n)throw new ww("Unterminated string at: "+t);return{value:u,end:t}}});var jne=P(()=>{"use strict";p();var Qet=K(),ett=pt(),nk=Qe(),ttt=wt(),Sw=Fe(),rtt=et(),Nne=kt(),itt=_t(),ntt=Oo(),att=Dt(),ott=It(),kne=Ht(),tk=to(),Bne=Ue(),stt=XO(),ltt=Au(),Dne=nk.JSON,utt=nk.Number,pp=nk.SyntaxError,ak=Dne&&Dne.parse,ctt=ttt("Object","keys"),htt=Object.getOwnPropertyDescriptor,dn=Sw("".charAt),YO=Sw("".slice),JO=Sw(/./.exec),Lne=Sw([].push),QO=/^\d$/,dtt=/^[1-9]$/,ftt=/^[\d-]$/,Sy=/^[\t\n\r ]$/,ek=0,zne=1,ptt=function(e,t){e=ott(e);var n=new ik(e,0,""),u=n.parse(),c=u.value,a=n.skip(Sy,u.end);if(a<e.length)throw new pp("Unexpected extra character: \""+dn(e,a)+"\" after the parsed data at: "+a);return Nne(t)?rk({"":c},"",t,u):c},rk=function(e,t,n,u){var c=e[t],a=u&&c===u.value,x=a&&typeof u.source=="string"?{source:u.source}:{},S,A,R,D,L;if(itt(c)){var H=ntt(c),ce=a?u.nodes:H?[]:{};if(H)for(S=ce.length,R=kne(c),D=0;D<R;D++)Fne(c,D,rk(c,""+D,n,D<S?ce[D]:void 0));else for(A=ctt(c),R=kne(A),D=0;D<R;D++)L=A[D],Fne(c,L,rk(c,L,n,att(ce,L)?ce[L]:void 0))}return rtt(n,e,t,c,x)},Fne=function(e,t,n){if(ett){var u=htt(e,t);if(u&&!u.configurable)return}n===void 0?delete e[t]:tk(e,t,n)},mtt=function(e,t,n,u){this.value=e,this.end=t,this.source=n,this.nodes=u},ik=function(e,t){this.source=e,this.index=t};ik.prototype={fork:function(e){return new ik(this.source,e)},parse:function(){var e=this.source,t=this.skip(Sy,this.index),n=this.fork(t),u=dn(e,t);if(JO(ftt,u))return n.number();switch(u){case"{":return n.object();case"[":return n.array();case"\"":return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw new pp("Unexpected character: \""+u+"\" at: "+t)},node:function(e,t,n,u,c){return new mtt(t,u,e?null:YO(this.source,n,u),c)},object:function(){for(var e=this.source,t=this.index+1,n=!1,u={},c={};t<e.length;){if(t=this.until(["\"","}"],t),dn(e,t)==="}"&&!n){t++;break}var a=this.fork(t).string(),x=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(Sy,t),a=this.fork(t).parse(),tk(c,x,a),tk(u,x,a.value),t=this.until([",","}"],a.end);var S=dn(e,t);if(S===",")n=!0,t++;else if(S==="}"){t++;break}}return this.node(zne,u,this.index,t,c)},array:function(){for(var e=this.source,t=this.index+1,n=!1,u=[],c=[];t<e.length;){if(t=this.skip(Sy,t),dn(e,t)==="]"&&!n){t++;break}var a=this.fork(t).parse();if(Lne(c,a),Lne(u,a.value),t=this.until([",","]"],a.end),dn(e,t)===",")n=!0,t++;else if(dn(e,t)==="]"){t++;break}}return this.node(zne,u,this.index,t,c)},string:function(){var e=this.index,t=stt(this.source,this.index+1);return this.node(ek,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if(dn(e,n)==="-"&&n++,dn(e,n)==="0")n++;else if(JO(dtt,dn(e,n)))n=this.skip(QO,n+1);else throw new pp("Failed to parse number at: "+n);if(dn(e,n)==="."&&(n=this.skip(QO,n+1)),dn(e,n)==="e"||dn(e,n)==="E"){n++,(dn(e,n)==="+"||dn(e,n)==="-")&&n++;var u=n;if(n=this.skip(QO,n),u===n)throw new pp("Failed to parse number's exponent value at: "+n)}return this.node(ek,utt(YO(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,u=n+t.length;if(YO(this.source,n,u)!==t)throw new pp("Failed to parse value at: "+n);return this.node(ek,e,n,u)},skip:function(e,t){for(var n=this.source;t<n.length&&JO(e,dn(n,t));t++);return t},until:function(e,t){t=this.skip(Sy,t);for(var n=dn(this.source,t),u=0;u<e.length;u++)if(e[u]===n)return t;throw new pp("Unexpected character: \""+n+"\" at: "+t)}};var gtt=Bne(function(){var e="9007199254740993",t;return ak(e,function(n,u,c){t=c.source}),t!==e}),vtt=ltt&&!Bne(function(){return 1/ak("-0 \t")!==-1/0});Qet({target:"JSON",stat:!0,forced:gtt},{parse:function(t,n){return vtt&&!Nne(n)?ak(t):ptt(t,n)}})});var Kne=P(()=>{"use strict";p();var Wne=K(),ytt=wl(),Hne=WO(),Tw=wt(),_tt=et(),uk=Fe(),xtt=kt(),btt=HO(),wtt=It(),Stt=to(),Ttt=XO(),Ett=_2(),Itt=Mu(),qtt=rr().set,Ptt=String,Une=SyntaxError,Att=Tw("JSON","parse"),$ne=Tw("JSON","stringify"),Ctt=Tw("Object","create"),Mtt=Tw("Object","freeze"),sk=uk("".charAt),ok=uk("".slice),Rtt=uk([].push),lk=Itt(),Vne=lk.length,Gne="Unacceptable as raw JSON",Zne=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};Wne({target:"JSON",stat:!0,forced:!Hne},{rawJSON:function(t){var n=wtt(t);if(n===""||Zne(sk(n,0))||Zne(sk(n,n.length-1)))throw new Une(Gne);var u=Att(n);if(typeof u=="object"&&u!==null)throw new Une(Gne);var c=Ctt(null);return qtt(c,{type:"RawJSON"}),Stt(c,"rawJSON",n),ytt?Mtt(c):c}});$ne&&Wne({target:"JSON",stat:!0,arity:3,forced:!Hne},{stringify:function(t,n,u){var c=Ett(n),a=[],x=$ne(t,function(ce,de){var ve=xtt(c)?_tt(c,this,Ptt(ce),de):de;return btt(ve)?lk+(Rtt(a,ve.rawJSON)-1):ve},u);if(typeof x!="string")return x;for(var S="",A=x.length,R=0;R<A;R++){var D=sk(x,R);if(D==="\""){var L=Ttt(x,++R).end-1,H=ok(x,R,L);S+=ok(H,0,Vne)===lk?a[ok(H,Vne)]:"\""+H+"\"",R=L}else S+=D}return S}})});var fn=P((MUt,Xne)=>{"use strict";p();var Ott=Di().has;Xne.exports=function(e){return Ott(e),e}});var Yne=P(()=>{"use strict";p();var ktt=K(),Dtt=fn(),Ltt=Di().remove;ktt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Dtt(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=Ltt(t,arguments[c]),n=n&&u;return!!n}})});var Qne=P(()=>{"use strict";p();var ztt=K(),Ftt=fn(),ck=Di(),Ntt=ck.get,Btt=ck.has,Jne=ck.set;ztt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=Ftt(this),c,a;return Btt(u,t)?(c=Ntt(u,t),"update"in n&&(c=n.update(c,t,u),Jne(u,t,c)),c):(a=n.insert(t,u),Jne(u,t,a),a)}})});var eae=P(()=>{"use strict";p();var jtt=K(),Utt=dr(),$tt=fn(),Vtt=no();jtt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var n=$tt(this),u=Utt(t,arguments.length>1?arguments[1]:void 0);return Vtt(n,function(c,a){if(!u(c,a,n))return!1},!0)!==!1}})});var rae=P(()=>{"use strict";p();var Gtt=K(),Ztt=dr(),Wtt=fn(),tae=Di(),Htt=no(),Ktt=tae.Map,Xtt=tae.set;Gtt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var n=Wtt(this),u=Ztt(t,arguments.length>1?arguments[1]:void 0),c=new Ktt;return Htt(n,function(a,x){u(a,x,n)&&Xtt(c,x,a)}),c}})});var iae=P(()=>{"use strict";p();var Ytt=K(),Jtt=dr(),Qtt=fn(),ert=no();Ytt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var n=Qtt(this),u=Jtt(t,arguments.length>1?arguments[1]:void 0),c=ert(n,function(a,x){if(u(a,x,n))return{value:a}},!0);return c&&c.value}})});var nae=P(()=>{"use strict";p();var trt=K(),rrt=dr(),irt=fn(),nrt=no();trt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var n=irt(this),u=rrt(t,arguments.length>1?arguments[1]:void 0),c=nrt(n,function(a,x){if(u(a,x,n))return{key:x}},!0);return c&&c.key}})});var Ty=P((YUt,aae)=>{"use strict";p();var art=dr(),ort=rt(),srt=$t(),lrt=Fr();aae.exports=function(e,t,n){return function(c){var a=srt(c),x=arguments.length,S=x>1?arguments[1]:void 0,A=S!==void 0,R=A?art(S,x>2?arguments[2]:void 0):void 0,D=new e,L=0;return lrt(a,function(H){var ce=A?R(H,L++):H;n?t(D,ort(ce)[0],ce[1]):t(D,ce)}),D}}});var sae=P(()=>{"use strict";p();var urt=K(),oae=Di(),crt=Ty();urt({target:"Map",stat:!0,forced:!0},{from:crt(oae.Map,oae.set,!0)})});var lae=P(()=>{"use strict";p();var hrt=K(),drt=fn(),hk=Di(),frt=hk.get,prt=hk.has,mrt=hk.set;hrt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,n){return prt(drt(this),t)?frt(this,t):(mrt(this,t,n),n)}})});var uae=P(()=>{"use strict";p();var grt=K(),vrt=St(),yrt=fn(),dk=Di(),_rt=dk.get,xrt=dk.has,brt=dk.set;grt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,n){if(yrt(this),vrt(n),xrt(this,t))return _rt(this,t);t===0&&1/t===-1/0&&(t=0);var u=n(t);return brt(this,t,u),u}})});var cae=P(()=>{"use strict";p();QA()});var dae=P((h6t,hae)=>{"use strict";p();hae.exports=function(e,t){return e===t||e!==e&&t!==t}});var fae=P(()=>{"use strict";p();var wrt=K(),Srt=dae(),Trt=fn(),Ert=no();wrt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return Ert(Trt(this),function(n){if(Srt(n,t))return!0},!0)===!0}})});var mae=P(()=>{"use strict";p();var Irt=K(),qrt=et(),Prt=Fr(),Art=kt(),pae=St(),Crt=Di().Map;Irt({target:"Map",stat:!0,forced:!0},{keyBy:function(t,n){var u=Art(this)?this:Crt,c=new u;pae(n);var a=pae(c.set);return Prt(t,function(x){qrt(a,c,n(x),x)}),c}})});var gae=P(()=>{"use strict";p();var Mrt=K(),Rrt=fn(),Ort=no();Mrt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var n=Ort(Rrt(this),function(u,c){if(u===t)return{key:c}},!0);return n&&n.key}})});var yae=P(()=>{"use strict";p();var krt=K(),Drt=dr(),Lrt=fn(),vae=Di(),zrt=no(),Frt=vae.Map,Nrt=vae.set;krt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var n=Lrt(this),u=Drt(t,arguments.length>1?arguments[1]:void 0),c=new Frt;return zrt(n,function(a,x){Nrt(c,u(a,x,n),a)}),c}})});var xae=P(()=>{"use strict";p();var Brt=K(),jrt=dr(),Urt=fn(),_ae=Di(),$rt=no(),Vrt=_ae.Map,Grt=_ae.set;Brt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var n=Urt(this),u=jrt(t,arguments.length>1?arguments[1]:void 0),c=new Vrt;return $rt(n,function(a,x){Grt(c,x,u(a,x,n))}),c}})});var bae=P(()=>{"use strict";p();var Zrt=K(),Wrt=fn(),Hrt=Fr(),Krt=Di().set;Zrt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var n=Wrt(this),u=arguments.length,c=0;c<u;)Hrt(arguments[c++],function(a,x){Krt(n,a,x)},{AS_ENTRIES:!0});return n}})});var Ey=P((M6t,wae)=>{"use strict";p();var Xrt=rt();wae.exports=function(e,t,n){return function(){for(var c=new e,a=arguments.length,x=0;x<a;x++){var S=arguments[x];n?t(c,Xrt(S)[0],S[1]):t(c,S)}return c}}});var Tae=P(()=>{"use strict";p();var Yrt=K(),Sae=Di(),Jrt=Ey();Yrt({target:"Map",stat:!0,forced:!0},{of:Jrt(Sae.Map,Sae.set,!0)})});var Eae=P(()=>{"use strict";p();var Qrt=K(),eit=St(),tit=fn(),rit=no(),iit=TypeError;Qrt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=tit(this),u=arguments.length<2,c=u?void 0:arguments[1];if(eit(t),rit(n,function(a,x){u?(u=!1,c=a):c=t(c,a,x,n)}),u)throw new iit("Reduce of empty map with no initial value");return c}})});var Iae=P(()=>{"use strict";p();var nit=K(),ait=dr(),oit=fn(),sit=no();nit({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var n=oit(this),u=ait(t,arguments.length>1?arguments[1]:void 0);return sit(n,function(c,a){if(u(c,a,n))return!0},!0)===!0}})});var Pae=P(()=>{"use strict";p();var lit=K(),qae=St(),uit=fn(),fk=Di(),cit=TypeError,hit=fk.get,dit=fk.has,fit=fk.set;lit({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,n){var u=uit(this),c=arguments.length;qae(n);var a=dit(u,t);if(!a&&c<3)throw new cit("Updating absent value");var x=a?hit(u,t):qae(c>2?arguments[2]:void 0)(t,u);return fit(u,t,n(x,t,u)),u}})});var qw=P((G6t,Aae)=>{"use strict";p();var Ew=et(),pk=St(),Iw=kt(),pit=rt(),mit=TypeError;Aae.exports=function(t,n){var u=pit(this),c=pk(u.get),a=pk(u.has),x=pk(u.set),S=arguments.length>2?arguments[2]:void 0,A;if(!Iw(n)&&!Iw(S))throw new mit("At least one callback required");return Ew(a,u,t)?(A=Ew(c,u,t),Iw(n)&&(A=n(A),Ew(x,u,t,A))):Iw(S)&&(A=S(),Ew(x,u,t,A)),A}});var Cae=P(()=>{"use strict";p();var git=K(),vit=qw();git({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:vit})});var Mae=P(()=>{"use strict";p();var yit=K(),_it=qw();yit({target:"Map",proto:!0,real:!0,forced:!0},{upsert:_it})});var Oae=P((Q6t,Rae)=>{"use strict";p();var xit=TypeError;Rae.exports=function(e){if(typeof e=="number")return e;throw new xit("Argument is not a number")}});var Lae=P(()=>{"use strict";p();var bit=K(),mk=Oae(),kae=Nf(),Dae=u1(),wit=RangeError,Sit=Math.min,Tit=Math.max;bit({target:"Math",stat:!0,forced:!0},{clamp:function(t,n,u){if(mk(t),kae(mk(n)),kae(mk(u)),Dae(n,0)&&Dae(u,-0)||n>u)throw new wit("`min` should be smaller than `max`");return Sit(u,Tit(n,t))}})});var zae=P(()=>{"use strict";p();var Eit=K();Eit({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var Fae=P(()=>{"use strict";p();var Iit=K(),qit=180/Math.PI;Iit({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*qit}})});var gk=P((c$t,Nae)=>{"use strict";p();Nae.exports=function(t,n,u,c,a){var x=+t,S=+n,A=+u,R=+c,D=+a;return x!==x||S!==S||A!==A||R!==R||D!==D?NaN:x===1/0||x===-1/0?x:(x-S)*(D-R)/(A-S)+R}});var Bae=P(()=>{"use strict";p();var Pit=K(),Ait=gk(),Cit=Db();Pit({target:"Math",stat:!0,forced:!0},{fscale:function(t,n,u,c,a){return Cit(Ait(t,n,u,c,a))}})});var jae=P(()=>{"use strict";p();iC()});var Uae=P(()=>{"use strict";p();var Mit=K();Mit({target:"Math",stat:!0,forced:!0},{iaddh:function(t,n,u,c){var a=t>>>0,x=n>>>0,S=u>>>0;return x+(c>>>0)+((a&S|(a|S)&~(a+S>>>0))>>>31)|0}})});var $ae=P(()=>{"use strict";p();var Rit=K();Rit({target:"Math",stat:!0,forced:!0},{imulh:function(t,n){var u=65535,c=+t,a=+n,x=c&u,S=a&u,A=c>>16,R=a>>16,D=(A*S>>>0)+(x*S>>>16);return A*R+(D>>16)+((x*R>>>0)+(D&u)>>16)}})});var Vae=P(()=>{"use strict";p();var Oit=K();Oit({target:"Math",stat:!0,forced:!0},{isubh:function(t,n,u,c){var a=t>>>0,x=n>>>0,S=u>>>0;return x-(c>>>0)-((~a&S|~(a^S)&a-S>>>0)>>>31)|0}})});var Gae=P(()=>{"use strict";p();var kit=K();kit({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var Zae=P(()=>{"use strict";p();var Dit=K(),Lit=Math.PI/180;Dit({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*Lit}})});var Wae=P(()=>{"use strict";p();var zit=K(),Fit=gk();zit({target:"Math",stat:!0,forced:!0},{scale:Fit})});var Yae=P(()=>{"use strict";p();var Nit=K(),Bit=rt(),jit=hC(),Uit=Bu(),$it=ki(),Hae=rr(),Kae="Seeded Random",Xae=Kae+" Generator",Vit="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Git=Hae.set,Zit=Hae.getterFor(Xae),Wit=TypeError,Hit=Uit(function(t){Git(this,{type:Xae,seed:t%2147483647})},Kae,function(){var t=Zit(this),n=t.seed=(t.seed*1103515245+12345)%2147483647;return $it((n&1073741823)/1073741823,!1)});Nit({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var n=Bit(t).seed;if(!jit(n))throw new Wit(Vit);return new Hit(n)}})});var Jae=P(()=>{"use strict";p();var Kit=K();Kit({target:"Math",stat:!0,forced:!0},{signbit:function(t){var n=+t;return n===n&&n===0?1/n===-1/0:n<0}})});var ioe=P(()=>{"use strict";p();var Xit=K(),Yit=Fe(),Jit=Fr(),Qit=RangeError,ent=TypeError,ao=1/0,tnt=NaN,Mh=Math.abs,xk=Math.pow,Qae=Yit([].push),Iy=xk(2,1023),rnt=xk(2,53)-1,eoe=Number.MAX_VALUE,toe=xk(2,971),qy={},vk={},yk={},_k={},roe={},Pw=function(e,t){var n=e+t,u=t-(n-e);return{hi:n,lo:u}};Xit({target:"Math",stat:!0},{sumPrecise:function(t){var n=[],u=0,c=_k;switch(Jit(t,function(Te){if(++u>=rnt)throw new Qit("Maximum allowed index exceeded");if(typeof Te!="number")throw new ent("Value is not a number");c!==qy&&(Te!==Te?c=qy:Te===ao?c=c===vk?qy:yk:Te===-ao?c=c===yk?qy:vk:(Te!==0||1/Te===ao)&&(c===_k||c===roe)&&(c=roe,Qae(n,Te)))}),c){case qy:return tnt;case vk:return-ao;case yk:return ao;case _k:return-0}for(var a=[],x=0,S,A,R,D,L,H,ce=0;ce<n.length;ce++){S=n[ce];for(var de=0,ve=0;ve<a.length;ve++){if(A=a[ve],Mh(S)<Mh(A)&&(H=S,S=A,A=H),R=Pw(S,A),D=R.hi,L=R.lo,Mh(D)===ao){var X=D===ao?1:-1;x+=X,S=S-X*Iy-X*Iy,Mh(S)<Mh(A)&&(H=S,S=A,A=H),R=Pw(S,A),D=R.hi,L=R.lo}L!==0&&(a[de++]=L),S=D}a.length=de,S!==0&&Qae(a,S)}var ee=a.length-1;if(D=0,L=0,x!==0){var oe=ee>=0?a[ee]:0;if(ee--,Mh(x)>1||x>0&&oe>0||x<0&&oe<0)return x>0?ao:-ao;if(R=Pw(x*Iy,oe/2),D=R.hi,L=R.lo,L*=2,Mh(2*D)===ao)return D>0?D===Iy&&L===-(toe/2)&&ee>=0&&a[ee]<0?eoe:ao:D===-Iy&&L===toe/2&&ee>=0&&a[ee]>0?-eoe:-ao;L!==0&&(a[++ee]=L,L=0),D*=2}for(;ee>=0&&(R=Pw(D,a[ee--]),D=R.hi,L=R.lo,L===0););return ee>=0&&(L<0&&a[ee]<0||L>0&&a[ee]>0)&&(A=L*2,S=D+A,A===S-D&&(D=S)),D}})});var noe=P(()=>{"use strict";p();var int=K();int({target:"Math",stat:!0,forced:!0},{umulh:function(t,n){var u=65535,c=+t,a=+n,x=c&u,S=a&u,A=c>>>16,R=a>>>16,D=(A*S>>>0)+(x*S>>>16);return A*R+(D>>>16)+((x*R>>>0)+(D&u)>>>16)}})});var soe=P(()=>{"use strict";p();var nnt=K(),Ay=Fe(),ant=br(),Py="Invalid number representation",ont="Invalid radix",snt=RangeError,Aw=SyntaxError,lnt=TypeError,aoe=parseInt,unt=Math.pow,ooe=/^[\d.a-z]+$/,cnt=Ay("".charAt),hnt=Ay(ooe.exec),dnt=Ay(1 .toString),fnt=Ay("".slice),pnt=Ay("".split);nnt({target:"Number",stat:!0,forced:!0},{fromString:function(t,n){var u=1;if(typeof t!="string")throw new lnt(Py);if(!t.length)throw new Aw(Py);if(cnt(t,0)==="-"&&(u=-1,t=fnt(t,1),!t.length))throw new Aw(Py);var c=n===void 0?10:ant(n);if(c<2||c>36)throw new snt(ont);if(!hnt(ooe,t))throw new Aw(Py);var a=pnt(t,"."),x=aoe(a[0],c);if(a.length>1&&(x+=aoe(a[1],c)/unt(c,a[1].length)),c===10&&dnt(x,c)!==t)throw new Aw(Py);return u*x}})});var loe=P(()=>{"use strict";p();var mnt=K(),gnt=mw();mnt({target:"Number",stat:!0,forced:!0},{range:function(t,n,u){return new gnt(t,n,u,"number",0,1)}})});var uoe=P(()=>{"use strict";p();TC()});var Mw=P((iVt,doe)=>{"use strict";p();var coe=rr(),vnt=Bu(),Cw=ki(),ynt=Dt(),_nt=ch(),xnt=$t(),hoe="Object Iterator",bnt=coe.set,wnt=coe.getterFor(hoe);doe.exports=vnt(function(t,n){var u=xnt(t);bnt(this,{type:hoe,mode:n,object:u,keys:_nt(u),index:0})},"Object",function(){for(var t=wnt(this),n=t.keys;;){if(n===null||t.index>=n.length)return t.object=t.keys=null,Cw(void 0,!0);var u=n[t.index++],c=t.object;if(ynt(c,u)){switch(t.mode){case"keys":return Cw(u,!1);case"values":return Cw(c[u],!1)}return Cw([u,c[u]],!1)}}})});var foe=P(()=>{"use strict";p();var Snt=K(),Tnt=Mw();Snt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new Tnt(t,"entries")}})});var poe=P(()=>{"use strict";p();var Ent=K(),Int=Mw();Ent({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new Int(t,"keys")}})});var moe=P(()=>{"use strict";p();var qnt=K(),Pnt=Mw();qnt({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new Pnt(t,"values")}})});var goe=P(()=>{"use strict";p();SC()});var Ioe=P(()=>{"use strict";p();var Ant=K(),Rw=et(),Cy=pt(),Cnt=Uu(),voe=St(),Mnt=rt(),Rnt=In(),yoe=kt(),Ont=ta(),knt=_t(),Ow=Qr(),Dnt=or(),bk=io(),_oe=wr(),mp=ZC(),Lnt=xt(),xoe=rr(),znt=Lnt("observable"),wk="Observable",boe="Subscription",woe="SubscriptionObserver",Sk=xoe.getterFor,Tk=xoe.set,Fnt=Sk(wk),Soe=Sk(boe),kw=Sk(woe),Toe=function(e){this.observer=Mnt(e),this.cleanup=null,this.subscriptionObserver=null};Toe.prototype={type:boe,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){mp(t)}}},close:function(){if(!Cy){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var Ek=function(e,t){var n=Tk(this,new Toe(e)),u;Cy||(this.closed=!1);try{(u=Ow(e,"start"))&&Rw(u,e,this)}catch(S){mp(S)}if(!n.isClosed()){var c=n.subscriptionObserver=new Ik(n);try{var a=t(c),x=a;Ont(a)||(n.cleanup=yoe(a.unsubscribe)?function(){x.unsubscribe()}:voe(a))}catch(S){c.error(S);return}n.isClosed()&&n.clean()}};Ek.prototype=bk({},{unsubscribe:function(){var t=Soe(this);t.isClosed()||(t.close(),t.clean())}});Cy&&_oe(Ek.prototype,"closed",{configurable:!0,get:function(){return Soe(this).isClosed()}});var Ik=function(e){Tk(this,{type:woe,subscriptionState:e}),Cy||(this.closed=!1)};Ik.prototype=bk({},{next:function(t){var n=kw(this).subscriptionState;if(!n.isClosed()){var u=n.observer;try{var c=Ow(u,"next");c&&Rw(c,u,t)}catch(a){mp(a)}}},error:function(t){var n=kw(this).subscriptionState;if(!n.isClosed()){var u=n.observer;n.close();try{var c=Ow(u,"error");c?Rw(c,u,t):mp(t)}catch(a){mp(a)}n.clean()}},complete:function(){var t=kw(this).subscriptionState;if(!t.isClosed()){var n=t.observer;t.close();try{var u=Ow(n,"complete");u&&Rw(u,n)}catch(c){mp(c)}t.clean()}}});Cy&&_oe(Ik.prototype,"closed",{configurable:!0,get:function(){return kw(this).subscriptionState.isClosed()}});var Eoe=function(t){Rnt(this,qk),Tk(this,{type:wk,subscriber:voe(t)})},qk=Eoe.prototype;bk(qk,{subscribe:function(t){var n=arguments.length;return new Ek(yoe(t)?{next:t,error:n>1?arguments[1]:void 0,complete:n>2?arguments[2]:void 0}:knt(t)?t:{},Fnt(this).subscriber)}});Dnt(qk,znt,function(){return this});Ant({global:!0,constructor:!0,forced:!0},{Observable:Eoe});Cnt(wk)});var Poe=P(()=>{"use strict";p();var Nnt=K(),Bnt=wt(),jnt=et(),qoe=rt(),Unt=ko(),$nt=zu(),Vnt=Qr(),Gnt=Fr(),Znt=xt(),Wnt=Znt("observable");Nnt({target:"Observable",stat:!0,forced:!0},{from:function(t){var n=Unt(this)?this:Bnt("Observable"),u=Vnt(qoe(t),Wnt);if(u){var c=qoe(jnt(u,t));return c.constructor===n?c:new n(function(x){return c.subscribe(x)})}var a=$nt(t);return new n(function(x){Gnt(a,function(S,A){if(x.next(S),x.closed)return A()},{IS_ITERATOR:!0,INTERRUPTED:!0}),x.complete()})}})});var Coe=P(()=>{"use strict";p();var Hnt=K(),Aoe=wt(),Knt=ko(),Xnt=Aoe("Array");Hnt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=Knt(this)?this:Aoe("Observable"),n=arguments.length,u=Xnt(n),c=0;c<n;)u[c]=arguments[c++];return new t(function(a){for(var x=0;x<n;x++)if(a.next(u[x]),a.closed)return;a.complete()})}})});var Moe=P(()=>{"use strict";p();Ioe();Poe();Coe()});var Roe=P(()=>{"use strict";p();oM()});var Ooe=P(()=>{"use strict";p();sM()});var koe=P(()=>{"use strict";p();hM()});var Doe=P(()=>{"use strict";p();dM()});var As=P((jVt,Noe)=>{"use strict";p();t1();ew();var Foe=wt(),Ynt=Fe(),Jnt=fl(),Loe=Foe("Map"),Qnt=Foe("WeakMap"),eat=Ynt([].push),zoe=Jnt("metadata"),Pk=zoe.store||(zoe.store=new Qnt),My=function(e,t,n){var u=Pk.get(e);if(!u){if(!n)return;Pk.set(e,u=new Loe)}var c=u.get(t);if(!c){if(!n)return;u.set(t,c=new Loe)}return c},tat=function(e,t,n){var u=My(t,n,!1);return u===void 0?!1:u.has(e)},rat=function(e,t,n){var u=My(t,n,!1);return u===void 0?void 0:u.get(e)},iat=function(e,t,n,u){My(n,u,!0).set(e,t)},nat=function(e,t){var n=My(e,t,!1),u=[];return n&&n.forEach(function(c,a){eat(u,a)}),u},aat=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};Noe.exports={store:Pk,getMap:My,has:tat,get:rat,set:iat,keys:nat,toKey:aat}});var joe=P(()=>{"use strict";p();var oat=K(),Boe=As(),sat=rt(),lat=Boe.toKey,uat=Boe.set;oat({target:"Reflect",stat:!0},{defineMetadata:function(t,n,u){var c=arguments.length<4?void 0:lat(arguments[3]);uat(t,n,sat(u),c)}})});var $oe=P(()=>{"use strict";p();var cat=K(),Ak=As(),hat=rt(),dat=Ak.toKey,fat=Ak.getMap,Uoe=Ak.store;cat({target:"Reflect",stat:!0},{deleteMetadata:function(t,n){var u=arguments.length<3?void 0:dat(arguments[2]),c=fat(hat(n),u,!1);if(c===void 0||!c.delete(t))return!1;if(c.size)return!0;var a=Uoe.get(n);return a.delete(u),!!a.size||Uoe.delete(n)}})});var Goe=P(()=>{"use strict";p();var pat=K(),Ck=As(),mat=rt(),gat=Ti(),vat=Ck.has,yat=Ck.get,_at=Ck.toKey,Voe=function(e,t,n){var u=vat(e,t,n);if(u)return yat(e,t,n);var c=gat(t);return c!==null?Voe(e,c,n):void 0};pat({target:"Reflect",stat:!0},{getMetadata:function(t,n){var u=arguments.length<3?void 0:_at(arguments[2]);return Voe(t,mat(n),u)}})});var Koe=P(()=>{"use strict";p();var xat=K(),Zoe=Fe(),Woe=As(),bat=rt(),wat=Ti(),Sat=lw(),Tat=Zoe(Sat),Eat=Zoe([].concat),Iat=Woe.keys,qat=Woe.toKey,Hoe=function(e,t){var n=Iat(e,t),u=wat(e);if(u===null)return n;var c=Hoe(u,t);return c.length?n.length?Tat(Eat(n,c)):c:n};xat({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var n=arguments.length<2?void 0:qat(arguments[1]);return Hoe(bat(t),n)}})});var Yoe=P(()=>{"use strict";p();var Pat=K(),Xoe=As(),Aat=rt(),Cat=Xoe.get,Mat=Xoe.toKey;Pat({target:"Reflect",stat:!0},{getOwnMetadata:function(t,n){var u=arguments.length<3?void 0:Mat(arguments[2]);return Cat(t,Aat(n),u)}})});var Qoe=P(()=>{"use strict";p();var Rat=K(),Joe=As(),Oat=rt(),kat=Joe.keys,Dat=Joe.toKey;Rat({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var n=arguments.length<2?void 0:Dat(arguments[1]);return kat(Oat(t),n)}})});var rse=P(()=>{"use strict";p();var Lat=K(),ese=As(),zat=rt(),Fat=Ti(),Nat=ese.has,Bat=ese.toKey,tse=function(e,t,n){var u=Nat(e,t,n);if(u)return!0;var c=Fat(t);return c!==null?tse(e,c,n):!1};Lat({target:"Reflect",stat:!0},{hasMetadata:function(t,n){var u=arguments.length<3?void 0:Bat(arguments[2]);return tse(t,zat(n),u)}})});var nse=P(()=>{"use strict";p();var jat=K(),ise=As(),Uat=rt(),$at=ise.has,Vat=ise.toKey;jat({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,n){var u=arguments.length<3?void 0:Vat(arguments[2]);return $at(t,Uat(n),u)}})});var ose=P(()=>{"use strict";p();var Gat=K(),ase=As(),Zat=rt(),Wat=ase.toKey,Hat=ase.set;Gat({target:"Reflect",stat:!0},{metadata:function(t,n){return function(c,a){Hat(t,n,Zat(c),Wat(a))}}})});var sse=P(()=>{"use strict";p();PM()});var lse=P(()=>{"use strict";p();var Kat=K(),Xat=hn(),Yat=Wi().add;Kat({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Xat(this),n=0,u=arguments.length;n<u;n++)Yat(t,arguments[n]);return t}})});var use=P(()=>{"use strict";p();var Jat=K(),Qat=hn(),eot=Wi().remove;Jat({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Qat(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=eot(t,arguments[c]),n=n&&u;return!!n}})});var cse=P(()=>{"use strict";p();LM()});var dse=P((P8t,hse)=>{"use strict";p();var tot=Fn(),rot=Dt(),iot=ta(),not=xt(),aot=gh(),oot=not("iterator"),sot=Object;hse.exports=function(e){if(iot(e))return!1;var t=sot(e);return t[oot]!==void 0||"@@iterator"in t||rot(aot,tot(t))}});var ic=P((C8t,pse)=>{"use strict";p();var lot=wt(),fse=kt(),uot=dse(),cot=_t(),hot=lot("Set"),dot=function(e){return cot(e)&&typeof e.size=="number"&&fse(e.has)&&fse(e.keys)};pse.exports=function(e){return dot(e)?e:uot(e)?new hot(e):e}});var mse=P(()=>{"use strict";p();var fot=K(),pot=et(),mot=ic(),got=DM();fot({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return pot(got,this,mot(t))}})});var gse=P(()=>{"use strict";p();var vot=K(),yot=dr(),_ot=hn(),xot=oa();vot({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var n=_ot(this),u=yot(t,arguments.length>1?arguments[1]:void 0);return xot(n,function(c){if(!u(c,c,n))return!1},!0)!==!1}})});var yse=P(()=>{"use strict";p();var bot=K(),wot=dr(),Sot=hn(),vse=Wi(),Tot=oa(),Eot=vse.Set,Iot=vse.add;bot({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var n=Sot(this),u=wot(t,arguments.length>1?arguments[1]:void 0),c=new Eot;return Tot(n,function(a){u(a,a,n)&&Iot(c,a)}),c}})});var _se=P(()=>{"use strict";p();var qot=K(),Pot=dr(),Aot=hn(),Cot=oa();qot({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var n=Aot(this),u=Pot(t,arguments.length>1?arguments[1]:void 0),c=Cot(n,function(a){if(u(a,a,n))return{value:a}},!0);return c&&c.value}})});var bse=P(()=>{"use strict";p();var Mot=K(),xse=Wi(),Rot=Ty();Mot({target:"Set",stat:!0,forced:!0},{from:Rot(xse.Set,xse.add,!1)})});var wse=P(()=>{"use strict";p();NM()});var Sse=P(()=>{"use strict";p();var Oot=K(),kot=et(),Dot=ic(),Lot=FM();Oot({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return kot(Lot,this,Dot(t))}})});var Tse=P(()=>{"use strict";p();jM()});var Ese=P(()=>{"use strict";p();var zot=K(),Fot=et(),Not=ic(),Bot=BM();zot({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return Fot(Bot,this,Not(t))}})});var Ise=P(()=>{"use strict";p();$M()});var qse=P(()=>{"use strict";p();var jot=K(),Uot=et(),$ot=ic(),Vot=UM();jot({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return Uot(Vot,this,$ot(t))}})});var Pse=P(()=>{"use strict";p();GM()});var Ase=P(()=>{"use strict";p();var Got=K(),Zot=et(),Wot=ic(),Hot=VM();Got({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return Zot(Hot,this,Wot(t))}})});var Mse=P(()=>{"use strict";p();var Kot=K(),Cse=Fe(),Xot=hn(),Yot=oa(),Jot=It(),Qot=Cse([].join),est=Cse([].push);Kot({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var n=Xot(this),u=t===void 0?",":Jot(t),c=[];return Yot(n,function(a){est(c,a)}),Qot(c,u)}})});var Ose=P(()=>{"use strict";p();var tst=K(),rst=dr(),ist=hn(),Rse=Wi(),nst=oa(),ast=Rse.Set,ost=Rse.add;tst({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var n=ist(this),u=rst(t,arguments.length>1?arguments[1]:void 0),c=new ast;return nst(n,function(a){ost(c,u(a,a,n))}),c}})});var Dse=P(()=>{"use strict";p();var sst=K(),kse=Wi(),lst=Ey();sst({target:"Set",stat:!0,forced:!0},{of:lst(kse.Set,kse.add,!1)})});var Lse=P(()=>{"use strict";p();var ust=K(),cst=St(),hst=hn(),dst=oa(),fst=TypeError;ust({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=hst(this),u=arguments.length<2,c=u?void 0:arguments[1];if(cst(t),dst(n,function(a){u?(u=!1,c=a):c=t(c,a,a,n)}),u)throw new fst("Reduce of empty set with no initial value");return c}})});var zse=P(()=>{"use strict";p();var pst=K(),mst=dr(),gst=hn(),vst=oa();pst({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var n=gst(this),u=mst(t,arguments.length>1?arguments[1]:void 0);return vst(n,function(c){if(u(c,c,n))return!0},!0)===!0}})});var Fse=P(()=>{"use strict";p();HM()});var Nse=P(()=>{"use strict";p();var yst=K(),_st=et(),xst=ic(),bst=WM();yst({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return _st(bst,this,xst(t))}})});var Bse=P(()=>{"use strict";p();XM()});var jse=P(()=>{"use strict";p();var wst=K(),Sst=et(),Tst=ic(),Est=KM();wst({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Sst(Est,this,Tst(t))}})});var Use=P(()=>{"use strict";p();var Ist=K(),qst=Ih().charAt,Pst=vr(),Ast=br(),Cst=It();Ist({target:"String",proto:!0,forced:!0},{at:function(t){var n=Cst(Pst(this)),u=n.length,c=Ast(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:qst(n,a)}})});var Mk=P((WGt,Zse)=>{"use strict";p();var Gse=Fe(),Mst=wi(),$se=It(),Rst=Ht(),Ost=TypeError,Vse=Gse([].push),kst=Gse([].join);Zse.exports=function(t){var n=Mst(t),u=Rst(n);if(!u)return"";for(var c=arguments.length,a=[],x=0;;){var S=n[x++];if(S===void 0)throw new Ost("Incorrect template");if(Vse(a,$se(S)),x===u)return kst(a,"");x<c&&Vse(a,$se(arguments[x]))}}});var Wse=P(()=>{"use strict";p();var Dst=K(),Lst=Mk();Dst({target:"String",stat:!0,forced:!0},{cooked:Lst})});var Jse=P(()=>{"use strict";p();var zst=K(),Fst=Bu(),Hse=ki(),Nst=vr(),Bst=It(),Kse=rr(),Xse=Ih(),jst=Xse.codeAt,Ust=Xse.charAt,Yse="String Iterator",$st=Kse.set,Vst=Kse.getterFor(Yse),Gst=Fst(function(t){$st(this,{type:Yse,string:t,index:0})},"String",function(){var t=Vst(this),n=t.string,u=t.index,c;return u>=n.length?Hse(void 0,!0):(c=Ust(n,u),t.index+=c.length,Hse({codePoint:jst(c,0),position:u},!1))});zst({target:"String",proto:!0,forced:!0},{codePoints:function(){return new Gst(Bst(Nst(this)))}})});var Cs=P((tZt,Qse)=>{"use strict";p();var Dw=Fe(),Lw=WeakMap.prototype;Qse.exports={WeakMap,set:Dw(Lw.set),get:Dw(Lw.get),has:Dw(Lw.has),remove:Dw(Lw.delete)}});var lle=P((iZt,sle)=>{"use strict";p();var Zst=wt(),zw=Fe(),Wst=String.fromCharCode,Hst=Zst("String","fromCodePoint"),Rk=zw("".charAt),ale=zw("".charCodeAt),ele=zw("".indexOf),tle=zw("".slice),kk=48,ole=57,rle=97,Kst=102,ile=65,Xst=70,nle=function(e,t){var n=ale(e,t);return n>=kk&&n<=ole},Ok=function(e,t,n){if(n>=e.length)return-1;for(var u=0;t<n;t++){var c=Yst(ale(e,t));if(c===-1)return-1;u=u*16+c}return u},Yst=function(e){return e>=kk&&e<=ole?e-kk:e>=rle&&e<=Kst?e-rle+10:e>=ile&&e<=Xst?e-ile+10:-1};sle.exports=function(e){for(var t="",n=0,u=0,c;(u=ele(e,"\\",u))>-1;){if(t+=tle(e,n,u),++u===e.length)return;var a=Rk(e,u++);switch(a){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":u<e.length&&Rk(e,u)===`
`&&++u;case`
`:case"\u2028":case"\u2029":break;case"0":if(nle(e,u))return;t+="\0";break;case"x":if(c=Ok(e,u,u+2),c===-1)return;u+=2,t+=Wst(c);break;case"u":if(u<e.length&&Rk(e,u)==="{"){var x=ele(e,"}",++u);if(x===-1)return;c=Ok(e,u,x),u=x+1}else c=Ok(e,u,u+4),u+=4;if(c===-1||c>1114111)return;t+=Hst(c);break;default:if(nle(a,0))return;t+=a}n=u}return t+tle(e,n)}});var yle=P(()=>{"use strict";p();var Jst=wl(),Qst=K(),elt=sv(),Fw=Fe(),fle=cn(),ple=rt(),tlt=$t(),rlt=kt(),ilt=Ht(),nlt=gr().f,alt=ia(),Nw=Cs(),olt=Mk(),slt=lle(),mle=xh(),Dk=new Nw.WeakMap,llt=Nw.get,ult=Nw.has,clt=Nw.set,Lk=Array,Ry=TypeError,ule=Object.freeze||Object,hlt=Object.isFrozen,dlt=Math.min,cle=Fw("".charAt),gle=Fw("".slice),flt=Fw("".split),hle=Fw(/./.exec),plt=/([\n\u2028\u2029]|\r\n?)/g,mlt=RegExp("^["+mle+"]*"),glt=RegExp("[^"+mle+"]"),dle="Invalid tag",vlt="Invalid opening line",ylt="Invalid closing line",_lt=function(e){var t=e.raw;if(Jst&&!hlt(t))throw new Ry("Raw template should be frozen");if(ult(Dk,t))return llt(Dk,t);var n=xlt(t),u=wlt(n);return nlt(u,"raw",{value:ule(n)}),ule(u),clt(Dk,t,u),u},xlt=function(e){var t=tlt(e),n=ilt(t),u=Lk(n),c=Lk(n),a=0,x,S,A,R;if(!n)throw new Ry(dle);for(;a<n;a++){var D=t[a];if(typeof D=="string")u[a]=flt(D,plt);else throw new Ry(dle)}for(a=0;a<n;a++){var L=a+1===n;if(x=u[a],a===0){if(x.length===1||x[0].length>0)throw new Ry(vlt);x[1]=""}if(L){if(x.length===1||hle(glt,x[x.length-1]))throw new Ry(ylt);x[x.length-2]="",x[x.length-1]=""}for(var H=2;H<x.length;H+=2){var ce=x[H],de=H+1===x.length&&!L,ve=hle(mlt,ce)[0];if(!de&&ve.length===ce.length){x[H]="";continue}S=blt(ve,S)}}var X=S?S.length:0;for(a=0;a<n;a++){for(x=u[a],A=x[0],R=1;R<x.length;R+=2)A+=x[R]+gle(x[R+1],X);c[a]=A}return c},blt=function(e,t){if(t===void 0||e===t)return e;for(var n=0,u=dlt(e.length,t.length);n<u&&cle(e,n)===cle(t,n);n++);return gle(e,0,n)},wlt=function(e){for(var t=0,n=e.length,u=Lk(n);t<n;t++)u[t]=slt(e[t]);return u},vle=function(e){return elt(function(t){var n=alt(arguments);return n[0]=_lt(ple(t)),fle(e,this,n)},"")},Slt=vle(olt);Qst({target:"String",stat:!0,forced:!0},{dedent:function(t){return ple(t),rlt(t)?vle(t):fle(Slt,this,arguments)}})});var _le=P(()=>{"use strict";p();QM()});var xle=P(()=>{"use strict";p();sR()});var ble=P(()=>{"use strict";p();vR()});var wle=P(()=>{"use strict";p();TR()});var Sle=P(()=>{"use strict";p();var Tlt=Qe(),Elt=zr(),Ilt=gr().f,qlt=Vi().f,zk=Tlt.Symbol;Elt("asyncDispose");zk&&(Oy=qlt(zk,"asyncDispose"),Oy.enumerable&&Oy.configurable&&Oy.writable&&Ilt(zk,"asyncDispose",{value:Oy.value,enumerable:!1,configurable:!1,writable:!1}));var Oy});var Tle=P(()=>{"use strict";p();var Plt=zr();Plt("customMatcher")});var Ele=P(()=>{"use strict";p();var Alt=Qe(),Clt=zr(),Mlt=gr().f,Rlt=Vi().f,Fk=Alt.Symbol;Clt("dispose");Fk&&(ky=Rlt(Fk,"dispose"),ky.enumerable&&ky.configurable&&ky.writable&&Mlt(Fk,"dispose",{value:ky.value,enumerable:!1,configurable:!1,writable:!1}));var ky});var Bk=P((AZt,Ile)=>{"use strict";p();var Olt=wt(),klt=Fe(),Nk=Olt("Symbol"),Dlt=Nk.keyFor,Llt=klt(Nk.prototype.valueOf);Ile.exports=Nk.isRegisteredSymbol||function(t){try{return Dlt(Llt(t))!==void 0}catch(n){return!1}}});var qle=P(()=>{"use strict";p();var zlt=K(),Flt=Bk();zlt({target:"Symbol",stat:!0},{isRegisteredSymbol:Flt})});var Ple=P(()=>{"use strict";p();var Nlt=K(),Blt=Bk();Nlt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Blt})});var $k=P((zZt,kle)=>{"use strict";p();var jlt=fl(),Rle=wt(),Ult=Fe(),$lt=dl(),Vlt=xt(),jw=Rle("Symbol"),Ale=jw.isWellKnownSymbol,Ole=Rle("Object","getOwnPropertyNames"),Glt=Ult(jw.prototype.valueOf),Cle=jlt("wks");for(Bw=0,jk=Ole(jw),Mle=jk.length;Bw<Mle;Bw++)try{Uk=jk[Bw],$lt(jw[Uk])&&Vlt(Uk)}catch(e){}var Uk,Bw,jk,Mle;kle.exports=function(t){if(Ale&&Ale(t))return!0;try{for(var n=Glt(t),u=0,c=Ole(Cle),a=c.length;u<a;u++)if(Cle[c[u]]==n)return!0}catch(x){}return!1}});var Dle=P(()=>{"use strict";p();var Zlt=K(),Wlt=$k();Zlt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Wlt})});var Lle=P(()=>{"use strict";p();var Hlt=K(),Klt=$k();Hlt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Klt})});var zle=P(()=>{"use strict";p();var Xlt=zr();Xlt("matcher")});var Fle=P(()=>{"use strict";p();var Ylt=zr();Ylt("metadata")});var Nle=P(()=>{"use strict";p();var Jlt=zr();Jlt("metadataKey")});var Ble=P(()=>{"use strict";p();var Qlt=zr();Qlt("observable")});var jle=P(()=>{"use strict";p();var eut=zr();eut("patternMatch")});var Ule=P(()=>{"use strict";p();var tut=zr();tut("replaceAll")});var Vle=P(()=>{"use strict";p();var rut=wt(),iut=Vv(),nut=gO(),$le=Bt(),aut=vl(),out=$le.aTypedArrayConstructor,sut=$le.exportTypedArrayStaticMethod;sut("fromAsync",function(t){var n=this,u=arguments.length,c=u>1?arguments[1]:void 0,a=u>2?arguments[2]:void 0;return new(rut("Promise"))(function(x){iut(n),x(nut(t,c,a))}).then(function(x){return aut(out(n),x)})},!0)});var Gle=P(()=>{"use strict";p();NR()});var Wle=P(()=>{"use strict";p();var Zle=Bt(),lut=ti().filterReject,uut=j1(),cut=Zle.aTypedArray,hut=Zle.exportTypedArrayMethod;hut("filterOut",function(t){var n=lut(cut(this),t,arguments.length>1?arguments[1]:void 0);return uut(this,n)},!0)});var Kle=P(()=>{"use strict";p();var Hle=Bt(),dut=ti().filterReject,fut=j1(),put=Hle.aTypedArray,mut=Hle.exportTypedArrayMethod;mut("filterReject",function(t){var n=dut(put(this),t,arguments.length>1?arguments[1]:void 0);return fut(this,n)},!0)});var Xle=P(()=>{"use strict";p();BR()});var Yle=P(()=>{"use strict";p();jR()});var Jle=P(()=>{"use strict";p();var Vk=Bt(),gut=ow(),vut=Vk.aTypedArray,yut=Vk.getTypedArrayConstructor,_ut=Vk.exportTypedArrayMethod;_ut("groupBy",function(t){var n=arguments.length>1?arguments[1]:void 0;return gut(vut(this),t,n,yut)},!0)});var Qle=P(()=>{"use strict";p();tO()});var eue=P(()=>{"use strict";p();rO()});var tue=P(()=>{"use strict";p();var Gk=Bt(),xut=Ht(),but=L1(),wut=Ro(),Sut=sy(),Tut=br(),Eut=Gk.aTypedArray,Iut=Gk.getTypedArrayConstructor,qut=Gk.exportTypedArrayMethod,Put=Math.max,Aut=Math.min;qut("toSpliced",function(t,n){var u=Eut(this),c=Iut(u),a=xut(u),x=wut(t,a),S=arguments.length,A=0,R,D,L,H,ce,de,ve;if(S===0)R=D=0;else if(S===1)R=0,D=a-x;else if(D=Aut(Put(Tut(n),0),a-x),R=S-2,R){H=new c(R),L=but(H);for(var X=2;X<S;X++)ce=arguments[X],H[X-2]=L?Sut(ce):+ce}for(de=a+R-D,ve=new c(de);A<x;A++)ve[A]=u[A];for(;A<x+R;A++)ve[A]=H[A-x];for(;A<de;A++)ve[A]=u[A+D-R];return ve},!0)});var rue=P(()=>{"use strict";p();var Cut=Fe(),Zk=Bt(),Mut=vl(),Rut=lw(),Out=Zk.aTypedArray,kut=Zk.getTypedArrayConstructor,Dut=Zk.exportTypedArrayMethod,Lut=Cut(Rut);Dut("uniqueBy",function(t){return Out(this),Mut(kut(this),Lut(this,t))},!0)});var iue=P(()=>{"use strict";p();nO()});var Wk=P((GWt,nue)=>{"use strict";p();var zut=_t(),Fut=String,Nut=TypeError;nue.exports=function(e){if(e===void 0||zut(e))return e;throw new Nut(Fut(e)+" is not an object or undefined")}});var Dy=P((WWt,uue)=>{"use strict";p();var lue="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",aue=lue+"+/",oue=lue+"-_",sue=function(e){for(var t={},n=0;n<64;n++)t[e.charAt(n)]=n;return t};uue.exports={i2c:aue,c2i:sue(aue),i2cUrl:oue,c2iUrl:sue(oue)}});var Hk=P((KWt,cue)=>{"use strict";p();var But=TypeError;cue.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new But("Incorrect `alphabet` option")}});var Jk=P((YWt,fue)=>{"use strict";p();var hue=Qe(),jut=Fe(),Uut=Wk(),$ut=ry(),Vut=Dt(),due=Dy(),Gut=Hk(),Zut=Ff(),Wut=due.c2i,Hut=due.c2iUrl,nc=hue.SyntaxError,Kut=hue.TypeError,Rh=jut("".charAt),Kk=function(e,t){for(var n=e.length;t<n;t++){var u=Rh(e,t);if(u!==" "&&u!=="\t"&&u!==`
`&&u!=="\f"&&u!=="\r")break}return t},Xk=function(e,t,n){var u=e.length;u<4&&(e+=u===2?"AA":"A");var c=(t[Rh(e,0)]<<18)+(t[Rh(e,1)]<<12)+(t[Rh(e,2)]<<6)+t[Rh(e,3)],a=[c>>16&255,c>>8&255,c&255];if(u===2){if(n&&a[1]!==0)throw new nc("Extra bits");return[a[0]]}if(u===3){if(n&&a[2]!==0)throw new nc("Extra bits");return[a[0],a[1]]}return a},Yk=function(e,t,n){for(var u=t.length,c=0;c<u;c++)e[n+c]=t[c];return n+u};fue.exports=function(e,t,n,u){$ut(e),Uut(t);var c=Gut(t)==="base64"?Wut:Hut,a=t?t.lastChunkHandling:void 0;if(a===void 0&&(a="loose"),a!=="loose"&&a!=="strict"&&a!=="stop-before-partial")throw new Kut("Incorrect `lastChunkHandling` option");n&&Zut(n.buffer);var x=n||[],S=0,A=0,R="",D=0;if(u)for(;;){if(D=Kk(e,D),D===e.length){if(R.length>0){if(a==="stop-before-partial")break;if(a==="loose"){if(R.length===1)throw new nc("Malformed padding: exactly one additional character");S=Yk(x,Xk(R,c,!1),S)}else throw new nc("Missing padding")}A=e.length;break}var L=Rh(e,D);if(++D,L==="="){if(R.length<2)throw new nc("Padding is too early");if(D=Kk(e,D),R.length===2){if(D===e.length){if(a==="stop-before-partial")break;throw new nc("Malformed padding: only one =")}Rh(e,D)==="="&&(++D,D=Kk(e,D))}if(D<e.length)throw new nc("Unexpected character after padding");S=Yk(x,Xk(R,c,a==="strict"),S),A=e.length;break}if(!Vut(c,L))throw new nc("Unexpected character");var H=u-S;if(H===1&&R.length===2||H===2&&R.length===3||(R+=L,R.length===4&&(S=Yk(x,Xk(R,c,!1),S),R="",A=D,S===u)))break}return{bytes:x,read:A,written:S}}});var mue=P(()=>{"use strict";p();var Xut=K(),Yut=Qe(),Jut=vl(),Qut=Jk(),pue=Yut.Uint8Array;pue&&Xut({target:"Uint8Array",stat:!0},{fromBase64:function(t){var n=Qut(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return Jut(pue,n.bytes)}})});var eD=P((rHt,_ue)=>{"use strict";p();var Qk=Qe(),vue=Fe(),ect=Qk.Uint8Array,gue=Qk.SyntaxError,tct=Qk.parseInt,rct=Math.min,yue=/[^\da-f]/i,ict=vue(yue.exec),nct=vue("".slice);_ue.exports=function(e,t){var n=e.length;if(n%2!==0)throw new gue("String should be an even number of characters");for(var u=t?rct(t.length,n/2):n/2,c=t||new ect(u),a=0,x=0;x<u;){var S=nct(e,a,a+=2);if(ict(yue,S))throw new gue("String should only contain hex characters");c[x++]=tct(S,16)}return{bytes:c,read:a}}});var xue=P(()=>{"use strict";p();var act=K(),oct=Qe(),sct=ry(),lct=eD();oct.Uint8Array&&act({target:"Uint8Array",stat:!0},{fromHex:function(t){return lct(sct(t)).bytes}})});var Ly=P((sHt,bue)=>{"use strict";p();var uct=Fn(),cct=TypeError;bue.exports=function(e){if(uct(e)==="Uint8Array")return e;throw new cct("Argument is not an Uint8Array")}});var wue=P(()=>{"use strict";p();var hct=K(),dct=Qe(),fct=Jk(),pct=Ly(),Uw=dct.Uint8Array,mct=!Uw||!Uw.prototype.setFromBase64||!function(){var e=new Uw([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();Uw&&hct({target:"Uint8Array",proto:!0,forced:mct},{setFromBase64:function(t){pct(this);var n=fct(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:n.read,written:n.written}}})});var Sue=P(()=>{"use strict";p();var gct=K(),vct=Qe(),yct=ry(),_ct=Ly(),xct=Ff(),bct=eD();vct.Uint8Array&&gct({target:"Uint8Array",proto:!0},{setFromHex:function(t){_ct(this),yct(t),xct(this.buffer);var n=bct(t,this).read;return{read:n,written:n/2}}})});var Eue=P(()=>{"use strict";p();var wct=K(),Sct=Qe(),Tct=Fe(),Ect=Wk(),Ict=Ly(),qct=Ff(),Tue=Dy(),Pct=Hk(),Act=Tue.i2c,Cct=Tue.i2cUrl,Mct=Tct("".charAt);Sct.Uint8Array&&wct({target:"Uint8Array",proto:!0},{toBase64:function(){var t=Ict(this),n=arguments.length?Ect(arguments[0]):void 0,u=Pct(n)==="base64"?Act:Cct,c=!!n&&!!n.omitPadding;qct(this.buffer);for(var a="",x=0,S=t.length,A,R=function(D){return Mct(u,A>>6*D&63)};x+2<S;x+=3)A=(t[x]<<16)+(t[x+1]<<8)+t[x+2],a+=R(3)+R(2)+R(1)+R(0);return x+2===S?(A=(t[x]<<16)+(t[x+1]<<8),a+=R(3)+R(2)+R(1)+(c?"":"=")):x+1===S&&(A=t[x]<<16,a+=R(3)+R(2)+(c?"":"==")),a}})});var Iue=P(()=>{"use strict";p();var Rct=K(),Oct=Qe(),kct=Fe(),Dct=Ly(),Lct=Ff(),zct=kct(1 .toString);Oct.Uint8Array&&Rct({target:"Uint8Array",proto:!0},{toHex:function(){Dct(this),Lct(this.buffer);for(var t="",n=0,u=this.length;n<u;n++){var c=zct(this[n],16);t+=c.length===1?"0"+c:c}return t}})});var zy=P((bHt,que)=>{"use strict";p();var Fct=Cs().has;que.exports=function(e){return Fct(e),e}});var Pue=P(()=>{"use strict";p();var Nct=K(),Bct=zy(),jct=Cs().remove;Nct({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Bct(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=jct(t,arguments[c]),n=n&&u;return!!n}})});var Cue=P(()=>{"use strict";p();var Uct=K(),Aue=Cs(),$ct=Ty();Uct({target:"WeakMap",stat:!0,forced:!0},{from:$ct(Aue.WeakMap,Aue.set,!0)})});var Rue=P(()=>{"use strict";p();var Vct=K(),Mue=Cs(),Gct=Ey();Vct({target:"WeakMap",stat:!0,forced:!0},{of:Gct(Mue.WeakMap,Mue.set,!0)})});var kue=P(()=>{"use strict";p();var Zct=K(),Wct=zy(),tD=Cs(),Hct=tD.get,Kct=tD.has,Oue=tD.set;Zct({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=Wct(this),c,a;return Kct(u,t)?(c=Hct(u,t),"update"in n&&(c=n.update(c,t,u),Oue(u,t,c)),c):(a=n.insert(t,u),Oue(u,t,a),a)}})});var Due=P(()=>{"use strict";p();var Xct=K(),Yct=zy(),rD=Cs(),Jct=rD.get,Qct=rD.has,eht=rD.set;Xct({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,n){return Qct(Yct(this),t)?Jct(this,t):(eht(this,t,n),n)}})});var Fue=P((FHt,zue)=>{"use strict";p();var iD=Cs(),Lue=new iD.WeakMap,tht=iD.set,rht=iD.remove;zue.exports=function(e){return tht(Lue,e,1),rht(Lue,e),e}});var Nue=P(()=>{"use strict";p();var iht=K(),nht=St(),aht=zy(),oht=Fue(),nD=Cs(),sht=nD.get,lht=nD.has,uht=nD.set;iht({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,n){if(aht(this),oht(t),nht(n),lht(this,t))return sht(this,t);var u=n(t);return uht(this,t,u),u}})});var Bue=P(()=>{"use strict";p();var cht=K(),hht=qw();cht({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:hht})});var gp=P((ZHt,jue)=>{"use strict";p();var aD=Fe(),oD=WeakSet.prototype;jue.exports={WeakSet,add:aD(oD.add),has:aD(oD.has),remove:aD(oD.delete)}});var sD=P((HHt,Uue)=>{"use strict";p();var dht=gp().has;Uue.exports=function(e){return dht(e),e}});var $ue=P(()=>{"use strict";p();var fht=K(),pht=sD(),mht=gp().add;fht({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=pht(this),n=0,u=arguments.length;n<u;n++)mht(t,arguments[n]);return t}})});var Vue=P(()=>{"use strict";p();var ght=K(),vht=sD(),yht=gp().remove;ght({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=vht(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=yht(t,arguments[c]),n=n&&u;return!!n}})});var Zue=P(()=>{"use strict";p();var _ht=K(),Gue=gp(),xht=Ty();_ht({target:"WeakSet",stat:!0,forced:!0},{from:xht(Gue.WeakSet,Gue.add,!1)})});var Hue=P(()=>{"use strict";p();var bht=K(),Wue=gp(),wht=Ey();bht({target:"WeakSet",stat:!0,forced:!0},{of:wht(Wue.WeakSet,Wue.add,!1)})});var tce=P(()=>{"use strict";p();var Sht=K(),Tht=Qe(),Yue=wt(),lD=Fe(),Eht=et(),$w=Ue(),Iht=It(),qht=Ra(),Kue=Dy().c2i,Jue=/[^\d+/a-z]/i,Pht=/[\t\n\f\r ]+/g,Aht=/[=]{1,2}$/,Oh=Yue("atob"),Cht=String.fromCharCode,Mht=lD("".charAt),Xue=lD("".replace),Rht=lD(Jue.exec),vp=!!Oh&&!$w(function(){return Oh("aGk=")!=="hi"}),Que=vp&&$w(function(){return Oh(" ")!==""}),ece=vp&&!$w(function(){Oh("a")}),Oht=vp&&!$w(function(){Oh()}),kht=vp&&Oh.length!==1,Dht=!vp||Que||ece||Oht||kht;Sht({global:!0,bind:!0,enumerable:!0,forced:Dht},{atob:function(t){if(qht(arguments.length,1),vp&&!Que&&!ece)return Eht(Oh,Tht,t);var n=Xue(Iht(t),Pht,""),u="",c=0,a=0,x,S,A;if(n.length%4===0&&(n=Xue(n,Aht,"")),x=n.length,x%4===1||Rht(Jue,n))throw new(Yue("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;c<x;)S=Mht(n,c++),A=a%4?A*64+Kue[S]:Kue[S],a++%4&&(u+=Cht(255&A>>(-2*a&6)));return u}})});var oce=P(()=>{"use strict";p();var Lht=K(),zht=Qe(),nce=wt(),ace=Fe(),Fht=et(),uD=Ue(),rce=It(),Nht=Ra(),Bht=Dy().i2c,yp=nce("btoa"),ice=ace("".charAt),jht=ace("".charCodeAt),Fy=!!yp&&!uD(function(){return yp("hi")!=="aGk="}),Uht=Fy&&!uD(function(){yp()}),$ht=Fy&&uD(function(){return yp(null)!=="bnVsbA=="}),Vht=Fy&&yp.length!==1;Lht({global:!0,bind:!0,enumerable:!0,forced:!Fy||Uht||$ht||Vht},{btoa:function(t){if(Nht(arguments.length,1),Fy)return Fht(yp,zht,rce(t));for(var n=rce(t),u="",c=0,a=Bht,x,S;ice(n,c)||(a="=",c%1);){if(S=jht(n,c+=3/4),S>255)throw new(nce("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");x=x<<8|S,u+=ice(a,63&x>>8-c%1*8)}return u}})});var cD=P((p7t,sce)=>{"use strict";p();sce.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var dD=P((g7t,uce)=>{"use strict";p();var Ght=iv(),hD=Ght("span").classList,lce=hD&&hD.constructor&&hD.constructor.prototype;uce.exports=lce===Object.prototype?void 0:lce});var fce=P(()=>{"use strict";p();var cce=Qe(),hce=cD(),Zht=dD(),fD=W2(),Wht=Si(),dce=function(e){if(e&&e.forEach!==fD)try{Wht(e,"forEach",fD)}catch(t){e.forEach=fD}};for(Vw in hce)hce[Vw]&&dce(cce[Vw]&&cce[Vw].prototype);var Vw;dce(Zht)});var yce=P(()=>{"use strict";p();var pce=Qe(),gce=cD(),Hht=dD(),Ny=Sv(),mce=Si(),Kht=Nn(),Xht=xt(),pD=Xht("iterator"),mD=Ny.values,vce=function(e,t){if(e){if(e[pD]!==mD)try{mce(e,pD,mD)}catch(u){e[pD]=mD}if(Kht(e,t,!0),gce[t]){for(var n in Ny)if(e[n]!==Ny[n])try{mce(e,n,Ny[n])}catch(u){e[n]=Ny[n]}}}};for(Gw in gce)vce(pce[Gw]&&pce[Gw].prototype,Gw);var Gw;vce(Hht,"DOMTokenList")});var gD=P((T7t,_ce)=>{"use strict";p();_ce.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Cce=P(()=>{"use strict";p();var Yht=K(),Hw=wt(),Jht=VP(),wD=Ue(),Qht=ei(),SD=ea(),Kw=gr().f,edt=or(),Zw=wr(),Ww=Dt(),tdt=In(),rdt=rt(),wce=C2(),xce=ph(),_p=gD(),idt=mb(),Sce=rr(),TD=pt(),Tce=Yt(),xp="DOMException",bD="DATA_CLONE_ERR",Yw=Hw("Error"),El=Hw(xp)||function(){try{var e=Hw("MessageChannel")||Jht("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===bD&&t.code===25)return t.constructor}}(),ndt=El&&El.prototype,Ece=Yw.prototype,adt=Sce.set,odt=Sce.getterFor(xp),sdt="stack"in new Yw(xp),Ice=function(e){return Ww(_p,e)&&_p[e].m?_p[e].c:0},ED=function(){tdt(this,jy);var t=arguments.length,n=xce(t<1?void 0:arguments[0]),u=xce(t<2?void 0:arguments[1],"Error"),c=Ice(u);if(adt(this,{type:xp,name:u,message:n,code:c}),TD||(this.name=u,this.message=n,this.code=c),sdt){var a=new Yw(n);a.name=xp,Kw(this,"stack",SD(1,idt(a.stack,1)))}},jy=ED.prototype=Qht(Ece),qce=function(e){return{enumerable:!0,configurable:!0,get:e}},vD=function(e){return qce(function(){return odt(this)[e]})};TD&&(Zw(jy,"code",vD("code")),Zw(jy,"message",vD("message")),Zw(jy,"name",vD("name")));Kw(jy,"constructor",SD(1,ED));var Jw=wD(function(){return!(new El instanceof Yw)}),Pce=Jw||wD(function(){return Ece.toString!==wce||String(new El(1,2))!=="2: 1"}),Ace=Jw||wD(function(){return new El(1,"DataCloneError").code!==25}),ldt=Jw||El[bD]!==25||ndt[bD]!==25,bce=Tce?Pce||Ace||ldt:Jw;Yht({global:!0,constructor:!0,forced:bce},{DOMException:bce?ED:El});var Uy=Hw(xp),Xw=Uy.prototype;Pce&&(Tce||El===Uy)&&edt(Xw,"toString",wce);Ace&&TD&&El===Uy&&Zw(Xw,"code",qce(function(){return Ice(rdt(this).name)}));for(yD in _p)Ww(_p,yD)&&(_D=_p[yD],By=_D.s,xD=SD(6,_D.c),Ww(Uy,By)||Kw(Uy,By,xD),Ww(Xw,By)||Kw(Xw,By,xD));var _D,By,xD,yD});var zce=P(()=>{"use strict";p();var udt=K(),cdt=Qe(),OD=wt(),MD=ea(),RD=gr().f,Mce=Dt(),hdt=In(),ddt=Lu(),Rce=ph(),ID=gD(),fdt=mb(),pdt=pt(),Dce=Yt(),Vy="DOMException",Lce=OD("Error"),Gy=OD(Vy),kD=function(){hdt(this,mdt);var t=arguments.length,n=Rce(t<1?void 0:arguments[0]),u=Rce(t<2?void 0:arguments[1],"Error"),c=new Gy(n,u),a=new Lce(n);return a.name=Vy,RD(c,"stack",MD(1,fdt(a.stack,1))),ddt(c,this,kD),c},mdt=kD.prototype=Gy.prototype,gdt="stack"in new Lce(Vy),vdt="stack"in new Gy(1,2),qD=Gy&&pdt&&Object.getOwnPropertyDescriptor(cdt,Vy),ydt=!!qD&&!(qD.writable&&qD.configurable),Oce=gdt&&!ydt&&!vdt;udt({global:!0,constructor:!0,forced:Dce||Oce},{DOMException:Oce?kD:Gy});var $y=OD(Vy),kce=$y.prototype;if(kce.constructor!==$y){Dce||RD(kce,"constructor",MD(1,$y));for(PD in ID)Mce(ID,PD)&&(AD=ID[PD],CD=AD.s,Mce($y,CD)||RD($y,CD,MD(6,AD.c)))}var AD,CD,PD});var Nce=P(()=>{"use strict";p();var _dt=wt(),xdt=Nn(),Fce="DOMException";xdt(_dt(Fce),Fce)});var jce=P(()=>{"use strict";p();var bdt=K(),wdt=Qe(),Bce=Hv().clear;bdt({global:!0,bind:!0,enumerable:!0,forced:wdt.clearImmediate!==Bce},{clearImmediate:Bce})});var Qw=P((F7t,$ce)=>{"use strict";p();var Uce=Qe(),Sdt=cn(),Tdt=kt(),Edt=Iv(),Idt=Po(),qdt=ia(),Pdt=Ra(),Adt=Uce.Function,Cdt=/MSIE .\./.test(Idt)||Edt==="BUN"&&function(){var e=Uce.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();$ce.exports=function(e,t){var n=t?2:1;return Cdt?function(u,c){var a=Pdt(arguments.length,1)>n,x=Tdt(u)?u:Adt(u),S=a?qdt(arguments,n):[],A=a?function(){Sdt(x,this,S)}:x;return t?e(A,c):e(A)}:e}});var Wce=P(()=>{"use strict";p();var Mdt=K(),Zce=Qe(),Vce=Hv().set,Rdt=Qw(),Gce=Zce.setImmediate?Rdt(Vce,!1):Vce;Mdt({global:!0,bind:!0,enumerable:!0,forced:Zce.setImmediate!==Gce},{setImmediate:Gce})});var Hce=P(()=>{"use strict";p();jce();Wce()});var Kce=P(()=>{"use strict";p();var Odt=K(),kdt=Qe(),Ddt=GC(),Ldt=St(),zdt=Ra(),Fdt=Ue(),Ndt=pt(),Bdt=Fdt(function(){return Ndt&&Object.getOwnPropertyDescriptor(kdt,"queueMicrotask").value.length!==1});Odt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:Bdt},{queueMicrotask:function(t){zdt(arguments.length,1),Ddt(Ldt(t))}})});var Yce=P(()=>{"use strict";p();var jdt=K(),ac=Qe(),Udt=wr(),$dt=pt(),Vdt=TypeError,Gdt=Object.defineProperty,Xce=ac.self!==ac;try{$dt?(eS=Object.getOwnPropertyDescriptor(ac,"self"),(Xce||!eS||!eS.get||!eS.enumerable)&&Udt(ac,"self",{get:function(){return ac},set:function(t){if(this!==ac)throw new Vdt("Illegal invocation");Gdt(ac,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):jdt({global:!0,simple:!0,forced:Xce},{self:ac})}catch(e){}var eS});var lhe=P(()=>{"use strict";p();var Zdt=Yt(),Wdt=K(),mn=Qe(),Wy=wt(),Ky=Fe(),BD=Ue(),Hdt=Mu(),wp=kt(),Kdt=ko(),Xdt=ta(),aS=_t(),Ydt=dl(),Jdt=Fr(),ehe=rt(),iS=Fn(),Qdt=Dt(),eft=to(),DD=Si(),tS=Ht(),tft=Ra(),rft=Jf(),oS=Di(),jD=Wi(),ift=oa(),Jce=YP(),nft=I2(),UD=Zb(),Zy=mn.Object,aft=mn.Array,the=mn.Date,rhe=mn.Error,oft=mn.TypeError,sft=mn.PerformanceMark,kh=Wy("DOMException"),FD=oS.Map,$D=oS.has,ihe=oS.get,nS=oS.set,nhe=jD.Set,ahe=jD.add,lft=jD.has,uft=Wy("Object","keys"),cft=Ky([].push),hft=Ky((!0).valueOf),dft=Ky(1 .valueOf),fft=Ky("".valueOf),pft=Ky(the.prototype.getTime),ND=Hdt("structuredClone"),Hy="DataCloneError",rS="Transferring",ohe=function(e){return!BD(function(){var t=new mn.Set([7]),n=e(t),u=e(Zy(7));return n===t||!n.has(7)||!aS(u)||+u!=7})&&e},Qce=function(e,t){return!BD(function(){var n=new t,u=e({a:n,b:n});return!(u&&u.a===u.b&&u.a instanceof t&&u.a.stack===n.stack)})},mft=function(e){return!BD(function(){var t=e(new mn.AggregateError([1],ND,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==ND||t.cause!==3})},bp=mn.structuredClone,gft=Zdt||!Qce(bp,rhe)||!Qce(bp,kh)||!mft(bp),vft=!bp&&ohe(function(e){return new sft(ND,{detail:e}).detail}),Il=ohe(bp)||vft,LD=function(e){throw new kh("Uncloneable type: "+e,Hy)},ua=function(e,t){throw new kh((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",Hy)},zD=function(e,t){return Il||ua(t),Il(e)},yft=function(){var e;try{e=new mn.DataTransfer}catch(t){try{e=new mn.ClipboardEvent("").clipboardData}catch(n){}}return e&&e.items&&e.files?e:null},she=function(e,t,n){if($D(t,e))return ihe(t,e);var u=n||iS(e),c,a,x,S,A,R;if(u==="SharedArrayBuffer")Il?c=Il(e):c=e;else{var D=mn.DataView;!D&&!wp(e.slice)&&ua("ArrayBuffer");try{if(wp(e.slice)&&!e.resizable)c=e.slice(0);else for(a=e.byteLength,x=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,c=new ArrayBuffer(a,x),S=new D(e),A=new D(c),R=0;R<a;R++)A.setUint8(R,S.getUint8(R))}catch(L){throw new kh("ArrayBuffer is detached",Hy)}}return nS(t,e,c),c},_ft=function(e,t,n,u,c){var a=mn[t];return aS(a)||ua(t),new a(she(e.buffer,c),n,u)},pn=function(e,t){if(Ydt(e)&&LD("Symbol"),!aS(e))return e;if(t){if($D(t,e))return ihe(t,e)}else t=new FD;var n=iS(e),u,c,a,x,S,A,R,D;switch(n){case"Array":a=aft(tS(e));break;case"Object":a={};break;case"Map":a=new FD;break;case"Set":a=new nhe;break;case"RegExp":a=new RegExp(e.source,rft(e));break;case"Error":switch(c=e.name,c){case"AggregateError":a=new(Wy(c))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":a=new(Wy(c));break;case"CompileError":case"LinkError":case"RuntimeError":a=new(Wy("WebAssembly",c));break;default:a=new rhe}break;case"DOMException":a=new kh(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":a=she(e,t,n);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":A=n==="DataView"?e.byteLength:e.length,a=_ft(e,n,e.byteOffset,A,t);break;case"DOMQuad":try{a=new DOMQuad(pn(e.p1,t),pn(e.p2,t),pn(e.p3,t),pn(e.p4,t))}catch(L){a=zD(e,n)}break;case"File":if(Il)try{a=Il(e),iS(a)!==n&&(a=void 0)}catch(L){}if(!a)try{a=new File([e],e.name,e)}catch(L){}a||ua(n);break;case"FileList":if(x=yft(),x){for(S=0,A=tS(e);S<A;S++)x.items.add(pn(e[S],t));a=x.files}else a=zD(e,n);break;case"ImageData":try{a=new ImageData(pn(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(L){a=zD(e,n)}break;default:if(Il)a=Il(e);else switch(n){case"BigInt":a=Zy(e.valueOf());break;case"Boolean":a=Zy(hft(e));break;case"Number":a=Zy(dft(e));break;case"String":a=Zy(fft(e));break;case"Date":a=new the(pft(e));break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(L){ua(n)}break;case"DOMPoint":case"DOMPointReadOnly":u=mn[n];try{a=u.fromPoint?u.fromPoint(e):new u(e.x,e.y,e.z,e.w)}catch(L){ua(n)}break;case"DOMRect":case"DOMRectReadOnly":u=mn[n];try{a=u.fromRect?u.fromRect(e):new u(e.x,e.y,e.width,e.height)}catch(L){ua(n)}break;case"DOMMatrix":case"DOMMatrixReadOnly":u=mn[n];try{a=u.fromMatrix?u.fromMatrix(e):new u(e)}catch(L){ua(n)}break;case"AudioData":case"VideoFrame":wp(e.clone)||ua(n);try{a=e.clone()}catch(L){LD(n)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ua(n);default:LD(n)}}switch(nS(t,e,a),n){case"Array":case"Object":for(R=uft(e),S=0,A=tS(R);S<A;S++)D=R[S],eft(a,D,pn(e[D],t));break;case"Map":e.forEach(function(L,H){nS(a,pn(H,t),pn(L,t))});break;case"Set":e.forEach(function(L){ahe(a,pn(L,t))});break;case"Error":DD(a,"message",pn(e.message,t)),Qdt(e,"cause")&&DD(a,"cause",pn(e.cause,t)),c==="AggregateError"?a.errors=pn(e.errors,t):c==="SuppressedError"&&(a.error=pn(e.error,t),a.suppressed=pn(e.suppressed,t));case"DOMException":nft&&DD(a,"stack",pn(e.stack,t))}return a},xft=function(e,t){if(!aS(e))throw new oft("Transfer option cannot be converted to a sequence");var n=[];Jdt(e,function(H){cft(n,ehe(H))});for(var u=0,c=tS(n),a=new nhe,x,S,A,R,D,L;u<c;){if(x=n[u++],S=iS(x),S==="ArrayBuffer"?lft(a,x):$D(t,x))throw new kh("Duplicate transferable",Hy);if(S==="ArrayBuffer"){ahe(a,x);continue}if(UD)R=bp(x,{transfer:[x]});else switch(S){case"ImageBitmap":A=mn.OffscreenCanvas,Kdt(A)||ua(S,rS);try{D=new A(x.width,x.height),L=D.getContext("bitmaprenderer"),L.transferFromImageBitmap(x),R=D.transferToImageBitmap()}catch(H){}break;case"AudioData":case"VideoFrame":(!wp(x.clone)||!wp(x.close))&&ua(S,rS);try{R=x.clone(),x.close()}catch(H){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":ua(S,rS)}if(R===void 0)throw new kh("This object cannot be transferred: "+S,Hy);nS(t,x,R)}return a},bft=function(e){ift(e,function(t){UD?Il(t,{transfer:[t]}):wp(t.transfer)?t.transfer():Jce?Jce(t):ua("ArrayBuffer",rS)})};Wdt({global:!0,enumerable:!0,sham:!UD,forced:gft},{structuredClone:function(t){var n=tft(arguments.length,1)>1&&!Xdt(arguments[1])?ehe(arguments[1]):void 0,u=n?n.transfer:void 0,c,a;u!==void 0&&(c=new FD,a=xft(u,c));var x=pn(t,c);return a&&bft(a),x}})});var hhe=P(()=>{"use strict";p();var wft=K(),che=Qe(),Sft=Qw(),uhe=Sft(che.setInterval,!0);wft({global:!0,bind:!0,forced:che.setInterval!==uhe},{setInterval:uhe})});var phe=P(()=>{"use strict";p();var Tft=K(),fhe=Qe(),Eft=Qw(),dhe=Eft(fhe.setTimeout,!0);Tft({global:!0,bind:!0,forced:fhe.setTimeout!==dhe},{setTimeout:dhe})});var mhe=P(()=>{"use strict";p();hhe();phe()});var Xy=P((c9t,vhe)=>{"use strict";p();var Ift=Ue(),qft=xt(),Pft=pt(),ghe=Yt(),Aft=qft("iterator");vhe.exports=!Ift(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),u="";return e.pathname="c%20d",t.forEach(function(c,a){t.delete("b"),u+=a+c}),n.delete("a",2),n.delete("b",void 0),ghe&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(ghe||!Pft)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[Aft]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var Ihe=P((d9t,Ehe)=>{"use strict";p();var Dh=Fe(),VD=2147483647,Yy=36,whe=1,WD=26,Cft=38,Mft=700,Rft=72,Oft=128,kft="-",Dft=/[^\0-\u007E]/,She=/[.\u3002\uFF0E\uFF61]/g,yhe="Overflow: input needs wider integers to process",GD=Yy-whe,_he=RangeError,Lft=Dh(She.exec),Sp=Math.floor,ZD=String.fromCharCode,xhe=Dh("".charCodeAt),The=Dh([].join),oc=Dh([].push),zft=Dh("".replace),Fft=Dh("".split),Nft=Dh("".toLowerCase),Bft=function(e){for(var t=[],n=0,u=e.length;n<u;){var c=xhe(e,n++);if(c>=55296&&c<=56319&&n<u){var a=xhe(e,n++);(a&64512)===56320?oc(t,((c&1023)<<10)+(a&1023)+65536):(oc(t,c),n--)}else oc(t,c)}return t},bhe=function(e){return e+22+75*(e<26)},jft=function(e,t,n){var u=0;for(e=n?Sp(e/Mft):e>>1,e+=Sp(e/t);e>GD*WD>>1;)e=Sp(e/GD),u+=Yy;return Sp(u+(GD+1)*e/(e+Cft))},Uft=function(e){var t=[];e=Bft(e);var n=e.length,u=Oft,c=0,a=Rft,x,S;for(x=0;x<e.length;x++)S=e[x],S<128&&oc(t,ZD(S));var A=t.length,R=A;for(A&&oc(t,kft);R<n;){var D=VD;for(x=0;x<e.length;x++)S=e[x],S>=u&&S<D&&(D=S);var L=R+1;if(D-u>Sp((VD-c)/L))throw new _he(yhe);for(c+=(D-u)*L,u=D,x=0;x<e.length;x++){if(S=e[x],S<u&&++c>VD)throw new _he(yhe);if(S===u){for(var H=c,ce=Yy;;){var de=ce<=a?whe:ce>=a+WD?WD:ce-a;if(H<de)break;var ve=H-de,X=Yy-de;oc(t,ZD(bhe(de+ve%X))),H=Sp(ve/X),ce+=Yy}oc(t,ZD(bhe(H))),a=jft(c,L,R===A),c=0,R++}}c++,u++}return The(t,"")};Ehe.exports=function(e){var t=[],n=Fft(zft(Nft(e),She,"."),"."),u,c;for(u=0;u<n.length;u++)c=n[u],oc(t,Lft(Dft,c)?"xn--"+Uft(c):c);return The(t,".")}});var rL=P((p9t,Khe)=>{"use strict";p();Sv();JM();var QD=K(),Nhe=Qe(),eL=FC(),$ft=wt(),sS=et(),Fo=Fe(),Jy=pt(),Bhe=Xy(),jhe=or(),Vft=wr(),Gft=io(),Zft=Nn(),Wft=Bu(),tL=rr(),Uhe=In(),HD=kt(),Hft=Dt(),Kft=dr(),Xft=Fn(),Yft=rt(),$he=_t(),jn=It(),Jft=ei(),qhe=ea(),Phe=zu(),Qft=xs(),lS=ki(),Tp=Ra(),ept=xt(),tpt=Rb(),rpt=ept("iterator"),Ip="URLSearchParams",Vhe=Ip+"Iterator",Ghe=tL.set,oo=tL.getterFor(Ip),ipt=tL.getterFor(Vhe),Ahe=eL("fetch"),hS=eL("Request"),Qy=eL("Headers"),KD=hS&&hS.prototype,Che=Qy&&Qy.prototype,npt=Nhe.TypeError,apt=Nhe.encodeURIComponent,opt=String.fromCharCode,spt=$ft("String","fromCodePoint"),lpt=parseInt,cS=Fo("".charAt),Mhe=Fo([].join),sc=Fo([].push),Zhe=Fo("".replace),upt=Fo([].shift),Rhe=Fo([].splice),Ohe=Fo("".split),Whe=Fo("".slice),cpt=Fo(/./.exec),hpt=/\+/g,XD="\uFFFD",dpt=/^[0-9a-f]+$/i,khe=function(e,t){var n=Whe(e,t,t+2);return cpt(dpt,n)?lpt(n,16):NaN},fpt=function(e){for(var t=0,n=128;n>0&&(e&n)!==0;n>>=1)t++;return t},ppt=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},Dhe=function(e){e=Zhe(e,hpt," ");for(var t=e.length,n="",u=0;u<t;){var c=cS(e,u);if(c==="%"){if(cS(e,u+1)==="%"||u+3>t){n+="%",u++;continue}var a=khe(e,u+1);if(a!==a){n+=c,u++;continue}u+=2;var x=fpt(a);if(x===0)c=opt(a);else{if(x===1||x>4){n+=XD,u++;continue}for(var S=[a],A=1;A<x&&(u++,!(u+3>t||cS(e,u)!=="%"));){var R=khe(e,u+1);if(R!==R){u+=3;break}if(R>191||R<128)break;sc(S,R),u+=2,A++}if(S.length!==x){n+=XD;continue}var D=ppt(S);D===null?n+=XD:c=spt(D)}}n+=c,u++}return n},mpt=/[!'()~]|%20/g,gpt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},vpt=function(e){return gpt[e]},Lhe=function(e){return Zhe(apt(e),mpt,vpt)},YD=Wft(function(t,n){Ghe(this,{type:Vhe,target:oo(t).entries,index:0,kind:n})},Ip,function(){var t=ipt(this),n=t.target,u=t.index++;if(!n||u>=n.length)return t.target=null,lS(void 0,!0);var c=n[u];switch(t.kind){case"keys":return lS(c.key,!1);case"values":return lS(c.value,!1)}return lS([c.key,c.value],!1)},!0),Hhe=function(e){this.entries=[],this.url=null,e!==void 0&&($he(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?cS(e,0)==="?"?Whe(e,1):e:jn(e)))};Hhe.prototype={type:Ip,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,n=Qft(e),u,c,a,x,S,A,R;if(n)for(u=Phe(e,n),c=u.next;!(a=sS(c,u)).done;){if(x=Phe(Yft(a.value)),S=x.next,(A=sS(S,x)).done||(R=sS(S,x)).done||!sS(S,x).done)throw new npt("Expected sequence with length 2");sc(t,{key:jn(A.value),value:jn(R.value)})}else for(var D in e)Hft(e,D)&&sc(t,{key:D,value:jn(e[D])})},parseQuery:function(e){if(e)for(var t=this.entries,n=Ohe(e,"&"),u=0,c,a;u<n.length;)c=n[u++],c.length&&(a=Ohe(c,"="),sc(t,{key:Dhe(upt(a)),value:Dhe(Mhe(a,"="))}))},serialize:function(){for(var e=this.entries,t=[],n=0,u;n<e.length;)u=e[n++],sc(t,Lhe(u.key)+"="+Lhe(u.value));return Mhe(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var dS=function(){Uhe(this,Ep);var t=arguments.length>0?arguments[0]:void 0,n=Ghe(this,new Hhe(t));Jy||(this.size=n.entries.length)},Ep=dS.prototype;Gft(Ep,{append:function(t,n){var u=oo(this);Tp(arguments.length,2),sc(u.entries,{key:jn(t),value:jn(n)}),Jy||this.length++,u.updateURL()},delete:function(e){for(var t=oo(this),n=Tp(arguments.length,1),u=t.entries,c=jn(e),a=n<2?void 0:arguments[1],x=a===void 0?a:jn(a),S=0;S<u.length;){var A=u[S];if(A.key===c&&(x===void 0||A.value===x)){if(Rhe(u,S,1),x!==void 0)break}else S++}Jy||(this.size=u.length),t.updateURL()},get:function(t){var n=oo(this).entries;Tp(arguments.length,1);for(var u=jn(t),c=0;c<n.length;c++)if(n[c].key===u)return n[c].value;return null},getAll:function(t){var n=oo(this).entries;Tp(arguments.length,1);for(var u=jn(t),c=[],a=0;a<n.length;a++)n[a].key===u&&sc(c,n[a].value);return c},has:function(t){for(var n=oo(this).entries,u=Tp(arguments.length,1),c=jn(t),a=u<2?void 0:arguments[1],x=a===void 0?a:jn(a),S=0;S<n.length;){var A=n[S++];if(A.key===c&&(x===void 0||A.value===x))return!0}return!1},set:function(t,n){var u=oo(this);Tp(arguments.length,1);for(var c=u.entries,a=!1,x=jn(t),S=jn(n),A=0,R;A<c.length;A++)R=c[A],R.key===x&&(a?Rhe(c,A--,1):(a=!0,R.value=S));a||sc(c,{key:x,value:S}),Jy||(this.size=c.length),u.updateURL()},sort:function(){var t=oo(this);tpt(t.entries,function(n,u){return n.key>u.key?1:-1}),t.updateURL()},forEach:function(t){for(var n=oo(this).entries,u=Kft(t,arguments.length>1?arguments[1]:void 0),c=0,a;c<n.length;)a=n[c++],u(a.value,a.key,this)},keys:function(){return new YD(this,"keys")},values:function(){return new YD(this,"values")},entries:function(){return new YD(this,"entries")}},{enumerable:!0});jhe(Ep,rpt,Ep.entries,{name:"entries"});jhe(Ep,"toString",function(){return oo(this).serialize()},{enumerable:!0});Jy&&Vft(Ep,"size",{get:function(){return oo(this).entries.length},configurable:!0,enumerable:!0});Zft(dS,Ip);QD({global:!0,constructor:!0,forced:!Bhe},{URLSearchParams:dS});!Bhe&&HD(Qy)&&(zhe=Fo(Che.has),Fhe=Fo(Che.set),JD=function(e){if($he(e)){var t=e.body,n;if(Xft(t)===Ip)return n=e.headers?new Qy(e.headers):new Qy,zhe(n,"content-type")||Fhe(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Jft(e,{body:qhe(0,jn(t)),headers:qhe(0,n)})}return e},HD(Ahe)&&QD({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return Ahe(t,arguments.length>1?JD(arguments[1]):{})}}),HD(hS)&&(uS=function(t){return Uhe(this,KD),new hS(t,arguments.length>1?JD(arguments[1]):{})},KD.constructor=uS,uS.prototype=KD,QD({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:uS})));var zhe,Fhe,JD,uS;Khe.exports={URLSearchParams:dS,getState:oo}});var fde=P(()=>{"use strict";p();eR();var ypt=K(),_L=pt(),_pt=Xy(),xL=Qe(),Xhe=dr(),ho=Fe(),vS=or(),so=wr(),xpt=In(),gL=Dt(),bL=xC(),qp=H2(),No=ia(),bpt=Ih().codeAt,wpt=Ihe(),Pl=It(),Spt=Nn(),Tpt=Ra(),sde=rL(),lde=rr(),Ept=lde.set,yS=lde.getterFor("URL"),Ipt=sde.URLSearchParams,qpt=sde.getState,e_=xL.URL,vL=xL.TypeError,_S=xL.parseInt,Ppt=Math.floor,Yhe=Math.pow,co=ho("".charAt),Bo=ho(/./.exec),r_=ho([].join),Apt=ho(1 .toString),Cpt=ho([].pop),Ap=ho([].push),iL=ho("".replace),Mpt=ho([].shift),Rpt=ho("".split),n_=ho("".slice),xS=ho("".toLowerCase),Opt=ho([].unshift),kpt="Invalid authority",nL="Invalid scheme",Lh="Invalid host",Jhe="Invalid port",ude=/[a-z]/i,Dpt=/[\d+-.a-z]/i,yL=/\d/,Lpt=/^0x/i,zpt=/^[0-7]+$/,Fpt=/^\d+$/,cde=/^[\da-f]+$/i,Npt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,Bpt=/[\0\t\n\r #/:<>?@[\\\]^|]/,jpt=/^[\u0000-\u0020]+/,Upt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,$pt=/[\t\n\r]/g,lo,Vpt=function(e){var t=Rpt(e,"."),n,u,c,a,x,S,A;if(t.length&&t[t.length-1]===""&&t.length--,n=t.length,n>4)return e;for(u=[],c=0;c<n;c++){if(a=t[c],a==="")return e;if(x=10,a.length>1&&co(a,0)==="0"&&(x=Bo(Lpt,a)?16:8,a=n_(a,x===8?1:2)),a==="")S=0;else{if(!Bo(x===10?Fpt:x===8?zpt:cde,a))return e;S=_S(a,x)}Ap(u,S)}for(c=0;c<n;c++)if(S=u[c],c===n-1){if(S>=Yhe(256,5-n))return null}else if(S>255)return null;for(A=Cpt(u),c=0;c<u.length;c++)A+=u[c]*Yhe(256,3-c);return A},Gpt=function(e){var t=[0,0,0,0,0,0,0,0],n=0,u=null,c=0,a,x,S,A,R,D,L,H=function(){return co(e,c)};if(H()===":"){if(co(e,1)!==":")return;c+=2,n++,u=n}for(;H();){if(n===8)return;if(H()===":"){if(u!==null)return;c++,n++,u=n;continue}for(a=x=0;x<4&&Bo(cde,H());)a=a*16+_S(H(),16),c++,x++;if(H()==="."){if(x===0||(c-=x,n>6))return;for(S=0;H();){if(A=null,S>0)if(H()==="."&&S<4)c++;else return;if(!Bo(yL,H()))return;for(;Bo(yL,H());){if(R=_S(H(),10),A===null)A=R;else{if(A===0)return;A=A*10+R}if(A>255)return;c++}t[n]=t[n]*256+A,S++,(S===2||S===4)&&n++}if(S!==4)return;break}else if(H()===":"){if(c++,!H())return}else if(H())return;t[n++]=a}if(u!==null)for(D=n-u,n=7;n!==0&&D>0;)L=t[n],t[n--]=t[u+D-1],t[u+--D]=L;else if(n!==8)return;return t},Zpt=function(e){for(var t=null,n=1,u=null,c=0,a=0;a<8;a++)e[a]!==0?(c>n&&(t=u,n=c),u=null,c=0):(u===null&&(u=a),++c);return c>n?u:t},t_=function(e){var t,n,u,c;if(typeof e=="number"){for(t=[],n=0;n<4;n++)Opt(t,e%256),e=Ppt(e/256);return r_(t,".")}if(typeof e=="object"){for(t="",u=Zpt(e),n=0;n<8;n++)c&&e[n]===0||(c&&(c=!1),u===n?(t+=n?":":"::",c=!0):(t+=Apt(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},gS={},hde=bL({},gS,{" ":1,"\"":1,"<":1,">":1,"`":1}),dde=bL({},hde,{"#":1,"?":1,"{":1,"}":1}),aL=bL({},dde,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),lc=function(e,t){var n=bpt(e,0);return n>32&&n<127&&!gL(t,e)?e:encodeURIComponent(e)},fS={ftp:21,file:null,http:80,https:443,ws:80,wss:443},i_=function(e,t){var n;return e.length===2&&Bo(ude,co(e,0))&&((n=co(e,1))===":"||!t&&n==="|")},Qhe=function(e){var t;return e.length>1&&i_(n_(e,0,2))&&(e.length===2||(t=co(e,2))==="/"||t==="\\"||t==="?"||t==="#")},Wpt=function(e){return e==="."||xS(e)==="%2e"},Hpt=function(e){return e=xS(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},oL={},ede={},sL={},tde={},rde={},lL={},ide={},nde={},pS={},mS={},uL={},cL={},hL={},dL={},ade={},fL={},Pp={},Ms={},ode={},zh={},ql={},wL=function(e,t,n){var u=Pl(e),c,a,x;if(t){if(a=this.parse(u),a)throw new vL(a);this.searchParams=null}else{if(n!==void 0&&(c=new wL(n,!0)),a=this.parse(u,null,c),a)throw new vL(a);x=qpt(new Ipt),x.bindURL(this),this.searchParams=x}};wL.prototype={type:"URL",parse:function(e,t,n){var u=this,c=t||oL,a=0,x="",S=!1,A=!1,R=!1,D,L,H,ce;for(e=Pl(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=iL(e,jpt,""),e=iL(e,Upt,"$1")),e=iL(e,$pt,""),D=qp(e);a<=D.length;){switch(L=D[a],c){case oL:if(L&&Bo(ude,L))x+=xS(L),c=ede;else{if(t)return nL;c=sL;continue}break;case ede:if(L&&(Bo(Dpt,L)||L==="+"||L==="-"||L==="."))x+=xS(L);else if(L===":"){if(t&&(u.isSpecial()!==gL(fS,x)||x==="file"&&(u.includesCredentials()||u.port!==null)||u.scheme==="file"&&!u.host))return;if(u.scheme=x,t){u.isSpecial()&&fS[u.scheme]===u.port&&(u.port=null);return}x="",u.scheme==="file"?c=dL:u.isSpecial()&&n&&n.scheme===u.scheme?c=tde:u.isSpecial()?c=nde:D[a+1]==="/"?(c=rde,a++):(u.cannotBeABaseURL=!0,Ap(u.path,""),c=ode)}else{if(t)return nL;x="",c=sL,a=0;continue}break;case sL:if(!n||n.cannotBeABaseURL&&L!=="#")return nL;if(n.cannotBeABaseURL&&L==="#"){u.scheme=n.scheme,u.path=No(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,c=ql;break}c=n.scheme==="file"?dL:lL;continue;case tde:if(L==="/"&&D[a+1]==="/")c=pS,a++;else{c=lL;continue}break;case rde:if(L==="/"){c=mS;break}else{c=Ms;continue}case lL:if(u.scheme=n.scheme,L===lo)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=No(n.path),u.query=n.query;else if(L==="/"||L==="\\"&&u.isSpecial())c=ide;else if(L==="?")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=No(n.path),u.query="",c=zh;else if(L==="#")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=No(n.path),u.query=n.query,u.fragment="",c=ql;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=No(n.path),u.path.length--,c=Ms;continue}break;case ide:if(u.isSpecial()&&(L==="/"||L==="\\"))c=pS;else if(L==="/")c=mS;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,c=Ms;continue}break;case nde:if(c=pS,L!=="/"||co(x,a+1)!=="/")continue;a++;break;case pS:if(L!=="/"&&L!=="\\"){c=mS;continue}break;case mS:if(L==="@"){S&&(x="%40"+x),S=!0,H=qp(x);for(var de=0;de<H.length;de++){var ve=H[de];if(ve===":"&&!R){R=!0;continue}var X=lc(ve,aL);R?u.password+=X:u.username+=X}x=""}else if(L===lo||L==="/"||L==="?"||L==="#"||L==="\\"&&u.isSpecial()){if(S&&x==="")return kpt;a-=qp(x).length+1,x="",c=uL}else x+=L;break;case uL:case cL:if(t&&u.scheme==="file"){c=fL;continue}else if(L===":"&&!A){if(x==="")return Lh;if(ce=u.parseHost(x),ce)return ce;if(x="",c=hL,t===cL)return}else if(L===lo||L==="/"||L==="?"||L==="#"||L==="\\"&&u.isSpecial()){if(u.isSpecial()&&x==="")return Lh;if(t&&x===""&&(u.includesCredentials()||u.port!==null))return;if(ce=u.parseHost(x),ce)return ce;if(x="",c=Pp,t)return;continue}else L==="["?A=!0:L==="]"&&(A=!1),x+=L;break;case hL:if(Bo(yL,L))x+=L;else if(L===lo||L==="/"||L==="?"||L==="#"||L==="\\"&&u.isSpecial()||t){if(x!==""){var ee=_S(x,10);if(ee>65535)return Jhe;u.port=u.isSpecial()&&ee===fS[u.scheme]?null:ee,x=""}if(t)return;c=Pp;continue}else return Jhe;break;case dL:if(u.scheme="file",L==="/"||L==="\\")c=ade;else if(n&&n.scheme==="file")switch(L){case lo:u.host=n.host,u.path=No(n.path),u.query=n.query;break;case"?":u.host=n.host,u.path=No(n.path),u.query="",c=zh;break;case"#":u.host=n.host,u.path=No(n.path),u.query=n.query,u.fragment="",c=ql;break;default:Qhe(r_(No(D,a),""))||(u.host=n.host,u.path=No(n.path),u.shortenPath()),c=Ms;continue}else{c=Ms;continue}break;case ade:if(L==="/"||L==="\\"){c=fL;break}n&&n.scheme==="file"&&!Qhe(r_(No(D,a),""))&&(i_(n.path[0],!0)?Ap(u.path,n.path[0]):u.host=n.host),c=Ms;continue;case fL:if(L===lo||L==="/"||L==="\\"||L==="?"||L==="#"){if(!t&&i_(x))c=Ms;else if(x===""){if(u.host="",t)return;c=Pp}else{if(ce=u.parseHost(x),ce)return ce;if(u.host==="localhost"&&(u.host=""),t)return;x="",c=Pp}continue}else x+=L;break;case Pp:if(u.isSpecial()){if(c=Ms,L!=="/"&&L!=="\\")continue}else if(!t&&L==="?")u.query="",c=zh;else if(!t&&L==="#")u.fragment="",c=ql;else if(L!==lo&&(c=Ms,L!=="/"))continue;break;case Ms:if(L===lo||L==="/"||L==="\\"&&u.isSpecial()||!t&&(L==="?"||L==="#")){if(Hpt(x)?(u.shortenPath(),L!=="/"&&!(L==="\\"&&u.isSpecial())&&Ap(u.path,"")):Wpt(x)?L!=="/"&&!(L==="\\"&&u.isSpecial())&&Ap(u.path,""):(u.scheme==="file"&&!u.path.length&&i_(x)&&(u.host&&(u.host=""),x=co(x,0)+":"),Ap(u.path,x)),x="",u.scheme==="file"&&(L===lo||L==="?"||L==="#"))for(;u.path.length>1&&u.path[0]==="";)Mpt(u.path);L==="?"?(u.query="",c=zh):L==="#"&&(u.fragment="",c=ql)}else x+=lc(L,dde);break;case ode:L==="?"?(u.query="",c=zh):L==="#"?(u.fragment="",c=ql):L!==lo&&(u.path[0]+=lc(L,gS));break;case zh:!t&&L==="#"?(u.fragment="",c=ql):L!==lo&&(L==="'"&&u.isSpecial()?u.query+="%27":L==="#"?u.query+="%23":u.query+=lc(L,gS));break;case ql:L!==lo&&(u.fragment+=lc(L,hde));break}a++}},parseHost:function(e){var t,n,u;if(co(e,0)==="["){if(co(e,e.length-1)!=="]"||(t=Gpt(n_(e,1,-1)),!t))return Lh;this.host=t}else if(this.isSpecial()){if(e=wpt(e),Bo(Npt,e)||(t=Vpt(e),t===null))return Lh;this.host=t}else{if(Bo(Bpt,e))return Lh;for(t="",n=qp(e),u=0;u<n.length;u++)t+=lc(n[u],gS);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return gL(fS,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!i_(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,u=e.password,c=e.host,a=e.port,x=e.path,S=e.query,A=e.fragment,R=t+":";return c!==null?(R+="//",e.includesCredentials()&&(R+=n+(u?":"+u:"")+"@"),R+=t_(c),a!==null&&(R+=":"+a)):t==="file"&&(R+="//"),R+=e.cannotBeABaseURL?x[0]:x.length?"/"+r_(x,"/"):"",S!==null&&(R+="?"+S),A!==null&&(R+="#"+A),R},setHref:function(e){var t=this.parse(e);if(t)throw new vL(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Cp(e.path[0]).origin}catch(n){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+t_(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Pl(e)+":",oL)},getUsername:function(){return this.username},setUsername:function(e){var t=qp(Pl(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=lc(t[n],aL)}},getPassword:function(){return this.password},setPassword:function(e){var t=qp(Pl(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=lc(t[n],aL)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?t_(e):t_(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,uL)},getHostname:function(){var e=this.host;return e===null?"":t_(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,cL)},getPort:function(){var e=this.port;return e===null?"":Pl(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Pl(e),e===""?this.port=null:this.parse(e,hL))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+r_(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Pp))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Pl(e),e===""?this.query=null:(co(e,0)==="?"&&(e=n_(e,1)),this.query="",this.parse(e,zh)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Pl(e),e===""){this.fragment=null;return}co(e,0)==="#"&&(e=n_(e,1)),this.fragment="",this.parse(e,ql)},update:function(){this.query=this.searchParams.serialize()||null}};var Cp=function(t){var n=xpt(this,Un),u=Tpt(arguments.length,1)>1?arguments[1]:void 0,c=Ept(n,new wL(t,!1,u));_L||(n.href=c.serialize(),n.origin=c.getOrigin(),n.protocol=c.getProtocol(),n.username=c.getUsername(),n.password=c.getPassword(),n.host=c.getHost(),n.hostname=c.getHostname(),n.port=c.getPort(),n.pathname=c.getPathname(),n.search=c.getSearch(),n.searchParams=c.getSearchParams(),n.hash=c.getHash())},Un=Cp.prototype,uo=function(e,t){return{get:function(){return yS(this)[e]()},set:t&&function(n){return yS(this)[t](n)},configurable:!0,enumerable:!0}};_L&&(so(Un,"href",uo("serialize","setHref")),so(Un,"origin",uo("getOrigin")),so(Un,"protocol",uo("getProtocol","setProtocol")),so(Un,"username",uo("getUsername","setUsername")),so(Un,"password",uo("getPassword","setPassword")),so(Un,"host",uo("getHost","setHost")),so(Un,"hostname",uo("getHostname","setHostname")),so(Un,"port",uo("getPort","setPort")),so(Un,"pathname",uo("getPathname","setPathname")),so(Un,"search",uo("getSearch","setSearch")),so(Un,"searchParams",uo("getSearchParams")),so(Un,"hash",uo("getHash","setHash")));vS(Un,"toJSON",function(){return yS(this).serialize()},{enumerable:!0});vS(Un,"toString",function(){return yS(this).serialize()},{enumerable:!0});e_&&(pL=e_.createObjectURL,mL=e_.revokeObjectURL,pL&&vS(Cp,"createObjectURL",Xhe(pL,e_)),mL&&vS(Cp,"revokeObjectURL",Xhe(mL,e_)));var pL,mL;Spt(Cp,"URL");ypt({global:!0,constructor:!0,forced:!_pt,sham:!_L},{URL:Cp})});var pde=P(()=>{"use strict";p();fde()});var vde=P(()=>{"use strict";p();var Kpt=K(),Xpt=wt(),gde=Ue(),Ypt=Ra(),mde=It(),Jpt=Xy(),SL=Xpt("URL"),Qpt=Jpt&&gde(function(){SL.canParse()}),emt=gde(function(){return SL.canParse.length!==1});Kpt({target:"URL",stat:!0,forced:!Qpt||emt},{canParse:function(t){var n=Ypt(arguments.length,1),u=mde(t),c=n<2||arguments[1]===void 0?void 0:mde(arguments[1]);try{return!!new SL(u,c)}catch(a){return!1}}})});var _de=P(()=>{"use strict";p();var tmt=K(),rmt=wt(),imt=Ra(),yde=It(),nmt=Xy(),amt=rmt("URL");tmt({target:"URL",stat:!0,forced:!nmt},{parse:function(t){var n=imt(arguments.length,1),u=yde(t),c=n<2||arguments[1]===void 0?void 0:yde(arguments[1]);try{return new amt(u,c)}catch(a){return null}}})});var xde=P(()=>{"use strict";p();var omt=K(),smt=et();omt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return smt(URL.prototype.toString,this)}})});var bde=P(()=>{"use strict";p();rL()});var Ede=P(()=>{"use strict";p();var lmt=or(),bS=Fe(),wde=It(),umt=Ra(),Tde=URLSearchParams,wS=Tde.prototype,cmt=bS(wS.append),Sde=bS(wS.delete),hmt=bS(wS.forEach),dmt=bS([].push),TL=new Tde("a=1&a=2&b=3");TL.delete("a",1);TL.delete("b",void 0);TL+""!="a=2"&&lmt(wS,"delete",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return Sde(this,e);var u=[];hmt(this,function(L,H){dmt(u,{key:H,value:L})}),umt(t,1);for(var c=wde(e),a=wde(n),x=0,S=0,A=!1,R=u.length,D;x<R;)D=u[x++],A||D.key===c?(A=!0,Sde(this,D.key)):S++;for(;S<R;)D=u[S++],D.key===c&&D.value===a||cmt(this,D.key,D.value)},{enumerable:!0,unsafe:!0})});var Ade=P(()=>{"use strict";p();var fmt=or(),qde=Fe(),pmt=It(),mmt=Ra(),Pde=URLSearchParams,EL=Pde.prototype,gmt=qde(EL.getAll),vmt=qde(EL.has),Ide=new Pde("a=1");(Ide.has("a",2)||!Ide.has("a",void 0))&&fmt(EL,"has",function(t){var n=arguments.length,u=n<2?void 0:arguments[1];if(n&&u===void 0)return vmt(this,t);var c=gmt(this,t);mmt(n,1);for(var a=pmt(u),x=0;x<c.length;)if(c[x++]===a)return!0;return!1},{enumerable:!0,unsafe:!0})});var Cde=P(()=>{"use strict";p();var ymt=pt(),_mt=Fe(),xmt=wr(),IL=URLSearchParams.prototype,bmt=_mt(IL.forEach);ymt&&!("size"in IL)&&xmt(IL,"size",{get:function(){var t=0;return bmt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var Rde=P(($9t,Mde)=>{"use strict";p();PU();DU();LU();zU();FU();NU();BU();jU();UU();$U();VU();GU();ZU();WU();HU();x6();E6();D2();G6();N2();Q6();i$();a$();l$();u$();h$();f$();V2();G2();y$();_$();w$();M$();R$();k$();D$();Sv();rV();oV();sV();uV();hV();_V();bV();SV();IV();qV();$V();ZV();WV();hP();fP();pP();YV();JV();QV();gP();C8();U8();H8();X8();LP();BP();$P();nA();aA();EG();qG();CG();MG();jG();UG();WG();YG();QG();aZ();lZ();dZ();dA();vA();wA();TA();IA();PA();kA();LA();zA();Xb();BA();UA();VA();GA();x2();VZ();t1();QA();dW();mW();vW();yW();_W();wW();TW();EW();iC();qW();AW();MW();RW();OW();kW();zW();BW();jW();UW();QW();eH();rH();nH();aH();oH();sH();lH();pH();wH();qH();OH();LH();jH();UH();GH();WH();KH();XH();r7();i7();n7();s7();l7();u7();h7();SC();TC();p7();g7();y7();x7();w7();S7();T7();E7();C7();M7();R7();D7();L7();F7();B7();Q9();oM();sM();nK();hM();dM();sK();pK();vK();yK();wK();SK();TK();EK();IK();qK();PK();OK();DK();LK();QK();PM();sX();E1();fX();mX();yX();wX();TX();LM();NM();jM();$M();GM();HM();XM();tY();aY();cY();JM();pY();QM();eR();PY();sR();NY();BY();VY();GY();YY();vR();rJ();sJ();cJ();dJ();TR();_J();TJ();AJ();OJ();kJ();DJ();LJ();zJ();FJ();NJ();BJ();jJ();UJ();$J();VJ();GJ();yQ();_Q();xQ();bQ();wQ();SQ();TQ();EQ();IQ();NR();AQ();MQ();OQ();LQ();FQ();BQ();BR();jR();VQ();GQ();WQ();KQ();eee();ree();nee();aee();see();uee();hee();fee();_ee();xee();wee();Pee();Cee();Dee();tO();rO();zee();nO();Uee();ew();nte();ate();lte();Dte();Lte();zte();Fte();Nte();Bte();Ute();$te();Gte();Zte();Kte();Xte();Qte();ere();tre();rre();ure();cre();hre();dre();fre();Ire();Mre();$re();Wre();Kre();Xre();Jre();Qre();aie();oie();lie();uie();cie();hie();die();mie();gie();Sie();Aie();Mie();Rie();Oie();kie();Die();Bie();Vie();Zie();Hie();Kie();Jie();Qie();ene();tne();ine();one();une();cne();hne();dne();fne();pne();mne();gne();vne();yne();xne();bne();wne();Sne();Tne();Ine();Ane();jne();Kne();Yne();Qne();eae();rae();iae();nae();sae();lae();uae();cae();fae();mae();gae();yae();xae();bae();Tae();Eae();Iae();Pae();Cae();Mae();Lae();zae();Fae();Bae();jae();Uae();$ae();Vae();Gae();Zae();Wae();Yae();Jae();ioe();noe();soe();loe();uoe();foe();poe();moe();goe();Moe();Roe();Ooe();koe();Doe();joe();$oe();Goe();Koe();Yoe();Qoe();rse();nse();ose();sse();lse();use();cse();mse();gse();yse();_se();bse();wse();Sse();Tse();Ese();Ise();qse();Pse();Ase();Mse();Ose();Dse();Lse();zse();Fse();Nse();Bse();jse();Use();Wse();Jse();yle();_le();xle();ble();wle();Sle();Tle();Ele();qle();Ple();Dle();Lle();zle();Fle();Nle();Ble();jle();Ule();Vle();Gle();Wle();Kle();Xle();Yle();Jle();Qle();eue();tue();rue();iue();mue();xue();wue();Sue();Eue();Iue();Pue();Cue();Rue();kue();Due();Nue();Bue();$ue();Vue();Zue();Hue();tce();oce();fce();yce();Cce();zce();Nce();Hce();Kce();Yce();lhe();mhe();pde();vde();_de();xde();bde();Ede();Ade();Cde();Mde.exports=sb()});var kde=P((G9t,Ode)=>{"use strict";p();Ode.exports=Rde()});var QL=P((YL,JL)=>{p();(function(e,t){typeof YL=="object"&&typeof JL!="undefined"?JL.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(YL,function(){"use strict";var e={},t={};function n(c,a,x){if(t[c]=x,c==="index"){var S="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",A={};return t.shared(A),t.index(e,A),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([S],{type:"text/javascript"}))),e}}n("shared",["exports"],function(c){"use strict";function a(s,i,o,h){return new(o||(o=Promise))(function(f,y){function _(C){try{T(h.next(C))}catch(M){y(M)}}function w(C){try{T(h.throw(C))}catch(M){y(M)}}function T(C){var M;C.done?f(C.value):(M=C.value,M instanceof o?M:new o(function(z){z(M)})).then(_,w)}T((h=h.apply(s,i||[])).next())})}function x(s,i){this.x=s,this.y=i}function S(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var A,R;typeof SuppressedError=="function"&&SuppressedError,x.prototype={clone(){return new x(this.x,this.y)},add(s){return this.clone()._add(s)},sub(s){return this.clone()._sub(s)},multByPoint(s){return this.clone()._multByPoint(s)},divByPoint(s){return this.clone()._divByPoint(s)},mult(s){return this.clone()._mult(s)},div(s){return this.clone()._div(s)},rotate(s){return this.clone()._rotate(s)},rotateAround(s,i){return this.clone()._rotateAround(s,i)},matMult(s){return this.clone()._matMult(s)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(s){return this.x===s.x&&this.y===s.y},dist(s){return Math.sqrt(this.distSqr(s))},distSqr(s){let i=s.x-this.x,o=s.y-this.y;return i*i+o*o},angle(){return Math.atan2(this.y,this.x)},angleTo(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith(s){return this.angleWithSep(s.x,s.y)},angleWithSep(s,i){return Math.atan2(this.x*i-this.y*s,this.x*s+this.y*i)},_matMult(s){let i=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=i,this},_add(s){return this.x+=s.x,this.y+=s.y,this},_sub(s){return this.x-=s.x,this.y-=s.y,this},_mult(s){return this.x*=s,this.y*=s,this},_div(s){return this.x/=s,this.y/=s,this},_multByPoint(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint(s){return this.x/=s.x,this.y/=s.y,this},_unit(){return this._div(this.mag()),this},_perp(){let s=this.y;return this.y=this.x,this.x=-s,this},_rotate(s){let i=Math.cos(s),o=Math.sin(s),h=o*this.x+i*this.y;return this.x=i*this.x-o*this.y,this.y=h,this},_rotateAround(s,i){let o=Math.cos(s),h=Math.sin(s),f=i.y+h*(this.x-i.x)+o*(this.y-i.y);return this.x=i.x+o*(this.x-i.x)-h*(this.y-i.y),this.y=f,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:x},x.convert=function(s){if(s instanceof x)return s;if(Array.isArray(s))return new x(+s[0],+s[1]);if(s.x!==void 0&&s.y!==void 0)return new x(+s.x,+s.y);throw new Error("Expected [x, y] or {x, y} point format")};var D=function(){if(R)return A;function s(i,o,h,f){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=h,this.p2y=f}return R=1,A=s,s.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,o){if(o===void 0&&(o=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,f=0;f<8;f++){var y=this.sampleCurveX(h)-i;if(Math.abs(y)<o)return h;var _=this.sampleCurveDerivativeX(h);if(Math.abs(_)<1e-6)break;h-=y/_}var w=0,T=1;for(h=i,f=0;f<20&&(y=this.sampleCurveX(h),!(Math.abs(y-i)<o));f++)i>y?w=h:T=h,h=.5*(T-w)+w;return h},solve:function(i,o){return this.sampleCurveY(this.solveCurveX(i,o))}},A}(),L=S(D);let H,ce;function de(){return H==null&&(H=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),H}function ve(){if(ce==null&&(ce=!1,de())){let i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){let f=4*h;i.fillStyle=`rgb(${f},${f+1},${f+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}let o=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&o[h]!==h){ce=!0;break}}}return ce||!1}var X=1e-6,ee=typeof Float32Array!="undefined"?Float32Array:Array;function oe(){var s=new ee(9);return ee!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s}function Te(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Ae(){var s=new ee(3);return ee!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s}function it(s){var i=s[0],o=s[1],h=s[2];return Math.sqrt(i*i+o*o+h*h)}function Ge(s,i,o){var h=new ee(3);return h[0]=s,h[1]=i,h[2]=o,h}function nt(s,i,o){return s[0]=i[0]+o[0],s[1]=i[1]+o[1],s[2]=i[2]+o[2],s}function dt(s,i,o){return s[0]=i[0]*o,s[1]=i[1]*o,s[2]=i[2]*o,s}function gt(s,i,o){var h=i[0],f=i[1],y=i[2],_=o[0],w=o[1],T=o[2];return s[0]=f*T-y*w,s[1]=y*_-h*T,s[2]=h*w-f*_,s}var Mr,qn=it;function ka(s,i,o){var h=i[0],f=i[1],y=i[2],_=i[3];return s[0]=o[0]*h+o[4]*f+o[8]*y+o[12]*_,s[1]=o[1]*h+o[5]*f+o[9]*y+o[13]*_,s[2]=o[2]*h+o[6]*f+o[10]*y+o[14]*_,s[3]=o[3]*h+o[7]*f+o[11]*y+o[15]*_,s}function Pn(){var s=new ee(4);return ee!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0),s[3]=1,s}function Hi(s,i,o,h){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",y=Math.PI/360;i*=y,h*=y,o*=y;var _=Math.sin(i),w=Math.cos(i),T=Math.sin(o),C=Math.cos(o),M=Math.sin(h),z=Math.cos(h);switch(f){case"xyz":s[0]=_*C*z+w*T*M,s[1]=w*T*z-_*C*M,s[2]=w*C*M+_*T*z,s[3]=w*C*z-_*T*M;break;case"xzy":s[0]=_*C*z-w*T*M,s[1]=w*T*z-_*C*M,s[2]=w*C*M+_*T*z,s[3]=w*C*z+_*T*M;break;case"yxz":s[0]=_*C*z+w*T*M,s[1]=w*T*z-_*C*M,s[2]=w*C*M-_*T*z,s[3]=w*C*z+_*T*M;break;case"yzx":s[0]=_*C*z+w*T*M,s[1]=w*T*z+_*C*M,s[2]=w*C*M-_*T*z,s[3]=w*C*z-_*T*M;break;case"zxy":s[0]=_*C*z-w*T*M,s[1]=w*T*z+_*C*M,s[2]=w*C*M+_*T*z,s[3]=w*C*z-_*T*M;break;case"zyx":s[0]=_*C*z-w*T*M,s[1]=w*T*z+_*C*M,s[2]=w*C*M-_*T*z,s[3]=w*C*z+_*T*M;break;default:throw new Error("Unknown angle order "+f)}return s}function Da(){var s=new ee(2);return ee!=Float32Array&&(s[0]=0,s[1]=0),s}function Ki(s,i){var o=new ee(2);return o[0]=s,o[1]=i,o}Ae(),Mr=new ee(4),ee!=Float32Array&&(Mr[0]=0,Mr[1]=0,Mr[2]=0,Mr[3]=0),Ae(),Ge(1,0,0),Ge(0,1,0),Pn(),Pn(),oe(),Da();let Jt=8192;function zi(s,i,o){return i*(Jt/(s.tileSize*Math.pow(2,o-s.tileID.overscaledZ)))}function ni(s,i){return(s%i+i)%i}function fo(s,i,o){return s*(1-o)+i*o}function ai(s){if(s<=0)return 0;if(s>=1)return 1;let i=s*s,o=i*s;return 4*(s<.5?o:3*(s-i)+o-.75)}function Xi(s,i,o,h){let f=new L(s,i,o,h);return y=>f.solve(y)}let ha=Xi(.25,.1,.25,1);function oi(s,i,o){return Math.min(o,Math.max(i,s))}function po(s,i,o){let h=o-i,f=((s-i)%h+h)%h+i;return f===i?o:f}function Vn(s,...i){for(let o of i)for(let h in o)s[h]=o[h];return s}let da=1;function Al(s,i,o){let h={};for(let f in s)h[f]=i.call(this,s[f],f,s);return h}function Cl(s,i,o){let h={};for(let f in s)i.call(this,s[f],f,s)&&(h[f]=s[f]);return h}function An(s){return Array.isArray(s)?s.map(An):typeof s=="object"&&s?Al(s,An):s}let Rr={};function Br(s){Rr[s]||(typeof console!="undefined"&&console.warn(s),Rr[s]=!0)}function fa(s,i,o){return(o.y-s.y)*(i.x-s.x)>(i.y-s.y)*(o.x-s.x)}function La(s){return typeof WorkerGlobalScope!="undefined"&&s!==void 0&&s instanceof WorkerGlobalScope}let ks=null;function za(s){return typeof ImageBitmap!="undefined"&&s instanceof ImageBitmap}let Fa="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Ml(s,i,o,h,f){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let y=new VideoFrame(s,{timestamp:0});try{let _=y==null?void 0:y.format;if(!_||!_.startsWith("BGR")&&!_.startsWith("RGB"))throw new Error(`Unrecognized format ${_}`);let w=_.startsWith("BGR"),T=new Uint8ClampedArray(h*f*4);if(yield y.copyTo(T,function(C,M,z,B,U){let $=4*Math.max(-M,0),Z=(Math.max(0,z)-z)*B*4+$,J=4*B,ie=Math.max(0,M),ye=Math.max(0,z);return{rect:{x:ie,y:ye,width:Math.min(C.width,M+B)-ie,height:Math.min(C.height,z+U)-ye},layout:[{offset:Z,stride:J}]}}(s,i,o,h,f)),w)for(let C=0;C<T.length;C+=4){let M=T[C];T[C]=T[C+2],T[C+2]=M}return T}finally{y.close()}})}let $o,Vo;function Go(s,i,o,h){return s.addEventListener(i,o,h),{unsubscribe:()=>{s.removeEventListener(i,o,h)}}}function Ds(s){return s*Math.PI/180}function Zo(s){return s/Math.PI*180}let Wo={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ho={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Rl="AbortError";function _e(){return new Error(Rl)}let G={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function W(s){return G.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}let Y="global-dispatcher";class se extends Error{constructor(i,o,h,f){super(`AJAXError: ${o} (${i}): ${h}`),this.status=i,this.statusText=o,this.url=h,this.body=f}}let me=()=>La(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,be=function(s,i){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){let h=W(s.url);if(h)return h(s,i);if(La(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:Y},i)}if(!(/^file:/.test(o=s.url)||/^file:/.test(me())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,f){return a(this,void 0,void 0,function*(){let y=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:me(),signal:f.signal}),_,w;h.type!=="json"||y.headers.has("Accept")||y.headers.set("Accept","application/json");try{_=yield fetch(y)}catch(C){throw new se(0,C.message,h.url,new Blob())}if(!_.ok){let C=yield _.blob();throw new se(_.status,_.statusText,h.url,C)}w=h.type==="arrayBuffer"||h.type==="image"?_.arrayBuffer():h.type==="json"?_.json():_.text();let T=yield w;if(f.signal.aborted)throw _e();return{data:T,cacheControl:_.headers.get("Cache-Control"),expires:_.headers.get("Expires")}})}(s,i);if(La(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:Y},i)}var o;return function(h,f){return new Promise((y,_)=>{var w;let T=new XMLHttpRequest;T.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(T.responseType="arraybuffer");for(let C in h.headers)T.setRequestHeader(C,h.headers[C]);h.type==="json"&&(T.responseType="text",!((w=h.headers)===null||w===void 0)&&w.Accept||T.setRequestHeader("Accept","application/json")),T.withCredentials=h.credentials==="include",T.onerror=()=>{_(new Error(T.statusText))},T.onload=()=>{if(!f.signal.aborted)if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let C=T.response;if(h.type==="json")try{C=JSON.parse(T.response)}catch(M){return void _(M)}y({data:C,cacheControl:T.getResponseHeader("Cache-Control"),expires:T.getResponseHeader("Expires")})}else{let C=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});_(new se(T.status,T.statusText,h.url,C))}},f.signal.addEventListener("abort",()=>{T.abort(),_(_e())}),T.send(h.body)})}(s,i)};function qe(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;let i=new URL(s),o=window.location;return i.protocol===o.protocol&&i.host===o.host}function we(s,i,o){o[s]&&o[s].indexOf(i)!==-1||(o[s]=o[s]||[],o[s].push(i))}function ke(s,i,o){if(o&&o[s]){let h=o[s].indexOf(i);h!==-1&&o[s].splice(h,1)}}class Be{constructor(i,o={}){Vn(this,o),this.type=i}}class Le extends Be{constructor(i,o={}){super("error",Vn({error:i},o))}}class st{on(i,o){return this._listeners=this._listeners||{},we(i,o,this._listeners),{unsubscribe:()=>{this.off(i,o)}}}off(i,o){return ke(i,o,this._listeners),ke(i,o,this._oneTimeListeners),this}once(i,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},we(i,o,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,o){typeof i=="string"&&(i=new Be(i,o||{}));let h=i.type;if(this.listens(h)){i.target=this;let f=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let w of f)w.call(this,i);let y=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let w of y)ke(h,w,this._oneTimeListeners),w.call(this,i);let _=this._eventedParent;_&&(Vn(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(i))}else i instanceof Le&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,o){return this._eventedParent=i,this._eventedParentData=o,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let Tt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Lt(s,i){let o={};for(let h in s)h!=="ref"&&(o[h]=s[h]);return Tt.forEach(h=>{h in i&&(o[h]=i[h])}),o}function ct(s,i){if(Array.isArray(s)){if(!Array.isArray(i)||s.length!==i.length)return!1;for(let o=0;o<s.length;o++)if(!ct(s[o],i[o]))return!1;return!0}if(typeof s=="object"&&s!==null&&i!==null){if(typeof i!="object"||Object.keys(s).length!==Object.keys(i).length)return!1;for(let o in s)if(!ct(s[o],i[o]))return!1;return!0}return s===i}function qt(s,i){s.push(i)}function hr(s,i,o){qt(o,{command:"addSource",args:[s,i[s]]})}function si(s,i,o){qt(i,{command:"removeSource",args:[s]}),o[s]=!0}function li(s,i,o,h){si(s,o,h),hr(s,i,o)}function jr(s,i,o){let h;for(h in s[o])if(Object.prototype.hasOwnProperty.call(s[o],h)&&h!=="data"&&!ct(s[o][h],i[o][h]))return!1;for(h in i[o])if(Object.prototype.hasOwnProperty.call(i[o],h)&&h!=="data"&&!ct(s[o][h],i[o][h]))return!1;return!0}function jt(s,i,o,h,f,y){s=s||{},i=i||{};for(let _ in s)Object.prototype.hasOwnProperty.call(s,_)&&(ct(s[_],i[_])||o.push({command:y,args:[h,_,i[_],f]}));for(let _ in i)Object.prototype.hasOwnProperty.call(i,_)&&!Object.prototype.hasOwnProperty.call(s,_)&&(ct(s[_],i[_])||o.push({command:y,args:[h,_,i[_],f]}))}function Zt(s){return s.id}function Gr(s,i){return s[i.id]=i,s}class $e{constructor(i,o,h,f){this.message=(i?`${i}: `:"")+h,f&&(this.identifier=f),o!=null&&o.__line__&&(this.line=o.__line__)}}function Fi(s,...i){for(let o of i)for(let h in o)s[h]=o[h];return s}class Tr extends Error{constructor(i,o){super(o),this.message=o,this.key=i}}class Ko{constructor(i,o=[]){this.parent=i,this.bindings={};for(let[h,f]of o)this.bindings[h]=f}concat(i){return new Ko(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}let Ol={kind:"null"},Ye={kind:"number"},zt={kind:"string"},Rt={kind:"boolean"},qi={kind:"color"},Ls={kind:"projectionDefinition"},Xo={kind:"object"},At={kind:"value"},Nh={kind:"collator"},Yo={kind:"formatted"},Bh={kind:"padding"},Na={kind:"colorArray"},kl={kind:"numberArray"},Or={kind:"resolvedImage"},jh={kind:"variableAnchorOffsetCollection"};function gn(s,i){return{kind:"array",itemType:s,N:i}}function sr(s){if(s.kind==="array"){let i=sr(s.itemType);return typeof s.N=="number"?`array<${i}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${i}>`}return s.kind}let x_=[Ol,Ye,zt,Rt,qi,Ls,Yo,Xo,gn(At),Bh,kl,Na,Or,jh];function cc(s,i){if(i.kind==="error")return null;if(s.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!cc(s.itemType,i.itemType))&&(typeof s.N!="number"||s.N===i.N))return null}else{if(s.kind===i.kind)return null;if(s.kind==="value"){for(let o of x_)if(!cc(o,i))return null}}return`Expected ${sr(s)} but found ${sr(i)} instead.`}function jp(s,i){return i.some(o=>o.kind===s.kind)}function Jo(s,i){return i.some(o=>o==="null"?s===null:o==="array"?Array.isArray(s):o==="object"?s&&!Array.isArray(s)&&typeof s=="object":o===typeof s)}function Qo(s,i){return s.kind==="array"&&i.kind==="array"?s.itemType.kind===i.itemType.kind&&typeof s.N=="number":s.kind===i.kind}let Up=.96422,b_=.82521,w_=4/29,Dl=6/29,S_=3*Dl*Dl,US=Dl*Dl*Dl,$S=Math.PI/180,VS=180/Math.PI;function $p(s){return(s%=360)<0&&(s+=360),s}function Ll([s,i,o,h]){let f,y,_=Gp((.2225045*(s=Vp(s))+.7168786*(i=Vp(i))+.0606169*(o=Vp(o)))/1);s===i&&i===o?f=y=_:(f=Gp((.4360747*s+.3850649*i+.1430804*o)/Up),y=Gp((.0139322*s+.0971045*i+.7141733*o)/b_));let w=116*_-16;return[w<0?0:w,500*(f-_),200*(_-y),h]}function Vp(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Gp(s){return s>US?Math.pow(s,1/3):s/S_+w_}function zl([s,i,o,h]){let f=(s+16)/116,y=isNaN(i)?f:f+i/500,_=isNaN(o)?f:f-o/200;return f=1*Wp(f),y=Up*Wp(y),_=b_*Wp(_),[Zp(3.1338561*y-1.6168667*f-.4906146*_),Zp(-.9787684*y+1.9161415*f+.033454*_),Zp(.0719453*y-.2289914*f+1.4052427*_),h]}function Zp(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Wp(s){return s>Dl?s*s*s:S_*(s-w_)}let GS=Object.hasOwn||function(s,i){return Object.prototype.hasOwnProperty.call(s,i)};function Fl(s,i){return GS(s,i)?s[i]:void 0}function hc(s){return parseInt(s.padEnd(2,s),16)/255}function pa(s,i){return Ft(i?s/100:s,0,1)}function Ft(s,i,o){return Math.min(Math.max(i,s),o)}function zs(s){return!s.some(Number.isNaN)}let es={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function mo(s,i,o){return s+o*(i-s)}function Fs(s,i,o){return s.map((h,f)=>mo(h,i[f],o))}class Nt{constructor(i,o,h,f=1,y=!0){this.r=i,this.g=o,this.b=h,this.a=f,y||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[i,o,h,f]))}static parse(i){if(i instanceof Nt)return i;if(typeof i!="string")return;let o=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let f=Fl(es,h);if(f){let[_,w,T]=f;return[_/255,w/255,T/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let _=h.length<6?1:2,w=1;return[hc(h.slice(w,w+=_)),hc(h.slice(w,w+=_)),hc(h.slice(w,w+=_)),hc(h.slice(w,w+_)||"ff")]}if(h.startsWith("rgb")){let _=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(_){let[w,T,C,M,z,B,U,$,Z,J,ie,ye]=_,he=[M||" ",U||" ",J].join("");if(he==="  "||he==="  /"||he===",,"||he===",,,"){let pe=[C,B,Z].join(""),Pe=pe==="%%%"?100:pe===""?255:0;if(Pe){let Oe=[Ft(+T/Pe,0,1),Ft(+z/Pe,0,1),Ft(+$/Pe,0,1),ie?pa(+ie,ye):1];if(zs(Oe))return Oe}}return}}let y=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[_,w,T,C,M,z,B,U,$]=y,Z=[T||" ",M||" ",B].join("");if(Z==="  "||Z==="  /"||Z===",,"||Z===",,,"){let J=[+w,Ft(+C,0,100),Ft(+z,0,100),U?pa(+U,$):1];if(zs(J))return function([ie,ye,he,pe]){function Pe(Oe){let Ne=(Oe+ie/30)%12,Xe=ye*Math.min(he,1-he);return he-Xe*Math.max(-1,Math.min(Ne-3,9-Ne,1))}return ie=$p(ie),ye/=100,he/=100,[Pe(0),Pe(8),Pe(4),pe]}(J)}}}(i);return o?new Nt(...o,!1):void 0}get rgb(){let{r:i,g:o,b:h,a:f}=this,y=f||1/0;return this.overwriteGetter("rgb",[i/y,o/y,h/y,f])}get hcl(){return this.overwriteGetter("hcl",function(i){let[o,h,f,y]=Ll(i),_=Math.sqrt(h*h+f*f);return[Math.round(1e4*_)?$p(Math.atan2(f,h)*VS):NaN,_,o,y]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Ll(this.rgb))}overwriteGetter(i,o){return Object.defineProperty(this,i,{value:o}),o}toString(){let[i,o,h,f]=this.rgb;return`rgba(${[i,o,h].map(y=>Math.round(255*y)).join(",")},${f})`}static interpolate(i,o,h,f="rgb"){switch(f){case"rgb":{let[y,_,w,T]=Fs(i.rgb,o.rgb,h);return new Nt(y,_,w,T,!1)}case"hcl":{let[y,_,w,T]=i.hcl,[C,M,z,B]=o.hcl,U,$;if(isNaN(y)||isNaN(C))isNaN(y)?isNaN(C)?U=NaN:(U=C,w!==1&&w!==0||($=M)):(U=y,z!==1&&z!==0||($=_));else{let he=C-y;C>y&&he>180?he-=360:C<y&&y-C>180&&(he+=360),U=y+h*he}let[Z,J,ie,ye]=function([he,pe,Pe,Oe]){return he=isNaN(he)?0:he*$S,zl([Pe,Math.cos(he)*pe,Math.sin(he)*pe,Oe])}([U,$!=null?$:mo(_,M,h),mo(w,z,h),mo(T,B,h)]);return new Nt(Z,J,ie,ye,!1)}case"lab":{let[y,_,w,T]=zl(Fs(i.lab,o.lab,h));return new Nt(y,_,w,T,!1)}}}}Nt.black=new Nt(0,0,0,1),Nt.white=new Nt(1,1,1,1),Nt.transparent=new Nt(0,0,0,0),Nt.red=new Nt(1,0,0,1);class Ns{constructor(i,o,h){this.sensitivity=i?o?"variant":"case":o?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,o){return this.collator.compare(i,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Uh=["bottom","center","top"];class $h{constructor(i,o,h,f,y,_){this.text=i,this.image=o,this.scale=h,this.fontStack=f,this.textColor=y,this.verticalAlign=_}}class Yi{constructor(i){this.sections=i}static fromString(i){return new Yi([new $h(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof Yi?i:Yi.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class pi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof pi)return i;if(typeof i=="number")return new pi([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(let o of i)if(typeof o!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new pi(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,o,h){return new pi(Fs(i.values,o.values,h))}}class Ji{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ji)return i;if(typeof i=="number")return new Ji([i]);if(Array.isArray(i)){for(let o of i)if(typeof o!="number")return;return new Ji(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,o,h){return new Ji(Fs(i.values,o.values,h))}}class Zr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Zr)return i;if(typeof i=="string"){let h=Nt.parse(i);return h?new Zr([h]):void 0}if(!Array.isArray(i))return;let o=[];for(let h of i){if(typeof h!="string")return;let f=Nt.parse(h);if(!f)return;o.push(f)}return new Zr(o)}toString(){return JSON.stringify(this.values)}static interpolate(i,o,h,f="rgb"){let y=[];if(i.values.length!=o.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${o.values.length}), cannot interpolate.`);for(let _=0;_<i.values.length;_++)y.push(Nt.interpolate(i.values[_],o.values[_],h,f));return new Zr(y)}}class lr extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}let T_=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Qi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Qi)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let o=0;o<i.length;o+=2){let h=i[o],f=i[o+1];if(typeof h!="string"||!T_.has(h)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Qi(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,o,h){let f=i.values,y=o.values;if(f.length!==y.length)throw new lr(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${o.toString()}`);let _=[];for(let w=0;w<f.length;w+=2){if(f[w]!==y[w])throw new lr(`Cannot interpolate values containing mismatched anchors. from[${w}]: ${f[w]}, to[${w}]: ${y[w]}`);_.push(f[w]);let[T,C]=f[w+1],[M,z]=y[w+1];_.push([mo(T,M,h),mo(C,z,h)])}return new Qi(_)}}class Cn{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new Cn({name:i,available:!1}):null}}class Ni{constructor(i,o,h){this.from=i,this.to=o,this.transition=h}static interpolate(i,o,h){return new Ni(i,o,h)}static parse(i){return i instanceof Ni?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new Ni(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new Ni(i.from,i.to,i.transition):typeof i=="string"?new Ni(i,i,1):void 0}}function pr(s,i,o,h){return typeof s=="number"&&s>=0&&s<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof o=="number"&&o>=0&&o<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[s,i,o,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[s,i,o,h]:[s,i,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Bs(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Ni||s instanceof Nt||s instanceof Ns||s instanceof Yi||s instanceof pi||s instanceof Ji||s instanceof Zr||s instanceof Qi||s instanceof Cn)return!0;if(Array.isArray(s)){for(let i of s)if(!Bs(i))return!1;return!0}if(typeof s=="object"){for(let i in s)if(!Bs(s[i]))return!1;return!0}return!1}function vt(s){if(s===null)return Ol;if(typeof s=="string")return zt;if(typeof s=="boolean")return Rt;if(typeof s=="number")return Ye;if(s instanceof Nt)return qi;if(s instanceof Ni)return Ls;if(s instanceof Ns)return Nh;if(s instanceof Yi)return Yo;if(s instanceof pi)return Bh;if(s instanceof Ji)return kl;if(s instanceof Zr)return Na;if(s instanceof Qi)return jh;if(s instanceof Cn)return Or;if(Array.isArray(s)){let i=s.length,o;for(let h of s){let f=vt(h);if(o){if(o===f)continue;o=At;break}o=f}return gn(o||At,i)}return Xo}function Et(s){let i=typeof s;return s===null?"":i==="string"||i==="number"||i==="boolean"?String(s):s instanceof Nt||s instanceof Ni||s instanceof Yi||s instanceof pi||s instanceof Ji||s instanceof Zr||s instanceof Qi||s instanceof Cn?s.toString():JSON.stringify(s)}class go{constructor(i,o){this.type=i,this.value=o}static parse(i,o){if(i.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!Bs(i[1]))return o.error("invalid value");let h=i[1],f=vt(h),y=o.expectedType;return f.kind!=="array"||f.N!==0||!y||y.kind!=="array"||typeof y.N=="number"&&y.N!==0||(f=y),new go(f,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let Wt={string:zt,number:Ye,boolean:Rt,object:Xo};class Mn{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h,f=1,y=i[0];if(y==="array"){let w,T;if(i.length>2){let C=i[1];if(typeof C!="string"||!(C in Wt)||C==="object")return o.error("The item type argument of \"array\" must be one of string, number, boolean",1);w=Wt[C],f++}else w=At;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return o.error("The length argument to \"array\" must be a positive integer literal",2);T=i[2],f++}h=gn(w,T)}else{if(!Wt[y])throw new Error(`Types doesn't contain name = ${y}`);h=Wt[y]}let _=[];for(;f<i.length;f++){let w=o.parse(i[f],f,At);if(!w)return null;_.push(w)}return new Mn(h,_)}evaluate(i){for(let o=0;o<this.args.length;o++){let h=this.args[o].evaluate(i);if(!cc(this.type,vt(h)))return h;if(o===this.args.length-1)throw new lr(`Expected value to be of type ${sr(this.type)}, but found ${sr(vt(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let Ba={"to-boolean":Rt,"to-color":qi,"to-number":Ye,"to-string":zt};class ja{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h=i[0];if(!Ba[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return o.error("Expected one argument.");let f=Ba[h],y=[];for(let _=1;_<i.length;_++){let w=o.parse(i[_],_,At);if(!w)return null;y.push(w)}return new ja(f,y)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let o,h;for(let f of this.args){if(o=f.evaluate(i),h=null,o instanceof Nt)return o;if(typeof o=="string"){let y=i.parseColor(o);if(y)return y}else if(Array.isArray(o)&&(h=o.length<3||o.length>4?`Invalid rgba value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:pr(o[0],o[1],o[2],o[3]),!h))return new Nt(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new lr(h||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(let h of this.args){o=h.evaluate(i);let f=pi.parse(o);if(f)return f}throw new lr(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"numberArray":{let o;for(let h of this.args){o=h.evaluate(i);let f=Ji.parse(o);if(f)return f}throw new lr(`Could not parse numberArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"colorArray":{let o;for(let h of this.args){o=h.evaluate(i);let f=Zr.parse(o);if(f)return f}throw new lr(`Could not parse colorArray from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(let h of this.args){o=h.evaluate(i);let f=Qi.parse(o);if(f)return f}throw new lr(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(let h of this.args){if(o=h.evaluate(i),o===null)return 0;let f=Number(o);if(!isNaN(f))return f}throw new lr(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return Yi.fromString(Et(this.args[0].evaluate(i)));case"resolvedImage":return Cn.fromString(Et(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return Et(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let Vh=["Unknown","Point","LineString","Polygon"];class Hp{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vh[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let o=this._parseColorCache.get(i);return o||(o=Nt.parse(i),this._parseColorCache.set(i,o)),o}}class Nl{constructor(i,o,h=[],f,y=new Ko,_=[]){this.registry=i,this.path=h,this.key=h.map(w=>`[${w}]`).join(""),this.scope=y,this.errors=_,this.expectedType=f,this._isConstant=o}parse(i,o,h,f,y={}){return o?this.concat(o,h,f)._parse(i,y):this._parse(i,y)}_parse(i,o){function h(f,y,_){return _==="assert"?new Mn(y,[f]):_==="coerce"?new ja(y,[f]):f}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let f=i[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let y=this.registry[f];if(y){let _=y.parse(i,this);if(!_)return null;if(this.expectedType){let w=this.expectedType,T=_.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||T.kind!=="value"){if(w.kind==="projectionDefinition"&&["string","array"].includes(T.kind)||["color","formatted","resolvedImage"].includes(w.kind)&&["value","string"].includes(T.kind)||["padding","numberArray"].includes(w.kind)&&["value","number","array"].includes(T.kind)||w.kind==="colorArray"&&["value","string","array"].includes(T.kind)||w.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(T.kind))_=h(_,w,o.typeAnnotation||"coerce");else if(this.checkSubtype(w,T))return null}else _=h(_,w,o.typeAnnotation||"assert")}if(!(_ instanceof go)&&_.type.kind!=="resolvedImage"&&this._isConstant(_)){let w=new Hp;try{_=new go(_.type,_.evaluate(w))}catch(T){return this.error(T.message),null}}return _}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof i} instead.`)}concat(i,o,h){let f=typeof i=="number"?this.path.concat(i):this.path,y=h?this.scope.concat(h):this.scope;return new Nl(this.registry,this._isConstant,f,o||null,y,this.errors)}error(i,...o){let h=`${this.key}${o.map(f=>`[${f}]`).join("")}`;this.errors.push(new Tr(h,i))}checkSubtype(i,o){let h=cc(i,o);return h&&this.error(h),h}}class dc{constructor(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(let o of this.bindings)i(o[1]);i(this.result)}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);let h=[];for(let y=1;y<i.length-1;y+=2){let _=i[y];if(typeof _!="string")return o.error(`Expected string, but found ${typeof _} instead.`,y);if(/[^a-zA-Z0-9_]/.test(_))return o.error("Variable names must contain only alphanumeric characters or '_'.",y);let w=o.parse(i[y+1],y+1);if(!w)return null;h.push([_,w])}let f=o.parse(i[i.length-1],i.length-1,o.expectedType,h);return f?new dc(h,f):null}outputDefined(){return this.result.outputDefined()}}class Gh{constructor(i,o){this.type=o.type,this.name=i,this.boundExpression=o}static parse(i,o){if(i.length!==2||typeof i[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");let h=i[1];return o.scope.has(h)?new Gh(h,o.scope.get(h)):o.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Zh{constructor(i,o,h){this.type=i,this.index=o,this.input=h}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,Ye),f=o.parse(i[2],2,gn(o.expectedType||At));return h&&f?new Zh(f.type.itemType,h,f):null}evaluate(i){let o=this.index.evaluate(i),h=this.input.evaluate(i);if(o<0)throw new lr(`Array index out of bounds: ${o} < 0.`);if(o>=h.length)throw new lr(`Array index out of bounds: ${o} > ${h.length-1}.`);if(o!==Math.floor(o))throw new lr(`Array index must be an integer, but found ${o} instead.`);return h[o]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Wh{constructor(i,o){this.type=Rt,this.needle=i,this.haystack=o}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,At),f=o.parse(i[2],2,At);return h&&f?jp(h.type,[Rt,zt,Ye,Ol,At])?new Wh(h,f):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${sr(h.type)} instead`):null}evaluate(i){let o=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!Jo(o,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${sr(vt(o))} instead.`);if(!Jo(h,["string","array"]))throw new lr(`Expected second argument to be of type array or string, but found ${sr(vt(h))} instead.`);return h.indexOf(o)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class ma{constructor(i,o,h){this.type=Ye,this.needle=i,this.haystack=o,this.fromIndex=h}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,At),f=o.parse(i[2],2,At);if(!h||!f)return null;if(!jp(h.type,[Rt,zt,Ye,Ol,At]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${sr(h.type)} instead`);if(i.length===4){let y=o.parse(i[3],3,Ye);return y?new ma(h,f,y):null}return new ma(h,f)}evaluate(i){let o=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!Jo(o,["boolean","string","number","null"]))throw new lr(`Expected first argument to be of type boolean, string, number or null, but found ${sr(vt(o))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(i)),Jo(h,["string"])){let y=h.indexOf(o,f);return y===-1?-1:[...h.slice(0,y)].length}if(Jo(h,["array"]))return h.indexOf(o,f);throw new lr(`Expected second argument to be of type array or string, but found ${sr(vt(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class mi{constructor(i,o,h,f,y,_){this.inputType=i,this.type=o,this.input=h,this.cases=f,this.outputs=y,this.otherwise=_}static parse(i,o){if(i.length<5)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return o.error("Expected an even number of arguments.");let h,f;o.expectedType&&o.expectedType.kind!=="value"&&(f=o.expectedType);let y={},_=[];for(let C=2;C<i.length-1;C+=2){let M=i[C],z=i[C+1];Array.isArray(M)||(M=[M]);let B=o.concat(C);if(M.length===0)return B.error("Expected at least one branch label.");for(let $ of M){if(typeof $!="number"&&typeof $!="string")return B.error("Branch labels must be numbers or strings.");if(typeof $=="number"&&Math.abs($)>Number.MAX_SAFE_INTEGER)return B.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof $=="number"&&Math.floor($)!==$)return B.error("Numeric branch labels must be integer values.");if(h){if(B.checkSubtype(h,vt($)))return null}else h=vt($);if(y[String($)]!==void 0)return B.error("Branch labels must be unique.");y[String($)]=_.length}let U=o.parse(z,C,f);if(!U)return null;f=f||U.type,_.push(U)}let w=o.parse(i[1],1,At);if(!w)return null;let T=o.parse(i[i.length-1],i.length-1,f);return T?w.type.kind!=="value"&&o.concat(1).checkSubtype(h,w.type)?null:new mi(h,f,w,y,_,T):null}evaluate(i){let o=this.input.evaluate(i);return(vt(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class Bl{constructor(i,o,h){this.type=i,this.branches=o,this.otherwise=h}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return o.error("Expected an odd number of arguments.");let h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);let f=[];for(let _=1;_<i.length-1;_+=2){let w=o.parse(i[_],_,Rt);if(!w)return null;let T=o.parse(i[_+1],_+1,h);if(!T)return null;f.push([w,T]),h=h||T.type}let y=o.parse(i[i.length-1],i.length-1,h);if(!y)return null;if(!h)throw new Error("Can't infer output type");return new Bl(h,f,y)}evaluate(i){for(let[o,h]of this.branches)if(o.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(let[o,h]of this.branches)i(o),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class fc{constructor(i,o,h,f){this.type=i,this.input=o,this.beginIndex=h,this.endIndex=f}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,At),f=o.parse(i[2],2,Ye);if(!h||!f)return null;if(!jp(h.type,[gn(At),zt,At]))return o.error(`Expected first argument to be of type array or string, but found ${sr(h.type)} instead`);if(i.length===4){let y=o.parse(i[3],3,Ye);return y?new fc(h.type,h,f,y):null}return new fc(h.type,h,f)}evaluate(i){let o=this.input.evaluate(i),h=this.beginIndex.evaluate(i),f;if(this.endIndex&&(f=this.endIndex.evaluate(i)),Jo(o,["string"]))return[...o].slice(h,f).join("");if(Jo(o,["array"]))return o.slice(h,f);throw new lr(`Expected first argument to be of type array or string, but found ${sr(vt(o))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function js(s,i){let o=s.length-1,h,f,y=0,_=o,w=0;for(;y<=_;)if(w=Math.floor((y+_)/2),h=s[w],f=s[w+1],h<=i){if(w===o||i<f)return w;y=w+1}else{if(!(h>i))throw new lr("Input is not a number.");_=w-1}return 0}class kr{constructor(i,o,h){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(let[f,y]of h)this.labels.push(f),this.outputs.push(y)}static parse(i,o){if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");let h=o.parse(i[1],1,Ye);if(!h)return null;let f=[],y=null;o.expectedType&&o.expectedType.kind!=="value"&&(y=o.expectedType);for(let _=1;_<i.length;_+=2){let w=_===1?-1/0:i[_],T=i[_+1],C=_,M=_+1;if(typeof w!="number")return o.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",C);if(f.length&&f[f.length-1][0]>=w)return o.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",C);let z=o.parse(T,M,y);if(!z)return null;y=y||z.type,f.push([w,z])}return new kr(y,h,f)}evaluate(i){let o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(i);let f=this.input.evaluate(i);if(f<=o[0])return h[0].evaluate(i);let y=o.length;return f>=o[y-1]?h[y-1].evaluate(i):h[js(o,f)].evaluate(i)}eachChild(i){i(this.input);for(let o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function E_(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var pc,Kp,ZS=function(){if(Kp)return pc;function s(i,o,h,f){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*o,this.by=3*(f-o)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=o,this.p2x=h,this.p2y=f}return Kp=1,pc=s,s.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,o){if(o===void 0&&(o=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,f=0;f<8;f++){var y=this.sampleCurveX(h)-i;if(Math.abs(y)<o)return h;var _=this.sampleCurveDerivativeX(h);if(Math.abs(_)<1e-6)break;h-=y/_}var w=0,T=1;for(h=i,f=0;f<20&&(y=this.sampleCurveX(h),!(Math.abs(y-i)<o));f++)i>y?w=h:T=h,h=.5*(T-w)+w;return h},solve:function(i,o){return this.sampleCurveY(this.solveCurveX(i,o))}},pc}(),jl=E_(ZS);class Pi{constructor(i,o,h,f,y){this.type=i,this.operator=o,this.interpolation=h,this.input=f,this.labels=[],this.outputs=[];for(let[_,w]of y)this.labels.push(_),this.outputs.push(w)}static interpolationFactor(i,o,h,f){let y=0;if(i.name==="exponential")y=mc(o,i.base,h,f);else if(i.name==="linear")y=mc(o,1,h,f);else if(i.name==="cubic-bezier"){let _=i.controlPoints;y=new jl(_[0],_[1],_[2],_[3]).solve(mc(o,1,h,f))}return y}static parse(i,o){let[h,f,y,..._]=i;if(!Array.isArray(f)||f.length===0)return o.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){let C=f[1];if(typeof C!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:C}}else{if(f[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(f[0])}`,1,0);{let C=f.slice(1);if(C.length!==4||C.some(M=>typeof M!="number"||M<0||M>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:C}}}if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(y=o.parse(y,2,Ye),!y)return null;let w=[],T=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||o.expectedType==Na?o.expectedType&&o.expectedType.kind!=="value"&&(T=o.expectedType):T=qi;for(let C=0;C<_.length;C+=2){let M=_[C],z=_[C+1],B=C+3,U=C+4;if(typeof M!="number")return o.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",B);if(w.length&&w[w.length-1][0]>=M)return o.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",B);let $=o.parse(z,U,T);if(!$)return null;T=T||$.type,w.push([M,$])}return Qo(T,Ye)||Qo(T,Ls)||Qo(T,qi)||Qo(T,Bh)||Qo(T,kl)||Qo(T,Na)||Qo(T,jh)||Qo(T,gn(Ye))?new Pi(T,h,f,y,w):o.error(`Type ${sr(T)} is not interpolatable.`)}evaluate(i){let o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(i);let f=this.input.evaluate(i);if(f<=o[0])return h[0].evaluate(i);let y=o.length;if(f>=o[y-1])return h[y-1].evaluate(i);let _=js(o,f),w=Pi.interpolationFactor(this.interpolation,f,o[_],o[_+1]),T=h[_].evaluate(i),C=h[_+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return mo(T,C,w);case"color":return Nt.interpolate(T,C,w);case"padding":return pi.interpolate(T,C,w);case"colorArray":return Zr.interpolate(T,C,w);case"numberArray":return Ji.interpolate(T,C,w);case"variableAnchorOffsetCollection":return Qi.interpolate(T,C,w);case"array":return Fs(T,C,w);case"projectionDefinition":return Ni.interpolate(T,C,w)}case"interpolate-hcl":switch(this.type.kind){case"color":return Nt.interpolate(T,C,w,"hcl");case"colorArray":return Zr.interpolate(T,C,w,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Nt.interpolate(T,C,w,"lab");case"colorArray":return Zr.interpolate(T,C,w,"lab")}}}eachChild(i){i(this.input);for(let o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function mc(s,i,o,h){let f=h-o,y=s-o;return f===0?0:i===1?y/f:(Math.pow(i,y)-1)/(Math.pow(i,f)-1)}let Ua={color:Nt.interpolate,number:mo,padding:pi.interpolate,numberArray:Ji.interpolate,colorArray:Zr.interpolate,variableAnchorOffsetCollection:Qi.interpolate,array:Fs};class gc{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h=null,f=o.expectedType;f&&f.kind!=="value"&&(h=f);let y=[];for(let w of i.slice(1)){let T=o.parse(w,1+y.length,h,void 0,{typeAnnotation:"omit"});if(!T)return null;h=h||T.type,y.push(T)}if(!h)throw new Error("No output type");let _=f&&y.some(w=>cc(f,w.type));return new gc(_?At:h,y)}evaluate(i){let o,h=null,f=0;for(let y of this.args)if(f++,h=y.evaluate(i),h&&h instanceof Cn&&!h.available&&(o||(o=h.name),h=null,f===this.args.length&&(h=o)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function vc(s,i){return s==="=="||s==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function yc(s,i,o,h){return h.compare(i,o)===0}function Bi(s,i,o){let h=s!=="=="&&s!=="!=";return class _fe{constructor(y,_,w){this.type=Rt,this.lhs=y,this.rhs=_,this.collator=w,this.hasUntypedArgument=y.type.kind==="value"||_.type.kind==="value"}static parse(y,_){if(y.length!==3&&y.length!==4)return _.error("Expected two or three arguments.");let w=y[0],T=_.parse(y[1],1,At);if(!T)return null;if(!vc(w,T.type))return _.concat(1).error(`"${w}" comparisons are not supported for type '${sr(T.type)}'.`);let C=_.parse(y[2],2,At);if(!C)return null;if(!vc(w,C.type))return _.concat(2).error(`"${w}" comparisons are not supported for type '${sr(C.type)}'.`);if(T.type.kind!==C.type.kind&&T.type.kind!=="value"&&C.type.kind!=="value")return _.error(`Cannot compare types '${sr(T.type)}' and '${sr(C.type)}'.`);h&&(T.type.kind==="value"&&C.type.kind!=="value"?T=new Mn(C.type,[T]):T.type.kind!=="value"&&C.type.kind==="value"&&(C=new Mn(T.type,[C])));let M=null;if(y.length===4){if(T.type.kind!=="string"&&C.type.kind!=="string"&&T.type.kind!=="value"&&C.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(M=_.parse(y[3],3,Nh),!M)return null}return new _fe(T,C,M)}evaluate(y){let _=this.lhs.evaluate(y),w=this.rhs.evaluate(y);if(h&&this.hasUntypedArgument){let T=vt(_),C=vt(w);if(T.kind!==C.kind||T.kind!=="string"&&T.kind!=="number")throw new lr(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${T.kind}, ${C.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let T=vt(_),C=vt(w);if(T.kind!=="string"||C.kind!=="string")return i(y,_,w)}return this.collator?o(y,_,w,this.collator.evaluate(y)):i(y,_,w)}eachChild(y){y(this.lhs),y(this.rhs),this.collator&&y(this.collator)}outputDefined(){return!0}}}let I_=Bi("==",function(s,i,o){return i===o},yc),Hh=Bi("!=",function(s,i,o){return i!==o},function(s,i,o,h){return!yc(0,i,o,h)}),WS=Bi("<",function(s,i,o){return i<o},function(s,i,o,h){return h.compare(i,o)<0}),Xp=Bi(">",function(s,i,o){return i>o},function(s,i,o,h){return h.compare(i,o)>0}),HS=Bi("<=",function(s,i,o){return i<=o},function(s,i,o,h){return h.compare(i,o)<=0}),KS=Bi(">=",function(s,i,o){return i>=o},function(s,i,o,h){return h.compare(i,o)>=0});class Kh{constructor(i,o,h){this.type=Nh,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=o}static parse(i,o){if(i.length!==2)return o.error("Expected one argument.");let h=i[1];if(typeof h!="object"||Array.isArray(h))return o.error("Collator options argument must be an object.");let f=o.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,Rt);if(!f)return null;let y=o.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,Rt);if(!y)return null;let _=null;return h.locale&&(_=o.parse(h.locale,1,zt),!_)?null:new Kh(f,y,_)}evaluate(i){return new Ns(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Yp{constructor(i,o,h,f,y){this.type=zt,this.number=i,this.locale=o,this.currency=h,this.minFractionDigits=f,this.maxFractionDigits=y}static parse(i,o){if(i.length!==3)return o.error("Expected two arguments.");let h=o.parse(i[1],1,Ye);if(!h)return null;let f=i[2];if(typeof f!="object"||Array.isArray(f))return o.error("NumberFormat options argument must be an object.");let y=null;if(f.locale&&(y=o.parse(f.locale,1,zt),!y))return null;let _=null;if(f.currency&&(_=o.parse(f.currency,1,zt),!_))return null;let w=null;if(f["min-fraction-digits"]&&(w=o.parse(f["min-fraction-digits"],1,Ye),!w))return null;let T=null;return f["max-fraction-digits"]&&(T=o.parse(f["max-fraction-digits"],1,Ye),!T)?null:new Yp(h,y,_,w,T)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Us{constructor(i){this.type=Yo,this.sections=i}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h=i[1];if(!Array.isArray(h)&&typeof h=="object")return o.error("First argument must be an image or text section.");let f=[],y=!1;for(let _=1;_<=i.length-1;++_){let w=i[_];if(y&&typeof w=="object"&&!Array.isArray(w)){y=!1;let T=null;if(w["font-scale"]&&(T=o.parse(w["font-scale"],1,Ye),!T))return null;let C=null;if(w["text-font"]&&(C=o.parse(w["text-font"],1,gn(zt)),!C))return null;let M=null;if(w["text-color"]&&(M=o.parse(w["text-color"],1,qi),!M))return null;let z=null;if(w["vertical-align"]){if(typeof w["vertical-align"]=="string"&&!Uh.includes(w["vertical-align"]))return o.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${w["vertical-align"]}' instead.`);if(z=o.parse(w["vertical-align"],1,zt),!z)return null}let B=f[f.length-1];B.scale=T,B.font=C,B.textColor=M,B.verticalAlign=z}else{let T=o.parse(i[_],1,At);if(!T)return null;let C=T.type.kind;if(C!=="string"&&C!=="value"&&C!=="null"&&C!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");y=!0,f.push({content:T,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Us(f)}evaluate(i){return new Yi(this.sections.map(o=>{let h=o.content.evaluate(i);return vt(h)===Or?new $h("",h,null,null,null,o.verticalAlign?o.verticalAlign.evaluate(i):null):new $h(Et(h),null,o.scale?o.scale.evaluate(i):null,o.font?o.font.evaluate(i).join(","):null,o.textColor?o.textColor.evaluate(i):null,o.verticalAlign?o.verticalAlign.evaluate(i):null)}))}eachChild(i){for(let o of this.sections)i(o.content),o.scale&&i(o.scale),o.font&&i(o.font),o.textColor&&i(o.textColor),o.verticalAlign&&i(o.verticalAlign)}outputDefined(){return!1}}class Jp{constructor(i){this.type=Or,this.input=i}static parse(i,o){if(i.length!==2)return o.error("Expected two arguments.");let h=o.parse(i[1],1,zt);return h?new Jp(h):o.error("No image name provided.")}evaluate(i){let o=this.input.evaluate(i),h=Cn.fromString(o);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(o)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class Xh{constructor(i){this.type=Ye,this.input=i}static parse(i,o){if(i.length!==2)return o.error(`Expected 1 argument, but found ${i.length-1} instead.`);let h=o.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${sr(h.type)} instead.`):new Xh(h):null}evaluate(i){let o=this.input.evaluate(i);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new lr(`Expected value to be of type string or array, but found ${sr(vt(o))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}let ga=8192;function XS(s,i){let o=(180+s[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,i.z);return[Math.round(o*f*ga),Math.round(h*f*ga)]}function Yh(s,i){let o=Math.pow(2,i.z);return[(f=(s[0]/ga+i.x)/o,360*f-180),(h=(s[1]/ga+i.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,f}function _c(s,i){s[0]=Math.min(s[0],i[0]),s[1]=Math.min(s[1],i[1]),s[2]=Math.max(s[2],i[0]),s[3]=Math.max(s[3],i[1])}function xc(s,i){return!(s[0]<=i[0]||s[2]>=i[2]||s[1]<=i[1]||s[3]>=i[3])}function YS(s,i,o){let h=s[0]-i[0],f=s[1]-i[1],y=s[0]-o[0],_=s[1]-o[1];return h*_-y*f==0&&h*y<=0&&f*_<=0}function Jh(s,i,o,h){return(f=[h[0]-o[0],h[1]-o[1]])[0]*(y=[i[0]-s[0],i[1]-s[1]])[1]-f[1]*y[0]!=0&&!(!P_(s,i,o,h)||!P_(o,h,s,i));var f,y}function JS(s,i,o){for(let h of o)for(let f=0;f<h.length-1;++f)if(Jh(s,i,h[f],h[f+1]))return!0;return!1}function $s(s,i,o=!1){let h=!1;for(let w of i)for(let T=0;T<w.length-1;T++){if(YS(s,w[T],w[T+1]))return o;(y=w[T])[1]>(f=s)[1]!=(_=w[T+1])[1]>f[1]&&f[0]<(_[0]-y[0])*(f[1]-y[1])/(_[1]-y[1])+y[0]&&(h=!h)}var f,y,_;return h}function q_(s,i){for(let o of i)if($s(s,o))return!0;return!1}function Qp(s,i){for(let o of s)if(!$s(o,i))return!1;for(let o=0;o<s.length-1;++o)if(JS(s[o],s[o+1],i))return!1;return!0}function QS(s,i){for(let o of i)if(Qp(s,o))return!0;return!1}function P_(s,i,o,h){let f=h[0]-o[0],y=h[1]-o[1],_=(s[0]-o[0])*y-f*(s[1]-o[1]),w=(i[0]-o[0])*y-f*(i[1]-o[1]);return _>0&&w<0||_<0&&w>0}function em(s,i,o){let h=[];for(let f=0;f<s.length;f++){let y=[];for(let _=0;_<s[f].length;_++){let w=XS(s[f][_],o);_c(i,w),y.push(w)}h.push(y)}return h}function A_(s,i,o){let h=[];for(let f=0;f<s.length;f++){let y=em(s[f],i,o);h.push(y)}return h}function Qh(s,i,o,h){if(s[0]<o[0]||s[0]>o[2]){let f=.5*h,y=s[0]-o[0]>f?-h:o[0]-s[0]>f?h:0;y===0&&(y=s[0]-o[2]>f?-h:o[2]-s[0]>f?h:0),s[0]+=y}_c(i,s)}function C_(s,i,o,h){let f=Math.pow(2,h.z)*ga,y=[h.x*ga,h.y*ga],_=[];for(let w of s)for(let T of w){let C=[T.x+y[0],T.y+y[1]];Qh(C,i,o,f),_.push(C)}return _}function M_(s,i,o,h){let f=Math.pow(2,h.z)*ga,y=[h.x*ga,h.y*ga],_=[];for(let T of s){let C=[];for(let M of T){let z=[M.x+y[0],M.y+y[1]];_c(i,z),C.push(z)}_.push(C)}if(i[2]-i[0]<=f/2){(w=i)[0]=w[1]=1/0,w[2]=w[3]=-1/0;for(let T of _)for(let C of T)Qh(C,i,o,f)}var w;return _}class Vs{constructor(i,o){this.type=Rt,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Bs(i[1])){let h=i[1];if(h.type==="FeatureCollection"){let f=[];for(let y of h.features){let{type:_,coordinates:w}=y.geometry;_==="Polygon"&&f.push(w),_==="MultiPolygon"&&f.push(...w)}if(f.length)return new Vs(h,{type:"MultiPolygon",coordinates:f})}else if(h.type==="Feature"){let f=h.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new Vs(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Vs(h,h)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(o,h){let f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(h.type==="Polygon"){let w=em(h.coordinates,y,_),T=C_(o.geometry(),f,y,_);if(!xc(f,y))return!1;for(let C of T)if(!$s(C,w))return!1}if(h.type==="MultiPolygon"){let w=A_(h.coordinates,y,_),T=C_(o.geometry(),f,y,_);if(!xc(f,y))return!1;for(let C of T)if(!q_(C,w))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(o,h){let f=[1/0,1/0,-1/0,-1/0],y=[1/0,1/0,-1/0,-1/0],_=o.canonicalID();if(h.type==="Polygon"){let w=em(h.coordinates,y,_),T=M_(o.geometry(),f,y,_);if(!xc(f,y))return!1;for(let C of T)if(!Qp(C,w))return!1}if(h.type==="MultiPolygon"){let w=A_(h.coordinates,y,_),T=M_(o.geometry(),f,y,_);if(!xc(f,y))return!1;for(let C of T)if(!QS(C,w))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let tm=class{constructor(s=[],i=(o,h)=>o<h?-1:o>h?1:0){if(this.data=s,this.length=this.data.length,this.compare=i,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;let s=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),s}peek(){return this.data[0]}_up(s){let{data:i,compare:o}=this,h=i[s];for(;s>0;){let f=s-1>>1,y=i[f];if(o(h,y)>=0)break;i[s]=y,s=f}i[s]=h}_down(s){let{data:i,compare:o}=this,h=this.length>>1,f=i[s];for(;s<h;){let y=1+(s<<1),_=y+1;if(_<this.length&&o(i[_],i[y])<0&&(y=_),o(i[y],f)>=0)break;i[s]=i[y],s=y}i[s]=f}};function rm(s,i,o=0,h=s.length-1,f=eT){for(;h>o;){if(h-o>600){let T=h-o+1,C=i-o+1,M=Math.log(T),z=.5*Math.exp(2*M/3),B=.5*Math.sqrt(M*z*(T-z)/T)*(C-T/2<0?-1:1);rm(s,i,Math.max(o,Math.floor(i-C*z/T+B)),Math.min(h,Math.floor(i+(T-C)*z/T+B)),f)}let y=s[i],_=o,w=h;for(bc(s,o,i),f(s[h],y)>0&&bc(s,o,h);_<w;){for(bc(s,_,w),_++,w--;f(s[_],y)<0;)_++;for(;f(s[w],y)>0;)w--}f(s[o],y)===0?bc(s,o,w):(w++,bc(s,w,h)),w<=i&&(o=w+1),i<=w&&(h=w-1)}}function bc(s,i,o){let h=s[i];s[i]=s[o],s[o]=h}function eT(s,i){return s<i?-1:s>i?1:0}function wc(s,i){if(s.length<=1)return[s];let o=[],h,f;for(let y of s){let _=tT(y);_!==0&&(y.area=Math.abs(_),f===void 0&&(f=_<0),f===_<0?(h&&o.push(h),h=[y]):h.push(y))}if(h&&o.push(h),i>1)for(let y=0;y<o.length;y++)o[y].length<=i||(rm(o[y],i,1,o[y].length-1,R_),o[y]=o[y].slice(0,i));return o}function R_(s,i){return i.area-s.area}function tT(s){let i=0;for(let o,h,f=0,y=s.length,_=y-1;f<y;_=f++)o=s[f],h=s[_],i+=(h.x-o.x)*(o.y+h.y);return i}let O_=1/298.257223563,k_=O_*(2-O_),im=Math.PI/180;class nm{constructor(i){let o=6378.137*im*1e3,h=Math.cos(i*im),f=1/(1-k_*(1-h*h)),y=Math.sqrt(f);this.kx=o*y*h,this.ky=o*y*f*(1-k_)}distance(i,o){let h=this.wrap(i[0]-o[0])*this.kx,f=(i[1]-o[1])*this.ky;return Math.sqrt(h*h+f*f)}pointOnLine(i,o){let h,f,y,_,w=1/0;for(let T=0;T<i.length-1;T++){let C=i[T][0],M=i[T][1],z=this.wrap(i[T+1][0]-C)*this.kx,B=(i[T+1][1]-M)*this.ky,U=0;z===0&&B===0||(U=(this.wrap(o[0]-C)*this.kx*z+(o[1]-M)*this.ky*B)/(z*z+B*B),U>1?(C=i[T+1][0],M=i[T+1][1]):U>0&&(C+=z/this.kx*U,M+=B/this.ky*U)),z=this.wrap(o[0]-C)*this.kx,B=(o[1]-M)*this.ky;let $=z*z+B*B;$<w&&(w=$,h=C,f=M,y=T,_=U)}return{point:[h,f],index:y,t:Math.max(0,Math.min(1,_))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function D_(s,i){return i[0]-s[0]}function ed(s){return s[1]-s[0]+1}function vo(s,i){return s[1]>=s[0]&&s[1]<i}function Kt(s,i){if(s[0]>s[1])return[null,null];let o=ed(s);if(i){if(o===2)return[s,null];let f=Math.floor(o/2);return[[s[0],s[0]+f],[s[0]+f,s[1]]]}if(o===1)return[s,null];let h=Math.floor(o/2)-1;return[[s[0],s[0]+h],[s[0]+h+1,s[1]]]}function am(s,i){if(!vo(i,s.length))return[1/0,1/0,-1/0,-1/0];let o=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)_c(o,s[h]);return o}function om(s){let i=[1/0,1/0,-1/0,-1/0];for(let o of s)for(let h of o)_c(i,h);return i}function L_(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function sm(s,i,o){if(!L_(s)||!L_(i))return NaN;let h=0,f=0;return s[2]<i[0]&&(h=i[0]-s[2]),s[0]>i[2]&&(h=s[0]-i[2]),s[1]>i[3]&&(f=s[1]-i[3]),s[3]<i[1]&&(f=i[1]-s[3]),o.distance([0,0],[h,f])}function Gs(s,i,o){let h=o.pointOnLine(i,s);return o.distance(s,h.point)}function lm(s,i,o,h,f){let y=Math.min(Gs(s,[o,h],f),Gs(i,[o,h],f)),_=Math.min(Gs(o,[s,i],f),Gs(h,[s,i],f));return Math.min(y,_)}function rT(s,i,o,h,f){if(!vo(i,s.length)||!vo(h,o.length))return 1/0;let y=1/0;for(let _=i[0];_<i[1];++_){let w=s[_],T=s[_+1];for(let C=h[0];C<h[1];++C){let M=o[C],z=o[C+1];if(Jh(w,T,M,z))return 0;y=Math.min(y,lm(w,T,M,z,f))}}return y}function iT(s,i,o,h,f){if(!vo(i,s.length)||!vo(h,o.length))return NaN;let y=1/0;for(let _=i[0];_<=i[1];++_)for(let w=h[0];w<=h[1];++w)if(y=Math.min(y,f.distance(s[_],o[w])),y===0)return y;return y}function nT(s,i,o){if($s(s,i,!0))return 0;let h=1/0;for(let f of i){let y=f[0],_=f[f.length-1];if(y!==_&&(h=Math.min(h,Gs(s,[_,y],o)),h===0))return h;let w=o.pointOnLine(f,s);if(h=Math.min(h,o.distance(s,w.point)),h===0)return h}return h}function aT(s,i,o,h){if(!vo(i,s.length))return NaN;for(let y=i[0];y<=i[1];++y)if($s(s[y],o,!0))return 0;let f=1/0;for(let y=i[0];y<i[1];++y){let _=s[y],w=s[y+1];for(let T of o)for(let C=0,M=T.length,z=M-1;C<M;z=C++){let B=T[z],U=T[C];if(Jh(_,w,B,U))return 0;f=Math.min(f,lm(_,w,B,U,h))}}return f}function z_(s,i){for(let o of s)for(let h of o)if($s(h,i,!0))return!0;return!1}function oT(s,i,o,h=1/0){let f=om(s),y=om(i);if(h!==1/0&&sm(f,y,o)>=h)return h;if(xc(f,y)){if(z_(s,i))return 0}else if(z_(i,s))return 0;let _=1/0;for(let w of s)for(let T=0,C=w.length,M=C-1;T<C;M=T++){let z=w[M],B=w[T];for(let U of i)for(let $=0,Z=U.length,J=Z-1;$<Z;J=$++){let ie=U[J],ye=U[$];if(Jh(z,B,ie,ye))return 0;_=Math.min(_,lm(z,B,ie,ye,o))}}return _}function F_(s,i,o,h,f,y){if(!y)return;let _=sm(am(h,y),f,o);_<i&&s.push([_,y,[0,0]])}function td(s,i,o,h,f,y,_){if(!y||!_)return;let w=sm(am(h,y),am(f,_),o);w<i&&s.push([w,y,_])}function rd(s,i,o,h,f=1/0){let y=Math.min(h.distance(s[0],o[0][0]),f);if(y===0)return y;let _=new tm([[0,[0,s.length-1],[0,0]]],D_),w=om(o);for(;_.length>0;){let T=_.pop();if(T[0]>=y)continue;let C=T[1],M=i?50:100;if(ed(C)<=M){if(!vo(C,s.length))return NaN;if(i){let z=aT(s,C,o,h);if(isNaN(z)||z===0)return z;y=Math.min(y,z)}else for(let z=C[0];z<=C[1];++z){let B=nT(s[z],o,h);if(y=Math.min(y,B),y===0)return 0}}else{let z=Kt(C,i);F_(_,y,h,s,w,z[0]),F_(_,y,h,s,w,z[1])}}return y}function id(s,i,o,h,f,y=1/0){let _=Math.min(y,f.distance(s[0],o[0]));if(_===0)return _;let w=new tm([[0,[0,s.length-1],[0,o.length-1]]],D_);for(;w.length>0;){let T=w.pop();if(T[0]>=_)continue;let C=T[1],M=T[2],z=i?50:100,B=h?50:100;if(ed(C)<=z&&ed(M)<=B){if(!vo(C,s.length)&&vo(M,o.length))return NaN;let U;if(i&&h)U=rT(s,C,o,M,f),_=Math.min(_,U);else if(i&&!h){let $=s.slice(C[0],C[1]+1);for(let Z=M[0];Z<=M[1];++Z)if(U=Gs(o[Z],$,f),_=Math.min(_,U),_===0)return _}else if(!i&&h){let $=o.slice(M[0],M[1]+1);for(let Z=C[0];Z<=C[1];++Z)if(U=Gs(s[Z],$,f),_=Math.min(_,U),_===0)return _}else U=iT(s,C,o,M,f),_=Math.min(_,U)}else{let U=Kt(C,i),$=Kt(M,h);td(w,_,f,s,o,U[0],$[0]),td(w,_,f,s,o,U[0],$[1]),td(w,_,f,s,o,U[1],$[0]),td(w,_,f,s,o,U[1],$[1])}}return _}function um(s){return s.type==="MultiPolygon"?s.coordinates.map(i=>({type:"Polygon",coordinates:i})):s.type==="MultiLineString"?s.coordinates.map(i=>({type:"LineString",coordinates:i})):s.type==="MultiPoint"?s.coordinates.map(i=>({type:"Point",coordinates:i})):[s]}class Zs{constructor(i,o){this.type=Ye,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(Bs(i[1])){let h=i[1];if(h.type==="FeatureCollection")return new Zs(h,h.features.map(f=>um(f.geometry)).flat());if(h.type==="Feature")return new Zs(h,um(h.geometry));if("type"in h&&"coordinates"in h)return new Zs(h,um(h))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(o,h){let f=o.geometry(),y=f.flat().map(T=>Yh([T.x,T.y],o.canonical));if(f.length===0)return NaN;let _=new nm(y[0][1]),w=1/0;for(let T of h){switch(T.type){case"Point":w=Math.min(w,id(y,!1,[T.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,id(y,!1,T.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,rd(y,!1,T.coordinates,_,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="LineString")return function(o,h){let f=o.geometry(),y=f.flat().map(T=>Yh([T.x,T.y],o.canonical));if(f.length===0)return NaN;let _=new nm(y[0][1]),w=1/0;for(let T of h){switch(T.type){case"Point":w=Math.min(w,id(y,!0,[T.coordinates],!1,_,w));break;case"LineString":w=Math.min(w,id(y,!0,T.coordinates,!0,_,w));break;case"Polygon":w=Math.min(w,rd(y,!0,T.coordinates,_,w))}if(w===0)return w}return w}(i,this.geometries);if(i.geometryType()==="Polygon")return function(o,h){let f=o.geometry();if(f.length===0||f[0].length===0)return NaN;let y=wc(f,0).map(T=>T.map(C=>C.map(M=>Yh([M.x,M.y],o.canonical)))),_=new nm(y[0][0][0][1]),w=1/0;for(let T of h)for(let C of y){switch(T.type){case"Point":w=Math.min(w,rd([T.coordinates],!1,C,_,w));break;case"LineString":w=Math.min(w,rd(T.coordinates,!0,C,_,w));break;case"Polygon":w=Math.min(w,oT(C,T.coordinates,_,w))}if(w===0)return w}return w}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Sc{constructor(i){this.type=At,this.key=i}static parse(i,o){if(i.length!==2)return o.error(`Expected 1 argument, but found ${i.length-1} instead.`);let h=i[1];return h==null?o.error("Global state property must be defined."):typeof h!="string"?o.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new Sc(h)}evaluate(i){var o;let h=(o=i.globals)===null||o===void 0?void 0:o.globalState;return h&&Object.keys(h).length!==0?Fl(h,this.key):null}eachChild(){}outputDefined(){return!1}}let Ul={"==":I_,"!=":Hh,">":Xp,"<":WS,">=":KS,"<=":HS,array:Mn,at:Zh,boolean:Mn,case:Bl,coalesce:gc,collator:Kh,format:Us,image:Jp,in:Wh,"index-of":ma,interpolate:Pi,"interpolate-hcl":Pi,"interpolate-lab":Pi,length:Xh,let:dc,literal:go,match:mi,number:Mn,"number-format":Yp,object:Mn,slice:fc,step:kr,string:Mn,"to-boolean":ja,"to-color":ja,"to-number":ja,"to-string":ja,var:Gh,within:Vs,distance:Zs,"global-state":Sc};class Gn{constructor(i,o,h,f){this.name=i,this.type=o,this._evaluate=h,this.args=f}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,o){let h=i[0],f=Gn.definitions[h];if(!f)return o.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let y=Array.isArray(f)?f[0]:f.type,_=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,w=_.filter(([C])=>!Array.isArray(C)||C.length===i.length-1),T=null;for(let[C,M]of w){T=new Nl(o.registry,nd,o.path,null,o.scope);let z=[],B=!1;for(let U=1;U<i.length;U++){let $=i[U],Z=Array.isArray(C)?C[U-1]:C.type,J=T.parse($,1+z.length,Z);if(!J){B=!0;break}z.push(J)}if(!B)if(Array.isArray(C)&&C.length!==z.length)T.error(`Expected ${C.length} arguments, but found ${z.length} instead.`);else{for(let U=0;U<z.length;U++){let $=Array.isArray(C)?C[U]:C.type,Z=z[U];T.concat(U+1).checkSubtype($,Z.type)}if(T.errors.length===0)return new Gn(h,y,M,z)}}if(w.length===1)o.errors.push(...T.errors);else{let C=(w.length?w:_).map(([z])=>{return B=z,Array.isArray(B)?`(${B.map(sr).join(", ")})`:`(${sr(B.type)}...)`;var B}).join(" | "),M=[];for(let z=1;z<i.length;z++){let B=o.parse(i[z],1+M.length);if(!B)return null;M.push(sr(B.type))}o.error(`Expected arguments of type ${C}, but found (${M.join(", ")}) instead.`)}return null}static register(i,o){Gn.definitions=o;for(let h in o)i[h]=Gn}}function N_(s,[i,o,h,f]){i=i.evaluate(s),o=o.evaluate(s),h=h.evaluate(s);let y=f?f.evaluate(s):1,_=pr(i,o,h,y);if(_)throw new lr(_);return new Nt(i/255,o/255,h/255,y,!1)}function B_(s,i){return s in i}function cm(s,i){let o=i[s];return o===void 0?null:o}function Ws(s){return{type:s}}function nd(s){if(s instanceof Gh)return nd(s.boundExpression);if(s instanceof Gn&&s.name==="error"||s instanceof Kh||s instanceof Vs||s instanceof Zs||s instanceof Sc)return!1;let i=s instanceof ja||s instanceof Mn,o=!0;return s.eachChild(h=>{o=i?o&&nd(h):o&&h instanceof go}),!!o&&ad(s)&&od(s,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function ad(s){if(s instanceof Gn&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof Vs||s instanceof Zs)return!1;let i=!0;return s.eachChild(o=>{i&&!ad(o)&&(i=!1)}),i}function Tc(s){if(s instanceof Gn&&s.name==="feature-state")return!1;let i=!0;return s.eachChild(o=>{i&&!Tc(o)&&(i=!1)}),i}function od(s,i){if(s instanceof Gn&&i.indexOf(s.name)>=0)return!1;let o=!0;return s.eachChild(h=>{o&&!od(h,i)&&(o=!1)}),o}function j_(s){return{result:"success",value:s}}function $l(s){return{result:"error",value:s}}function ts(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function U_(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function hm(s){return!!s.expression&&s.expression.interpolated}function Ut(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Ec(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)&&vt(s)===Xo}function sT(s){return s}function $_(s,i){let o=s.stops&&typeof s.stops[0][0]=="object",h=o||!(o||s.property!==void 0),f=s.type||(hm(i)?"exponential":"interval"),y=function(M){switch(M.type){case"color":return Nt.parse;case"padding":return pi.parse;case"numberArray":return Ji.parse;case"colorArray":return Zr.parse;default:return null}}(i);if(y&&((s=Fi({},s)).stops&&(s.stops=s.stops.map(M=>[M[0],y(M[1])])),s.default=y(s.default?s.default:i.default)),s.colorSpace&&(_=s.colorSpace)!=="rgb"&&_!=="hcl"&&_!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var _;let w=function(M){switch(M){case"exponential":return G_;case"interval":return lT;case"categorical":return V_;case"identity":return uT;default:throw new Error(`Unknown function type "${M}"`)}}(f),T,C;if(f==="categorical"){T=Object.create(null);for(let M of s.stops)T[M[0]]=M[1];C=typeof s.stops[0][0]}if(o){let M={},z=[];for(let $=0;$<s.stops.length;$++){let Z=s.stops[$],J=Z[0].zoom;M[J]===void 0&&(M[J]={zoom:J,type:s.type,property:s.property,default:s.default,stops:[]},z.push(J)),M[J].stops.push([Z[0].value,Z[1]])}let B=[];for(let $ of z)B.push([M[$].zoom,$_(M[$],i)]);let U={name:"linear"};return{kind:"composite",interpolationType:U,interpolationFactor:Pi.interpolationFactor.bind(void 0,U),zoomStops:B.map($=>$[0]),evaluate:({zoom:$},Z)=>G_({stops:B,base:s.base},i,$).evaluate($,Z)}}if(h){let M=f==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Pi.interpolationFactor.bind(void 0,M),zoomStops:s.stops.map(z=>z[0]),evaluate:({zoom:z})=>w(s,i,z,T,C)}}return{kind:"source",evaluate(M,z){let B=z&&z.properties?z.properties[s.property]:void 0;return B===void 0?rs(s.default,i.default):w(s,i,B,T,C)}}}function rs(s,i,o){return s!==void 0?s:i!==void 0?i:o!==void 0?o:void 0}function V_(s,i,o,h,f){return rs(typeof o===f?h[o]:void 0,s.default,i.default)}function lT(s,i,o){if(Ut(o)!=="number")return rs(s.default,i.default);let h=s.stops.length;if(h===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[h-1][0])return s.stops[h-1][1];let f=js(s.stops.map(y=>y[0]),o);return s.stops[f][1]}function G_(s,i,o){let h=s.base!==void 0?s.base:1;if(Ut(o)!=="number")return rs(s.default,i.default);let f=s.stops.length;if(f===1||o<=s.stops[0][0])return s.stops[0][1];if(o>=s.stops[f-1][0])return s.stops[f-1][1];let y=js(s.stops.map(M=>M[0]),o),_=function(M,z,B,U){let $=U-B,Z=M-B;return $===0?0:z===1?Z/$:(Math.pow(z,Z)-1)/(Math.pow(z,$)-1)}(o,h,s.stops[y][0],s.stops[y+1][0]),w=s.stops[y][1],T=s.stops[y+1][1],C=Ua[i.type]||sT;return typeof w.evaluate=="function"?{evaluate(...M){let z=w.evaluate.apply(void 0,M),B=T.evaluate.apply(void 0,M);if(z!==void 0&&B!==void 0)return C(z,B,_,s.colorSpace)}}:C(w,T,_,s.colorSpace)}function uT(s,i,o){switch(i.type){case"color":o=Nt.parse(o);break;case"formatted":o=Yi.fromString(o.toString());break;case"resolvedImage":o=Cn.fromString(o.toString());break;case"padding":o=pi.parse(o);break;case"colorArray":o=Zr.parse(o);break;case"numberArray":o=Ji.parse(o);break;default:Ut(o)===i.type||i.type==="enum"&&i.values[o]||(o=void 0)}return rs(o,s.default,i.default)}Gn.register(Ul,{error:[{kind:"error"},[zt],(s,[i])=>{throw new lr(i.evaluate(s))}],typeof:[zt,[At],(s,[i])=>sr(vt(i.evaluate(s)))],"to-rgba":[gn(Ye,4),[qi],(s,[i])=>{let[o,h,f,y]=i.evaluate(s).rgb;return[255*o,255*h,255*f,y]}],rgb:[qi,[Ye,Ye,Ye],N_],rgba:[qi,[Ye,Ye,Ye,Ye],N_],has:{type:Rt,overloads:[[[zt],(s,[i])=>B_(i.evaluate(s),s.properties())],[[zt,Xo],(s,[i,o])=>B_(i.evaluate(s),o.evaluate(s))]]},get:{type:At,overloads:[[[zt],(s,[i])=>cm(i.evaluate(s),s.properties())],[[zt,Xo],(s,[i,o])=>cm(i.evaluate(s),o.evaluate(s))]]},"feature-state":[At,[zt],(s,[i])=>cm(i.evaluate(s),s.featureState||{})],properties:[Xo,[],s=>s.properties()],"geometry-type":[zt,[],s=>s.geometryType()],id:[At,[],s=>s.id()],zoom:[Ye,[],s=>s.globals.zoom],"heatmap-density":[Ye,[],s=>s.globals.heatmapDensity||0],elevation:[Ye,[],s=>s.globals.elevation||0],"line-progress":[Ye,[],s=>s.globals.lineProgress||0],accumulated:[At,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[Ye,Ws(Ye),(s,i)=>{let o=0;for(let h of i)o+=h.evaluate(s);return o}],"*":[Ye,Ws(Ye),(s,i)=>{let o=1;for(let h of i)o*=h.evaluate(s);return o}],"-":{type:Ye,overloads:[[[Ye,Ye],(s,[i,o])=>i.evaluate(s)-o.evaluate(s)],[[Ye],(s,[i])=>-i.evaluate(s)]]},"/":[Ye,[Ye,Ye],(s,[i,o])=>i.evaluate(s)/o.evaluate(s)],"%":[Ye,[Ye,Ye],(s,[i,o])=>i.evaluate(s)%o.evaluate(s)],ln2:[Ye,[],()=>Math.LN2],pi:[Ye,[],()=>Math.PI],e:[Ye,[],()=>Math.E],"^":[Ye,[Ye,Ye],(s,[i,o])=>Math.pow(i.evaluate(s),o.evaluate(s))],sqrt:[Ye,[Ye],(s,[i])=>Math.sqrt(i.evaluate(s))],log10:[Ye,[Ye],(s,[i])=>Math.log(i.evaluate(s))/Math.LN10],ln:[Ye,[Ye],(s,[i])=>Math.log(i.evaluate(s))],log2:[Ye,[Ye],(s,[i])=>Math.log(i.evaluate(s))/Math.LN2],sin:[Ye,[Ye],(s,[i])=>Math.sin(i.evaluate(s))],cos:[Ye,[Ye],(s,[i])=>Math.cos(i.evaluate(s))],tan:[Ye,[Ye],(s,[i])=>Math.tan(i.evaluate(s))],asin:[Ye,[Ye],(s,[i])=>Math.asin(i.evaluate(s))],acos:[Ye,[Ye],(s,[i])=>Math.acos(i.evaluate(s))],atan:[Ye,[Ye],(s,[i])=>Math.atan(i.evaluate(s))],min:[Ye,Ws(Ye),(s,i)=>Math.min(...i.map(o=>o.evaluate(s)))],max:[Ye,Ws(Ye),(s,i)=>Math.max(...i.map(o=>o.evaluate(s)))],abs:[Ye,[Ye],(s,[i])=>Math.abs(i.evaluate(s))],round:[Ye,[Ye],(s,[i])=>{let o=i.evaluate(s);return o<0?-Math.round(-o):Math.round(o)}],floor:[Ye,[Ye],(s,[i])=>Math.floor(i.evaluate(s))],ceil:[Ye,[Ye],(s,[i])=>Math.ceil(i.evaluate(s))],"filter-==":[Rt,[zt,At],(s,[i,o])=>s.properties()[i.value]===o.value],"filter-id-==":[Rt,[At],(s,[i])=>s.id()===i.value],"filter-type-==":[Rt,[zt],(s,[i])=>s.geometryType()===i.value],"filter-<":[Rt,[zt,At],(s,[i,o])=>{let h=s.properties()[i.value],f=o.value;return typeof h==typeof f&&h<f}],"filter-id-<":[Rt,[At],(s,[i])=>{let o=s.id(),h=i.value;return typeof o==typeof h&&o<h}],"filter->":[Rt,[zt,At],(s,[i,o])=>{let h=s.properties()[i.value],f=o.value;return typeof h==typeof f&&h>f}],"filter-id->":[Rt,[At],(s,[i])=>{let o=s.id(),h=i.value;return typeof o==typeof h&&o>h}],"filter-<=":[Rt,[zt,At],(s,[i,o])=>{let h=s.properties()[i.value],f=o.value;return typeof h==typeof f&&h<=f}],"filter-id-<=":[Rt,[At],(s,[i])=>{let o=s.id(),h=i.value;return typeof o==typeof h&&o<=h}],"filter->=":[Rt,[zt,At],(s,[i,o])=>{let h=s.properties()[i.value],f=o.value;return typeof h==typeof f&&h>=f}],"filter-id->=":[Rt,[At],(s,[i])=>{let o=s.id(),h=i.value;return typeof o==typeof h&&o>=h}],"filter-has":[Rt,[At],(s,[i])=>i.value in s.properties()],"filter-has-id":[Rt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Rt,[gn(zt)],(s,[i])=>i.value.indexOf(s.geometryType())>=0],"filter-id-in":[Rt,[gn(At)],(s,[i])=>i.value.indexOf(s.id())>=0],"filter-in-small":[Rt,[zt,gn(At)],(s,[i,o])=>o.value.indexOf(s.properties()[i.value])>=0],"filter-in-large":[Rt,[zt,gn(At)],(s,[i,o])=>function(h,f,y,_){for(;y<=_;){let w=y+_>>1;if(f[w]===h)return!0;f[w]>h?_=w-1:y=w+1}return!1}(s.properties()[i.value],o.value,0,o.value.length-1)],all:{type:Rt,overloads:[[[Rt,Rt],(s,[i,o])=>i.evaluate(s)&&o.evaluate(s)],[Ws(Rt),(s,i)=>{for(let o of i)if(!o.evaluate(s))return!1;return!0}]]},any:{type:Rt,overloads:[[[Rt,Rt],(s,[i,o])=>i.evaluate(s)||o.evaluate(s)],[Ws(Rt),(s,i)=>{for(let o of i)if(o.evaluate(s))return!0;return!1}]]},"!":[Rt,[Rt],(s,[i])=>!i.evaluate(s)],"is-supported-script":[Rt,[zt],(s,[i])=>{let o=s.globals&&s.globals.isSupportedScript;return!o||o(i.evaluate(s))}],upcase:[zt,[zt],(s,[i])=>i.evaluate(s).toUpperCase()],downcase:[zt,[zt],(s,[i])=>i.evaluate(s).toLowerCase()],concat:[zt,Ws(At),(s,i)=>i.map(o=>Et(o.evaluate(s))).join("")],"resolved-locale":[zt,[Nh],(s,[i])=>i.evaluate(s).resolvedLocale()]});class dm{constructor(i,o){this.expression=i,this._warningHistory={},this._evaluator=new Hp,this._defaultValue=o?function(h){if(h.type==="color"&&Ec(h.default))return new Nt(0,0,0,0);switch(h.type){case"color":return Nt.parse(h.default)||null;case"padding":return pi.parse(h.default)||null;case"numberArray":return Ji.parse(h.default)||null;case"colorArray":return Zr.parse(h.default)||null;case"variableAnchorOffsetCollection":return Qi.parse(h.default)||null;case"projectionDefinition":return Ni.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(o):null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(i,o,h,f,y,_){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=h,this._evaluator.canonical=f,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_,this.expression.evaluate(this._evaluator)}evaluate(i,o,h,f,y,_){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=h||null,this._evaluator.canonical=f,this._evaluator.availableImages=y||null,this._evaluator.formattedSection=_||null;try{let w=this.expression.evaluate(this._evaluator);if(w==null||typeof w=="number"&&w!=w)return this._defaultValue;if(this._enumValues&&!(w in this._enumValues))throw new lr(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(w)} instead.`);return w}catch(w){return this._warningHistory[w.message]||(this._warningHistory[w.message]=!0,typeof console!="undefined"&&console.warn(w.message)),this._defaultValue}}}function sd(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in Ul}function Ic(s,i){let o=new Nl(Ul,nd,[],i?function(f){let y={color:qi,string:zt,number:Ye,enum:zt,boolean:Rt,formatted:Yo,padding:Bh,numberArray:kl,colorArray:Na,projectionDefinition:Ls,resolvedImage:Or,variableAnchorOffsetCollection:jh};return f.type==="array"?gn(y[f.value]||At,f.length):y[f.type]}(i):void 0),h=o.parse(s,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?j_(new dm(h,i)):$l(o.errors)}class qc{constructor(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent=i!=="constant"&&!Tc(o.expression),this.globalStateRefs=Cc(o.expression)}evaluateWithoutErrorHandling(i,o,h,f,y,_){return this._styleExpression.evaluateWithoutErrorHandling(i,o,h,f,y,_)}evaluate(i,o,h,f,y,_){return this._styleExpression.evaluate(i,o,h,f,y,_)}}class fm{constructor(i,o,h,f){this.kind=i,this.zoomStops=h,this._styleExpression=o,this.isStateDependent=i!=="camera"&&!Tc(o.expression),this.globalStateRefs=Cc(o.expression),this.interpolationType=f}evaluateWithoutErrorHandling(i,o,h,f,y,_){return this._styleExpression.evaluateWithoutErrorHandling(i,o,h,f,y,_)}evaluate(i,o,h,f,y,_){return this._styleExpression.evaluate(i,o,h,f,y,_)}interpolationFactor(i,o,h){return this.interpolationType?Pi.interpolationFactor(this.interpolationType,i,o,h):0}}function Z_(s,i){let o=Ic(s,i);if(o.result==="error")return o;let h=o.value.expression,f=ad(h);if(!f&&!ts(i))return $l([new Tr("","data expressions not supported")]);let y=od(h,["zoom"]);if(!y&&!U_(i))return $l([new Tr("","zoom expressions not supported")]);let _=Ac(h);return _||y?_ instanceof Tr?$l([_]):_ instanceof Pi&&!hm(i)?$l([new Tr("","\"interpolate\" expressions cannot be used with this property")]):j_(_?new fm(f?"camera":"composite",o.value,_.labels,_ instanceof Pi?_.interpolation:void 0):new qc(f?"constant":"source",o.value)):$l([new Tr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class Pc{constructor(i,o){this._parameters=i,this._specification=o,Fi(this,$_(this._parameters,this._specification))}static deserialize(i){return new Pc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Ac(s){let i=null;if(s instanceof dc)i=Ac(s.result);else if(s instanceof gc){for(let o of s.args)if(i=Ac(o),i)break}else(s instanceof kr||s instanceof Pi)&&s.input instanceof Gn&&s.input.name==="zoom"&&(i=s);return i instanceof Tr||s.eachChild(o=>{let h=Ac(o);h instanceof Tr?i=h:!i&&h?i=new Tr("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):i&&h&&i!==h&&(i=new Tr("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),i}function Cc(s,i=new Set){return s instanceof Sc&&i.add(s.key),s.eachChild(o=>{Cc(o,i)}),i}function ld(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(let i of s.slice(1))if(!ld(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}let pm={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Hs(s){if(s==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};ld(s)||(s=Ks(s));let i=Ic(s,pm);if(i.result==="error")throw new Error(i.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,h,f)=>i.value.evaluate(o,h,{},f),needGeometry:ud(s),getGlobalStateRefs:()=>Cc(i.value.expression)}}function mm(s,i){return s<i?-1:s>i?1:0}function ud(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let i=1;i<s.length;i++)if(ud(s[i]))return!0;return!1}function Ks(s){if(!s)return!0;let i=s[0];return s.length<=1?i!=="any":i==="=="?gm(s[1],s[2],"=="):i==="!="?cd(gm(s[1],s[2],"==")):i==="<"||i===">"||i==="<="||i===">="?gm(s[1],s[2],i):i==="any"?(o=s.slice(1),["any"].concat(o.map(Ks))):i==="all"?["all"].concat(s.slice(1).map(Ks)):i==="none"?["all"].concat(s.slice(1).map(Ks).map(cd)):i==="in"?W_(s[1],s.slice(2)):i==="!in"?cd(W_(s[1],s.slice(2))):i==="has"?H_(s[1]):i!=="!has"||cd(H_(s[1]));var o}function gm(s,i,o){switch(s){case"$type":return[`filter-type-${o}`,i];case"$id":return[`filter-id-${o}`,i];default:return[`filter-${o}`,s,i]}}function W_(s,i){if(i.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(o=>typeof o!=typeof i[0])?["filter-in-large",s,["literal",i.sort(mm)]]:["filter-in-small",s,["literal",i]]}}function H_(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function cd(s){return["!",s]}function vm(s){let i=typeof s;if(i==="number"||i==="boolean"||i==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let f="[";for(let y of s)f+=`${vm(y)},`;return`${f}]`}let o=Object.keys(s).sort(),h="{";for(let f=0;f<o.length;f++)h+=`${JSON.stringify(o[f])}:${vm(s[o[f]])},`;return`${h}}`}function cT(s){let i="";for(let o of Tt)i+=`/${vm(s[o])}`;return i}function ym(s){let i=s.value;return i?[new $e(s.key,i,"constants have been deprecated as of v8")]:[]}function Er(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function $a(s){if(Array.isArray(s))return s.map($a);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){let i={};for(let o in s)i[o]=$a(s[o]);return i}return Er(s)}function Zn(s){let i=s.key,o=s.value,h=s.valueSpec||{},f=s.objectElementValidators||{},y=s.style,_=s.styleSpec,w=s.validateSpec,T=[],C=Ut(o);if(C!=="object")return[new $e(i,o,`object expected, ${C} found`)];for(let M in o){let z=M.split(".")[0],B=Fl(h,z)||h["*"],U;if(Fl(f,z))U=f[z];else if(Fl(h,z))U=w;else if(f["*"])U=f["*"];else{if(!h["*"]){T.push(new $e(i,o[M],`unknown property "${M}"`));continue}U=w}T=T.concat(U({key:(i&&`${i}.`)+M,value:o[M],valueSpec:B,style:y,styleSpec:_,object:o,objectKey:M,validateSpec:w},o))}for(let M in h)f[M]||h[M].required&&h[M].default===void 0&&o[M]===void 0&&T.push(new $e(i,o,`missing required property "${M}"`));return T}function hd(s){let i=s.value,o=s.valueSpec,h=s.style,f=s.styleSpec,y=s.key,_=s.arrayElementValidator||s.validateSpec;if(Ut(i)!=="array")return[new $e(y,i,`array expected, ${Ut(i)} found`)];if(o.length&&i.length!==o.length)return[new $e(y,i,`array length ${o.length} expected, length ${i.length} found`)];if(o["min-length"]&&i.length<o["min-length"])return[new $e(y,i,`array length at least ${o["min-length"]} expected, length ${i.length} found`)];let w={type:o.value,values:o.values};f.$version<7&&(w.function=o.function),Ut(o.value)==="object"&&(w=o.value);let T=[];for(let C=0;C<i.length;C++)T=T.concat(_({array:i,arrayIndex:C,value:i[C],valueSpec:w,validateSpec:s.validateSpec,style:h,styleSpec:f,key:`${y}[${C}]`}));return T}function Mc(s){let i=s.key,o=s.value,h=s.valueSpec,f=Ut(o);return f==="number"&&o!=o&&(f="NaN"),f!=="number"?[new $e(i,o,`number expected, ${f} found`)]:"minimum"in h&&o<h.minimum?[new $e(i,o,`${o} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&o>h.maximum?[new $e(i,o,`${o} is greater than the maximum value ${h.maximum}`)]:[]}function K_(s){let i=s.valueSpec,o=Er(s.value.type),h,f,y,_={},w=o!=="categorical"&&s.value.property===void 0,T=!w,C=Ut(s.value.stops)==="array"&&Ut(s.value.stops[0])==="array"&&Ut(s.value.stops[0][0])==="object",M=Zn({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(U){if(o==="identity")return[new $e(U.key,U.value,"identity function may not have a \"stops\" property")];let $=[],Z=U.value;return $=$.concat(hd({key:U.key,value:Z,valueSpec:U.valueSpec,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,arrayElementValidator:z})),Ut(Z)==="array"&&Z.length===0&&$.push(new $e(U.key,Z,"array must have at least one stop")),$},default:function(U){return U.validateSpec({key:U.key,value:U.value,valueSpec:i,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec})}}});return o==="identity"&&w&&M.push(new $e(s.key,s.value,"missing required property \"property\"")),o==="identity"||s.value.stops||M.push(new $e(s.key,s.value,"missing required property \"stops\"")),o==="exponential"&&s.valueSpec.expression&&!hm(s.valueSpec)&&M.push(new $e(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(T&&!ts(s.valueSpec)?M.push(new $e(s.key,s.value,"property functions not supported")):w&&!U_(s.valueSpec)&&M.push(new $e(s.key,s.value,"zoom functions not supported"))),o!=="categorical"&&!C||s.value.property!==void 0||M.push(new $e(s.key,s.value,"\"property\" property is required")),M;function z(U){let $=[],Z=U.value,J=U.key;if(Ut(Z)!=="array")return[new $e(J,Z,`array expected, ${Ut(Z)} found`)];if(Z.length!==2)return[new $e(J,Z,`array length 2 expected, length ${Z.length} found`)];if(C){if(Ut(Z[0])!=="object")return[new $e(J,Z,`object expected, ${Ut(Z[0])} found`)];if(Z[0].zoom===void 0)return[new $e(J,Z,"object stop key must have zoom")];if(Z[0].value===void 0)return[new $e(J,Z,"object stop key must have value")];if(y&&y>Er(Z[0].zoom))return[new $e(J,Z[0].zoom,"stop zoom values must appear in ascending order")];Er(Z[0].zoom)!==y&&(y=Er(Z[0].zoom),f=void 0,_={}),$=$.concat(Zn({key:`${J}[0]`,value:Z[0],valueSpec:{zoom:{}},validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec,objectElementValidators:{zoom:Mc,value:B}}))}else $=$.concat(B({key:`${J}[0]`,value:Z[0],validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec},Z));return sd($a(Z[1]))?$.concat([new $e(`${J}[1]`,Z[1],"expressions are not allowed in function stops.")]):$.concat(U.validateSpec({key:`${J}[1]`,value:Z[1],valueSpec:i,validateSpec:U.validateSpec,style:U.style,styleSpec:U.styleSpec}))}function B(U,$){let Z=Ut(U.value),J=Er(U.value),ie=U.value!==null?U.value:$;if(h){if(Z!==h)return[new $e(U.key,ie,`${Z} stop domain type must match previous stop domain type ${h}`)]}else h=Z;if(Z!=="number"&&Z!=="string"&&Z!=="boolean")return[new $e(U.key,ie,"stop domain value must be a number, string, or boolean")];if(Z!=="number"&&o!=="categorical"){let ye=`number expected, ${Z} found`;return ts(i)&&o===void 0&&(ye+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new $e(U.key,ie,ye)]}return o!=="categorical"||Z!=="number"||isFinite(J)&&Math.floor(J)===J?o!=="categorical"&&Z==="number"&&f!==void 0&&J<f?[new $e(U.key,ie,"stop domain values must appear in ascending order")]:(f=J,o==="categorical"&&J in _?[new $e(U.key,ie,"stop domain values must be unique")]:(_[J]=!0,[])):[new $e(U.key,ie,`integer expected, found ${J}`)]}}function Xs(s){let i=(s.expressionContext==="property"?Z_:Ic)($a(s.value),s.valueSpec);if(i.result==="error")return i.value.map(h=>new $e(`${s.key}${h.key}`,s.value,h.message));let o=i.value.expression||i.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!o.outputDefined())return[new $e(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Tc(o))return[new $e(s.key,s.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(s.expressionContext==="filter"&&!Tc(o))return[new $e(s.key,s.value,"\"feature-state\" data expressions are not supported with filters.")];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!od(o,["zoom","feature-state"]))return[new $e(s.key,s.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(s.expressionContext==="cluster-initial"&&!ad(o))return[new $e(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function dd(s){let i=s.key,o=s.value,h=Ut(o);return h!=="string"?[new $e(i,o,`color expected, ${h} found`)]:Nt.parse(String(o))?[]:[new $e(i,o,`color expected, "${o}" found`)]}function yo(s){let i=s.key,o=s.value,h=s.valueSpec,f=[];return Array.isArray(h.values)?h.values.indexOf(Er(o))===-1&&f.push(new $e(i,o,`expected one of [${h.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(h.values).indexOf(Er(o))===-1&&f.push(new $e(i,o,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(o)} found`)),f}function _m(s){return ld($a(s.value))?Xs(Fi({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):X_(s)}function X_(s){let i=s.value,o=s.key;if(Ut(i)!=="array")return[new $e(o,i,`array expected, ${Ut(i)} found`)];let h=s.styleSpec,f,y=[];if(i.length<1)return[new $e(o,i,"filter array must have at least 1 element")];switch(y=y.concat(yo({key:`${o}[0]`,value:i[0],valueSpec:h.filter_operator,style:s.style,styleSpec:s.styleSpec})),Er(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Er(i[1])==="$type"&&y.push(new $e(o,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&y.push(new $e(o,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(f=Ut(i[1]),f!=="string"&&y.push(new $e(`${o}[1]`,i[1],`string expected, ${f} found`)));for(let _=2;_<i.length;_++)f=Ut(i[_]),Er(i[1])==="$type"?y=y.concat(yo({key:`${o}[${_}]`,value:i[_],valueSpec:h.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&y.push(new $e(`${o}[${_}]`,i[_],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let _=1;_<i.length;_++)y=y.concat(X_({key:`${o}[${_}]`,value:i[_],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=Ut(i[1]),i.length!==2?y.push(new $e(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):f!=="string"&&y.push(new $e(`${o}[1]`,i[1],`string expected, ${f} found`))}return y}function Y_(s,i){let o=s.key,h=s.validateSpec,f=s.style,y=s.styleSpec,_=s.value,w=s.objectKey,T=y[`${i}_${s.layerType}`];if(!T)return[];let C=w.match(/^(.*)-transition$/);if(i==="paint"&&C&&T[C[1]]&&T[C[1]].transition)return h({key:o,value:_,valueSpec:y.transition,style:f,styleSpec:y});let M=s.valueSpec||T[w];if(!M)return[new $e(o,_,`unknown property "${w}"`)];let z;if(Ut(_)==="string"&&ts(M)&&!M.tokens&&(z=/^{([^}]+)}$/.exec(_)))return[new $e(o,_,`"${w}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(z[1])} }\`.`)];let B=[];return s.layerType==="symbol"&&(w==="text-field"&&f&&!f.glyphs&&B.push(new $e(o,_,"use of \"text-field\" requires a style \"glyphs\" property")),w==="text-font"&&Ec($a(_))&&Er(_.type)==="identity"&&B.push(new $e(o,_,"\"text-font\" does not support identity functions"))),B.concat(h({key:s.key,value:_,valueSpec:M,style:f,styleSpec:y,expressionContext:"property",propertyType:i,propertyKey:w}))}function J_(s){return Y_(s,"paint")}function Q_(s){return Y_(s,"layout")}function e0(s){let i=[],o=s.value,h=s.key,f=s.style,y=s.styleSpec;if(Ut(o)!=="object")return[new $e(h,o,`object expected, ${Ut(o)} found`)];o.type||o.ref||i.push(new $e(h,o,"either \"type\" or \"ref\" is required"));let _=Er(o.type),w=Er(o.ref);if(o.id){let T=Er(o.id);for(let C=0;C<s.arrayIndex;C++){let M=f.layers[C];Er(M.id)===T&&i.push(new $e(h,o.id,`duplicate layer id "${o.id}", previously used at line ${M.id.__line__}`))}}if("ref"in o){let T;["type","source","source-layer","filter","layout"].forEach(C=>{C in o&&i.push(new $e(h,o[C],`"${C}" is prohibited for ref layers`))}),f.layers.forEach(C=>{Er(C.id)===w&&(T=C)}),T?T.ref?i.push(new $e(h,o.ref,"ref cannot reference another ref layer")):_=Er(T.type):i.push(new $e(h,o.ref,`ref layer "${w}" not found`))}else if(_!=="background")if(o.source){let T=f.sources&&f.sources[o.source],C=T&&Er(T.type);T?C==="vector"&&_==="raster"?i.push(new $e(h,o.source,`layer "${o.id}" requires a raster source`)):C!=="raster-dem"&&_==="hillshade"||C!=="raster-dem"&&_==="color-relief"?i.push(new $e(h,o.source,`layer "${o.id}" requires a raster-dem source`)):C==="raster"&&_!=="raster"?i.push(new $e(h,o.source,`layer "${o.id}" requires a vector source`)):C!=="vector"||o["source-layer"]?C==="raster-dem"&&_!=="hillshade"&&_!=="color-relief"?i.push(new $e(h,o.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):_!=="line"||!o.paint||!o.paint["line-gradient"]||C==="geojson"&&T.lineMetrics||i.push(new $e(h,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new $e(h,o,`layer "${o.id}" must specify a "source-layer"`)):i.push(new $e(h,o.source,`source "${o.source}" not found`))}else i.push(new $e(h,o,"missing required property \"source\""));return i=i.concat(Zn({key:h,value:o,valueSpec:y.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${h}.type`,value:o.type,valueSpec:y.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:o,objectKey:"type"}),filter:_m,layout:T=>Zn({layer:o,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":C=>Q_(Fi({layerType:_},C))}}),paint:T=>Zn({layer:o,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":C=>J_(Fi({layerType:_},C))}})}})),i}function va(s){let i=s.value,o=s.key,h=Ut(i);return h!=="string"?[new $e(o,i,`string expected, ${h} found`)]:[]}let Vl={promoteId:function({key:s,value:i}){if(Ut(i)==="string")return va({key:s,value:i});{let o=[];for(let h in i)o.push(...va({key:`${s}.${h}`,value:i[h]}));return o}}};function vn(s){let i=s.value,o=s.key,h=s.styleSpec,f=s.style,y=s.validateSpec;if(!i.type)return[new $e(o,i,"\"type\" is required")];let _=Er(i.type),w;switch(_){case"vector":case"raster":return w=Zn({key:o,value:i,valueSpec:h[`source_${_.replace("-","_")}`],style:s.style,styleSpec:h,objectElementValidators:Vl,validateSpec:y}),w;case"raster-dem":return w=function(T){var C;let M=(C=T.sourceName)!==null&&C!==void 0?C:"",z=T.value,B=T.styleSpec,U=B.source_raster_dem,$=T.style,Z=[],J=Ut(z);if(z===void 0)return Z;if(J!=="object")return Z.push(new $e("source_raster_dem",z,`object expected, ${J} found`)),Z;let ie=Er(z.encoding)==="custom",ye=["redFactor","greenFactor","blueFactor","baseShift"],he=T.value.encoding?`"${T.value.encoding}"`:"Default";for(let pe in z)!ie&&ye.includes(pe)?Z.push(new $e(pe,z[pe],`In "${M}": "${pe}" is only valid when "encoding" is set to "custom". ${he} encoding found`)):U[pe]?Z=Z.concat(T.validateSpec({key:pe,value:z[pe],valueSpec:U[pe],validateSpec:T.validateSpec,style:$,styleSpec:B})):Z.push(new $e(pe,z[pe],`unknown property "${pe}"`));return Z}({sourceName:o,value:i,style:s.style,styleSpec:h,validateSpec:y}),w;case"geojson":if(w=Zn({key:o,value:i,valueSpec:h.source_geojson,style:f,styleSpec:h,validateSpec:y,objectElementValidators:Vl}),i.cluster)for(let T in i.clusterProperties){let[C,M]=i.clusterProperties[T],z=typeof C=="string"?[C,["accumulated"],["get",T]]:C;w.push(...Xs({key:`${o}.${T}.map`,value:M,expressionContext:"cluster-map"})),w.push(...Xs({key:`${o}.${T}.reduce`,value:z,expressionContext:"cluster-reduce"}))}return w;case"video":return Zn({key:o,value:i,valueSpec:h.source_video,style:f,validateSpec:y,styleSpec:h});case"image":return Zn({key:o,value:i,valueSpec:h.source_image,style:f,validateSpec:y,styleSpec:h});case"canvas":return[new $e(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return yo({key:`${o}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Gl(s){let i=s.value,o=s.styleSpec,h=o.light,f=s.style,y=[],_=Ut(i);if(i===void 0)return y;if(_!=="object")return y=y.concat([new $e("light",i,`object expected, ${_} found`)]),y;for(let w in i){let T=w.match(/^(.*)-transition$/);y=y.concat(T&&h[T[1]]&&h[T[1]].transition?s.validateSpec({key:w,value:i[w],valueSpec:o.transition,validateSpec:s.validateSpec,style:f,styleSpec:o}):h[w]?s.validateSpec({key:w,value:i[w],valueSpec:h[w],validateSpec:s.validateSpec,style:f,styleSpec:o}):[new $e(w,i[w],`unknown property "${w}"`)])}return y}function xm(s){let i=s.value,o=s.styleSpec,h=o.sky,f=s.style,y=Ut(i);if(i===void 0)return[];if(y!=="object")return[new $e("sky",i,`object expected, ${y} found`)];let _=[];for(let w in i)_=_.concat(h[w]?s.validateSpec({key:w,value:i[w],valueSpec:h[w],style:f,styleSpec:o}):[new $e(w,i[w],`unknown property "${w}"`)]);return _}function t0(s){let i=s.value,o=s.styleSpec,h=o.terrain,f=s.style,y=[],_=Ut(i);if(i===void 0)return y;if(_!=="object")return y=y.concat([new $e("terrain",i,`object expected, ${_} found`)]),y;for(let w in i)y=y.concat(h[w]?s.validateSpec({key:w,value:i[w],valueSpec:h[w],validateSpec:s.validateSpec,style:f,styleSpec:o}):[new $e(w,i[w],`unknown property "${w}"`)]);return y}function r0(s){let i=[],o=s.value,h=s.key;if(Array.isArray(o)){let f=[],y=[];for(let _ in o)o[_].id&&f.includes(o[_].id)&&i.push(new $e(h,o,`all the sprites' ids must be unique, but ${o[_].id} is duplicated`)),f.push(o[_].id),o[_].url&&y.includes(o[_].url)&&i.push(new $e(h,o,`all the sprites' URLs must be unique, but ${o[_].url} is duplicated`)),y.push(o[_].url),i=i.concat(Zn({key:`${h}[${_}]`,value:o[_],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return i}return va({key:h,value:o})}function Zl(s){return i=s.value,i&&i.constructor===Object?[]:[new $e(s.key,s.value,`object expected, ${Ut(s.value)} found`)];var i}let bm={"*":()=>[],array:hd,boolean:function(s){let i=s.value,o=s.key,h=Ut(i);return h!=="boolean"?[new $e(o,i,`boolean expected, ${h} found`)]:[]},number:Mc,color:dd,constants:ym,enum:yo,filter:_m,function:K_,layer:e0,object:Zn,source:vn,light:Gl,sky:xm,terrain:t0,projection:function(s){let i=s.value,o=s.styleSpec,h=o.projection,f=s.style,y=Ut(i);if(i===void 0)return[];if(y!=="object")return[new $e("projection",i,`object expected, ${y} found`)];let _=[];for(let w in i)_=_.concat(h[w]?s.validateSpec({key:w,value:i[w],valueSpec:h[w],style:f,styleSpec:o}):[new $e(w,i[w],`unknown property "${w}"`)]);return _},projectionDefinition:function(s){let i=s.key,o=s.value;o=o instanceof String?o.valueOf():o;let h=Ut(o);return h!=="array"||function(f){return Array.isArray(f)&&f.length===3&&typeof f[0]=="string"&&typeof f[1]=="string"&&typeof f[2]=="number"}(o)||function(f){return!!["interpolate","step","literal"].includes(f[0])}(o)?["array","string"].includes(h)?[]:[new $e(i,o,`projection expected, invalid type "${h}" found`)]:[new $e(i,o,`projection expected, invalid array ${JSON.stringify(o)} found`)]},string:va,formatted:function(s){return va(s).length===0?[]:Xs(s)},resolvedImage:function(s){return va(s).length===0?[]:Xs(s)},padding:function(s){let i=s.key,o=s.value;if(Ut(o)==="array"){if(o.length<1||o.length>4)return[new $e(i,o,`padding requires 1 to 4 values; ${o.length} values found`)];let h={type:"number"},f=[];for(let y=0;y<o.length;y++)f=f.concat(s.validateSpec({key:`${i}[${y}]`,value:o[y],validateSpec:s.validateSpec,valueSpec:h}));return f}return Mc({key:i,value:o,valueSpec:{}})},numberArray:function(s){let i=s.key,o=s.value;if(Ut(o)==="array"){let h={type:"number"};if(o.length<1)return[new $e(i,o,"array length at least 1 expected, length 0 found")];let f=[];for(let y=0;y<o.length;y++)f=f.concat(s.validateSpec({key:`${i}[${y}]`,value:o[y],validateSpec:s.validateSpec,valueSpec:h}));return f}return Mc({key:i,value:o,valueSpec:{}})},colorArray:function(s){let i=s.key,o=s.value;if(Ut(o)==="array"){if(o.length<1)return[new $e(i,o,"array length at least 1 expected, length 0 found")];let h=[];for(let f=0;f<o.length;f++)h=h.concat(dd({key:`${i}[${f}]`,value:o[f]}));return h}return dd({key:i,value:o})},variableAnchorOffsetCollection:function(s){let i=s.key,o=s.value,h=Ut(o),f=s.styleSpec;if(h!=="array"||o.length<1||o.length%2!=0)return[new $e(i,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let y=[];for(let _=0;_<o.length;_+=2)y=y.concat(yo({key:`${i}[${_}]`,value:o[_],valueSpec:f.layout_symbol["text-anchor"]})),y=y.concat(hd({key:`${i}[${_+1}]`,value:o[_+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:f}));return y},sprite:r0,state:Zl};function Wl(s){let i=s.value,o=s.valueSpec,h=s.styleSpec;return s.validateSpec=Wl,o.expression&&Ec(Er(i))?K_(s):o.expression&&sd($a(i))?Xs(s):o.type&&bm[o.type]?bm[o.type](s):Zn(Fi({},s,{valueSpec:o.type?h[o.type]:o}))}function i0(s){let i=s.value,o=s.key,h=va(s);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new $e(o,i,"\"glyphs\" url must include a \"{fontstack}\" token")),i.indexOf("{range}")===-1&&h.push(new $e(o,i,"\"glyphs\" url must include a \"{range}\" token"))),h}function yn(s,i=Se){let o=[];return o=o.concat(Wl({key:"",value:s,valueSpec:i.$root,styleSpec:i,style:s,validateSpec:Wl,objectElementValidators:{glyphs:i0,"*":()=>[]}})),s.constants&&(o=o.concat(ym({key:"constants",value:s.constants}))),Hl(o)}function ya(s){return function(i){return s(Qm(Kn({},i),{validateSpec:Wl}))}}function Hl(s){return[].concat(s).sort((i,o)=>i.line-o.line)}function _a(s){return function(...i){return Hl(s.apply(this,i))}}yn.source=_a(ya(vn)),yn.sprite=_a(ya(r0)),yn.glyphs=_a(ya(i0)),yn.light=_a(ya(Gl)),yn.sky=_a(ya(xm)),yn.terrain=_a(ya(t0)),yn.state=_a(ya(Zl)),yn.layer=_a(ya(e0)),yn.filter=_a(ya(_m)),yn.paintProperty=_a(ya(J_)),yn.layoutProperty=_a(ya(Q_));let Kl=yn,hT=Kl.light,Rc=Kl.sky,dT=Kl.paintProperty,fT=Kl.layoutProperty;function Oc(s,i){let o=!1;if(i&&i.length)for(let h of i)s.fire(new Le(new Error(h.message))),o=!0;return o}class kc{constructor(i,o,h){let f=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;let _=new Int32Array(this.arrayBuffer);i=_[0],this.d=(o=_[1])+2*(h=_[2]);for(let T=0;T<this.d*this.d;T++){let C=_[3+T],M=_[3+T+1];f.push(C===M?null:_.subarray(C,M))}let w=_[3+f.length+1];this.keys=_.subarray(_[3+f.length],w),this.bboxes=_.subarray(w),this.insert=this._insertReadonly}else{this.d=o+2*h;for(let _=0;_<this.d*this.d;_++)f.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=i,this.padding=h,this.scale=o/i,this.uid=0;let y=h/o*i;this.min=-y,this.max=i+y}insert(i,o,h,f,y){this._forEachCell(o,h,f,y,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(f),this.bboxes.push(y)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,o,h,f,y,_){this.cells[y].push(_)}query(i,o,h,f,y){let _=this.min,w=this.max;if(i<=_&&o<=_&&w<=h&&w<=f&&!y)return Array.prototype.slice.call(this.keys);{let T=[];return this._forEachCell(i,o,h,f,this._queryCell,T,{},y),T}}_queryCell(i,o,h,f,y,_,w,T){let C=this.cells[y];if(C!==null){let M=this.keys,z=this.bboxes;for(let B=0;B<C.length;B++){let U=C[B];if(w[U]===void 0){let $=4*U;(T?T(z[$+0],z[$+1],z[$+2],z[$+3]):i<=z[$+2]&&o<=z[$+3]&&h>=z[$+0]&&f>=z[$+1])?(w[U]=!0,_.push(M[U])):w[U]=!1}}}}_forEachCell(i,o,h,f,y,_,w,T){let C=this._convertToCellCoord(i),M=this._convertToCellCoord(o),z=this._convertToCellCoord(h),B=this._convertToCellCoord(f);for(let U=C;U<=z;U++)for(let $=M;$<=B;$++){let Z=this.d*$+U;if((!T||T(this._convertFromCellCoord(U),this._convertFromCellCoord($),this._convertFromCellCoord(U+1),this._convertFromCellCoord($+1)))&&y.call(this,i,o,h,f,Z,_,w,T))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let i=this.cells,o=3+this.cells.length+1+1,h=0;for(let _=0;_<this.cells.length;_++)h+=this.cells[_].length;let f=new Int32Array(o+h+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let y=o;for(let _=0;_<i.length;_++){let w=i[_];f[3+_]=y,f.set(w,y),y+=w.length}return f[3+i.length]=y,f.set(this.keys,y),y+=this.keys.length,f[3+i.length+1]=y,f.set(this.bboxes,y),y+=this.bboxes.length,f.buffer}static serialize(i,o){let h=i.toArrayBuffer();return o&&o.push(h),{buffer:h}}static deserialize(i){return new kc(i.buffer)}}let xa={};function tt(s,i,o={}){if(xa[s])throw new Error(`${s} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:s,writeable:!1}),xa[s]={klass:i,omit:o.omit||[],shallow:o.shallow||[]}}tt("Object",Object),tt("Set",Set),tt("TransferableGridIndex",kc),tt("Color",Nt),tt("Error",Error),tt("AJAXError",se),tt("ResolvedImage",Cn),tt("StylePropertyFunction",Pc),tt("StyleExpression",dm,{omit:["_evaluator"]}),tt("ZoomDependentExpression",fm),tt("ZoomConstantExpression",qc),tt("CompoundExpression",Gn,{omit:["_evaluate"]});for(let s in Ul)Ul[s]._classRegistryKey||tt(`Expression_${s}`,Ul[s]);function wm(s){return s&&typeof ArrayBuffer!="undefined"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function fd(s){return s.$name||s.constructor._classRegistryKey}function Sm(s){return!function(i){if(i===null||typeof i!="object")return!1;let o=fd(i);return!(!o||o==="Object")}(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||wm(s)||za(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function Xl(s,i){if(Sm(s))return(wm(s)||za(s))&&i&&i.push(s),ArrayBuffer.isView(s)&&i&&i.push(s.buffer),s instanceof ImageData&&i&&i.push(s.data.buffer),s;if(Array.isArray(s)){let y=[];for(let _ of s)y.push(Xl(_,i));return y}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);let o=fd(s);if(!o)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!xa[o])throw new Error(`${o} is not registered.`);let{klass:h}=xa[o],f=h.serialize?h.serialize(s,i):{};if(h.serialize){if(i&&f===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let y in s){if(!s.hasOwnProperty(y)||xa[o].omit.indexOf(y)>=0)continue;let _=s[y];f[y]=xa[o].shallow.indexOf(y)>=0?_:Xl(_,i)}s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(f.$name=o),f}function Ys(s){if(Sm(s))return s;if(Array.isArray(s))return s.map(Ys);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);let i=fd(s)||"Object";if(!xa[i])throw new Error(`can't deserialize unregistered class ${i}`);let{klass:o}=xa[i];if(!o)throw new Error(`can't deserialize unregistered class ${i}`);if(o.deserialize)return o.deserialize(s);let h=Object.create(o.prototype);for(let f of Object.keys(s)){if(f==="$name")continue;let y=s[f];h[f]=xa[i].shallow.indexOf(f)>=0?y:Ys(y)}return h}class pd{constructor(){this.first=!0}update(i,o){let h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=o),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}let Vt={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Hiragana:s=>s>=12352&&s<=12447,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"CJK Unified Ideographs":s=>s>=19968&&s<=40959,"Hangul Syllables":s=>s>=44032&&s<=55215,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function md(s){for(let i of s)if(Em(i.charCodeAt(0)))return!0;return!1}function pT(s){for(let i of s)if(!n0(i.charCodeAt(0)))return!1;return!0}function gd(s){let i=s.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch(h){return null}}).filter(o=>o);return new RegExp(i.join("|"),"u")}let mT=gd(["Arab","Dupl","Mong","Ougr","Syrc"]);function n0(s){return!mT.test(String.fromCodePoint(s))}let Tm=gd(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Em(s){return!(s!==746&&s!==747&&(s<4352||!(Vt["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||Vt["CJK Compatibility"](s)||Vt["CJK Strokes"](s)||!(!Vt["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||Vt["Enclosed CJK Letters and Months"](s)||Vt["Ideographic Description Characters"](s)||Vt.Kanbun(s)||Vt.Katakana(s)&&s!==12540||!(!Vt["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!Vt["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||Vt["Vertical Forms"](s)||Vt["Yijing Hexagram Symbols"](s)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(s))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(s))||Tm.test(String.fromCodePoint(s)))))}function a0(s){return!(Em(s)||function(i){return!!(Vt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Vt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Vt["Letterlike Symbols"](i)||Vt["Number Forms"](i)||Vt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Vt["Control Pictures"](i)&&i!==9251||Vt["Optical Character Recognition"](i)||Vt["Enclosed Alphanumerics"](i)||Vt["Geometric Shapes"](i)||Vt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Vt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Vt["CJK Symbols and Punctuation"](i)||Vt.Katakana(i)||Vt["Private Use Area"](i)||Vt["CJK Compatibility Forms"](i)||Vt["Small Form Variants"](i)||Vt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(s))}let o0=gd(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Im(s){return o0.test(String.fromCodePoint(s))}function s0(s,i){return!(!i&&Im(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||Vt.Khmer(s))}function l0(s){for(let i of s)if(Im(i.charCodeAt(0)))return!0;return!1}let ba=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){if(ba.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(s,i){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(s.pluginStatus!=="loading")return this.setState(s),s;let o=s.pluginURL,h=new Promise(y=>{this.loadScriptResolve=y});i(o);let f=new Promise(y=>setTimeout(()=>y(),this.TIMEOUT));if(yield Promise.race([h,f]),this.isParsed()){let y={pluginStatus:"loaded",pluginURL:o};return this.setState(y),y}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${o}`)})}};class ur{constructor(i,o){this.zoom=i,o?(this.now=o.now||0,this.fadeDuration=o.fadeDuration||0,this.zoomHistory=o.zoomHistory||new pd,this.transition=o.transition||{},this.globalState=o.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new pd,this.transition={},this.globalState={})}isSupportedScript(i){return function(o,h){for(let f of o)if(!s0(f.charCodeAt(0),h))return!1;return!0}(i,ba.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let i=this.zoom,o=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*o}}}class Yl{constructor(i,o){this.property=i,this.value=o,this.expression=function(h,f){if(Ec(h))return new Pc(h,f);if(sd(h)){let y=Z_(h,f);if(y.result==="error")throw new Error(y.value.map(_=>`${_.key}: ${_.message}`).join(", "));return y.value}{let y=h;return f.type==="color"&&typeof h=="string"?y=Nt.parse(h):f.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?f.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?f.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?y=Qi.parse(h):f.type==="projectionDefinition"&&typeof h=="string"&&(y=Ni.parse(h)):y=Zr.parse(h):y=Ji.parse(h):y=pi.parse(h),{globalStateRefs:new Set,kind:"constant",evaluate:()=>y}}}(o===void 0?i.specification.default:o,i.specification),this._evaluate=this.expression.evaluate}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,o,h){return this.property.possiblyEvaluate(this,i,o,h)}setGlobalState(i){this.expression.evaluate=(o,h,f,y,_,w)=>(o.globalState=i,this._evaluate.call(this.expression,o,h,f,y,_,w))}}class qm{constructor(i){this.property=i,this.value=new Yl(i,void 0)}transitioned(i,o){return new Pm(this.property,this.value,o,Vn({},i.transition,this.transition),i.now)}untransitioned(){return new Pm(this.property,this.value,null,{},0)}}class u0{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return An(this._values[i].value.value)}setValue(i,o){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new qm(this._values[i].property)),this._values[i].value=new Yl(this._values[i].property,o===null?void 0:An(o))}getTransition(i){return An(this._values[i].transition)}setTransition(i,o){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new qm(this._values[i].property)),this._values[i].transition=An(o)||void 0}serialize(){let i={};for(let o of Object.keys(this._values)){let h=this.getValue(o);h!==void 0&&(i[o]=h);let f=this.getTransition(o);f!==void 0&&(i[`${o}-transition`]=f)}return i}transitioned(i,o){let h=new Am(this._properties);for(let f of Object.keys(this._values))h._values[f]=this._values[f].transitioned(i,o._values[f]);return h}untransitioned(){let i=new Am(this._properties);for(let o of Object.keys(this._values))i._values[o]=this._values[o].untransitioned();return i}}class Pm{constructor(i,o,h,f,y){this.property=i,this.value=o,this.begin=y+f.delay||0,this.end=this.begin+f.duration||0,i.specification.transition&&(f.delay||f.duration)&&(this.prior=h)}possiblyEvaluate(i,o,h){let f=i.now||0,y=this.value.possiblyEvaluate(i,o,h),_=this.prior;if(_){if(f>this.end)return this.prior=null,y;if(this.value.isDataDriven())return this.prior=null,y;if(f<this.begin)return _.possiblyEvaluate(i,o,h);{let w=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(i,o,h),y,ai(w))}}return y}}class Am{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,o,h){let f=new vd(this._properties);for(let y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(i,o,h);return f}hasTransition(){for(let i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class c0{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._globalState={}}hasValue(i){return this._values[i].value!==void 0}getValue(i){return An(this._values[i].value)}setValue(i,o){this._values[i]=new Yl(this._values[i].property,o===null?void 0:An(o)),this._values[i].setGlobalState(this._globalState)}serialize(){let i={};for(let o of Object.keys(this._values)){let h=this.getValue(o);h!==void 0&&(i[o]=h)}return i}possiblyEvaluate(i,o,h){let f=new vd(this._properties);for(let y of Object.keys(this._values))f._values[y]=this._values[y].possiblyEvaluate(i,o,h);return f}setGlobalState(i){this._globalState=i;for(let o of Object.values(this._values))o.setGlobalState(i)}}class Va{constructor(i,o,h){this.property=i,this.value=o,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,o,h,f){return this.property.evaluate(this.value,this.parameters,i,o,h,f)}}class vd{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class lt{constructor(i){this.specification=i}possiblyEvaluate(i,o){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(o)}interpolate(i,o,h){let f=Ua[this.specification.type];return f?f(i,o,h):i}}class mt{constructor(i,o){this.specification=i,this.overrides=o}possiblyEvaluate(i,o,h,f){return new Va(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(o,null,{},h,f)}:i.expression,o)}interpolate(i,o,h){if(i.value.kind!=="constant"||o.value.kind!=="constant")return i;if(i.value.value===void 0||o.value.value===void 0)return new Va(this,{kind:"constant",value:void 0},i.parameters);let f=Ua[this.specification.type];if(f){let y=f(i.value.value,o.value.value,h);return new Va(this,{kind:"constant",value:y},i.parameters)}return i}evaluate(i,o,h,f,y,_){return i.kind==="constant"?i.value:i.evaluate(o,h,f,y,_)}}class yd extends mt{possiblyEvaluate(i,o,h,f){if(i.value===void 0)return new Va(this,{kind:"constant",value:void 0},o);if(i.expression.kind==="constant"){let y=i.expression.evaluate(o,null,{},h,f),_=i.property.specification.type==="resolvedImage"&&typeof y!="string"?y.name:y,w=this._calculate(_,_,_,o);return new Va(this,{kind:"constant",value:w},o)}if(i.expression.kind==="camera"){let y=this._calculate(i.expression.evaluate({zoom:o.zoom-1}),i.expression.evaluate({zoom:o.zoom}),i.expression.evaluate({zoom:o.zoom+1}),o);return new Va(this,{kind:"constant",value:y},o)}return new Va(this,i.expression,o)}evaluate(i,o,h,f,y,_){if(i.kind==="source"){let w=i.evaluate(o,h,f,y,_);return this._calculate(w,w,w,o)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(o.zoom)-1},h,f),i.evaluate({zoom:Math.floor(o.zoom)},h,f),i.evaluate({zoom:Math.floor(o.zoom)+1},h,f),o):i.value}_calculate(i,o,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:h,to:o}}interpolate(i){return i}}class is{constructor(i){this.specification=i}possiblyEvaluate(i,o,h,f){if(i.value!==void 0){if(i.expression.kind==="constant"){let y=i.expression.evaluate(o,null,{},h,f);return this._calculate(y,y,y,o)}return this._calculate(i.expression.evaluate(new ur(Math.floor(o.zoom-1),o)),i.expression.evaluate(new ur(Math.floor(o.zoom),o)),i.expression.evaluate(new ur(Math.floor(o.zoom+1),o)),o)}}_calculate(i,o,h,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:h,to:o}}interpolate(i){return i}}class _d{constructor(i){this.specification=i}possiblyEvaluate(i,o,h,f){return!!i.expression.evaluate(o,null,{},h,f)}interpolate(){return!1}}class en{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let o in i){let h=i[o];h.specification.overridable&&this.overridableProperties.push(o);let f=this.defaultPropertyValues[o]=new Yl(h,void 0),y=this.defaultTransitionablePropertyValues[o]=new qm(h);this.defaultTransitioningPropertyValues[o]=y.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=f.possiblyEvaluate({})}}}tt("DataDrivenProperty",mt),tt("DataConstantProperty",lt),tt("CrossFadedDataDrivenProperty",yd),tt("CrossFadedProperty",is),tt("ColorRampProperty",_d);let h0="-transition";class Wn extends st{constructor(i,o){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,this._globalState={},i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=Hs(i.filter)),o.layout&&(this._unevaluatedLayout=new c0(o.layout)),o.paint)){this._transitionablePaint=new u0(o.paint);for(let h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(let h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new vd(o.paint)}}setFilter(i){this.filter=i,this._featureFilter=Hs(i)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){let i=new Set;if(this._unevaluatedLayout)for(let o in this._unevaluatedLayout._values){let h=this._unevaluatedLayout._values[o];for(let f of h.getGlobalStateRefs())i.add(f)}for(let o of this._featureFilter.getGlobalStateRefs())i.add(o);return i}getPaintAffectingGlobalStateRefs(){var i;let o=new globalThis.Map;if(this._transitionablePaint)for(let h in this._transitionablePaint._values){let f=this._transitionablePaint._values[h].value;for(let y of f.getGlobalStateRefs()){let _=(i=o.get(y))!==null&&i!==void 0?i:[];_.push({name:h,value:f.value}),o.set(y,_)}}return o}setLayoutProperty(i,o,h={}){o!=null&&this._validate(fT,`layers.${this.id}.layout.${i}`,i,o,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,o):this.visibility=o)}getPaintProperty(i){return i.endsWith(h0)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,o,h={}){if(o!=null&&this._validate(dT,`layers.${this.id}.paint.${i}`,i,o,h))return!1;if(i.endsWith(h0))return this._transitionablePaint.setTransition(i.slice(0,-11),o||void 0),!1;{let f=this._transitionablePaint._values[i],y=f.property.specification["property-type"]==="cross-faded-data-driven",_=f.value.isDataDriven(),w=f.value;this._transitionablePaint.setValue(i,o),this._handleSpecialPaintPropertyUpdate(i);let T=this._transitionablePaint._values[i].value;return T.isDataDriven()||_||y||this._handleOverridablePaintPropertyUpdate(i,w,T)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,o,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,o){i.globalState=this._globalState,i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,o)}setGlobalState(i){this._globalState=i,this._unevaluatedLayout&&this._unevaluatedLayout.setGlobalState(i)}serialize(){let i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Cl(i,(o,h)=>!(o===void 0||h==="layout"&&!Object.keys(o).length||h==="paint"&&!Object.keys(o).length))}_validate(i,o,h,f,y={}){return(!y||y.validate!==!1)&&Oc(this,i.call(Kl,{key:o,layerType:this.type,objectKey:h,value:f,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let i in this.paint._values){let o=this.paint.get(i);if(o instanceof Va&&ts(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let gT={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Dc{constructor(i,o){this._structArray=i,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ir{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,o){return i._trim(),o&&(i.isTransferred=!0,o.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){let o=Object.create(this.prototype);return o.arrayBuffer=i.arrayBuffer,o.length=i.length,o.capacity=i.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Dr(s,i=1){let o=0,h=0;return{members:s.map(f=>{let y=gT[f.type].BYTES_PER_ELEMENT,_=o=xd(o,Math.max(i,y)),w=f.components||1;return h=Math.max(h,y),o+=y*w,{name:f.name,type:f.type,components:w,offset:_}}),size:xd(o,Math.max(h,i)),alignment:i}}function xd(s,i){return Math.ceil(s/i)*i}class Jl extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o){let h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){let f=2*i;return this.int16[f+0]=o,this.int16[f+1]=h,i}}Jl.prototype.bytesPerElement=4,tt("StructArrayLayout2i4",Jl);class Ql extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h){let f=this.length;return this.resize(f+1),this.emplace(f,i,o,h)}emplace(i,o,h,f){let y=3*i;return this.int16[y+0]=o,this.int16[y+1]=h,this.int16[y+2]=f,i}}Ql.prototype.bytesPerElement=6,tt("StructArrayLayout3i6",Ql);class Cm extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,f){let y=this.length;return this.resize(y+1),this.emplace(y,i,o,h,f)}emplace(i,o,h,f,y){let _=4*i;return this.int16[_+0]=o,this.int16[_+1]=h,this.int16[_+2]=f,this.int16[_+3]=y,i}}Cm.prototype.bytesPerElement=8,tt("StructArrayLayout4i8",Cm);class eu extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,i,o,h,f,y,_)}emplace(i,o,h,f,y,_,w){let T=6*i;return this.int16[T+0]=o,this.int16[T+1]=h,this.int16[T+2]=f,this.int16[T+3]=y,this.int16[T+4]=_,this.int16[T+5]=w,i}}eu.prototype.bytesPerElement=12,tt("StructArrayLayout2i4i12",eu);class Js extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,i,o,h,f,y,_)}emplace(i,o,h,f,y,_,w){let T=4*i,C=8*i;return this.int16[T+0]=o,this.int16[T+1]=h,this.uint8[C+4]=f,this.uint8[C+5]=y,this.uint8[C+6]=_,this.uint8[C+7]=w,i}}Js.prototype.bytesPerElement=8,tt("StructArrayLayout2i4ub8",Js);class Lc extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o){let h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){let f=2*i;return this.float32[f+0]=o,this.float32[f+1]=h,i}}Lc.prototype.bytesPerElement=8,tt("StructArrayLayout2f8",Lc);class bd extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_,w,T,C,M){let z=this.length;return this.resize(z+1),this.emplace(z,i,o,h,f,y,_,w,T,C,M)}emplace(i,o,h,f,y,_,w,T,C,M,z){let B=10*i;return this.uint16[B+0]=o,this.uint16[B+1]=h,this.uint16[B+2]=f,this.uint16[B+3]=y,this.uint16[B+4]=_,this.uint16[B+5]=w,this.uint16[B+6]=T,this.uint16[B+7]=C,this.uint16[B+8]=M,this.uint16[B+9]=z,i}}bd.prototype.bytesPerElement=20,tt("StructArrayLayout10ui20",bd);class Qs extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_,w,T,C,M,z,B){let U=this.length;return this.resize(U+1),this.emplace(U,i,o,h,f,y,_,w,T,C,M,z,B)}emplace(i,o,h,f,y,_,w,T,C,M,z,B,U){let $=12*i;return this.int16[$+0]=o,this.int16[$+1]=h,this.int16[$+2]=f,this.int16[$+3]=y,this.uint16[$+4]=_,this.uint16[$+5]=w,this.uint16[$+6]=T,this.uint16[$+7]=C,this.int16[$+8]=M,this.int16[$+9]=z,this.int16[$+10]=B,this.int16[$+11]=U,i}}Qs.prototype.bytesPerElement=24,tt("StructArrayLayout4i4ui4i24",Qs);class Mm extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h){let f=this.length;return this.resize(f+1),this.emplace(f,i,o,h)}emplace(i,o,h,f){let y=3*i;return this.float32[y+0]=o,this.float32[y+1]=h,this.float32[y+2]=f,i}}Mm.prototype.bytesPerElement=12,tt("StructArrayLayout3f12",Mm);class Rm extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){let o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint32[1*i+0]=o,i}}Rm.prototype.bytesPerElement=4,tt("StructArrayLayout1ul4",Rm);class wd extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_,w,T,C){let M=this.length;return this.resize(M+1),this.emplace(M,i,o,h,f,y,_,w,T,C)}emplace(i,o,h,f,y,_,w,T,C,M){let z=10*i,B=5*i;return this.int16[z+0]=o,this.int16[z+1]=h,this.int16[z+2]=f,this.int16[z+3]=y,this.int16[z+4]=_,this.int16[z+5]=w,this.uint32[B+3]=T,this.uint16[z+8]=C,this.uint16[z+9]=M,i}}wd.prototype.bytesPerElement=20,tt("StructArrayLayout6i1ul2ui20",wd);class Om extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,i,o,h,f,y,_)}emplace(i,o,h,f,y,_,w){let T=6*i;return this.int16[T+0]=o,this.int16[T+1]=h,this.int16[T+2]=f,this.int16[T+3]=y,this.int16[T+4]=_,this.int16[T+5]=w,i}}Om.prototype.bytesPerElement=12,tt("StructArrayLayout2i2i2i12",Om);class g extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y){let _=this.length;return this.resize(_+1),this.emplace(_,i,o,h,f,y)}emplace(i,o,h,f,y,_){let w=4*i,T=8*i;return this.float32[w+0]=o,this.float32[w+1]=h,this.float32[w+2]=f,this.int16[T+6]=y,this.int16[T+7]=_,i}}g.prototype.bytesPerElement=16,tt("StructArrayLayout2f1f2i16",g);class r extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_){let w=this.length;return this.resize(w+1),this.emplace(w,i,o,h,f,y,_)}emplace(i,o,h,f,y,_,w){let T=16*i,C=4*i,M=8*i;return this.uint8[T+0]=o,this.uint8[T+1]=h,this.float32[C+1]=f,this.float32[C+2]=y,this.int16[M+6]=_,this.int16[M+7]=w,i}}r.prototype.bytesPerElement=16,tt("StructArrayLayout2ub2f2i16",r);class l extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h){let f=this.length;return this.resize(f+1),this.emplace(f,i,o,h)}emplace(i,o,h,f){let y=3*i;return this.uint16[y+0]=o,this.uint16[y+1]=h,this.uint16[y+2]=f,i}}l.prototype.bytesPerElement=6,tt("StructArrayLayout3ui6",l);class d extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_,w,T,C,M,z,B,U,$,Z,J,ie){let ye=this.length;return this.resize(ye+1),this.emplace(ye,i,o,h,f,y,_,w,T,C,M,z,B,U,$,Z,J,ie)}emplace(i,o,h,f,y,_,w,T,C,M,z,B,U,$,Z,J,ie,ye){let he=24*i,pe=12*i,Pe=48*i;return this.int16[he+0]=o,this.int16[he+1]=h,this.uint16[he+2]=f,this.uint16[he+3]=y,this.uint32[pe+2]=_,this.uint32[pe+3]=w,this.uint32[pe+4]=T,this.uint16[he+10]=C,this.uint16[he+11]=M,this.uint16[he+12]=z,this.float32[pe+7]=B,this.float32[pe+8]=U,this.uint8[Pe+36]=$,this.uint8[Pe+37]=Z,this.uint8[Pe+38]=J,this.uint32[pe+10]=ie,this.int16[he+22]=ye,i}}d.prototype.bytesPerElement=48,tt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",d);class m extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,f,y,_,w,T,C,M,z,B,U,$,Z,J,ie,ye,he,pe,Pe,Oe,Ne,Xe,Ve,He,ut,We){let Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,i,o,h,f,y,_,w,T,C,M,z,B,U,$,Z,J,ie,ye,he,pe,Pe,Oe,Ne,Xe,Ve,He,ut,We)}emplace(i,o,h,f,y,_,w,T,C,M,z,B,U,$,Z,J,ie,ye,he,pe,Pe,Oe,Ne,Xe,Ve,He,ut,We,Ke){let De=32*i,yt=16*i;return this.int16[De+0]=o,this.int16[De+1]=h,this.int16[De+2]=f,this.int16[De+3]=y,this.int16[De+4]=_,this.int16[De+5]=w,this.int16[De+6]=T,this.int16[De+7]=C,this.uint16[De+8]=M,this.uint16[De+9]=z,this.uint16[De+10]=B,this.uint16[De+11]=U,this.uint16[De+12]=$,this.uint16[De+13]=Z,this.uint16[De+14]=J,this.uint16[De+15]=ie,this.uint16[De+16]=ye,this.uint16[De+17]=he,this.uint16[De+18]=pe,this.uint16[De+19]=Pe,this.uint16[De+20]=Oe,this.uint16[De+21]=Ne,this.uint16[De+22]=Xe,this.uint32[yt+12]=Ve,this.float32[yt+13]=He,this.float32[yt+14]=ut,this.uint16[De+30]=We,this.uint16[De+31]=Ke,i}}m.prototype.bytesPerElement=64,tt("StructArrayLayout8i15ui1ul2f2ui64",m);class v extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){let o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.float32[1*i+0]=o,i}}v.prototype.bytesPerElement=4,tt("StructArrayLayout1f4",v);class b extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h){let f=this.length;return this.resize(f+1),this.emplace(f,i,o,h)}emplace(i,o,h,f){let y=3*i;return this.uint16[6*i+0]=o,this.float32[y+1]=h,this.float32[y+2]=f,i}}b.prototype.bytesPerElement=12,tt("StructArrayLayout1ui2f12",b);class E extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h){let f=this.length;return this.resize(f+1),this.emplace(f,i,o,h)}emplace(i,o,h,f){let y=4*i;return this.uint32[2*i+0]=o,this.uint16[y+2]=h,this.uint16[y+3]=f,i}}E.prototype.bytesPerElement=8,tt("StructArrayLayout1ul2ui8",E);class q extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o){let h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){let f=2*i;return this.uint16[f+0]=o,this.uint16[f+1]=h,i}}q.prototype.bytesPerElement=4,tt("StructArrayLayout2ui4",q);class O extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){let o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint16[1*i+0]=o,i}}O.prototype.bytesPerElement=2,tt("StructArrayLayout1ui2",O);class k extends ir{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,f){let y=this.length;return this.resize(y+1),this.emplace(y,i,o,h,f)}emplace(i,o,h,f,y){let _=4*i;return this.float32[_+0]=o,this.float32[_+1]=h,this.float32[_+2]=f,this.float32[_+3]=y,i}}k.prototype.bytesPerElement=16,tt("StructArrayLayout4f16",k);class N extends Dc{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new x(this.anchorPointX,this.anchorPointY)}}N.prototype.size=20;class F extends wd{get(i){return new N(this,i)}}tt("CollisionBoxArray",F);class j extends Dc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}j.prototype.size=48;class V extends d{get(i){return new j(this,i)}}tt("PlacedSymbolArray",V);class te extends Dc{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}te.prototype.size=64;class Q extends m{get(i){return new te(this,i)}}tt("SymbolInstanceArray",Q);class re extends v{getoffsetX(i){return this.float32[1*i+0]}}tt("GlyphOffsetArray",re);class ne extends Ql{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}tt("SymbolLineVertexArray",ne);class ue extends Dc{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ue.prototype.size=12;class ae extends b{get(i){return new ue(this,i)}}tt("TextAnchorOffsetArray",ae);class fe extends Dc{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}fe.prototype.size=8;class ge extends E{get(i){return new fe(this,i)}}tt("FeatureIndexArray",ge);class le extends Jl{}class xe extends Jl{}class Re extends Jl{}class Ee extends eu{}class Ie extends Js{}class Me extends Lc{}class je extends bd{}class Ze extends Qs{}class ze extends Mm{}class at extends Rm{}class Ct extends Om{}class Xt extends r{}class nr extends l{}class tr extends q{}let yr=Dr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ir}=yr;class Pt{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,o,h,f){let y=this.segments[this.segments.length-1];return i>Pt.MAX_VERTEX_ARRAY_LENGTH&&Br(`Max vertices per segment is ${Pt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Pt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!y||y.vertexLength+i>Pt.MAX_VERTEX_ARRAY_LENGTH||y.sortKey!==f?this.createNewSegment(o,h,f):y}createNewSegment(i,o,h){let f={vertexOffset:i.length,primitiveOffset:o.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(f.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(f),f}getOrCreateLatestSegment(i,o,h){return this.prepareSegment(0,i,o,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let i of this.segments)for(let o in i.vaos)i.vaos[o].destroy()}static simpleSegment(i,o,h,f){return new Pt([{vertexOffset:i,primitiveOffset:o,vertexLength:h,primitiveLength:f,vaos:{},sortKey:0}])}}function ar(s,i){return 256*(s=oi(Math.floor(s),0,255))+oi(Math.floor(i),0,255)}Pt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tt("SegmentVector",Pt);let Wr=Dr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var ui,gi,tn,wa={exports:{}},ns={exports:{}},as={exports:{}},tu=function(){if(tn)return wa.exports;tn=1;var s=(ui||(ui=1,ns.exports=function(o,h){var f,y,_,w,T,C,M,z;for(y=o.length-(f=3&o.length),_=h,T=3432918353,C=461845907,z=0;z<y;)M=255&o.charCodeAt(z)|(255&o.charCodeAt(++z))<<8|(255&o.charCodeAt(++z))<<16|(255&o.charCodeAt(++z))<<24,++z,_=27492+(65535&(w=5*(65535&(_=(_^=M=(65535&(M=(M=(65535&M)*T+(((M>>>16)*T&65535)<<16)&4294967295)<<15|M>>>17))*C+(((M>>>16)*C&65535)<<16)&4294967295)<<13|_>>>19))+((5*(_>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(M=0,f){case 3:M^=(255&o.charCodeAt(z+2))<<16;case 2:M^=(255&o.charCodeAt(z+1))<<8;case 1:_^=M=(65535&(M=(M=(65535&(M^=255&o.charCodeAt(z)))*T+(((M>>>16)*T&65535)<<16)&4294967295)<<15|M>>>17))*C+(((M>>>16)*C&65535)<<16)&4294967295}return _^=o.length,_=2246822507*(65535&(_^=_>>>16))+((2246822507*(_>>>16)&65535)<<16)&4294967295,_=3266489909*(65535&(_^=_>>>13))+((3266489909*(_>>>16)&65535)<<16)&4294967295,(_^=_>>>16)>>>0}),ns.exports),i=(gi||(gi=1,as.exports=function(o,h){for(var f,y=o.length,_=h^y,w=0;y>=4;)f=1540483477*(65535&(f=255&o.charCodeAt(w)|(255&o.charCodeAt(++w))<<8|(255&o.charCodeAt(++w))<<16|(255&o.charCodeAt(++w))<<24))+((1540483477*(f>>>16)&65535)<<16),_=1540483477*(65535&_)+((1540483477*(_>>>16)&65535)<<16)^(f=1540483477*(65535&(f^=f>>>24))+((1540483477*(f>>>16)&65535)<<16)),y-=4,++w;switch(y){case 3:_^=(255&o.charCodeAt(w+2))<<16;case 2:_^=(255&o.charCodeAt(w+1))<<8;case 1:_=1540483477*(65535&(_^=255&o.charCodeAt(w)))+((1540483477*(_>>>16)&65535)<<16)}return _=1540483477*(65535&(_^=_>>>13))+((1540483477*(_>>>16)&65535)<<16),(_^=_>>>15)>>>0}),as.exports);return wa.exports=s,wa.exports.murmur3=s,wa.exports.murmur2=i,wa.exports}(),ru=S(tu);class el{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,o,h,f){this.ids.push(tl(i)),this.positions.push(o,h,f)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let o=tl(i),h=0,f=this.ids.length-1;for(;h<f;){let _=h+f>>1;this.ids[_]>=o?f=_:h=_+1}let y=[];for(;this.ids[h]===o;)y.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return y}static serialize(i,o){let h=new Float64Array(i.ids),f=new Uint32Array(i.positions);return _n(h,f,0,h.length-1),o&&o.push(h.buffer,f.buffer),{ids:h,positions:f}}static deserialize(i){let o=new el;return o.ids=i.ids,o.positions=i.positions,o.indexed=!0,o}}function tl(s){let i=+s;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:ru(String(s))}function _n(s,i,o,h){for(;o<h;){let f=s[o+h>>1],y=o-1,_=h+1;for(;;){do y++;while(s[y]<f);do _--;while(s[_]>f);if(y>=_)break;Sa(s,y,_),Sa(i,3*y,3*_),Sa(i,3*y+1,3*_+1),Sa(i,3*y+2,3*_+2)}_-o<h-_?(_n(s,i,o,_),o=_+1):(_n(s,i,_+1,h),h=_)}}function Sa(s,i,o){let h=s[i];s[i]=s[o],s[o]=h}tt("FeaturePositionMap",el);class rn{constructor(i,o){this.gl=i.gl,this.location=o}}class os extends rn{constructor(i,o){super(i,o),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Hr extends rn{constructor(i,o){super(i,o),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class ci extends rn{constructor(i,o){super(i,o),this.current=Nt.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}let Hn=new Float32Array(16);function Kr(s){return[ar(255*s.r,255*s.g),ar(255*s.b,255*s.a)]}class zc{constructor(i,o,h){this.value=i,this.uniformNames=o.map(f=>`u_${f}`),this.type=h}setUniform(i,o,h){i.set(h.constantOr(this.value))}getBinding(i,o,h){return this.type==="color"?new ci(i,o):new os(i,o)}}class iu{constructor(i,o){this.uniformNames=o.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=i.tlbr}setUniform(i,o,h,f){let y=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;y&&i.set(y)}getBinding(i,o,h){return h.substr(0,9)==="u_pattern"?new Hr(i,o):new os(i,o)}}class _o{constructor(i,o,h,f){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=o.map(y=>({name:`a_${y}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new f}populatePaintArray(i,o,h){let f=this.paintVertexArray.length,y=this.expression.evaluate(new ur(0,h),o,{},h.canonical,[],h.formattedSection);this.paintVertexArray.resize(i),this._setPaintValue(f,i,y)}updatePaintArray(i,o,h,f,y){let _=this.expression.evaluate(new ur(0,y),h,f);this._setPaintValue(i,o,_)}_setPaintValue(i,o,h){if(this.type==="color"){let f=Kr(h);for(let y=i;y<o;y++)this.paintVertexArray.emplace(y,f[0],f[1])}else{for(let f=i;f<o;f++)this.paintVertexArray.emplace(f,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ta{constructor(i,o,h,f,y,_){this.expression=i,this.uniformNames=o.map(w=>`u_${w}_t`),this.type=h,this.useIntegerZoom=f,this.zoom=y,this.maxValue=0,this.paintVertexAttributes=o.map(w=>({name:`a_${w}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(i,o,h){let f=this.expression.evaluate(new ur(this.zoom,h),o,{},h.canonical,[],h.formattedSection),y=this.expression.evaluate(new ur(this.zoom+1,h),o,{},h.canonical,[],h.formattedSection),_=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(_,i,f,y)}updatePaintArray(i,o,h,f,y){let _=this.expression.evaluate(new ur(this.zoom,y),h,f),w=this.expression.evaluate(new ur(this.zoom+1,y),h,f);this._setPaintValue(i,o,_,w)}_setPaintValue(i,o,h,f){if(this.type==="color"){let y=Kr(h),_=Kr(f);for(let w=i;w<o;w++)this.paintVertexArray.emplace(w,y[0],y[1],_[0],_[1])}else{for(let y=i;y<o;y++)this.paintVertexArray.emplace(y,h,f);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(f))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,o){let h=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,f=oi(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(f)}getBinding(i,o,h){return new os(i,o)}}class ss{constructor(i,o,h,f,y,_){this.expression=i,this.type=o,this.useIntegerZoom=h,this.zoom=f,this.layerId=_,this.zoomInPaintVertexArray=new y,this.zoomOutPaintVertexArray=new y}populatePaintArray(i,o,h){let f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(f,i,o.patterns&&o.patterns[this.layerId],h.imagePositions)}updatePaintArray(i,o,h,f,y){this._setPaintValues(i,o,h.patterns&&h.patterns[this.layerId],y.imagePositions)}_setPaintValues(i,o,h,f){if(!f||!h)return;let{min:y,mid:_,max:w}=h,T=f[y],C=f[_],M=f[w];if(T&&C&&M)for(let z=i;z<o;z++)this.zoomInPaintVertexArray.emplace(z,C.tl[0],C.tl[1],C.br[0],C.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],C.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(z,C.tl[0],C.tl[1],C.br[0],C.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],C.pixelRatio,M.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,Wr.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,Wr.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class d0{constructor(i,o,h){this.binders={},this._buffers=[];let f=[];for(let y in i.paint._values){if(!h(y))continue;let _=i.paint.get(y);if(!(_ instanceof Va&&ts(_.property.specification)))continue;let w=f0(y,i.type),T=_.value,C=_.property.specification.type,M=_.property.useIntegerZoom,z=_.property.specification["property-type"],B=z==="cross-faded"||z==="cross-faded-data-driven";if(T.kind==="constant")this.binders[y]=B?new iu(T.value,w):new zc(T.value,w,C),f.push(`/u_${y}`);else if(T.kind==="source"||B){let U=km(y,C,"source");this.binders[y]=B?new ss(T,C,M,o,U,i.id):new _o(T,w,C,U),f.push(`/a_${y}`)}else{let U=km(y,C,"composite");this.binders[y]=new Ta(T,w,C,M,o,U),f.push(`/z_${y}`)}}this.cacheKey=f.sort().join("")}getMaxValue(i){let o=this.binders[i];return o instanceof _o||o instanceof Ta?o.maxValue:0}populatePaintArrays(i,o,h){for(let f in this.binders){let y=this.binders[f];(y instanceof _o||y instanceof Ta||y instanceof ss)&&y.populatePaintArray(i,o,h)}}setConstantPatternPositions(i,o){for(let h in this.binders){let f=this.binders[h];f instanceof iu&&f.setConstantPatternPositions(i,o)}}updatePaintArrays(i,o,h,f,y){let _=!1;for(let w in i){let T=o.getPositions(w);for(let C of T){let M=h.feature(C.index);for(let z in this.binders){let B=this.binders[z];if((B instanceof _o||B instanceof Ta||B instanceof ss)&&B.expression.isStateDependent===!0){let U=f.paint.get(z);B.expression=U.value,B.updatePaintArray(C.start,C.end,M,i[w],y),_=!0}}}}return _}defines(){let i=[];for(let o in this.binders){let h=this.binders[o];(h instanceof zc||h instanceof iu)&&i.push(...h.uniformNames.map(f=>`#define HAS_UNIFORM_${f}`))}return i}getBinderAttributes(){let i=[];for(let o in this.binders){let h=this.binders[o];if(h instanceof _o||h instanceof Ta)for(let f=0;f<h.paintVertexAttributes.length;f++)i.push(h.paintVertexAttributes[f].name);else if(h instanceof ss)for(let f=0;f<Wr.members.length;f++)i.push(Wr.members[f].name)}return i}getBinderUniforms(){let i=[];for(let o in this.binders){let h=this.binders[o];if(h instanceof zc||h instanceof iu||h instanceof Ta)for(let f of h.uniformNames)i.push(f)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,o){let h=[];for(let f in this.binders){let y=this.binders[f];if(y instanceof zc||y instanceof iu||y instanceof Ta){for(let _ of y.uniformNames)if(o[_]){let w=y.getBinding(i,o[_],_);h.push({name:_,property:f,binding:w})}}}return h}setUniforms(i,o,h,f){for(let{name:y,property:_,binding:w}of o)this.binders[_].setUniform(w,f,h.get(_),y)}updatePaintBuffers(i){this._buffers=[];for(let o in this.binders){let h=this.binders[o];if(i&&h instanceof ss){let f=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(h instanceof _o||h instanceof Ta)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(let o in this.binders){let h=this.binders[o];(h instanceof _o||h instanceof Ta||h instanceof ss)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(let i in this.binders){let o=this.binders[i];(o instanceof _o||o instanceof Ta||o instanceof ss)&&o.destroy()}}}class Rn{constructor(i,o,h=()=>!0){this.programConfigurations={};for(let f of i)this.programConfigurations[f.id]=new d0(f,o,h);this.needsUpload=!1,this._featureMap=new el,this._bufferOffset=0}populatePaintArrays(i,o,h,f){for(let y in this.programConfigurations)this.programConfigurations[y].populatePaintArrays(i,o,f);o.id!==void 0&&this._featureMap.add(o.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,o,h,f){for(let y of h)this.needsUpload=this.programConfigurations[y.id].updatePaintArrays(i,this._featureMap,o,y,f)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(let o in this.programConfigurations)this.programConfigurations[o].upload(i);this.needsUpload=!1}}destroy(){for(let i in this.programConfigurations)this.programConfigurations[i].destroy()}}function f0(s,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${i}-`,"").replace(/-/g,"_")]}function km(s,i,o){let h={color:{source:Lc,composite:k},number:{source:v,composite:Lc}},f=function(y){return{"line-pattern":{source:je,composite:je},"fill-pattern":{source:je,composite:je},"fill-extrusion-pattern":{source:je,composite:je}}[y]}(s);return f&&f[o]||h[i][o]}tt("ConstantBinder",zc),tt("CrossFadedConstantBinder",iu),tt("SourceExpressionBinder",_o),tt("CrossFadedCompositeBinder",ss),tt("CompositeExpressionBinder",Ta),tt("ProgramConfiguration",d0,{omit:["_buffers"]}),tt("ProgramConfigurationSet",Rn);let Sd=Math.pow(2,14)-1,Td=-Sd-1;function ls(s){let i=Jt/s.extent,o=s.loadGeometry();for(let h=0;h<o.length;h++){let f=o[h];for(let y=0;y<f.length;y++){let _=f[y],w=Math.round(_.x*i),T=Math.round(_.y*i);_.x=oi(w,Td,Sd),_.y=oi(T,Td,Sd),(w<_.x||w>_.x+1||T<_.y||T>_.y+1)&&Br("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function xo(s,i){return{type:s.type,id:s.id,properties:s.properties,geometry:i?ls(s):[]}}let nz=-32768;function $fe(s,i,o,h,f){s.emplaceBack(nz+8*i+h,nz+8*o+f)}class vT{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new xe,this.indexArray=new nr,this.segments=new Pt,this.programConfigurations=new Rn(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){let f=this.layers[0],y=[],_=null,w=!1,T=f.type==="heatmap";if(f.type==="circle"){let M=f;_=M.layout.get("circle-sort-key"),w=!_.isConstant(),T=T||M.paint.get("circle-pitch-alignment")==="map"}let C=T?o.subdivisionGranularity.circle:1;for(let{feature:M,id:z,index:B,sourceLayerIndex:U}of i){let $=this.layers[0]._featureFilter.needGeometry,Z=xo(M,$);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom,{globalState:this.globalState}),Z,h))continue;let J=w?_.evaluate(Z,{},h):void 0,ie={id:z,properties:M.properties,type:M.type,sourceLayerIndex:U,index:B,geometry:$?Z.geometry:ls(M),patterns:{},sortKey:J};y.push(ie)}w&&y.sort((M,z)=>M.sortKey-z.sortKey);for(let M of y){let{geometry:z,index:B,sourceLayerIndex:U}=M,$=i[B].feature;this.addFeature(M,z,B,h,C),o.featureIndex.insert($,z,B,U,this.index)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Ir),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,o,h,f,y=1){let _;switch(y){case 1:_=[0,7];break;case 3:_=[0,2,5,7];break;case 5:_=[0,1,3,4,6,7];break;case 7:_=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${y}; valid values are 1, 3, 5, 7.`)}let w=_.length;for(let T of o)for(let C of T){let M=C.x,z=C.y;if(M<0||M>=Jt||z<0||z>=Jt)continue;let B=this.segments.prepareSegment(w*w,this.layoutVertexArray,this.indexArray,i.sortKey),U=B.vertexLength;for(let $=0;$<w;$++)for(let Z=0;Z<w;Z++)$fe(this.layoutVertexArray,M,z,_[Z],_[$]);for(let $=0;$<w-1;$++)for(let Z=0;Z<w-1;Z++){let J=U+$*w+Z,ie=U+($+1)*w+Z;this.indexArray.emplaceBack(J,ie+1,J+1),this.indexArray.emplaceBack(J,ie,ie+1)}B.vertexLength+=w*w,B.primitiveLength+=(w-1)*(w-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{imagePositions:{},canonical:f,globalState:this.globalState})}}function az(s,i){for(let o=0;o<s.length;o++)if(Ed(i,s[o]))return!0;for(let o=0;o<i.length;o++)if(Ed(s,i[o]))return!0;return!!yT(s,i)}function Vfe(s,i,o){return!!Ed(s,i)||!!_T(i,s,o)}function oz(s,i){if(s.length===1)return lz(i,s[0]);for(let o=0;o<i.length;o++){let h=i[o];for(let f=0;f<h.length;f++)if(Ed(s,h[f]))return!0}for(let o=0;o<s.length;o++)if(lz(i,s[o]))return!0;for(let o=0;o<i.length;o++)if(yT(s,i[o]))return!0;return!1}function Gfe(s,i,o){if(s.length>1){if(yT(s,i))return!0;for(let h=0;h<i.length;h++)if(_T(i[h],s,o))return!0}for(let h=0;h<s.length;h++)if(_T(s[h],i,o))return!0;return!1}function yT(s,i){if(s.length===0||i.length===0)return!1;for(let o=0;o<s.length-1;o++){let h=s[o],f=s[o+1];for(let y=0;y<i.length-1;y++)if(Zfe(h,f,i[y],i[y+1]))return!0}return!1}function Zfe(s,i,o,h){return fa(s,o,h)!==fa(i,o,h)&&fa(s,i,o)!==fa(s,i,h)}function _T(s,i,o){let h=o*o;if(i.length===1)return s.distSqr(i[0])<h;for(let f=1;f<i.length;f++)if(sz(s,i[f-1],i[f])<h)return!0;return!1}function sz(s,i,o){let h=i.distSqr(o);if(h===0)return s.distSqr(i);let f=((s.x-i.x)*(o.x-i.x)+(s.y-i.y)*(o.y-i.y))/h;return s.distSqr(f<0?i:f>1?o:o.sub(i)._mult(f)._add(i))}function lz(s,i){let o,h,f,y=!1;for(let _=0;_<s.length;_++){o=s[_];for(let w=0,T=o.length-1;w<o.length;T=w++)h=o[w],f=o[T],h.y>i.y!=f.y>i.y&&i.x<(f.x-h.x)*(i.y-h.y)/(f.y-h.y)+h.x&&(y=!y)}return y}function Ed(s,i){let o=!1;for(let h=0,f=s.length-1;h<s.length;f=h++){let y=s[h],_=s[f];y.y>i.y!=_.y>i.y&&i.x<(_.x-y.x)*(i.y-y.y)/(_.y-y.y)+y.x&&(o=!o)}return o}function Wfe(s,i,o){let h=o[0],f=o[2];if(s.x<h.x&&i.x<h.x||s.x>f.x&&i.x>f.x||s.y<h.y&&i.y<h.y||s.y>f.y&&i.y>f.y)return!1;let y=fa(s,i,o[0]);return y!==fa(s,i,o[1])||y!==fa(s,i,o[2])||y!==fa(s,i,o[3])}function Dm(s,i,o){let h=i.paint.get(s).value;return h.kind==="constant"?h.value:o.programConfigurations.get(i.id).getMaxValue(s)}function p0(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function m0(s,i,o,h,f){if(!i[0]&&!i[1])return s;let y=x.convert(i)._mult(f);o==="viewport"&&y._rotate(-h);let _=[];for(let w=0;w<s.length;w++)_.push(s[w].sub(y));return _}let uz,cz;tt("CircleBucket",vT,{omit:["layers"]});var Hfe={get paint(){return cz=cz||new en({"circle-radius":new mt(Se.paint_circle["circle-radius"]),"circle-color":new mt(Se.paint_circle["circle-color"]),"circle-blur":new mt(Se.paint_circle["circle-blur"]),"circle-opacity":new mt(Se.paint_circle["circle-opacity"]),"circle-translate":new lt(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new lt(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new lt(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new lt(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mt(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mt(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mt(Se.paint_circle["circle-stroke-opacity"])})},get layout(){return uz=uz||new en({"circle-sort-key":new mt(Se.layout_circle["circle-sort-key"])})}};class Kfe extends Wn{constructor(i){super(i,Hfe)}createBucket(i){return new vT(i)}queryRadius(i){let o=i;return Dm("circle-radius",this,o)+Dm("circle-stroke-width",this,o)+p0(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:o,featureState:h,geometry:f,transform:y,pixelsToTileUnits:_,unwrappedTileID:w,getElevation:T}){let C=m0(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-y.bearingInRadians,_),M=this.paint.get("circle-radius").evaluate(o,h)+this.paint.get("circle-stroke-width").evaluate(o,h),z=this.paint.get("circle-pitch-alignment")==="map",B=z?C:function($,Z,J,ie){return $.map(ye=>hz(ye,Z,J,ie))}(C,y,w,T),U=z?M*_:M;for(let $ of f)for(let Z of $){let J=z?Z:hz(Z,y,w,T),ie=U,ye=y.projectTileCoordinates(Z.x,Z.y,w,T).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ie*=ye/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ie*=y.cameraToCenterDistance/ye),Vfe(B,J,ie))return!0}return!1}}function hz(s,i,o,h){let f=i.projectTileCoordinates(s.x,s.y,o,h).point;return new x((.5*f.x+.5)*i.width,(.5*-f.y+.5)*i.height)}class dz extends vT{}let fz;tt("HeatmapBucket",dz,{omit:["layers"]});var Xfe={get paint(){return fz=fz||new en({"heatmap-radius":new mt(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mt(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new lt(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new _d(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new lt(Se.paint_heatmap["heatmap-opacity"])})}};function xT(s,{width:i,height:o},h,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==i*o*h)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${i*o*h}`)}else f=new Uint8Array(i*o*h);return s.width=i,s.height=o,s.data=f,s}function pz(s,{width:i,height:o},h){if(i===s.width&&o===s.height)return;let f=xT({},{width:i,height:o},h);bT(s,f,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,i),height:Math.min(s.height,o)},h),s.width=i,s.height=o,s.data=f.data}function bT(s,i,o,h,f,y){if(f.width===0||f.height===0)return i;if(f.width>s.width||f.height>s.height||o.x>s.width-f.width||o.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>i.width||f.height>i.height||h.x>i.width-f.width||h.y>i.height-f.height)throw new RangeError("out of range destination coordinates for image copy");let _=s.data,w=i.data;if(_===w)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<f.height;T++){let C=((o.y+T)*s.width+o.x)*y,M=((h.y+T)*i.width+h.x)*y;for(let z=0;z<f.width*y;z++)w[M+z]=_[C+z]}return i}class Lm{constructor(i,o){xT(this,i,1,o)}resize(i){pz(this,i,1)}clone(){return new Lm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,h,f,y){bT(i,o,h,f,y,1)}}class On{constructor(i,o){xT(this,i,4,o)}resize(i){pz(this,i,4)}replace(i,o){o?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new On({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,h,f,y){bT(i,o,h,f,y,4)}setPixel(i,o,h){let f=4*(i*this.width+o);this.data[f+0]=Math.round(255*h.r/h.a),this.data[f+1]=Math.round(255*h.g/h.a),this.data[f+2]=Math.round(255*h.b/h.a),this.data[f+3]=Math.round(255*h.a)}}function mz(s){let i={},o=s.resolution||256,h=s.clips?s.clips.length:1,f=s.image||new On({width:o,height:h});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);let y=(_,w,T)=>{i[s.evaluationKey]=T;let C=s.expression.evaluate(i);f.setPixel(_/4/o,w/4,C)};if(s.clips)for(let _=0,w=0;_<h;++_,w+=4*o)for(let T=0,C=0;T<o;T++,C+=4){let M=T/(o-1),{start:z,end:B}=s.clips[_];y(w,C,z*(1-M)+B*M)}else for(let _=0,w=0;_<o;_++,w+=4)y(0,w,_/(o-1));return f}tt("AlphaImage",Lm),tt("RGBAImage",On);let wT="big-fb";class Yfe extends Wn{createBucket(i){return new dz(i)}constructor(i){super(i,Xfe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=mz({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(wT)&&this.heatmapFbos.delete(wT)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let gz;var Jfe={get paint(){return gz=gz||new en({"hillshade-illumination-direction":new lt(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new lt(Se.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new lt(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new lt(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new lt(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new lt(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new lt(Se.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new lt(Se.paint_hillshade["hillshade-method"])})}};class Qfe extends Wn{constructor(i){super(i,Jfe),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,o=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,f=this.paint.get("hillshade-shadow-color").values,y=Math.max(i.length,o.length,h.length,f.length);i=i.concat(Array(y-i.length).fill(i.at(-1))),o=o.concat(Array(y-o.length).fill(o.at(-1))),h=h.concat(Array(y-h.length).fill(h.at(-1))),f=f.concat(Array(y-f.length).fill(f.at(-1)));let _=o.map(Ds);return{directionRadians:i.map(Ds),altitudeRadians:_,shadowColor:f,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let vz;var epe={get paint(){return vz=vz||new en({"color-relief-opacity":new lt(Se["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new _d(Se["paint_color-relief"]["color-relief-color"])})}};class ST{constructor(i,o,h,f){this.context=i,this.format=h,this.texture=i.gl.createTexture(),this.update(o,f)}update(i,o,h){let{width:f,height:y}=i,_=!(this.size&&this.size[0]===f&&this.size[1]===y||h),{context:w}=this,{gl:T}=w;if(this.useMipmap=!!(o&&o.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),w.pixelStoreUnpackFlipY.set(!1),w.pixelStoreUnpack.set(1),w.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!o||o.premultiply!==!1)),_)this.size=[f,y],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||za(i)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,i):T.texImage2D(T.TEXTURE_2D,0,this.format,f,y,0,this.format,T.UNSIGNED_BYTE,i.data);else{let{x:C,y:M}=h||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||za(i)?T.texSubImage2D(T.TEXTURE_2D,0,C,M,T.RGBA,T.UNSIGNED_BYTE,i):T.texSubImage2D(T.TEXTURE_2D,0,C,M,f,y,T.RGBA,T.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D),w.pixelStoreUnpackFlipY.setDefault(),w.pixelStoreUnpack.setDefault(),w.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,o,h){let{context:f}=this,{gl:y}=f;y.bindTexture(y.TEXTURE_2D,this.texture),h!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(h=y.LINEAR),i!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,i),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,h||i),this.filter=i),o!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class yz{constructor(i,o,h,f=1,y=1,_=1,w=0){if(this.uid=i,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Br(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;let T=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=y,this.blueFactor=_,this.baseShift=w;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let C=0;C<T;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(T,C)]=this.data[this._idx(T-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,T)]=this.data[this._idx(C,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let C=0;C<T;C++)for(let M=0;M<T;M++){let z=this.get(C,M);z>this.max&&(this.max=z),z<this.min&&(this.min=z)}}get(i,o){let h=new Uint8Array(this.data.buffer),f=4*this._idx(i,o);return this.unpack(h[f],h[f+1],h[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,o){if(i<-1||i>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(i+1)}unpack(i,o,h){return i*this.redFactor+o*this.greenFactor+h*this.blueFactor-this.baseShift}pack(i){return _z(i,this.getUnpackVector())}getPixels(){return new On({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,o,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let f=o*this.dim,y=o*this.dim+this.dim,_=h*this.dim,w=h*this.dim+this.dim;switch(o){case-1:f=y-1;break;case 1:y=f+1}switch(h){case-1:_=w-1;break;case 1:w=_+1}let T=-o*this.dim,C=-h*this.dim;for(let M=_;M<w;M++)for(let z=f;z<y;z++)this.data[this._idx(z,M)]=i.data[this._idx(z+T,M+C)]}}function _z(s,i){let o=i[0],h=i[1],f=i[2],y=i[3],_=Math.min(o,h,f),w=Math.round((s+y)/_);return{r:Math.floor(w*_/o)%256,g:Math.floor(w*_/h)%256,b:Math.floor(w*_/f)%256}}tt("DEMData",yz);class tpe extends Wn{constructor(i){super(i,epe)}_createColorRamp(i){let o={elevationStops:[],colorStops:[]},h=this._transitionablePaint._values["color-relief-color"].value.expression;if(h instanceof qc&&h._styleExpression.expression instanceof Pi){this.colorRampExpression=h;let _=h._styleExpression.expression;o.elevationStops=_.labels,o.colorStops=[];for(let w of o.elevationStops)o.colorStops.push(_.evaluate({globals:{elevation:w}}))}if(o.elevationStops.length<1&&(o.elevationStops=[0],o.colorStops=[Nt.transparent]),o.elevationStops.length<2&&(o.elevationStops.push(o.elevationStops[0]+1),o.colorStops.push(o.colorStops[0])),o.elevationStops.length<=i)return o;let f={elevationStops:[],colorStops:[]},y=(o.elevationStops.length-1)/(i-1);for(let _=0;_<o.elevationStops.length-.5;_+=y)f.elevationStops.push(o.elevationStops[Math.round(_)]),f.colorStops.push(o.colorStops[Math.round(_)]);return Br(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),f}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,o,h){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;let f=this._createColorRamp(o),y=new On({width:f.colorStops.length,height:1}),_=new On({width:f.colorStops.length,height:1});for(let w=0;w<f.elevationStops.length;w++){let T=_z(f.elevationStops[w],h);_.setPixel(0,w,new Nt(T.r/255,T.g/255,T.b/255,1)),y.setPixel(0,w,f.colorStops[w])}return this.colorRampTextures={elevationTexture:new ST(i,_,i.gl.RGBA),colorTexture:new ST(i,y,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return this.visibility!=="none"&&!!this.colorRampTextures}}let rpe=Dr([{name:"a_pos",components:2,type:"Int16"}],4),{members:ipe}=rpe;function TT(s,i,o){let h=o.patternDependencies,f=!1;for(let y of i){let _=y.paint.get(`${s}-pattern`);_.isConstant()||(f=!0);let w=_.constantOr(null);w&&(f=!0,h[w.to]=!0,h[w.from]=!0)}return f}function ET(s,i,o,h,f){let{zoom:y,globalState:_}=h,w=f.patternDependencies;for(let T of i){let C=T.paint.get(`${s}-pattern`).value;if(C.kind!=="constant"){let M=C.evaluate({zoom:y-1,globalState:_},o,{},f.availableImages),z=C.evaluate({zoom:y,globalState:_},o,{},f.availableImages),B=C.evaluate({zoom:y+1,globalState:_},o,{},f.availableImages);M=M&&M.name?M.name:M,z=z&&z.name?z.name:z,B=B&&B.name?B.name:B,w[M]=!0,w[z]=!0,w[B]=!0,o.patterns[T.id]={min:M,mid:z,max:B}}}return o}function xz(s,i,o,h,f){let y;if(f===function(_,w,T,C){let M=0;for(let z=w,B=T-C;z<T;z+=C)M+=(_[B]-_[z])*(_[z+1]+_[B+1]),B=z;return M}(s,i,o,h)>0)for(let _=i;_<o;_+=h)y=Tz(_/h|0,s[_],s[_+1],y);else for(let _=o-h;_>=i;_-=h)y=Tz(_/h|0,s[_],s[_+1],y);return y&&Id(y,y.next)&&(Bm(y),y=y.next),y}function Fc(s,i){if(!s)return s;i||(i=s);let o,h=s;do if(o=!1,h.steiner||!Id(h,h.next)&&Ur(h.prev,h,h.next)!==0)h=h.next;else{if(Bm(h),h=i=h.prev,h===h.next)break;o=!0}while(o||h!==i);return i}function zm(s,i,o,h,f,y,_){if(!s)return;!_&&y&&function(T,C,M,z){let B=T;do B.z===0&&(B.z=IT(B.x,B.y,C,M,z)),B.prevZ=B.prev,B.nextZ=B.next,B=B.next;while(B!==T);B.prevZ.nextZ=null,B.prevZ=null,function(U){let $,Z=1;do{let J,ie=U;U=null;let ye=null;for($=0;ie;){$++;let he=ie,pe=0;for(let Oe=0;Oe<Z&&(pe++,he=he.nextZ,he);Oe++);let Pe=Z;for(;pe>0||Pe>0&&he;)pe!==0&&(Pe===0||!he||ie.z<=he.z)?(J=ie,ie=ie.nextZ,pe--):(J=he,he=he.nextZ,Pe--),ye?ye.nextZ=J:U=J,J.prevZ=ye,ye=J;ie=he}ye.nextZ=null,Z*=2}while($>1)}(B)}(s,h,f,y);let w=s;for(;s.prev!==s.next;){let T=s.prev,C=s.next;if(y?ape(s,h,f,y):npe(s))i.push(T.i,s.i,C.i),Bm(s),s=C.next,w=C.next;else if((s=C)===w){_?_===1?zm(s=ope(Fc(s),i),i,o,h,f,y,2):_===2&&spe(s,i,o,h,f,y):zm(Fc(s),i,o,h,f,y,1);break}}}function npe(s){let i=s.prev,o=s,h=s.next;if(Ur(i,o,h)>=0)return!1;let f=i.x,y=o.x,_=h.x,w=i.y,T=o.y,C=h.y,M=Math.min(f,y,_),z=Math.min(w,T,C),B=Math.max(f,y,_),U=Math.max(w,T,C),$=h.next;for(;$!==i;){if($.x>=M&&$.x<=B&&$.y>=z&&$.y<=U&&Fm(f,w,y,T,_,C,$.x,$.y)&&Ur($.prev,$,$.next)>=0)return!1;$=$.next}return!0}function ape(s,i,o,h){let f=s.prev,y=s,_=s.next;if(Ur(f,y,_)>=0)return!1;let w=f.x,T=y.x,C=_.x,M=f.y,z=y.y,B=_.y,U=Math.min(w,T,C),$=Math.min(M,z,B),Z=Math.max(w,T,C),J=Math.max(M,z,B),ie=IT(U,$,i,o,h),ye=IT(Z,J,i,o,h),he=s.prevZ,pe=s.nextZ;for(;he&&he.z>=ie&&pe&&pe.z<=ye;){if(he.x>=U&&he.x<=Z&&he.y>=$&&he.y<=J&&he!==f&&he!==_&&Fm(w,M,T,z,C,B,he.x,he.y)&&Ur(he.prev,he,he.next)>=0||(he=he.prevZ,pe.x>=U&&pe.x<=Z&&pe.y>=$&&pe.y<=J&&pe!==f&&pe!==_&&Fm(w,M,T,z,C,B,pe.x,pe.y)&&Ur(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;he&&he.z>=ie;){if(he.x>=U&&he.x<=Z&&he.y>=$&&he.y<=J&&he!==f&&he!==_&&Fm(w,M,T,z,C,B,he.x,he.y)&&Ur(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;pe&&pe.z<=ye;){if(pe.x>=U&&pe.x<=Z&&pe.y>=$&&pe.y<=J&&pe!==f&&pe!==_&&Fm(w,M,T,z,C,B,pe.x,pe.y)&&Ur(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function ope(s,i){let o=s;do{let h=o.prev,f=o.next.next;!Id(h,f)&&wz(h,o,o.next,f)&&Nm(h,f)&&Nm(f,h)&&(i.push(h.i,o.i,f.i),Bm(o),Bm(o.next),o=s=f),o=o.next}while(o!==s);return Fc(o)}function spe(s,i,o,h,f,y){let _=s;do{let w=_.next.next;for(;w!==_.prev;){if(_.i!==w.i&&dpe(_,w)){let T=Sz(_,w);return _=Fc(_,_.next),T=Fc(T,T.next),zm(_,i,o,h,f,y,0),void zm(T,i,o,h,f,y,0)}w=w.next}_=_.next}while(_!==s)}function lpe(s,i){let o=s.x-i.x;return o===0&&(o=s.y-i.y,o===0)&&(o=(s.next.y-s.y)/(s.next.x-s.x)-(i.next.y-i.y)/(i.next.x-i.x)),o}function upe(s,i){let o=function(f,y){let _=y,w=f.x,T=f.y,C,M=-1/0;if(Id(f,_))return _;do{if(Id(f,_.next))return _.next;if(T<=_.y&&T>=_.next.y&&_.next.y!==_.y){let Z=_.x+(T-_.y)*(_.next.x-_.x)/(_.next.y-_.y);if(Z<=w&&Z>M&&(M=Z,C=_.x<_.next.x?_:_.next,Z===w))return C}_=_.next}while(_!==y);if(!C)return null;let z=C,B=C.x,U=C.y,$=1/0;_=C;do{if(w>=_.x&&_.x>=B&&w!==_.x&&bz(T<U?w:M,T,B,U,T<U?M:w,T,_.x,_.y)){let Z=Math.abs(T-_.y)/(w-_.x);Nm(_,f)&&(Z<$||Z===$&&(_.x>C.x||_.x===C.x&&cpe(C,_)))&&(C=_,$=Z)}_=_.next}while(_!==z);return C}(s,i);if(!o)return i;let h=Sz(o,s);return Fc(h,h.next),Fc(o,o.next)}function cpe(s,i){return Ur(s.prev,s,i.prev)<0&&Ur(i.next,s,s.next)<0}function IT(s,i,o,h,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-o)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*f|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function hpe(s){let i=s,o=s;do(i.x<o.x||i.x===o.x&&i.y<o.y)&&(o=i),i=i.next;while(i!==s);return o}function bz(s,i,o,h,f,y,_,w){return(f-_)*(i-w)>=(s-_)*(y-w)&&(s-_)*(h-w)>=(o-_)*(i-w)&&(o-_)*(y-w)>=(f-_)*(h-w)}function Fm(s,i,o,h,f,y,_,w){return!(s===_&&i===w)&&bz(s,i,o,h,f,y,_,w)}function dpe(s,i){return s.next.i!==i.i&&s.prev.i!==i.i&&!function(o,h){let f=o;do{if(f.i!==o.i&&f.next.i!==o.i&&f.i!==h.i&&f.next.i!==h.i&&wz(f,f.next,o,h))return!0;f=f.next}while(f!==o);return!1}(s,i)&&(Nm(s,i)&&Nm(i,s)&&function(o,h){let f=o,y=!1,_=(o.x+h.x)/2,w=(o.y+h.y)/2;do f.y>w!=f.next.y>w&&f.next.y!==f.y&&_<(f.next.x-f.x)*(w-f.y)/(f.next.y-f.y)+f.x&&(y=!y),f=f.next;while(f!==o);return y}(s,i)&&(Ur(s.prev,s,i.prev)||Ur(s,i.prev,i))||Id(s,i)&&Ur(s.prev,s,s.next)>0&&Ur(i.prev,i,i.next)>0)}function Ur(s,i,o){return(i.y-s.y)*(o.x-i.x)-(i.x-s.x)*(o.y-i.y)}function Id(s,i){return s.x===i.x&&s.y===i.y}function wz(s,i,o,h){let f=v0(Ur(s,i,o)),y=v0(Ur(s,i,h)),_=v0(Ur(o,h,s)),w=v0(Ur(o,h,i));return f!==y&&_!==w||!(f!==0||!g0(s,o,i))||!(y!==0||!g0(s,h,i))||!(_!==0||!g0(o,s,h))||!(w!==0||!g0(o,i,h))}function g0(s,i,o){return i.x<=Math.max(s.x,o.x)&&i.x>=Math.min(s.x,o.x)&&i.y<=Math.max(s.y,o.y)&&i.y>=Math.min(s.y,o.y)}function v0(s){return s>0?1:s<0?-1:0}function Nm(s,i){return Ur(s.prev,s,s.next)<0?Ur(s,i,s.next)>=0&&Ur(s,s.prev,i)>=0:Ur(s,i,s.prev)<0||Ur(s,s.next,i)<0}function Sz(s,i){let o=qT(s.i,s.x,s.y),h=qT(i.i,i.x,i.y),f=s.next,y=i.prev;return s.next=i,i.prev=s,o.next=f,f.prev=o,h.next=o,o.prev=h,y.next=h,h.prev=y,h}function Tz(s,i,o,h){let f=qT(s,i,o);return h?(f.next=h.next,f.prev=h,h.next.prev=f,h.next=f):(f.prev=f,f.next=f),f}function Bm(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function qT(s,i,o){return{i:s,x:i,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class qd{constructor(i,o){if(o>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=o}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class y0{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}y0.noSubdivision=new y0({fill:new qd(0,0),line:new qd(0,0),tile:new qd(0,0),stencil:new qd(0,0),circle:1}),tt("SubdivisionGranularityExpression",qd),tt("SubdivisionGranularitySetting",y0);let Pd=-32768,jm=32767;class fpe{constructor(i,o){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=Jt/i,this._canonical=o}_getKey(i,o){return(i+=32768)<<16|o+32768}_vertexToIndex(i,o){if(i<-32768||o<-32768||i>32767||o>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let h=0|Math.round(i),f=0|Math.round(o),y=this._getKey(h,f);if(this._vertexDictionary.has(y))return this._vertexDictionary.get(y);let _=this._vertexBuffer.length/2;return this._vertexDictionary.set(y,_),this._vertexBuffer.push(h,f),_}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(f,y){let _=[];for(let w=0;w<y.length;w+=3){let T=y[w],C=y[w+1],M=y[w+2],z=f[2*T],B=f[2*T+1];(f[2*C]-z)*(f[2*M+1]-B)-(f[2*C+1]-B)*(f[2*M]-z)>0?(_.push(T),_.push(M),_.push(C)):(_.push(T),_.push(C),_.push(M))}return _}(this._vertexBuffer,i);let o=[],h=i.length;for(let f=0;f<h;f+=3){let y=[i[f+0],i[f+1],i[f+2]],_=[this._vertexBuffer[2*i[f+0]+0],this._vertexBuffer[2*i[f+0]+1],this._vertexBuffer[2*i[f+1]+0],this._vertexBuffer[2*i[f+1]+1],this._vertexBuffer[2*i[f+2]+0],this._vertexBuffer[2*i[f+2]+1]],w=1/0,T=1/0,C=-1/0,M=-1/0;for(let Z=0;Z<3;Z++){let J=_[2*Z],ie=_[2*Z+1];w=Math.min(w,J),C=Math.max(C,J),T=Math.min(T,ie),M=Math.max(M,ie)}if(w===C||T===M)continue;let z=Math.floor(w/this._granularityCellSize),B=Math.ceil(C/this._granularityCellSize),U=Math.floor(T/this._granularityCellSize),$=Math.ceil(M/this._granularityCellSize);if(z!==B||U!==$)for(let Z=U;Z<$;Z++){let J=this._scanlineGenerateVertexRingForCellRow(Z,_,y);ppe(this._vertexBuffer,J,o)}else o.push(...y)}return o}_scanlineGenerateVertexRingForCellRow(i,o,h){let f=i*this._granularityCellSize,y=f+this._granularityCellSize,_=[];for(let w=0;w<3;w++){let T=o[2*w],C=o[2*w+1],M=o[2*(w+1)%6],z=o[(2*(w+1)+1)%6],B=o[2*(w+2)%6],U=o[(2*(w+2)+1)%6],$=M-T,Z=z-C,J=$===0,ie=Z===0,ye=(f-C)/Z,he=(y-C)/Z,pe=Math.min(ye,he),Pe=Math.max(ye,he);if(!ie&&(pe>=1||Pe<=0)||ie&&(C<f||C>y)){z>=f&&z<=y&&_.push(h[(w+1)%3]);continue}!ie&&pe>0&&_.push(this._vertexToIndex(T+$*pe,C+Z*pe));let Oe=T+$*Math.max(pe,0),Ne=T+$*Math.min(Pe,1);J||this._generateIntraEdgeVertices(_,T,C,M,z,Oe,Ne),!ie&&Pe<1&&_.push(this._vertexToIndex(T+$*Pe,C+Z*Pe)),(ie||z>=f&&z<=y)&&_.push(h[(w+1)%3]),!ie&&(z<=f||z>=y)&&this._generateInterEdgeVertices(_,T,C,M,z,B,U,Ne,f,y)}return _}_generateIntraEdgeVertices(i,o,h,f,y,_,w){let T=f-o,C=y-h,M=C===0,z=M?Math.min(o,f):Math.min(_,w),B=M?Math.max(o,f):Math.max(_,w),U=Math.floor(z/this._granularityCellSize)+1,$=Math.ceil(B/this._granularityCellSize)-1;if(M?o<f:_<w)for(let Z=U;Z<=$;Z++){let J=Z*this._granularityCellSize;i.push(this._vertexToIndex(J,h+C*(J-o)/T))}else for(let Z=$;Z>=U;Z--){let J=Z*this._granularityCellSize;i.push(this._vertexToIndex(J,h+C*(J-o)/T))}}_generateInterEdgeVertices(i,o,h,f,y,_,w,T,C,M){let z=y-h,B=_-f,U=w-y,$=(C-y)/U,Z=(M-y)/U,J=Math.min($,Z),ie=Math.max($,Z),ye=f+B*J,he=Math.floor(Math.min(ye,T)/this._granularityCellSize)+1,pe=Math.ceil(Math.max(ye,T)/this._granularityCellSize)-1,Pe=T<ye,Oe=U===0;if(Oe&&(w===C||w===M))return;if(Oe||J>=1||ie<=0){let Xe=h-w,Ve=_+(o-_)*Math.min((C-w)/Xe,(M-w)/Xe);he=Math.floor(Math.min(Ve,T)/this._granularityCellSize)+1,pe=Math.ceil(Math.max(Ve,T)/this._granularityCellSize)-1,Pe=T<Ve}let Ne=z>0?M:C;if(Pe)for(let Xe=he;Xe<=pe;Xe++)i.push(this._vertexToIndex(Xe*this._granularityCellSize,Ne));else for(let Xe=pe;Xe>=he;Xe--)i.push(this._vertexToIndex(Xe*this._granularityCellSize,Ne))}_generateOutline(i){let o=[];for(let h of i){let f=Nc(h,this._granularity,!0),y=this._pointArrayToIndices(f),_=[];for(let w=1;w<y.length;w++)_.push(y[w-1]),_.push(y[w]);o.push(_)}return o}_handlePoles(i){let o=!1,h=!1;this._canonical&&(this._canonical.y===0&&(o=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(o||h)&&this._fillPoles(i,o,h)}_ensureNoPoleVertices(){let i=this._vertexBuffer;for(let o=0;o<i.length;o+=2){let h=i[o+1];h===Pd&&(i[o+1]=-32767),h===jm&&(i[o+1]=32766)}}_generatePoleQuad(i,o,h,f,y,_){f>y!=(_===Pd)?(i.push(o),i.push(h),i.push(this._vertexToIndex(f,_)),i.push(h),i.push(this._vertexToIndex(y,_)),i.push(this._vertexToIndex(f,_))):(i.push(h),i.push(o),i.push(this._vertexToIndex(f,_)),i.push(this._vertexToIndex(y,_)),i.push(h),i.push(this._vertexToIndex(f,_)))}_fillPoles(i,o,h){let f=this._vertexBuffer,y=Jt,_=i.length;for(let w=2;w<_;w+=3){let T=i[w-2],C=i[w-1],M=i[w],z=f[2*T],B=f[2*T+1],U=f[2*C],$=f[2*C+1],Z=f[2*M],J=f[2*M+1];o&&(B===0&&$===0&&this._generatePoleQuad(i,T,C,z,U,Pd),$===0&&J===0&&this._generatePoleQuad(i,C,M,U,Z,Pd),J===0&&B===0&&this._generatePoleQuad(i,M,T,Z,z,Pd)),h&&(B===y&&$===y&&this._generatePoleQuad(i,T,C,z,U,jm),$===y&&J===y&&this._generatePoleQuad(i,C,M,U,Z,jm),J===y&&B===y&&this._generatePoleQuad(i,M,T,Z,z,jm))}}_initializeVertices(i){for(let o=0;o<i.length;o+=2)this._vertexToIndex(i[o],i[o+1])}subdividePolygonInternal(i,o){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:h,holeIndices:f}=function(w){let T=[],C=[];for(let M of w)if(M.length!==0){M!==w[0]&&T.push(C.length/2);for(let z=0;z<M.length;z++)C.push(M[z].x),C.push(M[z].y)}return{flattened:C,holeIndices:T}}(i),y;this._initializeVertices(h);try{let w=function(C,M,z=2){let B=M&&M.length,U=B?M[0]*z:C.length,$=xz(C,0,U,z,!0),Z=[];if(!$||$.next===$.prev)return Z;let J,ie,ye;if(B&&($=function(he,pe,Pe,Oe){let Ne=[];for(let Xe=0,Ve=pe.length;Xe<Ve;Xe++){let He=xz(he,pe[Xe]*Oe,Xe<Ve-1?pe[Xe+1]*Oe:he.length,Oe,!1);He===He.next&&(He.steiner=!0),Ne.push(hpe(He))}Ne.sort(lpe);for(let Xe=0;Xe<Ne.length;Xe++)Pe=upe(Ne[Xe],Pe);return Pe}(C,M,$,z)),C.length>80*z){J=C[0],ie=C[1];let he=J,pe=ie;for(let Pe=z;Pe<U;Pe+=z){let Oe=C[Pe],Ne=C[Pe+1];Oe<J&&(J=Oe),Ne<ie&&(ie=Ne),Oe>he&&(he=Oe),Ne>pe&&(pe=Ne)}ye=Math.max(he-J,pe-ie),ye=ye!==0?32767/ye:0}return zm($,Z,z,J,ie,ye,0),Z}(h,f),T=this._convertIndices(h,w);y=this._subdivideTrianglesScanline(T)}catch(w){console.error(w)}let _=[];return o&&(_=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(y),{verticesFlattened:this._vertexBuffer,indicesTriangles:y,indicesLineList:_}}_convertIndices(i,o){let h=[];for(let f=0;f<o.length;f++)h.push(this._vertexToIndex(i[2*o[f]],i[2*o[f]+1]));return h}_pointArrayToIndices(i){let o=[];for(let h=0;h<i.length;h++){let f=i[h];o.push(this._vertexToIndex(f.x,f.y))}return o}}function Ez(s,i,o,h=!0){return new fpe(o,i).subdividePolygonInternal(s,h)}function Nc(s,i,o=!1){if(!s||s.length<1)return[];if(s.length<2)return[];let h=s[0],f=s[s.length-1],y=o&&(h.x!==f.x||h.y!==f.y);if(i<2)return y?[...s,s[0]]:[...s];let _=Math.floor(Jt/i),w=[];w.push(new x(s[0].x,s[0].y));let T=s.length,C=y?T:T-1;for(let M=0;M<C;M++){let z=s[M],B=M<T-1?s[M+1]:s[0],U=z.x,$=z.y,Z=B.x,J=B.y,ie=U!==Z,ye=$!==J;if(!ie&&!ye)continue;let he=Z-U,pe=J-$,Pe=Math.abs(he),Oe=Math.abs(pe),Ne=U,Xe=$;for(;;){let He=he>0?(Math.floor(Ne/_)+1)*_:(Math.ceil(Ne/_)-1)*_,ut=pe>0?(Math.floor(Xe/_)+1)*_:(Math.ceil(Xe/_)-1)*_,We=Math.abs(Ne-He),Ke=Math.abs(Xe-ut),De=Math.abs(Ne-Z),yt=Math.abs(Xe-J),bt=ie?We/Pe:Number.POSITIVE_INFINITY,ft=ye?Ke/Oe:Number.POSITIVE_INFINITY;if((De<=We||!ie)&&(yt<=Ke||!ye))break;if(bt<ft&&ie||!ye){Ne=He,Xe+=pe*bt;let ot=new x(Ne,Math.round(Xe));w[w.length-1].x===ot.x&&w[w.length-1].y===ot.y||w.push(ot)}else{Ne+=he*ft,Xe=ut;let ot=new x(Math.round(Ne),Xe);w[w.length-1].x===ot.x&&w[w.length-1].y===ot.y||w.push(ot)}}let Ve=new x(Z,J);w[w.length-1].x===Ve.x&&w[w.length-1].y===Ve.y||w.push(Ve)}return w}function ppe(s,i,o){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,f=s[2*i[0]];for(let T=1;T<i.length;T++){let C=s[2*i[T]];C<f&&(f=C,h=T)}let y=i.length,_=h,w=(_+1)%y;for(;;){let T=_-1>=0?_-1:y-1,C=(w+1)%y,M=s[2*i[T]],z=s[2*i[C]],B=s[2*i[_]],U=s[2*i[_]+1],$=s[2*i[w]+1],Z=!1;if(M<z)Z=!0;else if(M>z)Z=!1;else{let J=$-U,ie=-(s[2*i[w]]-B),ye=U<$?1:-1;((M-B)*J+(s[2*i[T]+1]-U)*ie)*ye>((z-B)*J+(s[2*i[C]+1]-U)*ie)*ye&&(Z=!0)}if(Z){let J=i[T],ie=i[_],ye=i[w];J!==ie&&J!==ye&&ie!==ye&&o.push(ye,ie,J),_--,_<0&&(_=y-1)}else{let J=i[C],ie=i[_],ye=i[w];J!==ie&&J!==ye&&ie!==ye&&o.push(ye,ie,J),w++,w>=y&&(w=0)}if(T===C)break}}function Iz(s,i,o,h,f,y,_,w,T){let C=f.length/2,M=_&&w&&T;if(C<Pt.MAX_VERTEX_ARRAY_LENGTH){let z=i.prepareSegment(C,o,h),B=z.vertexLength;for(let Z=0;Z<y.length;Z+=3)h.emplaceBack(B+y[Z],B+y[Z+1],B+y[Z+2]);let U,$;z.vertexLength+=C,z.primitiveLength+=y.length/3,M&&($=_.prepareSegment(C,o,w),U=$.vertexLength,$.vertexLength+=C);for(let Z=0;Z<f.length;Z+=2)s(f[Z],f[Z+1]);if(M)for(let Z=0;Z<T.length;Z++){let J=T[Z];for(let ie=1;ie<J.length;ie+=2)w.emplaceBack(U+J[ie-1],U+J[ie]);$.primitiveLength+=J.length/2}}else(function(z,B,U,$,Z,J){let ie=[];for(let Oe=0;Oe<$.length/2;Oe++)ie.push(-1);let ye={count:0},he=0,pe=z.getOrCreateLatestSegment(B,U),Pe=pe.vertexLength;for(let Oe=2;Oe<Z.length;Oe+=3){let Ne=Z[Oe-2],Xe=Z[Oe-1],Ve=Z[Oe],He=ie[Ne]<he,ut=ie[Xe]<he,We=ie[Ve]<he;pe.vertexLength+((He?1:0)+(ut?1:0)+(We?1:0))>Pt.MAX_VERTEX_ARRAY_LENGTH&&(pe=z.createNewSegment(B,U),he=ye.count,He=!0,ut=!0,We=!0,Pe=0);let Ke=Um(ie,$,J,ye,Ne,He,pe),De=Um(ie,$,J,ye,Xe,ut,pe),yt=Um(ie,$,J,ye,Ve,We,pe);U.emplaceBack(Pe+Ke-he,Pe+De-he,Pe+yt-he),pe.primitiveLength++}})(i,o,h,f,y,s),M&&function(z,B,U,$,Z,J){let ie=[];for(let Oe=0;Oe<$.length/2;Oe++)ie.push(-1);let ye={count:0},he=0,pe=z.getOrCreateLatestSegment(B,U),Pe=pe.vertexLength;for(let Oe=0;Oe<Z.length;Oe++){let Ne=Z[Oe];for(let Xe=1;Xe<Z[Oe].length;Xe+=2){let Ve=Ne[Xe-1],He=Ne[Xe],ut=ie[Ve]<he,We=ie[He]<he;pe.vertexLength+((ut?1:0)+(We?1:0))>Pt.MAX_VERTEX_ARRAY_LENGTH&&(pe=z.createNewSegment(B,U),he=ye.count,ut=!0,We=!0,Pe=0);let Ke=Um(ie,$,J,ye,Ve,ut,pe),De=Um(ie,$,J,ye,He,We,pe);U.emplaceBack(Pe+Ke-he,Pe+De-he),pe.primitiveLength++}}}(_,o,w,f,T,s),i.forceNewSegmentOnNextPrepare(),_==null||_.forceNewSegmentOnNextPrepare()}function Um(s,i,o,h,f,y,_){if(y){let w=h.count;return o(i[2*f],i[2*f+1]),s[f]=h.count,h.count++,_.vertexLength++,w}return s[f]}class PT{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Re,this.indexArray=new nr,this.indexArray2=new tr,this.programConfigurations=new Rn(i.layers,i.zoom),this.segments=new Pt,this.segments2=new Pt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){this.hasPattern=TT("fill",this.layers,o);let f=this.layers[0].layout.get("fill-sort-key"),y=!f.isConstant(),_=[];for(let{feature:w,id:T,index:C,sourceLayerIndex:M}of i){let z=this.layers[0]._featureFilter.needGeometry,B=xo(w,z);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom,{globalState:this.globalState}),B,h))continue;let U=y?f.evaluate(B,{},h,o.availableImages):void 0,$={id:T,properties:w.properties,type:w.type,sourceLayerIndex:M,index:C,geometry:z?B.geometry:ls(w),patterns:{},sortKey:U};_.push($)}y&&_.sort((w,T)=>w.sortKey-T.sortKey);for(let w of _){let{geometry:T,index:C,sourceLayerIndex:M}=w;if(this.hasPattern){let z=ET("fill",this.layers,w,{zoom:this.zoom,globalState:this.globalState},o);this.patternFeatures.push(z)}else this.addFeature(w,T,C,h,{},o.subdivisionGranularity);o.featureIndex.insert(i[C].feature,T,C,M,this.index)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}addFeatures(i,o,h){for(let f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ipe),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,o,h,f,y,_){for(let w of wc(o,500)){let T=Ez(w,f,_.fill.getGranularityForZoomLevel(f.z)),C=this.layoutVertexArray;Iz((M,z)=>{C.emplaceBack(M,z)},this.segments,this.layoutVertexArray,this.indexArray,T.verticesFlattened,T.indicesTriangles,this.segments2,this.indexArray2,T.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{imagePositions:y,canonical:f,globalState:this.globalState})}}let qz,Pz;tt("FillBucket",PT,{omit:["layers","patternFeatures"]});var mpe={get paint(){return Pz=Pz||new en({"fill-antialias":new lt(Se.paint_fill["fill-antialias"]),"fill-opacity":new mt(Se.paint_fill["fill-opacity"]),"fill-color":new mt(Se.paint_fill["fill-color"]),"fill-outline-color":new mt(Se.paint_fill["fill-outline-color"]),"fill-translate":new lt(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new lt(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new yd(Se.paint_fill["fill-pattern"])})},get layout(){return qz=qz||new en({"fill-sort-key":new mt(Se.layout_fill["fill-sort-key"])})}};class gpe extends Wn{constructor(i){super(i,mpe)}recalculate(i,o){super.recalculate(i,o);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new PT(i)}queryRadius(){return p0(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:o,transform:h,pixelsToTileUnits:f}){return oz(m0(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,f),o)}isTileClipped(){return!0}}let vpe=Dr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),ype=Dr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_pe}=vpe;class Ad{constructor(i,o,h,f,y){this.properties={},this.extent=h,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=f,this._values=y,i.readFields(xpe,this,o)}loadGeometry(){let i=this._pbf;i.pos=this._geometry;let o=i.readVarint()+i.pos,h=[],f,y=1,_=0,w=0,T=0;for(;i.pos<o;){if(_<=0){let C=i.readVarint();y=7&C,_=C>>3}if(_--,y===1||y===2)w+=i.readSVarint(),T+=i.readSVarint(),y===1&&(f&&h.push(f),f=[]),f&&f.push(new x(w,T));else{if(y!==7)throw new Error(`unknown command ${y}`);f&&f.push(f[0].clone())}}return f&&h.push(f),h}bbox(){let i=this._pbf;i.pos=this._geometry;let o=i.readVarint()+i.pos,h=1,f=0,y=0,_=0,w=1/0,T=-1/0,C=1/0,M=-1/0;for(;i.pos<o;){if(f<=0){let z=i.readVarint();h=7&z,f=z>>3}if(f--,h===1||h===2)y+=i.readSVarint(),_+=i.readSVarint(),y<w&&(w=y),y>T&&(T=y),_<C&&(C=_),_>M&&(M=_);else if(h!==7)throw new Error(`unknown command ${h}`)}return[w,C,T,M]}toGeoJSON(i,o,h){let f=this.extent*Math.pow(2,h),y=this.extent*i,_=this.extent*o,w=this.loadGeometry();function T(B){return[360*(B.x+y)/f-180,360/Math.PI*Math.atan(Math.exp((1-2*(B.y+_)/f)*Math.PI))-90]}function C(B){return B.map(T)}let M;if(this.type===1){let B=[];for(let $ of w)B.push($[0]);let U=C(B);M=B.length===1?{type:"Point",coordinates:U[0]}:{type:"MultiPoint",coordinates:U}}else if(this.type===2){let B=w.map(C);M=B.length===1?{type:"LineString",coordinates:B[0]}:{type:"MultiLineString",coordinates:B}}else{if(this.type!==3)throw new Error("unknown feature type");{let B=function($){let Z=$.length;if(Z<=1)return[$];let J=[],ie,ye;for(let he=0;he<Z;he++){let pe=bpe($[he]);pe!==0&&(ye===void 0&&(ye=pe<0),ye===pe<0?(ie&&J.push(ie),ie=[$[he]]):ie&&ie.push($[he]))}return ie&&J.push(ie),J}(w),U=[];for(let $ of B)U.push($.map(C));M=U.length===1?{type:"Polygon",coordinates:U[0]}:{type:"MultiPolygon",coordinates:U}}}let z={type:"Feature",geometry:M,properties:this.properties};return this.id!=null&&(z.id=this.id),z}}function xpe(s,i,o){s===1?i.id=o.readVarint():s===2?function(h,f){let y=h.readVarint()+h.pos;for(;h.pos<y;){let _=f._keys[h.readVarint()],w=f._values[h.readVarint()];f.properties[_]=w}}(o,i):s===3?i.type=o.readVarint():s===4&&(i._geometry=o.pos)}function bpe(s){let i=0;for(let o,h,f=0,y=s.length,_=y-1;f<y;_=f++)o=s[f],h=s[_],i+=(h.x-o.x)*(o.y+h.y);return i}Ad.types=["Unknown","Point","LineString","Polygon"];class Az{constructor(i,o){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(wpe,this,o),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];let o=this._pbf.readVarint()+this._pbf.pos;return new Ad(this._pbf,o,this.extent,this._keys,this._values)}}function wpe(s,i,o){s===15?i.version=o.readVarint():s===1?i.name=o.readString():s===5?i.extent=o.readVarint():s===2?i._features.push(o.pos):s===3?i._keys.push(o.readString()):s===4&&i._values.push(function(h){let f=null,y=h.readVarint()+h.pos;for(;h.pos<y;){let _=h.readVarint()>>3;f=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}if(f==null)throw new Error("unknown feature value");return f}(o))}class Cz{constructor(i,o){this.layers=i.readFields(Spe,{},o)}}function Spe(s,i,o){if(s===3){let h=new Az(o,o.readVarint()+o.pos);h.length&&(i[h.name]=h)}}let AT=Math.pow(2,13);function $m(s,i,o,h,f,y,_,w){s.emplaceBack(i,o,2*Math.floor(h*AT)+_,f*AT*2,y*AT*2,Math.round(w))}class CT{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ee,this.centroidVertexArray=new le,this.indexArray=new nr,this.programConfigurations=new Rn(i.layers,i.zoom),this.segments=new Pt,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){this.features=[],this.hasPattern=TT("fill-extrusion",this.layers,o);for(let{feature:f,id:y,index:_,sourceLayerIndex:w}of i){let T=this.layers[0]._featureFilter.needGeometry,C=xo(f,T);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom,{globalState:this.globalState}),C,h))continue;let M={id:y,sourceLayerIndex:w,index:_,geometry:T?C.geometry:ls(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(ET("fill-extrusion",this.layers,M,{zoom:this.zoom,globalState:this.globalState},o)):this.addFeature(M,M.geometry,_,h,{},o.subdivisionGranularity),o.featureIndex.insert(f,M.geometry,_,w,this.index,!0)}}addFeatures(i,o,h){for(let f of this.features){let{geometry:y}=f;this.addFeature(f,y,f.index,o,h,i.subdivisionGranularity)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,_pe),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,ype.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,o,h,f,y,_){for(let w of wc(o,500)){let T={x:0,y:0,sampleCount:0},C=this.layoutVertexArray.length;this.processPolygon(T,f,i,w,_);let M=this.layoutVertexArray.length-C,z=Math.floor(T.x/T.sampleCount),B=Math.floor(T.y/T.sampleCount);for(let U=0;U<M;U++)this.centroidVertexArray.emplaceBack(z,B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{imagePositions:y,canonical:f,globalState:this.globalState})}processPolygon(i,o,h,f,y){if(f.length<1||Mz(f[0]))return;for(let z of f)z.length!==0&&Tpe(i,z);let _={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},w=y.fill.getGranularityForZoomLevel(o.z),T=Ad.types[h.type]==="Polygon";for(let z of f){if(z.length===0||Mz(z))continue;let B=Nc(z,w,T);this._generateSideFaces(B,_)}if(!T)return;let C=Ez(f,o,w,!1),M=this.layoutVertexArray;Iz((z,B)=>{$m(M,z,B,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,C.verticesFlattened,C.indicesTriangles)}_generateSideFaces(i,o){let h=0;for(let f=1;f<i.length;f++){let y=i[f],_=i[f-1];if(Epe(y,_))continue;o.segment.vertexLength+4>Pt.MAX_VERTEX_ARRAY_LENGTH&&(o.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let w=y.sub(_)._perp()._unit(),T=_.dist(y);h+T>32768&&(h=0),$m(this.layoutVertexArray,y.x,y.y,w.x,w.y,0,0,h),$m(this.layoutVertexArray,y.x,y.y,w.x,w.y,0,1,h),h+=T,$m(this.layoutVertexArray,_.x,_.y,w.x,w.y,0,0,h),$m(this.layoutVertexArray,_.x,_.y,w.x,w.y,0,1,h);let C=o.segment.vertexLength;this.indexArray.emplaceBack(C,C+2,C+1),this.indexArray.emplaceBack(C+1,C+2,C+3),o.segment.vertexLength+=4,o.segment.primitiveLength+=2}}}function Tpe(s,i){for(let o=0;o<i.length;o++){let h=i[o];o===i.length-1&&i[0].x===h.x&&i[0].y===h.y||(s.x+=h.x,s.y+=h.y,s.sampleCount++)}}function Epe(s,i){return s.x===i.x&&(s.x<0||s.x>Jt)||s.y===i.y&&(s.y<0||s.y>Jt)}function Mz(s){return s.every(i=>i.x<0)||s.every(i=>i.x>Jt)||s.every(i=>i.y<0)||s.every(i=>i.y>Jt)}let Rz;tt("FillExtrusionBucket",CT,{omit:["layers","features"]});var Ipe={get paint(){return Rz=Rz||new en({"fill-extrusion-opacity":new lt(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mt(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new lt(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new lt(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new yd(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mt(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mt(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new lt(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class qpe extends Wn{constructor(i){super(i,Ipe)}createBucket(i){return new CT(i)}queryRadius(){return p0(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:o,featureState:h,geometry:f,transform:y,pixelsToTileUnits:_,pixelPosMatrix:w}){let T=m0(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-y.bearingInRadians,_),C=this.paint.get("fill-extrusion-height").evaluate(o,h),M=this.paint.get("fill-extrusion-base").evaluate(o,h),z=function(U,$){let Z=[];for(let J of U){let ie=[J.x,J.y,0,1];ka(ie,ie,$),Z.push(new x(ie[0]/ie[3],ie[1]/ie[3]))}return Z}(T,w),B=function(U,$,Z,J){let ie=[],ye=[],he=J[8]*$,pe=J[9]*$,Pe=J[10]*$,Oe=J[11]*$,Ne=J[8]*Z,Xe=J[9]*Z,Ve=J[10]*Z,He=J[11]*Z;for(let ut of U){let We=[],Ke=[];for(let De of ut){let yt=De.x,bt=De.y,ft=J[0]*yt+J[4]*bt+J[12],ot=J[1]*yt+J[5]*bt+J[13],Gt=J[2]*yt+J[6]*bt+J[14],qr=J[3]*yt+J[7]*bt+J[15],hi=Gt+Pe,Ui=qr+Oe,Ia=ft+Ne,kn=ot+Xe,Ai=Gt+Ve,_r=qr+He,yi=new x((ft+he)/Ui,(ot+pe)/Ui);yi.z=hi/Ui,We.push(yi);let Ci=new x(Ia/_r,kn/_r);Ci.z=Ai/_r,Ke.push(Ci)}ie.push(We),ye.push(Ke)}return[ie,ye]}(f,M,C,w);return function(U,$,Z){let J=1/0;oz(Z,$)&&(J=Oz(Z,$[0]));for(let ie=0;ie<$.length;ie++){let ye=$[ie],he=U[ie];for(let pe=0;pe<ye.length-1;pe++){let Pe=ye[pe],Oe=[Pe,ye[pe+1],he[pe+1],he[pe],Pe];az(Z,Oe)&&(J=Math.min(J,Oz(Z,Oe)))}}return J!==1/0&&J}(B[0],B[1],z)}}function Vm(s,i){return s.x*i.x+s.y*i.y}function Oz(s,i){if(s.length===1){let o=0,h=i[o++],f;for(;!f||h.equals(f);)if(f=i[o++],!f)return 1/0;for(;o<i.length;o++){let y=i[o],_=s[0],w=f.sub(h),T=y.sub(h),C=_.sub(h),M=Vm(w,w),z=Vm(w,T),B=Vm(T,T),U=Vm(C,w),$=Vm(C,T),Z=M*B-z*z,J=(B*U-z*$)/Z,ie=(M*$-z*U)/Z,ye=h.z*(1-J-ie)+f.z*J+y.z*ie;if(isFinite(ye))return ye}return 1/0}{let o=1/0;for(let h of i)o=Math.min(o,h.z);return o}}let Ppe=Dr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Ape}=Ppe,Cpe=Dr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Mpe}=Cpe,Rpe=Math.cos(Math.PI/180*37.5),kz=Math.pow(2,14)/.5;class MT{constructor(i){this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new Ie,this.layoutVertexArray2=new Me,this.indexArray=new nr,this.programConfigurations=new Rn(i.layers,i.zoom),this.segments=new Pt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){this.hasPattern=TT("line",this.layers,o);let f=this.layers[0].layout.get("line-sort-key"),y=!f.isConstant(),_=[];for(let{feature:w,id:T,index:C,sourceLayerIndex:M}of i){let z=this.layers[0]._featureFilter.needGeometry,B=xo(w,z);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom,{globalState:this.globalState}),B,h))continue;let U=y?f.evaluate(B,{},h):void 0,$={id:T,properties:w.properties,type:w.type,sourceLayerIndex:M,index:C,geometry:z?B.geometry:ls(w),patterns:{},sortKey:U};_.push($)}y&&_.sort((w,T)=>w.sortKey-T.sortKey);for(let w of _){let{geometry:T,index:C,sourceLayerIndex:M}=w;if(this.hasPattern){let z=ET("line",this.layers,w,{zoom:this.zoom,globalState:this.globalState},o);this.patternFeatures.push(z)}else this.addFeature(w,T,C,h,{},o.subdivisionGranularity);o.featureIndex.insert(i[C].feature,T,C,M,this.index)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,{imagePositions:h,globalState:this.globalState})}addFeatures(i,o,h){for(let f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,o,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,Mpe)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Ape),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,o,h,f,y,_){let w=this.layers[0].layout,T=w.get("line-join").evaluate(i,{}),C=w.get("line-cap"),M=w.get("line-miter-limit"),z=w.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(let B of o)this.addLine(B,i,T,C,M,z,f,_);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{imagePositions:y,canonical:f,globalState:this.globalState})}addLine(i,o,h,f,y,_,w,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=Nc(i,w?T.line.getGranularityForZoomLevel(w.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let he=0;he<i.length-1;he++)this.totalDistance+=i[he].dist(i[he+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let C=Ad.types[o.type]==="Polygon",M=i.length;for(;M>=2&&i[M-1].equals(i[M-2]);)M--;let z=0;for(;z<M-1&&i[z].equals(i[z+1]);)z++;if(M<(C?3:2))return;h==="bevel"&&(y=1.05);let B=this.overscaling<=16?122880/(512*this.overscaling):0,U=this.segments.prepareSegment(10*M,this.layoutVertexArray,this.indexArray),$,Z,J,ie,ye;this.e1=this.e2=-1,C&&($=i[M-2],ye=i[z].sub($)._unit()._perp());for(let he=z;he<M;he++){if(J=he===M-1?C?i[z+1]:void 0:i[he+1],J&&i[he].equals(J))continue;ye&&(ie=ye),$&&(Z=$),$=i[he],ye=J?J.sub($)._unit()._perp():ie,ie=ie||ye;let pe=ie.add(ye);pe.x===0&&pe.y===0||pe._unit();let Pe=ie.x*ye.x+ie.y*ye.y,Oe=pe.x*ye.x+pe.y*ye.y,Ne=Oe!==0?1/Oe:1/0,Xe=2*Math.sqrt(2-2*Oe),Ve=Oe<Rpe&&Z&&J,He=ie.x*ye.y-ie.y*ye.x>0;if(Ve&&he>z){let Ke=$.dist(Z);if(Ke>2*B){let De=$.sub($.sub(Z)._mult(B/Ke)._round());this.updateDistance(Z,De),this.addCurrentVertex(De,ie,0,0,U),Z=De}}let ut=Z&&J,We=ut?h:C?"butt":f;if(ut&&We==="round"&&(Ne<_?We="miter":Ne<=2&&(We="fakeround")),We==="miter"&&Ne>y&&(We="bevel"),We==="bevel"&&(Ne>2&&(We="flipbevel"),Ne<y&&(We="miter")),Z&&this.updateDistance(Z,$),We==="miter")pe._mult(Ne),this.addCurrentVertex($,pe,0,0,U);else if(We==="flipbevel"){if(Ne>100)pe=ye.mult(-1);else{let Ke=Ne*ie.add(ye).mag()/ie.sub(ye).mag();pe._perp()._mult(Ke*(He?-1:1))}this.addCurrentVertex($,pe,0,0,U),this.addCurrentVertex($,pe.mult(-1),0,0,U)}else if(We==="bevel"||We==="fakeround"){let Ke=-Math.sqrt(Ne*Ne-1),De=He?Ke:0,yt=He?0:Ke;if(Z&&this.addCurrentVertex($,ie,De,yt,U),We==="fakeround"){let bt=Math.round(180*Xe/Math.PI/20);for(let ft=1;ft<bt;ft++){let ot=ft/bt;if(ot!==.5){let qr=ot-.5;ot+=ot*qr*(ot-1)*((1.0904+Pe*(Pe*(3.55645-1.43519*Pe)-3.2452))*qr*qr+(.848013+Pe*(.215638*Pe-1.06021)))}let Gt=ye.sub(ie)._mult(ot)._add(ie)._unit()._mult(He?-1:1);this.addHalfVertex($,Gt.x,Gt.y,!1,He,0,U)}}J&&this.addCurrentVertex($,ye,-De,-yt,U)}else if(We==="butt")this.addCurrentVertex($,pe,0,0,U);else if(We==="square"){let Ke=Z?1:-1;this.addCurrentVertex($,pe,Ke,Ke,U)}else We==="round"&&(Z&&(this.addCurrentVertex($,ie,0,0,U),this.addCurrentVertex($,ie,1,1,U,!0)),J&&(this.addCurrentVertex($,ye,-1,-1,U,!0),this.addCurrentVertex($,ye,0,0,U)));if(Ve&&he<M-1){let Ke=$.dist(J);if(Ke>2*B){let De=$.add(J.sub($)._mult(B/Ke)._round());this.updateDistance($,De),this.addCurrentVertex(De,ye,0,0,U),$=De}}}}addCurrentVertex(i,o,h,f,y,_=!1){let w=o.y*f-o.x,T=-o.y-o.x*f;this.addHalfVertex(i,o.x+o.y*h,o.y-o.x*h,_,!1,h,y),this.addHalfVertex(i,w,T,_,!0,-f,y),this.distance>kz/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,o,h,f,y,_))}addHalfVertex({x:i,y:o},h,f,y,_,w,T){let C=.5*(this.lineClips?this.scaledDistance*(kz-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(y?1:0),(o<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*f)+128,1+(w===0?0:w<0?-1:1)|(63&C)<<2,C>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let M=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,M,this.e2),T.primitiveLength++),_?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,o){this.distance+=i.dist(o),this.updateScaledDistance()}}let Dz,Lz;tt("LineBucket",MT,{omit:["layers","patternFeatures"]});var zz={get paint(){return Lz=Lz||new en({"line-opacity":new mt(Se.paint_line["line-opacity"]),"line-color":new mt(Se.paint_line["line-color"]),"line-translate":new lt(Se.paint_line["line-translate"]),"line-translate-anchor":new lt(Se.paint_line["line-translate-anchor"]),"line-width":new mt(Se.paint_line["line-width"]),"line-gap-width":new mt(Se.paint_line["line-gap-width"]),"line-offset":new mt(Se.paint_line["line-offset"]),"line-blur":new mt(Se.paint_line["line-blur"]),"line-dasharray":new is(Se.paint_line["line-dasharray"]),"line-pattern":new yd(Se.paint_line["line-pattern"]),"line-gradient":new _d(Se.paint_line["line-gradient"])})},get layout(){return Dz=Dz||new en({"line-cap":new lt(Se.layout_line["line-cap"]),"line-join":new mt(Se.layout_line["line-join"]),"line-miter-limit":new lt(Se.layout_line["line-miter-limit"]),"line-round-limit":new lt(Se.layout_line["line-round-limit"]),"line-sort-key":new mt(Se.layout_line["line-sort-key"])})}};class Ope extends mt{possiblyEvaluate(i,o){return o=new ur(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(i,o)}evaluate(i,o,h,f){return o=Vn({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(i,o,h,f)}}let _0;class kpe extends Wn{constructor(i){super(i,zz),this.gradientVersion=0,_0||(_0=new Ope(zz.paint.properties["line-width"].specification),_0.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){let o=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof kr,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,o){super.recalculate(i,o),this.paint._values["line-floorwidth"]=_0.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new MT(i)}queryRadius(i){let o=i,h=Fz(Dm("line-width",this,o),Dm("line-gap-width",this,o)),f=Dm("line-offset",this,o);return h/2+Math.abs(f)+p0(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:o,featureState:h,geometry:f,transform:y,pixelsToTileUnits:_}){let w=m0(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-y.bearingInRadians,_),T=_/2*Fz(this.paint.get("line-width").evaluate(o,h),this.paint.get("line-gap-width").evaluate(o,h)),C=this.paint.get("line-offset").evaluate(o,h);return C&&(f=function(M,z){let B=[];for(let U=0;U<M.length;U++){let $=M[U],Z=[];for(let J=0;J<$.length;J++){let ie=$[J-1],ye=$[J],he=$[J+1],pe=J===0?new x(0,0):ye.sub(ie)._unit()._perp(),Pe=J===$.length-1?new x(0,0):he.sub(ye)._unit()._perp(),Oe=pe._add(Pe)._unit(),Ne=Oe.x*Pe.x+Oe.y*Pe.y;Ne!==0&&Oe._mult(1/Ne),Z.push(Oe._mult(z)._add(ye))}B.push(Z)}return B}(f,C*_)),function(M,z,B){for(let U=0;U<z.length;U++){let $=z[U];if(M.length>=3){for(let Z=0;Z<$.length;Z++)if(Ed(M,$[Z]))return!0}if(Gfe(M,$,B))return!0}return!1}(w,f,T)}isTileClipped(){return!0}}function Fz(s,i){return i>0?i+2*s:s}let Dpe=Dr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Lpe=Dr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Dr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let zpe=Dr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Dr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let Nz=Dr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Fpe=Dr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Npe(s,i,o){return s.sections.forEach(h=>{h.text=function(f,y,_){let w=y.layout.get("text-transform").evaluate(_,{});return w==="uppercase"?f=f.toLocaleUpperCase():w==="lowercase"&&(f=f.toLocaleLowerCase()),ba.applyArabicShaping&&(f=ba.applyArabicShaping(f)),f}(h.text,i,o)}),s}Dr([{name:"triangle",components:3,type:"Uint16"}]),Dr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Dr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Dr([{type:"Float32",name:"offsetX"}]),Dr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Dr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Gm={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var vi=24;let RT=4294967296,Bz=1/RT,jz=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");class OT{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,o,h=this.length){for(;this.pos<h;){let f=this.readVarint(),y=f>>3,_=this.pos;this.type=7&f,i(y,o,this),this.pos===_&&this.skip(f)}return o}readMessage(i,o){return this.readFields(i,o,this.readVarint()+this.pos)}readFixed32(){let i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){let i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){let i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*RT;return this.pos+=8,i}readSFixed64(){let i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*RT;return this.pos+=8,i}readFloat(){let i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){let i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){let o=this.buf,h,f;return f=o[this.pos++],h=127&f,f<128?h:(f=o[this.pos++],h|=(127&f)<<7,f<128?h:(f=o[this.pos++],h|=(127&f)<<14,f<128?h:(f=o[this.pos++],h|=(127&f)<<21,f<128?h:(f=o[this.pos],h|=(15&f)<<28,function(y,_,w){let T=w.buf,C,M;if(M=T[w.pos++],C=(112&M)>>4,M<128||(M=T[w.pos++],C|=(127&M)<<3,M<128)||(M=T[w.pos++],C|=(127&M)<<10,M<128)||(M=T[w.pos++],C|=(127&M)<<17,M<128)||(M=T[w.pos++],C|=(127&M)<<24,M<128)||(M=T[w.pos++],C|=(1&M)<<31,M<128))return Cd(y,C,_);throw new Error("Expected varint not more than 10 bytes")}(h,i,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){let i=this.readVarint();return i%2==1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){let i=this.readVarint()+this.pos,o=this.pos;return this.pos=i,i-o>=12&&jz?jz.decode(this.buf.subarray(o,i)):function(h,f,y){let _="",w=f;for(;w<y;){let T=h[w],C,M,z,B=null,U=T>239?4:T>223?3:T>191?2:1;if(w+U>y)break;U===1?T<128&&(B=T):U===2?(C=h[w+1],(192&C)==128&&(B=(31&T)<<6|63&C,B<=127&&(B=null))):U===3?(C=h[w+1],M=h[w+2],(192&C)==128&&(192&M)==128&&(B=(15&T)<<12|(63&C)<<6|63&M,(B<=2047||B>=55296&&B<=57343)&&(B=null))):U===4&&(C=h[w+1],M=h[w+2],z=h[w+3],(192&C)==128&&(192&M)==128&&(192&z)==128&&(B=(15&T)<<18|(63&C)<<12|(63&M)<<6|63&z,(B<=65535||B>=1114112)&&(B=null))),B===null?(B=65533,U=1):B>65535&&(B-=65536,_+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),_+=String.fromCharCode(B),w+=U}return _}(this.buf,o,i)}readBytes(){let i=this.readVarint()+this.pos,o=this.buf.subarray(this.pos,i);return this.pos=i,o}readPackedVarint(i=[],o){let h=this.readPackedEnd();for(;this.pos<h;)i.push(this.readVarint(o));return i}readPackedSVarint(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFloat());return i}readPackedDouble(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){let o=this.readPackedEnd();for(;this.pos<o;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(i){let o=7&i;if(o===0)for(;this.buf[this.pos++]>127;);else if(o===2)this.pos=this.readVarint()+this.pos;else if(o===5)this.pos+=4;else{if(o!==1)throw new Error(`Unimplemented type: ${o}`);this.pos+=8}}writeTag(i,o){this.writeVarint(i<<3|o)}realloc(i){let o=this.length||16;for(;o<this.pos+i;)o*=2;if(o!==this.length){let h=new Uint8Array(o);h.set(this.buf),this.buf=h,this.dataView=new DataView(h.buffer),this.length=o}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*Bz),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*Bz),!0),this.pos+=8}writeVarint(i){(i=+i||0)>268435455||i<0?function(o,h){let f,y;if(o>=0?(f=o%4294967296|0,y=o/4294967296|0):(f=~(-o%4294967296),y=~(-o/4294967296),4294967295^f?f=f+1|0:(f=0,y=y+1|0)),o>=18446744073709552e3||o<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");h.realloc(10),function(_,w,T){T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,_>>>=7,T.buf[T.pos++]=127&_|128,T.buf[T.pos]=127&(_>>>=7)}(f,0,h),function(_,w){let T=(7&_)<<4;w.buf[w.pos++]|=T|((_>>>=3)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_|((_>>>=7)?128:0),_&&(w.buf[w.pos++]=127&_)))))}(y,h)}(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))}writeSVarint(i){this.writeVarint(i<0?2*-i-1:2*i)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(4*i.length),this.pos++;let o=this.pos;this.pos=function(f,y,_){for(let w,T,C=0;C<y.length;C++){if(w=y.charCodeAt(C),w>55295&&w<57344){if(!T){w>56319||C+1===y.length?(f[_++]=239,f[_++]=191,f[_++]=189):T=w;continue}if(w<56320){f[_++]=239,f[_++]=191,f[_++]=189,T=w;continue}w=T-55296<<10|w-56320|65536,T=null}else T&&(f[_++]=239,f[_++]=191,f[_++]=189,T=null);w<128?f[_++]=w:(w<2048?f[_++]=w>>6|192:(w<65536?f[_++]=w>>12|224:(f[_++]=w>>18|240,f[_++]=w>>12&63|128),f[_++]=w>>6&63|128),f[_++]=63&w|128)}return _}(this.buf,i,this.pos);let h=this.pos-o;h>=128&&Uz(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){let o=i.length;this.writeVarint(o),this.realloc(o);for(let h=0;h<o;h++)this.buf[this.pos++]=i[h]}writeRawMessage(i,o){this.pos++;let h=this.pos;i(o,this);let f=this.pos-h;f>=128&&Uz(h,f,this),this.pos=h-1,this.writeVarint(f),this.pos+=f}writeMessage(i,o,h){this.writeTag(i,2),this.writeRawMessage(o,h)}writePackedVarint(i,o){o.length&&this.writeMessage(i,Bpe,o)}writePackedSVarint(i,o){o.length&&this.writeMessage(i,jpe,o)}writePackedBoolean(i,o){o.length&&this.writeMessage(i,Vpe,o)}writePackedFloat(i,o){o.length&&this.writeMessage(i,Upe,o)}writePackedDouble(i,o){o.length&&this.writeMessage(i,$pe,o)}writePackedFixed32(i,o){o.length&&this.writeMessage(i,Gpe,o)}writePackedSFixed32(i,o){o.length&&this.writeMessage(i,Zpe,o)}writePackedFixed64(i,o){o.length&&this.writeMessage(i,Wpe,o)}writePackedSFixed64(i,o){o.length&&this.writeMessage(i,Hpe,o)}writeBytesField(i,o){this.writeTag(i,2),this.writeBytes(o)}writeFixed32Field(i,o){this.writeTag(i,5),this.writeFixed32(o)}writeSFixed32Field(i,o){this.writeTag(i,5),this.writeSFixed32(o)}writeFixed64Field(i,o){this.writeTag(i,1),this.writeFixed64(o)}writeSFixed64Field(i,o){this.writeTag(i,1),this.writeSFixed64(o)}writeVarintField(i,o){this.writeTag(i,0),this.writeVarint(o)}writeSVarintField(i,o){this.writeTag(i,0),this.writeSVarint(o)}writeStringField(i,o){this.writeTag(i,2),this.writeString(o)}writeFloatField(i,o){this.writeTag(i,5),this.writeFloat(o)}writeDoubleField(i,o){this.writeTag(i,1),this.writeDouble(o)}writeBooleanField(i,o){this.writeVarintField(i,+o)}}function Cd(s,i,o){return o?4294967296*i+(s>>>0):4294967296*(i>>>0)+(s>>>0)}function Uz(s,i,o){let h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));o.realloc(h);for(let f=o.pos-1;f>=s;f--)o.buf[f+h]=o.buf[f]}function Bpe(s,i){for(let o=0;o<s.length;o++)i.writeVarint(s[o])}function jpe(s,i){for(let o=0;o<s.length;o++)i.writeSVarint(s[o])}function Upe(s,i){for(let o=0;o<s.length;o++)i.writeFloat(s[o])}function $pe(s,i){for(let o=0;o<s.length;o++)i.writeDouble(s[o])}function Vpe(s,i){for(let o=0;o<s.length;o++)i.writeBoolean(s[o])}function Gpe(s,i){for(let o=0;o<s.length;o++)i.writeFixed32(s[o])}function Zpe(s,i){for(let o=0;o<s.length;o++)i.writeSFixed32(s[o])}function Wpe(s,i){for(let o=0;o<s.length;o++)i.writeFixed64(s[o])}function Hpe(s,i){for(let o=0;o<s.length;o++)i.writeSFixed64(s[o])}function Kpe(s,i,o){s===1&&o.readMessage(Xpe,i)}function Xpe(s,i,o){if(s===3){let{id:h,bitmap:f,width:y,height:_,left:w,top:T,advance:C}=o.readMessage(Ype,{});i.push({id:h,bitmap:new Lm({width:y+6,height:_+6},f),metrics:{width:y,height:_,left:w,top:T,advance:C}})}}function Ype(s,i,o){s===1?i.id=o.readVarint():s===2?i.bitmap=o.readBytes():s===3?i.width=o.readVarint():s===4?i.height=o.readVarint():s===5?i.left=o.readSVarint():s===6?i.top=o.readSVarint():s===7&&(i.advance=o.readVarint())}function $z(s){let i=0,o=0;for(let _ of s)i+=_.w*_.h,o=Math.max(o,_.w);s.sort((_,w)=>w.h-_.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),o),h:1/0}],f=0,y=0;for(let _ of s)for(let w=h.length-1;w>=0;w--){let T=h[w];if(!(_.w>T.w||_.h>T.h)){if(_.x=T.x,_.y=T.y,y=Math.max(y,_.y+_.h),f=Math.max(f,_.x+_.w),_.w===T.w&&_.h===T.h){let C=h.pop();C&&w<h.length&&(h[w]=C)}else _.h===T.h?(T.x+=_.w,T.w-=_.w):_.w===T.w?(T.y+=_.h,T.h-=_.h):(h.push({x:T.x+_.w,y:T.y,w:T.w-_.w,h:_.h}),T.y+=_.h,T.h-=_.h);break}}return{w:f,h:y,fill:i/(f*y)||0}}class kT{constructor(i,{pixelRatio:o,version:h,stretchX:f,stretchY:y,content:_,textFitWidth:w,textFitHeight:T}){this.paddedRect=i,this.pixelRatio=o,this.stretchX=f,this.stretchY=y,this.content=_,this.version=h,this.textFitWidth=w,this.textFitHeight=T}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Vz{constructor(i,o){let h={},f={};this.haveRenderCallbacks=[];let y=[];this.addImages(i,h,y),this.addImages(o,f,y);let{w:_,h:w}=$z(y),T=new On({width:_||1,height:w||1});for(let C in i){let M=i[C],z=h[C].paddedRect;On.copy(M.data,T,{x:0,y:0},{x:z.x+1,y:z.y+1},M.data)}for(let C in o){let M=o[C],z=f[C].paddedRect,B=z.x+1,U=z.y+1,$=M.data.width,Z=M.data.height;On.copy(M.data,T,{x:0,y:0},{x:B,y:U},M.data),On.copy(M.data,T,{x:0,y:Z-1},{x:B,y:U-1},{width:$,height:1}),On.copy(M.data,T,{x:0,y:0},{x:B,y:U+Z},{width:$,height:1}),On.copy(M.data,T,{x:$-1,y:0},{x:B-1,y:U},{width:1,height:Z}),On.copy(M.data,T,{x:0,y:0},{x:B+$,y:U},{width:1,height:Z})}this.image=T,this.iconPositions=h,this.patternPositions=f}addImages(i,o,h){for(let f in i){let y=i[f],_={x:0,y:0,w:y.data.width+2,h:y.data.height+2};h.push(_),o[f]=new kT(_,y),y.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(i,o){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),o),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),o)}patchUpdatedImage(i,o,h){if(!i||!o||i.version===o.version)return;i.version=o.version;let[f,y]=i.tl;h.update(o.data,void 0,{x:f,y})}}var nu;tt("ImagePosition",kT),tt("ImageAtlas",Vz),c.ao=void 0,(nu=c.ao||(c.ao={}))[nu.none=0]="none",nu[nu.horizontal=1]="horizontal",nu[nu.vertical=2]="vertical",nu[nu.horizontalOnly=3]="horizontalOnly";class Zm{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,o,h){let f=new Zm;return f.scale=i||1,f.fontStack=o,f.verticalAlign=h||"bottom",f}static forImage(i,o){let h=new Zm;return h.imageName=i,h.verticalAlign=o||"bottom",h}}class Md{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,o){let h=new Md;for(let f=0;f<i.sections.length;f++){let y=i.sections[f];y.image?h.addImageSection(y):h.addTextSection(y,o)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let o="";for(let h=0;h<i.length;h++){let f=i.charCodeAt(h+1)||null,y=i.charCodeAt(h-1)||null;o+=f&&a0(f)&&!Gm[i[h+1]]||y&&a0(y)&&!Gm[i[h-1]]||!Gm[i[h]]?i[h]:Gm[i[h]]}return o}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&b0[this.text.charCodeAt(h)];h++)i++;let o=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&b0[this.text.charCodeAt(h)];h--)o--;this.text=this.text.substring(i,o),this.sectionIndex=this.sectionIndex.slice(i,o)}substring(i,o){let h=new Md;return h.text=this.text.substring(i,o),h.sectionIndex=this.sectionIndex.slice(i,o),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,o)=>Math.max(i,this.sections[o].scale),0)}getMaxImageSize(i){let o=0,h=0;for(let f=0;f<this.length();f++){let y=this.getSection(f);if(y.imageName){let _=i[y.imageName];if(!_)continue;let w=_.displaySize;o=Math.max(o,w[0]),h=Math.max(h,w[1])}}return{maxImageWidth:o,maxImageHeight:h}}addTextSection(i,o){this.text+=i.text,this.sections.push(Zm.forText(i.scale,i.fontStack||o,i.verticalAlign));let h=this.sections.length-1;for(let f=0;f<i.text.length;++f)this.sectionIndex.push(h)}addImageSection(i){let o=i.image?i.image.name:"";if(o.length===0)return void Br("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Zm.forImage(o,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Br("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function x0(s,i,o,h,f,y,_,w,T,C,M,z,B,U,$){let Z=Md.fromFeature(s,f),J;z===c.ao.vertical&&Z.verticalizePunctuation();let{processBidirectionalText:ie,processStyledBidirectionalText:ye}=ba;if(ie&&Z.sections.length===1){J=[];let Pe=ie(Z.toString(),DT(Z,C,y,i,h,U));for(let Oe of Pe){let Ne=new Md;Ne.text=Oe,Ne.sections=Z.sections;for(let Xe=0;Xe<Oe.length;Xe++)Ne.sectionIndex.push(0);J.push(Ne)}}else if(ye){J=[];let Pe=ye(Z.text,Z.sectionIndex,DT(Z,C,y,i,h,U));for(let Oe of Pe){let Ne=new Md;Ne.text=Oe[0],Ne.sectionIndex=Oe[1],Ne.sections=Z.sections,J.push(Ne)}}else J=function(Pe,Oe){let Ne=[],Xe=Pe.text,Ve=0;for(let He of Oe)Ne.push(Pe.substring(Ve,He)),Ve=He;return Ve<Xe.length&&Ne.push(Pe.substring(Ve,Xe.length)),Ne}(Z,DT(Z,C,y,i,h,U));let he=[],pe={positionedLines:he,text:Z.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:z,iconsInText:!1,verticalizable:!1};return function(Pe,Oe,Ne,Xe,Ve,He,ut,We,Ke,De,yt,bt){let ft=0,ot=0,Gt=0,qr=0,hi=We==="right"?1:We==="left"?0:.5,Ui=vi/bt,Ia=0;for(let _r of Ve){_r.trim();let yi=_r.getMaxScale(),Ci={positionedGlyphs:[],lineOffset:0};Pe.positionedLines[Ia]=Ci;let Mi=Ci.positionedGlyphs,xn=0;if(!_r.length()){ot+=He,++Ia;continue}let qa=tme(Xe,_r,Ui);for(let Dn=0;Dn<_r.length();Dn++){let di=_r.getSection(Dn),xi=_r.getSectionIndex(Dn),bi=_r.getCharCode(Dn),Xr=rme(Ke,yt,bi),mr;if(di.imageName){if(Pe.iconsInText=!0,di.scale=di.scale*Ui,mr=nme(di,Xr,yi,qa,Xe),!mr)continue;xn=Math.max(xn,mr.imageOffset)}else if(mr=ime(di,bi,Xr,qa,Oe,Ne),!mr)continue;let{rect:bo,metrics:Dd,baselineOffset:wo}=mr;Mi.push({glyph:bi,imageName:di.imageName,x:ft,y:ot+wo+-17,vertical:Xr,scale:di.scale,fontStack:di.fontStack,sectionIndex:xi,metrics:Dd,rect:bo}),Xr?(Pe.verticalizable=!0,ft+=(di.imageName?Dd.advance:vi)*di.scale+De):ft+=Dd.advance*di.scale+De}Mi.length!==0&&(Gt=Math.max(ft-De,Gt),ame(Mi,0,Mi.length-1,hi)),ft=0,Ci.lineOffset=Math.max(xn,(yi-1)*vi);let _i=He*yi+xn;ot+=_i,qr=Math.max(_i,qr),++Ia}let{horizontalAlign:kn,verticalAlign:Ai}=LT(ut);(function(_r,yi,Ci,Mi,xn,qa,_i,Dn,di){let xi=(yi-Ci)*xn,bi=0;bi=qa!==_i?-Dn*Mi- -17:-Mi*di*_i+.5*_i;for(let Xr of _r)for(let mr of Xr.positionedGlyphs)mr.x+=xi,mr.y+=bi})(Pe.positionedLines,hi,kn,Ai,Gt,qr,He,ot,Ve.length),Pe.top+=-Ai*ot,Pe.bottom=Pe.top+ot,Pe.left+=-kn*Gt,Pe.right=Pe.left+Gt}(pe,i,o,h,J,_,w,T,z,C,B,$),!function(Pe){for(let Oe of Pe)if(Oe.positionedGlyphs.length!==0)return!1;return!0}(he)&&pe}let b0={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jpe={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Qpe={40:!0};function Gz(s,i,o,h,f,y){if(i.imageName){let _=h[i.imageName];return _?_.displaySize[0]*i.scale*vi/y+f:0}{let _=o[i.fontStack],w=_&&_[s];return w?w.metrics.advance*i.scale+f:0}}function Zz(s,i,o,h){let f=Math.pow(s-i,2);return h?s<i?f/2:2*f:f+Math.abs(o)*o}function eme(s,i,o){let h=0;return s===10&&(h-=1e4),o&&(h+=150),s!==40&&s!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function Wz(s,i,o,h,f,y){let _=null,w=Zz(i,o,f,y);for(let T of h){let C=Zz(i-T.x,o,f,y)+T.badness;C<=w&&(_=T,w=C)}return{index:s,x:i,priorBreak:_,badness:w}}function Hz(s){return s?Hz(s.priorBreak).concat(s.index):[]}function DT(s,i,o,h,f,y){if(!s)return[];let _=[],w=function(z,B,U,$,Z,J){let ie=0;for(let ye=0;ye<z.length();ye++){let he=z.getSection(ye);ie+=Gz(z.getCharCode(ye),he,$,Z,B,J)}return ie/Math.max(1,Math.ceil(ie/U))}(s,i,o,h,f,y),T=s.text.indexOf("\u200B")>=0,C=0;for(let z=0;z<s.length();z++){let B=s.getSection(z),U=s.getCharCode(z);if(b0[U]||(C+=Gz(U,B,h,f,i,y)),z<s.length()-1){let $=!((M=U)<11904)&&(!!Vt["CJK Compatibility Forms"](M)||!!Vt["CJK Compatibility"](M)||!!Vt["CJK Strokes"](M)||!!Vt["CJK Symbols and Punctuation"](M)||!!Vt["Enclosed CJK Letters and Months"](M)||!!Vt["Halfwidth and Fullwidth Forms"](M)||!!Vt["Ideographic Description Characters"](M)||!!Vt["Vertical Forms"](M)||Tm.test(String.fromCodePoint(M)));(Jpe[U]||$||B.imageName||z!==s.length()-2&&Qpe[s.getCharCode(z+1)])&&_.push(Wz(z+1,C,w,_,eme(U,s.getCharCode(z+1),$&&T),!1))}}var M;return Hz(Wz(s.length(),C,w,_,0,!0))}function LT(s){let i=.5,o=.5;switch(s){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0}return{horizontalAlign:i,verticalAlign:o}}function tme(s,i,o){let h=i.getMaxScale()*vi,{maxImageWidth:f,maxImageHeight:y}=i.getMaxImageSize(s),_=Math.max(h,y*o);return{verticalLineContentWidth:Math.max(h,f*o),horizontalLineContentHeight:_}}function Kz(s){switch(s){case"top":return 0;case"center":return .5;default:return 1}}function rme(s,i,o){return!(s===c.ao.horizontal||!i&&!Em(o)||i&&(b0[o]||(h=o,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function ime(s,i,o,h,f,y){let _=y[s.fontStack],w=function(C,M,z,B){if(C&&C.rect)return C;let U=M[z.fontStack],$=U&&U[B];return $?{rect:null,metrics:$.metrics}:null}(_&&_[i],f,s,i);if(w===null)return null;let T;if(o)T=h.verticalLineContentWidth-s.scale*vi;else{let C=Kz(s.verticalAlign);T=(h.horizontalLineContentHeight-s.scale*vi)*C}return{rect:w.rect,metrics:w.metrics,baselineOffset:T}}function nme(s,i,o,h,f){let y=f[s.imageName];if(!y)return null;let _=y.paddedRect,w=y.displaySize,T={width:w[0],height:w[1],left:1,top:-3,advance:i?w[1]:w[0]},C;if(i)C=h.verticalLineContentWidth-w[1]*s.scale;else{let M=Kz(s.verticalAlign);C=(h.horizontalLineContentHeight-w[1]*s.scale)*M}return{rect:_,metrics:T,baselineOffset:C,imageOffset:(i?w[0]:w[1])*s.scale-vi*o}}function ame(s,i,o,h){if(h===0)return;let f=s[o],y=(s[o].x+f.metrics.advance*f.scale)*h;for(let _=i;_<=o;_++)s[_].x-=y}function ome(s,i,o){let{horizontalAlign:h,verticalAlign:f}=LT(o),y=i[0]-s.displaySize[0]*h,_=i[1]-s.displaySize[1]*f;return{image:s,top:_,bottom:_+s.displaySize[1],left:y,right:y+s.displaySize[0]}}function Xz(s){var i,o;let h=s.left,f=s.top,y=s.right-h,_=s.bottom-f,w=(i=s.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",T=(o=s.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",C=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(T==="proportional"){if(w==="stretchOnly"&&y/_<C||w==="proportional"){let M=Math.ceil(_*C);h*=M/y,y=M}}else if(w==="proportional"&&T==="stretchOnly"&&C!==0&&y/_>C){let M=Math.ceil(y/C);f*=M/_,_=M}return{x1:h,y1:f,x2:h+y,y2:f+_}}function Yz(s,i,o,h,f,y){let _=s.image,w;if(_.content){let J=_.content,ie=_.pixelRatio||1;w=[J[0]/ie,J[1]/ie,_.displaySize[0]-J[2]/ie,_.displaySize[1]-J[3]/ie]}let T=i.left*y,C=i.right*y,M,z,B,U;o==="width"||o==="both"?(U=f[0]+T-h[3],z=f[0]+C+h[1]):(U=f[0]+(T+C-_.displaySize[0])/2,z=U+_.displaySize[0]);let $=i.top*y,Z=i.bottom*y;return o==="height"||o==="both"?(M=f[1]+$-h[0],B=f[1]+Z+h[2]):(M=f[1]+($+Z-_.displaySize[1])/2,B=M+_.displaySize[1]),{image:_,top:M,right:z,bottom:B,left:U,collisionPadding:w}}let rl=128,au=32640;function Jz(s,i){let{expression:o}=i;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new ur(s+1))};if(o.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:f}=o,y=0;for(;y<h.length&&h[y]<=s;)y++;y=Math.max(0,y-1);let _=y;for(;_<h.length&&h[_]<s+1;)_++;_=Math.min(h.length-1,_);let w=h[y],T=h[_];return o.kind==="composite"?{kind:"composite",minZoom:w,maxZoom:T,interpolationType:f}:{kind:"camera",minZoom:w,maxZoom:T,minSize:o.evaluate(new ur(w)),maxSize:o.evaluate(new ur(T)),interpolationType:f}}}function zT(s,i,o){let h="never",f=s.get(i);return f?h=f:s.get(o)&&(h="always"),h}let sme=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function w0(s,i,o,h,f,y,_,w,T,C,M,z,B){let U=w?Math.min(au,Math.round(w[0])):0,$=w?Math.min(au,Math.round(w[1])):0;s.emplaceBack(i,o,Math.round(32*h),Math.round(32*f),y,_,(U<<1)+(T?1:0),$,16*C,16*M,256*z,256*B)}function FT(s,i,o){s.emplaceBack(i.x,i.y,o),s.emplaceBack(i.x,i.y,o),s.emplaceBack(i.x,i.y,o),s.emplaceBack(i.x,i.y,o)}function lme(s){for(let i of s.sections)if(l0(i.text))return!0;return!1}class NT{constructor(i){this.layoutVertexArray=new Ze,this.indexArray=new nr,this.programConfigurations=i,this.segments=new Pt,this.dynamicLayoutVertexArray=new ze,this.opacityVertexArray=new at,this.hasVisibleVertices=!1,this.placedSymbolArray=new V}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,o,h,f){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Dpe.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Lpe.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,sme,!0),this.opacityVertexBuffer.itemSize=1),(h||f)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tt("SymbolBuffers",NT);class BT{constructor(i,o,h){this.layoutVertexArray=new i,this.layoutAttributes=o,this.indexArray=new h,this.segments=new Pt,this.collisionVertexArray=new Xt}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,zpe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}tt("CollisionBuffers",BT);class Rd{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.globalState=i.globalState,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(_=>_.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Jz(this.zoom,o["text-size"]),this.iconSizeData=Jz(this.zoom,o["icon-size"]);let h=this.layers[0].layout,f=h.get("symbol-sort-key"),y=h.get("symbol-z-order");this.canOverlap=zT(h,"text-overlap","text-allow-overlap")!=="never"||zT(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=y!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(y==="viewport-y"||y==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(_=>c.ao[_])),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=i.sourceID}createArrays(){this.text=new NT(new Rn(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new NT(new Rn(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new re,this.lineVertexArray=new ne,this.symbolInstances=new Q,this.textAnchorOffsets=new ae}calculateGlyphDependencies(i,o,h,f,y){for(let _=0;_<i.length;_++)if(o[i.charCodeAt(_)]=!0,(h||f)&&y){let w=Gm[i.charAt(_)];w&&(o[w.charCodeAt(0)]=!0)}}populate(i,o,h){let f=this.layers[0],y=f.layout,_=y.get("text-font"),w=y.get("text-field"),T=y.get("icon-image"),C=(w.value.kind!=="constant"||w.value.value instanceof Yi&&!w.value.value.isEmpty()||w.value.value.toString().length>0)&&(_.value.kind!=="constant"||_.value.value.length>0),M=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,z=y.get("symbol-sort-key");if(this.features=[],!C&&!M)return;let B=o.iconDependencies,U=o.glyphDependencies,$=o.availableImages,Z=new ur(this.zoom,{globalState:this.globalState});for(let{feature:J,id:ie,index:ye,sourceLayerIndex:he}of i){let pe=f._featureFilter.needGeometry,Pe=xo(J,pe);if(!f._featureFilter.filter(Z,Pe,h))continue;let Oe,Ne;if(pe||(Pe.geometry=ls(J)),C){let Ve=f.getValueAndResolveTokens("text-field",Pe,h,$),He=Yi.factory(Ve),ut=this.hasRTLText=this.hasRTLText||lme(He);(!ut||ba.getRTLTextPluginStatus()==="unavailable"||ut&&ba.isParsed())&&(Oe=Npe(He,f,Pe))}if(M){let Ve=f.getValueAndResolveTokens("icon-image",Pe,h,$);Ne=Ve instanceof Cn?Ve:Cn.fromString(Ve)}if(!Oe&&!Ne)continue;let Xe=this.sortFeaturesByKey?z.evaluate(Pe,{},h):void 0;if(this.features.push({id:ie,text:Oe,icon:Ne,index:ye,sourceLayerIndex:he,geometry:Pe.geometry,properties:J.properties,type:Ad.types[J.type],sortKey:Xe}),Ne&&(B[Ne.name]=!0),Oe){let Ve=_.evaluate(Pe,{},h).join(","),He=y.get("text-rotation-alignment")!=="viewport"&&y.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ao.vertical)>=0;for(let ut of Oe.sections)if(ut.image)B[ut.image.name]=!0;else{let We=md(Oe.toString()),Ke=ut.fontStack||Ve,De=U[Ke]=U[Ke]||{};this.calculateGlyphDependencies(ut.text,De,He,this.allowVerticalPlacement,We)}}}y.get("symbol-placement")==="line"&&(this.features=function(J){let ie={},ye={},he=[],pe=0;function Pe(Ve){he.push(J[Ve]),pe++}function Oe(Ve,He,ut){let We=ye[Ve];return delete ye[Ve],ye[He]=We,he[We].geometry[0].pop(),he[We].geometry[0]=he[We].geometry[0].concat(ut[0]),We}function Ne(Ve,He,ut){let We=ie[He];return delete ie[He],ie[Ve]=We,he[We].geometry[0].shift(),he[We].geometry[0]=ut[0].concat(he[We].geometry[0]),We}function Xe(Ve,He,ut){let We=ut?He[0][He[0].length-1]:He[0][0];return`${Ve}:${We.x}:${We.y}`}for(let Ve=0;Ve<J.length;Ve++){let He=J[Ve],ut=He.geometry,We=He.text?He.text.toString():null;if(!We){Pe(Ve);continue}let Ke=Xe(We,ut),De=Xe(We,ut,!0);if(Ke in ye&&De in ie&&ye[Ke]!==ie[De]){let yt=Ne(Ke,De,ut),bt=Oe(Ke,De,he[yt].geometry);delete ie[Ke],delete ye[De],ye[Xe(We,he[bt].geometry,!0)]=bt,he[yt].geometry=null}else Ke in ye?Oe(Ke,De,ut):De in ie?Ne(Ke,De,ut):(Pe(Ve),ie[Ke]=pe-1,ye[De]=pe-1)}return he.filter(Ve=>Ve.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ie)=>J.sortKey-ie.sortKey)}update(i,o,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,o,this.layers,{imagePositions:h,globalState:this.globalState}),this.icon.programConfigurations.updatePaintArrays(i,o,this.layers,{imagePositions:h,globalState:this.globalState}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,o){let h=this.lineVertexArray.length;if(i.segment!==void 0){let f=i.dist(o[i.segment+1]),y=i.dist(o[i.segment]),_={};for(let w=i.segment+1;w<o.length;w++)_[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:f},w<o.length-1&&(f+=o[w+1].dist(o[w]));for(let w=i.segment||0;w>=0;w--)_[w]={x:o[w].x,y:o[w].y,tileUnitDistanceFromAnchor:y},w>0&&(y+=o[w-1].dist(o[w]));for(let w=0;w<o.length;w++){let T=_[w];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,o,h,f,y,_,w,T,C,M,z,B){let U=i.indexArray,$=i.layoutVertexArray,Z=i.segments.prepareSegment(4*o.length,$,U,this.canOverlap?_.sortKey:void 0),J=this.glyphOffsetArray.length,ie=Z.vertexLength,ye=this.allowVerticalPlacement&&w===c.ao.vertical?Math.PI/2:0,he=_.text&&_.text.sections;for(let pe=0;pe<o.length;pe++){let{tl:Pe,tr:Oe,bl:Ne,br:Xe,tex:Ve,pixelOffsetTL:He,pixelOffsetBR:ut,minFontScaleX:We,minFontScaleY:Ke,glyphOffset:De,isSDF:yt,sectionIndex:bt}=o[pe],ft=Z.vertexLength,ot=De[1];w0($,T.x,T.y,Pe.x,ot+Pe.y,Ve.x,Ve.y,h,yt,He.x,He.y,We,Ke),w0($,T.x,T.y,Oe.x,ot+Oe.y,Ve.x+Ve.w,Ve.y,h,yt,ut.x,He.y,We,Ke),w0($,T.x,T.y,Ne.x,ot+Ne.y,Ve.x,Ve.y+Ve.h,h,yt,He.x,ut.y,We,Ke),w0($,T.x,T.y,Xe.x,ot+Xe.y,Ve.x+Ve.w,Ve.y+Ve.h,h,yt,ut.x,ut.y,We,Ke),FT(i.dynamicLayoutVertexArray,T,ye),U.emplaceBack(ft,ft+2,ft+1),U.emplaceBack(ft+1,ft+2,ft+3),Z.vertexLength+=4,Z.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(De[0]),pe!==o.length-1&&bt===o[pe+1].sectionIndex||i.programConfigurations.populatePaintArrays($.length,_,_.index,{imagePositions:{},canonical:B,formattedSection:he&&he[bt],globalState:this.globalState})}i.placedSymbolArray.emplaceBack(T.x,T.y,J,this.glyphOffsetArray.length-J,ie,C,M,T.segment,h?h[0]:0,h?h[1]:0,f[0],f[1],w,0,!1,0,z)}_addCollisionDebugVertex(i,o,h,f,y,_){return o.emplaceBack(0,0),i.emplaceBack(h.x,h.y,f,y,Math.round(_.x),Math.round(_.y))}addCollisionDebugVertices(i,o,h,f,y,_,w){let T=y.segments.prepareSegment(4,y.layoutVertexArray,y.indexArray),C=T.vertexLength,M=y.layoutVertexArray,z=y.collisionVertexArray,B=w.anchorX,U=w.anchorY;this._addCollisionDebugVertex(M,z,_,B,U,new x(i,o)),this._addCollisionDebugVertex(M,z,_,B,U,new x(h,o)),this._addCollisionDebugVertex(M,z,_,B,U,new x(h,f)),this._addCollisionDebugVertex(M,z,_,B,U,new x(i,f)),T.vertexLength+=4;let $=y.indexArray;$.emplaceBack(C,C+1),$.emplaceBack(C+1,C+2),$.emplaceBack(C+2,C+3),$.emplaceBack(C+3,C),T.primitiveLength+=4}addDebugCollisionBoxes(i,o,h,f){for(let y=i;y<o;y++){let _=this.collisionBoxArray.get(y);this.addCollisionDebugVertices(_.x1,_.y1,_.x2,_.y2,f?this.textCollisionBox:this.iconCollisionBox,_.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new BT(Ct,Nz.members,tr),this.iconCollisionBox=new BT(Ct,Nz.members,tr);for(let i=0;i<this.symbolInstances.length;i++){let o=this.symbolInstances.get(i);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(i,o,h,f,y,_,w,T,C){let M={};for(let z=o;z<h;z++){let B=i.get(z);M.textBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},M.textFeatureIndex=B.featureIndex;break}for(let z=f;z<y;z++){let B=i.get(z);M.verticalTextBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},M.verticalTextFeatureIndex=B.featureIndex;break}for(let z=_;z<w;z++){let B=i.get(z);M.iconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},M.iconFeatureIndex=B.featureIndex;break}for(let z=T;z<C;z++){let B=i.get(z);M.verticalIconBox={x1:B.x1,y1:B.y1,x2:B.x2,y2:B.y2,anchorPointX:B.anchorPointX,anchorPointY:B.anchorPointY},M.verticalIconFeatureIndex=B.featureIndex;break}return M}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){let h=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,o){let h=i.placedSymbolArray.get(o),f=h.vertexStartIndex+4*h.numGlyphs;for(let y=h.vertexStartIndex;y<f;y+=4)i.indexArray.emplaceBack(y,y+2,y+1),i.indexArray.emplaceBack(y+1,y+2,y+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let o=Math.sin(i),h=Math.cos(i),f=[],y=[],_=[];for(let w=0;w<this.symbolInstances.length;++w){_.push(w);let T=this.symbolInstances.get(w);f.push(0|Math.round(o*T.anchorX+h*T.anchorY)),y.push(T.featureIndex)}return _.sort((w,T)=>f[w]-f[T]||y[T]-y[w]),_}addToSortKeyRanges(i,o){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===o?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let o of this.symbolInstanceIndexes){let h=this.symbolInstances.get(o);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((f,y,_)=>{f>=0&&_.indexOf(f)===y&&this.addIndicesForPlacedSymbol(this.text,f)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Qz,eF;tt("SymbolBucket",Rd,{omit:["layers","collisionBoxArray","features","compareText"]}),Rd.MAX_GLYPHS=65535,Rd.addDynamicAttributes=FT;var jT={get paint(){return eF=eF||new en({"icon-opacity":new mt(Se.paint_symbol["icon-opacity"]),"icon-color":new mt(Se.paint_symbol["icon-color"]),"icon-halo-color":new mt(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new mt(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mt(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new lt(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new lt(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new mt(Se.paint_symbol["text-opacity"]),"text-color":new mt(Se.paint_symbol["text-color"],{runtimeType:qi,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new mt(Se.paint_symbol["text-halo-color"]),"text-halo-width":new mt(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new mt(Se.paint_symbol["text-halo-blur"]),"text-translate":new lt(Se.paint_symbol["text-translate"]),"text-translate-anchor":new lt(Se.paint_symbol["text-translate-anchor"])})},get layout(){return Qz=Qz||new en({"symbol-placement":new lt(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new lt(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new lt(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mt(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new lt(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new lt(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new lt(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new lt(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new lt(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new lt(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new mt(Se.layout_symbol["icon-size"]),"icon-text-fit":new lt(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new lt(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new mt(Se.layout_symbol["icon-image"]),"icon-rotate":new mt(Se.layout_symbol["icon-rotate"]),"icon-padding":new mt(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new lt(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new mt(Se.layout_symbol["icon-offset"]),"icon-anchor":new mt(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new lt(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new lt(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new lt(Se.layout_symbol["text-rotation-alignment"]),"text-field":new mt(Se.layout_symbol["text-field"]),"text-font":new mt(Se.layout_symbol["text-font"]),"text-size":new mt(Se.layout_symbol["text-size"]),"text-max-width":new mt(Se.layout_symbol["text-max-width"]),"text-line-height":new lt(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new mt(Se.layout_symbol["text-letter-spacing"]),"text-justify":new mt(Se.layout_symbol["text-justify"]),"text-radial-offset":new mt(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new lt(Se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new mt(Se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new mt(Se.layout_symbol["text-anchor"]),"text-max-angle":new lt(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new lt(Se.layout_symbol["text-writing-mode"]),"text-rotate":new mt(Se.layout_symbol["text-rotate"]),"text-padding":new lt(Se.layout_symbol["text-padding"]),"text-keep-upright":new lt(Se.layout_symbol["text-keep-upright"]),"text-transform":new mt(Se.layout_symbol["text-transform"]),"text-offset":new mt(Se.layout_symbol["text-offset"]),"text-allow-overlap":new lt(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new lt(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new lt(Se.layout_symbol["text-ignore-placement"]),"text-optional":new lt(Se.layout_symbol["text-optional"])})}};class tF{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:Ol,this.defaultValue=i}evaluate(i){if(i.formattedSection){let o=this.defaultValue.property.overrides;if(o&&o.hasOverride(i.formattedSection))return o.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tt("FormatSectionOverride",tF,{omit:["defaultValue"]});class S0 extends Wn{constructor(i){super(i,jT)}recalculate(i,o){if(super.recalculate(i,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let f=[];for(let y of h)f.indexOf(y)<0&&f.push(y);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,o,h,f){let y=this.layout.get(i).evaluate(o,{},h,f),_=this._unevaluatedLayout._values[i];return _.isDataDriven()||sd(_.value)||!y?y:function(w,T){return T.replace(/{([^{}]+)}/g,(C,M)=>w&&M in w?String(w[M]):"")}(o.properties,y)}createBucket(i){return new Rd(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let i of jT.paint.overridableProperties){if(!S0.hasPaintOverride(this.layout,i))continue;let o=this.paint.get(i),h=new tF(o),f=new dm(h,o.property.specification),y=null;y=o.value.kind==="constant"||o.value.kind==="source"?new qc("source",f):new fm("composite",f,o.value.zoomStops),this.paint._values[i]=new Va(o.property,y,o.parameters)}}_handleOverridablePaintPropertyUpdate(i,o,h){return!(!this.layout||o.isDataDriven()||h.isDataDriven())&&S0.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,o){let h=i.get("text-field"),f=jT.paint.properties[o],y=!1,_=w=>{for(let T of w)if(f.overrides&&f.overrides.hasOverride(T))return void(y=!0)};if(h.value.kind==="constant"&&h.value.value instanceof Yi)_(h.value.value.sections);else if(h.value.kind==="source"||h.value.kind==="composite"){let w=C=>{y||(C instanceof go&&vt(C.value)===Yo?_(C.value.sections):C instanceof Us?_(C.sections):C.eachChild(w))},T=h.value;T._styleExpression&&w(T._styleExpression.expression)}return y}}let rF;var ume={get paint(){return rF=rF||new en({"background-color":new lt(Se.paint_background["background-color"]),"background-pattern":new is(Se.paint_background["background-pattern"]),"background-opacity":new lt(Se.paint_background["background-opacity"])})}};class cme extends Wn{constructor(i){super(i,ume)}}let iF;var hme={get paint(){return iF=iF||new en({"raster-opacity":new lt(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new lt(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new lt(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new lt(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new lt(Se.paint_raster["raster-saturation"]),"raster-contrast":new lt(Se.paint_raster["raster-contrast"]),"raster-resampling":new lt(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new lt(Se.paint_raster["raster-fade-duration"])})}};class dme extends Wn{constructor(i){super(i,hme)}}class fme extends Wn{constructor(i){super(i,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class pme{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let mme={once:!0},UT=6371008.8;class ou{constructor(i,o){if(isNaN(i)||isNaN(o))throw new Error(`Invalid LngLat object: (${i}, ${o})`);if(this.lng=+i,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ou(po(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){let o=Math.PI/180,h=this.lat*o,f=i.lat*o,y=Math.sin(h)*Math.sin(f)+Math.cos(h)*Math.cos(f)*Math.cos((i.lng-this.lng)*o);return UT*Math.acos(Math.min(y,1))}static convert(i){if(i instanceof ou)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new ou(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new ou(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let nF=2*Math.PI*UT;function aF(s){return nF*Math.cos(s*Math.PI/180)}function oF(s){return(180+s)/360}function sF(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function lF(s,i){return s/aF(i)}function $T(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}function uF(s,i){return s*aF($T(i))}class Wm{constructor(i,o,h=0){this.x=+i,this.y=+o,this.z=+h}static fromLngLat(i,o=0){let h=ou.convert(i);return new Wm(oF(h.lng),sF(h.lat),lF(o,h.lat))}toLngLat(){return new ou(360*this.x-180,$T(this.y))}toAltitude(){return uF(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/nF*(i=$T(this.y),1/Math.cos(i*Math.PI/180));var i}}function cF(s,i,o){var h=2*Math.PI*6378137/256/Math.pow(2,o);return[s*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class VT{constructor(i,o,h){if(!function(f,y,_){return!(f<0||f>25||_<0||_>=Math.pow(2,f)||y<0||y>=Math.pow(2,f))}(i,o,h))throw new Error(`x=${o}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=o,this.y=h,this.key=Od(0,i,i,o,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,o,h){let f=(_=this.y,w=this.z,T=cF(256*(y=this.x),256*(_=Math.pow(2,w)-_-1),w),C=cF(256*(y+1),256*(_+1),w),T[0]+","+T[1]+","+C[0]+","+C[1]);var y,_,w,T,C;let M=function(z,B,U){let $,Z="";for(let J=z;J>0;J--)$=1<<J-1,Z+=(B&$?1:0)+(U&$?2:0);return Z}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,f)}isChildOf(i){let o=this.z-i.z;return o>0&&i.x===this.x>>o&&i.y===this.y>>o}getTilePoint(i){let o=Math.pow(2,this.z);return new x((i.x*o-this.x)*Jt,(i.y*o-this.y)*Jt)}toString(){return`${this.z}/${this.x}/${this.y}`}}class hF{constructor(i,o){this.wrap=i,this.canonical=o,this.key=Od(i,o.z,o.z,o.x,o.y)}}class Ea{constructor(i,o,h,f,y){if(this.terrainRttPosMatrix32f=null,i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=o,this.canonical=new VT(h,+f,+y),this.key=Od(o,i,h,f,y)}clone(){return new Ea(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let o=this.canonical.z-i;return i>this.canonical.z?new Ea(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Ea(i,this.wrap,i,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(i,o){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-i;return i>this.canonical.z?Od(this.wrap*+o,i,this.canonical.z,this.canonical.x,this.canonical.y):Od(this.wrap*+o,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;let o=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>o&&i.canonical.y===this.canonical.y>>o}children(i){if(this.overscaledZ>=i)return[new Ea(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let o=this.canonical.z+1,h=2*this.canonical.x,f=2*this.canonical.y;return[new Ea(o,this.wrap,o,h,f),new Ea(o,this.wrap,o,h+1,f),new Ea(o,this.wrap,o,h,f+1),new Ea(o,this.wrap,o,h+1,f+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Ea(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Ea(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new hF(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Wm(i.x-this.wrap,i.y))}}function Od(s,i,o,h,f){(s*=2)<0&&(s=-1*s-1);let y=1<<o;return(y*y*s+y*f+h).toString(36)+o.toString(36)+i.toString(36)}function Hm(s,i){return i?s.properties[i]:s.id}tt("CanonicalTileID",VT),tt("OverscaledTileID",Ea,{omit:["terrainRttPosMatrix32f"]});class Bc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){let o=new Bc;return o.extend(i(new x(this.minX,this.minY))),o.extend(i(new x(this.maxX,this.minY))),o.extend(i(new x(this.minX,this.maxY))),o.extend(i(new x(this.maxX,this.maxY))),o}static fromPoints(i){let o=new Bc;for(let h of i)o.extend(h);return o}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class dF{constructor(i){this._stringToNumber={},this._numberToString=[];for(let o=0;o<i.length;o++){let h=i[o];this._stringToNumber[h]=o,this._numberToString[o]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class fF{constructor(i,o,h,f,y){this.type="Feature",this._vectorTileFeature=i,i._z=o,i._x=h,i._y=f,this.properties=i.properties,this.id=y}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){let i={geometry:this.geometry};for(let o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(i[o]=this[o]);return i}}class pF{constructor(i,o){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new kc(Jt,16,0),this.grid3D=new kc(Jt,16,0),this.featureIndexArray=new ge,this.promoteId=o}insert(i,o,h,f,y,_){let w=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,f,y);let T=_?this.grid3D:this.grid;for(let C=0;C<o.length;C++){let M=o[C],z=[1/0,1/0,-1/0,-1/0];for(let B=0;B<M.length;B++){let U=M[B];z[0]=Math.min(z[0],U.x),z[1]=Math.min(z[1],U.y),z[2]=Math.max(z[2],U.x),z[3]=Math.max(z[3],U.y)}z[0]<Jt&&z[1]<Jt&&z[2]>=0&&z[3]>=0&&T.insert(w,z[0],z[1],z[2],z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Cz(new OT(this.rawTileData)).layers,this.sourceLayerCoder=new dF(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,o,h,f){this.loadVTLayers();let y=i.params,_=Jt/i.tileSize/i.scale,w=Hs(y.filter),T=i.queryGeometry,C=i.queryPadding*_,M=Bc.fromPoints(T),z=this.grid.query(M.minX-C,M.minY-C,M.maxX+C,M.maxY+C),B=Bc.fromPoints(i.cameraQueryGeometry).expandBy(C),U=this.grid3D.query(B.minX,B.minY,B.maxX,B.maxY,(J,ie,ye,he)=>function(pe,Pe,Oe,Ne,Xe){for(let He of pe)if(Pe<=He.x&&Oe<=He.y&&Ne>=He.x&&Xe>=He.y)return!0;let Ve=[new x(Pe,Oe),new x(Pe,Xe),new x(Ne,Xe),new x(Ne,Oe)];if(pe.length>2){for(let He of Ve)if(Ed(pe,He))return!0}for(let He=0;He<pe.length-1;He++)if(Wfe(pe[He],pe[He+1],Ve))return!0;return!1}(i.cameraQueryGeometry,J-C,ie-C,ye+C,he+C));for(let J of U)z.push(J);z.sort(gme);let $={},Z;for(let J=0;J<z.length;J++){let ie=z[J];if(ie===Z)continue;Z=ie;let ye=this.featureIndexArray.get(ie),he=null;this.loadMatchingFeature($,ye.bucketIndex,ye.sourceLayerIndex,ye.featureIndex,w,y.layers,y.availableImages,o,h,f,(pe,Pe,Oe)=>(he||(he=ls(pe)),Pe.queryIntersectsFeature({queryGeometry:T,feature:pe,featureState:Oe,geometry:he,zoom:this.z,transform:i.transform,pixelsToTileUnits:_,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return $}loadMatchingFeature(i,o,h,f,y,_,w,T,C,M,z){let B=this.bucketLayerIDs[o];if(_&&!B.some(J=>_.has(J)))return;let U=this.sourceLayerCoder.decode(h),$=this.vtLayers[U].feature(f);if(y.needGeometry){let J=xo($,!0);if(!y.filter(new ur(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!y.filter(new ur(this.tileID.overscaledZ),$))return;let Z=this.getId($,U);for(let J=0;J<B.length;J++){let ie=B[J];if(_&&!_.has(ie))continue;let ye=T[ie];if(!ye)continue;let he={};Z&&M&&(he=M.getState(ye.sourceLayer||"_geojsonTileLayer",Z));let pe=Vn({},C[ie]);pe.paint=mF(pe.paint,ye.paint,$,he,w),pe.layout=mF(pe.layout,ye.layout,$,he,w);let Pe=!z||z($,ye,he);if(!Pe)continue;let Oe=new fF($,this.z,this.x,this.y,Z);Oe.layer=pe;let Ne=i[ie];Ne===void 0&&(Ne=i[ie]=[]),Ne.push({featureIndex:f,feature:Oe,intersectionZ:Pe})}}lookupSymbolFeatures(i,o,h,f,y,_,w,T){let C={};this.loadVTLayers();let M=Hs(y);for(let z of i)this.loadMatchingFeature(C,h,f,z,M,_,w,T,o);return C}hasLayer(i){for(let o of this.bucketLayerIDs)for(let h of o)if(i===h)return!0;return!1}getId(i,o){var h;let f=i.id;return this.promoteId&&(f=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof f=="boolean"&&(f=Number(f)),f===void 0&&!((h=i.properties)===null||h===void 0)&&h.cluster&&this.promoteId&&(f=Number(i.properties.cluster_id))),f}}function mF(s,i,o,h,f){return Al(s,(y,_)=>{let w=i instanceof vd?i.get(_):null;return w&&w.evaluate?w.evaluate(o,h,f):w})}function gme(s,i){return i-s}function gF(s,i,o,h,f){let y=[];for(let _=0;_<s.length;_++){let w=s[_],T;for(let C=0;C<w.length-1;C++){let M=w[C],z=w[C+1];M.x<i&&z.x<i||(M.x<i?M=new x(i,M.y+(i-M.x)/(z.x-M.x)*(z.y-M.y))._round():z.x<i&&(z=new x(i,M.y+(i-M.x)/(z.x-M.x)*(z.y-M.y))._round()),M.y<o&&z.y<o||(M.y<o?M=new x(M.x+(o-M.y)/(z.y-M.y)*(z.x-M.x),o)._round():z.y<o&&(z=new x(M.x+(o-M.y)/(z.y-M.y)*(z.x-M.x),o)._round()),M.x>=h&&z.x>=h||(M.x>=h?M=new x(h,M.y+(h-M.x)/(z.x-M.x)*(z.y-M.y))._round():z.x>=h&&(z=new x(h,M.y+(h-M.x)/(z.x-M.x)*(z.y-M.y))._round()),M.y>=f&&z.y>=f||(M.y>=f?M=new x(M.x+(f-M.y)/(z.y-M.y)*(z.x-M.x),f)._round():z.y>=f&&(z=new x(M.x+(f-M.y)/(z.y-M.y)*(z.x-M.x),f)._round()),T&&M.equals(T[T.length-1])||(T=[M],y.push(T)),T.push(z)))))}}return y}tt("FeatureIndex",pF,{omit:["rawTileData","sourceLayerCoder"]});class su extends x{constructor(i,o,h,f){super(i,o),this.angle=h,f!==void 0&&(this.segment=f)}clone(){return new su(this.x,this.y,this.angle,this.segment)}}function vF(s,i,o,h,f){if(i.segment===void 0||o===0)return!0;let y=i,_=i.segment+1,w=0;for(;w>-o/2;){if(_--,_<0)return!1;w-=s[_].dist(y),y=s[_]}w+=s[_].dist(s[_+1]),_++;let T=[],C=0;for(;w<o/2;){let M=s[_],z=s[_+1];if(!z)return!1;let B=s[_-1].angleTo(M)-M.angleTo(z);for(B=Math.abs((B+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:w,angleDelta:B}),C+=B;w-T[0].distance>h;)C-=T.shift().angleDelta;if(C>f)return!1;_++,w+=M.dist(z)}return!0}function yF(s){let i=0;for(let o=0;o<s.length-1;o++)i+=s[o].dist(s[o+1]);return i}function _F(s,i,o){return s?.6*i*o:0}function xF(s,i){return Math.max(s?s.right-s.left:0,i?i.right-i.left:0)}function vme(s,i,o,h,f,y){let _=_F(o,f,y),w=xF(o,h)*y,T=0,C=yF(s)/2;for(let M=0;M<s.length-1;M++){let z=s[M],B=s[M+1],U=z.dist(B);if(T+U>C){let $=(C-T)/U,Z=Ua.number(z.x,B.x,$),J=Ua.number(z.y,B.y,$),ie=new su(Z,J,B.angleTo(z),M);return ie._round(),!_||vF(s,ie,w,_,i)?ie:void 0}T+=U}}function yme(s,i,o,h,f,y,_,w,T){let C=_F(h,y,_),M=xF(h,f),z=M*_,B=s[0].x===0||s[0].x===T||s[0].y===0||s[0].y===T;return i-z<i/4&&(i=z+i/4),bF(s,B?i/2*w%i:(M/2+2*y)*_*w%i,i,C,o,z,B,!1,T)}function bF(s,i,o,h,f,y,_,w,T){let C=y/2,M=yF(s),z=0,B=i-o,U=[];for(let $=0;$<s.length-1;$++){let Z=s[$],J=s[$+1],ie=Z.dist(J),ye=J.angleTo(Z);for(;B+o<z+ie;){B+=o;let he=(B-z)/ie,pe=Ua.number(Z.x,J.x,he),Pe=Ua.number(Z.y,J.y,he);if(pe>=0&&pe<T&&Pe>=0&&Pe<T&&B-C>=0&&B+C<=M){let Oe=new su(pe,Pe,ye,$);Oe._round(),h&&!vF(s,Oe,y,h,f)||U.push(Oe)}}z+=ie}return w||U.length||_||(U=bF(s,z/2,o,h,f,y,_,!0,T)),U}function wF(s,i,o,h){let f=[],y=s.image,_=y.pixelRatio,w=y.paddedRect.w-2,T=y.paddedRect.h-2,C={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom},M=y.stretchX||[[0,w]],z=y.stretchY||[[0,T]],B=(De,yt)=>De+yt[1]-yt[0],U=M.reduce(B,0),$=z.reduce(B,0),Z=w-U,J=T-$,ie=0,ye=U,he=0,pe=$,Pe=0,Oe=Z,Ne=0,Xe=J;if(y.content&&h){let De=y.content,yt=De[2]-De[0],bt=De[3]-De[1];(y.textFitWidth||y.textFitHeight)&&(C=Xz(s)),ie=T0(M,0,De[0]),he=T0(z,0,De[1]),ye=T0(M,De[0],De[2]),pe=T0(z,De[1],De[3]),Pe=De[0]-ie,Ne=De[1]-he,Oe=yt-ye,Xe=bt-pe}let Ve=C.x1,He=C.y1,ut=C.x2-Ve,We=C.y2-He,Ke=(De,yt,bt,ft)=>{let ot=E0(De.stretch-ie,ye,ut,Ve),Gt=I0(De.fixed-Pe,Oe,De.stretch,U),qr=E0(yt.stretch-he,pe,We,He),hi=I0(yt.fixed-Ne,Xe,yt.stretch,$),Ui=E0(bt.stretch-ie,ye,ut,Ve),Ia=I0(bt.fixed-Pe,Oe,bt.stretch,U),kn=E0(ft.stretch-he,pe,We,He),Ai=I0(ft.fixed-Ne,Xe,ft.stretch,$),_r=new x(ot,qr),yi=new x(Ui,qr),Ci=new x(Ui,kn),Mi=new x(ot,kn),xn=new x(Gt/_,hi/_),qa=new x(Ia/_,Ai/_),_i=i*Math.PI/180;if(_i){let xi=Math.sin(_i),bi=Math.cos(_i),Xr=[bi,-xi,xi,bi];_r._matMult(Xr),yi._matMult(Xr),Mi._matMult(Xr),Ci._matMult(Xr)}let Dn=De.stretch+De.fixed,di=yt.stretch+yt.fixed;return{tl:_r,tr:yi,bl:Mi,br:Ci,tex:{x:y.paddedRect.x+1+Dn,y:y.paddedRect.y+1+di,w:bt.stretch+bt.fixed-Dn,h:ft.stretch+ft.fixed-di},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:xn,pixelOffsetBR:qa,minFontScaleX:Oe/_/ut,minFontScaleY:Xe/_/We,isSDF:o}};if(h&&(y.stretchX||y.stretchY)){let De=SF(M,Z,U),yt=SF(z,J,$);for(let bt=0;bt<De.length-1;bt++){let ft=De[bt],ot=De[bt+1];for(let Gt=0;Gt<yt.length-1;Gt++)f.push(Ke(ft,yt[Gt],ot,yt[Gt+1]))}}else f.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:w+1},{fixed:0,stretch:T+1}));return f}function T0(s,i,o){let h=0;for(let f of s)h+=Math.max(i,Math.min(o,f[1]))-Math.max(i,Math.min(o,f[0]));return h}function SF(s,i,o){let h=[{fixed:-1,stretch:0}];for(let[f,y]of s){let _=h[h.length-1];h.push({fixed:f-_.stretch,stretch:_.stretch}),h.push({fixed:f-_.stretch,stretch:_.stretch+(y-f)})}return h.push({fixed:i+1,stretch:o}),h}function E0(s,i,o,h){return s/i*o+h}function I0(s,i,o,h){return s-i*o/h}tt("Anchor",su);class q0{constructor(i,o,h,f,y,_,w,T,C,M){var z;if(this.boxStartIndex=i.length,C){let B=_.top,U=_.bottom,$=_.collisionPadding;$&&(B-=$[1],U+=$[3]);let Z=U-B;Z>0&&(Z=Math.max(10,Z),this.circleDiameter=Z)}else{let B=!((z=_.image)===null||z===void 0)&&z.content&&(_.image.textFitWidth||_.image.textFitHeight)?Xz(_):{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom};B.y1=B.y1*w-T[0],B.y2=B.y2*w+T[2],B.x1=B.x1*w-T[3],B.x2=B.x2*w+T[1];let U=_.collisionPadding;if(U&&(B.x1-=U[0]*w,B.y1-=U[1]*w,B.x2+=U[2]*w,B.y2+=U[3]*w),M){let $=new x(B.x1,B.y1),Z=new x(B.x2,B.y1),J=new x(B.x1,B.y2),ie=new x(B.x2,B.y2),ye=M*Math.PI/180;$._rotate(ye),Z._rotate(ye),J._rotate(ye),ie._rotate(ye),B.x1=Math.min($.x,Z.x,J.x,ie.x),B.x2=Math.max($.x,Z.x,J.x,ie.x),B.y1=Math.min($.y,Z.y,J.y,ie.y),B.y2=Math.max($.y,Z.y,J.y,ie.y)}i.emplaceBack(o.x,o.y,B.x1,B.y1,B.x2,B.y2,h,f,y)}this.boxEndIndex=i.length}}class _me{constructor(i=[],o=(h,f)=>h<f?-1:h>f?1:0){if(this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;let i=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),i}peek(){return this.data[0]}_up(i){let{data:o,compare:h}=this,f=o[i];for(;i>0;){let y=i-1>>1,_=o[y];if(h(f,_)>=0)break;o[i]=_,i=y}o[i]=f}_down(i){let{data:o,compare:h}=this,f=this.length>>1,y=o[i];for(;i<f;){let _=1+(i<<1),w=_+1;if(w<this.length&&h(o[w],o[_])<0&&(_=w),h(o[_],y)>=0)break;o[i]=o[_],i=_}o[i]=y}}function xme(s,i=1,o=!1){let h=Bc.fromPoints(s[0]),f=Math.min(h.width(),h.height()),y=f/2,_=new _me([],bme),{minX:w,minY:T,maxX:C,maxY:M}=h;if(f===0)return new x(w,T);for(let U=w;U<C;U+=f)for(let $=T;$<M;$+=f)_.push(new kd(U+y,$+y,y,s));let z=function(U){let $=0,Z=0,J=0,ie=U[0];for(let ye=0,he=ie.length,pe=he-1;ye<he;pe=ye++){let Pe=ie[ye],Oe=ie[pe],Ne=Pe.x*Oe.y-Oe.x*Pe.y;Z+=(Pe.x+Oe.x)*Ne,J+=(Pe.y+Oe.y)*Ne,$+=3*Ne}return new kd(Z/$,J/$,0,U)}(s),B=_.length;for(;_.length;){let U=_.pop();(U.d>z.d||!z.d)&&(z=U,o&&console.log("found best %d after %d probes",Math.round(1e4*U.d)/1e4,B)),U.max-z.d<=i||(y=U.h/2,_.push(new kd(U.p.x-y,U.p.y-y,y,s)),_.push(new kd(U.p.x+y,U.p.y-y,y,s)),_.push(new kd(U.p.x-y,U.p.y+y,y,s)),_.push(new kd(U.p.x+y,U.p.y+y,y,s)),B+=4)}return o&&(console.log(`num probes: ${B}`),console.log(`best distance: ${z.d}`)),z.p}function bme(s,i){return i.max-s.max}function kd(s,i,o,h){this.p=new x(s,i),this.h=o,this.d=function(f,y){let _=!1,w=1/0;for(let T=0;T<y.length;T++){let C=y[T];for(let M=0,z=C.length,B=z-1;M<z;B=M++){let U=C[M],$=C[B];U.y>f.y!=$.y>f.y&&f.x<($.x-U.x)*(f.y-U.y)/($.y-U.y)+U.x&&(_=!_),w=Math.min(w,sz(f,U,$))}}return(_?1:-1)*Math.sqrt(w)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var ji;c.aE=void 0,(ji=c.aE||(c.aE={}))[ji.center=1]="center",ji[ji.left=2]="left",ji[ji.right=3]="right",ji[ji.top=4]="top",ji[ji.bottom=5]="bottom",ji[ji["top-left"]=6]="top-left",ji[ji["top-right"]=7]="top-right",ji[ji["bottom-left"]=8]="bottom-left",ji[ji["bottom-right"]=9]="bottom-right";let GT=Number.POSITIVE_INFINITY;function TF(s,i){return i[1]!==GT?function(o,h,f){let y=0,_=0;switch(h=Math.abs(h),f=Math.abs(f),o){case"top-right":case"top-left":case"top":_=f-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-f}switch(o){case"top-right":case"bottom-right":case"right":y=-h;break;case"top-left":case"bottom-left":case"left":y=h}return[y,_]}(s,i[0],i[1]):function(o,h){let f=0,y=0;h<0&&(h=0);let _=h/Math.SQRT2;switch(o){case"top-right":case"top-left":y=_-7;break;case"bottom-right":case"bottom-left":y=7-_;break;case"bottom":y=7-h;break;case"top":y=h-7}switch(o){case"top-right":case"bottom-right":f=-_;break;case"top-left":case"bottom-left":f=_;break;case"left":f=h;break;case"right":f=-h}return[f,y]}(s,i[0])}function EF(s,i,o){var h;let f=s.layout,y=(h=f.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},o);if(y){let w=y.values,T=[];for(let C=0;C<w.length;C+=2){let M=T[C]=w[C],z=w[C+1].map(B=>B*vi);M.startsWith("top")?z[1]-=7:M.startsWith("bottom")&&(z[1]+=7),T[C+1]=z}return new Qi(T)}let _=f.get("text-variable-anchor");if(_){let w;w=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(i,{},o)*vi,GT]:f.get("text-offset").evaluate(i,{},o).map(C=>C*vi);let T=[];for(let C of _)T.push(C,TF(C,w));return new Qi(T)}return null}function ZT(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function wme(s,i,o,h,f,y,_,w,T,C,M,z){let B=y.textMaxSize.evaluate(i,{});B===void 0&&(B=_);let U=s.layers[0].layout,$=U.get("icon-offset").evaluate(i,{},M),Z=qF(o.horizontal),J=_/24,ie=s.tilePixelRatio*J,ye=s.tilePixelRatio*B/24,he=s.tilePixelRatio*w,pe=s.tilePixelRatio*U.get("symbol-spacing"),Pe=U.get("text-padding")*s.tilePixelRatio,Oe=function(bt,ft,ot,Gt=1){let qr=bt.get("icon-padding").evaluate(ft,{},ot),hi=qr&&qr.values;return[hi[0]*Gt,hi[1]*Gt,hi[2]*Gt,hi[3]*Gt]}(U,i,M,s.tilePixelRatio),Ne=U.get("text-max-angle")/180*Math.PI,Xe=U.get("text-rotation-alignment")!=="viewport"&&U.get("symbol-placement")!=="point",Ve=U.get("icon-rotation-alignment")==="map"&&U.get("symbol-placement")!=="point",He=U.get("symbol-placement"),ut=pe/2,We=U.get("icon-text-fit"),Ke;h&&We!=="none"&&(s.allowVerticalPlacement&&o.vertical&&(Ke=Yz(h,o.vertical,We,U.get("icon-text-fit-padding"),$,J)),Z&&(h=Yz(h,Z,We,U.get("icon-text-fit-padding"),$,J)));let De=M?z.line.getGranularityForZoomLevel(M.z):1,yt=(bt,ft)=>{ft.x<0||ft.x>=Jt||ft.y<0||ft.y>=Jt||function(ot,Gt,qr,hi,Ui,Ia,kn,Ai,_r,yi,Ci,Mi,xn,qa,_i,Dn,di,xi,bi,Xr,mr,bo,Dd,wo,Eme){let Ld=ot.addToLineVertexArray(Gt,qr),jc,zd,Fd,Nd,MF=0,RF=0,OF=0,kF=0,eE=-1,tE=-1,il={},DF=ru("");if(ot.allowVerticalPlacement&&hi.vertical){let nn=Ai.layout.get("text-rotate").evaluate(mr,{},wo)+90;Fd=new q0(_r,Gt,yi,Ci,Mi,hi.vertical,xn,qa,_i,nn),kn&&(Nd=new q0(_r,Gt,yi,Ci,Mi,kn,di,xi,_i,nn))}if(Ui){let nn=Ai.layout.get("icon-rotate").evaluate(mr,{}),Pa=Ai.layout.get("icon-text-fit")!=="none",Uc=wF(Ui,nn,Dd,Pa),To=kn?wF(kn,nn,Dd,Pa):void 0;zd=new q0(_r,Gt,yi,Ci,Mi,Ui,di,xi,!1,nn),MF=4*Uc.length;let $c=ot.iconSizeData,us=null;$c.kind==="source"?(us=[rl*Ai.layout.get("icon-size").evaluate(mr,{})],us[0]>au&&Br(`${ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):$c.kind==="composite"&&(us=[rl*bo.compositeIconSizes[0].evaluate(mr,{},wo),rl*bo.compositeIconSizes[1].evaluate(mr,{},wo)],(us[0]>au||us[1]>au)&&Br(`${ot.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),ot.addSymbols(ot.icon,Uc,us,Xr,bi,mr,c.ao.none,Gt,Ld.lineStartIndex,Ld.lineLength,-1,wo),eE=ot.icon.placedSymbolArray.length-1,To&&(RF=4*To.length,ot.addSymbols(ot.icon,To,us,Xr,bi,mr,c.ao.vertical,Gt,Ld.lineStartIndex,Ld.lineLength,-1,wo),tE=ot.icon.placedSymbolArray.length-1)}let LF=Object.keys(hi.horizontal);for(let nn of LF){let Pa=hi.horizontal[nn];if(!jc){DF=ru(Pa.text);let To=Ai.layout.get("text-rotate").evaluate(mr,{},wo);jc=new q0(_r,Gt,yi,Ci,Mi,Pa,xn,qa,_i,To)}let Uc=Pa.positionedLines.length===1;if(OF+=IF(ot,Gt,Pa,Ia,Ai,_i,mr,Dn,Ld,hi.vertical?c.ao.horizontal:c.ao.horizontalOnly,Uc?LF:[nn],il,eE,bo,wo),Uc)break}hi.vertical&&(kF+=IF(ot,Gt,hi.vertical,Ia,Ai,_i,mr,Dn,Ld,c.ao.vertical,["vertical"],il,tE,bo,wo));let Ime=jc?jc.boxStartIndex:ot.collisionBoxArray.length,qme=jc?jc.boxEndIndex:ot.collisionBoxArray.length,Pme=Fd?Fd.boxStartIndex:ot.collisionBoxArray.length,Ame=Fd?Fd.boxEndIndex:ot.collisionBoxArray.length,Cme=zd?zd.boxStartIndex:ot.collisionBoxArray.length,Mme=zd?zd.boxEndIndex:ot.collisionBoxArray.length,Rme=Nd?Nd.boxStartIndex:ot.collisionBoxArray.length,Ome=Nd?Nd.boxEndIndex:ot.collisionBoxArray.length,So=-1,A0=(nn,Pa)=>nn&&nn.circleDiameter?Math.max(nn.circleDiameter,Pa):Pa;So=A0(jc,So),So=A0(Fd,So),So=A0(zd,So),So=A0(Nd,So);let zF=So>-1?1:0;zF&&(So*=Eme/vi),ot.glyphOffsetArray.length>=Rd.MAX_GLYPHS&&Br("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),mr.sortKey!==void 0&&ot.addToSortKeyRanges(ot.symbolInstances.length,mr.sortKey);let kme=EF(Ai,mr,wo),[Dme,Lme]=function(nn,Pa){let Uc=nn.length,To=Pa==null?void 0:Pa.values;if((To==null?void 0:To.length)>0)for(let $c=0;$c<To.length;$c+=2){let us=To[$c+1];nn.emplaceBack(c.aE[To[$c]],us[0],us[1])}return[Uc,nn.length]}(ot.textAnchorOffsets,kme);ot.symbolInstances.emplaceBack(Gt.x,Gt.y,il.right>=0?il.right:-1,il.center>=0?il.center:-1,il.left>=0?il.left:-1,il.vertical||-1,eE,tE,DF,Ime,qme,Pme,Ame,Cme,Mme,Rme,Ome,yi,OF,kF,MF,RF,zF,0,xn,So,Dme,Lme)}(s,ft,bt,o,h,f,Ke,s.layers[0],s.collisionBoxArray,i.index,i.sourceLayerIndex,s.index,ie,[Pe,Pe,Pe,Pe],Xe,T,he,Oe,Ve,$,i,y,C,M,_)};if(He==="line")for(let bt of gF(i.geometry,0,0,Jt,Jt)){let ft=Nc(bt,De),ot=yme(ft,pe,Ne,o.vertical||Z,h,24,ye,s.overscaling,Jt);for(let Gt of ot)Z&&Sme(s,Z.text,ut,Gt)||yt(ft,Gt)}else if(He==="line-center"){for(let bt of i.geometry)if(bt.length>1){let ft=Nc(bt,De),ot=vme(ft,Ne,o.vertical||Z,h,24,ye);ot&&yt(ft,ot)}}else if(i.type==="Polygon")for(let bt of wc(i.geometry,0)){let ft=xme(bt,16);yt(Nc(bt[0],De,!0),new su(ft.x,ft.y,0))}else if(i.type==="LineString")for(let bt of i.geometry){let ft=Nc(bt,De);yt(ft,new su(ft[0].x,ft[0].y,0))}else if(i.type==="Point")for(let bt of i.geometry)for(let ft of bt)yt([ft],new su(ft.x,ft.y,0))}function IF(s,i,o,h,f,y,_,w,T,C,M,z,B,U,$){let Z=function(ye,he,pe,Pe,Oe,Ne,Xe,Ve){let He=Pe.layout.get("text-rotate").evaluate(Ne,{})*Math.PI/180,ut=[];for(let We of he.positionedLines)for(let Ke of We.positionedGlyphs){if(!Ke.rect)continue;let De=Ke.rect||{},yt=4,bt=!0,ft=1,ot=0,Gt=(Oe||Ve)&&Ke.vertical,qr=Ke.metrics.advance*Ke.scale/2;if(Ve&&he.verticalizable&&(ot=We.lineOffset/2-(Ke.imageName?-(vi-Ke.metrics.width*Ke.scale)/2:(Ke.scale-1)*vi)),Ke.imageName){let xi=Xe[Ke.imageName];bt=xi.sdf,ft=xi.pixelRatio,yt=1/ft}let hi=Oe?[Ke.x+qr,Ke.y]:[0,0],Ui=Oe?[0,0]:[Ke.x+qr+pe[0],Ke.y+pe[1]-ot],Ia=[0,0];Gt&&(Ia=Ui,Ui=[0,0]);let kn=Ke.metrics.isDoubleResolution?2:1,Ai=(Ke.metrics.left-yt)*Ke.scale-qr+Ui[0],_r=(-Ke.metrics.top-yt)*Ke.scale+Ui[1],yi=Ai+De.w/kn*Ke.scale/ft,Ci=_r+De.h/kn*Ke.scale/ft,Mi=new x(Ai,_r),xn=new x(yi,_r),qa=new x(Ai,Ci),_i=new x(yi,Ci);if(Gt){let xi=new x(-qr,qr- -17),bi=-Math.PI/2,Xr=12-qr,mr=new x(22-Xr,-(Ke.imageName?Xr:0)),bo=new x(...Ia);Mi._rotateAround(bi,xi)._add(mr)._add(bo),xn._rotateAround(bi,xi)._add(mr)._add(bo),qa._rotateAround(bi,xi)._add(mr)._add(bo),_i._rotateAround(bi,xi)._add(mr)._add(bo)}if(He){let xi=Math.sin(He),bi=Math.cos(He),Xr=[bi,-xi,xi,bi];Mi._matMult(Xr),xn._matMult(Xr),qa._matMult(Xr),_i._matMult(Xr)}let Dn=new x(0,0),di=new x(0,0);ut.push({tl:Mi,tr:xn,bl:qa,br:_i,tex:De,writingMode:he.writingMode,glyphOffset:hi,sectionIndex:Ke.sectionIndex,isSDF:bt,pixelOffsetTL:Dn,pixelOffsetBR:di,minFontScaleX:0,minFontScaleY:0})}return ut}(0,o,w,f,y,_,h,s.allowVerticalPlacement),J=s.textSizeData,ie=null;J.kind==="source"?(ie=[rl*f.layout.get("text-size").evaluate(_,{})],ie[0]>au&&Br(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):J.kind==="composite"&&(ie=[rl*U.compositeTextSizes[0].evaluate(_,{},$),rl*U.compositeTextSizes[1].evaluate(_,{},$)],(ie[0]>au||ie[1]>au)&&Br(`${s.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),s.addSymbols(s.text,Z,ie,w,y,_,C,i,T.lineStartIndex,T.lineLength,B,$);for(let ye of M)z[ye]=s.text.placedSymbolArray.length-1;return 4*Z.length}function qF(s){for(let i in s)return s[i];return null}function Sme(s,i,o,h){let f=s.compareText;if(i in f){let y=f[i];for(let _=y.length-1;_>=0;_--)if(h.dist(y[_])<o)return!0}else f[i]=[];return f[i].push(h),!1}let PF=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class WT{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[o,h]=new Uint8Array(i,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");let f=h>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);let y=PF[15&h];if(!y)throw new Error("Unrecognized array type.");let[_]=new Uint16Array(i,2,1),[w]=new Uint32Array(i,4,1);return new WT(w,_,y,i)}constructor(i,o=64,h=Float64Array,f){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;let y=PF.indexOf(this.ArrayType),_=2*i*this.ArrayType.BYTES_PER_ELEMENT,w=i*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-w%8)%8;if(y<0)throw new Error(`Unexpected typed array class: ${h}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+T,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+_+w+T),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+w+T,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+y]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=i)}add(i,o){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=o,h}finish(){let i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return HT(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,o,h,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:y,coords:_,nodeSize:w}=this,T=[0,y.length-1,0],C=[];for(;T.length;){let M=T.pop()||0,z=T.pop()||0,B=T.pop()||0;if(z-B<=w){for(let J=B;J<=z;J++){let ie=_[2*J],ye=_[2*J+1];ie>=i&&ie<=h&&ye>=o&&ye<=f&&C.push(y[J])}continue}let U=B+z>>1,$=_[2*U],Z=_[2*U+1];$>=i&&$<=h&&Z>=o&&Z<=f&&C.push(y[U]),(M===0?i<=$:o<=Z)&&(T.push(B),T.push(U-1),T.push(1-M)),(M===0?h>=$:f>=Z)&&(T.push(U+1),T.push(z),T.push(1-M))}return C}within(i,o,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:f,coords:y,nodeSize:_}=this,w=[0,f.length-1,0],T=[],C=h*h;for(;w.length;){let M=w.pop()||0,z=w.pop()||0,B=w.pop()||0;if(z-B<=_){for(let J=B;J<=z;J++)CF(y[2*J],y[2*J+1],i,o)<=C&&T.push(f[J]);continue}let U=B+z>>1,$=y[2*U],Z=y[2*U+1];CF($,Z,i,o)<=C&&T.push(f[U]),(M===0?i-h<=$:o-h<=Z)&&(w.push(B),w.push(U-1),w.push(1-M)),(M===0?i+h>=$:o+h>=Z)&&(w.push(U+1),w.push(z),w.push(1-M))}return T}}function HT(s,i,o,h,f,y){if(f-h<=o)return;let _=h+f>>1;AF(s,i,_,h,f,y),HT(s,i,o,h,_-1,1-y),HT(s,i,o,_+1,f,1-y)}function AF(s,i,o,h,f,y){for(;f>h;){if(f-h>600){let C=f-h+1,M=o-h+1,z=Math.log(C),B=.5*Math.exp(2*z/3),U=.5*Math.sqrt(z*B*(C-B)/C)*(M-C/2<0?-1:1);AF(s,i,o,Math.max(h,Math.floor(o-M*B/C+U)),Math.min(f,Math.floor(o+(C-M)*B/C+U)),y)}let _=i[2*o+y],w=h,T=f;for(Km(s,i,h,o),i[2*f+y]>_&&Km(s,i,h,f);w<T;){for(Km(s,i,w,T),w++,T--;i[2*w+y]<_;)w++;for(;i[2*T+y]>_;)T--}i[2*h+y]===_?Km(s,i,h,T):(T++,Km(s,i,T,f)),T<=o&&(h=T+1),o<=T&&(f=T-1)}}function Km(s,i,o,h){KT(s,o,h),KT(i,2*o,2*h),KT(i,2*o+1,2*h+1)}function KT(s,i,o){let h=s[i];s[i]=s[o],s[o]=h}function CF(s,i,o,h){let f=s-o,y=i-h;return f*f+y*y}var XT;c.cx=void 0,(XT=c.cx||(c.cx={})).create="create",XT.load="load",XT.fullLoad="fullLoad";let P0=null,Xm=[],YT=1e3/60,JT="loadTime",QT="fullLoadTime",Tme={mark(s){performance.mark(s)},frame(s){let i=s;P0!=null&&Xm.push(i-P0),P0=i},clearMetrics(){P0=null,Xm=[],performance.clearMeasures(JT),performance.clearMeasures(QT);for(let s in c.cx)performance.clearMarks(c.cx[s])},getPerformanceMetrics(){performance.measure(JT,c.cx.create,c.cx.load),performance.measure(QT,c.cx.create,c.cx.fullLoad);let s=performance.getEntriesByName(JT)[0].duration,i=performance.getEntriesByName(QT)[0].duration,o=Xm.length,h=1/(Xm.reduce((y,_)=>y+_,0)/o/1e3),f=Xm.filter(y=>y>YT).reduce((y,_)=>y+(_-YT)/YT,0);return{loadTime:s,fullLoadTime:i,fps:h,percentDroppedFrames:f/(o+f)*100,totalFrames:o}}};c.$=Jt,c.A=ee,c.B=function([s,i,o]){return i+=90,i*=Math.PI/180,o*=Math.PI/180,{x:s*Math.cos(i)*Math.sin(o),y:s*Math.sin(i)*Math.sin(o),z:s*Math.cos(o)}},c.C=Ua,c.D=lt,c.E=st,c.F=ur,c.G=Rc,c.H=function(s){if(ks==null){let i=s.navigator?s.navigator.userAgent:null;ks=!!s.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return ks},c.I=kT,c.J=class{constructor(s,i){this.target=s,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new pme(()=>this.process()),this.subscription=Go(this.target,"message",o=>this.receive(o),!1),this.globalScope=La(self)?s:window}registerMessageHandler(s,i){this.messageHandlers[s]=i}sendAsync(s,i){return new Promise((o,h)=>{let f=Math.round(1e18*Math.random()).toString(36).substring(0,10),y=i?Go(i.signal,"abort",()=>{y==null||y.unsubscribe(),delete this.resolveRejects[f];let T={id:f,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)},mme):null;this.resolveRejects[f]={resolve:T=>{y==null||y.unsubscribe(),o(T)},reject:T=>{y==null||y.unsubscribe(),h(T)}};let _=[],w=Object.assign(Object.assign({},s),{id:f,sourceMapId:this.mapId,origin:location.origin,data:Xl(s.data,_)});this.target.postMessage(w,{transfer:_})})}receive(s){let i=s.data,o=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[o];let h=this.abortControllers[o];return delete this.abortControllers[o],void(h&&h.abort())}if(La(self)||i.mustQueue)return this.tasks[o]=i,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,i)}}process(){if(this.taskQueue.length===0)return;let s=this.taskQueue.shift(),i=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(s,i)}processTask(s,i){return a(this,void 0,void 0,function*(){if(i.type==="<response>"){let f=this.resolveRejects[s];return delete this.resolveRejects[s],f?void(i.error?f.reject(Ys(i.error)):f.resolve(Ys(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let o=Ys(i.data),h=new AbortController;this.abortControllers[s]=h;try{let f=yield this.messageHandlers[i.type](i.sourceMapId,o,h);this.completeTask(s,null,f)}catch(f){this.completeTask(s,f)}})}completeTask(s,i,o){let h=[];delete this.abortControllers[s];let f={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Xl(i):null,data:Xl(o,h)};this.target.postMessage(f,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.K=Y,c.L=function(){var s=new ee(16);return ee!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},c.M=function(s,i,o){var h,f,y,_,w,T,C,M,z,B,U,$,Z=o[0],J=o[1],ie=o[2];return i===s?(s[12]=i[0]*Z+i[4]*J+i[8]*ie+i[12],s[13]=i[1]*Z+i[5]*J+i[9]*ie+i[13],s[14]=i[2]*Z+i[6]*J+i[10]*ie+i[14],s[15]=i[3]*Z+i[7]*J+i[11]*ie+i[15]):(f=i[1],y=i[2],_=i[3],w=i[4],T=i[5],C=i[6],M=i[7],z=i[8],B=i[9],U=i[10],$=i[11],s[0]=h=i[0],s[1]=f,s[2]=y,s[3]=_,s[4]=w,s[5]=T,s[6]=C,s[7]=M,s[8]=z,s[9]=B,s[10]=U,s[11]=$,s[12]=h*Z+w*J+z*ie+i[12],s[13]=f*Z+T*J+B*ie+i[13],s[14]=y*Z+C*J+U*ie+i[14],s[15]=_*Z+M*J+$*ie+i[15]),s},c.N=function(s,i,o){var h=o[0],f=o[1],y=o[2];return s[0]=i[0]*h,s[1]=i[1]*h,s[2]=i[2]*h,s[3]=i[3]*h,s[4]=i[4]*f,s[5]=i[5]*f,s[6]=i[6]*f,s[7]=i[7]*f,s[8]=i[8]*y,s[9]=i[9]*y,s[10]=i[10]*y,s[11]=i[11]*y,s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},c.O=function(s,i,o){var h=i[0],f=i[1],y=i[2],_=i[3],w=i[4],T=i[5],C=i[6],M=i[7],z=i[8],B=i[9],U=i[10],$=i[11],Z=i[12],J=i[13],ie=i[14],ye=i[15],he=o[0],pe=o[1],Pe=o[2],Oe=o[3];return s[0]=he*h+pe*w+Pe*z+Oe*Z,s[1]=he*f+pe*T+Pe*B+Oe*J,s[2]=he*y+pe*C+Pe*U+Oe*ie,s[3]=he*_+pe*M+Pe*$+Oe*ye,s[4]=(he=o[4])*h+(pe=o[5])*w+(Pe=o[6])*z+(Oe=o[7])*Z,s[5]=he*f+pe*T+Pe*B+Oe*J,s[6]=he*y+pe*C+Pe*U+Oe*ie,s[7]=he*_+pe*M+Pe*$+Oe*ye,s[8]=(he=o[8])*h+(pe=o[9])*w+(Pe=o[10])*z+(Oe=o[11])*Z,s[9]=he*f+pe*T+Pe*B+Oe*J,s[10]=he*y+pe*C+Pe*U+Oe*ie,s[11]=he*_+pe*M+Pe*$+Oe*ye,s[12]=(he=o[12])*h+(pe=o[13])*w+(Pe=o[14])*z+(Oe=o[15])*Z,s[13]=he*f+pe*T+Pe*B+Oe*J,s[14]=he*y+pe*C+Pe*U+Oe*ie,s[15]=he*_+pe*M+Pe*$+Oe*ye,s},c.P=x,c.Q=function(s,i){let o={};for(let h=0;h<i.length;h++){let f=i[h];f in s&&(o[f]=s[f])}return o},c.R=On,c.S=ou,c.T=ST,c.U=sF,c.V=oF,c.W=de,c.X=ve,c.Y=Ml,c.Z=Ea,c._=a,c.a=G,c.a$=qn,c.a0=function(s,i){var o,h,f,y,_;if(!s)return i!=null?i:{};if(!i)return s;let w=Object.assign({},s);if(i.removeAll&&(w={removeAll:!0}),i.remove){let T=new Set(i.remove);w.add&&(w.add=w.add.filter(M=>!T.has(M.id))),w.update&&(w.update=w.update.filter(M=>!T.has(M.id)));let C=new Set(((o=s.add)!==null&&o!==void 0?o:[]).map(M=>M.id));i.remove=i.remove.filter(M=>!C.has(M))}if(i.remove){let T=new Set(w.remove?w.remove.concat(i.remove):i.remove);w.remove=Array.from(T.values())}if(i.add){let T=w.add?w.add.concat(i.add):i.add,C=new Map(T.map(M=>[M.id,M]));w.add=Array.from(C.values())}if(i.update){let T=new Map((h=w.update)===null||h===void 0?void 0:h.map(C=>[C.id,C]));for(let C of i.update){let M=(f=T.get(C.id))!==null&&f!==void 0?f:{id:C.id};C.newGeometry&&(M.newGeometry=C.newGeometry),C.addOrUpdateProperties&&(M.addOrUpdateProperties=((y=M.addOrUpdateProperties)!==null&&y!==void 0?y:[]).concat(C.addOrUpdateProperties)),C.removeProperties&&(M.removeProperties=((_=M.removeProperties)!==null&&_!==void 0?_:[]).concat(C.removeProperties)),C.removeAllProperties&&(M.removeAllProperties=!0),T.set(C.id,M)}w.update=Array.from(T.values())}return w.remove&&w.add&&(w.remove=w.remove.filter(T=>w.add.findIndex(C=>C.id===T)===-1)),w},c.a1=Wm,c.a2=Bc,c.a3=25,c.a4=VT,c.a5=s=>{let i=window.document.createElement("video");return i.muted=!0,new Promise(o=>{i.onloadstart=()=>{o(i)};for(let h of s){let f=window.document.createElement("source");qe(h)||(i.crossOrigin="Anonymous"),f.src=h,i.appendChild(f)}})},c.a6=$e,c.a7=function(){return da++},c.a8=F,c.a9=Rd,c.aA=function(s){let i=1/0,o=1/0,h=-1/0,f=-1/0;for(let y of s)i=Math.min(i,y.x),o=Math.min(o,y.y),h=Math.max(h,y.x),f=Math.max(f,y.y);return[i,o,h,f]},c.aB=vi,c.aC=zi,c.aD=function(s,i,o,h,f=!1){if(!o[0]&&!o[1])return[0,0];let y=f?h==="map"?-s.bearingInRadians:0:h==="viewport"?s.bearingInRadians:0;if(y){let _=Math.sin(y),w=Math.cos(y);o=[o[0]*w-o[1]*_,o[0]*_+o[1]*w]}return[f?o[0]:zi(i,o[0],s.zoom),f?o[1]:zi(i,o[1],s.zoom)]},c.aF=zT,c.aG=ZT,c.aH=LT,c.aI=WT,c.aJ=Dr,c.aK=y0,c.aL=le,c.aM=Pt,c.aN=nr,c.aO=po,c.aP=Zo,c.aQ=uF,c.aR=dt,c.aS=nt,c.aT=function(s){var i=new ee(3);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i},c.aU=function(s,i,o){return s[0]=i[0]-o[0],s[1]=i[1]-o[1],s[2]=i[2]-o[2],s},c.aV=function(s,i){var o=i[0],h=i[1],f=i[2],y=o*o+h*h+f*f;return y>0&&(y=1/Math.sqrt(y)),s[0]=i[0]*y,s[1]=i[1]*y,s[2]=i[2]*y,s},c.aW=gt,c.aX=function(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]},c.aY=function(s,i,o){return s[0]=i[0]*o[0],s[1]=i[1]*o[1],s[2]=i[2]*o[2],s[3]=i[3]*o[3],s},c.aZ=it,c.a_=function(s,i,o){let h=i[0]*o[0]+i[1]*o[1]+i[2]*o[2];return h===0?null:(-(s[0]*o[0]+s[1]*o[1]+s[2]*o[2])-o[3])/h},c.aa=Hs,c.ab=xo,c.ac=fF,c.ad=function(s){let i={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,h,f,y)=>{let _=f||y;return i[h]=!_||_.toLowerCase(),""}),i["max-age"]){let o=parseInt(i["max-age"],10);isNaN(o)?delete i["max-age"]:i["max-age"]=o}return i},c.ae=Ds,c.af=function(s){return Math.pow(2,s)},c.ag=Te,c.ah=oi,c.ai=85.051129,c.aj=lF,c.ak=function(s){return Math.log(s)/Math.LN2},c.al=function(s){var i=s[0],o=s[1];return i*i+o*o},c.am=function(s,i){let o=[];for(let h in s)h in i||o.push(h);return o},c.an=function(s,i){let o=0,h=0;if(s.kind==="constant")h=s.layoutSize;else if(s.kind!=="source"){let{interpolationType:f,minZoom:y,maxZoom:_}=s,w=f?oi(Pi.interpolationFactor(f,i,y,_),0,1):0;s.kind==="camera"?h=Ua.number(s.minSize,s.maxSize,w):o=w}return{uSizeT:o,uSize:h}},c.ap=function(s,{uSize:i,uSizeT:o},{lowerSize:h,upperSize:f}){return s.kind==="source"?h/rl:s.kind==="composite"?Ua.number(h/rl,f/rl,o):i},c.aq=function(s,i){var o=i[0],h=i[1],f=i[2],y=i[3],_=i[4],w=i[5],T=i[6],C=i[7],M=i[8],z=i[9],B=i[10],U=i[11],$=i[12],Z=i[13],J=i[14],ie=i[15],ye=o*w-h*_,he=o*T-f*_,pe=o*C-y*_,Pe=h*T-f*w,Oe=h*C-y*w,Ne=f*C-y*T,Xe=M*Z-z*$,Ve=M*J-B*$,He=M*ie-U*$,ut=z*J-B*Z,We=z*ie-U*Z,Ke=B*ie-U*J,De=ye*Ke-he*We+pe*ut+Pe*He-Oe*Ve+Ne*Xe;return De?(s[0]=(w*Ke-T*We+C*ut)*(De=1/De),s[1]=(f*We-h*Ke-y*ut)*De,s[2]=(Z*Ne-J*Oe+ie*Pe)*De,s[3]=(B*Oe-z*Ne-U*Pe)*De,s[4]=(T*He-_*Ke-C*Ve)*De,s[5]=(o*Ke-f*He+y*Ve)*De,s[6]=(J*pe-$*Ne-ie*he)*De,s[7]=(M*Ne-B*pe+U*he)*De,s[8]=(_*We-w*He+C*Xe)*De,s[9]=(h*He-o*We-y*Xe)*De,s[10]=($*Oe-Z*pe+ie*ye)*De,s[11]=(z*pe-M*Oe-U*ye)*De,s[12]=(w*Ve-_*ut-T*Xe)*De,s[13]=(o*ut-h*Ve+f*Xe)*De,s[14]=(Z*he-$*Pe-J*ye)*De,s[15]=(M*Pe-z*he+B*ye)*De,s):null},c.ar=Da,c.as=function(s){var i=s[0],o=s[1];return Math.sqrt(i*i+o*o)},c.at=function(s){return s[0]=0,s[1]=0,s},c.au=function(s,i,o){return s[0]=i[0]*o,s[1]=i[1]*o,s},c.av=FT,c.aw=ka,c.ax=function(s,i,o,h){let f=i.y-s.y,y=i.x-s.x,_=h.y-o.y,w=h.x-o.x,T=_*y-w*f;if(T===0)return null;let C=(w*(s.y-o.y)-_*(s.x-o.x))/T;return new x(s.x+C*y,s.y+C*f)},c.ay=gF,c.az=az,c.b=za,c.b$=class extends g{},c.b0=function(s,i,o){return s[0]=i[0]*o,s[1]=i[1]*o,s[2]=i[2]*o,s[3]=i[3]*o,s},c.b1=function(s,i){return s[0]*i[0]+s[1]*i[1]+s[2]*i[2]+s[3]},c.b2=hF,c.b3=Od,c.b4=function(s,i,o,h,f){var y=1/Math.tan(i/2);if(s[0]=y/o,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=y,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0){var _=1/(h-f);s[10]=(f+h)*_,s[14]=2*f*h*_}else s[10]=-1,s[14]=-2*h;return s},c.b5=function(s){var i=new ee(16);return i[0]=s[0],i[1]=s[1],i[2]=s[2],i[3]=s[3],i[4]=s[4],i[5]=s[5],i[6]=s[6],i[7]=s[7],i[8]=s[8],i[9]=s[9],i[10]=s[10],i[11]=s[11],i[12]=s[12],i[13]=s[13],i[14]=s[14],i[15]=s[15],i},c.b6=function(s,i,o){var h=Math.sin(o),f=Math.cos(o),y=i[0],_=i[1],w=i[2],T=i[3],C=i[4],M=i[5],z=i[6],B=i[7];return i!==s&&(s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*f+C*h,s[1]=_*f+M*h,s[2]=w*f+z*h,s[3]=T*f+B*h,s[4]=C*f-y*h,s[5]=M*f-_*h,s[6]=z*f-w*h,s[7]=B*f-T*h,s},c.b7=function(s,i,o){var h=Math.sin(o),f=Math.cos(o),y=i[4],_=i[5],w=i[6],T=i[7],C=i[8],M=i[9],z=i[10],B=i[11];return i!==s&&(s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[4]=y*f+C*h,s[5]=_*f+M*h,s[6]=w*f+z*h,s[7]=T*f+B*h,s[8]=C*f-y*h,s[9]=M*f-_*h,s[10]=z*f-w*h,s[11]=B*f-T*h,s},c.b8=function(){let s=new Float32Array(16);return Te(s),s},c.b9=function(){let s=new Float64Array(16);return Te(s),s},c.bA=function(s,i){let o=ni(s,360),h=ni(i,360),f=h-o,y=h>o?f-360:f+360;return Math.abs(f)<Math.abs(y)?f:y},c.bB=function(s){return s[0]=0,s[1]=0,s[2]=0,s},c.bC=function(s,i,o,h){let f=Math.sqrt(s*s+i*i),y=Math.sqrt(o*o+h*h);s/=f,i/=f,o/=y,h/=y;let _=Math.acos(s*o+i*h);return-i*o+s*h>0?_:-_},c.bD=function(s,i){let o=ni(s,2*Math.PI),h=ni(i,2*Math.PI);return Math.min(Math.abs(o-h),Math.abs(o-h+2*Math.PI),Math.abs(o-h-2*Math.PI))},c.bE=function(){let s={},i=Se.$version;for(let o in Se.$root){let h=Se.$root[o];if(h.required){let f=null;f=o==="version"?i:h.type==="array"?[]:{},f!=null&&(s[o]=f)}}return s},c.bF=pd,c.bG=me,c.bH=function s(i,o){if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(let h=0;h<i.length;h++)if(!s(i[h],o[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&o!==null){if(typeof o!="object"||Object.keys(i).length!==Object.keys(o).length)return!1;for(let h in i)if(!s(i[h],o[h]))return!1;return!0}return i===o},c.bI=function(s){s=s.slice();let i=Object.create(null);for(let o=0;o<s.length;o++)i[s[o].id]=s[o];for(let o=0;o<s.length;o++)"ref"in s[o]&&(s[o]=Lt(s[o],i[s[o].ref]));return s},c.bJ=function(s){if(s.type==="custom")return new fme(s);switch(s.type){case"background":return new cme(s);case"circle":return new Kfe(s);case"color-relief":return new tpe(s);case"fill":return new gpe(s);case"fill-extrusion":return new qpe(s);case"heatmap":return new Yfe(s);case"hillshade":return new Qfe(s);case"line":return new kpe(s);case"raster":return new dme(s);case"symbol":return new S0(s)}},c.bK=An,c.bL=function(s,i){if(!s)return[{command:"setStyle",args:[i]}];let o=[];try{if(!ct(s.version,i.version))return[{command:"setStyle",args:[i]}];ct(s.center,i.center)||o.push({command:"setCenter",args:[i.center]}),ct(s.state,i.state)||o.push({command:"setGlobalState",args:[i.state]}),ct(s.centerAltitude,i.centerAltitude)||o.push({command:"setCenterAltitude",args:[i.centerAltitude]}),ct(s.zoom,i.zoom)||o.push({command:"setZoom",args:[i.zoom]}),ct(s.bearing,i.bearing)||o.push({command:"setBearing",args:[i.bearing]}),ct(s.pitch,i.pitch)||o.push({command:"setPitch",args:[i.pitch]}),ct(s.roll,i.roll)||o.push({command:"setRoll",args:[i.roll]}),ct(s.sprite,i.sprite)||o.push({command:"setSprite",args:[i.sprite]}),ct(s.glyphs,i.glyphs)||o.push({command:"setGlyphs",args:[i.glyphs]}),ct(s.transition,i.transition)||o.push({command:"setTransition",args:[i.transition]}),ct(s.light,i.light)||o.push({command:"setLight",args:[i.light]}),ct(s.terrain,i.terrain)||o.push({command:"setTerrain",args:[i.terrain]}),ct(s.sky,i.sky)||o.push({command:"setSky",args:[i.sky]}),ct(s.projection,i.projection)||o.push({command:"setProjection",args:[i.projection]});let h={},f=[];(function(_,w,T,C){let M;for(M in w=w||{},_=_||{})Object.prototype.hasOwnProperty.call(_,M)&&(Object.prototype.hasOwnProperty.call(w,M)||si(M,T,C));for(M in w)Object.prototype.hasOwnProperty.call(w,M)&&(Object.prototype.hasOwnProperty.call(_,M)?ct(_[M],w[M])||(_[M].type==="geojson"&&w[M].type==="geojson"&&jr(_,w,M)?qt(T,{command:"setGeoJSONSourceData",args:[M,w[M].data]}):li(M,w,T,C)):hr(M,w,T))})(s.sources,i.sources,f,h);let y=[];s.layers&&s.layers.forEach(_=>{"source"in _&&h[_.source]?o.push({command:"removeLayer",args:[_.id]}):y.push(_)}),o=o.concat(f),function(_,w,T){w=w||[];let C=(_=_||[]).map(Zt),M=w.map(Zt),z=_.reduce(Gr,{}),B=w.reduce(Gr,{}),U=C.slice(),$=Object.create(null),Z,J,ie,ye,he;for(let pe=0,Pe=0;pe<C.length;pe++)Z=C[pe],Object.prototype.hasOwnProperty.call(B,Z)?Pe++:(qt(T,{command:"removeLayer",args:[Z]}),U.splice(U.indexOf(Z,Pe),1));for(let pe=0,Pe=0;pe<M.length;pe++)Z=M[M.length-1-pe],U[U.length-1-pe]!==Z&&(Object.prototype.hasOwnProperty.call(z,Z)?(qt(T,{command:"removeLayer",args:[Z]}),U.splice(U.lastIndexOf(Z,U.length-Pe),1)):Pe++,ye=U[U.length-pe],qt(T,{command:"addLayer",args:[B[Z],ye]}),U.splice(U.length-pe,0,Z),$[Z]=!0);for(let pe=0;pe<M.length;pe++)if(Z=M[pe],J=z[Z],ie=B[Z],!$[Z]&&!ct(J,ie))if(ct(J.source,ie.source)&&ct(J["source-layer"],ie["source-layer"])&&ct(J.type,ie.type)){for(he in jt(J.layout,ie.layout,T,Z,null,"setLayoutProperty"),jt(J.paint,ie.paint,T,Z,null,"setPaintProperty"),ct(J.filter,ie.filter)||qt(T,{command:"setFilter",args:[Z,ie.filter]}),ct(J.minzoom,ie.minzoom)&&ct(J.maxzoom,ie.maxzoom)||qt(T,{command:"setLayerZoomRange",args:[Z,ie.minzoom,ie.maxzoom]}),J)Object.prototype.hasOwnProperty.call(J,he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?jt(J[he],ie[he],T,Z,he.slice(6),"setPaintProperty"):ct(J[he],ie[he])||qt(T,{command:"setLayerProperty",args:[Z,he,ie[he]]}));for(he in ie)Object.prototype.hasOwnProperty.call(ie,he)&&!Object.prototype.hasOwnProperty.call(J,he)&&he!=="layout"&&he!=="paint"&&he!=="filter"&&he!=="metadata"&&he!=="minzoom"&&he!=="maxzoom"&&(he.indexOf("paint.")===0?jt(J[he],ie[he],T,Z,he.slice(6),"setPaintProperty"):ct(J[he],ie[he])||qt(T,{command:"setLayerProperty",args:[Z,he,ie[he]]}))}else qt(T,{command:"removeLayer",args:[Z]}),ye=U[U.lastIndexOf(Z)+1],qt(T,{command:"addLayer",args:[ie,ye]})}(y,i.layers,o)}catch(h){console.warn("Unable to compute style diff:",h),o=[{command:"setStyle",args:[i]}]}return o},c.bM=function(s){let i=[],o=s.id;return o===void 0&&i.push({message:`layers.${o}: missing required property "id"`}),s.render===void 0&&i.push({message:`layers.${o}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&i.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),i},c.bN=Al,c.bO=Cl,c.bP=class extends rn{constructor(s,i){super(s,i),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},c.bQ=ci,c.bR=class extends rn{constructor(s,i){super(s,i),this.current=Hn}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let i=1;i<16;i++)if(s[i]!==this.current[i]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},c.bS=Hr,c.bT=class extends rn{constructor(s,i){super(s,i),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},c.bU=class extends rn{constructor(s,i){super(s,i),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},c.bV=oe,c.bW=function(s,i){var o=Math.sin(i),h=Math.cos(i);return s[0]=h,s[1]=o,s[2]=0,s[3]=-o,s[4]=h,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},c.bX=function(s,i,o){var h=i[0],f=i[1],y=i[2];return s[0]=h*o[0]+f*o[3]+y*o[6],s[1]=h*o[1]+f*o[4]+y*o[7],s[2]=h*o[2]+f*o[5]+y*o[8],s},c.bY=function(s,i,o,h,f,y,_){var w=1/(i-o),T=1/(h-f),C=1/(y-_);return s[0]=-2*w,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*T,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*C,s[11]=0,s[12]=(i+o)*w,s[13]=(f+h)*T,s[14]=(_+y)*C,s[15]=1,s},c.bZ=class extends rn{constructor(s,i){super(s,i),this.current=new Array}set(s){if(s!=this.current){this.current=s;let i=new Float32Array(4*s.length);for(let o=0;o<s.length;o++)i[4*o]=s[o].r,i[4*o+1]=s[o].g,i[4*o+2]=s[o].b,i[4*o+3]=s[o].a;this.gl.uniform4fv(this.location,i)}}},c.b_=class extends rn{constructor(s,i){super(s,i),this.current=new Array}set(s){if(s!=this.current){this.current=s;let i=new Float32Array(s);this.gl.uniform1fv(this.location,i)}}},c.ba=function(){return new Float64Array(16)},c.bb=function(s,i,o){let h=new Float64Array(4);return Hi(h,s,i-90,o),h},c.bc=function(s,i,o,h){var f,y,_,w,T,C=i[0],M=i[1],z=i[2],B=i[3],U=o[0],$=o[1],Z=o[2],J=o[3];return(y=C*U+M*$+z*Z+B*J)<0&&(y=-y,U=-U,$=-$,Z=-Z,J=-J),1-y>X?(f=Math.acos(y),_=Math.sin(f),w=Math.sin((1-h)*f)/_,T=Math.sin(h*f)/_):(w=1-h,T=h),s[0]=w*C+T*U,s[1]=w*M+T*$,s[2]=w*z+T*Z,s[3]=w*B+T*J,s},c.bd=function(s){let i=new Float64Array(9);var o,h,f,y,_,w,T,C,M,z,B,U,$,Z,J,ie,ye,he;z=(f=(h=s)[0])*(T=f+f),B=(y=h[1])*T,$=(_=h[2])*T,Z=_*(C=y+y),ie=(w=h[3])*T,ye=w*C,he=w*(M=_+_),(o=i)[0]=1-(U=y*C)-(J=_*M),o[3]=B-he,o[6]=$+ye,o[1]=B+he,o[4]=1-z-J,o[7]=Z-ie,o[2]=$-ye,o[5]=Z+ie,o[8]=1-z-U;let pe=Zo(-Math.asin(oi(i[2],-1,1))),Pe,Oe;return Math.hypot(i[5],i[8])<.001?(Pe=0,Oe=-Zo(Math.atan2(i[3],i[4]))):(Pe=Zo(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),Oe=Zo(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:Pe,pitch:pe+90,bearing:Oe}},c.be=function(s,i){return s.roll==i.roll&&s.pitch==i.pitch&&s.bearing==i.bearing},c.bf=Nt,c.bg=os,c.bh=Pd,c.bi=jm,c.bj=qd,c.bk=fo,c.bl=ai,c.bm=Ni,c.bn=function(s,i,o,h,f){return fo(h,f,oi((s-i)/(o-i),0,1))},c.bo=ni,c.bp=function(){return new Float64Array(3)},c.bq=function(s,i,o,h){return s[0]=i[0]+o[0]*h,s[1]=i[1]+o[1]*h,s[2]=i[2]+o[2]*h,s},c.br=Hi,c.bs=function(s,i,o){var h=o[0],f=o[1],y=o[2],_=o[3],w=i[0],T=i[1],C=i[2],M=f*C-y*T,z=y*w-h*C,B=h*T-f*w;return s[0]=w+_*(M+=M)+f*(B+=B)-y*(z+=z),s[1]=T+_*z+y*M-h*B,s[2]=C+_*B+h*z-f*M,s},c.bt=function(s,i,o){let h=(f=[s[0],s[1],s[2],i[0],i[1],i[2],o[0],o[1],o[2]])[0]*((M=f[8])*(_=f[4])-(w=f[5])*(C=f[7]))+f[1]*(-M*(y=f[3])+w*(T=f[6]))+f[2]*(C*y-_*T);var f,y,_,w,T,C,M;if(h===0)return null;let z=gt([],[i[0],i[1],i[2]],[o[0],o[1],o[2]]),B=gt([],[o[0],o[1],o[2]],[s[0],s[1],s[2]]),U=gt([],[s[0],s[1],s[2]],[i[0],i[1],i[2]]),$=dt([],z,-s[3]);return nt($,$,dt([],B,-i[3])),nt($,$,dt([],U,-o[3])),dt($,$,1/h),$},c.bu=UT,c.bv=function(){return new Float64Array(4)},c.bw=function(s,i,o,h){var f=[],y=[];return f[0]=i[0]-o[0],f[1]=i[1]-o[1],f[2]=i[2]-o[2],y[0]=f[0]*Math.cos(h)-f[1]*Math.sin(h),y[1]=f[0]*Math.sin(h)+f[1]*Math.cos(h),y[2]=f[2],s[0]=y[0]+o[0],s[1]=y[1]+o[1],s[2]=y[2]+o[2],s},c.bx=function(s,i,o,h){var f=[],y=[];return f[0]=i[0]-o[0],f[1]=i[1]-o[1],f[2]=i[2]-o[2],y[0]=f[0],y[1]=f[1]*Math.cos(h)-f[2]*Math.sin(h),y[2]=f[1]*Math.sin(h)+f[2]*Math.cos(h),s[0]=y[0]+o[0],s[1]=y[1]+o[1],s[2]=y[2]+o[2],s},c.by=function(s,i,o,h){var f=[],y=[];return f[0]=i[0]-o[0],f[1]=i[1]-o[1],f[2]=i[2]-o[2],y[0]=f[2]*Math.sin(h)+f[0]*Math.cos(h),y[1]=f[1],y[2]=f[2]*Math.cos(h)-f[0]*Math.sin(h),s[0]=y[0]+o[0],s[1]=y[1]+o[1],s[2]=y[2]+o[2],s},c.bz=function(s,i,o){var h=Math.sin(o),f=Math.cos(o),y=i[0],_=i[1],w=i[2],T=i[3],C=i[8],M=i[9],z=i[10],B=i[11];return i!==s&&(s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15]),s[0]=y*f-C*h,s[1]=_*f-M*h,s[2]=w*f-z*h,s[3]=T*f-B*h,s[8]=y*h+C*f,s[9]=_*h+M*f,s[10]=w*h+z*f,s[11]=T*h+B*f,s},c.c=_e,c.c0=Fpe,c.c1=class extends l{},c.c2=wT,c.c3=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},c.c4=mz,c.c5=function(s,i,o){var h=i[0],f=i[1],y=i[2],_=o[3]*h+o[7]*f+o[11]*y+o[15];return s[0]=(o[0]*h+o[4]*f+o[8]*y+o[12])/(_=_||1),s[1]=(o[1]*h+o[5]*f+o[9]*y+o[13])/_,s[2]=(o[2]*h+o[6]*f+o[10]*y+o[14])/_,s},c.c6=class extends Cm{},c.c7=class extends O{},c.c8=function(s,i){return s[0]===i[0]&&s[1]===i[1]&&s[2]===i[2]&&s[3]===i[3]&&s[4]===i[4]&&s[5]===i[5]&&s[6]===i[6]&&s[7]===i[7]&&s[8]===i[8]&&s[9]===i[9]&&s[10]===i[10]&&s[11]===i[11]&&s[12]===i[12]&&s[13]===i[13]&&s[14]===i[14]&&s[15]===i[15]},c.c9=function(s,i){var o=s[0],h=s[1],f=s[2],y=s[3],_=s[4],w=s[5],T=s[6],C=s[7],M=s[8],z=s[9],B=s[10],U=s[11],$=s[12],Z=s[13],J=s[14],ie=s[15],ye=i[0],he=i[1],pe=i[2],Pe=i[3],Oe=i[4],Ne=i[5],Xe=i[6],Ve=i[7],He=i[8],ut=i[9],We=i[10],Ke=i[11],De=i[12],yt=i[13],bt=i[14],ft=i[15];return Math.abs(o-ye)<=X*Math.max(1,Math.abs(o),Math.abs(ye))&&Math.abs(h-he)<=X*Math.max(1,Math.abs(h),Math.abs(he))&&Math.abs(f-pe)<=X*Math.max(1,Math.abs(f),Math.abs(pe))&&Math.abs(y-Pe)<=X*Math.max(1,Math.abs(y),Math.abs(Pe))&&Math.abs(_-Oe)<=X*Math.max(1,Math.abs(_),Math.abs(Oe))&&Math.abs(w-Ne)<=X*Math.max(1,Math.abs(w),Math.abs(Ne))&&Math.abs(T-Xe)<=X*Math.max(1,Math.abs(T),Math.abs(Xe))&&Math.abs(C-Ve)<=X*Math.max(1,Math.abs(C),Math.abs(Ve))&&Math.abs(M-He)<=X*Math.max(1,Math.abs(M),Math.abs(He))&&Math.abs(z-ut)<=X*Math.max(1,Math.abs(z),Math.abs(ut))&&Math.abs(B-We)<=X*Math.max(1,Math.abs(B),Math.abs(We))&&Math.abs(U-Ke)<=X*Math.max(1,Math.abs(U),Math.abs(Ke))&&Math.abs($-De)<=X*Math.max(1,Math.abs($),Math.abs(De))&&Math.abs(Z-yt)<=X*Math.max(1,Math.abs(Z),Math.abs(yt))&&Math.abs(J-bt)<=X*Math.max(1,Math.abs(J),Math.abs(bt))&&Math.abs(ie-ft)<=X*Math.max(1,Math.abs(ie),Math.abs(ft))},c.cA=function(s,i){G.REGISTERED_PROTOCOLS[s]=i},c.cB=function(s){delete G.REGISTERED_PROTOCOLS[s]},c.cC=function(s,i){let o={};for(let f=0;f<s.length;f++){let y=i&&i[s[f].id]||cT(s[f]);i&&(i[s[f].id]=y);let _=o[y];_||(_=o[y]=[]),_.push(s[f])}let h=[];for(let f in o)h.push(o[f]);return h},c.cD=tt,c.cE=dF,c.cF=pF,c.cG=Vz,c.cH=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=Jt/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;let i=s.bucket.layers[0],o=i.layout,h=i._unevaluatedLayout._values,f={layoutIconSize:h["icon-size"].possiblyEvaluate(new ur(s.bucket.zoom+1),s.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new ur(s.bucket.zoom+1),s.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new ur(18))};if(s.bucket.textSizeData.kind==="composite"){let{minZoom:C,maxZoom:M}=s.bucket.textSizeData;f.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ur(C),s.canonical),h["text-size"].possiblyEvaluate(new ur(M),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){let{minZoom:C,maxZoom:M}=s.bucket.iconSizeData;f.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ur(C),s.canonical),h["icon-size"].possiblyEvaluate(new ur(M),s.canonical)]}let y=o.get("text-line-height")*vi,_=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",w=o.get("text-keep-upright"),T=o.get("text-size");for(let C of s.bucket.features){let M=o.get("text-font").evaluate(C,{},s.canonical).join(","),z=T.evaluate(C,{},s.canonical),B=f.layoutTextSize.evaluate(C,{},s.canonical),U=f.layoutIconSize.evaluate(C,{},s.canonical),$={horizontal:{},vertical:void 0},Z=C.text,J,ie=[0,0];if(Z){let pe=Z.toString(),Pe=o.get("text-letter-spacing").evaluate(C,{},s.canonical)*vi,Oe=pT(pe)?Pe:0,Ne=o.get("text-anchor").evaluate(C,{},s.canonical),Xe=EF(i,C,s.canonical);if(!Xe){let We=o.get("text-radial-offset").evaluate(C,{},s.canonical);ie=We?TF(Ne,[We*vi,GT]):o.get("text-offset").evaluate(C,{},s.canonical).map(Ke=>Ke*vi)}let Ve=_?"center":o.get("text-justify").evaluate(C,{},s.canonical),He=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(C,{},s.canonical)*vi:1/0,ut=()=>{s.bucket.allowVerticalPlacement&&md(pe)&&($.vertical=x0(Z,s.glyphMap,s.glyphPositions,s.imagePositions,M,He,y,Ne,"left",Oe,ie,c.ao.vertical,!0,B,z))};if(!_&&Xe){let We=new Set;if(Ve==="auto")for(let De=0;De<Xe.values.length;De+=2)We.add(ZT(Xe.values[De]));else We.add(Ve);let Ke=!1;for(let De of We)if(!$.horizontal[De])if(Ke)$.horizontal[De]=$.horizontal[0];else{let yt=x0(Z,s.glyphMap,s.glyphPositions,s.imagePositions,M,He,y,"center",De,Oe,ie,c.ao.horizontal,!1,B,z);yt&&($.horizontal[De]=yt,Ke=yt.positionedLines.length===1)}ut()}else{Ve==="auto"&&(Ve=ZT(Ne));let We=x0(Z,s.glyphMap,s.glyphPositions,s.imagePositions,M,He,y,Ne,Ve,Oe,ie,c.ao.horizontal,!1,B,z);We&&($.horizontal[Ve]=We),ut(),md(pe)&&_&&w&&($.vertical=x0(Z,s.glyphMap,s.glyphPositions,s.imagePositions,M,He,y,Ne,Ve,Oe,ie,c.ao.vertical,!1,B,z))}}let ye=!1;if(C.icon&&C.icon.name){let pe=s.imageMap[C.icon.name];pe&&(J=ome(s.imagePositions[C.icon.name],o.get("icon-offset").evaluate(C,{},s.canonical),o.get("icon-anchor").evaluate(C,{},s.canonical)),ye=!!pe.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=ye:s.bucket.sdfIcons!==ye&&Br("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==s.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}let he=qF($.horizontal)||$.vertical;s.bucket.iconsInText=!!he&&he.iconsInText,(he||J)&&wme(s.bucket,C,$,J,s.imageMap,f,B,U,ie,ye,s.canonical,s.subdivisionGranularity)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},c.cI=MT,c.cJ=PT,c.cK=CT,c.cL=Cz,c.cM=OT,c.cN=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},c.cO=function(s,i,o,h,f){return a(this,void 0,void 0,function*(){if(ve())try{return yield Ml(s,i,o,h,f)}catch(y){}return function(y,_,w,T,C){let M=y.width,z=y.height;$o&&Vo||($o=new OffscreenCanvas(M,z),Vo=$o.getContext("2d",{willReadFrequently:!0})),$o.width=M,$o.height=z,Vo.drawImage(y,0,0,M,z);let B=Vo.getImageData(_,w,T,C);return Vo.clearRect(0,0,M,z),B.data}(s,i,o,h,f)})},c.cP=yz,c.cQ=S,c.cR=Az,c.cS=Ad,c.cT=Ic,c.cU=function(s,i){let o=new Map;if(s!=null)if(s.type==="Feature")o.set(Hm(s,i),s);else for(let h of s.features)o.set(Hm(h,i),h);return o},c.cV=function(s,i){if(s==null)return!0;if(s.type==="Feature")return Hm(s,i)!=null;if(s.type==="FeatureCollection"){let o=new Set;for(let h of s.features){let f=Hm(h,i);if(f==null||o.has(f))return!1;o.add(f)}return!0}return!1},c.cW=function(s,i,o){var h,f,y,_;if(i.removeAll&&s.clear(),i.remove)for(let w of i.remove)s.delete(w);if(i.add)for(let w of i.add){let T=Hm(w,o);T!=null&&s.set(T,w)}if(i.update)for(let w of i.update){let T=s.get(w.id);if(T==null)continue;let C=!w.removeAllProperties&&(((h=w.removeProperties)===null||h===void 0?void 0:h.length)>0||((f=w.addOrUpdateProperties)===null||f===void 0?void 0:f.length)>0);if((w.newGeometry||w.removeAllProperties||C)&&(T=Object.assign({},T),s.set(w.id,T),C&&(T.properties=Object.assign({},T.properties))),w.newGeometry&&(T.geometry=w.newGeometry),w.removeAllProperties)T.properties={};else if(((y=w.removeProperties)===null||y===void 0?void 0:y.length)>0)for(let M of w.removeProperties)Object.prototype.hasOwnProperty.call(T.properties,M)&&delete T.properties[M];if(((_=w.addOrUpdateProperties)===null||_===void 0?void 0:_.length)>0)for(let{key:M,value:z}of w.addOrUpdateProperties)T.properties[M]=z}},c.cX=ba,c.ca=function(s,i){return s[0]=i[0],s[1]=i[1],s[2]=i[2],s[3]=i[3],s[4]=i[4],s[5]=i[5],s[6]=i[6],s[7]=i[7],s[8]=i[8],s[9]=i[9],s[10]=i[10],s[11]=i[11],s[12]=i[12],s[13]=i[13],s[14]=i[14],s[15]=i[15],s},c.cb=s=>s.type==="symbol",c.cc=s=>s.type==="circle",c.cd=s=>s.type==="heatmap",c.ce=s=>s.type==="line",c.cf=s=>s.type==="fill",c.cg=s=>s.type==="fill-extrusion",c.ch=s=>s.type==="hillshade",c.ci=s=>s.type==="color-relief",c.cj=s=>s.type==="raster",c.ck=s=>s.type==="background",c.cl=s=>s.type==="custom",c.cm=Xi,c.cn=function(s,i,o){let h=Ki(i.x-o.x,i.y-o.y),f=Ki(s.x-o.x,s.y-o.y);var y,_;return Zo(Math.atan2(h[0]*f[1]-h[1]*f[0],(y=h)[0]*(_=f)[0]+y[1]*_[1]))},c.co=ha,c.cp=function(s,i){return Ho[i]&&(s instanceof MouseEvent||s instanceof WheelEvent)},c.cq=function(s,i){return Wo[i]&&"touches"in s},c.cr=function(s){return Wo[s]||Ho[s]},c.cs=function(s,i,o){var h=i[0],f=i[1];return s[0]=o[0]*h+o[4]*f+o[12],s[1]=o[1]*h+o[5]*f+o[13],s},c.ct=function(s,i){let{x:o,y:h}=Wm.fromLngLat(i);return!(s<0||s>25||h<0||h>=1||o<0||o>=1)},c.cu=function(s,i){return s[0]=i[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=i[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=i[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},c.cv=class extends Ql{},c.cw=Tme,c.cy=function(s){return s.message===Rl},c.cz=se,c.d=qe,c.e=Vn,c.f=s=>a(void 0,void 0,void 0,function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));let i=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(i)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=W,c.h=s=>new Promise((i,o)=>{let h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=Fa})},h.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let f=new Blob([new Uint8Array(s)],{type:"image/png"});h.src=s.byteLength?URL.createObjectURL(f):Fa}),c.i=La,c.j=(s,i)=>be(Vn(s,{type:"json"}),i),c.k=Le,c.l=Be,c.m=be,c.n=(s,i)=>be(Vn(s,{type:"arrayBuffer"}),i),c.o=function(s){return new OT(s).readFields(Kpe,[])},c.p=$z,c.q=Lm,c.r=en,c.s=Go,c.t=u0,c.u=Vt,c.v=Se,c.w=Br,c.x=hT,c.y=Oc,c.z=Kl}),n("worker",["./shared"],function(c){"use strict";class a{constructor(G){this.keyCache={},G&&this.replace(G)}replace(G){this._layerConfigs={},this._layers={},this.update(G,[])}update(G,W){for(let se of G){this._layerConfigs[se.id]=se;let me=this._layers[se.id]=c.bJ(se);me._featureFilter=c.aa(me.filter),this.keyCache[se.id]&&delete this.keyCache[se.id]}for(let se of W)delete this.keyCache[se],delete this._layerConfigs[se],delete this._layers[se];this.familiesBySource={};let Y=c.cC(Object.values(this._layerConfigs),this.keyCache);for(let se of Y){let me=se.map(Le=>this._layers[Le.id]),be=me[0];if(be.visibility==="none")continue;let qe=be.source||"",we=this.familiesBySource[qe];we||(we=this.familiesBySource[qe]={});let ke=be.sourceLayer||"_geojsonTileLayer",Be=we[ke];Be||(Be=we[ke]=[]),Be.push(me)}}}class x{constructor(G){let W={},Y=[];for(let qe in G){let we=G[qe],ke=W[qe]={};for(let Be in we){let Le=we[+Be];if(!Le||Le.bitmap.width===0||Le.bitmap.height===0)continue;let st={x:0,y:0,w:Le.bitmap.width+2,h:Le.bitmap.height+2};Y.push(st),ke[Be]={rect:st,metrics:Le.metrics}}}let{w:se,h:me}=c.p(Y),be=new c.q({width:se||1,height:me||1});for(let qe in G){let we=G[qe];for(let ke in we){let Be=we[+ke];if(!Be||Be.bitmap.width===0||Be.bitmap.height===0)continue;let Le=W[qe][ke].rect;c.q.copy(Be.bitmap,be,{x:0,y:0},{x:Le.x+1,y:Le.y+1},Be.bitmap)}}this.image=be,this.positions=W}}c.cD("GlyphAtlas",x);class S{constructor(G){this.tileID=new c.Z(G.tileID.overscaledZ,G.tileID.wrap,G.tileID.canonical.z,G.tileID.canonical.x,G.tileID.canonical.y),this.uid=G.uid,this.zoom=G.zoom,this.pixelRatio=G.pixelRatio,this.tileSize=G.tileSize,this.source=G.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=G.showCollisionBoxes,this.collectResourceTiming=!!G.collectResourceTiming,this.returnDependencies=!!G.returnDependencies,this.promoteId=G.promoteId,this.inFlightDependencies=[],this.globalState=G.globalState}parse(G,W,Y,se,me){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=G,this.collisionBoxArray=new c.a8;let be=new c.cE(Object.keys(G.layers).sort()),qe=new c.cF(this.tileID,this.promoteId);qe.bucketLayerIDs=[];let we={},ke={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Y,subdivisionGranularity:me},Be=W.familiesBySource[this.source];for(let jt in Be){let Zt=G.layers[jt];if(!Zt)continue;Zt.version===1&&c.w(`Vector tile source "${this.source}" layer "${jt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let Gr=be.encode(jt),$e=[];for(let Fi=0;Fi<Zt.length;Fi++){let Tr=Zt.feature(Fi),Ko=qe.getId(Tr,jt);$e.push({feature:Tr,id:Ko,index:Fi,sourceLayerIndex:Gr})}for(let Fi of Be[jt]){let Tr=Fi[0];Tr.source!==this.source&&c.w(`layer.source = ${Tr.source} does not equal this.source = ${this.source}`),Tr.minzoom&&this.zoom<Math.floor(Tr.minzoom)||Tr.maxzoom&&this.zoom>=Tr.maxzoom||Tr.visibility!=="none"&&(A(Fi,this.zoom,Y,this.globalState),(we[Tr.id]=Tr.createBucket({index:qe.bucketLayerIDs.length,layers:Fi,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Gr,sourceID:this.source,globalState:this.globalState})).populate($e,ke,this.tileID.canonical),qe.bucketLayerIDs.push(Fi.map(Ko=>Ko.id)))}}let Le=c.bN(ke.glyphDependencies,jt=>Object.keys(jt).map(Number));this.inFlightDependencies.forEach(jt=>jt==null?void 0:jt.abort()),this.inFlightDependencies=[];let st=Promise.resolve({});if(Object.keys(Le).length){let jt=new AbortController;this.inFlightDependencies.push(jt),st=se.sendAsync({type:"GG",data:{stacks:Le,source:this.source,tileID:this.tileID,type:"glyphs"}},jt)}let Se=Object.keys(ke.iconDependencies),Tt=Promise.resolve({});if(Se.length){let jt=new AbortController;this.inFlightDependencies.push(jt),Tt=se.sendAsync({type:"GI",data:{icons:Se,source:this.source,tileID:this.tileID,type:"icons"}},jt)}let Lt=Object.keys(ke.patternDependencies),ct=Promise.resolve({});if(Lt.length){let jt=new AbortController;this.inFlightDependencies.push(jt),ct=se.sendAsync({type:"GI",data:{icons:Lt,source:this.source,tileID:this.tileID,type:"patterns"}},jt)}let[qt,hr,si]=yield Promise.all([st,Tt,ct]),li=new x(qt),jr=new c.cG(hr,si);for(let jt in we){let Zt=we[jt];Zt instanceof c.a9?(A(Zt.layers,this.zoom,Y,this.globalState),c.cH({bucket:Zt,glyphMap:qt,glyphPositions:li.positions,imageMap:hr,imagePositions:jr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ke.subdivisionGranularity})):Zt.hasPattern&&(Zt instanceof c.cI||Zt instanceof c.cJ||Zt instanceof c.cK)&&(A(Zt.layers,this.zoom,Y,this.globalState),Zt.addFeatures(ke,this.tileID.canonical,jr.patternPositions))}return this.status="done",{buckets:Object.values(we).filter(jt=>!jt.isEmpty()),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:li.image,imageAtlas:jr,glyphMap:this.returnDependencies?qt:null,iconMap:this.returnDependencies?hr:null,glyphPositions:this.returnDependencies?li.positions:null}})}}function A(_e,G,W,Y){let se=new c.F(G);for(let me of _e)me.setGlobalState(Y),me.recalculate(se,W)}class R{constructor(G,W,Y){this.actor=G,this.layerIndex=W,this.availableImages=Y,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(G,W){return c._(this,void 0,void 0,function*(){let Y=yield c.n(G.request,W);try{return{vectorTile:new c.cL(new c.cM(Y.data)),rawData:Y.data,cacheControl:Y.cacheControl,expires:Y.expires}}catch(se){let me=new Uint8Array(Y.data),be=`Unable to parse the tile at ${G.request.url}, `;throw be+=me[0]===31&&me[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${se.message}`,new Error(be)}})}loadTile(G){return c._(this,void 0,void 0,function*(){let W=G.uid,Y=!!(G&&G.request&&G.request.collectResourceTiming)&&new c.cN(G.request),se=new S(G);this.loading[W]=se;let me=new AbortController;se.abort=me;try{let be=yield this.loadVectorTile(G,me);if(delete this.loading[W],!be)return null;let qe=be.rawData,we={};be.expires&&(we.expires=be.expires),be.cacheControl&&(we.cacheControl=be.cacheControl);let ke={};if(Y){let Le=Y.finish();Le&&(ke.resourceTiming=JSON.parse(JSON.stringify(Le)))}se.vectorTile=be.vectorTile;let Be=se.parse(be.vectorTile,this.layerIndex,this.availableImages,this.actor,G.subdivisionGranularity);this.loaded[W]=se,this.fetching[W]={rawTileData:qe,cacheControl:we,resourceTiming:ke};try{let Le=yield Be;return c.e({rawTileData:qe.slice(0)},Le,we,ke)}finally{delete this.fetching[W]}}catch(be){throw delete this.loading[W],se.status="done",this.loaded[W]=se,be}})}reloadTile(G){return c._(this,void 0,void 0,function*(){let W=G.uid;if(!this.loaded||!this.loaded[W])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let Y=this.loaded[W];if(Y.showCollisionBoxes=G.showCollisionBoxes,Y.globalState=G.globalState,Y.status==="parsing"){let se=yield Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,G.subdivisionGranularity),me;if(this.fetching[W]){let{rawTileData:be,cacheControl:qe,resourceTiming:we}=this.fetching[W];delete this.fetching[W],me=c.e({rawTileData:be.slice(0)},se,qe,we)}else me=se;return me}if(Y.status==="done"&&Y.vectorTile)return Y.parse(Y.vectorTile,this.layerIndex,this.availableImages,this.actor,G.subdivisionGranularity)})}abortTile(G){return c._(this,void 0,void 0,function*(){let W=this.loading,Y=G.uid;W&&W[Y]&&W[Y].abort&&(W[Y].abort.abort(),delete W[Y])})}removeTile(G){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[G.uid]&&delete this.loaded[G.uid]})}}class D{constructor(){this.loaded={}}loadTile(G){return c._(this,void 0,void 0,function*(){let{uid:W,encoding:Y,rawImageData:se,redFactor:me,greenFactor:be,blueFactor:qe,baseShift:we}=G,ke=se.width+2,Be=se.height+2,Le=c.b(se)?new c.R({width:ke,height:Be},yield c.cO(se,-1,-1,ke,Be)):se,st=new c.cP(W,Le,Y,me,be,qe,we);return this.loaded=this.loaded||{},this.loaded[W]=st,st})}removeTile(G){let W=this.loaded,Y=G.uid;W&&W[Y]&&delete W[Y]}}var L,H,ce=function(){if(H)return L;function _e(W,Y){if(W.length!==0){G(W[0],Y);for(var se=1;se<W.length;se++)G(W[se],!Y)}}function G(W,Y){for(var se=0,me=0,be=0,qe=W.length,we=qe-1;be<qe;we=be++){var ke=(W[be][0]-W[we][0])*(W[we][1]+W[be][1]),Be=se+ke;me+=Math.abs(se)>=Math.abs(ke)?se-Be+ke:ke-Be+se,se=Be}se+me>=0!=!!Y&&W.reverse()}return H=1,L=function W(Y,se){var me,be=Y&&Y.type;if(be==="FeatureCollection")for(me=0;me<Y.features.length;me++)W(Y.features[me],se);else if(be==="GeometryCollection")for(me=0;me<Y.geometries.length;me++)W(Y.geometries[me],se);else if(be==="Feature")W(Y.geometry,se);else if(be==="Polygon")_e(Y.coordinates,se);else if(be==="MultiPolygon")for(me=0;me<Y.coordinates.length;me++)_e(Y.coordinates[me],se);return Y}}(),de=c.cQ(ce);class ve extends c.cS{constructor(G,W){super(new c.cM,0,W,[],[]),this.feature=G,this.type=G.type,this.properties=G.tags?G.tags:{},"id"in G&&(typeof G.id=="string"?this.id=parseInt(G.id,10):typeof G.id!="number"||isNaN(G.id)||(this.id=G.id))}loadGeometry(){let G=[],W=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(let Y of W){let se=[];for(let me of Y)se.push(new c.P(me[0],me[1]));G.push(se)}return G}}class X extends c.cR{constructor(G,W){super(new c.cM),this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.version=W?W.version:1,this.extent=W?W.extent:4096,this.length=G.length,this.features=G}feature(G){return new ve(this.features[G],this.extent)}}function ee(_e,G){G.writeVarintField(15,_e.version||1),G.writeStringField(1,_e.name||""),G.writeVarintField(5,_e.extent||4096);let W={keys:[],values:[],keycache:{},valuecache:{}};for(let me=0;me<_e.length;me++)W.feature=_e.feature(me),G.writeMessage(2,oe,W);let Y=W.keys;for(let me of Y)G.writeStringField(3,me);let se=W.values;for(let me of se)G.writeMessage(4,nt,me)}function oe(_e,G){if(!_e.feature)return;let W=_e.feature;W.id!==void 0&&G.writeVarintField(1,W.id),G.writeMessage(2,Te,_e),G.writeVarintField(3,W.type),G.writeMessage(4,Ge,W)}function Te(_e,G){var W;for(let Y in(W=_e.feature)==null?void 0:W.properties){let se=_e.feature.properties[Y],me=_e.keycache[Y];if(se===null)continue;me===void 0&&(_e.keys.push(Y),me=_e.keys.length-1,_e.keycache[Y]=me),G.writeVarint(me),typeof se!="string"&&typeof se!="boolean"&&typeof se!="number"&&(se=JSON.stringify(se));let be=typeof se+":"+se,qe=_e.valuecache[be];qe===void 0&&(_e.values.push(se),qe=_e.values.length-1,_e.valuecache[be]=qe),G.writeVarint(qe)}}function Ae(_e,G){return(G<<3)+(7&_e)}function it(_e){return _e<<1^_e>>31}function Ge(_e,G){let W=_e.loadGeometry(),Y=_e.type,se=0,me=0;for(let be of W){let qe=1;Y===1&&(qe=be.length),G.writeVarint(Ae(1,qe));let we=Y===3?be.length-1:be.length;for(let ke=0;ke<we;ke++){ke===1&&Y!==1&&G.writeVarint(Ae(2,we-1));let Be=be[ke].x-se,Le=be[ke].y-me;G.writeVarint(it(Be)),G.writeVarint(it(Le)),se+=Be,me+=Le}_e.type===3&&G.writeVarint(Ae(7,1))}}function nt(_e,G){let W=typeof _e;W==="string"?G.writeStringField(1,_e):W==="boolean"?G.writeBooleanField(7,_e):W==="number"&&(_e%1!=0?G.writeDoubleField(3,_e):_e<0?G.writeSVarintField(6,_e):G.writeVarintField(5,_e))}let dt={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:_e=>_e},gt=Math.fround||(Mr=new Float32Array(1),_e=>(Mr[0]=+_e,Mr[0]));var Mr;class qn{constructor(G){this.options=Object.assign(Object.create(dt),G),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(G){let{log:W,minZoom:Y,maxZoom:se}=this.options;W&&console.time("total time");let me=`prepare ${G.length} points`;W&&console.time(me),this.points=G;let be=[];for(let we=0;we<G.length;we++){let ke=G[we];if(!ke.geometry)continue;let[Be,Le]=ke.geometry.coordinates,st=gt(Hi(Be)),Se=gt(Da(Le));be.push(st,Se,1/0,we,-1,1),this.options.reduce&&be.push(0)}let qe=this.trees[se+1]=this._createTree(be);W&&console.timeEnd(me);for(let we=se;we>=Y;we--){let ke=+Date.now();qe=this.trees[we]=this._createTree(this._cluster(qe,we)),W&&console.log("z%d: %d clusters in %dms",we,qe.numItems,+Date.now()-ke)}return W&&console.timeEnd("total time"),this}getClusters(G,W){let Y=((G[0]+180)%360+360)%360-180,se=Math.max(-90,Math.min(90,G[1])),me=G[2]===180?180:((G[2]+180)%360+360)%360-180,be=Math.max(-90,Math.min(90,G[3]));if(G[2]-G[0]>=360)Y=-180,me=180;else if(Y>me){let Le=this.getClusters([Y,se,180,be],W),st=this.getClusters([-180,se,me,be],W);return Le.concat(st)}let qe=this.trees[this._limitZoom(W)],we=qe.range(Hi(Y),Da(be),Hi(me),Da(se)),ke=qe.data,Be=[];for(let Le of we){let st=this.stride*Le;Be.push(ke[st+5]>1?ka(ke,st,this.clusterProps):this.points[ke[st+3]])}return Be}getChildren(G){let W=this._getOriginId(G),Y=this._getOriginZoom(G),se="No cluster with the specified id.",me=this.trees[Y];if(!me)throw new Error(se);let be=me.data;if(W*this.stride>=be.length)throw new Error(se);let qe=this.options.radius/(this.options.extent*Math.pow(2,Y-1)),we=me.within(be[W*this.stride],be[W*this.stride+1],qe),ke=[];for(let Be of we){let Le=Be*this.stride;be[Le+4]===G&&ke.push(be[Le+5]>1?ka(be,Le,this.clusterProps):this.points[be[Le+3]])}if(ke.length===0)throw new Error(se);return ke}getLeaves(G,W,Y){let se=[];return this._appendLeaves(se,G,W=W||10,Y=Y||0,0),se}getTile(G,W,Y){let se=this.trees[this._limitZoom(G)],me=Math.pow(2,G),{extent:be,radius:qe}=this.options,we=qe/be,ke=(Y-we)/me,Be=(Y+1+we)/me,Le={features:[]};return this._addTileFeatures(se.range((W-we)/me,ke,(W+1+we)/me,Be),se.data,W,Y,me,Le),W===0&&this._addTileFeatures(se.range(1-we/me,ke,1,Be),se.data,me,Y,me,Le),W===me-1&&this._addTileFeatures(se.range(0,ke,we/me,Be),se.data,-1,Y,me,Le),Le.features.length?Le:null}getClusterExpansionZoom(G){let W=this._getOriginZoom(G)-1;for(;W<=this.options.maxZoom;){let Y=this.getChildren(G);if(W++,Y.length!==1)break;G=Y[0].properties.cluster_id}return W}_appendLeaves(G,W,Y,se,me){let be=this.getChildren(W);for(let qe of be){let we=qe.properties;if(we&&we.cluster?me+we.point_count<=se?me+=we.point_count:me=this._appendLeaves(G,we.cluster_id,Y,se,me):me<se?me++:G.push(qe),G.length===Y)break}return me}_createTree(G){let W=new c.aI(G.length/this.stride|0,this.options.nodeSize,Float32Array);for(let Y=0;Y<G.length;Y+=this.stride)W.add(G[Y],G[Y+1]);return W.finish(),W.data=G,W}_addTileFeatures(G,W,Y,se,me,be){for(let qe of G){let we=qe*this.stride,ke=W[we+5]>1,Be,Le,st;if(ke)Be=Pn(W,we,this.clusterProps),Le=W[we],st=W[we+1];else{let Lt=this.points[W[we+3]];Be=Lt.properties;let[ct,qt]=Lt.geometry.coordinates;Le=Hi(ct),st=Da(qt)}let Se={type:1,geometry:[[Math.round(this.options.extent*(Le*me-Y)),Math.round(this.options.extent*(st*me-se))]],tags:Be},Tt;Tt=ke||this.options.generateId?W[we+3]:this.points[W[we+3]].id,Tt!==void 0&&(Se.id=Tt),be.features.push(Se)}}_limitZoom(G){return Math.max(this.options.minZoom,Math.min(Math.floor(+G),this.options.maxZoom+1))}_cluster(G,W){let{radius:Y,extent:se,reduce:me,minPoints:be}=this.options,qe=Y/(se*Math.pow(2,W)),we=G.data,ke=[],Be=this.stride;for(let Le=0;Le<we.length;Le+=Be){if(we[Le+2]<=W)continue;we[Le+2]=W;let st=we[Le],Se=we[Le+1],Tt=G.within(we[Le],we[Le+1],qe),Lt=we[Le+5],ct=Lt;for(let qt of Tt){let hr=qt*Be;we[hr+2]>W&&(ct+=we[hr+5])}if(ct>Lt&&ct>=be){let qt,hr=st*Lt,si=Se*Lt,li=-1,jr=(Le/Be<<5)+(W+1)+this.points.length;for(let jt of Tt){let Zt=jt*Be;if(we[Zt+2]<=W)continue;we[Zt+2]=W;let Gr=we[Zt+5];hr+=we[Zt]*Gr,si+=we[Zt+1]*Gr,we[Zt+4]=jr,me&&(qt||(qt=this._map(we,Le,!0),li=this.clusterProps.length,this.clusterProps.push(qt)),me(qt,this._map(we,Zt)))}we[Le+4]=jr,ke.push(hr/ct,si/ct,1/0,jr,-1,ct),me&&ke.push(li)}else{for(let qt=0;qt<Be;qt++)ke.push(we[Le+qt]);if(ct>1)for(let qt of Tt){let hr=qt*Be;if(!(we[hr+2]<=W)){we[hr+2]=W;for(let si=0;si<Be;si++)ke.push(we[hr+si])}}}}return ke}_getOriginId(G){return G-this.points.length>>5}_getOriginZoom(G){return(G-this.points.length)%32}_map(G,W,Y){if(G[W+5]>1){let be=this.clusterProps[G[W+6]];return Y?Object.assign({},be):be}let se=this.points[G[W+3]].properties,me=this.options.map(se);return Y&&me===se?Object.assign({},me):me}}function ka(_e,G,W){return{type:"Feature",id:_e[G+3],properties:Pn(_e,G,W),geometry:{type:"Point",coordinates:[(Y=_e[G],360*(Y-.5)),Ki(_e[G+1])]}};var Y}function Pn(_e,G,W){let Y=_e[G+5],se=Y>=1e4?`${Math.round(Y/1e3)}k`:Y>=1e3?Math.round(Y/100)/10+"k":Y,me=_e[G+6],be=me===-1?{}:Object.assign({},W[me]);return Object.assign(be,{cluster:!0,cluster_id:_e[G+3],point_count:Y,point_count_abbreviated:se})}function Hi(_e){return _e/360+.5}function Da(_e){let G=Math.sin(_e*Math.PI/180),W=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return W<0?0:W>1?1:W}function Ki(_e){let G=(180-360*_e)*Math.PI/180;return 360*Math.atan(Math.exp(G))/Math.PI-90}function Jt(_e,G,W,Y){let se=Y,me=G+(W-G>>1),be,qe=W-G,we=_e[G],ke=_e[G+1],Be=_e[W],Le=_e[W+1];for(let st=G+3;st<W;st+=3){let Se=zi(_e[st],_e[st+1],we,ke,Be,Le);if(Se>se)be=st,se=Se;else if(Se===se){let Tt=Math.abs(st-me);Tt<qe&&(be=st,qe=Tt)}}se>Y&&(be-G>3&&Jt(_e,G,be,Y),_e[be+2]=se,W-be>3&&Jt(_e,be,W,Y))}function zi(_e,G,W,Y,se,me){let be=se-W,qe=me-Y;if(be!==0||qe!==0){let we=((_e-W)*be+(G-Y)*qe)/(be*be+qe*qe);we>1?(W=se,Y=me):we>0&&(W+=be*we,Y+=qe*we)}return be=_e-W,qe=G-Y,be*be+qe*qe}function ni(_e,G,W,Y){let se={id:_e==null?null:_e,type:G,geometry:W,tags:Y,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(G==="Point"||G==="MultiPoint"||G==="LineString")fo(se,W);else if(G==="Polygon")fo(se,W[0]);else if(G==="MultiLineString")for(let me of W)fo(se,me);else if(G==="MultiPolygon")for(let me of W)fo(se,me[0]);return se}function fo(_e,G){for(let W=0;W<G.length;W+=3)_e.minX=Math.min(_e.minX,G[W]),_e.minY=Math.min(_e.minY,G[W+1]),_e.maxX=Math.max(_e.maxX,G[W]),_e.maxY=Math.max(_e.maxY,G[W+1])}function ai(_e,G,W,Y){if(!G.geometry)return;let se=G.geometry.coordinates;if(se&&se.length===0)return;let me=G.geometry.type,be=Math.pow(W.tolerance/((1<<W.maxZoom)*W.extent),2),qe=[],we=G.id;if(W.promoteId?we=G.properties[W.promoteId]:W.generateId&&(we=Y||0),me==="Point")Xi(se,qe);else if(me==="MultiPoint")for(let ke of se)Xi(ke,qe);else if(me==="LineString")ha(se,qe,be,!1);else if(me==="MultiLineString"){if(W.lineMetrics){for(let ke of se)qe=[],ha(ke,qe,be,!1),_e.push(ni(we,"LineString",qe,G.properties));return}oi(se,qe,be,!1)}else if(me==="Polygon")oi(se,qe,be,!0);else{if(me!=="MultiPolygon"){if(me==="GeometryCollection"){for(let ke of G.geometry.geometries)ai(_e,{id:we,geometry:ke,properties:G.properties},W,Y);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let ke of se){let Be=[];oi(ke,Be,be,!0),qe.push(Be)}}_e.push(ni(we,me,qe,G.properties))}function Xi(_e,G){G.push(po(_e[0]),Vn(_e[1]),0)}function ha(_e,G,W,Y){let se,me,be=0;for(let we=0;we<_e.length;we++){let ke=po(_e[we][0]),Be=Vn(_e[we][1]);G.push(ke,Be,0),we>0&&(be+=Y?(se*Be-ke*me)/2:Math.sqrt(Math.pow(ke-se,2)+Math.pow(Be-me,2))),se=ke,me=Be}let qe=G.length-3;G[2]=1,Jt(G,0,qe,W),G[qe+2]=1,G.size=Math.abs(be),G.start=0,G.end=G.size}function oi(_e,G,W,Y){for(let se=0;se<_e.length;se++){let me=[];ha(_e[se],me,W,Y),G.push(me)}}function po(_e){return _e/360+.5}function Vn(_e){let G=Math.sin(_e*Math.PI/180),W=.5-.25*Math.log((1+G)/(1-G))/Math.PI;return W<0?0:W>1?1:W}function da(_e,G,W,Y,se,me,be,qe){if(Y/=G,me>=(W/=G)&&be<Y)return _e;if(be<W||me>=Y)return null;let we=[];for(let ke of _e){let Be=ke.geometry,Le=ke.type,st=se===0?ke.minX:ke.minY,Se=se===0?ke.maxX:ke.maxY;if(st>=W&&Se<Y){we.push(ke);continue}if(Se<W||st>=Y)continue;let Tt=[];if(Le==="Point"||Le==="MultiPoint")Al(Be,Tt,W,Y,se);else if(Le==="LineString")Cl(Be,Tt,W,Y,se,!1,qe.lineMetrics);else if(Le==="MultiLineString")Rr(Be,Tt,W,Y,se,!1);else if(Le==="Polygon")Rr(Be,Tt,W,Y,se,!0);else if(Le==="MultiPolygon")for(let Lt of Be){let ct=[];Rr(Lt,ct,W,Y,se,!0),ct.length&&Tt.push(ct)}if(Tt.length){if(qe.lineMetrics&&Le==="LineString"){for(let Lt of Tt)we.push(ni(ke.id,Le,Lt,ke.tags));continue}Le!=="LineString"&&Le!=="MultiLineString"||(Tt.length===1?(Le="LineString",Tt=Tt[0]):Le="MultiLineString"),Le!=="Point"&&Le!=="MultiPoint"||(Le=Tt.length===3?"Point":"MultiPoint"),we.push(ni(ke.id,Le,Tt,ke.tags))}}return we.length?we:null}function Al(_e,G,W,Y,se){for(let me=0;me<_e.length;me+=3){let be=_e[me+se];be>=W&&be<=Y&&Br(G,_e[me],_e[me+1],_e[me+2])}}function Cl(_e,G,W,Y,se,me,be){let qe=An(_e),we=se===0?fa:La,ke,Be,Le=_e.start;for(let ct=0;ct<_e.length-3;ct+=3){let qt=_e[ct],hr=_e[ct+1],si=_e[ct+2],li=_e[ct+3],jr=_e[ct+4],jt=se===0?qt:hr,Zt=se===0?li:jr,Gr=!1;be&&(ke=Math.sqrt(Math.pow(qt-li,2)+Math.pow(hr-jr,2))),jt<W?Zt>W&&(Be=we(qe,qt,hr,li,jr,W),be&&(qe.start=Le+ke*Be)):jt>Y?Zt<Y&&(Be=we(qe,qt,hr,li,jr,Y),be&&(qe.start=Le+ke*Be)):Br(qe,qt,hr,si),Zt<W&&jt>=W&&(Be=we(qe,qt,hr,li,jr,W),Gr=!0),Zt>Y&&jt<=Y&&(Be=we(qe,qt,hr,li,jr,Y),Gr=!0),!me&&Gr&&(be&&(qe.end=Le+ke*Be),G.push(qe),qe=An(_e)),be&&(Le+=ke)}let st=_e.length-3,Se=_e[st],Tt=_e[st+1],Lt=se===0?Se:Tt;Lt>=W&&Lt<=Y&&Br(qe,Se,Tt,_e[st+2]),st=qe.length-3,me&&st>=3&&(qe[st]!==qe[0]||qe[st+1]!==qe[1])&&Br(qe,qe[0],qe[1],qe[2]),qe.length&&G.push(qe)}function An(_e){let G=[];return G.size=_e.size,G.start=_e.start,G.end=_e.end,G}function Rr(_e,G,W,Y,se,me){for(let be of _e)Cl(be,G,W,Y,se,me,!1)}function Br(_e,G,W,Y){_e.push(G,W,Y)}function fa(_e,G,W,Y,se,me){let be=(me-G)/(Y-G);return Br(_e,me,W+(se-W)*be,1),be}function La(_e,G,W,Y,se,me){let be=(me-W)/(se-W);return Br(_e,G+(Y-G)*be,me,1),be}function ks(_e,G){let W=[];for(let Y=0;Y<_e.length;Y++){let se=_e[Y],me=se.type,be;if(me==="Point"||me==="MultiPoint"||me==="LineString")be=za(se.geometry,G);else if(me==="MultiLineString"||me==="Polygon"){be=[];for(let qe of se.geometry)be.push(za(qe,G))}else if(me==="MultiPolygon"){be=[];for(let qe of se.geometry){let we=[];for(let ke of qe)we.push(za(ke,G));be.push(we)}}W.push(ni(se.id,me,be,se.tags))}return W}function za(_e,G){let W=[];W.size=_e.size,_e.start!==void 0&&(W.start=_e.start,W.end=_e.end);for(let Y=0;Y<_e.length;Y+=3)W.push(_e[Y]+G,_e[Y+1],_e[Y+2]);return W}function Fa(_e,G){if(_e.transformed)return _e;let W=1<<_e.z,Y=_e.x,se=_e.y;for(let me of _e.features){let be=me.geometry,qe=me.type;if(me.geometry=[],qe===1)for(let we=0;we<be.length;we+=2)me.geometry.push(Ml(be[we],be[we+1],G,W,Y,se));else for(let we=0;we<be.length;we++){let ke=[];for(let Be=0;Be<be[we].length;Be+=2)ke.push(Ml(be[we][Be],be[we][Be+1],G,W,Y,se));me.geometry.push(ke)}}return _e.transformed=!0,_e}function Ml(_e,G,W,Y,se,me){return[Math.round(W*(_e*Y-se)),Math.round(W*(G*Y-me))]}function $o(_e,G,W,Y,se){let me=G===se.maxZoom?0:se.tolerance/((1<<G)*se.extent),be={features:[],numPoints:0,numSimplified:0,numFeatures:_e.length,source:null,x:W,y:Y,z:G,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let qe of _e)Vo(be,qe,me,se);return be}function Vo(_e,G,W,Y){let se=G.geometry,me=G.type,be=[];if(_e.minX=Math.min(_e.minX,G.minX),_e.minY=Math.min(_e.minY,G.minY),_e.maxX=Math.max(_e.maxX,G.maxX),_e.maxY=Math.max(_e.maxY,G.maxY),me==="Point"||me==="MultiPoint")for(let qe=0;qe<se.length;qe+=3)be.push(se[qe],se[qe+1]),_e.numPoints++,_e.numSimplified++;else if(me==="LineString")Go(be,se,_e,W,!1,!1);else if(me==="MultiLineString"||me==="Polygon")for(let qe=0;qe<se.length;qe++)Go(be,se[qe],_e,W,me==="Polygon",qe===0);else if(me==="MultiPolygon")for(let qe=0;qe<se.length;qe++){let we=se[qe];for(let ke=0;ke<we.length;ke++)Go(be,we[ke],_e,W,!0,ke===0)}if(be.length){let qe=G.tags||null;if(me==="LineString"&&Y.lineMetrics){qe={};for(let ke in G.tags)qe[ke]=G.tags[ke];qe.mapbox_clip_start=se.start/se.size,qe.mapbox_clip_end=se.end/se.size}let we={geometry:be,type:me==="Polygon"||me==="MultiPolygon"?3:me==="LineString"||me==="MultiLineString"?2:1,tags:qe};G.id!==null&&(we.id=G.id),_e.features.push(we)}}function Go(_e,G,W,Y,se,me){let be=Y*Y;if(Y>0&&G.size<(se?be:Y))return void(W.numPoints+=G.length/3);let qe=[];for(let we=0;we<G.length;we+=3)(Y===0||G[we+2]>be)&&(W.numSimplified++,qe.push(G[we],G[we+1])),W.numPoints++;se&&function(we,ke){let Be=0;for(let Le=0,st=we.length,Se=st-2;Le<st;Se=Le,Le+=2)Be+=(we[Le]-we[Se])*(we[Le+1]+we[Se+1]);if(Be>0===ke)for(let Le=0,st=we.length;Le<st/2;Le+=2){let Se=we[Le],Tt=we[Le+1];we[Le]=we[st-2-Le],we[Le+1]=we[st-1-Le],we[st-2-Le]=Se,we[st-1-Le]=Tt}}(qe,me),_e.push(qe)}let Ds={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Zo{constructor(G,W){let Y=(W=this.options=function(me,be){for(let qe in be)me[qe]=be[qe];return me}(Object.create(Ds),W)).debug;if(Y&&console.time("preprocess data"),W.maxZoom<0||W.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(W.promoteId&&W.generateId)throw new Error("promoteId and generateId cannot be used together.");let se=function(me,be){let qe=[];if(me.type==="FeatureCollection")for(let we=0;we<me.features.length;we++)ai(qe,me.features[we],be,we);else ai(qe,me.type==="Feature"?me:{geometry:me},be);return qe}(G,W);this.tiles={},this.tileCoords=[],Y&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",W.indexMaxZoom,W.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),se=function(me,be){let qe=be.buffer/be.extent,we=me,ke=da(me,1,-1-qe,qe,0,-1,2,be),Be=da(me,1,1-qe,2+qe,0,-1,2,be);return(ke||Be)&&(we=da(me,1,-qe,1+qe,0,-1,2,be)||[],ke&&(we=ks(ke,1).concat(we)),Be&&(we=we.concat(ks(Be,-1)))),we}(se,W),se.length&&this.splitTile(se,0,0,0),Y&&(se.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(G,W,Y,se,me,be,qe){let we=[G,W,Y,se],ke=this.options,Be=ke.debug;for(;we.length;){se=we.pop(),Y=we.pop(),W=we.pop(),G=we.pop();let Le=1<<W,st=Wo(W,Y,se),Se=this.tiles[st];if(!Se&&(Be>1&&console.time("creation"),Se=this.tiles[st]=$o(G,W,Y,se,ke),this.tileCoords.push({z:W,x:Y,y:se}),Be)){Be>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",W,Y,se,Se.numFeatures,Se.numPoints,Se.numSimplified),console.timeEnd("creation"));let Gr=`z${W}`;this.stats[Gr]=(this.stats[Gr]||0)+1,this.total++}if(Se.source=G,me==null){if(W===ke.indexMaxZoom||Se.numPoints<=ke.indexMaxPoints)continue}else{if(W===ke.maxZoom||W===me)continue;if(me!=null){let Gr=me-W;if(Y!==be>>Gr||se!==qe>>Gr)continue}}if(Se.source=null,G.length===0)continue;Be>1&&console.time("clipping");let Tt=.5*ke.buffer/ke.extent,Lt=.5-Tt,ct=.5+Tt,qt=1+Tt,hr=null,si=null,li=null,jr=null,jt=da(G,Le,Y-Tt,Y+ct,0,Se.minX,Se.maxX,ke),Zt=da(G,Le,Y+Lt,Y+qt,0,Se.minX,Se.maxX,ke);G=null,jt&&(hr=da(jt,Le,se-Tt,se+ct,1,Se.minY,Se.maxY,ke),si=da(jt,Le,se+Lt,se+qt,1,Se.minY,Se.maxY,ke),jt=null),Zt&&(li=da(Zt,Le,se-Tt,se+ct,1,Se.minY,Se.maxY,ke),jr=da(Zt,Le,se+Lt,se+qt,1,Se.minY,Se.maxY,ke),Zt=null),Be>1&&console.timeEnd("clipping"),we.push(hr||[],W+1,2*Y,2*se),we.push(si||[],W+1,2*Y,2*se+1),we.push(li||[],W+1,2*Y+1,2*se),we.push(jr||[],W+1,2*Y+1,2*se+1)}}getTile(G,W,Y){G=+G,W=+W,Y=+Y;let se=this.options,{extent:me,debug:be}=se;if(G<0||G>24)return null;let qe=1<<G,we=Wo(G,W=W+qe&qe-1,Y);if(this.tiles[we])return Fa(this.tiles[we],me);be>1&&console.log("drilling down to z%d-%d-%d",G,W,Y);let ke,Be=G,Le=W,st=Y;for(;!ke&&Be>0;)Be--,Le>>=1,st>>=1,ke=this.tiles[Wo(Be,Le,st)];return ke&&ke.source?(be>1&&(console.log("found parent tile z%d-%d-%d",Be,Le,st),console.time("drilling down")),this.splitTile(ke.source,Be,Le,st,G,W,Y),be>1&&console.timeEnd("drilling down"),this.tiles[we]?Fa(this.tiles[we],me):null):null}}function Wo(_e,G,W){return 32*((1<<_e)*W+G)+_e}class Ho extends R{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(G,W){return c._(this,void 0,void 0,function*(){let Y=G.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let se=this._geoJSONIndex.getTile(Y.z,Y.x,Y.y);if(!se)return null;let me=new X(se.features,{version:2,extent:c.$}),be=function(qe){let we=new c.cM;return function(ke,Be){for(let Le in ke.layers)Be.writeMessage(3,ee,ke.layers[Le])}(qe,we),we.finish()}(me);return be.byteOffset===0&&be.byteLength===be.buffer.byteLength||(be=new Uint8Array(be)),{vectorTile:me,rawData:be.buffer}})}loadData(G){return c._(this,void 0,void 0,function*(){var W;(W=this._pendingRequest)===null||W===void 0||W.abort();let Y=!!(G&&G.request&&G.request.collectResourceTiming)&&new c.cN(G.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(G,this._pendingRequest);let se=yield this._pendingData;this._geoJSONIndex=G.cluster?new qn(function({superclusterOptions:be,clusterProperties:qe}){if(!qe||!be)return be;let we={},ke={},Be={accumulated:null,zoom:0},Le={properties:null},st=Object.keys(qe);for(let Se of st){let[Tt,Lt]=qe[Se],ct=c.cT(Lt),qt=c.cT(typeof Tt=="string"?[Tt,["accumulated"],["get",Se]]:Tt);we[Se]=ct.value,ke[Se]=qt.value}return be.map=Se=>{Le.properties=Se;let Tt={};for(let Lt of st)Tt[Lt]=we[Lt].evaluate(Be,Le);return Tt},be.reduce=(Se,Tt)=>{Le.properties=Tt;for(let Lt of st)Be.accumulated=Se[Lt],Se[Lt]=ke[Lt].evaluate(Be,Le)},be}(G)).load(se.features):function(be,qe){return new Zo(be,qe)}(se,G.geojsonVtOptions),this.loaded={};let me={data:se};if(Y){let be=Y.finish();be&&(me.resourceTiming={},me.resourceTiming[G.source]=JSON.parse(JSON.stringify(be)))}return me}catch(se){if(delete this._pendingRequest,c.cy(se))return{abandoned:!0};throw se}})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(G){let W=this.loaded;return W&&W[G.uid]?super.reloadTile(G):this.loadTile(G)}loadAndProcessGeoJSON(G,W){return c._(this,void 0,void 0,function*(){let Y=yield this.loadGeoJSON(G,W);if(delete this._pendingRequest,typeof Y!="object")throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(de(Y,!0),G.filter){let se=c.cT(G.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(se.result==="error")throw new Error(se.value.map(be=>`${be.key}: ${be.message}`).join(", "));Y={type:"FeatureCollection",features:Y.features.filter(be=>se.value.evaluate({zoom:0},be))}}return Y})}loadGeoJSON(G,W){return c._(this,void 0,void 0,function*(){let{promoteId:Y}=G;if(G.request){let se=yield c.j(G.request,W);return this._dataUpdateable=c.cV(se.data,Y)?c.cU(se.data,Y):void 0,se.data}if(typeof G.data=="string")try{let se=JSON.parse(G.data);return this._dataUpdateable=c.cV(se,Y)?c.cU(se,Y):void 0,se}catch(se){throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`)}if(!G.dataDiff)throw new Error(`Input data given to '${G.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${G.source}`);return c.cW(this._dataUpdateable,G.dataDiff,Y),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(G){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(G){return this._geoJSONIndex.getClusterExpansionZoom(G.clusterId)}getClusterChildren(G){return this._geoJSONIndex.getChildren(G.clusterId)}getClusterLeaves(G){return this._geoJSONIndex.getLeaves(G.clusterId,G.limit,G.offset)}}class Rl{constructor(G){this.self=G,this.actor=new c.J(G),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(W,Y)=>{if(this.externalWorkerSourceTypes[W])throw new Error(`Worker source with name "${W}" already registered.`);this.externalWorkerSourceTypes[W]=Y},this.self.addProtocol=c.cA,this.self.removeProtocol=c.cB,this.self.registerRTLTextPlugin=W=>{c.cX.setMethods(W)},this.actor.registerMessageHandler("LDT",(W,Y)=>this._getDEMWorkerSource(W,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RDT",(W,Y)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(W,Y.source).removeTile(Y)})),this.actor.registerMessageHandler("GCEZ",(W,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Y.type,Y.source).getClusterExpansionZoom(Y)})),this.actor.registerMessageHandler("GCC",(W,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Y.type,Y.source).getClusterChildren(Y)})),this.actor.registerMessageHandler("GCL",(W,Y)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(W,Y.type,Y.source).getClusterLeaves(Y)})),this.actor.registerMessageHandler("LD",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).loadData(Y)),this.actor.registerMessageHandler("GD",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).getData()),this.actor.registerMessageHandler("LT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).loadTile(Y)),this.actor.registerMessageHandler("RT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).reloadTile(Y)),this.actor.registerMessageHandler("AT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).abortTile(Y)),this.actor.registerMessageHandler("RMT",(W,Y)=>this._getWorkerSource(W,Y.type,Y.source).removeTile(Y)),this.actor.registerMessageHandler("RS",(W,Y)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[W]||!this.workerSources[W][Y.type]||!this.workerSources[W][Y.type][Y.source])return;let se=this.workerSources[W][Y.type][Y.source];delete this.workerSources[W][Y.type][Y.source],se.removeSource!==void 0&&se.removeSource(Y)})),this.actor.registerMessageHandler("RM",W=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[W],delete this.availableImages[W],delete this.workerSources[W],delete this.demWorkerSources[W]})),this.actor.registerMessageHandler("SR",(W,Y)=>c._(this,void 0,void 0,function*(){this.referrer=Y})),this.actor.registerMessageHandler("SRPS",(W,Y)=>this._syncRTLPluginState(W,Y)),this.actor.registerMessageHandler("IS",(W,Y)=>c._(this,void 0,void 0,function*(){this.self.importScripts(Y)})),this.actor.registerMessageHandler("SI",(W,Y)=>this._setImages(W,Y)),this.actor.registerMessageHandler("UL",(W,Y)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(W).update(Y.layers,Y.removedIds)})),this.actor.registerMessageHandler("SL",(W,Y)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(W).replace(Y)}))}_setImages(G,W){return c._(this,void 0,void 0,function*(){this.availableImages[G]=W;for(let Y in this.workerSources[G]){let se=this.workerSources[G][Y];for(let me in se)se[me].availableImages=W}})}_syncRTLPluginState(G,W){return c._(this,void 0,void 0,function*(){return yield c.cX.syncState(W,this.self.importScripts)})}_getAvailableImages(G){let W=this.availableImages[G];return W||(W=[]),W}_getLayerIndex(G){let W=this.layerIndexes[G];return W||(W=this.layerIndexes[G]=new a),W}_getWorkerSource(G,W,Y){if(this.workerSources[G]||(this.workerSources[G]={}),this.workerSources[G][W]||(this.workerSources[G][W]={}),!this.workerSources[G][W][Y]){let se={sendAsync:(me,be)=>(me.targetMapId=G,this.actor.sendAsync(me,be))};switch(W){case"vector":this.workerSources[G][W][Y]=new R(se,this._getLayerIndex(G),this._getAvailableImages(G));break;case"geojson":this.workerSources[G][W][Y]=new Ho(se,this._getLayerIndex(G),this._getAvailableImages(G));break;default:this.workerSources[G][W][Y]=new this.externalWorkerSourceTypes[W](se,this._getLayerIndex(G),this._getAvailableImages(G))}}return this.workerSources[G][W][Y]}_getDEMWorkerSource(G,W){return this.demWorkerSources[G]||(this.demWorkerSources[G]={}),this.demWorkerSources[G][W]||(this.demWorkerSources[G][W]=new D),this.demWorkerSources[G][W]}}return c.i(self)&&(self.worker=new Rl(self)),Rl}),n("index",["exports","./shared"],function(c,a){"use strict";var x="5.7.1";function S(){var g=new a.A(4);return a.A!=Float32Array&&(g[1]=0,g[2]=0),g[0]=1,g[3]=1,g}let A,R,D={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(g,r,l){let d=requestAnimationFrame(v=>{m(),r(v)}),{unsubscribe:m}=a.s(g.signal,"abort",()=>{m(),cancelAnimationFrame(d),l(a.c())},!1)},frameAsync(g){return new Promise((r,l)=>{this.frame(g,r,l)})},getImageData(g,r=0){return this.getImageCanvasContext(g).getImageData(-r,-r,g.width+2*r,g.height+2*r)},getImageCanvasContext(g){let r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=g.width,r.height=g.height,l.drawImage(g,0,0,g.width,g.height),l},resolveURL:g=>(A||(A=document.createElement("a")),A.href=g,A.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(R==null&&(R=matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}};class L{static testProp(r){if(!L.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in L.docStyle)return r[l];return r[0]}static create(r,l,d){let m=window.document.createElement(r);return l!==void 0&&(m.className=l),d&&d.appendChild(m),m}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){L.docStyle&&L.selectProp&&(L.userSelect=L.docStyle[L.selectProp],L.docStyle[L.selectProp]="none")}static enableDrag(){L.docStyle&&L.selectProp&&(L.docStyle[L.selectProp]=L.userSelect)}static setTransform(r,l){r.style[L.transformProp]=l}static addEventListener(r,l,d,m={}){r.addEventListener(l,d,"passive"in m?m:m.capture)}static removeEventListener(r,l,d,m={}){r.removeEventListener(l,d,"passive"in m?m:m.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",L.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",L.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",L.suppressClickInternal,!0)},0)}static getScale(r){let l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,d){let m=l.boundingClientRect;return new a.P((d.clientX-m.left)/l.x-r.clientLeft,(d.clientY-m.top)/l.y-r.clientTop)}static mousePos(r,l){let d=L.getScale(r);return L.getPoint(r,d,l)}static touchPos(r,l){let d=[],m=L.getScale(r);for(let v=0;v<l.length;v++)d.push(L.getPoint(r,m,l[v]));return d}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){let l=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),d=l.querySelectorAll("script");for(let m of d)m.remove();return L.clean(l),l.innerHTML}static isPossiblyDangerous(r,l){let d=l.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!d.includes("javascript:")&&!d.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){let l=r.children;for(let d of l)L.removeAttributes(d),L.clean(d)}static removeAttributes(r){for(let{name:l,value:d}of r.attributes)L.isPossiblyDangerous(l,d)&&r.removeAttribute(l)}}L.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,L.selectProp=L.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),L.transformProp=L.testProp(["transform","WebkitTransform"]);let H={supported:!1,testSupport:function(g){!ve&&de&&(X?ee(g):ce=g)}},ce,de,ve=!1,X=!1;function ee(g){let r=g.createTexture();g.bindTexture(g.TEXTURE_2D,r);try{if(g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,de),g.isContextLost())return;H.supported=!0}catch(l){}g.deleteTexture(r),ve=!0}var oe;typeof document!="undefined"&&(de=document.createElement("img"),de.onload=()=>{ce&&ee(ce),ce=null,X=!0},de.onerror=()=>{ve=!0,ce=null},de.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(g){let r,l,d,m;g.resetRequestQueue=()=>{r=[],l=0,d=0,m={}},g.addThrottleControl=q=>{let O=d++;return m[O]=q,O},g.removeThrottleControl=q=>{delete m[q],b()},g.getImage=(q,O,k=!0)=>new Promise((N,F)=>{H.supported&&(q.headers||(q.headers={}),q.headers.accept="image/webp,*/*"),a.e(q,{type:"image"}),r.push({abortController:O,requestParameters:q,supportImageRefresh:k,state:"queued",onError:j=>{F(j)},onSuccess:j=>{N(j)}}),b()});let v=q=>a._(this,void 0,void 0,function*(){q.state="running";let{requestParameters:O,supportImageRefresh:k,onError:N,onSuccess:F,abortController:j}=q,V=k===!1&&!a.i(self)&&!a.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((re,ne)=>re&&ne==="accept",!0));l++;let te=V?E(O,j):a.m(O,j);try{let re=yield te;delete q.abortController,q.state="completed",re.data instanceof HTMLImageElement||a.b(re.data)?F(re):re.data&&F({data:yield(Q=re.data,typeof createImageBitmap=="function"?a.f(Q):a.h(Q)),cacheControl:re.cacheControl,expires:re.expires})}catch(re){delete q.abortController,N(re)}finally{l--,b()}var Q}),b=()=>{let q=(()=>{for(let O of Object.keys(m))if(m[O]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=l;O<q&&r.length>0;O++){let k=r.shift();k.abortController.signal.aborted?O--:v(k)}},E=(q,O)=>new Promise((k,N)=>{let F=new Image,j=q.url,V=q.credentials;V&&V==="include"?F.crossOrigin="use-credentials":(V&&V==="same-origin"||!a.d(j))&&(F.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{F.src="",N(a.c())}),F.fetchPriority="high",F.onload=()=>{F.onerror=F.onload=null,k({data:F})},F.onerror=()=>{F.onerror=F.onload=null,O.signal.aborted||N(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},F.src=j})}(oe||(oe={})),oe.resetRequestQueue();class Te{constructor(r){this._transformRequestFn=r!=null?r:null}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Ae(g){let r=[];if(typeof g=="string")r.push({id:"default",url:g});else if(g&&g.length>0){let l=[];for(let{id:d,url:m}of g){let v=`${d}${m}`;l.indexOf(v)===-1&&(l.push(v),r.push({id:d,url:m}))}}return r}function it(g,r,l){try{let d=new URL(g);return d.pathname+=`${r}${l}`,d.toString()}catch(d){throw new Error(`Invalid sprite URL "${g}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function Ge(g){let{userImage:r}=g;return!!(r&&r.render&&r.render())&&(g.data.replace(new Uint8Array(r.data.buffer)),!0)}class nt extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:l,promiseResolve:d}of this.requestors)d(this._getImagesForIds(l));this.requestors=[]}}getImage(r){let l=this.images[r];if(l&&!l.data&&l.spriteData){let d=l.spriteData;l.data=new a.R({width:d.width,height:d.height},d.context.getImageData(d.x,d.y,d.width,d.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let d=!0,m=l.data||l.spriteData;return this._validateStretch(l.stretchX,m&&m.width)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchX" value`))),d=!1),this._validateStretch(l.stretchY,m&&m.height)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchY" value`))),d=!1),this._validateContent(l.content,l)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "content" value`))),d=!1),d}_validateStretch(r,l){if(!r)return!0;let d=0;for(let m of r){if(m[0]<d||m[1]<m[0]||l<m[1])return!1;d=m[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;let d=l.spriteData,m=d&&d.width||l.data.width,v=d&&d.height||l.data.height;return!(r[0]<0||m<r[0]||r[1]<0||v<r[1]||r[2]<0||m<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,d=!0){let m=this.getImage(r);if(d&&(m.data.width!==l.data.width||m.data.height!==l.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=m.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){let l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,d)=>{let m=!0;if(!this.isLoaded())for(let v of r)this.images[v]||(m=!1);this.isLoaded()||m?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){let l={};for(let d of r){let m=this.getImage(d);m||(this.fire(new a.l("styleimagemissing",{id:d})),m=this.getImage(d)),m?l[d]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:a.w(`Image "${d}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){let{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){let l=this.patterns[r],d=this.getImage(r);if(!d)return null;if(l&&l.position.version===d.version)return l.position;if(l)l.position.version=d.version;else{let m={w:d.data.width+2,h:d.data.height+2,x:0,y:0},v=new a.I(m,d);this.patterns[r]={bin:m,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){let l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.T(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){let r=[];for(let v in this.patterns)r.push(this.patterns[v].bin);let{w:l,h:d}=a.p(r),m=this.atlasImage;m.resize({width:l||1,height:d||1});for(let v in this.patterns){let{bin:b}=this.patterns[v],E=b.x+1,q=b.y+1,O=this.getImage(v).data,k=O.width,N=O.height;a.R.copy(O,m,{x:0,y:0},{x:E,y:q},{width:k,height:N}),a.R.copy(O,m,{x:0,y:N-1},{x:E,y:q-1},{width:k,height:1}),a.R.copy(O,m,{x:0,y:0},{x:E,y:q+N},{width:k,height:1}),a.R.copy(O,m,{x:k-1,y:0},{x:E-1,y:q},{width:1,height:N}),a.R.copy(O,m,{x:0,y:0},{x:E+k,y:q},{width:1,height:N})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;let d=this.getImage(l);d||a.w(`Image with ID: "${l}" was not found`),Ge(d)&&this.updateImage(l,d)}}}let dt=1e20;function gt(g,r,l,d,m,v,b,E,q){for(let O=r;O<r+d;O++)Mr(g,l*v+O,v,m,b,E,q);for(let O=l;O<l+m;O++)Mr(g,O*v+r,1,d,b,E,q)}function Mr(g,r,l,d,m,v,b){v[0]=0,b[0]=-dt,b[1]=dt,m[0]=g[r];for(let E=1,q=0,O=0;E<d;E++){m[E]=g[r+E*l];let k=E*E;do{let N=v[q];O=(m[E]-m[N]+k-N*N)/(E-N)/2}while(O<=b[q]&&--q>-1);q++,v[q]=E,b[q]=O,b[q+1]=dt}for(let E=0,q=0;E<d;E++){for(;b[q+1]<E;)q++;let O=v[q],k=E-O;g[r+E*l]=m[O]+k*k}}class qn{constructor(r,l,d){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={},this.lang=d}setURL(r){this.url=r}getGlyphs(r){return a._(this,void 0,void 0,function*(){let l=[];for(let v in r)for(let b of r[v])l.push(this._getAndCacheGlyphsPromise(v,b));let d=yield Promise.all(l),m={};for(let{stack:v,id:b,glyph:E}of d)m[v]||(m[v]={}),m[v][b]=E&&{id:E.id,bitmap:E.bitmap.clone(),metrics:E.metrics};return m})}_getAndCacheGlyphsPromise(r,l){return a._(this,void 0,void 0,function*(){let d=this.entries[r];d||(d=this.entries[r]={glyphs:{},requests:{},ranges:{}});let m=d.glyphs[l];if(m!==void 0)return{stack:r,id:l,glyph:m};if(m=this._tinySDF(d,r,l),m)return d.glyphs[l]=m,{stack:r,id:l,glyph:m};let v=Math.floor(l/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(d.ranges[v])return{stack:r,id:l,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!d.requests[v]){let E=qn.loadGlyphRange(r,v,this.url,this.requestManager);d.requests[v]=E}let b=yield d.requests[v];for(let E in b)this._doesCharSupportLocalGlyph(+E)||(d.glyphs[+E]=b[+E]);return d.ranges[v]=!0,{stack:r,id:l,glyph:b[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||a.u["CJK Unified Ideographs"](r)||a.u["Hangul Syllables"](r)||a.u.Hiragana(r)||a.u.Katakana(r)||a.u["CJK Symbols and Punctuation"](r)||a.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,l,d){let m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(d))return;let v=r.tinySDF;if(!v){let E="400";/bold/i.test(l)?E="900":/medium/i.test(l)?E="500":/light/i.test(l)&&(E="200"),v=r.tinySDF=new qn.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,lang:this.lang,fontFamily:m,fontWeight:E})}let b=v.draw(String.fromCharCode(d));return{id:d,bitmap:new a.q({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}qn.loadGlyphRange=function(g,r,l,d){return a._(this,void 0,void 0,function*(){let m=256*r,v=m+255,b=d.transformRequest(l.replace("{fontstack}",g).replace("{range}",`${m}-${v}`),"Glyphs"),E=yield a.n(b,new AbortController);if(!E||!E.data)throw new Error(`Could not load glyph range. range: ${r}, ${m}-${v}`);let q={};for(let O of a.o(E.data))q[O.id]=O;return q})},qn.TinySDF=class{constructor({fontSize:g=24,buffer:r=3,radius:l=8,cutoff:d=.25,fontFamily:m="sans-serif",fontWeight:v="normal",fontStyle:b="normal",lang:E=null}={}){this.buffer=r,this.cutoff=d,this.radius=l,this.lang=E;let q=this.size=g+4*r,O=this._createCanvas(q),k=this.ctx=O.getContext("2d",{willReadFrequently:!0});k.font=`${b} ${v} ${g}px ${m}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(g){let r=document.createElement("canvas");return r.width=r.height=g,r}draw(g){let{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:d,actualBoundingBoxLeft:m,actualBoundingBoxRight:v}=this.ctx.measureText(g),b=Math.ceil(l),E=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-m))),q=Math.min(this.size-this.buffer,b+Math.ceil(d)),O=E+2*this.buffer,k=q+2*this.buffer,N=Math.max(O*k,0),F=new Uint8ClampedArray(N),j={data:F,width:O,height:k,glyphWidth:E,glyphHeight:q,glyphTop:b,glyphLeft:0,glyphAdvance:r};if(E===0||q===0)return j;let{ctx:V,buffer:te,gridInner:Q,gridOuter:re}=this;this.lang&&(V.lang=this.lang),V.clearRect(te,te,E,q),V.fillText(g,te,te+b);let ne=V.getImageData(te,te,E,q);re.fill(dt,0,N),Q.fill(0,0,N);for(let ue=0;ue<q;ue++)for(let ae=0;ae<E;ae++){let fe=ne.data[4*(ue*E+ae)+3]/255;if(fe===0)continue;let ge=(ue+te)*O+ae+te;if(fe===1)re[ge]=0,Q[ge]=dt;else{let le=.5-fe;re[ge]=le>0?le*le:0,Q[ge]=le<0?le*le:0}}gt(re,0,0,O,k,O,this.f,this.v,this.z),gt(Q,te,te,E,q,O,this.f,this.v,this.z);for(let ue=0;ue<N;ue++){let ae=Math.sqrt(re[ue])-Math.sqrt(Q[ue]);F[ue]=Math.round(255-255*(ae/this.radius+this.cutoff))}return j}};class ka{constructor(){this.specification=a.v.light.position}possiblyEvaluate(r,l){return a.B(r.expression.evaluate(l))}interpolate(r,l,d){return{x:a.C.number(r.x,l.x,d),y:a.C.number(r.y,l.y,d),z:a.C.number(r.z,l.z,d)}}}let Pn;class Hi extends a.E{constructor(r){super(),Pn=Pn||new a.r({anchor:new a.D(a.v.light.anchor),position:new ka,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.t(Pn),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(a.x,r,l))for(let d in r){let m=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d){return(!d||d.validate!==!1)&&a.y(this,r.call(a.z,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}let Da=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class Ki extends a.E{constructor(r){super(),this._transitionable=new a.t(Da),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0))}setSky(r,l={}){if(!this._validate(a.G,r,l)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let d in r){let m=r[d];d.endsWith("-transition")?this._transitionable.setTransition(d.slice(0,-11),m):this._transitionable.setValue(d,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,d={}){return(d==null?void 0:d.validate)!==!1&&a.y(this,r.call(a.z,a.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Jt{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){let d=r.join(",")+String(l);return this.dashEntry[d]||(this.dashEntry[d]=this.addDash(r,l)),this.dashEntry[d]}getDashRanges(r,l,d){let m=[],v=r.length%2==1?-r[r.length-1]*d:0,b=r[0]*d,E=!0;m.push({left:v,right:b,isDash:E,zeroLength:r[0]===0});let q=r[0];for(let O=1;O<r.length;O++){E=!E;let k=r[O];v=q*d,q+=k,b=q*d,m.push({left:v,right:b,isDash:E,zeroLength:k===0})}return m}addRoundDash(r,l,d){let m=l/2;for(let v=-d;v<=d;v++){let b=this.width*(this.nextRow+d+v),E=0,q=r[E];for(let O=0;O<this.width;O++){O/q.right>1&&(q=r[++E]);let k=Math.abs(O-q.left),N=Math.abs(O-q.right),F=Math.min(k,N),j,V=v/d*(m+1);if(q.isDash){let te=m-Math.abs(V);j=Math.sqrt(F*F+te*te)}else j=m-Math.sqrt(F*F+V*V);this.data[b+O]=Math.max(0,Math.min(255,j+128))}}}addRegularDash(r){for(let E=r.length-1;E>=0;--E){let q=r[E],O=r[E+1];q.zeroLength?r.splice(E,1):O&&O.isDash===q.isDash&&(O.left=q.left,r.splice(E,1))}let l=r[0],d=r[r.length-1];l.isDash===d.isDash&&(l.left=d.left-this.width,d.right=l.right+this.width);let m=this.width*this.nextRow,v=0,b=r[v];for(let E=0;E<this.width;E++){E/b.right>1&&(b=r[++v]);let q=Math.abs(E-b.left),O=Math.abs(E-b.right),k=Math.min(q,O);this.data[m+E]=Math.max(0,Math.min(255,(b.isDash?k:-k)+128))}}addDash(r,l){let d=l?7:0,m=2*d+1;if(this.nextRow+m>this.height)return a.w("LineAtlas out of space"),null;let v=0;for(let E=0;E<r.length;E++)v+=r[E];if(v!==0){let E=this.width/v,q=this.getDashRanges(r,this.width,E);l?this.addRoundDash(q,E,d):this.addRegularDash(q)}let b={y:(this.nextRow+d+.5)/this.height,height:2*d/this.height,width:v};return this.nextRow+=m,this.dirty=!0,b}bind(r){let l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}let zi="maplibre_preloaded_worker_pool";class ni{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<ni.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[zi]}numActive(){return Object.keys(this.active).length}}let fo=Math.floor(D.hardwareConcurrency/2),ai,Xi;function ha(){return ai||(ai=new ni),ai}ni.workerCount=a.H(globalThis)?Math.max(Math.min(fo,3),1):1;class oi{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;let d=this.workerPool.acquire(l);for(let m=0;m<d.length;m++){let v=new a.J(d[m],l);v.name=`Worker ${m}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){let d=[];for(let m of this.actors)d.push(m.sendAsync({type:r,data:l}));return Promise.all(d)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(let d of this.actors)d.registerMessageHandler(r,l)}}function po(){return Xi||(Xi=new oi(ha(),a.K),Xi.registerMessageHandler("GR",(g,r,l)=>a.m(r,l))),Xi}function Vn(g,r){let l=a.L();return a.M(l,l,[1,1,0]),a.N(l,l,[.5*g.width,.5*g.height,1]),g.calculatePosMatrix?a.O(l,l,g.calculatePosMatrix(r.toUnwrapped())):l}function da(g,r,l,d,m,v,b){var E;let q=function(F,j,V){if(F)for(let te of F){let Q=j[te];if(Q&&Q.source===V&&Q.type==="fill-extrusion")return!0}else for(let te in j){let Q=j[te];if(Q.source===V&&Q.type==="fill-extrusion")return!0}return!1}((E=m==null?void 0:m.layers)!==null&&E!==void 0?E:null,r,g.id),O=v.maxPitchScaleFactor(),k=g.tilesIn(d,O,q);k.sort(Al);let N=[];for(let F of k)N.push({wrappedTileID:F.tileID.wrapped().key,queryResults:F.tile.queryRenderedFeatures(r,l,g._state,F.queryGeometry,F.cameraQueryGeometry,F.scale,m,v,O,Vn(g.transform,F.tileID),b?(j,V)=>b(F.tileID,j,V):void 0)});return function(F,j){for(let V in F)for(let te of F[V])Cl(te,j);return F}(function(F){let j={},V={};for(let te of F){let Q=te.queryResults,re=te.wrappedTileID,ne=V[re]=V[re]||{};for(let ue in Q){let ae=Q[ue],fe=ne[ue]=ne[ue]||{},ge=j[ue]=j[ue]||[];for(let le of ae)fe[le.featureIndex]||(fe[le.featureIndex]=!0,ge.push(le))}}return j}(N),g)}function Al(g,r){let l=g.tileID,d=r.tileID;return l.overscaledZ-d.overscaledZ||l.canonical.y-d.canonical.y||l.wrap-d.wrap||l.canonical.x-d.canonical.x}function Cl(g,r){let l=g.feature,d=r.getFeatureState(l.layer["source-layer"],l.id);l.source=l.layer.source,l.layer["source-layer"]&&(l.sourceLayer=l.layer["source-layer"]),l.state=d}function An(g,r,l){return a._(this,void 0,void 0,function*(){let d=g;if(g.url?d=(yield a.j(r.transformRequest(g.url,"Source"),l)).data:yield D.frameAsync(l),!d)return null;let m=a.Q(a.e(d,g),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in d&&d.vector_layers&&(m.vectorLayerIds=d.vector_layers.map(v=>v.id)),m})}class Rr{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.S?new a.S(r.lng,r.lat):a.S.convert(r),this}extend(r){let l=this._sw,d=this._ne,m,v;if(r instanceof a.S)m=r,v=r;else{if(!(r instanceof Rr))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Rr.convert(r)):this.extend(a.S.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.S.convert(r)):this;if(m=r._sw,v=r._ne,!m||!v)return this}return l||d?(l.lng=Math.min(m.lng,l.lng),l.lat=Math.min(m.lat,l.lat),d.lng=Math.max(v.lng,d.lng),d.lat=Math.max(v.lat,d.lat)):(this._sw=new a.S(m.lng,m.lat),this._ne=new a.S(v.lng,v.lat)),this}getCenter(){return new a.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.S(this.getWest(),this.getNorth())}getSouthEast(){return new a.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:l,lat:d}=a.S.convert(r),m=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=d&&d<=this._ne.lat&&m}static convert(r){return r instanceof Rr?r:r&&new Rr(r)}static fromLngLat(r,l=0){let d=360*l/40075017,m=d/Math.cos(Math.PI/180*r.lat);return new Rr(new a.S(r.lng-m,r.lat-d),new a.S(r.lng+m,r.lat+d))}adjustAntiMeridian(){let r=new a.S(this._sw.lng,this._sw.lat),l=new a.S(this._ne.lng,this._ne.lat);return new Rr(r,r.lng>l.lng?new a.S(l.lng+360,l.lat):l)}}class Br{constructor(r,l,d){this.bounds=Rr.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=d||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){let l=Math.pow(2,r.z),d=Math.floor(a.V(this.bounds.getWest())*l),m=Math.floor(a.U(this.bounds.getNorth())*l),v=Math.ceil(a.V(this.bounds.getEast())*l),b=Math.ceil(a.U(this.bounds.getSouth())*l);return r.x>=d&&r.x<v&&r.y>=m&&r.y<b}}class fa extends a.E{constructor(r,l,d,m){if(super(),this.id=r,this.dispatcher=d,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.Q(l,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield An(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(a.e(this,r),r.bounds&&(this.tileBounds=new Br(r.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new a.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(r){return a._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};d.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((v,b)=>{r.reloadPromise={resolve:v,reject:b}})}else r.actor=this.dispatcher.getActor(),m="LT";r.abortController=new AbortController;try{let v=yield r.actor.sendAsync({type:m,data:d},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,v)}catch(v){if(delete r.abortController,r.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){let d=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(d.resolve).catch(d.reject)}}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class La extends a.E{constructor(r,l,d,m){super(),this.id=r,this.dispatcher=d,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},l),a.e(this,a.Q(l,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let l=yield An(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,l&&(a.e(this,l),l.bounds&&(this.tileBounds=new Br(l.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(l){this._tileJSONRequest=null,this.fire(new a.k(l))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return a.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return a._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{let d=yield oe.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let m=this.map.painter.context,v=m.gl,b=d.data;r.texture=this.map.painter.getTileTexture(b.width),r.texture?r.texture.update(b,{useMipmap:!0}):(r.texture=new a.T(m,b,v.RGBA,{useMipmap:!0}),r.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class ks extends La{constructor(r,l,d,m){super(r,l,d,m),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return a._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),d=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{let m=yield oe.getImage(d,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(m&&m.data){let v=m.data;this.map._refreshExpiredTiles&&(m.cacheControl||m.expires)&&r.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});let b=a.b(v)&&a.W()?v:yield this.readImageNow(v),E={type:this.type,uid:r.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();let q=yield r.actor.sendAsync({type:"LDT",data:E});r.dem=q,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(m){if(delete r.abortController,r.aborted)r.state="unloaded";else if(m)throw r.state="errored",m}})}readImageNow(r){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.X()){let l=r.width+2,d=r.height+2;try{return new a.R({width:l,height:d},yield a.Y(r,-1,-1,l,d))}catch(m){}}return D.getImageData(r,1)})}_getNeighboringTiles(r){let l=r.canonical,d=Math.pow(2,l.z),m=(l.x-1+d)%d,v=l.x===0?r.wrap-1:r.wrap,b=(l.x+1+d)%d,E=l.x+1===d?r.wrap+1:r.wrap,q={};return q[new a.Z(r.overscaledZ,v,l.z,m,l.y).key]={backfilled:!1},q[new a.Z(r.overscaledZ,E,l.z,b,l.y).key]={backfilled:!1},l.y>0&&(q[new a.Z(r.overscaledZ,v,l.z,m,l.y-1).key]={backfilled:!1},q[new a.Z(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},q[new a.Z(r.overscaledZ,E,l.z,b,l.y-1).key]={backfilled:!1}),l.y+1<d&&(q[new a.Z(r.overscaledZ,v,l.z,m,l.y+1).key]={backfilled:!1},q[new a.Z(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},q[new a.Z(r.overscaledZ,E,l.z,b,l.y+1).key]={backfilled:!1}),q}unloadTile(r){return a._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class za extends a.E{constructor(r,l,d,m){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:l.data},this.actor=d.getActor(),this.setEventedParent(m),this._data=l.data,this._options=a.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId,l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(l.buffer!==void 0?l.buffer:128),tolerance:this._pixelsToTileUnits(l.tolerance!==void 0?l.tolerance:.375),extent:a.$,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(l.clusterMaxZoom),minPoints:Math.max(2,l.clusterMinPoints||2),extent:a.$,radius:this._pixelsToTileUnits(l.clusterRadius||50),log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(a.$/this.tileSize)}_getClusterMaxZoom(r){let l=r?Math.round(r):this.maxzoom-1;return Number.isInteger(r)||r===void 0||a.w(`Integer expected for option 'clusterMaxZoom': provided value "${r}" rounded to "${l}"`),l}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._pendingWorkerUpdate={data:r},this._updateWorkerData(),this}updateData(r){return this._pendingWorkerUpdate.diff=a.a0(this._pendingWorkerUpdate.diff,r),this._updateWorkerData(),this}getData(){return a._(this,void 0,void 0,function*(){let r=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(l=>l.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){let r=new Rr,l=yield this.getData(),d;switch(l.type){case"FeatureCollection":d=l.features.map(m=>this.getCoordinatesFromGeometry(m.geometry)).flat(1/0);break;case"Feature":d=this.getCoordinatesFromGeometry(l.geometry);break;default:d=this.getCoordinatesFromGeometry(l)}if(d.length==0)return r;for(let m=0;m<d.length-1;m+=2)r.extend([d[m],d[m+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(r.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,d){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:d}})}_updateWorkerData(){return a._(this,void 0,void 0,function*(){if(this._isUpdatingWorker)return;let{data:r,diff:l}=this._pendingWorkerUpdate;if(!r&&!l)return void a.w(`No data or diff provided to GeoJSONSource ${this.id}.`);let d=a.e({type:this.type},this.workerOptions);r?(typeof r=="string"?(d.request=this.map._requestManager.transformRequest(D.resolveURL(r),"Source"),d.request.collectResourceTiming=this._collectResourceTiming):d.data=JSON.stringify(r),this._pendingWorkerUpdate.data=void 0):l&&(d.dataDiff=l,this._pendingWorkerUpdate.diff=void 0),this._isUpdatingWorker=!0,this.fire(new a.l("dataloading",{dataType:"source"}));try{let m=yield this.actor.sendAsync({type:"LD",data:d});if(this._isUpdatingWorker=!1,this._removed||m.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));this._data=m.data;let v=null;m.resourceTiming&&m.resourceTiming[this.id]&&(v=m.resourceTiming[this.id].slice(0));let b={dataType:"source"};this._collectResourceTiming&&v&&v.length>0&&a.e(b,{resourceTiming:v}),this.fire(new a.l("data",Object.assign(Object.assign({},b),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},b),{sourceDataType:"content"})))}catch(m){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(m))}finally{(this._pendingWorkerUpdate.data||this._pendingWorkerUpdate.diff)&&this._updateWorkerData()}})}loaded(){return!this._isUpdatingWorker&&this._pendingWorkerUpdate.data===void 0&&this._pendingWorkerUpdate.diff===void 0}loadTile(r){return a._(this,void 0,void 0,function*(){let l=r.actor?"RT":"LT";r.actor=this.actor;let d={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};r.abortController=new AbortController;let m=yield this.actor.sendAsync({type:l,data:d},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(m,this.map.painter,l==="RT")})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class Fa extends a.E{constructor(r,l,d,m){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=d,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=l}load(r){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let l=yield oe.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new a.k(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let l=r.map(a.a1.fromLngLat);var d;return this.tileID=function(m){let v=a.a2.fromPoints(m),b=v.width(),E=v.height(),q=Math.max(b,E),O=Math.max(0,Math.floor(-Math.log(q)/Math.LN2)),k=Math.pow(2,O);return new a.a4(O,Math.floor((v.minX+v.maxX)/2*k),Math.floor((v.minY+v.maxY)/2*k))}(l),this.terrainTileRanges=this._getOverlappingTileRanges(l),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=l.map(m=>this.tileID.getTilePoint(m)._round()),this.flippedWindingOrder=((d=this.tileCoords)[1].x-d[0].x)*(d[2].y-d[0].y)-(d[1].y-d[0].y)*(d[2].x-d[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,l=r.gl;this.texture||(this.texture=new a.T(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(let m in this.tiles){let v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let{minX:l,minY:d,maxX:m,maxY:v}=a.a2.fromPoints(r),b={};for(let E=0;E<=a.a3;E++){let q=Math.pow(2,E),O=Math.floor(l*q),k=Math.floor(d*q),N=Math.floor(m*q),F=Math.floor(v*q);b[E]={minTileX:O,minTileY:k,maxTileX:N,maxTileY:F}}return b}}class Ml extends Fa{constructor(r,l,d,m){super(r,l,d,m),this.roundZoom=!0,this.type="video",this.options=l}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;let r=this.options;this.urls=[];for(let l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{let l=yield a.a5(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new a.k(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){let l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new a.k(new a.a6(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let r=this.map.painter.context,l=r.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new a.T(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let d=!1;for(let m in this.tiles){let v=this.tiles[m];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class $o extends Fa{constructor(r,l,d,m){super(r,l,d,m),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(b=>typeof b!="number"))||this.fire(new a.k(new a.a6(`sources.${r}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new a.k(new a.a6(`sources.${r}`,null,"missing required property \"coordinates\""))),l.animate&&typeof l.animate!="boolean"&&this.fire(new a.k(new a.a6(`sources.${r}`,null,"optional \"animate\" property must be a boolean value"))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a6(`sources.${r}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new a.k(new a.a6(`sources.${r}`,null,"missing required property \"canvas\""))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let l=this.map.painter.context,d=l.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.T(l,this.canvas,d.RGBA,{premultiply:!0});let m=!1;for(let v in this.tiles){let b=this.tiles[v];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,m=!0)}m&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}let Vo={},Go=g=>{switch(g){case"geojson":return za;case"image":return Fa;case"raster":return La;case"raster-dem":return ks;case"vector":return fa;case"video":return Ml;case"canvas":return $o}return Vo[g]},Ds="RTLPluginLoaded";class Zo extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=po()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return a._(this,arguments,void 0,function*(l,d=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!d)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(Ds))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Wo=null;function Ho(){return Wo||(Wo=new Zo),Wo}class Rl{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=a.a7(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){let l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,d){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(m,v){let b={};if(!v)return b;for(let E of m){let q=E.layerIds.map(O=>v.getLayer(O)).filter(Boolean);if(q.length!==0){E.layers=q,E.stateDependentLayerIds&&(E.stateDependentLayers=E.stateDependentLayerIds.map(O=>q.filter(k=>k.id===O)[0]));for(let O of q)b[O.id]=E}}return b}(r.buckets,l==null?void 0:l.style),this.hasSymbolBuckets=!1;for(let m in this.buckets){let v=this.buckets[m];if(v instanceof a.a9){if(this.hasSymbolBuckets=!0,!d)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let m in this.buckets){let v=this.buckets[m];if(v instanceof a.a9&&v.hasRTLText){this.hasRTLText=!0,Ho().lazyLoad();break}}this.queryPadding=0;for(let m in this.buckets){let v=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(m).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new a.a8}unloadVectorData(){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(let d in this.buckets){let m=this.buckets[d];m.uploadPending()&&m.upload(r)}let l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new a.T(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new a.T(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,d,m,v,b,E,q,O,k,N){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:v,scale:b,tileSize:this.tileSize,pixelPosMatrix:k,transform:q,params:E,queryPadding:this.queryPadding*O,getElevation:N},r,l,d):{}}querySourceFeatures(r,l){let d=this.latestFeatureIndex;if(!d||!d.rawTileData)return;let m=d.loadVTLayers(),v=l&&l.sourceLayer?l.sourceLayer:"",b=m._geojsonTileLayer||m[v];if(!b)return;let E=a.aa(l&&l.filter),{z:q,x:O,y:k}=this.tileID.canonical,N={z:q,x:O,y:k};for(let F=0;F<b.length;F++){let j=b.feature(F);if(E.needGeometry){let Q=a.ab(j,!0);if(!E.filter(new a.F(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!E.filter(new a.F(this.tileID.overscaledZ),j))continue;let V=d.getId(j,v),te=new a.ac(j,q,O,k,V);te.tile=N,r.push(te)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let l=this.expirationTime;if(r.cacheControl){let d=a.ad(r.cacheControl);d["max-age"]&&(this.expirationTime=Date.now()+1e3*d["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let d=Date.now(),m=!1;if(this.expirationTime>d)m=!1;else if(l){if(this.expirationTime<l)m=!0;else{let v=this.expirationTime-l;v?this.expirationTime=d+Math.max(v,3e4):m=!0}}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;let d=this.latestFeatureIndex.loadVTLayers();for(let m in this.buckets){if(!l.style.hasLayer(m))continue;let v=this.buckets[m],b=v.layers[0].sourceLayer||"_geojsonTileLayer",E=d[b],q=r[b];if(!E||!q||Object.keys(q).length===0)continue;v.update(q,E,this.imageAtlas&&this.imageAtlas.patternPositions||{});let O=l&&l.style&&l.style.getLayer(m);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=D.now()+r}setDependencies(r,l){let d={};for(let m of l)d[m]=!0;this.dependencies[r]=d}hasDependency(r,l){for(let d of r){let m=this.dependencies[d];if(m){for(let v of l)if(m[v])return!0}}return!1}}class _e{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(let r in this.data)for(let l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,d){let m=r.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);let v={value:l,timeout:void 0};if(d!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},d)),this.data[m].push(v),this.order.push(m),this.order.length>this.max){let b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){let l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;let d=r.wrapped().key,m=l===void 0?0:this.data[d].indexOf(l),v=this.data[d][m];return this.data[d].splice(m,1),v.timeout&&clearTimeout(v.timeout),this.data[d].length===0&&delete this.data[d],this.onRemove(v.value),this.order.splice(this.order.indexOf(d),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){let l=[];for(let d in this.data)for(let m of this.data[d])r(m.value)||l.push(m);for(let d of l)this.remove(d.value.tileID,d)}}class G{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,d){let m=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][m]=this.stateChanges[r][m]||{},a.e(this.stateChanges[r][m],d),this.deletedStates[r]===null){this.deletedStates[r]={};for(let v in this.state[r])v!==m&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][m]===null){this.deletedStates[r][m]={};for(let v in this.state[r][m])d[v]||(this.deletedStates[r][m][v]=null)}else for(let v in d)this.deletedStates[r]&&this.deletedStates[r][m]&&this.deletedStates[r][m][v]===null&&delete this.deletedStates[r][m][v]}removeFeatureState(r,l,d){if(this.deletedStates[r]===null)return;let m=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},d&&l!==void 0)this.deletedStates[r][m]!==null&&(this.deletedStates[r][m]=this.deletedStates[r][m]||{},this.deletedStates[r][m][d]=null);else if(l!==void 0){if(this.stateChanges[r]&&this.stateChanges[r][m])for(d in this.deletedStates[r][m]={},this.stateChanges[r][m])this.deletedStates[r][m][d]=null;else this.deletedStates[r][m]=null;}else this.deletedStates[r]=null}getState(r,l){let d=String(l),m=a.e({},(this.state[r]||{})[d],(this.stateChanges[r]||{})[d]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){let v=this.deletedStates[r][l];if(v===null)return{};for(let b in v)delete m[b]}return m}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){let d={};for(let m in this.stateChanges){this.state[m]=this.state[m]||{};let v={};for(let b in this.stateChanges[m])this.state[m][b]||(this.state[m][b]={}),a.e(this.state[m][b],this.stateChanges[m][b]),v[b]=this.state[m][b];d[m]=v}for(let m in this.deletedStates){this.state[m]=this.state[m]||{};let v={};if(this.deletedStates[m]===null)for(let b in this.state[m])v[b]={},this.state[m][b]={};else for(let b in this.deletedStates[m]){if(this.deletedStates[m][b]===null)this.state[m][b]={};else for(let E of Object.keys(this.deletedStates[m][b]))delete this.state[m][b][E];v[b]=this.state[m][b]}d[m]=d[m]||{},a.e(d[m],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(d).length!==0)for(let m in r)r[m].setFeatureState(d,l)}}let W=89.25;function Y(g,r){let l=a.ah(r.lat,-a.ai,a.ai);return new a.P(a.V(r.lng)*g,a.U(l)*g)}function se(g,r){return new a.a1(r.x/g,r.y/g).toLngLat()}function me(g){return g.cameraToCenterDistance*Math.min(.85*Math.tan(a.ae(90-g.pitch)),Math.tan(a.ae(W-g.pitch)))}function be(g,r){let l=g.canonical,d=r/a.af(l.z),m=l.x+Math.pow(2,l.z)*g.wrap,v=a.ag(new Float64Array(16));return a.M(v,v,[m*d,l.y*d,0]),a.N(v,v,[d/a.$,d/a.$,1]),v}function qe(g,r,l,d,m){let v=a.a1.fromLngLat(g,r),b=m*a.aj(1,g.lat),E=b*Math.cos(a.ae(l)),q=Math.sqrt(b*b-E*E),O=q*Math.sin(a.ae(-d)),k=q*Math.cos(a.ae(-d));return new a.a1(v.x+O,v.y+k,v.z+E)}function we(g,r,l){let d=r.intersectsFrustum(g);if(!l||d===0)return d;let m=r.intersectsPlane(l);return m===0?0:d===2&&m===2?2:1}function ke(g,r,l){let d=0,m=(l-r)/10;for(let v=0;v<10;v++)d+=m*Math.pow(Math.cos(r+(v+.5)/10*(l-r)),g);return d}function Be(g,r){return function(l,d,m,v,b){let E=2*((g-1)/a.ak(Math.cos(a.ae(W-b))/Math.cos(a.ae(W)))-1),q=Math.acos(m/v),O=2*ke(E-1,0,a.ae(b/2)),k=Math.min(a.ae(W),q+a.ae(b/2)),N=ke(E-1,Math.min(k,q-a.ae(b/2)),k),F=Math.atan(d/m),j=Math.hypot(d,m),V=l;return V+=a.ak(v/j/Math.max(.5,Math.cos(a.ae(b/2)))),V+=E*a.ak(Math.cos(F))/2,V-=a.ak(Math.max(1,N/O/r))/2,V}}let Le=Be(9.314,3);function st(g,r){let l=(r.roundZoom?Math.round:Math.floor)(g.zoom+a.ak(g.tileSize/r.tileSize));return Math.max(0,l)}function Se(g,r){let l=g.getCameraFrustum(),d=g.getClippingPlane(),m=g.screenPointToMercatorCoordinate(g.getCameraPoint()),v=a.a1.fromLngLat(g.center,g.elevation);m.z=v.z+Math.cos(g.pitchInRadians)*g.cameraToCenterDistance/g.worldSize;let b=g.getCoveringTilesDetailsProvider(),E=b.allowVariableZoom(g,r),q=st(g,r),O=r.minzoom||0,k=r.maxzoom!==void 0?r.maxzoom:g.maxZoom,N=Math.min(Math.max(0,q),k),F=Math.pow(2,N),j=[F*m.x,F*m.y,0],V=[F*v.x,F*v.y,0],te=Math.hypot(v.x-m.x,v.y-m.y),Q=Math.abs(v.z-m.z),re=Math.hypot(te,Q),ne=fe=>({zoom:0,x:0,y:0,wrap:fe,fullyVisible:!1}),ue=[],ae=[];if(g.renderWorldCopies&&b.allowWorldCopies())for(let fe=1;fe<=3;fe++)ue.push(ne(-fe)),ue.push(ne(fe));for(ue.push(ne(0));ue.length>0;){let fe=ue.pop(),ge=fe.x,le=fe.y,xe=fe.fullyVisible,Re={x:ge,y:le,z:fe.zoom},Ee=b.getTileBoundingVolume(Re,fe.wrap,g.elevation,r);if(!xe){let Ze=we(l,Ee,d);if(Ze===0)continue;xe=Ze===2}let Ie=b.distanceToTile2d(m.x,m.y,Re,Ee),Me=q;E&&(Me=(r.calculateTileZoom||Le)(g.zoom+a.ak(g.tileSize/r.tileSize),Ie,Q,re,g.fov)),Me=(r.roundZoom?Math.round:Math.floor)(Me),Me=Math.max(0,Me);let je=Math.min(Me,k);if(fe.wrap=b.getWrap(v,Re,fe.wrap),fe.zoom>=je){if(fe.zoom<O)continue;let Ze=N-fe.zoom,ze=j[0]-.5-(ge<<Ze),at=j[1]-.5-(le<<Ze),Ct=r.reparseOverscaled?Math.max(fe.zoom,Me):fe.zoom;ae.push({tileID:new a.Z(fe.zoom===k?Ct:fe.zoom,fe.wrap,fe.zoom,ge,le),distanceSq:a.al([V[0]-.5-ge,V[1]-.5-le]),tileDistanceToCamera:Math.sqrt(ze*ze+at*at)})}else for(let Ze=0;Ze<4;Ze++)ue.push({zoom:fe.zoom+1,x:(ge<<1)+Ze%2,y:(le<<1)+(Ze>>1),wrap:fe.wrap,fullyVisible:xe})}return ae.sort((fe,ge)=>fe.distanceSq-ge.distanceSq).map(fe=>fe.tileID)}let Tt=a.a2.fromPoints([new a.P(0,0),new a.P(a.$,a.$)]);class Lt extends a.E{constructor(r,l,d){super(),this.id=r,this.dispatcher=d,this.on("data",m=>this._dataHandler(m)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((m,v,b,E)=>{let q=new(Go(v.type))(m,v,b,E);if(q.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${q.id}`);return q})(r,l,d,this),this._tiles={},this._cache=new _e(0,m=>this._unloadTile(m)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new G,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let r in this._tiles){let l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,d){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,d)}catch(m){r.state="errored",m.status!==404?this._source.fire(new a.k(m,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new a.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let l in this._tiles){let d=this._tiles[l];d.upload(r),d.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ct).map(r=>r.key)}getRenderableIds(r){let l=[];for(let d in this._tiles)this._isIdRenderable(d,r)&&l.push(this._tiles[d]);return r?l.sort((d,m)=>{let v=d.tileID,b=m.tileID,E=new a.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians),q=new a.P(b.canonical.x,b.canonical.y)._rotate(-this.transform.bearingInRadians);return v.overscaledZ-b.overscaledZ||q.y-E.y||q.x-E.x}).map(d=>d.tileID.key):l.map(d=>d.tileID).sort(ct).map(d=>d.key)}hasRenderableParent(r){let l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let l in this._tiles)r?this._reloadTile(l,"expired"):this._tiles[l].state!=="errored"&&this._reloadTile(l,"reloading")}}_reloadTile(r,l){return a._(this,void 0,void 0,function*(){let d=this._tiles[r];d&&(d.state!=="loading"&&(d.state=l),yield this._loadTile(d,r,l))})}_tileLoaded(r,l,d){r.timeAdded=D.now(),d==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){let l=this.getRenderableIds();for(let m=0;m<l.length;m++){let v=l[m];if(r.neighboringTiles&&r.neighboringTiles[v]){let b=this.getTileByID(v);d(r,b),d(b,r)}}function d(m,v){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let b=v.tileID.canonical.x-m.tileID.canonical.x,E=v.tileID.canonical.y-m.tileID.canonical.y,q=Math.pow(2,m.tileID.canonical.z),O=v.tileID.key;b===0&&E===0||Math.abs(E)>1||(Math.abs(b)>1&&(Math.abs(b+q)===1?b+=q:Math.abs(b-q)===1&&(b-=q)),v.dem&&m.dem&&(m.dem.backfillBorder(v.dem,b,E),m.neighboringTiles&&m.neighboringTiles[O]&&(m.neighboringTiles[O].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,d,m){for(let v in this._tiles){let b=this._tiles[v];if(m[v]||!b.hasData()||b.tileID.overscaledZ<=l||b.tileID.overscaledZ>d)continue;let E=b.tileID;for(;b&&b.tileID.overscaledZ>l+1;){let O=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[O.key],b&&b.hasData()&&(E=O)}let q=E;for(;q.overscaledZ>l;)if(q=q.scaledTo(q.overscaledZ-1),r[q.key]||r[q.canonical.key]){m[E.key]=E;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){let d=this._loadedParentTiles[r.key];return d&&d.tileID.overscaledZ>=l?d:null}for(let d=r.overscaledZ-1;d>=l;d--){let m=r.scaledTo(d),v=this._getLoadedTile(m);if(v)return v}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){let l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){let l=Math.ceil(r.width/this._source.tileSize)+1,d=Math.ceil(r.height/this._source.tileSize)+1,m=Math.floor(l*d*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(v)}handleWrapJump(r){let l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){let d={};for(let m in this._tiles){let v=this._tiles[m];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+l),d[v.tileID.key]=v}this._tiles=d;for(let m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(let m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(r,l,d,m,v,b){let E={},q={},O=Object.keys(r),k=D.now();for(let N of O){let F=r[N],j=this._tiles[N];if(!j||j.fadeEndTime!==0&&j.fadeEndTime<=k)continue;let V=this.findLoadedParent(F,l),te=this.findLoadedSibling(F),Q=V||te||null;Q&&(this._addTile(Q.tileID),E[Q.tileID.key]=Q.tileID),q[N]=F}this._retainLoadedChildren(q,m,d,r);for(let N in E)r[N]||(this._coveredTiles[N]=!0,r[N]=E[N]);if(b){let N={},F={};for(let j of v)this._tiles[j.key].hasData()?N[j.key]=j:F[j.key]=j;for(let j in F){let V=F[j].children(this._source.maxzoom);this._tiles[V[0].key]&&this._tiles[V[1].key]&&this._tiles[V[2].key]&&this._tiles[V[3].key]&&(N[V[0].key]=r[V[0].key]=V[0],N[V[1].key]=r[V[1].key]=V[1],N[V[2].key]=r[V[2].key]=V[2],N[V[3].key]=r[V[3].key]=V[3],delete F[j])}for(let j in F){let V=F[j],te=this.findLoadedParent(V,this._source.minzoom),Q=this.findLoadedSibling(V),re=te||Q||null;if(re){N[re.tileID.key]=r[re.tileID.key]=re.tileID;for(let ne in N)N[ne].isChildOf(re.tileID)&&delete N[ne]}}for(let j in this._tiles)N[j]||(this._coveredTiles[j]=!0)}}update(r,l){if(!this._sourceLoaded||this._paused)return;let d;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new a.Z(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(d=Se(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(d=d.filter(k=>this._source.hasTile(k)))):d=[];let m=st(r,this._source),v=Math.max(m-Lt.maxOverzooming,this._source.minzoom),b=Math.max(m+Lt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let k={};for(let N of d)if(N.canonical.z>this._source.minzoom){let F=N.scaledTo(N.canonical.z-1);k[F.key]=F;let j=N.scaledTo(Math.max(this._source.minzoom,Math.min(N.canonical.z,5)));k[j.key]=j}d=d.concat(Object.values(k))}let E=d.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,E&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let q=this._updateRetainedTiles(d,m);qt(this._source.type)&&this._updateCoveredAndRetainedTiles(q,v,b,m,d,l);for(let k in q)this._tiles[k].clearFadeHold();let O=a.am(this._tiles,q);for(let k of O){let N=this._tiles[k];N.hasSymbolBuckets&&!N.holdingForFade()?N.setHoldDuration(this.map._fadeDuration):N.hasSymbolBuckets&&!N.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var d;let m={},v={},b=Math.max(l-Lt.maxOverzooming,this._source.minzoom),E=Math.max(l+Lt.maxUnderzooming,this._source.minzoom),q={};for(let O of r){let k=this._addTile(O);m[O.key]=O,k.hasData()||l<this._source.maxzoom&&(q[O.key]=O)}this._retainLoadedChildren(q,l,E,m);for(let O of r){let k=this._tiles[O.key];if(k.hasData())continue;if(l+1>this._source.maxzoom){let F=O.children(this._source.maxzoom)[0],j=this.getTile(F);if(j&&j.hasData()){m[F.key]=F;continue}}else{let F=O.children(this._source.maxzoom);if(m[F[0].key]&&m[F[1].key]&&m[F[2].key]&&m[F[3].key])continue}let N=k.wasRequested();for(let F=O.overscaledZ-1;F>=b;--F){let j=O.scaledTo(F);if(v[j.key])break;if(v[j.key]=!0,k=this.getTile(j),!k&&N&&(k=this._addTile(j)),k){let V=k.hasData();if((V||!(!((d=this.map)===null||d===void 0)&&d.cancelPendingTileRequestsWhileZooming)||N)&&(m[j.key]=j),N=k.wasRequested(),V)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let r in this._tiles){let l=[],d,m=this._tiles[r].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){d=this._loadedParentTiles[m.key];break}l.push(m.key);let v=m.scaledTo(m.overscaledZ-1);if(d=this._getLoadedTile(v),d)break;m=v}for(let v of l)this._loadedParentTiles[v]=d}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let r in this._tiles){let l=this._tiles[r].tileID,d=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=d}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));let d=l;return l||(l=new Rl(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,d||this._source.fire(new a.l("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let d=l.getExpiryTimeout();d&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},d))}refreshTiles(r){for(let l in this._tiles)(this._isIdRenderable(l)||this._tiles[l].state=="errored")&&r.some(d=>d.equals(this._tiles[l].tileID.canonical))&&this._reloadTile(l,"expired")}_removeTile(r){let l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){let l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,d){let m=[],v=this.transform;if(!v)return m;let b=v.getCoveringTilesDetailsProvider().allowWorldCopies(),E=d?v.getCameraQueryGeometry(r):r,q=j=>v.screenPointToMercatorCoordinate(j,this.terrain),O=this.transformBbox(r,q,!b),k=this.transformBbox(E,q,!b),N=this.getIds(),F=a.a2.fromPoints(k);for(let j=0;j<N.length;j++){let V=this._tiles[N[j]];if(V.holdingForFade())continue;let te=b?[V.tileID]:[V.tileID.unwrapTo(-1),V.tileID.unwrapTo(0)],Q=Math.pow(2,v.zoom-V.tileID.overscaledZ),re=l*V.queryPadding*a.$/V.tileSize/Q;for(let ne of te){let ue=F.map(ae=>ne.getTilePoint(new a.a1(ae.x,ae.y)));if(ue.expandBy(re),ue.intersects(Tt)){let ae=O.map(ge=>ne.getTilePoint(ge)),fe=k.map(ge=>ne.getTilePoint(ge));m.push({tile:V,tileID:b?ne:ne.unwrapTo(0),queryGeometry:ae,cameraQueryGeometry:fe,scale:Q})}}}return m}transformBbox(r,l,d){let m=r.map(l);if(d){let v=a.a2.fromPoints(r);v.shrinkBy(.001*Math.min(v.width(),v.height()));let b=v.map(l);a.a2.fromPoints(m).covers(b)||(m=m.map(E=>E.x>.5?new a.a1(E.x-1,E.y,E.z):E))}return m}getVisibleCoordinates(r){let l=this.getRenderableIds(r).map(d=>this._tiles[d].tileID);return this.transform&&this.transform.populateCache(l),l}hasTransition(){if(this._source.hasTransition())return!0;if(qt(this._source.type)){let r=D.now();for(let l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,d){this._state.updateState(r=r||"_geojsonTileLayer",l,d)}removeFeatureState(r,l,d){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,d)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,d){let m=this._tiles[r];m&&m.setDependencies(l,d)}reloadTilesForDependencies(r,l){for(let d in this._tiles)this._tiles[d].hasDependency(r,l)&&this._reloadTile(d,"reloading");this._cache.filter(d=>!d.hasDependency(r,l))}}function ct(g,r){let l=Math.abs(2*g.wrap)-+(g.wrap<0),d=Math.abs(2*r.wrap)-+(r.wrap<0);return g.overscaledZ-r.overscaledZ||d-l||r.canonical.y-g.canonical.y||r.canonical.x-g.canonical.x}function qt(g){return g==="raster"||g==="image"||g==="video"}Lt.maxOverzooming=10,Lt.maxUnderzooming=3;class hr{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let d=1;d<this.points.length;d++)this._distances[d]=this._distances[d-1]+this.points[d].dist(this.points[d-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.ah(r,0,1);let l=1,d=this._distances[l],m=r*this.paddedLength+this.padding;for(;d<m&&l<this._distances.length;)d=this._distances[++l];let v=l-1,b=this._distances[v],E=d-b,q=E>0?(m-b)/E:0;return this.points[v].mult(1-q).add(this.points[l].mult(q))}}function si(g,r){let l=!0;return g==="always"||g!=="never"&&r!=="never"||(l=!1),l}class li{constructor(r,l,d){let m=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/d),this.yCellCount=Math.ceil(l/d);for(let b=0;b<this.xCellCount*this.yCellCount;b++)m.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,d,m,v){this._forEachCell(l,d,m,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(m),this.bboxes.push(v)}insertCircle(r,l,d,m){this._forEachCell(l-m,d-m,l+m,d+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(d),this.circles.push(m)}_insertBoxCell(r,l,d,m,v,b){this.boxCells[v].push(b)}_insertCircleCell(r,l,d,m,v,b){this.circleCells[v].push(b)}_query(r,l,d,m,v,b,E){if(d<0||r>this.width||m<0||l>this.height)return[];let q=[];if(r<=0&&l<=0&&this.width<=d&&this.height<=m){if(v)return[{key:null,x1:r,y1:l,x2:d,y2:m}];for(let O=0;O<this.boxKeys.length;O++)q.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){let k=this.circles[3*O],N=this.circles[3*O+1],F=this.circles[3*O+2];q.push({key:this.circleKeys[O],x1:k-F,y1:N-F,x2:k+F,y2:N+F})}}else this._forEachCell(r,l,d,m,this._queryCell,q,{hitTest:v,overlapMode:b,seenUids:{box:{},circle:{}}},E);return q}query(r,l,d,m){return this._query(r,l,d,m,!1,null)}hitTest(r,l,d,m,v,b){return this._query(r,l,d,m,!0,v,b).length>0}hitTestCircle(r,l,d,m,v){let b=r-d,E=r+d,q=l-d,O=l+d;if(E<0||b>this.width||O<0||q>this.height)return!1;let k=[];return this._forEachCell(b,q,E,O,this._queryCellCircle,k,{hitTest:!0,overlapMode:m,circle:{x:r,y:l,radius:d},seenUids:{box:{},circle:{}}},v),k.length>0}_queryCell(r,l,d,m,v,b,E,q){let{seenUids:O,hitTest:k,overlapMode:N}=E,F=this.boxCells[v];if(F!==null){let V=this.bboxes;for(let te of F)if(!O.box[te]){O.box[te]=!0;let Q=4*te,re=this.boxKeys[te];if(r<=V[Q+2]&&l<=V[Q+3]&&d>=V[Q+0]&&m>=V[Q+1]&&(!q||q(re))&&(!k||!si(N,re.overlapMode))&&(b.push({key:re,x1:V[Q],y1:V[Q+1],x2:V[Q+2],y2:V[Q+3]}),k))return!0}}let j=this.circleCells[v];if(j!==null){let V=this.circles;for(let te of j)if(!O.circle[te]){O.circle[te]=!0;let Q=3*te,re=this.circleKeys[te];if(this._circleAndRectCollide(V[Q],V[Q+1],V[Q+2],r,l,d,m)&&(!q||q(re))&&(!k||!si(N,re.overlapMode))){let ne=V[Q],ue=V[Q+1],ae=V[Q+2];if(b.push({key:re,x1:ne-ae,y1:ue-ae,x2:ne+ae,y2:ue+ae}),k)return!0}}}return!1}_queryCellCircle(r,l,d,m,v,b,E,q){let{circle:O,seenUids:k,overlapMode:N}=E,F=this.boxCells[v];if(F!==null){let V=this.bboxes;for(let te of F)if(!k.box[te]){k.box[te]=!0;let Q=4*te,re=this.boxKeys[te];if(this._circleAndRectCollide(O.x,O.y,O.radius,V[Q+0],V[Q+1],V[Q+2],V[Q+3])&&(!q||q(re))&&!si(N,re.overlapMode))return b.push(!0),!0}}let j=this.circleCells[v];if(j!==null){let V=this.circles;for(let te of j)if(!k.circle[te]){k.circle[te]=!0;let Q=3*te,re=this.circleKeys[te];if(this._circlesCollide(V[Q],V[Q+1],V[Q+2],O.x,O.y,O.radius)&&(!q||q(re))&&!si(N,re.overlapMode))return b.push(!0),!0}}}_forEachCell(r,l,d,m,v,b,E,q){let O=this._convertToXCellCoord(r),k=this._convertToYCellCoord(l),N=this._convertToXCellCoord(d),F=this._convertToYCellCoord(m);for(let j=O;j<=N;j++)for(let V=k;V<=F;V++)if(v.call(this,r,l,d,m,this.xCellCount*V+j,b,E,q))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,d,m,v,b){let E=m-r,q=v-l,O=d+b;return O*O>E*E+q*q}_circleAndRectCollide(r,l,d,m,v,b,E){let q=(b-m)/2,O=Math.abs(r-(m+q));if(O>q+d)return!1;let k=(E-v)/2,N=Math.abs(l-(v+k));if(N>k+d)return!1;if(O<=q||N<=k)return!0;let F=O-q,j=N-k;return F*F+j*j<=d*d}}function jr(g,r,l){let d=a.L();if(!g){let{vecSouth:N,vecEast:F}=Zt(r),j=S();j[0]=F[0],j[1]=F[1],j[2]=N[0],j[3]=N[1],m=j,(k=(b=(v=j)[0])*(O=v[3])-(q=v[2])*(E=v[1]))&&(m[0]=O*(k=1/k),m[1]=-E*k,m[2]=-q*k,m[3]=b*k),d[0]=j[0],d[1]=j[1],d[4]=j[2],d[5]=j[3]}var m,v,b,E,q,O,k;return a.N(d,d,[1/l,1/l,1]),d}function jt(g,r,l,d){if(g){let m=a.L();if(!r){let{vecSouth:v,vecEast:b}=Zt(l);m[0]=b[0],m[1]=b[1],m[4]=v[0],m[5]=v[1]}return a.N(m,m,[d,d,1]),m}return l.pixelsToClipSpaceMatrix}function Zt(g){let r=Math.cos(g.rollInRadians),l=Math.sin(g.rollInRadians),d=Math.cos(g.pitchInRadians),m=Math.cos(g.bearingInRadians),v=Math.sin(g.bearingInRadians),b=a.ar();b[0]=-m*d*l-v*r,b[1]=-v*d*l+m*r;let E=a.as(b);E<1e-9?a.at(b):a.au(b,b,1/E);let q=a.ar();q[0]=m*d*r-v*l,q[1]=v*d*r+m*l;let O=a.as(q);return O<1e-9?a.at(q):a.au(q,q,1/O),{vecEast:q,vecSouth:b}}function Gr(g,r,l,d){let m;d?(m=[g,r,d(g,r),1],a.aw(m,m,l)):(m=[g,r,0,1],kl(m,m,l));let v=m[3];return{point:new a.P(m[0]/v,m[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function $e(g,r){return .5+g/r*.5}function Fi(g,r){return g.x>=-r[0]&&g.x<=r[0]&&g.y>=-r[1]&&g.y<=r[1]}function Tr(g,r,l,d,m,v,b,E,q,O,k,N,F){let j=l?g.textSizeData:g.iconSizeData,V=a.an(j,r.transform.zoom),te=[256/r.width*2+1,256/r.height*2+1],Q=l?g.text.dynamicLayoutVertexArray:g.icon.dynamicLayoutVertexArray;Q.clear();let re=g.lineVertexArray,ne=l?g.text.placedSymbolArray:g.icon.placedSymbolArray,ue=r.transform.width/r.transform.height,ae=!1;for(let fe=0;fe<ne.length;fe++){let ge=ne.get(fe);if(ge.hidden||ge.writingMode===a.ao.vertical&&!ae){Na(ge.numGlyphs,Q);continue}ae=!1;let le=new a.P(ge.anchorX,ge.anchorY),xe={getElevation:F,pitchedLabelPlaneMatrix:d,lineVertexArray:re,pitchWithMap:v,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:le,unwrappedTileID:q,width:O,height:k,translation:N},Re=Xo(ge.anchorX,ge.anchorY,xe);if(!Fi(Re.point,te)){Na(ge.numGlyphs,Q);continue}let Ee=$e(r.transform.cameraToCenterDistance,Re.signedDistanceFromCamera),Ie=a.ap(j,V,ge),Me=v?Ie*r.transform.getPitchedTextCorrection(ge.anchorX,ge.anchorY,q)/Ee:Ie*Ee,je=Ye({projectionContext:xe,pitchedLabelPlaneMatrixInverse:m,symbol:ge,fontSize:Me,flip:!1,keepUpright:b,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:Q,aspectRatio:ue,rotateToLine:E});ae=je.useVertical,(je.notEnoughRoom||ae||je.needsFlipping&&Ye({projectionContext:xe,pitchedLabelPlaneMatrixInverse:m,symbol:ge,fontSize:Me,flip:!0,keepUpright:b,glyphOffsetArray:g.glyphOffsetArray,dynamicLayoutVertexArray:Q,aspectRatio:ue,rotateToLine:E}).notEnoughRoom)&&Na(ge.numGlyphs,Q)}l?g.text.dynamicLayoutVertexBuffer.updateData(Q):g.icon.dynamicLayoutVertexBuffer.updateData(Q)}function Ko(g,r,l,d,m,v,b,E){let q=v.glyphStartIndex+v.numGlyphs,O=v.lineStartIndex,k=v.lineStartIndex+v.lineLength,N=r.getoffsetX(v.glyphStartIndex),F=r.getoffsetX(q-1),j=Yo(g*N,l,d,m,v.segment,O,k,E,b);if(!j)return null;let V=Yo(g*F,l,d,m,v.segment,O,k,E,b);return V?E.projectionCache.anyProjectionOccluded?null:{first:j,last:V}:null}function Ol(g,r,l,d){return g===a.ao.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*d?{useVertical:!0}:(g===a.ao.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function Ye(g){let{projectionContext:r,pitchedLabelPlaneMatrixInverse:l,symbol:d,fontSize:m,flip:v,keepUpright:b,glyphOffsetArray:E,dynamicLayoutVertexArray:q,aspectRatio:O,rotateToLine:k}=g,N=m/24,F=d.lineOffsetX*N,j=d.lineOffsetY*N,V;if(d.numGlyphs>1){let te=d.glyphStartIndex+d.numGlyphs,Q=d.lineStartIndex,re=d.lineStartIndex+d.lineLength,ne=Ko(N,E,F,j,v,d,k,r);if(!ne)return{notEnoughRoom:!0};let ue=Ls(ne.first.point.x,ne.first.point.y,r,l),ae=Ls(ne.last.point.x,ne.last.point.y,r,l);if(b&&!v){let fe=Ol(d.writingMode,ue,ae,O);if(fe)return fe}V=[ne.first];for(let fe=d.glyphStartIndex+1;fe<te-1;fe++){let ge=Yo(N*E.getoffsetX(fe),F,j,v,d.segment,Q,re,r,k);if(!ge)return{notEnoughRoom:!0};V.push(ge)}V.push(ne.last)}else{if(b&&!v){let Q=qi(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,re=d.lineStartIndex+d.segment+1,ne=new a.P(r.lineVertexArray.getx(re),r.lineVertexArray.gety(re)),ue=qi(ne.x,ne.y,r),ae=ue.signedDistanceFromCamera>0?ue.point:zt(r.tileAnchorPoint,ne,Q,1,r),fe=Ls(Q.x,Q.y,r,l),ge=Ls(ae.x,ae.y,r,l),le=Ol(d.writingMode,fe,ge,O);if(le)return le}let te=Yo(N*E.getoffsetX(d.glyphStartIndex),F,j,v,d.segment,d.lineStartIndex,d.lineStartIndex+d.lineLength,r,k);if(!te||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};V=[te]}for(let te of V)a.av(q,te.point,te.angle);return{}}function zt(g,r,l,d,m){let v=g.add(g.sub(r)._unit()),b=qi(v.x,v.y,m).point,E=l.sub(b);return l.add(E._mult(d/E.mag()))}function Rt(g,r,l){let d=r.projectionCache;if(d.projections[g])return d.projections[g];let m=new a.P(r.lineVertexArray.getx(g),r.lineVertexArray.gety(g)),v=qi(m.x,m.y,r);if(v.signedDistanceFromCamera>0)return d.projections[g]=v.point,d.anyProjectionOccluded=d.anyProjectionOccluded||v.isOccluded,v.point;let b=g-l.direction;return zt(l.distanceFromAnchor===0?r.tileAnchorPoint:new a.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),m,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,r)}function qi(g,r,l){let d=g+l.translation[0],m=r+l.translation[1],v;return l.pitchWithMap?(v=Gr(d,m,l.pitchedLabelPlaneMatrix,l.getElevation),v.isOccluded=!1):(v=l.transform.projectTileCoordinates(d,m,l.unwrappedTileID,l.getElevation),v.point.x=(.5*v.point.x+.5)*l.width,v.point.y=(.5*-v.point.y+.5)*l.height),v}function Ls(g,r,l,d){if(l.pitchWithMap){let m=[g,r,0,1];return a.aw(m,m,d),l.transform.projectTileCoordinates(m[0]/m[3],m[1]/m[3],l.unwrappedTileID,l.getElevation).point}return{x:g/l.width*2-1,y:1-r/l.height*2}}function Xo(g,r,l){return l.transform.projectTileCoordinates(g,r,l.unwrappedTileID,l.getElevation)}function At(g,r,l){return g._unit()._perp()._mult(r*l)}function Nh(g,r,l,d,m,v,b,E,q){if(E.projectionCache.offsets[g])return E.projectionCache.offsets[g];let O=l.add(r);if(g+q.direction<d||g+q.direction>=m)return E.projectionCache.offsets[g]=O,O;let k=Rt(g+q.direction,E,q),N=At(k.sub(l),b,q.direction),F=l.add(N),j=k.add(N);return E.projectionCache.offsets[g]=a.ax(v,O,F,j)||O,E.projectionCache.offsets[g]}function Yo(g,r,l,d,m,v,b,E,q){let O=d?g-r:g+r,k=O>0?1:-1,N=0;d&&(k*=-1,N=Math.PI),k<0&&(N+=Math.PI);let F,j=k>0?v+m:v+m+1;E.projectionCache.cachedAnchorPoint?F=E.projectionCache.cachedAnchorPoint:(F=qi(E.tileAnchorPoint.x,E.tileAnchorPoint.y,E).point,E.projectionCache.cachedAnchorPoint=F);let V,te,Q=F,re=F,ne=0,ue=0,ae=Math.abs(O),fe=[],ge;for(;ne+ue<=ae;){if(j+=k,j<v||j>=b)return null;ne+=ue,re=Q,te=V;let Re={absOffsetX:ae,direction:k,distanceFromAnchor:ne,previousVertex:re};if(Q=Rt(j,E,Re),l===0)fe.push(re),ge=Q.sub(re);else{let Ee,Ie=Q.sub(re);Ee=Ie.mag()===0?At(Rt(j+k,E,Re).sub(Q),l,k):At(Ie,l,k),te||(te=re.add(Ee)),V=Nh(j,Ee,Q,v,b,te,l,E,Re),fe.push(te),ge=V.sub(te)}ue=ge.mag()}let le=ge._mult((ae-ne)/ue)._add(te||re),xe=N+Math.atan2(Q.y-re.y,Q.x-re.x);return fe.push(le),{point:le,angle:q?xe:0,path:fe}}let Bh=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Na(g,r){for(let l=0;l<g;l++){let d=r.length;r.resize(d+4),r.float32.set(Bh,3*d)}}function kl(g,r,l){let d=r[0],m=r[1];return g[0]=l[0]*d+l[4]*m+l[12],g[1]=l[1]*d+l[5]*m+l[13],g[3]=l[3]*d+l[7]*m+l[15],g}let Or=100;class jh{constructor(r,l=new li(r.width+200,r.height+200,25),d=new li(r.width+200,r.height+200,25)){this.transform=r,this.grid=l,this.ignoredGrid=d,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Or,this.screenBottomBoundary=r.height+Or,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,d,m,v,b,E,q,O,k,N,F){let j=this.projectAndGetPerspectiveRatio(r.anchorPointX+q[0],r.anchorPointY+q[1],v,k,F),V=d*j.perspectiveRatio,te;if(b||E)te=this._projectCollisionBox(r,V,m,v,b,E,q,j,k,N,F);else{let ge=j.x+(N?N.x*V:0),le=j.y+(N?N.y*V:0);te={allPointsOccluded:!1,box:[ge+r.x1*V,le+r.y1*V,ge+r.x2*V,le+r.y2*V]}}let[Q,re,ne,ue]=te.box,ae=b?te.allPointsOccluded:j.isOccluded,fe=ae;return fe||(fe=j.perspectiveRatio<this.perspectiveRatioCutoff),fe||(fe=!this.isInsideGrid(Q,re,ne,ue)),fe||l!=="always"&&this.grid.hitTest(Q,re,ne,ue,l,O)?{box:[Q,re,ne,ue],placeable:!1,offscreen:!1,occluded:ae}:{box:[Q,re,ne,ue],placeable:!0,offscreen:this.isOffscreen(Q,re,ne,ue),occluded:ae}}placeCollisionCircles(r,l,d,m,v,b,E,q,O,k,N,F,j,V){let te=[],Q=new a.P(l.anchorX,l.anchorY),re=this.getPerspectiveRatio(Q.x,Q.y,b,V),ne=(O?v*this.transform.getPitchedTextCorrection(l.anchorX,l.anchorY,b)/re:v*re)/a.aB,ue={getElevation:V,pitchedLabelPlaneMatrix:E,lineVertexArray:d,pitchWithMap:O,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Q,unwrappedTileID:b,width:this.transform.width,height:this.transform.height,translation:j},ae=Ko(ne,m,l.lineOffsetX*ne,l.lineOffsetY*ne,!1,l,!1,ue),fe=!1,ge=!1,le=!0;if(ae){let xe=.5*N*re+F,Re=new a.P(-100,-100),Ee=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Ie=new hr,Me=ae.first,je=ae.last,Ze=[];for(let Ct=Me.path.length-1;Ct>=1;Ct--)Ze.push(Me.path[Ct]);for(let Ct=1;Ct<je.path.length;Ct++)Ze.push(je.path[Ct]);let ze=2.5*xe;if(O){let Ct=this.projectPathToScreenSpace(Ze,ue);Ze=Ct.some(Xt=>Xt.signedDistanceFromCamera<=0)?[]:Ct.map(Xt=>Xt.point)}let at=[];if(Ze.length>0){let Ct=Ze[0].clone(),Xt=Ze[0].clone();for(let nr=1;nr<Ze.length;nr++)Ct.x=Math.min(Ct.x,Ze[nr].x),Ct.y=Math.min(Ct.y,Ze[nr].y),Xt.x=Math.max(Xt.x,Ze[nr].x),Xt.y=Math.max(Xt.y,Ze[nr].y);at=Ct.x>=Re.x&&Xt.x<=Ee.x&&Ct.y>=Re.y&&Xt.y<=Ee.y?[Ze]:Xt.x<Re.x||Ct.x>Ee.x||Xt.y<Re.y||Ct.y>Ee.y?[]:a.ay([Ze],Re.x,Re.y,Ee.x,Ee.y)}for(let Ct of at){Ie.reset(Ct,.25*xe);let Xt=0;Xt=Ie.length<=.5*xe?1:Math.ceil(Ie.paddedLength/ze)+1;for(let nr=0;nr<Xt;nr++){let tr=nr/Math.max(Xt-1,1),yr=Ie.lerp(tr),Ir=yr.x+Or,Pt=yr.y+Or;te.push(Ir,Pt,xe,0);let ar=Ir-xe,Wr=Pt-xe,ui=Ir+xe,gi=Pt+xe;if(le=le&&this.isOffscreen(ar,Wr,ui,gi),ge=ge||this.isInsideGrid(ar,Wr,ui,gi),r!=="always"&&this.grid.hitTestCircle(Ir,Pt,xe,r,k)&&(fe=!0,!q))return{circles:[],offscreen:!1,collisionDetected:fe}}}}return{circles:!q&&fe||!ge||re<this.perspectiveRatioCutoff?[]:te,offscreen:le,collisionDetected:fe}}projectPathToScreenSpace(r,l){let d=function(m,v){let b=a.L();return a.aq(b,v.pitchedLabelPlaneMatrix),m.map(E=>{let q=Gr(E.x,E.y,b,v.getElevation),O=v.transform.projectTileCoordinates(q.point.x,q.point.y,v.unwrappedTileID,v.getElevation);return O.point.x=(.5*O.point.x+.5)*v.width,O.point.y=(.5*-O.point.y+.5)*v.height,O})}(r,l);return function(m){let v=0,b=0,E=0,q=0;for(let O=0;O<m.length;O++)m[O].isOccluded?(E=O+1,q=0):(q++,q>b&&(b=q,v=E));return m.slice(v,v+b)}(d)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let l=[],d=new a.a2;for(let N of r){let F=new a.P(N.x+Or,N.y+Or);d.extend(F),l.push(F)}let{minX:m,minY:v,maxX:b,maxY:E}=d,q=this.grid.query(m,v,b,E).concat(this.ignoredGrid.query(m,v,b,E)),O={},k={};for(let N of q){let F=N.key;if(O[F.bucketInstanceId]===void 0&&(O[F.bucketInstanceId]={}),O[F.bucketInstanceId][F.featureIndex])continue;let j=[new a.P(N.x1,N.y1),new a.P(N.x2,N.y1),new a.P(N.x2,N.y2),new a.P(N.x1,N.y2)];a.az(l,j)&&(O[F.bucketInstanceId][F.featureIndex]=!0,k[F.bucketInstanceId]===void 0&&(k[F.bucketInstanceId]=[]),k[F.bucketInstanceId].push(F.featureIndex))}return k}insertCollisionBox(r,l,d,m,v,b){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:v,collisionGroupID:b,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,d,m,v,b){let E=d?this.ignoredGrid:this.grid,q={bucketInstanceId:m,featureIndex:v,collisionGroupID:b,overlapMode:l};for(let O=0;O<r.length;O+=4)E.insertCircle(q,r[O],r[O+1],r[O+2])}projectAndGetPerspectiveRatio(r,l,d,m,v){if(v){let b;m?(b=[r,l,m(r,l),1],a.aw(b,b,v)):(b=[r,l,0,1],kl(b,b,v));let E=b[3];return{x:(b[0]/E+1)/2*this.transform.width+Or,y:(-b[1]/E+1)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/E*.5,isOccluded:!1,signedDistanceFromCamera:E}}{let b=this.transform.projectTileCoordinates(r,l,d,m);return{x:(b.point.x+1)/2*this.transform.width+Or,y:(1-b.point.y)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5,isOccluded:b.isOccluded,signedDistanceFromCamera:b.signedDistanceFromCamera}}}getPerspectiveRatio(r,l,d,m){let v=this.transform.projectTileCoordinates(r,l,d,m);return .5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5}isOffscreen(r,l,d,m){return d<Or||r>=this.screenRightBoundary||m<Or||l>this.screenBottomBoundary}isInsideGrid(r,l,d,m){return d>=0&&r<this.gridRightBoundary&&m>=0&&l<this.gridBottomBoundary}getViewportMatrix(){let r=a.ag([]);return a.M(r,r,[-100,-100,0]),r}_projectCollisionBox(r,l,d,m,v,b,E,q,O,k,N){let F=1,j=0,V=0,te=1,Q=r.anchorPointX+E[0],re=r.anchorPointY+E[1];if(b&&!v){let Ze=this.projectAndGetPerspectiveRatio(Q+1,re,m,O,N),ze=Ze.x-q.x,at=Math.atan((Ze.y-q.y)/ze)+(ze<0?Math.PI:0),Ct=Math.sin(at),Xt=Math.cos(at);F=Xt,j=Ct,V=-Ct,te=Xt}else if(!b&&v){let Ze=Zt(this.transform);F=Ze.vecEast[0],j=Ze.vecEast[1],V=Ze.vecSouth[0],te=Ze.vecSouth[1]}let ne=q.x,ue=q.y,ae=l;v&&(ne=Q,ue=re,ae=Math.pow(2,-(this.transform.zoom-d.overscaledZ)),ae*=this.transform.getPitchedTextCorrection(Q,re,m),k||(ae*=a.ah(.5+q.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),k&&(ne+=F*k.x*ae+V*k.y*ae,ue+=j*k.x*ae+te*k.y*ae);let fe=r.x1*ae,ge=r.x2*ae,le=(fe+ge)/2,xe=r.y1*ae,Re=r.y2*ae,Ee=(xe+Re)/2,Ie=[{offsetX:fe,offsetY:xe},{offsetX:le,offsetY:xe},{offsetX:ge,offsetY:xe},{offsetX:ge,offsetY:Ee},{offsetX:ge,offsetY:Re},{offsetX:le,offsetY:Re},{offsetX:fe,offsetY:Re},{offsetX:fe,offsetY:Ee}],Me=[];for(let{offsetX:Ze,offsetY:ze}of Ie)Me.push(new a.P(ne+F*Ze+V*ze,ue+j*Ze+te*ze));let je=!1;if(v){let Ze=Me.map(ze=>this.projectAndGetPerspectiveRatio(ze.x,ze.y,m,O,N));je=Ze.some(ze=>!ze.isOccluded),Me=Ze.map(ze=>new a.P(ze.x,ze.y))}else je=!0;return{box:a.aA(Me),allPointsOccluded:!je}}}class gn{constructor(r,l,d,m){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):m&&d?1:0,this.placed=d}isHidden(){return this.opacity===0&&!this.placed}}class sr{constructor(r,l,d,m,v){this.text=new gn(r?r.text:null,l,d,v),this.icon=new gn(r?r.icon:null,l,m,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class x_{constructor(r,l,d){this.text=r,this.icon=l,this.skipFade=d}}class cc{constructor(r,l,d,m,v){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=d,this.bucketIndex=m,this.tileID=v}}class jp{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:d=>d.collisionGroupID===l}}return this.collisionGroups[r]}}function Jo(g,r,l,d,m){let{horizontalAlign:v,verticalAlign:b}=a.aH(g);return new a.P(-(v-.5)*r+d[0]*m,-(b-.5)*l+d[1]*m)}class Qo{constructor(r,l,d,m,v){this.transform=r.clone(),this.terrain=l,this.collisionIndex=new jh(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new jp(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){let l=this.terrain;return l?(d,m)=>l.getElevation(r,d,m):null}getBucketParts(r,l,d,m){let v=d.getBucket(l),b=d.latestFeatureIndex;if(!v||!b||l.id!==v.layerIds[0])return;let E=d.collisionBoxArray,q=v.layers[0].layout,O=v.layers[0].paint,k=Math.pow(2,this.transform.zoom-d.tileID.overscaledZ),N=d.tileSize/a.$,F=d.tileID.toUnwrapped(),j=q.get("text-rotation-alignment")==="map",V=a.aC(d,1,this.transform.zoom),te=a.aD(this.collisionIndex.transform,d,O.get("text-translate"),O.get("text-translate-anchor")),Q=a.aD(this.collisionIndex.transform,d,O.get("icon-translate"),O.get("icon-translate-anchor")),re=jr(j,this.transform,V);this.retainedQueryData[v.bucketInstanceId]=new cc(v.bucketInstanceId,b,v.sourceLayerIndex,v.index,d.tileID);let ne={bucket:v,layout:q,translationText:te,translationIcon:Q,unwrappedTileID:F,pitchedLabelPlaneMatrix:re,scale:k,textPixelRatio:N,holdingForFade:d.holdingForFade(),collisionBoxArray:E,partiallyEvaluatedTextSize:a.an(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(m)for(let ue of v.sortKeyRanges){let{sortKey:ae,symbolInstanceStart:fe,symbolInstanceEnd:ge}=ue;r.push({sortKey:ae,symbolInstanceStart:fe,symbolInstanceEnd:ge,parameters:ne})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:ne})}attemptAnchorPlacement(r,l,d,m,v,b,E,q,O,k,N,F,j,V,te,Q,re,ne,ue,ae){let fe=a.aE[r.textAnchor],ge=[r.textOffset0,r.textOffset1],le=Jo(fe,d,m,ge,v),xe=this.collisionIndex.placeCollisionBox(l,F,q,O,k,E,b,Q,N.predicate,ue,le,ae);if((!ne||this.collisionIndex.placeCollisionBox(ne,F,q,O,k,E,b,re,N.predicate,ue,le,ae).placeable)&&xe.placeable){let Re;if(this.prevPlacement&&this.prevPlacement.variableOffsets[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID]&&this.prevPlacement.placements[j.crossTileID].text&&(Re=this.prevPlacement.variableOffsets[j.crossTileID].anchor),j.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[j.crossTileID]={textOffset:ge,width:d,height:m,anchor:fe,textBoxScale:v,prevAnchor:Re},this.markUsedJustification(V,fe,j,te),V.allowVerticalPlacement&&(this.markUsedOrientation(V,te,j),this.placedOrientations[j.crossTileID]=te),{shift:le,placedGlyphBoxes:xe}}}placeLayerBucketPart(r,l,d){let{bucket:m,layout:v,translationText:b,translationIcon:E,unwrappedTileID:q,pitchedLabelPlaneMatrix:O,textPixelRatio:k,holdingForFade:N,collisionBoxArray:F,partiallyEvaluatedTextSize:j,collisionGroup:V}=r.parameters,te=v.get("text-optional"),Q=v.get("icon-optional"),re=a.aF(v,"text-overlap","text-allow-overlap"),ne=re==="always",ue=a.aF(v,"icon-overlap","icon-allow-overlap"),ae=ue==="always",fe=v.get("text-rotation-alignment")==="map",ge=v.get("text-pitch-alignment")==="map",le=v.get("icon-text-fit")!=="none",xe=v.get("symbol-z-order")==="viewport-y",Re=ne&&(ae||!m.hasIconData()||Q),Ee=ae&&(ne||!m.hasTextData()||te);!m.collisionArrays&&F&&m.deserializeCollisionBoxes(F);let Ie=this.retainedQueryData[m.bucketInstanceId].tileID,Me=this._getTerrainElevationFunc(Ie),je=this.transform.getFastPathSimpleProjectionMatrix(Ie),Ze=(ze,at,Ct)=>{var Xt,nr;if(l[ze.crossTileID])return;if(N)return void(this.placements[ze.crossTileID]=new x_(!1,!1,!1));let tr=!1,yr=!1,Ir=!0,Pt=null,ar={box:null,placeable:!1,offscreen:null,occluded:!1},Wr={placeable:!1},ui=null,gi=null,tn=null,wa=0,ns=0,as=0;at.textFeatureIndex?wa=at.textFeatureIndex:ze.useRuntimeCollisionCircles&&(wa=ze.featureIndex),at.verticalTextFeatureIndex&&(ns=at.verticalTextFeatureIndex);let tu=at.textBox;if(tu){let _n=Hr=>{let ci=a.ao.horizontal;if(m.allowVerticalPlacement&&!Hr&&this.prevPlacement){let Hn=this.prevPlacement.placedOrientations[ze.crossTileID];Hn&&(this.placedOrientations[ze.crossTileID]=Hn,ci=Hn,this.markUsedOrientation(m,ci,ze))}return ci},Sa=(Hr,ci)=>{if(m.allowVerticalPlacement&&ze.numVerticalGlyphVertices>0&&at.verticalTextBox){for(let Hn of m.writingModes)if(Hn===a.ao.vertical?(ar=ci(),Wr=ar):ar=Hr(),ar&&ar.placeable)break}else ar=Hr()},rn=ze.textAnchorOffsetStartIndex,os=ze.textAnchorOffsetEndIndex;if(os===rn){let Hr=(ci,Hn)=>{let Kr=this.collisionIndex.placeCollisionBox(ci,re,k,Ie,q,ge,fe,b,V.predicate,Me,void 0,je);return Kr&&Kr.placeable&&(this.markUsedOrientation(m,Hn,ze),this.placedOrientations[ze.crossTileID]=Hn),Kr};Sa(()=>Hr(tu,a.ao.horizontal),()=>{let ci=at.verticalTextBox;return m.allowVerticalPlacement&&ze.numVerticalGlyphVertices>0&&ci?Hr(ci,a.ao.vertical):{box:null,offscreen:null}}),_n(ar&&ar.placeable)}else{let Hr=a.aE[(nr=(Xt=this.prevPlacement)===null||Xt===void 0?void 0:Xt.variableOffsets[ze.crossTileID])===null||nr===void 0?void 0:nr.anchor],ci=(Kr,zc,iu)=>{let _o=Kr.x2-Kr.x1,Ta=Kr.y2-Kr.y1,ss=ze.textBoxScale,d0=le&&ue==="never"?zc:null,Rn=null,f0=re==="never"?1:2,km="never";Hr&&f0++;for(let Sd=0;Sd<f0;Sd++){for(let Td=rn;Td<os;Td++){let ls=m.textAnchorOffsets.get(Td);if(Hr&&ls.textAnchor!==Hr)continue;let xo=this.attemptAnchorPlacement(ls,Kr,_o,Ta,ss,fe,ge,k,Ie,q,V,km,ze,m,iu,b,E,d0,Me);if(xo&&(Rn=xo.placedGlyphBoxes,Rn&&Rn.placeable))return tr=!0,Pt=xo.shift,Rn}Hr?Hr=null:km=re}return d&&!Rn&&(Rn={box:this.collisionIndex.placeCollisionBox(tu,"always",k,Ie,q,ge,fe,b,V.predicate,Me,void 0,je).box,offscreen:!1,placeable:!1,occluded:!1}),Rn};Sa(()=>ci(tu,at.iconBox,a.ao.horizontal),()=>{let Kr=at.verticalTextBox;return m.allowVerticalPlacement&&(!ar||!ar.placeable)&&ze.numVerticalGlyphVertices>0&&Kr?ci(Kr,at.verticalIconBox,a.ao.vertical):{box:null,occluded:!0,offscreen:null}}),ar&&(tr=ar.placeable,Ir=ar.offscreen);let Hn=_n(ar&&ar.placeable);if(!tr&&this.prevPlacement){let Kr=this.prevPlacement.variableOffsets[ze.crossTileID];Kr&&(this.variableOffsets[ze.crossTileID]=Kr,this.markUsedJustification(m,Kr.anchor,ze,Hn))}}}if(ui=ar,tr=ui&&ui.placeable,Ir=ui&&ui.offscreen,ze.useRuntimeCollisionCircles){let _n=m.text.placedSymbolArray.get(ze.centerJustifiedTextSymbolIndex),Sa=a.ap(m.textSizeData,j,_n),rn=v.get("text-padding");gi=this.collisionIndex.placeCollisionCircles(re,_n,m.lineVertexArray,m.glyphOffsetArray,Sa,q,O,d,ge,V.predicate,ze.collisionCircleDiameter,rn,b,Me),gi.circles.length&&gi.collisionDetected&&!d&&a.w("Collisions detected, but collision boxes are not shown"),tr=ne||gi.circles.length>0&&!gi.collisionDetected,Ir=Ir&&gi.offscreen}if(at.iconFeatureIndex&&(as=at.iconFeatureIndex),at.iconBox){let _n=Sa=>this.collisionIndex.placeCollisionBox(Sa,ue,k,Ie,q,ge,fe,E,V.predicate,Me,le&&Pt?Pt:void 0,je);Wr&&Wr.placeable&&at.verticalIconBox?(tn=_n(at.verticalIconBox),yr=tn.placeable):(tn=_n(at.iconBox),yr=tn.placeable),Ir=Ir&&tn.offscreen}let ru=te||ze.numHorizontalGlyphVertices===0&&ze.numVerticalGlyphVertices===0,el=Q||ze.numIconVertices===0;ru||el?el?ru||(yr=yr&&tr):tr=yr&&tr:yr=tr=yr&&tr;let tl=yr&&tn.placeable;if(tr&&ui.placeable&&this.collisionIndex.insertCollisionBox(ui.box,re,v.get("text-ignore-placement"),m.bucketInstanceId,Wr&&Wr.placeable&&ns?ns:wa,V.ID),tl&&this.collisionIndex.insertCollisionBox(tn.box,ue,v.get("icon-ignore-placement"),m.bucketInstanceId,as,V.ID),gi&&tr&&this.collisionIndex.insertCollisionCircles(gi.circles,re,v.get("text-ignore-placement"),m.bucketInstanceId,wa,V.ID),d&&this.storeCollisionData(m.bucketInstanceId,Ct,at,ui,tn,gi),ze.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[ze.crossTileID]=new x_((tr||Re)&&!(ui!=null&&ui.occluded),(yr||Ee)&&!(tn!=null&&tn.occluded),Ir||m.justReloaded),l[ze.crossTileID]=!0};if(xe){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let ze=m.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let at=ze.length-1;at>=0;--at){let Ct=ze[at];Ze(m.symbolInstances.get(Ct),m.collisionArrays[Ct],Ct)}}else for(let ze=r.symbolInstanceStart;ze<r.symbolInstanceEnd;ze++)Ze(m.symbolInstances.get(ze),m.collisionArrays[ze],ze);m.justReloaded=!1}storeCollisionData(r,l,d,m,v,b){if(d.textBox||d.iconBox){let E,q;this.collisionBoxArrays.has(r)?E=this.collisionBoxArrays.get(r):(E=new Map,this.collisionBoxArrays.set(r,E)),E.has(l)?q=E.get(l):(q={text:null,icon:null},E.set(l,q)),d.textBox&&(q.text=m.box),d.iconBox&&(q.icon=v.box)}if(b){let E=this.collisionCircleArrays[r];E===void 0&&(E=this.collisionCircleArrays[r]=[]);for(let q=0;q<b.circles.length;q+=4)E.push(b.circles[q+0]-Or),E.push(b.circles[q+1]-Or),E.push(b.circles[q+2]),E.push(b.collisionDetected?1:0)}}markUsedJustification(r,l,d,m){let v;v=m===a.ao.vertical?d.verticalPlacedTextSymbolIndex:{left:d.leftJustifiedTextSymbolIndex,center:d.centerJustifiedTextSymbolIndex,right:d.rightJustifiedTextSymbolIndex}[a.aG(l)];let b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex,d.verticalPlacedTextSymbolIndex];for(let E of b)E>=0&&(r.text.placedSymbolArray.get(E).crossTileID=v>=0&&E!==v?0:d.crossTileID)}markUsedOrientation(r,l,d){let m=l===a.ao.horizontal||l===a.ao.horizontalOnly?l:0,v=l===a.ao.vertical?l:0,b=[d.leftJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.rightJustifiedTextSymbolIndex];for(let E of b)r.text.placedSymbolArray.get(E).placedOrientation=m;d.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(d.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let l=this.prevPlacement,d=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;let m=l?l.symbolFadeChange(r):1,v=l?l.opacities:{},b=l?l.variableOffsets:{},E=l?l.placedOrientations:{};for(let q in this.placements){let O=this.placements[q],k=v[q];k?(this.opacities[q]=new sr(k,m,O.text,O.icon),d=d||O.text!==k.text.placed||O.icon!==k.icon.placed):(this.opacities[q]=new sr(null,m,O.text,O.icon,O.skipFade),d=d||O.text||O.icon)}for(let q in v){let O=v[q];if(!this.opacities[q]){let k=new sr(O,m,!1,!1);k.isHidden()||(this.opacities[q]=k,d=d||O.text.placed||O.icon.placed)}}for(let q in b)this.variableOffsets[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.variableOffsets[q]=b[q]);for(let q in E)this.placedOrientations[q]||!this.opacities[q]||this.opacities[q].isHidden()||(this.placedOrientations[q]=E[q]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");d?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){let d={};for(let m of l){let v=m.getBucket(r);v&&m.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,m.tileID,d,m.collisionBoxArray)}}updateBucketOpacities(r,l,d,m){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();let v=r.layers[0],b=v.layout,E=new sr(null,0,!1,!1,!0),q=b.get("text-allow-overlap"),O=b.get("icon-allow-overlap"),k=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),N=b.get("text-rotation-alignment")==="map",F=b.get("text-pitch-alignment")==="map",j=b.get("icon-text-fit")!=="none",V=new sr(null,0,q&&(O||!r.hasIconData()||b.get("icon-optional")),O&&(q||!r.hasTextData()||b.get("text-optional")),!0);!r.collisionArrays&&m&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(m);let te=(re,ne,ue)=>{for(let ae=0;ae<ne/4;ae++)re.opacityVertexArray.emplaceBack(ue);re.hasVisibleVertices=re.hasVisibleVertices||ue!==Ll},Q=this.collisionBoxArrays.get(r.bucketInstanceId);for(let re=0;re<r.symbolInstances.length;re++){let ne=r.symbolInstances.get(re),{numHorizontalGlyphVertices:ue,numVerticalGlyphVertices:ae,crossTileID:fe}=ne,ge=this.opacities[fe];d[fe]?ge=E:ge||(ge=V,this.opacities[fe]=ge),d[fe]=!0;let le=ne.numIconVertices>0,xe=this.placedOrientations[ne.crossTileID],Re=xe===a.ao.vertical,Ee=xe===a.ao.horizontal||xe===a.ao.horizontalOnly;if(ue>0||ae>0){let Me=$p(ge.text);te(r.text,ue,Re?Ll:Me),te(r.text,ae,Ee?Ll:Me);let je=ge.text.isHidden();[ne.rightJustifiedTextSymbolIndex,ne.centerJustifiedTextSymbolIndex,ne.leftJustifiedTextSymbolIndex].forEach(at=>{at>=0&&(r.text.placedSymbolArray.get(at).hidden=je||Re?1:0)}),ne.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ne.verticalPlacedTextSymbolIndex).hidden=je||Ee?1:0);let Ze=this.variableOffsets[ne.crossTileID];Ze&&this.markUsedJustification(r,Ze.anchor,ne,xe);let ze=this.placedOrientations[ne.crossTileID];ze&&(this.markUsedJustification(r,"left",ne,ze),this.markUsedOrientation(r,ze,ne))}if(le){let Me=$p(ge.icon),je=!(j&&ne.verticalPlacedIconSymbolIndex&&Re);ne.placedIconSymbolIndex>=0&&(te(r.icon,ne.numIconVertices,je?Me:Ll),r.icon.placedSymbolArray.get(ne.placedIconSymbolIndex).hidden=ge.icon.isHidden()),ne.verticalPlacedIconSymbolIndex>=0&&(te(r.icon,ne.numVerticalIconVertices,je?Ll:Me),r.icon.placedSymbolArray.get(ne.verticalPlacedIconSymbolIndex).hidden=ge.icon.isHidden())}let Ie=Q&&Q.has(re)?Q.get(re):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){let Me=r.collisionArrays[re];if(Me){let je=new a.P(0,0);if(Me.textBox||Me.verticalTextBox){let Ze=!0;if(k){let ze=this.variableOffsets[fe];ze?(je=Jo(ze.anchor,ze.width,ze.height,ze.textOffset,ze.textBoxScale),N&&je._rotate(F?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Ze=!1}if(Me.textBox||Me.verticalTextBox){let ze;Me.textBox&&(ze=Re),Me.verticalTextBox&&(ze=Ee),Up(r.textCollisionBox.collisionVertexArray,ge.text.placed,!Ze||ze,Ie.text,je.x,je.y)}}if(Me.iconBox||Me.verticalIconBox){let Ze=!!(!Ee&&Me.verticalIconBox),ze;Me.iconBox&&(ze=Ze),Me.verticalIconBox&&(ze=!Ze),Up(r.iconCollisionBox.collisionVertexArray,ge.icon.placed,ze,Ie.icon,j?je.x:0,j?je.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){let d=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*d>r}setStale(){this.stale=!0}}function Up(g,r,l,d,m,v){d&&d.length!==0||(d=[0,0,0,0]);let b=d[0]-Or,E=d[1]-Or,q=d[2]-Or,O=d[3]-Or;g.emplaceBack(r?1:0,l?1:0,m||0,v||0,b,E),g.emplaceBack(r?1:0,l?1:0,m||0,v||0,q,E),g.emplaceBack(r?1:0,l?1:0,m||0,v||0,q,O),g.emplaceBack(r?1:0,l?1:0,m||0,v||0,b,O)}let b_=Math.pow(2,25),w_=Math.pow(2,24),Dl=Math.pow(2,17),S_=Math.pow(2,16),US=Math.pow(2,9),$S=Math.pow(2,8),VS=Math.pow(2,1);function $p(g){if(g.opacity===0&&!g.placed)return 0;if(g.opacity===1&&g.placed)return 4294967295;let r=g.placed?1:0,l=Math.floor(127*g.opacity);return l*b_+r*w_+l*Dl+r*S_+l*US+r*$S+l*VS+r}let Ll=0;class Vp{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,d,m,v){let b=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(b,m,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((E,q)=>E.sortKey-q.sortKey));this._currentPartIndex<b.length;)if(l.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,d),this._currentPartIndex++,v())return!0;return!1}}class Gp{constructor(r,l,d,m,v,b,E,q){this.placement=new Qo(r,l,b,E,q),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,l,d){let m=D.now(),v=()=>!this._forceFullPlacement&&D.now()-m>2;for(;this._currentPlacementIndex>=0;){let b=l[r[this._currentPlacementIndex]],E=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=E)&&(!b.maxzoom||b.maxzoom>E)){if(this._inProgressLayer||(this._inProgressLayer=new Vp(b)),this._inProgressLayer.continuePlacement(d[b.source],this.placement,this._showCollisionBoxes,b,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let zl=512/a.$/2;class Zp{constructor(r,l,d){this.tileID=r,this.bucketInstanceId=d,this._symbolsByKey={};let m=new Map;for(let v=0;v<l.length;v++){let b=l.get(v),E=b.key,q=m.get(E);q?q.push(b):m.set(E,[b])}for(let[v,b]of m){let E={positions:b.map(q=>({x:Math.floor(q.anchorX*zl),y:Math.floor(q.anchorY*zl)})),crossTileIDs:b.map(q=>q.crossTileID)};if(E.positions.length>128){let q=new a.aI(E.positions.length,16,Uint16Array);for(let{x:O,y:k}of E.positions)q.add(O,k);q.finish(),delete E.positions,E.index=q}this._symbolsByKey[v]=E}}getScaledCoordinates(r,l){let{x:d,y:m,z:v}=this.tileID.canonical,{x:b,y:E,z:q}=l.canonical,O=zl/Math.pow(2,q-v),k=(E*a.$+r.anchorY)*O,N=m*a.$*zl;return{x:Math.floor((b*a.$+r.anchorX)*O-d*a.$*zl),y:Math.floor(k-N)}}findMatches(r,l,d){let m=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let v=0;v<r.length;v++){let b=r.get(v);if(b.crossTileID)continue;let E=this._symbolsByKey[b.key];if(!E)continue;let q=this.getScaledCoordinates(b,l);if(E.index){let O=E.index.range(q.x-m,q.y-m,q.x+m,q.y+m).sort();for(let k of O){let N=E.crossTileIDs[k];if(!d[N]){d[N]=!0,b.crossTileID=N;break}}}else if(E.positions)for(let O=0;O<E.positions.length;O++){let k=E.positions[O],N=E.crossTileIDs[O];if(Math.abs(k.x-q.x)<=m&&Math.abs(k.y-q.y)<=m&&!d[N]){d[N]=!0,b.crossTileID=N;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class Wp{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class GS{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let l=Math.round((r-this.lng)/360);if(l!==0)for(let d in this.indexes){let m=this.indexes[d],v={};for(let b in m){let E=m[b];E.tileID=E.tileID.unwrapTo(E.tileID.wrap+l),v[E.tileID.key]=E}this.indexes[d]=v}this.lng=r}addBucket(r,l,d){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<l.symbolInstances.length;v++)l.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});let m=this.usedCrossTileIDs[r.overscaledZ];for(let v in this.indexes){let b=this.indexes[v];if(Number(v)>r.overscaledZ)for(let E in b){let q=b[E];q.tileID.isChildOf(r)&&q.findMatches(l.symbolInstances,r,m)}else{let E=b[r.scaledTo(Number(v)).key];E&&E.findMatches(l.symbolInstances,r,m)}}for(let v=0;v<l.symbolInstances.length;v++){let b=l.symbolInstances.get(v);b.crossTileID||(b.crossTileID=d.generate(),m[b.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Zp(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(let d of l.getCrossTileIDsLists())for(let m of d)delete this.usedCrossTileIDs[r][m]}removeStaleBuckets(r){let l=!1;for(let d in this.indexes){let m=this.indexes[d];for(let v in m)r[m[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(d,m[v]),delete m[v],l=!0)}return l}}class Fl{constructor(){this.layerIndexes={},this.crossTileIDs=new Wp,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,d){let m=this.layerIndexes[r.id];m===void 0&&(m=this.layerIndexes[r.id]=new GS);let v=!1,b={};m.handleWrapJump(d);for(let E of l){let q=E.getBucket(r);q&&r.id===q.layerIds[0]&&(q.bucketInstanceId||(q.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(E.tileID,q,this.crossTileIDs)&&(v=!0),b[q.bucketInstanceId]=!0)}return m.removeStaleBuckets(b)&&(v=!0),v}pruneUnusedLayers(r){let l={};r.forEach(d=>{l[d]=!0});for(let d in this.layerIndexes)l[d]||delete this.layerIndexes[d]}}var hc="void main() {fragColor=vec4(1.0);}";let pa={prelude:Ft(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:Ft("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:Ft("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:Ft(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:Ft(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ft(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ft(hc,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:Ft(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:Ft(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ft("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ft("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:Ft(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:Ft("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:Ft(hc,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:Ft(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:Ft(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:Ft(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:Ft(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ft(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ft(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ft(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ft(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:Ft(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ft(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ft(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ft(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ft(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:Ft(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ft(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ft(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ft("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ft("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ft("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:Ft("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:Ft(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:Ft("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ft(g,r){let l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=r.match(/in ([\w]+) ([\w]+)/g),m=g.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=v?v.concat(m):m,E={};return{fragmentSource:g=g.replace(l,(q,O,k,N,F)=>(E[F]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${F}
in ${k} ${N} ${F};
#else
uniform ${k} ${N} u_${F};
#endif
`:`
#ifdef HAS_UNIFORM_u_${F}
    ${k} ${N} ${F} = u_${F};
#endif
`)),vertexSource:r=r.replace(l,(q,O,k,N,F)=>{let j=N==="float"?"vec2":"vec4",V=F.match(/color/)?"color":j;return E[F]?O==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${k} ${j} a_${F};
out ${k} ${N} ${F};
#else
uniform ${k} ${N} u_${F};
#endif
`:V==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = a_${F};
#else
    ${k} ${N} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${F} = unpack_mix_${V}(a_${F}, u_${F}_t);
#else
    ${k} ${N} ${F} = u_${F};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${F}
uniform lowp float u_${F}_t;
in ${k} ${j} a_${F};
#else
uniform ${k} ${N} u_${F};
#endif
`:V==="vec4"?`
#ifndef HAS_UNIFORM_u_${F}
    ${k} ${N} ${F} = a_${F};
#else
    ${k} ${N} ${F} = u_${F};
#endif
`:`
#ifndef HAS_UNIFORM_u_${F}
    ${k} ${N} ${F} = unpack_mix_${V}(a_${F}, u_${F}_t);
#else
    ${k} ${N} ${F} = u_${F};
#endif
`}),staticAttributes:d,staticUniforms:b}}class zs{constructor(r,l,d){this.vertexBuffer=r,this.indexBuffer=l,this.segments=d}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var es=a.aJ([{name:"a_pos",type:"Int16",components:2}]);let mo="#define PROJECTION_MERCATOR",Fs="mercator";class Nt{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Fs}get shaderDefine(){return mo}get shaderPreludeCode(){return pa.projectionMercator}get vertexShaderPreludeCode(){return pa.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aK.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,l,d,m,v){if(this._cachedMesh)return this._cachedMesh;let b=new a.aL;b.emplaceBack(0,0),b.emplaceBack(a.$,0),b.emplaceBack(0,a.$),b.emplaceBack(a.$,a.$);let E=r.createVertexBuffer(b,es.members),q=a.aM.simpleSegment(0,0,4,2),O=new a.aN;O.emplaceBack(1,0,2),O.emplaceBack(1,2,3);let k=r.createIndexBuffer(O);return this._cachedMesh=new zs(E,k,q),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Ns{constructor(r=0,l=0,d=0,m=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(d)||d<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=d,this.right=m}interpolate(r,l,d){return l.top!=null&&r.top!=null&&(this.top=a.C.number(r.top,l.top,d)),l.bottom!=null&&r.bottom!=null&&(this.bottom=a.C.number(r.bottom,l.bottom,d)),l.left!=null&&r.left!=null&&(this.left=a.C.number(r.left,l.left,d)),l.right!=null&&r.right!=null&&(this.right=a.C.number(r.right,l.right,d)),this}getCenter(r,l){let d=a.ah((this.left+r-this.right)/2,0,r),m=a.ah((this.top+l-this.bottom)/2,0,l);return new a.P(d,m)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Ns(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function Uh(g,r){if(!g.renderWorldCopies||g.lngRange)return;let l=r.lng-g.center.lng;r.lng+=l>180?-360:l<-180?360:0}function $h(g){return Math.max(0,Math.floor(g))}class Yi{constructor(r,l,d,m,v,b){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=b===void 0||!!b,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=m==null?0:m,this._maxPitch=v==null?60:v,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=$h(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Ns,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,l,d){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=$h(this._zoom),this._scale=a.af(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Ns(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!d&&r.autoCalculateNearFarZ,l&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){let l=a.aO(r,-180,180)*Math.PI/180;var d,m,v,b,E,q,O,k,N;this._bearingInRadians!==l&&(this._unmodified=!1,this._bearingInRadians=l,this._calcMatrices(),this._rotationMatrix=S(),d=this._rotationMatrix,v=-this._bearingInRadians,b=(m=this._rotationMatrix)[0],E=m[1],q=m[2],O=m[3],k=Math.sin(v),N=Math.cos(v),d[0]=b*N+q*k,d[1]=E*N+O*k,d[2]=b*-k+q*N,d[3]=E*-k+O*N)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){let l=a.ah(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==l&&(this._unmodified=!1,this._pitchInRadians=l,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){let l=r/180*Math.PI;this._rollInRadians!==l&&(this._unmodified=!1,this._rollInRadians=l,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aP(this._fovInRadians)}setFov(r){r=a.ah(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=a.ae(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){let l=this.getConstrained(this._center,r).zoom;this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this._tileZoom=Math.max(0,Math.floor(l)),this._scale=a.af(l),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,l){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=l,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,d){this._unmodified=!1,this._edgeInsets.interpolate(r,l,d),this._constrain(),this._calcMatrices()}resize(r,l,d=!0){this._width=r,this._height=l,d&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Rr([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-a.ai,a.ai])}getConstrained(r,l){return this._callbacks.getConstrained(r,l)}getCameraQueryGeometry(r,l){if(l.length===1)return[l[0],r];{let{minX:d,minY:m,maxX:v,maxY:b}=a.a2.fromPoints(l).extend(r);return[new a.P(d,m),new a.P(v,m),new a.P(v,b),new a.P(d,b),new a.P(d,m)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let r=this._unmodified,{center:l,zoom:d}=this.getConstrained(this.center,this.zoom);this.setCenter(l),this.setZoom(d),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=a.ag(new Float64Array(16));a.N(r,r,[this._width/2,-this._height/2,1]),a.M(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=a.ag(new Float64Array(16)),a.N(r,r,[1,-1,1]),a.M(r,r,[-1,-1,0]),a.N(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,l,d,m){let v=d!==void 0?d:this.bearing,b=m=m!==void 0?m:this.pitch,E=a.a1.fromLngLat(r,l),q=-Math.cos(a.ae(b)),O=Math.sin(a.ae(b)),k=O*Math.sin(a.ae(v)),N=-O*Math.cos(a.ae(v)),F=this.elevation,j=l-F,V;q*j>=0||Math.abs(q)<.1?(V=1e4,F=l+V*q):V=-j/q;let te,Q,re=a.aQ(1,E.y),ne=0;do{if(ne+=1,ne>10)break;Q=V/re,te=new a.a1(E.x+k*Q,E.y+N*Q),re=1/te.meterInMercatorCoordinateUnits()}while(Math.abs(V-Q*re)>1e-12);return{center:te.toLngLat(),elevation:F,zoom:a.ak(this.height/2/Math.tan(this.fovInRadians/2)/Q/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;let l=a.aj(1,this.center.lat)*this.worldSize,d=this.cameraToCenterDistance/l,m=a.a1.fromLngLat(this.center,this.elevation),v=qe(this.center,this.elevation,this.pitch,this.bearing,d);this._elevation=r;let b=this.calculateCenterFromCameraLngLatAlt(v.toLngLat(),a.aQ(v.z,m.y),this.bearing,this.pitch);this._elevation=b.elevation,this._center=b.center,this.setZoom(b.zoom)}getCameraPoint(){let r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let r=a.aj(1,this.center.lat)*this.worldSize;return qe(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];let l=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/l,r.canonical.y/l,1/l/a.$,1/l/a.$]}}class pi{constructor(r,l){this.min=r,this.max=l,this.center=a.aR([],a.aS([],this.min,this.max),.5)}quadrant(r){let l=[r%2==0,r<2],d=a.aT(this.min),m=a.aT(this.max);for(let v=0;v<l.length;v++)d[v]=l[v]?this.min[v]:this.center[v],m[v]=l[v]?this.center[v]:this.max[v];return m[2]=this.max[2],new pi(d,m)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let l=!0;for(let d=0;d<r.planes.length;d++){let m=this.intersectsPlane(r.planes[d]);if(m===0)return 0;m===1&&(l=!1)}return l?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let l=r[3],d=r[3];for(let m=0;m<3;m++)r[m]>0?(l+=r[m]*this.min[m],d+=r[m]*this.max[m]):(d+=r[m]*this.min[m],l+=r[m]*this.max[m]);return l>=0?2:d<0?0:1}}class Ji{distanceToTile2d(r,l,d,m){let v=m.distanceX([r,l]),b=m.distanceY([r,l]);return Math.hypot(v,b)}getWrap(r,l,d){return d}getTileBoundingVolume(r,l,d,m){var v,b;let E=0,q=0;if(m!=null&&m.terrain){let k=new a.Z(r.z,l,r.z,r.x,r.y),N=m.terrain.getMinMaxElevation(k);E=(v=N.minElevation)!==null&&v!==void 0?v:Math.min(0,d),q=(b=N.maxElevation)!==null&&b!==void 0?b:Math.max(0,d)}let O=1<<r.z;return new pi([l+r.x/O,r.y/O,E],[l+(r.x+1)/O,(r.y+1)/O,q])}allowVariableZoom(r,l){let d=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,m=a.ah(78.5-d/2,0,60);return!!l.terrain||r.pitch>m}allowWorldCopies(){return!0}prepareNextFrame(){}}class Zr{constructor(r,l,d){this.points=r,this.planes=l,this.aabb=d}static fromInvProjectionMatrix(r,l=1,d=0,m,v){let b=v?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],E=Math.pow(2,d),q=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(F=>function(j,V,te,Q){let re=a.aw([],j,V),ne=1/re[3]/te*Q;return a.aY(re,re,[ne,ne,1/re[3],ne])}(F,r,l,E));m&&function(F,j,V,te){let Q=te?4:0,re=te?0:4,ne=0,ue=[],ae=[];for(let le=0;le<4;le++){let xe=a.aU([],F[le+re],F[le+Q]),Re=a.aZ(xe);a.aR(xe,xe,1/Re),ue.push(Re),ae.push(xe)}for(let le=0;le<4;le++){let xe=a.a_(F[le+Q],ae[le],V);ne=xe!==null&&xe>=0?Math.max(ne,xe):Math.max(ne,ue[le])}let fe=function(le,xe){let Re=a.aU([],le[xe[0]],le[xe[1]]),Ee=a.aU([],le[xe[2]],le[xe[1]]),Ie=[0,0,0,0];return a.aV(Ie,a.aW([],Re,Ee)),Ie[3]=-a.aX(Ie,le[xe[0]]),Ie}(F,j),ge=function(le,xe){let Re=a.a$(le),Ee=a.b0([],le,1/Re),Ie=a.aU([],xe,a.aR([],Ee,a.aX(xe,Ee))),Me=a.a$(Ie);if(Me>0){let je=Math.sqrt(1-Ee[3]*Ee[3]),Ze=a.aR([],Ee,-Ee[3]),ze=a.aS([],Ze,a.aR([],Ie,je/Me));return a.b1(xe,ze)}return null}(V,fe);if(ge!==null){let le=ge/a.aX(ae[0],fe);ne=Math.min(ne,le)}for(let le=0;le<4;le++){let xe=Math.min(ne,ue[le]);F[le+re]=[F[le+Q][0]+ae[le][0]*xe,F[le+Q][1]+ae[le][1]*xe,F[le+Q][2]+ae[le][2]*xe,1]}}(q,b[0],m,v);let O=b.map(F=>{let j=a.aU([],q[F[0]],q[F[1]]),V=a.aU([],q[F[2]],q[F[1]]),te=a.aV([],a.aW([],j,V)),Q=-a.aX(te,q[F[1]]);return te.concat(Q)}),k=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],N=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let F of q)for(let j=0;j<3;j++)k[j]=Math.min(k[j],F[j]),N[j]=Math.max(N[j],F[j]);return new Zr(q,O,new pi(k,N))}}class lr{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,l,d){return this._helper.interpolatePadding(r,l,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,l,d=!0){this._helper.resize(r,l,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,l){this._helper.overrideNearFarZ(r,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,l){}constructor(r,l,d,m,v){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Yi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(b,E)=>this.getConstrained(b,E)},r,l,d,m,v),this._coveringTilesDetailsProvider=new Ji}clone(){let r=new lr;return r.apply(this),r}apply(r,l,d){this._helper.apply(r,l,d)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){let l=[new a.b2(0,r)];if(this._helper._renderWorldCopies){let d=this.screenPointToMercatorCoordinate(new a.P(0,0)),m=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),v=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),b=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),E=Math.floor(Math.min(d.x,m.x,v.x,b.x)),q=Math.floor(Math.max(d.x,m.x,v.x,b.x)),O=1;for(let k=E-O;k<=q+O;k++)k!==0&&l.push(new a.b2(k,r))}return l}getCameraFrustum(){return Zr.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){let l=this.screenPointToLocation(this.centerPoint,r),d=r?r.getElevationForLngLatZoom(l,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(d)}setLocationAtPoint(r,l){let d=a.aj(this.elevation,this.center.lat),m=this.screenPointToMercatorCoordinateAtZ(l,d),v=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,d),b=a.a1.fromLngLat(r),E=new a.a1(b.x-(m.x-v.x),b.y-(m.y-v.y));this.setCenter(E==null?void 0:E.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,l){return l?this.coordinatePoint(a.a1.fromLngLat(r),l.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.a1.fromLngLat(r))}screenPointToLocation(r,l){var d;return(d=this.screenPointToMercatorCoordinate(r,l))===null||d===void 0?void 0:d.toLngLat()}screenPointToMercatorCoordinate(r,l){if(l){let d=l.pointCoordinate(r);if(d!=null)return d}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,l){let d=l||0,m=[r.x,r.y,0,1],v=[r.x,r.y,1,1];a.aw(m,m,this._pixelMatrixInverse),a.aw(v,v,this._pixelMatrixInverse);let b=m[3],E=v[3],q=m[1]/b,O=v[1]/E,k=m[2]/b,N=v[2]/E,F=k===N?0:(d-k)/(N-k);return new a.a1(a.C.number(m[0]/b,v[0]/E,F)/this.worldSize,a.C.number(q,O,F)/this.worldSize,d)}coordinatePoint(r,l=0,d=this._pixelMatrix){let m=[r.x*this.worldSize,r.y*this.worldSize,l,1];return a.aw(m,m,d),new a.P(m[0]/m[3],m[1]/m[3])}getBounds(){let r=Math.max(0,this._helper._height/2-me(this));return new Rr().extend(this.screenPointToLocation(new a.P(0,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(r,l){return l?l.pointCoordinate(r)!=null:r.y>this.height/2-me(this)}calculatePosMatrix(r,l=!1,d){var m;let v=(m=r.key)!==null&&m!==void 0?m:a.b3(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),b=l?this._alignedPosMatrixCache:this._posMatrixCache;if(b.has(v)){let O=b.get(v);return d?O.f32:O.f64}let E=be(r,this.worldSize);a.O(E,l?this._alignedProjMatrix:this._viewProjMatrix,E);let q={f64:E,f32:new Float32Array(E)};return b.set(v,q),d?q.f32:q.f64}calculateFogMatrix(r){let l=r.key,d=this._fogMatrixCacheF32;if(d.has(l))return d.get(l);let m=be(r,this.worldSize);return a.O(m,this._fogMatrix,m),d.set(l,new Float32Array(m)),d.get(l)}getConstrained(r,l){l=a.ah(+l,this.minZoom,this.maxZoom);let d={center:new a.S(r.lng,r.lat),zoom:l},m=this._helper._lngRange;if(!this._helper._renderWorldCopies&&m===null){let ue=179.9999999999;m=[-ue,ue]}let v=this.tileSize*a.af(d.zoom),b=0,E=v,q=0,O=v,k=0,N=0,{x:F,y:j}=this.size;if(this._helper._latRange){let ue=this._helper._latRange;b=a.U(ue[1])*v,E=a.U(ue[0])*v,E-b<j&&(k=j/(E-b))}m&&(q=a.aO(a.V(m[0])*v,0,v),O=a.aO(a.V(m[1])*v,0,v),O<q&&(O+=v),O-q<F&&(N=F/(O-q)));let{x:V,y:te}=Y(v,r),Q,re,ne=Math.max(N||0,k||0);if(ne){let ue=new a.P(N?(O+q)/2:V,k?(E+b)/2:te);return d.center=se(v,ue).wrap(),d.zoom+=a.ak(ne),d}if(this._helper._latRange){let ue=j/2;te-ue<b&&(re=b+ue),te+ue>E&&(re=E-ue)}if(m){let ue=(q+O)/2,ae=V;this._helper._renderWorldCopies&&(ae=a.aO(V,ue-v/2,ue+v/2));let fe=F/2;ae-fe<q&&(Q=q+fe),ae+fe>O&&(Q=O-fe)}if(Q!==void 0||re!==void 0){let ue=new a.P(Q!=null?Q:V,re!=null?re:te);d.center=se(v,ue).wrap()}return d}calculateCenterFromCameraLngLatAlt(r,l,d,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,l,d,m)}_calculateNearFarZIfNeeded(r,l,d){if(!this._helper.autoCalculateNearFarZ)return;let m=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),v=r-m*this._helper._pixelPerMeter/Math.cos(l),b=m<0?v:r,E=Math.PI/2+this.pitchInRadians,q=a.ae(this.fov)*(Math.abs(Math.cos(a.ae(this.roll)))*this.height+Math.abs(Math.sin(a.ae(this.roll)))*this.width)/this.height*(.5+d.y/this.height),O=Math.sin(q)*b/Math.sin(a.ah(Math.PI-E-q,.01,Math.PI-.01)),k=me(this),N=Math.atan(k/this._helper.cameraToCenterDistance),F=a.ae(.75),j=N>F?2*N*(.5+d.y/(2*k)):F,V=Math.sin(j)*b/Math.sin(a.ah(Math.PI-E-j,.01,Math.PI-.01)),te=Math.min(O,V);this._helper._farZ=1.01*(Math.cos(Math.PI/2-l)*te+b),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let r=this.centerOffset,l=Y(this.worldSize,this.center),d=l.x,m=l.y;this._helper._pixelPerMeter=a.aj(1,this.center.lat)*this.worldSize;let v=a.ae(Math.min(this.pitch,W)),b=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(v)),E;this._calculateNearFarZIfNeeded(b,v,r),E=new Float64Array(16),a.b4(E,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.aq(this._invProjMatrix,E),E[8]=2*-r.x/this._helper._width,E[9]=2*r.y/this._helper._height,this._projectionMatrix=a.b5(E),a.N(E,E,[1,-1,1]),a.M(E,E,[0,0,-this._helper.cameraToCenterDistance]),a.b6(E,E,-this.rollInRadians),a.b7(E,E,this.pitchInRadians),a.b6(E,E,-this.bearingInRadians),a.M(E,E,[-d,-m,0]),this._mercatorMatrix=a.N([],E,[this.worldSize,this.worldSize,this.worldSize]),a.N(E,E,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,E),a.M(E,E,[0,0,-this.elevation]),this._viewProjMatrix=E,this._invViewProjMatrix=a.aq([],E);let q=[0,0,-1,1];a.aw(q,q,this._invViewProjMatrix),this._cameraPosition=[q[0]/q[3],q[1]/q[3],q[2]/q[3]],this._fogMatrix=new Float64Array(16),a.b4(this._fogMatrix,this.fovInRadians,this.width/this.height,b,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,a.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.b6(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.b7(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.b6(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.M(this._fogMatrix,this._fogMatrix,[-d,-m,0]),a.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,E);let O=this._helper._width%2/2,k=this._helper._height%2/2,N=Math.cos(this.bearingInRadians),F=Math.sin(-this.bearingInRadians),j=d-Math.round(d)+N*O+F*k,V=m-Math.round(m)+N*k+F*O,te=new Float64Array(E);if(a.M(te,te,[j>.5?j-1:j,V>.5?V-1:V,0]),this._alignedProjMatrix=te,E=a.aq(new Float64Array(16),this._pixelMatrix),!E)throw new Error("failed to invert matrix");this._pixelMatrixInverse=E,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let r=this.screenPointToMercatorCoordinate(new a.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.aw(l,l,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let r=a.aj(1,this.center.lat)*this.worldSize;return qe(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,l){let d=a.a1.fromLngLat(r),m=[d.x*this.worldSize,d.y*this.worldSize,l,1];return a.aw(m,m,this._viewProjMatrix),m[2]/m[3]}getProjectionData(r){let{overscaledTileID:l,aligned:d,applyTerrainMatrix:m}=r,v=this._helper.getMercatorTileCoordinates(l),b=l?this.calculatePosMatrix(l,d,!0):null,E;return E=l&&l.terrainRttPosMatrix32f&&m?l.terrainRttPosMatrix32f:b||a.b8(),{mainMatrix:E,tileMercatorCoords:v,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:E}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,l,d){return 1}transformLightDirection(r){return a.aT(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,l,d,m){let v=this.calculatePosMatrix(d),b;m?(b=[r,l,m(r,l),1],a.aw(b,b,v)):(b=[r,l,0,1],kl(b,b,v));let E=b[3];return{point:new a.P(b[0]/E,b[1]/E),signedDistanceFromCamera:E,isOccluded:!1}}populateCache(r){for(let l of r)this.calculatePosMatrix(l)}getMatrixForModel(r,l){let d=a.a1.fromLngLat(r,l),m=d.meterInMercatorCoordinateUnits(),v=a.b9();return a.M(v,v,[d.x,d.y,d.z]),a.b6(v,v,Math.PI),a.b7(v,v,Math.PI/2),a.N(v,v,[-m,m,m]),v}getProjectionDataForCustomLayer(r=!0){let l=new a.Z(0,0,0,0,0),d=this.getProjectionData({overscaledTileID:l,applyGlobeMatrix:r}),m=be(l,this.worldSize);a.O(m,this._viewProjMatrix,m),d.tileMercatorCoords=[0,0,1,1];let v=[a.$,a.$,this.worldSize/this._helper.pixelsPerMeter],b=a.ba();return a.N(b,m,v),d.fallbackMatrix=b,d.mainMatrix=b,d}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function T_(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Qi(g){if(g.useSlerp){if(g.k<1){let r=a.bb(g.startEulerAngles.roll,g.startEulerAngles.pitch,g.startEulerAngles.bearing),l=a.bb(g.endEulerAngles.roll,g.endEulerAngles.pitch,g.endEulerAngles.bearing),d=new Float64Array(4);a.bc(d,r,l,g.k);let m=a.bd(d);g.tr.setRoll(m.roll),g.tr.setPitch(m.pitch),g.tr.setBearing(m.bearing)}else g.tr.setRoll(g.endEulerAngles.roll),g.tr.setPitch(g.endEulerAngles.pitch),g.tr.setBearing(g.endEulerAngles.bearing);}else g.tr.setRoll(a.C.number(g.startEulerAngles.roll,g.endEulerAngles.roll,g.k)),g.tr.setPitch(a.C.number(g.startEulerAngles.pitch,g.endEulerAngles.pitch,g.k)),g.tr.setBearing(a.C.number(g.startEulerAngles.bearing,g.endEulerAngles.bearing,g.k))}function Cn(g,r,l,d,m){let v=m.padding,b=Y(m.worldSize,l.getNorthWest()),E=Y(m.worldSize,l.getNorthEast()),q=Y(m.worldSize,l.getSouthEast()),O=Y(m.worldSize,l.getSouthWest()),k=a.ae(-d),N=b.rotate(k),F=E.rotate(k),j=q.rotate(k),V=O.rotate(k),te=new a.P(Math.max(N.x,F.x,V.x,j.x),Math.max(N.y,F.y,V.y,j.y)),Q=new a.P(Math.min(N.x,F.x,V.x,j.x),Math.min(N.y,F.y,V.y,j.y)),re=te.sub(Q),ne=(m.width-(v.left+v.right+r.left+r.right))/re.x,ue=(m.height-(v.top+v.bottom+r.top+r.bottom))/re.y;if(ue<0||ne<0)return void T_();let ae=Math.min(a.ak(m.scale*Math.min(ne,ue)),g.maxZoom),fe=a.P.convert(g.offset),ge=new a.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(a.ae(d)),le=fe.add(ge).mult(m.scale/a.af(ae));return{center:se(m.worldSize,b.add(q).div(2).sub(le)),zoom:ae,bearing:d}}class Ni{get useGlobeControls(){return!1}handlePanInertia(r,l){let d=r.mag(),m=Math.abs(me(l));return{easingOffset:r.mult(Math.min(.75*m/d,1)),easingCenter:l.center}}handleMapControlsRollPitchBearingZoom(r,l){r.bearingDelta&&l.setBearing(l.bearing+r.bearingDelta),r.pitchDelta&&l.setPitch(l.pitch+r.pitchDelta),r.rollDelta&&l.setRoll(l.roll+r.rollDelta),r.zoomDelta&&l.setZoom(l.zoom+r.zoomDelta)}handleMapControlsPan(r,l,d){r.around.distSqr(l.centerPoint)<.01||l.setLocationAtPoint(d,r.around)}cameraForBoxAndBearing(r,l,d,m,v){return Cn(r,l,d,m,v)}handleJumpToCenterZoom(r,l){r.zoom!==(l.zoom!==void 0?+l.zoom:r.zoom)&&r.setZoom(+l.zoom),l.center!==void 0&&r.setCenter(a.S.convert(l.center))}handleEaseTo(r,l){let d=r.zoom,m=r.padding,v={roll:r.roll,pitch:r.pitch,bearing:r.bearing},b={roll:l.roll===void 0?r.roll:l.roll,pitch:l.pitch===void 0?r.pitch:l.pitch,bearing:l.bearing===void 0?r.bearing:l.bearing},E=l.zoom!==void 0,q=!r.isPaddingEqual(l.padding),O=!1,k=E?+l.zoom:r.zoom,N=r.centerPoint.add(l.offsetAsPoint),F=r.screenPointToLocation(N),{center:j,zoom:V}=r.getConstrained(a.S.convert(l.center||F),k!=null?k:d);Uh(r,j);let te=Y(r.worldSize,F),Q=Y(r.worldSize,j).sub(te),re=a.af(V-d);return O=V!==d,{easeFunc:ne=>{if(O&&r.setZoom(a.C.number(d,V,ne)),a.be(v,b)||Qi({startEulerAngles:v,endEulerAngles:b,tr:r,k:ne,useSlerp:v.roll!=b.roll}),q&&(r.interpolatePadding(m,l.padding,ne),N=r.centerPoint.add(l.offsetAsPoint)),l.around)r.setLocationAtPoint(l.around,l.aroundPoint);else{let ue=a.af(r.zoom-d),ae=V>d?Math.min(2,re):Math.max(.5,re),fe=Math.pow(ae,1-ne),ge=se(r.worldSize,te.add(Q.mult(ne*fe)).mult(ue));r.setLocationAtPoint(r.renderWorldCopies?ge.wrap():ge,N)}},isZooming:O,elevationCenter:j}}handleFlyTo(r,l){let d=l.zoom!==void 0,m=r.zoom,v=r.getConstrained(a.S.convert(l.center||l.locationAtOffset),d?+l.zoom:m),b=v.center,E=v.zoom;Uh(r,b);let q=Y(r.worldSize,l.locationAtOffset),O=Y(r.worldSize,b).sub(q),k=O.mag(),N=a.af(E-m),F;if(l.minZoom!==void 0){let j=Math.min(+l.minZoom,m,E),V=r.getConstrained(b,j).zoom;F=a.af(V-m)}return{easeFunc:(j,V,te,Q)=>{r.setZoom(j===1?E:m+a.ak(V));let re=j===1?b:se(r.worldSize,q.add(O.mult(te)).mult(V));r.setLocationAtPoint(r.renderWorldCopies?re.wrap():re,Q)},scaleOfZoom:N,targetCenter:b,scaleOfMinZoom:F,pixelPathLength:k}}}class pr{constructor(r,l,d){this.blendFunction=r,this.blendColor=l,this.mask=d}}pr.Replace=[1,0],pr.disabled=new pr(pr.Replace,a.bf.transparent,[!1,!1,!1,!1]),pr.unblended=new pr(pr.Replace,a.bf.transparent,[!0,!0,!0,!0]),pr.alphaBlended=new pr([1,771],a.bf.transparent,[!0,!0,!0,!0]);let Bs=2305;class vt{constructor(r,l,d){this.enable=r,this.mode=l,this.frontFace=d}}vt.disabled=new vt(!1,1029,Bs),vt.backCCW=new vt(!0,1029,Bs),vt.frontCCW=new vt(!0,1028,Bs);class Et{constructor(r,l,d){this.func=r,this.mask=l,this.range=d}}Et.ReadOnly=!1,Et.ReadWrite=!0,Et.disabled=new Et(519,Et.ReadOnly,[0,1]);let go=7680;class Wt{constructor(r,l,d,m,v,b){this.test=r,this.ref=l,this.mask=d,this.fail=m,this.depthFail=v,this.pass=b}}Wt.disabled=new Wt({func:519,mask:0},0,0,go,go,go);let Mn=new WeakMap;function Ba(g){var r;if(Mn.has(g))return Mn.get(g);{let l=(r=g.getParameter(g.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Mn.set(g,l),l}}class ja{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;let l=r.context,d=l.gl;this._texFormat=d.RGBA,this._texType=d.UNSIGNED_BYTE;let m=new a.aL;m.emplaceBack(-1,-1),m.emplaceBack(2,-1),m.emplaceBack(-1,2);let v=new a.aN;v.emplaceBack(0,1,2),this._fullscreenTriangle=new zs(l.createVertexBuffer(m,es.members),l.createIndexBuffer(v),a.aM.simpleSegment(0,0,m.length,v.length)),this._resultBuffer=new Uint8Array(4),l.activeTexture.set(d.TEXTURE1);let b=d.createTexture();d.bindTexture(d.TEXTURE_2D,b),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST),d.texImage2D(d.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=l.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(b),Ba(d)&&(this._pbo=d.createBuffer(),d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.bufferData(d.PIXEL_PACK_BUFFER,4,d.STREAM_READ),d.bindBuffer(d.PIXEL_PACK_BUFFER,null))}destroy(){let r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,l){let d=this._updateCount;return this._readbackQueue?d>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():d>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,l),this._updateCount++,this._measuredError}_bindFramebuffer(){let r=this._cachedRenderContext.context,l=r.gl;r.activeTexture.set(l.TEXTURE1),l.bindTexture(l.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,l){let d=this._cachedRenderContext.context,m=d.gl;if(this._bindFramebuffer(),d.viewport.set([0,0,this._texWidth,this._texHeight]),d.clear({color:a.bf.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(d,m.TRIANGLES,Et.disabled,Wt.disabled,pr.unblended,vt.disabled,((v,b)=>({u_input:v,u_output_expected:b}))(r,l),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Ba(m)){m.bindBuffer(m.PIXEL_PACK_BUFFER,this._pbo),m.readBuffer(m.COLOR_ATTACHMENT0),m.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),m.bindBuffer(m.PIXEL_PACK_BUFFER,null);let v=m.fenceSync(m.SYNC_GPU_COMMANDS_COMPLETE,0);m.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:v}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Ba(r)){let l=r.clientWaitSync(this._readbackQueue.sync,0,0);if(l===r.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(l===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=ja._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let l=0;return l+=r[0]/256,l+=r[1]/65536,l+=r[2]/16777216,r[3]<127&&(l=-l),l/128}}let Vh=a.$/128;function Hp(g,r){let l=g.granularity!==void 0?Math.max(g.granularity,1):1,d=l+(g.generateBorders?2:0),m=l+(g.extendToNorthPole||g.generateBorders?1:0)+(g.extendToSouthPole||g.generateBorders?1:0),v=d+1,b=m+1,E=g.generateBorders?-1:0,q=g.generateBorders||g.extendToNorthPole?-1:0,O=l+(g.generateBorders?1:0),k=l+(g.generateBorders||g.extendToSouthPole?1:0),N=v*b,F=d*m*6,j=v*b>65536;if(j&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let V=j||r==="32bit",te=new Int16Array(2*N),Q=0;for(let ue=q;ue<=k;ue++)for(let ae=E;ae<=O;ae++){let fe=ae/l*a.$;ae===-1&&(fe=-Vh),ae===l+1&&(fe=a.$+Vh);let ge=ue/l*a.$;ue===-1&&(ge=g.extendToNorthPole?a.bh:-Vh),ue===l+1&&(ge=g.extendToSouthPole?a.bi:a.$+Vh),te[Q++]=fe,te[Q++]=ge}let re=V?new Uint32Array(F):new Uint16Array(F),ne=0;for(let ue=0;ue<m;ue++)for(let ae=0;ae<d;ae++){let fe=ae+1+ue*v,ge=ae+(ue+1)*v,le=ae+1+(ue+1)*v;re[ne++]=ae+ue*v,re[ne++]=ge,re[ne++]=fe,re[ne++]=fe,re[ne++]=ge,re[ne++]=le}return{vertices:te.buffer.slice(0),indices:re.buffer.slice(0),uses32bitIndices:V}}let Nl=new a.aK({fill:new a.bj(128,2),line:new a.bj(512,0),tile:new a.bj(128,32),stencil:new a.bj(128,1),circle:3});class dc{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return pa.projectionGlobe}get vertexShaderPreludeCode(){return pa.projectionMercator.vertexSource}get subdivisionGranularity(){return Nl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new ja(r));let l=a.U(this._errorQueryLatitudeDegrees),d=2*Math.atan(Math.exp(Math.PI-l*Math.PI*2))-.5*Math.PI,m=this._errorMeasurement.updateErrorLoop(l,d),v=D.now();m!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=m,this._errorMeasurementLastChangeTime=v);let b=Math.min(Math.max((v-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bk(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bl(b))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,l,d,m,v){let b=(v==="stencil"?Nl.stencil:Nl.tile).getGranularityForZoomLevel(l.z);return this._getMesh(r,{granularity:b,generateBorders:d,extendToNorthPole:l.y===0&&m,extendToSouthPole:l.y===(1<<l.z)-1&&m})}_getMesh(r,l){let d=this._getMeshKey(l);if(d in this._tileMeshCache)return this._tileMeshCache[d];let m=function(v,b){let E=Hp(b,"16bit"),q=a.aL.deserialize({arrayBuffer:E.vertices,length:E.vertices.byteLength/2/2}),O=a.aN.deserialize({arrayBuffer:E.indices,length:E.indices.byteLength/2/3});return new zs(v.createVertexBuffer(q,es.members),v.createIndexBuffer(O),a.aM.simpleSegment(0,0,q.length,O.length))}(r,l);return this._tileMeshCache[d]=m,m}recalculate(r){}hasTransition(){let r=D.now(),l=!1;return l=l||(r-this._errorMeasurementLastChangeTime)/1e3<.7,l=l||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,l}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}let Gh=new a.r({type:new a.D(a.v.projection.type)});class Zh extends a.E{constructor(r){super(),this._transitionable=new a.t(Gh),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.F(0)),this._mercatorProjection=new Nt,this._verticalPerspectiveProjection=new dc}get transitionState(){let r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof a.bm){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,l,d,m,v){return this.currentProjection.getMeshFromTileID(r,l,d,m,v)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function Wh(g){let r=Bl(g.worldSize,g.center.lat);return 2*Math.PI*r}function ma(g,r,l,d,m){let v=1/(1<<m),b=r/a.$*v+d*v,E=a.bo((g/a.$*v+l*v)*Math.PI*2+Math.PI,2*Math.PI),q=2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI,O=Math.cos(q),k=new Float64Array(3);return k[0]=Math.sin(E)*O,k[1]=Math.sin(q),k[2]=Math.cos(E)*O,k}function mi(g){return function(r,l){let d=Math.cos(l),m=new Float64Array(3);return m[0]=Math.sin(r)*d,m[1]=Math.sin(l),m[2]=Math.cos(r)*d,m}(g.lng*Math.PI/180,g.lat*Math.PI/180)}function Bl(g,r){return g/(2*Math.PI)/Math.cos(r*Math.PI/180)}function fc(g){let r=Math.asin(g[1])/Math.PI*180,l=Math.sqrt(g[0]*g[0]+g[2]*g[2]);if(l>1e-6){let d=g[0]/l,m=Math.acos(g[2]/l),v=(d>0?m:-m)/Math.PI*180;return new a.S(a.aO(v,-180,180),r)}return new a.S(0,r)}function js(g){return Math.cos(g*Math.PI/180)}function kr(g,r){let l=js(g),d=js(r);return a.ak(d/l)}function E_(g,r){let l=g.rotate(r.bearingInRadians),d=r.zoom+kr(r.center.lat,0),m=a.bk(1/js(r.center.lat),1/js(Math.min(Math.abs(r.center.lat),60)),a.bn(d,7,3,0,1)),v=360/Wh({worldSize:r.worldSize,center:{lat:r.center.lat}});return new a.S(r.center.lng-l.x*v*m,a.ah(r.center.lat+l.y*v,-a.ai,a.ai))}function pc(g){let r=.5*g,l=Math.sin(r),d=Math.cos(r);return Math.log(l+d)-Math.log(d-l)}function Kp(g,r,l,d){let m=g.lat+l*d;if(Math.abs(l)>1){let v=(Math.sign(g.lat+l)!==Math.sign(g.lat)?-Math.abs(g.lat):Math.abs(g.lat))*Math.PI/180,b=Math.abs(g.lat+l)*Math.PI/180,E=pc(v+d*(b-v)),q=pc(v),O=pc(b);return new a.S(g.lng+r*((E-q)/(O-q)),m)}return new a.S(g.lng+r*d,m)}class ZS{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=r}swapBuffers(){if(!this._hadAnyChanges)return;let r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(r,l,d,m){let v=`${r.z}_${r.x}_${r.y}_${m!=null&&m.terrain?"t":""}`,b=this._cache.get(v);if(b)return b;let E=this._cachePrevious.get(v);if(E)return this._cache.set(v,E),E;let q=this._boundingVolumeFactory(r,l,d,m);return this._cache.set(v,q),this._hadAnyChanges=!0,q}}class jl{constructor(r,l,d,m){this.min=d,this.max=m,this.points=r,this.planes=l}static fromAabb(r,l){let d=[];for(let m=0;m<8;m++)d.push([1&~m?r[0]:l[0],(m>>1&1)==1?l[1]:r[1],(m>>2&1)==1?l[2]:r[2]]);return new jl(d,[[-1,0,0,l[0]],[1,0,0,-r[0]],[0,-1,0,l[1]],[0,1,0,-r[1]],[0,0,-1,l[2]],[0,0,1,-r[2]]],r,l)}static fromCenterSizeAngles(r,l,d){let m=a.br([],d[0],d[1],d[2]),v=a.bs([],[l[0],0,0],m),b=a.bs([],[0,l[1],0],m),E=a.bs([],[0,0,l[2]],m),q=[...r],O=[...r];for(let N=0;N<8;N++)for(let F=0;F<3;F++){let j=r[F]+v[F]*(1&~N?-1:1)+b[F]*((N>>1&1)==1?1:-1)+E[F]*((N>>2&1)==1?1:-1);q[F]=Math.min(q[F],j),O[F]=Math.max(O[F],j)}let k=[];for(let N=0;N<8;N++){let F=[...r];a.aS(F,F,a.aR([],v,1&~N?-1:1)),a.aS(F,F,a.aR([],b,(N>>1&1)==1?1:-1)),a.aS(F,F,a.aR([],E,(N>>2&1)==1?1:-1)),k.push(F)}return new jl(k,[[...v,-a.aX(v,k[0])],[...b,-a.aX(b,k[0])],[...E,-a.aX(E,k[0])],[-v[0],-v[1],-v[2],-a.aX(v,k[7])],[-b[0],-b[1],-b[2],-a.aX(b,k[7])],[-E[0],-E[1],-E[2],-a.aX(E,k[7])]],q,O)}intersectsFrustum(r){let l=!0,d=this.points.length,m=this.planes.length,v=r.planes.length,b=r.points.length;for(let E=0;E<v;E++){let q=r.planes[E],O=0;for(let k=0;k<d;k++){let N=this.points[k];q[0]*N[0]+q[1]*N[1]+q[2]*N[2]+q[3]>=0&&O++}if(O===0)return 0;O<d&&(l=!1)}if(l)return 2;for(let E=0;E<m;E++){let q=this.planes[E],O=0;for(let k=0;k<b;k++){let N=r.points[k];q[0]*N[0]+q[1]*N[1]+q[2]*N[2]+q[3]>=0&&O++}if(O===0)return 0}return 1}intersectsPlane(r){let l=this.points.length,d=0;for(let m=0;m<l;m++){let v=this.points[m];r[0]*v[0]+r[1]*v[1]+r[2]*v[2]+r[3]>=0&&d++}return d===l?2:d===0?0:1}}function Pi(g,r,l){let d=g-r;return d<0?-d:Math.max(0,d-l)}function mc(g,r,l,d,m){let v=g-l,b;return b=v<0?Math.min(-v,1+v-m):v>1?Math.min(Math.max(v-m,0),1-v):0,Math.max(b,Pi(r,d,m))}class Ua{constructor(){this._boundingVolumeCache=new ZS(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(r,l,d,m){let v=1<<d.z,b=1/v,E=d.x/v,q=d.y/v,O=2;return O=Math.min(O,mc(r,l,E,q,b)),O=Math.min(O,mc(r,l,E+.5,-q-b,b)),O=Math.min(O,mc(r,l,E+.5,2-q-b,b)),O}getWrap(r,l,d){let m=1<<l.z,v=1/m,b=l.x/m,E=Pi(r.x,b,v),q=Pi(r.x,b-1,v),O=Pi(r.x,b+1,v),k=Math.min(E,q,O);return k===O?1:k===q?-1:0}allowVariableZoom(r,l){return st(r,l)>4}allowWorldCopies(){return!1}getTileBoundingVolume(r,l,d,m){return this._boundingVolumeCache.getTileBoundingVolume(r,l,d,m)}_computeTileBoundingVolume(r,l,d,m){var v,b;let E=0,q=0;if(m!=null&&m.terrain){let O=new a.Z(r.z,l,r.z,r.x,r.y),k=m.terrain.getMinMaxElevation(O);E=(v=k.minElevation)!==null&&v!==void 0?v:Math.min(0,d),q=(b=k.maxElevation)!==null&&b!==void 0?b:Math.max(0,d)}if(E/=a.bu,q/=a.bu,E+=1,q+=1,r.z<=0)return jl.fromAabb([-q,-q,-q],[q,q,q]);if(r.z===1)return jl.fromAabb([r.x===0?-q:0,r.y===0?0:-q,-q],[r.x===0?0:q,r.y===0?q:0,q]);{let O=[ma(0,0,r.x,r.y,r.z),ma(a.$,0,r.x,r.y,r.z),ma(a.$,a.$,r.x,r.y,r.z),ma(0,a.$,r.x,r.y,r.z)],k=[];for(let Ie of O)k.push(a.aR([],Ie,q));if(q!==E)for(let Ie of O)k.push(a.aR([],Ie,E));r.y===0&&k.push([0,1,0]),r.y===(1<<r.z)-1&&k.push([0,-1,0]);let N=[1,1,1],F=[-1,-1,-1];for(let Ie of k)for(let Me=0;Me<3;Me++)N[Me]=Math.min(N[Me],Ie[Me]),F[Me]=Math.max(F[Me],Ie[Me]);let j=ma(a.$/2,a.$/2,r.x,r.y,r.z),V=a.aW([],[0,1,0],j);a.aV(V,V);let te=a.aW([],j,V);a.aV(te,te);let Q=a.aW([],O[2],O[1]);a.aV(Q,Q);let re=a.aW([],O[0],O[3]);a.aV(re,re),k.push(a.aR([],j,q)),r.y>=(1<<r.z)/2&&k.push(a.aR([],ma(a.$/2,0,r.x,r.y,r.z),q)),r.y<(1<<r.z)/2&&k.push(a.aR([],ma(a.$/2,a.$,r.x,r.y,r.z),q));let ne=gc(j,k),ue=gc(te,k),ae=[-j[0],-j[1],-j[2],ne.max],fe=[j[0],j[1],j[2],-ne.min],ge=[-te[0],-te[1],-te[2],ue.max],le=[te[0],te[1],te[2],-ue.min],xe=[...Q,0],Re=[...re,0],Ee=[];return r.y===0?Ee.push(a.bt(Re,xe,ae),a.bt(Re,xe,fe)):Ee.push(a.bt(ge,xe,ae),a.bt(ge,xe,fe),a.bt(ge,Re,ae),a.bt(ge,Re,fe)),r.y===(1<<r.z)-1?Ee.push(a.bt(Re,xe,ae),a.bt(Re,xe,fe)):Ee.push(a.bt(le,xe,ae),a.bt(le,xe,fe),a.bt(le,Re,ae),a.bt(le,Re,fe)),new jl(Ee,[ae,fe,ge,le,xe,Re],N,F)}}}function gc(g,r){let l=1/0,d=-1/0;for(let m of r){let v=a.aX(g,m);l=Math.min(l,v),d=Math.max(d,v)}return{min:l,max:d}}class vc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,l,d){return this._helper.interpolatePadding(r,l,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,l){this._helper.resize(r,l)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,l){this._helper.overrideNearFarZ(r,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=a.bv(),this._projectionMatrix=a.b9(),this._globeViewProjMatrix32f=a.b8(),this._globeViewProjMatrixNoCorrection=a.b9(),this._globeViewProjMatrixNoCorrectionInverted=a.b9(),this._globeProjMatrixInverted=a.b9(),this._cameraPosition=a.bp(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Yi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,l)=>this.getConstrained(r,l)}),this._coveringTilesDetailsProvider=new Ua}clone(){let r=new vc;return r.apply(this),r}apply(r,l){this._globeLatitudeErrorCorrectionRadians=l||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let r=a.bp();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){let{overscaledTileID:l,applyGlobeMatrix:d}=r,m=this._helper.getMercatorTileCoordinates(l);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:m,clippingPlane:this._cachedClippingPlane,projectionTransition:d?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){let l=this.pitchInRadians,d=this.cameraToCenterDistance/r,m=Math.sin(l)*d,v=Math.cos(l)*d+1,b=1/Math.sqrt(m*m+v*v)*1,E=-m,q=v,O=Math.sqrt(E*E+q*q);E/=O,q/=O;let k=[0,E,q];a.bw(k,k,[0,0,0],-this.bearingInRadians),a.bx(k,k,[0,0,0],-1*this.center.lat*Math.PI/180),a.by(k,k,[0,0,0],this.center.lng*Math.PI/180);let N=1/a.aZ(k);return a.aR(k,k,N),[...k,-b*N]}isLocationOccluded(r){return!this.isSurfacePointVisible(mi(r))}transformLightDirection(r){let l=this._helper._center.lng*Math.PI/180,d=this._helper._center.lat*Math.PI/180,m=Math.cos(d),v=[Math.sin(l)*m,Math.sin(d),Math.cos(l)*m],b=[v[2],0,-v[0]],E=[0,0,0];a.aW(E,b,v),a.aV(b,b),a.aV(E,E);let q=[0,0,0];return a.aV(q,[b[0]*r[0]+E[0]*r[1]+v[0]*r[2],b[1]*r[0]+E[1]*r[1]+v[1]*r[2],b[2]*r[0]+E[2]*r[1]+v[2]*r[2]]),q}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,l,d){let m=function(E,q,O){let k=1/(1<<O.z);return new a.a1(E/a.$*k+O.x*k,q/a.$*k+O.y*k)}(r,l,d.canonical),v=(b=m.y,[a.bo(m.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-b*Math.PI*2))-.5*Math.PI]);var b;return this.getCircleRadiusCorrection()/Math.cos(v[1])}projectTileCoordinates(r,l,d,m){let v=d.canonical,b=ma(r,l,v.x,v.y,v.z),E=1+(m?m(r,l):0)/a.bu,q=[b[0]*E,b[1]*E,b[2]*E,1];a.aw(q,q,this._globeViewProjMatrixNoCorrection);let O=this._cachedClippingPlane,k=O[0]*b[0]+O[1]*b[1]+O[2]*b[2]+O[3]<0;return{point:new a.P(q[0]/q[3],q[1]/q[3]),signedDistanceFromCamera:q[3],isOccluded:k}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let r=Bl(this.worldSize,this.center.lat),l=a.ba(),d=a.ba();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),a.b4(l,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let m=this.centerOffset;l[8]=2*-m.x/this._helper._width,l[9]=2*m.y/this._helper._height,this._projectionMatrix=a.b5(l),this._globeProjMatrixInverted=a.ba(),a.aq(this._globeProjMatrixInverted,l),a.M(l,l,[0,0,-this.cameraToCenterDistance]),a.b6(l,l,this.rollInRadians),a.b7(l,l,-this.pitchInRadians),a.b6(l,l,this.bearingInRadians),a.M(l,l,[0,0,-r]);let v=a.bp();v[0]=r,v[1]=r,v[2]=r,a.b7(d,l,this.center.lat*Math.PI/180),a.bz(d,d,-this.center.lng*Math.PI/180),a.N(d,d,v),this._globeViewProjMatrixNoCorrection=d,a.b7(l,l,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bz(l,l,-this.center.lng*Math.PI/180),a.N(l,l,v),this._globeViewProjMatrix32f=new Float32Array(l),this._globeViewProjMatrixNoCorrectionInverted=a.ba(),a.aq(this._globeViewProjMatrixNoCorrectionInverted,d);let b=a.bp();this._cameraPosition=a.bp(),this._cameraPosition[2]=this.cameraToCenterDistance/r,a.bw(this._cameraPosition,this._cameraPosition,b,-this.rollInRadians),a.bx(this._cameraPosition,this._cameraPosition,b,this.pitchInRadians),a.bw(this._cameraPosition,this._cameraPosition,b,-this.bearingInRadians),a.aS(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bx(this._cameraPosition,this._cameraPosition,b,-this.center.lat*Math.PI/180),a.by(this._cameraPosition,this._cameraPosition,b,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);let E=a.b5(this._globeViewProjMatrixNoCorrectionInverted);a.N(E,E,[1,1,-1]),this._cachedFrustum=Zr.fromInvProjectionMatrix(E,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(r){a.w("calculateFogMatrix is not supported on globe projection.");let l=a.ba();return a.ag(l),l}getVisibleUnwrappedCoordinates(r){return[new a.b2(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,l){if(!this._globeViewProjMatrixNoCorrection)return 1;let d=mi(r);a.aR(d,d,1+l/a.bu);let m=a.bv();return a.aw(m,[d[0],d[1],d[2],1],this._globeViewProjMatrixNoCorrection),m[2]/m[3]}populateCache(r){}getBounds(){let r=.5*this.width,l=.5*this.height,d=[new a.P(0,0),new a.P(r,0),new a.P(this.width,0),new a.P(this.width,l),new a.P(this.width,this.height),new a.P(r,this.height),new a.P(0,this.height),new a.P(0,l)],m=[];for(let N of d)m.push(this.unprojectScreenPoint(N));let v=0,b=0,E=0,q=0,O=this.center;for(let N of m){let F=a.bA(O.lng,N.lng),j=a.bA(O.lat,N.lat);F<b&&(b=F),F>v&&(v=F),j<q&&(q=j),j>E&&(E=j)}let k=[O.lng+b,O.lat+q,O.lng+v,O.lat+E];return this.isSurfacePointOnScreen([0,1,0])&&(k[3]=90,k[0]=-180,k[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(k[1]=-90,k[0]=-180,k[2]=180),new Rr(k)}getConstrained(r,l){let d=a.ah(r.lat,-a.ai,a.ai),m=a.ah(+l,this.minZoom+kr(0,d),this.maxZoom);return{center:new a.S(r.lng,d),zoom:m}}calculateCenterFromCameraLngLatAlt(r,l,d,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,l,d,m)}setLocationAtPoint(r,l){let d=mi(this.unprojectScreenPoint(l)),m=mi(r),v=a.bp();a.bB(v);let b=a.bp();a.by(b,d,v,-this.center.lng*Math.PI/180),a.bx(b,b,v,this.center.lat*Math.PI/180);let E=m[0]*m[0]+m[2]*m[2],q=b[0]*b[0];if(E<q)return;let O=Math.sqrt(E-q),k=-O,N=a.bC(m[0],m[2],b[0],O),F=a.bC(m[0],m[2],b[0],k),j=a.bp();a.by(j,m,v,-N);let V=a.bC(j[1],j[2],b[1],b[2]),te=a.bp();a.by(te,m,v,-F);let Q=a.bC(te[1],te[2],b[1],b[2]),re=.5*Math.PI,ne=V>=-re&&V<=re,ue=Q>=-re&&Q<=re,ae,fe;if(ne&&ue){let Re=this.center.lng*Math.PI/180,Ee=this.center.lat*Math.PI/180;a.bD(N,Re)+a.bD(V,Ee)<a.bD(F,Re)+a.bD(Q,Ee)?(ae=N,fe=V):(ae=F,fe=Q)}else if(ne)ae=N,fe=V;else{if(!ue)return;ae=F,fe=Q}let ge=ae/Math.PI*180,le=fe/Math.PI*180,xe=this.center.lat;this.setCenter(new a.S(ge,a.ah(le,-90,90))),this.setZoom(this.zoom+kr(xe,this.center.lat))}locationToScreenPoint(r,l){let d=mi(r);if(l){let m=l.getElevationForLngLatZoom(r,this._helper._tileZoom);a.aR(d,d,1+m/a.bu)}return this._projectSurfacePointToScreen(d)}_projectSurfacePointToScreen(r){let l=a.bv();return a.aw(l,[...r,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],new a.P((.5*l[0]+.5)*this.width,(.5*-l[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,l){if(l){let d=l.pointCoordinate(r);if(d)return d}return a.a1.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,l){var d;return(d=this.screenPointToMercatorCoordinate(r,l))===null||d===void 0?void 0:d.toLngLat()}isPointOnMapSurface(r,l){let d=this._cameraPosition,m=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(d,m)}getRayDirectionFromPixel(r){let l=a.bv();l[0]=r.x/this.width*2-1,l[1]=-1*(r.y/this.height*2-1),l[2]=1,l[3]=1,a.aw(l,l,this._globeViewProjMatrixNoCorrectionInverted),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3];let d=a.bp();d[0]=l[0]-this._cameraPosition[0],d[1]=l[1]-this._cameraPosition[1],d[2]=l[2]-this._cameraPosition[2];let m=a.bp();return a.aV(m,d),m}isSurfacePointVisible(r){let l=this._cachedClippingPlane;return l[0]*r[0]+l[1]*r[1]+l[2]*r[2]+l[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;let l=a.bv();return a.aw(l,[...r,1],this._globeViewProjMatrixNoCorrection),l[0]/=l[3],l[1]/=l[3],l[2]/=l[3],l[0]>-1&&l[0]<1&&l[1]>-1&&l[1]<1&&l[2]>-1&&l[2]<1}rayPlanetIntersection(r,l){let d=a.aX(r,l),m=a.bp(),v=a.bp();a.aR(v,l,d),a.aU(m,r,v);let b=1-a.aX(m,m);if(b<0)return null;let E=a.aX(r,r)-1,q=-d+(d<0?1:-1)*Math.sqrt(b),O=E/q,k=q;return{tMin:Math.min(O,k),tMax:Math.max(O,k)}}unprojectScreenPoint(r){let l=this._cameraPosition,d=this.getRayDirectionFromPixel(r),m=this.rayPlanetIntersection(l,d);if(m){let k=a.bp();a.aS(k,l,[d[0]*m.tMin,d[1]*m.tMin,d[2]*m.tMin]);let N=a.bp();return a.aV(N,k),fc(N)}let v=this._cachedClippingPlane,b=v[0]*d[0]+v[1]*d[1]+v[2]*d[2],E=-a.b1(v,l)/b,q=a.bp();if(E>0)a.aS(q,l,[d[0]*E,d[1]*E,d[2]*E]);else{let k=a.bp();a.aS(k,l,[2*d[0],2*d[1],2*d[2]]);let N=a.b1(this._cachedClippingPlane,k);a.aU(q,k,[this._cachedClippingPlane[0]*N,this._cachedClippingPlane[1]*N,this._cachedClippingPlane[2]*N])}let O=function(k){let N=a.bp();return N[0]=k[0]*-k[3],N[1]=k[1]*-k[3],N[2]=k[2]*-k[3],{center:N,radius:Math.sqrt(1-k[3]*k[3])}}(v);return fc(function(k,N,F){let j=a.bp();a.aU(j,F,k);let V=a.bp();return a.bq(V,k,j,N/a.a$(j)),V}(O.center,O.radius,q))}getMatrixForModel(r,l){let d=a.S.convert(r),m=1/a.bu,v=a.b9();return a.bz(v,v,d.lng/180*Math.PI),a.b7(v,v,-d.lat/180*Math.PI),a.M(v,v,[0,0,1+l/a.bu]),a.b7(v,v,.5*Math.PI),a.N(v,v,[m,m,m]),v}getProjectionDataForCustomLayer(r=!0){let l=this.getProjectionData({overscaledTileID:new a.Z(0,0,0,0,0),applyGlobeMatrix:r});return l.tileMercatorCoords=[0,0,1,1],l}getFastPathSimpleProjectionMatrix(r){}}class yc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,l,d){return this._helper.interpolatePadding(r,l,d)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,l,d=!0){this._helper.resize(r,l,d)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,l){this._helper.overrideNearFarZ(r,l)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,l){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=l,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Yi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,l)=>this.getConstrained(r,l)}),this._globeness=1,this._mercatorTransform=new lr,this._verticalPerspectiveTransform=new vc}clone(){let r=new yc;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){let l=this._mercatorTransform.getProjectionData(r),d=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?d.mainMatrix:l.mainMatrix,clippingPlane:d.clippingPlane,tileMercatorCoords:d.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:l.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return a.bk(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bk(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,l,d){let m=this._mercatorTransform.getPitchedTextCorrection(r,l,d),v=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,l,d);return a.bk(m,v,this._globeness)}projectTileCoordinates(r,l,d,m){return this.currentTransform.projectTileCoordinates(r,l,d,m)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,l){return this.currentTransform.lngLatToCameraDepth(r,l)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,l){return this.currentTransform.getConstrained(r,l)}calculateCenterFromCameraLngLatAlt(r,l,d,m){return this._helper.calculateCenterFromCameraLngLatAlt(r,l,d,m)}setLocationAtPoint(r,l){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,l),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,l),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,l){return this.currentTransform.locationToScreenPoint(r,l)}screenPointToMercatorCoordinate(r,l){return this.currentTransform.screenPointToMercatorCoordinate(r,l)}screenPointToLocation(r,l){return this.currentTransform.screenPointToLocation(r,l)}isPointOnMapSurface(r,l){return this.currentTransform.isPointOnMapSurface(r,l)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,l){return this.currentTransform.getMatrixForModel(r,l)}getProjectionDataForCustomLayer(r=!0){let l=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return l;let d=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return d.fallbackMatrix=l.mainMatrix,d}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class Bi{get useGlobeControls(){return!0}handlePanInertia(r,l){let d=E_(r,l);return Math.abs(d.lng-l.center.lng)>180&&(d.lng=l.center.lng+179.5*Math.sign(d.lng-l.center.lng)),{easingCenter:d,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,l){let d=r.around,m=l.screenPointToLocation(d);r.bearingDelta&&l.setBearing(l.bearing+r.bearingDelta),r.pitchDelta&&l.setPitch(l.pitch+r.pitchDelta),r.rollDelta&&l.setRoll(l.roll+r.rollDelta);let v=l.zoom;r.zoomDelta&&l.setZoom(l.zoom+r.zoomDelta);let b=l.zoom-v;if(b===0)return;let E=a.bA(l.center.lng,m.lng),q=E/(Math.abs(E/180)+1),O=a.bA(l.center.lat,m.lat),k=l.getRayDirectionFromPixel(d),N=l.cameraPosition,F=-1*a.aX(N,k),j=a.bp();a.aS(j,N,[k[0]*F,k[1]*F,k[2]*F]);let V=a.aZ(j)-1,te=Math.exp(.5*-Math.max(V-.3,0)),Q=Bl(l.worldSize,l.center.lat)/Math.min(l.width,l.height),re=a.bn(Q,.9,.5,1,.25),ne=(1-a.af(-b))*Math.min(te,re),ue=l.center.lat,ae=l.zoom,fe=new a.S(l.center.lng+q*ne,a.ah(l.center.lat+O*ne,-a.ai,a.ai));l.setLocationAtPoint(m,d);let ge=l.center,le=a.bn(Math.abs(E),45,85,0,1),xe=a.bn(Q,.75,.35,0,1),Re=Math.pow(Math.max(le,xe),.25),Ee=a.bA(ge.lng,fe.lng),Ie=a.bA(ge.lat,fe.lat);l.setCenter(new a.S(ge.lng+Ee*Re,ge.lat+Ie*Re).wrap()),l.setZoom(ae+kr(ue,l.center.lat))}handleMapControlsPan(r,l,d){if(!r.panDelta)return;let m=l.center.lat,v=l.zoom;l.setCenter(E_(r.panDelta,l).wrap()),l.setZoom(v+kr(m,l.center.lat))}cameraForBoxAndBearing(r,l,d,m,v){let b=Cn(r,l,d,m,v),E=l.left/v.width*2-1,q=(v.width-l.right)/v.width*2-1,O=l.top/v.height*-2+1,k=(v.height-l.bottom)/v.height*-2+1,N=a.bA(d.getWest(),d.getEast())<0,F=N?d.getEast():d.getWest(),j=N?d.getWest():d.getEast(),V=Math.max(d.getNorth(),d.getSouth()),te=Math.min(d.getNorth(),d.getSouth()),Q=F+.5*a.bA(F,j),re=V+.5*a.bA(V,te),ne=v.clone();ne.setCenter(b.center),ne.setBearing(b.bearing),ne.setPitch(0),ne.setRoll(0),ne.setZoom(b.zoom);let ue=ne.modelViewProjectionMatrix,ae=[mi(d.getNorthWest()),mi(d.getNorthEast()),mi(d.getSouthWest()),mi(d.getSouthEast()),mi(new a.S(j,re)),mi(new a.S(F,re)),mi(new a.S(Q,V)),mi(new a.S(Q,te))],fe=mi(b.center),ge=Number.POSITIVE_INFINITY;for(let le of ae)E<0&&(ge=Bi.getLesserNonNegativeNonNull(ge,Bi.solveVectorScale(le,fe,ue,"x",E))),q>0&&(ge=Bi.getLesserNonNegativeNonNull(ge,Bi.solveVectorScale(le,fe,ue,"x",q))),O>0&&(ge=Bi.getLesserNonNegativeNonNull(ge,Bi.solveVectorScale(le,fe,ue,"y",O))),k<0&&(ge=Bi.getLesserNonNegativeNonNull(ge,Bi.solveVectorScale(le,fe,ue,"y",k)));if(Number.isFinite(ge)&&ge!==0)return b.zoom=ne.zoom+a.ak(ge),b;T_()}handleJumpToCenterZoom(r,l){let d=r.center.lat,m=r.getConstrained(l.center?a.S.convert(l.center):r.center,r.zoom).center;r.setCenter(m.wrap());let v=l.zoom!==void 0?+l.zoom:r.zoom+kr(d,m.lat);r.zoom!==v&&r.setZoom(v)}handleEaseTo(r,l){let d=r.zoom,m=r.center,v=r.padding,b={roll:r.roll,pitch:r.pitch,bearing:r.bearing},E={roll:l.roll===void 0?r.roll:l.roll,pitch:l.pitch===void 0?r.pitch:l.pitch,bearing:l.bearing===void 0?r.bearing:l.bearing},q=l.zoom!==void 0,O=!r.isPaddingEqual(l.padding),k=!1,N=l.center?a.S.convert(l.center):m,F=r.getConstrained(N,d).center;Uh(r,F);let j=r.clone();j.setCenter(F),j.setZoom(q?+l.zoom:d+kr(m.lat,N.lat)),j.setBearing(l.bearing);let V=new a.P(a.ah(r.centerPoint.x+l.offsetAsPoint.x,0,r.width),a.ah(r.centerPoint.y+l.offsetAsPoint.y,0,r.height));j.setLocationAtPoint(F,V);let te=(l.offset&&l.offsetAsPoint.mag())>0?j.center:F,Q=q?+l.zoom:d+kr(m.lat,te.lat),re=d+kr(m.lat,0),ne=Q+kr(te.lat,0),ue=a.bA(m.lng,te.lng),ae=a.bA(m.lat,te.lat),fe=a.af(ne-re);return k=Q!==d,{easeFunc:ge=>{if(a.be(b,E)||Qi({startEulerAngles:b,endEulerAngles:E,tr:r,k:ge,useSlerp:b.roll!=E.roll}),O&&r.interpolatePadding(v,l.padding,ge),l.around)a.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(l.around,l.aroundPoint);else{let le=ne>re?Math.min(2,fe):Math.max(.5,fe),xe=Math.pow(le,1-ge),Re=Kp(m,ue,ae,ge*xe);r.setCenter(Re.wrap())}if(k){let le=a.C.number(re,ne,ge)+kr(0,r.center.lat);r.setZoom(le)}},isZooming:k,elevationCenter:te}}handleFlyTo(r,l){let d=l.zoom!==void 0,m=r.center,v=r.zoom,b=r.padding,E=!r.isPaddingEqual(l.padding),q=r.getConstrained(a.S.convert(l.center||l.locationAtOffset),v).center,O=d?+l.zoom:r.zoom+kr(r.center.lat,q.lat),k=r.clone();k.setCenter(q),k.setZoom(O),k.setBearing(l.bearing);let N=new a.P(a.ah(r.centerPoint.x+l.offsetAsPoint.x,0,r.width),a.ah(r.centerPoint.y+l.offsetAsPoint.y,0,r.height));k.setLocationAtPoint(q,N);let F=k.center;Uh(r,F);let j=function(ae,fe,ge){let le=mi(fe),xe=mi(ge),Re=a.aX(le,xe),Ee=Math.acos(Re),Ie=Wh(ae);return Ee/(2*Math.PI)*Ie}(r,m,F),V=v+kr(m.lat,0),te=O+kr(F.lat,0),Q=a.af(te-V),re;if(typeof l.minZoom=="number"){let ae=+l.minZoom+kr(F.lat,0),fe=Math.min(ae,V,te)+kr(0,F.lat),ge=r.getConstrained(F,fe).zoom+kr(F.lat,0);re=a.af(ge-V)}let ne=a.bA(m.lng,F.lng),ue=a.bA(m.lat,F.lat);return{easeFunc:(ae,fe,ge,le)=>{let xe=Kp(m,ne,ue,ge);E&&r.interpolatePadding(b,l.padding,ae);let Re=ae===1?F:xe;r.setCenter(Re.wrap());let Ee=V+a.ak(fe);r.setZoom(ae===1?O:Ee+kr(0,Re.lat))},scaleOfZoom:Q,targetCenter:F,scaleOfMinZoom:re,pixelPathLength:j}}static solveVectorScale(r,l,d,m,v){let b=m==="x"?[d[0],d[4],d[8],d[12]]:[d[1],d[5],d[9],d[13]],E=[d[3],d[7],d[11],d[15]],q=r[0]*b[0]+r[1]*b[1]+r[2]*b[2],O=r[0]*E[0]+r[1]*E[1]+r[2]*E[2],k=l[0]*b[0]+l[1]*b[1]+l[2]*b[2],N=l[0]*E[0]+l[1]*E[1]+l[2]*E[2];return k+v*O===q+v*N||E[3]*(q-k)+b[3]*(N-O)+q*N==k*O?null:(k+b[3]-v*N-v*E[3])/(k-q-v*N+v*O)}static getLesserNonNegativeNonNull(r,l){return l!==null&&l>=0&&l<r?l:r}}class I_{constructor(r){this._globe=r,this._mercatorCameraHelper=new Ni,this._verticalPerspectiveCameraHelper=new Bi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,l){return this.currentHelper.handlePanInertia(r,l)}handleMapControlsRollPitchBearingZoom(r,l){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,l)}handleMapControlsPan(r,l,d){this.currentHelper.handleMapControlsPan(r,l,d)}cameraForBoxAndBearing(r,l,d,m,v){return this.currentHelper.cameraForBoxAndBearing(r,l,d,m,v)}handleJumpToCenterZoom(r,l){this.currentHelper.handleJumpToCenterZoom(r,l)}handleEaseTo(r,l){return this.currentHelper.handleEaseTo(r,l)}handleFlyTo(r,l){return this.currentHelper.handleFlyTo(r,l)}}let Hh=(g,r)=>a.y(g,r&&r.filter(l=>l.identifier!=="source.canvas")),WS=a.bE();class Xp extends a.E{constructor(r,l={}){var d,m;super(),this._rtlPluginLoaded=()=>{for(let b in this.sourceCaches){let E=this.sourceCaches[b].getSource().type;E!=="vector"&&E!=="geojson"||this.sourceCaches[b].reload()}},this.map=r,this.dispatcher=new oi(ha(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(b,E)=>this.getGlyphs(b,E)),this.dispatcher.registerMessageHandler("GI",(b,E)=>this.getImages(b,E)),this.imageManager=new nt,this.imageManager.setEventedParent(this);let v=((d=r._container)===null||d===void 0?void 0:d.lang)||typeof document!="undefined"&&((m=document.documentElement)===null||m===void 0?void 0:m.lang)||void 0;this.glyphManager=new qn(r._requestManager,l.localIdeographFontFamily,v),this.lineAtlas=new Jt(256,512),this.crossTileSymbolIndex=new Fl,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bF,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",a.bG()),Ho().on(Ds,this._rtlPluginLoaded),this.on("data",b=>{if(b.dataType!=="source"||b.sourceDataType!=="metadata")return;let E=this.sourceCaches[b.sourceId];if(!E)return;let q=E.getSource();if(q&&q.vectorLayerIds)for(let O in this._layers){let k=this._layers[O];k.source===q.id&&this._validateLayer(k)}})}setGlobalStateProperty(r,l){var d,m,v;this._checkLoaded();let b=l===null?(v=(m=(d=this.stylesheet.state)===null||d===void 0?void 0:d[r])===null||m===void 0?void 0:m.default)!==null&&v!==void 0?v:null:l;if(a.bH(b,this._globalState[r]))return this;this._globalState[r]=b,this._applyGlobalStateChanges([r])}getGlobalState(){return this._globalState}setGlobalState(r){this._checkLoaded();let l=[];for(let d in r)!a.bH(this._globalState[d],r[d].default)&&(l.push(d),this._globalState[d]=r[d].default);this._applyGlobalStateChanges(l)}_applyGlobalStateChanges(r){if(r.length===0)return;let l=new Set;for(let d in this._layers){let m=this._layers[d],v=m.getLayoutAffectingGlobalStateRefs(),b=m.getPaintAffectingGlobalStateRefs();for(let E of r)if(v.has(E)&&l.add(m.source),b.has(E))for(let{name:q,value:O}of b.get(E))this._updatePaintProperty(m,q,O)}for(let d in this.sourceCaches)l.has(d)&&(this._reloadSource(d),this._changed=!0)}loadURL(r,l={},d){this.fire(new a.l("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;let m=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;let v=this._loadStyleRequest;a.j(m,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,l,d)}).catch(b=>{this._loadStyleRequest=null,b&&!v.signal.aborted&&this.fire(new a.k(b))})}loadJSON(r,l={},d){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,d)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(WS,{validate:!1})}_load(r,l,d){var m,v;let b=l.transformStyle?l.transformStyle(d,r):r;if(!l.validate||!Hh(this,a.z(b))){b=Object.assign({},b),this._loaded=!0,this.stylesheet=b;for(let E in b.sources)this.addSource(E,b.sources[E],{validate:!1});b.sprite?this._loadSprite(b.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(b.glyphs),this._createLayers(),this.light=new Hi(this.stylesheet.light),this._setProjectionInternal(((m=this.stylesheet.projection)===null||m===void 0?void 0:m.type)||"mercator"),this.sky=new Ki(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){var r;let l=a.bI(this.stylesheet.layers);this.dispatcher.broadcast("SL",l),this._order=l.map(d=>d.id),this._layers={},this.setGlobalState((r=this.stylesheet.state)!==null&&r!==void 0?r:null),this._serializedLayers=null;for(let d of l){let m=a.bJ(d);m.setEventedParent(this,{layer:{id:d.id}}),m.setGlobalState(this._globalState),this._layers[d.id]=m}}_loadSprite(r,l=!1,d=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,b,E,q){return a._(this,void 0,void 0,function*(){let O=Ae(v),k=E>1?"@2x":"",N={},F={};for(let{id:j,url:V}of O){let te=b.transformRequest(it(V,k,".json"),"SpriteJSON");N[j]=a.j(te,q);let Q=b.transformRequest(it(V,k,".png"),"SpriteImage");F[j]=oe.getImage(Q,q)}return yield Promise.all([...Object.values(N),...Object.values(F)]),function(j,V){return a._(this,void 0,void 0,function*(){let te={};for(let Q in j){te[Q]={};let re=D.getImageCanvasContext((yield V[Q]).data),ne=(yield j[Q]).data;for(let ue in ne){let{width:ae,height:fe,x:ge,y:le,sdf:xe,pixelRatio:Re,stretchX:Ee,stretchY:Ie,content:Me,textFitWidth:je,textFitHeight:Ze}=ne[ue];te[Q][ue]={data:null,pixelRatio:Re,sdf:xe,stretchX:Ee,stretchY:Ie,content:Me,textFitWidth:je,textFitHeight:Ze,spriteData:{width:ae,height:fe,x:ge,y:le,context:re}}}}return te})}(N,F)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(let b in v){this._spritesImagesIds[b]=[];let E=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(q=>!(q in v)):[];for(let q of E)this.imageManager.removeImage(q),this._changedImages[q]=!0;for(let q in v[b]){let O=b==="default"?q:`${b}:${q}`;this._spritesImagesIds[b].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,v[b][q],!1):this.imageManager.addImage(O,v[b][q]),l&&(this._changedImages[O]=!0)}}}).catch(v=>{this._spriteRequest=null,m=v,this.fire(new a.k(m))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),d&&d(m)})}_unloadSprite(){for(let r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(r){let l=this.sourceCaches[r.source];if(!l)return;let d=r.sourceLayer;if(!d)return;let m=l.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(d)===-1)&&this.fire(new a.k(new Error(`Source layer "${d}" does not exist on source "${m.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,l=!1){let d=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l?a.bK(d):d);let m=[];for(let v of r)if(d[v]){let b=l?a.bK(d[v]):d[v];m.push(b)}return m}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};let l=Object.keys(this._layers);for(let d of l){let m=this._layers[d];m.type!=="custom"&&(r[d]=m.serialize())}return r}hasTransitions(){var r,l,d;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((l=this.sky)===null||l===void 0)&&l.hasTransition()||!((d=this.projection)===null||d===void 0)&&d.hasTransition())return!0;for(let m in this.sourceCaches)if(this.sourceCaches[m].hasTransition())return!0;for(let m in this._layers)if(this._layers[m].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;let l=this._changed;if(l){let m=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(m.length||v.length)&&this._updateWorkerLayers(m,v);for(let b in this._updatedSources){let E=this._updatedSources[b];if(E==="reload")this._reloadSource(b);else{if(E!=="clear")throw new Error(`Invalid action ${E}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let b in this._updatedPaintProps)this._layers[b].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}let d={};for(let m in this.sourceCaches){let v=this.sourceCaches[m];d[m]=v.used,v.used=!1}for(let m of this._order){let v=this._layers[m];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(let m in d){let v=this.sourceCaches[m];!!d[m]!=!!v.used&&v.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,l&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var d;this._checkLoaded();let m=this.serialize();if(r=l.transformStyle?l.transformStyle(m,r):r,((d=l.validate)===null||d===void 0||d)&&Hh(this,a.z(r)))return!1;(r=a.bK(r)).layers=a.bI(r.layers);let v=a.bL(m,r),b=this._getOperationsToPerform(v);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(let E of b.operations)E();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){let l=[],d=[];for(let m of r)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,m.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,m.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,m.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,m.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,m.args));break;case"addSource":l.push(()=>this.addSource.apply(this,m.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,m.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,m.args));break;case"setLight":l.push(()=>this.setLight.apply(this,m.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,m.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,m.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,m.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,m.args));break;case"setSky":l.push(()=>this.setSky.apply(this,m.args));break;case"setProjection":this.setProjection.apply(this,m.args);break;case"setGlobalState":l.push(()=>this.setGlobalState.apply(this,m.args));break;case"setTransition":l.push(()=>{});break;default:d.push(m.command)}return{operations:l,unimplemented:d}}addImage(r,l){if(this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,d={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(a.z.source,`sources.${r}`,l,null,d))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);let m=this.sourceCaches[r]=new Lt(r,l,this.dispatcher);m.style=this,m.setEventedParent(this,()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:r})),m.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(let d in this._layers)if(this._layers[d].source===r)return this.fire(new a.k(new Error(`Source "${r}" cannot be removed while layer "${d}" is using it.`)));let l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);let d=this.sourceCaches[r].getSource();if(d.type!=="geojson")throw new Error(`geojsonSource.type is ${d.type}, which is !== 'geojson`);d.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,d={}){this._checkLoaded();let m=r.id;if(this.getLayer(m))return void this.fire(new a.k(new Error(`Layer "${m}" already exists on this map.`)));let v;if(r.type==="custom"){if(Hh(this,a.bM(r)))return;v=a.bJ(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(m,r.source),r=a.bK(r),r=a.e(r,{source:m})),this._validate(a.z.layer,`layers.${m}`,r,{arrayIndex:-1},d))return;v=a.bJ(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:m}})}let b=l?this._order.indexOf(l):this._order.length;if(l&&b===-1)this.fire(new a.k(new Error(`Cannot add layer "${m}" before non-existing layer "${l}".`)));else{if(this._order.splice(b,0,m),this._layerOrderChanged=!0,this._layers[m]=v,this._removedLayers[m]&&v.source&&v.type!=="custom"){let E=this._removedLayers[m];delete this._removedLayers[m],E.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;let d=this._order.indexOf(r);this._order.splice(d,1);let m=l?this._order.indexOf(l):this._order.length;l&&m===-1?this.fire(new a.k(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(m,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();let l=this._layers[r];if(!l)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);let d=this._order.indexOf(r);this._order.splice(d,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,d){this._checkLoaded();let m=this.getLayer(r);m?m.minzoom===l&&m.maxzoom===d||(l!=null&&(m.minzoom=l),d!=null&&(m.maxzoom=d),this._updateLayer(m)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,d={}){this._checkLoaded();let m=this.getLayer(r);if(m){if(!a.bH(m.filter,l))return l==null?(m.setFilter(void 0),void this._updateLayer(m)):void(this._validate(a.z.filter,`layers.${m.id}.filter`,l,null,d)||(m.setFilter(a.bK(l)),this._updateLayer(m)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.bK(this.getLayer(r).filter)}setLayoutProperty(r,l,d,m={}){this._checkLoaded();let v=this.getLayer(r);v?a.bH(v.getLayoutProperty(l),d)||(v.setLayoutProperty(l,d,m),this._updateLayer(v)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){let d=this.getLayer(r);if(d)return d.getLayoutProperty(l);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,d,m={}){this._checkLoaded();let v=this.getLayer(r);v?a.bH(v.getPaintProperty(l),d)||this._updatePaintProperty(v,l,d,m):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}_updatePaintProperty(r,l,d,m={}){r.setPaintProperty(l,d,m)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[r.id]=!0,this._serializedLayers=null}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();let d=r.source,m=r.sourceLayer,v=this.sourceCaches[d];if(v===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));let b=v.getSource().type;b==="geojson"&&m?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||m?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),v.setFeatureState(m,r.id,l)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();let d=r.source,m=this.sourceCaches[d];if(m===void 0)return void this.fire(new a.k(new Error(`The source '${d}' does not exist in the map's style.`)));let v=m.getSource().type,b=v==="vector"?r.sourceLayer:void 0;v!=="vector"||b?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(b,r.id,l):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();let l=r.source,d=r.sourceLayer,m=this.sourceCaches[l];if(m!==void 0)return m.getSource().type!=="vector"||d?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),m.getFeatureState(d,r.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let r=a.bN(this.sourceCaches,v=>v.serialize()),l=this._serializeByIds(this._order,!0),d=this.map.getTerrain()||void 0,m=this.stylesheet;return a.bO({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,projection:m.projection,sources:r,layers:l,terrain:d},v=>v!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){let l=b=>this._layers[b].type==="fill-extrusion",d={},m=[];for(let b=this._order.length-1;b>=0;b--){let E=this._order[b];if(l(E)){d[E]=b;for(let q of r){let O=q[E];if(O)for(let k of O)m.push(k)}}}m.sort((b,E)=>E.intersectionZ-b.intersectionZ);let v=[];for(let b=this._order.length-1;b>=0;b--){let E=this._order[b];if(l(E))for(let q=m.length-1;q>=0;q--){let O=m[q].feature;if(d[O.layer.id]<b)break;v.push(O),m.pop()}else for(let q of r){let O=q[E];if(O)for(let k of O)v.push(k.feature)}}return v}queryRenderedFeatures(r,l,d){l&&l.filter&&this._validate(a.z.filter,"queryRenderedFeatures.filter",l.filter,null,l);let m={};if(l&&l.layers){if(!(Array.isArray(l.layers)||l.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let O of l.layers){let k=this._layers[O];if(!k)return this.fire(new a.k(new Error(`The layer '${O}' does not exist in the map's style and cannot be queried for features.`))),[];m[k.source]=!0}}let v=[];l.availableImages=this._availableImages;let b=this._serializedAllLayers(),E=l.layers instanceof Set?l.layers:Array.isArray(l.layers)?new Set(l.layers):null,q=Object.assign(Object.assign({},l),{layers:E});for(let O in this.sourceCaches)l.layers&&!m[O]||v.push(da(this.sourceCaches[O],this._layers,b,r,q,d,this.map.terrain?(k,N,F)=>this.map.terrain.getElevation(k,N,F):void 0));return this.placement&&v.push(function(O,k,N,F,j,V,te){let Q={},re=V.queryRenderedSymbols(F),ne=[];for(let ue of Object.keys(re).map(Number))ne.push(te[ue]);ne.sort(Al);for(let ue of ne){let ae=ue.featureIndex.lookupSymbolFeatures(re[ue.bucketInstanceId],k,ue.bucketIndex,ue.sourceLayerIndex,j.filter,j.layers,j.availableImages,O);for(let fe in ae){let ge=Q[fe]=Q[fe]||[],le=ae[fe];le.sort((xe,Re)=>{let Ee=ue.featureSortOrder;if(Ee){let Ie=Ee.indexOf(xe.featureIndex);return Ee.indexOf(Re.featureIndex)-Ie}return Re.featureIndex-xe.featureIndex});for(let xe of le)ge.push(xe)}}return function(ue,ae,fe){for(let ge in ue)for(let le of ue[ge])Cl(le,fe[ae[ge].source]);return ue}(Q,O,N)}(this._layers,b,this.sourceCaches,r,q,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,l){l&&l.filter&&this._validate(a.z.filter,"querySourceFeatures.filter",l.filter,null,l);let d=this.sourceCaches[r];return d?function(m,v){let b=m.getRenderableIds().map(O=>m.getTileByID(O)),E=[],q={};for(let O=0;O<b.length;O++){let k=b[O],N=k.tileID.canonical.key;q[N]||(q[N]=!0,k.querySourceFeatures(E,v))}return E}(d,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();let d=this.light.getLight(),m=!1;for(let b in r)if(!a.bH(r[b],d[b])){m=!0;break}if(!m)return;let v={now:D.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(v)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,l={}){this._checkLoaded();let d=this.getSky(),m=!1;if(!r&&!d)return;if(r&&!d)m=!0;else if(!r&&d)m=!0;else for(let b in r)if(!a.bH(r[b],d[b])){m=!0;break}if(!m)return;let v={now:D.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,l),this.sky.updateTransitions(v)}_setProjectionInternal(r){let l=function(d){if(Array.isArray(d)){let m=new Zh({type:d});return{projection:m,transform:new yc,cameraHelper:new I_(m)}}switch(d){case"mercator":return{projection:new Nt,transform:new lr,cameraHelper:new Ni};case"globe":{let m=new Zh({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:m,transform:new yc,cameraHelper:new I_(m)}}case"vertical-perspective":return{projection:new dc,transform:new vc,cameraHelper:new Bi};default:return a.w(`Unknown projection name: ${d}. Falling back to mercator projection.`),{projection:new Nt,transform:new lr,cameraHelper:new Ni}}}(r);this.projection=l.projection,this.map.migrateProjection(l.transform,l.cameraHelper);for(let d in this.sourceCaches)this.sourceCaches[d].reload()}_validate(r,l,d,m,v={}){return(!v||v.validate!==!1)&&Hh(this,r.call(a.z,a.e({key:l,style:this.serialize(),value:d,styleSpec:a.v},m)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ho().off(Ds,this._rtlPluginLoaded);for(let l in this._layers)this._layers[l].setEventedParent(null);for(let l in this.sourceCaches){let d=this.sourceCaches[l];d.setEventedParent(null),d.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(let l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(let r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,d,m,v=!1){let b=!1,E=!1,q={};for(let O of this._order){let k=this._layers[O];if(k.type!=="symbol")continue;if(!q[k.source]){let F=this.sourceCaches[k.source];q[k.source]=F.getRenderableIds(!0).map(j=>F.getTileByID(j)).sort((j,V)=>V.tileID.overscaledZ-j.tileID.overscaledZ||(j.tileID.isLessThan(V.tileID)?-1:1))}let N=this.crossTileSymbolIndex.addLayer(k,q[k.source],r.center.lng);b=b||N}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||d===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),r.zoom))&&(this.pauseablePlacement=new Gp(r,this.map.terrain,this._order,v,l,d,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,q),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),E=!0),b&&this.pauseablePlacement.placement.setStale()),E||b)for(let O of this._order){let k=this._layers[O];k.type==="symbol"&&this.placement.updateLayerOpacities(k,q[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(let r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return a._(this,void 0,void 0,function*(){let d=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();let m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,l.icons),d})}getGlyphs(r,l){return a._(this,void 0,void 0,function*(){let d=yield this.glyphManager.getGlyphs(l.stacks),m=this.sourceCaches[l.source];return m&&m.setDependencies(l.tileID.key,l.type,[""]),d})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(a.z.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,d={},m){this._checkLoaded();let v=[{id:r,url:l}],b=[...Ae(this.stylesheet.sprite),...v];this._validate(a.z.sprite,"sprite",b,null,d)||(this.stylesheet.sprite=b,this._loadSprite(v,!0,m))}removeSprite(r){this._checkLoaded();let l=Ae(this.stylesheet.sprite);if(l.find(d=>d.id===r)){if(this._spritesImagesIds[r])for(let d of this._spritesImagesIds[r])this.imageManager.removeImage(d),this._changedImages[d]=!0;l.splice(l.findIndex(d=>d.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(r,l={},d){this._checkLoaded(),r&&this._validate(a.z.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,d):(this._unloadSprite(),d&&d(null)))}}var HS=a.aJ([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class KS{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,d,m,v,b,E,q,O){this.context=r;let k=this.boundPaintVertexBuffers.length!==m.length;for(let N=0;!k&&N<m.length;N++)this.boundPaintVertexBuffers[N]!==m[N]&&(k=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==d||k||this.boundIndexBuffer!==v||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==E||this.boundDynamicVertexBuffer2!==q||this.boundDynamicVertexBuffer3!==O?this.freshBind(l,d,m,v,b,E,q,O):(r.bindVertexArray.set(this.vao),E&&E.bind(),v&&v.dynamicDraw&&v.bind(),q&&q.bind(),O&&O.bind())}freshBind(r,l,d,m,v,b,E,q){let O=r.numAttributes,k=this.context,N=k.gl;this.vao&&this.destroy(),this.vao=k.createVertexArray(),k.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=d,this.boundIndexBuffer=m,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=E,this.boundDynamicVertexBuffer3=q,l.enableAttributes(N,r);for(let F of d)F.enableAttributes(N,r);b&&b.enableAttributes(N,r),E&&E.enableAttributes(N,r),q&&q.enableAttributes(N,r),l.bind(),l.setVertexAttribPointers(N,r,v);for(let F of d)F.bind(),F.setVertexAttribPointers(N,r,v);b&&(b.bind(),b.setVertexAttribPointers(N,r,v)),m&&m.bind(),E&&(E.bind(),E.setVertexAttribPointers(N,r,v)),q&&(q.bind(),q.setVertexAttribPointers(N,r,v)),k.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Kh=(g,r,l,d,m)=>({u_texture:0,u_ele_delta:g,u_fog_matrix:r,u_fog_color:l?l.properties.get("fog-color"):a.bf.white,u_fog_ground_blend:l?l.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:m?0:l?l.calculateFogBlendOpacity(d):0,u_horizon_color:l?l.properties.get("horizon-color"):a.bf.white,u_horizon_fog_blend:l?l.properties.get("horizon-fog-blend"):1,u_is_globe_mode:m?1:0}),Yp={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Us(g){let r=[];for(let l=0;l<g.length;l++){if(g[l]===null)continue;let d=g[l].split(" ");r.push(d.pop())}return r}class Jp{constructor(r,l,d,m,v,b,E,q,O=[]){let k=r.gl;this.program=k.createProgram();let N=Us(l.staticAttributes),F=d?d.getBinderAttributes():[],j=N.concat(F),V=pa.prelude.staticUniforms?Us(pa.prelude.staticUniforms):[],te=E.staticUniforms?Us(E.staticUniforms):[],Q=l.staticUniforms?Us(l.staticUniforms):[],re=d?d.getBinderUniforms():[],ne=V.concat(te).concat(Q).concat(re),ue=[];for(let Ee of ne)ue.indexOf(Ee)<0&&ue.push(Ee);let ae=d?d.defines():[];Ba(k)&&ae.unshift("#version 300 es"),v&&ae.push("#define OVERDRAW_INSPECTOR;"),b&&ae.push("#define TERRAIN3D;"),q&&ae.push(q),O&&ae.push(...O);let fe=ae.concat(pa.prelude.fragmentSource,E.fragmentSource,l.fragmentSource).join(`
`),ge=ae.concat(pa.prelude.vertexSource,E.vertexSource,l.vertexSource).join(`
`);Ba(k)||(fe=function(Ee){return Ee.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(fe),ge=function(Ee){return Ee.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(ge));let le=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(le,fe),k.compileShader(le),!k.getShaderParameter(le,k.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${k.getShaderInfoLog(le)}`);k.attachShader(this.program,le);let xe=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())return void(this.failedToCreate=!0);if(k.shaderSource(xe,ge),k.compileShader(xe),!k.getShaderParameter(xe,k.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${k.getShaderInfoLog(xe)}`);k.attachShader(this.program,xe),this.attributes={};let Re={};this.numAttributes=j.length;for(let Ee=0;Ee<this.numAttributes;Ee++)j[Ee]&&(k.bindAttribLocation(this.program,Ee,j[Ee]),this.attributes[j[Ee]]=Ee);if(k.linkProgram(this.program),!k.getProgramParameter(this.program,k.LINK_STATUS))throw new Error(`Program failed to link: ${k.getProgramInfoLog(this.program)}`);k.deleteShader(xe),k.deleteShader(le);for(let Ee=0;Ee<ue.length;Ee++){let Ie=ue[Ee];if(Ie&&!Re[Ie]){let Me=k.getUniformLocation(this.program,Ie);Me&&(Re[Ie]=Me)}}this.fixedUniforms=m(r,Re),this.terrainUniforms=((Ee,Ie)=>({u_depth:new a.bP(Ee,Ie.u_depth),u_terrain:new a.bP(Ee,Ie.u_terrain),u_terrain_dim:new a.bg(Ee,Ie.u_terrain_dim),u_terrain_matrix:new a.bR(Ee,Ie.u_terrain_matrix),u_terrain_unpack:new a.bS(Ee,Ie.u_terrain_unpack),u_terrain_exaggeration:new a.bg(Ee,Ie.u_terrain_exaggeration)}))(r,Re),this.projectionUniforms=((Ee,Ie)=>({u_projection_matrix:new a.bR(Ee,Ie.u_projection_matrix),u_projection_tile_mercator_coords:new a.bS(Ee,Ie.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bS(Ee,Ie.u_projection_clipping_plane),u_projection_transition:new a.bg(Ee,Ie.u_projection_transition),u_projection_fallback_matrix:new a.bR(Ee,Ie.u_projection_fallback_matrix)}))(r,Re),this.binderUniforms=d?d.getUniforms(r,Re):[]}draw(r,l,d,m,v,b,E,q,O,k,N,F,j,V,te,Q,re,ne,ue){let ae=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(d),r.setStencilMode(m),r.setColorMode(v),r.setCullFace(b),q){r.activeTexture.set(ae.TEXTURE2),ae.bindTexture(ae.TEXTURE_2D,q.depthTexture),r.activeTexture.set(ae.TEXTURE3),ae.bindTexture(ae.TEXTURE_2D,q.texture);for(let ge in this.terrainUniforms)this.terrainUniforms[ge].set(q[ge])}if(O)for(let ge in O)this.projectionUniforms[Yp[ge]].set(O[ge]);if(E)for(let ge in this.fixedUniforms)this.fixedUniforms[ge].set(E[ge]);Q&&Q.setUniforms(r,this.binderUniforms,V,{zoom:te});let fe=0;switch(l){case ae.LINES:fe=2;break;case ae.TRIANGLES:fe=3;break;case ae.LINE_STRIP:fe=1}for(let ge of j.get()){let le=ge.vaos||(ge.vaos={});(le[k]||(le[k]=new KS)).bind(r,this,N,Q?Q.getPaintVertexBuffers():[],F,ge.vertexOffset,re,ne,ue),ae.drawElements(l,ge.primitiveLength*fe,ae.UNSIGNED_SHORT,ge.primitiveOffset*fe*2)}}}function Xh(g,r,l){let d=1/a.aC(l,1,r.transform.tileZoom),m=Math.pow(2,l.tileID.overscaledZ),v=l.tileSize*Math.pow(2,r.transform.tileZoom)/m,b=v*(l.tileID.canonical.x+l.tileID.wrap*m),E=v*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[d,g.fromScale,g.toScale],u_fade:g.t,u_pixel_coord_upper:[b>>16,E>>16],u_pixel_coord_lower:[65535&b,65535&E]}}let ga=(g,r,l,d)=>{let m=g.style.light,v=m.properties.get("position"),b=[v.x,v.y,v.z],E=a.bV();m.properties.get("anchor")==="viewport"&&a.bW(E,g.transform.bearingInRadians),a.bX(b,b,E);let q=g.transform.transformLightDirection(b),O=m.properties.get("color");return{u_lightpos:b,u_lightpos_globe:q,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[O.r,O.g,O.b],u_vertical_gradient:+r,u_opacity:l,u_fill_translate:d}},XS=(g,r,l,d,m,v,b)=>a.e(ga(g,r,l,d),Xh(v,g,b),{u_height_factor:-Math.pow(2,m.overscaledZ)/b.tileSize/8}),Yh=(g,r,l,d)=>a.e(Xh(r,g,l),{u_fill_translate:d}),_c=(g,r)=>({u_world:g,u_fill_translate:r}),xc=(g,r,l,d,m)=>a.e(Yh(g,r,l,m),{u_world:d}),YS=(g,r,l,d,m)=>{let v=g.transform,b,E,q=0;if(l.paint.get("circle-pitch-alignment")==="map"){let O=a.aC(r,1,v.zoom);b=!0,E=[O,O],q=O/(a.$*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*m}else b=!1,E=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(l.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+b,u_device_pixel_ratio:g.pixelRatio,u_extrude_scale:E,u_globe_extrude_scale:q,u_translate:d}},Jh=g=>({u_pixel_extrude_scale:[1/g.width,1/g.height]}),JS=g=>({u_viewport_size:[g.width,g.height]}),$s=(g,r=1)=>({u_color:g,u_overlay:0,u_overlay_scale:r}),q_=(g,r,l,d)=>{let m=a.aC(g,1,r)/(a.$*Math.pow(2,g.tileID.overscaledZ))*2*Math.PI*d;return{u_extrude_scale:a.aC(g,1,r),u_intensity:l,u_globe_extrude_scale:m}},Qp=(g,r,l,d)=>{let m=a.L();a.bY(m,0,g.width,g.height,0,0,1);let v=g.context.gl;return{u_matrix:m,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:l,u_color_ramp:d,u_opacity:r.paint.get("heatmap-opacity")}},QS=(g,r,l)=>{let d=l.paint.get("hillshade-accent-color"),m;switch(l.paint.get("hillshade-method")){case"basic":m=4;break;case"combined":m=1;break;case"igor":m=2;break;case"multidirectional":m=3;break;default:m=0}let v=l.getIlluminationProperties();for(let b=0;b<v.directionRadians.length;b++)l.paint.get("hillshade-illumination-anchor")==="viewport"&&(v.directionRadians[b]+=g.transform.bearingInRadians);return{u_image:0,u_latrange:em(0,r.tileID),u_exaggeration:l.paint.get("hillshade-exaggeration"),u_altitudes:v.altitudeRadians,u_azimuths:v.directionRadians,u_accent:d,u_method:m,u_highlights:v.highlightColor,u_shadows:v.shadowColor}},P_=(g,r)=>{let l=r.stride,d=a.L();return a.bY(d,0,a.$,-a.$,0,0,1),a.M(d,d,[0,-a.$,0]),{u_matrix:d,u_image:1,u_dimension:[l,l],u_zoom:g.overscaledZ,u_unpack:r.getUnpackVector()}};function em(g,r){let l=Math.pow(2,r.canonical.z),d=r.canonical.y;return[new a.a1(0,d/l).toLngLat().lat,new a.a1(0,(d+1)/l).toLngLat().lat]}let A_=(g,r,l=0)=>({u_image:0,u_unpack:r.getUnpackVector(),u_dimension:[r.stride,r.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:l,u_opacity:g.paint.get("color-relief-opacity")}),Qh=(g,r,l,d)=>{let m=g.transform;return{u_translation:rm(g,r,l),u_ratio:d/a.aC(r,1,m.zoom),u_device_pixel_ratio:g.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},C_=(g,r,l,d,m)=>a.e(Qh(g,r,l,d),{u_image:0,u_image_height:m}),M_=(g,r,l,d,m)=>{let v=g.transform,b=tm(r,v);return{u_translation:rm(g,r,l),u_texsize:r.imageAtlasTexture.size,u_ratio:d/a.aC(r,1,v.zoom),u_device_pixel_ratio:g.pixelRatio,u_image:0,u_scale:[b,m.fromScale,m.toScale],u_fade:m.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},Vs=(g,r,l,d,m,v)=>{let b=g.lineAtlas,E=tm(r,g.transform),q=l.layout.get("line-cap")==="round",O=b.getDash(m.from,q),k=b.getDash(m.to,q),N=O.width*v.fromScale,F=k.width*v.toScale;return a.e(Qh(g,r,l,d),{u_patternscale_a:[E/N,-O.height/2],u_patternscale_b:[E/F,-k.height/2],u_sdfgamma:b.width/(256*Math.min(N,F)*g.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:k.y,u_mix:v.t})};function tm(g,r){return 1/a.aC(g,1,r.tileZoom)}function rm(g,r,l){return a.aD(g.transform,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}let bc=(g,r,l,d,m)=>{return{u_tl_parent:g,u_scale_parent:r,u_buffer_scale:1,u_fade_t:l.mix,u_opacity:l.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(b=d.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(v=d.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:eT(d.paint.get("raster-hue-rotate")),u_coords_top:[m[0].x,m[0].y,m[1].x,m[1].y],u_coords_bottom:[m[3].x,m[3].y,m[2].x,m[2].y]};var v,b};function eT(g){g*=Math.PI/180;let r=Math.sin(g),l=Math.cos(g);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}let wc=(g,r,l,d,m,v,b,E,q,O,k,N,F)=>{let j=b.transform;return{u_is_size_zoom_constant:+(g==="constant"||g==="source"),u_is_size_feature_constant:+(g==="constant"||g==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:j.cameraToCenterDistance,u_pitch:j.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:j.width/j.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_label_plane_matrix:E,u_coord_matrix:q,u_is_text:+k,u_pitch_with_map:+d,u_is_along_line:m,u_is_variable_anchor:v,u_texsize:N,u_texture:0,u_translation:O,u_pitched_scale:F}},R_=(g,r,l,d,m,v,b,E,q,O,k,N,F,j)=>{let V=b.transform;return a.e(wc(g,r,l,d,m,v,b,E,q,O,k,N,j),{u_gamma_scale:d?Math.cos(V.pitch*Math.PI/180)*V.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:1})},tT=(g,r,l,d,m,v,b,E,q,O,k,N,F)=>a.e(R_(g,r,l,d,m,v,b,E,q,O,!0,k,0,F),{u_texsize_icon:N,u_texture_icon:1}),O_=(g,r)=>({u_opacity:g,u_color:r}),k_=(g,r,l,d,m)=>a.e(function(v,b,E,q){let O=E.imageManager.getPattern(v.from.toString()),k=E.imageManager.getPattern(v.to.toString()),{width:N,height:F}=E.imageManager.getPixelSize(),j=Math.pow(2,q.tileID.overscaledZ),V=q.tileSize*Math.pow(2,E.transform.tileZoom)/j,te=V*(q.tileID.canonical.x+q.tileID.wrap*j),Q=V*q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:O.tl,u_pattern_br_a:O.br,u_pattern_tl_b:k.tl,u_pattern_br_b:k.br,u_texsize:[N,F],u_mix:b.t,u_pattern_size_a:O.displaySize,u_pattern_size_b:k.displaySize,u_scale_a:b.fromScale,u_scale_b:b.toScale,u_tile_units_to_pixels:1/a.aC(q,1,E.transform.tileZoom),u_pixel_coord_upper:[te>>16,Q>>16],u_pixel_coord_lower:[65535&te,65535&Q]}}(l,m,r,d),{u_opacity:g}),im=(g,r)=>{},nm={fillExtrusion:(g,r)=>({u_lightpos:new a.bT(g,r.u_lightpos),u_lightpos_globe:new a.bT(g,r.u_lightpos_globe),u_lightintensity:new a.bg(g,r.u_lightintensity),u_lightcolor:new a.bT(g,r.u_lightcolor),u_vertical_gradient:new a.bg(g,r.u_vertical_gradient),u_opacity:new a.bg(g,r.u_opacity),u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillExtrusionPattern:(g,r)=>({u_lightpos:new a.bT(g,r.u_lightpos),u_lightpos_globe:new a.bT(g,r.u_lightpos_globe),u_lightintensity:new a.bg(g,r.u_lightintensity),u_lightcolor:new a.bT(g,r.u_lightcolor),u_vertical_gradient:new a.bg(g,r.u_vertical_gradient),u_height_factor:new a.bg(g,r.u_height_factor),u_opacity:new a.bg(g,r.u_opacity),u_fill_translate:new a.bU(g,r.u_fill_translate),u_image:new a.bP(g,r.u_image),u_texsize:new a.bU(g,r.u_texsize),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade)}),fill:(g,r)=>({u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillPattern:(g,r)=>({u_image:new a.bP(g,r.u_image),u_texsize:new a.bU(g,r.u_texsize),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade),u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillOutline:(g,r)=>({u_world:new a.bU(g,r.u_world),u_fill_translate:new a.bU(g,r.u_fill_translate)}),fillOutlinePattern:(g,r)=>({u_world:new a.bU(g,r.u_world),u_image:new a.bP(g,r.u_image),u_texsize:new a.bU(g,r.u_texsize),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade),u_fill_translate:new a.bU(g,r.u_fill_translate)}),circle:(g,r)=>({u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_scale_with_map:new a.bP(g,r.u_scale_with_map),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_extrude_scale:new a.bU(g,r.u_extrude_scale),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_globe_extrude_scale:new a.bg(g,r.u_globe_extrude_scale),u_translate:new a.bU(g,r.u_translate)}),collisionBox:(g,r)=>({u_pixel_extrude_scale:new a.bU(g,r.u_pixel_extrude_scale)}),collisionCircle:(g,r)=>({u_viewport_size:new a.bU(g,r.u_viewport_size)}),debug:(g,r)=>({u_color:new a.bQ(g,r.u_color),u_overlay:new a.bP(g,r.u_overlay),u_overlay_scale:new a.bg(g,r.u_overlay_scale)}),depth:im,clippingMask:im,heatmap:(g,r)=>({u_extrude_scale:new a.bg(g,r.u_extrude_scale),u_intensity:new a.bg(g,r.u_intensity),u_globe_extrude_scale:new a.bg(g,r.u_globe_extrude_scale)}),heatmapTexture:(g,r)=>({u_matrix:new a.bR(g,r.u_matrix),u_world:new a.bU(g,r.u_world),u_image:new a.bP(g,r.u_image),u_color_ramp:new a.bP(g,r.u_color_ramp),u_opacity:new a.bg(g,r.u_opacity)}),hillshade:(g,r)=>({u_image:new a.bP(g,r.u_image),u_latrange:new a.bU(g,r.u_latrange),u_exaggeration:new a.bg(g,r.u_exaggeration),u_altitudes:new a.b_(g,r.u_altitudes),u_azimuths:new a.b_(g,r.u_azimuths),u_accent:new a.bQ(g,r.u_accent),u_method:new a.bP(g,r.u_method),u_shadows:new a.bZ(g,r.u_shadows),u_highlights:new a.bZ(g,r.u_highlights)}),hillshadePrepare:(g,r)=>({u_matrix:new a.bR(g,r.u_matrix),u_image:new a.bP(g,r.u_image),u_dimension:new a.bU(g,r.u_dimension),u_zoom:new a.bg(g,r.u_zoom),u_unpack:new a.bS(g,r.u_unpack)}),colorRelief:(g,r)=>({u_image:new a.bP(g,r.u_image),u_unpack:new a.bS(g,r.u_unpack),u_dimension:new a.bU(g,r.u_dimension),u_elevation_stops:new a.bP(g,r.u_elevation_stops),u_color_stops:new a.bP(g,r.u_color_stops),u_color_ramp_size:new a.bP(g,r.u_color_ramp_size),u_opacity:new a.bg(g,r.u_opacity)}),line:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels)}),lineGradient:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels),u_image:new a.bP(g,r.u_image),u_image_height:new a.bg(g,r.u_image_height)}),linePattern:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_texsize:new a.bU(g,r.u_texsize),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_image:new a.bP(g,r.u_image),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels),u_scale:new a.bT(g,r.u_scale),u_fade:new a.bg(g,r.u_fade)}),lineSDF:(g,r)=>({u_translation:new a.bU(g,r.u_translation),u_ratio:new a.bg(g,r.u_ratio),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_units_to_pixels:new a.bU(g,r.u_units_to_pixels),u_patternscale_a:new a.bU(g,r.u_patternscale_a),u_patternscale_b:new a.bU(g,r.u_patternscale_b),u_sdfgamma:new a.bg(g,r.u_sdfgamma),u_image:new a.bP(g,r.u_image),u_tex_y_a:new a.bg(g,r.u_tex_y_a),u_tex_y_b:new a.bg(g,r.u_tex_y_b),u_mix:new a.bg(g,r.u_mix)}),raster:(g,r)=>({u_tl_parent:new a.bU(g,r.u_tl_parent),u_scale_parent:new a.bg(g,r.u_scale_parent),u_buffer_scale:new a.bg(g,r.u_buffer_scale),u_fade_t:new a.bg(g,r.u_fade_t),u_opacity:new a.bg(g,r.u_opacity),u_image0:new a.bP(g,r.u_image0),u_image1:new a.bP(g,r.u_image1),u_brightness_low:new a.bg(g,r.u_brightness_low),u_brightness_high:new a.bg(g,r.u_brightness_high),u_saturation_factor:new a.bg(g,r.u_saturation_factor),u_contrast_factor:new a.bg(g,r.u_contrast_factor),u_spin_weights:new a.bT(g,r.u_spin_weights),u_coords_top:new a.bS(g,r.u_coords_top),u_coords_bottom:new a.bS(g,r.u_coords_bottom)}),symbolIcon:(g,r)=>({u_is_size_zoom_constant:new a.bP(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(g,r.u_is_size_feature_constant),u_size_t:new a.bg(g,r.u_size_t),u_size:new a.bg(g,r.u_size),u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_pitch:new a.bg(g,r.u_pitch),u_rotate_symbol:new a.bP(g,r.u_rotate_symbol),u_aspect_ratio:new a.bg(g,r.u_aspect_ratio),u_fade_change:new a.bg(g,r.u_fade_change),u_label_plane_matrix:new a.bR(g,r.u_label_plane_matrix),u_coord_matrix:new a.bR(g,r.u_coord_matrix),u_is_text:new a.bP(g,r.u_is_text),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_is_along_line:new a.bP(g,r.u_is_along_line),u_is_variable_anchor:new a.bP(g,r.u_is_variable_anchor),u_texsize:new a.bU(g,r.u_texsize),u_texture:new a.bP(g,r.u_texture),u_translation:new a.bU(g,r.u_translation),u_pitched_scale:new a.bg(g,r.u_pitched_scale)}),symbolSDF:(g,r)=>({u_is_size_zoom_constant:new a.bP(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(g,r.u_is_size_feature_constant),u_size_t:new a.bg(g,r.u_size_t),u_size:new a.bg(g,r.u_size),u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_pitch:new a.bg(g,r.u_pitch),u_rotate_symbol:new a.bP(g,r.u_rotate_symbol),u_aspect_ratio:new a.bg(g,r.u_aspect_ratio),u_fade_change:new a.bg(g,r.u_fade_change),u_label_plane_matrix:new a.bR(g,r.u_label_plane_matrix),u_coord_matrix:new a.bR(g,r.u_coord_matrix),u_is_text:new a.bP(g,r.u_is_text),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_is_along_line:new a.bP(g,r.u_is_along_line),u_is_variable_anchor:new a.bP(g,r.u_is_variable_anchor),u_texsize:new a.bU(g,r.u_texsize),u_texture:new a.bP(g,r.u_texture),u_gamma_scale:new a.bg(g,r.u_gamma_scale),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_is_halo:new a.bP(g,r.u_is_halo),u_translation:new a.bU(g,r.u_translation),u_pitched_scale:new a.bg(g,r.u_pitched_scale)}),symbolTextAndIcon:(g,r)=>({u_is_size_zoom_constant:new a.bP(g,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bP(g,r.u_is_size_feature_constant),u_size_t:new a.bg(g,r.u_size_t),u_size:new a.bg(g,r.u_size),u_camera_to_center_distance:new a.bg(g,r.u_camera_to_center_distance),u_pitch:new a.bg(g,r.u_pitch),u_rotate_symbol:new a.bP(g,r.u_rotate_symbol),u_aspect_ratio:new a.bg(g,r.u_aspect_ratio),u_fade_change:new a.bg(g,r.u_fade_change),u_label_plane_matrix:new a.bR(g,r.u_label_plane_matrix),u_coord_matrix:new a.bR(g,r.u_coord_matrix),u_is_text:new a.bP(g,r.u_is_text),u_pitch_with_map:new a.bP(g,r.u_pitch_with_map),u_is_along_line:new a.bP(g,r.u_is_along_line),u_is_variable_anchor:new a.bP(g,r.u_is_variable_anchor),u_texsize:new a.bU(g,r.u_texsize),u_texsize_icon:new a.bU(g,r.u_texsize_icon),u_texture:new a.bP(g,r.u_texture),u_texture_icon:new a.bP(g,r.u_texture_icon),u_gamma_scale:new a.bg(g,r.u_gamma_scale),u_device_pixel_ratio:new a.bg(g,r.u_device_pixel_ratio),u_is_halo:new a.bP(g,r.u_is_halo),u_translation:new a.bU(g,r.u_translation),u_pitched_scale:new a.bg(g,r.u_pitched_scale)}),background:(g,r)=>({u_opacity:new a.bg(g,r.u_opacity),u_color:new a.bQ(g,r.u_color)}),backgroundPattern:(g,r)=>({u_opacity:new a.bg(g,r.u_opacity),u_image:new a.bP(g,r.u_image),u_pattern_tl_a:new a.bU(g,r.u_pattern_tl_a),u_pattern_br_a:new a.bU(g,r.u_pattern_br_a),u_pattern_tl_b:new a.bU(g,r.u_pattern_tl_b),u_pattern_br_b:new a.bU(g,r.u_pattern_br_b),u_texsize:new a.bU(g,r.u_texsize),u_mix:new a.bg(g,r.u_mix),u_pattern_size_a:new a.bU(g,r.u_pattern_size_a),u_pattern_size_b:new a.bU(g,r.u_pattern_size_b),u_scale_a:new a.bg(g,r.u_scale_a),u_scale_b:new a.bg(g,r.u_scale_b),u_pixel_coord_upper:new a.bU(g,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bU(g,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.bg(g,r.u_tile_units_to_pixels)}),terrain:(g,r)=>({u_texture:new a.bP(g,r.u_texture),u_ele_delta:new a.bg(g,r.u_ele_delta),u_fog_matrix:new a.bR(g,r.u_fog_matrix),u_fog_color:new a.bQ(g,r.u_fog_color),u_fog_ground_blend:new a.bg(g,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.bg(g,r.u_fog_ground_blend_opacity),u_horizon_color:new a.bQ(g,r.u_horizon_color),u_horizon_fog_blend:new a.bg(g,r.u_horizon_fog_blend),u_is_globe_mode:new a.bg(g,r.u_is_globe_mode)}),terrainDepth:(g,r)=>({u_ele_delta:new a.bg(g,r.u_ele_delta)}),terrainCoords:(g,r)=>({u_texture:new a.bP(g,r.u_texture),u_terrain_coords_id:new a.bg(g,r.u_terrain_coords_id),u_ele_delta:new a.bg(g,r.u_ele_delta)}),projectionErrorMeasurement:(g,r)=>({u_input:new a.bg(g,r.u_input),u_output_expected:new a.bg(g,r.u_output_expected)}),atmosphere:(g,r)=>({u_sun_pos:new a.bT(g,r.u_sun_pos),u_atmosphere_blend:new a.bg(g,r.u_atmosphere_blend),u_globe_position:new a.bT(g,r.u_globe_position),u_globe_radius:new a.bg(g,r.u_globe_radius),u_inv_proj_matrix:new a.bR(g,r.u_inv_proj_matrix)}),sky:(g,r)=>({u_sky_color:new a.bQ(g,r.u_sky_color),u_horizon_color:new a.bQ(g,r.u_horizon_color),u_horizon:new a.bU(g,r.u_horizon),u_horizon_normal:new a.bU(g,r.u_horizon_normal),u_sky_horizon_blend:new a.bg(g,r.u_sky_horizon_blend),u_sky_blend:new a.bg(g,r.u_sky_blend)})};class D_{constructor(r,l,d){this.context=r;let m=r.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!d,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let ed={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class vo{constructor(r,l,d,m){this.length=l.length,this.attributes=d,this.itemSize=l.bytesPerElement,this.dynamicDraw=m,this.context=r;let v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);let l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let d=0;d<this.attributes.length;d++){let m=l.attributes[this.attributes[d].name];m!==void 0&&r.enableVertexAttribArray(m)}}setVertexAttribPointers(r,l,d){for(let m=0;m<this.attributes.length;m++){let v=this.attributes[m],b=l.attributes[v.name];b!==void 0&&r.vertexAttribPointer(b,v.components,r[ed[v.type]],!1,this.itemSize,v.offset+this.itemSize*(d||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Kt{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class am extends Kt{getDefault(){return a.bf.transparent}set(r){let l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class om extends Kt{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class L_ extends Kt{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class sm extends Kt{getDefault(){return[!0,!0,!0,!0]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Gs extends Kt{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class lm extends Kt{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class rT extends Kt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class iT extends Kt{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class nT extends Kt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class aT extends Kt{getDefault(){return[0,1]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class z_ extends Kt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class oT extends Kt{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class F_ extends Kt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class td extends Kt{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class rd extends Kt{getDefault(){return a.bf.transparent}set(r){let l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class id extends Kt{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class um extends Kt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class Zs extends Kt{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class Sc extends Kt{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Ul extends Kt{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Gn extends Kt{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class N_ extends Kt{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class B_ extends Kt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class cm extends Kt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ws extends Kt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class nd extends Kt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class ad extends Kt{getDefault(){return null}set(r){let l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Tc extends Kt{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;let d=this.gl;Ba(d)?d.bindVertexArray(r):(l=d.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class od extends Kt{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class j_ extends Kt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class $l extends Kt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class ts extends Kt{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class U_ extends ts{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class hm extends ts{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Ut extends ts{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}let Ec="Framebuffer is not complete";class sT{constructor(r,l,d,m,v){this.context=r,this.width=l,this.height=d;let b=r.gl,E=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new U_(r,E),m)this.depthAttachment=v?new Ut(r,E):new hm(r,E);else if(v)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error(Ec)}destroy(){let r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){let d=this.depthAttachment.get();d&&r.deleteRenderbuffer(d)}r.deleteFramebuffer(this.framebuffer)}}class $_{constructor(r){var l,d;if(this.gl=r,this.clearColor=new am(this),this.clearDepth=new om(this),this.clearStencil=new L_(this),this.colorMask=new sm(this),this.depthMask=new Gs(this),this.stencilMask=new lm(this),this.stencilFunc=new rT(this),this.stencilOp=new iT(this),this.stencilTest=new nT(this),this.depthRange=new aT(this),this.depthTest=new z_(this),this.depthFunc=new oT(this),this.blend=new F_(this),this.blendFunc=new td(this),this.blendColor=new rd(this),this.blendEquation=new id(this),this.cullFace=new um(this),this.cullFaceSide=new Zs(this),this.frontFace=new Sc(this),this.program=new Ul(this),this.activeTexture=new Gn(this),this.viewport=new N_(this),this.bindFramebuffer=new B_(this),this.bindRenderbuffer=new cm(this),this.bindTexture=new Ws(this),this.bindVertexBuffer=new nd(this),this.bindElementBuffer=new ad(this),this.bindVertexArray=new Tc(this),this.pixelStoreUnpack=new od(this),this.pixelStoreUnpackPremultiplyAlpha=new j_(this),this.pixelStoreUnpackFlipY=new $l(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Ba(r)){this.HALF_FLOAT=r.HALF_FLOAT;let m=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:m==null?void 0:m.RGBA16F_EXT,this.RGB16F=(d=r.RGB16F)!==null&&d!==void 0?d:m==null?void 0:m.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");let m=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=m==null?void 0:m.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new D_(this,r,l)}createVertexBuffer(r,l,d){return new vo(this,r,l,d)}createRenderbuffer(r,l,d){let m=this.gl,v=m.createRenderbuffer();return this.bindRenderbuffer.set(v),m.renderbufferStorage(m.RENDERBUFFER,r,l,d),this.bindRenderbuffer.set(null),v}createFramebuffer(r,l,d,m){return new sT(this,r,l,d,m)}clear({color:r,depth:l,stencil:d}){let m=this.gl,v=0;r&&(v|=m.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(v|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),d!==void 0&&(v|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(d),this.stencilMask.set(255)),m.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.bH(r.blendFunction,pr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Ba(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return Ba(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let rs;function V_(g,r,l,d,m){let v=g.context,b=g.transform,E=v.gl,q=g.useProgram("collisionBox"),O=[],k=0,N=0;for(let re=0;re<d.length;re++){let ne=d[re],ue=r.getTile(ne).getBucket(l);if(!ue)continue;let ae=m?ue.textCollisionBox:ue.iconCollisionBox,fe=ue.collisionCircleArray;fe.length>0&&(O.push({circleArray:fe,circleOffset:N,coord:ne}),k+=fe.length/4,N=k),ae&&q.draw(v,E.LINES,Et.disabled,Wt.disabled,g.colorModeForRenderPass(),vt.disabled,Jh(g.transform),g.style.map.terrain&&g.style.map.terrain.getTerrainData(ne),b.getProjectionData({overscaledTileID:ne,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),l.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,null,g.transform.zoom,null,null,ae.collisionVertexBuffer)}if(!m||!O.length)return;let F=g.useProgram("collisionCircle"),j=new a.b$;j.resize(4*k),j._trim();let V=0;for(let re of O)for(let ne=0;ne<re.circleArray.length/4;ne++){let ue=4*ne,ae=re.circleArray[ue+0],fe=re.circleArray[ue+1],ge=re.circleArray[ue+2],le=re.circleArray[ue+3];j.emplace(V++,ae,fe,ge,le,0),j.emplace(V++,ae,fe,ge,le,1),j.emplace(V++,ae,fe,ge,le,2),j.emplace(V++,ae,fe,ge,le,3)}(!rs||rs.length<2*k)&&(rs=function(re){let ne=2*re,ue=new a.c1;ue.resize(ne),ue._trim();for(let ae=0;ae<ne;ae++){let fe=6*ae;ue.uint16[fe+0]=4*ae+0,ue.uint16[fe+1]=4*ae+1,ue.uint16[fe+2]=4*ae+2,ue.uint16[fe+3]=4*ae+2,ue.uint16[fe+4]=4*ae+3,ue.uint16[fe+5]=4*ae+0}return ue}(k));let te=v.createIndexBuffer(rs,!0),Q=v.createVertexBuffer(j,a.c0.members,!0);for(let re of O){let ne=JS(g.transform);F.draw(v,E.TRIANGLES,Et.disabled,Wt.disabled,g.colorModeForRenderPass(),vt.disabled,ne,g.style.map.terrain&&g.style.map.terrain.getTerrainData(re.coord),null,l.id,Q,te,a.aM.simpleSegment(0,2*re.circleOffset,re.circleArray.length,re.circleArray.length/2),null,g.transform.zoom,null,null,null)}Q.destroy(),te.destroy()}let lT=a.ag(new Float32Array(16));function G_(g,r,l,d,m,v){let{horizontalAlign:b,verticalAlign:E}=a.aH(g);return new a.P((-(b-.5)*r/m+d[0])*v,(-(E-.5)*l/m+d[1])*v)}function uT(g,r,l,d,m,v){let b=r.tileAnchorPoint.add(new a.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let E=d.mult(v);l||(E=E.rotate(-m));let q=b.add(E);return Gr(q.x,q.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(l){let E=qi(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(g),q=Math.atan(E.y/E.x)+(E.x<0?Math.PI:0);return g.add(d.rotate(q))}return g.add(d)}function dm(g,r,l,d,m,v,b,E,q,O,k,N){let F=g.text.placedSymbolArray,j=g.text.dynamicLayoutVertexArray,V=g.icon.dynamicLayoutVertexArray,te={};j.clear();for(let Q=0;Q<F.length;Q++){let re=F.get(Q),ne=re.hidden||!re.crossTileID||g.allowVerticalPlacement&&!re.placedOrientation?null:d[re.crossTileID];if(ne){let ue=new a.P(re.anchorX,re.anchorY),ae={getElevation:N,width:m.width,height:m.height,pitchedLabelPlaneMatrix:v,pitchWithMap:l,transform:m,tileAnchorPoint:ue,translation:O,unwrappedTileID:k},fe=l?Xo(ue.x,ue.y,ae):qi(ue.x,ue.y,ae),ge=$e(m.cameraToCenterDistance,fe.signedDistanceFromCamera),le=a.ap(g.textSizeData,E,re)*ge/a.aB;l&&(le*=g.tilePixelRatio/b);let{width:xe,height:Re,anchor:Ee,textOffset:Ie,textBoxScale:Me}=ne,je=G_(Ee,xe,Re,Ie,Me,le),Ze=m.getPitchedTextCorrection(ue.x+O[0],ue.y+O[1],k),ze=uT(fe.point,ae,r,je,-m.bearingInRadians,Ze),at=g.allowVerticalPlacement&&re.placedOrientation===a.ao.vertical?Math.PI/2:0;for(let Ct=0;Ct<re.numGlyphs;Ct++)a.av(j,ze,at);q&&re.associatedIconIndex>=0&&(te[re.associatedIconIndex]={shiftedAnchor:ze,angle:at})}else Na(re.numGlyphs,j)}if(q){V.clear();let Q=g.icon.placedSymbolArray;for(let re=0;re<Q.length;re++){let ne=Q.get(re);if(ne.hidden)Na(ne.numGlyphs,V);else{let ue=te[re];if(ue)for(let ae=0;ae<ne.numGlyphs;ae++)a.av(V,ue.shiftedAnchor,ue.angle);else Na(ne.numGlyphs,V)}}g.icon.dynamicLayoutVertexBuffer.updateData(V)}g.text.dynamicLayoutVertexBuffer.updateData(j)}function sd(g,r,l){return l.iconsInText&&r?"symbolTextAndIcon":g?"symbolSDF":"symbolIcon"}function Ic(g,r,l,d,m,v,b,E,q,O,k,N,F){let j=g.context,V=j.gl,te=g.transform,Q=E==="map",re=q==="map",ne=E!=="viewport"&&l.layout.get("symbol-placement")!=="point",ue=Q&&!re&&!ne,ae=!l.layout.get("symbol-sort-key").isConstant(),fe=!1,ge=g.getDepthModeForSublayer(0,Et.ReadOnly),le=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),xe=[],Re=te.getCircleRadiusCorrection();for(let Ee of d){let Ie=r.getTile(Ee),Me=Ie.getBucket(l);if(!Me)continue;let je=m?Me.text:Me.icon;if(!je||!je.segments.get().length||!je.hasVisibleVertices)continue;let Ze=je.programConfigurations.get(l.id),ze=m||Me.sdfIcons,at=m?Me.textSizeData:Me.iconSizeData,Ct=re||te.pitch!==0,Xt=g.useProgram(sd(ze,m,Me),Ze),nr=a.an(at,te.zoom),tr=g.style.map.terrain&&g.style.map.terrain.getTerrainData(Ee),yr,Ir,Pt,ar,Wr=[0,0],ui=null;if(m)Ir=Ie.glyphAtlasTexture,Pt=V.LINEAR,yr=Ie.glyphAtlasTexture.size,Me.iconsInText&&(Wr=Ie.imageAtlasTexture.size,ui=Ie.imageAtlasTexture,ar=Ct||g.options.rotating||g.options.zooming||at.kind==="composite"||at.kind==="camera"?V.LINEAR:V.NEAREST);else{let Hr=l.layout.get("icon-size").constantOr(0)!==1||Me.iconsNeedLinear;Ir=Ie.imageAtlasTexture,Pt=ze||g.options.rotating||g.options.zooming||Hr||Ct?V.LINEAR:V.NEAREST,yr=Ie.imageAtlasTexture.size}let gi=a.aC(Ie,1,g.transform.zoom),tn=jr(Q,g.transform,gi),wa=a.L();a.aq(wa,tn);let ns=jt(re,Q,g.transform,gi),as=a.aD(te,Ie,v,b),tu=te.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),ru=le&&Me.hasTextData(),el=l.layout.get("icon-text-fit")!=="none"&&ru&&Me.hasIconData();if(ne){let Hr=g.style.map.terrain?(Hn,Kr)=>g.style.map.terrain.getElevation(Ee,Hn,Kr):null,ci=l.layout.get("text-rotation-alignment")==="map";Tr(Me,g,m,tn,wa,re,O,ci,Ee.toUnwrapped(),te.width,te.height,as,Hr)}let tl=m&&le||el,_n=ne||tl?lT:re?tn:g.transform.clipSpaceToPixelsMatrix,Sa=ze&&l.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0,rn;rn=ze?Me.iconsInText?tT(at.kind,nr,ue,re,ne,tl,g,_n,ns,as,yr,Wr,Re):R_(at.kind,nr,ue,re,ne,tl,g,_n,ns,as,m,yr,0,Re):wc(at.kind,nr,ue,re,ne,tl,g,_n,ns,as,m,yr,Re);let os={program:Xt,buffers:je,uniformValues:rn,projectionData:tu,atlasTexture:Ir,atlasTextureIcon:ui,atlasInterpolation:Pt,atlasInterpolationIcon:ar,isSDF:ze,hasHalo:Sa};if(ae&&Me.canOverlap){fe=!0;let Hr=je.segments.get();for(let ci of Hr)xe.push({segments:new a.aM([ci]),sortKey:ci.sortKey,state:os,terrainData:tr})}else xe.push({segments:je.segments,sortKey:0,state:os,terrainData:tr})}fe&&xe.sort((Ee,Ie)=>Ee.sortKey-Ie.sortKey);for(let Ee of xe){let Ie=Ee.state;if(j.activeTexture.set(V.TEXTURE0),Ie.atlasTexture.bind(Ie.atlasInterpolation,V.CLAMP_TO_EDGE),Ie.atlasTextureIcon&&(j.activeTexture.set(V.TEXTURE1),Ie.atlasTextureIcon&&Ie.atlasTextureIcon.bind(Ie.atlasInterpolationIcon,V.CLAMP_TO_EDGE)),Ie.isSDF){let Me=Ie.uniformValues;Ie.hasHalo&&(Me.u_is_halo=1,qc(Ie.buffers,Ee.segments,l,g,Ie.program,ge,k,N,Me,Ie.projectionData,Ee.terrainData)),Me.u_is_halo=0}qc(Ie.buffers,Ee.segments,l,g,Ie.program,ge,k,N,Ie.uniformValues,Ie.projectionData,Ee.terrainData)}}function qc(g,r,l,d,m,v,b,E,q,O,k){let N=d.context;m.draw(N,N.gl.TRIANGLES,v,b,E,vt.backCCW,q,k,O,l.id,g.layoutVertexBuffer,g.indexBuffer,r,l.paint,d.transform.zoom,g.programConfigurations.get(l.id),g.dynamicLayoutVertexBuffer,g.opacityVertexBuffer)}function fm(g,r,l,d,m){let v=g.context,b=v.gl,E=Wt.disabled,q=new pr([b.ONE,b.ONE],a.bf.transparent,[!0,!0,!0,!0]),O=r.getBucket(l);if(!O)return;let k=d.key,N=l.heatmapFbos.get(k);N||(N=Pc(v,r.tileSize,r.tileSize),l.heatmapFbos.set(k,N)),v.bindFramebuffer.set(N.framebuffer),v.viewport.set([0,0,r.tileSize,r.tileSize]),v.clear({color:a.bf.transparent});let F=O.programConfigurations.get(l.id),j=g.useProgram("heatmap",F,!m),V=g.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),te=g.style.map.terrain.getTerrainData(d);j.draw(v,b.TRIANGLES,Et.disabled,E,q,vt.disabled,q_(r,g.transform.zoom,l.paint.get("heatmap-intensity"),1),te,V,l.id,O.layoutVertexBuffer,O.indexBuffer,O.segments,l.paint,g.transform.zoom,F)}function Z_(g,r,l,d,m){let v=g.context,b=v.gl,E=g.transform;v.setColorMode(g.colorModeForRenderPass());let q=Ac(v,r),O=l.key,k=r.heatmapFbos.get(O);if(!k)return;v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,k.colorAttachment.get()),v.activeTexture.set(b.TEXTURE1),q.bind(b.LINEAR,b.CLAMP_TO_EDGE);let N=E.getProjectionData({overscaledTileID:l,applyTerrainMatrix:m,applyGlobeMatrix:!d});g.useProgram("heatmapTexture").draw(v,b.TRIANGLES,Et.disabled,Wt.disabled,g.colorModeForRenderPass(),vt.disabled,Qp(g,r,0,1),null,N,r.id,g.rasterBoundsBuffer,g.quadTriangleIndexBuffer,g.rasterBoundsSegments,r.paint,E.zoom),k.destroy(),r.heatmapFbos.delete(O)}function Pc(g,r,l){var d,m;let v=g.gl,b=v.createTexture();v.bindTexture(v.TEXTURE_2D,b),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);let E=(d=g.HALF_FLOAT)!==null&&d!==void 0?d:v.UNSIGNED_BYTE,q=(m=g.RGBA16F)!==null&&m!==void 0?m:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,q,r,l,0,v.RGBA,E,null);let O=g.createFramebuffer(r,l,!1,!1);return O.colorAttachment.set(b),O}function Ac(g,r){return r.colorRampTexture||(r.colorRampTexture=new a.T(g,r.colorRamp,g.gl.RGBA)),r.colorRampTexture}function Cc(g,r,l,d,m){if(!l||!d||!d.imageAtlas)return;let v=d.imageAtlas.patternPositions,b=v[l.to.toString()],E=v[l.from.toString()];if(!b&&E&&(b=E),!E&&b&&(E=b),!b||!E){let q=m.getPaintProperty(r);b=v[q],E=v[q]}b&&E&&g.setConstantPatternPositions(b,E)}function ld(g,r,l,d,m,v,b,E){let q=g.context.gl,O="fill-pattern",k=l.paint.get(O),N=k&&k.constantOr(1),F=l.getCrossfadeParameters(),j,V,te,Q,re,ne=g.transform,ue=l.paint.get("fill-translate"),ae=l.paint.get("fill-translate-anchor");b?(V=N&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=q.LINES):(V=N?"fillPattern":"fill",j=q.TRIANGLES);let fe=k.constantOr(null);for(let ge of d){let le=r.getTile(ge);if(N&&!le.patternsLoaded())continue;let xe=le.getBucket(l);if(!xe)continue;let Re=xe.programConfigurations.get(l.id),Ee=g.useProgram(V,Re),Ie=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ge);N&&(g.context.activeTexture.set(q.TEXTURE0),le.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),Re.updatePaintBuffers(F)),Cc(Re,O,fe,le,l);let Me=ne.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!E,applyTerrainMatrix:!0}),je=a.aD(ne,le,ue,ae);if(b){Q=xe.indexBuffer2,re=xe.segments2;let ze=[q.drawingBufferWidth,q.drawingBufferHeight];te=V==="fillOutlinePattern"&&N?xc(g,F,le,ze,je):_c(ze,je)}else Q=xe.indexBuffer,re=xe.segments,te=N?Yh(g,F,le,je):{u_fill_translate:je};let Ze=g.stencilModeForClipping(ge);Ee.draw(g.context,j,m,Ze,v,vt.backCCW,te,Ie,Me,l.id,xe.layoutVertexBuffer,Q,re,l.paint,g.transform.zoom,Re)}}function pm(g,r,l,d,m,v,b,E){let q=g.context,O=q.gl,k="fill-extrusion-pattern",N=l.paint.get(k),F=N.constantOr(1),j=l.getCrossfadeParameters(),V=l.paint.get("fill-extrusion-opacity"),te=N.constantOr(null),Q=g.transform;for(let re of d){let ne=r.getTile(re),ue=ne.getBucket(l);if(!ue)continue;let ae=g.style.map.terrain&&g.style.map.terrain.getTerrainData(re),fe=ue.programConfigurations.get(l.id),ge=g.useProgram(F?"fillExtrusionPattern":"fillExtrusion",fe);F&&(g.context.activeTexture.set(O.TEXTURE0),ne.imageAtlasTexture.bind(O.LINEAR,O.CLAMP_TO_EDGE),fe.updatePaintBuffers(j));let le=Q.getProjectionData({overscaledTileID:re,applyGlobeMatrix:!E,applyTerrainMatrix:!0});Cc(fe,k,te,ne,l);let xe=a.aD(Q,ne,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),Re=l.paint.get("fill-extrusion-vertical-gradient"),Ee=F?XS(g,Re,V,xe,re,j,ne):ga(g,Re,V,xe);ge.draw(q,q.gl.TRIANGLES,m,v,b,vt.backCCW,Ee,ae,le,l.id,ue.layoutVertexBuffer,ue.indexBuffer,ue.segments,l.paint,g.transform.zoom,fe,g.style.map.terrain&&ue.centroidVertexBuffer)}}function Hs(g,r,l,d,m,v,b,E,q){var O;let k=g.style.projection,N=g.context,F=g.transform,j=N.gl,V=[`#define NUM_ILLUMINATION_SOURCES ${l.paint.get("hillshade-highlight-color").values.length}`],te=g.useProgram("hillshade",null,!1,V),Q=!g.options.moving;for(let re of d){let ne=r.getTile(re),ue=ne.fbo;if(!ue)continue;let ae=k.getMeshFromTileID(N,re.canonical,E,!0,"raster"),fe=(O=g.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(re);N.activeTexture.set(j.TEXTURE0),j.bindTexture(j.TEXTURE_2D,ue.colorAttachment.get());let ge=F.getProjectionData({overscaledTileID:re,aligned:Q,applyGlobeMatrix:!q,applyTerrainMatrix:!0});te.draw(N,j.TRIANGLES,v,m[re.overscaledZ],b,vt.backCCW,QS(g,ne,l),fe,ge,l.id,ae.vertexBuffer,ae.indexBuffer,ae.segments)}}function mm(g,r,l,d,m,v,b,E,q){var O;let k=g.style.projection,N=g.context,F=g.transform,j=N.gl,V=g.useProgram("colorRelief"),te=!g.options.moving,Q=!0,re=0;for(let ne of d){let ue=r.getTile(ne),ae=ue.dem;if(Q){let Ee=j.getParameter(j.MAX_TEXTURE_SIZE),{elevationTexture:Ie,colorTexture:Me}=l.getColorRampTextures(N,Ee,ae.getUnpackVector());N.activeTexture.set(j.TEXTURE1),Ie.bind(j.NEAREST,j.CLAMP_TO_EDGE),N.activeTexture.set(j.TEXTURE4),Me.bind(j.LINEAR,j.CLAMP_TO_EDGE),Q=!1,re=Ie.size[0]}if(!ae||!ae.data)continue;let fe=ae.stride,ge=ae.getPixels();if(N.activeTexture.set(j.TEXTURE0),N.pixelStoreUnpackPremultiplyAlpha.set(!1),ue.demTexture=ue.demTexture||g.getTileTexture(fe),ue.demTexture){let Ee=ue.demTexture;Ee.update(ge,{premultiply:!1}),Ee.bind(j.LINEAR,j.CLAMP_TO_EDGE)}else ue.demTexture=new a.T(N,ge,j.RGBA,{premultiply:!1}),ue.demTexture.bind(j.LINEAR,j.CLAMP_TO_EDGE);let le=k.getMeshFromTileID(N,ne.canonical,E,!0,"raster"),xe=(O=g.style.map.terrain)===null||O===void 0?void 0:O.getTerrainData(ne),Re=F.getProjectionData({overscaledTileID:ne,aligned:te,applyGlobeMatrix:!q,applyTerrainMatrix:!0});V.draw(N,j.TRIANGLES,v,m[ne.overscaledZ],b,vt.backCCW,A_(l,ue.dem,re),xe,Re,l.id,le.vertexBuffer,le.indexBuffer,le.segments)}}let ud=[new a.P(0,0),new a.P(a.$,0),new a.P(a.$,a.$),new a.P(0,a.$)];function Ks(g,r,l,d,m,v,b,E,q=!1,O=!1){let k=d[d.length-1].overscaledZ,N=g.context,F=N.gl,j=g.useProgram("raster"),V=g.transform,te=g.style.projection,Q=g.colorModeForRenderPass(),re=!g.options.moving;for(let ne of d){let ue=g.getDepthModeForSublayer(ne.overscaledZ-k,l.paint.get("raster-opacity")===1?Et.ReadWrite:Et.ReadOnly,F.LESS),ae=r.getTile(ne);ae.registerFadeDuration(l.paint.get("raster-fade-duration"));let fe=r.findLoadedParent(ne,0),ge=r.findLoadedSibling(ne),le=gm(ae,fe||ge||null,r,l,g.transform,g.style.map.terrain),xe,Re,Ee=l.paint.get("raster-resampling")==="nearest"?F.NEAREST:F.LINEAR;N.activeTexture.set(F.TEXTURE0),ae.texture.bind(Ee,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),N.activeTexture.set(F.TEXTURE1),fe?(fe.texture.bind(Ee,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),xe=Math.pow(2,fe.tileID.overscaledZ-ae.tileID.overscaledZ),Re=[ae.tileID.canonical.x*xe%1,ae.tileID.canonical.y*xe%1]):ae.texture.bind(Ee,F.CLAMP_TO_EDGE,F.LINEAR_MIPMAP_NEAREST),ae.texture.useMipmap&&N.extTextureFilterAnisotropic&&g.transform.pitch>20&&F.texParameterf(F.TEXTURE_2D,N.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,N.extTextureFilterAnisotropicMax);let Ie=g.style.map.terrain&&g.style.map.terrain.getTerrainData(ne),Me=V.getProjectionData({overscaledTileID:ne,aligned:re,applyGlobeMatrix:!O,applyTerrainMatrix:!0}),je=bc(Re||[0,0],xe||1,le,l,E),Ze=te.getMeshFromTileID(N,ne.canonical,v,b,"raster");j.draw(N,F.TRIANGLES,ue,m?m[ne.overscaledZ]:Wt.disabled,Q,q?vt.frontCCW:vt.backCCW,je,Ie,Me,l.id,Ze.vertexBuffer,Ze.indexBuffer,Ze.segments)}}function gm(g,r,l,d,m,v){let b=d.paint.get("raster-fade-duration");if(!v&&b>0){let E=D.now(),q=(E-g.timeAdded)/b,O=r?(E-r.timeAdded)/b:-1,k=l.getSource(),N=st(m,{tileSize:k.tileSize,roundZoom:k.roundZoom}),F=!r||Math.abs(r.tileID.overscaledZ-N)>Math.abs(g.tileID.overscaledZ-N),j=F&&g.refreshedUponExpiration?1:a.ah(F?q:1-O,0,1);return g.refreshedUponExpiration&&q>=1&&(g.refreshedUponExpiration=!1),r?{opacity:1,mix:1-j}:{opacity:j,mix:0}}return{opacity:1,mix:0}}let W_=new a.bf(1,0,0,1),H_=new a.bf(0,1,0,1),cd=new a.bf(0,0,1,1),vm=new a.bf(1,0,1,1),cT=new a.bf(0,1,1,1);function ym(g,r,l,d){$a(g,0,r+l/2,g.transform.width,l,d)}function Er(g,r,l,d){$a(g,r-l/2,0,l,g.transform.height,d)}function $a(g,r,l,d,m,v){let b=g.context,E=b.gl;E.enable(E.SCISSOR_TEST),E.scissor(r*g.pixelRatio,l*g.pixelRatio,d*g.pixelRatio,m*g.pixelRatio),b.clear({color:v}),E.disable(E.SCISSOR_TEST)}function Zn(g,r,l){let d=g.context,m=d.gl,v=g.useProgram("debug"),b=Et.disabled,E=Wt.disabled,q=g.colorModeForRenderPass(),O="$debug",k=g.style.map.terrain&&g.style.map.terrain.getTerrainData(l);d.activeTexture.set(m.TEXTURE0);let N=r.getTileByID(l.key).latestRawTileData,F=Math.floor((N&&N.byteLength||0)/1024),j=r.getTile(l).tileSize,V=512/Math.min(j,512)*(l.overscaledZ/g.transform.zoom)*.5,te=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(te+=` => ${l.overscaledZ}`),function(re,ne){re.initDebugOverlayCanvas();let ue=re.debugOverlayCanvas,ae=re.context.gl,fe=re.debugOverlayCanvas.getContext("2d");fe.clearRect(0,0,ue.width,ue.height),fe.shadowColor="white",fe.shadowBlur=2,fe.lineWidth=1.5,fe.strokeStyle="white",fe.textBaseline="top",fe.font="bold 36px Open Sans, sans-serif",fe.fillText(ne,5,5),fe.strokeText(ne,5,5),re.debugOverlayTexture.update(ue),re.debugOverlayTexture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE)}(g,`${te} ${F}kB`);let Q=g.transform.getProjectionData({overscaledTileID:l,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(d,m.TRIANGLES,b,E,pr.alphaBlended,vt.disabled,$s(a.bf.transparent,V),null,Q,O,g.debugBuffer,g.quadTriangleIndexBuffer,g.debugSegments),v.draw(d,m.LINE_STRIP,b,E,q,vt.disabled,$s(a.bf.red),k,Q,O,g.debugBuffer,g.tileBorderIndexBuffer,g.debugSegments)}function hd(g,r,l,d){let{isRenderingGlobe:m}=d,v=g.context,b=v.gl,E=g.transform,q=g.colorModeForRenderPass(),O=g.getDepthModeFor3D(),k=g.useProgram("terrain");v.bindFramebuffer.set(null),v.viewport.set([0,0,g.width,g.height]);for(let N of l){let F=r.getTerrainMesh(N.tileID),j=g.renderToTexture.getTexture(N),V=r.getTerrainData(N.tileID);v.activeTexture.set(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,j.texture);let te=r.getMeshFrameDelta(E.zoom),Q=E.calculateFogMatrix(N.tileID.toUnwrapped()),re=Kh(te,Q,g.style.sky,E.pitch,m),ne=E.getProjectionData({overscaledTileID:N.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});k.draw(v,b.TRIANGLES,O,Wt.disabled,q,vt.backCCW,re,V,ne,"terrain",F.vertexBuffer,F.indexBuffer,F.segments)}}function Mc(g,r){if(!r.mesh){let l=new a.aL;l.emplaceBack(-1,-1),l.emplaceBack(1,-1),l.emplaceBack(1,1),l.emplaceBack(-1,1);let d=new a.aN;d.emplaceBack(0,1,2),d.emplaceBack(0,2,3),r.mesh=new zs(g.createVertexBuffer(l,es.members),g.createIndexBuffer(d),a.aM.simpleSegment(0,0,l.length,d.length))}return r.mesh}class K_{constructor(r,l){this.context=new $_(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ag(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Lt.maxUnderzooming+Lt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Fl}resize(r,l,d){if(this.width=Math.floor(r*d),this.height=Math.floor(l*d),this.pixelRatio=d,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let m of this.style._order)this.style._layers[m].resize()}setup(){let r=this.context,l=new a.aL;l.emplaceBack(0,0),l.emplaceBack(a.$,0),l.emplaceBack(0,a.$),l.emplaceBack(a.$,a.$),this.tileExtentBuffer=r.createVertexBuffer(l,es.members),this.tileExtentSegments=a.aM.simpleSegment(0,0,4,2);let d=new a.aL;d.emplaceBack(0,0),d.emplaceBack(a.$,0),d.emplaceBack(0,a.$),d.emplaceBack(a.$,a.$),this.debugBuffer=r.createVertexBuffer(d,es.members),this.debugSegments=a.aM.simpleSegment(0,0,4,5);let m=new a.c6;m.emplaceBack(0,0,0,0),m.emplaceBack(a.$,0,a.$,0),m.emplaceBack(0,a.$,0,a.$),m.emplaceBack(a.$,a.$,a.$,a.$),this.rasterBoundsBuffer=r.createVertexBuffer(m,HS.members),this.rasterBoundsSegments=a.aM.simpleSegment(0,0,4,2);let v=new a.aL;v.emplaceBack(0,0),v.emplaceBack(a.$,0),v.emplaceBack(0,a.$),v.emplaceBack(a.$,a.$),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(v,es.members),this.rasterBoundsSegmentsPosOnly=a.aM.simpleSegment(0,0,4,5);let b=new a.aL;b.emplaceBack(0,0),b.emplaceBack(1,0),b.emplaceBack(0,1),b.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(b,es.members),this.viewportSegments=a.aM.simpleSegment(0,0,4,2);let E=new a.c7;E.emplaceBack(0),E.emplaceBack(1),E.emplaceBack(3),E.emplaceBack(2),E.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(E);let q=new a.aN;q.emplaceBack(1,0,2),q.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(q);let O=this.context.gl;this.stencilClearMode=new Wt({func:O.ALWAYS,mask:0},0,255,O.ZERO,O.ZERO,O.ZERO),this.tileExtentMesh=new zs(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let d=a.L();a.bY(d,0,this.width,this.height,0,0,1),a.N(d,d,[l.drawingBufferWidth,l.drawingBufferHeight,0]);let m={mainMatrix:d,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:d};this.useProgram("clippingMask",null,!0).draw(r,l.TRIANGLES,Et.disabled,this.stencilClearMode,pr.disabled,vt.disabled,null,null,m,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l,d){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source,this.nextStencilID+l.length>256&&this.clearStencil();let m=this.context;m.setColorMode(pr.disabled),m.setDepthMode(Et.disabled);let v={};for(let b of l)v[b.key]=this.nextStencilID++;this._renderTileMasks(v,l,d,!0),this._renderTileMasks(v,l,d,!1),this._tileClippingMaskIDs=v}_renderTileMasks(r,l,d,m){let v=this.context,b=v.gl,E=this.style.projection,q=this.transform,O=this.useProgram("clippingMask");for(let k of l){let N=r[k.key],F=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k),j=E.getMeshFromTileID(this.context,k.canonical,m,!0,"stencil"),V=q.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!d,applyTerrainMatrix:!0});O.draw(v,b.TRIANGLES,Et.disabled,new Wt({func:b.ALWAYS,mask:0},N,255,b.KEEP,b.KEEP,b.REPLACE),pr.disabled,d?vt.disabled:vt.backCCW,null,F,V,"$clipping",j.vertexBuffer,j.indexBuffer,j.segments)}}_renderTilesDepthBuffer(){let r=this.context,l=r.gl,d=this.style.projection,m=this.transform,v=this.useProgram("depth"),b=this.getDepthModeFor3D(),E=Se(m,{tileSize:m.tileSize});for(let q of E){let O=this.style.map.terrain&&this.style.map.terrain.getTerrainData(q),k=d.getMeshFromTileID(this.context,q.canonical,!0,!0,"raster"),N=m.getProjectionData({overscaledTileID:q,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(r,l.TRIANGLES,b,Wt.disabled,pr.disabled,vt.backCCW,null,O,N,"$clipping",k.vertexBuffer,k.indexBuffer,k.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let r=this.nextStencilID++,l=this.context.gl;return new Wt({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){let l=this.context.gl;return new Wt({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){let l=this.context.gl,d=r.sort((b,E)=>E.overscaledZ-b.overscaledZ),m=d[d.length-1].overscaledZ,v=d[0].overscaledZ-m+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();let b={};for(let E=0;E<v;E++)b[E+m]=new Wt({func:l.GEQUAL,mask:255},E+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=v,[b,d]}return[{[m]:Wt.disabled},d]}stencilConfigForOverlapTwoPass(r){let l=this.context.gl,d=r.sort((b,E)=>E.overscaledZ-b.overscaledZ),m=d[d.length-1].overscaledZ,v=d[0].overscaledZ-m+1;if(this.clearStencil(),v>1){let b={},E={};for(let q=0;q<v;q++)b[q+m]=new Wt({func:l.GREATER,mask:255},v+1+q,255,l.KEEP,l.KEEP,l.REPLACE),E[q+m]=new Wt({func:l.GREATER,mask:255},1+q,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID=2*v+1,[b,E,d]}return this.nextStencilID=3,[{[m]:new Wt({func:l.GREATER,mask:255},2,255,l.KEEP,l.KEEP,l.REPLACE)},{[m]:new Wt({func:l.GREATER,mask:255},1,255,l.KEEP,l.KEEP,l.REPLACE)},d]}colorModeForRenderPass(){let r=this.context.gl;return this._showOverdrawInspector?new pr([r.CONSTANT_COLOR,r.ONE],new a.bf(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?pr.unblended:pr.alphaBlended}getDepthModeForSublayer(r,l,d){if(!this.opaquePassEnabledForLayer())return Et.disabled;let m=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Et(d||this.context.gl.LEQUAL,l,[m,m])}getDepthModeFor3D(){return new Et(this.context.gl.LEQUAL,Et.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){var d,m;this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();let v=this.style._order,b=this.style.sourceCaches,E={},q={},O={},k={isRenderingToTexture:!1,isRenderingGlobe:((d=r.projection)===null||d===void 0?void 0:d.transitionState)>0};for(let F in b){let j=b[F];j.used&&j.prepare(this.context),E[F]=j.getVisibleCoordinates(!1),q[F]=E[F].slice().reverse(),O[F]=j.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let F=0;F<v.length;F++)if(this.style._layers[v[F]].is3D()){this.opaquePassCutoff=F;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let F of v){let j=this.style._layers[F];if(!j.hasOffscreenPass()||j.isHidden(this.transform.zoom))continue;let V=q[j.source];(j.type==="custom"||V.length)&&this.renderLayer(this,b[j.source],j,V,k)}if((m=this.style.projection)===null||m===void 0||m.updateGPUdependent({context:this.context,useProgram:F=>this.useProgram(F)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?a.bf.black:a.bf.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(F,j){let V=F.context,te=V.gl,Q=((ge,le,xe)=>{let Re=Math.cos(le.rollInRadians),Ee=Math.sin(le.rollInRadians),Ie=me(le),Me=le.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ge.properties.get("sky-color"),u_horizon_color:ge.properties.get("horizon-color"),u_horizon:[(le.width/2-Ie*Ee)*xe,(le.height/2+Ie*Re)*xe],u_horizon_normal:[-Ee,Re],u_sky_horizon_blend:ge.properties.get("sky-horizon-blend")*le.height/2*xe,u_sky_blend:Me}})(j,F.style.map.transform,F.pixelRatio),re=new Et(te.LEQUAL,Et.ReadWrite,[0,1]),ne=Wt.disabled,ue=F.colorModeForRenderPass(),ae=F.useProgram("sky"),fe=Mc(V,j);ae.draw(V,te.TRIANGLES,re,ne,ue,vt.disabled,Q,null,void 0,"sky",fe.vertexBuffer,fe.indexBuffer,fe.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){let F=this.style._layers[v[this.currentLayer]],j=b[F.source],V=E[F.source];this._renderTileClippingMasks(F,V,!1),this.renderLayer(this,j,F,V,k)}this.renderPass="translucent";let N=!1;for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){let F=this.style._layers[v[this.currentLayer]],j=b[F.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(F,k))continue;this.opaquePassEnabledForLayer()||N||(N=!0,k.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let V=(F.type==="symbol"?O:q)[F.source];this._renderTileClippingMasks(F,E[F.source],!!this.renderToTexture),this.renderLayer(this,j,F,V,k)}if(k.isRenderingGlobe&&function(F,j,V){let te=F.context,Q=te.gl,re=F.useProgram("atmosphere"),ne=new Et(Q.LEQUAL,Et.ReadOnly,[0,1]),ue=F.transform,ae=function(Me,je){let Ze=Me.properties.get("position"),ze=[-Ze.x,-Ze.y,-Ze.z],at=a.ag(new Float64Array(16));return Me.properties.get("anchor")==="map"&&(a.b6(at,at,je.rollInRadians),a.b7(at,at,-je.pitchInRadians),a.b6(at,at,je.bearingInRadians),a.b7(at,at,je.center.lat*Math.PI/180),a.bz(at,at,-je.center.lng*Math.PI/180)),a.c5(ze,ze,at),ze}(V,F.transform),fe=ue.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ge=j.properties.get("atmosphere-blend")*fe.projectionTransition;if(ge===0)return;let le=Bl(ue.worldSize,ue.center.lat),xe=ue.inverseProjectionMatrix,Re=new Float64Array(4);Re[3]=1,a.aw(Re,Re,ue.modelViewProjectionMatrix),Re[0]/=Re[3],Re[1]/=Re[3],Re[2]/=Re[3],Re[3]=1,a.aw(Re,Re,xe),Re[0]/=Re[3],Re[1]/=Re[3],Re[2]/=Re[3],Re[3]=1;let Ee=((Me,je,Ze,ze,at)=>({u_sun_pos:Me,u_atmosphere_blend:je,u_globe_position:Ze,u_globe_radius:ze,u_inv_proj_matrix:at}))(ae,ge,[Re[0],Re[1],Re[2]],le,xe),Ie=Mc(te,j);re.draw(te,Q.TRIANGLES,ne,Wt.disabled,pr.alphaBlended,vt.disabled,Ee,null,null,"atmosphere",Ie.vertexBuffer,Ie.indexBuffer,Ie.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let F=function(j,V){let te=null,Q=Object.values(j._layers).flatMap(ae=>ae.source&&!ae.isHidden(V)?[j.sourceCaches[ae.source]]:[]),re=Q.filter(ae=>ae.getSource().type==="vector"),ne=Q.filter(ae=>ae.getSource().type!=="vector"),ue=ae=>{(!te||te.getSource().maxzoom<ae.getSource().maxzoom)&&(te=ae)};return re.forEach(ae=>ue(ae)),te||ne.forEach(ae=>ue(ae)),te}(this.style,this.transform.zoom);F&&function(j,V,te){for(let Q=0;Q<te.length;Q++)Zn(j,V,te[Q])}(this,F,F.getVisibleCoordinates())}this.options.showPadding&&function(F){let j=F.transform.padding;ym(F,F.transform.height-(j.top||0),3,W_),ym(F,j.bottom||0,3,H_),Er(F,j.left||0,3,cd),Er(F,F.transform.width-(j.right||0),3,vm);let V=F.transform.centerPoint;(function(te,Q,re,ne){$a(te,Q-1,re-10,2,20,ne),$a(te,Q-10,re-1,20,2,ne)})(F,V.x,F.transform.height-V.y,cT)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;let l=this.terrainFacilitator.matrix,d=this.transform.modelViewProjectionMatrix,m=this.terrainFacilitator.dirty;m||(m=r?!a.c8(l,d):!a.c9(l,d)),m||(m=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),m&&(a.ca(l,d),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,b){let E=v.context,q=E.gl,O=v.transform,k=pr.unblended,N=new Et(q.LEQUAL,Et.ReadWrite,[0,1]),F=b.sourceCache.getRenderableTiles(),j=v.useProgram("terrainDepth");E.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:a.bf.transparent,depth:1});for(let V of F){let te=b.getTerrainMesh(V.tileID),Q=b.getTerrainData(V.tileID),re=O.getProjectionData({overscaledTileID:V.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ne={u_ele_delta:b.getMeshFrameDelta(O.zoom)};j.draw(E,q.TRIANGLES,N,Wt.disabled,k,vt.backCCW,ne,Q,re,"terrain",te.vertexBuffer,te.indexBuffer,te.segments)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,b){let E=v.context,q=E.gl,O=v.transform,k=pr.unblended,N=new Et(q.LEQUAL,Et.ReadWrite,[0,1]),F=b.getCoordsTexture(),j=b.sourceCache.getRenderableTiles(),V=v.useProgram("terrainCoords");E.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),E.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),E.clear({color:a.bf.transparent,depth:1}),b.coordsIndex=[];for(let te of j){let Q=b.getTerrainMesh(te.tileID),re=b.getTerrainData(te.tileID);E.activeTexture.set(q.TEXTURE0),q.bindTexture(q.TEXTURE_2D,F.texture);let ne={u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(O.zoom)},ue=O.getProjectionData({overscaledTileID:te.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(E,q.TRIANGLES,N,Wt.disabled,k,vt.backCCW,ne,re,ue,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),b.coordsIndex.push(te.tileID.key)}E.bindFramebuffer.set(null),E.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(r,l,d,m,v){d.isHidden(this.transform.zoom)||(d.type==="background"||d.type==="custom"||(m||[]).length)&&(this.id=d.id,a.cb(d)?function(b,E,q,O,k,N){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:F}=N,j=Wt.disabled,V=b.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(te,Q,re,ne,ue,ae,fe,ge,le){let xe=Q.transform,Re=Q.style.map.terrain,Ee=ue==="map",Ie=ae==="map";for(let Me of te){let je=ne.getTile(Me),Ze=je.getBucket(re);if(!Ze||!Ze.text||!Ze.text.segments.get().length)continue;let ze=a.an(Ze.textSizeData,xe.zoom),at=a.aC(je,1,Q.transform.zoom),Ct=jr(Ee,Q.transform,at),Xt=re.layout.get("icon-text-fit")!=="none"&&Ze.hasIconData();if(ze){let nr=Math.pow(2,xe.zoom-je.tileID.overscaledZ),tr=Re?(yr,Ir)=>Re.getElevation(Me,yr,Ir):null;dm(Ze,Ee,Ie,le,xe,Ct,nr,ze,Xt,a.aD(xe,je,fe,ge),Me.toUnwrapped(),tr)}}}(O,b,q,E,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),k),q.paint.get("icon-opacity").constantOr(1)!==0&&Ic(b,E,q,O,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),j,V,F),q.paint.get("text-opacity").constantOr(1)!==0&&Ic(b,E,q,O,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),j,V,F),E.map.showCollisionBoxes&&(V_(b,E,q,O,!0),V_(b,E,q,O,!1))}(r,l,d,m,this.style.placement.variableOffsets,v):a.cc(d)?function(b,E,q,O,k){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:N}=k,F=q.paint.get("circle-opacity"),j=q.paint.get("circle-stroke-width"),V=q.paint.get("circle-stroke-opacity"),te=!q.layout.get("circle-sort-key").isConstant();if(F.constantOr(1)===0&&(j.constantOr(1)===0||V.constantOr(1)===0))return;let Q=b.context,re=Q.gl,ne=b.transform,ue=b.getDepthModeForSublayer(0,Et.ReadOnly),ae=Wt.disabled,fe=b.colorModeForRenderPass(),ge=[],le=ne.getCircleRadiusCorrection();for(let xe=0;xe<O.length;xe++){let Re=O[xe],Ee=E.getTile(Re),Ie=Ee.getBucket(q);if(!Ie)continue;let Me=q.paint.get("circle-translate"),je=q.paint.get("circle-translate-anchor"),Ze=a.aD(ne,Ee,Me,je),ze=Ie.programConfigurations.get(q.id),at=b.useProgram("circle",ze),Ct=Ie.layoutVertexBuffer,Xt=Ie.indexBuffer,nr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Re),tr={programConfiguration:ze,program:at,layoutVertexBuffer:Ct,indexBuffer:Xt,uniformValues:YS(b,Ee,q,Ze,le),terrainData:nr,projectionData:ne.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!N,applyTerrainMatrix:!0})};if(te){let yr=Ie.segments.get();for(let Ir of yr)ge.push({segments:new a.aM([Ir]),sortKey:Ir.sortKey,state:tr})}else ge.push({segments:Ie.segments,sortKey:0,state:tr})}te&&ge.sort((xe,Re)=>xe.sortKey-Re.sortKey);for(let xe of ge){let{programConfiguration:Re,program:Ee,layoutVertexBuffer:Ie,indexBuffer:Me,uniformValues:je,terrainData:Ze,projectionData:ze}=xe.state;Ee.draw(Q,re.TRIANGLES,ue,ae,fe,vt.backCCW,je,Ze,ze,q.id,Ie,Me,xe.segments,q.paint,b.transform.zoom,Re)}}(r,l,d,m,v):a.cd(d)?function(b,E,q,O,k){if(q.paint.get("heatmap-opacity")===0)return;let N=b.context,{isRenderingToTexture:F,isRenderingGlobe:j}=k;if(b.style.map.terrain){for(let V of O){let te=E.getTile(V);E.hasRenderableParent(V)||(b.renderPass==="offscreen"?fm(b,te,q,V,j):b.renderPass==="translucent"&&Z_(b,q,V,F,j))}N.viewport.set([0,0,b.width,b.height])}else b.renderPass==="offscreen"?function(V,te,Q,re){let ne=V.context,ue=ne.gl,ae=V.transform,fe=Wt.disabled,ge=new pr([ue.ONE,ue.ONE],a.bf.transparent,[!0,!0,!0,!0]);(function(le,xe,Re){let Ee=le.gl;le.activeTexture.set(Ee.TEXTURE1),le.viewport.set([0,0,xe.width/4,xe.height/4]);let Ie=Re.heatmapFbos.get(a.c2);Ie?(Ee.bindTexture(Ee.TEXTURE_2D,Ie.colorAttachment.get()),le.bindFramebuffer.set(Ie.framebuffer)):(Ie=Pc(le,xe.width/4,xe.height/4),Re.heatmapFbos.set(a.c2,Ie))})(ne,V,Q),ne.clear({color:a.bf.transparent});for(let le=0;le<re.length;le++){let xe=re[le];if(te.hasRenderableParent(xe))continue;let Re=te.getTile(xe),Ee=Re.getBucket(Q);if(!Ee)continue;let Ie=Ee.programConfigurations.get(Q.id),Me=V.useProgram("heatmap",Ie),je=ae.getProjectionData({overscaledTileID:xe,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Ze=ae.getCircleRadiusCorrection();Me.draw(ne,ue.TRIANGLES,Et.disabled,fe,ge,vt.backCCW,q_(Re,ae.zoom,Q.paint.get("heatmap-intensity"),Ze),null,je,Q.id,Ee.layoutVertexBuffer,Ee.indexBuffer,Ee.segments,Q.paint,ae.zoom,Ie)}ne.viewport.set([0,0,V.width,V.height])}(b,E,q,O):b.renderPass==="translucent"&&function(V,te){let Q=V.context,re=Q.gl;Q.setColorMode(V.colorModeForRenderPass());let ne=te.heatmapFbos.get(a.c2);ne&&(Q.activeTexture.set(re.TEXTURE0),re.bindTexture(re.TEXTURE_2D,ne.colorAttachment.get()),Q.activeTexture.set(re.TEXTURE1),Ac(Q,te).bind(re.LINEAR,re.CLAMP_TO_EDGE),V.useProgram("heatmapTexture").draw(Q,re.TRIANGLES,Et.disabled,Wt.disabled,V.colorModeForRenderPass(),vt.disabled,Qp(V,te,0,1),null,null,te.id,V.viewportBuffer,V.quadTriangleIndexBuffer,V.viewportSegments,te.paint,V.transform.zoom))}(b,q)}(r,l,d,m,v):a.ce(d)?function(b,E,q,O,k){if(b.renderPass!=="translucent")return;let{isRenderingToTexture:N}=k,F=q.paint.get("line-opacity"),j=q.paint.get("line-width");if(F.constantOr(1)===0||j.constantOr(1)===0)return;let V=b.getDepthModeForSublayer(0,Et.ReadOnly),te=b.colorModeForRenderPass(),Q=q.paint.get("line-dasharray"),re=q.paint.get("line-pattern"),ne=re.constantOr(1),ue=q.paint.get("line-gradient"),ae=q.getCrossfadeParameters(),fe=ne?"linePattern":Q?"lineSDF":ue?"lineGradient":"line",ge=b.context,le=ge.gl,xe=b.transform,Re=!0;for(let Ee of O){let Ie=E.getTile(Ee);if(ne&&!Ie.patternsLoaded())continue;let Me=Ie.getBucket(q);if(!Me)continue;let je=Me.programConfigurations.get(q.id),Ze=b.context.program.get(),ze=b.useProgram(fe,je),at=Re||ze.program!==Ze,Ct=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee),Xt=re.constantOr(null);if(Xt&&Ie.imageAtlas){let Pt=Ie.imageAtlas,ar=Pt.patternPositions[Xt.to.toString()],Wr=Pt.patternPositions[Xt.from.toString()];ar&&Wr&&je.setConstantPatternPositions(ar,Wr)}let nr=xe.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!N,applyTerrainMatrix:!0}),tr=xe.getPixelScale(),yr=ne?M_(b,Ie,q,tr,ae):Q?Vs(b,Ie,q,tr,Q,ae):ue?C_(b,Ie,q,tr,Me.lineClipsArray.length):Qh(b,Ie,q,tr);if(ne)ge.activeTexture.set(le.TEXTURE0),Ie.imageAtlasTexture.bind(le.LINEAR,le.CLAMP_TO_EDGE),je.updatePaintBuffers(ae);else if(Q&&(at||b.lineAtlas.dirty))ge.activeTexture.set(le.TEXTURE0),b.lineAtlas.bind(ge);else if(ue){let Pt=Me.gradients[q.id],ar=Pt.texture;if(q.gradientVersion!==Pt.version){let Wr=256;if(q.stepInterpolant){let ui=E.getSource().maxzoom,gi=Ee.canonical.z===ui?Math.ceil(1<<b.transform.maxZoom-Ee.canonical.z):1;Wr=a.ah(a.c3(Me.maxLineLength/a.$*1024*gi),256,ge.maxTextureSize)}Pt.gradient=a.c4({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:Wr,image:Pt.gradient||void 0,clips:Me.lineClipsArray}),Pt.texture?Pt.texture.update(Pt.gradient):Pt.texture=new a.T(ge,Pt.gradient,le.RGBA),Pt.version=q.gradientVersion,ar=Pt.texture}ge.activeTexture.set(le.TEXTURE0),ar.bind(q.stepInterpolant?le.NEAREST:le.LINEAR,le.CLAMP_TO_EDGE)}let Ir=b.stencilModeForClipping(Ee);ze.draw(ge,le.TRIANGLES,V,Ir,te,vt.disabled,yr,Ct,nr,q.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,q.paint,b.transform.zoom,je,Me.layoutVertexBuffer2),Re=!1}}(r,l,d,m,v):a.cf(d)?function(b,E,q,O,k){let N=q.paint.get("fill-color"),F=q.paint.get("fill-opacity");if(F.constantOr(1)===0)return;let{isRenderingToTexture:j}=k,V=b.colorModeForRenderPass(),te=q.paint.get("fill-pattern"),Q=b.opaquePassEnabledForLayer()&&!te.constantOr(1)&&N.constantOr(a.bf.transparent).a===1&&F.constantOr(0)===1?"opaque":"translucent";if(b.renderPass===Q){let re=b.getDepthModeForSublayer(1,b.renderPass==="opaque"?Et.ReadWrite:Et.ReadOnly);ld(b,E,q,O,re,V,!1,j)}if(b.renderPass==="translucent"&&q.paint.get("fill-antialias")){let re=b.getDepthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Et.ReadOnly);ld(b,E,q,O,re,V,!0,j)}}(r,l,d,m,v):a.cg(d)?function(b,E,q,O,k){let N=q.paint.get("fill-extrusion-opacity");if(N===0)return;let{isRenderingToTexture:F}=k;if(b.renderPass==="translucent"){let j=new Et(b.context.gl.LEQUAL,Et.ReadWrite,b.depthRangeFor3D);if(N!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))pm(b,E,q,O,j,Wt.disabled,pr.disabled,F),pm(b,E,q,O,j,b.stencilModeFor3D(),b.colorModeForRenderPass(),F);else{let V=b.colorModeForRenderPass();pm(b,E,q,O,j,Wt.disabled,V,F)}}}(r,l,d,m,v):a.ch(d)?function(b,E,q,O,k){if(b.renderPass!=="offscreen"&&b.renderPass!=="translucent")return;let{isRenderingToTexture:N}=k,F=b.context,j=b.style.projection.useSubdivision,V=b.getDepthModeForSublayer(0,Et.ReadOnly),te=b.colorModeForRenderPass();if(b.renderPass==="offscreen")(function(Q,re,ne,ue,ae,fe,ge){let le=Q.context,xe=le.gl;for(let Re of ne){let Ee=re.getTile(Re),Ie=Ee.dem;if(!Ie||!Ie.data||!Ee.needsHillshadePrepare)continue;let Me=Ie.dim,je=Ie.stride,Ze=Ie.getPixels();if(le.activeTexture.set(xe.TEXTURE1),le.pixelStoreUnpackPremultiplyAlpha.set(!1),Ee.demTexture=Ee.demTexture||Q.getTileTexture(je),Ee.demTexture){let at=Ee.demTexture;at.update(Ze,{premultiply:!1}),at.bind(xe.NEAREST,xe.CLAMP_TO_EDGE)}else Ee.demTexture=new a.T(le,Ze,xe.RGBA,{premultiply:!1}),Ee.demTexture.bind(xe.NEAREST,xe.CLAMP_TO_EDGE);le.activeTexture.set(xe.TEXTURE0);let ze=Ee.fbo;if(!ze){let at=new a.T(le,{width:Me,height:Me,data:null},xe.RGBA);at.bind(xe.LINEAR,xe.CLAMP_TO_EDGE),ze=Ee.fbo=le.createFramebuffer(Me,Me,!0,!1),ze.colorAttachment.set(at.texture)}le.bindFramebuffer.set(ze.framebuffer),le.viewport.set([0,0,Me,Me]),Q.useProgram("hillshadePrepare").draw(le,xe.TRIANGLES,ae,fe,ge,vt.disabled,P_(Ee.tileID,Ie),null,null,ue.id,Q.rasterBoundsBuffer,Q.quadTriangleIndexBuffer,Q.rasterBoundsSegments),Ee.needsHillshadePrepare=!1}})(b,E,O,q,V,Wt.disabled,te),F.viewport.set([0,0,b.width,b.height]);else if(b.renderPass==="translucent")if(j){let[Q,re,ne]=b.stencilConfigForOverlapTwoPass(O);Hs(b,E,q,ne,Q,V,te,!1,N),Hs(b,E,q,ne,re,V,te,!0,N)}else{let[Q,re]=b.getStencilConfigForOverlapAndUpdateStencilID(O);Hs(b,E,q,re,Q,V,te,!1,N)}}(r,l,d,m,v):a.ci(d)?function(b,E,q,O,k){if(b.renderPass!=="translucent"||!O.length)return;let{isRenderingToTexture:N}=k,F=b.style.projection.useSubdivision,j=b.getDepthModeForSublayer(0,Et.ReadOnly),V=b.colorModeForRenderPass();if(F){let[te,Q,re]=b.stencilConfigForOverlapTwoPass(O);mm(b,E,q,re,te,j,V,!1,N),mm(b,E,q,re,Q,j,V,!0,N)}else{let[te,Q]=b.getStencilConfigForOverlapAndUpdateStencilID(O);mm(b,E,q,Q,te,j,V,!1,N)}}(r,l,d,m,v):a.cj(d)?function(b,E,q,O,k){if(b.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!O.length)return;let{isRenderingToTexture:N}=k,F=E.getSource(),j=b.style.projection.useSubdivision;if(F instanceof Fa)Ks(b,E,q,O,null,!1,!1,F.tileCoords,F.flippedWindingOrder,N);else if(j){let[V,te,Q]=b.stencilConfigForOverlapTwoPass(O);Ks(b,E,q,Q,V,!1,!0,ud,!1,N),Ks(b,E,q,Q,te,!0,!0,ud,!1,N)}else{let[V,te]=b.getStencilConfigForOverlapAndUpdateStencilID(O);Ks(b,E,q,te,V,!1,!0,ud,!1,N)}}(r,l,d,m,v):a.ck(d)?function(b,E,q,O,k){let N=q.paint.get("background-color"),F=q.paint.get("background-opacity");if(F===0)return;let{isRenderingToTexture:j}=k,V=b.context,te=V.gl,Q=b.style.projection,re=b.transform,ne=re.tileSize,ue=q.paint.get("background-pattern");if(b.isPatternMissing(ue))return;let ae=!ue&&N.a===1&&F===1&&b.opaquePassEnabledForLayer()?"opaque":"translucent";if(b.renderPass!==ae)return;let fe=Wt.disabled,ge=b.getDepthModeForSublayer(0,ae==="opaque"?Et.ReadWrite:Et.ReadOnly),le=b.colorModeForRenderPass(),xe=b.useProgram(ue?"backgroundPattern":"background"),Re=O||Se(re,{tileSize:ne,terrain:b.style.map.terrain});ue&&(V.activeTexture.set(te.TEXTURE0),b.imageManager.bind(b.context));let Ee=q.getCrossfadeParameters();for(let Ie of Re){let Me=re.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!j,applyTerrainMatrix:!0}),je=ue?k_(F,b,ue,{tileID:Ie,tileSize:ne},Ee):O_(F,N),Ze=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ie),ze=Q.getMeshFromTileID(V,Ie.canonical,!1,!0,"raster");xe.draw(V,te.TRIANGLES,ge,fe,le,vt.backCCW,je,Ze,Me,q.id,ze.vertexBuffer,ze.indexBuffer,ze.segments)}}(r,0,d,m,v):a.cl(d)&&function(b,E,q,O){let{isRenderingGlobe:k}=O,N=b.context,F=q.implementation,j=b.style.projection,V=b.transform,te=V.getProjectionDataForCustomLayer(k),Q={farZ:V.farZ,nearZ:V.nearZ,fov:V.fov*Math.PI/180,modelViewProjectionMatrix:V.modelViewProjectionMatrix,projectionMatrix:V.projectionMatrix,shaderData:{variantName:j.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${j.shaderPreludeCode.vertexSource}`,define:j.shaderDefine},defaultProjectionData:te},re=F.renderingMode?F.renderingMode:"2d";if(b.renderPass==="offscreen"){let ne=F.prerender;ne&&(b.setCustomLayerDefaults(),N.setColorMode(b.colorModeForRenderPass()),ne.call(F,N.gl,Q),N.setDirty(),b.setBaseState())}else if(b.renderPass==="translucent"){b.setCustomLayerDefaults(),N.setColorMode(b.colorModeForRenderPass()),N.setStencilMode(Wt.disabled);let ne=re==="3d"?b.getDepthModeFor3D():b.getDepthModeForSublayer(0,Et.ReadOnly);N.setDepthMode(ne),F.render(N.gl,Q),N.setDirty(),b.setBaseState(),N.bindFramebuffer.set(null)}}(r,0,d,v))}saveTileTexture(r){let l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;let l=this.imageManager.getPattern(r.from.toString()),d=this.imageManager.getPattern(r.to.toString());return!l||!d}useProgram(r,l,d=!1,m=[]){this.cache=this.cache||{};let v=!!this.style.map.terrain,b=this.style.projection,E=d?pa.projectionMercator:b.shaderPreludeCode,q=d?mo:b.shaderDefine,O=r+(l?l.cacheKey:"")+`/${d?Fs:b.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"")+(m?`/${m.join("/")}`:"");return this.cache[O]||(this.cache[O]=new Jp(this.context,pa[r],l,nm[r],this._showOverdrawInspector,v,E,q,m)),this.cache[O]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}function Xs(g,r){let l,d=!1,m=null,v=null,b=()=>{m=null,d&&(g.apply(v,l),m=setTimeout(b,r),d=!1)};return(...E)=>(d=!0,v=this,l=E,m||b(),m)}class dd{constructor(r){this._getCurrentHash=()=>{let l=window.location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(m=>m.split("=")).forEach(m=>{m[0]===this._hashName&&(d=m)}),(d&&d[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{let l=this._getCurrentHash();if(!this._isValidHash(l))return!1;let d=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:d,pitch:+(l[4]||0)}),!0},this._updateHashUnthrottled=()=>{let l=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{let l=this._getCurrentHash();if(l.length===0)return;let d=l.join("/"),m=d;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${d}`);let v=window.location.hash.replace(m,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let b=window.location.href.replace(/(#.+)?$/,v);b=b.replace("&&","&"),window.history.replaceState(window.history.state,null,b)},this._updateHash=Xs(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){let l=this._map.getCenter(),d=Math.round(100*this._map.getZoom())/100,m=Math.ceil((d*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,m),b=Math.round(l.lng*v)/v,E=Math.round(l.lat*v)/v,q=this._map.getBearing(),O=this._map.getPitch(),k="";if(k+=r?`/${b}/${E}/${d}`:`${d}/${E}/${b}`,(q||O)&&(k+="/"+Math.round(10*q)/10),O&&(k+=`/${Math.round(O)}`),this._hashName){let N=this._hashName,F=!1,j=window.location.hash.slice(1).split("&").map(V=>{let te=V.split("=")[0];return te===N?(F=!0,`${te}=${k}`):V}).filter(V=>V);return F||j.push(`${N}=${k}`),`#${j.join("&")}`}return`#${k}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new a.S(+r[2],+r[1])}catch(v){return!1}let l=+r[0],d=+(r[3]||0),m=+(r[4]||0);return l>=this._map.getMinZoom()&&l<=this._map.getMaxZoom()&&d>=-180&&d<=180&&m>=this._map.getMinPitch()&&m<=this._map.getMaxPitch()}}let yo={linearity:.3,easing:a.cm(0,0,.3,1)},_m=a.e({deceleration:2500,maxSpeed:1400},yo),X_=a.e({deceleration:20,maxSpeed:1400},yo),Y_=a.e({deceleration:1e3,maxSpeed:360},yo),J_=a.e({deceleration:1e3,maxSpeed:90},yo),Q_=a.e({deceleration:1e3,maxSpeed:360},yo);class e0{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:r})}_drainInertiaBuffer(){let r=this._inertiaBuffer,l=D.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let l={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:v}of this._inertiaBuffer)l.zoom+=v.zoomDelta||0,l.bearing+=v.bearingDelta||0,l.pitch+=v.pitchDelta||0,l.roll+=v.rollDelta||0,v.panDelta&&l.pan._add(v.panDelta),v.around&&(l.around=v.around),v.pinchAround&&(l.pinchAround=v.pinchAround);let d=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(l.pan.mag()){let v=Vl(l.pan.mag(),d,a.e({},_m,r||{})),b=l.pan.mult(v.amount/l.pan.mag()),E=this._map.cameraHelper.handlePanInertia(b,this._map.transform);m.center=E.easingCenter,m.offset=E.easingOffset,va(m,v)}if(l.zoom){let v=Vl(l.zoom,d,X_);m.zoom=this._map.transform.zoom+v.amount,va(m,v)}if(l.bearing){let v=Vl(l.bearing,d,Y_);m.bearing=this._map.transform.bearing+a.ah(v.amount,-179,179),va(m,v)}if(l.pitch){let v=Vl(l.pitch,d,J_);m.pitch=this._map.transform.pitch+v.amount,va(m,v)}if(l.roll){let v=Vl(l.roll,d,Q_);m.roll=this._map.transform.roll+a.ah(v.amount,-179,179),va(m,v)}if(m.zoom||m.bearing){let v=l.pinchAround===void 0?l.around:l.pinchAround;m.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),a.e(m,{noMoveStart:!0})}}function va(g,r){(!g.duration||g.duration<r.duration)&&(g.duration=r.duration,g.easing=r.easing)}function Vl(g,r,l){let{maxSpeed:d,linearity:m,deceleration:v}=l,b=a.ah(g*m/(r/1e3),-d,d),E=Math.abs(b)/(v*m);return{easing:l.easing,duration:1e3*E,amount:b*(E/2)}}class vn extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d,m={}){d=d instanceof MouseEvent?d:new MouseEvent(r,d);let v=L.mousePos(l.getCanvas(),d),b=l.unproject(v);super(r,a.e({point:v,lngLat:b,originalEvent:d},m)),this._defaultPrevented=!1,this.target=l}}class Gl extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){let m=r==="touchend"?d.changedTouches:d.touches,v=L.touchPos(l.getCanvasContainer(),m),b=v.map(q=>l.unproject(q)),E=v.reduce((q,O,k,N)=>q.add(O.div(N.length)),new a.P(0,0));super(r,{points:v,point:E,lngLats:b,lngLat:l.unproject(E),originalEvent:d}),this._defaultPrevented=!1}}class xm extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,d){super(r,{originalEvent:d}),this._defaultPrevented=!1}}class t0{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new xm(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new vn(r.type,this._map,r))}mouseup(r){this._map.fire(new vn(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new vn(r.type,this._map,r))}dblclick(r){return this._firePreventable(new vn(r.type,this._map,r))}mouseover(r){this._map.fire(new vn(r.type,this._map,r))}mouseout(r){this._map.fire(new vn(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Gl(r.type,this._map,r))}touchmove(r){this._map.fire(new Gl(r.type,this._map,r))}touchend(r){this._map.fire(new Gl(r.type,this._map,r))}touchcancel(r){this._map.fire(new Gl(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class r0{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new vn(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vn("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new vn(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Zl{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(a.P.convert(r),this._map.terrain)}}class bm{constructor(r,l){this._map=r,this._tr=new Zl(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(L.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;let d=l;if(this._lastPos.equals(d)||!this._box&&d.dist(this._startPos)<this._clickTolerance)return;let m=this._startPos;this._lastPos=d,this._box||(this._box=L.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));let v=Math.min(m.x,d.x),b=Math.max(m.x,d.x),E=Math.min(m.y,d.y),q=Math.max(m.y,d.y);L.setTransform(this._box,`translate(${v}px,${E}px)`),this._box.style.width=b-v+"px",this._box.style.height=q-E+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;let d=this._startPos,m=l;if(this.reset(),L.suppressClick(),d.x!==m.x||d.y!==m.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(d,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(L.remove(this._box),this._box=null),L.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new a.l(r,{originalEvent:l}))}}function Wl(g,r){if(g.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${g.length}, points ${r.length}`);let l={};for(let d=0;d<g.length;d++)l[g[d].identifier]=r[d];return l}class i0{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,d){(this.centroid||d.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),d.length===this.numTouches&&(this.centroid=function(m){let v=new a.P(0,0);for(let b of m)v._add(b);return v.div(m.length)}(l),this.touches=Wl(d,l)))}touchmove(r,l,d){if(this.aborted||!this.centroid)return;let m=Wl(d,l);for(let v in this.touches){let b=m[v];(!b||b.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,l,d){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),d.length===0){let m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class yn{constructor(r){this.singleTap=new i0(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,d){this.singleTap.touchstart(r,l,d)}touchmove(r,l,d){this.singleTap.touchmove(r,l,d)}touchend(r,l,d){let m=this.singleTap.touchend(r,l,d);if(m){let v=r.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(m)<30;if(v&&b||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class ya{constructor(r){this._tr=new Zl(r),this._zoomIn=new yn({numTouches:1,numTaps:2}),this._zoomOut=new yn({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,d){this._zoomIn.touchstart(r,l,d),this._zoomOut.touchstart(r,l,d)}touchmove(r,l,d){this._zoomIn.touchmove(r,l,d),this._zoomOut.touchmove(r,l,d)}touchend(r,l,d){let m=this._zoomIn.touchend(r,l,d),v=this._zoomOut.touchend(r,l,d),b=this._tr;return m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(m)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:E=>E.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hl{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){let l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.rollDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(l)?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;let d=this._lastPoint;if(!d)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);let m=Array.isArray(l)?l[0]:l;return!this._moved&&m.dist(d)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(d,m))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&L.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let _a=0,Kl=2,hT={[_a]:1,[Kl]:2};class Rc{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){let l=L.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,d){let m=hT[d];return l.buttons===void 0||(l.buttons&m)!==m}(r,this._eventButton)}isValidEndEvent(r){return L.mouseButton(r)===this._eventButton}}class dT{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class fT{constructor(r=new Rc({checkCorrectEvent:()=>!0}),l=new dT){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=l}_executeRelevantHandler(r,l,d){return r instanceof MouseEvent?l(r):typeof TouchEvent!="undefined"&&r instanceof TouchEvent?d(r):void 0}startMove(r){this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.startMove(l),l=>this.oneFingerTouchMoveStateManager.startMove(l))}endMove(r){this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.endMove(l),l=>this.oneFingerTouchMoveStateManager.endMove(l))}isValidStartEvent(r){return this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.isValidStartEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidStartEvent(l))}isValidMoveEvent(r){return this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.isValidMoveEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(l))}isValidEndEvent(r){return this._executeRelevantHandler(r,l=>this.mouseMoveStateManager.isValidEndEvent(l),l=>this.oneFingerTouchMoveStateManager.isValidEndEvent(l))}}let Oc=g=>{g.mousedown=g.dragStart,g.mousemoveWindow=g.dragMove,g.mouseup=g.dragEnd,g.contextmenu=r=>{r.preventDefault()}};class kc{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,l,d){return this._calculateTransform(r,l,d)}touchmove(r,l,d){if(this._active){if(!this._shouldBePrevented(d.length))return r.preventDefault(),this._calculateTransform(r,l,d);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,l,d){this._calculateTransform(r,l,d),this._active&&this._shouldBePrevented(d.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,d){d.length>0&&(this._active=!0);let m=Wl(d,l),v=new a.P(0,0),b=new a.P(0,0),E=0;for(let O in m){let k=m[O],N=this._touches[O];N&&(v._add(k),b._add(k.sub(N)),E++,m[O]=k)}if(this._touches=m,this._shouldBePrevented(E)||!b.mag())return;let q=b.div(E);return this._sum._add(q),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(E),panDelta:q}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class xa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,d){this._firstTwoTouches||d.length<2||(this._firstTwoTouches=[d[0].identifier,d[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,d){if(!this._firstTwoTouches)return;r.preventDefault();let[m,v]=this._firstTwoTouches,b=tt(d,l,m),E=tt(d,l,v);if(!b||!E)return;let q=this._aroundCenter?null:b.add(E).div(2);return this._move([b,E],q,r)}touchend(r,l,d){if(!this._firstTwoTouches)return;let[m,v]=this._firstTwoTouches,b=tt(d,l,m),E=tt(d,l,v);b&&E||(this._active&&L.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function tt(g,r,l){for(let d=0;d<g.length;d++)if(g[d].identifier===l)return r[d]}function wm(g,r){return Math.log(g/r)/Math.LN2}class fd extends xa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){let d=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(wm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:wm(this._distance,d),pinchAround:l}}}function Sm(g,r){return 180*g.angleWith(r)/Math.PI}class Xl extends xa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,d){let m=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Sm(this._vector,m),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let l=25/(Math.PI*this._minDiameter)*360,d=Sm(r,this._startVector);return Math.abs(d)<l}}function Ys(g){return Math.abs(g.y)>Math.abs(g.x)}class pd extends xa{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,d){super.touchstart(r,l,d),this._currentTouchCount=d.length}_start(r){this._lastPoints=r,Ys(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,d){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let m=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,v,d.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(m.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,d){if(this._valid!==void 0)return this._valid;let m=r.mag()>=2,v=l.mag()>=2;if(!m&&!v)return;if(!m||!v)return this._firstMove===void 0&&(this._firstMove=d),d-this._firstMove<100&&void 0;let b=r.y>0==l.y>0;return Ys(r)&&Ys(l)&&b}}let Vt={panStep:100,bearingStep:15,pitchStep:10};class md{constructor(r){this._tr=new Zl(r);let l=Vt;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,d=0,m=0,v=0,b=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?d=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?d=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?m=1:(r.preventDefault(),b=-1);break;case 40:r.shiftKey?m=-1:(r.preventDefault(),b=1);break;default:return}return this._rotationDisabled&&(d=0,m=0),{cameraAnimation:E=>{let q=this._tr;E.easeTo({duration:300,easeId:"keyboardHandler",easing:pT,zoom:l?Math.round(q.zoom)+l*(r.shiftKey?2:1):q.zoom,bearing:q.bearing+d*this._bearingStep,pitch:q.pitch+m*this._pitchStep,offset:[-v*this._panStep,-b*this._panStep],center:q.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function pT(g){return g*(2-g)}let gd=4.000244140625,mT=1/450;class n0{constructor(r,l){this._onTimeout=d=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(d)},this._map=r,this._tr=new Zl(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=mT}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,d=D.now(),m=d-(this._lastWheelEventTime||0);this._lastWheelEventTime=d,l!==0&&l%gd==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(m*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let l=L.mousePos(this._map.getCanvas(),r),d=this._tr;this._aroundPoint=this._aroundCenter?d.transform.locationToScreenPoint(a.S.convert(d.center)):l,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let E=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=E),typeof this._targetZoom=="number"&&(this._targetZoom+=E)}if(this._delta!==0){let E=this._type==="wheel"&&Math.abs(this._delta)>gd?this._wheelZoomRate:this._defaultZoomRate,q=2/(1+Math.exp(-Math.abs(this._delta*E)));this._delta<0&&q!==0&&(q=1/q);let O=typeof this._targetZoom!="number"?r.scale:a.af(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),a.ak(O*q)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let l=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,d=this._startZoom,m=this._easing,v,b=!1;if(this._type==="wheel"&&d&&m){let E=D.now()-this._lastWheelEventTime,q=Math.min((E+5)/200,1),O=m(q);v=a.C.number(d,l,O),q<1?this._frameId||(this._frameId=!0):b=!0}else v=l,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=v,{noInertia:!0,needsRenderFrame:!b,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=a.co;if(this._prevEase){let d=this._prevEase,m=(D.now()-d.start)/d.duration,v=d.easing(m+.01)-d.easing(m),b=.27/Math.sqrt(v*v+1e-4)*.01,E=Math.sqrt(.0729-b*b);l=a.cm(b,E,.25,1)}return this._prevEase={start:D.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Tm{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Em{constructor(r){this._tr=new Zl(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:d=>{d.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class a0{constructor(){this._tap=new yn({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,d){if(!this._swipePoint)if(this._tapTime){let m=l[0],v=r.timeStamp-this._tapTime<500,b=this._tapPoint.dist(m)<30;v&&b?d.length>0&&(this._swipePoint=m,this._swipeTouch=d[0].identifier):this.reset()}else this._tap.touchstart(r,l,d)}touchmove(r,l,d){if(this._tapTime){if(this._swipePoint){if(d[0].identifier!==this._swipeTouch)return;let m=l[0],v=m.y-this._swipePoint.y;return this._swipePoint=m,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,l,d)}touchend(r,l,d){if(this._tapTime)this._swipePoint&&d.length===0&&this.reset();else{let m=this._tap.touchend(r,l,d);m&&(this._tapTime=r.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class o0{constructor(r,l,d){this._el=r,this._mousePan=l,this._touchPan=d}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Im{constructor(r,l,d,m){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=l,this._mousePitch=d,this._mouseRoll=m}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class s0{constructor(r,l,d,m){this._el=r,this._touchZoom=l,this._touchRotate=d,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class l0{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=L.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let d=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=l,this._container.appendChild(m);let v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=d,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(L.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,l){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:r,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let ba=g=>g.zoom||g.drag||g.roll||g.pitch||g.rotate;class ur extends a.l{}function Yl(g){return g.panDelta&&g.panDelta.mag()||g.zoomDelta||g.bearingDelta||g.pitchDelta||g.rollDelta}class qm{constructor(r,l){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,v)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let b=m.type==="renderFrame"?void 0:m,E={needsRenderFrame:!1},q={},O={};for(let{handlerName:F,handler:j,allowed:V}of this._handlers){if(!j.isEnabled())continue;let te;if(this._blockedByActive(O,V,F))j.reset();else if(j[v||m.type]){if(a.cp(m,v||m.type)){let Q=L.mousePos(this._map.getCanvas(),m);te=j[v||m.type](m,Q)}else if(a.cq(m,v||m.type)){let Q=this._getMapTouches(m.touches),re=L.touchPos(this._map.getCanvas(),Q);te=j[v||m.type](m,re,Q)}else a.cr(v||m.type)||(te=j[v||m.type](m));this.mergeHandlerResult(E,q,te,F,b),te&&te.needsRenderFrame&&this._triggerRenderFrame()}(te||j.isActive())&&(O[F]=j)}let k={};for(let F in this._previousActiveHandlers)O[F]||(k[F]=b);this._previousActiveHandlers=O,(Object.keys(k).length||Yl(E))&&(this._changes.push([E,q,k]),this._triggerRenderFrame()),(Object.keys(O).length||Yl(E))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:N}=E;N&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],N(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new e0(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);let d=this._el;this._listeners=[[d,"touchstart",{passive:!0}],[d,"touchmove",{passive:!1}],[d,"touchend",void 0],[d,"touchcancel",void 0],[d,"mousedown",void 0],[d,"mousemove",void 0],[d,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[d,"mouseover",void 0],[d,"mouseout",void 0],[d,"dblclick",void 0],[d,"click",void 0],[d,"keydown",{capture:!1}],[d,"keyup",void 0],[d,"wheel",{passive:!1}],[d,"contextmenu",void 0],[window,"blur",void 0]];for(let[m,v,b]of this._listeners)L.addEventListener(m,v,m===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(let[r,l,d]of this._listeners)L.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,d)}_addDefaultHandlers(r){let l=this._map,d=l.getCanvasContainer();this._add("mapEvent",new t0(l,r));let m=l.boxZoom=new bm(l,r);this._add("boxZoom",m),r.interactive&&r.boxZoom&&m.enable();let v=l.cooperativeGestures=new l0(l,r.cooperativeGestures);this._add("cooperativeGestures",v),r.cooperativeGestures&&v.enable();let b=new ya(l),E=new Em(l);l.doubleClickZoom=new Tm(E,b),this._add("tapZoom",b),this._add("clickZoom",E),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();let q=new a0;this._add("tapDragZoom",q);let O=l.touchPitch=new pd(l);this._add("touchPitch",O),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);let k=()=>l.project(l.getCenter()),N=function({enable:ae,clickTolerance:fe,aroundCenter:ge=!0,minPixelCenterThreshold:le=100,rotateDegreesPerPixelMoved:xe=.8},Re){let Ee=new Rc({checkCorrectEvent:Ie=>L.mouseButton(Ie)===0&&Ie.ctrlKey||L.mouseButton(Ie)===2&&!Ie.ctrlKey});return new Hl({clickTolerance:fe,move:(Ie,Me)=>{let je=Re();if(ge&&Math.abs(je.y-Ie.y)>le)return{bearingDelta:a.cn(new a.P(Ie.x,Me.y),Me,je)};let Ze=(Me.x-Ie.x)*xe;return ge&&Me.y<je.y&&(Ze=-Ze),{bearingDelta:Ze}},moveStateManager:Ee,enable:ae,assignEvents:Oc})}(r,k),F=function({enable:ae,clickTolerance:fe,pitchDegreesPerPixelMoved:ge=-.5}){let le=new Rc({checkCorrectEvent:xe=>L.mouseButton(xe)===0&&xe.ctrlKey||L.mouseButton(xe)===2});return new Hl({clickTolerance:fe,move:(xe,Re)=>({pitchDelta:(Re.y-xe.y)*ge}),moveStateManager:le,enable:ae,assignEvents:Oc})}(r),j=function({enable:ae,clickTolerance:fe,rollDegreesPerPixelMoved:ge=.3},le){let xe=new Rc({checkCorrectEvent:Re=>L.mouseButton(Re)===2&&Re.ctrlKey});return new Hl({clickTolerance:fe,move:(Re,Ee)=>{let Ie=le(),Me=(Ee.x-Re.x)*ge;return Ee.y<Ie.y&&(Me=-Me),{rollDelta:Me}},moveStateManager:xe,enable:ae,assignEvents:Oc})}(r,k);l.dragRotate=new Im(r,N,F,j),this._add("mouseRotate",N,["mousePitch"]),this._add("mousePitch",F,["mouseRotate","mouseRoll"]),this._add("mouseRoll",j,["mousePitch"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();let V=function({enable:ae,clickTolerance:fe}){let ge=new Rc({checkCorrectEvent:le=>L.mouseButton(le)===0&&!le.ctrlKey});return new Hl({clickTolerance:fe,move:(le,xe)=>({around:xe,panDelta:xe.sub(le)}),activateOnStart:!0,moveStateManager:ge,enable:ae,assignEvents:Oc})}(r),te=new kc(r,l);l.dragPan=new o0(d,V,te),this._add("mousePan",V),this._add("touchPan",te,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);let Q=new Xl,re=new fd;l.touchZoomRotate=new s0(d,re,Q,q),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",re,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);let ne=l.scrollZoom=new n0(l,()=>this._triggerRenderFrame());this._add("scrollZoom",ne,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);let ue=l.keyboard=new md(l);this._add("keyboard",ue),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new r0(l))}_add(r,l,d){this._handlers.push({handlerName:r,handler:l,allowed:d}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(let{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!ba(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,d){for(let m in r)if(m!==d&&(!l||l.indexOf(m)<0))return!0;return!1}_getMapTouches(r){let l=[];for(let d of r)this._el.contains(d.target)&&l.push(d);return l}mergeHandlerResult(r,l,d,m,v){if(!d)return;a.e(r,d);let b={handlerName:m,originalEvent:d.originalEvent||v};d.zoomDelta!==void 0&&(l.zoom=b),d.panDelta!==void 0&&(l.drag=b),d.rollDelta!==void 0&&(l.roll=b),d.pitchDelta!==void 0&&(l.pitch=b),d.bearingDelta!==void 0&&(l.rotate=b)}_applyChanges(){let r={},l={},d={};for(let[m,v,b]of this._changes)m.panDelta&&(r.panDelta=(r.panDelta||new a.P(0,0))._add(m.panDelta)),m.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+m.pitchDelta),m.rollDelta&&(r.rollDelta=(r.rollDelta||0)+m.rollDelta),m.around!==void 0&&(r.around=m.around),m.pinchAround!==void 0&&(r.pinchAround=m.pinchAround),m.noInertia&&(r.noInertia=m.noInertia),a.e(l,v),a.e(d,b);this._updateMapTransform(r,l,d),this._changes=[]}_updateMapTransform(r,l,d){let m=this._map,v=m._getTransformForUpdate(),b=m.terrain;if(!(Yl(r)||b&&this._terrainMovement))return this._fireEvents(l,d,!0);m._stop(!0);let{panDelta:E,zoomDelta:q,bearingDelta:O,pitchDelta:k,rollDelta:N,around:F,pinchAround:j}=r;j!==void 0&&(F=j),F=F||m.transform.centerPoint,b&&!v.isPointOnMapSurface(F)&&(F=v.centerPoint);let V={panDelta:E,zoomDelta:q,rollDelta:N,pitchDelta:k,bearingDelta:O,around:F};this._map.cameraHelper.useGlobeControls&&!v.isPointOnMapSurface(F)&&(F=v.centerPoint);let te=F.distSqr(v.centerPoint)<.01?v.center:v.screenPointToLocation(E?F.sub(E):F);b?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(V,v),this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?v.setCenter(v.screenPointToLocation(v.centerPoint.sub(E))):this._map.cameraHelper.handleMapControlsPan(V,v,te):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(V,v,te))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(V,v),this._map.cameraHelper.handleMapControlsPan(V,v,te)),m._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,d,!0)}_fireEvents(r,l,d){let m=ba(this._eventsInProgress),v=ba(r),b={};for(let N in r){let{originalEvent:F}=r[N];this._eventsInProgress[N]||(b[`${N}start`]=F),this._eventsInProgress[N]=r[N]}!m&&v&&this._fireEvent("movestart",v.originalEvent);for(let N in b)this._fireEvent(N,b[N]);v&&this._fireEvent("move",v.originalEvent);for(let N in r){let{originalEvent:F}=r[N];this._fireEvent(N,F)}let E={},q;for(let N in this._eventsInProgress){let{handlerName:F,originalEvent:j}=this._eventsInProgress[N];this._handlersById[F].isActive()||(delete this._eventsInProgress[N],q=l[F]||j,E[`${N}end`]=q)}for(let N in E)this._fireEvent(N,E[N]);let O=ba(this._eventsInProgress),k=(m||v)&&!O;if(k&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let N=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&N.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(N)}if(d&&k){this._updatingCamera=!0;let N=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),F=j=>j!==0&&-this._bearingSnap<j&&j<this._bearingSnap;!N||!N.essential&&D.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:q})),F(this._map.getBearing())&&this._map.resetNorth()):(F(N.bearing||this._map.getBearing())&&(N.bearing=0),N.freezeElevation=!0,this._map.easeTo(N,{originalEvent:q})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new a.l(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new ur("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class u0 extends a.E{constructor(r,l,d){super(),this._renderFrameCallback=()=>{let m=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(m)),m<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=d.bearingSnap,this.cameraHelper=l,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,l){r.apply(this.transform),this.transform=r,this.cameraHelper=l}getCenter(){return new a.S(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,l){return this.jumpTo({elevation:r},l),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,l,d){return r=a.P.convert(r).mult(-1),this.panTo(this.transform.center,a.e({offset:r},l),d)}panTo(r,l,d){return this.easeTo(a.e({center:r},l),d)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,d){return this.easeTo(a.e({zoom:r},l),d)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,l){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new a.l("movestart",l)).fire(new a.l("move",l)).fire(new a.l("moveend",l))),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,d){return this.easeTo(a.e({bearing:r},l),d)}resetNorth(r,l){return this.rotateTo(0,a.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}getRoll(){return this.transform.roll}setRoll(r,l){return this.jumpTo({roll:r},l),this}cameraForBounds(r,l){r=Rr.convert(r).adjustAntiMeridian();let d=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),d,l)}_cameraForBoxAndBearing(r,l,d,m){let v={top:0,bottom:0,right:0,left:0};if(typeof(m=a.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){let O=m.padding;m.padding={top:O,bottom:O,right:O,left:O}}let b=a.e(v,m.padding);m.padding=b;let E=this.transform,q=new Rr(r,l);return this.cameraHelper.cameraForBoxAndBearing(m,b,q,d,E)}fitBounds(r,l,d){return this._fitInternal(this.cameraForBounds(r,l),l,d)}fitScreenCoordinates(r,l,d,m,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(r)),this.transform.screenPointToLocation(a.P.convert(l)),d,m),m,v)}_fitInternal(r,l,d){return r?(delete(l=a.e(r,l)).padding,l.linear?this.easeTo(l,d):this.flyTo(l,d)):this}jumpTo(r,l){this.stop();let d=this._getTransformForUpdate(),m=!1,v=!1,b=!1,E=d.zoom;this.cameraHelper.handleJumpToCenterZoom(d,r);let q=d.zoom!==E;return"elevation"in r&&d.elevation!==+r.elevation&&d.setElevation(+r.elevation),"bearing"in r&&d.bearing!==+r.bearing&&(m=!0,d.setBearing(+r.bearing)),"pitch"in r&&d.pitch!==+r.pitch&&(v=!0,d.setPitch(+r.pitch)),"roll"in r&&d.roll!==+r.roll&&(b=!0,d.setRoll(+r.roll)),r.padding==null||d.isPaddingEqual(r.padding)||d.setPadding(r.padding),this._applyUpdatedTransform(d),this.fire(new a.l("movestart",l)).fire(new a.l("move",l)),q&&this.fire(new a.l("zoomstart",l)).fire(new a.l("zoom",l)).fire(new a.l("zoomend",l)),m&&this.fire(new a.l("rotatestart",l)).fire(new a.l("rotate",l)).fire(new a.l("rotateend",l)),v&&this.fire(new a.l("pitchstart",l)).fire(new a.l("pitch",l)).fire(new a.l("pitchend",l)),b&&this.fire(new a.l("rollstart",l)).fire(new a.l("roll",l)).fire(new a.l("rollend",l)),this.fire(new a.l("moveend",l))}calculateCameraOptionsFromTo(r,l,d,m=0){let v=a.a1.fromLngLat(r,l),b=a.a1.fromLngLat(d,m),E=b.x-v.x,q=b.y-v.y,O=b.z-v.z,k=Math.hypot(E,q,O);if(k===0)throw new Error("Can't calculate camera options with same From and To");let N=Math.hypot(E,q),F=a.ak(this.transform.cameraToCenterDistance/k/this.transform.tileSize),j=180*Math.atan2(E,-q)/Math.PI,V=180*Math.acos(N/k)/Math.PI;return V=O<0?90-V:90+V,{center:b.toLngLat(),elevation:m,zoom:F,pitch:V,bearing:j}}calculateCameraOptionsFromCameraLngLatAltRotation(r,l,d,m,v){let b=this.transform.calculateCenterFromCameraLngLatAlt(r,l,d,m);return{center:b.center,elevation:b.elevation,zoom:b.zoom,bearing:d,pitch:m,roll:v}}easeTo(r,l){this._stop(!1,r.easeId),((r=a.e({offset:[0,0],duration:500,easing:a.co},r)).animate===!1||!r.essential&&D.prefersReducedMotion)&&(r.duration=0);let d=this._getTransformForUpdate(),m=this.getBearing(),v=d.pitch,b=d.roll,E="bearing"in r?this._normalizeBearing(r.bearing,m):m,q="pitch"in r?+r.pitch:v,O="roll"in r?this._normalizeBearing(r.roll,b):b,k="padding"in r?r.padding:d.padding,N=a.P.convert(r.offset),F,j;r.around&&(F=a.S.convert(r.around),j=d.locationToScreenPoint(F));let V={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},te=this.cameraHelper.handleEaseTo(d,{bearing:E,pitch:q,roll:O,padding:k,around:F,aroundPoint:j,offsetAsPoint:N,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||m!==E,this._pitching=this._pitching||q!==v,this._rolling=this._rolling||O!==b,this._padding=!d.isPaddingEqual(k),this._zooming=this._zooming||te.isZooming,this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,V),this.terrain&&this._prepareElevation(te.elevationCenter),this._ease(Q=>{te.easeFunc(Q),this.terrain&&!r.freezeElevation&&this._updateElevation(Q),this._applyUpdatedTransform(d),this._fireMoveEvents(l)},Q=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l,Q)},r),this}_prepareEase(r,l,d={}){this._moving=!0,l||d.moving||this.fire(new a.l("movestart",r)),this._zooming&&!d.zooming&&this.fire(new a.l("zoomstart",r)),this._rotating&&!d.rotating&&this.fire(new a.l("rotatestart",r)),this._pitching&&!d.pitching&&this.fire(new a.l("pitchstart",r)),this._rolling&&!d.rolling&&this.fire(new a.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){let d=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(d-(l-(d*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.setElevation(a.C.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};let l=r.getCameraLngLat(),d=r.getCameraAltitude(),m=this.terrain?this.terrain.getElevationForLngLatZoom(l,r.zoom):0;if(d<m){let v=this.calculateCameraOptionsFromTo(l,m,r.center,r.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(r){let l=[];if(l.push(m=>this._elevateCameraIfInsideTerrain(m)),this.transformCameraUpdate&&l.push(m=>this.transformCameraUpdate(m)),!l.length)return;let d=r.clone();for(let m of l){let v=d.clone(),{center:b,zoom:E,roll:q,pitch:O,bearing:k,elevation:N}=m(v);b&&v.setCenter(b),N!==void 0&&v.setElevation(N),E!==void 0&&v.setZoom(E),q!==void 0&&v.setRoll(q),O!==void 0&&v.setPitch(O),k!==void 0&&v.setBearing(k),d.apply(v)}this.transform.apply(d)}_fireMoveEvents(r){this.fire(new a.l("move",r)),this._zooming&&this.fire(new a.l("zoom",r)),this._rotating&&this.fire(new a.l("rotate",r)),this._pitching&&this.fire(new a.l("pitch",r)),this._rolling&&this.fire(new a.l("roll",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;let d=this._zooming,m=this._rotating,v=this._pitching,b=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,d&&this.fire(new a.l("zoomend",r)),m&&this.fire(new a.l("rotateend",r)),v&&this.fire(new a.l("pitchend",r)),b&&this.fire(new a.l("rollend",r)),this.fire(new a.l("moveend",r))}flyTo(r,l){if(!r.essential&&D.prefersReducedMotion){let Me=a.Q(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Me,l)}this.stop(),r=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.co},r);let d=this._getTransformForUpdate(),m=d.bearing,v=d.pitch,b=d.roll,E=d.padding,q="bearing"in r?this._normalizeBearing(r.bearing,m):m,O="pitch"in r?+r.pitch:v,k="roll"in r?this._normalizeBearing(r.roll,b):b,N="padding"in r?r.padding:d.padding,F=a.P.convert(r.offset),j=d.centerPoint.add(F),V=d.screenPointToLocation(j),te=this.cameraHelper.handleFlyTo(d,{bearing:q,pitch:O,roll:k,padding:N,locationAtOffset:V,offsetAsPoint:F,center:r.center,minZoom:r.minZoom,zoom:r.zoom}),Q=r.curve,re=Math.max(d.width,d.height),ne=re/te.scaleOfZoom,ue=te.pixelPathLength;typeof te.scaleOfMinZoom=="number"&&(Q=Math.sqrt(re/te.scaleOfMinZoom/ue*2));let ae=Q*Q;function fe(Me){let je=(ne*ne-re*re+(Me?-1:1)*ae*ae*ue*ue)/(2*(Me?ne:re)*ae*ue);return Math.log(Math.sqrt(je*je+1)-je)}function ge(Me){return(Math.exp(Me)-Math.exp(-Me))/2}function le(Me){return(Math.exp(Me)+Math.exp(-Me))/2}let xe=fe(!1),Re=function(Me){return le(xe)/le(xe+Q*Me)},Ee=function(Me){return re*((le(xe)*(ge(je=xe+Q*Me)/le(je))-ge(xe))/ae)/ue;var je},Ie=(fe(!0)-xe)/Q;if(Math.abs(ue)<2e-6||!isFinite(Ie)){if(Math.abs(re-ne)<1e-6)return this.easeTo(r,l);let Me=ne<re?-1:1;Ie=Math.abs(Math.log(ne/re))/Q,Ee=()=>0,Re=je=>Math.exp(Me*Q*je)}return r.duration="duration"in r?+r.duration:1e3*Ie/("screenSpeed"in r?+r.screenSpeed/Q:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=m!==q,this._pitching=O!==v,this._rolling=k!==b,this._padding=!d.isPaddingEqual(N),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(te.targetCenter),this._ease(Me=>{let je=Me*Ie,Ze=1/Re(je),ze=Ee(je);this._rotating&&d.setBearing(a.C.number(m,q,Me)),this._pitching&&d.setPitch(a.C.number(v,O,Me)),this._rolling&&d.setRoll(a.C.number(b,k,Me)),this._padding&&(d.interpolatePadding(E,N,Me),j=d.centerPoint.add(F)),te.easeFunc(Me,Ze,ze,j),this.terrain&&!r.freezeElevation&&this._updateElevation(Me),this._applyUpdatedTransform(d),this._fireMoveEvents(l)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){var d;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,l)}return r||(d=this.handlers)===null||d===void 0||d.stop(!1),this}_ease(r,l,d){d.animate===!1||d.duration===0?(r(1),l()):(this._easeStart=D.now(),this._easeOptions=d,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=a.aO(r,-180,180);let d=Math.abs(r-l);return Math.abs(r-360-l)<d&&(r-=360),Math.abs(r+360-l)<d&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(a.S.convert(r),this.transform.tileZoom):null}}let Pm={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class Am{constructor(r=Pm){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=L.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=L.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=L.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){let d=this._map._getUIString(`AttributionControl.${l}`);r.title=d,r.setAttribute("aria-label",d)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(m=>typeof m!="string"?"":m)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){let m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}let l=this._map.style.sourceCaches;for(let m in l){let v=l[m];if(v.used||v.usedForTerrain){let b=v.getSource();b.attribution&&r.indexOf(b.attribution)<0&&r.push(b.attribution)}}r=r.filter(m=>String(m).trim()),r.sort((m,v)=>m.length-v.length),r=r.filter((m,v)=>{for(let b=v+1;b<r.length;b++)if(r[b].indexOf(m)>=0)return!1;return!0});let d=r.join(" | ");d!==this._attribHTML&&(this._attribHTML=d,r.length?(this._innerContainer.innerHTML=L.sanitize(d),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class c0{constructor(r={}){this._updateCompact=()=>{let l=this._container.children;if(l.length){let d=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&d.classList.add("maplibregl-compact"):d.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=L.create("div","maplibregl-ctrl");let l=L.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){L.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class Va{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){let l=this._currentlyRunning,d=l?this._queue.concat(l):this._queue;for(let m of d)if(m.id===r)return void(m.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let l=this._currentlyRunning=this._queue;this._queue=[];for(let d of l)if(!d.cancelled&&(d.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var vd=a.aJ([{name:"a_pos3d",type:"Int16",components:3}]);class lt extends a.E{constructor(r){super(),this._lastTilesetChange=D.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*Jm(2,this.deltaZoom),r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];let d={};for(let m of Se(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))d[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.terrainRttPosMatrix32f=new Float64Array(16),a.bY(m.terrainRttPosMatrix32f,0,a.$,a.$,0,0,1),this._tiles[m.key]=new Rl(m,this.tileSize),this._lastTilesetChange=D.now());for(let m in this._tiles)d[m]||delete this._tiles[m]}freeRtt(r){for(let l in this._tiles){let d=this._tiles[l];(!r||d.tileID.equals(r)||d.tileID.isChildOf(r)||r.isChildOf(d.tileID))&&(d.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,l){return l?this._getTerrainCoordsForTileRanges(r,l):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){let l={};for(let d of this._renderableTilesKeys){let m=this._tiles[d].tileID,v=r.clone(),b=a.ba();if(m.canonical.equals(r.canonical))a.bY(b,0,a.$,a.$,0,0,1);else if(m.canonical.isChildOf(r.canonical)){let E=m.canonical.z-r.canonical.z,q=m.canonical.x-(m.canonical.x>>E<<E),O=m.canonical.y-(m.canonical.y>>E<<E),k=a.$>>E;a.bY(b,0,k,k,0,0,1),a.M(b,b,[-q*k,-O*k,0])}else{if(!r.canonical.isChildOf(m.canonical))continue;{let E=r.canonical.z-m.canonical.z,q=r.canonical.x-(r.canonical.x>>E<<E),O=r.canonical.y-(r.canonical.y>>E<<E),k=a.$>>E;a.bY(b,0,a.$,a.$,0,0,1),a.M(b,b,[q*k,O*k,0]),a.N(b,b,[1/Jm(2,E),1/Jm(2,E),0])}}v.terrainRttPosMatrix32f=new Float32Array(b),l[d]=v}return l}_getTerrainCoordsForTileRanges(r,l){let d={};for(let m of this._renderableTilesKeys){let v=this._tiles[m].tileID;if(!this._isWithinTileRanges(v,l))continue;let b=r.clone(),E=a.ba();if(v.canonical.z===r.canonical.z){let q=r.canonical.x-v.canonical.x,O=r.canonical.y-v.canonical.y;a.bY(E,0,a.$,a.$,0,0,1),a.M(E,E,[q*a.$,O*a.$,0])}else if(v.canonical.z>r.canonical.z){let q=v.canonical.z-r.canonical.z,O=v.canonical.x-(v.canonical.x>>q<<q),k=v.canonical.y-(v.canonical.y>>q<<q),N=r.canonical.x-(v.canonical.x>>q),F=r.canonical.y-(v.canonical.y>>q),j=a.$>>q;a.bY(E,0,j,j,0,0,1),a.M(E,E,[-O*j+N*a.$,-k*j+F*a.$,0])}else{let q=r.canonical.z-v.canonical.z,O=r.canonical.x-(r.canonical.x>>q<<q),k=r.canonical.y-(r.canonical.y>>q<<q),N=(r.canonical.x>>q)-v.canonical.x,F=(r.canonical.y>>q)-v.canonical.y,j=a.$<<q;a.bY(E,0,j,j,0,0,1),a.M(E,E,[O*a.$+N*j,k*a.$+F*j,0])}b.terrainRttPosMatrix32f=new Float32Array(E),d[m]=b}return d}getSourceTile(r,l){let d=this.sourceCache._source,m=r.overscaledZ-this.deltaZoom;if(m>d.maxzoom&&(m=d.maxzoom),m<d.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(m).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&l)for(;m>=d.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(m--).key);return v}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,l){return l[r.canonical.z]&&r.canonical.x>=l[r.canonical.z].minTileX&&r.canonical.x<=l[r.canonical.z].maxTileX&&r.canonical.y>=l[r.canonical.z].minTileY&&r.canonical.y<=l[r.canonical.z].maxTileY}}class mt{constructor(r,l,d){this._meshCache={},this.painter=r,this.sourceCache=new lt(l),this.options=d,this.exaggeration=typeof d.exaggeration=="number"?d.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,d,m=a.$){var v;if(!(l>=0&&l<m&&d>=0&&d<m))return 0;let b=this.getTerrainData(r),E=(v=b.tile)===null||v===void 0?void 0:v.dem;if(!E)return 0;let q=a.cs([],[l/m*a.$,d/m*a.$],b.u_terrain_matrix),O=[q[0]*E.dim,q[1]*E.dim],k=Math.floor(O[0]),N=Math.floor(O[1]),F=O[0]-k,j=O[1]-N;return E.get(k,N)*(1-F)*(1-j)+E.get(k+1,N)*F*(1-j)+E.get(k,N+1)*(1-F)*j+E.get(k+1,N+1)*F*j}getElevationForLngLatZoom(r,l){if(!a.ct(l,r.wrap()))return 0;let{tileID:d,mercatorX:m,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(d,m%a.$,v%a.$,a.$)}getElevation(r,l,d,m=a.$){return this.getDEMElevation(r,l,d,m)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){let m=this.painter.context,v=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new a.T(m,v,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new a.T(m,new a.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ag([])}let l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){let m=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new a.T(m,l.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),l.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}let d=l&&l+l.tileID.key+r.key;if(d&&!this._demMatrixCache[d]){let m=this.sourceCache.sourceCache._source.maxzoom,v=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=m?v=r.canonical.z-m:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let b=r.canonical.x-(r.canonical.x>>v<<v),E=r.canonical.y-(r.canonical.y>>v<<v),q=a.cu(new Float64Array(16),[1/(a.$<<v),1/(a.$<<v),0]);a.M(q,q,[b*a.$,E*a.$,0]),this._demMatrixCache[r.key]={matrix:q,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:d?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){let l=this.painter,d=l.width/devicePixelRatio,m=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===d&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new a.T(l.context,{width:d,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new a.T(l.context,{width:d,height:m,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(d,m,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,d,m))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,b=0;v<this._coordsTextureSize;v++)for(let E=0;E<this._coordsTextureSize;E++,b+=4)l[b+0]=255&E,l[b+1]=255&v,l[b+2]=E>>8<<4|v>>8,l[b+3]=0;let d=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),m=new a.T(r,d,r.gl.RGBA,{premultiply:!1});return m.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);let l=new Uint8Array(4),d=this.painter.context,m=d.gl,v=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),E=Math.round(this.painter.height/devicePixelRatio);d.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(v,E-b-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null);let q=l[0]+(l[2]>>4<<8),O=l[1]+((15&l[2])<<8),k=this.coordsIndex[255-l[3]],N=k&&this.sourceCache.getTileByID(k);if(!N)return null;let F=this._coordsTextureSize,j=(1<<N.tileID.canonical.z)*F;return new a.a1((N.tileID.canonical.x*F+q)/j+N.tileID.wrap,(N.tileID.canonical.y*F+O)/j,this.getElevation(N.tileID,q,O,F))}depthAtPoint(r){let l=new Uint8Array(4),d=this.painter.context,m=d.gl;return d.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,l),d.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(r){var l;let d=((l=this.painter.style.projection)===null||l===void 0?void 0:l.transitionState)>0,m=d&&r.canonical.y===0,v=d&&r.canonical.y===(1<<r.canonical.z)-1,b=`m_${m?"n":""}_${v?"s":""}`;if(this._meshCache[b])return this._meshCache[b];let E=this.painter.context,q=new a.cv,O=new a.aN,k=this.meshSize,N=a.$/k,F=k*k;for(let le=0;le<=k;le++)for(let xe=0;xe<=k;xe++)q.emplaceBack(xe*N,le*N,0);for(let le=0;le<F;le+=k+1)for(let xe=0;xe<k;xe++)O.emplaceBack(xe+le,k+xe+le+1,k+xe+le+2),O.emplaceBack(xe+le,k+xe+le+2,xe+le+1);let j=q.length,V=j+(k+1),te=(k+1)*k,Q=m?a.bh:0,re=m?0:1,ne=v?a.bi:a.$,ue=v?0:1;for(let le=0;le<=k;le++)q.emplaceBack(le*N,Q,re);for(let le=0;le<=k;le++)q.emplaceBack(le*N,ne,ue);for(let le=0;le<k;le++)O.emplaceBack(te+le,V+le,V+le+1),O.emplaceBack(te+le,V+le+1,te+le+1),O.emplaceBack(0+le,j+le+1,j+le),O.emplaceBack(0+le,0+le+1,j+le+1);let ae=q.length,fe=ae+2*(k+1);for(let le of[0,1])for(let xe=0;xe<=k;xe++)for(let Re of[0,1])q.emplaceBack(le*a.$,xe*N,Re);for(let le=0;le<2*k;le+=2)O.emplaceBack(ae+le,ae+le+1,ae+le+3),O.emplaceBack(ae+le,ae+le+3,ae+le+2),O.emplaceBack(fe+le,fe+le+3,fe+le+1),O.emplaceBack(fe+le,fe+le+2,fe+le+3);let ge=new zs(E.createVertexBuffer(q,vd.members),E.createIndexBuffer(O),a.aM.simpleSegment(0,0,q.length,O.length));return this._meshCache[b]=ge,ge}getMeshFrameDelta(r){return 2*Math.PI*a.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,l){var d;let{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(d=this.getMinMaxElevation(m).minElevation)!==null&&d!==void 0?d:0}getMinMaxElevation(r){let l=this.getTerrainData(r).tile,d={minElevation:null,maxElevation:null};return l&&l.dem&&(d.minElevation=l.dem.min*this.exaggeration,d.maxElevation=l.dem.max*this.exaggeration),d}_getOverscaledTileIDFromLngLatZoom(r,l){let d=a.a1.fromLngLat(r.wrap()),m=(1<<l)*a.$,v=d.x*m,b=d.y*m,E=Math.floor(v/a.$),q=Math.floor(b/a.$);return{tileID:new a.Z(l,0,l,E,q),mercatorX:v,mercatorY:b}}}class yd{constructor(r,l,d){this._context=r,this._size=l,this._tileSize=d,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){let l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),d=new a.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return d.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(d.texture),{id:r,fbo:l,texture:d,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(let l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(let r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}let is={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class _d{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new yd(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(d=>!r._layers[d].isHidden(l)),this._coordsAscending={};for(let d in r.sourceCaches){this._coordsAscending[d]={};let m=r.sourceCaches[d].getVisibleCoordinates(),v=r.sourceCaches[d].getSource(),b=v instanceof Fa?v.terrainTileRanges:null;for(let E of m){let q=this.terrain.sourceCache.getTerrainCoords(E,b);for(let O in q)this._coordsAscending[d][O]||(this._coordsAscending[d][O]=[]),this._coordsAscending[d][O].push(q[O])}}this._coordsAscendingStr={};for(let d of r._order){let m=r._layers[d],v=m.source;if(is[m.type]&&!this._coordsAscendingStr[v]){this._coordsAscendingStr[v]={};for(let b in this._coordsAscending[v])this._coordsAscendingStr[v][b]=this._coordsAscending[v][b].map(E=>E.key).sort().join()}}for(let d of this._renderableTiles)for(let m in this._coordsAscendingStr){let v=this._coordsAscendingStr[m][d.tileID.key];v&&v!==d.rttCoords[m]&&(d.rtt=[])}}renderLayer(r,l){if(r.isHidden(this.painter.transform.zoom))return!1;let d=Object.assign(Object.assign({},l),{isRenderingToTexture:!0}),m=r.type,v=this.painter,b=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(is[m]&&(this._prevType&&is[this._prevType]||this._stacks.push([]),this._prevType=m,this._stacks[this._stacks.length-1].push(r.id),!b))return!0;if(is[this._prevType]||is[m]&&b){this._prevType=m;let E=this._stacks.length-1,q=this._stacks[E]||[];for(let O of this._renderableTiles){if(this.pool.isFull()&&(hd(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(O),O.rtt[E]){let N=this.pool.getObjectForId(O.rtt[E].id);if(N.stamp===O.rtt[E].stamp){this.pool.useObject(N);continue}}let k=this.pool.getOrCreateFreeObject();this.pool.useObject(k),this.pool.stampObject(k),O.rtt[E]={id:k.id,stamp:k.stamp},v.context.bindFramebuffer.set(k.fbo.framebuffer),v.context.clear({color:a.bf.transparent,stencil:0}),v.currentStencilSource=void 0;for(let N=0;N<q.length;N++){let F=v.style._layers[q[N]],j=F.source?this._coordsAscending[F.source][O.tileID.key]:[O.tileID];v.context.viewport.set([0,0,k.fbo.width,k.fbo.height]),v._renderTileClippingMasks(F,j,!0),v.renderLayer(v,v.style.sourceCaches[F.source],F,j,d),F.source&&(O.rttCoords[F.source]=this._coordsAscendingStr[F.source][O.tileID.key])}}return hd(this.painter,this.terrain,this._rttTiles,d),this._rttTiles=[],this.pool.freeAllObjects(),is[m]}return!1}}let en={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},h0=x,Wn={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Pm,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},gT={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Dc{constructor(r,l,d=!1){this.mousedown=v=>{this.startMove(v,L.mousePos(this.element,v)),L.addEventListener(window,"mousemove",this.mousemove),L.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=v=>{this.move(v,L.mousePos(this.element,v))},this.mouseup=v=>{this._rotatePitchHandler.dragEnd(v),this.offTemp()},this.touchstart=v=>{v.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=L.touchPos(this.element,v.targetTouches)[0],this.startMove(v,this._startPos),L.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.addEventListener(window,"touchend",this.touchend))},this.touchmove=v=>{v.targetTouches.length!==1?this.reset():(this._lastPos=L.touchPos(this.element,v.targetTouches)[0],this.move(v,this._lastPos))},this.touchend=v=>{v.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=l;let m=new fT;this._rotatePitchHandler=new Hl({clickTolerance:3,move:(v,b)=>{let E=l.getBoundingClientRect(),q=new a.P((E.bottom-E.top)/2,(E.right-E.left)/2);return{bearingDelta:a.cn(new a.P(v.x,b.y),b,q),pitchDelta:d?-.5*(b.y-v.y):void 0}},moveStateManager:m,enable:!0,assignEvents:()=>{}}),this.map=r,L.addEventListener(l,"mousedown",this.mousedown),L.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),L.addEventListener(l,"touchcancel",this.reset)}startMove(r,l){this._rotatePitchHandler.dragStart(r,l),L.disableDrag()}move(r,l){let d=this.map,{bearingDelta:m,pitchDelta:v}=this._rotatePitchHandler.dragMove(r,l)||{};m&&d.setBearing(d.getBearing()+m),v&&d.setPitch(d.getPitch()+v)}off(){let r=this.element;L.removeEventListener(r,"mousedown",this.mousedown),L.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend),L.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){L.enableDrag(),L.removeEventListener(window,"mousemove",this.mousemove),L.removeEventListener(window,"mouseup",this.mouseup),L.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),L.removeEventListener(window,"touchend",this.touchend)}}let ir;function Dr(g,r,l,d=!1){if(d||!l.getCoveringTilesDetailsProvider().allowWorldCopies())return g==null?void 0:g.wrap();let m=new a.S(g.lng,g.lat);if(g=new a.S(g.lng,g.lat),r){let v=new a.S(g.lng-360,g.lat),b=new a.S(g.lng+360,g.lat),E=l.locationToScreenPoint(g).distSqr(r);l.locationToScreenPoint(v).distSqr(r)<E?g=v:l.locationToScreenPoint(b).distSqr(r)<E&&(g=b)}for(;Math.abs(g.lng-l.center.lng)>180;){let v=l.locationToScreenPoint(g);if(v.x>=0&&v.y>=0&&v.x<=l.width&&v.y<=l.height)break;g.lng>l.center.lng?g.lng-=360:g.lng+=360}return g.lng!==m.lng&&l.isPointOnMapSurface(l.locationToScreenPoint(g))?g:m}let xd={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Jl(g,r,l){let d=g.classList;for(let m in xd)d.remove(`maplibregl-${l}-anchor-${m}`);d.add(`maplibregl-${l}-anchor-${r}`)}class Ql extends a.E{constructor(r){if(super(),this._onKeyPress=l=>{let d=l.code,m=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=l=>{let d=l.originalEvent.target,m=this._element;this._popup&&(d===m||m.contains(d))&&this.togglePopup()},this._update=l=>{if(!this._map)return;let d=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=Dr(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),L.setTransform(this._element,`${xd[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${m}`),D.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){let d=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=a.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=L.create("div");let l=L.createNS("http://www.w3.org/2000/svg","svg"),d=41,m=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${d}px`),l.setAttributeNS(null,"width",`${m}px`),l.setAttributeNS(null,"viewBox",`0 0 ${m} ${d}`);let v=L.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");let b=L.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");let E=L.createNS("http://www.w3.org/2000/svg","g");E.setAttributeNS(null,"transform","translate(3.0, 29.0)"),E.setAttributeNS(null,"fill","#000000");let q=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let re of q){let ne=L.createNS("http://www.w3.org/2000/svg","ellipse");ne.setAttributeNS(null,"opacity","0.04"),ne.setAttributeNS(null,"cx","10.5"),ne.setAttributeNS(null,"cy","5.80029008"),ne.setAttributeNS(null,"rx",re.rx),ne.setAttributeNS(null,"ry",re.ry),E.appendChild(ne)}let O=L.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);let k=L.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(k);let N=L.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"opacity","0.25"),N.setAttributeNS(null,"fill","#000000");let F=L.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),N.appendChild(F);let j=L.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"transform","translate(6.0, 7.0)"),j.setAttributeNS(null,"fill","#FFFFFF");let V=L.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(8.0, 8.0)");let te=L.createNS("http://www.w3.org/2000/svg","circle");te.setAttributeNS(null,"fill","#000000"),te.setAttributeNS(null,"opacity","0.25"),te.setAttributeNS(null,"cx","5.5"),te.setAttributeNS(null,"cy","5.5"),te.setAttributeNS(null,"r","5.4999962");let Q=L.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#FFFFFF"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962"),V.appendChild(te),V.appendChild(Q),b.appendChild(E),b.appendChild(O),b.appendChild(N),b.appendChild(j),b.appendChild(V),l.appendChild(b),l.setAttributeNS(null,"height",d*this._scale+"px"),l.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(l),this._offset=a.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Jl(this._element,this._anchor,"marker"),r&&r.className)for(let l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),L.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.S.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let m=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){let r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,d;let m=(l=this._map)===null||l===void 0?void 0:l.terrain,v=this._map.transform.isLocationOccluded(this._lngLat);if(!m||v){let j=v?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==j&&(this._element.style.opacity=j))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let b=this._map,E=b.terrain.depthAtPoint(this._pos),q=b.terrain.getElevationForLngLatZoom(this._lngLat,b.transform.tileZoom);if(b.transform.lngLatToCameraDepth(this._lngLat,q)-E<.006)return void(this._element.style.opacity=this._opacity);let O=-this._offset.y/b.transform.pixelsPerMeter,k=Math.sin(b.getPitch()*Math.PI/180)*O,N=b.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),F=b.transform.lngLatToCameraDepth(this._lngLat,q+k)-N>.006;!((d=this._popup)===null||d===void 0)&&d.isOpen()&&F&&this._popup.remove(),this._element.style.opacity=F?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=a.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return(this._opacity===void 0||r===void 0&&l===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}let Cm={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},eu=0,Js=!1,Lc={maxWidth:100,unit:"metric"};function bd(g,r,l){let d=l&&l.maxWidth||100,m=g._container.clientHeight/2,v=g._container.clientWidth/2,b=g.unproject([v-d/2,m]),E=g.unproject([v+d/2,m]),q=Math.round(g.project(E).x-g.project(b).x),O=Math.min(d,q,g._container.clientWidth),k=b.distanceTo(E);if(l&&l.unit==="imperial"){let N=3.2808*k;N>5280?Qs(r,O,N/5280,g._getUIString("ScaleControl.Miles")):Qs(r,O,N,g._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?Qs(r,O,k/1852,g._getUIString("ScaleControl.NauticalMiles")):k>=1e3?Qs(r,O,k/1e3,g._getUIString("ScaleControl.Kilometers")):Qs(r,O,k,g._getUIString("ScaleControl.Meters"))}function Qs(g,r,l,d){let m=function(v){let b=Math.pow(10,`${Math.floor(v)}`.length-1),E=v/b;return E=E>=10?10:E>=5?5:E>=3?3:E>=2?2:E>=1?1:function(q){let O=Math.pow(10,Math.ceil(-Math.log(q)/Math.LN10));return Math.round(q*O)/O}(E),b*E}(l);g.style.width=r*(m/l)+"px",g.innerHTML=`${m}&nbsp;${d}`}let Mm={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Rm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function wd(g){if(g){if(typeof g=="number"){let r=Math.round(Math.abs(g)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,g),"top-left":new a.P(r,r),"top-right":new a.P(-r,r),bottom:new a.P(0,-g),"bottom-left":new a.P(r,-r),"bottom-right":new a.P(-r,-r),left:new a.P(g,0),right:new a.P(-g,0)}}if(g instanceof a.P||Array.isArray(g)){let r=a.P.convert(g);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.P.convert(g.center||[0,0]),top:a.P.convert(g.top||[0,0]),"top-left":a.P.convert(g["top-left"]||[0,0]),"top-right":a.P.convert(g["top-right"]||[0,0]),bottom:a.P.convert(g.bottom||[0,0]),"bottom-left":a.P.convert(g["bottom-left"]||[0,0]),"bottom-right":a.P.convert(g["bottom-right"]||[0,0]),left:a.P.convert(g.left||[0,0]),right:a.P.convert(g.right||[0,0])}}return wd(new a.P(0,0))}let Om=x;c.AJAXError=a.cz,c.Event=a.l,c.Evented=a.E,c.LngLat=a.S,c.MercatorCoordinate=a.a1,c.Point=a.P,c.addProtocol=a.cA,c.config=a.a,c.removeProtocol=a.cB,c.AttributionControl=Am,c.BoxZoomHandler=bm,c.CanvasSource=$o,c.CooperativeGesturesHandler=l0,c.DoubleClickZoomHandler=Tm,c.DragPanHandler=o0,c.DragRotateHandler=Im,c.EdgeInsets=Ns,c.FullscreenControl=class extends a.E{constructor(g={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,g&&g.container&&(g.container instanceof HTMLElement?this._container=g.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(g){return this._map=g,this._container||(this._container=this._map.getContainer()),this._controlContainer=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){L.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let g=this._fullscreenButton=L.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);L.create("span","maplibregl-ctrl-icon",g).setAttribute("aria-hidden","true"),g.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let g=this._getTitle();this._fullscreenButton.setAttribute("aria-label",g),this._fullscreenButton.title=g}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=za,c.GeolocateControl=class extends a.E{constructor(g){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{let l=new a.S(r.coords.longitude,r.coords.latitude),d=r.coords.accuracy,m=this._map.getBearing(),v=a.e({bearing:m},this.options.fitBoundsOptions),b=Rr.fromLngLat(l,d);this._map.fitBounds(b,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){let l=new a.S(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Js)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=L.create("button","maplibregl-ctrl-geolocate",this._container),L.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{let l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=L.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ql({element:this._dotElement}),this._circleElement=L.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ql({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{let d=(l==null?void 0:l[0])instanceof ResizeObserverEntry;l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||d||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},Cm,g)}onAdd(g){return this._map=g,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(r=!1){if(ir!==void 0&&!r)return ir;if(window.navigator.permissions===void 0)return ir=!!window.navigator.geolocation,ir;try{ir=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(l){ir=!!window.navigator.geolocation}return ir})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),L.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,eu=0,Js=!1}_isOutOfMapMaxBounds(g){let r=this._map.getMaxBounds(),l=g.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){let g=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&g))return;let r=this._map.project(g),l=this._map.unproject([r.x+100,r.y]),d=g.distanceTo(l)/100,m=2*this._accuracy/d;this._circleElement.style.width=`${m.toFixed(2)}px`,this._circleElement.style.height=`${m.toFixed(2)}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":eu--,Js=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let g;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),eu++,eu>1?(g={maximumAge:6e5,timeout:0},Js=!0):(g=this.options.positionOptions,Js=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,g)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var g;let r=(g=this._map.getProjection())===null||g===void 0?void 0:g.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var g;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((g=this._map.getProjection())===null||g===void 0?void 0:g.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(g){return this._map=g,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=L.create("button","maplibregl-ctrl-globe",this._container),L.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){L.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=dd,c.ImageSource=Fa,c.KeyboardHandler=md,c.LngLatBounds=Rr,c.LogoControl=c0,c.Map=class extends u0{constructor(g){var r,l;a.cw.mark(a.cx.create);let d=Object.assign(Object.assign(Object.assign({},Wn),g),{canvasContextAttributes:Object.assign(Object.assign({},Wn.canvasContextAttributes),g.canvasContextAttributes)});if(d.minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let m=new lr,v=new Ni;if(d.minZoom!==void 0&&m.setMinZoom(d.minZoom),d.maxZoom!==void 0&&m.setMaxZoom(d.maxZoom),d.minPitch!==void 0&&m.setMinPitch(d.minPitch),d.maxPitch!==void 0&&m.setMaxPitch(d.maxPitch),d.renderWorldCopies!==void 0&&m.setRenderWorldCopies(d.renderWorldCopies),super(m,v,{bearingSnap:d.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new Va,this._controls=[],this._mapId=a.a7(),this._contextLost=E=>{E.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:E}))},this._contextRestored=E=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:E}))},this._onMapScroll=E=>{if(E.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._maxTileCacheZoomLevels=d.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},d.canvasContextAttributes),this._trackResize=d.trackResize===!0,this._bearingSnap=d.bearingSnap,this._centerClampedToGround=d.centerClampedToGround,this._refreshExpiredTiles=d.refreshExpiredTiles===!0,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions===!0,this._collectResourceTiming=d.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},en),d.locale),this._clickTolerance=d.clickTolerance,this._overridePixelRatio=d.pixelRatio,this._maxCanvasSize=d.maxCanvasSize,this.transformCameraUpdate=d.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=d.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=oe.addThrottleControl(()=>this.isMoving()),this._requestManager=new Te(d.transformRequest),typeof d.container=="string"){if(this._container=document.getElementById(d.container),!this._container)throw new Error(`Container '${d.container}' not found.`)}else{if(!(d.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let E=!1,q=Xs(O=>{this._trackResize&&!this._removed&&(this.resize(O),this.redraw())},50);this._resizeObserver=new ResizeObserver(O=>{E?q(O):E=!0}),this._resizeObserver.observe(this._container)}this.handlers=new qm(this,d),this._hash=d.hash&&new dd(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,elevation:d.elevation,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,roll:d.roll}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.e({},d.fitBoundsOptions,{duration:0}))));let b=typeof d.style=="string"||((l=(r=d.style)===null||r===void 0?void 0:r.projection)===null||l===void 0?void 0:l.type)!=="globe";this.resize(null,b),this._localIdeographFontFamily=d.localIdeographFontFamily,this._validateStyle=d.validateStyle,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Am(typeof d.attributionControl=="boolean"?void 0:d.attributionControl)),d.maplibreLogo&&this.addControl(new c0,d.logoPosition),this.on("style.load",()=>{if(b||this._resizeTransform(),this.transform.unmodified){let E=a.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(E)}}),this.on("data",E=>{this._update(E.dataType==="style"),this.fire(new a.l(`${E.dataType}data`,E))}),this.on("dataloading",E=>{this.fire(new a.l(`${E.dataType}dataloading`,E))}),this.on("dataabort",E=>{this.fire(new a.l("sourcedataabort",E))})}_getMapId(){return this._mapId}setGlobalStateProperty(g,r){return this.style.setGlobalStateProperty(g,r),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(g,r){if(r===void 0&&(r=g.getDefaultPosition?g.getDefaultPosition():"top-right"),!g||!g.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let l=g.onAdd(this);this._controls.push(g);let d=this._controlPositions[r];return r.indexOf("bottom")!==-1?d.insertBefore(l,d.firstChild):d.appendChild(l),this}removeControl(g){if(!g||!g.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(g);return r>-1&&this._controls.splice(r,1),g.onRemove(this),this}hasControl(g){return this._controls.indexOf(g)>-1}coveringTiles(g){return Se(this.transform,g)}calculateCameraOptionsFromTo(g,r,l,d){return d==null&&this.terrain&&(d=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(g,r,l,d)}resize(g,r=!0){let[l,d]=this._containerDimensions(),m=this._getClampedPixelRatio(l,d);if(this._resizeCanvas(l,d,m),this.painter.resize(l,d,m),this.painter.overLimit()){let b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];let E=this._getClampedPixelRatio(l,d);this._resizeCanvas(l,d,E),this.painter.resize(l,d,E)}this._resizeTransform(r);let v=!this._moving;return v&&(this.stop(),this.fire(new a.l("movestart",g)).fire(new a.l("move",g))),this.fire(new a.l("resize",g)),v&&this.fire(new a.l("moveend",g)),this}_resizeTransform(g=!0){var r;let[l,d]=this._containerDimensions();this.transform.resize(l,d,g),(r=this._requestedCameraState)===null||r===void 0||r.resize(l,d,g)}_getClampedPixelRatio(g,r){let{0:l,1:d}=this._maxCanvasSize,m=this.getPixelRatio(),v=g*m,b=r*m;return Math.min(v>l?l/v:1,b>d?d/b:1)*m}getPixelRatio(){var g;return(g=this._overridePixelRatio)!==null&&g!==void 0?g:devicePixelRatio}setPixelRatio(g){this._overridePixelRatio=g,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(g){return this.transform.setMaxBounds(Rr.convert(g)),this._update()}setMinZoom(g){if((g=g==null?-2:g)>=-2&&g<=this.transform.maxZoom)return this.transform.setMinZoom(g),this._update(),this.getZoom()<g&&this.setZoom(g),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(g){if((g=g==null?22:g)>=this.transform.minZoom)return this.transform.setMaxZoom(g),this._update(),this.getZoom()>g&&this.setZoom(g),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(g){if((g=g==null?0:g)<0)throw new Error("minPitch must be greater than or equal to 0");if(g>=0&&g<=this.transform.maxPitch)return this.transform.setMinPitch(g),this._update(),this.getPitch()<g&&this.setPitch(g),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(g){if((g=g==null?60:g)>180)throw new Error("maxPitch must be less than or equal to 180");if(g>=this.transform.minPitch)return this.transform.setMaxPitch(g),this._update(),this.getPitch()>g&&this.setPitch(g),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(g){return this.transform.setRenderWorldCopies(g),this._update()}project(g){return this.transform.locationToScreenPoint(a.S.convert(g),this.style&&this.terrain)}unproject(g){return this.transform.screenPointToLocation(a.P.convert(g),this.terrain)}isMoving(){var g;return this._moving||((g=this.handlers)===null||g===void 0?void 0:g.isMoving())}isZooming(){var g;return this._zooming||((g=this.handlers)===null||g===void 0?void 0:g.isZooming())}isRotating(){var g;return this._rotating||((g=this.handlers)===null||g===void 0?void 0:g.isRotating())}_createDelegatedListener(g,r,l){if(g==="mouseenter"||g==="mouseover"){let d=!1;return{layers:r,listener:l,delegates:{mousemove:v=>{let b=r.filter(q=>this.getLayer(q)),E=b.length!==0?this.queryRenderedFeatures(v.point,{layers:b}):[];E.length?d||(d=!0,l.call(this,new vn(g,this,v.originalEvent,{features:E}))):d=!1},mouseout:()=>{d=!1}}}}if(g==="mouseleave"||g==="mouseout"){let d=!1;return{layers:r,listener:l,delegates:{mousemove:b=>{let E=r.filter(q=>this.getLayer(q));(E.length!==0?this.queryRenderedFeatures(b.point,{layers:E}):[]).length?d=!0:d&&(d=!1,l.call(this,new vn(g,this,b.originalEvent)))},mouseout:b=>{d&&(d=!1,l.call(this,new vn(g,this,b.originalEvent)))}}}}{let d=m=>{let v=r.filter(E=>this.getLayer(E)),b=v.length!==0?this.queryRenderedFeatures(m.point,{layers:v}):[];b.length&&(m.features=b,l.call(this,m),delete m.features)};return{layers:r,listener:l,delegates:{[g]:d}}}}_saveDelegatedListener(g,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[g]=this._delegatedListeners[g]||[],this._delegatedListeners[g].push(r)}_removeDelegatedListener(g,r,l){if(!this._delegatedListeners||!this._delegatedListeners[g])return;let d=this._delegatedListeners[g];for(let m=0;m<d.length;m++){let v=d[m];if(v.listener===l&&v.layers.length===r.length&&v.layers.every(b=>r.includes(b))){for(let b in v.delegates)this.off(b,v.delegates[b]);return void d.splice(m,1)}}}on(g,r,l){if(l===void 0)return super.on(g,r);let d=typeof r=="string"?[r]:r,m=this._createDelegatedListener(g,d,l);this._saveDelegatedListener(g,m);for(let v in m.delegates)this.on(v,m.delegates[v]);return{unsubscribe:()=>{this._removeDelegatedListener(g,d,l)}}}once(g,r,l){if(l===void 0)return super.once(g,r);let d=typeof r=="string"?[r]:r,m=this._createDelegatedListener(g,d,l);for(let v in m.delegates){let b=m.delegates[v];m.delegates[v]=(...E)=>{this._removeDelegatedListener(g,d,l),b(...E)}}this._saveDelegatedListener(g,m);for(let v in m.delegates)this.once(v,m.delegates[v]);return this}off(g,r,l){return l===void 0?super.off(g,r):(this._removeDelegatedListener(g,typeof r=="string"?[r]:r,l),this)}queryRenderedFeatures(g,r){if(!this.style)return[];let l,d=g instanceof a.P||Array.isArray(g),m=d?g:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(d?{}:g)||{},m instanceof a.P||typeof m[0]=="number")l=[a.P.convert(m)];else{let v=a.P.convert(m[0]),b=a.P.convert(m[1]);l=[v,new a.P(b.x,v.y),b,new a.P(v.x,b.y),v]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(g,r){return this.style.querySourceFeatures(g,r)}setStyle(g,r){return(r=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&g?(this._diffStyle(g,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(g,r))}setTransformRequest(g){return this._requestManager.setTransformRequest(g),this}_getUIString(g){let r=this._locale[g];if(r==null)throw new Error(`Missing UI string '${g}'`);return r}_updateStyle(g,r){var l,d;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(g,r));let m=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!g)),g?(this.style=new Xp(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof g=="string"?this.style.loadURL(g,r,m):this.style.loadJSON(g,r,m),this):((d=(l=this.style)===null||l===void 0?void 0:l.projection)===null||d===void 0||d.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Xp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(g,r){if(typeof g=="string"){let l=this._requestManager.transformRequest(g,"Style");a.j(l,new AbortController).then(d=>{this._updateDiff(d.data,r)}).catch(d=>{d&&this.fire(new a.k(d))})}else typeof g=="object"&&this._updateDiff(g,r)}_updateDiff(g,r){try{this.style.setState(g,r)&&this._update(!0)}catch(l){a.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(g,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(g,r){return this._lazyInitEmptyStyle(),this.style.addSource(g,r),this._update(!0)}isSourceLoaded(g){let r=this.style&&this.style.sourceCaches[g];if(r!==void 0)return r.loaded();this.fire(new a.k(new Error(`There is no source with ID '${g}'`)))}setTerrain(g){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),g){let r=this.style.sourceCaches[g.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${g.source}`);this.terrain===null&&r.reload();for(let l in this.style._layers){let d=this.style._layers[l];d.type==="hillshade"&&d.source===g.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),d.type==="color-relief"&&d.source===g.source&&a.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new mt(this.painter,r,g),this.painter.renderToTexture=new _d(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=l=>{var d;l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==g.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((d=l.source)===null||d===void 0?void 0:d.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:g})),this}getTerrain(){var g,r;return(r=(g=this.terrain)===null||g===void 0?void 0:g.options)!==null&&r!==void 0?r:null}areTilesLoaded(){let g=this.style&&this.style.sourceCaches;for(let r in g){let l=g[r]._tiles;for(let d in l){let m=l[d];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(g){return this.style.removeSource(g),this._update(!0)}getSource(g){return this.style.getSource(g)}setSourceTileLodParams(g,r,l){if(l){let d=this.getSource(l);if(!d)throw new Error(`There is no source with ID "${l}", cannot set LOD parameters`);d.calculateTileZoom=Be(Math.max(1,g),Math.max(1,r))}else for(let d in this.style.sourceCaches)this.style.sourceCaches[d].getSource().calculateTileZoom=Be(Math.max(1,g),Math.max(1,r));return this._update(!0),this}refreshTiles(g,r){let l=this.style.sourceCaches[g];if(!l)throw new Error(`There is no source cache with ID "${g}", cannot refresh tile`);r===void 0?l.reload(!0):l.refreshTiles(r.map(d=>new a.a4(d.z,d.x,d.y)))}addImage(g,r,l={}){let{pixelRatio:d=1,sdf:m=!1,stretchX:v,stretchY:b,content:E,textFitWidth:q,textFitHeight:O}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:k,height:N,data:F}=r,j=r;return this.style.addImage(g,{data:new a.R({width:k,height:N},new Uint8Array(F)),pixelRatio:d,stretchX:v,stretchY:b,content:E,textFitWidth:q,textFitHeight:O,sdf:m,version:0,userImage:j}),j.onAdd&&j.onAdd(this,g),this}}{let{width:k,height:N,data:F}=D.getImageData(r);this.style.addImage(g,{data:new a.R({width:k,height:N},F),pixelRatio:d,stretchX:v,stretchY:b,content:E,textFitWidth:q,textFitHeight:O,sdf:m,version:0})}}updateImage(g,r){let l=this.style.getImage(g);if(!l)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let d=r instanceof HTMLImageElement||a.b(r)?D.getImageData(r):r,{width:m,height:v,data:b}=d;if(m===void 0||v===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==l.data.width||v!==l.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let E=!(r instanceof HTMLImageElement||a.b(r));return l.data.replace(b,E),this.style.updateImage(g,l),this}getImage(g){return this.style.getImage(g)}hasImage(g){return g?!!this.style.getImage(g):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(g){this.style.removeImage(g)}loadImage(g){return oe.getImage(this._requestManager.transformRequest(g,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(g,r){return this._lazyInitEmptyStyle(),this.style.addLayer(g,r),this._update(!0)}moveLayer(g,r){return this.style.moveLayer(g,r),this._update(!0)}removeLayer(g){return this.style.removeLayer(g),this._update(!0)}getLayer(g){return this.style.getLayer(g)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(g,r,l){return this.style.setLayerZoomRange(g,r,l),this._update(!0)}setFilter(g,r,l={}){return this.style.setFilter(g,r,l),this._update(!0)}getFilter(g){return this.style.getFilter(g)}setPaintProperty(g,r,l,d={}){return this.style.setPaintProperty(g,r,l,d),this._update(!0)}getPaintProperty(g,r){return this.style.getPaintProperty(g,r)}setLayoutProperty(g,r,l,d={}){return this.style.setLayoutProperty(g,r,l,d),this._update(!0)}getLayoutProperty(g,r){return this.style.getLayoutProperty(g,r)}setGlyphs(g,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(g,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(g,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(g,r,l,d=>{d||this._update(!0)}),this}removeSprite(g){return this._lazyInitEmptyStyle(),this.style.removeSprite(g),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(g,r,l=>{l||this._update(!0)}),this}setLight(g,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(g,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(g,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(g,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(g,r){return this.style.setFeatureState(g,r),this._update()}removeFeatureState(g,r){return this.style.removeFeatureState(g,r),this._update()}getFeatureState(g){return this.style.getFeatureState(g)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let g=0,r=0;return this._container&&(g=this._container.clientWidth||400,r=this._container.clientHeight||300),[g,r]}_setupContainer(){let g=this._container;g.classList.add("maplibregl-map");let r=this._canvasContainer=L.create("div","maplibregl-canvas-container",g);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=L.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let l=this._containerDimensions(),d=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],d);let m=this._controlContainer=L.create("div","maplibregl-control-container",g),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{v[b]=L.create("div",`maplibregl-ctrl-${b} `,m)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(g,r,l){this._canvas.width=Math.floor(l*g),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${g}px`,this._canvas.style.height=`${r}px`}_setupPainter(){let g=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),r=null;this._canvas.addEventListener("webglcontextcreationerror",d=>{r={requestedAttributes:g},d&&(r.statusMessage=d.statusMessage,r.type=d.type)},{once:!0});let l=null;if(l=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,g):this._canvas.getContext("webgl2",g)||this._canvas.getContext("webgl",g),!l){let d="Failed to initialize WebGL";throw r?(r.message=d,new Error(JSON.stringify(r))):new Error(d)}this.painter=new K_(l,this.transform),H.testSupport(l)}migrateProjection(g,r){super.migrateProjection(g,r),this.painter.transform=g,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(g){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||g,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(g){return this._update(),this._renderTaskQueue.add(g)}_cancelRenderFrame(g){this._renderTaskQueue.remove(g)}_render(g){var r,l,d,m,v;let b=this._idleTriggered?this._fadeDuration:0,E=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(g),this._removed)return;let q=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let N=this.transform.zoom,F=D.now();this.style.zoomHistory.update(N,F);let j=new a.F(N,{now:F,fadeDuration:b,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),V=j.crossFadingFactor();V===1&&V===this._crossFadingFactor||(q=!0,this._crossFadingFactor=V),this.style.update(j)}let O=((l=this.style.projection)===null||l===void 0?void 0:l.transitionState)>0!==E;(d=this.style.projection)===null||d===void 0||d.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((m=this.style.projection)===null||m===void 0?void 0:m.transitionState,(v=this.style.projection)===null||v===void 0?void 0:v.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||O)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,b,this._crossSourceCollisions,O),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:b,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cw.mark(a.cx.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||q)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let k=this._sourcesDirty||this._styleDirty||this._placementDirty;return k||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||k||(this._fullyLoaded=!0,a.cw.mark(a.cx.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var g;this._hash&&this._hash.remove();for(let l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),oe.removeThrottleControl(this._imageQueueHandle),(g=this._resizeObserver)===null||g===void 0||g.disconnect();let r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),L.remove(this._canvasContainer),L.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cw.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frame(this._frameRequest,g=>{a.cw.frame(g),this._frameRequest=null;try{this._render(g)}catch(r){if(!a.cy(r)&&!function(l){return l.message===Ec}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(g){this._showTileBoundaries!==g&&(this._showTileBoundaries=g,this._update())}get showPadding(){return!!this._showPadding}set showPadding(g){this._showPadding!==g&&(this._showPadding=g,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(g){this._showCollisionBoxes!==g&&(this._showCollisionBoxes=g,g?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(g){this._showOverdrawInspector!==g&&(this._showOverdrawInspector=g,this._update())}get repaint(){return!!this._repaint}set repaint(g){this._repaint!==g&&(this._repaint=g,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(g){this._vertices=g,this._update()}get version(){return h0}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(g){return this._lazyInitEmptyStyle(),this.style.setProjection(g),this._update(!0)}},c.MapMouseEvent=vn,c.MapTouchEvent=Gl,c.MapWheelEvent=xm,c.Marker=Ql,c.NavigationControl=class{constructor(g){this._updateZoomButtons=()=>{let r=this._map.getZoom(),l=r===this._map.getMaxZoom(),d=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=d,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",d.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,l)=>{let d=this._map._getUIString(`NavigationControl.${l}`);r.title=d,r.setAttribute("aria-label",d)},this.options=a.e({},gT,g),this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),L.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),L.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=L.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(g){return this._map=g,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Dc(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){L.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(g,r){let l=L.create("button",g,this._container);return l.type="button",l.addEventListener("click",r),l}},c.Popup=class extends a.E{constructor(g){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&L.remove(this._content),this._container&&(L.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=L.create("div","maplibregl-popup",this._map.getContainer()),this._tip=L.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let b of this.options.className.split(" "))this._container.classList.add(b);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Dr(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;let l=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let d=this.options.anchor,m=wd(this.options.offset);if(!d){let b=this._container.offsetWidth,E=this._container.offsetHeight,q;q=l.y+m.bottom.y<E?["top"]:l.y>this._map.transform.height-E?["bottom"]:[],l.x<b/2?q.push("left"):l.x>this._map.transform.width-b/2&&q.push("right"),d=q.length===0?"bottom":q.join("-")}let v=l.add(m[d]);this.options.subpixelPositioning||(v=v.round()),L.setTransform(this._container,`${xd[d]} translate(${v.x}px,${v.y}px)`),Jl(this._container,d,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(Mm),g)}addTo(g){return this._map&&this.remove(),this._map=g,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(g){return this._lngLat=a.S.convert(g),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(g){return this.setDOMContent(document.createTextNode(g))}setHTML(g){let r=document.createDocumentFragment(),l=document.createElement("body"),d;for(l.innerHTML=g;d=l.firstChild,d;)r.appendChild(d);return this.setDOMContent(r)}getMaxWidth(){var g;return(g=this._container)===null||g===void 0?void 0:g.style.maxWidth}setMaxWidth(g){return this.options.maxWidth=g,this._update(),this}setDOMContent(g){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=L.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(g),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(g){return this._container&&this._container.classList.add(g),this}removeClassName(g){return this._container&&this._container.classList.remove(g),this}setOffset(g){return this.options.offset=g,this._update(),this}toggleClassName(g){if(this._container)return this._container.classList.toggle(g)}setSubpixelPositioning(g){this.options.subpixelPositioning=g}_createCloseButton(){this.options.closeButton&&(this._closeButton=L.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let g=this._container.querySelector(Rm);g&&g.focus()}},c.RasterDEMTileSource=ks,c.RasterTileSource=La,c.ScaleControl=class{constructor(g){this._onMove=()=>{bd(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,bd(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Lc),g)}getDefaultPosition(){return"bottom-left"}onAdd(g){return this._map=g,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-scale",g.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){L.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=n0,c.Style=Xp,c.TerrainControl=class{constructor(g){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=g}onAdd(g){return this._map=g,this._container=L.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=L.create("button","maplibregl-ctrl-terrain",this._container),L.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){L.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=pd,c.TwoFingersTouchRotateHandler=Xl,c.TwoFingersTouchZoomHandler=fd,c.TwoFingersTouchZoomRotateHandler=s0,c.VectorTileSource=fa,c.VideoSource=Ml,c.addSourceType=(g,r)=>a._(void 0,void 0,void 0,function*(){if(Go(g))throw new Error(`A source type called "${g}" already exists.`);((l,d)=>{Vo[l]=d})(g,r)}),c.clearPrewarmedResources=function(){let g=ai;g&&(g.isPreloaded()&&g.numActive()===1?(g.release(zi),ai=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=Hp,c.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return Ho().getRTLTextPluginStatus()},c.getVersion=function(){return Om},c.getWorkerCount=function(){return ni.workerCount},c.getWorkerUrl=function(){return a.a.WORKER_URL},c.importScriptInWorkers=function(g){return po().broadcast("IS",g)},c.prewarm=function(){ha().acquire(zi)},c.setMaxParallelImageRequests=function(g){a.a.MAX_PARALLEL_IMAGE_REQUESTS=g},c.setRTLTextPlugin=function(g,r){return Ho().setRTLTextPlugin(g,r)},c.setWorkerCount=function(g){ni.workerCount=g},c.setWorkerUrl=function(g){a.a.WORKER_URL=g}});var u=e;return u})});var Afe=P((jQt,Pfe)=>{p();var ez=1/0,Lgt=17976931348623157e292,xfe=NaN,zgt="[object Symbol]",Fgt=/^\s+|\s+$/g,Ngt=/^[-+]0x[0-9a-f]+$/i,Bgt=/^0b[01]+$/i,jgt=/^0o[0-7]+$/i,Ugt=parseInt,$gt=typeof global=="object"&&global&&global.Object===Object&&global,Vgt=typeof self=="object"&&self&&self.Object===Object&&self,Ggt=$gt||Vgt||Function("return this")(),Zgt=Object.prototype,Wgt=Zgt.toString,bfe=Ggt.Symbol,Hgt=Math.min,wfe=bfe?bfe.prototype:void 0,Sfe=wfe?wfe.toString:void 0;function Kgt(e){if(typeof e=="string")return e;if(Ife(e))return Sfe?Sfe.call(e):"";var t=e+"";return t=="0"&&1/e==-ez?"-0":t}function Xgt(e){var t=Math[e];return function(n,u){if(n=qfe(n),u=Hgt(Qgt(u),292),u){var c=(Efe(n)+"e").split("e"),a=t(c[0]+"e"+(+c[1]+u));return c=(Efe(a)+"e").split("e"),+(c[0]+"e"+(+c[1]-u))}return t(n)}}function Tfe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ygt(e){return!!e&&typeof e=="object"}function Ife(e){return typeof e=="symbol"||Ygt(e)&&Wgt.call(e)==zgt}function Jgt(e){if(!e)return e===0?e:0;if(e=qfe(e),e===ez||e===-ez){var t=e<0?-1:1;return t*Lgt}return e===e?e:0}function Qgt(e){var t=Jgt(e),n=t%1;return t===t?n?t-n:t:0}function qfe(e){if(typeof e=="number")return e;if(Ife(e))return xfe;if(Tfe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Tfe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Fgt,"");var n=Bgt.test(e);return n||jgt.test(e)?Ugt(e.slice(2),n?2:8):Ngt.test(e)?xfe:+e}function Efe(e){return e==null?"":Kgt(e)}var evt=Xgt("round");Pfe.exports=evt});var wvt={};jF(wvt,{SettingsProvider:()=>vvt,renderGeoreferenceRanking:()=>yvt,renderProgressBar:()=>_vt,renderUnreferencedMaps:()=>xvt,renderUserHistory:()=>bvt});p();var y_=cs(Gc(),1),__=cs(aj(),1),lrr=cs(kde(),1);p();p();p();p();p();function a_(e,t){return function(){return e.apply(t,arguments)}}var{toString:wmt}=Object.prototype,{getPrototypeOf:PL}=Object,{iterator:TS,toStringTag:Lde}=Symbol,ES=(e=>t=>{let n=wmt.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),jo=e=>(e=e.toLowerCase(),t=>ES(t)===e),IS=e=>t=>typeof t===e,{isArray:Rp}=Array,Mp=IS("undefined");function o_(e){return e!==null&&!Mp(e)&&e.constructor!==null&&!Mp(e.constructor)&&ca(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}var zde=jo("ArrayBuffer");function Smt(e){let t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&zde(e.buffer),t}var Tmt=IS("string"),ca=IS("function"),Fde=IS("number"),s_=e=>e!==null&&typeof e=="object",Emt=e=>e===!0||e===!1,SS=e=>{if(ES(e)!=="object")return!1;let t=PL(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Lde in e)&&!(TS in e)},Imt=e=>{if(!s_(e)||o_(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},qmt=jo("Date"),Pmt=jo("File"),Amt=jo("Blob"),Cmt=jo("FileList"),Mmt=e=>s_(e)&&ca(e.pipe),Rmt=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ca(e.append)&&((t=ES(e))==="formdata"||t==="object"&&ca(e.toString)&&e.toString()==="[object FormData]"))},Omt=jo("URLSearchParams"),[kmt,Dmt,Lmt,zmt]=["ReadableStream","Request","Response","Headers"].map(jo),Fmt=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function l_(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e=="undefined")return;let u,c;if(typeof e!="object"&&(e=[e]),Rp(e))for(u=0,c=e.length;u<c;u++)t.call(null,e[u],u,e);else{if(o_(e))return;let a=n?Object.getOwnPropertyNames(e):Object.keys(e),x=a.length,S;for(u=0;u<x;u++)S=a[u],t.call(null,e[S],S,e)}}function Nde(e,t){if(o_(e))return null;t=t.toLowerCase();let n=Object.keys(e),u=n.length,c;for(;u-->0;)if(c=n[u],t===c.toLowerCase())return c;return null}var Fh=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:global,Bde=e=>!Mp(e)&&e!==Fh;function qL(){let{caseless:e,skipUndefined:t}=Bde(this)&&this||{},n={},u=(c,a)=>{let x=e&&Nde(n,a)||a;SS(n[x])&&SS(c)?n[x]=qL(n[x],c):SS(c)?n[x]=qL({},c):Rp(c)?n[x]=c.slice():(!t||!Mp(c))&&(n[x]=c)};for(let c=0,a=arguments.length;c<a;c++)arguments[c]&&l_(arguments[c],u);return n}var Nmt=(e,t,n,{allOwnKeys:u}={})=>(l_(t,(c,a)=>{n&&ca(c)?e[a]=a_(c,n):e[a]=c},{allOwnKeys:u}),e),Bmt=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),jmt=(e,t,n,u)=>{e.prototype=Object.create(t.prototype,u),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Umt=(e,t,n,u)=>{let c,a,x,S={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),a=c.length;a-->0;)x=c[a],(!u||u(x,e,t))&&!S[x]&&(t[x]=e[x],S[x]=!0);e=n!==!1&&PL(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},$mt=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;let u=e.indexOf(t,n);return u!==-1&&u===n},Vmt=e=>{if(!e)return null;if(Rp(e))return e;let t=e.length;if(!Fde(t))return null;let n=new Array(t);for(;t-->0;)n[t]=e[t];return n},Gmt=(e=>t=>e&&t instanceof e)(typeof Uint8Array!="undefined"&&PL(Uint8Array)),Zmt=(e,t)=>{let u=(e&&e[TS]).call(e),c;for(;(c=u.next())&&!c.done;){let a=c.value;t.call(e,a[0],a[1])}},Wmt=(e,t)=>{let n,u=[];for(;(n=e.exec(t))!==null;)u.push(n);return u},Hmt=jo("HTMLFormElement"),Kmt=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,u,c){return u.toUpperCase()+c}),Dde=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Xmt=jo("RegExp"),jde=(e,t)=>{let n=Object.getOwnPropertyDescriptors(e),u={};l_(n,(c,a)=>{let x;(x=t(c,a,e))!==!1&&(u[a]=x||c)}),Object.defineProperties(e,u)},Ymt=e=>{jde(e,(t,n)=>{if(ca(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;let u=e[n];if(ca(u)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Jmt=(e,t)=>{let n={},u=c=>{c.forEach(a=>{n[a]=!0})};return Rp(e)?u(e):u(String(e).split(t)),n},Qmt=()=>{},egt=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function tgt(e){return!!(e&&ca(e.append)&&e[Lde]==="FormData"&&e[TS])}var rgt=e=>{let t=new Array(10),n=(u,c)=>{if(s_(u)){if(t.indexOf(u)>=0)return;if(o_(u))return u;if(!("toJSON"in u)){t[c]=u;let a=Rp(u)?[]:{};return l_(u,(x,S)=>{let A=n(x,c+1);!Mp(A)&&(a[S]=A)}),t[c]=void 0,a}}return u};return n(e,0)},igt=jo("AsyncFunction"),ngt=e=>e&&(s_(e)||ca(e))&&ca(e.then)&&ca(e.catch),Ude=((e,t)=>e?setImmediate:t?((n,u)=>(Fh.addEventListener("message",({source:c,data:a})=>{c===Fh&&a===n&&u.length&&u.shift()()},!1),c=>{u.push(c),Fh.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",ca(Fh.postMessage)),agt=typeof queueMicrotask!="undefined"?queueMicrotask.bind(Fh):typeof I!="undefined"&&I.nextTick||Ude,ogt=e=>e!=null&&ca(e[TS]),Ce={isArray:Rp,isArrayBuffer:zde,isBuffer:o_,isFormData:Rmt,isArrayBufferView:Smt,isString:Tmt,isNumber:Fde,isBoolean:Emt,isObject:s_,isPlainObject:SS,isEmptyObject:Imt,isReadableStream:kmt,isRequest:Dmt,isResponse:Lmt,isHeaders:zmt,isUndefined:Mp,isDate:qmt,isFile:Pmt,isBlob:Amt,isRegExp:Xmt,isFunction:ca,isStream:Mmt,isURLSearchParams:Omt,isTypedArray:Gmt,isFileList:Cmt,forEach:l_,merge:qL,extend:Nmt,trim:Fmt,stripBOM:Bmt,inherits:jmt,toFlatObject:Umt,kindOf:ES,kindOfTest:jo,endsWith:$mt,toArray:Vmt,forEachEntry:Zmt,matchAll:Wmt,isHTMLForm:Hmt,hasOwnProperty:Dde,hasOwnProp:Dde,reduceDescriptors:jde,freezeMethods:Ymt,toObjectSet:Jmt,toCamelCase:Kmt,noop:Qmt,toFiniteNumber:egt,findKey:Nde,global:Fh,isContextDefined:Bde,isSpecCompliantForm:tgt,toJSONObject:rgt,isAsyncFn:igt,isThenable:ngt,setImmediate:Ude,asap:agt,isIterable:ogt};p();p();p();p();p();function Op(e,t,n,u,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),u&&(this.request=u),c&&(this.response=c,this.status=c.status?c.status:null)}Ce.inherits(Op,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ce.toJSONObject(this.config),code:this.code,status:this.status}}});var $de=Op.prototype,Vde={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Vde[e]={value:e}});Object.defineProperties(Op,Vde);Object.defineProperty($de,"isAxiosError",{value:!0});Op.from=(e,t,n,u,c,a)=>{let x=Object.create($de);Ce.toFlatObject(e,x,function(D){return D!==Error.prototype},R=>R!=="isAxiosError");let S=e&&e.message?e.message:"Error",A=t==null&&e?e.code:t;return Op.call(x,S,A,n,u,c),e&&x.cause==null&&Object.defineProperty(x,"cause",{value:e,configurable:!0}),x.name=e&&e.name||"Error",a&&Object.assign(x,a),x};var Mt=Op;p();var qS=null;function AL(e){return Ce.isPlainObject(e)||Ce.isArray(e)}function Zde(e){return Ce.endsWith(e,"[]")?e.slice(0,-2):e}function Gde(e,t,n){return e?e.concat(t).map(function(c,a){return c=Zde(c),!n&&a?"["+c+"]":c}).join(n?".":""):t}function sgt(e){return Ce.isArray(e)&&!e.some(AL)}var lgt=Ce.toFlatObject(Ce,{},null,function(t){return /^is[A-Z]/.test(t)});function ugt(e,t,n){if(!Ce.isObject(e))throw new TypeError("target must be an object");t=t||new(qS||FormData),n=Ce.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ve,X){return!Ce.isUndefined(X[ve])});let u=n.metaTokens,c=n.visitor||D,a=n.dots,x=n.indexes,A=(n.Blob||typeof Blob!="undefined"&&Blob)&&Ce.isSpecCompliantForm(t);if(!Ce.isFunction(c))throw new TypeError("visitor must be a function");function R(de){if(de===null)return"";if(Ce.isDate(de))return de.toISOString();if(Ce.isBoolean(de))return de.toString();if(!A&&Ce.isBlob(de))throw new Mt("Blob is not supported. Use a Buffer instead.");return Ce.isArrayBuffer(de)||Ce.isTypedArray(de)?A&&typeof Blob=="function"?new Blob([de]):Buffer.from(de):de}function D(de,ve,X){let ee=de;if(de&&!X&&typeof de=="object"){if(Ce.endsWith(ve,"{}"))ve=u?ve:ve.slice(0,-2),de=JSON.stringify(de);else if(Ce.isArray(de)&&sgt(de)||(Ce.isFileList(de)||Ce.endsWith(ve,"[]"))&&(ee=Ce.toArray(de)))return ve=Zde(ve),ee.forEach(function(Te,Ae){!(Ce.isUndefined(Te)||Te===null)&&t.append(x===!0?Gde([ve],Ae,a):x===null?ve:ve+"[]",R(Te))}),!1}return AL(de)?!0:(t.append(Gde(X,ve,a),R(de)),!1)}let L=[],H=Object.assign(lgt,{defaultVisitor:D,convertValue:R,isVisitable:AL});function ce(de,ve){if(!Ce.isUndefined(de)){if(L.indexOf(de)!==-1)throw Error("Circular reference detected in "+ve.join("."));L.push(de),Ce.forEach(de,function(ee,oe){(!(Ce.isUndefined(ee)||ee===null)&&c.call(t,ee,Ce.isString(oe)?oe.trim():oe,ve,H))===!0&&ce(ee,ve?ve.concat(oe):[oe])}),L.pop()}}if(!Ce.isObject(e))throw new TypeError("data must be an object");return ce(e),t}var uc=ugt;function Wde(e){let t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(u){return t[u]})}function Hde(e,t){this._pairs=[],e&&uc(e,this,t)}var Kde=Hde.prototype;Kde.append=function(t,n){this._pairs.push([t,n])};Kde.toString=function(t){let n=t?function(u){return t.call(this,u,Wde)}:Wde;return this._pairs.map(function(c){return n(c[0])+"="+n(c[1])},"").join("&")};var PS=Hde;function cgt(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function u_(e,t,n){if(!t)return e;let u=n&&n.encode||cgt;Ce.isFunction(n)&&(n={serialize:n});let c=n&&n.serialize,a;if(c?a=c(t,n):a=Ce.isURLSearchParams(t)?t.toString():new PS(t,n).toString(u),a){let x=e.indexOf("#");x!==-1&&(e=e.slice(0,x)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}p();var CL=class{constructor(){this.handlers=[]}use(t,n,u){return this.handlers.push({fulfilled:t,rejected:n,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){Ce.forEach(this.handlers,function(u){u!==null&&t(u)})}},ML=CL;p();p();p();p();var AS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};p();p();p();p();var Xde=typeof URLSearchParams!="undefined"?URLSearchParams:PS;p();var Yde=typeof FormData!="undefined"?FormData:null;p();var Jde=typeof Blob!="undefined"?Blob:null;var Qde={isBrowser:!0,classes:{URLSearchParams:Xde,FormData:Yde,Blob:Jde},protocols:["http","https","file","blob","url","data"]};var kL={};jF(kL,{hasBrowserEnv:()=>OL,hasStandardBrowserEnv:()=>hgt,hasStandardBrowserWebWorkerEnv:()=>dgt,navigator:()=>RL,origin:()=>fgt});p();var OL=typeof window!="undefined"&&typeof document!="undefined",RL=typeof navigator=="object"&&navigator||void 0,hgt=OL&&(!RL||["ReactNative","NativeScript","NS"].indexOf(RL.product)<0),dgt=typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fgt=OL&&window.location.href||"http://localhost";var Vr=Kn(Kn({},kL),Qde);function DL(e,t){return uc(e,new Vr.classes.URLSearchParams,Kn({visitor:function(n,u,c,a){return Vr.isNode&&Ce.isBuffer(n)?(this.append(u,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}p();function pgt(e){return Ce.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function mgt(e){let t={},n=Object.keys(e),u,c=n.length,a;for(u=0;u<c;u++)a=n[u],t[a]=e[a];return t}function ggt(e){function t(n,u,c,a){let x=n[a++];if(x==="__proto__")return!0;let S=Number.isFinite(+x),A=a>=n.length;return x=!x&&Ce.isArray(c)?c.length:x,A?(Ce.hasOwnProp(c,x)?c[x]=[c[x],u]:c[x]=u,!S):((!c[x]||!Ce.isObject(c[x]))&&(c[x]=[]),t(n,u,c[x],a)&&Ce.isArray(c[x])&&(c[x]=mgt(c[x])),!S)}if(Ce.isFormData(e)&&Ce.isFunction(e.entries)){let n={};return Ce.forEachEntry(e,(u,c)=>{t(pgt(u),c,n,0)}),n}return null}var CS=ggt;function vgt(e,t,n){if(Ce.isString(e))try{return(t||JSON.parse)(e),Ce.trim(e)}catch(u){if(u.name!=="SyntaxError")throw u}return(n||JSON.stringify)(e)}var LL={transitional:AS,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){let u=n.getContentType()||"",c=u.indexOf("application/json")>-1,a=Ce.isObject(t);if(a&&Ce.isHTMLForm(t)&&(t=new FormData(t)),Ce.isFormData(t))return c?JSON.stringify(CS(t)):t;if(Ce.isArrayBuffer(t)||Ce.isBuffer(t)||Ce.isStream(t)||Ce.isFile(t)||Ce.isBlob(t)||Ce.isReadableStream(t))return t;if(Ce.isArrayBufferView(t))return t.buffer;if(Ce.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let S;if(a){if(u.indexOf("application/x-www-form-urlencoded")>-1)return DL(t,this.formSerializer).toString();if((S=Ce.isFileList(t))||u.indexOf("multipart/form-data")>-1){let A=this.env&&this.env.FormData;return uc(S?{"files[]":t}:t,A&&new A,this.formSerializer)}}return a||c?(n.setContentType("application/json",!1),vgt(t)):t}],transformResponse:[function(t){let n=this.transitional||LL.transitional,u=n&&n.forcedJSONParsing,c=this.responseType==="json";if(Ce.isResponse(t)||Ce.isReadableStream(t))return t;if(t&&Ce.isString(t)&&(u&&!this.responseType||c)){let x=!(n&&n.silentJSONParsing)&&c;try{return JSON.parse(t,this.parseReviver)}catch(S){if(x)throw S.name==="SyntaxError"?Mt.from(S,Mt.ERR_BAD_RESPONSE,this,null,this.response):S}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vr.classes.FormData,Blob:Vr.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ce.forEach(["delete","get","head","post","put","patch"],e=>{LL.headers[e]={}});var kp=LL;p();p();var ygt=Ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),efe=e=>{let t={},n,u,c;return e&&e.split(`
`).forEach(function(x){c=x.indexOf(":"),n=x.substring(0,c).trim().toLowerCase(),u=x.substring(c+1).trim(),!(!n||t[n]&&ygt[n])&&(n==="set-cookie"?t[n]?t[n].push(u):t[n]=[u]:t[n]=t[n]?t[n]+", "+u:u)}),t};var tfe=Symbol("internals");function c_(e){return e&&String(e).trim().toLowerCase()}function MS(e){return e===!1||e==null?e:Ce.isArray(e)?e.map(MS):String(e)}function _gt(e){let t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,u;for(;u=n.exec(e);)t[u[1]]=u[2];return t}var xgt=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function zL(e,t,n,u,c){if(Ce.isFunction(u))return u.call(this,t,n);if(c&&(t=n),!!Ce.isString(t)){if(Ce.isString(u))return t.indexOf(u)!==-1;if(Ce.isRegExp(u))return u.test(t)}}function bgt(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,u)=>n.toUpperCase()+u)}function wgt(e,t){let n=Ce.toCamelCase(" "+t);["get","set","has"].forEach(u=>{Object.defineProperty(e,u+n,{value:function(c,a,x){return this[u].call(this,t,c,a,x)},configurable:!0})})}var Dp=class{constructor(t){t&&this.set(t)}set(t,n,u){let c=this;function a(S,A,R){let D=c_(A);if(!D)throw new Error("header name must be a non-empty string");let L=Ce.findKey(c,D);(!L||c[L]===void 0||R===!0||R===void 0&&c[L]!==!1)&&(c[L||A]=MS(S))}let x=(S,A)=>Ce.forEach(S,(R,D)=>a(R,D,A));if(Ce.isPlainObject(t)||t instanceof this.constructor)x(t,n);else if(Ce.isString(t)&&(t=t.trim())&&!xgt(t))x(efe(t),n);else if(Ce.isObject(t)&&Ce.isIterable(t)){let S={},A,R;for(let D of t){if(!Ce.isArray(D))throw TypeError("Object iterator must return a key-value pair");S[R=D[0]]=(A=S[R])?Ce.isArray(A)?[...A,D[1]]:[A,D[1]]:D[1]}x(S,n)}else t!=null&&a(n,t,u);return this}get(t,n){if(t=c_(t),t){let u=Ce.findKey(this,t);if(u){let c=this[u];if(!n)return c;if(n===!0)return _gt(c);if(Ce.isFunction(n))return n.call(this,c,u);if(Ce.isRegExp(n))return n.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=c_(t),t){let u=Ce.findKey(this,t);return!!(u&&this[u]!==void 0&&(!n||zL(this,this[u],u,n)))}return!1}delete(t,n){let u=this,c=!1;function a(x){if(x=c_(x),x){let S=Ce.findKey(u,x);S&&(!n||zL(u,u[S],S,n))&&(delete u[S],c=!0)}}return Ce.isArray(t)?t.forEach(a):a(t),c}clear(t){let n=Object.keys(this),u=n.length,c=!1;for(;u--;){let a=n[u];(!t||zL(this,this[a],a,t,!0))&&(delete this[a],c=!0)}return c}normalize(t){let n=this,u={};return Ce.forEach(this,(c,a)=>{let x=Ce.findKey(u,a);if(x){n[x]=MS(c),delete n[a];return}let S=t?bgt(a):String(a).trim();S!==a&&delete n[a],n[S]=MS(c),u[S]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){let n=Object.create(null);return Ce.forEach(this,(u,c)=>{u!=null&&u!==!1&&(n[c]=t&&Ce.isArray(u)?u.join(", "):u)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){let u=new this(t);return n.forEach(c=>u.set(c)),u}static accessor(t){let u=(this[tfe]=this[tfe]={accessors:{}}).accessors,c=this.prototype;function a(x){let S=c_(x);u[S]||(wgt(c,x),u[S]=!0)}return Ce.isArray(t)?t.forEach(a):a(t),this}};Dp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ce.reduceDescriptors(Dp.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(u){this[n]=u}}});Ce.freezeMethods(Dp);var Li=Dp;function h_(e,t){let n=this||kp,u=t||n,c=Li.from(u.headers),a=u.data;return Ce.forEach(e,function(S){a=S.call(n,a,c.normalize(),t?t.status:void 0)}),c.normalize(),a}p();function d_(e){return!!(e&&e.__CANCEL__)}p();function rfe(e,t,n){Mt.call(this,e==null?"canceled":e,Mt.ERR_CANCELED,t,n),this.name="CanceledError"}Ce.inherits(rfe,Mt,{__CANCEL__:!0});var Rs=rfe;p();p();p();function f_(e,t,n){let u=n.config.validateStatus;!n.status||!u||u(n.status)?e(n):t(new Mt("Request failed with status code "+n.status,[Mt.ERR_BAD_REQUEST,Mt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}p();function FL(e){let t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}p();p();function Sgt(e,t){e=e||10;let n=new Array(e),u=new Array(e),c=0,a=0,x;return t=t!==void 0?t:1e3,function(A){let R=Date.now(),D=u[a];x||(x=R),n[c]=A,u[c]=R;let L=a,H=0;for(;L!==c;)H+=n[L++],L=L%e;if(c=(c+1)%e,c===a&&(a=(a+1)%e),R-x<t)return;let ce=D&&R-D;return ce?Math.round(H*1e3/ce):void 0}}var ife=Sgt;p();function Tgt(e,t){let n=0,u=1e3/t,c,a,x=(R,D=Date.now())=>{n=D,c=null,a&&(clearTimeout(a),a=null),e(...R)};return[(...R)=>{let D=Date.now(),L=D-n;L>=u?x(R,D):(c=R,a||(a=setTimeout(()=>{a=null,x(c)},u-L)))},()=>c&&x(c)]}var nfe=Tgt;var Lp=(e,t,n=3)=>{let u=0,c=ife(50,250);return nfe(a=>{let x=a.loaded,S=a.lengthComputable?a.total:void 0,A=x-u,R=c(A),D=x<=S;u=x;let L={loaded:x,total:S,progress:S?x/S:void 0,bytes:A,rate:R||void 0,estimated:R&&S&&D?(S-x)/R:void 0,event:a,lengthComputable:S!=null,[t?"download":"upload"]:!0};e(L)},n)},NL=(e,t)=>{let n=e!=null;return[u=>t[0]({lengthComputable:n,total:e,loaded:u}),t[1]]},BL=e=>(...t)=>Ce.asap(()=>e(...t));p();p();var afe=Vr.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Vr.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Vr.origin),Vr.navigator&&/(msie|trident)/i.test(Vr.navigator.userAgent)):()=>!0;p();var ofe=Vr.hasStandardBrowserEnv?{write(e,t,n,u,c,a){let x=[e+"="+encodeURIComponent(t)];Ce.isNumber(n)&&x.push("expires="+new Date(n).toGMTString()),Ce.isString(u)&&x.push("path="+u),Ce.isString(c)&&x.push("domain="+c),a===!0&&x.push("secure"),document.cookie=x.join("; ")},read(e){let t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};p();p();function jL(e){return /^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}p();function UL(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function p_(e,t,n){let u=!jL(t);return e&&(u||n==!1)?UL(e,t):t}p();var sfe=e=>e instanceof Li?Kn({},e):e;function Uo(e,t){t=t||{};let n={};function u(R,D,L,H){return Ce.isPlainObject(R)&&Ce.isPlainObject(D)?Ce.merge.call({caseless:H},R,D):Ce.isPlainObject(D)?Ce.merge({},D):Ce.isArray(D)?D.slice():D}function c(R,D,L,H){if(Ce.isUndefined(D)){if(!Ce.isUndefined(R))return u(void 0,R,L,H)}else return u(R,D,L,H)}function a(R,D){if(!Ce.isUndefined(D))return u(void 0,D)}function x(R,D){if(Ce.isUndefined(D)){if(!Ce.isUndefined(R))return u(void 0,R)}else return u(void 0,D)}function S(R,D,L){if(L in t)return u(R,D);if(L in e)return u(void 0,R)}let A={url:a,method:a,data:a,baseURL:x,transformRequest:x,transformResponse:x,paramsSerializer:x,timeout:x,timeoutMessage:x,withCredentials:x,withXSRFToken:x,adapter:x,responseType:x,xsrfCookieName:x,xsrfHeaderName:x,onUploadProgress:x,onDownloadProgress:x,decompress:x,maxContentLength:x,maxBodyLength:x,beforeRedirect:x,transport:x,httpAgent:x,httpsAgent:x,cancelToken:x,socketPath:x,responseEncoding:x,validateStatus:S,headers:(R,D,L)=>c(sfe(R),sfe(D),L,!0)};return Ce.forEach(Object.keys(Kn(Kn({},e),t)),function(D){let L=A[D]||c,H=L(e[D],t[D],D);Ce.isUndefined(H)&&L!==S||(n[D]=H)}),n}var RS=e=>{let t=Uo({},e),{data:n,withXSRFToken:u,xsrfHeaderName:c,xsrfCookieName:a,headers:x,auth:S}=t;if(t.headers=x=Li.from(x),t.url=u_(p_(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),S&&x.set("Authorization","Basic "+btoa((S.username||"")+":"+(S.password?unescape(encodeURIComponent(S.password)):""))),Ce.isFormData(n)){if(Vr.hasStandardBrowserEnv||Vr.hasStandardBrowserWebWorkerEnv)x.setContentType(void 0);else if(Ce.isFunction(n.getHeaders)){let A=n.getHeaders(),R=["content-type","content-length"];Object.entries(A).forEach(([D,L])=>{R.includes(D.toLowerCase())&&x.set(D,L)})}}if(Vr.hasStandardBrowserEnv&&(u&&Ce.isFunction(u)&&(u=u(t)),u||u!==!1&&afe(t.url))){let A=c&&a&&ofe.read(a);A&&x.set(c,A)}return t};var Egt=typeof XMLHttpRequest!="undefined",lfe=Egt&&function(e){return new Promise(function(n,u){let c=RS(e),a=c.data,x=Li.from(c.headers).normalize(),{responseType:S,onUploadProgress:A,onDownloadProgress:R}=c,D,L,H,ce,de;function ve(){ce&&ce(),de&&de(),c.cancelToken&&c.cancelToken.unsubscribe(D),c.signal&&c.signal.removeEventListener("abort",D)}let X=new XMLHttpRequest;X.open(c.method.toUpperCase(),c.url,!0),X.timeout=c.timeout;function ee(){if(!X)return;let Te=Li.from("getAllResponseHeaders"in X&&X.getAllResponseHeaders()),it={data:!S||S==="text"||S==="json"?X.responseText:X.response,status:X.status,statusText:X.statusText,headers:Te,config:e,request:X};f_(function(nt){n(nt),ve()},function(nt){u(nt),ve()},it),X=null}"onloadend"in X?X.onloadend=ee:X.onreadystatechange=function(){!X||X.readyState!==4||X.status===0&&!(X.responseURL&&X.responseURL.indexOf("file:")===0)||setTimeout(ee)},X.onabort=function(){X&&(u(new Mt("Request aborted",Mt.ECONNABORTED,e,X)),X=null)},X.onerror=function(Ae){let it=Ae&&Ae.message?Ae.message:"Network Error",Ge=new Mt(it,Mt.ERR_NETWORK,e,X);Ge.event=Ae||null,u(Ge),X=null},X.ontimeout=function(){let Ae=c.timeout?"timeout of "+c.timeout+"ms exceeded":"timeout exceeded",it=c.transitional||AS;c.timeoutErrorMessage&&(Ae=c.timeoutErrorMessage),u(new Mt(Ae,it.clarifyTimeoutError?Mt.ETIMEDOUT:Mt.ECONNABORTED,e,X)),X=null},a===void 0&&x.setContentType(null),"setRequestHeader"in X&&Ce.forEach(x.toJSON(),function(Ae,it){X.setRequestHeader(it,Ae)}),Ce.isUndefined(c.withCredentials)||(X.withCredentials=!!c.withCredentials),S&&S!=="json"&&(X.responseType=c.responseType),R&&([H,de]=Lp(R,!0),X.addEventListener("progress",H)),A&&X.upload&&([L,ce]=Lp(A),X.upload.addEventListener("progress",L),X.upload.addEventListener("loadend",ce)),(c.cancelToken||c.signal)&&(D=Te=>{X&&(u(!Te||Te.type?new Rs(null,e,X):Te),X.abort(),X=null)},c.cancelToken&&c.cancelToken.subscribe(D),c.signal&&(c.signal.aborted?D():c.signal.addEventListener("abort",D)));let oe=FL(c.url);if(oe&&Vr.protocols.indexOf(oe)===-1){u(new Mt("Unsupported protocol "+oe+":",Mt.ERR_BAD_REQUEST,e));return}X.send(a||null)})};p();p();var Igt=(e,t)=>{let{length:n}=e=e?e.filter(Boolean):[];if(t||n){let u=new AbortController,c,a=function(R){if(!c){c=!0,S();let D=R instanceof Error?R:this.reason;u.abort(D instanceof Mt?D:new Rs(D instanceof Error?D.message:D))}},x=t&&setTimeout(()=>{x=null,a(new Mt(`timeout ${t} of ms exceeded`,Mt.ETIMEDOUT))},t),S=()=>{e&&(x&&clearTimeout(x),x=null,e.forEach(R=>{R.unsubscribe?R.unsubscribe(a):R.removeEventListener("abort",a)}),e=null)};e.forEach(R=>R.addEventListener("abort",a));let{signal:A}=u;return A.unsubscribe=()=>Ce.asap(S),A}},ufe=Igt;p();var qgt=function*(e,t){let n=e.byteLength;if(!t||n<t){yield e;return}let u=0,c;for(;u<n;)c=u+t,yield e.slice(u,c),u=c},Pgt=function(e,t){return rE(this,null,function*(){try{for(var n=$F(Agt(e)),u,c,a;u=!(c=yield new Vc(n.next())).done;u=!1){let x=c.value;yield*iE(qgt(x,t))}}catch(c){a=[c]}finally{try{u&&(c=n.return)&&(yield new Vc(c.call(n)))}finally{if(a)throw a[0]}}})},Agt=function(e){return rE(this,null,function*(){if(e[Symbol.asyncIterator]){yield*iE(e);return}let t=e.getReader();try{for(;;){let{done:n,value:u}=yield new Vc(t.read());if(n)break;yield u}}finally{yield new Vc(t.cancel())}})},$L=(e,t,n,u)=>{let c=Pgt(e,t),a=0,x,S=R=>{x||(x=!0,u&&u(R))};return new ReadableStream({pull(R){return $r(this,null,function*(){try{let{done:D,value:L}=yield c.next();if(D){S(),R.close();return}let H=L.byteLength;if(n){let ce=a+=H;n(ce)}R.enqueue(new Uint8Array(L))}catch(D){throw S(D),D}})},cancel(R){return S(R),c.return()}},{highWaterMark:2})};var cfe=64*1024,{isFunction:OS}=Ce,Cgt=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ce.global),{ReadableStream:hfe,TextEncoder:dfe}=Ce.global,ffe=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},Mgt=e=>{e=Ce.merge.call({skipUndefined:!0},Cgt,e);let{fetch:t,Request:n,Response:u}=e,c=t?OS(t):typeof fetch=="function",a=OS(n),x=OS(u);if(!c)return!1;let S=c&&OS(hfe),A=c&&(typeof dfe=="function"?(de=>ve=>de.encode(ve))(new dfe):de=>$r(null,null,function*(){return new Uint8Array(yield new n(de).arrayBuffer())})),R=a&&S&&ffe(()=>{let de=!1,ve=new n(Vr.origin,{body:new hfe,method:"POST",get duplex(){return de=!0,"half"}}).headers.has("Content-Type");return de&&!ve}),D=x&&S&&ffe(()=>Ce.isReadableStream(new u("").body)),L={stream:D&&(de=>de.body)};c&&["text","arrayBuffer","blob","formData","stream"].forEach(de=>{!L[de]&&(L[de]=(ve,X)=>{let ee=ve&&ve[de];if(ee)return ee.call(ve);throw new Mt(`Response type '${de}' is not supported`,Mt.ERR_NOT_SUPPORT,X)})});let H=de=>$r(null,null,function*(){if(de==null)return 0;if(Ce.isBlob(de))return de.size;if(Ce.isSpecCompliantForm(de))return(yield new n(Vr.origin,{method:"POST",body:de}).arrayBuffer()).byteLength;if(Ce.isArrayBufferView(de)||Ce.isArrayBuffer(de))return de.byteLength;if(Ce.isURLSearchParams(de)&&(de=de+""),Ce.isString(de))return(yield A(de)).byteLength}),ce=(de,ve)=>$r(null,null,function*(){let X=Ce.toFiniteNumber(de.getContentLength());return X==null?H(ve):X});return de=>$r(null,null,function*(){let{url:ve,method:X,data:ee,signal:oe,cancelToken:Te,timeout:Ae,onDownloadProgress:it,onUploadProgress:Ge,responseType:nt,headers:dt,withCredentials:gt="same-origin",fetchOptions:Mr}=RS(de),qn=t||fetch;nt=nt?(nt+"").toLowerCase():"text";let ka=ufe([oe,Te&&Te.toAbortSignal()],Ae),Pn=null,Hi=ka&&ka.unsubscribe&&(()=>{ka.unsubscribe()}),Da;try{if(Ge&&R&&X!=="get"&&X!=="head"&&(Da=yield ce(dt,ee))!==0){let ai=new n(ve,{method:"POST",body:ee,duplex:"half"}),Xi;if(Ce.isFormData(ee)&&(Xi=ai.headers.get("content-type"))&&dt.setContentType(Xi),ai.body){let[ha,oi]=NL(Da,Lp(BL(Ge)));ee=$L(ai.body,cfe,ha,oi)}}Ce.isString(gt)||(gt=gt?"include":"omit");let Ki=a&&"credentials"in n.prototype,Jt=Qm(Kn({},Mr),{signal:ka,method:X.toUpperCase(),headers:dt.normalize().toJSON(),body:ee,duplex:"half",credentials:Ki?gt:void 0});Pn=a&&new n(ve,Jt);let zi=yield a?qn(Pn,Mr):qn(ve,Jt),ni=D&&(nt==="stream"||nt==="response");if(D&&(it||ni&&Hi)){let ai={};["status","statusText","headers"].forEach(po=>{ai[po]=zi[po]});let Xi=Ce.toFiniteNumber(zi.headers.get("content-length")),[ha,oi]=it&&NL(Xi,Lp(BL(it),!0))||[];zi=new u($L(zi.body,cfe,ha,()=>{oi&&oi(),Hi&&Hi()}),ai)}nt=nt||"text";let fo=yield L[Ce.findKey(L,nt)||"text"](zi,de);return!ni&&Hi&&Hi(),yield new Promise((ai,Xi)=>{f_(ai,Xi,{data:fo,headers:Li.from(zi.headers),status:zi.status,statusText:zi.statusText,config:de,request:Pn})})}catch(Ki){throw Hi&&Hi(),Ki&&Ki.name==="TypeError"&&/Load failed|fetch/i.test(Ki.message)?Object.assign(new Mt("Network Error",Mt.ERR_NETWORK,de,Pn),{cause:Ki.cause||Ki}):Mt.from(Ki,Ki&&Ki.code,de,Pn)}})},Rgt=new Map,VL=e=>{let t=e?e.env:{},{fetch:n,Request:u,Response:c}=t,a=[u,c,n],x=a.length,S=x,A,R,D=Rgt;for(;S--;)A=a[S],R=D.get(A),R===void 0&&D.set(A,R=S?new Map:Mgt(t)),D=R;return R},FYt=VL();var GL={http:qS,xhr:lfe,fetch:{get:VL}};Ce.forEach(GL,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});var pfe=e=>`- ${e}`,kgt=e=>Ce.isFunction(e)||e===null||e===!1,kS={getAdapter:(e,t)=>{e=Ce.isArray(e)?e:[e];let{length:n}=e,u,c,a={};for(let x=0;x<n;x++){u=e[x];let S;if(c=u,!kgt(u)&&(c=GL[(S=String(u)).toLowerCase()],c===void 0))throw new Mt(`Unknown adapter '${S}'`);if(c&&(Ce.isFunction(c)||(c=c.get(t))))break;a[S||"#"+x]=c}if(!c){let x=Object.entries(a).map(([A,R])=>`adapter ${A} `+(R===!1?"is not supported by the environment":"is not available in the build")),S=n?x.length>1?`since :
`+x.map(pfe).join(`
`):" "+pfe(x[0]):"as no adapter specified";throw new Mt("There is no suitable adapter to dispatch the request "+S,"ERR_NOT_SUPPORT")}return c},adapters:GL};function ZL(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Rs(null,e)}function DS(e){return ZL(e),e.headers=Li.from(e.headers),e.data=h_.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),kS.getAdapter(e.adapter||kp.adapter,e)(e).then(function(u){return ZL(e),u.data=h_.call(e,e.transformResponse,u),u.headers=Li.from(u.headers),u},function(u){return d_(u)||(ZL(e),u&&u.response&&(u.response.data=h_.call(e,e.transformResponse,u.response),u.response.headers=Li.from(u.response.headers))),Promise.reject(u)})}p();p();var LS="1.12.2";var zS={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{zS[e]=function(u){return typeof u===e||"a"+(t<1?"n ":" ")+e}});var mfe={};zS.transitional=function(t,n,u){function c(a,x){return"[Axios v"+LS+"] Transitional option '"+a+"'"+x+(u?". "+u:"")}return(a,x,S)=>{if(t===!1)throw new Mt(c(x," has been removed"+(n?" in "+n:"")),Mt.ERR_DEPRECATED);return n&&!mfe[x]&&(mfe[x]=!0,console.warn(c(x," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,x,S):!0}};zS.spelling=function(t){return(n,u)=>(console.warn(`${u} is likely a misspelling of ${t}`),!0)};function Dgt(e,t,n){if(typeof e!="object")throw new Mt("options must be an object",Mt.ERR_BAD_OPTION_VALUE);let u=Object.keys(e),c=u.length;for(;c-->0;){let a=u[c],x=t[a];if(x){let S=e[a],A=S===void 0||x(S,a,e);if(A!==!0)throw new Mt("option "+a+" must be "+A,Mt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Mt("Unknown option "+a,Mt.ERR_BAD_OPTION)}}var m_={assertOptions:Dgt,validators:zS};var Os=m_.validators,zp=class{constructor(t){this.defaults=t||{},this.interceptors={request:new ML,response:new ML}}request(t,n){return $r(this,null,function*(){try{return yield this._request(t,n)}catch(u){if(u instanceof Error){let c={};Error.captureStackTrace?Error.captureStackTrace(c):c=new Error;let a=c.stack?c.stack.replace(/^.+\n/,""):"";try{u.stack?a&&!String(u.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(u.stack+=`
`+a):u.stack=a}catch(x){}}throw u}})}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Uo(this.defaults,n);let{transitional:u,paramsSerializer:c,headers:a}=n;u!==void 0&&m_.assertOptions(u,{silentJSONParsing:Os.transitional(Os.boolean),forcedJSONParsing:Os.transitional(Os.boolean),clarifyTimeoutError:Os.transitional(Os.boolean)},!1),c!=null&&(Ce.isFunction(c)?n.paramsSerializer={serialize:c}:m_.assertOptions(c,{encode:Os.function,serialize:Os.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),m_.assertOptions(n,{baseUrl:Os.spelling("baseURL"),withXsrfToken:Os.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let x=a&&Ce.merge(a.common,a[n.method]);a&&Ce.forEach(["delete","get","head","post","put","patch","common"],de=>{delete a[de]}),n.headers=Li.concat(x,a);let S=[],A=!0;this.interceptors.request.forEach(function(ve){typeof ve.runWhen=="function"&&ve.runWhen(n)===!1||(A=A&&ve.synchronous,S.unshift(ve.fulfilled,ve.rejected))});let R=[];this.interceptors.response.forEach(function(ve){R.push(ve.fulfilled,ve.rejected)});let D,L=0,H;if(!A){let de=[DS.bind(this),void 0];for(de.unshift(...S),de.push(...R),H=de.length,D=Promise.resolve(n);L<H;)D=D.then(de[L++],de[L++]);return D}H=S.length;let ce=n;for(;L<H;){let de=S[L++],ve=S[L++];try{ce=de(ce)}catch(X){ve.call(this,X);break}}try{D=DS.call(this,ce)}catch(de){return Promise.reject(de)}for(L=0,H=R.length;L<H;)D=D.then(R[L++],R[L++]);return D}getUri(t){t=Uo(this.defaults,t);let n=p_(t.baseURL,t.url,t.allowAbsoluteUrls);return u_(n,t.params,t.paramsSerializer)}};Ce.forEach(["delete","get","head","options"],function(t){zp.prototype[t]=function(n,u){return this.request(Uo(u||{},{method:t,url:n,data:(u||{}).data}))}});Ce.forEach(["post","put","patch"],function(t){function n(u){return function(a,x,S){return this.request(Uo(S||{},{method:t,headers:u?{"Content-Type":"multipart/form-data"}:{},url:a,data:x}))}}zp.prototype[t]=n(),zp.prototype[t+"Form"]=n(!0)});var g_=zp;p();var WL=class e{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});let u=this;this.promise.then(c=>{if(!u._listeners)return;let a=u._listeners.length;for(;a-->0;)u._listeners[a](c);u._listeners=null}),this.promise.then=c=>{let a,x=new Promise(S=>{u.subscribe(S),a=S}).then(c);return x.cancel=function(){u.unsubscribe(a)},x},t(function(a,x,S){u.reason||(u.reason=new Rs(a,x,S),n(u.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;let n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){let t=new AbortController,n=u=>{t.abort(u)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new e(function(c){t=c}),cancel:t}}},gfe=WL;p();function HL(e){return function(n){return e.apply(null,n)}}p();function KL(e){return Ce.isObject(e)&&e.isAxiosError===!0}p();var XL={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(XL).forEach(([e,t])=>{XL[t]=e});var vfe=XL;function yfe(e){let t=new g_(e),n=a_(g_.prototype.request,t);return Ce.extend(n,g_.prototype,t,{allOwnKeys:!0}),Ce.extend(n,t,null,{allOwnKeys:!0}),n.create=function(c){return yfe(Uo(e,c))},n}var Ei=yfe(kp);Ei.Axios=g_;Ei.CanceledError=Rs;Ei.CancelToken=gfe;Ei.isCancel=d_;Ei.VERSION=LS;Ei.toFormData=uc;Ei.AxiosError=Mt;Ei.Cancel=Ei.CanceledError;Ei.all=function(t){return Promise.all(t)};Ei.spread=HL;Ei.isAxiosError=KL;Ei.mergeConfig=Uo;Ei.AxiosHeaders=Li;Ei.formToJSON=e=>CS(Ce.isHTMLForm(e)?new FormData(e):e);Ei.getAdapter=kS.getAdapter;Ei.HttpStatusCode=vfe;Ei.default=Ei;var Fp=Ei;var{Axios:HJt,AxiosError:KJt,CanceledError:XJt,isCancel:YJt,CancelToken:JJt,VERSION:QJt,all:eQt,Cancel:tQt,isAxiosError:rQt,spread:iQt,toFormData:nQt,AxiosHeaders:aQt,HttpStatusCode:oQt,formToJSON:sQt,getAdapter:lQt,mergeConfig:uQt}=Fp;p();var v_=cs(QL(),1);p();p();var tvt=cs(Afe(),1);p();p();p();p();p();p();p();var ivt=cs(QL(),1);function Np(e){return e!=null}function Cfe(e){return typeof e=="string"||e instanceof String}function ri(e){let t=Ii.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let n=t[e];return n===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):n}var nvt={EN:"en",DE:"de"},avt=Np(I.env.DEV_MODE_SECRET)&&I.env.DEV_MODE_SECRET!==""&&Np(I.env.DEV_MODE_NAME)&&I.env.DEV_MODE_NAME!=="",NS=()=>({"Dev-Mode-Secret":I.env.DEV_MODE_SECRET,"Dev-Mode-Name":I.env.DEV_MODE_NAME}),$n={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:nvt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},Ii={axiosApiInstance:null,appendSettings(e){$n=Object.assign({},$n,e)},isDebug(){var e;return!!((e=I==null?void 0:I.env)!=null&&e.VKF_DEBUG)},getSettings(){return $n},getBaseMaps(){return $n.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},$n.MAPVIEW_PARAMS)},getLanguageDict(){return $n.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return $n.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},$n.TERRAIN_TILES)},getUsername(){return $n.USERNAME},isUserAuthenticated(){return $n.USER_ISAUTHENTICATED===!0},updateSettings(e){$n=e},_initAxiosApiInstance(){let e=$n.API_GEOREFERENCE_BASEURL,t=Cfe(e)&&e.length===0;if(!Np(e)||t)throw new Error("The URL for the georeference service is not set.");let n=Object.assign({baseURL:e,withCredentials:!0},avt?{headers:{get:NS(),post:NS(),put:NS(),delete:NS()}}:{});this.axiosApiInstance=Fp.create(n)},getGeoreferenceApiClient(){return Np(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=$n.MARKER_URL;if(!Np(e))throw new Error("The marker icon url is not set.");return{id:$n.MARKER_IMAGE_ID,url:e}},getUserRole(){return $n.USER_ROLE}};p();var ii=cs(Gc(),1);p();function BS(){return $r(this,null,function*(){let n=yield Ii.getGeoreferenceApiClient().get("/statistics/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch statistics from the georeference endpoint.")})}function Mfe(){return $r(this,null,function*(){let n=yield Ii.getGeoreferenceApiClient().get("/user/history/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch the user history from the georeference endpoint.")})}var ovt=()=>{let[e,t]=(0,ii.useState)([]);return(0,ii.useEffect)(()=>{$r(null,null,function*(){let u=yield BS();t(u.georeference_points)})},[]),ii.default.createElement("div",{className:"vkf-apps-georeferenceranking"},ii.default.createElement("div",{className:"table-wrapper"},ii.default.createElement("table",null,ii.default.createElement("thead",null,ii.default.createElement("tr",null,ii.default.createElement("th",{className:"rank"},ri("georeferenceranking-label-place")),ii.default.createElement("th",{className:"user"},ri("georeferenceranking-label-user")),ii.default.createElement("th",{className:"transformation-new"},ri("georeferenceranking-label-transformation-new")),ii.default.createElement("th",{className:"transformation-update"},ri("georeferenceranking-label-transformation-update")),ii.default.createElement("th",{className:"points"},ri("georeferenceranking-label-points")))),ii.default.createElement("tbody",null,e.map((n,u)=>ii.default.createElement("tr",{key:u},ii.default.createElement("td",{className:"rank"},u+1),ii.default.createElement("td",{className:"user"},n.user_id),ii.default.createElement("td",{className:"transformation-new"},n.transformation_new),ii.default.createElement("td",{className:"transformation-update"},n.transformation_updates),ii.default.createElement("td",{className:"points"},n.total_points)))))))},Rfe=ovt;p();var fr=cs(Gc(),1);var svt=()=>{let[e,t]=(0,fr.useState)(null),n=Ii.getSettings().LANGUAGE_CODE;return(0,fr.useEffect)(()=>{$r(null,null,function*(){let c=yield BS();console.log(c);let a=c.georeference_map_count,x=c.not_georeference_map_count;t({mapsDone:a,mapsTodo:x,progress:Math.floor(a/(a+x)*100),ranking:c.georeference_points,totalPoints:a+x})})},[t]),fr.default.createElement("div",{className:"vkf-apps-progressbar"},e!==null&&fr.default.createElement("div",null,fr.default.createElement("div",{className:"progressbar-container"},fr.default.createElement("h4",null,n==="de"?"Fortschritt in der Georeferenzierung":"Progress in georeferencing"),fr.default.createElement("p",{className:"results"},n==="de"?fr.default.createElement("span",null,"Bereits ",fr.default.createElement("strong",null,e.mapsDone)," von"," ",fr.default.createElement("strong",null,e.totalPoints)," Karten georeferenziert."):fr.default.createElement("span",null,"Already ",fr.default.createElement("strong",null,e.mapsDone)," of"," ",fr.default.createElement("strong",null,e.totalPoints)," maps georeferenced.")),fr.default.createElement("div",{className:"bar"},fr.default.createElement("div",{className:"done",style:{width:`${e.progress}%`}}))),fr.default.createElement("div",{className:"overview-ranking"},fr.default.createElement("div",null,fr.default.createElement("h4",null,n==="de"?"Die Top-Georeferenzierer":"The Top-Georeferencer"),fr.default.createElement("ol",null,e.ranking.slice(0,3).map((u,c)=>fr.default.createElement("li",{key:c},fr.default.createElement("span",null,fr.default.createElement("strong",{className:"user"},u.user_id,":")," ",u.total_points," ",n==="de"?"Punkte":"points"))),e.ranking.length>3&&fr.default.createElement("li",{className:"further-items"},"[...]")),fr.default.createElement("div",{className:"forwarding"},fr.default.createElement("p",null,n==="de"?"Jetzt mithelfen und selbst Punkte sammeln.":"Take part and collect points.","\xA0",fr.default.createElement("a",{title:"Frequently Asked Questions (FAQ)",href:Ii.getSettings().LINK_TO_FAQ},n==="de"?"So einfach geht's":"Start now.")))))))},Ofe=svt;p();var er=cs(Gc(),1);p();function kfe(e=500){return $r(this,null,function*(){let t=Ii.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let n=yield Fp.post(`${t}/_search?size=${e}`,{query:{term:{has_georeference:!1}}});return n.status===200&&n.data.hits.total.value>0?n.data.hits.hits.map(u=>u._source):(console.error("Something went wrong while trying to fetch search document."),[])})}p();p();var lvt=Math.pow(10,8)*24*60*60*1e3,mtr=-lvt;var uvt=3600;var Dfe=uvt*24,gtr=Dfe*7,cvt=Dfe*365.2425,hvt=cvt/12,vtr=hvt*3,tz=Symbol.for("constructDateFrom");function jS(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&tz in e?e[tz](t):e instanceof Date?new e.constructor(t):new Date(t)}p();function Bp(e,t){return jS(t||e,e)}p();function Lfe(e,...t){let n=jS.bind(null,e||t.find(u=>typeof u=="object"));return t.map(n)}p();function rz(e,t){let n=Bp(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}p();function iz(e,t,n){let[u,c]=Lfe(n==null?void 0:n.in,e,t);return+rz(u)==+rz(c)}p();function zfe(e,t){let n=Bp(e,t==null?void 0:t.in),u=n.getFullYear();return n.setFullYear(u+1,0,0),n.setHours(23,59,59,999),n}p();function Ffe(e,t){let n=Bp(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}var dvt=(e,t)=>{let n=Ffe(e),u=zfe(e);return iz(e,n)&&iz(t,u)?e:`${e} \u2013 ${t}`},fvt=()=>{let[e,t]=(0,er.useState)([]),[n,u]=(0,er.useState)([]),[c,a]=(0,er.useState)(""),x=Ii.getSettings().USERNAME,S=Ii.getSettings().LINK_TO_GEOREFERENCE,A=(0,er.useRef)(null),R=D=>{let L=D.target.value;a(L),A.current!==null&&(clearTimeout(A.current),A.current=null),A.current=setTimeout(()=>{u(e.filter(H=>H.title.toLowerCase().includes(L.toLowerCase())))},200)};return(0,er.useEffect)(()=>{$r(null,null,function*(){let L=yield kfe();t(L),u(L)})},[]),er.default.createElement("div",{className:"vkf-apps-unreferenced-maps"},er.default.createElement("h3",null,ri("unreferencedmaps-title")," #",x),er.default.createElement("span",{className:"status-feedback"},ri("unreferencedmaps-subtitle"),": ",e.length),er.default.createElement("div",{className:"quick-search"},er.default.createElement("label",{htmlFor:"quick-search-field"},ri("unreferencedmaps-search-placeholder")),er.default.createElement("input",{id:"quick-search-field",value:c,onChange:R,type:"text",placeholder:ri("unreferencedmaps-search-placeholder")})),er.default.createElement("ul",{className:"maps-list"},n.map((D,L)=>er.default.createElement("li",{key:L,className:"map-item"},er.default.createElement("figure",{className:"map-image"},er.default.createElement("a",{href:`${S}?map_id=${D.map_id}`,target:"_blank",rel:"noreferrer"},er.default.createElement("img",{alt:"Map Image",src:D.thumb_url,loading:"lazy"}))),er.default.createElement("div",{className:"map-meta"},er.default.createElement("h4",null,D.title),er.default.createElement("p",null,er.default.createElement("span",{className:"map-meta-label"},ri("unreferencedmaps-label-time"),":"," "),er.default.createElement("span",{className:"map-meta-value"},dvt(D.time_period_start,D.time_period_end))),er.default.createElement("p",null,er.default.createElement("span",{className:"map-meta-label"},ri("unreferencedmaps-label-maptype"),":"," "),er.default.createElement("span",{className:"map-meta-value"},D.map_type)),er.default.createElement("p",null,er.default.createElement("span",{className:"map-meta-label"},"ID: "),er.default.createElement("span",{className:"map-meta-value"},D.map_id))),er.default.createElement("div",{className:"map-links"},er.default.createElement("a",{href:`${S}?map_id=${D.map_id}`,target:"_blank",rel:"noreferrer"},ri("unreferencedmaps-btn-georeference")))))))},Nfe=fvt;p();var Sr=cs(Gc(),1);p();function Bfe(e){var t,n,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Bfe(e[t]))&&(u&&(u+=" "),u+=n);else for(t in e)e[t]&&(u&&(u+=" "),u+=t);return u}function pvt(){for(var e,t,n=0,u="";n<arguments.length;)(e=arguments[n++])&&(t=Bfe(e))&&(u&&(u+=" "),u+=t);return u}var jfe=pvt;var mvt={valid:"label-success",invalid:"label-warning",missing:"label-danger"},gvt=()=>{let[e,t]=(0,Sr.useState)({maps:[],points:0}),n=Ii.getSettings().USERNAME,u=Ii.getSettings().LINK_TO_GEOREFERENCE,c=Ii.getSettings().LINK_TO_MAIN;return(0,Sr.useEffect)(()=>{$r(null,null,function*(){let x=yield Mfe();t({maps:x.georef_profile,points:x.points})})},[]),Sr.default.createElement("div",{className:"vkf-apps-userhistory"},Sr.default.createElement("h3",null,ri("userhistory-title")," #",n),Sr.default.createElement("span",{className:"status-feedback"},ri("userhistory-subtitle"),": ",e.points),Sr.default.createElement("ul",{className:"maps-list"},e.maps.map((a,x)=>Sr.default.createElement("li",{key:x,className:"map-item"},Sr.default.createElement("figure",{className:"map-image"},Sr.default.createElement("img",{alt:"Map Image",src:a.metadata.thumbnail,loading:"lazy"})),Sr.default.createElement("div",{className:"map-meta"},Sr.default.createElement("h4",null,a.metadata.title),Sr.default.createElement("p",null,Sr.default.createElement("span",{className:"map-meta-label"},"Created: "),Sr.default.createElement("span",{className:"map-meta-value"},a.transformation.submitted)),Sr.default.createElement("p",null,Sr.default.createElement("span",{className:"map-meta-label"},ri("userhistory-label-mapId"),":"," "),Sr.default.createElement("span",{className:"map-meta-value"},a.map_id)),Sr.default.createElement("p",null,Sr.default.createElement("span",{className:"map-meta-label"},ri("userhistory-label-validation"),":"," "),Sr.default.createElement("span",{className:jfe("label",mvt[a.transformation.validation])},a.transformation.validation))),Sr.default.createElement("div",{className:"map-links"},Sr.default.createElement("a",{href:`${c}?map_id=${a.map_id}`,target:"_blank",rel:"noreferrer"},ri("userhistory-link-showMap")),Sr.default.createElement("a",{href:`${u}?transformation_id=${a.transformation.id}&map_id=${a.map_id}`,rel:"noreferrer",target:"_blank"},ri("userhistory-link-goToProcess")))))))},Ufe=gvt;var vvt=Ii;function yvt(e){__.default.render(y_.default.createElement(Rfe,null),e)}function _vt(e){__.default.render(y_.default.createElement(Ofe,null),e)}function xvt(e){__.default.render(y_.default.createElement(Nfe,null),e)}function bvt(e){__.default.render(y_.default.createElement(Ufe,null),e)}return Zme(wvt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.7.1/LICENSE.txt
   *)
*/