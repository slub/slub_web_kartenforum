var vk2=(()=>{var jhe=Object.create;var rm=Object.defineProperty,Uhe=Object.defineProperties,$he=Object.getOwnPropertyDescriptor,Vhe=Object.getOwnPropertyDescriptors,Ghe=Object.getOwnPropertyNames,OD=Object.getOwnPropertySymbols,Hhe=Object.getPrototypeOf,DD=Object.prototype.hasOwnProperty,Whe=Object.prototype.propertyIsEnumerable;var i_=Math.pow,RD=(e,t,n)=>t in e?rm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,xS=(e,t)=>{for(var n in t||(t={}))DD.call(t,n)&&RD(e,n,t[n]);if(OD)for(var n of OD(t))Whe.call(t,n)&&RD(e,n,t[n]);return e},bS=(e,t)=>Uhe(e,Vhe(t));var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Zhe=(e,t)=>{for(var n in t)rm(e,n,{get:t[n],enumerable:!0})},LD=(e,t,n,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of Ghe(t))!DD.call(e,c)&&c!==n&&rm(e,c,{get:()=>t[c],enumerable:!(u=$he(t,c))||u.enumerable});return e};var ro=(e,t,n)=>(n=e!=null?jhe(Hhe(e)):{},LD(t||!e||!e.__esModule?rm(n,"default",{value:e,enumerable:!0}):n,e)),Khe=e=>LD(rm({},"__esModule",{value:!0}),e);var na=(e,t,n)=>new Promise((u,c)=>{var s=E=>{try{w(n.next(E))}catch(P){c(P)}},_=E=>{try{w(n.throw(E))}catch(P){c(P)}},w=E=>E.done?u(E.value):Promise.resolve(E.value).then(s,_);w((n=n.apply(e,t)).next())});var wS=I((gct,FD)=>{"use strict";var zD=Object.getOwnPropertySymbols,Xhe=Object.prototype.hasOwnProperty,Yhe=Object.prototype.propertyIsEnumerable;function Jhe(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Qhe(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var u=Object.getOwnPropertyNames(t).map(function(s){return t[s]});if(u.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(s){c[s]=s}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch(s){return!1}}FD.exports=Qhe()?Object.assign:function(e,t){for(var n,u=Jhe(e),c,s=1;s<arguments.length;s++){n=Object(arguments[s]);for(var _ in n)Xhe.call(n,_)&&(u[_]=n[_]);if(zD){c=zD(n);for(var w=0;w<c.length;w++)Yhe.call(n,c[w])&&(u[c[w]]=n[c[w]])}}return u}});var eL=I(Wt=>{"use strict";var qS=wS(),ef=60103,jD=60106;Wt.Fragment=60107;Wt.StrictMode=60108;Wt.Profiler=60114;var UD=60109,$D=60110,VD=60112;Wt.Suspense=60113;var GD=60115,HD=60116;typeof Symbol=="function"&&Symbol.for&&(Sa=Symbol.for,ef=Sa("react.element"),jD=Sa("react.portal"),Wt.Fragment=Sa("react.fragment"),Wt.StrictMode=Sa("react.strict_mode"),Wt.Profiler=Sa("react.profiler"),UD=Sa("react.provider"),$D=Sa("react.context"),VD=Sa("react.forward_ref"),Wt.Suspense=Sa("react.suspense"),GD=Sa("react.memo"),HD=Sa("react.lazy"));var Sa,ND=typeof Symbol=="function"&&Symbol.iterator;function efe(e){return e===null||typeof e!="object"?null:(e=ND&&e[ND]||e["@@iterator"],typeof e=="function"?e:null)}function im(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZD={};function tf(e,t,n){this.props=e,this.context=t,this.refs=ZD,this.updater=n||WD}tf.prototype.isReactComponent={};tf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(im(85));this.updater.enqueueSetState(this,e,t,"setState")};tf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function KD(){}KD.prototype=tf.prototype;function IS(e,t,n){this.props=e,this.context=t,this.refs=ZD,this.updater=n||WD}var ES=IS.prototype=new KD;ES.constructor=IS;qS(ES,tf.prototype);ES.isPureReactComponent=!0;var TS={current:null},XD=Object.prototype.hasOwnProperty,YD={key:!0,ref:!0,__self:!0,__source:!0};function JD(e,t,n){var u,c={},s=null,_=null;if(t!=null)for(u in t.ref!==void 0&&(_=t.ref),t.key!==void 0&&(s=""+t.key),t)XD.call(t,u)&&!YD.hasOwnProperty(u)&&(c[u]=t[u]);var w=arguments.length-2;if(w===1)c.children=n;else if(1<w){for(var E=Array(w),P=0;P<w;P++)E[P]=arguments[P+2];c.children=E}if(e&&e.defaultProps)for(u in w=e.defaultProps,w)c[u]===void 0&&(c[u]=w[u]);return{$$typeof:ef,type:e,key:s,ref:_,props:c,_owner:TS.current}}function tfe(e,t){return{$$typeof:ef,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function AS(e){return typeof e=="object"&&e!==null&&e.$$typeof===ef}function rfe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var BD=/\/+/g;function SS(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rfe(""+e.key):t.toString(36)}function a_(e,t,n,u,c){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var _=!1;if(e===null)_=!0;else switch(s){case"string":case"number":_=!0;break;case"object":switch(e.$$typeof){case ef:case jD:_=!0;}}if(_)return _=e,c=c(_),e=u===""?"."+SS(_,0):u,Array.isArray(c)?(n="",e!=null&&(n=e.replace(BD,"$&/")+"/"),a_(c,t,n,"",function(P){return P})):c!=null&&(AS(c)&&(c=tfe(c,n+(!c.key||_&&_.key===c.key?"":(""+c.key).replace(BD,"$&/")+"/")+e)),t.push(c)),1;if(_=0,u=u===""?".":u+":",Array.isArray(e))for(var w=0;w<e.length;w++){s=e[w];var E=u+SS(s,w);_+=a_(s,t,n,E,c)}else if(E=efe(e),typeof E=="function")for(e=E.call(e),w=0;!(s=e.next()).done;)s=s.value,E=u+SS(s,w++),_+=a_(s,t,n,E,c);else if(s==="object")throw t=""+e,Error(im(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return _}function n_(e,t,n){if(e==null)return e;var u=[],c=0;return a_(e,u,"","",function(s){return t.call(n,s,c++)}),u}function ife(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var QD={current:null};function _s(){var e=QD.current;if(e===null)throw Error(im(321));return e}var nfe={ReactCurrentDispatcher:QD,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:TS,IsSomeRendererActing:{current:!1},assign:qS};Wt.Children={map:n_,forEach:function(e,t,n){n_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return n_(e,function(){t++}),t},toArray:function(e){return n_(e,function(t){return t})||[]},only:function(e){if(!AS(e))throw Error(im(143));return e}};Wt.Component=tf;Wt.PureComponent=IS;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=nfe;Wt.cloneElement=function(e,t,n){if(e==null)throw Error(im(267,e));var u=qS({},e.props),c=e.key,s=e.ref,_=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,_=TS.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var w=e.type.defaultProps;for(E in t)XD.call(t,E)&&!YD.hasOwnProperty(E)&&(u[E]=t[E]===void 0&&w!==void 0?w[E]:t[E])}var E=arguments.length-2;if(E===1)u.children=n;else if(1<E){w=Array(E);for(var P=0;P<E;P++)w[P]=arguments[P+2];u.children=w}return{$$typeof:ef,type:e.type,key:c,ref:s,props:u,_owner:_}};Wt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:$D,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:UD,_context:e},e.Consumer=e};Wt.createElement=JD;Wt.createFactory=function(e){var t=JD.bind(null,e);return t.type=e,t};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(e){return{$$typeof:VD,render:e}};Wt.isValidElement=AS;Wt.lazy=function(e){return{$$typeof:HD,_payload:{_status:-1,_result:e},_init:ife}};Wt.memo=function(e,t){return{$$typeof:GD,type:e,compare:t===void 0?null:t}};Wt.useCallback=function(e,t){return _s().useCallback(e,t)};Wt.useContext=function(e,t){return _s().useContext(e,t)};Wt.useDebugValue=function(){};Wt.useEffect=function(e,t){return _s().useEffect(e,t)};Wt.useImperativeHandle=function(e,t,n){return _s().useImperativeHandle(e,t,n)};Wt.useLayoutEffect=function(e,t){return _s().useLayoutEffect(e,t)};Wt.useMemo=function(e,t){return _s().useMemo(e,t)};Wt.useReducer=function(e,t,n){return _s().useReducer(e,t,n)};Wt.useRef=function(e){return _s().useRef(e)};Wt.useState=function(e){return _s().useState(e)};Wt.version="17.0.2"});var sc=I((_ct,tL)=>{"use strict";tL.exports=eL()});var sL=I(ir=>{"use strict";var nf,om,l_,DS;typeof performance=="object"&&typeof performance.now=="function"?(rL=performance,ir.unstable_now=function(){return rL.now()}):(PS=Date,iL=PS.now(),ir.unstable_now=function(){return PS.now()-iL});var rL,PS,iL;typeof window=="undefined"||typeof MessageChannel!="function"?(rf=null,CS=null,MS=function(){if(rf!==null)try{var e=ir.unstable_now();rf(!0,e),rf=null}catch(t){throw setTimeout(MS,0),t}},nf=function(e){rf!==null?setTimeout(nf,0,e):(rf=e,setTimeout(MS,0))},om=function(e,t){CS=setTimeout(e,t)},l_=function(){clearTimeout(CS)},ir.unstable_shouldYield=function(){return!1},DS=ir.unstable_forceFrameRate=function(){}):(nL=window.setTimeout,aL=window.clearTimeout,typeof console!="undefined"&&(oL=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof oL!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),nm=!1,am=null,o_=-1,kS=5,OS=0,ir.unstable_shouldYield=function(){return ir.unstable_now()>=OS},DS=function(){},ir.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):kS=0<e?Math.floor(1e3/e):5},RS=new MessageChannel,s_=RS.port2,RS.port1.onmessage=function(){if(am!==null){var e=ir.unstable_now();OS=e+kS;try{am(!0,e)?s_.postMessage(null):(nm=!1,am=null)}catch(t){throw s_.postMessage(null),t}}else nm=!1},nf=function(e){am=e,nm||(nm=!0,s_.postMessage(null))},om=function(e,t){o_=nL(function(){e(ir.unstable_now())},t)},l_=function(){aL(o_),o_=-1});var rf,CS,MS,nL,aL,oL,nm,am,o_,kS,OS,RS,s_;function LS(e,t){var n=e.length;e.push(t);e:for(;;){var u=n-1>>>1,c=e[u];if(c!==void 0&&0<u_(c,t))e[u]=t,e[n]=c,n=u;else break e}}function io(e){return e=e[0],e===void 0?null:e}function c_(e){var t=e[0];if(t!==void 0){var n=e.pop();if(n!==t){e[0]=n;e:for(var u=0,c=e.length;u<c;){var s=2*(u+1)-1,_=e[s],w=s+1,E=e[w];if(_!==void 0&&0>u_(_,n))E!==void 0&&0>u_(E,_)?(e[u]=E,e[w]=n,u=w):(e[u]=_,e[s]=n,u=s);else if(E!==void 0&&0>u_(E,n))e[u]=E,e[w]=n,u=w;else break e}}return t}return null}function u_(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}var Po=[],Ru=[],afe=1,qa=null,Gi=3,h_=!1,uc=!1,sm=!1;function zS(e){for(var t=io(Ru);t!==null;){if(t.callback===null)c_(Ru);else if(t.startTime<=e)c_(Ru),t.sortIndex=t.expirationTime,LS(Po,t);else break;t=io(Ru)}}function FS(e){if(sm=!1,zS(e),!uc)if(io(Po)!==null)uc=!0,nf(NS);else{var t=io(Ru);t!==null&&om(FS,t.startTime-e)}}function NS(e,t){uc=!1,sm&&(sm=!1,l_()),h_=!0;var n=Gi;try{for(zS(t),qa=io(Po);qa!==null&&(!(qa.expirationTime>t)||e&&!ir.unstable_shouldYield());){var u=qa.callback;if(typeof u=="function"){qa.callback=null,Gi=qa.priorityLevel;var c=u(qa.expirationTime<=t);t=ir.unstable_now(),typeof c=="function"?qa.callback=c:qa===io(Po)&&c_(Po),zS(t)}else c_(Po);qa=io(Po)}if(qa!==null)var s=!0;else{var _=io(Ru);_!==null&&om(FS,_.startTime-t),s=!1}return s}finally{qa=null,Gi=n,h_=!1}}var ofe=DS;ir.unstable_IdlePriority=5;ir.unstable_ImmediatePriority=1;ir.unstable_LowPriority=4;ir.unstable_NormalPriority=3;ir.unstable_Profiling=null;ir.unstable_UserBlockingPriority=2;ir.unstable_cancelCallback=function(e){e.callback=null};ir.unstable_continueExecution=function(){uc||h_||(uc=!0,nf(NS))};ir.unstable_getCurrentPriorityLevel=function(){return Gi};ir.unstable_getFirstCallbackNode=function(){return io(Po)};ir.unstable_next=function(e){switch(Gi){case 1:case 2:case 3:var t=3;break;default:t=Gi;}var n=Gi;Gi=t;try{return e()}finally{Gi=n}};ir.unstable_pauseExecution=function(){};ir.unstable_requestPaint=ofe;ir.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var n=Gi;Gi=e;try{return t()}finally{Gi=n}};ir.unstable_scheduleCallback=function(e,t,n){var u=ir.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?u+n:u):n=u,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3;}return c=n+c,e={id:afe++,callback:t,priorityLevel:e,startTime:n,expirationTime:c,sortIndex:-1},n>u?(e.sortIndex=n,LS(Ru,e),io(Po)===null&&e===io(Ru)&&(sm?l_():sm=!0,om(FS,n-u))):(e.sortIndex=c,LS(Po,e),uc||h_||(uc=!0,nf(NS))),e};ir.unstable_wrapCallback=function(e){var t=Gi;return function(){var n=Gi;Gi=t;try{return e.apply(this,arguments)}finally{Gi=n}}}});var lL=I((bct,uL)=>{"use strict";uL.exports=sL()});var KF=I(Ca=>{"use strict";var n0=sc(),Pr=wS(),yi=lL();function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!n0)throw Error(Ue(227));var wz=new Set,zm={};function _c(e,t){If(e,t),If(e+"Capture",t)}function If(e,t){for(zm[e]=t,e=0;e<t.length;e++)wz.add(t[e])}var Is=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),sfe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,cL=Object.prototype.hasOwnProperty,hL={},fL={};function ufe(e){return cL.call(fL,e)?!0:cL.call(hL,e)?!1:sfe.test(e)?fL[e]=!0:(hL[e]=!0,!1)}function lfe(e,t,n,u){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function cfe(e,t,n,u){if(t===null||typeof t=="undefined"||lfe(e,t,n,u))return!0;if(u)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function fn(e,t,n,u,c,s,_){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=_}var Pi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Pi[e]=new fn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Pi[t]=new fn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Pi[e]=new fn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Pi[e]=new fn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Pi[e]=new fn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Pi[e]=new fn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Pi[e]=new fn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Pi[e]=new fn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Pi[e]=new fn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Zq=/[\-:]([a-z])/g;function Kq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Zq,Kq);Pi[t]=new fn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Zq,Kq);Pi[t]=new fn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Zq,Kq);Pi[t]=new fn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Pi[e]=new fn(e,1,!1,e.toLowerCase(),null,!1,!1)});Pi.xlinkHref=new fn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Pi[e]=new fn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xq(e,t,n,u){var c=Pi.hasOwnProperty(t)?Pi[t]:null,s=c!==null?c.type===0:u?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");s||(cfe(t,n,c,u)&&(n=null),u||c===null?ufe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,u=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,u?e.setAttributeNS(u,t,n):e.setAttribute(t,n))))}var xc=n0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xm=60103,cc=60106,Lu=60107,Yq=60108,Im=60114,Jq=60109,Qq=60110,a0=60112,Em=60113,D_=60120,o0=60115,eI=60116,tI=60121,rI=60128,Sz=60129,iI=60130,uq=60131;typeof Symbol=="function"&&Symbol.for&&(oi=Symbol.for,xm=oi("react.element"),cc=oi("react.portal"),Lu=oi("react.fragment"),Yq=oi("react.strict_mode"),Im=oi("react.profiler"),Jq=oi("react.provider"),Qq=oi("react.context"),a0=oi("react.forward_ref"),Em=oi("react.suspense"),D_=oi("react.suspense_list"),o0=oi("react.memo"),eI=oi("react.lazy"),tI=oi("react.block"),oi("react.scope"),rI=oi("react.opaque.id"),Sz=oi("react.debug_trace_mode"),iI=oi("react.offscreen"),uq=oi("react.legacy_hidden"));var oi,dL=typeof Symbol=="function"&&Symbol.iterator;function um(e){return e===null||typeof e!="object"?null:(e=dL&&e[dL]||e["@@iterator"],typeof e=="function"?e:null)}var BS;function bm(e){if(BS===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);BS=t&&t[1]||""}return`
`+BS+e}var jS=!1;function f_(e,t){if(!e||jS)return"";jS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var u=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){u=E}e.call(t.prototype)}}else{try{throw Error()}catch(E){u=E}e()}}catch(E){if(E&&u&&typeof E.stack=="string"){for(var c=E.stack.split(`
`),s=u.stack.split(`
`),_=c.length-1,w=s.length-1;1<=_&&0<=w&&c[_]!==s[w];)w--;for(;1<=_&&0<=w;_--,w--)if(c[_]!==s[w]){if(_!==1||w!==1)do if(_--,w--,0>w||c[_]!==s[w])return`
`+c[_].replace(" at new "," at ");while(1<=_&&0<=w);break}}}finally{jS=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?bm(e):""}function hfe(e){switch(e.tag){case 5:return bm(e.type);case 16:return bm("Lazy");case 13:return bm("Suspense");case 19:return bm("SuspenseList");case 0:case 2:case 15:return e=f_(e.type,!1),e;case 11:return e=f_(e.type.render,!1),e;case 22:return e=f_(e.type._render,!1),e;case 1:return e=f_(e.type,!0),e;default:return"";}}function mf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lu:return"Fragment";case cc:return"Portal";case Im:return"Profiler";case Yq:return"StrictMode";case Em:return"Suspense";case D_:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case Qq:return(e.displayName||"Context")+".Consumer";case Jq:return(e._context.displayName||"Context")+".Provider";case a0:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case o0:return mf(e.type);case tI:return mf(e._render);case eI:t=e._payload,e=e._init;try{return mf(e(t))}catch(n){}}return null}function Zu(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function qz(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ffe(e){var t=qz(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(_){u=""+_,s.call(this,_)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function d_(e){e._valueTracker||(e._valueTracker=ffe(e))}function Iz(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),u="";return e&&(u=qz(e)?e.checked?"true":"false":e.value),e=u,e!==n?(t.setValue(e),!0):!1}function L_(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function lq(e,t){var n=t.checked;return Pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function pL(e,t){var n=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;n=Zu(t.value!=null?t.value:n),e._wrapperState={initialChecked:u,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ez(e,t){t=t.checked,t!=null&&Xq(e,"checked",t,!1)}function cq(e,t){Ez(e,t);var n=Zu(t.value),u=t.type;if(n!=null)u==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?hq(e,t.type,n):t.hasOwnProperty("defaultValue")&&hq(e,t.type,Zu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mL(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function hq(e,t,n){(t!=="number"||L_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function dfe(e){var t="";return n0.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function fq(e,t){return e=Pr({children:void 0},t),(t=dfe(t.children))&&(e.children=t),e}function vf(e,t,n,u){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&u&&(e[n].defaultSelected=!0)}else{for(n=""+Zu(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,u&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function dq(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return Pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function vL(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ue(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zu(n)}}function Tz(e,t){var n=Zu(t.value),u=Zu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),u!=null&&(e.defaultValue=""+u)}function gL(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var pq={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function Az(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function mq(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Az(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var p_,Pz=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,u,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,u,c)})}:e}(function(e,t){if(e.namespaceURI!==pq.svg||"innerHTML"in e)e.innerHTML=t;else{for(p_=p_||document.createElement("div"),p_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=p_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Fm(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Tm={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pfe=["Webkit","ms","Moz","O"];Object.keys(Tm).forEach(function(e){pfe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Tm[t]=Tm[e]})});function Cz(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Tm.hasOwnProperty(e)&&Tm[e]?(""+t).trim():t+"px"}function Mz(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var u=n.indexOf("--")===0,c=Cz(n,t[n],u);n==="float"&&(n="cssFloat"),u?e.setProperty(n,c):e[n]=c}}var mfe=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vq(e,t){if(t){if(mfe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function gq(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function nI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var yq=null,gf=null,yf=null;function yL(e){if(e=Jm(e)){if(typeof yq!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=f0(t),yq(e.stateNode,e.type,t))}}function kz(e){gf?yf?yf.push(e):yf=[e]:gf=e}function Oz(){if(gf){var e=gf,t=yf;if(yf=gf=null,yL(e),t)for(e=0;e<t.length;e++)yL(t[e])}}function aI(e,t){return e(t)}function Rz(e,t,n,u,c){return e(t,n,u,c)}function oI(){}var Dz=aI,hc=!1,US=!1;function sI(){(gf!==null||yf!==null)&&(oI(),Oz())}function vfe(e,t,n){if(US)return e(t,n);US=!0;try{return Dz(e,t,n)}finally{US=!1,sI()}}function Nm(e,t){var n=e.stateNode;if(n===null)return null;var u=f0(n);if(u===null)return null;n=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1;}if(e)return null;if(n&&typeof n!="function")throw Error(Ue(231,t,typeof n));return n}var _q=!1;if(Is)try{af={},Object.defineProperty(af,"passive",{get:function(){_q=!0}}),window.addEventListener("test",af,af),window.removeEventListener("test",af,af)}catch(e){_q=!1}var af;function gfe(e,t,n,u,c,s,_,w,E){var P=Array.prototype.slice.call(arguments,3);try{t.apply(n,P)}catch(C){this.onError(C)}}var Am=!1,z_=null,F_=!1,xq=null,yfe={onError:function(e){Am=!0,z_=e}};function _fe(e,t,n,u,c,s,_,w,E){Am=!1,z_=null,gfe.apply(yfe,arguments)}function xfe(e,t,n,u,c,s,_,w,E){if(_fe.apply(this,arguments),Am){if(Am){var P=z_;Am=!1,z_=null}else throw Error(Ue(198));F_||(F_=!0,xq=P)}}function bc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lz(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function _L(e){if(bc(e)!==e)throw Error(Ue(188))}function bfe(e){var t=e.alternate;if(!t){if(t=bc(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var n=e,u=t;;){var c=n.return;if(c===null)break;var s=c.alternate;if(s===null){if(u=c.return,u!==null){n=u;continue}break}if(c.child===s.child){for(s=c.child;s;){if(s===n)return _L(c),e;if(s===u)return _L(c),t;s=s.sibling}throw Error(Ue(188))}if(n.return!==u.return)n=c,u=s;else{for(var _=!1,w=c.child;w;){if(w===n){_=!0,n=c,u=s;break}if(w===u){_=!0,u=c,n=s;break}w=w.sibling}if(!_){for(w=s.child;w;){if(w===n){_=!0,n=s,u=c;break}if(w===u){_=!0,u=s,n=c;break}w=w.sibling}if(!_)throw Error(Ue(189))}}if(n.alternate!==u)throw Error(Ue(190))}if(n.tag!==3)throw Error(Ue(188));return n.stateNode.current===n?e:t}function zz(e){if(e=bfe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function xL(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var Fz,uI,Nz,Bz,bq=!1,Co=[],Bu=null,ju=null,Uu=null,Bm=new Map,jm=new Map,lm=[],bL="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function wq(e,t,n,u,c){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:c,targetContainers:[u]}}function wL(e,t){switch(e){case"focusin":case"focusout":Bu=null;break;case"dragenter":case"dragleave":ju=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":Bm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jm.delete(t.pointerId);}}function cm(e,t,n,u,c,s){return e===null||e.nativeEvent!==s?(e=wq(t,n,u,c,s),t!==null&&(t=Jm(t),t!==null&&uI(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function wfe(e,t,n,u,c){switch(t){case"focusin":return Bu=cm(Bu,e,t,n,u,c),!0;case"dragenter":return ju=cm(ju,e,t,n,u,c),!0;case"mouseover":return Uu=cm(Uu,e,t,n,u,c),!0;case"pointerover":var s=c.pointerId;return Bm.set(s,cm(Bm.get(s)||null,e,t,n,u,c)),!0;case"gotpointercapture":return s=c.pointerId,jm.set(s,cm(jm.get(s)||null,e,t,n,u,c)),!0;}return!1}function Sfe(e){var t=fc(e.target);if(t!==null){var n=bc(t);if(n!==null){if(t=n.tag,t===13){if(t=Lz(n),t!==null){e.blockedOn=t,Bz(e.lanePriority,function(){yi.unstable_runWithPriority(e.priority,function(){Nz(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function I_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=fI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=Jm(n),t!==null&&uI(t),e.blockedOn=n,!1;t.shift()}return!0}function SL(e,t,n){I_(e)&&n.delete(t)}function qfe(){for(bq=!1;0<Co.length;){var e=Co[0];if(e.blockedOn!==null){e=Jm(e.blockedOn),e!==null&&Fz(e);break}for(var t=e.targetContainers;0<t.length;){var n=fI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&Co.shift()}Bu!==null&&I_(Bu)&&(Bu=null),ju!==null&&I_(ju)&&(ju=null),Uu!==null&&I_(Uu)&&(Uu=null),Bm.forEach(SL),jm.forEach(SL)}function hm(e,t){e.blockedOn===t&&(e.blockedOn=null,bq||(bq=!0,yi.unstable_scheduleCallback(yi.unstable_NormalPriority,qfe)))}function jz(e){function t(c){return hm(c,e)}if(0<Co.length){hm(Co[0],e);for(var n=1;n<Co.length;n++){var u=Co[n];u.blockedOn===e&&(u.blockedOn=null)}}for(Bu!==null&&hm(Bu,e),ju!==null&&hm(ju,e),Uu!==null&&hm(Uu,e),Bm.forEach(t),jm.forEach(t),n=0;n<lm.length;n++)u=lm[n],u.blockedOn===e&&(u.blockedOn=null);for(;0<lm.length&&(n=lm[0],n.blockedOn===null);)Sfe(n),n.blockedOn===null&&lm.shift()}function m_(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lf={animationend:m_("Animation","AnimationEnd"),animationiteration:m_("Animation","AnimationIteration"),animationstart:m_("Animation","AnimationStart"),transitionend:m_("Transition","TransitionEnd")},$S={},Uz={};Is&&(Uz=document.createElement("div").style,"AnimationEvent"in window||(delete lf.animationend.animation,delete lf.animationiteration.animation,delete lf.animationstart.animation),"TransitionEvent"in window||delete lf.transitionend.transition);function s0(e){if($S[e])return $S[e];if(!lf[e])return e;var t=lf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Uz)return $S[e]=t[n];return e}var $z=s0("animationend"),Vz=s0("animationiteration"),Gz=s0("animationstart"),Hz=s0("transitionend"),Wz=new Map,lI=new Map,Ife=["abort","abort",$z,"animationEnd",Vz,"animationIteration",Gz,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Hz,"transitionEnd","waiting","waiting"];function cI(e,t){for(var n=0;n<e.length;n+=2){var u=e[n],c=e[n+1];c="on"+(c[0].toUpperCase()+c.slice(1)),lI.set(u,t),Wz.set(u,c),_c(c,[u])}}var Efe=yi.unstable_now;Efe();var mr=8;function sf(e){if(1&e)return mr=15,1;if(2&e)return mr=14,2;if(4&e)return mr=13,4;var t=24&e;return t!==0?(mr=12,t):e&32?(mr=11,32):(t=192&e,t!==0?(mr=10,t):e&256?(mr=9,256):(t=3584&e,t!==0?(mr=8,t):e&4096?(mr=7,4096):(t=4186112&e,t!==0?(mr=6,t):(t=62914560&e,t!==0?(mr=5,t):e&67108864?(mr=4,67108864):e&134217728?(mr=3,134217728):(t=805306368&e,t!==0?(mr=2,t):1073741824&e?(mr=1,1073741824):(mr=8,e))))))}function Tfe(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function Afe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ue(358,e));}}function Um(e,t){var n=e.pendingLanes;if(n===0)return mr=0;var u=0,c=0,s=e.expiredLanes,_=e.suspendedLanes,w=e.pingedLanes;if(s!==0)u=s,c=mr=15;else if(s=n&134217727,s!==0){var E=s&~_;E!==0?(u=sf(E),c=mr):(w&=s,w!==0&&(u=sf(w),c=mr))}else s=n&~_,s!==0?(u=sf(s),c=mr):w!==0&&(u=sf(w),c=mr);if(u===0)return 0;if(u=31-Ku(u),u=n&((0>u?0:1<<u)<<1)-1,t!==0&&t!==u&&!(t&_)){if(sf(t),c<=mr)return t;mr=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)n=31-Ku(t),c=1<<n,u|=e[n],t&=~c;return u}function Zz(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function N_(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=uf(24&~t),e===0?N_(10,t):e;case 10:return e=uf(192&~t),e===0?N_(8,t):e;case 8:return e=uf(3584&~t),e===0&&(e=uf(4186112&~t),e===0&&(e=512)),e;case 2:return t=uf(805306368&~t),t===0&&(t=268435456),t;}throw Error(Ue(358,e))}function uf(e){return e&-e}function VS(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function u0(e,t,n){e.pendingLanes|=t;var u=t-1;e.suspendedLanes&=u,e.pingedLanes&=u,e=e.eventTimes,t=31-Ku(t),e[t]=n}var Ku=Math.clz32?Math.clz32:Mfe,Pfe=Math.log,Cfe=Math.LN2;function Mfe(e){return e===0?32:31-(Pfe(e)/Cfe|0)|0}var kfe=yi.unstable_UserBlockingPriority,Ofe=yi.unstable_runWithPriority,E_=!0;function Rfe(e,t,n,u){hc||oI();var c=hI,s=hc;hc=!0;try{Rz(c,e,t,n,u)}finally{(hc=s)||sI()}}function Dfe(e,t,n,u){Ofe(kfe,hI.bind(null,e,t,n,u))}function hI(e,t,n,u){if(E_){var c;if((c=(t&4)===0)&&0<Co.length&&-1<bL.indexOf(e))e=wq(null,e,t,n,u),Co.push(e);else{var s=fI(e,t,n,u);if(s===null)c&&wL(e,u);else{if(c){if(-1<bL.indexOf(e)){e=wq(s,e,t,n,u),Co.push(e);return}if(wfe(s,e,t,n,u))return;wL(e,u)}sF(e,t,u,null,n)}}}}function fI(e,t,n,u){var c=nI(u);if(c=fc(c),c!==null){var s=bc(c);if(s===null)c=null;else{var _=s.tag;if(_===13){if(c=Lz(s),c!==null)return c;c=null}else if(_===3){if(s.stateNode.hydrate)return s.tag===3?s.stateNode.containerInfo:null;c=null}else s!==c&&(c=null)}}return sF(e,t,u,c,n),null}var zu=null,dI=null,T_=null;function Kz(){if(T_)return T_;var e,t=dI,n=t.length,u,c="value"in zu?zu.value:zu.textContent,s=c.length;for(e=0;e<n&&t[e]===c[e];e++);var _=n-e;for(u=1;u<=_&&t[n-u]===c[s-u];u++);return T_=c.slice(e,1<u?1-u:void 0)}function A_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function v_(){return!0}function qL(){return!1}function oa(e){function t(n,u,c,s,_){this._reactName=n,this._targetInst=c,this.type=u,this.nativeEvent=s,this.target=_,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(s):s[w]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?v_:qL,this.isPropagationStopped=qL,this}return Pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=v_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=v_)},persist:function(){},isPersistent:v_}),t}var Pf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pI=oa(Pf),Ym=Pr({},Pf,{view:0,detail:0}),Lfe=oa(Ym),GS,HS,fm,l0=Pr({},Ym,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mI,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fm&&(fm&&e.type==="mousemove"?(GS=e.screenX-fm.screenX,HS=e.screenY-fm.screenY):HS=GS=0,fm=e),GS)},movementY:function(e){return"movementY"in e?e.movementY:HS}}),IL=oa(l0),zfe=Pr({},l0,{dataTransfer:0}),Ffe=oa(zfe),Nfe=Pr({},Ym,{relatedTarget:0}),WS=oa(Nfe),Bfe=Pr({},Pf,{animationName:0,elapsedTime:0,pseudoElement:0}),jfe=oa(Bfe),Ufe=Pr({},Pf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$fe=oa(Ufe),Vfe=Pr({},Pf,{data:0}),EL=oa(Vfe),Gfe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hfe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Wfe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zfe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Wfe[e])?!!t[e]:!1}function mI(){return Zfe}var Kfe=Pr({},Ym,{key:function(e){if(e.key){var t=Gfe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=A_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Hfe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mI,charCode:function(e){return e.type==="keypress"?A_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?A_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xfe=oa(Kfe),Yfe=Pr({},l0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),TL=oa(Yfe),Jfe=Pr({},Ym,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mI}),Qfe=oa(Jfe),ede=Pr({},Pf,{propertyName:0,elapsedTime:0,pseudoElement:0}),tde=oa(ede),rde=Pr({},l0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ide=oa(rde),nde=[9,13,27,32],vI=Is&&"CompositionEvent"in window,Pm=null;Is&&"documentMode"in document&&(Pm=document.documentMode);var ade=Is&&"TextEvent"in window&&!Pm,Xz=Is&&(!vI||Pm&&8<Pm&&11>=Pm),AL=" ",PL=!1;function Yz(e,t){switch(e){case"keyup":return nde.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function Jz(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cf=!1;function ode(e,t){switch(e){case"compositionend":return Jz(t);case"keypress":return t.which!==32?null:(PL=!0,AL);case"textInput":return e=t.data,e===AL&&PL?null:e;default:return null;}}function sde(e,t){if(cf)return e==="compositionend"||!vI&&Yz(e,t)?(e=Kz(),T_=dI=zu=null,cf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xz&&t.locale!=="ko"?null:t.data;default:return null;}}var ude={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CL(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ude[e.type]:t==="textarea"}function Qz(e,t,n,u){kz(u),t=B_(t,"onChange"),0<t.length&&(n=new pI("onChange","change",null,n,u),e.push({event:n,listeners:t}))}var Cm=null,$m=null;function lde(e){nF(e,0)}function c0(e){var t=ff(e);if(Iz(t))return e}function cde(e,t){if(e==="change")return t}var eF=!1;Is&&(Is?(y_="oninput"in document,y_||(ZS=document.createElement("div"),ZS.setAttribute("oninput","return;"),y_=typeof ZS.oninput=="function"),g_=y_):g_=!1,eF=g_&&(!document.documentMode||9<document.documentMode));var g_,y_,ZS;function ML(){Cm&&(Cm.detachEvent("onpropertychange",tF),$m=Cm=null)}function tF(e){if(e.propertyName==="value"&&c0($m)){var t=[];if(Qz(t,$m,e,nI(e)),e=lde,hc)e(t);else{hc=!0;try{aI(e,t)}finally{hc=!1,sI()}}}}function hde(e,t,n){e==="focusin"?(ML(),Cm=t,$m=n,Cm.attachEvent("onpropertychange",tF)):e==="focusout"&&ML()}function fde(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return c0($m)}function dde(e,t){if(e==="click")return c0(t)}function pde(e,t){if(e==="input"||e==="change")return c0(t)}function mde(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ia=typeof Object.is=="function"?Object.is:mde,vde=Object.prototype.hasOwnProperty;function Vm(e,t){if(Ia(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),u=Object.keys(t);if(n.length!==u.length)return!1;for(u=0;u<n.length;u++)if(!vde.call(t,n[u])||!Ia(e[n[u]],t[n[u]]))return!1;return!0}function kL(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function OL(e,t){var n=kL(e);e=0;for(var u;n;){if(n.nodeType===3){if(u=e+n.textContent.length,e<=t&&u>=t)return{node:n,offset:t-e};e=u}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=kL(n)}}function rF(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?rF(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function RL(){for(var e=window,t=L_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(u){n=!1}if(n)e=t.contentWindow;else break;t=L_(e.document)}return t}function Sq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var gde=Is&&"documentMode"in document&&11>=document.documentMode,hf=null,qq=null,Mm=null,Iq=!1;function DL(e,t,n){var u=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Iq||hf==null||hf!==L_(u)||(u=hf,"selectionStart"in u&&Sq(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Mm&&Vm(Mm,u)||(Mm=u,u=B_(qq,"onSelect"),0<u.length&&(t=new pI("onSelect","select",null,t,n),e.push({event:t,listeners:u}),t.target=hf)))}cI("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);cI("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);cI(Ife,2);for(KS="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),__=0;__<KS.length;__++)lI.set(KS[__],0);var KS,__;If("onMouseEnter",["mouseout","mouseover"]);If("onMouseLeave",["mouseout","mouseover"]);If("onPointerEnter",["pointerout","pointerover"]);If("onPointerLeave",["pointerout","pointerover"]);_c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_c("onBeforeInput",["compositionend","keypress","textInput","paste"]);_c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),iF=new Set("cancel close invalid load scroll toggle".split(" ").concat(wm));function LL(e,t,n){var u=e.type||"unknown-event";e.currentTarget=n,xfe(u,t,void 0,e),e.currentTarget=null}function nF(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var u=e[n],c=u.event;u=u.listeners;e:{var s=void 0;if(t)for(var _=u.length-1;0<=_;_--){var w=u[_],E=w.instance,P=w.currentTarget;if(w=w.listener,E!==s&&c.isPropagationStopped())break e;LL(c,w,P),s=E}else for(_=0;_<u.length;_++){if(w=u[_],E=w.instance,P=w.currentTarget,w=w.listener,E!==s&&c.isPropagationStopped())break e;LL(c,w,P),s=E}}}if(F_)throw e=xq,F_=!1,xq=null,e}function wr(e,t){var n=lF(t),u=e+"__bubble";n.has(u)||(oF(t,e,2,!1),n.add(u))}var zL="_reactListening"+Math.random().toString(36).slice(2);function aF(e){e[zL]||(e[zL]=!0,wz.forEach(function(t){iF.has(t)||FL(t,!1,e,null),FL(t,!0,e,null)}))}function FL(e,t,n,u){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,s=n;if(e==="selectionchange"&&n.nodeType!==9&&(s=n.ownerDocument),u!==null&&!t&&iF.has(e)){if(e!=="scroll")return;c|=2,s=u}var _=lF(s),w=e+"__"+(t?"capture":"bubble");_.has(w)||(t&&(c|=4),oF(s,e,c,t),_.add(w))}function oF(e,t,n,u){var c=lI.get(t);switch(c===void 0?2:c){case 0:c=Rfe;break;case 1:c=Dfe;break;default:c=hI;}n=c.bind(null,t,n,e),c=void 0,!_q||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),u?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function sF(e,t,n,u,c){var s=u;if(!(t&1)&&!(t&2)&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var w=u.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(_===4)for(_=u.return;_!==null;){var E=_.tag;if((E===3||E===4)&&(E=_.stateNode.containerInfo,E===c||E.nodeType===8&&E.parentNode===c))return;_=_.return}for(;w!==null;){if(_=fc(w),_===null)return;if(E=_.tag,E===5||E===6){u=s=_;continue e}w=w.parentNode}}u=u.return}vfe(function(){var P=s,C=nI(n),B=[];e:{var $=Wz.get(e);if($!==void 0){var re=pI,xe=e;switch(e){case"keypress":if(A_(n)===0)break e;case"keydown":case"keyup":re=Xfe;break;case"focusin":xe="focus",re=WS;break;case"focusout":xe="blur",re=WS;break;case"beforeblur":case"afterblur":re=WS;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":re=IL;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":re=Ffe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":re=Qfe;break;case $z:case Vz:case Gz:re=jfe;break;case Hz:re=tde;break;case"scroll":re=Lfe;break;case"wheel":re=ide;break;case"copy":case"cut":case"paste":re=$fe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":re=TL;}var ye=(t&4)!==0,X=!ye&&e==="scroll",K=ye?$!==null?$+"Capture":null:$;ye=[];for(var ie=P,_e;ie!==null;){_e=ie;var be=_e.stateNode;if(_e.tag===5&&be!==null&&(_e=be,K!==null&&(be=Nm(ie,K),be!=null&&ye.push(Gm(ie,be,_e)))),X)break;ie=ie.return}0<ye.length&&($=new re($,xe,null,n,C),B.push({event:$,listeners:ye}))}}if(!(t&7)){e:{if($=e==="mouseover"||e==="pointerover",re=e==="mouseout"||e==="pointerout",$&&!(t&16)&&(xe=n.relatedTarget||n.fromElement)&&(fc(xe)||xe[Cf]))break e;if((re||$)&&($=C.window===C?C:($=C.ownerDocument)?$.defaultView||$.parentWindow:window,re?(xe=n.relatedTarget||n.toElement,re=P,xe=xe?fc(xe):null,xe!==null&&(X=bc(xe),xe!==X||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(re=null,xe=P),re!==xe)){if(ye=IL,be="onMouseLeave",K="onMouseEnter",ie="mouse",(e==="pointerout"||e==="pointerover")&&(ye=TL,be="onPointerLeave",K="onPointerEnter",ie="pointer"),X=re==null?$:ff(re),_e=xe==null?$:ff(xe),$=new ye(be,ie+"leave",re,n,C),$.target=X,$.relatedTarget=_e,be=null,fc(C)===P&&(ye=new ye(K,ie+"enter",xe,n,C),ye.target=_e,ye.relatedTarget=X,be=ye),X=be,re&&xe)t:{for(ye=re,K=xe,ie=0,_e=ye;_e;_e=of(_e))ie++;for(_e=0,be=K;be;be=of(be))_e++;for(;0<ie-_e;)ye=of(ye),ie--;for(;0<_e-ie;)K=of(K),_e--;for(;ie--;){if(ye===K||K!==null&&ye===K.alternate)break t;ye=of(ye),K=of(K)}ye=null}else ye=null;re!==null&&NL(B,$,re,ye,!1),xe!==null&&X!==null&&NL(B,X,xe,ye,!0)}}e:{if($=P?ff(P):window,re=$.nodeName&&$.nodeName.toLowerCase(),re==="select"||re==="input"&&$.type==="file")var Qe=cde;else if(CL($)){if(eF)Qe=pde;else{Qe=fde;var Le=hde}}else(re=$.nodeName)&&re.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(Qe=dde);if(Qe&&(Qe=Qe(e,P))){Qz(B,Qe,n,C);break e}Le&&Le(e,$,P),e==="focusout"&&(Le=$._wrapperState)&&Le.controlled&&$.type==="number"&&hq($,"number",$.value)}switch(Le=P?ff(P):window,e){case"focusin":(CL(Le)||Le.contentEditable==="true")&&(hf=Le,qq=P,Mm=null);break;case"focusout":Mm=qq=hf=null;break;case"mousedown":Iq=!0;break;case"contextmenu":case"mouseup":case"dragend":Iq=!1,DL(B,n,C);break;case"selectionchange":if(gde)break;case"keydown":case"keyup":DL(B,n,C);}var nt;if(vI)e:{switch(e){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e;}gt=void 0}else cf?Yz(e,n)&&(gt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(gt="onCompositionStart");gt&&(Xz&&n.locale!=="ko"&&(cf||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&cf&&(nt=Kz()):(zu=C,dI="value"in zu?zu.value:zu.textContent,cf=!0)),Le=B_(P,gt),0<Le.length&&(gt=new EL(gt,e,null,n,C),B.push({event:gt,listeners:Le}),nt?gt.data=nt:(nt=Jz(n),nt!==null&&(gt.data=nt)))),(nt=ade?ode(e,n):sde(e,n))&&(P=B_(P,"onBeforeInput"),0<P.length&&(C=new EL("onBeforeInput","beforeinput",null,n,C),B.push({event:C,listeners:P}),C.data=nt))}nF(B,t)})}function Gm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function B_(e,t){for(var n=t+"Capture",u=[];e!==null;){var c=e,s=c.stateNode;c.tag===5&&s!==null&&(c=s,s=Nm(e,n),s!=null&&u.unshift(Gm(e,s,c)),s=Nm(e,t),s!=null&&u.push(Gm(e,s,c))),e=e.return}return u}function of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function NL(e,t,n,u,c){for(var s=t._reactName,_=[];n!==null&&n!==u;){var w=n,E=w.alternate,P=w.stateNode;if(E!==null&&E===u)break;w.tag===5&&P!==null&&(w=P,c?(E=Nm(n,s),E!=null&&_.unshift(Gm(n,E,w))):c||(E=Nm(n,s),E!=null&&_.push(Gm(n,E,w)))),n=n.return}_.length!==0&&e.push({event:t,listeners:_})}function j_(){}var XS=null,YS=null;function uF(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function Eq(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var BL=typeof setTimeout=="function"?setTimeout:void 0,yde=typeof clearTimeout=="function"?clearTimeout:void 0;function gI(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function _f(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function jL(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var JS=0;function _de(e){return{$$typeof:rI,toString:e,valueOf:e}}var h0=Math.random().toString(36).slice(2),Fu="__reactFiber$"+h0,U_="__reactProps$"+h0,Cf="__reactContainer$"+h0,UL="__reactEvents$"+h0;function fc(e){var t=e[Fu];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cf]||n[Fu]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=jL(e);e!==null;){if(n=e[Fu])return n;e=jL(e)}return t}e=n,n=e.parentNode}return null}function Jm(e){return e=e[Fu]||e[Cf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ff(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function f0(e){return e[U_]||null}function lF(e){var t=e[UL];return t===void 0&&(t=e[UL]=new Set),t}var Tq=[],df=-1;function Qu(e){return{current:e}}function Sr(e){0>df||(e.current=Tq[df],Tq[df]=null,df--)}function Br(e,t){df++,Tq[df]=e.current,e.current=t}var Xu={},Ki=Qu(Xu),Cn=Qu(!1),vc=Xu;function Ef(e,t){var n=e.type.contextTypes;if(!n)return Xu;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var c={},s;for(s in n)c[s]=t[s];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Mn(e){return e=e.childContextTypes,e!=null}function $_(){Sr(Cn),Sr(Ki)}function $L(e,t,n){if(Ki.current!==Xu)throw Error(Ue(168));Br(Ki,t),Br(Cn,n)}function cF(e,t,n){var u=e.stateNode;if(e=t.childContextTypes,typeof u.getChildContext!="function")return n;u=u.getChildContext();for(var c in u)if(!(c in e))throw Error(Ue(108,mf(t)||"Unknown",c));return Pr({},n,u)}function P_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xu,vc=Ki.current,Br(Ki,e),Br(Cn,Cn.current),!0}function VL(e,t,n){var u=e.stateNode;if(!u)throw Error(Ue(169));n?(e=cF(e,t,vc),u.__reactInternalMemoizedMergedChildContext=e,Sr(Cn),Sr(Ki),Br(Ki,e)):Sr(Cn),Br(Cn,n)}var yI=null,mc=null,xde=yi.unstable_runWithPriority,_I=yi.unstable_scheduleCallback,Aq=yi.unstable_cancelCallback,bde=yi.unstable_shouldYield,GL=yi.unstable_requestPaint,Pq=yi.unstable_now,wde=yi.unstable_getCurrentPriorityLevel,d0=yi.unstable_ImmediatePriority,hF=yi.unstable_UserBlockingPriority,fF=yi.unstable_NormalPriority,dF=yi.unstable_LowPriority,pF=yi.unstable_IdlePriority,QS={},Sde=GL!==void 0?GL:function(){},xs=null,C_=null,eq=!1,HL=Pq(),Wi=1e4>HL?Pq:function(){return Pq()-HL};function Tf(){switch(wde()){case d0:return 99;case hF:return 98;case fF:return 97;case dF:return 96;case pF:return 95;default:throw Error(Ue(332));}}function mF(e){switch(e){case 99:return d0;case 98:return hF;case 97:return fF;case 96:return dF;case 95:return pF;default:throw Error(Ue(332));}}function gc(e,t){return e=mF(e),xde(e,t)}function Hm(e,t,n){return e=mF(e),_I(e,t,n)}function Do(){if(C_!==null){var e=C_;C_=null,Aq(e)}vF()}function vF(){if(!eq&&xs!==null){eq=!0;var e=0;try{var t=xs;gc(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),xs=null}catch(n){throw xs!==null&&(xs=xs.slice(e+1)),_I(d0,Do),n}finally{eq=!1}}}var qde=xc.ReactCurrentBatchConfig;function no(e,t){if(e&&e.defaultProps){t=Pr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var V_=Qu(null),G_=null,pf=null,H_=null;function xI(){H_=pf=G_=null}function bI(e){var t=V_.current;Sr(V_),e.type._context._currentValue=t}function gF(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function xf(e,t){G_=e,H_=pf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ao=!0),e.firstContext=null)}function Aa(e,t){if(H_!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(H_=e,t=1073741823),t={context:e,observedBits:t,next:null},pf===null){if(G_===null)throw Error(Ue(308));pf=t,G_.dependencies={lanes:0,firstContext:t,responders:null}}else pf=pf.next=t;return e._currentValue}var Du=!1;function wI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function yF(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $u(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vu(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function WL(e,t){var n=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,n===u)){var c=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var _={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?c=s=_:s=s.next=_,n=n.next}while(n!==null);s===null?c=s=t:s=s.next=t}else c=s=t;n={baseState:u.baseState,firstBaseUpdate:c,lastBaseUpdate:s,shared:u.shared,effects:u.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Wm(e,t,n,u){var c=e.updateQueue;Du=!1;var s=c.firstBaseUpdate,_=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var E=w,P=E.next;E.next=null,_===null?s=P:_.next=P,_=E;var C=e.alternate;if(C!==null){C=C.updateQueue;var B=C.lastBaseUpdate;B!==_&&(B===null?C.firstBaseUpdate=P:B.next=P,C.lastBaseUpdate=E)}}if(s!==null){B=c.baseState,_=0,C=P=E=null;do{w=s.lane;var $=s.eventTime;if((u&w)===w){C!==null&&(C=C.next={eventTime:$,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var re=e,xe=s;switch(w=t,$=n,xe.tag){case 1:if(re=xe.payload,typeof re=="function"){B=re.call($,B,w);break e}B=re;break e;case 3:re.flags=re.flags&-4097|64;case 0:if(re=xe.payload,w=typeof re=="function"?re.call($,B,w):re,w==null)break e;B=Pr({},B,w);break e;case 2:Du=!0;}}s.callback!==null&&(e.flags|=32,w=c.effects,w===null?c.effects=[s]:w.push(s))}else $={eventTime:$,lane:w,tag:s.tag,payload:s.payload,callback:s.callback,next:null},C===null?(P=C=$,E=B):C=C.next=$,_|=w;if(s=s.next,s===null){if(w=c.shared.pending,w===null)break;s=w.next,w.next=null,c.lastBaseUpdate=w,c.shared.pending=null}}while(!0);C===null&&(E=B),c.baseState=E,c.firstBaseUpdate=P,c.lastBaseUpdate=C,ev|=_,e.lanes=_,e.memoizedState=B}}function ZL(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],c=u.callback;if(c!==null){if(u.callback=null,u=n,typeof c!="function")throw Error(Ue(191,c));c.call(u)}}}var _F=new n0.Component().refs;function W_(e,t,n,u){t=e.memoizedState,n=n(u,t),n=n==null?t:Pr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var p0={isMounted:function(e){return(e=e._reactInternals)?bc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var u=aa(),c=Gu(e),s=$u(u,c);s.payload=t,n!=null&&(s.callback=n),Vu(e,s),Hu(e,c,u)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var u=aa(),c=Gu(e),s=$u(u,c);s.tag=1,s.payload=t,n!=null&&(s.callback=n),Vu(e,s),Hu(e,c,u)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=aa(),u=Gu(e),c=$u(n,u);c.tag=2,t!=null&&(c.callback=t),Vu(e,c),Hu(e,u,n)}};function KL(e,t,n,u,c,s,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,s,_):t.prototype&&t.prototype.isPureReactComponent?!Vm(n,u)||!Vm(c,s):!0}function xF(e,t,n){var u=!1,c=Xu,s=t.contextType;return typeof s=="object"&&s!==null?s=Aa(s):(c=Mn(t)?vc:Ki.current,u=t.contextTypes,s=(u=u!=null)?Ef(e,c):Xu),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=p0,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=s),t}function XL(e,t,n,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,u),t.state!==e&&p0.enqueueReplaceState(t,t.state,null)}function Cq(e,t,n,u){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=_F,wI(e);var s=t.contextType;typeof s=="object"&&s!==null?c.context=Aa(s):(s=Mn(t)?vc:Ki.current,c.context=Ef(e,s)),Wm(e,n,c,u),c.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(W_(e,t,s,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&p0.enqueueReplaceState(c,c.state,null),Wm(e,n,c,u),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var x_=Array.isArray;function dm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ue(309));var u=n.stateNode}if(!u)throw Error(Ue(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(s){var _=u.refs;_===_F&&(_=u.refs={}),s===null?delete _[c]:_[c]=s},t._stringRef=c,t)}if(typeof e!="string")throw Error(Ue(284));if(!n._owner)throw Error(Ue(290,e))}return e}function b_(e,t){if(e.type!=="textarea")throw Error(Ue(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function bF(e){function t(X,K){if(e){var ie=X.lastEffect;ie!==null?(ie.nextEffect=K,X.lastEffect=K):X.firstEffect=X.lastEffect=K,K.nextEffect=null,K.flags=8}}function n(X,K){if(!e)return null;for(;K!==null;)t(X,K),K=K.sibling;return null}function u(X,K){for(X=new Map;K!==null;)K.key!==null?X.set(K.key,K):X.set(K.index,K),K=K.sibling;return X}function c(X,K){return X=Ju(X,K),X.index=0,X.sibling=null,X}function s(X,K,ie){return X.index=ie,e?(ie=X.alternate,ie!==null?(ie=ie.index,ie<K?(X.flags=2,K):ie):(X.flags=2,K)):K}function _(X){return e&&X.alternate===null&&(X.flags=2),X}function w(X,K,ie,_e){return K===null||K.tag!==6?(K=aq(ie,X.mode,_e),K.return=X,K):(K=c(K,ie),K.return=X,K)}function E(X,K,ie,_e){return K!==null&&K.elementType===ie.type?(_e=c(K,ie.props),_e.ref=dm(X,K,ie),_e.return=X,_e):(_e=R_(ie.type,ie.key,ie.props,null,X.mode,_e),_e.ref=dm(X,K,ie),_e.return=X,_e)}function P(X,K,ie,_e){return K===null||K.tag!==4||K.stateNode.containerInfo!==ie.containerInfo||K.stateNode.implementation!==ie.implementation?(K=oq(ie,X.mode,_e),K.return=X,K):(K=c(K,ie.children||[]),K.return=X,K)}function C(X,K,ie,_e,be){return K===null||K.tag!==7?(K=qf(ie,X.mode,_e,be),K.return=X,K):(K=c(K,ie),K.return=X,K)}function B(X,K,ie){if(typeof K=="string"||typeof K=="number")return K=aq(""+K,X.mode,ie),K.return=X,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case xm:return ie=R_(K.type,K.key,K.props,null,X.mode,ie),ie.ref=dm(X,null,K),ie.return=X,ie;case cc:return K=oq(K,X.mode,ie),K.return=X,K;}if(x_(K)||um(K))return K=qf(K,X.mode,ie,null),K.return=X,K;b_(X,K)}return null}function $(X,K,ie,_e){var be=K!==null?K.key:null;if(typeof ie=="string"||typeof ie=="number")return be!==null?null:w(X,K,""+ie,_e);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case xm:return ie.key===be?ie.type===Lu?C(X,K,ie.props.children,_e,be):E(X,K,ie,_e):null;case cc:return ie.key===be?P(X,K,ie,_e):null;}if(x_(ie)||um(ie))return be!==null?null:C(X,K,ie,_e,null);b_(X,ie)}return null}function re(X,K,ie,_e,be){if(typeof _e=="string"||typeof _e=="number")return X=X.get(ie)||null,w(K,X,""+_e,be);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case xm:return X=X.get(_e.key===null?ie:_e.key)||null,_e.type===Lu?C(K,X,_e.props.children,be,_e.key):E(K,X,_e,be);case cc:return X=X.get(_e.key===null?ie:_e.key)||null,P(K,X,_e,be);}if(x_(_e)||um(_e))return X=X.get(ie)||null,C(K,X,_e,be,null);b_(K,_e)}return null}function xe(X,K,ie,_e){for(var be=null,Qe=null,Le=K,nt=K=0,gt=null;Le!==null&&nt<ie.length;nt++){Le.index>nt?(gt=Le,Le=null):gt=Le.sibling;var Je=$(X,Le,ie[nt],_e);if(Je===null){Le===null&&(Le=gt);break}e&&Le&&Je.alternate===null&&t(X,Le),K=s(Je,K,nt),Qe===null?be=Je:Qe.sibling=Je,Qe=Je,Le=gt}if(nt===ie.length)return n(X,Le),be;if(Le===null){for(;nt<ie.length;nt++)Le=B(X,ie[nt],_e),Le!==null&&(K=s(Le,K,nt),Qe===null?be=Le:Qe.sibling=Le,Qe=Le);return be}for(Le=u(X,Le);nt<ie.length;nt++)gt=re(Le,X,nt,ie[nt],_e),gt!==null&&(e&&gt.alternate!==null&&Le.delete(gt.key===null?nt:gt.key),K=s(gt,K,nt),Qe===null?be=gt:Qe.sibling=gt,Qe=gt);return e&&Le.forEach(function(en){return t(X,en)}),be}function ye(X,K,ie,_e){var be=um(ie);if(typeof be!="function")throw Error(Ue(150));if(ie=be.call(ie),ie==null)throw Error(Ue(151));for(var Qe=be=null,Le=K,nt=K=0,gt=null,Je=ie.next();Le!==null&&!Je.done;nt++,Je=ie.next()){Le.index>nt?(gt=Le,Le=null):gt=Le.sibling;var en=$(X,Le,Je.value,_e);if(en===null){Le===null&&(Le=gt);break}e&&Le&&en.alternate===null&&t(X,Le),K=s(en,K,nt),Qe===null?be=en:Qe.sibling=en,Qe=en,Le=gt}if(Je.done)return n(X,Le),be;if(Le===null){for(;!Je.done;nt++,Je=ie.next())Je=B(X,Je.value,_e),Je!==null&&(K=s(Je,K,nt),Qe===null?be=Je:Qe.sibling=Je,Qe=Je);return be}for(Le=u(X,Le);!Je.done;nt++,Je=ie.next())Je=re(Le,X,nt,Je.value,_e),Je!==null&&(e&&Je.alternate!==null&&Le.delete(Je.key===null?nt:Je.key),K=s(Je,K,nt),Qe===null?be=Je:Qe.sibling=Je,Qe=Je);return e&&Le.forEach(function(Yr){return t(X,Yr)}),be}return function(X,K,ie,_e){var be=typeof ie=="object"&&ie!==null&&ie.type===Lu&&ie.key===null;be&&(ie=ie.props.children);var Qe=typeof ie=="object"&&ie!==null;if(Qe)switch(ie.$$typeof){case xm:e:{for(Qe=ie.key,be=K;be!==null;){if(be.key===Qe){switch(be.tag){case 7:if(ie.type===Lu){n(X,be.sibling),K=c(be,ie.props.children),K.return=X,X=K;break e}break;default:if(be.elementType===ie.type){n(X,be.sibling),K=c(be,ie.props),K.ref=dm(X,be,ie),K.return=X,X=K;break e}}n(X,be);break}else t(X,be);be=be.sibling}ie.type===Lu?(K=qf(ie.props.children,X.mode,_e,ie.key),K.return=X,X=K):(_e=R_(ie.type,ie.key,ie.props,null,X.mode,_e),_e.ref=dm(X,K,ie),_e.return=X,X=_e)}return _(X);case cc:e:{for(be=ie.key;K!==null;){if(K.key===be){if(K.tag===4&&K.stateNode.containerInfo===ie.containerInfo&&K.stateNode.implementation===ie.implementation){n(X,K.sibling),K=c(K,ie.children||[]),K.return=X,X=K;break e}else{n(X,K);break}}else t(X,K);K=K.sibling}K=oq(ie,X.mode,_e),K.return=X,X=K}return _(X);}if(typeof ie=="string"||typeof ie=="number")return ie=""+ie,K!==null&&K.tag===6?(n(X,K.sibling),K=c(K,ie),K.return=X,X=K):(n(X,K),K=aq(ie,X.mode,_e),K.return=X,X=K),_(X);if(x_(ie))return xe(X,K,ie,_e);if(um(ie))return ye(X,K,ie,_e);if(Qe&&b_(X,ie),typeof ie=="undefined"&&!be)switch(X.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ue(152,mf(X.type)||"Component"));}return n(X,K)}}var Z_=bF(!0),wF=bF(!1),Qm={},Oo=Qu(Qm),Zm=Qu(Qm),Km=Qu(Qm);function dc(e){if(e===Qm)throw Error(Ue(174));return e}function Mq(e,t){switch(Br(Km,t),Br(Zm,e),Br(Oo,Qm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mq(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mq(t,e);}Sr(Oo),Br(Oo,t)}function Af(){Sr(Oo),Sr(Zm),Sr(Km)}function YL(e){dc(Km.current);var t=dc(Oo.current),n=mq(t,e.type);t!==n&&(Br(Zm,e),Br(Oo,n))}function SI(e){Zm.current===e&&(Sr(Oo),Sr(Zm))}var Nr=Qu(0);function K_(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ws=null,Nu=null,Ro=!1;function SF(e,t){var n=Ea(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function JL(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function kq(e){if(Ro){var t=Nu;if(t){var n=t;if(!JL(e,t)){if(t=_f(n.nextSibling),!t||!JL(e,t)){e.flags=e.flags&-1025|2,Ro=!1,ws=e;return}SF(ws,n)}ws=e,Nu=_f(t.firstChild)}else e.flags=e.flags&-1025|2,Ro=!1,ws=e}}function QL(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ws=e}function w_(e){if(e!==ws)return!1;if(!Ro)return QL(e),Ro=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Eq(t,e.memoizedProps))for(t=Nu;t;)SF(e,t),t=_f(t.nextSibling);if(QL(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nu=_f(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nu=null}}else Nu=ws?_f(e.stateNode.nextSibling):null;return!0}function tq(){Nu=ws=null,Ro=!1}var bf=[];function qI(){for(var e=0;e<bf.length;e++)bf[e]._workInProgressVersionPrimary=null;bf.length=0}var km=xc.ReactCurrentDispatcher,Ta=xc.ReactCurrentBatchConfig,Xm=0,Wr=null,Hi=null,Ti=null,X_=!1,Om=!1;function An(){throw Error(Ue(321))}function II(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ia(e[n],t[n]))return!1;return!0}function EI(e,t,n,u,c,s){if(Xm=s,Wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,km.current=e===null||e.memoizedState===null?Ede:Tde,e=n(u,c),Om){s=0;do{if(Om=!1,!(25>s))throw Error(Ue(301));s+=1,Ti=Hi=null,t.updateQueue=null,km.current=Ade,e=n(u,c)}while(Om)}if(km.current=e0,t=Hi!==null&&Hi.next!==null,Xm=0,Ti=Hi=Wr=null,X_=!1,t)throw Error(Ue(300));return e}function pc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?Wr.memoizedState=Ti=e:Ti=Ti.next=e,Ti}function wc(){if(Hi===null){var e=Wr.alternate;e=e!==null?e.memoizedState:null}else e=Hi.next;var t=Ti===null?Wr.memoizedState:Ti.next;if(t!==null)Ti=t,Hi=e;else{if(e===null)throw Error(Ue(310));Hi=e,e={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},Ti===null?Wr.memoizedState=Ti=e:Ti=Ti.next=e}return Ti}function Mo(e,t){return typeof t=="function"?t(e):t}function pm(e){var t=wc(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var u=Hi,c=u.baseQueue,s=n.pending;if(s!==null){if(c!==null){var _=c.next;c.next=s.next,s.next=_}u.baseQueue=c=s,n.pending=null}if(c!==null){c=c.next,u=u.baseState;var w=_=s=null,E=c;do{var P=E.lane;if((Xm&P)===P)w!==null&&(w=w.next={lane:0,action:E.action,eagerReducer:E.eagerReducer,eagerState:E.eagerState,next:null}),u=E.eagerReducer===e?E.eagerState:e(u,E.action);else{var C={lane:P,action:E.action,eagerReducer:E.eagerReducer,eagerState:E.eagerState,next:null};w===null?(_=w=C,s=u):w=w.next=C,Wr.lanes|=P,ev|=P}E=E.next}while(E!==null&&E!==c);w===null?s=u:w.next=_,Ia(u,t.memoizedState)||(ao=!0),t.memoizedState=u,t.baseState=s,t.baseQueue=w,n.lastRenderedState=u}return[t.memoizedState,n.dispatch]}function mm(e){var t=wc(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var u=n.dispatch,c=n.pending,s=t.memoizedState;if(c!==null){n.pending=null;var _=c=c.next;do s=e(s,_.action),_=_.next;while(_!==c);Ia(s,t.memoizedState)||(ao=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,u]}function ez(e,t,n){var u=t._getVersion;u=u(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===u:(e=e.mutableReadLanes,(e=(Xm&e)===e)&&(t._workInProgressVersionPrimary=u,bf.push(t))),e)return n(t._source);throw bf.push(t),Error(Ue(350))}function qF(e,t,n,u){var c=hn;if(c===null)throw Error(Ue(349));var s=t._getVersion,_=s(t._source),w=km.current,E=w.useState(function(){return ez(c,t,n)}),P=E[1],C=E[0];E=Ti;var B=e.memoizedState,$=B.refs,re=$.getSnapshot,xe=B.source;B=B.subscribe;var ye=Wr;return e.memoizedState={refs:$,source:t,subscribe:u},w.useEffect(function(){$.getSnapshot=n,$.setSnapshot=P;var X=s(t._source);if(!Ia(_,X)){X=n(t._source),Ia(C,X)||(P(X),X=Gu(ye),c.mutableReadLanes|=X&c.pendingLanes),X=c.mutableReadLanes,c.entangledLanes|=X;for(var K=c.entanglements,ie=X;0<ie;){var _e=31-Ku(ie),be=1<<_e;K[_e]|=X,ie&=~be}}},[n,t,u]),w.useEffect(function(){return u(t._source,function(){var X=$.getSnapshot,K=$.setSnapshot;try{K(X(t._source));var ie=Gu(ye);c.mutableReadLanes|=ie&c.pendingLanes}catch(_e){K(function(){throw _e})}})},[t,u]),Ia(re,n)&&Ia(xe,t)&&Ia(B,u)||(e={pending:null,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:C},e.dispatch=P=PI.bind(null,Wr,e),E.queue=e,E.baseQueue=null,C=ez(c,t,n),E.memoizedState=E.baseState=C),C}function IF(e,t,n){var u=wc();return qF(u,e,t,n)}function vm(e){var t=pc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:e},e=e.dispatch=PI.bind(null,Wr,e),[t.memoizedState,e]}function Y_(e,t,n,u){return e={tag:e,create:t,destroy:n,deps:u,next:null},t=Wr.updateQueue,t===null?(t={lastEffect:null},Wr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(u=n.next,n.next=e,e.next=u,t.lastEffect=e)),e}function tz(e){var t=pc();return e={current:e},t.memoizedState=e}function J_(){return wc().memoizedState}function Oq(e,t,n,u){var c=pc();Wr.flags|=e,c.memoizedState=Y_(1|t,n,void 0,u===void 0?null:u)}function TI(e,t,n,u){var c=wc();u=u===void 0?null:u;var s=void 0;if(Hi!==null){var _=Hi.memoizedState;if(s=_.destroy,u!==null&&II(u,_.deps)){Y_(t,n,s,u);return}}Wr.flags|=e,c.memoizedState=Y_(1|t,n,s,u)}function rz(e,t){return Oq(516,4,e,t)}function Q_(e,t){return TI(516,4,e,t)}function EF(e,t){return TI(4,2,e,t)}function TF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function AF(e,t,n){return n=n!=null?n.concat([e]):null,TI(4,2,TF.bind(null,t,e),n)}function AI(){}function PF(e,t){var n=wc();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&II(t,u[1])?u[0]:(n.memoizedState=[e,t],e)}function CF(e,t){var n=wc();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&II(t,u[1])?u[0]:(e=e(),n.memoizedState=[e,t],e)}function Ide(e,t){var n=Tf();gc(98>n?98:n,function(){e(!0)}),gc(97<n?97:n,function(){var u=Ta.transition;Ta.transition=1;try{e(!1),t()}finally{Ta.transition=u}})}function PI(e,t,n){var u=aa(),c=Gu(e),s={lane:c,action:n,eagerReducer:null,eagerState:null,next:null},_=t.pending;if(_===null?s.next=s:(s.next=_.next,_.next=s),t.pending=s,_=e.alternate,e===Wr||_!==null&&_===Wr)Om=X_=!0;else{if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var w=t.lastRenderedState,E=_(w,n);if(s.eagerReducer=_,s.eagerState=E,Ia(E,w))return}catch(P){}finally{}Hu(e,c,u)}}var e0={readContext:Aa,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useMutableSource:An,useOpaqueIdentifier:An,unstable_isNewReconciler:!1},Ede={readContext:Aa,useCallback:function(e,t){return pc().memoizedState=[e,t===void 0?null:t],e},useContext:Aa,useEffect:rz,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Oq(4,2,TF.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Oq(4,2,e,t)},useMemo:function(e,t){var n=pc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var u=pc();return t=n!==void 0?n(t):t,u.memoizedState=u.baseState=t,e=u.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=PI.bind(null,Wr,e),[u.memoizedState,e]},useRef:tz,useState:vm,useDebugValue:AI,useDeferredValue:function(e){var t=vm(e),n=t[0],u=t[1];return rz(function(){var c=Ta.transition;Ta.transition=1;try{u(e)}finally{Ta.transition=c}},[e]),n},useTransition:function(){var e=vm(!1),t=e[0];return e=Ide.bind(null,e[1]),tz(e),[e,t]},useMutableSource:function(e,t,n){var u=pc();return u.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},qF(u,e,t,n)},useOpaqueIdentifier:function(){if(Ro){var e=!1,t=_de(function(){throw e||(e=!0,n("r:"+(JS++).toString(36))),Error(Ue(355))}),n=vm(t)[1];return!(Wr.mode&2)&&(Wr.flags|=516,Y_(5,function(){n("r:"+(JS++).toString(36))},void 0,null)),t}return t="r:"+(JS++).toString(36),vm(t),t},unstable_isNewReconciler:!1},Tde={readContext:Aa,useCallback:PF,useContext:Aa,useEffect:Q_,useImperativeHandle:AF,useLayoutEffect:EF,useMemo:CF,useReducer:pm,useRef:J_,useState:function(){return pm(Mo)},useDebugValue:AI,useDeferredValue:function(e){var t=pm(Mo),n=t[0],u=t[1];return Q_(function(){var c=Ta.transition;Ta.transition=1;try{u(e)}finally{Ta.transition=c}},[e]),n},useTransition:function(){var e=pm(Mo)[0];return[J_().current,e]},useMutableSource:IF,useOpaqueIdentifier:function(){return pm(Mo)[0]},unstable_isNewReconciler:!1},Ade={readContext:Aa,useCallback:PF,useContext:Aa,useEffect:Q_,useImperativeHandle:AF,useLayoutEffect:EF,useMemo:CF,useReducer:mm,useRef:J_,useState:function(){return mm(Mo)},useDebugValue:AI,useDeferredValue:function(e){var t=mm(Mo),n=t[0],u=t[1];return Q_(function(){var c=Ta.transition;Ta.transition=1;try{u(e)}finally{Ta.transition=c}},[e]),n},useTransition:function(){var e=mm(Mo)[0];return[J_().current,e]},useMutableSource:IF,useOpaqueIdentifier:function(){return mm(Mo)[0]},unstable_isNewReconciler:!1},Pde=xc.ReactCurrentOwner,ao=!1;function Pn(e,t,n,u){t.child=e===null?wF(t,null,n,u):Z_(t,e.child,n,u)}function iz(e,t,n,u,c){n=n.render;var s=t.ref;return xf(t,c),u=EI(e,t,n,u,s,c),e!==null&&!ao?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Ss(e,t,c)):(t.flags|=1,Pn(e,t,u,c),t.child)}function nz(e,t,n,u,c,s){if(e===null){var _=n.type;return typeof _=="function"&&!DI(_)&&_.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=_,MF(e,t,_,u,c,s)):(e=R_(n.type,null,u,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}return _=e.child,!(c&s)&&(c=_.memoizedProps,n=n.compare,n=n!==null?n:Vm,n(c,u)&&e.ref===t.ref)?Ss(e,t,s):(t.flags|=1,e=Ju(_,u),e.ref=t.ref,e.return=t,t.child=e)}function MF(e,t,n,u,c,s){if(e!==null&&Vm(e.memoizedProps,u)&&e.ref===t.ref)if(ao=!1,(s&c)!==0)e.flags&16384&&(ao=!0);else return t.lanes=e.lanes,Ss(e,t,s);return Rq(e,t,n,u,s)}function rq(e,t,n){var u=t.pendingProps,c=u.children,s=e!==null?e.memoizedState:null;if(u.mode==="hidden"||u.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},q_(t,n);else if(n&1073741824)t.memoizedState={baseLanes:0},q_(t,s!==null?s.baseLanes:n);else return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},q_(t,e),null;}else s!==null?(u=s.baseLanes|n,t.memoizedState=null):u=n,q_(t,u);return Pn(e,t,c,n),t.child}function kF(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function Rq(e,t,n,u,c){var s=Mn(n)?vc:Ki.current;return s=Ef(t,s),xf(t,c),n=EI(e,t,n,u,s,c),e!==null&&!ao?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Ss(e,t,c)):(t.flags|=1,Pn(e,t,n,c),t.child)}function az(e,t,n,u,c){if(Mn(n)){var s=!0;P_(t)}else s=!1;if(xf(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),xF(t,n,u),Cq(t,n,u,c),u=!0;else if(e===null){var _=t.stateNode,w=t.memoizedProps;_.props=w;var E=_.context,P=n.contextType;typeof P=="object"&&P!==null?P=Aa(P):(P=Mn(n)?vc:Ki.current,P=Ef(t,P));var C=n.getDerivedStateFromProps,B=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function";B||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==u||E!==P)&&XL(t,_,u,P),Du=!1;var $=t.memoizedState;_.state=$,Wm(t,u,_,c),E=t.memoizedState,w!==u||$!==E||Cn.current||Du?(typeof C=="function"&&(W_(t,n,C,u),E=t.memoizedState),(w=Du||KL(t,n,w,u,$,E,P))?(B||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(t.flags|=4)):(typeof _.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=u,t.memoizedState=E),_.props=u,_.state=E,_.context=P,u=w):(typeof _.componentDidMount=="function"&&(t.flags|=4),u=!1)}else{_=t.stateNode,yF(e,t),w=t.memoizedProps,P=t.type===t.elementType?w:no(t.type,w),_.props=P,B=t.pendingProps,$=_.context,E=n.contextType,typeof E=="object"&&E!==null?E=Aa(E):(E=Mn(n)?vc:Ki.current,E=Ef(t,E));var re=n.getDerivedStateFromProps;(C=typeof re=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==B||$!==E)&&XL(t,_,u,E),Du=!1,$=t.memoizedState,_.state=$,Wm(t,u,_,c);var xe=t.memoizedState;w!==B||$!==xe||Cn.current||Du?(typeof re=="function"&&(W_(t,n,re,u),xe=t.memoizedState),(P=Du||KL(t,n,P,u,$,xe,E))?(C||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,xe,E),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,xe,E)),typeof _.componentDidUpdate=="function"&&(t.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof _.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=256),t.memoizedProps=u,t.memoizedState=xe),_.props=u,_.state=xe,_.context=E,u=P):(typeof _.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=256),u=!1)}return Dq(e,t,n,u,s,c)}function Dq(e,t,n,u,c,s){kF(e,t);var _=(t.flags&64)!==0;if(!u&&!_)return c&&VL(t,n,!1),Ss(e,t,s);u=t.stateNode,Pde.current=t;var w=_&&typeof n.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&_?(t.child=Z_(t,e.child,null,s),t.child=Z_(t,null,w,s)):Pn(e,t,w,s),t.memoizedState=u.state,c&&VL(t,n,!0),t.child}function oz(e){var t=e.stateNode;t.pendingContext?$L(e,t.pendingContext,t.pendingContext!==t.context):t.context&&$L(e,t.context,!1),Mq(e,t.containerInfo)}var S_={dehydrated:null,retryLane:0};function sz(e,t,n){var u=t.pendingProps,c=Nr.current,s=!1,_;return(_=(t.flags&64)!==0)||(_=e!==null&&e.memoizedState===null?!1:(c&2)!==0),_?(s=!0,t.flags&=-65):e!==null&&e.memoizedState===null||u.fallback===void 0||u.unstable_avoidThisFallback===!0||(c|=1),Br(Nr,c&1),e===null?(u.fallback!==void 0&&kq(t),e=u.children,c=u.fallback,s?(e=uz(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=S_,e):typeof u.unstable_expectedLoadTime=="number"?(e=uz(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=S_,t.lanes=33554432,e):(n=LI({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?s?(u=cz(e,t,u.children,u.fallback,n),s=t.child,c=e.child.memoizedState,s.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=S_,u):(n=lz(e,t,u.children,n),t.memoizedState=null,n):s?(u=cz(e,t,u.children,u.fallback,n),s=t.child,c=e.child.memoizedState,s.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},s.childLanes=e.childLanes&~n,t.memoizedState=S_,u):(n=lz(e,t,u.children,n),t.memoizedState=null,n)}function uz(e,t,n,u){var c=e.mode,s=e.child;return t={mode:"hidden",children:t},!(c&2)&&s!==null?(s.childLanes=0,s.pendingProps=t):s=LI(t,c,0,null),n=qf(n,c,u,null),s.return=e,n.return=e,s.sibling=n,e.child=s,n}function lz(e,t,n,u){var c=e.child;return e=c.sibling,n=Ju(c,{mode:"visible",children:n}),!(t.mode&2)&&(n.lanes=u),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function cz(e,t,n,u,c){var s=t.mode,_=e.child;e=_.sibling;var w={mode:"hidden",children:n};return!(s&2)&&t.child!==_?(n=t.child,n.childLanes=0,n.pendingProps=w,_=n.lastEffect,_!==null?(t.firstEffect=n.firstEffect,t.lastEffect=_,_.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ju(_,w),e!==null?u=Ju(e,u):(u=qf(u,s,c,null),u.flags|=2),u.return=t,n.return=t,n.sibling=u,t.child=n,u}function hz(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),gF(e.return,t)}function iq(e,t,n,u,c,s){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:n,tailMode:c,lastEffect:s}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=n,_.tailMode=c,_.lastEffect=s)}function fz(e,t,n){var u=t.pendingProps,c=u.revealOrder,s=u.tail;if(Pn(e,t,u.children,n),u=Nr.current,u&2)u=u&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&hz(e,n);else if(e.tag===19)hz(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Br(Nr,u),!(t.mode&2))t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&K_(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),iq(t,!1,c,n,s,t.lastEffect);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&K_(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}iq(t,!0,n,null,s,t.lastEffect);break;case"together":iq(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function Ss(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ev|=t.lanes,n&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,n=Ju(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ju(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var OF,Lq,RF,DF;OF=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Lq=function(){};RF=function(e,t,n,u){var c=e.memoizedProps;if(c!==u){e=t.stateNode,dc(Oo.current);var s=null;switch(n){case"input":c=lq(e,c),u=lq(e,u),s=[];break;case"option":c=fq(e,c),u=fq(e,u),s=[];break;case"select":c=Pr({},c,{value:void 0}),u=Pr({},u,{value:void 0}),s=[];break;case"textarea":c=dq(e,c),u=dq(e,u),s=[];break;default:typeof c.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=j_);}vq(n,u);var _;n=null;for(P in c)if(!u.hasOwnProperty(P)&&c.hasOwnProperty(P)&&c[P]!=null)if(P==="style"){var w=c[P];for(_ in w)w.hasOwnProperty(_)&&(n||(n={}),n[_]="")}else P!=="dangerouslySetInnerHTML"&&P!=="children"&&P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(zm.hasOwnProperty(P)?s||(s=[]):(s=s||[]).push(P,null));for(P in u){var E=u[P];if(w=c!=null?c[P]:void 0,u.hasOwnProperty(P)&&E!==w&&(E!=null||w!=null))if(P==="style"){if(w){for(_ in w)!w.hasOwnProperty(_)||E&&E.hasOwnProperty(_)||(n||(n={}),n[_]="");for(_ in E)E.hasOwnProperty(_)&&w[_]!==E[_]&&(n||(n={}),n[_]=E[_])}else n||(s||(s=[]),s.push(P,n)),n=E;}else P==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,w=w?w.__html:void 0,E!=null&&w!==E&&(s=s||[]).push(P,E)):P==="children"?typeof E!="string"&&typeof E!="number"||(s=s||[]).push(P,""+E):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&(zm.hasOwnProperty(P)?(E!=null&&P==="onScroll"&&wr("scroll",e),s||w===E||(s=[])):typeof E=="object"&&E!==null&&E.$$typeof===rI?E.toString():(s=s||[]).push(P,E))}n&&(s=s||[]).push("style",n);var P=s;(t.updateQueue=P)&&(t.flags|=4)}};DF=function(e,t,n,u){n!==u&&(t.flags|=4)};function gm(e,t){if(!Ro)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var u=null;n!==null;)n.alternate!==null&&(u=n),n=n.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null;}}function Cde(e,t,n){var u=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Mn(t.type)&&$_(),null;case 3:return Af(),Sr(Cn),Sr(Ki),qI(),u=t.stateNode,u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(w_(t)?t.flags|=4:u.hydrate||(t.flags|=256)),Lq(t),null;case 5:SI(t);var c=dc(Km.current);if(n=t.type,e!==null&&t.stateNode!=null)RF(e,t,n,u,c),e.ref!==t.ref&&(t.flags|=128);else{if(!u){if(t.stateNode===null)throw Error(Ue(166));return null}if(e=dc(Oo.current),w_(t)){u=t.stateNode,n=t.type;var s=t.memoizedProps;switch(u[Fu]=t,u[U_]=s,n){case"dialog":wr("cancel",u),wr("close",u);break;case"iframe":case"object":case"embed":wr("load",u);break;case"video":case"audio":for(e=0;e<wm.length;e++)wr(wm[e],u);break;case"source":wr("error",u);break;case"img":case"image":case"link":wr("error",u),wr("load",u);break;case"details":wr("toggle",u);break;case"input":pL(u,s),wr("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!s.multiple},wr("invalid",u);break;case"textarea":vL(u,s),wr("invalid",u);}vq(n,s),e=null;for(var _ in s)s.hasOwnProperty(_)&&(c=s[_],_==="children"?typeof c=="string"?u.textContent!==c&&(e=["children",c]):typeof c=="number"&&u.textContent!==""+c&&(e=["children",""+c]):zm.hasOwnProperty(_)&&c!=null&&_==="onScroll"&&wr("scroll",u));switch(n){case"input":d_(u),mL(u,s,!0);break;case"textarea":d_(u),gL(u);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(u.onclick=j_);}u=e,t.updateQueue=u,u!==null&&(t.flags|=4)}else{switch(_=c.nodeType===9?c:c.ownerDocument,e===pq.html&&(e=Az(n)),e===pq.html?n==="script"?(e=_.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=_.createElement(n,{is:u.is}):(e=_.createElement(n),n==="select"&&(_=e,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):e=_.createElementNS(e,n),e[Fu]=t,e[U_]=u,OF(e,t,!1,!1),t.stateNode=e,_=gq(n,u),n){case"dialog":wr("cancel",e),wr("close",e),c=u;break;case"iframe":case"object":case"embed":wr("load",e),c=u;break;case"video":case"audio":for(c=0;c<wm.length;c++)wr(wm[c],e);c=u;break;case"source":wr("error",e),c=u;break;case"img":case"image":case"link":wr("error",e),wr("load",e),c=u;break;case"details":wr("toggle",e),c=u;break;case"input":pL(e,u),c=lq(e,u),wr("invalid",e);break;case"option":c=fq(e,u);break;case"select":e._wrapperState={wasMultiple:!!u.multiple},c=Pr({},u,{value:void 0}),wr("invalid",e);break;case"textarea":vL(e,u),c=dq(e,u),wr("invalid",e);break;default:c=u;}vq(n,c);var w=c;for(s in w)if(w.hasOwnProperty(s)){var E=w[s];s==="style"?Mz(e,E):s==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Pz(e,E)):s==="children"?typeof E=="string"?(n!=="textarea"||E!=="")&&Fm(e,E):typeof E=="number"&&Fm(e,""+E):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zm.hasOwnProperty(s)?E!=null&&s==="onScroll"&&wr("scroll",e):E!=null&&Xq(e,s,E,_))}switch(n){case"input":d_(e),mL(e,u,!1);break;case"textarea":d_(e),gL(e);break;case"option":u.value!=null&&e.setAttribute("value",""+Zu(u.value));break;case"select":e.multiple=!!u.multiple,s=u.value,s!=null?vf(e,!!u.multiple,s,!1):u.defaultValue!=null&&vf(e,!!u.multiple,u.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=j_);}uF(n,u)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)DF(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(Ue(166));n=dc(Km.current),dc(Oo.current),w_(t)?(u=t.stateNode,n=t.memoizedProps,u[Fu]=t,u.nodeValue!==n&&(t.flags|=4)):(u=(n.nodeType===9?n:n.ownerDocument).createTextNode(u),u[Fu]=t,t.stateNode=u)}return null;case 13:return Sr(Nr),u=t.memoizedState,t.flags&64?(t.lanes=n,t):(u=u!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&w_(t):n=e.memoizedState!==null,u&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Nr.current&1?Ai===0&&(Ai=3):((Ai===0||Ai===3)&&(Ai=4),hn===null||!(ev&134217727)&&!(kf&134217727)||wf(hn,Zi))),(u||n)&&(t.flags|=4),null);case 4:return Af(),Lq(t),e===null&&aF(t.stateNode.containerInfo),null;case 10:return bI(t),null;case 17:return Mn(t.type)&&$_(),null;case 19:if(Sr(Nr),u=t.memoizedState,u===null)return null;if(s=(t.flags&64)!==0,_=u.rendering,_===null){if(s)gm(u,!1);else{if(Ai!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(_=K_(e),_!==null){for(t.flags|=64,gm(u,!1),s=_.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),u.lastEffect===null&&(t.firstEffect=null),t.lastEffect=u.lastEffect,u=n,n=t.child;n!==null;)s=n,e=u,s.flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,_=s.alternate,_===null?(s.childLanes=0,s.lanes=e,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=_.childLanes,s.lanes=_.lanes,s.child=_.child,s.memoizedProps=_.memoizedProps,s.memoizedState=_.memoizedState,s.updateQueue=_.updateQueue,s.type=_.type,e=_.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Br(Nr,Nr.current&1|2),t.child}e=e.sibling}u.tail!==null&&Wi()>Uq&&(t.flags|=64,s=!0,gm(u,!1),t.lanes=33554432)}}else{if(!s)if(e=K_(_),e!==null){if(t.flags|=64,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),gm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ro)return t=t.lastEffect=u.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Wi()-u.renderingStartTime>Uq&&n!==1073741824&&(t.flags|=64,s=!0,gm(u,!1),t.lanes=33554432);u.isBackwards?(_.sibling=t.child,t.child=_):(n=u.last,n!==null?n.sibling=_:t.child=_,u.last=_)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.lastEffect=t.lastEffect,u.renderingStartTime=Wi(),n.sibling=null,t=Nr.current,Br(Nr,s?t&1|2:t&1),n):null;case 23:case 24:return RI(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&u.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(Ue(156,t.tag))}function Mde(e){switch(e.tag){case 1:Mn(e.type)&&$_();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Af(),Sr(Cn),Sr(Ki),qI(),t=e.flags,t&64)throw Error(Ue(285));return e.flags=t&-4097|64,e;case 5:return SI(e),null;case 13:return Sr(Nr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Sr(Nr),null;case 4:return Af(),null;case 10:return bI(e),null;case 23:case 24:return RI(),null;default:return null;}}function CI(e,t){try{var n="",u=t;do n+=hfe(u),u=u.return;while(u);var c=n}catch(s){c=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:c}}function zq(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var kde=typeof WeakMap=="function"?WeakMap:Map;function LF(e,t,n){n=$u(-1,n),n.tag=3,n.payload={element:null};var u=t.value;return n.callback=function(){r0||(r0=!0,$q=u),zq(e,t)},n}function zF(e,t,n){n=$u(-1,n),n.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var c=t.value;n.payload=function(){return zq(e,t),u(c)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){typeof u!="function"&&(ko===null?ko=new Set([this]):ko.add(this),zq(e,t));var _=t.stack;this.componentDidCatch(t.value,{componentStack:_!==null?_:""})}),n}var Ode=typeof WeakSet=="function"?WeakSet:Set;function dz(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Wu(e,n)}else t.current=null}function Rde(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,u=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:no(t.type,n),u),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&gI(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(Ue(163))}function Dde(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var u=e.create;e.destroy=u()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;u=c.next,c=c.tag,c&4&&c&1&&(HF(n,e),$de(n,e)),e=u}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(u=n.elementType===n.type?t.memoizedProps:no(n.type,t.memoizedProps),e.componentDidUpdate(u,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&ZL(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode;}ZL(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&uF(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&jz(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(Ue(163))}function pz(e,t){for(var n=e;;){if(n.tag===5){var u=n.stateNode;if(t)u=u.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{u=n.stateNode;var c=n.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=Cz("display",c)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function mz(e,t){if(mc&&typeof mc.onCommitFiberUnmount=="function")try{mc.onCommitFiberUnmount(yI,t)}catch(s){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var u=n,c=u.destroy;if(u=u.tag,c!==void 0)if(u&4)HF(t,n);else{u=t;try{c()}catch(s){Wu(u,s)}}n=n.next}while(n!==e)}break;case 1:if(dz(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(s){Wu(t,s)}break;case 5:dz(t);break;case 4:FF(e,t);}}function vz(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function gz(e){return e.tag===5||e.tag===3||e.tag===4}function yz(e){e:{for(var t=e.return;t!==null;){if(gz(t))break e;t=t.return}throw Error(Ue(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var u=!1;break;case 3:t=t.containerInfo,u=!0;break;case 4:t=t.containerInfo,u=!0;break;default:throw Error(Ue(161));}n.flags&16&&(Fm(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||gz(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}u?Fq(e,n,t):Nq(e,n,t)}function Fq(e,t,n){var u=e.tag,c=u===5||u===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=j_));else if(u!==4&&(e=e.child,e!==null))for(Fq(e,t,n),e=e.sibling;e!==null;)Fq(e,t,n),e=e.sibling}function Nq(e,t,n){var u=e.tag,c=u===5||u===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(Nq(e,t,n),e=e.sibling;e!==null;)Nq(e,t,n),e=e.sibling}function FF(e,t){for(var n=t,u=!1,c,s;;){if(!u){u=n.return;e:for(;;){if(u===null)throw Error(Ue(160));switch(c=u.stateNode,u.tag){case 5:s=!1;break e;case 3:c=c.containerInfo,s=!0;break e;case 4:c=c.containerInfo,s=!0;break e;}u=u.return}u=!0}if(n.tag===5||n.tag===6){e:for(var _=e,w=n,E=w;;)if(mz(_,E),E.child!==null&&E.tag!==4)E.child.return=E,E=E.child;else{if(E===w)break e;for(;E.sibling===null;){if(E.return===null||E.return===w)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}s?(_=c,w=n.stateNode,_.nodeType===8?_.parentNode.removeChild(w):_.removeChild(w)):c.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){c=n.stateNode.containerInfo,s=!0,n.child.return=n,n=n.child;continue}}else if(mz(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(u=!1)}n.sibling.return=n.return,n=n.sibling}}function nq(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var u=n=n.next;do(u.tag&3)===3&&(e=u.destroy,u.destroy=void 0,e!==void 0&&e()),u=u.next;while(u!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){u=t.memoizedProps;var c=e!==null?e.memoizedProps:u;e=t.type;var s=t.updateQueue;if(t.updateQueue=null,s!==null){for(n[U_]=u,e==="input"&&u.type==="radio"&&u.name!=null&&Ez(n,u),gq(e,c),t=gq(e,u),c=0;c<s.length;c+=2){var _=s[c],w=s[c+1];_==="style"?Mz(n,w):_==="dangerouslySetInnerHTML"?Pz(n,w):_==="children"?Fm(n,w):Xq(n,_,w,t)}switch(e){case"input":cq(n,u);break;case"textarea":Tz(n,u);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!u.multiple,s=u.value,s!=null?vf(n,!!u.multiple,s,!1):e!==!!u.multiple&&(u.defaultValue!=null?vf(n,!!u.multiple,u.defaultValue,!0):vf(n,!!u.multiple,u.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(Ue(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,jz(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(OI=Wi(),pz(t.child,!0)),_z(t);return;case 19:_z(t);return;case 17:return;case 23:case 24:pz(t,t.memoizedState!==null);return;}throw Error(Ue(163))}function _z(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Ode),t.forEach(function(u){var c=Hde.bind(null,e,u);n.has(u)||(n.add(u),u.then(c,c))})}}function Lde(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var zde=Math.ceil,t0=xc.ReactCurrentDispatcher,MI=xc.ReactCurrentOwner,Tt=0,hn=null,si=null,Zi=0,yc=0,Bq=Qu(0),Ai=0,m0=null,Mf=0,ev=0,kf=0,kI=0,jq=null,OI=0,Uq=1/0;function Of(){Uq=Wi()+500}var ut=null,r0=!1,$q=null,ko=null,Yu=!1,Rm=null,Sm=90,Vq=[],Gq=[],qs=null,Dm=0,Hq=null,M_=-1,bs=0,k_=0,Lm=null,O_=!1;function aa(){return Tt&48?Wi():M_!==-1?M_:M_=Wi()}function Gu(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return Tf()===99?1:2;if(bs===0&&(bs=Mf),qde.transition!==0){k_!==0&&(k_=jq!==null?jq.pendingLanes:0),e=bs;var t=4186112&~k_;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Tf(),Tt&4&&e===98?e=N_(12,bs):(e=Tfe(e),e=N_(e,bs)),e}function Hu(e,t,n){if(50<Dm)throw Dm=0,Hq=null,Error(Ue(185));if(e=v0(e,t),e===null)return null;u0(e,t,n),e===hn&&(kf|=t,Ai===4&&wf(e,Zi));var u=Tf();t===1?Tt&8&&!(Tt&48)?Wq(e):(Pa(e,n),Tt===0&&(Of(),Do())):(!(Tt&4)||u!==98&&u!==99||(qs===null?qs=new Set([e]):qs.add(e)),Pa(e,n)),jq=e}function v0(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function Pa(e,t){for(var n=e.callbackNode,u=e.suspendedLanes,c=e.pingedLanes,s=e.expirationTimes,_=e.pendingLanes;0<_;){var w=31-Ku(_),E=1<<w,P=s[w];if(P===-1){if(!(E&u)||E&c){P=t,sf(E);var C=mr;s[w]=10<=C?P+250:6<=C?P+5e3:-1}}else P<=t&&(e.expiredLanes|=E);_&=~E}if(u=Um(e,e===hn?Zi:0),t=mr,u===0)n!==null&&(n!==QS&&Aq(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==QS&&Aq(n)}t===15?(n=Wq.bind(null,e),xs===null?(xs=[n],C_=_I(d0,vF)):xs.push(n),n=QS):t===14?n=Hm(99,Wq.bind(null,e)):(n=Afe(t),n=Hm(n,NF.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function NF(e){if(M_=-1,k_=bs=0,Tt&48)throw Error(Ue(327));var t=e.callbackNode;if(el()&&e.callbackNode!==t)return null;var n=Um(e,e===hn?Zi:0);if(n===0)return null;var u=n,c=Tt;Tt|=16;var s=$F();(hn!==e||Zi!==u)&&(Of(),Sf(e,u));do try{Bde();break}catch(w){UF(e,w)}while(!0);if(xI(),t0.current=s,Tt=c,si!==null?u=0:(hn=null,Zi=0,u=Ai),Mf&kf)Sf(e,0);else if(u!==0){if(u===2&&(Tt|=64,e.hydrate&&(e.hydrate=!1,gI(e.containerInfo)),n=Zz(e),n!==0&&(u=qm(e,n))),u===1)throw t=m0,Sf(e,0),wf(e,n),Pa(e,Wi()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,u){case 0:case 1:throw Error(Ue(345));case 2:lc(e);break;case 3:if(wf(e,n),(n&62914560)===n&&(u=OI+500-Wi(),10<u)){if(Um(e,0)!==0)break;if(c=e.suspendedLanes,(c&n)!==n){aa(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=BL(lc.bind(null,e),u);break}lc(e);break;case 4:if(wf(e,n),(n&4186112)===n)break;for(u=e.eventTimes,c=-1;0<n;){var _=31-Ku(n);s=1<<_,_=u[_],_>c&&(c=_),n&=~s}if(n=c,n=Wi()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*zde(n/1960))-n,10<n){e.timeoutHandle=BL(lc.bind(null,e),n);break}lc(e);break;case 5:lc(e);break;default:throw Error(Ue(329));}}return Pa(e,Wi()),e.callbackNode===t?NF.bind(null,e):null}function wf(e,t){for(t&=~kI,t&=~kf,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ku(t),u=1<<n;e[n]=-1,t&=~u}}function Wq(e){if(Tt&48)throw Error(Ue(327));if(el(),e===hn&&e.expiredLanes&Zi){var t=Zi,n=qm(e,t);Mf&kf&&(t=Um(e,t),n=qm(e,t))}else t=Um(e,0),n=qm(e,t);if(e.tag!==0&&n===2&&(Tt|=64,e.hydrate&&(e.hydrate=!1,gI(e.containerInfo)),t=Zz(e),t!==0&&(n=qm(e,t))),n===1)throw n=m0,Sf(e,0),wf(e,t),Pa(e,Wi()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,lc(e),Pa(e,Wi()),null}function Fde(){if(qs!==null){var e=qs;qs=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Pa(t,Wi())})}Do()}function BF(e,t){var n=Tt;Tt|=1;try{return e(t)}finally{Tt=n,Tt===0&&(Of(),Do())}}function jF(e,t){var n=Tt;Tt&=-2,Tt|=8;try{return e(t)}finally{Tt=n,Tt===0&&(Of(),Do())}}function q_(e,t){Br(Bq,yc),yc|=t,Mf|=t}function RI(){yc=Bq.current,Sr(Bq)}function Sf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,yde(n)),si!==null)for(n=si.return;n!==null;){var u=n;switch(u.tag){case 1:u=u.type.childContextTypes,u!=null&&$_();break;case 3:Af(),Sr(Cn),Sr(Ki),qI();break;case 5:SI(u);break;case 4:Af();break;case 13:Sr(Nr);break;case 19:Sr(Nr);break;case 10:bI(u);break;case 23:case 24:RI();}n=n.return}hn=e,si=Ju(e.current,null),Zi=yc=Mf=t,Ai=0,m0=null,kI=kf=ev=0}function UF(e,t){do{var n=si;try{if(xI(),km.current=e0,X_){for(var u=Wr.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}X_=!1}if(Xm=0,Ti=Hi=Wr=null,Om=!1,MI.current=null,n===null||n.return===null){Ai=1,m0=t,si=null;break}e:{var s=e,_=n.return,w=n,E=t;if(t=Zi,w.flags|=2048,w.firstEffect=w.lastEffect=null,E!==null&&typeof E=="object"&&typeof E.then=="function"){var P=E;if(!(w.mode&2)){var C=w.alternate;C?(w.updateQueue=C.updateQueue,w.memoizedState=C.memoizedState,w.lanes=C.lanes):(w.updateQueue=null,w.memoizedState=null)}var B=(Nr.current&1)!==0,$=_;do{var re;if(re=$.tag===13){var xe=$.memoizedState;if(xe!==null)re=xe.dehydrated!==null;else{var ye=$.memoizedProps;re=ye.fallback===void 0?!1:ye.unstable_avoidThisFallback!==!0?!0:!B}}if(re){var X=$.updateQueue;if(X===null){var K=new Set;K.add(P),$.updateQueue=K}else X.add(P);if(!($.mode&2)){if($.flags|=64,w.flags|=16384,w.flags&=-2981,w.tag===1)if(w.alternate===null)w.tag=17;else{var ie=$u(-1,1);ie.tag=2,Vu(w,ie)}w.lanes|=1;break e}E=void 0,w=t;var _e=s.pingCache;if(_e===null?(_e=s.pingCache=new kde,E=new Set,_e.set(P,E)):(E=_e.get(P),E===void 0&&(E=new Set,_e.set(P,E))),!E.has(w)){E.add(w);var be=Gde.bind(null,s,P,w);P.then(be,be)}$.flags|=4096,$.lanes=t;break e}$=$.return}while($!==null);E=Error((mf(w.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ai!==5&&(Ai=2),E=CI(E,w),$=_;do{switch($.tag){case 3:s=E,$.flags|=4096,t&=-t,$.lanes|=t;var Qe=LF($,s,t);WL($,Qe);break e;case 1:s=E;var Le=$.type,nt=$.stateNode;if(!($.flags&64)&&(typeof Le.getDerivedStateFromError=="function"||nt!==null&&typeof nt.componentDidCatch=="function"&&(ko===null||!ko.has(nt)))){$.flags|=4096,t&=-t,$.lanes|=t;var gt=zF($,s,t);WL($,gt);break e}}$=$.return}while($!==null)}GF(n)}catch(Je){t=Je,si===n&&n!==null&&(si=n=n.return);continue}break}while(!0)}function $F(){var e=t0.current;return t0.current=e0,e===null?e0:e}function qm(e,t){var n=Tt;Tt|=16;var u=$F();hn===e&&Zi===t||Sf(e,t);do try{Nde();break}catch(c){UF(e,c)}while(!0);if(xI(),Tt=n,t0.current=u,si!==null)throw Error(Ue(261));return hn=null,Zi=0,Ai}function Nde(){for(;si!==null;)VF(si)}function Bde(){for(;si!==null&&!bde();)VF(si)}function VF(e){var t=WF(e.alternate,e,yc);e.memoizedProps=e.pendingProps,t===null?GF(e):si=t,MI.current=null}function GF(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&2048){if(n=Mde(t),n!==null){n.flags&=2047,si=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(n=Cde(n,t,yc),n!==null){si=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||yc&1073741824||!(n.mode&4)){for(var u=0,c=n.child;c!==null;)u|=c.lanes|c.childLanes,c=c.sibling;n.childLanes=u}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){si=t;return}si=t=e}while(t!==null);Ai===0&&(Ai=5)}function lc(e){var t=Tf();return gc(99,jde.bind(null,e,t)),null}function jde(e,t){do el();while(Rm!==null);if(Tt&48)throw Error(Ue(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ue(177));e.callbackNode=null;var u=n.lanes|n.childLanes,c=u,s=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var _=e.eventTimes,w=e.expirationTimes;0<s;){var E=31-Ku(s),P=1<<E;c[E]=0,_[E]=-1,w[E]=-1,s&=~P}if(qs!==null&&!(u&24)&&qs.has(e)&&qs.delete(e),e===hn&&(si=hn=null,Zi=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,u=n.firstEffect):u=n:u=n.firstEffect,u!==null){if(c=Tt,Tt|=32,MI.current=null,XS=E_,_=RL(),Sq(_)){if("selectionStart"in _)w={start:_.selectionStart,end:_.selectionEnd};else e:if(w=(w=_.ownerDocument)&&w.defaultView||window,(P=w.getSelection&&w.getSelection())&&P.rangeCount!==0){w=P.anchorNode,s=P.anchorOffset,E=P.focusNode,P=P.focusOffset;try{w.nodeType,E.nodeType}catch(Je){w=null;break e}var C=0,B=-1,$=-1,re=0,xe=0,ye=_,X=null;t:for(;;){for(var K;ye!==w||s!==0&&ye.nodeType!==3||(B=C+s),ye!==E||P!==0&&ye.nodeType!==3||($=C+P),ye.nodeType===3&&(C+=ye.nodeValue.length),(K=ye.firstChild)!==null;)X=ye,ye=K;for(;;){if(ye===_)break t;if(X===w&&++re===s&&(B=C),X===E&&++xe===P&&($=C),(K=ye.nextSibling)!==null)break;ye=X,X=ye.parentNode}ye=K}w=B===-1||$===-1?null:{start:B,end:$}}else w=null;w=w||{start:0,end:0}}else w=null;YS={focusedElem:_,selectionRange:w},E_=!1,Lm=null,O_=!1,ut=u;do try{Ude()}catch(Je){if(ut===null)throw Error(Ue(330));Wu(ut,Je),ut=ut.nextEffect}while(ut!==null);Lm=null,ut=u;do try{for(_=e;ut!==null;){var ie=ut.flags;if(ie&16&&Fm(ut.stateNode,""),ie&128){var _e=ut.alternate;if(_e!==null){var be=_e.ref;be!==null&&(typeof be=="function"?be(null):be.current=null)}}switch(ie&1038){case 2:yz(ut),ut.flags&=-3;break;case 6:yz(ut),ut.flags&=-3,nq(ut.alternate,ut);break;case 1024:ut.flags&=-1025;break;case 1028:ut.flags&=-1025,nq(ut.alternate,ut);break;case 4:nq(ut.alternate,ut);break;case 8:w=ut,FF(_,w);var Qe=w.alternate;vz(w),Qe!==null&&vz(Qe);}ut=ut.nextEffect}}catch(Je){if(ut===null)throw Error(Ue(330));Wu(ut,Je),ut=ut.nextEffect}while(ut!==null);if(be=YS,_e=RL(),ie=be.focusedElem,_=be.selectionRange,_e!==ie&&ie&&ie.ownerDocument&&rF(ie.ownerDocument.documentElement,ie)){for(_!==null&&Sq(ie)&&(_e=_.start,be=_.end,be===void 0&&(be=_e),("selectionStart"in ie)?(ie.selectionStart=_e,ie.selectionEnd=Math.min(be,ie.value.length)):(be=(_e=ie.ownerDocument||document)&&_e.defaultView||window,be.getSelection&&(be=be.getSelection(),w=ie.textContent.length,Qe=Math.min(_.start,w),_=_.end===void 0?Qe:Math.min(_.end,w),!be.extend&&Qe>_&&(w=_,_=Qe,Qe=w),w=OL(ie,Qe),s=OL(ie,_),w&&s&&(be.rangeCount!==1||be.anchorNode!==w.node||be.anchorOffset!==w.offset||be.focusNode!==s.node||be.focusOffset!==s.offset)&&(_e=_e.createRange(),_e.setStart(w.node,w.offset),be.removeAllRanges(),Qe>_?(be.addRange(_e),be.extend(s.node,s.offset)):(_e.setEnd(s.node,s.offset),be.addRange(_e)))))),_e=[],be=ie;be=be.parentNode;)be.nodeType===1&&_e.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof ie.focus=="function"&&ie.focus(),ie=0;ie<_e.length;ie++)be=_e[ie],be.element.scrollLeft=be.left,be.element.scrollTop=be.top}E_=!!XS,YS=XS=null,e.current=n,ut=u;do try{for(ie=e;ut!==null;){var Le=ut.flags;if(Le&36&&Dde(ie,ut.alternate,ut),Le&128){_e=void 0;var nt=ut.ref;if(nt!==null){var gt=ut.stateNode;switch(ut.tag){case 5:_e=gt;break;default:_e=gt;}typeof nt=="function"?nt(_e):nt.current=_e}}ut=ut.nextEffect}}catch(Je){if(ut===null)throw Error(Ue(330));Wu(ut,Je),ut=ut.nextEffect}while(ut!==null);ut=null,Sde(),Tt=c}else e.current=n;if(Yu)Yu=!1,Rm=e,Sm=t;else for(ut=u;ut!==null;)t=ut.nextEffect,ut.nextEffect=null,ut.flags&8&&(Le=ut,Le.sibling=null,Le.stateNode=null),ut=t;if(u=e.pendingLanes,u===0&&(ko=null),u===1?e===Hq?Dm++:(Dm=0,Hq=e):Dm=0,n=n.stateNode,mc&&typeof mc.onCommitFiberRoot=="function")try{mc.onCommitFiberRoot(yI,n,void 0,(n.current.flags&64)===64)}catch(Je){}if(Pa(e,Wi()),r0)throw r0=!1,e=$q,$q=null,e;return Tt&8||Do(),null}function Ude(){for(;ut!==null;){var e=ut.alternate;O_||Lm===null||(ut.flags&8?xL(ut,Lm)&&(O_=!0):ut.tag===13&&Lde(e,ut)&&xL(ut,Lm)&&(O_=!0));var t=ut.flags;t&256&&Rde(e,ut),!(t&512)||Yu||(Yu=!0,Hm(97,function(){return el(),null})),ut=ut.nextEffect}}function el(){if(Sm!==90){var e=97<Sm?97:Sm;return Sm=90,gc(e,Vde)}return!1}function $de(e,t){Vq.push(t,e),Yu||(Yu=!0,Hm(97,function(){return el(),null}))}function HF(e,t){Gq.push(t,e),Yu||(Yu=!0,Hm(97,function(){return el(),null}))}function Vde(){if(Rm===null)return!1;var e=Rm;if(Rm=null,Tt&48)throw Error(Ue(331));var t=Tt;Tt|=32;var n=Gq;Gq=[];for(var u=0;u<n.length;u+=2){var c=n[u],s=n[u+1],_=c.destroy;if(c.destroy=void 0,typeof _=="function")try{_()}catch(E){if(s===null)throw Error(Ue(330));Wu(s,E)}}for(n=Vq,Vq=[],u=0;u<n.length;u+=2){c=n[u],s=n[u+1];try{var w=c.create;c.destroy=w()}catch(E){if(s===null)throw Error(Ue(330));Wu(s,E)}}for(w=e.current.firstEffect;w!==null;)e=w.nextEffect,w.nextEffect=null,w.flags&8&&(w.sibling=null,w.stateNode=null),w=e;return Tt=t,Do(),!0}function xz(e,t,n){t=CI(n,t),t=LF(e,t,1),Vu(e,t),t=aa(),e=v0(e,1),e!==null&&(u0(e,1,t),Pa(e,t))}function Wu(e,t){if(e.tag===3)xz(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){xz(n,e,t);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(ko===null||!ko.has(u))){e=CI(t,e);var c=zF(n,e,1);if(Vu(n,c),c=aa(),n=v0(n,1),n!==null)u0(n,1,c),Pa(n,c);else if(typeof u.componentDidCatch=="function"&&(ko===null||!ko.has(u)))try{u.componentDidCatch(t,e)}catch(s){}break}}n=n.return}}function Gde(e,t,n){var u=e.pingCache;u!==null&&u.delete(t),t=aa(),e.pingedLanes|=e.suspendedLanes&n,hn===e&&(Zi&n)===n&&(Ai===4||Ai===3&&(Zi&62914560)===Zi&&500>Wi()-OI?Sf(e,0):kI|=n),Pa(e,t)}function Hde(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(bs===0&&(bs=Mf),t=uf(62914560&~bs),t===0&&(t=4194304)):t=Tf()===99?1:2:t=1),n=aa(),e=v0(e,t),e!==null&&(u0(e,t,n),Pa(e,n))}var WF;WF=function(e,t,n){var u=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Cn.current)ao=!0;else if(n&u)ao=!!(e.flags&16384);else{switch(ao=!1,t.tag){case 3:oz(t),tq();break;case 5:YL(t);break;case 1:Mn(t.type)&&P_(t);break;case 4:Mq(t,t.stateNode.containerInfo);break;case 10:u=t.memoizedProps.value;var c=t.type._context;Br(V_,c._currentValue),c._currentValue=u;break;case 13:if(t.memoizedState!==null)return n&t.child.childLanes?sz(e,t,n):(Br(Nr,Nr.current&1),t=Ss(e,t,n),t!==null?t.sibling:null);Br(Nr,Nr.current&1);break;case 19:if(u=(n&t.childLanes)!==0,e.flags&64){if(u)return fz(e,t,n);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Br(Nr,Nr.current),u)break;return null;case 23:case 24:return t.lanes=0,rq(e,t,n);}return Ss(e,t,n)}}else ao=!1;switch(t.lanes=0,t.tag){case 2:if(u=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=Ef(t,Ki.current),xf(t,n),c=EI(null,t,u,e,c,n),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mn(u)){var s=!0;P_(t)}else s=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,wI(t);var _=u.getDerivedStateFromProps;typeof _=="function"&&W_(t,u,_,e),c.updater=p0,t.stateNode=c,c._reactInternals=t,Cq(t,u,e,n),t=Dq(null,t,u,!0,s,n)}else t.tag=0,Pn(null,t,c,n),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,s=c._init,c=s(c._payload),t.type=c,s=t.tag=Zde(c),e=no(c,e),s){case 0:t=Rq(null,t,c,e,n);break e;case 1:t=az(null,t,c,e,n);break e;case 11:t=iz(null,t,c,e,n);break e;case 14:t=nz(null,t,c,no(c.type,e),u,n);break e;}throw Error(Ue(306,c,""))}return t;case 0:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:no(u,c),Rq(e,t,u,c,n);case 1:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:no(u,c),az(e,t,u,c,n);case 3:if(oz(t),u=t.updateQueue,e===null||u===null)throw Error(Ue(282));if(u=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,yF(e,t),Wm(t,u,null,n),u=t.memoizedState.element,u===c)tq(),t=Ss(e,t,n);else{if(c=t.stateNode,(s=c.hydrate)&&(Nu=_f(t.stateNode.containerInfo.firstChild),ws=t,s=Ro=!0),s){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)s=e[c],s._workInProgressVersionPrimary=e[c+1],bf.push(s);for(n=wF(t,null,u,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else Pn(e,t,u,n),tq();t=t.child}return t;case 5:return YL(t),e===null&&kq(t),u=t.type,c=t.pendingProps,s=e!==null?e.memoizedProps:null,_=c.children,Eq(u,c)?_=null:s!==null&&Eq(u,s)&&(t.flags|=16),kF(e,t),Pn(e,t,_,n),t.child;case 6:return e===null&&kq(t),null;case 13:return sz(e,t,n);case 4:return Mq(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Z_(t,null,u,n):Pn(e,t,u,n),t.child;case 11:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:no(u,c),iz(e,t,u,c,n);case 7:return Pn(e,t,t.pendingProps,n),t.child;case 8:return Pn(e,t,t.pendingProps.children,n),t.child;case 12:return Pn(e,t,t.pendingProps.children,n),t.child;case 10:e:{u=t.type._context,c=t.pendingProps,_=t.memoizedProps,s=c.value;var w=t.type._context;if(Br(V_,w._currentValue),w._currentValue=s,_!==null)if(w=_.value,s=Ia(w,s)?0:(typeof u._calculateChangedBits=="function"?u._calculateChangedBits(w,s):1073741823)|0,s===0){if(_.children===c.children&&!Cn.current){t=Ss(e,t,n);break e}}else for(w=t.child,w!==null&&(w.return=t);w!==null;){var E=w.dependencies;if(E!==null){_=w.child;for(var P=E.firstContext;P!==null;){if(P.context===u&&P.observedBits&s){w.tag===1&&(P=$u(-1,n&-n),P.tag=2,Vu(w,P)),w.lanes|=n,P=w.alternate,P!==null&&(P.lanes|=n),gF(w.return,n),E.lanes|=n;break}P=P.next}}else _=w.tag===10&&w.type===t.type?null:w.child;if(_!==null)_.return=w;else for(_=w;_!==null;){if(_===t){_=null;break}if(w=_.sibling,w!==null){w.return=_.return,_=w;break}_=_.return}w=_}Pn(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,s=t.pendingProps,u=s.children,xf(t,n),c=Aa(c,s.unstable_observedBits),u=u(c),t.flags|=1,Pn(e,t,u,n),t.child;case 14:return c=t.type,s=no(c,t.pendingProps),s=no(c.type,s),nz(e,t,c,s,u,n);case 15:return MF(e,t,t.type,t.pendingProps,u,n);case 17:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:no(u,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Mn(u)?(e=!0,P_(t)):e=!1,xf(t,n),xF(t,u,c),Cq(t,u,c,n),Dq(null,t,u,!0,e,n);case 19:return fz(e,t,n);case 23:return rq(e,t,n);case 24:return rq(e,t,n);}throw Error(Ue(156,t.tag))};function Wde(e,t,n,u){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ea(e,t,n,u){return new Wde(e,t,n,u)}function DI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Zde(e){if(typeof e=="function")return DI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===a0)return 11;if(e===o0)return 14}return 2}function Ju(e,t){var n=e.alternate;return n===null?(n=Ea(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function R_(e,t,n,u,c,s){var _=2;if(u=e,typeof e=="function")DI(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case Lu:return qf(n.children,c,s,t);case Sz:_=8,c|=16;break;case Yq:_=8,c|=1;break;case Im:return e=Ea(12,n,t,c|8),e.elementType=Im,e.type=Im,e.lanes=s,e;case Em:return e=Ea(13,n,t,c),e.type=Em,e.elementType=Em,e.lanes=s,e;case D_:return e=Ea(19,n,t,c),e.elementType=D_,e.lanes=s,e;case iI:return LI(n,c,s,t);case uq:return e=Ea(24,n,t,c),e.elementType=uq,e.lanes=s,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Jq:_=10;break e;case Qq:_=9;break e;case a0:_=11;break e;case o0:_=14;break e;case eI:_=16,u=null;break e;case tI:_=22;break e;}throw Error(Ue(130,e==null?e:typeof e,""));}return t=Ea(_,n,t,c),t.elementType=e,t.type=u,t.lanes=s,t}function qf(e,t,n,u){return e=Ea(7,e,u,t),e.lanes=n,e}function LI(e,t,n,u){return e=Ea(23,e,u,t),e.elementType=iI,e.lanes=n,e}function aq(e,t,n){return e=Ea(6,e,null,t),e.lanes=n,e}function oq(e,t,n){return t=Ea(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Kde(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=VS(0),this.expirationTimes=VS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=VS(0),this.mutableSourceEagerHydrationData=null}function Xde(e,t,n){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:cc,key:u==null?null:""+u,children:e,containerInfo:t,implementation:n}}function i0(e,t,n,u){var c=t.current,s=aa(),_=Gu(c);e:if(n){n=n._reactInternals;t:{if(bc(n)!==n||n.tag!==1)throw Error(Ue(170));var w=n;do{switch(w.tag){case 3:w=w.stateNode.context;break t;case 1:if(Mn(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break t}}w=w.return}while(w!==null);throw Error(Ue(171))}if(n.tag===1){var E=n.type;if(Mn(E)){n=cF(n,E,w);break e}}n=w}else n=Xu;return t.context===null?t.context=n:t.pendingContext=n,t=$u(s,_),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),Vu(c,t),Hu(c,_,s),_}function sq(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function bz(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function zI(e,t){bz(e,t),(e=e.alternate)&&bz(e,t)}function Yde(){return null}function FI(e,t,n){var u=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new Kde(e,t,n!=null&&n.hydrate===!0),t=Ea(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,wI(t),e[Cf]=n.current,aF(e.nodeType===8?e.parentNode:e),u)for(e=0;e<u.length;e++){t=u[e];var c=t._getVersion;c=c(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,c]:n.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=n}FI.prototype.render=function(e){i0(e,this._internalRoot,null,null)};FI.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;i0(null,e,null,function(){t[Cf]=null})};function tv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Jde(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new FI(e,0,t?{hydrate:!0}:void 0)}function g0(e,t,n,u,c){var s=n._reactRootContainer;if(s){var _=s._internalRoot;if(typeof c=="function"){var w=c;c=function(){var P=sq(_);w.call(P)}}i0(t,_,e,c)}else{if(s=n._reactRootContainer=Jde(n,u),_=s._internalRoot,typeof c=="function"){var E=c;c=function(){var P=sq(_);E.call(P)}}jF(function(){i0(t,_,e,c)})}return sq(_)}Fz=function(e){if(e.tag===13){var t=aa();Hu(e,4,t),zI(e,4)}};uI=function(e){if(e.tag===13){var t=aa();Hu(e,67108864,t),zI(e,67108864)}};Nz=function(e){if(e.tag===13){var t=aa(),n=Gu(e);Hu(e,n,t),zI(e,n)}};Bz=function(e,t){return t()};yq=function(e,t,n){switch(t){case"input":if(cq(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<n.length;t++){var u=n[t];if(u!==e&&u.form===e.form){var c=f0(u);if(!c)throw Error(Ue(90));Iz(u),cq(u,c)}}}break;case"textarea":Tz(e,n);break;case"select":t=n.value,t!=null&&vf(e,!!n.multiple,t,!1);}};aI=BF;Rz=function(e,t,n,u,c){var s=Tt;Tt|=4;try{return gc(98,e.bind(null,t,n,u,c))}finally{Tt=s,Tt===0&&(Of(),Do())}};oI=function(){!(Tt&49)&&(Fde(),el())};Dz=function(e,t){var n=Tt;Tt|=2;try{return e(t)}finally{Tt=n,Tt===0&&(Of(),Do())}};function ZF(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!tv(t))throw Error(Ue(200));return Xde(e,t,null,n)}var Qde={Events:[Jm,ff,f0,kz,Oz,el,{current:!1}]},ym={findFiberByHostInstance:fc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},epe={bundleType:ym.bundleType,version:ym.version,rendererPackageName:ym.rendererPackageName,rendererConfig:ym.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:xc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=zz(e),e===null?null:e.stateNode},findFiberByHostInstance:ym.findFiberByHostInstance||Yde,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(_m=__REACT_DEVTOOLS_GLOBAL_HOOK__,!_m.isDisabled&&_m.supportsFiber))try{yI=_m.inject(epe),mc=_m}catch(e){}var _m;Ca.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Qde;Ca.createPortal=ZF;Ca.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):Error(Ue(268,Object.keys(e)));return e=zz(t),e=e===null?null:e.stateNode,e};Ca.flushSync=function(e,t){var n=Tt;if(n&48)return e(t);Tt|=1;try{if(e)return gc(99,e.bind(null,t))}finally{Tt=n,Do()}};Ca.hydrate=function(e,t,n){if(!tv(t))throw Error(Ue(200));return g0(null,e,t,!0,n)};Ca.render=function(e,t,n){if(!tv(t))throw Error(Ue(200));return g0(null,e,t,!1,n)};Ca.unmountComponentAtNode=function(e){if(!tv(e))throw Error(Ue(40));return e._reactRootContainer?(jF(function(){g0(null,null,e,!1,function(){e._reactRootContainer=null,e[Cf]=null})}),!0):!1};Ca.unstable_batchedUpdates=BF;Ca.unstable_createPortal=function(e,t){return ZF(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Ca.unstable_renderSubtreeIntoContainer=function(e,t,n,u){if(!tv(n))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return g0(e,t,n,!1,u)};Ca.version="17.0.2"});var JF=I((Sct,YF)=>{"use strict";function XF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(XF)}catch(e){console.error(e)}}XF(),YF.exports=KF()});var it=I((QF,eN)=>{"use strict";var y0=function(e){return e&&e.Math===Math&&e};eN.exports=y0(typeof globalThis=="object"&&globalThis)||y0(typeof window=="object"&&window)||y0(typeof self=="object"&&self)||y0(typeof global=="object"&&global)||function(){return this}()||QF||Function("return this")()});var Oe=I((qct,tN)=>{"use strict";tN.exports=function(e){try{return!!e()}catch(t){return!0}}});var ft=I((Ict,rN)=>{"use strict";var tpe=Oe();rN.exports=!tpe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var Rf=I((Ect,iN)=>{"use strict";var rpe=Oe();iN.exports=!rpe(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var He=I((Tct,nN)=>{"use strict";var ipe=Rf(),_0=Function.prototype.call;nN.exports=ipe?_0.bind(_0):function(){return _0.apply(_0,arguments)}});var rv=I(sN=>{"use strict";var aN={}.propertyIsEnumerable,oN=Object.getOwnPropertyDescriptor,npe=oN&&!aN.call({1:2},1);sN.f=npe?function(t){var n=oN(this,t);return!!n&&n.enumerable}:aN});var kn=I((Pct,uN)=>{"use strict";uN.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Pe=I((Cct,hN)=>{"use strict";var lN=Rf(),cN=Function.prototype,NI=cN.call,ape=lN&&cN.bind.bind(NI,NI);hN.exports=lN?ape:function(e){return function(){return NI.apply(e,arguments)}}});var Ci=I((Mct,dN)=>{"use strict";var fN=Pe(),ope=fN({}.toString),spe=fN("".slice);dN.exports=function(e){return spe(ope(e),8,-1)}});var Es=I((kct,pN)=>{"use strict";var upe=Pe(),lpe=Oe(),cpe=Ci(),BI=Object,hpe=upe("".split);pN.exports=lpe(function(){return!BI("z").propertyIsEnumerable(0)})?function(e){return cpe(e)==="String"?hpe(e,""):BI(e)}:BI});var Zr=I((Oct,mN)=>{"use strict";mN.exports=function(e){return e==null}});var vr=I((Rct,vN)=>{"use strict";var fpe=Zr(),dpe=TypeError;vN.exports=function(e){if(fpe(e))throw new dpe("Can't call method on "+e);return e}});var ri=I((Dct,gN)=>{"use strict";var ppe=Es(),mpe=vr();gN.exports=function(e){return ppe(mpe(e))}});var UI=I((Lct,yN)=>{"use strict";var jI=typeof document=="object"&&document.all,vpe=typeof jI=="undefined"&&jI!==void 0;yN.exports={all:jI,IS_HTMLDDA:vpe}});var qt=I((zct,xN)=>{"use strict";var _N=UI(),gpe=_N.all;xN.exports=_N.IS_HTMLDDA?function(e){return typeof e=="function"||e===gpe}:function(e){return typeof e=="function"}});var It=I((Fct,SN)=>{"use strict";var bN=qt(),wN=UI(),ype=wN.all;SN.exports=wN.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:bN(e)||e===ype}:function(e){return typeof e=="object"?e!==null:bN(e)}});var xt=I((Nct,qN)=>{"use strict";var $I=it(),_pe=qt(),xpe=function(e){return _pe(e)?e:void 0};qN.exports=function(e,t){return arguments.length<2?xpe($I[e]):$I[e]&&$I[e][t]}});var Xi=I((Bct,IN)=>{"use strict";var bpe=Pe();IN.exports=bpe({}.isPrototypeOf)});var Lo=I((jct,EN)=>{"use strict";EN.exports=typeof navigator!="undefined"&&String(navigator.userAgent)||""});var zo=I((Uct,kN)=>{"use strict";var MN=it(),VI=Lo(),TN=MN.process,AN=MN.Deno,PN=TN&&TN.versions||AN&&AN.version,CN=PN&&PN.v8,oo,x0;CN&&(oo=CN.split("."),x0=oo[0]>0&&oo[0]<4?1:+(oo[0]+oo[1]));!x0&&VI&&(oo=VI.match(/Edge\/(\d+)/),(!oo||oo[1]>=74)&&(oo=VI.match(/Chrome\/(\d+)/),oo&&(x0=+oo[1])));kN.exports=x0});var tl=I(($ct,RN)=>{"use strict";var ON=zo(),wpe=Oe(),Spe=it(),qpe=Spe.String;RN.exports=!!Object.getOwnPropertySymbols&&!wpe(function(){var e=Symbol("symbol detection");return!qpe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&ON&&ON<41})});var GI=I((Vct,DN)=>{"use strict";var Ipe=tl();DN.exports=Ipe&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Ts=I((Gct,LN)=>{"use strict";var Epe=xt(),Tpe=qt(),Ape=Xi(),Ppe=GI(),Cpe=Object;LN.exports=Ppe?function(e){return typeof e=="symbol"}:function(e){var t=Epe("Symbol");return Tpe(t)&&Ape(t.prototype,Cpe(e))}});var rl=I((Hct,zN)=>{"use strict";var Mpe=String;zN.exports=function(e){try{return Mpe(e)}catch(t){return"Object"}}});var bt=I((Wct,FN)=>{"use strict";var kpe=qt(),Ope=rl(),Rpe=TypeError;FN.exports=function(e){if(kpe(e))return e;throw new Rpe(Ope(e)+" is not a function")}});var jr=I((Zct,NN)=>{"use strict";var Dpe=bt(),Lpe=Zr();NN.exports=function(e,t){var n=e[t];return Lpe(n)?void 0:Dpe(n)}});var KI=I((Kct,BN)=>{"use strict";var HI=He(),WI=qt(),ZI=It(),zpe=TypeError;BN.exports=function(e,t){var n,u;if(t==="string"&&WI(n=e.toString)&&!ZI(u=HI(n,e))||WI(n=e.valueOf)&&!ZI(u=HI(n,e))||t!=="string"&&WI(n=e.toString)&&!ZI(u=HI(n,e)))return u;throw new zpe("Can't convert object to primitive value")}});var Dt=I((Xct,jN)=>{"use strict";jN.exports=!1});var b0=I((Yct,$N)=>{"use strict";var UN=it(),Fpe=Object.defineProperty;$N.exports=function(e,t){try{Fpe(UN,e,{value:t,configurable:!0,writable:!0})}catch(n){UN[e]=t}return t}});var iv=I((Jct,GN)=>{"use strict";var Npe=it(),Bpe=b0(),VN="__core-js_shared__",jpe=Npe[VN]||Bpe(VN,{});GN.exports=jpe});var Fo=I((Qct,WN)=>{"use strict";var Upe=Dt(),HN=iv();(WN.exports=function(e,t){return HN[e]||(HN[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.33.0",mode:Upe?"pure":"global",copyright:"\xA9 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Lt=I((eht,ZN)=>{"use strict";var $pe=vr(),Vpe=Object;ZN.exports=function(e){return Vpe($pe(e))}});var Mt=I((tht,KN)=>{"use strict";var Gpe=Pe(),Hpe=Lt(),Wpe=Gpe({}.hasOwnProperty);KN.exports=Object.hasOwn||function(t,n){return Wpe(Hpe(t),n)}});var il=I((rht,XN)=>{"use strict";var Zpe=Pe(),Kpe=0,Xpe=Math.random(),Ype=Zpe(1 .toString);XN.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Ype(++Kpe+Xpe,36)}});var pt=I((iht,JN)=>{"use strict";var Jpe=it(),Qpe=Fo(),YN=Mt(),eme=il(),tme=tl(),rme=GI(),Df=Jpe.Symbol,XI=Qpe("wks"),ime=rme?Df.for||Df:Df&&Df.withoutSetter||eme;JN.exports=function(e){return YN(XI,e)||(XI[e]=tme&&YN(Df,e)?Df[e]:ime("Symbol."+e)),XI[e]}});var nv=I((nht,tB)=>{"use strict";var nme=He(),QN=It(),eB=Ts(),ame=jr(),ome=KI(),sme=pt(),ume=TypeError,lme=sme("toPrimitive");tB.exports=function(e,t){if(!QN(e)||eB(e))return e;var n=ame(e,lme),u;if(n){if(t===void 0&&(t="default"),u=nme(n,e,t),!QN(u)||eB(u))return u;throw new ume("Can't convert object to primitive value")}return t===void 0&&(t="number"),ome(e,t)}});var so=I((aht,rB)=>{"use strict";var cme=nv(),hme=Ts();rB.exports=function(e){var t=cme(e,"string");return hme(t)?t:t+""}});var av=I((oht,nB)=>{"use strict";var fme=it(),iB=It(),YI=fme.document,dme=iB(YI)&&iB(YI.createElement);nB.exports=function(e){return dme?YI.createElement(e):{}}});var JI=I((sht,aB)=>{"use strict";var pme=ft(),mme=Oe(),vme=av();aB.exports=!pme&&!mme(function(){return Object.defineProperty(vme("div"),"a",{get:function(){return 7}}).a!==7})});var ui=I(sB=>{"use strict";var gme=ft(),yme=He(),_me=rv(),xme=kn(),bme=ri(),wme=so(),Sme=Mt(),qme=JI(),oB=Object.getOwnPropertyDescriptor;sB.f=gme?oB:function(t,n){if(t=bme(t),n=wme(n),qme)try{return oB(t,n)}catch(u){}if(Sme(t,n))return xme(!yme(_me.f,t,n),t[n])}});var QI=I((lht,uB)=>{"use strict";var Ime=ft(),Eme=Oe();uB.exports=Ime&&Eme(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var Ze=I((cht,lB)=>{"use strict";var Tme=It(),Ame=String,Pme=TypeError;lB.exports=function(e){if(Tme(e))return e;throw new Pme(Ame(e)+" is not an object")}});var dr=I(hB=>{"use strict";var Cme=ft(),Mme=JI(),kme=QI(),w0=Ze(),cB=so(),Ome=TypeError,eE=Object.defineProperty,Rme=Object.getOwnPropertyDescriptor,tE="enumerable",rE="configurable",iE="writable";hB.f=Cme?kme?function(t,n,u){if(w0(t),n=cB(n),w0(u),typeof t=="function"&&n==="prototype"&&"value"in u&&iE in u&&!u[iE]){var c=Rme(t,n);c&&c[iE]&&(t[n]=u.value,u={configurable:rE in u?u[rE]:c[rE],enumerable:tE in u?u[tE]:c[tE],writable:!1})}return eE(t,n,u)}:eE:function(t,n,u){if(w0(t),n=cB(n),w0(u),Mme)try{return eE(t,n,u)}catch(c){}if("get"in u||"set"in u)throw new Ome("Accessors not supported");return"value"in u&&(t[n]=u.value),t}});var Kr=I((fht,fB)=>{"use strict";var Dme=ft(),Lme=dr(),zme=kn();fB.exports=Dme?function(e,t,n){return Lme.f(e,t,zme(1,n))}:function(e,t,n){return e[t]=n,e}});var Sc=I((dht,pB)=>{"use strict";var nE=ft(),Fme=Mt(),dB=Function.prototype,Nme=nE&&Object.getOwnPropertyDescriptor,aE=Fme(dB,"name"),Bme=aE&&function(){}.name==="something",jme=aE&&(!nE||nE&&Nme(dB,"name").configurable);pB.exports={EXISTS:aE,PROPER:Bme,CONFIGURABLE:jme}});var ov=I((pht,mB)=>{"use strict";var Ume=Pe(),$me=qt(),oE=iv(),Vme=Ume(Function.toString);$me(oE.inspectSource)||(oE.inspectSource=function(e){return Vme(e)});mB.exports=oE.inspectSource});var sE=I((mht,gB)=>{"use strict";var Gme=it(),Hme=qt(),vB=Gme.WeakMap;gB.exports=Hme(vB)&&/native code/.test(String(vB))});var sv=I((vht,_B)=>{"use strict";var Wme=Fo(),Zme=il(),yB=Wme("keys");_B.exports=function(e){return yB[e]||(yB[e]=Zme(e))}});var Lf=I((ght,xB)=>{"use strict";xB.exports={}});var Yt=I((yht,SB)=>{"use strict";var Kme=sE(),wB=it(),Xme=It(),Yme=Kr(),uE=Mt(),lE=iv(),Jme=sv(),Qme=Lf(),bB="Object already initialized",cE=wB.TypeError,eve=wB.WeakMap,S0,uv,q0,tve=function(e){return q0(e)?uv(e):S0(e,{})},rve=function(e){return function(t){var n;if(!Xme(t)||(n=uv(t)).type!==e)throw new cE("Incompatible receiver, "+e+" required");return n}};Kme||lE.state?(uo=lE.state||(lE.state=new eve),uo.get=uo.get,uo.has=uo.has,uo.set=uo.set,S0=function(e,t){if(uo.has(e))throw new cE(bB);return t.facade=e,uo.set(e,t),t},uv=function(e){return uo.get(e)||{}},q0=function(e){return uo.has(e)}):(qc=Jme("state"),Qme[qc]=!0,S0=function(e,t){if(uE(e,qc))throw new cE(bB);return t.facade=e,Yme(e,qc,t),t},uv=function(e){return uE(e,qc)?e[qc]:{}},q0=function(e){return uE(e,qc)});var uo,qc;SB.exports={set:S0,get:uv,has:q0,enforce:tve,getterFor:rve}});var lv=I((_ht,EB)=>{"use strict";var fE=Pe(),ive=Oe(),nve=qt(),I0=Mt(),hE=ft(),ave=Sc().CONFIGURABLE,ove=ov(),IB=Yt(),sve=IB.enforce,uve=IB.get,qB=String,E0=Object.defineProperty,lve=fE("".slice),cve=fE("".replace),hve=fE([].join),fve=hE&&!ive(function(){return E0(function(){},"length",{value:8}).length!==8}),dve=String(String).split("String"),pve=EB.exports=function(e,t,n){lve(qB(t),0,7)==="Symbol("&&(t="["+cve(qB(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!I0(e,"name")||ave&&e.name!==t)&&(hE?E0(e,"name",{value:t,configurable:!0}):e.name=t),fve&&n&&I0(n,"arity")&&e.length!==n.arity&&E0(e,"length",{value:n.arity});try{n&&I0(n,"constructor")&&n.constructor?hE&&E0(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(c){}var u=sve(e);return I0(u,"source")||(u.source=hve(dve,typeof t=="string"?t:"")),e};Function.prototype.toString=pve(function(){return nve(this)&&uve(this).source||ove(this)},"toString")});var tr=I((xht,TB)=>{"use strict";var mve=qt(),vve=dr(),gve=lv(),yve=b0();TB.exports=function(e,t,n,u){u||(u={});var c=u.enumerable,s=u.name!==void 0?u.name:t;if(mve(n)&&gve(n,s,u),u.global)c?e[t]=n:yve(t,n);else{try{u.unsafe?e[t]&&(c=!0):delete e[t]}catch(_){}c?e[t]=n:vve.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}});var dE=I((bht,AB)=>{"use strict";var _ve=Math.ceil,xve=Math.floor;AB.exports=Math.trunc||function(t){var n=+t;return(n>0?xve:_ve)(n)}});var gr=I((wht,PB)=>{"use strict";var bve=dE();PB.exports=function(e){var t=+e;return t!==t||t===0?0:bve(t)}});var Ma=I((Sht,CB)=>{"use strict";var wve=gr(),Sve=Math.max,qve=Math.min;CB.exports=function(e,t){var n=wve(e);return n<0?Sve(n+t,0):qve(n,t)}});var On=I((qht,MB)=>{"use strict";var Ive=gr(),Eve=Math.min;MB.exports=function(e){return e>0?Eve(Ive(e),9007199254740991):0}});var Nt=I((Iht,kB)=>{"use strict";var Tve=On();kB.exports=function(e){return Tve(e.length)}});var zf=I((Eht,RB)=>{"use strict";var Ave=ri(),Pve=Ma(),Cve=Nt(),OB=function(e){return function(t,n,u){var c=Ave(t),s=Cve(c),_=Pve(u,s),w;if(e&&n!==n){for(;s>_;)if(w=c[_++],w!==w)return!0}else for(;s>_;_++)if((e||_ in c)&&c[_]===n)return e||_||0;return!e&&-1}};RB.exports={includes:OB(!0),indexOf:OB(!1)}});var mE=I((Tht,LB)=>{"use strict";var Mve=Pe(),pE=Mt(),kve=ri(),Ove=zf().indexOf,Rve=Lf(),DB=Mve([].push);LB.exports=function(e,t){var n=kve(e),u=0,c=[],s;for(s in n)!pE(Rve,s)&&pE(n,s)&&DB(c,s);for(;t.length>u;)pE(n,s=t[u++])&&(~Ove(c,s)||DB(c,s));return c}});var T0=I((Aht,zB)=>{"use strict";zB.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var As=I(FB=>{"use strict";var Dve=mE(),Lve=T0(),zve=Lve.concat("length","prototype");FB.f=Object.getOwnPropertyNames||function(t){return Dve(t,zve)}});var cv=I(NB=>{"use strict";NB.f=Object.getOwnPropertySymbols});var A0=I((Mht,BB)=>{"use strict";var Fve=xt(),Nve=Pe(),Bve=As(),jve=cv(),Uve=Ze(),$ve=Nve([].concat);BB.exports=Fve("Reflect","ownKeys")||function(t){var n=Bve.f(Uve(t)),u=jve.f;return u?$ve(n,u(t)):n}});var Ff=I((kht,UB)=>{"use strict";var jB=Mt(),Vve=A0(),Gve=ui(),Hve=dr();UB.exports=function(e,t,n){for(var u=Vve(t),c=Hve.f,s=Gve.f,_=0;_<u.length;_++){var w=u[_];!jB(e,w)&&!(n&&jB(n,w))&&c(e,w,s(t,w))}}});var Nf=I((Oht,$B)=>{"use strict";var Wve=Oe(),Zve=qt(),Kve=/#|\.prototype\./,hv=function(e,t){var n=Yve[Xve(e)];return n===Qve?!0:n===Jve?!1:Zve(t)?Wve(t):!!t},Xve=hv.normalize=function(e){return String(e).replace(Kve,".").toLowerCase()},Yve=hv.data={},Jve=hv.NATIVE="N",Qve=hv.POLYFILL="P";$B.exports=hv});var V=I((Rht,VB)=>{"use strict";var vE=it(),ege=ui().f,tge=Kr(),rge=tr(),ige=b0(),nge=Ff(),age=Nf();VB.exports=function(e,t){var n=e.target,u=e.global,c=e.stat,s,_,w,E,P,C;if(u?_=vE:c?_=vE[n]||ige(n,{}):_=(vE[n]||{}).prototype,_)for(w in t){if(P=t[w],e.dontCallGetSet?(C=ege(_,w),E=C&&C.value):E=_[w],s=age(u?w:n+(c?".":"#")+w,e.forced),!s&&E!==void 0){if(typeof P==typeof E)continue;nge(P,E)}(e.sham||E&&E.sham)&&tge(P,"sham",!0),rge(_,w,P,e)}}});var P0=I((Dht,HB)=>{"use strict";var oge=pt(),sge=oge("toStringTag"),GB={};GB[sge]="z";HB.exports=String(GB)==="[object z]"});var Rn=I((Lht,WB)=>{"use strict";var uge=P0(),lge=qt(),C0=Ci(),cge=pt(),hge=cge("toStringTag"),fge=Object,dge=C0(function(){return arguments}())==="Arguments",pge=function(e,t){try{return e[t]}catch(n){}};WB.exports=uge?C0:function(e){var t,n,u;return e===void 0?"Undefined":e===null?"Null":typeof(n=pge(t=fge(e),hge))=="string"?n:dge?C0(t):(u=C0(t))==="Object"&&lge(t.callee)?"Arguments":u}});var St=I((zht,ZB)=>{"use strict";var mge=Rn(),vge=String;ZB.exports=function(e){if(mge(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return vge(e)}});var Ic=I((Fht,KB)=>{"use strict";var gge=mE(),yge=T0();KB.exports=Object.keys||function(t){return gge(t,yge)}});var M0=I(XB=>{"use strict";var _ge=ft(),xge=QI(),bge=dr(),wge=Ze(),Sge=ri(),qge=Ic();XB.f=_ge&&!xge?Object.defineProperties:function(t,n){wge(t);for(var u=Sge(n),c=qge(n),s=c.length,_=0,w;s>_;)bge.f(t,w=c[_++],u[w]);return t}});var gE=I((Bht,YB)=>{"use strict";var Ige=xt();YB.exports=Ige("document","documentElement")});var Ur=I((jht,n3)=>{"use strict";var Ege=Ze(),Tge=M0(),JB=T0(),Age=Lf(),Pge=gE(),Cge=av(),Mge=sv(),QB=">",e3="<",_E="prototype",xE="script",r3=Mge("IE_PROTO"),yE=function(){},i3=function(e){return e3+xE+QB+e+e3+"/"+xE+QB},t3=function(e){e.write(i3("")),e.close();var t=e.parentWindow.Object;return e=null,t},kge=function(){var e=Cge("iframe"),t="java"+xE+":",n;return e.style.display="none",Pge.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(i3("document.F=Object")),n.close(),n.F},k0,O0=function(){try{k0=new ActiveXObject("htmlfile")}catch(t){}O0=typeof document!="undefined"?document.domain&&k0?t3(k0):kge():t3(k0);for(var e=JB.length;e--;)delete O0[_E][JB[e]];return O0()};Age[r3]=!0;n3.exports=Object.create||function(t,n){var u;return t!==null?(yE[_E]=Ege(t),u=new yE,yE[_E]=null,u[r3]=t):u=O0(),n===void 0?u:Tge.f(u,n)}});var ka=I((Uht,a3)=>{"use strict";var Oge=so(),Rge=dr(),Dge=kn();a3.exports=function(e,t,n){var u=Oge(t);u in e?Rge.f(e,u,Dge(0,n)):e[u]=n}});var Ec=I(($ht,s3)=>{"use strict";var o3=Ma(),Lge=Nt(),zge=ka(),Fge=Array,Nge=Math.max;s3.exports=function(e,t,n){for(var u=Lge(e),c=o3(t,u),s=o3(n===void 0?u:n,u),_=Fge(Nge(s-c,0)),w=0;c<s;c++,w++)zge(_,w,e[c]);return _.length=w,_}});var R0=I((Vht,c3)=>{"use strict";var Bge=Ci(),jge=ri(),u3=As().f,Uge=Ec(),l3=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],$ge=function(e){try{return u3(e)}catch(t){return Uge(l3)}};c3.exports.f=function(t){return l3&&Bge(t)==="Window"?$ge(t):u3(jge(t))}});var qr=I((Ght,f3)=>{"use strict";var h3=lv(),Vge=dr();f3.exports=function(e,t,n){return n.get&&h3(n.get,t,{getter:!0}),n.set&&h3(n.set,t,{setter:!0}),Vge.f(e,t,n)}});var bE=I(d3=>{"use strict";var Gge=pt();d3.f=Gge});var D0=I((Wht,p3)=>{"use strict";var Hge=it();p3.exports=Hge});var Or=I((Zht,v3)=>{"use strict";var m3=D0(),Wge=Mt(),Zge=bE(),Kge=dr().f;v3.exports=function(e){var t=m3.Symbol||(m3.Symbol={});Wge(t,e)||Kge(t,e,{value:Zge.f(e)})}});var wE=I((Kht,g3)=>{"use strict";var Xge=He(),Yge=xt(),Jge=pt(),Qge=tr();g3.exports=function(){var e=Yge("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,u=Jge("toPrimitive");t&&!t[u]&&Qge(t,u,function(c){return Xge(n,this)},{arity:1})}});var Dn=I((Xht,_3)=>{"use strict";var eye=dr().f,tye=Mt(),rye=pt(),y3=rye("toStringTag");_3.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!tye(e,y3)&&eye(e,y3,{configurable:!0,value:t})}});var Ps=I((Yht,x3)=>{"use strict";var iye=Ci(),nye=Pe();x3.exports=function(e){if(iye(e)==="Function")return nye(e)}});var or=I((Jht,w3)=>{"use strict";var b3=Ps(),aye=bt(),oye=Rf(),sye=b3(b3.bind);w3.exports=function(e,t){return aye(e),t===void 0?e:oye?sye(e,t):function(){return e.apply(t,arguments)}}});var lo=I((Qht,S3)=>{"use strict";var uye=Ci();S3.exports=Array.isArray||function(t){return uye(t)==="Array"}});var co=I((eft,A3)=>{"use strict";var lye=Pe(),cye=Oe(),q3=qt(),hye=Rn(),fye=xt(),dye=ov(),I3=function(){},pye=[],E3=fye("Reflect","construct"),SE=/^\s*(?:class|function)\b/,mye=lye(SE.exec),vye=!SE.test(I3),fv=function(t){if(!q3(t))return!1;try{return E3(I3,pye,t),!0}catch(n){return!1}},T3=function(t){if(!q3(t))return!1;switch(hye(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return vye||!!mye(SE,dye(t))}catch(n){return!0}};T3.sham=!0;A3.exports=!E3||cye(function(){var e;return fv(fv.call)||!fv(Object)||!fv(function(){e=!0})||e})?T3:fv});var k3=I((tft,M3)=>{"use strict";var P3=lo(),gye=co(),yye=It(),_ye=pt(),xye=_ye("species"),C3=Array;M3.exports=function(e){var t;return P3(e)&&(t=e.constructor,gye(t)&&(t===C3||P3(t.prototype))?t=void 0:yye(t)&&(t=t[xye],t===null&&(t=void 0))),t===void 0?C3:t}});var Bf=I((rft,O3)=>{"use strict";var bye=k3();O3.exports=function(e,t){return new(bye(e))(t===0?0:t)}});var $r=I((ift,D3)=>{"use strict";var wye=or(),Sye=Pe(),qye=Es(),Iye=Lt(),Eye=Nt(),Tye=Bf(),R3=Sye([].push),nl=function(e){var t=e===1,n=e===2,u=e===3,c=e===4,s=e===6,_=e===7,w=e===5||s;return function(E,P,C,B){for(var $=Iye(E),re=qye($),xe=wye(P,C),ye=Eye(re),X=0,K=B||Tye,ie=t?K(E,ye):n||_?K(E,0):void 0,_e,be;ye>X;X++)if((w||X in re)&&(_e=re[X],be=xe(_e,X,$),e))if(t)ie[X]=be;else if(be)switch(e){case 3:return!0;case 5:return _e;case 6:return X;case 2:R3(ie,_e);}else switch(e){case 4:return!1;case 7:R3(ie,_e);}return s?-1:u||c?c:ie}};D3.exports={forEach:nl(0),map:nl(1),filter:nl(2),some:nl(3),every:nl(4),find:nl(5),findIndex:nl(6),filterReject:nl(7)}});var J3=I(()=>{"use strict";var L0=V(),z0=it(),kE=He(),Aye=Pe(),Pye=Dt(),jf=ft(),Uf=tl(),Cye=Oe(),_i=Mt(),Mye=Xi(),TE=Ze(),F0=ri(),OE=so(),kye=St(),AE=kn(),pv=Ur(),F3=Ic(),Oye=As(),N3=R0(),Rye=cv(),B3=ui(),j3=dr(),Dye=M0(),U3=rv(),qE=tr(),Lye=qr(),RE=Fo(),zye=sv(),$3=Lf(),L3=il(),Fye=pt(),Nye=bE(),Bye=Or(),jye=wE(),Uye=Dn(),V3=Yt(),N0=$r().forEach,Ln=zye("hidden"),B0="Symbol",mv="prototype",$ye=V3.set,z3=V3.getterFor(B0),Oa=Object[mv],Tc=z0.Symbol,dv=Tc&&Tc[mv],Vye=z0.RangeError,Gye=z0.TypeError,IE=z0.QObject,G3=B3.f,Ac=j3.f,H3=N3.f,Hye=U3.f,W3=Aye([].push),Cs=RE("symbols"),vv=RE("op-symbols"),Wye=RE("wks"),PE=!IE||!IE[mv]||!IE[mv].findChild,Z3=function(e,t,n){var u=G3(Oa,t);u&&delete Oa[t],Ac(e,t,n),u&&e!==Oa&&Ac(Oa,t,u)},CE=jf&&Cye(function(){return pv(Ac({},"a",{get:function(){return Ac(this,"a",{value:7}).a}})).a!==7})?Z3:Ac,EE=function(e,t){var n=Cs[e]=pv(dv);return $ye(n,{type:B0,tag:e,description:t}),jf||(n.description=t),n},j0=function(t,n,u){t===Oa&&j0(vv,n,u),TE(t);var c=OE(n);return TE(u),_i(Cs,c)?(u.enumerable?(_i(t,Ln)&&t[Ln][c]&&(t[Ln][c]=!1),u=pv(u,{enumerable:AE(0,!1)})):(_i(t,Ln)||Ac(t,Ln,AE(1,{})),t[Ln][c]=!0),CE(t,c,u)):Ac(t,c,u)},DE=function(t,n){TE(t);var u=F0(n),c=F3(u).concat(Y3(u));return N0(c,function(s){(!jf||kE(ME,u,s))&&j0(t,s,u[s])}),t},Zye=function(t,n){return n===void 0?pv(t):DE(pv(t),n)},ME=function(t){var n=OE(t),u=kE(Hye,this,n);return this===Oa&&_i(Cs,n)&&!_i(vv,n)?!1:u||!_i(this,n)||!_i(Cs,n)||_i(this,Ln)&&this[Ln][n]?u:!0},K3=function(t,n){var u=F0(t),c=OE(n);if(!(u===Oa&&_i(Cs,c)&&!_i(vv,c))){var s=G3(u,c);return s&&_i(Cs,c)&&!(_i(u,Ln)&&u[Ln][c])&&(s.enumerable=!0),s}},X3=function(t){var n=H3(F0(t)),u=[];return N0(n,function(c){!_i(Cs,c)&&!_i($3,c)&&W3(u,c)}),u},Y3=function(e){var t=e===Oa,n=H3(t?vv:F0(e)),u=[];return N0(n,function(c){_i(Cs,c)&&(!t||_i(Oa,c))&&W3(u,Cs[c])}),u};Uf||(Tc=function(){if(Mye(dv,this))throw new Gye("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:kye(arguments[0]),n=L3(t),u=function(c){this===Oa&&kE(u,vv,c),_i(this,Ln)&&_i(this[Ln],n)&&(this[Ln][n]=!1);var s=AE(1,c);try{CE(this,n,s)}catch(_){if(!(_ instanceof Vye))throw _;Z3(this,n,s)}};return jf&&PE&&CE(Oa,n,{configurable:!0,set:u}),EE(n,t)},dv=Tc[mv],qE(dv,"toString",function(){return z3(this).tag}),qE(Tc,"withoutSetter",function(e){return EE(L3(e),e)}),U3.f=ME,j3.f=j0,Dye.f=DE,B3.f=K3,Oye.f=N3.f=X3,Rye.f=Y3,Nye.f=function(e){return EE(Fye(e),e)},jf&&(Lye(dv,"description",{configurable:!0,get:function(){return z3(this).description}}),Pye||qE(Oa,"propertyIsEnumerable",ME,{unsafe:!0})));L0({global:!0,constructor:!0,wrap:!0,forced:!Uf,sham:!Uf},{Symbol:Tc});N0(F3(Wye),function(e){Bye(e)});L0({target:B0,stat:!0,forced:!Uf},{useSetter:function(){PE=!0},useSimple:function(){PE=!1}});L0({target:"Object",stat:!0,forced:!Uf,sham:!jf},{create:Zye,defineProperty:j0,defineProperties:DE,getOwnPropertyDescriptor:K3});L0({target:"Object",stat:!0,forced:!Uf},{getOwnPropertyNames:X3});jye();Uye(Tc,B0);$3[Ln]=!0});var LE=I((oft,Q3)=>{"use strict";var Kye=tl();Q3.exports=Kye&&!!Symbol.for&&!!Symbol.keyFor});var t4=I(()=>{"use strict";var Xye=V(),Yye=xt(),Jye=Mt(),Qye=St(),e4=Fo(),e_e=LE(),zE=e4("string-to-symbol-registry"),t_e=e4("symbol-to-string-registry");Xye({target:"Symbol",stat:!0,forced:!e_e},{for:function(e){var t=Qye(e);if(Jye(zE,t))return zE[t];var n=Yye("Symbol")(t);return zE[t]=n,t_e[n]=t,n}})});var i4=I(()=>{"use strict";var r_e=V(),i_e=Mt(),n_e=Ts(),a_e=rl(),o_e=Fo(),s_e=LE(),r4=o_e("symbol-to-string-registry");r_e({target:"Symbol",stat:!0,forced:!s_e},{keyFor:function(t){if(!n_e(t))throw new TypeError(a_e(t)+" is not a symbol");if(i_e(r4,t))return r4[t]}})});var Yi=I((hft,s4)=>{"use strict";var u_e=Rf(),o4=Function.prototype,n4=o4.apply,a4=o4.call;s4.exports=typeof Reflect=="object"&&Reflect.apply||(u_e?a4.bind(n4):function(){return a4.apply(n4,arguments)})});var Ms=I((fft,u4)=>{"use strict";var l_e=Pe();u4.exports=l_e([].slice)});var FE=I((dft,f4)=>{"use strict";var c_e=Pe(),l4=lo(),h_e=qt(),c4=Ci(),f_e=St(),h4=c_e([].push);f4.exports=function(e){if(h_e(e))return e;if(l4(e)){for(var t=e.length,n=[],u=0;u<t;u++){var c=e[u];typeof c=="string"?h4(n,c):(typeof c=="number"||c4(c)==="Number"||c4(c)==="String")&&h4(n,f_e(c))}var s=n.length,_=!0;return function(w,E){if(_)return _=!1,E;if(l4(this))return E;for(var P=0;P<s;P++)if(n[P]===w)return E}}}});var NE=I(()=>{"use strict";var d_e=V(),x4=xt(),b4=Yi(),p_e=He(),gv=Pe(),w4=Oe(),d4=qt(),p4=Ts(),S4=Ms(),m_e=FE(),v_e=tl(),g_e=String,al=x4("JSON","stringify"),U0=gv(/./.exec),m4=gv("".charAt),y_e=gv("".charCodeAt),__e=gv("".replace),x_e=gv(1 .toString),b_e=/[\uD800-\uDFFF]/g,v4=/^[\uD800-\uDBFF]$/,g4=/^[\uDC00-\uDFFF]$/,y4=!v_e||w4(function(){var e=x4("Symbol")("stringify detection");return al([e])!=="[null]"||al({a:e})!=="{}"||al(Object(e))!=="{}"}),_4=w4(function(){return al("\uDF06\uD834")!=="\"\\udf06\\ud834\""||al("\uDEAD")!=="\"\\udead\""}),w_e=function(e,t){var n=S4(arguments),u=m_e(t);if(!(!d4(u)&&(e===void 0||p4(e))))return n[1]=function(c,s){if(d4(u)&&(s=p_e(u,this,g_e(c),s)),!p4(s))return s},b4(al,null,n)},S_e=function(e,t,n){var u=m4(n,t-1),c=m4(n,t+1);return U0(v4,e)&&!U0(g4,c)||U0(g4,e)&&!U0(v4,u)?"\\u"+x_e(y_e(e,0),16):e};al&&d_e({target:"JSON",stat:!0,arity:3,forced:y4||_4},{stringify:function(t,n,u){var c=S4(arguments),s=b4(y4?w_e:al,null,c);return _4&&typeof s=="string"?__e(s,b_e,S_e):s}})});var I4=I(()=>{"use strict";var q_e=V(),I_e=tl(),E_e=Oe(),q4=cv(),T_e=Lt(),A_e=!I_e||E_e(function(){q4.f(1)});q_e({target:"Object",stat:!0,forced:A_e},{getOwnPropertySymbols:function(t){var n=q4.f;return n?n(T_e(t)):[]}})});var E4=I(()=>{"use strict";J3();t4();i4();NE();I4()});var O4=I(()=>{"use strict";var P_e=V(),C_e=ft(),M_e=it(),$0=Pe(),k_e=Mt(),O_e=qt(),R_e=Xi(),D_e=St(),L_e=qr(),z_e=Ff(),ks=M_e.Symbol,Pc=ks&&ks.prototype;C_e&&O_e(ks)&&(!("description"in Pc)||ks().description!==void 0)&&(BE={},yv=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:D_e(arguments[0]),n=R_e(Pc,this)?new ks(t):t===void 0?ks():ks(t);return t===""&&(BE[n]=!0),n},z_e(yv,ks),yv.prototype=Pc,Pc.constructor=yv,T4=String(ks("description detection"))==="Symbol(description detection)",A4=$0(Pc.valueOf),P4=$0(Pc.toString),C4=/^Symbol\((.*)\)[^)]+$/,M4=$0("".replace),k4=$0("".slice),L_e(Pc,"description",{configurable:!0,get:function(){var t=A4(this);if(k_e(BE,t))return"";var n=P4(t),u=T4?k4(n,7,-1):M4(n,C4,"$1");return u===""?void 0:u}}),P_e({global:!0,constructor:!0,forced:!0},{Symbol:yv}));var BE,yv,T4,A4,P4,C4,M4,k4});var R4=I(()=>{"use strict";var F_e=Or();F_e("asyncIterator")});var D4=I(()=>{"use strict";var N_e=Or();N_e("hasInstance")});var L4=I(()=>{"use strict";var B_e=Or();B_e("isConcatSpreadable")});var z4=I(()=>{"use strict";var j_e=Or();j_e("iterator")});var F4=I(()=>{"use strict";var U_e=Or();U_e("match")});var N4=I(()=>{"use strict";var $_e=Or();$_e("matchAll")});var B4=I(()=>{"use strict";var V_e=Or();V_e("replace")});var j4=I(()=>{"use strict";var G_e=Or();G_e("search")});var U4=I(()=>{"use strict";var H_e=Or();H_e("species")});var $4=I(()=>{"use strict";var W_e=Or();W_e("split")});var V4=I(()=>{"use strict";var Z_e=Or(),K_e=wE();Z_e("toPrimitive");K_e()});var G4=I(()=>{"use strict";var X_e=xt(),Y_e=Or(),J_e=Dn();Y_e("toStringTag");J_e(X_e("Symbol"),"Symbol")});var H4=I(()=>{"use strict";var Q_e=Or();Q_e("unscopables")});var _v=I((Zft,W4)=>{"use strict";var e0e=Pe(),t0e=bt();W4.exports=function(e,t,n){try{return e0e(t0e(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(u){}}});var jE=I((Kft,Z4)=>{"use strict";var r0e=qt(),i0e=String,n0e=TypeError;Z4.exports=function(e){if(typeof e=="object"||r0e(e))return e;throw new n0e("Can't set "+i0e(e)+" as a prototype")}});var Ra=I((Xft,K4)=>{"use strict";var a0e=_v(),o0e=Ze(),s0e=jE();K4.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},n;try{n=a0e(Object.prototype,"__proto__","set"),n(t,[]),e=t instanceof Array}catch(u){}return function(c,s){return o0e(c),s0e(s),e?n(c,s):c.__proto__=s,c}}():void 0)});var UE=I((Yft,X4)=>{"use strict";var u0e=dr().f;X4.exports=function(e,t,n){n in e||u0e(e,n,{configurable:!0,get:function(){return t[n]},set:function(u){t[n]=u}})}});var Cc=I((Jft,J4)=>{"use strict";var l0e=qt(),c0e=It(),Y4=Ra();J4.exports=function(e,t,n){var u,c;return Y4&&l0e(u=t.constructor)&&u!==n&&c0e(c=u.prototype)&&c!==n.prototype&&Y4(e,c),e}});var Mc=I((Qft,Q4)=>{"use strict";var h0e=St();Q4.exports=function(e,t){return e===void 0?arguments.length<2?"":t:h0e(e)}});var $E=I((edt,e5)=>{"use strict";var f0e=It(),d0e=Kr();e5.exports=function(e,t){f0e(t)&&"cause"in t&&d0e(e,"cause",t.cause)}});var V0=I((tdt,i5)=>{"use strict";var p0e=Pe(),t5=Error,m0e=p0e("".replace),v0e=function(e){return String(new t5(e).stack)}("zxcasd"),r5=/\n\s*at [^:]*:[^\n]*/,g0e=r5.test(v0e);i5.exports=function(e,t){if(g0e&&typeof e=="string"&&!t5.prepareStackTrace)for(;t--;)e=m0e(e,r5,"");return e}});var VE=I((rdt,n5)=>{"use strict";var y0e=Oe(),_0e=kn();n5.exports=!y0e(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",_0e(1,7)),e.stack!==7):!0})});var G0=I((idt,o5)=>{"use strict";var x0e=Kr(),b0e=V0(),w0e=VE(),a5=Error.captureStackTrace;o5.exports=function(e,t,n,u){w0e&&(a5?a5(e,t):x0e(e,"stack",b0e(n,u)))}});var GE=I((ndt,d5)=>{"use strict";var s5=xt(),S0e=Mt(),u5=Kr(),q0e=Xi(),l5=Ra(),c5=Ff(),h5=UE(),I0e=Cc(),E0e=Mc(),T0e=$E(),A0e=G0(),P0e=ft(),f5=Dt();d5.exports=function(e,t,n,u){var c="stackTraceLimit",s=u?2:1,_=e.split("."),w=_[_.length-1],E=s5.apply(null,_);if(E){var P=E.prototype;if(!f5&&S0e(P,"cause")&&delete P.cause,!n)return E;var C=s5("Error"),B=t(function($,re){var xe=E0e(u?re:$,void 0),ye=u?new E($):new E;return xe!==void 0&&u5(ye,"message",xe),A0e(ye,B,ye.stack,2),this&&q0e(P,this)&&I0e(ye,this,B),arguments.length>s&&T0e(ye,arguments[s]),ye});if(B.prototype=P,w!=="Error"?l5?l5(B,C):c5(B,C,{name:!0}):P0e&&c in E&&(h5(B,E,c),h5(B,E,"prepareStackTrace")),c5(B,E),!f5)try{P.name!==w&&u5(P,"name",w),P.constructor=B}catch($){}return B}}});var g5=I(()=>{"use strict";var m5=V(),C0e=it(),No=Yi(),v5=GE(),HE="WebAssembly",p5=C0e[HE],H0=new Error("e",{cause:7}).cause!==7,kc=function(e,t){var n={};n[e]=v5(e,t,H0),m5({global:!0,constructor:!0,arity:1,forced:H0},n)},WE=function(e,t){if(p5&&p5[e]){var n={};n[e]=v5(HE+"."+e,t,H0),m5({target:HE,stat:!0,constructor:!0,arity:1,forced:H0},n)}};kc("Error",function(e){return function(n){return No(e,this,arguments)}});kc("EvalError",function(e){return function(n){return No(e,this,arguments)}});kc("RangeError",function(e){return function(n){return No(e,this,arguments)}});kc("ReferenceError",function(e){return function(n){return No(e,this,arguments)}});kc("SyntaxError",function(e){return function(n){return No(e,this,arguments)}});kc("TypeError",function(e){return function(n){return No(e,this,arguments)}});kc("URIError",function(e){return function(n){return No(e,this,arguments)}});WE("CompileError",function(e){return function(n){return No(e,this,arguments)}});WE("LinkError",function(e){return function(n){return No(e,this,arguments)}});WE("RuntimeError",function(e){return function(n){return No(e,this,arguments)}})});var ZE=I((sdt,_5)=>{"use strict";var M0e=ft(),k0e=Oe(),O0e=Ze(),R0e=Ur(),y5=Mc(),W0=Error.prototype.toString,D0e=k0e(function(){if(M0e){var e=R0e(Object.defineProperty({},"name",{get:function(){return this===e}}));if(W0.call(e)!=="true")return!0}return W0.call({message:1,name:2})!=="2: 1"||W0.call({})!=="Error"});_5.exports=D0e?function(){var t=O0e(this),n=y5(t.name,"Error"),u=y5(t.message);return n?u?n+": "+u:n:u}:W0});var w5=I(()=>{"use strict";var L0e=tr(),x5=ZE(),b5=Error.prototype;b5.toString!==x5&&L0e(b5,"toString",x5)});var Z0=I((cdt,S5)=>{"use strict";var z0e=Oe();S5.exports=!z0e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var Xr=I((hdt,I5)=>{"use strict";var F0e=Mt(),N0e=qt(),B0e=Lt(),j0e=sv(),U0e=Z0(),q5=j0e("IE_PROTO"),KE=Object,$0e=KE.prototype;I5.exports=U0e?KE.getPrototypeOf:function(e){var t=B0e(e);if(F0e(t,q5))return t[q5];var n=t.constructor;return N0e(n)&&t instanceof n?n.prototype:t instanceof KE?$0e:null}});var Oc=I((fdt,E5)=>{"use strict";E5.exports={}});var K0=I((ddt,T5)=>{"use strict";var V0e=pt(),G0e=Oc(),H0e=V0e("iterator"),W0e=Array.prototype;T5.exports=function(e){return e!==void 0&&(G0e.Array===e||W0e[H0e]===e)}});var Os=I((pdt,P5)=>{"use strict";var Z0e=Rn(),A5=jr(),K0e=Zr(),X0e=Oc(),Y0e=pt(),J0e=Y0e("iterator");P5.exports=function(e){if(!K0e(e))return A5(e,J0e)||A5(e,"@@iterator")||X0e[Z0e(e)]}});var ol=I((mdt,C5)=>{"use strict";var Q0e=He(),exe=bt(),txe=Ze(),rxe=rl(),ixe=Os(),nxe=TypeError;C5.exports=function(e,t){var n=arguments.length<2?ixe(e):t;if(exe(n))return txe(Q0e(n,e));throw new nxe(rxe(e)+" is not iterable")}});var Rs=I((vdt,k5)=>{"use strict";var axe=He(),M5=Ze(),oxe=jr();k5.exports=function(e,t,n){var u,c;M5(e);try{if(u=oxe(e,"return"),!u){if(t==="throw")throw n;return n}u=axe(u,e)}catch(s){c=!0,u=s}if(t==="throw")throw n;if(c)throw u;return M5(u),n}});var Rr=I((gdt,L5)=>{"use strict";var sxe=or(),uxe=He(),lxe=Ze(),cxe=rl(),hxe=K0(),fxe=Nt(),O5=Xi(),dxe=ol(),pxe=Os(),R5=Rs(),mxe=TypeError,X0=function(e,t){this.stopped=e,this.result=t},D5=X0.prototype;L5.exports=function(e,t,n){var u=n&&n.that,c=!!(n&&n.AS_ENTRIES),s=!!(n&&n.IS_RECORD),_=!!(n&&n.IS_ITERATOR),w=!!(n&&n.INTERRUPTED),E=sxe(t,u),P,C,B,$,re,xe,ye,X=function(ie){return P&&R5(P,"normal",ie),new X0(!0,ie)},K=function(ie){return c?(lxe(ie),w?E(ie[0],ie[1],X):E(ie[0],ie[1])):w?E(ie,X):E(ie)};if(s)P=e.iterator;else if(_)P=e;else{if(C=pxe(e),!C)throw new mxe(cxe(e)+" is not iterable");if(hxe(C)){for(B=0,$=fxe(e);$>B;B++)if(re=K(e[B]),re&&O5(D5,re))return re;return new X0(!1)}P=dxe(e,C)}for(xe=s?e.next:P.next;!(ye=uxe(xe,P)).done;){try{re=K(ye.value)}catch(ie){R5(P,"throw",ie)}if(typeof re=="object"&&re&&O5(D5,re))return re}return new X0(!1)}});var F5=I(()=>{"use strict";var vxe=V(),gxe=Xi(),yxe=Xr(),Y0=Ra(),_xe=Ff(),z5=Ur(),XE=Kr(),YE=kn(),xxe=$E(),bxe=G0(),wxe=Rr(),Sxe=Mc(),qxe=pt(),Ixe=qxe("toStringTag"),J0=Error,Exe=[].push,$f=function(t,n){var u=gxe(JE,this),c;Y0?c=Y0(new J0,u?yxe(this):JE):(c=u?this:z5(JE),XE(c,Ixe,"Error")),n!==void 0&&XE(c,"message",Sxe(n)),bxe(c,$f,c.stack,1),arguments.length>2&&xxe(c,arguments[2]);var s=[];return wxe(t,Exe,{that:s}),XE(c,"errors",s),c};Y0?Y0($f,J0):_xe($f,J0,{name:!0});var JE=$f.prototype=z5(J0.prototype,{constructor:YE(1,$f),message:YE(1,""),name:YE(1,"AggregateError")});vxe({global:!0,constructor:!0,arity:2},{AggregateError:$f})});var QE=I(()=>{"use strict";F5()});var U5=I(()=>{"use strict";var Txe=V(),Axe=xt(),Pxe=Yi(),N5=Oe(),Cxe=GE(),eT="AggregateError",B5=Axe(eT),j5=!N5(function(){return B5([1]).errors[0]!==1})&&N5(function(){return B5([1],eT,{cause:7}).cause!==7});Txe({global:!0,constructor:!0,arity:2,forced:j5},{AggregateError:Cxe(eT,function(e){return function(n,u){return Pxe(e,this,arguments)}},j5,!0)})});var Cr=I((qdt,$5)=>{"use strict";var Mxe=pt(),kxe=Ur(),Oxe=dr().f,tT=Mxe("unscopables"),rT=Array.prototype;rT[tT]===void 0&&Oxe(rT,tT,{configurable:!0,value:kxe(null)});$5.exports=function(e){rT[tT][e]=!0}});var iT=I(()=>{"use strict";var Rxe=V(),Dxe=Lt(),Lxe=Nt(),zxe=gr(),Fxe=Cr();Rxe({target:"Array",proto:!0},{at:function(t){var n=Dxe(this),u=Lxe(n),c=zxe(t),s=c>=0?c:u+c;return s<0||s>=u?void 0:n[s]}});Fxe("at")});var sl=I((Tdt,V5)=>{"use strict";var Nxe=TypeError,Bxe=9007199254740991;V5.exports=function(e){if(e>Bxe)throw Nxe("Maximum allowed index exceeded");return e}});var Vf=I((Adt,G5)=>{"use strict";var jxe=Oe(),Uxe=pt(),$xe=zo(),Vxe=Uxe("species");G5.exports=function(e){return $xe>=51||!jxe(function(){var t=[],n=t.constructor={};return n[Vxe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var K5=I(()=>{"use strict";var Gxe=V(),Hxe=Oe(),Wxe=lo(),Zxe=It(),Kxe=Lt(),Xxe=Nt(),H5=sl(),W5=ka(),Yxe=Bf(),Jxe=Vf(),Qxe=pt(),e1e=zo(),Z5=Qxe("isConcatSpreadable"),t1e=e1e>=51||!Hxe(function(){var e=[];return e[Z5]=!1,e.concat()[0]!==e}),r1e=function(e){if(!Zxe(e))return!1;var t=e[Z5];return t!==void 0?!!t:Wxe(e)},i1e=!t1e||!Jxe("concat");Gxe({target:"Array",proto:!0,arity:1,forced:i1e},{concat:function(t){var n=Kxe(this),u=Yxe(n,0),c=0,s,_,w,E,P;for(s=-1,w=arguments.length;s<w;s++)if(P=s===-1?n:arguments[s],r1e(P))for(E=Xxe(P),H5(c+E),_=0;_<E;_++,c++)_ in P&&W5(u,c,P[_]);else H5(c+1),W5(u,c++,P);return u.length=c,u}})});var xv=I((Mdt,Y5)=>{"use strict";var X5=rl(),n1e=TypeError;Y5.exports=function(e,t){if(!delete e[t])throw new n1e("Cannot delete property "+X5(t)+" of "+X5(e))}});var aT=I((kdt,J5)=>{"use strict";var a1e=Lt(),nT=Ma(),o1e=Nt(),s1e=xv(),u1e=Math.min;J5.exports=[].copyWithin||function(t,n){var u=a1e(this),c=o1e(u),s=nT(t,c),_=nT(n,c),w=arguments.length>2?arguments[2]:void 0,E=u1e((w===void 0?c:nT(w,c))-_,c-s),P=1;for(_<s&&s<_+E&&(P=-1,_+=E-1,s+=E-1);E-->0;)_ in u?u[s]=u[_]:s1e(u,s),s+=P,_+=P;return u}});var Q5=I(()=>{"use strict";var l1e=V(),c1e=aT(),h1e=Cr();l1e({target:"Array",proto:!0},{copyWithin:c1e});h1e("copyWithin")});var Da=I((Ddt,ej)=>{"use strict";var f1e=Oe();ej.exports=function(e,t){var n=[][e];return!!n&&f1e(function(){n.call(null,t||function(){return 1},1)})}});var tj=I(()=>{"use strict";var d1e=V(),p1e=$r().every,m1e=Da(),v1e=m1e("every");d1e({target:"Array",proto:!0,forced:!v1e},{every:function(t){return p1e(this,t,arguments.length>1?arguments[1]:void 0)}})});var Q0=I((Fdt,ij)=>{"use strict";var g1e=Lt(),rj=Ma(),y1e=Nt();ij.exports=function(t){for(var n=g1e(this),u=y1e(n),c=arguments.length,s=rj(c>1?arguments[1]:void 0,u),_=c>2?arguments[2]:void 0,w=_===void 0?u:rj(_,u);w>s;)n[s++]=t;return n}});var nj=I(()=>{"use strict";var _1e=V(),x1e=Q0(),b1e=Cr();_1e({target:"Array",proto:!0},{fill:x1e});b1e("fill")});var aj=I(()=>{"use strict";var w1e=V(),S1e=$r().filter,q1e=Vf(),I1e=q1e("filter");w1e({target:"Array",proto:!0,forced:!I1e},{filter:function(t){return S1e(this,t,arguments.length>1?arguments[1]:void 0)}})});var sj=I(()=>{"use strict";var E1e=V(),T1e=$r().find,A1e=Cr(),oT="find",oj=!0;oT in[]&&Array(1)[oT](function(){oj=!1});E1e({target:"Array",proto:!0,forced:oj},{find:function(t){return T1e(this,t,arguments.length>1?arguments[1]:void 0)}});A1e(oT)});var lj=I(()=>{"use strict";var P1e=V(),C1e=$r().findIndex,M1e=Cr(),sT="findIndex",uj=!0;sT in[]&&Array(1)[sT](function(){uj=!1});P1e({target:"Array",proto:!0,forced:uj},{findIndex:function(t){return C1e(this,t,arguments.length>1?arguments[1]:void 0)}});M1e(sT)});var bv=I((Wdt,hj)=>{"use strict";var k1e=or(),O1e=Es(),R1e=Lt(),D1e=Nt(),cj=function(e){var t=e===1;return function(n,u,c){for(var s=R1e(n),_=O1e(s),w=k1e(u,c),E=D1e(_),P,C;E-->0;)if(P=_[E],C=w(P,E,s),C)switch(e){case 0:return P;case 1:return E;}return t?-1:void 0}};hj.exports={findLast:cj(0),findLastIndex:cj(1)}});var uT=I(()=>{"use strict";var L1e=V(),z1e=bv().findLast,F1e=Cr();L1e({target:"Array",proto:!0},{findLast:function(t){return z1e(this,t,arguments.length>1?arguments[1]:void 0)}});F1e("findLast")});var lT=I(()=>{"use strict";var N1e=V(),B1e=bv().findLastIndex,j1e=Cr();N1e({target:"Array",proto:!0},{findLastIndex:function(t){return B1e(this,t,arguments.length>1?arguments[1]:void 0)}});j1e("findLastIndex")});var cT=I((Jdt,dj)=>{"use strict";var U1e=lo(),$1e=Nt(),V1e=sl(),G1e=or(),fj=function(e,t,n,u,c,s,_,w){for(var E=c,P=0,C=_?G1e(_,w):!1,B,$;P<u;)P in n&&(B=C?C(n[P],P,t):n[P],s>0&&U1e(B)?($=$1e(B),E=fj(e,t,B,$,E,s-1)-1):(V1e(E+1),e[E]=B),E++),P++;return E};dj.exports=fj});var pj=I(()=>{"use strict";var H1e=V(),W1e=cT(),Z1e=Lt(),K1e=Nt(),X1e=gr(),Y1e=Bf();H1e({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,n=Z1e(this),u=K1e(n),c=Y1e(n,0);return c.length=W1e(c,n,n,u,0,t===void 0?1:X1e(t)),c}})});var mj=I(()=>{"use strict";var J1e=V(),Q1e=cT(),ebe=bt(),tbe=Lt(),rbe=Nt(),ibe=Bf();J1e({target:"Array",proto:!0},{flatMap:function(t){var n=tbe(this),u=rbe(n),c;return ebe(t),c=ibe(n,0),c.length=Q1e(c,n,n,u,0,1,t,arguments.length>1?arguments[1]:void 0),c}})});var hT=I((ipt,vj)=>{"use strict";var nbe=$r().forEach,abe=Da(),obe=abe("forEach");vj.exports=obe?[].forEach:function(t){return nbe(this,t,arguments.length>1?arguments[1]:void 0)}});var yj=I(()=>{"use strict";var sbe=V(),gj=hT();sbe({target:"Array",proto:!0,forced:[].forEach!==gj},{forEach:gj})});var ex=I((opt,_j)=>{"use strict";var ube=Ze(),lbe=Rs();_j.exports=function(e,t,n,u){try{return u?t(ube(n)[0],n[1]):t(n)}catch(c){lbe(e,"throw",c)}}});var fT=I((spt,wj)=>{"use strict";var cbe=or(),hbe=He(),fbe=Lt(),dbe=ex(),pbe=K0(),mbe=co(),vbe=Nt(),xj=ka(),gbe=ol(),ybe=Os(),bj=Array;wj.exports=function(t){var n=fbe(t),u=mbe(this),c=arguments.length,s=c>1?arguments[1]:void 0,_=s!==void 0;_&&(s=cbe(s,c>2?arguments[2]:void 0));var w=ybe(n),E=0,P,C,B,$,re,xe;if(w&&!(this===bj&&pbe(w)))for($=gbe(n,w),re=$.next,C=u?new this:[];!(B=hbe(re,$)).done;E++)xe=_?dbe($,s,[B.value,E],!0):B.value,xj(C,E,xe);else for(P=vbe(n),C=u?new this(P):bj(P);P>E;E++)xe=_?s(n[E],E):n[E],xj(C,E,xe);return C.length=E,C}});var wv=I((upt,Ej)=>{"use strict";var _be=pt(),qj=_be("iterator"),Ij=!1;try{Sj=0,dT={next:function(){return{done:!!Sj++}},return:function(){Ij=!0}},dT[qj]=function(){return this},Array.from(dT,function(){throw 2})}catch(e){}var Sj,dT;Ej.exports=function(e,t){try{if(!t&&!Ij)return!1}catch(c){return!1}var n=!1;try{var u={};u[qj]=function(){return{next:function(){return{done:n=!0}}}},e(u)}catch(c){}return n}});var Tj=I(()=>{"use strict";var xbe=V(),bbe=fT(),wbe=wv(),Sbe=!wbe(function(e){Array.from(e)});xbe({target:"Array",stat:!0,forced:Sbe},{from:bbe})});var Aj=I(()=>{"use strict";var qbe=V(),Ibe=zf().includes,Ebe=Oe(),Tbe=Cr(),Abe=Ebe(function(){return!Array(1).includes()});qbe({target:"Array",proto:!0,forced:Abe},{includes:function(t){return Ibe(this,t,arguments.length>1?arguments[1]:void 0)}});Tbe("includes")});var Cj=I(()=>{"use strict";var Pbe=V(),Cbe=Ps(),Mbe=zf().indexOf,kbe=Da(),pT=Cbe([].indexOf),Pj=!!pT&&1/pT([1],1,-0)<0,Obe=Pj||!kbe("indexOf");Pbe({target:"Array",proto:!0,forced:Obe},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return Pj?pT(this,t,n)||0:Mbe(this,t,n)}})});var Mj=I(()=>{"use strict";var Rbe=V(),Dbe=lo();Rbe({target:"Array",stat:!0},{isArray:Dbe})});var Rc=I((gpt,Rj)=>{"use strict";var Lbe=Oe(),zbe=qt(),Fbe=It(),Nbe=Ur(),kj=Xr(),Bbe=tr(),jbe=pt(),Ube=Dt(),gT=jbe("iterator"),Oj=!1,Ds,mT,vT;[].keys&&(vT=[].keys(),"next"in vT?(mT=kj(kj(vT)),mT!==Object.prototype&&(Ds=mT)):Oj=!0);var $be=!Fbe(Ds)||Lbe(function(){var e={};return Ds[gT].call(e)!==e});$be?Ds={}:Ube&&(Ds=Nbe(Ds));zbe(Ds[gT])||Bbe(Ds,gT,function(){return this});Rj.exports={IteratorPrototype:Ds,BUGGY_SAFARI_ITERATORS:Oj}});var ul=I((ypt,Dj)=>{"use strict";var Vbe=Rc().IteratorPrototype,Gbe=Ur(),Hbe=kn(),Wbe=Dn(),Zbe=Oc(),Kbe=function(){return this};Dj.exports=function(e,t,n,u){var c=t+" Iterator";return e.prototype=Gbe(Vbe,{next:Hbe(+!u,n)}),Wbe(e,c,!1,!0),Zbe[c]=Kbe,e}});var ix=I((_pt,Gj)=>{"use strict";var Xbe=V(),Ybe=He(),tx=Dt(),$j=Sc(),Jbe=qt(),Qbe=ul(),Lj=Xr(),zj=Ra(),ewe=Dn(),twe=Kr(),yT=tr(),rwe=pt(),Fj=Oc(),Vj=Rc(),iwe=$j.PROPER,nwe=$j.CONFIGURABLE,Nj=Vj.IteratorPrototype,rx=Vj.BUGGY_SAFARI_ITERATORS,Sv=rwe("iterator"),Bj="keys",qv="values",jj="entries",Uj=function(){return this};Gj.exports=function(e,t,n,u,c,s,_){Qbe(n,t,u);var w=function(K){if(K===c&&$)return $;if(!rx&&K&&K in C)return C[K];switch(K){case Bj:return function(){return new n(this,K)};case qv:return function(){return new n(this,K)};case jj:return function(){return new n(this,K)};}return function(){return new n(this)}},E=t+" Iterator",P=!1,C=e.prototype,B=C[Sv]||C["@@iterator"]||c&&C[c],$=!rx&&B||w(c),re=t==="Array"&&C.entries||B,xe,ye,X;if(re&&(xe=Lj(re.call(new e)),xe!==Object.prototype&&xe.next&&(!tx&&Lj(xe)!==Nj&&(zj?zj(xe,Nj):Jbe(xe[Sv])||yT(xe,Sv,Uj)),ewe(xe,E,!0,!0),tx&&(Fj[E]=Uj))),iwe&&c===qv&&B&&B.name!==qv&&(!tx&&nwe?twe(C,"name",qv):(P=!0,$=function(){return Ybe(B,this)})),c)if(ye={values:w(qv),keys:s?$:w(Bj),entries:w(jj)},_)for(X in ye)(rx||P||!(X in C))&&yT(C,X,ye[X]);else Xbe({target:t,proto:!0,forced:rx||P},ye);return(!tx||_)&&C[Sv]!==$&&yT(C,Sv,$,{name:c}),Fj[t]=$,ye}});var Mi=I((xpt,Hj)=>{"use strict";Hj.exports=function(e,t){return{value:e,done:t}}});var Iv=I((bpt,Yj)=>{"use strict";var awe=ri(),_T=Cr(),Wj=Oc(),Kj=Yt(),owe=dr().f,swe=ix(),nx=Mi(),uwe=Dt(),lwe=ft(),Xj="Array Iterator",cwe=Kj.set,hwe=Kj.getterFor(Xj);Yj.exports=swe(Array,"Array",function(e,t){cwe(this,{type:Xj,target:awe(e),index:0,kind:t})},function(){var e=hwe(this),t=e.target,n=e.kind,u=e.index++;if(!t||u>=t.length)return e.target=void 0,nx(void 0,!0);switch(n){case"keys":return nx(u,!1);case"values":return nx(t[u],!1);}return nx([u,t[u]],!1)},"values");var Zj=Wj.Arguments=Wj.Array;_T("keys");_T("values");_T("entries");if(!uwe&&lwe&&Zj.name!=="values")try{owe(Zj,"name",{value:"values"})}catch(e){}});var Jj=I(()=>{"use strict";var fwe=V(),dwe=Pe(),pwe=Es(),mwe=ri(),vwe=Da(),gwe=dwe([].join),ywe=pwe!==Object,_we=ywe||!vwe("join",",");fwe({target:"Array",proto:!0,forced:_we},{join:function(t){return gwe(mwe(this),t===void 0?",":t)}})});var bT=I((qpt,e6)=>{"use strict";var xwe=Yi(),bwe=ri(),wwe=gr(),Swe=Nt(),qwe=Da(),Iwe=Math.min,xT=[].lastIndexOf,Qj=!!xT&&1/[1].lastIndexOf(1,-0)<0,Ewe=qwe("lastIndexOf"),Twe=Qj||!Ewe;e6.exports=Twe?function(t){if(Qj)return xwe(xT,this,arguments)||0;var n=bwe(this),u=Swe(n),c=u-1;for(arguments.length>1&&(c=Iwe(c,wwe(arguments[1]))),c<0&&(c=u+c);c>=0;c--)if(c in n&&n[c]===t)return c||0;return-1}:xT});var r6=I(()=>{"use strict";var Awe=V(),t6=bT();Awe({target:"Array",proto:!0,forced:t6!==[].lastIndexOf},{lastIndexOf:t6})});var i6=I(()=>{"use strict";var Pwe=V(),Cwe=$r().map,Mwe=Vf(),kwe=Mwe("map");Pwe({target:"Array",proto:!0,forced:!kwe},{map:function(t){return Cwe(this,t,arguments.length>1?arguments[1]:void 0)}})});var a6=I(()=>{"use strict";var Owe=V(),Rwe=Oe(),Dwe=co(),Lwe=ka(),n6=Array,zwe=Rwe(function(){function e(){}return!(n6.of.call(e)instanceof e)});Owe({target:"Array",stat:!0,forced:zwe},{of:function(){for(var t=0,n=arguments.length,u=new(Dwe(this)?this:n6)(n);n>t;)Lwe(u,t,arguments[t++]);return u.length=n,u}})});var ax=I((Mpt,o6)=>{"use strict";var Fwe=ft(),Nwe=lo(),Bwe=TypeError,jwe=Object.getOwnPropertyDescriptor,Uwe=Fwe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();o6.exports=Uwe?function(e,t){if(Nwe(e)&&!jwe(e,"length").writable)throw new Bwe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var s6=I(()=>{"use strict";var $we=V(),Vwe=Lt(),Gwe=Nt(),Hwe=ax(),Wwe=sl(),Zwe=Oe(),Kwe=Zwe(function(){return[].push.call({length:4294967296},1)!==4294967297}),Xwe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},Ywe=Kwe||!Xwe();$we({target:"Array",proto:!0,arity:1,forced:Ywe},{push:function(t){var n=Vwe(this),u=Gwe(n),c=arguments.length;Wwe(u+c);for(var s=0;s<c;s++)n[u]=arguments[s],u++;return Hwe(n,u),u}})});var Ev=I((Rpt,l6)=>{"use strict";var Jwe=bt(),Qwe=Lt(),eSe=Es(),tSe=Nt(),rSe=TypeError,u6=function(e){return function(t,n,u,c){Jwe(n);var s=Qwe(t),_=eSe(s),w=tSe(s),E=e?w-1:0,P=e?-1:1;if(u<2)for(;;){if(E in _){c=_[E],E+=P;break}if(E+=P,e?E<0:w<=E)throw new rSe("Reduce of empty array with no initial value")}for(;e?E>=0:w>E;E+=P)E in _&&(c=n(c,_[E],E,s));return c}};l6.exports={left:u6(!1),right:u6(!0)}});var Bo=I((Dpt,c6)=>{"use strict";var iSe=it(),nSe=Ci();c6.exports=nSe(iSe.process)==="process"});var f6=I(()=>{"use strict";var aSe=V(),oSe=Ev().left,sSe=Da(),h6=zo(),uSe=Bo(),lSe=!uSe&&h6>79&&h6<83,cSe=lSe||!sSe("reduce");aSe({target:"Array",proto:!0,forced:cSe},{reduce:function(t){var n=arguments.length;return oSe(this,t,n,n>1?arguments[1]:void 0)}})});var p6=I(()=>{"use strict";var hSe=V(),fSe=Ev().right,dSe=Da(),d6=zo(),pSe=Bo(),mSe=!pSe&&d6>79&&d6<83,vSe=mSe||!dSe("reduceRight");hSe({target:"Array",proto:!0,forced:vSe},{reduceRight:function(t){return fSe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var v6=I(()=>{"use strict";var gSe=V(),ySe=Pe(),_Se=lo(),xSe=ySe([].reverse),m6=[1,2];gSe({target:"Array",proto:!0,forced:String(m6)===String(m6.reverse())},{reverse:function(){return _Se(this)&&(this.length=this.length),xSe(this)}})});var _6=I(()=>{"use strict";var bSe=V(),g6=lo(),wSe=co(),SSe=It(),y6=Ma(),qSe=Nt(),ISe=ri(),ESe=ka(),TSe=pt(),ASe=Vf(),PSe=Ms(),CSe=ASe("slice"),MSe=TSe("species"),wT=Array,kSe=Math.max;bSe({target:"Array",proto:!0,forced:!CSe},{slice:function(t,n){var u=ISe(this),c=qSe(u),s=y6(t,c),_=y6(n===void 0?c:n,c),w,E,P;if(g6(u)&&(w=u.constructor,wSe(w)&&(w===wT||g6(w.prototype))?w=void 0:SSe(w)&&(w=w[MSe],w===null&&(w=void 0)),w===wT||w===void 0))return PSe(u,s,_);for(E=new(w===void 0?wT:w)(kSe(_-s,0)),P=0;s<_;s++,P++)s in u&&ESe(E,P,u[s]);return E.length=P,E}})});var x6=I(()=>{"use strict";var OSe=V(),RSe=$r().some,DSe=Da(),LSe=DSe("some");OSe({target:"Array",proto:!0,forced:!LSe},{some:function(t){return RSe(this,t,arguments.length>1?arguments[1]:void 0)}})});var ox=I((Hpt,w6)=>{"use strict";var b6=Ec(),zSe=Math.floor,ST=function(e,t){var n=e.length,u=zSe(n/2);return n<8?FSe(e,t):NSe(e,ST(b6(e,0,u),t),ST(b6(e,u),t),t)},FSe=function(e,t){for(var n=e.length,u=1,c,s;u<n;){for(s=u,c=e[u];s&&t(e[s-1],c)>0;)e[s]=e[--s];s!==u++&&(e[s]=c)}return e},NSe=function(e,t,n,u){for(var c=t.length,s=n.length,_=0,w=0;_<c||w<s;)e[_+w]=_<c&&w<s?u(t[_],n[w])<=0?t[_++]:n[w++]:_<c?t[_++]:n[w++];return e};w6.exports=ST});var qT=I((Wpt,q6)=>{"use strict";var BSe=Lo(),S6=BSe.match(/firefox\/(\d+)/i);q6.exports=!!S6&&+S6[1]});var IT=I((Zpt,I6)=>{"use strict";var jSe=Lo();I6.exports=/MSIE|Trident/.test(jSe)});var sx=I((Kpt,T6)=>{"use strict";var USe=Lo(),E6=USe.match(/AppleWebKit\/(\d+)\./);T6.exports=!!E6&&+E6[1]});var L6=I(()=>{"use strict";var $Se=V(),R6=Pe(),VSe=bt(),GSe=Lt(),A6=Nt(),HSe=xv(),P6=St(),ET=Oe(),WSe=ox(),ZSe=Da(),C6=qT(),KSe=IT(),M6=zo(),k6=sx(),ll=[],O6=R6(ll.sort),XSe=R6(ll.push),YSe=ET(function(){ll.sort(void 0)}),JSe=ET(function(){ll.sort(null)}),QSe=ZSe("sort"),D6=!ET(function(){if(M6)return M6<70;if(!(C6&&C6>3)){if(KSe)return!0;if(k6)return k6<603;var e="",t,n,u,c;for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:u=3;break;case 68:case 71:u=4;break;default:u=2;}for(c=0;c<47;c++)ll.push({k:n+c,v:u})}for(ll.sort(function(s,_){return _.v-s.v}),c=0;c<ll.length;c++)n=ll[c].k.charAt(0),e.charAt(e.length-1)!==n&&(e+=n);return e!=="DGBEFHACIJK"}}),eqe=YSe||!JSe||!QSe||!D6,tqe=function(e){return function(t,n){return n===void 0?-1:t===void 0?1:e!==void 0?+e(t,n)||0:P6(t)>P6(n)?1:-1}};$Se({target:"Array",proto:!0,forced:eqe},{sort:function(t){t!==void 0&&VSe(t);var n=GSe(this);if(D6)return t===void 0?O6(n):O6(n,t);var u=[],c=A6(n),s,_;for(_=0;_<c;_++)_ in n&&XSe(u,n[_]);for(WSe(u,tqe(t)),s=A6(u),_=0;_<s;)n[_]=u[_++];for(;_<c;)HSe(n,_++);return n}})});var cl=I((Jpt,F6)=>{"use strict";var rqe=xt(),iqe=qr(),nqe=pt(),aqe=ft(),z6=nqe("species");F6.exports=function(e){var t=rqe(e);aqe&&t&&!t[z6]&&iqe(t,z6,{configurable:!0,get:function(){return this}})}});var N6=I(()=>{"use strict";var oqe=cl();oqe("Array")});var B6=I(()=>{"use strict";var sqe=V(),uqe=Lt(),lqe=Ma(),cqe=gr(),hqe=Nt(),fqe=ax(),dqe=sl(),pqe=Bf(),mqe=ka(),TT=xv(),vqe=Vf(),gqe=vqe("splice"),yqe=Math.max,_qe=Math.min;sqe({target:"Array",proto:!0,forced:!gqe},{splice:function(t,n){var u=uqe(this),c=hqe(u),s=lqe(t,c),_=arguments.length,w,E,P,C,B,$;for(_===0?w=E=0:_===1?(w=0,E=c-s):(w=_-2,E=_qe(yqe(cqe(n),0),c-s)),dqe(c+w-E),P=pqe(u,E),C=0;C<E;C++)B=s+C,B in u&&mqe(P,C,u[B]);if(P.length=E,w<E){for(C=s;C<c-E;C++)B=C+E,$=C+w,B in u?u[$]=u[B]:TT(u,$);for(C=c;C>c-E+w;C--)TT(u,C-1)}else if(w>E)for(C=c-E;C>s;C--)B=C+E-1,$=C+w-1,B in u?u[$]=u[B]:TT(u,$);for(C=0;C<w;C++)u[C+s]=arguments[C+2];return fqe(u,c-E+w),P}})});var AT=I((imt,j6)=>{"use strict";var xqe=Nt();j6.exports=function(e,t){for(var n=xqe(e),u=new t(n),c=0;c<n;c++)u[c]=e[n-c-1];return u}});var PT=I(()=>{"use strict";var bqe=V(),wqe=AT(),Sqe=ri(),qqe=Cr(),Iqe=Array;bqe({target:"Array",proto:!0},{toReversed:function(){return wqe(Sqe(this),Iqe)}});qqe("toReversed")});var Dc=I((omt,U6)=>{"use strict";var Eqe=Nt();U6.exports=function(e,t){for(var n=0,u=Eqe(t),c=new e(u);u>n;)c[n]=t[n++];return c}});var CT=I((smt,$6)=>{"use strict";var Tqe=it();$6.exports=function(e){return Tqe[e].prototype}});var MT=I(()=>{"use strict";var Aqe=V(),Pqe=Pe(),Cqe=bt(),Mqe=ri(),kqe=Dc(),Oqe=CT(),Rqe=Cr(),Dqe=Array,Lqe=Pqe(Oqe("Array").sort);Aqe({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&Cqe(t);var n=Mqe(this),u=kqe(Dqe,n);return Lqe(u,t)}});Rqe("toSorted")});var kT=I(()=>{"use strict";var zqe=V(),Fqe=Cr(),Nqe=sl(),Bqe=Nt(),jqe=Ma(),Uqe=ri(),$qe=gr(),Vqe=Array,Gqe=Math.max,Hqe=Math.min;zqe({target:"Array",proto:!0},{toSpliced:function(t,n){var u=Uqe(this),c=Bqe(u),s=jqe(t,c),_=arguments.length,w=0,E,P,C,B;for(_===0?E=P=0:_===1?(E=0,P=c-s):(E=_-2,P=Hqe(Gqe($qe(n),0),c-s)),C=Nqe(c+E-P),B=Vqe(C);w<s;w++)B[w]=u[w];for(;w<s+E;w++)B[w]=arguments[w-s+2];for(;w<C;w++)B[w]=u[w+P-E];return B}});Fqe("toSpliced")});var V6=I(()=>{"use strict";var Wqe=Cr();Wqe("flat")});var G6=I(()=>{"use strict";var Zqe=Cr();Zqe("flatMap")});var H6=I(()=>{"use strict";var Kqe=V(),Xqe=Lt(),Yqe=Nt(),Jqe=ax(),Qqe=xv(),eIe=sl(),tIe=[].unshift(0)!==1,rIe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},iIe=tIe||!rIe();Kqe({target:"Array",proto:!0,arity:1,forced:iIe},{unshift:function(t){var n=Xqe(this),u=Yqe(n),c=arguments.length;if(c){eIe(u+c);for(var s=u;s--;){var _=s+c;s in n?n[_]=n[s]:Qqe(n,_)}for(var w=0;w<c;w++)n[w]=arguments[w]}return Jqe(n,u+c)}})});var OT=I((ymt,W6)=>{"use strict";var nIe=Nt(),aIe=gr(),oIe=RangeError;W6.exports=function(e,t,n,u){var c=nIe(e),s=aIe(n),_=s<0?c+s:s;if(_>=c||_<0)throw new oIe("Incorrect index");for(var w=new t(c),E=0;E<c;E++)w[E]=E===_?u:e[E];return w}});var RT=I(()=>{"use strict";var sIe=V(),uIe=OT(),lIe=ri(),cIe=Array;sIe({target:"Array",proto:!0},{with:function(e,t){return uIe(lIe(this),cIe,e,t)}})});var ux=I((bmt,Z6)=>{"use strict";Z6.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var La=I((wmt,K6)=>{"use strict";var hIe=tr();K6.exports=function(e,t,n){for(var u in t)hIe(e,u,t[u],n);return e}});var Ji=I((Smt,X6)=>{"use strict";var fIe=Xi(),dIe=TypeError;X6.exports=function(e,t){if(fIe(t,e))return e;throw new dIe("Incorrect invocation")}});var Gf=I((qmt,Y6)=>{"use strict";var pIe=gr(),mIe=On(),vIe=RangeError;Y6.exports=function(e){if(e===void 0)return 0;var t=pIe(e),n=mIe(t);if(t!==n)throw new vIe("Wrong length or index");return n}});var lx=I((Imt,J6)=>{"use strict";J6.exports=Math.sign||function(t){var n=+t;return n===0||n!==n?n:n<0?-1:1}});var DT=I((Emt,tU)=>{"use strict";var gIe=lx(),yIe=Math.abs,eU=2220446049250313e-31,Q6=1/eU,_Ie=function(e){return e+Q6-Q6};tU.exports=function(e,t,n,u){var c=+e,s=yIe(c),_=gIe(c);if(s<u)return _*_Ie(s/u/t)*u*t;var w=(1+t/eU)*s,E=w-(w-s);return E>n||E!==E?_*(1/0):_*E}});var cx=I((Tmt,rU)=>{"use strict";var xIe=DT(),bIe=1.1920928955078125e-7,wIe=34028234663852886e22,SIe=11754943508222875e-54;rU.exports=Math.fround||function(t){return xIe(t,bIe,wIe,SIe)}});var hx=I((Amt,iU)=>{"use strict";var qIe=Array,IIe=Math.abs,Ls=Math.pow,EIe=Math.floor,TIe=Math.log,AIe=Math.LN2,PIe=function(e,t,n){var u=qIe(n),c=n*8-t-1,s=(1<<c)-1,_=s>>1,w=t===23?Ls(2,-24)-Ls(2,-77):0,E=e<0||e===0&&1/e<0?1:0,P=0,C,B,$;for(e=IIe(e),e!==e||e===1/0?(B=e!==e?1:0,C=s):(C=EIe(TIe(e)/AIe),$=Ls(2,-C),e*$<1&&(C--,$*=2),C+_>=1?e+=w/$:e+=w*Ls(2,1-_),e*$>=2&&(C++,$/=2),C+_>=s?(B=0,C=s):C+_>=1?(B=(e*$-1)*Ls(2,t),C+=_):(B=e*Ls(2,_-1)*Ls(2,t),C=0));t>=8;)u[P++]=B&255,B/=256,t-=8;for(C=C<<t|B,c+=t;c>0;)u[P++]=C&255,C/=256,c-=8;return u[--P]|=E*128,u},CIe=function(e,t){var n=e.length,u=n*8-t-1,c=(1<<u)-1,s=c>>1,_=u-7,w=n-1,E=e[w--],P=E&127,C;for(E>>=7;_>0;)P=P*256+e[w--],_-=8;for(C=P&(1<<-_)-1,P>>=-_,_+=t;_>0;)C=C*256+e[w--],_-=8;if(P===0)P=1-s;else{if(P===c)return C?NaN:E?-1/0:1/0;C+=Ls(2,t),P-=s}return(E?-1:1)*C*Ls(2,P-t)};iU.exports={pack:PIe,unpack:CIe}});var Pv=I((Pmt,bU)=>{"use strict";var gx=it(),UT=Pe(),LT=ft(),MIe=ux(),vU=Sc(),nU=Kr(),kIe=qr(),aU=La(),zT=Oe(),fx=Ji(),OIe=gr(),RIe=On(),mx=Gf(),DIe=cx(),gU=hx(),LIe=Xr(),oU=Ra(),zIe=As().f,FIe=Q0(),NIe=Ec(),yU=Dn(),$T=Yt(),BIe=vU.PROPER,sU=vU.CONFIGURABLE,Wf="ArrayBuffer",yx="DataView",Zf="prototype",jIe="Wrong length",_U="Wrong index",uU=$T.getterFor(Wf),Av=$T.getterFor(yx),lU=$T.set,za=gx[Wf],sa=za,Hf=sa&&sa[Zf],jo=gx[yx],Lc=jo&&jo[Zf],cU=Object.prototype,UIe=gx.Array,vx=gx.RangeError,$Ie=UT(FIe),VIe=UT([].reverse),xU=gU.pack,hU=gU.unpack,fU=function(e){return[e&255]},dU=function(e){return[e&255,e>>8&255]},pU=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},mU=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},GIe=function(e){return xU(DIe(e),23,4)},HIe=function(e){return xU(e,52,8)},dx=function(e,t,n){kIe(e[Zf],t,{configurable:!0,get:function(){return n(this)[t]}})},hl=function(e,t,n,u){var c=Av(e),s=mx(n),_=!!u;if(s+t>c.byteLength)throw new vx(_U);var w=c.bytes,E=s+c.byteOffset,P=NIe(w,E,E+t);return _?P:VIe(P)},fl=function(e,t,n,u,c,s){var _=Av(e),w=mx(n),E=u(+c),P=!!s;if(w+t>_.byteLength)throw new vx(_U);for(var C=_.bytes,B=w+_.byteOffset,$=0;$<t;$++)C[B+$]=E[P?$:t-$-1]};if(!MIe)sa=function(t){fx(this,Hf);var n=mx(t);lU(this,{type:Wf,bytes:$Ie(UIe(n),0),byteLength:n}),LT||(this.byteLength=n,this.detached=!1)},Hf=sa[Zf],jo=function(t,n,u){fx(this,Lc),fx(t,Hf);var c=uU(t),s=c.byteLength,_=OIe(n);if(_<0||_>s)throw new vx("Wrong offset");if(u=u===void 0?s-_:RIe(u),_+u>s)throw new vx(jIe);lU(this,{type:yx,buffer:t,byteLength:u,byteOffset:_,bytes:c.bytes}),LT||(this.buffer=t,this.byteLength=u,this.byteOffset=_)},Lc=jo[Zf],LT&&(dx(sa,"byteLength",uU),dx(jo,"buffer",Av),dx(jo,"byteLength",Av),dx(jo,"byteOffset",Av)),aU(Lc,{getInt8:function(t){return hl(this,1,t)[0]<<24>>24},getUint8:function(t){return hl(this,1,t)[0]},getInt16:function(t){var n=hl(this,2,t,arguments.length>1?arguments[1]:!1);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=hl(this,2,t,arguments.length>1?arguments[1]:!1);return n[1]<<8|n[0]},getInt32:function(t){return mU(hl(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return mU(hl(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return hU(hl(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return hU(hl(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,n){fl(this,1,t,fU,n)},setUint8:function(t,n){fl(this,1,t,fU,n)},setInt16:function(t,n){fl(this,2,t,dU,n,arguments.length>2?arguments[2]:!1)},setUint16:function(t,n){fl(this,2,t,dU,n,arguments.length>2?arguments[2]:!1)},setInt32:function(t,n){fl(this,4,t,pU,n,arguments.length>2?arguments[2]:!1)},setUint32:function(t,n){fl(this,4,t,pU,n,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,n){fl(this,4,t,GIe,n,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,n){fl(this,8,t,HIe,n,arguments.length>2?arguments[2]:!1)}});else{if(FT=BIe&&za.name!==Wf,!zT(function(){za(1)})||!zT(function(){new za(-1)})||zT(function(){return new za,new za(1.5),new za(NaN),za.length!==1||FT&&!sU})){for(sa=function(t){return fx(this,Hf),new za(mx(t))},sa[Zf]=Hf,NT=zIe(za),BT=0;NT.length>BT;)(px=NT[BT++])in sa||nU(sa,px,za[px]);Hf.constructor=sa}else FT&&sU&&nU(za,"name",Wf);oU&&LIe(Lc)!==cU&&oU(Lc,cU),Tv=new jo(new sa(2)),jT=UT(Lc.setInt8),Tv.setInt8(0,2147483648),Tv.setInt8(1,2147483649),(Tv.getInt8(0)||!Tv.getInt8(1))&&aU(Lc,{setInt8:function(t,n){jT(this,t,n<<24>>24)},setUint8:function(t,n){jT(this,t,n<<24>>24)}},{unsafe:!0})}var FT,NT,BT,px,Tv,jT;yU(sa,Wf);yU(jo,yx);bU.exports={ArrayBuffer:sa,DataView:jo}});var SU=I(()=>{"use strict";var WIe=V(),ZIe=it(),KIe=Pv(),XIe=cl(),VT="ArrayBuffer",wU=KIe[VT],YIe=ZIe[VT];WIe({global:!0,constructor:!0,forced:YIe!==wU},{ArrayBuffer:wU});XIe(VT)});var kt=I((kmt,OU)=>{"use strict";var JIe=ux(),ZT=ft(),dn=it(),TU=qt(),bx=It(),pl=Mt(),KT=Rn(),QIe=rl(),eEe=Kr(),GT=tr(),tEe=qr(),rEe=Xi(),wx=Xr(),Xf=Ra(),iEe=pt(),nEe=il(),AU=Yt(),PU=AU.enforce,aEe=AU.get,_x=dn.Int8Array,HT=_x&&_x.prototype,qU=dn.Uint8ClampedArray,IU=qU&&qU.prototype,Uo=_x&&wx(_x),ho=HT&&wx(HT),oEe=Object.prototype,XT=dn.TypeError,EU=iEe("toStringTag"),WT=nEe("TYPED_ARRAY_TAG"),xx="TypedArrayConstructor",zs=JIe&&!!Xf&&KT(dn.opera)!=="Opera",CU=!1,zn,dl,Kf,Fs={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},YT={BigInt64Array:8,BigUint64Array:8},sEe=function(t){if(!bx(t))return!1;var n=KT(t);return n==="DataView"||pl(Fs,n)||pl(YT,n)},MU=function(e){var t=wx(e);if(bx(t)){var n=aEe(t);return n&&pl(n,xx)?n[xx]:MU(t)}},kU=function(e){if(!bx(e))return!1;var t=KT(e);return pl(Fs,t)||pl(YT,t)},uEe=function(e){if(kU(e))return e;throw new XT("Target is not a typed array")},lEe=function(e){if(TU(e)&&(!Xf||rEe(Uo,e)))return e;throw new XT(QIe(e)+" is not a typed array constructor")},cEe=function(e,t,n,u){if(ZT){if(n)for(var c in Fs){var s=dn[c];if(s&&pl(s.prototype,e))try{delete s.prototype[e]}catch(_){try{s.prototype[e]=t}catch(w){}}}(!ho[e]||n)&&GT(ho,e,n?t:zs&&HT[e]||t,u)}},hEe=function(e,t,n){var u,c;if(ZT){if(Xf){if(n){for(u in Fs)if(c=dn[u],c&&pl(c,e))try{delete c[e]}catch(s){}}if(!Uo[e]||n)try{return GT(Uo,e,n?t:zs&&Uo[e]||t)}catch(s){}else return}for(u in Fs)c=dn[u],c&&(!c[e]||n)&&GT(c,e,t)}};for(zn in Fs)dl=dn[zn],Kf=dl&&dl.prototype,Kf?PU(Kf)[xx]=dl:zs=!1;for(zn in YT)dl=dn[zn],Kf=dl&&dl.prototype,Kf&&(PU(Kf)[xx]=dl);if((!zs||!TU(Uo)||Uo===Function.prototype)&&(Uo=function(){throw new XT("Incorrect invocation")},zs))for(zn in Fs)dn[zn]&&Xf(dn[zn],Uo);if((!zs||!ho||ho===oEe)&&(ho=Uo.prototype,zs))for(zn in Fs)dn[zn]&&Xf(dn[zn].prototype,ho);zs&&wx(IU)!==ho&&Xf(IU,ho);if(ZT&&!pl(ho,EU)){CU=!0,tEe(ho,EU,{configurable:!0,get:function(){return bx(this)?this[WT]:void 0}});for(zn in Fs)dn[zn]&&eEe(dn[zn],WT,zn)}OU.exports={NATIVE_ARRAY_BUFFER_VIEWS:zs,TYPED_ARRAY_TAG:CU&&WT,aTypedArray:uEe,aTypedArrayConstructor:lEe,exportTypedArrayMethod:cEe,exportTypedArrayStaticMethod:hEe,getTypedArrayConstructor:MU,isView:sEe,isTypedArray:kU,TypedArray:Uo,TypedArrayPrototype:ho}});var DU=I(()=>{"use strict";var fEe=V(),RU=kt(),dEe=RU.NATIVE_ARRAY_BUFFER_VIEWS;fEe({target:"ArrayBuffer",stat:!0,forced:!dEe},{isView:RU.isView})});var Yf=I((Dmt,LU)=>{"use strict";var pEe=co(),mEe=rl(),vEe=TypeError;LU.exports=function(e){if(pEe(e))return e;throw new vEe(mEe(e)+" is not a constructor")}});var zc=I((Lmt,FU)=>{"use strict";var zU=Ze(),gEe=Yf(),yEe=Zr(),_Ee=pt(),xEe=_Ee("species");FU.exports=function(e,t){var n=zU(e).constructor,u;return n===void 0||yEe(u=zU(n)[xEe])?t:gEe(u)}});var VU=I(()=>{"use strict";var bEe=V(),QT=Ps(),wEe=Oe(),UU=Pv(),NU=Ze(),BU=Ma(),SEe=On(),qEe=zc(),e2=UU.ArrayBuffer,JT=UU.DataView,$U=JT.prototype,jU=QT(e2.prototype.slice),IEe=QT($U.getUint8),EEe=QT($U.setUint8),TEe=wEe(function(){return!new e2(2).slice(1,void 0).byteLength});bEe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:TEe},{slice:function(t,n){if(jU&&n===void 0)return jU(NU(this),t);for(var u=NU(this).byteLength,c=BU(t,u),s=BU(n===void 0?u:n,u),_=new(qEe(this,e2))(SEe(s-c)),w=new JT(this),E=new JT(_),P=0;c<s;)EEe(E,P++,IEe(w,c++));return _}})});var GU=I(()=>{"use strict";var AEe=V(),PEe=Pv(),CEe=ux();AEe({global:!0,constructor:!0,forced:!CEe},{DataView:PEe.DataView})});var HU=I(()=>{"use strict";GU()});var WU=I(()=>{"use strict";var MEe=V(),kEe=Pe(),OEe=Oe(),REe=OEe(function(){return new Date(16e11).getYear()!==120}),DEe=kEe(Date.prototype.getFullYear);MEe({target:"Date",proto:!0,forced:REe},{getYear:function(){return DEe(this)-1900}})});var KU=I(()=>{"use strict";var LEe=V(),zEe=Pe(),ZU=Date,FEe=zEe(ZU.prototype.getTime);LEe({target:"Date",stat:!0},{now:function(){return FEe(new ZU)}})});var JU=I(()=>{"use strict";var NEe=V(),XU=Pe(),BEe=gr(),YU=Date.prototype,jEe=XU(YU.getTime),UEe=XU(YU.setFullYear);NEe({target:"Date",proto:!0},{setYear:function(t){jEe(this);var n=BEe(t),u=n>=0&&n<=99?n+1900:n;return UEe(this,u)}})});var QU=I(()=>{"use strict";var $Ee=V();$Ee({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Cv=I((Ymt,e$)=>{"use strict";var VEe=gr(),GEe=St(),HEe=vr(),WEe=RangeError;e$.exports=function(t){var n=GEe(HEe(this)),u="",c=VEe(t);if(c<0||c===1/0)throw new WEe("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(n+=n))c&1&&(u+=n);return u}});var Sx=I((Jmt,n$)=>{"use strict";var i$=Pe(),ZEe=On(),t$=St(),KEe=Cv(),XEe=vr(),YEe=i$(KEe),JEe=i$("".slice),QEe=Math.ceil,r$=function(e){return function(t,n,u){var c=t$(XEe(t)),s=ZEe(n),_=c.length,w=u===void 0?" ":t$(u),E,P;return s<=_||w===""?c:(E=s-_,P=YEe(w,QEe(E/w.length)),P.length>E&&(P=JEe(P,0,E)),e?c+P:P+c)}};n$.exports={start:r$(!1),end:r$(!0)}});var s$=I((Qmt,o$)=>{"use strict";var ml=Pe(),a$=Oe(),Fc=Sx().start,eTe=RangeError,tTe=isFinite,rTe=Math.abs,Ns=Date.prototype,t2=Ns.toISOString,iTe=ml(Ns.getTime),nTe=ml(Ns.getUTCDate),aTe=ml(Ns.getUTCFullYear),oTe=ml(Ns.getUTCHours),sTe=ml(Ns.getUTCMilliseconds),uTe=ml(Ns.getUTCMinutes),lTe=ml(Ns.getUTCMonth),cTe=ml(Ns.getUTCSeconds);o$.exports=a$(function(){return t2.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!a$(function(){t2.call(new Date(NaN))})?function(){if(!tTe(iTe(this)))throw new eTe("Invalid time value");var t=this,n=aTe(t),u=sTe(t),c=n<0?"-":n>9999?"+":"";return c+Fc(rTe(n),c?6:4,0)+"-"+Fc(lTe(t)+1,2,0)+"-"+Fc(nTe(t),2,0)+"T"+Fc(oTe(t),2,0)+":"+Fc(uTe(t),2,0)+":"+Fc(cTe(t),2,0)+"."+Fc(u,3,0)+"Z"}:t2});var l$=I(()=>{"use strict";var hTe=V(),u$=s$();hTe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==u$},{toISOString:u$})});var c$=I(()=>{"use strict";var fTe=V(),dTe=Oe(),pTe=Lt(),mTe=nv(),vTe=dTe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});fTe({target:"Date",proto:!0,arity:1,forced:vTe},{toJSON:function(t){var n=pTe(this),u=mTe(n,"number");return typeof u=="number"&&!isFinite(u)?null:n.toISOString()}})});var f$=I((nvt,h$)=>{"use strict";var gTe=Ze(),yTe=KI(),_Te=TypeError;h$.exports=function(e){if(gTe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new _Te("Incorrect hint");return yTe(this,e)}});var m$=I(()=>{"use strict";var xTe=Mt(),bTe=tr(),wTe=f$(),STe=pt(),d$=STe("toPrimitive"),p$=Date.prototype;xTe(p$,d$)||bTe(p$,d$,wTe)});var _$=I(()=>{"use strict";var g$=Pe(),qTe=tr(),r2=Date.prototype,v$="Invalid Date",y$="toString",ITe=g$(r2[y$]),ETe=g$(r2.getTime);String(new Date(NaN))!==v$&&qTe(r2,y$,function(){var t=ETe(this);return t===t?ITe(this):v$})});var b$=I(()=>{"use strict";var TTe=V(),Mv=Pe(),ATe=St(),PTe=Mv("".charAt),CTe=Mv("".charCodeAt),MTe=Mv(/./.exec),kTe=Mv(1 .toString),OTe=Mv("".toUpperCase),RTe=/[\w*+\-./@]/,x$=function(e,t){for(var n=kTe(e,16);n.length<t;)n="0"+n;return n};TTe({global:!0},{escape:function(t){for(var n=ATe(t),u="",c=n.length,s=0,_,w;s<c;)_=PTe(n,s++),MTe(RTe,_)?u+=_:(w=CTe(_,0),w<256?u+="%"+x$(w,2):u+="%u"+OTe(x$(w,4)));return u}})});var n2=I((hvt,I$)=>{"use strict";var S$=Pe(),DTe=bt(),LTe=It(),zTe=Mt(),w$=Ms(),FTe=Rf(),q$=Function,NTe=S$([].concat),BTe=S$([].join),i2={},jTe=function(e,t,n){if(!zTe(i2,t)){for(var u=[],c=0;c<t;c++)u[c]="a["+c+"]";i2[t]=q$("C,a","return new C("+BTe(u,",")+")")}return i2[t](e,n)};I$.exports=FTe?q$.bind:function(t){var n=DTe(this),u=n.prototype,c=w$(arguments,1),s=function(){var w=NTe(c,w$(arguments));return this instanceof s?jTe(n,w.length,w):n.apply(t,w)};return LTe(u)&&(s.prototype=u),s}});var T$=I(()=>{"use strict";var UTe=V(),E$=n2();UTe({target:"Function",proto:!0,forced:Function.bind!==E$},{bind:E$})});var C$=I(()=>{"use strict";var $Te=qt(),A$=It(),VTe=dr(),GTe=Xr(),HTe=pt(),WTe=lv(),a2=HTe("hasInstance"),P$=Function.prototype;a2 in P$||VTe.f(P$,a2,{value:WTe(function(e){if(!$Te(this)||!A$(e))return!1;var t=this.prototype;if(!A$(t))return e instanceof this;for(;e=GTe(e);)if(t===e)return!0;return!1},a2)})});var R$=I(()=>{"use strict";var ZTe=ft(),KTe=Sc().EXISTS,M$=Pe(),XTe=qr(),k$=Function.prototype,YTe=M$(k$.toString),O$=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,JTe=M$(O$.exec),QTe="name";ZTe&&!KTe&&XTe(k$,QTe,{configurable:!0,get:function(){try{return JTe(O$,YTe(this))[1]}catch(e){return""}}})});var s2=I(()=>{"use strict";var e2e=V(),o2=it();e2e({global:!0,forced:o2.globalThis!==o2},{globalThis:o2})});var D$=I(()=>{"use strict";var t2e=it(),r2e=Dn();r2e(t2e.JSON,"JSON",!0)});var qx=I((wvt,L$)=>{"use strict";var i2e=Oe();L$.exports=i2e(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var Ex=I((Svt,F$)=>{"use strict";var n2e=Oe(),a2e=It(),o2e=Ci(),z$=qx(),Ix=Object.isExtensible,s2e=n2e(function(){Ix(1)});F$.exports=s2e||z$?function(t){return!a2e(t)||z$&&o2e(t)==="ArrayBuffer"?!1:Ix?Ix(t):!0}:Ix});var Bs=I((qvt,N$)=>{"use strict";var u2e=Oe();N$.exports=!u2e(function(){return Object.isExtensible(Object.preventExtensions({}))})});var vl=I((Ivt,U$)=>{"use strict";var l2e=V(),c2e=Pe(),h2e=Lf(),f2e=It(),u2=Mt(),d2e=dr().f,B$=As(),p2e=R0(),l2=Ex(),m2e=il(),v2e=Bs(),j$=!1,js=m2e("meta"),g2e=0,c2=function(e){d2e(e,js,{value:{objectID:"O"+g2e++,weakData:{}}})},y2e=function(e,t){if(!f2e(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!u2(e,js)){if(!l2(e))return"F";if(!t)return"E";c2(e)}return e[js].objectID},_2e=function(e,t){if(!u2(e,js)){if(!l2(e))return!0;if(!t)return!1;c2(e)}return e[js].weakData},x2e=function(e){return v2e&&j$&&l2(e)&&!u2(e,js)&&c2(e),e},b2e=function(){w2e.enable=function(){},j$=!0;var e=B$.f,t=c2e([].splice),n={};n[js]=1,e(n).length&&(B$.f=function(u){for(var c=e(u),s=0,_=c.length;s<_;s++)if(c[s]===js){t(c,s,1);break}return c},l2e({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p2e.f}))},w2e=U$.exports={enable:b2e,fastKey:y2e,getWeakData:_2e,onFreeze:x2e};h2e[js]=!0});var kv=I((Evt,V$)=>{"use strict";var S2e=V(),q2e=it(),I2e=Pe(),$$=Nf(),E2e=tr(),T2e=vl(),A2e=Rr(),P2e=Ji(),C2e=qt(),M2e=Zr(),h2=It(),f2=Oe(),k2e=wv(),O2e=Dn(),R2e=Cc();V$.exports=function(e,t,n){var u=e.indexOf("Map")!==-1,c=e.indexOf("Weak")!==-1,s=u?"set":"add",_=q2e[e],w=_&&_.prototype,E=_,P={},C=function(K){var ie=I2e(w[K]);E2e(w,K,K==="add"?function(be){return ie(this,be===0?0:be),this}:K==="delete"?function(_e){return c&&!h2(_e)?!1:ie(this,_e===0?0:_e)}:K==="get"?function(be){return c&&!h2(be)?void 0:ie(this,be===0?0:be)}:K==="has"?function(be){return c&&!h2(be)?!1:ie(this,be===0?0:be)}:function(be,Qe){return ie(this,be===0?0:be,Qe),this})},B=$$(e,!C2e(_)||!(c||w.forEach&&!f2(function(){new _().entries().next()})));if(B)E=n.getConstructor(t,e,u,s),T2e.enable();else if($$(e,!0)){var $=new E,re=$[s](c?{}:-0,1)!==$,xe=f2(function(){$.has(1)}),ye=k2e(function(K){new _(K)}),X=!c&&f2(function(){for(var K=new _,ie=5;ie--;)K[s](ie,ie);return!K.has(-0)});ye||(E=t(function(K,ie){P2e(K,w);var _e=R2e(new _,K,E);return M2e(ie)||A2e(ie,_e[s],{that:_e,AS_ENTRIES:u}),_e}),E.prototype=w,w.constructor=E),(xe||X)&&(C("delete"),C("has"),u&&C("get")),(X||re)&&C(s),c&&w.clear&&delete w.clear}return P[e]=E,S2e({global:!0,constructor:!0,forced:E!==_},P),O2e(E,e),c||n.setStrong(E,e,u),E}});var p2=I((Tvt,K$)=>{"use strict";var D2e=Ur(),L2e=qr(),G$=La(),z2e=or(),F2e=Ji(),N2e=Zr(),B2e=Rr(),j2e=ix(),Tx=Mi(),U2e=cl(),Ov=ft(),H$=vl().fastKey,Z$=Yt(),W$=Z$.set,d2=Z$.getterFor;K$.exports={getConstructor:function(e,t,n,u){var c=e(function(P,C){F2e(P,s),W$(P,{type:t,index:D2e(null),first:void 0,last:void 0,size:0}),Ov||(P.size=0),N2e(C)||B2e(C,P[u],{that:P,AS_ENTRIES:n})}),s=c.prototype,_=d2(t),w=function(P,C,B){var $=_(P),re=E(P,C),xe,ye;return re?re.value=B:($.last=re={index:ye=H$(C,!0),key:C,value:B,previous:xe=$.last,next:void 0,removed:!1},$.first||($.first=re),xe&&(xe.next=re),Ov?$.size++:P.size++,ye!=="F"&&($.index[ye]=re)),P},E=function(P,C){var B=_(P),$=H$(C),re;if($!=="F")return B.index[$];for(re=B.first;re;re=re.next)if(re.key===C)return re};return G$(s,{clear:function(){for(var C=this,B=_(C),$=B.index,re=B.first;re;)re.removed=!0,re.previous&&(re.previous=re.previous.next=void 0),delete $[re.index],re=re.next;B.first=B.last=void 0,Ov?B.size=0:C.size=0},delete:function(P){var C=this,B=_(C),$=E(C,P);if($){var re=$.next,xe=$.previous;delete B.index[$.index],$.removed=!0,xe&&(xe.next=re),re&&(re.previous=xe),B.first===$&&(B.first=re),B.last===$&&(B.last=xe),Ov?B.size--:C.size--}return!!$},forEach:function(C){for(var B=_(this),$=z2e(C,arguments.length>1?arguments[1]:void 0),re;re=re?re.next:B.first;)for($(re.value,re.key,this);re&&re.removed;)re=re.previous},has:function(C){return!!E(this,C)}}),G$(s,n?{get:function(C){var B=E(this,C);return B&&B.value},set:function(C,B){return w(this,C===0?0:C,B)}}:{add:function(C){return w(this,C=C===0?0:C,C)}}),Ov&&L2e(s,"size",{configurable:!0,get:function(){return _(this).size}}),c},setStrong:function(e,t,n){var u=t+" Iterator",c=d2(t),s=d2(u);j2e(e,t,function(_,w){W$(this,{type:u,target:_,state:c(_),kind:w,last:void 0})},function(){for(var _=s(this),w=_.kind,E=_.last;E&&E.removed;)E=E.previous;return!_.target||!(_.last=E=E?E.next:_.state.first)?(_.target=void 0,Tx(void 0,!0)):Tx(w==="keys"?E.key:w==="values"?E.value:[E.key,E.value],!1)},n?"entries":"values",!n,!0),U2e(t)}}});var X$=I(()=>{"use strict";var $2e=kv(),V2e=p2();$2e("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},V2e)});var Ax=I(()=>{"use strict";X$()});var m2=I((kvt,Y$)=>{"use strict";var G2e=Math.log;Y$.exports=Math.log1p||function(t){var n=+t;return n>-1e-8&&n<1e-8?n-n*n/2:G2e(1+n)}});var Q$=I(()=>{"use strict";var H2e=V(),W2e=m2(),v2=Math.acosh,Z2e=Math.log,J$=Math.sqrt,K2e=Math.LN2,X2e=!v2||Math.floor(v2(Number.MAX_VALUE))!==710||v2(1/0)!==1/0;H2e({target:"Math",stat:!0,forced:X2e},{acosh:function(t){var n=+t;return n<1?NaN:n>94906265.62425156?Z2e(n)+K2e:W2e(n-1+J$(n-1)*J$(n+1))}})});var rV=I(()=>{"use strict";var Y2e=V(),eV=Math.asinh,J2e=Math.log,Q2e=Math.sqrt;function tV(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-tV(-t):J2e(t+Q2e(t*t+1))}var eAe=!(eV&&1/eV(0)>0);Y2e({target:"Math",stat:!0,forced:eAe},{asinh:tV})});var nV=I(()=>{"use strict";var tAe=V(),iV=Math.atanh,rAe=Math.log,iAe=!(iV&&1/iV(-0)<0);tAe({target:"Math",stat:!0,forced:iAe},{atanh:function(t){var n=+t;return n===0?n:rAe((1+n)/(1-n))/2}})});var aV=I(()=>{"use strict";var nAe=V(),aAe=lx(),oAe=Math.abs,sAe=Math.pow;nAe({target:"Math",stat:!0},{cbrt:function(t){var n=+t;return aAe(n)*sAe(oAe(n),1/3)}})});var oV=I(()=>{"use strict";var uAe=V(),lAe=Math.floor,cAe=Math.log,hAe=Math.LOG2E;uAe({target:"Math",stat:!0},{clz32:function(t){var n=t>>>0;return n?31-lAe(cAe(n+.5)*hAe):32}})});var Dv=I(($vt,sV)=>{"use strict";var Rv=Math.expm1,fAe=Math.exp;sV.exports=!Rv||Rv(10)>22025.465794806718||Rv(10)<22025.465794806718||Rv(-2e-17)!==-2e-17?function(t){var n=+t;return n===0?n:n>-1e-6&&n<1e-6?n+n*n/2:fAe(n)-1}:Rv});var lV=I(()=>{"use strict";var dAe=V(),pAe=Dv(),uV=Math.cosh,mAe=Math.abs,g2=Math.E,vAe=!uV||uV(710)===1/0;dAe({target:"Math",stat:!0,forced:vAe},{cosh:function(t){var n=pAe(mAe(t)-1)+1;return(n+1/(n*g2*g2))*(g2/2)}})});var hV=I(()=>{"use strict";var gAe=V(),cV=Dv();gAe({target:"Math",stat:!0,forced:cV!==Math.expm1},{expm1:cV})});var fV=I(()=>{"use strict";var yAe=V(),_Ae=cx();yAe({target:"Math",stat:!0},{fround:_Ae})});var pV=I(()=>{"use strict";var xAe=V(),dV=Math.hypot,bAe=Math.abs,wAe=Math.sqrt,SAe=!!dV&&dV(1/0,NaN)!==1/0;xAe({target:"Math",stat:!0,arity:2,forced:SAe},{hypot:function(t,n){for(var u=0,c=0,s=arguments.length,_=0,w,E;c<s;)w=bAe(arguments[c++]),_<w?(E=_/w,u=u*E*E+1,_=w):w>0?(E=w/_,u+=E*E):u+=w;return _===1/0?1/0:_*wAe(u)}})});var vV=I(()=>{"use strict";var qAe=V(),IAe=Oe(),mV=Math.imul,EAe=IAe(function(){return mV(4294967295,5)!==-5||mV.length!==2});qAe({target:"Math",stat:!0,forced:EAe},{imul:function(t,n){var u=65535,c=+t,s=+n,_=u&c,w=u&s;return 0|_*w+((u&c>>>16)*w+_*(u&s>>>16)<<16>>>0)}})});var y2=I((egt,gV)=>{"use strict";var TAe=Math.log,AAe=Math.LOG10E;gV.exports=Math.log10||function(t){return TAe(t)*AAe}});var yV=I(()=>{"use strict";var PAe=V(),CAe=y2();PAe({target:"Math",stat:!0},{log10:CAe})});var _V=I(()=>{"use strict";var MAe=V(),kAe=m2();MAe({target:"Math",stat:!0},{log1p:kAe})});var xV=I(()=>{"use strict";var OAe=V(),RAe=Math.log,DAe=Math.LN2;OAe({target:"Math",stat:!0},{log2:function(t){return RAe(t)/DAe}})});var bV=I(()=>{"use strict";var LAe=V(),zAe=lx();LAe({target:"Math",stat:!0},{sign:zAe})});var qV=I(()=>{"use strict";var FAe=V(),NAe=Oe(),wV=Dv(),BAe=Math.abs,SV=Math.exp,jAe=Math.E,UAe=NAe(function(){return Math.sinh(-2e-17)!==-2e-17});FAe({target:"Math",stat:!0,forced:UAe},{sinh:function(t){var n=+t;return BAe(n)<1?(wV(n)-wV(-n))/2:(SV(n-1)-SV(-n-1))*(jAe/2)}})});var TV=I(()=>{"use strict";var $Ae=V(),IV=Dv(),EV=Math.exp;$Ae({target:"Math",stat:!0},{tanh:function(t){var n=+t,u=IV(n),c=IV(-n);return u===1/0?1:c===1/0?-1:(u-c)/(EV(n)+EV(-n))}})});var AV=I(()=>{"use strict";var VAe=Dn();VAe(Math,"Math",!0)});var PV=I(()=>{"use strict";var GAe=V(),HAe=dE();GAe({target:"Math",stat:!0},{trunc:HAe})});var Lv=I((ggt,CV)=>{"use strict";var WAe=Pe();CV.exports=WAe(1 .valueOf)});var Nc=I((ygt,MV)=>{"use strict";MV.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var Bc=I((_gt,OV)=>{"use strict";var ZAe=Pe(),KAe=vr(),XAe=St(),x2=Nc(),kV=ZAe("".replace),YAe=RegExp("^["+x2+"]+"),JAe=RegExp("(^|[^"+x2+"])["+x2+"]+$"),_2=function(e){return function(t){var n=XAe(KAe(t));return e&1&&(n=kV(n,YAe,"")),e&2&&(n=kV(n,JAe,"$1")),n}};OV.exports={start:_2(1),end:_2(2),trim:_2(3)}});var BV=I(()=>{"use strict";var QAe=V(),b2=Dt(),ePe=ft(),LV=it(),w2=D0(),zV=Pe(),tPe=Nf(),RV=Mt(),rPe=Cc(),iPe=Xi(),nPe=Ts(),FV=nv(),aPe=Oe(),oPe=As().f,sPe=ui().f,uPe=dr().f,lPe=Lv(),cPe=Bc().trim,zv="Number",Jf=LV[zv],DV=w2[zv],S2=Jf.prototype,hPe=LV.TypeError,fPe=zV("".slice),Px=zV("".charCodeAt),dPe=function(e){var t=FV(e,"number");return typeof t=="bigint"?t:pPe(t)},pPe=function(e){var t=FV(e,"number"),n,u,c,s,_,w,E,P;if(nPe(t))throw new hPe("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=cPe(t),n=Px(t,0),n===43||n===45){if(u=Px(t,2),u===88||u===120)return NaN}else if(n===48){switch(Px(t,1)){case 66:case 98:c=2,s=49;break;case 79:case 111:c=8,s=55;break;default:return+t;}for(_=fPe(t,2),w=_.length,E=0;E<w;E++)if(P=Px(_,E),P<48||P>s)return NaN;return parseInt(_,c)}}return+t},q2=tPe(zv,!Jf(" 0o1")||!Jf("0b1")||Jf("+0x1")),mPe=function(e){return iPe(S2,e)&&aPe(function(){lPe(e)})},Cx=function(t){var n=arguments.length<1?0:Jf(dPe(t));return mPe(this)?rPe(Object(n),this,Cx):n};Cx.prototype=S2;q2&&!b2&&(S2.constructor=Cx);QAe({global:!0,constructor:!0,wrap:!0,forced:q2},{Number:Cx});var NV=function(e,t){for(var n=ePe?oPe(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),u=0,c;n.length>u;u++)RV(t,c=n[u])&&!RV(e,c)&&uPe(e,c,sPe(t,c))};b2&&DV&&NV(w2[zv],DV);(q2||b2)&&NV(w2[zv],Jf)});var jV=I(()=>{"use strict";var vPe=V();vPe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var I2=I((qgt,UV)=>{"use strict";var gPe=it(),yPe=gPe.isFinite;UV.exports=Number.isFinite||function(t){return typeof t=="number"&&yPe(t)}});var $V=I(()=>{"use strict";var _Pe=V(),xPe=I2();_Pe({target:"Number",stat:!0},{isFinite:xPe})});var Mx=I((Tgt,VV)=>{"use strict";var bPe=It(),wPe=Math.floor;VV.exports=Number.isInteger||function(t){return!bPe(t)&&isFinite(t)&&wPe(t)===t}});var GV=I(()=>{"use strict";var SPe=V(),qPe=Mx();SPe({target:"Number",stat:!0},{isInteger:qPe})});var HV=I(()=>{"use strict";var IPe=V();IPe({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var WV=I(()=>{"use strict";var EPe=V(),TPe=Mx(),APe=Math.abs;EPe({target:"Number",stat:!0},{isSafeInteger:function(t){return TPe(t)&&APe(t)<=9007199254740991}})});var ZV=I(()=>{"use strict";var PPe=V();PPe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var KV=I(()=>{"use strict";var CPe=V();CPe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var E2=I((Fgt,QV)=>{"use strict";var JV=it(),MPe=Oe(),kPe=Pe(),OPe=St(),RPe=Bc().trim,DPe=Nc(),LPe=kPe("".charAt),kx=JV.parseFloat,XV=JV.Symbol,YV=XV&&XV.iterator,zPe=1/kx(DPe+"-0")!==-1/0||YV&&!MPe(function(){kx(Object(YV))});QV.exports=zPe?function(t){var n=RPe(OPe(t)),u=kx(n);return u===0&&LPe(n,0)==="-"?-0:u}:kx});var t8=I(()=>{"use strict";var FPe=V(),e8=E2();FPe({target:"Number",stat:!0,forced:Number.parseFloat!==e8},{parseFloat:e8})});var Ox=I((jgt,s8)=>{"use strict";var a8=it(),NPe=Oe(),BPe=Pe(),jPe=St(),UPe=Bc().trim,r8=Nc(),Fv=a8.parseInt,i8=a8.Symbol,n8=i8&&i8.iterator,o8=/^[+-]?0x/i,$Pe=BPe(o8.exec),VPe=Fv(r8+"08")!==8||Fv(r8+"0x16")!==22||n8&&!NPe(function(){Fv(Object(n8))});s8.exports=VPe?function(t,n){var u=UPe(jPe(t));return Fv(u,n>>>0||($Pe(o8,u)?16:10))}:Fv});var l8=I(()=>{"use strict";var GPe=V(),u8=Ox();GPe({target:"Number",stat:!0,forced:Number.parseInt!==u8},{parseInt:u8})});var p8=I(()=>{"use strict";var HPe=V(),A2=Pe(),WPe=gr(),ZPe=Lv(),KPe=Cv(),XPe=y2(),T2=Oe(),YPe=RangeError,c8=String,JPe=isFinite,QPe=Math.abs,eCe=Math.floor,h8=Math.pow,tCe=Math.round,$o=A2(1 .toExponential),rCe=A2(KPe),f8=A2("".slice),d8=$o(-69e-12,4)==="-6.9000e-11"&&$o(1.255,2)==="1.25e+0"&&$o(12345,3)==="1.235e+4"&&$o(25,0)==="3e+1",iCe=function(){return T2(function(){$o(1,1/0)})&&T2(function(){$o(1,-1/0)})},nCe=function(){return!T2(function(){$o(1/0,1/0),$o(NaN,1/0)})},aCe=!d8||!iCe()||!nCe();HPe({target:"Number",proto:!0,forced:aCe},{toExponential:function(t){var n=ZPe(this);if(t===void 0)return $o(n);var u=WPe(t);if(!JPe(n))return String(n);if(u<0||u>20)throw new YPe("Incorrect fraction digits");if(d8)return $o(n,u);var c="",s="",_=0,w="",E="";if(n<0&&(c="-",n=-n),n===0)_=0,s=rCe("0",u+1);else{var P=XPe(n);_=eCe(P);var C=0,B=h8(10,_-u);C=tCe(n/B),2*n>=(2*C+1)*B&&(C+=1),C>=h8(10,u+1)&&(C/=10,_+=1),s=c8(C)}return u!==0&&(s=f8(s,0,1)+"."+f8(s,1)),_===0?(w="+",E="0"):(w=_>0?"+":"-",E=c8(QPe(_))),s+="e"+w+E,c+s}})});var x8=I(()=>{"use strict";var oCe=V(),M2=Pe(),sCe=gr(),uCe=Lv(),lCe=Cv(),m8=Oe(),cCe=RangeError,y8=String,_8=Math.floor,C2=M2(lCe),v8=M2("".slice),Nv=M2(1 .toFixed),ed=function(e,t,n){return t===0?n:t%2===1?ed(e,t-1,n*e):ed(e*e,t/2,n)},hCe=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t},Qf=function(e,t,n){for(var u=-1,c=n;++u<6;)c+=t*e[u],e[u]=c%1e7,c=_8(c/1e7)},P2=function(e,t){for(var n=6,u=0;--n>=0;)u+=e[n],e[n]=_8(u/t),u=u%t*1e7},g8=function(e){for(var t=6,n="";--t>=0;)if(n!==""||t===0||e[t]!==0){var u=y8(e[t]);n=n===""?u:n+C2("0",7-u.length)+u}return n},fCe=m8(function(){return Nv(8e-5,3)!=="0.000"||Nv(.9,0)!=="1"||Nv(1.255,2)!=="1.25"||Nv(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!m8(function(){Nv({})});oCe({target:"Number",proto:!0,forced:fCe},{toFixed:function(t){var n=uCe(this),u=sCe(t),c=[0,0,0,0,0,0],s="",_="0",w,E,P,C;if(u<0||u>20)throw new cCe("Incorrect fraction digits");if(n!==n)return"NaN";if(n<=-1e21||n>=1e21)return y8(n);if(n<0&&(s="-",n=-n),n>1e-21)if(w=hCe(n*ed(2,69,1))-69,E=w<0?n*ed(2,-w,1):n/ed(2,w,1),E*=4503599627370496,w=52-w,w>0){for(Qf(c,0,E),P=u;P>=7;)Qf(c,1e7,0),P-=7;for(Qf(c,ed(10,P,1),0),P=w-1;P>=23;)P2(c,1<<23),P-=23;P2(c,1<<P),Qf(c,1,1),P2(c,2),_=g8(c)}else Qf(c,0,E),Qf(c,1<<-w,0),_=g8(c)+C2("0",u);return u>0?(C=_.length,_=s+(C<=u?"0."+C2("0",u-C)+_:v8(_,0,C-u)+"."+v8(_,C-u))):_=s+_,_}})});var S8=I(()=>{"use strict";var dCe=V(),pCe=Pe(),b8=Oe(),w8=Lv(),Rx=pCe(1 .toPrecision),mCe=b8(function(){return Rx(1,void 0)!=="1"})||!b8(function(){Rx({})});dCe({target:"Number",proto:!0,forced:mCe},{toPrecision:function(t){return t===void 0?Rx(w8(this)):Rx(w8(this),t)}})});var O2=I((Xgt,E8)=>{"use strict";var q8=ft(),vCe=Pe(),gCe=He(),yCe=Oe(),k2=Ic(),_Ce=cv(),xCe=rv(),bCe=Lt(),wCe=Es(),td=Object.assign,I8=Object.defineProperty,SCe=vCe([].concat);E8.exports=!td||yCe(function(){if(q8&&td({b:1},td(I8({},"a",{enumerable:!0,get:function(){I8(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},n=Symbol("assign detection"),u="abcdefghijklmnopqrst";return e[n]=7,u.split("").forEach(function(c){t[c]=c}),td({},e)[n]!==7||k2(td({},t)).join("")!==u})?function(t,n){for(var u=bCe(t),c=arguments.length,s=1,_=_Ce.f,w=xCe.f;c>s;)for(var E=wCe(arguments[s++]),P=_?SCe(k2(E),_(E)):k2(E),C=P.length,B=0,$;C>B;)$=P[B++],(!q8||gCe(w,E,$))&&(u[$]=E[$]);return u}:td});var A8=I(()=>{"use strict";var qCe=V(),T8=O2();qCe({target:"Object",stat:!0,arity:2,forced:Object.assign!==T8},{assign:T8})});var P8=I(()=>{"use strict";var ICe=V(),ECe=ft(),TCe=Ur();ICe({target:"Object",stat:!0,sham:!ECe},{create:TCe})});var Bv=I((tyt,M8)=>{"use strict";var ACe=Dt(),PCe=it(),CCe=Oe(),C8=sx();M8.exports=ACe||!CCe(function(){if(!(C8&&C8<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete PCe[e]}})});var k8=I(()=>{"use strict";var MCe=V(),kCe=ft(),OCe=Bv(),RCe=bt(),DCe=Lt(),LCe=dr();kCe&&MCe({target:"Object",proto:!0,forced:OCe},{__defineGetter__:function(t,n){LCe.f(DCe(this),t,{get:RCe(n),enumerable:!0,configurable:!0})}})});var R8=I(()=>{"use strict";var zCe=V(),FCe=ft(),O8=M0().f;zCe({target:"Object",stat:!0,forced:Object.defineProperties!==O8,sham:!FCe},{defineProperties:O8})});var L8=I(()=>{"use strict";var NCe=V(),BCe=ft(),D8=dr().f;NCe({target:"Object",stat:!0,forced:Object.defineProperty!==D8,sham:!BCe},{defineProperty:D8})});var z8=I(()=>{"use strict";var jCe=V(),UCe=ft(),$Ce=Bv(),VCe=bt(),GCe=Lt(),HCe=dr();UCe&&jCe({target:"Object",proto:!0,forced:$Ce},{__defineSetter__:function(t,n){HCe.f(GCe(this),t,{set:VCe(n),enumerable:!0,configurable:!0})}})});var R2=I((cyt,U8)=>{"use strict";var N8=ft(),WCe=Oe(),B8=Pe(),ZCe=Xr(),KCe=Ic(),XCe=ri(),YCe=rv().f,j8=B8(YCe),JCe=B8([].push),QCe=N8&&WCe(function(){var e=Object.create(null);return e[2]=2,!j8(e,2)}),F8=function(e){return function(t){for(var n=XCe(t),u=KCe(n),c=QCe&&ZCe(n)===null,s=u.length,_=0,w=[],E;s>_;)E=u[_++],(!N8||(c?E in n:j8(n,E)))&&JCe(w,e?[E,n[E]]:n[E]);return w}};U8.exports={entries:F8(!0),values:F8(!1)}});var $8=I(()=>{"use strict";var eMe=V(),tMe=R2().entries;eMe({target:"Object",stat:!0},{entries:function(t){return tMe(t)}})});var V8=I(()=>{"use strict";var rMe=V(),iMe=Bs(),nMe=Oe(),aMe=It(),oMe=vl().onFreeze,D2=Object.freeze,sMe=nMe(function(){D2(1)});rMe({target:"Object",stat:!0,forced:sMe,sham:!iMe},{freeze:function(t){return D2&&aMe(t)?D2(oMe(t)):t}})});var G8=I(()=>{"use strict";var uMe=V(),lMe=Rr(),cMe=ka();uMe({target:"Object",stat:!0},{fromEntries:function(t){var n={};return lMe(t,function(u,c){cMe(n,u,c)},{AS_ENTRIES:!0}),n}})});var Z8=I(()=>{"use strict";var hMe=V(),fMe=Oe(),dMe=ri(),H8=ui().f,W8=ft(),pMe=!W8||fMe(function(){H8(1)});hMe({target:"Object",stat:!0,forced:pMe,sham:!W8},{getOwnPropertyDescriptor:function(t,n){return H8(dMe(t),n)}})});var K8=I(()=>{"use strict";var mMe=V(),vMe=ft(),gMe=A0(),yMe=ri(),_Me=ui(),xMe=ka();mMe({target:"Object",stat:!0,sham:!vMe},{getOwnPropertyDescriptors:function(t){for(var n=yMe(t),u=_Me.f,c=gMe(n),s={},_=0,w,E;c.length>_;)E=u(n,w=c[_++]),E!==void 0&&xMe(s,w,E);return s}})});var X8=I(()=>{"use strict";var bMe=V(),wMe=Oe(),SMe=R0().f,qMe=wMe(function(){return!Object.getOwnPropertyNames(1)});bMe({target:"Object",stat:!0,forced:qMe},{getOwnPropertyNames:SMe})});var J8=I(()=>{"use strict";var IMe=V(),EMe=Oe(),TMe=Lt(),Y8=Xr(),AMe=Z0(),PMe=EMe(function(){Y8(1)});IMe({target:"Object",stat:!0,forced:PMe,sham:!AMe},{getPrototypeOf:function(t){return Y8(TMe(t))}})});var L2=I(()=>{"use strict";var CMe=V(),MMe=Mt();CMe({target:"Object",stat:!0},{hasOwn:MMe})});var z2=I((Tyt,Q8)=>{"use strict";Q8.exports=Object.is||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}});var eG=I(()=>{"use strict";var kMe=V(),OMe=z2();kMe({target:"Object",stat:!0},{is:OMe})});var rG=I(()=>{"use strict";var RMe=V(),tG=Ex();RMe({target:"Object",stat:!0,forced:Object.isExtensible!==tG},{isExtensible:tG})});var nG=I(()=>{"use strict";var DMe=V(),LMe=Oe(),zMe=It(),FMe=Ci(),iG=qx(),F2=Object.isFrozen,NMe=iG||LMe(function(){F2(1)});DMe({target:"Object",stat:!0,forced:NMe},{isFrozen:function(t){return!zMe(t)||iG&&FMe(t)==="ArrayBuffer"?!0:F2?F2(t):!1}})});var oG=I(()=>{"use strict";var BMe=V(),jMe=Oe(),UMe=It(),$Me=Ci(),aG=qx(),N2=Object.isSealed,VMe=aG||jMe(function(){N2(1)});BMe({target:"Object",stat:!0,forced:VMe},{isSealed:function(t){return!UMe(t)||aG&&$Me(t)==="ArrayBuffer"?!0:N2?N2(t):!1}})});var uG=I(()=>{"use strict";var GMe=V(),HMe=Lt(),sG=Ic(),WMe=Oe(),ZMe=WMe(function(){sG(1)});GMe({target:"Object",stat:!0,forced:ZMe},{keys:function(t){return sG(HMe(t))}})});var lG=I(()=>{"use strict";var KMe=V(),XMe=ft(),YMe=Bv(),JMe=Lt(),QMe=so(),eke=Xr(),tke=ui().f;XMe&&KMe({target:"Object",proto:!0,forced:YMe},{__lookupGetter__:function(t){var n=JMe(this),u=QMe(t),c;do if(c=tke(n,u))return c.get;while(n=eke(n))}})});var cG=I(()=>{"use strict";var rke=V(),ike=ft(),nke=Bv(),ake=Lt(),oke=so(),ske=Xr(),uke=ui().f;ike&&rke({target:"Object",proto:!0,forced:nke},{__lookupSetter__:function(t){var n=ake(this),u=oke(t),c;do if(c=uke(n,u))return c.set;while(n=ske(n))}})});var hG=I(()=>{"use strict";var lke=V(),cke=It(),hke=vl().onFreeze,fke=Bs(),dke=Oe(),B2=Object.preventExtensions,pke=dke(function(){B2(1)});lke({target:"Object",stat:!0,forced:pke,sham:!fke},{preventExtensions:function(t){return B2&&cke(t)?B2(hke(t)):t}})});var gG=I(()=>{"use strict";var mke=ft(),vke=qr(),fG=It(),gke=Lt(),yke=vr(),dG=Object.getPrototypeOf,pG=Object.setPrototypeOf,mG=Object.prototype,vG="__proto__";if(mke&&dG&&pG&&!(vG in mG))try{vke(mG,vG,{configurable:!0,get:function(){return dG(gke(this))},set:function(t){var n=yke(this);!fG(t)&&t!==null||!fG(n)||pG(n,t)}})}catch(e){}});var yG=I(()=>{"use strict";var _ke=V(),xke=It(),bke=vl().onFreeze,wke=Bs(),Ske=Oe(),j2=Object.seal,qke=Ske(function(){j2(1)});_ke({target:"Object",stat:!0,forced:qke,sham:!wke},{seal:function(t){return j2&&xke(t)?j2(bke(t)):t}})});var _G=I(()=>{"use strict";var Ike=V(),Eke=Ra();Ike({target:"Object",stat:!0},{setPrototypeOf:Eke})});var bG=I((Xyt,xG)=>{"use strict";var Tke=P0(),Ake=Rn();xG.exports=Tke?{}.toString:function(){return"[object "+Ake(this)+"]"}});var wG=I(()=>{"use strict";var Pke=P0(),Cke=tr(),Mke=bG();Pke||Cke(Object.prototype,"toString",Mke,{unsafe:!0})});var SG=I(()=>{"use strict";var kke=V(),Oke=R2().values;kke({target:"Object",stat:!0},{values:function(t){return Oke(t)}})});var IG=I(()=>{"use strict";var Rke=V(),qG=E2();Rke({global:!0,forced:parseFloat!==qG},{parseFloat:qG})});var TG=I(()=>{"use strict";var Dke=V(),EG=Ox();Dke({global:!0,forced:parseInt!==EG},{parseInt:EG})});var Fa=I((a_t,AG)=>{"use strict";var Lke=TypeError;AG.exports=function(e,t){if(e<t)throw new Lke("Not enough arguments");return e}});var U2=I((o_t,PG)=>{"use strict";var zke=Lo();PG.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(zke)});var $v=I((s_t,FG)=>{"use strict";var ua=it(),Fke=Yi(),Nke=or(),CG=qt(),Bke=Mt(),zG=Oe(),MG=gE(),jke=Ms(),kG=av(),Uke=Fa(),$ke=U2(),Vke=Bo(),Z2=ua.setImmediate,K2=ua.clearImmediate,Gke=ua.process,$2=ua.Dispatch,Hke=ua.Function,OG=ua.MessageChannel,Wke=ua.String,V2=0,jv={},RG="onreadystatechange",Uv,jc,G2,H2;zG(function(){Uv=ua.location});var X2=function(e){if(Bke(jv,e)){var t=jv[e];delete jv[e],t()}},W2=function(e){return function(){X2(e)}},DG=function(e){X2(e.data)},LG=function(e){ua.postMessage(Wke(e),Uv.protocol+"//"+Uv.host)};(!Z2||!K2)&&(Z2=function(t){Uke(arguments.length,1);var n=CG(t)?t:Hke(t),u=jke(arguments,1);return jv[++V2]=function(){Fke(n,void 0,u)},jc(V2),V2},K2=function(t){delete jv[t]},Vke?jc=function(e){Gke.nextTick(W2(e))}:$2&&$2.now?jc=function(e){$2.now(W2(e))}:OG&&!$ke?(G2=new OG,H2=G2.port2,G2.port1.onmessage=DG,jc=Nke(H2.postMessage,H2)):ua.addEventListener&&CG(ua.postMessage)&&!ua.importScripts&&Uv&&Uv.protocol!=="file:"&&!zG(LG)?(jc=LG,ua.addEventListener("message",DG,!1)):RG in kG("script")?jc=function(e){MG.appendChild(kG("script"))[RG]=function(){MG.removeChild(this),X2(e)}}:jc=function(e){setTimeout(W2(e),0)});FG.exports={set:Z2,clear:K2}});var Y2=I((u_t,BG)=>{"use strict";var NG=function(){this.head=null,this.tail=null};NG.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};BG.exports=NG});var UG=I((l_t,jG)=>{"use strict";var Zke=Lo();jG.exports=/ipad|iphone|ipod/i.test(Zke)&&typeof Pebble!="undefined"});var VG=I((c_t,$G)=>{"use strict";var Kke=Lo();$G.exports=/web0s(?!.*chrome)/i.test(Kke)});var iA=I((h_t,YG)=>{"use strict";var Uc=it(),GG=or(),Xke=ui().f,J2=$v().set,Yke=Y2(),Jke=U2(),Qke=UG(),eOe=VG(),Q2=Bo(),HG=Uc.MutationObserver||Uc.WebKitMutationObserver,WG=Uc.document,ZG=Uc.process,Dx=Uc.Promise,KG=Xke(Uc,"queueMicrotask"),rA=KG&&KG.value,rd,eA,tA,Lx,XG;rA||(Vv=new Yke,Gv=function(){var e,t;for(Q2&&(e=ZG.domain)&&e.exit();t=Vv.get();)try{t()}catch(n){throw Vv.head&&rd(),n}e&&e.enter()},!Jke&&!Q2&&!eOe&&HG&&WG?(eA=!0,tA=WG.createTextNode(""),new HG(Gv).observe(tA,{characterData:!0}),rd=function(){tA.data=eA=!eA}):!Qke&&Dx&&Dx.resolve?(Lx=Dx.resolve(void 0),Lx.constructor=Dx,XG=GG(Lx.then,Lx),rd=function(){XG(Gv)}):Q2?rd=function(){ZG.nextTick(Gv)}:(J2=GG(J2,Uc),rd=function(){J2(Gv)}),rA=function(e){Vv.head||rd(),Vv.add(e)});var Vv,Gv;YG.exports=rA});var nA=I((f_t,JG)=>{"use strict";JG.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(n){}}});var gl=I((d_t,QG)=>{"use strict";QG.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var $c=I((p_t,eH)=>{"use strict";var tOe=it();eH.exports=tOe.Promise});var zx=I((m_t,tH)=>{"use strict";tH.exports=typeof Deno=="object"&&Deno&&typeof Deno.version=="object"});var aA=I((v_t,rH)=>{"use strict";var rOe=zx(),iOe=Bo();rH.exports=!rOe&&!iOe&&typeof window=="object"&&typeof document=="object"});var id=I((g_t,aH)=>{"use strict";var nOe=it(),Hv=$c(),aOe=qt(),oOe=Nf(),sOe=ov(),uOe=pt(),lOe=aA(),cOe=zx(),hOe=Dt(),oA=zo(),iH=Hv&&Hv.prototype,fOe=uOe("species"),sA=!1,nH=aOe(nOe.PromiseRejectionEvent),dOe=oOe("Promise",function(){var e=sOe(Hv),t=e!==String(Hv);if(!t&&oA===66||hOe&&!(iH.catch&&iH.finally))return!0;if(!oA||oA<51||!/native code/.test(e)){var n=new Hv(function(s){s(1)}),u=function(s){s(function(){},function(){})},c=n.constructor={};if(c[fOe]=u,sA=n.then(function(){})instanceof u,!sA)return!0}return!t&&(lOe||cOe)&&!nH});aH.exports={CONSTRUCTOR:dOe,REJECTION_EVENT:nH,SUBCLASSING:sA}});var Vo=I((y_t,sH)=>{"use strict";var oH=bt(),pOe=TypeError,mOe=function(e){var t,n;this.promise=new e(function(u,c){if(t!==void 0||n!==void 0)throw new pOe("Bad Promise constructor");t=u,n=c}),this.resolve=oH(t),this.reject=oH(n)};sH.exports.f=function(e){return new mOe(e)}});var EH=I(()=>{"use strict";var vOe=V(),gOe=Dt(),jx=Bo(),yl=it(),sd=He(),uH=tr(),lH=Ra(),yOe=Dn(),_Oe=cl(),xOe=bt(),Bx=qt(),bOe=It(),wOe=Ji(),SOe=zc(),pH=$v().set,fA=iA(),qOe=nA(),IOe=gl(),EOe=Y2(),mH=Yt(),Ux=$c(),dA=id(),vH=Vo(),$x="Promise",gH=dA.CONSTRUCTOR,TOe=dA.REJECTION_EVENT,AOe=dA.SUBCLASSING,uA=mH.getterFor($x),POe=mH.set,nd=Ux&&Ux.prototype,Vc=Ux,Fx=nd,yH=yl.TypeError,lA=yl.document,pA=yl.process,cA=vH.f,COe=cA,MOe=!!(lA&&lA.createEvent&&yl.dispatchEvent),_H="unhandledrejection",kOe="rejectionhandled",cH=0,xH=1,OOe=2,mA=1,bH=2,Nx,hH,ROe,fH,wH=function(e){var t;return bOe(e)&&Bx(t=e.then)?t:!1},SH=function(e,t){var n=t.value,u=t.state===xH,c=u?e.ok:e.fail,s=e.resolve,_=e.reject,w=e.domain,E,P,C;try{c?(u||(t.rejection===bH&&LOe(t),t.rejection=mA),c===!0?E=n:(w&&w.enter(),E=c(n),w&&(w.exit(),C=!0)),E===e.promise?_(new yH("Promise-chain cycle")):(P=wH(E))?sd(P,E,s,_):s(E)):_(n)}catch(B){w&&!C&&w.exit(),_(B)}},qH=function(e,t){e.notified||(e.notified=!0,fA(function(){for(var n=e.reactions,u;u=n.get();)SH(u,e);e.notified=!1,t&&!e.rejection&&DOe(e)}))},IH=function(e,t,n){var u,c;MOe?(u=lA.createEvent("Event"),u.promise=t,u.reason=n,u.initEvent(e,!1,!0),yl.dispatchEvent(u)):u={promise:t,reason:n},!TOe&&(c=yl["on"+e])?c(u):e===_H&&qOe("Unhandled promise rejection",n)},DOe=function(e){sd(pH,yl,function(){var t=e.facade,n=e.value,u=dH(e),c;if(u&&(c=IOe(function(){jx?pA.emit("unhandledRejection",n,t):IH(_H,t,n)}),e.rejection=jx||dH(e)?bH:mA,c.error))throw c.value})},dH=function(e){return e.rejection!==mA&&!e.parent},LOe=function(e){sd(pH,yl,function(){var t=e.facade;jx?pA.emit("rejectionHandled",t):IH(kOe,t,e.value)})},ad=function(e,t,n){return function(u){e(t,u,n)}},od=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=OOe,qH(e,!0))},hA=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new yH("Promise can't be resolved itself");var u=wH(t);u?fA(function(){var c={done:!1};try{sd(u,t,ad(hA,c,e),ad(od,c,e))}catch(s){od(c,s,e)}}):(e.value=t,e.state=xH,qH(e,!1))}catch(c){od({done:!1},c,e)}}};if(gH&&(Vc=function(t){wOe(this,Fx),xOe(t),sd(Nx,this);var n=uA(this);try{t(ad(hA,n),ad(od,n))}catch(u){od(n,u)}},Fx=Vc.prototype,Nx=function(t){POe(this,{type:$x,done:!1,notified:!1,parent:!1,reactions:new EOe,rejection:!1,state:cH,value:void 0})},Nx.prototype=uH(Fx,"then",function(t,n){var u=uA(this),c=cA(SOe(this,Vc));return u.parent=!0,c.ok=Bx(t)?t:!0,c.fail=Bx(n)&&n,c.domain=jx?pA.domain:void 0,u.state===cH?u.reactions.add(c):fA(function(){SH(c,u)}),c.promise}),hH=function(){var e=new Nx,t=uA(e);this.promise=e,this.resolve=ad(hA,t),this.reject=ad(od,t)},vH.f=cA=function(e){return e===Vc||e===ROe?new hH(e):COe(e)},!gOe&&Bx(Ux)&&nd!==Object.prototype)){fH=nd.then,AOe||uH(nd,"then",function(t,n){var u=this;return new Vc(function(c,s){sd(fH,u,c,s)}).then(t,n)},{unsafe:!0});try{delete nd.constructor}catch(e){}lH&&lH(nd,Fx)}vOe({global:!0,constructor:!0,wrap:!0,forced:gH},{Promise:Vc});yOe(Vc,$x,!1,!0);_Oe($x)});var Wv=I((b_t,TH)=>{"use strict";var zOe=$c(),FOe=wv(),NOe=id().CONSTRUCTOR;TH.exports=NOe||!FOe(function(e){zOe.all(e).then(void 0,function(){})})});var AH=I(()=>{"use strict";var BOe=V(),jOe=He(),UOe=bt(),$Oe=Vo(),VOe=gl(),GOe=Rr(),HOe=Wv();BOe({target:"Promise",stat:!0,forced:HOe},{all:function(t){var n=this,u=$Oe.f(n),c=u.resolve,s=u.reject,_=VOe(function(){var w=UOe(n.resolve),E=[],P=0,C=1;GOe(t,function(B){var $=P++,re=!1;C++,jOe(w,n,B).then(function(xe){re||(re=!0,E[$]=xe,--C||c(E))},s)}),--C||c(E)});return _.error&&s(_.value),u.promise}})});var CH=I(()=>{"use strict";var WOe=V(),ZOe=Dt(),KOe=id().CONSTRUCTOR,gA=$c(),XOe=xt(),YOe=qt(),JOe=tr(),PH=gA&&gA.prototype;WOe({target:"Promise",proto:!0,forced:KOe,real:!0},{catch:function(e){return this.then(void 0,e)}});!ZOe&&YOe(gA)&&(vA=XOe("Promise").prototype.catch,PH.catch!==vA&&JOe(PH,"catch",vA,{unsafe:!0}));var vA});var MH=I(()=>{"use strict";var QOe=V(),eRe=He(),tRe=bt(),rRe=Vo(),iRe=gl(),nRe=Rr(),aRe=Wv();QOe({target:"Promise",stat:!0,forced:aRe},{race:function(t){var n=this,u=rRe.f(n),c=u.reject,s=iRe(function(){var _=tRe(n.resolve);nRe(t,function(w){eRe(_,n,w).then(u.resolve,c)})});return s.error&&c(s.value),u.promise}})});var kH=I(()=>{"use strict";var oRe=V(),sRe=He(),uRe=Vo(),lRe=id().CONSTRUCTOR;oRe({target:"Promise",stat:!0,forced:lRe},{reject:function(t){var n=uRe.f(this);return sRe(n.reject,void 0,t),n.promise}})});var yA=I((C_t,OH)=>{"use strict";var cRe=Ze(),hRe=It(),fRe=Vo();OH.exports=function(e,t){if(cRe(e),hRe(t)&&t.constructor===e)return t;var n=fRe.f(e),u=n.resolve;return u(t),n.promise}});var LH=I(()=>{"use strict";var dRe=V(),pRe=xt(),RH=Dt(),mRe=$c(),DH=id().CONSTRUCTOR,vRe=yA(),gRe=pRe("Promise"),yRe=RH&&!DH;dRe({target:"Promise",stat:!0,forced:RH||DH},{resolve:function(t){return vRe(yRe&&this===gRe?mRe:this,t)}})});var zH=I(()=>{"use strict";EH();AH();CH();MH();kH();LH()});var _A=I(()=>{"use strict";var _Re=V(),xRe=He(),bRe=bt(),wRe=Vo(),SRe=gl(),qRe=Rr(),IRe=Wv();_Re({target:"Promise",stat:!0,forced:IRe},{allSettled:function(t){var n=this,u=wRe.f(n),c=u.resolve,s=u.reject,_=SRe(function(){var w=bRe(n.resolve),E=[],P=0,C=1;qRe(t,function(B){var $=P++,re=!1;C++,xRe(w,n,B).then(function(xe){re||(re=!0,E[$]={status:"fulfilled",value:xe},--C||c(E))},function(xe){re||(re=!0,E[$]={status:"rejected",reason:xe},--C||c(E))})}),--C||c(E)});return _.error&&s(_.value),u.promise}})});var xA=I(()=>{"use strict";var ERe=V(),TRe=He(),ARe=bt(),PRe=xt(),CRe=Vo(),MRe=gl(),kRe=Rr(),ORe=Wv(),FH="No one promise resolved";ERe({target:"Promise",stat:!0,forced:ORe},{any:function(t){var n=this,u=PRe("AggregateError"),c=CRe.f(n),s=c.resolve,_=c.reject,w=MRe(function(){var E=ARe(n.resolve),P=[],C=0,B=1,$=!1;kRe(t,function(re){var xe=C++,ye=!1;B++,TRe(E,n,re).then(function(X){ye||$||($=!0,s(X))},function(X){ye||$||(ye=!0,P[xe]=X,--B||_(new u(P,FH)))})}),--B||_(new u(P,FH))});return w.error&&_(w.value),c.promise}})});var UH=I(()=>{"use strict";var RRe=V(),DRe=Dt(),Vx=$c(),LRe=Oe(),BH=xt(),jH=qt(),zRe=zc(),NH=yA(),FRe=tr(),wA=Vx&&Vx.prototype,NRe=!!Vx&&LRe(function(){wA.finally.call({then:function(){}},function(){})});RRe({target:"Promise",proto:!0,real:!0,forced:NRe},{finally:function(e){var t=zRe(this,BH("Promise")),n=jH(e);return this.then(n?function(u){return NH(t,e()).then(function(){return u})}:e,n?function(u){return NH(t,e()).then(function(){throw u})}:e)}});!DRe&&jH(Vx)&&(bA=BH("Promise").prototype.finally,wA.finally!==bA&&FRe(wA,"finally",bA,{unsafe:!0}));var bA});var $H=I(()=>{"use strict";var BRe=V(),jRe=Yi(),URe=bt(),$Re=Ze(),VRe=Oe(),GRe=!VRe(function(){Reflect.apply(function(){})});BRe({target:"Reflect",stat:!0,forced:GRe},{apply:function(t,n,u){return jRe(URe(t),n,$Re(u))}})});var XH=I(()=>{"use strict";var HRe=V(),WRe=xt(),SA=Yi(),ZRe=n2(),VH=Yf(),KRe=Ze(),GH=It(),XRe=Ur(),WH=Oe(),qA=WRe("Reflect","construct"),YRe=Object.prototype,JRe=[].push,ZH=WH(function(){function e(){}return!(qA(function(){},[],e)instanceof e)}),KH=!WH(function(){qA(function(){})}),HH=ZH||KH;HRe({target:"Reflect",stat:!0,forced:HH,sham:HH},{construct:function(t,n){VH(t),KRe(n);var u=arguments.length<3?t:VH(arguments[2]);if(KH&&!ZH)return qA(t,n,u);if(t===u){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);}var c=[null];return SA(JRe,c,n),new(SA(ZRe,t,c))}var s=u.prototype,_=XRe(GH(s)?s:YRe),w=SA(t,_,n);return GH(w)?w:_}})});var QH=I(()=>{"use strict";var QRe=V(),eDe=ft(),YH=Ze(),tDe=so(),JH=dr(),rDe=Oe(),iDe=rDe(function(){Reflect.defineProperty(JH.f({},1,{value:1}),1,{value:2})});QRe({target:"Reflect",stat:!0,forced:iDe,sham:!eDe},{defineProperty:function(t,n,u){YH(t);var c=tDe(n);YH(u);try{return JH.f(t,c,u),!0}catch(s){return!1}}})});var e9=I(()=>{"use strict";var nDe=V(),aDe=Ze(),oDe=ui().f;nDe({target:"Reflect",stat:!0},{deleteProperty:function(t,n){var u=oDe(aDe(t),n);return u&&!u.configurable?!1:delete t[n]}})});var IA=I((K_t,r9)=>{"use strict";var t9=Mt();r9.exports=function(e){return e!==void 0&&(t9(e,"value")||t9(e,"writable"))}});var n9=I(()=>{"use strict";var sDe=V(),uDe=He(),lDe=It(),cDe=Ze(),hDe=IA(),fDe=ui(),dDe=Xr();function i9(e,t){var n=arguments.length<3?e:arguments[2],u,c;if(cDe(e)===n)return e[t];if(u=fDe.f(e,t),u)return hDe(u)?u.value:u.get===void 0?void 0:uDe(u.get,n);if(lDe(c=dDe(e)))return i9(c,t,n)}sDe({target:"Reflect",stat:!0},{get:i9})});var a9=I(()=>{"use strict";var pDe=V(),mDe=ft(),vDe=Ze(),gDe=ui();pDe({target:"Reflect",stat:!0,sham:!mDe},{getOwnPropertyDescriptor:function(t,n){return gDe.f(vDe(t),n)}})});var o9=I(()=>{"use strict";var yDe=V(),_De=Ze(),xDe=Xr(),bDe=Z0();yDe({target:"Reflect",stat:!0,sham:!bDe},{getPrototypeOf:function(t){return xDe(_De(t))}})});var s9=I(()=>{"use strict";var wDe=V();wDe({target:"Reflect",stat:!0},{has:function(t,n){return n in t}})});var u9=I(()=>{"use strict";var SDe=V(),qDe=Ze(),IDe=Ex();SDe({target:"Reflect",stat:!0},{isExtensible:function(t){return qDe(t),IDe(t)}})});var l9=I(()=>{"use strict";var EDe=V(),TDe=A0();EDe({target:"Reflect",stat:!0},{ownKeys:TDe})});var c9=I(()=>{"use strict";var ADe=V(),PDe=xt(),CDe=Ze(),MDe=Bs();ADe({target:"Reflect",stat:!0,sham:!MDe},{preventExtensions:function(t){CDe(t);try{var n=PDe("Object","preventExtensions");return n&&n(t),!0}catch(u){return!1}}})});var m9=I(()=>{"use strict";var kDe=V(),ODe=He(),RDe=Ze(),h9=It(),DDe=IA(),LDe=Oe(),EA=dr(),f9=ui(),zDe=Xr(),d9=kn();function p9(e,t,n){var u=arguments.length<4?e:arguments[3],c=f9.f(RDe(e),t),s,_,w;if(!c){if(h9(_=zDe(e)))return p9(_,t,n,u);c=d9(0)}if(DDe(c)){if(c.writable===!1||!h9(u))return!1;if(s=f9.f(u,t)){if(s.get||s.set||s.writable===!1)return!1;s.value=n,EA.f(u,t,s)}else EA.f(u,t,d9(0,n))}else{if(w=c.set,w===void 0)return!1;ODe(w,u,n)}return!0}var FDe=LDe(function(){var e=function(){},t=EA.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});kDe({target:"Reflect",stat:!0,forced:FDe},{set:p9})});var g9=I(()=>{"use strict";var NDe=V(),BDe=Ze(),jDe=jE(),v9=Ra();v9&&NDe({target:"Reflect",stat:!0},{setPrototypeOf:function(t,n){BDe(t),jDe(n);try{return v9(t,n),!0}catch(u){return!1}}})});var y9=I(()=>{"use strict";var UDe=V(),$De=it(),VDe=Dn();UDe({global:!0},{Reflect:{}});VDe($De.Reflect,"Reflect",!0)});var ud=I((v0t,_9)=>{"use strict";var GDe=It(),HDe=Ci(),WDe=pt(),ZDe=WDe("match");_9.exports=function(e){var t;return GDe(e)&&((t=e[ZDe])!==void 0?!!t:HDe(e)==="RegExp")}});var Gx=I((g0t,x9)=>{"use strict";var KDe=Ze();x9.exports=function(){var e=KDe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var ld=I((y0t,w9)=>{"use strict";var XDe=He(),YDe=Mt(),JDe=Xi(),QDe=Gx(),b9=RegExp.prototype;w9.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in b9)&&!YDe(e,"flags")&&JDe(b9,e)?XDe(QDe,e):t}});var Zv=I((_0t,S9)=>{"use strict";var TA=Oe(),eLe=it(),AA=eLe.RegExp,PA=TA(function(){var e=AA("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),tLe=PA||TA(function(){return!AA("a","y").sticky}),rLe=PA||TA(function(){var e=AA("^r","gy");return e.lastIndex=2,e.exec("str")!==null});S9.exports={BROKEN_CARET:rLe,MISSED_STICKY:tLe,UNSUPPORTED_Y:PA}});var Hx=I((x0t,q9)=>{"use strict";var iLe=Oe(),nLe=it(),aLe=nLe.RegExp;q9.exports=iLe(function(){var e=aLe(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var CA=I((b0t,I9)=>{"use strict";var oLe=Oe(),sLe=it(),uLe=sLe.RegExp;I9.exports=oLe(function(){var e=uLe("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var R9=I(()=>{"use strict";var lLe=ft(),RA=it(),Kv=Pe(),cLe=Nf(),hLe=Cc(),fLe=Kr(),dLe=As().f,E9=Xi(),pLe=ud(),T9=St(),mLe=ld(),C9=Zv(),vLe=UE(),gLe=tr(),yLe=Oe(),_Le=Mt(),xLe=Yt().enforce,bLe=cl(),wLe=pt(),M9=Hx(),k9=CA(),SLe=wLe("match"),xl=RA.RegExp,cd=xl.prototype,qLe=RA.SyntaxError,ILe=Kv(cd.exec),Wx=Kv("".charAt),A9=Kv("".replace),P9=Kv("".indexOf),ELe=Kv("".slice),TLe=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Gc=/a/g,MA=/a/g,ALe=new xl(Gc)!==Gc,O9=C9.MISSED_STICKY,PLe=C9.UNSUPPORTED_Y,CLe=lLe&&(!ALe||O9||M9||k9||yLe(function(){return MA[SLe]=!1,xl(Gc)!==Gc||xl(MA)===MA||String(xl(Gc,"i"))!=="/a/i"})),MLe=function(e){for(var t=e.length,n=0,u="",c=!1,s;n<=t;n++){if(s=Wx(e,n),s==="\\"){u+=s+Wx(e,++n);continue}!c&&s==="."?u+="[\\s\\S]":(s==="["?c=!0:s==="]"&&(c=!1),u+=s)}return u},kLe=function(e){for(var t=e.length,n=0,u="",c=[],s={},_=!1,w=!1,E=0,P="",C;n<=t;n++){if(C=Wx(e,n),C==="\\")C+=Wx(e,++n);else if(C==="]")_=!1;else if(!_)switch(!0){case C==="[":_=!0;break;case C==="(":ILe(TLe,ELe(e,n+1))&&(n+=2,w=!0),u+=C,E++;continue;case C===">"&&w:if(P===""||_Le(s,P))throw new qLe("Invalid capture group name");s[P]=!0,c[c.length]=[P,E],w=!1,P="";continue;}w?P+=C:u+=C}return[u,c]};if(cLe("RegExp",CLe)){for(_l=function(t,n){var u=E9(cd,this),c=pLe(t),s=n===void 0,_=[],w=t,E,P,C,B,$,re;if(!u&&c&&s&&t.constructor===_l)return t;if((c||E9(cd,t))&&(t=t.source,s&&(n=mLe(w))),t=t===void 0?"":T9(t),n=n===void 0?"":T9(n),w=t,M9&&("dotAll"in Gc)&&(P=!!n&&P9(n,"s")>-1,P&&(n=A9(n,/s/g,""))),E=n,O9&&("sticky"in Gc)&&(C=!!n&&P9(n,"y")>-1,C&&PLe&&(n=A9(n,/y/g,""))),k9&&(B=kLe(t),t=B[0],_=B[1]),$=hLe(xl(t,n),u?this:cd,_l),(P||C||_.length)&&(re=xLe($),P&&(re.dotAll=!0,re.raw=_l(MLe(t),E)),C&&(re.sticky=!0),_.length&&(re.groups=_)),t!==w)try{fLe($,"source",w===""?"(?:)":w)}catch(xe){}return $},kA=dLe(xl),OA=0;kA.length>OA;)vLe(_l,xl,kA[OA++]);cd.constructor=_l,_l.prototype=cd,gLe(RA,"RegExp",_l,{constructor:!0})}var _l,kA,OA;bLe("RegExp")});var L9=I(()=>{"use strict";var OLe=ft(),RLe=Hx(),DLe=Ci(),LLe=qr(),zLe=Yt().get,D9=RegExp.prototype,FLe=TypeError;OLe&&RLe&&LLe(D9,"dotAll",{configurable:!0,get:function(){if(this!==D9){if(DLe(this)==="RegExp")return!!zLe(this).dotAll;throw new FLe("Incompatible receiver, RegExp required")}}})});var Xv=I((E0t,F9)=>{"use strict";var hd=He(),Kx=Pe(),NLe=St(),BLe=Gx(),jLe=Zv(),ULe=Fo(),$Le=Ur(),VLe=Yt().get,GLe=Hx(),HLe=CA(),WLe=ULe("native-string-replace",String.prototype.replace),Zx=RegExp.prototype.exec,LA=Zx,ZLe=Kx("".charAt),KLe=Kx("".indexOf),XLe=Kx("".replace),DA=Kx("".slice),zA=function(){var e=/a/,t=/b*/g;return hd(Zx,e,"a"),hd(Zx,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),z9=jLe.BROKEN_CARET,FA=/()??/.exec("")[1]!==void 0,YLe=zA||FA||z9||GLe||HLe;YLe&&(LA=function(t){var n=this,u=VLe(n),c=NLe(t),s=u.raw,_,w,E,P,C,B,$;if(s)return s.lastIndex=n.lastIndex,_=hd(LA,s,c),n.lastIndex=s.lastIndex,_;var re=u.groups,xe=z9&&n.sticky,ye=hd(BLe,n),X=n.source,K=0,ie=c;if(xe&&(ye=XLe(ye,"y",""),KLe(ye,"g")===-1&&(ye+="g"),ie=DA(c,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&ZLe(c,n.lastIndex-1)!==`
`)&&(X="(?: "+X+")",ie=" "+ie,K++),w=new RegExp("^(?:"+X+")",ye)),FA&&(w=new RegExp("^"+X+"$(?!\\s)",ye)),zA&&(E=n.lastIndex),P=hd(Zx,xe?w:n,ie),xe?P?(P.input=DA(P.input,K),P[0]=DA(P[0],K),P.index=n.lastIndex,n.lastIndex+=P[0].length):n.lastIndex=0:zA&&P&&(n.lastIndex=n.global?P.index+P[0].length:E),FA&&P&&P.length>1&&hd(WLe,P[0],w,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(P[C]=void 0)}),P&&re)for(P.groups=B=$Le(null),C=0;C<re.length;C++)$=re[C],B[$[0]]=P[$[1]];return P});F9.exports=LA});var Xx=I(()=>{"use strict";var JLe=V(),N9=Xv();JLe({target:"RegExp",proto:!0,forced:/./.exec!==N9},{exec:N9})});var U9=I(()=>{"use strict";var QLe=it(),eze=ft(),tze=qr(),rze=Gx(),ize=Oe(),B9=QLe.RegExp,j9=B9.prototype,nze=eze&&ize(function(){var e=!0;try{B9(".","d")}catch(E){e=!1}var t={},n="",u=e?"dgimsy":"gimsy",c=function(E,P){Object.defineProperty(t,E,{get:function(){return n+=P,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(s.hasIndices="d");for(var _ in s)c(_,s[_]);var w=Object.getOwnPropertyDescriptor(j9,"flags").get.call(t);return w!==u||n!==u});nze&&tze(j9,"flags",{configurable:!0,get:rze})});var V9=I(()=>{"use strict";var aze=ft(),oze=Zv().MISSED_STICKY,sze=Ci(),uze=qr(),lze=Yt().get,$9=RegExp.prototype,cze=TypeError;aze&&oze&&uze($9,"sticky",{configurable:!0,get:function(){if(this!==$9){if(sze(this)==="RegExp")return!!lze(this).sticky;throw new cze("Incompatible receiver, RegExp required")}}})});var W9=I(()=>{"use strict";Xx();var hze=V(),G9=He(),fze=qt(),H9=Ze(),dze=St(),pze=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),mze=/./.test;hze({target:"RegExp",proto:!0,forced:!pze},{test:function(e){var t=H9(this),n=dze(e),u=t.exec;if(!fze(u))return G9(mze,t,n);var c=G9(u,t,n);return c===null?!1:(H9(c),!0)}})});var X9=I(()=>{"use strict";var vze=Sc().PROPER,gze=tr(),yze=Ze(),Z9=St(),_ze=Oe(),xze=ld(),NA="toString",bze=RegExp.prototype,K9=bze[NA],wze=_ze(function(){return K9.call({source:"a",flags:"b"})!=="/a/b"}),Sze=vze&&K9.name!==NA;(wze||Sze)&&gze(RegExp.prototype,NA,function(){var t=yze(this),n=Z9(t.source),u=Z9(xze(t));return"/"+n+"/"+u},{unsafe:!0})});var Y9=I(()=>{"use strict";var qze=kv(),Ize=p2();qze("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},Ize)});var J9=I(()=>{"use strict";Y9()});var Q9=I(()=>{"use strict";var Eze=V(),Tze=Pe(),Aze=vr(),Pze=gr(),Cze=St(),Mze=Oe(),kze=Tze("".charAt),Oze=Mze(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});Eze({target:"String",proto:!0,forced:Oze},{at:function(t){var n=Cze(Aze(this)),u=n.length,c=Pze(t),s=c>=0?c:u+c;return s<0||s>=u?void 0:kze(n,s)}})});var Hc=I(($0t,rW)=>{"use strict";var BA=Pe(),Rze=gr(),Dze=St(),Lze=vr(),zze=BA("".charAt),eW=BA("".charCodeAt),Fze=BA("".slice),tW=function(e){return function(t,n){var u=Dze(Lze(t)),c=Rze(n),s=u.length,_,w;return c<0||c>=s?e?"":void 0:(_=eW(u,c),_<55296||_>56319||c+1===s||(w=eW(u,c+1))<56320||w>57343?e?zze(u,c):_:e?Fze(u,c,c+2):(_-55296<<10)+(w-56320)+65536)}};rW.exports={codeAt:tW(!1),charAt:tW(!0)}});var iW=I(()=>{"use strict";var Nze=V(),Bze=Hc().codeAt;Nze({target:"String",proto:!0},{codePointAt:function(t){return Bze(this,t)}})});var Yx=I((H0t,nW)=>{"use strict";var jze=ud(),Uze=TypeError;nW.exports=function(e){if(jze(e))throw new Uze("The method doesn't accept regular expressions");return e}});var Jx=I((W0t,aW)=>{"use strict";var $ze=pt(),Vze=$ze("match");aW.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[Vze]=!1,"/./"[e](t)}catch(u){}}return!1}});var cW=I(()=>{"use strict";var Gze=V(),uW=Ps(),Hze=ui().f,Wze=On(),oW=St(),Zze=Yx(),Kze=vr(),Xze=Jx(),Yze=Dt(),sW=uW("".endsWith),Jze=uW("".slice),Qze=Math.min,lW=Xze("endsWith"),eFe=!Yze&&!lW&&!!function(){var e=Hze(String.prototype,"endsWith");return e&&!e.writable}();Gze({target:"String",proto:!0,forced:!eFe&&!lW},{endsWith:function(t){var n=oW(Kze(this));Zze(t);var u=arguments.length>1?arguments[1]:void 0,c=n.length,s=u===void 0?c:Qze(Wze(u),c),_=oW(t);return sW?sW(n,_,s):Jze(n,s-_.length,s)===_}})});var dW=I(()=>{"use strict";var tFe=V(),rFe=Pe(),iFe=Ma(),nFe=RangeError,hW=String.fromCharCode,fW=String.fromCodePoint,aFe=rFe([].join),oFe=!!fW&&fW.length!==1;tFe({target:"String",stat:!0,arity:1,forced:oFe},{fromCodePoint:function(t){for(var n=[],u=arguments.length,c=0,s;u>c;){if(s=+arguments[c++],iFe(s,1114111)!==s)throw new nFe(s+" is not a valid code point");n[c]=s<65536?hW(s):hW(((s-=65536)>>10)+55296,s%1024+56320)}return aFe(n,"")}})});var mW=I(()=>{"use strict";var sFe=V(),uFe=Pe(),lFe=Yx(),cFe=vr(),pW=St(),hFe=Jx(),fFe=uFe("".indexOf);sFe({target:"String",proto:!0,forced:!hFe("includes")},{includes:function(t){return!!~fFe(pW(cFe(this)),pW(lFe(t)),arguments.length>1?arguments[1]:void 0)}})});var jA=I(()=>{"use strict";var dFe=V(),pFe=Pe(),mFe=vr(),vFe=St(),vW=pFe("".charCodeAt);dFe({target:"String",proto:!0},{isWellFormed:function(){for(var t=vFe(mFe(this)),n=t.length,u=0;u<n;u++){var c=vW(t,u);if((c&63488)===55296&&(c>=56320||++u>=n||(vW(t,u)&64512)!==56320))return!1}return!0}})});var UA=I(()=>{"use strict";var gFe=Hc().charAt,yFe=St(),yW=Yt(),_Fe=ix(),gW=Mi(),_W="String Iterator",xFe=yW.set,bFe=yW.getterFor(_W);_Fe(String,"String",function(e){xFe(this,{type:_W,string:yFe(e),index:0})},function(){var t=bFe(this),n=t.string,u=t.index,c;return u>=n.length?gW(void 0,!0):(c=gFe(n,u),t.index+=c.length,gW(c,!1))})});var Yv=I((nxt,qW)=>{"use strict";Xx();var xW=Ps(),bW=tr(),wFe=Xv(),wW=Oe(),SW=pt(),SFe=Kr(),qFe=SW("species"),$A=RegExp.prototype;qW.exports=function(e,t,n,u){var c=SW(e),s=!wW(function(){var P={};return P[c]=function(){return 7},""[e](P)!==7}),_=s&&!wW(function(){var P=!1,C=/a/;return e==="split"&&(C={},C.constructor={},C.constructor[qFe]=function(){return C},C.flags="",C[c]=/./[c]),C.exec=function(){return P=!0,null},C[c](""),!P});if(!s||!_||n){var w=xW(/./[c]),E=t(c,""[e],function(P,C,B,$,re){var xe=xW(P),ye=C.exec;return ye===wFe||ye===$A.exec?s&&!re?{done:!0,value:w(C,B,$)}:{done:!0,value:xe(B,C,$)}:{done:!1}});bW(String.prototype,e,E[0]),bW($A,c,E[1])}u&&SFe($A[c],"sham",!0)}});var Jv=I((axt,IW)=>{"use strict";var IFe=Hc().charAt;IW.exports=function(e,t,n){return t+(n?IFe(e,t).length:1)}});var fd=I((oxt,TW)=>{"use strict";var EW=He(),EFe=Ze(),TFe=qt(),AFe=Ci(),PFe=Xv(),CFe=TypeError;TW.exports=function(e,t){var n=e.exec;if(TFe(n)){var u=EW(n,e,t);return u!==null&&EFe(u),u}if(AFe(e)==="RegExp")return EW(PFe,e,t);throw new CFe("RegExp#exec called on incompatible receiver")}});var PW=I(()=>{"use strict";var MFe=He(),kFe=Yv(),OFe=Ze(),RFe=Zr(),DFe=On(),VA=St(),LFe=vr(),zFe=jr(),FFe=Jv(),AW=fd();kFe("match",function(e,t,n){return[function(c){var s=LFe(this),_=RFe(c)?void 0:zFe(c,e);return _?MFe(_,c,s):new RegExp(c)[e](VA(s))},function(u){var c=OFe(this),s=VA(u),_=n(t,c,s);if(_.done)return _.value;if(!c.global)return AW(c,s);var w=c.unicode;c.lastIndex=0;for(var E=[],P=0,C;(C=AW(c,s))!==null;){var B=VA(C[0]);E[P]=B,B===""&&(c.lastIndex=FFe(s,DFe(c.lastIndex),w)),P++}return P===0?null:E}]})});var KA=I(()=>{"use strict";var NFe=V(),CW=He(),OW=Ps(),BFe=ul(),Qx=Mi(),MW=vr(),RW=On(),Qv=St(),jFe=Ze(),UFe=Zr(),$Fe=Ci(),VFe=ud(),DW=ld(),GFe=jr(),HFe=tr(),WFe=Oe(),ZFe=pt(),KFe=zc(),XFe=Jv(),YFe=fd(),LW=Yt(),HA=Dt(),e1=ZFe("matchAll"),zW="RegExp String",FW=zW+" Iterator",JFe=LW.set,QFe=LW.getterFor(FW),kW=RegExp.prototype,eNe=TypeError,WA=OW("".indexOf),t1=OW("".matchAll),GA=!!t1&&!WFe(function(){t1("a",/./)}),tNe=BFe(function(t,n,u,c){JFe(this,{type:FW,regexp:t,string:n,global:u,unicode:c,done:!1})},zW,function(){var t=QFe(this);if(t.done)return Qx(void 0,!0);var n=t.regexp,u=t.string,c=YFe(n,u);return c===null?(t.done=!0,Qx(void 0,!0)):t.global?(Qv(c[0])===""&&(n.lastIndex=XFe(u,RW(n.lastIndex),t.unicode)),Qx(c,!1)):(t.done=!0,Qx(c,!1))}),ZA=function(e){var t=jFe(this),n=Qv(e),u=KFe(t,RegExp),c=Qv(DW(t)),s,_,w;return s=new u(u===RegExp?t.source:t,c),_=!!~WA(c,"g"),w=!!~WA(c,"u"),s.lastIndex=RW(t.lastIndex),new tNe(s,n,_,w)};NFe({target:"String",proto:!0,forced:GA},{matchAll:function(t){var n=MW(this),u,c,s,_;if(UFe(t)){if(GA)return t1(n,t)}else{if(VFe(t)&&(u=Qv(MW(DW(t))),!~WA(u,"g")))throw new eNe("`.matchAll` does not allow non-global regexes");if(GA)return t1(n,t);if(s=GFe(t,e1),s===void 0&&HA&&$Fe(t)==="RegExp"&&(s=ZA),s)return CW(s,t,n)}return c=Qv(n),_=new RegExp(t,"g"),HA?CW(ZA,_,c):_[e1](c)}});HA||e1 in kW||HFe(kW,e1,ZA)});var XA=I((hxt,NW)=>{"use strict";var rNe=Lo();NW.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(rNe)});var BW=I(()=>{"use strict";var iNe=V(),nNe=Sx().end,aNe=XA();iNe({target:"String",proto:!0,forced:aNe},{padEnd:function(t){return nNe(this,t,arguments.length>1?arguments[1]:void 0)}})});var jW=I(()=>{"use strict";var oNe=V(),sNe=Sx().start,uNe=XA();oNe({target:"String",proto:!0,forced:uNe},{padStart:function(t){return sNe(this,t,arguments.length>1?arguments[1]:void 0)}})});var GW=I(()=>{"use strict";var lNe=V(),VW=Pe(),cNe=ri(),hNe=Lt(),UW=St(),fNe=Nt(),$W=VW([].push),dNe=VW([].join);lNe({target:"String",stat:!0},{raw:function(t){var n=cNe(hNe(t).raw),u=fNe(n);if(!u)return"";for(var c=arguments.length,s=[],_=0;;){if($W(s,UW(n[_++])),_===u)return dNe(s,"");_<c&&$W(s,UW(arguments[_]))}}})});var HW=I(()=>{"use strict";var pNe=V(),mNe=Cv();pNe({target:"String",proto:!0},{repeat:mNe})});var eP=I((xxt,WW)=>{"use strict";var QA=Pe(),vNe=Lt(),gNe=Math.floor,YA=QA("".charAt),yNe=QA("".replace),JA=QA("".slice),_Ne=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,xNe=/\$([$&'`]|\d{1,2})/g;WW.exports=function(e,t,n,u,c,s){var _=n+e.length,w=u.length,E=xNe;return c!==void 0&&(c=vNe(c),E=_Ne),yNe(s,E,function(P,C){var B;switch(YA(C,0)){case"$":return"$";case"&":return e;case"`":return JA(t,0,n);case"'":return JA(t,_);case"<":B=c[JA(C,1,-1)];break;default:var $=+C;if($===0)return P;if($>w){var re=gNe($/10);return re===0?P:re<=w?u[re-1]===void 0?YA(C,1):u[re-1]+YA(C,1):P}B=u[$-1];}return B===void 0?"":B})}});var JW=I(()=>{"use strict";var bNe=Yi(),ZW=He(),r1=Pe(),wNe=Yv(),SNe=Oe(),qNe=Ze(),INe=qt(),ENe=Zr(),TNe=gr(),ANe=On(),dd=St(),PNe=vr(),CNe=Jv(),MNe=jr(),kNe=eP(),ONe=fd(),RNe=pt(),rP=RNe("replace"),DNe=Math.max,LNe=Math.min,zNe=r1([].concat),tP=r1([].push),KW=r1("".indexOf),XW=r1("".slice),FNe=function(e){return e===void 0?e:String(e)},NNe=function(){return"a".replace(/./,"$0")==="$0"}(),YW=function(){return /./[rP]?/./[rP]("a","$0")==="":!1}(),BNe=!SNe(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});wNe("replace",function(e,t,n){var u=YW?"$":"$0";return[function(s,_){var w=PNe(this),E=ENe(s)?void 0:MNe(s,rP);return E?ZW(E,s,w,_):ZW(t,dd(w),s,_)},function(c,s){var _=qNe(this),w=dd(c);if(typeof s=="string"&&KW(s,u)===-1&&KW(s,"$<")===-1){var E=n(t,_,w,s);if(E.done)return E.value}var P=INe(s);P||(s=dd(s));var C=_.global,B;C&&(B=_.unicode,_.lastIndex=0);for(var $=[],re;re=ONe(_,w),!(re===null||(tP($,re),!C));){var xe=dd(re[0]);xe===""&&(_.lastIndex=CNe(w,ANe(_.lastIndex),B))}for(var ye="",X=0,K=0;K<$.length;K++){re=$[K];for(var ie=dd(re[0]),_e=DNe(LNe(TNe(re.index),w.length),0),be=[],Qe,Le=1;Le<re.length;Le++)tP(be,FNe(re[Le]));var nt=re.groups;if(P){var gt=zNe([ie],be,_e,w);nt!==void 0&&tP(gt,nt),Qe=dd(bNe(s,void 0,gt))}else Qe=kNe(ie,w,_e,be,nt,s);_e>=X&&(ye+=XW(w,X,_e)+Qe,X=_e+ie.length)}return ye+XW(w,X)}]},!BNe||!NNe||YW)});var nP=I(()=>{"use strict";var jNe=V(),UNe=He(),iP=Pe(),QW=vr(),$Ne=qt(),VNe=Zr(),GNe=ud(),pd=St(),HNe=jr(),WNe=ld(),ZNe=eP(),KNe=pt(),XNe=Dt(),YNe=KNe("replace"),JNe=TypeError,r7=iP("".indexOf),QNe=iP("".replace),e7=iP("".slice),eBe=Math.max,t7=function(e,t,n){return n>e.length?-1:t===""?n:r7(e,t,n)};jNe({target:"String",proto:!0},{replaceAll:function(t,n){var u=QW(this),c,s,_,w,E,P,C,B,$,re=0,xe=0,ye="";if(!VNe(t)){if(c=GNe(t),c&&(s=pd(QW(WNe(t))),!~r7(s,"g")))throw new JNe("`.replaceAll` does not allow non-global regexes");if(_=HNe(t,YNe),_)return UNe(_,t,u,n);if(XNe&&c)return QNe(pd(u),t,n)}for(w=pd(u),E=pd(t),P=$Ne(n),P||(n=pd(n)),C=E.length,B=eBe(1,C),re=t7(w,E,0);re!==-1;)$=P?pd(n(E,re,w)):ZNe(E,w,re,[],void 0,n),ye+=e7(w,xe,re)+$,xe=re+C,re=t7(w,E,re+B);return xe<w.length&&(ye+=e7(w,xe)),ye}})});var a7=I(()=>{"use strict";var tBe=He(),rBe=Yv(),iBe=Ze(),nBe=Zr(),aBe=vr(),i7=z2(),n7=St(),oBe=jr(),sBe=fd();rBe("search",function(e,t,n){return[function(c){var s=aBe(this),_=nBe(c)?void 0:oBe(c,e);return _?tBe(_,c,s):new RegExp(c)[e](n7(s))},function(u){var c=iBe(this),s=n7(u),_=n(t,c,s);if(_.done)return _.value;var w=c.lastIndex;i7(w,0)||(c.lastIndex=0);var E=sBe(c,s);return i7(c.lastIndex,w)||(c.lastIndex=w),E===null?-1:E.index}]})});var h7=I(()=>{"use strict";var uBe=Yi(),eg=He(),oP=Pe(),lBe=Yv(),cBe=Ze(),hBe=Zr(),fBe=ud(),o7=vr(),dBe=zc(),pBe=Jv(),mBe=On(),aP=St(),vBe=jr(),s7=Ec(),u7=fd(),gBe=Xv(),yBe=Zv(),_Be=Oe(),md=yBe.UNSUPPORTED_Y,l7=4294967295,xBe=Math.min,c7=[].push,bBe=oP(/./.exec),vd=oP(c7),tg=oP("".slice),wBe=!_Be(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length!==2||n[0]!=="a"||n[1]!=="b"});lBe("split",function(e,t,n){var u;return"abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length?u=function(c,s){var _=aP(o7(this)),w=s===void 0?l7:s>>>0;if(w===0)return[];if(c===void 0)return[_];if(!fBe(c))return eg(t,_,c,w);for(var E=[],P=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(c.sticky?"y":""),C=0,B=new RegExp(c.source,P+"g"),$,re,xe;($=eg(gBe,B,_))&&(re=B.lastIndex,!(re>C&&(vd(E,tg(_,C,$.index)),$.length>1&&$.index<_.length&&uBe(c7,E,s7($,1)),xe=$[0].length,C=re,E.length>=w)));)B.lastIndex===$.index&&B.lastIndex++;return C===_.length?(xe||!bBe(B,""))&&vd(E,""):vd(E,tg(_,C)),E.length>w?s7(E,0,w):E}:"0".split(void 0,0).length?u=function(c,s){return c===void 0&&s===0?[]:eg(t,this,c,s)}:u=t,[function(s,_){var w=o7(this),E=hBe(s)?void 0:vBe(s,e);return E?eg(E,s,w,_):eg(u,aP(w),s,_)},function(c,s){var _=cBe(this),w=aP(c),E=n(u,_,w,s,u!==t);if(E.done)return E.value;var P=dBe(_,RegExp),C=_.unicode,B=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(md?"g":"y"),$=new P(md?"^(?:"+_.source+")":_,B),re=s===void 0?l7:s>>>0;if(re===0)return[];if(w.length===0)return u7($,w)===null?[w]:[];for(var xe=0,ye=0,X=[];ye<w.length;){$.lastIndex=md?0:ye;var K=u7($,md?tg(w,ye):w),ie;if(K===null||(ie=xBe(mBe($.lastIndex+(md?ye:0)),w.length))===xe)ye=pBe(w,ye,C);else{if(vd(X,tg(w,xe,ye)),X.length===re)return X;for(var _e=1;_e<=K.length-1;_e++)if(vd(X,K[_e]),X.length===re)return X;ye=xe=ie}}return vd(X,tg(w,xe)),X}]},!wBe,md)});var v7=I(()=>{"use strict";var SBe=V(),p7=Ps(),qBe=ui().f,IBe=On(),f7=St(),EBe=Yx(),TBe=vr(),ABe=Jx(),PBe=Dt(),d7=p7("".startsWith),CBe=p7("".slice),MBe=Math.min,m7=ABe("startsWith"),kBe=!PBe&&!m7&&!!function(){var e=qBe(String.prototype,"startsWith");return e&&!e.writable}();SBe({target:"String",proto:!0,forced:!kBe&&!m7},{startsWith:function(t){var n=f7(TBe(this));EBe(t);var u=IBe(MBe(arguments.length>1?arguments[1]:void 0,n.length)),c=f7(t);return d7?d7(n,c,u):CBe(n,u,u+c.length)===c}})});var y7=I(()=>{"use strict";var OBe=V(),RBe=Pe(),DBe=vr(),g7=gr(),LBe=St(),zBe=RBe("".slice),FBe=Math.max,NBe=Math.min,BBe=!"".substr||"ab".substr(-1)!=="b";OBe({target:"String",proto:!0,forced:BBe},{substr:function(t,n){var u=LBe(DBe(this)),c=u.length,s=g7(t),_,w;return s===1/0&&(s=0),s<0&&(s=FBe(c+s,0)),_=n===void 0?c:g7(n),_<=0||_===1/0?"":(w=NBe(s+_,c),s>=w?"":zBe(u,s,w))}})});var cP=I(()=>{"use strict";var jBe=V(),b7=He(),lP=Pe(),UBe=vr(),$Be=St(),VBe=Oe(),GBe=Array,sP=lP("".charAt),_7=lP("".charCodeAt),HBe=lP([].join),uP="".toWellFormed,WBe="\uFFFD",x7=uP&&VBe(function(){return b7(uP,1)!=="1"});jBe({target:"String",proto:!0,forced:x7},{toWellFormed:function(){var t=$Be(UBe(this));if(x7)return b7(uP,t);for(var n=t.length,u=GBe(n),c=0;c<n;c++){var s=_7(t,c);(s&63488)!==55296?u[c]=sP(t,c):s>=56320||c+1>=n||(_7(t,c+1)&64512)!==56320?u[c]=WBe:(u[c]=sP(t,c),u[++c]=sP(t,c))}return HBe(u,"")}})});var i1=I((Dxt,q7)=>{"use strict";var ZBe=Sc().PROPER,KBe=Oe(),w7=Nc(),S7="\u200B\x85\u180E";q7.exports=function(e){return KBe(function(){return!!w7[e]()||S7[e]()!==S7||ZBe&&w7[e].name!==e})}});var I7=I(()=>{"use strict";var XBe=V(),YBe=Bc().trim,JBe=i1();XBe({target:"String",proto:!0,forced:JBe("trim")},{trim:function(){return YBe(this)}})});var hP=I((Fxt,E7)=>{"use strict";var QBe=Bc().end,e3e=i1();E7.exports=e3e("trimEnd")?function(){return QBe(this)}:"".trimEnd});var A7=I(()=>{"use strict";var t3e=V(),T7=hP();t3e({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==T7},{trimRight:T7})});var C7=I(()=>{"use strict";A7();var r3e=V(),P7=hP();r3e({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==P7},{trimEnd:P7})});var fP=I(($xt,M7)=>{"use strict";var i3e=Bc().start,n3e=i1();M7.exports=n3e("trimStart")?function(){return i3e(this)}:"".trimStart});var O7=I(()=>{"use strict";var a3e=V(),k7=fP();a3e({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==k7},{trimLeft:k7})});var D7=I(()=>{"use strict";O7();var o3e=V(),R7=fP();o3e({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==R7},{trimStart:R7})});var Fn=I((Zxt,z7)=>{"use strict";var s3e=Pe(),u3e=vr(),L7=St(),l3e=/"/g,c3e=s3e("".replace);z7.exports=function(e,t,n,u){var c=L7(u3e(e)),s="<"+t;return n!==""&&(s+=" "+n+"=\""+c3e(L7(u),l3e,"&quot;")+"\""),s+">"+c+"</"+t+">"}});var Nn=I((Kxt,F7)=>{"use strict";var h3e=Oe();F7.exports=function(e){return h3e(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var N7=I(()=>{"use strict";var f3e=V(),d3e=Fn(),p3e=Nn();f3e({target:"String",proto:!0,forced:p3e("anchor")},{anchor:function(t){return d3e(this,"a","name",t)}})});var B7=I(()=>{"use strict";var m3e=V(),v3e=Fn(),g3e=Nn();m3e({target:"String",proto:!0,forced:g3e("big")},{big:function(){return v3e(this,"big","","")}})});var j7=I(()=>{"use strict";var y3e=V(),_3e=Fn(),x3e=Nn();y3e({target:"String",proto:!0,forced:x3e("blink")},{blink:function(){return _3e(this,"blink","","")}})});var U7=I(()=>{"use strict";var b3e=V(),w3e=Fn(),S3e=Nn();b3e({target:"String",proto:!0,forced:S3e("bold")},{bold:function(){return w3e(this,"b","","")}})});var $7=I(()=>{"use strict";var q3e=V(),I3e=Fn(),E3e=Nn();q3e({target:"String",proto:!0,forced:E3e("fixed")},{fixed:function(){return I3e(this,"tt","","")}})});var V7=I(()=>{"use strict";var T3e=V(),A3e=Fn(),P3e=Nn();T3e({target:"String",proto:!0,forced:P3e("fontcolor")},{fontcolor:function(t){return A3e(this,"font","color",t)}})});var G7=I(()=>{"use strict";var C3e=V(),M3e=Fn(),k3e=Nn();C3e({target:"String",proto:!0,forced:k3e("fontsize")},{fontsize:function(t){return M3e(this,"font","size",t)}})});var H7=I(()=>{"use strict";var O3e=V(),R3e=Fn(),D3e=Nn();O3e({target:"String",proto:!0,forced:D3e("italics")},{italics:function(){return R3e(this,"i","","")}})});var W7=I(()=>{"use strict";var L3e=V(),z3e=Fn(),F3e=Nn();L3e({target:"String",proto:!0,forced:F3e("link")},{link:function(t){return z3e(this,"a","href",t)}})});var Z7=I(()=>{"use strict";var N3e=V(),B3e=Fn(),j3e=Nn();N3e({target:"String",proto:!0,forced:j3e("small")},{small:function(){return B3e(this,"small","","")}})});var K7=I(()=>{"use strict";var U3e=V(),$3e=Fn(),V3e=Nn();U3e({target:"String",proto:!0,forced:V3e("strike")},{strike:function(){return $3e(this,"strike","","")}})});var X7=I(()=>{"use strict";var G3e=V(),H3e=Fn(),W3e=Nn();G3e({target:"String",proto:!0,forced:W3e("sub")},{sub:function(){return H3e(this,"sub","","")}})});var Y7=I(()=>{"use strict";var Z3e=V(),K3e=Fn(),X3e=Nn();Z3e({target:"String",proto:!0,forced:X3e("sup")},{sup:function(){return K3e(this,"sup","","")}})});var n1=I((w1t,Q7)=>{"use strict";var J7=it(),dP=Oe(),Y3e=wv(),J3e=kt().NATIVE_ARRAY_BUFFER_VIEWS,Q3e=J7.ArrayBuffer,Wc=J7.Int8Array;Q7.exports=!J3e||!dP(function(){Wc(1)})||!dP(function(){new Wc(-1)})||!Y3e(function(e){new Wc,new Wc(null),new Wc(1.5),new Wc(e)},!0)||dP(function(){return new Wc(new Q3e(2),1,void 0).length!==1})});var gd=I((S1t,eZ)=>{"use strict";var e4e=gr(),t4e=RangeError;eZ.exports=function(e){var t=e4e(e);if(t<0)throw new t4e("The argument can't be less than 0");return t}});var pP=I((q1t,tZ)=>{"use strict";var r4e=gd(),i4e=RangeError;tZ.exports=function(e,t){var n=r4e(e);if(n%t)throw new i4e("Wrong offset");return n}});var mP=I((I1t,rZ)=>{"use strict";var n4e=Math.round;rZ.exports=function(e){var t=n4e(e);return t<0?0:t>255?255:t&255}});var a1=I((E1t,iZ)=>{"use strict";var a4e=Rn();iZ.exports=function(e){var t=a4e(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var rg=I((T1t,nZ)=>{"use strict";var o4e=nv(),s4e=TypeError;nZ.exports=function(e){var t=o4e(e,"number");if(typeof t=="number")throw new s4e("Can't convert number to bigint");return BigInt(t)}});var vP=I((A1t,aZ)=>{"use strict";var u4e=or(),l4e=He(),c4e=Yf(),h4e=Lt(),f4e=Nt(),d4e=ol(),p4e=Os(),m4e=K0(),v4e=a1(),g4e=kt().aTypedArrayConstructor,y4e=rg();aZ.exports=function(t){var n=c4e(this),u=h4e(t),c=arguments.length,s=c>1?arguments[1]:void 0,_=s!==void 0,w=p4e(u),E,P,C,B,$,re,xe,ye;if(w&&!m4e(w))for(xe=d4e(u,w),ye=xe.next,u=[];!(re=l4e(ye,xe)).done;)u.push(re.value);for(_&&c>2&&(s=u4e(s,arguments[2])),P=f4e(u),C=new(g4e(n))(P),B=v4e(C),E=0;P>E;E++)$=_?s(u[E],E):u[E],C[E]=B?y4e($):+$;return C}});var Go=I((P1t,SP)=>{"use strict";var oZ=V(),gZ=it(),sZ=He(),_4e=ft(),x4e=n1(),yd=kt(),yZ=Pv(),uZ=Ji(),b4e=kn(),ig=Kr(),w4e=Mx(),S4e=On(),lZ=Gf(),gP=pP(),q4e=mP(),_Z=so(),ng=Mt(),I4e=Rn(),xP=It(),E4e=Ts(),T4e=Ur(),A4e=Xi(),o1=Ra(),P4e=As().f,cZ=vP(),C4e=$r().forEach,M4e=cl(),k4e=qr(),xZ=dr(),bZ=ui(),qP=Yt(),O4e=Cc(),bP=qP.get,R4e=qP.set,D4e=qP.enforce,wZ=xZ.f,L4e=bZ.f,yP=gZ.RangeError,SZ=yZ.ArrayBuffer,z4e=SZ.prototype,F4e=yZ.DataView,s1=yd.NATIVE_ARRAY_BUFFER_VIEWS,hZ=yd.TYPED_ARRAY_TAG,fZ=yd.TypedArray,ag=yd.TypedArrayPrototype,N4e=yd.aTypedArrayConstructor,wP=yd.isTypedArray,u1="BYTES_PER_ELEMENT",_P="Wrong length",dZ=function(e,t){N4e(e);for(var n=0,u=t.length,c=new e(u);u>n;)c[n]=t[n++];return c},l1=function(e,t){k4e(e,t,{configurable:!0,get:function(){return bP(this)[t]}})},pZ=function(e){var t;return A4e(z4e,e)||(t=I4e(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},qZ=function(e,t){return wP(e)&&!E4e(t)&&t in e&&w4e(+t)&&t>=0},mZ=function(t,n){return n=_Z(n),qZ(t,n)?b4e(2,t[n]):L4e(t,n)},vZ=function(t,n,u){return n=_Z(n),qZ(t,n)&&xP(u)&&ng(u,"value")&&!ng(u,"get")&&!ng(u,"set")&&!u.configurable&&(!ng(u,"writable")||u.writable)&&(!ng(u,"enumerable")||u.enumerable)?(t[n]=u.value,t):wZ(t,n,u)};_4e?(s1||(bZ.f=mZ,xZ.f=vZ,l1(ag,"buffer"),l1(ag,"byteOffset"),l1(ag,"byteLength"),l1(ag,"length")),oZ({target:"Object",stat:!0,forced:!s1},{getOwnPropertyDescriptor:mZ,defineProperty:vZ}),SP.exports=function(e,t,n){var u=e.match(/\d+/)[0]/8,c=e+(n?"Clamped":"")+"Array",s="get"+e,_="set"+e,w=gZ[c],E=w,P=E&&E.prototype,C={},B=function(ye,X){var K=bP(ye);return K.view[s](X*u+K.byteOffset,!0)},$=function(ye,X,K){var ie=bP(ye);ie.view[_](X*u+ie.byteOffset,n?q4e(K):K,!0)},re=function(ye,X){wZ(ye,X,{get:function(){return B(this,X)},set:function(K){return $(this,X,K)},enumerable:!0})};s1?x4e&&(E=t(function(ye,X,K,ie){return uZ(ye,P),O4e(function(){return xP(X)?pZ(X)?ie!==void 0?new w(X,gP(K,u),ie):K!==void 0?new w(X,gP(K,u)):new w(X):wP(X)?dZ(E,X):sZ(cZ,E,X):new w(lZ(X))}(),ye,E)}),o1&&o1(E,fZ),C4e(P4e(w),function(ye){ye in E||ig(E,ye,w[ye])}),E.prototype=P):(E=t(function(ye,X,K,ie){uZ(ye,P);var _e=0,be=0,Qe,Le,nt;if(!xP(X))nt=lZ(X),Le=nt*u,Qe=new SZ(Le);else if(pZ(X)){Qe=X,be=gP(K,u);var gt=X.byteLength;if(ie===void 0){if(gt%u)throw new yP(_P);if(Le=gt-be,Le<0)throw new yP(_P)}else if(Le=S4e(ie)*u,Le+be>gt)throw new yP(_P);nt=Le/u}else return wP(X)?dZ(E,X):sZ(cZ,E,X);for(R4e(ye,{buffer:Qe,byteOffset:be,byteLength:Le,length:nt,view:new F4e(Qe)});_e<nt;)re(ye,_e++)}),o1&&o1(E,fZ),P=E.prototype=T4e(ag)),P.constructor!==E&&ig(P,"constructor",E),D4e(P).TypedArrayConstructor=E,hZ&&ig(P,hZ,c);var xe=E!==w;C[c]=E,oZ({global:!0,constructor:!0,forced:xe,sham:!s1},C),u1 in E||ig(E,u1,u),u1 in P||ig(P,u1,u),M4e(c)}):SP.exports=function(){}});var IZ=I(()=>{"use strict";var B4e=Go();B4e("Float32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var EZ=I(()=>{"use strict";var j4e=Go();j4e("Float64",function(e){return function(n,u,c){return e(this,n,u,c)}})});var TZ=I(()=>{"use strict";var U4e=Go();U4e("Int8",function(e){return function(n,u,c){return e(this,n,u,c)}})});var AZ=I(()=>{"use strict";var $4e=Go();$4e("Int16",function(e){return function(n,u,c){return e(this,n,u,c)}})});var PZ=I(()=>{"use strict";var V4e=Go();V4e("Int32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var CZ=I(()=>{"use strict";var G4e=Go();G4e("Uint8",function(e){return function(n,u,c){return e(this,n,u,c)}})});var MZ=I(()=>{"use strict";var H4e=Go();H4e("Uint8",function(e){return function(n,u,c){return e(this,n,u,c)}},!0)});var kZ=I(()=>{"use strict";var W4e=Go();W4e("Uint16",function(e){return function(n,u,c){return e(this,n,u,c)}})});var OZ=I(()=>{"use strict";var Z4e=Go();Z4e("Uint32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var IP=I(()=>{"use strict";var RZ=kt(),K4e=Nt(),X4e=gr(),Y4e=RZ.aTypedArray,J4e=RZ.exportTypedArrayMethod;J4e("at",function(t){var n=Y4e(this),u=K4e(n),c=X4e(t),s=c>=0?c:u+c;return s<0||s>=u?void 0:n[s]})});var LZ=I(()=>{"use strict";var Q4e=Pe(),DZ=kt(),e5e=aT(),t5e=Q4e(e5e),r5e=DZ.aTypedArray,i5e=DZ.exportTypedArrayMethod;i5e("copyWithin",function(t,n){return t5e(r5e(this),t,n,arguments.length>2?arguments[2]:void 0)})});var FZ=I(()=>{"use strict";var zZ=kt(),n5e=$r().every,a5e=zZ.aTypedArray,o5e=zZ.exportTypedArrayMethod;o5e("every",function(t){return n5e(a5e(this),t,arguments.length>1?arguments[1]:void 0)})});var BZ=I(()=>{"use strict";var NZ=kt(),s5e=Q0(),u5e=rg(),l5e=Rn(),c5e=He(),h5e=Pe(),f5e=Oe(),d5e=NZ.aTypedArray,p5e=NZ.exportTypedArrayMethod,m5e=h5e("".slice),v5e=f5e(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});p5e("fill",function(t){var n=arguments.length;d5e(this);var u=m5e(l5e(this),0,3)==="Big"?u5e(t):+t;return c5e(s5e,this,u,n>1?arguments[1]:void 0,n>2?arguments[2]:void 0)},v5e)});var _d=I((rbt,UZ)=>{"use strict";var jZ=kt(),g5e=zc(),y5e=jZ.aTypedArrayConstructor,_5e=jZ.getTypedArrayConstructor;UZ.exports=function(e){return y5e(g5e(e,_5e(e)))}});var c1=I((ibt,$Z)=>{"use strict";var x5e=Dc(),b5e=_d();$Z.exports=function(e,t){return x5e(b5e(e),t)}});var GZ=I(()=>{"use strict";var VZ=kt(),w5e=$r().filter,S5e=c1(),q5e=VZ.aTypedArray,I5e=VZ.exportTypedArrayMethod;I5e("filter",function(t){var n=w5e(q5e(this),t,arguments.length>1?arguments[1]:void 0);return S5e(this,n)})});var WZ=I(()=>{"use strict";var HZ=kt(),E5e=$r().find,T5e=HZ.aTypedArray,A5e=HZ.exportTypedArrayMethod;A5e("find",function(t){return E5e(T5e(this),t,arguments.length>1?arguments[1]:void 0)})});var KZ=I(()=>{"use strict";var ZZ=kt(),P5e=$r().findIndex,C5e=ZZ.aTypedArray,M5e=ZZ.exportTypedArrayMethod;M5e("findIndex",function(t){return P5e(C5e(this),t,arguments.length>1?arguments[1]:void 0)})});var EP=I(()=>{"use strict";var XZ=kt(),k5e=bv().findLast,O5e=XZ.aTypedArray,R5e=XZ.exportTypedArrayMethod;R5e("findLast",function(t){return k5e(O5e(this),t,arguments.length>1?arguments[1]:void 0)})});var TP=I(()=>{"use strict";var YZ=kt(),D5e=bv().findLastIndex,L5e=YZ.aTypedArray,z5e=YZ.exportTypedArrayMethod;z5e("findLastIndex",function(t){return D5e(L5e(this),t,arguments.length>1?arguments[1]:void 0)})});var QZ=I(()=>{"use strict";var JZ=kt(),F5e=$r().forEach,N5e=JZ.aTypedArray,B5e=JZ.exportTypedArrayMethod;B5e("forEach",function(t){F5e(N5e(this),t,arguments.length>1?arguments[1]:void 0)})});var eK=I(()=>{"use strict";var j5e=n1(),U5e=kt().exportTypedArrayStaticMethod,$5e=vP();U5e("from",$5e,j5e)});var rK=I(()=>{"use strict";var tK=kt(),V5e=zf().includes,G5e=tK.aTypedArray,H5e=tK.exportTypedArrayMethod;H5e("includes",function(t){return V5e(G5e(this),t,arguments.length>1?arguments[1]:void 0)})});var nK=I(()=>{"use strict";var iK=kt(),W5e=zf().indexOf,Z5e=iK.aTypedArray,K5e=iK.exportTypedArrayMethod;K5e("indexOf",function(t){return W5e(Z5e(this),t,arguments.length>1?arguments[1]:void 0)})});var lK=I(()=>{"use strict";var X5e=it(),Y5e=Oe(),AP=Pe(),oK=kt(),PP=Iv(),J5e=pt(),CP=J5e("iterator"),aK=X5e.Uint8Array,Q5e=AP(PP.values),eje=AP(PP.keys),tje=AP(PP.entries),MP=oK.aTypedArray,h1=oK.exportTypedArrayMethod,xd=aK&&aK.prototype,f1=!Y5e(function(){xd[CP].call([1])}),sK=!!xd&&xd.values&&xd[CP]===xd.values&&xd.values.name==="values",uK=function(){return Q5e(MP(this))};h1("entries",function(){return tje(MP(this))},f1);h1("keys",function(){return eje(MP(this))},f1);h1("values",uK,f1||!sK,{name:"values"});h1(CP,uK,f1||!sK,{name:"values"})});var hK=I(()=>{"use strict";var cK=kt(),rje=Pe(),ije=cK.aTypedArray,nje=cK.exportTypedArrayMethod,aje=rje([].join);nje("join",function(t){return aje(ije(this),t)})});var dK=I(()=>{"use strict";var fK=kt(),oje=Yi(),sje=bT(),uje=fK.aTypedArray,lje=fK.exportTypedArrayMethod;lje("lastIndexOf",function(t){var n=arguments.length;return oje(sje,uje(this),n>1?[t,arguments[1]]:[t])})});var mK=I(()=>{"use strict";var pK=kt(),cje=$r().map,hje=_d(),fje=pK.aTypedArray,dje=pK.exportTypedArrayMethod;dje("map",function(t){return cje(fje(this),t,arguments.length>1?arguments[1]:void 0,function(n,u){return new(hje(n))(u)})})});var gK=I(()=>{"use strict";var vK=kt(),pje=n1(),mje=vK.aTypedArrayConstructor,vje=vK.exportTypedArrayStaticMethod;vje("of",function(){for(var t=0,n=arguments.length,u=new(mje(this))(n);n>t;)u[t]=arguments[t++];return u},pje)});var _K=I(()=>{"use strict";var yK=kt(),gje=Ev().left,yje=yK.aTypedArray,_je=yK.exportTypedArrayMethod;_je("reduce",function(t){var n=arguments.length;return gje(yje(this),t,n,n>1?arguments[1]:void 0)})});var bK=I(()=>{"use strict";var xK=kt(),xje=Ev().right,bje=xK.aTypedArray,wje=xK.exportTypedArrayMethod;wje("reduceRight",function(t){var n=arguments.length;return xje(bje(this),t,n,n>1?arguments[1]:void 0)})});var SK=I(()=>{"use strict";var wK=kt(),Sje=wK.aTypedArray,qje=wK.exportTypedArrayMethod,Ije=Math.floor;qje("reverse",function(){for(var t=this,n=Sje(t).length,u=Ije(n/2),c=0,s;c<u;)s=t[c],t[c++]=t[--n],t[n]=s;return t})});var PK=I(()=>{"use strict";var IK=it(),EK=He(),RP=kt(),Eje=Nt(),Tje=pP(),Aje=Lt(),TK=Oe(),Pje=IK.RangeError,kP=IK.Int8Array,qK=kP&&kP.prototype,AK=qK&&qK.set,Cje=RP.aTypedArray,Mje=RP.exportTypedArrayMethod,OP=!TK(function(){var e=new Uint8ClampedArray(2);return EK(AK,e,{length:1,0:3},1),e[1]!==3}),kje=OP&&RP.NATIVE_ARRAY_BUFFER_VIEWS&&TK(function(){var e=new kP(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});Mje("set",function(t){Cje(this);var n=Tje(arguments.length>1?arguments[1]:void 0,1),u=Aje(t);if(OP)return EK(AK,this,u,n);var c=this.length,s=Eje(u),_=0;if(s+n>c)throw new Pje("Wrong length");for(;_<s;)this[n+_]=u[_++]},!OP||kje)});var MK=I(()=>{"use strict";var CK=kt(),Oje=_d(),Rje=Oe(),Dje=Ms(),Lje=CK.aTypedArray,zje=CK.exportTypedArrayMethod,Fje=Rje(function(){new Int8Array(1).slice()});zje("slice",function(t,n){for(var u=Dje(Lje(this),t,n),c=Oje(this),s=0,_=u.length,w=new c(_);_>s;)w[s]=u[s++];return w},Fje)});var OK=I(()=>{"use strict";var kK=kt(),Nje=$r().some,Bje=kK.aTypedArray,jje=kK.exportTypedArrayMethod;jje("some",function(t){return Nje(Bje(this),t,arguments.length>1?arguments[1]:void 0)})});var NK=I(()=>{"use strict";var Uje=it(),$je=Ps(),DP=Oe(),Vje=bt(),Gje=ox(),FK=kt(),RK=qT(),Hje=IT(),DK=zo(),LK=sx(),Wje=FK.aTypedArray,Zje=FK.exportTypedArrayMethod,og=Uje.Uint16Array,bd=og&&$je(og.prototype.sort),Kje=!!bd&&!(DP(function(){bd(new og(2),null)})&&DP(function(){bd(new og(2),{})})),zK=!!bd&&!DP(function(){if(DK)return DK<74;if(RK)return RK<67;if(Hje)return!0;if(LK)return LK<602;var e=new og(516),t=Array(516),n,u;for(n=0;n<516;n++)u=n%4,e[n]=515-n,t[n]=n-2*u+3;for(bd(e,function(c,s){return(c/4|0)-(s/4|0)}),n=0;n<516;n++)if(e[n]!==t[n])return!0}),Xje=function(e){return function(t,n){return e!==void 0?+e(t,n)||0:n!==n?-1:t!==t?1:t===0&&n===0?1/t>0&&1/n<0?1:-1:t>n}};Zje("sort",function(t){return t!==void 0&&Vje(t),zK?bd(this,t):Gje(Wje(this),Xje(t))},!zK||Kje)});var UK=I(()=>{"use strict";var jK=kt(),Yje=On(),BK=Ma(),Jje=_d(),Qje=jK.aTypedArray,e6e=jK.exportTypedArrayMethod;e6e("subarray",function(t,n){var u=Qje(this),c=u.length,s=BK(t,c),_=Jje(u);return new _(u.buffer,u.byteOffset+s*u.BYTES_PER_ELEMENT,Yje((n===void 0?c:BK(n,c))-s))})});var WK=I(()=>{"use strict";var t6e=it(),r6e=Yi(),GK=kt(),LP=Oe(),$K=Ms(),d1=t6e.Int8Array,VK=GK.aTypedArray,i6e=GK.exportTypedArrayMethod,HK=[].toLocaleString,n6e=!!d1&&LP(function(){HK.call(new d1(1))}),a6e=LP(function(){return[1,2].toLocaleString()!==new d1([1,2]).toLocaleString()})||!LP(function(){d1.prototype.toLocaleString.call([1,2])});i6e("toLocaleString",function(){return r6e(HK,n6e?$K(VK(this)):VK(this),$K(arguments))},a6e)});var FP=I(()=>{"use strict";var o6e=AT(),zP=kt(),s6e=zP.aTypedArray,u6e=zP.exportTypedArrayMethod,l6e=zP.getTypedArrayConstructor;u6e("toReversed",function(){return o6e(s6e(this),l6e(this))})});var NP=I(()=>{"use strict";var p1=kt(),c6e=Pe(),h6e=bt(),f6e=Dc(),d6e=p1.aTypedArray,p6e=p1.getTypedArrayConstructor,m6e=p1.exportTypedArrayMethod,v6e=c6e(p1.TypedArrayPrototype.sort);m6e("toSorted",function(t){t!==void 0&&h6e(t);var n=d6e(this),u=f6e(p6e(n),n);return v6e(u,t)})});var KK=I(()=>{"use strict";var g6e=kt().exportTypedArrayMethod,y6e=Oe(),_6e=it(),x6e=Pe(),ZK=_6e.Uint8Array,b6e=ZK&&ZK.prototype||{},m1=[].toString,w6e=x6e([].join);y6e(function(){m1.call({})})&&(m1=function(){return w6e(this)});var S6e=b6e.toString!==m1;g6e("toString",m1,S6e)});var jP=I(()=>{"use strict";var q6e=OT(),BP=kt(),I6e=a1(),E6e=gr(),T6e=rg(),A6e=BP.aTypedArray,P6e=BP.getTypedArrayConstructor,C6e=BP.exportTypedArrayMethod,M6e=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();C6e("with",function(e,t){var n=A6e(this),u=E6e(e),c=I6e(n)?T6e(t):+t;return q6e(n,P6e(n),u,c)},!M6e)});var eX=I(()=>{"use strict";var k6e=V(),UP=Pe(),O6e=St(),XK=String.fromCharCode,YK=UP("".charAt),JK=UP(/./.exec),QK=UP("".slice),R6e=/^[\da-f]{2}$/i,D6e=/^[\da-f]{4}$/i;k6e({global:!0},{unescape:function(t){for(var n=O6e(t),u="",c=n.length,s=0,_,w;s<c;){if(_=YK(n,s++),_==="%"){if(YK(n,s)==="u"){if(w=QK(n,s+1,s+5),JK(D6e,w)){u+=XK(parseInt(w,16)),s+=5;continue}}else if(w=QK(n,s,s+2),JK(R6e,w)){u+=XK(parseInt(w,16)),s+=2;continue}}u+=_}return u}})});var GP=I((owt,oX)=>{"use strict";var L6e=Pe(),tX=La(),v1=vl().getWeakData,z6e=Ji(),F6e=Ze(),N6e=Zr(),$P=It(),B6e=Rr(),iX=$r(),rX=Mt(),nX=Yt(),j6e=nX.set,U6e=nX.getterFor,$6e=iX.find,V6e=iX.findIndex,G6e=L6e([].splice),H6e=0,g1=function(e){return e.frozen||(e.frozen=new aX)},aX=function(){this.entries=[]},VP=function(e,t){return $6e(e.entries,function(n){return n[0]===t})};aX.prototype={get:function(e){var t=VP(this,e);if(t)return t[1]},has:function(e){return!!VP(this,e)},set:function(e,t){var n=VP(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=V6e(this.entries,function(n){return n[0]===e});return~t&&G6e(this.entries,t,1),!!~t}};oX.exports={getConstructor:function(e,t,n,u){var c=e(function(E,P){z6e(E,s),j6e(E,{type:t,id:H6e++,frozen:void 0}),N6e(P)||B6e(P,E[u],{that:E,AS_ENTRIES:n})}),s=c.prototype,_=U6e(t),w=function(E,P,C){var B=_(E),$=v1(F6e(P),!0);return $===!0?g1(B).set(P,C):$[B.id]=C,E};return tX(s,{delete:function(E){var P=_(this);if(!$P(E))return!1;var C=v1(E);return C===!0?g1(P).delete(E):C&&rX(C,P.id)&&delete C[P.id]},has:function(P){var C=_(this);if(!$P(P))return!1;var B=v1(P);return B===!0?g1(C).has(P):B&&rX(B,C.id)}}),tX(s,n?{get:function(P){var C=_(this);if($P(P)){var B=v1(P);return B===!0?g1(C).get(P):B?B[C.id]:void 0}},set:function(P,C){return w(this,P,C)}}:{add:function(P){return w(this,P,!0)}}),c}}});var vX=I(()=>{"use strict";var W6e=Bs(),sX=it(),b1=Pe(),uX=La(),Z6e=vl(),K6e=kv(),hX=GP(),y1=It(),_1=Yt().enforce,X6e=Oe(),Y6e=sE(),lg=Object,J6e=Array.isArray,x1=lg.isExtensible,fX=lg.isFrozen,Q6e=lg.isSealed,dX=lg.freeze,eUe=lg.seal,lX={},cX={},tUe=!sX.ActiveXObject&&"ActiveXObject"in sX,sg,pX=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},mX=K6e("WeakMap",pX,hX),wd=mX.prototype,w1=b1(wd.set),rUe=function(){return W6e&&X6e(function(){var e=dX([]);return w1(new mX,e,1),!fX(e)})};Y6e&&(tUe?(sg=hX.getConstructor(pX,"WeakMap",!0),Z6e.enable(),HP=b1(wd.delete),ug=b1(wd.has),WP=b1(wd.get),uX(wd,{delete:function(e){if(y1(e)&&!x1(e)){var t=_1(this);return t.frozen||(t.frozen=new sg),HP(this,e)||t.frozen.delete(e)}return HP(this,e)},has:function(t){if(y1(t)&&!x1(t)){var n=_1(this);return n.frozen||(n.frozen=new sg),ug(this,t)||n.frozen.has(t)}return ug(this,t)},get:function(t){if(y1(t)&&!x1(t)){var n=_1(this);return n.frozen||(n.frozen=new sg),ug(this,t)?WP(this,t):n.frozen.get(t)}return WP(this,t)},set:function(t,n){if(y1(t)&&!x1(t)){var u=_1(this);u.frozen||(u.frozen=new sg),ug(this,t)?w1(this,t,n):u.frozen.set(t,n)}else w1(this,t,n);return this}})):rUe()&&uX(wd,{set:function(t,n){var u;return J6e(t)&&(fX(t)?u=lX:Q6e(t)&&(u=cX)),w1(this,t,n),u===lX&&dX(t),u===cX&&eUe(t),this}}));var HP,ug,WP});var S1=I(()=>{"use strict";vX()});var gX=I(()=>{"use strict";var iUe=kv(),nUe=GP();iUe("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},nUe)});var yX=I(()=>{"use strict";gX()});var _X=I(()=>{"use strict";QE()});var bX=I(()=>{"use strict";var aUe=V(),oUe=Xi(),sUe=Xr(),I1=Ra(),uUe=Ff(),xX=Ur(),q1=Kr(),ZP=kn(),lUe=G0(),cUe=Mc(),hUe=pt(),fUe=hUe("toStringTag"),E1=Error,Sd=function(t,n,u){var c=oUe(KP,this),s;return I1?s=I1(new E1,c?sUe(this):KP):(s=c?this:xX(KP),q1(s,fUe,"Error")),u!==void 0&&q1(s,"message",cUe(u)),lUe(s,Sd,s.stack,1),q1(s,"error",t),q1(s,"suppressed",n),s};I1?I1(Sd,E1):uUe(Sd,E1,{name:!0});var KP=Sd.prototype=xX(E1.prototype,{constructor:ZP(1,Sd),message:ZP(1,""),name:ZP(1,"SuppressedError")});aUe({global:!0,constructor:!0,arity:3},{SuppressedError:Sd})});var qd=I((_wt,PX)=>{"use strict";var EX=it(),TX=iv(),AX=qt(),dUe=Ur(),T1=Xr(),pUe=tr(),mUe=pt(),vUe=Dt(),wX="USE_FUNCTION_CONSTRUCTOR",SX=mUe("asyncIterator"),qX=EX.AsyncIterator,IX=TX.AsyncIteratorPrototype,Ho,XP;if(IX)Ho=IX;else if(AX(qX))Ho=qX.prototype;else if(TX[wX]||EX[wX])try{XP=T1(T1(T1(Function("return async function*(){}()")()))),T1(XP)===Object.prototype&&(Ho=XP)}catch(e){}Ho?vUe&&(Ho=dUe(Ho)):Ho={};AX(Ho[SX])||pUe(Ho,SX,function(){return this});PX.exports=Ho});var cg=I((xwt,FX)=>{"use strict";var CX=He(),MX=Ze(),gUe=Ur(),yUe=jr(),_Ue=La(),RX=Yt(),xUe=xt(),bUe=qd(),DX=Mi(),YP=xUe("Promise"),LX="AsyncFromSyncIterator",wUe=RX.set,kX=RX.getterFor(LX),OX=function(e,t,n){var u=e.done;YP.resolve(e.value).then(function(c){t(DX(c,u))},n)},zX=function(t){t.type=LX,wUe(this,t)};zX.prototype=_Ue(gUe(bUe),{next:function(){var t=kX(this);return new YP(function(n,u){var c=MX(CX(t.next,t.iterator));OX(c,n,u)})},return:function(){var e=kX(this).iterator;return new YP(function(t,n){var u=yUe(e,"return");if(u===void 0)return t(DX(void 0,!0));var c=MX(CX(u,e));OX(c,t,n)})}});FX.exports=zX});var Ir=I((bwt,NX)=>{"use strict";NX.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var jX=I((wwt,BX)=>{"use strict";var SUe=He(),qUe=cg(),IUe=Ze(),EUe=ol(),TUe=Ir(),AUe=jr(),PUe=pt(),CUe=PUe("asyncIterator");BX.exports=function(e,t){var n=arguments.length<2?AUe(e,CUe):t;return n?IUe(SUe(n,e)):new qUe(TUe(EUe(e)))}});var Id=I((Swt,UX)=>{"use strict";var MUe=He(),kUe=xt(),OUe=jr();UX.exports=function(e,t,n,u){try{var c=OUe(e,"return");if(c)return kUe("Promise").resolve(MUe(c,e)).then(function(){t(n)},function(s){u(s)})}catch(s){return u(s)}t(n)}});var Zc=I((qwt,$X)=>{"use strict";var RUe=He(),DUe=bt(),JP=Ze(),LUe=It(),zUe=sl(),FUe=xt(),NUe=Ir(),QP=Id(),hg=function(e){var t=e===0,n=e===1,u=e===2,c=e===3;return function(s,_,w){JP(s);var E=_!==void 0;(E||!t)&&DUe(_);var P=NUe(s),C=FUe("Promise"),B=P.iterator,$=P.next,re=0;return new C(function(xe,ye){var X=function(ie){QP(B,ye,ie,ye)},K=function(){try{if(E)try{zUe(re)}catch(ie){X(ie)}C.resolve(JP(RUe($,B))).then(function(ie){try{if(JP(ie).done)t?(w.length=re,xe(w)):xe(c?!1:u||void 0);else{var _e=ie.value;try{if(E){var be=_(_e,re),Qe=function(Le){if(n)K();else if(u)Le?K():QP(B,xe,!1,ye);else if(t)try{w[re++]=Le,K()}catch(nt){X(nt)}else Le?QP(B,xe,c||_e,ye):K()};LUe(be)?C.resolve(be).then(Qe,X):Qe(be)}else w[re++]=_e,K()}catch(Le){X(Le)}}}catch(Le){ye(Le)}},ye)}catch(ie){ye(ie)}};K()})}};$X.exports={toArray:hg(0),forEach:hg(1),every:hg(2),some:hg(3),find:hg(4)}});var eC=I((Iwt,WX)=>{"use strict";var BUe=or(),VX=Pe(),jUe=Lt(),UUe=co(),$Ue=jX(),VUe=ol(),GUe=Ir(),HUe=Os(),WUe=jr(),ZUe=CT(),KUe=xt(),XUe=pt(),YUe=cg(),JUe=Zc().toArray,QUe=XUe("asyncIterator"),GX=VX(ZUe("Array").values),e$e=VX(GX([]).next),t$e=function(){return new HX(this)},HX=function(e){this.iterator=GX(e)};HX.prototype.next=function(){return e$e(this.iterator)};WX.exports=function(t){var n=this,u=arguments.length,c=u>1?arguments[1]:void 0,s=u>2?arguments[2]:void 0;return new(KUe("Promise"))(function(_){var w=jUe(t);c!==void 0&&(c=BUe(c,s));var E=WUe(w,QUe),P=E?void 0:HUe(w)||t$e,C=UUe(n)?new n:[],B=E?$Ue(w,E):new YUe(GUe(VUe(w,P)));_(JUe(B,c,C))})}});var ZX=I(()=>{"use strict";var r$e=V(),i$e=eC();r$e({target:"Array",stat:!0},{fromAsync:i$e})});var KX=I(()=>{"use strict";iT()});var XX=I(()=>{"use strict";var n$e=V(),a$e=$r().filterReject,o$e=Cr();n$e({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return a$e(this,t,arguments.length>1?arguments[1]:void 0)}});o$e("filterOut")});var YX=I(()=>{"use strict";var s$e=V(),u$e=$r().filterReject,l$e=Cr();s$e({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return u$e(this,t,arguments.length>1?arguments[1]:void 0)}});l$e("filterReject")});var JX=I(()=>{"use strict";uT()});var QX=I(()=>{"use strict";lT()});var A1=I((Fwt,eY)=>{"use strict";var c$e=or(),h$e=Pe(),f$e=Es(),d$e=Lt(),p$e=so(),m$e=Nt(),v$e=Ur(),g$e=Dc(),y$e=Array,_$e=h$e([].push);eY.exports=function(e,t,n,u){for(var c=d$e(e),s=f$e(c),_=c$e(t,n),w=v$e(null),E=m$e(s),P=0,C,B,$;E>P;P++)$=s[P],B=p$e(_($,P,c)),B in w?_$e(w[B],$):w[B]=[$];if(u&&(C=u(c),C!==y$e))for(B in w)w[B]=g$e(C,w[B]);return w}});var tY=I(()=>{"use strict";var x$e=V(),b$e=A1(),w$e=Cr();x$e({target:"Array",proto:!0},{group:function(t){var n=arguments.length>1?arguments[1]:void 0;return b$e(this,t,n)}});w$e("group")});var rY=I(()=>{"use strict";var S$e=V(),q$e=A1(),I$e=Da(),E$e=Cr();S$e({target:"Array",proto:!0,forced:!I$e("groupBy")},{groupBy:function(t){var n=arguments.length>1?arguments[1]:void 0;return q$e(this,t,n)}});E$e("groupBy")});var pn=I(($wt,iY)=>{"use strict";var P1=Pe(),fg=Map.prototype;iY.exports={Map,set:P1(fg.set),get:P1(fg.get),has:P1(fg.has),remove:P1(fg.delete),proto:fg}});var tC=I((Vwt,nY)=>{"use strict";var T$e=or(),A$e=Pe(),P$e=Es(),C$e=Lt(),M$e=Nt(),C1=pn(),k$e=C1.Map,O$e=C1.get,R$e=C1.has,D$e=C1.set,L$e=A$e([].push);nY.exports=function(t){for(var n=C$e(this),u=P$e(n),c=T$e(t,arguments.length>1?arguments[1]:void 0),s=new k$e,_=M$e(u),w=0,E,P;_>w;w++)P=u[w],E=c(P,w,n),R$e(s,E)?L$e(O$e(s,E),P):D$e(s,E,[P]);return s}});var aY=I(()=>{"use strict";var z$e=V(),F$e=Da(),N$e=Cr(),B$e=tC(),j$e=Dt();z$e({target:"Array",proto:!0,name:"groupToMap",forced:j$e||!F$e("groupByToMap")},{groupByToMap:B$e});N$e("groupByToMap")});var oY=I(()=>{"use strict";var U$e=V(),$$e=Cr(),V$e=tC(),G$e=Dt();U$e({target:"Array",proto:!0,forced:G$e},{groupToMap:V$e});$$e("groupToMap")});var lY=I(()=>{"use strict";var H$e=V(),W$e=lo(),sY=Object.isFrozen,uY=function(e,t){if(!sY||!W$e(e)||!sY(e))return!1;for(var n=0,u=e.length,c;n<u;)if(c=e[n++],!(typeof c=="string"||t&&c===void 0))return!1;return u!==0};H$e({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!uY(t,!0))return!1;var n=t.raw;return n.length===t.length&&uY(n,!1)}})});var cY=I(()=>{"use strict";var Z$e=ft(),K$e=Cr(),X$e=Lt(),Y$e=Nt(),J$e=qr();Z$e&&(J$e(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=X$e(this),n=Y$e(t);return n===0?0:n-1}}),K$e("lastIndex"))});var dY=I(()=>{"use strict";var Q$e=ft(),eVe=Cr(),hY=Lt(),fY=Nt(),tVe=qr();Q$e&&(tVe(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=hY(this),n=fY(t);return n===0?void 0:t[n-1]},set:function(t){var n=hY(this),u=fY(n);return n[u===0?0:u-1]=t}}),eVe("lastItem"))});var pY=I(()=>{"use strict";PT()});var mY=I(()=>{"use strict";MT()});var vY=I(()=>{"use strict";kT()});var Us=I((sSt,gY)=>{"use strict";var rVe=He();gY.exports=function(e,t,n){for(var u=n?e:e.iterator,c=e.next,s,_;!(s=rVe(c,u)).done;)if(_=t(s.value),_!==void 0)return _}});var Na=I((uSt,wY)=>{"use strict";var yY=Pe(),iVe=Us(),_Y=pn(),nVe=_Y.Map,xY=_Y.proto,aVe=yY(xY.forEach),bY=yY(xY.entries),oVe=bY(new nVe).next;wY.exports=function(e,t,n){return n?iVe({iterator:bY(e),next:oVe},function(u){return t(u[1],u[0])}):aVe(e,t)}});var M1=I((lSt,SY)=>{"use strict";var sVe=Pe(),uVe=bt(),lVe=Zr(),cVe=Nt(),hVe=Lt(),rC=pn(),fVe=Na(),dVe=rC.Map,pVe=rC.has,mVe=rC.set,vVe=sVe([].push);SY.exports=function(t){var n=hVe(this),u=cVe(n),c=[],s=new dVe,_=lVe(t)?function(C){return C}:uVe(t),w,E,P;for(w=0;w<u;w++)E=n[w],P=_(E),pVe(s,P)||mVe(s,P,E);return fVe(s,function(C){vVe(c,C)}),c}});var qY=I(()=>{"use strict";var gVe=V(),yVe=Cr(),_Ve=M1();gVe({target:"Array",proto:!0,forced:!0},{uniqueBy:_Ve});yVe("uniqueBy")});var IY=I(()=>{"use strict";RT()});var iC=I((pSt,EY)=>{"use strict";var xVe=_v(),bVe=Ci(),wVe=TypeError;EY.exports=xVe(ArrayBuffer.prototype,"byteLength","get")||function(e){if(bVe(e)!=="ArrayBuffer")throw new wVe("ArrayBuffer expected");return e.byteLength}});var nC=I((mSt,TY)=>{"use strict";var SVe=Pe(),qVe=iC(),IVe=SVe(ArrayBuffer.prototype.slice);TY.exports=function(e){if(qVe(e)!==0)return!1;try{return IVe(e,0,0),!1}catch(t){return!0}}});var PY=I(()=>{"use strict";var EVe=ft(),TVe=qr(),AVe=nC(),AY=ArrayBuffer.prototype;EVe&&!("detached"in AY)&&TVe(AY,"detached",{configurable:!0,get:function(){return AVe(this)}})});var aC=I((ySt,CY)=>{"use strict";var PVe=Bo();CY.exports=function(e){try{if(PVe)return Function("return require(\""+e+"\")")()}catch(t){}}});var k1=I((_St,kY)=>{"use strict";var CVe=it(),MVe=Oe(),oC=zo(),kVe=aA(),OVe=zx(),RVe=Bo(),MY=CVe.structuredClone;kY.exports=!!MY&&!MVe(function(){if(OVe&&oC>92||RVe&&oC>94||kVe&&oC>97)return!1;var e=new ArrayBuffer(8),t=MY(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var LY=I((xSt,DY)=>{"use strict";var cC=it(),DVe=aC(),LVe=k1(),zVe=cC.structuredClone,OY=cC.ArrayBuffer,O1=cC.MessageChannel,lC=!1,sC,RY,R1,uC;if(LVe)lC=function(e){zVe(e,{transfer:[e]})};else if(OY)try{O1||(sC=DVe("worker_threads"),sC&&(O1=sC.MessageChannel)),O1&&(RY=new O1,R1=new OY(2),uC=function(e){RY.port1.postMessage(null,[e])},R1.byteLength===2&&(uC(R1),R1.byteLength===0&&(lC=uC)))}catch(e){}DY.exports=lC});var L1=I((bSt,$Y)=>{"use strict";var D1=it(),dC=Pe(),BY=_v(),FVe=Gf(),NVe=nC(),BVe=iC(),zY=LY(),hC=k1(),jVe=D1.structuredClone,jY=D1.ArrayBuffer,fC=D1.DataView,UVe=D1.TypeError,$Ve=Math.min,pC=jY.prototype,UY=fC.prototype,VVe=dC(pC.slice),FY=BY(pC,"resizable","get"),NY=BY(pC,"maxByteLength","get"),GVe=dC(UY.getInt8),HVe=dC(UY.setInt8);$Y.exports=(hC||zY)&&function(e,t,n){var u=BVe(e),c=t===void 0?u:FVe(t),s=!FY||!FY(e),_;if(NVe(e))throw new UVe("ArrayBuffer is detached");if(hC&&(e=jVe(e,{transfer:[e]}),u===c&&(n||s)))return e;if(u>=c&&(!n||s))_=VVe(e,0,c);else{var w=n&&!s&&NY?{maxByteLength:NY(e)}:void 0;_=new jY(c,w);for(var E=new fC(e),P=new fC(_),C=$Ve(c,u),B=0;B<C;B++)HVe(P,B,GVe(E,B))}return hC||zY(e),_}});var GY=I(()=>{"use strict";var WVe=V(),VY=L1();VY&&WVe({target:"ArrayBuffer",proto:!0},{transfer:function(){return VY(this,arguments.length?arguments[0]:void 0,!0)}})});var WY=I(()=>{"use strict";var ZVe=V(),HY=L1();HY&&ZVe({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return HY(this,arguments.length?arguments[0]:void 0,!1)}})});var vC=I((ESt,JY)=>{"use strict";var KVe=He(),XVe=Pe(),YVe=or(),JVe=Ze(),QVe=bt(),XY=Zr(),mC=jr(),YY=pt(),e8e=YY("asyncDispose"),ZY=YY("dispose"),t8e=XVe([].push),r8e=function(e,t){if(t==="async-dispose"){var n=mC(e,e8e);return n!==void 0?n:(n=mC(e,ZY),function(){KVe(n,this)})}return mC(e,ZY)},KY=function(e,t,n){return arguments.length<3&&!XY(e)&&(n=QVe(r8e(JVe(e),t))),n===void 0?function(){}:YVe(n,e)};JY.exports=function(e,t,n,u){var c;if(arguments.length<4){if(XY(t)&&n==="sync-dispose")return;c=KY(t,n)}else c=KY(void 0,n,u);t8e(e.stack,c)}});var aJ=I(()=>{"use strict";var i8e=V(),F1=ft(),tJ=xt(),QY=bt(),n8e=Ji(),rJ=tr(),a8e=La(),o8e=qr(),iJ=pt(),nJ=Yt(),gC=vC(),eJ=tJ("Promise"),s8e=tJ("SuppressedError"),u8e=ReferenceError,l8e=iJ("asyncDispose"),c8e=iJ("toStringTag"),B1="AsyncDisposableStack",h8e=nJ.set,N1=nJ.getterFor(B1),yC="async-dispose",dg="disposed",f8e="pending",z1=function(e){var t=N1(e);if(t.state===dg)throw new u8e(B1+" already disposed");return t},_C=function(){h8e(n8e(this,Ed),{type:B1,state:f8e,stack:[]}),F1||(this.disposed=!1)},Ed=_C.prototype;a8e(Ed,{disposeAsync:function(){var t=this;return new eJ(function(n,u){var c=N1(t);if(c.state===dg)return n(void 0);c.state=dg,F1||(t.disposed=!0);var s=c.stack,_=s.length,w=!1,E,P=function(B){w?E=new s8e(B,E):(w=!0,E=B),C()},C=function(){if(_){var B=s[--_];s[_]=null;try{eJ.resolve(B()).then(C,P)}catch($){P($)}}else c.stack=null,w?u(E):n(void 0)};C()})},use:function(t){return gC(z1(this),t,yC),t},adopt:function(t,n){var u=z1(this);return QY(n),gC(u,void 0,yC,function(){return n(t)}),t},defer:function(t){var n=z1(this);QY(t),gC(n,void 0,yC,t)},move:function(){var t=z1(this),n=new _C;return N1(n).stack=t.stack,t.stack=[],t.state=dg,F1||(this.disposed=!0),n}});F1&&o8e(Ed,"disposed",{configurable:!0,get:function(){return N1(this).state===dg}});rJ(Ed,l8e,Ed.disposeAsync,{name:"disposeAsync"});rJ(Ed,c8e,B1,{nonWritable:!0});i8e({global:!0,constructor:!0},{AsyncDisposableStack:_C})});var cJ=I(()=>{"use strict";var d8e=V(),p8e=Ji(),m8e=Xr(),sJ=Kr(),uJ=Mt(),v8e=pt(),bl=qd(),lJ=Dt(),oJ=v8e("toStringTag"),g8e=TypeError,xC=function(){if(p8e(this,bl),m8e(this)===bl)throw new g8e("Abstract class AsyncIterator not directly constructable")};xC.prototype=bl;uJ(bl,oJ)||sJ(bl,oJ,"AsyncIterator");(lJ||!uJ(bl,"constructor")||bl.constructor===Object)&&sJ(bl,"constructor",xC);d8e({global:!0,constructor:!0,forced:lJ},{AsyncIterator:xC})});var Kc=I((MSt,yJ)=>{"use strict";var y8e=He(),j1=gl(),hJ=Ze(),_8e=Ur(),x8e=Kr(),b8e=La(),w8e=pt(),dJ=Yt(),S8e=xt(),q8e=jr(),I8e=qd(),bC=Mi(),fJ=Rs(),Wo=S8e("Promise"),E8e=w8e("toStringTag"),pJ="AsyncIteratorHelper",mJ="WrapForValidAsyncIterator",T8e=dJ.set,vJ=function(e){var t=!e,n=dJ.getterFor(e?mJ:pJ),u=function(c){var s=j1(function(){return n(c)}),_=s.error,w=s.value;return _||t&&w.done?{exit:!0,value:_?Wo.reject(w):Wo.resolve(bC(void 0,!0))}:{exit:!1,value:w}};return b8e(_8e(I8e),{next:function(){var s=u(this),_=s.value;if(s.exit)return _;var w=j1(function(){return hJ(_.nextHandler(Wo))}),E=w.error,P=w.value;return E&&(_.done=!0),E?Wo.reject(P):Wo.resolve(P)},return:function(){var c=u(this),s=c.value;if(c.exit)return s;s.done=!0;var _=s.iterator,w,E,P=j1(function(){if(s.inner)try{fJ(s.inner.iterator,"normal")}catch(C){return fJ(_,"throw",C)}return q8e(_,"return")});return w=E=P.value,P.error?Wo.reject(E):w===void 0?Wo.resolve(bC(void 0,!0)):(P=j1(function(){return y8e(w,_)}),E=P.value,P.error?Wo.reject(E):e?Wo.resolve(E):Wo.resolve(E).then(function(C){return hJ(C),bC(void 0,!0)}))}})},A8e=vJ(!0),gJ=vJ(!1);x8e(gJ,E8e,"Async Iterator Helper");yJ.exports=function(e,t){var n=function(c,s){s?(s.iterator=c.iterator,s.next=c.next):s=c,s.type=t?mJ:pJ,s.nextHandler=e,s.counter=0,s.done=!1,T8e(this,s)};return n.prototype=t?A8e:gJ,n}});var SC=I((kSt,xJ)=>{"use strict";var P8e=He(),C8e=bt(),wC=Ze(),M8e=It(),k8e=Ir(),O8e=Kc(),_J=Mi(),R8e=Id(),D8e=O8e(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(c,s){var _=function(E){t.done=!0,s(E)},w=function(E){R8e(n,_,E,_)};e.resolve(wC(P8e(t.next,n))).then(function(E){try{if(wC(E).done)t.done=!0,c(_J(void 0,!0));else{var P=E.value;try{var C=u(P,t.counter++),B=function($){c(_J($,!1))};M8e(C)?e.resolve(C).then(B,w):B(C)}catch($){w($)}}}catch($){_($)}},_)})});xJ.exports=function(t){return wC(this),C8e(t),new D8e(k8e(this),{mapper:t})}});var qC=I((OSt,bJ)=>{"use strict";var L8e=He(),z8e=SC(),F8e=function(e,t){return[t,e]};bJ.exports=function(){return L8e(z8e,this,F8e)}});var wJ=I(()=>{"use strict";var N8e=V(),B8e=qC();N8e({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:B8e})});var EJ=I(()=>{"use strict";var j8e=He(),U8e=tr(),$8e=xt(),V8e=jr(),G8e=Mt(),H8e=pt(),SJ=qd(),qJ=H8e("asyncDispose"),IJ=$8e("Promise");G8e(SJ,qJ)||U8e(SJ,qJ,function(){var e=this;return new IJ(function(t,n){var u=V8e(e,"return");u?IJ.resolve(j8e(u,e)).then(function(){t(void 0)},n):t(void 0)})})});var pg=I((FSt,TJ)=>{"use strict";var W8e=RangeError;TJ.exports=function(e){if(e===e)return e;throw new W8e("NaN is not allowed")}});var PJ=I(()=>{"use strict";var Z8e=V(),K8e=He(),IC=Ze(),X8e=Ir(),Y8e=pg(),J8e=gd(),Q8e=Kc(),AJ=Mi(),eGe=Dt(),tGe=Q8e(function(e){var t=this;return new e(function(n,u){var c=function(_){t.done=!0,u(_)},s=function(){try{e.resolve(IC(K8e(t.next,t.iterator))).then(function(_){try{IC(_).done?(t.done=!0,n(AJ(void 0,!0))):t.remaining?(t.remaining--,s()):n(AJ(_.value,!1))}catch(w){c(w)}},c)}catch(_){c(_)}};s()})});Z8e({target:"AsyncIterator",proto:!0,real:!0,forced:eGe},{drop:function(t){IC(this);var n=J8e(Y8e(+t));return new tGe(X8e(this),{remaining:n})}})});var CJ=I(()=>{"use strict";var rGe=V(),iGe=Zc().every;rGe({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return iGe(this,t)}})});var kJ=I(()=>{"use strict";var nGe=V(),aGe=He(),oGe=bt(),EC=Ze(),sGe=It(),uGe=Ir(),lGe=Kc(),MJ=Mi(),cGe=Id(),hGe=Dt(),fGe=lGe(function(e){var t=this,n=t.iterator,u=t.predicate;return new e(function(c,s){var _=function(P){t.done=!0,s(P)},w=function(P){cGe(n,_,P,_)},E=function(){try{e.resolve(EC(aGe(t.next,n))).then(function(P){try{if(EC(P).done)t.done=!0,c(MJ(void 0,!0));else{var C=P.value;try{var B=u(C,t.counter++),$=function(re){re?c(MJ(C,!1)):E()};sGe(B)?e.resolve(B).then($,w):$(B)}catch(re){w(re)}}}catch(re){_(re)}},_)}catch(P){_(P)}};E()})});nGe({target:"AsyncIterator",proto:!0,real:!0,forced:hGe},{filter:function(t){return EC(this),oGe(t),new fGe(uGe(this),{predicate:t})}})});var OJ=I(()=>{"use strict";var dGe=V(),pGe=Zc().find;dGe({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return pGe(this,t)}})});var TC=I((WSt,LJ)=>{"use strict";var mGe=He(),vGe=qt(),RJ=Ze(),DJ=Ir(),gGe=Os(),yGe=jr(),_Ge=pt(),xGe=cg(),bGe=_Ge("asyncIterator");LJ.exports=function(t){var n=RJ(t),u=!0,c=yGe(n,bGe),s;return vGe(c)||(c=gGe(n),u=!1),c!==void 0?s=mGe(c,n):(s=n,u=!0),RJ(s),DJ(u?s:new xGe(DJ(s)))}});var NJ=I(()=>{"use strict";var wGe=V(),zJ=He(),SGe=bt(),mg=Ze(),qGe=It(),IGe=Ir(),EGe=Kc(),FJ=Mi(),TGe=TC(),AGe=Id(),PGe=Dt(),CGe=EGe(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(c,s){var _=function(C){t.done=!0,s(C)},w=function(C){AGe(n,_,C,_)},E=function(){try{e.resolve(mg(zJ(t.next,n))).then(function(C){try{if(mg(C).done)t.done=!0,c(FJ(void 0,!0));else{var B=C.value;try{var $=u(B,t.counter++),re=function(xe){try{t.inner=TGe(xe),P()}catch(ye){w(ye)}};qGe($)?e.resolve($).then(re,w):re($)}catch(xe){w(xe)}}}catch(xe){_(xe)}},_)}catch(C){_(C)}},P=function(){var C=t.inner;if(C)try{e.resolve(mg(zJ(C.next,C.iterator))).then(function(B){try{mg(B).done?(t.inner=null,E()):c(FJ(B.value,!1))}catch($){w($)}},w)}catch(B){w(B)}else E()};P()})});wGe({target:"AsyncIterator",proto:!0,real:!0,forced:PGe},{flatMap:function(t){return mg(this),SGe(t),new CGe(IGe(this),{mapper:t,inner:null})}})});var BJ=I(()=>{"use strict";var MGe=V(),kGe=Zc().forEach;MGe({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return kGe(this,t)}})});var AC=I((JSt,jJ)=>{"use strict";var OGe=He(),RGe=Kc();jJ.exports=RGe(function(){return OGe(this.next,this.iterator)},!0)});var UJ=I(()=>{"use strict";var DGe=V(),LGe=Lt(),zGe=Xi(),FGe=TC(),NGe=qd(),BGe=AC(),jGe=Dt();DGe({target:"AsyncIterator",stat:!0,forced:jGe},{from:function(t){var n=FGe(typeof t=="string"?LGe(t):t);return zGe(NGe,n.iterator)?n.iterator:new BGe(n)}})});var $J=I(()=>{"use strict";var UGe=V(),$Ge=qC();UGe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:$Ge})});var VJ=I(()=>{"use strict";var VGe=V(),GGe=SC(),HGe=Dt();VGe({target:"AsyncIterator",proto:!0,real:!0,forced:HGe},{map:GGe})});var GJ=I(()=>{"use strict";var WGe=V(),ZGe=He(),KGe=bt(),PC=Ze(),XGe=It(),YGe=xt(),JGe=Ir(),QGe=Id(),CC=YGe("Promise"),eHe=TypeError;WGe({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){PC(this),KGe(t);var n=JGe(this),u=n.iterator,c=n.next,s=arguments.length<2,_=s?void 0:arguments[1],w=0;return new CC(function(E,P){var C=function($){QGe(u,P,$,P)},B=function(){try{CC.resolve(PC(ZGe(c,u))).then(function($){try{if(PC($).done)s?P(new eHe("Reduce of empty iterator with no initial value")):E(_);else{var re=$.value;if(s)s=!1,_=re,B();else try{var xe=t(_,re,w),ye=function(X){_=X,B()};XGe(xe)?CC.resolve(xe).then(ye,C):ye(xe)}catch(X){C(X)}}w++}catch(X){P(X)}},P)}catch($){P($)}};B()})}})});var HJ=I(()=>{"use strict";var tHe=V(),rHe=Zc().some;tHe({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return rHe(this,t)}})});var KJ=I(()=>{"use strict";var iHe=V(),WJ=He(),ZJ=Ze(),nHe=Ir(),aHe=pg(),oHe=gd(),sHe=Kc(),MC=Mi(),uHe=Dt(),lHe=sHe(function(e){var t=this,n=t.iterator,u;if(!t.remaining--){var c=MC(void 0,!0);return t.done=!0,u=n.return,u!==void 0?e.resolve(WJ(u,n,void 0)).then(function(){return c}):c}return e.resolve(WJ(t.next,n)).then(function(s){return ZJ(s).done?(t.done=!0,MC(void 0,!0)):MC(s.value,!1)}).then(null,function(s){throw t.done=!0,s})});iHe({target:"AsyncIterator",proto:!0,real:!0,forced:uHe},{take:function(t){ZJ(this);var n=oHe(aHe(+t));return new lHe(nHe(this),{remaining:n})}})});var XJ=I(()=>{"use strict";var cHe=V(),hHe=Zc().toArray;cHe({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return hHe(this,void 0,[])}})});var $1=I((dqt,rQ)=>{"use strict";var JJ=Yt(),fHe=ul(),kC=Mi(),dHe=Zr(),pHe=It(),mHe=qr(),QJ=ft(),vg="Incorrect Iterator.range arguments",RC="NumericRangeIterator",vHe=JJ.set,eQ=JJ.getterFor(RC),YJ=RangeError,OC=TypeError,tQ=fHe(function(t,n,u,c,s,_){if(typeof t!=c||n!==1/0&&n!==-1/0&&typeof n!=c)throw new OC(vg);if(t===1/0||t===-1/0)throw new YJ(vg);var w=n>t,E=!1,P;if(u===void 0)P=void 0;else if(pHe(u))P=u.step,E=!!u.inclusive;else if(typeof u==c)P=u;else throw new OC(vg);if(dHe(P)&&(P=w?_:-_),typeof P!=c)throw new OC(vg);if(P===1/0||P===-1/0||P===s&&t!==n)throw new YJ(vg);var C=t!==t||n!==n||P!==P||n>t!=P>s;vHe(this,{type:RC,start:t,end:n,step:P,inclusive:E,hitsEnd:C,currentCount:s,zero:s}),QJ||(this.start=t,this.end=n,this.step=P,this.inclusive=E)},RC,function(){var t=eQ(this);if(t.hitsEnd)return kC(void 0,!0);var n=t.start,u=t.end,c=t.step,s=n+c*t.currentCount++;s===u&&(t.hitsEnd=!0);var _=t.inclusive,w;return u>n?w=_?s>u:s>=u:w=_?u>s:u>=s,w?(t.hitsEnd=!0,kC(void 0,!0)):kC(s,!1)}),U1=function(e){mHe(tQ.prototype,e,{get:function(){return eQ(this)[e]},set:function(){},configurable:!0,enumerable:!1})};QJ&&(U1("start"),U1("end"),U1("inclusive"),U1("step"));rQ.exports=tQ});var iQ=I(()=>{"use strict";var gHe=V(),yHe=$1();typeof BigInt=="function"&&gHe({target:"BigInt",stat:!0,forced:!0},{range:function(t,n,u){return new yHe(t,n,u,"bigint",BigInt(0),BigInt(1))}})});var DC=I((vqt,sQ)=>{"use strict";Ax();S1();var oQ=xt(),_He=Ur(),nQ=It(),xHe=Object,bHe=TypeError,wHe=oQ("Map"),SHe=oQ("WeakMap"),V1=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=_He(null)};V1.prototype.get=function(e,t){return this[e]||(this[e]=t())};V1.prototype.next=function(e,t,n){var u=n?this.objectsByIndex[e]||(this.objectsByIndex[e]=new SHe):this.primitives||(this.primitives=new wHe),c=u.get(t);return c||u.set(t,c=new V1),c};var aQ=new V1;sQ.exports=function(){var e=aQ,t=arguments.length,n,u;for(n=0;n<t;n++)nQ(u=arguments[n])&&(e=e.next(n,u,!0));if(this===xHe&&e===aQ)throw new bHe("Composite keys must contain a non-primitive component");for(n=0;n<t;n++)nQ(u=arguments[n])||(e=e.next(n,u,!1));return e}});var lQ=I(()=>{"use strict";var qHe=V(),IHe=Yi(),EHe=DC(),THe=xt(),uQ=Ur(),AHe=Object,PHe=function(){var e=THe("Object","freeze");return e?e(uQ(null)):uQ(null)};qHe({global:!0,forced:!0},{compositeKey:function(){return IHe(EHe,AHe,arguments).get("object",PHe)}})});var hQ=I(()=>{"use strict";var CHe=V(),MHe=DC(),cQ=xt(),kHe=Yi();CHe({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?cQ("Symbol").for(arguments[0]):kHe(MHe,null,arguments).get("symbol",cQ("Symbol"))}})});var fQ=I(()=>{"use strict";var OHe=V(),RHe=Pe(),DHe=hx().unpack,LHe=RHe(DataView.prototype.getUint16);OHe({target:"DataView",proto:!0},{getFloat16:function(t){var n=LHe(this,t,arguments.length>1?arguments[1]:!1);return DHe([n&255,n>>8&255],10)}})});var dQ=I(()=>{"use strict";var zHe=V(),FHe=Pe(),NHe=FHe(DataView.prototype.getUint8);zHe({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return NHe(this,t)}})});var LC=I((Iqt,pQ)=>{"use strict";var BHe=DT(),jHe=.0009765625,UHe=65504,$He=6103515625e-14;pQ.exports=Math.f16round||function(t){return BHe(t,jHe,UHe,$He)}});var mQ=I(()=>{"use strict";var VHe=V(),GHe=Pe(),HHe=Rn(),WHe=Gf(),ZHe=hx().pack,KHe=LC(),XHe=TypeError,YHe=GHe(DataView.prototype.setUint16);VHe({target:"DataView",proto:!0},{setFloat16:function(t,n){if(HHe(this)!=="DataView")throw new XHe("Incorrect receiver");var u=WHe(t),c=ZHe(KHe(n),10,2);return YHe(this,u,c[1]<<8|c[0],arguments.length>2?arguments[2]:!1)}})});var vQ=I(()=>{"use strict";var JHe=V(),QHe=Pe(),e9e=Rn(),t9e=Gf(),r9e=mP(),i9e=TypeError,n9e=QHe(DataView.prototype.setUint8);JHe({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,n){if(e9e(this)!=="DataView")throw new i9e("Incorrect receiver");var u=t9e(t);return n9e(this,u,r9e(n))}})});var bQ=I(()=>{"use strict";var a9e=V(),H1=ft(),o9e=xt(),gQ=bt(),s9e=Ji(),yQ=tr(),u9e=La(),l9e=qr(),_Q=pt(),xQ=Yt(),zC=vC(),c9e=o9e("SuppressedError"),h9e=ReferenceError,f9e=_Q("dispose"),d9e=_Q("toStringTag"),Z1="DisposableStack",p9e=xQ.set,W1=xQ.getterFor(Z1),FC="sync-dispose",gg="disposed",m9e="pending",G1=function(e){var t=W1(e);if(t.state===gg)throw new h9e(Z1+" already disposed");return t},NC=function(){p9e(s9e(this,Td),{type:Z1,state:m9e,stack:[]}),H1||(this.disposed=!1)},Td=NC.prototype;u9e(Td,{dispose:function(){var t=W1(this);if(t.state!==gg){t.state=gg,H1||(this.disposed=!0);for(var n=t.stack,u=n.length,c=!1,s;u;){var _=n[--u];n[u]=null;try{_()}catch(w){c?s=new c9e(w,s):(c=!0,s=w)}}if(t.stack=null,c)throw s}},use:function(t){return zC(G1(this),t,FC),t},adopt:function(t,n){var u=G1(this);return gQ(n),zC(u,void 0,FC,function(){n(t)}),t},defer:function(t){var n=G1(this);gQ(t),zC(n,void 0,FC,t)},move:function(){var t=G1(this),n=new NC;return W1(n).stack=t.stack,t.stack=[],t.state=gg,H1||(this.disposed=!0),n}});H1&&l9e(Td,"disposed",{configurable:!0,get:function(){return W1(this).state===gg}});yQ(Td,f9e,Td.dispose,{name:"dispose"});yQ(Td,d9e,Z1,{nonWritable:!0});a9e({global:!0,constructor:!0},{DisposableStack:NC})});var BC=I((kqt,wQ)=>{"use strict";var v9e=Pe(),g9e=bt();wQ.exports=function(){return v9e(g9e(this))}});var SQ=I(()=>{"use strict";var y9e=V(),_9e=BC();y9e({target:"Function",proto:!0,forced:!0},{demethodize:_9e})});var IQ=I(()=>{"use strict";var x9e=V(),b9e=Pe(),w9e=qt(),S9e=ov(),q9e=Mt(),I9e=ft(),E9e=Object.getOwnPropertyDescriptor,qQ=/^\s*class\b/,T9e=b9e(qQ.exec),A9e=function(e){try{if(!I9e||!T9e(qQ,S9e(e)))return!1}catch(n){}var t=E9e(e,"prototype");return!!t&&q9e(t,"writable")&&!t.writable};x9e({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return w9e(t)&&!A9e(t)}})});var EQ=I(()=>{"use strict";var P9e=V(),C9e=co();P9e({target:"Function",stat:!0,forced:!0},{isConstructor:C9e})});var PQ=I(()=>{"use strict";var M9e=pt(),k9e=dr().f,TQ=M9e("metadata"),AQ=Function.prototype;AQ[TQ]===void 0&&k9e(AQ,TQ,{value:null})});var CQ=I(()=>{"use strict";var O9e=V(),R9e=BC();O9e({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:R9e})});var MQ=I(()=>{"use strict";s2()});var LQ=I(()=>{"use strict";var D9e=V(),L9e=it(),z9e=Ji(),F9e=qt(),N9e=Xr(),OQ=Kr(),B9e=Oe(),RQ=Mt(),j9e=pt(),$s=Rc().IteratorPrototype,U9e=Dt(),kQ=j9e("toStringTag"),$9e=TypeError,jC=L9e.Iterator,DQ=U9e||!F9e(jC)||jC.prototype!==$s||!B9e(function(){jC({})}),UC=function(){if(z9e(this,$s),N9e(this)===$s)throw new $9e("Abstract class Iterator not directly constructable")};RQ($s,kQ)||OQ($s,kQ,"Iterator");(DQ||!RQ($s,"constructor")||$s.constructor===Object)&&OQ($s,"constructor",UC);UC.prototype=$s;D9e({global:!0,constructor:!0,forced:DQ},{Iterator:UC})});var Xc=I((Wqt,UQ)=>{"use strict";var V9e=He(),G9e=Ur(),H9e=Kr(),W9e=La(),Z9e=pt(),zQ=Yt(),K9e=jr(),X9e=Rc().IteratorPrototype,$C=Mi(),VC=Rs(),Y9e=Z9e("toStringTag"),FQ="IteratorHelper",NQ="WrapForValidIterator",J9e=zQ.set,BQ=function(e){var t=zQ.getterFor(e?NQ:FQ);return W9e(G9e(X9e),{next:function(){var u=t(this);if(e)return u.nextHandler();try{var c=u.done?void 0:u.nextHandler();return $C(c,u.done)}catch(s){throw u.done=!0,s}},return:function(){var n=t(this),u=n.iterator;if(n.done=!0,e){var c=K9e(u,"return");return c?V9e(c,u):$C(void 0,!0)}if(n.inner)try{VC(n.inner.iterator,"normal")}catch(s){return VC(u,"throw",s)}return VC(u,"normal"),$C(void 0,!0)}})},Q9e=BQ(!0),jQ=BQ(!1);H9e(jQ,Y9e,"Iterator Helper");UQ.exports=function(e,t){var n=function(c,s){s?(s.iterator=c.iterator,s.next=c.next):s=c,s.type=t?NQ:FQ,s.nextHandler=e,s.counter=0,s.done=!1,J9e(this,s)};return n.prototype=t?Q9e:jQ,n}});var GC=I((Zqt,VQ)=>{"use strict";var eWe=He(),tWe=bt(),$Q=Ze(),rWe=Ir(),iWe=Xc(),nWe=ex(),aWe=iWe(function(){var e=this.iterator,t=$Q(eWe(this.next,e)),n=this.done=!!t.done;if(!n)return nWe(e,this.mapper,[t.value,this.counter++],!0)});VQ.exports=function(t){return $Q(this),tWe(t),new aWe(rWe(this),{mapper:t})}});var HC=I((Kqt,GQ)=>{"use strict";var oWe=He(),sWe=GC(),uWe=function(e,t){return[t,e]};GQ.exports=function(){return oWe(sWe,this,uWe)}});var HQ=I(()=>{"use strict";var lWe=V(),cWe=HC();lWe({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:cWe})});var KQ=I(()=>{"use strict";var hWe=He(),fWe=tr(),dWe=jr(),pWe=Mt(),mWe=pt(),WQ=Rc().IteratorPrototype,ZQ=mWe("dispose");pWe(WQ,ZQ)||fWe(WQ,ZQ,function(){var e=dWe(this,"return");e&&hWe(e,this)})});var YQ=I(()=>{"use strict";var vWe=V(),XQ=He(),WC=Ze(),gWe=Ir(),yWe=pg(),_We=gd(),xWe=Xc(),bWe=Dt(),wWe=xWe(function(){for(var e=this.iterator,t=this.next,n,u;this.remaining;)if(this.remaining--,n=WC(XQ(t,e)),u=this.done=!!n.done,u)return;if(n=WC(XQ(t,e)),u=this.done=!!n.done,!u)return n.value});vWe({target:"Iterator",proto:!0,real:!0,forced:bWe},{drop:function(t){WC(this);var n=_We(yWe(+t));return new wWe(gWe(this),{remaining:n})}})});var JQ=I(()=>{"use strict";var SWe=V(),qWe=Rr(),IWe=bt(),EWe=Ze(),TWe=Ir();SWe({target:"Iterator",proto:!0,real:!0},{every:function(t){EWe(this),IWe(t);var n=TWe(this),u=0;return!qWe(n,function(c,s){if(!t(c,u++))return s()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var eee=I(()=>{"use strict";var AWe=V(),PWe=He(),CWe=bt(),QQ=Ze(),MWe=Ir(),kWe=Xc(),OWe=ex(),RWe=Dt(),DWe=kWe(function(){for(var e=this.iterator,t=this.predicate,n=this.next,u,c,s;;){if(u=QQ(PWe(n,e)),c=this.done=!!u.done,c)return;if(s=u.value,OWe(e,t,[s,this.counter++],!0))return s}});AWe({target:"Iterator",proto:!0,real:!0,forced:RWe},{filter:function(t){return QQ(this),CWe(t),new DWe(MWe(this),{predicate:t})}})});var tee=I(()=>{"use strict";var LWe=V(),zWe=Rr(),FWe=bt(),NWe=Ze(),BWe=Ir();LWe({target:"Iterator",proto:!0,real:!0},{find:function(t){NWe(this),FWe(t);var n=BWe(this),u=0;return zWe(n,function(c,s){if(t(c,u++))return s(c)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var ZC=I((uIt,iee)=>{"use strict";var jWe=He(),ree=Ze(),UWe=Ir(),$We=Os();iee.exports=function(e,t){(!t||typeof e!="string")&&ree(e);var n=$We(e);return UWe(ree(n!==void 0?jWe(n,e):e))}});var oee=I(()=>{"use strict";var VWe=V(),nee=He(),GWe=bt(),KC=Ze(),HWe=Ir(),WWe=ZC(),ZWe=Xc(),aee=Rs(),KWe=Dt(),XWe=ZWe(function(){for(var e=this.iterator,t=this.mapper,n,u;;){if(u=this.inner)try{if(n=KC(nee(u.next,u.iterator)),!n.done)return n.value;this.inner=null}catch(c){aee(e,"throw",c)}if(n=KC(nee(this.next,e)),this.done=!!n.done)return;try{this.inner=WWe(t(n.value,this.counter++),!1)}catch(c){aee(e,"throw",c)}}});VWe({target:"Iterator",proto:!0,real:!0,forced:KWe},{flatMap:function(t){return KC(this),GWe(t),new XWe(HWe(this),{mapper:t,inner:null})}})});var see=I(()=>{"use strict";var YWe=V(),JWe=Rr(),QWe=bt(),e7e=Ze(),t7e=Ir();YWe({target:"Iterator",proto:!0,real:!0},{forEach:function(t){e7e(this),QWe(t);var n=t7e(this),u=0;JWe(n,function(c){t(c,u++)},{IS_RECORD:!0})}})});var uee=I(()=>{"use strict";var r7e=V(),i7e=He(),n7e=Lt(),a7e=Xi(),o7e=Rc().IteratorPrototype,s7e=Xc(),u7e=ZC(),l7e=Dt(),c7e=s7e(function(){return i7e(this.next,this.iterator)},!0);r7e({target:"Iterator",stat:!0,forced:l7e},{from:function(t){var n=u7e(typeof t=="string"?n7e(t):t,!0);return a7e(o7e,n.iterator)?n.iterator:new c7e(n)}})});var lee=I(()=>{"use strict";var h7e=V(),f7e=HC();h7e({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:f7e})});var cee=I(()=>{"use strict";var d7e=V(),p7e=GC(),m7e=Dt();d7e({target:"Iterator",proto:!0,real:!0,forced:m7e},{map:p7e})});var fee=I(()=>{"use strict";var v7e=V(),hee=$1(),g7e=TypeError;v7e({target:"Iterator",stat:!0,forced:!0},{range:function(t,n,u){if(typeof t=="number")return new hee(t,n,u,"number",0,1);if(typeof t=="bigint")return new hee(t,n,u,"bigint",BigInt(0),BigInt(1));throw new g7e("Incorrect Iterator.range arguments")}})});var dee=I(()=>{"use strict";var y7e=V(),_7e=Rr(),x7e=bt(),b7e=Ze(),w7e=Ir(),S7e=TypeError;y7e({target:"Iterator",proto:!0,real:!0},{reduce:function(t){b7e(this),x7e(t);var n=w7e(this),u=arguments.length<2,c=u?void 0:arguments[1],s=0;if(_7e(n,function(_){u?(u=!1,c=_):c=t(c,_,s),s++},{IS_RECORD:!0}),u)throw new S7e("Reduce of empty iterator with no initial value");return c}})});var pee=I(()=>{"use strict";var q7e=V(),I7e=Rr(),E7e=bt(),T7e=Ze(),A7e=Ir();q7e({target:"Iterator",proto:!0,real:!0},{some:function(t){T7e(this),E7e(t);var n=A7e(this),u=0;return I7e(n,function(c,s){if(t(c,u++))return s()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var vee=I(()=>{"use strict";var P7e=V(),C7e=He(),mee=Ze(),M7e=Ir(),k7e=pg(),O7e=gd(),R7e=Xc(),D7e=Rs(),L7e=Dt(),z7e=R7e(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,D7e(e,"normal",void 0);var t=mee(C7e(this.next,e)),n=this.done=!!t.done;if(!n)return t.value});P7e({target:"Iterator",proto:!0,real:!0,forced:L7e},{take:function(t){mee(this);var n=O7e(k7e(+t));return new z7e(M7e(this),{remaining:n})}})});var gee=I(()=>{"use strict";var F7e=V(),N7e=Ze(),B7e=Rr(),j7e=Ir(),U7e=[].push;F7e({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return B7e(j7e(N7e(this)),U7e,{that:t,IS_RECORD:!0}),t}})});var _ee=I(()=>{"use strict";var $7e=V(),V7e=Ze(),G7e=cg(),H7e=AC(),yee=Ir(),W7e=Dt();$7e({target:"Iterator",proto:!0,real:!0,forced:W7e},{toAsync:function(){return new H7e(yee(new G7e(yee(V7e(this)))))}})});var XC=I((MIt,xee)=>{"use strict";var Z7e=Oe();xee.exports=!Z7e(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var YC=I((kIt,bee)=>{"use strict";var K7e=It(),X7e=Yt().get;bee.exports=function(t){if(!K7e(t))return!1;var n=X7e(t);return!!n&&n.type==="RawJSON"}});var wee=I(()=>{"use strict";var Y7e=V(),J7e=XC(),Q7e=YC();Y7e({target:"JSON",stat:!0,forced:!J7e},{isRawJSON:Q7e})});var QC=I((DIt,Eee)=>{"use strict";var JC=Pe(),eZe=Mt(),K1=SyntaxError,tZe=parseInt,rZe=String.fromCharCode,iZe=JC("".charAt),See=JC("".slice),qee=JC(/./.exec),Iee={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},nZe=/^[\da-f]{4}$/i,aZe=/^[\u0000-\u001F]$/;Eee.exports=function(e,t){for(var n=!0,u="";t<e.length;){var c=iZe(e,t);if(c==="\\"){var s=See(e,t,t+2);if(eZe(Iee,s))u+=Iee[s],t+=2;else if(s==="\\u"){t+=2;var _=See(e,t,t+4);if(!qee(nZe,_))throw new K1("Bad Unicode escape at: "+t);u+=rZe(tZe(_,16)),t+=4}else throw new K1("Unknown escape sequence: \""+s+"\"")}else if(c==="\""){n=!1,t++;break}else{if(qee(aZe,c))throw new K1("Bad control character in string literal at: "+t);u+=c,t++}}if(n)throw new K1("Unterminated string at: "+t);return{value:u,end:t}}});var Ree=I(()=>{"use strict";var oZe=V(),sZe=ft(),sM=it(),uZe=xt(),X1=Pe(),lZe=He(),kee=qt(),cZe=It(),hZe=lo(),fZe=Mt(),dZe=St(),Tee=Nt(),nM=ka(),Oee=Oe(),pZe=QC(),mZe=tl(),Aee=sM.JSON,vZe=sM.Number,Ad=sM.SyntaxError,uM=Aee&&Aee.parse,gZe=uZe("Object","keys"),yZe=Object.getOwnPropertyDescriptor,ki=X1("".charAt),eM=X1("".slice),tM=X1(/./.exec),Pee=X1([].push),rM=/^\d$/,_Ze=/^[1-9]$/,xZe=/^(?:-|\d)$/,yg=/^[\t\n\r ]$/,iM=0,Cee=1,bZe=function(e,t){e=dZe(e);var n=new oM(e,0,""),u=n.parse(),c=u.value,s=n.skip(yg,u.end);if(s<e.length)throw new Ad("Unexpected extra character: \""+ki(e,s)+"\" after the parsed data at: "+s);return kee(t)?aM({"":c},"",t,u):c},aM=function(e,t,n,u){var c=e[t],s=u&&c===u.value,_=s&&typeof u.source=="string"?{source:u.source}:{},w,E,P,C,B;if(cZe(c)){var $=hZe(c),re=s?u.nodes:$?[]:{};if($)for(w=re.length,P=Tee(c),C=0;C<P;C++)Mee(c,C,aM(c,""+C,n,C<w?re[C]:void 0));else for(E=gZe(c),P=Tee(E),C=0;C<P;C++)B=E[C],Mee(c,B,aM(c,B,n,fZe(re,B)?re[B]:void 0))}return lZe(n,e,t,c,_)},Mee=function(e,t,n){if(sZe){var u=yZe(e,t);if(u&&!u.configurable)return}n===void 0?delete e[t]:nM(e,t,n)},wZe=function(e,t,n,u){this.value=e,this.end=t,this.source=n,this.nodes=u},oM=function(e,t){this.source=e,this.index=t};oM.prototype={fork:function(e){return new oM(this.source,e)},parse:function(){var e=this.source,t=this.skip(yg,this.index),n=this.fork(t),u=ki(e,t);if(tM(xZe,u))return n.number();switch(u){case"{":return n.object();case"[":return n.array();case"\"":return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null);}throw new Ad("Unexpected character: \""+u+"\" at: "+t)},node:function(e,t,n,u,c){return new wZe(t,u,e?null:eM(this.source,n,u),c)},object:function(){for(var e=this.source,t=this.index+1,n=!1,u={},c={};t<e.length;){if(t=this.until(["\"","}"],t),ki(e,t)==="}"&&!n){t++;break}var s=this.fork(t).string(),_=s.value;t=s.end,t=this.until([":"],t)+1,t=this.skip(yg,t),s=this.fork(t).parse(),nM(c,_,s),nM(u,_,s.value),t=this.until([",","}"],s.end);var w=ki(e,t);if(w===",")n=!0,t++;else if(w==="}"){t++;break}}return this.node(Cee,u,this.index,t,c)},array:function(){for(var e=this.source,t=this.index+1,n=!1,u=[],c=[];t<e.length;){if(t=this.skip(yg,t),ki(e,t)==="]"&&!n){t++;break}var s=this.fork(t).parse();if(Pee(c,s),Pee(u,s.value),t=this.until([",","]"],s.end),ki(e,t)===",")n=!0,t++;else if(ki(e,t)==="]"){t++;break}}return this.node(Cee,u,this.index,t,c)},string:function(){var e=this.index,t=pZe(this.source,this.index+1);return this.node(iM,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if(ki(e,n)==="-"&&n++,ki(e,n)==="0")n++;else if(tM(_Ze,ki(e,n)))n=this.skip(rM,++n);else throw new Ad("Failed to parse number at: "+n);if(ki(e,n)==="."&&(n=this.skip(rM,++n)),ki(e,n)==="e"||ki(e,n)==="E"){n++,(ki(e,n)==="+"||ki(e,n)==="-")&&n++;var u=n;if(n=this.skip(rM,n),u===n)throw new Ad("Failed to parse number's exponent value at: "+n)}return this.node(iM,vZe(eM(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,u=n+t.length;if(eM(this.source,n,u)!==t)throw new Ad("Failed to parse value at: "+n);return this.node(iM,e,n,u)},skip:function(e,t){for(var n=this.source;t<n.length&&tM(e,ki(n,t));t++);return t},until:function(e,t){t=this.skip(yg,t);for(var n=ki(this.source,t),u=0;u<e.length;u++)if(e[u]===n)return t;throw new Ad("Unexpected character: \""+n+"\" at: "+t)}};var SZe=Oee(function(){var e="9007199254740993",t;return uM(e,function(n,u,c){t=c.source}),t!==e}),qZe=mZe&&!Oee(function(){return 1/uM("-0 \t")!==-1/0});oZe({target:"JSON",stat:!0,forced:SZe},{parse:function(t,n){return qZe&&!kee(n)?uM(t):bZe(t,n)}})});var $ee=I(()=>{"use strict";var jee=V(),IZe=Bs(),Uee=XC(),Y1=xt(),EZe=He(),J1=Pe(),TZe=qt(),AZe=YC(),PZe=St(),CZe=ka(),MZe=QC(),kZe=FE(),OZe=il(),RZe=Yt().set,DZe=String,Dee=SyntaxError,LZe=Y1("JSON","parse"),Lee=Y1("JSON","stringify"),zZe=Y1("Object","create"),FZe=Y1("Object","freeze"),cM=J1("".charAt),lM=J1("".slice),zee=J1(/./.exec),NZe=J1([].push),hM=OZe(),Fee=hM.length,Nee="Unacceptable as raw JSON",Bee=/^[\t\n\r ]$/;jee({target:"JSON",stat:!0,forced:!Uee},{rawJSON:function(t){var n=PZe(t);if(n===""||zee(Bee,cM(n,0))||zee(Bee,cM(n,n.length-1)))throw new Dee(Nee);var u=LZe(n);if(typeof u=="object"&&u!==null)throw new Dee(Nee);var c=zZe(null);return RZe(c,{type:"RawJSON"}),CZe(c,"rawJSON",n),IZe?FZe(c):c}});Lee&&jee({target:"JSON",stat:!0,arity:3,forced:!Uee},{stringify:function(t,n,u){var c=kZe(n),s=[],_=Lee(t,function(re,xe){var ye=TZe(c)?EZe(c,this,DZe(re),xe):xe;return AZe(ye)?hM+(NZe(s,ye.rawJSON)-1):ye},u);if(typeof _!="string")return _;for(var w="",E=_.length,P=0;P<E;P++){var C=cM(_,P);if(C==="\""){var B=MZe(_,++P).end-1,$=lM(_,P,B);w+=lM($,0,Fee)===hM?s[lM($,Fee)]:"\""+$+"\"",P=B}else w+=C}return w}})});var mn=I((BIt,Vee)=>{"use strict";var BZe=pn().has;Vee.exports=function(e){return BZe(e),e}});var Gee=I(()=>{"use strict";var jZe=V(),UZe=mn(),$Ze=pn().remove;jZe({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=UZe(this),n=!0,u,c=0,s=arguments.length;c<s;c++)u=$Ze(t,arguments[c]),n=n&&u;return!!n}})});var Wee=I(()=>{"use strict";var VZe=V(),GZe=mn(),fM=pn(),HZe=fM.get,WZe=fM.has,Hee=fM.set;VZe({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=GZe(this),c,s;return WZe(u,t)?(c=HZe(u,t),"update"in n&&(c=n.update(c,t,u),Hee(u,t,c)),c):(s=n.insert(t,u),Hee(u,t,s),s)}})});var Zee=I(()=>{"use strict";var ZZe=V(),KZe=or(),XZe=mn(),YZe=Na();ZZe({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var n=XZe(this),u=KZe(t,arguments.length>1?arguments[1]:void 0);return YZe(n,function(c,s){if(!u(c,s,n))return!1},!0)!==!1}})});var Xee=I(()=>{"use strict";var JZe=V(),QZe=or(),eKe=mn(),Kee=pn(),tKe=Na(),rKe=Kee.Map,iKe=Kee.set;JZe({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var n=eKe(this),u=QZe(t,arguments.length>1?arguments[1]:void 0),c=new rKe;return tKe(n,function(s,_){u(s,_,n)&&iKe(c,_,s)}),c}})});var Yee=I(()=>{"use strict";var nKe=V(),aKe=or(),oKe=mn(),sKe=Na();nKe({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var n=oKe(this),u=aKe(t,arguments.length>1?arguments[1]:void 0),c=sKe(n,function(s,_){if(u(s,_,n))return{value:s}},!0);return c&&c.value}})});var Jee=I(()=>{"use strict";var uKe=V(),lKe=or(),cKe=mn(),hKe=Na();uKe({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var n=cKe(this),u=lKe(t,arguments.length>1?arguments[1]:void 0),c=hKe(n,function(s,_){if(u(s,_,n))return{key:_}},!0);return c&&c.key}})});var _g=I((QIt,tte)=>{"use strict";var fKe=or(),dKe=He(),pKe=bt(),mKe=Yf(),vKe=Zr(),Qee=Rr(),ete=[].push;tte.exports=function(t){var n=arguments.length,u=n>1?arguments[1]:void 0,c,s,_,w;return mKe(this),c=u!==void 0,c&&pKe(u),vKe(t)?new this:(s=[],c?(_=0,w=fKe(u,n>2?arguments[2]:void 0),Qee(t,function(E){dKe(ete,s,w(E,_++))})):Qee(t,ete,{that:s}),new this(s))}});var rte=I(()=>{"use strict";var gKe=V(),yKe=_g();gKe({target:"Map",stat:!0,forced:!0},{from:yKe})});var ite=I(()=>{"use strict";var _Ke=V(),xKe=Pe(),bKe=bt(),wKe=vr(),SKe=Rr(),Q1=pn(),qKe=Dt(),IKe=Q1.Map,EKe=Q1.has,TKe=Q1.get,AKe=Q1.set,PKe=xKe([].push);_Ke({target:"Map",stat:!0,forced:qKe},{groupBy:function(t,n){wKe(t),bKe(n);var u=new IKe,c=0;return SKe(t,function(s){var _=n(s,c++);EKe(u,_)?PKe(TKe(u,_),s):AKe(u,_,[s])}),u}})});var ate=I((nEt,nte)=>{"use strict";nte.exports=function(e,t){return e===t||e!==e&&t!==t}});var ote=I(()=>{"use strict";var CKe=V(),MKe=ate(),kKe=mn(),OKe=Na();CKe({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return OKe(kKe(this),function(n){if(MKe(n,t))return!0},!0)===!0}})});var ute=I(()=>{"use strict";var RKe=V(),DKe=He(),LKe=Rr(),zKe=qt(),ste=bt(),FKe=pn().Map;RKe({target:"Map",stat:!0,forced:!0},{keyBy:function(t,n){var u=zKe(this)?this:FKe,c=new u;ste(n);var s=ste(c.set);return LKe(t,function(_){DKe(s,c,n(_),_)}),c}})});var lte=I(()=>{"use strict";var NKe=V(),BKe=mn(),jKe=Na();NKe({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var n=jKe(BKe(this),function(u,c){if(u===t)return{key:c}},!0);return n&&n.key}})});var hte=I(()=>{"use strict";var UKe=V(),$Ke=or(),VKe=mn(),cte=pn(),GKe=Na(),HKe=cte.Map,WKe=cte.set;UKe({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var n=VKe(this),u=$Ke(t,arguments.length>1?arguments[1]:void 0),c=new HKe;return GKe(n,function(s,_){WKe(c,u(s,_,n),s)}),c}})});var dte=I(()=>{"use strict";var ZKe=V(),KKe=or(),XKe=mn(),fte=pn(),YKe=Na(),JKe=fte.Map,QKe=fte.set;ZKe({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var n=XKe(this),u=KKe(t,arguments.length>1?arguments[1]:void 0),c=new JKe;return YKe(n,function(s,_){QKe(c,_,u(s,_,n))}),c}})});var pte=I(()=>{"use strict";var eXe=V(),tXe=mn(),rXe=Rr(),iXe=pn().set;eXe({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var n=tXe(this),u=arguments.length,c=0;c<u;)rXe(arguments[c++],function(s,_){iXe(n,s,_)},{AS_ENTRIES:!0});return n}})});var xg=I((gEt,mte)=>{"use strict";var nXe=Ms();mte.exports=function(){return new this(nXe(arguments))}});var vte=I(()=>{"use strict";var aXe=V(),oXe=xg();aXe({target:"Map",stat:!0,forced:!0},{of:oXe})});var gte=I(()=>{"use strict";var sXe=V(),uXe=bt(),lXe=mn(),cXe=Na(),hXe=TypeError;sXe({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=lXe(this),u=arguments.length<2,c=u?void 0:arguments[1];if(uXe(t),cXe(n,function(s,_){u?(u=!1,c=s):c=t(c,s,_,n)}),u)throw new hXe("Reduce of empty map with no initial value");return c}})});var yte=I(()=>{"use strict";var fXe=V(),dXe=or(),pXe=mn(),mXe=Na();fXe({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var n=pXe(this),u=dXe(t,arguments.length>1?arguments[1]:void 0);return mXe(n,function(c,s){if(u(c,s,n))return!0},!0)===!0}})});var xte=I(()=>{"use strict";var vXe=V(),_te=bt(),gXe=mn(),dM=pn(),yXe=TypeError,_Xe=dM.get,xXe=dM.has,bXe=dM.set;vXe({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,n){var u=gXe(this),c=arguments.length;_te(n);var s=xXe(u,t);if(!s&&c<3)throw new yXe("Updating absent value");var _=s?_Xe(u,t):_te(c>2?arguments[2]:void 0)(t,u);return bXe(u,t,n(_,t,u)),u}})});var rb=I((EEt,bte)=>{"use strict";var eb=He(),pM=bt(),tb=qt(),wXe=Ze(),SXe=TypeError;bte.exports=function(t,n){var u=wXe(this),c=pM(u.get),s=pM(u.has),_=pM(u.set),w=arguments.length>2?arguments[2]:void 0,E;if(!tb(n)&&!tb(w))throw new SXe("At least one callback required");return eb(s,u,t)?(E=eb(c,u,t),tb(n)&&(E=n(E),eb(_,u,t,E))):tb(w)&&(E=w(),eb(_,u,t,E)),E}});var wte=I(()=>{"use strict";var qXe=V(),IXe=rb();qXe({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:IXe})});var Ste=I(()=>{"use strict";var EXe=V(),TXe=rb();EXe({target:"Map",proto:!0,real:!0,forced:!0},{upsert:TXe})});var qte=I(()=>{"use strict";var AXe=V(),PXe=Math.min,CXe=Math.max;AXe({target:"Math",stat:!0,forced:!0},{clamp:function(t,n,u){return PXe(u,CXe(n,t))}})});var Ite=I(()=>{"use strict";var MXe=V();MXe({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var Ete=I(()=>{"use strict";var kXe=V(),OXe=180/Math.PI;kXe({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*OXe}})});var mM=I((zEt,Tte)=>{"use strict";Tte.exports=Math.scale||function(t,n,u,c,s){var _=+t,w=+n,E=+u,P=+c,C=+s;return _!==_||w!==w||E!==E||P!==P||C!==C?NaN:_===1/0||_===-1/0?_:(_-w)*(C-P)/(E-w)+P}});var Ate=I(()=>{"use strict";var RXe=V(),DXe=mM(),LXe=cx();RXe({target:"Math",stat:!0,forced:!0},{fscale:function(t,n,u,c,s){return LXe(DXe(t,n,u,c,s))}})});var Pte=I(()=>{"use strict";var zXe=V(),FXe=LC();zXe({target:"Math",stat:!0},{f16round:FXe})});var Cte=I(()=>{"use strict";var NXe=V();NXe({target:"Math",stat:!0,forced:!0},{iaddh:function(t,n,u,c){var s=t>>>0,_=n>>>0,w=u>>>0;return _+(c>>>0)+((s&w|(s|w)&~(s+w>>>0))>>>31)|0}})});var Mte=I(()=>{"use strict";var BXe=V();BXe({target:"Math",stat:!0,forced:!0},{imulh:function(t,n){var u=65535,c=+t,s=+n,_=c&u,w=s&u,E=c>>16,P=s>>16,C=(E*w>>>0)+(_*w>>>16);return E*P+(C>>16)+((_*P>>>0)+(C&u)>>16)}})});var kte=I(()=>{"use strict";var jXe=V();jXe({target:"Math",stat:!0,forced:!0},{isubh:function(t,n,u,c){var s=t>>>0,_=n>>>0,w=u>>>0;return _-(c>>>0)-((~s&w|~(s^w)&s-w>>>0)>>>31)|0}})});var Ote=I(()=>{"use strict";var UXe=V();UXe({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var Rte=I(()=>{"use strict";var $Xe=V(),VXe=Math.PI/180;$Xe({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*VXe}})});var Dte=I(()=>{"use strict";var GXe=V(),HXe=mM();GXe({target:"Math",stat:!0,forced:!0},{scale:HXe})});var Nte=I(()=>{"use strict";var WXe=V(),ZXe=Ze(),KXe=I2(),XXe=ul(),YXe=Mi(),Lte=Yt(),zte="Seeded Random",Fte=zte+" Generator",JXe="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",QXe=Lte.set,eYe=Lte.getterFor(Fte),tYe=TypeError,rYe=XXe(function(t){QXe(this,{type:Fte,seed:t%2147483647})},zte,function(){var t=eYe(this),n=t.seed=(t.seed*1103515245+12345)%2147483647;return YXe((n&1073741823)/1073741823,!1)});WXe({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var n=ZXe(t).seed;if(!KXe(n))throw new tYe(JXe);return new rYe(n)}})});var Bte=I(()=>{"use strict";var iYe=V();iYe({target:"Math",stat:!0,forced:!0},{signbit:function(t){var n=+t;return n===n&&n===0?1/n===-1/0:n<0}})});var jte=I(()=>{"use strict";var nYe=V();nYe({target:"Math",stat:!0,forced:!0},{umulh:function(t,n){var u=65535,c=+t,s=+n,_=c&u,w=s&u,E=c>>>16,P=s>>>16,C=(E*w>>>0)+(_*w>>>16);return E*P+(C>>>16)+((_*P>>>0)+(C&u)>>>16)}})});var $te=I(()=>{"use strict";var aYe=V(),nb=Pe(),oYe=gr(),sYe=Ox(),ib="Invalid number representation",uYe="Invalid radix",lYe=RangeError,vM=SyntaxError,cYe=TypeError,Ute=/^[\da-z]+$/,hYe=nb("".charAt),fYe=nb(Ute.exec),dYe=nb(1 .toString),pYe=nb("".slice);aYe({target:"Number",stat:!0,forced:!0},{fromString:function(t,n){var u=1,c,s;if(typeof t!="string")throw new cYe(ib);if(!t.length)throw new vM(ib);if(hYe(t,0)==="-"&&(u=-1,t=pYe(t,1),!t.length))throw new vM(ib);if(c=n===void 0?10:oYe(n),c<2||c>36)throw new lYe(uYe);if(!fYe(Ute,t)||dYe(s=sYe(t,c),c)!==t)throw new vM(ib);return u*s}})});var Vte=I(()=>{"use strict";var mYe=V(),vYe=$1();mYe({target:"Number",stat:!0,forced:!0},{range:function(t,n,u){return new vYe(t,n,u,"number",0,1)}})});var Gte=I(()=>{"use strict";L2()});var ob=I((fTt,Zte)=>{"use strict";var Hte=Yt(),gYe=ul(),ab=Mi(),yYe=Mt(),_Ye=Ic(),xYe=Lt(),Wte="Object Iterator",bYe=Hte.set,wYe=Hte.getterFor(Wte);Zte.exports=gYe(function(t,n){var u=xYe(t);bYe(this,{type:Wte,mode:n,object:u,keys:_Ye(u),index:0})},"Object",function(){for(var t=wYe(this),n=t.keys;;){if(n===null||t.index>=n.length)return t.object=t.keys=null,ab(void 0,!0);var u=n[t.index++],c=t.object;if(yYe(c,u)){switch(t.mode){case"keys":return ab(u,!1);case"values":return ab(c[u],!1);}return ab([u,c[u]],!1)}}})});var Kte=I(()=>{"use strict";var SYe=V(),qYe=ob();SYe({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new qYe(t,"entries")}})});var Xte=I(()=>{"use strict";var IYe=V(),EYe=ob();IYe({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new EYe(t,"keys")}})});var Yte=I(()=>{"use strict";var TYe=V(),AYe=ob();TYe({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new AYe(t,"values")}})});var Jte=I(()=>{"use strict";var PYe=V(),CYe=xt(),MYe=Pe(),kYe=bt(),OYe=vr(),RYe=so(),DYe=Rr(),LYe=CYe("Object","create"),zYe=MYe([].push);PYe({target:"Object",stat:!0},{groupBy:function(t,n){OYe(t),kYe(n);var u=LYe(null),c=0;return DYe(t,function(s){var _=RYe(n(s,c++));_ in u?zYe(u[_],s):u[_]=[s]}),u}})});var ure=I(()=>{"use strict";var FYe=V(),sb=He(),bg=ft(),NYe=cl(),Qte=bt(),BYe=Ze(),jYe=Ji(),ere=qt(),UYe=Zr(),$Ye=It(),ub=jr(),VYe=tr(),gM=La(),tre=qr(),Pd=nA(),GYe=pt(),rre=Yt(),HYe=GYe("observable"),yM="Observable",ire="Subscription",nre="SubscriptionObserver",_M=rre.getterFor,xM=rre.set,WYe=_M(yM),are=_M(ire),lb=_M(nre),ore=function(e){this.observer=BYe(e),this.cleanup=void 0,this.subscriptionObserver=void 0};ore.prototype={type:ire,clean:function(){var e=this.cleanup;if(e){this.cleanup=void 0;try{e()}catch(t){Pd(t)}}},close:function(){if(!bg){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=void 0},isClosed:function(){return this.observer===void 0}};var bM=function(e,t){var n=xM(this,new ore(e)),u;bg||(this.closed=!1);try{(u=ub(e,"start"))&&sb(u,e,this)}catch(w){Pd(w)}if(!n.isClosed()){var c=n.subscriptionObserver=new wM(n);try{var s=t(c),_=s;UYe(s)||(n.cleanup=ere(s.unsubscribe)?function(){_.unsubscribe()}:Qte(s))}catch(w){c.error(w);return}n.isClosed()&&n.clean()}};bM.prototype=gM({},{unsubscribe:function(){var t=are(this);t.isClosed()||(t.close(),t.clean())}});bg&&tre(bM.prototype,"closed",{configurable:!0,get:function(){return are(this).isClosed()}});var wM=function(e){xM(this,{type:nre,subscriptionState:e}),bg||(this.closed=!1)};wM.prototype=gM({},{next:function(t){var n=lb(this).subscriptionState;if(!n.isClosed()){var u=n.observer;try{var c=ub(u,"next");c&&sb(c,u,t)}catch(s){Pd(s)}}},error:function(t){var n=lb(this).subscriptionState;if(!n.isClosed()){var u=n.observer;n.close();try{var c=ub(u,"error");c?sb(c,u,t):Pd(t)}catch(s){Pd(s)}n.clean()}},complete:function(){var t=lb(this).subscriptionState;if(!t.isClosed()){var n=t.observer;t.close();try{var u=ub(n,"complete");u&&sb(u,n)}catch(c){Pd(c)}t.clean()}}});bg&&tre(wM.prototype,"closed",{configurable:!0,get:function(){return lb(this).subscriptionState.isClosed()}});var sre=function(t){jYe(this,SM),xM(this,{type:yM,subscriber:Qte(t)})},SM=sre.prototype;gM(SM,{subscribe:function(t){var n=arguments.length;return new bM(ere(t)?{next:t,error:n>1?arguments[1]:void 0,complete:n>2?arguments[2]:void 0}:$Ye(t)?t:{},WYe(this).subscriber)}});VYe(SM,HYe,function(){return this});FYe({global:!0,constructor:!0,forced:!0},{Observable:sre});NYe(yM)});var cre=I(()=>{"use strict";var ZYe=V(),KYe=xt(),XYe=He(),lre=Ze(),YYe=co(),JYe=ol(),QYe=jr(),eJe=Rr(),tJe=pt(),rJe=tJe("observable");ZYe({target:"Observable",stat:!0,forced:!0},{from:function(t){var n=YYe(this)?this:KYe("Observable"),u=QYe(lre(t),rJe);if(u){var c=lre(XYe(u,t));return c.constructor===n?c:new n(function(_){return c.subscribe(_)})}var s=JYe(t);return new n(function(_){eJe(s,function(w,E){if(_.next(w),_.closed)return E()},{IS_ITERATOR:!0,INTERRUPTED:!0}),_.complete()})}})});var fre=I(()=>{"use strict";var iJe=V(),hre=xt(),nJe=co(),aJe=hre("Array");iJe({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=nJe(this)?this:hre("Observable"),n=arguments.length,u=aJe(n),c=0;c<n;)u[c]=arguments[c++];return new t(function(s){for(var _=0;_<n;_++)if(s.next(u[_]),s.closed)return;s.complete()})}})});var dre=I(()=>{"use strict";ure();cre();fre()});var pre=I(()=>{"use strict";_A()});var mre=I(()=>{"use strict";xA()});var vre=I(()=>{"use strict";var oJe=V(),sJe=Vo(),uJe=gl();oJe({target:"Promise",stat:!0,forced:!0},{try:function(e){var t=sJe.f(this),n=uJe(e);return(n.error?t.reject:t.resolve)(n.value),t.promise}})});var gre=I(()=>{"use strict";var lJe=V(),cJe=Vo();lJe({target:"Promise",stat:!0},{withResolvers:function(){var t=cJe.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var Zo=I((zTt,bre)=>{"use strict";Ax();S1();var xre=xt(),hJe=Pe(),fJe=Fo(),yre=xre("Map"),dJe=xre("WeakMap"),pJe=hJe([].push),_re=fJe("metadata"),qM=_re.store||(_re.store=new dJe),wg=function(e,t,n){var u=qM.get(e);if(!u){if(!n)return;qM.set(e,u=new yre)}var c=u.get(t);if(!c){if(!n)return;u.set(t,c=new yre)}return c},mJe=function(e,t,n){var u=wg(t,n,!1);return u===void 0?!1:u.has(e)},vJe=function(e,t,n){var u=wg(t,n,!1);return u===void 0?void 0:u.get(e)},gJe=function(e,t,n,u){wg(n,u,!0).set(e,t)},yJe=function(e,t){var n=wg(e,t,!1),u=[];return n&&n.forEach(function(c,s){pJe(u,s)}),u},_Je=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};bre.exports={store:qM,getMap:wg,has:mJe,get:vJe,set:gJe,keys:yJe,toKey:_Je}});var Sre=I(()=>{"use strict";var xJe=V(),wre=Zo(),bJe=Ze(),wJe=wre.toKey,SJe=wre.set;xJe({target:"Reflect",stat:!0},{defineMetadata:function(t,n,u){var c=arguments.length<4?void 0:wJe(arguments[3]);SJe(t,n,bJe(u),c)}})});var Ire=I(()=>{"use strict";var qJe=V(),IM=Zo(),IJe=Ze(),EJe=IM.toKey,TJe=IM.getMap,qre=IM.store;qJe({target:"Reflect",stat:!0},{deleteMetadata:function(t,n){var u=arguments.length<3?void 0:EJe(arguments[2]),c=TJe(IJe(n),u,!1);if(c===void 0||!c.delete(t))return!1;if(c.size)return!0;var s=qre.get(n);return s.delete(u),!!s.size||qre.delete(n)}})});var Tre=I(()=>{"use strict";var AJe=V(),EM=Zo(),PJe=Ze(),CJe=Xr(),MJe=EM.has,kJe=EM.get,OJe=EM.toKey,Ere=function(e,t,n){var u=MJe(e,t,n);if(u)return kJe(e,t,n);var c=CJe(t);return c!==null?Ere(e,c,n):void 0};AJe({target:"Reflect",stat:!0},{getMetadata:function(t,n){var u=arguments.length<3?void 0:OJe(arguments[2]);return Ere(t,PJe(n),u)}})});var Mre=I(()=>{"use strict";var RJe=V(),Are=Pe(),Pre=Zo(),DJe=Ze(),LJe=Xr(),zJe=M1(),FJe=Are(zJe),NJe=Are([].concat),BJe=Pre.keys,jJe=Pre.toKey,Cre=function(e,t){var n=BJe(e,t),u=LJe(e);if(u===null)return n;var c=Cre(u,t);return c.length?n.length?FJe(NJe(n,c)):c:n};RJe({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var n=arguments.length<2?void 0:jJe(arguments[1]);return Cre(DJe(t),n)}})});var Ore=I(()=>{"use strict";var UJe=V(),kre=Zo(),$Je=Ze(),VJe=kre.get,GJe=kre.toKey;UJe({target:"Reflect",stat:!0},{getOwnMetadata:function(t,n){var u=arguments.length<3?void 0:GJe(arguments[2]);return VJe(t,$Je(n),u)}})});var Dre=I(()=>{"use strict";var HJe=V(),Rre=Zo(),WJe=Ze(),ZJe=Rre.keys,KJe=Rre.toKey;HJe({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var n=arguments.length<2?void 0:KJe(arguments[1]);return ZJe(WJe(t),n)}})});var Fre=I(()=>{"use strict";var XJe=V(),Lre=Zo(),YJe=Ze(),JJe=Xr(),QJe=Lre.has,eQe=Lre.toKey,zre=function(e,t,n){var u=QJe(e,t,n);if(u)return!0;var c=JJe(t);return c!==null?zre(e,c,n):!1};XJe({target:"Reflect",stat:!0},{hasMetadata:function(t,n){var u=arguments.length<3?void 0:eQe(arguments[2]);return zre(t,YJe(n),u)}})});var Bre=I(()=>{"use strict";var tQe=V(),Nre=Zo(),rQe=Ze(),iQe=Nre.has,nQe=Nre.toKey;tQe({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,n){var u=arguments.length<3?void 0:nQe(arguments[2]);return iQe(t,rQe(n),u)}})});var Ure=I(()=>{"use strict";var aQe=V(),jre=Zo(),oQe=Ze(),sQe=jre.toKey,uQe=jre.set;aQe({target:"Reflect",stat:!0},{metadata:function(t,n){return function(c,s){uQe(t,n,oQe(c),sQe(s))}}})});var Vre=I(()=>{"use strict";var lQe=V(),$re=Pe(),cQe=St(),hQe=Nc(),fQe=$re("".charCodeAt),dQe=$re("".replace),pQe=RegExp("[!\"#$%&'()*+,\\-./:;<=>?@[\\\\\\]^`{|}~"+hQe+"]","g");lQe({target:"RegExp",stat:!0,forced:!0},{escape:function(t){var n=cQe(t),u=fQe(n,0);return(u>47&&u<58?"\\x3":"")+dQe(n,pQe,"\\$&")}})});var Qi=I((n2t,Gre)=>{"use strict";var TM=Pe(),cb=Set.prototype;Gre.exports={Set,add:TM(cb.add),has:TM(cb.has),remove:TM(cb.delete),proto:cb}});var Oi=I((a2t,Hre)=>{"use strict";var mQe=Qi().has;Hre.exports=function(e){return mQe(e),e}});var Wre=I(()=>{"use strict";var vQe=V(),gQe=Oi(),yQe=Qi().add;vQe({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=gQe(this),n=0,u=arguments.length;n<u;n++)yQe(t,arguments[n]);return t}})});var Zre=I(()=>{"use strict";var _Qe=V(),xQe=Oi(),bQe=Qi().remove;_Qe({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=xQe(this),n=!0,u,c=0,s=arguments.length;c<s;c++)u=bQe(t,arguments[c]),n=n&&u;return!!n}})});var la=I((c2t,Qre)=>{"use strict";var Kre=Pe(),wQe=Us(),Xre=Qi(),SQe=Xre.Set,Yre=Xre.proto,qQe=Kre(Yre.forEach),Jre=Kre(Yre.keys),IQe=Jre(new SQe).next;Qre.exports=function(e,t,n){return n?wQe({iterator:Jre(e),next:IQe},t):qQe(e,t)}});var hb=I((h2t,tie)=>{"use strict";var eie=Qi(),EQe=la(),TQe=eie.Set,AQe=eie.add;tie.exports=function(e){var t=new TQe;return EQe(e,function(n){AQe(t,n)}),t}});var Cd=I((f2t,rie)=>{"use strict";var PQe=_v(),CQe=Qi();rie.exports=PQe(CQe.proto,"size","get")||function(e){return e.size}});var wl=I((d2t,uie)=>{"use strict";var iie=bt(),oie=Ze(),nie=He(),MQe=gr(),kQe=Ir(),aie="Invalid size",OQe=RangeError,RQe=TypeError,DQe=Math.max,sie=function(e,t,n,u){this.set=e,this.size=t,this.has=n,this.keys=u};sie.prototype={getIterator:function(){return kQe(oie(nie(this.keys,this.set)))},includes:function(e){return nie(this.has,this.set,e)}};uie.exports=function(e){oie(e);var t=+e.size;if(t!==t)throw new RQe(aie);var n=MQe(t);if(n<0)throw new OQe(aie);return new sie(e,DQe(n,0),iie(e.has),iie(e.keys))}});var AM=I((p2t,hie)=>{"use strict";var LQe=Oi(),cie=Qi(),zQe=hb(),FQe=Cd(),NQe=wl(),BQe=la(),jQe=Us(),UQe=cie.has,lie=cie.remove;hie.exports=function(t){var n=LQe(this),u=NQe(t),c=zQe(n);return FQe(n)<=u.size?BQe(n,function(s){u.includes(s)&&lie(c,s)}):jQe(u.getIterator(),function(s){UQe(n,s)&&lie(c,s)}),c}});var Sl=I((m2t,die)=>{"use strict";var $Qe=xt(),fie=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};die.exports=function(e){var t=$Qe("Set");try{new t()[e](fie(0));try{return new t()[e](fie(-1)),!1}catch(n){return!0}}catch(n){return!1}}});var pie=I(()=>{"use strict";var VQe=V(),GQe=AM(),HQe=Sl();VQe({target:"Set",proto:!0,real:!0,forced:!HQe("difference")},{difference:GQe})});var vie=I((y2t,mie)=>{"use strict";var WQe=Rn(),ZQe=Mt(),KQe=Zr(),XQe=pt(),YQe=Oc(),JQe=XQe("iterator"),QQe=Object;mie.exports=function(e){if(KQe(e))return!1;var t=QQe(e);return t[JQe]!==void 0||"@@iterator"in t||ZQe(YQe,WQe(t))}});var ql=I((_2t,yie)=>{"use strict";var eet=xt(),gie=qt(),tet=vie(),ret=It(),iet=eet("Set"),net=function(e){return ret(e)&&typeof e.size=="number"&&gie(e.has)&&gie(e.keys)};yie.exports=function(e){return net(e)?e:tet(e)?new iet(e):e}});var _ie=I(()=>{"use strict";var aet=V(),oet=He(),set=ql(),uet=AM();aet({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return oet(uet,this,set(t))}})});var xie=I(()=>{"use strict";var cet=V(),het=or(),fet=Oi(),det=la();cet({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var n=fet(this),u=het(t,arguments.length>1?arguments[1]:void 0);return det(n,function(c){if(!u(c,c,n))return!1},!0)!==!1}})});var wie=I(()=>{"use strict";var pet=V(),met=or(),vet=Oi(),bie=Qi(),get=la(),yet=bie.Set,_et=bie.add;pet({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var n=vet(this),u=met(t,arguments.length>1?arguments[1]:void 0),c=new yet;return get(n,function(s){u(s,s,n)&&_et(c,s)}),c}})});var Sie=I(()=>{"use strict";var xet=V(),bet=or(),wet=Oi(),qet=la();xet({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var n=wet(this),u=bet(t,arguments.length>1?arguments[1]:void 0),c=qet(n,function(s){if(u(s,s,n))return{value:s}},!0);return c&&c.value}})});var qie=I(()=>{"use strict";var Iet=V(),Eet=_g();Iet({target:"Set",stat:!0,forced:!0},{from:Eet})});var CM=I((C2t,Eie)=>{"use strict";var Tet=Oi(),PM=Qi(),Aet=Cd(),Pet=wl(),Cet=la(),Met=Us(),ket=PM.Set,Iie=PM.add,Oet=PM.has;Eie.exports=function(t){var n=Tet(this),u=Pet(t),c=new ket;return Aet(n)>u.size?Met(u.getIterator(),function(s){Oet(n,s)&&Iie(c,s)}):Cet(n,function(s){u.includes(s)&&Iie(c,s)}),c}});var Tie=I(()=>{"use strict";var Ret=V(),Det=Oe(),Let=CM(),zet=Sl(),Fet=!zet("intersection")||Det(function(){return Array.from(new Set([1,2,3]).intersection(new Set([3,2])))!=="3,2"});Ret({target:"Set",proto:!0,real:!0,forced:Fet},{intersection:Let})});var Aie=I(()=>{"use strict";var Net=V(),Bet=He(),jet=ql(),Uet=CM();Net({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return Bet(Uet,this,jet(t))}})});var MM=I((D2t,Pie)=>{"use strict";var $et=Oi(),Vet=Qi().has,Get=Cd(),Het=wl(),Wet=la(),Zet=Us(),Ket=Rs();Pie.exports=function(t){var n=$et(this),u=Het(t);if(Get(n)<=u.size)return Wet(n,function(s){if(u.includes(s))return!1},!0)!==!1;var c=u.getIterator();return Zet(c,function(s){if(Vet(n,s))return Ket(c,"normal",!1)})!==!1}});var Cie=I(()=>{"use strict";var Xet=V(),Yet=MM(),Jet=Sl();Xet({target:"Set",proto:!0,real:!0,forced:!Jet("isDisjointFrom")},{isDisjointFrom:Yet})});var Mie=I(()=>{"use strict";var Qet=V(),ett=He(),ttt=ql(),rtt=MM();Qet({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return ett(rtt,this,ttt(t))}})});var kM=I((B2t,kie)=>{"use strict";var itt=Oi(),ntt=Cd(),att=la(),ott=wl();kie.exports=function(t){var n=itt(this),u=ott(t);return ntt(n)>u.size?!1:att(n,function(c){if(!u.includes(c))return!1},!0)!==!1}});var Oie=I(()=>{"use strict";var stt=V(),utt=kM(),ltt=Sl();stt({target:"Set",proto:!0,real:!0,forced:!ltt("isSubsetOf")},{isSubsetOf:utt})});var Rie=I(()=>{"use strict";var ctt=V(),htt=He(),ftt=ql(),dtt=kM();ctt({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return htt(dtt,this,ftt(t))}})});var OM=I((G2t,Die)=>{"use strict";var ptt=Oi(),mtt=Qi().has,vtt=Cd(),gtt=wl(),ytt=Us(),_tt=Rs();Die.exports=function(t){var n=ptt(this),u=gtt(t);if(vtt(n)<u.size)return!1;var c=u.getIterator();return ytt(c,function(s){if(!mtt(n,s))return _tt(c,"normal",!1)})!==!1}});var Lie=I(()=>{"use strict";var xtt=V(),btt=OM(),wtt=Sl();xtt({target:"Set",proto:!0,real:!0,forced:!wtt("isSupersetOf")},{isSupersetOf:btt})});var zie=I(()=>{"use strict";var Stt=V(),qtt=He(),Itt=ql(),Ett=OM();Stt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return qtt(Ett,this,Itt(t))}})});var Nie=I(()=>{"use strict";var Ttt=V(),Fie=Pe(),Att=Oi(),Ptt=la(),Ctt=St(),Mtt=Fie([].join),ktt=Fie([].push);Ttt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var n=Att(this),u=t===void 0?",":Ctt(t),c=[];return Ptt(n,function(s){ktt(c,s)}),Mtt(c,u)}})});var jie=I(()=>{"use strict";var Ott=V(),Rtt=or(),Dtt=Oi(),Bie=Qi(),Ltt=la(),ztt=Bie.Set,Ftt=Bie.add;Ott({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var n=Dtt(this),u=Rtt(t,arguments.length>1?arguments[1]:void 0),c=new ztt;return Ltt(n,function(s){Ftt(c,u(s,s,n))}),c}})});var Uie=I(()=>{"use strict";var Ntt=V(),Btt=xg();Ntt({target:"Set",stat:!0,forced:!0},{of:Btt})});var $ie=I(()=>{"use strict";var jtt=V(),Utt=bt(),$tt=Oi(),Vtt=la(),Gtt=TypeError;jtt({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=$tt(this),u=arguments.length<2,c=u?void 0:arguments[1];if(Utt(t),Vtt(n,function(s){u?(u=!1,c=s):c=t(c,s,s,n)}),u)throw new Gtt("Reduce of empty set with no initial value");return c}})});var Vie=I(()=>{"use strict";var Htt=V(),Wtt=or(),Ztt=Oi(),Ktt=la();Htt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var n=Ztt(this),u=Wtt(t,arguments.length>1?arguments[1]:void 0);return Ktt(n,function(c){if(u(c,c,n))return!0},!0)===!0}})});var DM=I((oAt,Gie)=>{"use strict";var Xtt=Oi(),RM=Qi(),Ytt=hb(),Jtt=wl(),Qtt=Us(),ert=RM.add,trt=RM.has,rrt=RM.remove;Gie.exports=function(t){var n=Xtt(this),u=Jtt(t).getIterator(),c=Ytt(n);return Qtt(u,function(s){trt(n,s)?rrt(c,s):ert(c,s)}),c}});var Hie=I(()=>{"use strict";var irt=V(),nrt=DM(),art=Sl();irt({target:"Set",proto:!0,real:!0,forced:!art("symmetricDifference")},{symmetricDifference:nrt})});var Wie=I(()=>{"use strict";var ort=V(),srt=He(),urt=ql(),lrt=DM();ort({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return srt(lrt,this,urt(t))}})});var LM=I((hAt,Zie)=>{"use strict";var crt=Oi(),hrt=Qi().add,frt=hb(),drt=wl(),prt=Us();Zie.exports=function(t){var n=crt(this),u=drt(t).getIterator(),c=frt(n);return prt(u,function(s){hrt(c,s)}),c}});var Kie=I(()=>{"use strict";var mrt=V(),vrt=LM(),grt=Sl();mrt({target:"Set",proto:!0,real:!0,forced:!grt("union")},{union:vrt})});var Xie=I(()=>{"use strict";var yrt=V(),_rt=He(),xrt=ql(),brt=LM();yrt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return _rt(brt,this,xrt(t))}})});var Yie=I(()=>{"use strict";var wrt=V(),Srt=Hc().charAt,qrt=vr(),Irt=gr(),Ert=St();wrt({target:"String",proto:!0,forced:!0},{at:function(t){var n=Ert(qrt(this)),u=n.length,c=Irt(t),s=c>=0?c:u+c;return s<0||s>=u?void 0:Srt(n,s)}})});var zM=I((yAt,tne)=>{"use strict";var ene=Pe(),Trt=ri(),Jie=St(),Art=Nt(),Prt=TypeError,Qie=ene([].push),Crt=ene([].join);tne.exports=function(t){var n=Trt(t),u=Art(n);if(!u)return"";for(var c=arguments.length,s=[],_=0;;){var w=n[_++];if(w===void 0)throw new Prt("Incorrect template");if(Qie(s,Jie(w)),_===u)return Crt(s,"");_<c&&Qie(s,Jie(arguments[_]))}}});var rne=I(()=>{"use strict";var Mrt=V(),krt=zM();Mrt({target:"String",stat:!0,forced:!0},{cooked:krt})});var sne=I(()=>{"use strict";var Ort=V(),Rrt=ul(),ine=Mi(),Drt=vr(),Lrt=St(),nne=Yt(),ane=Hc(),zrt=ane.codeAt,Frt=ane.charAt,one="String Iterator",Nrt=nne.set,Brt=nne.getterFor(one),jrt=Rrt(function(t){Nrt(this,{type:one,string:t,index:0})},"String",function(){var t=Brt(this),n=t.string,u=t.index,c;return u>=n.length?ine(void 0,!0):(c=Frt(n,u),t.index+=c.length,ine({codePoint:zrt(c,0),position:u},!1))});Ort({target:"String",proto:!0,forced:!0},{codePoints:function(){return new jrt(Lrt(Drt(this)))}})});var vne=I((SAt,mne)=>{"use strict";var Urt=xt(),fb=Pe(),$rt=String.fromCharCode,Vrt=Urt("String","fromCodePoint"),FM=fb("".charAt),dne=fb("".charCodeAt),une=fb("".indexOf),lne=fb("".slice),BM=48,pne=57,cne=97,Grt=102,hne=65,Hrt=70,fne=function(e,t){var n=dne(e,t);return n>=BM&&n<=pne},NM=function(e,t,n){if(n>=e.length)return-1;for(var u=0;t<n;t++){var c=Wrt(dne(e,t));if(c===-1)return-1;u=u*16+c}return u},Wrt=function(e){return e>=BM&&e<=pne?e-BM:e>=cne&&e<=Grt?e-cne+10:e>=hne&&e<=Hrt?e-hne+10:-1};mne.exports=function(e){for(var t="",n=0,u=0,c;(u=une(e,"\\",u))>-1;){if(t+=lne(e,n,u),++u===e.length)return;var s=FM(e,u++);switch(s){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":u<e.length&&FM(e,u)===`
`&&++u;case`
`:case"\u2028":case"\u2029":break;case"0":if(fne(e,u))return;t+="\0";break;case"x":if(c=NM(e,u,u+2),c===-1)return;u+=2,t+=$rt(c);break;case"u":if(u<e.length&&FM(e,u)==="{"){var _=une(e,"}",++u);if(_===-1)return;c=NM(e,u,_),u=_+1}else c=NM(e,u,u+4),u+=4;if(c===-1||c>1114111)return;t+=Vrt(c);break;default:if(fne(s,0))return;t+=s;}n=u}return t+lne(e,n)}});var Ene=I(()=>{"use strict";var Zrt=Bs(),Krt=V(),Xrt=Fo(),Yrt=xt(),Jrt=lv(),db=Pe(),bne=Yi(),wne=Ze(),Qrt=Lt(),eit=qt(),tit=Nt(),rit=dr().f,iit=Ec(),nit=zM(),ait=vne(),Sne=Nc(),oit=Yrt("WeakMap"),Vs=Xrt("GlobalDedentRegistry",new oit);Vs.has=Vs.has;Vs.get=Vs.get;Vs.set=Vs.set;var jM=Array,Sg=TypeError,gne=Object.freeze||Object,sit=Object.isFrozen,uit=Math.min,yne=db("".charAt),qne=db("".slice),lit=db("".split),_ne=db(/./.exec),cit=/([\n\u2028\u2029]|\r\n?)/g,hit=RegExp("^["+Sne+"]*"),fit=RegExp("[^"+Sne+"]"),xne="Invalid tag",dit="Invalid opening line",pit="Invalid closing line",mit=function(e){var t=e.raw;if(Zrt&&!sit(t))throw new Sg("Raw template should be frozen");if(Vs.has(t))return Vs.get(t);var n=vit(t),u=yit(n);return rit(u,"raw",{value:gne(n)}),gne(u),Vs.set(t,u),u},vit=function(e){var t=Qrt(e),n=tit(t),u=jM(n),c=jM(n),s=0,_,w,E,P;if(!n)throw new Sg(xne);for(;s<n;s++){var C=t[s];if(typeof C=="string")u[s]=lit(C,cit);else throw new Sg(xne)}for(s=0;s<n;s++){var B=s+1===n;if(_=u[s],s===0){if(_.length===1||_[0].length>0)throw new Sg(dit);_[1]=""}if(B){if(_.length===1||_ne(fit,_[_.length-1]))throw new Sg(pit);_[_.length-2]="",_[_.length-1]=""}for(var $=2;$<_.length;$+=2){var re=_[$],xe=$+1===_.length&&!B,ye=_ne(hit,re)[0];if(!xe&&ye.length===re.length){_[$]="";continue}w=git(ye,w)}}var X=w?w.length:0;for(s=0;s<n;s++){for(_=u[s],E=_[0],P=1;P<_.length;P+=2)E+=_[P]+qne(_[P+1],X);c[s]=E}return c},git=function(e,t){if(t===void 0||e===t)return e;for(var n=0,u=uit(e.length,t.length);n<u&&yne(e,n)===yne(t,n);n++);return qne(e,0,n)},yit=function(e){for(var t=0,n=e.length,u=jM(n);t<n;t++)u[t]=ait(e[t]);return u},Ine=function(e){return Jrt(function(t){var n=iit(arguments);return n[0]=mit(wne(t)),bne(e,this,n)},"")},_it=Ine(nit);Krt({target:"String",stat:!0,forced:!0},{dedent:function(t){return wne(t),eit(t)?Ine(t):bne(_it,this,arguments)}})});var Tne=I(()=>{"use strict";jA()});var Ane=I(()=>{"use strict";KA()});var Pne=I(()=>{"use strict";nP()});var Cne=I(()=>{"use strict";cP()});var Mne=I(()=>{"use strict";var xit=it(),bit=Or(),wit=dr().f,Sit=ui().f,UM=xit.Symbol;bit("asyncDispose");UM&&(qg=Sit(UM,"asyncDispose"),qg.enumerable&&qg.configurable&&qg.writable&&wit(UM,"asyncDispose",{value:qg.value,enumerable:!1,configurable:!1,writable:!1}));var qg});var kne=I(()=>{"use strict";var qit=it(),Iit=Or(),Eit=dr().f,Tit=ui().f,$M=qit.Symbol;Iit("dispose");$M&&(Ig=Tit($M,"dispose"),Ig.enumerable&&Ig.configurable&&Ig.writable&&Eit($M,"dispose",{value:Ig.value,enumerable:!1,configurable:!1,writable:!1}));var Ig});var GM=I((FAt,One)=>{"use strict";var Ait=xt(),Pit=Pe(),VM=Ait("Symbol"),Cit=VM.keyFor,Mit=Pit(VM.prototype.valueOf);One.exports=VM.isRegisteredSymbol||function(t){try{return Cit(Mit(t))!==void 0}catch(n){return!1}}});var Rne=I(()=>{"use strict";var kit=V(),Oit=GM();kit({target:"Symbol",stat:!0},{isRegisteredSymbol:Oit})});var Dne=I(()=>{"use strict";var Rit=V(),Dit=GM();Rit({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Dit})});var ZM=I(($At,jne)=>{"use strict";var Lit=Fo(),Nne=xt(),zit=Pe(),Fit=Ts(),Nit=pt(),mb=Nne("Symbol"),Lne=mb.isWellKnownSymbol,Bne=Nne("Object","getOwnPropertyNames"),Bit=zit(mb.prototype.valueOf),zne=Lit("wks");for(pb=0,HM=Bne(mb),Fne=HM.length;pb<Fne;pb++)try{WM=HM[pb],Fit(mb[WM])&&Nit(WM)}catch(e){}var WM,pb,HM,Fne;jne.exports=function(t){if(Lne&&Lne(t))return!0;try{for(var n=Bit(t),u=0,c=Bne(zne),s=c.length;u<s;u++)if(zne[c[u]]==n)return!0}catch(_){}return!1}});var Une=I(()=>{"use strict";var jit=V(),Uit=ZM();jit({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Uit})});var $ne=I(()=>{"use strict";var $it=V(),Vit=ZM();$it({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Vit})});var Vne=I(()=>{"use strict";var Git=Or();Git("matcher")});var Gne=I(()=>{"use strict";var Hit=Or();Hit("metadata")});var Hne=I(()=>{"use strict";var Wit=Or();Wit("metadataKey")});var Wne=I(()=>{"use strict";var Zit=Or();Zit("observable")});var Zne=I(()=>{"use strict";var Kit=Or();Kit("patternMatch")});var Kne=I(()=>{"use strict";var Xit=Or();Xit("replaceAll")});var Yne=I(()=>{"use strict";var Yit=xt(),Jit=Yf(),Qit=eC(),Xne=kt(),ent=Dc(),tnt=Xne.aTypedArrayConstructor,rnt=Xne.exportTypedArrayStaticMethod;rnt("fromAsync",function(t){var n=this,u=arguments.length,c=u>1?arguments[1]:void 0,s=u>2?arguments[2]:void 0;return new(Yit("Promise"))(function(_){Jit(n),_(Qit(t,c,s))}).then(function(_){return ent(tnt(n),_)})},!0)});var Jne=I(()=>{"use strict";IP()});var eae=I(()=>{"use strict";var Qne=kt(),int=$r().filterReject,nnt=c1(),ant=Qne.aTypedArray,ont=Qne.exportTypedArrayMethod;ont("filterOut",function(t){var n=int(ant(this),t,arguments.length>1?arguments[1]:void 0);return nnt(this,n)},!0)});var rae=I(()=>{"use strict";var tae=kt(),snt=$r().filterReject,unt=c1(),lnt=tae.aTypedArray,cnt=tae.exportTypedArrayMethod;cnt("filterReject",function(t){var n=snt(lnt(this),t,arguments.length>1?arguments[1]:void 0);return unt(this,n)},!0)});var iae=I(()=>{"use strict";EP()});var nae=I(()=>{"use strict";TP()});var oae=I(()=>{"use strict";var aae=kt(),hnt=A1(),fnt=_d(),dnt=aae.aTypedArray,pnt=aae.exportTypedArrayMethod;pnt("groupBy",function(t){var n=arguments.length>1?arguments[1]:void 0;return hnt(dnt(this),t,n,fnt)},!0)});var sae=I(()=>{"use strict";FP()});var uae=I(()=>{"use strict";NP()});var lae=I(()=>{"use strict";var KM=kt(),mnt=Nt(),vnt=a1(),gnt=Ma(),ynt=rg(),_nt=gr(),xnt=Oe(),bnt=KM.aTypedArray,wnt=KM.getTypedArrayConstructor,Snt=KM.exportTypedArrayMethod,qnt=Math.max,Int=Math.min,Ent=!xnt(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});Snt("toSpliced",function(t,n){var u=bnt(this),c=wnt(u),s=mnt(u),_=gnt(t,s),w=arguments.length,E=0,P,C,B,$,re,xe,ye;if(w===0)P=C=0;else if(w===1)P=0,C=s-_;else if(C=Int(qnt(_nt(n),0),s-_),P=w-2,P){$=new c(P),B=vnt($);for(var X=2;X<w;X++)re=arguments[X],$[X-2]=B?ynt(re):+re}for(xe=s+P-C,ye=new c(xe);E<_;E++)ye[E]=u[E];for(;E<_+P;E++)ye[E]=$[E-_];for(;E<xe;E++)ye[E]=u[E+C-P];return ye},!Ent)});var cae=I(()=>{"use strict";var Tnt=Pe(),XM=kt(),Ant=Dc(),Pnt=M1(),Cnt=XM.aTypedArray,Mnt=XM.getTypedArrayConstructor,knt=XM.exportTypedArrayMethod,Ont=Tnt(Pnt);knt("uniqueBy",function(t){return Cnt(this),Ant(Mnt(this),Ont(this,t))},!0)});var hae=I(()=>{"use strict";jP()});var yb=I((CPt,fae)=>{"use strict";var vb=Pe(),gb=WeakMap.prototype;fae.exports={WeakMap,set:vb(gb.set),get:vb(gb.get),has:vb(gb.has),remove:vb(gb.delete)}});var YM=I((MPt,dae)=>{"use strict";var Rnt=yb().has;dae.exports=function(e){return Rnt(e),e}});var pae=I(()=>{"use strict";var Dnt=V(),Lnt=YM(),znt=yb().remove;Dnt({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Lnt(this),n=!0,u,c=0,s=arguments.length;c<s;c++)u=znt(t,arguments[c]),n=n&&u;return!!n}})});var mae=I(()=>{"use strict";var Fnt=V(),Nnt=_g();Fnt({target:"WeakMap",stat:!0,forced:!0},{from:Nnt})});var vae=I(()=>{"use strict";var Bnt=V(),jnt=xg();Bnt({target:"WeakMap",stat:!0,forced:!0},{of:jnt})});var yae=I(()=>{"use strict";var Unt=V(),$nt=YM(),JM=yb(),Vnt=JM.get,Gnt=JM.has,gae=JM.set;Unt({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=$nt(this),c,s;return Gnt(u,t)?(c=Vnt(u,t),"update"in n&&(c=n.update(c,t,u),gae(u,t,c)),c):(s=n.insert(t,u),gae(u,t,s),s)}})});var _ae=I(()=>{"use strict";var Hnt=V(),Wnt=rb();Hnt({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Wnt})});var _b=I((UPt,xae)=>{"use strict";var QM=Pe(),ek=WeakSet.prototype;xae.exports={WeakSet,add:QM(ek.add),has:QM(ek.has),remove:QM(ek.delete)}});var tk=I(($Pt,bae)=>{"use strict";var Znt=_b().has;bae.exports=function(e){return Znt(e),e}});var wae=I(()=>{"use strict";var Knt=V(),Xnt=tk(),Ynt=_b().add;Knt({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Xnt(this),n=0,u=arguments.length;n<u;n++)Ynt(t,arguments[n]);return t}})});var Sae=I(()=>{"use strict";var Jnt=V(),Qnt=tk(),eat=_b().remove;Jnt({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Qnt(this),n=!0,u,c=0,s=arguments.length;c<s;c++)u=eat(t,arguments[c]),n=n&&u;return!!n}})});var qae=I(()=>{"use strict";var tat=V(),rat=_g();tat({target:"WeakSet",stat:!0,forced:!0},{from:rat})});var Iae=I(()=>{"use strict";var iat=V(),nat=xg();iat({target:"WeakSet",stat:!0,forced:!0},{of:nat})});var rk=I((JPt,Aae)=>{"use strict";var Eae="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Tae={};for(Eg=0;Eg<66;Eg++)Tae[Eae.charAt(Eg)]=Eg;var Eg;Aae.exports={itoc:Eae,ctoi:Tae}});var Rae=I(()=>{"use strict";var aat=V(),oat=it(),kae=xt(),nk=Pe(),sat=He(),ak=Oe(),uat=St(),lat=Mt(),cat=Fa(),ik=rk().ctoi,Oae=/[^\d+/a-z]/i,hat=/[\t\n\f\r ]+/g,fat=/[=]{1,2}$/,Tg=kae("atob"),dat=String.fromCharCode,pat=nk("".charAt),Pae=nk("".replace),mat=nk(Oae.exec),ok=ak(function(){return Tg(" ")!==""}),sk=!ak(function(){Tg("a")}),Cae=!ok&&!sk&&!ak(function(){Tg()}),Mae=!ok&&!sk&&Tg.length!==1;aat({global:!0,bind:!0,enumerable:!0,forced:ok||sk||Cae||Mae},{atob:function(t){if(cat(arguments.length,1),Cae||Mae)return sat(Tg,oat,t);var n=Pae(uat(t),hat,""),u="",c=0,s=0,_,w;if(n.length%4===0&&(n=Pae(n,fat,"")),n.length%4===1||mat(Oae,n))throw new(kae("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;_=pat(n,c++);)lat(ik,_)&&(w=s%4?w*64+ik[_]:ik[_],s++%4&&(u+=dat(255&w>>(-2*s&6))));return u}})});var $ae=I(()=>{"use strict";var vat=V(),gat=it(),Bae=xt(),jae=Pe(),yat=He(),Uae=Oe(),Dae=St(),_at=Fa(),xat=rk().itoc,Yc=Bae("btoa"),Lae=jae("".charAt),bat=jae("".charCodeAt),zae=!!Yc&&!Uae(function(){Yc()}),Fae=!!Yc&&Uae(function(){return Yc(null)!=="bnVsbA=="}),Nae=!!Yc&&Yc.length!==1;vat({global:!0,bind:!0,enumerable:!0,forced:zae||Fae||Nae},{btoa:function(t){if(_at(arguments.length,1),zae||Fae||Nae)return yat(Yc,gat,Dae(t));for(var n=Dae(t),u="",c=0,s=xat,_,w;Lae(n,c)||(s="=",c%1);){if(w=bat(n,c+=3/4),w>255)throw new(Bae("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");_=_<<8|w,u+=Lae(s,63&_>>8-c%1*8)}return u}})});var uk=I((iCt,Vae)=>{"use strict";Vae.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var ck=I((nCt,Hae)=>{"use strict";var wat=av(),lk=wat("span").classList,Gae=lk&&lk.constructor&&lk.constructor.prototype;Hae.exports=Gae===Object.prototype?void 0:Gae});var Xae=I(()=>{"use strict";var Wae=it(),Zae=uk(),Sat=ck(),hk=hT(),qat=Kr(),Kae=function(e){if(e&&e.forEach!==hk)try{qat(e,"forEach",hk)}catch(t){e.forEach=hk}};for(xb in Zae)Zae[xb]&&Kae(Wae[xb]&&Wae[xb].prototype);var xb;Kae(Sat)});var roe=I(()=>{"use strict";var Yae=it(),Qae=uk(),Iat=ck(),Ag=Iv(),fk=Kr(),eoe=pt(),dk=eoe("iterator"),Jae=eoe("toStringTag"),pk=Ag.values,toe=function(e,t){if(e){if(e[dk]!==pk)try{fk(e,dk,pk)}catch(u){e[dk]=pk}if(e[Jae]||fk(e,Jae,t),Qae[t]){for(var n in Ag)if(e[n]!==Ag[n])try{fk(e,n,Ag[n])}catch(u){e[n]=Ag[n]}}}};for(bb in Qae)toe(Yae[bb]&&Yae[bb].prototype,bb);var bb;toe(Iat,"DOMTokenList")});var mk=I((lCt,ioe)=>{"use strict";ioe.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var poe=I(()=>{"use strict";var Eat=V(),Tat=aC(),qb=xt(),bk=Oe(),Aat=Ur(),wk=kn(),Ib=dr().f,Pat=tr(),wb=qr(),Sb=Mt(),Cat=Ji(),Mat=Ze(),ooe=ZE(),noe=Mc(),Md=mk(),kat=V0(),soe=Yt(),Sk=ft(),uoe=Dt(),kd="DOMException",xk="DATA_CLONE_ERR",Tb=qb("Error"),Gs=qb(kd)||function(){try{var e=qb("MessageChannel")||Tat("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===xk&&t.code===25)return t.constructor}}(),Oat=Gs&&Gs.prototype,loe=Tb.prototype,Rat=soe.set,Dat=soe.getterFor(kd),Lat="stack"in new Tb(kd),coe=function(e){return Sb(Md,e)&&Md[e].m?Md[e].c:0},qk=function(){Cat(this,Cg);var t=arguments.length,n=noe(t<1?void 0:arguments[0]),u=noe(t<2?void 0:arguments[1],"Error"),c=coe(u);if(Rat(this,{type:kd,name:u,message:n,code:c}),Sk||(this.name=u,this.message=n,this.code=c),Lat){var s=new Tb(n);s.name=kd,Ib(this,"stack",wk(1,kat(s.stack,1)))}},Cg=qk.prototype=Aat(loe),hoe=function(e){return{enumerable:!0,configurable:!0,get:e}},vk=function(e){return hoe(function(){return Dat(this)[e]})};Sk&&(wb(Cg,"code",vk("code")),wb(Cg,"message",vk("message")),wb(Cg,"name",vk("name")));Ib(Cg,"constructor",wk(1,qk));var Ab=bk(function(){return!(new Gs instanceof Tb)}),foe=Ab||bk(function(){return loe.toString!==ooe||String(new Gs(1,2))!=="2: 1"}),doe=Ab||bk(function(){return new Gs(1,"DataCloneError").code!==25}),zat=Ab||Gs[xk]!==25||Oat[xk]!==25,aoe=uoe?foe||doe||zat:Ab;Eat({global:!0,constructor:!0,forced:aoe},{DOMException:aoe?qk:Gs});var Mg=qb(kd),Eb=Mg.prototype;foe&&(uoe||Gs===Mg)&&Pat(Eb,"toString",ooe);doe&&Sk&&Gs===Mg&&wb(Eb,"code",hoe(function(){return coe(Mat(this).name)}));for(gk in Md)Sb(Md,gk)&&(yk=Md[gk],Pg=yk.s,_k=wk(6,yk.c),Sb(Mg,Pg)||Ib(Mg,Pg,_k),Sb(Eb,Pg)||Ib(Eb,Pg,_k));var yk,Pg,_k,gk});var boe=I(()=>{"use strict";var Fat=V(),Nat=it(),kk=xt(),Ck=kn(),Mk=dr().f,moe=Mt(),Bat=Ji(),jat=Cc(),voe=Mc(),Ik=mk(),Uat=V0(),$at=ft(),_oe=Dt(),Og="DOMException",xoe=kk("Error"),Rg=kk(Og),Ok=function(){Bat(this,Vat);var t=arguments.length,n=voe(t<1?void 0:arguments[0]),u=voe(t<2?void 0:arguments[1],"Error"),c=new Rg(n,u),s=new xoe(n);return s.name=Og,Mk(c,"stack",Ck(1,Uat(s.stack,1))),jat(c,this,Ok),c},Vat=Ok.prototype=Rg.prototype,Gat="stack"in new xoe(Og),Hat="stack"in new Rg(1,2),Ek=Rg&&$at&&Object.getOwnPropertyDescriptor(Nat,Og),Wat=!!Ek&&!(Ek.writable&&Ek.configurable),goe=Gat&&!Wat&&!Hat;Fat({global:!0,constructor:!0,forced:_oe||goe},{DOMException:goe?Ok:Rg});var kg=kk(Og),yoe=kg.prototype;if(yoe.constructor!==kg){_oe||Mk(yoe,"constructor",Ck(1,kg));for(Tk in Ik)moe(Ik,Tk)&&(Ak=Ik[Tk],Pk=Ak.s,moe(kg,Pk)||Mk(kg,Pk,Ck(6,Ak.c)))}var Ak,Pk,Tk});var Soe=I(()=>{"use strict";var Zat=xt(),Kat=Dn(),woe="DOMException";Kat(Zat(woe),woe)});var Ioe=I(()=>{"use strict";var Xat=V(),Yat=it(),qoe=$v().clear;Xat({global:!0,bind:!0,enumerable:!0,forced:Yat.clearImmediate!==qoe},{clearImmediate:qoe})});var Toe=I((yCt,Eoe)=>{"use strict";Eoe.exports=typeof Bun=="function"&&Bun&&typeof Bun.version=="string"});var Pb=I((_Ct,Poe)=>{"use strict";var Aoe=it(),Jat=Yi(),Qat=qt(),eot=Toe(),tot=Lo(),rot=Ms(),iot=Fa(),not=Aoe.Function,aot=/MSIE .\./.test(tot)||eot&&function(){var e=Aoe.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();Poe.exports=function(e,t){var n=t?2:1;return aot?function(u,c){var s=iot(arguments.length,1)>n,_=Qat(u)?u:not(u),w=s?rot(arguments,n):[],E=s?function(){Jat(_,this,w)}:_;return t?e(E,c):e(E)}:e}});var Ooe=I(()=>{"use strict";var oot=V(),koe=it(),Coe=$v().set,sot=Pb(),Moe=koe.setImmediate?sot(Coe,!1):Coe;oot({global:!0,bind:!0,enumerable:!0,forced:koe.setImmediate!==Moe},{setImmediate:Moe})});var Roe=I(()=>{"use strict";Ioe();Ooe()});var Doe=I(()=>{"use strict";var uot=V(),lot=it(),cot=iA(),hot=bt(),fot=Fa(),dot=Bo(),pot=lot.process;uot({global:!0,enumerable:!0,dontCallGetSet:!0},{queueMicrotask:function(t){fot(arguments.length,1),hot(t);var n=dot&&pot.domain;cot(n?n.bind(t):t)}})});var zoe=I(()=>{"use strict";var mot=V(),Il=it(),vot=qr(),got=ft(),yot=TypeError,_ot=Object.defineProperty,Loe=Il.self!==Il;try{got?(Cb=Object.getOwnPropertyDescriptor(Il,"self"),(Loe||!Cb||!Cb.get||!Cb.enumerable)&&vot(Il,"self",{get:function(){return Il},set:function(t){if(this!==Il)throw new yot("Illegal invocation");_ot(Il,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):mot({global:!0,simple:!0,forced:Loe},{self:Il})}catch(e){}var Cb});var Qoe=I(()=>{"use strict";var xot=Dt(),bot=V(),Dr=it(),Nk=xt(),Fg=Pe(),Bk=Oe(),wot=il(),kb=qt(),Sot=co(),qot=Zr(),Ob=It(),Iot=Ts(),Eot=Rr(),joe=Ze(),Lg=Rn(),Uoe=Mt(),Tot=ka(),Rk=Kr(),Jc=Nt(),Aot=Fa(),Pot=ld(),Rb=pn(),$oe=Qi(),Foe=L1(),Voe=VE(),Goe=k1(),Dg=Dr.Object,Cot=Dr.Array,Hoe=Dr.Date,Ng=Dr.Error,Mot=Dr.EvalError,kot=Dr.RangeError,Oot=Dr.ReferenceError,Rot=Dr.SyntaxError,Woe=Dr.TypeError,Dot=Dr.URIError,Lot=Dr.PerformanceMark,Rd=Dr.WebAssembly,zot=Rd&&Rd.CompileError||Ng,Fot=Rd&&Rd.LinkError||Ng,Not=Rd&&Rd.RuntimeError||Ng,Tl=Nk("DOMException"),zg=Rb.Map,Bg=Rb.has,jk=Rb.get,Qc=Rb.set,Zoe=$oe.Set,Koe=$oe.add,Xoe=Nk("Object","keys"),Noe=Fg([].push),Bot=Fg((!0).valueOf),jot=Fg(1 .valueOf),Uot=Fg("".valueOf),$ot=Fg(Hoe.prototype.getTime),zk=wot("structuredClone"),Dd="DataCloneError",Mb="Transferring",Yoe=function(e){return!Bk(function(){var t=new Dr.Set([7]),n=e(t),u=e(Dg(7));return n===t||!n.has(7)||typeof u!="object"||+u!=7})&&e},Boe=function(e,t){return!Bk(function(){var n=new t,u=e({a:n,b:n});return!(u&&u.a===u.b&&u.a instanceof t&&u.a.stack===n.stack)})},Vot=function(e){return!Bk(function(){var t=e(new Dr.AggregateError([1],zk,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==zk||t.cause!==3})},Od=Dr.structuredClone,Got=xot||!Boe(Od,Ng)||!Boe(Od,Tl)||!Vot(Od),Hot=!Od&&Yoe(function(e){return new Lot(zk,{detail:e}).detail}),El=Yoe(Od)||Hot,Dk=function(e){throw new Tl("Uncloneable type: "+e,Dd)},Bn=function(e,t){throw new Tl((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",Dd)},Lk=function(e,t){return El||Bn(t),El(e)},Wot=function(){var e;try{e=new Dr.DataTransfer}catch(t){try{e=new Dr.ClipboardEvent("").clipboardData}catch(n){}}return e&&e.items&&e.files?e:null},Uk=function(e,t,n){if(Bg(t,e))return jk(t,e);var u=n||Lg(e),c,s,_,w,E,P;if(u==="SharedArrayBuffer")El?c=El(e):c=e;else{var C=Dr.DataView;!C&&typeof e.slice!="function"&&Bn("ArrayBuffer");try{if(typeof e.slice=="function"&&!e.resizable)c=e.slice(0);else for(s=e.byteLength,_=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,c=new ArrayBuffer(s,_),w=new C(e),E=new C(c),P=0;P<s;P++)E.setUint8(P,w.getUint8(P))}catch(B){throw new Tl("ArrayBuffer is detached",Dd)}}return Qc(t,e,c),c},Joe=function(e,t,n,u,c){var s=Dr[t];return Ob(s)||Bn(t),new s(Uk(e.buffer,c),n,u)},Fk=function(e,t,n){this.object=e,this.type=t,this.metadata=n},vn=function(e,t,n){if(Iot(e)&&Dk("Symbol"),!Ob(e))return e;if(t){if(Bg(t,e))return jk(t,e)}else t=new zg;var u=Lg(e),c,s,_,w,E,P,C,B;switch(u){case"Array":_=Cot(Jc(e));break;case"Object":_={};break;case"Map":_=new zg;break;case"Set":_=new Zoe;break;case"RegExp":_=new RegExp(e.source,Pot(e));break;case"Error":switch(s=e.name,s){case"AggregateError":_=new(Nk("AggregateError"))([]);break;case"EvalError":_=new Mot;break;case"RangeError":_=new kot;break;case"ReferenceError":_=new Oot;break;case"SyntaxError":_=new Rot;break;case"TypeError":_=new Woe;break;case"URIError":_=new Dot;break;case"CompileError":_=new zot;break;case"LinkError":_=new Fot;break;case"RuntimeError":_=new Not;break;default:_=new Ng;}break;case"DOMException":_=new Tl(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":_=n?new Fk(e,u):Uk(e,t,u);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":P=u==="DataView"?e.byteLength:e.length,_=n?new Fk(e,u,{offset:e.byteOffset,length:P}):Joe(e,u,e.byteOffset,P,t);break;case"DOMQuad":try{_=new DOMQuad(vn(e.p1,t,n),vn(e.p2,t,n),vn(e.p3,t,n),vn(e.p4,t,n))}catch($){_=Lk(e,u)}break;case"File":if(El)try{_=El(e),Lg(_)!==u&&(_=void 0)}catch($){}if(!_)try{_=new File([e],e.name,e)}catch($){}_||Bn(u);break;case"FileList":if(w=Wot(),w){for(E=0,P=Jc(e);E<P;E++)w.items.add(vn(e[E],t,n));_=w.files}else _=Lk(e,u);break;case"ImageData":try{_=new ImageData(vn(e.data,t,n),e.width,e.height,{colorSpace:e.colorSpace})}catch($){_=Lk(e,u)}break;default:if(El)_=El(e);else switch(u){case"BigInt":_=Dg(e.valueOf());break;case"Boolean":_=Dg(Bot(e));break;case"Number":_=Dg(jot(e));break;case"String":_=Dg(Uot(e));break;case"Date":_=new Hoe($ot(e));break;case"Blob":try{_=e.slice(0,e.size,e.type)}catch($){Bn(u)}break;case"DOMPoint":case"DOMPointReadOnly":c=Dr[u];try{_=c.fromPoint?c.fromPoint(e):new c(e.x,e.y,e.z,e.w)}catch($){Bn(u)}break;case"DOMRect":case"DOMRectReadOnly":c=Dr[u];try{_=c.fromRect?c.fromRect(e):new c(e.x,e.y,e.width,e.height)}catch($){Bn(u)}break;case"DOMMatrix":case"DOMMatrixReadOnly":c=Dr[u];try{_=c.fromMatrix?c.fromMatrix(e):new c(e)}catch($){Bn(u)}break;case"AudioData":case"VideoFrame":kb(e.clone)||Bn(u);try{_=e.clone()}catch($){Dk(u)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":Bn(u);default:Dk(u);}}switch(Qc(t,e,_),u){case"Array":case"Object":for(C=Xoe(e),E=0,P=Jc(C);E<P;E++)B=C[E],Tot(_,B,vn(e[B],t,n));break;case"Map":e.forEach(function($,re){Qc(_,vn(re,t,n),vn($,t,n))});break;case"Set":e.forEach(function($){Koe(_,vn($,t,n))});break;case"Error":Rk(_,"message",vn(e.message,t,n)),Uoe(e,"cause")&&Rk(_,"cause",vn(e.cause,t,n)),s==="AggregateError"&&(_.errors=vn(e.errors,t,n));case"DOMException":Voe&&Rk(_,"stack",vn(e.stack,t,n));}return _},Hs=function(e,t){if(!Ob(e))return e;if(Bg(t,e))return jk(t,e);var n,u,c,s,_,w,E,P;if(e instanceof Fk)switch(n=e.type,u=e.object,n){case"ArrayBuffer":case"SharedArrayBuffer":P=Uk(u,t,n);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":c=e.metadata,P=Joe(u,n,c.offset,c.length,t);}else switch(Lg(e)){case"Array":case"Object":for(w=Xoe(e),s=0,_=Jc(w);s<_;s++)E=w[s],e[E]=Hs(e[E],t);break;case"Map":P=new zg,e.forEach(function(C,B){Qc(P,Hs(B,t),Hs(C,t))});break;case"Set":P=new Zoe,e.forEach(function(C){Koe(P,Hs(C,t))});break;case"Error":e.message=Hs(e.message,t),Uoe(e,"cause")&&(e.cause=Hs(e.cause,t)),e.name==="AggregateError"&&(e.errors=Hs(e.errors,t));case"DOMException":Voe&&(e.stack=Hs(e.stack,t));}return Qc(t,e,P||e),P||e},Zot=function(e,t){if(!Ob(e))throw new Woe("Transfer option cannot be converted to a sequence");var n=[];Eot(e,function($){Noe(n,joe($))});for(var u=0,c=Jc(n),s=[],_,w,E,P,C,B;u<c;){if(_=n[u++],w=Lg(_),w==="ArrayBuffer"){Noe(s,_);continue}if(Bg(t,_))throw new Tl("Duplicate transferable",Dd);if(Goe)P=Od(_,{transfer:[_]});else switch(w){case"ImageBitmap":E=Dr.OffscreenCanvas,Sot(E)||Bn(w,Mb);try{C=new E(_.width,_.height),B=C.getContext("bitmaprenderer"),B.transferFromImageBitmap(_),P=C.transferToImageBitmap()}catch($){}break;case"AudioData":case"VideoFrame":(!kb(_.clone)||!kb(_.close))&&Bn(w,Mb);try{P=_.clone(),_.close()}catch($){}break;case"MediaSourceHandle":case"MessagePort":case"OffscreenCanvas":case"ReadableStream":case"TransformStream":case"WritableStream":Bn(w,Mb);}if(P===void 0)throw new Tl("This object cannot be transferred: "+w,Dd);Qc(t,_,P)}return s},Kot=function(e,t){for(var n=0,u=Jc(e),c,s;n<u;){if(c=e[n++],Bg(t,c))throw new Tl("Duplicate transferable",Dd);Foe?s=Foe(c,void 0,!0):(kb(c.transfer)||Bn("ArrayBuffer",Mb),s=c.transfer()),Qc(t,c,s)}};bot({global:!0,enumerable:!0,sham:!Goe,forced:Got},{structuredClone:function(t){var n=Aot(arguments.length,1)>1&&!qot(arguments[1])?joe(arguments[1]):void 0,u=n?n.transfer:void 0,c=!1,s,_;u!==void 0&&(s=new zg,_=Zot(u,s),c=!!Jc(_));var w=vn(t,s,c);return c&&(s=new zg,Kot(u,s),w=Hs(w,s)),w}})});var rse=I(()=>{"use strict";var Xot=V(),tse=it(),Yot=Pb(),ese=Yot(tse.setInterval,!0);Xot({global:!0,bind:!0,forced:tse.setInterval!==ese},{setInterval:ese})});var ase=I(()=>{"use strict";var Jot=V(),nse=it(),Qot=Pb(),ise=Qot(nse.setTimeout,!0);Jot({global:!0,bind:!0,forced:nse.setTimeout!==ise},{setTimeout:ise})});var ose=I(()=>{"use strict";rse();ase()});var Db=I((LCt,use)=>{"use strict";var est=Oe(),tst=pt(),rst=ft(),sse=Dt(),ist=tst("iterator");use.exports=!est(function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),u="";return e.pathname="c%20d",t.forEach(function(c,s){t.delete("b"),u+=s+c}),n.delete("a",2),n.delete("b",void 0),sse&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(sse||!rst)||!t.sort||e.href!=="http://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[ist]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("http://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("http://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("http://x",void 0).host!=="x"})});var gse=I((zCt,vse)=>{"use strict";var eh=Pe(),$k=2147483647,jg=36,dse=1,Hk=26,nst=38,ast=700,ost=72,sst=128,ust="-",lst=/[^\0-\u007E]/,pse=/[.\u3002\uFF0E\uFF61]/g,lse="Overflow: input needs wider integers to process",Vk=jg-dse,cse=RangeError,cst=eh(pse.exec),Ld=Math.floor,Gk=String.fromCharCode,hse=eh("".charCodeAt),mse=eh([].join),Al=eh([].push),hst=eh("".replace),fst=eh("".split),dst=eh("".toLowerCase),pst=function(e){for(var t=[],n=0,u=e.length;n<u;){var c=hse(e,n++);if(c>=55296&&c<=56319&&n<u){var s=hse(e,n++);(s&64512)===56320?Al(t,((c&1023)<<10)+(s&1023)+65536):(Al(t,c),n--)}else Al(t,c)}return t},fse=function(e){return e+22+75*(e<26)},mst=function(e,t,n){var u=0;for(e=n?Ld(e/ast):e>>1,e+=Ld(e/t);e>Vk*Hk>>1;)e=Ld(e/Vk),u+=jg;return Ld(u+(Vk+1)*e/(e+nst))},vst=function(e){var t=[];e=pst(e);var n=e.length,u=sst,c=0,s=ost,_,w;for(_=0;_<e.length;_++)w=e[_],w<128&&Al(t,Gk(w));var E=t.length,P=E;for(E&&Al(t,ust);P<n;){var C=$k;for(_=0;_<e.length;_++)w=e[_],w>=u&&w<C&&(C=w);var B=P+1;if(C-u>Ld(($k-c)/B))throw new cse(lse);for(c+=(C-u)*B,u=C,_=0;_<e.length;_++){if(w=e[_],w<u&&++c>$k)throw new cse(lse);if(w===u){for(var $=c,re=jg;;){var xe=re<=s?dse:re>=s+Hk?Hk:re-s;if($<xe)break;var ye=$-xe,X=jg-xe;Al(t,Gk(fse(xe+ye%X))),$=Ld(ye/X),re+=jg}Al(t,Gk(fse($))),s=mst(c,B,P===E),c=0,P++}}c++,u++}return mse(t,"")};vse.exports=function(e){var t=[],n=fst(hst(dst(e),pse,"."),"."),u,c;for(u=0;u<n.length;u++)c=n[u],Al(t,cst(lst,c)?"xn--"+vst(c):c);return mse(t,".")}});var rO=I((FCt,zse)=>{"use strict";Iv();var Yk=V(),Nd=it(),Lb=He(),Ko=Pe(),Fd=ft(),Pse=Db(),Cse=tr(),gst=qr(),yst=La(),_st=Dn(),xst=ul(),eO=Yt(),Mse=Ji(),Wk=qt(),bst=Mt(),wst=or(),Sst=Rn(),qst=Ze(),kse=It(),gn=St(),Ist=Ur(),yse=kn(),Jk=ol(),Est=Os(),zd=Fa(),Tst=pt(),Ast=ox(),Pst=Tst("iterator"),$g="URLSearchParams",Ose=$g+"Iterator",Rse=eO.set,Ba=eO.getterFor($g),Cst=eO.getterFor(Ose),Mst=Object.getOwnPropertyDescriptor,tO=function(e){if(!Fd)return Nd[e];var t=Mst(Nd,e);return t&&t.value},_se=tO("fetch"),Fb=tO("Request"),Ug=tO("Headers"),Zk=Fb&&Fb.prototype,xse=Ug&&Ug.prototype,kst=Nd.RegExp,Ost=Nd.TypeError,Dse=Nd.decodeURIComponent,Rst=Nd.encodeURIComponent,Dst=Ko("".charAt),bse=Ko([].join),th=Ko([].push),Qk=Ko("".replace),Lst=Ko([].shift),wse=Ko([].splice),Sse=Ko("".split),zst=Ko("".slice),Fst=/\+/g,qse=Array(4),Nst=function(e){return qse[e-1]||(qse[e-1]=kst("((?:%[\\da-f]{2}){"+e+"})","gi"))},Bst=function(e){try{return Dse(e)}catch(t){return e}},Ise=function(e){var t=Qk(e,Fst," "),n=4;try{return Dse(t)}catch(u){for(;n;)t=Qk(t,Nst(n--),Bst);return t}},jst=/[!'()~]|%20/g,Ust={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},$st=function(e){return Ust[e]},Ese=function(e){return Qk(Rst(e),jst,$st)},Kk=xst(function(t,n){Rse(this,{type:Ose,iterator:Jk(Ba(t).entries),kind:n})},"Iterator",function(){var t=Cst(this),n=t.kind,u=t.iterator.next(),c=u.value;return u.done||(u.value=n==="keys"?c.key:n==="values"?c.value:[c.key,c.value]),u},!0),Lse=function(e){this.entries=[],this.url=null,e!==void 0&&(kse(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?Dst(e,0)==="?"?zst(e,1):e:gn(e)))};Lse.prototype={type:$g,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=Est(e),n,u,c,s,_,w,E;if(t)for(n=Jk(e,t),u=n.next;!(c=Lb(u,n)).done;){if(s=Jk(qst(c.value)),_=s.next,(w=Lb(_,s)).done||(E=Lb(_,s)).done||!Lb(_,s).done)throw new Ost("Expected sequence with length 2");th(this.entries,{key:gn(w.value),value:gn(E.value)})}else for(var P in e)bst(e,P)&&th(this.entries,{key:P,value:gn(e[P])})},parseQuery:function(e){if(e)for(var t=Sse(e,"&"),n=0,u,c;n<t.length;)u=t[n++],u.length&&(c=Sse(u,"="),th(this.entries,{key:Ise(Lst(c)),value:Ise(bse(c,"="))}))},serialize:function(){for(var e=this.entries,t=[],n=0,u;n<e.length;)u=e[n++],th(t,Ese(u.key)+"="+Ese(u.value));return bse(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Nb=function(){Mse(this,Bd);var t=arguments.length>0?arguments[0]:void 0,n=Rse(this,new Lse(t));Fd||(this.size=n.entries.length)},Bd=Nb.prototype;yst(Bd,{append:function(t,n){var u=Ba(this);zd(arguments.length,2),th(u.entries,{key:gn(t),value:gn(n)}),Fd||this.length++,u.updateURL()},delete:function(e){for(var t=Ba(this),n=zd(arguments.length,1),u=t.entries,c=gn(e),s=n<2?void 0:arguments[1],_=s===void 0?s:gn(s),w=0;w<u.length;){var E=u[w];if(E.key===c&&(_===void 0||E.value===_)){if(wse(u,w,1),_!==void 0)break}else w++}Fd||(this.size=u.length),t.updateURL()},get:function(t){var n=Ba(this).entries;zd(arguments.length,1);for(var u=gn(t),c=0;c<n.length;c++)if(n[c].key===u)return n[c].value;return null},getAll:function(t){var n=Ba(this).entries;zd(arguments.length,1);for(var u=gn(t),c=[],s=0;s<n.length;s++)n[s].key===u&&th(c,n[s].value);return c},has:function(t){for(var n=Ba(this).entries,u=zd(arguments.length,1),c=gn(t),s=u<2?void 0:arguments[1],_=s===void 0?s:gn(s),w=0;w<n.length;){var E=n[w++];if(E.key===c&&(_===void 0||E.value===_))return!0}return!1},set:function(t,n){var u=Ba(this);zd(arguments.length,1);for(var c=u.entries,s=!1,_=gn(t),w=gn(n),E=0,P;E<c.length;E++)P=c[E],P.key===_&&(s?wse(c,E--,1):(s=!0,P.value=w));s||th(c,{key:_,value:w}),Fd||(this.size=c.length),u.updateURL()},sort:function(){var t=Ba(this);Ast(t.entries,function(n,u){return n.key>u.key?1:-1}),t.updateURL()},forEach:function(t){for(var n=Ba(this).entries,u=wst(t,arguments.length>1?arguments[1]:void 0),c=0,s;c<n.length;)s=n[c++],u(s.value,s.key,this)},keys:function(){return new Kk(this,"keys")},values:function(){return new Kk(this,"values")},entries:function(){return new Kk(this,"entries")}},{enumerable:!0});Cse(Bd,Pst,Bd.entries,{name:"entries"});Cse(Bd,"toString",function(){return Ba(this).serialize()},{enumerable:!0});Fd&&gst(Bd,"size",{get:function(){return Ba(this).entries.length},configurable:!0,enumerable:!0});_st(Nb,$g);Yk({global:!0,constructor:!0,forced:!Pse},{URLSearchParams:Nb});!Pse&&Wk(Ug)&&(Tse=Ko(xse.has),Ase=Ko(xse.set),Xk=function(e){if(kse(e)){var t=e.body,n;if(Sst(t)===$g)return n=e.headers?new Ug(e.headers):new Ug,Tse(n,"content-type")||Ase(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Ist(e,{body:yse(0,gn(t)),headers:yse(0,n)})}return e},Wk(_se)&&Yk({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return _se(t,arguments.length>1?Xk(arguments[1]):{})}}),Wk(Fb)&&(zb=function(t){return Mse(this,Zk),new Fb(t,arguments.length>1?Xk(arguments[1]):{})},Zk.constructor=zb,zb.prototype=Zk,Yk({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:zb})));var Tse,Ase,Xk,zb;zse.exports={URLSearchParams:Nb,getState:Ba}});var tue=I(()=>{"use strict";UA();var Vst=V(),_O=ft(),Gst=Db(),xO=it(),Fse=or(),Ga=Pe(),Vb=tr(),ja=qr(),Hst=Ji(),vO=Mt(),bO=O2(),jd=fT(),fo=Ec(),Wst=Hc().codeAt,Zst=gse(),Zs=St(),Kst=Dn(),Xst=Fa(),Kse=rO(),Xse=Yt(),Yst=Xse.set,Gb=Xse.getterFor("URL"),Jst=Kse.URLSearchParams,Qst=Kse.getState,Vg=xO.URL,gO=xO.TypeError,Hb=xO.parseInt,eut=Math.floor,Nse=Math.pow,Va=Ga("".charAt),po=Ga(/./.exec),Hg=Ga([].join),tut=Ga(1 .toString),rut=Ga([].pop),$d=Ga([].push),iO=Ga("".replace),iut=Ga([].shift),nut=Ga("".split),Zg=Ga("".slice),Wb=Ga("".toLowerCase),aut=Ga([].unshift),out="Invalid authority",nO="Invalid scheme",rh="Invalid host",Bse="Invalid port",Yse=/[a-z]/i,sut=/[\d+-.a-z]/i,yO=/\d/,uut=/^0x/i,lut=/^[0-7]+$/,cut=/^\d+$/,Jse=/^[\da-f]+$/i,hut=/[\0\t\n\r #%/:<>?@[\\\]^|]/,fut=/[\0\t\n\r #/:<>?@[\\\]^|]/,dut=/^[\u0000-\u0020]+/,put=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,mut=/[\t\n\r]/g,Ua,vut=function(e){var t=nut(e,"."),n,u,c,s,_,w,E;if(t.length&&t[t.length-1]===""&&t.length--,n=t.length,n>4)return e;for(u=[],c=0;c<n;c++){if(s=t[c],s==="")return e;if(_=10,s.length>1&&Va(s,0)==="0"&&(_=po(uut,s)?16:8,s=Zg(s,_===8?1:2)),s==="")w=0;else{if(!po(_===10?cut:_===8?lut:Jse,s))return e;w=Hb(s,_)}$d(u,w)}for(c=0;c<n;c++)if(w=u[c],c===n-1){if(w>=Nse(256,5-n))return null}else if(w>255)return null;for(E=rut(u),c=0;c<u.length;c++)E+=u[c]*Nse(256,3-c);return E},gut=function(e){var t=[0,0,0,0,0,0,0,0],n=0,u=null,c=0,s,_,w,E,P,C,B,$=function(){return Va(e,c)};if($()===":"){if(Va(e,1)!==":")return;c+=2,n++,u=n}for(;$();){if(n===8)return;if($()===":"){if(u!==null)return;c++,n++,u=n;continue}for(s=_=0;_<4&&po(Jse,$());)s=s*16+Hb($(),16),c++,_++;if($()==="."){if(_===0||(c-=_,n>6))return;for(w=0;$();){if(E=null,w>0)if($()==="."&&w<4)c++;else return;if(!po(yO,$()))return;for(;po(yO,$());){if(P=Hb($(),10),E===null)E=P;else{if(E===0)return;E=E*10+P}if(E>255)return;c++}t[n]=t[n]*256+E,w++,(w===2||w===4)&&n++}if(w!==4)return;break}else if($()===":"){if(c++,!$())return}else if($())return;t[n++]=s}if(u!==null)for(C=n-u,n=7;n!==0&&C>0;)B=t[n],t[n--]=t[u+C-1],t[u+--C]=B;else if(n!==8)return;return t},yut=function(e){for(var t=null,n=1,u=null,c=0,s=0;s<8;s++)e[s]!==0?(c>n&&(t=u,n=c),u=null,c=0):(u===null&&(u=s),++c);return c>n&&(t=u,n=c),t},Gg=function(e){var t,n,u,c;if(typeof e=="number"){for(t=[],n=0;n<4;n++)aut(t,e%256),e=eut(e/256);return Hg(t,".")}else if(typeof e=="object"){for(t="",u=yut(e),n=0;n<8;n++)c&&e[n]===0||(c&&(c=!1),u===n?(t+=n?":":"::",c=!0):(t+=tut(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},$b={},Qse=bO({},$b,{" ":1,"\"":1,"<":1,">":1,"`":1}),eue=bO({},Qse,{"#":1,"?":1,"{":1,"}":1}),aO=bO({},eue,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Pl=function(e,t){var n=Wst(e,0);return n>32&&n<127&&!vO(t,e)?e:encodeURIComponent(e)},Bb={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Wg=function(e,t){var n;return e.length===2&&po(Yse,Va(e,0))&&((n=Va(e,1))===":"||!t&&n==="|")},jse=function(e){var t;return e.length>1&&Wg(Zg(e,0,2))&&(e.length===2||(t=Va(e,2))==="/"||t==="\\"||t==="?"||t==="#")},_ut=function(e){return e==="."||Wb(e)==="%2e"},xut=function(e){return e=Wb(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},oO={},Use={},sO={},$se={},Vse={},uO={},Gse={},Hse={},jb={},Ub={},lO={},cO={},hO={},fO={},Wse={},dO={},Ud={},Xo={},Zse={},ih={},Ws={},wO=function(e,t,n){var u=Zs(e),c,s,_;if(t){if(s=this.parse(u),s)throw new gO(s);this.searchParams=null}else{if(n!==void 0&&(c=new wO(n,!0)),s=this.parse(u,null,c),s)throw new gO(s);_=Qst(new Jst),_.bindURL(this),this.searchParams=_}};wO.prototype={type:"URL",parse:function(e,t,n){var u=this,c=t||oO,s=0,_="",w=!1,E=!1,P=!1,C,B,$,re;for(e=Zs(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=iO(e,dut,""),e=iO(e,put,"$1")),e=iO(e,mut,""),C=jd(e);s<=C.length;){switch(B=C[s],c){case oO:if(B&&po(Yse,B))_+=Wb(B),c=Use;else{if(t)return nO;c=sO;continue}break;case Use:if(B&&(po(sut,B)||B==="+"||B==="-"||B==="."))_+=Wb(B);else if(B===":"){if(t&&(u.isSpecial()!==vO(Bb,_)||_==="file"&&(u.includesCredentials()||u.port!==null)||u.scheme==="file"&&!u.host))return;if(u.scheme=_,t){u.isSpecial()&&Bb[u.scheme]===u.port&&(u.port=null);return}_="",u.scheme==="file"?c=fO:u.isSpecial()&&n&&n.scheme===u.scheme?c=$se:u.isSpecial()?c=Hse:C[s+1]==="/"?(c=Vse,s++):(u.cannotBeABaseURL=!0,$d(u.path,""),c=Zse)}else{if(t)return nO;_="",c=sO,s=0;continue}break;case sO:if(!n||n.cannotBeABaseURL&&B!=="#")return nO;if(n.cannotBeABaseURL&&B==="#"){u.scheme=n.scheme,u.path=fo(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,c=Ws;break}c=n.scheme==="file"?fO:uO;continue;case $se:if(B==="/"&&C[s+1]==="/")c=jb,s++;else{c=uO;continue}break;case Vse:if(B==="/"){c=Ub;break}else{c=Xo;continue}case uO:if(u.scheme=n.scheme,B===Ua)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=fo(n.path),u.query=n.query;else if(B==="/"||B==="\\"&&u.isSpecial())c=Gse;else if(B==="?")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=fo(n.path),u.query="",c=ih;else if(B==="#")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=fo(n.path),u.query=n.query,u.fragment="",c=Ws;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=fo(n.path),u.path.length--,c=Xo;continue}break;case Gse:if(u.isSpecial()&&(B==="/"||B==="\\"))c=jb;else if(B==="/")c=Ub;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,c=Xo;continue}break;case Hse:if(c=jb,B!=="/"||Va(_,s+1)!=="/")continue;s++;break;case jb:if(B!=="/"&&B!=="\\"){c=Ub;continue}break;case Ub:if(B==="@"){w&&(_="%40"+_),w=!0,$=jd(_);for(var xe=0;xe<$.length;xe++){var ye=$[xe];if(ye===":"&&!P){P=!0;continue}var X=Pl(ye,aO);P?u.password+=X:u.username+=X}_=""}else if(B===Ua||B==="/"||B==="?"||B==="#"||B==="\\"&&u.isSpecial()){if(w&&_==="")return out;s-=jd(_).length+1,_="",c=lO}else _+=B;break;case lO:case cO:if(t&&u.scheme==="file"){c=dO;continue}else if(B===":"&&!E){if(_==="")return rh;if(re=u.parseHost(_),re)return re;if(_="",c=hO,t===cO)return}else if(B===Ua||B==="/"||B==="?"||B==="#"||B==="\\"&&u.isSpecial()){if(u.isSpecial()&&_==="")return rh;if(t&&_===""&&(u.includesCredentials()||u.port!==null))return;if(re=u.parseHost(_),re)return re;if(_="",c=Ud,t)return;continue}else B==="["?E=!0:B==="]"&&(E=!1),_+=B;break;case hO:if(po(yO,B))_+=B;else if(B===Ua||B==="/"||B==="?"||B==="#"||B==="\\"&&u.isSpecial()||t){if(_!==""){var K=Hb(_,10);if(K>65535)return Bse;u.port=u.isSpecial()&&K===Bb[u.scheme]?null:K,_=""}if(t)return;c=Ud;continue}else return Bse;break;case fO:if(u.scheme="file",B==="/"||B==="\\")c=Wse;else if(n&&n.scheme==="file")switch(B){case Ua:u.host=n.host,u.path=fo(n.path),u.query=n.query;break;case"?":u.host=n.host,u.path=fo(n.path),u.query="",c=ih;break;case"#":u.host=n.host,u.path=fo(n.path),u.query=n.query,u.fragment="",c=Ws;break;default:jse(Hg(fo(C,s),""))||(u.host=n.host,u.path=fo(n.path),u.shortenPath()),c=Xo;continue;}else{c=Xo;continue}break;case Wse:if(B==="/"||B==="\\"){c=dO;break}n&&n.scheme==="file"&&!jse(Hg(fo(C,s),""))&&(Wg(n.path[0],!0)?$d(u.path,n.path[0]):u.host=n.host),c=Xo;continue;case dO:if(B===Ua||B==="/"||B==="\\"||B==="?"||B==="#"){if(!t&&Wg(_))c=Xo;else if(_===""){if(u.host="",t)return;c=Ud}else{if(re=u.parseHost(_),re)return re;if(u.host==="localhost"&&(u.host=""),t)return;_="",c=Ud}continue}else _+=B;break;case Ud:if(u.isSpecial()){if(c=Xo,B!=="/"&&B!=="\\")continue}else if(!t&&B==="?")u.query="",c=ih;else if(!t&&B==="#")u.fragment="",c=Ws;else if(B!==Ua&&(c=Xo,B!=="/"))continue;break;case Xo:if(B===Ua||B==="/"||B==="\\"&&u.isSpecial()||!t&&(B==="?"||B==="#")){if(xut(_)?(u.shortenPath(),B!=="/"&&!(B==="\\"&&u.isSpecial())&&$d(u.path,"")):_ut(_)?B!=="/"&&!(B==="\\"&&u.isSpecial())&&$d(u.path,""):(u.scheme==="file"&&!u.path.length&&Wg(_)&&(u.host&&(u.host=""),_=Va(_,0)+":"),$d(u.path,_)),_="",u.scheme==="file"&&(B===Ua||B==="?"||B==="#"))for(;u.path.length>1&&u.path[0]==="";)iut(u.path);B==="?"?(u.query="",c=ih):B==="#"&&(u.fragment="",c=Ws)}else _+=Pl(B,eue);break;case Zse:B==="?"?(u.query="",c=ih):B==="#"?(u.fragment="",c=Ws):B!==Ua&&(u.path[0]+=Pl(B,$b));break;case ih:!t&&B==="#"?(u.fragment="",c=Ws):B!==Ua&&(B==="'"&&u.isSpecial()?u.query+="%27":B==="#"?u.query+="%23":u.query+=Pl(B,$b));break;case Ws:B!==Ua&&(u.fragment+=Pl(B,Qse));break;}s++}},parseHost:function(e){var t,n,u;if(Va(e,0)==="["){if(Va(e,e.length-1)!=="]"||(t=gut(Zg(e,1,-1)),!t))return rh;this.host=t}else if(this.isSpecial()){if(e=Zst(e),po(hut,e)||(t=vut(e),t===null))return rh;this.host=t}else{if(po(fut,e))return rh;for(t="",n=jd(e),u=0;u<n.length;u++)t+=Pl(n[u],$b);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return vO(Bb,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!Wg(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,u=e.password,c=e.host,s=e.port,_=e.path,w=e.query,E=e.fragment,P=t+":";return c!==null?(P+="//",e.includesCredentials()&&(P+=n+(u?":"+u:"")+"@"),P+=Gg(c),s!==null&&(P+=":"+s)):t==="file"&&(P+="//"),P+=e.cannotBeABaseURL?_[0]:_.length?"/"+Hg(_,"/"):"",w!==null&&(P+="?"+w),E!==null&&(P+="#"+E),P},setHref:function(e){var t=this.parse(e);if(t)throw new gO(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Vd(e.path[0]).origin}catch(n){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+Gg(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Zs(e)+":",oO)},getUsername:function(){return this.username},setUsername:function(e){var t=jd(Zs(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Pl(t[n],aO)}},getPassword:function(){return this.password},setPassword:function(e){var t=jd(Zs(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Pl(t[n],aO)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?Gg(e):Gg(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,lO)},getHostname:function(){var e=this.host;return e===null?"":Gg(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,cO)},getPort:function(){var e=this.port;return e===null?"":Zs(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Zs(e),e===""?this.port=null:this.parse(e,hO))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Hg(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Ud))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Zs(e),e===""?this.query=null:(Va(e,0)==="?"&&(e=Zg(e,1)),this.query="",this.parse(e,ih)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Zs(e),e===""){this.fragment=null;return}Va(e,0)==="#"&&(e=Zg(e,1)),this.fragment="",this.parse(e,Ws)},update:function(){this.query=this.searchParams.serialize()||null}};var Vd=function(t){var n=Hst(this,yn),u=Xst(arguments.length,1)>1?arguments[1]:void 0,c=Yst(n,new wO(t,!1,u));_O||(n.href=c.serialize(),n.origin=c.getOrigin(),n.protocol=c.getProtocol(),n.username=c.getUsername(),n.password=c.getPassword(),n.host=c.getHost(),n.hostname=c.getHostname(),n.port=c.getPort(),n.pathname=c.getPathname(),n.search=c.getSearch(),n.searchParams=c.getSearchParams(),n.hash=c.getHash())},yn=Vd.prototype,$a=function(e,t){return{get:function(){return Gb(this)[e]()},set:t&&function(n){return Gb(this)[t](n)},configurable:!0,enumerable:!0}};_O&&(ja(yn,"href",$a("serialize","setHref")),ja(yn,"origin",$a("getOrigin")),ja(yn,"protocol",$a("getProtocol","setProtocol")),ja(yn,"username",$a("getUsername","setUsername")),ja(yn,"password",$a("getPassword","setPassword")),ja(yn,"host",$a("getHost","setHost")),ja(yn,"hostname",$a("getHostname","setHostname")),ja(yn,"port",$a("getPort","setPort")),ja(yn,"pathname",$a("getPathname","setPathname")),ja(yn,"search",$a("getSearch","setSearch")),ja(yn,"searchParams",$a("getSearchParams")),ja(yn,"hash",$a("getHash","setHash")));Vb(yn,"toJSON",function(){return Gb(this).serialize()},{enumerable:!0});Vb(yn,"toString",function(){return Gb(this).serialize()},{enumerable:!0});Vg&&(pO=Vg.createObjectURL,mO=Vg.revokeObjectURL,pO&&Vb(Vd,"createObjectURL",Fse(pO,Vg)),mO&&Vb(Vd,"revokeObjectURL",Fse(mO,Vg)));var pO,mO;Kst(Vd,"URL");Vst({global:!0,constructor:!0,forced:!Gst,sham:!_O},{URL:Vd})});var rue=I(()=>{"use strict";tue()});var aue=I(()=>{"use strict";var but=V(),wut=xt(),Sut=Oe(),qut=Fa(),iue=St(),Iut=Db(),nue=wut("URL"),Eut=Iut&&Sut(function(){nue.canParse()});but({target:"URL",stat:!0,forced:!Eut},{canParse:function(t){var n=qut(arguments.length,1),u=iue(t),c=n<2||arguments[1]===void 0?void 0:iue(arguments[1]);try{return!!new nue(u,c)}catch(s){return!1}}})});var oue=I(()=>{"use strict";var Tut=V(),Aut=He();Tut({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Aut(URL.prototype.toString,this)}})});var sue=I(()=>{"use strict";rO()});var hue=I(()=>{"use strict";var Put=tr(),Zb=Pe(),uue=St(),Cut=Fa(),cue=URLSearchParams,Kb=cue.prototype,Mut=Zb(Kb.append),lue=Zb(Kb.delete),kut=Zb(Kb.forEach),Out=Zb([].push),SO=new cue("a=1&a=2&b=3");SO.delete("a",1);SO.delete("b",void 0);SO+""!="a=2"&&Put(Kb,"delete",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return lue(this,e);var u=[];kut(this,function(B,$){Out(u,{key:$,value:B})}),Cut(t,1);for(var c=uue(e),s=uue(n),_=0,w=0,E=!1,P=u.length,C;_<P;)C=u[_++],E||C.key===c?(E=!0,lue(this,C.key)):w++;for(;w<P;)C=u[w++],C.key===c&&C.value===s||Mut(this,C.key,C.value)},{enumerable:!0,unsafe:!0})});var mue=I(()=>{"use strict";var Rut=tr(),due=Pe(),Dut=St(),Lut=Fa(),pue=URLSearchParams,qO=pue.prototype,zut=due(qO.getAll),Fut=due(qO.has),fue=new pue("a=1");(fue.has("a",2)||!fue.has("a",void 0))&&Rut(qO,"has",function(t){var n=arguments.length,u=n<2?void 0:arguments[1];if(n&&u===void 0)return Fut(this,t);var c=zut(this,t);Lut(n,1);for(var s=Dut(u),_=0;_<c.length;)if(c[_++]===s)return!0;return!1},{enumerable:!0,unsafe:!0})});var vue=I(()=>{"use strict";var Nut=ft(),But=Pe(),jut=qr(),IO=URLSearchParams.prototype,Uut=But(IO.forEach);Nut&&!("size"in IO)&&jut(IO,"size",{get:function(){var t=0;return Uut(this,function(){t++}),t},configurable:!0,enumerable:!0})});var yue=I((tMt,gue)=>{"use strict";E4();O4();R4();D4();L4();z4();F4();N4();B4();j4();U4();$4();V4();G4();H4();g5();w5();QE();U5();iT();K5();Q5();tj();nj();aj();sj();lj();uT();lT();pj();mj();yj();Tj();Aj();Cj();Mj();Iv();Jj();r6();i6();a6();s6();f6();p6();v6();_6();x6();L6();N6();B6();PT();MT();kT();V6();G6();H6();RT();SU();DU();VU();HU();WU();KU();JU();QU();l$();c$();m$();_$();b$();T$();C$();R$();s2();NE();D$();Ax();Q$();rV();nV();aV();oV();lV();hV();fV();pV();vV();yV();_V();xV();bV();qV();TV();AV();PV();BV();jV();$V();GV();HV();WV();ZV();KV();t8();l8();p8();x8();S8();A8();P8();k8();R8();L8();z8();$8();V8();G8();Z8();K8();X8();J8();L2();eG();rG();nG();oG();uG();lG();cG();hG();gG();yG();_G();wG();SG();IG();TG();zH();_A();xA();UH();$H();XH();QH();e9();n9();a9();o9();s9();u9();l9();c9();m9();g9();y9();R9();L9();Xx();U9();V9();W9();X9();J9();Q9();iW();cW();dW();mW();jA();UA();PW();KA();BW();jW();GW();HW();JW();nP();a7();h7();v7();y7();cP();I7();C7();D7();N7();B7();j7();U7();$7();V7();G7();H7();W7();Z7();K7();X7();Y7();IZ();EZ();TZ();AZ();PZ();CZ();MZ();kZ();OZ();IP();LZ();FZ();BZ();GZ();WZ();KZ();EP();TP();QZ();eK();rK();nK();lK();hK();dK();mK();gK();_K();bK();SK();PK();MK();OK();NK();UK();WK();FP();NP();KK();jP();eX();S1();yX();_X();bX();ZX();KX();XX();YX();JX();QX();tY();rY();aY();oY();lY();cY();dY();pY();mY();vY();qY();IY();PY();GY();WY();aJ();cJ();wJ();EJ();PJ();CJ();kJ();OJ();NJ();BJ();UJ();$J();VJ();GJ();HJ();KJ();XJ();iQ();lQ();hQ();fQ();dQ();mQ();vQ();bQ();SQ();IQ();EQ();PQ();CQ();MQ();LQ();HQ();KQ();YQ();JQ();eee();tee();oee();see();uee();lee();cee();fee();dee();pee();vee();gee();_ee();wee();Ree();$ee();Gee();Wee();Zee();Xee();Yee();Jee();rte();ite();ote();ute();lte();hte();dte();pte();vte();gte();yte();xte();wte();Ste();qte();Ite();Ete();Ate();Pte();Cte();Mte();kte();Ote();Rte();Dte();Nte();Bte();jte();$te();Vte();Gte();Kte();Xte();Yte();Jte();dre();pre();mre();vre();gre();Sre();Ire();Tre();Mre();Ore();Dre();Fre();Bre();Ure();Vre();Wre();Zre();pie();_ie();xie();wie();Sie();qie();Tie();Aie();Cie();Mie();Oie();Rie();Lie();zie();Nie();jie();Uie();$ie();Vie();Hie();Wie();Kie();Xie();Yie();rne();sne();Ene();Tne();Ane();Pne();Cne();Mne();kne();Rne();Dne();Une();$ne();Vne();Gne();Hne();Wne();Zne();Kne();Yne();Jne();eae();rae();iae();nae();oae();sae();uae();lae();cae();hae();pae();mae();vae();yae();_ae();wae();Sae();qae();Iae();Rae();$ae();Xae();roe();poe();boe();Soe();Roe();Doe();zoe();Qoe();ose();rue();aue();oue();sue();hue();mue();vue();gue.exports=D0()});var xue=I((rMt,_ue)=>{"use strict";_ue.exports=yue()});var EO=I((iMt,bue)=>{"use strict";bue.exports=function(t,n){return function(){for(var c=new Array(arguments.length),s=0;s<c.length;s++)c[s]=arguments[s];return t.apply(n,c)}}});var jn=I((nMt,que)=>{"use strict";var $ut=EO(),nh=Object.prototype.toString;function PO(e){return nh.call(e)==="[object Array]"}function TO(e){return typeof e=="undefined"}function Vut(e){return e!==null&&!TO(e)&&e.constructor!==null&&!TO(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function Gut(e){return nh.call(e)==="[object ArrayBuffer]"}function Hut(e){return typeof FormData!="undefined"&&e instanceof FormData}function Wut(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function Zut(e){return typeof e=="string"}function Kut(e){return typeof e=="number"}function wue(e){return e!==null&&typeof e=="object"}function Xb(e){if(nh.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Xut(e){return nh.call(e)==="[object Date]"}function Yut(e){return nh.call(e)==="[object File]"}function Jut(e){return nh.call(e)==="[object Blob]"}function Sue(e){return nh.call(e)==="[object Function]"}function Qut(e){return wue(e)&&Sue(e.pipe)}function elt(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function tlt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function rlt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function CO(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),PO(e))for(var n=0,u=e.length;n<u;n++)t.call(null,e[n],n,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function AO(){var e={};function t(c,s){Xb(e[s])&&Xb(c)?e[s]=AO(e[s],c):Xb(c)?e[s]=AO({},c):PO(c)?e[s]=c.slice():e[s]=c}for(var n=0,u=arguments.length;n<u;n++)CO(arguments[n],t);return e}function ilt(e,t,n){return CO(t,function(c,s){n&&typeof c=="function"?e[s]=$ut(c,n):e[s]=c}),e}function nlt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}que.exports={isArray:PO,isArrayBuffer:Gut,isBuffer:Vut,isFormData:Hut,isArrayBufferView:Wut,isString:Zut,isNumber:Kut,isObject:wue,isPlainObject:Xb,isUndefined:TO,isDate:Xut,isFile:Yut,isBlob:Jut,isFunction:Sue,isStream:Qut,isURLSearchParams:elt,isStandardBrowserEnv:rlt,forEach:CO,merge:AO,extend:ilt,trim:tlt,stripBOM:nlt}});var MO=I((aMt,Eue)=>{"use strict";var Gd=jn();function Iue(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}Eue.exports=function(t,n,u){if(!n)return t;var c;if(u)c=u(n);else if(Gd.isURLSearchParams(n))c=n.toString();else{var s=[];Gd.forEach(n,function(E,P){E===null||typeof E=="undefined"||(Gd.isArray(E)?P=P+"[]":E=[E],Gd.forEach(E,function(B){Gd.isDate(B)?B=B.toISOString():Gd.isObject(B)&&(B=JSON.stringify(B)),s.push(Iue(P)+"="+Iue(B))}))}),c=s.join("&")}if(c){var _=t.indexOf("#");_!==-1&&(t=t.slice(0,_)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}});var Aue=I((oMt,Tue)=>{"use strict";var alt=jn();function Yb(){this.handlers=[]}Yb.prototype.use=function(t,n,u){return this.handlers.push({fulfilled:t,rejected:n,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1};Yb.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Yb.prototype.forEach=function(t){alt.forEach(this.handlers,function(u){u!==null&&t(u)})};Tue.exports=Yb});var Cue=I((sMt,Pue)=>{"use strict";var olt=jn();Pue.exports=function(t,n){olt.forEach(t,function(c,s){s!==n&&s.toUpperCase()===n.toUpperCase()&&(t[n]=c,delete t[s])})}});var kO=I((uMt,Mue)=>{"use strict";Mue.exports=function(t,n,u,c,s){return t.config=n,u&&(t.code=u),t.request=c,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var OO=I((lMt,kue)=>{"use strict";var slt=kO();kue.exports=function(t,n,u,c,s){var _=new Error(t);return slt(_,n,u,c,s)}});var Rue=I((cMt,Oue)=>{"use strict";var ult=OO();Oue.exports=function(t,n,u){var c=u.config.validateStatus;!u.status||!c||c(u.status)?t(u):n(ult("Request failed with status code "+u.status,u.config,null,u.request,u))}});var Lue=I((hMt,Due)=>{"use strict";var Jb=jn();Due.exports=Jb.isStandardBrowserEnv()?function(){return{write:function(n,u,c,s,_,w){var E=[];E.push(n+"="+encodeURIComponent(u)),Jb.isNumber(c)&&E.push("expires="+new Date(c).toGMTString()),Jb.isString(s)&&E.push("path="+s),Jb.isString(_)&&E.push("domain="+_),w===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(n){var u=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Fue=I((fMt,zue)=>{"use strict";zue.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var Bue=I((dMt,Nue)=>{"use strict";Nue.exports=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}});var Uue=I((pMt,jue)=>{"use strict";var llt=Fue(),clt=Bue();jue.exports=function(t,n){return t&&!llt(n)?clt(t,n):n}});var Vue=I((mMt,$ue)=>{"use strict";var RO=jn(),hlt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];$ue.exports=function(t){var n={},u,c,s;return t&&RO.forEach(t.split(`
`),function(w){if(s=w.indexOf(":"),u=RO.trim(w.substr(0,s)).toLowerCase(),c=RO.trim(w.substr(s+1)),u){if(n[u]&&hlt.indexOf(u)>=0)return;u==="set-cookie"?n[u]=(n[u]?n[u]:[]).concat([c]):n[u]=n[u]?n[u]+", "+c:c}}),n}});var Wue=I((vMt,Hue)=>{"use strict";var Gue=jn();Hue.exports=Gue.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),u;function c(s){var _=s;return t&&(n.setAttribute("href",_),_=n.href),n.setAttribute("href",_),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return u=c(window.location.href),function(_){var w=Gue.isString(_)?c(_):_;return w.protocol===u.protocol&&w.host===u.host}}():function(){return function(){return!0}}()});var Kg=I((gMt,Zue)=>{"use strict";function DO(e){this.message=e}DO.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};DO.prototype.__CANCEL__=!0;Zue.exports=DO});var zO=I((yMt,Kue)=>{"use strict";var Qb=jn(),flt=Rue(),dlt=Lue(),plt=MO(),mlt=Uue(),vlt=Vue(),glt=Wue(),LO=OO(),ylt=Xg(),_lt=Kg();Kue.exports=function(t){return new Promise(function(u,c){var s=t.data,_=t.headers,w=t.responseType,E;function P(){t.cancelToken&&t.cancelToken.unsubscribe(E),t.signal&&t.signal.removeEventListener("abort",E)}Qb.isFormData(s)&&delete _["Content-Type"];var C=new XMLHttpRequest;if(t.auth){var B=t.auth.username||"",$=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";_.Authorization="Basic "+btoa(B+":"+$)}var re=mlt(t.baseURL,t.url);C.open(t.method.toUpperCase(),plt(re,t.params,t.paramsSerializer),!0),C.timeout=t.timeout;function xe(){if(C){var X="getAllResponseHeaders"in C?vlt(C.getAllResponseHeaders()):null,K=!w||w==="text"||w==="json"?C.responseText:C.response,ie={data:K,status:C.status,statusText:C.statusText,headers:X,config:t,request:C};flt(function(be){u(be),P()},function(be){c(be),P()},ie),C=null}}if("onloadend"in C?C.onloadend=xe:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(xe)},C.onabort=function(){C&&(c(LO("Request aborted",t,"ECONNABORTED",C)),C=null)},C.onerror=function(){c(LO("Network Error",t,null,C)),C=null},C.ontimeout=function(){var K=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",ie=t.transitional||ylt.transitional;t.timeoutErrorMessage&&(K=t.timeoutErrorMessage),c(LO(K,t,ie.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},Qb.isStandardBrowserEnv()){var ye=(t.withCredentials||glt(re))&&t.xsrfCookieName?dlt.read(t.xsrfCookieName):void 0;ye&&(_[t.xsrfHeaderName]=ye)}"setRequestHeader"in C&&Qb.forEach(_,function(K,ie){typeof s=="undefined"&&ie.toLowerCase()==="content-type"?delete _[ie]:C.setRequestHeader(ie,K)}),Qb.isUndefined(t.withCredentials)||(C.withCredentials=!!t.withCredentials),w&&w!=="json"&&(C.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&C.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(E=function(X){C&&(c(!X||X&&X.type?new _lt("canceled"):X),C.abort(),C=null)},t.cancelToken&&t.cancelToken.subscribe(E),t.signal&&(t.signal.aborted?E():t.signal.addEventListener("abort",E))),s||(s=null),C.send(s)})}});var Xg=I((_Mt,Jue)=>{"use strict";var Ri=jn(),Xue=Cue(),xlt=kO(),blt={"Content-Type":"application/x-www-form-urlencoded"};function Yue(e,t){!Ri.isUndefined(e)&&Ri.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function wlt(){var e;return typeof XMLHttpRequest!="undefined"?e=zO():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=zO()),e}function Slt(e,t,n){if(Ri.isString(e))try{return(t||JSON.parse)(e),Ri.trim(e)}catch(u){if(u.name!=="SyntaxError")throw u}return(n||JSON.stringify)(e)}var ew={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:wlt(),transformRequest:[function(t,n){return Xue(n,"Accept"),Xue(n,"Content-Type"),Ri.isFormData(t)||Ri.isArrayBuffer(t)||Ri.isBuffer(t)||Ri.isStream(t)||Ri.isFile(t)||Ri.isBlob(t)?t:Ri.isArrayBufferView(t)?t.buffer:Ri.isURLSearchParams(t)?(Yue(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ri.isObject(t)||n&&n["Content-Type"]==="application/json"?(Yue(n,"application/json"),Slt(t)):t}],transformResponse:[function(t){var n=this.transitional||ew.transitional,u=n&&n.silentJSONParsing,c=n&&n.forcedJSONParsing,s=!u&&this.responseType==="json";if(s||c&&Ri.isString(t)&&t.length)try{return JSON.parse(t)}catch(_){if(s)throw _.name==="SyntaxError"?xlt(_,this,"E_JSON_PARSE"):_}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ri.forEach(["delete","get","head"],function(t){ew.headers[t]={}});Ri.forEach(["post","put","patch"],function(t){ew.headers[t]=Ri.merge(blt)});Jue.exports=ew});var ele=I((xMt,Que)=>{"use strict";var qlt=jn(),Ilt=Xg();Que.exports=function(t,n,u){var c=this||Ilt;return qlt.forEach(u,function(_){t=_.call(c,t,n)}),t}});var FO=I((bMt,tle)=>{"use strict";tle.exports=function(t){return!!(t&&t.__CANCEL__)}});var nle=I((wMt,ile)=>{"use strict";var rle=jn(),NO=ele(),Elt=FO(),Tlt=Xg(),Alt=Kg();function BO(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Alt("canceled")}ile.exports=function(t){BO(t),t.headers=t.headers||{},t.data=NO.call(t,t.data,t.headers,t.transformRequest),t.headers=rle.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),rle.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var n=t.adapter||Tlt.adapter;return n(t).then(function(c){return BO(t),c.data=NO.call(t,c.data,c.headers,t.transformResponse),c},function(c){return Elt(c)||(BO(t),c&&c.response&&(c.response.data=NO.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})}});var jO=I((SMt,ale)=>{"use strict";var ca=jn();ale.exports=function(t,n){n=n||{};var u={};function c(C,B){return ca.isPlainObject(C)&&ca.isPlainObject(B)?ca.merge(C,B):ca.isPlainObject(B)?ca.merge({},B):ca.isArray(B)?B.slice():B}function s(C){if(ca.isUndefined(n[C])){if(!ca.isUndefined(t[C]))return c(void 0,t[C])}else return c(t[C],n[C])}function _(C){if(!ca.isUndefined(n[C]))return c(void 0,n[C])}function w(C){if(ca.isUndefined(n[C])){if(!ca.isUndefined(t[C]))return c(void 0,t[C])}else return c(void 0,n[C])}function E(C){if(C in n)return c(t[C],n[C]);if(C in t)return c(void 0,t[C])}var P={url:_,method:_,data:_,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:E};return ca.forEach(Object.keys(t).concat(Object.keys(n)),function(B){var $=P[B]||s,re=$(B);ca.isUndefined(re)&&$!==E||(u[B]=re)}),u}});var UO=I((qMt,ole)=>{ole.exports={version:"0.24.0"}});var lle=I((IMt,ule)=>{"use strict";var Plt=UO().version,$O={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){$O[e]=function(u){return typeof u===e||"a"+(t<1?"n ":" ")+e}});var sle={};$O.transitional=function(t,n,u){function c(s,_){return"[Axios v"+Plt+"] Transitional option '"+s+"'"+_+(u?". "+u:"")}return function(s,_,w){if(t===!1)throw new Error(c(_," has been removed"+(n?" in "+n:"")));return n&&!sle[_]&&(sle[_]=!0,console.warn(c(_," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(s,_,w):!0}};function Clt(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var u=Object.keys(e),c=u.length;c-->0;){var s=u[c],_=t[s];if(_){var w=e[s],E=w===void 0||_(w,s,e);if(E!==!0)throw new TypeError("option "+s+" must be "+E);continue}if(n!==!0)throw Error("Unknown option "+s)}}ule.exports={assertOptions:Clt,validators:$O}});var mle=I((EMt,ple)=>{"use strict";var fle=jn(),Mlt=MO(),cle=Aue(),hle=nle(),tw=jO(),dle=lle(),Hd=dle.validators;function Yg(e){this.defaults=e,this.interceptors={request:new cle,response:new cle}}Yg.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=tw(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&dle.assertOptions(n,{silentJSONParsing:Hd.transitional(Hd.boolean),forcedJSONParsing:Hd.transitional(Hd.boolean),clarifyTimeoutError:Hd.transitional(Hd.boolean)},!1);var u=[],c=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(t)===!1||(c=c&&$.synchronous,u.unshift($.fulfilled,$.rejected))});var s=[];this.interceptors.response.forEach(function($){s.push($.fulfilled,$.rejected)});var _;if(!c){var w=[hle,void 0];for(Array.prototype.unshift.apply(w,u),w=w.concat(s),_=Promise.resolve(t);w.length;)_=_.then(w.shift(),w.shift());return _}for(var E=t;u.length;){var P=u.shift(),C=u.shift();try{E=P(E)}catch(B){C(B);break}}try{_=hle(E)}catch(B){return Promise.reject(B)}for(;s.length;)_=_.then(s.shift(),s.shift());return _};Yg.prototype.getUri=function(t){return t=tw(this.defaults,t),Mlt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};fle.forEach(["delete","get","head","options"],function(t){Yg.prototype[t]=function(n,u){return this.request(tw(u||{},{method:t,url:n,data:(u||{}).data}))}});fle.forEach(["post","put","patch"],function(t){Yg.prototype[t]=function(n,u,c){return this.request(tw(c||{},{method:t,url:n,data:u}))}});ple.exports=Yg});var gle=I((TMt,vle)=>{"use strict";var klt=Kg();function Wd(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(c){t=c});var n=this;this.promise.then(function(u){if(n._listeners){var c,s=n._listeners.length;for(c=0;c<s;c++)n._listeners[c](u);n._listeners=null}}),this.promise.then=function(u){var c,s=new Promise(function(_){n.subscribe(_),c=_}).then(u);return s.cancel=function(){n.unsubscribe(c)},s},e(function(c){n.reason||(n.reason=new klt(c),t(n.reason))})}Wd.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Wd.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Wd.prototype.unsubscribe=function(t){if(this._listeners){var n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}};Wd.source=function(){var t,n=new Wd(function(c){t=c});return{token:n,cancel:t}};vle.exports=Wd});var _le=I((AMt,yle)=>{"use strict";yle.exports=function(t){return function(u){return t.apply(null,u)}}});var ble=I((PMt,xle)=>{"use strict";xle.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var qle=I((CMt,VO)=>{"use strict";var wle=jn(),Olt=EO(),rw=mle(),Rlt=jO(),Dlt=Xg();function Sle(e){var t=new rw(e),n=Olt(rw.prototype.request,t);return wle.extend(n,rw.prototype,t),wle.extend(n,t),n.create=function(c){return Sle(Rlt(e,c))},n}var Yo=Sle(Dlt);Yo.Axios=rw;Yo.Cancel=Kg();Yo.CancelToken=gle();Yo.isCancel=FO();Yo.VERSION=UO().version;Yo.all=function(t){return Promise.all(t)};Yo.spread=_le();Yo.isAxiosError=ble();VO.exports=Yo;VO.exports.default=Yo});var GO=I((MMt,Ile)=>{Ile.exports=qle()});var Tle=I((HO,WO)=>{(function(e,t){typeof HO=="object"&&typeof WO!="undefined"?WO.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(HO,function(){"use strict";var e={},t={};function n(c,s,_){if(t[c]=_,c==="index"){var w="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",E={};return t.shared(E),t.index(e,E),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),e}}n("shared",["exports"],function(c){"use strict";function s(a,i,o,h){return new(o||(o=Promise))(function(p,g){function y(A){try{S(h.next(A))}catch(M){g(M)}}function x(A){try{S(h.throw(A))}catch(M){g(M)}}function S(A){var M;A.done?p(A.value):(M=A.value,M instanceof o?M:new o(function(O){O(M)})).then(y,x)}S((h=h.apply(a,i||[])).next())})}function _(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var w=E;function E(a,i){this.x=a,this.y=i}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,o=a.y-this.y;return i*i+o*o},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),o=Math.sin(a),h=o*this.x+i*this.y;return this.x=i*this.x-o*this.y,this.y=h,this},_rotateAround:function(a,i){var o=Math.cos(a),h=Math.sin(a),p=i.y+h*(this.x-i.x)+o*(this.y-i.y);return this.x=i.x+o*(this.x-i.x)-h*(this.y-i.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(a){return a instanceof E?a:Array.isArray(a)?new E(a[0],a[1]):a};var P=_(w),C=B;function B(a,i,o,h){this.cx=3*a,this.bx=3*(o-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=o,this.p2y=h}B.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var o=a,h=0;h<8;h++){var p=this.sampleCurveX(o)-a;if(Math.abs(p)<i)return o;var g=this.sampleCurveDerivativeX(o);if(Math.abs(g)<1e-6)break;o-=p/g}var y=0,x=1;for(o=a,h=0;h<20&&(p=this.sampleCurveX(o),!(Math.abs(p-a)<i));h++)a>p?y=o:x=o,o=.5*(x-y)+y;return o},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var $=_(C);let re,xe;function ye(){return re==null&&(re=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),re}function X(){if(xe==null&&(xe=!1,ye())){let i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){let p=4*h;i.fillStyle=`rgb(${p},${p+1},${p+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}let o=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&o[h]!==h){xe=!0;break}}}return xe||!1}function K(a,i,o,h){let p=new $(a,i,o,h);return g=>p.solve(g)}let ie=K(.25,.1,.25,1);function _e(a,i,o){return Math.min(o,Math.max(i,a))}function be(a,i,o){let h=o-i,p=((a-i)%h+h)%h+i;return p===i?o:p}function Qe(a,...i){for(let o of i)for(let h in o)a[h]=o[h];return a}let Le=1;function nt(a,i,o){let h={};for(let p in a)h[p]=i.call(this,a[p],p,a);return h}function gt(a,i,o){let h={};for(let p in a)i.call(this,a[p],p,a)&&(h[p]=a[p]);return h}function Je(a){return Array.isArray(a)?a.map(Je):typeof a=="object"&&a?nt(a,Je):a}let en={};function Yr(a){en[a]||(typeof console!="undefined"&&console.warn(a),en[a]=!0)}function xi(a,i,o){return(o.y-a.y)*(i.x-a.x)>(i.y-a.y)*(o.x-a.x)}function Ha(a){return typeof WorkerGlobalScope!="undefined"&&a!==void 0&&a instanceof WorkerGlobalScope}let Ks=null;function ha(a){return typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap}let ah="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Jo(a,i,o,h,p){return s(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let g=new VideoFrame(a,{timestamp:0});try{let y=g==null?void 0:g.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);let x=y.startsWith("BGR"),S=new Uint8ClampedArray(h*p*4);if(yield g.copyTo(S,function(A,M,O,L,N){let U=4*Math.max(-M,0),G=(Math.max(0,O)-O)*L*4+U,J=4*L,ne=Math.max(0,M),ve=Math.max(0,O);return{rect:{x:ne,y:ve,width:Math.min(A.width,M+L)-ne,height:Math.min(A.height,O+N)-ve},layout:[{offset:G,stride:J}]}}(a,i,o,h,p)),x)for(let A=0;A<S.length;A+=4){let M=S[A];S[A]=S[A+2],S[A+2]=M}return S}finally{g.close()}})}let Wa,Di,$n="AbortError";function Xs(){return new Error($n)}let mo={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function fa(a){return mo.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}let Ys="global-dispatcher";class tn extends Error{constructor(i,o,h,p){super(`AJAXError: ${o} (${i}): ${h}`),this.status=i,this.statusText=o,this.url=h,this.body=p}}let Vn=()=>Ha(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Qo=function(a,i){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){let h=fa(a.url);if(h)return h(a,i);if(Ha(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:Ys},i)}if(!(/^file:/.test(o=a.url)||/^file:/.test(Vn())&&!/^\w+:/.test(o))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return s(this,void 0,void 0,function*(){let g=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:Vn(),signal:p.signal});h.type!=="json"||g.headers.has("Accept")||g.headers.set("Accept","application/json");let y=yield fetch(g);if(!y.ok){let A=yield y.blob();throw new tn(y.status,y.statusText,h.url,A)}let x;x=h.type==="arrayBuffer"||h.type==="image"?y.arrayBuffer():h.type==="json"?y.json():y.text();let S=yield x;if(p.signal.aborted)throw Xs();return{data:S,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}})}(a,i);if(Ha(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:Ys},i)}var o;return function(h,p){return new Promise((g,y)=>{var x;let S=new XMLHttpRequest;S.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(S.responseType="arraybuffer");for(let A in h.headers)S.setRequestHeader(A,h.headers[A]);h.type==="json"&&(S.responseType="text",!((x=h.headers)===null||x===void 0)&&x.Accept||S.setRequestHeader("Accept","application/json")),S.withCredentials=h.credentials==="include",S.onerror=()=>{y(new Error(S.statusText))},S.onload=()=>{if(!p.signal.aborted)if((S.status>=200&&S.status<300||S.status===0)&&S.response!==null){let A=S.response;if(h.type==="json")try{A=JSON.parse(S.response)}catch(M){return void y(M)}g({data:A,cacheControl:S.getResponseHeader("Cache-Control"),expires:S.getResponseHeader("Expires")})}else{let A=new Blob([S.response],{type:S.getResponseHeader("Content-Type")});y(new tn(S.status,S.statusText,h.url,A))}},p.signal.addEventListener("abort",()=>{S.abort(),y(Xs())}),S.send(h.body)})}(a,i)};function es(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;let i=new URL(a),o=window.location;return i.protocol===o.protocol&&i.host===o.host}function Cl(a,i,o){o[a]&&o[a].indexOf(i)!==-1||(o[a]=o[a]||[],o[a].push(i))}function Za(a,i,o){if(o&&o[a]){let h=o[a].indexOf(i);h!==-1&&o[a].splice(h,1)}}class vo{constructor(i,o={}){Qe(this,o),this.type=i}}class go extends vo{constructor(i,o={}){super("error",Qe({error:i},o))}}class Js{on(i,o){return this._listeners=this._listeners||{},Cl(i,o,this._listeners),this}off(i,o){return Za(i,o,this._listeners),Za(i,o,this._oneTimeListeners),this}once(i,o){return o?(this._oneTimeListeners=this._oneTimeListeners||{},Cl(i,o,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,o){typeof i=="string"&&(i=new vo(i,o||{}));let h=i.type;if(this.listens(h)){i.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let x of p)x.call(this,i);let g=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let x of g)Za(h,x,this._oneTimeListeners),x.call(this,i);let y=this._eventedParent;y&&(Qe(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(i))}else i instanceof go&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,o){return this._eventedParent=i,this._eventedParentData=o,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let ts=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ml(a,i){let o={};for(let h in a)h!=="ref"&&(o[h]=a[h]);return ts.forEach(h=>{h in i&&(o[h]=i[h])}),o}function Vt(a,i){if(Array.isArray(a)){if(!Array.isArray(i)||a.length!==i.length)return!1;for(let o=0;o<a.length;o++)if(!Vt(a[o],i[o]))return!1;return!0}if(typeof a=="object"&&a!==null&&i!==null){if(typeof i!="object"||Object.keys(a).length!==Object.keys(i).length)return!1;for(let o in a)if(!Vt(a[o],i[o]))return!1;return!0}return a===i}function _r(a,i){a.push(i)}function kl(a,i,o){_r(o,{command:"addSource",args:[a,i[a]]})}function yo(a,i,o){_r(i,{command:"removeSource",args:[a]}),o[a]=!0}function Ka(a,i,o,h){yo(a,o,h),kl(a,i,o)}function Qs(a,i,o){let h;for(h in a[o])if(Object.prototype.hasOwnProperty.call(a[o],h)&&h!=="data"&&!Vt(a[o][h],i[o][h]))return!1;for(h in i[o])if(Object.prototype.hasOwnProperty.call(i[o],h)&&h!=="data"&&!Vt(a[o][h],i[o][h]))return!1;return!0}function _n(a,i,o,h,p,g){a=a||{},i=i||{};for(let y in a)Object.prototype.hasOwnProperty.call(a,y)&&(Vt(a[y],i[y])||o.push({command:g,args:[h,y,i[y],p]}));for(let y in i)Object.prototype.hasOwnProperty.call(i,y)&&!Object.prototype.hasOwnProperty.call(a,y)&&(Vt(a[y],i[y])||o.push({command:g,args:[h,y,i[y],p]}))}function Ol(a){return a.id}function Rl(a,i){return a[i.id]=i,a}class ke{constructor(i,o,h,p){this.message=(i?`${i}: `:"")+h,p&&(this.identifier=p),o!=null&&o.__line__&&(this.line=o.__line__)}}function da(a,...i){for(let o of i)for(let h in o)a[h]=o[h];return a}class bi extends Error{constructor(i,o){super(o),this.message=o,this.key=i}}class pa{constructor(i,o=[]){this.parent=i,this.bindings={};for(let[h,p]of o)this.bindings[h]=p}concat(i){return new pa(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}let _o={kind:"null"},Fe={kind:"number"},At={kind:"string"},dt={kind:"boolean"},Li={kind:"color"},Gn={kind:"object"},_t={kind:"value"},ma={kind:"collator"},Xa={kind:"formatted"},xo={kind:"padding"},va={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function F(a,i){return{kind:"array",itemType:a,N:i}}function z(a){if(a.kind==="array"){let i=z(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}let W=[_o,Fe,At,dt,Li,Xa,Gn,F(_t),xo,va,te];function Q(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Q(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(let o of W)if(!Q(o,i))return null}}return`Expected ${z(a)} but found ${z(i)} instead.`}function ce(a,i){return i.some(o=>o.kind===a.kind)}function fe(a,i){return i.some(o=>o==="null"?a===null:o==="array"?Array.isArray(a):o==="object"?a&&!Array.isArray(a)&&typeof a=="object":o===typeof a)}function me(a,i){return a.kind==="array"&&i.kind==="array"?a.itemType.kind===i.itemType.kind&&typeof a.N=="number":a.kind===i.kind}let se=.96422,Ie=.82521,Ae=4/29,we=6/29,Re=3*we*we,st=we*we*we,lt=Math.PI/180,Bt=180/Math.PI;function wt(a){return(a%=360)<0&&(a+=360),a}function jt([a,i,o,h]){let p,g,y=Lr((.2225045*(a=Ot(a))+.7168786*(i=Ot(i))+.0606169*(o=Ot(o)))/1);a===i&&i===o?p=g=y:(p=Lr((.4360747*a+.3850649*i+.1430804*o)/se),g=Lr((.0139322*a+.0971045*i+.7141733*o)/Ie));let x=116*y-16;return[x<0?0:x,500*(p-y),200*(y-g),h]}function Ot(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Lr(a){return a>st?Math.pow(a,1/3):a/Re+Ae}function xr([a,i,o,h]){let p=(a+16)/116,g=isNaN(i)?p:p+i/500,y=isNaN(o)?p:p-o/200;return p=1*Kt(p),g=se*Kt(g),y=Ie*Kt(y),[Pt(3.1338561*g-1.6168667*p-.4906146*y),Pt(-.9787684*g+1.9161415*p+.033454*y),Pt(.0719453*g-.2289914*p+1.4052427*y),h]}function Pt(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Kt(a){return a>we?a*a*a:Re*(a-Ae)}function pr(a){return parseInt(a.padEnd(2,a),16)/255}function Jr(a,i){return ii(i?a/100:a,0,1)}function ii(a,i,o){return Math.min(Math.max(i,a),o)}function wi(a){return!a.some(Number.isNaN)}let eu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Xt{constructor(i,o,h,p=1,g=!0){this.r=i,this.g=o,this.b=h,this.a=p,g||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[i,o,h,p]))}static parse(i){if(i instanceof Xt)return i;if(typeof i!="string")return;let o=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let p=eu[h];if(p){let[y,x,S]=p;return[y/255,x/255,S/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let y=h.length<6?1:2,x=1;return[pr(h.slice(x,x+=y)),pr(h.slice(x,x+=y)),pr(h.slice(x,x+=y)),pr(h.slice(x,x+y)||"ff")]}if(h.startsWith("rgb")){let y=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[x,S,A,M,O,L,N,U,G,J,ne,ve]=y,le=[M||" ",N||" ",J].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){let pe=[A,L,G].join(""),qe=pe==="%%%"?100:pe===""?255:0;if(qe){let Ce=[ii(+S/qe,0,1),ii(+O/qe,0,1),ii(+U/qe,0,1),ne?Jr(+ne,ve):1];if(wi(Ce))return Ce}}return}}let g=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){let[y,x,S,A,M,O,L,N,U]=g,G=[S||" ",M||" ",L].join("");if(G==="  "||G==="  /"||G===",,"||G===",,,"){let J=[+x,ii(+A,0,100),ii(+O,0,100),N?Jr(+N,U):1];if(wi(J))return function([ne,ve,le,pe]){function qe(Ce){let Ge=(Ce+ne/30)%12,ct=ve*Math.min(le,1-le);return le-ct*Math.max(-1,Math.min(Ge-3,9-Ge,1))}return ne=wt(ne),ve/=100,le/=100,[qe(0),qe(8),qe(4),pe]}(J)}}}(i);return o?new Xt(...o,!1):void 0}get rgb(){let{r:i,g:o,b:h,a:p}=this,g=p||1/0;return this.overwriteGetter("rgb",[i/g,o/g,h/g,p])}get hcl(){return this.overwriteGetter("hcl",function(i){let[o,h,p,g]=jt(i),y=Math.sqrt(h*h+p*p);return[Math.round(1e4*y)?wt(Math.atan2(p,h)*Bt):NaN,y,o,g]}(this.rgb))}get lab(){return this.overwriteGetter("lab",jt(this.rgb))}overwriteGetter(i,o){return Object.defineProperty(this,i,{value:o}),o}toString(){let[i,o,h,p]=this.rgb;return`rgba(${[i,o,h].map(g=>Math.round(255*g)).join(",")},${p})`}}Xt.black=new Xt(0,0,0,1),Xt.white=new Xt(1,1,1,1),Xt.transparent=new Xt(0,0,0,0),Xt.red=new Xt(1,0,0,1);class Zd{constructor(i,o,h){this.sensitivity=i?o?"variant":"case":o?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,o){return this.collator.compare(i,o)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Kd{constructor(i,o,h,p,g){this.text=i,this.image=o,this.scale=h,this.fontStack=p,this.textColor=g}}class rn{constructor(i){this.sections=i}static fromString(i){return new rn([new Kd(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof rn?i:rn.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class nn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof nn)return i;if(typeof i=="number")return new nn([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(let o of i)if(typeof o!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]];}return new nn(i)}}toString(){return JSON.stringify(this.values)}}let aw=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class xn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof xn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let o=0;o<i.length;o+=2){let h=i[o],p=i[o+1];if(typeof h!="string"||!aw.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new xn(i)}}toString(){return JSON.stringify(this.values)}}class an{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new an({name:i,available:!1}):null}}function tu(a,i,o,h){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof o=="number"&&o>=0&&o<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,i,o,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,i,o,h]:[a,i,o]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function rs(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Xt||a instanceof Zd||a instanceof rn||a instanceof nn||a instanceof xn||a instanceof an)return!0;if(Array.isArray(a)){for(let i of a)if(!rs(i))return!1;return!0}if(typeof a=="object"){for(let i in a)if(!rs(a[i]))return!1;return!0}return!1}function zr(a){if(a===null)return _o;if(typeof a=="string")return At;if(typeof a=="boolean")return dt;if(typeof a=="number")return Fe;if(a instanceof Xt)return Li;if(a instanceof Zd)return ma;if(a instanceof rn)return Xa;if(a instanceof nn)return xo;if(a instanceof xn)return te;if(a instanceof an)return va;if(Array.isArray(a)){let i=a.length,o;for(let h of a){let p=zr(h);if(o){if(o===p)continue;o=_t;break}o=p}return F(o||_t,i)}return Gn}function Dl(a){let i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof Xt||a instanceof rn||a instanceof nn||a instanceof xn||a instanceof an?a.toString():JSON.stringify(a)}class Hn{constructor(i,o){this.type=i,this.value=o}static parse(i,o){if(i.length!==2)return o.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!rs(i[1]))return o.error("invalid value");let h=i[1],p=zr(h),g=o.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new Hn(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Mr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}let oh={string:At,number:Fe,boolean:dt,object:Gn};class Wn{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h,p=1,g=i[0];if(g==="array"){let x,S;if(i.length>2){let A=i[1];if(typeof A!="string"||!(A in oh)||A==="object")return o.error("The item type argument of \"array\" must be one of string, number, boolean",1);x=oh[A],p++}else x=_t;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return o.error("The length argument to \"array\" must be a positive integer literal",2);S=i[2],p++}h=F(x,S)}else{if(!oh[g])throw new Error(`Types doesn't contain name = ${g}`);h=oh[g]}let y=[];for(;p<i.length;p++){let x=o.parse(i[p],p,_t);if(!x)return null;y.push(x)}return new Wn(h,y)}evaluate(i){for(let o=0;o<this.args.length;o++){let h=this.args[o].evaluate(i);if(!Q(this.type,zr(h)))return h;if(o===this.args.length-1)throw new Mr(`Expected value to be of type ${z(this.type)}, but found ${z(zr(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let Xd={"to-boolean":dt,"to-color":Li,"to-number":Fe,"to-string":At};class Zn{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h=i[0];if(!Xd[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return o.error("Expected one argument.");let p=Xd[h],g=[];for(let y=1;y<i.length;y++){let x=o.parse(i[y],y,_t);if(!x)return null;g.push(x)}return new Zn(p,g)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let o,h;for(let p of this.args){if(o=p.evaluate(i),h=null,o instanceof Xt)return o;if(typeof o=="string"){let g=i.parseColor(o);if(g)return g}else if(Array.isArray(o)&&(h=o.length<3||o.length>4?`Invalid rbga value ${JSON.stringify(o)}: expected an array containing either three or four numeric values.`:tu(o[0],o[1],o[2],o[3]),!h))return new Xt(o[0]/255,o[1]/255,o[2]/255,o[3])}throw new Mr(h||`Could not parse color from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"padding":{let o;for(let h of this.args){o=h.evaluate(i);let p=nn.parse(o);if(p)return p}throw new Mr(`Could not parse padding from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"variableAnchorOffsetCollection":{let o;for(let h of this.args){o=h.evaluate(i);let p=xn.parse(o);if(p)return p}throw new Mr(`Could not parse variableAnchorOffsetCollection from value '${typeof o=="string"?o:JSON.stringify(o)}'`)}case"number":{let o=null;for(let h of this.args){if(o=h.evaluate(i),o===null)return 0;let p=Number(o);if(!isNaN(p))return p}throw new Mr(`Could not convert ${JSON.stringify(o)} to number.`)}case"formatted":return rn.fromString(Dl(this.args[0].evaluate(i)));case"resolvedImage":return an.fromString(Dl(this.args[0].evaluate(i)));default:return Dl(this.args[0].evaluate(i));}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let ow=["Unknown","Point","LineString","Polygon"];class sh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?ow[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let o=this._parseColorCache[i];return o||(o=this._parseColorCache[i]=Xt.parse(i)),o}}class is{constructor(i,o,h=[],p,g=new pa,y=[]){this.registry=i,this.path=h,this.key=h.map(x=>`[${x}]`).join(""),this.scope=g,this.errors=y,this.expectedType=p,this._isConstant=o}parse(i,o,h,p,g={}){return o?this.concat(o,h,p)._parse(i,g):this._parse(i,g)}_parse(i,o){function h(p,g,y){return y==="assert"?new Wn(g,[p]):y==="coerce"?new Zn(g,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let g=this.registry[p];if(g){let y=g.parse(i,this);if(!y)return null;if(this.expectedType){let x=this.expectedType,S=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||S.kind!=="value"){if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||S.kind!=="value"&&S.kind!=="string"){if(x.kind!=="padding"||S.kind!=="value"&&S.kind!=="number"&&S.kind!=="array"){if(x.kind!=="variableAnchorOffsetCollection"||S.kind!=="value"&&S.kind!=="array"){if(this.checkSubtype(x,S))return null}else y=h(y,x,o.typeAnnotation||"coerce");}else y=h(y,x,o.typeAnnotation||"coerce");}else y=h(y,x,o.typeAnnotation||"coerce");}else y=h(y,x,o.typeAnnotation||"assert")}if(!(y instanceof Hn)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){let x=new sh;try{y=new Hn(y.type,y.evaluate(x))}catch(S){return this.error(S.message),null}}return y}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof i} instead.`)}concat(i,o,h){let p=typeof i=="number"?this.path.concat(i):this.path,g=h?this.scope.concat(h):this.scope;return new is(this.registry,this._isConstant,p,o||null,g,this.errors)}error(i,...o){let h=`${this.key}${o.map(p=>`[${p}]`).join("")}`;this.errors.push(new bi(h,i))}checkSubtype(i,o){let h=Q(i,o);return h&&this.error(h),h}}class bo{constructor(i,o){this.type=o.type,this.bindings=[].concat(i),this.result=o}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(let o of this.bindings)i(o[1]);i(this.result)}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);let h=[];for(let g=1;g<i.length-1;g+=2){let y=i[g];if(typeof y!="string")return o.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return o.error("Variable names must contain only alphanumeric characters or '_'.",g);let x=o.parse(i[g+1],g+1);if(!x)return null;h.push([y,x])}let p=o.parse(i[i.length-1],i.length-1,o.expectedType,h);return p?new bo(h,p):null}outputDefined(){return this.result.outputDefined()}}class Gt{constructor(i,o){this.type=o.type,this.name=i,this.boundExpression=o}static parse(i,o){if(i.length!==2||typeof i[1]!="string")return o.error("'var' expression requires exactly one string literal argument.");let h=i[1];return o.scope.has(h)?new Gt(h,o.scope.get(h)):o.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Yd{constructor(i,o,h){this.type=i,this.index=o,this.input=h}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,Fe),p=o.parse(i[2],2,F(o.expectedType||_t));return h&&p?new Yd(p.type.itemType,h,p):null}evaluate(i){let o=this.index.evaluate(i),h=this.input.evaluate(i);if(o<0)throw new Mr(`Array index out of bounds: ${o} < 0.`);if(o>=h.length)throw new Mr(`Array index out of bounds: ${o} > ${h.length-1}.`);if(o!==Math.floor(o))throw new Mr(`Array index must be an integer, but found ${o} instead.`);return h[o]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Jd{constructor(i,o){this.type=dt,this.needle=i,this.haystack=o}static parse(i,o){if(i.length!==3)return o.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,_t),p=o.parse(i[2],2,_t);return h&&p?ce(h.type,[dt,At,Fe,_o,_t])?new Jd(h,p):o.error(`Expected first argument to be of type boolean, string, number or null, but found ${z(h.type)} instead`):null}evaluate(i){let o=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!fe(o,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${z(zr(o))} instead.`);if(!fe(h,["string","array"]))throw new Mr(`Expected second argument to be of type array or string, but found ${z(zr(h))} instead.`);return h.indexOf(o)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class ru{constructor(i,o,h){this.type=Fe,this.needle=i,this.haystack=o,this.fromIndex=h}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,_t),p=o.parse(i[2],2,_t);if(!h||!p)return null;if(!ce(h.type,[dt,At,Fe,_o,_t]))return o.error(`Expected first argument to be of type boolean, string, number or null, but found ${z(h.type)} instead`);if(i.length===4){let g=o.parse(i[3],3,Fe);return g?new ru(h,p,g):null}return new ru(h,p)}evaluate(i){let o=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!fe(o,["boolean","string","number","null"]))throw new Mr(`Expected first argument to be of type boolean, string, number or null, but found ${z(zr(o))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(i)),fe(h,["string"])){let g=h.indexOf(o,p);return g===-1?-1:[...h.slice(0,g)].length}if(fe(h,["array"]))return h.indexOf(o,p);throw new Mr(`Expected second argument to be of type array or string, but found ${z(zr(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Qd{constructor(i,o,h,p,g,y){this.inputType=i,this.type=o,this.input=h,this.cases=p,this.outputs=g,this.otherwise=y}static parse(i,o){if(i.length<5)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return o.error("Expected an even number of arguments.");let h,p;o.expectedType&&o.expectedType.kind!=="value"&&(p=o.expectedType);let g={},y=[];for(let A=2;A<i.length-1;A+=2){let M=i[A],O=i[A+1];Array.isArray(M)||(M=[M]);let L=o.concat(A);if(M.length===0)return L.error("Expected at least one branch label.");for(let U of M){if(typeof U!="number"&&typeof U!="string")return L.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return L.error("Numeric branch labels must be integer values.");if(h){if(L.checkSubtype(h,zr(U)))return null}else h=zr(U);if(g[String(U)]!==void 0)return L.error("Branch labels must be unique.");g[String(U)]=y.length}let N=o.parse(O,A,p);if(!N)return null;p=p||N.type,y.push(N)}let x=o.parse(i[1],1,_t);if(!x)return null;let S=o.parse(i[i.length-1],i.length-1,p);return S?x.type.kind!=="value"&&o.concat(1).checkSubtype(h,x.type)?null:new Qd(h,p,x,g,y,S):null}evaluate(i){let o=this.input.evaluate(i);return(zr(o)===this.inputType&&this.outputs[this.cases[o]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class uh{constructor(i,o,h){this.type=i,this.branches=o,this.otherwise=h}static parse(i,o){if(i.length<4)return o.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return o.error("Expected an odd number of arguments.");let h;o.expectedType&&o.expectedType.kind!=="value"&&(h=o.expectedType);let p=[];for(let y=1;y<i.length-1;y+=2){let x=o.parse(i[y],y,dt);if(!x)return null;let S=o.parse(i[y+1],y+1,h);if(!S)return null;p.push([x,S]),h=h||S.type}let g=o.parse(i[i.length-1],i.length-1,h);if(!g)return null;if(!h)throw new Error("Can't infer output type");return new uh(h,p,g)}evaluate(i){for(let[o,h]of this.branches)if(o.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(let[o,h]of this.branches)i(o),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,o])=>o.outputDefined())&&this.otherwise.outputDefined()}}class Ll{constructor(i,o,h,p){this.type=i,this.input=o,this.beginIndex=h,this.endIndex=p}static parse(i,o){if(i.length<=2||i.length>=5)return o.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=o.parse(i[1],1,_t),p=o.parse(i[2],2,Fe);if(!h||!p)return null;if(!ce(h.type,[F(_t),At,_t]))return o.error(`Expected first argument to be of type array or string, but found ${z(h.type)} instead`);if(i.length===4){let g=o.parse(i[3],3,Fe);return g?new Ll(h.type,h,p,g):null}return new Ll(h.type,h,p)}evaluate(i){let o=this.input.evaluate(i),h=this.beginIndex.evaluate(i),p;if(this.endIndex&&(p=this.endIndex.evaluate(i)),fe(o,["string"]))return[...o].slice(h,p).join("");if(fe(o,["array"]))return o.slice(h,p);throw new Mr(`Expected first argument to be of type array or string, but found ${z(zr(o))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function lh(a,i){let o=a.length-1,h,p,g=0,y=o,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),h=a[x],p=a[x+1],h<=i){if(x===o||i<p)return x;g=x+1}else{if(!(h>i))throw new Mr("Input is not a number.");y=x-1}return 0}class iu{constructor(i,o,h){this.type=i,this.input=o,this.labels=[],this.outputs=[];for(let[p,g]of h)this.labels.push(p),this.outputs.push(g)}static parse(i,o){if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");let h=o.parse(i[1],1,Fe);if(!h)return null;let p=[],g=null;o.expectedType&&o.expectedType.kind!=="value"&&(g=o.expectedType);for(let y=1;y<i.length;y+=2){let x=y===1?-1/0:i[y],S=i[y+1],A=y,M=y+1;if(typeof x!="number")return o.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",A);if(p.length&&p[p.length-1][0]>=x)return o.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",A);let O=o.parse(S,M,g);if(!O)return null;g=g||O.type,p.push([x,O])}return new iu(g,h,p)}evaluate(i){let o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(i);let p=this.input.evaluate(i);if(p<=o[0])return h[0].evaluate(i);let g=o.length;return p>=o[g-1]?h[g-1].evaluate(i):h[lh(o,p)].evaluate(i)}eachChild(i){i(this.input);for(let o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ty(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var sw=ry;function ry(a,i,o,h){this.cx=3*a,this.bx=3*(o-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=o,this.p2y=h}ry.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var o=a,h=0;h<8;h++){var p=this.sampleCurveX(o)-a;if(Math.abs(p)<i)return o;var g=this.sampleCurveDerivativeX(o);if(Math.abs(g)<1e-6)break;o-=p/g}var y=0,x=1;for(o=a,h=0;h<20&&(p=this.sampleCurveX(o),!(Math.abs(p-a)<i));h++)a>p?y=o:x=o,o=.5*(x-y)+y;return o},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var uw=ty(sw);function ns(a,i,o){return a+o*(i-a)}function zl(a,i,o){return a.map((h,p)=>ns(h,i[p],o))}let zi={number:ns,color:function(a,i,o,h="rgb"){switch(h){case"rgb":{let[p,g,y,x]=zl(a.rgb,i.rgb,o);return new Xt(p,g,y,x,!1)}case"hcl":{let[p,g,y,x]=a.hcl,[S,A,M,O]=i.hcl,L,N;if(isNaN(p)||isNaN(S))isNaN(p)?isNaN(S)?L=NaN:(L=S,y!==1&&y!==0||(N=A)):(L=p,M!==1&&M!==0||(N=g));else{let ve=S-p;S>p&&ve>180?ve-=360:S<p&&p-S>180&&(ve+=360),L=p+o*ve}let[U,G,J,ne]=function([ve,le,pe,qe]){return ve=isNaN(ve)?0:ve*lt,xr([pe,Math.cos(ve)*le,Math.sin(ve)*le,qe])}([L,N!=null?N:ns(g,A,o),ns(y,M,o),ns(x,O,o)]);return new Xt(U,G,J,ne,!1)}case"lab":{let[p,g,y,x]=xr(zl(a.lab,i.lab,o));return new Xt(p,g,y,x,!1)}}},array:zl,padding:function(a,i,o){return new nn(zl(a.values,i.values,o))},variableAnchorOffsetCollection:function(a,i,o){let h=a.values,p=i.values;if(h.length!==p.length)throw new Mr(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${i.toString()}`);let g=[];for(let y=0;y<h.length;y+=2){if(h[y]!==p[y])throw new Mr(`Cannot interpolate values containing mismatched anchors. from[${y}]: ${h[y]}, to[${y}]: ${p[y]}`);g.push(h[y]);let[x,S]=h[y+1],[A,M]=p[y+1];g.push([ns(x,A,o),ns(S,M,o)])}return new xn(g)}};class Fi{constructor(i,o,h,p,g){this.type=i,this.operator=o,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(i,o,h,p){let g=0;if(i.name==="exponential")g=ch(o,i.base,h,p);else if(i.name==="linear")g=ch(o,1,h,p);else if(i.name==="cubic-bezier"){let y=i.controlPoints;g=new uw(y[0],y[1],y[2],y[3]).solve(ch(o,1,h,p))}return g}static parse(i,o){let[h,p,g,...y]=i;if(!Array.isArray(p)||p.length===0)return o.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let A=p[1];if(typeof A!="number")return o.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:A}}else{if(p[0]!=="cubic-bezier")return o.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let A=p.slice(1);if(A.length!==4||A.some(M=>typeof M!="number"||M<0||M>1))return o.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:A}}}if(i.length-1<4)return o.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return o.error("Expected an even number of arguments.");if(g=o.parse(g,2,Fe),!g)return null;let x=[],S=null;h==="interpolate-hcl"||h==="interpolate-lab"?S=Li:o.expectedType&&o.expectedType.kind!=="value"&&(S=o.expectedType);for(let A=0;A<y.length;A+=2){let M=y[A],O=y[A+1],L=A+3,N=A+4;if(typeof M!="number")return o.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",L);if(x.length&&x[x.length-1][0]>=M)return o.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",L);let U=o.parse(O,N,S);if(!U)return null;S=S||U.type,x.push([M,U])}return me(S,Fe)||me(S,Li)||me(S,xo)||me(S,te)||me(S,F(Fe))?new Fi(S,h,p,g,x):o.error(`Type ${z(S)} is not interpolatable.`)}evaluate(i){let o=this.labels,h=this.outputs;if(o.length===1)return h[0].evaluate(i);let p=this.input.evaluate(i);if(p<=o[0])return h[0].evaluate(i);let g=o.length;if(p>=o[g-1])return h[g-1].evaluate(i);let y=lh(o,p),x=Fi.interpolationFactor(this.interpolation,p,o[y],o[y+1]),S=h[y].evaluate(i),A=h[y+1].evaluate(i);switch(this.operator){case"interpolate":return zi[this.type.kind](S,A,x);case"interpolate-hcl":return zi.color(S,A,x,"hcl");case"interpolate-lab":return zi.color(S,A,x,"lab");}}eachChild(i){i(this.input);for(let o of this.outputs)i(o)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ch(a,i,o,h){let p=h-o,g=a-o;return p===0?0:i===1?g/p:(Math.pow(i,g)-1)/(Math.pow(i,p)-1)}class hh{constructor(i,o){this.type=i,this.args=o}static parse(i,o){if(i.length<2)return o.error("Expectected at least one argument.");let h=null,p=o.expectedType;p&&p.kind!=="value"&&(h=p);let g=[];for(let x of i.slice(1)){let S=o.parse(x,1+g.length,h,void 0,{typeAnnotation:"omit"});if(!S)return null;h=h||S.type,g.push(S)}if(!h)throw new Error("No output type");let y=p&&g.some(x=>Q(p,x.type));return new hh(y?_t:h,g)}evaluate(i){let o,h=null,p=0;for(let g of this.args)if(p++,h=g.evaluate(i),h&&h instanceof an&&!h.available&&(o||(o=h.name),h=null,p===this.args.length&&(h=o)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function fh(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function iy(a,i,o,h){return h.compare(i,o)===0}function nu(a,i,o){let h=a!=="=="&&a!=="!=";return class Ele{constructor(g,y,x){this.type=dt,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");let x=g[0],S=y.parse(g[1],1,_t);if(!S)return null;if(!fh(x,S.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${z(S.type)}'.`);let A=y.parse(g[2],2,_t);if(!A)return null;if(!fh(x,A.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${z(A.type)}'.`);if(S.type.kind!==A.type.kind&&S.type.kind!=="value"&&A.type.kind!=="value")return y.error(`Cannot compare types '${z(S.type)}' and '${z(A.type)}'.`);h&&(S.type.kind==="value"&&A.type.kind!=="value"?S=new Wn(A.type,[S]):S.type.kind!=="value"&&A.type.kind==="value"&&(A=new Wn(S.type,[A])));let M=null;if(g.length===4){if(S.type.kind!=="string"&&A.type.kind!=="string"&&S.type.kind!=="value"&&A.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(M=y.parse(g[3],3,ma),!M)return null}return new Ele(S,A,M)}evaluate(g){let y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(h&&this.hasUntypedArgument){let S=zr(y),A=zr(x);if(S.kind!==A.kind||S.kind!=="string"&&S.kind!=="number")throw new Mr(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${S.kind}, ${A.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let S=zr(y),A=zr(x);if(S.kind!=="string"||A.kind!=="string")return i(g,y,x)}return this.collator?o(g,y,x,this.collator.evaluate(g)):i(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}let lw=nu("==",function(a,i,o){return i===o},iy),ny=nu("!=",function(a,i,o){return i!==o},function(a,i,o,h){return!iy(0,i,o,h)}),ay=nu("<",function(a,i,o){return i<o},function(a,i,o,h){return h.compare(i,o)<0}),cw=nu(">",function(a,i,o){return i>o},function(a,i,o,h){return h.compare(i,o)>0}),hw=nu("<=",function(a,i,o){return i<=o},function(a,i,o,h){return h.compare(i,o)<=0}),oy=nu(">=",function(a,i,o){return i>=o},function(a,i,o,h){return h.compare(i,o)>=0});class Fl{constructor(i,o,h){this.type=ma,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=o}static parse(i,o){if(i.length!==2)return o.error("Expected one argument.");let h=i[1];if(typeof h!="object"||Array.isArray(h))return o.error("Collator options argument must be an object.");let p=o.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,dt);if(!p)return null;let g=o.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,dt);if(!g)return null;let y=null;return h.locale&&(y=o.parse(h.locale,1,At),!y)?null:new Fl(p,g,y)}evaluate(i){return new Zd(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class ep{constructor(i,o,h,p,g){this.type=At,this.number=i,this.locale=o,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=g}static parse(i,o){if(i.length!==3)return o.error("Expected two arguments.");let h=o.parse(i[1],1,Fe);if(!h)return null;let p=i[2];if(typeof p!="object"||Array.isArray(p))return o.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=o.parse(p.locale,1,At),!g))return null;let y=null;if(p.currency&&(y=o.parse(p.currency,1,At),!y))return null;let x=null;if(p["min-fraction-digits"]&&(x=o.parse(p["min-fraction-digits"],1,Fe),!x))return null;let S=null;return p["max-fraction-digits"]&&(S=o.parse(p["max-fraction-digits"],1,Fe),!S)?null:new ep(h,g,y,x,S)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class dh{constructor(i){this.type=Xa,this.sections=i}static parse(i,o){if(i.length<2)return o.error("Expected at least one argument.");let h=i[1];if(!Array.isArray(h)&&typeof h=="object")return o.error("First argument must be an image or text section.");let p=[],g=!1;for(let y=1;y<=i.length-1;++y){let x=i[y];if(g&&typeof x=="object"&&!Array.isArray(x)){g=!1;let S=null;if(x["font-scale"]&&(S=o.parse(x["font-scale"],1,Fe),!S))return null;let A=null;if(x["text-font"]&&(A=o.parse(x["text-font"],1,F(At)),!A))return null;let M=null;if(x["text-color"]&&(M=o.parse(x["text-color"],1,Li),!M))return null;let O=p[p.length-1];O.scale=S,O.font=A,O.textColor=M}else{let S=o.parse(i[y],1,_t);if(!S)return null;let A=S.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return o.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:S,scale:null,font:null,textColor:null})}}return new dh(p)}evaluate(i){return new rn(this.sections.map(o=>{let h=o.content.evaluate(i);return zr(h)===va?new Kd("",h,null,null,null):new Kd(Dl(h),null,o.scale?o.scale.evaluate(i):null,o.font?o.font.evaluate(i).join(","):null,o.textColor?o.textColor.evaluate(i):null)}))}eachChild(i){for(let o of this.sections)i(o.content),o.scale&&i(o.scale),o.font&&i(o.font),o.textColor&&i(o.textColor)}outputDefined(){return!1}}class tp{constructor(i){this.type=va,this.input=i}static parse(i,o){if(i.length!==2)return o.error("Expected two arguments.");let h=o.parse(i[1],1,At);return h?new tp(h):o.error("No image name provided.")}evaluate(i){let o=this.input.evaluate(i),h=an.fromString(o);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(o)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class rp{constructor(i){this.type=Fe,this.input=i}static parse(i,o){if(i.length!==2)return o.error(`Expected 1 argument, but found ${i.length-1} instead.`);let h=o.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?o.error(`Expected argument of type string or array, but found ${z(h.type)} instead.`):new rp(h):null}evaluate(i){let o=this.input.evaluate(i);if(typeof o=="string")return[...o].length;if(Array.isArray(o))return o.length;throw new Mr(`Expected value to be of type string or array, but found ${z(zr(o))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}let ga=8192;function fw(a,i){let o=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(o*p*ga),Math.round(h*p*ga)]}function ip(a,i){let o=Math.pow(2,i.z);return[(p=(a[0]/ga+i.x)/o,360*p-180),(h=(a[1]/ga+i.y)/o,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function as(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function wo(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function Ht(a,i,o){let h=a[0]-i[0],p=a[1]-i[1],g=a[0]-o[0],y=a[1]-o[1];return h*y-g*p==0&&h*g<=0&&p*y<=0}function ph(a,i,o,h){return(p=[h[0]-o[0],h[1]-o[1]])[0]*(g=[i[0]-a[0],i[1]-a[1]])[1]-p[1]*g[0]!=0&&!(!uy(a,i,o,h)||!uy(o,h,a,i));var p,g}function dw(a,i,o){for(let h of o)for(let p=0;p<h.length-1;++p)if(ph(a,i,h[p],h[p+1]))return!0;return!1}function au(a,i,o=!1){let h=!1;for(let x of i)for(let S=0;S<x.length-1;S++){if(Ht(a,x[S],x[S+1]))return o;(g=x[S])[1]>(p=a)[1]!=(y=x[S+1])[1]>p[1]&&p[0]<(y[0]-g[0])*(p[1]-g[1])/(y[1]-g[1])+g[0]&&(h=!h)}var p,g,y;return h}function pw(a,i){for(let o of i)if(au(a,o))return!0;return!1}function sy(a,i){for(let o of a)if(!au(o,i))return!1;for(let o=0;o<a.length-1;++o)if(dw(a[o],a[o+1],i))return!1;return!0}function mw(a,i){for(let o of i)if(sy(a,o))return!0;return!1}function uy(a,i,o,h){let p=h[0]-o[0],g=h[1]-o[1],y=(a[0]-o[0])*g-p*(a[1]-o[1]),x=(i[0]-o[0])*g-p*(i[1]-o[1]);return y>0&&x<0||y<0&&x>0}function np(a,i,o){let h=[];for(let p=0;p<a.length;p++){let g=[];for(let y=0;y<a[p].length;y++){let x=fw(a[p][y],o);as(i,x),g.push(x)}h.push(g)}return h}function ly(a,i,o){let h=[];for(let p=0;p<a.length;p++){let g=np(a[p],i,o);h.push(g)}return h}function cy(a,i,o,h){if(a[0]<o[0]||a[0]>o[2]){let p=.5*h,g=a[0]-o[0]>p?-h:o[0]-a[0]>p?h:0;g===0&&(g=a[0]-o[2]>p?-h:o[2]-a[0]>p?h:0),a[0]+=g}as(i,a)}function hy(a,i,o,h){let p=Math.pow(2,h.z)*ga,g=[h.x*ga,h.y*ga],y=[];for(let x of a)for(let S of x){let A=[S.x+g[0],S.y+g[1]];cy(A,i,o,p),y.push(A)}return y}function fy(a,i,o,h){let p=Math.pow(2,h.z)*ga,g=[h.x*ga,h.y*ga],y=[];for(let S of a){let A=[];for(let M of S){let O=[M.x+g[0],M.y+g[1]];as(i,O),A.push(O)}y.push(A)}if(i[2]-i[0]<=p/2){(x=i)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let S of y)for(let A of S)cy(A,i,o,p)}var x;return y}class os{constructor(i,o){this.type=dt,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(rs(i[1])){let h=i[1];if(h.type==="FeatureCollection"){let p=[];for(let g of h.features){let{type:y,coordinates:x}=g.geometry;y==="Polygon"&&p.push(x),y==="MultiPolygon"&&p.push(...x)}if(p.length)return new os(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new os(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new os(h,h)}return o.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(o,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(h.type==="Polygon"){let x=np(h.coordinates,g,y),S=hy(o.geometry(),p,g,y);if(!wo(p,g))return!1;for(let A of S)if(!au(A,x))return!1}if(h.type==="MultiPolygon"){let x=ly(h.coordinates,g,y),S=hy(o.geometry(),p,g,y);if(!wo(p,g))return!1;for(let A of S)if(!pw(A,x))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(o,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=o.canonicalID();if(h.type==="Polygon"){let x=np(h.coordinates,g,y),S=fy(o.geometry(),p,g,y);if(!wo(p,g))return!1;for(let A of S)if(!sy(A,x))return!1}if(h.type==="MultiPolygon"){let x=ly(h.coordinates,g,y),S=fy(o.geometry(),p,g,y);if(!wo(p,g))return!1;for(let A of S)if(!mw(A,x))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let dy=class{constructor(a=[],i=(o,h)=>o<h?-1:o>h?1:0){if(this.data=a,this.length=this.data.length,this.compare=i,this.length>0)for(let o=(this.length>>1)-1;o>=0;o--)this._down(o)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;let a=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),a}peek(){return this.data[0]}_up(a){let{data:i,compare:o}=this,h=i[a];for(;a>0;){let p=a-1>>1,g=i[p];if(o(h,g)>=0)break;i[a]=g,a=p}i[a]=h}_down(a){let{data:i,compare:o}=this,h=this.length>>1,p=i[a];for(;a<h;){let g=1+(a<<1),y=g+1;if(y<this.length&&o(i[y],i[g])<0&&(g=y),o(i[g],p)>=0)break;i[a]=i[g],a=g}i[a]=p}};function vw(a,i,o,h,p){py(a,i,o,h||a.length-1,p||gw)}function py(a,i,o,h,p){for(;h>o;){if(h-o>600){var g=h-o+1,y=i-o+1,x=Math.log(g),S=.5*Math.exp(2*x/3),A=.5*Math.sqrt(x*S*(g-S)/g)*(y-g/2<0?-1:1);py(a,i,Math.max(o,Math.floor(i-y*S/g+A)),Math.min(h,Math.floor(i+(g-y)*S/g+A)),p)}var M=a[i],O=o,L=h;for(Nl(a,o,i),p(a[h],M)>0&&Nl(a,o,h);O<L;){for(Nl(a,O,L),O++,L--;p(a[O],M)<0;)O++;for(;p(a[L],M)>0;)L--}p(a[o],M)===0?Nl(a,o,L):Nl(a,++L,h),L<=i&&(o=L+1),i<=L&&(h=L-1)}}function Nl(a,i,o){var h=a[i];a[i]=a[o],a[o]=h}function gw(a,i){return a<i?-1:a>i?1:0}function mh(a,i){if(a.length<=1)return[a];let o=[],h,p;for(let g of a){let y=_w(g);y!==0&&(g.area=Math.abs(y),p===void 0&&(p=y<0),p===y<0?(h&&o.push(h),h=[g]):h.push(g))}if(h&&o.push(h),i>1)for(let g=0;g<o.length;g++)o[g].length<=i||(vw(o[g],i,1,o[g].length-1,yw),o[g]=o[g].slice(0,i));return o}function yw(a,i){return i.area-a.area}function _w(a){let i=0;for(let o,h,p=0,g=a.length,y=g-1;p<g;y=p++)o=a[p],h=a[y],i+=(h.x-o.x)*(o.y+h.y);return i}let my=1/298.257223563,vy=my*(2-my),gy=Math.PI/180;class ap{constructor(i){let o=6378.137*gy*1e3,h=Math.cos(i*gy),p=1/(1-vy*(1-h*h)),g=Math.sqrt(p);this.kx=o*g*h,this.ky=o*g*p*(1-vy)}distance(i,o){let h=this.wrap(i[0]-o[0])*this.kx,p=(i[1]-o[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(i,o){let h,p,g,y,x=1/0;for(let S=0;S<i.length-1;S++){let A=i[S][0],M=i[S][1],O=this.wrap(i[S+1][0]-A)*this.kx,L=(i[S+1][1]-M)*this.ky,N=0;O===0&&L===0||(N=(this.wrap(o[0]-A)*this.kx*O+(o[1]-M)*this.ky*L)/(O*O+L*L),N>1?(A=i[S+1][0],M=i[S+1][1]):N>0&&(A+=O/this.kx*N,M+=L/this.ky*N)),O=this.wrap(o[0]-A)*this.kx,L=(o[1]-M)*this.ky;let U=O*O+L*L;U<x&&(x=U,h=A,p=M,g=S,y=N)}return{point:[h,p],index:g,t:Math.max(0,Math.min(1,y))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function yy(a,i){return i[0]-a[0]}function vh(a){return a[1]-a[0]+1}function Ya(a,i){return a[1]>=a[0]&&a[1]<i}function op(a,i){if(a[0]>a[1])return[null,null];let o=vh(a);if(i){if(o===2)return[a,null];let p=Math.floor(o/2);return[[a[0],a[0]+p],[a[0]+p,a[1]]]}if(o===1)return[a,null];let h=Math.floor(o/2)-1;return[[a[0],a[0]+h],[a[0]+h+1,a[1]]]}function sp(a,i){if(!Ya(i,a.length))return[1/0,1/0,-1/0,-1/0];let o=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)as(o,a[h]);return o}function up(a){let i=[1/0,1/0,-1/0,-1/0];for(let o of a)for(let h of o)as(i,h);return i}function gh(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function lp(a,i,o){if(!gh(a)||!gh(i))return NaN;let h=0,p=0;return a[2]<i[0]&&(h=i[0]-a[2]),a[0]>i[2]&&(h=a[0]-i[2]),a[1]>i[3]&&(p=a[1]-i[3]),a[3]<i[1]&&(p=i[1]-a[3]),o.distance([0,0],[h,p])}function ss(a,i,o){let h=o.pointOnLine(i,a);return o.distance(a,h.point)}function cp(a,i,o,h,p){let g=Math.min(ss(a,[o,h],p),ss(i,[o,h],p)),y=Math.min(ss(o,[a,i],p),ss(h,[a,i],p));return Math.min(g,y)}function xw(a,i,o,h,p){if(!Ya(i,a.length)||!Ya(h,o.length))return 1/0;let g=1/0;for(let y=i[0];y<i[1];++y){let x=a[y],S=a[y+1];for(let A=h[0];A<h[1];++A){let M=o[A],O=o[A+1];if(ph(x,S,M,O))return 0;g=Math.min(g,cp(x,S,M,O,p))}}return g}function Er(a,i,o,h,p){if(!Ya(i,a.length)||!Ya(h,o.length))return NaN;let g=1/0;for(let y=i[0];y<=i[1];++y)for(let x=h[0];x<=h[1];++x)if(g=Math.min(g,p.distance(a[y],o[x])),g===0)return g;return g}function bw(a,i,o){if(au(a,i,!0))return 0;let h=1/0;for(let p of i){let g=p[0],y=p[p.length-1];if(g!==y&&(h=Math.min(h,ss(a,[y,g],o)),h===0))return h;let x=o.pointOnLine(p,a);if(h=Math.min(h,o.distance(a,x.point)),h===0)return h}return h}function Ct(a,i,o,h){if(!Ya(i,a.length))return NaN;for(let g=i[0];g<=i[1];++g)if(au(a[g],o,!0))return 0;let p=1/0;for(let g=i[0];g<i[1];++g){let y=a[g],x=a[g+1];for(let S of o)for(let A=0,M=S.length,O=M-1;A<M;O=A++){let L=S[O],N=S[A];if(ph(y,x,L,N))return 0;p=Math.min(p,cp(y,x,L,N,h))}}return p}function yh(a,i){for(let o of a)for(let h of o)if(au(h,i,!0))return!0;return!1}function nr(a,i,o,h=1/0){let p=up(a),g=up(i);if(h!==1/0&&lp(p,g,o)>=h)return h;if(wo(p,g)){if(yh(a,i))return 0}else if(yh(i,a))return 0;let y=1/0;for(let x of a)for(let S=0,A=x.length,M=A-1;S<A;M=S++){let O=x[M],L=x[S];for(let N of i)for(let U=0,G=N.length,J=G-1;U<G;J=U++){let ne=N[J],ve=N[U];if(ph(O,L,ne,ve))return 0;y=Math.min(y,cp(O,L,ne,ve,o))}}return y}function Jt(a,i,o,h,p,g){if(!g)return;let y=lp(sp(h,g),p,o);y<i&&a.push([y,g,[0,0]])}function us(a,i,o,h,p,g,y){if(!g||!y)return;let x=lp(sp(h,g),sp(p,y),o);x<i&&a.push([x,g,y])}function Bl(a,i,o,h,p=1/0){let g=Math.min(h.distance(a[0],o[0][0]),p);if(g===0)return g;let y=new dy([[0,[0,a.length-1],[0,0]]],yy),x=up(o);for(;y.length>0;){let S=y.pop();if(S[0]>=g)continue;let A=S[1],M=i?50:100;if(vh(A)<=M){if(!Ya(A,a.length))return NaN;if(i){let O=Ct(a,A,o,h);if(isNaN(O)||O===0)return O;g=Math.min(g,O)}else for(let O=A[0];O<=A[1];++O){let L=bw(a[O],o,h);if(g=Math.min(g,L),g===0)return 0}}else{let O=op(A,i);Jt(y,g,h,a,x,O[0]),Jt(y,g,h,a,x,O[1])}}return g}function jl(a,i,o,h,p,g=1/0){let y=Math.min(g,p.distance(a[0],o[0]));if(y===0)return y;let x=new dy([[0,[0,a.length-1],[0,o.length-1]]],yy);for(;x.length>0;){let S=x.pop();if(S[0]>=y)continue;let A=S[1],M=S[2],O=i?50:100,L=h?50:100;if(vh(A)<=O&&vh(M)<=L){if(!Ya(A,a.length)&&Ya(M,o.length))return NaN;let N;if(i&&h)N=xw(a,A,o,M,p),y=Math.min(y,N);else if(i&&!h){let U=a.slice(A[0],A[1]+1);for(let G=M[0];G<=M[1];++G)if(N=ss(o[G],U,p),y=Math.min(y,N),y===0)return y}else if(!i&&h){let U=o.slice(M[0],M[1]+1);for(let G=A[0];G<=A[1];++G)if(N=ss(a[G],U,p),y=Math.min(y,N),y===0)return y}else N=Er(a,A,o,M,p),y=Math.min(y,N)}else{let N=op(A,i),U=op(M,h);us(x,y,p,a,o,N[0],U[0]),us(x,y,p,a,o,N[0],U[1]),us(x,y,p,a,o,N[1],U[0]),us(x,y,p,a,o,N[1],U[1])}}return y}function hp(a){return a.type==="MultiPolygon"?a.coordinates.map(i=>({type:"Polygon",coordinates:i})):a.type==="MultiLineString"?a.coordinates.map(i=>({type:"LineString",coordinates:i})):a.type==="MultiPoint"?a.coordinates.map(i=>({type:"Point",coordinates:i})):[a]}class ls{constructor(i,o){this.type=Fe,this.geojson=i,this.geometries=o}static parse(i,o){if(i.length!==2)return o.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(rs(i[1])){let h=i[1];if(h.type==="FeatureCollection")return new ls(h,h.features.map(p=>hp(p.geometry)).flat());if(h.type==="Feature")return new ls(h,hp(h.geometry));if("type"in h&&"coordinates"in h)return new ls(h,hp(h))}return o.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(o,h){let p=o.geometry(),g=p.flat().map(S=>ip([S.x,S.y],o.canonical));if(p.length===0)return NaN;let y=new ap(g[0][1]),x=1/0;for(let S of h){switch(S.type){case"Point":x=Math.min(x,jl(g,!1,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,jl(g,!1,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,Bl(g,!1,S.coordinates,y,x));}if(x===0)return x}return x}(i,this.geometries);if(i.geometryType()==="LineString")return function(o,h){let p=o.geometry(),g=p.flat().map(S=>ip([S.x,S.y],o.canonical));if(p.length===0)return NaN;let y=new ap(g[0][1]),x=1/0;for(let S of h){switch(S.type){case"Point":x=Math.min(x,jl(g,!0,[S.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,jl(g,!0,S.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,Bl(g,!0,S.coordinates,y,x));}if(x===0)return x}return x}(i,this.geometries);if(i.geometryType()==="Polygon")return function(o,h){let p=o.geometry();if(p.length===0||p[0].length===0)return NaN;let g=mh(p,0).map(S=>S.map(A=>A.map(M=>ip([M.x,M.y],o.canonical)))),y=new ap(g[0][0][0][1]),x=1/0;for(let S of h)for(let A of g){switch(S.type){case"Point":x=Math.min(x,Bl([S.coordinates],!1,A,y,x));break;case"LineString":x=Math.min(x,Bl(S.coordinates,!0,A,y,x));break;case"Polygon":x=Math.min(x,nr(A,S.coordinates,y,x));}if(x===0)return x}return x}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let ou={"==":lw,"!=":ny,">":cw,"<":ay,">=":oy,"<=":hw,array:Wn,at:Yd,boolean:Wn,case:uh,coalesce:hh,collator:Fl,format:dh,image:tp,in:Jd,"index-of":ru,interpolate:Fi,"interpolate-hcl":Fi,"interpolate-lab":Fi,length:rp,let:bo,literal:Hn,match:Qd,number:Wn,"number-format":ep,object:Wn,slice:Ll,step:iu,string:Wn,"to-boolean":Zn,"to-color":Zn,"to-number":Zn,"to-string":Zn,var:Gt,within:os,distance:ls};class bn{constructor(i,o,h,p){this.name=i,this.type=o,this._evaluate=h,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,o){let h=i[0],p=bn.definitions[h];if(!p)return o.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let g=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,x=y.filter(([A])=>!Array.isArray(A)||A.length===i.length-1),S=null;for(let[A,M]of x){S=new is(o.registry,Ul,o.path,null,o.scope);let O=[],L=!1;for(let N=1;N<i.length;N++){let U=i[N],G=Array.isArray(A)?A[N-1]:A.type,J=S.parse(U,1+O.length,G);if(!J){L=!0;break}O.push(J)}if(!L)if(Array.isArray(A)&&A.length!==O.length)S.error(`Expected ${A.length} arguments, but found ${O.length} instead.`);else{for(let N=0;N<O.length;N++){let U=Array.isArray(A)?A[N]:A.type,G=O[N];S.concat(N+1).checkSubtype(U,G.type)}if(S.errors.length===0)return new bn(h,g,M,O)}}if(x.length===1)o.errors.push(...S.errors);else{let A=(x.length?x:y).map(([O])=>{return L=O,Array.isArray(L)?`(${L.map(z).join(", ")})`:`(${z(L.type)}...)`;var L}).join(" | "),M=[];for(let O=1;O<i.length;O++){let L=o.parse(i[O],1+M.length);if(!L)return null;M.push(z(L.type))}o.error(`Expected arguments of type ${A}, but found (${M.join(", ")}) instead.`)}return null}static register(i,o){bn.definitions=o;for(let h in o)i[h]=bn}}function fp(a,[i,o,h,p]){i=i.evaluate(a),o=o.evaluate(a),h=h.evaluate(a);let g=p?p.evaluate(a):1,y=tu(i,o,h,g);if(y)throw new Mr(y);return new Xt(i/255,o/255,h/255,g,!1)}function dp(a,i){return a in i}function pp(a,i){let o=i[a];return o===void 0?null:o}function cs(a){return{type:a}}function Ul(a){if(a instanceof Gt)return Ul(a.boundExpression);if(a instanceof bn&&a.name==="error"||a instanceof Fl||a instanceof os||a instanceof ls)return!1;let i=a instanceof Zn||a instanceof Wn,o=!0;return a.eachChild(h=>{o=i?o&&Ul(h):o&&h instanceof Hn}),!!o&&$l(a)&&Vl(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function $l(a){if(a instanceof bn&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof os||a instanceof ls)return!1;let i=!0;return a.eachChild(o=>{i&&!$l(o)&&(i=!1)}),i}function su(a){if(a instanceof bn&&a.name==="feature-state")return!1;let i=!0;return a.eachChild(o=>{i&&!su(o)&&(i=!1)}),i}function Vl(a,i){if(a instanceof bn&&i.indexOf(a.name)>=0)return!1;let o=!0;return a.eachChild(h=>{o&&!Vl(h,i)&&(o=!1)}),o}function _h(a){return{result:"success",value:a}}function uu(a){return{result:"error",value:a}}function lu(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function _y(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function mp(a){return!!a.expression&&a.expression.interpolated}function Ut(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function xh(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function ww(a){return a}function xy(a,i){let o=i.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",p=h||!(h||a.property!==void 0),g=a.type||(mp(i)?"exponential":"interval");if(o||i.type==="padding"){let M=o?Xt.parse:nn.parse;(a=da({},a)).stops&&(a.stops=a.stops.map(O=>[O[0],M(O[1])])),a.default=M(a.default?a.default:i.default)}if(a.colorSpace&&(y=a.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var y;let x,S,A;if(g==="exponential")x=wy;else if(g==="interval")x=bh;else if(g==="categorical"){x=by,S=Object.create(null);for(let M of a.stops)S[M[0]]=M[1];A=typeof a.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);x=Sy}if(h){let M={},O=[];for(let U=0;U<a.stops.length;U++){let G=a.stops[U],J=G[0].zoom;M[J]===void 0&&(M[J]={zoom:J,type:a.type,property:a.property,default:a.default,stops:[]},O.push(J)),M[J].stops.push([G[0].value,G[1]])}let L=[];for(let U of O)L.push([M[U].zoom,xy(M[U],i)]);let N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:Fi.interpolationFactor.bind(void 0,N),zoomStops:L.map(U=>U[0]),evaluate:({zoom:U},G)=>wy({stops:L,base:a.base},i,U).evaluate(U,G)}}if(p){let M=g==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:Fi.interpolationFactor.bind(void 0,M),zoomStops:a.stops.map(O=>O[0]),evaluate:({zoom:O})=>x(a,i,O,S,A)}}return{kind:"source",evaluate(M,O){let L=O&&O.properties?O.properties[a.property]:void 0;return L===void 0?cu(a.default,i.default):x(a,i,L,S,A)}}}function cu(a,i,o){return a!==void 0?a:i!==void 0?i:o!==void 0?o:void 0}function by(a,i,o,h,p){return cu(typeof o===p?h[o]:void 0,a.default,i.default)}function bh(a,i,o){if(Ut(o)!=="number")return cu(a.default,i.default);let h=a.stops.length;if(h===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[h-1][0])return a.stops[h-1][1];let p=lh(a.stops.map(g=>g[0]),o);return a.stops[p][1]}function wy(a,i,o){let h=a.base!==void 0?a.base:1;if(Ut(o)!=="number")return cu(a.default,i.default);let p=a.stops.length;if(p===1||o<=a.stops[0][0])return a.stops[0][1];if(o>=a.stops[p-1][0])return a.stops[p-1][1];let g=lh(a.stops.map(M=>M[0]),o),y=function(M,O,L,N){let U=N-L,G=M-L;return U===0?0:O===1?G/U:(Math.pow(O,G)-1)/(Math.pow(O,U)-1)}(o,h,a.stops[g][0],a.stops[g+1][0]),x=a.stops[g][1],S=a.stops[g+1][1],A=zi[i.type]||ww;return typeof x.evaluate=="function"?{evaluate(...M){let O=x.evaluate.apply(void 0,M),L=S.evaluate.apply(void 0,M);if(O!==void 0&&L!==void 0)return A(O,L,y,a.colorSpace)}}:A(x,S,y,a.colorSpace)}function Sy(a,i,o){switch(i.type){case"color":o=Xt.parse(o);break;case"formatted":o=rn.fromString(o.toString());break;case"resolvedImage":o=an.fromString(o.toString());break;case"padding":o=nn.parse(o);break;default:Ut(o)===i.type||i.type==="enum"&&i.values[o]||(o=void 0);}return cu(o,a.default,i.default)}bn.register(ou,{error:[{kind:"error"},[At],(a,[i])=>{throw new Mr(i.evaluate(a))}],typeof:[At,[_t],(a,[i])=>z(zr(i.evaluate(a)))],"to-rgba":[F(Fe,4),[Li],(a,[i])=>{let[o,h,p,g]=i.evaluate(a).rgb;return[255*o,255*h,255*p,g]}],rgb:[Li,[Fe,Fe,Fe],fp],rgba:[Li,[Fe,Fe,Fe,Fe],fp],has:{type:dt,overloads:[[[At],(a,[i])=>dp(i.evaluate(a),a.properties())],[[At,Gn],(a,[i,o])=>dp(i.evaluate(a),o.evaluate(a))]]},get:{type:_t,overloads:[[[At],(a,[i])=>pp(i.evaluate(a),a.properties())],[[At,Gn],(a,[i,o])=>pp(i.evaluate(a),o.evaluate(a))]]},"feature-state":[_t,[At],(a,[i])=>pp(i.evaluate(a),a.featureState||{})],properties:[Gn,[],a=>a.properties()],"geometry-type":[At,[],a=>a.geometryType()],id:[_t,[],a=>a.id()],zoom:[Fe,[],a=>a.globals.zoom],"heatmap-density":[Fe,[],a=>a.globals.heatmapDensity||0],"line-progress":[Fe,[],a=>a.globals.lineProgress||0],accumulated:[_t,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Fe,cs(Fe),(a,i)=>{let o=0;for(let h of i)o+=h.evaluate(a);return o}],"*":[Fe,cs(Fe),(a,i)=>{let o=1;for(let h of i)o*=h.evaluate(a);return o}],"-":{type:Fe,overloads:[[[Fe,Fe],(a,[i,o])=>i.evaluate(a)-o.evaluate(a)],[[Fe],(a,[i])=>-i.evaluate(a)]]},"/":[Fe,[Fe,Fe],(a,[i,o])=>i.evaluate(a)/o.evaluate(a)],"%":[Fe,[Fe,Fe],(a,[i,o])=>i.evaluate(a)%o.evaluate(a)],ln2:[Fe,[],()=>Math.LN2],pi:[Fe,[],()=>Math.PI],e:[Fe,[],()=>Math.E],"^":[Fe,[Fe,Fe],(a,[i,o])=>Math.pow(i.evaluate(a),o.evaluate(a))],sqrt:[Fe,[Fe],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[Fe,[Fe],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[Fe,[Fe],(a,[i])=>Math.log(i.evaluate(a))],log2:[Fe,[Fe],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[Fe,[Fe],(a,[i])=>Math.sin(i.evaluate(a))],cos:[Fe,[Fe],(a,[i])=>Math.cos(i.evaluate(a))],tan:[Fe,[Fe],(a,[i])=>Math.tan(i.evaluate(a))],asin:[Fe,[Fe],(a,[i])=>Math.asin(i.evaluate(a))],acos:[Fe,[Fe],(a,[i])=>Math.acos(i.evaluate(a))],atan:[Fe,[Fe],(a,[i])=>Math.atan(i.evaluate(a))],min:[Fe,cs(Fe),(a,i)=>Math.min(...i.map(o=>o.evaluate(a)))],max:[Fe,cs(Fe),(a,i)=>Math.max(...i.map(o=>o.evaluate(a)))],abs:[Fe,[Fe],(a,[i])=>Math.abs(i.evaluate(a))],round:[Fe,[Fe],(a,[i])=>{let o=i.evaluate(a);return o<0?-Math.round(-o):Math.round(o)}],floor:[Fe,[Fe],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[Fe,[Fe],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[dt,[At,_t],(a,[i,o])=>a.properties()[i.value]===o.value],"filter-id-==":[dt,[_t],(a,[i])=>a.id()===i.value],"filter-type-==":[dt,[At],(a,[i])=>a.geometryType()===i.value],"filter-<":[dt,[At,_t],(a,[i,o])=>{let h=a.properties()[i.value],p=o.value;return typeof h==typeof p&&h<p}],"filter-id-<":[dt,[_t],(a,[i])=>{let o=a.id(),h=i.value;return typeof o==typeof h&&o<h}],"filter->":[dt,[At,_t],(a,[i,o])=>{let h=a.properties()[i.value],p=o.value;return typeof h==typeof p&&h>p}],"filter-id->":[dt,[_t],(a,[i])=>{let o=a.id(),h=i.value;return typeof o==typeof h&&o>h}],"filter-<=":[dt,[At,_t],(a,[i,o])=>{let h=a.properties()[i.value],p=o.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[dt,[_t],(a,[i])=>{let o=a.id(),h=i.value;return typeof o==typeof h&&o<=h}],"filter->=":[dt,[At,_t],(a,[i,o])=>{let h=a.properties()[i.value],p=o.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[dt,[_t],(a,[i])=>{let o=a.id(),h=i.value;return typeof o==typeof h&&o>=h}],"filter-has":[dt,[_t],(a,[i])=>i.value in a.properties()],"filter-has-id":[dt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[dt,[F(At)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[dt,[F(_t)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[dt,[At,F(_t)],(a,[i,o])=>o.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[dt,[At,F(_t)],(a,[i,o])=>function(h,p,g,y){for(;g<=y;){let x=g+y>>1;if(p[x]===h)return!0;p[x]>h?y=x-1:g=x+1}return!1}(a.properties()[i.value],o.value,0,o.value.length-1)],all:{type:dt,overloads:[[[dt,dt],(a,[i,o])=>i.evaluate(a)&&o.evaluate(a)],[cs(dt),(a,i)=>{for(let o of i)if(!o.evaluate(a))return!1;return!0}]]},any:{type:dt,overloads:[[[dt,dt],(a,[i,o])=>i.evaluate(a)||o.evaluate(a)],[cs(dt),(a,i)=>{for(let o of i)if(o.evaluate(a))return!0;return!1}]]},"!":[dt,[dt],(a,[i])=>!i.evaluate(a)],"is-supported-script":[dt,[At],(a,[i])=>{let o=a.globals&&a.globals.isSupportedScript;return!o||o(i.evaluate(a))}],upcase:[At,[At],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[At,[At],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[At,cs(_t),(a,i)=>i.map(o=>Dl(o.evaluate(a))).join("")],"resolved-locale":[At,[ma],(a,[i])=>i.evaluate(a).resolvedLocale()]});class wh{constructor(i,o){var h;this.expression=i,this._warningHistory={},this._evaluator=new sh,this._defaultValue=o?(h=o).type==="color"&&xh(h.default)?new Xt(0,0,0,0):h.type==="color"?Xt.parse(h.default)||null:h.type==="padding"?nn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?xn.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=o&&o.type==="enum"?o.values:null}evaluateWithoutErrorHandling(i,o,h,p,g,y){return this._evaluator.globals=i,this._evaluator.feature=o,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(i,o,h,p,g,y){this._evaluator.globals=i,this._evaluator.feature=o||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Mr(`Expected value to be one of ${Object.keys(this._enumValues).map(S=>JSON.stringify(S)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console!="undefined"&&console.warn(x.message)),this._defaultValue}}}function Sh(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in ou}function hu(a,i){let o=new is(ou,Ul,[],i?function(p){let g={color:Li,string:At,number:Fe,enum:At,boolean:dt,formatted:Xa,padding:xo,resolvedImage:va,variableAnchorOffsetCollection:te};return p.type==="array"?F(g[p.value]||_t,p.length):g[p.type]}(i):void 0),h=o.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?_h(new wh(h,i)):uu(o.errors)}class fu{constructor(i,o){this.kind=i,this._styleExpression=o,this.isStateDependent=i!=="constant"&&!su(o.expression)}evaluateWithoutErrorHandling(i,o,h,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(i,o,h,p,g,y)}evaluate(i,o,h,p,g,y){return this._styleExpression.evaluate(i,o,h,p,g,y)}}class du{constructor(i,o,h,p){this.kind=i,this.zoomStops=h,this._styleExpression=o,this.isStateDependent=i!=="camera"&&!su(o.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,o,h,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(i,o,h,p,g,y)}evaluate(i,o,h,p,g,y){return this._styleExpression.evaluate(i,o,h,p,g,y)}interpolationFactor(i,o,h){return this.interpolationType?Fi.interpolationFactor(this.interpolationType,i,o,h):0}}function vp(a,i){let o=hu(a,i);if(o.result==="error")return o;let h=o.value.expression,p=$l(h);if(!p&&!lu(i))return uu([new bi("","data expressions not supported")]);let g=Vl(h,["zoom"]);if(!g&&!_y(i))return uu([new bi("","zoom expressions not supported")]);let y=Gl(h);return y||g?y instanceof bi?uu([y]):y instanceof Fi&&!mp(i)?uu([new bi("","\"interpolate\" expressions cannot be used with this property")]):_h(y?new du(p?"camera":"composite",o.value,y.labels,y instanceof Fi?y.interpolation:void 0):new fu(p?"constant":"source",o.value)):uu([new bi("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class pu{constructor(i,o){this._parameters=i,this._specification=o,da(this,xy(this._parameters,this._specification))}static deserialize(i){return new pu(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Gl(a){let i=null;if(a instanceof bo)i=Gl(a.result);else if(a instanceof hh){for(let o of a.args)if(i=Gl(o),i)break}else(a instanceof iu||a instanceof Fi)&&a.input instanceof bn&&a.input.name==="zoom"&&(i=a);return i instanceof bi||a.eachChild(o=>{let h=Gl(o);h instanceof bi?i=h:!i&&h?i=new bi("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):i&&h&&i!==h&&(i=new bi("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),i}function qh(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(let i of a.slice(1))if(!qh(i)&&typeof i!="boolean")return!1;return!0;default:return!0;}}let Ih={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function gp(a){if(a==null)return{filter:()=>!0,needGeometry:!1};qh(a)||(a=Eh(a));let i=hu(a,Ih);if(i.result==="error")throw new Error(i.value.map(o=>`${o.key}: ${o.message}`).join(", "));return{filter:(o,h,p)=>i.value.evaluate(o,h,{},p),needGeometry:qy(a)}}function Sw(a,i){return a<i?-1:a>i?1:0}function qy(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let i=1;i<a.length;i++)if(qy(a[i]))return!0;return!1}function Eh(a){if(!a)return!0;let i=a[0];return a.length<=1?i!=="any":i==="=="?yp(a[1],a[2],"=="):i==="!="?ci(yp(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?yp(a[1],a[2],i):i==="any"?(o=a.slice(1),["any"].concat(o.map(Eh))):i==="all"?["all"].concat(a.slice(1).map(Eh)):i==="none"?["all"].concat(a.slice(1).map(Eh).map(ci)):i==="in"?Hl(a[1],a.slice(2)):i==="!in"?ci(Hl(a[1],a.slice(2))):i==="has"?Wl(a[1]):i!=="!has"||ci(Wl(a[1]));var o}function yp(a,i,o){switch(a){case"$type":return[`filter-type-${o}`,i];case"$id":return[`filter-id-${o}`,i];default:return[`filter-${o}`,a,i];}}function Hl(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(o=>typeof o!=typeof i[0])?["filter-in-large",a,["literal",i.sort(Sw)]]:["filter-in-small",a,["literal",i]];}}function Wl(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a];}}function ci(a){return["!",a]}function hs(a){let i=typeof a;if(i==="number"||i==="boolean"||i==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let p="[";for(let g of a)p+=`${hs(g)},`;return`${p}]`}let o=Object.keys(a).sort(),h="{";for(let p=0;p<o.length;p++)h+=`${JSON.stringify(o[p])}:${hs(a[o[p]])},`;return`${h}}`}function Iy(a){let i="";for(let o of ts)i+=`/${hs(a[o])}`;return i}function Ey(a){let i=a.value;return i?[new ke(a.key,i,"constants have been deprecated as of v8")]:[]}function Tr(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Kn(a){if(Array.isArray(a))return a.map(Kn);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){let i={};for(let o in a)i[o]=Kn(a[o]);return i}return Tr(a)}function on(a){let i=a.key,o=a.value,h=a.valueSpec||{},p=a.objectElementValidators||{},g=a.style,y=a.styleSpec,x=a.validateSpec,S=[],A=Ut(o);if(A!=="object")return[new ke(i,o,`object expected, ${A} found`)];for(let M in o){let O=M.split(".")[0],L=h[O]||h["*"],N;if(p[O])N=p[O];else if(h[O])N=x;else if(p["*"])N=p["*"];else{if(!h["*"]){S.push(new ke(i,o[M],`unknown property "${M}"`));continue}N=x}S=S.concat(N({key:(i&&`${i}.`)+M,value:o[M],valueSpec:L,style:g,styleSpec:y,object:o,objectKey:M,validateSpec:x},o))}for(let M in h)p[M]||h[M].required&&h[M].default===void 0&&o[M]===void 0&&S.push(new ke(i,o,`missing required property "${M}"`));return S}function Zl(a){let i=a.value,o=a.valueSpec,h=a.style,p=a.styleSpec,g=a.key,y=a.arrayElementValidator||a.validateSpec;if(Ut(i)!=="array")return[new ke(g,i,`array expected, ${Ut(i)} found`)];if(o.length&&i.length!==o.length)return[new ke(g,i,`array length ${o.length} expected, length ${i.length} found`)];if(o["min-length"]&&i.length<o["min-length"])return[new ke(g,i,`array length at least ${o["min-length"]} expected, length ${i.length} found`)];let x={type:o.value,values:o.values};p.$version<7&&(x.function=o.function),Ut(o.value)==="object"&&(x=o.value);let S=[];for(let A=0;A<i.length;A++)S=S.concat(y({array:i,arrayIndex:A,value:i[A],valueSpec:x,validateSpec:a.validateSpec,style:h,styleSpec:p,key:`${g}[${A}]`}));return S}function _p(a){let i=a.key,o=a.value,h=a.valueSpec,p=Ut(o);return p==="number"&&o!=o&&(p="NaN"),p!=="number"?[new ke(i,o,`number expected, ${p} found`)]:"minimum"in h&&o<h.minimum?[new ke(i,o,`${o} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&o>h.maximum?[new ke(i,o,`${o} is greater than the maximum value ${h.maximum}`)]:[]}function Th(a){let i=a.valueSpec,o=Tr(a.value.type),h,p,g,y={},x=o!=="categorical"&&a.value.property===void 0,S=!x,A=Ut(a.value.stops)==="array"&&Ut(a.value.stops[0])==="array"&&Ut(a.value.stops[0][0])==="object",M=on({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(N){if(o==="identity")return[new ke(N.key,N.value,"identity function may not have a \"stops\" property")];let U=[],G=N.value;return U=U.concat(Zl({key:N.key,value:G,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:O})),Ut(G)==="array"&&G.length===0&&U.push(new ke(N.key,G,"array must have at least one stop")),U},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:i,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return o==="identity"&&x&&M.push(new ke(a.key,a.value,"missing required property \"property\"")),o==="identity"||a.value.stops||M.push(new ke(a.key,a.value,"missing required property \"stops\"")),o==="exponential"&&a.valueSpec.expression&&!mp(a.valueSpec)&&M.push(new ke(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(S&&!lu(a.valueSpec)?M.push(new ke(a.key,a.value,"property functions not supported")):x&&!_y(a.valueSpec)&&M.push(new ke(a.key,a.value,"zoom functions not supported"))),o!=="categorical"&&!A||a.value.property!==void 0||M.push(new ke(a.key,a.value,"\"property\" property is required")),M;function O(N){let U=[],G=N.value,J=N.key;if(Ut(G)!=="array")return[new ke(J,G,`array expected, ${Ut(G)} found`)];if(G.length!==2)return[new ke(J,G,`array length 2 expected, length ${G.length} found`)];if(A){if(Ut(G[0])!=="object")return[new ke(J,G,`object expected, ${Ut(G[0])} found`)];if(G[0].zoom===void 0)return[new ke(J,G,"object stop key must have zoom")];if(G[0].value===void 0)return[new ke(J,G,"object stop key must have value")];if(g&&g>Tr(G[0].zoom))return[new ke(J,G[0].zoom,"stop zoom values must appear in ascending order")];Tr(G[0].zoom)!==g&&(g=Tr(G[0].zoom),p=void 0,y={}),U=U.concat(on({key:`${J}[0]`,value:G[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:_p,value:L}}))}else U=U.concat(L({key:`${J}[0]`,value:G[0],valueSpec:{},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},G));return Sh(Kn(G[1]))?U.concat([new ke(`${J}[1]`,G[1],"expressions are not allowed in function stops.")]):U.concat(N.validateSpec({key:`${J}[1]`,value:G[1],valueSpec:i,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function L(N,U){let G=Ut(N.value),J=Tr(N.value),ne=N.value!==null?N.value:U;if(h){if(G!==h)return[new ke(N.key,ne,`${G} stop domain type must match previous stop domain type ${h}`)]}else h=G;if(G!=="number"&&G!=="string"&&G!=="boolean")return[new ke(N.key,ne,"stop domain value must be a number, string, or boolean")];if(G!=="number"&&o!=="categorical"){let ve=`number expected, ${G} found`;return lu(i)&&o===void 0&&(ve+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new ke(N.key,ne,ve)]}return o!=="categorical"||G!=="number"||isFinite(J)&&Math.floor(J)===J?o!=="categorical"&&G==="number"&&p!==void 0&&J<p?[new ke(N.key,ne,"stop domain values must appear in ascending order")]:(p=J,o==="categorical"&&J in y?[new ke(N.key,ne,"stop domain values must be unique")]:(y[J]=!0,[])):[new ke(N.key,ne,`integer expected, found ${J}`)]}}function mu(a){let i=(a.expressionContext==="property"?vp:hu)(Kn(a.value),a.valueSpec);if(i.result==="error")return i.value.map(h=>new ke(`${a.key}${h.key}`,a.value,h.message));let o=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!o.outputDefined())return[new ke(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!su(o))return[new ke(a.key,a.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(a.expressionContext==="filter"&&!su(o))return[new ke(a.key,a.value,"\"feature-state\" data expressions are not supported with filters.")];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Vl(o,["zoom","feature-state"]))return[new ke(a.key,a.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(a.expressionContext==="cluster-initial"&&!$l(o))return[new ke(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ja(a){let i=a.key,o=a.value,h=a.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Tr(o))===-1&&p.push(new ke(i,o,`expected one of [${h.values.join(", ")}], ${JSON.stringify(o)} found`)):Object.keys(h.values).indexOf(Tr(o))===-1&&p.push(new ke(i,o,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(o)} found`)),p}function xp(a){return qh(Kn(a.value))?mu(da({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ah(a)}function Ah(a){let i=a.value,o=a.key;if(Ut(i)!=="array")return[new ke(o,i,`array expected, ${Ut(i)} found`)];let h=a.styleSpec,p,g=[];if(i.length<1)return[new ke(o,i,"filter array must have at least 1 element")];switch(g=g.concat(Ja({key:`${o}[0]`,value:i[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),Tr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Tr(i[1])==="$type"&&g.push(new ke(o,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&g.push(new ke(o,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(p=Ut(i[1]),p!=="string"&&g.push(new ke(`${o}[1]`,i[1],`string expected, ${p} found`)));for(let y=2;y<i.length;y++)p=Ut(i[y]),Tr(i[1])==="$type"?g=g.concat(Ja({key:`${o}[${y}]`,value:i[y],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new ke(`${o}[${y}]`,i[y],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let y=1;y<i.length;y++)g=g.concat(Ah({key:`${o}[${y}]`,value:i[y],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":p=Ut(i[1]),i.length!==2?g.push(new ke(o,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new ke(`${o}[1]`,i[1],`string expected, ${p} found`));}return g}function bp(a,i){let o=a.key,h=a.validateSpec,p=a.style,g=a.styleSpec,y=a.value,x=a.objectKey,S=g[`${i}_${a.layerType}`];if(!S)return[];let A=x.match(/^(.*)-transition$/);if(i==="paint"&&A&&S[A[1]]&&S[A[1]].transition)return h({key:o,value:y,valueSpec:g.transition,style:p,styleSpec:g});let M=a.valueSpec||S[x];if(!M)return[new ke(o,y,`unknown property "${x}"`)];let O;if(Ut(y)==="string"&&lu(M)&&!M.tokens&&(O=/^{([^}]+)}$/.exec(y)))return[new ke(o,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(O[1])} }\`.`)];let L=[];return a.layerType==="symbol"&&(x==="text-field"&&p&&!p.glyphs&&L.push(new ke(o,y,"use of \"text-field\" requires a style \"glyphs\" property")),x==="text-font"&&xh(Kn(y))&&Tr(y.type)==="identity"&&L.push(new ke(o,y,"\"text-font\" does not support identity functions"))),L.concat(h({key:a.key,value:y,valueSpec:M,style:p,styleSpec:g,expressionContext:"property",propertyType:i,propertyKey:x}))}function Ph(a){return bp(a,"paint")}function wp(a){return bp(a,"layout")}function Sp(a){let i=[],o=a.value,h=a.key,p=a.style,g=a.styleSpec;o.type||o.ref||i.push(new ke(h,o,"either \"type\" or \"ref\" is required"));let y=Tr(o.type),x=Tr(o.ref);if(o.id){let S=Tr(o.id);for(let A=0;A<a.arrayIndex;A++){let M=p.layers[A];Tr(M.id)===S&&i.push(new ke(h,o.id,`duplicate layer id "${o.id}", previously used at line ${M.id.__line__}`))}}if("ref"in o){let S;["type","source","source-layer","filter","layout"].forEach(A=>{A in o&&i.push(new ke(h,o[A],`"${A}" is prohibited for ref layers`))}),p.layers.forEach(A=>{Tr(A.id)===x&&(S=A)}),S?S.ref?i.push(new ke(h,o.ref,"ref cannot reference another ref layer")):y=Tr(S.type):i.push(new ke(h,o.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(o.source){let S=p.sources&&p.sources[o.source],A=S&&Tr(S.type);S?A==="vector"&&y==="raster"?i.push(new ke(h,o.source,`layer "${o.id}" requires a raster source`)):A!=="raster-dem"&&y==="hillshade"?i.push(new ke(h,o.source,`layer "${o.id}" requires a raster-dem source`)):A==="raster"&&y!=="raster"?i.push(new ke(h,o.source,`layer "${o.id}" requires a vector source`)):A!=="vector"||o["source-layer"]?A==="raster-dem"&&y!=="hillshade"?i.push(new ke(h,o.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!o.paint||!o.paint["line-gradient"]||A==="geojson"&&S.lineMetrics||i.push(new ke(h,o,`layer "${o.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new ke(h,o,`layer "${o.id}" must specify a "source-layer"`)):i.push(new ke(h,o.source,`source "${o.source}" not found`))}else i.push(new ke(h,o,"missing required property \"source\""));return i=i.concat(on({key:h,value:o,valueSpec:g.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:o.type,valueSpec:g.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:o,objectKey:"type"}),filter:xp,layout:S=>on({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":A=>wp(da({layerType:y},A))}}),paint:S=>on({layer:o,key:S.key,value:S.value,style:S.style,styleSpec:S.styleSpec,validateSpec:S.validateSpec,objectElementValidators:{"*":A=>Ph(da({layerType:y},A))}})}})),i}function fs(a){let i=a.value,o=a.key,h=Ut(i);return h!=="string"?[new ke(o,i,`string expected, ${h} found`)]:[]}let Ch={promoteId:function({key:a,value:i}){if(Ut(i)==="string")return fs({key:a,value:i});{let o=[];for(let h in i)o.push(...fs({key:`${a}.${h}`,value:i[h]}));return o}}};function Kl(a){let i=a.value,o=a.key,h=a.styleSpec,p=a.style,g=a.validateSpec;if(!i.type)return[new ke(o,i,"\"type\" is required")];let y=Tr(i.type),x;switch(y){case"vector":case"raster":return x=on({key:o,value:i,valueSpec:h[`source_${y.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Ch,validateSpec:g}),x;case"raster-dem":return x=function(S){var A;let M=(A=S.sourceName)!==null&&A!==void 0?A:"",O=S.value,L=S.styleSpec,N=L.source_raster_dem,U=S.style,G=[],J=Ut(O);if(O===void 0)return G;if(J!=="object")return G.push(new ke("source_raster_dem",O,`object expected, ${J} found`)),G;let ne=Tr(O.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],le=S.value.encoding?`"${S.value.encoding}"`:"Default";for(let pe in O)!ne&&ve.includes(pe)?G.push(new ke(pe,O[pe],`In "${M}": "${pe}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):N[pe]?G=G.concat(S.validateSpec({key:pe,value:O[pe],valueSpec:N[pe],validateSpec:S.validateSpec,style:U,styleSpec:L})):G.push(new ke(pe,O[pe],`unknown property "${pe}"`));return G}({sourceName:o,value:i,style:a.style,styleSpec:h,validateSpec:g}),x;case"geojson":if(x=on({key:o,value:i,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:g,objectElementValidators:Ch}),i.cluster)for(let S in i.clusterProperties){let[A,M]=i.clusterProperties[S],O=typeof A=="string"?[A,["accumulated"],["get",S]]:A;x.push(...mu({key:`${o}.${S}.map`,value:M,validateSpec:g,expressionContext:"cluster-map"})),x.push(...mu({key:`${o}.${S}.reduce`,value:O,validateSpec:g,expressionContext:"cluster-reduce"}))}return x;case"video":return on({key:o,value:i,valueSpec:h.source_video,style:p,validateSpec:g,styleSpec:h});case"image":return on({key:o,value:i,valueSpec:h.source_image,style:p,validateSpec:g,styleSpec:h});case"canvas":return[new ke(o,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ja({key:`${o}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:g,styleSpec:h});}}function qp(a){let i=a.value,o=a.styleSpec,h=o.light,p=a.style,g=[],y=Ut(i);if(i===void 0)return g;if(y!=="object")return g=g.concat([new ke("light",i,`object expected, ${y} found`)]),g;for(let x in i){let S=x.match(/^(.*)-transition$/);g=g.concat(S&&h[S[1]]&&h[S[1]].transition?a.validateSpec({key:x,value:i[x],valueSpec:o.transition,validateSpec:a.validateSpec,style:p,styleSpec:o}):h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],validateSpec:a.validateSpec,style:p,styleSpec:o}):[new ke(x,i[x],`unknown property "${x}"`)])}return g}function Ip(a){let i=a.value,o=a.styleSpec,h=o.sky,p=a.style,g=Ut(i);if(i===void 0)return[];if(g!=="object")return[new ke("sky",i,`object expected, ${g} found`)];let y=[];for(let x in i)y=y.concat(h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],style:p,styleSpec:o}):[new ke(x,i[x],`unknown property "${x}"`)]);return y}function Ep(a){let i=a.value,o=a.styleSpec,h=o.terrain,p=a.style,g=[],y=Ut(i);if(i===void 0)return g;if(y!=="object")return g=g.concat([new ke("terrain",i,`object expected, ${y} found`)]),g;for(let x in i)g=g.concat(h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],validateSpec:a.validateSpec,style:p,styleSpec:o}):[new ke(x,i[x],`unknown property "${x}"`)]);return g}function Tp(a){let i=[],o=a.value,h=a.key;if(Array.isArray(o)){let p=[],g=[];for(let y in o)o[y].id&&p.includes(o[y].id)&&i.push(new ke(h,o,`all the sprites' ids must be unique, but ${o[y].id} is duplicated`)),p.push(o[y].id),o[y].url&&g.includes(o[y].url)&&i.push(new ke(h,o,`all the sprites' URLs must be unique, but ${o[y].url} is duplicated`)),g.push(o[y].url),i=i.concat(on({key:`${h}[${y}]`,value:o[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return i}return fs({key:h,value:o})}let Mh={"*":()=>[],array:Zl,boolean:function(a){let i=a.value,o=a.key,h=Ut(i);return h!=="boolean"?[new ke(o,i,`boolean expected, ${h} found`)]:[]},number:_p,color:function(a){let i=a.key,o=a.value,h=Ut(o);return h!=="string"?[new ke(i,o,`color expected, ${h} found`)]:Xt.parse(String(o))?[]:[new ke(i,o,`color expected, "${o}" found`)]},constants:Ey,enum:Ja,filter:xp,function:Th,layer:Sp,object:on,source:Kl,light:qp,sky:Ip,terrain:Ep,projection:function(a){let i=a.value,o=a.styleSpec,h=o.projection,p=a.style,g=Ut(i);if(i===void 0)return[];if(g!=="object")return[new ke("projection",i,`object expected, ${g} found`)];let y=[];for(let x in i)y=y.concat(h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],style:p,styleSpec:o}):[new ke(x,i[x],`unknown property "${x}"`)]);return y},string:fs,formatted:function(a){return fs(a).length===0?[]:mu(a)},resolvedImage:function(a){return fs(a).length===0?[]:mu(a)},padding:function(a){let i=a.key,o=a.value;if(Ut(o)==="array"){if(o.length<1||o.length>4)return[new ke(i,o,`padding requires 1 to 4 values; ${o.length} values found`)];let h={type:"number"},p=[];for(let g=0;g<o.length;g++)p=p.concat(a.validateSpec({key:`${i}[${g}]`,value:o[g],validateSpec:a.validateSpec,valueSpec:h}));return p}return _p({key:i,value:o,valueSpec:{}})},variableAnchorOffsetCollection:function(a){let i=a.key,o=a.value,h=Ut(o),p=a.styleSpec;if(h!=="array"||o.length<1||o.length%2!=0)return[new ke(i,o,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<o.length;y+=2)g=g.concat(Ja({key:`${i}[${y}]`,value:o[y],valueSpec:p.layout_symbol["text-anchor"]})),g=g.concat(Zl({key:`${i}[${y+1}]`,value:o[y+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:p}));return g},sprite:Tp};function vu(a){let i=a.value,o=a.valueSpec,h=a.styleSpec;return a.validateSpec=vu,o.expression&&xh(Tr(i))?Th(a):o.expression&&Sh(Kn(i))?mu(a):o.type&&Mh[o.type]?Mh[o.type](a):on(da({},a,{valueSpec:o.type?h[o.type]:o}))}function Ty(a){let i=a.value,o=a.key,h=fs(a);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new ke(o,i,"\"glyphs\" url must include a \"{fontstack}\" token")),i.indexOf("{range}")===-1&&h.push(new ke(o,i,"\"glyphs\" url must include a \"{range}\" token"))),h}function wn(a,i=Se){let o=[];return o=o.concat(vu({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,validateSpec:vu,objectElementValidators:{glyphs:Ty,"*":()=>[]}})),a.constants&&(o=o.concat(Ey({key:"constants",value:a.constants,style:a,styleSpec:i,validateSpec:vu}))),Ap(o)}function ya(a){return function(i){return a(bS(xS({},i),{validateSpec:vu}))}}function Ap(a){return[].concat(a).sort((i,o)=>i.line-o.line)}function Xn(a){return function(...i){return Ap(a.apply(this,i))}}wn.source=Xn(ya(Kl)),wn.sprite=Xn(ya(Tp)),wn.glyphs=Xn(ya(Ty)),wn.light=Xn(ya(qp)),wn.sky=Xn(ya(Ip)),wn.terrain=Xn(ya(Ep)),wn.layer=Xn(ya(Sp)),wn.filter=Xn(ya(xp)),wn.paintProperty=Xn(ya(Ph)),wn.layoutProperty=Xn(ya(wp));let ds=wn,qw=ds.light,Iw=ds.sky,Ay=ds.paintProperty,Py=ds.layoutProperty;function Pp(a,i){let o=!1;if(i&&i.length)for(let h of i)a.fire(new go(new Error(h.message))),o=!0;return o}class gu{constructor(i,o,h){let p=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;let y=new Int32Array(this.arrayBuffer);i=y[0],this.d=(o=y[1])+2*(h=y[2]);for(let S=0;S<this.d*this.d;S++){let A=y[3+S],M=y[3+S+1];p.push(A===M?null:y.subarray(A,M))}let x=y[3+p.length+1];this.keys=y.subarray(y[3+p.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=o+2*h;for(let y=0;y<this.d*this.d;y++)p.push([]);this.keys=[],this.bboxes=[]}this.n=o,this.extent=i,this.padding=h,this.scale=o/i,this.uid=0;let g=h/o*i;this.min=-g,this.max=i+g}insert(i,o,h,p,g){this._forEachCell(o,h,p,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(o),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,o,h,p,g,y){this.cells[g].push(y)}query(i,o,h,p,g){let y=this.min,x=this.max;if(i<=y&&o<=y&&x<=h&&x<=p&&!g)return Array.prototype.slice.call(this.keys);{let S=[];return this._forEachCell(i,o,h,p,this._queryCell,S,{},g),S}}_queryCell(i,o,h,p,g,y,x,S){let A=this.cells[g];if(A!==null){let M=this.keys,O=this.bboxes;for(let L=0;L<A.length;L++){let N=A[L];if(x[N]===void 0){let U=4*N;(S?S(O[U+0],O[U+1],O[U+2],O[U+3]):i<=O[U+2]&&o<=O[U+3]&&h>=O[U+0]&&p>=O[U+1])?(x[N]=!0,y.push(M[N])):x[N]=!1}}}}_forEachCell(i,o,h,p,g,y,x,S){let A=this._convertToCellCoord(i),M=this._convertToCellCoord(o),O=this._convertToCellCoord(h),L=this._convertToCellCoord(p);for(let N=A;N<=O;N++)for(let U=M;U<=L;U++){let G=this.d*U+N;if((!S||S(this._convertFromCellCoord(N),this._convertFromCellCoord(U),this._convertFromCellCoord(N+1),this._convertFromCellCoord(U+1)))&&g.call(this,i,o,h,p,G,y,x,S))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let i=this.cells,o=3+this.cells.length+1+1,h=0;for(let y=0;y<this.cells.length;y++)h+=this.cells[y].length;let p=new Int32Array(o+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let g=o;for(let y=0;y<i.length;y++){let x=i[y];p[3+y]=g,p.set(x,g),g+=x.length}return p[3+i.length]=g,p.set(this.keys,g),g+=this.keys.length,p[3+i.length+1]=g,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer}static serialize(i,o){let h=i.toArrayBuffer();return o&&o.push(h),{buffer:h}}static deserialize(i){return new gu(i.buffer)}}let Sn={};function Xe(a,i,o={}){if(Sn[a])throw new Error(`${a} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:a,writeable:!1}),Sn[a]={klass:i,omit:o.omit||[],shallow:o.shallow||[]}}Xe("Object",Object),Xe("TransferableGridIndex",gu),Xe("Color",Xt),Xe("Error",Error),Xe("AJAXError",tn),Xe("ResolvedImage",an),Xe("StylePropertyFunction",pu),Xe("StyleExpression",wh,{omit:["_evaluator"]}),Xe("ZoomDependentExpression",du),Xe("ZoomConstantExpression",fu),Xe("CompoundExpression",bn,{omit:["_evaluate"]});for(let a in ou)ou[a]._classRegistryKey||Xe(`Expression_${a}`,ou[a]);function kh(a){return a&&typeof ArrayBuffer!="undefined"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Cp(a){return a.$name||a.constructor._classRegistryKey}function Cy(a){return!function(i){if(i===null||typeof i!="object")return!1;let o=Cp(i);return!(!o||o==="Object")}(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||kh(a)||ha(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function yu(a,i){if(Cy(a))return(kh(a)||ha(a))&&i&&i.push(a),ArrayBuffer.isView(a)&&i&&i.push(a.buffer),a instanceof ImageData&&i&&i.push(a.data.buffer),a;if(Array.isArray(a)){let g=[];for(let y of a)g.push(yu(y,i));return g}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);let o=Cp(a);if(!o)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!Sn[o])throw new Error(`${o} is not registered.`);let{klass:h}=Sn[o],p=h.serialize?h.serialize(a,i):{};if(h.serialize){if(i&&p===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let g in a){if(!a.hasOwnProperty(g)||Sn[o].omit.indexOf(g)>=0)continue;let y=a[g];p[g]=Sn[o].shallow.indexOf(g)>=0?y:yu(y,i)}a instanceof Error&&(p.message=a.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return o!=="Object"&&(p.$name=o),p}function _u(a){if(Cy(a))return a;if(Array.isArray(a))return a.map(_u);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);let i=Cp(a)||"Object";if(!Sn[i])throw new Error(`can't deserialize unregistered class ${i}`);let{klass:o}=Sn[i];if(!o)throw new Error(`can't deserialize unregistered class ${i}`);if(o.deserialize)return o.deserialize(a);let h=Object.create(o.prototype);for(let p of Object.keys(a)){if(p==="$name")continue;let g=a[p];h[p]=Sn[i].shallow.indexOf(p)>=0?g:_u(g)}return h}class Mp{constructor(){this.first=!0}update(i,o){let h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=o):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=o),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}let zt={"Latin-1 Supplement":a=>a>=128&&a<=255,"Hangul Jamo":a=>a>=4352&&a<=4607,Khmer:a=>a>=6016&&a<=6143,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Katakana:a=>a>=12448&&a<=12543,Kanbun:a=>a>=12688&&a<=12703,"CJK Strokes":a=>a>=12736&&a<=12783,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"Private Use Area":a=>a>=57344&&a<=63743,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function kp(a){for(let i of a)if(Rp(i.charCodeAt(0)))return!0;return!1}function Ew(a){for(let i of a)if(!xu(i.charCodeAt(0)))return!1;return!0}function Op(a){let i=a.map(o=>{try{return new RegExp(`\\p{sc=${o}}`,"u").source}catch(h){return null}}).filter(o=>o);return new RegExp(i.join("|"),"u")}let Tw=Op(["Arab","Dupl","Mong","Ougr","Syrc"]);function xu(a){return!Tw.test(String.fromCodePoint(a))}let My=Op(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Rp(a){return!(a!==746&&a!==747&&(a<4352||!(zt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||zt["CJK Compatibility"](a)||zt["CJK Strokes"](a)||!(!zt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||zt["Enclosed CJK Letters and Months"](a)||zt["Ideographic Description Characters"](a)||zt.Kanbun(a)||zt.Katakana(a)&&a!==12540||!(!zt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!zt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||zt["Vertical Forms"](a)||zt["Yijing Hexagram Symbols"](a)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(a))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(a))||My.test(String.fromCodePoint(a)))))}function ky(a){return!(Rp(a)||function(i){return!!(zt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||zt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||zt["Letterlike Symbols"](i)||zt["Number Forms"](i)||zt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||zt["Control Pictures"](i)&&i!==9251||zt["Optical Character Recognition"](i)||zt["Enclosed Alphanumerics"](i)||zt["Geometric Shapes"](i)||zt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||zt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||zt["CJK Symbols and Punctuation"](i)||zt.Katakana(i)||zt["Private Use Area"](i)||zt["CJK Compatibility Forms"](i)||zt["Small Form Variants"](i)||zt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(a))}let Aw=Op(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Dp(a){return Aw.test(String.fromCodePoint(a))}function Pw(a,i){return!(!i&&Dp(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||zt.Khmer(a))}function Cw(a){for(let i of a)if(Dp(i.charCodeAt(0)))return!0;return!1}let sn=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ur{constructor(i,o){this.zoom=i,o?(this.now=o.now,this.fadeDuration=o.fadeDuration,this.zoomHistory=o.zoomHistory,this.transition=o.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mp,this.transition={})}isSupportedScript(i){return function(o,h){for(let p of o)if(!Pw(p.charCodeAt(0),h))return!1;return!0}(i,sn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let i=this.zoom,o=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:o+(1-o)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*o}}}class bu{constructor(i,o){this.property=i,this.value=o,this.expression=function(h,p){if(xh(h))return new pu(h,p);if(Sh(h)){let g=vp(h,p);if(g.result==="error")throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=h;return p.type==="color"&&typeof h=="string"?g=Xt.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(g=xn.parse(h)):g=nn.parse(h),{kind:"constant",evaluate:()=>g}}}(o===void 0?i.specification.default:o,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,o,h){return this.property.possiblyEvaluate(this,i,o,h)}}class Oh{constructor(i){this.property=i,this.value=new bu(i,void 0)}transitioned(i,o){return new Oy(this.property,this.value,o,Qe({},i.transition,this.transition),i.now)}untransitioned(){return new Oy(this.property,this.value,null,{},0)}}class Rh{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Je(this._values[i].value.value)}setValue(i,o){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Oh(this._values[i].property)),this._values[i].value=new bu(this._values[i].property,o===null?void 0:Je(o))}getTransition(i){return Je(this._values[i].transition)}setTransition(i,o){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Oh(this._values[i].property)),this._values[i].transition=Je(o)||void 0}serialize(){let i={};for(let o of Object.keys(this._values)){let h=this.getValue(o);h!==void 0&&(i[o]=h);let p=this.getTransition(o);p!==void 0&&(i[`${o}-transition`]=p)}return i}transitioned(i,o){let h=new Xl(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(i,o._values[p]);return h}untransitioned(){let i=new Xl(this._properties);for(let o of Object.keys(this._values))i._values[o]=this._values[o].untransitioned();return i}}class Oy{constructor(i,o,h,p,g){this.property=i,this.value=o,this.begin=g+p.delay||0,this.end=this.begin+p.duration||0,i.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(i,o,h){let p=i.now||0,g=this.value.possiblyEvaluate(i,o,h),y=this.prior;if(y){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return y.possiblyEvaluate(i,o,h);{let x=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(i,o,h),g,function(S){if(S<=0)return 0;if(S>=1)return 1;let A=S*S,M=A*S;return 4*(S<.5?M:3*(S-A)+M-.75)}(x))}}return g}}class Xl{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,o,h){let p=new Jl(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,o,h);return p}hasTransition(){for(let i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Yl{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Je(this._values[i].value)}setValue(i,o){this._values[i]=new bu(this._values[i].property,o===null?void 0:Je(o))}serialize(){let i={};for(let o of Object.keys(this._values)){let h=this.getValue(o);h!==void 0&&(i[o]=h)}return i}possiblyEvaluate(i,o,h){let p=new Jl(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,o,h);return p}}class _a{constructor(i,o,h){this.property=i,this.value=o,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,o,h,p){return this.property.evaluate(this.value,this.parameters,i,o,h,p)}}class Jl{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class et{constructor(i){this.specification=i}possiblyEvaluate(i,o){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(o)}interpolate(i,o,h){let p=zi[this.specification.type];return p?p(i,o,h):i}}class ht{constructor(i,o){this.specification=i,this.overrides=o}possiblyEvaluate(i,o,h,p){return new _a(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(o,null,{},h,p)}:i.expression,o)}interpolate(i,o,h){if(i.value.kind!=="constant"||o.value.kind!=="constant")return i;if(i.value.value===void 0||o.value.value===void 0)return new _a(this,{kind:"constant",value:void 0},i.parameters);let p=zi[this.specification.type];if(p){let g=p(i.value.value,o.value.value,h);return new _a(this,{kind:"constant",value:g},i.parameters)}return i}evaluate(i,o,h,p,g,y){return i.kind==="constant"?i.value:i.evaluate(o,h,p,g,y)}}class Dh extends ht{possiblyEvaluate(i,o,h,p){if(i.value===void 0)return new _a(this,{kind:"constant",value:void 0},o);if(i.expression.kind==="constant"){let g=i.expression.evaluate(o,null,{},h,p),y=i.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,x=this._calculate(y,y,y,o);return new _a(this,{kind:"constant",value:x},o)}if(i.expression.kind==="camera"){let g=this._calculate(i.expression.evaluate({zoom:o.zoom-1}),i.expression.evaluate({zoom:o.zoom}),i.expression.evaluate({zoom:o.zoom+1}),o);return new _a(this,{kind:"constant",value:g},o)}return new _a(this,i.expression,o)}evaluate(i,o,h,p,g,y){if(i.kind==="source"){let x=i.evaluate(o,h,p,g,y);return this._calculate(x,x,x,o)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(o.zoom)-1},h,p),i.evaluate({zoom:Math.floor(o.zoom)},h,p),i.evaluate({zoom:Math.floor(o.zoom)+1},h,p),o):i.value}_calculate(i,o,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:h,to:o}}interpolate(i){return i}}class Lh{constructor(i){this.specification=i}possiblyEvaluate(i,o,h,p){if(i.value!==void 0){if(i.expression.kind==="constant"){let g=i.expression.evaluate(o,null,{},h,p);return this._calculate(g,g,g,o)}return this._calculate(i.expression.evaluate(new ur(Math.floor(o.zoom-1),o)),i.expression.evaluate(new ur(Math.floor(o.zoom),o)),i.expression.evaluate(new ur(Math.floor(o.zoom+1),o)),o)}}_calculate(i,o,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:o}:{from:h,to:o}}interpolate(i){return i}}class Lp{constructor(i){this.specification=i}possiblyEvaluate(i,o,h,p){return!!i.expression.evaluate(o,null,{},h,p)}interpolate(){return!1}}class v{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let o in i){let h=i[o];h.specification.overridable&&this.overridableProperties.push(o);let p=this.defaultPropertyValues[o]=new bu(h,void 0),g=this.defaultTransitionablePropertyValues[o]=new Oh(h);this.defaultTransitioningPropertyValues[o]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[o]=p.possiblyEvaluate({})}}}Xe("DataDrivenProperty",ht),Xe("DataConstantProperty",et),Xe("CrossFadedDataDrivenProperty",Dh),Xe("CrossFadedProperty",Lh),Xe("ColorRampProperty",Lp);let r="-transition";class l extends Js{constructor(i,o){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),o.layout&&(this._unevaluatedLayout=new Yl(o.layout)),o.paint)){this._transitionablePaint=new Rh(o.paint);for(let h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(let h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Jl(o.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,o,h={}){o!=null&&this._validate(Py,`layers.${this.id}.layout.${i}`,i,o,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,o):this.visibility=o)}getPaintProperty(i){return i.endsWith(r)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,o,h={}){if(o!=null&&this._validate(Ay,`layers.${this.id}.paint.${i}`,i,o,h))return!1;if(i.endsWith(r))return this._transitionablePaint.setTransition(i.slice(0,-11),o||void 0),!1;{let p=this._transitionablePaint._values[i],g=p.property.specification["property-type"]==="cross-faded-data-driven",y=p.value.isDataDriven(),x=p.value;this._transitionablePaint.setValue(i,o),this._handleSpecialPaintPropertyUpdate(i);let S=this._transitionablePaint._values[i].value;return S.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(i,x,S)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,o,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,o){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,o)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,o)}serialize(){let i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),gt(i,(o,h)=>!(o===void 0||h==="layout"&&!Object.keys(o).length||h==="paint"&&!Object.keys(o).length))}_validate(i,o,h,p,g={}){return(!g||g.validate!==!1)&&Pp(this,i.call(ds,{key:o,layerType:this.type,objectKey:h,value:p,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let i in this.paint._values){let o=this.paint.get(i);if(o instanceof _a&&lu(o.property.specification)&&(o.value.kind==="source"||o.value.kind==="composite")&&o.value.isStateDependent)return!0}return!1}}let f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class d{constructor(i,o){this._structArray=i,this._pos1=o*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class m{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,o){return i._trim(),o&&(i.isTransferred=!0,o.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){let o=Object.create(this.prototype);return o.arrayBuffer=i.arrayBuffer,o.length=i.length,o.capacity=i.arrayBuffer.byteLength/o.bytesPerElement,o._refreshViews(),o}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let o=this.uint8;this._refreshViews(),o&&this.uint8.set(o)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function b(a,i=1){let o=0,h=0;return{members:a.map(p=>{let g=f[p.type].BYTES_PER_ELEMENT,y=o=q(o,Math.max(i,g)),x=p.components||1;return h=Math.max(h,g),o+=g*x,{name:p.name,type:p.type,components:x,offset:y}}),size:q(o,Math.max(h,i)),alignment:i}}function q(a,i){return Math.ceil(a/i)*i}class T extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o){let h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){let p=2*i;return this.int16[p+0]=o,this.int16[p+1]=h,i}}T.prototype.bytesPerElement=4,Xe("StructArrayLayout2i4",T);class k extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){let g=3*i;return this.int16[g+0]=o,this.int16[g+1]=h,this.int16[g+2]=p,i}}k.prototype.bytesPerElement=6,Xe("StructArrayLayout3i6",k);class R extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,i,o,h,p)}emplace(i,o,h,p,g){let y=4*i;return this.int16[y+0]=o,this.int16[y+1]=h,this.int16[y+2]=p,this.int16[y+3]=g,i}}R.prototype.bytesPerElement=8,Xe("StructArrayLayout4i8",R);class D extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,o,h,p,g,y)}emplace(i,o,h,p,g,y,x){let S=6*i;return this.int16[S+0]=o,this.int16[S+1]=h,this.int16[S+2]=p,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,i}}D.prototype.bytesPerElement=12,Xe("StructArrayLayout2i4i12",D);class j extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,o,h,p,g,y)}emplace(i,o,h,p,g,y,x){let S=4*i,A=8*i;return this.int16[S+0]=o,this.int16[S+1]=h,this.uint8[A+4]=p,this.uint8[A+5]=g,this.uint8[A+6]=y,this.uint8[A+7]=x,i}}j.prototype.bytesPerElement=8,Xe("StructArrayLayout2i4ub8",j);class H extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o){let h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){let p=2*i;return this.float32[p+0]=o,this.float32[p+1]=h,i}}H.prototype.bytesPerElement=8,Xe("StructArrayLayout2f8",H);class Z extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y,x,S,A,M){let O=this.length;return this.resize(O+1),this.emplace(O,i,o,h,p,g,y,x,S,A,M)}emplace(i,o,h,p,g,y,x,S,A,M,O){let L=10*i;return this.uint16[L+0]=o,this.uint16[L+1]=h,this.uint16[L+2]=p,this.uint16[L+3]=g,this.uint16[L+4]=y,this.uint16[L+5]=x,this.uint16[L+6]=S,this.uint16[L+7]=A,this.uint16[L+8]=M,this.uint16[L+9]=O,i}}Z.prototype.bytesPerElement=20,Xe("StructArrayLayout10ui20",Z);class ee extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y,x,S,A,M,O,L){let N=this.length;return this.resize(N+1),this.emplace(N,i,o,h,p,g,y,x,S,A,M,O,L)}emplace(i,o,h,p,g,y,x,S,A,M,O,L,N){let U=12*i;return this.int16[U+0]=o,this.int16[U+1]=h,this.int16[U+2]=p,this.int16[U+3]=g,this.uint16[U+4]=y,this.uint16[U+5]=x,this.uint16[U+6]=S,this.uint16[U+7]=A,this.int16[U+8]=M,this.int16[U+9]=O,this.int16[U+10]=L,this.int16[U+11]=N,i}}ee.prototype.bytesPerElement=24,Xe("StructArrayLayout4i4ui4i24",ee);class ae extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){let g=3*i;return this.float32[g+0]=o,this.float32[g+1]=h,this.float32[g+2]=p,i}}ae.prototype.bytesPerElement=12,Xe("StructArrayLayout3f12",ae);class oe extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){let o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint32[1*i+0]=o,i}}oe.prototype.bytesPerElement=4,Xe("StructArrayLayout1ul4",oe);class ue extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y,x,S,A){let M=this.length;return this.resize(M+1),this.emplace(M,i,o,h,p,g,y,x,S,A)}emplace(i,o,h,p,g,y,x,S,A,M){let O=10*i,L=5*i;return this.int16[O+0]=o,this.int16[O+1]=h,this.int16[O+2]=p,this.int16[O+3]=g,this.int16[O+4]=y,this.int16[O+5]=x,this.uint32[L+3]=S,this.uint16[O+8]=A,this.uint16[O+9]=M,i}}ue.prototype.bytesPerElement=20,Xe("StructArrayLayout6i1ul2ui20",ue);class Y extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,o,h,p,g,y)}emplace(i,o,h,p,g,y,x){let S=6*i;return this.int16[S+0]=o,this.int16[S+1]=h,this.int16[S+2]=p,this.int16[S+3]=g,this.int16[S+4]=y,this.int16[S+5]=x,i}}Y.prototype.bytesPerElement=12,Xe("StructArrayLayout2i2i2i12",Y);class he extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g){let y=this.length;return this.resize(y+1),this.emplace(y,i,o,h,p,g)}emplace(i,o,h,p,g,y){let x=4*i,S=8*i;return this.float32[x+0]=o,this.float32[x+1]=h,this.float32[x+2]=p,this.int16[S+6]=g,this.int16[S+7]=y,i}}he.prototype.bytesPerElement=16,Xe("StructArrayLayout2f1f2i16",he);class de extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,o,h,p,g,y)}emplace(i,o,h,p,g,y,x){let S=16*i,A=4*i,M=8*i;return this.uint8[S+0]=o,this.uint8[S+1]=h,this.float32[A+1]=p,this.float32[A+2]=g,this.int16[M+6]=y,this.int16[M+7]=x,i}}de.prototype.bytesPerElement=16,Xe("StructArrayLayout2ub2f2i16",de);class ge extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){let g=3*i;return this.uint16[g+0]=o,this.uint16[g+1]=h,this.uint16[g+2]=p,i}}ge.prototype.bytesPerElement=6,Xe("StructArrayLayout3ui6",ge);class Te extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y,x,S,A,M,O,L,N,U,G,J,ne){let ve=this.length;return this.resize(ve+1),this.emplace(ve,i,o,h,p,g,y,x,S,A,M,O,L,N,U,G,J,ne)}emplace(i,o,h,p,g,y,x,S,A,M,O,L,N,U,G,J,ne,ve){let le=24*i,pe=12*i,qe=48*i;return this.int16[le+0]=o,this.int16[le+1]=h,this.uint16[le+2]=p,this.uint16[le+3]=g,this.uint32[pe+2]=y,this.uint32[pe+3]=x,this.uint32[pe+4]=S,this.uint16[le+10]=A,this.uint16[le+11]=M,this.uint16[le+12]=O,this.float32[pe+7]=L,this.float32[pe+8]=N,this.uint8[qe+36]=U,this.uint8[qe+37]=G,this.uint8[qe+38]=J,this.uint32[pe+10]=ne,this.int16[le+22]=ve,i}}Te.prototype.bytesPerElement=48,Xe("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Te);class Me extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p,g,y,x,S,A,M,O,L,N,U,G,J,ne,ve,le,pe,qe,Ce,Ge,ct,$e,Be,at,Ye){let Ke=this.length;return this.resize(Ke+1),this.emplace(Ke,i,o,h,p,g,y,x,S,A,M,O,L,N,U,G,J,ne,ve,le,pe,qe,Ce,Ge,ct,$e,Be,at,Ye)}emplace(i,o,h,p,g,y,x,S,A,M,O,L,N,U,G,J,ne,ve,le,pe,qe,Ce,Ge,ct,$e,Be,at,Ye,Ke){let Ee=32*i,ot=16*i;return this.int16[Ee+0]=o,this.int16[Ee+1]=h,this.int16[Ee+2]=p,this.int16[Ee+3]=g,this.int16[Ee+4]=y,this.int16[Ee+5]=x,this.int16[Ee+6]=S,this.int16[Ee+7]=A,this.uint16[Ee+8]=M,this.uint16[Ee+9]=O,this.uint16[Ee+10]=L,this.uint16[Ee+11]=N,this.uint16[Ee+12]=U,this.uint16[Ee+13]=G,this.uint16[Ee+14]=J,this.uint16[Ee+15]=ne,this.uint16[Ee+16]=ve,this.uint16[Ee+17]=le,this.uint16[Ee+18]=pe,this.uint16[Ee+19]=qe,this.uint16[Ee+20]=Ce,this.uint16[Ee+21]=Ge,this.uint16[Ee+22]=ct,this.uint32[ot+12]=$e,this.float32[ot+13]=Be,this.float32[ot+14]=at,this.uint16[Ee+30]=Ye,this.uint16[Ee+31]=Ke,i}}Me.prototype.bytesPerElement=64,Xe("StructArrayLayout8i15ui1ul2f2ui64",Me);class je extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){let o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.float32[1*i+0]=o,i}}je.prototype.bytesPerElement=4,Xe("StructArrayLayout1f4",je);class We extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){let g=3*i;return this.uint16[6*i+0]=o,this.float32[g+1]=h,this.float32[g+2]=p,i}}We.prototype.bytesPerElement=12,Xe("StructArrayLayout1ui2f12",We);class ze extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,o,h)}emplace(i,o,h,p){let g=4*i;return this.uint32[2*i+0]=o,this.uint16[g+2]=h,this.uint16[g+3]=p,i}}ze.prototype.bytesPerElement=8,Xe("StructArrayLayout1ul2ui8",ze);class De extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,o){let h=this.length;return this.resize(h+1),this.emplace(h,i,o)}emplace(i,o,h){let p=2*i;return this.uint16[p+0]=o,this.uint16[p+1]=h,i}}De.prototype.bytesPerElement=4,Xe("StructArrayLayout2ui4",De);class tt extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){let o=this.length;return this.resize(o+1),this.emplace(o,i)}emplace(i,o){return this.uint16[1*i+0]=o,i}}tt.prototype.bytesPerElement=2,Xe("StructArrayLayout1ui2",tt);class yt extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,o,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,i,o,h,p)}emplace(i,o,h,p,g){let y=4*i;return this.float32[y+0]=o,this.float32[y+1]=h,this.float32[y+2]=p,this.float32[y+3]=g,i}}yt.prototype.bytesPerElement=16,Xe("StructArrayLayout4f16",yt);class Ne extends d{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new P(this.anchorPointX,this.anchorPointY)}}Ne.prototype.size=20;class Ve extends ue{get(i){return new Ne(this,i)}}Xe("CollisionBoxArray",Ve);class mt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}mt.prototype.size=48;class lr extends Te{get(i){return new mt(this,i)}}Xe("PlacedSymbolArray",lr);class Et extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Et.prototype.size=64;class Rt extends Me{get(i){return new Et(this,i)}}Xe("SymbolInstanceArray",Rt);class cr extends je{getoffsetX(i){return this.float32[1*i+0]}}Xe("GlyphOffsetArray",cr);class hi extends k{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Xe("SymbolLineVertexArray",hi);class Yn extends d{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Yn.prototype.size=12;class hr extends We{get(i){return new Yn(this,i)}}Xe("TextAnchorOffsetArray",hr);class Ni extends d{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ni.prototype.size=8;class Si extends ze{get(i){return new Ni(this,i)}}Xe("FeatureIndexArray",Si);class fi extends T{}class qi extends T{}class xa extends T{}class wu extends D{}class zh extends j{}class Su extends H{}class qn extends Z{}class Fh extends ee{}class zp extends ae{}class In extends oe{}class En extends Y{}class So extends de{}class Jn extends ge{}class ni extends De{}let di=b([{name:"a_pos",components:2,type:"Int16"}],4),{members:un}=di;class Ft{constructor(i=[]){this.segments=i}prepareSegment(i,o,h,p){let g=this.segments[this.segments.length-1];return i>Ft.MAX_VERTEX_ARRAY_LENGTH&&Yr(`Max vertices per segment is ${Ft.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!g||g.vertexLength+i>Ft.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:o.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(let i of this.segments)for(let o in i.vaos)i.vaos[o].destroy()}static simpleSegment(i,o,h,p){return new Ft([{vertexOffset:i,primitiveOffset:o,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function ps(a,i){return 256*(a=_e(Math.floor(a),0,255))+_e(Math.floor(i),0,255)}Ft.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Xe("SegmentVector",Ft);let qu=b([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Iu={exports:{}},Ry={exports:{}};Ry.exports=function(a,i){var o,h,p,g,y,x,S,A;for(h=a.length-(o=3&a.length),p=i,y=3432918353,x=461845907,A=0;A<h;)S=255&a.charCodeAt(A)|(255&a.charCodeAt(++A))<<8|(255&a.charCodeAt(++A))<<16|(255&a.charCodeAt(++A))<<24,++A,p=27492+(65535&(g=5*(65535&(p=(p^=S=(65535&(S=(S=(65535&S)*y+(((S>>>16)*y&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(S=0,o){case 3:S^=(255&a.charCodeAt(A+2))<<16;case 2:S^=(255&a.charCodeAt(A+1))<<8;case 1:p^=S=(65535&(S=(S=(65535&(S^=255&a.charCodeAt(A)))*y+(((S>>>16)*y&65535)<<16)&4294967295)<<15|S>>>17))*x+(((S>>>16)*x&65535)<<16)&4294967295;}return p^=a.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var Mw=Ry.exports,Dy={exports:{}};Dy.exports=function(a,i){for(var o,h=a.length,p=i^h,g=0;h>=4;)o=1540483477*(65535&(o=255&a.charCodeAt(g)|(255&a.charCodeAt(++g))<<8|(255&a.charCodeAt(++g))<<16|(255&a.charCodeAt(++g))<<24))+((1540483477*(o>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(o=1540483477*(65535&(o^=o>>>24))+((1540483477*(o>>>16)&65535)<<16)),h-=4,++g;switch(h){case 3:p^=(255&a.charCodeAt(g+2))<<16;case 2:p^=(255&a.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&a.charCodeAt(g)))+((1540483477*(p>>>16)&65535)<<16);}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var qo=Mw,Ly=Dy.exports;Iu.exports=qo,Iu.exports.murmur3=qo,Iu.exports.murmur2=Ly;var Nh=_(Iu.exports);class Ql{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,o,h,p){this.ids.push(Bh(i)),this.positions.push(o,h,p)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let o=Bh(i),h=0,p=this.ids.length-1;for(;h<p;){let y=h+p>>1;this.ids[y]>=o?p=y:h=y+1}let g=[];for(;this.ids[h]===o;)g.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return g}static serialize(i,o){let h=new Float64Array(i.ids),p=new Uint32Array(i.positions);return jh(h,p,0,h.length-1),o&&o.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(i){let o=new Ql;return o.ids=i.ids,o.positions=i.positions,o.indexed=!0,o}}function Bh(a){let i=+a;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Nh(String(a))}function jh(a,i,o,h){for(;o<h;){let p=a[o+h>>1],g=o-1,y=h+1;for(;;){do g++;while(a[g]<p);do y--;while(a[y]>p);if(g>=y)break;Eu(a,g,y),Eu(i,3*g,3*y),Eu(i,3*g+1,3*y+1),Eu(i,3*g+2,3*y+2)}y-o<h-y?(jh(a,i,o,y),o=y+1):(jh(a,i,y+1,h),h=y)}}function Eu(a,i,o){let h=a[i];a[i]=a[o],a[o]=h}Xe("FeaturePositionMap",Ql);class ec{constructor(i,o){this.gl=i.gl,this.location=o}}class zy extends ec{constructor(i,o){super(i,o),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class XO extends ec{constructor(i,o){super(i,o),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class YO extends ec{constructor(i,o){super(i,o),this.current=Xt.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}let Kle=new Float32Array(16);function kw(a){return[ps(255*a.r,255*a.g),ps(255*a.b,255*a.a)]}class Fp{constructor(i,o,h){this.value=i,this.uniformNames=o.map(p=>`u_${p}`),this.type=h}setUniform(i,o,h){i.set(h.constantOr(this.value))}getBinding(i,o,h){return this.type==="color"?new YO(i,o):new zy(i,o)}}class Uh{constructor(i,o){this.uniformNames=o.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,o){this.pixelRatioFrom=o.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=o.tlbr,this.patternTo=i.tlbr}setUniform(i,o,h,p){let g=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&i.set(g)}getBinding(i,o,h){return h.substr(0,9)==="u_pattern"?new XO(i,o):new zy(i,o)}}class ms{constructor(i,o,h,p){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=o.map(g=>({name:`a_${g}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,o,h,p,g){let y=this.paintVertexArray.length,x=this.expression.evaluate(new ur(0),o,{},p,[],g);this.paintVertexArray.resize(i),this._setPaintValue(y,i,x)}updatePaintArray(i,o,h,p){let g=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(i,o,g)}_setPaintValue(i,o,h){if(this.type==="color"){let p=kw(h);for(let g=i;g<o;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=i;p<o;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qa{constructor(i,o,h,p,g,y){this.expression=i,this.uniformNames=o.map(x=>`u_${x}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=o.map(x=>({name:`a_${x}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(i,o,h,p,g){let y=this.expression.evaluate(new ur(this.zoom),o,{},p,[],g),x=this.expression.evaluate(new ur(this.zoom+1),o,{},p,[],g),S=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(S,i,y,x)}updatePaintArray(i,o,h,p){let g=this.expression.evaluate({zoom:this.zoom},h,p),y=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(i,o,g,y)}_setPaintValue(i,o,h,p){if(this.type==="color"){let g=kw(h),y=kw(p);for(let x=i;x<o;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=i;g<o;g++)this.paintVertexArray.emplace(g,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,o){let h=this.useIntegerZoom?Math.floor(o.zoom):o.zoom,p=_e(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(p)}getBinding(i,o,h){return new zy(i,o)}}class Tu{constructor(i,o,h,p,g,y){this.expression=i,this.type=o,this.useIntegerZoom=h,this.zoom=p,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(i,o,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(p,i,o.patterns&&o.patterns[this.layerId],h)}updatePaintArray(i,o,h,p,g){this._setPaintValues(i,o,h.patterns&&h.patterns[this.layerId],g)}_setPaintValues(i,o,h,p){if(!p||!h)return;let{min:g,mid:y,max:x}=h,S=p[g],A=p[y],M=p[x];if(S&&A&&M)for(let O=i;O<o;O++)this.zoomInPaintVertexArray.emplace(O,A.tl[0],A.tl[1],A.br[0],A.br[1],S.tl[0],S.tl[1],S.br[0],S.br[1],A.pixelRatio,S.pixelRatio),this.zoomOutPaintVertexArray.emplace(O,A.tl[0],A.tl[1],A.br[0],A.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],A.pixelRatio,M.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,qu.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,qu.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class JO{constructor(i,o,h){this.binders={},this._buffers=[];let p=[];for(let g in i.paint._values){if(!h(g))continue;let y=i.paint.get(g);if(!(y instanceof _a&&lu(y.property.specification)))continue;let x=Xle(g,i.type),S=y.value,A=y.property.specification.type,M=y.property.useIntegerZoom,O=y.property.specification["property-type"],L=O==="cross-faded"||O==="cross-faded-data-driven";if(S.kind==="constant")this.binders[g]=L?new Uh(S.value,x):new Fp(S.value,x,A),p.push(`/u_${g}`);else if(S.kind==="source"||L){let N=QO(g,A,"source");this.binders[g]=L?new Tu(S,A,M,o,N,i.id):new ms(S,x,A,N),p.push(`/a_${g}`)}else{let N=QO(g,A,"composite");this.binders[g]=new Qa(S,x,A,M,o,N),p.push(`/z_${g}`)}}this.cacheKey=p.sort().join("")}getMaxValue(i){let o=this.binders[i];return o instanceof ms||o instanceof Qa?o.maxValue:0}populatePaintArrays(i,o,h,p,g){for(let y in this.binders){let x=this.binders[y];(x instanceof ms||x instanceof Qa||x instanceof Tu)&&x.populatePaintArray(i,o,h,p,g)}}setConstantPatternPositions(i,o){for(let h in this.binders){let p=this.binders[h];p instanceof Uh&&p.setConstantPatternPositions(i,o)}}updatePaintArrays(i,o,h,p,g){let y=!1;for(let x in i){let S=o.getPositions(x);for(let A of S){let M=h.feature(A.index);for(let O in this.binders){let L=this.binders[O];if((L instanceof ms||L instanceof Qa||L instanceof Tu)&&L.expression.isStateDependent===!0){let N=p.paint.get(O);L.expression=N.value,L.updatePaintArray(A.start,A.end,M,i[x],g),y=!0}}}}return y}defines(){let i=[];for(let o in this.binders){let h=this.binders[o];(h instanceof Fp||h instanceof Uh)&&i.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){let i=[];for(let o in this.binders){let h=this.binders[o];if(h instanceof ms||h instanceof Qa)for(let p=0;p<h.paintVertexAttributes.length;p++)i.push(h.paintVertexAttributes[p].name);else if(h instanceof Tu)for(let p=0;p<qu.members.length;p++)i.push(qu.members[p].name)}return i}getBinderUniforms(){let i=[];for(let o in this.binders){let h=this.binders[o];if(h instanceof Fp||h instanceof Uh||h instanceof Qa)for(let p of h.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,o){let h=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof Fp||g instanceof Uh||g instanceof Qa){for(let y of g.uniformNames)if(o[y]){let x=g.getBinding(i,o[y],y);h.push({name:y,property:p,binding:x})}}}return h}setUniforms(i,o,h,p){for(let{name:g,property:y,binding:x}of o)this.binders[y].setUniform(x,p,h.get(y),g)}updatePaintBuffers(i){this._buffers=[];for(let o in this.binders){let h=this.binders[o];if(i&&h instanceof Tu){let p=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof ms||h instanceof Qa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(let o in this.binders){let h=this.binders[o];(h instanceof ms||h instanceof Qa||h instanceof Tu)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(let i in this.binders){let o=this.binders[i];(o instanceof ms||o instanceof Qa||o instanceof Tu)&&o.destroy()}}}class tc{constructor(i,o,h=()=>!0){this.programConfigurations={};for(let p of i)this.programConfigurations[p.id]=new JO(p,o,h);this.needsUpload=!1,this._featureMap=new Ql,this._bufferOffset=0}populatePaintArrays(i,o,h,p,g,y){for(let x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(i,o,p,g,y);o.id!==void 0&&this._featureMap.add(o.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,o,h,p){for(let g of h)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(i,this._featureMap,o,g,p)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(let o in this.programConfigurations)this.programConfigurations[o].upload(i);this.needsUpload=!1}}destroy(){for(let i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Xle(a,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}function QO(a,i,o){let h={color:{source:H,composite:yt},number:{source:je,composite:H}},p=function(g){return{"line-pattern":{source:qn,composite:qn},"fill-pattern":{source:qn,composite:qn},"fill-extrusion-pattern":{source:qn,composite:qn}}[g]}(a);return p&&p[o]||h[i][o]}Xe("ConstantBinder",Fp),Xe("CrossFadedConstantBinder",Uh),Xe("SourceExpressionBinder",ms),Xe("CrossFadedCompositeBinder",Tu),Xe("CompositeExpressionBinder",Qa),Xe("ProgramConfiguration",JO,{omit:["_buffers"]}),Xe("ProgramConfigurationSet",tc);let Fr=8192,Ow=Math.pow(2,14)-1,eR=-Ow-1;function rc(a){let i=Fr/a.extent,o=a.loadGeometry();for(let h=0;h<o.length;h++){let p=o[h];for(let g=0;g<p.length;g++){let y=p[g],x=Math.round(y.x*i),S=Math.round(y.y*i);y.x=_e(x,eR,Ow),y.y=_e(S,eR,Ow),(x<y.x||x>y.x+1||S<y.y||S>y.y+1)&&Yr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return o}function ic(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?rc(a):[]}}function Fy(a,i,o,h,p){a.emplaceBack(2*i+(h+1)/2,2*o+(p+1)/2)}class Rw{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new qi,this.indexArray=new Jn,this.segments=new Ft,this.programConfigurations=new tc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){let p=this.layers[0],g=[],y=null,x=!1;p.type==="circle"&&(y=p.layout.get("circle-sort-key"),x=!y.isConstant());for(let{feature:S,id:A,index:M,sourceLayerIndex:O}of i){let L=this.layers[0]._featureFilter.needGeometry,N=ic(S,L);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),N,h))continue;let U=x?y.evaluate(N,{},h):void 0,G={id:A,properties:S.properties,type:S.type,sourceLayerIndex:O,index:M,geometry:L?N.geometry:rc(S),patterns:{},sortKey:U};g.push(G)}x&&g.sort((S,A)=>S.sortKey-A.sortKey);for(let S of g){let{geometry:A,index:M,sourceLayerIndex:O}=S,L=i[M].feature;this.addFeature(S,A,M,h),o.featureIndex.insert(L,A,M,O,this.index)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,un),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,o,h,p){for(let g of o)for(let y of g){let x=y.x,S=y.y;if(x<0||x>=Fr||S<0||S>=Fr)continue;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),M=A.vertexLength;Fy(this.layoutVertexArray,x,S,-1,-1),Fy(this.layoutVertexArray,x,S,1,-1),Fy(this.layoutVertexArray,x,S,1,1),Fy(this.layoutVertexArray,x,S,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},p)}}function tR(a,i){for(let o=0;o<a.length;o++)if($h(i,a[o]))return!0;for(let o=0;o<i.length;o++)if($h(a,i[o]))return!0;return!!Dw(a,i)}function Yle(a,i,o){return!!$h(a,i)||!!Lw(i,a,o)}function rR(a,i){if(a.length===1)return nR(i,a[0]);for(let o=0;o<i.length;o++){let h=i[o];for(let p=0;p<h.length;p++)if($h(a,h[p]))return!0}for(let o=0;o<a.length;o++)if(nR(i,a[o]))return!0;for(let o=0;o<i.length;o++)if(Dw(a,i[o]))return!0;return!1}function Jle(a,i,o){if(a.length>1){if(Dw(a,i))return!0;for(let h=0;h<i.length;h++)if(Lw(i[h],a,o))return!0}for(let h=0;h<a.length;h++)if(Lw(a[h],i,o))return!0;return!1}function Dw(a,i){if(a.length===0||i.length===0)return!1;for(let o=0;o<a.length-1;o++){let h=a[o],p=a[o+1];for(let g=0;g<i.length-1;g++)if(Qle(h,p,i[g],i[g+1]))return!0}return!1}function Qle(a,i,o,h){return xi(a,o,h)!==xi(i,o,h)&&xi(a,i,o)!==xi(a,i,h)}function Lw(a,i,o){let h=o*o;if(i.length===1)return a.distSqr(i[0])<h;for(let p=1;p<i.length;p++)if(iR(a,i[p-1],i[p])<h)return!0;return!1}function iR(a,i,o){let h=i.distSqr(o);if(h===0)return a.distSqr(i);let p=((a.x-i.x)*(o.x-i.x)+(a.y-i.y)*(o.y-i.y))/h;return a.distSqr(p<0?i:p>1?o:o.sub(i)._mult(p)._add(i))}function nR(a,i){let o,h,p,g=!1;for(let y=0;y<a.length;y++){o=a[y];for(let x=0,S=o.length-1;x<o.length;S=x++)h=o[x],p=o[S],h.y>i.y!=p.y>i.y&&i.x<(p.x-h.x)*(i.y-h.y)/(p.y-h.y)+h.x&&(g=!g)}return g}function $h(a,i){let o=!1;for(let h=0,p=a.length-1;h<a.length;p=h++){let g=a[h],y=a[p];g.y>i.y!=y.y>i.y&&i.x<(y.x-g.x)*(i.y-g.y)/(y.y-g.y)+g.x&&(o=!o)}return o}function ece(a,i,o){let h=o[0],p=o[2];if(a.x<h.x&&i.x<h.x||a.x>p.x&&i.x>p.x||a.y<h.y&&i.y<h.y||a.y>p.y&&i.y>p.y)return!1;let g=xi(a,i,o[0]);return g!==xi(a,i,o[1])||g!==xi(a,i,o[2])||g!==xi(a,i,o[3])}function Np(a,i,o){let h=i.paint.get(a).value;return h.kind==="constant"?h.value:o.programConfigurations.get(i.id).getMaxValue(a)}function Ny(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function By(a,i,o,h,p){if(!i[0]&&!i[1])return a;let g=P.convert(i)._mult(p);o==="viewport"&&g._rotate(-h);let y=[];for(let x=0;x<a.length;x++)y.push(a[x].sub(g));return y}let aR,oR;Xe("CircleBucket",Rw,{omit:["layers"]});var tce={get paint(){return oR=oR||new v({"circle-radius":new ht(Se.paint_circle["circle-radius"]),"circle-color":new ht(Se.paint_circle["circle-color"]),"circle-blur":new ht(Se.paint_circle["circle-blur"]),"circle-opacity":new ht(Se.paint_circle["circle-opacity"]),"circle-translate":new et(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new et(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new et(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new et(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ht(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ht(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ht(Se.paint_circle["circle-stroke-opacity"])})},get layout(){return aR=aR||new v({"circle-sort-key":new ht(Se.layout_circle["circle-sort-key"])})}},Bi=1e-6,Vh=typeof Float32Array!="undefined"?Float32Array:Array;function zw(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function sR(a,i,o){var h=i[0],p=i[1],g=i[2],y=i[3],x=i[4],S=i[5],A=i[6],M=i[7],O=i[8],L=i[9],N=i[10],U=i[11],G=i[12],J=i[13],ne=i[14],ve=i[15],le=o[0],pe=o[1],qe=o[2],Ce=o[3];return a[0]=le*h+pe*x+qe*O+Ce*G,a[1]=le*p+pe*S+qe*L+Ce*J,a[2]=le*g+pe*A+qe*N+Ce*ne,a[3]=le*y+pe*M+qe*U+Ce*ve,a[4]=(le=o[4])*h+(pe=o[5])*x+(qe=o[6])*O+(Ce=o[7])*G,a[5]=le*p+pe*S+qe*L+Ce*J,a[6]=le*g+pe*A+qe*N+Ce*ne,a[7]=le*y+pe*M+qe*U+Ce*ve,a[8]=(le=o[8])*h+(pe=o[9])*x+(qe=o[10])*O+(Ce=o[11])*G,a[9]=le*p+pe*S+qe*L+Ce*J,a[10]=le*g+pe*A+qe*N+Ce*ne,a[11]=le*y+pe*M+qe*U+Ce*ve,a[12]=(le=o[12])*h+(pe=o[13])*x+(qe=o[14])*O+(Ce=o[15])*G,a[13]=le*p+pe*S+qe*L+Ce*J,a[14]=le*g+pe*A+qe*N+Ce*ne,a[15]=le*y+pe*M+qe*U+Ce*ve,a}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var Bp,rce=sR;function jy(a,i,o){var h=i[0],p=i[1],g=i[2],y=i[3];return a[0]=o[0]*h+o[4]*p+o[8]*g+o[12]*y,a[1]=o[1]*h+o[5]*p+o[9]*g+o[13]*y,a[2]=o[2]*h+o[6]*p+o[10]*g+o[14]*y,a[3]=o[3]*h+o[7]*p+o[11]*g+o[15]*y,a}Bp=new Vh(4),Vh!=Float32Array&&(Bp[0]=0,Bp[1]=0,Bp[2]=0,Bp[3]=0);class ice extends l{constructor(i){super(i,tce)}createBucket(i){return new Rw(i)}queryRadius(i){let o=i;return Np("circle-radius",this,o)+Np("circle-stroke-width",this,o)+Ny(this.paint.get("circle-translate"))}queryIntersectsFeature(i,o,h,p,g,y,x,S){let A=By(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,x),M=this.paint.get("circle-radius").evaluate(o,h)+this.paint.get("circle-stroke-width").evaluate(o,h),O=this.paint.get("circle-pitch-alignment")==="map",L=O?A:function(U,G){return U.map(J=>uR(J,G))}(A,S),N=O?M*x:M;for(let U of p)for(let G of U){let J=O?G:uR(G,S),ne=N,ve=jy([],[G.x,G.y,0,1],S);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ne*=ve[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ne*=y.cameraToCenterDistance/ve[3]),Yle(L,J,ne))return!0}return!1}}function uR(a,i){let o=jy([],[a.x,a.y,0,1],i);return new P(o[0]/o[3],o[1]/o[3])}class lR extends Rw{}let cR;Xe("HeatmapBucket",lR,{omit:["layers"]});var nce={get paint(){return cR=cR||new v({"heatmap-radius":new ht(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ht(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new et(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Lp(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new et(Se.paint_heatmap["heatmap-opacity"])})}};function Fw(a,{width:i,height:o},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*o*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${i*o*h}`)}else p=new Uint8Array(i*o*h);return a.width=i,a.height=o,a.data=p,a}function hR(a,{width:i,height:o},h){if(i===a.width&&o===a.height)return;let p=Fw({},{width:i,height:o},h);Nw(a,p,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,i),height:Math.min(a.height,o)},h),a.width=i,a.height=o,a.data=p.data}function Nw(a,i,o,h,p,g){if(p.width===0||p.height===0)return i;if(p.width>a.width||p.height>a.height||o.x>a.width-p.width||o.y>a.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||h.x>i.width-p.width||h.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let y=a.data,x=i.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let S=0;S<p.height;S++){let A=((o.y+S)*a.width+o.x)*g,M=((h.y+S)*i.width+h.x)*g;for(let O=0;O<p.width*g;O++)x[M+O]=y[A+O]}return i}class jp{constructor(i,o){Fw(this,i,1,o)}resize(i){hR(this,i,1)}clone(){return new jp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,h,p,g){Nw(i,o,h,p,g,1)}}class Qn{constructor(i,o){Fw(this,i,4,o)}resize(i){hR(this,i,4)}replace(i,o){o?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Qn({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,o,h,p,g){Nw(i,o,h,p,g,4)}}function fR(a){let i={},o=a.resolution||256,h=a.clips?a.clips.length:1,p=a.image||new Qn({width:o,height:h});if(Math.log(o)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${o}`);let g=(y,x,S)=>{i[a.evaluationKey]=S;let A=a.expression.evaluate(i);p.data[y+x+0]=Math.floor(255*A.r/A.a),p.data[y+x+1]=Math.floor(255*A.g/A.a),p.data[y+x+2]=Math.floor(255*A.b/A.a),p.data[y+x+3]=Math.floor(255*A.a)};if(a.clips)for(let y=0,x=0;y<h;++y,x+=4*o)for(let S=0,A=0;S<o;S++,A+=4){let M=S/(o-1),{start:O,end:L}=a.clips[y];g(x,A,O*(1-M)+L*M)}else for(let y=0,x=0;y<o;y++,x+=4)g(0,x,y/(o-1));return p}Xe("AlphaImage",jp),Xe("RGBAImage",Qn);let Bw="big-fb";class ace extends l{createBucket(i){return new lR(i)}constructor(i){super(i,nce),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=fR({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Bw)&&this.heatmapFbos.delete(Bw)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let dR;var oce={get paint(){return dR=dR||new v({"hillshade-illumination-direction":new et(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new et(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new et(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new et(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new et(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new et(Se.paint_hillshade["hillshade-accent-color"])})}};class sce extends l{constructor(i){super(i,oce)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let uce=b([{name:"a_pos",components:2,type:"Int16"}],4),{members:lce}=uce;function pR(a,i,o=2){let h=i&&i.length,p=h?i[0]*o:a.length,g=mR(a,0,p,o,!0),y=[];if(!g||g.next===g.prev)return y;let x,S,A;if(h&&(g=function(M,O,L,N){let U=[];for(let G=0,J=O.length;G<J;G++){let ne=mR(M,O[G]*N,G<J-1?O[G+1]*N:M.length,N,!1);ne===ne.next&&(ne.steiner=!0),U.push(gce(ne))}U.sort(pce);for(let G=0;G<U.length;G++)L=mce(U[G],L);return L}(a,i,g,o)),a.length>80*o){x=1/0,S=1/0;let M=-1/0,O=-1/0;for(let L=o;L<p;L+=o){let N=a[L],U=a[L+1];N<x&&(x=N),U<S&&(S=U),N>M&&(M=N),U>O&&(O=U)}A=Math.max(M-x,O-S),A=A!==0?32767/A:0}return Up(g,y,o,x,S,A,0),y}function mR(a,i,o,h,p){let g;if(p===function(y,x,S,A){let M=0;for(let O=x,L=S-A;O<S;O+=A)M+=(y[L]-y[O])*(y[O+1]+y[L+1]),L=O;return M}(a,i,o,h)>0)for(let y=i;y<o;y+=h)g=yR(y/h|0,a[y],a[y+1],g);else for(let y=o-h;y>=i;y-=h)g=yR(y/h|0,a[y],a[y+1],g);return g&&Uy(g,g.next)&&(Vp(g),g=g.next),g}function nc(a,i){if(!a)return a;i||(i=a);let o,h=a;do if(o=!1,h.steiner||!Uy(h,h.next)&&kr(h.prev,h,h.next)!==0)h=h.next;else{if(Vp(h),h=i=h.prev,h===h.next)break;o=!0}while(o||h!==i);return i}function Up(a,i,o,h,p,g,y){if(!a)return;!y&&g&&function(S,A,M,O){let L=S;do L.z===0&&(L.z=jw(L.x,L.y,A,M,O)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next;while(L!==S);L.prevZ.nextZ=null,L.prevZ=null,function(N){let U,G=1;do{let J,ne=N;N=null;let ve=null;for(U=0;ne;){U++;let le=ne,pe=0;for(let Ce=0;Ce<G&&(pe++,le=le.nextZ,le);Ce++);let qe=G;for(;pe>0||qe>0&&le;)pe!==0&&(qe===0||!le||ne.z<=le.z)?(J=ne,ne=ne.nextZ,pe--):(J=le,le=le.nextZ,qe--),ve?ve.nextZ=J:N=J,J.prevZ=ve,ve=J;ne=le}ve.nextZ=null,G*=2}while(U>1)}(L)}(a,h,p,g);let x=a;for(;a.prev!==a.next;){let S=a.prev,A=a.next;if(g?hce(a,h,p,g):cce(a))i.push(S.i,a.i,A.i),Vp(a),a=A.next,x=A.next;else if((a=A)===x){y?y===1?Up(a=fce(nc(a),i),i,o,h,p,g,2):y===2&&dce(a,i,o,h,p,g):Up(nc(a),i,o,h,p,g,1);break}}}function cce(a){let i=a.prev,o=a,h=a.next;if(kr(i,o,h)>=0)return!1;let p=i.x,g=o.x,y=h.x,x=i.y,S=o.y,A=h.y,M=p<g?p<y?p:y:g<y?g:y,O=x<S?x<A?x:A:S<A?S:A,L=p>g?p>y?p:y:g>y?g:y,N=x>S?x>A?x:A:S>A?S:A,U=h.next;for(;U!==i;){if(U.x>=M&&U.x<=L&&U.y>=O&&U.y<=N&&Gh(p,x,g,S,y,A,U.x,U.y)&&kr(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function hce(a,i,o,h){let p=a.prev,g=a,y=a.next;if(kr(p,g,y)>=0)return!1;let x=p.x,S=g.x,A=y.x,M=p.y,O=g.y,L=y.y,N=x<S?x<A?x:A:S<A?S:A,U=M<O?M<L?M:L:O<L?O:L,G=x>S?x>A?x:A:S>A?S:A,J=M>O?M>L?M:L:O>L?O:L,ne=jw(N,U,i,o,h),ve=jw(G,J,i,o,h),le=a.prevZ,pe=a.nextZ;for(;le&&le.z>=ne&&pe&&pe.z<=ve;){if(le.x>=N&&le.x<=G&&le.y>=U&&le.y<=J&&le!==p&&le!==y&&Gh(x,M,S,O,A,L,le.x,le.y)&&kr(le.prev,le,le.next)>=0||(le=le.prevZ,pe.x>=N&&pe.x<=G&&pe.y>=U&&pe.y<=J&&pe!==p&&pe!==y&&Gh(x,M,S,O,A,L,pe.x,pe.y)&&kr(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;le&&le.z>=ne;){if(le.x>=N&&le.x<=G&&le.y>=U&&le.y<=J&&le!==p&&le!==y&&Gh(x,M,S,O,A,L,le.x,le.y)&&kr(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;pe&&pe.z<=ve;){if(pe.x>=N&&pe.x<=G&&pe.y>=U&&pe.y<=J&&pe!==p&&pe!==y&&Gh(x,M,S,O,A,L,pe.x,pe.y)&&kr(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function fce(a,i){let o=a;do{let h=o.prev,p=o.next.next;!Uy(h,p)&&vR(h,o,o.next,p)&&$p(h,p)&&$p(p,h)&&(i.push(h.i,o.i,p.i),Vp(o),Vp(o.next),o=a=p),o=o.next}while(o!==a);return nc(o)}function dce(a,i,o,h,p,g){let y=a;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&yce(y,x)){let S=gR(y,x);return y=nc(y,y.next),S=nc(S,S.next),Up(y,i,o,h,p,g,0),void Up(S,i,o,h,p,g,0)}x=x.next}y=y.next}while(y!==a)}function pce(a,i){return a.x-i.x}function mce(a,i){let o=function(p,g){let y=g,x=p.x,S=p.y,A,M=-1/0;do{if(S<=y.y&&S>=y.next.y&&y.next.y!==y.y){let G=y.x+(S-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(G<=x&&G>M&&(M=G,A=y.x<y.next.x?y:y.next,G===x))return A}y=y.next}while(y!==g);if(!A)return null;let O=A,L=A.x,N=A.y,U=1/0;y=A;do{if(x>=y.x&&y.x>=L&&x!==y.x&&Gh(S<N?x:M,S,L,N,S<N?M:x,S,y.x,y.y)){let G=Math.abs(S-y.y)/(x-y.x);$p(y,p)&&(G<U||G===U&&(y.x>A.x||y.x===A.x&&vce(A,y)))&&(A=y,U=G)}y=y.next}while(y!==O);return A}(a,i);if(!o)return i;let h=gR(o,a);return nc(h,h.next),nc(o,o.next)}function vce(a,i){return kr(a.prev,a,i.prev)<0&&kr(i.next,a,a.next)<0}function jw(a,i,o,h,p){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-o)*p|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function gce(a){let i=a,o=a;do(i.x<o.x||i.x===o.x&&i.y<o.y)&&(o=i),i=i.next;while(i!==a);return o}function Gh(a,i,o,h,p,g,y,x){return(p-y)*(i-x)>=(a-y)*(g-x)&&(a-y)*(h-x)>=(o-y)*(i-x)&&(o-y)*(g-x)>=(p-y)*(h-x)}function yce(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!function(o,h){let p=o;do{if(p.i!==o.i&&p.next.i!==o.i&&p.i!==h.i&&p.next.i!==h.i&&vR(p,p.next,o,h))return!0;p=p.next}while(p!==o);return!1}(a,i)&&($p(a,i)&&$p(i,a)&&function(o,h){let p=o,g=!1,y=(o.x+h.x)/2,x=(o.y+h.y)/2;do p.y>x!=p.next.y>x&&p.next.y!==p.y&&y<(p.next.x-p.x)*(x-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==o);return g}(a,i)&&(kr(a.prev,a,i.prev)||kr(a,i.prev,i))||Uy(a,i)&&kr(a.prev,a,a.next)>0&&kr(i.prev,i,i.next)>0)}function kr(a,i,o){return(i.y-a.y)*(o.x-i.x)-(i.x-a.x)*(o.y-i.y)}function Uy(a,i){return a.x===i.x&&a.y===i.y}function vR(a,i,o,h){let p=Vy(kr(a,i,o)),g=Vy(kr(a,i,h)),y=Vy(kr(o,h,a)),x=Vy(kr(o,h,i));return p!==g&&y!==x||!(p!==0||!$y(a,o,i))||!(g!==0||!$y(a,h,i))||!(y!==0||!$y(o,a,h))||!(x!==0||!$y(o,i,h))}function $y(a,i,o){return i.x<=Math.max(a.x,o.x)&&i.x>=Math.min(a.x,o.x)&&i.y<=Math.max(a.y,o.y)&&i.y>=Math.min(a.y,o.y)}function Vy(a){return a>0?1:a<0?-1:0}function $p(a,i){return kr(a.prev,a,a.next)<0?kr(a,i,a.next)>=0&&kr(a,a.prev,i)>=0:kr(a,i,a.prev)<0||kr(a,a.next,i)<0}function gR(a,i){let o=Uw(a.i,a.x,a.y),h=Uw(i.i,i.x,i.y),p=a.next,g=i.prev;return a.next=i,i.prev=a,o.next=p,p.prev=o,h.next=o,o.prev=h,g.next=h,h.prev=g,h}function yR(a,i,o,h){let p=Uw(a,i,o);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function Vp(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Uw(a,i,o){return{i:a,x:i,y:o,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function $w(a,i,o){let h=o.patternDependencies,p=!1;for(let g of i){let y=g.paint.get(`${a}-pattern`);y.isConstant()||(p=!0);let x=y.constantOr(null);x&&(p=!0,h[x.to]=!0,h[x.from]=!0)}return p}function Vw(a,i,o,h,p){let g=p.patternDependencies;for(let y of i){let x=y.paint.get(`${a}-pattern`).value;if(x.kind!=="constant"){let S=x.evaluate({zoom:h-1},o,{},p.availableImages),A=x.evaluate({zoom:h},o,{},p.availableImages),M=x.evaluate({zoom:h+1},o,{},p.availableImages);S=S&&S.name?S.name:S,A=A&&A.name?A.name:A,M=M&&M.name?M.name:M,g[S]=!0,g[A]=!0,g[M]=!0,o.patterns[y.id]={min:S,mid:A,max:M}}}return o}class Gw{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new xa,this.indexArray=new Jn,this.indexArray2=new ni,this.programConfigurations=new tc(i.layers,i.zoom),this.segments=new Ft,this.segments2=new Ft,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){this.hasPattern=$w("fill",this.layers,o);let p=this.layers[0].layout.get("fill-sort-key"),g=!p.isConstant(),y=[];for(let{feature:x,id:S,index:A,sourceLayerIndex:M}of i){let O=this.layers[0]._featureFilter.needGeometry,L=ic(x,O);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),L,h))continue;let N=g?p.evaluate(L,{},h,o.availableImages):void 0,U={id:S,properties:x.properties,type:x.type,sourceLayerIndex:M,index:A,geometry:O?L.geometry:rc(x),patterns:{},sortKey:N};y.push(U)}g&&y.sort((x,S)=>x.sortKey-S.sortKey);for(let x of y){let{geometry:S,index:A,sourceLayerIndex:M}=x;if(this.hasPattern){let O=Vw("fill",this.layers,x,this.zoom,o);this.patternFeatures.push(O)}else this.addFeature(x,S,A,h,{});o.featureIndex.insert(i[A].feature,S,A,M,this.index)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h)}addFeatures(i,o,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,lce),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,o,h,p,g){for(let y of mh(o,500)){let x=0;for(let N of y)x+=N.length;let S=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),A=S.vertexLength,M=[],O=[];for(let N of y){if(N.length===0)continue;N!==y[0]&&O.push(M.length/2);let U=this.segments2.prepareSegment(N.length,this.layoutVertexArray,this.indexArray2),G=U.vertexLength;this.layoutVertexArray.emplaceBack(N[0].x,N[0].y),this.indexArray2.emplaceBack(G+N.length-1,G),M.push(N[0].x),M.push(N[0].y);for(let J=1;J<N.length;J++)this.layoutVertexArray.emplaceBack(N[J].x,N[J].y),this.indexArray2.emplaceBack(G+J-1,G+J),M.push(N[J].x),M.push(N[J].y);U.vertexLength+=N.length,U.primitiveLength+=N.length}let L=pR(M,O);for(let N=0;N<L.length;N+=3)this.indexArray.emplaceBack(A+L[N],A+L[N+1],A+L[N+2]);S.vertexLength+=x,S.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}}let _R,xR;Xe("FillBucket",Gw,{omit:["layers","patternFeatures"]});var _ce={get paint(){return xR=xR||new v({"fill-antialias":new et(Se.paint_fill["fill-antialias"]),"fill-opacity":new ht(Se.paint_fill["fill-opacity"]),"fill-color":new ht(Se.paint_fill["fill-color"]),"fill-outline-color":new ht(Se.paint_fill["fill-outline-color"]),"fill-translate":new et(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new et(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Dh(Se.paint_fill["fill-pattern"])})},get layout(){return _R=_R||new v({"fill-sort-key":new ht(Se.layout_fill["fill-sort-key"])})}};class xce extends l{constructor(i){super(i,_ce)}recalculate(i,o){super.recalculate(i,o);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new Gw(i)}queryRadius(){return Ny(this.paint.get("fill-translate"))}queryIntersectsFeature(i,o,h,p,g,y,x){return rR(By(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,x),p)}isTileClipped(){return!0}}let bce=b([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),wce=b([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Sce}=bce;var Au={},qce=w,bR=Hh;function Hh(a,i,o,h,p){this.properties={},this.extent=o,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=p,a.readFields(Ice,this,i)}function Ice(a,i,o){a==1?i.id=o.readVarint():a==2?function(h,p){for(var g=h.readVarint()+h.pos;h.pos<g;){var y=p._keys[h.readVarint()],x=p._values[h.readVarint()];p.properties[y]=x}}(o,i):a==3?i.type=o.readVarint():a==4&&(i._geometry=o.pos)}function Ece(a){for(var i,o,h=0,p=0,g=a.length,y=g-1;p<g;y=p++)h+=((o=a[y]).x-(i=a[p]).x)*(i.y+o.y);return h}Hh.types=["Unknown","Point","LineString","Polygon"],Hh.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,o=a.readVarint()+a.pos,h=1,p=0,g=0,y=0,x=[];a.pos<o;){if(p<=0){var S=a.readVarint();h=7&S,p=S>>3}if(p--,h===1||h===2)g+=a.readSVarint(),y+=a.readSVarint(),h===1&&(i&&x.push(i),i=[]),i.push(new qce(g,y));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&x.push(i),x},Hh.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,o=1,h=0,p=0,g=0,y=1/0,x=-1/0,S=1/0,A=-1/0;a.pos<i;){if(h<=0){var M=a.readVarint();o=7&M,h=M>>3}if(h--,o===1||o===2)(p+=a.readSVarint())<y&&(y=p),p>x&&(x=p),(g+=a.readSVarint())<S&&(S=g),g>A&&(A=g);else if(o!==7)throw new Error("unknown command "+o)}return[y,S,x,A]},Hh.prototype.toGeoJSON=function(a,i,o){var h,p,g=this.extent*Math.pow(2,o),y=this.extent*a,x=this.extent*i,S=this.loadGeometry(),A=Hh.types[this.type];function M(N){for(var U=0;U<N.length;U++){var G=N[U];N[U]=[360*(G.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(G.y+x)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var O=[];for(h=0;h<S.length;h++)O[h]=S[h][0];M(S=O);break;case 2:for(h=0;h<S.length;h++)M(S[h]);break;case 3:for(S=function(N){var U=N.length;if(U<=1)return[N];for(var G,J,ne=[],ve=0;ve<U;ve++){var le=Ece(N[ve]);le!==0&&(J===void 0&&(J=le<0),J===le<0?(G&&ne.push(G),G=[N[ve]]):G.push(N[ve]))}return G&&ne.push(G),ne}(S),h=0;h<S.length;h++)for(p=0;p<S[h].length;p++)M(S[h][p]);}S.length===1?S=S[0]:A="Multi"+A;var L={type:"Feature",geometry:{type:A,coordinates:S},properties:this.properties};return"id"in this&&(L.id=this.id),L};var Tce=bR,wR=SR;function SR(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(Ace,this,i),this.length=this._features.length}function Ace(a,i,o){a===15?i.version=o.readVarint():a===1?i.name=o.readString():a===5?i.extent=o.readVarint():a===2?i._features.push(o.pos):a===3?i._keys.push(o.readString()):a===4&&i._values.push(function(h){for(var p=null,g=h.readVarint()+h.pos;h.pos<g;){var y=h.readVarint()>>3;p=y===1?h.readString():y===2?h.readFloat():y===3?h.readDouble():y===4?h.readVarint64():y===5?h.readVarint():y===6?h.readSVarint():y===7?h.readBoolean():null}return p}(o))}SR.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new Tce(this._pbf,i,this.extent,this._keys,this._values)};var Pce=wR;function Cce(a,i,o){if(a===3){var h=new Pce(o,o.readVarint()+o.pos);h.length&&(i[h.name]=h)}}Au.VectorTile=function(a,i){this.layers=a.readFields(Cce,{},i)},Au.VectorTileFeature=bR,Au.VectorTileLayer=wR;let Mce=Au.VectorTileFeature.types,Hw=Math.pow(2,13);function Gp(a,i,o,h,p,g,y,x){a.emplaceBack(i,o,2*Math.floor(h*Hw)+y,p*Hw*2,g*Hw*2,Math.round(x))}class Ww{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new wu,this.centroidVertexArray=new fi,this.indexArray=new Jn,this.programConfigurations=new tc(i.layers,i.zoom),this.segments=new Ft,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){this.features=[],this.hasPattern=$w("fill-extrusion",this.layers,o);for(let{feature:p,id:g,index:y,sourceLayerIndex:x}of i){let S=this.layers[0]._featureFilter.needGeometry,A=ic(p,S);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),A,h))continue;let M={id:g,sourceLayerIndex:x,index:y,geometry:S?A.geometry:rc(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(Vw("fill-extrusion",this.layers,M,this.zoom,o)):this.addFeature(M,M.geometry,y,h,{}),o.featureIndex.insert(p,M.geometry,y,x,this.index,!0)}}addFeatures(i,o,h){for(let p of this.features){let{geometry:g}=p;this.addFeature(p,g,p.index,o,h)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Sce),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,wce.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,o,h,p,g){for(let y of mh(o,500)){let x={x:0,y:0,vertexCount:0},S=0;for(let U of y)S+=U.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let U of y){if(U.length===0||Oce(U))continue;let G=0;for(let J=0;J<U.length;J++){let ne=U[J];if(J>=1){let ve=U[J-1];if(!kce(ne,ve)){A.vertexLength+4>Ft.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let le=ne.sub(ve)._perp()._unit(),pe=ve.dist(ne);G+pe>32768&&(G=0),Gp(this.layoutVertexArray,ne.x,ne.y,le.x,le.y,0,0,G),Gp(this.layoutVertexArray,ne.x,ne.y,le.x,le.y,0,1,G),x.x+=2*ne.x,x.y+=2*ne.y,x.vertexCount+=2,G+=pe,Gp(this.layoutVertexArray,ve.x,ve.y,le.x,le.y,0,0,G),Gp(this.layoutVertexArray,ve.x,ve.y,le.x,le.y,0,1,G),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2;let qe=A.vertexLength;this.indexArray.emplaceBack(qe,qe+2,qe+1),this.indexArray.emplaceBack(qe+1,qe+2,qe+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+S>Ft.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray)),Mce[i.type]!=="Polygon")continue;let M=[],O=[],L=A.vertexLength;for(let U of y)if(U.length!==0){U!==y[0]&&O.push(M.length/2);for(let G=0;G<U.length;G++){let J=U[G];Gp(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),x.x+=J.x,x.y+=J.y,x.vertexCount+=1,M.push(J.x),M.push(J.y)}}let N=pR(M,O);for(let U=0;U<N.length;U+=3)this.indexArray.emplaceBack(L+N[U],L+N[U+2],L+N[U+1]);A.primitiveLength+=N.length/3,A.vertexLength+=S;for(let U=0;U<x.vertexCount;U++){let G=Math.floor(x.x/x.vertexCount),J=Math.floor(x.y/x.vertexCount);this.centroidVertexArray.emplaceBack(G,J)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}}function kce(a,i){return a.x===i.x&&(a.x<0||a.x>Fr)||a.y===i.y&&(a.y<0||a.y>Fr)}function Oce(a){return a.every(i=>i.x<0)||a.every(i=>i.x>Fr)||a.every(i=>i.y<0)||a.every(i=>i.y>Fr)}let qR;Xe("FillExtrusionBucket",Ww,{omit:["layers","features"]});var Rce={get paint(){return qR=qR||new v({"fill-extrusion-opacity":new et(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ht(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new et(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new et(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Dh(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ht(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ht(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new et(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Dce extends l{constructor(i){super(i,Rce)}createBucket(i){return new Ww(i)}queryRadius(){return Ny(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,o,h,p,g,y,x,S){let A=By(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,x),M=this.paint.get("fill-extrusion-height").evaluate(o,h),O=this.paint.get("fill-extrusion-base").evaluate(o,h),L=function(U,G,J,ne){let ve=[];for(let le of U){let pe=[le.x,le.y,0,1];jy(pe,pe,G),ve.push(new P(pe[0]/pe[3],pe[1]/pe[3]))}return ve}(A,S),N=function(U,G,J,ne){let ve=[],le=[],pe=ne[8]*G,qe=ne[9]*G,Ce=ne[10]*G,Ge=ne[11]*G,ct=ne[8]*J,$e=ne[9]*J,Be=ne[10]*J,at=ne[11]*J;for(let Ye of U){let Ke=[],Ee=[];for(let ot of Ye){let rt=ot.x,vt=ot.y,rr=ne[0]*rt+ne[4]*vt+ne[12],er=ne[1]*rt+ne[5]*vt+ne[13],Qr=ne[2]*rt+ne[6]*vt+ne[14],ba=ne[3]*rt+ne[7]*vt+ne[15],mi=Qr+Ce,ei=ba+Ge,ji=rr+ct,Ui=er+$e,$i=Qr+Be,Ar=ba+at,ti=new P((rr+pe)/ei,(er+qe)/ei);ti.z=mi/ei,Ke.push(ti);let Ii=new P(ji/Ar,Ui/Ar);Ii.z=$i/Ar,Ee.push(Ii)}ve.push(Ke),le.push(Ee)}return[ve,le]}(p,O,M,S);return function(U,G,J){let ne=1/0;rR(J,G)&&(ne=IR(J,G[0]));for(let ve=0;ve<G.length;ve++){let le=G[ve],pe=U[ve];for(let qe=0;qe<le.length-1;qe++){let Ce=le[qe],Ge=[Ce,le[qe+1],pe[qe+1],pe[qe],Ce];tR(J,Ge)&&(ne=Math.min(ne,IR(J,Ge)))}}return ne!==1/0&&ne}(N[0],N[1],L)}}function Hp(a,i){return a.x*i.x+a.y*i.y}function IR(a,i){if(a.length===1){let o=0,h=i[o++],p;for(;!p||h.equals(p);)if(p=i[o++],!p)return 1/0;for(;o<i.length;o++){let g=i[o],y=a[0],x=p.sub(h),S=g.sub(h),A=y.sub(h),M=Hp(x,x),O=Hp(x,S),L=Hp(S,S),N=Hp(A,x),U=Hp(A,S),G=M*L-O*O,J=(L*N-O*U)/G,ne=(M*U-O*N)/G,ve=h.z*(1-J-ne)+p.z*J+g.z*ne;if(isFinite(ve))return ve}return 1/0}{let o=1/0;for(let h of i)o=Math.min(o,h.z);return o}}let Lce=b([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:zce}=Lce,Fce=b([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Nce}=Fce,Bce=Au.VectorTileFeature.types,jce=Math.cos(Math.PI/180*37.5),ER=Math.pow(2,14)/.5;class Zw{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(o=>o.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(o=>{this.gradients[o.id]={}}),this.layoutVertexArray=new zh,this.layoutVertexArray2=new Su,this.indexArray=new Jn,this.programConfigurations=new tc(i.layers,i.zoom),this.segments=new Ft,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(o=>o.isStateDependent()).map(o=>o.id)}populate(i,o,h){this.hasPattern=$w("line",this.layers,o);let p=this.layers[0].layout.get("line-sort-key"),g=!p.isConstant(),y=[];for(let{feature:x,id:S,index:A,sourceLayerIndex:M}of i){let O=this.layers[0]._featureFilter.needGeometry,L=ic(x,O);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),L,h))continue;let N=g?p.evaluate(L,{},h):void 0,U={id:S,properties:x.properties,type:x.type,sourceLayerIndex:M,index:A,geometry:O?L.geometry:rc(x),patterns:{},sortKey:N};y.push(U)}g&&y.sort((x,S)=>x.sortKey-S.sortKey);for(let x of y){let{geometry:S,index:A,sourceLayerIndex:M}=x;if(this.hasPattern){let O=Vw("line",this.layers,x,this.zoom,o);this.patternFeatures.push(O)}else this.addFeature(x,S,A,h,{});o.featureIndex.insert(i[A].feature,S,A,M,this.index)}}update(i,o,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,o,this.stateDependentLayers,h)}addFeatures(i,o,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,o,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,Nce)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,zce),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,o,h,p,g){let y=this.layers[0].layout,x=y.get("line-join").evaluate(i,{}),S=y.get("line-cap"),A=y.get("line-miter-limit"),M=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(let O of o)this.addLine(O,i,x,S,A,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}addLine(i,o,h,p,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ne=0;ne<i.length-1;ne++)this.totalDistance+=i[ne].dist(i[ne+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let x=Bce[o.type]==="Polygon",S=i.length;for(;S>=2&&i[S-1].equals(i[S-2]);)S--;let A=0;for(;A<S-1&&i[A].equals(i[A+1]);)A++;if(S<(x?3:2))return;h==="bevel"&&(g=1.05);let M=this.overscaling<=16?15*Fr/(512*this.overscaling):0,O=this.segments.prepareSegment(10*S,this.layoutVertexArray,this.indexArray),L,N,U,G,J;this.e1=this.e2=-1,x&&(L=i[S-2],J=i[A].sub(L)._unit()._perp());for(let ne=A;ne<S;ne++){if(U=ne===S-1?x?i[A+1]:void 0:i[ne+1],U&&i[ne].equals(U))continue;J&&(G=J),L&&(N=L),L=i[ne],J=U?U.sub(L)._unit()._perp():G,G=G||J;let ve=G.add(J);ve.x===0&&ve.y===0||ve._unit();let le=G.x*J.x+G.y*J.y,pe=ve.x*J.x+ve.y*J.y,qe=pe!==0?1/pe:1/0,Ce=2*Math.sqrt(2-2*pe),Ge=pe<jce&&N&&U,ct=G.x*J.y-G.y*J.x>0;if(Ge&&ne>A){let at=L.dist(N);if(at>2*M){let Ye=L.sub(L.sub(N)._mult(M/at)._round());this.updateDistance(N,Ye),this.addCurrentVertex(Ye,G,0,0,O),N=Ye}}let $e=N&&U,Be=$e?h:x?"butt":p;if($e&&Be==="round"&&(qe<y?Be="miter":qe<=2&&(Be="fakeround")),Be==="miter"&&qe>g&&(Be="bevel"),Be==="bevel"&&(qe>2&&(Be="flipbevel"),qe<g&&(Be="miter")),N&&this.updateDistance(N,L),Be==="miter")ve._mult(qe),this.addCurrentVertex(L,ve,0,0,O);else if(Be==="flipbevel"){if(qe>100)ve=J.mult(-1);else{let at=qe*G.add(J).mag()/G.sub(J).mag();ve._perp()._mult(at*(ct?-1:1))}this.addCurrentVertex(L,ve,0,0,O),this.addCurrentVertex(L,ve.mult(-1),0,0,O)}else if(Be==="bevel"||Be==="fakeround"){let at=-Math.sqrt(qe*qe-1),Ye=ct?at:0,Ke=ct?0:at;if(N&&this.addCurrentVertex(L,G,Ye,Ke,O),Be==="fakeround"){let Ee=Math.round(180*Ce/Math.PI/20);for(let ot=1;ot<Ee;ot++){let rt=ot/Ee;if(rt!==.5){let rr=rt-.5;rt+=rt*rr*(rt-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*rr*rr+(.848013+le*(.215638*le-1.06021)))}let vt=J.sub(G)._mult(rt)._add(G)._unit()._mult(ct?-1:1);this.addHalfVertex(L,vt.x,vt.y,!1,ct,0,O)}}U&&this.addCurrentVertex(L,J,-Ye,-Ke,O)}else if(Be==="butt")this.addCurrentVertex(L,ve,0,0,O);else if(Be==="square"){let at=N?1:-1;this.addCurrentVertex(L,ve,at,at,O)}else Be==="round"&&(N&&(this.addCurrentVertex(L,G,0,0,O),this.addCurrentVertex(L,G,1,1,O,!0)),U&&(this.addCurrentVertex(L,J,-1,-1,O,!0),this.addCurrentVertex(L,J,0,0,O)));if(Ge&&ne<S-1){let at=L.dist(U);if(at>2*M){let Ye=L.add(U.sub(L)._mult(M/at)._round());this.updateDistance(L,Ye),this.addCurrentVertex(Ye,J,0,0,O),L=Ye}}}}addCurrentVertex(i,o,h,p,g,y=!1){let x=o.y*p-o.x,S=-o.y-o.x*p;this.addHalfVertex(i,o.x+o.y*h,o.y-o.x*h,y,!1,h,g),this.addHalfVertex(i,x,S,y,!0,-p,g),this.distance>ER/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,o,h,p,g,y))}addHalfVertex({x:i,y:o},h,p,g,y,x,S){let A=.5*(this.lineClips?this.scaledDistance*(ER-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(g?1:0),(o<<1)+(y?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(x===0?0:x<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let M=S.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),S.primitiveLength++),y?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,o){this.distance+=i.dist(o),this.updateScaledDistance()}}let TR,AR;Xe("LineBucket",Zw,{omit:["layers","patternFeatures"]});var PR={get paint(){return AR=AR||new v({"line-opacity":new ht(Se.paint_line["line-opacity"]),"line-color":new ht(Se.paint_line["line-color"]),"line-translate":new et(Se.paint_line["line-translate"]),"line-translate-anchor":new et(Se.paint_line["line-translate-anchor"]),"line-width":new ht(Se.paint_line["line-width"]),"line-gap-width":new ht(Se.paint_line["line-gap-width"]),"line-offset":new ht(Se.paint_line["line-offset"]),"line-blur":new ht(Se.paint_line["line-blur"]),"line-dasharray":new Lh(Se.paint_line["line-dasharray"]),"line-pattern":new Dh(Se.paint_line["line-pattern"]),"line-gradient":new Lp(Se.paint_line["line-gradient"])})},get layout(){return TR=TR||new v({"line-cap":new et(Se.layout_line["line-cap"]),"line-join":new ht(Se.layout_line["line-join"]),"line-miter-limit":new et(Se.layout_line["line-miter-limit"]),"line-round-limit":new et(Se.layout_line["line-round-limit"]),"line-sort-key":new ht(Se.layout_line["line-sort-key"])})}};class Uce extends ht{possiblyEvaluate(i,o){return o=new ur(Math.floor(o.zoom),{now:o.now,fadeDuration:o.fadeDuration,zoomHistory:o.zoomHistory,transition:o.transition}),super.possiblyEvaluate(i,o)}evaluate(i,o,h,p){return o=Qe({},o,{zoom:Math.floor(o.zoom)}),super.evaluate(i,o,h,p)}}let Gy;class $ce extends l{constructor(i){super(i,PR),this.gradientVersion=0,Gy||(Gy=new Uce(PR.paint.properties["line-width"].specification),Gy.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){let o=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(o)&&o._styleExpression.expression instanceof iu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,o){super.recalculate(i,o),this.paint._values["line-floorwidth"]=Gy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new Zw(i)}queryRadius(i){let o=i,h=CR(Np("line-width",this,o),Np("line-gap-width",this,o)),p=Np("line-offset",this,o);return h/2+Math.abs(p)+Ny(this.paint.get("line-translate"))}queryIntersectsFeature(i,o,h,p,g,y,x){let S=By(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,x),A=x/2*CR(this.paint.get("line-width").evaluate(o,h),this.paint.get("line-gap-width").evaluate(o,h)),M=this.paint.get("line-offset").evaluate(o,h);return M&&(p=function(O,L){let N=[];for(let U=0;U<O.length;U++){let G=O[U],J=[];for(let ne=0;ne<G.length;ne++){let ve=G[ne-1],le=G[ne],pe=G[ne+1],qe=ne===0?new P(0,0):le.sub(ve)._unit()._perp(),Ce=ne===G.length-1?new P(0,0):pe.sub(le)._unit()._perp(),Ge=qe._add(Ce)._unit(),ct=Ge.x*Ce.x+Ge.y*Ce.y;ct!==0&&Ge._mult(1/ct),J.push(Ge._mult(L)._add(le))}N.push(J)}return N}(p,M*x)),function(O,L,N){for(let U=0;U<L.length;U++){let G=L[U];if(O.length>=3){for(let J=0;J<G.length;J++)if($h(O,G[J]))return!0}if(Jle(O,G,N))return!0}return!1}(S,p,A)}isTileClipped(){return!0}}function CR(a,i){return i>0?i+2*a:a}let Vce=b([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Gce=b([{name:"a_projected_pos",components:3,type:"Float32"}],4);b([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Hce=b([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);b([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let MR=b([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Wce=b([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Zce(a,i,o){return a.sections.forEach(h=>{h.text=function(p,g,y){let x=g.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?p=p.toLocaleUpperCase():x==="lowercase"&&(p=p.toLocaleLowerCase()),sn.applyArabicShaping&&(p=sn.applyArabicShaping(p)),p}(h.text,i,o)}),a}b([{name:"triangle",components:3,type:"Uint16"}]),b([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),b([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),b([{type:"Float32",name:"offsetX"}]),b([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),b([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Wp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Hr=24,kR=Qt,OR=function(a,i,o,h,p){var g,y,x=8*p-h-1,S=(1<<x)-1,A=S>>1,M=-7,O=o?p-1:0,L=o?-1:1,N=a[i+O];for(O+=L,g=N&(1<<-M)-1,N>>=-M,M+=x;M>0;g=256*g+a[i+O],O+=L,M-=8);for(y=g&(1<<-M)-1,g>>=-M,M+=h;M>0;y=256*y+a[i+O],O+=L,M-=8);if(g===0)g=1-A;else{if(g===S)return y?NaN:1/0*(N?-1:1);y+=Math.pow(2,h),g-=A}return(N?-1:1)*y*Math.pow(2,g-h)},RR=function(a,i,o,h,p,g){var y,x,S,A=8*g-p-1,M=(1<<A)-1,O=M>>1,L=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=h?0:g-1,U=h?1:-1,G=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(x=isNaN(i)?1:0,y=M):(y=Math.floor(Math.log(i)/Math.LN2),i*(S=Math.pow(2,-y))<1&&(y--,S*=2),(i+=y+O>=1?L/S:L*Math.pow(2,1-O))*S>=2&&(y++,S/=2),y+O>=M?(x=0,y=M):y+O>=1?(x=(i*S-1)*Math.pow(2,p),y+=O):(x=i*Math.pow(2,O-1)*Math.pow(2,p),y=0));p>=8;a[o+N]=255&x,N+=U,x/=256,p-=8);for(y=y<<p|x,A+=p;A>0;a[o+N]=255&y,N+=U,y/=256,A-=8);a[o+N-U]|=128*G};function Qt(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Qt.Varint=0,Qt.Fixed64=1,Qt.Bytes=2,Qt.Fixed32=5;var Kw=4294967296,DR=1/Kw,LR=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function vs(a){return a.type===Qt.Bytes?a.readVarint()+a.pos:a.pos+1}function Wh(a,i,o){return o?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function zR(a,i,o){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));o.realloc(h);for(var p=o.pos-1;p>=a;p--)o.buf[p+h]=o.buf[p]}function Kce(a,i){for(var o=0;o<a.length;o++)i.writeVarint(a[o])}function Xce(a,i){for(var o=0;o<a.length;o++)i.writeSVarint(a[o])}function Yce(a,i){for(var o=0;o<a.length;o++)i.writeFloat(a[o])}function Jce(a,i){for(var o=0;o<a.length;o++)i.writeDouble(a[o])}function Qce(a,i){for(var o=0;o<a.length;o++)i.writeBoolean(a[o])}function ehe(a,i){for(var o=0;o<a.length;o++)i.writeFixed32(a[o])}function the(a,i){for(var o=0;o<a.length;o++)i.writeSFixed32(a[o])}function rhe(a,i){for(var o=0;o<a.length;o++)i.writeFixed64(a[o])}function ihe(a,i){for(var o=0;o<a.length;o++)i.writeSFixed64(a[o])}function Hy(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function Zh(a,i,o){a[o]=i,a[o+1]=i>>>8,a[o+2]=i>>>16,a[o+3]=i>>>24}function FR(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}Qt.prototype={destroy:function(){this.buf=null},readFields:function(a,i,o){for(o=o||this.length;this.pos<o;){var h=this.readVarint(),p=h>>3,g=this.pos;this.type=7&h,a(p,i,this),this.pos===g&&this.skip(h)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=Hy(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=FR(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=Hy(this.buf,this.pos)+Hy(this.buf,this.pos+4)*Kw;return this.pos+=8,a},readSFixed64:function(){var a=Hy(this.buf,this.pos)+FR(this.buf,this.pos+4)*Kw;return this.pos+=8,a},readFloat:function(){var a=OR(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=OR(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,o,h=this.buf;return i=127&(o=h[this.pos++]),o<128?i:(i|=(127&(o=h[this.pos++]))<<7,o<128?i:(i|=(127&(o=h[this.pos++]))<<14,o<128?i:(i|=(127&(o=h[this.pos++]))<<21,o<128?i:function(p,g,y){var x,S,A=y.buf;if(x=(112&(S=A[y.pos++]))>>4,S<128||(x|=(127&(S=A[y.pos++]))<<3,S<128)||(x|=(127&(S=A[y.pos++]))<<10,S<128)||(x|=(127&(S=A[y.pos++]))<<17,S<128)||(x|=(127&(S=A[y.pos++]))<<24,S<128)||(x|=(1&(S=A[y.pos++]))<<31,S<128))return Wh(p,x,g);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(o=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&LR?function(o,h,p){return LR.decode(o.subarray(h,p))}(this.buf,i,a):function(o,h,p){for(var g="",y=h;y<p;){var x,S,A,M=o[y],O=null,L=M>239?4:M>223?3:M>191?2:1;if(y+L>p)break;L===1?M<128&&(O=M):L===2?(192&(x=o[y+1]))==128&&(O=(31&M)<<6|63&x)<=127&&(O=null):L===3?(S=o[y+2],(192&(x=o[y+1]))==128&&(192&S)==128&&((O=(15&M)<<12|(63&x)<<6|63&S)<=2047||O>=55296&&O<=57343)&&(O=null)):L===4&&(S=o[y+2],A=o[y+3],(192&(x=o[y+1]))==128&&(192&S)==128&&(192&A)==128&&((O=(15&M)<<18|(63&x)<<12|(63&S)<<6|63&A)<=65535||O>=1114112)&&(O=null)),O===null?(O=65533,L=1):O>65535&&(O-=65536,g+=String.fromCharCode(O>>>10&1023|55296),O=56320|1023&O),g+=String.fromCharCode(O),y+=L}return g}(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==Qt.Bytes)return a.push(this.readVarint(i));var o=vs(this);for(a=a||[];this.pos<o;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==Qt.Bytes)return a.push(this.readSVarint());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Qt.Bytes)return a.push(this.readBoolean());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Qt.Bytes)return a.push(this.readFloat());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Qt.Bytes)return a.push(this.readDouble());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Qt.Bytes)return a.push(this.readFixed32());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Qt.Bytes)return a.push(this.readSFixed32());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Qt.Bytes)return a.push(this.readFixed64());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Qt.Bytes)return a.push(this.readSFixed64());var i=vs(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===Qt.Varint)for(;this.buf[this.pos++]>127;);else if(i===Qt.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Qt.Fixed32)this.pos+=4;else{if(i!==Qt.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var o=new Uint8Array(i);o.set(this.buf),this.buf=o,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Zh(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Zh(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Zh(this.buf,-1&a,this.pos),Zh(this.buf,Math.floor(a*DR),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Zh(this.buf,-1&a,this.pos),Zh(this.buf,Math.floor(a*DR),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(i,o){var h,p;if(i>=0?(h=i%4294967296|0,p=i/4294967296|0):(p=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,p=p+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");o.realloc(10),function(g,y,x){x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,x.buf[x.pos]=127&(g>>>=7)}(h,0,o),function(g,y){var x=(7&g)<<4;y.buf[y.pos++]|=x|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(p,o)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=function(h,p,g){for(var y,x,S=0;S<p.length;S++){if((y=p.charCodeAt(S))>55295&&y<57344){if(!x){y>56319||S+1===p.length?(h[g++]=239,h[g++]=191,h[g++]=189):x=y;continue}if(y<56320){h[g++]=239,h[g++]=191,h[g++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(h[g++]=239,h[g++]=191,h[g++]=189,x=null);y<128?h[g++]=y:(y<2048?h[g++]=y>>6|192:(y<65536?h[g++]=y>>12|224:(h[g++]=y>>18|240,h[g++]=y>>12&63|128),h[g++]=y>>6&63|128),h[g++]=63&y|128)}return g}(this.buf,a,this.pos);var o=this.pos-i;o>=128&&zR(i,o,this),this.pos=i-1,this.writeVarint(o),this.pos+=o},writeFloat:function(a){this.realloc(4),RR(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),RR(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var o=0;o<i;o++)this.buf[this.pos++]=a[o]},writeRawMessage:function(a,i){this.pos++;var o=this.pos;a(i,this);var h=this.pos-o;h>=128&&zR(o,h,this),this.pos=o-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,i,o){this.writeTag(a,Qt.Bytes),this.writeRawMessage(i,o)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,Kce,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,Xce,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,Qce,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,Yce,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,Jce,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,ehe,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,the,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,rhe,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,ihe,i)},writeBytesField:function(a,i){this.writeTag(a,Qt.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,Qt.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,Qt.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,Qt.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,Qt.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,Qt.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,Qt.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,Qt.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,Qt.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,Qt.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,!!i)}};var Xw=_(kR);let Yw=3;function nhe(a,i,o){a===1&&o.readMessage(ahe,i)}function ahe(a,i,o){if(a===3){let{id:h,bitmap:p,width:g,height:y,left:x,top:S,advance:A}=o.readMessage(ohe,{});i.push({id:h,bitmap:new jp({width:g+2*Yw,height:y+2*Yw},p),metrics:{width:g,height:y,left:x,top:S,advance:A}})}}function ohe(a,i,o){a===1?i.id=o.readVarint():a===2?i.bitmap=o.readBytes():a===3?i.width=o.readVarint():a===4?i.height=o.readVarint():a===5?i.left=o.readSVarint():a===6?i.top=o.readSVarint():a===7&&(i.advance=o.readVarint())}let NR=Yw;function BR(a){let i=0,o=0;for(let y of a)i+=y.w*y.h,o=Math.max(o,y.w);a.sort((y,x)=>x.h-y.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),o),h:1/0}],p=0,g=0;for(let y of a)for(let x=h.length-1;x>=0;x--){let S=h[x];if(!(y.w>S.w||y.h>S.h)){if(y.x=S.x,y.y=S.y,g=Math.max(g,y.y+y.h),p=Math.max(p,y.x+y.w),y.w===S.w&&y.h===S.h){let A=h.pop();x<h.length&&(h[x]=A)}else y.h===S.h?(S.x+=y.w,S.w-=y.w):y.w===S.w?(S.y+=y.h,S.h-=y.h):(h.push({x:S.x+y.w,y:S.y,w:S.w-y.w,h:y.h}),S.y+=y.h,S.h-=y.h);break}}return{w:p,h:g,fill:i/(p*g)||0}}let ln=1;class Jw{constructor(i,{pixelRatio:o,version:h,stretchX:p,stretchY:g,content:y,textFitWidth:x,textFitHeight:S}){this.paddedRect=i,this.pixelRatio=o,this.stretchX=p,this.stretchY=g,this.content=y,this.version=h,this.textFitWidth=x,this.textFitHeight=S}get tl(){return[this.paddedRect.x+ln,this.paddedRect.y+ln]}get br(){return[this.paddedRect.x+this.paddedRect.w-ln,this.paddedRect.y+this.paddedRect.h-ln]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ln)/this.pixelRatio,(this.paddedRect.h-2*ln)/this.pixelRatio]}}class jR{constructor(i,o){let h={},p={};this.haveRenderCallbacks=[];let g=[];this.addImages(i,h,g),this.addImages(o,p,g);let{w:y,h:x}=BR(g),S=new Qn({width:y||1,height:x||1});for(let A in i){let M=i[A],O=h[A].paddedRect;Qn.copy(M.data,S,{x:0,y:0},{x:O.x+ln,y:O.y+ln},M.data)}for(let A in o){let M=o[A],O=p[A].paddedRect,L=O.x+ln,N=O.y+ln,U=M.data.width,G=M.data.height;Qn.copy(M.data,S,{x:0,y:0},{x:L,y:N},M.data),Qn.copy(M.data,S,{x:0,y:G-1},{x:L,y:N-1},{width:U,height:1}),Qn.copy(M.data,S,{x:0,y:0},{x:L,y:N+G},{width:U,height:1}),Qn.copy(M.data,S,{x:U-1,y:0},{x:L-1,y:N},{width:1,height:G}),Qn.copy(M.data,S,{x:0,y:0},{x:L+U,y:N},{width:1,height:G})}this.image=S,this.iconPositions=h,this.patternPositions=p}addImages(i,o,h){for(let p in i){let g=i[p],y={x:0,y:0,w:g.data.width+2*ln,h:g.data.height+2*ln};h.push(y),o[p]=new Jw(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(i,o){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),o),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),o)}patchUpdatedImage(i,o,h){if(!i||!o||i.version===o.version)return;i.version=o.version;let[p,g]=i.tl;h.update(o.data,void 0,{x:p,y:g})}}var Pu;Xe("ImagePosition",Jw),Xe("ImageAtlas",jR),c.ah=void 0,(Pu=c.ah||(c.ah={}))[Pu.none=0]="none",Pu[Pu.horizontal=1]="horizontal",Pu[Pu.vertical=2]="vertical",Pu[Pu.horizontalOnly=3]="horizontalOnly";let Zp=-17;class Kp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,o){let h=new Kp;return h.scale=i||1,h.fontStack=o,h}static forImage(i){let o=new Kp;return o.imageName=i,o}}class Kh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,o){let h=new Kh;for(let p=0;p<i.sections.length;p++){let g=i.sections[p];g.image?h.addImageSection(g):h.addTextSection(g,o)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let o="";for(let h=0;h<i.length;h++){let p=i.charCodeAt(h+1)||null,g=i.charCodeAt(h-1)||null;o+=p&&ky(p)&&!Wp[i[h+1]]||g&&ky(g)&&!Wp[i[h-1]]||!Wp[i[h]]?i[h]:Wp[i[h]]}return o}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&Zy[this.text.charCodeAt(h)];h++)i++;let o=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&Zy[this.text.charCodeAt(h)];h--)o--;this.text=this.text.substring(i,o),this.sectionIndex=this.sectionIndex.slice(i,o)}substring(i,o){let h=new Kh;return h.text=this.text.substring(i,o),h.sectionIndex=this.sectionIndex.slice(i,o),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,o)=>Math.max(i,this.sections[o].scale),0)}addTextSection(i,o){this.text+=i.text,this.sections.push(Kp.forText(i.scale,i.fontStack||o));let h=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(h)}addImageSection(i){let o=i.image?i.image.name:"";if(o.length===0)return void Yr("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Kp.forImage(o)),this.sectionIndex.push(this.sections.length-1)):Yr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Wy(a,i,o,h,p,g,y,x,S,A,M,O,L,N,U){let G=Kh.fromFeature(a,p),J;O===c.ah.vertical&&G.verticalizePunctuation();let{processBidirectionalText:ne,processStyledBidirectionalText:ve}=sn;if(ne&&G.sections.length===1){J=[];let qe=ne(G.toString(),Qw(G,A,g,i,h,N));for(let Ce of qe){let Ge=new Kh;Ge.text=Ce,Ge.sections=G.sections;for(let ct=0;ct<Ce.length;ct++)Ge.sectionIndex.push(0);J.push(Ge)}}else if(ve){J=[];let qe=ve(G.text,G.sectionIndex,Qw(G,A,g,i,h,N));for(let Ce of qe){let Ge=new Kh;Ge.text=Ce[0],Ge.sectionIndex=Ce[1],Ge.sections=G.sections,J.push(Ge)}}else J=function(qe,Ce){let Ge=[],ct=qe.text,$e=0;for(let Be of Ce)Ge.push(qe.substring($e,Be)),$e=Be;return $e<ct.length&&Ge.push(qe.substring($e,ct.length)),Ge}(G,Qw(G,A,g,i,h,N));let le=[],pe={positionedLines:le,text:G.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:O,iconsInText:!1,verticalizable:!1};return function(qe,Ce,Ge,ct,$e,Be,at,Ye,Ke,Ee,ot,rt){let vt=0,rr=Zp,er=0,Qr=0,ba=Ye==="right"?1:Ye==="left"?0:.5,mi=0;for(let Ar of $e){Ar.trim();let ti=Ar.getMaxScale(),Ii=(ti-1)*Hr,vi={positionedGlyphs:[],lineOffset:0};qe.positionedLines[mi]=vi;let Vi=vi.positionedGlyphs,gi=0;if(!Ar.length()){rr+=Be,++mi;continue}for(let cn=0;cn<Ar.length();cn++){let $t=Ar.getSection(cn),ar=Ar.getSectionIndex(cn),fr=Ar.getCharCode(cn),Tn=0,br=null,Qh=null,Eo=null,To=Hr,wa=!(Ke===c.ah.horizontal||!ot&&!Rp(fr)||ot&&(Zy[fr]||(ei=fr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(ei)))));if($t.imageName){let ra=ct[$t.imageName];if(!ra)continue;Eo=$t.imageName,qe.iconsInText=qe.iconsInText||!0,Qh=ra.paddedRect;let ai=ra.displaySize;$t.scale=$t.scale*Hr/rt,br={width:ai[0],height:ai[1],left:ln,top:-NR,advance:wa?ai[1]:ai[0]},Tn=Ii+(Hr-ai[1]*$t.scale),To=br.advance;let gs=wa?ai[0]*$t.scale-Hr*ti:ai[1]*$t.scale-Hr*ti;gs>0&&gs>gi&&(gi=gs)}else{let ra=Ge[$t.fontStack],ai=ra&&ra[fr];if(ai&&ai.rect)Qh=ai.rect,br=ai.metrics;else{let gs=Ce[$t.fontStack],tm=gs&&gs[fr];if(!tm)continue;br=tm.metrics}Tn=(ti-$t.scale)*Hr}wa?(qe.verticalizable=!0,Vi.push({glyph:fr,imageName:Eo,x:vt,y:rr+Tn,vertical:wa,scale:$t.scale,fontStack:$t.fontStack,sectionIndex:ar,metrics:br,rect:Qh}),vt+=To*$t.scale+Ee):(Vi.push({glyph:fr,imageName:Eo,x:vt,y:rr+Tn,vertical:wa,scale:$t.scale,fontStack:$t.fontStack,sectionIndex:ar,metrics:br,rect:Qh}),vt+=br.advance*$t.scale+Ee)}Vi.length!==0&&(er=Math.max(vt-Ee,er),che(Vi,0,Vi.length-1,ba,gi)),vt=0;let ta=Be*ti+gi;vi.lineOffset=Math.max(gi,Ii),rr+=ta,Qr=Math.max(ta,Qr),++mi}var ei;let ji=rr-Zp,{horizontalAlign:Ui,verticalAlign:$i}=eS(at);(function(Ar,ti,Ii,vi,Vi,gi,ta,cn,$t){let ar=(ti-Ii)*Vi,fr=0;fr=gi!==ta?-cn*vi-Zp:(-vi*$t+.5)*ta;for(let Tn of Ar)for(let br of Tn.positionedGlyphs)br.x+=ar,br.y+=fr})(qe.positionedLines,ba,Ui,$i,er,Qr,Be,ji,$e.length),qe.top+=-$i*ji,qe.bottom=qe.top+ji,qe.left+=-Ui*er,qe.right=qe.left+er}(pe,i,o,h,J,y,x,S,O,A,L,U),!function(qe){for(let Ce of qe)if(Ce.positionedGlyphs.length!==0)return!1;return!0}(le)&&pe}let Zy={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},she={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},uhe={40:!0};function UR(a,i,o,h,p,g){if(i.imageName){let y=h[i.imageName];return y?y.displaySize[0]*i.scale*Hr/g+p:0}{let y=o[i.fontStack],x=y&&y[a];return x?x.metrics.advance*i.scale+p:0}}function $R(a,i,o,h){let p=Math.pow(a-i,2);return h?a<i?p/2:2*p:p+Math.abs(o)*o}function lhe(a,i,o){let h=0;return a===10&&(h-=1e4),o&&(h+=150),a!==40&&a!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function VR(a,i,o,h,p,g){let y=null,x=$R(i,o,p,g);for(let S of h){let A=$R(i-S.x,o,p,g)+S.badness;A<=x&&(y=S,x=A)}return{index:a,x:i,priorBreak:y,badness:x}}function GR(a){return a?GR(a.priorBreak).concat(a.index):[]}function Qw(a,i,o,h,p,g){if(!a)return[];let y=[],x=function(O,L,N,U,G,J){let ne=0;for(let ve=0;ve<O.length();ve++){let le=O.getSection(ve);ne+=UR(O.getCharCode(ve),le,U,G,L,J)}return ne/Math.max(1,Math.ceil(ne/N))}(a,i,o,h,p,g),S=a.text.indexOf("\u200B")>=0,A=0;for(let O=0;O<a.length();O++){let L=a.getSection(O),N=a.getCharCode(O);if(Zy[N]||(A+=UR(N,L,h,p,i,g)),O<a.length()-1){let U=!((M=N)<11904)&&(!!zt["CJK Compatibility Forms"](M)||!!zt["CJK Compatibility"](M)||!!zt["CJK Strokes"](M)||!!zt["CJK Symbols and Punctuation"](M)||!!zt["Enclosed CJK Letters and Months"](M)||!!zt["Halfwidth and Fullwidth Forms"](M)||!!zt["Ideographic Description Characters"](M)||!!zt["Vertical Forms"](M)||My.test(String.fromCodePoint(M)));(she[N]||U||L.imageName||O!==a.length()-2&&uhe[a.getCharCode(O+1)])&&y.push(VR(O+1,A,x,y,lhe(N,a.getCharCode(O+1),U&&S),!1))}}var M;return GR(VR(a.length(),A,x,y,0,!0))}function eS(a){let i=.5,o=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0;}switch(a){case"bottom":case"bottom-right":case"bottom-left":o=1;break;case"top":case"top-right":case"top-left":o=0;}return{horizontalAlign:i,verticalAlign:o}}function che(a,i,o,h,p){if(!h&&!p)return;let g=a[o],y=(a[o].x+g.metrics.advance*g.scale)*h;for(let x=i;x<=o;x++)a[x].x-=y,a[x].y+=p}function hhe(a,i,o){let{horizontalAlign:h,verticalAlign:p}=eS(o),g=i[0]-a.displaySize[0]*h,y=i[1]-a.displaySize[1]*p;return{image:a,top:y,bottom:y+a.displaySize[1],left:g,right:g+a.displaySize[0]}}function HR(a){var i,o;let h=a.left,p=a.top,g=a.right-h,y=a.bottom-p,x=(i=a.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",S=(o=a.image.textFitHeight)!==null&&o!==void 0?o:"stretchOrShrink",A=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(S==="proportional"){if(x==="stretchOnly"&&g/y<A||x==="proportional"){let M=Math.ceil(y*A);h*=M/g,g=M}}else if(x==="proportional"&&S==="stretchOnly"&&A!==0&&g/y>A){let M=Math.ceil(g/A);p*=M/y,y=M}return{x1:h,y1:p,x2:h+g,y2:p+y}}function WR(a,i,o,h,p,g){let y=a.image,x;if(y.content){let J=y.content,ne=y.pixelRatio||1;x=[J[0]/ne,J[1]/ne,y.displaySize[0]-J[2]/ne,y.displaySize[1]-J[3]/ne]}let S=i.left*g,A=i.right*g,M,O,L,N;o==="width"||o==="both"?(N=p[0]+S-h[3],O=p[0]+A+h[1]):(N=p[0]+(S+A-y.displaySize[0])/2,O=N+y.displaySize[0]);let U=i.top*g,G=i.bottom*g;return o==="height"||o==="both"?(M=p[1]+U-h[0],L=p[1]+G+h[2]):(M=p[1]+(U+G-y.displaySize[1])/2,L=M+y.displaySize[1]),{image:y,top:M,right:O,bottom:L,left:N,collisionPadding:x}}let Xp=255,Io=128,Cu=Xp*Io;function ZR(a,i){let{expression:o}=i;if(o.kind==="constant")return{kind:"constant",layoutSize:o.evaluate(new ur(a+1))};if(o.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=o,g=0;for(;g<h.length&&h[g]<=a;)g++;g=Math.max(0,g-1);let y=g;for(;y<h.length&&h[y]<a+1;)y++;y=Math.min(h.length-1,y);let x=h[g],S=h[y];return o.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:S,interpolationType:p}:{kind:"camera",minZoom:x,maxZoom:S,minSize:o.evaluate(new ur(x)),maxSize:o.evaluate(new ur(S)),interpolationType:p}}}function tS(a,i,o){let h="never",p=a.get(i);return p?h=p:a.get(o)&&(h="always"),h}let fhe=Au.VectorTileFeature.types,dhe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Ky(a,i,o,h,p,g,y,x,S,A,M,O,L){let N=x?Math.min(Cu,Math.round(x[0])):0,U=x?Math.min(Cu,Math.round(x[1])):0;a.emplaceBack(i,o,Math.round(32*h),Math.round(32*p),g,y,(N<<1)+(S?1:0),U,16*A,16*M,256*O,256*L)}function rS(a,i,o){a.emplaceBack(i.x,i.y,o),a.emplaceBack(i.x,i.y,o),a.emplaceBack(i.x,i.y,o),a.emplaceBack(i.x,i.y,o)}function phe(a){for(let i of a.sections)if(Cw(i.text))return!0;return!1}class iS{constructor(i){this.layoutVertexArray=new Fh,this.indexArray=new Jn,this.programConfigurations=i,this.segments=new Ft,this.dynamicLayoutVertexArray=new zp,this.opacityVertexArray=new In,this.hasVisibleVertices=!1,this.placedSymbolArray=new lr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,o,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Vce.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,o),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Gce.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,dhe,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Xe("SymbolBuffers",iS);class nS{constructor(i,o,h){this.layoutVertexArray=new i,this.layoutAttributes=o,this.indexArray=new h,this.segments=new Ft,this.collisionVertexArray=new So}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,Hce.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Xe("CollisionBuffers",nS);class Xh{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(y=>y.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=zw([]),this.placementViewportMatrix=zw([]);let o=this.layers[0]._unevaluatedLayout._values;this.textSizeData=ZR(this.zoom,o["text-size"]),this.iconSizeData=ZR(this.zoom,o["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),g=h.get("symbol-z-order");this.canOverlap=tS(h,"text-overlap","text-allow-overlap")!=="never"||tS(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(y=>c.ah[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=i.sourceID}createArrays(){this.text=new iS(new tc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new iS(new tc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new cr,this.lineVertexArray=new hi,this.symbolInstances=new Rt,this.textAnchorOffsets=new hr}calculateGlyphDependencies(i,o,h,p,g){for(let y=0;y<i.length;y++)if(o[i.charCodeAt(y)]=!0,(h||p)&&g){let x=Wp[i.charAt(y)];x&&(o[x.charCodeAt(0)]=!0)}}populate(i,o,h){let p=this.layers[0],g=p.layout,y=g.get("text-font"),x=g.get("text-field"),S=g.get("icon-image"),A=(x.value.kind!=="constant"||x.value.value instanceof rn&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),M=S.value.kind!=="constant"||!!S.value.value||Object.keys(S.parameters).length>0,O=g.get("symbol-sort-key");if(this.features=[],!A&&!M)return;let L=o.iconDependencies,N=o.glyphDependencies,U=o.availableImages,G=new ur(this.zoom);for(let{feature:J,id:ne,index:ve,sourceLayerIndex:le}of i){let pe=p._featureFilter.needGeometry,qe=ic(J,pe);if(!p._featureFilter.filter(G,qe,h))continue;let Ce,Ge;if(pe||(qe.geometry=rc(J)),A){let $e=p.getValueAndResolveTokens("text-field",qe,h,U),Be=rn.factory($e),at=this.hasRTLText=this.hasRTLText||phe(Be);(!at||sn.getRTLTextPluginStatus()==="unavailable"||at&&sn.isParsed())&&(Ce=Zce(Be,p,qe))}if(M){let $e=p.getValueAndResolveTokens("icon-image",qe,h,U);Ge=$e instanceof an?$e:an.fromString($e)}if(!Ce&&!Ge)continue;let ct=this.sortFeaturesByKey?O.evaluate(qe,{},h):void 0;if(this.features.push({id:ne,text:Ce,icon:Ge,index:ve,sourceLayerIndex:le,geometry:qe.geometry,properties:J.properties,type:fhe[J.type],sortKey:ct}),Ge&&(L[Ge.name]=!0),Ce){let $e=y.evaluate(qe,{},h).join(","),Be=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.ah.vertical)>=0;for(let at of Ce.sections)if(at.image)L[at.image.name]=!0;else{let Ye=kp(Ce.toString()),Ke=at.fontStack||$e,Ee=N[Ke]=N[Ke]||{};this.calculateGlyphDependencies(at.text,Ee,Be,this.allowVerticalPlacement,Ye)}}}g.get("symbol-placement")==="line"&&(this.features=function(J){let ne={},ve={},le=[],pe=0;function qe($e){le.push(J[$e]),pe++}function Ce($e,Be,at){let Ye=ve[$e];return delete ve[$e],ve[Be]=Ye,le[Ye].geometry[0].pop(),le[Ye].geometry[0]=le[Ye].geometry[0].concat(at[0]),Ye}function Ge($e,Be,at){let Ye=ne[Be];return delete ne[Be],ne[$e]=Ye,le[Ye].geometry[0].shift(),le[Ye].geometry[0]=at[0].concat(le[Ye].geometry[0]),Ye}function ct($e,Be,at){let Ye=at?Be[0][Be[0].length-1]:Be[0][0];return`${$e}:${Ye.x}:${Ye.y}`}for(let $e=0;$e<J.length;$e++){let Be=J[$e],at=Be.geometry,Ye=Be.text?Be.text.toString():null;if(!Ye){qe($e);continue}let Ke=ct(Ye,at),Ee=ct(Ye,at,!0);if(Ke in ve&&Ee in ne&&ve[Ke]!==ne[Ee]){let ot=Ge(Ke,Ee,at),rt=Ce(Ke,Ee,le[ot].geometry);delete ne[Ke],delete ve[Ee],ve[ct(Ye,le[rt].geometry,!0)]=rt,le[ot].geometry=null}else Ke in ve?Ce(Ke,Ee,at):Ee in ne?Ge(Ke,Ee,at):(qe($e),ne[Ke]=pe-1,ve[Ee]=pe-1)}return le.filter($e=>$e.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ne)=>J.sortKey-ne.sortKey)}update(i,o,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,o,this.layers,h),this.icon.programConfigurations.updatePaintArrays(i,o,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,o){let h=this.lineVertexArray.length;if(i.segment!==void 0){let p=i.dist(o[i.segment+1]),g=i.dist(o[i.segment]),y={};for(let x=i.segment+1;x<o.length;x++)y[x]={x:o[x].x,y:o[x].y,tileUnitDistanceFromAnchor:p},x<o.length-1&&(p+=o[x+1].dist(o[x]));for(let x=i.segment||0;x>=0;x--)y[x]={x:o[x].x,y:o[x].y,tileUnitDistanceFromAnchor:g},x>0&&(g+=o[x-1].dist(o[x]));for(let x=0;x<o.length;x++){let S=y[x];this.lineVertexArray.emplaceBack(S.x,S.y,S.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,o,h,p,g,y,x,S,A,M,O,L){let N=i.indexArray,U=i.layoutVertexArray,G=i.segments.prepareSegment(4*o.length,U,N,this.canOverlap?y.sortKey:void 0),J=this.glyphOffsetArray.length,ne=G.vertexLength,ve=this.allowVerticalPlacement&&x===c.ah.vertical?Math.PI/2:0,le=y.text&&y.text.sections;for(let pe=0;pe<o.length;pe++){let{tl:qe,tr:Ce,bl:Ge,br:ct,tex:$e,pixelOffsetTL:Be,pixelOffsetBR:at,minFontScaleX:Ye,minFontScaleY:Ke,glyphOffset:Ee,isSDF:ot,sectionIndex:rt}=o[pe],vt=G.vertexLength,rr=Ee[1];Ky(U,S.x,S.y,qe.x,rr+qe.y,$e.x,$e.y,h,ot,Be.x,Be.y,Ye,Ke),Ky(U,S.x,S.y,Ce.x,rr+Ce.y,$e.x+$e.w,$e.y,h,ot,at.x,Be.y,Ye,Ke),Ky(U,S.x,S.y,Ge.x,rr+Ge.y,$e.x,$e.y+$e.h,h,ot,Be.x,at.y,Ye,Ke),Ky(U,S.x,S.y,ct.x,rr+ct.y,$e.x+$e.w,$e.y+$e.h,h,ot,at.x,at.y,Ye,Ke),rS(i.dynamicLayoutVertexArray,S,ve),N.emplaceBack(vt,vt+1,vt+2),N.emplaceBack(vt+1,vt+2,vt+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ee[0]),pe!==o.length-1&&rt===o[pe+1].sectionIndex||i.programConfigurations.populatePaintArrays(U.length,y,y.index,{},L,le&&le[rt])}i.placedSymbolArray.emplaceBack(S.x,S.y,J,this.glyphOffsetArray.length-J,ne,A,M,S.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],x,0,!1,0,O)}_addCollisionDebugVertex(i,o,h,p,g,y){return o.emplaceBack(0,0),i.emplaceBack(h.x,h.y,p,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(i,o,h,p,g,y,x){let S=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),A=S.vertexLength,M=g.layoutVertexArray,O=g.collisionVertexArray,L=x.anchorX,N=x.anchorY;this._addCollisionDebugVertex(M,O,y,L,N,new P(i,o)),this._addCollisionDebugVertex(M,O,y,L,N,new P(h,o)),this._addCollisionDebugVertex(M,O,y,L,N,new P(h,p)),this._addCollisionDebugVertex(M,O,y,L,N,new P(i,p)),S.vertexLength+=4;let U=g.indexArray;U.emplaceBack(A,A+1),U.emplaceBack(A+1,A+2),U.emplaceBack(A+2,A+3),U.emplaceBack(A+3,A),S.primitiveLength+=4}addDebugCollisionBoxes(i,o,h,p){for(let g=i;g<o;g++){let y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,p?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new nS(En,MR.members,ni),this.iconCollisionBox=new nS(En,MR.members,ni);for(let i=0;i<this.symbolInstances.length;i++){let o=this.symbolInstances.get(i);this.addDebugCollisionBoxes(o.textBoxStartIndex,o.textBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.verticalTextBoxStartIndex,o.verticalTextBoxEndIndex,o,!0),this.addDebugCollisionBoxes(o.iconBoxStartIndex,o.iconBoxEndIndex,o,!1),this.addDebugCollisionBoxes(o.verticalIconBoxStartIndex,o.verticalIconBoxEndIndex,o,!1)}}_deserializeCollisionBoxesForSymbol(i,o,h,p,g,y,x,S,A){let M={};for(let O=o;O<h;O++){let L=i.get(O);M.textBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.textFeatureIndex=L.featureIndex;break}for(let O=p;O<g;O++){let L=i.get(O);M.verticalTextBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.verticalTextFeatureIndex=L.featureIndex;break}for(let O=y;O<x;O++){let L=i.get(O);M.iconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.iconFeatureIndex=L.featureIndex;break}for(let O=S;O<A;O++){let L=i.get(O);M.verticalIconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.verticalIconFeatureIndex=L.featureIndex;break}return M}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let o=0;o<this.symbolInstances.length;o++){let h=this.symbolInstances.get(o);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,o){let h=i.placedSymbolArray.get(o),p=h.vertexStartIndex+4*h.numGlyphs;for(let g=h.vertexStartIndex;g<p;g+=4)i.indexArray.emplaceBack(g,g+1,g+2),i.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let o=Math.sin(i),h=Math.cos(i),p=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);let S=this.symbolInstances.get(x);p.push(0|Math.round(o*S.anchorX+h*S.anchorY)),g.push(S.featureIndex)}return y.sort((x,S)=>p[x]-p[S]||g[S]-g[x]),y}addToSortKeyRanges(i,o){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===o?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:o,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let o of this.symbolInstanceIndexes){let h=this.symbolInstances.get(o);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,g,y)=>{p>=0&&y.indexOf(p)===g&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let KR,XR;Xe("SymbolBucket",Xh,{omit:["layers","collisionBoxArray","features","compareText"]}),Xh.MAX_GLYPHS=65535,Xh.addDynamicAttributes=rS;var aS={get paint(){return XR=XR||new v({"icon-opacity":new ht(Se.paint_symbol["icon-opacity"]),"icon-color":new ht(Se.paint_symbol["icon-color"]),"icon-halo-color":new ht(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new ht(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ht(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new et(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new et(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new ht(Se.paint_symbol["text-opacity"]),"text-color":new ht(Se.paint_symbol["text-color"],{runtimeType:Li,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new ht(Se.paint_symbol["text-halo-color"]),"text-halo-width":new ht(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new ht(Se.paint_symbol["text-halo-blur"]),"text-translate":new et(Se.paint_symbol["text-translate"]),"text-translate-anchor":new et(Se.paint_symbol["text-translate-anchor"])})},get layout(){return KR=KR||new v({"symbol-placement":new et(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new et(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new et(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ht(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new et(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new et(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new et(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new et(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new et(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new et(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new ht(Se.layout_symbol["icon-size"]),"icon-text-fit":new et(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new et(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new ht(Se.layout_symbol["icon-image"]),"icon-rotate":new ht(Se.layout_symbol["icon-rotate"]),"icon-padding":new ht(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new et(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new ht(Se.layout_symbol["icon-offset"]),"icon-anchor":new ht(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new et(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new et(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new et(Se.layout_symbol["text-rotation-alignment"]),"text-field":new ht(Se.layout_symbol["text-field"]),"text-font":new ht(Se.layout_symbol["text-font"]),"text-size":new ht(Se.layout_symbol["text-size"]),"text-max-width":new ht(Se.layout_symbol["text-max-width"]),"text-line-height":new et(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new ht(Se.layout_symbol["text-letter-spacing"]),"text-justify":new ht(Se.layout_symbol["text-justify"]),"text-radial-offset":new ht(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new et(Se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ht(Se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ht(Se.layout_symbol["text-anchor"]),"text-max-angle":new et(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new et(Se.layout_symbol["text-writing-mode"]),"text-rotate":new ht(Se.layout_symbol["text-rotate"]),"text-padding":new et(Se.layout_symbol["text-padding"]),"text-keep-upright":new et(Se.layout_symbol["text-keep-upright"]),"text-transform":new ht(Se.layout_symbol["text-transform"]),"text-offset":new ht(Se.layout_symbol["text-offset"]),"text-allow-overlap":new et(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new et(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new et(Se.layout_symbol["text-ignore-placement"]),"text-optional":new et(Se.layout_symbol["text-optional"])})}};class YR{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:_o,this.defaultValue=i}evaluate(i){if(i.formattedSection){let o=this.defaultValue.property.overrides;if(o&&o.hasOverride(i.formattedSection))return o.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Xe("FormatSectionOverride",YR,{omit:["defaultValue"]});class Xy extends l{constructor(i){super(i,aS)}recalculate(i,o){if(super.recalculate(i,o),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let g of h)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,o,h,p){let g=this.layout.get(i).evaluate(o,{},h,p),y=this._unevaluatedLayout._values[i];return y.isDataDriven()||Sh(y.value)||!g?g:function(x,S){return S.replace(/{([^{}]+)}/g,(A,M)=>x&&M in x?String(x[M]):"")}(o.properties,g)}createBucket(i){return new Xh(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let i of aS.paint.overridableProperties){if(!Xy.hasPaintOverride(this.layout,i))continue;let o=this.paint.get(i),h=new YR(o),p=new wh(h,o.property.specification),g=null;g=o.value.kind==="constant"||o.value.kind==="source"?new fu("source",p):new du("composite",p,o.value.zoomStops),this.paint._values[i]=new _a(o.property,g,o.parameters)}}_handleOverridablePaintPropertyUpdate(i,o,h){return!(!this.layout||o.isDataDriven()||h.isDataDriven())&&Xy.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,o){let h=i.get("text-field"),p=aS.paint.properties[o],g=!1,y=x=>{for(let S of x)if(p.overrides&&p.overrides.hasOverride(S))return void(g=!0)};if(h.value.kind==="constant"&&h.value.value instanceof rn)y(h.value.value.sections);else if(h.value.kind==="source"){let x=A=>{g||(A instanceof Hn&&zr(A.value)===Xa?y(A.value.sections):A instanceof dh?y(A.sections):A.eachChild(x))},S=h.value;S._styleExpression&&x(S._styleExpression.expression)}return g}}let JR;var mhe={get paint(){return JR=JR||new v({"background-color":new et(Se.paint_background["background-color"]),"background-pattern":new Lh(Se.paint_background["background-pattern"]),"background-opacity":new et(Se.paint_background["background-opacity"])})}};class vhe extends l{constructor(i){super(i,mhe)}}let QR;var ghe={get paint(){return QR=QR||new v({"raster-opacity":new et(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new et(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new et(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new et(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new et(Se.paint_raster["raster-saturation"]),"raster-contrast":new et(Se.paint_raster["raster-contrast"]),"raster-resampling":new et(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new et(Se.paint_raster["raster-fade-duration"])})}};class yhe extends l{constructor(i){super(i,ghe)}}class _he extends l{constructor(i){super(i,{}),this.onAdd=o=>{this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)},this.onRemove=o=>{this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class xhe{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let oS=6371008.8;class Mu{constructor(i,o){if(isNaN(i)||isNaN(o))throw new Error(`Invalid LngLat object: (${i}, ${o})`);if(this.lng=+i,this.lat=+o,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Mu(be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){let o=Math.PI/180,h=this.lat*o,p=i.lat*o,g=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((i.lng-this.lng)*o);return oS*Math.acos(Math.min(g,1))}static convert(i){if(i instanceof Mu)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Mu(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Mu(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let eD=2*Math.PI*oS;function tD(a){return eD*Math.cos(a*Math.PI/180)}function rD(a){return(180+a)/360}function iD(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function nD(a,i){return a/tD(i)}function sS(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class Yp{constructor(i,o,h=0){this.x=+i,this.y=+o,this.z=+h}static fromLngLat(i,o=0){let h=Mu.convert(i);return new Yp(rD(h.lng),iD(h.lat),nD(o,h.lat))}toLngLat(){return new Mu(360*this.x-180,sS(this.y))}toAltitude(){return this.z*tD(sS(this.y))}meterInMercatorCoordinateUnits(){return 1/eD*(i=sS(this.y),1/Math.cos(i*Math.PI/180));var i}}function aD(a,i,o){var h=2*Math.PI*6378137/256/Math.pow(2,o);return[a*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class uS{constructor(i,o,h){if(!function(p,g,y){return!(p<0||p>25||y<0||y>=Math.pow(2,p)||g<0||g>=Math.pow(2,p))}(i,o,h))throw new Error(`x=${o}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=o,this.y=h,this.key=Jp(0,i,i,o,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,o,h){let p=(y=this.y,x=this.z,S=aD(256*(g=this.x),256*(y=Math.pow(2,x)-y-1),x),A=aD(256*(g+1),256*(y+1),x),S[0]+","+S[1]+","+A[0]+","+A[1]);var g,y,x,S,A;let M=function(O,L,N){let U,G="";for(let J=O;J>0;J--)U=1<<J-1,G+=(L&U?1:0)+(N&U?2:0);return G}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,o>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,p)}isChildOf(i){let o=this.z-i.z;return o>0&&i.x===this.x>>o&&i.y===this.y>>o}getTilePoint(i){let o=Math.pow(2,this.z);return new P((i.x*o-this.x)*Fr,(i.y*o-this.y)*Fr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class oD{constructor(i,o){this.wrap=i,this.canonical=o,this.key=Jp(i,o.z,o.z,o.x,o.y)}}class ea{constructor(i,o,h,p,g){if(i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=o,this.canonical=new uS(h,+p,+g),this.key=Jp(o,i,h,p,g)}clone(){return new ea(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let o=this.canonical.z-i;return i>this.canonical.z?new ea(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ea(i,this.wrap,i,this.canonical.x>>o,this.canonical.y>>o)}calculateScaledKey(i,o){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-i;return i>this.canonical.z?Jp(this.wrap*+o,i,this.canonical.z,this.canonical.x,this.canonical.y):Jp(this.wrap*+o,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;let o=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>o&&i.canonical.y===this.canonical.y>>o}children(i){if(this.overscaledZ>=i)return[new ea(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let o=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new ea(o,this.wrap,o,h,p),new ea(o,this.wrap,o,h+1,p),new ea(o,this.wrap,o,h,p+1),new ea(o,this.wrap,o,h+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new ea(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new ea(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new oD(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Yp(i.x-this.wrap,i.y))}}function Jp(a,i,o,h,p){(a*=2)<0&&(a=-1*a-1);let g=1<<o;return(g*g*a+g*p+h).toString(36)+o.toString(36)+i.toString(36)}Xe("CanonicalTileID",uS),Xe("OverscaledTileID",ea,{omit:["posMatrix"]});class sD{constructor(i,o,h,p=1,g=1,y=1,x=0){if(this.uid=i,o.height!==o.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Yr(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=o.height;let S=this.dim=o.height-2;switch(this.data=new Uint32Array(o.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=g,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let A=0;A<S;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(S,A)]=this.data[this._idx(S-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,S)]=this.data[this._idx(A,S-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(S,-1)]=this.data[this._idx(S-1,0)],this.data[this._idx(-1,S)]=this.data[this._idx(0,S-1)],this.data[this._idx(S,S)]=this.data[this._idx(S-1,S-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<S;A++)for(let M=0;M<S;M++){let O=this.get(A,M);O>this.max&&(this.max=O),O<this.min&&(this.min=O)}}get(i,o){let h=new Uint8Array(this.data.buffer),p=4*this._idx(i,o);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,o){if(i<-1||i>=this.dim+1||o<-1||o>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(o+1)*this.stride+(i+1)}unpack(i,o,h){return i*this.redFactor+o*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new Qn({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,o,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=o*this.dim,g=o*this.dim+this.dim,y=h*this.dim,x=h*this.dim+this.dim;switch(o){case-1:p=g-1;break;case 1:g=p+1;}switch(h){case-1:y=x-1;break;case 1:x=y+1;}let S=-o*this.dim,A=-h*this.dim;for(let M=y;M<x;M++)for(let O=p;O<g;O++)this.data[this._idx(O,M)]=i.data[this._idx(O+S,M+A)]}}Xe("DEMData",sD);class uD{constructor(i){this._stringToNumber={},this._numberToString=[];for(let o=0;o<i.length;o++){let h=i[o];this._stringToNumber[h]=o,this._numberToString[o]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class lD{constructor(i,o,h,p,g){this.type="Feature",this._vectorTileFeature=i,i._z=o,i._x=h,i._y=p,this.properties=i.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){let i={geometry:this.geometry};for(let o in this)o!=="_geometry"&&o!=="_vectorTileFeature"&&(i[o]=this[o]);return i}}class cD{constructor(i,o){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new gu(Fr,16,0),this.grid3D=new gu(Fr,16,0),this.featureIndexArray=new Si,this.promoteId=o}insert(i,o,h,p,g,y){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,g);let S=y?this.grid3D:this.grid;for(let A=0;A<o.length;A++){let M=o[A],O=[1/0,1/0,-1/0,-1/0];for(let L=0;L<M.length;L++){let N=M[L];O[0]=Math.min(O[0],N.x),O[1]=Math.min(O[1],N.y),O[2]=Math.max(O[2],N.x),O[3]=Math.max(O[3],N.y)}O[0]<Fr&&O[1]<Fr&&O[2]>=0&&O[3]>=0&&S.insert(x,O[0],O[1],O[2],O[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Au.VectorTile(new Xw(this.rawTileData)).layers,this.sourceLayerCoder=new uD(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,o,h,p){this.loadVTLayers();let g=i.params||{},y=Fr/i.tileSize/i.scale,x=gp(g.filter),S=i.queryGeometry,A=i.queryPadding*y,M=fD(S),O=this.grid.query(M.minX-A,M.minY-A,M.maxX+A,M.maxY+A),L=fD(i.cameraQueryGeometry),N=this.grid3D.query(L.minX-A,L.minY-A,L.maxX+A,L.maxY+A,(J,ne,ve,le)=>function(pe,qe,Ce,Ge,ct){for(let Be of pe)if(qe<=Be.x&&Ce<=Be.y&&Ge>=Be.x&&ct>=Be.y)return!0;let $e=[new P(qe,Ce),new P(qe,ct),new P(Ge,ct),new P(Ge,Ce)];if(pe.length>2){for(let Be of $e)if($h(pe,Be))return!0}for(let Be=0;Be<pe.length-1;Be++)if(ece(pe[Be],pe[Be+1],$e))return!0;return!1}(i.cameraQueryGeometry,J-A,ne-A,ve+A,le+A));for(let J of N)O.push(J);O.sort(bhe);let U={},G;for(let J=0;J<O.length;J++){let ne=O[J];if(ne===G)continue;G=ne;let ve=this.featureIndexArray.get(ne),le=null;this.loadMatchingFeature(U,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,x,g.layers,g.availableImages,o,h,p,(pe,qe,Ce)=>(le||(le=rc(pe)),qe.queryIntersectsFeature(S,pe,Ce,le,this.z,i.transform,y,i.pixelPosMatrix)))}return U}loadMatchingFeature(i,o,h,p,g,y,x,S,A,M,O){let L=this.bucketLayerIDs[o];if(y&&!function(J,ne){for(let ve=0;ve<J.length;ve++)if(ne.indexOf(J[ve])>=0)return!0;return!1}(y,L))return;let N=this.sourceLayerCoder.decode(h),U=this.vtLayers[N].feature(p);if(g.needGeometry){let J=ic(U,!0);if(!g.filter(new ur(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!g.filter(new ur(this.tileID.overscaledZ),U))return;let G=this.getId(U,N);for(let J=0;J<L.length;J++){let ne=L[J];if(y&&y.indexOf(ne)<0)continue;let ve=S[ne];if(!ve)continue;let le={};G&&M&&(le=M.getState(ve.sourceLayer||"_geojsonTileLayer",G));let pe=Qe({},A[ne]);pe.paint=hD(pe.paint,ve.paint,U,le,x),pe.layout=hD(pe.layout,ve.layout,U,le,x);let qe=!O||O(U,ve,le);if(!qe)continue;let Ce=new lD(U,this.z,this.x,this.y,G);Ce.layer=pe;let Ge=i[ne];Ge===void 0&&(Ge=i[ne]=[]),Ge.push({featureIndex:p,feature:Ce,intersectionZ:qe})}}lookupSymbolFeatures(i,o,h,p,g,y,x,S){let A={};this.loadVTLayers();let M=gp(g);for(let O of i)this.loadMatchingFeature(A,h,p,O,M,y,x,S,o);return A}hasLayer(i){for(let o of this.bucketLayerIDs)for(let h of o)if(i===h)return!0;return!1}getId(i,o){let h=i.id;return this.promoteId&&(h=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[o]],typeof h=="boolean"&&(h=Number(h))),h}}function hD(a,i,o,h,p){return nt(a,(g,y)=>{let x=i instanceof Jl?i.get(y):null;return x&&x.evaluate?x.evaluate(o,h,p):x})}function fD(a){let i=1/0,o=1/0,h=-1/0,p=-1/0;for(let g of a)i=Math.min(i,g.x),o=Math.min(o,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return{minX:i,minY:o,maxX:h,maxY:p}}function bhe(a,i){return i-a}function dD(a,i,o,h,p){let g=[];for(let y=0;y<a.length;y++){let x=a[y],S;for(let A=0;A<x.length-1;A++){let M=x[A],O=x[A+1];M.x<i&&O.x<i||(M.x<i?M=new P(i,M.y+(i-M.x)/(O.x-M.x)*(O.y-M.y))._round():O.x<i&&(O=new P(i,M.y+(i-M.x)/(O.x-M.x)*(O.y-M.y))._round()),M.y<o&&O.y<o||(M.y<o?M=new P(M.x+(o-M.y)/(O.y-M.y)*(O.x-M.x),o)._round():O.y<o&&(O=new P(M.x+(o-M.y)/(O.y-M.y)*(O.x-M.x),o)._round()),M.x>=h&&O.x>=h||(M.x>=h?M=new P(h,M.y+(h-M.x)/(O.x-M.x)*(O.y-M.y))._round():O.x>=h&&(O=new P(h,M.y+(h-M.x)/(O.x-M.x)*(O.y-M.y))._round()),M.y>=p&&O.y>=p||(M.y>=p?M=new P(M.x+(p-M.y)/(O.y-M.y)*(O.x-M.x),p)._round():O.y>=p&&(O=new P(M.x+(p-M.y)/(O.y-M.y)*(O.x-M.x),p)._round()),S&&M.equals(S[S.length-1])||(S=[M],g.push(S)),S.push(O)))))}}return g}Xe("FeatureIndex",cD,{omit:["rawTileData","sourceLayerCoder"]});class ku extends P{constructor(i,o,h,p){super(i,o),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new ku(this.x,this.y,this.angle,this.segment)}}function pD(a,i,o,h,p){if(i.segment===void 0||o===0)return!0;let g=i,y=i.segment+1,x=0;for(;x>-o/2;){if(y--,y<0)return!1;x-=a[y].dist(g),g=a[y]}x+=a[y].dist(a[y+1]),y++;let S=[],A=0;for(;x<o/2;){let M=a[y],O=a[y+1];if(!O)return!1;let L=a[y-1].angleTo(M)-M.angleTo(O);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),S.push({distance:x,angleDelta:L}),A+=L;x-S[0].distance>h;)A-=S.shift().angleDelta;if(A>p)return!1;y++,x+=M.dist(O)}return!0}function mD(a){let i=0;for(let o=0;o<a.length-1;o++)i+=a[o].dist(a[o+1]);return i}function vD(a,i,o){return a?.6*i*o:0}function gD(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function whe(a,i,o,h,p,g){let y=vD(o,p,g),x=gD(o,h)*g,S=0,A=mD(a)/2;for(let M=0;M<a.length-1;M++){let O=a[M],L=a[M+1],N=O.dist(L);if(S+N>A){let U=(A-S)/N,G=zi.number(O.x,L.x,U),J=zi.number(O.y,L.y,U),ne=new ku(G,J,L.angleTo(O),M);return ne._round(),!y||pD(a,ne,x,y,i)?ne:void 0}S+=N}}function She(a,i,o,h,p,g,y,x,S){let A=vD(h,g,y),M=gD(h,p),O=M*y,L=a[0].x===0||a[0].x===S||a[0].y===0||a[0].y===S;return i-O<i/4&&(i=O+i/4),yD(a,L?i/2*x%i:(M/2+2*g)*y*x%i,i,A,o,O,L,!1,S)}function yD(a,i,o,h,p,g,y,x,S){let A=g/2,M=mD(a),O=0,L=i-o,N=[];for(let U=0;U<a.length-1;U++){let G=a[U],J=a[U+1],ne=G.dist(J),ve=J.angleTo(G);for(;L+o<O+ne;){L+=o;let le=(L-O)/ne,pe=zi.number(G.x,J.x,le),qe=zi.number(G.y,J.y,le);if(pe>=0&&pe<S&&qe>=0&&qe<S&&L-A>=0&&L+A<=M){let Ce=new ku(pe,qe,ve,U);Ce._round(),h&&!pD(a,Ce,g,h,p)||N.push(Ce)}}O+=ne}return x||N.length||y||(N=yD(a,O/2,o,h,p,g,y,!0,S)),N}Xe("Anchor",ku);let Yh=ln;function _D(a,i,o,h){let p=[],g=a.image,y=g.pixelRatio,x=g.paddedRect.w-2*Yh,S=g.paddedRect.h-2*Yh,A={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom},M=g.stretchX||[[0,x]],O=g.stretchY||[[0,S]],L=(Ee,ot)=>Ee+ot[1]-ot[0],N=M.reduce(L,0),U=O.reduce(L,0),G=x-N,J=S-U,ne=0,ve=N,le=0,pe=U,qe=0,Ce=G,Ge=0,ct=J;if(g.content&&h){let Ee=g.content,ot=Ee[2]-Ee[0],rt=Ee[3]-Ee[1];(g.textFitWidth||g.textFitHeight)&&(A=HR(a)),ne=Yy(M,0,Ee[0]),le=Yy(O,0,Ee[1]),ve=Yy(M,Ee[0],Ee[2]),pe=Yy(O,Ee[1],Ee[3]),qe=Ee[0]-ne,Ge=Ee[1]-le,Ce=ot-ve,ct=rt-pe}let $e=A.x1,Be=A.y1,at=A.x2-$e,Ye=A.y2-Be,Ke=(Ee,ot,rt,vt)=>{let rr=Jy(Ee.stretch-ne,ve,at,$e),er=Qy(Ee.fixed-qe,Ce,Ee.stretch,N),Qr=Jy(ot.stretch-le,pe,Ye,Be),ba=Qy(ot.fixed-Ge,ct,ot.stretch,U),mi=Jy(rt.stretch-ne,ve,at,$e),ei=Qy(rt.fixed-qe,Ce,rt.stretch,N),ji=Jy(vt.stretch-le,pe,Ye,Be),Ui=Qy(vt.fixed-Ge,ct,vt.stretch,U),$i=new P(rr,Qr),Ar=new P(mi,Qr),ti=new P(mi,ji),Ii=new P(rr,ji),vi=new P(er/y,ba/y),Vi=new P(ei/y,Ui/y),gi=i*Math.PI/180;if(gi){let $t=Math.sin(gi),ar=Math.cos(gi),fr=[ar,-$t,$t,ar];$i._matMult(fr),Ar._matMult(fr),Ii._matMult(fr),ti._matMult(fr)}let ta=Ee.stretch+Ee.fixed,cn=ot.stretch+ot.fixed;return{tl:$i,tr:Ar,bl:Ii,br:ti,tex:{x:g.paddedRect.x+Yh+ta,y:g.paddedRect.y+Yh+cn,w:rt.stretch+rt.fixed-ta,h:vt.stretch+vt.fixed-cn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:vi,pixelOffsetBR:Vi,minFontScaleX:Ce/y/at,minFontScaleY:ct/y/Ye,isSDF:o}};if(h&&(g.stretchX||g.stretchY)){let Ee=xD(M,G,N),ot=xD(O,J,U);for(let rt=0;rt<Ee.length-1;rt++){let vt=Ee[rt],rr=Ee[rt+1];for(let er=0;er<ot.length-1;er++)p.push(Ke(vt,ot[er],rr,ot[er+1]))}}else p.push(Ke({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:S+1}));return p}function Yy(a,i,o){let h=0;for(let p of a)h+=Math.max(i,Math.min(o,p[1]))-Math.max(i,Math.min(o,p[0]));return h}function xD(a,i,o){let h=[{fixed:-Yh,stretch:0}];for(let[p,g]of a){let y=h[h.length-1];h.push({fixed:p-y.stretch,stretch:y.stretch}),h.push({fixed:p-y.stretch,stretch:y.stretch+(g-p)})}return h.push({fixed:i+Yh,stretch:o}),h}function Jy(a,i,o,h){return a/i*o+h}function Qy(a,i,o,h){return a-i*o/h}class e_{constructor(i,o,h,p,g,y,x,S,A,M){var O;if(this.boxStartIndex=i.length,A){let L=y.top,N=y.bottom,U=y.collisionPadding;U&&(L-=U[1],N+=U[3]);let G=N-L;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{let L=!((O=y.image)===null||O===void 0)&&O.content&&(y.image.textFitWidth||y.image.textFitHeight)?HR(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};L.y1=L.y1*x-S[0],L.y2=L.y2*x+S[2],L.x1=L.x1*x-S[3],L.x2=L.x2*x+S[1];let N=y.collisionPadding;if(N&&(L.x1-=N[0]*x,L.y1-=N[1]*x,L.x2+=N[2]*x,L.y2+=N[3]*x),M){let U=new P(L.x1,L.y1),G=new P(L.x2,L.y1),J=new P(L.x1,L.y2),ne=new P(L.x2,L.y2),ve=M*Math.PI/180;U._rotate(ve),G._rotate(ve),J._rotate(ve),ne._rotate(ve),L.x1=Math.min(U.x,G.x,J.x,ne.x),L.x2=Math.max(U.x,G.x,J.x,ne.x),L.y1=Math.min(U.y,G.y,J.y,ne.y),L.y2=Math.max(U.y,G.y,J.y,ne.y)}i.emplaceBack(o.x,o.y,L.x1,L.y1,L.x2,L.y2,h,p,g)}this.boxEndIndex=i.length}}class qhe{constructor(i=[],o=(h,p)=>h<p?-1:h>p?1:0){if(this.data=i,this.length=this.data.length,this.compare=o,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;let i=this.data[0],o=this.data.pop();return--this.length>0&&(this.data[0]=o,this._down(0)),i}peek(){return this.data[0]}_up(i){let{data:o,compare:h}=this,p=o[i];for(;i>0;){let g=i-1>>1,y=o[g];if(h(p,y)>=0)break;o[i]=y,i=g}o[i]=p}_down(i){let{data:o,compare:h}=this,p=this.length>>1,g=o[i];for(;i<p;){let y=1+(i<<1),x=y+1;if(x<this.length&&h(o[x],o[y])<0&&(y=x),h(o[y],g)>=0)break;o[i]=o[y],i=y}o[i]=g}}function Ihe(a,i=1,o=!1){let h=1/0,p=1/0,g=-1/0,y=-1/0,x=a[0];for(let N=0;N<x.length;N++){let U=x[N];(!N||U.x<h)&&(h=U.x),(!N||U.y<p)&&(p=U.y),(!N||U.x>g)&&(g=U.x),(!N||U.y>y)&&(y=U.y)}let S=Math.min(g-h,y-p),A=S/2,M=new qhe([],Ehe);if(S===0)return new P(h,p);for(let N=h;N<g;N+=S)for(let U=p;U<y;U+=S)M.push(new Jh(N+A,U+A,A,a));let O=function(N){let U=0,G=0,J=0,ne=N[0];for(let ve=0,le=ne.length,pe=le-1;ve<le;pe=ve++){let qe=ne[ve],Ce=ne[pe],Ge=qe.x*Ce.y-Ce.x*qe.y;G+=(qe.x+Ce.x)*Ge,J+=(qe.y+Ce.y)*Ge,U+=3*Ge}return new Jh(G/U,J/U,0,N)}(a),L=M.length;for(;M.length;){let N=M.pop();(N.d>O.d||!O.d)&&(O=N,o&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,L)),N.max-O.d<=i||(A=N.h/2,M.push(new Jh(N.p.x-A,N.p.y-A,A,a)),M.push(new Jh(N.p.x+A,N.p.y-A,A,a)),M.push(new Jh(N.p.x-A,N.p.y+A,A,a)),M.push(new Jh(N.p.x+A,N.p.y+A,A,a)),L+=4)}return o&&(console.log(`num probes: ${L}`),console.log(`best distance: ${O.d}`)),O.p}function Ehe(a,i){return i.max-a.max}function Jh(a,i,o,h){this.p=new P(a,i),this.h=o,this.d=function(p,g){let y=!1,x=1/0;for(let S=0;S<g.length;S++){let A=g[S];for(let M=0,O=A.length,L=O-1;M<O;L=M++){let N=A[M],U=A[L];N.y>p.y!=U.y>p.y&&p.x<(U.x-N.x)*(p.y-N.y)/(U.y-N.y)+N.x&&(y=!y),x=Math.min(x,iR(p,N,U))}}return(y?1:-1)*Math.sqrt(x)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var pi;c.aq=void 0,(pi=c.aq||(c.aq={}))[pi.center=1]="center",pi[pi.left=2]="left",pi[pi.right=3]="right",pi[pi.top=4]="top",pi[pi.bottom=5]="bottom",pi[pi["top-left"]=6]="top-left",pi[pi["top-right"]=7]="top-right",pi[pi["bottom-left"]=8]="bottom-left",pi[pi["bottom-right"]=9]="bottom-right";let Ou=7,lS=Number.POSITIVE_INFINITY;function bD(a,i){return i[1]!==lS?function(o,h,p){let g=0,y=0;switch(h=Math.abs(h),p=Math.abs(p),o){case"top-right":case"top-left":case"top":y=p-Ou;break;case"bottom-right":case"bottom-left":case"bottom":y=-p+Ou;}switch(o){case"top-right":case"bottom-right":case"right":g=-h;break;case"top-left":case"bottom-left":case"left":g=h;}return[g,y]}(a,i[0],i[1]):function(o,h){let p=0,g=0;h<0&&(h=0);let y=h/Math.SQRT2;switch(o){case"top-right":case"top-left":g=y-Ou;break;case"bottom-right":case"bottom-left":g=-y+Ou;break;case"bottom":g=-h+Ou;break;case"top":g=h-Ou;}switch(o){case"top-right":case"bottom-right":p=-y;break;case"top-left":case"bottom-left":p=y;break;case"left":p=h;break;case"right":p=-h;}return[p,g]}(a,i[0])}function wD(a,i,o){var h;let p=a.layout,g=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},o);if(g){let x=g.values,S=[];for(let A=0;A<x.length;A+=2){let M=S[A]=x[A],O=x[A+1].map(L=>L*Hr);M.startsWith("top")?O[1]-=Ou:M.startsWith("bottom")&&(O[1]+=Ou),S[A+1]=O}return new xn(S)}let y=p.get("text-variable-anchor");if(y){let x;x=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(i,{},o)*Hr,lS]:p.get("text-offset").evaluate(i,{},o).map(A=>A*Hr);let S=[];for(let A of y)S.push(A,bD(A,x));return new xn(S)}return null}function cS(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function The(a,i,o,h,p,g,y,x,S,A,M){let O=g.textMaxSize.evaluate(i,{});O===void 0&&(O=y);let L=a.layers[0].layout,N=L.get("icon-offset").evaluate(i,{},M),U=qD(o.horizontal),G=y/24,J=a.tilePixelRatio*G,ne=a.tilePixelRatio*O/24,ve=a.tilePixelRatio*x,le=a.tilePixelRatio*L.get("symbol-spacing"),pe=L.get("text-padding")*a.tilePixelRatio,qe=function(Ee,ot,rt,vt=1){let rr=Ee.get("icon-padding").evaluate(ot,{},rt),er=rr&&rr.values;return[er[0]*vt,er[1]*vt,er[2]*vt,er[3]*vt]}(L,i,M,a.tilePixelRatio),Ce=L.get("text-max-angle")/180*Math.PI,Ge=L.get("text-rotation-alignment")!=="viewport"&&L.get("symbol-placement")!=="point",ct=L.get("icon-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",$e=L.get("symbol-placement"),Be=le/2,at=L.get("icon-text-fit"),Ye;h&&at!=="none"&&(a.allowVerticalPlacement&&o.vertical&&(Ye=WR(h,o.vertical,at,L.get("icon-text-fit-padding"),N,G)),U&&(h=WR(h,U,at,L.get("icon-text-fit-padding"),N,G)));let Ke=(Ee,ot)=>{ot.x<0||ot.x>=Fr||ot.y<0||ot.y>=Fr||function(rt,vt,rr,er,Qr,ba,mi,ei,ji,Ui,$i,Ar,ti,Ii,vi,Vi,gi,ta,cn,$t,ar,fr,Tn,br,Qh){let Eo=rt.addToLineVertexArray(vt,rr),To,wa,ra,ai,gs=0,tm=0,AD=0,PD=0,yS=-1,_S=-1,ys={},CD=Nh("");if(rt.allowVerticalPlacement&&er.vertical){let Ei=ei.layout.get("text-rotate").evaluate(ar,{},br)+90;ra=new e_(ji,vt,Ui,$i,Ar,er.vertical,ti,Ii,vi,Ei),mi&&(ai=new e_(ji,vt,Ui,$i,Ar,mi,gi,ta,vi,Ei))}if(Qr){let Ei=ei.layout.get("icon-rotate").evaluate(ar,{}),ia=ei.layout.get("icon-text-fit")!=="none",ac=_D(Qr,Ei,Tn,ia),to=mi?_D(mi,Ei,Tn,ia):void 0;wa=new e_(ji,vt,Ui,$i,Ar,Qr,gi,ta,!1,Ei),gs=4*ac.length;let oc=rt.iconSizeData,Ao=null;oc.kind==="source"?(Ao=[Io*ei.layout.get("icon-size").evaluate(ar,{})],Ao[0]>Cu&&Yr(`${rt.layerIds[0]}: Value for "icon-size" is >= ${Xp}. Reduce your "icon-size".`)):oc.kind==="composite"&&(Ao=[Io*fr.compositeIconSizes[0].evaluate(ar,{},br),Io*fr.compositeIconSizes[1].evaluate(ar,{},br)],(Ao[0]>Cu||Ao[1]>Cu)&&Yr(`${rt.layerIds[0]}: Value for "icon-size" is >= ${Xp}. Reduce your "icon-size".`)),rt.addSymbols(rt.icon,ac,Ao,$t,cn,ar,c.ah.none,vt,Eo.lineStartIndex,Eo.lineLength,-1,br),yS=rt.icon.placedSymbolArray.length-1,to&&(tm=4*to.length,rt.addSymbols(rt.icon,to,Ao,$t,cn,ar,c.ah.vertical,vt,Eo.lineStartIndex,Eo.lineLength,-1,br),_S=rt.icon.placedSymbolArray.length-1)}let MD=Object.keys(er.horizontal);for(let Ei of MD){let ia=er.horizontal[Ei];if(!To){CD=Nh(ia.text);let to=ei.layout.get("text-rotate").evaluate(ar,{},br);To=new e_(ji,vt,Ui,$i,Ar,ia,ti,Ii,vi,to)}let ac=ia.positionedLines.length===1;if(AD+=SD(rt,vt,ia,ba,ei,vi,ar,Vi,Eo,er.vertical?c.ah.horizontal:c.ah.horizontalOnly,ac?MD:[Ei],ys,yS,fr,br),ac)break}er.vertical&&(PD+=SD(rt,vt,er.vertical,ba,ei,vi,ar,Vi,Eo,c.ah.vertical,["vertical"],ys,_S,fr,br));let Che=To?To.boxStartIndex:rt.collisionBoxArray.length,Mhe=To?To.boxEndIndex:rt.collisionBoxArray.length,khe=ra?ra.boxStartIndex:rt.collisionBoxArray.length,Ohe=ra?ra.boxEndIndex:rt.collisionBoxArray.length,Rhe=wa?wa.boxStartIndex:rt.collisionBoxArray.length,Dhe=wa?wa.boxEndIndex:rt.collisionBoxArray.length,Lhe=ai?ai.boxStartIndex:rt.collisionBoxArray.length,zhe=ai?ai.boxEndIndex:rt.collisionBoxArray.length,eo=-1,r_=(Ei,ia)=>Ei&&Ei.circleDiameter?Math.max(Ei.circleDiameter,ia):ia;eo=r_(To,eo),eo=r_(ra,eo),eo=r_(wa,eo),eo=r_(ai,eo);let kD=eo>-1?1:0;kD&&(eo*=Qh/Hr),rt.glyphOffsetArray.length>=Xh.MAX_GLYPHS&&Yr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ar.sortKey!==void 0&&rt.addToSortKeyRanges(rt.symbolInstances.length,ar.sortKey);let Fhe=wD(ei,ar,br),[Nhe,Bhe]=function(Ei,ia){let ac=Ei.length,to=ia==null?void 0:ia.values;if((to==null?void 0:to.length)>0)for(let oc=0;oc<to.length;oc+=2){let Ao=to[oc+1];Ei.emplaceBack(c.aq[to[oc]],Ao[0],Ao[1])}return[ac,Ei.length]}(rt.textAnchorOffsets,Fhe);rt.symbolInstances.emplaceBack(vt.x,vt.y,ys.right>=0?ys.right:-1,ys.center>=0?ys.center:-1,ys.left>=0?ys.left:-1,ys.vertical||-1,yS,_S,CD,Che,Mhe,khe,Ohe,Rhe,Dhe,Lhe,zhe,Ui,AD,PD,gs,tm,kD,0,ti,eo,Nhe,Bhe)}(a,ot,Ee,o,h,p,Ye,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,J,[pe,pe,pe,pe],Ge,S,ve,qe,ct,N,i,g,A,M,y)};if($e==="line")for(let Ee of dD(i.geometry,0,0,Fr,Fr)){let ot=She(Ee,le,Ce,o.vertical||U,h,24,ne,a.overscaling,Fr);for(let rt of ot)U&&Ahe(a,U.text,Be,rt)||Ke(Ee,rt)}else if($e==="line-center"){for(let Ee of i.geometry)if(Ee.length>1){let ot=whe(Ee,Ce,o.vertical||U,h,24,ne);ot&&Ke(Ee,ot)}}else if(i.type==="Polygon")for(let Ee of mh(i.geometry,0)){let ot=Ihe(Ee,16);Ke(Ee[0],new ku(ot.x,ot.y,0))}else if(i.type==="LineString")for(let Ee of i.geometry)Ke(Ee,new ku(Ee[0].x,Ee[0].y,0));else if(i.type==="Point")for(let Ee of i.geometry)for(let ot of Ee)Ke([ot],new ku(ot.x,ot.y,0))}function SD(a,i,o,h,p,g,y,x,S,A,M,O,L,N,U){let G=function(ve,le,pe,qe,Ce,Ge,ct,$e){let Be=qe.layout.get("text-rotate").evaluate(Ge,{})*Math.PI/180,at=[];for(let Ye of le.positionedLines)for(let Ke of Ye.positionedGlyphs){if(!Ke.rect)continue;let Ee=Ke.rect||{},ot=NR+1,rt=!0,vt=1,rr=0,er=(Ce||$e)&&Ke.vertical,Qr=Ke.metrics.advance*Ke.scale/2;if($e&&le.verticalizable&&(rr=Ye.lineOffset/2-(Ke.imageName?-(Hr-Ke.metrics.width*Ke.scale)/2:(Ke.scale-1)*Hr)),Ke.imageName){let $t=ct[Ke.imageName];rt=$t.sdf,vt=$t.pixelRatio,ot=ln/vt}let ba=Ce?[Ke.x+Qr,Ke.y]:[0,0],mi=Ce?[0,0]:[Ke.x+Qr+pe[0],Ke.y+pe[1]-rr],ei=[0,0];er&&(ei=mi,mi=[0,0]);let ji=Ke.metrics.isDoubleResolution?2:1,Ui=(Ke.metrics.left-ot)*Ke.scale-Qr+mi[0],$i=(-Ke.metrics.top-ot)*Ke.scale+mi[1],Ar=Ui+Ee.w/ji*Ke.scale/vt,ti=$i+Ee.h/ji*Ke.scale/vt,Ii=new P(Ui,$i),vi=new P(Ar,$i),Vi=new P(Ui,ti),gi=new P(Ar,ti);if(er){let $t=new P(-Qr,Qr-Zp),ar=-Math.PI/2,fr=Hr/2-Qr,Tn=new P(5-Zp-fr,-(Ke.imageName?fr:0)),br=new P(...ei);Ii._rotateAround(ar,$t)._add(Tn)._add(br),vi._rotateAround(ar,$t)._add(Tn)._add(br),Vi._rotateAround(ar,$t)._add(Tn)._add(br),gi._rotateAround(ar,$t)._add(Tn)._add(br)}if(Be){let $t=Math.sin(Be),ar=Math.cos(Be),fr=[ar,-$t,$t,ar];Ii._matMult(fr),vi._matMult(fr),Vi._matMult(fr),gi._matMult(fr)}let ta=new P(0,0),cn=new P(0,0);at.push({tl:Ii,tr:vi,bl:Vi,br:gi,tex:Ee,writingMode:le.writingMode,glyphOffset:ba,sectionIndex:Ke.sectionIndex,isSDF:rt,pixelOffsetTL:ta,pixelOffsetBR:cn,minFontScaleX:0,minFontScaleY:0})}return at}(0,o,x,p,g,y,h,a.allowVerticalPlacement),J=a.textSizeData,ne=null;J.kind==="source"?(ne=[Io*p.layout.get("text-size").evaluate(y,{})],ne[0]>Cu&&Yr(`${a.layerIds[0]}: Value for "text-size" is >= ${Xp}. Reduce your "text-size".`)):J.kind==="composite"&&(ne=[Io*N.compositeTextSizes[0].evaluate(y,{},U),Io*N.compositeTextSizes[1].evaluate(y,{},U)],(ne[0]>Cu||ne[1]>Cu)&&Yr(`${a.layerIds[0]}: Value for "text-size" is >= ${Xp}. Reduce your "text-size".`)),a.addSymbols(a.text,G,ne,x,g,y,A,i,S.lineStartIndex,S.lineLength,L,U);for(let ve of M)O[ve]=a.text.placedSymbolArray.length-1;return 4*G.length}function qD(a){for(let i in a)return a[i];return null}function Ahe(a,i,o,h){let p=a.compareText;if(i in p){let g=p[i];for(let y=g.length-1;y>=0;y--)if(h.dist(g[y])<o)return!0}else p[i]=[];return p[i].push(h),!1}let ID=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class hS{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[o,h]=new Uint8Array(i,0,2);if(o!==219)throw new Error("Data does not appear to be in a KDBush format.");let p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);let g=ID[15&h];if(!g)throw new Error("Unrecognized array type.");let[y]=new Uint16Array(i,2,1),[x]=new Uint32Array(i,4,1);return new hS(x,y,g,i)}constructor(i,o=64,h=Float64Array,p){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+o,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;let g=ID.indexOf(this.ArrayType),y=2*i*this.ArrayType.BYTES_PER_ELEMENT,x=i*this.IndexArrayType.BYTES_PER_ELEMENT,S=(8-x%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+x+S,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+S),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+x+S,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=o,new Uint32Array(this.data,4,1)[0]=i)}add(i,o){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=o,h}finish(){let i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return fS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,o,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:g,coords:y,nodeSize:x}=this,S=[0,g.length-1,0],A=[];for(;S.length;){let M=S.pop()||0,O=S.pop()||0,L=S.pop()||0;if(O-L<=x){for(let J=L;J<=O;J++){let ne=y[2*J],ve=y[2*J+1];ne>=i&&ne<=h&&ve>=o&&ve<=p&&A.push(g[J])}continue}let N=L+O>>1,U=y[2*N],G=y[2*N+1];U>=i&&U<=h&&G>=o&&G<=p&&A.push(g[N]),(M===0?i<=U:o<=G)&&(S.push(L),S.push(N-1),S.push(1-M)),(M===0?h>=U:p>=G)&&(S.push(N+1),S.push(O),S.push(1-M))}return A}within(i,o,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:p,coords:g,nodeSize:y}=this,x=[0,p.length-1,0],S=[],A=h*h;for(;x.length;){let M=x.pop()||0,O=x.pop()||0,L=x.pop()||0;if(O-L<=y){for(let J=L;J<=O;J++)TD(g[2*J],g[2*J+1],i,o)<=A&&S.push(p[J]);continue}let N=L+O>>1,U=g[2*N],G=g[2*N+1];TD(U,G,i,o)<=A&&S.push(p[N]),(M===0?i-h<=U:o-h<=G)&&(x.push(L),x.push(N-1),x.push(1-M)),(M===0?i+h>=U:o+h>=G)&&(x.push(N+1),x.push(O),x.push(1-M))}return S}}function fS(a,i,o,h,p,g){if(p-h<=o)return;let y=h+p>>1;ED(a,i,y,h,p,g),fS(a,i,o,h,y-1,1-g),fS(a,i,o,y+1,p,1-g)}function ED(a,i,o,h,p,g){for(;p>h;){if(p-h>600){let A=p-h+1,M=o-h+1,O=Math.log(A),L=.5*Math.exp(2*O/3),N=.5*Math.sqrt(O*L*(A-L)/A)*(M-A/2<0?-1:1);ED(a,i,o,Math.max(h,Math.floor(o-M*L/A+N)),Math.min(p,Math.floor(o+(A-M)*L/A+N)),g)}let y=i[2*o+g],x=h,S=p;for(Qp(a,i,h,o),i[2*p+g]>y&&Qp(a,i,h,p);x<S;){for(Qp(a,i,x,S),x++,S--;i[2*x+g]<y;)x++;for(;i[2*S+g]>y;)S--}i[2*h+g]===y?Qp(a,i,h,S):(S++,Qp(a,i,S,p)),S<=o&&(h=S+1),o<=S&&(p=S-1)}}function Qp(a,i,o,h){dS(a,o,h),dS(i,2*o,2*h),dS(i,2*o+1,2*h+1)}function dS(a,i,o){let h=a[i];a[i]=a[o],a[o]=h}function TD(a,i,o,h){let p=a-o,g=i-h;return p*p+g*g}var pS;c.bg=void 0,(pS=c.bg||(c.bg={})).create="create",pS.load="load",pS.fullLoad="fullLoad";let t_=null,em=[],mS=1e3/60,vS="loadTime",gS="fullLoadTime",Phe={mark(a){performance.mark(a)},frame(a){let i=a;t_!=null&&em.push(i-t_),t_=i},clearMetrics(){t_=null,em=[],performance.clearMeasures(vS),performance.clearMeasures(gS);for(let a in c.bg)performance.clearMarks(c.bg[a])},getPerformanceMetrics(){performance.measure(vS,c.bg.create,c.bg.load),performance.measure(gS,c.bg.create,c.bg.fullLoad);let a=performance.getEntriesByName(vS)[0].duration,i=performance.getEntriesByName(gS)[0].duration,o=em.length,h=1/(em.reduce((g,y)=>g+y,0)/o/1e3),p=em.filter(g=>g>mS).reduce((g,y)=>g+(y-mS)/mS,0);return{loadTime:a,fullLoadTime:i,fps:h,percentDroppedFrames:p/(o+p)*100,totalFrames:o}}};c.$=class extends R{},c.A=Vh,c.B=Iw,c.C=function(a){if(Ks==null){let i=a.navigator?a.navigator.userAgent:null;Ks=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Ks},c.D=et,c.E=Js,c.F=class{constructor(a,i){this.target=a,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new xhe(()=>this.process()),this.subscription=function(o,h,p,g){return o.addEventListener(h,p,!1),{unsubscribe:()=>{o.removeEventListener(h,p,!1)}}}(this.target,"message",o=>this.receive(o)),this.globalScope=Ha(self)?a:window}registerMessageHandler(a,i){this.messageHandlers[a]=i}sendAsync(a,i){return new Promise((o,h)=>{let p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:o,reject:h},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];let x={id:p,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(x)},{once:!0});let g=[],y=Object.assign(Object.assign({},a),{id:p,sourceMapId:this.mapId,origin:location.origin,data:yu(a.data,g)});this.target.postMessage(y,{transfer:g})})}receive(a){let i=a.data,o=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[o];let h=this.abortControllers[o];return delete this.abortControllers[o],void(h&&h.abort())}if(Ha(self)||i.mustQueue)return this.tasks[o]=i,this.taskQueue.push(o),void this.invoker.trigger();this.processTask(o,i)}}process(){if(this.taskQueue.length===0)return;let a=this.taskQueue.shift(),i=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(a,i)}processTask(a,i){return s(this,void 0,void 0,function*(){if(i.type==="<response>"){let p=this.resolveRejects[a];return delete this.resolveRejects[a],p?void(i.error?p.reject(_u(i.error)):p.resolve(_u(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let o=_u(i.data),h=new AbortController;this.abortControllers[a]=h;try{let p=yield this.messageHandlers[i.type](i.sourceMapId,o,h);this.completeTask(a,null,p)}catch(p){this.completeTask(a,p)}})}completeTask(a,i,o){let h=[];delete this.abortControllers[a];let p={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?yu(i):null,data:yu(o,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.G=Ys,c.H=function(){var a=new Vh(16);return Vh!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},c.I=Jw,c.J=function(a,i,o){var h,p,g,y,x,S,A,M,O,L,N,U,G=o[0],J=o[1],ne=o[2];return i===a?(a[12]=i[0]*G+i[4]*J+i[8]*ne+i[12],a[13]=i[1]*G+i[5]*J+i[9]*ne+i[13],a[14]=i[2]*G+i[6]*J+i[10]*ne+i[14],a[15]=i[3]*G+i[7]*J+i[11]*ne+i[15]):(p=i[1],g=i[2],y=i[3],x=i[4],S=i[5],A=i[6],M=i[7],O=i[8],L=i[9],N=i[10],U=i[11],a[0]=h=i[0],a[1]=p,a[2]=g,a[3]=y,a[4]=x,a[5]=S,a[6]=A,a[7]=M,a[8]=O,a[9]=L,a[10]=N,a[11]=U,a[12]=h*G+x*J+O*ne+i[12],a[13]=p*G+S*J+L*ne+i[13],a[14]=g*G+A*J+N*ne+i[14],a[15]=y*G+M*J+U*ne+i[15]),a},c.K=function(a,i,o){var h=o[0],p=o[1],g=o[2];return a[0]=i[0]*h,a[1]=i[1]*h,a[2]=i[2]*h,a[3]=i[3]*h,a[4]=i[4]*p,a[5]=i[5]*p,a[6]=i[6]*p,a[7]=i[7]*p,a[8]=i[8]*g,a[9]=i[9]*g,a[10]=i[10]*g,a[11]=i[11]*g,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a},c.L=sR,c.M=function(a,i){let o={};for(let h=0;h<i.length;h++){let p=i[h];p in a&&(o[p]=a[p])}return o},c.N=Mu,c.O=rD,c.P=P,c.Q=iD,c.R=Qn,c.S=ea,c.T=Rh,c.U=ye,c.V=X,c.W=Jo,c.X=Fr,c.Y=b,c.Z=Yp,c._=s,c.a=mo,c.a$=function(a,i){var o=a[0],h=a[1],p=a[2],g=a[3],y=a[4],x=a[5],S=a[6],A=a[7],M=a[8],O=a[9],L=a[10],N=a[11],U=a[12],G=a[13],J=a[14],ne=a[15],ve=i[0],le=i[1],pe=i[2],qe=i[3],Ce=i[4],Ge=i[5],ct=i[6],$e=i[7],Be=i[8],at=i[9],Ye=i[10],Ke=i[11],Ee=i[12],ot=i[13],rt=i[14],vt=i[15];return Math.abs(o-ve)<=Bi*Math.max(1,Math.abs(o),Math.abs(ve))&&Math.abs(h-le)<=Bi*Math.max(1,Math.abs(h),Math.abs(le))&&Math.abs(p-pe)<=Bi*Math.max(1,Math.abs(p),Math.abs(pe))&&Math.abs(g-qe)<=Bi*Math.max(1,Math.abs(g),Math.abs(qe))&&Math.abs(y-Ce)<=Bi*Math.max(1,Math.abs(y),Math.abs(Ce))&&Math.abs(x-Ge)<=Bi*Math.max(1,Math.abs(x),Math.abs(Ge))&&Math.abs(S-ct)<=Bi*Math.max(1,Math.abs(S),Math.abs(ct))&&Math.abs(A-$e)<=Bi*Math.max(1,Math.abs(A),Math.abs($e))&&Math.abs(M-Be)<=Bi*Math.max(1,Math.abs(M),Math.abs(Be))&&Math.abs(O-at)<=Bi*Math.max(1,Math.abs(O),Math.abs(at))&&Math.abs(L-Ye)<=Bi*Math.max(1,Math.abs(L),Math.abs(Ye))&&Math.abs(N-Ke)<=Bi*Math.max(1,Math.abs(N),Math.abs(Ke))&&Math.abs(U-Ee)<=Bi*Math.max(1,Math.abs(U),Math.abs(Ee))&&Math.abs(G-ot)<=Bi*Math.max(1,Math.abs(G),Math.abs(ot))&&Math.abs(J-rt)<=Bi*Math.max(1,Math.abs(J),Math.abs(rt))&&Math.abs(ne-vt)<=Bi*Math.max(1,Math.abs(ne),Math.abs(vt))},c.a0=Ft,c.a1=uS,c.a2=ke,c.a3=a=>{let i=window.document.createElement("video");return i.muted=!0,new Promise(o=>{i.onloadstart=()=>{o(i)};for(let h of a){let p=window.document.createElement("source");es(h)||(i.crossOrigin="Anonymous"),p.src=h,i.appendChild(p)}})},c.a4=function(){return Le++},c.a5=Ve,c.a6=Xh,c.a7=gp,c.a8=ic,c.a9=lD,c.aA=function(a){if(a.type==="custom")return new _he(a);switch(a.type){case"background":return new vhe(a);case"circle":return new ice(a);case"fill":return new xce(a);case"fill-extrusion":return new Dce(a);case"heatmap":return new ace(a);case"hillshade":return new sce(a);case"line":return new $ce(a);case"raster":return new yhe(a);case"symbol":return new Xy(a);}},c.aB=Je,c.aC=function(a,i){if(!a)return[{command:"setStyle",args:[i]}];let o=[];try{if(!Vt(a.version,i.version))return[{command:"setStyle",args:[i]}];Vt(a.center,i.center)||o.push({command:"setCenter",args:[i.center]}),Vt(a.zoom,i.zoom)||o.push({command:"setZoom",args:[i.zoom]}),Vt(a.bearing,i.bearing)||o.push({command:"setBearing",args:[i.bearing]}),Vt(a.pitch,i.pitch)||o.push({command:"setPitch",args:[i.pitch]}),Vt(a.sprite,i.sprite)||o.push({command:"setSprite",args:[i.sprite]}),Vt(a.glyphs,i.glyphs)||o.push({command:"setGlyphs",args:[i.glyphs]}),Vt(a.transition,i.transition)||o.push({command:"setTransition",args:[i.transition]}),Vt(a.light,i.light)||o.push({command:"setLight",args:[i.light]}),Vt(a.terrain,i.terrain)||o.push({command:"setTerrain",args:[i.terrain]}),Vt(a.sky,i.sky)||o.push({command:"setSky",args:[i.sky]}),Vt(a.projection,i.projection)||o.push({command:"setProjection",args:[i.projection]});let h={},p=[];(function(y,x,S,A){let M;for(M in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,M)&&(Object.prototype.hasOwnProperty.call(x,M)||yo(M,S,A));for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(y,M)?Vt(y[M],x[M])||(y[M].type==="geojson"&&x[M].type==="geojson"&&Qs(y,x,M)?_r(S,{command:"setGeoJSONSourceData",args:[M,x[M].data]}):Ka(M,x,S,A)):kl(M,x,S))})(a.sources,i.sources,p,h);let g=[];a.layers&&a.layers.forEach(y=>{"source"in y&&h[y.source]?o.push({command:"removeLayer",args:[y.id]}):g.push(y)}),o=o.concat(p),function(y,x,S){x=x||[];let A=(y=y||[]).map(Ol),M=x.map(Ol),O=y.reduce(Rl,{}),L=x.reduce(Rl,{}),N=A.slice(),U=Object.create(null),G,J,ne,ve,le;for(let pe=0,qe=0;pe<A.length;pe++)G=A[pe],Object.prototype.hasOwnProperty.call(L,G)?qe++:(_r(S,{command:"removeLayer",args:[G]}),N.splice(N.indexOf(G,qe),1));for(let pe=0,qe=0;pe<M.length;pe++)G=M[M.length-1-pe],N[N.length-1-pe]!==G&&(Object.prototype.hasOwnProperty.call(O,G)?(_r(S,{command:"removeLayer",args:[G]}),N.splice(N.lastIndexOf(G,N.length-qe),1)):qe++,ve=N[N.length-pe],_r(S,{command:"addLayer",args:[L[G],ve]}),N.splice(N.length-pe,0,G),U[G]=!0);for(let pe=0;pe<M.length;pe++)if(G=M[pe],J=O[G],ne=L[G],!U[G]&&!Vt(J,ne))if(Vt(J.source,ne.source)&&Vt(J["source-layer"],ne["source-layer"])&&Vt(J.type,ne.type)){for(le in _n(J.layout,ne.layout,S,G,null,"setLayoutProperty"),_n(J.paint,ne.paint,S,G,null,"setPaintProperty"),Vt(J.filter,ne.filter)||_r(S,{command:"setFilter",args:[G,ne.filter]}),Vt(J.minzoom,ne.minzoom)&&Vt(J.maxzoom,ne.maxzoom)||_r(S,{command:"setLayerZoomRange",args:[G,ne.minzoom,ne.maxzoom]}),J)Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?_n(J[le],ne[le],S,G,le.slice(6),"setPaintProperty"):Vt(J[le],ne[le])||_r(S,{command:"setLayerProperty",args:[G,le,ne[le]]}));for(le in ne)Object.prototype.hasOwnProperty.call(ne,le)&&!Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?_n(J[le],ne[le],S,G,le.slice(6),"setPaintProperty"):Vt(J[le],ne[le])||_r(S,{command:"setLayerProperty",args:[G,le,ne[le]]}))}else _r(S,{command:"removeLayer",args:[G]}),ve=N[N.lastIndexOf(G)+1],_r(S,{command:"addLayer",args:[ne,ve]})}(g,i.layers,o)}catch(h){console.warn("Unable to compute style diff:",h),o=[{command:"setStyle",args:[i]}]}return o},c.aD=function(a){let i=[],o=a.id;return o===void 0&&i.push({message:`layers.${o}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${o}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${o}: property "renderingMode" must be either "2d" or "3d"`}),i},c.aE=function a(i,o){if(Array.isArray(i)){if(!Array.isArray(o)||i.length!==o.length)return!1;for(let h=0;h<i.length;h++)if(!a(i[h],o[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&o!==null){if(typeof o!="object"||Object.keys(i).length!==Object.keys(o).length)return!1;for(let h in i)if(!a(i[h],o[h]))return!1;return!0}return i===o},c.aF=nt,c.aG=gt,c.aH=class extends ec{constructor(a,i){super(a,i),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},c.aI=zy,c.aJ=class extends ec{constructor(a,i){super(a,i),this.current=Kle}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let i=1;i<16;i++)if(a[i]!==this.current[i]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},c.aK=XO,c.aL=YO,c.aM=Xt,c.aN=class extends ec{constructor(a,i){super(a,i),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},c.aO=class extends ec{constructor(a,i){super(a,i),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},c.aP=function(a,i,o,h,p,g,y){var x=1/(i-o),S=1/(h-p),A=1/(g-y);return a[0]=-2*x,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*S,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*A,a[11]=0,a[12]=(i+o)*x,a[13]=(p+h)*S,a[14]=(y+g)*A,a[15]=1,a},c.aQ=rce,c.aR=class extends he{},c.aS=Wce,c.aT=class extends ge{},c.aU=Bw,c.aV=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},c.aW=fR,c.aX=fi,c.aY=Jn,c.aZ=class extends tt{},c.a_=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]&&a[4]===i[4]&&a[5]===i[5]&&a[6]===i[6]&&a[7]===i[7]&&a[8]===i[8]&&a[9]===i[9]&&a[10]===i[10]&&a[11]===i[11]&&a[12]===i[12]&&a[13]===i[13]&&a[14]===i[14]&&a[15]===i[15]},c.aa=function(a){let i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(o,h,p,g)=>{let y=p||g;return i[h]=!y||y.toLowerCase(),""}),i["max-age"]){let o=parseInt(i["max-age"],10);isNaN(o)?delete i["max-age"]:i["max-age"]=o}return i},c.ab=function(a,i){let o=[];for(let h in a)h in i||o.push(h);return o},c.ac=_e,c.ad=function(a,i,o){var h=Math.sin(o),p=Math.cos(o),g=i[0],y=i[1],x=i[2],S=i[3],A=i[4],M=i[5],O=i[6],L=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=g*p+A*h,a[1]=y*p+M*h,a[2]=x*p+O*h,a[3]=S*p+L*h,a[4]=A*p-g*h,a[5]=M*p-y*h,a[6]=O*p-x*h,a[7]=L*p-S*h,a},c.ae=function(a){var i=new Vh(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},c.af=jy,c.ag=function(a,i){let o=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){let{interpolationType:p,minZoom:g,maxZoom:y}=a,x=p?_e(Fi.interpolationFactor(p,i,g,y),0,1):0;a.kind==="camera"?h=zi.number(a.minSize,a.maxSize,x):o=x}return{uSizeT:o,uSize:h}},c.ai=function(a,{uSize:i,uSizeT:o},{lowerSize:h,upperSize:p}){return a.kind==="source"?h/Io:a.kind==="composite"?zi.number(h/Io,p/Io,o):i},c.aj=rS,c.ak=function(a,i,o,h){let p=i.y-a.y,g=i.x-a.x,y=h.y-o.y,x=h.x-o.x,S=y*g-x*p;if(S===0)return null;let A=(x*(a.y-o.y)-y*(a.x-o.x))/S;return new P(a.x+A*g,a.y+A*p)},c.al=dD,c.am=tR,c.an=zw,c.ao=function(a){let i=1/0,o=1/0,h=-1/0,p=-1/0;for(let g of a)i=Math.min(i,g.x),o=Math.min(o,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return[i,o,h,p]},c.ap=Hr,c.ar=tS,c.as=function(a,i){var o=i[0],h=i[1],p=i[2],g=i[3],y=i[4],x=i[5],S=i[6],A=i[7],M=i[8],O=i[9],L=i[10],N=i[11],U=i[12],G=i[13],J=i[14],ne=i[15],ve=o*x-h*y,le=o*S-p*y,pe=o*A-g*y,qe=h*S-p*x,Ce=h*A-g*x,Ge=p*A-g*S,ct=M*G-O*U,$e=M*J-L*U,Be=M*ne-N*U,at=O*J-L*G,Ye=O*ne-N*G,Ke=L*ne-N*J,Ee=ve*Ke-le*Ye+pe*at+qe*Be-Ce*$e+Ge*ct;return Ee?(a[0]=(x*Ke-S*Ye+A*at)*(Ee=1/Ee),a[1]=(p*Ye-h*Ke-g*at)*Ee,a[2]=(G*Ge-J*Ce+ne*qe)*Ee,a[3]=(L*Ce-O*Ge-N*qe)*Ee,a[4]=(S*Be-y*Ke-A*$e)*Ee,a[5]=(o*Ke-p*Be+g*$e)*Ee,a[6]=(J*pe-U*Ge-ne*le)*Ee,a[7]=(M*Ge-L*pe+N*le)*Ee,a[8]=(y*Ye-x*Be+A*ct)*Ee,a[9]=(h*Be-o*Ye-g*ct)*Ee,a[10]=(U*Ce-G*pe+ne*ve)*Ee,a[11]=(O*pe-M*Ce-N*ve)*Ee,a[12]=(x*$e-y*at-S*ct)*Ee,a[13]=(o*at-h*$e+p*ct)*Ee,a[14]=(G*le-U*qe-J*ve)*Ee,a[15]=(M*qe-O*le+L*ve)*Ee,a):null},c.at=cS,c.au=eS,c.av=hS,c.aw=function(){let a={},i=Se.$version;for(let o in Se.$root){let h=Se.$root[o];if(h.required){let p=null;p=o==="version"?i:h.type==="array"?[]:{},p!=null&&(a[o]=p)}}return a},c.ax=Mp,c.ay=Vn,c.az=function(a){a=a.slice();let i=Object.create(null);for(let o=0;o<a.length;o++)i[a[o].id]=a[o];for(let o=0;o<a.length;o++)"ref"in a[o]&&(a[o]=Ml(a[o],i[a[o].ref]));return a},c.b=ha,c.b0=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a},c.b1=function(a,i,o){return a[0]=i[0]*o[0],a[1]=i[1]*o[1],a[2]=i[2]*o[2],a[3]=i[3]*o[3],a},c.b2=function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]},c.b3=be,c.b4=oD,c.b5=nD,c.b6=function(a,i,o,h,p){var g,y=1/Math.tan(i/2);return a[0]=y/o,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=y,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,p!=null&&p!==1/0?(a[10]=(p+h)*(g=1/(h-p)),a[14]=2*p*h*g):(a[10]=-1,a[14]=-2*h),a},c.b7=function(a,i,o){var h=Math.sin(o),p=Math.cos(o),g=i[4],y=i[5],x=i[6],S=i[7],A=i[8],M=i[9],O=i[10],L=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=g*p+A*h,a[5]=y*p+M*h,a[6]=x*p+O*h,a[7]=S*p+L*h,a[8]=A*p-g*h,a[9]=M*p-y*h,a[10]=O*p-x*h,a[11]=L*p-S*h,a},c.b8=K,c.b9=ie,c.bA=kR,c.bB=function(a){return a.message===$n},c.bC=hu,c.bD=sn,c.ba=function(a){return a*Math.PI/180},c.bb=function(a,i){let{x:o,y:h}=Yp.fromLngLat(i);return!(a<0||a>25||h<0||h>=1||o<0||o>=1)},c.bc=function(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},c.bd=class extends k{},c.be=oS,c.bf=Phe,c.bh=tn,c.bi=function(a,i){mo.REGISTERED_PROTOCOLS[a]=i},c.bj=function(a){delete mo.REGISTERED_PROTOCOLS[a]},c.bk=function(a,i){let o={};for(let p=0;p<a.length;p++){let g=i&&i[a[p].id]||Iy(a[p]);i&&(i[a[p].id]=g);let y=o[g];y||(y=o[g]=[]),y.push(a[p])}let h=[];for(let p in o)h.push(o[p]);return h},c.bl=Xe,c.bm=uD,c.bn=cD,c.bo=jR,c.bp=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=Fr/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;let i=a.bucket.layers[0],o=i.layout,h=i._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new ur(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new ur(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new ur(18))};if(a.bucket.textSizeData.kind==="composite"){let{minZoom:A,maxZoom:M}=a.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ur(A),a.canonical),h["text-size"].possiblyEvaluate(new ur(M),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){let{minZoom:A,maxZoom:M}=a.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ur(A),a.canonical),h["icon-size"].possiblyEvaluate(new ur(M),a.canonical)]}let g=o.get("text-line-height")*Hr,y=o.get("text-rotation-alignment")!=="viewport"&&o.get("symbol-placement")!=="point",x=o.get("text-keep-upright"),S=o.get("text-size");for(let A of a.bucket.features){let M=o.get("text-font").evaluate(A,{},a.canonical).join(","),O=S.evaluate(A,{},a.canonical),L=p.layoutTextSize.evaluate(A,{},a.canonical),N=p.layoutIconSize.evaluate(A,{},a.canonical),U={horizontal:{},vertical:void 0},G=A.text,J,ne=[0,0];if(G){let pe=G.toString(),qe=o.get("text-letter-spacing").evaluate(A,{},a.canonical)*Hr,Ce=Ew(pe)?qe:0,Ge=o.get("text-anchor").evaluate(A,{},a.canonical),ct=wD(i,A,a.canonical);if(!ct){let Ye=o.get("text-radial-offset").evaluate(A,{},a.canonical);ne=Ye?bD(Ge,[Ye*Hr,lS]):o.get("text-offset").evaluate(A,{},a.canonical).map(Ke=>Ke*Hr)}let $e=y?"center":o.get("text-justify").evaluate(A,{},a.canonical),Be=o.get("symbol-placement")==="point"?o.get("text-max-width").evaluate(A,{},a.canonical)*Hr:1/0,at=()=>{a.bucket.allowVerticalPlacement&&kp(pe)&&(U.vertical=Wy(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,Ge,"left",Ce,ne,c.ah.vertical,!0,L,O))};if(!y&&ct){let Ye=new Set;if($e==="auto")for(let Ee=0;Ee<ct.values.length;Ee+=2)Ye.add(cS(ct.values[Ee]));else Ye.add($e);let Ke=!1;for(let Ee of Ye)if(!U.horizontal[Ee])if(Ke)U.horizontal[Ee]=U.horizontal[0];else{let ot=Wy(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,"center",Ee,Ce,ne,c.ah.horizontal,!1,L,O);ot&&(U.horizontal[Ee]=ot,Ke=ot.positionedLines.length===1)}at()}else{$e==="auto"&&($e=cS(Ge));let Ye=Wy(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,Ge,$e,Ce,ne,c.ah.horizontal,!1,L,O);Ye&&(U.horizontal[$e]=Ye),at(),kp(pe)&&y&&x&&(U.vertical=Wy(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,Ge,$e,Ce,ne,c.ah.vertical,!1,L,O))}}let ve=!1;if(A.icon&&A.icon.name){let pe=a.imageMap[A.icon.name];pe&&(J=hhe(a.imagePositions[A.icon.name],o.get("icon-offset").evaluate(A,{},a.canonical),o.get("icon-anchor").evaluate(A,{},a.canonical)),ve=!!pe.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=ve:a.bucket.sdfIcons!==ve&&Yr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==a.bucket.pixelRatio||o.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}let le=qD(U.horizontal)||U.vertical;a.bucket.iconsInText=!!le&&le.iconsInText,(le||J)&&The(a.bucket,A,U,J,a.imageMap,p,L,N,ne,ve,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},c.bq=Zw,c.br=Gw,c.bs=Ww,c.bt=Au,c.bu=Xw,c.bv=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},c.bw=function(a,i,o,h,p){return s(this,void 0,void 0,function*(){if(X())try{return yield Jo(a,i,o,h,p)}catch(g){}return function(g,y,x,S,A){let M=g.width,O=g.height;Wa&&Di||(Wa=new OffscreenCanvas(M,O),Di=Wa.getContext("2d",{willReadFrequently:!0})),Wa.width=M,Wa.height=O,Di.drawImage(g,0,0,M,O);let L=Di.getImageData(y,x,S,A);return Di.clearRect(0,0,M,O),L.data}(a,i,o,h,p)})},c.bx=sD,c.by=_,c.bz=w,c.c=Xs,c.d=a=>s(void 0,void 0,void 0,function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));let i=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(i)}catch(o){throw new Error(`Could not load image because of ${o.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.e=Qe,c.f=a=>new Promise((i,o)=>{let h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=ah})},h.onerror=()=>o(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let p=new Blob([new Uint8Array(a)],{type:"image/png"});h.src=a.byteLength?URL.createObjectURL(p):ah}),c.g=fa,c.h=(a,i)=>Qo(Qe(a,{type:"json"}),i),c.i=Ha,c.j=go,c.k=vo,c.l=(a,i)=>Qo(Qe(a,{type:"arrayBuffer"}),i),c.m=Qo,c.n=function(a){return new Xw(a).readFields(nhe,[])},c.o=jp,c.p=BR,c.q=v,c.r=qw,c.s=es,c.t=Pp,c.u=ds,c.v=Se,c.w=Yr,c.x=function([a,i,o]){return i+=90,i*=Math.PI/180,o*=Math.PI/180,{x:a*Math.cos(i)*Math.sin(o),y:a*Math.sin(i)*Math.sin(o),z:a*Math.cos(o)}},c.y=zi,c.z=ur}),n("worker",["./shared"],function(c){"use strict";class s{constructor(F){this.keyCache={},F&&this.replace(F)}replace(F){this._layerConfigs={},this._layers={},this.update(F,[])}update(F,z){for(let Q of F){this._layerConfigs[Q.id]=Q;let ce=this._layers[Q.id]=c.aA(Q);ce._featureFilter=c.a7(ce.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(let Q of z)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};let W=c.bk(Object.values(this._layerConfigs),this.keyCache);for(let Q of W){let ce=Q.map(we=>this._layers[we.id]),fe=ce[0];if(fe.visibility==="none")continue;let me=fe.source||"",se=this.familiesBySource[me];se||(se=this.familiesBySource[me]={});let Ie=fe.sourceLayer||"_geojsonTileLayer",Ae=se[Ie];Ae||(Ae=se[Ie]=[]),Ae.push(ce)}}}class _{constructor(F){let z={},W=[];for(let me in F){let se=F[me],Ie=z[me]={};for(let Ae in se){let we=se[+Ae];if(!we||we.bitmap.width===0||we.bitmap.height===0)continue;let Re={x:0,y:0,w:we.bitmap.width+2,h:we.bitmap.height+2};W.push(Re),Ie[Ae]={rect:Re,metrics:we.metrics}}}let{w:Q,h:ce}=c.p(W),fe=new c.o({width:Q||1,height:ce||1});for(let me in F){let se=F[me];for(let Ie in se){let Ae=se[+Ie];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;let we=z[me][Ie].rect;c.o.copy(Ae.bitmap,fe,{x:0,y:0},{x:we.x+1,y:we.y+1},Ae.bitmap)}}this.image=fe,this.positions=z}}c.bl("GlyphAtlas",_);class w{constructor(F){this.tileID=new c.S(F.tileID.overscaledZ,F.tileID.wrap,F.tileID.canonical.z,F.tileID.canonical.x,F.tileID.canonical.y),this.uid=F.uid,this.zoom=F.zoom,this.pixelRatio=F.pixelRatio,this.tileSize=F.tileSize,this.source=F.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=F.showCollisionBoxes,this.collectResourceTiming=!!F.collectResourceTiming,this.returnDependencies=!!F.returnDependencies,this.promoteId=F.promoteId,this.inFlightDependencies=[]}parse(F,z,W,Q){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=F,this.collisionBoxArray=new c.a5;let ce=new c.bm(Object.keys(F.layers).sort()),fe=new c.bn(this.tileID,this.promoteId);fe.bucketLayerIDs=[];let me={},se={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},Ie=z.familiesBySource[this.source];for(let Pt in Ie){let Kt=F.layers[Pt];if(!Kt)continue;Kt.version===1&&c.w(`Vector tile source "${this.source}" layer "${Pt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let pr=ce.encode(Pt),Jr=[];for(let ii=0;ii<Kt.length;ii++){let wi=Kt.feature(ii),eu=fe.getId(wi,Pt);Jr.push({feature:wi,id:eu,index:ii,sourceLayerIndex:pr})}for(let ii of Ie[Pt]){let wi=ii[0];wi.source!==this.source&&c.w(`layer.source = ${wi.source} does not equal this.source = ${this.source}`),wi.minzoom&&this.zoom<Math.floor(wi.minzoom)||wi.maxzoom&&this.zoom>=wi.maxzoom||wi.visibility!=="none"&&(E(ii,this.zoom,W),(me[wi.id]=wi.createBucket({index:fe.bucketLayerIDs.length,layers:ii,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pr,sourceID:this.source})).populate(Jr,se,this.tileID.canonical),fe.bucketLayerIDs.push(ii.map(eu=>eu.id)))}}let Ae=c.aF(se.glyphDependencies,Pt=>Object.keys(Pt).map(Number));this.inFlightDependencies.forEach(Pt=>Pt==null?void 0:Pt.abort()),this.inFlightDependencies=[];let we=Promise.resolve({});if(Object.keys(Ae).length){let Pt=new AbortController;this.inFlightDependencies.push(Pt),we=Q.sendAsync({type:"GG",data:{stacks:Ae,source:this.source,tileID:this.tileID,type:"glyphs"}},Pt)}let Re=Object.keys(se.iconDependencies),st=Promise.resolve({});if(Re.length){let Pt=new AbortController;this.inFlightDependencies.push(Pt),st=Q.sendAsync({type:"GI",data:{icons:Re,source:this.source,tileID:this.tileID,type:"icons"}},Pt)}let lt=Object.keys(se.patternDependencies),Bt=Promise.resolve({});if(lt.length){let Pt=new AbortController;this.inFlightDependencies.push(Pt),Bt=Q.sendAsync({type:"GI",data:{icons:lt,source:this.source,tileID:this.tileID,type:"patterns"}},Pt)}let[wt,jt,Ot]=yield Promise.all([we,st,Bt]),Lr=new _(wt),xr=new c.bo(jt,Ot);for(let Pt in me){let Kt=me[Pt];Kt instanceof c.a6?(E(Kt.layers,this.zoom,W),c.bp({bucket:Kt,glyphMap:wt,glyphPositions:Lr.positions,imageMap:jt,imagePositions:xr.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Kt.hasPattern&&(Kt instanceof c.bq||Kt instanceof c.br||Kt instanceof c.bs)&&(E(Kt.layers,this.zoom,W),Kt.addFeatures(se,this.tileID.canonical,xr.patternPositions))}return this.status="done",{buckets:Object.values(me).filter(Pt=>!Pt.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Lr.image,imageAtlas:xr,glyphMap:this.returnDependencies?wt:null,iconMap:this.returnDependencies?jt:null,glyphPositions:this.returnDependencies?Lr.positions:null}})}}function E(te,F,z){let W=new c.z(F);for(let Q of te)Q.recalculate(W,z)}class P{constructor(F,z,W){this.actor=F,this.layerIndex=z,this.availableImages=W,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(F,z){return c._(this,void 0,void 0,function*(){let W=yield c.l(F.request,z);try{return{vectorTile:new c.bt.VectorTile(new c.bu(W.data)),rawData:W.data,cacheControl:W.cacheControl,expires:W.expires}}catch(Q){let ce=new Uint8Array(W.data),fe=`Unable to parse the tile at ${F.request.url}, `;throw fe+=ce[0]===31&&ce[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Q.message}`,new Error(fe)}})}loadTile(F){return c._(this,void 0,void 0,function*(){let z=F.uid,W=!!(F&&F.request&&F.request.collectResourceTiming)&&new c.bv(F.request),Q=new w(F);this.loading[z]=Q;let ce=new AbortController;Q.abort=ce;try{let fe=yield this.loadVectorTile(F,ce);if(delete this.loading[z],!fe)return null;let me=fe.rawData,se={};fe.expires&&(se.expires=fe.expires),fe.cacheControl&&(se.cacheControl=fe.cacheControl);let Ie={};if(W){let we=W.finish();we&&(Ie.resourceTiming=JSON.parse(JSON.stringify(we)))}Q.vectorTile=fe.vectorTile;let Ae=Q.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[z]=Q,this.fetching[z]={rawTileData:me,cacheControl:se,resourceTiming:Ie};try{let we=yield Ae;return c.e({rawTileData:me.slice(0)},we,se,Ie)}finally{delete this.fetching[z]}}catch(fe){throw delete this.loading[z],Q.status="done",this.loaded[z]=Q,fe}})}reloadTile(F){return c._(this,void 0,void 0,function*(){let z=F.uid;if(!this.loaded||!this.loaded[z])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let W=this.loaded[z];if(W.showCollisionBoxes=F.showCollisionBoxes,W.status==="parsing"){let Q=yield W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor),ce;if(this.fetching[z]){let{rawTileData:fe,cacheControl:me,resourceTiming:se}=this.fetching[z];delete this.fetching[z],ce=c.e({rawTileData:fe.slice(0)},Q,me,se)}else ce=Q;return ce}if(W.status==="done"&&W.vectorTile)return W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(F){return c._(this,void 0,void 0,function*(){let z=this.loading,W=F.uid;z&&z[W]&&z[W].abort&&(z[W].abort.abort(),delete z[W])})}removeTile(F){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[F.uid]&&delete this.loaded[F.uid]})}}class C{constructor(){this.loaded={}}loadTile(F){return c._(this,void 0,void 0,function*(){let{uid:z,encoding:W,rawImageData:Q,redFactor:ce,greenFactor:fe,blueFactor:me,baseShift:se}=F,Ie=Q.width+2,Ae=Q.height+2,we=c.b(Q)?new c.R({width:Ie,height:Ae},(yield c.bw(Q,-1,-1,Ie,Ae))):Q,Re=new c.bx(z,we,W,ce,fe,me,se);return this.loaded=this.loaded||{},this.loaded[z]=Re,Re})}removeTile(F){let z=this.loaded,W=F.uid;z&&z[W]&&delete z[W]}}function B(te,F){if(te.length!==0){$(te[0],F);for(var z=1;z<te.length;z++)$(te[z],!F)}}function $(te,F){for(var z=0,W=0,Q=0,ce=te.length,fe=ce-1;Q<ce;fe=Q++){var me=(te[Q][0]-te[fe][0])*(te[fe][1]+te[Q][1]),se=z+me;W+=Math.abs(z)>=Math.abs(me)?z-se+me:me-se+z,z=se}z+W>=0!=!!F&&te.reverse()}var re=c.by(function te(F,z){var W,Q=F&&F.type;if(Q==="FeatureCollection")for(W=0;W<F.features.length;W++)te(F.features[W],z);else if(Q==="GeometryCollection")for(W=0;W<F.geometries.length;W++)te(F.geometries[W],z);else if(Q==="Feature")te(F.geometry,z);else if(Q==="Polygon")B(F.coordinates,z);else if(Q==="MultiPolygon")for(W=0;W<F.coordinates.length;W++)B(F.coordinates[W],z);return F});let xe=c.bt.VectorTileFeature.prototype.toGeoJSON;var ye={exports:{}},X=c.bz,K=c.bt.VectorTileFeature,ie=_e;function _e(te,F){this.options=F||{},this.features=te,this.length=te.length}function be(te,F){this.id=typeof te.id=="number"?te.id:void 0,this.type=te.type,this.rawGeometry=te.type===1?[te.geometry]:te.geometry,this.properties=te.tags,this.extent=F||4096}_e.prototype.feature=function(te){return new be(this.features[te],this.options.extent)},be.prototype.loadGeometry=function(){var te=this.rawGeometry;this.geometry=[];for(var F=0;F<te.length;F++){for(var z=te[F],W=[],Q=0;Q<z.length;Q++)W.push(new X(z[Q][0],z[Q][1]));this.geometry.push(W)}return this.geometry},be.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var te=this.geometry,F=1/0,z=-1/0,W=1/0,Q=-1/0,ce=0;ce<te.length;ce++)for(var fe=te[ce],me=0;me<fe.length;me++){var se=fe[me];F=Math.min(F,se.x),z=Math.max(z,se.x),W=Math.min(W,se.y),Q=Math.max(Q,se.y)}return[F,W,z,Q]},be.prototype.toGeoJSON=K.prototype.toGeoJSON;var Qe=c.bA,Le=ie;function nt(te){var F=new Qe;return function(z,W){for(var Q in z.layers)W.writeMessage(3,gt,z.layers[Q])}(te,F),F.finish()}function gt(te,F){var z;F.writeVarintField(15,te.version||1),F.writeStringField(1,te.name||""),F.writeVarintField(5,te.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(z=0;z<te.length;z++)W.feature=te.feature(z),F.writeMessage(2,Je,W);var Q=W.keys;for(z=0;z<Q.length;z++)F.writeStringField(3,Q[z]);var ce=W.values;for(z=0;z<ce.length;z++)F.writeMessage(4,Ks,ce[z])}function Je(te,F){var z=te.feature;z.id!==void 0&&F.writeVarintField(1,z.id),F.writeMessage(2,en,te),F.writeVarintField(3,z.type),F.writeMessage(4,Ha,z)}function en(te,F){var z=te.feature,W=te.keys,Q=te.values,ce=te.keycache,fe=te.valuecache;for(var me in z.properties){var se=z.properties[me],Ie=ce[me];if(se!==null){Ie===void 0&&(W.push(me),ce[me]=Ie=W.length-1),F.writeVarint(Ie);var Ae=typeof se;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(se=JSON.stringify(se));var we=Ae+":"+se,Re=fe[we];Re===void 0&&(Q.push(se),fe[we]=Re=Q.length-1),F.writeVarint(Re)}}}function Yr(te,F){return(F<<3)+(7&te)}function xi(te){return te<<1^te>>31}function Ha(te,F){for(var z=te.loadGeometry(),W=te.type,Q=0,ce=0,fe=z.length,me=0;me<fe;me++){var se=z[me],Ie=1;W===1&&(Ie=se.length),F.writeVarint(Yr(1,Ie));for(var Ae=W===3?se.length-1:se.length,we=0;we<Ae;we++){we===1&&W!==1&&F.writeVarint(Yr(2,Ae-1));var Re=se[we].x-Q,st=se[we].y-ce;F.writeVarint(xi(Re)),F.writeVarint(xi(st)),Q+=Re,ce+=st}W===3&&F.writeVarint(Yr(7,1))}}function Ks(te,F){var z=typeof te;z==="string"?F.writeStringField(1,te):z==="boolean"?F.writeBooleanField(7,te):z==="number"&&(te%1!=0?F.writeDoubleField(3,te):te<0?F.writeSVarintField(6,te):F.writeVarintField(5,te))}ye.exports=nt,ye.exports.fromVectorTileJs=nt,ye.exports.fromGeojsonVt=function(te,F){F=F||{};var z={};for(var W in te)z[W]=new Le(te[W].features,F),z[W].name=W,z[W].version=F.version,z[W].extent=F.extent;return nt({layers:z})},ye.exports.GeoJSONWrapper=Le;var ha=c.by(ye.exports);let ah={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:te=>te},Jo=Math.fround||(Wa=new Float32Array(1),te=>(Wa[0]=+te,Wa[0]));var Wa;let Di=3,$n=5,Xs=6;class mo{constructor(F){this.options=Object.assign(Object.create(ah),F),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(F){let{log:z,minZoom:W,maxZoom:Q}=this.options;z&&console.time("total time");let ce=`prepare ${F.length} points`;z&&console.time(ce),this.points=F;let fe=[];for(let se=0;se<F.length;se++){let Ie=F[se];if(!Ie.geometry)continue;let[Ae,we]=Ie.geometry.coordinates,Re=Jo(tn(Ae)),st=Jo(Vn(we));fe.push(Re,st,1/0,se,-1,1),this.options.reduce&&fe.push(0)}let me=this.trees[Q+1]=this._createTree(fe);z&&console.timeEnd(ce);for(let se=Q;se>=W;se--){let Ie=+Date.now();me=this.trees[se]=this._createTree(this._cluster(me,se)),z&&console.log("z%d: %d clusters in %dms",se,me.numItems,+Date.now()-Ie)}return z&&console.timeEnd("total time"),this}getClusters(F,z){let W=((F[0]+180)%360+360)%360-180,Q=Math.max(-90,Math.min(90,F[1])),ce=F[2]===180?180:((F[2]+180)%360+360)%360-180,fe=Math.max(-90,Math.min(90,F[3]));if(F[2]-F[0]>=360)W=-180,ce=180;else if(W>ce){let we=this.getClusters([W,Q,180,fe],z),Re=this.getClusters([-180,Q,ce,fe],z);return we.concat(Re)}let me=this.trees[this._limitZoom(z)],se=me.range(tn(W),Vn(fe),tn(ce),Vn(Q)),Ie=me.data,Ae=[];for(let we of se){let Re=this.stride*we;Ae.push(Ie[Re+$n]>1?fa(Ie,Re,this.clusterProps):this.points[Ie[Re+Di]])}return Ae}getChildren(F){let z=this._getOriginId(F),W=this._getOriginZoom(F),Q="No cluster with the specified id.",ce=this.trees[W];if(!ce)throw new Error(Q);let fe=ce.data;if(z*this.stride>=fe.length)throw new Error(Q);let me=this.options.radius/(this.options.extent*Math.pow(2,W-1)),se=ce.within(fe[z*this.stride],fe[z*this.stride+1],me),Ie=[];for(let Ae of se){let we=Ae*this.stride;fe[we+4]===F&&Ie.push(fe[we+$n]>1?fa(fe,we,this.clusterProps):this.points[fe[we+Di]])}if(Ie.length===0)throw new Error(Q);return Ie}getLeaves(F,z,W){let Q=[];return this._appendLeaves(Q,F,z=z||10,W=W||0,0),Q}getTile(F,z,W){let Q=this.trees[this._limitZoom(F)],ce=Math.pow(2,F),{extent:fe,radius:me}=this.options,se=me/fe,Ie=(W-se)/ce,Ae=(W+1+se)/ce,we={features:[]};return this._addTileFeatures(Q.range((z-se)/ce,Ie,(z+1+se)/ce,Ae),Q.data,z,W,ce,we),z===0&&this._addTileFeatures(Q.range(1-se/ce,Ie,1,Ae),Q.data,ce,W,ce,we),z===ce-1&&this._addTileFeatures(Q.range(0,Ie,se/ce,Ae),Q.data,-1,W,ce,we),we.features.length?we:null}getClusterExpansionZoom(F){let z=this._getOriginZoom(F)-1;for(;z<=this.options.maxZoom;){let W=this.getChildren(F);if(z++,W.length!==1)break;F=W[0].properties.cluster_id}return z}_appendLeaves(F,z,W,Q,ce){let fe=this.getChildren(z);for(let me of fe){let se=me.properties;if(se&&se.cluster?ce+se.point_count<=Q?ce+=se.point_count:ce=this._appendLeaves(F,se.cluster_id,W,Q,ce):ce<Q?ce++:F.push(me),F.length===W)break}return ce}_createTree(F){let z=new c.av(F.length/this.stride|0,this.options.nodeSize,Float32Array);for(let W=0;W<F.length;W+=this.stride)z.add(F[W],F[W+1]);return z.finish(),z.data=F,z}_addTileFeatures(F,z,W,Q,ce,fe){for(let me of F){let se=me*this.stride,Ie=z[se+$n]>1,Ae,we,Re;if(Ie)Ae=Ys(z,se,this.clusterProps),we=z[se],Re=z[se+1];else{let Bt=this.points[z[se+Di]];Ae=Bt.properties;let[wt,jt]=Bt.geometry.coordinates;we=tn(wt),Re=Vn(jt)}let st={type:1,geometry:[[Math.round(this.options.extent*(we*ce-W)),Math.round(this.options.extent*(Re*ce-Q))]],tags:Ae},lt;lt=Ie||this.options.generateId?z[se+Di]:this.points[z[se+Di]].id,lt!==void 0&&(st.id=lt),fe.features.push(st)}}_limitZoom(F){return Math.max(this.options.minZoom,Math.min(Math.floor(+F),this.options.maxZoom+1))}_cluster(F,z){let{radius:W,extent:Q,reduce:ce,minPoints:fe}=this.options,me=W/(Q*Math.pow(2,z)),se=F.data,Ie=[],Ae=this.stride;for(let we=0;we<se.length;we+=Ae){if(se[we+2]<=z)continue;se[we+2]=z;let Re=se[we],st=se[we+1],lt=F.within(se[we],se[we+1],me),Bt=se[we+$n],wt=Bt;for(let jt of lt){let Ot=jt*Ae;se[Ot+2]>z&&(wt+=se[Ot+$n])}if(wt>Bt&&wt>=fe){let jt,Ot=Re*Bt,Lr=st*Bt,xr=-1,Pt=((we/Ae|0)<<5)+(z+1)+this.points.length;for(let Kt of lt){let pr=Kt*Ae;if(se[pr+2]<=z)continue;se[pr+2]=z;let Jr=se[pr+$n];Ot+=se[pr]*Jr,Lr+=se[pr+1]*Jr,se[pr+4]=Pt,ce&&(jt||(jt=this._map(se,we,!0),xr=this.clusterProps.length,this.clusterProps.push(jt)),ce(jt,this._map(se,pr)))}se[we+4]=Pt,Ie.push(Ot/wt,Lr/wt,1/0,Pt,-1,wt),ce&&Ie.push(xr)}else{for(let jt=0;jt<Ae;jt++)Ie.push(se[we+jt]);if(wt>1)for(let jt of lt){let Ot=jt*Ae;if(!(se[Ot+2]<=z)){se[Ot+2]=z;for(let Lr=0;Lr<Ae;Lr++)Ie.push(se[Ot+Lr])}}}}return Ie}_getOriginId(F){return F-this.points.length>>5}_getOriginZoom(F){return(F-this.points.length)%32}_map(F,z,W){if(F[z+$n]>1){let fe=this.clusterProps[F[z+Xs]];return W?Object.assign({},fe):fe}let Q=this.points[F[z+Di]].properties,ce=this.options.map(Q);return W&&ce===Q?Object.assign({},ce):ce}}function fa(te,F,z){return{type:"Feature",id:te[F+Di],properties:Ys(te,F,z),geometry:{type:"Point",coordinates:[(W=te[F],360*(W-.5)),Qo(te[F+1])]}};var W}function Ys(te,F,z){let W=te[F+$n],Q=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W,ce=te[F+Xs],fe=ce===-1?{}:Object.assign({},z[ce]);return Object.assign(fe,{cluster:!0,cluster_id:te[F+Di],point_count:W,point_count_abbreviated:Q})}function tn(te){return te/360+.5}function Vn(te){let F=Math.sin(te*Math.PI/180),z=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return z<0?0:z>1?1:z}function Qo(te){let F=(180-360*te)*Math.PI/180;return 360*Math.atan(Math.exp(F))/Math.PI-90}function es(te,F,z,W){let Q=W,ce=F+(z-F>>1),fe,me=z-F,se=te[F],Ie=te[F+1],Ae=te[z],we=te[z+1];for(let Re=F+3;Re<z;Re+=3){let st=Cl(te[Re],te[Re+1],se,Ie,Ae,we);if(st>Q)fe=Re,Q=st;else if(st===Q){let lt=Math.abs(Re-ce);lt<me&&(fe=Re,me=lt)}}Q>W&&(fe-F>3&&es(te,F,fe,W),te[fe+2]=Q,z-fe>3&&es(te,fe,z,W))}function Cl(te,F,z,W,Q,ce){let fe=Q-z,me=ce-W;if(fe!==0||me!==0){let se=((te-z)*fe+(F-W)*me)/(fe*fe+me*me);se>1?(z=Q,W=ce):se>0&&(z+=fe*se,W+=me*se)}return fe=te-z,me=F-W,fe*fe+me*me}function Za(te,F,z,W){let Q={id:te==null?null:te,type:F,geometry:z,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(F==="Point"||F==="MultiPoint"||F==="LineString")vo(Q,z);else if(F==="Polygon")vo(Q,z[0]);else if(F==="MultiLineString")for(let ce of z)vo(Q,ce);else if(F==="MultiPolygon")for(let ce of z)vo(Q,ce[0]);return Q}function vo(te,F){for(let z=0;z<F.length;z+=3)te.minX=Math.min(te.minX,F[z]),te.minY=Math.min(te.minY,F[z+1]),te.maxX=Math.max(te.maxX,F[z]),te.maxY=Math.max(te.maxY,F[z+1])}function go(te,F,z,W){if(!F.geometry)return;let Q=F.geometry.coordinates;if(Q&&Q.length===0)return;let ce=F.geometry.type,fe=Math.pow(z.tolerance/((1<<z.maxZoom)*z.extent),2),me=[],se=F.id;if(z.promoteId?se=F.properties[z.promoteId]:z.generateId&&(se=W||0),ce==="Point")Js(Q,me);else if(ce==="MultiPoint")for(let Ie of Q)Js(Ie,me);else if(ce==="LineString")Se(Q,me,fe,!1);else if(ce==="MultiLineString"){if(z.lineMetrics){for(let Ie of Q)me=[],Se(Ie,me,fe,!1),te.push(Za(se,"LineString",me,F.properties));return}ts(Q,me,fe,!1)}else if(ce==="Polygon")ts(Q,me,fe,!0);else{if(ce!=="MultiPolygon"){if(ce==="GeometryCollection"){for(let Ie of F.geometry.geometries)go(te,{id:se,geometry:Ie,properties:F.properties},z,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Ie of Q){let Ae=[];ts(Ie,Ae,fe,!0),me.push(Ae)}}te.push(Za(se,ce,me,F.properties))}function Js(te,F){F.push(Ml(te[0]),Vt(te[1]),0)}function Se(te,F,z,W){let Q,ce,fe=0;for(let se=0;se<te.length;se++){let Ie=Ml(te[se][0]),Ae=Vt(te[se][1]);F.push(Ie,Ae,0),se>0&&(fe+=W?(Q*Ae-Ie*ce)/2:Math.sqrt(Math.pow(Ie-Q,2)+Math.pow(Ae-ce,2))),Q=Ie,ce=Ae}let me=F.length-3;F[2]=1,es(F,0,me,z),F[me+2]=1,F.size=Math.abs(fe),F.start=0,F.end=F.size}function ts(te,F,z,W){for(let Q=0;Q<te.length;Q++){let ce=[];Se(te[Q],ce,z,W),F.push(ce)}}function Ml(te){return te/360+.5}function Vt(te){let F=Math.sin(te*Math.PI/180),z=.5-.25*Math.log((1+F)/(1-F))/Math.PI;return z<0?0:z>1?1:z}function _r(te,F,z,W,Q,ce,fe,me){if(W/=F,ce>=(z/=F)&&fe<W)return te;if(fe<z||ce>=W)return null;let se=[];for(let Ie of te){let Ae=Ie.geometry,we=Ie.type,Re=Q===0?Ie.minX:Ie.minY,st=Q===0?Ie.maxX:Ie.maxY;if(Re>=z&&st<W){se.push(Ie);continue}if(st<z||Re>=W)continue;let lt=[];if(we==="Point"||we==="MultiPoint")kl(Ae,lt,z,W,Q);else if(we==="LineString")yo(Ae,lt,z,W,Q,!1,me.lineMetrics);else if(we==="MultiLineString")Qs(Ae,lt,z,W,Q,!1);else if(we==="Polygon")Qs(Ae,lt,z,W,Q,!0);else if(we==="MultiPolygon")for(let Bt of Ae){let wt=[];Qs(Bt,wt,z,W,Q,!0),wt.length&&lt.push(wt)}if(lt.length){if(me.lineMetrics&&we==="LineString"){for(let Bt of lt)se.push(Za(Ie.id,we,Bt,Ie.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(lt.length===1?(we="LineString",lt=lt[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=lt.length===3?"Point":"MultiPoint"),se.push(Za(Ie.id,we,lt,Ie.tags))}}return se.length?se:null}function kl(te,F,z,W,Q){for(let ce=0;ce<te.length;ce+=3){let fe=te[ce+Q];fe>=z&&fe<=W&&_n(F,te[ce],te[ce+1],te[ce+2])}}function yo(te,F,z,W,Q,ce,fe){let me=Ka(te),se=Q===0?Ol:Rl,Ie,Ae,we=te.start;for(let wt=0;wt<te.length-3;wt+=3){let jt=te[wt],Ot=te[wt+1],Lr=te[wt+2],xr=te[wt+3],Pt=te[wt+4],Kt=Q===0?jt:Ot,pr=Q===0?xr:Pt,Jr=!1;fe&&(Ie=Math.sqrt(Math.pow(jt-xr,2)+Math.pow(Ot-Pt,2))),Kt<z?pr>z&&(Ae=se(me,jt,Ot,xr,Pt,z),fe&&(me.start=we+Ie*Ae)):Kt>W?pr<W&&(Ae=se(me,jt,Ot,xr,Pt,W),fe&&(me.start=we+Ie*Ae)):_n(me,jt,Ot,Lr),pr<z&&Kt>=z&&(Ae=se(me,jt,Ot,xr,Pt,z),Jr=!0),pr>W&&Kt<=W&&(Ae=se(me,jt,Ot,xr,Pt,W),Jr=!0),!ce&&Jr&&(fe&&(me.end=we+Ie*Ae),F.push(me),me=Ka(te)),fe&&(we+=Ie)}let Re=te.length-3,st=te[Re],lt=te[Re+1],Bt=Q===0?st:lt;Bt>=z&&Bt<=W&&_n(me,st,lt,te[Re+2]),Re=me.length-3,ce&&Re>=3&&(me[Re]!==me[0]||me[Re+1]!==me[1])&&_n(me,me[0],me[1],me[2]),me.length&&F.push(me)}function Ka(te){let F=[];return F.size=te.size,F.start=te.start,F.end=te.end,F}function Qs(te,F,z,W,Q,ce){for(let fe of te)yo(fe,F,z,W,Q,ce,!1)}function _n(te,F,z,W){te.push(F,z,W)}function Ol(te,F,z,W,Q,ce){let fe=(ce-F)/(W-F);return _n(te,ce,z+(Q-z)*fe,1),fe}function Rl(te,F,z,W,Q,ce){let fe=(ce-z)/(Q-z);return _n(te,F+(W-F)*fe,ce,1),fe}function ke(te,F){let z=[];for(let W=0;W<te.length;W++){let Q=te[W],ce=Q.type,fe;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")fe=da(Q.geometry,F);else if(ce==="MultiLineString"||ce==="Polygon"){fe=[];for(let me of Q.geometry)fe.push(da(me,F))}else if(ce==="MultiPolygon"){fe=[];for(let me of Q.geometry){let se=[];for(let Ie of me)se.push(da(Ie,F));fe.push(se)}}z.push(Za(Q.id,ce,fe,Q.tags))}return z}function da(te,F){let z=[];z.size=te.size,te.start!==void 0&&(z.start=te.start,z.end=te.end);for(let W=0;W<te.length;W+=3)z.push(te[W]+F,te[W+1],te[W+2]);return z}function bi(te,F){if(te.transformed)return te;let z=1<<te.z,W=te.x,Q=te.y;for(let ce of te.features){let fe=ce.geometry,me=ce.type;if(ce.geometry=[],me===1)for(let se=0;se<fe.length;se+=2)ce.geometry.push(pa(fe[se],fe[se+1],F,z,W,Q));else for(let se=0;se<fe.length;se++){let Ie=[];for(let Ae=0;Ae<fe[se].length;Ae+=2)Ie.push(pa(fe[se][Ae],fe[se][Ae+1],F,z,W,Q));ce.geometry.push(Ie)}}return te.transformed=!0,te}function pa(te,F,z,W,Q,ce){return[Math.round(z*(te*W-Q)),Math.round(z*(F*W-ce))]}function _o(te,F,z,W,Q){let ce=F===Q.maxZoom?0:Q.tolerance/((1<<F)*Q.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:te.length,source:null,x:z,y:W,z:F,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let me of te)Fe(fe,me,ce,Q);return fe}function Fe(te,F,z,W){let Q=F.geometry,ce=F.type,fe=[];if(te.minX=Math.min(te.minX,F.minX),te.minY=Math.min(te.minY,F.minY),te.maxX=Math.max(te.maxX,F.maxX),te.maxY=Math.max(te.maxY,F.maxY),ce==="Point"||ce==="MultiPoint")for(let me=0;me<Q.length;me+=3)fe.push(Q[me],Q[me+1]),te.numPoints++,te.numSimplified++;else if(ce==="LineString")At(fe,Q,te,z,!1,!1);else if(ce==="MultiLineString"||ce==="Polygon")for(let me=0;me<Q.length;me++)At(fe,Q[me],te,z,ce==="Polygon",me===0);else if(ce==="MultiPolygon")for(let me=0;me<Q.length;me++){let se=Q[me];for(let Ie=0;Ie<se.length;Ie++)At(fe,se[Ie],te,z,!0,Ie===0)}if(fe.length){let me=F.tags||null;if(ce==="LineString"&&W.lineMetrics){me={};for(let Ie in F.tags)me[Ie]=F.tags[Ie];me.mapbox_clip_start=Q.start/Q.size,me.mapbox_clip_end=Q.end/Q.size}let se={geometry:fe,type:ce==="Polygon"||ce==="MultiPolygon"?3:ce==="LineString"||ce==="MultiLineString"?2:1,tags:me};F.id!==null&&(se.id=F.id),te.features.push(se)}}function At(te,F,z,W,Q,ce){let fe=W*W;if(W>0&&F.size<(Q?fe:W))return void(z.numPoints+=F.length/3);let me=[];for(let se=0;se<F.length;se+=3)(W===0||F[se+2]>fe)&&(z.numSimplified++,me.push(F[se],F[se+1])),z.numPoints++;Q&&function(se,Ie){let Ae=0;for(let we=0,Re=se.length,st=Re-2;we<Re;st=we,we+=2)Ae+=(se[we]-se[st])*(se[we+1]+se[st+1]);if(Ae>0===Ie)for(let we=0,Re=se.length;we<Re/2;we+=2){let st=se[we],lt=se[we+1];se[we]=se[Re-2-we],se[we+1]=se[Re-1-we],se[Re-2-we]=st,se[Re-1-we]=lt}}(me,ce),te.push(me)}let dt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Li{constructor(F,z){let W=(z=this.options=function(ce,fe){for(let me in fe)ce[me]=fe[me];return ce}(Object.create(dt),z)).debug;if(W&&console.time("preprocess data"),z.maxZoom<0||z.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(z.promoteId&&z.generateId)throw new Error("promoteId and generateId cannot be used together.");let Q=function(ce,fe){let me=[];if(ce.type==="FeatureCollection")for(let se=0;se<ce.features.length;se++)go(me,ce.features[se],fe,se);else go(me,ce.type==="Feature"?ce:{geometry:ce},fe);return me}(F,z);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",z.indexMaxZoom,z.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Q=function(ce,fe){let me=fe.buffer/fe.extent,se=ce,Ie=_r(ce,1,-1-me,me,0,-1,2,fe),Ae=_r(ce,1,1-me,2+me,0,-1,2,fe);return(Ie||Ae)&&(se=_r(ce,1,-me,1+me,0,-1,2,fe)||[],Ie&&(se=ke(Ie,1).concat(se)),Ae&&(se=se.concat(ke(Ae,-1)))),se}(Q,z),Q.length&&this.splitTile(Q,0,0,0),W&&(Q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(F,z,W,Q,ce,fe,me){let se=[F,z,W,Q],Ie=this.options,Ae=Ie.debug;for(;se.length;){Q=se.pop(),W=se.pop(),z=se.pop(),F=se.pop();let we=1<<z,Re=Gn(z,W,Q),st=this.tiles[Re];if(!st&&(Ae>1&&console.time("creation"),st=this.tiles[Re]=_o(F,z,W,Q,Ie),this.tileCoords.push({z,x:W,y:Q}),Ae)){Ae>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",z,W,Q,st.numFeatures,st.numPoints,st.numSimplified),console.timeEnd("creation"));let Jr=`z${z}`;this.stats[Jr]=(this.stats[Jr]||0)+1,this.total++}if(st.source=F,ce==null){if(z===Ie.indexMaxZoom||st.numPoints<=Ie.indexMaxPoints)continue}else{if(z===Ie.maxZoom||z===ce)continue;if(ce!=null){let Jr=ce-z;if(W!==fe>>Jr||Q!==me>>Jr)continue}}if(st.source=null,F.length===0)continue;Ae>1&&console.time("clipping");let lt=.5*Ie.buffer/Ie.extent,Bt=.5-lt,wt=.5+lt,jt=1+lt,Ot=null,Lr=null,xr=null,Pt=null,Kt=_r(F,we,W-lt,W+wt,0,st.minX,st.maxX,Ie),pr=_r(F,we,W+Bt,W+jt,0,st.minX,st.maxX,Ie);F=null,Kt&&(Ot=_r(Kt,we,Q-lt,Q+wt,1,st.minY,st.maxY,Ie),Lr=_r(Kt,we,Q+Bt,Q+jt,1,st.minY,st.maxY,Ie),Kt=null),pr&&(xr=_r(pr,we,Q-lt,Q+wt,1,st.minY,st.maxY,Ie),Pt=_r(pr,we,Q+Bt,Q+jt,1,st.minY,st.maxY,Ie),pr=null),Ae>1&&console.timeEnd("clipping"),se.push(Ot||[],z+1,2*W,2*Q),se.push(Lr||[],z+1,2*W,2*Q+1),se.push(xr||[],z+1,2*W+1,2*Q),se.push(Pt||[],z+1,2*W+1,2*Q+1)}}getTile(F,z,W){F=+F,z=+z,W=+W;let Q=this.options,{extent:ce,debug:fe}=Q;if(F<0||F>24)return null;let me=1<<F,se=Gn(F,z=z+me&me-1,W);if(this.tiles[se])return bi(this.tiles[se],ce);fe>1&&console.log("drilling down to z%d-%d-%d",F,z,W);let Ie,Ae=F,we=z,Re=W;for(;!Ie&&Ae>0;)Ae--,we>>=1,Re>>=1,Ie=this.tiles[Gn(Ae,we,Re)];return Ie&&Ie.source?(fe>1&&(console.log("found parent tile z%d-%d-%d",Ae,we,Re),console.time("drilling down")),this.splitTile(Ie.source,Ae,we,Re,F,z,W),fe>1&&console.timeEnd("drilling down"),this.tiles[se]?bi(this.tiles[se],ce):null):null}}function Gn(te,F,z){return 32*((1<<te)*z+F)+te}function _t(te,F){return F?te.properties[F]:te.id}function ma(te,F){if(te==null)return!0;if(te.type==="Feature")return _t(te,F)!=null;if(te.type==="FeatureCollection"){let z=new Set;for(let W of te.features){let Q=_t(W,F);if(Q==null||z.has(Q))return!1;z.add(Q)}return!0}return!1}function Xa(te,F){let z=new Map;if(te!=null)if(te.type==="Feature")z.set(_t(te,F),te);else for(let W of te.features)z.set(_t(W,F),W);return z}class xo extends P{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(F,z){return c._(this,void 0,void 0,function*(){let W=F.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let Q=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!Q)return null;let ce=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.X,this.length=me.length,this._features=me}feature(me){return new class{constructor(se){this._feature=se,this.extent=c.X,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){let se=[];for(let Ie of this._feature.geometry)se.push([new c.P(Ie[0],Ie[1])]);return se}{let se=[];for(let Ie of this._feature.geometry){let Ae=[];for(let we of Ie)Ae.push(new c.P(we[0],we[1]));se.push(Ae)}return se}}toGeoJSON(se,Ie,Ae){return xe.call(this,se,Ie,Ae)}}(this._features[me])}}(Q.features),fe=ha(ce);return fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),{vectorTile:ce,rawData:fe.buffer}})}loadData(F){return c._(this,void 0,void 0,function*(){var z;(z=this._pendingRequest)===null||z===void 0||z.abort();let W=!!(F&&F.request&&F.request.collectResourceTiming)&&new c.bv(F.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(F,this._pendingRequest),this._geoJSONIndex=F.cluster?new mo(function({superclusterOptions:fe,clusterProperties:me}){if(!me||!fe)return fe;let se={},Ie={},Ae={accumulated:null,zoom:0},we={properties:null},Re=Object.keys(me);for(let st of Re){let[lt,Bt]=me[st],wt=c.bC(Bt),jt=c.bC(typeof lt=="string"?[lt,["accumulated"],["get",st]]:lt);se[st]=wt.value,Ie[st]=jt.value}return fe.map=st=>{we.properties=st;let lt={};for(let Bt of Re)lt[Bt]=se[Bt].evaluate(Ae,we);return lt},fe.reduce=(st,lt)=>{we.properties=lt;for(let Bt of Re)Ae.accumulated=st[Bt],st[Bt]=Ie[Bt].evaluate(Ae,we)},fe}(F)).load((yield this._pendingData).features):(Q=yield this._pendingData,new Li(Q,F.geojsonVtOptions)),this.loaded={};let ce={};if(W){let fe=W.finish();fe&&(ce.resourceTiming={},ce.resourceTiming[F.source]=JSON.parse(JSON.stringify(fe)))}return ce}catch(ce){if(delete this._pendingRequest,c.bB(ce))return{abandoned:!0};throw ce}var Q})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(F){let z=this.loaded;return z&&z[F.uid]?super.reloadTile(F):this.loadTile(F)}loadAndProcessGeoJSON(F,z){return c._(this,void 0,void 0,function*(){let W=yield this.loadGeoJSON(F,z);if(delete this._pendingRequest,typeof W!="object")throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(re(W,!0),F.filter){let Q=c.bC(F.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map(fe=>`${fe.key}: ${fe.message}`).join(", "));W={type:"FeatureCollection",features:W.features.filter(fe=>Q.value.evaluate({zoom:0},fe))}}return W})}loadGeoJSON(F,z){return c._(this,void 0,void 0,function*(){let{promoteId:W}=F;if(F.request){let Q=yield c.h(F.request,z);return this._dataUpdateable=ma(Q.data,W)?Xa(Q.data,W):void 0,Q.data}if(typeof F.data=="string")try{let Q=JSON.parse(F.data);return this._dataUpdateable=ma(Q,W)?Xa(Q,W):void 0,Q}catch(Q){throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`)}if(!F.dataDiff)throw new Error(`Input data given to '${F.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${F.source}`);return function(Q,ce,fe){var me,se,Ie,Ae;if(ce.removeAll&&Q.clear(),ce.remove)for(let we of ce.remove)Q.delete(we);if(ce.add)for(let we of ce.add){let Re=_t(we,fe);Re!=null&&Q.set(Re,we)}if(ce.update)for(let we of ce.update){let Re=Q.get(we.id);if(Re==null)continue;let st=!we.removeAllProperties&&(((me=we.removeProperties)===null||me===void 0?void 0:me.length)>0||((se=we.addOrUpdateProperties)===null||se===void 0?void 0:se.length)>0);if((we.newGeometry||we.removeAllProperties||st)&&(Re=Object.assign({},Re),Q.set(we.id,Re),st&&(Re.properties=Object.assign({},Re.properties))),we.newGeometry&&(Re.geometry=we.newGeometry),we.removeAllProperties)Re.properties={};else if(((Ie=we.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(let lt of we.removeProperties)Object.prototype.hasOwnProperty.call(Re.properties,lt)&&delete Re.properties[lt];if(((Ae=we.addOrUpdateProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(let{key:lt,value:Bt}of we.addOrUpdateProperties)Re.properties[lt]=Bt}}(this._dataUpdateable,F.dataDiff,W),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(F){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(F){return this._geoJSONIndex.getClusterExpansionZoom(F.clusterId)}getClusterChildren(F){return this._geoJSONIndex.getChildren(F.clusterId)}getClusterLeaves(F){return this._geoJSONIndex.getLeaves(F.clusterId,F.limit,F.offset)}}class va{constructor(F){this.self=F,this.actor=new c.F(F),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(z,W)=>{if(this.externalWorkerSourceTypes[z])throw new Error(`Worker source with name "${z}" already registered.`);this.externalWorkerSourceTypes[z]=W},this.self.addProtocol=c.bi,this.self.removeProtocol=c.bj,this.self.registerRTLTextPlugin=z=>{if(c.bD.isParsed())throw new Error("RTL text plugin already registered.");c.bD.setMethods(z)},this.actor.registerMessageHandler("LDT",(z,W)=>this._getDEMWorkerSource(z,W.source).loadTile(W)),this.actor.registerMessageHandler("RDT",(z,W)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(z,W.source).removeTile(W)})),this.actor.registerMessageHandler("GCEZ",(z,W)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(z,W.type,W.source).getClusterExpansionZoom(W)})),this.actor.registerMessageHandler("GCC",(z,W)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(z,W.type,W.source).getClusterChildren(W)})),this.actor.registerMessageHandler("GCL",(z,W)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(z,W.type,W.source).getClusterLeaves(W)})),this.actor.registerMessageHandler("LD",(z,W)=>this._getWorkerSource(z,W.type,W.source).loadData(W)),this.actor.registerMessageHandler("GD",(z,W)=>this._getWorkerSource(z,W.type,W.source).getData()),this.actor.registerMessageHandler("LT",(z,W)=>this._getWorkerSource(z,W.type,W.source).loadTile(W)),this.actor.registerMessageHandler("RT",(z,W)=>this._getWorkerSource(z,W.type,W.source).reloadTile(W)),this.actor.registerMessageHandler("AT",(z,W)=>this._getWorkerSource(z,W.type,W.source).abortTile(W)),this.actor.registerMessageHandler("RMT",(z,W)=>this._getWorkerSource(z,W.type,W.source).removeTile(W)),this.actor.registerMessageHandler("RS",(z,W)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[z]||!this.workerSources[z][W.type]||!this.workerSources[z][W.type][W.source])return;let Q=this.workerSources[z][W.type][W.source];delete this.workerSources[z][W.type][W.source],Q.removeSource!==void 0&&Q.removeSource(W)})),this.actor.registerMessageHandler("RM",z=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[z],delete this.availableImages[z],delete this.workerSources[z],delete this.demWorkerSources[z]})),this.actor.registerMessageHandler("SR",(z,W)=>c._(this,void 0,void 0,function*(){this.referrer=W})),this.actor.registerMessageHandler("SRPS",(z,W)=>this._syncRTLPluginState(z,W)),this.actor.registerMessageHandler("IS",(z,W)=>c._(this,void 0,void 0,function*(){this.self.importScripts(W)})),this.actor.registerMessageHandler("SI",(z,W)=>this._setImages(z,W)),this.actor.registerMessageHandler("UL",(z,W)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(z).update(W.layers,W.removedIds)})),this.actor.registerMessageHandler("SL",(z,W)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(z).replace(W)}))}_setImages(F,z){return c._(this,void 0,void 0,function*(){this.availableImages[F]=z;for(let W in this.workerSources[F]){let Q=this.workerSources[F][W];for(let ce in Q)Q[ce].availableImages=z}})}_syncRTLPluginState(F,z){return c._(this,void 0,void 0,function*(){if(c.bD.isParsed())return c.bD.getState();if(z.pluginStatus!=="loading")return c.bD.setState(z),z;let W=z.pluginURL;if(this.self.importScripts(W),c.bD.isParsed()){let Q={pluginStatus:"loaded",pluginURL:W};return c.bD.setState(Q),Q}throw c.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${W}`)})}_getAvailableImages(F){let z=this.availableImages[F];return z||(z=[]),z}_getLayerIndex(F){let z=this.layerIndexes[F];return z||(z=this.layerIndexes[F]=new s),z}_getWorkerSource(F,z,W){if(this.workerSources[F]||(this.workerSources[F]={}),this.workerSources[F][z]||(this.workerSources[F][z]={}),!this.workerSources[F][z][W]){let Q={sendAsync:(ce,fe)=>(ce.targetMapId=F,this.actor.sendAsync(ce,fe))};switch(z){case"vector":this.workerSources[F][z][W]=new P(Q,this._getLayerIndex(F),this._getAvailableImages(F));break;case"geojson":this.workerSources[F][z][W]=new xo(Q,this._getLayerIndex(F),this._getAvailableImages(F));break;default:this.workerSources[F][z][W]=new this.externalWorkerSourceTypes[z](Q,this._getLayerIndex(F),this._getAvailableImages(F));}}return this.workerSources[F][z][W]}_getDEMWorkerSource(F,z){return this.demWorkerSources[F]||(this.demWorkerSources[F]={}),this.demWorkerSources[F][z]||(this.demWorkerSources[F][z]=new C),this.demWorkerSources[F][z]}}return c.i(self)&&(self.worker=new va(self)),va}),n("index",["exports","./shared"],function(c,s){"use strict";var _="4.7.0";let w,E,P={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,l)=>{let f=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),l(s.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){let r=window.document.createElement("canvas"),l=r.getContext("2d",{willReadFrequently:!0});if(!l)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,l.drawImage(v,0,0,v.width,v.height),l},resolveURL:v=>(w||(w=document.createElement("a")),w.href=v,w.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class C{static testProp(r){if(!C.docStyle)return r[0];for(let l=0;l<r.length;l++)if(r[l]in C.docStyle)return r[l];return r[0]}static create(r,l,f){let d=window.document.createElement(r);return l!==void 0&&(d.className=l),f&&f.appendChild(d),d}static createNS(r,l){return window.document.createElementNS(r,l)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(r,l){r.style[C.transformProp]=l}static addEventListener(r,l,f,d={}){r.addEventListener(l,f,"passive"in d?d:d.capture)}static removeEventListener(r,l,f,d={}){r.removeEventListener(l,f,"passive"in d?d:d.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static getScale(r){let l=r.getBoundingClientRect();return{x:l.width/r.offsetWidth||1,y:l.height/r.offsetHeight||1,boundingClientRect:l}}static getPoint(r,l,f){let d=l.boundingClientRect;return new s.P((f.clientX-d.left)/l.x-r.clientLeft,(f.clientY-d.top)/l.y-r.clientTop)}static mousePos(r,l){let f=C.getScale(r);return C.getPoint(r,f,l)}static touchPos(r,l){let f=[],d=C.getScale(r);for(let m=0;m<l.length;m++)f.push(C.getPoint(r,d,l[m]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}C.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);let B={supported:!1,testSupport:function(v){!xe&&re&&(ye?X(v):$=v)}},$,re,xe=!1,ye=!1;function X(v){let r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,re),v.isContextLost())return;B.supported=!0}catch(l){}v.deleteTexture(r),xe=!0}var K;typeof document!="undefined"&&(re=document.createElement("img"),re.onload=()=>{$&&X($),$=null,ye=!0},re.onerror=()=>{xe=!0,$=null},re.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,l,f,d;v.resetRequestQueue=()=>{r=[],l=0,f=0,d={}},v.addThrottleControl=T=>{let k=f++;return d[k]=T,k},v.removeThrottleControl=T=>{delete d[T],b()},v.getImage=(T,k,R=!0)=>new Promise((D,j)=>{B.supported&&(T.headers||(T.headers={}),T.headers.accept="image/webp,*/*"),s.e(T,{type:"image"}),r.push({abortController:k,requestParameters:T,supportImageRefresh:R,state:"queued",onError:H=>{j(H)},onSuccess:H=>{D(H)}}),b()});let m=T=>s._(this,void 0,void 0,function*(){T.state="running";let{requestParameters:k,supportImageRefresh:R,onError:D,onSuccess:j,abortController:H}=T,Z=R===!1&&!s.i(self)&&!s.g(k.url)&&(!k.headers||Object.keys(k.headers).reduce((oe,ue)=>oe&&ue==="accept",!0));l++;let ee=Z?q(k,H):s.m(k,H);try{let oe=yield ee;delete T.abortController,T.state="completed",oe.data instanceof HTMLImageElement||s.b(oe.data)?j(oe):oe.data&&j({data:yield(ae=oe.data,typeof createImageBitmap=="function"?s.d(ae):s.f(ae)),cacheControl:oe.cacheControl,expires:oe.expires})}catch(oe){delete T.abortController,D(oe)}finally{l--,b()}var ae}),b=()=>{let T=(()=>{for(let k of Object.keys(d))if(d[k]())return!0;return!1})()?s.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:s.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let k=l;k<T&&r.length>0;k++){let R=r.shift();R.abortController.signal.aborted?k--:m(R)}},q=(T,k)=>new Promise((R,D)=>{let j=new Image,H=T.url,Z=T.credentials;Z&&Z==="include"?j.crossOrigin="use-credentials":(Z&&Z==="same-origin"||!s.s(H))&&(j.crossOrigin="anonymous"),k.signal.addEventListener("abort",()=>{j.src="",D(s.c())}),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,R({data:j})},j.onerror=()=>{j.onerror=j.onload=null,k.signal.aborted||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=H})}(K||(K={})),K.resetRequestQueue();class ie{constructor(r){this._transformRequestFn=r}transformRequest(r,l){return this._transformRequestFn&&this._transformRequestFn(r,l)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function _e(v){var r=new s.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var be,Qe=function(v,r,l){return v[0]=r[0]-l[0],v[1]=r[1]-l[1],v[2]=r[2]-l[2],v};be=new s.A(3),s.A!=Float32Array&&(be[0]=0,be[1]=0,be[2]=0);var Le=function(v){var r=v[0],l=v[1];return r*r+l*l};function nt(v){let r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){let l=[];for(let{id:f,url:d}of v){let m=`${f}${d}`;l.indexOf(m)===-1&&(l.push(m),r.push({id:f,url:d}))}}return r}function gt(v,r,l){let f=v.split("?");return f[0]+=`${r}${l}`,f.join("?")}(function(){var v=new s.A(2);s.A!=Float32Array&&(v[0]=0,v[1]=0)})();class Je{constructor(r,l,f,d){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(l,d)}update(r,l,f){let{width:d,height:m}=r,b=!(this.size&&this.size[0]===d&&this.size[1]===m||f),{context:q}=this,{gl:T}=q;if(this.useMipmap=!!(l&&l.useMipmap),T.bindTexture(T.TEXTURE_2D,this.texture),q.pixelStoreUnpackFlipY.set(!1),q.pixelStoreUnpack.set(1),q.pixelStoreUnpackPremultiplyAlpha.set(this.format===T.RGBA&&(!l||l.premultiply!==!1)),b)this.size=[d,m],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?T.texImage2D(T.TEXTURE_2D,0,this.format,this.format,T.UNSIGNED_BYTE,r):T.texImage2D(T.TEXTURE_2D,0,this.format,d,m,0,this.format,T.UNSIGNED_BYTE,r.data);else{let{x:k,y:R}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||s.b(r)?T.texSubImage2D(T.TEXTURE_2D,0,k,R,T.RGBA,T.UNSIGNED_BYTE,r):T.texSubImage2D(T.TEXTURE_2D,0,k,R,d,m,T.RGBA,T.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&T.generateMipmap(T.TEXTURE_2D)}bind(r,l,f){let{context:d}=this,{gl:m}=d;m.bindTexture(m.TEXTURE_2D,this.texture),f!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=m.LINEAR),r!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,f||r),this.filter=r),l!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,l),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function en(v){let{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class Yr extends s.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new s.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:l,promiseResolve:f}of this.requestors)f(this._getImagesForIds(l));this.requestors=[]}}getImage(r){let l=this.images[r];if(l&&!l.data&&l.spriteData){let f=l.spriteData;l.data=new s.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),l.spriteData=null}return l}addImage(r,l){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,l)&&(this.images[r]=l)}_validate(r,l){let f=!0,d=l.data||l.spriteData;return this._validateStretch(l.stretchX,d&&d.width)||(this.fire(new s.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(l.stretchY,d&&d.height)||(this.fire(new s.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(l.content,l)||(this.fire(new s.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,l){if(!r)return!0;let f=0;for(let d of r){if(d[0]<f||d[1]<d[0]||l<d[1])return!1;f=d[1]}return!0}_validateContent(r,l){if(!r)return!0;if(r.length!==4)return!1;let f=l.spriteData,d=f&&f.width||l.data.width,m=f&&f.height||l.data.height;return!(r[0]<0||d<r[0]||r[1]<0||m<r[1]||r[2]<0||d<r[2]||r[3]<0||m<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,l,f=!0){let d=this.getImage(r);if(f&&(d.data.width!==l.data.width||d.data.height!==l.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${l.data.width}x${l.data.height}).`);l.version=d.version+1,this.images[r]=l,this.updatedImages[r]=!0}removeImage(r){let l=this.images[r];delete this.images[r],delete this.patterns[r],l.userImage&&l.userImage.onRemove&&l.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((l,f)=>{let d=!0;if(!this.isLoaded())for(let m of r)this.images[m]||(d=!1);this.isLoaded()||d?l(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:l})})}_getImagesForIds(r){let l={};for(let f of r){let d=this.getImage(f);d||(this.fire(new s.k("styleimagemissing",{id:f})),d=this.getImage(f)),d?l[f]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:s.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return l}getPixelSize(){let{width:r,height:l}=this.atlasImage;return{width:r,height:l}}getPattern(r){let l=this.patterns[r],f=this.getImage(r);if(!f)return null;if(l&&l.position.version===f.version)return l.position;if(l)l.position.version=f.version;else{let d={w:f.data.width+2,h:f.data.height+2,x:0,y:0},m=new s.I(d,f);this.patterns[r]={bin:d,position:m}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){let l=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Je(r,this.atlasImage,l.RGBA),this.atlasTexture.bind(l.LINEAR,l.CLAMP_TO_EDGE)}_updatePatternAtlas(){let r=[];for(let m in this.patterns)r.push(this.patterns[m].bin);let{w:l,h:f}=s.p(r),d=this.atlasImage;d.resize({width:l||1,height:f||1});for(let m in this.patterns){let{bin:b}=this.patterns[m],q=b.x+1,T=b.y+1,k=this.getImage(m).data,R=k.width,D=k.height;s.R.copy(k,d,{x:0,y:0},{x:q,y:T},{width:R,height:D}),s.R.copy(k,d,{x:0,y:D-1},{x:q,y:T-1},{width:R,height:1}),s.R.copy(k,d,{x:0,y:0},{x:q,y:T+D},{width:R,height:1}),s.R.copy(k,d,{x:R-1,y:0},{x:q-1,y:T},{width:1,height:D}),s.R.copy(k,d,{x:0,y:0},{x:q+R,y:T},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let l of r){if(this.callbackDispatchedThisFrame[l])continue;this.callbackDispatchedThisFrame[l]=!0;let f=this.getImage(l);f||s.w(`Image with ID: "${l}" was not found`),en(f)&&this.updateImage(l,f)}}}let xi=1e20;function Ha(v,r,l,f,d,m,b,q,T){for(let k=r;k<r+f;k++)Ks(v,l*m+k,m,d,b,q,T);for(let k=l;k<l+d;k++)Ks(v,k*m+r,1,f,b,q,T)}function Ks(v,r,l,f,d,m,b){m[0]=0,b[0]=-xi,b[1]=xi,d[0]=v[r];for(let q=1,T=0,k=0;q<f;q++){d[q]=v[r+q*l];let R=q*q;do{let D=m[T];k=(d[q]-d[D]+R-D*D)/(q-D)/2}while(k<=b[T]&&--T>-1);T++,m[T]=q,b[T]=k,b[T+1]=xi}for(let q=0,T=0;q<f;q++){for(;b[T+1]<q;)T++;let k=m[T],R=q-k;v[r+q*l]=d[k]+R*R}}class ha{constructor(r,l){this.requestManager=r,this.localIdeographFontFamily=l,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return s._(this,void 0,void 0,function*(){let l=[];for(let m in r)for(let b of r[m])l.push(this._getAndCacheGlyphsPromise(m,b));let f=yield Promise.all(l),d={};for(let{stack:m,id:b,glyph:q}of f)d[m]||(d[m]={}),d[m][b]=q&&{id:q.id,bitmap:q.bitmap.clone(),metrics:q.metrics};return d})}_getAndCacheGlyphsPromise(r,l){return s._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let d=f.glyphs[l];if(d!==void 0)return{stack:r,id:l,glyph:d};if(d=this._tinySDF(f,r,l),d)return f.glyphs[l]=d,{stack:r,id:l,glyph:d};let m=Math.floor(l/256);if(256*m>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[m])return{stack:r,id:l,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[m]){let q=ha.loadGlyphRange(r,m,this.url,this.requestManager);f.requests[m]=q}let b=yield f.requests[m];for(let q in b)this._doesCharSupportLocalGlyph(+q)||(f.glyphs[+q]=b[+q]);return f.ranges[m]=!0,{stack:r,id:l,glyph:b[l]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,l,f){let d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(f))return;let m=r.tinySDF;if(!m){let q="400";/bold/i.test(l)?q="900":/medium/i.test(l)?q="500":/light/i.test(l)&&(q="200"),m=r.tinySDF=new ha.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:q})}let b=m.draw(String.fromCharCode(f));return{id:f,bitmap:new s.o({width:b.width||60,height:b.height||60},b.data),metrics:{width:b.glyphWidth/2||24,height:b.glyphHeight/2||24,left:b.glyphLeft/2+.5||0,top:b.glyphTop/2-27.5||-8,advance:b.glyphAdvance/2||24,isDoubleResolution:!0}}}}ha.loadGlyphRange=function(v,r,l,f){return s._(this,void 0,void 0,function*(){let d=256*r,m=d+255,b=f.transformRequest(l.replace("{fontstack}",v).replace("{range}",`${d}-${m}`),"Glyphs"),q=yield s.l(b,new AbortController);if(!q||!q.data)throw new Error(`Could not load glyph range. range: ${r}, ${d}-${m}`);let T={};for(let k of s.n(q.data))T[k.id]=k;return T})},ha.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:l=8,cutoff:f=.25,fontFamily:d="sans-serif",fontWeight:m="normal",fontStyle:b="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=l;let q=this.size=v+4*r,T=this._createCanvas(q),k=this.ctx=T.getContext("2d",{willReadFrequently:!0});k.font=`${b} ${m} ${v}px ${d}`,k.textBaseline="alphabetic",k.textAlign="left",k.fillStyle="black",this.gridOuter=new Float64Array(q*q),this.gridInner=new Float64Array(q*q),this.f=new Float64Array(q),this.z=new Float64Array(q+1),this.v=new Uint16Array(q)}_createCanvas(v){let r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){let{width:r,actualBoundingBoxAscent:l,actualBoundingBoxDescent:f,actualBoundingBoxLeft:d,actualBoundingBoxRight:m}=this.ctx.measureText(v),b=Math.ceil(l),q=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-d))),T=Math.min(this.size-this.buffer,b+Math.ceil(f)),k=q+2*this.buffer,R=T+2*this.buffer,D=Math.max(k*R,0),j=new Uint8ClampedArray(D),H={data:j,width:k,height:R,glyphWidth:q,glyphHeight:T,glyphTop:b,glyphLeft:0,glyphAdvance:r};if(q===0||T===0)return H;let{ctx:Z,buffer:ee,gridInner:ae,gridOuter:oe}=this;Z.clearRect(ee,ee,q,T),Z.fillText(v,ee,ee+b);let ue=Z.getImageData(ee,ee,q,T);oe.fill(xi,0,D),ae.fill(0,0,D);for(let Y=0;Y<T;Y++)for(let he=0;he<q;he++){let de=ue.data[4*(Y*q+he)+3]/255;if(de===0)continue;let ge=(Y+ee)*k+he+ee;if(de===1)oe[ge]=0,ae[ge]=xi;else{let Te=.5-de;oe[ge]=Te>0?Te*Te:0,ae[ge]=Te<0?Te*Te:0}}Ha(oe,0,0,k,R,k,this.f,this.v,this.z),Ha(ae,ee,ee,q,T,k,this.f,this.v,this.z);for(let Y=0;Y<D;Y++){let he=Math.sqrt(oe[Y])-Math.sqrt(ae[Y]);j[Y]=Math.round(255-255*(he/this.radius+this.cutoff))}return H}};class ah{constructor(){this.specification=s.v.light.position}possiblyEvaluate(r,l){return s.x(r.expression.evaluate(l))}interpolate(r,l,f){return{x:s.y.number(r.x,l.x,f),y:s.y.number(r.y,l.y,f),z:s.y.number(r.z,l.z,f)}}}let Jo;class Wa extends s.E{constructor(r){super(),Jo=Jo||new s.q({anchor:new s.D(s.v.light.anchor),position:new ah,color:new s.D(s.v.light.color),intensity:new s.D(s.v.light.intensity)}),this._transitionable=new s.T(Jo),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,l={}){if(!this._validate(s.r,r,l))for(let f in r){let d=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,f){return(!f||f.validate!==!1)&&s.t(this,r.call(s.u,{value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.v}))}}let Di=new s.q({"sky-color":new s.D(s.v.sky["sky-color"]),"horizon-color":new s.D(s.v.sky["horizon-color"]),"fog-color":new s.D(s.v.sky["fog-color"]),"fog-ground-blend":new s.D(s.v.sky["fog-ground-blend"]),"horizon-fog-blend":new s.D(s.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new s.D(s.v.sky["sky-horizon-blend"]),"atmosphere-blend":new s.D(s.v.sky["atmosphere-blend"])});class $n extends s.E{constructor(r){super(),this._transitionable=new s.T(Di),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new s.z(0))}setSky(r,l={}){if(!this._validate(s.B,r,l)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let f in r){let d=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,l,f={}){return(f==null?void 0:f.validate)!==!1&&s.t(this,r.call(s.u,s.e({value:l,style:{glyphs:!0,sprite:!0},styleSpec:s.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Xs{constructor(r,l){this.width=r,this.height=l,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,l){let f=r.join(",")+String(l);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,l)),this.dashEntry[f]}getDashRanges(r,l,f){let d=[],m=r.length%2==1?-r[r.length-1]*f:0,b=r[0]*f,q=!0;d.push({left:m,right:b,isDash:q,zeroLength:r[0]===0});let T=r[0];for(let k=1;k<r.length;k++){q=!q;let R=r[k];m=T*f,T+=R,b=T*f,d.push({left:m,right:b,isDash:q,zeroLength:R===0})}return d}addRoundDash(r,l,f){let d=l/2;for(let m=-f;m<=f;m++){let b=this.width*(this.nextRow+f+m),q=0,T=r[q];for(let k=0;k<this.width;k++){k/T.right>1&&(T=r[++q]);let R=Math.abs(k-T.left),D=Math.abs(k-T.right),j=Math.min(R,D),H,Z=m/f*(d+1);if(T.isDash){let ee=d-Math.abs(Z);H=Math.sqrt(j*j+ee*ee)}else H=d-Math.sqrt(j*j+Z*Z);this.data[b+k]=Math.max(0,Math.min(255,H+128))}}}addRegularDash(r){for(let q=r.length-1;q>=0;--q){let T=r[q],k=r[q+1];T.zeroLength?r.splice(q,1):k&&k.isDash===T.isDash&&(k.left=T.left,r.splice(q,1))}let l=r[0],f=r[r.length-1];l.isDash===f.isDash&&(l.left=f.left-this.width,f.right=l.right+this.width);let d=this.width*this.nextRow,m=0,b=r[m];for(let q=0;q<this.width;q++){q/b.right>1&&(b=r[++m]);let T=Math.abs(q-b.left),k=Math.abs(q-b.right),R=Math.min(T,k);this.data[d+q]=Math.max(0,Math.min(255,(b.isDash?R:-R)+128))}}addDash(r,l){let f=l?7:0,d=2*f+1;if(this.nextRow+d>this.height)return s.w("LineAtlas out of space"),null;let m=0;for(let q=0;q<r.length;q++)m+=r[q];if(m!==0){let q=this.width/m,T=this.getDashRanges(r,this.width,q);l?this.addRoundDash(T,q,f):this.addRegularDash(T)}let b={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:m};return this.nextRow+=d,this.dirty=!0,b}bind(r){let l=r.gl;this.texture?(l.bindTexture(l.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,l.texSubImage2D(l.TEXTURE_2D,0,0,0,this.width,this.height,l.ALPHA,l.UNSIGNED_BYTE,this.data))):(this.texture=l.createTexture(),l.bindTexture(l.TEXTURE_2D,this.texture),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.REPEAT),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.LINEAR),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.LINEAR),l.texImage2D(l.TEXTURE_2D,0,l.ALPHA,this.width,this.height,0,l.ALPHA,l.UNSIGNED_BYTE,this.data))}}let mo="maplibre_preloaded_worker_pool";class fa{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<fa.workerCount;)this.workers.push(new Worker(s.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(l=>{l.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[mo]}numActive(){return Object.keys(this.active).length}}let Ys=Math.floor(P.hardwareConcurrency/2),tn,Vn;function Qo(){return tn||(tn=new fa),tn}fa.workerCount=s.C(globalThis)?Math.max(Math.min(Ys,3),1):1;class es{constructor(r,l){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=l;let f=this.workerPool.acquire(l);for(let d=0;d<f.length;d++){let m=new s.F(f[d],l);m.name=`Worker ${d}`,this.actors.push(m)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,l){let f=[];for(let d of this.actors)f.push(d.sendAsync({type:r,data:l}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(l=>{l.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,l){for(let f of this.actors)f.registerMessageHandler(r,l)}}function Cl(){return Vn||(Vn=new es(Qo(),s.G),Vn.registerMessageHandler("GR",(v,r,l)=>s.m(r,l))),Vn}function Za(v,r){let l=s.H();return s.J(l,l,[1,1,0]),s.K(l,l,[.5*v.width,.5*v.height,1]),s.L(l,l,v.calculatePosMatrix(r.toUnwrapped()))}function vo(v,r,l,f,d,m){let b=function(D,j,H){if(D)for(let Z of D){let ee=j[Z];if(ee&&ee.source===H&&ee.type==="fill-extrusion")return!0}else for(let Z in j){let ee=j[Z];if(ee.source===H&&ee.type==="fill-extrusion")return!0}return!1}(d&&d.layers,r,v.id),q=m.maxPitchScaleFactor(),T=v.tilesIn(f,q,b);T.sort(go);let k=[];for(let D of T)k.push({wrappedTileID:D.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(r,l,v._state,D.queryGeometry,D.cameraQueryGeometry,D.scale,d,m,q,Za(v.transform,D.tileID))});let R=function(D){let j={},H={};for(let Z of D){let ee=Z.queryResults,ae=Z.wrappedTileID,oe=H[ae]=H[ae]||{};for(let ue in ee){let Y=ee[ue],he=oe[ue]=oe[ue]||{},de=j[ue]=j[ue]||[];for(let ge of Y)he[ge.featureIndex]||(he[ge.featureIndex]=!0,de.push(ge))}}return j}(k);for(let D in R)R[D].forEach(j=>{let H=j.feature,Z=v.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=Z});return R}function go(v,r){let l=v.tileID,f=r.tileID;return l.overscaledZ-f.overscaledZ||l.canonical.y-f.canonical.y||l.wrap-f.wrap||l.canonical.x-f.canonical.x}function Js(v,r,l){return s._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield s.h(r.transformRequest(v.url,"Source"),l)).data:yield P.frameAsync(l),!f)return null;let d=s.M(s.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(d.vectorLayerIds=f.vector_layers.map(m=>m.id)),d})}class Se{constructor(r,l){r&&(l?this.setSouthWest(r).setNorthEast(l):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof s.N?new s.N(r.lng,r.lat):s.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof s.N?new s.N(r.lng,r.lat):s.N.convert(r),this}extend(r){let l=this._sw,f=this._ne,d,m;if(r instanceof s.N)d=r,m=r;else{if(!(r instanceof Se))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Se.convert(r)):this.extend(s.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(s.N.convert(r)):this;if(d=r._sw,m=r._ne,!d||!m)return this}return l||f?(l.lng=Math.min(d.lng,l.lng),l.lat=Math.min(d.lat,l.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new s.N(d.lng,d.lat),this._ne=new s.N(m.lng,m.lat)),this}getCenter(){return new s.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new s.N(this.getWest(),this.getNorth())}getSouthEast(){return new s.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:l,lat:f}=s.N.convert(r),d=this._sw.lng<=l&&l<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=l&&l>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&d}static convert(r){return r instanceof Se?r:r&&new Se(r)}static fromLngLat(r,l=0){let f=360*l/40075017,d=f/Math.cos(Math.PI/180*r.lat);return new Se(new s.N(r.lng-d,r.lat-f),new s.N(r.lng+d,r.lat+f))}adjustAntiMeridian(){let r=new s.N(this._sw.lng,this._sw.lat),l=new s.N(this._ne.lng,this._ne.lat);return new Se(r,r.lng>l.lng?new s.N(l.lng+360,l.lat):l)}}class ts{constructor(r,l,f){this.bounds=Se.convert(this.validateBounds(r)),this.minzoom=l||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){let l=Math.pow(2,r.z),f=Math.floor(s.O(this.bounds.getWest())*l),d=Math.floor(s.Q(this.bounds.getNorth())*l),m=Math.ceil(s.O(this.bounds.getEast())*l),b=Math.ceil(s.Q(this.bounds.getSouth())*l);return r.x>=f&&r.x<m&&r.y>=d&&r.y<b}}class Ml extends s.E{constructor(r,l,f,d){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,s.e(this,s.M(l,["url","scheme","tileSize","promoteId"])),this._options=s.e({type:"vector"},l),this._collectResourceTiming=l.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield Js(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(s.e(this,r),r.bounds&&(this.tileBounds=new ts(r.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new s.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return s.e({},this._options)}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(l,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((m,b)=>{r.reloadPromise={resolve:m,reject:b}})}else r.actor=this.dispatcher.getActor(),d="LT";r.abortController=new AbortController;try{let m=yield r.actor.sendAsync({type:d,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,m)}catch(m){if(delete r.abortController,r.aborted)return;if(m&&m.status!==404)throw m;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,l){if(l&&l.resourceTiming&&(r.resourceTiming=l.resourceTiming),l&&this.map._refreshExpiredTiles&&r.setExpiryData(l),r.loadVectorData(l,this.map.painter),r.reloadPromise){let f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends s.E{constructor(r,l,f,d){super(),this.id=r,this.dispatcher=f,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=s.e({type:"raster"},l),s.e(this,s.M(l,["url","scheme","tileSize"]))}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield Js(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(s.e(this,r),r.bounds&&(this.tileBounds=new ts(r.bounds,this.minzoom,this.maxzoom)),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new s.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return s.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{let f=yield K.getImage(this.map._requestManager.transformRequest(l,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let d=this.map.painter.context,m=d.gl,b=f.data;r.texture=this.map.painter.getTileTexture(b.width),r.texture?r.texture.update(b,{useMipmap:!0}):(r.texture=new Je(d,b,m.RGBA,{useMipmap:!0}),r.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class _r extends Vt{constructor(r,l,f,d){super(r,l,f,d),this.type="raster-dem",this.maxzoom=22,this._options=s.e({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox",this.redFactor=l.redFactor,this.greenFactor=l.greenFactor,this.blueFactor=l.blueFactor,this.baseShift=l.baseShift}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(l,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{let d=yield K.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){let m=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let b=s.b(m)&&s.U()?m:yield this.readImageNow(m),q={type:this.type,uid:r.uid,source:this.id,rawImageData:b,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();let T=yield r.actor.sendAsync({type:"LDT",data:q});r.dem=T,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}readImageNow(r){return s._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&s.V()){let l=r.width+2,f=r.height+2;try{return new s.R({width:l,height:f},(yield s.W(r,-1,-1,l,f)))}catch(d){}}return P.getImageData(r,1)})}_getNeighboringTiles(r){let l=r.canonical,f=Math.pow(2,l.z),d=(l.x-1+f)%f,m=l.x===0?r.wrap-1:r.wrap,b=(l.x+1+f)%f,q=l.x+1===f?r.wrap+1:r.wrap,T={};return T[new s.S(r.overscaledZ,m,l.z,d,l.y).key]={backfilled:!1},T[new s.S(r.overscaledZ,q,l.z,b,l.y).key]={backfilled:!1},l.y>0&&(T[new s.S(r.overscaledZ,m,l.z,d,l.y-1).key]={backfilled:!1},T[new s.S(r.overscaledZ,r.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},T[new s.S(r.overscaledZ,q,l.z,b,l.y-1).key]={backfilled:!1}),l.y+1<f&&(T[new s.S(r.overscaledZ,m,l.z,d,l.y+1).key]={backfilled:!1},T[new s.S(r.overscaledZ,r.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},T[new s.S(r.overscaledZ,q,l.z,b,l.y+1).key]={backfilled:!1}),T}unloadTile(r){return s._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class kl extends s.E{constructor(r,l,f,d){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(d),this._data=l.data,this._options=s.e({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;let m=s.X/this.tileSize;l.clusterMaxZoom!==void 0&&this.maxzoom<=l.clusterMaxZoom&&s.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${l.clusterMaxZoom}".`),this.workerOptions=s.e({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*m,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*m,extent:s.X,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:s.X,radius:(l.clusterRadius||50)*m,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return s._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return s._(this,void 0,void 0,function*(){let r=s.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,l,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:l,offset:f}})}_updateWorkerData(r){return s._(this,void 0,void 0,function*(){let l=s.e({type:this.type},this.workerOptions);r?l.dataDiff=r:typeof this._data=="string"?(l.request=this.map._requestManager.transformRequest(P.resolveURL(this._data),"Source"),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new s.k("dataloading",{dataType:"source"}));try{let f=yield this.actor.sendAsync({type:"LD",data:l});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new s.k("dataabort",{dataType:"source"}));let d=null;f.resourceTiming&&f.resourceTiming[this.id]&&(d=f.resourceTiming[this.id].slice(0));let m={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&s.e(m,{resourceTiming:d}),this.fire(new s.k("data",Object.assign(Object.assign({},m),{sourceDataType:"metadata"}))),this.fire(new s.k("data",Object.assign(Object.assign({},m),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new s.k("dataabort",{dataType:"source"}));this.fire(new s.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return s._(this,void 0,void 0,function*(){let l=r.actor?"RT":"LT";r.actor=this.actor;let f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;let d=yield this.actor.sendAsync({type:l,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(d,this.map.painter,l==="RT")})}abortTile(r){return s._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return s._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return s.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var yo=s.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ka extends s.E{constructor(r,l,f,d){super(),this.id=r,this.dispatcher=f,this.coordinates=l.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=l}load(r){return s._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new s.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let l=yield K.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,l&&l.data&&(this.image=l.data,r&&(this.coordinates=r),this._finishLoading())}catch(l){this._request=null,this._loaded=!0,this.fire(new s.j(l))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new s.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let l=r.map(s.Z.fromLngLat);this.tileID=function(d){let m=1/0,b=1/0,q=-1/0,T=-1/0;for(let j of d)m=Math.min(m,j.x),b=Math.min(b,j.y),q=Math.max(q,j.x),T=Math.max(T,j.y);let k=Math.max(q-m,T-b),R=Math.max(0,Math.floor(-Math.log(k)/Math.LN2)),D=Math.pow(2,R);return new s.a1(R,Math.floor((m+q)/2*D),Math.floor((b+T)/2*D))}(l),this.minzoom=this.maxzoom=this.tileID.z;let f=l.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new s.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,s.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,s.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,s.X,s.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new s.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,yo.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Je(r,this.image,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let m=this.tiles[d];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,f=!0)}f&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return s._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Qs extends Ka{constructor(r,l,f,d){super(r,l,f,d),this.roundZoom=!0,this.type="video",this.options=l}load(){return s._(this,void 0,void 0,function*(){this._loaded=!1;let r=this.options;this.urls=[];for(let l of r.urls)this.urls.push(this.map._requestManager.transformRequest(l,"Source").url);try{let l=yield s.a3(this.urls);if(this._loaded=!0,!l)return;this.video=l,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(l){this.fire(new s.j(l))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){let l=this.video.seekable;r<l.start(0)||r>l.end(0)?this.fire(new s.j(new s.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let r=this.map.painter.context,l=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,yo.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new Je(r,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let m=this.tiles[d];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,f=!0)}f&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class _n extends Ka{constructor(r,l,f,d){super(r,l,f,d),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(m=>!Array.isArray(m)||m.length!==2||m.some(b=>typeof b!="number"))||this.fire(new s.j(new s.a2(`sources.${r}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new s.j(new s.a2(`sources.${r}`,null,"missing required property \"coordinates\""))),l.animate&&typeof l.animate!="boolean"&&this.fire(new s.j(new s.a2(`sources.${r}`,null,"optional \"animate\" property must be a boolean value"))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new s.j(new s.a2(`sources.${r}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new s.j(new s.a2(`sources.${r}`,null,"missing required property \"canvas\""))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){return s._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new s.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let l=this.map.painter.context,f=l.gl;this.boundsBuffer||(this.boundsBuffer=l.createVertexBuffer(this._boundsArray,yo.members)),this.boundsSegments||(this.boundsSegments=s.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Je(l,this.canvas,f.RGBA,{premultiply:!0});let d=!1;for(let m in this.tiles){let b=this.tiles[m];b.state!=="loaded"&&(b.state="loaded",b.texture=this.texture,d=!0)}d&&this.fire(new s.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}let Ol={},Rl=v=>{switch(v){case"geojson":return kl;case"image":return Ka;case"raster":return Vt;case"raster-dem":return _r;case"vector":return Ml;case"video":return Qs;case"canvas":return _n;}return Ol[v]},ke="RTLPluginLoaded";class da extends s.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Cl()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(l=>{throw this.status="error",l})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return s._(this,arguments,void 0,function*(l,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=P.resolveURL(l),!this.url)throw new Error(`requested url ${l} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return s._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new s.k(ke))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let bi=null;function pa(){return bi||(bi=new da),bi}class _o{constructor(r,l){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=s.a4(),this.uses=0,this.tileSize=l,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){let l=r+this.timeAdded;l<this.fadeEndTime||(this.fadeEndTime=l)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,l,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(d,m){let b={};if(!m)return b;for(let q of d){let T=q.layerIds.map(k=>m.getLayer(k)).filter(Boolean);if(T.length!==0){q.layers=T,q.stateDependentLayerIds&&(q.stateDependentLayers=q.stateDependentLayerIds.map(k=>T.filter(R=>R.id===k)[0]));for(let k of T)b[k.id]=q}}return b}(r.buckets,l.style),this.hasSymbolBuckets=!1;for(let d in this.buckets){let m=this.buckets[d];if(m instanceof s.a6){if(this.hasSymbolBuckets=!0,!f)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let d in this.buckets){let m=this.buckets[d];if(m instanceof s.a6&&m.hasRTLText){this.hasRTLText=!0,pa().lazyLoad();break}}this.queryPadding=0;for(let d in this.buckets){let m=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,l.style.getLayer(d).queryRadius(m))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new s.a5}unloadVectorData(){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(let f in this.buckets){let d=this.buckets[f];d.uploadPending()&&d.upload(r)}let l=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Je(r,this.imageAtlas.image,l.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Je(r,this.glyphAtlasImage,l.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,l,f,d,m,b,q,T,k,R){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:m,scale:b,tileSize:this.tileSize,pixelPosMatrix:R,transform:T,params:q,queryPadding:this.queryPadding*k},r,l,f):{}}querySourceFeatures(r,l){let f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;let d=f.loadVTLayers(),m=l&&l.sourceLayer?l.sourceLayer:"",b=d._geojsonTileLayer||d[m];if(!b)return;let q=s.a7(l&&l.filter),{z:T,x:k,y:R}=this.tileID.canonical,D={z:T,x:k,y:R};for(let j=0;j<b.length;j++){let H=b.feature(j);if(q.needGeometry){let ae=s.a8(H,!0);if(!q.filter(new s.z(this.tileID.overscaledZ),ae,this.tileID.canonical))continue}else if(!q.filter(new s.z(this.tileID.overscaledZ),H))continue;let Z=f.getId(H,m),ee=new s.a9(H,T,k,R,Z);ee.tile=D,r.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let l=this.expirationTime;if(r.cacheControl){let f=s.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let f=Date.now(),d=!1;if(this.expirationTime>f)d=!1;else if(l){if(this.expirationTime<l)d=!0;else{let m=this.expirationTime-l;m?this.expirationTime=f+Math.max(m,3e4):d=!0}}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,l){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;let f=this.latestFeatureIndex.loadVTLayers();for(let d in this.buckets){if(!l.style.hasLayer(d))continue;let m=this.buckets[d],b=m.layers[0].sourceLayer||"_geojsonTileLayer",q=f[b],T=r[b];if(!q||!T||Object.keys(T).length===0)continue;m.update(T,q,this.imageAtlas&&this.imageAtlas.patternPositions||{});let k=l&&l.style&&l.style.getLayer(d);k&&(this.queryPadding=Math.max(this.queryPadding,k.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<P.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=P.now()+r}setDependencies(r,l){let f={};for(let d of l)f[d]=!0;this.dependencies[r]=f}hasDependency(r,l){for(let f of r){let d=this.dependencies[f];if(d){for(let m of l)if(d[m])return!0}}return!1}}class Fe{constructor(r,l){this.max=r,this.onRemove=l,this.reset()}reset(){for(let r in this.data)for(let l of this.data[r])l.timeout&&clearTimeout(l.timeout),this.onRemove(l.value);return this.data={},this.order=[],this}add(r,l,f){let d=r.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);let m={value:l,timeout:void 0};if(f!==void 0&&(m.timeout=setTimeout(()=>{this.remove(r,m)},f)),this.data[d].push(m),this.order.push(d),this.order.length>this.max){let b=this._getAndRemoveByKey(this.order[0]);b&&this.onRemove(b)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let l=this.data[r].shift();return l.timeout&&clearTimeout(l.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),l.value}getByKey(r){let l=this.data[r];return l?l[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,l){if(!this.has(r))return this;let f=r.wrapped().key,d=l===void 0?0:this.data[f].indexOf(l),m=this.data[f][d];return this.data[f].splice(d,1),m.timeout&&clearTimeout(m.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(m.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let l=this._getAndRemoveByKey(this.order[0]);l&&this.onRemove(l)}return this}filter(r){let l=[];for(let f in this.data)for(let d of this.data[f])r(d.value)||l.push(d);for(let f of l)this.remove(f.value.tileID,f)}}class At{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,l,f){let d=String(l);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][d]=this.stateChanges[r][d]||{},s.e(this.stateChanges[r][d],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(let m in this.state[r])m!==d&&(this.deletedStates[r][m]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][d]===null){this.deletedStates[r][d]={};for(let m in this.state[r][d])f[m]||(this.deletedStates[r][d][m]=null)}else for(let m in f)this.deletedStates[r]&&this.deletedStates[r][d]&&this.deletedStates[r][d][m]===null&&delete this.deletedStates[r][d][m]}removeFeatureState(r,l,f){if(this.deletedStates[r]===null)return;let d=String(l);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&l!==void 0)this.deletedStates[r][d]!==null&&(this.deletedStates[r][d]=this.deletedStates[r][d]||{},this.deletedStates[r][d][f]=null);else if(l!==void 0){if(this.stateChanges[r]&&this.stateChanges[r][d])for(f in this.deletedStates[r][d]={},this.stateChanges[r][d])this.deletedStates[r][d][f]=null;else this.deletedStates[r][d]=null;}else this.deletedStates[r]=null}getState(r,l){let f=String(l),d=s.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){let m=this.deletedStates[r][l];if(m===null)return{};for(let b in m)delete d[b]}return d}initializeTileState(r,l){r.setFeatureState(this.state,l)}coalesceChanges(r,l){let f={};for(let d in this.stateChanges){this.state[d]=this.state[d]||{};let m={};for(let b in this.stateChanges[d])this.state[d][b]||(this.state[d][b]={}),s.e(this.state[d][b],this.stateChanges[d][b]),m[b]=this.state[d][b];f[d]=m}for(let d in this.deletedStates){this.state[d]=this.state[d]||{};let m={};if(this.deletedStates[d]===null)for(let b in this.state[d])m[b]={},this.state[d][b]={};else for(let b in this.deletedStates[d]){if(this.deletedStates[d][b]===null)this.state[d][b]={};else for(let q of Object.keys(this.deletedStates[d][b]))delete this.state[d][b][q];m[b]=this.state[d][b]}f[d]=f[d]||{},s.e(f[d],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(let d in r)r[d].setFeatureState(f,l)}}class dt extends s.E{constructor(r,l,f){super(),this.id=r,this.dispatcher=f,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,m,b,q)=>{let T=new(Rl(m.type))(d,m,b,q);if(T.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${T.id}`);return T})(r,l,f,this),this._tiles={},this._cache=new Fe(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new At,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let r in this._tiles){let l=this._tiles[r];if(l.state!=="loaded"&&l.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,l,f){return s._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,l,f)}catch(d){r.state="errored",d.status!==404?this._source.fire(new s.j(d,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new s.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let l in this._tiles){let f=this._tiles[l];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Li).map(r=>r.key)}getRenderableIds(r){let l=[];for(let f in this._tiles)this._isIdRenderable(f,r)&&l.push(this._tiles[f]);return r?l.sort((f,d)=>{let m=f.tileID,b=d.tileID,q=new s.P(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),T=new s.P(b.canonical.x,b.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-b.overscaledZ||T.y-q.y||T.x-q.x}).map(f=>f.tileID.key):l.map(f=>f.tileID).sort(Li).map(f=>f.key)}hasRenderableParent(r){let l=this.findLoadedParent(r,0);return!!l&&this._isIdRenderable(l.tileID.key)}_isIdRenderable(r,l){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(l||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,l){return s._(this,void 0,void 0,function*(){let f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=l),yield this._loadTile(f,r,l))})}_tileLoaded(r,l,f){r.timeAdded=P.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(l,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new s.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){let l=this.getRenderableIds();for(let d=0;d<l.length;d++){let m=l[d];if(r.neighboringTiles&&r.neighboringTiles[m]){let b=this.getTileByID(m);f(r,b),f(b,r)}}function f(d,m){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let b=m.tileID.canonical.x-d.tileID.canonical.x,q=m.tileID.canonical.y-d.tileID.canonical.y,T=Math.pow(2,d.tileID.canonical.z),k=m.tileID.key;b===0&&q===0||Math.abs(q)>1||(Math.abs(b)>1&&(Math.abs(b+T)===1?b+=T:Math.abs(b-T)===1&&(b-=T)),m.dem&&d.dem&&(d.dem.backfillBorder(m.dem,b,q),d.neighboringTiles&&d.neighboringTiles[k]&&(d.neighboringTiles[k].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,l,f,d){for(let m in this._tiles){let b=this._tiles[m];if(d[m]||!b.hasData()||b.tileID.overscaledZ<=l||b.tileID.overscaledZ>f)continue;let q=b.tileID;for(;b&&b.tileID.overscaledZ>l+1;){let k=b.tileID.scaledTo(b.tileID.overscaledZ-1);b=this._tiles[k.key],b&&b.hasData()&&(q=k)}let T=q;for(;T.overscaledZ>l;)if(T=T.scaledTo(T.overscaledZ-1),r[T.key]){d[q.key]=q;break}}}findLoadedParent(r,l){if(r.key in this._loadedParentTiles){let f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=l?f:null}for(let f=r.overscaledZ-1;f>=l;f--){let d=r.scaledTo(f),m=this._getLoadedTile(d);if(m)return m}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){let l=this._tiles[r.key];return l&&l.hasData()?l:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){let l=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,d=Math.floor(l*f*(this._maxTileCacheZoomLevels===null?s.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),m=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(m)}handleWrapJump(r){let l=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,l){let f={};for(let d in this._tiles){let m=this._tiles[d];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+l),f[m.tileID.key]=m}this._tiles=f;for(let d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(let d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(r,l,f,d,m,b){let q={},T={},k=Object.keys(r),R=P.now();for(let D of k){let j=r[D],H=this._tiles[D];if(!H||H.fadeEndTime!==0&&H.fadeEndTime<=R)continue;let Z=this.findLoadedParent(j,l),ee=this.findLoadedSibling(j),ae=Z||ee||null;ae&&(this._addTile(ae.tileID),q[ae.tileID.key]=ae.tileID),T[D]=j}this._retainLoadedChildren(T,d,f,r);for(let D in q)r[D]||(this._coveredTiles[D]=!0,r[D]=q[D]);if(b){let D={},j={};for(let H of m)this._tiles[H.key].hasData()?D[H.key]=H:j[H.key]=H;for(let H in j){let Z=j[H].children(this._source.maxzoom);this._tiles[Z[0].key]&&this._tiles[Z[1].key]&&this._tiles[Z[2].key]&&this._tiles[Z[3].key]&&(D[Z[0].key]=r[Z[0].key]=Z[0],D[Z[1].key]=r[Z[1].key]=Z[1],D[Z[2].key]=r[Z[2].key]=Z[2],D[Z[3].key]=r[Z[3].key]=Z[3],delete j[H])}for(let H in j){let Z=j[H],ee=this.findLoadedParent(Z,this._source.minzoom),ae=this.findLoadedSibling(Z),oe=ee||ae||null;if(oe){D[oe.tileID.key]=r[oe.tileID.key]=oe.tileID;for(let ue in D)D[ue].isChildOf(oe.tileID)&&delete D[ue]}}for(let H in this._tiles)D[H]||(this._coveredTiles[H]=!0)}}update(r,l){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=l,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new s.S(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:l}),this._source.hasTile&&(f=f.filter(R=>this._source.hasTile(R)))):f=[];let d=r.coveringZoomLevel(this._source),m=Math.max(d-dt.maxOverzooming,this._source.minzoom),b=Math.max(d+dt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let R={};for(let D of f)if(D.canonical.z>this._source.minzoom){let j=D.scaledTo(D.canonical.z-1);R[j.key]=j;let H=D.scaledTo(Math.max(this._source.minzoom,Math.min(D.canonical.z,5)));R[H.key]=H}f=f.concat(Object.values(R))}let q=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,q&&this.fire(new s.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let T=this._updateRetainedTiles(f,d);Gn(this._source.type)&&this._updateCoveredAndRetainedTiles(T,m,b,d,f,l);for(let R in T)this._tiles[R].clearFadeHold();let k=s.ab(this._tiles,T);for(let R of k){let D=this._tiles[R];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,l){var f;let d={},m={},b=Math.max(l-dt.maxOverzooming,this._source.minzoom),q=Math.max(l+dt.maxUnderzooming,this._source.minzoom),T={};for(let k of r){let R=this._addTile(k);d[k.key]=k,R.hasData()||l<this._source.maxzoom&&(T[k.key]=k)}this._retainLoadedChildren(T,l,q,d);for(let k of r){let R=this._tiles[k.key];if(R.hasData())continue;if(l+1>this._source.maxzoom){let j=k.children(this._source.maxzoom)[0],H=this.getTile(j);if(H&&H.hasData()){d[j.key]=j;continue}}else{let j=k.children(this._source.maxzoom);if(d[j[0].key]&&d[j[1].key]&&d[j[2].key]&&d[j[3].key])continue}let D=R.wasRequested();for(let j=k.overscaledZ-1;j>=b;--j){let H=k.scaledTo(j);if(m[H.key])break;if(m[H.key]=!0,R=this.getTile(H),!R&&D&&(R=this._addTile(H)),R){let Z=R.hasData();if((Z||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||D)&&(d[H.key]=H),D=R.wasRequested(),Z)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let r in this._tiles){let l=[],f,d=this._tiles[r].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){f=this._loadedParentTiles[d.key];break}l.push(d.key);let m=d.scaledTo(d.overscaledZ-1);if(f=this._getLoadedTile(m),f)break;d=m}for(let m of l)this._loadedParentTiles[m]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let r in this._tiles){let l=this._tiles[r].tileID,f=this._getLoadedTile(l);this._loadedSiblingTiles[l.key]=f}}_addTile(r){let l=this._tiles[r.key];if(l)return l;l=this._cache.getAndRemove(r),l&&(this._setTileReloadTimer(r.key,l),l.tileID=r,this._state.initializeTileState(l,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,l)));let f=l;return l||(l=new _o(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(l,r.key,l.state)),l.uses++,this._tiles[r.key]=l,f||this._source.fire(new s.k("dataloading",{tile:l,coord:l.tileID,dataType:"source"})),l}_setTileReloadTimer(r,l){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let f=l.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){let l=this._tiles[r];l&&(l.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),l.uses>0||(l.hasData()&&l.state!=="reloading"?this._cache.add(l.tileID,l,l.getExpiryTimeout()):(l.aborted=!0,this._abortTile(l),this._unloadTile(l))))}_dataHandler(r){let l=r.sourceDataType;r.dataType==="source"&&l==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&l==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,l,f){let d=[],m=this.transform;if(!m)return d;let b=f?m.getCameraQueryGeometry(r):r,q=r.map(Z=>m.pointCoordinate(Z,this.terrain)),T=b.map(Z=>m.pointCoordinate(Z,this.terrain)),k=this.getIds(),R=1/0,D=1/0,j=-1/0,H=-1/0;for(let Z of T)R=Math.min(R,Z.x),D=Math.min(D,Z.y),j=Math.max(j,Z.x),H=Math.max(H,Z.y);for(let Z=0;Z<k.length;Z++){let ee=this._tiles[k[Z]];if(ee.holdingForFade())continue;let ae=ee.tileID,oe=Math.pow(2,m.zoom-ee.tileID.overscaledZ),ue=l*ee.queryPadding*s.X/ee.tileSize/oe,Y=[ae.getTilePoint(new s.Z(R,D)),ae.getTilePoint(new s.Z(j,H))];if(Y[0].x-ue<s.X&&Y[0].y-ue<s.X&&Y[1].x+ue>=0&&Y[1].y+ue>=0){let he=q.map(ge=>ae.getTilePoint(ge)),de=T.map(ge=>ae.getTilePoint(ge));d.push({tile:ee,tileID:ae,queryGeometry:he,cameraQueryGeometry:de,scale:oe})}}return d}getVisibleCoordinates(r){let l=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(let f of l)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return l}hasTransition(){if(this._source.hasTransition())return!0;if(Gn(this._source.type)){let r=P.now();for(let l in this._tiles)if(this._tiles[l].fadeEndTime>=r)return!0}return!1}setFeatureState(r,l,f){this._state.updateState(r=r||"_geojsonTileLayer",l,f)}removeFeatureState(r,l,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",l,f)}getFeatureState(r,l){return this._state.getState(r=r||"_geojsonTileLayer",l)}setDependencies(r,l,f){let d=this._tiles[r];d&&d.setDependencies(l,f)}reloadTilesForDependencies(r,l){for(let f in this._tiles)this._tiles[f].hasDependency(r,l)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,l))}}function Li(v,r){let l=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||f-l||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function Gn(v){return v==="raster"||v==="image"||v==="video"}dt.maxOverzooming=10,dt.maxUnderzooming=3;class _t{constructor(r,l){this.reset(r,l)}reset(r,l){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(l||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=s.ac(r,0,1);let l=1,f=this._distances[l],d=r*this.paddedLength+this.padding;for(;f<d&&l<this._distances.length;)f=this._distances[++l];let m=l-1,b=this._distances[m],q=f-b,T=q>0?(d-b)/q:0;return this.points[m].mult(1-T).add(this.points[l].mult(T))}}function ma(v,r){let l=!0;return v==="always"||v!=="never"&&r!=="never"||(l=!1),l}class Xa{constructor(r,l,f){let d=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(l/f);for(let b=0;b<this.xCellCount*this.yCellCount;b++)d.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=l,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/l,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,l,f,d,m){this._forEachCell(l,f,d,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(l),this.bboxes.push(f),this.bboxes.push(d),this.bboxes.push(m)}insertCircle(r,l,f,d){this._forEachCell(l-d,f-d,l+d,f+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(l),this.circles.push(f),this.circles.push(d)}_insertBoxCell(r,l,f,d,m,b){this.boxCells[m].push(b)}_insertCircleCell(r,l,f,d,m,b){this.circleCells[m].push(b)}_query(r,l,f,d,m,b,q){if(f<0||r>this.width||d<0||l>this.height)return[];let T=[];if(r<=0&&l<=0&&this.width<=f&&this.height<=d){if(m)return[{key:null,x1:r,y1:l,x2:f,y2:d}];for(let k=0;k<this.boxKeys.length;k++)T.push({key:this.boxKeys[k],x1:this.bboxes[4*k],y1:this.bboxes[4*k+1],x2:this.bboxes[4*k+2],y2:this.bboxes[4*k+3]});for(let k=0;k<this.circleKeys.length;k++){let R=this.circles[3*k],D=this.circles[3*k+1],j=this.circles[3*k+2];T.push({key:this.circleKeys[k],x1:R-j,y1:D-j,x2:R+j,y2:D+j})}}else this._forEachCell(r,l,f,d,this._queryCell,T,{hitTest:m,overlapMode:b,seenUids:{box:{},circle:{}}},q);return T}query(r,l,f,d){return this._query(r,l,f,d,!1,null)}hitTest(r,l,f,d,m,b){return this._query(r,l,f,d,!0,m,b).length>0}hitTestCircle(r,l,f,d,m){let b=r-f,q=r+f,T=l-f,k=l+f;if(q<0||b>this.width||k<0||T>this.height)return!1;let R=[];return this._forEachCell(b,T,q,k,this._queryCellCircle,R,{hitTest:!0,overlapMode:d,circle:{x:r,y:l,radius:f},seenUids:{box:{},circle:{}}},m),R.length>0}_queryCell(r,l,f,d,m,b,q,T){let{seenUids:k,hitTest:R,overlapMode:D}=q,j=this.boxCells[m];if(j!==null){let Z=this.bboxes;for(let ee of j)if(!k.box[ee]){k.box[ee]=!0;let ae=4*ee,oe=this.boxKeys[ee];if(r<=Z[ae+2]&&l<=Z[ae+3]&&f>=Z[ae+0]&&d>=Z[ae+1]&&(!T||T(oe))&&(!R||!ma(D,oe.overlapMode))&&(b.push({key:oe,x1:Z[ae],y1:Z[ae+1],x2:Z[ae+2],y2:Z[ae+3]}),R))return!0}}let H=this.circleCells[m];if(H!==null){let Z=this.circles;for(let ee of H)if(!k.circle[ee]){k.circle[ee]=!0;let ae=3*ee,oe=this.circleKeys[ee];if(this._circleAndRectCollide(Z[ae],Z[ae+1],Z[ae+2],r,l,f,d)&&(!T||T(oe))&&(!R||!ma(D,oe.overlapMode))){let ue=Z[ae],Y=Z[ae+1],he=Z[ae+2];if(b.push({key:oe,x1:ue-he,y1:Y-he,x2:ue+he,y2:Y+he}),R)return!0}}}return!1}_queryCellCircle(r,l,f,d,m,b,q,T){let{circle:k,seenUids:R,overlapMode:D}=q,j=this.boxCells[m];if(j!==null){let Z=this.bboxes;for(let ee of j)if(!R.box[ee]){R.box[ee]=!0;let ae=4*ee,oe=this.boxKeys[ee];if(this._circleAndRectCollide(k.x,k.y,k.radius,Z[ae+0],Z[ae+1],Z[ae+2],Z[ae+3])&&(!T||T(oe))&&!ma(D,oe.overlapMode))return b.push(!0),!0}}let H=this.circleCells[m];if(H!==null){let Z=this.circles;for(let ee of H)if(!R.circle[ee]){R.circle[ee]=!0;let ae=3*ee,oe=this.circleKeys[ee];if(this._circlesCollide(Z[ae],Z[ae+1],Z[ae+2],k.x,k.y,k.radius)&&(!T||T(oe))&&!ma(D,oe.overlapMode))return b.push(!0),!0}}}_forEachCell(r,l,f,d,m,b,q,T){let k=this._convertToXCellCoord(r),R=this._convertToYCellCoord(l),D=this._convertToXCellCoord(f),j=this._convertToYCellCoord(d);for(let H=k;H<=D;H++)for(let Z=R;Z<=j;Z++)if(m.call(this,r,l,f,d,this.xCellCount*Z+H,b,q,T))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,l,f,d,m,b){let q=d-r,T=m-l,k=f+b;return k*k>q*q+T*T}_circleAndRectCollide(r,l,f,d,m,b,q){let T=(b-d)/2,k=Math.abs(r-(d+T));if(k>T+f)return!1;let R=(q-m)/2,D=Math.abs(l-(m+R));if(D>R+f)return!1;if(k<=T||D<=R)return!0;let j=k-T,H=D-R;return j*j+H*H<=f*f}}function xo(v,r,l,f,d){let m=s.H();return r?(s.K(m,m,[1/d,1/d,1]),l||s.ad(m,m,f.angle)):s.L(m,f.labelPlaneMatrix,v),m}function va(v,r,l,f,d){if(r){let m=s.ae(v);return s.K(m,m,[d,d,1]),l||s.ad(m,m,-f.angle),m}return f.glCoordMatrix}function te(v,r,l,f){let d;f?(d=[v,r,f(v,r),1],s.af(d,d,l)):(d=[v,r,0,1],Bt(d,d,l));let m=d[3];return{point:new s.P(d[0]/m,d[1]/m),signedDistanceFromCamera:m,isOccluded:!1}}function F(v,r){return .5+v/r*.5}function z(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function W(v,r,l,f,d,m,b,q,T,k,R,D,j,H,Z){let ee=f?v.textSizeData:v.iconSizeData,ae=s.ag(ee,l.transform.zoom),oe=[256/l.width*2+1,256/l.height*2+1],ue=f?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ue.clear();let Y=v.lineVertexArray,he=f?v.text.placedSymbolArray:v.icon.placedSymbolArray,de=l.transform.width/l.transform.height,ge=!1;for(let Te=0;Te<he.length;Te++){let Me=he.get(Te);if(Me.hidden||Me.writingMode===s.ah.vertical&&!ge){lt(Me.numGlyphs,ue);continue}ge=!1;let je=te(Me.anchorX,Me.anchorY,r,Z);if(!z(je.point,oe)){lt(Me.numGlyphs,ue);continue}let We=F(l.transform.cameraToCenterDistance,je.signedDistanceFromCamera),ze=s.ai(ee,ae,Me),De=b?ze/We:ze*We,tt={getElevation:Z,labelPlaneMatrix:d,lineVertexArray:Y,pitchWithMap:b,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:k,tileAnchorPoint:new s.P(Me.anchorX,Me.anchorY),unwrappedTileID:R,width:D,height:j,translation:H},yt=fe(tt,Me,De,!1,q,r,m,v.glyphOffsetArray,ue,de,T);ge=yt.useVertical,(yt.notEnoughRoom||ge||yt.needsFlipping&&fe(tt,Me,De,!0,q,r,m,v.glyphOffsetArray,ue,de,T).notEnoughRoom)&&lt(Me.numGlyphs,ue)}f?v.text.dynamicLayoutVertexBuffer.updateData(ue):v.icon.dynamicLayoutVertexBuffer.updateData(ue)}function Q(v,r,l,f,d,m,b,q){let T=m.glyphStartIndex+m.numGlyphs,k=m.lineStartIndex,R=m.lineStartIndex+m.lineLength,D=r.getoffsetX(m.glyphStartIndex),j=r.getoffsetX(T-1),H=Re(v*D,l,f,d,m.segment,k,R,q,b);if(!H)return null;let Z=Re(v*j,l,f,d,m.segment,k,R,q,b);return Z?q.projectionCache.anyProjectionOccluded?null:{first:H,last:Z}:null}function ce(v,r,l,f){return v===s.ah.horizontal&&Math.abs(l.y-r.y)>Math.abs(l.x-r.x)*f?{useVertical:!0}:(v===s.ah.vertical?r.y<l.y:r.x>l.x)?{needsFlipping:!0}:null}function fe(v,r,l,f,d,m,b,q,T,k,R){let D=l/24,j=r.lineOffsetX*D,H=r.lineOffsetY*D,Z;if(r.numGlyphs>1){let ee=r.glyphStartIndex+r.numGlyphs,ae=r.lineStartIndex,oe=r.lineStartIndex+r.lineLength,ue=Q(D,q,j,H,f,r,R,v);if(!ue)return{notEnoughRoom:!0};let Y=te(ue.first.point.x,ue.first.point.y,b,v.getElevation).point,he=te(ue.last.point.x,ue.last.point.y,b,v.getElevation).point;if(d&&!f){let de=ce(r.writingMode,Y,he,k);if(de)return de}Z=[ue.first];for(let de=r.glyphStartIndex+1;de<ee-1;de++)Z.push(Re(D*q.getoffsetX(de),j,H,f,r.segment,ae,oe,v,R));Z.push(ue.last)}else{if(d&&!f){let ae=te(v.tileAnchorPoint.x,v.tileAnchorPoint.y,m,v.getElevation).point,oe=r.lineStartIndex+r.segment+1,ue=new s.P(v.lineVertexArray.getx(oe),v.lineVertexArray.gety(oe)),Y=te(ue.x,ue.y,m,v.getElevation),he=Y.signedDistanceFromCamera>0?Y.point:function(ge,Te,Me,je,We,ze){return me(ge,Te,Me,1,We,ze)}(v.tileAnchorPoint,ue,ae,0,m,v),de=ce(r.writingMode,ae,he,k);if(de)return de}let ee=Re(D*q.getoffsetX(r.glyphStartIndex),j,H,f,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,R);if(!ee||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Z=[ee]}for(let ee of Z)s.aj(T,ee.point,ee.angle);return{}}function me(v,r,l,f,d,m){let b=v.add(v.sub(r)._unit()),q=d!==void 0?te(b.x,b.y,d,m.getElevation).point:Ie(b.x,b.y,m).point,T=l.sub(q);return l.add(T._mult(f/T.mag()))}function se(v,r,l){let f=r.projectionCache;if(f.projections[v])return f.projections[v];let d=new s.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),m=Ie(d.x,d.y,r);if(m.signedDistanceFromCamera>0)return f.projections[v]=m.point,f.anyProjectionOccluded=f.anyProjectionOccluded||m.isOccluded,m.point;let b=v-l.direction;return function(q,T,k,R,D){return me(q,T,k,R,void 0,D)}(l.distanceFromAnchor===0?r.tileAnchorPoint:new s.P(r.lineVertexArray.getx(b),r.lineVertexArray.gety(b)),d,l.previousVertex,l.absOffsetX-l.distanceFromAnchor+1,r)}function Ie(v,r,l){let f=v+l.translation[0],d=r+l.translation[1],m;return!l.pitchWithMap&&l.projection.useSpecialProjectionForSymbols?(m=l.projection.projectTileCoordinates(f,d,l.unwrappedTileID,l.getElevation),m.point.x=(.5*m.point.x+.5)*l.width,m.point.y=(.5*-m.point.y+.5)*l.height):(m=te(f,d,l.labelPlaneMatrix,l.getElevation),m.isOccluded=!1),m}function Ae(v,r,l){return v._unit()._perp()._mult(r*l)}function we(v,r,l,f,d,m,b,q,T){if(q.projectionCache.offsets[v])return q.projectionCache.offsets[v];let k=l.add(r);if(v+T.direction<f||v+T.direction>=d)return q.projectionCache.offsets[v]=k,k;let R=se(v+T.direction,q,T),D=Ae(R.sub(l),b,T.direction),j=l.add(D),H=R.add(D);return q.projectionCache.offsets[v]=s.ak(m,k,j,H)||k,q.projectionCache.offsets[v]}function Re(v,r,l,f,d,m,b,q,T){let k=f?v-r:v+r,R=k>0?1:-1,D=0;f&&(R*=-1,D=Math.PI),R<0&&(D+=Math.PI);let j,H=R>0?m+d:m+d+1;q.projectionCache.cachedAnchorPoint?j=q.projectionCache.cachedAnchorPoint:(j=Ie(q.tileAnchorPoint.x,q.tileAnchorPoint.y,q).point,q.projectionCache.cachedAnchorPoint=j);let Z,ee,ae=j,oe=j,ue=0,Y=0,he=Math.abs(k),de=[],ge;for(;ue+Y<=he;){if(H+=R,H<m||H>=b)return null;ue+=Y,oe=ae,ee=Z;let je={absOffsetX:he,direction:R,distanceFromAnchor:ue,previousVertex:oe};if(ae=se(H,q,je),l===0)de.push(oe),ge=ae.sub(oe);else{let We,ze=ae.sub(oe);We=ze.mag()===0?Ae(se(H+R,q,je).sub(ae),l,R):Ae(ze,l,R),ee||(ee=oe.add(We)),Z=we(H,We,ae,m,b,ee,l,q,je),de.push(ee),ge=Z.sub(ee)}Y=ge.mag()}let Te=ge._mult((he-ue)/Y)._add(ee||oe),Me=D+Math.atan2(ae.y-oe.y,ae.x-oe.x);return de.push(Te),{point:Te,angle:T?Me:0,path:de}}let st=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function lt(v,r){for(let l=0;l<v;l++){let f=r.length;r.resize(f+4),r.float32.set(st,3*f)}}function Bt(v,r,l){let f=r[0],d=r[1];return v[0]=l[0]*f+l[4]*d+l[12],v[1]=l[1]*f+l[5]*d+l[13],v[3]=l[3]*f+l[7]*d+l[15],v}let wt=100;class jt{constructor(r,l,f=new Xa(r.width+200,r.height+200,25),d=new Xa(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=l,this.grid=f,this.ignoredGrid=d,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+wt,this.screenBottomBoundary=r.height+wt,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,l,f,d,m,b,q,T,k,R,D){let j=r.anchorPointX+T[0],H=r.anchorPointY+T[1],Z=this.projectAndGetPerspectiveRatio(d,j,H,m,R),ee=f*Z.perspectiveRatio,ae;if(b||q)ae=this._projectCollisionBox(r,ee,d,m,b,q,T,Z,R,D);else{let de=Z.point.x+(D?D.x*ee:0),ge=Z.point.y+(D?D.y*ee:0);ae={allPointsOccluded:!1,box:[de+r.x1*ee,ge+r.y1*ee,de+r.x2*ee,ge+r.y2*ee]}}let[oe,ue,Y,he]=ae.box;return this.mapProjection.useSpecialProjectionForSymbols&&(b?ae.allPointsOccluded:this.mapProjection.isOccluded(j,H,m))||Z.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(oe,ue,Y,he)||l!=="always"&&this.grid.hitTest(oe,ue,Y,he,l,k)?{box:[oe,ue,Y,he],placeable:!1,offscreen:!1}:{box:[oe,ue,Y,he],placeable:!0,offscreen:this.isOffscreen(oe,ue,Y,he)}}placeCollisionCircles(r,l,f,d,m,b,q,T,k,R,D,j,H,Z,ee,ae){let oe=[],ue=new s.P(l.anchorX,l.anchorY),Y=this.getPerspectiveRatio(b,ue.x,ue.y,q,ae),he=(D?m/Y:m*Y)/s.ap,de={getElevation:ae,labelPlaneMatrix:T,lineVertexArray:f,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ue,unwrappedTileID:q,width:this.transform.width,height:this.transform.height,translation:ee},ge=Q(he,d,l.lineOffsetX*he,l.lineOffsetY*he,!1,l,!1,de),Te=!1,Me=!1,je=!0;if(ge){let We=.5*H*Y+Z,ze=new s.P(-100,-100),De=new s.P(this.screenRightBoundary,this.screenBottomBoundary),tt=new _t,yt=ge.first,Ne=ge.last,Ve=[];for(let Et=yt.path.length-1;Et>=1;Et--)Ve.push(yt.path[Et]);for(let Et=1;Et<Ne.path.length;Et++)Ve.push(Ne.path[Et]);let mt=2.5*We;if(k){let Et=this.projectPathToScreenSpace(Ve,de,k);Ve=Et.some(Rt=>Rt.signedDistanceFromCamera<=0)?[]:Et.map(Rt=>Rt.point)}let lr=[];if(Ve.length>0){let Et=Ve[0].clone(),Rt=Ve[0].clone();for(let cr=1;cr<Ve.length;cr++)Et.x=Math.min(Et.x,Ve[cr].x),Et.y=Math.min(Et.y,Ve[cr].y),Rt.x=Math.max(Rt.x,Ve[cr].x),Rt.y=Math.max(Rt.y,Ve[cr].y);lr=Et.x>=ze.x&&Rt.x<=De.x&&Et.y>=ze.y&&Rt.y<=De.y?[Ve]:Rt.x<ze.x||Et.x>De.x||Rt.y<ze.y||Et.y>De.y?[]:s.al([Ve],ze.x,ze.y,De.x,De.y)}for(let Et of lr){tt.reset(Et,.25*We);let Rt=0;Rt=tt.length<=.5*We?1:Math.ceil(tt.paddedLength/mt)+1;for(let cr=0;cr<Rt;cr++){let hi=cr/Math.max(Rt-1,1),Yn=tt.lerp(hi),hr=Yn.x+wt,Ni=Yn.y+wt;oe.push(hr,Ni,We,0);let Si=hr-We,fi=Ni-We,qi=hr+We,xa=Ni+We;if(je=je&&this.isOffscreen(Si,fi,qi,xa),Me=Me||this.isInsideGrid(Si,fi,qi,xa),r!=="always"&&this.grid.hitTestCircle(hr,Ni,We,r,j)&&(Te=!0,!R))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!R&&Te||!Me||Y<this.perspectiveRatioCutoff?[]:oe,offscreen:je,collisionDetected:Te}}projectPathToScreenSpace(r,l,f){return r.map(d=>te(d.x,d.y,f,l.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let l=[],f=1/0,d=1/0,m=-1/0,b=-1/0;for(let R of r){let D=new s.P(R.x+wt,R.y+wt);f=Math.min(f,D.x),d=Math.min(d,D.y),m=Math.max(m,D.x),b=Math.max(b,D.y),l.push(D)}let q=this.grid.query(f,d,m,b).concat(this.ignoredGrid.query(f,d,m,b)),T={},k={};for(let R of q){let D=R.key;if(T[D.bucketInstanceId]===void 0&&(T[D.bucketInstanceId]={}),T[D.bucketInstanceId][D.featureIndex])continue;let j=[new s.P(R.x1,R.y1),new s.P(R.x2,R.y1),new s.P(R.x2,R.y2),new s.P(R.x1,R.y2)];s.am(l,j)&&(T[D.bucketInstanceId][D.featureIndex]=!0,k[D.bucketInstanceId]===void 0&&(k[D.bucketInstanceId]=[]),k[D.bucketInstanceId].push(D.featureIndex))}return k}insertCollisionBox(r,l,f,d,m,b){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:m,collisionGroupID:b,overlapMode:l},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,l,f,d,m,b){let q=f?this.ignoredGrid:this.grid,T={bucketInstanceId:d,featureIndex:m,collisionGroupID:b,overlapMode:l};for(let k=0;k<r.length;k+=4)q.insertCircle(T,r[k],r[k+1],r[k+2])}projectAndGetPerspectiveRatio(r,l,f,d,m){let b;m?(b=[l,f,m(l,f),1],s.af(b,b,r)):(b=[l,f,0,1],Bt(b,b,r));let q=b[3];return{point:new s.P((b[0]/q+1)/2*this.transform.width+wt,(-b[1]/q+1)/2*this.transform.height+wt),perspectiveRatio:.5+this.transform.cameraToCenterDistance/q*.5,isOccluded:!1,signedDistanceFromCamera:q}}getPerspectiveRatio(r,l,f,d,m){let b=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(l,f,d,m):te(l,f,r,m);return .5+this.transform.cameraToCenterDistance/b.signedDistanceFromCamera*.5}isOffscreen(r,l,f,d){return f<wt||r>=this.screenRightBoundary||d<wt||l>this.screenBottomBoundary}isInsideGrid(r,l,f,d){return f>=0&&r<this.gridRightBoundary&&d>=0&&l<this.gridBottomBoundary}getViewportMatrix(){let r=s.an([]);return s.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,l,f,d,m,b,q,T,k,R){let D=new s.P(1,0),j=new s.P(0,1),H=new s.P(r.anchorPointX+q[0],r.anchorPointY+q[1]);if(b&&!m){let je=this.projectAndGetPerspectiveRatio(f,H.x+1,H.y,d,k).point.sub(T.point).unit(),We=Math.atan(je.y/je.x)+(je.x<0?Math.PI:0),ze=Math.sin(We),De=Math.cos(We);D=new s.P(De,ze),j=new s.P(-ze,De)}else if(!b&&m){let je=-this.transform.angle,We=Math.sin(je),ze=Math.cos(je);D=new s.P(ze,We),j=new s.P(-We,ze)}let Z=T.point,ee=l;if(m){Z=H;let je=this.transform.zoom-Math.floor(this.transform.zoom);ee=Math.pow(2,-je),ee*=this.mapProjection.getPitchedTextCorrection(this.transform,H,d),R||(ee*=s.ac(.5+T.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}R&&(Z=Z.add(D.mult(R.x*ee)).add(j.mult(R.y*ee)));let ae=r.x1*ee,oe=r.x2*ee,ue=(ae+oe)/2,Y=r.y1*ee,he=r.y2*ee,de=(Y+he)/2,ge=[{offsetX:ae,offsetY:Y},{offsetX:ue,offsetY:Y},{offsetX:oe,offsetY:Y},{offsetX:oe,offsetY:de},{offsetX:oe,offsetY:he},{offsetX:ue,offsetY:he},{offsetX:ae,offsetY:he},{offsetX:ae,offsetY:de}],Te=[];for(let{offsetX:je,offsetY:We}of ge)Te.push(new s.P(Z.x+D.x*je+j.x*We,Z.y+D.y*je+j.y*We));let Me=!1;if(m){let je=Te.map(We=>this.projectAndGetPerspectiveRatio(f,We.x,We.y,d,k));Me=je.some(We=>!We.isOccluded),Te=je.map(We=>We.point)}else Me=!0;return{box:s.ao(Te),allPointsOccluded:!Me}}}function Ot(v,r,l){return r*(s.X/(v.tileSize*Math.pow(2,l-v.tileID.overscaledZ)))}class Lr{constructor(r,l,f,d){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?l:-l))):d&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class xr{constructor(r,l,f,d,m){this.text=new Lr(r?r.text:null,l,f,m),this.icon=new Lr(r?r.icon:null,l,d,m)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pt{constructor(r,l,f){this.text=r,this.icon=l,this.skipFade=f}}class Kt{constructor(){this.invProjMatrix=s.H(),this.viewportMatrix=s.H(),this.circles=[]}}class pr{constructor(r,l,f,d,m){this.bucketInstanceId=r,this.featureIndex=l,this.sourceLayerIndex=f,this.bucketIndex=d,this.tileID=m}}class Jr{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let l=++this.maxGroupID;this.collisionGroups[r]={ID:l,predicate:f=>f.collisionGroupID===l}}return this.collisionGroups[r]}}function ii(v,r,l,f,d){let{horizontalAlign:m,verticalAlign:b}=s.au(v);return new s.P(-(m-.5)*r+f[0]*d,-(b-.5)*l+f[1]*d)}class wi{constructor(r,l,f,d,m,b){this.transform=r.clone(),this.terrain=f,this.collisionIndex=new jt(this.transform,l),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Jr(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=b,b&&(b.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){let l=this.terrain;return l?(f,d)=>l.getElevation(r,f,d):null}getBucketParts(r,l,f,d){let m=f.getBucket(l),b=f.latestFeatureIndex;if(!m||!b||l.id!==m.layerIds[0])return;let q=f.collisionBoxArray,T=m.layers[0].layout,k=m.layers[0].paint,R=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),D=f.tileSize/s.X,j=f.tileID.toUnwrapped(),H=this.transform.calculatePosMatrix(j),Z=T.get("text-pitch-alignment")==="map",ee=T.get("text-rotation-alignment")==="map",ae=Ot(f,1,this.transform.zoom),oe=this.collisionIndex.mapProjection.translatePosition(this.transform,f,k.get("text-translate"),k.get("text-translate-anchor")),ue=this.collisionIndex.mapProjection.translatePosition(this.transform,f,k.get("icon-translate"),k.get("icon-translate-anchor")),Y=xo(H,Z,ee,this.transform,ae),he=null;if(Z){let ge=va(H,Z,ee,this.transform,ae);he=s.L([],this.transform.labelPlaneMatrix,ge)}this.retainedQueryData[m.bucketInstanceId]=new pr(m.bucketInstanceId,b,m.sourceLayerIndex,m.index,f.tileID);let de={bucket:m,layout:T,translationText:oe,translationIcon:ue,posMatrix:H,unwrappedTileID:j,textLabelPlaneMatrix:Y,labelToScreenMatrix:he,scale:R,textPixelRatio:D,holdingForFade:f.holdingForFade(),collisionBoxArray:q,partiallyEvaluatedTextSize:s.ag(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(d)for(let ge of m.sortKeyRanges){let{sortKey:Te,symbolInstanceStart:Me,symbolInstanceEnd:je}=ge;r.push({sortKey:Te,symbolInstanceStart:Me,symbolInstanceEnd:je,parameters:de})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:de})}attemptAnchorPlacement(r,l,f,d,m,b,q,T,k,R,D,j,H,Z,ee,ae,oe,ue,Y){let he=s.aq[r.textAnchor],de=[r.textOffset0,r.textOffset1],ge=ii(he,f,d,de,m),Te=this.collisionIndex.placeCollisionBox(l,j,T,k,R,q,b,ae,D.predicate,Y,ge);if((!ue||this.collisionIndex.placeCollisionBox(ue,j,T,k,R,q,b,oe,D.predicate,Y,ge).placeable)&&Te.placeable){let Me;if(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(Me=this.prevPlacement.variableOffsets[H.crossTileID].anchor),H.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[H.crossTileID]={textOffset:de,width:f,height:d,anchor:he,textBoxScale:m,prevAnchor:Me},this.markUsedJustification(Z,he,H,ee),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,ee,H),this.placedOrientations[H.crossTileID]=ee),{shift:ge,placedGlyphBoxes:Te}}}placeLayerBucketPart(r,l,f){let{bucket:d,layout:m,translationText:b,translationIcon:q,posMatrix:T,unwrappedTileID:k,textLabelPlaneMatrix:R,labelToScreenMatrix:D,textPixelRatio:j,holdingForFade:H,collisionBoxArray:Z,partiallyEvaluatedTextSize:ee,collisionGroup:ae}=r.parameters,oe=m.get("text-optional"),ue=m.get("icon-optional"),Y=s.ar(m,"text-overlap","text-allow-overlap"),he=Y==="always",de=s.ar(m,"icon-overlap","icon-allow-overlap"),ge=de==="always",Te=m.get("text-rotation-alignment")==="map",Me=m.get("text-pitch-alignment")==="map",je=m.get("icon-text-fit")!=="none",We=m.get("symbol-z-order")==="viewport-y",ze=he&&(ge||!d.hasIconData()||ue),De=ge&&(he||!d.hasTextData()||oe);!d.collisionArrays&&Z&&d.deserializeCollisionBoxes(Z);let tt=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),yt=(Ne,Ve,mt)=>{var lr,Et;if(l[Ne.crossTileID])return;if(H)return void(this.placements[Ne.crossTileID]=new Pt(!1,!1,!1));let Rt=!1,cr=!1,hi=!0,Yn=null,hr={box:null,placeable:!1,offscreen:null},Ni={box:null,placeable:!1,offscreen:null},Si=null,fi=null,qi=null,xa=0,wu=0,zh=0;Ve.textFeatureIndex?xa=Ve.textFeatureIndex:Ne.useRuntimeCollisionCircles&&(xa=Ne.featureIndex),Ve.verticalTextFeatureIndex&&(wu=Ve.verticalTextFeatureIndex);let Su=Ve.textBox;if(Su){let In=ni=>{let di=s.ah.horizontal;if(d.allowVerticalPlacement&&!ni&&this.prevPlacement){let un=this.prevPlacement.placedOrientations[Ne.crossTileID];un&&(this.placedOrientations[Ne.crossTileID]=un,di=un,this.markUsedOrientation(d,di,Ne))}return di},En=(ni,di)=>{if(d.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&Ve.verticalTextBox){for(let un of d.writingModes)if(un===s.ah.vertical?(hr=di(),Ni=hr):hr=ni(),hr&&hr.placeable)break}else hr=ni()},So=Ne.textAnchorOffsetStartIndex,Jn=Ne.textAnchorOffsetEndIndex;if(Jn===So){let ni=(di,un)=>{let Ft=this.collisionIndex.placeCollisionBox(di,Y,j,T,k,Me,Te,b,ae.predicate,tt);return Ft&&Ft.placeable&&(this.markUsedOrientation(d,un,Ne),this.placedOrientations[Ne.crossTileID]=un),Ft};En(()=>ni(Su,s.ah.horizontal),()=>{let di=Ve.verticalTextBox;return d.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&di?ni(di,s.ah.vertical):{box:null,offscreen:null}}),In(hr&&hr.placeable)}else{let ni=s.aq[(Et=(lr=this.prevPlacement)===null||lr===void 0?void 0:lr.variableOffsets[Ne.crossTileID])===null||Et===void 0?void 0:Et.anchor],di=(Ft,ps,qu)=>{let Iu=Ft.x2-Ft.x1,Ry=Ft.y2-Ft.y1,Mw=Ne.textBoxScale,Dy=je&&de==="never"?ps:null,qo=null,Ly=Y==="never"?1:2,Nh="never";ni&&Ly++;for(let Ql=0;Ql<Ly;Ql++){for(let Bh=So;Bh<Jn;Bh++){let jh=d.textAnchorOffsets.get(Bh);if(ni&&jh.textAnchor!==ni)continue;let Eu=this.attemptAnchorPlacement(jh,Ft,Iu,Ry,Mw,Te,Me,j,T,k,ae,Nh,Ne,d,qu,b,q,Dy,tt);if(Eu&&(qo=Eu.placedGlyphBoxes,qo&&qo.placeable))return Rt=!0,Yn=Eu.shift,qo}ni?ni=null:Nh=Y}return f&&!qo&&(qo={box:this.collisionIndex.placeCollisionBox(Su,"always",j,T,k,Me,Te,b,ae.predicate,tt,new s.P(0,0)).box,offscreen:!1,placeable:!1}),qo};En(()=>di(Su,Ve.iconBox,s.ah.horizontal),()=>{let Ft=Ve.verticalTextBox;return d.allowVerticalPlacement&&(!hr||!hr.placeable)&&Ne.numVerticalGlyphVertices>0&&Ft?di(Ft,Ve.verticalIconBox,s.ah.vertical):{box:null,occluded:!0,offscreen:null}}),hr&&(Rt=hr.placeable,hi=hr.offscreen);let un=In(hr&&hr.placeable);if(!Rt&&this.prevPlacement){let Ft=this.prevPlacement.variableOffsets[Ne.crossTileID];Ft&&(this.variableOffsets[Ne.crossTileID]=Ft,this.markUsedJustification(d,Ft.anchor,Ne,un))}}}if(Si=hr,Rt=Si&&Si.placeable,hi=Si&&Si.offscreen,Ne.useRuntimeCollisionCircles){let In=d.text.placedSymbolArray.get(Ne.centerJustifiedTextSymbolIndex),En=s.ai(d.textSizeData,ee,In),So=m.get("text-padding");fi=this.collisionIndex.placeCollisionCircles(Y,In,d.lineVertexArray,d.glyphOffsetArray,En,T,k,R,D,f,Me,ae.predicate,Ne.collisionCircleDiameter,So,b,tt),fi.circles.length&&fi.collisionDetected&&!f&&s.w("Collisions detected, but collision boxes are not shown"),Rt=he||fi.circles.length>0&&!fi.collisionDetected,hi=hi&&fi.offscreen}if(Ve.iconFeatureIndex&&(zh=Ve.iconFeatureIndex),Ve.iconBox){let In=En=>this.collisionIndex.placeCollisionBox(En,de,j,T,k,Me,Te,q,ae.predicate,tt,je&&Yn?Yn:void 0);Ni&&Ni.placeable&&Ve.verticalIconBox?(qi=In(Ve.verticalIconBox),cr=qi.placeable):(qi=In(Ve.iconBox),cr=qi.placeable),hi=hi&&qi.offscreen}let qn=oe||Ne.numHorizontalGlyphVertices===0&&Ne.numVerticalGlyphVertices===0,Fh=ue||Ne.numIconVertices===0;qn||Fh?Fh?qn||(cr=cr&&Rt):Rt=cr&&Rt:cr=Rt=cr&&Rt;let zp=cr&&qi.placeable;if(Rt&&Si.placeable&&this.collisionIndex.insertCollisionBox(Si.box,Y,m.get("text-ignore-placement"),d.bucketInstanceId,Ni&&Ni.placeable&&wu?wu:xa,ae.ID),zp&&this.collisionIndex.insertCollisionBox(qi.box,de,m.get("icon-ignore-placement"),d.bucketInstanceId,zh,ae.ID),fi&&Rt&&this.collisionIndex.insertCollisionCircles(fi.circles,Y,m.get("text-ignore-placement"),d.bucketInstanceId,xa,ae.ID),f&&this.storeCollisionData(d.bucketInstanceId,mt,Ve,Si,qi,fi),Ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ne.crossTileID]=new Pt(Rt||ze,cr||De,hi||d.justReloaded),l[Ne.crossTileID]=!0};if(We){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ne=d.getSortedSymbolIndexes(this.transform.angle);for(let Ve=Ne.length-1;Ve>=0;--Ve){let mt=Ne[Ve];yt(d.symbolInstances.get(mt),d.collisionArrays[mt],mt)}}else for(let Ne=r.symbolInstanceStart;Ne<r.symbolInstanceEnd;Ne++)yt(d.symbolInstances.get(Ne),d.collisionArrays[Ne],Ne);if(f&&d.bucketInstanceId in this.collisionCircleArrays){let Ne=this.collisionCircleArrays[d.bucketInstanceId];s.as(Ne.invProjMatrix,T),Ne.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(r,l,f,d,m,b){if(f.textBox||f.iconBox){let q,T;this.collisionBoxArrays.has(r)?q=this.collisionBoxArrays.get(r):(q=new Map,this.collisionBoxArrays.set(r,q)),q.has(l)?T=q.get(l):(T={text:null,icon:null},q.set(l,T)),f.textBox&&(T.text=d.box),f.iconBox&&(T.icon=m.box)}if(b){let q=this.collisionCircleArrays[r];q===void 0&&(q=this.collisionCircleArrays[r]=new Kt);for(let T=0;T<b.circles.length;T+=4)q.circles.push(b.circles[T+0]),q.circles.push(b.circles[T+1]),q.circles.push(b.circles[T+2]),q.circles.push(b.collisionDetected?1:0)}}markUsedJustification(r,l,f,d){let m;m=d===s.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[s.at(l)];let b=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(let q of b)q>=0&&(r.text.placedSymbolArray.get(q).crossTileID=m>=0&&q!==m?0:f.crossTileID)}markUsedOrientation(r,l,f){let d=l===s.ah.horizontal||l===s.ah.horizontalOnly?l:0,m=l===s.ah.vertical?l:0,b=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(let q of b)r.text.placedSymbolArray.get(q).placedOrientation=d;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=m)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let l=this.prevPlacement,f=!1;this.prevZoomAdjustment=l?l.zoomAdjustment(this.transform.zoom):0;let d=l?l.symbolFadeChange(r):1,m=l?l.opacities:{},b=l?l.variableOffsets:{},q=l?l.placedOrientations:{};for(let T in this.placements){let k=this.placements[T],R=m[T];R?(this.opacities[T]=new xr(R,d,k.text,k.icon),f=f||k.text!==R.text.placed||k.icon!==R.icon.placed):(this.opacities[T]=new xr(null,d,k.text,k.icon,k.skipFade),f=f||k.text||k.icon)}for(let T in m){let k=m[T];if(!this.opacities[T]){let R=new xr(k,d,!1,!1);R.isHidden()||(this.opacities[T]=R,f=f||k.text.placed||k.icon.placed)}}for(let T in b)this.variableOffsets[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.variableOffsets[T]=b[T]);for(let T in q)this.placedOrientations[T]||!this.opacities[T]||this.opacities[T].isHidden()||(this.placedOrientations[T]=q[T]);if(l&&l.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=l?l.lastPlacementChangeTime:r)}updateLayerOpacities(r,l){let f={};for(let d of l){let m=d.getBucket(r);m&&d.latestFeatureIndex&&r.id===m.layerIds[0]&&this.updateBucketOpacities(m,d.tileID,f,d.collisionBoxArray)}}updateBucketOpacities(r,l,f,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();let m=r.layers[0],b=m.layout,q=new xr(null,0,!1,!1,!0),T=b.get("text-allow-overlap"),k=b.get("icon-allow-overlap"),R=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=b.get("text-rotation-alignment")==="map",j=b.get("text-pitch-alignment")==="map",H=b.get("icon-text-fit")!=="none",Z=new xr(null,0,T&&(k||!r.hasIconData()||b.get("icon-optional")),k&&(T||!r.hasTextData()||b.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);let ee=(oe,ue,Y)=>{for(let he=0;he<ue/4;he++)oe.opacityVertexArray.emplaceBack(Y);oe.hasVisibleVertices=oe.hasVisibleVertices||Y!==tu},ae=this.collisionBoxArrays.get(r.bucketInstanceId);for(let oe=0;oe<r.symbolInstances.length;oe++){let ue=r.symbolInstances.get(oe),{numHorizontalGlyphVertices:Y,numVerticalGlyphVertices:he,crossTileID:de}=ue,ge=this.opacities[de];f[de]?ge=q:ge||(ge=Z,this.opacities[de]=ge),f[de]=!0;let Te=ue.numIconVertices>0,Me=this.placedOrientations[ue.crossTileID],je=Me===s.ah.vertical,We=Me===s.ah.horizontal||Me===s.ah.horizontalOnly;if(Y>0||he>0){let De=an(ge.text);ee(r.text,Y,je?tu:De),ee(r.text,he,We?tu:De);let tt=ge.text.isHidden();[ue.rightJustifiedTextSymbolIndex,ue.centerJustifiedTextSymbolIndex,ue.leftJustifiedTextSymbolIndex].forEach(Ve=>{Ve>=0&&(r.text.placedSymbolArray.get(Ve).hidden=tt||je?1:0)}),ue.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ue.verticalPlacedTextSymbolIndex).hidden=tt||We?1:0);let yt=this.variableOffsets[ue.crossTileID];yt&&this.markUsedJustification(r,yt.anchor,ue,Me);let Ne=this.placedOrientations[ue.crossTileID];Ne&&(this.markUsedJustification(r,"left",ue,Ne),this.markUsedOrientation(r,Ne,ue))}if(Te){let De=an(ge.icon),tt=!(H&&ue.verticalPlacedIconSymbolIndex&&je);ue.placedIconSymbolIndex>=0&&(ee(r.icon,ue.numIconVertices,tt?De:tu),r.icon.placedSymbolArray.get(ue.placedIconSymbolIndex).hidden=ge.icon.isHidden()),ue.verticalPlacedIconSymbolIndex>=0&&(ee(r.icon,ue.numVerticalIconVertices,tt?tu:De),r.icon.placedSymbolArray.get(ue.verticalPlacedIconSymbolIndex).hidden=ge.icon.isHidden())}let ze=ae&&ae.has(oe)?ae.get(oe):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){let De=r.collisionArrays[oe];if(De){let tt=new s.P(0,0);if(De.textBox||De.verticalTextBox){let yt=!0;if(R){let Ne=this.variableOffsets[de];Ne?(tt=ii(Ne.anchor,Ne.width,Ne.height,Ne.textOffset,Ne.textBoxScale),D&&tt._rotate(j?this.transform.angle:-this.transform.angle)):yt=!1}if(De.textBox||De.verticalTextBox){let Ne;De.textBox&&(Ne=je),De.verticalTextBox&&(Ne=We),eu(r.textCollisionBox.collisionVertexArray,ge.text.placed,!yt||Ne,ze.text,tt.x,tt.y)}}if(De.iconBox||De.verticalIconBox){let yt=!!(!We&&De.verticalIconBox),Ne;De.iconBox&&(Ne=yt),De.verticalIconBox&&(Ne=!yt),eu(r.iconCollisionBox.collisionVertexArray,ge.icon.placed,Ne,ze.icon,H?tt.x:0,H?tt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){let oe=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=oe.invProjMatrix,r.placementViewportMatrix=oe.viewportMatrix,r.collisionCircleArray=oe.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,l){let f=this.zoomAtLastRecencyCheck===l?1-this.zoomAdjustment(l):1;return this.zoomAtLastRecencyCheck=l,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function eu(v,r,l,f,d,m){f&&f.length!==0||(f=[0,0,0,0]);let b=f[0]-wt,q=f[1]-wt,T=f[2]-wt,k=f[3]-wt;v.emplaceBack(r?1:0,l?1:0,d||0,m||0,b,q),v.emplaceBack(r?1:0,l?1:0,d||0,m||0,T,q),v.emplaceBack(r?1:0,l?1:0,d||0,m||0,T,k),v.emplaceBack(r?1:0,l?1:0,d||0,m||0,b,k)}let Xt=Math.pow(2,25),Zd=Math.pow(2,24),Kd=Math.pow(2,17),rn=Math.pow(2,16),nn=Math.pow(2,9),aw=Math.pow(2,8),xn=Math.pow(2,1);function an(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;let r=v.placed?1:0,l=Math.floor(127*v.opacity);return l*Xt+r*Zd+l*Kd+r*rn+l*nn+r*aw+l*xn+r}let tu=0;function rs(){return{isOccluded:(v,r,l)=>!1,getPitchedTextCorrection:(v,r,l)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,l,f){throw new Error("Not implemented.")},translatePosition:(v,r,l,f)=>function(d,m,b,q,T=!1){if(!b[0]&&!b[1])return[0,0];let k=T?q==="map"?d.angle:0:q==="viewport"?-d.angle:0;if(k){let R=Math.sin(k),D=Math.cos(k);b=[b[0]*D-b[1]*R,b[0]*R+b[1]*D]}return[T?b[0]:Ot(m,b[0],d.zoom),T?b[1]:Ot(m,b[1],d.zoom)]}(v,r,l,f),getCircleRadiusCorrection:v=>1}}class zr{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,l,f,d,m){let b=this._bucketParts;for(;this._currentTileIndex<r.length;)if(l.getBucketParts(b,d,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,b.sort((q,T)=>q.sortKey-T.sortKey));this._currentPartIndex<b.length;)if(l.placeLayerBucketPart(b[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,m())return!0;return!1}}class Dl{constructor(r,l,f,d,m,b,q,T){this.placement=new wi(r,rs(),l,b,q,T),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=m,this._done=!1}isDone(){return this._done}continuePlacement(r,l,f){let d=P.now(),m=()=>!this._forceFullPlacement&&P.now()-d>2;for(;this._currentPlacementIndex>=0;){let b=l[r[this._currentPlacementIndex]],q=this.placement.collisionIndex.transform.zoom;if(b.type==="symbol"&&(!b.minzoom||b.minzoom<=q)&&(!b.maxzoom||b.maxzoom>q)){if(this._inProgressLayer||(this._inProgressLayer=new zr(b)),this._inProgressLayer.continuePlacement(f[b.source],this.placement,this._showCollisionBoxes,b,m))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let Hn=512/s.X/2;class Mr{constructor(r,l,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};let d=new Map;for(let m=0;m<l.length;m++){let b=l.get(m),q=b.key,T=d.get(q);T?T.push(b):d.set(q,[b])}for(let[m,b]of d){let q={positions:b.map(T=>({x:Math.floor(T.anchorX*Hn),y:Math.floor(T.anchorY*Hn)})),crossTileIDs:b.map(T=>T.crossTileID)};if(q.positions.length>128){let T=new s.av(q.positions.length,16,Uint16Array);for(let{x:k,y:R}of q.positions)T.add(k,R);T.finish(),delete q.positions,q.index=T}this._symbolsByKey[m]=q}}getScaledCoordinates(r,l){let{x:f,y:d,z:m}=this.tileID.canonical,{x:b,y:q,z:T}=l.canonical,k=Hn/Math.pow(2,T-m),R=(q*s.X+r.anchorY)*k,D=d*s.X*Hn;return{x:Math.floor((b*s.X+r.anchorX)*k-f*s.X*Hn),y:Math.floor(R-D)}}findMatches(r,l,f){let d=this.tileID.canonical.z<l.canonical.z?1:Math.pow(2,this.tileID.canonical.z-l.canonical.z);for(let m=0;m<r.length;m++){let b=r.get(m);if(b.crossTileID)continue;let q=this._symbolsByKey[b.key];if(!q)continue;let T=this.getScaledCoordinates(b,l);if(q.index){let k=q.index.range(T.x-d,T.y-d,T.x+d,T.y+d).sort();for(let R of k){let D=q.crossTileIDs[R];if(!f[D]){f[D]=!0,b.crossTileID=D;break}}}else if(q.positions)for(let k=0;k<q.positions.length;k++){let R=q.positions[k],D=q.crossTileIDs[k];if(Math.abs(R.x-T.x)<=d&&Math.abs(R.y-T.y)<=d&&!f[D]){f[D]=!0,b.crossTileID=D;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class oh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let l=Math.round((r-this.lng)/360);if(l!==0)for(let f in this.indexes){let d=this.indexes[f],m={};for(let b in d){let q=d[b];q.tileID=q.tileID.unwrapTo(q.tileID.wrap+l),m[q.tileID.key]=q}this.indexes[f]=m}this.lng=r}addBucket(r,l,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===l.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let m=0;m<l.symbolInstances.length;m++)l.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});let d=this.usedCrossTileIDs[r.overscaledZ];for(let m in this.indexes){let b=this.indexes[m];if(Number(m)>r.overscaledZ)for(let q in b){let T=b[q];T.tileID.isChildOf(r)&&T.findMatches(l.symbolInstances,r,d)}else{let q=b[r.scaledTo(Number(m)).key];q&&q.findMatches(l.symbolInstances,r,d)}}for(let m=0;m<l.symbolInstances.length;m++){let b=l.symbolInstances.get(m);b.crossTileID||(b.crossTileID=f.generate(),d[b.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Mr(r,l.symbolInstances,l.bucketInstanceId),!0}removeBucketCrossTileIDs(r,l){for(let f of l.getCrossTileIDsLists())for(let d of f)delete this.usedCrossTileIDs[r][d]}removeStaleBuckets(r){let l=!1;for(let f in this.indexes){let d=this.indexes[f];for(let m in d)r[d[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,d[m]),delete d[m],l=!0)}return l}}class Xd{constructor(){this.layerIndexes={},this.crossTileIDs=new oh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,l,f){let d=this.layerIndexes[r.id];d===void 0&&(d=this.layerIndexes[r.id]=new Wn);let m=!1,b={};d.handleWrapJump(f);for(let q of l){let T=q.getBucket(r);T&&r.id===T.layerIds[0]&&(T.bucketInstanceId||(T.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(q.tileID,T,this.crossTileIDs)&&(m=!0),b[T.bucketInstanceId]=!0)}return d.removeStaleBuckets(b)&&(m=!0),m}pruneUnusedLayers(r){let l={};r.forEach(f=>{l[f]=!0});for(let f in this.layerIndexes)l[f]||delete this.layerIndexes[f]}}let Zn=(v,r)=>s.t(v,r&&r.filter(l=>l.identifier!=="source.canvas")),ow=s.aw();class sh extends s.E{constructor(r,l={}){super(),this._rtlPluginLoaded=()=>{for(let f in this.sourceCaches){let d=this.sourceCaches[f].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new es(Qo(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,d)=>this.getGlyphs(f,d)),this.dispatcher.registerMessageHandler("GI",(f,d)=>this.getImages(f,d)),this.imageManager=new Yr,this.imageManager.setEventedParent(this),this.glyphManager=new ha(r._requestManager,l.localIdeographFontFamily),this.lineAtlas=new Xs(256,512),this.crossTileSymbolIndex=new Xd,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new s.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",s.ay()),pa().on(ke,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;let d=this.sourceCaches[f.sourceId];if(!d)return;let m=d.getSource();if(m&&m.vectorLayerIds)for(let b in this._layers){let q=this._layers[b];q.source===m.id&&this._validateLayer(q)}})}loadURL(r,l={},f){this.fire(new s.k("dataloading",{dataType:"style"})),l.validate=typeof l.validate!="boolean"||l.validate;let d=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;let m=this._loadStyleRequest;s.h(d,this._loadStyleRequest).then(b=>{this._loadStyleRequest=null,this._load(b.data,l,f)}).catch(b=>{this._loadStyleRequest=null,b&&!m.signal.aborted&&this.fire(new s.j(b))})}loadJSON(r,l={},f){this.fire(new s.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,l.validate=l.validate!==!1,this._load(r,l,f)}).catch(()=>{})}loadEmpty(){this.fire(new s.k("dataloading",{dataType:"style"})),this._load(ow,{validate:!1})}_load(r,l,f){var d;let m=l.transformStyle?l.transformStyle(f,r):r;if(!l.validate||!Zn(this,s.u(m))){this._loaded=!0,this.stylesheet=m;for(let b in m.sources)this.addSource(b,m.sources[b],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs),this._createLayers(),this.light=new Wa(this.stylesheet.light),this.sky=new $n(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new s.k("data",{dataType:"style"})),this.fire(new s.k("style.load"))}}_createLayers(){let r=s.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(l=>l.id),this._layers={},this._serializedLayers=null;for(let l of r){let f=s.aA(l);f.setEventedParent(this,{layer:{id:l.id}}),this._layers[l.id]=f}}_loadSprite(r,l=!1,f=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(m,b,q,T){return s._(this,void 0,void 0,function*(){let k=nt(m),R=q>1?"@2x":"",D={},j={};for(let{id:H,url:Z}of k){let ee=b.transformRequest(gt(Z,R,".json"),"SpriteJSON");D[H]=s.h(ee,T);let ae=b.transformRequest(gt(Z,R,".png"),"SpriteImage");j[H]=K.getImage(ae,T)}return yield Promise.all([...Object.values(D),...Object.values(j)]),function(H,Z){return s._(this,void 0,void 0,function*(){let ee={};for(let ae in H){ee[ae]={};let oe=P.getImageCanvasContext((yield Z[ae]).data),ue=(yield H[ae]).data;for(let Y in ue){let{width:he,height:de,x:ge,y:Te,sdf:Me,pixelRatio:je,stretchX:We,stretchY:ze,content:De,textFitWidth:tt,textFitHeight:yt}=ue[Y];ee[ae][Y]={data:null,pixelRatio:je,sdf:Me,stretchX:We,stretchY:ze,content:De,textFitWidth:tt,textFitHeight:yt,spriteData:{width:he,height:de,x:ge,y:Te,context:oe}}}}return ee})}(D,j)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(m=>{if(this._spriteRequest=null,m)for(let b in m){this._spritesImagesIds[b]=[];let q=this._spritesImagesIds[b]?this._spritesImagesIds[b].filter(T=>!(T in m)):[];for(let T of q)this.imageManager.removeImage(T),this._changedImages[T]=!0;for(let T in m[b]){let k=b==="default"?T:`${b}:${T}`;this._spritesImagesIds[b].push(k),k in this.imageManager.images?this.imageManager.updateImage(k,m[b][T],!1):this.imageManager.addImage(k,m[b][T]),l&&(this._changedImages[k]=!0)}}}).catch(m=>{this._spriteRequest=null,d=m,this.fire(new s.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),l&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"})),f&&f(d)})}_unloadSprite(){for(let r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}_validateLayer(r){let l=this.sourceCaches[r.source];if(!l)return;let f=r.sourceLayer;if(!f)return;let d=l.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(f)===-1)&&this.fire(new s.j(new Error(`Source layer "${f}" does not exist on source "${d.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,l=!1){let f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(l?s.aB(f):f);let d=[];for(let m of r)if(f[m]){let b=l?s.aB(f[m]):f[m];d.push(b)}return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};let l=Object.keys(this._layers);for(let f of l){let d=this._layers[f];d.type!=="custom"&&(r[f]=d.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(let r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;let l=this._changed;if(l){let d=Object.keys(this._updatedLayers),m=Object.keys(this._removedLayers);(d.length||m.length)&&this._updateWorkerLayers(d,m);for(let b in this._updatedSources){let q=this._updatedSources[b];if(q==="reload")this._reloadSource(b);else{if(q!=="clear")throw new Error(`Invalid action ${q}`);this._clearSource(b)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let b in this._updatedPaintProps)this._layers[b].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}let f={};for(let d in this.sourceCaches){let m=this.sourceCaches[d];f[d]=m.used,m.used=!1}for(let d of this._order){let m=this._layers[d];m.recalculate(r,this._availableImages),!m.isHidden(r.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0)}for(let d in f){let m=this.sourceCaches[d];!!f[d]!=!!m.used&&m.fire(new s.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,l&&this.fire(new s.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let l in this.sourceCaches)this.sourceCaches[l].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,l){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:l})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,l={}){var f;this._checkLoaded();let d=this.serialize();if(r=l.transformStyle?l.transformStyle(d,r):r,((f=l.validate)===null||f===void 0||f)&&Zn(this,s.u(r)))return!1;(r=s.aB(r)).layers=s.az(r.layers);let m=s.aC(d,r),b=this._getOperationsToPerform(m);if(b.unimplemented.length>0)throw new Error(`Unimplemented: ${b.unimplemented.join(", ")}.`);if(b.operations.length===0)return!1;for(let q of b.operations)q();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){let l=[],f=[];for(let d of r)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":l.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":l.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":l.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":l.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":l.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":l.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":l.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":l.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":l.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":l.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":l.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":l.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":l.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":l.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":l.push(()=>{});break;default:f.push(d.command);}return{operations:l,unimplemented:f}}addImage(r,l){if(this.getImage(r))return this.fire(new s.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,l),this._afterImageUpdated(r)}updateImage(r,l){this.imageManager.updateImage(r,l)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new s.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,l,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!l.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(l).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(l.type)>=0&&this._validate(s.u.source,`sources.${r}`,l,null,f))return;this.map&&this.map._collectResourceTiming&&(l.collectResourceTiming=!0);let d=this.sourceCaches[r]=new dt(r,l,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:r})),d.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(let f in this._layers)if(this._layers[f].source===r)return this.fire(new s.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));let l=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],l.fire(new s.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),l.setEventedParent(null),l.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,l){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);let f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(l),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,l,f={}){this._checkLoaded();let d=r.id;if(this.getLayer(d))return void this.fire(new s.j(new Error(`Layer "${d}" already exists on this map.`)));let m;if(r.type==="custom"){if(Zn(this,s.aD(r)))return;m=s.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(d,r.source),r=s.aB(r),r=s.e(r,{source:d})),this._validate(s.u.layer,`layers.${d}`,r,{arrayIndex:-1},f))return;m=s.aA(r),this._validateLayer(m),m.setEventedParent(this,{layer:{id:d}})}let b=l?this._order.indexOf(l):this._order.length;if(l&&b===-1)this.fire(new s.j(new Error(`Cannot add layer "${d}" before non-existing layer "${l}".`)));else{if(this._order.splice(b,0,d),this._layerOrderChanged=!0,this._layers[d]=m,this._removedLayers[d]&&m.source&&m.type!=="custom"){let q=this._removedLayers[d];delete this._removedLayers[d],q.type!==m.type?this._updatedSources[m.source]="clear":(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause())}this._updateLayer(m),m.onAdd&&m.onAdd(this.map)}}moveLayer(r,l){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new s.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===l)return;let f=this._order.indexOf(r);this._order.splice(f,1);let d=l?this._order.indexOf(l):this._order.length;l&&d===-1?this.fire(new s.j(new Error(`Cannot move layer "${r}" before non-existing layer "${l}".`))):(this._order.splice(d,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();let l=this._layers[r];if(!l)return void this.fire(new s.j(new Error(`Cannot remove non-existing layer "${r}".`)));l.setEventedParent(null);let f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=l,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],l.onRemove&&l.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,l,f){this._checkLoaded();let d=this.getLayer(r);d?d.minzoom===l&&d.maxzoom===f||(l!=null&&(d.minzoom=l),f!=null&&(d.maxzoom=f),this._updateLayer(d)):this.fire(new s.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,l,f={}){this._checkLoaded();let d=this.getLayer(r);if(d){if(!s.aE(d.filter,l))return l==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(s.u.filter,`layers.${d.id}.filter`,l,null,f)||(d.filter=s.aB(l),this._updateLayer(d)))}else this.fire(new s.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return s.aB(this.getLayer(r).filter)}setLayoutProperty(r,l,f,d={}){this._checkLoaded();let m=this.getLayer(r);m?s.aE(m.getLayoutProperty(l),f)||(m.setLayoutProperty(l,f,d),this._updateLayer(m)):this.fire(new s.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,l){let f=this.getLayer(r);if(f)return f.getLayoutProperty(l);this.fire(new s.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,l,f,d={}){this._checkLoaded();let m=this.getLayer(r);m?s.aE(m.getPaintProperty(l),f)||(m.setPaintProperty(l,f,d)&&this._updateLayer(m),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new s.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,l){return this.getLayer(r).getPaintProperty(l)}setFeatureState(r,l){this._checkLoaded();let f=r.source,d=r.sourceLayer,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new s.j(new Error(`The source '${f}' does not exist in the map's style.`)));let b=m.getSource().type;b==="geojson"&&d?this.fire(new s.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):b!=="vector"||d?(r.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),m.setFeatureState(d,r.id,l)):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,l){this._checkLoaded();let f=r.source,d=this.sourceCaches[f];if(d===void 0)return void this.fire(new s.j(new Error(`The source '${f}' does not exist in the map's style.`)));let m=d.getSource().type,b=m==="vector"?r.sourceLayer:void 0;m!=="vector"||b?l&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new s.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(b,r.id,l):this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();let l=r.source,f=r.sourceLayer,d=this.sourceCaches[l];if(d!==void 0)return d.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new s.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(f,r.id)):void this.fire(new s.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new s.j(new Error(`The source '${l}' does not exist in the map's style.`)))}getTransition(){return s.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let r=s.aF(this.sourceCaches,m=>m.serialize()),l=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,d=this.stylesheet;return s.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:r,layers:l,terrain:f},m=>m!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){let l=b=>this._layers[b].type==="fill-extrusion",f={},d=[];for(let b=this._order.length-1;b>=0;b--){let q=this._order[b];if(l(q)){f[q]=b;for(let T of r){let k=T[q];if(k)for(let R of k)d.push(R)}}}d.sort((b,q)=>q.intersectionZ-b.intersectionZ);let m=[];for(let b=this._order.length-1;b>=0;b--){let q=this._order[b];if(l(q))for(let T=d.length-1;T>=0;T--){let k=d[T].feature;if(f[k.layer.id]<b)break;m.push(k),d.pop()}else for(let T of r){let k=T[q];if(k)for(let R of k)m.push(R.feature)}}return m}queryRenderedFeatures(r,l,f){l&&l.filter&&this._validate(s.u.filter,"queryRenderedFeatures.filter",l.filter,null,l);let d={};if(l&&l.layers){if(!Array.isArray(l.layers))return this.fire(new s.j(new Error("parameters.layers must be an Array."))),[];for(let q of l.layers){let T=this._layers[q];if(!T)return this.fire(new s.j(new Error(`The layer '${q}' does not exist in the map's style and cannot be queried for features.`))),[];d[T.source]=!0}}let m=[];l.availableImages=this._availableImages;let b=this._serializedAllLayers();for(let q in this.sourceCaches)l.layers&&!d[q]||m.push(vo(this.sourceCaches[q],this._layers,b,r,l,f));return this.placement&&m.push(function(q,T,k,R,D,j,H){let Z={},ee=j.queryRenderedSymbols(R),ae=[];for(let oe of Object.keys(ee).map(Number))ae.push(H[oe]);ae.sort(go);for(let oe of ae){let ue=oe.featureIndex.lookupSymbolFeatures(ee[oe.bucketInstanceId],T,oe.bucketIndex,oe.sourceLayerIndex,D.filter,D.layers,D.availableImages,q);for(let Y in ue){let he=Z[Y]=Z[Y]||[],de=ue[Y];de.sort((ge,Te)=>{let Me=oe.featureSortOrder;if(Me){let je=Me.indexOf(ge.featureIndex);return Me.indexOf(Te.featureIndex)-je}return Te.featureIndex-ge.featureIndex});for(let ge of de)he.push(ge)}}for(let oe in Z)Z[oe].forEach(ue=>{let Y=ue.feature,he=k[q[oe].source].getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=he});return Z}(this._layers,b,this.sourceCaches,r,l,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(m)}querySourceFeatures(r,l){l&&l.filter&&this._validate(s.u.filter,"querySourceFeatures.filter",l.filter,null,l);let f=this.sourceCaches[r];return f?function(d,m){let b=d.getRenderableIds().map(k=>d.getTileByID(k)),q=[],T={};for(let k=0;k<b.length;k++){let R=b[k],D=R.tileID.canonical.key;T[D]||(T[D]=!0,R.querySourceFeatures(q,m))}return q}(f,l):[]}getLight(){return this.light.getLight()}setLight(r,l={}){this._checkLoaded();let f=this.light.getLight(),d=!1;for(let b in r)if(!s.aE(r[b],f[b])){d=!0;break}if(!d)return;let m={now:P.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,l),this.light.updateTransitions(m)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,l={}){let f=this.getSky(),d=!1;if(!r&&!f)return;if(r&&!f)d=!0;else if(!r&&f)d=!0;else for(let b in r)if(!s.aE(r[b],f[b])){d=!0;break}if(!d)return;let m={now:P.now(),transition:s.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,l),this.sky.updateTransitions(m)}_validate(r,l,f,d,m={}){return(!m||m.validate!==!1)&&Zn(this,r.call(s.u,s.e({key:l,style:this.serialize(),value:f,styleSpec:s.v},d)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),pa().off(ke,this._rtlPluginLoaded);for(let l in this._layers)this._layers[l].setEventedParent(null);for(let l in this.sourceCaches){let f=this.sourceCaches[l];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(let l in this.sourceCaches)this.sourceCaches[l].update(r,this.map.terrain)}_generateCollisionBoxes(){for(let r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,l,f,d,m=!1){let b=!1,q=!1,T={};for(let k of this._order){let R=this._layers[k];if(R.type!=="symbol")continue;if(!T[R.source]){let j=this.sourceCaches[R.source];T[R.source]=j.getRenderableIds(!0).map(H=>j.getTileByID(H)).sort((H,Z)=>Z.tileID.overscaledZ-H.tileID.overscaledZ||(H.tileID.isLessThan(Z.tileID)?-1:1))}let D=this.crossTileSymbolIndex.addLayer(R,T[R.source],r.center.lng);b=b||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((m=m||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(P.now(),r.zoom))&&(this.pauseablePlacement=new Dl(r,this.map.terrain,this._order,m,l,f,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,T),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(P.now()),q=!0),b&&this.pauseablePlacement.placement.setStale()),q||b)for(let k of this._order){let R=this._layers[k];R.type==="symbol"&&this.placement.updateLayerOpacities(R,T[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(P.now())}_releaseSymbolFadeTiles(){for(let r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,l){return s._(this,void 0,void 0,function*(){let f=yield this.imageManager.getImages(l.icons);this._updateTilesForChangedImages();let d=this.sourceCaches[l.source];return d&&d.setDependencies(l.tileID.key,l.type,l.icons),f})}getGlyphs(r,l){return s._(this,void 0,void 0,function*(){let f=yield this.glyphManager.getGlyphs(l.stacks),d=this.sourceCaches[l.source];return d&&d.setDependencies(l.tileID.key,l.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,l={}){this._checkLoaded(),r&&this._validate(s.u.glyphs,"glyphs",r,null,l)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,l,f={},d){this._checkLoaded();let m=[{id:r,url:l}],b=[...nt(this.stylesheet.sprite),...m];this._validate(s.u.sprite,"sprite",b,null,f)||(this.stylesheet.sprite=b,this._loadSprite(m,!0,d))}removeSprite(r){this._checkLoaded();let l=nt(this.stylesheet.sprite);if(l.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(let f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;l.splice(l.findIndex(f=>f.id===r),1),this.stylesheet.sprite=l.length>0?l:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new s.k("data",{dataType:"style"}))}else this.fire(new s.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return nt(this.stylesheet.sprite)}setSprite(r,l={},f){this._checkLoaded(),r&&this._validate(s.u.sprite,"sprite",r,null,l)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var is=s.Y([{name:"a_pos",type:"Int16",components:2}]);let bo={prelude:Gt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Gt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Gt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Gt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Gt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Gt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Gt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Gt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Gt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Gt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Gt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Gt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Gt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Gt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Gt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Gt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Gt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Gt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Gt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Gt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Gt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Gt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Gt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Gt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Gt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Gt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Gt(v,r){let l=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),d=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),m=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),b=m?m.concat(d):d,q={};return{fragmentSource:v=v.replace(l,(T,k,R,D,j)=>(q[j]=!0,k==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${R} ${D} ${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = u_${j};
#endif
`)),vertexSource:r=r.replace(l,(T,k,R,D,j)=>{let H=D==="float"?"vec2":"vec4",Z=j.match(/color/)?"color":H;return q[j]?k==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${R} ${H} a_${j};
varying ${R} ${D} ${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${Z}(a_${j}, u_${j}_t);
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:k==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${R} ${H} a_${j};
#else
uniform ${R} ${D} u_${j};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = a_${j};
#else
    ${R} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${R} ${D} ${j} = unpack_mix_${Z}(a_${j}, u_${j}_t);
#else
    ${R} ${D} ${j} = u_${j};
#endif
`}),staticAttributes:f,staticUniforms:b}}class Yd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,l,f,d,m,b,q,T,k){this.context=r;let R=this.boundPaintVertexBuffers.length!==d.length;for(let D=0;!R&&D<d.length;D++)this.boundPaintVertexBuffers[D]!==d[D]&&(R=!0);!this.vao||this.boundProgram!==l||this.boundLayoutVertexBuffer!==f||R||this.boundIndexBuffer!==m||this.boundVertexOffset!==b||this.boundDynamicVertexBuffer!==q||this.boundDynamicVertexBuffer2!==T||this.boundDynamicVertexBuffer3!==k?this.freshBind(l,f,d,m,b,q,T,k):(r.bindVertexArray.set(this.vao),q&&q.bind(),m&&m.dynamicDraw&&m.bind(),T&&T.bind(),k&&k.bind())}freshBind(r,l,f,d,m,b,q,T){let k=r.numAttributes,R=this.context,D=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=l,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=d,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=b,this.boundDynamicVertexBuffer2=q,this.boundDynamicVertexBuffer3=T,l.enableAttributes(D,r);for(let j of f)j.enableAttributes(D,r);b&&b.enableAttributes(D,r),q&&q.enableAttributes(D,r),T&&T.enableAttributes(D,r),l.bind(),l.setVertexAttribPointers(D,r,m);for(let j of f)j.bind(),j.setVertexAttribPointers(D,r,m);b&&(b.bind(),b.setVertexAttribPointers(D,r,m)),d&&d.bind(),q&&(q.bind(),q.setVertexAttribPointers(D,r,m)),T&&(T.bind(),T.setVertexAttribPointers(D,r,m)),R.currentNumAttributes=k}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Jd=(v,r,l,f,d)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:l,u_fog_color:f?f.properties.get("fog-color"):s.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(d):0,u_horizon_color:f?f.properties.get("horizon-color"):s.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function ru(v){let r=[];for(let l=0;l<v.length;l++){if(v[l]===null)continue;let f=v[l].split(" ");r.push(f.pop())}return r}class Qd{constructor(r,l,f,d,m,b){let q=r.gl;this.program=q.createProgram();let T=ru(l.staticAttributes),k=f?f.getBinderAttributes():[],R=T.concat(k),D=bo.prelude.staticUniforms?ru(bo.prelude.staticUniforms):[],j=l.staticUniforms?ru(l.staticUniforms):[],H=f?f.getBinderUniforms():[],Z=D.concat(j).concat(H),ee=[];for(let ge of Z)ee.indexOf(ge)<0&&ee.push(ge);let ae=f?f.defines():[];m&&ae.push("#define OVERDRAW_INSPECTOR;"),b&&ae.push("#define TERRAIN3D;");let oe=ae.concat(bo.prelude.fragmentSource,l.fragmentSource).join(`
`),ue=ae.concat(bo.prelude.vertexSource,l.vertexSource).join(`
`),Y=q.createShader(q.FRAGMENT_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(Y,oe),q.compileShader(Y),!q.getShaderParameter(Y,q.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${q.getShaderInfoLog(Y)}`);q.attachShader(this.program,Y);let he=q.createShader(q.VERTEX_SHADER);if(q.isContextLost())return void(this.failedToCreate=!0);if(q.shaderSource(he,ue),q.compileShader(he),!q.getShaderParameter(he,q.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${q.getShaderInfoLog(he)}`);q.attachShader(this.program,he),this.attributes={};let de={};this.numAttributes=R.length;for(let ge=0;ge<this.numAttributes;ge++)R[ge]&&(q.bindAttribLocation(this.program,ge,R[ge]),this.attributes[R[ge]]=ge);if(q.linkProgram(this.program),!q.getProgramParameter(this.program,q.LINK_STATUS))throw new Error(`Program failed to link: ${q.getProgramInfoLog(this.program)}`);q.deleteShader(he),q.deleteShader(Y);for(let ge=0;ge<ee.length;ge++){let Te=ee[ge];if(Te&&!de[Te]){let Me=q.getUniformLocation(this.program,Te);Me&&(de[Te]=Me)}}this.fixedUniforms=d(r,de),this.terrainUniforms=((ge,Te)=>({u_depth:new s.aH(ge,Te.u_depth),u_terrain:new s.aH(ge,Te.u_terrain),u_terrain_dim:new s.aI(ge,Te.u_terrain_dim),u_terrain_matrix:new s.aJ(ge,Te.u_terrain_matrix),u_terrain_unpack:new s.aK(ge,Te.u_terrain_unpack),u_terrain_exaggeration:new s.aI(ge,Te.u_terrain_exaggeration)}))(r,de),this.binderUniforms=f?f.getUniforms(r,de):[]}draw(r,l,f,d,m,b,q,T,k,R,D,j,H,Z,ee,ae,oe,ue){let Y=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(d),r.setColorMode(m),r.setCullFace(b),T){r.activeTexture.set(Y.TEXTURE2),Y.bindTexture(Y.TEXTURE_2D,T.depthTexture),r.activeTexture.set(Y.TEXTURE3),Y.bindTexture(Y.TEXTURE_2D,T.texture);for(let de in this.terrainUniforms)this.terrainUniforms[de].set(T[de])}for(let de in this.fixedUniforms)this.fixedUniforms[de].set(q[de]);ee&&ee.setUniforms(r,this.binderUniforms,H,{zoom:Z});let he=0;switch(l){case Y.LINES:he=2;break;case Y.TRIANGLES:he=3;break;case Y.LINE_STRIP:he=1;}for(let de of j.get()){let ge=de.vaos||(de.vaos={});(ge[k]||(ge[k]=new Yd)).bind(r,this,R,ee?ee.getPaintVertexBuffers():[],D,de.vertexOffset,ae,oe,ue),Y.drawElements(l,de.primitiveLength*he,Y.UNSIGNED_SHORT,de.primitiveOffset*he*2)}}}function uh(v,r,l){let f=1/Ot(l,1,r.transform.tileZoom),d=Math.pow(2,l.tileID.overscaledZ),m=l.tileSize*Math.pow(2,r.transform.tileZoom)/d,b=m*(l.tileID.canonical.x+l.tileID.wrap*d),q=m*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[b>>16,q>>16],u_pixel_coord_lower:[65535&b,65535&q]}}let Ll=(v,r,l,f)=>{let d=r.style.light,m=d.properties.get("position"),b=[m.x,m.y,m.z],q=function(){var k=new s.A(9);return s.A!=Float32Array&&(k[1]=0,k[2]=0,k[3]=0,k[5]=0,k[6]=0,k[7]=0),k[0]=1,k[4]=1,k[8]=1,k}();d.properties.get("anchor")==="viewport"&&function(k,R){var D=Math.sin(R),j=Math.cos(R);k[0]=j,k[1]=D,k[2]=0,k[3]=-D,k[4]=j,k[5]=0,k[6]=0,k[7]=0,k[8]=1}(q,-r.transform.angle),function(k,R,D){var j=R[0],H=R[1],Z=R[2];k[0]=j*D[0]+H*D[3]+Z*D[6],k[1]=j*D[1]+H*D[4]+Z*D[7],k[2]=j*D[2]+H*D[5]+Z*D[8]}(b,b,q);let T=d.properties.get("color");return{u_matrix:v,u_lightpos:b,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[T.r,T.g,T.b],u_vertical_gradient:+l,u_opacity:f}},lh=(v,r,l,f,d,m,b)=>s.e(Ll(v,r,l,f),uh(m,r,b),{u_height_factor:-Math.pow(2,d.overscaledZ)/b.tileSize/8}),iu=v=>({u_matrix:v}),ty=(v,r,l,f)=>s.e(iu(v),uh(l,r,f)),sw=(v,r)=>({u_matrix:v,u_world:r}),ry=(v,r,l,f,d)=>s.e(ty(v,r,l,f),{u_world:d}),uw=(v,r,l,f)=>{let d=v.transform,m,b;if(f.paint.get("circle-pitch-alignment")==="map"){let q=Ot(l,1,d.zoom);m=!0,b=[q,q]}else m=!1,b=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,l,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:b}},ns=(v,r,l)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:l.cameraToCenterDistance,u_viewport_size:[l.width,l.height]}),zl=(v,r,l=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:l}),zi=v=>({u_matrix:v}),Fi=(v,r,l,f)=>({u_matrix:v,u_extrude_scale:Ot(r,1,l),u_intensity:f}),ch=(v,r,l,f)=>{let d=s.H();s.aP(d,0,v.width,v.height,0,0,1);let m=v.context.gl;return{u_matrix:d,u_world:[m.drawingBufferWidth,m.drawingBufferHeight],u_image:l,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}};function hh(v,r){let l=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new s.Z(0,f/l).toLngLat().lat,new s.Z(0,(f+1)/l).toLngLat().lat]}let fh=(v,r,l,f)=>{let d=v.transform;return{u_matrix:ay(v,r,l,f),u_ratio:1/Ot(r,1,d.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},iy=(v,r,l,f,d)=>s.e(fh(v,r,l,d),{u_image:0,u_image_height:f}),nu=(v,r,l,f,d)=>{let m=v.transform,b=ny(r,m);return{u_matrix:ay(v,r,l,d),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Ot(r,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[b,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},lw=(v,r,l,f,d,m)=>{let b=v.lineAtlas,q=ny(r,v.transform),T=l.layout.get("line-cap")==="round",k=b.getDash(f.from,T),R=b.getDash(f.to,T),D=k.width*d.fromScale,j=R.width*d.toScale;return s.e(fh(v,r,l,m),{u_patternscale_a:[q/D,-k.height/2],u_patternscale_b:[q/j,-R.height/2],u_sdfgamma:b.width/(256*Math.min(D,j)*v.pixelRatio)/2,u_image:0,u_tex_y_a:k.y,u_tex_y_b:R.y,u_mix:d.t})};function ny(v,r){return 1/Ot(v,1,r.tileZoom)}function ay(v,r,l,f){return v.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,l.paint.get("line-translate"),l.paint.get("line-translate-anchor"))}let cw=(v,r,l,f,d)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:l,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(b=d.paint.get("raster-saturation"),b>0?1-1/(1.001-b):-b),u_contrast_factor:(m=d.paint.get("raster-contrast"),m>0?1/(1-m):1+m),u_spin_weights:hw(d.paint.get("raster-hue-rotate"))};var m,b};function hw(v){v*=Math.PI/180;let r=Math.sin(v),l=Math.cos(v);return[(2*l+1)/3,(-Math.sqrt(3)*r-l+1)/3,(Math.sqrt(3)*r-l+1)/3]}let oy=(v,r,l,f,d,m,b,q,T,k,R,D,j,H)=>{let Z=b.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+l,u_aspect_ratio:Z.width/Z.height,u_fade_change:b.options.fadeDuration?b.symbolFadeChange:1,u_matrix:q,u_label_plane_matrix:T,u_coord_matrix:k,u_is_text:+D,u_pitch_with_map:+f,u_is_along_line:d,u_is_variable_anchor:m,u_texsize:j,u_texture:0,u_translation:R,u_pitched_scale:H}},Fl=(v,r,l,f,d,m,b,q,T,k,R,D,j,H,Z)=>{let ee=b.transform;return s.e(oy(v,r,l,f,d,m,b,q,T,k,R,D,j,Z),{u_gamma_scale:f?Math.cos(ee._pitch)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:b.pixelRatio,u_is_halo:+H})},ep=(v,r,l,f,d,m,b,q,T,k,R,D,j,H)=>s.e(Fl(v,r,l,f,d,m,b,q,T,k,R,!0,D,!0,H),{u_texsize_icon:j,u_texture_icon:1}),dh=(v,r,l)=>({u_matrix:v,u_opacity:r,u_color:l}),tp=(v,r,l,f,d,m)=>s.e(function(b,q,T,k){let R=T.imageManager.getPattern(b.from.toString()),D=T.imageManager.getPattern(b.to.toString()),{width:j,height:H}=T.imageManager.getPixelSize(),Z=Math.pow(2,k.tileID.overscaledZ),ee=k.tileSize*Math.pow(2,T.transform.tileZoom)/Z,ae=ee*(k.tileID.canonical.x+k.tileID.wrap*Z),oe=ee*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:R.tl,u_pattern_br_a:R.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[j,H],u_mix:q.t,u_pattern_size_a:R.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:q.fromScale,u_scale_b:q.toScale,u_tile_units_to_pixels:1/Ot(k,1,T.transform.tileZoom),u_pixel_coord_upper:[ae>>16,oe>>16],u_pixel_coord_lower:[65535&ae,65535&oe]}}(f,m,l,d),{u_matrix:v,u_opacity:r}),rp={fillExtrusion:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_lightpos:new s.aN(v,r.u_lightpos),u_lightintensity:new s.aI(v,r.u_lightintensity),u_lightcolor:new s.aN(v,r.u_lightcolor),u_vertical_gradient:new s.aI(v,r.u_vertical_gradient),u_opacity:new s.aI(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_lightpos:new s.aN(v,r.u_lightpos),u_lightintensity:new s.aI(v,r.u_lightintensity),u_lightcolor:new s.aN(v,r.u_lightcolor),u_vertical_gradient:new s.aI(v,r.u_vertical_gradient),u_height_factor:new s.aI(v,r.u_height_factor),u_image:new s.aH(v,r.u_image),u_texsize:new s.aO(v,r.u_texsize),u_pixel_coord_upper:new s.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(v,r.u_pixel_coord_lower),u_scale:new s.aN(v,r.u_scale),u_fade:new s.aI(v,r.u_fade),u_opacity:new s.aI(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_image:new s.aH(v,r.u_image),u_texsize:new s.aO(v,r.u_texsize),u_pixel_coord_upper:new s.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(v,r.u_pixel_coord_lower),u_scale:new s.aN(v,r.u_scale),u_fade:new s.aI(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_world:new s.aO(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_world:new s.aO(v,r.u_world),u_image:new s.aH(v,r.u_image),u_texsize:new s.aO(v,r.u_texsize),u_pixel_coord_upper:new s.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(v,r.u_pixel_coord_lower),u_scale:new s.aN(v,r.u_scale),u_fade:new s.aI(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new s.aI(v,r.u_camera_to_center_distance),u_scale_with_map:new s.aH(v,r.u_scale_with_map),u_pitch_with_map:new s.aH(v,r.u_pitch_with_map),u_extrude_scale:new s.aO(v,r.u_extrude_scale),u_device_pixel_ratio:new s.aI(v,r.u_device_pixel_ratio),u_matrix:new s.aJ(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_pixel_extrude_scale:new s.aO(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_inv_matrix:new s.aJ(v,r.u_inv_matrix),u_camera_to_center_distance:new s.aI(v,r.u_camera_to_center_distance),u_viewport_size:new s.aO(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new s.aL(v,r.u_color),u_matrix:new s.aJ(v,r.u_matrix),u_overlay:new s.aH(v,r.u_overlay),u_overlay_scale:new s.aI(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new s.aI(v,r.u_extrude_scale),u_intensity:new s.aI(v,r.u_intensity),u_matrix:new s.aJ(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_world:new s.aO(v,r.u_world),u_image:new s.aH(v,r.u_image),u_color_ramp:new s.aH(v,r.u_color_ramp),u_opacity:new s.aI(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_image:new s.aH(v,r.u_image),u_latrange:new s.aO(v,r.u_latrange),u_light:new s.aO(v,r.u_light),u_shadow:new s.aL(v,r.u_shadow),u_highlight:new s.aL(v,r.u_highlight),u_accent:new s.aL(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_image:new s.aH(v,r.u_image),u_dimension:new s.aO(v,r.u_dimension),u_zoom:new s.aI(v,r.u_zoom),u_unpack:new s.aK(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_ratio:new s.aI(v,r.u_ratio),u_device_pixel_ratio:new s.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new s.aO(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_ratio:new s.aI(v,r.u_ratio),u_device_pixel_ratio:new s.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new s.aO(v,r.u_units_to_pixels),u_image:new s.aH(v,r.u_image),u_image_height:new s.aI(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_texsize:new s.aO(v,r.u_texsize),u_ratio:new s.aI(v,r.u_ratio),u_device_pixel_ratio:new s.aI(v,r.u_device_pixel_ratio),u_image:new s.aH(v,r.u_image),u_units_to_pixels:new s.aO(v,r.u_units_to_pixels),u_scale:new s.aN(v,r.u_scale),u_fade:new s.aI(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_ratio:new s.aI(v,r.u_ratio),u_device_pixel_ratio:new s.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new s.aO(v,r.u_units_to_pixels),u_patternscale_a:new s.aO(v,r.u_patternscale_a),u_patternscale_b:new s.aO(v,r.u_patternscale_b),u_sdfgamma:new s.aI(v,r.u_sdfgamma),u_image:new s.aH(v,r.u_image),u_tex_y_a:new s.aI(v,r.u_tex_y_a),u_tex_y_b:new s.aI(v,r.u_tex_y_b),u_mix:new s.aI(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_tl_parent:new s.aO(v,r.u_tl_parent),u_scale_parent:new s.aI(v,r.u_scale_parent),u_buffer_scale:new s.aI(v,r.u_buffer_scale),u_fade_t:new s.aI(v,r.u_fade_t),u_opacity:new s.aI(v,r.u_opacity),u_image0:new s.aH(v,r.u_image0),u_image1:new s.aH(v,r.u_image1),u_brightness_low:new s.aI(v,r.u_brightness_low),u_brightness_high:new s.aI(v,r.u_brightness_high),u_saturation_factor:new s.aI(v,r.u_saturation_factor),u_contrast_factor:new s.aI(v,r.u_contrast_factor),u_spin_weights:new s.aN(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new s.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(v,r.u_is_size_feature_constant),u_size_t:new s.aI(v,r.u_size_t),u_size:new s.aI(v,r.u_size),u_camera_to_center_distance:new s.aI(v,r.u_camera_to_center_distance),u_pitch:new s.aI(v,r.u_pitch),u_rotate_symbol:new s.aH(v,r.u_rotate_symbol),u_aspect_ratio:new s.aI(v,r.u_aspect_ratio),u_fade_change:new s.aI(v,r.u_fade_change),u_matrix:new s.aJ(v,r.u_matrix),u_label_plane_matrix:new s.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new s.aJ(v,r.u_coord_matrix),u_is_text:new s.aH(v,r.u_is_text),u_pitch_with_map:new s.aH(v,r.u_pitch_with_map),u_is_along_line:new s.aH(v,r.u_is_along_line),u_is_variable_anchor:new s.aH(v,r.u_is_variable_anchor),u_texsize:new s.aO(v,r.u_texsize),u_texture:new s.aH(v,r.u_texture),u_translation:new s.aO(v,r.u_translation),u_pitched_scale:new s.aI(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new s.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(v,r.u_is_size_feature_constant),u_size_t:new s.aI(v,r.u_size_t),u_size:new s.aI(v,r.u_size),u_camera_to_center_distance:new s.aI(v,r.u_camera_to_center_distance),u_pitch:new s.aI(v,r.u_pitch),u_rotate_symbol:new s.aH(v,r.u_rotate_symbol),u_aspect_ratio:new s.aI(v,r.u_aspect_ratio),u_fade_change:new s.aI(v,r.u_fade_change),u_matrix:new s.aJ(v,r.u_matrix),u_label_plane_matrix:new s.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new s.aJ(v,r.u_coord_matrix),u_is_text:new s.aH(v,r.u_is_text),u_pitch_with_map:new s.aH(v,r.u_pitch_with_map),u_is_along_line:new s.aH(v,r.u_is_along_line),u_is_variable_anchor:new s.aH(v,r.u_is_variable_anchor),u_texsize:new s.aO(v,r.u_texsize),u_texture:new s.aH(v,r.u_texture),u_gamma_scale:new s.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new s.aI(v,r.u_device_pixel_ratio),u_is_halo:new s.aH(v,r.u_is_halo),u_translation:new s.aO(v,r.u_translation),u_pitched_scale:new s.aI(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new s.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new s.aH(v,r.u_is_size_feature_constant),u_size_t:new s.aI(v,r.u_size_t),u_size:new s.aI(v,r.u_size),u_camera_to_center_distance:new s.aI(v,r.u_camera_to_center_distance),u_pitch:new s.aI(v,r.u_pitch),u_rotate_symbol:new s.aH(v,r.u_rotate_symbol),u_aspect_ratio:new s.aI(v,r.u_aspect_ratio),u_fade_change:new s.aI(v,r.u_fade_change),u_matrix:new s.aJ(v,r.u_matrix),u_label_plane_matrix:new s.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new s.aJ(v,r.u_coord_matrix),u_is_text:new s.aH(v,r.u_is_text),u_pitch_with_map:new s.aH(v,r.u_pitch_with_map),u_is_along_line:new s.aH(v,r.u_is_along_line),u_is_variable_anchor:new s.aH(v,r.u_is_variable_anchor),u_texsize:new s.aO(v,r.u_texsize),u_texsize_icon:new s.aO(v,r.u_texsize_icon),u_texture:new s.aH(v,r.u_texture),u_texture_icon:new s.aH(v,r.u_texture_icon),u_gamma_scale:new s.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new s.aI(v,r.u_device_pixel_ratio),u_is_halo:new s.aH(v,r.u_is_halo),u_translation:new s.aO(v,r.u_translation),u_pitched_scale:new s.aI(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_opacity:new s.aI(v,r.u_opacity),u_color:new s.aL(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_opacity:new s.aI(v,r.u_opacity),u_image:new s.aH(v,r.u_image),u_pattern_tl_a:new s.aO(v,r.u_pattern_tl_a),u_pattern_br_a:new s.aO(v,r.u_pattern_br_a),u_pattern_tl_b:new s.aO(v,r.u_pattern_tl_b),u_pattern_br_b:new s.aO(v,r.u_pattern_br_b),u_texsize:new s.aO(v,r.u_texsize),u_mix:new s.aI(v,r.u_mix),u_pattern_size_a:new s.aO(v,r.u_pattern_size_a),u_pattern_size_b:new s.aO(v,r.u_pattern_size_b),u_scale_a:new s.aI(v,r.u_scale_a),u_scale_b:new s.aI(v,r.u_scale_b),u_pixel_coord_upper:new s.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new s.aO(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new s.aI(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_texture:new s.aH(v,r.u_texture),u_ele_delta:new s.aI(v,r.u_ele_delta),u_fog_matrix:new s.aJ(v,r.u_fog_matrix),u_fog_color:new s.aL(v,r.u_fog_color),u_fog_ground_blend:new s.aI(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new s.aI(v,r.u_fog_ground_blend_opacity),u_horizon_color:new s.aL(v,r.u_horizon_color),u_horizon_fog_blend:new s.aI(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_ele_delta:new s.aI(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new s.aJ(v,r.u_matrix),u_texture:new s.aH(v,r.u_texture),u_terrain_coords_id:new s.aI(v,r.u_terrain_coords_id),u_ele_delta:new s.aI(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new s.aL(v,r.u_sky_color),u_horizon_color:new s.aL(v,r.u_horizon_color),u_horizon:new s.aI(v,r.u_horizon),u_sky_horizon_blend:new s.aI(v,r.u_sky_horizon_blend)})};class ga{constructor(r,l,f){this.context=r;let d=r.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let l=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),l.bufferSubData(l.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let fw={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class ip{constructor(r,l,f,d){this.length=l.length,this.attributes=f,this.itemSize=l.bytesPerElement,this.dynamicDraw=d,this.context=r;let m=r.gl;this.buffer=m.createBuffer(),r.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,l.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete l.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);let l=this.context.gl;this.bind(),l.bufferSubData(l.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,l){for(let f=0;f<this.attributes.length;f++){let d=l.attributes[this.attributes[f].name];d!==void 0&&r.enableVertexAttribArray(d)}}setVertexAttribPointers(r,l,f){for(let d=0;d<this.attributes.length;d++){let m=this.attributes[d],b=l.attributes[m.name];b!==void 0&&r.vertexAttribPointer(b,m.components,r[fw[m.type]],!1,this.itemSize,m.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let as=new WeakMap;function wo(v){var r;if(as.has(v))return as.get(v);{let l=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return as.set(v,l),l}}class Ht{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ph extends Ht{getDefault(){return s.aM.transparent}set(r){let l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class dw extends Ht{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class au extends Ht{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class pw extends Ht{getDefault(){return[!0,!0,!0,!0]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class sy extends Ht{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class mw extends Ht{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class uy extends Ht{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let l=this.current;(r.func!==l.func||r.ref!==l.ref||r.mask!==l.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class np extends Ht{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class ly extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.STENCIL_TEST):l.disable(l.STENCIL_TEST),this.current=r,this.dirty=!1}}class cy extends Ht{getDefault(){return[0,1]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class hy extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.DEPTH_TEST):l.disable(l.DEPTH_TEST),this.current=r,this.dirty=!1}}class fy extends Ht{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class os extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.BLEND):l.disable(l.BLEND),this.current=r,this.dirty=!1}}class dy extends Ht{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class vw extends Ht{getDefault(){return s.aM.transparent}set(r){let l=this.current;(r.r!==l.r||r.g!==l.g||r.b!==l.b||r.a!==l.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class py extends Ht{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Nl extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;r?l.enable(l.CULL_FACE):l.disable(l.CULL_FACE),this.current=r,this.dirty=!1}}class gw extends Ht{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class mh extends Ht{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class yw extends Ht{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class _w extends Ht{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class my extends Ht{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let l=this.current;(r[0]!==l[0]||r[1]!==l[1]||r[2]!==l[2]||r[3]!==l[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class vy extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindFramebuffer(l.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class gy extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindRenderbuffer(l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class ap extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindTexture(l.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class yy extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.bindBuffer(l.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class vh extends Ht{getDefault(){return null}set(r){let l=this.gl;l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ya extends Ht{getDefault(){return null}set(r){var l;if(r===this.current&&!this.dirty)return;let f=this.gl;wo(f)?f.bindVertexArray(r):(l=f.getExtension("OES_vertex_array_object"))===null||l===void 0||l.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class op extends Ht{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class sp extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class up extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let l=this.gl;l.pixelStorei(l.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class gh extends Ht{constructor(r,l){super(r),this.context=r,this.parent=l}getDefault(){return null}}class lp extends gh{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class ss extends gh{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class cp extends gh{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let l=this.gl;l.framebufferRenderbuffer(l.FRAMEBUFFER,l.DEPTH_STENCIL_ATTACHMENT,l.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class xw{constructor(r,l,f,d,m){this.context=r,this.width=l,this.height=f;let b=r.gl,q=this.framebuffer=b.createFramebuffer();if(this.colorAttachment=new lp(r,q),d)this.depthAttachment=m?new cp(r,q):new ss(r,q);else if(m)throw new Error("Stencil cannot be set without depth");if(b.checkFramebufferStatus(b.FRAMEBUFFER)!==b.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let r=this.context.gl,l=this.colorAttachment.get();if(l&&r.deleteTexture(l),this.depthAttachment){let f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Er{constructor(r,l,f){this.blendFunction=r,this.blendColor=l,this.mask=f}}Er.Replace=[1,0],Er.disabled=new Er(Er.Replace,s.aM.transparent,[!1,!1,!1,!1]),Er.unblended=new Er(Er.Replace,s.aM.transparent,[!0,!0,!0,!0]),Er.alphaBlended=new Er([1,771],s.aM.transparent,[!0,!0,!0,!0]);class bw{constructor(r){var l,f;if(this.gl=r,this.clearColor=new ph(this),this.clearDepth=new dw(this),this.clearStencil=new au(this),this.colorMask=new pw(this),this.depthMask=new sy(this),this.stencilMask=new mw(this),this.stencilFunc=new uy(this),this.stencilOp=new np(this),this.stencilTest=new ly(this),this.depthRange=new cy(this),this.depthTest=new hy(this),this.depthFunc=new fy(this),this.blend=new os(this),this.blendFunc=new dy(this),this.blendColor=new vw(this),this.blendEquation=new py(this),this.cullFace=new Nl(this),this.cullFaceSide=new gw(this),this.frontFace=new mh(this),this.program=new yw(this),this.activeTexture=new _w(this),this.viewport=new my(this),this.bindFramebuffer=new vy(this),this.bindRenderbuffer=new gy(this),this.bindTexture=new ap(this),this.bindVertexBuffer=new yy(this),this.bindElementBuffer=new vh(this),this.bindVertexArray=new Ya(this),this.pixelStoreUnpack=new op(this),this.pixelStoreUnpackPremultiplyAlpha=new sp(this),this.pixelStoreUnpackFlipY=new up(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),wo(r)){this.HALF_FLOAT=r.HALF_FLOAT;let d=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(l=r.RGBA16F)!==null&&l!==void 0?l:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:d==null?void 0:d.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");let d=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,l){return new ga(this,r,l)}createVertexBuffer(r,l,f){return new ip(this,r,l,f)}createRenderbuffer(r,l,f){let d=this.gl,m=d.createRenderbuffer();return this.bindRenderbuffer.set(m),d.renderbufferStorage(d.RENDERBUFFER,r,l,f),this.bindRenderbuffer.set(null),m}createFramebuffer(r,l,f,d){return new xw(this,r,l,f,d)}clear({color:r,depth:l,stencil:f}){let d=this.gl,m=0;r&&(m|=d.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),l!==void 0&&(m|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(l),this.depthMask.set(!0)),f!==void 0&&(m|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),d.clear(m)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){s.aE(r.blendFunction,Er.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return wo(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var l;return wo(this.gl)?this.gl.deleteVertexArray(r):(l=this.gl.getExtension("OES_vertex_array_object"))===null||l===void 0?void 0:l.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Ct{constructor(r,l,f){this.func=r,this.mask=l,this.range=f}}Ct.ReadOnly=!1,Ct.ReadWrite=!0,Ct.disabled=new Ct(519,Ct.ReadOnly,[0,1]);let yh=7680;class nr{constructor(r,l,f,d,m,b){this.test=r,this.ref=l,this.mask=f,this.fail=d,this.depthFail=m,this.pass=b}}nr.disabled=new nr({func:519,mask:0},0,0,yh,yh,yh);class Jt{constructor(r,l,f){this.enable=r,this.mode=l,this.frontFace=f}}let us;function Bl(v,r,l,f,d){let m=v.context,b=m.gl,q=v.useProgram("collisionBox"),T=[],k=0,R=0;for(let oe=0;oe<f.length;oe++){let ue=f[oe],Y=r.getTile(ue).getBucket(l);if(!Y)continue;let he=d?Y.textCollisionBox:Y.iconCollisionBox,de=Y.collisionCircleArray;if(de.length>0){let ge=s.H();s.aQ(ge,Y.placementInvProjMatrix,v.transform.glCoordMatrix),s.aQ(ge,ge,Y.placementViewportMatrix),T.push({circleArray:de,circleOffset:R,transform:ue.posMatrix,invTransform:ge,coord:ue}),k+=de.length/4,R=k}he&&q.draw(m,b.LINES,Ct.disabled,nr.disabled,v.colorModeForRenderPass(),Jt.disabled,{u_matrix:ue.posMatrix,u_pixel_extrude_scale:[1/(D=v.transform).width,1/D.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(ue),l.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,null,v.transform.zoom,null,null,he.collisionVertexBuffer)}var D;if(!d||!T.length)return;let j=v.useProgram("collisionCircle"),H=new s.aR;H.resize(4*k),H._trim();let Z=0;for(let oe of T)for(let ue=0;ue<oe.circleArray.length/4;ue++){let Y=4*ue,he=oe.circleArray[Y+0],de=oe.circleArray[Y+1],ge=oe.circleArray[Y+2],Te=oe.circleArray[Y+3];H.emplace(Z++,he,de,ge,Te,0),H.emplace(Z++,he,de,ge,Te,1),H.emplace(Z++,he,de,ge,Te,2),H.emplace(Z++,he,de,ge,Te,3)}(!us||us.length<2*k)&&(us=function(oe){let ue=2*oe,Y=new s.aT;Y.resize(ue),Y._trim();for(let he=0;he<ue;he++){let de=6*he;Y.uint16[de+0]=4*he+0,Y.uint16[de+1]=4*he+1,Y.uint16[de+2]=4*he+2,Y.uint16[de+3]=4*he+2,Y.uint16[de+4]=4*he+3,Y.uint16[de+5]=4*he+0}return Y}(k));let ee=m.createIndexBuffer(us,!0),ae=m.createVertexBuffer(H,s.aS.members,!0);for(let oe of T){let ue=ns(oe.transform,oe.invTransform,v.transform);j.draw(m,b.TRIANGLES,Ct.disabled,nr.disabled,v.colorModeForRenderPass(),Jt.disabled,ue,v.style.map.terrain&&v.style.map.terrain.getTerrainData(oe.coord),l.id,ae,ee,s.a0.simpleSegment(0,2*oe.circleOffset,oe.circleArray.length,oe.circleArray.length/2),null,v.transform.zoom,null,null,null)}ae.destroy(),ee.destroy()}Jt.disabled=new Jt(!1,1029,2305),Jt.backCCW=new Jt(!0,1029,2305);let jl=s.an(new Float32Array(16));function hp(v,r,l,f,d,m){let{horizontalAlign:b,verticalAlign:q}=s.au(v);return new s.P((-(b-.5)*r/d+f[0])*m,(-(q-.5)*l/d+f[1])*m)}function ls(v,r,l,f,d,m){let b=r.tileAnchorPoint.add(new s.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let q=f.mult(m);l||(q=q.rotate(-d));let T=b.add(q);return te(T.x,T.y,r.labelPlaneMatrix,r.getElevation).point}if(l){let q=Ie(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),T=Math.atan(q.y/q.x)+(q.x<0?Math.PI:0);return v.add(f.rotate(T))}return v.add(f)}function ou(v,r,l,f,d,m,b,q,T,k,R,D,j,H){let Z=v.text.placedSymbolArray,ee=v.text.dynamicLayoutVertexArray,ae=v.icon.dynamicLayoutVertexArray,oe={};ee.clear();for(let ue=0;ue<Z.length;ue++){let Y=Z.get(ue),he=Y.hidden||!Y.crossTileID||v.allowVerticalPlacement&&!Y.placedOrientation?null:f[Y.crossTileID];if(he){let de=new s.P(Y.anchorX,Y.anchorY),ge={getElevation:H,width:d.width,height:d.height,labelPlaneMatrix:m,lineVertexArray:null,pitchWithMap:l,projection:R,projectionCache:null,tileAnchorPoint:de,translation:D,unwrappedTileID:j},Te=l?te(de.x,de.y,b,H):Ie(de.x,de.y,ge),Me=F(d.cameraToCenterDistance,Te.signedDistanceFromCamera),je=s.ai(v.textSizeData,T,Y)*Me/s.ap;l&&(je*=v.tilePixelRatio/q);let{width:We,height:ze,anchor:De,textOffset:tt,textBoxScale:yt}=he,Ne=hp(De,We,ze,tt,yt,je),Ve=R.getPitchedTextCorrection(d,de.add(new s.P(D[0],D[1])),j),mt=ls(Te.point,ge,r,Ne,d.angle,Ve),lr=v.allowVerticalPlacement&&Y.placedOrientation===s.ah.vertical?Math.PI/2:0;for(let Et=0;Et<Y.numGlyphs;Et++)s.aj(ee,mt,lr);k&&Y.associatedIconIndex>=0&&(oe[Y.associatedIconIndex]={shiftedAnchor:mt,angle:lr})}else lt(Y.numGlyphs,ee)}if(k){ae.clear();let ue=v.icon.placedSymbolArray;for(let Y=0;Y<ue.length;Y++){let he=ue.get(Y);if(he.hidden)lt(he.numGlyphs,ae);else{let de=oe[Y];if(de)for(let ge=0;ge<he.numGlyphs;ge++)s.aj(ae,de.shiftedAnchor,de.angle);else lt(he.numGlyphs,ae)}}v.icon.dynamicLayoutVertexBuffer.updateData(ae)}v.text.dynamicLayoutVertexBuffer.updateData(ee)}function bn(v,r,l){return l.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function fp(v,r,l,f,d,m,b,q,T,k,R,D){let j=v.context,H=j.gl,Z=v.transform,ee=rs(),ae=q==="map",oe=T==="map",ue=q!=="viewport"&&l.layout.get("symbol-placement")!=="point",Y=ae&&!oe&&!ue,he=!oe&&ue,de=!l.layout.get("symbol-sort-key").isConstant(),ge=!1,Te=v.depthModeForSublayer(0,Ct.ReadOnly),Me=l._unevaluatedLayout.hasValue("text-variable-anchor")||l._unevaluatedLayout.hasValue("text-variable-anchor-offset"),je=[],We=ee.getCircleRadiusCorrection(Z);for(let ze of f){let De=r.getTile(ze),tt=De.getBucket(l);if(!tt)continue;let yt=d?tt.text:tt.icon;if(!yt||!yt.segments.get().length||!yt.hasVisibleVertices)continue;let Ne=yt.programConfigurations.get(l.id),Ve=d||tt.sdfIcons,mt=d?tt.textSizeData:tt.iconSizeData,lr=oe||Z.pitch!==0,Et=v.useProgram(bn(Ve,d,tt),Ne),Rt=s.ag(mt,Z.zoom),cr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ze),hi,Yn,hr,Ni,Si=[0,0],fi=null;if(d)Yn=De.glyphAtlasTexture,hr=H.LINEAR,hi=De.glyphAtlasTexture.size,tt.iconsInText&&(Si=De.imageAtlasTexture.size,fi=De.imageAtlasTexture,Ni=lr||v.options.rotating||v.options.zooming||mt.kind==="composite"||mt.kind==="camera"?H.LINEAR:H.NEAREST);else{let Ft=l.layout.get("icon-size").constantOr(0)!==1||tt.iconsNeedLinear;Yn=De.imageAtlasTexture,hr=Ve||v.options.rotating||v.options.zooming||Ft||lr?H.LINEAR:H.NEAREST,hi=De.imageAtlasTexture.size}let qi=Ot(De,1,v.transform.zoom),xa=he?ze.posMatrix:jl,wu=xo(xa,oe,ae,v.transform,qi),zh=va(xa,oe,ae,v.transform,qi),Su=va(ze.posMatrix,oe,ae,v.transform,qi),qn=ee.translatePosition(v.transform,De,m,b),Fh=Me&&tt.hasTextData(),zp=l.layout.get("icon-text-fit")!=="none"&&Fh&&tt.hasIconData();if(ue){let Ft=v.style.map.terrain?(qu,Iu)=>v.style.map.terrain.getElevation(ze,qu,Iu):null,ps=l.layout.get("text-rotation-alignment")==="map";W(tt,ze.posMatrix,v,d,wu,Su,oe,k,ps,ee,ze.toUnwrapped(),Z.width,Z.height,qn,Ft)}let In=ze.posMatrix,En=d&&Me||zp,So=ue||En?jl:wu,Jn=zh,ni=Ve&&l.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,di;di=Ve?tt.iconsInText?ep(mt.kind,Rt,Y,oe,ue,En,v,In,So,Jn,qn,hi,Si,We):Fl(mt.kind,Rt,Y,oe,ue,En,v,In,So,Jn,qn,d,hi,!0,We):oy(mt.kind,Rt,Y,oe,ue,En,v,In,So,Jn,qn,d,hi,We);let un={program:Et,buffers:yt,uniformValues:di,atlasTexture:Yn,atlasTextureIcon:fi,atlasInterpolation:hr,atlasInterpolationIcon:Ni,isSDF:Ve,hasHalo:ni};if(de&&tt.canOverlap){ge=!0;let Ft=yt.segments.get();for(let ps of Ft)je.push({segments:new s.a0([ps]),sortKey:ps.sortKey,state:un,terrainData:cr})}else je.push({segments:yt.segments,sortKey:0,state:un,terrainData:cr})}ge&&je.sort((ze,De)=>ze.sortKey-De.sortKey);for(let ze of je){let De=ze.state;if(j.activeTexture.set(H.TEXTURE0),De.atlasTexture.bind(De.atlasInterpolation,H.CLAMP_TO_EDGE),De.atlasTextureIcon&&(j.activeTexture.set(H.TEXTURE1),De.atlasTextureIcon&&De.atlasTextureIcon.bind(De.atlasInterpolationIcon,H.CLAMP_TO_EDGE)),De.isSDF){let tt=De.uniformValues;De.hasHalo&&(tt.u_is_halo=1,dp(De.buffers,ze.segments,l,v,De.program,Te,R,D,tt,ze.terrainData)),tt.u_is_halo=0}dp(De.buffers,ze.segments,l,v,De.program,Te,R,D,De.uniformValues,ze.terrainData)}}function dp(v,r,l,f,d,m,b,q,T,k){let R=f.context;d.draw(R,R.gl.TRIANGLES,m,b,q,Jt.disabled,T,k,l.id,v.layoutVertexBuffer,v.indexBuffer,r,l.paint,f.transform.zoom,v.programConfigurations.get(l.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function pp(v,r,l,f){let d=v.context,m=d.gl,b=nr.disabled,q=new Er([m.ONE,m.ONE],s.aM.transparent,[!0,!0,!0,!0]),T=r.getBucket(l);if(!T)return;let k=f.key,R=l.heatmapFbos.get(k);R||(R=Ul(d,r.tileSize,r.tileSize),l.heatmapFbos.set(k,R)),d.bindFramebuffer.set(R.framebuffer),d.viewport.set([0,0,r.tileSize,r.tileSize]),d.clear({color:s.aM.transparent});let D=T.programConfigurations.get(l.id),j=v.useProgram("heatmap",D),H=v.style.map.terrain.getTerrainData(f);j.draw(d,m.TRIANGLES,Ct.disabled,b,q,Jt.disabled,Fi(f.posMatrix,r,v.transform.zoom,l.paint.get("heatmap-intensity")),H,l.id,T.layoutVertexBuffer,T.indexBuffer,T.segments,l.paint,v.transform.zoom,D)}function cs(v,r,l){let f=v.context,d=f.gl;f.setColorMode(v.colorModeForRenderPass());let m=$l(f,r),b=l.key,q=r.heatmapFbos.get(b);q&&(f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,q.colorAttachment.get()),f.activeTexture.set(d.TEXTURE1),m.bind(d.LINEAR,d.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(f,d.TRIANGLES,Ct.disabled,nr.disabled,v.colorModeForRenderPass(),Jt.disabled,ch(v,r,0,1),null,r.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,r.paint,v.transform.zoom),q.destroy(),r.heatmapFbos.delete(b))}function Ul(v,r,l){var f,d;let m=v.gl,b=m.createTexture();m.bindTexture(m.TEXTURE_2D,b),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR);let q=(f=v.HALF_FLOAT)!==null&&f!==void 0?f:m.UNSIGNED_BYTE,T=(d=v.RGBA16F)!==null&&d!==void 0?d:m.RGBA;m.texImage2D(m.TEXTURE_2D,0,T,r,l,0,m.RGBA,q,null);let k=v.createFramebuffer(r,l,!1,!1);return k.colorAttachment.set(b),k}function $l(v,r){return r.colorRampTexture||(r.colorRampTexture=new Je(v,r.colorRamp,v.gl.RGBA)),r.colorRampTexture}function su(v,r,l,f,d){if(!l||!f||!f.imageAtlas)return;let m=f.imageAtlas.patternPositions,b=m[l.to.toString()],q=m[l.from.toString()];if(!b&&q&&(b=q),!q&&b&&(q=b),!b||!q){let T=d.getPaintProperty(r);b=m[T],q=m[T]}b&&q&&v.setConstantPatternPositions(b,q)}function Vl(v,r,l,f,d,m,b){let q=v.context.gl,T="fill-pattern",k=l.paint.get(T),R=k&&k.constantOr(1),D=l.getCrossfadeParameters(),j,H,Z,ee,ae;b?(H=R&&!l.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=q.LINES):(H=R?"fillPattern":"fill",j=q.TRIANGLES);let oe=k.constantOr(null);for(let ue of f){let Y=r.getTile(ue);if(R&&!Y.patternsLoaded())continue;let he=Y.getBucket(l);if(!he)continue;let de=he.programConfigurations.get(l.id),ge=v.useProgram(H,de),Te=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ue);R&&(v.context.activeTexture.set(q.TEXTURE0),Y.imageAtlasTexture.bind(q.LINEAR,q.CLAMP_TO_EDGE),de.updatePaintBuffers(D)),su(de,T,oe,Y,l);let Me=Te?ue:null,je=v.translatePosMatrix(Me?Me.posMatrix:ue.posMatrix,Y,l.paint.get("fill-translate"),l.paint.get("fill-translate-anchor"));if(b){ee=he.indexBuffer2,ae=he.segments2;let We=[q.drawingBufferWidth,q.drawingBufferHeight];Z=H==="fillOutlinePattern"&&R?ry(je,v,D,Y,We):sw(je,We)}else ee=he.indexBuffer,ae=he.segments,Z=R?ty(je,v,D,Y):iu(je);ge.draw(v.context,j,d,v.stencilModeForClipping(ue),m,Jt.disabled,Z,Te,l.id,he.layoutVertexBuffer,ee,ae,l.paint,v.transform.zoom,de)}}function _h(v,r,l,f,d,m,b){let q=v.context,T=q.gl,k="fill-extrusion-pattern",R=l.paint.get(k),D=R.constantOr(1),j=l.getCrossfadeParameters(),H=l.paint.get("fill-extrusion-opacity"),Z=R.constantOr(null);for(let ee of f){let ae=r.getTile(ee),oe=ae.getBucket(l);if(!oe)continue;let ue=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ee),Y=oe.programConfigurations.get(l.id),he=v.useProgram(D?"fillExtrusionPattern":"fillExtrusion",Y);D&&(v.context.activeTexture.set(T.TEXTURE0),ae.imageAtlasTexture.bind(T.LINEAR,T.CLAMP_TO_EDGE),Y.updatePaintBuffers(j)),su(Y,k,Z,ae,l);let de=v.translatePosMatrix(ee.posMatrix,ae,l.paint.get("fill-extrusion-translate"),l.paint.get("fill-extrusion-translate-anchor")),ge=l.paint.get("fill-extrusion-vertical-gradient"),Te=D?lh(de,v,ge,H,ee,j,ae):Ll(de,v,ge,H);he.draw(q,q.gl.TRIANGLES,d,m,b,Jt.backCCW,Te,ue,l.id,oe.layoutVertexBuffer,oe.indexBuffer,oe.segments,l.paint,v.transform.zoom,Y,v.style.map.terrain&&oe.centroidVertexBuffer)}}function uu(v,r,l,f,d,m,b){let q=v.context,T=q.gl,k=l.fbo;if(!k)return;let R=v.useProgram("hillshade"),D=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);q.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,k.colorAttachment.get()),R.draw(q,T.TRIANGLES,d,m,b,Jt.disabled,((j,H,Z,ee)=>{let ae=Z.paint.get("hillshade-shadow-color"),oe=Z.paint.get("hillshade-highlight-color"),ue=Z.paint.get("hillshade-accent-color"),Y=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&(Y-=j.transform.angle);let he=!j.options.moving;return{u_matrix:ee?ee.posMatrix:j.transform.calculatePosMatrix(H.tileID.toUnwrapped(),he),u_image:0,u_latrange:hh(0,H.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),Y],u_shadow:ae,u_highlight:oe,u_accent:ue}})(v,l,f,D?r:null),D,f.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function lu(v,r,l,f,d,m){let b=v.context,q=b.gl,T=r.dem;if(T&&T.data){let k=T.dim,R=T.stride,D=T.getPixels();if(b.activeTexture.set(q.TEXTURE1),b.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(R),r.demTexture){let H=r.demTexture;H.update(D,{premultiply:!1}),H.bind(q.NEAREST,q.CLAMP_TO_EDGE)}else r.demTexture=new Je(b,D,q.RGBA,{premultiply:!1}),r.demTexture.bind(q.NEAREST,q.CLAMP_TO_EDGE);b.activeTexture.set(q.TEXTURE0);let j=r.fbo;if(!j){let H=new Je(b,{width:k,height:k,data:null},q.RGBA);H.bind(q.LINEAR,q.CLAMP_TO_EDGE),j=r.fbo=b.createFramebuffer(k,k,!0,!1),j.colorAttachment.set(H.texture)}b.bindFramebuffer.set(j.framebuffer),b.viewport.set([0,0,k,k]),v.useProgram("hillshadePrepare").draw(b,q.TRIANGLES,f,d,m,Jt.disabled,((H,Z)=>{let ee=Z.stride,ae=s.H();return s.aP(ae,0,s.X,-s.X,0,0,1),s.J(ae,ae,[0,-s.X,0]),{u_matrix:ae,u_image:1,u_dimension:[ee,ee],u_zoom:H.overscaledZ,u_unpack:Z.getUnpackVector()}})(r.tileID,T),null,l.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function _y(v,r,l,f,d,m){let b=f.paint.get("raster-fade-duration");if(!m&&b>0){let q=P.now(),T=(q-v.timeAdded)/b,k=r?(q-r.timeAdded)/b:-1,R=l.getSource(),D=d.coveringZoomLevel({tileSize:R.tileSize,roundZoom:R.roundZoom}),j=!r||Math.abs(r.tileID.overscaledZ-D)>Math.abs(v.tileID.overscaledZ-D),H=j&&v.refreshedUponExpiration?1:s.ac(j?T:1-k,0,1);return v.refreshedUponExpiration&&T>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}let mp=new s.aM(1,0,0,1),Ut=new s.aM(0,1,0,1),xh=new s.aM(0,0,1,1),ww=new s.aM(1,0,1,1),xy=new s.aM(0,1,1,1);function cu(v,r,l,f){bh(v,0,r+l/2,v.transform.width,l,f)}function by(v,r,l,f){bh(v,r-l/2,0,l,v.transform.height,f)}function bh(v,r,l,f,d,m){let b=v.context,q=b.gl;q.enable(q.SCISSOR_TEST),q.scissor(r*v.pixelRatio,l*v.pixelRatio,f*v.pixelRatio,d*v.pixelRatio),b.clear({color:m}),q.disable(q.SCISSOR_TEST)}function wy(v,r,l){let f=v.context,d=f.gl,m=l.posMatrix,b=v.useProgram("debug"),q=Ct.disabled,T=nr.disabled,k=v.colorModeForRenderPass(),R="$debug",D=v.style.map.terrain&&v.style.map.terrain.getTerrainData(l);f.activeTexture.set(d.TEXTURE0);let j=r.getTileByID(l.key).latestRawTileData,H=Math.floor((j&&j.byteLength||0)/1024),Z=r.getTile(l).tileSize,ee=512/Math.min(Z,512)*(l.overscaledZ/v.transform.zoom)*.5,ae=l.canonical.toString();l.overscaledZ!==l.canonical.z&&(ae+=` => ${l.overscaledZ}`),function(oe,ue){oe.initDebugOverlayCanvas();let Y=oe.debugOverlayCanvas,he=oe.context.gl,de=oe.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,Y.width,Y.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold 36px Open Sans, sans-serif",de.fillText(ue,5,5),de.strokeText(ue,5,5),oe.debugOverlayTexture.update(Y),oe.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(v,`${ae} ${H}kB`),b.draw(f,d.TRIANGLES,q,T,Er.alphaBlended,Jt.disabled,zl(m,s.aM.transparent,ee),null,R,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),b.draw(f,d.LINE_STRIP,q,T,k,Jt.disabled,zl(m,s.aM.red),D,R,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Sy(v,r,l){let f=v.context,d=f.gl,m=v.colorModeForRenderPass(),b=new Ct(d.LEQUAL,Ct.ReadWrite,v.depthRangeFor3D),q=v.useProgram("terrain"),T=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,v.width,v.height]);for(let k of l){let R=v.renderToTexture.getTexture(k),D=r.getTerrainData(k.tileID);f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,R.texture);let j=v.transform.calculatePosMatrix(k.tileID.toUnwrapped()),H=r.getMeshFrameDelta(v.transform.zoom),Z=v.transform.calculateFogMatrix(k.tileID.toUnwrapped()),ee=Jd(j,H,Z,v.style.sky,v.transform.pitch);q.draw(f,d.TRIANGLES,b,nr.disabled,m,Jt.backCCW,ee,D,"terrain",T.vertexBuffer,T.indexBuffer,T.segments)}}class wh{constructor(r,l,f){this.vertexBuffer=r,this.indexBuffer=l,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Sh{constructor(r,l){this.context=new bw(r),this.transform=l,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:s.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=dt.maxUnderzooming+dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Xd}resize(r,l,f){if(this.width=Math.floor(r*f),this.height=Math.floor(l*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let d of this.style._order)this.style._layers[d].resize()}setup(){let r=this.context,l=new s.aX;l.emplaceBack(0,0),l.emplaceBack(s.X,0),l.emplaceBack(0,s.X),l.emplaceBack(s.X,s.X),this.tileExtentBuffer=r.createVertexBuffer(l,is.members),this.tileExtentSegments=s.a0.simpleSegment(0,0,4,2);let f=new s.aX;f.emplaceBack(0,0),f.emplaceBack(s.X,0),f.emplaceBack(0,s.X),f.emplaceBack(s.X,s.X),this.debugBuffer=r.createVertexBuffer(f,is.members),this.debugSegments=s.a0.simpleSegment(0,0,4,5);let d=new s.$;d.emplaceBack(0,0,0,0),d.emplaceBack(s.X,0,s.X,0),d.emplaceBack(0,s.X,0,s.X),d.emplaceBack(s.X,s.X,s.X,s.X),this.rasterBoundsBuffer=r.createVertexBuffer(d,yo.members),this.rasterBoundsSegments=s.a0.simpleSegment(0,0,4,2);let m=new s.aX;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(m,is.members),this.viewportSegments=s.a0.simpleSegment(0,0,4,2);let b=new s.aZ;b.emplaceBack(0),b.emplaceBack(1),b.emplaceBack(3),b.emplaceBack(2),b.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(b);let q=new s.aY;q.emplaceBack(0,1,2),q.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(q);let T=this.context.gl;this.stencilClearMode=new nr({func:T.ALWAYS,mask:0},0,255,T.ZERO,T.ZERO,T.ZERO)}clearStencil(){let r=this.context,l=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let f=s.H();s.aP(f,0,this.width,this.height,0,0,1),s.K(f,f,[l.drawingBufferWidth,l.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,l.TRIANGLES,Ct.disabled,this.stencilClearMode,Er.disabled,Jt.disabled,zi(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,l){if(this.currentStencilSource===r.source||!r.isTileClipped()||!l||!l.length)return;this.currentStencilSource=r.source;let f=this.context,d=f.gl;this.nextStencilID+l.length>256&&this.clearStencil(),f.setColorMode(Er.disabled),f.setDepthMode(Ct.disabled);let m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let b of l){let q=this._tileClippingMaskIDs[b.key]=this.nextStencilID++,T=this.style.map.terrain&&this.style.map.terrain.getTerrainData(b);m.draw(f,d.TRIANGLES,Ct.disabled,new nr({func:d.ALWAYS,mask:0},q,255,d.KEEP,d.KEEP,d.REPLACE),Er.disabled,Jt.disabled,zi(b.posMatrix),T,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let r=this.nextStencilID++,l=this.context.gl;return new nr({func:l.NOTEQUAL,mask:255},r,255,l.KEEP,l.KEEP,l.REPLACE)}stencilModeForClipping(r){let l=this.context.gl;return new nr({func:l.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,l.KEEP,l.KEEP,l.REPLACE)}stencilConfigForOverlap(r){let l=this.context.gl,f=r.sort((b,q)=>q.overscaledZ-b.overscaledZ),d=f[f.length-1].overscaledZ,m=f[0].overscaledZ-d+1;if(m>1){this.currentStencilSource=void 0,this.nextStencilID+m>256&&this.clearStencil();let b={};for(let q=0;q<m;q++)b[q+d]=new nr({func:l.GEQUAL,mask:255},q+this.nextStencilID,255,l.KEEP,l.KEEP,l.REPLACE);return this.nextStencilID+=m,[b,f]}return[{[d]:nr.disabled},f]}colorModeForRenderPass(){let r=this.context.gl;return this._showOverdrawInspector?new Er([r.CONSTANT_COLOR,r.ONE],new s.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Er.unblended:Er.alphaBlended}depthModeForSublayer(r,l,f){if(!this.opaquePassEnabledForLayer())return Ct.disabled;let d=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Ct(f||this.context.gl.LEQUAL,l,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,l){this.style=r,this.options=l,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(P.now()),this.imageManager.beginFrame();let f=this.style._order,d=this.style.sourceCaches,m={},b={},q={};for(let T in d){let k=d[T];k.used&&k.prepare(this.context),m[T]=k.getVisibleCoordinates(),b[T]=m[T].slice().reverse(),q[T]=k.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let T=0;T<f.length;T++)if(this.style._layers[f[T]].is3D()){this.opaquePassCutoff=T;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let T of f){let k=this.style._layers[T];if(!k.hasOffscreenPass()||k.isHidden(this.transform.zoom))continue;let R=b[k.source];(k.type==="custom"||R.length)&&this.renderLayer(this,d[k.source],k,R)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:l.showOverdrawInspector?s.aM.black:s.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(T,k){let R=T.context,D=R.gl,j=((oe,ue,Y)=>({u_sky_color:oe.properties.get("sky-color"),u_horizon_color:oe.properties.get("horizon-color"),u_horizon:(ue.height/2+ue.getHorizon())*Y,u_sky_horizon_blend:oe.properties.get("sky-horizon-blend")*ue.height/2*Y}))(k,T.style.map.transform,T.pixelRatio),H=new Ct(D.LEQUAL,Ct.ReadWrite,[0,1]),Z=nr.disabled,ee=T.colorModeForRenderPass(),ae=T.useProgram("sky");if(!k.mesh){let oe=new s.aX;oe.emplaceBack(-1,-1),oe.emplaceBack(1,-1),oe.emplaceBack(1,1),oe.emplaceBack(-1,1);let ue=new s.aY;ue.emplaceBack(0,1,2),ue.emplaceBack(0,2,3),k.mesh=new wh(R.createVertexBuffer(oe,is.members),R.createIndexBuffer(ue),s.a0.simpleSegment(0,0,oe.length,ue.length))}ae.draw(R,D.TRIANGLES,H,Z,ee,Jt.disabled,j,void 0,"sky",k.mesh.vertexBuffer,k.mesh.indexBuffer,k.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=l.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){let T=this.style._layers[f[this.currentLayer]],k=d[T.source],R=m[T.source];this._renderTileClippingMasks(T,R),this.renderLayer(this,k,T,R)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){let T=this.style._layers[f[this.currentLayer]],k=d[T.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(T))continue;let R=(T.type==="symbol"?q:b)[T.source];this._renderTileClippingMasks(T,m[T.source]),this.renderLayer(this,k,T,R)}if(this.options.showTileBoundaries){let T=function(k,R){let D=null,j=Object.values(k._layers).flatMap(ae=>ae.source&&!ae.isHidden(R)?[k.sourceCaches[ae.source]]:[]),H=j.filter(ae=>ae.getSource().type==="vector"),Z=j.filter(ae=>ae.getSource().type!=="vector"),ee=ae=>{(!D||D.getSource().maxzoom<ae.getSource().maxzoom)&&(D=ae)};return H.forEach(ae=>ee(ae)),D||Z.forEach(ae=>ee(ae)),D}(this.style,this.transform.zoom);T&&function(k,R,D){for(let j=0;j<D.length;j++)wy(k,R,D[j])}(this,T,T.getVisibleCoordinates())}this.options.showPadding&&function(T){let k=T.transform.padding;cu(T,T.transform.height-(k.top||0),3,mp),cu(T,k.bottom||0,3,Ut),by(T,k.left||0,3,xh),by(T,T.transform.width-(k.right||0),3,ww);let R=T.transform.centerPoint;(function(D,j,H,Z){bh(D,j-1,H-10,2,20,Z),bh(D,j-10,H-1,20,2,Z)})(T,R.x,T.transform.height-R.y,xy)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;let l=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix,d=this.terrainFacilitator.dirty;d||(d=r?!s.a_(l,f):!s.a$(l,f)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(s.b0(l,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(m,b){let q=m.context,T=q.gl,k=Er.unblended,R=new Ct(T.LEQUAL,Ct.ReadWrite,[0,1]),D=b.getTerrainMesh(),j=b.sourceCache.getRenderableTiles(),H=m.useProgram("terrainDepth");q.bindFramebuffer.set(b.getFramebuffer("depth").framebuffer),q.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),q.clear({color:s.aM.transparent,depth:1});for(let Z of j){let ee=b.getTerrainData(Z.tileID),ae={u_matrix:m.transform.calculatePosMatrix(Z.tileID.toUnwrapped()),u_ele_delta:b.getMeshFrameDelta(m.transform.zoom)};H.draw(q,T.TRIANGLES,R,nr.disabled,k,Jt.backCCW,ae,ee,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}q.bindFramebuffer.set(null),q.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain),function(m,b){let q=m.context,T=q.gl,k=Er.unblended,R=new Ct(T.LEQUAL,Ct.ReadWrite,[0,1]),D=b.getTerrainMesh(),j=b.getCoordsTexture(),H=b.sourceCache.getRenderableTiles(),Z=m.useProgram("terrainCoords");q.bindFramebuffer.set(b.getFramebuffer("coords").framebuffer),q.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),q.clear({color:s.aM.transparent,depth:1}),b.coordsIndex=[];for(let ee of H){let ae=b.getTerrainData(ee.tileID);q.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,j.texture);let oe={u_matrix:m.transform.calculatePosMatrix(ee.tileID.toUnwrapped()),u_terrain_coords_id:(255-b.coordsIndex.length)/255,u_texture:0,u_ele_delta:b.getMeshFrameDelta(m.transform.zoom)};Z.draw(q,T.TRIANGLES,R,nr.disabled,k,Jt.backCCW,oe,ae,"terrain",D.vertexBuffer,D.indexBuffer,D.segments),b.coordsIndex.push(ee.tileID.key)}q.bindFramebuffer.set(null),q.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain))}renderLayer(r,l,f,d){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(d||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(m,b,q,T,k){if(m.renderPass!=="translucent")return;let R=nr.disabled,D=m.colorModeForRenderPass();(q._unevaluatedLayout.hasValue("text-variable-anchor")||q._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(j,H,Z,ee,ae,oe,ue,Y,he){let de=H.transform,ge=rs(),Te=ae==="map",Me=oe==="map";for(let je of j){let We=ee.getTile(je),ze=We.getBucket(Z);if(!ze||!ze.text||!ze.text.segments.get().length)continue;let De=s.ag(ze.textSizeData,de.zoom),tt=Ot(We,1,H.transform.zoom),yt=xo(je.posMatrix,Me,Te,H.transform,tt),Ne=Z.layout.get("icon-text-fit")!=="none"&&ze.hasIconData();if(De){let Ve=Math.pow(2,de.zoom-We.tileID.overscaledZ),mt=H.style.map.terrain?(Et,Rt)=>H.style.map.terrain.getElevation(je,Et,Rt):null,lr=ge.translatePosition(de,We,ue,Y);ou(ze,Te,Me,he,de,yt,je.posMatrix,Ve,De,Ne,ge,lr,je.toUnwrapped(),mt)}}}(T,m,q,b,q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),k),q.paint.get("icon-opacity").constantOr(1)!==0&&fp(m,b,q,T,!1,q.paint.get("icon-translate"),q.paint.get("icon-translate-anchor"),q.layout.get("icon-rotation-alignment"),q.layout.get("icon-pitch-alignment"),q.layout.get("icon-keep-upright"),R,D),q.paint.get("text-opacity").constantOr(1)!==0&&fp(m,b,q,T,!0,q.paint.get("text-translate"),q.paint.get("text-translate-anchor"),q.layout.get("text-rotation-alignment"),q.layout.get("text-pitch-alignment"),q.layout.get("text-keep-upright"),R,D),b.map.showCollisionBoxes&&(Bl(m,b,q,T,!0),Bl(m,b,q,T,!1))})(r,l,f,d,this.style.placement.variableOffsets);break;case"circle":(function(m,b,q,T){if(m.renderPass!=="translucent")return;let k=q.paint.get("circle-opacity"),R=q.paint.get("circle-stroke-width"),D=q.paint.get("circle-stroke-opacity"),j=!q.layout.get("circle-sort-key").isConstant();if(k.constantOr(1)===0&&(R.constantOr(1)===0||D.constantOr(1)===0))return;let H=m.context,Z=H.gl,ee=m.depthModeForSublayer(0,Ct.ReadOnly),ae=nr.disabled,oe=m.colorModeForRenderPass(),ue=[];for(let Y=0;Y<T.length;Y++){let he=T[Y],de=b.getTile(he),ge=de.getBucket(q);if(!ge)continue;let Te=ge.programConfigurations.get(q.id),Me=m.useProgram("circle",Te),je=ge.layoutVertexBuffer,We=ge.indexBuffer,ze=m.style.map.terrain&&m.style.map.terrain.getTerrainData(he),De={programConfiguration:Te,program:Me,layoutVertexBuffer:je,indexBuffer:We,uniformValues:uw(m,he,de,q),terrainData:ze};if(j){let tt=ge.segments.get();for(let yt of tt)ue.push({segments:new s.a0([yt]),sortKey:yt.sortKey,state:De})}else ue.push({segments:ge.segments,sortKey:0,state:De})}j&&ue.sort((Y,he)=>Y.sortKey-he.sortKey);for(let Y of ue){let{programConfiguration:he,program:de,layoutVertexBuffer:ge,indexBuffer:Te,uniformValues:Me,terrainData:je}=Y.state;de.draw(H,Z.TRIANGLES,ee,ae,oe,Jt.disabled,Me,je,q.id,ge,Te,Y.segments,q.paint,m.transform.zoom,he)}})(r,l,f,d);break;case"heatmap":(function(m,b,q,T){if(q.paint.get("heatmap-opacity")===0)return;let k=m.context;if(m.style.map.terrain){for(let R of T){let D=b.getTile(R);b.hasRenderableParent(R)||(m.renderPass==="offscreen"?pp(m,D,q,R):m.renderPass==="translucent"&&cs(m,q,R))}k.viewport.set([0,0,m.width,m.height])}else m.renderPass==="offscreen"?function(R,D,j,H){let Z=R.context,ee=Z.gl,ae=nr.disabled,oe=new Er([ee.ONE,ee.ONE],s.aM.transparent,[!0,!0,!0,!0]);(function(ue,Y,he){let de=ue.gl;ue.activeTexture.set(de.TEXTURE1),ue.viewport.set([0,0,Y.width/4,Y.height/4]);let ge=he.heatmapFbos.get(s.aU);ge?(de.bindTexture(de.TEXTURE_2D,ge.colorAttachment.get()),ue.bindFramebuffer.set(ge.framebuffer)):(ge=Ul(ue,Y.width/4,Y.height/4),he.heatmapFbos.set(s.aU,ge))})(Z,R,j),Z.clear({color:s.aM.transparent});for(let ue=0;ue<H.length;ue++){let Y=H[ue];if(D.hasRenderableParent(Y))continue;let he=D.getTile(Y),de=he.getBucket(j);if(!de)continue;let ge=de.programConfigurations.get(j.id),Te=R.useProgram("heatmap",ge),{zoom:Me}=R.transform;Te.draw(Z,ee.TRIANGLES,Ct.disabled,ae,oe,Jt.disabled,Fi(Y.posMatrix,he,Me,j.paint.get("heatmap-intensity")),null,j.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,j.paint,R.transform.zoom,ge)}Z.viewport.set([0,0,R.width,R.height])}(m,b,q,T):m.renderPass==="translucent"&&function(R,D){let j=R.context,H=j.gl;j.setColorMode(R.colorModeForRenderPass());let Z=D.heatmapFbos.get(s.aU);Z&&(j.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,Z.colorAttachment.get()),j.activeTexture.set(H.TEXTURE1),$l(j,D).bind(H.LINEAR,H.CLAMP_TO_EDGE),R.useProgram("heatmapTexture").draw(j,H.TRIANGLES,Ct.disabled,nr.disabled,R.colorModeForRenderPass(),Jt.disabled,ch(R,D,0,1),null,D.id,R.viewportBuffer,R.quadTriangleIndexBuffer,R.viewportSegments,D.paint,R.transform.zoom))}(m,q)})(r,l,f,d);break;case"line":(function(m,b,q,T){if(m.renderPass!=="translucent")return;let k=q.paint.get("line-opacity"),R=q.paint.get("line-width");if(k.constantOr(1)===0||R.constantOr(1)===0)return;let D=m.depthModeForSublayer(0,Ct.ReadOnly),j=m.colorModeForRenderPass(),H=q.paint.get("line-dasharray"),Z=q.paint.get("line-pattern"),ee=Z.constantOr(1),ae=q.paint.get("line-gradient"),oe=q.getCrossfadeParameters(),ue=ee?"linePattern":H?"lineSDF":ae?"lineGradient":"line",Y=m.context,he=Y.gl,de=!0;for(let ge of T){let Te=b.getTile(ge);if(ee&&!Te.patternsLoaded())continue;let Me=Te.getBucket(q);if(!Me)continue;let je=Me.programConfigurations.get(q.id),We=m.context.program.get(),ze=m.useProgram(ue,je),De=de||ze.program!==We,tt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ge),yt=Z.constantOr(null);if(yt&&Te.imageAtlas){let mt=Te.imageAtlas,lr=mt.patternPositions[yt.to.toString()],Et=mt.patternPositions[yt.from.toString()];lr&&Et&&je.setConstantPatternPositions(lr,Et)}let Ne=tt?ge:null,Ve=ee?nu(m,Te,q,oe,Ne):H?lw(m,Te,q,H,oe,Ne):ae?iy(m,Te,q,Me.lineClipsArray.length,Ne):fh(m,Te,q,Ne);if(ee)Y.activeTexture.set(he.TEXTURE0),Te.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),je.updatePaintBuffers(oe);else if(H&&(De||m.lineAtlas.dirty))Y.activeTexture.set(he.TEXTURE0),m.lineAtlas.bind(Y);else if(ae){let mt=Me.gradients[q.id],lr=mt.texture;if(q.gradientVersion!==mt.version){let Et=256;if(q.stepInterpolant){let Rt=b.getSource().maxzoom,cr=ge.canonical.z===Rt?Math.ceil(1<<m.transform.maxZoom-ge.canonical.z):1;Et=s.ac(s.aV(Me.maxLineLength/s.X*1024*cr),256,Y.maxTextureSize)}mt.gradient=s.aW({expression:q.gradientExpression(),evaluationKey:"lineProgress",resolution:Et,image:mt.gradient||void 0,clips:Me.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new Je(Y,mt.gradient,he.RGBA),mt.version=q.gradientVersion,lr=mt.texture}Y.activeTexture.set(he.TEXTURE0),lr.bind(q.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}ze.draw(Y,he.TRIANGLES,D,m.stencilModeForClipping(ge),j,Jt.disabled,Ve,tt,q.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,q.paint,m.transform.zoom,je,Me.layoutVertexBuffer2),de=!1}})(r,l,f,d);break;case"fill":(function(m,b,q,T){let k=q.paint.get("fill-color"),R=q.paint.get("fill-opacity");if(R.constantOr(1)===0)return;let D=m.colorModeForRenderPass(),j=q.paint.get("fill-pattern"),H=m.opaquePassEnabledForLayer()&&!j.constantOr(1)&&k.constantOr(s.aM.transparent).a===1&&R.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===H){let Z=m.depthModeForSublayer(1,m.renderPass==="opaque"?Ct.ReadWrite:Ct.ReadOnly);Vl(m,b,q,T,Z,D,!1)}if(m.renderPass==="translucent"&&q.paint.get("fill-antialias")){let Z=m.depthModeForSublayer(q.getPaintProperty("fill-outline-color")?2:0,Ct.ReadOnly);Vl(m,b,q,T,Z,D,!0)}})(r,l,f,d);break;case"fill-extrusion":(function(m,b,q,T){let k=q.paint.get("fill-extrusion-opacity");if(k!==0&&m.renderPass==="translucent"){let R=new Ct(m.context.gl.LEQUAL,Ct.ReadWrite,m.depthRangeFor3D);if(k!==1||q.paint.get("fill-extrusion-pattern").constantOr(1))_h(m,b,q,T,R,nr.disabled,Er.disabled),_h(m,b,q,T,R,m.stencilModeFor3D(),m.colorModeForRenderPass());else{let D=m.colorModeForRenderPass();_h(m,b,q,T,R,nr.disabled,D)}}})(r,l,f,d);break;case"hillshade":(function(m,b,q,T){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;let k=m.context,R=m.depthModeForSublayer(0,Ct.ReadOnly),D=m.colorModeForRenderPass(),[j,H]=m.renderPass==="translucent"?m.stencilConfigForOverlap(T):[{},T];for(let Z of H){let ee=b.getTile(Z);ee.needsHillshadePrepare!==void 0&&ee.needsHillshadePrepare&&m.renderPass==="offscreen"?lu(m,ee,q,R,nr.disabled,D):m.renderPass==="translucent"&&uu(m,Z,ee,q,R,j[Z.overscaledZ],D)}k.viewport.set([0,0,m.width,m.height])})(r,l,f,d);break;case"raster":(function(m,b,q,T){if(m.renderPass!=="translucent"||q.paint.get("raster-opacity")===0||!T.length)return;let k=m.context,R=k.gl,D=b.getSource(),j=m.useProgram("raster"),H=m.colorModeForRenderPass(),[Z,ee]=D instanceof Ka?[{},T]:m.stencilConfigForOverlap(T),ae=ee[ee.length-1].overscaledZ,oe=!m.options.moving;for(let ue of ee){let Y=m.depthModeForSublayer(ue.overscaledZ-ae,q.paint.get("raster-opacity")===1?Ct.ReadWrite:Ct.ReadOnly,R.LESS),he=b.getTile(ue);he.registerFadeDuration(q.paint.get("raster-fade-duration"));let de=b.findLoadedParent(ue,0),ge=b.findLoadedSibling(ue),Te=_y(he,de||ge||null,b,q,m.transform,m.style.map.terrain),Me,je,We=q.paint.get("raster-resampling")==="nearest"?R.NEAREST:R.LINEAR;k.activeTexture.set(R.TEXTURE0),he.texture.bind(We,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),k.activeTexture.set(R.TEXTURE1),de?(de.texture.bind(We,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),Me=Math.pow(2,de.tileID.overscaledZ-he.tileID.overscaledZ),je=[he.tileID.canonical.x*Me%1,he.tileID.canonical.y*Me%1]):he.texture.bind(We,R.CLAMP_TO_EDGE,R.LINEAR_MIPMAP_NEAREST),he.texture.useMipmap&&k.extTextureFilterAnisotropic&&m.transform.pitch>20&&R.texParameterf(R.TEXTURE_2D,k.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,k.extTextureFilterAnisotropicMax);let ze=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ue),De=ze?ue:null,tt=De?De.posMatrix:m.transform.calculatePosMatrix(ue.toUnwrapped(),oe),yt=cw(tt,je||[0,0],Me||1,Te,q);D instanceof Ka?j.draw(k,R.TRIANGLES,Y,nr.disabled,H,Jt.disabled,yt,ze,q.id,D.boundsBuffer,m.quadTriangleIndexBuffer,D.boundsSegments):j.draw(k,R.TRIANGLES,Y,Z[ue.overscaledZ],H,Jt.disabled,yt,ze,q.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}})(r,l,f,d);break;case"background":(function(m,b,q,T){let k=q.paint.get("background-color"),R=q.paint.get("background-opacity");if(R===0)return;let D=m.context,j=D.gl,H=m.transform,Z=H.tileSize,ee=q.paint.get("background-pattern");if(m.isPatternMissing(ee))return;let ae=!ee&&k.a===1&&R===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==ae)return;let oe=nr.disabled,ue=m.depthModeForSublayer(0,ae==="opaque"?Ct.ReadWrite:Ct.ReadOnly),Y=m.colorModeForRenderPass(),he=m.useProgram(ee?"backgroundPattern":"background"),de=T||H.coveringTiles({tileSize:Z,terrain:m.style.map.terrain});ee&&(D.activeTexture.set(j.TEXTURE0),m.imageManager.bind(m.context));let ge=q.getCrossfadeParameters();for(let Te of de){let Me=T?Te.posMatrix:m.transform.calculatePosMatrix(Te.toUnwrapped()),je=ee?tp(Me,R,m,ee,{tileID:Te,tileSize:Z},ge):dh(Me,R,k),We=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Te);he.draw(D,j.TRIANGLES,ue,oe,Y,Jt.disabled,je,We,q.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}})(r,0,f,d);break;case"custom":(function(m,b,q){let T=m.context,k=q.implementation;if(m.renderPass==="offscreen"){let R=k.prerender;R&&(m.setCustomLayerDefaults(),T.setColorMode(m.colorModeForRenderPass()),R.call(k,T.gl,m.transform.customLayerMatrix()),T.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),T.setColorMode(m.colorModeForRenderPass()),T.setStencilMode(nr.disabled);let R=k.renderingMode==="3d"?new Ct(m.context.gl.LEQUAL,Ct.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,Ct.ReadOnly);T.setDepthMode(R),k.render(T.gl,m.transform.customLayerMatrix(),{farZ:m.transform.farZ,nearZ:m.transform.nearZ,fov:m.transform._fov,modelViewProjectionMatrix:m.transform.modelViewProjectionMatrix,projectionMatrix:m.transform.projectionMatrix}),T.setDirty(),m.setBaseState(),T.bindFramebuffer.set(null)}})(r,0,f);}}translatePosMatrix(r,l,f,d,m){if(!f[0]&&!f[1])return r;let b=m?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(b){let k=Math.sin(b),R=Math.cos(b);f=[f[0]*R-f[1]*k,f[0]*k+f[1]*R]}let q=[m?f[0]:Ot(l,f[0],this.transform.zoom),m?f[1]:Ot(l,f[1],this.transform.zoom),0],T=new Float32Array(16);return s.J(T,r,q),T}saveTileTexture(r){let l=this._tileTextures[r.size[0]];l?l.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let l=this._tileTextures[r];return l&&l.length>0?l.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;let l=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!l||!f}useProgram(r,l){this.cache=this.cache||{};let f=r+(l?l.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Qd(this.context,bo[r],l,rp[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Je(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:r,drawingBufferHeight:l}=this.context.gl;return this.width!==r||this.height!==l}}class hu{constructor(r,l){this.points=r,this.planes=l}static fromInvProjectionMatrix(r,l,f){let d=Math.pow(2,f),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(q=>{let T=1/(q=s.af([],q,r))[3]/l*d;return s.b1(q,q,[T,T,1/q[3],T])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(q=>{let T=function(j,H){var Z=H[0],ee=H[1],ae=H[2],oe=Z*Z+ee*ee+ae*ae;return oe>0&&(oe=1/Math.sqrt(oe)),j[0]=H[0]*oe,j[1]=H[1]*oe,j[2]=H[2]*oe,j}([],function(j,H,Z){var ee=H[0],ae=H[1],oe=H[2],ue=Z[0],Y=Z[1],he=Z[2];return j[0]=ae*he-oe*Y,j[1]=oe*ue-ee*he,j[2]=ee*Y-ae*ue,j}([],Qe([],m[q[0]],m[q[1]]),Qe([],m[q[2]],m[q[1]]))),k=-((R=T)[0]*(D=m[q[1]])[0]+R[1]*D[1]+R[2]*D[2]);var R,D;return T.concat(k)});return new hu(m,b)}}class fu{constructor(r,l){this.min=r,this.max=l,this.center=function(f,d,m){return f[0]=.5*d[0],f[1]=.5*d[1],f[2]=.5*d[2],f}([],function(f,d,m){return f[0]=d[0]+m[0],f[1]=d[1]+m[1],f[2]=d[2]+m[2],f}([],this.min,this.max))}quadrant(r){let l=[r%2==0,r<2],f=_e(this.min),d=_e(this.max);for(let m=0;m<l.length;m++)f[m]=l[m]?this.min[m]:this.center[m],d[m]=l[m]?this.center[m]:this.max[m];return d[2]=this.max[2],new fu(f,d)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){let l=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],f=!0;for(let d=0;d<r.planes.length;d++){let m=r.planes[d],b=0;for(let q=0;q<l.length;q++)s.b2(m,l[q])>=0&&b++;if(b===0)return 0;b!==l.length&&(f=!1)}if(f)return 2;for(let d=0;d<3;d++){let m=Number.MAX_VALUE,b=-Number.MAX_VALUE;for(let q=0;q<r.points.length;q++){let T=r.points[q][d]-this.min[d];m=Math.min(m,T),b=Math.max(b,T)}if(b<0||m>this.max[d]-this.min[d])return 0}return 1}}class du{constructor(r=0,l=0,f=0,d=0){if(isNaN(r)||r<0||isNaN(l)||l<0||isNaN(f)||f<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=l,this.left=f,this.right=d}interpolate(r,l,f){return l.top!=null&&r.top!=null&&(this.top=s.y.number(r.top,l.top,f)),l.bottom!=null&&r.bottom!=null&&(this.bottom=s.y.number(r.bottom,l.bottom,f)),l.left!=null&&r.left!=null&&(this.left=s.y.number(r.left,l.left,f)),l.right!=null&&r.right!=null&&(this.right=s.y.number(r.right,l.right,f)),this}getCenter(r,l){let f=s.ac((this.left+r-this.right)/2,0,r),d=s.ac((this.top+l-this.bottom)/2,0,l);return new s.P(f,d)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new du(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let vp=85.051129;class pu{constructor(r,l,f,d,m){this.tileSize=512,this._renderWorldCopies=m===void 0||!!m,this._minZoom=r||0,this._maxZoom=l||22,this._minPitch=f==null?0:f,this._maxPitch=d==null?60:d,this.setMaxBounds(),this.width=0,this.height=0,this._center=new s.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new du,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let r=new pu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new s.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){let l=-s.b3(r,-180,180)*Math.PI/180;this.angle!==l&&(this._unmodified=!1,this.angle=l,this._calcMatrices(),this.rotationMatrix=function(){var f=new s.A(4);return s.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,d,m){var b=d[0],q=d[1],T=d[2],k=d[3],R=Math.sin(m),D=Math.cos(m);f[0]=b*D+T*R,f[1]=q*D+k*R,f[2]=b*-R+T*D,f[3]=q*-R+k*D}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){let l=s.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==l&&(this._unmodified=!1,this._pitch=l,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){let l=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==l&&(this._unmodified=!1,this._zoom=l,this.tileZoom=Math.max(0,Math.floor(l)),this.scale=this.zoomScale(l),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,l,f){this._unmodified=!1,this._edgeInsets.interpolate(r,l,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){let l=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,l)}getVisibleUnwrappedCoordinates(r){let l=[new s.b4(0,r)];if(this._renderWorldCopies){let f=this.pointCoordinate(new s.P(0,0)),d=this.pointCoordinate(new s.P(this.width,0)),m=this.pointCoordinate(new s.P(this.width,this.height)),b=this.pointCoordinate(new s.P(0,this.height)),q=Math.floor(Math.min(f.x,d.x,m.x,b.x)),T=Math.floor(Math.max(f.x,d.x,m.x,b.x)),k=1;for(let R=q-k;R<=T+k;R++)R!==0&&l.push(new s.b4(R,r))}return l}coveringTiles(r){var l,f;let d=this.coveringZoomLevel(r),m=d;if(r.minzoom!==void 0&&d<r.minzoom)return[];r.maxzoom!==void 0&&d>r.maxzoom&&(d=r.maxzoom);let b=this.pointCoordinate(this.getCameraPoint()),q=s.Z.fromLngLat(this.center),T=Math.pow(2,d),k=[T*b.x,T*b.y,0],R=[T*q.x,T*q.y,0],D=hu.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d),j=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(j=d);let H=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Z=Y=>({aabb:new fu([Y*T,0,0],[(Y+1)*T,T,0]),zoom:0,x:0,y:0,wrap:Y,fullyVisible:!1}),ee=[],ae=[],oe=d,ue=r.reparseOverscaled?m:d;if(this._renderWorldCopies)for(let Y=1;Y<=3;Y++)ee.push(Z(-Y)),ee.push(Z(Y));for(ee.push(Z(0));ee.length>0;){let Y=ee.pop(),he=Y.x,de=Y.y,ge=Y.fullyVisible;if(!ge){let ze=Y.aabb.intersects(D);if(ze===0)continue;ge=ze===2}let Te=r.terrain?k:R,Me=Y.aabb.distanceX(Te),je=Y.aabb.distanceY(Te),We=Math.max(Math.abs(Me),Math.abs(je));if(Y.zoom===oe||We>H+(1<<oe-Y.zoom)-2&&Y.zoom>=j){let ze=oe-Y.zoom,De=k[0]-.5-(he<<ze),tt=k[1]-.5-(de<<ze);ae.push({tileID:new s.S(Y.zoom===oe?ue:Y.zoom,Y.wrap,Y.zoom,he,de),distanceSq:Le([R[0]-.5-he,R[1]-.5-de]),tileDistanceToCamera:Math.sqrt(De*De+tt*tt)})}else for(let ze=0;ze<4;ze++){let De=(he<<1)+ze%2,tt=(de<<1)+(ze>>1),yt=Y.zoom+1,Ne=Y.aabb.quadrant(ze);if(r.terrain){let Ve=new s.S(yt,Y.wrap,yt,De,tt),mt=r.terrain.getMinMaxElevation(Ve),lr=(l=mt.minElevation)!==null&&l!==void 0?l:this.elevation,Et=(f=mt.maxElevation)!==null&&f!==void 0?f:this.elevation;Ne=new fu([Ne.min[0],Ne.min[1],lr],[Ne.max[0],Ne.max[1],Et])}ee.push({aabb:Ne,zoom:yt,x:De,y:tt,wrap:Y.wrap,fullyVisible:ge})}}return ae.sort((Y,he)=>Y.distanceSq-he.distanceSq).map(Y=>Y.tileID)}resize(r,l){this.width=r,this.height=l,this.pixelsToGLUnits=[2/r,-2/l],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){let l=s.ac(r.lat,-85.051129,vp);return new s.P(s.O(r.lng)*this.worldSize,s.Q(l)*this.worldSize)}unproject(r){return new s.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){let l=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,r),m=r.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-m))return;let b=f+l-m,q=Math.cos(this._pitch)*this.cameraToCenterDistance/b/s.b5(1,d.lat),T=this.scaleZoom(q/this.tileSize);this._elevation=m,this._center=d,this.zoom=T}setLocationAtPoint(r,l){let f=this.pointCoordinate(l),d=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(r),b=new s.Z(m.x-(f.x-d.x),m.y-(f.y-d.y));this.center=this.coordinateLocation(b),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,l){return l?this.coordinatePoint(this.locationCoordinate(r),l.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,l){return this.coordinateLocation(this.pointCoordinate(r,l))}locationCoordinate(r){return s.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,l){if(l){let j=l.pointCoordinate(r);if(j!=null)return j}let f=[r.x,r.y,0,1],d=[r.x,r.y,1,1];s.af(f,f,this.pixelMatrixInverse),s.af(d,d,this.pixelMatrixInverse);let m=f[3],b=d[3],q=f[1]/m,T=d[1]/b,k=f[2]/m,R=d[2]/b,D=k===R?0:(0-k)/(R-k);return new s.Z(s.y.number(f[0]/m,d[0]/b,D)/this.worldSize,s.y.number(q,T,D)/this.worldSize)}coordinatePoint(r,l=0,f=this.pixelMatrix){let d=[r.x*this.worldSize,r.y*this.worldSize,l,1];return s.af(d,d,f),new s.P(d[0]/d[3],d[1]/d[3])}getBounds(){let r=Math.max(0,this.height/2-this.getHorizon());return new Se().extend(this.pointLocation(new s.P(0,r))).extend(this.pointLocation(new s.P(this.width,r))).extend(this.pointLocation(new s.P(this.width,this.height))).extend(this.pointLocation(new s.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Se([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,vp])}calculateTileMatrix(r){let l=r.canonical,f=this.worldSize/this.zoomScale(l.z),d=l.x+Math.pow(2,l.z)*r.wrap,m=s.an(new Float64Array(16));return s.J(m,m,[d*f,l.y*f,0]),s.K(m,m,[f/s.X,f/s.X,1]),m}calculatePosMatrix(r,l=!1){let f=r.key,d=l?this._alignedPosMatrixCache:this._posMatrixCache;if(d[f])return d[f];let m=this.calculateTileMatrix(r);return s.L(m,l?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,m),d[f]=new Float32Array(m),d[f]}calculateFogMatrix(r){let l=r.key,f=this._fogMatrixCache;if(f[l])return f[l];let d=this.calculateTileMatrix(r);return s.L(d,this.fogMatrix,d),f[l]=new Float32Array(d),f[l]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,l){l=s.ac(+l,this.minZoom,this.maxZoom);let f={center:new s.N(r.lng,r.lat),zoom:l},d=this.lngRange;if(!this._renderWorldCopies&&d===null){let Y=179.9999999999;d=[-Y,Y]}let m=this.tileSize*this.zoomScale(f.zoom),b=0,q=m,T=0,k=m,R=0,D=0,{x:j,y:H}=this.size;if(this.latRange){let Y=this.latRange;b=s.Q(Y[1])*m,q=s.Q(Y[0])*m,q-b<H&&(R=H/(q-b))}d&&(T=s.b3(s.O(d[0])*m,0,m),k=s.b3(s.O(d[1])*m,0,m),k<T&&(k+=m),k-T<j&&(D=j/(k-T)));let{x:Z,y:ee}=this.project.call({worldSize:m},r),ae,oe,ue=Math.max(D||0,R||0);if(ue){let Y=new s.P(D?(k+T)/2:Z,R?(q+b)/2:ee);return f.center=this.unproject.call({worldSize:m},Y).wrap(),f.zoom+=this.scaleZoom(ue),f}if(this.latRange){let Y=H/2;ee-Y<b&&(oe=b+Y),ee+Y>q&&(oe=q-Y)}if(d){let Y=(T+k)/2,he=Z;this._renderWorldCopies&&(he=s.b3(Z,Y-m/2,Y+m/2));let de=j/2;he-de<T&&(ae=T+de),he+de>k&&(ae=k-de)}if(ae!==void 0||oe!==void 0){let Y=new s.P(ae!=null?ae:Z,oe!=null?oe:ee);f.center=this.unproject.call({worldSize:m},Y).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r=this._unmodified,{center:l,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=l,this.zoom=f,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;let r=this.centerOffset,l=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=s.b5(1,this.center.lat)*this.worldSize;let d=s.an(new Float64Array(16));s.K(d,d,[this.width/2,-this.height/2,1]),s.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=s.an(new Float64Array(16)),s.K(d,d,[1,-1,1]),s.J(d,d,[-1,-1,0]),s.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;let m=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),b=Math.min(this.elevation,this.minElevationForCurrentTile),q=m-b*this._pixelPerMeter/Math.cos(this._pitch),T=b<0?q:m,k=Math.PI/2+this._pitch,R=this._fov*(.5+r.y/this.height),D=Math.sin(R)*T/Math.sin(s.ac(Math.PI-k-R,.01,Math.PI-.01)),j=this.getHorizon(),H=2*Math.atan(j/this.cameraToCenterDistance)*(.5+r.y/(2*j)),Z=Math.sin(H)*T/Math.sin(s.ac(Math.PI-k-H,.01,Math.PI-.01)),ee=Math.min(D,Z);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ee+T),this.nearZ=this.height/50,d=new Float64Array(16),s.b6(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-r.x/this.width,d[9]=2*r.y/this.height,this.projectionMatrix=s.ae(d),s.K(d,d,[1,-1,1]),s.J(d,d,[0,0,-this.cameraToCenterDistance]),s.b7(d,d,this._pitch),s.ad(d,d,this.angle),s.J(d,d,[-l,-f,0]),this.mercatorMatrix=s.K([],d,[this.worldSize,this.worldSize,this.worldSize]),s.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=s.L(new Float64Array(16),this.labelPlaneMatrix,d),s.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=s.as([],d),this.fogMatrix=new Float64Array(16),s.b6(this.fogMatrix,this._fov,this.width/this.height,m,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,s.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),s.b7(this.fogMatrix,this.fogMatrix,this._pitch),s.ad(this.fogMatrix,this.fogMatrix,this.angle),s.J(this.fogMatrix,this.fogMatrix,[-l,-f,0]),s.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),s.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=s.L(new Float64Array(16),this.labelPlaneMatrix,d);let ae=this.width%2/2,oe=this.height%2/2,ue=Math.cos(this.angle),Y=Math.sin(this.angle),he=l-Math.round(l)+ue*ae+Y*oe,de=f-Math.round(f)+ue*oe+Y*ae,ge=new Float64Array(d);if(s.J(ge,ge,[he>.5?he-1:he,de>.5?de-1:de,0]),this.alignedModelViewProjectionMatrix=ge,d=s.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let r=this.pointCoordinate(new s.P(0,0)),l=[r.x*this.worldSize,r.y*this.worldSize,0,1];return s.af(l,l,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new s.P(0,r))}getCameraQueryGeometry(r){let l=this.getCameraPoint();if(r.length===1)return[r[0],l];{let f=l.x,d=l.y,m=l.x,b=l.y;for(let q of r)f=Math.min(f,q.x),d=Math.min(d,q.y),m=Math.max(m,q.x),b=Math.max(b,q.y);return[new s.P(f,d),new s.P(m,d),new s.P(m,b),new s.P(f,b),new s.P(f,d)]}}lngLatToCameraDepth(r,l){let f=this.locationCoordinate(r),d=[f.x*this.worldSize,f.y*this.worldSize,l,1];return s.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function Gl(v,r){let l,f=!1,d=null,m=null,b=()=>{d=null,f&&(v.apply(m,l),d=setTimeout(b,r),f=!1)};return(...q)=>(f=!0,m=this,l=q,d||b(),d)}class qh{constructor(r){this._getCurrentHash=()=>{let l=window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(f=d)}),(f&&f[1]||"").split("/")}return l.split("/")},this._onHashChange=()=>{let l=this._getCurrentHash();if(l.length>=3&&!l.some(f=>isNaN(f))){let f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(l[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+l[2],+l[1]],zoom:+l[0],bearing:f,pitch:+(l[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let l=window.location.href.replace(/(#.+)?$/,this.getHashString());window.history.replaceState(window.history.state,null,l)},this._removeHash=()=>{let l=this._getCurrentHash();if(l.length===0)return;let f=l.join("/"),d=f;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${f}`);let m=window.location.hash.replace(d,"");m.startsWith("#&")?m=m.slice(0,1)+m.slice(2):m==="#"&&(m="");let b=window.location.href.replace(/(#.+)?$/,m);b=b.replace("&&","&"),window.history.replaceState(window.history.state,null,b)},this._updateHash=Gl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){let l=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,d=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,d),b=Math.round(l.lng*m)/m,q=Math.round(l.lat*m)/m,T=this._map.getBearing(),k=this._map.getPitch(),R="";if(R+=r?`/${b}/${q}/${f}`:`${f}/${q}/${b}`,(T||k)&&(R+="/"+Math.round(10*T)/10),k&&(R+=`/${Math.round(k)}`),this._hashName){let D=this._hashName,j=!1,H=window.location.hash.slice(1).split("&").map(Z=>{let ee=Z.split("=")[0];return ee===D?(j=!0,`${ee}=${R}`):Z}).filter(Z=>Z);return j||H.push(`${D}=${R}`),`#${H.join("&")}`}return`#${R}`}}let Ih={linearity:.3,easing:s.b8(0,0,.3,1)},gp=s.e({deceleration:2500,maxSpeed:1400},Ih),Sw=s.e({deceleration:20,maxSpeed:1400},Ih),qy=s.e({deceleration:1e3,maxSpeed:360},Ih),Eh=s.e({deceleration:1e3,maxSpeed:90},Ih);class yp{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:P.now(),settings:r})}_drainInertiaBuffer(){let r=this._inertiaBuffer,l=P.now();for(;r.length>0&&l-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let l={zoom:0,bearing:0,pitch:0,pan:new s.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:m}of this._inertiaBuffer)l.zoom+=m.zoomDelta||0,l.bearing+=m.bearingDelta||0,l.pitch+=m.pitchDelta||0,m.panDelta&&l.pan._add(m.panDelta),m.around&&(l.around=m.around),m.pinchAround&&(l.pinchAround=m.pinchAround);let f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(l.pan.mag()){let m=Wl(l.pan.mag(),f,s.e({},gp,r||{}));d.offset=l.pan.mult(m.amount/l.pan.mag()),d.center=this._map.transform.center,Hl(d,m)}if(l.zoom){let m=Wl(l.zoom,f,Sw);d.zoom=this._map.transform.zoom+m.amount,Hl(d,m)}if(l.bearing){let m=Wl(l.bearing,f,qy);d.bearing=this._map.transform.bearing+s.ac(m.amount,-179,179),Hl(d,m)}if(l.pitch){let m=Wl(l.pitch,f,Eh);d.pitch=this._map.transform.pitch+m.amount,Hl(d,m)}if(d.zoom||d.bearing){let m=l.pinchAround===void 0?l.around:l.pinchAround;d.around=m?this._map.unproject(m):this._map.getCenter()}return this.clear(),s.e(d,{noMoveStart:!0})}}function Hl(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function Wl(v,r,l){let{maxSpeed:f,linearity:d,deceleration:m}=l,b=s.ac(v*d/(r/1e3),-f,f),q=Math.abs(b)/(m*d);return{easing:l.easing,duration:1e3*q,amount:b*(q/2)}}class ci extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f,d={}){let m=C.mousePos(l.getCanvas(),f),b=l.unproject(m);super(r,s.e({point:m,lngLat:b,originalEvent:f},d)),this._defaultPrevented=!1,this.target=l}}class hs extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f){let d=r==="touchend"?f.changedTouches:f.touches,m=C.touchPos(l.getCanvasContainer(),d),b=m.map(T=>l.unproject(T)),q=m.reduce((T,k,R,D)=>T.add(k.div(D.length)),new s.P(0,0));super(r,{points:m,point:q,lngLats:b,lngLat:l.unproject(q),originalEvent:f}),this._defaultPrevented=!1}}class Iy extends s.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,l,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Ey{constructor(r,l){this._map=r,this._clickTolerance=l.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Iy(r.type,this._map,r))}mousedown(r,l){return this._mousedownPos=l,this._firePreventable(new ci(r.type,this._map,r))}mouseup(r){this._map.fire(new ci(r.type,this._map,r))}click(r,l){this._mousedownPos&&this._mousedownPos.dist(l)>=this._clickTolerance||this._map.fire(new ci(r.type,this._map,r))}dblclick(r){return this._firePreventable(new ci(r.type,this._map,r))}mouseover(r){this._map.fire(new ci(r.type,this._map,r))}mouseout(r){this._map.fire(new ci(r.type,this._map,r))}touchstart(r){return this._firePreventable(new hs(r.type,this._map,r))}touchmove(r){this._map.fire(new hs(r.type,this._map,r))}touchend(r){this._map.fire(new hs(r.type,this._map,r))}touchcancel(r){this._map.fire(new hs(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new ci(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ci("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new ci(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(s.P.convert(r),this._map.terrain)}}class on{constructor(r,l){this._map=r,this._tr=new Kn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=l.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,l){this.isEnabled()&&r.shiftKey&&r.button===0&&(C.disableDrag(),this._startPos=this._lastPos=l,this._active=!0)}mousemoveWindow(r,l){if(!this._active)return;let f=l;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;let d=this._startPos;this._lastPos=f,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));let m=Math.min(d.x,f.x),b=Math.max(d.x,f.x),q=Math.min(d.y,f.y),T=Math.max(d.y,f.y);C.setTransform(this._box,`translate(${m}px,${q}px)`),this._box.style.width=b-m+"px",this._box.style.height=T-q+"px"}mouseupWindow(r,l){if(!this._active||r.button!==0)return;let f=this._startPos,d=l;if(this.reset(),C.suppressClick(),f.x!==d.x||f.y!==d.y)return this._map.fire(new s.k("boxzoomend",{originalEvent:r})),{cameraAnimation:m=>m.fitScreenCoordinates(f,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,l){return this._map.fire(new s.k(r,{originalEvent:l}))}}function Zl(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);let l={};for(let f=0;f<v.length;f++)l[v[f].identifier]=r[f];return l}class _p{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,l,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(d){let m=new s.P(0,0);for(let b of d)m._add(b);return m.div(d.length)}(l),this.touches=Zl(f,l)))}touchmove(r,l,f){if(this.aborted||!this.centroid)return;let d=Zl(f,l);for(let m in this.touches){let b=d[m];(!b||b.dist(this.touches[m])>30)&&(this.aborted=!0)}}touchend(r,l,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){let d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Th{constructor(r){this.singleTap=new _p(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,l,f){this.singleTap.touchstart(r,l,f)}touchmove(r,l,f){this.singleTap.touchmove(r,l,f)}touchend(r,l,f){let d=this.singleTap.touchend(r,l,f);if(d){let m=r.timeStamp-this.lastTime<500,b=!this.lastTap||this.lastTap.dist(d)<30;if(m&&b||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class mu{constructor(r){this._tr=new Kn(r),this._zoomIn=new Th({numTouches:1,numTaps:2}),this._zoomOut=new Th({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,l,f){this._zoomIn.touchstart(r,l,f),this._zoomOut.touchstart(r,l,f)}touchmove(r,l,f){this._zoomIn.touchmove(r,l,f),this._zoomOut.touchmove(r,l,f)}touchend(r,l,f){let d=this._zoomIn.touchend(r,l,f),m=this._zoomOut.touchend(r,l,f),b=this._tr;return d?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:b.zoom+1,around:b.unproject(d)},{originalEvent:r})}):m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:q=>q.easeTo({duration:300,zoom:b.zoom-1,around:b.unproject(m)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ja{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){let l=this._moveFunction(...r);if(l.bearingDelta||l.pitchDelta||l.around||l.panDelta)return this._active=!0,l}dragStart(r,l){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=l.length?l[0]:l,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,l){if(!this.isEnabled())return;let f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);let d=l.length?l[0]:l;return!this._moved&&d.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(f,d))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&C.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let xp={0:1,2:2};class Ah{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){let l=C.mouseButton(r);this._eventButton=l}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(l,f){let d=xp[f];return l.buttons===void 0||(l.buttons&d)!==d}(r,this._eventButton)}isValidEndEvent(r){return C.mouseButton(r)===this._eventButton}}class bp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}let Ph=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},wp=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:l=.8})=>{let f=new Ah({checkCorrectEvent:d=>C.mouseButton(d)===0&&d.ctrlKey||C.mouseButton(d)===2});return new Ja({clickTolerance:r,move:(d,m)=>({bearingDelta:(m.x-d.x)*l}),moveStateManager:f,enable:v,assignEvents:Ph})},Sp=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:l=-.5})=>{let f=new Ah({checkCorrectEvent:d=>C.mouseButton(d)===0&&d.ctrlKey||C.mouseButton(d)===2});return new Ja({clickTolerance:r,move:(d,m)=>({pitchDelta:(m.y-d.y)*l}),moveStateManager:f,enable:v,assignEvents:Ph})};class fs{constructor(r,l){this._clickTolerance=r.clickTolerance||1,this._map=l,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new s.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,l,f){return this._calculateTransform(r,l,f)}touchmove(r,l,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,l,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,l,f){this._calculateTransform(r,l,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,l,f){f.length>0&&(this._active=!0);let d=Zl(f,l),m=new s.P(0,0),b=new s.P(0,0),q=0;for(let k in d){let R=d[k],D=this._touches[k];D&&(m._add(R),b._add(R.sub(D)),q++,d[k]=R)}if(this._touches=d,this._shouldBePrevented(q)||!b.mag())return;let T=b.div(q);return this._sum._add(T),this._sum.mag()<this._clickTolerance?void 0:{around:m.div(q),panDelta:T}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ch{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,l,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([l[0],l[1]]))}touchmove(r,l,f){if(!this._firstTwoTouches)return;r.preventDefault();let[d,m]=this._firstTwoTouches,b=Kl(f,l,d),q=Kl(f,l,m);if(!b||!q)return;let T=this._aroundCenter?null:b.add(q).div(2);return this._move([b,q],T,r)}touchend(r,l,f){if(!this._firstTwoTouches)return;let[d,m]=this._firstTwoTouches,b=Kl(f,l,d),q=Kl(f,l,m);b&&q||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Kl(v,r,l){for(let f=0;f<v.length;f++)if(v[f].identifier===l)return r[f]}function qp(v,r){return Math.log(v/r)/Math.LN2}class Ip extends Ch{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,l){let f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(qp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:qp(this._distance,f),pinchAround:l}}}function Ep(v,r){return 180*v.angleWith(r)/Math.PI}class Tp extends Ch{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,l,f){let d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ep(this._vector,d),pinchAround:l}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let l=25/(Math.PI*this._minDiameter)*360,f=Ep(r,this._startVector);return Math.abs(f)<l}}function Mh(v){return Math.abs(v.y)>Math.abs(v.x)}class vu extends Ch{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,l,f){super.touchstart(r,l,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Mh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,l,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let d=r[0].sub(this._lastPoints[0]),m=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,m,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(d.y+m.y)/2*-.5}):void 0}gestureBeginsVertically(r,l,f){if(this._valid!==void 0)return this._valid;let d=r.mag()>=2,m=l.mag()>=2;if(!d&&!m)return;if(!d||!m)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;let b=r.y>0==l.y>0;return Mh(r)&&Mh(l)&&b}}let Ty={panStep:100,bearingStep:15,pitchStep:10};class wn{constructor(r){this._tr=new Kn(r);let l=Ty;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let l=0,f=0,d=0,m=0,b=0;switch(r.keyCode){case 61:case 107:case 171:case 187:l=1;break;case 189:case 109:case 173:l=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),m=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),m=1);break;case 38:r.shiftKey?d=1:(r.preventDefault(),b=-1);break;case 40:r.shiftKey?d=-1:(r.preventDefault(),b=1);break;default:return;}return this._rotationDisabled&&(f=0,d=0),{cameraAnimation:q=>{let T=this._tr;q.easeTo({duration:300,easeId:"keyboardHandler",easing:ya,zoom:l?Math.round(T.zoom)+l*(r.shiftKey?2:1):T.zoom,bearing:T.bearing+f*this._bearingStep,pitch:T.pitch+d*this._pitchStep,offset:[-m*this._panStep,-b*this._panStep],center:T.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ya(v){return v*(2-v)}let Ap=4.000244140625;class Xn{constructor(r,l){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new Kn(r),this._triggerRenderFrame=l,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let l=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,f=P.now(),d=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,l!==0&&l%Ap==0?this._type="wheel":l!==0&&Math.abs(l)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=l,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(d*l)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,l+=this._lastValue)),r.shiftKey&&l&&(l/=4),this._type&&(this._lastWheelEvent=r,this._delta-=l,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let l=C.mousePos(this._map.getCanvas(),r),f=this._tr;this._around=l.y>f.transform.height/2-f.transform.getHorizon()?s.N.convert(this._aroundCenter?f.center:f.unproject(l)):s.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(this._delta!==0){let T=this._type==="wheel"&&Math.abs(this._delta)>Ap?this._wheelZoomRate:this._defaultZoomRate,k=2/(1+Math.exp(-Math.abs(this._delta*T)));this._delta<0&&k!==0&&(k=1/k);let R=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(R*k))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let l=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,d=this._easing,m,b=!1,q=P.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&d&&q){let T=Math.min(q/200,1),k=d(T);m=s.y.number(f,l,k),T<1?this._frameId||(this._frameId=!0):b=!0}else m=l,b=!0;return this._active=!0,b&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!b,zoomDelta:m-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let l=s.b9;if(this._prevEase){let f=this._prevEase,d=(P.now()-f.start)/f.duration,m=f.easing(d+.01)-f.easing(d),b=.27/Math.sqrt(m*m+1e-4)*.01,q=Math.sqrt(.0729-b*b);l=s.b8(b,q,.25,1)}return this._prevEase={start:P.now(),duration:r,easing:l},l}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ds{constructor(r,l){this._clickZoom=r,this._tapZoom=l}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qw{constructor(r){this._tr=new Kn(r),this.reset()}reset(){this._active=!1}dblclick(r,l){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(l)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Iw{constructor(){this._tap=new Th({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,l,f){if(!this._swipePoint)if(this._tapTime){let d=l[0],m=r.timeStamp-this._tapTime<500,b=this._tapPoint.dist(d)<30;m&&b?f.length>0&&(this._swipePoint=d,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,l,f)}touchmove(r,l,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;let d=l[0],m=d.y-this._swipePoint.y;return this._swipePoint=d,r.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(r,l,f)}touchend(r,l,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{let d=this._tap.touchend(r,l,f);d&&(this._tapTime=r.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ay{constructor(r,l,f){this._el=r,this._mousePan=l,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Py{constructor(r,l,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=l,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Pp{constructor(r,l,f,d){this._el=r,this._touchZoom=l,this._touchRotate=f,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class gu{constructor(r,l){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=l,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=C.create("div","maplibregl-cooperative-gesture-screen",r);let l=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(l=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=l,this._container.appendChild(d);let m=document.createElement("div");m.className="maplibregl-mobile-message",m.textContent=f,this._container.appendChild(m),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(C.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,l){this._enabled&&(this._map.fire(new s.k("cooperativegestureprevented",{gestureType:r,originalEvent:l})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let Sn=v=>v.zoom||v.drag||v.pitch||v.rotate;class Xe extends s.k{}function kh(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Cp{constructor(r,l){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,m)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let b=d.type==="renderFrame"?void 0:d,q={needsRenderFrame:!1},T={},k={},R=d.touches,D=R?this._getMapTouches(R):void 0,j=D?C.touchPos(this._map.getCanvas(),D):C.mousePos(this._map.getCanvas(),d);for(let{handlerName:ee,handler:ae,allowed:oe}of this._handlers){if(!ae.isEnabled())continue;let ue;this._blockedByActive(k,oe,ee)?ae.reset():ae[m||d.type]&&(ue=ae[m||d.type](d,j,D),this.mergeHandlerResult(q,T,ue,ee,b),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()),(ue||ae.isActive())&&(k[ee]=ae)}let H={};for(let ee in this._previousActiveHandlers)k[ee]||(H[ee]=b);this._previousActiveHandlers=k,(Object.keys(H).length||kh(q))&&(this._changes.push([q,T,H]),this._triggerRenderFrame()),(Object.keys(k).length||kh(q))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:Z}=q;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new yp(r),this._bearingSnap=l.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(l);let f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(let[d,m,b]of this._listeners)C.addEventListener(d,m,d===document?this.handleWindowEvent:this.handleEvent,b)}destroy(){for(let[r,l,f]of this._listeners)C.removeEventListener(r,l,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){let l=this._map,f=l.getCanvasContainer();this._add("mapEvent",new Ey(l,r));let d=l.boxZoom=new on(l,r);this._add("boxZoom",d),r.interactive&&r.boxZoom&&d.enable();let m=l.cooperativeGestures=new gu(l,r.cooperativeGestures);this._add("cooperativeGestures",m),r.cooperativeGestures&&m.enable();let b=new mu(l),q=new qw(l);l.doubleClickZoom=new ds(q,b),this._add("tapZoom",b),this._add("clickZoom",q),r.interactive&&r.doubleClickZoom&&l.doubleClickZoom.enable();let T=new Iw;this._add("tapDragZoom",T);let k=l.touchPitch=new vu(l);this._add("touchPitch",k),r.interactive&&r.touchPitch&&l.touchPitch.enable(r.touchPitch);let R=wp(r),D=Sp(r);l.dragRotate=new Py(r,R,D),this._add("mouseRotate",R,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),r.interactive&&r.dragRotate&&l.dragRotate.enable();let j=(({enable:ue,clickTolerance:Y})=>{let he=new Ah({checkCorrectEvent:de=>C.mouseButton(de)===0&&!de.ctrlKey});return new Ja({clickTolerance:Y,move:(de,ge)=>({around:ge,panDelta:ge.sub(de)}),activateOnStart:!0,moveStateManager:he,enable:ue,assignEvents:Ph})})(r),H=new fs(r,l);l.dragPan=new Ay(f,j,H),this._add("mousePan",j),this._add("touchPan",H,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&l.dragPan.enable(r.dragPan);let Z=new Tp,ee=new Ip;l.touchZoomRotate=new Pp(f,ee,Z,T),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&l.touchZoomRotate.enable(r.touchZoomRotate);let ae=l.scrollZoom=new Xn(l,()=>this._triggerRenderFrame());this._add("scrollZoom",ae,["mousePan"]),r.interactive&&r.scrollZoom&&l.scrollZoom.enable(r.scrollZoom);let oe=l.keyboard=new wn(l);this._add("keyboard",oe),r.interactive&&r.keyboard&&l.keyboard.enable(),this._add("blockableMapEvent",new Tr(l))}_add(r,l,f){this._handlers.push({handlerName:r,handler:l,allowed:f}),this._handlersById[r]=l}stop(r){if(!this._updatingCamera){for(let{handler:l}of this._handlers)l.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Sn(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,l,f){for(let d in r)if(d!==f&&(!l||l.indexOf(d)<0))return!0;return!1}_getMapTouches(r){let l=[];for(let f of r)this._el.contains(f.target)&&l.push(f);return l}mergeHandlerResult(r,l,f,d,m){if(!f)return;s.e(r,f);let b={handlerName:d,originalEvent:f.originalEvent||m};f.zoomDelta!==void 0&&(l.zoom=b),f.panDelta!==void 0&&(l.drag=b),f.pitchDelta!==void 0&&(l.pitch=b),f.bearingDelta!==void 0&&(l.rotate=b)}_applyChanges(){let r={},l={},f={};for(let[d,m,b]of this._changes)d.panDelta&&(r.panDelta=(r.panDelta||new s.P(0,0))._add(d.panDelta)),d.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(r.around=d.around),d.pinchAround!==void 0&&(r.pinchAround=d.pinchAround),d.noInertia&&(r.noInertia=d.noInertia),s.e(l,m),s.e(f,b);this._updateMapTransform(r,l,f),this._changes=[]}_updateMapTransform(r,l,f){let d=this._map,m=d._getTransformForUpdate(),b=d.terrain;if(!(kh(r)||b&&this._terrainMovement))return this._fireEvents(l,f,!0);let{panDelta:q,zoomDelta:T,bearingDelta:k,pitchDelta:R,around:D,pinchAround:j}=r;j!==void 0&&(D=j),d._stop(!0),D=D||d.transform.centerPoint;let H=m.pointLocation(q?D.sub(q):D);k&&(m.bearing+=k),R&&(m.pitch+=R),T&&(m.zoom+=T),b?this._terrainMovement||!l.drag&&!l.zoom?l.drag&&this._terrainMovement?m.center=m.pointLocation(m.centerPoint.sub(q)):m.setLocationAtPoint(H,D):(this._terrainMovement=!0,this._map._elevationFreeze=!0,m.setLocationAtPoint(H,D)):m.setLocationAtPoint(H,D),d._applyUpdatedTransform(m),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(l,f,!0)}_fireEvents(r,l,f){let d=Sn(this._eventsInProgress),m=Sn(r),b={};for(let D in r){let{originalEvent:j}=r[D];this._eventsInProgress[D]||(b[`${D}start`]=j),this._eventsInProgress[D]=r[D]}!d&&m&&this._fireEvent("movestart",m.originalEvent);for(let D in b)this._fireEvent(D,b[D]);m&&this._fireEvent("move",m.originalEvent);for(let D in r){let{originalEvent:j}=r[D];this._fireEvent(D,j)}let q={},T;for(let D in this._eventsInProgress){let{handlerName:j,originalEvent:H}=this._eventsInProgress[D];this._handlersById[j].isActive()||(delete this._eventsInProgress[D],T=l[j]||H,q[`${D}end`]=T)}for(let D in q)this._fireEvent(D,q[D]);let k=Sn(this._eventsInProgress),R=(d||m)&&!k;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let D=this._map._getTransformForUpdate();D.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(D)}if(f&&R){this._updatingCamera=!0;let D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=H=>H!==0&&-this._bearingSnap<H&&H<this._bearingSnap;!D||!D.essential&&P.prefersReducedMotion?(this._map.fire(new s.k("moveend",{originalEvent:T})),j(this._map.getBearing())&&this._map.resetNorth()):(j(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:T})),this._updatingCamera=!1}}_fireEvent(r,l){this._map.fire(new s.k(r,l?{originalEvent:l}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Xe("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Cy extends s.E{constructor(r,l){super(),this._renderFrameCallback=()=>{let f=Math.min((P.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=l.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new s.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,l){return this.jumpTo({center:r},l)}panBy(r,l,f){return r=s.P.convert(r).mult(-1),this.panTo(this.transform.center,s.e({offset:r},l),f)}panTo(r,l,f){return this.easeTo(s.e({center:r},l),f)}getZoom(){return this.transform.zoom}setZoom(r,l){return this.jumpTo({zoom:r},l),this}zoomTo(r,l,f){return this.easeTo(s.e({zoom:r},l),f)}zoomIn(r,l){return this.zoomTo(this.getZoom()+1,r,l),this}zoomOut(r,l){return this.zoomTo(this.getZoom()-1,r,l),this}getBearing(){return this.transform.bearing}setBearing(r,l){return this.jumpTo({bearing:r},l),this}getPadding(){return this.transform.padding}setPadding(r,l){return this.jumpTo({padding:r},l),this}rotateTo(r,l,f){return this.easeTo(s.e({bearing:r},l),f)}resetNorth(r,l){return this.rotateTo(0,s.e({duration:1e3},r),l),this}resetNorthPitch(r,l){return this.easeTo(s.e({bearing:0,pitch:0,duration:1e3},r),l),this}snapToNorth(r,l){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,l):this}getPitch(){return this.transform.pitch}setPitch(r,l){return this.jumpTo({pitch:r},l),this}cameraForBounds(r,l){r=Se.convert(r).adjustAntiMeridian();let f=l&&l.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,l)}_cameraForBoxAndBearing(r,l,f,d){let m={top:0,bottom:0,right:0,left:0};if(typeof(d=s.e({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){let ze=d.padding;d.padding={top:ze,bottom:ze,right:ze,left:ze}}d.padding=s.e(m,d.padding);let b=this.transform,q=b.padding,T=new Se(r,l),k=b.project(T.getNorthWest()),R=b.project(T.getNorthEast()),D=b.project(T.getSouthEast()),j=b.project(T.getSouthWest()),H=s.ba(-f),Z=k.rotate(H),ee=R.rotate(H),ae=D.rotate(H),oe=j.rotate(H),ue=new s.P(Math.max(Z.x,ee.x,oe.x,ae.x),Math.max(Z.y,ee.y,oe.y,ae.y)),Y=new s.P(Math.min(Z.x,ee.x,oe.x,ae.x),Math.min(Z.y,ee.y,oe.y,ae.y)),he=ue.sub(Y),de=(b.width-(q.left+q.right+d.padding.left+d.padding.right))/he.x,ge=(b.height-(q.top+q.bottom+d.padding.top+d.padding.bottom))/he.y;if(ge<0||de<0)return void s.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Te=Math.min(b.scaleZoom(b.scale*Math.min(de,ge)),d.maxZoom),Me=s.P.convert(d.offset),je=new s.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(s.ba(f)),We=Me.add(je).mult(b.scale/b.zoomScale(Te));return{center:b.unproject(k.add(D).div(2).sub(We)),zoom:Te,bearing:f}}fitBounds(r,l,f){return this._fitInternal(this.cameraForBounds(r,l),l,f)}fitScreenCoordinates(r,l,f,d,m){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(s.P.convert(r)),this.transform.pointLocation(s.P.convert(l)),f,d),d,m)}_fitInternal(r,l,f){return r?(delete(l=s.e(r,l)).padding,l.linear?this.easeTo(l,f):this.flyTo(l,f)):this}jumpTo(r,l){this.stop();let f=this._getTransformForUpdate(),d=!1,m=!1,b=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(d=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=s.N.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(m=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(b=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new s.k("movestart",l)).fire(new s.k("move",l)),d&&this.fire(new s.k("zoomstart",l)).fire(new s.k("zoom",l)).fire(new s.k("zoomend",l)),m&&this.fire(new s.k("rotatestart",l)).fire(new s.k("rotate",l)).fire(new s.k("rotateend",l)),b&&this.fire(new s.k("pitchstart",l)).fire(new s.k("pitch",l)).fire(new s.k("pitchend",l)),this.fire(new s.k("moveend",l))}calculateCameraOptionsFromTo(r,l,f,d=0){let m=s.Z.fromLngLat(r,l),b=s.Z.fromLngLat(f,d),q=b.x-m.x,T=b.y-m.y,k=b.z-m.z,R=Math.hypot(q,T,k);if(R===0)throw new Error("Can't calculate camera options with same From and To");let D=Math.hypot(q,T),j=this.transform.scaleZoom(this.transform.cameraToCenterDistance/R/this.transform.tileSize),H=180*Math.atan2(q,-T)/Math.PI,Z=180*Math.acos(D/R)/Math.PI;return Z=k<0?90-Z:90+Z,{center:b.toLngLat(),zoom:j,pitch:Z,bearing:H}}easeTo(r,l){var f;this._stop(!1,r.easeId),((r=s.e({offset:[0,0],duration:500,easing:s.b9},r)).animate===!1||!r.essential&&P.prefersReducedMotion)&&(r.duration=0);let d=this._getTransformForUpdate(),m=d.zoom,b=d.bearing,q=d.pitch,T=d.padding,k="bearing"in r?this._normalizeBearing(r.bearing,b):b,R="pitch"in r?+r.pitch:q,D="padding"in r?r.padding:d.padding,j=s.P.convert(r.offset),H=d.centerPoint.add(j),Z=d.pointLocation(H),{center:ee,zoom:ae}=d.getConstrained(s.N.convert(r.center||Z),(f=r.zoom)!==null&&f!==void 0?f:m);this._normalizeCenter(ee,d);let oe=d.project(Z),ue=d.project(ee).sub(oe),Y=d.zoomScale(ae-m),he,de;r.around&&(he=s.N.convert(r.around),de=d.locationPoint(he));let ge={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ae!==m,this._rotating=this._rotating||b!==k,this._pitching=this._pitching||R!==q,this._padding=!d.isPaddingEqual(D),this._easeId=r.easeId,this._prepareEase(l,r.noMoveStart,ge),this.terrain&&this._prepareElevation(ee),this._ease(Te=>{if(this._zooming&&(d.zoom=s.y.number(m,ae,Te)),this._rotating&&(d.bearing=s.y.number(b,k,Te)),this._pitching&&(d.pitch=s.y.number(q,R,Te)),this._padding&&(d.interpolatePadding(T,D,Te),H=d.centerPoint.add(j)),this.terrain&&!r.freezeElevation&&this._updateElevation(Te),he)d.setLocationAtPoint(he,de);else{let Me=d.zoomScale(d.zoom-m),je=ae>m?Math.min(2,Y):Math.max(.5,Y),We=Math.pow(je,1-Te),ze=d.unproject(oe.add(ue.mult(Te*We)).mult(Me));d.setLocationAtPoint(d.renderWorldCopies?ze.wrap():ze,H)}this._applyUpdatedTransform(d),this._fireMoveEvents(l)},Te=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l,Te)},r),this}_prepareEase(r,l,f={}){this._moving=!0,l||f.moving||this.fire(new s.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new s.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new s.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new s.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let l=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&l!==this._elevationTarget){let f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(l-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=l}this.transform.elevation=s.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){let l=r.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(l.lngLat,r.zoom);if(l.altitude<f){let d=this.calculateCameraOptionsFromTo(l.lngLat,f,r.center,r.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(r){let l=[];if(this.terrain&&l.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&l.push(d=>this.transformCameraUpdate(d)),!l.length)return;let f=r.clone();for(let d of l){let m=f.clone(),{center:b,zoom:q,pitch:T,bearing:k,elevation:R}=d(m);b&&(m.center=b),q!==void 0&&(m.zoom=q),T!==void 0&&(m.pitch=T),k!==void 0&&(m.bearing=k),R!==void 0&&(m.elevation=R),f.apply(m)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new s.k("move",r)),this._zooming&&this.fire(new s.k("zoom",r)),this._rotating&&this.fire(new s.k("rotate",r)),this._pitching&&this.fire(new s.k("pitch",r))}_afterEase(r,l){if(this._easeId&&l&&this._easeId===l)return;delete this._easeId;let f=this._zooming,d=this._rotating,m=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new s.k("zoomend",r)),d&&this.fire(new s.k("rotateend",r)),m&&this.fire(new s.k("pitchend",r)),this.fire(new s.k("moveend",r))}flyTo(r,l){var f;if(!r.essential&&P.prefersReducedMotion){let Ve=s.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ve,l)}this.stop(),r=s.e({offset:[0,0],speed:1.2,curve:1.42,easing:s.b9},r);let d=this._getTransformForUpdate(),m=d.zoom,b=d.bearing,q=d.pitch,T=d.padding,k="bearing"in r?this._normalizeBearing(r.bearing,b):b,R="pitch"in r?+r.pitch:q,D="padding"in r?r.padding:d.padding,j=s.P.convert(r.offset),H=d.centerPoint.add(j),Z=d.pointLocation(H),{center:ee,zoom:ae}=d.getConstrained(s.N.convert(r.center||Z),(f=r.zoom)!==null&&f!==void 0?f:m);this._normalizeCenter(ee,d);let oe=d.zoomScale(ae-m),ue=d.project(Z),Y=d.project(ee).sub(ue),he=r.curve,de=Math.max(d.width,d.height),ge=de/oe,Te=Y.mag();if("minZoom"in r){let Ve=s.ac(Math.min(r.minZoom,m,ae),d.minZoom,d.maxZoom),mt=de/d.zoomScale(Ve-m);he=Math.sqrt(mt/Te*2)}let Me=he*he;function je(Ve){let mt=(ge*ge-de*de+(Ve?-1:1)*Me*Me*Te*Te)/(2*(Ve?ge:de)*Me*Te);return Math.log(Math.sqrt(mt*mt+1)-mt)}function We(Ve){return(Math.exp(Ve)-Math.exp(-Ve))/2}function ze(Ve){return(Math.exp(Ve)+Math.exp(-Ve))/2}let De=je(!1),tt=function(Ve){return ze(De)/ze(De+he*Ve)},yt=function(Ve){return de*((ze(De)*(We(mt=De+he*Ve)/ze(mt))-We(De))/Me)/Te;var mt},Ne=(je(!0)-De)/he;if(Math.abs(Te)<1e-6||!isFinite(Ne)){if(Math.abs(de-ge)<1e-6)return this.easeTo(r,l);let Ve=ge<de?-1:1;Ne=Math.abs(Math.log(ge/de))/he,yt=()=>0,tt=mt=>Math.exp(Ve*he*mt)}return r.duration="duration"in r?+r.duration:1e3*Ne/("screenSpeed"in r?+r.screenSpeed/he:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=b!==k,this._pitching=R!==q,this._padding=!d.isPaddingEqual(D),this._prepareEase(l,!1),this.terrain&&this._prepareElevation(ee),this._ease(Ve=>{let mt=Ve*Ne,lr=1/tt(mt);d.zoom=Ve===1?ae:m+d.scaleZoom(lr),this._rotating&&(d.bearing=s.y.number(b,k,Ve)),this._pitching&&(d.pitch=s.y.number(q,R,Ve)),this._padding&&(d.interpolatePadding(T,D,Ve),H=d.centerPoint.add(j)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ve);let Et=Ve===1?ee:d.unproject(ue.add(Y.mult(yt(mt))).mult(lr));d.setLocationAtPoint(d.renderWorldCopies?Et.wrap():Et,H),this._applyUpdatedTransform(d),this._fireMoveEvents(l)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(l)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,l){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,l)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,l,f){f.animate===!1||f.duration===0?(r(1),l()):(this._easeStart=P.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=l,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,l){r=s.b3(r,-180,180);let f=Math.abs(r-l);return Math.abs(r-360-l)<f&&(r-=360),Math.abs(r+360-l)<f&&(r+=360),r}_normalizeCenter(r,l){if(!l.renderWorldCopies||l.lngRange)return;let f=r.lng-l.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(s.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}let yu={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class _u{constructor(r=yu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=l=>{!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"&&l.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,l){let f=this._map._getUIString(`AttributionControl.${l}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){let d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}let l=this._map.style.sourceCaches;for(let d in l){let m=l[d];if(m.used||m.usedForTerrain){let b=m.getSource();b.attribution&&r.indexOf(b.attribution)<0&&r.push(b.attribution)}}r=r.filter(d=>String(d).trim()),r.sort((d,m)=>d.length-m.length),r=r.filter((d,m)=>{for(let b=m+1;b<r.length;b++)if(r[b].indexOf(d)>=0)return!1;return!0});let f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Mp{constructor(r={}){this._updateCompact=()=>{let l=this._container.children;if(l.length){let f=l[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");let l=C.create("a","maplibregl-ctrl-logo");return l.target="_blank",l.rel="noopener nofollow",l.href="https://maplibre.org/",l.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),l.setAttribute("rel","noopener nofollow"),this._container.appendChild(l),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class zt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let l=++this._id;return this._queue.push({callback:r,id:l,cancelled:!1}),l}remove(r){let l=this._currentlyRunning,f=l?this._queue.concat(l):this._queue;for(let d of f)if(d.id===r)return void(d.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let l=this._currentlyRunning=this._queue;this._queue=[];for(let f of l)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var kp=s.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Ew extends s.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*i_(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,l){this.sourceCache.update(r,l),this._renderableTilesKeys=[];let f={};for(let d of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:l}))f[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),s.aP(d.posMatrix,0,s.X,0,s.X,0,1),this._tiles[d.key]=new _o(d,this.tileSize));for(let d in this._tiles)f[d]||delete this._tiles[d]}freeRtt(r){for(let l in this._tiles){let f=this._tiles[l];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){let l={};for(let f of this._renderableTilesKeys){let d=this._tiles[f].tileID;if(d.canonical.equals(r.canonical)){let m=r.clone();m.posMatrix=new Float64Array(16),s.aP(m.posMatrix,0,s.X,0,s.X,0,1),l[f]=m}else if(d.canonical.isChildOf(r.canonical)){let m=r.clone();m.posMatrix=new Float64Array(16);let b=d.canonical.z-r.canonical.z,q=d.canonical.x-(d.canonical.x>>b<<b),T=d.canonical.y-(d.canonical.y>>b<<b),k=s.X>>b;s.aP(m.posMatrix,0,k,0,k,0,1),s.J(m.posMatrix,m.posMatrix,[-q*k,-T*k,0]),l[f]=m}else if(r.canonical.isChildOf(d.canonical)){let m=r.clone();m.posMatrix=new Float64Array(16);let b=r.canonical.z-d.canonical.z,q=r.canonical.x-(r.canonical.x>>b<<b),T=r.canonical.y-(r.canonical.y>>b<<b),k=s.X>>b;s.aP(m.posMatrix,0,s.X,0,s.X,0,1),s.J(m.posMatrix,m.posMatrix,[q*k,T*k,0]),s.K(m.posMatrix,m.posMatrix,[1/i_(2,b),1/i_(2,b),0]),l[f]=m}}return l}getSourceTile(r,l){let f=this.sourceCache._source,d=r.overscaledZ-this.deltaZoom;if(d>f.maxzoom&&(d=f.maxzoom),d<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(d).key);let m=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!m||!m.dem)&&l)for(;d>=f.minzoom&&(!m||!m.dem);)m=this.sourceCache.getTileByID(r.scaledTo(d--).key);return m}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(l=>l.timeAdded>=r)}}class Op{constructor(r,l,f){this.painter=r,this.sourceCache=new Ew(l),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,l,f,d=s.X){var m;if(!(l>=0&&l<d&&f>=0&&f<d))return 0;let b=this.getTerrainData(r),q=(m=b.tile)===null||m===void 0?void 0:m.dem;if(!q)return 0;let T=function(Z,ee,ae){var oe=ee[0],ue=ee[1];return Z[0]=ae[0]*oe+ae[4]*ue+ae[12],Z[1]=ae[1]*oe+ae[5]*ue+ae[13],Z}([],[l/d*s.X,f/d*s.X],b.u_terrain_matrix),k=[T[0]*q.dim,T[1]*q.dim],R=Math.floor(k[0]),D=Math.floor(k[1]),j=k[0]-R,H=k[1]-D;return q.get(R,D)*(1-j)*(1-H)+q.get(R+1,D)*j*(1-H)+q.get(R,D+1)*(1-j)*H+q.get(R+1,D+1)*j*H}getElevationForLngLatZoom(r,l){if(!s.bb(l,r.wrap()))return 0;let{tileID:f,mercatorX:d,mercatorY:m}=this._getOverscaledTileIDFromLngLatZoom(r,l);return this.getElevation(f,d%s.X,m%s.X,s.X)}getElevation(r,l,f,d=s.X){return this.getDEMElevation(r,l,f,d)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){let d=this.painter.context,m=new s.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Je(d,m,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Je(d,new s.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=s.an([])}let l=this.sourceCache.getSourceTile(r,!0);if(l&&l.dem&&(!l.demTexture||l.needsTerrainPrepare)){let d=this.painter.context;l.demTexture=this.painter.getTileTexture(l.dem.stride),l.demTexture?l.demTexture.update(l.dem.getPixels(),{premultiply:!1}):l.demTexture=new Je(d,l.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),l.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),l.needsTerrainPrepare=!1}let f=l&&l+l.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){let d=this.sourceCache.sourceCache._source.maxzoom,m=r.canonical.z-l.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=d?m=r.canonical.z-d:s.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let b=r.canonical.x-(r.canonical.x>>m<<m),q=r.canonical.y-(r.canonical.y>>m<<m),T=s.bc(new Float64Array(16),[1/(s.X<<m),1/(s.X<<m),0]);s.J(T,T,[b*s.X,q*s.X,0]),this._demMatrixCache[r.key]={matrix:T,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:l&&l.dem&&l.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:l&&l.dem&&l.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(l&&l.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:l}}getFramebuffer(r){let l=this.painter,f=l.width/devicePixelRatio,d=l.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Je(l.context,{width:f,height:d,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Je(l.context,{width:f,height:d,data:null},l.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(l.context.gl.NEAREST,l.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=l.context.createFramebuffer(f,d,!0,!1),this._fbo.depthAttachment.set(l.context.createRenderbuffer(l.context.gl.DEPTH_COMPONENT16,f,d))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let l=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let m=0,b=0;m<this._coordsTextureSize;m++)for(let q=0;q<this._coordsTextureSize;q++,b+=4)l[b+0]=255&q,l[b+1]=255&m,l[b+2]=q>>8<<4|m>>8,l[b+3]=0;let f=new s.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(l.buffer)),d=new Je(r,f,r.gl.RGBA,{premultiply:!1});return d.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);let l=new Uint8Array(4),f=this.painter.context,d=f.gl,m=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),b=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),q=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(m,q-b-1,1,1,d.RGBA,d.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null);let T=l[0]+(l[2]>>4<<8),k=l[1]+((15&l[2])<<8),R=this.coordsIndex[255-l[3]],D=R&&this.sourceCache.getTileByID(R);if(!D)return null;let j=this._coordsTextureSize,H=(1<<D.tileID.canonical.z)*j;return new s.Z((D.tileID.canonical.x*j+T)/H+D.tileID.wrap,(D.tileID.canonical.y*j+k)/H,this.getElevation(D.tileID,T,k,j))}depthAtPoint(r){let l=new Uint8Array(4),f=this.painter.context,d=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,l),f.bindFramebuffer.set(null),(l[0]/16777216+l[1]/65536+l[2]/256+l[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let r=this.painter.context,l=new s.bd,f=new s.aY,d=this.meshSize,m=s.X/d,b=d*d;for(let D=0;D<=d;D++)for(let j=0;j<=d;j++)l.emplaceBack(j*m,D*m,0);for(let D=0;D<b;D+=d+1)for(let j=0;j<d;j++)f.emplaceBack(j+D,d+j+D+1,d+j+D+2),f.emplaceBack(j+D,d+j+D+2,j+D+1);let q=l.length,T=q+2*(d+1);for(let D of[0,1])for(let j=0;j<=d;j++)for(let H of[0,1])l.emplaceBack(j*m,D*s.X,H);for(let D=0;D<2*d;D+=2)f.emplaceBack(T+D,T+D+1,T+D+3),f.emplaceBack(T+D,T+D+3,T+D+2),f.emplaceBack(q+D,q+D+3,q+D+1),f.emplaceBack(q+D,q+D+2,q+D+3);let k=l.length,R=k+2*(d+1);for(let D of[0,1])for(let j=0;j<=d;j++)for(let H of[0,1])l.emplaceBack(D*s.X,j*m,H);for(let D=0;D<2*d;D+=2)f.emplaceBack(k+D,k+D+1,k+D+3),f.emplaceBack(k+D,k+D+3,k+D+2),f.emplaceBack(R+D,R+D+3,R+D+1),f.emplaceBack(R+D,R+D+2,R+D+3);return this._mesh=new wh(r.createVertexBuffer(l,kp.members),r.createIndexBuffer(f),s.a0.simpleSegment(0,0,l.length,f.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*s.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,l){var f;let{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(r,l);return(f=this.getMinMaxElevation(d).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){let l=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return l&&l.dem&&(f.minElevation=l.dem.min*this.exaggeration,f.maxElevation=l.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,l){let f=s.Z.fromLngLat(r.wrap()),d=(1<<l)*s.X,m=f.x*d,b=f.y*d,q=Math.floor(m/s.X),T=Math.floor(b/s.X);return{tileID:new s.S(l,0,l,q,T),mercatorX:m,mercatorY:b}}}class Tw{constructor(r,l,f){this._context=r,this._size=l,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){let l=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Je(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),l.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),l.colorAttachment.set(f.texture),{id:r,fbo:l,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(l=>r.id!==l),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(let l of this._recentlyUsed)if(!this._objects[l].inUse)return this._objects[l];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(let r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}let xu={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class My{constructor(r,l){this.painter=r,this.terrain=l,this.pool=new Tw(r.context,30,l.sourceCache.tileSize*l.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,l){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(l)),this._coordsDescendingInv={};for(let f in r.sourceCaches){this._coordsDescendingInv[f]={};let d=r.sourceCaches[f].getVisibleCoordinates();for(let m of d){let b=this.terrain.sourceCache.getTerrainCoords(m);for(let q in b)this._coordsDescendingInv[f][q]||(this._coordsDescendingInv[f][q]=[]),this._coordsDescendingInv[f][q].push(b[q])}}this._coordsDescendingInvStr={};for(let f of r._order){let d=r._layers[f],m=d.source;if(xu[d.type]&&!this._coordsDescendingInvStr[m]){this._coordsDescendingInvStr[m]={};for(let b in this._coordsDescendingInv[m])this._coordsDescendingInvStr[m][b]=this._coordsDescendingInv[m][b].map(q=>q.key).sort().join()}}for(let f of this._renderableTiles)for(let d in this._coordsDescendingInvStr){let m=this._coordsDescendingInvStr[d][f.tileID.key];m&&m!==f.rttCoords[d]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;let l=r.type,f=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(xu[l]&&(this._prevType&&xu[this._prevType]||this._stacks.push([]),this._prevType=l,this._stacks[this._stacks.length-1].push(r.id),!d))return!0;if(xu[this._prevType]||xu[l]&&d){this._prevType=l;let m=this._stacks.length-1,b=this._stacks[m]||[];for(let q of this._renderableTiles){if(this.pool.isFull()&&(Sy(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(q),q.rtt[m]){let k=this.pool.getObjectForId(q.rtt[m].id);if(k.stamp===q.rtt[m].stamp){this.pool.useObject(k);continue}}let T=this.pool.getOrCreateFreeObject();this.pool.useObject(T),this.pool.stampObject(T),q.rtt[m]={id:T.id,stamp:T.stamp},f.context.bindFramebuffer.set(T.fbo.framebuffer),f.context.clear({color:s.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let k=0;k<b.length;k++){let R=f.style._layers[b[k]],D=R.source?this._coordsDescendingInv[R.source][q.tileID.key]:[q.tileID];f.context.viewport.set([0,0,T.fbo.width,T.fbo.height]),f._renderTileClippingMasks(R,D),f.renderLayer(f,f.style.sourceCaches[R.source],R,D),R.source&&(q.rttCoords[R.source]=this._coordsDescendingInvStr[R.source][q.tileID.key])}}return Sy(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xu[l]}return!1}}let Rp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},ky=_,Aw={hash:!1,interactive:!0,bearingSnap:7,attributionControl:yu,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:s.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Dp=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Pw={showCompass:!0,showZoom:!0,visualizePitch:!1};class Cw{constructor(r,l,f=!1){this.mousedown=b=>{this.startMouse(s.e({},b,{ctrlKey:!0,preventDefault:()=>b.preventDefault()}),C.mousePos(this.element,b)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=b=>{this.moveMouse(b,C.mousePos(this.element,b))},this.mouseup=b=>{this.mouseRotate.dragEnd(b),this.mousePitch&&this.mousePitch.dragEnd(b),this.offTemp()},this.touchstart=b=>{b.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,b.targetTouches)[0],this.startTouch(b,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=b=>{b.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,b.targetTouches)[0],this.moveTouch(b,this._lastPos))},this.touchend=b=>{b.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let d=r.dragRotate._mouseRotate.getClickTolerance(),m=r.dragRotate._mousePitch.getClickTolerance();this.element=l,this.mouseRotate=wp({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:b,clickTolerance:q,bearingDegreesPerPixelMoved:T=.8})=>{let k=new bp;return new Ja({clickTolerance:q,move:(R,D)=>({bearingDelta:(D.x-R.x)*T}),moveStateManager:k,enable:b,assignEvents:Dp})})({clickTolerance:d,enable:!0}),this.map=r,f&&(this.mousePitch=Sp({clickTolerance:m,enable:!0}),this.touchPitch=(({enable:b,clickTolerance:q,pitchDegreesPerPixelMoved:T=-.5})=>{let k=new bp;return new Ja({clickTolerance:q,move:(R,D)=>({pitchDelta:(D.y-R.y)*T}),moveStateManager:k,enable:b,assignEvents:Dp})})({clickTolerance:m,enable:!0})),C.addEventListener(l,"mousedown",this.mousedown),C.addEventListener(l,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(l,"touchcancel",this.reset)}startMouse(r,l){this.mouseRotate.dragStart(r,l),this.mousePitch&&this.mousePitch.dragStart(r,l),C.disableDrag()}startTouch(r,l){this.touchRotate.dragStart(r,l),this.touchPitch&&this.touchPitch.dragStart(r,l),C.disableDrag()}moveMouse(r,l){let f=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(r,l)||{};if(d&&f.setBearing(f.getBearing()+d),this.mousePitch){let{pitchDelta:m}=this.mousePitch.dragMove(r,l)||{};m&&f.setPitch(f.getPitch()+m)}}moveTouch(r,l){let f=this.map,{bearingDelta:d}=this.touchRotate.dragMove(r,l)||{};if(d&&f.setBearing(f.getBearing()+d),this.touchPitch){let{pitchDelta:m}=this.touchPitch.dragMove(r,l)||{};m&&f.setPitch(f.getPitch()+m)}}off(){let r=this.element;C.removeEventListener(r,"mousedown",this.mousedown),C.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let sn;function ur(v,r,l){let f=new s.N(v.lng,v.lat);if(v=new s.N(v.lng,v.lat),r){let d=new s.N(v.lng-360,v.lat),m=new s.N(v.lng+360,v.lat),b=l.locationPoint(v).distSqr(r);l.locationPoint(d).distSqr(r)<b?v=d:l.locationPoint(m).distSqr(r)<b&&(v=m)}for(;Math.abs(v.lng-l.center.lng)>180;){let d=l.locationPoint(v);if(d.x>=0&&d.y>=0&&d.x<=l.width&&d.y<=l.height)break;v.lng>l.center.lng?v.lng-=360:v.lng+=360}return v.lng!==f.lng&&l.locationPoint(v).y>l.height/2-l.getHorizon()?v:f}let bu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Oh(v,r,l){let f=v.classList;for(let d in bu)f.remove(`maplibregl-${l}-anchor-${d}`);f.add(`maplibregl-${l}-anchor-${r}`)}class Rh extends s.E{constructor(r){if(super(),this._onKeyPress=l=>{let f=l.code,d=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=l=>{let f=l.originalEvent.target,d=this._element;this._popup&&(f===d||d.contains(f))&&this.togglePopup()},this._update=l=>{var f;if(!this._map)return;let d=this._map.loaded()&&!this._map.isMoving();((l==null?void 0:l.type)==="terrain"||(l==null?void 0:l.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ur(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let b="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?b="rotateX(0deg)":this._pitchAlignment==="map"&&(b=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||l&&l.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${bu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${b} ${m}`),P.frameAsync(new AbortController).then(()=>{this._updateOpacity(l&&l.type==="moveend")}).catch(()=>{})},this._onMove=l=>{if(!this._isDragging){let f=this._clickTolerance||this._map._clickTolerance;this._isDragging=l.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=l.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new s.k("dragstart"))),this.fire(new s.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new s.k("dragend")),this._state="inactive"},this._addDragHandler=l=>{this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(this._pos).add(this._offset),this._pointerdownPos=l.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=s.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div");let l=C.createNS("http://www.w3.org/2000/svg","svg"),f=41,d=27;l.setAttributeNS(null,"display","block"),l.setAttributeNS(null,"height",`${f}px`),l.setAttributeNS(null,"width",`${d}px`),l.setAttributeNS(null,"viewBox",`0 0 ${d} ${f}`);let m=C.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"stroke","none"),m.setAttributeNS(null,"stroke-width","1"),m.setAttributeNS(null,"fill","none"),m.setAttributeNS(null,"fill-rule","evenodd");let b=C.createNS("http://www.w3.org/2000/svg","g");b.setAttributeNS(null,"fill-rule","nonzero");let q=C.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"transform","translate(3.0, 29.0)"),q.setAttributeNS(null,"fill","#000000");let T=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let oe of T){let ue=C.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",oe.rx),ue.setAttributeNS(null,"ry",oe.ry),q.appendChild(ue)}let k=C.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill",this._color);let R=C.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),k.appendChild(R);let D=C.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");let j=C.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(j);let H=C.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");let Z=C.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ee=C.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#000000"),ee.setAttributeNS(null,"opacity","0.25"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962");let ae=C.createNS("http://www.w3.org/2000/svg","circle");ae.setAttributeNS(null,"fill","#FFFFFF"),ae.setAttributeNS(null,"cx","5.5"),ae.setAttributeNS(null,"cy","5.5"),ae.setAttributeNS(null,"r","5.4999962"),Z.appendChild(ee),Z.appendChild(ae),b.appendChild(q),b.appendChild(k),b.appendChild(D),b.appendChild(H),b.appendChild(Z),l.appendChild(b),l.setAttributeNS(null,"height",f*this._scale+"px"),l.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(l),this._offset=s.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",l=>{l.preventDefault()}),this._element.addEventListener("mousedown",l=>{l.preventDefault()}),Oh(this._element,this._anchor,"marker"),r&&r.className)for(let l of r.className.split(" "))this._element.classList.add(l);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=s.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let d=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){let r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var l,f;if(!(!((l=this._map)===null||l===void 0)&&l.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let d=this._map,m=d.terrain.depthAtPoint(this._pos),b=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,b)-m<.006)return void(this._element.style.opacity=this._opacity);let q=-this._offset.y/d.transform._pixelPerMeter,T=Math.sin(d.getPitch()*Math.PI/180)*q,k=d.terrain.depthAtPoint(new s.P(this._pos.x,this._pos.y-this._offset.y)),R=d.transform.lngLatToCameraDepth(this._lngLat,b+T)-k>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&R&&this._popup.remove(),this._element.style.opacity=R?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=s.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,l){return r===void 0&&l===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),l!==void 0&&(this._opacityWhenCovered=l),this._map&&this._updateOpacity(!0),this}}let Oy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Xl=0,Yl=!1,_a={maxWidth:100,unit:"metric"};function Jl(v,r,l){let f=l&&l.maxWidth||100,d=v._container.clientHeight/2,m=v.unproject([0,d]),b=v.unproject([f,d]),q=m.distanceTo(b);if(l&&l.unit==="imperial"){let T=3.2808*q;T>5280?et(r,f,T/5280,v._getUIString("ScaleControl.Miles")):et(r,f,T,v._getUIString("ScaleControl.Feet"))}else l&&l.unit==="nautical"?et(r,f,q/1852,v._getUIString("ScaleControl.NauticalMiles")):q>=1e3?et(r,f,q/1e3,v._getUIString("ScaleControl.Kilometers")):et(r,f,q,v._getUIString("ScaleControl.Meters"))}function et(v,r,l,f){let d=function(m){let b=Math.pow(10,`${Math.floor(m)}`.length-1),q=m/b;return q=q>=10?10:q>=5?5:q>=3?3:q>=2?2:q>=1?1:function(T){let k=Math.pow(10,Math.ceil(-Math.log(T)/Math.LN10));return Math.round(T*k)/k}(q),b*q}(l);v.style.width=r*(d/l)+"px",v.innerHTML=`${d}&nbsp;${f}`}let ht={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Dh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Lh(v){if(v){if(typeof v=="number"){let r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new s.P(0,0),top:new s.P(0,v),"top-left":new s.P(r,r),"top-right":new s.P(-r,r),bottom:new s.P(0,-v),"bottom-left":new s.P(r,-r),"bottom-right":new s.P(-r,-r),left:new s.P(v,0),right:new s.P(-v,0)}}if(v instanceof s.P||Array.isArray(v)){let r=s.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:s.P.convert(v.center||[0,0]),top:s.P.convert(v.top||[0,0]),"top-left":s.P.convert(v["top-left"]||[0,0]),"top-right":s.P.convert(v["top-right"]||[0,0]),bottom:s.P.convert(v.bottom||[0,0]),"bottom-left":s.P.convert(v["bottom-left"]||[0,0]),"bottom-right":s.P.convert(v["bottom-right"]||[0,0]),left:s.P.convert(v.left||[0,0]),right:s.P.convert(v.right||[0,0])}}return Lh(new s.P(0,0))}let Lp=_;c.AJAXError=s.bh,c.Evented=s.E,c.LngLat=s.N,c.MercatorCoordinate=s.Z,c.Point=s.P,c.addProtocol=s.bi,c.config=s.a,c.removeProtocol=s.bj,c.AttributionControl=_u,c.BoxZoomHandler=on,c.CanvasSource=_n,c.CooperativeGesturesHandler=gu,c.DoubleClickZoomHandler=ds,c.DragPanHandler=Ay,c.DragRotateHandler=Py,c.EdgeInsets=du,c.FullscreenControl=class extends s.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let l=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=l==null?void 0:l.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)l=l.shadowRoot.fullscreenElement;l===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:s.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let v=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new s.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new s.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=kl,c.GeolocateControl=class extends s.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new s.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new s.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{let l=new s.N(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,d=this._map.getBearing(),m=s.e({bearing:d},this.options.fitBoundsOptions),b=Se.fromLngLat(l,f);this._map.fitBounds(b,m,{geolocateSource:!0})},this._updateMarker=r=>{if(r){let l=new s.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Yl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new s.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){s.w("Geolocation support is not available so the GeolocateControl will be disabled.");let l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}else{let l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=l,this._geolocateButton.setAttribute("aria-label",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Rh({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Rh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new s.k("trackuserlocationend")),this.fire(new s.k("userlocationlostfocus")))})}},this.options=s.e({},Oy,v)}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return s._(this,arguments,void 0,function*(r=!1){if(sn!==void 0&&!r)return sn;if(window.navigator.permissions===void 0)return sn=!!window.navigator.geolocation,sn;try{sn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(l){sn=!!window.navigator.geolocation}return sn})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Xl=0,Yl=!1}_isOutOfMapMaxBounds(v){let r=this._map.getMaxBounds(),l=v.coords;return r&&(l.longitude<r.getWest()||l.longitude>r.getEast()||l.latitude<r.getSouth()||l.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let v=this._map.getBounds(),r=v.getSouthEast(),l=v.getNorthEast(),f=r.distanceTo(l),d=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return s.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new s.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Xl--,Yl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new s.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new s.k("trackuserlocationstart")),this.fire(new s.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Xl++,Xl>1?(v={maximumAge:6e5,timeout:0},Yl=!0):(v=this.options.positionOptions,Yl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.Hash=qh,c.ImageSource=Ka,c.KeyboardHandler=wn,c.LngLatBounds=Se,c.LogoControl=Mp,c.Map=class extends Cy{constructor(v){s.bf.mark(s.bg.create);let r=Object.assign(Object.assign({},Aw),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new pu(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new zt,this._controls=[],this._mapId=s.a4(),this._contextLost=l=>{l.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new s.k("webglcontextlost",{originalEvent:l}))},this._contextRestored=l=>{this._setupPainter(),this.resize(),this._update(),this.fire(new s.k("webglcontextrestored",{originalEvent:l}))},this._onMapScroll=l=>{if(l.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Rp),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new ie(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let l=!1,f=Gl(d=>{this._trackResize&&!this._removed&&(this.resize(d),this.redraw())},50);this._resizeObserver=new ResizeObserver(d=>{l?f(d):l=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Cp(this,r),this._hash=r.hash&&new qh(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,s.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new _u(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Mp,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new s.k(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new s.k(`${l.dataType}dataloading`,l))}),this.on("dataabort",l=>{this.fire(new s.k("sourcedataabort",l))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new s.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let l=v.onAdd(this);this._controls.push(v);let f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(l,f.firstChild):f.appendChild(l),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new s.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,l,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(l,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,l,f)}resize(v){var r;let l=this._containerDimensions(),f=l[0],d=l[1],m=this._getClampedPixelRatio(f,d);if(this._resizeCanvas(f,d,m),this.painter.resize(f,d,m),this.painter.overLimit()){let q=this.painter.context.gl;this._maxCanvasSize=[q.drawingBufferWidth,q.drawingBufferHeight];let T=this._getClampedPixelRatio(f,d);this._resizeCanvas(f,d,T),this.painter.resize(f,d,T)}this.transform.resize(f,d),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,d);let b=!this._moving;return b&&(this.stop(),this.fire(new s.k("movestart",v)).fire(new s.k("move",v))),this.fire(new s.k("resize",v)),b&&this.fire(new s.k("moveend",v)),this}_getClampedPixelRatio(v,r){let{0:l,1:f}=this._maxCanvasSize,d=this.getPixelRatio(),m=v*d,b=r*d;return Math.min(m>l?l/m:1,b>f?f/b:1)*d}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Se.convert(v)),this._update()}setMinZoom(v){if((v=v==null?-2:v)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v==null?22:v)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v==null?0:v)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v==null?60:v)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(s.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(s.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,l){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layers:r,listener:l,delegates:{mousemove:m=>{let b=r.filter(T=>this.getLayer(T)),q=b.length!==0?this.queryRenderedFeatures(m.point,{layers:b}):[];q.length?f||(f=!0,l.call(this,new ci(v,this,m.originalEvent,{features:q}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layers:r,listener:l,delegates:{mousemove:b=>{let q=r.filter(T=>this.getLayer(T));(q.length!==0?this.queryRenderedFeatures(b.point,{layers:q}):[]).length?f=!0:f&&(f=!1,l.call(this,new ci(v,this,b.originalEvent)))},mouseout:b=>{f&&(f=!1,l.call(this,new ci(v,this,b.originalEvent)))}}}}{let f=d=>{let m=r.filter(q=>this.getLayer(q)),b=m.length!==0?this.queryRenderedFeatures(d.point,{layers:m}):[];b.length&&(d.features=b,l.call(this,d),delete d.features)};return{layers:r,listener:l,delegates:{[v]:f}}}}_saveDelegatedListener(v,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(r)}_removeDelegatedListener(v,r,l){if(!this._delegatedListeners||!this._delegatedListeners[v])return;let f=this._delegatedListeners[v];for(let d=0;d<f.length;d++){let m=f[d];if(m.listener===l&&m.layers.length===r.length&&m.layers.every(b=>r.includes(b))){for(let b in m.delegates)this.off(b,m.delegates[b]);return void f.splice(d,1)}}}on(v,r,l){if(l===void 0)return super.on(v,r);let f=this._createDelegatedListener(v,typeof r=="string"?[r]:r,l);this._saveDelegatedListener(v,f);for(let d in f.delegates)this.on(d,f.delegates[d]);return this}once(v,r,l){if(l===void 0)return super.once(v,r);let f=typeof r=="string"?[r]:r,d=this._createDelegatedListener(v,f,l);for(let m in d.delegates){let b=d.delegates[m];d.delegates[m]=(...q)=>{this._removeDelegatedListener(v,f,l),b(...q)}}this._saveDelegatedListener(v,d);for(let m in d.delegates)this.once(m,d.delegates[m]);return this}off(v,r,l){return l===void 0?super.off(v,r):(this._removeDelegatedListener(v,typeof r=="string"?[r]:r,l),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let l,f=v instanceof s.P||Array.isArray(v),d=f?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:v)||{},d instanceof s.P||typeof d[0]=="number")l=[s.P.convert(d)];else{let m=s.P.convert(d[0]),b=s.P.convert(d[1]);l=[m,new s.P(b.x,m.y),b,new s.P(m.x,b.y),m]}return this.style.queryRenderedFeatures(l,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=s.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){let r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));let l=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new sh(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,l):this.style.loadJSON(v,r,l),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new sh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){let l=this._requestManager.transformRequest(v,"Style");s.h(l,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new s.j(f))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(l){s.w(`Unable to perform style diff: ${l.message||l.error||l}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():s.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){let r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new s.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){let r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(let l in this.style._layers){let f=this.style._layers[l];f.type==="hillshade"&&f.source===v.source&&s.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Op(this.painter,r,v),this.painter.renderToTexture=new My(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=l=>{l.dataType==="style"?this.terrain.sourceCache.freeRtt():l.dataType==="source"&&l.tile&&(l.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(l.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new s.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){let v=this.style&&this.style.sourceCaches;for(let r in v){let l=v[r]._tiles;for(let f in l){let d=l[f];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,l={}){let{pixelRatio:f=1,sdf:d=!1,stretchX:m,stretchY:b,content:q,textFitWidth:T,textFitHeight:k}=l;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||s.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:R,height:D,data:j}=r,H=r;return this.style.addImage(v,{data:new s.R({width:R,height:D},new Uint8Array(j)),pixelRatio:f,stretchX:m,stretchY:b,content:q,textFitWidth:T,textFitHeight:k,sdf:d,version:0,userImage:H}),H.onAdd&&H.onAdd(this,v),this}}{let{width:R,height:D,data:j}=P.getImageData(r);this.style.addImage(v,{data:new s.R({width:R,height:D},j),pixelRatio:f,stretchX:m,stretchY:b,content:q,textFitWidth:T,textFitHeight:k,sdf:d,version:0})}}updateImage(v,r){let l=this.style.getImage(v);if(!l)return this.fire(new s.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let f=r instanceof HTMLImageElement||s.b(r)?P.getImageData(r):r,{width:d,height:m,data:b}=f;if(d===void 0||m===void 0)return this.fire(new s.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==l.data.width||m!==l.data.height)return this.fire(new s.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let q=!(r instanceof HTMLImageElement||s.b(r));return l.data.replace(b,q),this.style.updateImage(v,l),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new s.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return K.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,l){return this.style.setLayerZoomRange(v,r,l),this._update(!0)}setFilter(v,r,l={}){return this.style.setFilter(v,r,l),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,l,f={}){return this.style.setPaintProperty(v,r,l,f),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,l,f={}){return this.style.setLayoutProperty(v,r,l,f),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,l={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,l,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,l=>{l||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){let v=this._container;v.classList.add("maplibregl-map");let r=this._canvasContainer=C.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let l=this._containerDimensions(),f=this._getClampedPixelRatio(l[0],l[1]);this._resizeCanvas(l[0],l[1],f);let d=this._controlContainer=C.create("div","maplibregl-control-container",v),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(b=>{m[b]=C.create("div",`maplibregl-ctrl-${b} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,l){this._canvas.width=Math.floor(l*v),this._canvas.height=Math.floor(l*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){let v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:v},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});let l=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!l){let f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Sh(l,this.transform),B.testSupport(l)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){let r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let l=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let d=this.transform.zoom,m=P.now();this.style.zoomHistory.update(d,m);let b=new s.z(d,{now:m,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),q=b.crossFadingFactor();q===1&&q===this._crossFadingFactor||(l=!0,this._crossFadingFactor=q),this.style.update(b)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new s.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,s.bf.mark(s.bg.load),this.fire(new s.k("load"))),this.style&&(this.style.hasTransitions()||l)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new s.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,s.bf.mark(s.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(let l of this._controls)l.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();let r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),s.bf.clearMetrics(),this._removed=!0,this.fire(new s.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,P.frameAsync(this._frameRequest).then(v=>{s.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return ky}getCameraTargetElevation(){return this.transform.elevation}},c.MapMouseEvent=ci,c.MapTouchEvent=hs,c.MapWheelEvent=Iy,c.Marker=Rh,c.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{let r=this._map.getZoom(),l=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=l,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",l.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{let r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,l)=>{let f=this._map._getUIString(`NavigationControl.${l}`);r.title=f,r.setAttribute("aria-label",f)},this.options=s.e({},Pw,v),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Cw(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){let l=C.create("button",v,this._container);return l.type="button",l.addEventListener("click",r),l}},c.Popup=class extends s.E{constructor(v){super(),this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new s.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var l;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let q of this.options.className.split(" "))this._container.classList.add(q);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ur(this._lngLat,this._flatPos,this._map.transform):(l=this._lngLat)===null||l===void 0?void 0:l.wrap(),this._trackPointer&&!r)return;let f=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor,m=Lh(this.options.offset);if(!d){let q=this._container.offsetWidth,T=this._container.offsetHeight,k;k=f.y+m.bottom.y<T?["top"]:f.y>this._map.transform.height-T?["bottom"]:[],f.x<q/2?k.push("left"):f.x>this._map.transform.width-q/2&&k.push("right"),d=k.length===0?"bottom":k.join("-")}let b=f.add(m[d]);this.options.subpixelPositioning||(b=b.round()),C.setTransform(this._container,`${bu[d]} translate(${b.x}px,${b.y}px)`),Oh(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=s.e(Object.create(ht),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new s.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=s.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){let r=document.createDocumentFragment(),l=document.createElement("body"),f;for(l.innerHTML=v;f=l.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let v=this._container.querySelector(Dh);v&&v.focus()}},c.RasterDEMTileSource=_r,c.RasterTileSource=Vt,c.ScaleControl=class{constructor(v){this._onMove=()=>{Jl(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Jl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},_a),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=Xn,c.Style=sh,c.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=vu,c.TwoFingersTouchRotateHandler=Tp,c.TwoFingersTouchZoomHandler=Ip,c.TwoFingersTouchZoomRotateHandler=Pp,c.VectorTileSource=Ml,c.VideoSource=Qs,c.addSourceType=(v,r)=>s._(void 0,void 0,void 0,function*(){if(Rl(v))throw new Error(`A source type called "${v}" already exists.`);((l,f)=>{Ol[l]=f})(v,r)}),c.clearPrewarmedResources=function(){let v=tn;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(mo),tn=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.getMaxParallelImageRequests=function(){return s.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return pa().getRTLTextPluginStatus()},c.getVersion=function(){return Lp},c.getWorkerCount=function(){return fa.workerCount},c.getWorkerUrl=function(){return s.a.WORKER_URL},c.importScriptInWorkers=function(v){return Cl().broadcast("IS",v)},c.prewarm=function(){Qo().acquire(mo)},c.setMaxParallelImageRequests=function(v){s.a.MAX_PARALLEL_IMAGE_REQUESTS=v},c.setRTLTextPlugin=function(v,r){return pa().setRTLTextPlugin(v,r)},c.setWorkerCount=function(v){fa.workerCount=v},c.setWorkerUrl=function(v){s.a.WORKER_URL=v}});var u=e;return u})});var zle=I((nkt,Lle)=>{var KO=1/0,Llt=17976931348623157e292,Ale=NaN,zlt="[object Symbol]",Flt=/^\s+|\s+$/g,Nlt=/^[-+]0x[0-9a-f]+$/i,Blt=/^0b[01]+$/i,jlt=/^0o[0-7]+$/i,Ult=parseInt,$lt=typeof global=="object"&&global&&global.Object===Object&&global,Vlt=typeof self=="object"&&self&&self.Object===Object&&self,Glt=$lt||Vlt||Function("return this")(),Hlt=Object.prototype,Wlt=Hlt.toString,Ple=Glt.Symbol,Zlt=Math.min,Cle=Ple?Ple.prototype:void 0,Mle=Cle?Cle.toString:void 0;function Klt(e){if(typeof e=="string")return e;if(Rle(e))return Mle?Mle.call(e):"";var t=e+"";return t=="0"&&1/e==-KO?"-0":t}function Xlt(e){var t=Math[e];return function(n,u){if(n=Dle(n),u=Zlt(Qlt(u),292),u){var c=(Ole(n)+"e").split("e"),s=t(c[0]+"e"+(+c[1]+u));return c=(Ole(s)+"e").split("e"),+(c[0]+"e"+(+c[1]-u))}return t(n)}}function kle(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Ylt(e){return!!e&&typeof e=="object"}function Rle(e){return typeof e=="symbol"||Ylt(e)&&Wlt.call(e)==zlt}function Jlt(e){if(!e)return e===0?e:0;if(e=Dle(e),e===KO||e===-KO){var t=e<0?-1:1;return t*Llt}return e===e?e:0}function Qlt(e){var t=Jlt(e),n=t%1;return t===t?n?t-n:t:0}function Dle(e){if(typeof e=="number")return e;if(Rle(e))return Ale;if(kle(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=kle(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Flt,"");var n=Blt.test(e);return n||jlt.test(e)?Ult(e.slice(2),n?2:8):Nlt.test(e)?Ale:+e}function Ole(e){return e==null?"":Klt(e)}var ect=Xlt("round");Lle.exports=ect});var mct={};Zhe(mct,{SettingsProvider:()=>cct,renderGeoreferenceRanking:()=>hct,renderProgressBar:()=>fct,renderUnreferencedMaps:()=>dct,renderUserHistory:()=>pct});var Qg=ro(sc(),1),ey=ro(JF(),1),_Ot=ro(xue(),1);var Nle=ro(GO(),1);var Jg=ro(Tle(),1);var tct=ro(zle(),1);function iw(e){return e!=null}function Fle(e){return typeof e=="string"||e instanceof String}function Vr(e){let t=li.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let n=t[e];return n===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):n}var ict={EN:"en",DE:"de"},Un={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:ict.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1},li={axiosApiInstance:null,appendSettings(e){Un=Object.assign({},Un,e)},getSettings(){return Un},getBaseMaps(){return Un.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},Un.MAPVIEW_PARAMS)},getLanguageDict(){return Un.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return Un.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},Un.TERRAIN_TILES)},getUsername(){return Un.USERNAME},isUserAuthenticated(){return Un.USER_ISAUTHENTICATED===!0},updateSettings(e){Un=e},_initAxiosApiInstance(){let e=Un.API_GEOREFERENCE_BASEURL,t=Fle(e)&&e.length===0;if(!iw(e)||t)throw new Error("The URL for the georeference service is not set.");let n={"Dev-Mode-Secret":"","Dev-Mode-Name":""},u=Object.assign({baseURL:e,withCredentials:!0},n?{headers:{get:n,post:n,put:n,delete:n}}:{});this.axiosApiInstance=Nle.default.create(u)},getGeoreferenceApiClient(){return iw(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=Un.MARKER_URL;if(!iw(e))throw new Error("The marker icon url is not set.");return{id:Un.MARKER_IMAGE_ID,url:e}}};var Gr=ro(sc(),1);function nw(){return na(this,null,function*(){let n=yield li.getGeoreferenceApiClient().get("/statistics/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch statistics from the georeference endpoint.")})}function Ble(){return na(this,null,function*(){let n=yield li.getGeoreferenceApiClient().get("/user/history/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch the user history from the georeference endpoint.")})}var nct=()=>{let[e,t]=(0,Gr.useState)([]);return(0,Gr.useEffect)(()=>{na(void 0,null,function*(){let u=yield nw();t(u.georeference_points)})},[]),Gr.default.createElement("div",{className:"vkf-apps-georeferenceranking"},Gr.default.createElement("div",{className:"table-wrapper"},Gr.default.createElement("table",null,Gr.default.createElement("thead",null,Gr.default.createElement("tr",null,Gr.default.createElement("th",{className:"rank"},Vr("georeferenceranking-label-place")),Gr.default.createElement("th",{className:"user"},Vr("georeferenceranking-label-user")),Gr.default.createElement("th",{className:"transformation-new"},Vr("georeferenceranking-label-transformation-new")),Gr.default.createElement("th",{className:"transformation-update"},Vr("georeferenceranking-label-transformation-update")),Gr.default.createElement("th",{className:"points"},Vr("georeferenceranking-label-points")))),Gr.default.createElement("tbody",null,e.map((n,u)=>Gr.default.createElement("tr",{key:u},Gr.default.createElement("td",{className:"rank"},u+1),Gr.default.createElement("td",{className:"user"},n.user_id),Gr.default.createElement("td",{className:"transformation-new"},n.transformation_new),Gr.default.createElement("td",{className:"transformation-update"},n.transformation_updates),Gr.default.createElement("td",{className:"points"},n.total_points)))))))},jle=nct;var sr=ro(sc(),1);var act=()=>{let[e,t]=(0,sr.useState)(null),n=li.getSettings().LANGUAGE_CODE;return(0,sr.useEffect)(()=>{na(void 0,null,function*(){let c=yield nw();console.log(c);let s=c.georeference_map_count,_=c.not_georeference_map_count;t({mapsDone:s,mapsTodo:_,progress:Math.floor(s/(s+_)*100),ranking:c.georeference_points,totalPoints:s+_})})},[t]),sr.default.createElement("div",{className:"vkf-apps-progressbar"},e!==null&&sr.default.createElement("div",null,sr.default.createElement("div",{className:"progressbar-container"},sr.default.createElement("h4",null,n==="de"?"Fortschritt in der Georeferenzierung":"Progress in georeferencing"),sr.default.createElement("p",{className:"results"},n==="de"?sr.default.createElement("span",null,"Bereits ",sr.default.createElement("strong",null,e.mapsDone)," von"," ",sr.default.createElement("strong",null,e.totalPoints)," Karten georeferenziert."):sr.default.createElement("span",null,"Already ",sr.default.createElement("strong",null,e.mapsDone)," of"," ",sr.default.createElement("strong",null,e.totalPoints)," maps georeferenced.")),sr.default.createElement("div",{className:"bar"},sr.default.createElement("div",{className:"done",style:{width:`${e.progress}%`}}))),sr.default.createElement("div",{className:"overview-ranking"},sr.default.createElement("div",null,sr.default.createElement("h4",null,n==="de"?"Die Top-Georeferenzierer":"The Top-Georeferencer"),sr.default.createElement("ol",null,e.ranking.slice(0,3).map((u,c)=>sr.default.createElement("li",{key:c},sr.default.createElement("span",null,sr.default.createElement("strong",{className:"user"},u.user_id,":")," ",u.total_points," ",n==="de"?"Punkte":"points"))),e.ranking.length>3&&sr.default.createElement("li",{className:"further-items"},"[...]")),sr.default.createElement("div",{className:"forwarding"},sr.default.createElement("p",null,n==="de"?"Jetzt mithelfen und selbst Punkte sammeln.":"Take part and collect points.","\xA0",sr.default.createElement("a",{title:"Frequently Asked Questions (FAQ)",href:li.getSettings().LINK_TO_FAQ},n==="de"?"So einfach geht's":"Start now.")))))))},Ule=act;var Zt=ro(sc(),1);var $le=ro(GO(),1);function Vle(e=500){return na(this,null,function*(){let t=li.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let n=yield $le.default.post(`${t}/_search?size=${e}`,{query:{term:{has_georeference:!1}}});return n.status===200&&n.data.hits.total.value>0?n.data.hits.hits.map(u=>u._source):(console.error("Something went wrong while trying to fetch search document."),[])})}var oct=()=>{let[e,t]=(0,Zt.useState)([]),[n,u]=(0,Zt.useState)([]),[c,s]=(0,Zt.useState)(""),_=li.getSettings().USERNAME,w=li.getSettings().LINK_TO_GEOREFERENCE,E=(0,Zt.useRef)(null),P=C=>{let B=C.target.value;s(B),E.current!==null&&(clearTimeout(E.current),E.current=null),E.current=setTimeout(()=>{u(e.filter($=>$.title.toLowerCase().includes(B.toLowerCase())))},200)};return(0,Zt.useEffect)(()=>{na(void 0,null,function*(){let B=yield Vle();t(B),u(B)})},[]),Zt.default.createElement("div",{className:"vkf-apps-unreferenced-maps"},Zt.default.createElement("h3",null,Vr("unreferencedmaps-title")," #",_),Zt.default.createElement("span",{className:"status-feedback"},Vr("unreferencedmaps-subtitle"),": ",e.length),Zt.default.createElement("div",{className:"quick-search"},Zt.default.createElement("label",{htmlFor:"quick-search-field"},Vr("unreferencedmaps-search-placeholder")),Zt.default.createElement("input",{id:"quick-search-field",value:c,onChange:P,type:"text",placeholder:Vr("unreferencedmaps-search-placeholder")})),Zt.default.createElement("ul",{className:"maps-list"},n.map((C,B)=>Zt.default.createElement("li",{key:B,className:"map-item"},Zt.default.createElement("figure",{className:"map-image"},Zt.default.createElement("a",{href:`${w}?map_id=${C.map_id}`,target:"_blank",rel:"noreferrer"},Zt.default.createElement("img",{alt:"Map Image",src:C.thumb_url,loading:"lazy"}))),Zt.default.createElement("div",{className:"map-meta"},Zt.default.createElement("h4",null,C.title),Zt.default.createElement("p",null,Zt.default.createElement("span",{className:"map-meta-label"},Vr("unreferencedmaps-label-time"),":"," "),Zt.default.createElement("span",{className:"map-meta-value"},C.time_published)),Zt.default.createElement("p",null,Zt.default.createElement("span",{className:"map-meta-label"},Vr("unreferencedmaps-label-maptype"),":"," "),Zt.default.createElement("span",{className:"map-meta-value"},C.map_type)),Zt.default.createElement("p",null,Zt.default.createElement("span",{className:"map-meta-label"},"ID: "),Zt.default.createElement("span",{className:"map-meta-value"},C.map_id))),Zt.default.createElement("div",{className:"map-links"},Zt.default.createElement("a",{href:`${w}?map_id=${C.map_id}`,target:"_blank",rel:"noreferrer"},Vr("unreferencedmaps-btn-georeference")))))))},Gle=oct;var yr=ro(sc(),1);function Hle(e){var t,n,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Hle(e[t]))&&(u&&(u+=" "),u+=n);else for(t in e)e[t]&&(u&&(u+=" "),u+=t);return u}function sct(){for(var e,t,n=0,u="";n<arguments.length;)(e=arguments[n++])&&(t=Hle(e))&&(u&&(u+=" "),u+=t);return u}var Wle=sct;var uct={valid:"label-success",invalid:"label-warning",missing:"label-danger"},lct=()=>{let[e,t]=(0,yr.useState)({maps:[],points:0}),n=li.getSettings().USERNAME,u=li.getSettings().LINK_TO_GEOREFERENCE,c=li.getSettings().LINK_TO_MAIN;return(0,yr.useEffect)(()=>{na(void 0,null,function*(){let _=yield Ble();t({maps:_.georef_profile,points:_.points})})},[]),yr.default.createElement("div",{className:"vkf-apps-userhistory"},yr.default.createElement("h3",null,Vr("userhistory-title")," #",n),yr.default.createElement("span",{className:"status-feedback"},Vr("userhistory-subtitle"),": ",e.points),yr.default.createElement("ul",{className:"maps-list"},e.maps.map((s,_)=>yr.default.createElement("li",{key:_,className:"map-item"},yr.default.createElement("figure",{className:"map-image"},yr.default.createElement("img",{alt:"Map Image",src:s.metadata.thumbnail,loading:"lazy"})),yr.default.createElement("div",{className:"map-meta"},yr.default.createElement("h4",null,s.metadata.title),yr.default.createElement("p",null,yr.default.createElement("span",{className:"map-meta-label"},"Created: "),yr.default.createElement("span",{className:"map-meta-value"},s.transformation.submitted)),yr.default.createElement("p",null,yr.default.createElement("span",{className:"map-meta-label"},Vr("userhistory-label-mapId"),":"," "),yr.default.createElement("span",{className:"map-meta-value"},s.map_id)),yr.default.createElement("p",null,yr.default.createElement("span",{className:"map-meta-label"},Vr("userhistory-label-validation"),":"," "),yr.default.createElement("span",{className:Wle("label",uct[s.transformation.validation])},s.transformation.validation))),yr.default.createElement("div",{className:"map-links"},yr.default.createElement("a",{href:`${c}?map_id=${s.map_id}`,target:"_blank",rel:"noreferrer"},Vr("userhistory-link-showMap")),yr.default.createElement("a",{href:`${u}?transformation_id=${s.transformation.id}&map_id=${s.map_id}`,rel:"noreferrer",target:"_blank"},Vr("userhistory-link-goToProcess")))))))},Zle=lct;var cct=li;function hct(e){ey.default.render(Qg.default.createElement(jle,null),e)}function fct(e){ey.default.render(Qg.default.createElement(Ule,null),e)}function dct(e){ey.default.render(Qg.default.createElement(Gle,null),e)}function pct(e){ey.default.render(Qg.default.createElement(Zle,null),e)}return Khe(mct)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.0/LICENSE.txt
   *)
*/