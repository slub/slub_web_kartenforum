var vk2=(()=>{var yme=Object.create;var Rm=Object.defineProperty,_me=Object.defineProperties,xme=Object.getOwnPropertyDescriptor,bme=Object.getOwnPropertyDescriptors,wme=Object.getOwnPropertyNames,sF=Object.getOwnPropertySymbols,Sme=Object.getPrototypeOf,uF=Object.prototype.hasOwnProperty,Tme=Object.prototype.propertyIsEnumerable;var t0=Math.pow,lF=(e,t,n)=>t in e?Rm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ST=(e,t)=>{for(var n in t||(t={}))uF.call(t,n)&&lF(e,n,t[n]);if(sF)for(var n of sF(t))Tme.call(t,n)&&lF(e,n,t[n]);return e},TT=(e,t)=>_me(e,bme(t));var I=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ime=(e,t)=>{for(var n in t)Rm(e,n,{get:t[n],enumerable:!0})},cF=(e,t,n,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let c of wme(t))!uF.call(e,c)&&c!==n&&Rm(e,c,{get:()=>t[c],enumerable:!(u=xme(t,c))||u.enumerable});return e};var uo=(e,t,n)=>(n=e!=null?yme(Sme(e)):{},cF(t||!e||!e.__esModule?Rm(n,"default",{value:e,enumerable:!0}):n,e)),Eme=e=>cF(Rm({},"__esModule",{value:!0}),e);var fa=(e,t,n)=>new Promise((u,c)=>{var a=q=>{try{w(n.next(q))}catch(M){c(M)}},_=q=>{try{w(n.throw(q))}catch(M){c(M)}},w=q=>q.done?u(q.value):Promise.resolve(q.value).then(a,_);w((n=n.apply(e,t)).next())});var IT=I((Dvt,fF)=>{"use strict";var hF=Object.getOwnPropertySymbols,qme=Object.prototype.hasOwnProperty,Pme=Object.prototype.propertyIsEnumerable;function Ame(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Cme(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var u=Object.getOwnPropertyNames(t).map(function(a){return t[a]});if(u.join("")!=="0123456789")return!1;var c={};return"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a}),Object.keys(Object.assign({},c)).join("")==="abcdefghijklmnopqrst"}catch(a){return!1}}fF.exports=Cme()?Object.assign:function(e,t){for(var n,u=Ame(e),c,a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var _ in n)qme.call(n,_)&&(u[_]=n[_]);if(hF){c=hF(n);for(var w=0;w<c.length;w++)Pme.call(n,c[w])&&(u[c[w]]=n[c[w]])}}return u}});var PF=I(Xt=>{"use strict";var qT=IT(),Pf=60103,mF=60106;Xt.Fragment=60107;Xt.StrictMode=60108;Xt.Profiler=60114;var vF=60109,gF=60110,yF=60112;Xt.Suspense=60113;var _F=60115,xF=60116;typeof Symbol=="function"&&Symbol.for&&(Aa=Symbol.for,Pf=Aa("react.element"),mF=Aa("react.portal"),Xt.Fragment=Aa("react.fragment"),Xt.StrictMode=Aa("react.strict_mode"),Xt.Profiler=Aa("react.profiler"),vF=Aa("react.provider"),gF=Aa("react.context"),yF=Aa("react.forward_ref"),Xt.Suspense=Aa("react.suspense"),_F=Aa("react.memo"),xF=Aa("react.lazy"));var Aa,dF=typeof Symbol=="function"&&Symbol.iterator;function Mme(e){return e===null||typeof e!="object"?null:(e=dF&&e[dF]||e["@@iterator"],typeof e=="function"?e:null)}function Om(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bF={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wF={};function Af(e,t,n){this.props=e,this.context=t,this.refs=wF,this.updater=n||bF}Af.prototype.isReactComponent={};Af.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(Om(85));this.updater.enqueueSetState(this,e,t,"setState")};Af.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function SF(){}SF.prototype=Af.prototype;function PT(e,t,n){this.props=e,this.context=t,this.refs=wF,this.updater=n||bF}var AT=PT.prototype=new SF;AT.constructor=PT;qT(AT,Af.prototype);AT.isPureReactComponent=!0;var CT={current:null},TF=Object.prototype.hasOwnProperty,IF={key:!0,ref:!0,__self:!0,__source:!0};function EF(e,t,n){var u,c={},a=null,_=null;if(t!=null)for(u in t.ref!==void 0&&(_=t.ref),t.key!==void 0&&(a=""+t.key),t)TF.call(t,u)&&!IF.hasOwnProperty(u)&&(c[u]=t[u]);var w=arguments.length-2;if(w===1)c.children=n;else if(1<w){for(var q=Array(w),M=0;M<w;M++)q[M]=arguments[M+2];c.children=q}if(e&&e.defaultProps)for(u in w=e.defaultProps,w)c[u]===void 0&&(c[u]=w[u]);return{$$typeof:Pf,type:e,key:a,ref:_,props:c,_owner:CT.current}}function Rme(e,t){return{$$typeof:Pf,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function MT(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pf}function Ome(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var pF=/\/+/g;function ET(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Ome(""+e.key):t.toString(36)}function i0(e,t,n,u,c){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var _=!1;if(e===null)_=!0;else switch(a){case"string":case"number":_=!0;break;case"object":switch(e.$$typeof){case Pf:case mF:_=!0}}if(_)return _=e,c=c(_),e=u===""?"."+ET(_,0):u,Array.isArray(c)?(n="",e!=null&&(n=e.replace(pF,"$&/")+"/"),i0(c,t,n,"",function(M){return M})):c!=null&&(MT(c)&&(c=Rme(c,n+(!c.key||_&&_.key===c.key?"":(""+c.key).replace(pF,"$&/")+"/")+e)),t.push(c)),1;if(_=0,u=u===""?".":u+":",Array.isArray(e))for(var w=0;w<e.length;w++){a=e[w];var q=u+ET(a,w);_+=i0(a,t,n,q,c)}else if(q=Mme(e),typeof q=="function")for(e=q.call(e),w=0;!(a=e.next()).done;)a=a.value,q=u+ET(a,w++),_+=i0(a,t,n,q,c);else if(a==="object")throw t=""+e,Error(Om(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return _}function r0(e,t,n){if(e==null)return e;var u=[],c=0;return i0(e,u,"","",function(a){return t.call(n,a,c++)}),u}function kme(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var qF={current:null};function Rs(){var e=qF.current;if(e===null)throw Error(Om(321));return e}var Dme={ReactCurrentDispatcher:qF,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:CT,IsSomeRendererActing:{current:!1},assign:qT};Xt.Children={map:r0,forEach:function(e,t,n){r0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return r0(e,function(){t++}),t},toArray:function(e){return r0(e,function(t){return t})||[]},only:function(e){if(!MT(e))throw Error(Om(143));return e}};Xt.Component=Af;Xt.PureComponent=PT;Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dme;Xt.cloneElement=function(e,t,n){if(e==null)throw Error(Om(267,e));var u=qT({},e.props),c=e.key,a=e.ref,_=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,_=CT.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var w=e.type.defaultProps;for(q in t)TF.call(t,q)&&!IF.hasOwnProperty(q)&&(u[q]=t[q]===void 0&&w!==void 0?w[q]:t[q])}var q=arguments.length-2;if(q===1)u.children=n;else if(1<q){w=Array(q);for(var M=0;M<q;M++)w[M]=arguments[M+2];u.children=w}return{$$typeof:Pf,type:e.type,key:c,ref:a,props:u,_owner:_}};Xt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:gF,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:vF,_context:e},e.Consumer=e};Xt.createElement=EF;Xt.createFactory=function(e){var t=EF.bind(null,e);return t.type=e,t};Xt.createRef=function(){return{current:null}};Xt.forwardRef=function(e){return{$$typeof:yF,render:e}};Xt.isValidElement=MT;Xt.lazy=function(e){return{$$typeof:xF,_payload:{_status:-1,_result:e},_init:kme}};Xt.memo=function(e,t){return{$$typeof:_F,type:e,compare:t===void 0?null:t}};Xt.useCallback=function(e,t){return Rs().useCallback(e,t)};Xt.useContext=function(e,t){return Rs().useContext(e,t)};Xt.useDebugValue=function(){};Xt.useEffect=function(e,t){return Rs().useEffect(e,t)};Xt.useImperativeHandle=function(e,t,n){return Rs().useImperativeHandle(e,t,n)};Xt.useLayoutEffect=function(e,t){return Rs().useLayoutEffect(e,t)};Xt.useMemo=function(e,t){return Rs().useMemo(e,t)};Xt.useReducer=function(e,t,n){return Rs().useReducer(e,t,n)};Xt.useRef=function(e){return Rs().useRef(e)};Xt.useState=function(e){return Rs().useState(e)};Xt.version="17.0.2"});var kc=I((zvt,AF)=>{"use strict";AF.exports=PF()});var DF=I(nr=>{"use strict";var Mf,Lm,s0,FT;typeof performance=="object"&&typeof performance.now=="function"?(CF=performance,nr.unstable_now=function(){return CF.now()}):(RT=Date,MF=RT.now(),nr.unstable_now=function(){return RT.now()-MF});var CF,RT,MF;typeof window=="undefined"||typeof MessageChannel!="function"?(Cf=null,OT=null,kT=function(){if(Cf!==null)try{var e=nr.unstable_now();Cf(!0,e),Cf=null}catch(t){throw setTimeout(kT,0),t}},Mf=function(e){Cf!==null?setTimeout(Mf,0,e):(Cf=e,setTimeout(kT,0))},Lm=function(e,t){OT=setTimeout(e,t)},s0=function(){clearTimeout(OT)},nr.unstable_shouldYield=function(){return!1},FT=nr.unstable_forceFrameRate=function(){}):(RF=window.setTimeout,OF=window.clearTimeout,typeof console!="undefined"&&(kF=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof kF!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),km=!1,Dm=null,n0=-1,DT=5,LT=0,nr.unstable_shouldYield=function(){return nr.unstable_now()>=LT},FT=function(){},nr.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):DT=0<e?Math.floor(1e3/e):5},zT=new MessageChannel,a0=zT.port2,zT.port1.onmessage=function(){if(Dm!==null){var e=nr.unstable_now();LT=e+DT;try{Dm(!0,e)?a0.postMessage(null):(km=!1,Dm=null)}catch(t){throw a0.postMessage(null),t}}else km=!1},Mf=function(e){Dm=e,km||(km=!0,a0.postMessage(null))},Lm=function(e,t){n0=RF(function(){e(nr.unstable_now())},t)},s0=function(){OF(n0),n0=-1});var Cf,OT,kT,RF,OF,kF,km,Dm,n0,DT,LT,zT,a0;function BT(e,t){var n=e.length;e.push(t);e:for(;;){var u=n-1>>>1,c=e[u];if(c!==void 0&&0<o0(c,t))e[u]=t,e[n]=c,n=u;else break e}}function co(e){return e=e[0],e===void 0?null:e}function l0(e){var t=e[0];if(t!==void 0){var n=e.pop();if(n!==t){e[0]=n;e:for(var u=0,c=e.length;u<c;){var a=2*(u+1)-1,_=e[a],w=a+1,q=e[w];if(_!==void 0&&0>o0(_,n))q!==void 0&&0>o0(q,_)?(e[u]=q,e[w]=n,u=w):(e[u]=_,e[a]=n,u=a);else if(q!==void 0&&0>o0(q,n))e[u]=q,e[w]=n,u=w;else break e}}return t}return null}function o0(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}var Uo=[],Bl=[],Lme=1,Ca=null,un=3,u0=!1,Dc=!1,zm=!1;function NT(e){for(var t=co(Bl);t!==null;){if(t.callback===null)l0(Bl);else if(t.startTime<=e)l0(Bl),t.sortIndex=t.expirationTime,BT(Uo,t);else break;t=co(Bl)}}function jT(e){if(zm=!1,NT(e),!Dc)if(co(Uo)!==null)Dc=!0,Mf(UT);else{var t=co(Bl);t!==null&&Lm(jT,t.startTime-e)}}function UT(e,t){Dc=!1,zm&&(zm=!1,s0()),u0=!0;var n=un;try{for(NT(t),Ca=co(Uo);Ca!==null&&(!(Ca.expirationTime>t)||e&&!nr.unstable_shouldYield());){var u=Ca.callback;if(typeof u=="function"){Ca.callback=null,un=Ca.priorityLevel;var c=u(Ca.expirationTime<=t);t=nr.unstable_now(),typeof c=="function"?Ca.callback=c:Ca===co(Uo)&&l0(Uo),NT(t)}else l0(Uo);Ca=co(Uo)}if(Ca!==null)var a=!0;else{var _=co(Bl);_!==null&&Lm(jT,_.startTime-t),a=!1}return a}finally{Ca=null,un=n,u0=!1}}var zme=FT;nr.unstable_IdlePriority=5;nr.unstable_ImmediatePriority=1;nr.unstable_LowPriority=4;nr.unstable_NormalPriority=3;nr.unstable_Profiling=null;nr.unstable_UserBlockingPriority=2;nr.unstable_cancelCallback=function(e){e.callback=null};nr.unstable_continueExecution=function(){Dc||u0||(Dc=!0,Mf(UT))};nr.unstable_getCurrentPriorityLevel=function(){return un};nr.unstable_getFirstCallbackNode=function(){return co(Uo)};nr.unstable_next=function(e){switch(un){case 1:case 2:case 3:var t=3;break;default:t=un}var n=un;un=t;try{return e()}finally{un=n}};nr.unstable_pauseExecution=function(){};nr.unstable_requestPaint=zme;nr.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=un;un=e;try{return t()}finally{un=n}};nr.unstable_scheduleCallback=function(e,t,n){var u=nr.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?u+n:u):n=u,e){case 1:var c=-1;break;case 2:c=250;break;case 5:c=1073741823;break;case 4:c=1e4;break;default:c=5e3}return c=n+c,e={id:Lme++,callback:t,priorityLevel:e,startTime:n,expirationTime:c,sortIndex:-1},n>u?(e.sortIndex=n,BT(Bl,e),co(Uo)===null&&e===co(Bl)&&(zm?s0():zm=!0,Lm(jT,n-u))):(e.sortIndex=c,BT(Uo,e),Dc||u0||(Dc=!0,Mf(UT))),e};nr.unstable_wrapCallback=function(e){var t=un;return function(){var n=un;un=t;try{return e.apply(this,arguments)}finally{un=n}}}});var zF=I((Bvt,LF)=>{"use strict";LF.exports=DF()});var S3=I(La=>{"use strict";var rx=kc(),kr=IT(),Oi=zF();function Je(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!rx)throw Error(Je(227));var YB=new Set,dv={};function Zc(e,t){Jf(e,t),Jf(e+"Capture",t)}function Jf(e,t){for(dv[e]=t,e=0;e<t.length;e++)YB.add(t[e])}var Fs=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Fme=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,FF=Object.prototype.hasOwnProperty,BF={},NF={};function Bme(e){return FF.call(NF,e)?!0:FF.call(BF,e)?!1:Fme.test(e)?NF[e]=!0:(BF[e]=!0,!1)}function Nme(e,t,n,u){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function jme(e,t,n,u){if(t===null||typeof t=="undefined"||Nme(e,t,n,u))return!0;if(u)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pn(e,t,n,u,c,a,_){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=c,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=_}var Hi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Hi[e]=new Pn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Hi[t]=new Pn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Hi[e]=new Pn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Hi[e]=new Pn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Hi[e]=new Pn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Hi[e]=new Pn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Hi[e]=new Pn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Hi[e]=new Pn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Hi[e]=new Pn(e,5,!1,e.toLowerCase(),null,!1,!1)});var XI=/[\-:]([a-z])/g;function JI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(XI,JI);Hi[t]=new Pn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(XI,JI);Hi[t]=new Pn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(XI,JI);Hi[t]=new Pn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Hi[e]=new Pn(e,1,!1,e.toLowerCase(),null,!1,!1)});Hi.xlinkHref=new Pn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Hi[e]=new Pn(e,1,!1,e.toLowerCase(),null,!0,!0)});function QI(e,t,n,u){var c=Hi.hasOwnProperty(t)?Hi[t]:null,a=c!==null?c.type===0:u?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");a||(jme(t,n,c,u)&&(n=null),u||c===null?Bme(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):c.mustUseProperty?e[c.propertyName]=n===null?c.type===3?!1:"":n:(t=c.attributeName,u=c.attributeNamespace,n===null?e.removeAttribute(t):(c=c.type,n=c===3||c===4&&n===!0?"":""+n,u?e.setAttributeNS(u,t,n):e.setAttribute(t,n))))}var Hc=rx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ym=60103,zc=60106,jl=60107,eE=60108,tv=60114,tE=60109,rE=60110,ix=60112,rv=60113,O0=60120,nx=60115,iE=60116,nE=60121,aE=60128,XB=60129,oE=60130,hI=60131;typeof Symbol=="function"&&Symbol.for&&(wi=Symbol.for,Ym=wi("react.element"),zc=wi("react.portal"),jl=wi("react.fragment"),eE=wi("react.strict_mode"),tv=wi("react.profiler"),tE=wi("react.provider"),rE=wi("react.context"),ix=wi("react.forward_ref"),rv=wi("react.suspense"),O0=wi("react.suspense_list"),nx=wi("react.memo"),iE=wi("react.lazy"),nE=wi("react.block"),wi("react.scope"),aE=wi("react.opaque.id"),XB=wi("react.debug_trace_mode"),oE=wi("react.offscreen"),hI=wi("react.legacy_hidden"));var wi,jF=typeof Symbol=="function"&&Symbol.iterator;function Fm(e){return e===null||typeof e!="object"?null:(e=jF&&e[jF]||e["@@iterator"],typeof e=="function"?e:null)}var $T;function Xm(e){if($T===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);$T=t&&t[1]||""}return`
`+$T+e}var VT=!1;function c0(e,t){if(!e||VT)return"";VT=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(q){var u=q}Reflect.construct(e,[],t)}else{try{t.call()}catch(q){u=q}e.call(t.prototype)}}else{try{throw Error()}catch(q){u=q}e()}}catch(q){if(q&&u&&typeof q.stack=="string"){for(var c=q.stack.split(`
`),a=u.stack.split(`
`),_=c.length-1,w=a.length-1;1<=_&&0<=w&&c[_]!==a[w];)w--;for(;1<=_&&0<=w;_--,w--)if(c[_]!==a[w]){if(_!==1||w!==1)do if(_--,w--,0>w||c[_]!==a[w])return`
`+c[_].replace(" at new "," at ");while(1<=_&&0<=w);break}}}finally{VT=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Xm(e):""}function Ume(e){switch(e.tag){case 5:return Xm(e.type);case 16:return Xm("Lazy");case 13:return Xm("Suspense");case 19:return Xm("SuspenseList");case 0:case 2:case 15:return e=c0(e.type,!1),e;case 11:return e=c0(e.type.render,!1),e;case 22:return e=c0(e.type._render,!1),e;case 1:return e=c0(e.type,!0),e;default:return""}}function Uf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case jl:return"Fragment";case zc:return"Portal";case tv:return"Profiler";case eE:return"StrictMode";case rv:return"Suspense";case O0:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case rE:return(e.displayName||"Context")+".Consumer";case tE:return(e._context.displayName||"Context")+".Provider";case ix:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case nx:return Uf(e.type);case nE:return Uf(e._render);case iE:t=e._payload,e=e._init;try{return Uf(e(t))}catch(n){}}return null}function Ql(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function JB(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $me(e){var t=JB(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var c=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(_){u=""+_,a.call(this,_)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function h0(e){e._valueTracker||(e._valueTracker=$me(e))}function QB(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),u="";return e&&(u=JB(e)?e.checked?"true":"false":e.value),e=u,e!==n?(t.setValue(e),!0):!1}function k0(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function fI(e,t){var n=t.checked;return kr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function UF(e,t){var n=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;n=Ql(t.value!=null?t.value:n),e._wrapperState={initialChecked:u,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function eN(e,t){t=t.checked,t!=null&&QI(e,"checked",t,!1)}function dI(e,t){eN(e,t);var n=Ql(t.value),u=t.type;if(n!=null)u==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?pI(e,t.type,n):t.hasOwnProperty("defaultValue")&&pI(e,t.type,Ql(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $F(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function pI(e,t,n){(t!=="number"||k0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function Vme(e){var t="";return rx.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function mI(e,t){return e=kr({children:void 0},t),(t=Vme(t.children))&&(e.children=t),e}function $f(e,t,n,u){if(e=e.options,t){t={};for(var c=0;c<n.length;c++)t["$"+n[c]]=!0;for(n=0;n<e.length;n++)c=t.hasOwnProperty("$"+e[n].value),e[n].selected!==c&&(e[n].selected=c),c&&u&&(e[n].defaultSelected=!0)}else{for(n=""+Ql(n),t=null,c=0;c<e.length;c++){if(e[c].value===n){e[c].selected=!0,u&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function vI(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Je(91));return kr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function VF(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Je(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Je(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ql(n)}}function tN(e,t){var n=Ql(t.value),u=Ql(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),u!=null&&(e.defaultValue=""+u)}function GF(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var gI={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function rN(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yI(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rN(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var f0,iN=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,u,c){MSApp.execUnsafeLocalFunction(function(){return e(t,n,u,c)})}:e}(function(e,t){if(e.namespaceURI!==gI.svg||"innerHTML"in e)e.innerHTML=t;else{for(f0=f0||document.createElement("div"),f0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=f0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function pv(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var iv={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gme=["Webkit","ms","Moz","O"];Object.keys(iv).forEach(function(e){Gme.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),iv[t]=iv[e]})});function nN(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||iv.hasOwnProperty(e)&&iv[e]?(""+t).trim():t+"px"}function aN(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var u=n.indexOf("--")===0,c=nN(n,t[n],u);n==="float"&&(n="cssFloat"),u?e.setProperty(n,c):e[n]=c}}var Zme=kr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _I(e,t){if(t){if(Zme[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Je(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Je(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Je(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Je(62))}}function xI(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function sE(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var bI=null,Vf=null,Gf=null;function ZF(e){if(e=Pv(e)){if(typeof bI!="function")throw Error(Je(280));var t=e.stateNode;t&&(t=cx(t),bI(e.stateNode,e.type,t))}}function oN(e){Vf?Gf?Gf.push(e):Gf=[e]:Vf=e}function sN(){if(Vf){var e=Vf,t=Gf;if(Gf=Vf=null,ZF(e),t)for(e=0;e<t.length;e++)ZF(t[e])}}function lE(e,t){return e(t)}function lN(e,t,n,u,c){return e(t,n,u,c)}function uE(){}var uN=lE,Fc=!1,GT=!1;function cE(){(Vf!==null||Gf!==null)&&(uE(),sN())}function Hme(e,t,n){if(GT)return e(t,n);GT=!0;try{return uN(e,t,n)}finally{GT=!1,cE()}}function mv(e,t){var n=e.stateNode;if(n===null)return null;var u=cx(n);if(u===null)return null;n=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Je(231,t,typeof n));return n}var wI=!1;if(Fs)try{Rf={},Object.defineProperty(Rf,"passive",{get:function(){wI=!0}}),window.addEventListener("test",Rf,Rf),window.removeEventListener("test",Rf,Rf)}catch(e){wI=!1}var Rf;function Wme(e,t,n,u,c,a,_,w,q){var M=Array.prototype.slice.call(arguments,3);try{t.apply(n,M)}catch(O){this.onError(O)}}var nv=!1,D0=null,L0=!1,SI=null,Kme={onError:function(e){nv=!0,D0=e}};function Yme(e,t,n,u,c,a,_,w,q){nv=!1,D0=null,Wme.apply(Kme,arguments)}function Xme(e,t,n,u,c,a,_,w,q){if(Yme.apply(this,arguments),nv){if(nv){var M=D0;nv=!1,D0=null}else throw Error(Je(198));L0||(L0=!0,SI=M)}}function Wc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&1026)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function cN(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function HF(e){if(Wc(e)!==e)throw Error(Je(188))}function Jme(e){var t=e.alternate;if(!t){if(t=Wc(e),t===null)throw Error(Je(188));return t!==e?null:e}for(var n=e,u=t;;){var c=n.return;if(c===null)break;var a=c.alternate;if(a===null){if(u=c.return,u!==null){n=u;continue}break}if(c.child===a.child){for(a=c.child;a;){if(a===n)return HF(c),e;if(a===u)return HF(c),t;a=a.sibling}throw Error(Je(188))}if(n.return!==u.return)n=c,u=a;else{for(var _=!1,w=c.child;w;){if(w===n){_=!0,n=c,u=a;break}if(w===u){_=!0,u=c,n=a;break}w=w.sibling}if(!_){for(w=a.child;w;){if(w===n){_=!0,n=a,u=c;break}if(w===u){_=!0,u=a,n=c;break}w=w.sibling}if(!_)throw Error(Je(189))}}if(n.alternate!==u)throw Error(Je(190))}if(n.tag!==3)throw Error(Je(188));return n.stateNode.current===n?e:t}function hN(e){if(e=Jme(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function WF(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var fN,hE,dN,pN,TI=!1,$o=[],Gl=null,Zl=null,Hl=null,vv=new Map,gv=new Map,Bm=[],KF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function II(e,t,n,u,c){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:c,targetContainers:[u]}}function YF(e,t){switch(e){case"focusin":case"focusout":Gl=null;break;case"dragenter":case"dragleave":Zl=null;break;case"mouseover":case"mouseout":Hl=null;break;case"pointerover":case"pointerout":vv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gv.delete(t.pointerId)}}function Nm(e,t,n,u,c,a){return e===null||e.nativeEvent!==a?(e=II(t,n,u,c,a),t!==null&&(t=Pv(t),t!==null&&hE(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function Qme(e,t,n,u,c){switch(t){case"focusin":return Gl=Nm(Gl,e,t,n,u,c),!0;case"dragenter":return Zl=Nm(Zl,e,t,n,u,c),!0;case"mouseover":return Hl=Nm(Hl,e,t,n,u,c),!0;case"pointerover":var a=c.pointerId;return vv.set(a,Nm(vv.get(a)||null,e,t,n,u,c)),!0;case"gotpointercapture":return a=c.pointerId,gv.set(a,Nm(gv.get(a)||null,e,t,n,u,c)),!0}return!1}function eve(e){var t=Bc(e.target);if(t!==null){var n=Wc(t);if(n!==null){if(t=n.tag,t===13){if(t=cN(n),t!==null){e.blockedOn=t,pN(e.lanePriority,function(){Oi.unstable_runWithPriority(e.priority,function(){dN(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function S0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=mE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=Pv(n),t!==null&&hE(t),e.blockedOn=n,!1;t.shift()}return!0}function XF(e,t,n){S0(e)&&n.delete(t)}function tve(){for(TI=!1;0<$o.length;){var e=$o[0];if(e.blockedOn!==null){e=Pv(e.blockedOn),e!==null&&fN(e);break}for(var t=e.targetContainers;0<t.length;){var n=mE(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&$o.shift()}Gl!==null&&S0(Gl)&&(Gl=null),Zl!==null&&S0(Zl)&&(Zl=null),Hl!==null&&S0(Hl)&&(Hl=null),vv.forEach(XF),gv.forEach(XF)}function jm(e,t){e.blockedOn===t&&(e.blockedOn=null,TI||(TI=!0,Oi.unstable_scheduleCallback(Oi.unstable_NormalPriority,tve)))}function mN(e){function t(c){return jm(c,e)}if(0<$o.length){jm($o[0],e);for(var n=1;n<$o.length;n++){var u=$o[n];u.blockedOn===e&&(u.blockedOn=null)}}for(Gl!==null&&jm(Gl,e),Zl!==null&&jm(Zl,e),Hl!==null&&jm(Hl,e),vv.forEach(t),gv.forEach(t),n=0;n<Bm.length;n++)u=Bm[n],u.blockedOn===e&&(u.blockedOn=null);for(;0<Bm.length&&(n=Bm[0],n.blockedOn===null);)eve(n),n.blockedOn===null&&Bm.shift()}function d0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Lf={animationend:d0("Animation","AnimationEnd"),animationiteration:d0("Animation","AnimationIteration"),animationstart:d0("Animation","AnimationStart"),transitionend:d0("Transition","TransitionEnd")},ZT={},vN={};Fs&&(vN=document.createElement("div").style,"AnimationEvent"in window||(delete Lf.animationend.animation,delete Lf.animationiteration.animation,delete Lf.animationstart.animation),"TransitionEvent"in window||delete Lf.transitionend.transition);function ax(e){if(ZT[e])return ZT[e];if(!Lf[e])return e;var t=Lf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in vN)return ZT[e]=t[n];return e}var gN=ax("animationend"),yN=ax("animationiteration"),_N=ax("animationstart"),xN=ax("transitionend"),bN=new Map,fE=new Map,rve=["abort","abort",gN,"animationEnd",yN,"animationIteration",_N,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",xN,"transitionEnd","waiting","waiting"];function dE(e,t){for(var n=0;n<e.length;n+=2){var u=e[n],c=e[n+1];c="on"+(c[0].toUpperCase()+c.slice(1)),fE.set(u,t),bN.set(u,c),Zc(c,[u])}}var ive=Oi.unstable_now;ive();var br=8;function kf(e){if((1&e)!==0)return br=15,1;if((2&e)!==0)return br=14,2;if((4&e)!==0)return br=13,4;var t=24&e;return t!==0?(br=12,t):(e&32)!==0?(br=11,32):(t=192&e,t!==0?(br=10,t):(e&256)!==0?(br=9,256):(t=3584&e,t!==0?(br=8,t):(e&4096)!==0?(br=7,4096):(t=4186112&e,t!==0?(br=6,t):(t=62914560&e,t!==0?(br=5,t):e&67108864?(br=4,67108864):(e&134217728)!==0?(br=3,134217728):(t=805306368&e,t!==0?(br=2,t):(1073741824&e)!==0?(br=1,1073741824):(br=8,e))))))}function nve(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function ave(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Je(358,e))}}function yv(e,t){var n=e.pendingLanes;if(n===0)return br=0;var u=0,c=0,a=e.expiredLanes,_=e.suspendedLanes,w=e.pingedLanes;if(a!==0)u=a,c=br=15;else if(a=n&134217727,a!==0){var q=a&~_;q!==0?(u=kf(q),c=br):(w&=a,w!==0&&(u=kf(w),c=br))}else a=n&~_,a!==0?(u=kf(a),c=br):w!==0&&(u=kf(w),c=br);if(u===0)return 0;if(u=31-eu(u),u=n&((0>u?0:1<<u)<<1)-1,t!==0&&t!==u&&(t&_)===0){if(kf(t),c<=br)return t;br=c}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)n=31-eu(t),c=1<<n,u|=e[n],t&=~c;return u}function wN(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function z0(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=Df(24&~t),e===0?z0(10,t):e;case 10:return e=Df(192&~t),e===0?z0(8,t):e;case 8:return e=Df(3584&~t),e===0&&(e=Df(4186112&~t),e===0&&(e=512)),e;case 2:return t=Df(805306368&~t),t===0&&(t=268435456),t}throw Error(Je(358,e))}function Df(e){return e&-e}function HT(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ox(e,t,n){e.pendingLanes|=t;var u=t-1;e.suspendedLanes&=u,e.pingedLanes&=u,e=e.eventTimes,t=31-eu(t),e[t]=n}var eu=Math.clz32?Math.clz32:lve,ove=Math.log,sve=Math.LN2;function lve(e){return e===0?32:31-(ove(e)/sve|0)|0}var uve=Oi.unstable_UserBlockingPriority,cve=Oi.unstable_runWithPriority,T0=!0;function hve(e,t,n,u){Fc||uE();var c=pE,a=Fc;Fc=!0;try{lN(c,e,t,n,u)}finally{(Fc=a)||cE()}}function fve(e,t,n,u){cve(uve,pE.bind(null,e,t,n,u))}function pE(e,t,n,u){if(T0){var c;if((c=(t&4)===0)&&0<$o.length&&-1<KF.indexOf(e))e=II(null,e,t,n,u),$o.push(e);else{var a=mE(e,t,n,u);if(a===null)c&&YF(e,u);else{if(c){if(-1<KF.indexOf(e)){e=II(a,e,t,n,u),$o.push(e);return}if(Qme(a,e,t,n,u))return;YF(e,u)}DN(e,t,u,null,n)}}}}function mE(e,t,n,u){var c=sE(u);if(c=Bc(c),c!==null){var a=Wc(c);if(a===null)c=null;else{var _=a.tag;if(_===13){if(c=cN(a),c!==null)return c;c=null}else if(_===3){if(a.stateNode.hydrate)return a.tag===3?a.stateNode.containerInfo:null;c=null}else a!==c&&(c=null)}}return DN(e,t,u,c,n),null}var Ul=null,vE=null,I0=null;function SN(){if(I0)return I0;var e,t=vE,n=t.length,u,c="value"in Ul?Ul.value:Ul.textContent,a=c.length;for(e=0;e<n&&t[e]===c[e];e++);var _=n-e;for(u=1;u<=_&&t[n-u]===c[a-u];u++);return I0=c.slice(e,1<u?1-u:void 0)}function E0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function p0(){return!0}function JF(){return!1}function pa(e){function t(n,u,c,a,_){this._reactName=n,this._targetInst=c,this.type=u,this.nativeEvent=a,this.target=_,this.currentTarget=null;for(var w in e)e.hasOwnProperty(w)&&(n=e[w],this[w]=n?n(a):a[w]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?p0:JF,this.isPropagationStopped=JF,this}return kr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=p0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=p0)},persist:function(){},isPersistent:p0}),t}var rd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},gE=pa(rd),qv=kr({},rd,{view:0,detail:0}),dve=pa(qv),WT,KT,Um,sx=kr({},qv,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yE,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Um&&(Um&&e.type==="mousemove"?(WT=e.screenX-Um.screenX,KT=e.screenY-Um.screenY):KT=WT=0,Um=e),WT)},movementY:function(e){return"movementY"in e?e.movementY:KT}}),QF=pa(sx),pve=kr({},sx,{dataTransfer:0}),mve=pa(pve),vve=kr({},qv,{relatedTarget:0}),YT=pa(vve),gve=kr({},rd,{animationName:0,elapsedTime:0,pseudoElement:0}),yve=pa(gve),_ve=kr({},rd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xve=pa(_ve),bve=kr({},rd,{data:0}),eB=pa(bve),wve={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sve={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Tve={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ive(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Tve[e])?!!t[e]:!1}function yE(){return Ive}var Eve=kr({},qv,{key:function(e){if(e.key){var t=wve[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=E0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Sve[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yE,charCode:function(e){return e.type==="keypress"?E0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?E0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qve=pa(Eve),Pve=kr({},sx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),tB=pa(Pve),Ave=kr({},qv,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yE}),Cve=pa(Ave),Mve=kr({},rd,{propertyName:0,elapsedTime:0,pseudoElement:0}),Rve=pa(Mve),Ove=kr({},sx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),kve=pa(Ove),Dve=[9,13,27,32],_E=Fs&&"CompositionEvent"in window,av=null;Fs&&"documentMode"in document&&(av=document.documentMode);var Lve=Fs&&"TextEvent"in window&&!av,TN=Fs&&(!_E||av&&8<av&&11>=av),rB=" ",iB=!1;function IN(e,t){switch(e){case"keyup":return Dve.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function EN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var zf=!1;function zve(e,t){switch(e){case"compositionend":return EN(t);case"keypress":return t.which!==32?null:(iB=!0,rB);case"textInput":return e=t.data,e===rB&&iB?null:e;default:return null}}function Fve(e,t){if(zf)return e==="compositionend"||!_E&&IN(e,t)?(e=SN(),I0=vE=Ul=null,zf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return TN&&t.locale!=="ko"?null:t.data;default:return null}}var Bve={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nB(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Bve[e.type]:t==="textarea"}function qN(e,t,n,u){oN(u),t=F0(t,"onChange"),0<t.length&&(n=new gE("onChange","change",null,n,u),e.push({event:n,listeners:t}))}var ov=null,_v=null;function Nve(e){RN(e,0)}function lx(e){var t=Bf(e);if(QB(t))return e}function jve(e,t){if(e==="change")return t}var PN=!1;Fs&&(Fs?(v0="oninput"in document,v0||(XT=document.createElement("div"),XT.setAttribute("oninput","return;"),v0=typeof XT.oninput=="function"),m0=v0):m0=!1,PN=m0&&(!document.documentMode||9<document.documentMode));var m0,v0,XT;function aB(){ov&&(ov.detachEvent("onpropertychange",AN),_v=ov=null)}function AN(e){if(e.propertyName==="value"&&lx(_v)){var t=[];if(qN(t,_v,e,sE(e)),e=Nve,Fc)e(t);else{Fc=!0;try{lE(e,t)}finally{Fc=!1,cE()}}}}function Uve(e,t,n){e==="focusin"?(aB(),ov=t,_v=n,ov.attachEvent("onpropertychange",AN)):e==="focusout"&&aB()}function $ve(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lx(_v)}function Vve(e,t){if(e==="click")return lx(t)}function Gve(e,t){if(e==="input"||e==="change")return lx(t)}function Zve(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ma=typeof Object.is=="function"?Object.is:Zve,Hve=Object.prototype.hasOwnProperty;function xv(e,t){if(Ma(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),u=Object.keys(t);if(n.length!==u.length)return!1;for(u=0;u<n.length;u++)if(!Hve.call(t,n[u])||!Ma(e[n[u]],t[n[u]]))return!1;return!0}function oB(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function sB(e,t){var n=oB(e);e=0;for(var u;n;){if(n.nodeType===3){if(u=e+n.textContent.length,e<=t&&u>=t)return{node:n,offset:t-e};e=u}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=oB(n)}}function CN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?CN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function lB(){for(var e=window,t=k0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(u){n=!1}if(n)e=t.contentWindow;else break;t=k0(e.document)}return t}function EI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var Wve=Fs&&"documentMode"in document&&11>=document.documentMode,Ff=null,qI=null,sv=null,PI=!1;function uB(e,t,n){var u=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;PI||Ff==null||Ff!==k0(u)||(u=Ff,"selectionStart"in u&&EI(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),sv&&xv(sv,u)||(sv=u,u=F0(qI,"onSelect"),0<u.length&&(t=new gE("onSelect","select",null,t,n),e.push({event:t,listeners:u}),t.target=Ff)))}dE("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);dE("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);dE(rve,2);for(JT="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),g0=0;g0<JT.length;g0++)fE.set(JT[g0],0);var JT,g0;Jf("onMouseEnter",["mouseout","mouseover"]);Jf("onMouseLeave",["mouseout","mouseover"]);Jf("onPointerEnter",["pointerout","pointerover"]);Jf("onPointerLeave",["pointerout","pointerover"]);Zc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),MN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jm));function cB(e,t,n){var u=e.type||"unknown-event";e.currentTarget=n,Xme(u,t,void 0,e),e.currentTarget=null}function RN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var u=e[n],c=u.event;u=u.listeners;e:{var a=void 0;if(t)for(var _=u.length-1;0<=_;_--){var w=u[_],q=w.instance,M=w.currentTarget;if(w=w.listener,q!==a&&c.isPropagationStopped())break e;cB(c,w,M),a=q}else for(_=0;_<u.length;_++){if(w=u[_],q=w.instance,M=w.currentTarget,w=w.listener,q!==a&&c.isPropagationStopped())break e;cB(c,w,M),a=q}}}if(L0)throw e=SI,L0=!1,SI=null,e}function Cr(e,t){var n=zN(t),u=e+"__bubble";n.has(u)||(kN(t,e,2,!1),n.add(u))}var hB="_reactListening"+Math.random().toString(36).slice(2);function ON(e){e[hB]||(e[hB]=!0,YB.forEach(function(t){MN.has(t)||fB(t,!1,e,null),fB(t,!0,e,null)}))}function fB(e,t,n,u){var c=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,a=n;if(e==="selectionchange"&&n.nodeType!==9&&(a=n.ownerDocument),u!==null&&!t&&MN.has(e)){if(e!=="scroll")return;c|=2,a=u}var _=zN(a),w=e+"__"+(t?"capture":"bubble");_.has(w)||(t&&(c|=4),kN(a,e,c,t),_.add(w))}function kN(e,t,n,u){var c=fE.get(t);switch(c===void 0?2:c){case 0:c=hve;break;case 1:c=fve;break;default:c=pE}n=c.bind(null,t,n,e),c=void 0,!wI||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),u?c!==void 0?e.addEventListener(t,n,{capture:!0,passive:c}):e.addEventListener(t,n,!0):c!==void 0?e.addEventListener(t,n,{passive:c}):e.addEventListener(t,n,!1)}function DN(e,t,n,u,c){var a=u;if((t&1)===0&&(t&2)===0&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var w=u.stateNode.containerInfo;if(w===c||w.nodeType===8&&w.parentNode===c)break;if(_===4)for(_=u.return;_!==null;){var q=_.tag;if((q===3||q===4)&&(q=_.stateNode.containerInfo,q===c||q.nodeType===8&&q.parentNode===c))return;_=_.return}for(;w!==null;){if(_=Bc(w),_===null)return;if(q=_.tag,q===5||q===6){u=a=_;continue e}w=w.parentNode}}u=u.return}Hme(function(){var M=a,O=sE(n),k=[];e:{var $=bN.get(e);if($!==void 0){var fe=gE,Pe=e;switch(e){case"keypress":if(E0(n)===0)break e;case"keydown":case"keyup":fe=qve;break;case"focusin":Pe="focus",fe=YT;break;case"focusout":Pe="blur",fe=YT;break;case"beforeblur":case"afterblur":fe=YT;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=QF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=mve;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Cve;break;case gN:case yN:case _N:fe=yve;break;case xN:fe=Rve;break;case"scroll":fe=dve;break;case"wheel":fe=kve;break;case"copy":case"cut":case"paste":fe=xve;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=tB}var Se=(t&4)!==0,ne=!Se&&e==="scroll",re=Se?$!==null?$+"Capture":null:$;Se=[];for(var ae=M,_e;ae!==null;){_e=ae;var Te=_e.stateNode;if(_e.tag===5&&Te!==null&&(_e=Te,re!==null&&(Te=mv(ae,re),Te!=null&&Se.push(bv(ae,Te,_e)))),ne)break;ae=ae.return}0<Se.length&&($=new fe($,Pe,null,n,O),k.push({event:$,listeners:Se}))}}if((t&7)===0){e:{if($=e==="mouseover"||e==="pointerover",fe=e==="mouseout"||e==="pointerout",$&&(t&16)===0&&(Pe=n.relatedTarget||n.fromElement)&&(Bc(Pe)||Pe[id]))break e;if((fe||$)&&($=O.window===O?O:($=O.ownerDocument)?$.defaultView||$.parentWindow:window,fe?(Pe=n.relatedTarget||n.toElement,fe=M,Pe=Pe?Bc(Pe):null,Pe!==null&&(ne=Wc(Pe),Pe!==ne||Pe.tag!==5&&Pe.tag!==6)&&(Pe=null)):(fe=null,Pe=M),fe!==Pe)){if(Se=QF,Te="onMouseLeave",re="onMouseEnter",ae="mouse",(e==="pointerout"||e==="pointerover")&&(Se=tB,Te="onPointerLeave",re="onPointerEnter",ae="pointer"),ne=fe==null?$:Bf(fe),_e=Pe==null?$:Bf(Pe),$=new Se(Te,ae+"leave",fe,n,O),$.target=ne,$.relatedTarget=_e,Te=null,Bc(O)===M&&(Se=new Se(re,ae+"enter",Pe,n,O),Se.target=_e,Se.relatedTarget=ne,Te=Se),ne=Te,fe&&Pe)t:{for(Se=fe,re=Pe,ae=0,_e=Se;_e;_e=Of(_e))ae++;for(_e=0,Te=re;Te;Te=Of(Te))_e++;for(;0<ae-_e;)Se=Of(Se),ae--;for(;0<_e-ae;)re=Of(re),_e--;for(;ae--;){if(Se===re||re!==null&&Se===re.alternate)break t;Se=Of(Se),re=Of(re)}Se=null}else Se=null;fe!==null&&dB(k,$,fe,Se,!1),Pe!==null&&ne!==null&&dB(k,ne,Pe,Se,!0)}}e:{if($=M?Bf(M):window,fe=$.nodeName&&$.nodeName.toLowerCase(),fe==="select"||fe==="input"&&$.type==="file")var nt=jve;else if(nB($)){if(PN)nt=Gve;else{nt=$ve;var Ve=Uve}}else(fe=$.nodeName)&&fe.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(nt=Vve);if(nt&&(nt=nt(e,M))){qN(k,nt,n,O);break e}Ve&&Ve(e,$,M),e==="focusout"&&(Ve=$._wrapperState)&&Ve.controlled&&$.type==="number"&&pI($,"number",$.value)}switch(Ve=M?Bf(M):window,e){case"focusin":(nB(Ve)||Ve.contentEditable==="true")&&(Ff=Ve,qI=M,sv=null);break;case"focusout":sv=qI=Ff=null;break;case"mousedown":PI=!0;break;case"contextmenu":case"mouseup":case"dragend":PI=!1,uB(k,n,O);break;case"selectionchange":if(Wve)break;case"keydown":case"keyup":uB(k,n,O)}var ut;if(_E)e:{switch(e){case"compositionstart":var St="onCompositionStart";break e;case"compositionend":St="onCompositionEnd";break e;case"compositionupdate":St="onCompositionUpdate";break e}St=void 0}else zf?IN(e,n)&&(St="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(St="onCompositionStart");St&&(TN&&n.locale!=="ko"&&(zf||St!=="onCompositionStart"?St==="onCompositionEnd"&&zf&&(ut=SN()):(Ul=O,vE="value"in Ul?Ul.value:Ul.textContent,zf=!0)),Ve=F0(M,St),0<Ve.length&&(St=new eB(St,e,null,n,O),k.push({event:St,listeners:Ve}),ut?St.data=ut:(ut=EN(n),ut!==null&&(St.data=ut)))),(ut=Lve?zve(e,n):Fve(e,n))&&(M=F0(M,"onBeforeInput"),0<M.length&&(O=new eB("onBeforeInput","beforeinput",null,n,O),k.push({event:O,listeners:M}),O.data=ut))}RN(k,t)})}function bv(e,t,n){return{instance:e,listener:t,currentTarget:n}}function F0(e,t){for(var n=t+"Capture",u=[];e!==null;){var c=e,a=c.stateNode;c.tag===5&&a!==null&&(c=a,a=mv(e,n),a!=null&&u.unshift(bv(e,a,c)),a=mv(e,t),a!=null&&u.push(bv(e,a,c))),e=e.return}return u}function Of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function dB(e,t,n,u,c){for(var a=t._reactName,_=[];n!==null&&n!==u;){var w=n,q=w.alternate,M=w.stateNode;if(q!==null&&q===u)break;w.tag===5&&M!==null&&(w=M,c?(q=mv(n,a),q!=null&&_.unshift(bv(n,q,w))):c||(q=mv(n,a),q!=null&&_.push(bv(n,q,w)))),n=n.return}_.length!==0&&e.push({event:t,listeners:_})}function B0(){}var QT=null,eI=null;function LN(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function AI(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pB=typeof setTimeout=="function"?setTimeout:void 0,Kve=typeof clearTimeout=="function"?clearTimeout:void 0;function xE(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function Zf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function mB(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var tI=0;function Yve(e){return{$$typeof:aE,toString:e,valueOf:e}}var ux=Math.random().toString(36).slice(2),$l="__reactFiber$"+ux,N0="__reactProps$"+ux,id="__reactContainer$"+ux,vB="__reactEvents$"+ux;function Bc(e){var t=e[$l];if(t)return t;for(var n=e.parentNode;n;){if(t=n[id]||n[$l]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=mB(e);e!==null;){if(n=e[$l])return n;e=mB(e)}return t}e=n,n=e.parentNode}return null}function Pv(e){return e=e[$l]||e[id],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Bf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Je(33))}function cx(e){return e[N0]||null}function zN(e){var t=e[vB];return t===void 0&&(t=e[vB]=new Set),t}var CI=[],Nf=-1;function nu(e){return{current:e}}function Mr(e){0>Nf||(e.current=CI[Nf],CI[Nf]=null,Nf--)}function Zr(e,t){Nf++,CI[Nf]=e.current,e.current=t}var tu={},dn=nu(tu),Vn=nu(!1),$c=tu;function Qf(e,t){var n=e.type.contextTypes;if(!n)return tu;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var c={},a;for(a in n)c[a]=t[a];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function Gn(e){return e=e.childContextTypes,e!=null}function j0(){Mr(Vn),Mr(dn)}function gB(e,t,n){if(dn.current!==tu)throw Error(Je(168));Zr(dn,t),Zr(Vn,n)}function FN(e,t,n){var u=e.stateNode;if(e=t.childContextTypes,typeof u.getChildContext!="function")return n;u=u.getChildContext();for(var c in u)if(!(c in e))throw Error(Je(108,Uf(t)||"Unknown",c));return kr({},n,u)}function q0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||tu,$c=dn.current,Zr(dn,e),Zr(Vn,Vn.current),!0}function yB(e,t,n){var u=e.stateNode;if(!u)throw Error(Je(169));n?(e=FN(e,t,$c),u.__reactInternalMemoizedMergedChildContext=e,Mr(Vn),Mr(dn),Zr(dn,e)):Mr(Vn),Zr(Vn,n)}var bE=null,Uc=null,Xve=Oi.unstable_runWithPriority,wE=Oi.unstable_scheduleCallback,MI=Oi.unstable_cancelCallback,Jve=Oi.unstable_shouldYield,_B=Oi.unstable_requestPaint,RI=Oi.unstable_now,Qve=Oi.unstable_getCurrentPriorityLevel,hx=Oi.unstable_ImmediatePriority,BN=Oi.unstable_UserBlockingPriority,NN=Oi.unstable_NormalPriority,jN=Oi.unstable_LowPriority,UN=Oi.unstable_IdlePriority,rI={},ege=_B!==void 0?_B:function(){},Os=null,P0=null,iI=!1,xB=RI(),hn=1e4>xB?RI:function(){return RI()-xB};function ed(){switch(Qve()){case hx:return 99;case BN:return 98;case NN:return 97;case jN:return 96;case UN:return 95;default:throw Error(Je(332))}}function $N(e){switch(e){case 99:return hx;case 98:return BN;case 97:return NN;case 96:return jN;case 95:return UN;default:throw Error(Je(332))}}function Vc(e,t){return e=$N(e),Xve(e,t)}function wv(e,t,n){return e=$N(e),wE(e,t,n)}function Wo(){if(P0!==null){var e=P0;P0=null,MI(e)}VN()}function VN(){if(!iI&&Os!==null){iI=!0;var e=0;try{var t=Os;Vc(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),Os=null}catch(n){throw Os!==null&&(Os=Os.slice(e+1)),wE(hx,Wo),n}finally{iI=!1}}}var tge=Hc.ReactCurrentBatchConfig;function ho(e,t){if(e&&e.defaultProps){t=kr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var U0=nu(null),$0=null,jf=null,V0=null;function SE(){V0=jf=$0=null}function TE(e){var t=U0.current;Mr(U0),e.type._context._currentValue=t}function GN(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function Hf(e,t){$0=e,V0=jf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(fo=!0),e.firstContext=null)}function ka(e,t){if(V0!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(V0=e,t=1073741823),t={context:e,observedBits:t,next:null},jf===null){if($0===null)throw Error(Je(308));jf=t,$0.dependencies={lanes:0,firstContext:t,responders:null}}else jf=jf.next=t;return e._currentValue}var Nl=!1;function IE(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ZN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Wl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kl(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function bB(e,t){var n=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,n===u)){var c=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var _={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?c=a=_:a=a.next=_,n=n.next}while(n!==null);a===null?c=a=t:a=a.next=t}else c=a=t;n={baseState:u.baseState,firstBaseUpdate:c,lastBaseUpdate:a,shared:u.shared,effects:u.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Sv(e,t,n,u){var c=e.updateQueue;Nl=!1;var a=c.firstBaseUpdate,_=c.lastBaseUpdate,w=c.shared.pending;if(w!==null){c.shared.pending=null;var q=w,M=q.next;q.next=null,_===null?a=M:_.next=M,_=q;var O=e.alternate;if(O!==null){O=O.updateQueue;var k=O.lastBaseUpdate;k!==_&&(k===null?O.firstBaseUpdate=M:k.next=M,O.lastBaseUpdate=q)}}if(a!==null){k=c.baseState,_=0,O=M=q=null;do{w=a.lane;var $=a.eventTime;if((u&w)===w){O!==null&&(O=O.next={eventTime:$,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var fe=e,Pe=a;switch(w=t,$=n,Pe.tag){case 1:if(fe=Pe.payload,typeof fe=="function"){k=fe.call($,k,w);break e}k=fe;break e;case 3:fe.flags=fe.flags&-4097|64;case 0:if(fe=Pe.payload,w=typeof fe=="function"?fe.call($,k,w):fe,w==null)break e;k=kr({},k,w);break e;case 2:Nl=!0}}a.callback!==null&&(e.flags|=32,w=c.effects,w===null?c.effects=[a]:w.push(a))}else $={eventTime:$,lane:w,tag:a.tag,payload:a.payload,callback:a.callback,next:null},O===null?(M=O=$,q=k):O=O.next=$,_|=w;if(a=a.next,a===null){if(w=c.shared.pending,w===null)break;a=w.next,w.next=null,c.lastBaseUpdate=w,c.shared.pending=null}}while(!0);O===null&&(q=k),c.baseState=q,c.firstBaseUpdate=M,c.lastBaseUpdate=O,Cv|=_,e.lanes=_,e.memoizedState=k}}function wB(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],c=u.callback;if(c!==null){if(u.callback=null,u=n,typeof c!="function")throw Error(Je(191,c));c.call(u)}}}var HN=new rx.Component().refs;function G0(e,t,n,u){t=e.memoizedState,n=n(u,t),n=n==null?t:kr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var fx={isMounted:function(e){return(e=e._reactInternals)?Wc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var u=da(),c=Yl(e),a=Wl(u,c);a.payload=t,n!=null&&(a.callback=n),Kl(e,a),Xl(e,c,u)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var u=da(),c=Yl(e),a=Wl(u,c);a.tag=1,a.payload=t,n!=null&&(a.callback=n),Kl(e,a),Xl(e,c,u)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=da(),u=Yl(e),c=Wl(n,u);c.tag=2,t!=null&&(c.callback=t),Kl(e,c),Xl(e,u,n)}};function SB(e,t,n,u,c,a,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,a,_):t.prototype&&t.prototype.isPureReactComponent?!xv(n,u)||!xv(c,a):!0}function WN(e,t,n){var u=!1,c=tu,a=t.contextType;return typeof a=="object"&&a!==null?a=ka(a):(c=Gn(t)?$c:dn.current,u=t.contextTypes,a=(u=u!=null)?Qf(e,c):tu),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=fx,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=a),t}function TB(e,t,n,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,u),t.state!==e&&fx.enqueueReplaceState(t,t.state,null)}function OI(e,t,n,u){var c=e.stateNode;c.props=n,c.state=e.memoizedState,c.refs=HN,IE(e);var a=t.contextType;typeof a=="object"&&a!==null?c.context=ka(a):(a=Gn(t)?$c:dn.current,c.context=Qf(e,a)),Sv(e,n,c,u),c.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(G0(e,t,a,n),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&fx.enqueueReplaceState(c,c.state,null),Sv(e,n,c,u),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4)}var y0=Array.isArray;function $m(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Je(309));var u=n.stateNode}if(!u)throw Error(Je(147,e));var c=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===c?t.ref:(t=function(a){var _=u.refs;_===HN&&(_=u.refs={}),a===null?delete _[c]:_[c]=a},t._stringRef=c,t)}if(typeof e!="string")throw Error(Je(284));if(!n._owner)throw Error(Je(290,e))}return e}function _0(e,t){if(e.type!=="textarea")throw Error(Je(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function KN(e){function t(ne,re){if(e){var ae=ne.lastEffect;ae!==null?(ae.nextEffect=re,ne.lastEffect=re):ne.firstEffect=ne.lastEffect=re,re.nextEffect=null,re.flags=8}}function n(ne,re){if(!e)return null;for(;re!==null;)t(ne,re),re=re.sibling;return null}function u(ne,re){for(ne=new Map;re!==null;)re.key!==null?ne.set(re.key,re):ne.set(re.index,re),re=re.sibling;return ne}function c(ne,re){return ne=iu(ne,re),ne.index=0,ne.sibling=null,ne}function a(ne,re,ae){return ne.index=ae,e?(ae=ne.alternate,ae!==null?(ae=ae.index,ae<re?(ne.flags=2,re):ae):(ne.flags=2,re)):re}function _(ne){return e&&ne.alternate===null&&(ne.flags=2),ne}function w(ne,re,ae,_e){return re===null||re.tag!==6?(re=lI(ae,ne.mode,_e),re.return=ne,re):(re=c(re,ae),re.return=ne,re)}function q(ne,re,ae,_e){return re!==null&&re.elementType===ae.type?(_e=c(re,ae.props),_e.ref=$m(ne,re,ae),_e.return=ne,_e):(_e=R0(ae.type,ae.key,ae.props,null,ne.mode,_e),_e.ref=$m(ne,re,ae),_e.return=ne,_e)}function M(ne,re,ae,_e){return re===null||re.tag!==4||re.stateNode.containerInfo!==ae.containerInfo||re.stateNode.implementation!==ae.implementation?(re=uI(ae,ne.mode,_e),re.return=ne,re):(re=c(re,ae.children||[]),re.return=ne,re)}function O(ne,re,ae,_e,Te){return re===null||re.tag!==7?(re=Xf(ae,ne.mode,_e,Te),re.return=ne,re):(re=c(re,ae),re.return=ne,re)}function k(ne,re,ae){if(typeof re=="string"||typeof re=="number")return re=lI(""+re,ne.mode,ae),re.return=ne,re;if(typeof re=="object"&&re!==null){switch(re.$$typeof){case Ym:return ae=R0(re.type,re.key,re.props,null,ne.mode,ae),ae.ref=$m(ne,null,re),ae.return=ne,ae;case zc:return re=uI(re,ne.mode,ae),re.return=ne,re}if(y0(re)||Fm(re))return re=Xf(re,ne.mode,ae,null),re.return=ne,re;_0(ne,re)}return null}function $(ne,re,ae,_e){var Te=re!==null?re.key:null;if(typeof ae=="string"||typeof ae=="number")return Te!==null?null:w(ne,re,""+ae,_e);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case Ym:return ae.key===Te?ae.type===jl?O(ne,re,ae.props.children,_e,Te):q(ne,re,ae,_e):null;case zc:return ae.key===Te?M(ne,re,ae,_e):null}if(y0(ae)||Fm(ae))return Te!==null?null:O(ne,re,ae,_e,null);_0(ne,ae)}return null}function fe(ne,re,ae,_e,Te){if(typeof _e=="string"||typeof _e=="number")return ne=ne.get(ae)||null,w(re,ne,""+_e,Te);if(typeof _e=="object"&&_e!==null){switch(_e.$$typeof){case Ym:return ne=ne.get(_e.key===null?ae:_e.key)||null,_e.type===jl?O(re,ne,_e.props.children,Te,_e.key):q(re,ne,_e,Te);case zc:return ne=ne.get(_e.key===null?ae:_e.key)||null,M(re,ne,_e,Te)}if(y0(_e)||Fm(_e))return ne=ne.get(ae)||null,O(re,ne,_e,Te,null);_0(re,_e)}return null}function Pe(ne,re,ae,_e){for(var Te=null,nt=null,Ve=re,ut=re=0,St=null;Ve!==null&&ut<ae.length;ut++){Ve.index>ut?(St=Ve,Ve=null):St=Ve.sibling;var xt=$(ne,Ve,ae[ut],_e);if(xt===null){Ve===null&&(Ve=St);break}e&&Ve&&xt.alternate===null&&t(ne,Ve),re=a(xt,re,ut),nt===null?Te=xt:nt.sibling=xt,nt=xt,Ve=St}if(ut===ae.length)return n(ne,Ve),Te;if(Ve===null){for(;ut<ae.length;ut++)Ve=k(ne,ae[ut],_e),Ve!==null&&(re=a(Ve,re,ut),nt===null?Te=Ve:nt.sibling=Ve,nt=Ve);return Te}for(Ve=u(ne,Ve);ut<ae.length;ut++)St=fe(Ve,ne,ut,ae[ut],_e),St!==null&&(e&&St.alternate!==null&&Ve.delete(St.key===null?ut:St.key),re=a(St,re,ut),nt===null?Te=St:nt.sibling=St,nt=St);return e&&Ve.forEach(function(Jr){return t(ne,Jr)}),Te}function Se(ne,re,ae,_e){var Te=Fm(ae);if(typeof Te!="function")throw Error(Je(150));if(ae=Te.call(ae),ae==null)throw Error(Je(151));for(var nt=Te=null,Ve=re,ut=re=0,St=null,xt=ae.next();Ve!==null&&!xt.done;ut++,xt=ae.next()){Ve.index>ut?(St=Ve,Ve=null):St=Ve.sibling;var Jr=$(ne,Ve,xt.value,_e);if(Jr===null){Ve===null&&(Ve=St);break}e&&Ve&&Jr.alternate===null&&t(ne,Ve),re=a(Jr,re,ut),nt===null?Te=Jr:nt.sibling=Jr,nt=Jr,Ve=St}if(xt.done)return n(ne,Ve),Te;if(Ve===null){for(;!xt.done;ut++,xt=ae.next())xt=k(ne,xt.value,_e),xt!==null&&(re=a(xt,re,ut),nt===null?Te=xt:nt.sibling=xt,nt=xt);return Te}for(Ve=u(ne,Ve);!xt.done;ut++,xt=ae.next())xt=fe(Ve,ne,ut,xt.value,_e),xt!==null&&(e&&xt.alternate!==null&&Ve.delete(xt.key===null?ut:xt.key),re=a(xt,re,ut),nt===null?Te=xt:nt.sibling=xt,nt=xt);return e&&Ve.forEach(function(mn){return t(ne,mn)}),Te}return function(ne,re,ae,_e){var Te=typeof ae=="object"&&ae!==null&&ae.type===jl&&ae.key===null;Te&&(ae=ae.props.children);var nt=typeof ae=="object"&&ae!==null;if(nt)switch(ae.$$typeof){case Ym:e:{for(nt=ae.key,Te=re;Te!==null;){if(Te.key===nt){switch(Te.tag){case 7:if(ae.type===jl){n(ne,Te.sibling),re=c(Te,ae.props.children),re.return=ne,ne=re;break e}break;default:if(Te.elementType===ae.type){n(ne,Te.sibling),re=c(Te,ae.props),re.ref=$m(ne,Te,ae),re.return=ne,ne=re;break e}}n(ne,Te);break}else t(ne,Te);Te=Te.sibling}ae.type===jl?(re=Xf(ae.props.children,ne.mode,_e,ae.key),re.return=ne,ne=re):(_e=R0(ae.type,ae.key,ae.props,null,ne.mode,_e),_e.ref=$m(ne,re,ae),_e.return=ne,ne=_e)}return _(ne);case zc:e:{for(Te=ae.key;re!==null;){if(re.key===Te){if(re.tag===4&&re.stateNode.containerInfo===ae.containerInfo&&re.stateNode.implementation===ae.implementation){n(ne,re.sibling),re=c(re,ae.children||[]),re.return=ne,ne=re;break e}else{n(ne,re);break}}else t(ne,re);re=re.sibling}re=uI(ae,ne.mode,_e),re.return=ne,ne=re}return _(ne)}if(typeof ae=="string"||typeof ae=="number")return ae=""+ae,re!==null&&re.tag===6?(n(ne,re.sibling),re=c(re,ae),re.return=ne,ne=re):(n(ne,re),re=lI(ae,ne.mode,_e),re.return=ne,ne=re),_(ne);if(y0(ae))return Pe(ne,re,ae,_e);if(Fm(ae))return Se(ne,re,ae,_e);if(nt&&_0(ne,ae),typeof ae=="undefined"&&!Te)switch(ne.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Je(152,Uf(ne.type)||"Component"))}return n(ne,re)}}var Z0=KN(!0),YN=KN(!1),Av={},Zo=nu(Av),Tv=nu(Av),Iv=nu(Av);function Nc(e){if(e===Av)throw Error(Je(174));return e}function kI(e,t){switch(Zr(Iv,t),Zr(Tv,e),Zr(Zo,Av),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:yI(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=yI(t,e)}Mr(Zo),Zr(Zo,t)}function td(){Mr(Zo),Mr(Tv),Mr(Iv)}function IB(e){Nc(Iv.current);var t=Nc(Zo.current),n=yI(t,e.type);t!==n&&(Zr(Tv,e),Zr(Zo,n))}function EE(e){Tv.current===e&&(Mr(Zo),Mr(Tv))}var Gr=nu(0);function H0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&64)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ds=null,Vl=null,Ho=!1;function XN(e,t){var n=Ra(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function EB(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1}}function DI(e){if(Ho){var t=Vl;if(t){var n=t;if(!EB(e,t)){if(t=Zf(n.nextSibling),!t||!EB(e,t)){e.flags=e.flags&-1025|2,Ho=!1,Ds=e;return}XN(Ds,n)}Ds=e,Vl=Zf(t.firstChild)}else e.flags=e.flags&-1025|2,Ho=!1,Ds=e}}function qB(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ds=e}function x0(e){if(e!==Ds)return!1;if(!Ho)return qB(e),Ho=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!AI(t,e.memoizedProps))for(t=Vl;t;)XN(e,t),t=Zf(t.nextSibling);if(qB(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Je(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Vl=Zf(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Vl=null}}else Vl=Ds?Zf(e.stateNode.nextSibling):null;return!0}function nI(){Vl=Ds=null,Ho=!1}var Wf=[];function qE(){for(var e=0;e<Wf.length;e++)Wf[e]._workInProgressVersionPrimary=null;Wf.length=0}var lv=Hc.ReactCurrentDispatcher,Oa=Hc.ReactCurrentBatchConfig,Ev=0,ni=null,cn=null,Gi=null,W0=!1,uv=!1;function Un(){throw Error(Je(321))}function PE(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ma(e[n],t[n]))return!1;return!0}function AE(e,t,n,u,c,a){if(Ev=a,ni=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,lv.current=e===null||e.memoizedState===null?ige:nge,e=n(u,c),uv){a=0;do{if(uv=!1,!(25>a))throw Error(Je(301));a+=1,Gi=cn=null,t.updateQueue=null,lv.current=age,e=n(u,c)}while(uv)}if(lv.current=J0,t=cn!==null&&cn.next!==null,Ev=0,Gi=cn=ni=null,W0=!1,t)throw Error(Je(300));return e}function jc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gi===null?ni.memoizedState=Gi=e:Gi=Gi.next=e,Gi}function Kc(){if(cn===null){var e=ni.alternate;e=e!==null?e.memoizedState:null}else e=cn.next;var t=Gi===null?ni.memoizedState:Gi.next;if(t!==null)Gi=t,cn=e;else{if(e===null)throw Error(Je(310));cn=e,e={memoizedState:cn.memoizedState,baseState:cn.baseState,baseQueue:cn.baseQueue,queue:cn.queue,next:null},Gi===null?ni.memoizedState=Gi=e:Gi=Gi.next=e}return Gi}function Vo(e,t){return typeof t=="function"?t(e):t}function Vm(e){var t=Kc(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=e;var u=cn,c=u.baseQueue,a=n.pending;if(a!==null){if(c!==null){var _=c.next;c.next=a.next,a.next=_}u.baseQueue=c=a,n.pending=null}if(c!==null){c=c.next,u=u.baseState;var w=_=a=null,q=c;do{var M=q.lane;if((Ev&M)===M)w!==null&&(w=w.next={lane:0,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null}),u=q.eagerReducer===e?q.eagerState:e(u,q.action);else{var O={lane:M,action:q.action,eagerReducer:q.eagerReducer,eagerState:q.eagerState,next:null};w===null?(_=w=O,a=u):w=w.next=O,ni.lanes|=M,Cv|=M}q=q.next}while(q!==null&&q!==c);w===null?a=u:w.next=_,Ma(u,t.memoizedState)||(fo=!0),t.memoizedState=u,t.baseState=a,t.baseQueue=w,n.lastRenderedState=u}return[t.memoizedState,n.dispatch]}function Gm(e){var t=Kc(),n=t.queue;if(n===null)throw Error(Je(311));n.lastRenderedReducer=e;var u=n.dispatch,c=n.pending,a=t.memoizedState;if(c!==null){n.pending=null;var _=c=c.next;do a=e(a,_.action),_=_.next;while(_!==c);Ma(a,t.memoizedState)||(fo=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,u]}function PB(e,t,n){var u=t._getVersion;u=u(t._source);var c=t._workInProgressVersionPrimary;if(c!==null?e=c===u:(e=e.mutableReadLanes,(e=(Ev&e)===e)&&(t._workInProgressVersionPrimary=u,Wf.push(t))),e)return n(t._source);throw Wf.push(t),Error(Je(350))}function JN(e,t,n,u){var c=qn;if(c===null)throw Error(Je(349));var a=t._getVersion,_=a(t._source),w=lv.current,q=w.useState(function(){return PB(c,t,n)}),M=q[1],O=q[0];q=Gi;var k=e.memoizedState,$=k.refs,fe=$.getSnapshot,Pe=k.source;k=k.subscribe;var Se=ni;return e.memoizedState={refs:$,source:t,subscribe:u},w.useEffect(function(){$.getSnapshot=n,$.setSnapshot=M;var ne=a(t._source);if(!Ma(_,ne)){ne=n(t._source),Ma(O,ne)||(M(ne),ne=Yl(Se),c.mutableReadLanes|=ne&c.pendingLanes),ne=c.mutableReadLanes,c.entangledLanes|=ne;for(var re=c.entanglements,ae=ne;0<ae;){var _e=31-eu(ae),Te=1<<_e;re[_e]|=ne,ae&=~Te}}},[n,t,u]),w.useEffect(function(){return u(t._source,function(){var ne=$.getSnapshot,re=$.setSnapshot;try{re(ne(t._source));var ae=Yl(Se);c.mutableReadLanes|=ae&c.pendingLanes}catch(_e){re(function(){throw _e})}})},[t,u]),Ma(fe,n)&&Ma(Pe,t)&&Ma(k,u)||(e={pending:null,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:O},e.dispatch=M=RE.bind(null,ni,e),q.queue=e,q.baseQueue=null,O=PB(c,t,n),q.memoizedState=q.baseState=O),O}function QN(e,t,n){var u=Kc();return JN(u,e,t,n)}function Zm(e){var t=jc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:Vo,lastRenderedState:e},e=e.dispatch=RE.bind(null,ni,e),[t.memoizedState,e]}function K0(e,t,n,u){return e={tag:e,create:t,destroy:n,deps:u,next:null},t=ni.updateQueue,t===null?(t={lastEffect:null},ni.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(u=n.next,n.next=e,e.next=u,t.lastEffect=e)),e}function AB(e){var t=jc();return e={current:e},t.memoizedState=e}function Y0(){return Kc().memoizedState}function LI(e,t,n,u){var c=jc();ni.flags|=e,c.memoizedState=K0(1|t,n,void 0,u===void 0?null:u)}function CE(e,t,n,u){var c=Kc();u=u===void 0?null:u;var a=void 0;if(cn!==null){var _=cn.memoizedState;if(a=_.destroy,u!==null&&PE(u,_.deps)){K0(t,n,a,u);return}}ni.flags|=e,c.memoizedState=K0(1|t,n,a,u)}function CB(e,t){return LI(516,4,e,t)}function X0(e,t){return CE(516,4,e,t)}function e3(e,t){return CE(4,2,e,t)}function t3(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function r3(e,t,n){return n=n!=null?n.concat([e]):null,CE(4,2,t3.bind(null,t,e),n)}function ME(){}function i3(e,t){var n=Kc();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&PE(t,u[1])?u[0]:(n.memoizedState=[e,t],e)}function n3(e,t){var n=Kc();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&PE(t,u[1])?u[0]:(e=e(),n.memoizedState=[e,t],e)}function rge(e,t){var n=ed();Vc(98>n?98:n,function(){e(!0)}),Vc(97<n?97:n,function(){var u=Oa.transition;Oa.transition=1;try{e(!1),t()}finally{Oa.transition=u}})}function RE(e,t,n){var u=da(),c=Yl(e),a={lane:c,action:n,eagerReducer:null,eagerState:null,next:null},_=t.pending;if(_===null?a.next=a:(a.next=_.next,_.next=a),t.pending=a,_=e.alternate,e===ni||_!==null&&_===ni)uv=W0=!0;else{if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var w=t.lastRenderedState,q=_(w,n);if(a.eagerReducer=_,a.eagerState=q,Ma(q,w))return}catch(M){}finally{}Xl(e,c,u)}}var J0={readContext:ka,useCallback:Un,useContext:Un,useEffect:Un,useImperativeHandle:Un,useLayoutEffect:Un,useMemo:Un,useReducer:Un,useRef:Un,useState:Un,useDebugValue:Un,useDeferredValue:Un,useTransition:Un,useMutableSource:Un,useOpaqueIdentifier:Un,unstable_isNewReconciler:!1},ige={readContext:ka,useCallback:function(e,t){return jc().memoizedState=[e,t===void 0?null:t],e},useContext:ka,useEffect:CB,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,LI(4,2,t3.bind(null,t,e),n)},useLayoutEffect:function(e,t){return LI(4,2,e,t)},useMemo:function(e,t){var n=jc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var u=jc();return t=n!==void 0?n(t):t,u.memoizedState=u.baseState=t,e=u.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=RE.bind(null,ni,e),[u.memoizedState,e]},useRef:AB,useState:Zm,useDebugValue:ME,useDeferredValue:function(e){var t=Zm(e),n=t[0],u=t[1];return CB(function(){var c=Oa.transition;Oa.transition=1;try{u(e)}finally{Oa.transition=c}},[e]),n},useTransition:function(){var e=Zm(!1),t=e[0];return e=rge.bind(null,e[1]),AB(e),[e,t]},useMutableSource:function(e,t,n){var u=jc();return u.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},JN(u,e,t,n)},useOpaqueIdentifier:function(){if(Ho){var e=!1,t=Yve(function(){throw e||(e=!0,n("r:"+(tI++).toString(36))),Error(Je(355))}),n=Zm(t)[1];return(ni.mode&2)===0&&(ni.flags|=516,K0(5,function(){n("r:"+(tI++).toString(36))},void 0,null)),t}return t="r:"+(tI++).toString(36),Zm(t),t},unstable_isNewReconciler:!1},nge={readContext:ka,useCallback:i3,useContext:ka,useEffect:X0,useImperativeHandle:r3,useLayoutEffect:e3,useMemo:n3,useReducer:Vm,useRef:Y0,useState:function(){return Vm(Vo)},useDebugValue:ME,useDeferredValue:function(e){var t=Vm(Vo),n=t[0],u=t[1];return X0(function(){var c=Oa.transition;Oa.transition=1;try{u(e)}finally{Oa.transition=c}},[e]),n},useTransition:function(){var e=Vm(Vo)[0];return[Y0().current,e]},useMutableSource:QN,useOpaqueIdentifier:function(){return Vm(Vo)[0]},unstable_isNewReconciler:!1},age={readContext:ka,useCallback:i3,useContext:ka,useEffect:X0,useImperativeHandle:r3,useLayoutEffect:e3,useMemo:n3,useReducer:Gm,useRef:Y0,useState:function(){return Gm(Vo)},useDebugValue:ME,useDeferredValue:function(e){var t=Gm(Vo),n=t[0],u=t[1];return X0(function(){var c=Oa.transition;Oa.transition=1;try{u(e)}finally{Oa.transition=c}},[e]),n},useTransition:function(){var e=Gm(Vo)[0];return[Y0().current,e]},useMutableSource:QN,useOpaqueIdentifier:function(){return Gm(Vo)[0]},unstable_isNewReconciler:!1},oge=Hc.ReactCurrentOwner,fo=!1;function $n(e,t,n,u){t.child=e===null?YN(t,null,n,u):Z0(t,e.child,n,u)}function MB(e,t,n,u,c){n=n.render;var a=t.ref;return Hf(t,c),u=AE(e,t,n,u,a,c),e!==null&&!fo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Ls(e,t,c)):(t.flags|=1,$n(e,t,u,c),t.child)}function RB(e,t,n,u,c,a){if(e===null){var _=n.type;return typeof _=="function"&&!FE(_)&&_.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=_,a3(e,t,_,u,c,a)):(e=R0(n.type,null,u,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}return _=e.child,(c&a)===0&&(c=_.memoizedProps,n=n.compare,n=n!==null?n:xv,n(c,u)&&e.ref===t.ref)?Ls(e,t,a):(t.flags|=1,e=iu(_,u),e.ref=t.ref,e.return=t,t.child=e)}function a3(e,t,n,u,c,a){if(e!==null&&xv(e.memoizedProps,u)&&e.ref===t.ref)if(fo=!1,(a&c)!==0)(e.flags&16384)!==0&&(fo=!0);else return t.lanes=e.lanes,Ls(e,t,a);return zI(e,t,n,u,a)}function aI(e,t,n){var u=t.pendingProps,c=u.children,a=e!==null?e.memoizedState:null;if(u.mode==="hidden"||u.mode==="unstable-defer-without-hiding"){if((t.mode&4)===0)t.memoizedState={baseLanes:0},w0(t,n);else if((n&1073741824)!==0)t.memoizedState={baseLanes:0},w0(t,a!==null?a.baseLanes:n);else return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},w0(t,e),null;}else a!==null?(u=a.baseLanes|n,t.memoizedState=null):u=n,w0(t,u);return $n(e,t,c,n),t.child}function o3(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function zI(e,t,n,u,c){var a=Gn(n)?$c:dn.current;return a=Qf(t,a),Hf(t,c),n=AE(e,t,n,u,a,c),e!==null&&!fo?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~c,Ls(e,t,c)):(t.flags|=1,$n(e,t,n,c),t.child)}function OB(e,t,n,u,c){if(Gn(n)){var a=!0;q0(t)}else a=!1;if(Hf(t,c),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),WN(t,n,u),OI(t,n,u,c),u=!0;else if(e===null){var _=t.stateNode,w=t.memoizedProps;_.props=w;var q=_.context,M=n.contextType;typeof M=="object"&&M!==null?M=ka(M):(M=Gn(n)?$c:dn.current,M=Qf(t,M));var O=n.getDerivedStateFromProps,k=typeof O=="function"||typeof _.getSnapshotBeforeUpdate=="function";k||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==u||q!==M)&&TB(t,_,u,M),Nl=!1;var $=t.memoizedState;_.state=$,Sv(t,u,_,c),q=t.memoizedState,w!==u||$!==q||Vn.current||Nl?(typeof O=="function"&&(G0(t,n,O,u),q=t.memoizedState),(w=Nl||SB(t,n,w,u,$,q,M))?(k||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(t.flags|=4)):(typeof _.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=u,t.memoizedState=q),_.props=u,_.state=q,_.context=M,u=w):(typeof _.componentDidMount=="function"&&(t.flags|=4),u=!1)}else{_=t.stateNode,ZN(e,t),w=t.memoizedProps,M=t.type===t.elementType?w:ho(t.type,w),_.props=M,k=t.pendingProps,$=_.context,q=n.contextType,typeof q=="object"&&q!==null?q=ka(q):(q=Gn(n)?$c:dn.current,q=Qf(t,q));var fe=n.getDerivedStateFromProps;(O=typeof fe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(w!==k||$!==q)&&TB(t,_,u,q),Nl=!1,$=t.memoizedState,_.state=$,Sv(t,u,_,c);var Pe=t.memoizedState;w!==k||$!==Pe||Vn.current||Nl?(typeof fe=="function"&&(G0(t,n,fe,u),Pe=t.memoizedState),(M=Nl||SB(t,n,M,u,$,Pe,q))?(O||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,Pe,q),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,Pe,q)),typeof _.componentDidUpdate=="function"&&(t.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof _.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=256),t.memoizedProps=u,t.memoizedState=Pe),_.props=u,_.state=Pe,_.context=q,u=M):(typeof _.componentDidUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||w===e.memoizedProps&&$===e.memoizedState||(t.flags|=256),u=!1)}return FI(e,t,n,u,a,c)}function FI(e,t,n,u,c,a){o3(e,t);var _=(t.flags&64)!==0;if(!u&&!_)return c&&yB(t,n,!1),Ls(e,t,a);u=t.stateNode,oge.current=t;var w=_&&typeof n.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&_?(t.child=Z0(t,e.child,null,a),t.child=Z0(t,null,w,a)):$n(e,t,w,a),t.memoizedState=u.state,c&&yB(t,n,!0),t.child}function kB(e){var t=e.stateNode;t.pendingContext?gB(e,t.pendingContext,t.pendingContext!==t.context):t.context&&gB(e,t.context,!1),kI(e,t.containerInfo)}var b0={dehydrated:null,retryLane:0};function DB(e,t,n){var u=t.pendingProps,c=Gr.current,a=!1,_;return(_=(t.flags&64)!==0)||(_=e!==null&&e.memoizedState===null?!1:(c&2)!==0),_?(a=!0,t.flags&=-65):e!==null&&e.memoizedState===null||u.fallback===void 0||u.unstable_avoidThisFallback===!0||(c|=1),Zr(Gr,c&1),e===null?(u.fallback!==void 0&&DI(t),e=u.children,c=u.fallback,a?(e=LB(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=b0,e):typeof u.unstable_expectedLoadTime=="number"?(e=LB(t,e,c,n),t.child.memoizedState={baseLanes:n},t.memoizedState=b0,t.lanes=33554432,e):(n=BE({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?a?(u=FB(e,t,u.children,u.fallback,n),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=b0,u):(n=zB(e,t,u.children,n),t.memoizedState=null,n):a?(u=FB(e,t,u.children,u.fallback,n),a=t.child,c=e.child.memoizedState,a.memoizedState=c===null?{baseLanes:n}:{baseLanes:c.baseLanes|n},a.childLanes=e.childLanes&~n,t.memoizedState=b0,u):(n=zB(e,t,u.children,n),t.memoizedState=null,n)}function LB(e,t,n,u){var c=e.mode,a=e.child;return t={mode:"hidden",children:t},(c&2)===0&&a!==null?(a.childLanes=0,a.pendingProps=t):a=BE(t,c,0,null),n=Xf(n,c,u,null),a.return=e,n.return=e,a.sibling=n,e.child=a,n}function zB(e,t,n,u){var c=e.child;return e=c.sibling,n=iu(c,{mode:"visible",children:n}),(t.mode&2)===0&&(n.lanes=u),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function FB(e,t,n,u,c){var a=t.mode,_=e.child;e=_.sibling;var w={mode:"hidden",children:n};return(a&2)===0&&t.child!==_?(n=t.child,n.childLanes=0,n.pendingProps=w,_=n.lastEffect,_!==null?(t.firstEffect=n.firstEffect,t.lastEffect=_,_.nextEffect=null):t.firstEffect=t.lastEffect=null):n=iu(_,w),e!==null?u=iu(e,u):(u=Xf(u,a,c,null),u.flags|=2),u.return=t,n.return=t,n.sibling=u,t.child=n,u}function BB(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),GN(e.return,t)}function oI(e,t,n,u,c,a){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:n,tailMode:c,lastEffect:a}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=n,_.tailMode=c,_.lastEffect=a)}function NB(e,t,n){var u=t.pendingProps,c=u.revealOrder,a=u.tail;if($n(e,t,u.children,n),u=Gr.current,(u&2)!==0)u=u&1|2,t.flags|=64;else{if(e!==null&&(e.flags&64)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&BB(e,n);else if(e.tag===19)BB(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Zr(Gr,u),(t.mode&2)===0)t.memoizedState=null;else switch(c){case"forwards":for(n=t.child,c=null;n!==null;)e=n.alternate,e!==null&&H0(e)===null&&(c=n),n=n.sibling;n=c,n===null?(c=t.child,t.child=null):(c=n.sibling,n.sibling=null),oI(t,!1,c,n,a,t.lastEffect);break;case"backwards":for(n=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&H0(e)===null){t.child=c;break}e=c.sibling,c.sibling=n,n=c,c=e}oI(t,!0,n,null,a,t.lastEffect);break;case"together":oI(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null}return t.child}function Ls(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Cv|=t.lanes,(n&t.childLanes)!==0){if(e!==null&&t.child!==e.child)throw Error(Je(153));if(t.child!==null){for(e=t.child,n=iu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=iu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var s3,BI,l3,u3;s3=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};BI=function(){};l3=function(e,t,n,u){var c=e.memoizedProps;if(c!==u){e=t.stateNode,Nc(Zo.current);var a=null;switch(n){case"input":c=fI(e,c),u=fI(e,u),a=[];break;case"option":c=mI(e,c),u=mI(e,u),a=[];break;case"select":c=kr({},c,{value:void 0}),u=kr({},u,{value:void 0}),a=[];break;case"textarea":c=vI(e,c),u=vI(e,u),a=[];break;default:typeof c.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=B0)}_I(n,u);var _;n=null;for(M in c)if(!u.hasOwnProperty(M)&&c.hasOwnProperty(M)&&c[M]!=null)if(M==="style"){var w=c[M];for(_ in w)w.hasOwnProperty(_)&&(n||(n={}),n[_]="")}else M!=="dangerouslySetInnerHTML"&&M!=="children"&&M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(dv.hasOwnProperty(M)?a||(a=[]):(a=a||[]).push(M,null));for(M in u){var q=u[M];if(w=c!=null?c[M]:void 0,u.hasOwnProperty(M)&&q!==w&&(q!=null||w!=null))if(M==="style"){if(w){for(_ in w)!w.hasOwnProperty(_)||q&&q.hasOwnProperty(_)||(n||(n={}),n[_]="");for(_ in q)q.hasOwnProperty(_)&&w[_]!==q[_]&&(n||(n={}),n[_]=q[_])}else n||(a||(a=[]),a.push(M,n)),n=q;}else M==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,w=w?w.__html:void 0,q!=null&&w!==q&&(a=a||[]).push(M,q)):M==="children"?typeof q!="string"&&typeof q!="number"||(a=a||[]).push(M,""+q):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&(dv.hasOwnProperty(M)?(q!=null&&M==="onScroll"&&Cr("scroll",e),a||w===q||(a=[])):typeof q=="object"&&q!==null&&q.$$typeof===aE?q.toString():(a=a||[]).push(M,q))}n&&(a=a||[]).push("style",n);var M=a;(t.updateQueue=M)&&(t.flags|=4)}};u3=function(e,t,n,u){n!==u&&(t.flags|=4)};function Hm(e,t){if(!Ho)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var u=null;n!==null;)n.alternate!==null&&(u=n),n=n.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null}}function sge(e,t,n){var u=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Gn(t.type)&&j0(),null;case 3:return td(),Mr(Vn),Mr(dn),qE(),u=t.stateNode,u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(x0(t)?t.flags|=4:u.hydrate||(t.flags|=256)),BI(t),null;case 5:EE(t);var c=Nc(Iv.current);if(n=t.type,e!==null&&t.stateNode!=null)l3(e,t,n,u,c),e.ref!==t.ref&&(t.flags|=128);else{if(!u){if(t.stateNode===null)throw Error(Je(166));return null}if(e=Nc(Zo.current),x0(t)){u=t.stateNode,n=t.type;var a=t.memoizedProps;switch(u[$l]=t,u[N0]=a,n){case"dialog":Cr("cancel",u),Cr("close",u);break;case"iframe":case"object":case"embed":Cr("load",u);break;case"video":case"audio":for(e=0;e<Jm.length;e++)Cr(Jm[e],u);break;case"source":Cr("error",u);break;case"img":case"image":case"link":Cr("error",u),Cr("load",u);break;case"details":Cr("toggle",u);break;case"input":UF(u,a),Cr("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!a.multiple},Cr("invalid",u);break;case"textarea":VF(u,a),Cr("invalid",u)}_I(n,a),e=null;for(var _ in a)a.hasOwnProperty(_)&&(c=a[_],_==="children"?typeof c=="string"?u.textContent!==c&&(e=["children",c]):typeof c=="number"&&u.textContent!==""+c&&(e=["children",""+c]):dv.hasOwnProperty(_)&&c!=null&&_==="onScroll"&&Cr("scroll",u));switch(n){case"input":h0(u),$F(u,a,!0);break;case"textarea":h0(u),GF(u);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(u.onclick=B0)}u=e,t.updateQueue=u,u!==null&&(t.flags|=4)}else{switch(_=c.nodeType===9?c:c.ownerDocument,e===gI.html&&(e=rN(n)),e===gI.html?n==="script"?(e=_.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=_.createElement(n,{is:u.is}):(e=_.createElement(n),n==="select"&&(_=e,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):e=_.createElementNS(e,n),e[$l]=t,e[N0]=u,s3(e,t,!1,!1),t.stateNode=e,_=xI(n,u),n){case"dialog":Cr("cancel",e),Cr("close",e),c=u;break;case"iframe":case"object":case"embed":Cr("load",e),c=u;break;case"video":case"audio":for(c=0;c<Jm.length;c++)Cr(Jm[c],e);c=u;break;case"source":Cr("error",e),c=u;break;case"img":case"image":case"link":Cr("error",e),Cr("load",e),c=u;break;case"details":Cr("toggle",e),c=u;break;case"input":UF(e,u),c=fI(e,u),Cr("invalid",e);break;case"option":c=mI(e,u);break;case"select":e._wrapperState={wasMultiple:!!u.multiple},c=kr({},u,{value:void 0}),Cr("invalid",e);break;case"textarea":VF(e,u),c=vI(e,u),Cr("invalid",e);break;default:c=u}_I(n,c);var w=c;for(a in w)if(w.hasOwnProperty(a)){var q=w[a];a==="style"?aN(e,q):a==="dangerouslySetInnerHTML"?(q=q?q.__html:void 0,q!=null&&iN(e,q)):a==="children"?typeof q=="string"?(n!=="textarea"||q!=="")&&pv(e,q):typeof q=="number"&&pv(e,""+q):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(dv.hasOwnProperty(a)?q!=null&&a==="onScroll"&&Cr("scroll",e):q!=null&&QI(e,a,q,_))}switch(n){case"input":h0(e),$F(e,u,!1);break;case"textarea":h0(e),GF(e);break;case"option":u.value!=null&&e.setAttribute("value",""+Ql(u.value));break;case"select":e.multiple=!!u.multiple,a=u.value,a!=null?$f(e,!!u.multiple,a,!1):u.defaultValue!=null&&$f(e,!!u.multiple,u.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=B0)}LN(n,u)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)u3(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(Je(166));n=Nc(Iv.current),Nc(Zo.current),x0(t)?(u=t.stateNode,n=t.memoizedProps,u[$l]=t,u.nodeValue!==n&&(t.flags|=4)):(u=(n.nodeType===9?n:n.ownerDocument).createTextNode(u),u[$l]=t,t.stateNode=u)}return null;case 13:return Mr(Gr),u=t.memoizedState,(t.flags&64)!==0?(t.lanes=n,t):(u=u!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&x0(t):n=e.memoizedState!==null,u&&!n&&(t.mode&2)!==0&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||(Gr.current&1)!==0?Zi===0&&(Zi=3):((Zi===0||Zi===3)&&(Zi=4),qn===null||(Cv&134217727)===0&&(ad&134217727)===0||Kf(qn,fn))),(u||n)&&(t.flags|=4),null);case 4:return td(),BI(t),e===null&&ON(t.stateNode.containerInfo),null;case 10:return TE(t),null;case 17:return Gn(t.type)&&j0(),null;case 19:if(Mr(Gr),u=t.memoizedState,u===null)return null;if(a=(t.flags&64)!==0,_=u.rendering,_===null){if(a)Hm(u,!1);else{if(Zi!==0||e!==null&&(e.flags&64)!==0)for(e=t.child;e!==null;){if(_=H0(e),_!==null){for(t.flags|=64,Hm(u,!1),a=_.updateQueue,a!==null&&(t.updateQueue=a,t.flags|=4),u.lastEffect===null&&(t.firstEffect=null),t.lastEffect=u.lastEffect,u=n,n=t.child;n!==null;)a=n,e=u,a.flags&=2,a.nextEffect=null,a.firstEffect=null,a.lastEffect=null,_=a.alternate,_===null?(a.childLanes=0,a.lanes=e,a.child=null,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=_.childLanes,a.lanes=_.lanes,a.child=_.child,a.memoizedProps=_.memoizedProps,a.memoizedState=_.memoizedState,a.updateQueue=_.updateQueue,a.type=_.type,e=_.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Zr(Gr,Gr.current&1|2),t.child}e=e.sibling}u.tail!==null&&hn()>GI&&(t.flags|=64,a=!0,Hm(u,!1),t.lanes=33554432)}}else{if(!a)if(e=H0(_),e!==null){if(t.flags|=64,a=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Hm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!Ho)return t=t.lastEffect=u.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*hn()-u.renderingStartTime>GI&&n!==1073741824&&(t.flags|=64,a=!0,Hm(u,!1),t.lanes=33554432);u.isBackwards?(_.sibling=t.child,t.child=_):(n=u.last,n!==null?n.sibling=_:t.child=_,u.last=_)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.lastEffect=t.lastEffect,u.renderingStartTime=hn(),n.sibling=null,t=Gr.current,Zr(Gr,a?t&1|2:t&1),n):null;case 23:case 24:return zE(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&u.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null}throw Error(Je(156,t.tag))}function lge(e){switch(e.tag){case 1:Gn(e.type)&&j0();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(td(),Mr(Vn),Mr(dn),qE(),t=e.flags,(t&64)!==0)throw Error(Je(285));return e.flags=t&-4097|64,e;case 5:return EE(e),null;case 13:return Mr(Gr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return Mr(Gr),null;case 4:return td(),null;case 10:return TE(e),null;case 23:case 24:return zE(),null;default:return null}}function OE(e,t){try{var n="",u=t;do n+=Ume(u),u=u.return;while(u);var c=n}catch(a){c=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:c}}function NI(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var uge=typeof WeakMap=="function"?WeakMap:Map;function c3(e,t,n){n=Wl(-1,n),n.tag=3,n.payload={element:null};var u=t.value;return n.callback=function(){ex||(ex=!0,ZI=u),NI(e,t)},n}function h3(e,t,n){n=Wl(-1,n),n.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var c=t.value;n.payload=function(){return NI(e,t),u(c)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){typeof u!="function"&&(Go===null?Go=new Set([this]):Go.add(this),NI(e,t));var _=t.stack;this.componentDidCatch(t.value,{componentStack:_!==null?_:""})}),n}var cge=typeof WeakSet=="function"?WeakSet:Set;function jB(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Jl(e,n)}else t.current=null}function hge(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,u=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:ho(t.type,n),u),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&xE(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Je(163))}function fge(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var u=e.create;e.destroy=u()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var c=e;u=c.next,c=c.tag,(c&4)!==0&&(c&1)!==0&&(x3(n,e),xge(n,e)),e=u}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(u=n.elementType===n.type?t.memoizedProps:ho(n.type,t.memoizedProps),e.componentDidUpdate(u,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&wB(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode}wB(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&LN(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&mN(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Je(163))}function UB(e,t){for(var n=e;;){if(n.tag===5){var u=n.stateNode;if(t)u=u.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{u=n.stateNode;var c=n.memoizedProps.style;c=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=nN("display",c)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function $B(e,t){if(Uc&&typeof Uc.onCommitFiberUnmount=="function")try{Uc.onCommitFiberUnmount(bE,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var u=n,c=u.destroy;if(u=u.tag,c!==void 0)if((u&4)!==0)x3(t,n);else{u=t;try{c()}catch(a){Jl(u,a)}}n=n.next}while(n!==e)}break;case 1:if(jB(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Jl(t,a)}break;case 5:jB(t);break;case 4:f3(e,t)}}function VB(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function GB(e){return e.tag===5||e.tag===3||e.tag===4}function ZB(e){e:{for(var t=e.return;t!==null;){if(GB(t))break e;t=t.return}throw Error(Je(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var u=!1;break;case 3:t=t.containerInfo,u=!0;break;case 4:t=t.containerInfo,u=!0;break;default:throw Error(Je(161))}n.flags&16&&(pv(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||GB(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}u?jI(e,n,t):UI(e,n,t)}function jI(e,t,n){var u=e.tag,c=u===5||u===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=B0));else if(u!==4&&(e=e.child,e!==null))for(jI(e,t,n),e=e.sibling;e!==null;)jI(e,t,n),e=e.sibling}function UI(e,t,n){var u=e.tag,c=u===5||u===6;if(c)e=c?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(UI(e,t,n),e=e.sibling;e!==null;)UI(e,t,n),e=e.sibling}function f3(e,t){for(var n=t,u=!1,c,a;;){if(!u){u=n.return;e:for(;;){if(u===null)throw Error(Je(160));switch(c=u.stateNode,u.tag){case 5:a=!1;break e;case 3:c=c.containerInfo,a=!0;break e;case 4:c=c.containerInfo,a=!0;break e}u=u.return}u=!0}if(n.tag===5||n.tag===6){e:for(var _=e,w=n,q=w;;)if($B(_,q),q.child!==null&&q.tag!==4)q.child.return=q,q=q.child;else{if(q===w)break e;for(;q.sibling===null;){if(q.return===null||q.return===w)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}a?(_=c,w=n.stateNode,_.nodeType===8?_.parentNode.removeChild(w):_.removeChild(w)):c.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){c=n.stateNode.containerInfo,a=!0,n.child.return=n,n=n.child;continue}}else if($B(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(u=!1)}n.sibling.return=n.return,n=n.sibling}}function sI(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var u=n=n.next;do(u.tag&3)===3&&(e=u.destroy,u.destroy=void 0,e!==void 0&&e()),u=u.next;while(u!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){u=t.memoizedProps;var c=e!==null?e.memoizedProps:u;e=t.type;var a=t.updateQueue;if(t.updateQueue=null,a!==null){for(n[N0]=u,e==="input"&&u.type==="radio"&&u.name!=null&&eN(n,u),xI(e,c),t=xI(e,u),c=0;c<a.length;c+=2){var _=a[c],w=a[c+1];_==="style"?aN(n,w):_==="dangerouslySetInnerHTML"?iN(n,w):_==="children"?pv(n,w):QI(n,_,w,t)}switch(e){case"input":dI(n,u);break;case"textarea":tN(n,u);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!u.multiple,a=u.value,a!=null?$f(n,!!u.multiple,a,!1):e!==!!u.multiple&&(u.defaultValue!=null?$f(n,!!u.multiple,u.defaultValue,!0):$f(n,!!u.multiple,u.multiple?[]:"",!1))}}}return;case 6:if(t.stateNode===null)throw Error(Je(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,mN(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&(LE=hn(),UB(t.child,!0)),HB(t);return;case 19:HB(t);return;case 17:return;case 23:case 24:UB(t,t.memoizedState!==null);return}throw Error(Je(163))}function HB(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new cge),t.forEach(function(u){var c=Sge.bind(null,e,u);n.has(u)||(n.add(u),u.then(c,c))})}}function dge(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var pge=Math.ceil,Q0=Hc.ReactCurrentDispatcher,kE=Hc.ReactCurrentOwner,Mt=0,qn=null,Si=null,fn=0,Gc=0,$I=nu(0),Zi=0,dx=null,nd=0,Cv=0,ad=0,DE=0,VI=null,LE=0,GI=1/0;function od(){GI=hn()+500}var lt=null,ex=!1,ZI=null,Go=null,ru=!1,cv=null,Qm=90,HI=[],WI=[],zs=null,hv=0,KI=null,A0=-1,ks=0,C0=0,fv=null,M0=!1;function da(){return(Mt&48)!==0?hn():A0!==-1?A0:A0=hn()}function Yl(e){if(e=e.mode,(e&2)===0)return 1;if((e&4)===0)return ed()===99?1:2;if(ks===0&&(ks=nd),tge.transition!==0){C0!==0&&(C0=VI!==null?VI.pendingLanes:0),e=ks;var t=4186112&~C0;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=ed(),(Mt&4)!==0&&e===98?e=z0(12,ks):(e=nve(e),e=z0(e,ks)),e}function Xl(e,t,n){if(50<hv)throw hv=0,KI=null,Error(Je(185));if(e=px(e,t),e===null)return null;ox(e,t,n),e===qn&&(ad|=t,Zi===4&&Kf(e,fn));var u=ed();t===1?(Mt&8)!==0&&(Mt&48)===0?YI(e):(Da(e,n),Mt===0&&(od(),Wo())):((Mt&4)===0||u!==98&&u!==99||(zs===null?zs=new Set([e]):zs.add(e)),Da(e,n)),VI=e}function px(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function Da(e,t){for(var n=e.callbackNode,u=e.suspendedLanes,c=e.pingedLanes,a=e.expirationTimes,_=e.pendingLanes;0<_;){var w=31-eu(_),q=1<<w,M=a[w];if(M===-1){if((q&u)===0||(q&c)!==0){M=t,kf(q);var O=br;a[w]=10<=O?M+250:6<=O?M+5e3:-1}}else M<=t&&(e.expiredLanes|=q);_&=~q}if(u=yv(e,e===qn?fn:0),t=br,u===0)n!==null&&(n!==rI&&MI(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==rI&&MI(n)}t===15?(n=YI.bind(null,e),Os===null?(Os=[n],P0=wE(hx,VN)):Os.push(n),n=rI):t===14?n=wv(99,YI.bind(null,e)):(n=ave(t),n=wv(n,d3.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function d3(e){if(A0=-1,C0=ks=0,(Mt&48)!==0)throw Error(Je(327));var t=e.callbackNode;if(au()&&e.callbackNode!==t)return null;var n=yv(e,e===qn?fn:0);if(n===0)return null;var u=n,c=Mt;Mt|=16;var a=g3();(qn!==e||fn!==u)&&(od(),Yf(e,u));do try{gge();break}catch(w){v3(e,w)}while(!0);if(SE(),Q0.current=a,Mt=c,Si!==null?u=0:(qn=null,fn=0,u=Zi),(nd&ad)!==0)Yf(e,0);else if(u!==0){if(u===2&&(Mt|=64,e.hydrate&&(e.hydrate=!1,xE(e.containerInfo)),n=wN(e),n!==0&&(u=ev(e,n))),u===1)throw t=dx,Yf(e,0),Kf(e,n),Da(e,hn()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,u){case 0:case 1:throw Error(Je(345));case 2:Lc(e);break;case 3:if(Kf(e,n),(n&62914560)===n&&(u=LE+500-hn(),10<u)){if(yv(e,0)!==0)break;if(c=e.suspendedLanes,(c&n)!==n){da(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=pB(Lc.bind(null,e),u);break}Lc(e);break;case 4:if(Kf(e,n),(n&4186112)===n)break;for(u=e.eventTimes,c=-1;0<n;){var _=31-eu(n);a=1<<_,_=u[_],_>c&&(c=_),n&=~a}if(n=c,n=hn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*pge(n/1960))-n,10<n){e.timeoutHandle=pB(Lc.bind(null,e),n);break}Lc(e);break;case 5:Lc(e);break;default:throw Error(Je(329))}}return Da(e,hn()),e.callbackNode===t?d3.bind(null,e):null}function Kf(e,t){for(t&=~DE,t&=~ad,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-eu(t),u=1<<n;e[n]=-1,t&=~u}}function YI(e){if((Mt&48)!==0)throw Error(Je(327));if(au(),e===qn&&(e.expiredLanes&fn)!==0){var t=fn,n=ev(e,t);(nd&ad)!==0&&(t=yv(e,t),n=ev(e,t))}else t=yv(e,0),n=ev(e,t);if(e.tag!==0&&n===2&&(Mt|=64,e.hydrate&&(e.hydrate=!1,xE(e.containerInfo)),t=wN(e),t!==0&&(n=ev(e,t))),n===1)throw n=dx,Yf(e,0),Kf(e,t),Da(e,hn()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,Lc(e),Da(e,hn()),null}function mge(){if(zs!==null){var e=zs;zs=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Da(t,hn())})}Wo()}function p3(e,t){var n=Mt;Mt|=1;try{return e(t)}finally{Mt=n,Mt===0&&(od(),Wo())}}function m3(e,t){var n=Mt;Mt&=-2,Mt|=8;try{return e(t)}finally{Mt=n,Mt===0&&(od(),Wo())}}function w0(e,t){Zr($I,Gc),Gc|=t,nd|=t}function zE(){Gc=$I.current,Mr($I)}function Yf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Kve(n)),Si!==null)for(n=Si.return;n!==null;){var u=n;switch(u.tag){case 1:u=u.type.childContextTypes,u!=null&&j0();break;case 3:td(),Mr(Vn),Mr(dn),qE();break;case 5:EE(u);break;case 4:td();break;case 13:Mr(Gr);break;case 19:Mr(Gr);break;case 10:TE(u);break;case 23:case 24:zE()}n=n.return}qn=e,Si=iu(e.current,null),fn=Gc=nd=t,Zi=0,dx=null,DE=ad=Cv=0}function v3(e,t){do{var n=Si;try{if(SE(),lv.current=J0,W0){for(var u=ni.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}W0=!1}if(Ev=0,Gi=cn=ni=null,uv=!1,kE.current=null,n===null||n.return===null){Zi=1,dx=t,Si=null;break}e:{var a=e,_=n.return,w=n,q=t;if(t=fn,w.flags|=2048,w.firstEffect=w.lastEffect=null,q!==null&&typeof q=="object"&&typeof q.then=="function"){var M=q;if((w.mode&2)===0){var O=w.alternate;O?(w.updateQueue=O.updateQueue,w.memoizedState=O.memoizedState,w.lanes=O.lanes):(w.updateQueue=null,w.memoizedState=null)}var k=(Gr.current&1)!==0,$=_;do{var fe;if(fe=$.tag===13){var Pe=$.memoizedState;if(Pe!==null)fe=Pe.dehydrated!==null;else{var Se=$.memoizedProps;fe=Se.fallback===void 0?!1:Se.unstable_avoidThisFallback!==!0?!0:!k}}if(fe){var ne=$.updateQueue;if(ne===null){var re=new Set;re.add(M),$.updateQueue=re}else ne.add(M);if(($.mode&2)===0){if($.flags|=64,w.flags|=16384,w.flags&=-2981,w.tag===1)if(w.alternate===null)w.tag=17;else{var ae=Wl(-1,1);ae.tag=2,Kl(w,ae)}w.lanes|=1;break e}q=void 0,w=t;var _e=a.pingCache;if(_e===null?(_e=a.pingCache=new uge,q=new Set,_e.set(M,q)):(q=_e.get(M),q===void 0&&(q=new Set,_e.set(M,q))),!q.has(w)){q.add(w);var Te=wge.bind(null,a,M,w);M.then(Te,Te)}$.flags|=4096,$.lanes=t;break e}$=$.return}while($!==null);q=Error((Uf(w.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Zi!==5&&(Zi=2),q=OE(q,w),$=_;do{switch($.tag){case 3:a=q,$.flags|=4096,t&=-t,$.lanes|=t;var nt=c3($,a,t);bB($,nt);break e;case 1:a=q;var Ve=$.type,ut=$.stateNode;if(($.flags&64)===0&&(typeof Ve.getDerivedStateFromError=="function"||ut!==null&&typeof ut.componentDidCatch=="function"&&(Go===null||!Go.has(ut)))){$.flags|=4096,t&=-t,$.lanes|=t;var St=h3($,a,t);bB($,St);break e}}$=$.return}while($!==null)}_3(n)}catch(xt){t=xt,Si===n&&n!==null&&(Si=n=n.return);continue}break}while(!0)}function g3(){var e=Q0.current;return Q0.current=J0,e===null?J0:e}function ev(e,t){var n=Mt;Mt|=16;var u=g3();qn===e&&fn===t||Yf(e,t);do try{vge();break}catch(c){v3(e,c)}while(!0);if(SE(),Mt=n,Q0.current=u,Si!==null)throw Error(Je(261));return qn=null,fn=0,Zi}function vge(){for(;Si!==null;)y3(Si)}function gge(){for(;Si!==null&&!Jve();)y3(Si)}function y3(e){var t=b3(e.alternate,e,Gc);e.memoizedProps=e.pendingProps,t===null?_3(e):Si=t,kE.current=null}function _3(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&2048)===0){if(n=sge(n,t,Gc),n!==null){Si=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||(Gc&1073741824)!==0||(n.mode&4)===0){for(var u=0,c=n.child;c!==null;)u|=c.lanes|c.childLanes,c=c.sibling;n.childLanes=u}e!==null&&(e.flags&2048)===0&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}else{if(n=lge(t),n!==null){n.flags&=2047,Si=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}if(t=t.sibling,t!==null){Si=t;return}Si=t=e}while(t!==null);Zi===0&&(Zi=5)}function Lc(e){var t=ed();return Vc(99,yge.bind(null,e,t)),null}function yge(e,t){do au();while(cv!==null);if((Mt&48)!==0)throw Error(Je(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Je(177));e.callbackNode=null;var u=n.lanes|n.childLanes,c=u,a=e.pendingLanes&~c;e.pendingLanes=c,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=c,e.mutableReadLanes&=c,e.entangledLanes&=c,c=e.entanglements;for(var _=e.eventTimes,w=e.expirationTimes;0<a;){var q=31-eu(a),M=1<<q;c[q]=0,_[q]=-1,w[q]=-1,a&=~M}if(zs!==null&&(u&24)===0&&zs.has(e)&&zs.delete(e),e===qn&&(Si=qn=null,fn=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,u=n.firstEffect):u=n:u=n.firstEffect,u!==null){if(c=Mt,Mt|=32,kE.current=null,QT=T0,_=lB(),EI(_)){if("selectionStart"in _)w={start:_.selectionStart,end:_.selectionEnd};else e:if(w=(w=_.ownerDocument)&&w.defaultView||window,(M=w.getSelection&&w.getSelection())&&M.rangeCount!==0){w=M.anchorNode,a=M.anchorOffset,q=M.focusNode,M=M.focusOffset;try{w.nodeType,q.nodeType}catch(xt){w=null;break e}var O=0,k=-1,$=-1,fe=0,Pe=0,Se=_,ne=null;t:for(;;){for(var re;Se!==w||a!==0&&Se.nodeType!==3||(k=O+a),Se!==q||M!==0&&Se.nodeType!==3||($=O+M),Se.nodeType===3&&(O+=Se.nodeValue.length),(re=Se.firstChild)!==null;)ne=Se,Se=re;for(;;){if(Se===_)break t;if(ne===w&&++fe===a&&(k=O),ne===q&&++Pe===M&&($=O),(re=Se.nextSibling)!==null)break;Se=ne,ne=Se.parentNode}Se=re}w=k===-1||$===-1?null:{start:k,end:$}}else w=null;w=w||{start:0,end:0}}else w=null;eI={focusedElem:_,selectionRange:w},T0=!1,fv=null,M0=!1,lt=u;do try{_ge()}catch(xt){if(lt===null)throw Error(Je(330));Jl(lt,xt),lt=lt.nextEffect}while(lt!==null);fv=null,lt=u;do try{for(_=e;lt!==null;){var ae=lt.flags;if(ae&16&&pv(lt.stateNode,""),ae&128){var _e=lt.alternate;if(_e!==null){var Te=_e.ref;Te!==null&&(typeof Te=="function"?Te(null):Te.current=null)}}switch(ae&1038){case 2:ZB(lt),lt.flags&=-3;break;case 6:ZB(lt),lt.flags&=-3,sI(lt.alternate,lt);break;case 1024:lt.flags&=-1025;break;case 1028:lt.flags&=-1025,sI(lt.alternate,lt);break;case 4:sI(lt.alternate,lt);break;case 8:w=lt,f3(_,w);var nt=w.alternate;VB(w),nt!==null&&VB(nt)}lt=lt.nextEffect}}catch(xt){if(lt===null)throw Error(Je(330));Jl(lt,xt),lt=lt.nextEffect}while(lt!==null);if(Te=eI,_e=lB(),ae=Te.focusedElem,_=Te.selectionRange,_e!==ae&&ae&&ae.ownerDocument&&CN(ae.ownerDocument.documentElement,ae)){for(_!==null&&EI(ae)&&(_e=_.start,Te=_.end,Te===void 0&&(Te=_e),"selectionStart"in ae?(ae.selectionStart=_e,ae.selectionEnd=Math.min(Te,ae.value.length)):(Te=(_e=ae.ownerDocument||document)&&_e.defaultView||window,Te.getSelection&&(Te=Te.getSelection(),w=ae.textContent.length,nt=Math.min(_.start,w),_=_.end===void 0?nt:Math.min(_.end,w),!Te.extend&&nt>_&&(w=_,_=nt,nt=w),w=sB(ae,nt),a=sB(ae,_),w&&a&&(Te.rangeCount!==1||Te.anchorNode!==w.node||Te.anchorOffset!==w.offset||Te.focusNode!==a.node||Te.focusOffset!==a.offset)&&(_e=_e.createRange(),_e.setStart(w.node,w.offset),Te.removeAllRanges(),nt>_?(Te.addRange(_e),Te.extend(a.node,a.offset)):(_e.setEnd(a.node,a.offset),Te.addRange(_e)))))),_e=[],Te=ae;Te=Te.parentNode;)Te.nodeType===1&&_e.push({element:Te,left:Te.scrollLeft,top:Te.scrollTop});for(typeof ae.focus=="function"&&ae.focus(),ae=0;ae<_e.length;ae++)Te=_e[ae],Te.element.scrollLeft=Te.left,Te.element.scrollTop=Te.top}T0=!!QT,eI=QT=null,e.current=n,lt=u;do try{for(ae=e;lt!==null;){var Ve=lt.flags;if(Ve&36&&fge(ae,lt.alternate,lt),Ve&128){_e=void 0;var ut=lt.ref;if(ut!==null){var St=lt.stateNode;switch(lt.tag){case 5:_e=St;break;default:_e=St}typeof ut=="function"?ut(_e):ut.current=_e}}lt=lt.nextEffect}}catch(xt){if(lt===null)throw Error(Je(330));Jl(lt,xt),lt=lt.nextEffect}while(lt!==null);lt=null,ege(),Mt=c}else e.current=n;if(ru)ru=!1,cv=e,Qm=t;else for(lt=u;lt!==null;)t=lt.nextEffect,lt.nextEffect=null,lt.flags&8&&(Ve=lt,Ve.sibling=null,Ve.stateNode=null),lt=t;if(u=e.pendingLanes,u===0&&(Go=null),u===1?e===KI?hv++:(hv=0,KI=e):hv=0,n=n.stateNode,Uc&&typeof Uc.onCommitFiberRoot=="function")try{Uc.onCommitFiberRoot(bE,n,void 0,(n.current.flags&64)===64)}catch(xt){}if(Da(e,hn()),ex)throw ex=!1,e=ZI,ZI=null,e;return(Mt&8)!==0||Wo(),null}function _ge(){for(;lt!==null;){var e=lt.alternate;M0||fv===null||((lt.flags&8)!==0?WF(lt,fv)&&(M0=!0):lt.tag===13&&dge(e,lt)&&WF(lt,fv)&&(M0=!0));var t=lt.flags;(t&256)!==0&&hge(e,lt),(t&512)===0||ru||(ru=!0,wv(97,function(){return au(),null})),lt=lt.nextEffect}}function au(){if(Qm!==90){var e=97<Qm?97:Qm;return Qm=90,Vc(e,bge)}return!1}function xge(e,t){HI.push(t,e),ru||(ru=!0,wv(97,function(){return au(),null}))}function x3(e,t){WI.push(t,e),ru||(ru=!0,wv(97,function(){return au(),null}))}function bge(){if(cv===null)return!1;var e=cv;if(cv=null,(Mt&48)!==0)throw Error(Je(331));var t=Mt;Mt|=32;var n=WI;WI=[];for(var u=0;u<n.length;u+=2){var c=n[u],a=n[u+1],_=c.destroy;if(c.destroy=void 0,typeof _=="function")try{_()}catch(q){if(a===null)throw Error(Je(330));Jl(a,q)}}for(n=HI,HI=[],u=0;u<n.length;u+=2){c=n[u],a=n[u+1];try{var w=c.create;c.destroy=w()}catch(q){if(a===null)throw Error(Je(330));Jl(a,q)}}for(w=e.current.firstEffect;w!==null;)e=w.nextEffect,w.nextEffect=null,w.flags&8&&(w.sibling=null,w.stateNode=null),w=e;return Mt=t,Wo(),!0}function WB(e,t,n){t=OE(n,t),t=c3(e,t,1),Kl(e,t),t=da(),e=px(e,1),e!==null&&(ox(e,1,t),Da(e,t))}function Jl(e,t){if(e.tag===3)WB(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){WB(n,e,t);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Go===null||!Go.has(u))){e=OE(t,e);var c=h3(n,e,1);if(Kl(n,c),c=da(),n=px(n,1),n!==null)ox(n,1,c),Da(n,c);else if(typeof u.componentDidCatch=="function"&&(Go===null||!Go.has(u)))try{u.componentDidCatch(t,e)}catch(a){}break}}n=n.return}}function wge(e,t,n){var u=e.pingCache;u!==null&&u.delete(t),t=da(),e.pingedLanes|=e.suspendedLanes&n,qn===e&&(fn&n)===n&&(Zi===4||Zi===3&&(fn&62914560)===fn&&500>hn()-LE?Yf(e,0):DE|=n),Da(e,t)}function Sge(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,(t&2)===0?t=1:(t&4)===0?t=ed()===99?1:2:(ks===0&&(ks=nd),t=Df(62914560&~ks),t===0&&(t=4194304))),n=da(),e=px(e,t),e!==null&&(ox(e,t,n),Da(e,n))}var b3;b3=function(e,t,n){var u=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||Vn.current)fo=!0;else if((n&u)!==0)fo=(e.flags&16384)!==0;else{switch(fo=!1,t.tag){case 3:kB(t),nI();break;case 5:IB(t);break;case 1:Gn(t.type)&&q0(t);break;case 4:kI(t,t.stateNode.containerInfo);break;case 10:u=t.memoizedProps.value;var c=t.type._context;Zr(U0,c._currentValue),c._currentValue=u;break;case 13:if(t.memoizedState!==null)return(n&t.child.childLanes)!==0?DB(e,t,n):(Zr(Gr,Gr.current&1),t=Ls(e,t,n),t!==null?t.sibling:null);Zr(Gr,Gr.current&1);break;case 19:if(u=(n&t.childLanes)!==0,(e.flags&64)!==0){if(u)return NB(e,t,n);t.flags|=64}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),Zr(Gr,Gr.current),u)break;return null;case 23:case 24:return t.lanes=0,aI(e,t,n)}return Ls(e,t,n)}}else fo=!1;switch(t.lanes=0,t.tag){case 2:if(u=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,c=Qf(t,dn.current),Hf(t,n),c=AE(null,t,u,e,c,n),t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Gn(u)){var a=!0;q0(t)}else a=!1;t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,IE(t);var _=u.getDerivedStateFromProps;typeof _=="function"&&G0(t,u,_,e),c.updater=fx,t.stateNode=c,c._reactInternals=t,OI(t,u,e,n),t=FI(null,t,u,!0,a,n)}else t.tag=0,$n(null,t,c,n),t=t.child;return t;case 16:c=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,a=c._init,c=a(c._payload),t.type=c,a=t.tag=Ige(c),e=ho(c,e),a){case 0:t=zI(null,t,c,e,n);break e;case 1:t=OB(null,t,c,e,n);break e;case 11:t=MB(null,t,c,e,n);break e;case 14:t=RB(null,t,c,ho(c.type,e),u,n);break e}throw Error(Je(306,c,""))}return t;case 0:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:ho(u,c),zI(e,t,u,c,n);case 1:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:ho(u,c),OB(e,t,u,c,n);case 3:if(kB(t),u=t.updateQueue,e===null||u===null)throw Error(Je(282));if(u=t.pendingProps,c=t.memoizedState,c=c!==null?c.element:null,ZN(e,t),Sv(t,u,null,n),u=t.memoizedState.element,u===c)nI(),t=Ls(e,t,n);else{if(c=t.stateNode,(a=c.hydrate)&&(Vl=Zf(t.stateNode.containerInfo.firstChild),Ds=t,a=Ho=!0),a){if(e=c.mutableSourceEagerHydrationData,e!=null)for(c=0;c<e.length;c+=2)a=e[c],a._workInProgressVersionPrimary=e[c+1],Wf.push(a);for(n=YN(t,null,u,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else $n(e,t,u,n),nI();t=t.child}return t;case 5:return IB(t),e===null&&DI(t),u=t.type,c=t.pendingProps,a=e!==null?e.memoizedProps:null,_=c.children,AI(u,c)?_=null:a!==null&&AI(u,a)&&(t.flags|=16),o3(e,t),$n(e,t,_,n),t.child;case 6:return e===null&&DI(t),null;case 13:return DB(e,t,n);case 4:return kI(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=Z0(t,null,u,n):$n(e,t,u,n),t.child;case 11:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:ho(u,c),MB(e,t,u,c,n);case 7:return $n(e,t,t.pendingProps,n),t.child;case 8:return $n(e,t,t.pendingProps.children,n),t.child;case 12:return $n(e,t,t.pendingProps.children,n),t.child;case 10:e:{u=t.type._context,c=t.pendingProps,_=t.memoizedProps,a=c.value;var w=t.type._context;if(Zr(U0,w._currentValue),w._currentValue=a,_!==null)if(w=_.value,a=Ma(w,a)?0:(typeof u._calculateChangedBits=="function"?u._calculateChangedBits(w,a):1073741823)|0,a===0){if(_.children===c.children&&!Vn.current){t=Ls(e,t,n);break e}}else for(w=t.child,w!==null&&(w.return=t);w!==null;){var q=w.dependencies;if(q!==null){_=w.child;for(var M=q.firstContext;M!==null;){if(M.context===u&&(M.observedBits&a)!==0){w.tag===1&&(M=Wl(-1,n&-n),M.tag=2,Kl(w,M)),w.lanes|=n,M=w.alternate,M!==null&&(M.lanes|=n),GN(w.return,n),q.lanes|=n;break}M=M.next}}else _=w.tag===10&&w.type===t.type?null:w.child;if(_!==null)_.return=w;else for(_=w;_!==null;){if(_===t){_=null;break}if(w=_.sibling,w!==null){w.return=_.return,_=w;break}_=_.return}w=_}$n(e,t,c.children,n),t=t.child}return t;case 9:return c=t.type,a=t.pendingProps,u=a.children,Hf(t,n),c=ka(c,a.unstable_observedBits),u=u(c),t.flags|=1,$n(e,t,u,n),t.child;case 14:return c=t.type,a=ho(c,t.pendingProps),a=ho(c.type,a),RB(e,t,c,a,u,n);case 15:return a3(e,t,t.type,t.pendingProps,u,n);case 17:return u=t.type,c=t.pendingProps,c=t.elementType===u?c:ho(u,c),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Gn(u)?(e=!0,q0(t)):e=!1,Hf(t,n),WN(t,u,c),OI(t,u,c,n),FI(null,t,u,!0,e,n);case 19:return NB(e,t,n);case 23:return aI(e,t,n);case 24:return aI(e,t,n)}throw Error(Je(156,t.tag))};function Tge(e,t,n,u){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Ra(e,t,n,u){return new Tge(e,t,n,u)}function FE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ige(e){if(typeof e=="function")return FE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ix)return 11;if(e===nx)return 14}return 2}function iu(e,t){var n=e.alternate;return n===null?(n=Ra(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function R0(e,t,n,u,c,a){var _=2;if(u=e,typeof e=="function")FE(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case jl:return Xf(n.children,c,a,t);case XB:_=8,c|=16;break;case eE:_=8,c|=1;break;case tv:return e=Ra(12,n,t,c|8),e.elementType=tv,e.type=tv,e.lanes=a,e;case rv:return e=Ra(13,n,t,c),e.type=rv,e.elementType=rv,e.lanes=a,e;case O0:return e=Ra(19,n,t,c),e.elementType=O0,e.lanes=a,e;case oE:return BE(n,c,a,t);case hI:return e=Ra(24,n,t,c),e.elementType=hI,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case tE:_=10;break e;case rE:_=9;break e;case ix:_=11;break e;case nx:_=14;break e;case iE:_=16,u=null;break e;case nE:_=22;break e}throw Error(Je(130,e==null?e:typeof e,""))}return t=Ra(_,n,t,c),t.elementType=e,t.type=u,t.lanes=a,t}function Xf(e,t,n,u){return e=Ra(7,e,u,t),e.lanes=n,e}function BE(e,t,n,u){return e=Ra(23,e,u,t),e.elementType=oE,e.lanes=n,e}function lI(e,t,n){return e=Ra(6,e,null,t),e.lanes=n,e}function uI(e,t,n){return t=Ra(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ege(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=HT(0),this.expirationTimes=HT(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=HT(0),this.mutableSourceEagerHydrationData=null}function qge(e,t,n){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:zc,key:u==null?null:""+u,children:e,containerInfo:t,implementation:n}}function tx(e,t,n,u){var c=t.current,a=da(),_=Yl(c);e:if(n){n=n._reactInternals;t:{if(Wc(n)!==n||n.tag!==1)throw Error(Je(170));var w=n;do{switch(w.tag){case 3:w=w.stateNode.context;break t;case 1:if(Gn(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break t}}w=w.return}while(w!==null);throw Error(Je(171))}if(n.tag===1){var q=n.type;if(Gn(q)){n=FN(n,q,w);break e}}n=w}else n=tu;return t.context===null?t.context=n:t.pendingContext=n,t=Wl(a,_),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),Kl(c,t),Xl(c,_,a),_}function cI(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function KB(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function NE(e,t){KB(e,t),(e=e.alternate)&&KB(e,t)}function Pge(){return null}function jE(e,t,n){var u=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new Ege(e,t,n!=null&&n.hydrate===!0),t=Ra(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,IE(t),e[id]=n.current,ON(e.nodeType===8?e.parentNode:e),u)for(e=0;e<u.length;e++){t=u[e];var c=t._getVersion;c=c(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,c]:n.mutableSourceEagerHydrationData.push(t,c)}this._internalRoot=n}jE.prototype.render=function(e){tx(e,this._internalRoot,null,null)};jE.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;tx(null,e,null,function(){t[id]=null})};function Mv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Age(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new jE(e,0,t?{hydrate:!0}:void 0)}function mx(e,t,n,u,c){var a=n._reactRootContainer;if(a){var _=a._internalRoot;if(typeof c=="function"){var w=c;c=function(){var M=cI(_);w.call(M)}}tx(t,_,e,c)}else{if(a=n._reactRootContainer=Age(n,u),_=a._internalRoot,typeof c=="function"){var q=c;c=function(){var M=cI(_);q.call(M)}}m3(function(){tx(t,_,e,c)})}return cI(_)}fN=function(e){if(e.tag===13){var t=da();Xl(e,4,t),NE(e,4)}};hE=function(e){if(e.tag===13){var t=da();Xl(e,67108864,t),NE(e,67108864)}};dN=function(e){if(e.tag===13){var t=da(),n=Yl(e);Xl(e,n,t),NE(e,n)}};pN=function(e,t){return t()};bI=function(e,t,n){switch(t){case"input":if(dI(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<n.length;t++){var u=n[t];if(u!==e&&u.form===e.form){var c=cx(u);if(!c)throw Error(Je(90));QB(u),dI(u,c)}}}break;case"textarea":tN(e,n);break;case"select":t=n.value,t!=null&&$f(e,!!n.multiple,t,!1)}};lE=p3;lN=function(e,t,n,u,c){var a=Mt;Mt|=4;try{return Vc(98,e.bind(null,t,n,u,c))}finally{Mt=a,Mt===0&&(od(),Wo())}};uE=function(){(Mt&49)===0&&(mge(),au())};uN=function(e,t){var n=Mt;Mt|=2;try{return e(t)}finally{Mt=n,Mt===0&&(od(),Wo())}};function w3(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Mv(t))throw Error(Je(200));return qge(e,t,null,n)}var Cge={Events:[Pv,Bf,cx,oN,sN,au,{current:!1}]},Wm={findFiberByHostInstance:Bc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Mge={bundleType:Wm.bundleType,version:Wm.version,rendererPackageName:Wm.rendererPackageName,rendererConfig:Wm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=hN(e),e===null?null:e.stateNode},findFiberByHostInstance:Wm.findFiberByHostInstance||Pge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Km=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Km.isDisabled&&Km.supportsFiber))try{bE=Km.inject(Mge),Uc=Km}catch(e){}var Km;La.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cge;La.createPortal=w3;La.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Je(188)):Error(Je(268,Object.keys(e)));return e=hN(t),e=e===null?null:e.stateNode,e};La.flushSync=function(e,t){var n=Mt;if((n&48)!==0)return e(t);Mt|=1;try{if(e)return Vc(99,e.bind(null,t))}finally{Mt=n,Wo()}};La.hydrate=function(e,t,n){if(!Mv(t))throw Error(Je(200));return mx(null,e,t,!0,n)};La.render=function(e,t,n){if(!Mv(t))throw Error(Je(200));return mx(null,e,t,!1,n)};La.unmountComponentAtNode=function(e){if(!Mv(e))throw Error(Je(40));return e._reactRootContainer?(m3(function(){mx(null,null,e,!1,function(){e._reactRootContainer=null,e[id]=null})}),!0):!1};La.unstable_batchedUpdates=p3;La.unstable_createPortal=function(e,t){return w3(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};La.unstable_renderSubtreeIntoContainer=function(e,t,n,u){if(!Mv(n))throw Error(Je(200));if(e==null||e._reactInternals===void 0)throw Error(Je(38));return mx(e,t,n,!1,u)};La.version="17.0.2"});var E3=I((jvt,I3)=>{"use strict";function T3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(T3)}catch(e){console.error(e)}}T3(),I3.exports=S3()});var Qe=I((UE,q3)=>{"use strict";var Rv=function(e){return e&&e.Math===Math&&e};q3.exports=Rv(typeof globalThis=="object"&&globalThis)||Rv(typeof window=="object"&&window)||Rv(typeof self=="object"&&self)||Rv(typeof global=="object"&&global)||Rv(typeof UE=="object"&&UE)||function(){return this}()||Function("return this")()});var He=I((Uvt,P3)=>{"use strict";P3.exports=function(e){try{return!!e()}catch(t){return!0}}});var dt=I(($vt,A3)=>{"use strict";var Rge=He();A3.exports=!Rge(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var sd=I((Vvt,C3)=>{"use strict";var Oge=He();C3.exports=!Oge(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var et=I((Gvt,M3)=>{"use strict";var kge=sd(),vx=Function.prototype.call;M3.exports=kge?vx.bind(vx):function(){return vx.apply(vx,arguments)}});var Ov=I(k3=>{"use strict";var R3={}.propertyIsEnumerable,O3=Object.getOwnPropertyDescriptor,Dge=O3&&!R3.call({1:2},1);k3.f=Dge?function(t){var n=O3(this,t);return!!n&&n.enumerable}:R3});var Zn=I((Hvt,D3)=>{"use strict";D3.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var $e=I((Wvt,F3)=>{"use strict";var L3=sd(),z3=Function.prototype,$E=z3.call,Lge=L3&&z3.bind.bind($E,$E);F3.exports=L3?Lge:function(e){return function(){return $E.apply(e,arguments)}}});var Wi=I((Kvt,N3)=>{"use strict";var B3=$e(),zge=B3({}.toString),Fge=B3("".slice);N3.exports=function(e){return Fge(zge(e),8,-1)}});var Bs=I((Yvt,j3)=>{"use strict";var Bge=$e(),Nge=He(),jge=Wi(),VE=Object,Uge=Bge("".split);j3.exports=Nge(function(){return!VE("z").propertyIsEnumerable(0)})?function(e){return jge(e)==="String"?Uge(e,""):VE(e)}:VE});var Hn=I((Xvt,U3)=>{"use strict";U3.exports=function(e){return e==null}});var mr=I((Jvt,$3)=>{"use strict";var $ge=Hn(),Vge=TypeError;$3.exports=function(e){if($ge(e))throw new Vge("Can't call method on "+e);return e}});var fi=I((Qvt,V3)=>{"use strict";var Gge=Bs(),Zge=mr();V3.exports=function(e){return Gge(Zge(e))}});var Rt=I((egt,G3)=>{"use strict";var GE=typeof document=="object"&&document.all;G3.exports=typeof GE=="undefined"&&GE!==void 0?function(e){return typeof e=="function"||e===GE}:function(e){return typeof e=="function"}});var vt=I((tgt,Z3)=>{"use strict";var Hge=Rt();Z3.exports=function(e){return typeof e=="object"?e!==null:Hge(e)}});var bt=I((rgt,H3)=>{"use strict";var ZE=Qe(),Wge=Rt(),Kge=function(e){return Wge(e)?e:void 0};H3.exports=function(e,t){return arguments.length<2?Kge(ZE[e]):ZE[e]&&ZE[e][t]}});var Ki=I((igt,W3)=>{"use strict";var Yge=$e();W3.exports=Yge({}.isPrototypeOf)});var po=I((ngt,X3)=>{"use strict";var Xge=Qe(),K3=Xge.navigator,Y3=K3&&K3.userAgent;X3.exports=Y3?String(Y3):""});var vo=I((agt,ij)=>{"use strict";var rj=Qe(),HE=po(),J3=rj.process,Q3=rj.Deno,ej=J3&&J3.versions||Q3&&Q3.version,tj=ej&&ej.v8,mo,gx;tj&&(mo=tj.split("."),gx=mo[0]>0&&mo[0]<4?1:+(mo[0]+mo[1]));!gx&&HE&&(mo=HE.match(/Edge\/(\d+)/),(!mo||mo[1]>=74)&&(mo=HE.match(/Chrome\/(\d+)/),mo&&(gx=+mo[1])));ij.exports=gx});var ou=I((ogt,aj)=>{"use strict";var nj=vo(),Jge=He(),Qge=Qe(),eye=Qge.String;aj.exports=!!Object.getOwnPropertySymbols&&!Jge(function(){var e=Symbol("symbol detection");return!eye(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&nj&&nj<41})});var WE=I((sgt,oj)=>{"use strict";var tye=ou();oj.exports=tye&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Ns=I((lgt,sj)=>{"use strict";var rye=bt(),iye=Rt(),nye=Ki(),aye=WE(),oye=Object;sj.exports=aye?function(e){return typeof e=="symbol"}:function(e){var t=rye("Symbol");return iye(t)&&nye(t.prototype,oye(e))}});var su=I((ugt,lj)=>{"use strict";var sye=String;lj.exports=function(e){try{return sye(e)}catch(t){return"Object"}}});var wt=I((cgt,uj)=>{"use strict";var lye=Rt(),uye=su(),cye=TypeError;uj.exports=function(e){if(lye(e))return e;throw new cye(uye(e)+" is not a function")}});var Hr=I((hgt,cj)=>{"use strict";var hye=wt(),fye=Hn();cj.exports=function(e,t){var n=e[t];return fye(n)?void 0:hye(n)}});var JE=I((fgt,hj)=>{"use strict";var KE=et(),YE=Rt(),XE=vt(),dye=TypeError;hj.exports=function(e,t){var n,u;if(t==="string"&&YE(n=e.toString)&&!XE(u=KE(n,e))||YE(n=e.valueOf)&&!XE(u=KE(n,e))||t!=="string"&&YE(n=e.toString)&&!XE(u=KE(n,e)))return u;throw new dye("Can't convert object to primitive value")}});var Kt=I((dgt,fj)=>{"use strict";fj.exports=!1});var yx=I((pgt,pj)=>{"use strict";var dj=Qe(),pye=Object.defineProperty;pj.exports=function(e,t){try{pye(dj,e,{value:t,configurable:!0,writable:!0})}catch(n){dj[e]=t}return t}});var kv=I((mgt,gj)=>{"use strict";var mye=Kt(),vye=Qe(),gye=yx(),mj="__core-js_shared__",vj=gj.exports=vye[mj]||gye(mj,{});(vj.versions||(vj.versions=[])).push({version:"3.42.0",mode:mye?"pure":"global",copyright:"\xA9 2014-2025 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.42.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var js=I((vgt,_j)=>{"use strict";var yj=kv();_j.exports=function(e,t){return yj[e]||(yj[e]=t||{})}});var zt=I((ggt,xj)=>{"use strict";var yye=mr(),_ye=Object;xj.exports=function(e){return _ye(yye(e))}});var Ot=I((ygt,bj)=>{"use strict";var xye=$e(),bye=zt(),wye=xye({}.hasOwnProperty);bj.exports=Object.hasOwn||function(t,n){return wye(bye(t),n)}});var lu=I((_gt,wj)=>{"use strict";var Sye=$e(),Tye=0,Iye=Math.random(),Eye=Sye(1 .toString);wj.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+Eye(++Tye+Iye,36)}});var _t=I((xgt,Tj)=>{"use strict";var qye=Qe(),Pye=js(),Sj=Ot(),Aye=lu(),Cye=ou(),Mye=WE(),ld=qye.Symbol,QE=Pye("wks"),Rye=Mye?ld.for||ld:ld&&ld.withoutSetter||Aye;Tj.exports=function(e){return Sj(QE,e)||(QE[e]=Cye&&Sj(ld,e)?ld[e]:Rye("Symbol."+e)),QE[e]}});var Dv=I((bgt,qj)=>{"use strict";var Oye=et(),Ij=vt(),Ej=Ns(),kye=Hr(),Dye=JE(),Lye=_t(),zye=TypeError,Fye=Lye("toPrimitive");qj.exports=function(e,t){if(!Ij(e)||Ej(e))return e;var n=kye(e,Fye),u;if(n){if(t===void 0&&(t="default"),u=Oye(n,e,t),!Ij(u)||Ej(u))return u;throw new zye("Can't convert object to primitive value")}return t===void 0&&(t="number"),Dye(e,t)}});var Ko=I((wgt,Pj)=>{"use strict";var Bye=Dv(),Nye=Ns();Pj.exports=function(e){var t=Bye(e,"string");return Nye(t)?t:t+""}});var Lv=I((Sgt,Cj)=>{"use strict";var jye=Qe(),Aj=vt(),eq=jye.document,Uye=Aj(eq)&&Aj(eq.createElement);Cj.exports=function(e){return Uye?eq.createElement(e):{}}});var tq=I((Tgt,Mj)=>{"use strict";var $ye=dt(),Vye=He(),Gye=Lv();Mj.exports=!$ye&&!Vye(function(){return Object.defineProperty(Gye("div"),"a",{get:function(){return 7}}).a!==7})});var ki=I(Oj=>{"use strict";var Zye=dt(),Hye=et(),Wye=Ov(),Kye=Zn(),Yye=fi(),Xye=Ko(),Jye=Ot(),Qye=tq(),Rj=Object.getOwnPropertyDescriptor;Oj.f=Zye?Rj:function(t,n){if(t=Yye(t),n=Xye(n),Qye)try{return Rj(t,n)}catch(u){}if(Jye(t,n))return Kye(!Hye(Wye.f,t,n),t[n])}});var rq=I((Egt,kj)=>{"use strict";var e_e=dt(),t_e=He();kj.exports=e_e&&t_e(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var tt=I((qgt,Dj)=>{"use strict";var r_e=vt(),i_e=String,n_e=TypeError;Dj.exports=function(e){if(r_e(e))return e;throw new n_e(i_e(e)+" is not an object")}});var dr=I(zj=>{"use strict";var a_e=dt(),o_e=tq(),s_e=rq(),_x=tt(),Lj=Ko(),l_e=TypeError,iq=Object.defineProperty,u_e=Object.getOwnPropertyDescriptor,nq="enumerable",aq="configurable",oq="writable";zj.f=a_e?s_e?function(t,n,u){if(_x(t),n=Lj(n),_x(u),typeof t=="function"&&n==="prototype"&&"value"in u&&oq in u&&!u[oq]){var c=u_e(t,n);c&&c[oq]&&(t[n]=u.value,u={configurable:aq in u?u[aq]:c[aq],enumerable:nq in u?u[nq]:c[nq],writable:!1})}return iq(t,n,u)}:iq:function(t,n,u){if(_x(t),n=Lj(n),_x(u),o_e)try{return iq(t,n,u)}catch(c){}if("get"in u||"set"in u)throw new l_e("Accessors not supported");return"value"in u&&(t[n]=u.value),t}});var di=I((Agt,Fj)=>{"use strict";var c_e=dt(),h_e=dr(),f_e=Zn();Fj.exports=c_e?function(e,t,n){return h_e.f(e,t,f_e(1,n))}:function(e,t,n){return e[t]=n,e}});var Yc=I((Cgt,Nj)=>{"use strict";var sq=dt(),d_e=Ot(),Bj=Function.prototype,p_e=sq&&Object.getOwnPropertyDescriptor,lq=d_e(Bj,"name"),m_e=lq&&function(){}.name==="something",v_e=lq&&(!sq||sq&&p_e(Bj,"name").configurable);Nj.exports={EXISTS:lq,PROPER:m_e,CONFIGURABLE:v_e}});var zv=I((Mgt,jj)=>{"use strict";var g_e=$e(),y_e=Rt(),uq=kv(),__e=g_e(Function.toString);y_e(uq.inspectSource)||(uq.inspectSource=function(e){return __e(e)});jj.exports=uq.inspectSource});var cq=I((Rgt,$j)=>{"use strict";var x_e=Qe(),b_e=Rt(),Uj=x_e.WeakMap;$j.exports=b_e(Uj)&&/native code/.test(String(Uj))});var Fv=I((Ogt,Gj)=>{"use strict";var w_e=js(),S_e=lu(),Vj=w_e("keys");Gj.exports=function(e){return Vj[e]||(Vj[e]=S_e(e))}});var ud=I((kgt,Zj)=>{"use strict";Zj.exports={}});var Qt=I((Dgt,Kj)=>{"use strict";var T_e=cq(),Wj=Qe(),I_e=vt(),E_e=di(),hq=Ot(),fq=kv(),q_e=Fv(),P_e=ud(),Hj="Object already initialized",dq=Wj.TypeError,A_e=Wj.WeakMap,xx,Bv,bx,C_e=function(e){return bx(e)?Bv(e):xx(e,{})},M_e=function(e){return function(t){var n;if(!I_e(t)||(n=Bv(t)).type!==e)throw new dq("Incompatible receiver, "+e+" required");return n}};T_e||fq.state?(go=fq.state||(fq.state=new A_e),go.get=go.get,go.has=go.has,go.set=go.set,xx=function(e,t){if(go.has(e))throw new dq(Hj);return t.facade=e,go.set(e,t),t},Bv=function(e){return go.get(e)||{}},bx=function(e){return go.has(e)}):(Xc=q_e("state"),P_e[Xc]=!0,xx=function(e,t){if(hq(e,Xc))throw new dq(Hj);return t.facade=e,E_e(e,Xc,t),t},Bv=function(e){return hq(e,Xc)?e[Xc]:{}},bx=function(e){return hq(e,Xc)});var go,Xc;Kj.exports={set:xx,get:Bv,has:bx,enforce:C_e,getterFor:M_e}});var Nv=I((Lgt,Jj)=>{"use strict";var mq=$e(),R_e=He(),O_e=Rt(),wx=Ot(),pq=dt(),k_e=Yc().CONFIGURABLE,D_e=zv(),Xj=Qt(),L_e=Xj.enforce,z_e=Xj.get,Yj=String,Sx=Object.defineProperty,F_e=mq("".slice),B_e=mq("".replace),N_e=mq([].join),j_e=pq&&!R_e(function(){return Sx(function(){},"length",{value:8}).length!==8}),U_e=String(String).split("String"),$_e=Jj.exports=function(e,t,n){F_e(Yj(t),0,7)==="Symbol("&&(t="["+B_e(Yj(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!wx(e,"name")||k_e&&e.name!==t)&&(pq?Sx(e,"name",{value:t,configurable:!0}):e.name=t),j_e&&n&&wx(n,"arity")&&e.length!==n.arity&&Sx(e,"length",{value:n.arity});try{n&&wx(n,"constructor")&&n.constructor?pq&&Sx(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(c){}var u=L_e(e);return wx(u,"source")||(u.source=N_e(U_e,typeof t=="string"?t:"")),e};Function.prototype.toString=$_e(function(){return O_e(this)&&z_e(this).source||D_e(this)},"toString")});var rr=I((zgt,Qj)=>{"use strict";var V_e=Rt(),G_e=dr(),Z_e=Nv(),H_e=yx();Qj.exports=function(e,t,n,u){u||(u={});var c=u.enumerable,a=u.name!==void 0?u.name:t;if(V_e(n)&&Z_e(n,a,u),u.global)c?e[t]=n:H_e(t,n);else{try{u.unsafe?e[t]&&(c=!0):delete e[t]}catch(_){}c?e[t]=n:G_e.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}});var vq=I((Fgt,e4)=>{"use strict";var W_e=Math.ceil,K_e=Math.floor;e4.exports=Math.trunc||function(t){var n=+t;return(n>0?K_e:W_e)(n)}});var wr=I((Bgt,t4)=>{"use strict";var Y_e=vq();t4.exports=function(e){var t=+e;return t!==t||t===0?0:Y_e(t)}});var yo=I((Ngt,r4)=>{"use strict";var X_e=wr(),J_e=Math.max,Q_e=Math.min;r4.exports=function(e,t){var n=X_e(e);return n<0?J_e(n+t,0):Q_e(n,t)}});var Wn=I((jgt,i4)=>{"use strict";var e0e=wr(),t0e=Math.min;i4.exports=function(e){var t=e0e(e);return t>0?t0e(t,9007199254740991):0}});var Vt=I((Ugt,n4)=>{"use strict";var r0e=Wn();n4.exports=function(e){return r0e(e.length)}});var cd=I(($gt,o4)=>{"use strict";var i0e=fi(),n0e=yo(),a0e=Vt(),a4=function(e){return function(t,n,u){var c=i0e(t),a=a0e(c);if(a===0)return!e&&-1;var _=n0e(u,a),w;if(e&&n!==n){for(;a>_;)if(w=c[_++],w!==w)return!0}else for(;a>_;_++)if((e||_ in c)&&c[_]===n)return e||_||0;return!e&&-1}};o4.exports={includes:a4(!0),indexOf:a4(!1)}});var yq=I((Vgt,l4)=>{"use strict";var o0e=$e(),gq=Ot(),s0e=fi(),l0e=cd().indexOf,u0e=ud(),s4=o0e([].push);l4.exports=function(e,t){var n=s0e(e),u=0,c=[],a;for(a in n)!gq(u0e,a)&&gq(n,a)&&s4(c,a);for(;t.length>u;)gq(n,a=t[u++])&&(~l0e(c,a)||s4(c,a));return c}});var Tx=I((Ggt,u4)=>{"use strict";u4.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var uu=I(c4=>{"use strict";var c0e=yq(),h0e=Tx(),f0e=h0e.concat("length","prototype");c4.f=Object.getOwnPropertyNames||function(t){return c0e(t,f0e)}});var jv=I(h4=>{"use strict";h4.f=Object.getOwnPropertySymbols});var Ix=I((Wgt,f4)=>{"use strict";var d0e=bt(),p0e=$e(),m0e=uu(),v0e=jv(),g0e=tt(),y0e=p0e([].concat);f4.exports=d0e("Reflect","ownKeys")||function(t){var n=m0e.f(g0e(t)),u=v0e.f;return u?y0e(n,u(t)):n}});var Jc=I((Kgt,p4)=>{"use strict";var d4=Ot(),_0e=Ix(),x0e=ki(),b0e=dr();p4.exports=function(e,t,n){for(var u=_0e(t),c=b0e.f,a=x0e.f,_=0;_<u.length;_++){var w=u[_];!d4(e,w)&&!(n&&d4(n,w))&&c(e,w,a(t,w))}}});var hd=I((Ygt,m4)=>{"use strict";var w0e=He(),S0e=Rt(),T0e=/#|\.prototype\./,Uv=function(e,t){var n=E0e[I0e(e)];return n===P0e?!0:n===q0e?!1:S0e(t)?w0e(t):!!t},I0e=Uv.normalize=function(e){return String(e).replace(T0e,".").toLowerCase()},E0e=Uv.data={},q0e=Uv.NATIVE="N",P0e=Uv.POLYFILL="P";m4.exports=Uv});var W=I((Xgt,v4)=>{"use strict";var Ex=Qe(),A0e=ki().f,C0e=di(),M0e=rr(),R0e=yx(),O0e=Jc(),k0e=hd();v4.exports=function(e,t){var n=e.target,u=e.global,c=e.stat,a,_,w,q,M,O;if(u?_=Ex:c?_=Ex[n]||R0e(n,{}):_=Ex[n]&&Ex[n].prototype,_)for(w in t){if(M=t[w],e.dontCallGetSet?(O=A0e(_,w),q=O&&O.value):q=_[w],a=k0e(u?w:n+(c?".":"#")+w,e.forced),!a&&q!==void 0){if(typeof M==typeof q)continue;O0e(M,q)}(e.sham||q&&q.sham)&&C0e(M,"sham",!0),M0e(_,w,M,e)}}});var qx=I((Jgt,y4)=>{"use strict";var D0e=_t(),L0e=D0e("toStringTag"),g4={};g4[L0e]="z";y4.exports=String(g4)==="[object z]"});var An=I((Qgt,_4)=>{"use strict";var z0e=qx(),F0e=Rt(),Px=Wi(),B0e=_t(),N0e=B0e("toStringTag"),j0e=Object,U0e=Px(function(){return arguments}())==="Arguments",$0e=function(e,t){try{return e[t]}catch(n){}};_4.exports=z0e?Px:function(e){var t,n,u;return e===void 0?"Undefined":e===null?"Null":typeof(n=$0e(t=j0e(e),N0e))=="string"?n:U0e?Px(t):(u=Px(t))==="Object"&&F0e(t.callee)?"Arguments":u}});var It=I((eyt,x4)=>{"use strict";var V0e=An(),G0e=String;x4.exports=function(e){if(V0e(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return G0e(e)}});var Qc=I((tyt,b4)=>{"use strict";var Z0e=yq(),H0e=Tx();b4.exports=Object.keys||function(t){return Z0e(t,H0e)}});var Ax=I(w4=>{"use strict";var W0e=dt(),K0e=rq(),Y0e=dr(),X0e=tt(),J0e=fi(),Q0e=Qc();w4.f=W0e&&!K0e?Object.defineProperties:function(t,n){X0e(t);for(var u=J0e(n),c=Q0e(n),a=c.length,_=0,w;a>_;)Y0e.f(t,w=c[_++],u[w]);return t}});var _q=I((iyt,S4)=>{"use strict";var exe=bt();S4.exports=exe("document","documentElement")});var Wr=I((nyt,C4)=>{"use strict";var txe=tt(),rxe=Ax(),T4=Tx(),ixe=ud(),nxe=_q(),axe=Lv(),oxe=Fv(),I4=">",E4="<",bq="prototype",wq="script",P4=oxe("IE_PROTO"),xq=function(){},A4=function(e){return E4+wq+I4+e+E4+"/"+wq+I4},q4=function(e){e.write(A4("")),e.close();var t=e.parentWindow.Object;return e=null,t},sxe=function(){var e=axe("iframe"),t="java"+wq+":",n;return e.style.display="none",nxe.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(A4("document.F=Object")),n.close(),n.F},Cx,Mx=function(){try{Cx=new ActiveXObject("htmlfile")}catch(t){}Mx=typeof document!="undefined"?document.domain&&Cx?q4(Cx):sxe():q4(Cx);for(var e=T4.length;e--;)delete Mx[bq][T4[e]];return Mx()};ixe[P4]=!0;C4.exports=Object.create||function(t,n){var u;return t!==null?(xq[bq]=txe(t),u=new xq,xq[bq]=null,u[P4]=t):u=Mx(),n===void 0?u:rxe.f(u,n)}});var Kn=I((ayt,M4)=>{"use strict";var lxe=$e();M4.exports=lxe([].slice)});var Rx=I((oyt,k4)=>{"use strict";var uxe=Wi(),cxe=fi(),R4=uu().f,hxe=Kn(),O4=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],fxe=function(e){try{return R4(e)}catch(t){return hxe(O4)}};k4.exports.f=function(t){return O4&&uxe(t)==="Window"?fxe(t):R4(cxe(t))}});var Sr=I((syt,L4)=>{"use strict";var D4=Nv(),dxe=dr();L4.exports=function(e,t,n){return n.get&&D4(n.get,t,{getter:!0}),n.set&&D4(n.set,t,{setter:!0}),dxe.f(e,t,n)}});var Sq=I(z4=>{"use strict";var pxe=_t();z4.f=pxe});var Ox=I((uyt,F4)=>{"use strict";var mxe=Qe();F4.exports=mxe});var Dr=I((cyt,N4)=>{"use strict";var B4=Ox(),vxe=Ot(),gxe=Sq(),yxe=dr().f;N4.exports=function(e){var t=B4.Symbol||(B4.Symbol={});vxe(t,e)||yxe(t,e,{value:gxe.f(e)})}});var Tq=I((hyt,j4)=>{"use strict";var _xe=et(),xxe=bt(),bxe=_t(),wxe=rr();j4.exports=function(){var e=xxe("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,u=bxe("toPrimitive");t&&!t[u]&&wxe(t,u,function(c){return _xe(n,this)},{arity:1})}});var Cn=I((fyt,$4)=>{"use strict";var Sxe=dr().f,Txe=Ot(),Ixe=_t(),U4=Ixe("toStringTag");$4.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!Txe(e,U4)&&Sxe(e,U4,{configurable:!0,value:t})}});var cu=I((dyt,V4)=>{"use strict";var Exe=Wi(),qxe=$e();V4.exports=function(e){if(Exe(e)==="Function")return qxe(e)}});var sr=I((pyt,Z4)=>{"use strict";var G4=cu(),Pxe=wt(),Axe=sd(),Cxe=G4(G4.bind);Z4.exports=function(e,t){return Pxe(e),t===void 0?e:Axe?Cxe(e,t):function(){return e.apply(t,arguments)}}});var _o=I((myt,H4)=>{"use strict";var Mxe=Wi();H4.exports=Array.isArray||function(t){return Mxe(t)==="Array"}});var xo=I((vyt,J4)=>{"use strict";var Rxe=$e(),Oxe=He(),W4=Rt(),kxe=An(),Dxe=bt(),Lxe=zv(),K4=function(){},Y4=Dxe("Reflect","construct"),Iq=/^\s*(?:class|function)\b/,zxe=Rxe(Iq.exec),Fxe=!Iq.test(K4),$v=function(t){if(!W4(t))return!1;try{return Y4(K4,[],t),!0}catch(n){return!1}},X4=function(t){if(!W4(t))return!1;switch(kxe(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Fxe||!!zxe(Iq,Lxe(t))}catch(n){return!0}};X4.sham=!0;J4.exports=!Y4||Oxe(function(){var e;return $v($v.call)||!$v(Object)||!$v(function(){e=!0})||e})?X4:$v});var r5=I((gyt,t5)=>{"use strict";var Q4=_o(),Bxe=xo(),Nxe=vt(),jxe=_t(),Uxe=jxe("species"),e5=Array;t5.exports=function(e){var t;return Q4(e)&&(t=e.constructor,Bxe(t)&&(t===e5||Q4(t.prototype))?t=void 0:Nxe(t)&&(t=t[Uxe],t===null&&(t=void 0))),t===void 0?e5:t}});var fd=I((yyt,i5)=>{"use strict";var $xe=r5();i5.exports=function(e,t){return new($xe(e))(t===0?0:t)}});var Kr=I((_yt,a5)=>{"use strict";var Vxe=sr(),Gxe=$e(),Zxe=Bs(),Hxe=zt(),Wxe=Vt(),Kxe=fd(),n5=Gxe([].push),hu=function(e){var t=e===1,n=e===2,u=e===3,c=e===4,a=e===6,_=e===7,w=e===5||a;return function(q,M,O,k){for(var $=Hxe(q),fe=Zxe($),Pe=Wxe(fe),Se=Vxe(M,O),ne=0,re=k||Kxe,ae=t?re(q,Pe):n||_?re(q,0):void 0,_e,Te;Pe>ne;ne++)if((w||ne in fe)&&(_e=fe[ne],Te=Se(_e,ne,$),e))if(t)ae[ne]=Te;else if(Te)switch(e){case 3:return!0;case 5:return _e;case 6:return ne;case 2:n5(ae,_e)}else switch(e){case 4:return!1;case 7:n5(ae,_e)}return a?-1:u||c?c:ae}};a5.exports={forEach:hu(0),map:hu(1),filter:hu(2),some:hu(3),every:hu(4),find:hu(5),findIndex:hu(6),filterReject:hu(7)}});var w5=I(()=>{"use strict";var kx=W(),Zv=Qe(),kq=et(),Yxe=$e(),Xxe=Kt(),dd=dt(),pd=ou(),Jxe=He(),Di=Ot(),Qxe=Ki(),Aq=tt(),Dx=fi(),Dq=Ko(),ebe=It(),Cq=Zn(),md=Wr(),l5=Qc(),tbe=uu(),u5=Rx(),rbe=jv(),c5=ki(),h5=dr(),ibe=Ax(),f5=Ov(),Eq=rr(),nbe=Sr(),Lq=js(),abe=Fv(),d5=ud(),o5=lu(),obe=_t(),sbe=Sq(),lbe=Dr(),ube=Tq(),cbe=Cn(),p5=Qt(),Lx=Kr().forEach,Yn=abe("hidden"),zx="Symbol",Gv="prototype",hbe=p5.set,s5=p5.getterFor(zx),za=Object[Gv],eh=Zv.Symbol,Vv=eh&&eh[Gv],fbe=Zv.RangeError,dbe=Zv.TypeError,qq=Zv.QObject,m5=c5.f,th=h5.f,v5=u5.f,pbe=f5.f,g5=Yxe([].push),Us=Lq("symbols"),Hv=Lq("op-symbols"),mbe=Lq("wks"),Mq=!qq||!qq[Gv]||!qq[Gv].findChild,y5=function(e,t,n){var u=m5(za,t);u&&delete za[t],th(e,t,n),u&&e!==za&&th(za,t,u)},Rq=dd&&Jxe(function(){return md(th({},"a",{get:function(){return th(this,"a",{value:7}).a}})).a!==7})?y5:th,Pq=function(e,t){var n=Us[e]=md(Vv);return hbe(n,{type:zx,tag:e,description:t}),dd||(n.description=t),n},Fx=function(t,n,u){t===za&&Fx(Hv,n,u),Aq(t);var c=Dq(n);return Aq(u),Di(Us,c)?(u.enumerable?(Di(t,Yn)&&t[Yn][c]&&(t[Yn][c]=!1),u=md(u,{enumerable:Cq(0,!1)})):(Di(t,Yn)||th(t,Yn,Cq(1,md(null))),t[Yn][c]=!0),Rq(t,c,u)):th(t,c,u)},zq=function(t,n){Aq(t);var u=Dx(n),c=l5(u).concat(b5(u));return Lx(c,function(a){(!dd||kq(Oq,u,a))&&Fx(t,a,u[a])}),t},vbe=function(t,n){return n===void 0?md(t):zq(md(t),n)},Oq=function(t){var n=Dq(t),u=kq(pbe,this,n);return this===za&&Di(Us,n)&&!Di(Hv,n)?!1:u||!Di(this,n)||!Di(Us,n)||Di(this,Yn)&&this[Yn][n]?u:!0},_5=function(t,n){var u=Dx(t),c=Dq(n);if(!(u===za&&Di(Us,c)&&!Di(Hv,c))){var a=m5(u,c);return a&&Di(Us,c)&&!(Di(u,Yn)&&u[Yn][c])&&(a.enumerable=!0),a}},x5=function(t){var n=v5(Dx(t)),u=[];return Lx(n,function(c){!Di(Us,c)&&!Di(d5,c)&&g5(u,c)}),u},b5=function(e){var t=e===za,n=v5(t?Hv:Dx(e)),u=[];return Lx(n,function(c){Di(Us,c)&&(!t||Di(za,c))&&g5(u,Us[c])}),u};pd||(eh=function(){if(Qxe(Vv,this))throw new dbe("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:ebe(arguments[0]),n=o5(t),u=function(c){var a=this===void 0?Zv:this;a===za&&kq(u,Hv,c),Di(a,Yn)&&Di(a[Yn],n)&&(a[Yn][n]=!1);var _=Cq(1,c);try{Rq(a,n,_)}catch(w){if(!(w instanceof fbe))throw w;y5(a,n,_)}};return dd&&Mq&&Rq(za,n,{configurable:!0,set:u}),Pq(n,t)},Vv=eh[Gv],Eq(Vv,"toString",function(){return s5(this).tag}),Eq(eh,"withoutSetter",function(e){return Pq(o5(e),e)}),f5.f=Oq,h5.f=Fx,ibe.f=zq,c5.f=_5,tbe.f=u5.f=x5,rbe.f=b5,sbe.f=function(e){return Pq(obe(e),e)},dd&&(nbe(Vv,"description",{configurable:!0,get:function(){return s5(this).description}}),Xxe||Eq(za,"propertyIsEnumerable",Oq,{unsafe:!0})));kx({global:!0,constructor:!0,wrap:!0,forced:!pd,sham:!pd},{Symbol:eh});Lx(l5(mbe),function(e){lbe(e)});kx({target:zx,stat:!0,forced:!pd},{useSetter:function(){Mq=!0},useSimple:function(){Mq=!1}});kx({target:"Object",stat:!0,forced:!pd,sham:!dd},{create:vbe,defineProperty:Fx,defineProperties:zq,getOwnPropertyDescriptor:_5});kx({target:"Object",stat:!0,forced:!pd},{getOwnPropertyNames:x5});ube();cbe(eh,zx);d5[Yn]=!0});var Fq=I((wyt,S5)=>{"use strict";var gbe=ou();S5.exports=gbe&&!!Symbol.for&&!!Symbol.keyFor});var I5=I(()=>{"use strict";var ybe=W(),_be=bt(),xbe=Ot(),bbe=It(),T5=js(),wbe=Fq(),Bq=T5("string-to-symbol-registry"),Sbe=T5("symbol-to-string-registry");ybe({target:"Symbol",stat:!0,forced:!wbe},{for:function(e){var t=bbe(e);if(xbe(Bq,t))return Bq[t];var n=_be("Symbol")(t);return Bq[t]=n,Sbe[n]=t,n}})});var q5=I(()=>{"use strict";var Tbe=W(),Ibe=Ot(),Ebe=Ns(),qbe=su(),Pbe=js(),Abe=Fq(),E5=Pbe("symbol-to-string-registry");Tbe({target:"Symbol",stat:!0,forced:!Abe},{keyFor:function(t){if(!Ebe(t))throw new TypeError(qbe(t)+" is not a symbol");if(Ibe(E5,t))return E5[t]}})});var Yi=I((qyt,M5)=>{"use strict";var Cbe=sd(),C5=Function.prototype,P5=C5.apply,A5=C5.call;M5.exports=typeof Reflect=="object"&&Reflect.apply||(Cbe?A5.bind(P5):function(){return A5.apply(P5,arguments)})});var Nq=I((Pyt,D5)=>{"use strict";var Mbe=$e(),R5=_o(),Rbe=Rt(),O5=Wi(),Obe=It(),k5=Mbe([].push);D5.exports=function(e){if(Rbe(e))return e;if(R5(e)){for(var t=e.length,n=[],u=0;u<t;u++){var c=e[u];typeof c=="string"?k5(n,c):(typeof c=="number"||O5(c)==="Number"||O5(c)==="String")&&k5(n,Obe(c))}var a=n.length,_=!0;return function(w,q){if(_)return _=!1,q;if(R5(this))return q;for(var M=0;M<a;M++)if(n[M]===w)return q}}}});var jq=I(()=>{"use strict";var kbe=W(),$5=bt(),V5=Yi(),Dbe=et(),Wv=$e(),G5=He(),L5=Rt(),z5=Ns(),Z5=Kn(),Lbe=Nq(),zbe=ou(),Fbe=String,fu=$5("JSON","stringify"),Bx=Wv(/./.exec),F5=Wv("".charAt),Bbe=Wv("".charCodeAt),Nbe=Wv("".replace),jbe=Wv(1 .toString),Ube=/[\uD800-\uDFFF]/g,B5=/^[\uD800-\uDBFF]$/,N5=/^[\uDC00-\uDFFF]$/,j5=!zbe||G5(function(){var e=$5("Symbol")("stringify detection");return fu([e])!=="[null]"||fu({a:e})!=="{}"||fu(Object(e))!=="{}"}),U5=G5(function(){return fu("\uDF06\uD834")!=="\"\\udf06\\ud834\""||fu("\uDEAD")!=="\"\\udead\""}),$be=function(e,t){var n=Z5(arguments),u=Lbe(t);if(!(!L5(u)&&(e===void 0||z5(e))))return n[1]=function(c,a){if(L5(u)&&(a=Dbe(u,this,Fbe(c),a)),!z5(a))return a},V5(fu,null,n)},Vbe=function(e,t,n){var u=F5(n,t-1),c=F5(n,t+1);return Bx(B5,e)&&!Bx(N5,c)||Bx(N5,e)&&!Bx(B5,u)?"\\u"+jbe(Bbe(e,0),16):e};fu&&kbe({target:"JSON",stat:!0,arity:3,forced:j5||U5},{stringify:function(t,n,u){var c=Z5(arguments),a=V5(j5?$be:fu,null,c);return U5&&typeof a=="string"?Nbe(a,Ube,Vbe):a}})});var W5=I(()=>{"use strict";var Gbe=W(),Zbe=ou(),Hbe=He(),H5=jv(),Wbe=zt(),Kbe=!Zbe||Hbe(function(){H5.f(1)});Gbe({target:"Object",stat:!0,forced:Kbe},{getOwnPropertySymbols:function(t){var n=H5.f;return n?n(Wbe(t)):[]}})});var K5=I(()=>{"use strict";w5();I5();q5();jq();W5()});var r6=I(()=>{"use strict";var Ybe=W(),Xbe=dt(),Jbe=Qe(),Nx=$e(),Qbe=Ot(),e1e=Rt(),t1e=Ki(),r1e=It(),i1e=Sr(),n1e=Jc(),$s=Jbe.Symbol,rh=$s&&$s.prototype;Xbe&&e1e($s)&&(!("description"in rh)||$s().description!==void 0)&&(Uq={},Kv=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:r1e(arguments[0]),n=t1e(rh,this)?new $s(t):t===void 0?$s():$s(t);return t===""&&(Uq[n]=!0),n},n1e(Kv,$s),Kv.prototype=rh,rh.constructor=Kv,Y5=String($s("description detection"))==="Symbol(description detection)",X5=Nx(rh.valueOf),J5=Nx(rh.toString),Q5=/^Symbol\((.*)\)[^)]+$/,e6=Nx("".replace),t6=Nx("".slice),i1e(rh,"description",{configurable:!0,get:function(){var t=X5(this);if(Qbe(Uq,t))return"";var n=J5(t),u=Y5?t6(n,7,-1):e6(n,Q5,"$1");return u===""?void 0:u}}),Ybe({global:!0,constructor:!0,forced:!0},{Symbol:Kv}));var Uq,Kv,Y5,X5,J5,Q5,e6,t6});var i6=I(()=>{"use strict";var a1e=Dr();a1e("asyncIterator")});var n6=I(()=>{"use strict";var o1e=Dr();o1e("hasInstance")});var a6=I(()=>{"use strict";var s1e=Dr();s1e("isConcatSpreadable")});var o6=I(()=>{"use strict";var l1e=Dr();l1e("iterator")});var s6=I(()=>{"use strict";var u1e=Dr();u1e("match")});var l6=I(()=>{"use strict";var c1e=Dr();c1e("matchAll")});var u6=I(()=>{"use strict";var h1e=Dr();h1e("replace")});var c6=I(()=>{"use strict";var f1e=Dr();f1e("search")});var h6=I(()=>{"use strict";var d1e=Dr();d1e("species")});var f6=I(()=>{"use strict";var p1e=Dr();p1e("split")});var d6=I(()=>{"use strict";var m1e=Dr(),v1e=Tq();m1e("toPrimitive");v1e()});var p6=I(()=>{"use strict";var g1e=bt(),y1e=Dr(),_1e=Cn();y1e("toStringTag");_1e(g1e("Symbol"),"Symbol")});var m6=I(()=>{"use strict";var x1e=Dr();x1e("unscopables")});var Yv=I((u_t,v6)=>{"use strict";var b1e=$e(),w1e=wt();v6.exports=function(e,t,n){try{return b1e(w1e(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(u){}}});var $q=I((c_t,g6)=>{"use strict";var S1e=vt();g6.exports=function(e){return S1e(e)||e===null}});var Vq=I((h_t,y6)=>{"use strict";var T1e=$q(),I1e=String,E1e=TypeError;y6.exports=function(e){if(T1e(e))return e;throw new E1e("Can't set "+I1e(e)+" as a prototype")}});var Fa=I((f_t,_6)=>{"use strict";var q1e=Yv(),P1e=vt(),A1e=mr(),C1e=Vq();_6.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},n;try{n=q1e(Object.prototype,"__proto__","set"),n(t,[]),e=t instanceof Array}catch(u){}return function(c,a){return A1e(c),C1e(a),P1e(c)&&(e?n(c,a):c.__proto__=a),c}}():void 0)});var Gq=I((d_t,x6)=>{"use strict";var M1e=dr().f;x6.exports=function(e,t,n){n in e||M1e(e,n,{configurable:!0,get:function(){return t[n]},set:function(u){t[n]=u}})}});var du=I((p_t,w6)=>{"use strict";var R1e=Rt(),O1e=vt(),b6=Fa();w6.exports=function(e,t,n){var u,c;return b6&&R1e(u=t.constructor)&&u!==n&&O1e(c=u.prototype)&&c!==n.prototype&&b6(e,c),e}});var ih=I((m_t,S6)=>{"use strict";var k1e=It();S6.exports=function(e,t){return e===void 0?arguments.length<2?"":t:k1e(e)}});var Zq=I((v_t,T6)=>{"use strict";var D1e=vt(),L1e=di();T6.exports=function(e,t){D1e(t)&&"cause"in t&&L1e(e,"cause",t.cause)}});var jx=I((g_t,q6)=>{"use strict";var z1e=$e(),I6=Error,F1e=z1e("".replace),B1e=function(e){return String(new I6(e).stack)}("zxcasd"),E6=/\n\s*at [^:]*:[^\n]*/,N1e=E6.test(B1e);q6.exports=function(e,t){if(N1e&&typeof e=="string"&&!I6.prepareStackTrace)for(;t--;)e=F1e(e,E6,"");return e}});var Hq=I((y_t,P6)=>{"use strict";var j1e=He(),U1e=Zn();P6.exports=!j1e(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",U1e(1,7)),e.stack!==7):!0})});var Ux=I((__t,C6)=>{"use strict";var $1e=di(),V1e=jx(),G1e=Hq(),A6=Error.captureStackTrace;C6.exports=function(e,t,n,u){G1e&&(A6?A6(e,t):$1e(e,"stack",V1e(n,u)))}});var Wq=I((x_t,z6)=>{"use strict";var M6=bt(),Z1e=Ot(),R6=di(),H1e=Ki(),O6=Fa(),k6=Jc(),D6=Gq(),W1e=du(),K1e=ih(),Y1e=Zq(),X1e=Ux(),J1e=dt(),L6=Kt();z6.exports=function(e,t,n,u){var c="stackTraceLimit",a=u?2:1,_=e.split("."),w=_[_.length-1],q=M6.apply(null,_);if(q){var M=q.prototype;if(!L6&&Z1e(M,"cause")&&delete M.cause,!n)return q;var O=M6("Error"),k=t(function($,fe){var Pe=K1e(u?fe:$,void 0),Se=u?new q($):new q;return Pe!==void 0&&R6(Se,"message",Pe),X1e(Se,k,Se.stack,2),this&&H1e(M,this)&&W1e(Se,this,k),arguments.length>a&&Y1e(Se,arguments[a]),Se});if(k.prototype=M,w!=="Error"?O6?O6(k,O):k6(k,O,{name:!0}):J1e&&c in q&&(D6(k,q,c),D6(k,q,"prepareStackTrace")),k6(k,q),!L6)try{M.name!==w&&R6(M,"name",w),M.constructor=k}catch($){}return k}}});var j6=I(()=>{"use strict";var B6=W(),Q1e=Qe(),Yo=Yi(),N6=Wq(),Kq="WebAssembly",F6=Q1e[Kq],$x=new Error("e",{cause:7}).cause!==7,nh=function(e,t){var n={};n[e]=N6(e,t,$x),B6({global:!0,constructor:!0,arity:1,forced:$x},n)},Yq=function(e,t){if(F6&&F6[e]){var n={};n[e]=N6(Kq+"."+e,t,$x),B6({target:Kq,stat:!0,constructor:!0,arity:1,forced:$x},n)}};nh("Error",function(e){return function(n){return Yo(e,this,arguments)}});nh("EvalError",function(e){return function(n){return Yo(e,this,arguments)}});nh("RangeError",function(e){return function(n){return Yo(e,this,arguments)}});nh("ReferenceError",function(e){return function(n){return Yo(e,this,arguments)}});nh("SyntaxError",function(e){return function(n){return Yo(e,this,arguments)}});nh("TypeError",function(e){return function(n){return Yo(e,this,arguments)}});nh("URIError",function(e){return function(n){return Yo(e,this,arguments)}});Yq("CompileError",function(e){return function(n){return Yo(e,this,arguments)}});Yq("LinkError",function(e){return function(n){return Yo(e,this,arguments)}});Yq("RuntimeError",function(e){return function(n){return Yo(e,this,arguments)}})});var Xq=I((S_t,$6)=>{"use strict";var ewe=dt(),twe=He(),rwe=tt(),U6=ih(),Vx=Error.prototype.toString,iwe=twe(function(){if(ewe){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(Vx.call(e)!=="true")return!0}return Vx.call({message:1,name:2})!=="2: 1"||Vx.call({})!=="Error"});$6.exports=iwe?function(){var t=rwe(this),n=U6(t.name,"Error"),u=U6(t.message);return n?u?n+": "+u:n:u}:Vx});var Z6=I(()=>{"use strict";var nwe=rr(),V6=Xq(),G6=Error.prototype;G6.toString!==V6&&nwe(G6,"toString",V6)});var Gx=I((E_t,H6)=>{"use strict";var awe=He();H6.exports=!awe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var pi=I((q_t,K6)=>{"use strict";var owe=Ot(),swe=Rt(),lwe=zt(),uwe=Fv(),cwe=Gx(),W6=uwe("IE_PROTO"),Jq=Object,hwe=Jq.prototype;K6.exports=cwe?Jq.getPrototypeOf:function(e){var t=lwe(e);if(owe(t,W6))return t[W6];var n=t.constructor;return swe(n)&&t instanceof n?n.prototype:t instanceof Jq?hwe:null}});var ah=I((P_t,Y6)=>{"use strict";Y6.exports={}});var Zx=I((A_t,X6)=>{"use strict";var fwe=_t(),dwe=ah(),pwe=fwe("iterator"),mwe=Array.prototype;X6.exports=function(e){return e!==void 0&&(dwe.Array===e||mwe[pwe]===e)}});var Xo=I((C_t,Q6)=>{"use strict";var vwe=An(),J6=Hr(),gwe=Hn(),ywe=ah(),_we=_t(),xwe=_we("iterator");Q6.exports=function(e){if(!gwe(e))return J6(e,xwe)||J6(e,"@@iterator")||ywe[vwe(e)]}});var pu=I((M_t,eU)=>{"use strict";var bwe=et(),wwe=wt(),Swe=tt(),Twe=su(),Iwe=Xo(),Ewe=TypeError;eU.exports=function(e,t){var n=arguments.length<2?Iwe(e):t;if(wwe(n))return Swe(bwe(n,e));throw new Ewe(Twe(e)+" is not iterable")}});var Li=I((R_t,rU)=>{"use strict";var qwe=et(),tU=tt(),Pwe=Hr();rU.exports=function(e,t,n){var u,c;tU(e);try{if(u=Pwe(e,"return"),!u){if(t==="throw")throw n;return n}u=qwe(u,e)}catch(a){c=!0,u=a}if(t==="throw")throw n;if(c)throw u;return tU(u),n}});var Lr=I((O_t,oU)=>{"use strict";var Awe=sr(),Cwe=et(),Mwe=tt(),Rwe=su(),Owe=Zx(),kwe=Vt(),iU=Ki(),Dwe=pu(),Lwe=Xo(),nU=Li(),zwe=TypeError,Hx=function(e,t){this.stopped=e,this.result=t},aU=Hx.prototype;oU.exports=function(e,t,n){var u=n&&n.that,c=!!(n&&n.AS_ENTRIES),a=!!(n&&n.IS_RECORD),_=!!(n&&n.IS_ITERATOR),w=!!(n&&n.INTERRUPTED),q=Awe(t,u),M,O,k,$,fe,Pe,Se,ne=function(ae){return M&&nU(M,"normal",ae),new Hx(!0,ae)},re=function(ae){return c?(Mwe(ae),w?q(ae[0],ae[1],ne):q(ae[0],ae[1])):w?q(ae,ne):q(ae)};if(a)M=e.iterator;else if(_)M=e;else{if(O=Lwe(e),!O)throw new zwe(Rwe(e)+" is not iterable");if(Owe(O)){for(k=0,$=kwe(e);$>k;k++)if(fe=re(e[k]),fe&&iU(aU,fe))return fe;return new Hx(!1)}M=Dwe(e,O)}for(Pe=a?e.next:M.next;!(Se=Cwe(Pe,M)).done;){try{fe=re(Se.value)}catch(ae){nU(M,"throw",ae)}if(typeof fe=="object"&&fe&&iU(aU,fe))return fe}return new Hx(!1)}});var lU=I(()=>{"use strict";var Fwe=W(),Bwe=Ki(),Nwe=pi(),Wx=Fa(),jwe=Jc(),sU=Wr(),Qq=di(),e2=Zn(),Uwe=Zq(),$we=Ux(),Vwe=Lr(),Gwe=ih(),Zwe=_t(),Hwe=Zwe("toStringTag"),Kx=Error,Wwe=[].push,vd=function(t,n){var u=Bwe(t2,this),c;Wx?c=Wx(new Kx,u?Nwe(this):t2):(c=u?this:sU(t2),Qq(c,Hwe,"Error")),n!==void 0&&Qq(c,"message",Gwe(n)),$we(c,vd,c.stack,1),arguments.length>2&&Uwe(c,arguments[2]);var a=[];return Vwe(t,Wwe,{that:a}),Qq(c,"errors",a),c};Wx?Wx(vd,Kx):jwe(vd,Kx,{name:!0});var t2=vd.prototype=sU(Kx.prototype,{constructor:e2(1,vd),message:e2(1,""),name:e2(1,"AggregateError")});Fwe({global:!0,constructor:!0,arity:2},{AggregateError:vd})});var r2=I(()=>{"use strict";lU()});var fU=I(()=>{"use strict";var Kwe=W(),Ywe=bt(),Xwe=Yi(),uU=He(),Jwe=Wq(),i2="AggregateError",cU=Ywe(i2),hU=!uU(function(){return cU([1]).errors[0]!==1})&&uU(function(){return cU([1],i2,{cause:7}).cause!==7});Kwe({global:!0,constructor:!0,arity:2,forced:hU},{AggregateError:Jwe(i2,function(e){return function(n,u){return Xwe(e,this,arguments)}},hU,!0)})});var zr=I((N_t,dU)=>{"use strict";var Qwe=_t(),eSe=Wr(),tSe=dr().f,n2=Qwe("unscopables"),a2=Array.prototype;a2[n2]===void 0&&tSe(a2,n2,{configurable:!0,value:eSe(null)});dU.exports=function(e){a2[n2][e]=!0}});var o2=I(()=>{"use strict";var rSe=W(),iSe=zt(),nSe=Vt(),aSe=wr(),oSe=zr();rSe({target:"Array",proto:!0},{at:function(t){var n=iSe(this),u=nSe(n),c=aSe(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:n[a]}});oSe("at")});var mu=I(($_t,pU)=>{"use strict";var sSe=TypeError,lSe=9007199254740991;pU.exports=function(e){if(e>lSe)throw sSe("Maximum allowed index exceeded");return e}});var Ba=I((V_t,mU)=>{"use strict";var uSe=dt(),cSe=dr(),hSe=Zn();mU.exports=function(e,t,n){uSe?cSe.f(e,t,hSe(0,n)):e[t]=n}});var gd=I((G_t,vU)=>{"use strict";var fSe=He(),dSe=_t(),pSe=vo(),mSe=dSe("species");vU.exports=function(e){return pSe>=51||!fSe(function(){var t=[],n=t.constructor={};return n[mSe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var xU=I(()=>{"use strict";var vSe=W(),gSe=He(),ySe=_o(),_Se=vt(),xSe=zt(),bSe=Vt(),gU=mu(),yU=Ba(),wSe=fd(),SSe=gd(),TSe=_t(),ISe=vo(),_U=TSe("isConcatSpreadable"),ESe=ISe>=51||!gSe(function(){var e=[];return e[_U]=!1,e.concat()[0]!==e}),qSe=function(e){if(!_Se(e))return!1;var t=e[_U];return t!==void 0?!!t:ySe(e)},PSe=!ESe||!SSe("concat");vSe({target:"Array",proto:!0,arity:1,forced:PSe},{concat:function(t){var n=xSe(this),u=wSe(n,0),c=0,a,_,w,q,M;for(a=-1,w=arguments.length;a<w;a++)if(M=a===-1?n:arguments[a],qSe(M))for(q=bSe(M),gU(c+q),_=0;_<q;_++,c++)_ in M&&yU(u,c,M[_]);else gU(c+1),yU(u,c++,M);return u.length=c,u}})});var Xv=I((W_t,wU)=>{"use strict";var bU=su(),ASe=TypeError;wU.exports=function(e,t){if(!delete e[t])throw new ASe("Cannot delete property "+bU(t)+" of "+bU(e))}});var l2=I((K_t,SU)=>{"use strict";var CSe=zt(),s2=yo(),MSe=Vt(),RSe=Xv(),OSe=Math.min;SU.exports=[].copyWithin||function(t,n){var u=CSe(this),c=MSe(u),a=s2(t,c),_=s2(n,c),w=arguments.length>2?arguments[2]:void 0,q=OSe((w===void 0?c:s2(w,c))-_,c-a),M=1;for(_<a&&a<_+q&&(M=-1,_+=q-1,a+=q-1);q-->0;)_ in u?u[a]=u[_]:RSe(u,a),a+=M,_+=M;return u}});var TU=I(()=>{"use strict";var kSe=W(),DSe=l2(),LSe=zr();kSe({target:"Array",proto:!0},{copyWithin:DSe});LSe("copyWithin")});var Na=I((J_t,IU)=>{"use strict";var zSe=He();IU.exports=function(e,t){var n=[][e];return!!n&&zSe(function(){n.call(null,t||function(){return 1},1)})}});var EU=I(()=>{"use strict";var FSe=W(),BSe=Kr().every,NSe=Na(),jSe=NSe("every");FSe({target:"Array",proto:!0,forced:!jSe},{every:function(t){return BSe(this,t,arguments.length>1?arguments[1]:void 0)}})});var Yx=I((t0t,PU)=>{"use strict";var USe=zt(),qU=yo(),$Se=Vt();PU.exports=function(t){for(var n=USe(this),u=$Se(n),c=arguments.length,a=qU(c>1?arguments[1]:void 0,u),_=c>2?arguments[2]:void 0,w=_===void 0?u:qU(_,u);w>a;)n[a++]=t;return n}});var AU=I(()=>{"use strict";var VSe=W(),GSe=Yx(),ZSe=zr();VSe({target:"Array",proto:!0},{fill:GSe});ZSe("fill")});var CU=I(()=>{"use strict";var HSe=W(),WSe=Kr().filter,KSe=gd(),YSe=KSe("filter");HSe({target:"Array",proto:!0,forced:!YSe},{filter:function(t){return WSe(this,t,arguments.length>1?arguments[1]:void 0)}})});var RU=I(()=>{"use strict";var XSe=W(),JSe=Kr().find,QSe=zr(),u2="find",MU=!0;u2 in[]&&Array(1)[u2](function(){MU=!1});XSe({target:"Array",proto:!0,forced:MU},{find:function(t){return JSe(this,t,arguments.length>1?arguments[1]:void 0)}});QSe(u2)});var kU=I(()=>{"use strict";var eTe=W(),tTe=Kr().findIndex,rTe=zr(),c2="findIndex",OU=!0;c2 in[]&&Array(1)[c2](function(){OU=!1});eTe({target:"Array",proto:!0,forced:OU},{findIndex:function(t){return tTe(this,t,arguments.length>1?arguments[1]:void 0)}});rTe(c2)});var Jv=I((c0t,LU)=>{"use strict";var iTe=sr(),nTe=Bs(),aTe=zt(),oTe=Vt(),DU=function(e){var t=e===1;return function(n,u,c){for(var a=aTe(n),_=nTe(a),w=oTe(_),q=iTe(u,c),M,O;w-->0;)if(M=_[w],O=q(M,w,a),O)switch(e){case 0:return M;case 1:return w}return t?-1:void 0}};LU.exports={findLast:DU(0),findLastIndex:DU(1)}});var h2=I(()=>{"use strict";var sTe=W(),lTe=Jv().findLast,uTe=zr();sTe({target:"Array",proto:!0},{findLast:function(t){return lTe(this,t,arguments.length>1?arguments[1]:void 0)}});uTe("findLast")});var f2=I(()=>{"use strict";var cTe=W(),hTe=Jv().findLastIndex,fTe=zr();cTe({target:"Array",proto:!0},{findLastIndex:function(t){return hTe(this,t,arguments.length>1?arguments[1]:void 0)}});fTe("findLastIndex")});var d2=I((m0t,FU)=>{"use strict";var dTe=_o(),pTe=Vt(),mTe=mu(),vTe=sr(),zU=function(e,t,n,u,c,a,_,w){for(var q=c,M=0,O=_?vTe(_,w):!1,k,$;M<u;)M in n&&(k=O?O(n[M],M,t):n[M],a>0&&dTe(k)?($=pTe(k),q=zU(e,t,k,$,q,a-1)-1):(mTe(q+1),e[q]=k),q++),M++;return q};FU.exports=zU});var BU=I(()=>{"use strict";var gTe=W(),yTe=d2(),_Te=zt(),xTe=Vt(),bTe=wr(),wTe=fd();gTe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,n=_Te(this),u=xTe(n),c=wTe(n,0);return c.length=yTe(c,n,n,u,0,t===void 0?1:bTe(t)),c}})});var NU=I(()=>{"use strict";var STe=W(),TTe=d2(),ITe=wt(),ETe=zt(),qTe=Vt(),PTe=fd();STe({target:"Array",proto:!0},{flatMap:function(t){var n=ETe(this),u=qTe(n),c;return ITe(t),c=PTe(n,0),c.length=TTe(c,n,n,u,0,1,t,arguments.length>1?arguments[1]:void 0),c}})});var p2=I((x0t,jU)=>{"use strict";var ATe=Kr().forEach,CTe=Na(),MTe=CTe("forEach");jU.exports=MTe?[].forEach:function(t){return ATe(this,t,arguments.length>1?arguments[1]:void 0)}});var $U=I(()=>{"use strict";var RTe=W(),UU=p2();RTe({target:"Array",proto:!0,forced:[].forEach!==UU},{forEach:UU})});var Xx=I((S0t,VU)=>{"use strict";var OTe=tt(),kTe=Li();VU.exports=function(e,t,n,u){try{return u?t(OTe(n)[0],n[1]):t(n)}catch(c){kTe(e,"throw",c)}}});var m2=I((T0t,HU)=>{"use strict";var DTe=sr(),LTe=et(),zTe=zt(),FTe=Xx(),BTe=Zx(),NTe=xo(),jTe=Vt(),GU=Ba(),UTe=pu(),$Te=Xo(),ZU=Array;HU.exports=function(t){var n=zTe(t),u=NTe(this),c=arguments.length,a=c>1?arguments[1]:void 0,_=a!==void 0;_&&(a=DTe(a,c>2?arguments[2]:void 0));var w=$Te(n),q=0,M,O,k,$,fe,Pe;if(w&&!(this===ZU&&BTe(w)))for(O=u?new this:[],$=UTe(n,w),fe=$.next;!(k=LTe(fe,$)).done;q++)Pe=_?FTe($,a,[k.value,q],!0):k.value,GU(O,q,Pe);else for(M=jTe(n),O=u?new this(M):ZU(M);M>q;q++)Pe=_?a(n[q],q):n[q],GU(O,q,Pe);return O.length=q,O}});var Qv=I((I0t,XU)=>{"use strict";var VTe=_t(),KU=VTe("iterator"),YU=!1;try{WU=0,v2={next:function(){return{done:!!WU++}},return:function(){YU=!0}},v2[KU]=function(){return this},Array.from(v2,function(){throw 2})}catch(e){}var WU,v2;XU.exports=function(e,t){try{if(!t&&!YU)return!1}catch(c){return!1}var n=!1;try{var u={};u[KU]=function(){return{next:function(){return{done:n=!0}}}},e(u)}catch(c){}return n}});var JU=I(()=>{"use strict";var GTe=W(),ZTe=m2(),HTe=Qv(),WTe=!HTe(function(e){Array.from(e)});GTe({target:"Array",stat:!0,forced:WTe},{from:ZTe})});var QU=I(()=>{"use strict";var KTe=W(),YTe=cd().includes,XTe=He(),JTe=zr(),QTe=XTe(function(){return!Array(1).includes()});KTe({target:"Array",proto:!0,forced:QTe},{includes:function(t){return YTe(this,t,arguments.length>1?arguments[1]:void 0)}});JTe("includes")});var t$=I(()=>{"use strict";var eIe=W(),tIe=cu(),rIe=cd().indexOf,iIe=Na(),g2=tIe([].indexOf),e$=!!g2&&1/g2([1],1,-0)<0,nIe=e$||!iIe("indexOf");eIe({target:"Array",proto:!0,forced:nIe},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return e$?g2(this,t,n)||0:rIe(this,t,n)}})});var r$=I(()=>{"use strict";var aIe=W(),oIe=_o();aIe({target:"Array",stat:!0},{isArray:oIe})});var vu=I((k0t,a$)=>{"use strict";var sIe=He(),lIe=Rt(),uIe=vt(),cIe=Wr(),i$=pi(),hIe=rr(),fIe=_t(),dIe=Kt(),x2=fIe("iterator"),n$=!1,Vs,y2,_2;[].keys&&(_2=[].keys(),"next"in _2?(y2=i$(i$(_2)),y2!==Object.prototype&&(Vs=y2)):n$=!0);var pIe=!uIe(Vs)||sIe(function(){var e={};return Vs[x2].call(e)!==e});pIe?Vs={}:dIe&&(Vs=cIe(Vs));lIe(Vs[x2])||hIe(Vs,x2,function(){return this});a$.exports={IteratorPrototype:Vs,BUGGY_SAFARI_ITERATORS:n$}});var gu=I((D0t,o$)=>{"use strict";var mIe=vu().IteratorPrototype,vIe=Wr(),gIe=Zn(),yIe=Cn(),_Ie=ah(),xIe=function(){return this};o$.exports=function(e,t,n,u){var c=t+" Iterator";return e.prototype=vIe(mIe,{next:gIe(+!u,n)}),yIe(e,c,!1,!0),_Ie[c]=xIe,e}});var eb=I((L0t,v$)=>{"use strict";var bIe=W(),wIe=et(),Jx=Kt(),p$=Yc(),SIe=Rt(),TIe=gu(),s$=pi(),l$=Fa(),IIe=Cn(),EIe=di(),b2=rr(),qIe=_t(),u$=ah(),m$=vu(),PIe=p$.PROPER,AIe=p$.CONFIGURABLE,c$=m$.IteratorPrototype,Qx=m$.BUGGY_SAFARI_ITERATORS,eg=qIe("iterator"),h$="keys",tg="values",f$="entries",d$=function(){return this};v$.exports=function(e,t,n,u,c,a,_){TIe(n,t,u);var w=function(re){if(re===c&&$)return $;if(!Qx&&re&&re in O)return O[re];switch(re){case h$:return function(){return new n(this,re)};case tg:return function(){return new n(this,re)};case f$:return function(){return new n(this,re)}}return function(){return new n(this)}},q=t+" Iterator",M=!1,O=e.prototype,k=O[eg]||O["@@iterator"]||c&&O[c],$=!Qx&&k||w(c),fe=t==="Array"&&O.entries||k,Pe,Se,ne;if(fe&&(Pe=s$(fe.call(new e)),Pe!==Object.prototype&&Pe.next&&(!Jx&&s$(Pe)!==c$&&(l$?l$(Pe,c$):SIe(Pe[eg])||b2(Pe,eg,d$)),IIe(Pe,q,!0,!0),Jx&&(u$[q]=d$))),PIe&&c===tg&&k&&k.name!==tg&&(!Jx&&AIe?EIe(O,"name",tg):(M=!0,$=function(){return wIe(k,this)})),c)if(Se={values:w(tg),keys:a?$:w(h$),entries:w(f$)},_)for(ne in Se)(Qx||M||!(ne in O))&&b2(O,ne,Se[ne]);else bIe({target:t,proto:!0,forced:Qx||M},Se);return(!Jx||_)&&O[eg]!==$&&b2(O,eg,$,{name:c}),u$[t]=$,Se}});var Ti=I((z0t,g$)=>{"use strict";g$.exports=function(e,t){return{value:e,done:t}}});var rg=I((F0t,w$)=>{"use strict";var CIe=fi(),w2=zr(),y$=ah(),x$=Qt(),MIe=dr().f,RIe=eb(),tb=Ti(),OIe=Kt(),kIe=dt(),b$="Array Iterator",DIe=x$.set,LIe=x$.getterFor(b$);w$.exports=RIe(Array,"Array",function(e,t){DIe(this,{type:b$,target:CIe(e),index:0,kind:t})},function(){var e=LIe(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,tb(void 0,!0);switch(e.kind){case"keys":return tb(n,!1);case"values":return tb(t[n],!1)}return tb([n,t[n]],!1)},"values");var _$=y$.Arguments=y$.Array;w2("keys");w2("values");w2("entries");if(!OIe&&kIe&&_$.name!=="values")try{MIe(_$,"name",{value:"values"})}catch(e){}});var S$=I(()=>{"use strict";var zIe=W(),FIe=$e(),BIe=Bs(),NIe=fi(),jIe=Na(),UIe=FIe([].join),$Ie=BIe!==Object,VIe=$Ie||!jIe("join",",");zIe({target:"Array",proto:!0,forced:VIe},{join:function(t){return UIe(NIe(this),t===void 0?",":t)}})});var T2=I((j0t,I$)=>{"use strict";var GIe=Yi(),ZIe=fi(),HIe=wr(),WIe=Vt(),KIe=Na(),YIe=Math.min,S2=[].lastIndexOf,T$=!!S2&&1/[1].lastIndexOf(1,-0)<0,XIe=KIe("lastIndexOf"),JIe=T$||!XIe;I$.exports=JIe?function(t){if(T$)return GIe(S2,this,arguments)||0;var n=ZIe(this),u=WIe(n);if(u===0)return-1;var c=u-1;for(arguments.length>1&&(c=YIe(c,HIe(arguments[1]))),c<0&&(c=u+c);c>=0;c--)if(c in n&&n[c]===t)return c||0;return-1}:S2});var q$=I(()=>{"use strict";var QIe=W(),E$=T2();QIe({target:"Array",proto:!0,forced:E$!==[].lastIndexOf},{lastIndexOf:E$})});var P$=I(()=>{"use strict";var eEe=W(),tEe=Kr().map,rEe=gd(),iEe=rEe("map");eEe({target:"Array",proto:!0,forced:!iEe},{map:function(t){return tEe(this,t,arguments.length>1?arguments[1]:void 0)}})});var C$=I(()=>{"use strict";var nEe=W(),aEe=He(),oEe=xo(),sEe=Ba(),A$=Array,lEe=aEe(function(){function e(){}return!(A$.of.call(e)instanceof e)});nEe({target:"Array",stat:!0,forced:lEe},{of:function(){for(var t=0,n=arguments.length,u=new(oEe(this)?this:A$)(n);n>t;)sEe(u,t,arguments[t++]);return u.length=n,u}})});var rb=I((W0t,M$)=>{"use strict";var uEe=dt(),cEe=_o(),hEe=TypeError,fEe=Object.getOwnPropertyDescriptor,dEe=uEe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();M$.exports=dEe?function(e,t){if(cEe(e)&&!fEe(e,"length").writable)throw new hEe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var R$=I(()=>{"use strict";var pEe=W(),mEe=zt(),vEe=Vt(),gEe=rb(),yEe=mu(),_Ee=He(),xEe=_Ee(function(){return[].push.call({length:4294967296},1)!==4294967297}),bEe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},wEe=xEe||!bEe();pEe({target:"Array",proto:!0,arity:1,forced:wEe},{push:function(t){var n=mEe(this),u=vEe(n),c=arguments.length;yEe(u+c);for(var a=0;a<c;a++)n[u]=arguments[a],u++;return gEe(n,u),u}})});var ig=I((X0t,L$)=>{"use strict";var SEe=wt(),TEe=zt(),IEe=Bs(),EEe=Vt(),O$=TypeError,k$="Reduce of empty array with no initial value",D$=function(e){return function(t,n,u,c){var a=TEe(t),_=IEe(a),w=EEe(a);if(SEe(n),w===0&&u<2)throw new O$(k$);var q=e?w-1:0,M=e?-1:1;if(u<2)for(;;){if(q in _){c=_[q],q+=M;break}if(q+=M,e?q<0:w<=q)throw new O$(k$)}for(;e?q>=0:w>q;q+=M)q in _&&(c=n(c,_[q],q,a));return c}};L$.exports={left:D$(!1),right:D$(!0)}});var ag=I((J0t,z$)=>{"use strict";var ng=Qe(),qEe=po(),PEe=Wi(),ib=function(e){return qEe.slice(0,e.length)===e};z$.exports=function(){return ib("Bun/")?"BUN":ib("Cloudflare-Workers")?"CLOUDFLARE":ib("Deno/")?"DENO":ib("Node.js/")?"NODE":ng.Bun&&typeof Bun.version=="string"?"BUN":ng.Deno&&typeof Deno.version=="object"?"DENO":PEe(ng.process)==="process"?"NODE":ng.window&&ng.document?"BROWSER":"REST"}()});var oh=I((Q0t,F$)=>{"use strict";var AEe=ag();F$.exports=AEe==="NODE"});var N$=I(()=>{"use strict";var CEe=W(),MEe=ig().left,REe=Na(),B$=vo(),OEe=oh(),kEe=!OEe&&B$>79&&B$<83,DEe=kEe||!REe("reduce");CEe({target:"Array",proto:!0,forced:DEe},{reduce:function(t){var n=arguments.length;return MEe(this,t,n,n>1?arguments[1]:void 0)}})});var U$=I(()=>{"use strict";var LEe=W(),zEe=ig().right,FEe=Na(),j$=vo(),BEe=oh(),NEe=!BEe&&j$>79&&j$<83,jEe=NEe||!FEe("reduceRight");LEe({target:"Array",proto:!0,forced:jEe},{reduceRight:function(t){return zEe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var V$=I(()=>{"use strict";var UEe=W(),$Ee=$e(),VEe=_o(),GEe=$Ee([].reverse),$$=[1,2];UEe({target:"Array",proto:!0,forced:String($$)===String($$.reverse())},{reverse:function(){return VEe(this)&&(this.length=this.length),GEe(this)}})});var H$=I(()=>{"use strict";var ZEe=W(),G$=_o(),HEe=xo(),WEe=vt(),Z$=yo(),KEe=Vt(),YEe=fi(),XEe=Ba(),JEe=_t(),QEe=gd(),eqe=Kn(),tqe=QEe("slice"),rqe=JEe("species"),I2=Array,iqe=Math.max;ZEe({target:"Array",proto:!0,forced:!tqe},{slice:function(t,n){var u=YEe(this),c=KEe(u),a=Z$(t,c),_=Z$(n===void 0?c:n,c),w,q,M;if(G$(u)&&(w=u.constructor,HEe(w)&&(w===I2||G$(w.prototype))?w=void 0:WEe(w)&&(w=w[rqe],w===null&&(w=void 0)),w===I2||w===void 0))return eqe(u,a,_);for(q=new(w===void 0?I2:w)(iqe(_-a,0)),M=0;a<_;a++,M++)a in u&&XEe(q,M,u[a]);return q.length=M,q}})});var W$=I(()=>{"use strict";var nqe=W(),aqe=Kr().some,oqe=Na(),sqe=oqe("some");nqe({target:"Array",proto:!0,forced:!sqe},{some:function(t){return aqe(this,t,arguments.length>1?arguments[1]:void 0)}})});var nb=I((cxt,Y$)=>{"use strict";var K$=Kn(),lqe=Math.floor,E2=function(e,t){var n=e.length;if(n<8)for(var u=1,c,a;u<n;){for(a=u,c=e[u];a&&t(e[a-1],c)>0;)e[a]=e[--a];a!==u++&&(e[a]=c)}else for(var _=lqe(n/2),w=E2(K$(e,0,_),t),q=E2(K$(e,_),t),M=w.length,O=q.length,k=0,$=0;k<M||$<O;)e[k+$]=k<M&&$<O?t(w[k],q[$])<=0?w[k++]:q[$++]:k<M?w[k++]:q[$++];return e};Y$.exports=E2});var q2=I((hxt,J$)=>{"use strict";var uqe=po(),X$=uqe.match(/firefox\/(\d+)/i);J$.exports=!!X$&&+X$[1]});var P2=I((fxt,Q$)=>{"use strict";var cqe=po();Q$.exports=/MSIE|Trident/.test(cqe)});var ab=I((dxt,t8)=>{"use strict";var hqe=po(),e8=hqe.match(/AppleWebKit\/(\d+)\./);t8.exports=!!e8&&+e8[1]});var c8=I(()=>{"use strict";var fqe=W(),l8=$e(),dqe=wt(),pqe=zt(),r8=Vt(),mqe=Xv(),i8=It(),A2=He(),vqe=nb(),gqe=Na(),n8=q2(),yqe=P2(),a8=vo(),o8=ab(),yu=[],s8=l8(yu.sort),_qe=l8(yu.push),xqe=A2(function(){yu.sort(void 0)}),bqe=A2(function(){yu.sort(null)}),wqe=gqe("sort"),u8=!A2(function(){if(a8)return a8<70;if(!(n8&&n8>3)){if(yqe)return!0;if(o8)return o8<603;var e="",t,n,u,c;for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:u=3;break;case 68:case 71:u=4;break;default:u=2}for(c=0;c<47;c++)yu.push({k:n+c,v:u})}for(yu.sort(function(a,_){return _.v-a.v}),c=0;c<yu.length;c++)n=yu[c].k.charAt(0),e.charAt(e.length-1)!==n&&(e+=n);return e!=="DGBEFHACIJK"}}),Sqe=xqe||!bqe||!wqe||!u8,Tqe=function(e){return function(t,n){return n===void 0?-1:t===void 0?1:e!==void 0?+e(t,n)||0:i8(t)>i8(n)?1:-1}};fqe({target:"Array",proto:!0,forced:Sqe},{sort:function(t){t!==void 0&&dqe(t);var n=pqe(this);if(u8)return t===void 0?s8(n):s8(n,t);var u=[],c=r8(n),a,_;for(_=0;_<c;_++)_ in n&&_qe(u,n[_]);for(vqe(u,Tqe(t)),a=r8(u),_=0;_<a;)n[_]=u[_++];for(;_<c;)mqe(n,_++);return n}})});var _u=I((vxt,f8)=>{"use strict";var Iqe=bt(),Eqe=Sr(),qqe=_t(),Pqe=dt(),h8=qqe("species");f8.exports=function(e){var t=Iqe(e);Pqe&&t&&!t[h8]&&Eqe(t,h8,{configurable:!0,get:function(){return this}})}});var d8=I(()=>{"use strict";var Aqe=_u();Aqe("Array")});var p8=I(()=>{"use strict";var Cqe=W(),Mqe=zt(),Rqe=yo(),Oqe=wr(),kqe=Vt(),Dqe=rb(),Lqe=mu(),zqe=fd(),Fqe=Ba(),C2=Xv(),Bqe=gd(),Nqe=Bqe("splice"),jqe=Math.max,Uqe=Math.min;Cqe({target:"Array",proto:!0,forced:!Nqe},{splice:function(t,n){var u=Mqe(this),c=kqe(u),a=Rqe(t,c),_=arguments.length,w,q,M,O,k,$;for(_===0?w=q=0:_===1?(w=0,q=c-a):(w=_-2,q=Uqe(jqe(Oqe(n),0),c-a)),Lqe(c+w-q),M=zqe(u,q),O=0;O<q;O++)k=a+O,k in u&&Fqe(M,O,u[k]);if(M.length=q,w<q){for(O=a;O<c-q;O++)k=O+q,$=O+w,k in u?u[$]=u[k]:C2(u,$);for(O=c;O>c-q+w;O--)C2(u,O-1)}else if(w>q)for(O=c-q;O>a;O--)k=O+q-1,$=O+w-1,k in u?u[$]=u[k]:C2(u,$);for(O=0;O<w;O++)u[O+a]=arguments[O+2];return Dqe(u,c-q+w),M}})});var M2=I((bxt,m8)=>{"use strict";var $qe=Vt();m8.exports=function(e,t){for(var n=$qe(e),u=new t(n),c=0;c<n;c++)u[c]=e[n-c-1];return u}});var R2=I(()=>{"use strict";var Vqe=W(),Gqe=M2(),Zqe=fi(),Hqe=zr(),Wqe=Array;Vqe({target:"Array",proto:!0},{toReversed:function(){return Gqe(Zqe(this),Wqe)}});Hqe("toReversed")});var Gs=I((Txt,v8)=>{"use strict";var Kqe=Vt();v8.exports=function(e,t,n){for(var u=0,c=arguments.length>2?n:Kqe(t),a=new e(c);c>u;)a[u]=t[u++];return a}});var O2=I((Ixt,g8)=>{"use strict";var Yqe=Qe();g8.exports=function(e,t){var n=Yqe[e],u=n&&n.prototype;return u&&u[t]}});var k2=I(()=>{"use strict";var Xqe=W(),Jqe=$e(),Qqe=wt(),e2e=fi(),t2e=Gs(),r2e=O2(),i2e=zr(),n2e=Array,a2e=Jqe(r2e("Array","sort"));Xqe({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&Qqe(t);var n=e2e(this),u=t2e(n2e,n);return a2e(u,t)}});i2e("toSorted")});var D2=I(()=>{"use strict";var o2e=W(),s2e=zr(),l2e=mu(),u2e=Vt(),c2e=yo(),h2e=fi(),f2e=wr(),d2e=Array,p2e=Math.max,m2e=Math.min;o2e({target:"Array",proto:!0},{toSpliced:function(t,n){var u=h2e(this),c=u2e(u),a=c2e(t,c),_=arguments.length,w=0,q,M,O,k;for(_===0?q=M=0:_===1?(q=0,M=c-a):(q=_-2,M=m2e(p2e(f2e(n),0),c-a)),O=l2e(c+q-M),k=d2e(O);w<a;w++)k[w]=u[w];for(;w<a+q;w++)k[w]=arguments[w-a+2];for(;w<O;w++)k[w]=u[w+M-q];return k}});s2e("toSpliced")});var y8=I(()=>{"use strict";var v2e=zr();v2e("flat")});var _8=I(()=>{"use strict";var g2e=zr();g2e("flatMap")});var x8=I(()=>{"use strict";var y2e=W(),_2e=zt(),x2e=Vt(),b2e=rb(),w2e=Xv(),S2e=mu(),T2e=[].unshift(0)!==1,I2e=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},E2e=T2e||!I2e();y2e({target:"Array",proto:!0,arity:1,forced:E2e},{unshift:function(t){var n=_2e(this),u=x2e(n),c=arguments.length;if(c){S2e(u+c);for(var a=u;a--;){var _=a+c;a in n?n[_]=n[a]:w2e(n,_)}for(var w=0;w<c;w++)n[w]=arguments[w]}return b2e(n,u+c)}})});var L2=I((Lxt,b8)=>{"use strict";var q2e=Vt(),P2e=wr(),A2e=RangeError;b8.exports=function(e,t,n,u){var c=q2e(e),a=P2e(n),_=a<0?c+a:a;if(_>=c||_<0)throw new A2e("Incorrect index");for(var w=new t(c),q=0;q<c;q++)w[q]=q===_?u:e[q];return w}});var z2=I(()=>{"use strict";var C2e=W(),M2e=L2(),R2e=fi(),O2e=Array;C2e({target:"Array",proto:!0},{with:function(e,t){return M2e(R2e(this),O2e,e,t)}})});var og=I((Bxt,w8)=>{"use strict";w8.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var ja=I((Nxt,S8)=>{"use strict";var k2e=rr();S8.exports=function(e,t,n){for(var u in t)k2e(e,u,t[u],n);return e}});var pn=I((jxt,T8)=>{"use strict";var D2e=Ki(),L2e=TypeError;T8.exports=function(e,t){if(D2e(t,e))return e;throw new L2e("Incorrect invocation")}});var yd=I((Uxt,I8)=>{"use strict";var z2e=wr(),F2e=Wn(),B2e=RangeError;I8.exports=function(e){if(e===void 0)return 0;var t=z2e(e),n=F2e(t);if(t!==n)throw new B2e("Wrong length or index");return n}});var ob=I(($xt,E8)=>{"use strict";E8.exports=Math.sign||function(t){var n=+t;return n===0||n!==n?n:n<0?-1:1}});var F2=I((Vxt,P8)=>{"use strict";var N2e=2220446049250313e-31,q8=1/N2e;P8.exports=function(e){return e+q8-q8}});var B2=I((Gxt,A8)=>{"use strict";var j2e=ob(),U2e=F2(),$2e=Math.abs,V2e=2220446049250313e-31;A8.exports=function(e,t,n,u){var c=+e,a=$2e(c),_=j2e(c);if(a<u)return _*U2e(a/u/t)*u*t;var w=(1+t/V2e)*a,q=w-(w-a);return q>n||q!==q?_*(1/0):_*q}});var sb=I((Zxt,C8)=>{"use strict";var G2e=B2(),Z2e=1.1920928955078125e-7,H2e=34028234663852886e22,W2e=11754943508222875e-54;C8.exports=Math.fround||function(t){return G2e(t,Z2e,H2e,W2e)}});var R8=I((Hxt,M8)=>{"use strict";var K2e=Array,Y2e=Math.abs,Zs=Math.pow,X2e=Math.floor,J2e=Math.log,Q2e=Math.LN2,ePe=function(e,t,n){var u=K2e(n),c=n*8-t-1,a=(1<<c)-1,_=a>>1,w=t===23?Zs(2,-24)-Zs(2,-77):0,q=e<0||e===0&&1/e<0?1:0,M=0,O,k,$;for(e=Y2e(e),e!==e||e===1/0?(k=e!==e?1:0,O=a):(O=X2e(J2e(e)/Q2e),$=Zs(2,-O),e*$<1&&(O--,$*=2),O+_>=1?e+=w/$:e+=w*Zs(2,1-_),e*$>=2&&(O++,$/=2),O+_>=a?(k=0,O=a):O+_>=1?(k=(e*$-1)*Zs(2,t),O+=_):(k=e*Zs(2,_-1)*Zs(2,t),O=0));t>=8;)u[M++]=k&255,k/=256,t-=8;for(O=O<<t|k,c+=t;c>0;)u[M++]=O&255,O/=256,c-=8;return u[M-1]|=q*128,u},tPe=function(e,t){var n=e.length,u=n*8-t-1,c=(1<<u)-1,a=c>>1,_=u-7,w=n-1,q=e[w--],M=q&127,O;for(q>>=7;_>0;)M=M*256+e[w--],_-=8;for(O=M&(1<<-_)-1,M>>=-_,_+=t;_>0;)O=O*256+e[w--],_-=8;if(M===0)M=1-a;else{if(M===c)return O?NaN:q?-1/0:1/0;O+=Zs(2,t),M-=a}return(q?-1:1)*O*Zs(2,M-t)};M8.exports={pack:ePe,unpack:tPe}});var ug=I((Wxt,K8)=>{"use strict";var fb=Qe(),V2=$e(),N2=dt(),rPe=og(),V8=Yc(),iPe=di(),nPe=Sr(),O8=ja(),j2=He(),lb=pn(),aPe=wr(),oPe=Wn(),cb=yd(),sPe=sb(),G8=R8(),lPe=pi(),k8=Fa(),uPe=Yx(),cPe=Kn(),hPe=du(),fPe=Jc(),Z8=Cn(),G2=Qt(),dPe=V8.PROPER,D8=V8.CONFIGURABLE,xd="ArrayBuffer",db="DataView",bd="prototype",pPe="Wrong length",H8="Wrong index",L8=G2.getterFor(xd),lg=G2.getterFor(db),z8=G2.set,bo=fb[xd],ma=bo,_d=ma&&ma[bd],Jo=fb[db],sh=Jo&&Jo[bd],F8=Object.prototype,mPe=fb.Array,hb=fb.RangeError,vPe=V2(uPe),gPe=V2([].reverse),W8=G8.pack,B8=G8.unpack,N8=function(e){return[e&255]},j8=function(e){return[e&255,e>>8&255]},U8=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},$8=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},yPe=function(e){return W8(sPe(e),23,4)},_Pe=function(e){return W8(e,52,8)},ub=function(e,t,n){nPe(e[bd],t,{configurable:!0,get:function(){return n(this)[t]}})},xu=function(e,t,n,u){var c=lg(e),a=cb(n),_=!!u;if(a+t>c.byteLength)throw new hb(H8);var w=c.bytes,q=a+c.byteOffset,M=cPe(w,q,q+t);return _?M:gPe(M)},bu=function(e,t,n,u,c,a){var _=lg(e),w=cb(n),q=u(+c),M=!!a;if(w+t>_.byteLength)throw new hb(H8);for(var O=_.bytes,k=w+_.byteOffset,$=0;$<t;$++)O[k+$]=q[M?$:t-$-1]};rPe?(U2=dPe&&bo.name!==xd,!j2(function(){bo(1)})||!j2(function(){new bo(-1)})||j2(function(){return new bo,new bo(1.5),new bo(NaN),bo.length!==1||U2&&!D8})?(ma=function(t){return lb(this,_d),hPe(new bo(cb(t)),this,ma)},ma[bd]=_d,_d.constructor=ma,fPe(ma,bo)):U2&&D8&&iPe(bo,"name",xd),k8&&lPe(sh)!==F8&&k8(sh,F8),sg=new Jo(new ma(2)),$2=V2(sh.setInt8),sg.setInt8(0,2147483648),sg.setInt8(1,2147483649),(sg.getInt8(0)||!sg.getInt8(1))&&O8(sh,{setInt8:function(t,n){$2(this,t,n<<24>>24)},setUint8:function(t,n){$2(this,t,n<<24>>24)}},{unsafe:!0})):(ma=function(t){lb(this,_d);var n=cb(t);z8(this,{type:xd,bytes:vPe(mPe(n),0),byteLength:n}),N2||(this.byteLength=n,this.detached=!1)},_d=ma[bd],Jo=function(t,n,u){lb(this,sh),lb(t,_d);var c=L8(t),a=c.byteLength,_=aPe(n);if(_<0||_>a)throw new hb("Wrong offset");if(u=u===void 0?a-_:oPe(u),_+u>a)throw new hb(pPe);z8(this,{type:db,buffer:t,byteLength:u,byteOffset:_,bytes:c.bytes}),N2||(this.buffer=t,this.byteLength=u,this.byteOffset=_)},sh=Jo[bd],N2&&(ub(ma,"byteLength",L8),ub(Jo,"buffer",lg),ub(Jo,"byteLength",lg),ub(Jo,"byteOffset",lg)),O8(sh,{getInt8:function(t){return xu(this,1,t)[0]<<24>>24},getUint8:function(t){return xu(this,1,t)[0]},getInt16:function(t){var n=xu(this,2,t,arguments.length>1?arguments[1]:!1);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=xu(this,2,t,arguments.length>1?arguments[1]:!1);return n[1]<<8|n[0]},getInt32:function(t){return $8(xu(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return $8(xu(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return B8(xu(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return B8(xu(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,n){bu(this,1,t,N8,n)},setUint8:function(t,n){bu(this,1,t,N8,n)},setInt16:function(t,n){bu(this,2,t,j8,n,arguments.length>2?arguments[2]:!1)},setUint16:function(t,n){bu(this,2,t,j8,n,arguments.length>2?arguments[2]:!1)},setInt32:function(t,n){bu(this,4,t,U8,n,arguments.length>2?arguments[2]:!1)},setUint32:function(t,n){bu(this,4,t,U8,n,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,n){bu(this,4,t,yPe,n,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,n){bu(this,8,t,_Pe,n,arguments.length>2?arguments[2]:!1)}}));var U2,sg,$2;Z8(ma,xd);Z8(Jo,db);K8.exports={ArrayBuffer:ma,DataView:Jo}});var X8=I(()=>{"use strict";var xPe=W(),bPe=Qe(),wPe=ug(),SPe=_u(),Z2="ArrayBuffer",Y8=wPe[Z2],TPe=bPe[Z2];xPe({global:!0,constructor:!0,forced:TPe!==Y8},{ArrayBuffer:Y8});SPe(Z2)});var kt=I((Xxt,sV)=>{"use strict";var IPe=og(),Y2=dt(),Mn=Qe(),tV=Rt(),vb=vt(),Su=Ot(),X2=An(),EPe=su(),qPe=di(),H2=rr(),PPe=Sr(),APe=Ki(),gb=pi(),Sd=Fa(),CPe=_t(),MPe=lu(),rV=Qt(),iV=rV.enforce,RPe=rV.get,pb=Mn.Int8Array,W2=pb&&pb.prototype,J8=Mn.Uint8ClampedArray,Q8=J8&&J8.prototype,Qo=pb&&gb(pb),wo=W2&&gb(W2),OPe=Object.prototype,J2=Mn.TypeError,eV=CPe("toStringTag"),K2=MPe("TYPED_ARRAY_TAG"),mb="TypedArrayConstructor",Hs=IPe&&!!Sd&&X2(Mn.opera)!=="Opera",nV=!1,Xn,wu,wd,Ws={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Q2={BigInt64Array:8,BigUint64Array:8},kPe=function(t){if(!vb(t))return!1;var n=X2(t);return n==="DataView"||Su(Ws,n)||Su(Q2,n)},aV=function(e){var t=gb(e);if(vb(t)){var n=RPe(t);return n&&Su(n,mb)?n[mb]:aV(t)}},oV=function(e){if(!vb(e))return!1;var t=X2(e);return Su(Ws,t)||Su(Q2,t)},DPe=function(e){if(oV(e))return e;throw new J2("Target is not a typed array")},LPe=function(e){if(tV(e)&&(!Sd||APe(Qo,e)))return e;throw new J2(EPe(e)+" is not a typed array constructor")},zPe=function(e,t,n,u){if(Y2){if(n)for(var c in Ws){var a=Mn[c];if(a&&Su(a.prototype,e))try{delete a.prototype[e]}catch(_){try{a.prototype[e]=t}catch(w){}}}(!wo[e]||n)&&H2(wo,e,n?t:Hs&&W2[e]||t,u)}},FPe=function(e,t,n){var u,c;if(Y2){if(Sd){if(n){for(u in Ws)if(c=Mn[u],c&&Su(c,e))try{delete c[e]}catch(a){}}if(!Qo[e]||n)try{return H2(Qo,e,n?t:Hs&&Qo[e]||t)}catch(a){}else return}for(u in Ws)c=Mn[u],c&&(!c[e]||n)&&H2(c,e,t)}};for(Xn in Ws)wu=Mn[Xn],wd=wu&&wu.prototype,wd?iV(wd)[mb]=wu:Hs=!1;for(Xn in Q2)wu=Mn[Xn],wd=wu&&wu.prototype,wd&&(iV(wd)[mb]=wu);if((!Hs||!tV(Qo)||Qo===Function.prototype)&&(Qo=function(){throw new J2("Incorrect invocation")},Hs))for(Xn in Ws)Mn[Xn]&&Sd(Mn[Xn],Qo);if((!Hs||!wo||wo===OPe)&&(wo=Qo.prototype,Hs))for(Xn in Ws)Mn[Xn]&&Sd(Mn[Xn].prototype,wo);Hs&&gb(Q8)!==wo&&Sd(Q8,wo);if(Y2&&!Su(wo,eV)){nV=!0,PPe(wo,eV,{configurable:!0,get:function(){return vb(this)?this[K2]:void 0}});for(Xn in Ws)Mn[Xn]&&qPe(Mn[Xn],K2,Xn)}sV.exports={NATIVE_ARRAY_BUFFER_VIEWS:Hs,TYPED_ARRAY_TAG:nV&&K2,aTypedArray:DPe,aTypedArrayConstructor:LPe,exportTypedArrayMethod:zPe,exportTypedArrayStaticMethod:FPe,getTypedArrayConstructor:aV,isView:kPe,isTypedArray:oV,TypedArray:Qo,TypedArrayPrototype:wo}});var uV=I(()=>{"use strict";var BPe=W(),lV=kt(),NPe=lV.NATIVE_ARRAY_BUFFER_VIEWS;BPe({target:"ArrayBuffer",stat:!0,forced:!NPe},{isView:lV.isView})});var mV=I(()=>{"use strict";var jPe=W(),tP=cu(),UPe=He(),dV=ug(),cV=tt(),hV=yo(),$Pe=Wn(),rP=dV.ArrayBuffer,eP=dV.DataView,pV=eP.prototype,fV=tP(rP.prototype.slice),VPe=tP(pV.getUint8),GPe=tP(pV.setUint8),ZPe=UPe(function(){return!new rP(2).slice(1,void 0).byteLength});jPe({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:ZPe},{slice:function(t,n){if(fV&&n===void 0)return fV(cV(this),t);for(var u=cV(this).byteLength,c=hV(t,u),a=hV(n===void 0?u:n,u),_=new rP($Pe(a-c)),w=new eP(this),q=new eP(_),M=0;c<a;)GPe(q,M++,VPe(w,c++));return _}})});var vV=I(()=>{"use strict";var HPe=W(),WPe=ug(),KPe=og();HPe({global:!0,constructor:!0,forced:!KPe},{DataView:WPe.DataView})});var gV=I(()=>{"use strict";vV()});var iP=I(()=>{"use strict";var YPe=W(),XPe=$e(),bV=Math.pow,yV=31,JPe=1023,_V=bV(2,-24),xV=.0009765625,QPe=function(e){var t=e>>>15,n=e>>>10&yV,u=e&JPe;return n===yV?u===0?t===0?1/0:-1/0:NaN:n===0?u*(t===0?_V:-_V):bV(2,n-15)*(t===0?1+u*xV:-1-u*xV)},eAe=XPe(DataView.prototype.getUint16);YPe({target:"DataView",proto:!0},{getFloat16:function(t){var n=eAe(this,t,arguments.length>1?arguments[1]:!1);return QPe(n)}})});var nP=I((lbt,wV)=>{"use strict";var tAe=An(),rAe=TypeError;wV.exports=function(e){if(tAe(e)==="DataView")return e;throw new rAe("Argument is not a DataView")}});var aP=I((ubt,SV)=>{"use strict";var iAe=Math.log,nAe=Math.LN2;SV.exports=Math.log2||function(t){return iAe(t)/nAe}});var sP=I(()=>{"use strict";var aAe=W(),oAe=$e(),sAe=nP(),lAe=yd(),uAe=aP(),TV=F2(),cAe=Math.pow,hAe=65520,fAe=61005353927612305e-21,dAe=16777216,oP=1024,pAe=function(e){if(e!==e)return 32256;if(e===0)return(1/e===-1/0)<<15;var t=e<0;if(t&&(e=-e),e>=hAe)return t<<15|31744;if(e<fAe)return t<<15|TV(e*dAe);var n=uAe(e)|0;if(n===-15)return t<<15|oP;var u=TV((e*cAe(2,-n)-1)*oP);return u===oP?t<<15|n+16<<10:t<<15|n+15<<10|u},mAe=oAe(DataView.prototype.setUint16);aAe({target:"DataView",proto:!0},{setFloat16:function(t,n){sAe(this);var u=lAe(t),c=pAe(+n);return mAe(this,u,c,arguments.length>2?arguments[2]:!1)}})});var lP=I((fbt,qV)=>{"use strict";var EV=Qe(),vAe=Yv(),gAe=Wi(),IV=EV.ArrayBuffer,yAe=EV.TypeError;qV.exports=IV&&vAe(IV.prototype,"byteLength","get")||function(e){if(gAe(e)!=="ArrayBuffer")throw new yAe("ArrayBuffer expected");return e.byteLength}});var uP=I((dbt,PV)=>{"use strict";var _Ae=Qe(),xAe=og(),bAe=lP(),wAe=_Ae.DataView;PV.exports=function(e){if(!xAe||bAe(e)!==0)return!1;try{return new wAe(e),!1}catch(t){return!0}}});var cP=I(()=>{"use strict";var SAe=dt(),TAe=Sr(),IAe=uP(),AV=ArrayBuffer.prototype;SAe&&!("detached"in AV)&&TAe(AV,"detached",{configurable:!0,get:function(){return IAe(this)}})});var Td=I((vbt,CV)=>{"use strict";var EAe=uP(),qAe=TypeError;CV.exports=function(e){if(EAe(e))throw new qAe("ArrayBuffer is detached");return e}});var hP=I((gbt,MV)=>{"use strict";var PAe=Qe(),AAe=oh();MV.exports=function(e){if(AAe){try{return PAe.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var yb=I((ybt,OV)=>{"use strict";var CAe=Qe(),MAe=He(),fP=vo(),dP=ag(),RV=CAe.structuredClone;OV.exports=!!RV&&!MAe(function(){if(dP==="DENO"&&fP>92||dP==="NODE"&&fP>94||dP==="BROWSER"&&fP>97)return!1;var e=new ArrayBuffer(8),t=RV(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var yP=I((_bt,LV)=>{"use strict";var gP=Qe(),RAe=hP(),OAe=yb(),kAe=gP.structuredClone,kV=gP.ArrayBuffer,_b=gP.MessageChannel,vP=!1,pP,DV,xb,mP;if(OAe)vP=function(e){kAe(e,{transfer:[e]})};else if(kV)try{_b||(pP=RAe("worker_threads"),pP&&(_b=pP.MessageChannel)),_b&&(DV=new _b,xb=new kV(2),mP=function(e){DV.port1.postMessage(null,[e])},xb.byteLength===2&&(mP(xb),xb.byteLength===0&&(vP=mP)))}catch(e){}LV.exports=vP});var TP=I((xbt,$V)=>{"use strict";var bP=Qe(),wP=$e(),NV=Yv(),DAe=yd(),LAe=Td(),zAe=lP(),zV=yP(),_P=yb(),FAe=bP.structuredClone,jV=bP.ArrayBuffer,xP=bP.DataView,BAe=Math.min,SP=jV.prototype,UV=xP.prototype,NAe=wP(SP.slice),FV=NV(SP,"resizable","get"),BV=NV(SP,"maxByteLength","get"),jAe=wP(UV.getInt8),UAe=wP(UV.setInt8);$V.exports=(_P||zV)&&function(e,t,n){var u=zAe(e),c=t===void 0?u:DAe(t),a=!FV||!FV(e),_;if(LAe(e),_P&&(e=FAe(e,{transfer:[e]}),u===c&&(n||a)))return e;if(u>=c&&(!n||a))_=NAe(e,0,c);else{var w=n&&!a&&BV?{maxByteLength:BV(e)}:void 0;_=new jV(c,w);for(var q=new xP(e),M=new xP(_),O=BAe(c,u),k=0;k<O;k++)UAe(M,k,jAe(q,k))}return _P||zV(e),_}});var IP=I(()=>{"use strict";var $Ae=W(),VV=TP();VV&&$Ae({target:"ArrayBuffer",proto:!0},{transfer:function(){return VV(this,arguments.length?arguments[0]:void 0,!0)}})});var EP=I(()=>{"use strict";var VAe=W(),GV=TP();GV&&VAe({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return GV(this,arguments.length?arguments[0]:void 0,!1)}})});var ZV=I(()=>{"use strict";var GAe=W(),ZAe=$e(),HAe=He(),WAe=HAe(function(){return new Date(16e11).getYear()!==120}),KAe=ZAe(Date.prototype.getFullYear);GAe({target:"Date",proto:!0,forced:WAe},{getYear:function(){return KAe(this)-1900}})});var WV=I(()=>{"use strict";var YAe=W(),XAe=$e(),HV=Date,JAe=XAe(HV.prototype.getTime);YAe({target:"Date",stat:!0},{now:function(){return JAe(new HV)}})});var XV=I(()=>{"use strict";var QAe=W(),KV=$e(),eCe=wr(),YV=Date.prototype,tCe=KV(YV.getTime),rCe=KV(YV.setFullYear);QAe({target:"Date",proto:!0},{setYear:function(t){tCe(this);var n=eCe(t),u=n>=0&&n<=99?n+1900:n;return rCe(this,u)}})});var JV=I(()=>{"use strict";var iCe=W();iCe({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var cg=I((Obt,QV)=>{"use strict";var nCe=wr(),aCe=It(),oCe=mr(),sCe=RangeError;QV.exports=function(t){var n=aCe(oCe(this)),u="",c=nCe(t);if(c<0||c===1/0)throw new sCe("Wrong number of repetitions");for(;c>0;(c>>>=1)&&(n+=n))c&1&&(u+=n);return u}});var hg=I((kbt,iG)=>{"use strict";var rG=$e(),lCe=Wn(),eG=It(),uCe=cg(),cCe=mr(),hCe=rG(uCe),fCe=rG("".slice),dCe=Math.ceil,tG=function(e){return function(t,n,u){var c=eG(cCe(t)),a=lCe(n),_=c.length,w=u===void 0?" ":eG(u),q,M;return a<=_||w===""?c:(q=a-_,M=hCe(w,dCe(q/w.length)),M.length>q&&(M=fCe(M,0,q)),e?c+M:M+c)}};iG.exports={start:tG(!1),end:tG(!0)}});var oG=I((Dbt,aG)=>{"use strict";var Tu=$e(),nG=He(),lh=hg().start,pCe=RangeError,mCe=isFinite,vCe=Math.abs,Ks=Date.prototype,qP=Ks.toISOString,gCe=Tu(Ks.getTime),yCe=Tu(Ks.getUTCDate),_Ce=Tu(Ks.getUTCFullYear),xCe=Tu(Ks.getUTCHours),bCe=Tu(Ks.getUTCMilliseconds),wCe=Tu(Ks.getUTCMinutes),SCe=Tu(Ks.getUTCMonth),TCe=Tu(Ks.getUTCSeconds);aG.exports=nG(function(){return qP.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!nG(function(){qP.call(new Date(NaN))})?function(){if(!mCe(gCe(this)))throw new pCe("Invalid time value");var t=this,n=_Ce(t),u=bCe(t),c=n<0?"-":n>9999?"+":"";return c+lh(vCe(n),c?6:4,0)+"-"+lh(SCe(t)+1,2,0)+"-"+lh(yCe(t),2,0)+"T"+lh(xCe(t),2,0)+":"+lh(wCe(t),2,0)+":"+lh(TCe(t),2,0)+"."+lh(u,3,0)+"Z"}:qP});var lG=I(()=>{"use strict";var ICe=W(),sG=oG();ICe({target:"Date",proto:!0,forced:Date.prototype.toISOString!==sG},{toISOString:sG})});var uG=I(()=>{"use strict";var ECe=W(),qCe=He(),PCe=zt(),ACe=Dv(),CCe=qCe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});ECe({target:"Date",proto:!0,arity:1,forced:CCe},{toJSON:function(t){var n=PCe(this),u=ACe(n,"number");return typeof u=="number"&&!isFinite(u)?null:n.toISOString()}})});var hG=I((Nbt,cG)=>{"use strict";var MCe=tt(),RCe=JE(),OCe=TypeError;cG.exports=function(e){if(MCe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new OCe("Incorrect hint");return RCe(this,e)}});var pG=I(()=>{"use strict";var kCe=Ot(),DCe=rr(),LCe=hG(),zCe=_t(),fG=zCe("toPrimitive"),dG=Date.prototype;kCe(dG,fG)||DCe(dG,fG,LCe)});var yG=I(()=>{"use strict";var vG=$e(),FCe=rr(),PP=Date.prototype,mG="Invalid Date",gG="toString",BCe=vG(PP[gG]),NCe=vG(PP.getTime);String(new Date(NaN))!==mG&&FCe(PP,gG,function(){var t=NCe(this);return t===t?BCe(this):mG})});var xG=I(()=>{"use strict";var jCe=W(),fg=$e(),UCe=It(),$Ce=fg("".charAt),VCe=fg("".charCodeAt),GCe=fg(/./.exec),ZCe=fg(1 .toString),HCe=fg("".toUpperCase),WCe=/[\w*+\-./@]/,_G=function(e,t){for(var n=ZCe(e,16);n.length<t;)n="0"+n;return n};jCe({global:!0},{escape:function(t){for(var n=UCe(t),u="",c=n.length,a=0,_,w;a<c;)_=$Ce(n,a++),GCe(WCe,_)?u+=_:(w=VCe(_,0),w<256?u+="%"+_G(w,2):u+="%u"+HCe(_G(w,4)));return u}})});var CP=I((Hbt,TG)=>{"use strict";var wG=$e(),KCe=wt(),YCe=vt(),XCe=Ot(),bG=Kn(),JCe=sd(),SG=Function,QCe=wG([].concat),eMe=wG([].join),AP={},tMe=function(e,t,n){if(!XCe(AP,t)){for(var u=[],c=0;c<t;c++)u[c]="a["+c+"]";AP[t]=SG("C,a","return new C("+eMe(u,",")+")")}return AP[t](e,n)};TG.exports=JCe?SG.bind:function(t){var n=KCe(this),u=n.prototype,c=bG(arguments,1),a=function(){var w=QCe(c,bG(arguments));return this instanceof a?tMe(n,w.length,w):n.apply(t,w)};return YCe(u)&&(a.prototype=u),a}});var EG=I(()=>{"use strict";var rMe=W(),IG=CP();rMe({target:"Function",proto:!0,forced:Function.bind!==IG},{bind:IG})});var AG=I(()=>{"use strict";var iMe=Rt(),qG=vt(),nMe=dr(),aMe=Ki(),oMe=_t(),sMe=Nv(),MP=oMe("hasInstance"),PG=Function.prototype;MP in PG||nMe.f(PG,MP,{value:sMe(function(e){if(!iMe(this)||!qG(e))return!1;var t=this.prototype;return qG(t)?aMe(t,e):e instanceof this},MP)})});var OG=I(()=>{"use strict";var lMe=dt(),uMe=Yc().EXISTS,CG=$e(),cMe=Sr(),MG=Function.prototype,hMe=CG(MG.toString),RG=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,fMe=CG(RG.exec),dMe="name";lMe&&!uMe&&cMe(MG,dMe,{configurable:!0,get:function(){try{return fMe(RG,hMe(this))[1]}catch(e){return""}}})});var OP=I(()=>{"use strict";var pMe=W(),RP=Qe();pMe({global:!0,forced:RP.globalThis!==RP},{globalThis:RP})});var FP=I(()=>{"use strict";var mMe=W(),vMe=Qe(),gMe=pn(),yMe=tt(),_Me=Rt(),xMe=pi(),bMe=Sr(),wMe=Ba(),SMe=He(),LP=Ot(),TMe=_t(),es=vu().IteratorPrototype,IMe=dt(),EMe=Kt(),kP="constructor",DG="Iterator",kG=TMe("toStringTag"),LG=TypeError,DP=vMe[DG],zG=EMe||!_Me(DP)||DP.prototype!==es||!SMe(function(){DP({})}),zP=function(){if(gMe(this,es),xMe(this)===es)throw new LG("Abstract class Iterator not directly constructable")},FG=function(e,t){IMe?bMe(es,e,{configurable:!0,get:function(){return t},set:function(n){if(yMe(this),this===es)throw new LG("You can't redefine this property");LP(this,e)?this[e]=n:wMe(this,e,n)}}):es[e]=t};LP(es,kG)||FG(kG,DG);(zG||!LP(es,kP)||es[kP]===Object)&&FG(kP,zP);zP.prototype=es;mMe({global:!0,constructor:!0,forced:zG},{Iterator:zP})});var Rr=I((n1t,BG)=>{"use strict";BG.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var Id=I((a1t,NG)=>{"use strict";var qMe=RangeError;NG.exports=function(e){if(e===e)return e;throw new qMe("NaN is not allowed")}});var Ed=I((o1t,jG)=>{"use strict";var PMe=wr(),AMe=RangeError;jG.exports=function(e){var t=PMe(e);if(t<0)throw new AMe("The argument can't be less than 0");return t}});var Iu=I((s1t,HG)=>{"use strict";var CMe=et(),MMe=Wr(),RMe=di(),OMe=ja(),kMe=_t(),UG=Qt(),DMe=Hr(),LMe=vu().IteratorPrototype,bb=Ti(),BP=Li(),zMe=kMe("toStringTag"),$G="IteratorHelper",VG="WrapForValidIterator",FMe=UG.set,GG=function(e){var t=UG.getterFor(e?VG:$G);return OMe(MMe(LMe),{next:function(){var u=t(this);if(e)return u.nextHandler();if(u.done)return bb(void 0,!0);try{var c=u.nextHandler();return u.returnHandlerResult?c:bb(c,u.done)}catch(a){throw u.done=!0,a}},return:function(){var n=t(this),u=n.iterator;if(n.done=!0,e){var c=DMe(u,"return");return c?CMe(c,u):bb(void 0,!0)}if(n.inner)try{BP(n.inner.iterator,"normal")}catch(a){return BP(u,"throw",a)}return u&&BP(u,"normal"),bb(void 0,!0)}})},BMe=GG(!0),ZG=GG(!1);RMe(ZG,zMe,"Iterator Helper");HG.exports=function(e,t,n){var u=function(a,_){_?(_.iterator=a.iterator,_.next=a.next):_=a,_.type=t?VG:$G,_.returnHandlerResult=!!n,_.nextHandler=e,_.counter=0,_.done=!1,FMe(this,_)};return u.prototype=t?BMe:ZG,u}});var So=I((l1t,WG)=>{"use strict";var NMe=Qe();WG.exports=function(e,t){var n=NMe.Iterator,u=n&&n.prototype,c=u&&u[e],a=!1;if(c)try{c.call({next:function(){return{done:!0}},return:function(){a=!0}},-1)}catch(_){_ instanceof t||(a=!1)}if(!a)return c}});var $P=I(()=>{"use strict";var jMe=W(),jP=et(),UP=tt(),UMe=Rr(),$Me=Id(),VMe=Ed(),GMe=Li(),ZMe=Iu(),HMe=So(),KG=Kt(),NP=!KG&&HMe("drop",RangeError),WMe=ZMe(function(){for(var e=this.iterator,t=this.next,n,u;this.remaining;)if(this.remaining--,n=UP(jP(t,e)),u=this.done=!!n.done,u)return;if(n=UP(jP(t,e)),u=this.done=!!n.done,!u)return n.value});jMe({target:"Iterator",proto:!0,real:!0,forced:KG||NP},{drop:function(t){UP(this);var n;try{n=VMe($Me(+t))}catch(u){GMe(this,"throw",u)}return NP?jP(NP,this,n):new WMe(UMe(this),{remaining:n})}})});var GP=I(()=>{"use strict";var KMe=W(),YMe=et(),XMe=Lr(),JMe=wt(),QMe=tt(),eRe=Rr(),tRe=Li(),rRe=So(),VP=rRe("every",TypeError);KMe({target:"Iterator",proto:!0,real:!0,forced:VP},{every:function(t){QMe(this);try{JMe(t)}catch(c){tRe(this,"throw",c)}if(VP)return YMe(VP,this,t);var n=eRe(this),u=0;return!XMe(n,function(c,a){if(!t(c,u++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var HP=I(()=>{"use strict";var iRe=W(),YG=et(),nRe=wt(),XG=tt(),aRe=Rr(),oRe=Iu(),sRe=Xx(),JG=Kt(),lRe=Li(),uRe=So(),ZP=!JG&&uRe("filter",TypeError),cRe=oRe(function(){for(var e=this.iterator,t=this.predicate,n=this.next,u,c,a;;){if(u=XG(YG(n,e)),c=this.done=!!u.done,c)return;if(a=u.value,sRe(e,t,[a,this.counter++],!0))return a}});iRe({target:"Iterator",proto:!0,real:!0,forced:JG||ZP},{filter:function(t){XG(this);try{nRe(t)}catch(n){lRe(this,"throw",n)}return ZP?YG(ZP,this,t):new cRe(aRe(this),{predicate:t})}})});var KP=I(()=>{"use strict";var hRe=W(),fRe=et(),dRe=Lr(),pRe=wt(),mRe=tt(),vRe=Rr(),gRe=Li(),yRe=So(),WP=yRe("find",TypeError);hRe({target:"Iterator",proto:!0,real:!0,forced:WP},{find:function(t){mRe(this);try{pRe(t)}catch(c){gRe(this,"throw",c)}if(WP)return fRe(WP,this,t);var n=vRe(this),u=0;return dRe(n,function(c,a){if(t(c,u++))return a(c)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var YP=I((g1t,eZ)=>{"use strict";var _Re=et(),QG=tt(),xRe=Rr(),bRe=Xo();eZ.exports=function(e,t){(!t||typeof e!="string")&&QG(e);var n=bRe(e);return xRe(QG(n!==void 0?_Re(n,e):e))}});var tA=I(()=>{"use strict";var wRe=W(),JP=et(),SRe=wt(),QP=tt(),TRe=Rr(),IRe=YP(),ERe=Iu(),eA=Li(),tZ=Kt(),qRe=So(),XP=!tZ&&qRe("flatMap",TypeError),PRe=ERe(function(){for(var e=this.iterator,t=this.mapper,n,u;;){if(u=this.inner)try{if(n=QP(JP(u.next,u.iterator)),!n.done)return n.value;this.inner=null}catch(c){eA(e,"throw",c)}if(n=QP(JP(this.next,e)),this.done=!!n.done)return;try{this.inner=IRe(t(n.value,this.counter++),!1)}catch(c){eA(e,"throw",c)}}});wRe({target:"Iterator",proto:!0,real:!0,forced:tZ||XP},{flatMap:function(t){QP(this);try{SRe(t)}catch(n){eA(this,"throw",n)}return XP?JP(XP,this,t):new PRe(TRe(this),{mapper:t,inner:null})}})});var iA=I(()=>{"use strict";var ARe=W(),CRe=et(),MRe=Lr(),RRe=wt(),ORe=tt(),kRe=Rr(),DRe=Li(),LRe=So(),rA=LRe("forEach",TypeError);ARe({target:"Iterator",proto:!0,real:!0,forced:rA},{forEach:function(t){ORe(this);try{RRe(t)}catch(c){DRe(this,"throw",c)}if(rA)return CRe(rA,this,t);var n=kRe(this),u=0;MRe(n,function(c){t(c,u++)},{IS_RECORD:!0})}})});var nA=I(()=>{"use strict";var zRe=W(),FRe=et(),BRe=zt(),NRe=Ki(),jRe=vu().IteratorPrototype,URe=Iu(),$Re=YP(),VRe=Kt(),GRe=URe(function(){return FRe(this.next,this.iterator)},!0);zRe({target:"Iterator",stat:!0,forced:VRe},{from:function(t){var n=$Re(typeof t=="string"?BRe(t):t,!0);return NRe(jRe,n.iterator)?n.iterator:new GRe(n)}})});var wb=I(()=>{"use strict";var ZRe=W(),rZ=et(),HRe=wt(),iZ=tt(),WRe=Rr(),KRe=Iu(),YRe=Xx(),XRe=Li(),JRe=So(),nZ=Kt(),aA=!nZ&&JRe("map",TypeError),QRe=KRe(function(){var e=this.iterator,t=iZ(rZ(this.next,e)),n=this.done=!!t.done;if(!n)return YRe(e,this.mapper,[t.value,this.counter++],!0)});ZRe({target:"Iterator",proto:!0,real:!0,forced:nZ||aA},{map:function(t){iZ(this);try{HRe(t)}catch(n){XRe(this,"throw",n)}return aA?rZ(aA,this,t):new QRe(WRe(this),{mapper:t})}})});var sA=I(()=>{"use strict";var eOe=W(),tOe=Lr(),rOe=wt(),iOe=tt(),nOe=Rr(),aOe=Li(),oOe=So(),sOe=Yi(),lOe=He(),aZ=TypeError,oZ=lOe(function(){[].keys().reduce(function(){},void 0)}),oA=!oZ&&oOe("reduce",aZ);eOe({target:"Iterator",proto:!0,real:!0,forced:oZ||oA},{reduce:function(t){iOe(this);try{rOe(t)}catch(_){aOe(this,"throw",_)}var n=arguments.length<2,u=n?void 0:arguments[1];if(oA)return sOe(oA,this,n?[t]:[t,u]);var c=nOe(this),a=0;if(tOe(c,function(_){n?(n=!1,u=_):u=t(u,_,a),a++},{IS_RECORD:!0}),n)throw new aZ("Reduce of empty iterator with no initial value");return u}})});var uA=I(()=>{"use strict";var uOe=W(),cOe=et(),hOe=Lr(),fOe=wt(),dOe=tt(),pOe=Rr(),mOe=Li(),vOe=So(),lA=vOe("some",TypeError);uOe({target:"Iterator",proto:!0,real:!0,forced:lA},{some:function(t){dOe(this);try{fOe(t)}catch(c){mOe(this,"throw",c)}if(lA)return cOe(lA,this,t);var n=pOe(this),u=0;return hOe(n,function(c,a){if(t(c,u++))return a()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var hA=I(()=>{"use strict";var gOe=W(),sZ=et(),lZ=tt(),yOe=Rr(),_Oe=Id(),xOe=Ed(),bOe=Iu(),uZ=Li(),wOe=So(),cZ=Kt(),cA=!cZ&&wOe("take",RangeError),SOe=bOe(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,uZ(e,"normal",void 0);var t=lZ(sZ(this.next,e)),n=this.done=!!t.done;if(!n)return t.value});gOe({target:"Iterator",proto:!0,real:!0,forced:cZ||cA},{take:function(t){lZ(this);var n;try{n=xOe(_Oe(+t))}catch(u){uZ(this,"throw",u)}return cA?sZ(cA,this,n):new SOe(yOe(this),{remaining:n})}})});var fA=I(()=>{"use strict";var TOe=W(),IOe=tt(),EOe=Lr(),qOe=Rr(),POe=[].push;TOe({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return EOe(qOe(IOe(this)),POe,{that:t,IS_RECORD:!0}),t}})});var hZ=I(()=>{"use strict";var AOe=Qe(),COe=Cn();COe(AOe.JSON,"JSON",!0)});var Sb=I((L1t,fZ)=>{"use strict";var MOe=He();fZ.exports=MOe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var Ib=I((z1t,pZ)=>{"use strict";var ROe=He(),OOe=vt(),kOe=Wi(),dZ=Sb(),Tb=Object.isExtensible,DOe=ROe(function(){Tb(1)});pZ.exports=DOe||dZ?function(t){return!OOe(t)||dZ&&kOe(t)==="ArrayBuffer"?!1:Tb?Tb(t):!0}:Tb});var Ys=I((F1t,mZ)=>{"use strict";var LOe=He();mZ.exports=!LOe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var Eu=I((B1t,yZ)=>{"use strict";var zOe=W(),FOe=$e(),BOe=ud(),NOe=vt(),dA=Ot(),jOe=dr().f,vZ=uu(),UOe=Rx(),pA=Ib(),$Oe=lu(),VOe=Ys(),gZ=!1,Xs=$Oe("meta"),GOe=0,mA=function(e){jOe(e,Xs,{value:{objectID:"O"+GOe++,weakData:{}}})},ZOe=function(e,t){if(!NOe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!dA(e,Xs)){if(!pA(e))return"F";if(!t)return"E";mA(e)}return e[Xs].objectID},HOe=function(e,t){if(!dA(e,Xs)){if(!pA(e))return!0;if(!t)return!1;mA(e)}return e[Xs].weakData},WOe=function(e){return VOe&&gZ&&pA(e)&&!dA(e,Xs)&&mA(e),e},KOe=function(){YOe.enable=function(){},gZ=!0;var e=vZ.f,t=FOe([].splice),n={};n[Xs]=1,e(n).length&&(vZ.f=function(u){for(var c=e(u),a=0,_=c.length;a<_;a++)if(c[a]===Xs){t(c,a,1);break}return c},zOe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:UOe.f}))},YOe=yZ.exports={enable:KOe,fastKey:ZOe,getWeakData:HOe,onFreeze:WOe};BOe[Xs]=!0});var dg=I((N1t,xZ)=>{"use strict";var XOe=W(),JOe=Qe(),QOe=$e(),_Z=hd(),eke=rr(),tke=Eu(),rke=Lr(),ike=pn(),nke=Rt(),ake=Hn(),vA=vt(),gA=He(),oke=Qv(),ske=Cn(),lke=du();xZ.exports=function(e,t,n){var u=e.indexOf("Map")!==-1,c=e.indexOf("Weak")!==-1,a=u?"set":"add",_=JOe[e],w=_&&_.prototype,q=_,M={},O=function(re){var ae=QOe(w[re]);eke(w,re,re==="add"?function(Te){return ae(this,Te===0?0:Te),this}:re==="delete"?function(_e){return c&&!vA(_e)?!1:ae(this,_e===0?0:_e)}:re==="get"?function(Te){return c&&!vA(Te)?void 0:ae(this,Te===0?0:Te)}:re==="has"?function(Te){return c&&!vA(Te)?!1:ae(this,Te===0?0:Te)}:function(Te,nt){return ae(this,Te===0?0:Te,nt),this})},k=_Z(e,!nke(_)||!(c||w.forEach&&!gA(function(){new _().entries().next()})));if(k)q=n.getConstructor(t,e,u,a),tke.enable();else if(_Z(e,!0)){var $=new q,fe=$[a](c?{}:-0,1)!==$,Pe=gA(function(){$.has(1)}),Se=oke(function(re){new _(re)}),ne=!c&&gA(function(){for(var re=new _,ae=5;ae--;)re[a](ae,ae);return!re.has(-0)});Se||(q=t(function(re,ae){ike(re,w);var _e=lke(new _,re,q);return ake(ae)||rke(ae,_e[a],{that:_e,AS_ENTRIES:u}),_e}),q.prototype=w,w.constructor=q),(Pe||ne)&&(O("delete"),O("has"),u&&O("get")),(ne||fe)&&O(a),c&&w.clear&&delete w.clear}return M[e]=q,XOe({global:!0,constructor:!0,forced:q!==_},M),ske(q,e),c||n.setStrong(q,e,u),q}});var _A=I((j1t,EZ)=>{"use strict";var bZ=Wr(),uke=Sr(),wZ=ja(),cke=sr(),hke=pn(),fke=Hn(),dke=Lr(),pke=eb(),Eb=Ti(),mke=_u(),pg=dt(),SZ=Eu().fastKey,IZ=Qt(),TZ=IZ.set,yA=IZ.getterFor;EZ.exports={getConstructor:function(e,t,n,u){var c=e(function(M,O){hke(M,a),TZ(M,{type:t,index:bZ(null),first:null,last:null,size:0}),pg||(M.size=0),fke(O)||dke(O,M[u],{that:M,AS_ENTRIES:n})}),a=c.prototype,_=yA(t),w=function(M,O,k){var $=_(M),fe=q(M,O),Pe,Se;return fe?fe.value=k:($.last=fe={index:Se=SZ(O,!0),key:O,value:k,previous:Pe=$.last,next:null,removed:!1},$.first||($.first=fe),Pe&&(Pe.next=fe),pg?$.size++:M.size++,Se!=="F"&&($.index[Se]=fe)),M},q=function(M,O){var k=_(M),$=SZ(O),fe;if($!=="F")return k.index[$];for(fe=k.first;fe;fe=fe.next)if(fe.key===O)return fe};return wZ(a,{clear:function(){for(var O=this,k=_(O),$=k.first;$;)$.removed=!0,$.previous&&($.previous=$.previous.next=null),$=$.next;k.first=k.last=null,k.index=bZ(null),pg?k.size=0:O.size=0},delete:function(M){var O=this,k=_(O),$=q(O,M);if($){var fe=$.next,Pe=$.previous;delete k.index[$.index],$.removed=!0,Pe&&(Pe.next=fe),fe&&(fe.previous=Pe),k.first===$&&(k.first=fe),k.last===$&&(k.last=Pe),pg?k.size--:O.size--}return!!$},forEach:function(O){for(var k=_(this),$=cke(O,arguments.length>1?arguments[1]:void 0),fe;fe=fe?fe.next:k.first;)for($(fe.value,fe.key,this);fe&&fe.removed;)fe=fe.previous},has:function(O){return!!q(this,O)}}),wZ(a,n?{get:function(O){var k=q(this,O);return k&&k.value},set:function(O,k){return w(this,O===0?0:O,k)}}:{add:function(O){return w(this,O=O===0?0:O,O)}}),pg&&uke(a,"size",{configurable:!0,get:function(){return _(this).size}}),c},setStrong:function(e,t,n){var u=t+" Iterator",c=yA(t),a=yA(u);pke(e,t,function(_,w){TZ(this,{type:u,target:_,state:c(_),kind:w,last:null})},function(){for(var _=a(this),w=_.kind,q=_.last;q&&q.removed;)q=q.previous;return!_.target||!(_.last=q=q?q.next:_.state.first)?(_.target=null,Eb(void 0,!0)):Eb(w==="keys"?q.key:w==="values"?q.value:[q.key,q.value],!1)},n?"entries":"values",!n,!0),mke(t)}}});var qZ=I(()=>{"use strict";var vke=dg(),gke=_A();vke("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},gke)});var qb=I(()=>{"use strict";qZ()});var Ii=I((Z1t,PZ)=>{"use strict";var Pb=$e(),mg=Map.prototype;PZ.exports={Map,set:Pb(mg.set),get:Pb(mg.get),has:Pb(mg.has),remove:Pb(mg.delete),proto:mg}});var xA=I(()=>{"use strict";var yke=W(),_ke=$e(),xke=wt(),bke=mr(),wke=Lr(),Ab=Ii(),AZ=Kt(),Ske=He(),CZ=Ab.Map,Tke=Ab.has,Ike=Ab.get,Eke=Ab.set,qke=_ke([].push),Pke=AZ||Ske(function(){return CZ.groupBy("ab",function(e){return e}).get("a").length!==1});yke({target:"Map",stat:!0,forced:AZ||Pke},{groupBy:function(t,n){bke(t),xke(n);var u=new CZ,c=0;return wke(t,function(a){var _=n(a,c++);Tke(u,_)?qke(Ike(u,_),a):Eke(u,_,[a])}),u}})});var bA=I((K1t,MZ)=>{"use strict";var Ake=Math.log;MZ.exports=Math.log1p||function(t){var n=+t;return n>-1e-8&&n<1e-8?n-n*n/2:Ake(1+n)}});var OZ=I(()=>{"use strict";var Cke=W(),Mke=bA(),wA=Math.acosh,Rke=Math.log,RZ=Math.sqrt,Oke=Math.LN2,kke=!wA||Math.floor(wA(Number.MAX_VALUE))!==710||wA(1/0)!==1/0;Cke({target:"Math",stat:!0,forced:kke},{acosh:function(t){var n=+t;return n<1?NaN:n>94906265.62425156?Rke(n)+Oke:Mke(n-1+RZ(n-1)*RZ(n+1))}})});var LZ=I(()=>{"use strict";var Dke=W(),kZ=Math.asinh,Lke=Math.log,zke=Math.sqrt;function DZ(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-DZ(-t):Lke(t+zke(t*t+1))}var Fke=!(kZ&&1/kZ(0)>0);Dke({target:"Math",stat:!0,forced:Fke},{asinh:DZ})});var FZ=I(()=>{"use strict";var Bke=W(),zZ=Math.atanh,Nke=Math.log,jke=!(zZ&&1/zZ(-0)<0);Bke({target:"Math",stat:!0,forced:jke},{atanh:function(t){var n=+t;return n===0?n:Nke((1+n)/(1-n))/2}})});var BZ=I(()=>{"use strict";var Uke=W(),$ke=ob(),Vke=Math.abs,Gke=Math.pow;Uke({target:"Math",stat:!0},{cbrt:function(t){var n=+t;return $ke(n)*Gke(Vke(n),1/3)}})});var NZ=I(()=>{"use strict";var Zke=W(),Hke=Math.floor,Wke=Math.log,Kke=Math.LOG2E;Zke({target:"Math",stat:!0},{clz32:function(t){var n=t>>>0;return n?31-Hke(Wke(n+.5)*Kke):32}})});var gg=I((owt,jZ)=>{"use strict";var vg=Math.expm1,Yke=Math.exp;jZ.exports=!vg||vg(10)>22025.465794806718||vg(10)<22025.465794806718||vg(-2e-17)!==-2e-17?function(t){var n=+t;return n===0?n:n>-1e-6&&n<1e-6?n+n*n/2:Yke(n)-1}:vg});var $Z=I(()=>{"use strict";var Xke=W(),Jke=gg(),UZ=Math.cosh,Qke=Math.abs,SA=Math.E,eDe=!UZ||UZ(710)===1/0;Xke({target:"Math",stat:!0,forced:eDe},{cosh:function(t){var n=Jke(Qke(t)-1)+1;return(n+1/(n*SA*SA))*(SA/2)}})});var GZ=I(()=>{"use strict";var tDe=W(),VZ=gg();tDe({target:"Math",stat:!0,forced:VZ!==Math.expm1},{expm1:VZ})});var ZZ=I(()=>{"use strict";var rDe=W(),iDe=sb();rDe({target:"Math",stat:!0},{fround:iDe})});var TA=I(()=>{"use strict";var nDe=W(),aDe=B2(),oDe=.0009765625,sDe=65504,lDe=6103515625e-14;nDe({target:"Math",stat:!0},{f16round:function(t){return aDe(t,oDe,sDe,lDe)}})});var WZ=I(()=>{"use strict";var uDe=W(),HZ=Math.hypot,cDe=Math.abs,hDe=Math.sqrt,fDe=!!HZ&&HZ(1/0,NaN)!==1/0;uDe({target:"Math",stat:!0,arity:2,forced:fDe},{hypot:function(t,n){for(var u=0,c=0,a=arguments.length,_=0,w,q;c<a;)w=cDe(arguments[c++]),_<w?(q=_/w,u=u*q*q+1,_=w):w>0?(q=w/_,u+=q*q):u+=w;return _===1/0?1/0:_*hDe(u)}})});var YZ=I(()=>{"use strict";var dDe=W(),pDe=He(),KZ=Math.imul,mDe=pDe(function(){return KZ(4294967295,5)!==-5||KZ.length!==2});dDe({target:"Math",stat:!0,forced:mDe},{imul:function(t,n){var u=65535,c=+t,a=+n,_=u&c,w=u&a;return 0|_*w+((u&c>>>16)*w+_*(u&a>>>16)<<16>>>0)}})});var IA=I((_wt,XZ)=>{"use strict";var vDe=Math.log,gDe=Math.LOG10E;XZ.exports=Math.log10||function(t){return vDe(t)*gDe}});var JZ=I(()=>{"use strict";var yDe=W(),_De=IA();yDe({target:"Math",stat:!0},{log10:_De})});var QZ=I(()=>{"use strict";var xDe=W(),bDe=bA();xDe({target:"Math",stat:!0},{log1p:bDe})});var eH=I(()=>{"use strict";var wDe=W(),SDe=aP();wDe({target:"Math",stat:!0},{log2:SDe})});var tH=I(()=>{"use strict";var TDe=W(),IDe=ob();TDe({target:"Math",stat:!0},{sign:IDe})});var nH=I(()=>{"use strict";var EDe=W(),qDe=He(),rH=gg(),PDe=Math.abs,iH=Math.exp,ADe=Math.E,CDe=qDe(function(){return Math.sinh(-2e-17)!==-2e-17});EDe({target:"Math",stat:!0,forced:CDe},{sinh:function(t){var n=+t;return PDe(n)<1?(rH(n)-rH(-n))/2:(iH(n-1)-iH(-n-1))*(ADe/2)}})});var sH=I(()=>{"use strict";var MDe=W(),aH=gg(),oH=Math.exp;MDe({target:"Math",stat:!0},{tanh:function(t){var n=+t,u=aH(n),c=aH(-n);return u===1/0?1:c===1/0?-1:(u-c)/(oH(n)+oH(-n))}})});var lH=I(()=>{"use strict";var RDe=Cn();RDe(Math,"Math",!0)});var uH=I(()=>{"use strict";var ODe=W(),kDe=vq();ODe({target:"Math",stat:!0},{trunc:kDe})});var yg=I((Lwt,cH)=>{"use strict";var DDe=$e();cH.exports=DDe(1 .valueOf)});var uh=I((zwt,hH)=>{"use strict";hH.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var ch=I((Fwt,dH)=>{"use strict";var LDe=$e(),zDe=mr(),FDe=It(),qA=uh(),fH=LDe("".replace),BDe=RegExp("^["+qA+"]+"),NDe=RegExp("(^|[^"+qA+"])["+qA+"]+$"),EA=function(e){return function(t){var n=FDe(zDe(t));return e&1&&(n=fH(n,BDe,"")),e&2&&(n=fH(n,NDe,"$1")),n}};dH.exports={start:EA(1),end:EA(2),trim:EA(3)}});var xH=I(()=>{"use strict";var jDe=W(),PA=Kt(),UDe=dt(),vH=Qe(),AA=Ox(),gH=$e(),$De=hd(),pH=Ot(),VDe=du(),GDe=Ki(),ZDe=Ns(),yH=Dv(),HDe=He(),WDe=uu().f,KDe=ki().f,YDe=dr().f,XDe=yg(),JDe=ch().trim,_g="Number",qd=vH[_g],mH=AA[_g],CA=qd.prototype,QDe=vH.TypeError,eLe=gH("".slice),Cb=gH("".charCodeAt),tLe=function(e){var t=yH(e,"number");return typeof t=="bigint"?t:rLe(t)},rLe=function(e){var t=yH(e,"number"),n,u,c,a,_,w,q,M;if(ZDe(t))throw new QDe("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=JDe(t),n=Cb(t,0),n===43||n===45){if(u=Cb(t,2),u===88||u===120)return NaN}else if(n===48){switch(Cb(t,1)){case 66:case 98:c=2,a=49;break;case 79:case 111:c=8,a=55;break;default:return+t}for(_=eLe(t,2),w=_.length,q=0;q<w;q++)if(M=Cb(_,q),M<48||M>a)return NaN;return parseInt(_,c)}}return+t},MA=$De(_g,!qd(" 0o1")||!qd("0b1")||qd("+0x1")),iLe=function(e){return GDe(CA,e)&&HDe(function(){XDe(e)})},Mb=function(t){var n=arguments.length<1?0:qd(tLe(t));return iLe(this)?VDe(Object(n),this,Mb):n};Mb.prototype=CA;MA&&!PA&&(CA.constructor=Mb);jDe({global:!0,constructor:!0,wrap:!0,forced:MA},{Number:Mb});var _H=function(e,t){for(var n=UDe?WDe(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),u=0,c;n.length>u;u++)pH(t,c=n[u])&&!pH(e,c)&&YDe(e,c,KDe(t,c))};PA&&mH&&_H(AA[_g],mH);(MA||PA)&&_H(AA[_g],qd)});var bH=I(()=>{"use strict";var nLe=W();nLe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var RA=I(($wt,wH)=>{"use strict";var aLe=Qe(),oLe=aLe.isFinite;wH.exports=Number.isFinite||function(t){return typeof t=="number"&&oLe(t)}});var SH=I(()=>{"use strict";var sLe=W(),lLe=RA();sLe({target:"Number",stat:!0},{isFinite:lLe})});var Rb=I((Zwt,TH)=>{"use strict";var uLe=vt(),cLe=Math.floor;TH.exports=Number.isInteger||function(t){return!uLe(t)&&isFinite(t)&&cLe(t)===t}});var IH=I(()=>{"use strict";var hLe=W(),fLe=Rb();hLe({target:"Number",stat:!0},{isInteger:fLe})});var EH=I(()=>{"use strict";var dLe=W();dLe({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var qH=I(()=>{"use strict";var pLe=W(),mLe=Rb(),vLe=Math.abs;pLe({target:"Number",stat:!0},{isSafeInteger:function(t){return mLe(t)&&vLe(t)<=9007199254740991}})});var PH=I(()=>{"use strict";var gLe=W();gLe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var AH=I(()=>{"use strict";var yLe=W();yLe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var OA=I((iSt,OH)=>{"use strict";var RH=Qe(),_Le=He(),xLe=$e(),bLe=It(),wLe=ch().trim,SLe=uh(),TLe=xLe("".charAt),Ob=RH.parseFloat,CH=RH.Symbol,MH=CH&&CH.iterator,ILe=1/Ob(SLe+"-0")!==-1/0||MH&&!_Le(function(){Ob(Object(MH))});OH.exports=ILe?function(t){var n=wLe(bLe(t)),u=Ob(n);return u===0&&TLe(n,0)==="-"?-0:u}:Ob});var DH=I(()=>{"use strict";var ELe=W(),kH=OA();ELe({target:"Number",stat:!0,forced:Number.parseFloat!==kH},{parseFloat:kH})});var kA=I((oSt,jH)=>{"use strict";var BH=Qe(),qLe=He(),PLe=$e(),ALe=It(),CLe=ch().trim,LH=uh(),xg=BH.parseInt,zH=BH.Symbol,FH=zH&&zH.iterator,NH=/^[+-]?0x/i,MLe=PLe(NH.exec),RLe=xg(LH+"08")!==8||xg(LH+"0x16")!==22||FH&&!qLe(function(){xg(Object(FH))});jH.exports=RLe?function(t,n){var u=CLe(ALe(t));return xg(u,n>>>0||(MLe(NH,u)?16:10))}:xg});var $H=I(()=>{"use strict";var OLe=W(),UH=kA();OLe({target:"Number",stat:!0,forced:Number.parseInt!==UH},{parseInt:UH})});var WH=I(()=>{"use strict";var kLe=W(),LA=$e(),DLe=wr(),LLe=yg(),zLe=cg(),FLe=IA(),DA=He(),BLe=RangeError,VH=String,NLe=isFinite,jLe=Math.abs,ULe=Math.floor,GH=Math.pow,$Le=Math.round,ts=LA(1 .toExponential),VLe=LA(zLe),ZH=LA("".slice),HH=ts(-69e-12,4)==="-6.9000e-11"&&ts(1.255,2)==="1.25e+0"&&ts(12345,3)==="1.235e+4"&&ts(25,0)==="3e+1",GLe=function(){return DA(function(){ts(1,1/0)})&&DA(function(){ts(1,-1/0)})},ZLe=function(){return!DA(function(){ts(1/0,1/0),ts(NaN,1/0)})},HLe=!HH||!GLe()||!ZLe();kLe({target:"Number",proto:!0,forced:HLe},{toExponential:function(t){var n=LLe(this);if(t===void 0)return ts(n);var u=DLe(t);if(!NLe(n))return String(n);if(u<0||u>20)throw new BLe("Incorrect fraction digits");if(HH)return ts(n,u);var c="",a,_,w,q;if(n<0&&(c="-",n=-n),n===0)_=0,a=VLe("0",u+1);else{var M=FLe(n);_=ULe(M);var O=GH(10,_-u),k=$Le(n/O);2*n>=(2*k+1)*O&&(k+=1),k>=GH(10,u+1)&&(k/=10,_+=1),a=VH(k)}return u!==0&&(a=ZH(a,0,1)+"."+ZH(a,1)),_===0?(w="+",q="0"):(w=_>0?"+":"-",q=VH(jLe(_))),a+="e"+w+q,c+a}})});var eW=I(()=>{"use strict";var WLe=W(),BA=$e(),KLe=wr(),YLe=yg(),XLe=cg(),KH=He(),JLe=RangeError,JH=String,QH=Math.floor,FA=BA(XLe),YH=BA("".slice),bg=BA(1 .toFixed),Ad=function(e,t,n){return t===0?n:t%2===1?Ad(e,t-1,n*e):Ad(e*e,t/2,n)},QLe=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t},Pd=function(e,t,n){for(var u=-1,c=n;++u<6;)c+=t*e[u],e[u]=c%1e7,c=QH(c/1e7)},zA=function(e,t){for(var n=6,u=0;--n>=0;)u+=e[n],e[n]=QH(u/t),u=u%t*1e7},XH=function(e){for(var t=6,n="";--t>=0;)if(n!==""||t===0||e[t]!==0){var u=JH(e[t]);n=n===""?u:n+FA("0",7-u.length)+u}return n},eze=KH(function(){return bg(8e-5,3)!=="0.000"||bg(.9,0)!=="1"||bg(1.255,2)!=="1.25"||bg(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!KH(function(){bg({})});WLe({target:"Number",proto:!0,forced:eze},{toFixed:function(t){var n=YLe(this),u=KLe(t),c=[0,0,0,0,0,0],a="",_="0",w,q,M,O;if(u<0||u>20)throw new JLe("Incorrect fraction digits");if(n!==n)return"NaN";if(n<=-1e21||n>=1e21)return JH(n);if(n<0&&(a="-",n=-n),n>1e-21)if(w=QLe(n*Ad(2,69,1))-69,q=w<0?n*Ad(2,-w,1):n/Ad(2,w,1),q*=4503599627370496,w=52-w,w>0){for(Pd(c,0,q),M=u;M>=7;)Pd(c,1e7,0),M-=7;for(Pd(c,Ad(10,M,1),0),M=w-1;M>=23;)zA(c,1<<23),M-=23;zA(c,1<<M),Pd(c,1,1),zA(c,2),_=XH(c)}else Pd(c,0,q),Pd(c,1<<-w,0),_=XH(c)+FA("0",u);return u>0?(O=_.length,_=a+(O<=u?"0."+FA("0",u-O)+_:YH(_,0,O-u)+"."+YH(_,O-u))):_=a+_,_}})});var iW=I(()=>{"use strict";var tze=W(),rze=$e(),tW=He(),rW=yg(),kb=rze(1 .toPrecision),ize=tW(function(){return kb(1,void 0)!=="1"})||!tW(function(){kb({})});tze({target:"Number",proto:!0,forced:ize},{toPrecision:function(t){return t===void 0?kb(rW(this)):kb(rW(this),t)}})});var jA=I((mSt,oW)=>{"use strict";var nW=dt(),nze=$e(),aze=et(),oze=He(),NA=Qc(),sze=jv(),lze=Ov(),uze=zt(),cze=Bs(),Cd=Object.assign,aW=Object.defineProperty,hze=nze([].concat);oW.exports=!Cd||oze(function(){if(nW&&Cd({b:1},Cd(aW({},"a",{enumerable:!0,get:function(){aW(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},n=Symbol("assign detection"),u="abcdefghijklmnopqrst";return e[n]=7,u.split("").forEach(function(c){t[c]=c}),Cd({},e)[n]!==7||NA(Cd({},t)).join("")!==u})?function(t,n){for(var u=uze(t),c=arguments.length,a=1,_=sze.f,w=lze.f;c>a;)for(var q=cze(arguments[a++]),M=_?hze(NA(q),_(q)):NA(q),O=M.length,k=0,$;O>k;)$=M[k++],(!nW||aze(w,q,$))&&(u[$]=q[$]);return u}:Cd});var lW=I(()=>{"use strict";var fze=W(),sW=jA();fze({target:"Object",stat:!0,arity:2,forced:Object.assign!==sW},{assign:sW})});var uW=I(()=>{"use strict";var dze=W(),pze=dt(),mze=Wr();dze({target:"Object",stat:!0,sham:!pze},{create:mze})});var wg=I((xSt,hW)=>{"use strict";var vze=Kt(),gze=Qe(),yze=He(),cW=ab();hW.exports=vze||!yze(function(){if(!(cW&&cW<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete gze[e]}})});var fW=I(()=>{"use strict";var _ze=W(),xze=dt(),bze=wg(),wze=wt(),Sze=zt(),Tze=dr();xze&&_ze({target:"Object",proto:!0,forced:bze},{__defineGetter__:function(t,n){Tze.f(Sze(this),t,{get:wze(n),enumerable:!0,configurable:!0})}})});var pW=I(()=>{"use strict";var Ize=W(),Eze=dt(),dW=Ax().f;Ize({target:"Object",stat:!0,forced:Object.defineProperties!==dW,sham:!Eze},{defineProperties:dW})});var vW=I(()=>{"use strict";var qze=W(),Pze=dt(),mW=dr().f;qze({target:"Object",stat:!0,forced:Object.defineProperty!==mW,sham:!Pze},{defineProperty:mW})});var gW=I(()=>{"use strict";var Aze=W(),Cze=dt(),Mze=wg(),Rze=wt(),Oze=zt(),kze=dr();Cze&&Aze({target:"Object",proto:!0,forced:Mze},{__defineSetter__:function(t,n){kze.f(Oze(this),t,{set:Rze(n),enumerable:!0,configurable:!0})}})});var UA=I((ASt,wW)=>{"use strict";var _W=dt(),Dze=He(),xW=$e(),Lze=pi(),zze=Qc(),Fze=fi(),Bze=Ov().f,bW=xW(Bze),Nze=xW([].push),jze=_W&&Dze(function(){var e=Object.create(null);return e[2]=2,!bW(e,2)}),yW=function(e){return function(t){for(var n=Fze(t),u=zze(n),c=jze&&Lze(n)===null,a=u.length,_=0,w=[],q;a>_;)q=u[_++],(!_W||(c?q in n:bW(n,q)))&&Nze(w,e?[q,n[q]]:n[q]);return w}};wW.exports={entries:yW(!0),values:yW(!1)}});var SW=I(()=>{"use strict";var Uze=W(),$ze=UA().entries;Uze({target:"Object",stat:!0},{entries:function(t){return $ze(t)}})});var TW=I(()=>{"use strict";var Vze=W(),Gze=Ys(),Zze=He(),Hze=vt(),Wze=Eu().onFreeze,$A=Object.freeze,Kze=Zze(function(){$A(1)});Vze({target:"Object",stat:!0,forced:Kze,sham:!Gze},{freeze:function(t){return $A&&Hze(t)?$A(Wze(t)):t}})});var IW=I(()=>{"use strict";var Yze=W(),Xze=Lr(),Jze=Ba();Yze({target:"Object",stat:!0},{fromEntries:function(t){var n={};return Xze(t,function(u,c){Jze(n,u,c)},{AS_ENTRIES:!0}),n}})});var PW=I(()=>{"use strict";var Qze=W(),eFe=He(),tFe=fi(),EW=ki().f,qW=dt(),rFe=!qW||eFe(function(){EW(1)});Qze({target:"Object",stat:!0,forced:rFe,sham:!qW},{getOwnPropertyDescriptor:function(t,n){return EW(tFe(t),n)}})});var AW=I(()=>{"use strict";var iFe=W(),nFe=dt(),aFe=Ix(),oFe=fi(),sFe=ki(),lFe=Ba();iFe({target:"Object",stat:!0,sham:!nFe},{getOwnPropertyDescriptors:function(t){for(var n=oFe(t),u=sFe.f,c=aFe(n),a={},_=0,w,q;c.length>_;)q=u(n,w=c[_++]),q!==void 0&&lFe(a,w,q);return a}})});var CW=I(()=>{"use strict";var uFe=W(),cFe=He(),hFe=Rx().f,fFe=cFe(function(){return!Object.getOwnPropertyNames(1)});uFe({target:"Object",stat:!0,forced:fFe},{getOwnPropertyNames:hFe})});var RW=I(()=>{"use strict";var dFe=W(),pFe=He(),mFe=zt(),MW=pi(),vFe=Gx(),gFe=pFe(function(){MW(1)});dFe({target:"Object",stat:!0,forced:gFe,sham:!vFe},{getPrototypeOf:function(t){return MW(mFe(t))}})});var VA=I(()=>{"use strict";var yFe=W(),_Fe=bt(),xFe=$e(),bFe=wt(),wFe=mr(),SFe=Ko(),TFe=Lr(),IFe=He(),OW=Object.groupBy,EFe=_Fe("Object","create"),qFe=xFe([].push),PFe=!OW||IFe(function(){return OW("ab",function(e){return e}).a.length!==1});yFe({target:"Object",stat:!0,forced:PFe},{groupBy:function(t,n){wFe(t),bFe(n);var u=EFe(null),c=0;return TFe(t,function(a){var _=SFe(n(a,c++));_ in u?qFe(u[_],a):u[_]=[a]}),u}})});var GA=I(()=>{"use strict";var AFe=W(),CFe=Ot();AFe({target:"Object",stat:!0},{hasOwn:CFe})});var Db=I((WSt,kW)=>{"use strict";kW.exports=Object.is||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}});var DW=I(()=>{"use strict";var MFe=W(),RFe=Db();MFe({target:"Object",stat:!0},{is:RFe})});var zW=I(()=>{"use strict";var OFe=W(),LW=Ib();OFe({target:"Object",stat:!0,forced:Object.isExtensible!==LW},{isExtensible:LW})});var BW=I(()=>{"use strict";var kFe=W(),DFe=He(),LFe=vt(),zFe=Wi(),FW=Sb(),ZA=Object.isFrozen,FFe=FW||DFe(function(){ZA(1)});kFe({target:"Object",stat:!0,forced:FFe},{isFrozen:function(t){return!LFe(t)||FW&&zFe(t)==="ArrayBuffer"?!0:ZA?ZA(t):!1}})});var jW=I(()=>{"use strict";var BFe=W(),NFe=He(),jFe=vt(),UFe=Wi(),NW=Sb(),HA=Object.isSealed,$Fe=NW||NFe(function(){HA(1)});BFe({target:"Object",stat:!0,forced:$Fe},{isSealed:function(t){return!jFe(t)||NW&&UFe(t)==="ArrayBuffer"?!0:HA?HA(t):!1}})});var $W=I(()=>{"use strict";var VFe=W(),GFe=zt(),UW=Qc(),ZFe=He(),HFe=ZFe(function(){UW(1)});VFe({target:"Object",stat:!0,forced:HFe},{keys:function(t){return UW(GFe(t))}})});var VW=I(()=>{"use strict";var WFe=W(),KFe=dt(),YFe=wg(),XFe=zt(),JFe=Ko(),QFe=pi(),eBe=ki().f;KFe&&WFe({target:"Object",proto:!0,forced:YFe},{__lookupGetter__:function(t){var n=XFe(this),u=JFe(t),c;do if(c=eBe(n,u))return c.get;while(n=QFe(n))}})});var GW=I(()=>{"use strict";var tBe=W(),rBe=dt(),iBe=wg(),nBe=zt(),aBe=Ko(),oBe=pi(),sBe=ki().f;rBe&&tBe({target:"Object",proto:!0,forced:iBe},{__lookupSetter__:function(t){var n=nBe(this),u=aBe(t),c;do if(c=sBe(n,u))return c.set;while(n=oBe(n))}})});var ZW=I(()=>{"use strict";var lBe=W(),uBe=vt(),cBe=Eu().onFreeze,hBe=Ys(),fBe=He(),WA=Object.preventExtensions,dBe=fBe(function(){WA(1)});lBe({target:"Object",stat:!0,forced:dBe,sham:!hBe},{preventExtensions:function(t){return WA&&uBe(t)?WA(cBe(t)):t}})});var XW=I(()=>{"use strict";var pBe=dt(),mBe=Sr(),vBe=vt(),gBe=$q(),yBe=zt(),_Be=mr(),HW=Object.getPrototypeOf,WW=Object.setPrototypeOf,KW=Object.prototype,YW="__proto__";if(pBe&&HW&&WW&&!(YW in KW))try{mBe(KW,YW,{configurable:!0,get:function(){return HW(yBe(this))},set:function(t){var n=_Be(this);gBe(t)&&vBe(n)&&WW(n,t)}})}catch(e){}});var JW=I(()=>{"use strict";var xBe=W(),bBe=vt(),wBe=Eu().onFreeze,SBe=Ys(),TBe=He(),KA=Object.seal,IBe=TBe(function(){KA(1)});xBe({target:"Object",stat:!0,forced:IBe,sham:!SBe},{seal:function(t){return KA&&bBe(t)?KA(wBe(t)):t}})});var QW=I(()=>{"use strict";var EBe=W(),qBe=Fa();EBe({target:"Object",stat:!0},{setPrototypeOf:qBe})});var t7=I((gTt,e7)=>{"use strict";var PBe=qx(),ABe=An();e7.exports=PBe?{}.toString:function(){return"[object "+ABe(this)+"]"}});var r7=I(()=>{"use strict";var CBe=qx(),MBe=rr(),RBe=t7();CBe||MBe(Object.prototype,"toString",RBe,{unsafe:!0})});var i7=I(()=>{"use strict";var OBe=W(),kBe=UA().values;OBe({target:"Object",stat:!0},{values:function(t){return kBe(t)}})});var a7=I(()=>{"use strict";var DBe=W(),n7=OA();DBe({global:!0,forced:parseFloat!==n7},{parseFloat:n7})});var s7=I(()=>{"use strict";var LBe=W(),o7=kA();LBe({global:!0,forced:parseInt!==o7},{parseInt:o7})});var Sg=I((ETt,l7)=>{"use strict";var zBe=xo(),FBe=su(),BBe=TypeError;l7.exports=function(e){if(zBe(e))return e;throw new BBe(FBe(e)+" is not a constructor")}});var Tg=I((qTt,c7)=>{"use strict";var u7=tt(),NBe=Sg(),jBe=Hn(),UBe=_t(),$Be=UBe("species");c7.exports=function(e,t){var n=u7(e).constructor,u;return n===void 0||jBe(u=u7(n)[$Be])?t:NBe(u)}});var va=I((PTt,h7)=>{"use strict";var VBe=TypeError;h7.exports=function(e,t){if(e<t)throw new VBe("Not enough arguments");return e}});var YA=I((ATt,f7)=>{"use strict";var GBe=po();f7.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(GBe)});var qg=I((CTt,b7)=>{"use strict";var ga=Qe(),ZBe=Yi(),HBe=sr(),d7=Rt(),WBe=Ot(),x7=He(),p7=_q(),KBe=Kn(),m7=Lv(),YBe=va(),XBe=YA(),JBe=oh(),rC=ga.setImmediate,iC=ga.clearImmediate,QBe=ga.process,XA=ga.Dispatch,eNe=ga.Function,v7=ga.MessageChannel,tNe=ga.String,JA=0,Ig={},g7="onreadystatechange",Eg,hh,QA,eC;x7(function(){Eg=ga.location});var nC=function(e){if(WBe(Ig,e)){var t=Ig[e];delete Ig[e],t()}},tC=function(e){return function(){nC(e)}},y7=function(e){nC(e.data)},_7=function(e){ga.postMessage(tNe(e),Eg.protocol+"//"+Eg.host)};(!rC||!iC)&&(rC=function(t){YBe(arguments.length,1);var n=d7(t)?t:eNe(t),u=KBe(arguments,1);return Ig[++JA]=function(){ZBe(n,void 0,u)},hh(JA),JA},iC=function(t){delete Ig[t]},JBe?hh=function(e){QBe.nextTick(tC(e))}:XA&&XA.now?hh=function(e){XA.now(tC(e))}:v7&&!XBe?(QA=new v7,eC=QA.port2,QA.port1.onmessage=y7,hh=HBe(eC.postMessage,eC)):ga.addEventListener&&d7(ga.postMessage)&&!ga.importScripts&&Eg&&Eg.protocol!=="file:"&&!x7(_7)?(hh=_7,ga.addEventListener("message",y7,!1)):g7 in m7("script")?hh=function(e){p7.appendChild(m7("script"))[g7]=function(){p7.removeChild(this),nC(e)}}:hh=function(e){setTimeout(tC(e),0)});b7.exports={set:rC,clear:iC}});var aC=I((MTt,S7)=>{"use strict";var w7=Qe(),rNe=dt(),iNe=Object.getOwnPropertyDescriptor;S7.exports=function(e){if(!rNe)return w7[e];var t=iNe(w7,e);return t&&t.value}});var oC=I((RTt,I7)=>{"use strict";var T7=function(){this.head=null,this.tail=null};T7.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};I7.exports=T7});var q7=I((OTt,E7)=>{"use strict";var nNe=po();E7.exports=/ipad|iphone|ipod/i.test(nNe)&&typeof Pebble!="undefined"});var A7=I((kTt,P7)=>{"use strict";var aNe=po();P7.exports=/web0s(?!.*chrome)/i.test(aNe)});var fC=I((DTt,D7)=>{"use strict";var Rd=Qe(),oNe=aC(),C7=sr(),sC=qg().set,sNe=oC(),lNe=YA(),uNe=q7(),cNe=A7(),lC=oh(),M7=Rd.MutationObserver||Rd.WebKitMutationObserver,R7=Rd.document,O7=Rd.process,Lb=Rd.Promise,hC=oNe("queueMicrotask"),Md,uC,cC,zb,k7;hC||(Pg=new sNe,Ag=function(){var e,t;for(lC&&(e=O7.domain)&&e.exit();t=Pg.get();)try{t()}catch(n){throw Pg.head&&Md(),n}e&&e.enter()},!lNe&&!lC&&!cNe&&M7&&R7?(uC=!0,cC=R7.createTextNode(""),new M7(Ag).observe(cC,{characterData:!0}),Md=function(){cC.data=uC=!uC}):!uNe&&Lb&&Lb.resolve?(zb=Lb.resolve(void 0),zb.constructor=Lb,k7=C7(zb.then,zb),Md=function(){k7(Ag)}):lC?Md=function(){O7.nextTick(Ag)}:(sC=C7(sC,Rd),Md=function(){sC(Ag)}),hC=function(e){Pg.head||Md(),Pg.add(e)});var Pg,Ag;D7.exports=hC});var dC=I((LTt,L7)=>{"use strict";L7.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(n){}}});var qu=I((zTt,z7)=>{"use strict";z7.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var fh=I((FTt,F7)=>{"use strict";var hNe=Qe();F7.exports=hNe.Promise});var Od=I((BTt,U7)=>{"use strict";var fNe=Qe(),Cg=fh(),dNe=Rt(),pNe=hd(),mNe=zv(),vNe=_t(),B7=ag(),gNe=Kt(),pC=vo(),N7=Cg&&Cg.prototype,yNe=vNe("species"),mC=!1,j7=dNe(fNe.PromiseRejectionEvent),_Ne=pNe("Promise",function(){var e=mNe(Cg),t=e!==String(Cg);if(!t&&pC===66||gNe&&!(N7.catch&&N7.finally))return!0;if(!pC||pC<51||!/native code/.test(e)){var n=new Cg(function(a){a(1)}),u=function(a){a(function(){},function(){})},c=n.constructor={};if(c[yNe]=u,mC=n.then(function(){})instanceof u,!mC)return!0}return!t&&(B7==="BROWSER"||B7==="DENO")&&!j7});U7.exports={CONSTRUCTOR:_Ne,REJECTION_EVENT:j7,SUBCLASSING:mC}});var rs=I((NTt,V7)=>{"use strict";var $7=wt(),xNe=TypeError,bNe=function(e){var t,n;this.promise=new e(function(u,c){if(t!==void 0||n!==void 0)throw new xNe("Bad Promise constructor");t=u,n=c}),this.resolve=$7(t),this.reject=$7(n)};V7.exports.f=function(e){return new bNe(e)}});var u9=I(()=>{"use strict";var wNe=W(),SNe=Kt(),jb=oh(),Pu=Qe(),zd=et(),G7=rr(),Z7=Fa(),TNe=Cn(),INe=_u(),ENe=wt(),Nb=Rt(),qNe=vt(),PNe=pn(),ANe=Tg(),X7=qg().set,xC=fC(),CNe=dC(),MNe=qu(),RNe=oC(),J7=Qt(),Ub=fh(),bC=Od(),Q7=rs(),$b="Promise",e9=bC.CONSTRUCTOR,ONe=bC.REJECTION_EVENT,kNe=bC.SUBCLASSING,vC=J7.getterFor($b),DNe=J7.set,kd=Ub&&Ub.prototype,dh=Ub,Fb=kd,t9=Pu.TypeError,gC=Pu.document,wC=Pu.process,yC=Q7.f,LNe=yC,zNe=!!(gC&&gC.createEvent&&Pu.dispatchEvent),r9="unhandledrejection",FNe="rejectionhandled",H7=0,i9=1,BNe=2,SC=1,n9=2,Bb,W7,NNe,K7,a9=function(e){var t;return qNe(e)&&Nb(t=e.then)?t:!1},o9=function(e,t){var n=t.value,u=t.state===i9,c=u?e.ok:e.fail,a=e.resolve,_=e.reject,w=e.domain,q,M,O;try{c?(u||(t.rejection===n9&&UNe(t),t.rejection=SC),c===!0?q=n:(w&&w.enter(),q=c(n),w&&(w.exit(),O=!0)),q===e.promise?_(new t9("Promise-chain cycle")):(M=a9(q))?zd(M,q,a,_):a(q)):_(n)}catch(k){w&&!O&&w.exit(),_(k)}},s9=function(e,t){e.notified||(e.notified=!0,xC(function(){for(var n=e.reactions,u;u=n.get();)o9(u,e);e.notified=!1,t&&!e.rejection&&jNe(e)}))},l9=function(e,t,n){var u,c;zNe?(u=gC.createEvent("Event"),u.promise=t,u.reason=n,u.initEvent(e,!1,!0),Pu.dispatchEvent(u)):u={promise:t,reason:n},!ONe&&(c=Pu["on"+e])?c(u):e===r9&&CNe("Unhandled promise rejection",n)},jNe=function(e){zd(X7,Pu,function(){var t=e.facade,n=e.value,u=Y7(e),c;if(u&&(c=MNe(function(){jb?wC.emit("unhandledRejection",n,t):l9(r9,t,n)}),e.rejection=jb||Y7(e)?n9:SC,c.error))throw c.value})},Y7=function(e){return e.rejection!==SC&&!e.parent},UNe=function(e){zd(X7,Pu,function(){var t=e.facade;jb?wC.emit("rejectionHandled",t):l9(FNe,t,e.value)})},Dd=function(e,t,n){return function(u){e(t,u,n)}},Ld=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=BNe,s9(e,!0))},_C=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new t9("Promise can't be resolved itself");var u=a9(t);u?xC(function(){var c={done:!1};try{zd(u,t,Dd(_C,c,e),Dd(Ld,c,e))}catch(a){Ld(c,a,e)}}):(e.value=t,e.state=i9,s9(e,!1))}catch(c){Ld({done:!1},c,e)}}};if(e9&&(dh=function(t){PNe(this,Fb),ENe(t),zd(Bb,this);var n=vC(this);try{t(Dd(_C,n),Dd(Ld,n))}catch(u){Ld(n,u)}},Fb=dh.prototype,Bb=function(t){DNe(this,{type:$b,done:!1,notified:!1,parent:!1,reactions:new RNe,rejection:!1,state:H7,value:null})},Bb.prototype=G7(Fb,"then",function(t,n){var u=vC(this),c=yC(ANe(this,dh));return u.parent=!0,c.ok=Nb(t)?t:!0,c.fail=Nb(n)&&n,c.domain=jb?wC.domain:void 0,u.state===H7?u.reactions.add(c):xC(function(){o9(c,u)}),c.promise}),W7=function(){var e=new Bb,t=vC(e);this.promise=e,this.resolve=Dd(_C,t),this.reject=Dd(Ld,t)},Q7.f=yC=function(e){return e===dh||e===NNe?new W7(e):LNe(e)},!SNe&&Nb(Ub)&&kd!==Object.prototype)){K7=kd.then,kNe||G7(kd,"then",function(t,n){var u=this;return new dh(function(c,a){zd(K7,u,c,a)}).then(t,n)},{unsafe:!0});try{delete kd.constructor}catch(e){}Z7&&Z7(kd,Fb)}wNe({global:!0,constructor:!0,wrap:!0,forced:e9},{Promise:dh});TNe(dh,$b,!1,!0);INe($b)});var Mg=I(($Tt,c9)=>{"use strict";var $Ne=fh(),VNe=Qv(),GNe=Od().CONSTRUCTOR;c9.exports=GNe||!VNe(function(e){$Ne.all(e).then(void 0,function(){})})});var h9=I(()=>{"use strict";var ZNe=W(),HNe=et(),WNe=wt(),KNe=rs(),YNe=qu(),XNe=Lr(),JNe=Mg();ZNe({target:"Promise",stat:!0,forced:JNe},{all:function(t){var n=this,u=KNe.f(n),c=u.resolve,a=u.reject,_=YNe(function(){var w=WNe(n.resolve),q=[],M=0,O=1;XNe(t,function(k){var $=M++,fe=!1;O++,HNe(w,n,k).then(function(Pe){fe||(fe=!0,q[$]=Pe,--O||c(q))},a)}),--O||c(q)});return _.error&&a(_.value),u.promise}})});var d9=I(()=>{"use strict";var QNe=W(),e3e=Kt(),t3e=Od().CONSTRUCTOR,IC=fh(),r3e=bt(),i3e=Rt(),n3e=rr(),f9=IC&&IC.prototype;QNe({target:"Promise",proto:!0,forced:t3e,real:!0},{catch:function(e){return this.then(void 0,e)}});!e3e&&i3e(IC)&&(TC=r3e("Promise").prototype.catch,f9.catch!==TC&&n3e(f9,"catch",TC,{unsafe:!0}));var TC});var p9=I(()=>{"use strict";var a3e=W(),o3e=et(),s3e=wt(),l3e=rs(),u3e=qu(),c3e=Lr(),h3e=Mg();a3e({target:"Promise",stat:!0,forced:h3e},{race:function(t){var n=this,u=l3e.f(n),c=u.reject,a=u3e(function(){var _=s3e(n.resolve);c3e(t,function(w){o3e(_,n,w).then(u.resolve,c)})});return a.error&&c(a.value),u.promise}})});var m9=I(()=>{"use strict";var f3e=W(),d3e=rs(),p3e=Od().CONSTRUCTOR;f3e({target:"Promise",stat:!0,forced:p3e},{reject:function(t){var n=d3e.f(this),u=n.reject;return u(t),n.promise}})});var EC=I((JTt,v9)=>{"use strict";var m3e=tt(),v3e=vt(),g3e=rs();v9.exports=function(e,t){if(m3e(e),v3e(t)&&t.constructor===e)return t;var n=g3e.f(e),u=n.resolve;return u(t),n.promise}});var _9=I(()=>{"use strict";var y3e=W(),_3e=bt(),g9=Kt(),x3e=fh(),y9=Od().CONSTRUCTOR,b3e=EC(),w3e=_3e("Promise"),S3e=g9&&!y9;y3e({target:"Promise",stat:!0,forced:g9||y9},{resolve:function(t){return b3e(S3e&&this===w3e?x3e:this,t)}})});var x9=I(()=>{"use strict";u9();h9();d9();p9();m9();_9()});var qC=I(()=>{"use strict";var T3e=W(),I3e=et(),E3e=wt(),q3e=rs(),P3e=qu(),A3e=Lr(),C3e=Mg();T3e({target:"Promise",stat:!0,forced:C3e},{allSettled:function(t){var n=this,u=q3e.f(n),c=u.resolve,a=u.reject,_=P3e(function(){var w=E3e(n.resolve),q=[],M=0,O=1;A3e(t,function(k){var $=M++,fe=!1;O++,I3e(w,n,k).then(function(Pe){fe||(fe=!0,q[$]={status:"fulfilled",value:Pe},--O||c(q))},function(Pe){fe||(fe=!0,q[$]={status:"rejected",reason:Pe},--O||c(q))})}),--O||c(q)});return _.error&&a(_.value),u.promise}})});var PC=I(()=>{"use strict";var M3e=W(),R3e=et(),O3e=wt(),k3e=bt(),D3e=rs(),L3e=qu(),z3e=Lr(),F3e=Mg(),b9="No one promise resolved";M3e({target:"Promise",stat:!0,forced:F3e},{any:function(t){var n=this,u=k3e("AggregateError"),c=D3e.f(n),a=c.resolve,_=c.reject,w=L3e(function(){var q=O3e(n.resolve),M=[],O=0,k=1,$=!1;z3e(t,function(fe){var Pe=O++,Se=!1;k++,R3e(q,n,fe).then(function(ne){Se||$||($=!0,a(ne))},function(ne){Se||$||(Se=!0,M[Pe]=ne,--k||_(new u(M,b9)))})}),--k||_(new u(M,b9))});return w.error&&_(w.value),c.promise}})});var I9=I(()=>{"use strict";var B3e=W(),N3e=Kt(),Vb=fh(),j3e=He(),S9=bt(),T9=Rt(),U3e=Tg(),w9=EC(),$3e=rr(),CC=Vb&&Vb.prototype,V3e=!!Vb&&j3e(function(){CC.finally.call({then:function(){}},function(){})});B3e({target:"Promise",proto:!0,real:!0,forced:V3e},{finally:function(e){var t=U3e(this,S9("Promise")),n=T9(e);return this.then(n?function(u){return w9(t,e()).then(function(){return u})}:e,n?function(u){return w9(t,e()).then(function(){throw u})}:e)}});!N3e&&T9(Vb)&&(AC=S9("Promise").prototype.finally,CC.finally!==AC&&$3e(CC,"finally",AC,{unsafe:!0}));var AC});var RC=I(()=>{"use strict";var G3e=W(),Z3e=Qe(),H3e=Yi(),W3e=Kn(),K3e=rs(),Y3e=wt(),q9=qu(),MC=Z3e.Promise,E9=!1,X3e=!MC||!MC.try||q9(function(){MC.try(function(e){E9=e===8},8)}).error||!E9;G3e({target:"Promise",stat:!0,forced:X3e},{try:function(e){var t=arguments.length>1?W3e(arguments,1):[],n=K3e.f(this),u=q9(function(){return H3e(Y3e(e),void 0,t)});return(u.error?n.reject:n.resolve)(u.value),n.promise}})});var OC=I(()=>{"use strict";var J3e=W(),Q3e=rs();J3e({target:"Promise",stat:!0},{withResolvers:function(){var t=Q3e.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var P9=I(()=>{"use strict";var eje=W(),tje=Yi(),rje=wt(),ije=tt(),nje=He(),aje=!nje(function(){Reflect.apply(function(){})});eje({target:"Reflect",stat:!0,forced:aje},{apply:function(t,n,u){return tje(rje(t),n,ije(u))}})});var D9=I(()=>{"use strict";var oje=W(),sje=bt(),kC=Yi(),lje=CP(),A9=Sg(),uje=tt(),C9=vt(),cje=Wr(),R9=He(),DC=sje("Reflect","construct"),hje=Object.prototype,fje=[].push,O9=R9(function(){function e(){}return!(DC(function(){},[],e)instanceof e)}),k9=!R9(function(){DC(function(){})}),M9=O9||k9;oje({target:"Reflect",stat:!0,forced:M9,sham:M9},{construct:function(t,n){A9(t),uje(n);var u=arguments.length<3?t:A9(arguments[2]);if(k9&&!O9)return DC(t,n,u);if(t===u){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3])}var c=[null];return kC(fje,c,n),new(kC(lje,t,c))}var a=u.prototype,_=cje(C9(a)?a:hje),w=kC(t,_,n);return C9(w)?w:_}})});var F9=I(()=>{"use strict";var dje=W(),pje=dt(),L9=tt(),mje=Ko(),z9=dr(),vje=He(),gje=vje(function(){Reflect.defineProperty(z9.f({},1,{value:1}),1,{value:2})});dje({target:"Reflect",stat:!0,forced:gje,sham:!pje},{defineProperty:function(t,n,u){L9(t);var c=mje(n);L9(u);try{return z9.f(t,c,u),!0}catch(a){return!1}}})});var B9=I(()=>{"use strict";var yje=W(),_je=tt(),xje=ki().f;yje({target:"Reflect",stat:!0},{deleteProperty:function(t,n){var u=xje(_je(t),n);return u&&!u.configurable?!1:delete t[n]}})});var LC=I((bIt,j9)=>{"use strict";var N9=Ot();j9.exports=function(e){return e!==void 0&&(N9(e,"value")||N9(e,"writable"))}});var $9=I(()=>{"use strict";var bje=W(),wje=et(),Sje=vt(),Tje=tt(),Ije=LC(),Eje=ki(),qje=pi();function U9(e,t){var n=arguments.length<3?e:arguments[2],u,c;if(Tje(e)===n)return e[t];if(u=Eje.f(e,t),u)return Ije(u)?u.value:u.get===void 0?void 0:wje(u.get,n);if(Sje(c=qje(e)))return U9(c,t,n)}bje({target:"Reflect",stat:!0},{get:U9})});var V9=I(()=>{"use strict";var Pje=W(),Aje=dt(),Cje=tt(),Mje=ki();Pje({target:"Reflect",stat:!0,sham:!Aje},{getOwnPropertyDescriptor:function(t,n){return Mje.f(Cje(t),n)}})});var G9=I(()=>{"use strict";var Rje=W(),Oje=tt(),kje=pi(),Dje=Gx();Rje({target:"Reflect",stat:!0,sham:!Dje},{getPrototypeOf:function(t){return kje(Oje(t))}})});var Z9=I(()=>{"use strict";var Lje=W();Lje({target:"Reflect",stat:!0},{has:function(t,n){return n in t}})});var H9=I(()=>{"use strict";var zje=W(),Fje=tt(),Bje=Ib();zje({target:"Reflect",stat:!0},{isExtensible:function(t){return Fje(t),Bje(t)}})});var W9=I(()=>{"use strict";var Nje=W(),jje=Ix();Nje({target:"Reflect",stat:!0},{ownKeys:jje})});var K9=I(()=>{"use strict";var Uje=W(),$je=bt(),Vje=tt(),Gje=Ys();Uje({target:"Reflect",stat:!0,sham:!Gje},{preventExtensions:function(t){Vje(t);try{var n=$je("Object","preventExtensions");return n&&n(t),!0}catch(u){return!1}}})});var eK=I(()=>{"use strict";var Zje=W(),Hje=et(),Wje=tt(),Y9=vt(),Kje=LC(),Yje=He(),zC=dr(),X9=ki(),Xje=pi(),J9=Zn();function Q9(e,t,n){var u=arguments.length<4?e:arguments[3],c=X9.f(Wje(e),t),a,_,w;if(!c){if(Y9(_=Xje(e)))return Q9(_,t,n,u);c=J9(0)}if(Kje(c)){if(c.writable===!1||!Y9(u))return!1;if(a=X9.f(u,t)){if(a.get||a.set||a.writable===!1)return!1;a.value=n,zC.f(u,t,a)}else zC.f(u,t,J9(0,n))}else{if(w=c.set,w===void 0)return!1;Hje(w,u,n)}return!0}var Jje=Yje(function(){var e=function(){},t=zC.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});Zje({target:"Reflect",stat:!0,forced:Jje},{set:Q9})});var rK=I(()=>{"use strict";var Qje=W(),e4e=tt(),t4e=Vq(),tK=Fa();tK&&Qje({target:"Reflect",stat:!0},{setPrototypeOf:function(t,n){e4e(t),t4e(n);try{return tK(t,n),!0}catch(u){return!1}}})});var iK=I(()=>{"use strict";var r4e=W(),i4e=Qe(),n4e=Cn();r4e({global:!0},{Reflect:{}});n4e(i4e.Reflect,"Reflect",!0)});var Rg=I((UIt,nK)=>{"use strict";var a4e=vt(),o4e=Wi(),s4e=_t(),l4e=s4e("match");nK.exports=function(e){var t;return a4e(e)&&((t=e[l4e])!==void 0?!!t:o4e(e)==="RegExp")}});var Gb=I(($It,aK)=>{"use strict";var u4e=tt();aK.exports=function(){var e=u4e(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var Fd=I((VIt,sK)=>{"use strict";var c4e=et(),h4e=Ot(),f4e=Ki(),d4e=Gb(),oK=RegExp.prototype;sK.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in oK)&&!h4e(e,"flags")&&f4e(oK,e)?c4e(d4e,e):t}});var Og=I((GIt,lK)=>{"use strict";var FC=He(),p4e=Qe(),BC=p4e.RegExp,NC=FC(function(){var e=BC("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),m4e=NC||FC(function(){return!BC("a","y").sticky}),v4e=NC||FC(function(){var e=BC("^r","gy");return e.lastIndex=2,e.exec("str")!==null});lK.exports={BROKEN_CARET:v4e,MISSED_STICKY:m4e,UNSUPPORTED_Y:NC}});var Zb=I((ZIt,uK)=>{"use strict";var g4e=He(),y4e=Qe(),_4e=y4e.RegExp;uK.exports=g4e(function(){var e=_4e(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var jC=I((HIt,cK)=>{"use strict";var x4e=He(),b4e=Qe(),w4e=b4e.RegExp;cK.exports=x4e(function(){var e=w4e("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var xK=I(()=>{"use strict";var S4e=dt(),GC=Qe(),kg=$e(),T4e=hd(),I4e=du(),E4e=di(),q4e=Wr(),P4e=uu().f,hK=Ki(),A4e=Rg(),fK=It(),C4e=Fd(),vK=Og(),M4e=Gq(),R4e=rr(),O4e=He(),k4e=Ot(),D4e=Qt().enforce,L4e=_u(),z4e=_t(),gK=Zb(),yK=jC(),F4e=z4e("match"),Cu=GC.RegExp,Bd=Cu.prototype,B4e=GC.SyntaxError,N4e=kg(Bd.exec),Hb=kg("".charAt),dK=kg("".replace),pK=kg("".indexOf),mK=kg("".slice),j4e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,ph=/a/g,UC=/a/g,U4e=new Cu(ph)!==ph,_K=vK.MISSED_STICKY,$4e=vK.UNSUPPORTED_Y,V4e=S4e&&(!U4e||_K||gK||yK||O4e(function(){return UC[F4e]=!1,Cu(ph)!==ph||Cu(UC)===UC||String(Cu(ph,"i"))!=="/a/i"})),G4e=function(e){for(var t=e.length,n=0,u="",c=!1,a;n<=t;n++){if(a=Hb(e,n),a==="\\"){u+=a+Hb(e,++n);continue}!c&&a==="."?u+="[\\s\\S]":(a==="["?c=!0:a==="]"&&(c=!1),u+=a)}return u},Z4e=function(e){for(var t=e.length,n=0,u="",c=[],a=q4e(null),_=!1,w=!1,q=0,M="",O;n<=t;n++){if(O=Hb(e,n),O==="\\")O+=Hb(e,++n);else if(O==="]")_=!1;else if(!_)switch(!0){case O==="[":_=!0;break;case O==="(":if(u+=O,mK(e,n+1,n+3)==="?:")continue;N4e(j4e,mK(e,n+1))&&(n+=2,w=!0),q++;continue;case O===">"&&w:if(M===""||k4e(a,M))throw new B4e("Invalid capture group name");a[M]=!0,c[c.length]=[M,q],w=!1,M="";continue}w?M+=O:u+=O}return[u,c]};if(T4e("RegExp",V4e)){for(Au=function(t,n){var u=hK(Bd,this),c=A4e(t),a=n===void 0,_=[],w=t,q,M,O,k,$,fe;if(!u&&c&&a&&t.constructor===Au)return t;if((c||hK(Bd,t))&&(t=t.source,a&&(n=C4e(w))),t=t===void 0?"":fK(t),n=n===void 0?"":fK(n),w=t,gK&&"dotAll"in ph&&(M=!!n&&pK(n,"s")>-1,M&&(n=dK(n,/s/g,""))),q=n,_K&&"sticky"in ph&&(O=!!n&&pK(n,"y")>-1,O&&$4e&&(n=dK(n,/y/g,""))),yK&&(k=Z4e(t),t=k[0],_=k[1]),$=I4e(Cu(t,n),u?this:Bd,Au),(M||O||_.length)&&(fe=D4e($),M&&(fe.dotAll=!0,fe.raw=Au(G4e(t),q)),O&&(fe.sticky=!0),_.length&&(fe.groups=_)),t!==w)try{E4e($,"source",w===""?"(?:)":w)}catch(Pe){}return $},$C=P4e(Cu),VC=0;$C.length>VC;)M4e(Au,Cu,$C[VC++]);Bd.constructor=Au,Au.prototype=Bd,R4e(GC,"RegExp",Au,{constructor:!0})}var Au,$C,VC;L4e("RegExp")});var Dg=I((YIt,bK)=>{"use strict";var H4e=TypeError;bK.exports=function(e){if(typeof e=="string")return e;throw new H4e("Argument is not a string")}});var KC=I(()=>{"use strict";var W4e=W(),Lg=$e(),K4e=Dg(),Y4e=Ot(),wK=hg().start,X4e=uh(),J4e=Array,SK=RegExp.escape,TK=Lg("".charAt),WC=Lg("".charCodeAt),Q4e=Lg(1.1.toString),e5e=Lg([].join),EK=/^[0-9a-z]/i,t5e=/^[$()*+./?[\\\]^{|}]/,r5e=RegExp("^[!\"#%&',\\-:;<=>@`~"+X4e+"]"),ZC=Lg(EK.exec),IK={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},HC=function(e){var t=Q4e(WC(e,0),16);return t.length<3?"\\x"+wK(t,2,"0"):"\\u"+wK(t,4,"0")},i5e=!SK||SK("ab")!=="\\x61b";W4e({target:"RegExp",stat:!0,forced:i5e},{escape:function(t){K4e(t);for(var n=t.length,u=J4e(n),c=0;c<n;c++){var a=TK(t,c);if(c===0&&ZC(EK,a))u[c]=HC(a);else if(Y4e(IK,a))u[c]="\\"+IK[a];else if(ZC(t5e,a))u[c]="\\"+a;else if(ZC(r5e,a))u[c]=HC(a);else{var _=WC(a,0);(_&63488)!==55296?u[c]=a:_>=56320||c+1>=n||(WC(t,c+1)&64512)!==56320?u[c]=HC(a):(u[c]=a,u[++c]=TK(t,c))}}return e5e(u,"")}})});var PK=I(()=>{"use strict";var n5e=dt(),a5e=Zb(),o5e=Wi(),s5e=Sr(),l5e=Qt().get,qK=RegExp.prototype,u5e=TypeError;n5e&&a5e&&s5e(qK,"dotAll",{configurable:!0,get:function(){if(this!==qK){if(o5e(this)==="RegExp")return!!l5e(this).dotAll;throw new u5e("Incompatible receiver, RegExp required")}}})});var Yb=I((tEt,CK)=>{"use strict";var Nd=et(),Kb=$e(),c5e=It(),h5e=Gb(),f5e=Og(),d5e=js(),p5e=Wr(),m5e=Qt().get,v5e=Zb(),g5e=jC(),y5e=d5e("native-string-replace",String.prototype.replace),Wb=RegExp.prototype.exec,XC=Wb,_5e=Kb("".charAt),x5e=Kb("".indexOf),b5e=Kb("".replace),YC=Kb("".slice),JC=function(){var e=/a/,t=/b*/g;return Nd(Wb,e,"a"),Nd(Wb,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),AK=f5e.BROKEN_CARET,QC=/()??/.exec("")[1]!==void 0,w5e=JC||QC||AK||v5e||g5e;w5e&&(XC=function(t){var n=this,u=m5e(n),c=c5e(t),a=u.raw,_,w,q,M,O,k,$;if(a)return a.lastIndex=n.lastIndex,_=Nd(XC,a,c),n.lastIndex=a.lastIndex,_;var fe=u.groups,Pe=AK&&n.sticky,Se=Nd(h5e,n),ne=n.source,re=0,ae=c;if(Pe&&(Se=b5e(Se,"y",""),x5e(Se,"g")===-1&&(Se+="g"),ae=YC(c,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&_5e(c,n.lastIndex-1)!==`
`)&&(ne="(?: "+ne+")",ae=" "+ae,re++),w=new RegExp("^(?:"+ne+")",Se)),QC&&(w=new RegExp("^"+ne+"$(?!\\s)",Se)),JC&&(q=n.lastIndex),M=Nd(Wb,Pe?w:n,ae),Pe?M?(M.input=YC(M.input,re),M[0]=YC(M[0],re),M.index=n.lastIndex,n.lastIndex+=M[0].length):n.lastIndex=0:JC&&M&&(n.lastIndex=n.global?M.index+M[0].length:q),QC&&M&&M.length>1&&Nd(y5e,M[0],w,function(){for(O=1;O<arguments.length-2;O++)arguments[O]===void 0&&(M[O]=void 0)}),M&&fe)for(M.groups=k=p5e(null),O=0;O<fe.length;O++)$=fe[O],k[$[0]]=M[$[1]];return M});CK.exports=XC});var Xb=I(()=>{"use strict";var S5e=W(),MK=Yb();S5e({target:"RegExp",proto:!0,forced:/./.exec!==MK},{exec:MK})});var kK=I(()=>{"use strict";var T5e=Qe(),I5e=dt(),E5e=Sr(),q5e=Gb(),P5e=He(),RK=T5e.RegExp,OK=RK.prototype,A5e=I5e&&P5e(function(){var e=!0;try{RK(".","d")}catch(q){e=!1}var t={},n="",u=e?"dgimsy":"gimsy",c=function(q,M){Object.defineProperty(t,q,{get:function(){return n+=M,!0}})},a={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(a.hasIndices="d");for(var _ in a)c(_,a[_]);var w=Object.getOwnPropertyDescriptor(OK,"flags").get.call(t);return w!==u||n!==u});A5e&&E5e(OK,"flags",{configurable:!0,get:q5e})});var LK=I(()=>{"use strict";var C5e=dt(),M5e=Og().MISSED_STICKY,R5e=Wi(),O5e=Sr(),k5e=Qt().get,DK=RegExp.prototype,D5e=TypeError;C5e&&M5e&&O5e(DK,"sticky",{configurable:!0,get:function(){if(this!==DK){if(R5e(this)==="RegExp")return!!k5e(this).sticky;throw new D5e("Incompatible receiver, RegExp required")}}})});var BK=I(()=>{"use strict";Xb();var L5e=W(),zK=et(),z5e=Rt(),FK=tt(),F5e=It(),B5e=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),N5e=/./.test;L5e({target:"RegExp",proto:!0,forced:!B5e},{test:function(e){var t=FK(this),n=F5e(e),u=t.exec;if(!z5e(u))return zK(N5e,t,n);var c=zK(u,t,n);return c===null?!1:(FK(c),!0)}})});var $K=I(()=>{"use strict";var j5e=Yc().PROPER,U5e=rr(),$5e=tt(),NK=It(),V5e=He(),G5e=Fd(),eM="toString",jK=RegExp.prototype,UK=jK[eM],Z5e=V5e(function(){return UK.call({source:"a",flags:"b"})!=="/a/b"}),H5e=j5e&&UK.name!==eM;(Z5e||H5e)&&U5e(jK,eM,function(){var t=$5e(this),n=NK(t.source),u=NK(G5e(t));return"/"+n+"/"+u},{unsafe:!0})});var VK=I(()=>{"use strict";var W5e=dg(),K5e=_A();W5e("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},K5e)});var GK=I(()=>{"use strict";VK()});var zi=I((vEt,ZK)=>{"use strict";var tM=$e(),Jb=Set.prototype;ZK.exports={Set,add:tM(Jb.add),has:tM(Jb.has),remove:tM(Jb.delete),proto:Jb}});var Xi=I((gEt,HK)=>{"use strict";var Y5e=zi().has;HK.exports=function(e){return Y5e(e),e}});var Js=I((yEt,WK)=>{"use strict";var X5e=et();WK.exports=function(e,t,n){for(var u=n?e:e.iterator,c=e.next,a,_;!(a=X5e(c,u)).done;)if(_=t(a.value),_!==void 0)return _}});var Jn=I((_Et,QK)=>{"use strict";var KK=$e(),J5e=Js(),YK=zi(),Q5e=YK.Set,XK=YK.proto,e6e=KK(XK.forEach),JK=KK(XK.keys),t6e=JK(new Q5e).next;QK.exports=function(e,t,n){return n?J5e({iterator:JK(e),next:t6e},t):e6e(e,t)}});var Qb=I((xEt,tY)=>{"use strict";var eY=zi(),r6e=Jn(),i6e=eY.Set,n6e=eY.add;tY.exports=function(e){var t=new i6e;return r6e(e,function(n){n6e(t,n)}),t}});var jd=I((bEt,rY)=>{"use strict";var a6e=Yv(),o6e=zi();rY.exports=a6e(o6e.proto,"size","get")||function(e){return e.size}});var Mu=I((wEt,lY)=>{"use strict";var iY=wt(),oY=tt(),nY=et(),s6e=wr(),l6e=Rr(),aY="Invalid size",u6e=RangeError,c6e=TypeError,h6e=Math.max,sY=function(e,t){this.set=e,this.size=h6e(t,0),this.has=iY(e.has),this.keys=iY(e.keys)};sY.prototype={getIterator:function(){return l6e(oY(nY(this.keys,this.set)))},includes:function(e){return nY(this.has,this.set,e)}};lY.exports=function(e){oY(e);var t=+e.size;if(t!==t)throw new c6e(aY);var n=s6e(t);if(n<0)throw new u6e(aY);return new sY(e,n)}});var rM=I((SEt,hY)=>{"use strict";var f6e=Xi(),cY=zi(),d6e=Qb(),p6e=jd(),m6e=Mu(),v6e=Jn(),g6e=Js(),y6e=cY.has,uY=cY.remove;hY.exports=function(t){var n=f6e(this),u=m6e(t),c=d6e(n);return p6e(n)<=u.size?v6e(n,function(a){u.includes(a)&&uY(c,a)}):g6e(u.getIterator(),function(a){y6e(n,a)&&uY(c,a)}),c}});var Ru=I((TEt,pY)=>{"use strict";var _6e=bt(),fY=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}},dY=function(e){return{size:e,has:function(){return!0},keys:function(){throw new Error("e")}}};pY.exports=function(e,t){var n=_6e("Set");try{new n()[e](fY(0));try{return new n()[e](fY(-1)),!1}catch(c){if(!t)return!0;try{return new n()[e](dY(-1/0)),!1}catch(a){var u=new n;return u.add(1),u.add(2),t(u[e](dY(1/0)))}}}catch(c){return!1}}});var iM=I(()=>{"use strict";var x6e=W(),b6e=rM(),w6e=Ru(),S6e=!w6e("difference",function(e){return e.size===0});x6e({target:"Set",proto:!0,real:!0,forced:S6e},{difference:b6e})});var aM=I((qEt,vY)=>{"use strict";var T6e=Xi(),nM=zi(),I6e=jd(),E6e=Mu(),q6e=Jn(),P6e=Js(),A6e=nM.Set,mY=nM.add,C6e=nM.has;vY.exports=function(t){var n=T6e(this),u=E6e(t),c=new A6e;return I6e(n)>u.size?P6e(u.getIterator(),function(a){C6e(n,a)&&mY(c,a)}):q6e(n,function(a){u.includes(a)&&mY(c,a)}),c}});var oM=I(()=>{"use strict";var M6e=W(),R6e=He(),O6e=aM(),k6e=Ru(),D6e=!k6e("intersection",function(e){return e.size===2&&e.has(1)&&e.has(2)})||R6e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});M6e({target:"Set",proto:!0,real:!0,forced:D6e},{intersection:O6e})});var sM=I((CEt,gY)=>{"use strict";var L6e=Xi(),z6e=zi().has,F6e=jd(),B6e=Mu(),N6e=Jn(),j6e=Js(),U6e=Li();gY.exports=function(t){var n=L6e(this),u=B6e(t);if(F6e(n)<=u.size)return N6e(n,function(a){if(u.includes(a))return!1},!0)!==!1;var c=u.getIterator();return j6e(c,function(a){if(z6e(n,a))return U6e(c,"normal",!1)})!==!1}});var lM=I(()=>{"use strict";var $6e=W(),V6e=sM(),G6e=Ru(),Z6e=!G6e("isDisjointFrom",function(e){return!e});$6e({target:"Set",proto:!0,real:!0,forced:Z6e},{isDisjointFrom:V6e})});var uM=I((OEt,yY)=>{"use strict";var H6e=Xi(),W6e=jd(),K6e=Jn(),Y6e=Mu();yY.exports=function(t){var n=H6e(this),u=Y6e(t);return W6e(n)>u.size?!1:K6e(n,function(c){if(!u.includes(c))return!1},!0)!==!1}});var cM=I(()=>{"use strict";var X6e=W(),J6e=uM(),Q6e=Ru(),eUe=!Q6e("isSubsetOf",function(e){return e});X6e({target:"Set",proto:!0,real:!0,forced:eUe},{isSubsetOf:J6e})});var hM=I((LEt,_Y)=>{"use strict";var tUe=Xi(),rUe=zi().has,iUe=jd(),nUe=Mu(),aUe=Js(),oUe=Li();_Y.exports=function(t){var n=tUe(this),u=nUe(t);if(iUe(n)<u.size)return!1;var c=u.getIterator();return aUe(c,function(a){if(!rUe(n,a))return oUe(c,"normal",!1)})!==!1}});var fM=I(()=>{"use strict";var sUe=W(),lUe=hM(),uUe=Ru(),cUe=!uUe("isSupersetOf",function(e){return!e});sUe({target:"Set",proto:!0,real:!0,forced:cUe},{isSupersetOf:lUe})});var pM=I((BEt,xY)=>{"use strict";var hUe=Xi(),dM=zi(),fUe=Qb(),dUe=Mu(),pUe=Js(),mUe=dM.add,vUe=dM.has,gUe=dM.remove;xY.exports=function(t){var n=hUe(this),u=dUe(t).getIterator(),c=fUe(n);return pUe(u,function(a){vUe(n,a)?gUe(c,a):mUe(c,a)}),c}});var mM=I(()=>{"use strict";var yUe=W(),_Ue=pM(),xUe=Ru();yUe({target:"Set",proto:!0,real:!0,forced:!xUe("symmetricDifference")},{symmetricDifference:_Ue})});var vM=I((UEt,bY)=>{"use strict";var bUe=Xi(),wUe=zi().add,SUe=Qb(),TUe=Mu(),IUe=Js();bY.exports=function(t){var n=bUe(this),u=TUe(t).getIterator(),c=SUe(n);return IUe(u,function(a){wUe(c,a)}),c}});var gM=I(()=>{"use strict";var EUe=W(),qUe=vM(),PUe=Ru();EUe({target:"Set",proto:!0,real:!0,forced:!PUe("union")},{union:qUe})});var wY=I(()=>{"use strict";var AUe=W(),CUe=$e(),MUe=mr(),RUe=wr(),OUe=It(),kUe=He(),DUe=CUe("".charAt),LUe=kUe(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});AUe({target:"String",proto:!0,forced:LUe},{at:function(t){var n=OUe(MUe(this)),u=n.length,c=RUe(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:DUe(n,a)}})});var mh=I((HEt,IY)=>{"use strict";var yM=$e(),zUe=wr(),FUe=It(),BUe=mr(),NUe=yM("".charAt),SY=yM("".charCodeAt),jUe=yM("".slice),TY=function(e){return function(t,n){var u=FUe(BUe(t)),c=zUe(n),a=u.length,_,w;return c<0||c>=a?e?"":void 0:(_=SY(u,c),_<55296||_>56319||c+1===a||(w=SY(u,c+1))<56320||w>57343?e?NUe(u,c):_:e?jUe(u,c,c+2):(_-55296<<10)+(w-56320)+65536)}};IY.exports={codeAt:TY(!1),charAt:TY(!0)}});var EY=I(()=>{"use strict";var UUe=W(),$Ue=mh().codeAt;UUe({target:"String",proto:!0},{codePointAt:function(t){return $Ue(this,t)}})});var e1=I((YEt,qY)=>{"use strict";var VUe=Rg(),GUe=TypeError;qY.exports=function(e){if(VUe(e))throw new GUe("The method doesn't accept regular expressions");return e}});var t1=I((XEt,PY)=>{"use strict";var ZUe=_t(),HUe=ZUe("match");PY.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[HUe]=!1,"/./"[e](t)}catch(u){}}return!1}});var MY=I(()=>{"use strict";var WUe=W(),KUe=cu(),YUe=ki().f,XUe=Wn(),AY=It(),JUe=e1(),QUe=mr(),e$e=t1(),t$e=Kt(),r$e=KUe("".slice),i$e=Math.min,CY=e$e("endsWith"),n$e=!t$e&&!CY&&!!function(){var e=YUe(String.prototype,"endsWith");return e&&!e.writable}();WUe({target:"String",proto:!0,forced:!n$e&&!CY},{endsWith:function(t){var n=AY(QUe(this));JUe(t);var u=arguments.length>1?arguments[1]:void 0,c=n.length,a=u===void 0?c:i$e(XUe(u),c),_=AY(t);return r$e(n,a-_.length,a)===_}})});var _M=I(()=>{"use strict";var a$e=W(),o$e=$e(),s$e=yo(),l$e=RangeError,RY=String.fromCharCode,OY=String.fromCodePoint,u$e=o$e([].join),c$e=!!OY&&OY.length!==1;a$e({target:"String",stat:!0,arity:1,forced:c$e},{fromCodePoint:function(t){for(var n=[],u=arguments.length,c=0,a;u>c;){if(a=+arguments[c++],s$e(a,1114111)!==a)throw new l$e(a+" is not a valid code point");n[c]=a<65536?RY(a):RY(((a-=65536)>>10)+55296,a%1024+56320)}return u$e(n,"")}})});var DY=I(()=>{"use strict";var h$e=W(),f$e=$e(),d$e=e1(),p$e=mr(),kY=It(),m$e=t1(),v$e=f$e("".indexOf);h$e({target:"String",proto:!0,forced:!m$e("includes")},{includes:function(t){return!!~v$e(kY(p$e(this)),kY(d$e(t)),arguments.length>1?arguments[1]:void 0)}})});var xM=I(()=>{"use strict";var g$e=W(),y$e=$e(),_$e=mr(),x$e=It(),LY=y$e("".charCodeAt);g$e({target:"String",proto:!0},{isWellFormed:function(){for(var t=x$e(_$e(this)),n=t.length,u=0;u<n;u++){var c=LY(t,u);if((c&63488)===55296&&(c>=56320||++u>=n||(LY(t,u)&64512)!==56320))return!1}return!0}})});var bM=I(()=>{"use strict";var b$e=mh().charAt,w$e=It(),FY=Qt(),S$e=eb(),zY=Ti(),BY="String Iterator",T$e=FY.set,I$e=FY.getterFor(BY);S$e(String,"String",function(e){T$e(this,{type:BY,string:w$e(e),index:0})},function(){var t=I$e(this),n=t.string,u=t.index,c;return u>=n.length?zY(void 0,!0):(c=b$e(n,u),t.index+=c.length,zY(c,!1))})});var zg=I((lqt,VY)=>{"use strict";Xb();var NY=et(),jY=rr(),E$e=Yb(),UY=He(),$Y=_t(),q$e=di(),P$e=$Y("species"),wM=RegExp.prototype;VY.exports=function(e,t,n,u){var c=$Y(e),a=!UY(function(){var M={};return M[c]=function(){return 7},""[e](M)!==7}),_=a&&!UY(function(){var M=!1,O=/a/;return e==="split"&&(O={},O.constructor={},O.constructor[P$e]=function(){return O},O.flags="",O[c]=/./[c]),O.exec=function(){return M=!0,null},O[c](""),!M});if(!a||!_||n){var w=/./[c],q=t(c,""[e],function(M,O,k,$,fe){var Pe=O.exec;return Pe===E$e||Pe===wM.exec?a&&!fe?{done:!0,value:NY(w,O,k,$)}:{done:!0,value:NY(M,k,O,$)}:{done:!1}});jY(String.prototype,e,q[0]),jY(wM,c,q[1])}u&&q$e(wM[c],"sham",!0)}});var Fg=I((uqt,GY)=>{"use strict";var A$e=mh().charAt;GY.exports=function(e,t,n){return t+(n?A$e(e,t).length:1)}});var Ud=I((cqt,HY)=>{"use strict";var ZY=et(),C$e=tt(),M$e=Rt(),R$e=Wi(),O$e=Yb(),k$e=TypeError;HY.exports=function(e,t){var n=e.exec;if(M$e(n)){var u=ZY(n,e,t);return u!==null&&C$e(u),u}if(R$e(e)==="RegExp")return ZY(O$e,e,t);throw new k$e("RegExp#exec called on incompatible receiver")}});var KY=I(()=>{"use strict";var D$e=et(),L$e=zg(),z$e=tt(),F$e=vt(),B$e=Wn(),SM=It(),N$e=mr(),j$e=Hr(),U$e=Fg(),WY=Ud();L$e("match",function(e,t,n){return[function(c){var a=N$e(this),_=F$e(c)?j$e(c,e):void 0;return _?D$e(_,c,a):new RegExp(c)[e](SM(a))},function(u){var c=z$e(this),a=SM(u),_=n(t,c,a);if(_.done)return _.value;if(!c.global)return WY(c,a);var w=c.unicode;c.lastIndex=0;for(var q=[],M=0,O;(O=WY(c,a))!==null;){var k=SM(O[0]);q[M]=k,k===""&&(c.lastIndex=U$e(a,B$e(c.lastIndex),w)),M++}return M===0?null:q}]})});var PM=I(()=>{"use strict";var $$e=W(),YY=et(),QY=cu(),V$e=gu(),r1=Ti(),XY=mr(),eX=Wn(),Bg=It(),G$e=tt(),Z$e=vt(),H$e=Wi(),W$e=Rg(),tX=Fd(),K$e=Hr(),Y$e=rr(),X$e=He(),J$e=_t(),Q$e=Tg(),e8e=Fg(),t8e=Ud(),rX=Qt(),IM=Kt(),i1=J$e("matchAll"),iX="RegExp String",nX=iX+" Iterator",r8e=rX.set,i8e=rX.getterFor(nX),JY=RegExp.prototype,n8e=TypeError,EM=QY("".indexOf),n1=QY("".matchAll),TM=!!n1&&!X$e(function(){n1("a",/./)}),a8e=V$e(function(t,n,u,c){r8e(this,{type:nX,regexp:t,string:n,global:u,unicode:c,done:!1})},iX,function(){var t=i8e(this);if(t.done)return r1(void 0,!0);var n=t.regexp,u=t.string,c=t8e(n,u);return c===null?(t.done=!0,r1(void 0,!0)):t.global?(Bg(c[0])===""&&(n.lastIndex=e8e(u,eX(n.lastIndex),t.unicode)),r1(c,!1)):(t.done=!0,r1(c,!1))}),qM=function(e){var t=G$e(this),n=Bg(e),u=Q$e(t,RegExp),c=Bg(tX(t)),a,_,w;return a=new u(u===RegExp?t.source:t,c),_=!!~EM(c,"g"),w=!!~EM(c,"u"),a.lastIndex=eX(t.lastIndex),new a8e(a,n,_,w)};$$e({target:"String",proto:!0,forced:TM},{matchAll:function(t){var n=XY(this),u,c,a,_;if(Z$e(t)){if(W$e(t)&&(u=Bg(XY(tX(t))),!~EM(u,"g")))throw new n8e("`.matchAll` does not allow non-global regexes");if(TM)return n1(n,t);if(a=K$e(t,i1),a===void 0&&IM&&H$e(t)==="RegExp"&&(a=qM),a)return YY(a,t,n)}else if(TM)return n1(n,t);return c=Bg(n),_=new RegExp(t,"g"),IM?YY(qM,_,c):_[i1](c)}});IM||i1 in JY||Y$e(JY,i1,qM)});var AM=I((mqt,aX)=>{"use strict";var o8e=po();aX.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(o8e)});var oX=I(()=>{"use strict";var s8e=W(),l8e=hg().end,u8e=AM();s8e({target:"String",proto:!0,forced:u8e},{padEnd:function(t){return l8e(this,t,arguments.length>1?arguments[1]:void 0)}})});var sX=I(()=>{"use strict";var c8e=W(),h8e=hg().start,f8e=AM();c8e({target:"String",proto:!0,forced:f8e},{padStart:function(t){return h8e(this,t,arguments.length>1?arguments[1]:void 0)}})});var hX=I(()=>{"use strict";var d8e=W(),cX=$e(),p8e=fi(),m8e=zt(),lX=It(),v8e=Vt(),uX=cX([].push),g8e=cX([].join);d8e({target:"String",stat:!0},{raw:function(t){var n=p8e(m8e(t).raw),u=v8e(n);if(!u)return"";for(var c=arguments.length,a=[],_=0;;){if(uX(a,lX(n[_++])),_===u)return g8e(a,"");_<c&&uX(a,lX(arguments[_]))}}})});var fX=I(()=>{"use strict";var y8e=W(),_8e=cg();y8e({target:"String",proto:!0},{repeat:_8e})});var OM=I((Tqt,dX)=>{"use strict";var RM=$e(),x8e=zt(),b8e=Math.floor,CM=RM("".charAt),w8e=RM("".replace),MM=RM("".slice),S8e=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,T8e=/\$([$&'`]|\d{1,2})/g;dX.exports=function(e,t,n,u,c,a){var _=n+e.length,w=u.length,q=T8e;return c!==void 0&&(c=x8e(c),q=S8e),w8e(a,q,function(M,O){var k;switch(CM(O,0)){case"$":return"$";case"&":return e;case"`":return MM(t,0,n);case"'":return MM(t,_);case"<":k=c[MM(O,1,-1)];break;default:var $=+O;if($===0)return M;if($>w){var fe=b8e($/10);return fe===0?M:fe<=w?u[fe-1]===void 0?CM(O,1):u[fe-1]+CM(O,1):M}k=u[$-1]}return k===void 0?"":k})}});var yX=I(()=>{"use strict";var I8e=Yi(),pX=et(),a1=$e(),E8e=zg(),q8e=He(),P8e=tt(),A8e=Rt(),C8e=vt(),M8e=wr(),R8e=Wn(),$d=It(),O8e=mr(),k8e=Fg(),D8e=Hr(),L8e=OM(),z8e=Ud(),F8e=_t(),DM=F8e("replace"),B8e=Math.max,N8e=Math.min,j8e=a1([].concat),kM=a1([].push),mX=a1("".indexOf),vX=a1("".slice),U8e=function(e){return e===void 0?e:String(e)},$8e=function(){return"a".replace(/./,"$0")==="$0"}(),gX=function(){return /./[DM]?/./[DM]("a","$0")==="":!1}(),V8e=!q8e(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});E8e("replace",function(e,t,n){var u=gX?"$":"$0";return[function(a,_){var w=O8e(this),q=C8e(a)?D8e(a,DM):void 0;return q?pX(q,a,w,_):pX(t,$d(w),a,_)},function(c,a){var _=P8e(this),w=$d(c);if(typeof a=="string"&&mX(a,u)===-1&&mX(a,"$<")===-1){var q=n(t,_,w,a);if(q.done)return q.value}var M=A8e(a);M||(a=$d(a));var O=_.global,k;O&&(k=_.unicode,_.lastIndex=0);for(var $=[],fe;fe=z8e(_,w),!(fe===null||(kM($,fe),!O));){var Pe=$d(fe[0]);Pe===""&&(_.lastIndex=k8e(w,R8e(_.lastIndex),k))}for(var Se="",ne=0,re=0;re<$.length;re++){fe=$[re];for(var ae=$d(fe[0]),_e=B8e(N8e(M8e(fe.index),w.length),0),Te=[],nt,Ve=1;Ve<fe.length;Ve++)kM(Te,U8e(fe[Ve]));var ut=fe.groups;if(M){var St=j8e([ae],Te,_e,w);ut!==void 0&&kM(St,ut),nt=$d(I8e(a,void 0,St))}else nt=L8e(ae,w,_e,Te,ut,a);_e>=ne&&(Se+=vX(w,ne,_e)+nt,ne=_e+ae.length)}return Se+vX(w,ne)}]},!V8e||!$8e||gX)});var FM=I(()=>{"use strict";var G8e=W(),Z8e=et(),zM=$e(),_X=mr(),H8e=Rt(),W8e=vt(),K8e=Rg(),Vd=It(),Y8e=Hr(),X8e=Fd(),J8e=OM(),Q8e=_t(),eVe=Kt(),tVe=Q8e("replace"),rVe=TypeError,LM=zM("".indexOf),iVe=zM("".replace),xX=zM("".slice),nVe=Math.max;G8e({target:"String",proto:!0},{replaceAll:function(t,n){var u=_X(this),c,a,_,w,q,M,O,k,$,fe,Pe=0,Se="";if(W8e(t)){if(c=K8e(t),c&&(a=Vd(_X(X8e(t))),!~LM(a,"g")))throw new rVe("`.replaceAll` does not allow non-global regexes");if(_=Y8e(t,tVe),_)return Z8e(_,t,u,n);if(eVe&&c)return iVe(Vd(u),t,n)}for(w=Vd(u),q=Vd(t),M=H8e(n),M||(n=Vd(n)),O=q.length,k=nVe(1,O),$=LM(w,q);$!==-1;)fe=M?Vd(n(q,$,w)):J8e(q,w,$,[],void 0,n),Se+=xX(w,Pe,$)+fe,Pe=$+O,$=$+k>w.length?-1:LM(w,q,$+k);return Pe<w.length&&(Se+=xX(w,Pe)),Se}})});var SX=I(()=>{"use strict";var aVe=et(),oVe=zg(),sVe=tt(),lVe=vt(),uVe=mr(),bX=Db(),wX=It(),cVe=Hr(),hVe=Ud();oVe("search",function(e,t,n){return[function(c){var a=uVe(this),_=lVe(c)?cVe(c,e):void 0;return _?aVe(_,c,a):new RegExp(c)[e](wX(a))},function(u){var c=sVe(this),a=wX(u),_=n(t,c,a);if(_.done)return _.value;var w=c.lastIndex;bX(w,0)||(c.lastIndex=0);var q=hVe(c,a);return bX(c.lastIndex,w)||(c.lastIndex=w),q===null?-1:q.index}]})});var PX=I(()=>{"use strict";var BM=et(),qX=$e(),fVe=zg(),dVe=tt(),pVe=vt(),mVe=mr(),vVe=Tg(),gVe=Fg(),yVe=Wn(),TX=It(),_Ve=Hr(),IX=Ud(),xVe=Og(),bVe=He(),Gd=xVe.UNSUPPORTED_Y,wVe=4294967295,SVe=Math.min,NM=qX([].push),jM=qX("".slice),TVe=!bVe(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length!==2||n[0]!=="a"||n[1]!=="b"}),EX="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;fVe("split",function(e,t,n){var u="0".split(void 0,0).length?function(c,a){return c===void 0&&a===0?[]:BM(t,this,c,a)}:t;return[function(a,_){var w=mVe(this),q=pVe(a)?_Ve(a,e):void 0;return q?BM(q,a,w,_):BM(u,TX(w),a,_)},function(c,a){var _=dVe(this),w=TX(c);if(!EX){var q=n(u,_,w,a,u!==t);if(q.done)return q.value}var M=vVe(_,RegExp),O=_.unicode,k=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(Gd?"g":"y"),$=new M(Gd?"^(?:"+_.source+")":_,k),fe=a===void 0?wVe:a>>>0;if(fe===0)return[];if(w.length===0)return IX($,w)===null?[w]:[];for(var Pe=0,Se=0,ne=[];Se<w.length;){$.lastIndex=Gd?0:Se;var re=IX($,Gd?jM(w,Se):w),ae;if(re===null||(ae=SVe(yVe($.lastIndex+(Gd?Se:0)),w.length))===Pe)Se=gVe(w,Se,O);else{if(NM(ne,jM(w,Pe,Se)),ne.length===fe)return ne;for(var _e=1;_e<=re.length-1;_e++)if(NM(ne,re[_e]),ne.length===fe)return ne;Se=Pe=ae}}return NM(ne,jM(w,Pe)),ne}]},EX||!TVe,Gd)});var MX=I(()=>{"use strict";var IVe=W(),EVe=cu(),qVe=ki().f,PVe=Wn(),AX=It(),AVe=e1(),CVe=mr(),MVe=t1(),RVe=Kt(),OVe=EVe("".slice),kVe=Math.min,CX=MVe("startsWith"),DVe=!RVe&&!CX&&!!function(){var e=qVe(String.prototype,"startsWith");return e&&!e.writable}();IVe({target:"String",proto:!0,forced:!DVe&&!CX},{startsWith:function(t){var n=AX(CVe(this));AVe(t);var u=PVe(kVe(arguments.length>1?arguments[1]:void 0,n.length)),c=AX(t);return OVe(n,u,u+c.length)===c}})});var OX=I(()=>{"use strict";var LVe=W(),zVe=$e(),FVe=mr(),RX=wr(),BVe=It(),NVe=zVe("".slice),jVe=Math.max,UVe=Math.min,$Ve=!"".substr||"ab".substr(-1)!=="b";LVe({target:"String",proto:!0,forced:$Ve},{substr:function(t,n){var u=BVe(FVe(this)),c=u.length,a=RX(t),_,w;return a===1/0&&(a=0),a<0&&(a=jVe(c+a,0)),_=n===void 0?c:RX(n),_<=0||_===1/0?"":(w=UVe(a+_,c),a>=w?"":NVe(u,a,w))}})});var GM=I(()=>{"use strict";var VVe=W(),LX=et(),VM=$e(),GVe=mr(),ZVe=It(),HVe=He(),WVe=Array,UM=VM("".charAt),kX=VM("".charCodeAt),KVe=VM([].join),$M="".toWellFormed,YVe="\uFFFD",DX=$M&&HVe(function(){return LX($M,1)!=="1"});VVe({target:"String",proto:!0,forced:DX},{toWellFormed:function(){var t=ZVe(GVe(this));if(DX)return LX($M,t);for(var n=t.length,u=WVe(n),c=0;c<n;c++){var a=kX(t,c);(a&63488)!==55296?u[c]=UM(t,c):a>=56320||c+1>=n||(kX(t,c+1)&64512)!==56320?u[c]=YVe:(u[c]=UM(t,c),u[++c]=UM(t,c))}return KVe(u,"")}})});var o1=I((Bqt,BX)=>{"use strict";var XVe=Yc().PROPER,JVe=He(),zX=uh(),FX="\u200B\x85\u180E";BX.exports=function(e){return JVe(function(){return!!zX[e]()||FX[e]()!==FX||XVe&&zX[e].name!==e})}});var NX=I(()=>{"use strict";var QVe=W(),eGe=ch().trim,tGe=o1();QVe({target:"String",proto:!0,forced:tGe("trim")},{trim:function(){return eGe(this)}})});var ZM=I((Uqt,jX)=>{"use strict";var rGe=ch().end,iGe=o1();jX.exports=iGe("trimEnd")?function(){return rGe(this)}:"".trimEnd});var $X=I(()=>{"use strict";var nGe=W(),UX=ZM();nGe({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==UX},{trimRight:UX})});var GX=I(()=>{"use strict";$X();var aGe=W(),VX=ZM();aGe({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==VX},{trimEnd:VX})});var HM=I((Hqt,ZX)=>{"use strict";var oGe=ch().start,sGe=o1();ZX.exports=sGe("trimStart")?function(){return oGe(this)}:"".trimStart});var WX=I(()=>{"use strict";var lGe=W(),HX=HM();lGe({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==HX},{trimLeft:HX})});var YX=I(()=>{"use strict";WX();var uGe=W(),KX=HM();uGe({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==KX},{trimStart:KX})});var Qn=I((Jqt,JX)=>{"use strict";var cGe=$e(),hGe=mr(),XX=It(),fGe=/"/g,dGe=cGe("".replace);JX.exports=function(e,t,n,u){var c=XX(hGe(e)),a="<"+t;return n!==""&&(a+=" "+n+"=\""+dGe(XX(u),fGe,"&quot;")+"\""),a+">"+c+"</"+t+">"}});var ea=I((Qqt,QX)=>{"use strict";var pGe=He();QX.exports=function(e){return pGe(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var eJ=I(()=>{"use strict";var mGe=W(),vGe=Qn(),gGe=ea();mGe({target:"String",proto:!0,forced:gGe("anchor")},{anchor:function(t){return vGe(this,"a","name",t)}})});var tJ=I(()=>{"use strict";var yGe=W(),_Ge=Qn(),xGe=ea();yGe({target:"String",proto:!0,forced:xGe("big")},{big:function(){return _Ge(this,"big","","")}})});var rJ=I(()=>{"use strict";var bGe=W(),wGe=Qn(),SGe=ea();bGe({target:"String",proto:!0,forced:SGe("blink")},{blink:function(){return wGe(this,"blink","","")}})});var iJ=I(()=>{"use strict";var TGe=W(),IGe=Qn(),EGe=ea();TGe({target:"String",proto:!0,forced:EGe("bold")},{bold:function(){return IGe(this,"b","","")}})});var nJ=I(()=>{"use strict";var qGe=W(),PGe=Qn(),AGe=ea();qGe({target:"String",proto:!0,forced:AGe("fixed")},{fixed:function(){return PGe(this,"tt","","")}})});var aJ=I(()=>{"use strict";var CGe=W(),MGe=Qn(),RGe=ea();CGe({target:"String",proto:!0,forced:RGe("fontcolor")},{fontcolor:function(t){return MGe(this,"font","color",t)}})});var oJ=I(()=>{"use strict";var OGe=W(),kGe=Qn(),DGe=ea();OGe({target:"String",proto:!0,forced:DGe("fontsize")},{fontsize:function(t){return kGe(this,"font","size",t)}})});var sJ=I(()=>{"use strict";var LGe=W(),zGe=Qn(),FGe=ea();LGe({target:"String",proto:!0,forced:FGe("italics")},{italics:function(){return zGe(this,"i","","")}})});var lJ=I(()=>{"use strict";var BGe=W(),NGe=Qn(),jGe=ea();BGe({target:"String",proto:!0,forced:jGe("link")},{link:function(t){return NGe(this,"a","href",t)}})});var uJ=I(()=>{"use strict";var UGe=W(),$Ge=Qn(),VGe=ea();UGe({target:"String",proto:!0,forced:VGe("small")},{small:function(){return $Ge(this,"small","","")}})});var cJ=I(()=>{"use strict";var GGe=W(),ZGe=Qn(),HGe=ea();GGe({target:"String",proto:!0,forced:HGe("strike")},{strike:function(){return ZGe(this,"strike","","")}})});var hJ=I(()=>{"use strict";var WGe=W(),KGe=Qn(),YGe=ea();WGe({target:"String",proto:!0,forced:YGe("sub")},{sub:function(){return KGe(this,"sub","","")}})});var fJ=I(()=>{"use strict";var XGe=W(),JGe=Qn(),QGe=ea();XGe({target:"String",proto:!0,forced:QGe("sup")},{sup:function(){return JGe(this,"sup","","")}})});var s1=I((E2t,pJ)=>{"use strict";var dJ=Qe(),WM=He(),eZe=Qv(),tZe=kt().NATIVE_ARRAY_BUFFER_VIEWS,rZe=dJ.ArrayBuffer,vh=dJ.Int8Array;pJ.exports=!tZe||!WM(function(){vh(1)})||!WM(function(){new vh(-1)})||!eZe(function(e){new vh,new vh(null),new vh(1.5),new vh(e)},!0)||WM(function(){return new vh(new rZe(2),1,void 0).length!==1})});var KM=I((q2t,mJ)=>{"use strict";var iZe=Ed(),nZe=RangeError;mJ.exports=function(e,t){var n=iZe(e);if(n%t)throw new nZe("Wrong offset");return n}});var YM=I((P2t,vJ)=>{"use strict";var aZe=Math.round;vJ.exports=function(e){var t=aZe(e);return t<0?0:t>255?255:t&255}});var l1=I((A2t,gJ)=>{"use strict";var oZe=An();gJ.exports=function(e){var t=oZe(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var Ng=I((C2t,yJ)=>{"use strict";var sZe=Dv(),lZe=TypeError;yJ.exports=function(e){var t=sZe(e,"number");if(typeof t=="number")throw new lZe("Can't convert number to bigint");return BigInt(t)}});var XM=I((M2t,_J)=>{"use strict";var uZe=sr(),cZe=et(),hZe=Sg(),fZe=zt(),dZe=Vt(),pZe=pu(),mZe=Xo(),vZe=Zx(),gZe=l1(),yZe=kt().aTypedArrayConstructor,_Ze=Ng();_J.exports=function(t){var n=hZe(this),u=fZe(t),c=arguments.length,a=c>1?arguments[1]:void 0,_=a!==void 0,w=mZe(u),q,M,O,k,$,fe,Pe,Se;if(w&&!vZe(w))for(Pe=pZe(u,w),Se=Pe.next,u=[];!(fe=cZe(Se,Pe)).done;)u.push(fe.value);for(_&&c>2&&(a=uZe(a,arguments[2])),M=dZe(u),O=new(yZe(n))(M),k=gZe(O),q=0;M>q;q++)$=_?a(u[q],q):u[q],O[q]=k?_Ze($):+$;return O}});var is=I((R2t,nR)=>{"use strict";var xJ=W(),MJ=Qe(),bJ=et(),xZe=dt(),bZe=s1(),Vg=kt(),RJ=ug(),wJ=pn(),wZe=Zn(),jg=di(),SZe=Rb(),TZe=Wn(),SJ=yd(),JM=KM(),IZe=YM(),OJ=Ko(),Ug=Ot(),EZe=An(),tR=vt(),qZe=Ns(),PZe=Wr(),AZe=Ki(),u1=Fa(),CZe=uu().f,TJ=XM(),MZe=Kr().forEach,RZe=_u(),OZe=Sr(),kJ=dr(),DJ=ki(),IJ=Gs(),aR=Qt(),kZe=du(),rR=aR.get,DZe=aR.set,LZe=aR.enforce,LJ=kJ.f,zZe=DJ.f,QM=MJ.RangeError,zJ=RJ.ArrayBuffer,FZe=zJ.prototype,BZe=RJ.DataView,c1=Vg.NATIVE_ARRAY_BUFFER_VIEWS,EJ=Vg.TYPED_ARRAY_TAG,qJ=Vg.TypedArray,$g=Vg.TypedArrayPrototype,iR=Vg.isTypedArray,h1="BYTES_PER_ELEMENT",eR="Wrong length",f1=function(e,t){OZe(e,t,{configurable:!0,get:function(){return rR(this)[t]}})},PJ=function(e){var t;return AZe(FZe,e)||(t=EZe(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},FJ=function(e,t){return iR(e)&&!qZe(t)&&t in e&&SZe(+t)&&t>=0},AJ=function(t,n){return n=OJ(n),FJ(t,n)?wZe(2,t[n]):zZe(t,n)},CJ=function(t,n,u){return n=OJ(n),FJ(t,n)&&tR(u)&&Ug(u,"value")&&!Ug(u,"get")&&!Ug(u,"set")&&!u.configurable&&(!Ug(u,"writable")||u.writable)&&(!Ug(u,"enumerable")||u.enumerable)?(t[n]=u.value,t):LJ(t,n,u)};xZe?(c1||(DJ.f=AJ,kJ.f=CJ,f1($g,"buffer"),f1($g,"byteOffset"),f1($g,"byteLength"),f1($g,"length")),xJ({target:"Object",stat:!0,forced:!c1},{getOwnPropertyDescriptor:AJ,defineProperty:CJ}),nR.exports=function(e,t,n){var u=e.match(/\d+/)[0]/8,c=e+(n?"Clamped":"")+"Array",a="get"+e,_="set"+e,w=MJ[c],q=w,M=q&&q.prototype,O={},k=function(Se,ne){var re=rR(Se);return re.view[a](ne*u+re.byteOffset,!0)},$=function(Se,ne,re){var ae=rR(Se);ae.view[_](ne*u+ae.byteOffset,n?IZe(re):re,!0)},fe=function(Se,ne){LJ(Se,ne,{get:function(){return k(this,ne)},set:function(re){return $(this,ne,re)},enumerable:!0})};c1?bZe&&(q=t(function(Se,ne,re,ae){return wJ(Se,M),kZe(function(){return tR(ne)?PJ(ne)?ae!==void 0?new w(ne,JM(re,u),ae):re!==void 0?new w(ne,JM(re,u)):new w(ne):iR(ne)?IJ(q,ne):bJ(TJ,q,ne):new w(SJ(ne))}(),Se,q)}),u1&&u1(q,qJ),MZe(CZe(w),function(Se){Se in q||jg(q,Se,w[Se])}),q.prototype=M):(q=t(function(Se,ne,re,ae){wJ(Se,M);var _e=0,Te=0,nt,Ve,ut;if(!tR(ne))ut=SJ(ne),Ve=ut*u,nt=new zJ(Ve);else if(PJ(ne)){nt=ne,Te=JM(re,u);var St=ne.byteLength;if(ae===void 0){if(St%u)throw new QM(eR);if(Ve=St-Te,Ve<0)throw new QM(eR)}else if(Ve=TZe(ae)*u,Ve+Te>St)throw new QM(eR);ut=Ve/u}else return iR(ne)?IJ(q,ne):bJ(TJ,q,ne);for(DZe(Se,{buffer:nt,byteOffset:Te,byteLength:Ve,length:ut,view:new BZe(nt)});_e<ut;)fe(Se,_e++)}),u1&&u1(q,qJ),M=q.prototype=PZe($g)),M.constructor!==q&&jg(M,"constructor",q),LZe(M).TypedArrayConstructor=q,EJ&&jg(M,EJ,c);var Pe=q!==w;O[c]=q,xJ({global:!0,constructor:!0,forced:Pe,sham:!c1},O),h1 in q||jg(q,h1,u),h1 in M||jg(M,h1,u),RZe(c)}):nR.exports=function(){}});var BJ=I(()=>{"use strict";var NZe=is();NZe("Float32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var NJ=I(()=>{"use strict";var jZe=is();jZe("Float64",function(e){return function(n,u,c){return e(this,n,u,c)}})});var jJ=I(()=>{"use strict";var UZe=is();UZe("Int8",function(e){return function(n,u,c){return e(this,n,u,c)}})});var UJ=I(()=>{"use strict";var $Ze=is();$Ze("Int16",function(e){return function(n,u,c){return e(this,n,u,c)}})});var $J=I(()=>{"use strict";var VZe=is();VZe("Int32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var VJ=I(()=>{"use strict";var GZe=is();GZe("Uint8",function(e){return function(n,u,c){return e(this,n,u,c)}})});var GJ=I(()=>{"use strict";var ZZe=is();ZZe("Uint8",function(e){return function(n,u,c){return e(this,n,u,c)}},!0)});var ZJ=I(()=>{"use strict";var HZe=is();HZe("Uint16",function(e){return function(n,u,c){return e(this,n,u,c)}})});var HJ=I(()=>{"use strict";var WZe=is();WZe("Uint32",function(e){return function(n,u,c){return e(this,n,u,c)}})});var oR=I(()=>{"use strict";var WJ=kt(),KZe=Vt(),YZe=wr(),XZe=WJ.aTypedArray,JZe=WJ.exportTypedArrayMethod;JZe("at",function(t){var n=XZe(this),u=KZe(n),c=YZe(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:n[a]})});var YJ=I(()=>{"use strict";var QZe=$e(),KJ=kt(),eHe=l2(),tHe=QZe(eHe),rHe=KJ.aTypedArray,iHe=KJ.exportTypedArrayMethod;iHe("copyWithin",function(t,n){return tHe(rHe(this),t,n,arguments.length>2?arguments[2]:void 0)})});var JJ=I(()=>{"use strict";var XJ=kt(),nHe=Kr().every,aHe=XJ.aTypedArray,oHe=XJ.exportTypedArrayMethod;oHe("every",function(t){return nHe(aHe(this),t,arguments.length>1?arguments[1]:void 0)})});var eQ=I(()=>{"use strict";var QJ=kt(),sHe=Yx(),lHe=Ng(),uHe=An(),cHe=et(),hHe=$e(),fHe=He(),dHe=QJ.aTypedArray,pHe=QJ.exportTypedArrayMethod,mHe=hHe("".slice),vHe=fHe(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});pHe("fill",function(t){var n=arguments.length;dHe(this);var u=mHe(uHe(this),0,3)==="Big"?lHe(t):+t;return cHe(sHe,this,u,n>1?arguments[1]:void 0,n>2?arguments[2]:void 0)},vHe)});var d1=I((aPt,tQ)=>{"use strict";var gHe=Gs(),yHe=kt().getTypedArrayConstructor;tQ.exports=function(e,t){return gHe(yHe(e),t)}});var iQ=I(()=>{"use strict";var rQ=kt(),_He=Kr().filter,xHe=d1(),bHe=rQ.aTypedArray,wHe=rQ.exportTypedArrayMethod;wHe("filter",function(t){var n=_He(bHe(this),t,arguments.length>1?arguments[1]:void 0);return xHe(this,n)})});var aQ=I(()=>{"use strict";var nQ=kt(),SHe=Kr().find,THe=nQ.aTypedArray,IHe=nQ.exportTypedArrayMethod;IHe("find",function(t){return SHe(THe(this),t,arguments.length>1?arguments[1]:void 0)})});var sQ=I(()=>{"use strict";var oQ=kt(),EHe=Kr().findIndex,qHe=oQ.aTypedArray,PHe=oQ.exportTypedArrayMethod;PHe("findIndex",function(t){return EHe(qHe(this),t,arguments.length>1?arguments[1]:void 0)})});var sR=I(()=>{"use strict";var lQ=kt(),AHe=Jv().findLast,CHe=lQ.aTypedArray,MHe=lQ.exportTypedArrayMethod;MHe("findLast",function(t){return AHe(CHe(this),t,arguments.length>1?arguments[1]:void 0)})});var lR=I(()=>{"use strict";var uQ=kt(),RHe=Jv().findLastIndex,OHe=uQ.aTypedArray,kHe=uQ.exportTypedArrayMethod;kHe("findLastIndex",function(t){return RHe(OHe(this),t,arguments.length>1?arguments[1]:void 0)})});var hQ=I(()=>{"use strict";var cQ=kt(),DHe=Kr().forEach,LHe=cQ.aTypedArray,zHe=cQ.exportTypedArrayMethod;zHe("forEach",function(t){DHe(LHe(this),t,arguments.length>1?arguments[1]:void 0)})});var fQ=I(()=>{"use strict";var FHe=s1(),BHe=kt().exportTypedArrayStaticMethod,NHe=XM();BHe("from",NHe,FHe)});var pQ=I(()=>{"use strict";var dQ=kt(),jHe=cd().includes,UHe=dQ.aTypedArray,$He=dQ.exportTypedArrayMethod;$He("includes",function(t){return jHe(UHe(this),t,arguments.length>1?arguments[1]:void 0)})});var vQ=I(()=>{"use strict";var mQ=kt(),VHe=cd().indexOf,GHe=mQ.aTypedArray,ZHe=mQ.exportTypedArrayMethod;ZHe("indexOf",function(t){return VHe(GHe(this),t,arguments.length>1?arguments[1]:void 0)})});var bQ=I(()=>{"use strict";var HHe=Qe(),WHe=He(),uR=$e(),yQ=kt(),cR=rg(),KHe=_t(),hR=KHe("iterator"),gQ=HHe.Uint8Array,YHe=uR(cR.values),XHe=uR(cR.keys),JHe=uR(cR.entries),fR=yQ.aTypedArray,p1=yQ.exportTypedArrayMethod,Zd=gQ&&gQ.prototype,m1=!WHe(function(){Zd[hR].call([1])}),_Q=!!Zd&&Zd.values&&Zd[hR]===Zd.values&&Zd.values.name==="values",xQ=function(){return YHe(fR(this))};p1("entries",function(){return JHe(fR(this))},m1);p1("keys",function(){return XHe(fR(this))},m1);p1("values",xQ,m1||!_Q,{name:"values"});p1(hR,xQ,m1||!_Q,{name:"values"})});var SQ=I(()=>{"use strict";var wQ=kt(),QHe=$e(),eWe=wQ.aTypedArray,tWe=wQ.exportTypedArrayMethod,rWe=QHe([].join);tWe("join",function(t){return rWe(eWe(this),t)})});var IQ=I(()=>{"use strict";var TQ=kt(),iWe=Yi(),nWe=T2(),aWe=TQ.aTypedArray,oWe=TQ.exportTypedArrayMethod;oWe("lastIndexOf",function(t){var n=arguments.length;return iWe(nWe,aWe(this),n>1?[t,arguments[1]]:[t])})});var EQ=I(()=>{"use strict";var dR=kt(),sWe=Kr().map,lWe=dR.aTypedArray,uWe=dR.getTypedArrayConstructor,cWe=dR.exportTypedArrayMethod;cWe("map",function(t){return sWe(lWe(this),t,arguments.length>1?arguments[1]:void 0,function(n,u){return new(uWe(n))(u)})})});var PQ=I(()=>{"use strict";var qQ=kt(),hWe=s1(),fWe=qQ.aTypedArrayConstructor,dWe=qQ.exportTypedArrayStaticMethod;dWe("of",function(){for(var t=0,n=arguments.length,u=new(fWe(this))(n);n>t;)u[t]=arguments[t++];return u},hWe)});var CQ=I(()=>{"use strict";var AQ=kt(),pWe=ig().left,mWe=AQ.aTypedArray,vWe=AQ.exportTypedArrayMethod;vWe("reduce",function(t){var n=arguments.length;return pWe(mWe(this),t,n,n>1?arguments[1]:void 0)})});var RQ=I(()=>{"use strict";var MQ=kt(),gWe=ig().right,yWe=MQ.aTypedArray,_We=MQ.exportTypedArrayMethod;_We("reduceRight",function(t){var n=arguments.length;return gWe(yWe(this),t,n,n>1?arguments[1]:void 0)})});var kQ=I(()=>{"use strict";var OQ=kt(),xWe=OQ.aTypedArray,bWe=OQ.exportTypedArrayMethod,wWe=Math.floor;bWe("reverse",function(){for(var t=this,n=xWe(t).length,u=wWe(n/2),c=0,a;c<u;)a=t[c],t[c++]=t[--n],t[n]=a;return t})});var NQ=I(()=>{"use strict";var LQ=Qe(),zQ=et(),vR=kt(),SWe=Vt(),TWe=KM(),IWe=zt(),FQ=He(),EWe=LQ.RangeError,pR=LQ.Int8Array,DQ=pR&&pR.prototype,BQ=DQ&&DQ.set,qWe=vR.aTypedArray,PWe=vR.exportTypedArrayMethod,mR=!FQ(function(){var e=new Uint8ClampedArray(2);return zQ(BQ,e,{length:1,0:3},1),e[1]!==3}),AWe=mR&&vR.NATIVE_ARRAY_BUFFER_VIEWS&&FQ(function(){var e=new pR(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});PWe("set",function(t){qWe(this);var n=TWe(arguments.length>1?arguments[1]:void 0,1),u=IWe(t);if(mR)return zQ(BQ,this,u,n);var c=this.length,a=SWe(u),_=0;if(a+n>c)throw new EWe("Wrong length");for(;_<a;)this[n+_]=u[_++]},!mR||AWe)});var jQ=I(()=>{"use strict";var gR=kt(),CWe=He(),MWe=Kn(),RWe=gR.aTypedArray,OWe=gR.getTypedArrayConstructor,kWe=gR.exportTypedArrayMethod,DWe=CWe(function(){new Int8Array(1).slice()});kWe("slice",function(t,n){for(var u=MWe(RWe(this),t,n),c=OWe(this),a=0,_=u.length,w=new c(_);_>a;)w[a]=u[a++];return w},DWe)});var $Q=I(()=>{"use strict";var UQ=kt(),LWe=Kr().some,zWe=UQ.aTypedArray,FWe=UQ.exportTypedArrayMethod;FWe("some",function(t){return LWe(zWe(this),t,arguments.length>1?arguments[1]:void 0)})});var KQ=I(()=>{"use strict";var BWe=Qe(),NWe=cu(),yR=He(),jWe=wt(),UWe=nb(),WQ=kt(),VQ=q2(),$We=P2(),GQ=vo(),ZQ=ab(),VWe=WQ.aTypedArray,GWe=WQ.exportTypedArrayMethod,Gg=BWe.Uint16Array,Hd=Gg&&NWe(Gg.prototype.sort),ZWe=!!Hd&&!(yR(function(){Hd(new Gg(2),null)})&&yR(function(){Hd(new Gg(2),{})})),HQ=!!Hd&&!yR(function(){if(GQ)return GQ<74;if(VQ)return VQ<67;if($We)return!0;if(ZQ)return ZQ<602;var e=new Gg(516),t=Array(516),n,u;for(n=0;n<516;n++)u=n%4,e[n]=515-n,t[n]=n-2*u+3;for(Hd(e,function(c,a){return(c/4|0)-(a/4|0)}),n=0;n<516;n++)if(e[n]!==t[n])return!0}),HWe=function(e){return function(t,n){return e!==void 0?+e(t,n)||0:n!==n?-1:t!==t?1:t===0&&n===0?1/t>0&&1/n<0?1:-1:t>n}};GWe("sort",function(t){return t!==void 0&&jWe(t),HQ?Hd(this,t):UWe(VWe(this),HWe(t))},!HQ||ZWe)});var XQ=I(()=>{"use strict";var _R=kt(),WWe=Wn(),YQ=yo(),KWe=_R.aTypedArray,YWe=_R.getTypedArrayConstructor,XWe=_R.exportTypedArrayMethod;XWe("subarray",function(t,n){var u=KWe(this),c=u.length,a=YQ(t,c),_=YWe(u);return new _(u.buffer,u.byteOffset+a*u.BYTES_PER_ELEMENT,WWe((n===void 0?c:YQ(n,c))-a))})});var ree=I(()=>{"use strict";var JWe=Qe(),QWe=Yi(),eee=kt(),xR=He(),JQ=Kn(),v1=JWe.Int8Array,QQ=eee.aTypedArray,e7e=eee.exportTypedArrayMethod,tee=[].toLocaleString,t7e=!!v1&&xR(function(){tee.call(new v1(1))}),r7e=xR(function(){return[1,2].toLocaleString()!==new v1([1,2]).toLocaleString()})||!xR(function(){v1.prototype.toLocaleString.call([1,2])});e7e("toLocaleString",function(){return QWe(tee,t7e?JQ(QQ(this)):QQ(this),JQ(arguments))},r7e)});var wR=I(()=>{"use strict";var i7e=M2(),bR=kt(),n7e=bR.aTypedArray,a7e=bR.exportTypedArrayMethod,o7e=bR.getTypedArrayConstructor;a7e("toReversed",function(){return i7e(n7e(this),o7e(this))})});var SR=I(()=>{"use strict";var g1=kt(),s7e=$e(),l7e=wt(),u7e=Gs(),c7e=g1.aTypedArray,h7e=g1.getTypedArrayConstructor,f7e=g1.exportTypedArrayMethod,d7e=s7e(g1.TypedArrayPrototype.sort);f7e("toSorted",function(t){t!==void 0&&l7e(t);var n=c7e(this),u=u7e(h7e(n),n);return d7e(u,t)})});var nee=I(()=>{"use strict";var p7e=kt().exportTypedArrayMethod,m7e=He(),v7e=Qe(),g7e=$e(),iee=v7e.Uint8Array,y7e=iee&&iee.prototype||{},y1=[].toString,_7e=g7e([].join);m7e(function(){y1.call({})})&&(y1=function(){return _7e(this)});var x7e=y7e.toString!==y1;p7e("toString",y1,x7e)});var IR=I(()=>{"use strict";var b7e=L2(),TR=kt(),w7e=l1(),S7e=wr(),T7e=Ng(),I7e=TR.aTypedArray,E7e=TR.getTypedArrayConstructor,q7e=TR.exportTypedArrayMethod,P7e=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();q7e("with",function(e,t){var n=I7e(this),u=S7e(e),c=w7e(n)?T7e(t):+t;return b7e(n,E7e(n),u,c)},!P7e)});var uee=I(()=>{"use strict";var A7e=W(),ER=$e(),C7e=It(),aee=String.fromCharCode,oee=ER("".charAt),see=ER(/./.exec),lee=ER("".slice),M7e=/^[\da-f]{2}$/i,R7e=/^[\da-f]{4}$/i;A7e({global:!0},{unescape:function(t){for(var n=C7e(t),u="",c=n.length,a=0,_,w;a<c;){if(_=oee(n,a++),_==="%"){if(oee(n,a)==="u"){if(w=lee(n,a+1,a+5),see(R7e,w)){u+=aee(parseInt(w,16)),a+=5;continue}}else if(w=lee(n,a,a+2),see(M7e,w)){u+=aee(parseInt(w,16)),a+=2;continue}}u+=_}return u}})});var AR=I((lAt,mee)=>{"use strict";var O7e=$e(),cee=ja(),_1=Eu().getWeakData,k7e=pn(),D7e=tt(),L7e=Hn(),qR=vt(),z7e=Lr(),fee=Kr(),hee=Ot(),dee=Qt(),F7e=dee.set,B7e=dee.getterFor,N7e=fee.find,j7e=fee.findIndex,U7e=O7e([].splice),$7e=0,x1=function(e){return e.frozen||(e.frozen=new pee)},pee=function(){this.entries=[]},PR=function(e,t){return N7e(e.entries,function(n){return n[0]===t})};pee.prototype={get:function(e){var t=PR(this,e);if(t)return t[1]},has:function(e){return!!PR(this,e)},set:function(e,t){var n=PR(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=j7e(this.entries,function(n){return n[0]===e});return~t&&U7e(this.entries,t,1),!!~t}};mee.exports={getConstructor:function(e,t,n,u){var c=e(function(q,M){k7e(q,a),F7e(q,{type:t,id:$7e++,frozen:null}),L7e(M)||z7e(M,q[u],{that:q,AS_ENTRIES:n})}),a=c.prototype,_=B7e(t),w=function(q,M,O){var k=_(q),$=_1(D7e(M),!0);return $===!0?x1(k).set(M,O):$[k.id]=O,q};return cee(a,{delete:function(q){var M=_(this);if(!qR(q))return!1;var O=_1(q);return O===!0?x1(M).delete(q):O&&hee(O,M.id)&&delete O[M.id]},has:function(M){var O=_(this);if(!qR(M))return!1;var k=_1(M);return k===!0?x1(O).has(M):k&&hee(k,O.id)}}),cee(a,n?{get:function(M){var O=_(this);if(qR(M)){var k=_1(M);if(k===!0)return x1(O).get(M);if(k)return k[O.id]}},set:function(M,O){return w(this,M,O)}}:{add:function(M){return w(this,M,!0)}}),c}}});var See=I(()=>{"use strict";var V7e=Ys(),vee=Qe(),T1=$e(),gee=ja(),G7e=Eu(),Z7e=dg(),yee=AR(),b1=vt(),w1=Qt().enforce,H7e=He(),W7e=cq(),Wg=Object,K7e=Array.isArray,S1=Wg.isExtensible,_ee=Wg.isFrozen,Y7e=Wg.isSealed,xee=Wg.freeze,X7e=Wg.seal,J7e=!vee.ActiveXObject&&"ActiveXObject"in vee,Zg,bee=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},wee=Z7e("WeakMap",bee,yee),Wd=wee.prototype,I1=T1(Wd.set),Q7e=function(){return V7e&&H7e(function(){var e=xee([]);return I1(new wee,e,1),!_ee(e)})};W7e&&(J7e?(Zg=yee.getConstructor(bee,"WeakMap",!0),G7e.enable(),CR=T1(Wd.delete),Hg=T1(Wd.has),MR=T1(Wd.get),gee(Wd,{delete:function(e){if(b1(e)&&!S1(e)){var t=w1(this);return t.frozen||(t.frozen=new Zg),CR(this,e)||t.frozen.delete(e)}return CR(this,e)},has:function(t){if(b1(t)&&!S1(t)){var n=w1(this);return n.frozen||(n.frozen=new Zg),Hg(this,t)||n.frozen.has(t)}return Hg(this,t)},get:function(t){if(b1(t)&&!S1(t)){var n=w1(this);return n.frozen||(n.frozen=new Zg),Hg(this,t)?MR(this,t):n.frozen.get(t)}return MR(this,t)},set:function(t,n){if(b1(t)&&!S1(t)){var u=w1(this);u.frozen||(u.frozen=new Zg),Hg(this,t)?I1(this,t,n):u.frozen.set(t,n)}else I1(this,t,n);return this}})):Q7e()&&gee(Wd,{set:function(t,n){var u;return K7e(t)&&(_ee(t)?u=xee:Y7e(t)&&(u=X7e)),I1(this,t,n),u&&u(t),this}}));var CR,Hg,MR});var E1=I(()=>{"use strict";See()});var Tee=I(()=>{"use strict";var e9e=dg(),t9e=AR();e9e("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},t9e)});var Iee=I(()=>{"use strict";Tee()});var Eee=I(()=>{"use strict";r2()});var Aee=I(()=>{"use strict";var r9e=W(),i9e=Qe(),n9e=Ki(),qee=pi(),P1=Fa(),a9e=Jc(),Pee=Wr(),q1=di(),RR=Zn(),o9e=Ux(),s9e=ih(),l9e=_t(),u9e=He(),c9e=Kt(),Kd=i9e.SuppressedError,h9e=l9e("toStringTag"),A1=Error,f9e=!!Kd&&Kd.length!==3,d9e=!!Kd&&u9e(function(){return new Kd(1,2,3,{cause:4}).cause===4}),C1=f9e||d9e,gh=function(t,n,u){var c=n9e(Kg,this),a;return P1?a=C1&&(!c||qee(this)===Kg)?new Kd:P1(new A1,c?qee(this):Kg):(a=c?this:Pee(Kg),q1(a,h9e,"Error")),u!==void 0&&q1(a,"message",s9e(u)),o9e(a,gh,a.stack,1),q1(a,"error",t),q1(a,"suppressed",n),a};P1?P1(gh,A1):a9e(gh,A1,{name:!0});var Kg=gh.prototype=C1?Kd.prototype:Pee(A1.prototype,{constructor:RR(1,gh),message:RR(1,""),name:RR(1,"SuppressedError")});C1&&!c9e&&(Kg.constructor=gh);r9e({global:!0,constructor:!0,arity:3,forced:C1},{SuppressedError:gh})});var Yd=I((bAt,zee)=>{"use strict";var kee=Qe(),Dee=kv(),Lee=Rt(),p9e=Wr(),M1=pi(),m9e=rr(),v9e=_t(),g9e=Kt(),Cee="USE_FUNCTION_CONSTRUCTOR",Mee=v9e("asyncIterator"),Ree=kee.AsyncIterator,Oee=Dee.AsyncIteratorPrototype,ns,OR;if(Oee)ns=Oee;else if(Lee(Ree))ns=Ree.prototype;else if(Dee[Cee]||kee[Cee])try{OR=M1(M1(M1(Function("return async function*(){}()")()))),M1(OR)===Object.prototype&&(ns=OR)}catch(e){}ns?g9e&&(ns=p9e(ns)):ns={};Lee(ns[Mee])||m9e(ns,Mee,function(){return this});zee.exports=ns});var Yg=I((wAt,Zee)=>{"use strict";var Fee=et(),Bee=tt(),y9e=Wr(),_9e=Hr(),x9e=ja(),Uee=Qt(),b9e=Li(),w9e=bt(),S9e=Yd(),$ee=Ti(),kR=w9e("Promise"),Vee="AsyncFromSyncIterator",T9e=Uee.set,Nee=Uee.getterFor(Vee),jee=function(e,t,n,u,c){var a=e.done;kR.resolve(e.value).then(function(_){t($ee(_,a))},function(_){if(!a&&c)try{b9e(u,"throw",_)}catch(w){_=w}n(_)})},Gee=function(t){t.type=Vee,T9e(this,t)};Gee.prototype=x9e(y9e(S9e),{next:function(){var t=Nee(this);return new kR(function(n,u){var c=Bee(Fee(t.next,t.iterator));jee(c,n,u,t.iterator,!0)})},return:function(){var e=Nee(this).iterator;return new kR(function(t,n){var u=_9e(e,"return");if(u===void 0)return t($ee(void 0,!0));var c=Bee(Fee(u,e));jee(c,t,n,e)})}});Zee.exports=Gee});var Wee=I((SAt,Hee)=>{"use strict";var I9e=et(),E9e=Yg(),q9e=tt(),P9e=pu(),A9e=Rr(),C9e=Hr(),M9e=_t(),R9e=M9e("asyncIterator");Hee.exports=function(e,t){var n=arguments.length<2?C9e(e,R9e):t;return n?q9e(I9e(n,e)):new E9e(A9e(P9e(e)))}});var Xd=I((TAt,Kee)=>{"use strict";var O9e=et(),k9e=bt(),D9e=Hr();Kee.exports=function(e,t,n,u){try{var c=D9e(e,"return");if(c)return k9e("Promise").resolve(O9e(c,e)).then(function(){t(n)},function(a){u(a)})}catch(a){return u(a)}t(n)}});var yh=I((IAt,Yee)=>{"use strict";var L9e=et(),z9e=wt(),DR=tt(),F9e=vt(),B9e=mu(),N9e=bt(),j9e=Rr(),LR=Xd(),Xg=function(e){var t=e===0,n=e===1,u=e===2,c=e===3;return function(a,_,w){DR(a);var q=_!==void 0;(q||!t)&&z9e(_);var M=j9e(a),O=N9e("Promise"),k=M.iterator,$=M.next,fe=0;return new O(function(Pe,Se){var ne=function(ae){LR(k,Se,ae,Se)},re=function(){try{if(q)try{B9e(fe)}catch(ae){ne(ae)}O.resolve(DR(L9e($,k))).then(function(ae){try{if(DR(ae).done)t?(w.length=fe,Pe(w)):Pe(c?!1:u||void 0);else{var _e=ae.value;try{if(q){var Te=_(_e,fe),nt=function(Ve){if(n)re();else if(u)Ve?re():LR(k,Pe,!1,Se);else if(t)try{w[fe++]=Ve,re()}catch(ut){ne(ut)}else Ve?LR(k,Pe,c||_e,Se):re()};F9e(Te)?O.resolve(Te).then(nt,ne):nt(Te)}else w[fe++]=_e,re()}catch(Ve){ne(Ve)}}}catch(Ve){Se(Ve)}},Se)}catch(ae){Se(ae)}};re()})}};Yee.exports={toArray:Xg(0),forEach:Xg(1),every:Xg(2),some:Xg(3),find:Xg(4)}});var zR=I((EAt,ete)=>{"use strict";var U9e=sr(),Xee=$e(),$9e=zt(),V9e=xo(),G9e=Wee(),Z9e=pu(),H9e=Rr(),W9e=Xo(),K9e=Hr(),Y9e=bt(),X9e=O2(),J9e=_t(),Q9e=Yg(),eKe=yh().toArray,tKe=J9e("asyncIterator"),Jee=Xee(X9e("Array","values")),rKe=Xee(Jee([]).next),iKe=function(){return new Qee(this)},Qee=function(e){this.iterator=Jee(e)};Qee.prototype.next=function(){return rKe(this.iterator)};ete.exports=function(t){var n=this,u=arguments.length,c=u>1?arguments[1]:void 0,a=u>2?arguments[2]:void 0;return new(Y9e("Promise"))(function(_){var w=$9e(t);c!==void 0&&(c=U9e(c,a));var q=K9e(w,tKe),M=q?void 0:W9e(w)||iKe,O=V9e(n)?new n:[],k=q?G9e(w,q):new Q9e(H9e(Z9e(w,M)));_(eKe(k,c,O))})}});var rte=I(()=>{"use strict";var nKe=W(),aKe=zR(),oKe=He(),tte=Array.fromAsync,sKe=!tte||oKe(function(){var e=0;return tte.call(function(){return e++,[]},{length:0}),e!==1});nKe({target:"Array",stat:!0,forced:sKe},{fromAsync:aKe})});var ite=I(()=>{"use strict";o2()});var nte=I(()=>{"use strict";var lKe=W(),uKe=Kr().filterReject,cKe=zr();lKe({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return uKe(this,t,arguments.length>1?arguments[1]:void 0)}});cKe("filterOut")});var ate=I(()=>{"use strict";var hKe=W(),fKe=Kr().filterReject,dKe=zr();hKe({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return fKe(this,t,arguments.length>1?arguments[1]:void 0)}});dKe("filterReject")});var ote=I(()=>{"use strict";h2()});var ste=I(()=>{"use strict";f2()});var R1=I((BAt,lte)=>{"use strict";var pKe=sr(),mKe=$e(),vKe=Bs(),gKe=zt(),yKe=Ko(),_Ke=Vt(),xKe=Wr(),bKe=Gs(),wKe=Array,SKe=mKe([].push);lte.exports=function(e,t,n,u){for(var c=gKe(e),a=vKe(c),_=pKe(t,n),w=xKe(null),q=_Ke(a),M=0,O,k,$;q>M;M++)$=a[M],k=yKe(_($,M,c)),k in w?SKe(w[k],$):w[k]=[$];if(u&&(O=u(c),O!==wKe))for(k in w)w[k]=bKe(O,w[k]);return w}});var ute=I(()=>{"use strict";var TKe=W(),IKe=R1(),EKe=zr();TKe({target:"Array",proto:!0},{group:function(t){var n=arguments.length>1?arguments[1]:void 0;return IKe(this,t,n)}});EKe("group")});var cte=I(()=>{"use strict";var qKe=W(),PKe=R1(),AKe=Na(),CKe=zr();qKe({target:"Array",proto:!0,forced:!AKe("groupBy")},{groupBy:function(t){var n=arguments.length>1?arguments[1]:void 0;return PKe(this,t,n)}});CKe("groupBy")});var FR=I((VAt,hte)=>{"use strict";var MKe=sr(),RKe=$e(),OKe=Bs(),kKe=zt(),DKe=Vt(),O1=Ii(),LKe=O1.Map,zKe=O1.get,FKe=O1.has,BKe=O1.set,NKe=RKe([].push);hte.exports=function(t){for(var n=kKe(this),u=OKe(n),c=MKe(t,arguments.length>1?arguments[1]:void 0),a=new LKe,_=DKe(u),w=0,q,M;_>w;w++)M=u[w],q=c(M,w,n),FKe(a,q)?NKe(zKe(a,q),M):BKe(a,q,[M]);return a}});var fte=I(()=>{"use strict";var jKe=W(),UKe=Na(),$Ke=zr(),VKe=FR(),GKe=Kt();jKe({target:"Array",proto:!0,name:"groupToMap",forced:GKe||!UKe("groupByToMap")},{groupByToMap:VKe});$Ke("groupByToMap")});var dte=I(()=>{"use strict";var ZKe=W(),HKe=zr(),WKe=FR(),KKe=Kt();ZKe({target:"Array",proto:!0,forced:KKe},{groupToMap:WKe});HKe("groupToMap")});var vte=I(()=>{"use strict";var YKe=W(),XKe=_o(),pte=Object.isFrozen,mte=function(e,t){if(!pte||!XKe(e)||!pte(e))return!1;for(var n=0,u=e.length,c;n<u;)if(c=e[n++],!(typeof c=="string"||t&&c===void 0))return!1;return u!==0};YKe({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!mte(t,!0))return!1;var n=t.raw;return n.length===t.length&&mte(n,!1)}})});var gte=I(()=>{"use strict";var JKe=dt(),QKe=zr(),eYe=zt(),tYe=Vt(),rYe=Sr();JKe&&(rYe(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=eYe(this),n=tYe(t);return n===0?0:n-1}}),QKe("lastIndex"))});var xte=I(()=>{"use strict";var iYe=dt(),nYe=zr(),yte=zt(),_te=Vt(),aYe=Sr();iYe&&(aYe(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=yte(this),n=_te(t);return n===0?void 0:t[n-1]},set:function(t){var n=yte(this),u=_te(n);return n[u===0?0:u-1]=t}}),nYe("lastItem"))});var bte=I(()=>{"use strict";R2()});var wte=I(()=>{"use strict";k2()});var Ste=I(()=>{"use strict";D2()});var Ua=I((sCt,Pte)=>{"use strict";var Tte=$e(),oYe=Js(),Ite=Ii(),sYe=Ite.Map,Ete=Ite.proto,lYe=Tte(Ete.forEach),qte=Tte(Ete.entries),uYe=qte(new sYe).next;Pte.exports=function(e,t,n){return n?oYe({iterator:qte(e),next:uYe},function(u){return t(u[1],u[0])}):lYe(e,t)}});var k1=I((lCt,Ate)=>{"use strict";var cYe=$e(),hYe=wt(),fYe=Hn(),dYe=Vt(),pYe=zt(),BR=Ii(),mYe=Ua(),vYe=BR.Map,gYe=BR.has,yYe=BR.set,_Ye=cYe([].push);Ate.exports=function(t){var n=pYe(this),u=dYe(n),c=[],a=new vYe,_=fYe(t)?function(O){return O}:hYe(t),w,q,M;for(w=0;w<u;w++)q=n[w],M=_(q),gYe(a,M)||yYe(a,M,q);return mYe(a,function(O){_Ye(c,O)}),c}});var Cte=I(()=>{"use strict";var xYe=W(),bYe=zr(),wYe=k1();xYe({target:"Array",proto:!0,forced:!0},{uniqueBy:wYe});bYe("uniqueBy")});var Mte=I(()=>{"use strict";z2()});var Rte=I(()=>{"use strict";cP()});var Ote=I(()=>{"use strict";IP()});var kte=I(()=>{"use strict";EP()});var jR=I((_Ct,Bte)=>{"use strict";var SYe=bt(),TYe=et(),IYe=$e(),EYe=sr(),qYe=tt(),PYe=wt(),zte=Hn(),NR=Hr(),Fte=_t(),AYe=Fte("asyncDispose"),Dte=Fte("dispose"),CYe=IYe([].push),MYe=function(e,t){if(t==="async-dispose"){var n=NR(e,AYe);return n!==void 0||(n=NR(e,Dte),n===void 0)?n:function(){var u=this,c=SYe("Promise");return new c(function(a){TYe(n,u),a(void 0)})}}return NR(e,Dte)},Lte=function(e,t,n){return arguments.length<3&&!zte(e)&&(n=PYe(MYe(qYe(e),t))),n===void 0?function(){}:EYe(n,e)};Bte.exports=function(e,t,n,u){var c;if(arguments.length<4){if(zte(t)&&n==="sync-dispose")return;c=Lte(t,n)}else c=Lte(void 0,n,u);CYe(e.stack,c)}});var Hte=I(()=>{"use strict";var RYe=W(),L1=dt(),$te=bt(),Nte=wt(),OYe=pn(),Vte=rr(),kYe=ja(),DYe=Sr(),Gte=_t(),Zte=Qt(),UR=jR(),jte=vo(),Ute=$te("Promise"),LYe=$te("SuppressedError"),zYe=ReferenceError,FYe=Gte("asyncDispose"),BYe=Gte("toStringTag"),F1="AsyncDisposableStack",NYe=Zte.set,z1=Zte.getterFor(F1),$R="async-dispose",Jg="disposed",jYe="pending",D1=function(e){var t=z1(e);if(t.state===Jg)throw new zYe(F1+" already disposed");return t},VR=function(){NYe(OYe(this,Jd),{type:F1,state:jYe,stack:[]}),L1||(this.disposed=!1)},Jd=VR.prototype;kYe(Jd,{disposeAsync:function(){var t=this;return new Ute(function(n,u){var c=z1(t);if(c.state===Jg)return n(void 0);c.state=Jg,L1||(t.disposed=!0);var a=c.stack,_=a.length,w=!1,q,M=function(k){w?q=new LYe(k,q):(w=!0,q=k),O()},O=function(){if(_){var k=a[--_];a[_]=null;try{Ute.resolve(k()).then(O,M)}catch($){M($)}}else c.stack=null,w?u(q):n(void 0)};O()})},use:function(t){return UR(D1(this),t,$R),t},adopt:function(t,n){var u=D1(this);return Nte(n),UR(u,void 0,$R,function(){return n(t)}),t},defer:function(t){var n=D1(this);Nte(t),UR(n,void 0,$R,t)},move:function(){var t=D1(this),n=new VR;return z1(n).stack=t.stack,t.stack=[],t.state=Jg,L1||(this.disposed=!0),n}});L1&&DYe(Jd,"disposed",{configurable:!0,get:function(){return z1(this).state===Jg}});Vte(Jd,FYe,Jd.disposeAsync,{name:"disposeAsync"});Vte(Jd,BYe,F1,{nonWritable:!0});var UYe=jte&&jte<136;RYe({global:!0,constructor:!0,forced:UYe},{AsyncDisposableStack:VR})});var Jte=I(()=>{"use strict";var $Ye=W(),VYe=pn(),GYe=pi(),Kte=di(),Yte=Ot(),ZYe=_t(),Ou=Yd(),Xte=Kt(),Wte=ZYe("toStringTag"),HYe=TypeError,GR=function(){if(VYe(this,Ou),GYe(this)===Ou)throw new HYe("Abstract class AsyncIterator not directly constructable")};GR.prototype=Ou;Yte(Ou,Wte)||Kte(Ou,Wte,"AsyncIterator");(Xte||!Yte(Ou,"constructor")||Ou.constructor===Object)&&Kte(Ou,"constructor",GR);$Ye({global:!0,constructor:!0,forced:Xte},{AsyncIterator:GR})});var _h=I((TCt,ore)=>{"use strict";var WYe=et(),B1=qu(),Qte=tt(),KYe=Wr(),YYe=di(),XYe=ja(),JYe=_t(),tre=Qt(),QYe=bt(),eXe=Hr(),tXe=Yd(),ZR=Ti(),ere=Li(),as=QYe("Promise"),rXe=JYe("toStringTag"),rre="AsyncIteratorHelper",ire="WrapForValidAsyncIterator",iXe=tre.set,nre=function(e){var t=!e,n=tre.getterFor(e?ire:rre),u=function(c){var a=B1(function(){return n(c)}),_=a.error,w=a.value;return _||t&&w.done?{exit:!0,value:_?as.reject(w):as.resolve(ZR(void 0,!0))}:{exit:!1,value:w}};return XYe(KYe(tXe),{next:function(){var a=u(this),_=a.value;if(a.exit)return _;var w=B1(function(){return Qte(_.nextHandler(as))}),q=w.error,M=w.value;return q&&(_.done=!0),q?as.reject(M):as.resolve(M)},return:function(){var c=u(this),a=c.value;if(c.exit)return a;a.done=!0;var _=a.iterator,w,q,M=B1(function(){if(a.inner)try{ere(a.inner.iterator,"normal")}catch(O){return ere(_,"throw",O)}return eXe(_,"return")});return w=q=M.value,M.error?as.reject(q):w===void 0?as.resolve(ZR(void 0,!0)):(M=B1(function(){return WYe(w,_)}),q=M.value,M.error?as.reject(q):e?as.resolve(q):as.resolve(q).then(function(O){return Qte(O),ZR(void 0,!0)}))}})},nXe=nre(!0),are=nre(!1);YYe(are,rXe,"Async Iterator Helper");ore.exports=function(e,t){var n=function(c,a){a?(a.iterator=c.iterator,a.next=c.next):a=c,a.type=t?ire:rre,a.nextHandler=e,a.counter=0,a.done=!1,iXe(this,a)};return n.prototype=t?nXe:are,n}});var WR=I((ICt,lre)=>{"use strict";var aXe=et(),oXe=wt(),HR=tt(),sXe=vt(),lXe=Rr(),uXe=_h(),sre=Ti(),cXe=Xd(),hXe=uXe(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(c,a){var _=function(q){t.done=!0,a(q)},w=function(q){cXe(n,_,q,_)};e.resolve(HR(aXe(t.next,n))).then(function(q){try{if(HR(q).done)t.done=!0,c(sre(void 0,!0));else{var M=q.value;try{var O=u(M,t.counter++),k=function($){c(sre($,!1))};sXe(O)?e.resolve(O).then(k,w):k(O)}catch($){w($)}}}catch($){_($)}},_)})});lre.exports=function(t){return HR(this),oXe(t),new hXe(lXe(this),{mapper:t})}});var KR=I((ECt,ure)=>{"use strict";var fXe=et(),dXe=WR(),pXe=function(e,t){return[t,e]};ure.exports=function(){return fXe(dXe,this,pXe)}});var cre=I(()=>{"use strict";var mXe=W(),vXe=KR();mXe({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:vXe})});var pre=I(()=>{"use strict";var gXe=et(),yXe=rr(),_Xe=bt(),xXe=Hr(),bXe=Ot(),wXe=_t(),hre=Yd(),fre=wXe("asyncDispose"),dre=_Xe("Promise");bXe(hre,fre)||yXe(hre,fre,function(){var e=this;return new dre(function(t,n){var u=xXe(e,"return");u?dre.resolve(gXe(u,e)).then(function(){t(void 0)},n):t(void 0)})})});var vre=I(()=>{"use strict";var SXe=W(),TXe=et(),YR=tt(),IXe=Rr(),EXe=Id(),qXe=Ed(),PXe=_h(),mre=Ti(),AXe=PXe(function(e){var t=this;return new e(function(n,u){var c=function(_){t.done=!0,u(_)},a=function(){try{e.resolve(YR(TXe(t.next,t.iterator))).then(function(_){try{YR(_).done?(t.done=!0,n(mre(void 0,!0))):t.remaining?(t.remaining--,a()):n(mre(_.value,!1))}catch(w){c(w)}},c)}catch(_){c(_)}};a()})});SXe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{drop:function(t){YR(this);var n=qXe(EXe(+t));return new AXe(IXe(this),{remaining:n})}})});var gre=I(()=>{"use strict";var CXe=W(),MXe=yh().every;CXe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{every:function(t){return MXe(this,t)}})});var _re=I(()=>{"use strict";var RXe=W(),OXe=et(),kXe=wt(),XR=tt(),DXe=vt(),LXe=Rr(),zXe=_h(),yre=Ti(),FXe=Xd(),BXe=zXe(function(e){var t=this,n=t.iterator,u=t.predicate;return new e(function(c,a){var _=function(M){t.done=!0,a(M)},w=function(M){FXe(n,_,M,_)},q=function(){try{e.resolve(XR(OXe(t.next,n))).then(function(M){try{if(XR(M).done)t.done=!0,c(yre(void 0,!0));else{var O=M.value;try{var k=u(O,t.counter++),$=function(fe){fe?c(yre(O,!1)):q()};DXe(k)?e.resolve(k).then($,w):$(k)}catch(fe){w(fe)}}}catch(fe){_(fe)}},_)}catch(M){_(M)}};q()})});RXe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{filter:function(t){return XR(this),kXe(t),new BXe(LXe(this),{predicate:t})}})});var xre=I(()=>{"use strict";var NXe=W(),jXe=yh().find;NXe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{find:function(t){return jXe(this,t)}})});var JR=I((BCt,Sre)=>{"use strict";var UXe=et(),$Xe=Rt(),bre=tt(),wre=Rr(),VXe=Xo(),GXe=Hr(),ZXe=_t(),HXe=Yg(),WXe=ZXe("asyncIterator");Sre.exports=function(e){var t=bre(e),n=!0,u=GXe(t,WXe),c;return $Xe(u)||(u=VXe(t),n=!1),u!==void 0?c=UXe(u,t):(c=t,n=!0),bre(c),wre(n?c:new HXe(wre(c)))}});var Ere=I(()=>{"use strict";var KXe=W(),Tre=et(),YXe=wt(),Qg=tt(),XXe=vt(),JXe=Rr(),QXe=_h(),Ire=Ti(),eJe=JR(),tJe=Xd(),rJe=QXe(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(c,a){var _=function(O){t.done=!0,a(O)},w=function(O){tJe(n,_,O,_)},q=function(){try{e.resolve(Qg(Tre(t.next,n))).then(function(O){try{if(Qg(O).done)t.done=!0,c(Ire(void 0,!0));else{var k=O.value;try{var $=u(k,t.counter++),fe=function(Pe){try{t.inner=eJe(Pe),M()}catch(Se){w(Se)}};XXe($)?e.resolve($).then(fe,w):fe($)}catch(Pe){w(Pe)}}}catch(Pe){_(Pe)}},_)}catch(O){_(O)}},M=function(){var O=t.inner;if(O)try{e.resolve(Qg(Tre(O.next,O.iterator))).then(function(k){try{Qg(k).done?(t.inner=null,q()):c(Ire(k.value,!1))}catch($){w($)}},w)}catch(k){w(k)}else q()};M()})});KXe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{flatMap:function(t){return Qg(this),YXe(t),new rJe(JXe(this),{mapper:t,inner:null})}})});var qre=I(()=>{"use strict";var iJe=W(),nJe=yh().forEach;iJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{forEach:function(t){return nJe(this,t)}})});var QR=I((VCt,Pre)=>{"use strict";var aJe=et(),oJe=_h();Pre.exports=oJe(function(){return aJe(this.next,this.iterator)},!0)});var Are=I(()=>{"use strict";var sJe=W(),lJe=zt(),uJe=Ki(),cJe=JR(),hJe=Yd(),fJe=QR();sJe({target:"AsyncIterator",stat:!0,forced:!0},{from:function(t){var n=cJe(typeof t=="string"?lJe(t):t);return uJe(hJe,n.iterator)?n.iterator:new fJe(n)}})});var Cre=I(()=>{"use strict";var dJe=W(),pJe=KR();dJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:pJe})});var Mre=I(()=>{"use strict";var mJe=W(),vJe=WR();mJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{map:vJe})});var Rre=I(()=>{"use strict";var gJe=W(),yJe=et(),_Je=wt(),eO=tt(),xJe=vt(),bJe=bt(),wJe=Rr(),SJe=Xd(),tO=bJe("Promise"),TJe=TypeError;gJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{reduce:function(t){eO(this),_Je(t);var n=wJe(this),u=n.iterator,c=n.next,a=arguments.length<2,_=a?void 0:arguments[1],w=0;return new tO(function(q,M){var O=function($){SJe(u,M,$,M)},k=function(){try{tO.resolve(eO(yJe(c,u))).then(function($){try{if(eO($).done)a?M(new TJe("Reduce of empty iterator with no initial value")):q(_);else{var fe=$.value;if(a)a=!1,_=fe,k();else try{var Pe=t(_,fe,w),Se=function(ne){_=ne,k()};xJe(Pe)?tO.resolve(Pe).then(Se,O):Se(Pe)}catch(ne){O(ne)}}w++}catch(ne){M(ne)}},M)}catch($){M($)}};k()})}})});var Ore=I(()=>{"use strict";var IJe=W(),EJe=yh().some;IJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{some:function(t){return EJe(this,t)}})});var Lre=I(()=>{"use strict";var qJe=W(),kre=et(),Dre=tt(),PJe=Rr(),AJe=Id(),CJe=Ed(),MJe=_h(),rO=Ti(),RJe=MJe(function(e){var t=this,n=t.iterator,u;if(!t.remaining--){var c=rO(void 0,!0);return t.done=!0,u=n.return,u!==void 0?e.resolve(kre(u,n,void 0)).then(function(){return c}):c}return e.resolve(kre(t.next,n)).then(function(a){return Dre(a).done?(t.done=!0,rO(void 0,!0)):rO(a.value,!1)}).then(null,function(a){throw t.done=!0,a})});qJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{take:function(t){Dre(this);var n=CJe(AJe(+t));return new RJe(PJe(this),{remaining:n})}})});var zre=I(()=>{"use strict";var OJe=W(),kJe=yh().toArray;OJe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{toArray:function(){return kJe(this,void 0,[])}})});var j1=I((aMt,$re)=>{"use strict";var Bre=Qt(),DJe=gu(),iO=Ti(),LJe=Hn(),zJe=vt(),FJe=Sr(),Nre=dt(),ey="Incorrect Iterator.range arguments",aO="NumericRangeIterator",BJe=Bre.set,jre=Bre.getterFor(aO),Fre=RangeError,nO=TypeError,Ure=DJe(function(t,n,u,c,a,_){if(typeof t!=c||n!==1/0&&n!==-1/0&&typeof n!=c)throw new nO(ey);if(t===1/0||t===-1/0)throw new Fre(ey);var w=n>t,q=!1,M;if(u===void 0)M=void 0;else if(zJe(u))M=u.step,q=!!u.inclusive;else if(typeof u==c)M=u;else throw new nO(ey);if(LJe(M)&&(M=w?_:-_),typeof M!=c)throw new nO(ey);if(M===1/0||M===-1/0||M===a&&t!==n)throw new Fre(ey);var O=t!==t||n!==n||M!==M||n>t!=M>a;BJe(this,{type:aO,start:t,end:n,step:M,inclusive:q,hitsEnd:O,currentCount:a,zero:a}),Nre||(this.start=t,this.end=n,this.step=M,this.inclusive=q)},aO,function(){var t=jre(this);if(t.hitsEnd)return iO(void 0,!0);var n=t.start,u=t.end,c=t.step,a=n+c*t.currentCount++;a===u&&(t.hitsEnd=!0);var _=t.inclusive,w;return u>n?w=_?a>u:a>=u:w=_?u>a:u>=a,w?(t.hitsEnd=!0,iO(void 0,!0)):iO(a,!1)}),N1=function(e){FJe(Ure.prototype,e,{get:function(){return jre(this)[e]},set:function(){},configurable:!0,enumerable:!1})};Nre&&(N1("start"),N1("end"),N1("inclusive"),N1("step"));$re.exports=Ure});var Vre=I(()=>{"use strict";var NJe=W(),jJe=j1();typeof BigInt=="function"&&NJe({target:"BigInt",stat:!0,forced:!0},{range:function(t,n,u){return new jJe(t,n,u,"bigint",BigInt(0),BigInt(1))}})});var oO=I((lMt,Wre)=>{"use strict";qb();E1();var Hre=bt(),UJe=Wr(),Gre=vt(),$Je=Object,VJe=TypeError,GJe=Hre("Map"),ZJe=Hre("WeakMap"),U1=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=UJe(null)};U1.prototype.get=function(e,t){return this[e]||(this[e]=t())};U1.prototype.next=function(e,t,n){var u=n?this.objectsByIndex[e]||(this.objectsByIndex[e]=new ZJe):this.primitives||(this.primitives=new GJe),c=u.get(t);return c||u.set(t,c=new U1),c};var Zre=new U1;Wre.exports=function(){var e=Zre,t=arguments.length,n,u;for(n=0;n<t;n++)Gre(u=arguments[n])&&(e=e.next(n,u,!0));if(this===$Je&&e===Zre)throw new VJe("Composite keys must contain a non-primitive component");for(n=0;n<t;n++)Gre(u=arguments[n])||(e=e.next(n,u,!1));return e}});var Yre=I(()=>{"use strict";var HJe=W(),WJe=Yi(),KJe=oO(),YJe=bt(),Kre=Wr(),XJe=Object,JJe=function(){var e=YJe("Object","freeze");return e?e(Kre(null)):Kre(null)};HJe({global:!0,forced:!0},{compositeKey:function(){return WJe(KJe,XJe,arguments).get("object",JJe)}})});var Jre=I(()=>{"use strict";var QJe=W(),eQe=oO(),Xre=bt(),tQe=Yi();QJe({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?Xre("Symbol").for(arguments[0]):tQe(eQe,null,arguments).get("symbol",Xre("Symbol"))}})});var Qre=I(()=>{"use strict";iP()});var eie=I(()=>{"use strict";var rQe=W(),iQe=$e(),nQe=iQe(DataView.prototype.getUint8);rQe({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return nQe(this,t)}})});var tie=I(()=>{"use strict";sP()});var rie=I(()=>{"use strict";var aQe=W(),oQe=$e(),sQe=nP(),lQe=yd(),uQe=YM(),cQe=oQe(DataView.prototype.setUint8);aQe({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,n){sQe(this);var u=lQe(t);return cQe(this,u,uQe(n))}})});var sie=I(()=>{"use strict";var hQe=W(),V1=dt(),fQe=bt(),iie=wt(),dQe=pn(),nie=rr(),pQe=ja(),mQe=Sr(),aie=_t(),oie=Qt(),sO=jR(),vQe=fQe("SuppressedError"),gQe=ReferenceError,yQe=aie("dispose"),_Qe=aie("toStringTag"),Z1="DisposableStack",xQe=oie.set,G1=oie.getterFor(Z1),lO="sync-dispose",ty="disposed",bQe="pending",$1=function(e){var t=G1(e);if(t.state===ty)throw new gQe(Z1+" already disposed");return t},uO=function(){xQe(dQe(this,Qd),{type:Z1,state:bQe,stack:[]}),V1||(this.disposed=!1)},Qd=uO.prototype;pQe(Qd,{dispose:function(){var t=G1(this);if(t.state!==ty){t.state=ty,V1||(this.disposed=!0);for(var n=t.stack,u=n.length,c=!1,a;u;){var _=n[--u];n[u]=null;try{_()}catch(w){c?a=new vQe(w,a):(c=!0,a=w)}}if(t.stack=null,c)throw a}},use:function(t){return sO($1(this),t,lO),t},adopt:function(t,n){var u=$1(this);return iie(n),sO(u,void 0,lO,function(){n(t)}),t},defer:function(t){var n=$1(this);iie(t),sO(n,void 0,lO,t)},move:function(){var t=$1(this),n=new uO;return G1(n).stack=t.stack,t.stack=[],t.state=ty,V1||(this.disposed=!0),n}});V1&&mQe(Qd,"disposed",{configurable:!0,get:function(){return G1(this).state===ty}});nie(Qd,yQe,Qd.dispose,{name:"dispose"});nie(Qd,_Qe,Z1,{nonWritable:!0});hQe({global:!0,constructor:!0},{DisposableStack:uO})});var hie=I(()=>{"use strict";var wQe=W(),uie=bt(),SQe=vt(),TQe=An(),IQe=He(),cie="Error",hO="DOMException",EQe=Object.setPrototypeOf||{}.__proto__,lie=uie(hO),cO=Error,H1=cO.isError,qQe=!H1||!EQe||IQe(function(){return lie&&!H1(new lie(hO))||!H1(new cO(cie,{cause:function(){}}))||H1(uie("Object","create")(cO.prototype))});wQe({target:"Error",stat:!0,sham:!0,forced:qQe},{isError:function(t){if(!SQe(t))return!1;var n=TQe(t);return n===cie||n===hO}})});var fO=I((IMt,fie)=>{"use strict";var PQe=$e(),AQe=wt();fie.exports=function(){return PQe(AQe(this))}});var die=I(()=>{"use strict";var CQe=W(),MQe=fO();CQe({target:"Function",proto:!0,forced:!0},{demethodize:MQe})});var mie=I(()=>{"use strict";var RQe=W(),OQe=$e(),kQe=Rt(),DQe=zv(),LQe=Ot(),zQe=dt(),FQe=Object.getOwnPropertyDescriptor,pie=/^\s*class\b/,BQe=OQe(pie.exec),NQe=function(e){try{if(!zQe||!BQe(pie,DQe(e)))return!1}catch(n){}var t=FQe(e,"prototype");return!!t&&LQe(t,"writable")&&!t.writable};RQe({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return kQe(t)&&!NQe(t)}})});var vie=I(()=>{"use strict";var jQe=W(),UQe=xo();jQe({target:"Function",stat:!0,forced:!0},{isConstructor:UQe})});var _ie=I(()=>{"use strict";var $Qe=_t(),VQe=dr().f,gie=$Qe("metadata"),yie=Function.prototype;yie[gie]===void 0&&VQe(yie,gie,{value:null})});var xie=I(()=>{"use strict";var GQe=W(),ZQe=fO();GQe({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:ZQe})});var bie=I(()=>{"use strict";OP()});var wie=I(()=>{"use strict";FP()});var dO=I((NMt,Sie)=>{"use strict";wb();var HQe=et(),WQe=vu().IteratorPrototype.map,KQe=function(e,t){return[t,e]};Sie.exports=function(){return HQe(WQe,this,KQe)}});var Tie=I(()=>{"use strict";var YQe=W(),XQe=dO();YQe({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:XQe})});var qie=I(()=>{"use strict";var JQe=W(),Iie=et(),QQe=wt(),Eie=tt(),eet=Xo(),tet=Iu(),ret=Ti(),iet=Array,net=tet(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,n=this.iterables;if(t>=n.length)return this.done=!0,ret(void 0,!0);var u=n[t];this.iterables[t]=null,e=this.iterator=Iie(u.method,u.iterable),this.next=e.next}var c=Eie(Iie(this.next,e));if(c.done){this.iterator=null,this.next=null;continue}return c}},!1,!0);JQe({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,n=iet(t),u=0;u<t;u++){var c=Eie(arguments[u]);n[u]={iterable:c,method:QQe(eet(c))}}return new net({iterables:n,nextIterableIndex:0,iterator:null,next:null})}})});var Cie=I(()=>{"use strict";var aet=et(),oet=rr(),set=Hr(),uet=Ot(),cet=_t(),Pie=vu().IteratorPrototype,Aie=cet("dispose");uet(Pie,Aie)||oet(Pie,Aie,function(){var e=set(this,"return");e&&aet(e,this)})});var Mie=I(()=>{"use strict";$P()});var Rie=I(()=>{"use strict";GP()});var Oie=I(()=>{"use strict";HP()});var kie=I(()=>{"use strict";KP()});var Die=I(()=>{"use strict";tA()});var Lie=I(()=>{"use strict";iA()});var zie=I(()=>{"use strict";nA()});var Fie=I(()=>{"use strict";var het=W(),fet=dO();het({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:fet})});var Bie=I(()=>{"use strict";wb()});var jie=I(()=>{"use strict";var det=W(),Nie=j1(),pet=TypeError;det({target:"Iterator",stat:!0,forced:!0},{range:function(t,n,u){if(typeof t=="number")return new Nie(t,n,u,"number",0,1);if(typeof t=="bigint")return new Nie(t,n,u,"bigint",BigInt(0),BigInt(1));throw new pet("Incorrect Iterator.range arguments")}})});var Uie=I(()=>{"use strict";sA()});var $ie=I(()=>{"use strict";uA()});var Vie=I(()=>{"use strict";hA()});var Gie=I(()=>{"use strict";fA()});var Hie=I(()=>{"use strict";var met=W(),vet=tt(),get=Yg(),yet=QR(),Zie=Rr();met({target:"Iterator",proto:!0,real:!0,forced:!0},{toAsync:function(){return new yet(Zie(new get(Zie(vet(this)))))}})});var pO=I((SRt,Wie)=>{"use strict";var _et=He();Wie.exports=!_et(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var mO=I((TRt,Kie)=>{"use strict";var xet=vt(),bet=Qt().get;Kie.exports=function(t){if(!xet(t))return!1;var n=bet(t);return!!n&&n.type==="RawJSON"}});var Yie=I(()=>{"use strict";var wet=W(),Tet=pO(),Iet=mO();wet({target:"JSON",stat:!0,forced:!Tet},{isRawJSON:Iet})});var gO=I((qRt,ene)=>{"use strict";var vO=$e(),Eet=Ot(),W1=SyntaxError,qet=parseInt,Pet=String.fromCharCode,Aet=vO("".charAt),Xie=vO("".slice),Jie=vO(/./.exec),Qie={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},Cet=/^[\da-f]{4}$/i,Met=/^[\u0000-\u001F]$/;ene.exports=function(e,t){for(var n=!0,u="";t<e.length;){var c=Aet(e,t);if(c==="\\"){var a=Xie(e,t,t+2);if(Eet(Qie,a))u+=Qie[a],t+=2;else if(a==="\\u"){t+=2;var _=Xie(e,t,t+4);if(!Jie(Cet,_))throw new W1("Bad Unicode escape at: "+t);u+=Pet(qet(_,16)),t+=4}else throw new W1("Unknown escape sequence: \""+a+"\"")}else if(c==="\""){n=!1,t++;break}else{if(Jie(Met,c))throw new W1("Bad control character in string literal at: "+t);u+=c,t++}}if(n)throw new W1("Unterminated string at: "+t);return{value:u,end:t}}});var lne=I(()=>{"use strict";var Ret=W(),Oet=dt(),IO=Qe(),ket=bt(),K1=$e(),Det=et(),one=Rt(),Let=vt(),zet=_o(),Fet=Ot(),Bet=It(),tne=Vt(),wO=Ba(),sne=He(),Net=gO(),jet=ou(),rne=IO.JSON,Uet=IO.Number,ep=IO.SyntaxError,EO=rne&&rne.parse,$et=ket("Object","keys"),Vet=Object.getOwnPropertyDescriptor,Ji=K1("".charAt),yO=K1("".slice),_O=K1(/./.exec),ine=K1([].push),xO=/^\d$/,Get=/^[1-9]$/,Zet=/^[\d-]$/,ry=/^[\t\n\r ]$/,bO=0,nne=1,Het=function(e,t){e=Bet(e);var n=new TO(e,0,""),u=n.parse(),c=u.value,a=n.skip(ry,u.end);if(a<e.length)throw new ep("Unexpected extra character: \""+Ji(e,a)+"\" after the parsed data at: "+a);return one(t)?SO({"":c},"",t,u):c},SO=function(e,t,n,u){var c=e[t],a=u&&c===u.value,_=a&&typeof u.source=="string"?{source:u.source}:{},w,q,M,O,k;if(Let(c)){var $=zet(c),fe=a?u.nodes:$?[]:{};if($)for(w=fe.length,M=tne(c),O=0;O<M;O++)ane(c,O,SO(c,""+O,n,O<w?fe[O]:void 0));else for(q=$et(c),M=tne(q),O=0;O<M;O++)k=q[O],ane(c,k,SO(c,k,n,Fet(fe,k)?fe[k]:void 0))}return Det(n,e,t,c,_)},ane=function(e,t,n){if(Oet){var u=Vet(e,t);if(u&&!u.configurable)return}n===void 0?delete e[t]:wO(e,t,n)},Wet=function(e,t,n,u){this.value=e,this.end=t,this.source=n,this.nodes=u},TO=function(e,t){this.source=e,this.index=t};TO.prototype={fork:function(e){return new TO(this.source,e)},parse:function(){var e=this.source,t=this.skip(ry,this.index),n=this.fork(t),u=Ji(e,t);if(_O(Zet,u))return n.number();switch(u){case"{":return n.object();case"[":return n.array();case"\"":return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null)}throw new ep("Unexpected character: \""+u+"\" at: "+t)},node:function(e,t,n,u,c){return new Wet(t,u,e?null:yO(this.source,n,u),c)},object:function(){for(var e=this.source,t=this.index+1,n=!1,u={},c={};t<e.length;){if(t=this.until(["\"","}"],t),Ji(e,t)==="}"&&!n){t++;break}var a=this.fork(t).string(),_=a.value;t=a.end,t=this.until([":"],t)+1,t=this.skip(ry,t),a=this.fork(t).parse(),wO(c,_,a),wO(u,_,a.value),t=this.until([",","}"],a.end);var w=Ji(e,t);if(w===",")n=!0,t++;else if(w==="}"){t++;break}}return this.node(nne,u,this.index,t,c)},array:function(){for(var e=this.source,t=this.index+1,n=!1,u=[],c=[];t<e.length;){if(t=this.skip(ry,t),Ji(e,t)==="]"&&!n){t++;break}var a=this.fork(t).parse();if(ine(c,a),ine(u,a.value),t=this.until([",","]"],a.end),Ji(e,t)===",")n=!0,t++;else if(Ji(e,t)==="]"){t++;break}}return this.node(nne,u,this.index,t,c)},string:function(){var e=this.index,t=Net(this.source,this.index+1);return this.node(bO,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if(Ji(e,n)==="-"&&n++,Ji(e,n)==="0")n++;else if(_O(Get,Ji(e,n)))n=this.skip(xO,n+1);else throw new ep("Failed to parse number at: "+n);if(Ji(e,n)==="."&&(n=this.skip(xO,n+1)),Ji(e,n)==="e"||Ji(e,n)==="E"){n++,(Ji(e,n)==="+"||Ji(e,n)==="-")&&n++;var u=n;if(n=this.skip(xO,n),u===n)throw new ep("Failed to parse number's exponent value at: "+n)}return this.node(bO,Uet(yO(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,u=n+t.length;if(yO(this.source,n,u)!==t)throw new ep("Failed to parse value at: "+n);return this.node(bO,e,n,u)},skip:function(e,t){for(var n=this.source;t<n.length&&_O(e,Ji(n,t));t++);return t},until:function(e,t){t=this.skip(ry,t);for(var n=Ji(this.source,t),u=0;u<e.length;u++)if(e[u]===n)return t;throw new ep("Unexpected character: \""+n+"\" at: "+t)}};var Ket=sne(function(){var e="9007199254740993",t;return EO(e,function(n,u,c){t=c.source}),t!==e}),Yet=jet&&!sne(function(){return 1/EO("-0 \t")!==-1/0});Ret({target:"JSON",stat:!0,forced:Ket},{parse:function(t,n){return Yet&&!one(n)?EO(t):Het(t,n)}})});var vne=I(()=>{"use strict";var pne=W(),Xet=Ys(),mne=pO(),Y1=bt(),Jet=et(),CO=$e(),Qet=Rt(),ett=mO(),ttt=It(),rtt=Ba(),itt=gO(),ntt=Nq(),att=lu(),ott=Qt().set,stt=String,une=SyntaxError,ltt=Y1("JSON","parse"),cne=Y1("JSON","stringify"),utt=Y1("Object","create"),ctt=Y1("Object","freeze"),PO=CO("".charAt),qO=CO("".slice),htt=CO([].push),AO=att(),hne=AO.length,fne="Unacceptable as raw JSON",dne=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};pne({target:"JSON",stat:!0,forced:!mne},{rawJSON:function(t){var n=ttt(t);if(n===""||dne(PO(n,0))||dne(PO(n,n.length-1)))throw new une(fne);var u=ltt(n);if(typeof u=="object"&&u!==null)throw new une(fne);var c=utt(null);return ott(c,{type:"RawJSON"}),rtt(c,"rawJSON",n),Xet?ctt(c):c}});cne&&pne({target:"JSON",stat:!0,arity:3,forced:!mne},{stringify:function(t,n,u){var c=ntt(n),a=[],_=cne(t,function(fe,Pe){var Se=Qet(c)?Jet(c,this,stt(fe),Pe):Pe;return ett(Se)?AO+(htt(a,Se.rawJSON)-1):Se},u);if(typeof _!="string")return _;for(var w="",q=_.length,M=0;M<q;M++){var O=PO(_,M);if(O==="\""){var k=itt(_,++M).end-1,$=qO(_,M,k);w+=qO($,0,hne)===AO?a[qO($,hne)]:"\""+$+"\"",M=k}else w+=O}return w}})});var Qi=I((RRt,gne)=>{"use strict";var ftt=Ii().has;gne.exports=function(e){return ftt(e),e}});var yne=I(()=>{"use strict";var dtt=W(),ptt=Qi(),mtt=Ii().remove;dtt({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=ptt(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=mtt(t,arguments[c]),n=n&&u;return!!n}})});var xne=I(()=>{"use strict";var vtt=W(),gtt=Qi(),MO=Ii(),ytt=MO.get,_tt=MO.has,_ne=MO.set;vtt({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=gtt(this),c,a;return _tt(u,t)?(c=ytt(u,t),"update"in n&&(c=n.update(c,t,u),_ne(u,t,c)),c):(a=n.insert(t,u),_ne(u,t,a),a)}})});var bne=I(()=>{"use strict";var xtt=W(),btt=sr(),wtt=Qi(),Stt=Ua();xtt({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var n=wtt(this),u=btt(t,arguments.length>1?arguments[1]:void 0);return Stt(n,function(c,a){if(!u(c,a,n))return!1},!0)!==!1}})});var Sne=I(()=>{"use strict";var Ttt=W(),Itt=sr(),Ett=Qi(),wne=Ii(),qtt=Ua(),Ptt=wne.Map,Att=wne.set;Ttt({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var n=Ett(this),u=Itt(t,arguments.length>1?arguments[1]:void 0),c=new Ptt;return qtt(n,function(a,_){u(a,_,n)&&Att(c,_,a)}),c}})});var Tne=I(()=>{"use strict";var Ctt=W(),Mtt=sr(),Rtt=Qi(),Ott=Ua();Ctt({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var n=Rtt(this),u=Mtt(t,arguments.length>1?arguments[1]:void 0),c=Ott(n,function(a,_){if(u(a,_,n))return{value:a}},!0);return c&&c.value}})});var Ine=I(()=>{"use strict";var ktt=W(),Dtt=sr(),Ltt=Qi(),ztt=Ua();ktt({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var n=Ltt(this),u=Dtt(t,arguments.length>1?arguments[1]:void 0),c=ztt(n,function(a,_){if(u(a,_,n))return{key:_}},!0);return c&&c.key}})});var iy=I((GRt,Ene)=>{"use strict";var Ftt=sr(),Btt=tt(),Ntt=zt(),jtt=Lr();Ene.exports=function(e,t,n){return function(c){var a=Ntt(c),_=arguments.length,w=_>1?arguments[1]:void 0,q=w!==void 0,M=q?Ftt(w,_>2?arguments[2]:void 0):void 0,O=new e,k=0;return jtt(a,function($){var fe=q?M($,k++):$;n?t(O,Btt(fe)[0],fe[1]):t(O,fe)}),O}}});var Pne=I(()=>{"use strict";var Utt=W(),qne=Ii(),$tt=iy();Utt({target:"Map",stat:!0,forced:!0},{from:$tt(qne.Map,qne.set,!0)})});var Ane=I(()=>{"use strict";var Vtt=W(),Gtt=Qi(),RO=Ii(),Ztt=RO.get,Htt=RO.has,Wtt=RO.set;Vtt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,n){return Htt(Gtt(this),t)?Ztt(this,t):(Wtt(this,t,n),n)}})});var Cne=I(()=>{"use strict";var Ktt=W(),Ytt=wt(),Xtt=Qi(),OO=Ii(),Jtt=OO.get,Qtt=OO.has,ert=OO.set;Ktt({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,n){if(Xtt(this),Ytt(n),Qtt(this,t))return Jtt(this,t);t===0&&1/t===-1/0&&(t=0);var u=n(t);return ert(this,t,u),u}})});var Mne=I(()=>{"use strict";xA()});var One=I((eOt,Rne)=>{"use strict";Rne.exports=function(e,t){return e===t||e!==e&&t!==t}});var kne=I(()=>{"use strict";var trt=W(),rrt=One(),irt=Qi(),nrt=Ua();trt({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return nrt(irt(this),function(n){if(rrt(n,t))return!0},!0)===!0}})});var Lne=I(()=>{"use strict";var art=W(),ort=et(),srt=Lr(),lrt=Rt(),Dne=wt(),urt=Ii().Map;art({target:"Map",stat:!0,forced:!0},{keyBy:function(t,n){var u=lrt(this)?this:urt,c=new u;Dne(n);var a=Dne(c.set);return srt(t,function(_){ort(a,c,n(_),_)}),c}})});var zne=I(()=>{"use strict";var crt=W(),hrt=Qi(),frt=Ua();crt({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var n=frt(hrt(this),function(u,c){if(u===t)return{key:c}},!0);return n&&n.key}})});var Bne=I(()=>{"use strict";var drt=W(),prt=sr(),mrt=Qi(),Fne=Ii(),vrt=Ua(),grt=Fne.Map,yrt=Fne.set;drt({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var n=mrt(this),u=prt(t,arguments.length>1?arguments[1]:void 0),c=new grt;return vrt(n,function(a,_){yrt(c,u(a,_,n),a)}),c}})});var jne=I(()=>{"use strict";var _rt=W(),xrt=sr(),brt=Qi(),Nne=Ii(),wrt=Ua(),Srt=Nne.Map,Trt=Nne.set;_rt({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var n=brt(this),u=xrt(t,arguments.length>1?arguments[1]:void 0),c=new Srt;return wrt(n,function(a,_){Trt(c,_,u(a,_,n))}),c}})});var Une=I(()=>{"use strict";var Irt=W(),Ert=Qi(),qrt=Lr(),Prt=Ii().set;Irt({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var n=Ert(this),u=arguments.length,c=0;c<u;)qrt(arguments[c++],function(a,_){Prt(n,a,_)},{AS_ENTRIES:!0});return n}})});var ny=I((dOt,$ne)=>{"use strict";var Art=tt();$ne.exports=function(e,t,n){return function(){for(var c=new e,a=arguments.length,_=0;_<a;_++){var w=arguments[_];n?t(c,Art(w)[0],w[1]):t(c,w)}return c}}});var Gne=I(()=>{"use strict";var Crt=W(),Vne=Ii(),Mrt=ny();Crt({target:"Map",stat:!0,forced:!0},{of:Mrt(Vne.Map,Vne.set,!0)})});var Zne=I(()=>{"use strict";var Rrt=W(),Ort=wt(),krt=Qi(),Drt=Ua(),Lrt=TypeError;Rrt({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=krt(this),u=arguments.length<2,c=u?void 0:arguments[1];if(Ort(t),Drt(n,function(a,_){u?(u=!1,c=a):c=t(c,a,_,n)}),u)throw new Lrt("Reduce of empty map with no initial value");return c}})});var Hne=I(()=>{"use strict";var zrt=W(),Frt=sr(),Brt=Qi(),Nrt=Ua();zrt({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var n=Brt(this),u=Frt(t,arguments.length>1?arguments[1]:void 0);return Nrt(n,function(c,a){if(u(c,a,n))return!0},!0)===!0}})});var Kne=I(()=>{"use strict";var jrt=W(),Wne=wt(),Urt=Qi(),kO=Ii(),$rt=TypeError,Vrt=kO.get,Grt=kO.has,Zrt=kO.set;jrt({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,n){var u=Urt(this),c=arguments.length;Wne(n);var a=Grt(u,t);if(!a&&c<3)throw new $rt("Updating absent value");var _=a?Vrt(u,t):Wne(c>2?arguments[2]:void 0)(t,u);return Zrt(u,t,n(_,t,u)),u}})});var Q1=I((wOt,Yne)=>{"use strict";var X1=et(),DO=wt(),J1=Rt(),Hrt=tt(),Wrt=TypeError;Yne.exports=function(t,n){var u=Hrt(this),c=DO(u.get),a=DO(u.has),_=DO(u.set),w=arguments.length>2?arguments[2]:void 0,q;if(!J1(n)&&!J1(w))throw new Wrt("At least one callback required");return X1(a,u,t)?(q=X1(c,u,t),J1(n)&&(q=n(q),X1(_,u,t,q))):J1(w)&&(q=w(),X1(_,u,t,q)),q}});var Xne=I(()=>{"use strict";var Krt=W(),Yrt=Q1();Krt({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Yrt})});var Jne=I(()=>{"use strict";var Xrt=W(),Jrt=Q1();Xrt({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Jrt})});var eae=I((qOt,Qne)=>{"use strict";var Qrt=TypeError;Qne.exports=function(e){if(typeof e=="number")return e;throw new Qrt("Argument is not a number")}});var iae=I(()=>{"use strict";var eit=W(),LO=eae(),tae=Id(),rae=Db(),tit=RangeError,rit=Math.min,iit=Math.max;eit({target:"Math",stat:!0,forced:!0},{clamp:function(t,n,u){if(LO(t),tae(LO(n)),tae(LO(u)),rae(n,0)&&rae(u,-0)||n>u)throw new tit("`min` should be smaller than `max`");return rit(u,iit(n,t))}})});var nae=I(()=>{"use strict";var nit=W();nit({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var aae=I(()=>{"use strict";var ait=W(),oit=180/Math.PI;ait({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*oit}})});var zO=I((kOt,oae)=>{"use strict";oae.exports=function(t,n,u,c,a){var _=+t,w=+n,q=+u,M=+c,O=+a;return _!==_||w!==w||q!==q||M!==M||O!==O?NaN:_===1/0||_===-1/0?_:(_-w)*(O-M)/(q-w)+M}});var sae=I(()=>{"use strict";var sit=W(),lit=zO(),uit=sb();sit({target:"Math",stat:!0,forced:!0},{fscale:function(t,n,u,c,a){return uit(lit(t,n,u,c,a))}})});var lae=I(()=>{"use strict";TA()});var uae=I(()=>{"use strict";var cit=W();cit({target:"Math",stat:!0,forced:!0},{iaddh:function(t,n,u,c){var a=t>>>0,_=n>>>0,w=u>>>0;return _+(c>>>0)+((a&w|(a|w)&~(a+w>>>0))>>>31)|0}})});var cae=I(()=>{"use strict";var hit=W();hit({target:"Math",stat:!0,forced:!0},{imulh:function(t,n){var u=65535,c=+t,a=+n,_=c&u,w=a&u,q=c>>16,M=a>>16,O=(q*w>>>0)+(_*w>>>16);return q*M+(O>>16)+((_*M>>>0)+(O&u)>>16)}})});var hae=I(()=>{"use strict";var fit=W();fit({target:"Math",stat:!0,forced:!0},{isubh:function(t,n,u,c){var a=t>>>0,_=n>>>0,w=u>>>0;return _-(c>>>0)-((~a&w|~(a^w)&a-w>>>0)>>>31)|0}})});var fae=I(()=>{"use strict";var dit=W();dit({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var dae=I(()=>{"use strict";var pit=W(),mit=Math.PI/180;pit({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*mit}})});var pae=I(()=>{"use strict";var vit=W(),git=zO();vit({target:"Math",stat:!0,forced:!0},{scale:git})});var yae=I(()=>{"use strict";var yit=W(),_it=tt(),xit=RA(),bit=gu(),wit=Ti(),mae=Qt(),vae="Seeded Random",gae=vae+" Generator",Sit="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Tit=mae.set,Iit=mae.getterFor(gae),Eit=TypeError,qit=bit(function(t){Tit(this,{type:gae,seed:t%2147483647})},vae,function(){var t=Iit(this),n=t.seed=(t.seed*1103515245+12345)%2147483647;return wit((n&1073741823)/1073741823,!1)});yit({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var n=_it(t).seed;if(!xit(n))throw new Eit(Sit);return new qit(n)}})});var _ae=I(()=>{"use strict";var Pit=W();Pit({target:"Math",stat:!0,forced:!0},{signbit:function(t){var n=+t;return n===n&&n===0?1/n===-1/0:n<0}})});var Tae=I(()=>{"use strict";var Ait=W(),Cit=$e(),Mit=Lr(),Rit=RangeError,Oit=TypeError,$a=1/0,kit=NaN,xh=Math.abs,jO=Math.pow,xae=Cit([].push),ay=jO(2,1023),Dit=jO(2,53)-1,bae=Number.MAX_VALUE,wae=jO(2,971),oy={},FO={},BO={},NO={},Sae={},ew=function(e,t){var n=e+t,u=t-(n-e);return{hi:n,lo:u}};Ait({target:"Math",stat:!0},{sumPrecise:function(t){var n=[],u=0,c=NO;switch(Mit(t,function(_e){if(++u>=Dit)throw new Rit("Maximum allowed index exceeded");if(typeof _e!="number")throw new Oit("Value is not a number");c!==oy&&(_e!==_e?c=oy:_e===$a?c=c===FO?oy:BO:_e===-$a?c=c===BO?oy:FO:(_e!==0||1/_e===$a)&&(c===NO||c===Sae)&&(c=Sae,xae(n,_e)))}),c){case oy:return kit;case FO:return-$a;case BO:return $a;case NO:return-0}for(var a=[],_=0,w,q,M,O,k,$,fe=0;fe<n.length;fe++){w=n[fe];for(var Pe=0,Se=0;Se<a.length;Se++){if(q=a[Se],xh(w)<xh(q)&&($=w,w=q,q=$),M=ew(w,q),O=M.hi,k=M.lo,xh(O)===$a){var ne=O===$a?1:-1;_+=ne,w=w-ne*ay-ne*ay,xh(w)<xh(q)&&($=w,w=q,q=$),M=ew(w,q),O=M.hi,k=M.lo}k!==0&&(a[Pe++]=k),w=O}a.length=Pe,w!==0&&xae(a,w)}var re=a.length-1;if(O=0,k=0,_!==0){var ae=re>=0?a[re]:0;if(re--,xh(_)>1||_>0&&ae>0||_<0&&ae<0)return _>0?$a:-$a;if(M=ew(_*ay,ae/2),O=M.hi,k=M.lo,k*=2,xh(2*O)===$a)return O>0?O===ay&&k===-(wae/2)&&re>=0&&a[re]<0?bae:$a:O===-ay&&k===wae/2&&re>=0&&a[re]>0?-bae:-$a;k!==0&&(a[++re]=k,k=0),O*=2}for(;re>=0&&(M=ew(O,a[re--]),O=M.hi,k=M.lo,k===0););return re>=0&&(k<0&&a[re]<0||k>0&&a[re]>0)&&(q=k*2,w=O+q,q===w-O&&(O=w)),O}})});var Iae=I(()=>{"use strict";var Lit=W();Lit({target:"Math",stat:!0,forced:!0},{umulh:function(t,n){var u=65535,c=+t,a=+n,_=c&u,w=a&u,q=c>>>16,M=a>>>16,O=(q*w>>>0)+(_*w>>>16);return q*M+(O>>>16)+((_*M>>>0)+(O&u)>>>16)}})});var Pae=I(()=>{"use strict";var zit=W(),ly=$e(),Fit=wr(),sy="Invalid number representation",Bit="Invalid radix",Nit=RangeError,tw=SyntaxError,jit=TypeError,Eae=parseInt,Uit=Math.pow,qae=/^[\d.a-z]+$/,$it=ly("".charAt),Vit=ly(qae.exec),Git=ly(1 .toString),Zit=ly("".slice),Hit=ly("".split);zit({target:"Number",stat:!0,forced:!0},{fromString:function(t,n){var u=1;if(typeof t!="string")throw new jit(sy);if(!t.length)throw new tw(sy);if($it(t,0)==="-"&&(u=-1,t=Zit(t,1),!t.length))throw new tw(sy);var c=n===void 0?10:Fit(n);if(c<2||c>36)throw new Nit(Bit);if(!Vit(qae,t))throw new tw(sy);var a=Hit(t,"."),_=Eae(a[0],c);if(a.length>1&&(_+=Eae(a[1],c)/Uit(c,a[1].length)),c===10&&Git(_,c)!==t)throw new tw(sy);return u*_}})});var Aae=I(()=>{"use strict";var Wit=W(),Kit=j1();Wit({target:"Number",stat:!0,forced:!0},{range:function(t,n,u){return new Kit(t,n,u,"number",0,1)}})});var Cae=I(()=>{"use strict";GA()});var iw=I((hkt,Oae)=>{"use strict";var Mae=Qt(),Yit=gu(),rw=Ti(),Xit=Ot(),Jit=Qc(),Qit=zt(),Rae="Object Iterator",ent=Mae.set,tnt=Mae.getterFor(Rae);Oae.exports=Yit(function(t,n){var u=Qit(t);ent(this,{type:Rae,mode:n,object:u,keys:Jit(u),index:0})},"Object",function(){for(var t=tnt(this),n=t.keys;;){if(n===null||t.index>=n.length)return t.object=t.keys=null,rw(void 0,!0);var u=n[t.index++],c=t.object;if(Xit(c,u)){switch(t.mode){case"keys":return rw(u,!1);case"values":return rw(c[u],!1)}return rw([u,c[u]],!1)}}})});var kae=I(()=>{"use strict";var rnt=W(),int=iw();rnt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new int(t,"entries")}})});var Dae=I(()=>{"use strict";var nnt=W(),ant=iw();nnt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new ant(t,"keys")}})});var Lae=I(()=>{"use strict";var ont=W(),snt=iw();ont({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new snt(t,"values")}})});var zae=I(()=>{"use strict";VA()});var Hae=I(()=>{"use strict";var lnt=W(),nw=et(),uy=dt(),unt=_u(),Fae=wt(),cnt=tt(),hnt=pn(),Bae=Rt(),fnt=Hn(),dnt=vt(),aw=Hr(),pnt=rr(),UO=ja(),Nae=Sr(),tp=dC(),mnt=_t(),jae=Qt(),vnt=mnt("observable"),$O="Observable",Uae="Subscription",$ae="SubscriptionObserver",VO=jae.getterFor,GO=jae.set,gnt=VO($O),Vae=VO(Uae),ow=VO($ae),Gae=function(e){this.observer=cnt(e),this.cleanup=null,this.subscriptionObserver=null};Gae.prototype={type:Uae,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){tp(t)}}},close:function(){if(!uy){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var ZO=function(e,t){var n=GO(this,new Gae(e)),u;uy||(this.closed=!1);try{(u=aw(e,"start"))&&nw(u,e,this)}catch(w){tp(w)}if(!n.isClosed()){var c=n.subscriptionObserver=new HO(n);try{var a=t(c),_=a;fnt(a)||(n.cleanup=Bae(a.unsubscribe)?function(){_.unsubscribe()}:Fae(a))}catch(w){c.error(w);return}n.isClosed()&&n.clean()}};ZO.prototype=UO({},{unsubscribe:function(){var t=Vae(this);t.isClosed()||(t.close(),t.clean())}});uy&&Nae(ZO.prototype,"closed",{configurable:!0,get:function(){return Vae(this).isClosed()}});var HO=function(e){GO(this,{type:$ae,subscriptionState:e}),uy||(this.closed=!1)};HO.prototype=UO({},{next:function(t){var n=ow(this).subscriptionState;if(!n.isClosed()){var u=n.observer;try{var c=aw(u,"next");c&&nw(c,u,t)}catch(a){tp(a)}}},error:function(t){var n=ow(this).subscriptionState;if(!n.isClosed()){var u=n.observer;n.close();try{var c=aw(u,"error");c?nw(c,u,t):tp(t)}catch(a){tp(a)}n.clean()}},complete:function(){var t=ow(this).subscriptionState;if(!t.isClosed()){var n=t.observer;t.close();try{var u=aw(n,"complete");u&&nw(u,n)}catch(c){tp(c)}t.clean()}}});uy&&Nae(HO.prototype,"closed",{configurable:!0,get:function(){return ow(this).subscriptionState.isClosed()}});var Zae=function(t){hnt(this,WO),GO(this,{type:$O,subscriber:Fae(t)})},WO=Zae.prototype;UO(WO,{subscribe:function(t){var n=arguments.length;return new ZO(Bae(t)?{next:t,error:n>1?arguments[1]:void 0,complete:n>2?arguments[2]:void 0}:dnt(t)?t:{},gnt(this).subscriber)}});pnt(WO,vnt,function(){return this});lnt({global:!0,constructor:!0,forced:!0},{Observable:Zae});unt($O)});var Kae=I(()=>{"use strict";var ynt=W(),_nt=bt(),xnt=et(),Wae=tt(),bnt=xo(),wnt=pu(),Snt=Hr(),Tnt=Lr(),Int=_t(),Ent=Int("observable");ynt({target:"Observable",stat:!0,forced:!0},{from:function(t){var n=bnt(this)?this:_nt("Observable"),u=Snt(Wae(t),Ent);if(u){var c=Wae(xnt(u,t));return c.constructor===n?c:new n(function(_){return c.subscribe(_)})}var a=wnt(t);return new n(function(_){Tnt(a,function(w,q){if(_.next(w),_.closed)return q()},{IS_ITERATOR:!0,INTERRUPTED:!0}),_.complete()})}})});var Xae=I(()=>{"use strict";var qnt=W(),Yae=bt(),Pnt=xo(),Ant=Yae("Array");qnt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=Pnt(this)?this:Yae("Observable"),n=arguments.length,u=Ant(n),c=0;c<n;)u[c]=arguments[c++];return new t(function(a){for(var _=0;_<n;_++)if(a.next(u[_]),a.closed)return;a.complete()})}})});var Jae=I(()=>{"use strict";Hae();Kae();Xae()});var Qae=I(()=>{"use strict";qC()});var eoe=I(()=>{"use strict";PC()});var toe=I(()=>{"use strict";RC()});var roe=I(()=>{"use strict";OC()});var os=I((Lkt,ooe)=>{"use strict";qb();E1();var aoe=bt(),Cnt=$e(),Mnt=js(),ioe=aoe("Map"),Rnt=aoe("WeakMap"),Ont=Cnt([].push),noe=Mnt("metadata"),KO=noe.store||(noe.store=new Rnt),cy=function(e,t,n){var u=KO.get(e);if(!u){if(!n)return;KO.set(e,u=new ioe)}var c=u.get(t);if(!c){if(!n)return;u.set(t,c=new ioe)}return c},knt=function(e,t,n){var u=cy(t,n,!1);return u===void 0?!1:u.has(e)},Dnt=function(e,t,n){var u=cy(t,n,!1);return u===void 0?void 0:u.get(e)},Lnt=function(e,t,n,u){cy(n,u,!0).set(e,t)},znt=function(e,t){var n=cy(e,t,!1),u=[];return n&&n.forEach(function(c,a){Ont(u,a)}),u},Fnt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};ooe.exports={store:KO,getMap:cy,has:knt,get:Dnt,set:Lnt,keys:znt,toKey:Fnt}});var loe=I(()=>{"use strict";var Bnt=W(),soe=os(),Nnt=tt(),jnt=soe.toKey,Unt=soe.set;Bnt({target:"Reflect",stat:!0},{defineMetadata:function(t,n,u){var c=arguments.length<4?void 0:jnt(arguments[3]);Unt(t,n,Nnt(u),c)}})});var coe=I(()=>{"use strict";var $nt=W(),YO=os(),Vnt=tt(),Gnt=YO.toKey,Znt=YO.getMap,uoe=YO.store;$nt({target:"Reflect",stat:!0},{deleteMetadata:function(t,n){var u=arguments.length<3?void 0:Gnt(arguments[2]),c=Znt(Vnt(n),u,!1);if(c===void 0||!c.delete(t))return!1;if(c.size)return!0;var a=uoe.get(n);return a.delete(u),!!a.size||uoe.delete(n)}})});var foe=I(()=>{"use strict";var Hnt=W(),XO=os(),Wnt=tt(),Knt=pi(),Ynt=XO.has,Xnt=XO.get,Jnt=XO.toKey,hoe=function(e,t,n){var u=Ynt(e,t,n);if(u)return Xnt(e,t,n);var c=Knt(t);return c!==null?hoe(e,c,n):void 0};Hnt({target:"Reflect",stat:!0},{getMetadata:function(t,n){var u=arguments.length<3?void 0:Jnt(arguments[2]);return hoe(t,Wnt(n),u)}})});var voe=I(()=>{"use strict";var Qnt=W(),doe=$e(),poe=os(),eat=tt(),tat=pi(),rat=k1(),iat=doe(rat),nat=doe([].concat),aat=poe.keys,oat=poe.toKey,moe=function(e,t){var n=aat(e,t),u=tat(e);if(u===null)return n;var c=moe(u,t);return c.length?n.length?iat(nat(n,c)):c:n};Qnt({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var n=arguments.length<2?void 0:oat(arguments[1]);return moe(eat(t),n)}})});var yoe=I(()=>{"use strict";var sat=W(),goe=os(),lat=tt(),uat=goe.get,cat=goe.toKey;sat({target:"Reflect",stat:!0},{getOwnMetadata:function(t,n){var u=arguments.length<3?void 0:cat(arguments[2]);return uat(t,lat(n),u)}})});var xoe=I(()=>{"use strict";var hat=W(),_oe=os(),fat=tt(),dat=_oe.keys,pat=_oe.toKey;hat({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var n=arguments.length<2?void 0:pat(arguments[1]);return dat(fat(t),n)}})});var Soe=I(()=>{"use strict";var mat=W(),boe=os(),vat=tt(),gat=pi(),yat=boe.has,_at=boe.toKey,woe=function(e,t,n){var u=yat(e,t,n);if(u)return!0;var c=gat(t);return c!==null?woe(e,c,n):!1};mat({target:"Reflect",stat:!0},{hasMetadata:function(t,n){var u=arguments.length<3?void 0:_at(arguments[2]);return woe(t,vat(n),u)}})});var Ioe=I(()=>{"use strict";var xat=W(),Toe=os(),bat=tt(),wat=Toe.has,Sat=Toe.toKey;xat({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,n){var u=arguments.length<3?void 0:Sat(arguments[2]);return wat(t,bat(n),u)}})});var qoe=I(()=>{"use strict";var Tat=W(),Eoe=os(),Iat=tt(),Eat=Eoe.toKey,qat=Eoe.set;Tat({target:"Reflect",stat:!0},{metadata:function(t,n){return function(c,a){qat(t,n,Iat(c),Eat(a))}}})});var Poe=I(()=>{"use strict";KC()});var Aoe=I(()=>{"use strict";var Pat=W(),Aat=Xi(),Cat=zi().add;Pat({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Aat(this),n=0,u=arguments.length;n<u;n++)Cat(t,arguments[n]);return t}})});var Coe=I(()=>{"use strict";var Mat=W(),Rat=Xi(),Oat=zi().remove;Mat({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Rat(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=Oat(t,arguments[c]),n=n&&u;return!!n}})});var Moe=I(()=>{"use strict";iM()});var Ooe=I((uDt,Roe)=>{"use strict";var kat=An(),Dat=Ot(),Lat=Hn(),zat=_t(),Fat=ah(),Bat=zat("iterator"),Nat=Object;Roe.exports=function(e){if(Lat(e))return!1;var t=Nat(e);return t[Bat]!==void 0||"@@iterator"in t||Dat(Fat,kat(t))}});var ku=I((cDt,Doe)=>{"use strict";var jat=bt(),koe=Rt(),Uat=Ooe(),$at=vt(),Vat=jat("Set"),Gat=function(e){return $at(e)&&typeof e.size=="number"&&koe(e.has)&&koe(e.keys)};Doe.exports=function(e){return Gat(e)?e:Uat(e)?new Vat(e):e}});var Loe=I(()=>{"use strict";var Zat=W(),Hat=et(),Wat=ku(),Kat=rM();Zat({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return Hat(Kat,this,Wat(t))}})});var zoe=I(()=>{"use strict";var Yat=W(),Xat=sr(),Jat=Xi(),Qat=Jn();Yat({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var n=Jat(this),u=Xat(t,arguments.length>1?arguments[1]:void 0);return Qat(n,function(c){if(!u(c,c,n))return!1},!0)!==!1}})});var Boe=I(()=>{"use strict";var eot=W(),tot=sr(),rot=Xi(),Foe=zi(),iot=Jn(),not=Foe.Set,aot=Foe.add;eot({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var n=rot(this),u=tot(t,arguments.length>1?arguments[1]:void 0),c=new not;return iot(n,function(a){u(a,a,n)&&aot(c,a)}),c}})});var Noe=I(()=>{"use strict";var oot=W(),sot=sr(),lot=Xi(),uot=Jn();oot({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var n=lot(this),u=sot(t,arguments.length>1?arguments[1]:void 0),c=uot(n,function(a){if(u(a,a,n))return{value:a}},!0);return c&&c.value}})});var Uoe=I(()=>{"use strict";var cot=W(),joe=zi(),hot=iy();cot({target:"Set",stat:!0,forced:!0},{from:hot(joe.Set,joe.add,!1)})});var $oe=I(()=>{"use strict";oM()});var Voe=I(()=>{"use strict";var fot=W(),dot=et(),pot=ku(),mot=aM();fot({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return dot(mot,this,pot(t))}})});var Goe=I(()=>{"use strict";lM()});var Zoe=I(()=>{"use strict";var vot=W(),got=et(),yot=ku(),_ot=sM();vot({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return got(_ot,this,yot(t))}})});var Hoe=I(()=>{"use strict";cM()});var Woe=I(()=>{"use strict";var xot=W(),bot=et(),wot=ku(),Sot=uM();xot({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return bot(Sot,this,wot(t))}})});var Koe=I(()=>{"use strict";fM()});var Yoe=I(()=>{"use strict";var Tot=W(),Iot=et(),Eot=ku(),qot=hM();Tot({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return Iot(qot,this,Eot(t))}})});var Joe=I(()=>{"use strict";var Pot=W(),Xoe=$e(),Aot=Xi(),Cot=Jn(),Mot=It(),Rot=Xoe([].join),Oot=Xoe([].push);Pot({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var n=Aot(this),u=t===void 0?",":Mot(t),c=[];return Cot(n,function(a){Oot(c,a)}),Rot(c,u)}})});var ese=I(()=>{"use strict";var kot=W(),Dot=sr(),Lot=Xi(),Qoe=zi(),zot=Jn(),Fot=Qoe.Set,Bot=Qoe.add;kot({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var n=Lot(this),u=Dot(t,arguments.length>1?arguments[1]:void 0),c=new Fot;return zot(n,function(a){Bot(c,u(a,a,n))}),c}})});var rse=I(()=>{"use strict";var Not=W(),tse=zi(),jot=ny();Not({target:"Set",stat:!0,forced:!0},{of:jot(tse.Set,tse.add,!1)})});var ise=I(()=>{"use strict";var Uot=W(),$ot=wt(),Vot=Xi(),Got=Jn(),Zot=TypeError;Uot({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=Vot(this),u=arguments.length<2,c=u?void 0:arguments[1];if($ot(t),Got(n,function(a){u?(u=!1,c=a):c=t(c,a,a,n)}),u)throw new Zot("Reduce of empty set with no initial value");return c}})});var nse=I(()=>{"use strict";var Hot=W(),Wot=sr(),Kot=Xi(),Yot=Jn();Hot({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var n=Kot(this),u=Wot(t,arguments.length>1?arguments[1]:void 0);return Yot(n,function(c){if(u(c,c,n))return!0},!0)===!0}})});var ase=I(()=>{"use strict";mM()});var ose=I(()=>{"use strict";var Xot=W(),Jot=et(),Qot=ku(),est=pM();Xot({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return Jot(est,this,Qot(t))}})});var sse=I(()=>{"use strict";gM()});var lse=I(()=>{"use strict";var tst=W(),rst=et(),ist=ku(),nst=vM();tst({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return rst(nst,this,ist(t))}})});var use=I(()=>{"use strict";var ast=W(),ost=mh().charAt,sst=mr(),lst=wr(),ust=It();ast({target:"String",proto:!0,forced:!0},{at:function(t){var n=ust(sst(this)),u=n.length,c=lst(t),a=c>=0?c:u+c;return a<0||a>=u?void 0:ost(n,a)}})});var JO=I((iLt,dse)=>{"use strict";var fse=$e(),cst=fi(),cse=It(),hst=Vt(),fst=TypeError,hse=fse([].push),dst=fse([].join);dse.exports=function(t){var n=cst(t),u=hst(n);if(!u)return"";for(var c=arguments.length,a=[],_=0;;){var w=n[_++];if(w===void 0)throw new fst("Incorrect template");if(hse(a,cse(w)),_===u)return dst(a,"");_<c&&hse(a,cse(arguments[_]))}}});var pse=I(()=>{"use strict";var pst=W(),mst=JO();pst({target:"String",stat:!0,forced:!0},{cooked:mst})});var _se=I(()=>{"use strict";var vst=W(),gst=gu(),mse=Ti(),yst=mr(),_st=It(),vse=Qt(),gse=mh(),xst=gse.codeAt,bst=gse.charAt,yse="String Iterator",wst=vse.set,Sst=vse.getterFor(yse),Tst=gst(function(t){wst(this,{type:yse,string:t,index:0})},"String",function(){var t=Sst(this),n=t.string,u=t.index,c;return u>=n.length?mse(void 0,!0):(c=bst(n,u),t.index+=c.length,mse({codePoint:xst(c,0),position:u},!1))});vst({target:"String",proto:!0,forced:!0},{codePoints:function(){return new Tst(_st(yst(this)))}})});var ss=I((lLt,xse)=>{"use strict";var sw=$e(),lw=WeakMap.prototype;xse.exports={WeakMap,set:sw(lw.set),get:sw(lw.get),has:sw(lw.has),remove:sw(lw.delete)}});var Ase=I((uLt,Pse)=>{"use strict";var Ist=bt(),uw=$e(),Est=String.fromCharCode,qst=Ist("String","fromCodePoint"),QO=uw("".charAt),Ese=uw("".charCodeAt),bse=uw("".indexOf),wse=uw("".slice),tk=48,qse=57,Sse=97,Pst=102,Tse=65,Ast=70,Ise=function(e,t){var n=Ese(e,t);return n>=tk&&n<=qse},ek=function(e,t,n){if(n>=e.length)return-1;for(var u=0;t<n;t++){var c=Cst(Ese(e,t));if(c===-1)return-1;u=u*16+c}return u},Cst=function(e){return e>=tk&&e<=qse?e-tk:e>=Sse&&e<=Pst?e-Sse+10:e>=Tse&&e<=Ast?e-Tse+10:-1};Pse.exports=function(e){for(var t="",n=0,u=0,c;(u=bse(e,"\\",u))>-1;){if(t+=wse(e,n,u),++u===e.length)return;var a=QO(e,u++);switch(a){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":u<e.length&&QO(e,u)===`
`&&++u;case`
`:case"\u2028":case"\u2029":break;case"0":if(Ise(e,u))return;t+="\0";break;case"x":if(c=ek(e,u,u+2),c===-1)return;u+=2,t+=Est(c);break;case"u":if(u<e.length&&QO(e,u)==="{"){var _=bse(e,"}",++u);if(_===-1)return;c=ek(e,u,_),u=_+1}else c=ek(e,u,u+4),u+=4;if(c===-1||c>1114111)return;t+=qst(c);break;default:if(Ise(a,0))return;t+=a}n=u}return t+wse(e,n)}});var Bse=I(()=>{"use strict";var Mst=Ys(),Rst=W(),Ost=Nv(),cw=$e(),kse=Yi(),Dse=tt(),kst=zt(),Dst=Rt(),Lst=Vt(),zst=dr().f,Fst=Kn(),hw=ss(),Bst=JO(),Nst=Ase(),Lse=uh(),rk=new hw.WeakMap,jst=hw.get,Ust=hw.has,$st=hw.set,ik=Array,hy=TypeError,Cse=Object.freeze||Object,Vst=Object.isFrozen,Gst=Math.min,Mse=cw("".charAt),zse=cw("".slice),Zst=cw("".split),Rse=cw(/./.exec),Hst=/([\n\u2028\u2029]|\r\n?)/g,Wst=RegExp("^["+Lse+"]*"),Kst=RegExp("[^"+Lse+"]"),Ose="Invalid tag",Yst="Invalid opening line",Xst="Invalid closing line",Jst=function(e){var t=e.raw;if(Mst&&!Vst(t))throw new hy("Raw template should be frozen");if(Ust(rk,t))return jst(rk,t);var n=Qst(t),u=tlt(n);return zst(u,"raw",{value:Cse(n)}),Cse(u),$st(rk,t,u),u},Qst=function(e){var t=kst(e),n=Lst(t),u=ik(n),c=ik(n),a=0,_,w,q,M;if(!n)throw new hy(Ose);for(;a<n;a++){var O=t[a];if(typeof O=="string")u[a]=Zst(O,Hst);else throw new hy(Ose)}for(a=0;a<n;a++){var k=a+1===n;if(_=u[a],a===0){if(_.length===1||_[0].length>0)throw new hy(Yst);_[1]=""}if(k){if(_.length===1||Rse(Kst,_[_.length-1]))throw new hy(Xst);_[_.length-2]="",_[_.length-1]=""}for(var $=2;$<_.length;$+=2){var fe=_[$],Pe=$+1===_.length&&!k,Se=Rse(Wst,fe)[0];if(!Pe&&Se.length===fe.length){_[$]="";continue}w=elt(Se,w)}}var ne=w?w.length:0;for(a=0;a<n;a++){for(_=u[a],q=_[0],M=1;M<_.length;M+=2)q+=_[M]+zse(_[M+1],ne);c[a]=q}return c},elt=function(e,t){if(t===void 0||e===t)return e;for(var n=0,u=Gst(e.length,t.length);n<u&&Mse(e,n)===Mse(t,n);n++);return zse(e,0,n)},tlt=function(e){for(var t=0,n=e.length,u=ik(n);t<n;t++)u[t]=Nst(e[t]);return u},Fse=function(e){return Ost(function(t){var n=Fst(arguments);return n[0]=Jst(Dse(t)),kse(e,this,n)},"")},rlt=Fse(Bst);Rst({target:"String",stat:!0,forced:!0},{dedent:function(t){return Dse(t),Dst(t)?Fse(t):kse(rlt,this,arguments)}})});var Nse=I(()=>{"use strict";xM()});var jse=I(()=>{"use strict";PM()});var Use=I(()=>{"use strict";FM()});var $se=I(()=>{"use strict";GM()});var Vse=I(()=>{"use strict";var ilt=Qe(),nlt=Dr(),alt=dr().f,olt=ki().f,nk=ilt.Symbol;nlt("asyncDispose");nk&&(fy=olt(nk,"asyncDispose"),fy.enumerable&&fy.configurable&&fy.writable&&alt(nk,"asyncDispose",{value:fy.value,enumerable:!1,configurable:!1,writable:!1}));var fy});var Gse=I(()=>{"use strict";var slt=Dr();slt("customMatcher")});var Zse=I(()=>{"use strict";var llt=Qe(),ult=Dr(),clt=dr().f,hlt=ki().f,ak=llt.Symbol;ult("dispose");ak&&(dy=hlt(ak,"dispose"),dy.enumerable&&dy.configurable&&dy.writable&&clt(ak,"dispose",{value:dy.value,enumerable:!1,configurable:!1,writable:!1}));var dy});var sk=I((ELt,Hse)=>{"use strict";var flt=bt(),dlt=$e(),ok=flt("Symbol"),plt=ok.keyFor,mlt=dlt(ok.prototype.valueOf);Hse.exports=ok.isRegisteredSymbol||function(t){try{return plt(mlt(t))!==void 0}catch(n){return!1}}});var Wse=I(()=>{"use strict";var vlt=W(),glt=sk();vlt({target:"Symbol",stat:!0},{isRegisteredSymbol:glt})});var Kse=I(()=>{"use strict";var ylt=W(),_lt=sk();ylt({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:_lt})});var ck=I((MLt,tle)=>{"use strict";var xlt=js(),Qse=bt(),blt=$e(),wlt=Ns(),Slt=_t(),dw=Qse("Symbol"),Yse=dw.isWellKnownSymbol,ele=Qse("Object","getOwnPropertyNames"),Tlt=blt(dw.prototype.valueOf),Xse=xlt("wks");for(fw=0,lk=ele(dw),Jse=lk.length;fw<Jse;fw++)try{uk=lk[fw],wlt(dw[uk])&&Slt(uk)}catch(e){}var uk,fw,lk,Jse;tle.exports=function(t){if(Yse&&Yse(t))return!0;try{for(var n=Tlt(t),u=0,c=ele(Xse),a=c.length;u<a;u++)if(Xse[c[u]]==n)return!0}catch(_){}return!1}});var rle=I(()=>{"use strict";var Ilt=W(),Elt=ck();Ilt({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:Elt})});var ile=I(()=>{"use strict";var qlt=W(),Plt=ck();qlt({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:Plt})});var nle=I(()=>{"use strict";var Alt=Dr();Alt("matcher")});var ale=I(()=>{"use strict";var Clt=Dr();Clt("metadata")});var ole=I(()=>{"use strict";var Mlt=Dr();Mlt("metadataKey")});var sle=I(()=>{"use strict";var Rlt=Dr();Rlt("observable")});var lle=I(()=>{"use strict";var Olt=Dr();Olt("patternMatch")});var ule=I(()=>{"use strict";var klt=Dr();klt("replaceAll")});var hle=I(()=>{"use strict";var Dlt=bt(),Llt=Sg(),zlt=zR(),cle=kt(),Flt=Gs(),Blt=cle.aTypedArrayConstructor,Nlt=cle.exportTypedArrayStaticMethod;Nlt("fromAsync",function(t){var n=this,u=arguments.length,c=u>1?arguments[1]:void 0,a=u>2?arguments[2]:void 0;return new(Dlt("Promise"))(function(_){Llt(n),_(zlt(t,c,a))}).then(function(_){return Flt(Blt(n),_)})},!0)});var fle=I(()=>{"use strict";oR()});var ple=I(()=>{"use strict";var dle=kt(),jlt=Kr().filterReject,Ult=d1(),$lt=dle.aTypedArray,Vlt=dle.exportTypedArrayMethod;Vlt("filterOut",function(t){var n=jlt($lt(this),t,arguments.length>1?arguments[1]:void 0);return Ult(this,n)},!0)});var vle=I(()=>{"use strict";var mle=kt(),Glt=Kr().filterReject,Zlt=d1(),Hlt=mle.aTypedArray,Wlt=mle.exportTypedArrayMethod;Wlt("filterReject",function(t){var n=Glt(Hlt(this),t,arguments.length>1?arguments[1]:void 0);return Zlt(this,n)},!0)});var gle=I(()=>{"use strict";sR()});var yle=I(()=>{"use strict";lR()});var _le=I(()=>{"use strict";var hk=kt(),Klt=R1(),Ylt=hk.aTypedArray,Xlt=hk.getTypedArrayConstructor,Jlt=hk.exportTypedArrayMethod;Jlt("groupBy",function(t){var n=arguments.length>1?arguments[1]:void 0;return Klt(Ylt(this),t,n,Xlt)},!0)});var xle=I(()=>{"use strict";wR()});var ble=I(()=>{"use strict";SR()});var wle=I(()=>{"use strict";var fk=kt(),Qlt=Vt(),eut=l1(),tut=yo(),rut=Ng(),iut=wr(),nut=fk.aTypedArray,aut=fk.getTypedArrayConstructor,out=fk.exportTypedArrayMethod,sut=Math.max,lut=Math.min;out("toSpliced",function(t,n){var u=nut(this),c=aut(u),a=Qlt(u),_=tut(t,a),w=arguments.length,q=0,M,O,k,$,fe,Pe,Se;if(w===0)M=O=0;else if(w===1)M=0,O=a-_;else if(O=lut(sut(iut(n),0),a-_),M=w-2,M){$=new c(M),k=eut($);for(var ne=2;ne<w;ne++)fe=arguments[ne],$[ne-2]=k?rut(fe):+fe}for(Pe=a+M-O,Se=new c(Pe);q<_;q++)Se[q]=u[q];for(;q<_+M;q++)Se[q]=$[q-_];for(;q<Pe;q++)Se[q]=u[q+O-M];return Se},!0)});var Sle=I(()=>{"use strict";var uut=$e(),dk=kt(),cut=Gs(),hut=k1(),fut=dk.aTypedArray,dut=dk.getTypedArrayConstructor,put=dk.exportTypedArrayMethod,mut=uut(hut);put("uniqueBy",function(t){return fut(this),cut(dut(this),mut(this,t))},!0)});var Tle=I(()=>{"use strict";IR()});var pk=I((yzt,Ile)=>{"use strict";var vut=vt(),gut=String,yut=TypeError;Ile.exports=function(e){if(e===void 0||vut(e))return e;throw new yut(gut(e)+" is not an object or undefined")}});var py=I((_zt,Cle)=>{"use strict";var Ale="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ele=Ale+"+/",qle=Ale+"-_",Ple=function(e){for(var t={},n=0;n<64;n++)t[e.charAt(n)]=n;return t};Cle.exports={i2c:Ele,c2i:Ple(Ele),i2cUrl:qle,c2iUrl:Ple(qle)}});var mk=I((xzt,Mle)=>{"use strict";var _ut=TypeError;Mle.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new _ut("Incorrect `alphabet` option")}});var _k=I((bzt,kle)=>{"use strict";var Rle=Qe(),xut=$e(),but=pk(),wut=Dg(),Sut=Ot(),Ole=py(),Tut=mk(),Iut=Td(),Eut=Ole.c2i,qut=Ole.c2iUrl,Du=Rle.SyntaxError,Put=Rle.TypeError,bh=xut("".charAt),vk=function(e,t){for(var n=e.length;t<n;t++){var u=bh(e,t);if(u!==" "&&u!=="\t"&&u!==`
`&&u!=="\f"&&u!=="\r")break}return t},gk=function(e,t,n){var u=e.length;u<4&&(e+=u===2?"AA":"A");var c=(t[bh(e,0)]<<18)+(t[bh(e,1)]<<12)+(t[bh(e,2)]<<6)+t[bh(e,3)],a=[c>>16&255,c>>8&255,c&255];if(u===2){if(n&&a[1]!==0)throw new Du("Extra bits");return[a[0]]}if(u===3){if(n&&a[2]!==0)throw new Du("Extra bits");return[a[0],a[1]]}return a},yk=function(e,t,n){for(var u=t.length,c=0;c<u;c++)e[n+c]=t[c];return n+u};kle.exports=function(e,t,n,u){wut(e),but(t);var c=Tut(t)==="base64"?Eut:qut,a=t?t.lastChunkHandling:void 0;if(a===void 0&&(a="loose"),a!=="loose"&&a!=="strict"&&a!=="stop-before-partial")throw new Put("Incorrect `lastChunkHandling` option");n&&Iut(n.buffer);var _=n||[],w=0,q=0,M="",O=0;if(u)for(;;){if(O=vk(e,O),O===e.length){if(M.length>0){if(a==="stop-before-partial")break;if(a==="loose"){if(M.length===1)throw new Du("Malformed padding: exactly one additional character");w=yk(_,gk(M,c,!1),w)}else throw new Du("Missing padding")}q=e.length;break}var k=bh(e,O);if(++O,k==="="){if(M.length<2)throw new Du("Padding is too early");if(O=vk(e,O),M.length===2){if(O===e.length){if(a==="stop-before-partial")break;throw new Du("Malformed padding: only one =")}bh(e,O)==="="&&(++O,O=vk(e,O))}if(O<e.length)throw new Du("Unexpected character after padding");w=yk(_,gk(M,c,a==="strict"),w),q=e.length;break}if(!Sut(c,k))throw new Du("Unexpected character");var $=u-w;if($===1&&M.length===2||$===2&&M.length===3||(M+=k,M.length===4&&(w=yk(_,gk(M,c,!1),w),M="",q=O,w===u)))break}return{bytes:_,read:q,written:w}}});var Lle=I(()=>{"use strict";var Aut=W(),Cut=Qe(),Mut=Gs(),Rut=_k(),Dle=Cut.Uint8Array;Dle&&Aut({target:"Uint8Array",stat:!0},{fromBase64:function(t){var n=Rut(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return Mut(Dle,n.bytes)}})});var bk=I((Tzt,Nle)=>{"use strict";var xk=Qe(),Fle=$e(),Out=xk.Uint8Array,zle=xk.SyntaxError,kut=xk.parseInt,Dut=Math.min,Ble=/[^\da-f]/i,Lut=Fle(Ble.exec),zut=Fle("".slice);Nle.exports=function(e,t){var n=e.length;if(n%2!==0)throw new zle("String should be an even number of characters");for(var u=t?Dut(t.length,n/2):n/2,c=t||new Out(u),a=0,_=0;_<u;){var w=zut(e,a,a+=2);if(Lut(Ble,w))throw new zle("String should only contain hex characters");c[_++]=kut(w,16)}return{bytes:c,read:a}}});var jle=I(()=>{"use strict";var Fut=W(),But=Qe(),Nut=Dg(),jut=bk();But.Uint8Array&&Fut({target:"Uint8Array",stat:!0},{fromHex:function(t){return jut(Nut(t)).bytes}})});var my=I((qzt,Ule)=>{"use strict";var Uut=An(),$ut=TypeError;Ule.exports=function(e){if(Uut(e)==="Uint8Array")return e;throw new $ut("Argument is not an Uint8Array")}});var $le=I(()=>{"use strict";var Vut=W(),Gut=Qe(),Zut=_k(),Hut=my(),pw=Gut.Uint8Array,Wut=!pw||!pw.prototype.setFromBase64||!function(){var e=new pw([255,255,255,255,255]);try{e.setFromBase64("MjYyZg===")}catch(t){return e[0]===50&&e[1]===54&&e[2]===50&&e[3]===255&&e[4]===255}}();pw&&Vut({target:"Uint8Array",proto:!0,forced:Wut},{setFromBase64:function(t){Hut(this);var n=Zut(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:n.read,written:n.written}}})});var Vle=I(()=>{"use strict";var Kut=W(),Yut=Qe(),Xut=Dg(),Jut=my(),Qut=Td(),ect=bk();Yut.Uint8Array&&Kut({target:"Uint8Array",proto:!0},{setFromHex:function(t){Jut(this),Xut(t),Qut(this.buffer);var n=ect(t,this).read;return{read:n,written:n/2}}})});var Zle=I(()=>{"use strict";var tct=W(),rct=Qe(),ict=$e(),nct=pk(),act=my(),oct=Td(),Gle=py(),sct=mk(),lct=Gle.i2c,uct=Gle.i2cUrl,cct=ict("".charAt);rct.Uint8Array&&tct({target:"Uint8Array",proto:!0},{toBase64:function(){var t=act(this),n=arguments.length?nct(arguments[0]):void 0,u=sct(n)==="base64"?lct:uct,c=!!n&&!!n.omitPadding;oct(this.buffer);for(var a="",_=0,w=t.length,q,M=function(O){return cct(u,q>>6*O&63)};_+2<w;_+=3)q=(t[_]<<16)+(t[_+1]<<8)+t[_+2],a+=M(3)+M(2)+M(1)+M(0);return _+2===w?(q=(t[_]<<16)+(t[_+1]<<8),a+=M(3)+M(2)+M(1)+(c?"":"=")):_+1===w&&(q=t[_]<<16,a+=M(3)+M(2)+(c?"":"==")),a}})});var Hle=I(()=>{"use strict";var hct=W(),fct=Qe(),dct=$e(),pct=my(),mct=Td(),vct=dct(1 .toString);fct.Uint8Array&&hct({target:"Uint8Array",proto:!0},{toHex:function(){pct(this),mct(this.buffer);for(var t="",n=0,u=this.length;n<u;n++){var c=vct(this[n],16);t+=c.length===1?"0"+c:c}return t}})});var vy=I((Lzt,Wle)=>{"use strict";var gct=ss().has;Wle.exports=function(e){return gct(e),e}});var Kle=I(()=>{"use strict";var yct=W(),_ct=vy(),xct=ss().remove;yct({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=_ct(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=xct(t,arguments[c]),n=n&&u;return!!n}})});var Xle=I(()=>{"use strict";var bct=W(),Yle=ss(),wct=iy();bct({target:"WeakMap",stat:!0,forced:!0},{from:wct(Yle.WeakMap,Yle.set,!0)})});var Qle=I(()=>{"use strict";var Sct=W(),Jle=ss(),Tct=ny();Sct({target:"WeakMap",stat:!0,forced:!0},{of:Tct(Jle.WeakMap,Jle.set,!0)})});var tue=I(()=>{"use strict";var Ict=W(),Ect=vy(),wk=ss(),qct=wk.get,Pct=wk.has,eue=wk.set;Ict({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=Ect(this),c,a;return Pct(u,t)?(c=qct(u,t),"update"in n&&(c=n.update(c,t,u),eue(u,t,c)),c):(a=n.insert(t,u),eue(u,t,a),a)}})});var rue=I(()=>{"use strict";var Act=W(),Cct=vy(),Sk=ss(),Mct=Sk.get,Rct=Sk.has,Oct=Sk.set;Act({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,n){return Rct(Cct(this),t)?Mct(this,t):(Oct(this,t,n),n)}})});var aue=I((Hzt,nue)=>{"use strict";var Tk=ss(),iue=new Tk.WeakMap,kct=Tk.set,Dct=Tk.remove;nue.exports=function(e){return kct(iue,e,1),Dct(iue,e),e}});var oue=I(()=>{"use strict";var Lct=W(),zct=wt(),Fct=vy(),Bct=aue(),Ik=ss(),Nct=Ik.get,jct=Ik.has,Uct=Ik.set;Lct({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,n){if(Fct(this),Bct(t),zct(n),jct(this,t))return Nct(this,t);var u=n(t);return Uct(this,t,u),u}})});var sue=I(()=>{"use strict";var $ct=W(),Vct=Q1();$ct({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Vct})});var rp=I((Jzt,lue)=>{"use strict";var Ek=$e(),qk=WeakSet.prototype;lue.exports={WeakSet,add:Ek(qk.add),has:Ek(qk.has),remove:Ek(qk.delete)}});var Pk=I((Qzt,uue)=>{"use strict";var Gct=rp().has;uue.exports=function(e){return Gct(e),e}});var cue=I(()=>{"use strict";var Zct=W(),Hct=Pk(),Wct=rp().add;Zct({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Hct(this),n=0,u=arguments.length;n<u;n++)Wct(t,arguments[n]);return t}})});var hue=I(()=>{"use strict";var Kct=W(),Yct=Pk(),Xct=rp().remove;Kct({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=Yct(this),n=!0,u,c=0,a=arguments.length;c<a;c++)u=Xct(t,arguments[c]),n=n&&u;return!!n}})});var due=I(()=>{"use strict";var Jct=W(),fue=rp(),Qct=iy();Jct({target:"WeakSet",stat:!0,forced:!0},{from:Qct(fue.WeakSet,fue.add,!1)})});var mue=I(()=>{"use strict";var eht=W(),pue=rp(),tht=ny();eht({target:"WeakSet",stat:!0,forced:!0},{of:tht(pue.WeakSet,pue.add,!1)})});var wue=I(()=>{"use strict";var rht=W(),iht=Qe(),yue=bt(),Ak=$e(),nht=et(),mw=He(),aht=It(),oht=va(),vue=py().c2i,_ue=/[^\d+/a-z]/i,sht=/[\t\n\f\r ]+/g,lht=/[=]{1,2}$/,wh=yue("atob"),uht=String.fromCharCode,cht=Ak("".charAt),gue=Ak("".replace),hht=Ak(_ue.exec),ip=!!wh&&!mw(function(){return wh("aGk=")!=="hi"}),xue=ip&&mw(function(){return wh(" ")!==""}),bue=ip&&!mw(function(){wh("a")}),fht=ip&&!mw(function(){wh()}),dht=ip&&wh.length!==1,pht=!ip||xue||bue||fht||dht;rht({global:!0,bind:!0,enumerable:!0,forced:pht},{atob:function(t){if(oht(arguments.length,1),ip&&!xue&&!bue)return nht(wh,iht,t);var n=gue(aht(t),sht,""),u="",c=0,a=0,_,w,q;if(n.length%4===0&&(n=gue(n,lht,"")),_=n.length,_%4===1||hht(_ue,n))throw new(yue("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;c<_;)w=cht(n,c++),q=a%4?q*64+vue[w]:vue[w],a++%4&&(u+=uht(255&q>>(-2*a&6)));return u}})});var que=I(()=>{"use strict";var mht=W(),vht=Qe(),Iue=bt(),Eue=$e(),ght=et(),Ck=He(),Sue=It(),yht=va(),_ht=py().i2c,np=Iue("btoa"),Tue=Eue("".charAt),xht=Eue("".charCodeAt),gy=!!np&&!Ck(function(){return np("hi")!=="aGk="}),bht=gy&&!Ck(function(){np()}),wht=gy&&Ck(function(){return np(null)!=="bnVsbA=="}),Sht=gy&&np.length!==1;mht({global:!0,bind:!0,enumerable:!0,forced:!gy||bht||wht||Sht},{btoa:function(t){if(yht(arguments.length,1),gy)return ght(np,vht,Sue(t));for(var n=Sue(t),u="",c=0,a=_ht,_,w;Tue(n,c)||(a="=",c%1);){if(w=xht(n,c+=3/4),w>255)throw new(Iue("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");_=_<<8|w,u+=Tue(a,63&_>>8-c%1*8)}return u}})});var Mk=I((fFt,Pue)=>{"use strict";Pue.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var Ok=I((dFt,Cue)=>{"use strict";var Tht=Lv(),Rk=Tht("span").classList,Aue=Rk&&Rk.constructor&&Rk.constructor.prototype;Cue.exports=Aue===Object.prototype?void 0:Aue});var kue=I(()=>{"use strict";var Mue=Qe(),Rue=Mk(),Iht=Ok(),kk=p2(),Eht=di(),Oue=function(e){if(e&&e.forEach!==kk)try{Eht(e,"forEach",kk)}catch(t){e.forEach=kk}};for(vw in Rue)Rue[vw]&&Oue(Mue[vw]&&Mue[vw].prototype);var vw;Oue(Iht)});var Bue=I(()=>{"use strict";var Due=Qe(),zue=Mk(),qht=Ok(),yy=rg(),Lue=di(),Pht=Cn(),Aht=_t(),Dk=Aht("iterator"),Lk=yy.values,Fue=function(e,t){if(e){if(e[Dk]!==Lk)try{Lue(e,Dk,Lk)}catch(u){e[Dk]=Lk}if(Pht(e,t,!0),zue[t]){for(var n in yy)if(e[n]!==yy[n])try{Lue(e,n,yy[n])}catch(u){e[n]=yy[n]}}}};for(gw in zue)Fue(Due[gw]&&Due[gw].prototype,gw);var gw;Fue(qht,"DOMTokenList")});var zk=I((yFt,Nue)=>{"use strict";Nue.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var Xue=I(()=>{"use strict";var Cht=W(),xw=bt(),Mht=hP(),$k=He(),Rht=Wr(),Vk=Zn(),bw=dr().f,Oht=rr(),yw=Sr(),_w=Ot(),kht=pn(),Dht=tt(),$ue=Xq(),jue=ih(),ap=zk(),Lht=jx(),Vue=Qt(),Gk=dt(),Gue=Kt(),op="DOMException",Uk="DATA_CLONE_ERR",Sw=xw("Error"),Qs=xw(op)||function(){try{var e=xw("MessageChannel")||Mht("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===Uk&&t.code===25)return t.constructor}}(),zht=Qs&&Qs.prototype,Zue=Sw.prototype,Fht=Vue.set,Bht=Vue.getterFor(op),Nht="stack"in new Sw(op),Hue=function(e){return _w(ap,e)&&ap[e].m?ap[e].c:0},Zk=function(){kht(this,xy);var t=arguments.length,n=jue(t<1?void 0:arguments[0]),u=jue(t<2?void 0:arguments[1],"Error"),c=Hue(u);if(Fht(this,{type:op,name:u,message:n,code:c}),Gk||(this.name=u,this.message=n,this.code=c),Nht){var a=new Sw(n);a.name=op,bw(this,"stack",Vk(1,Lht(a.stack,1)))}},xy=Zk.prototype=Rht(Zue),Wue=function(e){return{enumerable:!0,configurable:!0,get:e}},Fk=function(e){return Wue(function(){return Bht(this)[e]})};Gk&&(yw(xy,"code",Fk("code")),yw(xy,"message",Fk("message")),yw(xy,"name",Fk("name")));bw(xy,"constructor",Vk(1,Zk));var Tw=$k(function(){return!(new Qs instanceof Sw)}),Kue=Tw||$k(function(){return Zue.toString!==$ue||String(new Qs(1,2))!=="2: 1"}),Yue=Tw||$k(function(){return new Qs(1,"DataCloneError").code!==25}),jht=Tw||Qs[Uk]!==25||zht[Uk]!==25,Uue=Gue?Kue||Yue||jht:Tw;Cht({global:!0,constructor:!0,forced:Uue},{DOMException:Uue?Zk:Qs});var by=xw(op),ww=by.prototype;Kue&&(Gue||Qs===by)&&Oht(ww,"toString",$ue);Yue&&Gk&&Qs===by&&yw(ww,"code",Wue(function(){return Hue(Dht(this).name)}));for(Bk in ap)_w(ap,Bk)&&(Nk=ap[Bk],_y=Nk.s,jk=Vk(6,Nk.c),_w(by,_y)||bw(by,_y,jk),_w(ww,_y)||bw(ww,_y,jk));var Nk,_y,jk,Bk});var nce=I(()=>{"use strict";var Uht=W(),$ht=Qe(),eD=bt(),Jk=Zn(),Qk=dr().f,Jue=Ot(),Vht=pn(),Ght=du(),Que=ih(),Hk=zk(),Zht=jx(),Hht=dt(),rce=Kt(),Sy="DOMException",ice=eD("Error"),Ty=eD(Sy),tD=function(){Vht(this,Wht);var t=arguments.length,n=Que(t<1?void 0:arguments[0]),u=Que(t<2?void 0:arguments[1],"Error"),c=new Ty(n,u),a=new ice(n);return a.name=Sy,Qk(c,"stack",Jk(1,Zht(a.stack,1))),Ght(c,this,tD),c},Wht=tD.prototype=Ty.prototype,Kht="stack"in new ice(Sy),Yht="stack"in new Ty(1,2),Wk=Ty&&Hht&&Object.getOwnPropertyDescriptor($ht,Sy),Xht=!!Wk&&!(Wk.writable&&Wk.configurable),ece=Kht&&!Xht&&!Yht;Uht({global:!0,constructor:!0,forced:rce||ece},{DOMException:ece?tD:Ty});var wy=eD(Sy),tce=wy.prototype;if(tce.constructor!==wy){rce||Qk(tce,"constructor",Jk(1,wy));for(Kk in Hk)Jue(Hk,Kk)&&(Yk=Hk[Kk],Xk=Yk.s,Jue(wy,Xk)||Qk(wy,Xk,Jk(6,Yk.c)))}var Yk,Xk,Kk});var oce=I(()=>{"use strict";var Jht=bt(),Qht=Cn(),ace="DOMException";Qht(Jht(ace),ace)});var lce=I(()=>{"use strict";var eft=W(),tft=Qe(),sce=qg().clear;eft({global:!0,bind:!0,enumerable:!0,forced:tft.clearImmediate!==sce},{clearImmediate:sce})});var Iw=I((qFt,cce)=>{"use strict";var uce=Qe(),rft=Yi(),ift=Rt(),nft=ag(),aft=po(),oft=Kn(),sft=va(),lft=uce.Function,uft=/MSIE .\./.test(aft)||nft==="BUN"&&function(){var e=uce.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();cce.exports=function(e,t){var n=t?2:1;return uft?function(u,c){var a=sft(arguments.length,1)>n,_=ift(u)?u:lft(u),w=a?oft(arguments,n):[],q=a?function(){rft(_,this,w)}:_;return t?e(q,c):e(q)}:e}});var pce=I(()=>{"use strict";var cft=W(),dce=Qe(),hce=qg().set,hft=Iw(),fce=dce.setImmediate?hft(hce,!1):hce;cft({global:!0,bind:!0,enumerable:!0,forced:dce.setImmediate!==fce},{setImmediate:fce})});var mce=I(()=>{"use strict";lce();pce()});var vce=I(()=>{"use strict";var fft=W(),dft=Qe(),pft=fC(),mft=wt(),vft=va(),gft=He(),yft=dt(),_ft=gft(function(){return yft&&Object.getOwnPropertyDescriptor(dft,"queueMicrotask").value.length!==1});fft({global:!0,enumerable:!0,dontCallGetSet:!0,forced:_ft},{queueMicrotask:function(t){vft(arguments.length,1),pft(mft(t))}})});var yce=I(()=>{"use strict";var xft=W(),Lu=Qe(),bft=Sr(),wft=dt(),Sft=TypeError,Tft=Object.defineProperty,gce=Lu.self!==Lu;try{wft?(Ew=Object.getOwnPropertyDescriptor(Lu,"self"),(gce||!Ew||!Ew.get||!Ew.enumerable)&&bft(Lu,"self",{get:function(){return Lu},set:function(t){if(this!==Lu)throw new Sft("Illegal invocation");Tft(Lu,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):xft({global:!0,simple:!0,forced:gce},{self:Lu})}catch(e){}var Ew});var Ace=I(()=>{"use strict";var Ift=Kt(),Eft=W(),tn=Qe(),Ey=bt(),Py=$e(),sD=He(),qft=lu(),lp=Rt(),Pft=xo(),Aft=Hn(),Mw=vt(),Cft=Ns(),Mft=Lr(),bce=tt(),Aw=An(),Rft=Ot(),Oft=Ba(),rD=di(),qw=Vt(),kft=va(),Dft=Fd(),Rw=Ii(),lD=zi(),Lft=Jn(),_ce=yP(),zft=Hq(),uD=yb(),Iy=tn.Object,Fft=tn.Array,wce=tn.Date,Sce=tn.Error,Bft=tn.TypeError,Nft=tn.PerformanceMark,Sh=Ey("DOMException"),aD=Rw.Map,cD=Rw.has,Tce=Rw.get,Cw=Rw.set,Ice=lD.Set,Ece=lD.add,jft=lD.has,Uft=Ey("Object","keys"),$ft=Py([].push),Vft=Py((!0).valueOf),Gft=Py(1 .valueOf),Zft=Py("".valueOf),Hft=Py(wce.prototype.getTime),oD=qft("structuredClone"),qy="DataCloneError",Pw="Transferring",qce=function(e){return!sD(function(){var t=new tn.Set([7]),n=e(t),u=e(Iy(7));return n===t||!n.has(7)||!Mw(u)||+u!=7})&&e},xce=function(e,t){return!sD(function(){var n=new t,u=e({a:n,b:n});return!(u&&u.a===u.b&&u.a instanceof t&&u.a.stack===n.stack)})},Wft=function(e){return!sD(function(){var t=e(new tn.AggregateError([1],oD,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==oD||t.cause!==3})},sp=tn.structuredClone,Kft=Ift||!xce(sp,Sce)||!xce(sp,Sh)||!Wft(sp),Yft=!sp&&qce(function(e){return new Nft(oD,{detail:e}).detail}),el=qce(sp)||Yft,iD=function(e){throw new Sh("Uncloneable type: "+e,qy)},ta=function(e,t){throw new Sh((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",qy)},nD=function(e,t){return el||ta(t),el(e)},Xft=function(){var e;try{e=new tn.DataTransfer}catch(t){try{e=new tn.ClipboardEvent("").clipboardData}catch(n){}}return e&&e.items&&e.files?e:null},Pce=function(e,t,n){if(cD(t,e))return Tce(t,e);var u=n||Aw(e),c,a,_,w,q,M;if(u==="SharedArrayBuffer")el?c=el(e):c=e;else{var O=tn.DataView;!O&&!lp(e.slice)&&ta("ArrayBuffer");try{if(lp(e.slice)&&!e.resizable)c=e.slice(0);else for(a=e.byteLength,_=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,c=new ArrayBuffer(a,_),w=new O(e),q=new O(c),M=0;M<a;M++)q.setUint8(M,w.getUint8(M))}catch(k){throw new Sh("ArrayBuffer is detached",qy)}}return Cw(t,e,c),c},Jft=function(e,t,n,u,c){var a=tn[t];return Mw(a)||ta(t),new a(Pce(e.buffer,c),n,u)},en=function(e,t){if(Cft(e)&&iD("Symbol"),!Mw(e))return e;if(t){if(cD(t,e))return Tce(t,e)}else t=new aD;var n=Aw(e),u,c,a,_,w,q,M,O;switch(n){case"Array":a=Fft(qw(e));break;case"Object":a={};break;case"Map":a=new aD;break;case"Set":a=new Ice;break;case"RegExp":a=new RegExp(e.source,Dft(e));break;case"Error":switch(c=e.name,c){case"AggregateError":a=new(Ey(c))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":a=new(Ey(c));break;case"CompileError":case"LinkError":case"RuntimeError":a=new(Ey("WebAssembly",c));break;default:a=new Sce}break;case"DOMException":a=new Sh(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":a=Pce(e,t,n);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":q=n==="DataView"?e.byteLength:e.length,a=Jft(e,n,e.byteOffset,q,t);break;case"DOMQuad":try{a=new DOMQuad(en(e.p1,t),en(e.p2,t),en(e.p3,t),en(e.p4,t))}catch(k){a=nD(e,n)}break;case"File":if(el)try{a=el(e),Aw(a)!==n&&(a=void 0)}catch(k){}if(!a)try{a=new File([e],e.name,e)}catch(k){}a||ta(n);break;case"FileList":if(_=Xft(),_){for(w=0,q=qw(e);w<q;w++)_.items.add(en(e[w],t));a=_.files}else a=nD(e,n);break;case"ImageData":try{a=new ImageData(en(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(k){a=nD(e,n)}break;default:if(el)a=el(e);else switch(n){case"BigInt":a=Iy(e.valueOf());break;case"Boolean":a=Iy(Vft(e));break;case"Number":a=Iy(Gft(e));break;case"String":a=Iy(Zft(e));break;case"Date":a=new wce(Hft(e));break;case"Blob":try{a=e.slice(0,e.size,e.type)}catch(k){ta(n)}break;case"DOMPoint":case"DOMPointReadOnly":u=tn[n];try{a=u.fromPoint?u.fromPoint(e):new u(e.x,e.y,e.z,e.w)}catch(k){ta(n)}break;case"DOMRect":case"DOMRectReadOnly":u=tn[n];try{a=u.fromRect?u.fromRect(e):new u(e.x,e.y,e.width,e.height)}catch(k){ta(n)}break;case"DOMMatrix":case"DOMMatrixReadOnly":u=tn[n];try{a=u.fromMatrix?u.fromMatrix(e):new u(e)}catch(k){ta(n)}break;case"AudioData":case"VideoFrame":lp(e.clone)||ta(n);try{a=e.clone()}catch(k){iD(n)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":ta(n);default:iD(n)}}switch(Cw(t,e,a),n){case"Array":case"Object":for(M=Uft(e),w=0,q=qw(M);w<q;w++)O=M[w],Oft(a,O,en(e[O],t));break;case"Map":e.forEach(function(k,$){Cw(a,en($,t),en(k,t))});break;case"Set":e.forEach(function(k){Ece(a,en(k,t))});break;case"Error":rD(a,"message",en(e.message,t)),Rft(e,"cause")&&rD(a,"cause",en(e.cause,t)),c==="AggregateError"?a.errors=en(e.errors,t):c==="SuppressedError"&&(a.error=en(e.error,t),a.suppressed=en(e.suppressed,t));case"DOMException":zft&&rD(a,"stack",en(e.stack,t))}return a},Qft=function(e,t){if(!Mw(e))throw new Bft("Transfer option cannot be converted to a sequence");var n=[];Mft(e,function($){$ft(n,bce($))});for(var u=0,c=qw(n),a=new Ice,_,w,q,M,O,k;u<c;){if(_=n[u++],w=Aw(_),w==="ArrayBuffer"?jft(a,_):cD(t,_))throw new Sh("Duplicate transferable",qy);if(w==="ArrayBuffer"){Ece(a,_);continue}if(uD)M=sp(_,{transfer:[_]});else switch(w){case"ImageBitmap":q=tn.OffscreenCanvas,Pft(q)||ta(w,Pw);try{O=new q(_.width,_.height),k=O.getContext("bitmaprenderer"),k.transferFromImageBitmap(_),M=O.transferToImageBitmap()}catch($){}break;case"AudioData":case"VideoFrame":(!lp(_.clone)||!lp(_.close))&&ta(w,Pw);try{M=_.clone(),_.close()}catch($){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":ta(w,Pw)}if(M===void 0)throw new Sh("This object cannot be transferred: "+w,qy);Cw(t,_,M)}return a},edt=function(e){Lft(e,function(t){uD?el(t,{transfer:[t]}):lp(t.transfer)?t.transfer():_ce?_ce(t):ta("ArrayBuffer",Pw)})};Eft({global:!0,enumerable:!0,sham:!uD,forced:Kft},{structuredClone:function(t){var n=kft(arguments.length,1)>1&&!Aft(arguments[1])?bce(arguments[1]):void 0,u=n?n.transfer:void 0,c,a;u!==void 0&&(c=new aD,a=Qft(u,c));var _=en(t,c);return a&&edt(a),_}})});var Rce=I(()=>{"use strict";var tdt=W(),Mce=Qe(),rdt=Iw(),Cce=rdt(Mce.setInterval,!0);tdt({global:!0,bind:!0,forced:Mce.setInterval!==Cce},{setInterval:Cce})});var Dce=I(()=>{"use strict";var idt=W(),kce=Qe(),ndt=Iw(),Oce=ndt(kce.setTimeout,!0);idt({global:!0,bind:!0,forced:kce.setTimeout!==Oce},{setTimeout:Oce})});var Lce=I(()=>{"use strict";Rce();Dce()});var Ay=I((VFt,Fce)=>{"use strict";var adt=He(),odt=_t(),sdt=dt(),zce=Kt(),ldt=odt("iterator");Fce.exports=!adt(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),u="";return e.pathname="c%20d",t.forEach(function(c,a){t.delete("b"),u+=a+c}),n.delete("a",2),n.delete("b",void 0),zce&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(zce||!sdt)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[ldt]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var Hce=I((GFt,Zce)=>{"use strict";var Th=$e(),hD=2147483647,Cy=36,$ce=1,pD=26,udt=38,cdt=700,hdt=72,fdt=128,ddt="-",pdt=/[^\0-\u007E]/,Vce=/[.\u3002\uFF0E\uFF61]/g,Bce="Overflow: input needs wider integers to process",fD=Cy-$ce,Nce=RangeError,mdt=Th(Vce.exec),up=Math.floor,dD=String.fromCharCode,jce=Th("".charCodeAt),Gce=Th([].join),zu=Th([].push),vdt=Th("".replace),gdt=Th("".split),ydt=Th("".toLowerCase),_dt=function(e){for(var t=[],n=0,u=e.length;n<u;){var c=jce(e,n++);if(c>=55296&&c<=56319&&n<u){var a=jce(e,n++);(a&64512)===56320?zu(t,((c&1023)<<10)+(a&1023)+65536):(zu(t,c),n--)}else zu(t,c)}return t},Uce=function(e){return e+22+75*(e<26)},xdt=function(e,t,n){var u=0;for(e=n?up(e/cdt):e>>1,e+=up(e/t);e>fD*pD>>1;)e=up(e/fD),u+=Cy;return up(u+(fD+1)*e/(e+udt))},bdt=function(e){var t=[];e=_dt(e);var n=e.length,u=fdt,c=0,a=hdt,_,w;for(_=0;_<e.length;_++)w=e[_],w<128&&zu(t,dD(w));var q=t.length,M=q;for(q&&zu(t,ddt);M<n;){var O=hD;for(_=0;_<e.length;_++)w=e[_],w>=u&&w<O&&(O=w);var k=M+1;if(O-u>up((hD-c)/k))throw new Nce(Bce);for(c+=(O-u)*k,u=O,_=0;_<e.length;_++){if(w=e[_],w<u&&++c>hD)throw new Nce(Bce);if(w===u){for(var $=c,fe=Cy;;){var Pe=fe<=a?$ce:fe>=a+pD?pD:fe-a;if($<Pe)break;var Se=$-Pe,ne=Cy-Pe;zu(t,dD(Uce(Pe+Se%ne))),$=up(Se/ne),fe+=Cy}zu(t,dD(Uce($))),a=xdt(c,k,M===q),c=0,M++}}c++,u++}return Gce(t,"")};Zce.exports=function(e){var t=[],n=gdt(vdt(ydt(e),Vce,"."),"."),u,c;for(u=0;u<n.length;u++)c=n[u],zu(t,mdt(pdt,c)?"xn--"+bdt(c):c);return Gce(t,".")}});var SD=I((ZFt,vhe)=>{"use strict";rg();_M();var xD=W(),ohe=Qe(),bD=aC(),wdt=bt(),Ow=et(),To=$e(),My=dt(),she=Ay(),lhe=rr(),Sdt=Sr(),Tdt=ja(),Idt=Cn(),Edt=gu(),wD=Qt(),uhe=pn(),mD=Rt(),qdt=Ot(),Pdt=sr(),Adt=An(),Cdt=tt(),che=vt(),Rn=It(),Mdt=Wr(),Wce=Zn(),Kce=pu(),Rdt=Xo(),kw=Ti(),cp=va(),Odt=_t(),kdt=nb(),Ddt=Odt("iterator"),fp="URLSearchParams",hhe=fp+"Iterator",fhe=wD.set,Va=wD.getterFor(fp),Ldt=wD.getterFor(hhe),Yce=bD("fetch"),zw=bD("Request"),Ry=bD("Headers"),vD=zw&&zw.prototype,Xce=Ry&&Ry.prototype,zdt=ohe.TypeError,Fdt=ohe.encodeURIComponent,Bdt=String.fromCharCode,Ndt=wdt("String","fromCodePoint"),jdt=parseInt,Lw=To("".charAt),Jce=To([].join),Fu=To([].push),dhe=To("".replace),Udt=To([].shift),Qce=To([].splice),ehe=To("".split),phe=To("".slice),$dt=To(/./.exec),Vdt=/\+/g,gD="\uFFFD",Gdt=/^[0-9a-f]+$/i,the=function(e,t){var n=phe(e,t,t+2);return $dt(Gdt,n)?jdt(n,16):NaN},Zdt=function(e){for(var t=0,n=128;n>0&&(e&n)!==0;n>>=1)t++;return t},Hdt=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break}return t>1114111?null:t},rhe=function(e){e=dhe(e,Vdt," ");for(var t=e.length,n="",u=0;u<t;){var c=Lw(e,u);if(c==="%"){if(Lw(e,u+1)==="%"||u+3>t){n+="%",u++;continue}var a=the(e,u+1);if(a!==a){n+=c,u++;continue}u+=2;var _=Zdt(a);if(_===0)c=Bdt(a);else{if(_===1||_>4){n+=gD,u++;continue}for(var w=[a],q=1;q<_&&(u++,!(u+3>t||Lw(e,u)!=="%"));){var M=the(e,u+1);if(M!==M){u+=3;break}if(M>191||M<128)break;Fu(w,M),u+=2,q++}if(w.length!==_){n+=gD;continue}var O=Hdt(w);O===null?n+=gD:c=Ndt(O)}}n+=c,u++}return n},Wdt=/[!'()~]|%20/g,Kdt={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},Ydt=function(e){return Kdt[e]},ihe=function(e){return dhe(Fdt(e),Wdt,Ydt)},yD=Edt(function(t,n){fhe(this,{type:hhe,target:Va(t).entries,index:0,kind:n})},fp,function(){var t=Ldt(this),n=t.target,u=t.index++;if(!n||u>=n.length)return t.target=null,kw(void 0,!0);var c=n[u];switch(t.kind){case"keys":return kw(c.key,!1);case"values":return kw(c.value,!1)}return kw([c.key,c.value],!1)},!0),mhe=function(e){this.entries=[],this.url=null,e!==void 0&&(che(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?Lw(e,0)==="?"?phe(e,1):e:Rn(e)))};mhe.prototype={type:fp,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,n=Rdt(e),u,c,a,_,w,q,M;if(n)for(u=Kce(e,n),c=u.next;!(a=Ow(c,u)).done;){if(_=Kce(Cdt(a.value)),w=_.next,(q=Ow(w,_)).done||(M=Ow(w,_)).done||!Ow(w,_).done)throw new zdt("Expected sequence with length 2");Fu(t,{key:Rn(q.value),value:Rn(M.value)})}else for(var O in e)qdt(e,O)&&Fu(t,{key:O,value:Rn(e[O])})},parseQuery:function(e){if(e)for(var t=this.entries,n=ehe(e,"&"),u=0,c,a;u<n.length;)c=n[u++],c.length&&(a=ehe(c,"="),Fu(t,{key:rhe(Udt(a)),value:rhe(Jce(a,"="))}))},serialize:function(){for(var e=this.entries,t=[],n=0,u;n<e.length;)u=e[n++],Fu(t,ihe(u.key)+"="+ihe(u.value));return Jce(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Fw=function(){uhe(this,hp);var t=arguments.length>0?arguments[0]:void 0,n=fhe(this,new mhe(t));My||(this.size=n.entries.length)},hp=Fw.prototype;Tdt(hp,{append:function(t,n){var u=Va(this);cp(arguments.length,2),Fu(u.entries,{key:Rn(t),value:Rn(n)}),My||this.length++,u.updateURL()},delete:function(e){for(var t=Va(this),n=cp(arguments.length,1),u=t.entries,c=Rn(e),a=n<2?void 0:arguments[1],_=a===void 0?a:Rn(a),w=0;w<u.length;){var q=u[w];if(q.key===c&&(_===void 0||q.value===_)){if(Qce(u,w,1),_!==void 0)break}else w++}My||(this.size=u.length),t.updateURL()},get:function(t){var n=Va(this).entries;cp(arguments.length,1);for(var u=Rn(t),c=0;c<n.length;c++)if(n[c].key===u)return n[c].value;return null},getAll:function(t){var n=Va(this).entries;cp(arguments.length,1);for(var u=Rn(t),c=[],a=0;a<n.length;a++)n[a].key===u&&Fu(c,n[a].value);return c},has:function(t){for(var n=Va(this).entries,u=cp(arguments.length,1),c=Rn(t),a=u<2?void 0:arguments[1],_=a===void 0?a:Rn(a),w=0;w<n.length;){var q=n[w++];if(q.key===c&&(_===void 0||q.value===_))return!0}return!1},set:function(t,n){var u=Va(this);cp(arguments.length,1);for(var c=u.entries,a=!1,_=Rn(t),w=Rn(n),q=0,M;q<c.length;q++)M=c[q],M.key===_&&(a?Qce(c,q--,1):(a=!0,M.value=w));a||Fu(c,{key:_,value:w}),My||(this.size=c.length),u.updateURL()},sort:function(){var t=Va(this);kdt(t.entries,function(n,u){return n.key>u.key?1:-1}),t.updateURL()},forEach:function(t){for(var n=Va(this).entries,u=Pdt(t,arguments.length>1?arguments[1]:void 0),c=0,a;c<n.length;)a=n[c++],u(a.value,a.key,this)},keys:function(){return new yD(this,"keys")},values:function(){return new yD(this,"values")},entries:function(){return new yD(this,"entries")}},{enumerable:!0});lhe(hp,Ddt,hp.entries,{name:"entries"});lhe(hp,"toString",function(){return Va(this).serialize()},{enumerable:!0});My&&Sdt(hp,"size",{get:function(){return Va(this).entries.length},configurable:!0,enumerable:!0});Idt(Fw,fp);xD({global:!0,constructor:!0,forced:!she},{URLSearchParams:Fw});!she&&mD(Ry)&&(nhe=To(Xce.has),ahe=To(Xce.set),_D=function(e){if(che(e)){var t=e.body,n;if(Adt(t)===fp)return n=e.headers?new Ry(e.headers):new Ry,nhe(n,"content-type")||ahe(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),Mdt(e,{body:Wce(0,Rn(t)),headers:Wce(0,n)})}return e},mD(Yce)&&xD({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return Yce(t,arguments.length>1?_D(arguments[1]):{})}}),mD(zw)&&(Dw=function(t){return uhe(this,vD),new zw(t,arguments.length>1?_D(arguments[1]):{})},vD.constructor=Dw,Dw.prototype=vD,xD({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Dw})));var nhe,ahe,_D,Dw;vhe.exports={URLSearchParams:Fw,getState:Va}});var khe=I(()=>{"use strict";bM();var Xdt=W(),ND=dt(),Jdt=Ay(),jD=Qe(),ghe=sr(),Ka=$e(),$w=rr(),Ga=Sr(),Qdt=pn(),zD=Ot(),UD=jA(),dp=m2(),Io=Kn(),ept=mh().codeAt,tpt=Hce(),rl=It(),rpt=Cn(),ipt=va(),Phe=SD(),Ahe=Qt(),npt=Ahe.set,Vw=Ahe.getterFor("URL"),apt=Phe.URLSearchParams,opt=Phe.getState,Oy=jD.URL,FD=jD.TypeError,Gw=jD.parseInt,spt=Math.floor,yhe=Math.pow,Wa=Ka("".charAt),Eo=Ka(/./.exec),Dy=Ka([].join),lpt=Ka(1 .toString),upt=Ka([].pop),mp=Ka([].push),TD=Ka("".replace),cpt=Ka([].shift),hpt=Ka("".split),zy=Ka("".slice),Zw=Ka("".toLowerCase),fpt=Ka([].unshift),dpt="Invalid authority",ID="Invalid scheme",Ih="Invalid host",_he="Invalid port",Che=/[a-z]/i,ppt=/[\d+-.a-z]/i,BD=/\d/,mpt=/^0x/i,vpt=/^[0-7]+$/,gpt=/^\d+$/,Mhe=/^[\da-f]+$/i,ypt=/[\0\t\n\r #%/:<>?@[\\\]^|]/,_pt=/[\0\t\n\r #/:<>?@[\\\]^|]/,xpt=/^[\u0000-\u0020]+/,bpt=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,wpt=/[\t\n\r]/g,Za,Spt=function(e){var t=hpt(e,"."),n,u,c,a,_,w,q;if(t.length&&t[t.length-1]===""&&t.length--,n=t.length,n>4)return e;for(u=[],c=0;c<n;c++){if(a=t[c],a==="")return e;if(_=10,a.length>1&&Wa(a,0)==="0"&&(_=Eo(mpt,a)?16:8,a=zy(a,_===8?1:2)),a==="")w=0;else{if(!Eo(_===10?gpt:_===8?vpt:Mhe,a))return e;w=Gw(a,_)}mp(u,w)}for(c=0;c<n;c++)if(w=u[c],c===n-1){if(w>=yhe(256,5-n))return null}else if(w>255)return null;for(q=upt(u),c=0;c<u.length;c++)q+=u[c]*yhe(256,3-c);return q},Tpt=function(e){var t=[0,0,0,0,0,0,0,0],n=0,u=null,c=0,a,_,w,q,M,O,k,$=function(){return Wa(e,c)};if($()===":"){if(Wa(e,1)!==":")return;c+=2,n++,u=n}for(;$();){if(n===8)return;if($()===":"){if(u!==null)return;c++,n++,u=n;continue}for(a=_=0;_<4&&Eo(Mhe,$());)a=a*16+Gw($(),16),c++,_++;if($()==="."){if(_===0||(c-=_,n>6))return;for(w=0;$();){if(q=null,w>0)if($()==="."&&w<4)c++;else return;if(!Eo(BD,$()))return;for(;Eo(BD,$());){if(M=Gw($(),10),q===null)q=M;else{if(q===0)return;q=q*10+M}if(q>255)return;c++}t[n]=t[n]*256+q,w++,(w===2||w===4)&&n++}if(w!==4)return;break}else if($()===":"){if(c++,!$())return}else if($())return;t[n++]=a}if(u!==null)for(O=n-u,n=7;n!==0&&O>0;)k=t[n],t[n--]=t[u+O-1],t[u+--O]=k;else if(n!==8)return;return t},Ipt=function(e){for(var t=null,n=1,u=null,c=0,a=0;a<8;a++)e[a]!==0?(c>n&&(t=u,n=c),u=null,c=0):(u===null&&(u=a),++c);return c>n?u:t},ky=function(e){var t,n,u,c;if(typeof e=="number"){for(t=[],n=0;n<4;n++)fpt(t,e%256),e=spt(e/256);return Dy(t,".")}if(typeof e=="object"){for(t="",u=Ipt(e),n=0;n<8;n++)c&&e[n]===0||(c&&(c=!1),u===n?(t+=n?":":"::",c=!0):(t+=lpt(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},Uw={},Rhe=UD({},Uw,{" ":1,"\"":1,"<":1,">":1,"`":1}),Ohe=UD({},Rhe,{"#":1,"?":1,"{":1,"}":1}),ED=UD({},Ohe,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Bu=function(e,t){var n=ept(e,0);return n>32&&n<127&&!zD(t,e)?e:encodeURIComponent(e)},Bw={ftp:21,file:null,http:80,https:443,ws:80,wss:443},Ly=function(e,t){var n;return e.length===2&&Eo(Che,Wa(e,0))&&((n=Wa(e,1))===":"||!t&&n==="|")},xhe=function(e){var t;return e.length>1&&Ly(zy(e,0,2))&&(e.length===2||(t=Wa(e,2))==="/"||t==="\\"||t==="?"||t==="#")},Ept=function(e){return e==="."||Zw(e)==="%2e"},qpt=function(e){return e=Zw(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},qD={},bhe={},PD={},whe={},She={},AD={},The={},Ihe={},Nw={},jw={},CD={},MD={},RD={},OD={},Ehe={},kD={},pp={},ls={},qhe={},Eh={},tl={},$D=function(e,t,n){var u=rl(e),c,a,_;if(t){if(a=this.parse(u),a)throw new FD(a);this.searchParams=null}else{if(n!==void 0&&(c=new $D(n,!0)),a=this.parse(u,null,c),a)throw new FD(a);_=opt(new apt),_.bindURL(this),this.searchParams=_}};$D.prototype={type:"URL",parse:function(e,t,n){var u=this,c=t||qD,a=0,_="",w=!1,q=!1,M=!1,O,k,$,fe;for(e=rl(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=TD(e,xpt,""),e=TD(e,bpt,"$1")),e=TD(e,wpt,""),O=dp(e);a<=O.length;){switch(k=O[a],c){case qD:if(k&&Eo(Che,k))_+=Zw(k),c=bhe;else{if(t)return ID;c=PD;continue}break;case bhe:if(k&&(Eo(ppt,k)||k==="+"||k==="-"||k==="."))_+=Zw(k);else if(k===":"){if(t&&(u.isSpecial()!==zD(Bw,_)||_==="file"&&(u.includesCredentials()||u.port!==null)||u.scheme==="file"&&!u.host))return;if(u.scheme=_,t){u.isSpecial()&&Bw[u.scheme]===u.port&&(u.port=null);return}_="",u.scheme==="file"?c=OD:u.isSpecial()&&n&&n.scheme===u.scheme?c=whe:u.isSpecial()?c=Ihe:O[a+1]==="/"?(c=She,a++):(u.cannotBeABaseURL=!0,mp(u.path,""),c=qhe)}else{if(t)return ID;_="",c=PD,a=0;continue}break;case PD:if(!n||n.cannotBeABaseURL&&k!=="#")return ID;if(n.cannotBeABaseURL&&k==="#"){u.scheme=n.scheme,u.path=Io(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,c=tl;break}c=n.scheme==="file"?OD:AD;continue;case whe:if(k==="/"&&O[a+1]==="/")c=Nw,a++;else{c=AD;continue}break;case She:if(k==="/"){c=jw;break}else{c=ls;continue}case AD:if(u.scheme=n.scheme,k===Za)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Io(n.path),u.query=n.query;else if(k==="/"||k==="\\"&&u.isSpecial())c=The;else if(k==="?")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Io(n.path),u.query="",c=Eh;else if(k==="#")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Io(n.path),u.query=n.query,u.fragment="",c=tl;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=Io(n.path),u.path.length--,c=ls;continue}break;case The:if(u.isSpecial()&&(k==="/"||k==="\\"))c=Nw;else if(k==="/")c=jw;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,c=ls;continue}break;case Ihe:if(c=Nw,k!=="/"||Wa(_,a+1)!=="/")continue;a++;break;case Nw:if(k!=="/"&&k!=="\\"){c=jw;continue}break;case jw:if(k==="@"){w&&(_="%40"+_),w=!0,$=dp(_);for(var Pe=0;Pe<$.length;Pe++){var Se=$[Pe];if(Se===":"&&!M){M=!0;continue}var ne=Bu(Se,ED);M?u.password+=ne:u.username+=ne}_=""}else if(k===Za||k==="/"||k==="?"||k==="#"||k==="\\"&&u.isSpecial()){if(w&&_==="")return dpt;a-=dp(_).length+1,_="",c=CD}else _+=k;break;case CD:case MD:if(t&&u.scheme==="file"){c=kD;continue}else if(k===":"&&!q){if(_==="")return Ih;if(fe=u.parseHost(_),fe)return fe;if(_="",c=RD,t===MD)return}else if(k===Za||k==="/"||k==="?"||k==="#"||k==="\\"&&u.isSpecial()){if(u.isSpecial()&&_==="")return Ih;if(t&&_===""&&(u.includesCredentials()||u.port!==null))return;if(fe=u.parseHost(_),fe)return fe;if(_="",c=pp,t)return;continue}else k==="["?q=!0:k==="]"&&(q=!1),_+=k;break;case RD:if(Eo(BD,k))_+=k;else if(k===Za||k==="/"||k==="?"||k==="#"||k==="\\"&&u.isSpecial()||t){if(_!==""){var re=Gw(_,10);if(re>65535)return _he;u.port=u.isSpecial()&&re===Bw[u.scheme]?null:re,_=""}if(t)return;c=pp;continue}else return _he;break;case OD:if(u.scheme="file",k==="/"||k==="\\")c=Ehe;else if(n&&n.scheme==="file")switch(k){case Za:u.host=n.host,u.path=Io(n.path),u.query=n.query;break;case"?":u.host=n.host,u.path=Io(n.path),u.query="",c=Eh;break;case"#":u.host=n.host,u.path=Io(n.path),u.query=n.query,u.fragment="",c=tl;break;default:xhe(Dy(Io(O,a),""))||(u.host=n.host,u.path=Io(n.path),u.shortenPath()),c=ls;continue}else{c=ls;continue}break;case Ehe:if(k==="/"||k==="\\"){c=kD;break}n&&n.scheme==="file"&&!xhe(Dy(Io(O,a),""))&&(Ly(n.path[0],!0)?mp(u.path,n.path[0]):u.host=n.host),c=ls;continue;case kD:if(k===Za||k==="/"||k==="\\"||k==="?"||k==="#"){if(!t&&Ly(_))c=ls;else if(_===""){if(u.host="",t)return;c=pp}else{if(fe=u.parseHost(_),fe)return fe;if(u.host==="localhost"&&(u.host=""),t)return;_="",c=pp}continue}else _+=k;break;case pp:if(u.isSpecial()){if(c=ls,k!=="/"&&k!=="\\")continue}else if(!t&&k==="?")u.query="",c=Eh;else if(!t&&k==="#")u.fragment="",c=tl;else if(k!==Za&&(c=ls,k!=="/"))continue;break;case ls:if(k===Za||k==="/"||k==="\\"&&u.isSpecial()||!t&&(k==="?"||k==="#")){if(qpt(_)?(u.shortenPath(),k!=="/"&&!(k==="\\"&&u.isSpecial())&&mp(u.path,"")):Ept(_)?k!=="/"&&!(k==="\\"&&u.isSpecial())&&mp(u.path,""):(u.scheme==="file"&&!u.path.length&&Ly(_)&&(u.host&&(u.host=""),_=Wa(_,0)+":"),mp(u.path,_)),_="",u.scheme==="file"&&(k===Za||k==="?"||k==="#"))for(;u.path.length>1&&u.path[0]==="";)cpt(u.path);k==="?"?(u.query="",c=Eh):k==="#"&&(u.fragment="",c=tl)}else _+=Bu(k,Ohe);break;case qhe:k==="?"?(u.query="",c=Eh):k==="#"?(u.fragment="",c=tl):k!==Za&&(u.path[0]+=Bu(k,Uw));break;case Eh:!t&&k==="#"?(u.fragment="",c=tl):k!==Za&&(k==="'"&&u.isSpecial()?u.query+="%27":k==="#"?u.query+="%23":u.query+=Bu(k,Uw));break;case tl:k!==Za&&(u.fragment+=Bu(k,Rhe));break}a++}},parseHost:function(e){var t,n,u;if(Wa(e,0)==="["){if(Wa(e,e.length-1)!=="]"||(t=Tpt(zy(e,1,-1)),!t))return Ih;this.host=t}else if(this.isSpecial()){if(e=tpt(e),Eo(ypt,e)||(t=Spt(e),t===null))return Ih;this.host=t}else{if(Eo(_pt,e))return Ih;for(t="",n=dp(e),u=0;u<n.length;u++)t+=Bu(n[u],Uw);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return zD(Bw,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!Ly(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,u=e.password,c=e.host,a=e.port,_=e.path,w=e.query,q=e.fragment,M=t+":";return c!==null?(M+="//",e.includesCredentials()&&(M+=n+(u?":"+u:"")+"@"),M+=ky(c),a!==null&&(M+=":"+a)):t==="file"&&(M+="//"),M+=e.cannotBeABaseURL?_[0]:_.length?"/"+Dy(_,"/"):"",w!==null&&(M+="?"+w),q!==null&&(M+="#"+q),M},setHref:function(e){var t=this.parse(e);if(t)throw new FD(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new vp(e.path[0]).origin}catch(n){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+ky(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(rl(e)+":",qD)},getUsername:function(){return this.username},setUsername:function(e){var t=dp(rl(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Bu(t[n],ED)}},getPassword:function(){return this.password},setPassword:function(e){var t=dp(rl(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Bu(t[n],ED)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?ky(e):ky(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,CD)},getHostname:function(){var e=this.host;return e===null?"":ky(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,MD)},getPort:function(){var e=this.port;return e===null?"":rl(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=rl(e),e===""?this.port=null:this.parse(e,RD))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+Dy(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,pp))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=rl(e),e===""?this.query=null:(Wa(e,0)==="?"&&(e=zy(e,1)),this.query="",this.parse(e,Eh)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=rl(e),e===""){this.fragment=null;return}Wa(e,0)==="#"&&(e=zy(e,1)),this.fragment="",this.parse(e,tl)},update:function(){this.query=this.searchParams.serialize()||null}};var vp=function(t){var n=Qdt(this,On),u=ipt(arguments.length,1)>1?arguments[1]:void 0,c=npt(n,new $D(t,!1,u));ND||(n.href=c.serialize(),n.origin=c.getOrigin(),n.protocol=c.getProtocol(),n.username=c.getUsername(),n.password=c.getPassword(),n.host=c.getHost(),n.hostname=c.getHostname(),n.port=c.getPort(),n.pathname=c.getPathname(),n.search=c.getSearch(),n.searchParams=c.getSearchParams(),n.hash=c.getHash())},On=vp.prototype,Ha=function(e,t){return{get:function(){return Vw(this)[e]()},set:t&&function(n){return Vw(this)[t](n)},configurable:!0,enumerable:!0}};ND&&(Ga(On,"href",Ha("serialize","setHref")),Ga(On,"origin",Ha("getOrigin")),Ga(On,"protocol",Ha("getProtocol","setProtocol")),Ga(On,"username",Ha("getUsername","setUsername")),Ga(On,"password",Ha("getPassword","setPassword")),Ga(On,"host",Ha("getHost","setHost")),Ga(On,"hostname",Ha("getHostname","setHostname")),Ga(On,"port",Ha("getPort","setPort")),Ga(On,"pathname",Ha("getPathname","setPathname")),Ga(On,"search",Ha("getSearch","setSearch")),Ga(On,"searchParams",Ha("getSearchParams")),Ga(On,"hash",Ha("getHash","setHash")));$w(On,"toJSON",function(){return Vw(this).serialize()},{enumerable:!0});$w(On,"toString",function(){return Vw(this).serialize()},{enumerable:!0});Oy&&(DD=Oy.createObjectURL,LD=Oy.revokeObjectURL,DD&&$w(vp,"createObjectURL",ghe(DD,Oy)),LD&&$w(vp,"revokeObjectURL",ghe(LD,Oy)));var DD,LD;rpt(vp,"URL");Xdt({global:!0,constructor:!0,forced:!Jdt,sham:!ND},{URL:vp})});var Dhe=I(()=>{"use strict";khe()});var Fhe=I(()=>{"use strict";var Ppt=W(),Apt=bt(),zhe=He(),Cpt=va(),Lhe=It(),Mpt=Ay(),VD=Apt("URL"),Rpt=Mpt&&zhe(function(){VD.canParse()}),Opt=zhe(function(){return VD.canParse.length!==1});Ppt({target:"URL",stat:!0,forced:!Rpt||Opt},{canParse:function(t){var n=Cpt(arguments.length,1),u=Lhe(t),c=n<2||arguments[1]===void 0?void 0:Lhe(arguments[1]);try{return!!new VD(u,c)}catch(a){return!1}}})});var Nhe=I(()=>{"use strict";var kpt=W(),Dpt=bt(),Lpt=va(),Bhe=It(),zpt=Ay(),Fpt=Dpt("URL");kpt({target:"URL",stat:!0,forced:!zpt},{parse:function(t){var n=Lpt(arguments.length,1),u=Bhe(t),c=n<2||arguments[1]===void 0?void 0:Bhe(arguments[1]);try{return new Fpt(u,c)}catch(a){return null}}})});var jhe=I(()=>{"use strict";var Bpt=W(),Npt=et();Bpt({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return Npt(URL.prototype.toString,this)}})});var Uhe=I(()=>{"use strict";SD()});var Zhe=I(()=>{"use strict";var jpt=rr(),Hw=$e(),$he=It(),Upt=va(),Ghe=URLSearchParams,Ww=Ghe.prototype,$pt=Hw(Ww.append),Vhe=Hw(Ww.delete),Vpt=Hw(Ww.forEach),Gpt=Hw([].push),GD=new Ghe("a=1&a=2&b=3");GD.delete("a",1);GD.delete("b",void 0);GD+""!="a=2"&&jpt(Ww,"delete",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return Vhe(this,e);var u=[];Vpt(this,function(k,$){Gpt(u,{key:$,value:k})}),Upt(t,1);for(var c=$he(e),a=$he(n),_=0,w=0,q=!1,M=u.length,O;_<M;)O=u[_++],q||O.key===c?(q=!0,Vhe(this,O.key)):w++;for(;w<M;)O=u[w++],O.key===c&&O.value===a||$pt(this,O.key,O.value)},{enumerable:!0,unsafe:!0})});var Yhe=I(()=>{"use strict";var Zpt=rr(),Whe=$e(),Hpt=It(),Wpt=va(),Khe=URLSearchParams,ZD=Khe.prototype,Kpt=Whe(ZD.getAll),Ypt=Whe(ZD.has),Hhe=new Khe("a=1");(Hhe.has("a",2)||!Hhe.has("a",void 0))&&Zpt(ZD,"has",function(t){var n=arguments.length,u=n<2?void 0:arguments[1];if(n&&u===void 0)return Ypt(this,t);var c=Kpt(this,t);Wpt(n,1);for(var a=Hpt(u),_=0;_<c.length;)if(c[_++]===a)return!0;return!1},{enumerable:!0,unsafe:!0})});var Xhe=I(()=>{"use strict";var Xpt=dt(),Jpt=$e(),Qpt=Sr(),HD=URLSearchParams.prototype,emt=Jpt(HD.forEach);Xpt&&!("size"in HD)&&Qpt(HD,"size",{get:function(){var t=0;return emt(this,function(){t++}),t},configurable:!0,enumerable:!0})});var Qhe=I((hBt,Jhe)=>{"use strict";K5();r6();i6();n6();a6();o6();s6();l6();u6();c6();h6();f6();d6();p6();m6();j6();Z6();r2();fU();o2();xU();TU();EU();AU();CU();RU();kU();h2();f2();BU();NU();$U();JU();QU();t$();r$();rg();S$();q$();P$();C$();R$();N$();U$();V$();H$();W$();c8();d8();p8();R2();k2();D2();y8();_8();x8();z2();X8();uV();mV();gV();iP();sP();cP();IP();EP();ZV();WV();XV();JV();lG();uG();pG();yG();xG();EG();AG();OG();OP();FP();$P();GP();HP();KP();tA();iA();nA();wb();sA();uA();hA();fA();jq();hZ();qb();xA();OZ();LZ();FZ();BZ();NZ();$Z();GZ();ZZ();TA();WZ();YZ();JZ();QZ();eH();tH();nH();sH();lH();uH();xH();bH();SH();IH();EH();qH();PH();AH();DH();$H();WH();eW();iW();lW();uW();fW();pW();vW();gW();SW();TW();IW();PW();AW();CW();RW();VA();GA();DW();zW();BW();jW();$W();VW();GW();ZW();XW();JW();QW();r7();i7();a7();s7();x9();qC();PC();I9();RC();OC();P9();D9();F9();B9();$9();V9();G9();Z9();H9();W9();K9();eK();rK();iK();xK();KC();PK();Xb();kK();LK();BK();$K();GK();iM();oM();lM();cM();fM();mM();gM();wY();EY();MY();_M();DY();xM();bM();KY();PM();oX();sX();hX();fX();yX();FM();SX();PX();MX();OX();GM();NX();GX();YX();eJ();tJ();rJ();iJ();nJ();aJ();oJ();sJ();lJ();uJ();cJ();hJ();fJ();BJ();NJ();jJ();UJ();$J();VJ();GJ();ZJ();HJ();oR();YJ();JJ();eQ();iQ();aQ();sQ();sR();lR();hQ();fQ();pQ();vQ();bQ();SQ();IQ();EQ();PQ();CQ();RQ();kQ();NQ();jQ();$Q();KQ();XQ();ree();wR();SR();nee();IR();uee();E1();Iee();Eee();Aee();rte();ite();nte();ate();ote();ste();ute();cte();fte();dte();vte();gte();xte();bte();wte();Ste();Cte();Mte();Rte();Ote();kte();Hte();Jte();cre();pre();vre();gre();_re();xre();Ere();qre();Are();Cre();Mre();Rre();Ore();Lre();zre();Vre();Yre();Jre();Qre();eie();tie();rie();sie();hie();die();mie();vie();_ie();xie();bie();wie();Tie();qie();Cie();Mie();Rie();Oie();kie();Die();Lie();zie();Fie();Bie();jie();Uie();$ie();Vie();Gie();Hie();Yie();lne();vne();yne();xne();bne();Sne();Tne();Ine();Pne();Ane();Cne();Mne();kne();Lne();zne();Bne();jne();Une();Gne();Zne();Hne();Kne();Xne();Jne();iae();nae();aae();sae();lae();uae();cae();hae();fae();dae();pae();yae();_ae();Tae();Iae();Pae();Aae();Cae();kae();Dae();Lae();zae();Jae();Qae();eoe();toe();roe();loe();coe();foe();voe();yoe();xoe();Soe();Ioe();qoe();Poe();Aoe();Coe();Moe();Loe();zoe();Boe();Noe();Uoe();$oe();Voe();Goe();Zoe();Hoe();Woe();Koe();Yoe();Joe();ese();rse();ise();nse();ase();ose();sse();lse();use();pse();_se();Bse();Nse();jse();Use();$se();Vse();Gse();Zse();Wse();Kse();rle();ile();nle();ale();ole();sle();lle();ule();hle();fle();ple();vle();gle();yle();_le();xle();ble();wle();Sle();Tle();Lle();jle();$le();Vle();Zle();Hle();Kle();Xle();Qle();tue();rue();oue();sue();cue();hue();due();mue();wue();que();kue();Bue();Xue();nce();oce();mce();vce();yce();Ace();Lce();Dhe();Fhe();Nhe();jhe();Uhe();Zhe();Yhe();Xhe();Jhe.exports=Ox()});var tfe=I((fBt,efe)=>{"use strict";efe.exports=Qhe()});var WD=I((dBt,rfe)=>{"use strict";rfe.exports=function(t,n){return function(){for(var c=new Array(arguments.length),a=0;a<c.length;a++)c[a]=arguments[a];return t.apply(n,c)}}});var ra=I((pBt,afe)=>{"use strict";var tmt=WD(),qh=Object.prototype.toString;function XD(e){return qh.call(e)==="[object Array]"}function KD(e){return typeof e=="undefined"}function rmt(e){return e!==null&&!KD(e)&&e.constructor!==null&&!KD(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function imt(e){return qh.call(e)==="[object ArrayBuffer]"}function nmt(e){return typeof FormData!="undefined"&&e instanceof FormData}function amt(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function omt(e){return typeof e=="string"}function smt(e){return typeof e=="number"}function ife(e){return e!==null&&typeof e=="object"}function Kw(e){if(qh.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function lmt(e){return qh.call(e)==="[object Date]"}function umt(e){return qh.call(e)==="[object File]"}function cmt(e){return qh.call(e)==="[object Blob]"}function nfe(e){return qh.call(e)==="[object Function]"}function hmt(e){return ife(e)&&nfe(e.pipe)}function fmt(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function dmt(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function pmt(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function JD(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),XD(e))for(var n=0,u=e.length;n<u;n++)t.call(null,e[n],n,e);else for(var c in e)Object.prototype.hasOwnProperty.call(e,c)&&t.call(null,e[c],c,e)}function YD(){var e={};function t(c,a){Kw(e[a])&&Kw(c)?e[a]=YD(e[a],c):Kw(c)?e[a]=YD({},c):XD(c)?e[a]=c.slice():e[a]=c}for(var n=0,u=arguments.length;n<u;n++)JD(arguments[n],t);return e}function mmt(e,t,n){return JD(t,function(c,a){n&&typeof c=="function"?e[a]=tmt(c,n):e[a]=c}),e}function vmt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}afe.exports={isArray:XD,isArrayBuffer:imt,isBuffer:rmt,isFormData:nmt,isArrayBufferView:amt,isString:omt,isNumber:smt,isObject:ife,isPlainObject:Kw,isUndefined:KD,isDate:lmt,isFile:umt,isBlob:cmt,isFunction:nfe,isStream:hmt,isURLSearchParams:fmt,isStandardBrowserEnv:pmt,forEach:JD,merge:YD,extend:mmt,trim:dmt,stripBOM:vmt}});var QD=I((mBt,sfe)=>{"use strict";var gp=ra();function ofe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}sfe.exports=function(t,n,u){if(!n)return t;var c;if(u)c=u(n);else if(gp.isURLSearchParams(n))c=n.toString();else{var a=[];gp.forEach(n,function(q,M){q===null||typeof q=="undefined"||(gp.isArray(q)?M=M+"[]":q=[q],gp.forEach(q,function(k){gp.isDate(k)?k=k.toISOString():gp.isObject(k)&&(k=JSON.stringify(k)),a.push(ofe(M)+"="+ofe(k))}))}),c=a.join("&")}if(c){var _=t.indexOf("#");_!==-1&&(t=t.slice(0,_)),t+=(t.indexOf("?")===-1?"?":"&")+c}return t}});var ufe=I((vBt,lfe)=>{"use strict";var gmt=ra();function Yw(){this.handlers=[]}Yw.prototype.use=function(t,n,u){return this.handlers.push({fulfilled:t,rejected:n,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1};Yw.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};Yw.prototype.forEach=function(t){gmt.forEach(this.handlers,function(u){u!==null&&t(u)})};lfe.exports=Yw});var hfe=I((gBt,cfe)=>{"use strict";var ymt=ra();cfe.exports=function(t,n){ymt.forEach(t,function(c,a){a!==n&&a.toUpperCase()===n.toUpperCase()&&(t[n]=c,delete t[a])})}});var eL=I((yBt,ffe)=>{"use strict";ffe.exports=function(t,n,u,c,a){return t.config=n,u&&(t.code=u),t.request=c,t.response=a,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var tL=I((_Bt,dfe)=>{"use strict";var _mt=eL();dfe.exports=function(t,n,u,c,a){var _=new Error(t);return _mt(_,n,u,c,a)}});var mfe=I((xBt,pfe)=>{"use strict";var xmt=tL();pfe.exports=function(t,n,u){var c=u.config.validateStatus;!u.status||!c||c(u.status)?t(u):n(xmt("Request failed with status code "+u.status,u.config,null,u.request,u))}});var gfe=I((bBt,vfe)=>{"use strict";var Xw=ra();vfe.exports=Xw.isStandardBrowserEnv()?function(){return{write:function(n,u,c,a,_,w){var q=[];q.push(n+"="+encodeURIComponent(u)),Xw.isNumber(c)&&q.push("expires="+new Date(c).toGMTString()),Xw.isString(a)&&q.push("path="+a),Xw.isString(_)&&q.push("domain="+_),w===!0&&q.push("secure"),document.cookie=q.join("; ")},read:function(n){var u=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var _fe=I((wBt,yfe)=>{"use strict";yfe.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var bfe=I((SBt,xfe)=>{"use strict";xfe.exports=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}});var Sfe=I((TBt,wfe)=>{"use strict";var bmt=_fe(),wmt=bfe();wfe.exports=function(t,n){return t&&!bmt(n)?wmt(t,n):n}});var Ife=I((IBt,Tfe)=>{"use strict";var rL=ra(),Smt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];Tfe.exports=function(t){var n={},u,c,a;return t&&rL.forEach(t.split(`
`),function(w){if(a=w.indexOf(":"),u=rL.trim(w.substr(0,a)).toLowerCase(),c=rL.trim(w.substr(a+1)),u){if(n[u]&&Smt.indexOf(u)>=0)return;u==="set-cookie"?n[u]=(n[u]?n[u]:[]).concat([c]):n[u]=n[u]?n[u]+", "+c:c}}),n}});var Pfe=I((EBt,qfe)=>{"use strict";var Efe=ra();qfe.exports=Efe.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),u;function c(a){var _=a;return t&&(n.setAttribute("href",_),_=n.href),n.setAttribute("href",_),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return u=c(window.location.href),function(_){var w=Efe.isString(_)?c(_):_;return w.protocol===u.protocol&&w.host===u.host}}():function(){return function(){return!0}}()});var Fy=I((qBt,Afe)=>{"use strict";function iL(e){this.message=e}iL.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};iL.prototype.__CANCEL__=!0;Afe.exports=iL});var aL=I((PBt,Cfe)=>{"use strict";var Jw=ra(),Tmt=mfe(),Imt=gfe(),Emt=QD(),qmt=Sfe(),Pmt=Ife(),Amt=Pfe(),nL=tL(),Cmt=By(),Mmt=Fy();Cfe.exports=function(t){return new Promise(function(u,c){var a=t.data,_=t.headers,w=t.responseType,q;function M(){t.cancelToken&&t.cancelToken.unsubscribe(q),t.signal&&t.signal.removeEventListener("abort",q)}Jw.isFormData(a)&&delete _["Content-Type"];var O=new XMLHttpRequest;if(t.auth){var k=t.auth.username||"",$=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";_.Authorization="Basic "+btoa(k+":"+$)}var fe=qmt(t.baseURL,t.url);O.open(t.method.toUpperCase(),Emt(fe,t.params,t.paramsSerializer),!0),O.timeout=t.timeout;function Pe(){if(O){var ne="getAllResponseHeaders"in O?Pmt(O.getAllResponseHeaders()):null,re=!w||w==="text"||w==="json"?O.responseText:O.response,ae={data:re,status:O.status,statusText:O.statusText,headers:ne,config:t,request:O};Tmt(function(Te){u(Te),M()},function(Te){c(Te),M()},ae),O=null}}if("onloadend"in O?O.onloadend=Pe:O.onreadystatechange=function(){!O||O.readyState!==4||O.status===0&&!(O.responseURL&&O.responseURL.indexOf("file:")===0)||setTimeout(Pe)},O.onabort=function(){O&&(c(nL("Request aborted",t,"ECONNABORTED",O)),O=null)},O.onerror=function(){c(nL("Network Error",t,null,O)),O=null},O.ontimeout=function(){var re=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",ae=t.transitional||Cmt.transitional;t.timeoutErrorMessage&&(re=t.timeoutErrorMessage),c(nL(re,t,ae.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",O)),O=null},Jw.isStandardBrowserEnv()){var Se=(t.withCredentials||Amt(fe))&&t.xsrfCookieName?Imt.read(t.xsrfCookieName):void 0;Se&&(_[t.xsrfHeaderName]=Se)}"setRequestHeader"in O&&Jw.forEach(_,function(re,ae){typeof a=="undefined"&&ae.toLowerCase()==="content-type"?delete _[ae]:O.setRequestHeader(ae,re)}),Jw.isUndefined(t.withCredentials)||(O.withCredentials=!!t.withCredentials),w&&w!=="json"&&(O.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&O.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&O.upload&&O.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(q=function(ne){O&&(c(!ne||ne&&ne.type?new Mmt("canceled"):ne),O.abort(),O=null)},t.cancelToken&&t.cancelToken.subscribe(q),t.signal&&(t.signal.aborted?q():t.signal.addEventListener("abort",q))),a||(a=null),O.send(a)})}});var By=I((ABt,Ofe)=>{"use strict";var rn=ra(),Mfe=hfe(),Rmt=eL(),Omt={"Content-Type":"application/x-www-form-urlencoded"};function Rfe(e,t){!rn.isUndefined(e)&&rn.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function kmt(){var e;return typeof XMLHttpRequest!="undefined"?e=aL():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=aL()),e}function Dmt(e,t,n){if(rn.isString(e))try{return(t||JSON.parse)(e),rn.trim(e)}catch(u){if(u.name!=="SyntaxError")throw u}return(n||JSON.stringify)(e)}var Qw={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:kmt(),transformRequest:[function(t,n){return Mfe(n,"Accept"),Mfe(n,"Content-Type"),rn.isFormData(t)||rn.isArrayBuffer(t)||rn.isBuffer(t)||rn.isStream(t)||rn.isFile(t)||rn.isBlob(t)?t:rn.isArrayBufferView(t)?t.buffer:rn.isURLSearchParams(t)?(Rfe(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):rn.isObject(t)||n&&n["Content-Type"]==="application/json"?(Rfe(n,"application/json"),Dmt(t)):t}],transformResponse:[function(t){var n=this.transitional||Qw.transitional,u=n&&n.silentJSONParsing,c=n&&n.forcedJSONParsing,a=!u&&this.responseType==="json";if(a||c&&rn.isString(t)&&t.length)try{return JSON.parse(t)}catch(_){if(a)throw _.name==="SyntaxError"?Rmt(_,this,"E_JSON_PARSE"):_}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};rn.forEach(["delete","get","head"],function(t){Qw.headers[t]={}});rn.forEach(["post","put","patch"],function(t){Qw.headers[t]=rn.merge(Omt)});Ofe.exports=Qw});var Dfe=I((CBt,kfe)=>{"use strict";var Lmt=ra(),zmt=By();kfe.exports=function(t,n,u){var c=this||zmt;return Lmt.forEach(u,function(_){t=_.call(c,t,n)}),t}});var oL=I((MBt,Lfe)=>{"use strict";Lfe.exports=function(t){return!!(t&&t.__CANCEL__)}});var Bfe=I((RBt,Ffe)=>{"use strict";var zfe=ra(),sL=Dfe(),Fmt=oL(),Bmt=By(),Nmt=Fy();function lL(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Nmt("canceled")}Ffe.exports=function(t){lL(t),t.headers=t.headers||{},t.data=sL.call(t,t.data,t.headers,t.transformRequest),t.headers=zfe.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),zfe.forEach(["delete","get","head","post","put","patch","common"],function(c){delete t.headers[c]});var n=t.adapter||Bmt.adapter;return n(t).then(function(c){return lL(t),c.data=sL.call(t,c.data,c.headers,t.transformResponse),c},function(c){return Fmt(c)||(lL(t),c&&c.response&&(c.response.data=sL.call(t,c.response.data,c.response.headers,t.transformResponse))),Promise.reject(c)})}});var uL=I((OBt,Nfe)=>{"use strict";var ya=ra();Nfe.exports=function(t,n){n=n||{};var u={};function c(O,k){return ya.isPlainObject(O)&&ya.isPlainObject(k)?ya.merge(O,k):ya.isPlainObject(k)?ya.merge({},k):ya.isArray(k)?k.slice():k}function a(O){if(ya.isUndefined(n[O])){if(!ya.isUndefined(t[O]))return c(void 0,t[O])}else return c(t[O],n[O])}function _(O){if(!ya.isUndefined(n[O]))return c(void 0,n[O])}function w(O){if(ya.isUndefined(n[O])){if(!ya.isUndefined(t[O]))return c(void 0,t[O])}else return c(void 0,n[O])}function q(O){if(O in n)return c(t[O],n[O]);if(O in t)return c(void 0,t[O])}var M={url:_,method:_,data:_,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:q};return ya.forEach(Object.keys(t).concat(Object.keys(n)),function(k){var $=M[k]||a,fe=$(k);ya.isUndefined(fe)&&$!==q||(u[k]=fe)}),u}});var cL=I((kBt,jfe)=>{jfe.exports={version:"0.24.0"}});var Vfe=I((DBt,$fe)=>{"use strict";var jmt=cL().version,hL={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){hL[e]=function(u){return typeof u===e||"a"+(t<1?"n ":" ")+e}});var Ufe={};hL.transitional=function(t,n,u){function c(a,_){return"[Axios v"+jmt+"] Transitional option '"+a+"'"+_+(u?". "+u:"")}return function(a,_,w){if(t===!1)throw new Error(c(_," has been removed"+(n?" in "+n:"")));return n&&!Ufe[_]&&(Ufe[_]=!0,console.warn(c(_," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(a,_,w):!0}};function Umt(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var u=Object.keys(e),c=u.length;c-->0;){var a=u[c],_=t[a];if(_){var w=e[a],q=w===void 0||_(w,a,e);if(q!==!0)throw new TypeError("option "+a+" must be "+q);continue}if(n!==!0)throw Error("Unknown option "+a)}}$fe.exports={assertOptions:Umt,validators:hL}});var Yfe=I((LBt,Kfe)=>{"use strict";var Hfe=ra(),$mt=QD(),Gfe=ufe(),Zfe=Bfe(),eS=uL(),Wfe=Vfe(),yp=Wfe.validators;function Ny(e){this.defaults=e,this.interceptors={request:new Gfe,response:new Gfe}}Ny.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=eS(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&Wfe.assertOptions(n,{silentJSONParsing:yp.transitional(yp.boolean),forcedJSONParsing:yp.transitional(yp.boolean),clarifyTimeoutError:yp.transitional(yp.boolean)},!1);var u=[],c=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(t)===!1||(c=c&&$.synchronous,u.unshift($.fulfilled,$.rejected))});var a=[];this.interceptors.response.forEach(function($){a.push($.fulfilled,$.rejected)});var _;if(!c){var w=[Zfe,void 0];for(Array.prototype.unshift.apply(w,u),w=w.concat(a),_=Promise.resolve(t);w.length;)_=_.then(w.shift(),w.shift());return _}for(var q=t;u.length;){var M=u.shift(),O=u.shift();try{q=M(q)}catch(k){O(k);break}}try{_=Zfe(q)}catch(k){return Promise.reject(k)}for(;a.length;)_=_.then(a.shift(),a.shift());return _};Ny.prototype.getUri=function(t){return t=eS(this.defaults,t),$mt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};Hfe.forEach(["delete","get","head","options"],function(t){Ny.prototype[t]=function(n,u){return this.request(eS(u||{},{method:t,url:n,data:(u||{}).data}))}});Hfe.forEach(["post","put","patch"],function(t){Ny.prototype[t]=function(n,u,c){return this.request(eS(c||{},{method:t,url:n,data:u}))}});Kfe.exports=Ny});var Jfe=I((zBt,Xfe)=>{"use strict";var Vmt=Fy();function _p(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(c){t=c});var n=this;this.promise.then(function(u){if(n._listeners){var c,a=n._listeners.length;for(c=0;c<a;c++)n._listeners[c](u);n._listeners=null}}),this.promise.then=function(u){var c,a=new Promise(function(_){n.subscribe(_),c=_}).then(u);return a.cancel=function(){n.unsubscribe(c)},a},e(function(c){n.reason||(n.reason=new Vmt(c),t(n.reason))})}_p.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};_p.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};_p.prototype.unsubscribe=function(t){if(this._listeners){var n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}};_p.source=function(){var t,n=new _p(function(c){t=c});return{token:n,cancel:t}};Xfe.exports=_p});var ede=I((FBt,Qfe)=>{"use strict";Qfe.exports=function(t){return function(u){return t.apply(null,u)}}});var rde=I((BBt,tde)=>{"use strict";tde.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var ade=I((NBt,fL)=>{"use strict";var ide=ra(),Gmt=WD(),tS=Yfe(),Zmt=uL(),Hmt=By();function nde(e){var t=new tS(e),n=Gmt(tS.prototype.request,t);return ide.extend(n,tS.prototype,t),ide.extend(n,t),n.create=function(c){return nde(Zmt(e,c))},n}var us=nde(Hmt);us.Axios=tS;us.Cancel=Fy();us.CancelToken=Jfe();us.isCancel=oL();us.VERSION=cL().version;us.all=function(t){return Promise.all(t)};us.spread=ede();us.isAxiosError=rde();fL.exports=us;fL.exports.default=us});var dL=I((jBt,ode)=>{ode.exports=ade()});var lde=I((pL,mL)=>{(function(e,t){typeof pL=="object"&&typeof mL!="undefined"?mL.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(pL,function(){"use strict";var e={},t={};function n(c,a,_){if(t[c]=_,c==="index"){var w="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",q={};return t.shared(q),t.index(e,q),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),e}}n("shared",["exports"],function(c){"use strict";function a(l,i,s,h){return new(s||(s=Promise))(function(p,g){function y(P){try{T(h.next(P))}catch(C){g(C)}}function b(P){try{T(h.throw(P))}catch(C){g(C)}}function T(P){var C;P.done?p(P.value):(C=P.value,C instanceof s?C:new s(function(D){D(C)})).then(y,b)}T((h=h.apply(l,i||[])).next())})}function _(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var w,q;function M(){if(q)return w;function l(i,s){this.x=i,this.y=s}return q=1,w=l,l.prototype={clone:function(){return new l(this.x,this.y)},add:function(i){return this.clone()._add(i)},sub:function(i){return this.clone()._sub(i)},multByPoint:function(i){return this.clone()._multByPoint(i)},divByPoint:function(i){return this.clone()._divByPoint(i)},mult:function(i){return this.clone()._mult(i)},div:function(i){return this.clone()._div(i)},rotate:function(i){return this.clone()._rotate(i)},rotateAround:function(i,s){return this.clone()._rotateAround(i,s)},matMult:function(i){return this.clone()._matMult(i)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(i){return this.x===i.x&&this.y===i.y},dist:function(i){return Math.sqrt(this.distSqr(i))},distSqr:function(i){var s=i.x-this.x,h=i.y-this.y;return s*s+h*h},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(i){return Math.atan2(this.y-i.y,this.x-i.x)},angleWith:function(i){return this.angleWithSep(i.x,i.y)},angleWithSep:function(i,s){return Math.atan2(this.x*s-this.y*i,this.x*i+this.y*s)},_matMult:function(i){var s=i[2]*this.x+i[3]*this.y;return this.x=i[0]*this.x+i[1]*this.y,this.y=s,this},_add:function(i){return this.x+=i.x,this.y+=i.y,this},_sub:function(i){return this.x-=i.x,this.y-=i.y,this},_mult:function(i){return this.x*=i,this.y*=i,this},_div:function(i){return this.x/=i,this.y/=i,this},_multByPoint:function(i){return this.x*=i.x,this.y*=i.y,this},_divByPoint:function(i){return this.x/=i.x,this.y/=i.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var i=this.y;return this.y=this.x,this.x=-i,this},_rotate:function(i){var s=Math.cos(i),h=Math.sin(i),p=h*this.x+s*this.y;return this.x=s*this.x-h*this.y,this.y=p,this},_rotateAround:function(i,s){var h=Math.cos(i),p=Math.sin(i),g=s.y+p*(this.x-s.x)+h*(this.y-s.y);return this.x=s.x+h*(this.x-s.x)-p*(this.y-s.y),this.y=g,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(i){return i instanceof l?i:Array.isArray(i)?new l(i[0],i[1]):i},w}typeof SuppressedError=="function"&&SuppressedError;var O,k,$=_(M()),fe=function(){if(k)return O;function l(i,s,h,p){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=s,this.p2x=h,this.p2y=p}return k=1,O=l,l.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,s){if(s===void 0&&(s=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,p=0;p<8;p++){var g=this.sampleCurveX(h)-i;if(Math.abs(g)<s)return h;var y=this.sampleCurveDerivativeX(h);if(Math.abs(y)<1e-6)break;h-=g/y}var b=0,T=1;for(h=i,p=0;p<20&&(g=this.sampleCurveX(h),!(Math.abs(g-i)<s));p++)i>g?b=h:T=h,h=.5*(T-b)+b;return h},solve:function(i,s){return this.sampleCurveY(this.solveCurveX(i,s))}},O}(),Pe=_(fe);let Se,ne;function re(){return Se==null&&(Se=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),Se}function ae(){if(ne==null&&(ne=!1,re())){let i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){let p=4*h;i.fillStyle=`rgb(${p},${p+1},${p+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}let s=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){ne=!0;break}}}return ne||!1}var _e=1e-6,Te=typeof Float32Array!="undefined"?Float32Array:Array;function nt(){var l=new Te(9);return Te!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[5]=0,l[6]=0,l[7]=0),l[0]=1,l[4]=1,l[8]=1,l}function Ve(l){return l[0]=1,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=1,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=1,l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l}function ut(){var l=new Te(3);return Te!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l}function St(l){return Math.hypot(l[0],l[1],l[2])}function xt(l,i,s){var h=new Te(3);return h[0]=l,h[1]=i,h[2]=s,h}Math.hypot||(Math.hypot=function(){for(var l=0,i=arguments.length;i--;)l+=arguments[i]*arguments[i];return Math.sqrt(l)});var Jr,mn=St;function qi(l,i,s){var h=i[0],p=i[1],g=i[2],y=i[3];return l[0]=s[0]*h+s[4]*p+s[8]*g+s[12]*y,l[1]=s[1]*h+s[5]*p+s[9]*g+s[13]*y,l[2]=s[2]*h+s[6]*p+s[10]*g+s[14]*y,l[3]=s[3]*h+s[7]*p+s[11]*g+s[15]*y,l}function Nu(){var l=new Te(4);return Te!=Float32Array&&(l[0]=0,l[1]=0,l[2]=0),l[3]=1,l}function il(){var l=new Te(2);return Te!=Float32Array&&(l[0]=0,l[1]=0),l}function ju(l,i){var s=new Te(2);return s[0]=l,s[1]=i,s}ut(),Jr=new Te(4),Te!=Float32Array&&(Jr[0]=0,Jr[1]=0,Jr[2]=0,Jr[3]=0),ut(),xt(1,0,0),xt(0,1,0),Nu(),Nu(),nt(),il();let er=8192;function qo(l,i,s){return i*(er/(l.tileSize*Math.pow(2,s-l.tileID.overscaledZ)))}function _a(l,i){return(l%i+i)%i}function nl(l,i,s){return l*(1-s)+i*s}function ia(l){if(l<=0)return 0;if(l>=1)return 1;let i=l*l,s=i*l;return 4*(l<.5?s:3*(l-i)+s-.75)}function Ph(l,i,s,h){let p=new Pe(l,i,s,h);return g=>p.solve(g)}let na=Ph(.25,.1,.25,1);function mi(l,i,s){return Math.min(s,Math.max(i,l))}function Po(l,i,s){let h=s-i,p=((l-i)%h+h)%h+i;return p===i?s:p}function vn(l,...i){for(let s of i)for(let h in s)l[h]=s[h];return l}let al=1;function cs(l,i,s){let h={};for(let p in l)h[p]=i.call(this,l[p],p,l);return h}function Uu(l,i,s){let h={};for(let p in l)i.call(this,l[p],p,l)&&(h[p]=l[p]);return h}function gn(l){return Array.isArray(l)?l.map(gn):typeof l=="object"&&l?cs(l,gn):l}let yn={};function Fi(l){yn[l]||(typeof console!="undefined"&&console.warn(l),yn[l]=!0)}function ar(l,i,s){return(s.y-l.y)*(i.x-l.x)>(i.y-l.y)*(s.x-l.x)}function xa(l){return typeof WorkerGlobalScope!="undefined"&&l!==void 0&&l instanceof WorkerGlobalScope}let Ao=null;function Dn(l){return typeof ImageBitmap!="undefined"&&l instanceof ImageBitmap}let $u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Vu(l,i,s,h,p){return a(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let g=new VideoFrame(l,{timestamp:0});try{let y=g==null?void 0:g.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);let b=y.startsWith("BGR"),T=new Uint8ClampedArray(h*p*4);if(yield g.copyTo(T,function(P,C,D,F,N){let j=4*Math.max(1,0),G=(Math.max(0,D)-D)*F*4+j,Y=4*F,ie=Math.max(0,C),me=Math.max(0,D);return{rect:{x:ie,y:me,width:Math.min(P.width,C+F)-ie,height:Math.min(P.height,D+N)-me},layout:[{offset:G,stride:Y}]}}(l,i,s,h,p)),b)for(let P=0;P<T.length;P+=4){let C=T[P];T[P]=T[P+2],T[P+2]=C}return T}finally{g.close()}})}let _n,ba;function hs(l,i,s,h){return l.addEventListener(i,s,h),{unsubscribe:()=>{l.removeEventListener(i,s,h)}}}function fs(l){return l*Math.PI/180}function Ya(l){return l/Math.PI*180}let ol={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},sl={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},ll="AbortError";function Xa(){return new Error(ll)}let Ja={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function Co(l){return Ja.REGISTERED_PROTOCOLS[l.substring(0,l.indexOf("://"))]}let ul="global-dispatcher";class Ln extends Error{constructor(i,s,h,p){super(`AJAXError: ${s} (${i}): ${h}`),this.status=i,this.statusText=s,this.url=h,this.body=p}}let nn=()=>xa(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,wa=function(l,i){if(/:\/\//.test(l.url)&&!/^https?:|^file:/.test(l.url)){let h=Co(l.url);if(h)return h(l,i);if(xa(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,targetMapId:ul},i)}if(!(/^file:/.test(s=l.url)||/^file:/.test(nn())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return a(this,void 0,void 0,function*(){let g=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:nn(),signal:p.signal}),y,b;h.type!=="json"||g.headers.has("Accept")||g.headers.set("Accept","application/json");try{y=yield fetch(g)}catch(P){throw new Ln(0,P.message,h.url,new Blob())}if(!y.ok){let P=yield y.blob();throw new Ln(y.status,y.statusText,h.url,P)}b=h.type==="arrayBuffer"||h.type==="image"?y.arrayBuffer():h.type==="json"?y.json():y.text();let T=yield b;if(p.signal.aborted)throw Xa();return{data:T,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}})}(l,i);if(xa(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:l,mustQueue:!0,targetMapId:ul},i)}var s;return function(h,p){return new Promise((g,y)=>{var b;let T=new XMLHttpRequest;T.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(T.responseType="arraybuffer");for(let P in h.headers)T.setRequestHeader(P,h.headers[P]);h.type==="json"&&(T.responseType="text",!((b=h.headers)===null||b===void 0)&&b.Accept||T.setRequestHeader("Accept","application/json")),T.withCredentials=h.credentials==="include",T.onerror=()=>{y(new Error(T.statusText))},T.onload=()=>{if(!p.signal.aborted)if((T.status>=200&&T.status<300||T.status===0)&&T.response!==null){let P=T.response;if(h.type==="json")try{P=JSON.parse(T.response)}catch(C){return void y(C)}g({data:P,cacheControl:T.getResponseHeader("Cache-Control"),expires:T.getResponseHeader("Expires")})}else{let P=new Blob([T.response],{type:T.getResponseHeader("Content-Type")});y(new Ln(T.status,T.statusText,h.url,P))}},p.signal.addEventListener("abort",()=>{T.abort(),y(Xa())}),T.send(h.body)})}(l,i)};function xe(l){if(!l||l.indexOf("://")<=0||l.indexOf("data:image/")===0||l.indexOf("blob:")===0)return!0;let i=new URL(l),s=window.location;return i.protocol===s.protocol&&i.host===s.host}function Z(l,i,s){s[l]&&s[l].indexOf(i)!==-1||(s[l]=s[l]||[],s[l].push(i))}function H(l,i,s){if(s&&s[l]){let h=s[l].indexOf(i);h!==-1&&s[l].splice(h,1)}}class J{constructor(i,s={}){vn(this,s),this.type=i}}class le extends J{constructor(i,s={}){super("error",vn({error:i},s))}}class ve{on(i,s){return this._listeners=this._listeners||{},Z(i,s,this._listeners),{unsubscribe:()=>{this.off(i,s)}}}off(i,s){return H(i,s,this._listeners),H(i,s,this._oneTimeListeners),this}once(i,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Z(i,s,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,s){typeof i=="string"&&(i=new J(i,s||{}));let h=i.type;if(this.listens(h)){i.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let b of p)b.call(this,i);let g=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let b of g)H(h,b,this._oneTimeListeners),b.call(this,i);let y=this._eventedParent;y&&(vn(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(i))}else i instanceof le&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,s){return this._eventedParent=i,this._eventedParentData=s,this}}var X={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let qe=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ye(l,i){let s={};for(let h in l)h!=="ref"&&(s[h]=l[h]);return qe.forEach(h=>{h in i&&(s[h]=i[h])}),s}function we(l,i){if(Array.isArray(l)){if(!Array.isArray(i)||l.length!==i.length)return!1;for(let s=0;s<l.length;s++)if(!we(l[s],i[s]))return!1;return!0}if(typeof l=="object"&&l!==null&&i!==null){if(typeof i!="object"||Object.keys(l).length!==Object.keys(i).length)return!1;for(let s in l)if(!we(l[s],i[s]))return!1;return!0}return l===i}function Ae(l,i){l.push(i)}function be(l,i,s){Ae(s,{command:"addSource",args:[l,i[l]]})}function Be(l,i,s){Ae(i,{command:"removeSource",args:[l]}),s[l]=!0}function Ye(l,i,s,h){Be(l,s,h),be(l,i,s)}function Xe(l,i,s){let h;for(h in l[s])if(Object.prototype.hasOwnProperty.call(l[s],h)&&h!=="data"&&!we(l[s][h],i[s][h]))return!1;for(h in i[s])if(Object.prototype.hasOwnProperty.call(i[s],h)&&h!=="data"&&!we(l[s][h],i[s][h]))return!1;return!0}function ht(l,i,s,h,p,g){l=l||{},i=i||{};for(let y in l)Object.prototype.hasOwnProperty.call(l,y)&&(we(l[y],i[y])||s.push({command:g,args:[h,y,i[y],p]}));for(let y in i)Object.prototype.hasOwnProperty.call(i,y)&&!Object.prototype.hasOwnProperty.call(l,y)&&(we(l[y],i[y])||s.push({command:g,args:[h,y,i[y],p]}))}function Et(l){return l.id}function yt(l,i){return l[i.id]=i,l}class ke{constructor(i,s,h,p){this.message=(i?`${i}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function Yt(l,...i){for(let s of i)for(let h in s)l[h]=s[h];return l}class Bt extends Error{constructor(i,s){super(s),this.message=s,this.key=i}}class Zt{constructor(i,s=[]){this.parent=i,this.bindings={};for(let[h,p]of s)this.bindings[h]=p}concat(i){return new Zt(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}let gt={kind:"null"},Fe={kind:"number"},pt={kind:"string"},qt={kind:"boolean"},Ir={kind:"color"},Er={kind:"projectionDefinition"},an={kind:"object"},Pt={kind:"value"},cl={kind:"collator"},Gu={kind:"formatted"},ds={kind:"padding"},Zu={kind:"colorArray"},Qa={kind:"numberArray"},ps={kind:"resolvedImage"},Fr={kind:"variableAnchorOffsetCollection"};function xn(l,i){return{kind:"array",itemType:l,N:i}}function pr(l){if(l.kind==="array"){let i=pr(l.itemType);return typeof l.N=="number"?`array<${i}, ${l.N}>`:l.itemType.kind==="value"?"array":`array<${i}>`}return l.kind}let Hu=[gt,Fe,pt,qt,Ir,Er,Gu,an,xn(Pt),ds,Qa,Zu,ps,Fr];function hl(l,i){if(i.kind==="error")return null;if(l.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!hl(l.itemType,i.itemType))&&(typeof l.N!="number"||l.N===i.N))return null}else{if(l.kind===i.kind)return null;if(l.kind==="value"){for(let s of Hu)if(!hl(s,i))return null}}return`Expected ${pr(l)} but found ${pr(i)} instead.`}function wp(l,i){return i.some(s=>s.kind===l.kind)}function ms(l,i){return i.some(s=>s==="null"?l===null:s==="array"?Array.isArray(l):s==="object"?l&&!Array.isArray(l)&&typeof l=="object":s===typeof l)}function eo(l,i){return l.kind==="array"&&i.kind==="array"?l.itemType.kind===i.itemType.kind&&typeof l.N=="number":l.kind===i.kind}let Vy=.96422,Sp=.82521,Gy=4/29,fl=6/29,Zy=3*fl*fl,aS=fl*fl*fl,oS=Math.PI/180,sS=180/Math.PI;function Hy(l){return(l%=360)<0&&(l+=360),l}function Tp([l,i,s,h]){let p,g,y=Ip((.2225045*(l=vs(l))+.7168786*(i=vs(i))+.0606169*(s=vs(s)))/1);l===i&&i===s?p=g=y:(p=Ip((.4360747*l+.3850649*i+.1430804*s)/Vy),g=Ip((.0139322*l+.0971045*i+.7141733*s)/Sp));let b=116*y-16;return[b<0?0:b,500*(p-y),200*(y-g),h]}function vs(l){return l<=.04045?l/12.92:Math.pow((l+.055)/1.055,2.4)}function Ip(l){return l>aS?Math.pow(l,1/3):l/Zy+Gy}function Wy([l,i,s,h]){let p=(l+16)/116,g=isNaN(i)?p:p+i/500,y=isNaN(s)?p:p-s/200;return p=1*Ep(p),g=Vy*Ep(g),y=Sp*Ep(y),[gs(3.1338561*g-1.6168667*p-.4906146*y),gs(-.9787684*g+1.9161415*p+.033454*y),gs(.0719453*g-.2289914*p+1.4052427*y),h]}function gs(l){return(l=l<=.00304?12.92*l:1.055*Math.pow(l,1/2.4)-.055)<0?0:l>1?1:l}function Ep(l){return l>fl?l*l*l:Zy*(l-Gy)}let lS=Object.hasOwn||function(l,i){return Object.prototype.hasOwnProperty.call(l,i)};function Wu(l,i){return lS(l,i)?l[i]:void 0}function Ku(l){return parseInt(l.padEnd(2,l),16)/255}function qp(l,i){return Bi(i?l/100:l,0,1)}function Bi(l,i,s){return Math.min(Math.max(i,l),s)}function $t(l){return!l.some(Number.isNaN)}let dl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ni(l,i,s){return l+s*(i-l)}function ys(l,i,s){return l.map((h,p)=>Ni(h,i[p],s))}class Nt{constructor(i,s,h,p=1,g=!0){this.r=i,this.g=s,this.b=h,this.a=p,g||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[i,s,h,p]))}static parse(i){if(i instanceof Nt)return i;if(typeof i!="string")return;let s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let p=Wu(dl,h);if(p){let[y,b,T]=p;return[y/255,b/255,T/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let y=h.length<6?1:2,b=1;return[Ku(h.slice(b,b+=y)),Ku(h.slice(b,b+=y)),Ku(h.slice(b,b+=y)),Ku(h.slice(b,b+y)||"ff")]}if(h.startsWith("rgb")){let y=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[b,T,P,C,D,F,N,j,G,Y,ie,me]=y,se=[C||" ",N||" ",Y].join("");if(se==="  "||se==="  /"||se===",,"||se===",,,"){let B=[P,F,G].join(""),K=B==="%%%"?100:B===""?255:0;if(K){let ue=[Bi(+T/K,0,1),Bi(+D/K,0,1),Bi(+j/K,0,1),ie?qp(+ie,me):1];if($t(ue))return ue}}return}}let g=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){let[y,b,T,P,C,D,F,N,j]=g,G=[T||" ",C||" ",F].join("");if(G==="  "||G==="  /"||G===",,"||G===",,,"){let Y=[+b,Bi(+P,0,100),Bi(+D,0,100),N?qp(+N,j):1];if($t(Y))return function([ie,me,se,B]){function K(ue){let Ee=(ue+ie/30)%12,Ne=me*Math.min(se,1-se);return se-Ne*Math.max(-1,Math.min(Ee-3,9-Ee,1))}return ie=Hy(ie),me/=100,se/=100,[K(0),K(8),K(4),B]}(Y)}}}(i);return s?new Nt(...s,!1):void 0}get rgb(){let{r:i,g:s,b:h,a:p}=this,g=p||1/0;return this.overwriteGetter("rgb",[i/g,s/g,h/g,p])}get hcl(){return this.overwriteGetter("hcl",function(i){let[s,h,p,g]=Tp(i),y=Math.sqrt(h*h+p*p);return[Math.round(1e4*y)?Hy(Math.atan2(p,h)*sS):NaN,y,s,g]}(this.rgb))}get lab(){return this.overwriteGetter("lab",Tp(this.rgb))}overwriteGetter(i,s){return Object.defineProperty(this,i,{value:s}),s}toString(){let[i,s,h,p]=this.rgb;return`rgba(${[i,s,h].map(g=>Math.round(255*g)).join(",")},${p})`}static interpolate(i,s,h,p="rgb"){switch(p){case"rgb":{let[g,y,b,T]=ys(i.rgb,s.rgb,h);return new Nt(g,y,b,T,!1)}case"hcl":{let[g,y,b,T]=i.hcl,[P,C,D,F]=s.hcl,N,j;if(isNaN(g)||isNaN(P))isNaN(g)?isNaN(P)?N=NaN:(N=P,b!==1&&b!==0||(j=C)):(N=g,D!==1&&D!==0||(j=y));else{let se=P-g;P>g&&se>180?se-=360:P<g&&g-P>180&&(se+=360),N=g+h*se}let[G,Y,ie,me]=function([se,B,K,ue]){return se=isNaN(se)?0:se*oS,Wy([K,Math.cos(se)*B,Math.sin(se)*B,ue])}([N,j!=null?j:Ni(y,C,h),Ni(b,D,h),Ni(T,F,h)]);return new Nt(G,Y,ie,me,!1)}case"lab":{let[g,y,b,T]=Wy(ys(i.lab,s.lab,h));return new Nt(g,y,b,T,!1)}}}}Nt.black=new Nt(0,0,0,1),Nt.white=new Nt(1,1,1,1),Nt.transparent=new Nt(0,0,0,0),Nt.red=new Nt(1,0,0,1);class Yu{constructor(i,s,h){this.sensitivity=i?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,s){return this.collator.compare(i,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}let Xu=["bottom","center","top"];class pl{constructor(i,s,h,p,g,y){this.text=i,this.image=s,this.scale=h,this.fontStack=p,this.textColor=g,this.verticalAlign=y}}class on{constructor(i){this.sections=i}static fromString(i){return new on([new pl(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof on?i:on.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class vi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof vi)return i;if(typeof i=="number")return new vi([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(let s of i)if(typeof s!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new vi(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,s,h){return new vi(ys(i.values,s.values,h))}}class Br{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Br)return i;if(typeof i=="number")return new Br([i]);if(Array.isArray(i)){for(let s of i)if(typeof s!="number")return;return new Br(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,s,h){return new Br(ys(i.values,s.values,h))}}class gi{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof gi)return i;if(typeof i=="string"){let h=Nt.parse(i);return h?new gi([h]):void 0}if(!Array.isArray(i))return;let s=[];for(let h of i){if(typeof h!="string")return;let p=Nt.parse(h);if(!p)return;s.push(p)}return new gi(s)}toString(){return JSON.stringify(this.values)}static interpolate(i,s,h,p="rgb"){let g=[];if(i.values.length!=s.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${s.values.length}), cannot interpolate.`);for(let y=0;y<i.values.length;y++)g.push(Nt.interpolate(i.values[y],s.values[y],h,p));return new gi(g)}}class ur extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}let ml=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ji{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof ji)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let s=0;s<i.length;s+=2){let h=i[s],p=i[s+1];if(typeof h!="string"||!ml.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new ji(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,s,h){let p=i.values,g=s.values;if(p.length!==g.length)throw new ur(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${s.toString()}`);let y=[];for(let b=0;b<p.length;b+=2){if(p[b]!==g[b])throw new ur(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${p[b]}, to[${b}]: ${g[b]}`);y.push(p[b]);let[T,P]=p[b+1],[C,D]=g[b+1];y.push([Ni(T,C,h),Ni(P,D,h)])}return new ji(y)}}class bn{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new bn({name:i,available:!1}):null}}class sn{constructor(i,s,h){this.from=i,this.to=s,this.transition=h}static interpolate(i,s,h){return new sn(i,s,h)}static parse(i){return i instanceof sn?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new sn(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new sn(i.from,i.to,i.transition):typeof i=="string"?new sn(i,i,1):void 0}}function Ju(l,i,s,h){return typeof l=="number"&&l>=0&&l<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[l,i,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[l,i,s,h]:[l,i,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function tr(l){if(l===null||typeof l=="string"||typeof l=="boolean"||typeof l=="number"||l instanceof sn||l instanceof Nt||l instanceof Yu||l instanceof on||l instanceof vi||l instanceof Br||l instanceof gi||l instanceof ji||l instanceof bn)return!0;if(Array.isArray(l)){for(let i of l)if(!tr(i))return!1;return!0}if(typeof l=="object"){for(let i in l)if(!tr(l[i]))return!1;return!0}return!1}function qr(l){if(l===null)return gt;if(typeof l=="string")return pt;if(typeof l=="boolean")return qt;if(typeof l=="number")return Fe;if(l instanceof Nt)return Ir;if(l instanceof sn)return Er;if(l instanceof Yu)return cl;if(l instanceof on)return Gu;if(l instanceof vi)return ds;if(l instanceof Br)return Qa;if(l instanceof gi)return Zu;if(l instanceof ji)return Fr;if(l instanceof bn)return ps;if(Array.isArray(l)){let i=l.length,s;for(let h of l){let p=qr(h);if(s){if(s===p)continue;s=Pt;break}s=p}return xn(s||Pt,i)}return an}function jt(l){let i=typeof l;return l===null?"":i==="string"||i==="number"||i==="boolean"?String(l):l instanceof Nt||l instanceof sn||l instanceof on||l instanceof vi||l instanceof Br||l instanceof gi||l instanceof ji||l instanceof bn?l.toString():JSON.stringify(l)}class Tt{constructor(i,s){this.type=i,this.value=s}static parse(i,s){if(i.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!tr(i[1]))return s.error("invalid value");let h=i[1],p=qr(h),g=s.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new Tt(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}let vl={string:pt,number:Fe,boolean:qt,object:an};class At{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h,p=1,g=i[0];if(g==="array"){let b,T;if(i.length>2){let P=i[1];if(typeof P!="string"||!(P in vl)||P==="object")return s.error("The item type argument of \"array\" must be one of string, number, boolean",1);b=vl[P],p++}else b=Pt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return s.error("The length argument to \"array\" must be a positive integer literal",2);T=i[2],p++}h=xn(b,T)}else{if(!vl[g])throw new Error(`Types doesn't contain name = ${g}`);h=vl[g]}let y=[];for(;p<i.length;p++){let b=s.parse(i[p],p,Pt);if(!b)return null;y.push(b)}return new At(h,y)}evaluate(i){for(let s=0;s<this.args.length;s++){let h=this.args[s].evaluate(i);if(!hl(this.type,qr(h)))return h;if(s===this.args.length-1)throw new ur(`Expected value to be of type ${pr(this.type)}, but found ${pr(qr(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let Ah={"to-boolean":qt,"to-color":Ir,"to-number":Fe,"to-string":pt};class Pi{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h=i[0];if(!Ah[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return s.error("Expected one argument.");let p=Ah[h],g=[];for(let y=1;y<i.length;y++){let b=s.parse(i[y],y,Pt);if(!b)return null;g.push(b)}return new Pi(p,g)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let s,h;for(let p of this.args){if(s=p.evaluate(i),h=null,s instanceof Nt)return s;if(typeof s=="string"){let g=i.parseColor(s);if(g)return g}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rgba value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Ju(s[0],s[1],s[2],s[3]),!h))return new Nt(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new ur(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(let h of this.args){s=h.evaluate(i);let p=vi.parse(s);if(p)return p}throw new ur(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"numberArray":{let s;for(let h of this.args){s=h.evaluate(i);let p=Br.parse(s);if(p)return p}throw new ur(`Could not parse numberArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"colorArray":{let s;for(let h of this.args){s=h.evaluate(i);let p=gi.parse(s);if(p)return p}throw new ur(`Could not parse colorArray from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(let h of this.args){s=h.evaluate(i);let p=ji.parse(s);if(p)return p}throw new ur(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(let h of this.args){if(s=h.evaluate(i),s===null)return 0;let p=Number(s);if(!isNaN(p))return p}throw new ur(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return on.fromString(jt(this.args[0].evaluate(i)));case"resolvedImage":return bn.fromString(jt(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return jt(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let Pp=["Unknown","Point","LineString","Polygon"];class Ap{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Pp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let s=this._parseColorCache.get(i);return s||(s=Nt.parse(i),this._parseColorCache.set(i,s)),s}}class Qu{constructor(i,s,h=[],p,g=new Zt,y=[]){this.registry=i,this.path=h,this.key=h.map(b=>`[${b}]`).join(""),this.scope=g,this.errors=y,this.expectedType=p,this._isConstant=s}parse(i,s,h,p,g={}){return s?this.concat(s,h,p)._parse(i,g):this._parse(i,g)}_parse(i,s){function h(p,g,y){return y==="assert"?new At(g,[p]):y==="coerce"?new Pi(g,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let g=this.registry[p];if(g){let y=g.parse(i,this);if(!y)return null;if(this.expectedType){let b=this.expectedType,T=y.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||T.kind!=="value"){if(b.kind==="projectionDefinition"&&["string","array"].includes(T.kind)||["color","formatted","resolvedImage"].includes(b.kind)&&["value","string"].includes(T.kind)||["padding","numberArray"].includes(b.kind)&&["value","number","array"].includes(T.kind)||b.kind==="colorArray"&&["value","string","array"].includes(T.kind)||b.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(T.kind))y=h(y,b,s.typeAnnotation||"coerce");else if(this.checkSubtype(b,T))return null}else y=h(y,b,s.typeAnnotation||"assert")}if(!(y instanceof Tt)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){let b=new Ap;try{y=new Tt(y.type,y.evaluate(b))}catch(T){return this.error(T.message),null}}return y}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof i} instead.`)}concat(i,s,h){let p=typeof i=="number"?this.path.concat(i):this.path,g=h?this.scope.concat(h):this.scope;return new Qu(this.registry,this._isConstant,p,s||null,g,this.errors)}error(i,...s){let h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Bt(h,i))}checkSubtype(i,s){let h=hl(i,s);return h&&this.error(h),h}}class gl{constructor(i,s){this.type=s.type,this.bindings=[].concat(i),this.result=s}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(let s of this.bindings)i(s[1]);i(this.result)}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);let h=[];for(let g=1;g<i.length-1;g+=2){let y=i[g];if(typeof y!="string")return s.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return s.error("Variable names must contain only alphanumeric characters or '_'.",g);let b=s.parse(i[g+1],g+1);if(!b)return null;h.push([y,b])}let p=s.parse(i[i.length-1],i.length-1,s.expectedType,h);return p?new gl(h,p):null}outputDefined(){return this.result.outputDefined()}}class ec{constructor(i,s){this.type=s.type,this.name=i,this.boundExpression=s}static parse(i,s){if(i.length!==2||typeof i[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");let h=i[1];return s.scope.has(h)?new ec(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Cp{constructor(i,s,h){this.type=i,this.index=s,this.input=h}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,Fe),p=s.parse(i[2],2,xn(s.expectedType||Pt));return h&&p?new Cp(p.type.itemType,h,p):null}evaluate(i){let s=this.index.evaluate(i),h=this.input.evaluate(i);if(s<0)throw new ur(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new ur(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new ur(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Ch{constructor(i,s){this.type=qt,this.needle=i,this.haystack=s}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,Pt),p=s.parse(i[2],2,Pt);return h&&p?wp(h.type,[qt,pt,Fe,gt,Pt])?new Ch(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${pr(h.type)} instead`):null}evaluate(i){let s=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!ms(s,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${pr(qr(s))} instead.`);if(!ms(h,["string","array"]))throw new ur(`Expected second argument to be of type array or string, but found ${pr(qr(h))} instead.`);return h.indexOf(s)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class tc{constructor(i,s,h){this.type=Fe,this.needle=i,this.haystack=s,this.fromIndex=h}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,Pt),p=s.parse(i[2],2,Pt);if(!h||!p)return null;if(!wp(h.type,[qt,pt,Fe,gt,Pt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${pr(h.type)} instead`);if(i.length===4){let g=s.parse(i[3],3,Fe);return g?new tc(h,p,g):null}return new tc(h,p)}evaluate(i){let s=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!ms(s,["boolean","string","number","null"]))throw new ur(`Expected first argument to be of type boolean, string, number or null, but found ${pr(qr(s))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(i)),ms(h,["string"])){let g=h.indexOf(s,p);return g===-1?-1:[...h.slice(0,g)].length}if(ms(h,["array"]))return h.indexOf(s,p);throw new ur(`Expected second argument to be of type array or string, but found ${pr(qr(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class _s{constructor(i,s,h,p,g,y){this.inputType=i,this.type=s,this.input=h,this.cases=p,this.outputs=g,this.otherwise=y}static parse(i,s){if(i.length<5)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);let g={},y=[];for(let P=2;P<i.length-1;P+=2){let C=i[P],D=i[P+1];Array.isArray(C)||(C=[C]);let F=s.concat(P);if(C.length===0)return F.error("Expected at least one branch label.");for(let j of C){if(typeof j!="number"&&typeof j!="string")return F.error("Branch labels must be numbers or strings.");if(typeof j=="number"&&Math.abs(j)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof j=="number"&&Math.floor(j)!==j)return F.error("Numeric branch labels must be integer values.");if(h){if(F.checkSubtype(h,qr(j)))return null}else h=qr(j);if(g[String(j)]!==void 0)return F.error("Branch labels must be unique.");g[String(j)]=y.length}let N=s.parse(D,P,p);if(!N)return null;p=p||N.type,y.push(N)}let b=s.parse(i[1],1,Pt);if(!b)return null;let T=s.parse(i[i.length-1],i.length-1,p);return T?b.type.kind!=="value"&&s.concat(1).checkSubtype(h,b.type)?null:new _s(h,p,b,g,y,T):null}evaluate(i){let s=this.input.evaluate(i);return(qr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class ai{constructor(i,s,h){this.type=i,this.branches=s,this.otherwise=h}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);let p=[];for(let y=1;y<i.length-1;y+=2){let b=s.parse(i[y],y,qt);if(!b)return null;let T=s.parse(i[y+1],y+1,h);if(!T)return null;p.push([b,T]),h=h||T.type}let g=s.parse(i[i.length-1],i.length-1,h);if(!g)return null;if(!h)throw new Error("Can't infer output type");return new ai(h,p,g)}evaluate(i){for(let[s,h]of this.branches)if(s.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(let[s,h]of this.branches)i(s),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class xs{constructor(i,s,h,p){this.type=i,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,Pt),p=s.parse(i[2],2,Fe);if(!h||!p)return null;if(!wp(h.type,[xn(Pt),pt,Pt]))return s.error(`Expected first argument to be of type array or string, but found ${pr(h.type)} instead`);if(i.length===4){let g=s.parse(i[3],3,Fe);return g?new xs(h.type,h,p,g):null}return new xs(h.type,h,p)}evaluate(i){let s=this.input.evaluate(i),h=this.beginIndex.evaluate(i),p;if(this.endIndex&&(p=this.endIndex.evaluate(i)),ms(s,["string"]))return[...s].slice(h,p).join("");if(ms(s,["array"]))return s.slice(h,p);throw new ur(`Expected first argument to be of type array or string, but found ${pr(qr(s))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function rc(l,i){let s=l.length-1,h,p,g=0,y=s,b=0;for(;g<=y;)if(b=Math.floor((g+y)/2),h=l[b],p=l[b+1],h<=i){if(b===s||i<p)return b;g=b+1}else{if(!(h>i))throw new ur("Input is not a number.");y=b-1}return 0}class Mo{constructor(i,s,h){this.type=i,this.input=s,this.labels=[],this.outputs=[];for(let[p,g]of h)this.labels.push(p),this.outputs.push(g)}static parse(i,s){if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");let h=s.parse(i[1],1,Fe);if(!h)return null;let p=[],g=null;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);for(let y=1;y<i.length;y+=2){let b=y===1?-1/0:i[y],T=i[y+1],P=y,C=y+1;if(typeof b!="number")return s.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",P);if(p.length&&p[p.length-1][0]>=b)return s.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",P);let D=s.parse(T,C,g);if(!D)return null;g=g||D.type,p.push([b,D])}return new Mo(g,h,p)}evaluate(i){let s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(i);let p=this.input.evaluate(i);if(p<=s[0])return h[0].evaluate(i);let g=s.length;return p>=s[g-1]?h[g-1].evaluate(i):h[rc(s,p)].evaluate(i)}eachChild(i){i(this.input);for(let s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function oi(l){return l&&l.__esModule&&Object.prototype.hasOwnProperty.call(l,"default")?l.default:l}var Mh,Rh,Ky=function(){if(Rh)return Mh;function l(i,s,h,p){this.cx=3*i,this.bx=3*(h-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*s,this.by=3*(p-s)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=s,this.p2x=h,this.p2y=p}return Rh=1,Mh=l,l.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,s){if(s===void 0&&(s=1e-6),i<0)return 0;if(i>1)return 1;for(var h=i,p=0;p<8;p++){var g=this.sampleCurveX(h)-i;if(Math.abs(g)<s)return h;var y=this.sampleCurveDerivativeX(h);if(Math.abs(y)<1e-6)break;h-=g/y}var b=0,T=1;for(h=i,p=0;p<20&&(g=this.sampleCurveX(h),!(Math.abs(g-i)<s));p++)i>g?b=h:T=h,h=.5*(T-b)+b;return h},solve:function(i,s){return this.sampleCurveY(this.solveCurveX(i,s))}},Mh}(),uS=oi(Ky);class Ai{constructor(i,s,h,p,g){this.type=i,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[y,b]of g)this.labels.push(y),this.outputs.push(b)}static interpolationFactor(i,s,h,p){let g=0;if(i.name==="exponential")g=ic(s,i.base,h,p);else if(i.name==="linear")g=ic(s,1,h,p);else if(i.name==="cubic-bezier"){let y=i.controlPoints;g=new uS(y[0],y[1],y[2],y[3]).solve(ic(s,1,h,p))}return g}static parse(i,s){let[h,p,g,...y]=i;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let P=p[1];if(typeof P!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:P}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let P=p.slice(1);if(P.length!==4||P.some(C=>typeof C!="number"||C<0||C>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:P}}}if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(g=s.parse(g,2,Fe),!g)return null;let b=[],T=null;h!=="interpolate-hcl"&&h!=="interpolate-lab"||s.expectedType==Zu?s.expectedType&&s.expectedType.kind!=="value"&&(T=s.expectedType):T=Ir;for(let P=0;P<y.length;P+=2){let C=y[P],D=y[P+1],F=P+3,N=P+4;if(typeof C!="number")return s.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",F);if(b.length&&b[b.length-1][0]>=C)return s.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",F);let j=s.parse(D,N,T);if(!j)return null;T=T||j.type,b.push([C,j])}return eo(T,Fe)||eo(T,Er)||eo(T,Ir)||eo(T,ds)||eo(T,Qa)||eo(T,Zu)||eo(T,Fr)||eo(T,xn(Fe))?new Ai(T,h,p,g,b):s.error(`Type ${pr(T)} is not interpolatable.`)}evaluate(i){let s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(i);let p=this.input.evaluate(i);if(p<=s[0])return h[0].evaluate(i);let g=s.length;if(p>=s[g-1])return h[g-1].evaluate(i);let y=rc(s,p),b=Ai.interpolationFactor(this.interpolation,p,s[y],s[y+1]),T=h[y].evaluate(i),P=h[y+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ni(T,P,b);case"color":return Nt.interpolate(T,P,b);case"padding":return vi.interpolate(T,P,b);case"colorArray":return gi.interpolate(T,P,b);case"numberArray":return Br.interpolate(T,P,b);case"variableAnchorOffsetCollection":return ji.interpolate(T,P,b);case"array":return ys(T,P,b);case"projectionDefinition":return sn.interpolate(T,P,b)}case"interpolate-hcl":switch(this.type.kind){case"color":return Nt.interpolate(T,P,b,"hcl");case"colorArray":return gi.interpolate(T,P,b,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Nt.interpolate(T,P,b,"lab");case"colorArray":return gi.interpolate(T,P,b,"lab")}}}eachChild(i){i(this.input);for(let s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ic(l,i,s,h){let p=h-s,g=l-s;return p===0?0:i===1?g/p:(Math.pow(i,g)-1)/(Math.pow(i,p)-1)}let Sa={color:Nt.interpolate,number:Ni,padding:vi.interpolate,numberArray:Br.interpolate,colorArray:gi.interpolate,variableAnchorOffsetCollection:ji.interpolate,array:ys};class bs{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h=null,p=s.expectedType;p&&p.kind!=="value"&&(h=p);let g=[];for(let b of i.slice(1)){let T=s.parse(b,1+g.length,h,void 0,{typeAnnotation:"omit"});if(!T)return null;h=h||T.type,g.push(T)}if(!h)throw new Error("No output type");let y=p&&g.some(b=>hl(p,b.type));return new bs(y?Pt:h,g)}evaluate(i){let s,h=null,p=0;for(let g of this.args)if(p++,h=g.evaluate(i),h&&h instanceof bn&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function nc(l,i){return l==="=="||l==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function zn(l,i,s,h){return h.compare(i,s)===0}function ws(l,i,s){let h=l!=="=="&&l!=="!=";return class sde{constructor(g,y,b){this.type=qt,this.lhs=g,this.rhs=y,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");let b=g[0],T=y.parse(g[1],1,Pt);if(!T)return null;if(!nc(b,T.type))return y.concat(1).error(`"${b}" comparisons are not supported for type '${pr(T.type)}'.`);let P=y.parse(g[2],2,Pt);if(!P)return null;if(!nc(b,P.type))return y.concat(2).error(`"${b}" comparisons are not supported for type '${pr(P.type)}'.`);if(T.type.kind!==P.type.kind&&T.type.kind!=="value"&&P.type.kind!=="value")return y.error(`Cannot compare types '${pr(T.type)}' and '${pr(P.type)}'.`);h&&(T.type.kind==="value"&&P.type.kind!=="value"?T=new At(P.type,[T]):T.type.kind!=="value"&&P.type.kind==="value"&&(P=new At(T.type,[P])));let C=null;if(g.length===4){if(T.type.kind!=="string"&&P.type.kind!=="string"&&T.type.kind!=="value"&&P.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(C=y.parse(g[3],3,cl),!C)return null}return new sde(T,P,C)}evaluate(g){let y=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(h&&this.hasUntypedArgument){let T=qr(y),P=qr(b);if(T.kind!==P.kind||T.kind!=="string"&&T.kind!=="number")throw new ur(`Expected arguments for "${l}" to be (string, string) or (number, number), but found (${T.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let T=qr(y),P=qr(b);if(T.kind!=="string"||P.kind!=="string")return i(g,y,b)}return this.collator?s(g,y,b,this.collator.evaluate(g)):i(g,y,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}let Oh=ws("==",function(l,i,s){return i===s},zn),cS=ws("!=",function(l,i,s){return i!==s},function(l,i,s,h){return!zn(0,i,s,h)}),Mp=ws("<",function(l,i,s){return i<s},function(l,i,s,h){return h.compare(i,s)<0}),hS=ws(">",function(l,i,s){return i>s},function(l,i,s,h){return h.compare(i,s)>0}),fS=ws("<=",function(l,i,s){return i<=s},function(l,i,s,h){return h.compare(i,s)<=0}),dS=ws(">=",function(l,i,s){return i>=s},function(l,i,s,h){return h.compare(i,s)>=0});class kh{constructor(i,s,h){this.type=cl,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=s}static parse(i,s){if(i.length!==2)return s.error("Expected one argument.");let h=i[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");let p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,qt);if(!p)return null;let g=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,qt);if(!g)return null;let y=null;return h.locale&&(y=s.parse(h.locale,1,pt),!y)?null:new kh(p,g,y)}evaluate(i){return new Yu(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class yl{constructor(i,s,h,p,g){this.type=pt,this.number=i,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=g}static parse(i,s){if(i.length!==3)return s.error("Expected two arguments.");let h=s.parse(i[1],1,Fe);if(!h)return null;let p=i[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=s.parse(p.locale,1,pt),!g))return null;let y=null;if(p.currency&&(y=s.parse(p.currency,1,pt),!y))return null;let b=null;if(p["min-fraction-digits"]&&(b=s.parse(p["min-fraction-digits"],1,Fe),!b))return null;let T=null;return p["max-fraction-digits"]&&(T=s.parse(p["max-fraction-digits"],1,Fe),!T)?null:new yl(h,g,y,b,T)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Dh{constructor(i){this.type=Gu,this.sections=i}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h=i[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");let p=[],g=!1;for(let y=1;y<=i.length-1;++y){let b=i[y];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let T=null;if(b["font-scale"]&&(T=s.parse(b["font-scale"],1,Fe),!T))return null;let P=null;if(b["text-font"]&&(P=s.parse(b["text-font"],1,xn(pt)),!P))return null;let C=null;if(b["text-color"]&&(C=s.parse(b["text-color"],1,Ir),!C))return null;let D=null;if(b["vertical-align"]){if(typeof b["vertical-align"]=="string"&&!Xu.includes(b["vertical-align"]))return s.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${b["vertical-align"]}' instead.`);if(D=s.parse(b["vertical-align"],1,pt),!D)return null}let F=p[p.length-1];F.scale=T,F.font=P,F.textColor=C,F.verticalAlign=D}else{let T=s.parse(i[y],1,Pt);if(!T)return null;let P=T.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:T,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Dh(p)}evaluate(i){return new on(this.sections.map(s=>{let h=s.content.evaluate(i);return qr(h)===ps?new pl("",h,null,null,null,s.verticalAlign?s.verticalAlign.evaluate(i):null):new pl(jt(h),null,s.scale?s.scale.evaluate(i):null,s.font?s.font.evaluate(i).join(","):null,s.textColor?s.textColor.evaluate(i):null,s.verticalAlign?s.verticalAlign.evaluate(i):null)}))}eachChild(i){for(let s of this.sections)i(s.content),s.scale&&i(s.scale),s.font&&i(s.font),s.textColor&&i(s.textColor),s.verticalAlign&&i(s.verticalAlign)}outputDefined(){return!1}}class Lh{constructor(i){this.type=ps,this.input=i}static parse(i,s){if(i.length!==2)return s.error("Expected two arguments.");let h=s.parse(i[1],1,pt);return h?new Lh(h):s.error("No image name provided.")}evaluate(i){let s=this.input.evaluate(i),h=bn.fromString(s);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(s)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class zh{constructor(i){this.type=Fe,this.input=i}static parse(i,s){if(i.length!==2)return s.error(`Expected 1 argument, but found ${i.length-1} instead.`);let h=s.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${pr(h.type)} instead.`):new zh(h):null}evaluate(i){let s=this.input.evaluate(i);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new ur(`Expected value to be of type string or array, but found ${pr(qr(s))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}let Ta=8192;function Yy(l,i){let s=(180+l[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(s*p*Ta),Math.round(h*p*Ta)]}function Rp(l,i){let s=Math.pow(2,i.z);return[(p=(l[0]/Ta+i.x)/s,360*p-180),(h=(l[1]/Ta+i.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function ac(l,i){l[0]=Math.min(l[0],i[0]),l[1]=Math.min(l[1],i[1]),l[2]=Math.max(l[2],i[0]),l[3]=Math.max(l[3],i[1])}function oc(l,i){return!(l[0]<=i[0]||l[2]>=i[2]||l[1]<=i[1]||l[3]>=i[3])}function pS(l,i,s){let h=l[0]-i[0],p=l[1]-i[1],g=l[0]-s[0],y=l[1]-s[1];return h*y-g*p==0&&h*g<=0&&p*y<=0}function Fh(l,i,s,h){return(p=[h[0]-s[0],h[1]-s[1]])[0]*(g=[i[0]-l[0],i[1]-l[1]])[1]-p[1]*g[0]!=0&&!(!e_(l,i,s,h)||!e_(s,h,l,i));var p,g}function Xy(l,i,s){for(let h of s)for(let p=0;p<h.length-1;++p)if(Fh(l,i,h[p],h[p+1]))return!0;return!1}function Ss(l,i,s=!1){let h=!1;for(let b of i)for(let T=0;T<b.length-1;T++){if(pS(l,b[T],b[T+1]))return s;(g=b[T])[1]>(p=l)[1]!=(y=b[T+1])[1]>p[1]&&p[0]<(y[0]-g[0])*(p[1]-g[1])/(y[1]-g[1])+g[0]&&(h=!h)}var p,g,y;return h}function Jy(l,i){for(let s of i)if(Ss(l,s))return!0;return!1}function Qy(l,i){for(let s of l)if(!Ss(s,i))return!1;for(let s=0;s<l.length-1;++s)if(Xy(l[s],l[s+1],i))return!1;return!0}function mS(l,i){for(let s of i)if(Qy(l,s))return!0;return!1}function e_(l,i,s,h){let p=h[0]-s[0],g=h[1]-s[1],y=(l[0]-s[0])*g-p*(l[1]-s[1]),b=(i[0]-s[0])*g-p*(i[1]-s[1]);return y>0&&b<0||y<0&&b>0}function sc(l,i,s){let h=[];for(let p=0;p<l.length;p++){let g=[];for(let y=0;y<l[p].length;y++){let b=Yy(l[p][y],s);ac(i,b),g.push(b)}h.push(g)}return h}function t_(l,i,s){let h=[];for(let p=0;p<l.length;p++){let g=sc(l[p],i,s);h.push(g)}return h}function r_(l,i,s,h){if(l[0]<s[0]||l[0]>s[2]){let p=.5*h,g=l[0]-s[0]>p?-h:s[0]-l[0]>p?h:0;g===0&&(g=l[0]-s[2]>p?-h:s[2]-l[0]>p?h:0),l[0]+=g}ac(i,l)}function i_(l,i,s,h){let p=Math.pow(2,h.z)*Ta,g=[h.x*Ta,h.y*Ta],y=[];for(let b of l)for(let T of b){let P=[T.x+g[0],T.y+g[1]];r_(P,i,s,p),y.push(P)}return y}function Op(l,i,s,h){let p=Math.pow(2,h.z)*Ta,g=[h.x*Ta,h.y*Ta],y=[];for(let T of l){let P=[];for(let C of T){let D=[C.x+g[0],C.y+g[1]];ac(i,D),P.push(D)}y.push(P)}if(i[2]-i[0]<=p/2){(b=i)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(let T of y)for(let P of T)r_(P,i,s,p)}var b;return y}class Ro{constructor(i,s){this.type=qt,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(tr(i[1])){let h=i[1];if(h.type==="FeatureCollection"){let p=[];for(let g of h.features){let{type:y,coordinates:b}=g.geometry;y==="Polygon"&&p.push(b),y==="MultiPolygon"&&p.push(...b)}if(p.length)return new Ro(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new Ro(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new Ro(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(s,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(h.type==="Polygon"){let b=sc(h.coordinates,g,y),T=i_(s.geometry(),p,g,y);if(!oc(p,g))return!1;for(let P of T)if(!Ss(P,b))return!1}if(h.type==="MultiPolygon"){let b=t_(h.coordinates,g,y),T=i_(s.geometry(),p,g,y);if(!oc(p,g))return!1;for(let P of T)if(!Jy(P,b))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(s,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(h.type==="Polygon"){let b=sc(h.coordinates,g,y),T=Op(s.geometry(),p,g,y);if(!oc(p,g))return!1;for(let P of T)if(!Qy(P,b))return!1}if(h.type==="MultiPolygon"){let b=t_(h.coordinates,g,y),T=Op(s.geometry(),p,g,y);if(!oc(p,g))return!1;for(let P of T)if(!mS(P,b))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let n_=class{constructor(l=[],i=(s,h)=>s<h?-1:s>h?1:0){if(this.data=l,this.length=this.data.length,this.compare=i,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(l){this.data.push(l),this._up(this.length++)}pop(){if(this.length===0)return;let l=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),l}peek(){return this.data[0]}_up(l){let{data:i,compare:s}=this,h=i[l];for(;l>0;){let p=l-1>>1,g=i[p];if(s(h,g)>=0)break;i[l]=g,l=p}i[l]=h}_down(l){let{data:i,compare:s}=this,h=this.length>>1,p=i[l];for(;l<h;){let g=1+(l<<1),y=g+1;if(y<this.length&&s(i[y],i[g])<0&&(g=y),s(i[g],p)>=0)break;i[l]=i[g],l=g}i[l]=p}};function a_(l,i,s=0,h=l.length-1,p=o_){for(;h>s;){if(h-s>600){let T=h-s+1,P=i-s+1,C=Math.log(T),D=.5*Math.exp(2*C/3),F=.5*Math.sqrt(C*D*(T-D)/T)*(P-T/2<0?-1:1);a_(l,i,Math.max(s,Math.floor(i-P*D/T+F)),Math.min(h,Math.floor(i+(T-P)*D/T+F)),p)}let g=l[i],y=s,b=h;for(_l(l,s,i),p(l[h],g)>0&&_l(l,s,h);y<b;){for(_l(l,y,b),y++,b--;p(l[y],g)<0;)y++;for(;p(l[b],g)>0;)b--}p(l[s],g)===0?_l(l,s,b):(b++,_l(l,b,h)),b<=i&&(s=b+1),i<=b&&(h=b-1)}}function _l(l,i,s){let h=l[i];l[i]=l[s],l[s]=h}function o_(l,i){return l<i?-1:l>i?1:0}function Bh(l,i){if(l.length<=1)return[l];let s=[],h,p;for(let g of l){let y=gS(g);y!==0&&(g.area=Math.abs(y),p===void 0&&(p=y<0),p===y<0?(h&&s.push(h),h=[g]):h.push(g))}if(h&&s.push(h),i>1)for(let g=0;g<s.length;g++)s[g].length<=i||(a_(s[g],i,1,s[g].length-1,vS),s[g]=s[g].slice(0,i));return s}function vS(l,i){return i.area-l.area}function gS(l){let i=0;for(let s,h,p=0,g=l.length,y=g-1;p<g;y=p++)s=l[p],h=l[y],i+=(h.x-s.x)*(s.y+h.y);return i}let kp=1/298.257223563,s_=kp*(2-kp),l_=Math.PI/180;class Dp{constructor(i){let s=6378.137*l_*1e3,h=Math.cos(i*l_),p=1/(1-s_*(1-h*h)),g=Math.sqrt(p);this.kx=s*g*h,this.ky=s*g*p*(1-s_)}distance(i,s){let h=this.wrap(i[0]-s[0])*this.kx,p=(i[1]-s[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(i,s){let h,p,g,y,b=1/0;for(let T=0;T<i.length-1;T++){let P=i[T][0],C=i[T][1],D=this.wrap(i[T+1][0]-P)*this.kx,F=(i[T+1][1]-C)*this.ky,N=0;D===0&&F===0||(N=(this.wrap(s[0]-P)*this.kx*D+(s[1]-C)*this.ky*F)/(D*D+F*F),N>1?(P=i[T+1][0],C=i[T+1][1]):N>0&&(P+=D/this.kx*N,C+=F/this.ky*N)),D=this.wrap(s[0]-P)*this.kx,F=(s[1]-C)*this.ky;let j=D*D+F*F;j<b&&(b=j,h=P,p=C,g=T,y=N)}return{point:[h,p],index:g,t:Math.max(0,Math.min(1,y))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function u_(l,i){return i[0]-l[0]}function Gt(l){return l[1]-l[0]+1}function to(l,i){return l[1]>=l[0]&&l[1]<i}function Lp(l,i){if(l[0]>l[1])return[null,null];let s=Gt(l);if(i){if(s===2)return[l,null];let p=Math.floor(s/2);return[[l[0],l[0]+p],[l[0]+p,l[1]]]}if(s===1)return[l,null];let h=Math.floor(s/2)-1;return[[l[0],l[0]+h],[l[0]+h+1,l[1]]]}function zp(l,i){if(!to(i,l.length))return[1/0,1/0,-1/0,-1/0];let s=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)ac(s,l[h]);return s}function Fp(l){let i=[1/0,1/0,-1/0,-1/0];for(let s of l)for(let h of s)ac(i,h);return i}function c_(l){return l[0]!==-1/0&&l[1]!==-1/0&&l[2]!==1/0&&l[3]!==1/0}function Bp(l,i,s){if(!c_(l)||!c_(i))return NaN;let h=0,p=0;return l[2]<i[0]&&(h=i[0]-l[2]),l[0]>i[2]&&(h=l[0]-i[2]),l[1]>i[3]&&(p=l[1]-i[3]),l[3]<i[1]&&(p=i[1]-l[3]),s.distance([0,0],[h,p])}function Ts(l,i,s){let h=s.pointOnLine(i,l);return s.distance(l,h.point)}function Np(l,i,s,h,p){let g=Math.min(Ts(l,[s,h],p),Ts(i,[s,h],p)),y=Math.min(Ts(s,[l,i],p),Ts(h,[l,i],p));return Math.min(g,y)}function yS(l,i,s,h,p){if(!to(i,l.length)||!to(h,s.length))return 1/0;let g=1/0;for(let y=i[0];y<i[1];++y){let b=l[y],T=l[y+1];for(let P=h[0];P<h[1];++P){let C=s[P],D=s[P+1];if(Fh(b,T,C,D))return 0;g=Math.min(g,Np(b,T,C,D,p))}}return g}function _S(l,i,s,h,p){if(!to(i,l.length)||!to(h,s.length))return NaN;let g=1/0;for(let y=i[0];y<=i[1];++y)for(let b=h[0];b<=h[1];++b)if(g=Math.min(g,p.distance(l[y],s[b])),g===0)return g;return g}function xS(l,i,s){if(Ss(l,i,!0))return 0;let h=1/0;for(let p of i){let g=p[0],y=p[p.length-1];if(g!==y&&(h=Math.min(h,Ts(l,[y,g],s)),h===0))return h;let b=s.pointOnLine(p,l);if(h=Math.min(h,s.distance(l,b.point)),h===0)return h}return h}function bS(l,i,s,h){if(!to(i,l.length))return NaN;for(let g=i[0];g<=i[1];++g)if(Ss(l[g],s,!0))return 0;let p=1/0;for(let g=i[0];g<i[1];++g){let y=l[g],b=l[g+1];for(let T of s)for(let P=0,C=T.length,D=C-1;P<C;D=P++){let F=T[D],N=T[P];if(Fh(y,b,F,N))return 0;p=Math.min(p,Np(y,b,F,N,h))}}return p}function h_(l,i){for(let s of l)for(let h of s)if(Ss(h,i,!0))return!0;return!1}function wS(l,i,s,h=1/0){let p=Fp(l),g=Fp(i);if(h!==1/0&&Bp(p,g,s)>=h)return h;if(oc(p,g)){if(h_(l,i))return 0}else if(h_(i,l))return 0;let y=1/0;for(let b of l)for(let T=0,P=b.length,C=P-1;T<P;C=T++){let D=b[C],F=b[T];for(let N of i)for(let j=0,G=N.length,Y=G-1;j<G;Y=j++){let ie=N[Y],me=N[j];if(Fh(D,F,ie,me))return 0;y=Math.min(y,Np(D,F,ie,me,s))}}return y}function f_(l,i,s,h,p,g){if(!g)return;let y=Bp(zp(h,g),p,s);y<i&&l.push([y,g,[0,0]])}function Nh(l,i,s,h,p,g,y){if(!g||!y)return;let b=Bp(zp(h,g),zp(p,y),s);b<i&&l.push([b,g,y])}function jh(l,i,s,h,p=1/0){let g=Math.min(h.distance(l[0],s[0][0]),p);if(g===0)return g;let y=new n_([[0,[0,l.length-1],[0,0]]],u_),b=Fp(s);for(;y.length>0;){let T=y.pop();if(T[0]>=g)continue;let P=T[1],C=i?50:100;if(Gt(P)<=C){if(!to(P,l.length))return NaN;if(i){let D=bS(l,P,s,h);if(isNaN(D)||D===0)return D;g=Math.min(g,D)}else for(let D=P[0];D<=P[1];++D){let F=xS(l[D],s,h);if(g=Math.min(g,F),g===0)return 0}}else{let D=Lp(P,i);f_(y,g,h,l,b,D[0]),f_(y,g,h,l,b,D[1])}}return g}function Uh(l,i,s,h,p,g=1/0){let y=Math.min(g,p.distance(l[0],s[0]));if(y===0)return y;let b=new n_([[0,[0,l.length-1],[0,s.length-1]]],u_);for(;b.length>0;){let T=b.pop();if(T[0]>=y)continue;let P=T[1],C=T[2],D=i?50:100,F=h?50:100;if(Gt(P)<=D&&Gt(C)<=F){if(!to(P,l.length)&&to(C,s.length))return NaN;let N;if(i&&h)N=yS(l,P,s,C,p),y=Math.min(y,N);else if(i&&!h){let j=l.slice(P[0],P[1]+1);for(let G=C[0];G<=C[1];++G)if(N=Ts(s[G],j,p),y=Math.min(y,N),y===0)return y}else if(!i&&h){let j=s.slice(C[0],C[1]+1);for(let G=P[0];G<=P[1];++G)if(N=Ts(l[G],j,p),y=Math.min(y,N),y===0)return y}else N=_S(l,P,s,C,p),y=Math.min(y,N)}else{let N=Lp(P,i),j=Lp(C,h);Nh(b,y,p,l,s,N[0],j[0]),Nh(b,y,p,l,s,N[0],j[1]),Nh(b,y,p,l,s,N[1],j[0]),Nh(b,y,p,l,s,N[1],j[1])}}return y}function jp(l){return l.type==="MultiPolygon"?l.coordinates.map(i=>({type:"Polygon",coordinates:i})):l.type==="MultiLineString"?l.coordinates.map(i=>({type:"LineString",coordinates:i})):l.type==="MultiPoint"?l.coordinates.map(i=>({type:"Point",coordinates:i})):[l]}class Is{constructor(i,s){this.type=Fe,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(tr(i[1])){let h=i[1];if(h.type==="FeatureCollection")return new Is(h,h.features.map(p=>jp(p.geometry)).flat());if(h.type==="Feature")return new Is(h,jp(h.geometry));if("type"in h&&"coordinates"in h)return new Is(h,jp(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(s,h){let p=s.geometry(),g=p.flat().map(T=>Rp([T.x,T.y],s.canonical));if(p.length===0)return NaN;let y=new Dp(g[0][1]),b=1/0;for(let T of h){switch(T.type){case"Point":b=Math.min(b,Uh(g,!1,[T.coordinates],!1,y,b));break;case"LineString":b=Math.min(b,Uh(g,!1,T.coordinates,!0,y,b));break;case"Polygon":b=Math.min(b,jh(g,!1,T.coordinates,y,b))}if(b===0)return b}return b}(i,this.geometries);if(i.geometryType()==="LineString")return function(s,h){let p=s.geometry(),g=p.flat().map(T=>Rp([T.x,T.y],s.canonical));if(p.length===0)return NaN;let y=new Dp(g[0][1]),b=1/0;for(let T of h){switch(T.type){case"Point":b=Math.min(b,Uh(g,!0,[T.coordinates],!1,y,b));break;case"LineString":b=Math.min(b,Uh(g,!0,T.coordinates,!0,y,b));break;case"Polygon":b=Math.min(b,jh(g,!0,T.coordinates,y,b))}if(b===0)return b}return b}(i,this.geometries);if(i.geometryType()==="Polygon")return function(s,h){let p=s.geometry();if(p.length===0||p[0].length===0)return NaN;let g=Bh(p,0).map(T=>T.map(P=>P.map(C=>Rp([C.x,C.y],s.canonical)))),y=new Dp(g[0][0][0][1]),b=1/0;for(let T of h)for(let P of g){switch(T.type){case"Point":b=Math.min(b,jh([T.coordinates],!1,P,y,b));break;case"LineString":b=Math.min(b,jh(T.coordinates,!0,P,y,b));break;case"Polygon":b=Math.min(b,wS(P,T.coordinates,y,b))}if(b===0)return b}return b}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class $h{constructor(i){this.type=Pt,this.key=i}static parse(i,s){if(i.length!==2)return s.error(`Expected 1 argument, but found ${i.length-1} instead.`);let h=i[1];return h==null?s.error("Global state property must be defined."):typeof h!="string"?s.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new $h(h)}evaluate(i){var s;let h=(s=i.globals)===null||s===void 0?void 0:s.globalState;return h&&Object.keys(h).length!==0?Wu(h,this.key):null}eachChild(){}outputDefined(){return!1}}let xl={"==":Oh,"!=":cS,">":hS,"<":Mp,">=":dS,"<=":fS,array:At,at:Cp,boolean:At,case:ai,coalesce:bs,collator:kh,format:Dh,image:Lh,in:Ch,"index-of":tc,interpolate:Ai,"interpolate-hcl":Ai,"interpolate-lab":Ai,length:zh,let:gl,literal:Tt,match:_s,number:At,"number-format":yl,object:At,slice:xs,step:Mo,string:At,"to-boolean":Pi,"to-color":Pi,"to-number":Pi,"to-string":Pi,var:ec,within:Ro,distance:Is,"global-state":$h};class Fn{constructor(i,s,h,p){this.name=i,this.type=s,this._evaluate=h,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,s){let h=i[0],p=Fn.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let g=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,b=y.filter(([P])=>!Array.isArray(P)||P.length===i.length-1),T=null;for(let[P,C]of b){T=new Qu(s.registry,Vh,s.path,null,s.scope);let D=[],F=!1;for(let N=1;N<i.length;N++){let j=i[N],G=Array.isArray(P)?P[N-1]:P.type,Y=T.parse(j,1+D.length,G);if(!Y){F=!0;break}D.push(Y)}if(!F)if(Array.isArray(P)&&P.length!==D.length)T.error(`Expected ${P.length} arguments, but found ${D.length} instead.`);else{for(let N=0;N<D.length;N++){let j=Array.isArray(P)?P[N]:P.type,G=D[N];T.concat(N+1).checkSubtype(j,G.type)}if(T.errors.length===0)return new Fn(h,g,C,D)}}if(b.length===1)s.errors.push(...T.errors);else{let P=(b.length?b:y).map(([D])=>{return F=D,Array.isArray(F)?`(${F.map(pr).join(", ")})`:`(${pr(F.type)}...)`;var F}).join(" | "),C=[];for(let D=1;D<i.length;D++){let F=s.parse(i[D],1+C.length);if(!F)return null;C.push(pr(F.type))}s.error(`Expected arguments of type ${P}, but found (${C.join(", ")}) instead.`)}return null}static register(i,s){Fn.definitions=s;for(let h in s)i[h]=Fn}}function d_(l,[i,s,h,p]){i=i.evaluate(l),s=s.evaluate(l),h=h.evaluate(l);let g=p?p.evaluate(l):1,y=Ju(i,s,h,g);if(y)throw new ur(y);return new Nt(i/255,s/255,h/255,g,!1)}function p_(l,i){return l in i}function Up(l,i){let s=i[l];return s===void 0?null:s}function Es(l){return{type:l}}function Vh(l){if(l instanceof ec)return Vh(l.boundExpression);if(l instanceof Fn&&l.name==="error"||l instanceof kh||l instanceof Ro||l instanceof Is||l instanceof $h)return!1;let i=l instanceof Pi||l instanceof At,s=!0;return l.eachChild(h=>{s=i?s&&Vh(h):s&&h instanceof Tt}),!!s&&Gh(l)&&Zh(l,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Gh(l){if(l instanceof Fn&&(l.name==="get"&&l.args.length===1||l.name==="feature-state"||l.name==="has"&&l.args.length===1||l.name==="properties"||l.name==="geometry-type"||l.name==="id"||/^filter-/.test(l.name))||l instanceof Ro||l instanceof Is)return!1;let i=!0;return l.eachChild(s=>{i&&!Gh(s)&&(i=!1)}),i}function lc(l){if(l instanceof Fn&&l.name==="feature-state")return!1;let i=!0;return l.eachChild(s=>{i&&!lc(s)&&(i=!1)}),i}function Zh(l,i){if(l instanceof Fn&&i.indexOf(l.name)>=0)return!1;let s=!0;return l.eachChild(h=>{s&&!Zh(h,i)&&(s=!1)}),s}function Hh(l){return{result:"success",value:l}}function bl(l){return{result:"error",value:l}}function wl(l){return l["property-type"]==="data-driven"||l["property-type"]==="cross-faded-data-driven"}function m_(l){return!!l.expression&&l.expression.parameters.indexOf("zoom")>-1}function Wh(l){return!!l.expression&&l.expression.interpolated}function Dt(l){return l instanceof Number?"number":l instanceof String?"string":l instanceof Boolean?"boolean":Array.isArray(l)?"array":l===null?"null":typeof l}function Kh(l){return typeof l=="object"&&l!==null&&!Array.isArray(l)&&qr(l)===an}function Yh(l){return l}function $p(l,i){let s=l.stops&&typeof l.stops[0][0]=="object",h=s||!(s||l.property!==void 0),p=l.type||(Wh(i)?"exponential":"interval"),g=function(C){switch(C.type){case"color":return Nt.parse;case"padding":return vi.parse;case"numberArray":return Br.parse;case"colorArray":return gi.parse;default:return null}}(i);if(g&&((l=Yt({},l)).stops&&(l.stops=l.stops.map(C=>[C[0],g(C[1])])),l.default=g(l.default?l.default:i.default)),l.colorSpace&&(y=l.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${l.colorSpace}"`);var y;let b=function(C){switch(C){case"exponential":return v_;case"interval":return TS;case"categorical":return SS;case"identity":return IS;default:throw new Error(`Unknown function type "${C}"`)}}(p),T,P;if(p==="categorical"){T=Object.create(null);for(let C of l.stops)T[C[0]]=C[1];P=typeof l.stops[0][0]}if(s){let C={},D=[];for(let j=0;j<l.stops.length;j++){let G=l.stops[j],Y=G[0].zoom;C[Y]===void 0&&(C[Y]={zoom:Y,type:l.type,property:l.property,default:l.default,stops:[]},D.push(Y)),C[Y].stops.push([G[0].value,G[1]])}let F=[];for(let j of D)F.push([C[j].zoom,$p(C[j],i)]);let N={name:"linear"};return{kind:"composite",interpolationType:N,interpolationFactor:Ai.interpolationFactor.bind(void 0,N),zoomStops:F.map(j=>j[0]),evaluate:({zoom:j},G)=>v_({stops:F,base:l.base},i,j).evaluate(j,G)}}if(h){let C=p==="exponential"?{name:"exponential",base:l.base!==void 0?l.base:1}:null;return{kind:"camera",interpolationType:C,interpolationFactor:Ai.interpolationFactor.bind(void 0,C),zoomStops:l.stops.map(D=>D[0]),evaluate:({zoom:D})=>b(l,i,D,T,P)}}return{kind:"source",evaluate(C,D){let F=D&&D.properties?D.properties[l.property]:void 0;return F===void 0?uc(l.default,i.default):b(l,i,F,T,P)}}}function uc(l,i,s){return l!==void 0?l:i!==void 0?i:s!==void 0?s:void 0}function SS(l,i,s,h,p){return uc(typeof s===p?h[s]:void 0,l.default,i.default)}function TS(l,i,s){if(Dt(s)!=="number")return uc(l.default,i.default);let h=l.stops.length;if(h===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[h-1][0])return l.stops[h-1][1];let p=rc(l.stops.map(g=>g[0]),s);return l.stops[p][1]}function v_(l,i,s){let h=l.base!==void 0?l.base:1;if(Dt(s)!=="number")return uc(l.default,i.default);let p=l.stops.length;if(p===1||s<=l.stops[0][0])return l.stops[0][1];if(s>=l.stops[p-1][0])return l.stops[p-1][1];let g=rc(l.stops.map(C=>C[0]),s),y=function(C,D,F,N){let j=N-F,G=C-F;return j===0?0:D===1?G/j:(Math.pow(D,G)-1)/(Math.pow(D,j)-1)}(s,h,l.stops[g][0],l.stops[g+1][0]),b=l.stops[g][1],T=l.stops[g+1][1],P=Sa[i.type]||Yh;return typeof b.evaluate=="function"?{evaluate(...C){let D=b.evaluate.apply(void 0,C),F=T.evaluate.apply(void 0,C);if(D!==void 0&&F!==void 0)return P(D,F,y,l.colorSpace)}}:P(b,T,y,l.colorSpace)}function IS(l,i,s){switch(i.type){case"color":s=Nt.parse(s);break;case"formatted":s=on.fromString(s.toString());break;case"resolvedImage":s=bn.fromString(s.toString());break;case"padding":s=vi.parse(s);break;case"colorArray":s=gi.parse(s);break;case"numberArray":s=Br.parse(s);break;default:Dt(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0)}return uc(s,l.default,i.default)}Fn.register(xl,{error:[{kind:"error"},[pt],(l,[i])=>{throw new ur(i.evaluate(l))}],typeof:[pt,[Pt],(l,[i])=>pr(qr(i.evaluate(l)))],"to-rgba":[xn(Fe,4),[Ir],(l,[i])=>{let[s,h,p,g]=i.evaluate(l).rgb;return[255*s,255*h,255*p,g]}],rgb:[Ir,[Fe,Fe,Fe],d_],rgba:[Ir,[Fe,Fe,Fe,Fe],d_],has:{type:qt,overloads:[[[pt],(l,[i])=>p_(i.evaluate(l),l.properties())],[[pt,an],(l,[i,s])=>p_(i.evaluate(l),s.evaluate(l))]]},get:{type:Pt,overloads:[[[pt],(l,[i])=>Up(i.evaluate(l),l.properties())],[[pt,an],(l,[i,s])=>Up(i.evaluate(l),s.evaluate(l))]]},"feature-state":[Pt,[pt],(l,[i])=>Up(i.evaluate(l),l.featureState||{})],properties:[an,[],l=>l.properties()],"geometry-type":[pt,[],l=>l.geometryType()],id:[Pt,[],l=>l.id()],zoom:[Fe,[],l=>l.globals.zoom],"heatmap-density":[Fe,[],l=>l.globals.heatmapDensity||0],"line-progress":[Fe,[],l=>l.globals.lineProgress||0],accumulated:[Pt,[],l=>l.globals.accumulated===void 0?null:l.globals.accumulated],"+":[Fe,Es(Fe),(l,i)=>{let s=0;for(let h of i)s+=h.evaluate(l);return s}],"*":[Fe,Es(Fe),(l,i)=>{let s=1;for(let h of i)s*=h.evaluate(l);return s}],"-":{type:Fe,overloads:[[[Fe,Fe],(l,[i,s])=>i.evaluate(l)-s.evaluate(l)],[[Fe],(l,[i])=>-i.evaluate(l)]]},"/":[Fe,[Fe,Fe],(l,[i,s])=>i.evaluate(l)/s.evaluate(l)],"%":[Fe,[Fe,Fe],(l,[i,s])=>i.evaluate(l)%s.evaluate(l)],ln2:[Fe,[],()=>Math.LN2],pi:[Fe,[],()=>Math.PI],e:[Fe,[],()=>Math.E],"^":[Fe,[Fe,Fe],(l,[i,s])=>Math.pow(i.evaluate(l),s.evaluate(l))],sqrt:[Fe,[Fe],(l,[i])=>Math.sqrt(i.evaluate(l))],log10:[Fe,[Fe],(l,[i])=>Math.log(i.evaluate(l))/Math.LN10],ln:[Fe,[Fe],(l,[i])=>Math.log(i.evaluate(l))],log2:[Fe,[Fe],(l,[i])=>Math.log(i.evaluate(l))/Math.LN2],sin:[Fe,[Fe],(l,[i])=>Math.sin(i.evaluate(l))],cos:[Fe,[Fe],(l,[i])=>Math.cos(i.evaluate(l))],tan:[Fe,[Fe],(l,[i])=>Math.tan(i.evaluate(l))],asin:[Fe,[Fe],(l,[i])=>Math.asin(i.evaluate(l))],acos:[Fe,[Fe],(l,[i])=>Math.acos(i.evaluate(l))],atan:[Fe,[Fe],(l,[i])=>Math.atan(i.evaluate(l))],min:[Fe,Es(Fe),(l,i)=>Math.min(...i.map(s=>s.evaluate(l)))],max:[Fe,Es(Fe),(l,i)=>Math.max(...i.map(s=>s.evaluate(l)))],abs:[Fe,[Fe],(l,[i])=>Math.abs(i.evaluate(l))],round:[Fe,[Fe],(l,[i])=>{let s=i.evaluate(l);return s<0?-Math.round(-s):Math.round(s)}],floor:[Fe,[Fe],(l,[i])=>Math.floor(i.evaluate(l))],ceil:[Fe,[Fe],(l,[i])=>Math.ceil(i.evaluate(l))],"filter-==":[qt,[pt,Pt],(l,[i,s])=>l.properties()[i.value]===s.value],"filter-id-==":[qt,[Pt],(l,[i])=>l.id()===i.value],"filter-type-==":[qt,[pt],(l,[i])=>l.geometryType()===i.value],"filter-<":[qt,[pt,Pt],(l,[i,s])=>{let h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[qt,[Pt],(l,[i])=>{let s=l.id(),h=i.value;return typeof s==typeof h&&s<h}],"filter->":[qt,[pt,Pt],(l,[i,s])=>{let h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[qt,[Pt],(l,[i])=>{let s=l.id(),h=i.value;return typeof s==typeof h&&s>h}],"filter-<=":[qt,[pt,Pt],(l,[i,s])=>{let h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[qt,[Pt],(l,[i])=>{let s=l.id(),h=i.value;return typeof s==typeof h&&s<=h}],"filter->=":[qt,[pt,Pt],(l,[i,s])=>{let h=l.properties()[i.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[qt,[Pt],(l,[i])=>{let s=l.id(),h=i.value;return typeof s==typeof h&&s>=h}],"filter-has":[qt,[Pt],(l,[i])=>i.value in l.properties()],"filter-has-id":[qt,[],l=>l.id()!==null&&l.id()!==void 0],"filter-type-in":[qt,[xn(pt)],(l,[i])=>i.value.indexOf(l.geometryType())>=0],"filter-id-in":[qt,[xn(Pt)],(l,[i])=>i.value.indexOf(l.id())>=0],"filter-in-small":[qt,[pt,xn(Pt)],(l,[i,s])=>s.value.indexOf(l.properties()[i.value])>=0],"filter-in-large":[qt,[pt,xn(Pt)],(l,[i,s])=>function(h,p,g,y){for(;g<=y;){let b=g+y>>1;if(p[b]===h)return!0;p[b]>h?y=b-1:g=b+1}return!1}(l.properties()[i.value],s.value,0,s.value.length-1)],all:{type:qt,overloads:[[[qt,qt],(l,[i,s])=>i.evaluate(l)&&s.evaluate(l)],[Es(qt),(l,i)=>{for(let s of i)if(!s.evaluate(l))return!1;return!0}]]},any:{type:qt,overloads:[[[qt,qt],(l,[i,s])=>i.evaluate(l)||s.evaluate(l)],[Es(qt),(l,i)=>{for(let s of i)if(s.evaluate(l))return!0;return!1}]]},"!":[qt,[qt],(l,[i])=>!i.evaluate(l)],"is-supported-script":[qt,[pt],(l,[i])=>{let s=l.globals&&l.globals.isSupportedScript;return!s||s(i.evaluate(l))}],upcase:[pt,[pt],(l,[i])=>i.evaluate(l).toUpperCase()],downcase:[pt,[pt],(l,[i])=>i.evaluate(l).toLowerCase()],concat:[pt,Es(Pt),(l,i)=>i.map(s=>jt(s.evaluate(l))).join("")],"resolved-locale":[pt,[cl],(l,[i])=>i.evaluate(l).resolvedLocale()]});class Xh{constructor(i,s){this.expression=i,this._warningHistory={},this._evaluator=new Ap,this._defaultValue=s?function(h){if(h.type==="color"&&Kh(h.default))return new Nt(0,0,0,0);switch(h.type){case"color":return Nt.parse(h.default)||null;case"padding":return vi.parse(h.default)||null;case"numberArray":return Br.parse(h.default)||null;case"colorArray":return gi.parse(h.default)||null;case"variableAnchorOffsetCollection":return ji.parse(h.default)||null;case"projectionDefinition":return sn.parse(h.default)||null;default:return h.default===void 0?null:h.default}}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(i,s,h,p,g,y){return this._evaluator.globals=i,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(i,s,h,p,g,y){this._evaluator.globals=i,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{let b=this.expression.evaluate(this._evaluator);if(b==null||typeof b=="number"&&b!=b)return this._defaultValue;if(this._enumValues&&!(b in this._enumValues))throw new ur(`Expected value to be one of ${Object.keys(this._enumValues).map(T=>JSON.stringify(T)).join(", ")}, but found ${JSON.stringify(b)} instead.`);return b}catch(b){return this._warningHistory[b.message]||(this._warningHistory[b.message]=!0,typeof console!="undefined"&&console.warn(b.message)),this._defaultValue}}}function cc(l){return Array.isArray(l)&&l.length>0&&typeof l[0]=="string"&&l[0]in xl}function Jh(l,i){let s=new Qu(xl,Vh,[],i?function(p){let g={color:Ir,string:pt,number:Fe,enum:pt,boolean:qt,formatted:Gu,padding:ds,numberArray:Qa,colorArray:Zu,projectionDefinition:Er,resolvedImage:ps,variableAnchorOffsetCollection:Fr};return p.type==="array"?xn(g[p.value]||Pt,p.length):g[p.type]}(i):void 0),h=s.parse(l,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?Hh(new Xh(h,i)):bl(s.errors)}class Vp{constructor(i,s){this.kind=i,this._styleExpression=s,this.isStateDependent=i!=="constant"&&!lc(s.expression)}evaluateWithoutErrorHandling(i,s,h,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(i,s,h,p,g,y)}evaluate(i,s,h,p,g,y){return this._styleExpression.evaluate(i,s,h,p,g,y)}}class Qh{constructor(i,s,h,p){this.kind=i,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=i!=="camera"&&!lc(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,s,h,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(i,s,h,p,g,y)}evaluate(i,s,h,p,g,y){return this._styleExpression.evaluate(i,s,h,p,g,y)}interpolationFactor(i,s,h){return this.interpolationType?Ai.interpolationFactor(this.interpolationType,i,s,h):0}}function Gp(l,i){let s=Jh(l,i);if(s.result==="error")return s;let h=s.value.expression,p=Gh(h);if(!p&&!wl(i))return bl([new Bt("","data expressions not supported")]);let g=Zh(h,["zoom"]);if(!g&&!m_(i))return bl([new Bt("","zoom expressions not supported")]);let y=fc(h);return y||g?y instanceof Bt?bl([y]):y instanceof Ai&&!Wh(i)?bl([new Bt("","\"interpolate\" expressions cannot be used with this property")]):Hh(y?new Qh(p?"camera":"composite",s.value,y.labels,y instanceof Ai?y.interpolation:void 0):new Vp(p?"constant":"source",s.value)):bl([new Bt("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class hc{constructor(i,s){this._parameters=i,this._specification=s,Yt(this,$p(this._parameters,this._specification))}static deserialize(i){return new hc(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function fc(l){let i=null;if(l instanceof gl)i=fc(l.result);else if(l instanceof bs){for(let s of l.args)if(i=fc(s),i)break}else(l instanceof Mo||l instanceof Ai)&&l.input instanceof Fn&&l.input.name==="zoom"&&(i=l);return i instanceof Bt||l.eachChild(s=>{let h=fc(s);h instanceof Bt?i=h:!i&&h?i=new Bt("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):i&&h&&i!==h&&(i=new Bt("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),i}function dc(l){if(l===!0||l===!1)return!0;if(!Array.isArray(l)||l.length===0)return!1;switch(l[0]){case"has":return l.length>=2&&l[1]!=="$id"&&l[1]!=="$type";case"in":return l.length>=3&&(typeof l[1]!="string"||Array.isArray(l[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return l.length!==3||Array.isArray(l[1])||Array.isArray(l[2]);case"any":case"all":for(let i of l.slice(1))if(!dc(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}let Zp={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function pc(l){if(l==null)return{filter:()=>!0,needGeometry:!1};dc(l)||(l=tf(l));let i=Jh(l,Zp);if(i.result==="error")throw new Error(i.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>i.value.evaluate(s,h,{},p),needGeometry:g_(l)}}function ef(l,i){return l<i?-1:l>i?1:0}function g_(l){if(!Array.isArray(l))return!1;if(l[0]==="within"||l[0]==="distance")return!0;for(let i=1;i<l.length;i++)if(g_(l[i]))return!0;return!1}function tf(l){if(!l)return!0;let i=l[0];return l.length<=1?i!=="any":i==="=="?Hp(l[1],l[2],"=="):i==="!="?rf(Hp(l[1],l[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Hp(l[1],l[2],i):i==="any"?(s=l.slice(1),["any"].concat(s.map(tf))):i==="all"?["all"].concat(l.slice(1).map(tf)):i==="none"?["all"].concat(l.slice(1).map(tf).map(rf)):i==="in"?y_(l[1],l.slice(2)):i==="!in"?rf(y_(l[1],l.slice(2))):i==="has"?__(l[1]):i!=="!has"||rf(__(l[1]));var s}function Hp(l,i,s){switch(l){case"$type":return[`filter-type-${s}`,i];case"$id":return[`filter-id-${s}`,i];default:return[`filter-${s}`,l,i]}}function y_(l,i){if(i.length===0)return!1;switch(l){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(s=>typeof s!=typeof i[0])?["filter-in-large",l,["literal",i.sort(ef)]]:["filter-in-small",l,["literal",i]]}}function __(l){switch(l){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",l]}}function rf(l){return["!",l]}function nf(l){let i=typeof l;if(i==="number"||i==="boolean"||i==="string"||l==null)return JSON.stringify(l);if(Array.isArray(l)){let p="[";for(let g of l)p+=`${nf(g)},`;return`${p}]`}let s=Object.keys(l).sort(),h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${nf(l[s[p]])},`;return`${h}}`}function x_(l){let i="";for(let s of qe)i+=`/${nf(l[s])}`;return i}function mc(l){let i=l.value;return i?[new ke(l.key,i,"constants have been deprecated as of v8")]:[]}function Or(l){return l instanceof Number||l instanceof String||l instanceof Boolean?l.valueOf():l}function Oo(l){if(Array.isArray(l))return l.map(Oo);if(l instanceof Object&&!(l instanceof Number||l instanceof String||l instanceof Boolean)){let i={};for(let s in l)i[s]=Oo(l[s]);return i}return Or(l)}function wn(l){let i=l.key,s=l.value,h=l.valueSpec||{},p=l.objectElementValidators||{},g=l.style,y=l.styleSpec,b=l.validateSpec,T=[],P=Dt(s);if(P!=="object")return[new ke(i,s,`object expected, ${P} found`)];for(let C in s){let D=C.split(".")[0],F=Wu(h,D)||h["*"],N;if(Wu(p,D))N=p[D];else if(Wu(h,D))N=b;else if(p["*"])N=p["*"];else{if(!h["*"]){T.push(new ke(i,s[C],`unknown property "${C}"`));continue}N=b}T=T.concat(N({key:(i&&`${i}.`)+C,value:s[C],valueSpec:F,style:g,styleSpec:y,object:s,objectKey:C,validateSpec:b},s))}for(let C in h)p[C]||h[C].required&&h[C].default===void 0&&s[C]===void 0&&T.push(new ke(i,s,`missing required property "${C}"`));return T}function Wp(l){let i=l.value,s=l.valueSpec,h=l.style,p=l.styleSpec,g=l.key,y=l.arrayElementValidator||l.validateSpec;if(Dt(i)!=="array")return[new ke(g,i,`array expected, ${Dt(i)} found`)];if(s.length&&i.length!==s.length)return[new ke(g,i,`array length ${s.length} expected, length ${i.length} found`)];if(s["min-length"]&&i.length<s["min-length"])return[new ke(g,i,`array length at least ${s["min-length"]} expected, length ${i.length} found`)];let b={type:s.value,values:s.values};p.$version<7&&(b.function=s.function),Dt(s.value)==="object"&&(b=s.value);let T=[];for(let P=0;P<i.length;P++)T=T.concat(y({array:i,arrayIndex:P,value:i[P],valueSpec:b,validateSpec:l.validateSpec,style:h,styleSpec:p,key:`${g}[${P}]`}));return T}function vc(l){let i=l.key,s=l.value,h=l.valueSpec,p=Dt(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new ke(i,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new ke(i,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new ke(i,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Kp(l){let i=l.valueSpec,s=Or(l.value.type),h,p,g,y={},b=s!=="categorical"&&l.value.property===void 0,T=!b,P=Dt(l.value.stops)==="array"&&Dt(l.value.stops[0])==="array"&&Dt(l.value.stops[0][0])==="object",C=wn({key:l.key,value:l.value,valueSpec:l.styleSpec.function,validateSpec:l.validateSpec,style:l.style,styleSpec:l.styleSpec,objectElementValidators:{stops:function(N){if(s==="identity")return[new ke(N.key,N.value,"identity function may not have a \"stops\" property")];let j=[],G=N.value;return j=j.concat(Wp({key:N.key,value:G,valueSpec:N.valueSpec,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,arrayElementValidator:D})),Dt(G)==="array"&&G.length===0&&j.push(new ke(N.key,G,"array must have at least one stop")),j},default:function(N){return N.validateSpec({key:N.key,value:N.value,valueSpec:i,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec})}}});return s==="identity"&&b&&C.push(new ke(l.key,l.value,"missing required property \"property\"")),s==="identity"||l.value.stops||C.push(new ke(l.key,l.value,"missing required property \"stops\"")),s==="exponential"&&l.valueSpec.expression&&!Wh(l.valueSpec)&&C.push(new ke(l.key,l.value,"exponential functions not supported")),l.styleSpec.$version>=8&&(T&&!wl(l.valueSpec)?C.push(new ke(l.key,l.value,"property functions not supported")):b&&!m_(l.valueSpec)&&C.push(new ke(l.key,l.value,"zoom functions not supported"))),s!=="categorical"&&!P||l.value.property!==void 0||C.push(new ke(l.key,l.value,"\"property\" property is required")),C;function D(N){let j=[],G=N.value,Y=N.key;if(Dt(G)!=="array")return[new ke(Y,G,`array expected, ${Dt(G)} found`)];if(G.length!==2)return[new ke(Y,G,`array length 2 expected, length ${G.length} found`)];if(P){if(Dt(G[0])!=="object")return[new ke(Y,G,`object expected, ${Dt(G[0])} found`)];if(G[0].zoom===void 0)return[new ke(Y,G,"object stop key must have zoom")];if(G[0].value===void 0)return[new ke(Y,G,"object stop key must have value")];if(g&&g>Or(G[0].zoom))return[new ke(Y,G[0].zoom,"stop zoom values must appear in ascending order")];Or(G[0].zoom)!==g&&(g=Or(G[0].zoom),p=void 0,y={}),j=j.concat(wn({key:`${Y}[0]`,value:G[0],valueSpec:{zoom:{}},validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec,objectElementValidators:{zoom:vc,value:F}}))}else j=j.concat(F({key:`${Y}[0]`,value:G[0],validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec},G));return cc(Oo(G[1]))?j.concat([new ke(`${Y}[1]`,G[1],"expressions are not allowed in function stops.")]):j.concat(N.validateSpec({key:`${Y}[1]`,value:G[1],valueSpec:i,validateSpec:N.validateSpec,style:N.style,styleSpec:N.styleSpec}))}function F(N,j){let G=Dt(N.value),Y=Or(N.value),ie=N.value!==null?N.value:j;if(h){if(G!==h)return[new ke(N.key,ie,`${G} stop domain type must match previous stop domain type ${h}`)]}else h=G;if(G!=="number"&&G!=="string"&&G!=="boolean")return[new ke(N.key,ie,"stop domain value must be a number, string, or boolean")];if(G!=="number"&&s!=="categorical"){let me=`number expected, ${G} found`;return wl(i)&&s===void 0&&(me+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new ke(N.key,ie,me)]}return s!=="categorical"||G!=="number"||isFinite(Y)&&Math.floor(Y)===Y?s!=="categorical"&&G==="number"&&p!==void 0&&Y<p?[new ke(N.key,ie,"stop domain values must appear in ascending order")]:(p=Y,s==="categorical"&&Y in y?[new ke(N.key,ie,"stop domain values must be unique")]:(y[Y]=!0,[])):[new ke(N.key,ie,`integer expected, found ${Y}`)]}}function Ia(l){let i=(l.expressionContext==="property"?Gp:Jh)(Oo(l.value),l.valueSpec);if(i.result==="error")return i.value.map(h=>new ke(`${l.key}${h.key}`,l.value,h.message));let s=i.value.expression||i.value._styleExpression.expression;if(l.expressionContext==="property"&&l.propertyKey==="text-font"&&!s.outputDefined())return[new ke(l.key,l.value,`Invalid data expression for "${l.propertyKey}". Output values must be contained as literals within the expression.`)];if(l.expressionContext==="property"&&l.propertyType==="layout"&&!lc(s))return[new ke(l.key,l.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(l.expressionContext==="filter"&&!lc(s))return[new ke(l.key,l.value,"\"feature-state\" data expressions are not supported with filters.")];if(l.expressionContext&&l.expressionContext.indexOf("cluster")===0){if(!Zh(s,["zoom","feature-state"]))return[new ke(l.key,l.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(l.expressionContext==="cluster-initial"&&!Gh(s))return[new ke(l.key,l.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Yp(l){let i=l.key,s=l.value,h=Dt(s);return h!=="string"?[new ke(i,s,`color expected, ${h} found`)]:Nt.parse(String(s))?[]:[new ke(i,s,`color expected, "${s}" found`)]}function gc(l){let i=l.key,s=l.value,h=l.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Or(s))===-1&&p.push(new ke(i,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Or(s))===-1&&p.push(new ke(i,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function Xp(l){return dc(Oo(l.value))?Ia(Yt({},l,{expressionContext:"filter",valueSpec:{value:"boolean"}})):b_(l)}function b_(l){let i=l.value,s=l.key;if(Dt(i)!=="array")return[new ke(s,i,`array expected, ${Dt(i)} found`)];let h=l.styleSpec,p,g=[];if(i.length<1)return[new ke(s,i,"filter array must have at least 1 element")];switch(g=g.concat(gc({key:`${s}[0]`,value:i[0],valueSpec:h.filter_operator,style:l.style,styleSpec:l.styleSpec})),Or(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Or(i[1])==="$type"&&g.push(new ke(s,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&g.push(new ke(s,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(p=Dt(i[1]),p!=="string"&&g.push(new ke(`${s}[1]`,i[1],`string expected, ${p} found`)));for(let y=2;y<i.length;y++)p=Dt(i[y]),Or(i[1])==="$type"?g=g.concat(gc({key:`${s}[${y}]`,value:i[y],valueSpec:h.geometry_type,style:l.style,styleSpec:l.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new ke(`${s}[${y}]`,i[y],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let y=1;y<i.length;y++)g=g.concat(b_({key:`${s}[${y}]`,value:i[y],style:l.style,styleSpec:l.styleSpec}));break;case"has":case"!has":p=Dt(i[1]),i.length!==2?g.push(new ke(s,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new ke(`${s}[1]`,i[1],`string expected, ${p} found`))}return g}function w_(l,i){let s=l.key,h=l.validateSpec,p=l.style,g=l.styleSpec,y=l.value,b=l.objectKey,T=g[`${i}_${l.layerType}`];if(!T)return[];let P=b.match(/^(.*)-transition$/);if(i==="paint"&&P&&T[P[1]]&&T[P[1]].transition)return h({key:s,value:y,valueSpec:g.transition,style:p,styleSpec:g});let C=l.valueSpec||T[b];if(!C)return[new ke(s,y,`unknown property "${b}"`)];let D;if(Dt(y)==="string"&&wl(C)&&!C.tokens&&(D=/^{([^}]+)}$/.exec(y)))return[new ke(s,y,`"${b}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(D[1])} }\`.`)];let F=[];return l.layerType==="symbol"&&(b==="text-field"&&p&&!p.glyphs&&F.push(new ke(s,y,"use of \"text-field\" requires a style \"glyphs\" property")),b==="text-font"&&Kh(Oo(y))&&Or(y.type)==="identity"&&F.push(new ke(s,y,"\"text-font\" does not support identity functions"))),F.concat(h({key:l.key,value:y,valueSpec:C,style:p,styleSpec:g,expressionContext:"property",propertyType:i,propertyKey:b}))}function S_(l){return w_(l,"paint")}function Sl(l){return w_(l,"layout")}function Tl(l){let i=[],s=l.value,h=l.key,p=l.style,g=l.styleSpec;if(Dt(s)!=="object")return[new ke(h,s,`object expected, ${Dt(s)} found`)];s.type||s.ref||i.push(new ke(h,s,"either \"type\" or \"ref\" is required"));let y=Or(s.type),b=Or(s.ref);if(s.id){let T=Or(s.id);for(let P=0;P<l.arrayIndex;P++){let C=p.layers[P];Or(C.id)===T&&i.push(new ke(h,s.id,`duplicate layer id "${s.id}", previously used at line ${C.id.__line__}`))}}if("ref"in s){let T;["type","source","source-layer","filter","layout"].forEach(P=>{P in s&&i.push(new ke(h,s[P],`"${P}" is prohibited for ref layers`))}),p.layers.forEach(P=>{Or(P.id)===b&&(T=P)}),T?T.ref?i.push(new ke(h,s.ref,"ref cannot reference another ref layer")):y=Or(T.type):i.push(new ke(h,s.ref,`ref layer "${b}" not found`))}else if(y!=="background")if(s.source){let T=p.sources&&p.sources[s.source],P=T&&Or(T.type);T?P==="vector"&&y==="raster"?i.push(new ke(h,s.source,`layer "${s.id}" requires a raster source`)):P!=="raster-dem"&&y==="hillshade"?i.push(new ke(h,s.source,`layer "${s.id}" requires a raster-dem source`)):P==="raster"&&y!=="raster"?i.push(new ke(h,s.source,`layer "${s.id}" requires a vector source`)):P!=="vector"||s["source-layer"]?P==="raster-dem"&&y!=="hillshade"?i.push(new ke(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!s.paint||!s.paint["line-gradient"]||P==="geojson"&&T.lineMetrics||i.push(new ke(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new ke(h,s,`layer "${s.id}" must specify a "source-layer"`)):i.push(new ke(h,s.source,`source "${s.source}" not found`))}else i.push(new ke(h,s,"missing required property \"source\""));return i=i.concat(wn({key:h,value:s,valueSpec:g.layer,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,objectElementValidators:{"*":()=>[],type:()=>l.validateSpec({key:`${h}.type`,value:s.type,valueSpec:g.layer.type,style:l.style,styleSpec:l.styleSpec,validateSpec:l.validateSpec,object:s,objectKey:"type"}),filter:Xp,layout:T=>wn({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":P=>Sl(Yt({layerType:y},P))}}),paint:T=>wn({layer:s,key:T.key,value:T.value,style:T.style,styleSpec:T.styleSpec,validateSpec:T.validateSpec,objectElementValidators:{"*":P=>S_(Yt({layerType:y},P))}})}})),i}function Qr(l){let i=l.value,s=l.key,h=Dt(i);return h!=="string"?[new ke(s,i,`string expected, ${h} found`)]:[]}let Il={promoteId:function({key:l,value:i}){if(Dt(i)==="string")return Qr({key:l,value:i});{let s=[];for(let h in i)s.push(...Qr({key:`${l}.${h}`,value:i[h]}));return s}}};function Jp(l){let i=l.value,s=l.key,h=l.styleSpec,p=l.style,g=l.validateSpec;if(!i.type)return[new ke(s,i,"\"type\" is required")];let y=Or(i.type),b;switch(y){case"vector":case"raster":return b=wn({key:s,value:i,valueSpec:h[`source_${y.replace("-","_")}`],style:l.style,styleSpec:h,objectElementValidators:Il,validateSpec:g}),b;case"raster-dem":return b=function(T){var P;let C=(P=T.sourceName)!==null&&P!==void 0?P:"",D=T.value,F=T.styleSpec,N=F.source_raster_dem,j=T.style,G=[],Y=Dt(D);if(D===void 0)return G;if(Y!=="object")return G.push(new ke("source_raster_dem",D,`object expected, ${Y} found`)),G;let ie=Or(D.encoding)==="custom",me=["redFactor","greenFactor","blueFactor","baseShift"],se=T.value.encoding?`"${T.value.encoding}"`:"Default";for(let B in D)!ie&&me.includes(B)?G.push(new ke(B,D[B],`In "${C}": "${B}" is only valid when "encoding" is set to "custom". ${se} encoding found`)):N[B]?G=G.concat(T.validateSpec({key:B,value:D[B],valueSpec:N[B],validateSpec:T.validateSpec,style:j,styleSpec:F})):G.push(new ke(B,D[B],`unknown property "${B}"`));return G}({sourceName:s,value:i,style:l.style,styleSpec:h,validateSpec:g}),b;case"geojson":if(b=wn({key:s,value:i,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:g,objectElementValidators:Il}),i.cluster)for(let T in i.clusterProperties){let[P,C]=i.clusterProperties[T],D=typeof P=="string"?[P,["accumulated"],["get",T]]:P;b.push(...Ia({key:`${s}.${T}.map`,value:C,expressionContext:"cluster-map"})),b.push(...Ia({key:`${s}.${T}.reduce`,value:D,expressionContext:"cluster-reduce"}))}return b;case"video":return wn({key:s,value:i,valueSpec:h.source_video,style:p,validateSpec:g,styleSpec:h});case"image":return wn({key:s,value:i,valueSpec:h.source_image,style:p,validateSpec:g,styleSpec:h});case"canvas":return[new ke(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gc({key:`${s}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function T_(l){let i=l.value,s=l.styleSpec,h=s.light,p=l.style,g=[],y=Dt(i);if(i===void 0)return g;if(y!=="object")return g=g.concat([new ke("light",i,`object expected, ${y} found`)]),g;for(let b in i){let T=b.match(/^(.*)-transition$/);g=g.concat(T&&h[T[1]]&&h[T[1]].transition?l.validateSpec({key:b,value:i[b],valueSpec:s.transition,validateSpec:l.validateSpec,style:p,styleSpec:s}):h[b]?l.validateSpec({key:b,value:i[b],valueSpec:h[b],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new ke(b,i[b],`unknown property "${b}"`)])}return g}function I_(l){let i=l.value,s=l.styleSpec,h=s.sky,p=l.style,g=Dt(i);if(i===void 0)return[];if(g!=="object")return[new ke("sky",i,`object expected, ${g} found`)];let y=[];for(let b in i)y=y.concat(h[b]?l.validateSpec({key:b,value:i[b],valueSpec:h[b],style:p,styleSpec:s}):[new ke(b,i[b],`unknown property "${b}"`)]);return y}function El(l){let i=l.value,s=l.styleSpec,h=s.terrain,p=l.style,g=[],y=Dt(i);if(i===void 0)return g;if(y!=="object")return g=g.concat([new ke("terrain",i,`object expected, ${y} found`)]),g;for(let b in i)g=g.concat(h[b]?l.validateSpec({key:b,value:i[b],valueSpec:h[b],validateSpec:l.validateSpec,style:p,styleSpec:s}):[new ke(b,i[b],`unknown property "${b}"`)]);return g}function Qp(l){let i=[],s=l.value,h=l.key;if(Array.isArray(s)){let p=[],g=[];for(let y in s)s[y].id&&p.includes(s[y].id)&&i.push(new ke(h,s,`all the sprites' ids must be unique, but ${s[y].id} is duplicated`)),p.push(s[y].id),s[y].url&&g.includes(s[y].url)&&i.push(new ke(h,s,`all the sprites' URLs must be unique, but ${s[y].url} is duplicated`)),g.push(s[y].url),i=i.concat(wn({key:`${h}[${y}]`,value:s[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:l.validateSpec}));return i}return Qr({key:h,value:s})}function af(l){return i=l.value,i&&i.constructor===Object?[]:[new ke(l.key,l.value,`object expected, ${Dt(l.value)} found`)];var i}let E_={"*":()=>[],array:Wp,boolean:function(l){let i=l.value,s=l.key,h=Dt(i);return h!=="boolean"?[new ke(s,i,`boolean expected, ${h} found`)]:[]},number:vc,color:Yp,constants:mc,enum:gc,filter:Xp,function:Kp,layer:Tl,object:wn,source:Jp,light:T_,sky:I_,terrain:El,projection:function(l){let i=l.value,s=l.styleSpec,h=s.projection,p=l.style,g=Dt(i);if(i===void 0)return[];if(g!=="object")return[new ke("projection",i,`object expected, ${g} found`)];let y=[];for(let b in i)y=y.concat(h[b]?l.validateSpec({key:b,value:i[b],valueSpec:h[b],style:p,styleSpec:s}):[new ke(b,i[b],`unknown property "${b}"`)]);return y},projectionDefinition:function(l){let i=l.key,s=l.value;s=s instanceof String?s.valueOf():s;let h=Dt(s);return h!=="array"||function(p){return Array.isArray(p)&&p.length===3&&typeof p[0]=="string"&&typeof p[1]=="string"&&typeof p[2]=="number"}(s)||function(p){return!!["interpolate","step","literal"].includes(p[0])}(s)?["array","string"].includes(h)?[]:[new ke(i,s,`projection expected, invalid type "${h}" found`)]:[new ke(i,s,`projection expected, invalid array ${JSON.stringify(s)} found`)]},string:Qr,formatted:function(l){return Qr(l).length===0?[]:Ia(l)},resolvedImage:function(l){return Qr(l).length===0?[]:Ia(l)},padding:function(l){let i=l.key,s=l.value;if(Dt(s)==="array"){if(s.length<1||s.length>4)return[new ke(i,s,`padding requires 1 to 4 values; ${s.length} values found`)];let h={type:"number"},p=[];for(let g=0;g<s.length;g++)p=p.concat(l.validateSpec({key:`${i}[${g}]`,value:s[g],validateSpec:l.validateSpec,valueSpec:h}));return p}return vc({key:i,value:s,valueSpec:{}})},numberArray:function(l){let i=l.key,s=l.value;if(Dt(s)==="array"){let h={type:"number"};if(s.length<1)return[new ke(i,s,"array length at least 1 expected, length 0 found")];let p=[];for(let g=0;g<s.length;g++)p=p.concat(l.validateSpec({key:`${i}[${g}]`,value:s[g],validateSpec:l.validateSpec,valueSpec:h}));return p}return vc({key:i,value:s,valueSpec:{}})},colorArray:function(l){let i=l.key,s=l.value;if(Dt(s)==="array"){if(s.length<1)return[new ke(i,s,"array length at least 1 expected, length 0 found")];let h=[];for(let p=0;p<s.length;p++)h=h.concat(Yp({key:`${i}[${p}]`,value:s[p]}));return h}return Yp({key:i,value:s})},variableAnchorOffsetCollection:function(l){let i=l.key,s=l.value,h=Dt(s),p=l.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new ke(i,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<s.length;y+=2)g=g.concat(gc({key:`${i}[${y}]`,value:s[y],valueSpec:p.layout_symbol["text-anchor"]})),g=g.concat(Wp({key:`${i}[${y+1}]`,value:s[y+1],valueSpec:{length:2,value:"number"},validateSpec:l.validateSpec,style:l.style,styleSpec:p}));return g},sprite:Qp,state:af};function ql(l){let i=l.value,s=l.valueSpec,h=l.styleSpec;return l.validateSpec=ql,s.expression&&Kh(Or(i))?Kp(l):s.expression&&cc(Oo(i))?Ia(l):s.type&&E_[s.type]?E_[s.type](l):wn(Yt({},l,{valueSpec:s.type?h[s.type]:s}))}function q_(l){let i=l.value,s=l.key,h=Qr(l);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new ke(s,i,"\"glyphs\" url must include a \"{fontstack}\" token")),i.indexOf("{range}")===-1&&h.push(new ke(s,i,"\"glyphs\" url must include a \"{range}\" token"))),h}function Ci(l,i=X){let s=[];return s=s.concat(ql({key:"",value:l,valueSpec:i.$root,styleSpec:i,style:l,validateSpec:ql,objectElementValidators:{glyphs:q_,"*":()=>[]}})),l.constants&&(s=s.concat(mc({key:"constants",value:l.constants}))),Pl(s)}function aa(l){return function(i){return l(TT(ST({},i),{validateSpec:ql}))}}function Pl(l){return[].concat(l).sort((i,s)=>i.line-s.line)}function oa(l){return function(...i){return Pl(l.apply(this,i))}}Ci.source=oa(aa(Jp)),Ci.sprite=oa(aa(Qp)),Ci.glyphs=oa(aa(q_)),Ci.light=oa(aa(T_)),Ci.sky=oa(aa(I_)),Ci.terrain=oa(aa(El)),Ci.state=oa(aa(af)),Ci.layer=oa(aa(Tl)),Ci.filter=oa(aa(Xp)),Ci.paintProperty=oa(aa(S_)),Ci.layoutProperty=oa(aa(Sl));let Al=Ci,of=Al.light,ES=Al.sky,em=Al.paintProperty,sf=Al.layoutProperty;function tm(l,i){let s=!1;if(i&&i.length)for(let h of i)l.fire(new le(new Error(h.message))),s=!0;return s}class Cl{constructor(i,s,h){let p=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;let y=new Int32Array(this.arrayBuffer);i=y[0],this.d=(s=y[1])+2*(h=y[2]);for(let T=0;T<this.d*this.d;T++){let P=y[3+T],C=y[3+T+1];p.push(P===C?null:y.subarray(P,C))}let b=y[3+p.length+1];this.keys=y.subarray(y[3+p.length],b),this.bboxes=y.subarray(b),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let y=0;y<this.d*this.d;y++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=i,this.padding=h,this.scale=s/i,this.uid=0;let g=h/s*i;this.min=-g,this.max=i+g}insert(i,s,h,p,g){this._forEachCell(s,h,p,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,s,h,p,g,y){this.cells[g].push(y)}query(i,s,h,p,g){let y=this.min,b=this.max;if(i<=y&&s<=y&&b<=h&&b<=p&&!g)return Array.prototype.slice.call(this.keys);{let T=[];return this._forEachCell(i,s,h,p,this._queryCell,T,{},g),T}}_queryCell(i,s,h,p,g,y,b,T){let P=this.cells[g];if(P!==null){let C=this.keys,D=this.bboxes;for(let F=0;F<P.length;F++){let N=P[F];if(b[N]===void 0){let j=4*N;(T?T(D[j+0],D[j+1],D[j+2],D[j+3]):i<=D[j+2]&&s<=D[j+3]&&h>=D[j+0]&&p>=D[j+1])?(b[N]=!0,y.push(C[N])):b[N]=!1}}}}_forEachCell(i,s,h,p,g,y,b,T){let P=this._convertToCellCoord(i),C=this._convertToCellCoord(s),D=this._convertToCellCoord(h),F=this._convertToCellCoord(p);for(let N=P;N<=D;N++)for(let j=C;j<=F;j++){let G=this.d*j+N;if((!T||T(this._convertFromCellCoord(N),this._convertFromCellCoord(j),this._convertFromCellCoord(N+1),this._convertFromCellCoord(j+1)))&&g.call(this,i,s,h,p,G,y,b,T))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let i=this.cells,s=3+this.cells.length+1+1,h=0;for(let y=0;y<this.cells.length;y++)h+=this.cells[y].length;let p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let g=s;for(let y=0;y<i.length;y++){let b=i[y];p[3+y]=g,p.set(b,g),g+=b.length}return p[3+i.length]=g,p.set(this.keys,g),g+=this.keys.length,p[3+i.length+1]=g,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer}static serialize(i,s){let h=i.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(i){return new Cl(i.buffer)}}let Ea={};function rt(l,i,s={}){if(Ea[l])throw new Error(`${l} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:l,writeable:!1}),Ea[l]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}rt("Object",Object),rt("TransferableGridIndex",Cl),rt("Color",Nt),rt("Error",Error),rt("AJAXError",Ln),rt("ResolvedImage",bn),rt("StylePropertyFunction",hc),rt("StyleExpression",Xh,{omit:["_evaluator"]}),rt("ZoomDependentExpression",Qh),rt("ZoomConstantExpression",Vp),rt("CompoundExpression",Fn,{omit:["_evaluate"]});for(let l in xl)xl[l]._classRegistryKey||rt(`Expression_${l}`,xl[l]);function lf(l){return l&&typeof ArrayBuffer!="undefined"&&(l instanceof ArrayBuffer||l.constructor&&l.constructor.name==="ArrayBuffer")}function uf(l){return l.$name||l.constructor._classRegistryKey}function P_(l){return!function(i){if(i===null||typeof i!="object")return!1;let s=uf(i);return!(!s||s==="Object")}(l)&&(l==null||typeof l=="boolean"||typeof l=="number"||typeof l=="string"||l instanceof Boolean||l instanceof Number||l instanceof String||l instanceof Date||l instanceof RegExp||l instanceof Blob||l instanceof Error||lf(l)||Dn(l)||ArrayBuffer.isView(l)||l instanceof ImageData)}function Ml(l,i){if(P_(l))return(lf(l)||Dn(l))&&i&&i.push(l),ArrayBuffer.isView(l)&&i&&i.push(l.buffer),l instanceof ImageData&&i&&i.push(l.data.buffer),l;if(Array.isArray(l)){let g=[];for(let y of l)g.push(Ml(y,i));return g}if(typeof l!="object")throw new Error("can't serialize object of type "+typeof l);let s=uf(l);if(!s)throw new Error(`can't serialize object of unregistered class ${l.constructor.name}`);if(!Ea[s])throw new Error(`${s} is not registered.`);let{klass:h}=Ea[s],p=h.serialize?h.serialize(l,i):{};if(h.serialize){if(i&&p===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let g in l){if(!l.hasOwnProperty(g)||Ea[s].omit.indexOf(g)>=0)continue;let y=l[g];p[g]=Ea[s].shallow.indexOf(g)>=0?y:Ml(y,i)}l instanceof Error&&(p.message=l.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(p.$name=s),p}function yc(l){if(P_(l))return l;if(Array.isArray(l))return l.map(yc);if(typeof l!="object")throw new Error("can't deserialize object of type "+typeof l);let i=uf(l)||"Object";if(!Ea[i])throw new Error(`can't deserialize unregistered class ${i}`);let{klass:s}=Ea[i];if(!s)throw new Error(`can't deserialize unregistered class ${i}`);if(s.deserialize)return s.deserialize(l);let h=Object.create(s.prototype);for(let p of Object.keys(l)){if(p==="$name")continue;let g=l[p];h[p]=Ea[i].shallow.indexOf(p)>=0?g:yc(g)}return h}class rm{constructor(){this.first=!0}update(i,s){let h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}let Lt={"Latin-1 Supplement":l=>l>=128&&l<=255,"Hangul Jamo":l=>l>=4352&&l<=4607,Khmer:l=>l>=6016&&l<=6143,"General Punctuation":l=>l>=8192&&l<=8303,"Letterlike Symbols":l=>l>=8448&&l<=8527,"Number Forms":l=>l>=8528&&l<=8591,"Miscellaneous Technical":l=>l>=8960&&l<=9215,"Control Pictures":l=>l>=9216&&l<=9279,"Optical Character Recognition":l=>l>=9280&&l<=9311,"Enclosed Alphanumerics":l=>l>=9312&&l<=9471,"Geometric Shapes":l=>l>=9632&&l<=9727,"Miscellaneous Symbols":l=>l>=9728&&l<=9983,"Miscellaneous Symbols and Arrows":l=>l>=11008&&l<=11263,"Ideographic Description Characters":l=>l>=12272&&l<=12287,"CJK Symbols and Punctuation":l=>l>=12288&&l<=12351,Hiragana:l=>l>=12352&&l<=12447,Katakana:l=>l>=12448&&l<=12543,Kanbun:l=>l>=12688&&l<=12703,"CJK Strokes":l=>l>=12736&&l<=12783,"Enclosed CJK Letters and Months":l=>l>=12800&&l<=13055,"CJK Compatibility":l=>l>=13056&&l<=13311,"Yijing Hexagram Symbols":l=>l>=19904&&l<=19967,"CJK Unified Ideographs":l=>l>=19968&&l<=40959,"Hangul Syllables":l=>l>=44032&&l<=55215,"Private Use Area":l=>l>=57344&&l<=63743,"Vertical Forms":l=>l>=65040&&l<=65055,"CJK Compatibility Forms":l=>l>=65072&&l<=65103,"Small Form Variants":l=>l>=65104&&l<=65135,"Halfwidth and Fullwidth Forms":l=>l>=65280&&l<=65519};function cf(l){for(let i of l)if(hf(i.charCodeAt(0)))return!0;return!1}function qS(l){for(let i of l)if(!C_(i.charCodeAt(0)))return!1;return!0}function im(l){let i=l.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch(h){return null}}).filter(s=>s);return new RegExp(i.join("|"),"u")}let A_=im(["Arab","Dupl","Mong","Ougr","Syrc"]);function C_(l){return!A_.test(String.fromCodePoint(l))}let nm=im(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function hf(l){return!(l!==746&&l!==747&&(l<4352||!(Lt["CJK Compatibility Forms"](l)&&!(l>=65097&&l<=65103)||Lt["CJK Compatibility"](l)||Lt["CJK Strokes"](l)||!(!Lt["CJK Symbols and Punctuation"](l)||l>=12296&&l<=12305||l>=12308&&l<=12319||l===12336)||Lt["Enclosed CJK Letters and Months"](l)||Lt["Ideographic Description Characters"](l)||Lt.Kanbun(l)||Lt.Katakana(l)&&l!==12540||!(!Lt["Halfwidth and Fullwidth Forms"](l)||l===65288||l===65289||l===65293||l>=65306&&l<=65310||l===65339||l===65341||l===65343||l>=65371&&l<=65503||l===65507||l>=65512&&l<=65519)||!(!Lt["Small Form Variants"](l)||l>=65112&&l<=65118||l>=65123&&l<=65126)||Lt["Vertical Forms"](l)||Lt["Yijing Hexagram Symbols"](l)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(l))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(l))||nm.test(String.fromCodePoint(l)))))}function _c(l){return!(hf(l)||function(i){return!!(Lt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||Lt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||Lt["Letterlike Symbols"](i)||Lt["Number Forms"](i)||Lt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||Lt["Control Pictures"](i)&&i!==9251||Lt["Optical Character Recognition"](i)||Lt["Enclosed Alphanumerics"](i)||Lt["Geometric Shapes"](i)||Lt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||Lt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||Lt["CJK Symbols and Punctuation"](i)||Lt.Katakana(i)||Lt["Private Use Area"](i)||Lt["CJK Compatibility Forms"](i)||Lt["Small Form Variants"](i)||Lt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(l))}let PS=im(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function ff(l){return PS.test(String.fromCodePoint(l))}function AS(l,i){return!(!i&&ff(l)||l>=2304&&l<=3583||l>=3840&&l<=4255||Lt.Khmer(l))}function CS(l){for(let i of l)if(ff(i.charCodeAt(0)))return!0;return!1}let ro=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(l){this.pluginStatus=l.pluginStatus,this.pluginURL=l.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(l){if(ro.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=l.applyArabicShaping,this.processBidirectionalText=l.processBidirectionalText,this.processStyledBidirectionalText=l.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(l,i){return a(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(l.pluginStatus!=="loading")return this.setState(l),l;let s=l.pluginURL,h=new Promise(g=>{this.loadScriptResolve=g});i(s);let p=new Promise(g=>setTimeout(()=>g(),this.TIMEOUT));if(yield Promise.race([h,p]),this.isParsed()){let g={pluginStatus:"loaded",pluginURL:s};return this.setState(g),g}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${s}`)})}};class cr{constructor(i,s){this.zoom=i,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new rm,this.transition={})}isSupportedScript(i){return function(s,h){for(let p of s)if(!AS(p.charCodeAt(0),h))return!1;return!0}(i,ro.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let i=this.zoom,s=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class xc{constructor(i,s){this.property=i,this.value=s,this.expression=function(h,p){if(Kh(h))return new hc(h,p);if(cc(h)){let g=Gp(h,p);if(g.result==="error")throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=h;return p.type==="color"&&typeof h=="string"?g=Nt.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type!=="numberArray"||typeof h!="number"&&!Array.isArray(h)?p.type!=="colorArray"||typeof h!="string"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)?g=ji.parse(h):p.type==="projectionDefinition"&&typeof h=="string"&&(g=sn.parse(h)):g=gi.parse(h):g=Br.parse(h):g=vi.parse(h),{kind:"constant",evaluate:()=>g}}}(s===void 0?i.specification.default:s,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,s,h){return this.property.possiblyEvaluate(this,i,s,h)}}class am{constructor(i){this.property=i,this.value=new xc(i,void 0)}transitioned(i,s){return new R_(this.property,this.value,s,vn({},i.transition,this.transition),i.now)}untransitioned(){return new R_(this.property,this.value,null,{},0)}}class M_{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return gn(this._values[i].value.value)}setValue(i,s){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new am(this._values[i].property)),this._values[i].value=new xc(this._values[i].property,s===null?void 0:gn(s))}getTransition(i){return gn(this._values[i].transition)}setTransition(i,s){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new am(this._values[i].property)),this._values[i].transition=gn(s)||void 0}serialize(){let i={};for(let s of Object.keys(this._values)){let h=this.getValue(s);h!==void 0&&(i[s]=h);let p=this.getTransition(s);p!==void 0&&(i[`${s}-transition`]=p)}return i}transitioned(i,s){let h=new O_(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(i,s._values[p]);return h}untransitioned(){let i=new O_(this._properties);for(let s of Object.keys(this._values))i._values[s]=this._values[s].untransitioned();return i}}class R_{constructor(i,s,h,p,g){this.property=i,this.value=s,this.begin=g+p.delay||0,this.end=this.begin+p.duration||0,i.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(i,s,h){let p=i.now||0,g=this.value.possiblyEvaluate(i,s,h),y=this.prior;if(y){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return y.possiblyEvaluate(i,s,h);{let b=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(i,s,h),g,ia(b))}}return g}}class O_{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,s,h){let p=new df(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,s,h);return p}hasTransition(){for(let i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class MS{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return gn(this._values[i].value)}setValue(i,s){this._values[i]=new xc(this._values[i].property,s===null?void 0:gn(s))}serialize(){let i={};for(let s of Object.keys(this._values)){let h=this.getValue(s);h!==void 0&&(i[s]=h)}return i}possiblyEvaluate(i,s,h){let p=new df(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,s,h);return p}}class Ui{constructor(i,s,h){this.property=i,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,s,h,p){return this.property.evaluate(this.value,this.parameters,i,s,h,p)}}class df{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class st{constructor(i){this.specification=i}possiblyEvaluate(i,s){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(s)}interpolate(i,s,h){let p=Sa[this.specification.type];return p?p(i,s,h):i}}class mt{constructor(i,s){this.specification=i,this.overrides=s}possiblyEvaluate(i,s,h,p){return new Ui(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(s,null,{},h,p)}:i.expression,s)}interpolate(i,s,h){if(i.value.kind!=="constant"||s.value.kind!=="constant")return i;if(i.value.value===void 0||s.value.value===void 0)return new Ui(this,{kind:"constant",value:void 0},i.parameters);let p=Sa[this.specification.type];if(p){let g=p(i.value.value,s.value.value,h);return new Ui(this,{kind:"constant",value:g},i.parameters)}return i}evaluate(i,s,h,p,g,y){return i.kind==="constant"?i.value:i.evaluate(s,h,p,g,y)}}class bc extends mt{possiblyEvaluate(i,s,h,p){if(i.value===void 0)return new Ui(this,{kind:"constant",value:void 0},s);if(i.expression.kind==="constant"){let g=i.expression.evaluate(s,null,{},h,p),y=i.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,b=this._calculate(y,y,y,s);return new Ui(this,{kind:"constant",value:b},s)}if(i.expression.kind==="camera"){let g=this._calculate(i.expression.evaluate({zoom:s.zoom-1}),i.expression.evaluate({zoom:s.zoom}),i.expression.evaluate({zoom:s.zoom+1}),s);return new Ui(this,{kind:"constant",value:g},s)}return new Ui(this,i.expression,s)}evaluate(i,s,h,p,g,y){if(i.kind==="source"){let b=i.evaluate(s,h,p,g,y);return this._calculate(b,b,b,s)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(s.zoom)-1},h,p),i.evaluate({zoom:Math.floor(s.zoom)},h,p),i.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):i.value}_calculate(i,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:s}:{from:h,to:s}}interpolate(i){return i}}class om{constructor(i){this.specification=i}possiblyEvaluate(i,s,h,p){if(i.value!==void 0){if(i.expression.kind==="constant"){let g=i.expression.evaluate(s,null,{},h,p);return this._calculate(g,g,g,s)}return this._calculate(i.expression.evaluate(new cr(Math.floor(s.zoom-1),s)),i.expression.evaluate(new cr(Math.floor(s.zoom),s)),i.expression.evaluate(new cr(Math.floor(s.zoom+1),s)),s)}}_calculate(i,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:s}:{from:h,to:s}}interpolate(i){return i}}class sm{constructor(i){this.specification=i}possiblyEvaluate(i,s,h,p){return!!i.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class jr{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let s in i){let h=i[s];h.specification.overridable&&this.overridableProperties.push(s);let p=this.defaultPropertyValues[s]=new xc(h,void 0),g=this.defaultTransitionablePropertyValues[s]=new am(h);this.defaultTransitioningPropertyValues[s]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}rt("DataDrivenProperty",mt),rt("DataConstantProperty",st),rt("CrossFadedDataDrivenProperty",bc),rt("CrossFadedProperty",om),rt("ColorRampProperty",sm);let lm="-transition";class Bn extends ve{constructor(i,s){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),s.layout&&(this._unevaluatedLayout=new MS(s.layout)),s.paint)){this._transitionablePaint=new M_(s.paint);for(let h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(let h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new df(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,s,h={}){s!=null&&this._validate(sf,`layers.${this.id}.layout.${i}`,i,s,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,s):this.visibility=s)}getPaintProperty(i){return i.endsWith(lm)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,s,h={}){if(s!=null&&this._validate(em,`layers.${this.id}.paint.${i}`,i,s,h))return!1;if(i.endsWith(lm))return this._transitionablePaint.setTransition(i.slice(0,-11),s||void 0),!1;{let p=this._transitionablePaint._values[i],g=p.property.specification["property-type"]==="cross-faded-data-driven",y=p.value.isDataDriven(),b=p.value;this._transitionablePaint.setValue(i,s),this._handleSpecialPaintPropertyUpdate(i);let T=this._transitionablePaint._values[i].value;return T.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(i,b,T)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,s,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,s){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,s)}serialize(){let i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Uu(i,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(i,s,h,p,g={}){return(!g||g.validate!==!1)&&tm(this,i.call(Al,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:X,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let i in this.paint._values){let s=this.paint.get(i);if(s instanceof Ui&&wl(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let k_={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class qs{constructor(i,s){this._structArray=i,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Pr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,s){return i._trim(),s&&(i.isTransferred=!0,s.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){let s=Object.create(this.prototype);return s.arrayBuffer=i.arrayBuffer,s.length=i.length,s.capacity=i.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function vr(l,i=1){let s=0,h=0;return{members:l.map(p=>{let g=k_[p.type].BYTES_PER_ELEMENT,y=s=Rl(s,Math.max(i,g)),b=p.components||1;return h=Math.max(h,g),s+=g*b,{name:p.name,type:p.type,components:b,offset:y}}),size:Rl(s,Math.max(h,i)),alignment:i}}function Rl(l,i){return Math.ceil(l/i)*i}class wc extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s){let h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){let p=2*i;return this.int16[p+0]=s,this.int16[p+1]=h,i}}wc.prototype.bytesPerElement=4,rt("StructArrayLayout2i4",wc);class Sc extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.int16[g+0]=s,this.int16[g+1]=h,this.int16[g+2]=p,i}}Sc.prototype.bytesPerElement=6,rt("StructArrayLayout3i6",Sc);class Ps extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,i,s,h,p)}emplace(i,s,h,p,g){let y=4*i;return this.int16[y+0]=s,this.int16[y+1]=h,this.int16[y+2]=p,this.int16[y+3]=g,i}}Ps.prototype.bytesPerElement=8,rt("StructArrayLayout4i8",Ps);class um extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let b=this.length;return this.resize(b+1),this.emplace(b,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,b){let T=6*i;return this.int16[T+0]=s,this.int16[T+1]=h,this.int16[T+2]=p,this.int16[T+3]=g,this.int16[T+4]=y,this.int16[T+5]=b,i}}um.prototype.bytesPerElement=12,rt("StructArrayLayout2i4i12",um);class cm extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let b=this.length;return this.resize(b+1),this.emplace(b,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,b){let T=4*i,P=8*i;return this.int16[T+0]=s,this.int16[T+1]=h,this.uint8[P+4]=p,this.uint8[P+5]=g,this.uint8[P+6]=y,this.uint8[P+7]=b,i}}cm.prototype.bytesPerElement=8,rt("StructArrayLayout2i4ub8",cm);class Ol extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s){let h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){let p=2*i;return this.float32[p+0]=s,this.float32[p+1]=h,i}}Ol.prototype.bytesPerElement=8,rt("StructArrayLayout2f8",Ol);class hm extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,b,T,P,C){let D=this.length;return this.resize(D+1),this.emplace(D,i,s,h,p,g,y,b,T,P,C)}emplace(i,s,h,p,g,y,b,T,P,C,D){let F=10*i;return this.uint16[F+0]=s,this.uint16[F+1]=h,this.uint16[F+2]=p,this.uint16[F+3]=g,this.uint16[F+4]=y,this.uint16[F+5]=b,this.uint16[F+6]=T,this.uint16[F+7]=P,this.uint16[F+8]=C,this.uint16[F+9]=D,i}}hm.prototype.bytesPerElement=20,rt("StructArrayLayout10ui20",hm);class m extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,b,T,P,C,D,F){let N=this.length;return this.resize(N+1),this.emplace(N,i,s,h,p,g,y,b,T,P,C,D,F)}emplace(i,s,h,p,g,y,b,T,P,C,D,F,N){let j=12*i;return this.int16[j+0]=s,this.int16[j+1]=h,this.int16[j+2]=p,this.int16[j+3]=g,this.uint16[j+4]=y,this.uint16[j+5]=b,this.uint16[j+6]=T,this.uint16[j+7]=P,this.int16[j+8]=C,this.int16[j+9]=D,this.int16[j+10]=F,this.int16[j+11]=N,i}}m.prototype.bytesPerElement=24,rt("StructArrayLayout4i4ui4i24",m);class r extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.float32[g+0]=s,this.float32[g+1]=h,this.float32[g+2]=p,i}}r.prototype.bytesPerElement=12,rt("StructArrayLayout3f12",r);class o extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){let s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint32[1*i+0]=s,i}}o.prototype.bytesPerElement=4,rt("StructArrayLayout1ul4",o);class f extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,b,T,P){let C=this.length;return this.resize(C+1),this.emplace(C,i,s,h,p,g,y,b,T,P)}emplace(i,s,h,p,g,y,b,T,P,C){let D=10*i,F=5*i;return this.int16[D+0]=s,this.int16[D+1]=h,this.int16[D+2]=p,this.int16[D+3]=g,this.int16[D+4]=y,this.int16[D+5]=b,this.uint32[F+3]=T,this.uint16[D+8]=P,this.uint16[D+9]=C,i}}f.prototype.bytesPerElement=20,rt("StructArrayLayout6i1ul2ui20",f);class d extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let b=this.length;return this.resize(b+1),this.emplace(b,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,b){let T=6*i;return this.int16[T+0]=s,this.int16[T+1]=h,this.int16[T+2]=p,this.int16[T+3]=g,this.int16[T+4]=y,this.int16[T+5]=b,i}}d.prototype.bytesPerElement=12,rt("StructArrayLayout2i2i2i12",d);class v extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g){let y=this.length;return this.resize(y+1),this.emplace(y,i,s,h,p,g)}emplace(i,s,h,p,g,y){let b=4*i,T=8*i;return this.float32[b+0]=s,this.float32[b+1]=h,this.float32[b+2]=p,this.int16[T+6]=g,this.int16[T+7]=y,i}}v.prototype.bytesPerElement=16,rt("StructArrayLayout2f1f2i16",v);class x extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let b=this.length;return this.resize(b+1),this.emplace(b,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,b){let T=16*i,P=4*i,C=8*i;return this.uint8[T+0]=s,this.uint8[T+1]=h,this.float32[P+1]=p,this.float32[P+2]=g,this.int16[C+6]=y,this.int16[C+7]=b,i}}x.prototype.bytesPerElement=16,rt("StructArrayLayout2ub2f2i16",x);class S extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.uint16[g+0]=s,this.uint16[g+1]=h,this.uint16[g+2]=p,i}}S.prototype.bytesPerElement=6,rt("StructArrayLayout3ui6",S);class E extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,b,T,P,C,D,F,N,j,G,Y,ie){let me=this.length;return this.resize(me+1),this.emplace(me,i,s,h,p,g,y,b,T,P,C,D,F,N,j,G,Y,ie)}emplace(i,s,h,p,g,y,b,T,P,C,D,F,N,j,G,Y,ie,me){let se=24*i,B=12*i,K=48*i;return this.int16[se+0]=s,this.int16[se+1]=h,this.uint16[se+2]=p,this.uint16[se+3]=g,this.uint32[B+2]=y,this.uint32[B+3]=b,this.uint32[B+4]=T,this.uint16[se+10]=P,this.uint16[se+11]=C,this.uint16[se+12]=D,this.float32[B+7]=F,this.float32[B+8]=N,this.uint8[K+36]=j,this.uint8[K+37]=G,this.uint8[K+38]=Y,this.uint32[B+10]=ie,this.int16[se+22]=me,i}}E.prototype.bytesPerElement=48,rt("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",E);class A extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,b,T,P,C,D,F,N,j,G,Y,ie,me,se,B,K,ue,Ee,Ne,Ce,De,Ge,je){let Ze=this.length;return this.resize(Ze+1),this.emplace(Ze,i,s,h,p,g,y,b,T,P,C,D,F,N,j,G,Y,ie,me,se,B,K,ue,Ee,Ne,Ce,De,Ge,je)}emplace(i,s,h,p,g,y,b,T,P,C,D,F,N,j,G,Y,ie,me,se,B,K,ue,Ee,Ne,Ce,De,Ge,je,Ze){let ze=32*i,it=16*i;return this.int16[ze+0]=s,this.int16[ze+1]=h,this.int16[ze+2]=p,this.int16[ze+3]=g,this.int16[ze+4]=y,this.int16[ze+5]=b,this.int16[ze+6]=T,this.int16[ze+7]=P,this.uint16[ze+8]=C,this.uint16[ze+9]=D,this.uint16[ze+10]=F,this.uint16[ze+11]=N,this.uint16[ze+12]=j,this.uint16[ze+13]=G,this.uint16[ze+14]=Y,this.uint16[ze+15]=ie,this.uint16[ze+16]=me,this.uint16[ze+17]=se,this.uint16[ze+18]=B,this.uint16[ze+19]=K,this.uint16[ze+20]=ue,this.uint16[ze+21]=Ee,this.uint16[ze+22]=Ne,this.uint32[it+12]=Ce,this.float32[it+13]=De,this.float32[it+14]=Ge,this.uint16[ze+30]=je,this.uint16[ze+31]=Ze,i}}A.prototype.bytesPerElement=64,rt("StructArrayLayout8i15ui1ul2f2ui64",A);class R extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){let s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.float32[1*i+0]=s,i}}R.prototype.bytesPerElement=4,rt("StructArrayLayout1f4",R);class z extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.uint16[6*i+0]=s,this.float32[g+1]=h,this.float32[g+2]=p,i}}z.prototype.bytesPerElement=12,rt("StructArrayLayout1ui2f12",z);class L extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=4*i;return this.uint32[2*i+0]=s,this.uint16[g+2]=h,this.uint16[g+3]=p,i}}L.prototype.bytesPerElement=8,rt("StructArrayLayout1ul2ui8",L);class U extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s){let h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){let p=2*i;return this.uint16[p+0]=s,this.uint16[p+1]=h,i}}U.prototype.bytesPerElement=4,rt("StructArrayLayout2ui4",U);class V extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){let s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint16[1*i+0]=s,i}}V.prototype.bytesPerElement=2,rt("StructArrayLayout1ui2",V);class ee extends Pr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,i,s,h,p)}emplace(i,s,h,p,g){let y=4*i;return this.float32[y+0]=s,this.float32[y+1]=h,this.float32[y+2]=p,this.float32[y+3]=g,i}}ee.prototype.bytesPerElement=16,rt("StructArrayLayout4f16",ee);class Q extends qs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new $(this.anchorPointX,this.anchorPointY)}}Q.prototype.size=20;class te extends f{get(i){return new Q(this,i)}}rt("CollisionBoxArray",te);class oe extends qs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}oe.prototype.size=48;class he extends E{get(i){return new oe(this,i)}}rt("PlacedSymbolArray",he);class ce extends qs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ce.prototype.size=64;class de extends A{get(i){return new ce(this,i)}}rt("SymbolInstanceArray",de);class ge extends R{getoffsetX(i){return this.float32[1*i+0]}}rt("GlyphOffsetArray",ge);class pe extends Sc{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}rt("SymbolLineVertexArray",pe);class Ie extends qs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Ie.prototype.size=12;class Le extends z{get(i){return new Ie(this,i)}}rt("TextAnchorOffsetArray",Le);class Me extends qs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Me.prototype.size=8;class Re extends L{get(i){return new Me(this,i)}}rt("FeatureIndexArray",Re);class Oe extends wc{}class Ke extends wc{}class We extends wc{}class Ue extends um{}class at extends cm{}class Ct extends Ol{}class Ut extends hm{}class gr extends m{}class ir extends r{}class yr extends o{}class _r extends d{}class or extends x{}class Ht extends S{}class ei extends U{}let si=vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:yi}=si;class Wt{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,s,h,p){let g=this.segments[this.segments.length-1];return i>Wt.MAX_VERTEX_ARRAY_LENGTH&&Fi(`Max vertices per segment is ${Wt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Wt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!g||g.vertexLength+i>Wt.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p?this.createNewSegment(s,h,p):g}createNewSegment(i,s,h){let p={vertexOffset:i.length,primitiveOffset:s.length,vertexLength:0,primitiveLength:0,vaos:{}};return h!==void 0&&(p.sortKey=h),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(p),p}getOrCreateLatestSegment(i,s,h){return this.prepareSegment(0,i,s,h)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(let i of this.segments)for(let s in i.vaos)i.vaos[s].destroy()}static simpleSegment(i,s,h,p){return new Wt([{vertexOffset:i,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function ko(l,i){return 256*(l=mi(Math.floor(l),0,255))+mi(Math.floor(i),0,255)}Wt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rt("SegmentVector",Wt);let qa=vr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Do,As,Tc,Lo={exports:{}},Cs={exports:{}},Sn={exports:{}},zo=function(){if(Tc)return Lo.exports;Tc=1;var l=(Do||(Do=1,Cs.exports=function(s,h){var p,g,y,b,T,P,C,D;for(g=s.length-(p=3&s.length),y=h,T=3432918353,P=461845907,D=0;D<g;)C=255&s.charCodeAt(D)|(255&s.charCodeAt(++D))<<8|(255&s.charCodeAt(++D))<<16|(255&s.charCodeAt(++D))<<24,++D,y=27492+(65535&(b=5*(65535&(y=(y^=C=(65535&(C=(C=(65535&C)*T+(((C>>>16)*T&65535)<<16)&4294967295)<<15|C>>>17))*P+(((C>>>16)*P&65535)<<16)&4294967295)<<13|y>>>19))+((5*(y>>>16)&65535)<<16)&4294967295))+((58964+(b>>>16)&65535)<<16);switch(C=0,p){case 3:C^=(255&s.charCodeAt(D+2))<<16;case 2:C^=(255&s.charCodeAt(D+1))<<8;case 1:y^=C=(65535&(C=(C=(65535&(C^=255&s.charCodeAt(D)))*T+(((C>>>16)*T&65535)<<16)&4294967295)<<15|C>>>17))*P+(((C>>>16)*P&65535)<<16)&4294967295}return y^=s.length,y=2246822507*(65535&(y^=y>>>16))+((2246822507*(y>>>16)&65535)<<16)&4294967295,y=3266489909*(65535&(y^=y>>>13))+((3266489909*(y>>>16)&65535)<<16)&4294967295,(y^=y>>>16)>>>0}),Cs.exports),i=(As||(As=1,Sn.exports=function(s,h){for(var p,g=s.length,y=h^g,b=0;g>=4;)p=1540483477*(65535&(p=255&s.charCodeAt(b)|(255&s.charCodeAt(++b))<<8|(255&s.charCodeAt(++b))<<16|(255&s.charCodeAt(++b))<<24))+((1540483477*(p>>>16)&65535)<<16),y=1540483477*(65535&y)+((1540483477*(y>>>16)&65535)<<16)^(p=1540483477*(65535&(p^=p>>>24))+((1540483477*(p>>>16)&65535)<<16)),g-=4,++b;switch(g){case 3:y^=(255&s.charCodeAt(b+2))<<16;case 2:y^=(255&s.charCodeAt(b+1))<<8;case 1:y=1540483477*(65535&(y^=255&s.charCodeAt(b)))+((1540483477*(y>>>16)&65535)<<16)}return y=1540483477*(65535&(y^=y>>>13))+((1540483477*(y>>>16)&65535)<<16),(y^=y>>>15)>>>0}),Sn.exports);return Lo.exports=l,Lo.exports.murmur3=l,Lo.exports.murmur2=i,Lo.exports}(),io=_(zo);class Fo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,s,h,p){this.ids.push(Ur(i)),this.positions.push(s,h,p)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let s=Ur(i),h=0,p=this.ids.length-1;for(;h<p;){let y=h+p>>1;this.ids[y]>=s?p=y:h=y+1}let g=[];for(;this.ids[h]===s;)g.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return g}static serialize(i,s){let h=new Float64Array(i.ids),p=new Uint32Array(i.positions);return $r(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(i){let s=new Fo;return s.ids=i.ids,s.positions=i.positions,s.indexed=!0,s}}function Ur(l){let i=+l;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:io(String(l))}function $r(l,i,s,h){for(;s<h;){let p=l[s+h>>1],g=s-1,y=h+1;for(;;){do g++;while(l[g]<p);do y--;while(l[y]>p);if(g>=y)break;$i(l,g,y),$i(i,3*g,3*y),$i(i,3*g+1,3*y+1),$i(i,3*g+2,3*y+2)}y-s<h-y?($r(l,i,s,y),s=y+1):($r(l,i,y+1,h),h=y)}}function $i(l,i,s){let h=l[i];l[i]=l[s],l[s]=h}rt("FeaturePositionMap",Fo);class hr{constructor(i,s){this.gl=i.gl,this.location=s}}class pf extends hr{constructor(i,s){super(i,s),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class D_ extends hr{constructor(i,s){super(i,s),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class L_ extends hr{constructor(i,s){super(i,s),this.current=Nt.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}let RS=new Float32Array(16);function fm(l){return[ko(255*l.r,255*l.g),ko(255*l.b,255*l.a)]}class Ic{constructor(i,s,h){this.value=i,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(i,s,h){i.set(h.constantOr(this.value))}getBinding(i,s,h){return this.type==="color"?new L_(i,s):new pf(i,s)}}class Nn{constructor(i,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=i.tlbr}setUniform(i,s,h,p){let g=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&i.set(g)}getBinding(i,s,h){return h.substr(0,9)==="u_pattern"?new D_(i,s):new pf(i,s)}}class Pa{constructor(i,s,h,p){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(g=>({name:`a_${g}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,s,h,p,g){let y=this.paintVertexArray.length,b=this.expression.evaluate(new cr(0),s,{},p,[],g);this.paintVertexArray.resize(i),this._setPaintValue(y,i,b)}updatePaintArray(i,s,h,p){let g=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(i,s,g)}_setPaintValue(i,s,h){if(this.type==="color"){let p=fm(h);for(let g=i;g<s;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=i;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class jn{constructor(i,s,h,p,g,y){this.expression=i,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(i,s,h,p,g){let y=this.expression.evaluate(new cr(this.zoom),s,{},p,[],g),b=this.expression.evaluate(new cr(this.zoom+1),s,{},p,[],g),T=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(T,i,y,b)}updatePaintArray(i,s,h,p){let g=this.expression.evaluate({zoom:this.zoom},h,p),y=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(i,s,g,y)}_setPaintValue(i,s,h,p){if(this.type==="color"){let g=fm(h),y=fm(p);for(let b=i;b<s;b++)this.paintVertexArray.emplace(b,g[0],g[1],y[0],y[1])}else{for(let g=i;g<s;g++)this.paintVertexArray.emplace(g,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,s){let h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=mi(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(p)}getBinding(i,s,h){return new pf(i,s)}}class no{constructor(i,s,h,p,g,y){this.expression=i,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(i,s,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(p,i,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(i,s,h,p,g){this._setPaintValues(i,s,h.patterns&&h.patterns[this.layerId],g)}_setPaintValues(i,s,h,p){if(!p||!h)return;let{min:g,mid:y,max:b}=h,T=p[g],P=p[y],C=p[b];if(T&&P&&C)for(let D=i;D<s;D++)this.zoomInPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],T.tl[0],T.tl[1],T.br[0],T.br[1],P.pixelRatio,T.pixelRatio),this.zoomOutPaintVertexArray.emplace(D,P.tl[0],P.tl[1],P.br[0],P.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],P.pixelRatio,C.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,qa.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,qa.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class mf{constructor(i,s,h){this.binders={},this._buffers=[];let p=[];for(let g in i.paint._values){if(!h(g))continue;let y=i.paint.get(g);if(!(y instanceof Ui&&wl(y.property.specification)))continue;let b=dm(g,i.type),T=y.value,P=y.property.specification.type,C=y.property.useIntegerZoom,D=y.property.specification["property-type"],F=D==="cross-faded"||D==="cross-faded-data-driven";if(T.kind==="constant")this.binders[g]=F?new Nn(T.value,b):new Ic(T.value,b,P),p.push(`/u_${g}`);else if(T.kind==="source"||F){let N=bL(g,P,"source");this.binders[g]=F?new no(T,P,C,s,N,i.id):new Pa(T,b,P,N),p.push(`/a_${g}`)}else{let N=bL(g,P,"composite");this.binders[g]=new jn(T,b,P,C,s,N),p.push(`/z_${g}`)}}this.cacheKey=p.sort().join("")}getMaxValue(i){let s=this.binders[i];return s instanceof Pa||s instanceof jn?s.maxValue:0}populatePaintArrays(i,s,h,p,g){for(let y in this.binders){let b=this.binders[y];(b instanceof Pa||b instanceof jn||b instanceof no)&&b.populatePaintArray(i,s,h,p,g)}}setConstantPatternPositions(i,s){for(let h in this.binders){let p=this.binders[h];p instanceof Nn&&p.setConstantPatternPositions(i,s)}}updatePaintArrays(i,s,h,p,g){let y=!1;for(let b in i){let T=s.getPositions(b);for(let P of T){let C=h.feature(P.index);for(let D in this.binders){let F=this.binders[D];if((F instanceof Pa||F instanceof jn||F instanceof no)&&F.expression.isStateDependent===!0){let N=p.paint.get(D);F.expression=N.value,F.updatePaintArray(P.start,P.end,C,i[b],g),y=!0}}}}return y}defines(){let i=[];for(let s in this.binders){let h=this.binders[s];(h instanceof Ic||h instanceof Nn)&&i.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){let i=[];for(let s in this.binders){let h=this.binders[s];if(h instanceof Pa||h instanceof jn)for(let p=0;p<h.paintVertexAttributes.length;p++)i.push(h.paintVertexAttributes[p].name);else if(h instanceof no)for(let p=0;p<qa.members.length;p++)i.push(qa.members[p].name)}return i}getBinderUniforms(){let i=[];for(let s in this.binders){let h=this.binders[s];if(h instanceof Ic||h instanceof Nn||h instanceof jn)for(let p of h.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,s){let h=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof Ic||g instanceof Nn||g instanceof jn){for(let y of g.uniformNames)if(s[y]){let b=g.getBinding(i,s[y],y);h.push({name:y,property:p,binding:b})}}}return h}setUniforms(i,s,h,p){for(let{name:g,property:y,binding:b}of s)this.binders[y].setUniform(b,p,h.get(y),g)}updatePaintBuffers(i){this._buffers=[];for(let s in this.binders){let h=this.binders[s];if(i&&h instanceof no){let p=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof Pa||h instanceof jn)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(let s in this.binders){let h=this.binders[s];(h instanceof Pa||h instanceof jn||h instanceof no)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(let i in this.binders){let s=this.binders[i];(s instanceof Pa||s instanceof jn||s instanceof no)&&s.destroy()}}}class Bo{constructor(i,s,h=()=>!0){this.programConfigurations={};for(let p of i)this.programConfigurations[p.id]=new mf(p,s,h);this.needsUpload=!1,this._featureMap=new Fo,this._bufferOffset=0}populatePaintArrays(i,s,h,p,g,y){for(let b in this.programConfigurations)this.programConfigurations[b].populatePaintArrays(i,s,p,g,y);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,s,h,p){for(let g of h)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(i,this._featureMap,s,g,p)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(let s in this.programConfigurations)this.programConfigurations[s].upload(i);this.needsUpload=!1}}destroy(){for(let i in this.programConfigurations)this.programConfigurations[i].destroy()}}function dm(l,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[l]||[l.replace(`${i}-`,"").replace(/-/g,"_")]}function bL(l,i,s){let h={color:{source:Ol,composite:ee},number:{source:R,composite:Ol}},p=function(g){return{"line-pattern":{source:Ut,composite:Ut},"fill-pattern":{source:Ut,composite:Ut},"fill-extrusion-pattern":{source:Ut,composite:Ut}}[g]}(l);return p&&p[s]||h[i][s]}rt("ConstantBinder",Ic),rt("CrossFadedConstantBinder",Nn),rt("SourceExpressionBinder",Pa),rt("CrossFadedCompositeBinder",no),rt("CompositeExpressionBinder",jn),rt("ProgramConfiguration",mf,{omit:["_buffers"]}),rt("ProgramConfigurationSet",Bo);let OS=Math.pow(2,14)-1,wL=-OS-1;function Ec(l){let i=er/l.extent,s=l.loadGeometry();for(let h=0;h<s.length;h++){let p=s[h];for(let g=0;g<p.length;g++){let y=p[g],b=Math.round(y.x*i),T=Math.round(y.y*i);y.x=mi(b,wL,OS),y.y=mi(T,wL,OS),(b<y.x||b>y.x+1||T<y.y||T>y.y+1)&&Fi("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function qc(l,i){return{type:l.type,id:l.id,properties:l.properties,geometry:i?Ec(l):[]}}let SL=-32768;function kde(l,i,s,h,p){l.emplaceBack(SL+8*i+h,SL+8*s+p)}class kS{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ke,this.indexArray=new Ht,this.segments=new Wt,this.programConfigurations=new Bo(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){let p=this.layers[0],g=[],y=null,b=!1,T=p.type==="heatmap";if(p.type==="circle"){let C=p;y=C.layout.get("circle-sort-key"),b=!y.isConstant(),T=T||C.paint.get("circle-pitch-alignment")==="map"}let P=T?s.subdivisionGranularity.circle:1;for(let{feature:C,id:D,index:F,sourceLayerIndex:N}of i){let j=this.layers[0]._featureFilter.needGeometry,G=qc(C,j);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),G,h))continue;let Y=b?y.evaluate(G,{},h):void 0,ie={id:D,properties:C.properties,type:C.type,sourceLayerIndex:N,index:F,geometry:j?G.geometry:Ec(C),patterns:{},sortKey:Y};g.push(ie)}b&&g.sort((C,D)=>C.sortKey-D.sortKey);for(let C of g){let{geometry:D,index:F,sourceLayerIndex:N}=C,j=i[F].feature;this.addFeature(C,D,F,h,P),s.featureIndex.insert(j,D,F,N,this.index)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,yi),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,s,h,p,g=1){let y;switch(g){case 1:y=[0,7];break;case 3:y=[0,2,5,7];break;case 5:y=[0,1,3,4,6,7];break;case 7:y=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${g}; valid values are 1, 3, 5, 7.`)}let b=y.length;for(let T of s)for(let P of T){let C=P.x,D=P.y;if(C<0||C>=er||D<0||D>=er)continue;let F=this.segments.prepareSegment(b*b,this.layoutVertexArray,this.indexArray,i.sortKey),N=F.vertexLength;for(let j=0;j<b;j++)for(let G=0;G<b;G++)kde(this.layoutVertexArray,C,D,y[G],y[j]);for(let j=0;j<b-1;j++)for(let G=0;G<b-1;G++){let Y=N+j*b+G,ie=N+(j+1)*b+G;this.indexArray.emplaceBack(Y,ie+1,Y+1),this.indexArray.emplaceBack(Y,ie,ie+1)}F.vertexLength+=b*b,F.primitiveLength+=(b-1)*(b-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},p)}}function TL(l,i){for(let s=0;s<l.length;s++)if(Pc(i,l[s]))return!0;for(let s=0;s<i.length;s++)if(Pc(l,i[s]))return!0;return!!DS(l,i)}function Dde(l,i,s){return!!Pc(l,i)||!!LS(i,l,s)}function IL(l,i){if(l.length===1)return qL(i,l[0]);for(let s=0;s<i.length;s++){let h=i[s];for(let p=0;p<h.length;p++)if(Pc(l,h[p]))return!0}for(let s=0;s<l.length;s++)if(qL(i,l[s]))return!0;for(let s=0;s<i.length;s++)if(DS(l,i[s]))return!0;return!1}function Lde(l,i,s){if(l.length>1){if(DS(l,i))return!0;for(let h=0;h<i.length;h++)if(LS(i[h],l,s))return!0}for(let h=0;h<l.length;h++)if(LS(l[h],i,s))return!0;return!1}function DS(l,i){if(l.length===0||i.length===0)return!1;for(let s=0;s<l.length-1;s++){let h=l[s],p=l[s+1];for(let g=0;g<i.length-1;g++)if(zde(h,p,i[g],i[g+1]))return!0}return!1}function zde(l,i,s,h){return ar(l,s,h)!==ar(i,s,h)&&ar(l,i,s)!==ar(l,i,h)}function LS(l,i,s){let h=s*s;if(i.length===1)return l.distSqr(i[0])<h;for(let p=1;p<i.length;p++)if(EL(l,i[p-1],i[p])<h)return!0;return!1}function EL(l,i,s){let h=i.distSqr(s);if(h===0)return l.distSqr(i);let p=((l.x-i.x)*(s.x-i.x)+(l.y-i.y)*(s.y-i.y))/h;return l.distSqr(p<0?i:p>1?s:s.sub(i)._mult(p)._add(i))}function qL(l,i){for(let s=0;s<l.length;s++)if(Pc(l[s],i))return!0;return!1}function Pc(l,i){let s=!1;for(let h=0,p=l.length-1;h<l.length;p=h++){let g=l[h],y=l[p];g.y>i.y!=y.y>i.y&&i.x<(y.x-g.x)*(i.y-g.y)/(y.y-g.y)+g.x&&(s=!s)}return s}function Fde(l,i,s){let h=s[0],p=s[2];if(l.x<h.x&&i.x<h.x||l.x>p.x&&i.x>p.x||l.y<h.y&&i.y<h.y||l.y>p.y&&i.y>p.y)return!1;let g=ar(l,i,s[0]);return g!==ar(l,i,s[1])||g!==ar(l,i,s[2])||g!==ar(l,i,s[3])}function pm(l,i,s){let h=i.paint.get(l).value;return h.kind==="constant"?h.value:s.programConfigurations.get(i.id).getMaxValue(l)}function z_(l){return Math.sqrt(l[0]*l[0]+l[1]*l[1])}function F_(l,i,s,h,p){if(!i[0]&&!i[1])return l;let g=$.convert(i)._mult(p);s==="viewport"&&g._rotate(-h);let y=[];for(let b=0;b<l.length;b++)y.push(l[b].sub(g));return y}let PL,AL;rt("CircleBucket",kS,{omit:["layers"]});var Bde={get paint(){return AL=AL||new jr({"circle-radius":new mt(X.paint_circle["circle-radius"]),"circle-color":new mt(X.paint_circle["circle-color"]),"circle-blur":new mt(X.paint_circle["circle-blur"]),"circle-opacity":new mt(X.paint_circle["circle-opacity"]),"circle-translate":new st(X.paint_circle["circle-translate"]),"circle-translate-anchor":new st(X.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new st(X.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new st(X.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new mt(X.paint_circle["circle-stroke-width"]),"circle-stroke-color":new mt(X.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new mt(X.paint_circle["circle-stroke-opacity"])})},get layout(){return PL=PL||new jr({"circle-sort-key":new mt(X.layout_circle["circle-sort-key"])})}};class Nde extends Bn{constructor(i){super(i,Bde)}createBucket(i){return new kS(i)}queryRadius(i){let s=i;return pm("circle-radius",this,s)+pm("circle-stroke-width",this,s)+z_(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:s,featureState:h,geometry:p,transform:g,pixelsToTileUnits:y,unwrappedTileID:b,getElevation:T}){let P=F_(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-g.bearingInRadians,y),C=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),D=this.paint.get("circle-pitch-alignment")==="map",F=D?P:function(j,G,Y,ie){return j.map(me=>CL(me,G,Y,ie))}(P,g,b,T),N=D?C*y:C;for(let j of p)for(let G of j){let Y=D?G:CL(G,g,b,T),ie=N,me=g.projectTileCoordinates(G.x,G.y,b,T).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ie*=me/g.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ie*=g.cameraToCenterDistance/me),Dde(F,Y,ie))return!0}return!1}}function CL(l,i,s,h){let p=i.projectTileCoordinates(l.x,l.y,s,h).point;return new $((.5*p.x+.5)*i.width,(.5*-p.y+.5)*i.height)}class ML extends kS{}let RL;rt("HeatmapBucket",ML,{omit:["layers"]});var jde={get paint(){return RL=RL||new jr({"heatmap-radius":new mt(X.paint_heatmap["heatmap-radius"]),"heatmap-weight":new mt(X.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new st(X.paint_heatmap["heatmap-intensity"]),"heatmap-color":new sm(X.paint_heatmap["heatmap-color"]),"heatmap-opacity":new st(X.paint_heatmap["heatmap-opacity"])})}};function zS(l,{width:i,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${i*s*h}`)}else p=new Uint8Array(i*s*h);return l.width=i,l.height=s,l.data=p,l}function OL(l,{width:i,height:s},h){if(i===l.width&&s===l.height)return;let p=zS({},{width:i,height:s},h);FS(l,p,{x:0,y:0},{x:0,y:0},{width:Math.min(l.width,i),height:Math.min(l.height,s)},h),l.width=i,l.height=s,l.data=p.data}function FS(l,i,s,h,p,g){if(p.width===0||p.height===0)return i;if(p.width>l.width||p.height>l.height||s.x>l.width-p.width||s.y>l.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||h.x>i.width-p.width||h.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let y=l.data,b=i.data;if(y===b)throw new Error("srcData equals dstData, so image is already copied");for(let T=0;T<p.height;T++){let P=((s.y+T)*l.width+s.x)*g,C=((h.y+T)*i.width+h.x)*g;for(let D=0;D<p.width*g;D++)b[C+D]=y[P+D]}return i}class mm{constructor(i,s){zS(this,i,1,s)}resize(i){OL(this,i,1)}clone(){return new mm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,h,p,g){FS(i,s,h,p,g,1)}}class sa{constructor(i,s){zS(this,i,4,s)}resize(i){OL(this,i,4)}replace(i,s){s?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new sa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,h,p,g){FS(i,s,h,p,g,4)}}function kL(l){let i={},s=l.resolution||256,h=l.clips?l.clips.length:1,p=l.image||new sa({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);let g=(y,b,T)=>{i[l.evaluationKey]=T;let P=l.expression.evaluate(i);p.data[y+b+0]=Math.floor(255*P.r/P.a),p.data[y+b+1]=Math.floor(255*P.g/P.a),p.data[y+b+2]=Math.floor(255*P.b/P.a),p.data[y+b+3]=Math.floor(255*P.a)};if(l.clips)for(let y=0,b=0;y<h;++y,b+=4*s)for(let T=0,P=0;T<s;T++,P+=4){let C=T/(s-1),{start:D,end:F}=l.clips[y];g(b,P,D*(1-C)+F*C)}else for(let y=0,b=0;y<s;y++,b+=4)g(0,b,y/(s-1));return p}rt("AlphaImage",mm),rt("RGBAImage",sa);let BS="big-fb";class Ude extends Bn{createBucket(i){return new ML(i)}constructor(i){super(i,jde),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=kL({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(BS)&&this.heatmapFbos.delete(BS)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let DL;var $de={get paint(){return DL=DL||new jr({"hillshade-illumination-direction":new st(X.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new st(X.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new st(X.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new st(X.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new st(X.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new st(X.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new st(X.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new st(X.paint_hillshade["hillshade-method"])})}};class Vde extends Bn{constructor(i){super(i,$de),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,s=this.paint.get("hillshade-illumination-altitude").values,h=this.paint.get("hillshade-highlight-color").values,p=this.paint.get("hillshade-shadow-color").values,g=Math.max(i.length,s.length,h.length,p.length);i=i.concat(Array(g-i.length).fill(i.at(-1))),s=s.concat(Array(g-s.length).fill(s.at(-1))),h=h.concat(Array(g-h.length).fill(h.at(-1))),p=p.concat(Array(g-p.length).fill(p.at(-1)));let y=s.map(fs);return{directionRadians:i.map(fs),altitudeRadians:y,shadowColor:p,highlightColor:h}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let Gde=vr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zde}=Gde;function NS(l,i,s){let h=s.patternDependencies,p=!1;for(let g of i){let y=g.paint.get(`${l}-pattern`);y.isConstant()||(p=!0);let b=y.constantOr(null);b&&(p=!0,h[b.to]=!0,h[b.from]=!0)}return p}function jS(l,i,s,h,p){let g=p.patternDependencies;for(let y of i){let b=y.paint.get(`${l}-pattern`).value;if(b.kind!=="constant"){let T=b.evaluate({zoom:h-1},s,{},p.availableImages),P=b.evaluate({zoom:h},s,{},p.availableImages),C=b.evaluate({zoom:h+1},s,{},p.availableImages);T=T&&T.name?T.name:T,P=P&&P.name?P.name:P,C=C&&C.name?C.name:C,g[T]=!0,g[P]=!0,g[C]=!0,s.patterns[y.id]={min:T,mid:P,max:C}}}return s}function LL(l,i,s,h,p){let g;if(p===function(y,b,T,P){let C=0;for(let D=b,F=T-P;D<T;D+=P)C+=(y[F]-y[D])*(y[D+1]+y[F+1]),F=D;return C}(l,i,s,h)>0)for(let y=i;y<s;y+=h)g=NL(y/h|0,l[y],l[y+1],g);else for(let y=s-h;y>=i;y-=h)g=NL(y/h|0,l[y],l[y+1],g);return g&&vf(g,g.next)&&(_m(g),g=g.next),g}function Ac(l,i){if(!l)return l;i||(i=l);let s,h=l;do if(s=!1,h.steiner||!vf(h,h.next)&&Nr(h.prev,h,h.next)!==0)h=h.next;else{if(_m(h),h=i=h.prev,h===h.next)break;s=!0}while(s||h!==i);return i}function vm(l,i,s,h,p,g,y){if(!l)return;!y&&g&&function(T,P,C,D){let F=T;do F.z===0&&(F.z=US(F.x,F.y,P,C,D)),F.prevZ=F.prev,F.nextZ=F.next,F=F.next;while(F!==T);F.prevZ.nextZ=null,F.prevZ=null,function(N){let j,G=1;do{let Y,ie=N;N=null;let me=null;for(j=0;ie;){j++;let se=ie,B=0;for(let ue=0;ue<G&&(B++,se=se.nextZ,se);ue++);let K=G;for(;B>0||K>0&&se;)B!==0&&(K===0||!se||ie.z<=se.z)?(Y=ie,ie=ie.nextZ,B--):(Y=se,se=se.nextZ,K--),me?me.nextZ=Y:N=Y,Y.prevZ=me,me=Y;ie=se}me.nextZ=null,G*=2}while(j>1)}(F)}(l,h,p,g);let b=l;for(;l.prev!==l.next;){let T=l.prev,P=l.next;if(g?Wde(l,h,p,g):Hde(l))i.push(T.i,l.i,P.i),_m(l),l=P.next,b=P.next;else if((l=P)===b){y?y===1?vm(l=Kde(Ac(l),i),i,s,h,p,g,2):y===2&&Yde(l,i,s,h,p,g):vm(Ac(l),i,s,h,p,g,1);break}}}function Hde(l){let i=l.prev,s=l,h=l.next;if(Nr(i,s,h)>=0)return!1;let p=i.x,g=s.x,y=h.x,b=i.y,T=s.y,P=h.y,C=Math.min(p,g,y),D=Math.min(b,T,P),F=Math.max(p,g,y),N=Math.max(b,T,P),j=h.next;for(;j!==i;){if(j.x>=C&&j.x<=F&&j.y>=D&&j.y<=N&&gm(p,b,g,T,y,P,j.x,j.y)&&Nr(j.prev,j,j.next)>=0)return!1;j=j.next}return!0}function Wde(l,i,s,h){let p=l.prev,g=l,y=l.next;if(Nr(p,g,y)>=0)return!1;let b=p.x,T=g.x,P=y.x,C=p.y,D=g.y,F=y.y,N=Math.min(b,T,P),j=Math.min(C,D,F),G=Math.max(b,T,P),Y=Math.max(C,D,F),ie=US(N,j,i,s,h),me=US(G,Y,i,s,h),se=l.prevZ,B=l.nextZ;for(;se&&se.z>=ie&&B&&B.z<=me;){if(se.x>=N&&se.x<=G&&se.y>=j&&se.y<=Y&&se!==p&&se!==y&&gm(b,C,T,D,P,F,se.x,se.y)&&Nr(se.prev,se,se.next)>=0||(se=se.prevZ,B.x>=N&&B.x<=G&&B.y>=j&&B.y<=Y&&B!==p&&B!==y&&gm(b,C,T,D,P,F,B.x,B.y)&&Nr(B.prev,B,B.next)>=0))return!1;B=B.nextZ}for(;se&&se.z>=ie;){if(se.x>=N&&se.x<=G&&se.y>=j&&se.y<=Y&&se!==p&&se!==y&&gm(b,C,T,D,P,F,se.x,se.y)&&Nr(se.prev,se,se.next)>=0)return!1;se=se.prevZ}for(;B&&B.z<=me;){if(B.x>=N&&B.x<=G&&B.y>=j&&B.y<=Y&&B!==p&&B!==y&&gm(b,C,T,D,P,F,B.x,B.y)&&Nr(B.prev,B,B.next)>=0)return!1;B=B.nextZ}return!0}function Kde(l,i){let s=l;do{let h=s.prev,p=s.next.next;!vf(h,p)&&FL(h,s,s.next,p)&&ym(h,p)&&ym(p,h)&&(i.push(h.i,s.i,p.i),_m(s),_m(s.next),s=l=p),s=s.next}while(s!==l);return Ac(s)}function Yde(l,i,s,h,p,g){let y=l;do{let b=y.next.next;for(;b!==y.prev;){if(y.i!==b.i&&tpe(y,b)){let T=BL(y,b);return y=Ac(y,y.next),T=Ac(T,T.next),vm(y,i,s,h,p,g,0),void vm(T,i,s,h,p,g,0)}b=b.next}y=y.next}while(y!==l)}function Xde(l,i){let s=l.x-i.x;return s===0&&(s=l.y-i.y,s===0)&&(s=(l.next.y-l.y)/(l.next.x-l.x)-(i.next.y-i.y)/(i.next.x-i.x)),s}function Jde(l,i){let s=function(p,g){let y=g,b=p.x,T=p.y,P,C=-1/0;if(vf(p,y))return y;do{if(vf(p,y.next))return y.next;if(T<=y.y&&T>=y.next.y&&y.next.y!==y.y){let G=y.x+(T-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(G<=b&&G>C&&(C=G,P=y.x<y.next.x?y:y.next,G===b))return P}y=y.next}while(y!==g);if(!P)return null;let D=P,F=P.x,N=P.y,j=1/0;y=P;do{if(b>=y.x&&y.x>=F&&b!==y.x&&zL(T<N?b:C,T,F,N,T<N?C:b,T,y.x,y.y)){let G=Math.abs(T-y.y)/(b-y.x);ym(y,p)&&(G<j||G===j&&(y.x>P.x||y.x===P.x&&Qde(P,y)))&&(P=y,j=G)}y=y.next}while(y!==D);return P}(l,i);if(!s)return i;let h=BL(s,l);return Ac(h,h.next),Ac(s,s.next)}function Qde(l,i){return Nr(l.prev,l,i.prev)<0&&Nr(i.next,l,l.next)<0}function US(l,i,s,h,p){return(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l=(l-s)*p|0)|l<<8))|l<<4))|l<<2))|l<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function epe(l){let i=l,s=l;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==l);return s}function zL(l,i,s,h,p,g,y,b){return(p-y)*(i-b)>=(l-y)*(g-b)&&(l-y)*(h-b)>=(s-y)*(i-b)&&(s-y)*(g-b)>=(p-y)*(h-b)}function gm(l,i,s,h,p,g,y,b){return!(l===y&&i===b)&&zL(l,i,s,h,p,g,y,b)}function tpe(l,i){return l.next.i!==i.i&&l.prev.i!==i.i&&!function(s,h){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&FL(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(l,i)&&(ym(l,i)&&ym(i,l)&&function(s,h){let p=s,g=!1,y=(s.x+h.x)/2,b=(s.y+h.y)/2;do p.y>b!=p.next.y>b&&p.next.y!==p.y&&y<(p.next.x-p.x)*(b-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==s);return g}(l,i)&&(Nr(l.prev,l,i.prev)||Nr(l,i.prev,i))||vf(l,i)&&Nr(l.prev,l,l.next)>0&&Nr(i.prev,i,i.next)>0)}function Nr(l,i,s){return(i.y-l.y)*(s.x-i.x)-(i.x-l.x)*(s.y-i.y)}function vf(l,i){return l.x===i.x&&l.y===i.y}function FL(l,i,s,h){let p=N_(Nr(l,i,s)),g=N_(Nr(l,i,h)),y=N_(Nr(s,h,l)),b=N_(Nr(s,h,i));return p!==g&&y!==b||!(p!==0||!B_(l,s,i))||!(g!==0||!B_(l,h,i))||!(y!==0||!B_(s,l,h))||!(b!==0||!B_(s,i,h))}function B_(l,i,s){return i.x<=Math.max(l.x,s.x)&&i.x>=Math.min(l.x,s.x)&&i.y<=Math.max(l.y,s.y)&&i.y>=Math.min(l.y,s.y)}function N_(l){return l>0?1:l<0?-1:0}function ym(l,i){return Nr(l.prev,l,l.next)<0?Nr(l,i,l.next)>=0&&Nr(l,l.prev,i)>=0:Nr(l,i,l.prev)<0||Nr(l,l.next,i)<0}function BL(l,i){let s=$S(l.i,l.x,l.y),h=$S(i.i,i.x,i.y),p=l.next,g=i.prev;return l.next=i,i.prev=l,s.next=p,p.prev=s,h.next=s,s.prev=h,g.next=h,h.prev=g,h}function NL(l,i,s,h){let p=$S(l,i,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function _m(l){l.next.prev=l.prev,l.prev.next=l.next,l.prevZ&&(l.prevZ.nextZ=l.nextZ),l.nextZ&&(l.nextZ.prevZ=l.prevZ)}function $S(l,i,s){return{i:l,x:i,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class gf{constructor(i,s){if(s>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=s}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class j_{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}j_.noSubdivision=new j_({fill:new gf(0,0),line:new gf(0,0),tile:new gf(0,0),stencil:new gf(0,0),circle:1}),rt("SubdivisionGranularityExpression",gf),rt("SubdivisionGranularitySetting",j_);let yf=-32768,xm=32767;class rpe{constructor(i,s){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=er/i,this._canonical=s}_getKey(i,s){return(i+=32768)<<16|(s+=32768)<<0}_vertexToIndex(i,s){if(i<-32768||s<-32768||i>32767||s>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");let h=0|Math.round(i),p=0|Math.round(s),g=this._getKey(h,p);if(this._vertexDictionary.has(g))return this._vertexDictionary.get(g);let y=this._vertexBuffer.length/2;return this._vertexDictionary.set(g,y),this._vertexBuffer.push(h,p),y}_subdivideTrianglesScanline(i){if(this._granularity<2)return function(p,g){let y=[];for(let b=0;b<g.length;b+=3){let T=g[b],P=g[b+1],C=g[b+2],D=p[2*T],F=p[2*T+1];(p[2*P]-D)*(p[2*C+1]-F)-(p[2*P+1]-F)*(p[2*C]-D)>0?(y.push(T),y.push(C),y.push(P)):(y.push(T),y.push(P),y.push(C))}return y}(this._vertexBuffer,i);let s=[],h=i.length;for(let p=0;p<h;p+=3){let g=[i[p+0],i[p+1],i[p+2]],y=[this._vertexBuffer[2*i[p+0]+0],this._vertexBuffer[2*i[p+0]+1],this._vertexBuffer[2*i[p+1]+0],this._vertexBuffer[2*i[p+1]+1],this._vertexBuffer[2*i[p+2]+0],this._vertexBuffer[2*i[p+2]+1]],b=1/0,T=1/0,P=-1/0,C=-1/0;for(let G=0;G<3;G++){let Y=y[2*G],ie=y[2*G+1];b=Math.min(b,Y),P=Math.max(P,Y),T=Math.min(T,ie),C=Math.max(C,ie)}if(b===P||T===C)continue;let D=Math.floor(b/this._granularityCellSize),F=Math.ceil(P/this._granularityCellSize),N=Math.floor(T/this._granularityCellSize),j=Math.ceil(C/this._granularityCellSize);if(D!==F||N!==j)for(let G=N;G<j;G++){let Y=this._scanlineGenerateVertexRingForCellRow(G,y,g);ipe(this._vertexBuffer,Y,s)}else s.push(...g)}return s}_scanlineGenerateVertexRingForCellRow(i,s,h){let p=i*this._granularityCellSize,g=p+this._granularityCellSize,y=[];for(let b=0;b<3;b++){let T=s[2*b],P=s[2*b+1],C=s[2*(b+1)%6],D=s[(2*(b+1)+1)%6],F=s[2*(b+2)%6],N=s[(2*(b+2)+1)%6],j=C-T,G=D-P,Y=j===0,ie=G===0,me=(p-P)/G,se=(g-P)/G,B=Math.min(me,se),K=Math.max(me,se);if(!ie&&(B>=1||K<=0)||ie&&(P<p||P>g)){D>=p&&D<=g&&y.push(h[(b+1)%3]);continue}!ie&&B>0&&y.push(this._vertexToIndex(T+j*B,P+G*B));let ue=T+j*Math.max(B,0),Ee=T+j*Math.min(K,1);Y||this._generateIntraEdgeVertices(y,T,P,C,D,ue,Ee),!ie&&K<1&&y.push(this._vertexToIndex(T+j*K,P+G*K)),(ie||D>=p&&D<=g)&&y.push(h[(b+1)%3]),!ie&&(D<=p||D>=g)&&this._generateInterEdgeVertices(y,T,P,C,D,F,N,Ee,p,g)}return y}_generateIntraEdgeVertices(i,s,h,p,g,y,b){let T=p-s,P=g-h,C=P===0,D=C?Math.min(s,p):Math.min(y,b),F=C?Math.max(s,p):Math.max(y,b),N=Math.floor(D/this._granularityCellSize)+1,j=Math.ceil(F/this._granularityCellSize)-1;if(C?s<p:y<b)for(let G=N;G<=j;G++){let Y=G*this._granularityCellSize;i.push(this._vertexToIndex(Y,h+P*(Y-s)/T))}else for(let G=j;G>=N;G--){let Y=G*this._granularityCellSize;i.push(this._vertexToIndex(Y,h+P*(Y-s)/T))}}_generateInterEdgeVertices(i,s,h,p,g,y,b,T,P,C){let D=g-h,F=y-p,N=b-g,j=(P-g)/N,G=(C-g)/N,Y=Math.min(j,G),ie=Math.max(j,G),me=p+F*Y,se=Math.floor(Math.min(me,T)/this._granularityCellSize)+1,B=Math.ceil(Math.max(me,T)/this._granularityCellSize)-1,K=T<me,ue=N===0;if(ue&&(b===P||b===C))return;if(ue||Y>=1||ie<=0){let Ne=h-b,Ce=y+(s-y)*Math.min((P-b)/Ne,(C-b)/Ne);se=Math.floor(Math.min(Ce,T)/this._granularityCellSize)+1,B=Math.ceil(Math.max(Ce,T)/this._granularityCellSize)-1,K=T<Ce}let Ee=D>0?C:P;if(K)for(let Ne=se;Ne<=B;Ne++)i.push(this._vertexToIndex(Ne*this._granularityCellSize,Ee));else for(let Ne=B;Ne>=se;Ne--)i.push(this._vertexToIndex(Ne*this._granularityCellSize,Ee))}_generateOutline(i){let s=[];for(let h of i){let p=Cc(h,this._granularity,!0),g=this._pointArrayToIndices(p),y=[];for(let b=1;b<g.length;b++)y.push(g[b-1]),y.push(g[b]);s.push(y)}return s}_handlePoles(i){let s=!1,h=!1;this._canonical&&(this._canonical.y===0&&(s=!0),this._canonical.y===(1<<this._canonical.z)-1&&(h=!0)),(s||h)&&this._fillPoles(i,s,h)}_ensureNoPoleVertices(){let i=this._vertexBuffer;for(let s=0;s<i.length;s+=2){let h=i[s+1];h===yf&&(i[s+1]=-32767),h===xm&&(i[s+1]=32766)}}_generatePoleQuad(i,s,h,p,g,y){p>g!=(y===yf)?(i.push(s),i.push(h),i.push(this._vertexToIndex(p,y)),i.push(h),i.push(this._vertexToIndex(g,y)),i.push(this._vertexToIndex(p,y))):(i.push(h),i.push(s),i.push(this._vertexToIndex(p,y)),i.push(this._vertexToIndex(g,y)),i.push(h),i.push(this._vertexToIndex(p,y)))}_fillPoles(i,s,h){let p=this._vertexBuffer,g=er,y=i.length;for(let b=2;b<y;b+=3){let T=i[b-2],P=i[b-1],C=i[b],D=p[2*T],F=p[2*T+1],N=p[2*P],j=p[2*P+1],G=p[2*C],Y=p[2*C+1];s&&(F===0&&j===0&&this._generatePoleQuad(i,T,P,D,N,yf),j===0&&Y===0&&this._generatePoleQuad(i,P,C,N,G,yf),Y===0&&F===0&&this._generatePoleQuad(i,C,T,G,D,yf)),h&&(F===g&&j===g&&this._generatePoleQuad(i,T,P,D,N,xm),j===g&&Y===g&&this._generatePoleQuad(i,P,C,N,G,xm),Y===g&&F===g&&this._generatePoleQuad(i,C,T,G,D,xm))}}_initializeVertices(i){for(let s=0;s<i.length;s+=2)this._vertexToIndex(i[s],i[s+1])}subdividePolygonInternal(i,s){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;let{flattened:h,holeIndices:p}=function(b){let T=[],P=[];for(let C of b)if(C.length!==0){C!==b[0]&&T.push(P.length/2);for(let D=0;D<C.length;D++)P.push(C[D].x),P.push(C[D].y)}return{flattened:P,holeIndices:T}}(i),g;this._initializeVertices(h);try{let b=function(P,C,D=2){let F=C&&C.length,N=F?C[0]*D:P.length,j=LL(P,0,N,D,!0),G=[];if(!j||j.next===j.prev)return G;let Y,ie,me;if(F&&(j=function(se,B,K,ue){let Ee=[];for(let Ne=0,Ce=B.length;Ne<Ce;Ne++){let De=LL(se,B[Ne]*ue,Ne<Ce-1?B[Ne+1]*ue:se.length,ue,!1);De===De.next&&(De.steiner=!0),Ee.push(epe(De))}Ee.sort(Xde);for(let Ne=0;Ne<Ee.length;Ne++)K=Jde(Ee[Ne],K);return K}(P,C,j,D)),P.length>80*D){Y=1/0,ie=1/0;let se=-1/0,B=-1/0;for(let K=D;K<N;K+=D){let ue=P[K],Ee=P[K+1];ue<Y&&(Y=ue),Ee<ie&&(ie=Ee),ue>se&&(se=ue),Ee>B&&(B=Ee)}me=Math.max(se-Y,B-ie),me=me!==0?32767/me:0}return vm(j,G,D,Y,ie,me,0),G}(h,p),T=this._convertIndices(h,b);g=this._subdivideTrianglesScanline(T)}catch(b){console.error(b)}let y=[];return s&&(y=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(g),{verticesFlattened:this._vertexBuffer,indicesTriangles:g,indicesLineList:y}}_convertIndices(i,s){let h=[];for(let p=0;p<s.length;p++)h.push(this._vertexToIndex(i[2*s[p]],i[2*s[p]+1]));return h}_pointArrayToIndices(i){let s=[];for(let h=0;h<i.length;h++){let p=i[h];s.push(this._vertexToIndex(p.x,p.y))}return s}}function jL(l,i,s,h=!0){return new rpe(s,i).subdividePolygonInternal(l,h)}function Cc(l,i,s=!1){if(!l||l.length<1)return[];if(l.length<2)return[];let h=l[0],p=l[l.length-1],g=s&&(h.x!==p.x||h.y!==p.y);if(i<2)return g?[...l,l[0]]:[...l];let y=Math.floor(er/i),b=[];b.push(new $(l[0].x,l[0].y));let T=l.length,P=g?T:T-1;for(let C=0;C<P;C++){let D=l[C],F=C<T-1?l[C+1]:l[0],N=D.x,j=D.y,G=F.x,Y=F.y,ie=N!==G,me=j!==Y;if(!ie&&!me)continue;let se=G-N,B=Y-j,K=Math.abs(se),ue=Math.abs(B),Ee=N,Ne=j;for(;;){let De=se>0?(Math.floor(Ee/y)+1)*y:(Math.ceil(Ee/y)-1)*y,Ge=B>0?(Math.floor(Ne/y)+1)*y:(Math.ceil(Ne/y)-1)*y,je=Math.abs(Ee-De),Ze=Math.abs(Ne-Ge),ze=Math.abs(Ee-G),it=Math.abs(Ne-Y),ft=ie?je/K:Number.POSITIVE_INFINITY,ct=me?Ze/ue:Number.POSITIVE_INFINITY;if((ze<=je||!ie)&&(it<=Ze||!me))break;if(ft<ct&&ie||!me){Ee=De,Ne+=B*ft;let ot=new $(Ee,Math.round(Ne));b[b.length-1].x===ot.x&&b[b.length-1].y===ot.y||b.push(ot)}else{Ee+=se*ct,Ne=Ge;let ot=new $(Math.round(Ee),Ne);b[b.length-1].x===ot.x&&b[b.length-1].y===ot.y||b.push(ot)}}let Ce=new $(G,Y);b[b.length-1].x===Ce.x&&b[b.length-1].y===Ce.y||b.push(Ce)}return b}function ipe(l,i,s){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let h=0,p=l[2*i[0]];for(let T=1;T<i.length;T++){let P=l[2*i[T]];P<p&&(p=P,h=T)}let g=i.length,y=h,b=(y+1)%g;for(;;){let T=y-1>=0?y-1:g-1,P=(b+1)%g,C=l[2*i[T]],D=l[2*i[P]],F=l[2*i[y]],N=l[2*i[y]+1],j=l[2*i[b]+1],G=!1;if(C<D)G=!0;else if(C>D)G=!1;else{let Y=j-N,ie=-(l[2*i[b]]-F),me=N<j?1:-1;((C-F)*Y+(l[2*i[T]+1]-N)*ie)*me>((D-F)*Y+(l[2*i[P]+1]-N)*ie)*me&&(G=!0)}if(G){let Y=i[T],ie=i[y],me=i[b];Y!==ie&&Y!==me&&ie!==me&&s.push(me,ie,Y),y--,y<0&&(y=g-1)}else{let Y=i[P],ie=i[y],me=i[b];Y!==ie&&Y!==me&&ie!==me&&s.push(me,ie,Y),b++,b>=g&&(b=0)}if(T===P)break}}function UL(l,i,s,h,p,g,y,b,T){let P=p.length/2,C=y&&b&&T;if(P<Wt.MAX_VERTEX_ARRAY_LENGTH){let D=i.prepareSegment(P,s,h),F=D.vertexLength;for(let G=0;G<g.length;G+=3)h.emplaceBack(F+g[G],F+g[G+1],F+g[G+2]);let N,j;D.vertexLength+=P,D.primitiveLength+=g.length/3,C&&(j=y.prepareSegment(P,s,b),N=j.vertexLength,j.vertexLength+=P);for(let G=0;G<p.length;G+=2)l(p[G],p[G+1]);if(C)for(let G=0;G<T.length;G++){let Y=T[G];for(let ie=1;ie<Y.length;ie+=2)b.emplaceBack(N+Y[ie-1],N+Y[ie]);j.primitiveLength+=Y.length/2}}else(function(D,F,N,j,G,Y){let ie=[];for(let ue=0;ue<j.length/2;ue++)ie.push(-1);let me={count:0},se=0,B=D.getOrCreateLatestSegment(F,N),K=B.vertexLength;for(let ue=2;ue<G.length;ue+=3){let Ee=G[ue-2],Ne=G[ue-1],Ce=G[ue],De=ie[Ee]<se,Ge=ie[Ne]<se,je=ie[Ce]<se;B.vertexLength+((De?1:0)+(Ge?1:0)+(je?1:0))>Wt.MAX_VERTEX_ARRAY_LENGTH&&(B=D.createNewSegment(F,N),se=me.count,De=!0,Ge=!0,je=!0,K=0);let Ze=bm(ie,j,Y,me,Ee,De,B),ze=bm(ie,j,Y,me,Ne,Ge,B),it=bm(ie,j,Y,me,Ce,je,B);N.emplaceBack(K+Ze-se,K+ze-se,K+it-se),B.primitiveLength++}})(i,s,h,p,g,l),C&&function(D,F,N,j,G,Y){let ie=[];for(let ue=0;ue<j.length/2;ue++)ie.push(-1);let me={count:0},se=0,B=D.getOrCreateLatestSegment(F,N),K=B.vertexLength;for(let ue=0;ue<G.length;ue++){let Ee=G[ue];for(let Ne=1;Ne<G[ue].length;Ne+=2){let Ce=Ee[Ne-1],De=Ee[Ne],Ge=ie[Ce]<se,je=ie[De]<se;B.vertexLength+((Ge?1:0)+(je?1:0))>Wt.MAX_VERTEX_ARRAY_LENGTH&&(B=D.createNewSegment(F,N),se=me.count,Ge=!0,je=!0,K=0);let Ze=bm(ie,j,Y,me,Ce,Ge,B),ze=bm(ie,j,Y,me,De,je,B);N.emplaceBack(K+Ze-se,K+ze-se),B.primitiveLength++}}}(y,s,b,p,T,l),i.forceNewSegmentOnNextPrepare(),y==null||y.forceNewSegmentOnNextPrepare()}function bm(l,i,s,h,p,g,y){if(g){let b=h.count;return s(i[2*p],i[2*p+1]),l[p]=h.count,h.count++,y.vertexLength++,b}return l[p]}class VS{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new We,this.indexArray=new Ht,this.indexArray2=new ei,this.programConfigurations=new Bo(i.layers,i.zoom),this.segments=new Wt,this.segments2=new Wt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){this.hasPattern=NS("fill",this.layers,s);let p=this.layers[0].layout.get("fill-sort-key"),g=!p.isConstant(),y=[];for(let{feature:b,id:T,index:P,sourceLayerIndex:C}of i){let D=this.layers[0]._featureFilter.needGeometry,F=qc(b,D);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),F,h))continue;let N=g?p.evaluate(F,{},h,s.availableImages):void 0,j={id:T,properties:b.properties,type:b.type,sourceLayerIndex:C,index:P,geometry:D?F.geometry:Ec(b),patterns:{},sortKey:N};y.push(j)}g&&y.sort((b,T)=>b.sortKey-T.sortKey);for(let b of y){let{geometry:T,index:P,sourceLayerIndex:C}=b;if(this.hasPattern){let D=jS("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(D)}else this.addFeature(b,T,P,h,{},s.subdivisionGranularity);s.featureIndex.insert(i[P].feature,T,P,C,this.index)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}addFeatures(i,s,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Zde),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,s,h,p,g,y){for(let b of Bh(s,500)){let T=jL(b,p,y.fill.getGranularityForZoomLevel(p.z)),P=this.layoutVertexArray;UL((C,D)=>{P.emplaceBack(C,D)},this.segments,this.layoutVertexArray,this.indexArray,T.verticesFlattened,T.indicesTriangles,this.segments2,this.indexArray2,T.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}}let $L,VL;rt("FillBucket",VS,{omit:["layers","patternFeatures"]});var npe={get paint(){return VL=VL||new jr({"fill-antialias":new st(X.paint_fill["fill-antialias"]),"fill-opacity":new mt(X.paint_fill["fill-opacity"]),"fill-color":new mt(X.paint_fill["fill-color"]),"fill-outline-color":new mt(X.paint_fill["fill-outline-color"]),"fill-translate":new st(X.paint_fill["fill-translate"]),"fill-translate-anchor":new st(X.paint_fill["fill-translate-anchor"]),"fill-pattern":new bc(X.paint_fill["fill-pattern"])})},get layout(){return $L=$L||new jr({"fill-sort-key":new mt(X.layout_fill["fill-sort-key"])})}};class ape extends Bn{constructor(i){super(i,npe)}recalculate(i,s){super.recalculate(i,s);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new VS(i)}queryRadius(){return z_(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:s,transform:h,pixelsToTileUnits:p}){return IL(F_(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-h.bearingInRadians,p),s)}isTileClipped(){return!0}}let ope=vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),spe=vr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:lpe}=ope;var GS,GL,ZS,ZL,HS,HL,WL,U_={};function KL(){if(GL)return GS;GL=1;var l=M();function i(p,g,y,b,T){this.properties={},this.extent=y,this.type=0,this._pbf=p,this._geometry=-1,this._keys=b,this._values=T,p.readFields(s,this,g)}function s(p,g,y){p==1?g.id=y.readVarint():p==2?function(b,T){for(var P=b.readVarint()+b.pos;b.pos<P;){var C=T._keys[b.readVarint()],D=T._values[b.readVarint()];T.properties[C]=D}}(y,g):p==3?g.type=y.readVarint():p==4&&(g._geometry=y.pos)}function h(p){for(var g,y,b=0,T=0,P=p.length,C=P-1;T<P;C=T++)b+=((y=p[C]).x-(g=p[T]).x)*(g.y+y.y);return b}return GS=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var p=this._pbf;p.pos=this._geometry;for(var g,y=p.readVarint()+p.pos,b=1,T=0,P=0,C=0,D=[];p.pos<y;){if(T<=0){var F=p.readVarint();b=7&F,T=F>>3}if(T--,b===1||b===2)P+=p.readSVarint(),C+=p.readSVarint(),b===1&&(g&&D.push(g),g=[]),g.push(new l(P,C));else{if(b!==7)throw new Error("unknown command "+b);g&&g.push(g[0].clone())}}return g&&D.push(g),D},i.prototype.bbox=function(){var p=this._pbf;p.pos=this._geometry;for(var g=p.readVarint()+p.pos,y=1,b=0,T=0,P=0,C=1/0,D=-1/0,F=1/0,N=-1/0;p.pos<g;){if(b<=0){var j=p.readVarint();y=7&j,b=j>>3}if(b--,y===1||y===2)(T+=p.readSVarint())<C&&(C=T),T>D&&(D=T),(P+=p.readSVarint())<F&&(F=P),P>N&&(N=P);else if(y!==7)throw new Error("unknown command "+y)}return[C,F,D,N]},i.prototype.toGeoJSON=function(p,g,y){var b,T,P=this.extent*Math.pow(2,y),C=this.extent*p,D=this.extent*g,F=this.loadGeometry(),N=i.types[this.type];function j(ie){for(var me=0;me<ie.length;me++){var se=ie[me];ie[me]=[360*(se.x+C)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(se.y+D)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var G=[];for(b=0;b<F.length;b++)G[b]=F[b][0];j(F=G);break;case 2:for(b=0;b<F.length;b++)j(F[b]);break;case 3:for(F=function(ie){var me=ie.length;if(me<=1)return[ie];for(var se,B,K=[],ue=0;ue<me;ue++){var Ee=h(ie[ue]);Ee!==0&&(B===void 0&&(B=Ee<0),B===Ee<0?(se&&K.push(se),se=[ie[ue]]):se.push(ie[ue]))}return se&&K.push(se),K}(F),b=0;b<F.length;b++)for(T=0;T<F[b].length;T++)j(F[b][T])}F.length===1?F=F[0]:N="Multi"+N;var Y={type:"Feature",geometry:{type:N,coordinates:F},properties:this.properties};return"id"in this&&(Y.id=this.id),Y},GS}function YL(){if(ZL)return ZS;ZL=1;var l=KL();function i(h,p){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=h,this._keys=[],this._values=[],this._features=[],h.readFields(s,this,p),this.length=this._features.length}function s(h,p,g){h===15?p.version=g.readVarint():h===1?p.name=g.readString():h===5?p.extent=g.readVarint():h===2?p._features.push(g.pos):h===3?p._keys.push(g.readString()):h===4&&p._values.push(function(y){for(var b=null,T=y.readVarint()+y.pos;y.pos<T;){var P=y.readVarint()>>3;b=P===1?y.readString():P===2?y.readFloat():P===3?y.readDouble():P===4?y.readVarint64():P===5?y.readVarint():P===6?y.readSVarint():P===7?y.readBoolean():null}return b}(g))}return ZS=i,i.prototype.feature=function(h){if(h<0||h>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[h];var p=this._pbf.readVarint()+this._pbf.pos;return new l(this._pbf,p,this.extent,this._keys,this._values)},ZS}function XL(){return WL||(WL=1,U_.VectorTile=function(){if(HL)return HS;HL=1;var l=YL();function i(s,h,p){if(s===3){var g=new l(p,p.readVarint()+p.pos);g.length&&(h[g.name]=g)}}return HS=function(s,h){this.layers=s.readFields(i,{},h)},HS}(),U_.VectorTileFeature=KL(),U_.VectorTileLayer=YL()),U_}var wm=_(XL());let upe=wm.VectorTileFeature.types,WS=Math.pow(2,13);function Sm(l,i,s,h,p,g,y,b){l.emplaceBack(i,s,2*Math.floor(h*WS)+y,p*WS*2,g*WS*2,Math.round(b))}class KS{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ue,this.centroidVertexArray=new Oe,this.indexArray=new Ht,this.programConfigurations=new Bo(i.layers,i.zoom),this.segments=new Wt,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){this.features=[],this.hasPattern=NS("fill-extrusion",this.layers,s);for(let{feature:p,id:g,index:y,sourceLayerIndex:b}of i){let T=this.layers[0]._featureFilter.needGeometry,P=qc(p,T);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),P,h))continue;let C={id:g,sourceLayerIndex:b,index:y,geometry:T?P.geometry:Ec(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(jS("fill-extrusion",this.layers,C,this.zoom,s)):this.addFeature(C,C.geometry,y,h,{},s.subdivisionGranularity),s.featureIndex.insert(p,C.geometry,y,b,this.index,!0)}}addFeatures(i,s,h){for(let p of this.features){let{geometry:g}=p;this.addFeature(p,g,p.index,s,h,i.subdivisionGranularity)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,lpe),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,spe.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,s,h,p,g,y){for(let b of Bh(s,500)){let T={x:0,y:0,sampleCount:0},P=this.layoutVertexArray.length;this.processPolygon(T,p,i,b,y);let C=this.layoutVertexArray.length-P,D=Math.floor(T.x/T.sampleCount),F=Math.floor(T.y/T.sampleCount);for(let N=0;N<C;N++)this.centroidVertexArray.emplaceBack(D,F)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}processPolygon(i,s,h,p,g){if(p.length<1||JL(p[0]))return;for(let D of p)D.length!==0&&cpe(i,D);let y={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},b=g.fill.getGranularityForZoomLevel(s.z),T=upe[h.type]==="Polygon";for(let D of p){if(D.length===0||JL(D))continue;let F=Cc(D,b,T);this._generateSideFaces(F,y)}if(!T)return;let P=jL(p,s,b,!1),C=this.layoutVertexArray;UL((D,F)=>{Sm(C,D,F,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,P.verticesFlattened,P.indicesTriangles)}_generateSideFaces(i,s){let h=0;for(let p=1;p<i.length;p++){let g=i[p],y=i[p-1];if(hpe(g,y))continue;s.segment.vertexLength+4>Wt.MAX_VERTEX_ARRAY_LENGTH&&(s.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let b=g.sub(y)._perp()._unit(),T=y.dist(g);h+T>32768&&(h=0),Sm(this.layoutVertexArray,g.x,g.y,b.x,b.y,0,0,h),Sm(this.layoutVertexArray,g.x,g.y,b.x,b.y,0,1,h),h+=T,Sm(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,0,h),Sm(this.layoutVertexArray,y.x,y.y,b.x,b.y,0,1,h);let P=s.segment.vertexLength;this.indexArray.emplaceBack(P,P+2,P+1),this.indexArray.emplaceBack(P+1,P+2,P+3),s.segment.vertexLength+=4,s.segment.primitiveLength+=2}}}function cpe(l,i){for(let s=0;s<i.length;s++){let h=i[s];s===i.length-1&&i[0].x===h.x&&i[0].y===h.y||(l.x+=h.x,l.y+=h.y,l.sampleCount++)}}function hpe(l,i){return l.x===i.x&&(l.x<0||l.x>er)||l.y===i.y&&(l.y<0||l.y>er)}function JL(l){return l.every(i=>i.x<0)||l.every(i=>i.x>er)||l.every(i=>i.y<0)||l.every(i=>i.y>er)}let QL;rt("FillExtrusionBucket",KS,{omit:["layers","features"]});var fpe={get paint(){return QL=QL||new jr({"fill-extrusion-opacity":new st(X["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new mt(X["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new st(X["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new st(X["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new bc(X["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new mt(X["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new mt(X["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new st(X["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class dpe extends Bn{constructor(i){super(i,fpe)}createBucket(i){return new KS(i)}queryRadius(){return z_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:s,featureState:h,geometry:p,transform:g,pixelsToTileUnits:y,pixelPosMatrix:b}){let T=F_(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-g.bearingInRadians,y),P=this.paint.get("fill-extrusion-height").evaluate(s,h),C=this.paint.get("fill-extrusion-base").evaluate(s,h),D=function(N,j,G){let Y=[];for(let ie of N){let me=[ie.x,ie.y,0,1];qi(me,me,j),Y.push(new $(me[0]/me[3],me[1]/me[3]))}return Y}(T,b),F=function(N,j,G,Y){let ie=[],me=[],se=Y[8]*j,B=Y[9]*j,K=Y[10]*j,ue=Y[11]*j,Ee=Y[8]*G,Ne=Y[9]*G,Ce=Y[10]*G,De=Y[11]*G;for(let Ge of N){let je=[],Ze=[];for(let ze of Ge){let it=ze.x,ft=ze.y,ct=Y[0]*it+Y[4]*ft+Y[12],ot=Y[1]*it+Y[5]*ft+Y[13],Ft=Y[2]*it+Y[6]*ft+Y[14],Ar=Y[3]*it+Y[7]*ft+Y[15],ri=Ft+K,Ri=Ar+ue,ua=ct+Ee,In=ot+Ne,_i=Ft+Ce,xr=Ar+De,li=new $((ct+se)/Ri,(ot+B)/Ri);li.z=ri/Ri,je.push(li);let xi=new $(ua/xr,In/xr);xi.z=_i/xr,Ze.push(xi)}ie.push(je),me.push(Ze)}return[ie,me]}(p,C,P,b);return function(N,j,G){let Y=1/0;IL(G,j)&&(Y=ez(G,j[0]));for(let ie=0;ie<j.length;ie++){let me=j[ie],se=N[ie];for(let B=0;B<me.length-1;B++){let K=me[B],ue=[K,me[B+1],se[B+1],se[B],K];TL(G,ue)&&(Y=Math.min(Y,ez(G,ue)))}}return Y!==1/0&&Y}(F[0],F[1],D)}}function Tm(l,i){return l.x*i.x+l.y*i.y}function ez(l,i){if(l.length===1){let s=0,h=i[s++],p;for(;!p||h.equals(p);)if(p=i[s++],!p)return 1/0;for(;s<i.length;s++){let g=i[s],y=l[0],b=p.sub(h),T=g.sub(h),P=y.sub(h),C=Tm(b,b),D=Tm(b,T),F=Tm(T,T),N=Tm(P,b),j=Tm(P,T),G=C*F-D*D,Y=(F*N-D*j)/G,ie=(C*j-D*N)/G,me=h.z*(1-Y-ie)+p.z*Y+g.z*ie;if(isFinite(me))return me}return 1/0}{let s=1/0;for(let h of i)s=Math.min(s,h.z);return s}}let ppe=vr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:mpe}=ppe,vpe=vr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:gpe}=vpe,ype=wm.VectorTileFeature.types,_pe=Math.cos(Math.PI/180*37.5),tz=Math.pow(2,14)/.5;class YS{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new at,this.layoutVertexArray2=new Ct,this.indexArray=new Ht,this.programConfigurations=new Bo(i.layers,i.zoom),this.segments=new Wt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){this.hasPattern=NS("line",this.layers,s);let p=this.layers[0].layout.get("line-sort-key"),g=!p.isConstant(),y=[];for(let{feature:b,id:T,index:P,sourceLayerIndex:C}of i){let D=this.layers[0]._featureFilter.needGeometry,F=qc(b,D);if(!this.layers[0]._featureFilter.filter(new cr(this.zoom),F,h))continue;let N=g?p.evaluate(F,{},h):void 0,j={id:T,properties:b.properties,type:b.type,sourceLayerIndex:C,index:P,geometry:D?F.geometry:Ec(b),patterns:{},sortKey:N};y.push(j)}g&&y.sort((b,T)=>b.sortKey-T.sortKey);for(let b of y){let{geometry:T,index:P,sourceLayerIndex:C}=b;if(this.hasPattern){let D=jS("line",this.layers,b,this.zoom,s);this.patternFeatures.push(D)}else this.addFeature(b,T,P,h,{},s.subdivisionGranularity);s.featureIndex.insert(i[P].feature,T,P,C,this.index)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}addFeatures(i,s,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,gpe)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,mpe),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,s,h,p,g,y){let b=this.layers[0].layout,T=b.get("line-join").evaluate(i,{}),P=b.get("line-cap"),C=b.get("line-miter-limit"),D=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(let F of s)this.addLine(F,i,T,P,C,D,p,y);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}addLine(i,s,h,p,g,y,b,T){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=Cc(i,b?T.line.getGranularityForZoomLevel(b.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let se=0;se<i.length-1;se++)this.totalDistance+=i[se].dist(i[se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let P=ype[s.type]==="Polygon",C=i.length;for(;C>=2&&i[C-1].equals(i[C-2]);)C--;let D=0;for(;D<C-1&&i[D].equals(i[D+1]);)D++;if(C<(P?3:2))return;h==="bevel"&&(g=1.05);let F=this.overscaling<=16?15*er/(512*this.overscaling):0,N=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray),j,G,Y,ie,me;this.e1=this.e2=-1,P&&(j=i[C-2],me=i[D].sub(j)._unit()._perp());for(let se=D;se<C;se++){if(Y=se===C-1?P?i[D+1]:void 0:i[se+1],Y&&i[se].equals(Y))continue;me&&(ie=me),j&&(G=j),j=i[se],me=Y?Y.sub(j)._unit()._perp():ie,ie=ie||me;let B=ie.add(me);B.x===0&&B.y===0||B._unit();let K=ie.x*me.x+ie.y*me.y,ue=B.x*me.x+B.y*me.y,Ee=ue!==0?1/ue:1/0,Ne=2*Math.sqrt(2-2*ue),Ce=ue<_pe&&G&&Y,De=ie.x*me.y-ie.y*me.x>0;if(Ce&&se>D){let Ze=j.dist(G);if(Ze>2*F){let ze=j.sub(j.sub(G)._mult(F/Ze)._round());this.updateDistance(G,ze),this.addCurrentVertex(ze,ie,0,0,N),G=ze}}let Ge=G&&Y,je=Ge?h:P?"butt":p;if(Ge&&je==="round"&&(Ee<y?je="miter":Ee<=2&&(je="fakeround")),je==="miter"&&Ee>g&&(je="bevel"),je==="bevel"&&(Ee>2&&(je="flipbevel"),Ee<g&&(je="miter")),G&&this.updateDistance(G,j),je==="miter")B._mult(Ee),this.addCurrentVertex(j,B,0,0,N);else if(je==="flipbevel"){if(Ee>100)B=me.mult(-1);else{let Ze=Ee*ie.add(me).mag()/ie.sub(me).mag();B._perp()._mult(Ze*(De?-1:1))}this.addCurrentVertex(j,B,0,0,N),this.addCurrentVertex(j,B.mult(-1),0,0,N)}else if(je==="bevel"||je==="fakeround"){let Ze=-Math.sqrt(Ee*Ee-1),ze=De?Ze:0,it=De?0:Ze;if(G&&this.addCurrentVertex(j,ie,ze,it,N),je==="fakeround"){let ft=Math.round(180*Ne/Math.PI/20);for(let ct=1;ct<ft;ct++){let ot=ct/ft;if(ot!==.5){let Ar=ot-.5;ot+=ot*Ar*(ot-1)*((1.0904+K*(K*(3.55645-1.43519*K)-3.2452))*Ar*Ar+(.848013+K*(.215638*K-1.06021)))}let Ft=me.sub(ie)._mult(ot)._add(ie)._unit()._mult(De?-1:1);this.addHalfVertex(j,Ft.x,Ft.y,!1,De,0,N)}}Y&&this.addCurrentVertex(j,me,-ze,-it,N)}else if(je==="butt")this.addCurrentVertex(j,B,0,0,N);else if(je==="square"){let Ze=G?1:-1;this.addCurrentVertex(j,B,Ze,Ze,N)}else je==="round"&&(G&&(this.addCurrentVertex(j,ie,0,0,N),this.addCurrentVertex(j,ie,1,1,N,!0)),Y&&(this.addCurrentVertex(j,me,-1,-1,N,!0),this.addCurrentVertex(j,me,0,0,N)));if(Ce&&se<C-1){let Ze=j.dist(Y);if(Ze>2*F){let ze=j.add(Y.sub(j)._mult(F/Ze)._round());this.updateDistance(j,ze),this.addCurrentVertex(ze,me,0,0,N),j=ze}}}}addCurrentVertex(i,s,h,p,g,y=!1){let b=s.y*p-s.x,T=-s.y-s.x*p;this.addHalfVertex(i,s.x+s.y*h,s.y-s.x*h,y,!1,h,g),this.addHalfVertex(i,b,T,y,!0,-p,g),this.distance>tz/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,s,h,p,g,y))}addHalfVertex({x:i,y:s},h,p,g,y,b,T){let P=.5*(this.lineClips?this.scaledDistance*(tz-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(g?1:0),(s<<1)+(y?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(b===0?0:b<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let C=T.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,C,this.e2),T.primitiveLength++),y?this.e2=C:this.e1=C}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,s){this.distance+=i.dist(s),this.updateScaledDistance()}}let rz,iz;rt("LineBucket",YS,{omit:["layers","patternFeatures"]});var nz={get paint(){return iz=iz||new jr({"line-opacity":new mt(X.paint_line["line-opacity"]),"line-color":new mt(X.paint_line["line-color"]),"line-translate":new st(X.paint_line["line-translate"]),"line-translate-anchor":new st(X.paint_line["line-translate-anchor"]),"line-width":new mt(X.paint_line["line-width"]),"line-gap-width":new mt(X.paint_line["line-gap-width"]),"line-offset":new mt(X.paint_line["line-offset"]),"line-blur":new mt(X.paint_line["line-blur"]),"line-dasharray":new om(X.paint_line["line-dasharray"]),"line-pattern":new bc(X.paint_line["line-pattern"]),"line-gradient":new sm(X.paint_line["line-gradient"])})},get layout(){return rz=rz||new jr({"line-cap":new st(X.layout_line["line-cap"]),"line-join":new mt(X.layout_line["line-join"]),"line-miter-limit":new st(X.layout_line["line-miter-limit"]),"line-round-limit":new st(X.layout_line["line-round-limit"]),"line-sort-key":new mt(X.layout_line["line-sort-key"])})}};class xpe extends mt{possiblyEvaluate(i,s){return s=new cr(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(i,s)}evaluate(i,s,h,p){return s=vn({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(i,s,h,p)}}let $_;class bpe extends Bn{constructor(i){super(i,nz),this.gradientVersion=0,$_||($_=new xpe(nz.paint.properties["line-width"].specification),$_.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){let s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof Mo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,s){super.recalculate(i,s),this.paint._values["line-floorwidth"]=$_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new YS(i)}queryRadius(i){let s=i,h=az(pm("line-width",this,s),pm("line-gap-width",this,s)),p=pm("line-offset",this,s);return h/2+Math.abs(p)+z_(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:s,featureState:h,geometry:p,transform:g,pixelsToTileUnits:y}){let b=F_(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-g.bearingInRadians,y),T=y/2*az(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),P=this.paint.get("line-offset").evaluate(s,h);return P&&(p=function(C,D){let F=[];for(let N=0;N<C.length;N++){let j=C[N],G=[];for(let Y=0;Y<j.length;Y++){let ie=j[Y-1],me=j[Y],se=j[Y+1],B=Y===0?new $(0,0):me.sub(ie)._unit()._perp(),K=Y===j.length-1?new $(0,0):se.sub(me)._unit()._perp(),ue=B._add(K)._unit(),Ee=ue.x*K.x+ue.y*K.y;Ee!==0&&ue._mult(1/Ee),G.push(ue._mult(D)._add(me))}F.push(G)}return F}(p,P*y)),function(C,D,F){for(let N=0;N<D.length;N++){let j=D[N];if(C.length>=3){for(let G=0;G<j.length;G++)if(Pc(C,j[G]))return!0}if(Lde(C,j,F))return!0}return!1}(b,p,T)}isTileClipped(){return!0}}function az(l,i){return i>0?i+2*l:l}let wpe=vr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Spe=vr([{name:"a_projected_pos",components:3,type:"Float32"}],4);vr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Tpe=vr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);vr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let oz=vr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Ipe=vr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Epe(l,i,s){return l.sections.forEach(h=>{h.text=function(p,g,y){let b=g.layout.get("text-transform").evaluate(y,{});return b==="uppercase"?p=p.toLocaleUpperCase():b==="lowercase"&&(p=p.toLocaleLowerCase()),ro.applyArabicShaping&&(p=ro.applyArabicShaping(p)),p}(h.text,i,s)}),l}vr([{name:"triangle",components:3,type:"Uint16"}]),vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),vr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),vr([{type:"Float32",name:"offsetX"}]),vr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),vr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Im={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var sz,XS,lz,ti=24,JS={};function qpe(){return sz||(sz=1,JS.read=function(l,i,s,h,p){var g,y,b=8*p-h-1,T=(1<<b)-1,P=T>>1,C=-7,D=s?p-1:0,F=s?-1:1,N=l[i+D];for(D+=F,g=N&(1<<-C)-1,N>>=-C,C+=b;C>0;g=256*g+l[i+D],D+=F,C-=8);for(y=g&(1<<-C)-1,g>>=-C,C+=h;C>0;y=256*y+l[i+D],D+=F,C-=8);if(g===0)g=1-P;else{if(g===T)return y?NaN:1/0*(N?-1:1);y+=Math.pow(2,h),g-=P}return(N?-1:1)*y*Math.pow(2,g-h)},JS.write=function(l,i,s,h,p,g){var y,b,T,P=8*g-p-1,C=(1<<P)-1,D=C>>1,F=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,N=h?0:g-1,j=h?1:-1,G=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(b=isNaN(i)?1:0,y=C):(y=Math.floor(Math.log(i)/Math.LN2),i*(T=Math.pow(2,-y))<1&&(y--,T*=2),(i+=y+D>=1?F/T:F*Math.pow(2,1-D))*T>=2&&(y++,T/=2),y+D>=C?(b=0,y=C):y+D>=1?(b=(i*T-1)*Math.pow(2,p),y+=D):(b=i*Math.pow(2,D-1)*Math.pow(2,p),y=0));p>=8;l[s+N]=255&b,N+=j,b/=256,p-=8);for(y=y<<p|b,P+=p;P>0;l[s+N]=255&y,N+=j,y/=256,P-=8);l[s+N-j]|=128*G}),JS}function uz(){if(lz)return XS;lz=1,XS=i;var l=qpe();function i(B){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(B)?B:new Uint8Array(B||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;var s=4294967296,h=1/s,p=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function g(B){return B.type===i.Bytes?B.readVarint()+B.pos:B.pos+1}function y(B,K,ue){return ue?4294967296*K+(B>>>0):4294967296*(K>>>0)+(B>>>0)}function b(B,K,ue){var Ee=K<=16383?1:K<=2097151?2:K<=268435455?3:Math.floor(Math.log(K)/(7*Math.LN2));ue.realloc(Ee);for(var Ne=ue.pos-1;Ne>=B;Ne--)ue.buf[Ne+Ee]=ue.buf[Ne]}function T(B,K){for(var ue=0;ue<B.length;ue++)K.writeVarint(B[ue])}function P(B,K){for(var ue=0;ue<B.length;ue++)K.writeSVarint(B[ue])}function C(B,K){for(var ue=0;ue<B.length;ue++)K.writeFloat(B[ue])}function D(B,K){for(var ue=0;ue<B.length;ue++)K.writeDouble(B[ue])}function F(B,K){for(var ue=0;ue<B.length;ue++)K.writeBoolean(B[ue])}function N(B,K){for(var ue=0;ue<B.length;ue++)K.writeFixed32(B[ue])}function j(B,K){for(var ue=0;ue<B.length;ue++)K.writeSFixed32(B[ue])}function G(B,K){for(var ue=0;ue<B.length;ue++)K.writeFixed64(B[ue])}function Y(B,K){for(var ue=0;ue<B.length;ue++)K.writeSFixed64(B[ue])}function ie(B,K){return(B[K]|B[K+1]<<8|B[K+2]<<16)+16777216*B[K+3]}function me(B,K,ue){B[ue]=K,B[ue+1]=K>>>8,B[ue+2]=K>>>16,B[ue+3]=K>>>24}function se(B,K){return(B[K]|B[K+1]<<8|B[K+2]<<16)+(B[K+3]<<24)}return i.prototype={destroy:function(){this.buf=null},readFields:function(B,K,ue){for(ue=ue||this.length;this.pos<ue;){var Ee=this.readVarint(),Ne=Ee>>3,Ce=this.pos;this.type=7&Ee,B(Ne,K,this),this.pos===Ce&&this.skip(Ee)}return K},readMessage:function(B,K){return this.readFields(B,K,this.readVarint()+this.pos)},readFixed32:function(){var B=ie(this.buf,this.pos);return this.pos+=4,B},readSFixed32:function(){var B=se(this.buf,this.pos);return this.pos+=4,B},readFixed64:function(){var B=ie(this.buf,this.pos)+ie(this.buf,this.pos+4)*s;return this.pos+=8,B},readSFixed64:function(){var B=ie(this.buf,this.pos)+se(this.buf,this.pos+4)*s;return this.pos+=8,B},readFloat:function(){var B=l.read(this.buf,this.pos,!0,23,4);return this.pos+=4,B},readDouble:function(){var B=l.read(this.buf,this.pos,!0,52,8);return this.pos+=8,B},readVarint:function(B){var K,ue,Ee=this.buf;return K=127&(ue=Ee[this.pos++]),ue<128?K:(K|=(127&(ue=Ee[this.pos++]))<<7,ue<128?K:(K|=(127&(ue=Ee[this.pos++]))<<14,ue<128?K:(K|=(127&(ue=Ee[this.pos++]))<<21,ue<128?K:function(Ne,Ce,De){var Ge,je,Ze=De.buf;if(Ge=(112&(je=Ze[De.pos++]))>>4,je<128||(Ge|=(127&(je=Ze[De.pos++]))<<3,je<128)||(Ge|=(127&(je=Ze[De.pos++]))<<10,je<128)||(Ge|=(127&(je=Ze[De.pos++]))<<17,je<128)||(Ge|=(127&(je=Ze[De.pos++]))<<24,je<128)||(Ge|=(1&(je=Ze[De.pos++]))<<31,je<128))return y(Ne,Ge,Ce);throw new Error("Expected varint not more than 10 bytes")}(K|=(15&(ue=Ee[this.pos]))<<28,B,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var B=this.readVarint();return B%2==1?(B+1)/-2:B/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var B=this.readVarint()+this.pos,K=this.pos;return this.pos=B,B-K>=12&&p?function(ue,Ee,Ne){return p.decode(ue.subarray(Ee,Ne))}(this.buf,K,B):function(ue,Ee,Ne){for(var Ce="",De=Ee;De<Ne;){var Ge,je,Ze,ze=ue[De],it=null,ft=ze>239?4:ze>223?3:ze>191?2:1;if(De+ft>Ne)break;ft===1?ze<128&&(it=ze):ft===2?(192&(Ge=ue[De+1]))==128&&(it=(31&ze)<<6|63&Ge)<=127&&(it=null):ft===3?(je=ue[De+2],(192&(Ge=ue[De+1]))==128&&(192&je)==128&&((it=(15&ze)<<12|(63&Ge)<<6|63&je)<=2047||it>=55296&&it<=57343)&&(it=null)):ft===4&&(je=ue[De+2],Ze=ue[De+3],(192&(Ge=ue[De+1]))==128&&(192&je)==128&&(192&Ze)==128&&((it=(15&ze)<<18|(63&Ge)<<12|(63&je)<<6|63&Ze)<=65535||it>=1114112)&&(it=null)),it===null?(it=65533,ft=1):it>65535&&(it-=65536,Ce+=String.fromCharCode(it>>>10&1023|55296),it=56320|1023&it),Ce+=String.fromCharCode(it),De+=ft}return Ce}(this.buf,K,B)},readBytes:function(){var B=this.readVarint()+this.pos,K=this.buf.subarray(this.pos,B);return this.pos=B,K},readPackedVarint:function(B,K){if(this.type!==i.Bytes)return B.push(this.readVarint(K));var ue=g(this);for(B=B||[];this.pos<ue;)B.push(this.readVarint(K));return B},readPackedSVarint:function(B){if(this.type!==i.Bytes)return B.push(this.readSVarint());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readSVarint());return B},readPackedBoolean:function(B){if(this.type!==i.Bytes)return B.push(this.readBoolean());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readBoolean());return B},readPackedFloat:function(B){if(this.type!==i.Bytes)return B.push(this.readFloat());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readFloat());return B},readPackedDouble:function(B){if(this.type!==i.Bytes)return B.push(this.readDouble());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readDouble());return B},readPackedFixed32:function(B){if(this.type!==i.Bytes)return B.push(this.readFixed32());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readFixed32());return B},readPackedSFixed32:function(B){if(this.type!==i.Bytes)return B.push(this.readSFixed32());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readSFixed32());return B},readPackedFixed64:function(B){if(this.type!==i.Bytes)return B.push(this.readFixed64());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readFixed64());return B},readPackedSFixed64:function(B){if(this.type!==i.Bytes)return B.push(this.readSFixed64());var K=g(this);for(B=B||[];this.pos<K;)B.push(this.readSFixed64());return B},skip:function(B){var K=7&B;if(K===i.Varint)for(;this.buf[this.pos++]>127;);else if(K===i.Bytes)this.pos=this.readVarint()+this.pos;else if(K===i.Fixed32)this.pos+=4;else{if(K!==i.Fixed64)throw new Error("Unimplemented type: "+K);this.pos+=8}},writeTag:function(B,K){this.writeVarint(B<<3|K)},realloc:function(B){for(var K=this.length||16;K<this.pos+B;)K*=2;if(K!==this.length){var ue=new Uint8Array(K);ue.set(this.buf),this.buf=ue,this.length=K}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(B){this.realloc(4),me(this.buf,B,this.pos),this.pos+=4},writeSFixed32:function(B){this.realloc(4),me(this.buf,B,this.pos),this.pos+=4},writeFixed64:function(B){this.realloc(8),me(this.buf,-1&B,this.pos),me(this.buf,Math.floor(B*h),this.pos+4),this.pos+=8},writeSFixed64:function(B){this.realloc(8),me(this.buf,-1&B,this.pos),me(this.buf,Math.floor(B*h),this.pos+4),this.pos+=8},writeVarint:function(B){(B=+B||0)>268435455||B<0?function(K,ue){var Ee,Ne;if(K>=0?(Ee=K%4294967296|0,Ne=K/4294967296|0):(Ne=~(-K/4294967296),4294967295^(Ee=~(-K%4294967296))?Ee=Ee+1|0:(Ee=0,Ne=Ne+1|0)),K>=18446744073709552e3||K<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");ue.realloc(10),function(Ce,De,Ge){Ge.buf[Ge.pos++]=127&Ce|128,Ce>>>=7,Ge.buf[Ge.pos++]=127&Ce|128,Ce>>>=7,Ge.buf[Ge.pos++]=127&Ce|128,Ce>>>=7,Ge.buf[Ge.pos++]=127&Ce|128,Ge.buf[Ge.pos]=127&(Ce>>>=7)}(Ee,0,ue),function(Ce,De){var Ge=(7&Ce)<<4;De.buf[De.pos++]|=Ge|((Ce>>>=3)?128:0),Ce&&(De.buf[De.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(De.buf[De.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(De.buf[De.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(De.buf[De.pos++]=127&Ce|((Ce>>>=7)?128:0),Ce&&(De.buf[De.pos++]=127&Ce)))))}(Ne,ue)}(B,this):(this.realloc(4),this.buf[this.pos++]=127&B|(B>127?128:0),B<=127||(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),B<=127||(this.buf[this.pos++]=127&(B>>>=7)|(B>127?128:0),B<=127||(this.buf[this.pos++]=B>>>7&127))))},writeSVarint:function(B){this.writeVarint(B<0?2*-B-1:2*B)},writeBoolean:function(B){this.writeVarint(!!B)},writeString:function(B){B=String(B),this.realloc(4*B.length),this.pos++;var K=this.pos;this.pos=function(Ee,Ne,Ce){for(var De,Ge,je=0;je<Ne.length;je++){if((De=Ne.charCodeAt(je))>55295&&De<57344){if(!Ge){De>56319||je+1===Ne.length?(Ee[Ce++]=239,Ee[Ce++]=191,Ee[Ce++]=189):Ge=De;continue}if(De<56320){Ee[Ce++]=239,Ee[Ce++]=191,Ee[Ce++]=189,Ge=De;continue}De=Ge-55296<<10|De-56320|65536,Ge=null}else Ge&&(Ee[Ce++]=239,Ee[Ce++]=191,Ee[Ce++]=189,Ge=null);De<128?Ee[Ce++]=De:(De<2048?Ee[Ce++]=De>>6|192:(De<65536?Ee[Ce++]=De>>12|224:(Ee[Ce++]=De>>18|240,Ee[Ce++]=De>>12&63|128),Ee[Ce++]=De>>6&63|128),Ee[Ce++]=63&De|128)}return Ce}(this.buf,B,this.pos);var ue=this.pos-K;ue>=128&&b(K,ue,this),this.pos=K-1,this.writeVarint(ue),this.pos+=ue},writeFloat:function(B){this.realloc(4),l.write(this.buf,B,this.pos,!0,23,4),this.pos+=4},writeDouble:function(B){this.realloc(8),l.write(this.buf,B,this.pos,!0,52,8),this.pos+=8},writeBytes:function(B){var K=B.length;this.writeVarint(K),this.realloc(K);for(var ue=0;ue<K;ue++)this.buf[this.pos++]=B[ue]},writeRawMessage:function(B,K){this.pos++;var ue=this.pos;B(K,this);var Ee=this.pos-ue;Ee>=128&&b(ue,Ee,this),this.pos=ue-1,this.writeVarint(Ee),this.pos+=Ee},writeMessage:function(B,K,ue){this.writeTag(B,i.Bytes),this.writeRawMessage(K,ue)},writePackedVarint:function(B,K){K.length&&this.writeMessage(B,T,K)},writePackedSVarint:function(B,K){K.length&&this.writeMessage(B,P,K)},writePackedBoolean:function(B,K){K.length&&this.writeMessage(B,F,K)},writePackedFloat:function(B,K){K.length&&this.writeMessage(B,C,K)},writePackedDouble:function(B,K){K.length&&this.writeMessage(B,D,K)},writePackedFixed32:function(B,K){K.length&&this.writeMessage(B,N,K)},writePackedSFixed32:function(B,K){K.length&&this.writeMessage(B,j,K)},writePackedFixed64:function(B,K){K.length&&this.writeMessage(B,G,K)},writePackedSFixed64:function(B,K){K.length&&this.writeMessage(B,Y,K)},writeBytesField:function(B,K){this.writeTag(B,i.Bytes),this.writeBytes(K)},writeFixed32Field:function(B,K){this.writeTag(B,i.Fixed32),this.writeFixed32(K)},writeSFixed32Field:function(B,K){this.writeTag(B,i.Fixed32),this.writeSFixed32(K)},writeFixed64Field:function(B,K){this.writeTag(B,i.Fixed64),this.writeFixed64(K)},writeSFixed64Field:function(B,K){this.writeTag(B,i.Fixed64),this.writeSFixed64(K)},writeVarintField:function(B,K){this.writeTag(B,i.Varint),this.writeVarint(K)},writeSVarintField:function(B,K){this.writeTag(B,i.Varint),this.writeSVarint(K)},writeStringField:function(B,K){this.writeTag(B,i.Bytes),this.writeString(K)},writeFloatField:function(B,K){this.writeTag(B,i.Fixed32),this.writeFloat(K)},writeDoubleField:function(B,K){this.writeTag(B,i.Fixed64),this.writeDouble(K)},writeBooleanField:function(B,K){this.writeVarintField(B,!!K)}},XS}var QS=_(uz());let eT=3;function Ppe(l,i,s){l===1&&s.readMessage(Ape,i)}function Ape(l,i,s){if(l===3){let{id:h,bitmap:p,width:g,height:y,left:b,top:T,advance:P}=s.readMessage(Cpe,{});i.push({id:h,bitmap:new mm({width:g+2*eT,height:y+2*eT},p),metrics:{width:g,height:y,left:b,top:T,advance:P}})}}function Cpe(l,i,s){l===1?i.id=s.readVarint():l===2?i.bitmap=s.readBytes():l===3?i.width=s.readVarint():l===4?i.height=s.readVarint():l===5?i.left=s.readSVarint():l===6?i.top=s.readSVarint():l===7&&(i.advance=s.readVarint())}let Mpe=eT;function cz(l){let i=0,s=0;for(let y of l)i+=y.w*y.h,s=Math.max(s,y.w);l.sort((y,b)=>b.h-y.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],p=0,g=0;for(let y of l)for(let b=h.length-1;b>=0;b--){let T=h[b];if(!(y.w>T.w||y.h>T.h)){if(y.x=T.x,y.y=T.y,g=Math.max(g,y.y+y.h),p=Math.max(p,y.x+y.w),y.w===T.w&&y.h===T.h){let P=h.pop();b<h.length&&(h[b]=P)}else y.h===T.h?(T.x+=y.w,T.w-=y.w):y.w===T.w?(T.y+=y.h,T.h-=y.h):(h.push({x:T.x+y.w,y:T.y,w:T.w-y.w,h:y.h}),T.y+=y.h,T.h-=y.h);break}}return{w:p,h:g,fill:i/(p*g)||0}}let Tn=1;class tT{constructor(i,{pixelRatio:s,version:h,stretchX:p,stretchY:g,content:y,textFitWidth:b,textFitHeight:T}){this.paddedRect=i,this.pixelRatio=s,this.stretchX=p,this.stretchY=g,this.content=y,this.version=h,this.textFitWidth=b,this.textFitHeight=T}get tl(){return[this.paddedRect.x+Tn,this.paddedRect.y+Tn]}get br(){return[this.paddedRect.x+this.paddedRect.w-Tn,this.paddedRect.y+this.paddedRect.h-Tn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*Tn)/this.pixelRatio,(this.paddedRect.h-2*Tn)/this.pixelRatio]}}class hz{constructor(i,s){let h={},p={};this.haveRenderCallbacks=[];let g=[];this.addImages(i,h,g),this.addImages(s,p,g);let{w:y,h:b}=cz(g),T=new sa({width:y||1,height:b||1});for(let P in i){let C=i[P],D=h[P].paddedRect;sa.copy(C.data,T,{x:0,y:0},{x:D.x+Tn,y:D.y+Tn},C.data)}for(let P in s){let C=s[P],D=p[P].paddedRect,F=D.x+Tn,N=D.y+Tn,j=C.data.width,G=C.data.height;sa.copy(C.data,T,{x:0,y:0},{x:F,y:N},C.data),sa.copy(C.data,T,{x:0,y:G-1},{x:F,y:N-1},{width:j,height:1}),sa.copy(C.data,T,{x:0,y:0},{x:F,y:N+G},{width:j,height:1}),sa.copy(C.data,T,{x:j-1,y:0},{x:F-1,y:N},{width:1,height:G}),sa.copy(C.data,T,{x:0,y:0},{x:F+j,y:N},{width:1,height:G})}this.image=T,this.iconPositions=h,this.patternPositions=p}addImages(i,s,h){for(let p in i){let g=i[p],y={x:0,y:0,w:g.data.width+2*Tn,h:g.data.height+2*Tn};h.push(y),s[p]=new tT(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(i,s){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),s)}patchUpdatedImage(i,s,h){if(!i||!s||i.version===s.version)return;i.version=s.version;let[p,g]=i.tl;h.update(s.data,void 0,{x:p,y:g})}}var kl;rt("ImagePosition",tT),rt("ImageAtlas",hz),c.al=void 0,(kl=c.al||(c.al={}))[kl.none=0]="none",kl[kl.horizontal=1]="horizontal",kl[kl.vertical=2]="vertical",kl[kl.horizontalOnly=3]="horizontalOnly";let V_=-17;class Em{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(i,s,h){let p=new Em;return p.scale=i||1,p.fontStack=s,p.verticalAlign=h||"bottom",p}static forImage(i,s){let h=new Em;return h.imageName=i,h.verticalAlign=s||"bottom",h}}class _f{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,s){let h=new _f;for(let p=0;p<i.sections.length;p++){let g=i.sections[p];g.image?h.addImageSection(g):h.addTextSection(g,s)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let s="";for(let h=0;h<i.length;h++){let p=i.charCodeAt(h+1)||null,g=i.charCodeAt(h-1)||null;s+=p&&_c(p)&&!Im[i[h+1]]||g&&_c(g)&&!Im[i[h-1]]||!Im[i[h]]?i[h]:Im[i[h]]}return s}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&Z_[this.text.charCodeAt(h)];h++)i++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&Z_[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(i,s),this.sectionIndex=this.sectionIndex.slice(i,s)}substring(i,s){let h=new _f;return h.text=this.text.substring(i,s),h.sectionIndex=this.sectionIndex.slice(i,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,s)=>Math.max(i,this.sections[s].scale),0)}getMaxImageSize(i){let s=0,h=0;for(let p=0;p<this.length();p++){let g=this.getSection(p);if(g.imageName){let y=i[g.imageName];if(!y)continue;let b=y.displaySize;s=Math.max(s,b[0]),h=Math.max(h,b[1])}}return{maxImageWidth:s,maxImageHeight:h}}addTextSection(i,s){this.text+=i.text,this.sections.push(Em.forText(i.scale,i.fontStack||s,i.verticalAlign));let h=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(h)}addImageSection(i){let s=i.image?i.image.name:"";if(s.length===0)return void Fi("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Em.forImage(s,i.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Fi("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function G_(l,i,s,h,p,g,y,b,T,P,C,D,F,N,j){let G=_f.fromFeature(l,p),Y;D===c.al.vertical&&G.verticalizePunctuation();let{processBidirectionalText:ie,processStyledBidirectionalText:me}=ro;if(ie&&G.sections.length===1){Y=[];let K=ie(G.toString(),rT(G,P,g,i,h,N));for(let ue of K){let Ee=new _f;Ee.text=ue,Ee.sections=G.sections;for(let Ne=0;Ne<ue.length;Ne++)Ee.sectionIndex.push(0);Y.push(Ee)}}else if(me){Y=[];let K=me(G.text,G.sectionIndex,rT(G,P,g,i,h,N));for(let ue of K){let Ee=new _f;Ee.text=ue[0],Ee.sectionIndex=ue[1],Ee.sections=G.sections,Y.push(Ee)}}else Y=function(K,ue){let Ee=[],Ne=K.text,Ce=0;for(let De of ue)Ee.push(K.substring(Ce,De)),Ce=De;return Ce<Ne.length&&Ee.push(K.substring(Ce,Ne.length)),Ee}(G,rT(G,P,g,i,h,N));let se=[],B={positionedLines:se,text:G.toString(),top:C[1],bottom:C[1],left:C[0],right:C[0],writingMode:D,iconsInText:!1,verticalizable:!1};return function(K,ue,Ee,Ne,Ce,De,Ge,je,Ze,ze,it,ft){let ct=0,ot=0,Ft=0,Ar=0,ri=je==="right"?1:je==="left"?0:.5,Ri=ti/ft,ua=0;for(let xr of Ce){xr.trim();let li=xr.getMaxScale(),xi={positionedGlyphs:[],lineOffset:0};K.positionedLines[ua]=xi;let bi=xi.positionedGlyphs,ln=0;if(!xr.length()){ot+=De,++ua;continue}let ca=Dpe(Ne,xr,Ri);for(let En=0;En<xr.length();En++){let ii=xr.getSection(En),ci=xr.getSectionIndex(En),hi=xr.getCharCode(En),Vr=Lpe(Ze,it,hi),fr;if(ii.imageName){if(K.iconsInText=!0,ii.scale=ii.scale*Ri,fr=Fpe(ii,Vr,li,ca,Ne),!fr)continue;ln=Math.max(ln,fr.imageOffset)}else if(fr=zpe(ii,hi,Vr,ca,ue,Ee),!fr)continue;let{rect:ao,metrics:Sf,baselineOffset:oo}=fr;bi.push({glyph:hi,imageName:ii.imageName,x:ct,y:ot+oo+V_,vertical:Vr,scale:ii.scale,fontStack:ii.fontStack,sectionIndex:ci,metrics:Sf,rect:ao}),Vr?(K.verticalizable=!0,ct+=(ii.imageName?Sf.advance:ti)*ii.scale+ze):ct+=Sf.advance*ii.scale+ze}bi.length!==0&&(Ft=Math.max(ct-ze,Ft),Bpe(bi,0,bi.length-1,ri)),ct=0,xi.lineOffset=Math.max(ln,(li-1)*ti);let ui=De*li+ln;ot+=ui,Ar=Math.max(ui,Ar),++ua}let{horizontalAlign:In,verticalAlign:_i}=iT(Ge);(function(xr,li,xi,bi,ln,ca,ui,En,ii){let ci=(li-xi)*ln,hi=0;hi=ca!==ui?-En*bi-V_:-bi*ii*ui+.5*ui;for(let Vr of xr)for(let fr of Vr.positionedGlyphs)fr.x+=ci,fr.y+=hi})(K.positionedLines,ri,In,_i,Ft,Ar,De,ot,Ce.length),K.top+=-_i*ot,K.bottom=K.top+ot,K.left+=-In*Ft,K.right=K.left+Ft}(B,i,s,h,Y,y,b,T,D,P,F,j),!function(K){for(let ue of K)if(ue.positionedGlyphs.length!==0)return!1;return!0}(se)&&B}let Z_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Rpe={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Ope={40:!0};function fz(l,i,s,h,p,g){if(i.imageName){let y=h[i.imageName];return y?y.displaySize[0]*i.scale*ti/g+p:0}{let y=s[i.fontStack],b=y&&y[l];return b?b.metrics.advance*i.scale+p:0}}function dz(l,i,s,h){let p=Math.pow(l-i,2);return h?l<i?p/2:2*p:p+Math.abs(s)*s}function kpe(l,i,s){let h=0;return l===10&&(h-=1e4),s&&(h+=150),l!==40&&l!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function pz(l,i,s,h,p,g){let y=null,b=dz(i,s,p,g);for(let T of h){let P=dz(i-T.x,s,p,g)+T.badness;P<=b&&(y=T,b=P)}return{index:l,x:i,priorBreak:y,badness:b}}function mz(l){return l?mz(l.priorBreak).concat(l.index):[]}function rT(l,i,s,h,p,g){if(!l)return[];let y=[],b=function(D,F,N,j,G,Y){let ie=0;for(let me=0;me<D.length();me++){let se=D.getSection(me);ie+=fz(D.getCharCode(me),se,j,G,F,Y)}return ie/Math.max(1,Math.ceil(ie/N))}(l,i,s,h,p,g),T=l.text.indexOf("\u200B")>=0,P=0;for(let D=0;D<l.length();D++){let F=l.getSection(D),N=l.getCharCode(D);if(Z_[N]||(P+=fz(N,F,h,p,i,g)),D<l.length()-1){let j=!((C=N)<11904)&&(!!Lt["CJK Compatibility Forms"](C)||!!Lt["CJK Compatibility"](C)||!!Lt["CJK Strokes"](C)||!!Lt["CJK Symbols and Punctuation"](C)||!!Lt["Enclosed CJK Letters and Months"](C)||!!Lt["Halfwidth and Fullwidth Forms"](C)||!!Lt["Ideographic Description Characters"](C)||!!Lt["Vertical Forms"](C)||nm.test(String.fromCodePoint(C)));(Rpe[N]||j||F.imageName||D!==l.length()-2&&Ope[l.getCharCode(D+1)])&&y.push(pz(D+1,P,b,y,kpe(N,l.getCharCode(D+1),j&&T),!1))}}var C;return mz(pz(l.length(),P,b,y,0,!0))}function iT(l){let i=.5,s=.5;switch(l){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(l){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:i,verticalAlign:s}}function Dpe(l,i,s){let h=i.getMaxScale()*ti,{maxImageWidth:p,maxImageHeight:g}=i.getMaxImageSize(l),y=Math.max(h,g*s);return{verticalLineContentWidth:Math.max(h,p*s),horizontalLineContentHeight:y}}function vz(l){switch(l){case"top":return 0;case"center":return .5;default:return 1}}function Lpe(l,i,s){return!(l===c.al.horizontal||!i&&!hf(s)||i&&(Z_[s]||(h=s,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(h)))));var h}function zpe(l,i,s,h,p,g){let y=g[l.fontStack],b=function(P,C,D,F){if(P&&P.rect)return P;let N=C[D.fontStack],j=N&&N[F];return j?{rect:null,metrics:j.metrics}:null}(y&&y[i],p,l,i);if(b===null)return null;let T;if(s)T=h.verticalLineContentWidth-l.scale*ti;else{let P=vz(l.verticalAlign);T=(h.horizontalLineContentHeight-l.scale*ti)*P}return{rect:b.rect,metrics:b.metrics,baselineOffset:T}}function Fpe(l,i,s,h,p){let g=p[l.imageName];if(!g)return null;let y=g.paddedRect,b=g.displaySize,T={width:b[0],height:b[1],left:Tn,top:-3,advance:i?b[1]:b[0]},P;if(i)P=h.verticalLineContentWidth-b[1]*l.scale;else{let C=vz(l.verticalAlign);P=(h.horizontalLineContentHeight-b[1]*l.scale)*C}return{rect:y,metrics:T,baselineOffset:P,imageOffset:(i?b[0]:b[1])*l.scale-ti*s}}function Bpe(l,i,s,h){if(h===0)return;let p=l[s],g=(l[s].x+p.metrics.advance*p.scale)*h;for(let y=i;y<=s;y++)l[y].x-=g}function Npe(l,i,s){let{horizontalAlign:h,verticalAlign:p}=iT(s),g=i[0]-l.displaySize[0]*h,y=i[1]-l.displaySize[1]*p;return{image:l,top:y,bottom:y+l.displaySize[1],left:g,right:g+l.displaySize[0]}}function gz(l){var i,s;let h=l.left,p=l.top,g=l.right-h,y=l.bottom-p,b=(i=l.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",T=(s=l.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",P=(l.image.content[2]-l.image.content[0])/(l.image.content[3]-l.image.content[1]);if(T==="proportional"){if(b==="stretchOnly"&&g/y<P||b==="proportional"){let C=Math.ceil(y*P);h*=C/g,g=C}}else if(b==="proportional"&&T==="stretchOnly"&&P!==0&&g/y>P){let C=Math.ceil(g/P);p*=C/y,y=C}return{x1:h,y1:p,x2:h+g,y2:p+y}}function yz(l,i,s,h,p,g){let y=l.image,b;if(y.content){let Y=y.content,ie=y.pixelRatio||1;b=[Y[0]/ie,Y[1]/ie,y.displaySize[0]-Y[2]/ie,y.displaySize[1]-Y[3]/ie]}let T=i.left*g,P=i.right*g,C,D,F,N;s==="width"||s==="both"?(N=p[0]+T-h[3],D=p[0]+P+h[1]):(N=p[0]+(T+P-y.displaySize[0])/2,D=N+y.displaySize[0]);let j=i.top*g,G=i.bottom*g;return s==="height"||s==="both"?(C=p[1]+j-h[0],F=p[1]+G+h[2]):(C=p[1]+(j+G-y.displaySize[1])/2,F=C+y.displaySize[1]),{image:y,top:C,right:D,bottom:F,left:N,collisionPadding:b}}let qm=255,No=128,Dl=qm*No;function _z(l,i){let{expression:s}=i;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new cr(l+1))};if(s.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=s,g=0;for(;g<h.length&&h[g]<=l;)g++;g=Math.max(0,g-1);let y=g;for(;y<h.length&&h[y]<l+1;)y++;y=Math.min(h.length-1,y);let b=h[g],T=h[y];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:T,interpolationType:p}:{kind:"camera",minZoom:b,maxZoom:T,minSize:s.evaluate(new cr(b)),maxSize:s.evaluate(new cr(T)),interpolationType:p}}}function nT(l,i,s){let h="never",p=l.get(i);return p?h=p:l.get(s)&&(h="always"),h}let jpe=wm.VectorTileFeature.types,Upe=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function H_(l,i,s,h,p,g,y,b,T,P,C,D,F){let N=b?Math.min(Dl,Math.round(b[0])):0,j=b?Math.min(Dl,Math.round(b[1])):0;l.emplaceBack(i,s,Math.round(32*h),Math.round(32*p),g,y,(N<<1)+(T?1:0),j,16*P,16*C,256*D,256*F)}function aT(l,i,s){l.emplaceBack(i.x,i.y,s),l.emplaceBack(i.x,i.y,s),l.emplaceBack(i.x,i.y,s),l.emplaceBack(i.x,i.y,s)}function $pe(l){for(let i of l.sections)if(CS(i.text))return!0;return!1}class oT{constructor(i){this.layoutVertexArray=new gr,this.indexArray=new Ht,this.programConfigurations=i,this.segments=new Wt,this.dynamicLayoutVertexArray=new ir,this.opacityVertexArray=new yr,this.hasVisibleVertices=!1,this.placedSymbolArray=new he}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,wpe.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Spe.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,Upe,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}rt("SymbolBuffers",oT);class sT{constructor(i,s,h){this.layoutVertexArray=new i,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Wt,this.collisionVertexArray=new or}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,Tpe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}rt("CollisionBuffers",sT);class xf{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(y=>y.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];let s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=_z(this.zoom,s["text-size"]),this.iconSizeData=_z(this.zoom,s["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),g=h.get("symbol-z-order");this.canOverlap=nT(h,"text-overlap","text-allow-overlap")!=="never"||nT(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(y=>c.al[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=i.sourceID}createArrays(){this.text=new oT(new Bo(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new oT(new Bo(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new ge,this.lineVertexArray=new pe,this.symbolInstances=new de,this.textAnchorOffsets=new Le}calculateGlyphDependencies(i,s,h,p,g){for(let y=0;y<i.length;y++)if(s[i.charCodeAt(y)]=!0,(h||p)&&g){let b=Im[i.charAt(y)];b&&(s[b.charCodeAt(0)]=!0)}}populate(i,s,h){let p=this.layers[0],g=p.layout,y=g.get("text-font"),b=g.get("text-field"),T=g.get("icon-image"),P=(b.value.kind!=="constant"||b.value.value instanceof on&&!b.value.value.isEmpty()||b.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),C=T.value.kind!=="constant"||!!T.value.value||Object.keys(T.parameters).length>0,D=g.get("symbol-sort-key");if(this.features=[],!P&&!C)return;let F=s.iconDependencies,N=s.glyphDependencies,j=s.availableImages,G=new cr(this.zoom);for(let{feature:Y,id:ie,index:me,sourceLayerIndex:se}of i){let B=p._featureFilter.needGeometry,K=qc(Y,B);if(!p._featureFilter.filter(G,K,h))continue;let ue,Ee;if(B||(K.geometry=Ec(Y)),P){let Ce=p.getValueAndResolveTokens("text-field",K,h,j),De=on.factory(Ce),Ge=this.hasRTLText=this.hasRTLText||$pe(De);(!Ge||ro.getRTLTextPluginStatus()==="unavailable"||Ge&&ro.isParsed())&&(ue=Epe(De,p,K))}if(C){let Ce=p.getValueAndResolveTokens("icon-image",K,h,j);Ee=Ce instanceof bn?Ce:bn.fromString(Ce)}if(!ue&&!Ee)continue;let Ne=this.sortFeaturesByKey?D.evaluate(K,{},h):void 0;if(this.features.push({id:ie,text:ue,icon:Ee,index:me,sourceLayerIndex:se,geometry:K.geometry,properties:Y.properties,type:jpe[Y.type],sortKey:Ne}),Ee&&(F[Ee.name]=!0),ue){let Ce=y.evaluate(K,{},h).join(","),De=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(c.al.vertical)>=0;for(let Ge of ue.sections)if(Ge.image)F[Ge.image.name]=!0;else{let je=cf(ue.toString()),Ze=Ge.fontStack||Ce,ze=N[Ze]=N[Ze]||{};this.calculateGlyphDependencies(Ge.text,ze,De,this.allowVerticalPlacement,je)}}}g.get("symbol-placement")==="line"&&(this.features=function(Y){let ie={},me={},se=[],B=0;function K(Ce){se.push(Y[Ce]),B++}function ue(Ce,De,Ge){let je=me[Ce];return delete me[Ce],me[De]=je,se[je].geometry[0].pop(),se[je].geometry[0]=se[je].geometry[0].concat(Ge[0]),je}function Ee(Ce,De,Ge){let je=ie[De];return delete ie[De],ie[Ce]=je,se[je].geometry[0].shift(),se[je].geometry[0]=Ge[0].concat(se[je].geometry[0]),je}function Ne(Ce,De,Ge){let je=Ge?De[0][De[0].length-1]:De[0][0];return`${Ce}:${je.x}:${je.y}`}for(let Ce=0;Ce<Y.length;Ce++){let De=Y[Ce],Ge=De.geometry,je=De.text?De.text.toString():null;if(!je){K(Ce);continue}let Ze=Ne(je,Ge),ze=Ne(je,Ge,!0);if(Ze in me&&ze in ie&&me[Ze]!==ie[ze]){let it=Ee(Ze,ze,Ge),ft=ue(Ze,ze,se[it].geometry);delete ie[Ze],delete me[ze],me[Ne(je,se[ft].geometry,!0)]=ft,se[it].geometry=null}else Ze in me?ue(Ze,ze,Ge):ze in ie?Ee(Ze,ze,Ge):(K(Ce),ie[Ze]=B-1,me[ze]=B-1)}return se.filter(Ce=>Ce.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((Y,ie)=>Y.sortKey-ie.sortKey)}update(i,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(i,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,s){let h=this.lineVertexArray.length;if(i.segment!==void 0){let p=i.dist(s[i.segment+1]),g=i.dist(s[i.segment]),y={};for(let b=i.segment+1;b<s.length;b++)y[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:p},b<s.length-1&&(p+=s[b+1].dist(s[b]));for(let b=i.segment||0;b>=0;b--)y[b]={x:s[b].x,y:s[b].y,tileUnitDistanceFromAnchor:g},b>0&&(g+=s[b-1].dist(s[b]));for(let b=0;b<s.length;b++){let T=y[b];this.lineVertexArray.emplaceBack(T.x,T.y,T.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,s,h,p,g,y,b,T,P,C,D,F){let N=i.indexArray,j=i.layoutVertexArray,G=i.segments.prepareSegment(4*s.length,j,N,this.canOverlap?y.sortKey:void 0),Y=this.glyphOffsetArray.length,ie=G.vertexLength,me=this.allowVerticalPlacement&&b===c.al.vertical?Math.PI/2:0,se=y.text&&y.text.sections;for(let B=0;B<s.length;B++){let{tl:K,tr:ue,bl:Ee,br:Ne,tex:Ce,pixelOffsetTL:De,pixelOffsetBR:Ge,minFontScaleX:je,minFontScaleY:Ze,glyphOffset:ze,isSDF:it,sectionIndex:ft}=s[B],ct=G.vertexLength,ot=ze[1];H_(j,T.x,T.y,K.x,ot+K.y,Ce.x,Ce.y,h,it,De.x,De.y,je,Ze),H_(j,T.x,T.y,ue.x,ot+ue.y,Ce.x+Ce.w,Ce.y,h,it,Ge.x,De.y,je,Ze),H_(j,T.x,T.y,Ee.x,ot+Ee.y,Ce.x,Ce.y+Ce.h,h,it,De.x,Ge.y,je,Ze),H_(j,T.x,T.y,Ne.x,ot+Ne.y,Ce.x+Ce.w,Ce.y+Ce.h,h,it,Ge.x,Ge.y,je,Ze),aT(i.dynamicLayoutVertexArray,T,me),N.emplaceBack(ct,ct+2,ct+1),N.emplaceBack(ct+1,ct+2,ct+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(ze[0]),B!==s.length-1&&ft===s[B+1].sectionIndex||i.programConfigurations.populatePaintArrays(j.length,y,y.index,{},F,se&&se[ft])}i.placedSymbolArray.emplaceBack(T.x,T.y,Y,this.glyphOffsetArray.length-Y,ie,P,C,T.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],b,0,!1,0,D)}_addCollisionDebugVertex(i,s,h,p,g,y){return s.emplaceBack(0,0),i.emplaceBack(h.x,h.y,p,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(i,s,h,p,g,y,b){let T=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),P=T.vertexLength,C=g.layoutVertexArray,D=g.collisionVertexArray,F=b.anchorX,N=b.anchorY;this._addCollisionDebugVertex(C,D,y,F,N,new $(i,s)),this._addCollisionDebugVertex(C,D,y,F,N,new $(h,s)),this._addCollisionDebugVertex(C,D,y,F,N,new $(h,p)),this._addCollisionDebugVertex(C,D,y,F,N,new $(i,p)),T.vertexLength+=4;let j=g.indexArray;j.emplaceBack(P,P+1),j.emplaceBack(P+1,P+2),j.emplaceBack(P+2,P+3),j.emplaceBack(P+3,P),T.primitiveLength+=4}addDebugCollisionBoxes(i,s,h,p){for(let g=i;g<s;g++){let y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,p?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new sT(_r,oz.members,ei),this.iconCollisionBox=new sT(_r,oz.members,ei);for(let i=0;i<this.symbolInstances.length;i++){let s=this.symbolInstances.get(i);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(i,s,h,p,g,y,b,T,P){let C={};for(let D=s;D<h;D++){let F=i.get(D);C.textBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},C.textFeatureIndex=F.featureIndex;break}for(let D=p;D<g;D++){let F=i.get(D);C.verticalTextBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},C.verticalTextFeatureIndex=F.featureIndex;break}for(let D=y;D<b;D++){let F=i.get(D);C.iconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},C.iconFeatureIndex=F.featureIndex;break}for(let D=T;D<P;D++){let F=i.get(D);C.verticalIconBox={x1:F.x1,y1:F.y1,x2:F.x2,y2:F.y2,anchorPointX:F.anchorPointX,anchorPointY:F.anchorPointY},C.verticalIconFeatureIndex=F.featureIndex;break}return C}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){let h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,s){let h=i.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let g=h.vertexStartIndex;g<p;g+=4)i.indexArray.emplaceBack(g,g+2,g+1),i.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let s=Math.sin(i),h=Math.cos(i),p=[],g=[],y=[];for(let b=0;b<this.symbolInstances.length;++b){y.push(b);let T=this.symbolInstances.get(b);p.push(0|Math.round(s*T.anchorX+h*T.anchorY)),g.push(T.featureIndex)}return y.sort((b,T)=>p[b]-p[T]||g[T]-g[b]),y}addToSortKeyRanges(i,s){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let s of this.symbolInstanceIndexes){let h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,g,y)=>{p>=0&&y.indexOf(p)===g&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let xz,bz;rt("SymbolBucket",xf,{omit:["layers","collisionBoxArray","features","compareText"]}),xf.MAX_GLYPHS=65535,xf.addDynamicAttributes=aT;var lT={get paint(){return bz=bz||new jr({"icon-opacity":new mt(X.paint_symbol["icon-opacity"]),"icon-color":new mt(X.paint_symbol["icon-color"]),"icon-halo-color":new mt(X.paint_symbol["icon-halo-color"]),"icon-halo-width":new mt(X.paint_symbol["icon-halo-width"]),"icon-halo-blur":new mt(X.paint_symbol["icon-halo-blur"]),"icon-translate":new st(X.paint_symbol["icon-translate"]),"icon-translate-anchor":new st(X.paint_symbol["icon-translate-anchor"]),"text-opacity":new mt(X.paint_symbol["text-opacity"]),"text-color":new mt(X.paint_symbol["text-color"],{runtimeType:Ir,getOverride:l=>l.textColor,hasOverride:l=>!!l.textColor}),"text-halo-color":new mt(X.paint_symbol["text-halo-color"]),"text-halo-width":new mt(X.paint_symbol["text-halo-width"]),"text-halo-blur":new mt(X.paint_symbol["text-halo-blur"]),"text-translate":new st(X.paint_symbol["text-translate"]),"text-translate-anchor":new st(X.paint_symbol["text-translate-anchor"])})},get layout(){return xz=xz||new jr({"symbol-placement":new st(X.layout_symbol["symbol-placement"]),"symbol-spacing":new st(X.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new st(X.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new mt(X.layout_symbol["symbol-sort-key"]),"symbol-z-order":new st(X.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new st(X.layout_symbol["icon-allow-overlap"]),"icon-overlap":new st(X.layout_symbol["icon-overlap"]),"icon-ignore-placement":new st(X.layout_symbol["icon-ignore-placement"]),"icon-optional":new st(X.layout_symbol["icon-optional"]),"icon-rotation-alignment":new st(X.layout_symbol["icon-rotation-alignment"]),"icon-size":new mt(X.layout_symbol["icon-size"]),"icon-text-fit":new st(X.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new st(X.layout_symbol["icon-text-fit-padding"]),"icon-image":new mt(X.layout_symbol["icon-image"]),"icon-rotate":new mt(X.layout_symbol["icon-rotate"]),"icon-padding":new mt(X.layout_symbol["icon-padding"]),"icon-keep-upright":new st(X.layout_symbol["icon-keep-upright"]),"icon-offset":new mt(X.layout_symbol["icon-offset"]),"icon-anchor":new mt(X.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new st(X.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new st(X.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new st(X.layout_symbol["text-rotation-alignment"]),"text-field":new mt(X.layout_symbol["text-field"]),"text-font":new mt(X.layout_symbol["text-font"]),"text-size":new mt(X.layout_symbol["text-size"]),"text-max-width":new mt(X.layout_symbol["text-max-width"]),"text-line-height":new st(X.layout_symbol["text-line-height"]),"text-letter-spacing":new mt(X.layout_symbol["text-letter-spacing"]),"text-justify":new mt(X.layout_symbol["text-justify"]),"text-radial-offset":new mt(X.layout_symbol["text-radial-offset"]),"text-variable-anchor":new st(X.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new mt(X.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new mt(X.layout_symbol["text-anchor"]),"text-max-angle":new st(X.layout_symbol["text-max-angle"]),"text-writing-mode":new st(X.layout_symbol["text-writing-mode"]),"text-rotate":new mt(X.layout_symbol["text-rotate"]),"text-padding":new st(X.layout_symbol["text-padding"]),"text-keep-upright":new st(X.layout_symbol["text-keep-upright"]),"text-transform":new mt(X.layout_symbol["text-transform"]),"text-offset":new mt(X.layout_symbol["text-offset"]),"text-allow-overlap":new st(X.layout_symbol["text-allow-overlap"]),"text-overlap":new st(X.layout_symbol["text-overlap"]),"text-ignore-placement":new st(X.layout_symbol["text-ignore-placement"]),"text-optional":new st(X.layout_symbol["text-optional"])})}};class wz{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:gt,this.defaultValue=i}evaluate(i){if(i.formattedSection){let s=this.defaultValue.property.overrides;if(s&&s.hasOverride(i.formattedSection))return s.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rt("FormatSectionOverride",wz,{omit:["defaultValue"]});class W_ extends Bn{constructor(i){super(i,lT)}recalculate(i,s){if(super.recalculate(i,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let g of h)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,s,h,p){let g=this.layout.get(i).evaluate(s,{},h,p),y=this._unevaluatedLayout._values[i];return y.isDataDriven()||cc(y.value)||!g?g:function(b,T){return T.replace(/{([^{}]+)}/g,(P,C)=>b&&C in b?String(b[C]):"")}(s.properties,g)}createBucket(i){return new xf(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let i of lT.paint.overridableProperties){if(!W_.hasPaintOverride(this.layout,i))continue;let s=this.paint.get(i),h=new wz(s),p=new Xh(h,s.property.specification),g=null;g=s.value.kind==="constant"||s.value.kind==="source"?new Vp("source",p):new Qh("composite",p,s.value.zoomStops),this.paint._values[i]=new Ui(s.property,g,s.parameters)}}_handleOverridablePaintPropertyUpdate(i,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&W_.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,s){let h=i.get("text-field"),p=lT.paint.properties[s],g=!1,y=b=>{for(let T of b)if(p.overrides&&p.overrides.hasOverride(T))return void(g=!0)};if(h.value.kind==="constant"&&h.value.value instanceof on)y(h.value.value.sections);else if(h.value.kind==="source"){let b=P=>{g||(P instanceof Tt&&qr(P.value)===Gu?y(P.value.sections):P instanceof Dh?y(P.sections):P.eachChild(b))},T=h.value;T._styleExpression&&b(T._styleExpression.expression)}return g}}let Sz;var Vpe={get paint(){return Sz=Sz||new jr({"background-color":new st(X.paint_background["background-color"]),"background-pattern":new om(X.paint_background["background-pattern"]),"background-opacity":new st(X.paint_background["background-opacity"])})}};class Gpe extends Bn{constructor(i){super(i,Vpe)}}let Tz;var Zpe={get paint(){return Tz=Tz||new jr({"raster-opacity":new st(X.paint_raster["raster-opacity"]),"raster-hue-rotate":new st(X.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new st(X.paint_raster["raster-brightness-min"]),"raster-brightness-max":new st(X.paint_raster["raster-brightness-max"]),"raster-saturation":new st(X.paint_raster["raster-saturation"]),"raster-contrast":new st(X.paint_raster["raster-contrast"]),"raster-resampling":new st(X.paint_raster["raster-resampling"]),"raster-fade-duration":new st(X.paint_raster["raster-fade-duration"])})}};class Hpe extends Bn{constructor(i){super(i,Zpe)}}class Wpe extends Bn{constructor(i){super(i,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class Kpe{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let Ype={once:!0},uT=6371008.8;class Ll{constructor(i,s){if(isNaN(i)||isNaN(s))throw new Error(`Invalid LngLat object: (${i}, ${s})`);if(this.lng=+i,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ll(Po(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){let s=Math.PI/180,h=this.lat*s,p=i.lat*s,g=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((i.lng-this.lng)*s);return uT*Math.acos(Math.min(g,1))}static convert(i){if(i instanceof Ll)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Ll(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Ll(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let Iz=2*Math.PI*uT;function Ez(l){return Iz*Math.cos(l*Math.PI/180)}function qz(l){return(180+l)/360}function Pz(l){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+l*Math.PI/360)))/360}function Az(l,i){return l/Ez(i)}function cT(l){return 360/Math.PI*Math.atan(Math.exp((180-360*l)*Math.PI/180))-90}function Cz(l,i){return l*Ez(cT(i))}class Pm{constructor(i,s,h=0){this.x=+i,this.y=+s,this.z=+h}static fromLngLat(i,s=0){let h=Ll.convert(i);return new Pm(qz(h.lng),Pz(h.lat),Az(s,h.lat))}toLngLat(){return new Ll(360*this.x-180,cT(this.y))}toAltitude(){return Cz(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Iz*(i=cT(this.y),1/Math.cos(i*Math.PI/180));var i}}function Mz(l,i,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[l*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class hT{constructor(i,s,h){if(!function(p,g,y){return!(p<0||p>25||y<0||y>=Math.pow(2,p)||g<0||g>=Math.pow(2,p))}(i,s,h))throw new Error(`x=${s}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=s,this.y=h,this.key=bf(0,i,i,s,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,s,h){let p=(y=this.y,b=this.z,T=Mz(256*(g=this.x),256*(y=Math.pow(2,b)-y-1),b),P=Mz(256*(g+1),256*(y+1),b),T[0]+","+T[1]+","+P[0]+","+P[1]);var g,y,b,T,P;let C=function(D,F,N){let j,G="";for(let Y=D;Y>0;Y--)j=1<<Y-1,G+=(F&j?1:0)+(N&j?2:0);return G}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,C).replace(/{bbox-epsg-3857}/g,p)}isChildOf(i){let s=this.z-i.z;return s>0&&i.x===this.x>>s&&i.y===this.y>>s}getTilePoint(i){let s=Math.pow(2,this.z);return new $((i.x*s-this.x)*er,(i.y*s-this.y)*er)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Rz{constructor(i,s){this.wrap=i,this.canonical=s,this.key=bf(i,s.z,s.z,s.x,s.y)}}class la{constructor(i,s,h,p,g){if(this.terrainRttPosMatrix32f=null,i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=s,this.canonical=new hT(h,+p,+g),this.key=bf(s,i,h,p,g)}clone(){return new la(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let s=this.canonical.z-i;return i>this.canonical.z?new la(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new la(i,this.wrap,i,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(i,s){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-i;return i>this.canonical.z?bf(this.wrap*+s,i,this.canonical.z,this.canonical.x,this.canonical.y):bf(this.wrap*+s,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;let s=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>s&&i.canonical.y===this.canonical.y>>s}children(i){if(this.overscaledZ>=i)return[new la(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new la(s,this.wrap,s,h,p),new la(s,this.wrap,s,h+1,p),new la(s,this.wrap,s,h,p+1),new la(s,this.wrap,s,h+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new la(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new la(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Rz(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Pm(i.x-this.wrap,i.y))}}function bf(l,i,s,h,p){(l*=2)<0&&(l=-1*l-1);let g=1<<s;return(g*g*l+g*p+h).toString(36)+s.toString(36)+i.toString(36)}rt("CanonicalTileID",hT),rt("OverscaledTileID",la,{omit:["terrainRttPosMatrix32f"]});class Oz{constructor(i,s,h,p=1,g=1,y=1,b=0){if(this.uid=i,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Fi(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;let T=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=g,this.blueFactor=y,this.baseShift=b;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let P=0;P<T;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(T,P)]=this.data[this._idx(T-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,T)]=this.data[this._idx(P,T-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(T,-1)]=this.data[this._idx(T-1,0)],this.data[this._idx(-1,T)]=this.data[this._idx(0,T-1)],this.data[this._idx(T,T)]=this.data[this._idx(T-1,T-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<T;P++)for(let C=0;C<T;C++){let D=this.get(P,C);D>this.max&&(this.max=D),D<this.min&&(this.min=D)}}get(i,s){let h=new Uint8Array(this.data.buffer),p=4*this._idx(i,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,s){if(i<-1||i>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(i+1)}unpack(i,s,h){return i*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new sa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,s,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,g=s*this.dim+this.dim,y=h*this.dim,b=h*this.dim+this.dim;switch(s){case-1:p=g-1;break;case 1:g=p+1}switch(h){case-1:y=b-1;break;case 1:b=y+1}let T=-s*this.dim,P=-h*this.dim;for(let C=y;C<b;C++)for(let D=p;D<g;D++)this.data[this._idx(D,C)]=i.data[this._idx(D+T,C+P)]}}rt("DEMData",Oz);class kz{constructor(i){this._stringToNumber={},this._numberToString=[];for(let s=0;s<i.length;s++){let h=i[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class Dz{constructor(i,s,h,p,g){this.type="Feature",this._vectorTileFeature=i,i._z=s,i._x=h,i._y=p,this.properties=i.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){let i={geometry:this.geometry};for(let s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(i[s]=this[s]);return i}}class Lz{constructor(i,s){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Cl(er,16,0),this.grid3D=new Cl(er,16,0),this.featureIndexArray=new Re,this.promoteId=s}insert(i,s,h,p,g,y){let b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,g);let T=y?this.grid3D:this.grid;for(let P=0;P<s.length;P++){let C=s[P],D=[1/0,1/0,-1/0,-1/0];for(let F=0;F<C.length;F++){let N=C[F];D[0]=Math.min(D[0],N.x),D[1]=Math.min(D[1],N.y),D[2]=Math.max(D[2],N.x),D[3]=Math.max(D[3],N.y)}D[0]<er&&D[1]<er&&D[2]>=0&&D[3]>=0&&T.insert(b,D[0],D[1],D[2],D[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new wm.VectorTile(new QS(this.rawTileData)).layers,this.sourceLayerCoder=new kz(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,s,h,p){this.loadVTLayers();let g=i.params,y=er/i.tileSize/i.scale,b=pc(g.filter),T=i.queryGeometry,P=i.queryPadding*y,C=Fz(T),D=this.grid.query(C.minX-P,C.minY-P,C.maxX+P,C.maxY+P),F=Fz(i.cameraQueryGeometry),N=this.grid3D.query(F.minX-P,F.minY-P,F.maxX+P,F.maxY+P,(Y,ie,me,se)=>function(B,K,ue,Ee,Ne){for(let De of B)if(K<=De.x&&ue<=De.y&&Ee>=De.x&&Ne>=De.y)return!0;let Ce=[new $(K,ue),new $(K,Ne),new $(Ee,Ne),new $(Ee,ue)];if(B.length>2){for(let De of Ce)if(Pc(B,De))return!0}for(let De=0;De<B.length-1;De++)if(Fde(B[De],B[De+1],Ce))return!0;return!1}(i.cameraQueryGeometry,Y-P,ie-P,me+P,se+P));for(let Y of N)D.push(Y);D.sort(Xpe);let j={},G;for(let Y=0;Y<D.length;Y++){let ie=D[Y];if(ie===G)continue;G=ie;let me=this.featureIndexArray.get(ie),se=null;this.loadMatchingFeature(j,me.bucketIndex,me.sourceLayerIndex,me.featureIndex,b,g.layers,g.availableImages,s,h,p,(B,K,ue)=>(se||(se=Ec(B)),K.queryIntersectsFeature({queryGeometry:T,feature:B,featureState:ue,geometry:se,zoom:this.z,transform:i.transform,pixelsToTileUnits:y,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation})))}return j}loadMatchingFeature(i,s,h,p,g,y,b,T,P,C,D){let F=this.bucketLayerIDs[s];if(y&&!F.some(Y=>y.has(Y)))return;let N=this.sourceLayerCoder.decode(h),j=this.vtLayers[N].feature(p);if(g.needGeometry){let Y=qc(j,!0);if(!g.filter(new cr(this.tileID.overscaledZ),Y,this.tileID.canonical))return}else if(!g.filter(new cr(this.tileID.overscaledZ),j))return;let G=this.getId(j,N);for(let Y=0;Y<F.length;Y++){let ie=F[Y];if(y&&!y.has(ie))continue;let me=T[ie];if(!me)continue;let se={};G&&C&&(se=C.getState(me.sourceLayer||"_geojsonTileLayer",G));let B=vn({},P[ie]);B.paint=zz(B.paint,me.paint,j,se,b),B.layout=zz(B.layout,me.layout,j,se,b);let K=!D||D(j,me,se);if(!K)continue;let ue=new Dz(j,this.z,this.x,this.y,G);ue.layer=B;let Ee=i[ie];Ee===void 0&&(Ee=i[ie]=[]),Ee.push({featureIndex:p,feature:ue,intersectionZ:K})}}lookupSymbolFeatures(i,s,h,p,g,y,b,T){let P={};this.loadVTLayers();let C=pc(g);for(let D of i)this.loadMatchingFeature(P,h,p,D,C,y,b,T,s);return P}hasLayer(i){for(let s of this.bucketLayerIDs)for(let h of s)if(i===h)return!0;return!1}getId(i,s){var h;let p=i.id;return this.promoteId&&(p=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof p=="boolean"&&(p=Number(p)),p===void 0&&!((h=i.properties)===null||h===void 0)&&h.cluster&&this.promoteId&&(p=Number(i.properties.cluster_id))),p}}function zz(l,i,s,h,p){return cs(l,(g,y)=>{let b=i instanceof df?i.get(y):null;return b&&b.evaluate?b.evaluate(s,h,p):b})}function Fz(l){let i=1/0,s=1/0,h=-1/0,p=-1/0;for(let g of l)i=Math.min(i,g.x),s=Math.min(s,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return{minX:i,minY:s,maxX:h,maxY:p}}function Xpe(l,i){return i-l}function Bz(l,i,s,h,p){let g=[];for(let y=0;y<l.length;y++){let b=l[y],T;for(let P=0;P<b.length-1;P++){let C=b[P],D=b[P+1];C.x<i&&D.x<i||(C.x<i?C=new $(i,C.y+(i-C.x)/(D.x-C.x)*(D.y-C.y))._round():D.x<i&&(D=new $(i,C.y+(i-C.x)/(D.x-C.x)*(D.y-C.y))._round()),C.y<s&&D.y<s||(C.y<s?C=new $(C.x+(s-C.y)/(D.y-C.y)*(D.x-C.x),s)._round():D.y<s&&(D=new $(C.x+(s-C.y)/(D.y-C.y)*(D.x-C.x),s)._round()),C.x>=h&&D.x>=h||(C.x>=h?C=new $(h,C.y+(h-C.x)/(D.x-C.x)*(D.y-C.y))._round():D.x>=h&&(D=new $(h,C.y+(h-C.x)/(D.x-C.x)*(D.y-C.y))._round()),C.y>=p&&D.y>=p||(C.y>=p?C=new $(C.x+(p-C.y)/(D.y-C.y)*(D.x-C.x),p)._round():D.y>=p&&(D=new $(C.x+(p-C.y)/(D.y-C.y)*(D.x-C.x),p)._round()),T&&C.equals(T[T.length-1])||(T=[C],g.push(T)),T.push(D)))))}}return g}rt("FeatureIndex",Lz,{omit:["rawTileData","sourceLayerCoder"]});class zl extends ${constructor(i,s,h,p){super(i,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new zl(this.x,this.y,this.angle,this.segment)}}function Nz(l,i,s,h,p){if(i.segment===void 0||s===0)return!0;let g=i,y=i.segment+1,b=0;for(;b>-s/2;){if(y--,y<0)return!1;b-=l[y].dist(g),g=l[y]}b+=l[y].dist(l[y+1]),y++;let T=[],P=0;for(;b<s/2;){let C=l[y],D=l[y+1];if(!D)return!1;let F=l[y-1].angleTo(C)-C.angleTo(D);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),T.push({distance:b,angleDelta:F}),P+=F;b-T[0].distance>h;)P-=T.shift().angleDelta;if(P>p)return!1;y++,b+=C.dist(D)}return!0}function jz(l){let i=0;for(let s=0;s<l.length-1;s++)i+=l[s].dist(l[s+1]);return i}function Uz(l,i,s){return l?.6*i*s:0}function $z(l,i){return Math.max(l?l.right-l.left:0,i?i.right-i.left:0)}function Jpe(l,i,s,h,p,g){let y=Uz(s,p,g),b=$z(s,h)*g,T=0,P=jz(l)/2;for(let C=0;C<l.length-1;C++){let D=l[C],F=l[C+1],N=D.dist(F);if(T+N>P){let j=(P-T)/N,G=Sa.number(D.x,F.x,j),Y=Sa.number(D.y,F.y,j),ie=new zl(G,Y,F.angleTo(D),C);return ie._round(),!y||Nz(l,ie,b,y,i)?ie:void 0}T+=N}}function Qpe(l,i,s,h,p,g,y,b,T){let P=Uz(h,g,y),C=$z(h,p),D=C*y,F=l[0].x===0||l[0].x===T||l[0].y===0||l[0].y===T;return i-D<i/4&&(i=D+i/4),Vz(l,F?i/2*b%i:(C/2+2*g)*y*b%i,i,P,s,D,F,!1,T)}function Vz(l,i,s,h,p,g,y,b,T){let P=g/2,C=jz(l),D=0,F=i-s,N=[];for(let j=0;j<l.length-1;j++){let G=l[j],Y=l[j+1],ie=G.dist(Y),me=Y.angleTo(G);for(;F+s<D+ie;){F+=s;let se=(F-D)/ie,B=Sa.number(G.x,Y.x,se),K=Sa.number(G.y,Y.y,se);if(B>=0&&B<T&&K>=0&&K<T&&F-P>=0&&F+P<=C){let ue=new zl(B,K,me,j);ue._round(),h&&!Nz(l,ue,g,h,p)||N.push(ue)}}D+=ie}return b||N.length||y||(N=Vz(l,D/2,s,h,p,g,y,!0,T)),N}rt("Anchor",zl);let Am=Tn;function Gz(l,i,s,h){let p=[],g=l.image,y=g.pixelRatio,b=g.paddedRect.w-2*Am,T=g.paddedRect.h-2*Am,P={x1:l.left,y1:l.top,x2:l.right,y2:l.bottom},C=g.stretchX||[[0,b]],D=g.stretchY||[[0,T]],F=(ze,it)=>ze+it[1]-it[0],N=C.reduce(F,0),j=D.reduce(F,0),G=b-N,Y=T-j,ie=0,me=N,se=0,B=j,K=0,ue=G,Ee=0,Ne=Y;if(g.content&&h){let ze=g.content,it=ze[2]-ze[0],ft=ze[3]-ze[1];(g.textFitWidth||g.textFitHeight)&&(P=gz(l)),ie=K_(C,0,ze[0]),se=K_(D,0,ze[1]),me=K_(C,ze[0],ze[2]),B=K_(D,ze[1],ze[3]),K=ze[0]-ie,Ee=ze[1]-se,ue=it-me,Ne=ft-B}let Ce=P.x1,De=P.y1,Ge=P.x2-Ce,je=P.y2-De,Ze=(ze,it,ft,ct)=>{let ot=Y_(ze.stretch-ie,me,Ge,Ce),Ft=X_(ze.fixed-K,ue,ze.stretch,N),Ar=Y_(it.stretch-se,B,je,De),ri=X_(it.fixed-Ee,Ne,it.stretch,j),Ri=Y_(ft.stretch-ie,me,Ge,Ce),ua=X_(ft.fixed-K,ue,ft.stretch,N),In=Y_(ct.stretch-se,B,je,De),_i=X_(ct.fixed-Ee,Ne,ct.stretch,j),xr=new $(ot,Ar),li=new $(Ri,Ar),xi=new $(Ri,In),bi=new $(ot,In),ln=new $(Ft/y,ri/y),ca=new $(ua/y,_i/y),ui=i*Math.PI/180;if(ui){let ci=Math.sin(ui),hi=Math.cos(ui),Vr=[hi,-ci,ci,hi];xr._matMult(Vr),li._matMult(Vr),bi._matMult(Vr),xi._matMult(Vr)}let En=ze.stretch+ze.fixed,ii=it.stretch+it.fixed;return{tl:xr,tr:li,bl:bi,br:xi,tex:{x:g.paddedRect.x+Am+En,y:g.paddedRect.y+Am+ii,w:ft.stretch+ft.fixed-En,h:ct.stretch+ct.fixed-ii},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ln,pixelOffsetBR:ca,minFontScaleX:ue/y/Ge,minFontScaleY:Ne/y/je,isSDF:s}};if(h&&(g.stretchX||g.stretchY)){let ze=Zz(C,G,N),it=Zz(D,Y,j);for(let ft=0;ft<ze.length-1;ft++){let ct=ze[ft],ot=ze[ft+1];for(let Ft=0;Ft<it.length-1;Ft++)p.push(Ze(ct,it[Ft],ot,it[Ft+1]))}}else p.push(Ze({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:T+1}));return p}function K_(l,i,s){let h=0;for(let p of l)h+=Math.max(i,Math.min(s,p[1]))-Math.max(i,Math.min(s,p[0]));return h}function Zz(l,i,s){let h=[{fixed:-1,stretch:0}];for(let[p,g]of l){let y=h[h.length-1];h.push({fixed:p-y.stretch,stretch:y.stretch}),h.push({fixed:p-y.stretch,stretch:y.stretch+(g-p)})}return h.push({fixed:i+Am,stretch:s}),h}function Y_(l,i,s,h){return l/i*s+h}function X_(l,i,s,h){return l-i*s/h}class J_{constructor(i,s,h,p,g,y,b,T,P,C){var D;if(this.boxStartIndex=i.length,P){let F=y.top,N=y.bottom,j=y.collisionPadding;j&&(F-=j[1],N+=j[3]);let G=N-F;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{let F=!((D=y.image)===null||D===void 0)&&D.content&&(y.image.textFitWidth||y.image.textFitHeight)?gz(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};F.y1=F.y1*b-T[0],F.y2=F.y2*b+T[2],F.x1=F.x1*b-T[3],F.x2=F.x2*b+T[1];let N=y.collisionPadding;if(N&&(F.x1-=N[0]*b,F.y1-=N[1]*b,F.x2+=N[2]*b,F.y2+=N[3]*b),C){let j=new $(F.x1,F.y1),G=new $(F.x2,F.y1),Y=new $(F.x1,F.y2),ie=new $(F.x2,F.y2),me=C*Math.PI/180;j._rotate(me),G._rotate(me),Y._rotate(me),ie._rotate(me),F.x1=Math.min(j.x,G.x,Y.x,ie.x),F.x2=Math.max(j.x,G.x,Y.x,ie.x),F.y1=Math.min(j.y,G.y,Y.y,ie.y),F.y2=Math.max(j.y,G.y,Y.y,ie.y)}i.emplaceBack(s.x,s.y,F.x1,F.y1,F.x2,F.y2,h,p,g)}this.boxEndIndex=i.length}}class eme{constructor(i=[],s=(h,p)=>h<p?-1:h>p?1:0){if(this.data=i,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;let i=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),i}peek(){return this.data[0]}_up(i){let{data:s,compare:h}=this,p=s[i];for(;i>0;){let g=i-1>>1,y=s[g];if(h(p,y)>=0)break;s[i]=y,i=g}s[i]=p}_down(i){let{data:s,compare:h}=this,p=this.length>>1,g=s[i];for(;i<p;){let y=1+(i<<1),b=y+1;if(b<this.length&&h(s[b],s[y])<0&&(y=b),h(s[y],g)>=0)break;s[i]=s[y],i=y}s[i]=g}}function tme(l,i=1,s=!1){let h=1/0,p=1/0,g=-1/0,y=-1/0,b=l[0];for(let N=0;N<b.length;N++){let j=b[N];(!N||j.x<h)&&(h=j.x),(!N||j.y<p)&&(p=j.y),(!N||j.x>g)&&(g=j.x),(!N||j.y>y)&&(y=j.y)}let T=Math.min(g-h,y-p),P=T/2,C=new eme([],rme);if(T===0)return new $(h,p);for(let N=h;N<g;N+=T)for(let j=p;j<y;j+=T)C.push(new wf(N+P,j+P,P,l));let D=function(N){let j=0,G=0,Y=0,ie=N[0];for(let me=0,se=ie.length,B=se-1;me<se;B=me++){let K=ie[me],ue=ie[B],Ee=K.x*ue.y-ue.x*K.y;G+=(K.x+ue.x)*Ee,Y+=(K.y+ue.y)*Ee,j+=3*Ee}return new wf(G/j,Y/j,0,N)}(l),F=C.length;for(;C.length;){let N=C.pop();(N.d>D.d||!D.d)&&(D=N,s&&console.log("found best %d after %d probes",Math.round(1e4*N.d)/1e4,F)),N.max-D.d<=i||(P=N.h/2,C.push(new wf(N.p.x-P,N.p.y-P,P,l)),C.push(new wf(N.p.x+P,N.p.y-P,P,l)),C.push(new wf(N.p.x-P,N.p.y+P,P,l)),C.push(new wf(N.p.x+P,N.p.y+P,P,l)),F+=4)}return s&&(console.log(`num probes: ${F}`),console.log(`best distance: ${D.d}`)),D.p}function rme(l,i){return i.max-l.max}function wf(l,i,s,h){this.p=new $(l,i),this.h=s,this.d=function(p,g){let y=!1,b=1/0;for(let T=0;T<g.length;T++){let P=g[T];for(let C=0,D=P.length,F=D-1;C<D;F=C++){let N=P[C],j=P[F];N.y>p.y!=j.y>p.y&&p.x<(j.x-N.x)*(p.y-N.y)/(j.y-N.y)+N.x&&(y=!y),b=Math.min(b,EL(p,N,j))}}return(y?1:-1)*Math.sqrt(b)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var Mi;c.aB=void 0,(Mi=c.aB||(c.aB={}))[Mi.center=1]="center",Mi[Mi.left=2]="left",Mi[Mi.right=3]="right",Mi[Mi.top=4]="top",Mi[Mi.bottom=5]="bottom",Mi[Mi["top-left"]=6]="top-left",Mi[Mi["top-right"]=7]="top-right",Mi[Mi["bottom-left"]=8]="bottom-left",Mi[Mi["bottom-right"]=9]="bottom-right";let Fl=7,fT=Number.POSITIVE_INFINITY;function Hz(l,i){return i[1]!==fT?function(s,h,p){let g=0,y=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":y=p-Fl;break;case"bottom-right":case"bottom-left":case"bottom":y=-p+Fl}switch(s){case"top-right":case"bottom-right":case"right":g=-h;break;case"top-left":case"bottom-left":case"left":g=h}return[g,y]}(l,i[0],i[1]):function(s,h){let p=0,g=0;h<0&&(h=0);let y=h/Math.SQRT2;switch(s){case"top-right":case"top-left":g=y-Fl;break;case"bottom-right":case"bottom-left":g=-y+Fl;break;case"bottom":g=-h+Fl;break;case"top":g=h-Fl}switch(s){case"top-right":case"bottom-right":p=-y;break;case"top-left":case"bottom-left":p=y;break;case"left":p=h;break;case"right":p=-h}return[p,g]}(l,i[0])}function Wz(l,i,s){var h;let p=l.layout,g=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},s);if(g){let b=g.values,T=[];for(let P=0;P<b.length;P+=2){let C=T[P]=b[P],D=b[P+1].map(F=>F*ti);C.startsWith("top")?D[1]-=Fl:C.startsWith("bottom")&&(D[1]+=Fl),T[P+1]=D}return new ji(T)}let y=p.get("text-variable-anchor");if(y){let b;b=l._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(i,{},s)*ti,fT]:p.get("text-offset").evaluate(i,{},s).map(P=>P*ti);let T=[];for(let P of y)T.push(P,Hz(P,b));return new ji(T)}return null}function dT(l){switch(l){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function ime(l,i,s,h,p,g,y,b,T,P,C,D){let F=g.textMaxSize.evaluate(i,{});F===void 0&&(F=y);let N=l.layers[0].layout,j=N.get("icon-offset").evaluate(i,{},C),G=Yz(s.horizontal),Y=y/24,ie=l.tilePixelRatio*Y,me=l.tilePixelRatio*F/24,se=l.tilePixelRatio*b,B=l.tilePixelRatio*N.get("symbol-spacing"),K=N.get("text-padding")*l.tilePixelRatio,ue=function(ft,ct,ot,Ft=1){let Ar=ft.get("icon-padding").evaluate(ct,{},ot),ri=Ar&&Ar.values;return[ri[0]*Ft,ri[1]*Ft,ri[2]*Ft,ri[3]*Ft]}(N,i,C,l.tilePixelRatio),Ee=N.get("text-max-angle")/180*Math.PI,Ne=N.get("text-rotation-alignment")!=="viewport"&&N.get("symbol-placement")!=="point",Ce=N.get("icon-rotation-alignment")==="map"&&N.get("symbol-placement")!=="point",De=N.get("symbol-placement"),Ge=B/2,je=N.get("icon-text-fit"),Ze;h&&je!=="none"&&(l.allowVerticalPlacement&&s.vertical&&(Ze=yz(h,s.vertical,je,N.get("icon-text-fit-padding"),j,Y)),G&&(h=yz(h,G,je,N.get("icon-text-fit-padding"),j,Y)));let ze=C?D.line.getGranularityForZoomLevel(C.z):1,it=(ft,ct)=>{ct.x<0||ct.x>=er||ct.y<0||ct.y>=er||function(ot,Ft,Ar,ri,Ri,ua,In,_i,xr,li,xi,bi,ln,ca,ui,En,ii,ci,hi,Vr,fr,ao,Sf,oo,ome){let Tf=ot.addToLineVertexArray(Ft,Ar),Mc,If,Ef,qf,eF=0,tF=0,rF=0,iF=0,bT=-1,wT=-1,Ms={},nF=io("");if(ot.allowVerticalPlacement&&ri.vertical){let Vi=_i.layout.get("text-rotate").evaluate(fr,{},oo)+90;Ef=new J_(xr,Ft,li,xi,bi,ri.vertical,ln,ca,ui,Vi),In&&(qf=new J_(xr,Ft,li,xi,bi,In,ii,ci,ui,Vi))}if(Ri){let Vi=_i.layout.get("icon-rotate").evaluate(fr,{}),ha=_i.layout.get("icon-text-fit")!=="none",Rc=Gz(Ri,Vi,Sf,ha),lo=In?Gz(In,Vi,Sf,ha):void 0;If=new J_(xr,Ft,li,xi,bi,Ri,ii,ci,!1,Vi),eF=4*Rc.length;let Oc=ot.iconSizeData,jo=null;Oc.kind==="source"?(jo=[No*_i.layout.get("icon-size").evaluate(fr,{})],jo[0]>Dl&&Fi(`${ot.layerIds[0]}: Value for "icon-size" is >= ${qm}. Reduce your "icon-size".`)):Oc.kind==="composite"&&(jo=[No*ao.compositeIconSizes[0].evaluate(fr,{},oo),No*ao.compositeIconSizes[1].evaluate(fr,{},oo)],(jo[0]>Dl||jo[1]>Dl)&&Fi(`${ot.layerIds[0]}: Value for "icon-size" is >= ${qm}. Reduce your "icon-size".`)),ot.addSymbols(ot.icon,Rc,jo,Vr,hi,fr,c.al.none,Ft,Tf.lineStartIndex,Tf.lineLength,-1,oo),bT=ot.icon.placedSymbolArray.length-1,lo&&(tF=4*lo.length,ot.addSymbols(ot.icon,lo,jo,Vr,hi,fr,c.al.vertical,Ft,Tf.lineStartIndex,Tf.lineLength,-1,oo),wT=ot.icon.placedSymbolArray.length-1)}let aF=Object.keys(ri.horizontal);for(let Vi of aF){let ha=ri.horizontal[Vi];if(!Mc){nF=io(ha.text);let lo=_i.layout.get("text-rotate").evaluate(fr,{},oo);Mc=new J_(xr,Ft,li,xi,bi,ha,ln,ca,ui,lo)}let Rc=ha.positionedLines.length===1;if(rF+=Kz(ot,Ft,ha,ua,_i,ui,fr,En,Tf,ri.vertical?c.al.horizontal:c.al.horizontalOnly,Rc?aF:[Vi],Ms,bT,ao,oo),Rc)break}ri.vertical&&(iF+=Kz(ot,Ft,ri.vertical,ua,_i,ui,fr,En,Tf,c.al.vertical,["vertical"],Ms,wT,ao,oo));let sme=Mc?Mc.boxStartIndex:ot.collisionBoxArray.length,lme=Mc?Mc.boxEndIndex:ot.collisionBoxArray.length,ume=Ef?Ef.boxStartIndex:ot.collisionBoxArray.length,cme=Ef?Ef.boxEndIndex:ot.collisionBoxArray.length,hme=If?If.boxStartIndex:ot.collisionBoxArray.length,fme=If?If.boxEndIndex:ot.collisionBoxArray.length,dme=qf?qf.boxStartIndex:ot.collisionBoxArray.length,pme=qf?qf.boxEndIndex:ot.collisionBoxArray.length,so=-1,e0=(Vi,ha)=>Vi&&Vi.circleDiameter?Math.max(Vi.circleDiameter,ha):ha;so=e0(Mc,so),so=e0(Ef,so),so=e0(If,so),so=e0(qf,so);let oF=so>-1?1:0;oF&&(so*=ome/ti),ot.glyphOffsetArray.length>=xf.MAX_GLYPHS&&Fi("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),fr.sortKey!==void 0&&ot.addToSortKeyRanges(ot.symbolInstances.length,fr.sortKey);let mme=Wz(_i,fr,oo),[vme,gme]=function(Vi,ha){let Rc=Vi.length,lo=ha==null?void 0:ha.values;if((lo==null?void 0:lo.length)>0)for(let Oc=0;Oc<lo.length;Oc+=2){let jo=lo[Oc+1];Vi.emplaceBack(c.aB[lo[Oc]],jo[0],jo[1])}return[Rc,Vi.length]}(ot.textAnchorOffsets,mme);ot.symbolInstances.emplaceBack(Ft.x,Ft.y,Ms.right>=0?Ms.right:-1,Ms.center>=0?Ms.center:-1,Ms.left>=0?Ms.left:-1,Ms.vertical||-1,bT,wT,nF,sme,lme,ume,cme,hme,fme,dme,pme,li,rF,iF,eF,tF,oF,0,ln,so,vme,gme)}(l,ct,ft,s,h,p,Ze,l.layers[0],l.collisionBoxArray,i.index,i.sourceLayerIndex,l.index,ie,[K,K,K,K],Ne,T,se,ue,Ce,j,i,g,P,C,y)};if(De==="line")for(let ft of Bz(i.geometry,0,0,er,er)){let ct=Cc(ft,ze),ot=Qpe(ct,B,Ee,s.vertical||G,h,24,me,l.overscaling,er);for(let Ft of ot)G&&nme(l,G.text,Ge,Ft)||it(ct,Ft)}else if(De==="line-center"){for(let ft of i.geometry)if(ft.length>1){let ct=Cc(ft,ze),ot=Jpe(ct,Ee,s.vertical||G,h,24,me);ot&&it(ct,ot)}}else if(i.type==="Polygon")for(let ft of Bh(i.geometry,0)){let ct=tme(ft,16);it(Cc(ft[0],ze,!0),new zl(ct.x,ct.y,0))}else if(i.type==="LineString")for(let ft of i.geometry){let ct=Cc(ft,ze);it(ct,new zl(ct[0].x,ct[0].y,0))}else if(i.type==="Point")for(let ft of i.geometry)for(let ct of ft)it([ct],new zl(ct.x,ct.y,0))}function Kz(l,i,s,h,p,g,y,b,T,P,C,D,F,N,j){let G=function(me,se,B,K,ue,Ee,Ne,Ce){let De=K.layout.get("text-rotate").evaluate(Ee,{})*Math.PI/180,Ge=[];for(let je of se.positionedLines)for(let Ze of je.positionedGlyphs){if(!Ze.rect)continue;let ze=Ze.rect||{},it=Mpe+1,ft=!0,ct=1,ot=0,Ft=(ue||Ce)&&Ze.vertical,Ar=Ze.metrics.advance*Ze.scale/2;if(Ce&&se.verticalizable&&(ot=je.lineOffset/2-(Ze.imageName?-(ti-Ze.metrics.width*Ze.scale)/2:(Ze.scale-1)*ti)),Ze.imageName){let ci=Ne[Ze.imageName];ft=ci.sdf,ct=ci.pixelRatio,it=Tn/ct}let ri=ue?[Ze.x+Ar,Ze.y]:[0,0],Ri=ue?[0,0]:[Ze.x+Ar+B[0],Ze.y+B[1]-ot],ua=[0,0];Ft&&(ua=Ri,Ri=[0,0]);let In=Ze.metrics.isDoubleResolution?2:1,_i=(Ze.metrics.left-it)*Ze.scale-Ar+Ri[0],xr=(-Ze.metrics.top-it)*Ze.scale+Ri[1],li=_i+ze.w/In*Ze.scale/ct,xi=xr+ze.h/In*Ze.scale/ct,bi=new $(_i,xr),ln=new $(li,xr),ca=new $(_i,xi),ui=new $(li,xi);if(Ft){let ci=new $(-Ar,Ar-V_),hi=-Math.PI/2,Vr=ti/2-Ar,fr=new $(5-V_-Vr,-(Ze.imageName?Vr:0)),ao=new $(...ua);bi._rotateAround(hi,ci)._add(fr)._add(ao),ln._rotateAround(hi,ci)._add(fr)._add(ao),ca._rotateAround(hi,ci)._add(fr)._add(ao),ui._rotateAround(hi,ci)._add(fr)._add(ao)}if(De){let ci=Math.sin(De),hi=Math.cos(De),Vr=[hi,-ci,ci,hi];bi._matMult(Vr),ln._matMult(Vr),ca._matMult(Vr),ui._matMult(Vr)}let En=new $(0,0),ii=new $(0,0);Ge.push({tl:bi,tr:ln,bl:ca,br:ui,tex:ze,writingMode:se.writingMode,glyphOffset:ri,sectionIndex:Ze.sectionIndex,isSDF:ft,pixelOffsetTL:En,pixelOffsetBR:ii,minFontScaleX:0,minFontScaleY:0})}return Ge}(0,s,b,p,g,y,h,l.allowVerticalPlacement),Y=l.textSizeData,ie=null;Y.kind==="source"?(ie=[No*p.layout.get("text-size").evaluate(y,{})],ie[0]>Dl&&Fi(`${l.layerIds[0]}: Value for "text-size" is >= ${qm}. Reduce your "text-size".`)):Y.kind==="composite"&&(ie=[No*N.compositeTextSizes[0].evaluate(y,{},j),No*N.compositeTextSizes[1].evaluate(y,{},j)],(ie[0]>Dl||ie[1]>Dl)&&Fi(`${l.layerIds[0]}: Value for "text-size" is >= ${qm}. Reduce your "text-size".`)),l.addSymbols(l.text,G,ie,b,g,y,P,i,T.lineStartIndex,T.lineLength,F,j);for(let me of C)D[me]=l.text.placedSymbolArray.length-1;return 4*G.length}function Yz(l){for(let i in l)return l[i];return null}function nme(l,i,s,h){let p=l.compareText;if(i in p){let g=p[i];for(let y=g.length-1;y>=0;y--)if(h.dist(g[y])<s)return!0}else p[i]=[];return p[i].push(h),!1}let Xz=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pT{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[s,h]=new Uint8Array(i,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");let p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);let g=Xz[15&h];if(!g)throw new Error("Unrecognized array type.");let[y]=new Uint16Array(i,2,1),[b]=new Uint32Array(i,4,1);return new pT(b,y,g,i)}constructor(i,s=64,h=Float64Array,p){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;let g=Xz.indexOf(this.ArrayType),y=2*i*this.ArrayType.BYTES_PER_ELEMENT,b=i*this.IndexArrayType.BYTES_PER_ELEMENT,T=(8-b%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+T,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+y+b+T),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+b+T,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=i)}add(i,s){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=s,h}finish(){let i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return mT(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:g,coords:y,nodeSize:b}=this,T=[0,g.length-1,0],P=[];for(;T.length;){let C=T.pop()||0,D=T.pop()||0,F=T.pop()||0;if(D-F<=b){for(let Y=F;Y<=D;Y++){let ie=y[2*Y],me=y[2*Y+1];ie>=i&&ie<=h&&me>=s&&me<=p&&P.push(g[Y])}continue}let N=F+D>>1,j=y[2*N],G=y[2*N+1];j>=i&&j<=h&&G>=s&&G<=p&&P.push(g[N]),(C===0?i<=j:s<=G)&&(T.push(F),T.push(N-1),T.push(1-C)),(C===0?h>=j:p>=G)&&(T.push(N+1),T.push(D),T.push(1-C))}return P}within(i,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:p,coords:g,nodeSize:y}=this,b=[0,p.length-1,0],T=[],P=h*h;for(;b.length;){let C=b.pop()||0,D=b.pop()||0,F=b.pop()||0;if(D-F<=y){for(let Y=F;Y<=D;Y++)Qz(g[2*Y],g[2*Y+1],i,s)<=P&&T.push(p[Y]);continue}let N=F+D>>1,j=g[2*N],G=g[2*N+1];Qz(j,G,i,s)<=P&&T.push(p[N]),(C===0?i-h<=j:s-h<=G)&&(b.push(F),b.push(N-1),b.push(1-C)),(C===0?i+h>=j:s+h>=G)&&(b.push(N+1),b.push(D),b.push(1-C))}return T}}function mT(l,i,s,h,p,g){if(p-h<=s)return;let y=h+p>>1;Jz(l,i,y,h,p,g),mT(l,i,s,h,y-1,1-g),mT(l,i,s,y+1,p,1-g)}function Jz(l,i,s,h,p,g){for(;p>h;){if(p-h>600){let P=p-h+1,C=s-h+1,D=Math.log(P),F=.5*Math.exp(2*D/3),N=.5*Math.sqrt(D*F*(P-F)/P)*(C-P/2<0?-1:1);Jz(l,i,s,Math.max(h,Math.floor(s-C*F/P+N)),Math.min(p,Math.floor(s+(P-C)*F/P+N)),g)}let y=i[2*s+g],b=h,T=p;for(Cm(l,i,h,s),i[2*p+g]>y&&Cm(l,i,h,p);b<T;){for(Cm(l,i,b,T),b++,T--;i[2*b+g]<y;)b++;for(;i[2*T+g]>y;)T--}i[2*h+g]===y?Cm(l,i,h,T):(T++,Cm(l,i,T,p)),T<=s&&(h=T+1),s<=T&&(p=T-1)}}function Cm(l,i,s,h){vT(l,s,h),vT(i,2*s,2*h),vT(i,2*s+1,2*h+1)}function vT(l,i,s){let h=l[i];l[i]=l[s],l[s]=h}function Qz(l,i,s,h){let p=l-s,g=i-h;return p*p+g*g}var gT;c.co=void 0,(gT=c.co||(c.co={})).create="create",gT.load="load",gT.fullLoad="fullLoad";let Q_=null,Mm=[],yT=1e3/60,_T="loadTime",xT="fullLoadTime",ame={mark(l){performance.mark(l)},frame(l){let i=l;Q_!=null&&Mm.push(i-Q_),Q_=i},clearMetrics(){Q_=null,Mm=[],performance.clearMeasures(_T),performance.clearMeasures(xT);for(let l in c.co)performance.clearMarks(c.co[l])},getPerformanceMetrics(){performance.measure(_T,c.co.create,c.co.load),performance.measure(xT,c.co.create,c.co.fullLoad);let l=performance.getEntriesByName(_T)[0].duration,i=performance.getEntriesByName(xT)[0].duration,s=Mm.length,h=1/(Mm.reduce((g,y)=>g+y,0)/s/1e3),p=Mm.filter(g=>g>yT).reduce((g,y)=>g+(y-yT)/yT,0);return{loadTime:l,fullLoadTime:i,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};c.$=Pm,c.A=Te,c.B=Sa,c.C=cr,c.D=st,c.E=ve,c.F=ES,c.G=function(l){if(Ao==null){let i=l.navigator?l.navigator.userAgent:null;Ao=!!l.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Ao},c.H=class{constructor(l,i){this.target=l,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new Kpe(()=>this.process()),this.subscription=hs(this.target,"message",s=>this.receive(s),!1),this.globalScope=xa(self)?l:window}registerMessageHandler(l,i){this.messageHandlers[l]=i}sendAsync(l,i){return new Promise((s,h)=>{let p=Math.round(1e18*Math.random()).toString(36).substring(0,10),g=i?hs(i.signal,"abort",()=>{g==null||g.unsubscribe(),delete this.resolveRejects[p];let T={id:p,type:"<cancel>",origin:location.origin,targetMapId:l.targetMapId,sourceMapId:this.mapId};this.target.postMessage(T)},Ype):null;this.resolveRejects[p]={resolve:T=>{g==null||g.unsubscribe(),s(T)},reject:T=>{g==null||g.unsubscribe(),h(T)}};let y=[],b=Object.assign(Object.assign({},l),{id:p,sourceMapId:this.mapId,origin:location.origin,data:Ml(l.data,y)});this.target.postMessage(b,{transfer:y})})}receive(l){let i=l.data,s=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[s];let h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(xa(self)||i.mustQueue)return this.tasks[s]=i,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,i)}}process(){if(this.taskQueue.length===0)return;let l=this.taskQueue.shift(),i=this.tasks[l];delete this.tasks[l],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(l,i)}processTask(l,i){return a(this,void 0,void 0,function*(){if(i.type==="<response>"){let p=this.resolveRejects[l];return delete this.resolveRejects[l],p?void(i.error?p.reject(yc(i.error)):p.resolve(yc(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(l,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let s=yc(i.data),h=new AbortController;this.abortControllers[l]=h;try{let p=yield this.messageHandlers[i.type](i.sourceMapId,s,h);this.completeTask(l,null,p)}catch(p){this.completeTask(l,p)}})}completeTask(l,i,s){let h=[];delete this.abortControllers[l];let p={id:l,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Ml(i):null,data:Ml(s,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},c.I=tT,c.J=ul,c.K=function(){var l=new Te(16);return Te!=Float32Array&&(l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=0,l[12]=0,l[13]=0,l[14]=0),l[0]=1,l[5]=1,l[10]=1,l[15]=1,l},c.L=function(l,i,s){var h,p,g,y,b,T,P,C,D,F,N,j,G=s[0],Y=s[1],ie=s[2];return i===l?(l[12]=i[0]*G+i[4]*Y+i[8]*ie+i[12],l[13]=i[1]*G+i[5]*Y+i[9]*ie+i[13],l[14]=i[2]*G+i[6]*Y+i[10]*ie+i[14],l[15]=i[3]*G+i[7]*Y+i[11]*ie+i[15]):(p=i[1],g=i[2],y=i[3],b=i[4],T=i[5],P=i[6],C=i[7],D=i[8],F=i[9],N=i[10],j=i[11],l[0]=h=i[0],l[1]=p,l[2]=g,l[3]=y,l[4]=b,l[5]=T,l[6]=P,l[7]=C,l[8]=D,l[9]=F,l[10]=N,l[11]=j,l[12]=h*G+b*Y+D*ie+i[12],l[13]=p*G+T*Y+F*ie+i[13],l[14]=g*G+P*Y+N*ie+i[14],l[15]=y*G+C*Y+j*ie+i[15]),l},c.M=function(l,i,s){var h=s[0],p=s[1],g=s[2];return l[0]=i[0]*h,l[1]=i[1]*h,l[2]=i[2]*h,l[3]=i[3]*h,l[4]=i[4]*p,l[5]=i[5]*p,l[6]=i[6]*p,l[7]=i[7]*p,l[8]=i[8]*g,l[9]=i[9]*g,l[10]=i[10]*g,l[11]=i[11]*g,l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l},c.N=function(l,i,s){var h=i[0],p=i[1],g=i[2],y=i[3],b=i[4],T=i[5],P=i[6],C=i[7],D=i[8],F=i[9],N=i[10],j=i[11],G=i[12],Y=i[13],ie=i[14],me=i[15],se=s[0],B=s[1],K=s[2],ue=s[3];return l[0]=se*h+B*b+K*D+ue*G,l[1]=se*p+B*T+K*F+ue*Y,l[2]=se*g+B*P+K*N+ue*ie,l[3]=se*y+B*C+K*j+ue*me,l[4]=(se=s[4])*h+(B=s[5])*b+(K=s[6])*D+(ue=s[7])*G,l[5]=se*p+B*T+K*F+ue*Y,l[6]=se*g+B*P+K*N+ue*ie,l[7]=se*y+B*C+K*j+ue*me,l[8]=(se=s[8])*h+(B=s[9])*b+(K=s[10])*D+(ue=s[11])*G,l[9]=se*p+B*T+K*F+ue*Y,l[10]=se*g+B*P+K*N+ue*ie,l[11]=se*y+B*C+K*j+ue*me,l[12]=(se=s[12])*h+(B=s[13])*b+(K=s[14])*D+(ue=s[15])*G,l[13]=se*p+B*T+K*F+ue*Y,l[14]=se*g+B*P+K*N+ue*ie,l[15]=se*y+B*C+K*j+ue*me,l},c.O=function(l,i){let s={};for(let h=0;h<i.length;h++){let p=i[h];p in l&&(s[p]=l[p])}return s},c.P=$,c.Q=Ll,c.R=sa,c.S=Pz,c.T=M_,c.U=qz,c.V=re,c.W=ae,c.X=Vu,c.Y=la,c.Z=er,c._=a,c.a=Ja,c.a$=function(l,i,s){var h=Math.sin(s),p=Math.cos(s),g=i[4],y=i[5],b=i[6],T=i[7],P=i[8],C=i[9],D=i[10],F=i[11];return i!==l&&(l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[4]=g*p+P*h,l[5]=y*p+C*h,l[6]=b*p+D*h,l[7]=T*p+F*h,l[8]=P*p-g*h,l[9]=C*p-y*h,l[10]=D*p-b*h,l[11]=F*p-T*h,l},c.a0=25,c.a1=hT,c.a2=l=>{let i=window.document.createElement("video");return i.muted=!0,new Promise(s=>{i.onloadstart=()=>{s(i)};for(let h of l){let p=window.document.createElement("source");xe(h)||(i.crossOrigin="Anonymous"),p.src=h,i.appendChild(p)}})},c.a3=ke,c.a4=function(){return al++},c.a5=te,c.a6=xf,c.a7=pc,c.a8=qc,c.a9=Dz,c.aA=function(l,i,s,h,p=!1){if(!s[0]&&!s[1])return[0,0];let g=p?h==="map"?-l.bearingInRadians:0:h==="viewport"?l.bearingInRadians:0;if(g){let y=Math.sin(g),b=Math.cos(g);s=[s[0]*b-s[1]*y,s[0]*y+s[1]*b]}return[p?s[0]:qo(i,s[0],l.zoom),p?s[1]:qo(i,s[1],l.zoom)]},c.aC=nT,c.aD=dT,c.aE=iT,c.aF=pT,c.aG=vr,c.aH=j_,c.aI=Oe,c.aJ=Wt,c.aK=Ht,c.aL=Po,c.aM=Ya,c.aN=Cz,c.aO=function(l,i,s){return l[0]=i[0]*s,l[1]=i[1]*s,l[2]=i[2]*s,l},c.aP=function(l,i,s){return l[0]=i[0]+s[0],l[1]=i[1]+s[1],l[2]=i[2]+s[2],l},c.aQ=function(l){var i=new Te(3);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i},c.aR=function(l,i,s){return l[0]=i[0]*s[0],l[1]=i[1]*s[1],l[2]=i[2]*s[2],l[3]=i[3]*s[3],l},c.aS=function(l,i,s){return l[0]=i[0]-s[0],l[1]=i[1]-s[1],l[2]=i[2]-s[2],l},c.aT=function(l,i){var s=i[0],h=i[1],p=i[2],g=s*s+h*h+p*p;return g>0&&(g=1/Math.sqrt(g)),l[0]=i[0]*g,l[1]=i[1]*g,l[2]=i[2]*g,l},c.aU=function(l,i,s){var h=i[0],p=i[1],g=i[2],y=s[0],b=s[1],T=s[2];return l[0]=p*T-g*b,l[1]=g*y-h*T,l[2]=h*b-p*y,l},c.aV=function(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]},c.aW=Rz,c.aX=bf,c.aY=function(l,i,s,h,p){var g,y=1/Math.tan(i/2);return l[0]=y/s,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=y,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[11]=-1,l[12]=0,l[13]=0,l[15]=0,p!=null&&p!==1/0?(l[10]=(p+h)*(g=1/(h-p)),l[14]=2*p*h*g):(l[10]=-1,l[14]=-2*h),l},c.aZ=function(l){var i=new Te(16);return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=l[11],i[12]=l[12],i[13]=l[13],i[14]=l[14],i[15]=l[15],i},c.a_=function(l,i,s){var h=Math.sin(s),p=Math.cos(s),g=i[0],y=i[1],b=i[2],T=i[3],P=i[4],C=i[5],D=i[6],F=i[7];return i!==l&&(l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=g*p+P*h,l[1]=y*p+C*h,l[2]=b*p+D*h,l[3]=T*p+F*h,l[4]=P*p-g*h,l[5]=C*p-y*h,l[6]=D*p-b*h,l[7]=F*p-T*h,l},c.aa=function(l){let i={};if(l.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,g)=>{let y=p||g;return i[h]=!y||y.toLowerCase(),""}),i["max-age"]){let s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i},c.ab=fs,c.ac=function(l){return Math.pow(2,l)},c.ad=Ve,c.ae=mi,c.af=85.051129,c.ag=Az,c.ah=function(l){return Math.log(l)/Math.LN2},c.ai=function(l){var i=l[0],s=l[1];return i*i+s*s},c.aj=function(l,i){let s=[];for(let h in l)h in i||s.push(h);return s},c.ak=function(l,i){let s=0,h=0;if(l.kind==="constant")h=l.layoutSize;else if(l.kind!=="source"){let{interpolationType:p,minZoom:g,maxZoom:y}=l,b=p?mi(Ai.interpolationFactor(p,i,g,y),0,1):0;l.kind==="camera"?h=Sa.number(l.minSize,l.maxSize,b):s=b}return{uSizeT:s,uSize:h}},c.am=function(l,{uSize:i,uSizeT:s},{lowerSize:h,upperSize:p}){return l.kind==="source"?h/No:l.kind==="composite"?Sa.number(h/No,p/No,s):i},c.an=function(l,i){var s=i[0],h=i[1],p=i[2],g=i[3],y=i[4],b=i[5],T=i[6],P=i[7],C=i[8],D=i[9],F=i[10],N=i[11],j=i[12],G=i[13],Y=i[14],ie=i[15],me=s*b-h*y,se=s*T-p*y,B=s*P-g*y,K=h*T-p*b,ue=h*P-g*b,Ee=p*P-g*T,Ne=C*G-D*j,Ce=C*Y-F*j,De=C*ie-N*j,Ge=D*Y-F*G,je=D*ie-N*G,Ze=F*ie-N*Y,ze=me*Ze-se*je+B*Ge+K*De-ue*Ce+Ee*Ne;return ze?(l[0]=(b*Ze-T*je+P*Ge)*(ze=1/ze),l[1]=(p*je-h*Ze-g*Ge)*ze,l[2]=(G*Ee-Y*ue+ie*K)*ze,l[3]=(F*ue-D*Ee-N*K)*ze,l[4]=(T*De-y*Ze-P*Ce)*ze,l[5]=(s*Ze-p*De+g*Ce)*ze,l[6]=(Y*B-j*Ee-ie*se)*ze,l[7]=(C*Ee-F*B+N*se)*ze,l[8]=(y*je-b*De+P*Ne)*ze,l[9]=(h*De-s*je-g*Ne)*ze,l[10]=(j*ue-G*B+ie*me)*ze,l[11]=(D*B-C*ue-N*me)*ze,l[12]=(b*Ce-y*Ge-T*Ne)*ze,l[13]=(s*Ge-h*Ce+p*Ne)*ze,l[14]=(G*se-j*K-Y*me)*ze,l[15]=(C*K-D*se+F*me)*ze,l):null},c.ao=il,c.ap=function(l){return Math.hypot(l[0],l[1])},c.aq=function(l){return l[0]=0,l[1]=0,l},c.ar=function(l,i,s){return l[0]=i[0]*s,l[1]=i[1]*s,l},c.as=aT,c.at=qi,c.au=function(l,i,s,h){let p=i.y-l.y,g=i.x-l.x,y=h.y-s.y,b=h.x-s.x,T=y*g-b*p;if(T===0)return null;let P=(b*(l.y-s.y)-y*(l.x-s.x))/T;return new $(l.x+P*g,l.y+P*p)},c.av=Bz,c.aw=TL,c.ax=function(l){let i=1/0,s=1/0,h=-1/0,p=-1/0;for(let g of l)i=Math.min(i,g.x),s=Math.min(s,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return[i,s,h,p]},c.ay=ti,c.az=qo,c.b=Dn,c.b$=class extends V{},c.b0=function(){let l=new Float32Array(16);return Ve(l),l},c.b1=function(){let l=new Float64Array(16);return Ve(l),l},c.b2=function(){return new Float64Array(16)},c.b3=function(l,i,s){let h=new Float64Array(4);return function(p,g,y,b){var T=.5*Math.PI/180;g*=T,y*=T,b*=T;var P=Math.sin(g),C=Math.cos(g),D=Math.sin(y),F=Math.cos(y),N=Math.sin(b),j=Math.cos(b);p[0]=P*F*j-C*D*N,p[1]=C*D*j+P*F*N,p[2]=C*F*N-P*D*j,p[3]=C*F*j+P*D*N}(h,l,i-90,s),h},c.b4=function(l,i,s,h){var p,g,y,b,T,P=i[0],C=i[1],D=i[2],F=i[3],N=s[0],j=s[1],G=s[2],Y=s[3];return(g=P*N+C*j+D*G+F*Y)<0&&(g=-g,N=-N,j=-j,G=-G,Y=-Y),1-g>_e?(p=Math.acos(g),y=Math.sin(p),b=Math.sin((1-h)*p)/y,T=Math.sin(h*p)/y):(b=1-h,T=h),l[0]=b*P+T*N,l[1]=b*C+T*j,l[2]=b*D+T*G,l[3]=b*F+T*Y,l},c.b5=function(l){let i=new Float64Array(9);var s,h,p,g,y,b,T,P,C,D,F,N,j,G,Y,ie,me,se;D=(p=(h=l)[0])*(T=p+p),F=(g=h[1])*T,j=(y=h[2])*T,G=y*(P=g+g),ie=(b=h[3])*T,me=b*P,se=b*(C=y+y),(s=i)[0]=1-(N=g*P)-(Y=y*C),s[3]=F-se,s[6]=j+me,s[1]=F+se,s[4]=1-D-Y,s[7]=G-ie,s[2]=j-me,s[5]=G+ie,s[8]=1-D-N;let B=Ya(-Math.asin(mi(i[2],-1,1))),K,ue;return Math.hypot(i[5],i[8])<.001?(K=0,ue=-Ya(Math.atan2(i[3],i[4]))):(K=Ya(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),ue=Ya(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:K,pitch:B+90,bearing:ue}},c.b6=function(l,i){return l.roll==i.roll&&l.pitch==i.pitch&&l.bearing==i.bearing},c.b7=Nt,c.b8=pf,c.b9=yf,c.bA=function(l){if(l.type==="custom")return new Wpe(l);switch(l.type){case"background":return new Gpe(l);case"circle":return new Nde(l);case"fill":return new ape(l);case"fill-extrusion":return new dpe(l);case"heatmap":return new Ude(l);case"hillshade":return new Vde(l);case"line":return new bpe(l);case"raster":return new Hpe(l);case"symbol":return new W_(l)}},c.bB=gn,c.bC=function(l,i){if(!l)return[{command:"setStyle",args:[i]}];let s=[];try{if(!we(l.version,i.version))return[{command:"setStyle",args:[i]}];we(l.center,i.center)||s.push({command:"setCenter",args:[i.center]}),we(l.state,i.state)||s.push({command:"setGlobalState",args:[i.state]}),we(l.centerAltitude,i.centerAltitude)||s.push({command:"setCenterAltitude",args:[i.centerAltitude]}),we(l.zoom,i.zoom)||s.push({command:"setZoom",args:[i.zoom]}),we(l.bearing,i.bearing)||s.push({command:"setBearing",args:[i.bearing]}),we(l.pitch,i.pitch)||s.push({command:"setPitch",args:[i.pitch]}),we(l.roll,i.roll)||s.push({command:"setRoll",args:[i.roll]}),we(l.sprite,i.sprite)||s.push({command:"setSprite",args:[i.sprite]}),we(l.glyphs,i.glyphs)||s.push({command:"setGlyphs",args:[i.glyphs]}),we(l.transition,i.transition)||s.push({command:"setTransition",args:[i.transition]}),we(l.light,i.light)||s.push({command:"setLight",args:[i.light]}),we(l.terrain,i.terrain)||s.push({command:"setTerrain",args:[i.terrain]}),we(l.sky,i.sky)||s.push({command:"setSky",args:[i.sky]}),we(l.projection,i.projection)||s.push({command:"setProjection",args:[i.projection]});let h={},p=[];(function(y,b,T,P){let C;for(C in b=b||{},y=y||{})Object.prototype.hasOwnProperty.call(y,C)&&(Object.prototype.hasOwnProperty.call(b,C)||Be(C,T,P));for(C in b)Object.prototype.hasOwnProperty.call(b,C)&&(Object.prototype.hasOwnProperty.call(y,C)?we(y[C],b[C])||(y[C].type==="geojson"&&b[C].type==="geojson"&&Xe(y,b,C)?Ae(T,{command:"setGeoJSONSourceData",args:[C,b[C].data]}):Ye(C,b,T,P)):be(C,b,T))})(l.sources,i.sources,p,h);let g=[];l.layers&&l.layers.forEach(y=>{"source"in y&&h[y.source]?s.push({command:"removeLayer",args:[y.id]}):g.push(y)}),s=s.concat(p),function(y,b,T){b=b||[];let P=(y=y||[]).map(Et),C=b.map(Et),D=y.reduce(yt,{}),F=b.reduce(yt,{}),N=P.slice(),j=Object.create(null),G,Y,ie,me,se;for(let B=0,K=0;B<P.length;B++)G=P[B],Object.prototype.hasOwnProperty.call(F,G)?K++:(Ae(T,{command:"removeLayer",args:[G]}),N.splice(N.indexOf(G,K),1));for(let B=0,K=0;B<C.length;B++)G=C[C.length-1-B],N[N.length-1-B]!==G&&(Object.prototype.hasOwnProperty.call(D,G)?(Ae(T,{command:"removeLayer",args:[G]}),N.splice(N.lastIndexOf(G,N.length-K),1)):K++,me=N[N.length-B],Ae(T,{command:"addLayer",args:[F[G],me]}),N.splice(N.length-B,0,G),j[G]=!0);for(let B=0;B<C.length;B++)if(G=C[B],Y=D[G],ie=F[G],!j[G]&&!we(Y,ie))if(we(Y.source,ie.source)&&we(Y["source-layer"],ie["source-layer"])&&we(Y.type,ie.type)){for(se in ht(Y.layout,ie.layout,T,G,null,"setLayoutProperty"),ht(Y.paint,ie.paint,T,G,null,"setPaintProperty"),we(Y.filter,ie.filter)||Ae(T,{command:"setFilter",args:[G,ie.filter]}),we(Y.minzoom,ie.minzoom)&&we(Y.maxzoom,ie.maxzoom)||Ae(T,{command:"setLayerZoomRange",args:[G,ie.minzoom,ie.maxzoom]}),Y)Object.prototype.hasOwnProperty.call(Y,se)&&se!=="layout"&&se!=="paint"&&se!=="filter"&&se!=="metadata"&&se!=="minzoom"&&se!=="maxzoom"&&(se.indexOf("paint.")===0?ht(Y[se],ie[se],T,G,se.slice(6),"setPaintProperty"):we(Y[se],ie[se])||Ae(T,{command:"setLayerProperty",args:[G,se,ie[se]]}));for(se in ie)Object.prototype.hasOwnProperty.call(ie,se)&&!Object.prototype.hasOwnProperty.call(Y,se)&&se!=="layout"&&se!=="paint"&&se!=="filter"&&se!=="metadata"&&se!=="minzoom"&&se!=="maxzoom"&&(se.indexOf("paint.")===0?ht(Y[se],ie[se],T,G,se.slice(6),"setPaintProperty"):we(Y[se],ie[se])||Ae(T,{command:"setLayerProperty",args:[G,se,ie[se]]}))}else Ae(T,{command:"removeLayer",args:[G]}),me=N[N.lastIndexOf(G)+1],Ae(T,{command:"addLayer",args:[ie,me]})}(g,i.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[i]}]}return s},c.bD=function(l){let i=[],s=l.id;return s===void 0&&i.push({message:`layers.${s}: missing required property "id"`}),l.render===void 0&&i.push({message:`layers.${s}: missing required method "render"`}),l.renderingMode&&l.renderingMode!=="2d"&&l.renderingMode!=="3d"&&i.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),i},c.bE=function l(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(let h=0;h<i.length;h++)if(!l(i[h],s[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&s!==null){if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(let h in i)if(!l(i[h],s[h]))return!1;return!0}return i===s},c.bF=cs,c.bG=Uu,c.bH=class extends hr{constructor(l,i){super(l,i),this.current=0}set(l){this.current!==l&&(this.current=l,this.gl.uniform1i(this.location,l))}},c.bI=L_,c.bJ=class extends hr{constructor(l,i){super(l,i),this.current=RS}set(l){if(l[12]!==this.current[12]||l[0]!==this.current[0])return this.current=l,void this.gl.uniformMatrix4fv(this.location,!1,l);for(let i=1;i<16;i++)if(l[i]!==this.current[i]){this.current=l,this.gl.uniformMatrix4fv(this.location,!1,l);break}}},c.bK=D_,c.bL=class extends hr{constructor(l,i){super(l,i),this.current=[0,0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]&&l[2]===this.current[2]||(this.current=l,this.gl.uniform3f(this.location,l[0],l[1],l[2]))}},c.bM=class extends hr{constructor(l,i){super(l,i),this.current=[0,0]}set(l){l[0]===this.current[0]&&l[1]===this.current[1]||(this.current=l,this.gl.uniform2f(this.location,l[0],l[1]))}},c.bN=nt,c.bO=function(l,i){var s=Math.sin(i),h=Math.cos(i);return l[0]=h,l[1]=s,l[2]=0,l[3]=-s,l[4]=h,l[5]=0,l[6]=0,l[7]=0,l[8]=1,l},c.bP=function(l,i,s){var h=i[0],p=i[1],g=i[2];return l[0]=h*s[0]+p*s[3]+g*s[6],l[1]=h*s[1]+p*s[4]+g*s[7],l[2]=h*s[2]+p*s[5]+g*s[8],l},c.bQ=function(l,i,s,h,p,g,y){var b=1/(i-s),T=1/(h-p),P=1/(g-y);return l[0]=-2*b,l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=-2*T,l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=2*P,l[11]=0,l[12]=(i+s)*b,l[13]=(p+h)*T,l[14]=(y+g)*P,l[15]=1,l},c.bR=class extends hr{constructor(l,i){super(l,i),this.current=new Array}set(l){if(l!=this.current){this.current=l;let i=new Float32Array(4*l.length);for(let s=0;s<l.length;s++)i[4*s]=l[s].r,i[4*s+1]=l[s].g,i[4*s+2]=l[s].b,i[4*s+3]=l[s].a;this.gl.uniform4fv(this.location,i)}}},c.bS=class extends hr{constructor(l,i){super(l,i),this.current=new Array}set(l){if(l!=this.current){this.current=l;let i=new Float32Array(l);this.gl.uniform1fv(this.location,i)}}},c.bT=class extends v{},c.bU=Ipe,c.bV=class extends S{},c.bW=BS,c.bX=function(l){return l<=1?1:Math.pow(2,Math.ceil(Math.log(l)/Math.LN2))},c.bY=kL,c.bZ=function(l,i,s){var h=i[0],p=i[1],g=i[2],y=s[3]*h+s[7]*p+s[11]*g+s[15];return l[0]=(s[0]*h+s[4]*p+s[8]*g+s[12])/(y=y||1),l[1]=(s[1]*h+s[5]*p+s[9]*g+s[13])/y,l[2]=(s[2]*h+s[6]*p+s[10]*g+s[14])/y,l},c.b_=class extends Ps{},c.ba=xm,c.bb=gf,c.bc=nl,c.bd=ia,c.be=sn,c.bf=function(l,i,s,h,p){return nl(h,p,mi((l-i)/(s-i),0,1))},c.bg=_a,c.bh=function(){return new Float64Array(3)},c.bi=function(l,i,s,h){return l[0]=i[0]+s[0]*h,l[1]=i[1]+s[1]*h,l[2]=i[2]+s[2]*h,l},c.bj=mn,c.bk=function(){return new Float64Array(4)},c.bl=function(l,i,s,h){var p=[],g=[];return p[0]=i[0]-s[0],p[1]=i[1]-s[1],p[2]=i[2]-s[2],g[0]=p[0]*Math.cos(h)-p[1]*Math.sin(h),g[1]=p[0]*Math.sin(h)+p[1]*Math.cos(h),g[2]=p[2],l[0]=g[0]+s[0],l[1]=g[1]+s[1],l[2]=g[2]+s[2],l},c.bm=function(l,i,s,h){var p=[],g=[];return p[0]=i[0]-s[0],p[1]=i[1]-s[1],p[2]=i[2]-s[2],g[0]=p[0],g[1]=p[1]*Math.cos(h)-p[2]*Math.sin(h),g[2]=p[1]*Math.sin(h)+p[2]*Math.cos(h),l[0]=g[0]+s[0],l[1]=g[1]+s[1],l[2]=g[2]+s[2],l},c.bn=function(l,i,s,h){var p=[],g=[];return p[0]=i[0]-s[0],p[1]=i[1]-s[1],p[2]=i[2]-s[2],g[0]=p[2]*Math.sin(h)+p[0]*Math.cos(h),g[1]=p[1],g[2]=p[2]*Math.cos(h)-p[0]*Math.sin(h),l[0]=g[0]+s[0],l[1]=g[1]+s[1],l[2]=g[2]+s[2],l},c.bo=St,c.bp=function(l,i,s){var h=Math.sin(s),p=Math.cos(s),g=i[0],y=i[1],b=i[2],T=i[3],P=i[8],C=i[9],D=i[10],F=i[11];return i!==l&&(l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15]),l[0]=g*p-P*h,l[1]=y*p-C*h,l[2]=b*p-D*h,l[3]=T*p-F*h,l[8]=g*h+P*p,l[9]=y*h+C*p,l[10]=b*h+D*p,l[11]=T*h+F*p,l},c.bq=function(l,i){let s=_a(l,360),h=_a(i,360),p=h-s,g=h>s?p-360:p+360;return Math.abs(p)<Math.abs(g)?p:g},c.br=function(l){return l[0]=0,l[1]=0,l[2]=0,l},c.bs=function(l,i,s,h){let p=Math.sqrt(l*l+i*i),g=Math.sqrt(s*s+h*h);l/=p,i/=p,s/=g,h/=g;let y=Math.acos(l*s+i*h);return-i*s+l*h>0?y:-y},c.bt=function(l,i){return l[0]*i[0]+l[1]*i[1]+l[2]*i[2]+l[3]},c.bu=uT,c.bv=function(l,i){let s=_a(l,2*Math.PI),h=_a(i,2*Math.PI);return Math.min(Math.abs(s-h),Math.abs(s-h+2*Math.PI),Math.abs(s-h-2*Math.PI))},c.bw=function(){let l={},i=X.$version;for(let s in X.$root){let h=X.$root[s];if(h.required){let p=null;p=s==="version"?i:h.type==="array"?[]:{},p!=null&&(l[s]=p)}}return l},c.bx=rm,c.by=nn,c.bz=function(l){l=l.slice();let i=Object.create(null);for(let s=0;s<l.length;s++)i[l[s].id]=l[s];for(let s=0;s<l.length;s++)"ref"in l[s]&&(l[s]=ye(l[s],i[l[s].ref]));return l},c.c=Xa,c.c0=function(l,i){return l[0]===i[0]&&l[1]===i[1]&&l[2]===i[2]&&l[3]===i[3]&&l[4]===i[4]&&l[5]===i[5]&&l[6]===i[6]&&l[7]===i[7]&&l[8]===i[8]&&l[9]===i[9]&&l[10]===i[10]&&l[11]===i[11]&&l[12]===i[12]&&l[13]===i[13]&&l[14]===i[14]&&l[15]===i[15]},c.c1=function(l,i){var s=l[0],h=l[1],p=l[2],g=l[3],y=l[4],b=l[5],T=l[6],P=l[7],C=l[8],D=l[9],F=l[10],N=l[11],j=l[12],G=l[13],Y=l[14],ie=l[15],me=i[0],se=i[1],B=i[2],K=i[3],ue=i[4],Ee=i[5],Ne=i[6],Ce=i[7],De=i[8],Ge=i[9],je=i[10],Ze=i[11],ze=i[12],it=i[13],ft=i[14],ct=i[15];return Math.abs(s-me)<=_e*Math.max(1,Math.abs(s),Math.abs(me))&&Math.abs(h-se)<=_e*Math.max(1,Math.abs(h),Math.abs(se))&&Math.abs(p-B)<=_e*Math.max(1,Math.abs(p),Math.abs(B))&&Math.abs(g-K)<=_e*Math.max(1,Math.abs(g),Math.abs(K))&&Math.abs(y-ue)<=_e*Math.max(1,Math.abs(y),Math.abs(ue))&&Math.abs(b-Ee)<=_e*Math.max(1,Math.abs(b),Math.abs(Ee))&&Math.abs(T-Ne)<=_e*Math.max(1,Math.abs(T),Math.abs(Ne))&&Math.abs(P-Ce)<=_e*Math.max(1,Math.abs(P),Math.abs(Ce))&&Math.abs(C-De)<=_e*Math.max(1,Math.abs(C),Math.abs(De))&&Math.abs(D-Ge)<=_e*Math.max(1,Math.abs(D),Math.abs(Ge))&&Math.abs(F-je)<=_e*Math.max(1,Math.abs(F),Math.abs(je))&&Math.abs(N-Ze)<=_e*Math.max(1,Math.abs(N),Math.abs(Ze))&&Math.abs(j-ze)<=_e*Math.max(1,Math.abs(j),Math.abs(ze))&&Math.abs(G-it)<=_e*Math.max(1,Math.abs(G),Math.abs(it))&&Math.abs(Y-ft)<=_e*Math.max(1,Math.abs(Y),Math.abs(ft))&&Math.abs(ie-ct)<=_e*Math.max(1,Math.abs(ie),Math.abs(ct))},c.c2=function(l,i){return l[0]=i[0],l[1]=i[1],l[2]=i[2],l[3]=i[3],l[4]=i[4],l[5]=i[5],l[6]=i[6],l[7]=i[7],l[8]=i[8],l[9]=i[9],l[10]=i[10],l[11]=i[11],l[12]=i[12],l[13]=i[13],l[14]=i[14],l[15]=i[15],l},c.c3=l=>l.type==="symbol",c.c4=l=>l.type==="circle",c.c5=l=>l.type==="heatmap",c.c6=l=>l.type==="line",c.c7=l=>l.type==="fill",c.c8=l=>l.type==="fill-extrusion",c.c9=l=>l.type==="hillshade",c.cA=VS,c.cB=KS,c.cC=wm,c.cD=QS,c.cE=class{constructor(l){this._marks={start:[l.url,"start"].join("#"),end:[l.url,"end"].join("#"),measure:l.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let l=performance.getEntriesByName(this._marks.measure);return l.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),l=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),l}},c.cF=function(l,i,s,h,p){return a(this,void 0,void 0,function*(){if(ae())try{return yield Vu(l,i,s,h,p)}catch(g){}return function(g,y,b,T,P){let C=g.width,D=g.height;_n&&ba||(_n=new OffscreenCanvas(C,D),ba=_n.getContext("2d",{willReadFrequently:!0})),_n.width=C,_n.height=D,ba.drawImage(g,0,0,C,D);let F=ba.getImageData(y,b,T,P);return ba.clearRect(0,0,C,D),F.data}(l,i,s,h,p)})},c.cG=Oz,c.cH=_,c.cI=M,c.cJ=XL,c.cK=uz,c.cL=Jh,c.cM=ro,c.ca=l=>l.type==="raster",c.cb=l=>l.type==="background",c.cc=l=>l.type==="custom",c.cd=Ph,c.ce=function(l,i,s){let h=ju(i.x-s.x,i.y-s.y),p=ju(l.x-s.x,l.y-s.y);var g,y;return Ya(Math.atan2(h[0]*p[1]-h[1]*p[0],(g=h)[0]*(y=p)[0]+g[1]*y[1]))},c.cf=na,c.cg=function(l,i){return sl[i]&&(l instanceof MouseEvent||l instanceof WheelEvent)},c.ch=function(l,i){return ol[i]&&"touches"in l},c.ci=function(l){return ol[l]||sl[l]},c.cj=function(l,i,s){var h=i[0],p=i[1];return l[0]=s[0]*h+s[4]*p+s[12],l[1]=s[1]*h+s[5]*p+s[13],l},c.ck=function(l,i){let{x:s,y:h}=Pm.fromLngLat(i);return!(l<0||l>25||h<0||h>=1||s<0||s>=1)},c.cl=function(l,i){return l[0]=i[0],l[1]=0,l[2]=0,l[3]=0,l[4]=0,l[5]=i[1],l[6]=0,l[7]=0,l[8]=0,l[9]=0,l[10]=i[2],l[11]=0,l[12]=0,l[13]=0,l[14]=0,l[15]=1,l},c.cm=class extends Sc{},c.cn=ame,c.cp=function(l){return l.message===ll},c.cq=Ln,c.cr=function(l,i){Ja.REGISTERED_PROTOCOLS[l]=i},c.cs=function(l){delete Ja.REGISTERED_PROTOCOLS[l]},c.ct=function(l,i){let s={};for(let p=0;p<l.length;p++){let g=i&&i[l[p].id]||x_(l[p]);i&&(i[l[p].id]=g);let y=s[g];y||(y=s[g]=[]),y.push(l[p])}let h=[];for(let p in s)h.push(s[p]);return h},c.cu=rt,c.cv=kz,c.cw=Lz,c.cx=hz,c.cy=function(l){l.bucket.createArrays(),l.bucket.tilePixelRatio=er/(512*l.bucket.overscaling),l.bucket.compareText={},l.bucket.iconsNeedLinear=!1;let i=l.bucket.layers[0],s=i.layout,h=i._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new cr(l.bucket.zoom+1),l.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new cr(l.bucket.zoom+1),l.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new cr(18))};if(l.bucket.textSizeData.kind==="composite"){let{minZoom:P,maxZoom:C}=l.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new cr(P),l.canonical),h["text-size"].possiblyEvaluate(new cr(C),l.canonical)]}if(l.bucket.iconSizeData.kind==="composite"){let{minZoom:P,maxZoom:C}=l.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new cr(P),l.canonical),h["icon-size"].possiblyEvaluate(new cr(C),l.canonical)]}let g=s.get("text-line-height")*ti,y=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",b=s.get("text-keep-upright"),T=s.get("text-size");for(let P of l.bucket.features){let C=s.get("text-font").evaluate(P,{},l.canonical).join(","),D=T.evaluate(P,{},l.canonical),F=p.layoutTextSize.evaluate(P,{},l.canonical),N=p.layoutIconSize.evaluate(P,{},l.canonical),j={horizontal:{},vertical:void 0},G=P.text,Y,ie=[0,0];if(G){let B=G.toString(),K=s.get("text-letter-spacing").evaluate(P,{},l.canonical)*ti,ue=qS(B)?K:0,Ee=s.get("text-anchor").evaluate(P,{},l.canonical),Ne=Wz(i,P,l.canonical);if(!Ne){let je=s.get("text-radial-offset").evaluate(P,{},l.canonical);ie=je?Hz(Ee,[je*ti,fT]):s.get("text-offset").evaluate(P,{},l.canonical).map(Ze=>Ze*ti)}let Ce=y?"center":s.get("text-justify").evaluate(P,{},l.canonical),De=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(P,{},l.canonical)*ti:1/0,Ge=()=>{l.bucket.allowVerticalPlacement&&cf(B)&&(j.vertical=G_(G,l.glyphMap,l.glyphPositions,l.imagePositions,C,De,g,Ee,"left",ue,ie,c.al.vertical,!0,F,D))};if(!y&&Ne){let je=new Set;if(Ce==="auto")for(let ze=0;ze<Ne.values.length;ze+=2)je.add(dT(Ne.values[ze]));else je.add(Ce);let Ze=!1;for(let ze of je)if(!j.horizontal[ze])if(Ze)j.horizontal[ze]=j.horizontal[0];else{let it=G_(G,l.glyphMap,l.glyphPositions,l.imagePositions,C,De,g,"center",ze,ue,ie,c.al.horizontal,!1,F,D);it&&(j.horizontal[ze]=it,Ze=it.positionedLines.length===1)}Ge()}else{Ce==="auto"&&(Ce=dT(Ee));let je=G_(G,l.glyphMap,l.glyphPositions,l.imagePositions,C,De,g,Ee,Ce,ue,ie,c.al.horizontal,!1,F,D);je&&(j.horizontal[Ce]=je),Ge(),cf(B)&&y&&b&&(j.vertical=G_(G,l.glyphMap,l.glyphPositions,l.imagePositions,C,De,g,Ee,Ce,ue,ie,c.al.vertical,!1,F,D))}}let me=!1;if(P.icon&&P.icon.name){let B=l.imageMap[P.icon.name];B&&(Y=Npe(l.imagePositions[P.icon.name],s.get("icon-offset").evaluate(P,{},l.canonical),s.get("icon-anchor").evaluate(P,{},l.canonical)),me=!!B.sdf,l.bucket.sdfIcons===void 0?l.bucket.sdfIcons=me:l.bucket.sdfIcons!==me&&Fi("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(B.pixelRatio!==l.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(l.bucket.iconsNeedLinear=!0))}let se=Yz(j.horizontal)||j.vertical;l.bucket.iconsInText=!!se&&se.iconsInText,(se||Y)&&ime(l.bucket,P,j,Y,l.imageMap,p,F,N,ie,me,l.canonical,l.subdivisionGranularity)}l.showCollisionBoxes&&l.bucket.generateCollisionDebugBuffers()},c.cz=YS,c.d=xe,c.e=vn,c.f=l=>a(void 0,void 0,void 0,function*(){if(l.byteLength===0)return createImageBitmap(new ImageData(1,1));let i=new Blob([new Uint8Array(l)],{type:"image/png"});try{return createImageBitmap(i)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),c.g=Co,c.h=l=>new Promise((i,s)=>{let h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=$u})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let p=new Blob([new Uint8Array(l)],{type:"image/png"});h.src=l.byteLength?URL.createObjectURL(p):$u}),c.i=xa,c.j=(l,i)=>wa(vn(l,{type:"json"}),i),c.k=le,c.l=J,c.m=wa,c.n=(l,i)=>wa(vn(l,{type:"arrayBuffer"}),i),c.o=function(l){return new QS(l).readFields(Ppe,[])},c.p=cz,c.q=mm,c.r=jr,c.s=hs,c.t=of,c.u=Lt,c.v=X,c.w=Fi,c.x=tm,c.y=Al,c.z=function([l,i,s]){return i+=90,i*=Math.PI/180,s*=Math.PI/180,{x:l*Math.cos(i)*Math.sin(s),y:l*Math.sin(i)*Math.sin(s),z:l*Math.cos(s)}}}),n("worker",["./shared"],function(c){"use strict";class a{constructor(Z){this.keyCache={},Z&&this.replace(Z)}replace(Z){this._layerConfigs={},this._layers={},this.update(Z,[])}update(Z,H){for(let le of Z){this._layerConfigs[le.id]=le;let ve=this._layers[le.id]=c.bA(le);ve._featureFilter=c.a7(ve.filter),this.keyCache[le.id]&&delete this.keyCache[le.id]}for(let le of H)delete this.keyCache[le],delete this._layerConfigs[le],delete this._layers[le];this.familiesBySource={};let J=c.ct(Object.values(this._layerConfigs),this.keyCache);for(let le of J){let ve=le.map(be=>this._layers[be.id]),X=ve[0];if(X.visibility==="none")continue;let qe=X.source||"",ye=this.familiesBySource[qe];ye||(ye=this.familiesBySource[qe]={});let we=X.sourceLayer||"_geojsonTileLayer",Ae=ye[we];Ae||(Ae=ye[we]=[]),Ae.push(ve)}}}class _{constructor(Z){let H={},J=[];for(let qe in Z){let ye=Z[qe],we=H[qe]={};for(let Ae in ye){let be=ye[+Ae];if(!be||be.bitmap.width===0||be.bitmap.height===0)continue;let Be={x:0,y:0,w:be.bitmap.width+2,h:be.bitmap.height+2};J.push(Be),we[Ae]={rect:Be,metrics:be.metrics}}}let{w:le,h:ve}=c.p(J),X=new c.q({width:le||1,height:ve||1});for(let qe in Z){let ye=Z[qe];for(let we in ye){let Ae=ye[+we];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;let be=H[qe][we].rect;c.q.copy(Ae.bitmap,X,{x:0,y:0},{x:be.x+1,y:be.y+1},Ae.bitmap)}}this.image=X,this.positions=H}}c.cu("GlyphAtlas",_);class w{constructor(Z){this.tileID=new c.Y(Z.tileID.overscaledZ,Z.tileID.wrap,Z.tileID.canonical.z,Z.tileID.canonical.x,Z.tileID.canonical.y),this.uid=Z.uid,this.zoom=Z.zoom,this.pixelRatio=Z.pixelRatio,this.tileSize=Z.tileSize,this.source=Z.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Z.showCollisionBoxes,this.collectResourceTiming=!!Z.collectResourceTiming,this.returnDependencies=!!Z.returnDependencies,this.promoteId=Z.promoteId,this.inFlightDependencies=[]}parse(Z,H,J,le,ve){return c._(this,void 0,void 0,function*(){this.status="parsing",this.data=Z,this.collisionBoxArray=new c.a5;let X=new c.cv(Object.keys(Z.layers).sort()),qe=new c.cw(this.tileID,this.promoteId);qe.bucketLayerIDs=[];let ye={},we={featureIndex:qe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:J,subdivisionGranularity:ve},Ae=H.familiesBySource[this.source];for(let gt in Ae){let Fe=Z.layers[gt];if(!Fe)continue;Fe.version===1&&c.w(`Vector tile source "${this.source}" layer "${gt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let pt=X.encode(gt),qt=[];for(let Ir=0;Ir<Fe.length;Ir++){let Er=Fe.feature(Ir),an=qe.getId(Er,gt);qt.push({feature:Er,id:an,index:Ir,sourceLayerIndex:pt})}for(let Ir of Ae[gt]){let Er=Ir[0];Er.source!==this.source&&c.w(`layer.source = ${Er.source} does not equal this.source = ${this.source}`),Er.minzoom&&this.zoom<Math.floor(Er.minzoom)||Er.maxzoom&&this.zoom>=Er.maxzoom||Er.visibility!=="none"&&(q(Ir,this.zoom,J),(ye[Er.id]=Er.createBucket({index:qe.bucketLayerIDs.length,layers:Ir,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pt,sourceID:this.source})).populate(qt,we,this.tileID.canonical),qe.bucketLayerIDs.push(Ir.map(an=>an.id)))}}let be=c.bF(we.glyphDependencies,gt=>Object.keys(gt).map(Number));this.inFlightDependencies.forEach(gt=>gt==null?void 0:gt.abort()),this.inFlightDependencies=[];let Be=Promise.resolve({});if(Object.keys(be).length){let gt=new AbortController;this.inFlightDependencies.push(gt),Be=le.sendAsync({type:"GG",data:{stacks:be,source:this.source,tileID:this.tileID,type:"glyphs"}},gt)}let Ye=Object.keys(we.iconDependencies),Xe=Promise.resolve({});if(Ye.length){let gt=new AbortController;this.inFlightDependencies.push(gt),Xe=le.sendAsync({type:"GI",data:{icons:Ye,source:this.source,tileID:this.tileID,type:"icons"}},gt)}let ht=Object.keys(we.patternDependencies),Et=Promise.resolve({});if(ht.length){let gt=new AbortController;this.inFlightDependencies.push(gt),Et=le.sendAsync({type:"GI",data:{icons:ht,source:this.source,tileID:this.tileID,type:"patterns"}},gt)}let[yt,ke,Yt]=yield Promise.all([Be,Xe,Et]),Bt=new _(yt),Zt=new c.cx(ke,Yt);for(let gt in ye){let Fe=ye[gt];Fe instanceof c.a6?(q(Fe.layers,this.zoom,J),c.cy({bucket:Fe,glyphMap:yt,glyphPositions:Bt.positions,imageMap:ke,imagePositions:Zt.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:we.subdivisionGranularity})):Fe.hasPattern&&(Fe instanceof c.cz||Fe instanceof c.cA||Fe instanceof c.cB)&&(q(Fe.layers,this.zoom,J),Fe.addFeatures(we,this.tileID.canonical,Zt.patternPositions))}return this.status="done",{buckets:Object.values(ye).filter(gt=>!gt.isEmpty()),featureIndex:qe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Bt.image,imageAtlas:Zt,glyphMap:this.returnDependencies?yt:null,iconMap:this.returnDependencies?ke:null,glyphPositions:this.returnDependencies?Bt.positions:null}})}}function q(xe,Z,H){let J=new c.C(Z);for(let le of xe)le.recalculate(J,H)}class M{constructor(Z,H,J){this.actor=Z,this.layerIndex=H,this.availableImages=J,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(Z,H){return c._(this,void 0,void 0,function*(){let J=yield c.n(Z.request,H);try{return{vectorTile:new c.cC.VectorTile(new c.cD(J.data)),rawData:J.data,cacheControl:J.cacheControl,expires:J.expires}}catch(le){let ve=new Uint8Array(J.data),X=`Unable to parse the tile at ${Z.request.url}, `;throw X+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${le.message}`,new Error(X)}})}loadTile(Z){return c._(this,void 0,void 0,function*(){let H=Z.uid,J=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new c.cE(Z.request),le=new w(Z);this.loading[H]=le;let ve=new AbortController;le.abort=ve;try{let X=yield this.loadVectorTile(Z,ve);if(delete this.loading[H],!X)return null;let qe=X.rawData,ye={};X.expires&&(ye.expires=X.expires),X.cacheControl&&(ye.cacheControl=X.cacheControl);let we={};if(J){let be=J.finish();be&&(we.resourceTiming=JSON.parse(JSON.stringify(be)))}le.vectorTile=X.vectorTile;let Ae=le.parse(X.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity);this.loaded[H]=le,this.fetching[H]={rawTileData:qe,cacheControl:ye,resourceTiming:we};try{let be=yield Ae;return c.e({rawTileData:qe.slice(0)},be,ye,we)}finally{delete this.fetching[H]}}catch(X){throw delete this.loading[H],le.status="done",this.loaded[H]=le,X}})}reloadTile(Z){return c._(this,void 0,void 0,function*(){let H=Z.uid;if(!this.loaded||!this.loaded[H])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let J=this.loaded[H];if(J.showCollisionBoxes=Z.showCollisionBoxes,J.status==="parsing"){let le=yield J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity),ve;if(this.fetching[H]){let{rawTileData:X,cacheControl:qe,resourceTiming:ye}=this.fetching[H];delete this.fetching[H],ve=c.e({rawTileData:X.slice(0)},le,qe,ye)}else ve=le;return ve}if(J.status==="done"&&J.vectorTile)return J.parse(J.vectorTile,this.layerIndex,this.availableImages,this.actor,Z.subdivisionGranularity)})}abortTile(Z){return c._(this,void 0,void 0,function*(){let H=this.loading,J=Z.uid;H&&H[J]&&H[J].abort&&(H[J].abort.abort(),delete H[J])})}removeTile(Z){return c._(this,void 0,void 0,function*(){this.loaded&&this.loaded[Z.uid]&&delete this.loaded[Z.uid]})}}class O{constructor(){this.loaded={}}loadTile(Z){return c._(this,void 0,void 0,function*(){let{uid:H,encoding:J,rawImageData:le,redFactor:ve,greenFactor:X,blueFactor:qe,baseShift:ye}=Z,we=le.width+2,Ae=le.height+2,be=c.b(le)?new c.R({width:we,height:Ae},yield c.cF(le,-1,-1,we,Ae)):le,Be=new c.cG(H,be,J,ve,X,qe,ye);return this.loaded=this.loaded||{},this.loaded[H]=Be,Be})}removeTile(Z){let H=this.loaded,J=Z.uid;H&&H[J]&&delete H[J]}}var k,$,fe=function(){if($)return k;function xe(H,J){if(H.length!==0){Z(H[0],J);for(var le=1;le<H.length;le++)Z(H[le],!J)}}function Z(H,J){for(var le=0,ve=0,X=0,qe=H.length,ye=qe-1;X<qe;ye=X++){var we=(H[X][0]-H[ye][0])*(H[ye][1]+H[X][1]),Ae=le+we;ve+=Math.abs(le)>=Math.abs(we)?le-Ae+we:we-Ae+le,le=Ae}le+ve>=0!=!!J&&H.reverse()}return $=1,k=function H(J,le){var ve,X=J&&J.type;if(X==="FeatureCollection")for(ve=0;ve<J.features.length;ve++)H(J.features[ve],le);else if(X==="GeometryCollection")for(ve=0;ve<J.geometries.length;ve++)H(J.geometries[ve],le);else if(X==="Feature")H(J.geometry,le);else if(X==="Polygon")xe(J.coordinates,le);else if(X==="MultiPolygon")for(ve=0;ve<J.coordinates.length;ve++)xe(J.coordinates[ve],le);return J}}(),Pe=c.cH(fe);let Se=c.cC.VectorTileFeature.prototype.toGeoJSON;class ne{constructor(Z){this._feature=Z,this.extent=c.Z,this.type=Z.type,this.properties=Z.tags,"id"in Z&&!isNaN(Z.id)&&(this.id=parseInt(Z.id,10))}loadGeometry(){if(this._feature.type===1){let Z=[];for(let H of this._feature.geometry)Z.push([new c.P(H[0],H[1])]);return Z}{let Z=[];for(let H of this._feature.geometry){let J=[];for(let le of H)J.push(new c.P(le[0],le[1]));Z.push(J)}return Z}}toGeoJSON(Z,H,J){return Se.call(this,Z,H,J)}}class re{constructor(Z){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=c.Z,this.length=Z.length,this._features=Z}feature(Z){return new ne(this._features[Z])}}var ae,_e,Te,nt={exports:{}},Ve=function(){if(Te)return nt.exports;Te=1;var xe=c.cK(),Z=function(){if(_e)return ae;_e=1;var Ae=c.cI(),be=c.cJ().VectorTileFeature;function Be(Xe,ht){this.options=ht||{},this.features=Xe,this.length=Xe.length}function Ye(Xe,ht){this.id=typeof Xe.id=="number"?Xe.id:void 0,this.type=Xe.type,this.rawGeometry=Xe.type===1?[Xe.geometry]:Xe.geometry,this.properties=Xe.tags,this.extent=ht||4096}return ae=Be,Be.prototype.feature=function(Xe){return new Ye(this.features[Xe],this.options.extent)},Ye.prototype.loadGeometry=function(){var Xe=this.rawGeometry;this.geometry=[];for(var ht=0;ht<Xe.length;ht++){for(var Et=Xe[ht],yt=[],ke=0;ke<Et.length;ke++)yt.push(new Ae(Et[ke][0],Et[ke][1]));this.geometry.push(yt)}return this.geometry},Ye.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Xe=this.geometry,ht=1/0,Et=-1/0,yt=1/0,ke=-1/0,Yt=0;Yt<Xe.length;Yt++)for(var Bt=Xe[Yt],Zt=0;Zt<Bt.length;Zt++){var gt=Bt[Zt];ht=Math.min(ht,gt.x),Et=Math.max(Et,gt.x),yt=Math.min(yt,gt.y),ke=Math.max(ke,gt.y)}return[ht,yt,Et,ke]},Ye.prototype.toGeoJSON=be.prototype.toGeoJSON,ae}();function H(Ae){var be=new xe;return function(Be,Ye){for(var Xe in Be.layers)Ye.writeMessage(3,J,Be.layers[Xe])}(Ae,be),be.finish()}function J(Ae,be){var Be;be.writeVarintField(15,Ae.version||1),be.writeStringField(1,Ae.name||""),be.writeVarintField(5,Ae.extent||4096);var Ye={keys:[],values:[],keycache:{},valuecache:{}};for(Be=0;Be<Ae.length;Be++)Ye.feature=Ae.feature(Be),be.writeMessage(2,le,Ye);var Xe=Ye.keys;for(Be=0;Be<Xe.length;Be++)be.writeStringField(3,Xe[Be]);var ht=Ye.values;for(Be=0;Be<ht.length;Be++)be.writeMessage(4,we,ht[Be])}function le(Ae,be){var Be=Ae.feature;Be.id!==void 0&&be.writeVarintField(1,Be.id),be.writeMessage(2,ve,Ae),be.writeVarintField(3,Be.type),be.writeMessage(4,ye,Be)}function ve(Ae,be){var Be=Ae.feature,Ye=Ae.keys,Xe=Ae.values,ht=Ae.keycache,Et=Ae.valuecache;for(var yt in Be.properties){var ke=Be.properties[yt],Yt=ht[yt];if(ke!==null){Yt===void 0&&(Ye.push(yt),ht[yt]=Yt=Ye.length-1),be.writeVarint(Yt);var Bt=typeof ke;Bt!=="string"&&Bt!=="boolean"&&Bt!=="number"&&(ke=JSON.stringify(ke));var Zt=Bt+":"+ke,gt=Et[Zt];gt===void 0&&(Xe.push(ke),Et[Zt]=gt=Xe.length-1),be.writeVarint(gt)}}}function X(Ae,be){return(be<<3)+(7&Ae)}function qe(Ae){return Ae<<1^Ae>>31}function ye(Ae,be){for(var Be=Ae.loadGeometry(),Ye=Ae.type,Xe=0,ht=0,Et=Be.length,yt=0;yt<Et;yt++){var ke=Be[yt],Yt=1;Ye===1&&(Yt=ke.length),be.writeVarint(X(1,Yt));for(var Bt=Ye===3?ke.length-1:ke.length,Zt=0;Zt<Bt;Zt++){Zt===1&&Ye!==1&&be.writeVarint(X(2,Bt-1));var gt=ke[Zt].x-Xe,Fe=ke[Zt].y-ht;be.writeVarint(qe(gt)),be.writeVarint(qe(Fe)),Xe+=gt,ht+=Fe}Ye===3&&be.writeVarint(X(7,1))}}function we(Ae,be){var Be=typeof Ae;Be==="string"?be.writeStringField(1,Ae):Be==="boolean"?be.writeBooleanField(7,Ae):Be==="number"&&(Ae%1!=0?be.writeDoubleField(3,Ae):Ae<0?be.writeSVarintField(6,Ae):be.writeVarintField(5,Ae))}return nt.exports=H,nt.exports.fromVectorTileJs=H,nt.exports.fromGeojsonVt=function(Ae,be){be=be||{};var Be={};for(var Ye in Ae)Be[Ye]=new Z(Ae[Ye].features,be),Be[Ye].name=Ye,Be[Ye].version=be.version,Be[Ye].extent=be.extent;return H({layers:Be})},nt.exports.GeoJSONWrapper=Z,nt.exports}(),ut=c.cH(Ve);let St={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:xe=>xe},xt=Math.fround||(Jr=new Float32Array(1),xe=>(Jr[0]=+xe,Jr[0]));var Jr;let mn=3,qi=5,Nu=6;class il{constructor(Z){this.options=Object.assign(Object.create(St),Z),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(Z){let{log:H,minZoom:J,maxZoom:le}=this.options;H&&console.time("total time");let ve=`prepare ${Z.length} points`;H&&console.time(ve),this.points=Z;let X=[];for(let ye=0;ye<Z.length;ye++){let we=Z[ye];if(!we.geometry)continue;let[Ae,be]=we.geometry.coordinates,Be=xt(qo(Ae)),Ye=xt(_a(be));X.push(Be,Ye,1/0,ye,-1,1),this.options.reduce&&X.push(0)}let qe=this.trees[le+1]=this._createTree(X);H&&console.timeEnd(ve);for(let ye=le;ye>=J;ye--){let we=+Date.now();qe=this.trees[ye]=this._createTree(this._cluster(qe,ye)),H&&console.log("z%d: %d clusters in %dms",ye,qe.numItems,+Date.now()-we)}return H&&console.timeEnd("total time"),this}getClusters(Z,H){let J=((Z[0]+180)%360+360)%360-180,le=Math.max(-90,Math.min(90,Z[1])),ve=Z[2]===180?180:((Z[2]+180)%360+360)%360-180,X=Math.max(-90,Math.min(90,Z[3]));if(Z[2]-Z[0]>=360)J=-180,ve=180;else if(J>ve){let be=this.getClusters([J,le,180,X],H),Be=this.getClusters([-180,le,ve,X],H);return be.concat(Be)}let qe=this.trees[this._limitZoom(H)],ye=qe.range(qo(J),_a(X),qo(ve),_a(le)),we=qe.data,Ae=[];for(let be of ye){let Be=this.stride*be;Ae.push(we[Be+qi]>1?ju(we,Be,this.clusterProps):this.points[we[Be+mn]])}return Ae}getChildren(Z){let H=this._getOriginId(Z),J=this._getOriginZoom(Z),le="No cluster with the specified id.",ve=this.trees[J];if(!ve)throw new Error(le);let X=ve.data;if(H*this.stride>=X.length)throw new Error(le);let qe=this.options.radius/(this.options.extent*Math.pow(2,J-1)),ye=ve.within(X[H*this.stride],X[H*this.stride+1],qe),we=[];for(let Ae of ye){let be=Ae*this.stride;X[be+4]===Z&&we.push(X[be+qi]>1?ju(X,be,this.clusterProps):this.points[X[be+mn]])}if(we.length===0)throw new Error(le);return we}getLeaves(Z,H,J){let le=[];return this._appendLeaves(le,Z,H=H||10,J=J||0,0),le}getTile(Z,H,J){let le=this.trees[this._limitZoom(Z)],ve=Math.pow(2,Z),{extent:X,radius:qe}=this.options,ye=qe/X,we=(J-ye)/ve,Ae=(J+1+ye)/ve,be={features:[]};return this._addTileFeatures(le.range((H-ye)/ve,we,(H+1+ye)/ve,Ae),le.data,H,J,ve,be),H===0&&this._addTileFeatures(le.range(1-ye/ve,we,1,Ae),le.data,ve,J,ve,be),H===ve-1&&this._addTileFeatures(le.range(0,we,ye/ve,Ae),le.data,-1,J,ve,be),be.features.length?be:null}getClusterExpansionZoom(Z){let H=this._getOriginZoom(Z)-1;for(;H<=this.options.maxZoom;){let J=this.getChildren(Z);if(H++,J.length!==1)break;Z=J[0].properties.cluster_id}return H}_appendLeaves(Z,H,J,le,ve){let X=this.getChildren(H);for(let qe of X){let ye=qe.properties;if(ye&&ye.cluster?ve+ye.point_count<=le?ve+=ye.point_count:ve=this._appendLeaves(Z,ye.cluster_id,J,le,ve):ve<le?ve++:Z.push(qe),Z.length===J)break}return ve}_createTree(Z){let H=new c.aF(Z.length/this.stride|0,this.options.nodeSize,Float32Array);for(let J=0;J<Z.length;J+=this.stride)H.add(Z[J],Z[J+1]);return H.finish(),H.data=Z,H}_addTileFeatures(Z,H,J,le,ve,X){for(let qe of Z){let ye=qe*this.stride,we=H[ye+qi]>1,Ae,be,Be;if(we)Ae=er(H,ye,this.clusterProps),be=H[ye],Be=H[ye+1];else{let ht=this.points[H[ye+mn]];Ae=ht.properties;let[Et,yt]=ht.geometry.coordinates;be=qo(Et),Be=_a(yt)}let Ye={type:1,geometry:[[Math.round(this.options.extent*(be*ve-J)),Math.round(this.options.extent*(Be*ve-le))]],tags:Ae},Xe;Xe=we||this.options.generateId?H[ye+mn]:this.points[H[ye+mn]].id,Xe!==void 0&&(Ye.id=Xe),X.features.push(Ye)}}_limitZoom(Z){return Math.max(this.options.minZoom,Math.min(Math.floor(+Z),this.options.maxZoom+1))}_cluster(Z,H){let{radius:J,extent:le,reduce:ve,minPoints:X}=this.options,qe=J/(le*Math.pow(2,H)),ye=Z.data,we=[],Ae=this.stride;for(let be=0;be<ye.length;be+=Ae){if(ye[be+2]<=H)continue;ye[be+2]=H;let Be=ye[be],Ye=ye[be+1],Xe=Z.within(ye[be],ye[be+1],qe),ht=ye[be+qi],Et=ht;for(let yt of Xe){let ke=yt*Ae;ye[ke+2]>H&&(Et+=ye[ke+qi])}if(Et>ht&&Et>=X){let yt,ke=Be*ht,Yt=Ye*ht,Bt=-1,Zt=((be/Ae|0)<<5)+(H+1)+this.points.length;for(let gt of Xe){let Fe=gt*Ae;if(ye[Fe+2]<=H)continue;ye[Fe+2]=H;let pt=ye[Fe+qi];ke+=ye[Fe]*pt,Yt+=ye[Fe+1]*pt,ye[Fe+4]=Zt,ve&&(yt||(yt=this._map(ye,be,!0),Bt=this.clusterProps.length,this.clusterProps.push(yt)),ve(yt,this._map(ye,Fe)))}ye[be+4]=Zt,we.push(ke/Et,Yt/Et,1/0,Zt,-1,Et),ve&&we.push(Bt)}else{for(let yt=0;yt<Ae;yt++)we.push(ye[be+yt]);if(Et>1)for(let yt of Xe){let ke=yt*Ae;if(!(ye[ke+2]<=H)){ye[ke+2]=H;for(let Yt=0;Yt<Ae;Yt++)we.push(ye[ke+Yt])}}}}return we}_getOriginId(Z){return Z-this.points.length>>5}_getOriginZoom(Z){return(Z-this.points.length)%32}_map(Z,H,J){if(Z[H+qi]>1){let X=this.clusterProps[Z[H+Nu]];return J?Object.assign({},X):X}let le=this.points[Z[H+mn]].properties,ve=this.options.map(le);return J&&ve===le?Object.assign({},ve):ve}}function ju(xe,Z,H){return{type:"Feature",id:xe[Z+mn],properties:er(xe,Z,H),geometry:{type:"Point",coordinates:[(J=xe[Z],360*(J-.5)),nl(xe[Z+1])]}};var J}function er(xe,Z,H){let J=xe[Z+qi],le=J>=1e4?`${Math.round(J/1e3)}k`:J>=1e3?Math.round(J/100)/10+"k":J,ve=xe[Z+Nu],X=ve===-1?{}:Object.assign({},H[ve]);return Object.assign(X,{cluster:!0,cluster_id:xe[Z+mn],point_count:J,point_count_abbreviated:le})}function qo(xe){return xe/360+.5}function _a(xe){let Z=Math.sin(xe*Math.PI/180),H=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return H<0?0:H>1?1:H}function nl(xe){let Z=(180-360*xe)*Math.PI/180;return 360*Math.atan(Math.exp(Z))/Math.PI-90}function ia(xe,Z,H,J){let le=J,ve=Z+(H-Z>>1),X,qe=H-Z,ye=xe[Z],we=xe[Z+1],Ae=xe[H],be=xe[H+1];for(let Be=Z+3;Be<H;Be+=3){let Ye=Ph(xe[Be],xe[Be+1],ye,we,Ae,be);if(Ye>le)X=Be,le=Ye;else if(Ye===le){let Xe=Math.abs(Be-ve);Xe<qe&&(X=Be,qe=Xe)}}le>J&&(X-Z>3&&ia(xe,Z,X,J),xe[X+2]=le,H-X>3&&ia(xe,X,H,J))}function Ph(xe,Z,H,J,le,ve){let X=le-H,qe=ve-J;if(X!==0||qe!==0){let ye=((xe-H)*X+(Z-J)*qe)/(X*X+qe*qe);ye>1?(H=le,J=ve):ye>0&&(H+=X*ye,J+=qe*ye)}return X=xe-H,qe=Z-J,X*X+qe*qe}function na(xe,Z,H,J){let le={id:xe==null?null:xe,type:Z,geometry:H,tags:J,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(Z==="Point"||Z==="MultiPoint"||Z==="LineString")mi(le,H);else if(Z==="Polygon")mi(le,H[0]);else if(Z==="MultiLineString")for(let ve of H)mi(le,ve);else if(Z==="MultiPolygon")for(let ve of H)mi(le,ve[0]);return le}function mi(xe,Z){for(let H=0;H<Z.length;H+=3)xe.minX=Math.min(xe.minX,Z[H]),xe.minY=Math.min(xe.minY,Z[H+1]),xe.maxX=Math.max(xe.maxX,Z[H]),xe.maxY=Math.max(xe.maxY,Z[H+1])}function Po(xe,Z,H,J){if(!Z.geometry)return;let le=Z.geometry.coordinates;if(le&&le.length===0)return;let ve=Z.geometry.type,X=Math.pow(H.tolerance/((1<<H.maxZoom)*H.extent),2),qe=[],ye=Z.id;if(H.promoteId?ye=Z.properties[H.promoteId]:H.generateId&&(ye=J||0),ve==="Point")vn(le,qe);else if(ve==="MultiPoint")for(let we of le)vn(we,qe);else if(ve==="LineString")al(le,qe,X,!1);else if(ve==="MultiLineString"){if(H.lineMetrics){for(let we of le)qe=[],al(we,qe,X,!1),xe.push(na(ye,"LineString",qe,Z.properties));return}cs(le,qe,X,!1)}else if(ve==="Polygon")cs(le,qe,X,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(let we of Z.geometry.geometries)Po(xe,{id:ye,geometry:we,properties:Z.properties},H,J);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let we of le){let Ae=[];cs(we,Ae,X,!0),qe.push(Ae)}}xe.push(na(ye,ve,qe,Z.properties))}function vn(xe,Z){Z.push(Uu(xe[0]),gn(xe[1]),0)}function al(xe,Z,H,J){let le,ve,X=0;for(let ye=0;ye<xe.length;ye++){let we=Uu(xe[ye][0]),Ae=gn(xe[ye][1]);Z.push(we,Ae,0),ye>0&&(X+=J?(le*Ae-we*ve)/2:Math.sqrt(Math.pow(we-le,2)+Math.pow(Ae-ve,2))),le=we,ve=Ae}let qe=Z.length-3;Z[2]=1,ia(Z,0,qe,H),Z[qe+2]=1,Z.size=Math.abs(X),Z.start=0,Z.end=Z.size}function cs(xe,Z,H,J){for(let le=0;le<xe.length;le++){let ve=[];al(xe[le],ve,H,J),Z.push(ve)}}function Uu(xe){return xe/360+.5}function gn(xe){let Z=Math.sin(xe*Math.PI/180),H=.5-.25*Math.log((1+Z)/(1-Z))/Math.PI;return H<0?0:H>1?1:H}function yn(xe,Z,H,J,le,ve,X,qe){if(J/=Z,ve>=(H/=Z)&&X<J)return xe;if(X<H||ve>=J)return null;let ye=[];for(let we of xe){let Ae=we.geometry,be=we.type,Be=le===0?we.minX:we.minY,Ye=le===0?we.maxX:we.maxY;if(Be>=H&&Ye<J){ye.push(we);continue}if(Ye<H||Be>=J)continue;let Xe=[];if(be==="Point"||be==="MultiPoint")Fi(Ae,Xe,H,J,le);else if(be==="LineString")ar(Ae,Xe,H,J,le,!1,qe.lineMetrics);else if(be==="MultiLineString")Ao(Ae,Xe,H,J,le,!1);else if(be==="Polygon")Ao(Ae,Xe,H,J,le,!0);else if(be==="MultiPolygon")for(let ht of Ae){let Et=[];Ao(ht,Et,H,J,le,!0),Et.length&&Xe.push(Et)}if(Xe.length){if(qe.lineMetrics&&be==="LineString"){for(let ht of Xe)ye.push(na(we.id,be,ht,we.tags));continue}be!=="LineString"&&be!=="MultiLineString"||(Xe.length===1?(be="LineString",Xe=Xe[0]):be="MultiLineString"),be!=="Point"&&be!=="MultiPoint"||(be=Xe.length===3?"Point":"MultiPoint"),ye.push(na(we.id,be,Xe,we.tags))}}return ye.length?ye:null}function Fi(xe,Z,H,J,le){for(let ve=0;ve<xe.length;ve+=3){let X=xe[ve+le];X>=H&&X<=J&&Dn(Z,xe[ve],xe[ve+1],xe[ve+2])}}function ar(xe,Z,H,J,le,ve,X){let qe=xa(xe),ye=le===0?$u:Vu,we,Ae,be=xe.start;for(let Et=0;Et<xe.length-3;Et+=3){let yt=xe[Et],ke=xe[Et+1],Yt=xe[Et+2],Bt=xe[Et+3],Zt=xe[Et+4],gt=le===0?yt:ke,Fe=le===0?Bt:Zt,pt=!1;X&&(we=Math.sqrt(Math.pow(yt-Bt,2)+Math.pow(ke-Zt,2))),gt<H?Fe>H&&(Ae=ye(qe,yt,ke,Bt,Zt,H),X&&(qe.start=be+we*Ae)):gt>J?Fe<J&&(Ae=ye(qe,yt,ke,Bt,Zt,J),X&&(qe.start=be+we*Ae)):Dn(qe,yt,ke,Yt),Fe<H&&gt>=H&&(Ae=ye(qe,yt,ke,Bt,Zt,H),pt=!0),Fe>J&&gt<=J&&(Ae=ye(qe,yt,ke,Bt,Zt,J),pt=!0),!ve&&pt&&(X&&(qe.end=be+we*Ae),Z.push(qe),qe=xa(xe)),X&&(be+=we)}let Be=xe.length-3,Ye=xe[Be],Xe=xe[Be+1],ht=le===0?Ye:Xe;ht>=H&&ht<=J&&Dn(qe,Ye,Xe,xe[Be+2]),Be=qe.length-3,ve&&Be>=3&&(qe[Be]!==qe[0]||qe[Be+1]!==qe[1])&&Dn(qe,qe[0],qe[1],qe[2]),qe.length&&Z.push(qe)}function xa(xe){let Z=[];return Z.size=xe.size,Z.start=xe.start,Z.end=xe.end,Z}function Ao(xe,Z,H,J,le,ve){for(let X of xe)ar(X,Z,H,J,le,ve,!1)}function Dn(xe,Z,H,J){xe.push(Z,H,J)}function $u(xe,Z,H,J,le,ve){let X=(ve-Z)/(J-Z);return Dn(xe,ve,H+(le-H)*X,1),X}function Vu(xe,Z,H,J,le,ve){let X=(ve-H)/(le-H);return Dn(xe,Z+(J-Z)*X,ve,1),X}function _n(xe,Z){let H=[];for(let J=0;J<xe.length;J++){let le=xe[J],ve=le.type,X;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")X=ba(le.geometry,Z);else if(ve==="MultiLineString"||ve==="Polygon"){X=[];for(let qe of le.geometry)X.push(ba(qe,Z))}else if(ve==="MultiPolygon"){X=[];for(let qe of le.geometry){let ye=[];for(let we of qe)ye.push(ba(we,Z));X.push(ye)}}H.push(na(le.id,ve,X,le.tags))}return H}function ba(xe,Z){let H=[];H.size=xe.size,xe.start!==void 0&&(H.start=xe.start,H.end=xe.end);for(let J=0;J<xe.length;J+=3)H.push(xe[J]+Z,xe[J+1],xe[J+2]);return H}function hs(xe,Z){if(xe.transformed)return xe;let H=1<<xe.z,J=xe.x,le=xe.y;for(let ve of xe.features){let X=ve.geometry,qe=ve.type;if(ve.geometry=[],qe===1)for(let ye=0;ye<X.length;ye+=2)ve.geometry.push(fs(X[ye],X[ye+1],Z,H,J,le));else for(let ye=0;ye<X.length;ye++){let we=[];for(let Ae=0;Ae<X[ye].length;Ae+=2)we.push(fs(X[ye][Ae],X[ye][Ae+1],Z,H,J,le));ve.geometry.push(we)}}return xe.transformed=!0,xe}function fs(xe,Z,H,J,le,ve){return[Math.round(H*(xe*J-le)),Math.round(H*(Z*J-ve))]}function Ya(xe,Z,H,J,le){let ve=Z===le.maxZoom?0:le.tolerance/((1<<Z)*le.extent),X={features:[],numPoints:0,numSimplified:0,numFeatures:xe.length,source:null,x:H,y:J,z:Z,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let qe of xe)ol(X,qe,ve,le);return X}function ol(xe,Z,H,J){let le=Z.geometry,ve=Z.type,X=[];if(xe.minX=Math.min(xe.minX,Z.minX),xe.minY=Math.min(xe.minY,Z.minY),xe.maxX=Math.max(xe.maxX,Z.maxX),xe.maxY=Math.max(xe.maxY,Z.maxY),ve==="Point"||ve==="MultiPoint")for(let qe=0;qe<le.length;qe+=3)X.push(le[qe],le[qe+1]),xe.numPoints++,xe.numSimplified++;else if(ve==="LineString")sl(X,le,xe,H,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let qe=0;qe<le.length;qe++)sl(X,le[qe],xe,H,ve==="Polygon",qe===0);else if(ve==="MultiPolygon")for(let qe=0;qe<le.length;qe++){let ye=le[qe];for(let we=0;we<ye.length;we++)sl(X,ye[we],xe,H,!0,we===0)}if(X.length){let qe=Z.tags||null;if(ve==="LineString"&&J.lineMetrics){qe={};for(let we in Z.tags)qe[we]=Z.tags[we];qe.mapbox_clip_start=le.start/le.size,qe.mapbox_clip_end=le.end/le.size}let ye={geometry:X,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:qe};Z.id!==null&&(ye.id=Z.id),xe.features.push(ye)}}function sl(xe,Z,H,J,le,ve){let X=J*J;if(J>0&&Z.size<(le?X:J))return void(H.numPoints+=Z.length/3);let qe=[];for(let ye=0;ye<Z.length;ye+=3)(J===0||Z[ye+2]>X)&&(H.numSimplified++,qe.push(Z[ye],Z[ye+1])),H.numPoints++;le&&function(ye,we){let Ae=0;for(let be=0,Be=ye.length,Ye=Be-2;be<Be;Ye=be,be+=2)Ae+=(ye[be]-ye[Ye])*(ye[be+1]+ye[Ye+1]);if(Ae>0===we)for(let be=0,Be=ye.length;be<Be/2;be+=2){let Ye=ye[be],Xe=ye[be+1];ye[be]=ye[Be-2-be],ye[be+1]=ye[Be-1-be],ye[Be-2-be]=Ye,ye[Be-1-be]=Xe}}(qe,ve),xe.push(qe)}let ll={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Xa{constructor(Z,H){let J=(H=this.options=function(ve,X){for(let qe in X)ve[qe]=X[qe];return ve}(Object.create(ll),H)).debug;if(J&&console.time("preprocess data"),H.maxZoom<0||H.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(H.promoteId&&H.generateId)throw new Error("promoteId and generateId cannot be used together.");let le=function(ve,X){let qe=[];if(ve.type==="FeatureCollection")for(let ye=0;ye<ve.features.length;ye++)Po(qe,ve.features[ye],X,ye);else Po(qe,ve.type==="Feature"?ve:{geometry:ve},X);return qe}(Z,H);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",H.indexMaxZoom,H.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),le=function(ve,X){let qe=X.buffer/X.extent,ye=ve,we=yn(ve,1,-1-qe,qe,0,-1,2,X),Ae=yn(ve,1,1-qe,2+qe,0,-1,2,X);return(we||Ae)&&(ye=yn(ve,1,-qe,1+qe,0,-1,2,X)||[],we&&(ye=_n(we,1).concat(ye)),Ae&&(ye=ye.concat(_n(Ae,-1)))),ye}(le,H),le.length&&this.splitTile(le,0,0,0),J&&(le.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(Z,H,J,le,ve,X,qe){let ye=[Z,H,J,le],we=this.options,Ae=we.debug;for(;ye.length;){le=ye.pop(),J=ye.pop(),H=ye.pop(),Z=ye.pop();let be=1<<H,Be=Ja(H,J,le),Ye=this.tiles[Be];if(!Ye&&(Ae>1&&console.time("creation"),Ye=this.tiles[Be]=Ya(Z,H,J,le,we),this.tileCoords.push({z:H,x:J,y:le}),Ae)){Ae>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",H,J,le,Ye.numFeatures,Ye.numPoints,Ye.numSimplified),console.timeEnd("creation"));let pt=`z${H}`;this.stats[pt]=(this.stats[pt]||0)+1,this.total++}if(Ye.source=Z,ve==null){if(H===we.indexMaxZoom||Ye.numPoints<=we.indexMaxPoints)continue}else{if(H===we.maxZoom||H===ve)continue;if(ve!=null){let pt=ve-H;if(J!==X>>pt||le!==qe>>pt)continue}}if(Ye.source=null,Z.length===0)continue;Ae>1&&console.time("clipping");let Xe=.5*we.buffer/we.extent,ht=.5-Xe,Et=.5+Xe,yt=1+Xe,ke=null,Yt=null,Bt=null,Zt=null,gt=yn(Z,be,J-Xe,J+Et,0,Ye.minX,Ye.maxX,we),Fe=yn(Z,be,J+ht,J+yt,0,Ye.minX,Ye.maxX,we);Z=null,gt&&(ke=yn(gt,be,le-Xe,le+Et,1,Ye.minY,Ye.maxY,we),Yt=yn(gt,be,le+ht,le+yt,1,Ye.minY,Ye.maxY,we),gt=null),Fe&&(Bt=yn(Fe,be,le-Xe,le+Et,1,Ye.minY,Ye.maxY,we),Zt=yn(Fe,be,le+ht,le+yt,1,Ye.minY,Ye.maxY,we),Fe=null),Ae>1&&console.timeEnd("clipping"),ye.push(ke||[],H+1,2*J,2*le),ye.push(Yt||[],H+1,2*J,2*le+1),ye.push(Bt||[],H+1,2*J+1,2*le),ye.push(Zt||[],H+1,2*J+1,2*le+1)}}getTile(Z,H,J){Z=+Z,H=+H,J=+J;let le=this.options,{extent:ve,debug:X}=le;if(Z<0||Z>24)return null;let qe=1<<Z,ye=Ja(Z,H=H+qe&qe-1,J);if(this.tiles[ye])return hs(this.tiles[ye],ve);X>1&&console.log("drilling down to z%d-%d-%d",Z,H,J);let we,Ae=Z,be=H,Be=J;for(;!we&&Ae>0;)Ae--,be>>=1,Be>>=1,we=this.tiles[Ja(Ae,be,Be)];return we&&we.source?(X>1&&(console.log("found parent tile z%d-%d-%d",Ae,be,Be),console.time("drilling down")),this.splitTile(we.source,Ae,be,Be,Z,H,J),X>1&&console.timeEnd("drilling down"),this.tiles[ye]?hs(this.tiles[ye],ve):null):null}}function Ja(xe,Z,H){return 32*((1<<xe)*H+Z)+xe}function Co(xe,Z){return Z?xe.properties[Z]:xe.id}function ul(xe,Z){if(xe==null)return!0;if(xe.type==="Feature")return Co(xe,Z)!=null;if(xe.type==="FeatureCollection"){let H=new Set;for(let J of xe.features){let le=Co(J,Z);if(le==null||H.has(le))return!1;H.add(le)}return!0}return!1}function Ln(xe,Z){let H=new Map;if(xe!=null)if(xe.type==="Feature")H.set(Co(xe,Z),xe);else for(let J of xe.features)H.set(Co(J,Z),J);return H}class nn extends M{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(Z,H){return c._(this,void 0,void 0,function*(){let J=Z.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let le=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!le)return null;let ve=new re(le.features),X=ut(ve);return X.byteOffset===0&&X.byteLength===X.buffer.byteLength||(X=new Uint8Array(X)),{vectorTile:ve,rawData:X.buffer}})}loadData(Z){return c._(this,void 0,void 0,function*(){var H;(H=this._pendingRequest)===null||H===void 0||H.abort();let J=!!(Z&&Z.request&&Z.request.collectResourceTiming)&&new c.cE(Z.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(Z,this._pendingRequest),this._geoJSONIndex=Z.cluster?new il(function({superclusterOptions:X,clusterProperties:qe}){if(!qe||!X)return X;let ye={},we={},Ae={accumulated:null,zoom:0},be={properties:null},Be=Object.keys(qe);for(let Ye of Be){let[Xe,ht]=qe[Ye],Et=c.cL(ht),yt=c.cL(typeof Xe=="string"?[Xe,["accumulated"],["get",Ye]]:Xe);ye[Ye]=Et.value,we[Ye]=yt.value}return X.map=Ye=>{be.properties=Ye;let Xe={};for(let ht of Be)Xe[ht]=ye[ht].evaluate(Ae,be);return Xe},X.reduce=(Ye,Xe)=>{be.properties=Xe;for(let ht of Be)Ae.accumulated=Ye[ht],Ye[ht]=we[ht].evaluate(Ae,be)},X}(Z)).load((yield this._pendingData).features):(le=yield this._pendingData,new Xa(le,Z.geojsonVtOptions)),this.loaded={};let ve={};if(J){let X=J.finish();X&&(ve.resourceTiming={},ve.resourceTiming[Z.source]=JSON.parse(JSON.stringify(X)))}return ve}catch(ve){if(delete this._pendingRequest,c.cp(ve))return{abandoned:!0};throw ve}var le})}getData(){return c._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(Z){let H=this.loaded;return H&&H[Z.uid]?super.reloadTile(Z):this.loadTile(Z)}loadAndProcessGeoJSON(Z,H){return c._(this,void 0,void 0,function*(){let J=yield this.loadGeoJSON(Z,H);if(delete this._pendingRequest,typeof J!="object")throw new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`);if(Pe(J,!0),Z.filter){let le=c.cL(Z.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(le.result==="error")throw new Error(le.value.map(X=>`${X.key}: ${X.message}`).join(", "));J={type:"FeatureCollection",features:J.features.filter(X=>le.value.evaluate({zoom:0},X))}}return J})}loadGeoJSON(Z,H){return c._(this,void 0,void 0,function*(){let{promoteId:J}=Z;if(Z.request){let le=yield c.j(Z.request,H);return this._dataUpdateable=ul(le.data,J)?Ln(le.data,J):void 0,le.data}if(typeof Z.data=="string")try{let le=JSON.parse(Z.data);return this._dataUpdateable=ul(le,J)?Ln(le,J):void 0,le}catch(le){throw new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`)}if(!Z.dataDiff)throw new Error(`Input data given to '${Z.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${Z.source}`);return function(le,ve,X){var qe,ye,we,Ae;if(ve.removeAll&&le.clear(),ve.remove)for(let be of ve.remove)le.delete(be);if(ve.add)for(let be of ve.add){let Be=Co(be,X);Be!=null&&le.set(Be,be)}if(ve.update)for(let be of ve.update){let Be=le.get(be.id);if(Be==null)continue;let Ye=!be.removeAllProperties&&(((qe=be.removeProperties)===null||qe===void 0?void 0:qe.length)>0||((ye=be.addOrUpdateProperties)===null||ye===void 0?void 0:ye.length)>0);if((be.newGeometry||be.removeAllProperties||Ye)&&(Be=Object.assign({},Be),le.set(be.id,Be),Ye&&(Be.properties=Object.assign({},Be.properties))),be.newGeometry&&(Be.geometry=be.newGeometry),be.removeAllProperties)Be.properties={};else if(((we=be.removeProperties)===null||we===void 0?void 0:we.length)>0)for(let Xe of be.removeProperties)Object.prototype.hasOwnProperty.call(Be.properties,Xe)&&delete Be.properties[Xe];if(((Ae=be.addOrUpdateProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(let{key:Xe,value:ht}of be.addOrUpdateProperties)Be.properties[Xe]=ht}}(this._dataUpdateable,Z.dataDiff,J),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(Z){return c._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(Z){return this._geoJSONIndex.getClusterExpansionZoom(Z.clusterId)}getClusterChildren(Z){return this._geoJSONIndex.getChildren(Z.clusterId)}getClusterLeaves(Z){return this._geoJSONIndex.getLeaves(Z.clusterId,Z.limit,Z.offset)}}class wa{constructor(Z){this.self=Z,this.actor=new c.H(Z),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(H,J)=>{if(this.externalWorkerSourceTypes[H])throw new Error(`Worker source with name "${H}" already registered.`);this.externalWorkerSourceTypes[H]=J},this.self.addProtocol=c.cr,this.self.removeProtocol=c.cs,this.self.registerRTLTextPlugin=H=>{c.cM.setMethods(H)},this.actor.registerMessageHandler("LDT",(H,J)=>this._getDEMWorkerSource(H,J.source).loadTile(J)),this.actor.registerMessageHandler("RDT",(H,J)=>c._(this,void 0,void 0,function*(){this._getDEMWorkerSource(H,J.source).removeTile(J)})),this.actor.registerMessageHandler("GCEZ",(H,J)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(H,J.type,J.source).getClusterExpansionZoom(J)})),this.actor.registerMessageHandler("GCC",(H,J)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(H,J.type,J.source).getClusterChildren(J)})),this.actor.registerMessageHandler("GCL",(H,J)=>c._(this,void 0,void 0,function*(){return this._getWorkerSource(H,J.type,J.source).getClusterLeaves(J)})),this.actor.registerMessageHandler("LD",(H,J)=>this._getWorkerSource(H,J.type,J.source).loadData(J)),this.actor.registerMessageHandler("GD",(H,J)=>this._getWorkerSource(H,J.type,J.source).getData()),this.actor.registerMessageHandler("LT",(H,J)=>this._getWorkerSource(H,J.type,J.source).loadTile(J)),this.actor.registerMessageHandler("RT",(H,J)=>this._getWorkerSource(H,J.type,J.source).reloadTile(J)),this.actor.registerMessageHandler("AT",(H,J)=>this._getWorkerSource(H,J.type,J.source).abortTile(J)),this.actor.registerMessageHandler("RMT",(H,J)=>this._getWorkerSource(H,J.type,J.source).removeTile(J)),this.actor.registerMessageHandler("RS",(H,J)=>c._(this,void 0,void 0,function*(){if(!this.workerSources[H]||!this.workerSources[H][J.type]||!this.workerSources[H][J.type][J.source])return;let le=this.workerSources[H][J.type][J.source];delete this.workerSources[H][J.type][J.source],le.removeSource!==void 0&&le.removeSource(J)})),this.actor.registerMessageHandler("RM",H=>c._(this,void 0,void 0,function*(){delete this.layerIndexes[H],delete this.availableImages[H],delete this.workerSources[H],delete this.demWorkerSources[H]})),this.actor.registerMessageHandler("SR",(H,J)=>c._(this,void 0,void 0,function*(){this.referrer=J})),this.actor.registerMessageHandler("SRPS",(H,J)=>this._syncRTLPluginState(H,J)),this.actor.registerMessageHandler("IS",(H,J)=>c._(this,void 0,void 0,function*(){this.self.importScripts(J)})),this.actor.registerMessageHandler("SI",(H,J)=>this._setImages(H,J)),this.actor.registerMessageHandler("UL",(H,J)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(H).update(J.layers,J.removedIds)})),this.actor.registerMessageHandler("SL",(H,J)=>c._(this,void 0,void 0,function*(){this._getLayerIndex(H).replace(J)}))}_setImages(Z,H){return c._(this,void 0,void 0,function*(){this.availableImages[Z]=H;for(let J in this.workerSources[Z]){let le=this.workerSources[Z][J];for(let ve in le)le[ve].availableImages=H}})}_syncRTLPluginState(Z,H){return c._(this,void 0,void 0,function*(){return yield c.cM.syncState(H,this.self.importScripts)})}_getAvailableImages(Z){let H=this.availableImages[Z];return H||(H=[]),H}_getLayerIndex(Z){let H=this.layerIndexes[Z];return H||(H=this.layerIndexes[Z]=new a),H}_getWorkerSource(Z,H,J){if(this.workerSources[Z]||(this.workerSources[Z]={}),this.workerSources[Z][H]||(this.workerSources[Z][H]={}),!this.workerSources[Z][H][J]){let le={sendAsync:(ve,X)=>(ve.targetMapId=Z,this.actor.sendAsync(ve,X))};switch(H){case"vector":this.workerSources[Z][H][J]=new M(le,this._getLayerIndex(Z),this._getAvailableImages(Z));break;case"geojson":this.workerSources[Z][H][J]=new nn(le,this._getLayerIndex(Z),this._getAvailableImages(Z));break;default:this.workerSources[Z][H][J]=new this.externalWorkerSourceTypes[H](le,this._getLayerIndex(Z),this._getAvailableImages(Z))}}return this.workerSources[Z][H][J]}_getDEMWorkerSource(Z,H){return this.demWorkerSources[Z]||(this.demWorkerSources[Z]={}),this.demWorkerSources[Z][H]||(this.demWorkerSources[Z][H]=new O),this.demWorkerSources[Z][H]}}return c.i(self)&&(self.worker=new wa(self)),wa}),n("index",["exports","./shared"],function(c,a){"use strict";var _="5.5.0";function w(){var m=new a.A(4);return a.A!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m}let q,M,O={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(m,r,o){let f=requestAnimationFrame(v=>{d(),r(v)}),{unsubscribe:d}=a.s(m.signal,"abort",()=>{d(),cancelAnimationFrame(f),o(a.c())},!1)},frameAsync(m){return new Promise((r,o)=>{this.frame(m,r,o)})},getImageData(m,r=0){return this.getImageCanvasContext(m).getImageData(-r,-r,m.width+2*r,m.height+2*r)},getImageCanvasContext(m){let r=window.document.createElement("canvas"),o=r.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return r.width=m.width,r.height=m.height,o.drawImage(m,0,0,m.width,m.height),o},resolveURL:m=>(q||(q=document.createElement("a")),q.href=m,q.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(M==null&&(M=matchMedia("(prefers-reduced-motion: reduce)")),M.matches)}};class k{static testProp(r){if(!k.docStyle)return r[0];for(let o=0;o<r.length;o++)if(r[o]in k.docStyle)return r[o];return r[0]}static create(r,o,f){let d=window.document.createElement(r);return o!==void 0&&(d.className=o),f&&f.appendChild(d),d}static createNS(r,o){return window.document.createElementNS(r,o)}static disableDrag(){k.docStyle&&k.selectProp&&(k.userSelect=k.docStyle[k.selectProp],k.docStyle[k.selectProp]="none")}static enableDrag(){k.docStyle&&k.selectProp&&(k.docStyle[k.selectProp]=k.userSelect)}static setTransform(r,o){r.style[k.transformProp]=o}static addEventListener(r,o,f,d={}){r.addEventListener(o,f,"passive"in d?d:d.capture)}static removeEventListener(r,o,f,d={}){r.removeEventListener(o,f,"passive"in d?d:d.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",k.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",k.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",k.suppressClickInternal,!0)},0)}static getScale(r){let o=r.getBoundingClientRect();return{x:o.width/r.offsetWidth||1,y:o.height/r.offsetHeight||1,boundingClientRect:o}}static getPoint(r,o,f){let d=o.boundingClientRect;return new a.P((f.clientX-d.left)/o.x-r.clientLeft,(f.clientY-d.top)/o.y-r.clientTop)}static mousePos(r,o){let f=k.getScale(r);return k.getPoint(r,f,o)}static touchPos(r,o){let f=[],d=k.getScale(r);for(let v=0;v<o.length;v++)f.push(k.getPoint(r,d,o[v]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}static sanitize(r){let o=new DOMParser().parseFromString(r,"text/html").body||document.createElement("body"),f=o.querySelectorAll("script");for(let d of f)d.remove();return k.clean(o),o.innerHTML}static isPossiblyDangerous(r,o){let f=o.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(r)||!f.includes("javascript:")&&!f.includes("data:"))||!!r.startsWith("on")||void 0}static clean(r){let o=r.children;for(let f of o)k.removeAttributes(f),k.clean(f)}static removeAttributes(r){for(let{name:o,value:f}of r.attributes)k.isPossiblyDangerous(o,f)&&r.removeAttribute(o)}}k.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,k.selectProp=k.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),k.transformProp=k.testProp(["transform","WebkitTransform"]);let $={supported:!1,testSupport:function(m){!Se&&Pe&&(ne?re(m):fe=m)}},fe,Pe,Se=!1,ne=!1;function re(m){let r=m.createTexture();m.bindTexture(m.TEXTURE_2D,r);try{if(m.texImage2D(m.TEXTURE_2D,0,m.RGBA,m.RGBA,m.UNSIGNED_BYTE,Pe),m.isContextLost())return;$.supported=!0}catch(o){}m.deleteTexture(r),Se=!0}var ae;typeof document!="undefined"&&(Pe=document.createElement("img"),Pe.onload=()=>{fe&&re(fe),fe=null,ne=!0},Pe.onerror=()=>{Se=!0,fe=null},Pe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(m){let r,o,f,d;m.resetRequestQueue=()=>{r=[],o=0,f=0,d={}},m.addThrottleControl=E=>{let A=f++;return d[A]=E,A},m.removeThrottleControl=E=>{delete d[E],x()},m.getImage=(E,A,R=!0)=>new Promise((z,L)=>{$.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),a.e(E,{type:"image"}),r.push({abortController:A,requestParameters:E,supportImageRefresh:R,state:"queued",onError:U=>{L(U)},onSuccess:U=>{z(U)}}),x()});let v=E=>a._(this,void 0,void 0,function*(){E.state="running";let{requestParameters:A,supportImageRefresh:R,onError:z,onSuccess:L,abortController:U}=E,V=R===!1&&!a.i(self)&&!a.g(A.url)&&(!A.headers||Object.keys(A.headers).reduce((te,oe)=>te&&oe==="accept",!0));o++;let ee=V?S(A,U):a.m(A,U);try{let te=yield ee;delete E.abortController,E.state="completed",te.data instanceof HTMLImageElement||a.b(te.data)?L(te):te.data&&L({data:yield(Q=te.data,typeof createImageBitmap=="function"?a.f(Q):a.h(Q)),cacheControl:te.cacheControl,expires:te.expires})}catch(te){delete E.abortController,z(te)}finally{o--,x()}var Q}),x=()=>{let E=(()=>{for(let A of Object.keys(d))if(d[A]())return!0;return!1})()?a.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:a.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let A=o;A<E&&r.length>0;A++){let R=r.shift();R.abortController.signal.aborted?A--:v(R)}},S=(E,A)=>new Promise((R,z)=>{let L=new Image,U=E.url,V=E.credentials;V&&V==="include"?L.crossOrigin="use-credentials":(V&&V==="same-origin"||!a.d(U))&&(L.crossOrigin="anonymous"),A.signal.addEventListener("abort",()=>{L.src="",z(a.c())}),L.fetchPriority="high",L.onload=()=>{L.onerror=L.onload=null,R({data:L})},L.onerror=()=>{L.onerror=L.onload=null,A.signal.aborted||z(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},L.src=U})}(ae||(ae={})),ae.resetRequestQueue();class _e{constructor(r){this._transformRequestFn=r}transformRequest(r,o){return this._transformRequestFn&&this._transformRequestFn(r,o)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function Te(m){let r=[];if(typeof m=="string")r.push({id:"default",url:m});else if(m&&m.length>0){let o=[];for(let{id:f,url:d}of m){let v=`${f}${d}`;o.indexOf(v)===-1&&(o.push(v),r.push({id:f,url:d}))}}return r}function nt(m,r,o){try{let f=new URL(m);return f.pathname+=`${r}${o}`,f.toString()}catch(f){throw new Error(`Invalid sprite URL "${m}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class Ve{constructor(r,o,f,d){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(o,d)}update(r,o,f){let{width:d,height:v}=r,x=!(this.size&&this.size[0]===d&&this.size[1]===v||f),{context:S}=this,{gl:E}=S;if(this.useMipmap=!!(o&&o.useMipmap),E.bindTexture(E.TEXTURE_2D,this.texture),S.pixelStoreUnpackFlipY.set(!1),S.pixelStoreUnpack.set(1),S.pixelStoreUnpackPremultiplyAlpha.set(this.format===E.RGBA&&(!o||o.premultiply!==!1)),x)this.size=[d,v],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.b(r)?E.texImage2D(E.TEXTURE_2D,0,this.format,this.format,E.UNSIGNED_BYTE,r):E.texImage2D(E.TEXTURE_2D,0,this.format,d,v,0,this.format,E.UNSIGNED_BYTE,r.data);else{let{x:A,y:R}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||a.b(r)?E.texSubImage2D(E.TEXTURE_2D,0,A,R,E.RGBA,E.UNSIGNED_BYTE,r):E.texSubImage2D(E.TEXTURE_2D,0,A,R,d,v,E.RGBA,E.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&E.generateMipmap(E.TEXTURE_2D),S.pixelStoreUnpackFlipY.setDefault(),S.pixelStoreUnpack.setDefault(),S.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(r,o,f){let{context:d}=this,{gl:v}=d;v.bindTexture(v.TEXTURE_2D,this.texture),f!==v.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=v.LINEAR),r!==this.filter&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,r),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,f||r),this.filter=r),o!==this.wrap&&(v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,o),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function ut(m){let{userImage:r}=m;return!!(r&&r.render&&r.render())&&(m.data.replace(new Uint8Array(r.data.buffer)),!0)}class St extends a.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:o,promiseResolve:f}of this.requestors)f(this._getImagesForIds(o));this.requestors=[]}}getImage(r){let o=this.images[r];if(o&&!o.data&&o.spriteData){let f=o.spriteData;o.data=new a.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),o.spriteData=null}return o}addImage(r,o){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,o)&&(this.images[r]=o)}_validate(r,o){let f=!0,d=o.data||o.spriteData;return this._validateStretch(o.stretchX,d&&d.width)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(o.stretchY,d&&d.height)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(o.content,o)||(this.fire(new a.k(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,o){if(!r)return!0;let f=0;for(let d of r){if(d[0]<f||d[1]<d[0]||o<d[1])return!1;f=d[1]}return!0}_validateContent(r,o){if(!r)return!0;if(r.length!==4)return!1;let f=o.spriteData,d=f&&f.width||o.data.width,v=f&&f.height||o.data.height;return!(r[0]<0||d<r[0]||r[1]<0||v<r[1]||r[2]<0||d<r[2]||r[3]<0||v<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,o,f=!0){let d=this.getImage(r);if(f&&(d.data.width!==o.data.width||d.data.height!==o.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=d.version+1,this.images[r]=o,this.updatedImages[r]=!0}removeImage(r){let o=this.images[r];delete this.images[r],delete this.patterns[r],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((o,f)=>{let d=!0;if(!this.isLoaded())for(let v of r)this.images[v]||(d=!1);this.isLoaded()||d?o(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:o})})}_getImagesForIds(r){let o={};for(let f of r){let d=this.getImage(f);d||(this.fire(new a.l("styleimagemissing",{id:f})),d=this.getImage(f)),d?o[f]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:a.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){let{width:r,height:o}=this.atlasImage;return{width:r,height:o}}getPattern(r){let o=this.patterns[r],f=this.getImage(r);if(!f)return null;if(o&&o.position.version===f.version)return o.position;if(o)o.position.version=f.version;else{let d={w:f.data.width+2,h:f.data.height+2,x:0,y:0},v=new a.I(d,f);this.patterns[r]={bin:d,position:v}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){let o=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Ve(r,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){let r=[];for(let v in this.patterns)r.push(this.patterns[v].bin);let{w:o,h:f}=a.p(r),d=this.atlasImage;d.resize({width:o||1,height:f||1});for(let v in this.patterns){let{bin:x}=this.patterns[v],S=x.x+1,E=x.y+1,A=this.getImage(v).data,R=A.width,z=A.height;a.R.copy(A,d,{x:0,y:0},{x:S,y:E},{width:R,height:z}),a.R.copy(A,d,{x:0,y:z-1},{x:S,y:E-1},{width:R,height:1}),a.R.copy(A,d,{x:0,y:0},{x:S,y:E+z},{width:R,height:1}),a.R.copy(A,d,{x:R-1,y:0},{x:S-1,y:E},{width:1,height:z}),a.R.copy(A,d,{x:0,y:0},{x:S+R,y:E},{width:1,height:z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let o of r){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;let f=this.getImage(o);f||a.w(`Image with ID: "${o}" was not found`),ut(f)&&this.updateImage(o,f)}}}let xt=1e20;function Jr(m,r,o,f,d,v,x,S,E){for(let A=r;A<r+f;A++)mn(m,o*v+A,v,d,x,S,E);for(let A=o;A<o+d;A++)mn(m,A*v+r,1,f,x,S,E)}function mn(m,r,o,f,d,v,x){v[0]=0,x[0]=-1e20,x[1]=xt,d[0]=m[r];for(let S=1,E=0,A=0;S<f;S++){d[S]=m[r+S*o];let R=S*S;do{let z=v[E];A=(d[S]-d[z]+R-z*z)/(S-z)/2}while(A<=x[E]&&--E>-1);E++,v[E]=S,x[E]=A,x[E+1]=xt}for(let S=0,E=0;S<f;S++){for(;x[E+1]<S;)E++;let A=v[E],R=S-A;m[r+S*o]=d[A]+R*R}}class qi{constructor(r,o){this.requestManager=r,this.localIdeographFontFamily=o,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return a._(this,void 0,void 0,function*(){let o=[];for(let v in r)for(let x of r[v])o.push(this._getAndCacheGlyphsPromise(v,x));let f=yield Promise.all(o),d={};for(let{stack:v,id:x,glyph:S}of f)d[v]||(d[v]={}),d[v][x]=S&&{id:S.id,bitmap:S.bitmap.clone(),metrics:S.metrics};return d})}_getAndCacheGlyphsPromise(r,o){return a._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let d=f.glyphs[o];if(d!==void 0)return{stack:r,id:o,glyph:d};if(d=this._tinySDF(f,r,o),d)return f.glyphs[o]=d,{stack:r,id:o,glyph:d};let v=Math.floor(o/256);if(256*v>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[v])return{stack:r,id:o,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[v]){let S=qi.loadGlyphRange(r,v,this.url,this.requestManager);f.requests[v]=S}let x=yield f.requests[v];for(let S in x)this._doesCharSupportLocalGlyph(+S)||(f.glyphs[+S]=x[+S]);return f.ranges[v]=!0,{stack:r,id:o,glyph:x[o]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))||a.u["CJK Unified Ideographs"](r)||a.u["Hangul Syllables"](r)||a.u.Hiragana(r)||a.u.Katakana(r)||a.u["CJK Symbols and Punctuation"](r)||a.u["Halfwidth and Fullwidth Forms"](r))}_tinySDF(r,o,f){let d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(f))return;let v=r.tinySDF;if(!v){let S="400";/bold/i.test(o)?S="900":/medium/i.test(o)?S="500":/light/i.test(o)&&(S="200"),v=r.tinySDF=new qi.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:S})}let x=v.draw(String.fromCharCode(f));return{id:f,bitmap:new a.q({width:x.width||60,height:x.height||60},x.data),metrics:{width:x.glyphWidth/2||24,height:x.glyphHeight/2||24,left:x.glyphLeft/2+.5||0,top:x.glyphTop/2-27.5||-8,advance:x.glyphAdvance/2||24,isDoubleResolution:!0}}}}qi.loadGlyphRange=function(m,r,o,f){return a._(this,void 0,void 0,function*(){let d=256*r,v=d+255,x=f.transformRequest(o.replace("{fontstack}",m).replace("{range}",`${d}-${v}`),"Glyphs"),S=yield a.n(x,new AbortController);if(!S||!S.data)throw new Error(`Could not load glyph range. range: ${r}, ${d}-${v}`);let E={};for(let A of a.o(S.data))E[A.id]=A;return E})},qi.TinySDF=class{constructor({fontSize:m=24,buffer:r=3,radius:o=8,cutoff:f=.25,fontFamily:d="sans-serif",fontWeight:v="normal",fontStyle:x="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=o;let S=this.size=m+4*r,E=this._createCanvas(S),A=this.ctx=E.getContext("2d",{willReadFrequently:!0});A.font=`${x} ${v} ${m}px ${d}`,A.textBaseline="alphabetic",A.textAlign="left",A.fillStyle="black",this.gridOuter=new Float64Array(S*S),this.gridInner=new Float64Array(S*S),this.f=new Float64Array(S),this.z=new Float64Array(S+1),this.v=new Uint16Array(S)}_createCanvas(m){let r=document.createElement("canvas");return r.width=r.height=m,r}draw(m){let{width:r,actualBoundingBoxAscent:o,actualBoundingBoxDescent:f,actualBoundingBoxLeft:d,actualBoundingBoxRight:v}=this.ctx.measureText(m),x=Math.ceil(o),S=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(v-d))),E=Math.min(this.size-this.buffer,x+Math.ceil(f)),A=S+2*this.buffer,R=E+2*this.buffer,z=Math.max(A*R,0),L=new Uint8ClampedArray(z),U={data:L,width:A,height:R,glyphWidth:S,glyphHeight:E,glyphTop:x,glyphLeft:0,glyphAdvance:r};if(S===0||E===0)return U;let{ctx:V,buffer:ee,gridInner:Q,gridOuter:te}=this;V.clearRect(ee,ee,S,E),V.fillText(m,ee,ee+x);let oe=V.getImageData(ee,ee,S,E);te.fill(xt,0,z),Q.fill(0,0,z);for(let he=0;he<E;he++)for(let ce=0;ce<S;ce++){let de=oe.data[4*(he*S+ce)+3]/255;if(de===0)continue;let ge=(he+ee)*A+ce+ee;if(de===1)te[ge]=0,Q[ge]=xt;else{let pe=.5-de;te[ge]=pe>0?pe*pe:0,Q[ge]=pe<0?pe*pe:0}}Jr(te,0,0,A,R,A,this.f,this.v,this.z),Jr(Q,ee,ee,S,E,A,this.f,this.v,this.z);for(let he=0;he<z;he++){let ce=Math.sqrt(te[he])-Math.sqrt(Q[he]);L[he]=Math.round(255-255*(ce/this.radius+this.cutoff))}return U}};class Nu{constructor(){this.specification=a.v.light.position}possiblyEvaluate(r,o){return a.z(r.expression.evaluate(o))}interpolate(r,o,f){return{x:a.B.number(r.x,o.x,f),y:a.B.number(r.y,o.y,f),z:a.B.number(r.z,o.z,f)}}}let il;class ju extends a.E{constructor(r){super(),il=il||new a.r({anchor:new a.D(a.v.light.anchor),position:new Nu,color:new a.D(a.v.light.color),intensity:new a.D(a.v.light.intensity)}),this._transitionable=new a.T(il),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,o={}){if(!this._validate(a.t,r,o))for(let f in r){let d=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,o,f){return(!f||f.validate!==!1)&&a.x(this,r.call(a.y,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v}))}}let er=new a.r({"sky-color":new a.D(a.v.sky["sky-color"]),"horizon-color":new a.D(a.v.sky["horizon-color"]),"fog-color":new a.D(a.v.sky["fog-color"]),"fog-ground-blend":new a.D(a.v.sky["fog-ground-blend"]),"horizon-fog-blend":new a.D(a.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new a.D(a.v.sky["sky-horizon-blend"]),"atmosphere-blend":new a.D(a.v.sky["atmosphere-blend"])});class qo extends a.E{constructor(r){super(),this._transitionable=new a.T(er),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0))}setSky(r,o={}){if(!this._validate(a.F,r,o)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let f in r){let d=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,o,f={}){return(f==null?void 0:f.validate)!==!1&&a.x(this,r.call(a.y,a.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:a.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class _a{constructor(r,o){this.width=r,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,o){let f=r.join(",")+String(o);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,o)),this.dashEntry[f]}getDashRanges(r,o,f){let d=[],v=r.length%2==1?-r[r.length-1]*f:0,x=r[0]*f,S=!0;d.push({left:v,right:x,isDash:S,zeroLength:r[0]===0});let E=r[0];for(let A=1;A<r.length;A++){S=!S;let R=r[A];v=E*f,E+=R,x=E*f,d.push({left:v,right:x,isDash:S,zeroLength:R===0})}return d}addRoundDash(r,o,f){let d=o/2;for(let v=-f;v<=f;v++){let x=this.width*(this.nextRow+f+v),S=0,E=r[S];for(let A=0;A<this.width;A++){A/E.right>1&&(E=r[++S]);let R=Math.abs(A-E.left),z=Math.abs(A-E.right),L=Math.min(R,z),U,V=v/f*(d+1);if(E.isDash){let ee=d-Math.abs(V);U=Math.sqrt(L*L+ee*ee)}else U=d-Math.sqrt(L*L+V*V);this.data[x+A]=Math.max(0,Math.min(255,U+128))}}}addRegularDash(r){for(let S=r.length-1;S>=0;--S){let E=r[S],A=r[S+1];E.zeroLength?r.splice(S,1):A&&A.isDash===E.isDash&&(A.left=E.left,r.splice(S,1))}let o=r[0],f=r[r.length-1];o.isDash===f.isDash&&(o.left=f.left-this.width,f.right=o.right+this.width);let d=this.width*this.nextRow,v=0,x=r[v];for(let S=0;S<this.width;S++){S/x.right>1&&(x=r[++v]);let E=Math.abs(S-x.left),A=Math.abs(S-x.right),R=Math.min(E,A);this.data[d+S]=Math.max(0,Math.min(255,(x.isDash?R:-R)+128))}}addDash(r,o){let f=o?7:0,d=2*f+1;if(this.nextRow+d>this.height)return a.w("LineAtlas out of space"),null;let v=0;for(let S=0;S<r.length;S++)v+=r[S];if(v!==0){let S=this.width/v,E=this.getDashRanges(r,this.width,S);o?this.addRoundDash(E,S,f):this.addRegularDash(E)}let x={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:v};return this.nextRow+=d,this.dirty=!0,x}bind(r){let o=r.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}let nl="maplibre_preloaded_worker_pool";class ia{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<ia.workerCount;)this.workers.push(new Worker(a.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(o=>{o.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[nl]}numActive(){return Object.keys(this.active).length}}let Ph=Math.floor(O.hardwareConcurrency/2),na,mi;function Po(){return na||(na=new ia),na}ia.workerCount=a.G(globalThis)?Math.max(Math.min(Ph,3),1):1;class vn{constructor(r,o){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=o;let f=this.workerPool.acquire(o);for(let d=0;d<f.length;d++){let v=new a.H(f[d],o);v.name=`Worker ${d}`,this.actors.push(v)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,o){let f=[];for(let d of this.actors)f.push(d.sendAsync({type:r,data:o}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(o=>{o.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,o){for(let f of this.actors)f.registerMessageHandler(r,o)}}function al(){return mi||(mi=new vn(Po(),a.J),mi.registerMessageHandler("GR",(m,r,o)=>a.m(r,o))),mi}function cs(m,r){let o=a.K();return a.L(o,o,[1,1,0]),a.M(o,o,[.5*m.width,.5*m.height,1]),m.calculatePosMatrix?a.N(o,o,m.calculatePosMatrix(r.toUnwrapped())):o}function Uu(m,r,o,f,d,v,x){var S;let E=function(L,U,V){if(L)for(let ee of L){let Q=U[ee];if(Q&&Q.source===V&&Q.type==="fill-extrusion")return!0}else for(let ee in U){let Q=U[ee];if(Q.source===V&&Q.type==="fill-extrusion")return!0}return!1}((S=d==null?void 0:d.layers)!==null&&S!==void 0?S:null,r,m.id),A=v.maxPitchScaleFactor(),R=m.tilesIn(f,A,E);R.sort(gn);let z=[];for(let L of R)z.push({wrappedTileID:L.tileID.wrapped().key,queryResults:L.tile.queryRenderedFeatures(r,o,m._state,L.queryGeometry,L.cameraQueryGeometry,L.scale,d,v,A,cs(m.transform,L.tileID),x?(U,V)=>x(L.tileID,U,V):void 0)});return function(L,U){for(let V in L)for(let ee of L[V])yn(ee,U);return L}(function(L){let U={},V={};for(let ee of L){let Q=ee.queryResults,te=ee.wrappedTileID,oe=V[te]=V[te]||{};for(let he in Q){let ce=Q[he],de=oe[he]=oe[he]||{},ge=U[he]=U[he]||[];for(let pe of ce)de[pe.featureIndex]||(de[pe.featureIndex]=!0,ge.push(pe))}}return U}(z),m)}function gn(m,r){let o=m.tileID,f=r.tileID;return o.overscaledZ-f.overscaledZ||o.canonical.y-f.canonical.y||o.wrap-f.wrap||o.canonical.x-f.canonical.x}function yn(m,r){let o=m.feature,f=r.getFeatureState(o.layer["source-layer"],o.id);o.source=o.layer.source,o.layer["source-layer"]&&(o.sourceLayer=o.layer["source-layer"]),o.state=f}function Fi(m,r,o){return a._(this,void 0,void 0,function*(){let f=m;if(m.url?f=(yield a.j(r.transformRequest(m.url,"Source"),o)).data:yield O.frameAsync(o),!f)return null;let d=a.O(a.e(f,m),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(d.vectorLayerIds=f.vector_layers.map(v=>v.id)),d})}class ar{constructor(r,o){r&&(o?this.setSouthWest(r).setNorthEast(o):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof a.Q?new a.Q(r.lng,r.lat):a.Q.convert(r),this}setSouthWest(r){return this._sw=r instanceof a.Q?new a.Q(r.lng,r.lat):a.Q.convert(r),this}extend(r){let o=this._sw,f=this._ne,d,v;if(r instanceof a.Q)d=r,v=r;else{if(!(r instanceof ar))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(ar.convert(r)):this.extend(a.Q.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(a.Q.convert(r)):this;if(d=r._sw,v=r._ne,!d||!v)return this}return o||f?(o.lng=Math.min(d.lng,o.lng),o.lat=Math.min(d.lat,o.lat),f.lng=Math.max(v.lng,f.lng),f.lat=Math.max(v.lat,f.lat)):(this._sw=new a.Q(d.lng,d.lat),this._ne=new a.Q(v.lng,v.lat)),this}getCenter(){return new a.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new a.Q(this.getWest(),this.getNorth())}getSouthEast(){return new a.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:o,lat:f}=a.Q.convert(r),d=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&d}static convert(r){return r instanceof ar?r:r&&new ar(r)}static fromLngLat(r,o=0){let f=360*o/40075017,d=f/Math.cos(Math.PI/180*r.lat);return new ar(new a.Q(r.lng-d,r.lat-f),new a.Q(r.lng+d,r.lat+f))}adjustAntiMeridian(){let r=new a.Q(this._sw.lng,this._sw.lat),o=new a.Q(this._ne.lng,this._ne.lat);return new ar(r,r.lng>o.lng?new a.Q(o.lng+360,o.lat):o)}}class xa{constructor(r,o,f){this.bounds=ar.convert(this.validateBounds(r)),this.minzoom=o||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){let o=Math.pow(2,r.z),f=Math.floor(a.U(this.bounds.getWest())*o),d=Math.floor(a.S(this.bounds.getNorth())*o),v=Math.ceil(a.U(this.bounds.getEast())*o),x=Math.ceil(a.S(this.bounds.getSouth())*o);return r.x>=f&&r.x<v&&r.y>=d&&r.y<x}}class Ao extends a.E{constructor(r,o,f,d){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.e(this,a.O(o,["url","scheme","tileSize","promoteId"])),this._options=a.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield Fi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(a.e(this,r),r.bounds&&(this.tileBounds=new xa(r.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new a.k(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return a.e({},this._options)}loadTile(r){return a._(this,void 0,void 0,function*(){let o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(o,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};f.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((v,x)=>{r.reloadPromise={resolve:v,reject:x}})}else r.actor=this.dispatcher.getActor(),d="LT";r.abortController=new AbortController;try{let v=yield r.actor.sendAsync({type:d,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,v)}catch(v){if(delete r.abortController,r.aborted)return;if(v&&v.status!==404)throw v;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,o){if(o&&o.resourceTiming&&(r.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&r.setExpiryData(o),r.loadVectorData(o,this.map.painter),r.reloadPromise){let f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Dn extends a.E{constructor(r,o,f,d){super(),this.id=r,this.dispatcher=f,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.e({type:"raster"},o),a.e(this,a.O(o,["url","scheme","tileSize"]))}load(){return a._(this,arguments,void 0,function*(r=!1){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let o=yield Fi(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,o&&(a.e(this,o),o.bounds&&(this.tileBounds=new xa(o.bounds,this.minzoom,this.maxzoom)),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new a.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:r})))}catch(o){this._tileJSONRequest=null,this.fire(new a.k(o))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load(!0)}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return a.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return a._(this,void 0,void 0,function*(){let o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{let f=yield ae.getImage(this.map._requestManager.transformRequest(o,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&(f.cacheControl||f.expires)&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let d=this.map.painter.context,v=d.gl,x=f.data;r.texture=this.map.painter.getTileTexture(x.width),r.texture?r.texture.update(x,{useMipmap:!0}):(r.texture=new Ve(d,x,v.RGBA,{useMipmap:!0}),r.texture.bind(v.LINEAR,v.CLAMP_TO_EDGE,v.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class $u extends Dn{constructor(r,o,f,d){super(r,o,f,d),this.type="raster-dem",this.maxzoom=22,this._options=a.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(r){return a._(this,void 0,void 0,function*(){let o=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(o,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{let d=yield ae.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){let v=d.data;this.map._refreshExpiredTiles&&(d.cacheControl||d.expires)&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let x=a.b(v)&&a.V()?v:yield this.readImageNow(v),S={type:this.type,uid:r.uid,source:this.id,rawImageData:x,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();let E=yield r.actor.sendAsync({type:"LDT",data:S});r.dem=E,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}readImageNow(r){return a._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&a.W()){let o=r.width+2,f=r.height+2;try{return new a.R({width:o,height:f},yield a.X(r,-1,-1,o,f))}catch(d){}}return O.getImageData(r,1)})}_getNeighboringTiles(r){let o=r.canonical,f=Math.pow(2,o.z),d=(o.x-1+f)%f,v=o.x===0?r.wrap-1:r.wrap,x=(o.x+1+f)%f,S=o.x+1===f?r.wrap+1:r.wrap,E={};return E[new a.Y(r.overscaledZ,v,o.z,d,o.y).key]={backfilled:!1},E[new a.Y(r.overscaledZ,S,o.z,x,o.y).key]={backfilled:!1},o.y>0&&(E[new a.Y(r.overscaledZ,v,o.z,d,o.y-1).key]={backfilled:!1},E[new a.Y(r.overscaledZ,r.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},E[new a.Y(r.overscaledZ,S,o.z,x,o.y-1).key]={backfilled:!1}),o.y+1<f&&(E[new a.Y(r.overscaledZ,v,o.z,d,o.y+1).key]={backfilled:!1},E[new a.Y(r.overscaledZ,r.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},E[new a.Y(r.overscaledZ,S,o.z,x,o.y+1).key]={backfilled:!1}),E}unloadTile(r){return a._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Vu extends a.E{constructor(r,o,f,d){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(d),this._data=o.data,this._options=a.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId,o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&a.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=a.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(o.buffer!==void 0?o.buffer:128),tolerance:this._pixelsToTileUnits(o.tolerance!==void 0?o.tolerance:.375),extent:a.Z,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:a.Z,radius:this._pixelsToTileUnits(o.clusterRadius||50),log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(r){return r*(a.Z/this.tileSize)}load(){return a._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return a._(this,void 0,void 0,function*(){let r=a.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}getCoordinatesFromGeometry(r){return r.type==="GeometryCollection"?r.geometries.map(o=>o.coordinates).flat(1/0):r.coordinates.flat(1/0)}getBounds(){return a._(this,void 0,void 0,function*(){let r=new ar,o=yield this.getData(),f;switch(o.type){case"FeatureCollection":f=o.features.map(d=>this.getCoordinatesFromGeometry(d.geometry)).flat(1/0);break;case"Feature":f=this.getCoordinatesFromGeometry(o.geometry);break;default:f=this.getCoordinatesFromGeometry(o)}if(f.length==0)return r;for(let d=0;d<f.length-1;d+=2)r.extend([f[d],f[d+1]]);return r})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(r.clusterRadius)),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,o,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:o,offset:f}})}_updateWorkerData(r){return a._(this,void 0,void 0,function*(){let o=a.e({type:this.type},this.workerOptions);r?o.dataDiff=r:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(O.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new a.l("dataloading",{dataType:"source"}));try{let f=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new a.l("dataabort",{dataType:"source"}));let d=null;f.resourceTiming&&f.resourceTiming[this.id]&&(d=f.resourceTiming[this.id].slice(0));let v={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&a.e(v,{resourceTiming:d}),this.fire(new a.l("data",Object.assign(Object.assign({},v),{sourceDataType:"metadata"}))),this.fire(new a.l("data",Object.assign(Object.assign({},v),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new a.l("dataabort",{dataType:"source"}));this.fire(new a.k(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return a._(this,void 0,void 0,function*(){let o=r.actor?"RT":"LT";r.actor=this.actor;let f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};r.abortController=new AbortController;let d=yield this.actor.sendAsync({type:o,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(d,this.map.painter,o==="RT")})}abortTile(r){return a._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return a._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return a.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class _n extends a.E{constructor(r,o,f,d){super(),this.flippedWindingOrder=!1,this.id=r,this.dispatcher=f,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=o}load(r){return a._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new a.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let o=yield ae.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,r&&(this.coordinates=r),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new a.k(o))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let o=r.map(a.$.fromLngLat);var f;return this.tileID=function(d){let v=1/0,x=1/0,S=-1/0,E=-1/0;for(let L of d)v=Math.min(v,L.x),x=Math.min(x,L.y),S=Math.max(S,L.x),E=Math.max(E,L.y);let A=Math.max(S-v,E-x),R=Math.max(0,Math.floor(-Math.log(A)/Math.LN2)),z=Math.pow(2,R);return new a.a1(R,Math.floor((v+S)/2*z),Math.floor((x+E)/2*z))}(o),this.terrainTileRanges=this._getOverlappingTileRanges(o),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=o.map(d=>this.tileID.getTilePoint(d)._round()),this.flippedWindingOrder=((f=this.tileCoords)[1].x-f[0].x)*(f[2].y-f[0].y)-(f[1].y-f[0].y)*(f[2].x-f[0].x)<0,this.fire(new a.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,o=r.gl;this.texture||(this.texture=new Ve(r,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return a._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(r){let o=1/0,f=1/0,d=-1/0,v=-1/0;for(let S of r)o=Math.min(o,S.x),f=Math.min(f,S.y),d=Math.max(d,S.x),v=Math.max(v,S.y);let x={};for(let S=0;S<=a.a0;S++){let E=Math.pow(2,S),A=Math.floor(o*E),R=Math.floor(f*E),z=Math.floor(d*E),L=Math.floor(v*E);x[S]={minTileX:A,minTileY:R,maxTileX:z,maxTileY:L}}return x}}class ba extends _n{constructor(r,o,f,d){super(r,o,f,d),this.roundZoom=!0,this.type="video",this.options=o}load(){return a._(this,void 0,void 0,function*(){this._loaded=!1;let r=this.options;this.urls=[];for(let o of r.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{let o=yield a.a2(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new a.k(o))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){let o=this.video.seekable;r<o.start(0)||r>o.end(0)?this.fire(new a.k(new a.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let r=this.map.painter.context,o=r.gl;this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new Ve(r,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let v=this.tiles[d];v.state!=="loaded"&&(v.state="loaded",v.texture=this.texture,f=!0)}f&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class hs extends _n{constructor(r,o,f,d){super(r,o,f,d),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some(v=>!Array.isArray(v)||v.length!==2||v.some(x=>typeof x!="number"))||this.fire(new a.k(new a.a3(`sources.${r}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new a.k(new a.a3(`sources.${r}`,null,"missing required property \"coordinates\""))),o.animate&&typeof o.animate!="boolean"&&this.fire(new a.k(new a.a3(`sources.${r}`,null,"optional \"animate\" property must be a boolean value"))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new a.k(new a.a3(`sources.${r}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new a.k(new a.a3(`sources.${r}`,null,"missing required property \"canvas\""))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return a._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let o=this.map.painter.context,f=o.gl;this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Ve(o,this.canvas,f.RGBA,{premultiply:!0});let d=!1;for(let v in this.tiles){let x=this.tiles[v];x.state!=="loaded"&&(x.state="loaded",x.texture=this.texture,d=!0)}d&&this.fire(new a.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}let fs={},Ya=m=>{switch(m){case"geojson":return Vu;case"image":return _n;case"raster":return Dn;case"raster-dem":return $u;case"vector":return Ao;case"video":return ba;case"canvas":return hs}return fs[m]},ol="RTLPluginLoaded";class sl extends a.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=al()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(o=>{throw this.status="error",o})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return a._(this,arguments,void 0,function*(o,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=O.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return a._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new a.l(ol))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ll=null;function Xa(){return ll||(ll=new sl),ll}class Ja{constructor(r,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=a.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){let o=r+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,o,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(d,v){let x={};if(!v)return x;for(let S of d){let E=S.layerIds.map(A=>v.getLayer(A)).filter(Boolean);if(E.length!==0){S.layers=E,S.stateDependentLayerIds&&(S.stateDependentLayers=S.stateDependentLayerIds.map(A=>E.filter(R=>R.id===A)[0]));for(let A of E)x[A.id]=S}}return x}(r.buckets,o==null?void 0:o.style),this.hasSymbolBuckets=!1;for(let d in this.buckets){let v=this.buckets[d];if(v instanceof a.a6){if(this.hasSymbolBuckets=!0,!f)break;v.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let d in this.buckets){let v=this.buckets[d];if(v instanceof a.a6&&v.hasRTLText){this.hasRTLText=!0,Xa().lazyLoad();break}}this.queryPadding=0;for(let d in this.buckets){let v=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(d).queryRadius(v))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new a.a5}unloadVectorData(){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(let f in this.buckets){let d=this.buckets[f];d.uploadPending()&&d.upload(r)}let o=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Ve(r,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Ve(r,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,o,f,d,v,x,S,E,A,R,z){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:v,scale:x,tileSize:this.tileSize,pixelPosMatrix:R,transform:E,params:S,queryPadding:this.queryPadding*A,getElevation:z},r,o,f):{}}querySourceFeatures(r,o){let f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;let d=f.loadVTLayers(),v=o&&o.sourceLayer?o.sourceLayer:"",x=d._geojsonTileLayer||d[v];if(!x)return;let S=a.a7(o&&o.filter),{z:E,x:A,y:R}=this.tileID.canonical,z={z:E,x:A,y:R};for(let L=0;L<x.length;L++){let U=x.feature(L);if(S.needGeometry){let Q=a.a8(U,!0);if(!S.filter(new a.C(this.tileID.overscaledZ),Q,this.tileID.canonical))continue}else if(!S.filter(new a.C(this.tileID.overscaledZ),U))continue;let V=f.getId(U,v),ee=new a.a9(U,E,A,R,V);ee.tile=z,r.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let o=this.expirationTime;if(r.cacheControl){let f=a.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let f=Date.now(),d=!1;if(this.expirationTime>f)d=!1;else if(o){if(this.expirationTime<o)d=!0;else{let v=this.expirationTime-o;v?this.expirationTime=f+Math.max(v,3e4):d=!0}}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;let f=this.latestFeatureIndex.loadVTLayers();for(let d in this.buckets){if(!o.style.hasLayer(d))continue;let v=this.buckets[d],x=v.layers[0].sourceLayer||"_geojsonTileLayer",S=f[x],E=r[x];if(!S||!E||Object.keys(E).length===0)continue;v.update(E,S,this.imageAtlas&&this.imageAtlas.patternPositions||{});let A=o&&o.style&&o.style.getLayer(d);A&&(this.queryPadding=Math.max(this.queryPadding,A.queryRadius(v)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<O.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=O.now()+r}setDependencies(r,o){let f={};for(let d of o)f[d]=!0;this.dependencies[r]=f}hasDependency(r,o){for(let f of r){let d=this.dependencies[f];if(d){for(let v of o)if(d[v])return!0}}return!1}}class Co{constructor(r,o){this.max=r,this.onRemove=o,this.reset()}reset(){for(let r in this.data)for(let o of this.data[r])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(r,o,f){let d=r.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);let v={value:o,timeout:void 0};if(f!==void 0&&(v.timeout=setTimeout(()=>{this.remove(r,v)},f)),this.data[d].push(v),this.order.push(d),this.order.length>this.max){let x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let o=this.data[r].shift();return o.timeout&&clearTimeout(o.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),o.value}getByKey(r){let o=this.data[r];return o?o[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,o){if(!this.has(r))return this;let f=r.wrapped().key,d=o===void 0?0:this.data[f].indexOf(o),v=this.data[f][d];return this.data[f].splice(d,1),v.timeout&&clearTimeout(v.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(v.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(r){let o=[];for(let f in this.data)for(let d of this.data[f])r(d.value)||o.push(d);for(let f of o)this.remove(f.value.tileID,f)}}class ul{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,o,f){let d=String(o);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][d]=this.stateChanges[r][d]||{},a.e(this.stateChanges[r][d],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(let v in this.state[r])v!==d&&(this.deletedStates[r][v]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][d]===null){this.deletedStates[r][d]={};for(let v in this.state[r][d])f[v]||(this.deletedStates[r][d][v]=null)}else for(let v in f)this.deletedStates[r]&&this.deletedStates[r][d]&&this.deletedStates[r][d][v]===null&&delete this.deletedStates[r][d][v]}removeFeatureState(r,o,f){if(this.deletedStates[r]===null)return;let d=String(o);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&o!==void 0)this.deletedStates[r][d]!==null&&(this.deletedStates[r][d]=this.deletedStates[r][d]||{},this.deletedStates[r][d][f]=null);else if(o!==void 0){if(this.stateChanges[r]&&this.stateChanges[r][d])for(f in this.deletedStates[r][d]={},this.stateChanges[r][d])this.deletedStates[r][d][f]=null;else this.deletedStates[r][d]=null;}else this.deletedStates[r]=null}getState(r,o){let f=String(o),d=a.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){let v=this.deletedStates[r][o];if(v===null)return{};for(let x in v)delete d[x]}return d}initializeTileState(r,o){r.setFeatureState(this.state,o)}coalesceChanges(r,o){let f={};for(let d in this.stateChanges){this.state[d]=this.state[d]||{};let v={};for(let x in this.stateChanges[d])this.state[d][x]||(this.state[d][x]={}),a.e(this.state[d][x],this.stateChanges[d][x]),v[x]=this.state[d][x];f[d]=v}for(let d in this.deletedStates){this.state[d]=this.state[d]||{};let v={};if(this.deletedStates[d]===null)for(let x in this.state[d])v[x]={},this.state[d][x]={};else for(let x in this.deletedStates[d]){if(this.deletedStates[d][x]===null)this.state[d][x]={};else for(let S of Object.keys(this.deletedStates[d][x]))delete this.state[d][x][S];v[x]=this.state[d][x]}f[d]=f[d]||{},a.e(f[d],v)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(let d in r)r[d].setFeatureState(f,o)}}let Ln=89.25;function nn(m,r){let o=a.ae(r.lat,-85.051129,a.af);return new a.P(a.U(r.lng)*m,a.S(o)*m)}function wa(m,r){return new a.$(r.x/m,r.y/m).toLngLat()}function xe(m){return m.cameraToCenterDistance*Math.min(.85*Math.tan(a.ab(90-m.pitch)),Math.tan(a.ab(Ln-m.pitch)))}function Z(m,r){let o=m.canonical,f=r/a.ac(o.z),d=o.x+Math.pow(2,o.z)*m.wrap,v=a.ad(new Float64Array(16));return a.L(v,v,[d*f,o.y*f,0]),a.M(v,v,[f/a.Z,f/a.Z,1]),v}function H(m,r,o,f,d){let v=a.$.fromLngLat(m,r),x=d*a.ag(1,m.lat),S=x*Math.cos(a.ab(o)),E=Math.sqrt(x*x-S*S),A=E*Math.sin(a.ab(-f)),R=E*Math.cos(a.ab(-f));return new a.$(v.x+A,v.y+R,v.z+S)}function J(m,r,o){let f=r.intersectsFrustum(m);if(!o)return f;let d=r.intersectsPlane(o);return f===0||d===0?0:f===2&&d===2?2:1}function le(m,r,o){let f=0,d=(o-r)/10;for(let v=0;v<10;v++)f+=d*Math.pow(Math.cos(r+(v+.5)/10*(o-r)),m);return f}function ve(m,r){return function(o,f,d,v,x){let S=2*((m-1)/a.ah(Math.cos(a.ab(Ln-x))/Math.cos(a.ab(Ln)))-1),E=Math.acos(d/v),A=2*le(S-1,0,a.ab(x/2)),R=Math.min(a.ab(Ln),E+a.ab(x/2)),z=le(S-1,Math.min(R,E-a.ab(x/2)),R),L=Math.atan(f/d),U=Math.hypot(f,d),V=o;return V+=a.ah(v/U/Math.max(.5,Math.cos(a.ab(x/2)))),V+=S*a.ah(Math.cos(L))/2,V-=a.ah(Math.max(1,z/A/r))/2,V}}let X=ve(9.314,3);function qe(m,r){let o=(r.roundZoom?Math.round:Math.floor)(m.zoom+a.ah(m.tileSize/r.tileSize));return Math.max(0,o)}function ye(m,r){let o=m.getCameraFrustum(),f=m.getClippingPlane(),d=m.screenPointToMercatorCoordinate(m.getCameraPoint()),v=a.$.fromLngLat(m.center,m.elevation);d.z=v.z+Math.cos(m.pitchInRadians)*m.cameraToCenterDistance/m.worldSize;let x=m.getCoveringTilesDetailsProvider(),S=x.allowVariableZoom(m,r),E=qe(m,r),A=r.minzoom||0,R=r.maxzoom!==void 0?r.maxzoom:m.maxZoom,z=Math.min(Math.max(0,E),R),L=Math.pow(2,z),U=[L*d.x,L*d.y,0],V=[L*v.x,L*v.y,0],ee=Math.hypot(v.x-d.x,v.y-d.y),Q=Math.abs(v.z-d.z),te=Math.hypot(ee,Q),oe=de=>({zoom:0,x:0,y:0,wrap:de,fullyVisible:!1}),he=[],ce=[];if(m.renderWorldCopies&&x.allowWorldCopies())for(let de=1;de<=3;de++)he.push(oe(-de)),he.push(oe(de));for(he.push(oe(0));he.length>0;){let de=he.pop(),ge=de.x,pe=de.y,Ie=de.fullyVisible,Le={x:ge,y:pe,z:de.zoom},Me=x.getTileAABB(Le,de.wrap,m.elevation,r);if(!Ie){let We=J(o,Me,f);if(We===0)continue;Ie=We===2}let Re=x.distanceToTile2d(d.x,d.y,Le,Me),Oe=E;S&&(Oe=(r.calculateTileZoom||X)(m.zoom+a.ah(m.tileSize/r.tileSize),Re,Q,te,m.fov)),Oe=(r.roundZoom?Math.round:Math.floor)(Oe),Oe=Math.max(0,Oe);let Ke=Math.min(Oe,R);if(de.wrap=x.getWrap(v,Le,de.wrap),de.zoom>=Ke){if(de.zoom<A)continue;let We=z-de.zoom,Ue=U[0]-.5-(ge<<We),at=U[1]-.5-(pe<<We),Ct=r.reparseOverscaled?Math.max(de.zoom,Oe):de.zoom;ce.push({tileID:new a.Y(de.zoom===R?Ct:de.zoom,de.wrap,de.zoom,ge,pe),distanceSq:a.ai([V[0]-.5-ge,V[1]-.5-pe]),tileDistanceToCamera:Math.sqrt(Ue*Ue+at*at)})}else for(let We=0;We<4;We++)he.push({zoom:de.zoom+1,x:(ge<<1)+We%2,y:(pe<<1)+(We>>1),wrap:de.wrap,fullyVisible:Ie})}return ce.sort((de,ge)=>de.distanceSq-ge.distanceSq).map(de=>de.tileID)}class we extends a.E{constructor(r,o,f){super(),this.id=r,this.dispatcher=f,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,v,x,S)=>{let E=new(Ya(v.type))(d,v,x,S);if(E.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${E.id}`);return E})(r,o,f,this),this._tiles={},this._cache=new Co(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ul,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let r in this._tiles){let o=this._tiles[r];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,o,f){return a._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,o,f)}catch(d){r.state="errored",d.status!==404?this._source.fire(new a.k(d,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new a.l("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let o in this._tiles){let f=this._tiles[o];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(Ae).map(r=>r.key)}getRenderableIds(r){let o=[];for(let f in this._tiles)this._isIdRenderable(f,r)&&o.push(this._tiles[f]);return r?o.sort((f,d)=>{let v=f.tileID,x=d.tileID,S=new a.P(v.canonical.x,v.canonical.y)._rotate(-this.transform.bearingInRadians),E=new a.P(x.canonical.x,x.canonical.y)._rotate(-this.transform.bearingInRadians);return v.overscaledZ-x.overscaledZ||E.y-S.y||E.x-S.x}).map(f=>f.tileID.key):o.map(f=>f.tileID).sort(Ae).map(f=>f.key)}hasRenderableParent(r){let o=this.findLoadedParent(r,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(r,o){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(o||!this._tiles[r].holdingForFade())}reload(r){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let o in this._tiles)(r||this._tiles[o].state!=="errored")&&this._reloadTile(o,"reloading")}}_reloadTile(r,o){return a._(this,void 0,void 0,function*(){let f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=o),yield this._loadTile(f,r,o))})}_tileLoaded(r,o,f){r.timeAdded=O.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(o,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new a.l("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){let o=this.getRenderableIds();for(let d=0;d<o.length;d++){let v=o[d];if(r.neighboringTiles&&r.neighboringTiles[v]){let x=this.getTileByID(v);f(r,x),f(x,r)}}function f(d,v){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let x=v.tileID.canonical.x-d.tileID.canonical.x,S=v.tileID.canonical.y-d.tileID.canonical.y,E=Math.pow(2,d.tileID.canonical.z),A=v.tileID.key;x===0&&S===0||Math.abs(S)>1||(Math.abs(x)>1&&(Math.abs(x+E)===1?x+=E:Math.abs(x-E)===1&&(x-=E)),v.dem&&d.dem&&(d.dem.backfillBorder(v.dem,x,S),d.neighboringTiles&&d.neighboringTiles[A]&&(d.neighboringTiles[A].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,o,f,d){for(let v in this._tiles){let x=this._tiles[v];if(d[v]||!x.hasData()||x.tileID.overscaledZ<=o||x.tileID.overscaledZ>f)continue;let S=x.tileID;for(;x&&x.tileID.overscaledZ>o+1;){let A=x.tileID.scaledTo(x.tileID.overscaledZ-1);x=this._tiles[A.key],x&&x.hasData()&&(S=A)}let E=S;for(;E.overscaledZ>o;)if(E=E.scaledTo(E.overscaledZ-1),r[E.key]||r[E.canonical.key]){d[S.key]=S;break}}}findLoadedParent(r,o){if(r.key in this._loadedParentTiles){let f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=o?f:null}for(let f=r.overscaledZ-1;f>=o;f--){let d=r.scaledTo(f),v=this._getLoadedTile(d);if(v)return v}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){let o=this._tiles[r.key];return o&&o.hasData()?o:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){let o=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,d=Math.floor(o*f*(this._maxTileCacheZoomLevels===null?a.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),v=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(v)}handleWrapJump(r){let o=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,o){let f={};for(let d in this._tiles){let v=this._tiles[d];v.tileID=v.tileID.unwrapTo(v.tileID.wrap+o),f[v.tileID.key]=v}this._tiles=f;for(let d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(let d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(r,o,f,d,v,x){let S={},E={},A=Object.keys(r),R=O.now();for(let z of A){let L=r[z],U=this._tiles[z];if(!U||U.fadeEndTime!==0&&U.fadeEndTime<=R)continue;let V=this.findLoadedParent(L,o),ee=this.findLoadedSibling(L),Q=V||ee||null;Q&&(this._addTile(Q.tileID),S[Q.tileID.key]=Q.tileID),E[z]=L}this._retainLoadedChildren(E,d,f,r);for(let z in S)r[z]||(this._coveredTiles[z]=!0,r[z]=S[z]);if(x){let z={},L={};for(let U of v)this._tiles[U.key].hasData()?z[U.key]=U:L[U.key]=U;for(let U in L){let V=L[U].children(this._source.maxzoom);this._tiles[V[0].key]&&this._tiles[V[1].key]&&this._tiles[V[2].key]&&this._tiles[V[3].key]&&(z[V[0].key]=r[V[0].key]=V[0],z[V[1].key]=r[V[1].key]=V[1],z[V[2].key]=r[V[2].key]=V[2],z[V[3].key]=r[V[3].key]=V[3],delete L[U])}for(let U in L){let V=L[U],ee=this.findLoadedParent(V,this._source.minzoom),Q=this.findLoadedSibling(V),te=ee||Q||null;if(te){z[te.tileID.key]=r[te.tileID.key]=te.tileID;for(let oe in z)z[oe].isChildOf(te.tileID)&&delete z[oe]}}for(let U in this._tiles)z[U]||(this._coveredTiles[U]=!0)}}update(r,o){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=o,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(R=>new a.Y(R.canonical.z,R.wrap,R.canonical.z,R.canonical.x,R.canonical.y)):(f=ye(r,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(f=f.filter(R=>this._source.hasTile(R)))):f=[];let d=qe(r,this._source),v=Math.max(d-we.maxOverzooming,this._source.minzoom),x=Math.max(d+we.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let R={};for(let z of f)if(z.canonical.z>this._source.minzoom){let L=z.scaledTo(z.canonical.z-1);R[L.key]=L;let U=z.scaledTo(Math.max(this._source.minzoom,Math.min(z.canonical.z,5)));R[U.key]=U}f=f.concat(Object.values(R))}let S=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,S&&this.fire(new a.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let E=this._updateRetainedTiles(f,d);be(this._source.type)&&this._updateCoveredAndRetainedTiles(E,v,x,d,f,o);for(let R in E)this._tiles[R].clearFadeHold();let A=a.aj(this._tiles,E);for(let R of A){let z=this._tiles[R];z.hasSymbolBuckets&&!z.holdingForFade()?z.setHoldDuration(this.map._fadeDuration):z.hasSymbolBuckets&&!z.symbolFadeFinished()||this._removeTile(R)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,o){var f;let d={},v={},x=Math.max(o-we.maxOverzooming,this._source.minzoom),S=Math.max(o+we.maxUnderzooming,this._source.minzoom),E={};for(let A of r){let R=this._addTile(A);d[A.key]=A,R.hasData()||o<this._source.maxzoom&&(E[A.key]=A)}this._retainLoadedChildren(E,o,S,d);for(let A of r){let R=this._tiles[A.key];if(R.hasData())continue;if(o+1>this._source.maxzoom){let L=A.children(this._source.maxzoom)[0],U=this.getTile(L);if(U&&U.hasData()){d[L.key]=L;continue}}else{let L=A.children(this._source.maxzoom);if(d[L[0].key]&&d[L[1].key]&&d[L[2].key]&&d[L[3].key])continue}let z=R.wasRequested();for(let L=A.overscaledZ-1;L>=x;--L){let U=A.scaledTo(L);if(v[U.key])break;if(v[U.key]=!0,R=this.getTile(U),!R&&z&&(R=this._addTile(U)),R){let V=R.hasData();if((V||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||z)&&(d[U.key]=U),z=R.wasRequested(),V)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let r in this._tiles){let o=[],f,d=this._tiles[r].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){f=this._loadedParentTiles[d.key];break}o.push(d.key);let v=d.scaledTo(d.overscaledZ-1);if(f=this._getLoadedTile(v),f)break;d=v}for(let v of o)this._loadedParentTiles[v]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let r in this._tiles){let o=this._tiles[r].tileID,f=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=f}}_addTile(r){let o=this._tiles[r.key];if(o)return o;o=this._cache.getAndRemove(r),o&&(this._setTileReloadTimer(r.key,o),o.tileID=r,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,o)));let f=o;return o||(o=new Ja(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(o,r.key,o.state)),o.uses++,this._tiles[r.key]=o,f||this._source.fire(new a.l("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(r,o){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let f=o.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}refreshTiles(r){for(let o in this._tiles)this._isIdRenderable(o)&&r.some(f=>f.equals(this._tiles[o].tileID.canonical))&&this._reloadTile(o,"expired")}_removeTile(r){let o=this._tiles[r];o&&(o.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(r){let o=r.sourceDataType;r.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&o==="content"&&(this.reload(r.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,o,f){let d=[],v=this.transform;if(!v)return d;let x=f?v.getCameraQueryGeometry(r):r,S=r.map(V=>v.screenPointToMercatorCoordinate(V,this.terrain)),E=x.map(V=>v.screenPointToMercatorCoordinate(V,this.terrain)),A=this.getIds(),R=1/0,z=1/0,L=-1/0,U=-1/0;for(let V of E)R=Math.min(R,V.x),z=Math.min(z,V.y),L=Math.max(L,V.x),U=Math.max(U,V.y);for(let V=0;V<A.length;V++){let ee=this._tiles[A[V]];if(ee.holdingForFade())continue;let Q=v.getCoveringTilesDetailsProvider().allowWorldCopies()?ee.tileID:ee.tileID.unwrapTo(0),te=Math.pow(2,v.zoom-ee.tileID.overscaledZ),oe=o*ee.queryPadding*a.Z/ee.tileSize/te,he=[Q.getTilePoint(new a.$(R,z)),Q.getTilePoint(new a.$(L,U))];if(he[0].x-oe<a.Z&&he[0].y-oe<a.Z&&he[1].x+oe>=0&&he[1].y+oe>=0){let ce=S.map(ge=>Q.getTilePoint(ge)),de=E.map(ge=>Q.getTilePoint(ge));d.push({tile:ee,tileID:Q,queryGeometry:ce,cameraQueryGeometry:de,scale:te})}}return d}getVisibleCoordinates(r){let o=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);return this.transform&&this.transform.populateCache(o),o}hasTransition(){if(this._source.hasTransition())return!0;if(be(this._source.type)){let r=O.now();for(let o in this._tiles)if(this._tiles[o].fadeEndTime>=r)return!0}return!1}setFeatureState(r,o,f){this._state.updateState(r=r||"_geojsonTileLayer",o,f)}removeFeatureState(r,o,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",o,f)}getFeatureState(r,o){return this._state.getState(r=r||"_geojsonTileLayer",o)}setDependencies(r,o,f){let d=this._tiles[r];d&&d.setDependencies(o,f)}reloadTilesForDependencies(r,o){for(let f in this._tiles)this._tiles[f].hasDependency(r,o)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,o))}}function Ae(m,r){let o=Math.abs(2*m.wrap)-+(m.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return m.overscaledZ-r.overscaledZ||f-o||r.canonical.y-m.canonical.y||r.canonical.x-m.canonical.x}function be(m){return m==="raster"||m==="image"||m==="video"}we.maxOverzooming=10,we.maxUnderzooming=3;class Be{constructor(r,o){this.reset(r,o)}reset(r,o){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=a.ae(r,0,1);let o=1,f=this._distances[o],d=r*this.paddedLength+this.padding;for(;f<d&&o<this._distances.length;)f=this._distances[++o];let v=o-1,x=this._distances[v],S=f-x,E=S>0?(d-x)/S:0;return this.points[v].mult(1-E).add(this.points[o].mult(E))}}function Ye(m,r){let o=!0;return m==="always"||m!=="never"&&r!=="never"||(o=!1),o}class Xe{constructor(r,o,f){let d=this.boxCells=[],v=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(o/f);for(let x=0;x<this.xCellCount*this.yCellCount;x++)d.push([]),v.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=o,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,o,f,d,v){this._forEachCell(o,f,d,v,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(o),this.bboxes.push(f),this.bboxes.push(d),this.bboxes.push(v)}insertCircle(r,o,f,d){this._forEachCell(o-d,f-d,o+d,f+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(o),this.circles.push(f),this.circles.push(d)}_insertBoxCell(r,o,f,d,v,x){this.boxCells[v].push(x)}_insertCircleCell(r,o,f,d,v,x){this.circleCells[v].push(x)}_query(r,o,f,d,v,x,S){if(f<0||r>this.width||d<0||o>this.height)return[];let E=[];if(r<=0&&o<=0&&this.width<=f&&this.height<=d){if(v)return[{key:null,x1:r,y1:o,x2:f,y2:d}];for(let A=0;A<this.boxKeys.length;A++)E.push({key:this.boxKeys[A],x1:this.bboxes[4*A],y1:this.bboxes[4*A+1],x2:this.bboxes[4*A+2],y2:this.bboxes[4*A+3]});for(let A=0;A<this.circleKeys.length;A++){let R=this.circles[3*A],z=this.circles[3*A+1],L=this.circles[3*A+2];E.push({key:this.circleKeys[A],x1:R-L,y1:z-L,x2:R+L,y2:z+L})}}else this._forEachCell(r,o,f,d,this._queryCell,E,{hitTest:v,overlapMode:x,seenUids:{box:{},circle:{}}},S);return E}query(r,o,f,d){return this._query(r,o,f,d,!1,null)}hitTest(r,o,f,d,v,x){return this._query(r,o,f,d,!0,v,x).length>0}hitTestCircle(r,o,f,d,v){let x=r-f,S=r+f,E=o-f,A=o+f;if(S<0||x>this.width||A<0||E>this.height)return!1;let R=[];return this._forEachCell(x,E,S,A,this._queryCellCircle,R,{hitTest:!0,overlapMode:d,circle:{x:r,y:o,radius:f},seenUids:{box:{},circle:{}}},v),R.length>0}_queryCell(r,o,f,d,v,x,S,E){let{seenUids:A,hitTest:R,overlapMode:z}=S,L=this.boxCells[v];if(L!==null){let V=this.bboxes;for(let ee of L)if(!A.box[ee]){A.box[ee]=!0;let Q=4*ee,te=this.boxKeys[ee];if(r<=V[Q+2]&&o<=V[Q+3]&&f>=V[Q+0]&&d>=V[Q+1]&&(!E||E(te))&&(!R||!Ye(z,te.overlapMode))&&(x.push({key:te,x1:V[Q],y1:V[Q+1],x2:V[Q+2],y2:V[Q+3]}),R))return!0}}let U=this.circleCells[v];if(U!==null){let V=this.circles;for(let ee of U)if(!A.circle[ee]){A.circle[ee]=!0;let Q=3*ee,te=this.circleKeys[ee];if(this._circleAndRectCollide(V[Q],V[Q+1],V[Q+2],r,o,f,d)&&(!E||E(te))&&(!R||!Ye(z,te.overlapMode))){let oe=V[Q],he=V[Q+1],ce=V[Q+2];if(x.push({key:te,x1:oe-ce,y1:he-ce,x2:oe+ce,y2:he+ce}),R)return!0}}}return!1}_queryCellCircle(r,o,f,d,v,x,S,E){let{circle:A,seenUids:R,overlapMode:z}=S,L=this.boxCells[v];if(L!==null){let V=this.bboxes;for(let ee of L)if(!R.box[ee]){R.box[ee]=!0;let Q=4*ee,te=this.boxKeys[ee];if(this._circleAndRectCollide(A.x,A.y,A.radius,V[Q+0],V[Q+1],V[Q+2],V[Q+3])&&(!E||E(te))&&!Ye(z,te.overlapMode))return x.push(!0),!0}}let U=this.circleCells[v];if(U!==null){let V=this.circles;for(let ee of U)if(!R.circle[ee]){R.circle[ee]=!0;let Q=3*ee,te=this.circleKeys[ee];if(this._circlesCollide(V[Q],V[Q+1],V[Q+2],A.x,A.y,A.radius)&&(!E||E(te))&&!Ye(z,te.overlapMode))return x.push(!0),!0}}}_forEachCell(r,o,f,d,v,x,S,E){let A=this._convertToXCellCoord(r),R=this._convertToYCellCoord(o),z=this._convertToXCellCoord(f),L=this._convertToYCellCoord(d);for(let U=A;U<=z;U++)for(let V=R;V<=L;V++)if(v.call(this,r,o,f,d,this.xCellCount*V+U,x,S,E))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,o,f,d,v,x){let S=d-r,E=v-o,A=f+x;return A*A>S*S+E*E}_circleAndRectCollide(r,o,f,d,v,x,S){let E=(x-d)/2,A=Math.abs(r-(d+E));if(A>E+f)return!1;let R=(S-v)/2,z=Math.abs(o-(v+R));if(z>R+f)return!1;if(A<=E||z<=R)return!0;let L=A-E,U=z-R;return L*L+U*U<=f*f}}function ht(m,r,o){let f=a.K();if(!m){let{vecSouth:z,vecEast:L}=yt(r),U=w();U[0]=L[0],U[1]=L[1],U[2]=z[0],U[3]=z[1],d=U,(R=(x=(v=U)[0])*(A=v[3])-(E=v[2])*(S=v[1]))&&(d[0]=A*(R=1/R),d[1]=-S*R,d[2]=-E*R,d[3]=x*R),f[0]=U[0],f[1]=U[1],f[4]=U[2],f[5]=U[3]}var d,v,x,S,E,A,R;return a.M(f,f,[1/o,1/o,1]),f}function Et(m,r,o,f){if(m){let d=a.K();if(!r){let{vecSouth:v,vecEast:x}=yt(o);d[0]=x[0],d[1]=x[1],d[4]=v[0],d[5]=v[1]}return a.M(d,d,[f,f,1]),d}return o.pixelsToClipSpaceMatrix}function yt(m){let r=Math.cos(m.rollInRadians),o=Math.sin(m.rollInRadians),f=Math.cos(m.pitchInRadians),d=Math.cos(m.bearingInRadians),v=Math.sin(m.bearingInRadians),x=a.ao();x[0]=-d*f*o-v*r,x[1]=-v*f*o+d*r;let S=a.ap(x);S<1e-9?a.aq(x):a.ar(x,x,1/S);let E=a.ao();E[0]=d*f*r-v*o,E[1]=v*f*r+d*o;let A=a.ap(E);return A<1e-9?a.aq(E):a.ar(E,E,1/A),{vecEast:E,vecSouth:x}}function ke(m,r,o,f){let d;f?(d=[m,r,f(m,r),1],a.at(d,d,o)):(d=[m,r,0,1],ps(d,d,o));let v=d[3];return{point:new a.P(d[0]/v,d[1]/v),signedDistanceFromCamera:v,isOccluded:!1}}function Yt(m,r){return .5+m/r*.5}function Bt(m,r){return m.x>=-r[0]&&m.x<=r[0]&&m.y>=-r[1]&&m.y<=r[1]}function Zt(m,r,o,f,d,v,x,S,E,A,R,z,L){let U=o?m.textSizeData:m.iconSizeData,V=a.ak(U,r.transform.zoom),ee=[256/r.width*2+1,256/r.height*2+1],Q=o?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;Q.clear();let te=m.lineVertexArray,oe=o?m.text.placedSymbolArray:m.icon.placedSymbolArray,he=r.transform.width/r.transform.height,ce=!1;for(let de=0;de<oe.length;de++){let ge=oe.get(de);if(ge.hidden||ge.writingMode===a.al.vertical&&!ce){Qa(ge.numGlyphs,Q);continue}ce=!1;let pe=new a.P(ge.anchorX,ge.anchorY),Ie={getElevation:L,pitchedLabelPlaneMatrix:f,lineVertexArray:te,pitchWithMap:v,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:r.transform,tileAnchorPoint:pe,unwrappedTileID:E,width:A,height:R,translation:z},Le=Pt(ge.anchorX,ge.anchorY,Ie);if(!Bt(Le.point,ee)){Qa(ge.numGlyphs,Q);continue}let Me=Yt(r.transform.cameraToCenterDistance,Le.signedDistanceFromCamera),Re=a.am(U,V,ge),Oe=v?Re*r.transform.getPitchedTextCorrection(ge.anchorX,ge.anchorY,E)/Me:Re*Me,Ke=pt({projectionContext:Ie,pitchedLabelPlaneMatrixInverse:d,symbol:ge,fontSize:Oe,flip:!1,keepUpright:x,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:Q,aspectRatio:he,rotateToLine:S});ce=Ke.useVertical,(Ke.notEnoughRoom||ce||Ke.needsFlipping&&pt({projectionContext:Ie,pitchedLabelPlaneMatrixInverse:d,symbol:ge,fontSize:Oe,flip:!0,keepUpright:x,glyphOffsetArray:m.glyphOffsetArray,dynamicLayoutVertexArray:Q,aspectRatio:he,rotateToLine:S}).notEnoughRoom)&&Qa(ge.numGlyphs,Q)}o?m.text.dynamicLayoutVertexBuffer.updateData(Q):m.icon.dynamicLayoutVertexBuffer.updateData(Q)}function gt(m,r,o,f,d,v,x,S){let E=v.glyphStartIndex+v.numGlyphs,A=v.lineStartIndex,R=v.lineStartIndex+v.lineLength,z=r.getoffsetX(v.glyphStartIndex),L=r.getoffsetX(E-1),U=ds(m*z,o,f,d,v.segment,A,R,S,x);if(!U)return null;let V=ds(m*L,o,f,d,v.segment,A,R,S,x);return V?S.projectionCache.anyProjectionOccluded?null:{first:U,last:V}:null}function Fe(m,r,o,f){return m===a.al.horizontal&&Math.abs(o.y-r.y)>Math.abs(o.x-r.x)*f?{useVertical:!0}:(m===a.al.vertical?r.y<o.y:r.x>o.x)?{needsFlipping:!0}:null}function pt(m){let{projectionContext:r,pitchedLabelPlaneMatrixInverse:o,symbol:f,fontSize:d,flip:v,keepUpright:x,glyphOffsetArray:S,dynamicLayoutVertexArray:E,aspectRatio:A,rotateToLine:R}=m,z=d/24,L=f.lineOffsetX*z,U=f.lineOffsetY*z,V;if(f.numGlyphs>1){let ee=f.glyphStartIndex+f.numGlyphs,Q=f.lineStartIndex,te=f.lineStartIndex+f.lineLength,oe=gt(z,S,L,U,v,f,R,r);if(!oe)return{notEnoughRoom:!0};let he=an(oe.first.point.x,oe.first.point.y,r,o),ce=an(oe.last.point.x,oe.last.point.y,r,o);if(x&&!v){let de=Fe(f.writingMode,he,ce,A);if(de)return de}V=[oe.first];for(let de=f.glyphStartIndex+1;de<ee-1;de++)V.push(ds(z*S.getoffsetX(de),L,U,v,f.segment,Q,te,r,R));V.push(oe.last)}else{if(x&&!v){let Q=Er(r.tileAnchorPoint.x,r.tileAnchorPoint.y,r).point,te=f.lineStartIndex+f.segment+1,oe=new a.P(r.lineVertexArray.getx(te),r.lineVertexArray.gety(te)),he=Er(oe.x,oe.y,r),ce=he.signedDistanceFromCamera>0?he.point:qt(r.tileAnchorPoint,oe,Q,1,r),de=an(Q.x,Q.y,r,o),ge=an(ce.x,ce.y,r,o),pe=Fe(f.writingMode,de,ge,A);if(pe)return pe}let ee=ds(z*S.getoffsetX(f.glyphStartIndex),L,U,v,f.segment,f.lineStartIndex,f.lineStartIndex+f.lineLength,r,R);if(!ee||r.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};V=[ee]}for(let ee of V)a.as(E,ee.point,ee.angle);return{}}function qt(m,r,o,f,d){let v=m.add(m.sub(r)._unit()),x=Er(v.x,v.y,d).point,S=o.sub(x);return o.add(S._mult(f/S.mag()))}function Ir(m,r,o){let f=r.projectionCache;if(f.projections[m])return f.projections[m];let d=new a.P(r.lineVertexArray.getx(m),r.lineVertexArray.gety(m)),v=Er(d.x,d.y,r);if(v.signedDistanceFromCamera>0)return f.projections[m]=v.point,f.anyProjectionOccluded=f.anyProjectionOccluded||v.isOccluded,v.point;let x=m-o.direction;return qt(o.distanceFromAnchor===0?r.tileAnchorPoint:new a.P(r.lineVertexArray.getx(x),r.lineVertexArray.gety(x)),d,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,r)}function Er(m,r,o){let f=m+o.translation[0],d=r+o.translation[1],v;return o.pitchWithMap?(v=ke(f,d,o.pitchedLabelPlaneMatrix,o.getElevation),v.isOccluded=!1):(v=o.transform.projectTileCoordinates(f,d,o.unwrappedTileID,o.getElevation),v.point.x=(.5*v.point.x+.5)*o.width,v.point.y=(.5*-v.point.y+.5)*o.height),v}function an(m,r,o,f){if(o.pitchWithMap){let d=[m,r,0,1];return a.at(d,d,f),o.transform.projectTileCoordinates(d[0]/d[3],d[1]/d[3],o.unwrappedTileID,o.getElevation).point}return{x:m/o.width*2-1,y:r/o.height*2-1}}function Pt(m,r,o){return o.transform.projectTileCoordinates(m,r,o.unwrappedTileID,o.getElevation)}function cl(m,r,o){return m._unit()._perp()._mult(r*o)}function Gu(m,r,o,f,d,v,x,S,E){if(S.projectionCache.offsets[m])return S.projectionCache.offsets[m];let A=o.add(r);if(m+E.direction<f||m+E.direction>=d)return S.projectionCache.offsets[m]=A,A;let R=Ir(m+E.direction,S,E),z=cl(R.sub(o),x,E.direction),L=o.add(z),U=R.add(z);return S.projectionCache.offsets[m]=a.au(v,A,L,U)||A,S.projectionCache.offsets[m]}function ds(m,r,o,f,d,v,x,S,E){let A=f?m-r:m+r,R=A>0?1:-1,z=0;f&&(R*=-1,z=Math.PI),R<0&&(z+=Math.PI);let L,U=R>0?v+d:v+d+1;S.projectionCache.cachedAnchorPoint?L=S.projectionCache.cachedAnchorPoint:(L=Er(S.tileAnchorPoint.x,S.tileAnchorPoint.y,S).point,S.projectionCache.cachedAnchorPoint=L);let V,ee,Q=L,te=L,oe=0,he=0,ce=Math.abs(A),de=[],ge;for(;oe+he<=ce;){if(U+=R,U<v||U>=x)return null;oe+=he,te=Q,ee=V;let Le={absOffsetX:ce,direction:R,distanceFromAnchor:oe,previousVertex:te};if(Q=Ir(U,S,Le),o===0)de.push(te),ge=Q.sub(te);else{let Me,Re=Q.sub(te);Me=Re.mag()===0?cl(Ir(U+R,S,Le).sub(Q),o,R):cl(Re,o,R),ee||(ee=te.add(Me)),V=Gu(U,Me,Q,v,x,ee,o,S,Le),de.push(ee),ge=V.sub(ee)}he=ge.mag()}let pe=ge._mult((ce-oe)/he)._add(ee||te),Ie=z+Math.atan2(Q.y-te.y,Q.x-te.x);return de.push(pe),{point:pe,angle:E?Ie:0,path:de}}let Zu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Qa(m,r){for(let o=0;o<m;o++){let f=r.length;r.resize(f+4),r.float32.set(Zu,3*f)}}function ps(m,r,o){let f=r[0],d=r[1];return m[0]=o[0]*f+o[4]*d+o[12],m[1]=o[1]*f+o[5]*d+o[13],m[3]=o[3]*f+o[7]*d+o[15],m}let Fr=100;class xn{constructor(r,o=new Xe(r.width+200,r.height+200,25),f=new Xe(r.width+200,r.height+200,25)){this.transform=r,this.grid=o,this.ignoredGrid=f,this.pitchFactor=Math.cos(r.pitch*Math.PI/180)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+Fr,this.screenBottomBoundary=r.height+Fr,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,o,f,d,v,x,S,E,A,R,z,L){let U=this.projectAndGetPerspectiveRatio(r.anchorPointX+E[0],r.anchorPointY+E[1],v,R,L),V=f*U.perspectiveRatio,ee;if(x||S)ee=this._projectCollisionBox(r,V,d,v,x,S,E,U,R,z,L);else{let ge=U.x+(z?z.x*V:0),pe=U.y+(z?z.y*V:0);ee={allPointsOccluded:!1,box:[ge+r.x1*V,pe+r.y1*V,ge+r.x2*V,pe+r.y2*V]}}let[Q,te,oe,he]=ee.box,ce=x?ee.allPointsOccluded:U.isOccluded,de=ce;return de||(de=U.perspectiveRatio<this.perspectiveRatioCutoff),de||(de=!this.isInsideGrid(Q,te,oe,he)),de||o!=="always"&&this.grid.hitTest(Q,te,oe,he,o,A)?{box:[Q,te,oe,he],placeable:!1,offscreen:!1,occluded:ce}:{box:[Q,te,oe,he],placeable:!0,offscreen:this.isOffscreen(Q,te,oe,he),occluded:ce}}placeCollisionCircles(r,o,f,d,v,x,S,E,A,R,z,L,U,V){let ee=[],Q=new a.P(o.anchorX,o.anchorY),te=this.getPerspectiveRatio(Q.x,Q.y,x,V),oe=(A?v*this.transform.getPitchedTextCorrection(o.anchorX,o.anchorY,x)/te:v*te)/a.ay,he={getElevation:V,pitchedLabelPlaneMatrix:S,lineVertexArray:f,pitchWithMap:A,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Q,unwrappedTileID:x,width:this.transform.width,height:this.transform.height,translation:U},ce=gt(oe,d,o.lineOffsetX*oe,o.lineOffsetY*oe,!1,o,!1,he),de=!1,ge=!1,pe=!0;if(ce){let Ie=.5*z*te+L,Le=new a.P(-100,-100),Me=new a.P(this.screenRightBoundary,this.screenBottomBoundary),Re=new Be,Oe=ce.first,Ke=ce.last,We=[];for(let Ct=Oe.path.length-1;Ct>=1;Ct--)We.push(Oe.path[Ct]);for(let Ct=1;Ct<Ke.path.length;Ct++)We.push(Ke.path[Ct]);let Ue=2.5*Ie;if(A){let Ct=this.projectPathToScreenSpace(We,he);We=Ct.some(Ut=>Ut.signedDistanceFromCamera<=0)?[]:Ct.map(Ut=>Ut.point)}let at=[];if(We.length>0){let Ct=We[0].clone(),Ut=We[0].clone();for(let gr=1;gr<We.length;gr++)Ct.x=Math.min(Ct.x,We[gr].x),Ct.y=Math.min(Ct.y,We[gr].y),Ut.x=Math.max(Ut.x,We[gr].x),Ut.y=Math.max(Ut.y,We[gr].y);at=Ct.x>=Le.x&&Ut.x<=Me.x&&Ct.y>=Le.y&&Ut.y<=Me.y?[We]:Ut.x<Le.x||Ct.x>Me.x||Ut.y<Le.y||Ct.y>Me.y?[]:a.av([We],Le.x,Le.y,Me.x,Me.y)}for(let Ct of at){Re.reset(Ct,.25*Ie);let Ut=0;Ut=Re.length<=.5*Ie?1:Math.ceil(Re.paddedLength/Ue)+1;for(let gr=0;gr<Ut;gr++){let ir=gr/Math.max(Ut-1,1),yr=Re.lerp(ir),_r=yr.x+Fr,or=yr.y+Fr;ee.push(_r,or,Ie,0);let Ht=_r-Ie,ei=or-Ie,si=_r+Ie,yi=or+Ie;if(pe=pe&&this.isOffscreen(Ht,ei,si,yi),ge=ge||this.isInsideGrid(Ht,ei,si,yi),r!=="always"&&this.grid.hitTestCircle(_r,or,Ie,r,R)&&(de=!0,!E))return{circles:[],offscreen:!1,collisionDetected:de}}}}return{circles:!E&&de||!ge||te<this.perspectiveRatioCutoff?[]:ee,offscreen:pe,collisionDetected:de}}projectPathToScreenSpace(r,o){let f=function(d,v){let x=a.K();return a.an(x,v.pitchedLabelPlaneMatrix),d.map(S=>{let E=ke(S.x,S.y,x,v.getElevation),A=v.transform.projectTileCoordinates(E.point.x,E.point.y,v.unwrappedTileID,v.getElevation);return A.point.x=(.5*A.point.x+.5)*v.width,A.point.y=(.5*-A.point.y+.5)*v.height,A})}(r,o);return function(d){let v=0,x=0,S=0,E=0;for(let A=0;A<d.length;A++)d[A].isOccluded?(S=A+1,E=0):(E++,E>x&&(x=E,v=S));return d.slice(v,v+x)}(f)}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let o=[],f=1/0,d=1/0,v=-1/0,x=-1/0;for(let R of r){let z=new a.P(R.x+Fr,R.y+Fr);f=Math.min(f,z.x),d=Math.min(d,z.y),v=Math.max(v,z.x),x=Math.max(x,z.y),o.push(z)}let S=this.grid.query(f,d,v,x).concat(this.ignoredGrid.query(f,d,v,x)),E={},A={};for(let R of S){let z=R.key;if(E[z.bucketInstanceId]===void 0&&(E[z.bucketInstanceId]={}),E[z.bucketInstanceId][z.featureIndex])continue;let L=[new a.P(R.x1,R.y1),new a.P(R.x2,R.y1),new a.P(R.x2,R.y2),new a.P(R.x1,R.y2)];a.aw(o,L)&&(E[z.bucketInstanceId][z.featureIndex]=!0,A[z.bucketInstanceId]===void 0&&(A[z.bucketInstanceId]=[]),A[z.bucketInstanceId].push(z.featureIndex))}return A}insertCollisionBox(r,o,f,d,v,x){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:v,collisionGroupID:x,overlapMode:o},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,o,f,d,v,x){let S=f?this.ignoredGrid:this.grid,E={bucketInstanceId:d,featureIndex:v,collisionGroupID:x,overlapMode:o};for(let A=0;A<r.length;A+=4)S.insertCircle(E,r[A],r[A+1],r[A+2])}projectAndGetPerspectiveRatio(r,o,f,d,v){if(v){let x;d?(x=[r,o,d(r,o),1],a.at(x,x,v)):(x=[r,o,0,1],ps(x,x,v));let S=x[3];return{x:(x[0]/S+1)/2*this.transform.width+Fr,y:(-x[1]/S+1)/2*this.transform.height+Fr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/S*.5,isOccluded:!1,signedDistanceFromCamera:S}}{let x=this.transform.projectTileCoordinates(r,o,f,d);return{x:(x.point.x+1)/2*this.transform.width+Fr,y:(1-x.point.y)/2*this.transform.height+Fr,perspectiveRatio:.5+this.transform.cameraToCenterDistance/x.signedDistanceFromCamera*.5,isOccluded:x.isOccluded,signedDistanceFromCamera:x.signedDistanceFromCamera}}}getPerspectiveRatio(r,o,f,d){let v=this.transform.projectTileCoordinates(r,o,f,d);return .5+this.transform.cameraToCenterDistance/v.signedDistanceFromCamera*.5}isOffscreen(r,o,f,d){return f<Fr||r>=this.screenRightBoundary||d<Fr||o>this.screenBottomBoundary}isInsideGrid(r,o,f,d){return f>=0&&r<this.gridRightBoundary&&d>=0&&o<this.gridBottomBoundary}getViewportMatrix(){let r=a.ad([]);return a.L(r,r,[-100,-100,0]),r}_projectCollisionBox(r,o,f,d,v,x,S,E,A,R,z){let L=1,U=0,V=0,ee=1,Q=r.anchorPointX+S[0],te=r.anchorPointY+S[1];if(x&&!v){let We=this.projectAndGetPerspectiveRatio(Q+1,te,d,A,z),Ue=We.x-E.x,at=Math.atan((We.y-E.y)/Ue)+(Ue<0?Math.PI:0),Ct=Math.sin(at),Ut=Math.cos(at);L=Ut,U=Ct,V=-Ct,ee=Ut}else if(!x&&v){let We=yt(this.transform);L=We.vecEast[0],U=We.vecEast[1],V=We.vecSouth[0],ee=We.vecSouth[1]}let oe=E.x,he=E.y,ce=o;v&&(oe=Q,he=te,ce=Math.pow(2,-(this.transform.zoom-f.overscaledZ)),ce*=this.transform.getPitchedTextCorrection(Q,te,d),R||(ce*=a.ae(.5+E.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),R&&(oe+=L*R.x*ce+V*R.y*ce,he+=U*R.x*ce+ee*R.y*ce);let de=r.x1*ce,ge=r.x2*ce,pe=(de+ge)/2,Ie=r.y1*ce,Le=r.y2*ce,Me=(Ie+Le)/2,Re=[{offsetX:de,offsetY:Ie},{offsetX:pe,offsetY:Ie},{offsetX:ge,offsetY:Ie},{offsetX:ge,offsetY:Me},{offsetX:ge,offsetY:Le},{offsetX:pe,offsetY:Le},{offsetX:de,offsetY:Le},{offsetX:de,offsetY:Me}],Oe=[];for(let{offsetX:We,offsetY:Ue}of Re)Oe.push(new a.P(oe+L*We+V*Ue,he+U*We+ee*Ue));let Ke=!1;if(v){let We=Oe.map(Ue=>this.projectAndGetPerspectiveRatio(Ue.x,Ue.y,d,A,z));Ke=We.some(Ue=>!Ue.isOccluded),Oe=We.map(Ue=>new a.P(Ue.x,Ue.y))}else Ke=!0;return{box:a.ax(Oe),allPointsOccluded:!Ke}}}class pr{constructor(r,o,f,d){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?o:-o))):d&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class Hu{constructor(r,o,f,d,v){this.text=new pr(r?r.text:null,o,f,v),this.icon=new pr(r?r.icon:null,o,d,v)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class hl{constructor(r,o,f){this.text=r,this.icon=o,this.skipFade=f}}class wp{constructor(r,o,f,d,v){this.bucketInstanceId=r,this.featureIndex=o,this.sourceLayerIndex=f,this.bucketIndex=d,this.tileID=v}}class ms{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let o=++this.maxGroupID;this.collisionGroups[r]={ID:o,predicate:f=>f.collisionGroupID===o}}return this.collisionGroups[r]}}function eo(m,r,o,f,d){let{horizontalAlign:v,verticalAlign:x}=a.aE(m);return new a.P(-(v-.5)*r+f[0]*d,-(x-.5)*o+f[1]*d)}class Vy{constructor(r,o,f,d,v){this.transform=r.clone(),this.terrain=o,this.collisionIndex=new xn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new ms(d),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=v,v&&(v.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){let o=this.terrain;return o?(f,d)=>o.getElevation(r,f,d):null}getBucketParts(r,o,f,d){let v=f.getBucket(o),x=f.latestFeatureIndex;if(!v||!x||o.id!==v.layerIds[0])return;let S=f.collisionBoxArray,E=v.layers[0].layout,A=v.layers[0].paint,R=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),z=f.tileSize/a.Z,L=f.tileID.toUnwrapped(),U=E.get("text-rotation-alignment")==="map",V=a.az(f,1,this.transform.zoom),ee=a.aA(this.collisionIndex.transform,f,A.get("text-translate"),A.get("text-translate-anchor")),Q=a.aA(this.collisionIndex.transform,f,A.get("icon-translate"),A.get("icon-translate-anchor")),te=ht(U,this.transform,V);this.retainedQueryData[v.bucketInstanceId]=new wp(v.bucketInstanceId,x,v.sourceLayerIndex,v.index,f.tileID);let oe={bucket:v,layout:E,translationText:ee,translationIcon:Q,unwrappedTileID:L,pitchedLabelPlaneMatrix:te,scale:R,textPixelRatio:z,holdingForFade:f.holdingForFade(),collisionBoxArray:S,partiallyEvaluatedTextSize:a.ak(v.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(v.sourceID)};if(d)for(let he of v.sortKeyRanges){let{sortKey:ce,symbolInstanceStart:de,symbolInstanceEnd:ge}=he;r.push({sortKey:ce,symbolInstanceStart:de,symbolInstanceEnd:ge,parameters:oe})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:v.symbolInstances.length,parameters:oe})}attemptAnchorPlacement(r,o,f,d,v,x,S,E,A,R,z,L,U,V,ee,Q,te,oe,he,ce){let de=a.aB[r.textAnchor],ge=[r.textOffset0,r.textOffset1],pe=eo(de,f,d,ge,v),Ie=this.collisionIndex.placeCollisionBox(o,L,E,A,R,S,x,Q,z.predicate,he,pe,ce);if((!oe||this.collisionIndex.placeCollisionBox(oe,L,E,A,R,S,x,te,z.predicate,he,pe,ce).placeable)&&Ie.placeable){let Le;if(this.prevPlacement&&this.prevPlacement.variableOffsets[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID]&&this.prevPlacement.placements[U.crossTileID].text&&(Le=this.prevPlacement.variableOffsets[U.crossTileID].anchor),U.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[U.crossTileID]={textOffset:ge,width:f,height:d,anchor:de,textBoxScale:v,prevAnchor:Le},this.markUsedJustification(V,de,U,ee),V.allowVerticalPlacement&&(this.markUsedOrientation(V,ee,U),this.placedOrientations[U.crossTileID]=ee),{shift:pe,placedGlyphBoxes:Ie}}}placeLayerBucketPart(r,o,f){let{bucket:d,layout:v,translationText:x,translationIcon:S,unwrappedTileID:E,pitchedLabelPlaneMatrix:A,textPixelRatio:R,holdingForFade:z,collisionBoxArray:L,partiallyEvaluatedTextSize:U,collisionGroup:V}=r.parameters,ee=v.get("text-optional"),Q=v.get("icon-optional"),te=a.aC(v,"text-overlap","text-allow-overlap"),oe=te==="always",he=a.aC(v,"icon-overlap","icon-allow-overlap"),ce=he==="always",de=v.get("text-rotation-alignment")==="map",ge=v.get("text-pitch-alignment")==="map",pe=v.get("icon-text-fit")!=="none",Ie=v.get("symbol-z-order")==="viewport-y",Le=oe&&(ce||!d.hasIconData()||Q),Me=ce&&(oe||!d.hasTextData()||ee);!d.collisionArrays&&L&&d.deserializeCollisionBoxes(L);let Re=this.retainedQueryData[d.bucketInstanceId].tileID,Oe=this._getTerrainElevationFunc(Re),Ke=this.transform.getFastPathSimpleProjectionMatrix(Re),We=(Ue,at,Ct)=>{var Ut,gr;if(o[Ue.crossTileID])return;if(z)return void(this.placements[Ue.crossTileID]=new hl(!1,!1,!1));let ir=!1,yr=!1,_r=!0,or=null,Ht={box:null,placeable:!1,offscreen:null,occluded:!1},ei={placeable:!1},si=null,yi=null,Wt=null,ko=0,qa=0,Do=0;at.textFeatureIndex?ko=at.textFeatureIndex:Ue.useRuntimeCollisionCircles&&(ko=Ue.featureIndex),at.verticalTextFeatureIndex&&(qa=at.verticalTextFeatureIndex);let As=at.textBox;if(As){let Sn=Ur=>{let $r=a.al.horizontal;if(d.allowVerticalPlacement&&!Ur&&this.prevPlacement){let $i=this.prevPlacement.placedOrientations[Ue.crossTileID];$i&&(this.placedOrientations[Ue.crossTileID]=$i,$r=$i,this.markUsedOrientation(d,$r,Ue))}return $r},zo=(Ur,$r)=>{if(d.allowVerticalPlacement&&Ue.numVerticalGlyphVertices>0&&at.verticalTextBox){for(let $i of d.writingModes)if($i===a.al.vertical?(Ht=$r(),ei=Ht):Ht=Ur(),Ht&&Ht.placeable)break}else Ht=Ur()},io=Ue.textAnchorOffsetStartIndex,Fo=Ue.textAnchorOffsetEndIndex;if(Fo===io){let Ur=($r,$i)=>{let hr=this.collisionIndex.placeCollisionBox($r,te,R,Re,E,ge,de,x,V.predicate,Oe,void 0,Ke);return hr&&hr.placeable&&(this.markUsedOrientation(d,$i,Ue),this.placedOrientations[Ue.crossTileID]=$i),hr};zo(()=>Ur(As,a.al.horizontal),()=>{let $r=at.verticalTextBox;return d.allowVerticalPlacement&&Ue.numVerticalGlyphVertices>0&&$r?Ur($r,a.al.vertical):{box:null,offscreen:null}}),Sn(Ht&&Ht.placeable)}else{let Ur=a.aB[(gr=(Ut=this.prevPlacement)===null||Ut===void 0?void 0:Ut.variableOffsets[Ue.crossTileID])===null||gr===void 0?void 0:gr.anchor],$r=(hr,pf,D_)=>{let L_=hr.x2-hr.x1,RS=hr.y2-hr.y1,fm=Ue.textBoxScale,Ic=pe&&he==="never"?pf:null,Nn=null,Pa=te==="never"?1:2,jn="never";Ur&&Pa++;for(let no=0;no<Pa;no++){for(let mf=io;mf<Fo;mf++){let Bo=d.textAnchorOffsets.get(mf);if(Ur&&Bo.textAnchor!==Ur)continue;let dm=this.attemptAnchorPlacement(Bo,hr,L_,RS,fm,de,ge,R,Re,E,V,jn,Ue,d,D_,x,S,Ic,Oe);if(dm&&(Nn=dm.placedGlyphBoxes,Nn&&Nn.placeable))return ir=!0,or=dm.shift,Nn}Ur?Ur=null:jn=te}return f&&!Nn&&(Nn={box:this.collisionIndex.placeCollisionBox(As,"always",R,Re,E,ge,de,x,V.predicate,Oe,void 0,Ke).box,offscreen:!1,placeable:!1,occluded:!1}),Nn};zo(()=>$r(As,at.iconBox,a.al.horizontal),()=>{let hr=at.verticalTextBox;return d.allowVerticalPlacement&&(!Ht||!Ht.placeable)&&Ue.numVerticalGlyphVertices>0&&hr?$r(hr,at.verticalIconBox,a.al.vertical):{box:null,occluded:!0,offscreen:null}}),Ht&&(ir=Ht.placeable,_r=Ht.offscreen);let $i=Sn(Ht&&Ht.placeable);if(!ir&&this.prevPlacement){let hr=this.prevPlacement.variableOffsets[Ue.crossTileID];hr&&(this.variableOffsets[Ue.crossTileID]=hr,this.markUsedJustification(d,hr.anchor,Ue,$i))}}}if(si=Ht,ir=si&&si.placeable,_r=si&&si.offscreen,Ue.useRuntimeCollisionCircles){let Sn=d.text.placedSymbolArray.get(Ue.centerJustifiedTextSymbolIndex),zo=a.am(d.textSizeData,U,Sn),io=v.get("text-padding");yi=this.collisionIndex.placeCollisionCircles(te,Sn,d.lineVertexArray,d.glyphOffsetArray,zo,E,A,f,ge,V.predicate,Ue.collisionCircleDiameter,io,x,Oe),yi.circles.length&&yi.collisionDetected&&!f&&a.w("Collisions detected, but collision boxes are not shown"),ir=oe||yi.circles.length>0&&!yi.collisionDetected,_r=_r&&yi.offscreen}if(at.iconFeatureIndex&&(Do=at.iconFeatureIndex),at.iconBox){let Sn=zo=>this.collisionIndex.placeCollisionBox(zo,he,R,Re,E,ge,de,S,V.predicate,Oe,pe&&or?or:void 0,Ke);ei&&ei.placeable&&at.verticalIconBox?(Wt=Sn(at.verticalIconBox),yr=Wt.placeable):(Wt=Sn(at.iconBox),yr=Wt.placeable),_r=_r&&Wt.offscreen}let Tc=ee||Ue.numHorizontalGlyphVertices===0&&Ue.numVerticalGlyphVertices===0,Lo=Q||Ue.numIconVertices===0;Tc||Lo?Lo?Tc||(yr=yr&&ir):ir=yr&&ir:yr=ir=yr&&ir;let Cs=yr&&Wt.placeable;if(ir&&si.placeable&&this.collisionIndex.insertCollisionBox(si.box,te,v.get("text-ignore-placement"),d.bucketInstanceId,ei&&ei.placeable&&qa?qa:ko,V.ID),Cs&&this.collisionIndex.insertCollisionBox(Wt.box,he,v.get("icon-ignore-placement"),d.bucketInstanceId,Do,V.ID),yi&&ir&&this.collisionIndex.insertCollisionCircles(yi.circles,te,v.get("text-ignore-placement"),d.bucketInstanceId,ko,V.ID),f&&this.storeCollisionData(d.bucketInstanceId,Ct,at,si,Wt,yi),Ue.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ue.crossTileID]=new hl((ir||Le)&&!(si!=null&&si.occluded),(yr||Me)&&!(Wt!=null&&Wt.occluded),_r||d.justReloaded),o[Ue.crossTileID]=!0};if(Ie){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ue=d.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let at=Ue.length-1;at>=0;--at){let Ct=Ue[at];We(d.symbolInstances.get(Ct),d.collisionArrays[Ct],Ct)}}else for(let Ue=r.symbolInstanceStart;Ue<r.symbolInstanceEnd;Ue++)We(d.symbolInstances.get(Ue),d.collisionArrays[Ue],Ue);d.justReloaded=!1}storeCollisionData(r,o,f,d,v,x){if(f.textBox||f.iconBox){let S,E;this.collisionBoxArrays.has(r)?S=this.collisionBoxArrays.get(r):(S=new Map,this.collisionBoxArrays.set(r,S)),S.has(o)?E=S.get(o):(E={text:null,icon:null},S.set(o,E)),f.textBox&&(E.text=d.box),f.iconBox&&(E.icon=v.box)}if(x){let S=this.collisionCircleArrays[r];S===void 0&&(S=this.collisionCircleArrays[r]=[]);for(let E=0;E<x.circles.length;E+=4)S.push(x.circles[E+0]-Fr),S.push(x.circles[E+1]-Fr),S.push(x.circles[E+2]),S.push(x.collisionDetected?1:0)}}markUsedJustification(r,o,f,d){let v;v=d===a.al.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[a.aD(o)];let x=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(let S of x)S>=0&&(r.text.placedSymbolArray.get(S).crossTileID=v>=0&&S!==v?0:f.crossTileID)}markUsedOrientation(r,o,f){let d=o===a.al.horizontal||o===a.al.horizontalOnly?o:0,v=o===a.al.vertical?o:0,x=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(let S of x)r.text.placedSymbolArray.get(S).placedOrientation=d;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=v)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let o=this.prevPlacement,f=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;let d=o?o.symbolFadeChange(r):1,v=o?o.opacities:{},x=o?o.variableOffsets:{},S=o?o.placedOrientations:{};for(let E in this.placements){let A=this.placements[E],R=v[E];R?(this.opacities[E]=new Hu(R,d,A.text,A.icon),f=f||A.text!==R.text.placed||A.icon!==R.icon.placed):(this.opacities[E]=new Hu(null,d,A.text,A.icon,A.skipFade),f=f||A.text||A.icon)}for(let E in v){let A=v[E];if(!this.opacities[E]){let R=new Hu(A,d,!1,!1);R.isHidden()||(this.opacities[E]=R,f=f||A.text.placed||A.icon.placed)}}for(let E in x)this.variableOffsets[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.variableOffsets[E]=x[E]);for(let E in S)this.placedOrientations[E]||!this.opacities[E]||this.opacities[E].isHidden()||(this.placedOrientations[E]=S[E]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:r)}updateLayerOpacities(r,o){let f={};for(let d of o){let v=d.getBucket(r);v&&d.latestFeatureIndex&&r.id===v.layerIds[0]&&this.updateBucketOpacities(v,d.tileID,f,d.collisionBoxArray)}}updateBucketOpacities(r,o,f,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();let v=r.layers[0],x=v.layout,S=new Hu(null,0,!1,!1,!0),E=x.get("text-allow-overlap"),A=x.get("icon-allow-overlap"),R=v._unevaluatedLayout.hasValue("text-variable-anchor")||v._unevaluatedLayout.hasValue("text-variable-anchor-offset"),z=x.get("text-rotation-alignment")==="map",L=x.get("text-pitch-alignment")==="map",U=x.get("icon-text-fit")!=="none",V=new Hu(null,0,E&&(A||!r.hasIconData()||x.get("icon-optional")),A&&(E||!r.hasTextData()||x.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);let ee=(te,oe,he)=>{for(let ce=0;ce<oe/4;ce++)te.opacityVertexArray.emplaceBack(he);te.hasVisibleVertices=te.hasVisibleVertices||he!==vs},Q=this.collisionBoxArrays.get(r.bucketInstanceId);for(let te=0;te<r.symbolInstances.length;te++){let oe=r.symbolInstances.get(te),{numHorizontalGlyphVertices:he,numVerticalGlyphVertices:ce,crossTileID:de}=oe,ge=this.opacities[de];f[de]?ge=S:ge||(ge=V,this.opacities[de]=ge),f[de]=!0;let pe=oe.numIconVertices>0,Ie=this.placedOrientations[oe.crossTileID],Le=Ie===a.al.vertical,Me=Ie===a.al.horizontal||Ie===a.al.horizontalOnly;if(he>0||ce>0){let Oe=Tp(ge.text);ee(r.text,he,Le?vs:Oe),ee(r.text,ce,Me?vs:Oe);let Ke=ge.text.isHidden();[oe.rightJustifiedTextSymbolIndex,oe.centerJustifiedTextSymbolIndex,oe.leftJustifiedTextSymbolIndex].forEach(at=>{at>=0&&(r.text.placedSymbolArray.get(at).hidden=Ke||Le?1:0)}),oe.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(oe.verticalPlacedTextSymbolIndex).hidden=Ke||Me?1:0);let We=this.variableOffsets[oe.crossTileID];We&&this.markUsedJustification(r,We.anchor,oe,Ie);let Ue=this.placedOrientations[oe.crossTileID];Ue&&(this.markUsedJustification(r,"left",oe,Ue),this.markUsedOrientation(r,Ue,oe))}if(pe){let Oe=Tp(ge.icon),Ke=!(U&&oe.verticalPlacedIconSymbolIndex&&Le);oe.placedIconSymbolIndex>=0&&(ee(r.icon,oe.numIconVertices,Ke?Oe:vs),r.icon.placedSymbolArray.get(oe.placedIconSymbolIndex).hidden=ge.icon.isHidden()),oe.verticalPlacedIconSymbolIndex>=0&&(ee(r.icon,oe.numVerticalIconVertices,Ke?vs:Oe),r.icon.placedSymbolArray.get(oe.verticalPlacedIconSymbolIndex).hidden=ge.icon.isHidden())}let Re=Q&&Q.has(te)?Q.get(te):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){let Oe=r.collisionArrays[te];if(Oe){let Ke=new a.P(0,0);if(Oe.textBox||Oe.verticalTextBox){let We=!0;if(R){let Ue=this.variableOffsets[de];Ue?(Ke=eo(Ue.anchor,Ue.width,Ue.height,Ue.textOffset,Ue.textBoxScale),z&&Ke._rotate(L?-this.transform.bearingInRadians:this.transform.bearingInRadians)):We=!1}if(Oe.textBox||Oe.verticalTextBox){let Ue;Oe.textBox&&(Ue=Le),Oe.verticalTextBox&&(Ue=Me),Sp(r.textCollisionBox.collisionVertexArray,ge.text.placed,!We||Ue,Re.text,Ke.x,Ke.y)}}if(Oe.iconBox||Oe.verticalIconBox){let We=!!(!Me&&Oe.verticalIconBox),Ue;Oe.iconBox&&(Ue=We),Oe.verticalIconBox&&(Ue=!We),Sp(r.iconCollisionBox.collisionVertexArray,ge.icon.placed,Ue,Re.icon,U?Ke.x:0,U?Ke.y:0)}}}}if(r.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);r.bucketInstanceId in this.collisionCircleArrays&&(r.collisionCircleArray=this.collisionCircleArrays[r.bucketInstanceId],delete this.collisionCircleArrays[r.bucketInstanceId])}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,o){let f=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function Sp(m,r,o,f,d,v){f&&f.length!==0||(f=[0,0,0,0]);let x=f[0]-Fr,S=f[1]-Fr,E=f[2]-Fr,A=f[3]-Fr;m.emplaceBack(r?1:0,o?1:0,d||0,v||0,x,S),m.emplaceBack(r?1:0,o?1:0,d||0,v||0,E,S),m.emplaceBack(r?1:0,o?1:0,d||0,v||0,E,A),m.emplaceBack(r?1:0,o?1:0,d||0,v||0,x,A)}let Gy=Math.pow(2,25),fl=Math.pow(2,24),Zy=Math.pow(2,17),aS=Math.pow(2,16),oS=Math.pow(2,9),sS=Math.pow(2,8),Hy=Math.pow(2,1);function Tp(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;let r=m.placed?1:0,o=Math.floor(127*m.opacity);return o*Gy+r*fl+o*Zy+r*aS+o*oS+r*sS+o*Hy+r}let vs=0;class Ip{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,o,f,d,v){let x=this._bucketParts;for(;this._currentTileIndex<r.length;)if(o.getBucketParts(x,d,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,v())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,x.sort((S,E)=>S.sortKey-E.sortKey));this._currentPartIndex<x.length;)if(o.placeLayerBucketPart(x[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,v())return!0;return!1}}class Wy{constructor(r,o,f,d,v,x,S,E){this.placement=new Vy(r,o,x,S,E),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=v,this._done=!1}isDone(){return this._done}continuePlacement(r,o,f){let d=O.now(),v=()=>!this._forceFullPlacement&&O.now()-d>2;for(;this._currentPlacementIndex>=0;){let x=o[r[this._currentPlacementIndex]],S=this.placement.collisionIndex.transform.zoom;if(x.type==="symbol"&&(!x.minzoom||x.minzoom<=S)&&(!x.maxzoom||x.maxzoom>S)){if(this._inProgressLayer||(this._inProgressLayer=new Ip(x)),this._inProgressLayer.continuePlacement(f[x.source],this.placement,this._showCollisionBoxes,x,v))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let gs=512/a.Z/2;class Ep{constructor(r,o,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};let d=new Map;for(let v=0;v<o.length;v++){let x=o.get(v),S=x.key,E=d.get(S);E?E.push(x):d.set(S,[x])}for(let[v,x]of d){let S={positions:x.map(E=>({x:Math.floor(E.anchorX*gs),y:Math.floor(E.anchorY*gs)})),crossTileIDs:x.map(E=>E.crossTileID)};if(S.positions.length>128){let E=new a.aF(S.positions.length,16,Uint16Array);for(let{x:A,y:R}of S.positions)E.add(A,R);E.finish(),delete S.positions,S.index=E}this._symbolsByKey[v]=S}}getScaledCoordinates(r,o){let{x:f,y:d,z:v}=this.tileID.canonical,{x,y:S,z:E}=o.canonical,A=gs/Math.pow(2,E-v),R=(S*a.Z+r.anchorY)*A,z=d*a.Z*gs;return{x:Math.floor((x*a.Z+r.anchorX)*A-f*a.Z*gs),y:Math.floor(R-z)}}findMatches(r,o,f){let d=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let v=0;v<r.length;v++){let x=r.get(v);if(x.crossTileID)continue;let S=this._symbolsByKey[x.key];if(!S)continue;let E=this.getScaledCoordinates(x,o);if(S.index){let A=S.index.range(E.x-d,E.y-d,E.x+d,E.y+d).sort();for(let R of A){let z=S.crossTileIDs[R];if(!f[z]){f[z]=!0,x.crossTileID=z;break}}}else if(S.positions)for(let A=0;A<S.positions.length;A++){let R=S.positions[A],z=S.crossTileIDs[A];if(Math.abs(R.x-E.x)<=d&&Math.abs(R.y-E.y)<=d&&!f[z]){f[z]=!0,x.crossTileID=z;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class lS{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Wu{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let o=Math.round((r-this.lng)/360);if(o!==0)for(let f in this.indexes){let d=this.indexes[f],v={};for(let x in d){let S=d[x];S.tileID=S.tileID.unwrapTo(S.tileID.wrap+o),v[S.tileID.key]=S}this.indexes[f]=v}this.lng=r}addBucket(r,o,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let v=0;v<o.symbolInstances.length;v++)o.symbolInstances.get(v).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});let d=this.usedCrossTileIDs[r.overscaledZ];for(let v in this.indexes){let x=this.indexes[v];if(Number(v)>r.overscaledZ)for(let S in x){let E=x[S];E.tileID.isChildOf(r)&&E.findMatches(o.symbolInstances,r,d)}else{let S=x[r.scaledTo(Number(v)).key];S&&S.findMatches(o.symbolInstances,r,d)}}for(let v=0;v<o.symbolInstances.length;v++){let x=o.symbolInstances.get(v);x.crossTileID||(x.crossTileID=f.generate(),d[x.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Ep(r,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(r,o){for(let f of o.getCrossTileIDsLists())for(let d of f)delete this.usedCrossTileIDs[r][d]}removeStaleBuckets(r){let o=!1;for(let f in this.indexes){let d=this.indexes[f];for(let v in d)r[d[v].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,d[v]),delete d[v],o=!0)}return o}}class Ku{constructor(){this.layerIndexes={},this.crossTileIDs=new lS,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,o,f){let d=this.layerIndexes[r.id];d===void 0&&(d=this.layerIndexes[r.id]=new Wu);let v=!1,x={};d.handleWrapJump(f);for(let S of o){let E=S.getBucket(r);E&&r.id===E.layerIds[0]&&(E.bucketInstanceId||(E.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(S.tileID,E,this.crossTileIDs)&&(v=!0),x[E.bucketInstanceId]=!0)}return d.removeStaleBuckets(x)&&(v=!0),v}pruneUnusedLayers(r){let o={};r.forEach(f=>{o[f]=!0});for(let f in this.layerIndexes)o[f]||delete this.layerIndexes[f]}}var qp="void main() {fragColor=vec4(1.0);}";let Bi={prelude:$t(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:$t("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:$t("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:$t(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:$t(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:$t(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:$t(qp,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:$t(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:$t(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:$t("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:$t("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:$t("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:$t(qp,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:$t(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:$t(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:$t(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:$t(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:$t(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:$t(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:$t(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$t(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:$t(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:$t(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:$t(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:$t(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:$t(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:$t(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:$t(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:$t(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:$t("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:$t("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:$t("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:$t("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:$t(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:$t("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function $t(m,r){let o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/in ([\w]+) ([\w]+)/g),d=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),v=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),x=v?v.concat(d):d,S={};return{fragmentSource:m=m.replace(o,(E,A,R,z,L)=>(S[L]=!0,A==="define"?`
#ifndef HAS_UNIFORM_u_${L}
in ${R} ${z} ${L};
#else
uniform ${R} ${z} u_${L};
#endif
`:`
#ifdef HAS_UNIFORM_u_${L}
    ${R} ${z} ${L} = u_${L};
#endif
`)),vertexSource:r=r.replace(o,(E,A,R,z,L)=>{let U=z==="float"?"vec2":"vec4",V=L.match(/color/)?"color":U;return S[L]?A==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
in ${R} ${U} a_${L};
out ${R} ${z} ${L};
#else
uniform ${R} ${z} u_${L};
#endif
`:V==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = a_${L};
#else
    ${R} ${z} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${L} = unpack_mix_${V}(a_${L}, u_${L}_t);
#else
    ${R} ${z} ${L} = u_${L};
#endif
`:A==="define"?`
#ifndef HAS_UNIFORM_u_${L}
uniform lowp float u_${L}_t;
in ${R} ${U} a_${L};
#else
uniform ${R} ${z} u_${L};
#endif
`:V==="vec4"?`
#ifndef HAS_UNIFORM_u_${L}
    ${R} ${z} ${L} = a_${L};
#else
    ${R} ${z} ${L} = u_${L};
#endif
`:`
#ifndef HAS_UNIFORM_u_${L}
    ${R} ${z} ${L} = unpack_mix_${V}(a_${L}, u_${L}_t);
#else
    ${R} ${z} ${L} = u_${L};
#endif
`}),staticAttributes:f,staticUniforms:x}}class dl{constructor(r,o,f){this.vertexBuffer=r,this.indexBuffer=o,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ni=a.aG([{name:"a_pos",type:"Int16",components:2}]);let ys="#define PROJECTION_MERCATOR",Nt="mercator";class Yu{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return Nt}get shaderDefine(){return ys}get shaderPreludeCode(){return Bi.projectionMercator}get vertexShaderPreludeCode(){return Bi.projectionMercator.vertexSource}get subdivisionGranularity(){return a.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(r){}getMeshFromTileID(r,o,f,d,v){if(this._cachedMesh)return this._cachedMesh;let x=new a.aI;x.emplaceBack(0,0),x.emplaceBack(a.Z,0),x.emplaceBack(0,a.Z),x.emplaceBack(a.Z,a.Z);let S=r.createVertexBuffer(x,Ni.members),E=a.aJ.simpleSegment(0,0,4,2),A=new a.aK;A.emplaceBack(1,0,2),A.emplaceBack(1,2,3);let R=r.createIndexBuffer(A);return this._cachedMesh=new dl(S,R,E),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(r){}}class Xu{constructor(r=0,o=0,f=0,d=0){if(isNaN(r)||r<0||isNaN(o)||o<0||isNaN(f)||f<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=o,this.left=f,this.right=d}interpolate(r,o,f){return o.top!=null&&r.top!=null&&(this.top=a.B.number(r.top,o.top,f)),o.bottom!=null&&r.bottom!=null&&(this.bottom=a.B.number(r.bottom,o.bottom,f)),o.left!=null&&r.left!=null&&(this.left=a.B.number(r.left,o.left,f)),o.right!=null&&r.right!=null&&(this.right=a.B.number(r.right,o.right,f)),this}getCenter(r,o){let f=a.ae((this.left+r-this.right)/2,0,r),d=a.ae((this.top+o-this.bottom)/2,0,o);return new a.P(f,d)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new Xu(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function pl(m,r){if(!m.renderWorldCopies||m.lngRange)return;let o=r.lng-m.center.lng;r.lng+=o>180?-360:o<-180?360:0}function on(m){return Math.max(0,Math.floor(m))}class vi{constructor(r,o,f,d,v,x){this._callbacks=r,this._tileSize=512,this._renderWorldCopies=x===void 0||!!x,this._minZoom=o||0,this._maxZoom=f||22,this._minPitch=d==null?0:d,this._maxPitch=v==null?60:v,this.setMaxBounds(),this._width=0,this._height=0,this._center=new a.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=on(this._zoom),this._scale=a.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Xu,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(r,o,f){this._latRange=r.latRange,this._lngRange=r.lngRange,this._width=r.width,this._height=r.height,this._center=r.center,this._elevation=r.elevation,this._minElevationForCurrentTile=r.minElevationForCurrentTile,this._zoom=r.zoom,this._tileZoom=on(this._zoom),this._scale=a.ac(this._zoom),this._bearingInRadians=r.bearingInRadians,this._fovInRadians=r.fovInRadians,this._pitchInRadians=r.pitchInRadians,this._rollInRadians=r.rollInRadians,this._unmodified=r.unmodified,this._edgeInsets=new Xu(r.padding.top,r.padding.bottom,r.padding.left,r.padding.right),this._minZoom=r.minZoom,this._maxZoom=r.maxZoom,this._minPitch=r.minPitch,this._maxPitch=r.maxPitch,this._renderWorldCopies=r.renderWorldCopies,this._cameraToCenterDistance=r.cameraToCenterDistance,this._nearZ=r.nearZ,this._farZ=r.farZ,this._autoCalculateNearFarZ=!f&&r.autoCalculateNearFarZ,o&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(r){this._minElevationForCurrentTile=r}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(r){this._minZoom!==r&&(this._minZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(r){this._minPitch!==r&&(this._minPitch=r,this.setPitch(Math.max(this.pitch,r)))}get maxPitch(){return this._maxPitch}setMaxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.setPitch(Math.min(this.pitch,r)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new a.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(r){let o=a.aL(r,-180,180)*Math.PI/180;var f,d,v,x,S,E,A,R,z;this._bearingInRadians!==o&&(this._unmodified=!1,this._bearingInRadians=o,this._calcMatrices(),this._rotationMatrix=w(),f=this._rotationMatrix,v=-this._bearingInRadians,x=(d=this._rotationMatrix)[0],S=d[1],E=d[2],A=d[3],R=Math.sin(v),z=Math.cos(v),f[0]=x*z+E*R,f[1]=S*z+A*R,f[2]=x*-R+E*z,f[3]=S*-R+A*z)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(r){let o=a.ae(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==o&&(this._unmodified=!1,this._pitchInRadians=o,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(r){let o=r/180*Math.PI;this._rollInRadians!==o&&(this._unmodified=!1,this._rollInRadians=o,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return a.aM(this._fovInRadians)}setFov(r){r=a.ae(r,.1,150),this.fov!==r&&(this._unmodified=!1,this._fovInRadians=a.ab(r),this._calcMatrices())}get zoom(){return this._zoom}setZoom(r){let o=this.getConstrained(this._center,r).zoom;this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this._tileZoom=Math.max(0,Math.floor(o)),this._scale=a.ac(o),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(r,o){this._autoCalculateNearFarZ=!1,this._nearZ=r,this._farZ=o,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,o,f){this._unmodified=!1,this._edgeInsets.interpolate(r,o,f),this._constrain(),this._calcMatrices()}resize(r,o,f=!0){this._width=r,this._height=o,f&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new ar([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(r){r?(this._lngRange=[r.getWest(),r.getEast()],this._latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,a.af])}getConstrained(r,o){return this._callbacks.getConstrained(r,o)}getCameraQueryGeometry(r,o){if(o.length===1)return[o[0],r];{let f=r.x,d=r.y,v=r.x,x=r.y;for(let S of o)f=Math.min(f,S.x),d=Math.min(d,S.y),v=Math.max(v,S.x),x=Math.max(x,S.y);return[new a.P(f,d),new a.P(v,d),new a.P(v,x),new a.P(f,x),new a.P(f,d)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;let r=this._unmodified,{center:o,zoom:f}=this.getConstrained(this.center,this.zoom);this.setCenter(o),this.setZoom(f),this._unmodified=r,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let r=a.ad(new Float64Array(16));a.M(r,r,[this._width/2,-this._height/2,1]),a.L(r,r,[1,-1,0]),this._clipSpaceToPixelsMatrix=r,r=a.ad(new Float64Array(16)),a.M(r,r,[1,-1,1]),a.L(r,r,[-1,-1,0]),a.M(r,r,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=r,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(r,o,f,d){let v=f!==void 0?f:this.bearing,x=d=d!==void 0?d:this.pitch,S=a.$.fromLngLat(r,o),E=-Math.cos(a.ab(x)),A=Math.sin(a.ab(x)),R=A*Math.sin(a.ab(v)),z=-A*Math.cos(a.ab(v)),L=this.elevation,U=o-L,V;E*U>=0||Math.abs(E)<.1?(V=1e4,L=o+V*E):V=-U/E;let ee,Q,te=a.aN(1,S.y),oe=0;do{if(oe+=1,oe>10)break;Q=V/te,ee=new a.$(S.x+R*Q,S.y+z*Q),te=1/ee.meterInMercatorCoordinateUnits()}while(Math.abs(V-Q*te)>1e-12);return{center:ee.toLngLat(),elevation:L,zoom:a.ah(this.height/2/Math.tan(this.fovInRadians/2)/Q/this.tileSize)}}recalculateZoomAndCenter(r){if(this.elevation-r==0)return;let o=a.ag(1,this.center.lat)*this.worldSize,f=this.cameraToCenterDistance/o,d=a.$.fromLngLat(this.center,this.elevation),v=H(this.center,this.elevation,this.pitch,this.bearing,f);this._elevation=r;let x=this.calculateCenterFromCameraLngLatAlt(v.toLngLat(),a.aN(v.z,d.y),this.bearing,this.pitch);this._elevation=x.elevation,this._center=x.center,this.setZoom(x.zoom)}getCameraPoint(){let r=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.P(r*Math.sin(this.rollInRadians),r*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){let r=a.ag(1,this.center.lat)*this.worldSize;return H(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/r).toLngLat()}getMercatorTileCoordinates(r){if(!r)return[0,0,1,1];let o=r.canonical.z>=0?1<<r.canonical.z:Math.pow(2,r.canonical.z);return[r.canonical.x/o,r.canonical.y/o,1/o/a.Z,1/o/a.Z]}}class Br{constructor(r,o){this.min=r,this.max=o,this.center=a.aO([],a.aP([],this.min,this.max),.5)}quadrant(r){let o=[r%2==0,r<2],f=a.aQ(this.min),d=a.aQ(this.max);for(let v=0;v<o.length;v++)f[v]=o[v]?this.min[v]:this.center[v],d[v]=o[v]?this.center[v]:this.max[v];return d[2]=this.max[2],new Br(f,d)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersectsFrustum(r){let o=!0;for(let f=0;f<r.planes.length;f++){let d=this.intersectsPlane(r.planes[f]);if(d===0)return 0;d===1&&(o=!1)}return o?2:r.aabb.min[0]>this.max[0]||r.aabb.min[1]>this.max[1]||r.aabb.min[2]>this.max[2]||r.aabb.max[0]<this.min[0]||r.aabb.max[1]<this.min[1]||r.aabb.max[2]<this.min[2]?0:1}intersectsPlane(r){let o=r[3],f=r[3];for(let d=0;d<3;d++)r[d]>0?(o+=r[d]*this.min[d],f+=r[d]*this.max[d]):(f+=r[d]*this.min[d],o+=r[d]*this.max[d]);return o>=0?2:f<0?0:1}}class gi{distanceToTile2d(r,o,f,d){let v=d.distanceX([r,o]),x=d.distanceY([r,o]);return Math.hypot(v,x)}getWrap(r,o,f){return f}getTileAABB(r,o,f,d){var v,x;let S=f,E=f;if(d.terrain){let R=new a.Y(r.z,o,r.z,r.x,r.y),z=d.terrain.getMinMaxElevation(R);S=(v=z.minElevation)!==null&&v!==void 0?v:f,E=(x=z.maxElevation)!==null&&x!==void 0?x:f}let A=1<<r.z;return new Br([o+r.x/A,r.y/A,S],[o+(r.x+1)/A,(r.y+1)/A,E])}allowVariableZoom(r,o){let f=r.fov*(Math.abs(Math.cos(r.rollInRadians))*r.height+Math.abs(Math.sin(r.rollInRadians))*r.width)/r.height,d=a.ae(78.5-f/2,0,60);return!!o.terrain||r.pitch>d}allowWorldCopies(){return!0}recalculateCache(){}}class ur{constructor(r,o,f){this.points=r,this.planes=o,this.aabb=f}static fromInvProjectionMatrix(r,o=1,f=0){let d=Math.pow(2,f),v=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(A=>{let R=1/(A=a.at([],A,r))[3]/o*d;return a.aR(A,A,[R,R,1/A[3],R])}),x=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(A=>{let R=a.aS([],v[A[0]],v[A[1]]),z=a.aS([],v[A[2]],v[A[1]]),L=a.aT([],a.aU([],R,z)),U=-a.aV(L,v[A[1]]);return L.concat(U)}),S=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],E=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(let A of v)for(let R=0;R<3;R++)S[R]=Math.min(S[R],A[R]),E[R]=Math.max(E[R],A[R]);return new ur(v,x,new Br(S,E))}}class ml{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,f){return this._helper.interpolatePadding(r,o,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o,f=!0){this._helper.resize(r,o,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r,o){}constructor(r,o,f,d,v){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(x,S)=>this.getConstrained(x,S)},r,o,f,d,v),this._coveringTilesDetailsProvider=new gi}clone(){let r=new ml;return r.apply(this),r}apply(r,o,f){this._helper.apply(r,o,f)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(r){let o=[new a.aW(0,r)];if(this._helper._renderWorldCopies){let f=this.screenPointToMercatorCoordinate(new a.P(0,0)),d=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,0)),v=this.screenPointToMercatorCoordinate(new a.P(this._helper._width,this._helper._height)),x=this.screenPointToMercatorCoordinate(new a.P(0,this._helper._height)),S=Math.floor(Math.min(f.x,d.x,v.x,x.x)),E=Math.floor(Math.max(f.x,d.x,v.x,x.x)),A=1;for(let R=S-A;R<=E+A;R++)R!==0&&o.push(new a.aW(R,r))}return o}getCameraFrustum(){return ur.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){let o=this.screenPointToLocation(this.centerPoint,r),f=r?r.getElevationForLngLatZoom(o,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(f)}setLocationAtPoint(r,o){let f=a.ag(this.elevation,this.center.lat),d=this.screenPointToMercatorCoordinateAtZ(o,f),v=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,f),x=a.$.fromLngLat(r),S=new a.$(x.x-(d.x-v.x),x.y-(d.y-v.y));this.setCenter(S==null?void 0:S.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(r,o){return o?this.coordinatePoint(a.$.fromLngLat(r),o.getElevationForLngLatZoom(r,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(a.$.fromLngLat(r))}screenPointToLocation(r,o){var f;return(f=this.screenPointToMercatorCoordinate(r,o))===null||f===void 0?void 0:f.toLngLat()}screenPointToMercatorCoordinate(r,o){if(o){let f=o.pointCoordinate(r);if(f!=null)return f}return this.screenPointToMercatorCoordinateAtZ(r)}screenPointToMercatorCoordinateAtZ(r,o){let f=o||0,d=[r.x,r.y,0,1],v=[r.x,r.y,1,1];a.at(d,d,this._pixelMatrixInverse),a.at(v,v,this._pixelMatrixInverse);let x=d[3],S=v[3],E=d[1]/x,A=v[1]/S,R=d[2]/x,z=v[2]/S,L=R===z?0:(f-R)/(z-R);return new a.$(a.B.number(d[0]/x,v[0]/S,L)/this.worldSize,a.B.number(E,A,L)/this.worldSize,f)}coordinatePoint(r,o=0,f=this._pixelMatrix){let d=[r.x*this.worldSize,r.y*this.worldSize,o,1];return a.at(d,d,f),new a.P(d[0]/d[3],d[1]/d[3])}getBounds(){let r=Math.max(0,this._helper._height/2-xe(this));return new ar().extend(this.screenPointToLocation(new a.P(0,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,r))).extend(this.screenPointToLocation(new a.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new a.P(0,this._helper._height)))}isPointOnMapSurface(r,o){return o?o.pointCoordinate(r)!=null:r.y>this.height/2-xe(this)}calculatePosMatrix(r,o=!1,f){var d;let v=(d=r.key)!==null&&d!==void 0?d:a.aX(r.wrap,r.canonical.z,r.canonical.z,r.canonical.x,r.canonical.y),x=o?this._alignedPosMatrixCache:this._posMatrixCache;if(x.has(v)){let A=x.get(v);return f?A.f32:A.f64}let S=Z(r,this.worldSize);a.N(S,o?this._alignedProjMatrix:this._viewProjMatrix,S);let E={f64:S,f32:new Float32Array(S)};return x.set(v,E),f?E.f32:E.f64}calculateFogMatrix(r){let o=r.key,f=this._fogMatrixCacheF32;if(f.has(o))return f.get(o);let d=Z(r,this.worldSize);return a.N(d,this._fogMatrix,d),f.set(o,new Float32Array(d)),f.get(o)}getConstrained(r,o){o=a.ae(+o,this.minZoom,this.maxZoom);let f={center:new a.Q(r.lng,r.lat),zoom:o},d=this._helper._lngRange;this._helper._renderWorldCopies||d!==null||(d=[-179.9999999999,180-1e-10]);let v=this.tileSize*a.ac(f.zoom),x=0,S=v,E=0,A=v,R=0,z=0,{x:L,y:U}=this.size;if(this._helper._latRange){let he=this._helper._latRange;x=a.S(he[1])*v,S=a.S(he[0])*v,S-x<U&&(R=U/(S-x))}d&&(E=a.aL(a.U(d[0])*v,0,v),A=a.aL(a.U(d[1])*v,0,v),A<E&&(A+=v),A-E<L&&(z=L/(A-E)));let{x:V,y:ee}=nn(v,r),Q,te,oe=Math.max(z||0,R||0);if(oe){let he=new a.P(z?(A+E)/2:V,R?(S+x)/2:ee);return f.center=wa(v,he).wrap(),f.zoom+=a.ah(oe),f}if(this._helper._latRange){let he=U/2;ee-he<x&&(te=x+he),ee+he>S&&(te=S-he)}if(d){let he=(E+A)/2,ce=V;this._helper._renderWorldCopies&&(ce=a.aL(V,he-v/2,he+v/2));let de=L/2;ce-de<E&&(Q=E+de),ce+de>A&&(Q=A-de)}if(Q!==void 0||te!==void 0){let he=new a.P(Q!=null?Q:V,te!=null?te:ee);f.center=wa(v,he).wrap()}return f}calculateCenterFromCameraLngLatAlt(r,o,f,d){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,f,d)}_calculateNearFarZIfNeeded(r,o,f){if(!this._helper.autoCalculateNearFarZ)return;let d=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),v=r-d*this._helper._pixelPerMeter/Math.cos(o),x=d<0?v:r,S=Math.PI/2+this.pitchInRadians,E=a.ab(this.fov)*(Math.abs(Math.cos(a.ab(this.roll)))*this.height+Math.abs(Math.sin(a.ab(this.roll)))*this.width)/this.height*(.5+f.y/this.height),A=Math.sin(E)*x/Math.sin(a.ae(Math.PI-S-E,.01,Math.PI-.01)),R=xe(this),z=Math.atan(R/this._helper.cameraToCenterDistance),L=a.ab(.75),U=z>L?2*z*(.5+f.y/(2*R)):L,V=Math.sin(U)*x/Math.sin(a.ae(Math.PI-S-U,.01,Math.PI-.01)),ee=Math.min(A,V);this._helper._farZ=1.01*(Math.cos(Math.PI/2-o)*ee+x),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;let r=this.centerOffset,o=nn(this.worldSize,this.center),f=o.x,d=o.y;this._helper._pixelPerMeter=a.ag(1,this.center.lat)*this.worldSize;let v=a.ab(Math.min(this.pitch,Ln)),x=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(v)),S;this._calculateNearFarZIfNeeded(x,v,r),S=new Float64Array(16),a.aY(S,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),a.an(this._invProjMatrix,S),S[8]=2*-r.x/this._helper._width,S[9]=2*r.y/this._helper._height,this._projectionMatrix=a.aZ(S),a.M(S,S,[1,-1,1]),a.L(S,S,[0,0,-this._helper.cameraToCenterDistance]),a.a_(S,S,-this.rollInRadians),a.a$(S,S,this.pitchInRadians),a.a_(S,S,-this.bearingInRadians),a.L(S,S,[-f,-d,0]),this._mercatorMatrix=a.M([],S,[this.worldSize,this.worldSize,this.worldSize]),a.M(S,S,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,S),a.L(S,S,[0,0,-this.elevation]),this._viewProjMatrix=S,this._invViewProjMatrix=a.an([],S);let E=[0,0,-1,1];a.at(E,E,this._invViewProjMatrix),this._cameraPosition=[E[0]/E[3],E[1]/E[3],E[2]/E[3]],this._fogMatrix=new Float64Array(16),a.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,x,this._helper._farZ),this._fogMatrix[8]=2*-r.x/this.width,this._fogMatrix[9]=2*r.y/this.height,a.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),a.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),a.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),a.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),a.L(this._fogMatrix,this._fogMatrix,[-f,-d,0]),a.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),a.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=a.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,S);let A=this._helper._width%2/2,R=this._helper._height%2/2,z=Math.cos(this.bearingInRadians),L=Math.sin(-this.bearingInRadians),U=f-Math.round(f)+z*A+L*R,V=d-Math.round(d)+z*R+L*A,ee=new Float64Array(S);if(a.L(ee,ee,[U>.5?U-1:U,V>.5?V-1:V,0]),this._alignedProjMatrix=ee,S=a.an(new Float64Array(16),this._pixelMatrix),!S)throw new Error("failed to invert matrix");this._pixelMatrixInverse=S,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;let r=this.screenPointToMercatorCoordinate(new a.P(0,0)),o=[r.x*this.worldSize,r.y*this.worldSize,0,1];return a.at(o,o,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){let r=a.ag(1,this.center.lat)*this.worldSize;return H(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/r).toLngLat()}lngLatToCameraDepth(r,o){let f=a.$.fromLngLat(r),d=[f.x*this.worldSize,f.y*this.worldSize,o,1];return a.at(d,d,this._viewProjMatrix),d[2]/d[3]}getProjectionData(r){let{overscaledTileID:o,aligned:f,applyTerrainMatrix:d}=r,v=this._helper.getMercatorTileCoordinates(o),x=o?this.calculatePosMatrix(o,f,!0):null,S;return S=o&&o.terrainRttPosMatrix32f&&d?o.terrainRttPosMatrix32f:x||a.b0(),{mainMatrix:S,tileMercatorCoords:v,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:S}}isLocationOccluded(r){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(r,o,f){return 1}transformLightDirection(r){return a.aQ(r)}getRayDirectionFromPixel(r){throw new Error("Not implemented.")}projectTileCoordinates(r,o,f,d){let v=this.calculatePosMatrix(f),x;d?(x=[r,o,d(r,o),1],a.at(x,x,v)):(x=[r,o,0,1],ps(x,x,v));let S=x[3];return{point:new a.P(x[0]/S,x[1]/S),signedDistanceFromCamera:S,isOccluded:!1}}populateCache(r){for(let o of r)this.calculatePosMatrix(o)}getMatrixForModel(r,o){let f=a.$.fromLngLat(r,o),d=f.meterInMercatorCoordinateUnits(),v=a.b1();return a.L(v,v,[f.x,f.y,f.z]),a.a_(v,v,Math.PI),a.a$(v,v,Math.PI/2),a.M(v,v,[-d,d,d]),v}getProjectionDataForCustomLayer(r=!0){let o=new a.Y(0,0,0,0,0),f=this.getProjectionData({overscaledTileID:o,applyGlobeMatrix:r}),d=Z(o,this.worldSize);a.N(d,this._viewProjMatrix,d),f.tileMercatorCoords=[0,0,1,1];let v=[a.Z,a.Z,this.worldSize/this._helper.pixelsPerMeter],x=a.b2();return a.M(x,d,v),f.fallbackMatrix=x,f.mainMatrix=x,f}getFastPathSimpleProjectionMatrix(r){return this.calculatePosMatrix(r)}}function ji(){a.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function bn(m){if(m.useSlerp){if(m.k<1){let r=a.b3(m.startEulerAngles.roll,m.startEulerAngles.pitch,m.startEulerAngles.bearing),o=a.b3(m.endEulerAngles.roll,m.endEulerAngles.pitch,m.endEulerAngles.bearing),f=new Float64Array(4);a.b4(f,r,o,m.k);let d=a.b5(f);m.tr.setRoll(d.roll),m.tr.setPitch(d.pitch),m.tr.setBearing(d.bearing)}else m.tr.setRoll(m.endEulerAngles.roll),m.tr.setPitch(m.endEulerAngles.pitch),m.tr.setBearing(m.endEulerAngles.bearing);}else m.tr.setRoll(a.B.number(m.startEulerAngles.roll,m.endEulerAngles.roll,m.k)),m.tr.setPitch(a.B.number(m.startEulerAngles.pitch,m.endEulerAngles.pitch,m.k)),m.tr.setBearing(a.B.number(m.startEulerAngles.bearing,m.endEulerAngles.bearing,m.k))}function sn(m,r,o,f,d){let v=d.padding,x=nn(d.worldSize,o.getNorthWest()),S=nn(d.worldSize,o.getNorthEast()),E=nn(d.worldSize,o.getSouthEast()),A=nn(d.worldSize,o.getSouthWest()),R=a.ab(-f),z=x.rotate(R),L=S.rotate(R),U=E.rotate(R),V=A.rotate(R),ee=new a.P(Math.max(z.x,L.x,V.x,U.x),Math.max(z.y,L.y,V.y,U.y)),Q=new a.P(Math.min(z.x,L.x,V.x,U.x),Math.min(z.y,L.y,V.y,U.y)),te=ee.sub(Q),oe=(d.width-(v.left+v.right+r.left+r.right))/te.x,he=(d.height-(v.top+v.bottom+r.top+r.bottom))/te.y;if(he<0||oe<0)return void ji();let ce=Math.min(a.ah(d.scale*Math.min(oe,he)),m.maxZoom),de=a.P.convert(m.offset),ge=new a.P((r.left-r.right)/2,(r.top-r.bottom)/2).rotate(a.ab(f)),pe=de.add(ge).mult(d.scale/a.ac(ce));return{center:wa(d.worldSize,x.add(E).div(2).sub(pe)),zoom:ce,bearing:f}}class Ju{get useGlobeControls(){return!1}handlePanInertia(r,o){return{easingOffset:r,easingCenter:o.center}}handleMapControlsRollPitchBearingZoom(r,o){r.bearingDelta&&o.setBearing(o.bearing+r.bearingDelta),r.pitchDelta&&o.setPitch(o.pitch+r.pitchDelta),r.rollDelta&&o.setRoll(o.roll+r.rollDelta),r.zoomDelta&&o.setZoom(o.zoom+r.zoomDelta)}handleMapControlsPan(r,o,f){r.around.distSqr(o.centerPoint)<.01||o.setLocationAtPoint(f,r.around)}cameraForBoxAndBearing(r,o,f,d,v){return sn(r,o,f,d,v)}handleJumpToCenterZoom(r,o){r.zoom!==(o.zoom!==void 0?+o.zoom:r.zoom)&&r.setZoom(+o.zoom),o.center!==void 0&&r.setCenter(a.Q.convert(o.center))}handleEaseTo(r,o){let f=r.zoom,d=r.padding,v={roll:r.roll,pitch:r.pitch,bearing:r.bearing},x={roll:o.roll===void 0?r.roll:o.roll,pitch:o.pitch===void 0?r.pitch:o.pitch,bearing:o.bearing===void 0?r.bearing:o.bearing},S=o.zoom!==void 0,E=!r.isPaddingEqual(o.padding),A=!1,R=S?+o.zoom:r.zoom,z=r.centerPoint.add(o.offsetAsPoint),L=r.screenPointToLocation(z),{center:U,zoom:V}=r.getConstrained(a.Q.convert(o.center||L),R!=null?R:f);pl(r,U);let ee=nn(r.worldSize,L),Q=nn(r.worldSize,U).sub(ee),te=a.ac(V-f);return A=V!==f,{easeFunc:oe=>{if(A&&r.setZoom(a.B.number(f,V,oe)),a.b6(v,x)||bn({startEulerAngles:v,endEulerAngles:x,tr:r,k:oe,useSlerp:v.roll!=x.roll}),E&&(r.interpolatePadding(d,o.padding,oe),z=r.centerPoint.add(o.offsetAsPoint)),o.around)r.setLocationAtPoint(o.around,o.aroundPoint);else{let he=a.ac(r.zoom-f),ce=V>f?Math.min(2,te):Math.max(.5,te),de=Math.pow(ce,1-oe),ge=wa(r.worldSize,ee.add(Q.mult(oe*de)).mult(he));r.setLocationAtPoint(r.renderWorldCopies?ge.wrap():ge,z)}},isZooming:A,elevationCenter:U}}handleFlyTo(r,o){let f=o.zoom!==void 0,d=r.zoom,v=r.getConstrained(a.Q.convert(o.center||o.locationAtOffset),f?+o.zoom:d),x=v.center,S=v.zoom;pl(r,x);let E=nn(r.worldSize,o.locationAtOffset),A=nn(r.worldSize,x).sub(E),R=A.mag(),z=a.ac(S-d),L;if(o.minZoom!==void 0){let U=Math.min(+o.minZoom,d,S),V=r.getConstrained(x,U).zoom;L=a.ac(V-d)}return{easeFunc:(U,V,ee,Q)=>{r.setZoom(U===1?S:d+a.ah(V));let te=U===1?x:wa(r.worldSize,E.add(A.mult(ee)).mult(V));r.setLocationAtPoint(r.renderWorldCopies?te.wrap():te,Q)},scaleOfZoom:z,targetCenter:x,scaleOfMinZoom:L,pixelPathLength:R}}}class tr{constructor(r,o,f){this.blendFunction=r,this.blendColor=o,this.mask=f}}tr.Replace=[1,0],tr.disabled=new tr(tr.Replace,a.b7.transparent,[!1,!1,!1,!1]),tr.unblended=new tr(tr.Replace,a.b7.transparent,[!0,!0,!0,!0]),tr.alphaBlended=new tr([1,771],a.b7.transparent,[!0,!0,!0,!0]);let qr=2305;class jt{constructor(r,o,f){this.enable=r,this.mode=o,this.frontFace=f}}jt.disabled=new jt(!1,1029,qr),jt.backCCW=new jt(!0,1029,qr),jt.frontCCW=new jt(!0,1028,qr);class Tt{constructor(r,o,f){this.func=r,this.mask=o,this.range=f}}Tt.ReadOnly=!1,Tt.ReadWrite=!0,Tt.disabled=new Tt(519,Tt.ReadOnly,[0,1]);let vl=7680;class At{constructor(r,o,f,d,v,x){this.test=r,this.ref=o,this.mask=f,this.fail=d,this.depthFail=v,this.pass=x}}At.disabled=new At({func:519,mask:0},0,0,vl,vl,vl);let Ah=new WeakMap;function Pi(m){var r;if(Ah.has(m))return Ah.get(m);{let o=(r=m.getParameter(m.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return Ah.set(m,o),o}}class Pp{get awaitingQuery(){return!!this._readbackQueue}constructor(r){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=r;let o=r.context,f=o.gl;this._texFormat=f.RGBA,this._texType=f.UNSIGNED_BYTE;let d=new a.aI;d.emplaceBack(-1,-1),d.emplaceBack(2,-1),d.emplaceBack(-1,2);let v=new a.aK;v.emplaceBack(0,1,2),this._fullscreenTriangle=new dl(o.createVertexBuffer(d,Ni.members),o.createIndexBuffer(v),a.aJ.simpleSegment(0,0,d.length,v.length)),this._resultBuffer=new Uint8Array(4),o.activeTexture.set(f.TEXTURE1);let x=f.createTexture();f.bindTexture(f.TEXTURE_2D,x),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texImage2D(f.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=o.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(x),Pi(f)&&(this._pbo=f.createBuffer(),f.bindBuffer(f.PIXEL_PACK_BUFFER,this._pbo),f.bufferData(f.PIXEL_PACK_BUFFER,4,f.STREAM_READ),f.bindBuffer(f.PIXEL_PACK_BUFFER,null))}destroy(){let r=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),r.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(r,o){let f=this._updateCount;return this._readbackQueue?f>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():f>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(r,o),this._updateCount++,this._measuredError}_bindFramebuffer(){let r=this._cachedRenderContext.context,o=r.gl;r.activeTexture.set(o.TEXTURE1),o.bindTexture(o.TEXTURE_2D,this._fbo.colorAttachment.get()),r.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(r,o){let f=this._cachedRenderContext.context,d=f.gl;if(this._bindFramebuffer(),f.viewport.set([0,0,this._texWidth,this._texHeight]),f.clear({color:a.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(f,d.TRIANGLES,Tt.disabled,At.disabled,tr.unblended,jt.disabled,((v,x)=>({u_input:v,u_output_expected:x}))(r,o),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Pi(d)){d.bindBuffer(d.PIXEL_PACK_BUFFER,this._pbo),d.readBuffer(d.COLOR_ATTACHMENT0),d.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),d.bindBuffer(d.PIXEL_PACK_BUFFER,null);let v=d.fenceSync(d.SYNC_GPU_COMMANDS_COMPLETE,0);d.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:v}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){let r=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Pi(r)){let o=r.clientWaitSync(this._readbackQueue.sync,0,0);if(o===r.WAIT_FAILED)return a.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(o===r.TIMEOUT_EXPIRED)return;r.bindBuffer(r.PIXEL_PACK_BUFFER,this._pbo),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),r.bindBuffer(r.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),r.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Pp._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(r){let o=0;return o+=r[0]/256,o+=r[1]/65536,o+=r[2]/16777216,r[3]<127&&(o=-o),o/128}}let Ap=a.Z/128;function Qu(m,r){let o=m.granularity!==void 0?Math.max(m.granularity,1):1,f=o+(m.generateBorders?2:0),d=o+(m.extendToNorthPole||m.generateBorders?1:0)+(m.extendToSouthPole||m.generateBorders?1:0),v=f+1,x=d+1,S=m.generateBorders?-1:0,E=m.generateBorders||m.extendToNorthPole?-1:0,A=o+(m.generateBorders?1:0),R=o+(m.generateBorders||m.extendToSouthPole?1:0),z=v*x,L=f*d*6,U=v*x>65536;if(U&&r==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");let V=U||r==="32bit",ee=new Int16Array(2*z),Q=0;for(let he=E;he<=R;he++)for(let ce=S;ce<=A;ce++){let de=ce/o*a.Z;ce===-1&&(de=-64),ce===o+1&&(de=a.Z+Ap);let ge=he/o*a.Z;he===-1&&(ge=m.extendToNorthPole?a.b9:-64),he===o+1&&(ge=m.extendToSouthPole?a.ba:a.Z+Ap),ee[Q++]=de,ee[Q++]=ge}let te=V?new Uint32Array(L):new Uint16Array(L),oe=0;for(let he=0;he<d;he++)for(let ce=0;ce<f;ce++){let de=ce+1+he*v,ge=ce+(he+1)*v,pe=ce+1+(he+1)*v;te[oe++]=ce+he*v,te[oe++]=ge,te[oe++]=de,te[oe++]=de,te[oe++]=ge,te[oe++]=pe}return{vertices:ee.buffer.slice(0),indices:te.buffer.slice(0),uses32bitIndices:V}}let gl=new a.aH({fill:new a.bb(128,2),line:new a.bb(512,0),tile:new a.bb(128,32),stencil:new a.bb(128,1),circle:3});class ec{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Bi.projectionGlobe}get vertexShaderPreludeCode(){return Bi.projectionMercator.vertexSource}get subdivisionGranularity(){return gl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(r){this._errorMeasurement||(this._errorMeasurement=new Pp(r));let o=a.S(this._errorQueryLatitudeDegrees),f=2*Math.atan(Math.exp(Math.PI-o*Math.PI*2))-.5*Math.PI,d=this._errorMeasurement.updateErrorLoop(o,f),v=O.now();d!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=d,this._errorMeasurementLastChangeTime=v);let x=Math.min(Math.max((v-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=a.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,a.bd(x))}_getMeshKey(r){return`${r.granularity.toString(36)}_${r.generateBorders?"b":""}${r.extendToNorthPole?"n":""}${r.extendToSouthPole?"s":""}`}getMeshFromTileID(r,o,f,d,v){let x=(v==="stencil"?gl.stencil:gl.tile).getGranularityForZoomLevel(o.z);return this._getMesh(r,{granularity:x,generateBorders:f,extendToNorthPole:o.y===0&&d,extendToSouthPole:o.y===(1<<o.z)-1&&d})}_getMesh(r,o){let f=this._getMeshKey(o);if(f in this._tileMeshCache)return this._tileMeshCache[f];let d=function(v,x){let S=Qu(x,"16bit"),E=a.aI.deserialize({arrayBuffer:S.vertices,length:S.vertices.byteLength/2/2}),A=a.aK.deserialize({arrayBuffer:S.indices,length:S.indices.byteLength/2/3});return new dl(v.createVertexBuffer(E,Ni.members),v.createIndexBuffer(A),a.aJ.simpleSegment(0,0,E.length,A.length))}(r,o);return this._tileMeshCache[f]=d,d}recalculate(r){}hasTransition(){let r=O.now(),o=!1;return o=o||(r-this._errorMeasurementLastChangeTime)/1e3<.7,o=o||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,o}setErrorQueryLatitudeDegrees(r){this._errorQueryLatitudeDegrees=r}}let Cp=new a.r({type:new a.D(a.v.projection.type)});class Ch extends a.E{constructor(r){super(),this._transitionable=new a.T(Cp),this.setProjection(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new a.C(0)),this._mercatorProjection=new Yu,this._verticalPerspectiveProjection=new ec}get transitionState(){let r=this.properties.get("type");if(typeof r=="string"&&r==="mercator")return 0;if(typeof r=="string"&&r==="vertical-perspective")return 1;if(r instanceof a.be){if(r.from==="vertical-perspective"&&r.to==="mercator")return 1-r.transition;if(r.from==="mercator"&&r.to==="vertical-perspective")return r.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(r){this._mercatorProjection.updateGPUdependent(r),this._verticalPerspectiveProjection.updateGPUdependent(r)}getMeshFromTileID(r,o,f,d,v){return this.currentProjection.getMeshFromTileID(r,o,f,d,v)}setProjection(r){this._transitionable.setValue("type",(r==null?void 0:r.type)||"mercator")}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}setErrorQueryLatitudeDegrees(r){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(r),this._mercatorProjection.setErrorQueryLatitudeDegrees(r)}}function tc(m){let r=xs(m.worldSize,m.center.lat);return 2*Math.PI*r}function _s(m,r,o,f,d){let v=1/(1<<d),x=r/a.Z*v+f*v,S=a.bg((m/a.Z*v+o*v)*Math.PI*2+Math.PI,2*Math.PI),E=2*Math.atan(Math.exp(Math.PI-x*Math.PI*2))-.5*Math.PI,A=Math.cos(E),R=new Float64Array(3);return R[0]=Math.sin(S)*A,R[1]=Math.sin(E),R[2]=Math.cos(S)*A,R}function ai(m){return function(r,o){let f=Math.cos(o),d=new Float64Array(3);return d[0]=Math.sin(r)*f,d[1]=Math.sin(o),d[2]=Math.cos(r)*f,d}(m.lng*Math.PI/180,m.lat*Math.PI/180)}function xs(m,r){return m/(2*Math.PI)/Math.cos(r*Math.PI/180)}function rc(m){let r=Math.asin(m[1])/Math.PI*180,o=Math.sqrt(m[0]*m[0]+m[2]*m[2]);if(o>1e-6){let f=m[0]/o,d=Math.acos(m[2]/o),v=(f>0?d:-d)/Math.PI*180;return new a.Q(a.aL(v,-180,180),r)}return new a.Q(0,r)}function Mo(m){return Math.cos(m*Math.PI/180)}function oi(m,r){let o=Mo(m),f=Mo(r);return a.ah(f/o)}function Mh(m,r){let o=m.rotate(r.bearingInRadians),f=r.zoom+oi(r.center.lat,0),d=a.bc(1/Mo(r.center.lat),1/Mo(Math.min(Math.abs(r.center.lat),60)),a.bf(f,7,3,0,1)),v=360/tc({worldSize:r.worldSize,center:{lat:r.center.lat}});return new a.Q(r.center.lng-o.x*v*d,a.ae(r.center.lat+o.y*v,-85.051129,a.af))}function Rh(m){let r=.5*m,o=Math.sin(r),f=Math.cos(r);return Math.log(o+f)-Math.log(f-o)}function Ky(m,r,o,f){let d=m.lat+o*f;if(Math.abs(o)>1){let v=(Math.sign(m.lat+o)!==Math.sign(m.lat)?-Math.abs(m.lat):Math.abs(m.lat))*Math.PI/180,x=Math.abs(m.lat+o)*Math.PI/180,S=Rh(v+f*(x-v)),E=Rh(v),A=Rh(x);return new a.Q(m.lng+r*((S-E)/(A-E)),d)}return new a.Q(m.lng+r*f,d)}class uS{constructor(r){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=r}recalculateCache(){if(!this._hadAnyChanges)return;let r=this._cachePrevious;this._cachePrevious=this._cache,this._cache=r,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(r,o,f,d){let v=`${r.z}_${r.x}_${r.y}`,x=this._cache.get(v);if(x)return x;let S=this._cachePrevious.get(v);if(S)return this._cache.set(v,S),S;let E=this._aabbFactory(r,o,f,d);return this._cache.set(v,E),this._hadAnyChanges=!0,E}}function Ai(m,r,o){let f=m-r;return f<0?-f:Math.max(0,f-o)}function ic(m,r,o,f,d){let v=m-o,x;return x=v<0?Math.min(-v,1+v-d):v>1?Math.min(Math.max(v-d,0),1-v):0,Math.max(x,Ai(r,f,d))}class Sa{constructor(){this._aabbCache=new uS(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(r,o,f,d){let v=1<<f.z,x=1/v,S=f.x/v,E=f.y/v,A=2;return A=Math.min(A,ic(r,o,S,E,x)),A=Math.min(A,ic(r,o,S+.5,-E-x,x)),A=Math.min(A,ic(r,o,S+.5,2-E-x,x)),A}getWrap(r,o,f){let d=1<<o.z,v=1/d,x=o.x/d,S=Ai(r.x,x,v),E=Ai(r.x,x-1,v),A=Ai(r.x,x+1,v),R=Math.min(S,E,A);return R===A?1:R===E?-1:0}allowVariableZoom(r,o){return qe(r,o)>4}allowWorldCopies(){return!1}getTileAABB(r,o,f,d){return this._aabbCache.getTileAABB(r,o,f,d)}_computeTileAABB(r,o,f,d){if(r.z<=0)return new Br([-1,-1,-1],[1,1,1]);if(r.z===1)return new Br([r.x===0?-1:0,r.y===0?0:-1,-1],[r.x===0?0:1,r.y===0?1:0,1]);{let v=[_s(0,0,r.x,r.y,r.z),_s(a.Z,0,r.x,r.y,r.z),_s(a.Z,a.Z,r.x,r.y,r.z),_s(0,a.Z,r.x,r.y,r.z)],x=[1,1,1],S=[-1,-1,-1];for(let E of v)for(let A=0;A<3;A++)x[A]=Math.min(x[A],E[A]),S[A]=Math.max(S[A],E[A]);if(r.y===0||r.y===(1<<r.z)-1){let E=[0,r.y===0?1:-1,0];for(let A=0;A<3;A++)x[A]=Math.min(x[A],E[A]),S[A]=Math.max(S[A],E[A])}return new Br(x,S)}}}class bs{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,f){return this._helper.interpolatePadding(r,o,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o){this._helper.resize(r,o)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(r){}constructor(){this._cachedClippingPlane=a.bk(),this._projectionMatrix=a.b1(),this._globeViewProjMatrix32f=a.b0(),this._globeViewProjMatrixNoCorrection=a.b1(),this._globeViewProjMatrixNoCorrectionInverted=a.b1(),this._globeProjMatrixInverted=a.b1(),this._cameraPosition=a.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,o)=>this.getConstrained(r,o)}),this._coveringTilesDetailsProvider=new Sa}clone(){let r=new bs;return r.apply(this),r}apply(r,o){this._globeLatitudeErrorCorrectionRadians=o||0,this._helper.apply(r)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){let r=a.bh();return r[0]=this._cameraPosition[0],r[1]=this._cameraPosition[1],r[2]=this._cameraPosition[2],r}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(r){let{overscaledTileID:o,applyGlobeMatrix:f}=r,d=this._helper.getMercatorTileCoordinates(o);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:d,clippingPlane:this._cachedClippingPlane,projectionTransition:f?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(r){let o=this.pitchInRadians,f=this.cameraToCenterDistance/r,d=Math.sin(o)*f,v=Math.cos(o)*f+1,x=1/Math.sqrt(d*d+v*v)*1,S=-d,E=v,A=Math.sqrt(S*S+E*E);S/=A,E/=A;let R=[0,S,E];a.bl(R,R,[0,0,0],-this.bearingInRadians),a.bm(R,R,[0,0,0],-1*this.center.lat*Math.PI/180),a.bn(R,R,[0,0,0],this.center.lng*Math.PI/180);let z=1/a.bo(R);return a.aO(R,R,z),[...R,-x*z]}isLocationOccluded(r){return!this.isSurfacePointVisible(ai(r))}transformLightDirection(r){let o=this._helper._center.lng*Math.PI/180,f=this._helper._center.lat*Math.PI/180,d=Math.cos(f),v=[Math.sin(o)*d,Math.sin(f),Math.cos(o)*d],x=[v[2],0,-v[0]],S=[0,0,0];a.aU(S,x,v),a.aT(x,x),a.aT(S,S);let E=[0,0,0];return a.aT(E,[x[0]*r[0]+S[0]*r[1]+v[0]*r[2],x[1]*r[0]+S[1]*r[1]+v[1]*r[2],x[2]*r[0]+S[2]*r[1]+v[2]*r[2]]),E}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(r,o,f){let d=function(S,E,A){let R=1/(1<<A.z);return new a.$(S/a.Z*R+A.x*R,E/a.Z*R+A.y*R)}(r,o,f.canonical),v=(x=d.y,[a.bg(d.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-x*Math.PI*2))-.5*Math.PI]);var x;return this.getCircleRadiusCorrection()/Math.cos(v[1])}projectTileCoordinates(r,o,f,d){let v=f.canonical,x=_s(r,o,v.x,v.y,v.z),S=1+(d?d(r,o):0)/a.bu,E=[x[0]*S,x[1]*S,x[2]*S,1];a.at(E,E,this._globeViewProjMatrixNoCorrection);let A=this._cachedClippingPlane,R=A[0]*x[0]+A[1]*x[1]+A[2]*x[2]+A[3]<0;return{point:new a.P(E[0]/E[3],E[1]/E[3]),signedDistanceFromCamera:E[3],isOccluded:R}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;let r=xs(this.worldSize,this.center.lat),o=a.b2(),f=a.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*r),a.aY(o,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);let d=this.centerOffset;o[8]=2*-d.x/this._helper._width,o[9]=2*d.y/this._helper._height,this._projectionMatrix=a.aZ(o),this._globeProjMatrixInverted=a.b2(),a.an(this._globeProjMatrixInverted,o),a.L(o,o,[0,0,-this.cameraToCenterDistance]),a.a_(o,o,this.rollInRadians),a.a$(o,o,-this.pitchInRadians),a.a_(o,o,this.bearingInRadians),a.L(o,o,[0,0,-r]);let v=a.bh();v[0]=r,v[1]=r,v[2]=r,a.a$(f,o,this.center.lat*Math.PI/180),a.bp(f,f,-this.center.lng*Math.PI/180),a.M(f,f,v),this._globeViewProjMatrixNoCorrection=f,a.a$(o,o,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),a.bp(o,o,-this.center.lng*Math.PI/180),a.M(o,o,v),this._globeViewProjMatrix32f=new Float32Array(o),this._globeViewProjMatrixNoCorrectionInverted=a.b2(),a.an(this._globeViewProjMatrixNoCorrectionInverted,f);let x=a.bh();this._cameraPosition=a.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/r,a.bl(this._cameraPosition,this._cameraPosition,x,-this.rollInRadians),a.bm(this._cameraPosition,this._cameraPosition,x,this.pitchInRadians),a.bl(this._cameraPosition,this._cameraPosition,x,-this.bearingInRadians),a.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),a.bm(this._cameraPosition,this._cameraPosition,x,-this.center.lat*Math.PI/180),a.bn(this._cameraPosition,this._cameraPosition,x,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(r);let S=a.aZ(this._globeViewProjMatrixNoCorrectionInverted);a.M(S,S,[1,1,-1]),this._cachedFrustum=ur.fromInvProjectionMatrix(S)}calculateFogMatrix(r){a.w("calculateFogMatrix is not supported on globe projection.");let o=a.b2();return a.ad(o),o}getVisibleUnwrappedCoordinates(r){return[new a.aW(0,r)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(r){r&&a.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,o){if(!this._globeViewProjMatrixNoCorrection)return 1;let f=ai(r);a.aO(f,f,1+o/a.bu);let d=a.bk();return a.at(d,[f[0],f[1],f[2],1],this._globeViewProjMatrixNoCorrection),d[2]/d[3]}populateCache(r){}getBounds(){let r=.5*this.width,o=.5*this.height,f=[new a.P(0,0),new a.P(r,0),new a.P(this.width,0),new a.P(this.width,o),new a.P(this.width,this.height),new a.P(r,this.height),new a.P(0,this.height),new a.P(0,o)],d=[];for(let z of f)d.push(this.unprojectScreenPoint(z));let v=0,x=0,S=0,E=0,A=this.center;for(let z of d){let L=a.bq(A.lng,z.lng),U=a.bq(A.lat,z.lat);L<x&&(x=L),L>v&&(v=L),U<E&&(E=U),U>S&&(S=U)}let R=[A.lng+x,A.lat+E,A.lng+v,A.lat+S];return this.isSurfacePointOnScreen([0,1,0])&&(R[3]=90,R[0]=-180,R[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(R[1]=-90,R[0]=-180,R[2]=180),new ar(R)}getConstrained(r,o){let f=a.ae(r.lat,-85.051129,a.af),d=a.ae(+o,this.minZoom+oi(0,f),this.maxZoom);return{center:new a.Q(r.lng,f),zoom:d}}calculateCenterFromCameraLngLatAlt(r,o,f,d){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,f,d)}setLocationAtPoint(r,o){let f=ai(this.unprojectScreenPoint(o)),d=ai(r),v=a.bh();a.br(v);let x=a.bh();a.bn(x,f,v,-this.center.lng*Math.PI/180),a.bm(x,x,v,this.center.lat*Math.PI/180);let S=d[0]*d[0]+d[2]*d[2],E=x[0]*x[0];if(S<E)return;let A=Math.sqrt(S-E),R=-A,z=a.bs(d[0],d[2],x[0],A),L=a.bs(d[0],d[2],x[0],R),U=a.bh();a.bn(U,d,v,-z);let V=a.bs(U[1],U[2],x[1],x[2]),ee=a.bh();a.bn(ee,d,v,-L);let Q=a.bs(ee[1],ee[2],x[1],x[2]),te=.5*Math.PI,oe=V>=-te&&V<=te,he=Q>=-te&&Q<=te,ce,de;if(oe&&he){let Le=this.center.lng*Math.PI/180,Me=this.center.lat*Math.PI/180;a.bv(z,Le)+a.bv(V,Me)<a.bv(L,Le)+a.bv(Q,Me)?(ce=z,de=V):(ce=L,de=Q)}else if(oe)ce=z,de=V;else{if(!he)return;ce=L,de=Q}let ge=ce/Math.PI*180,pe=de/Math.PI*180,Ie=this.center.lat;this.setCenter(new a.Q(ge,a.ae(pe,-90,90))),this.setZoom(this.zoom+oi(Ie,this.center.lat))}locationToScreenPoint(r,o){let f=ai(r);if(o){let d=o.getElevationForLngLatZoom(r,this._helper._tileZoom);a.aO(f,f,1+d/a.bu)}return this._projectSurfacePointToScreen(f)}_projectSurfacePointToScreen(r){let o=a.bk();return a.at(o,[...r,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],new a.P((.5*o[0]+.5)*this.width,(.5*-o[1]+.5)*this.height)}screenPointToMercatorCoordinate(r,o){if(o){let f=o.pointCoordinate(r);if(f)return f}return a.$.fromLngLat(this.unprojectScreenPoint(r))}screenPointToLocation(r,o){var f;return(f=this.screenPointToMercatorCoordinate(r,o))===null||f===void 0?void 0:f.toLngLat()}isPointOnMapSurface(r,o){let f=this._cameraPosition,d=this.getRayDirectionFromPixel(r);return!!this.rayPlanetIntersection(f,d)}getRayDirectionFromPixel(r){let o=a.bk();o[0]=r.x/this.width*2-1,o[1]=-1*(r.y/this.height*2-1),o[2]=1,o[3]=1,a.at(o,o,this._globeViewProjMatrixNoCorrectionInverted),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3];let f=a.bh();f[0]=o[0]-this._cameraPosition[0],f[1]=o[1]-this._cameraPosition[1],f[2]=o[2]-this._cameraPosition[2];let d=a.bh();return a.aT(d,f),d}isSurfacePointVisible(r){let o=this._cachedClippingPlane;return o[0]*r[0]+o[1]*r[1]+o[2]*r[2]+o[3]>=0}isSurfacePointOnScreen(r){if(!this.isSurfacePointVisible(r))return!1;let o=a.bk();return a.at(o,[...r,1],this._globeViewProjMatrixNoCorrection),o[0]/=o[3],o[1]/=o[3],o[2]/=o[3],o[0]>-1&&o[0]<1&&o[1]>-1&&o[1]<1&&o[2]>-1&&o[2]<1}rayPlanetIntersection(r,o){let f=a.aV(r,o),d=a.bh(),v=a.bh();a.aO(v,o,f),a.aS(d,r,v);let x=1-a.aV(d,d);if(x<0)return null;let S=a.aV(r,r)-1,E=-f+(f<0?1:-1)*Math.sqrt(x),A=S/E,R=E;return{tMin:Math.min(A,R),tMax:Math.max(A,R)}}unprojectScreenPoint(r){let o=this._cameraPosition,f=this.getRayDirectionFromPixel(r),d=this.rayPlanetIntersection(o,f);if(d){let R=a.bh();a.aP(R,o,[f[0]*d.tMin,f[1]*d.tMin,f[2]*d.tMin]);let z=a.bh();return a.aT(z,R),rc(z)}let v=this._cachedClippingPlane,x=v[0]*f[0]+v[1]*f[1]+v[2]*f[2],S=-a.bt(v,o)/x,E=a.bh();if(S>0)a.aP(E,o,[f[0]*S,f[1]*S,f[2]*S]);else{let R=a.bh();a.aP(R,o,[2*f[0],2*f[1],2*f[2]]);let z=a.bt(this._cachedClippingPlane,R);a.aS(E,R,[this._cachedClippingPlane[0]*z,this._cachedClippingPlane[1]*z,this._cachedClippingPlane[2]*z])}let A=function(R){let z=a.bh();return z[0]=R[0]*-R[3],z[1]=R[1]*-R[3],z[2]=R[2]*-R[3],{center:z,radius:Math.sqrt(1-R[3]*R[3])}}(v);return rc(function(R,z,L){let U=a.bh();a.aS(U,L,R);let V=a.bh();return a.bi(V,R,U,z/a.bj(U)),V}(A.center,A.radius,E))}getMatrixForModel(r,o){let f=a.Q.convert(r),d=1/a.bu,v=a.b1();return a.bp(v,v,f.lng/180*Math.PI),a.a$(v,v,-f.lat/180*Math.PI),a.L(v,v,[0,0,1+o/a.bu]),a.a$(v,v,.5*Math.PI),a.M(v,v,[d,d,d]),v}getProjectionDataForCustomLayer(r=!0){let o=this.getProjectionData({overscaledTileID:new a.Y(0,0,0,0,0),applyGlobeMatrix:r});return o.tileMercatorCoords=[0,0,1,1],o}getFastPathSimpleProjectionMatrix(r){}}class nc{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(r){this._helper.setMinZoom(r)}setMaxZoom(r){this._helper.setMaxZoom(r)}setMinPitch(r){this._helper.setMinPitch(r)}setMaxPitch(r){this._helper.setMaxPitch(r)}setRenderWorldCopies(r){this._helper.setRenderWorldCopies(r)}setBearing(r){this._helper.setBearing(r)}setPitch(r){this._helper.setPitch(r)}setRoll(r){this._helper.setRoll(r)}setFov(r){this._helper.setFov(r)}setZoom(r){this._helper.setZoom(r)}setCenter(r){this._helper.setCenter(r)}setElevation(r){this._helper.setElevation(r)}setMinElevationForCurrentTile(r){this._helper.setMinElevationForCurrentTile(r)}setPadding(r){this._helper.setPadding(r)}interpolatePadding(r,o,f){return this._helper.interpolatePadding(r,o,f)}isPaddingEqual(r){return this._helper.isPaddingEqual(r)}resize(r,o,f=!0){this._helper.resize(r,o,f)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(r){this._helper.setMaxBounds(r)}overrideNearFarZ(r,o){this._helper.overrideNearFarZ(r,o)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(r){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),r)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(r,o){this._globeness=r,this._globeLatitudeErrorCorrectionRadians=o,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new vi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(r,o)=>this.getConstrained(r,o)}),this._globeness=1,this._mercatorTransform=new ml,this._verticalPerspectiveTransform=new bs}clone(){let r=new nc;return r._globeness=this._globeness,r._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,r.apply(this),r}apply(r){this._helper.apply(r),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(r){let o=this._mercatorTransform.getProjectionData(r),f=this._verticalPerspectiveTransform.getProjectionData(r);return{mainMatrix:this.isGlobeRendering?f.mainMatrix:o.mainMatrix,clippingPlane:f.clippingPlane,tileMercatorCoords:f.tileMercatorCoords,projectionTransition:r.applyGlobeMatrix?this._globeness:0,fallbackMatrix:o.fallbackMatrix}}isLocationOccluded(r){return this.currentTransform.isLocationOccluded(r)}transformLightDirection(r){return this.currentTransform.transformLightDirection(r)}getPixelScale(){return a.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return a.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(r,o,f){let d=this._mercatorTransform.getPitchedTextCorrection(r,o,f),v=this._verticalPerspectiveTransform.getPitchedTextCorrection(r,o,f);return a.bc(d,v,this._globeness)}projectTileCoordinates(r,o,f,d){return this.currentTransform.projectTileCoordinates(r,o,f,d)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(r){return this.currentTransform.calculateFogMatrix(r)}getVisibleUnwrappedCoordinates(r){return this.currentTransform.getVisibleUnwrappedCoordinates(r)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(r){this._mercatorTransform.recalculateZoomAndCenter(r),this._verticalPerspectiveTransform.recalculateZoomAndCenter(r)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(r,o){return this.currentTransform.lngLatToCameraDepth(r,o)}populateCache(r){this._mercatorTransform.populateCache(r),this._verticalPerspectiveTransform.populateCache(r)}getBounds(){return this.currentTransform.getBounds()}getConstrained(r,o){return this.currentTransform.getConstrained(r,o)}calculateCenterFromCameraLngLatAlt(r,o,f,d){return this._helper.calculateCenterFromCameraLngLatAlt(r,o,f,d)}setLocationAtPoint(r,o){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(r,o),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(r,o),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(r,o){return this.currentTransform.locationToScreenPoint(r,o)}screenPointToMercatorCoordinate(r,o){return this.currentTransform.screenPointToMercatorCoordinate(r,o)}screenPointToLocation(r,o){return this.currentTransform.screenPointToLocation(r,o)}isPointOnMapSurface(r,o){return this.currentTransform.isPointOnMapSurface(r,o)}getRayDirectionFromPixel(r){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(r)}getMatrixForModel(r,o){return this.currentTransform.getMatrixForModel(r,o)}getProjectionDataForCustomLayer(r=!0){let o=this._mercatorTransform.getProjectionDataForCustomLayer(r);if(!this.isGlobeRendering)return o;let f=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(r);return f.fallbackMatrix=o.mainMatrix,f}getFastPathSimpleProjectionMatrix(r){return this.currentTransform.getFastPathSimpleProjectionMatrix(r)}}class zn{get useGlobeControls(){return!0}handlePanInertia(r,o){let f=Mh(r,o);return Math.abs(f.lng-o.center.lng)>180&&(f.lng=o.center.lng+179.5*Math.sign(f.lng-o.center.lng)),{easingCenter:f,easingOffset:new a.P(0,0)}}handleMapControlsRollPitchBearingZoom(r,o){let f=r.around,d=o.screenPointToLocation(f);r.bearingDelta&&o.setBearing(o.bearing+r.bearingDelta),r.pitchDelta&&o.setPitch(o.pitch+r.pitchDelta),r.rollDelta&&o.setRoll(o.roll+r.rollDelta);let v=o.zoom;r.zoomDelta&&o.setZoom(o.zoom+r.zoomDelta);let x=o.zoom-v;if(x===0)return;let S=a.bq(o.center.lng,d.lng),E=S/(Math.abs(S/180)+1),A=a.bq(o.center.lat,d.lat),R=o.getRayDirectionFromPixel(f),z=o.cameraPosition,L=-1*a.aV(z,R),U=a.bh();a.aP(U,z,[R[0]*L,R[1]*L,R[2]*L]);let V=a.bo(U)-1,ee=Math.exp(.5*-Math.max(V-.3,0)),Q=xs(o.worldSize,o.center.lat)/Math.min(o.width,o.height),te=a.bf(Q,.9,.5,1,.25),oe=(1-a.ac(-x))*Math.min(ee,te),he=o.center.lat,ce=o.zoom,de=new a.Q(o.center.lng+E*oe,a.ae(o.center.lat+A*oe,-85.051129,a.af));o.setLocationAtPoint(d,f);let ge=o.center,pe=a.bf(Math.abs(S),45,85,0,1),Ie=a.bf(Q,.75,.35,0,1),Le=Math.pow(Math.max(pe,Ie),.25),Me=a.bq(ge.lng,de.lng),Re=a.bq(ge.lat,de.lat);o.setCenter(new a.Q(ge.lng+Me*Le,ge.lat+Re*Le).wrap()),o.setZoom(ce+oi(he,o.center.lat))}handleMapControlsPan(r,o,f){if(!r.panDelta)return;let d=o.center.lat,v=o.zoom;o.setCenter(Mh(r.panDelta,o).wrap()),o.setZoom(v+oi(d,o.center.lat))}cameraForBoxAndBearing(r,o,f,d,v){let x=sn(r,o,f,d,v),S=o.left/v.width*2-1,E=(v.width-o.right)/v.width*2-1,A=o.top/v.height*-2+1,R=(v.height-o.bottom)/v.height*-2+1,z=a.bq(f.getWest(),f.getEast())<0,L=z?f.getEast():f.getWest(),U=z?f.getWest():f.getEast(),V=Math.max(f.getNorth(),f.getSouth()),ee=Math.min(f.getNorth(),f.getSouth()),Q=L+.5*a.bq(L,U),te=V+.5*a.bq(V,ee),oe=v.clone();oe.setCenter(x.center),oe.setBearing(x.bearing),oe.setPitch(0),oe.setRoll(0),oe.setZoom(x.zoom);let he=oe.modelViewProjectionMatrix,ce=[ai(f.getNorthWest()),ai(f.getNorthEast()),ai(f.getSouthWest()),ai(f.getSouthEast()),ai(new a.Q(U,te)),ai(new a.Q(L,te)),ai(new a.Q(Q,V)),ai(new a.Q(Q,ee))],de=ai(x.center),ge=Number.POSITIVE_INFINITY;for(let pe of ce)S<0&&(ge=zn.getLesserNonNegativeNonNull(ge,zn.solveVectorScale(pe,de,he,"x",S))),E>0&&(ge=zn.getLesserNonNegativeNonNull(ge,zn.solveVectorScale(pe,de,he,"x",E))),A>0&&(ge=zn.getLesserNonNegativeNonNull(ge,zn.solveVectorScale(pe,de,he,"y",A))),R<0&&(ge=zn.getLesserNonNegativeNonNull(ge,zn.solveVectorScale(pe,de,he,"y",R)));if(Number.isFinite(ge)&&ge!==0)return x.zoom=oe.zoom+a.ah(ge),x;ji()}handleJumpToCenterZoom(r,o){let f=r.center.lat,d=r.getConstrained(o.center?a.Q.convert(o.center):r.center,r.zoom).center;r.setCenter(d.wrap());let v=o.zoom!==void 0?+o.zoom:r.zoom+oi(f,d.lat);r.zoom!==v&&r.setZoom(v)}handleEaseTo(r,o){let f=r.zoom,d=r.center,v=r.padding,x={roll:r.roll,pitch:r.pitch,bearing:r.bearing},S={roll:o.roll===void 0?r.roll:o.roll,pitch:o.pitch===void 0?r.pitch:o.pitch,bearing:o.bearing===void 0?r.bearing:o.bearing},E=o.zoom!==void 0,A=!r.isPaddingEqual(o.padding),R=!1,z=o.center?a.Q.convert(o.center):d,L=r.getConstrained(z,f).center;pl(r,L);let U=r.clone();U.setCenter(L),U.setZoom(E?+o.zoom:f+oi(d.lat,z.lat)),U.setBearing(o.bearing);let V=new a.P(a.ae(r.centerPoint.x+o.offsetAsPoint.x,0,r.width),a.ae(r.centerPoint.y+o.offsetAsPoint.y,0,r.height));U.setLocationAtPoint(L,V);let ee=(o.offset&&o.offsetAsPoint.mag())>0?U.center:L,Q=E?+o.zoom:f+oi(d.lat,ee.lat),te=f+oi(d.lat,0),oe=Q+oi(ee.lat,0),he=a.bq(d.lng,ee.lng),ce=a.bq(d.lat,ee.lat),de=a.ac(oe-te);return R=Q!==f,{easeFunc:ge=>{if(a.b6(x,S)||bn({startEulerAngles:x,endEulerAngles:S,tr:r,k:ge,useSlerp:x.roll!=S.roll}),A&&r.interpolatePadding(v,o.padding,ge),o.around)a.w("Easing around a point is not supported under globe projection."),r.setLocationAtPoint(o.around,o.aroundPoint);else{let pe=oe>te?Math.min(2,de):Math.max(.5,de),Ie=Math.pow(pe,1-ge),Le=Ky(d,he,ce,ge*Ie);r.setCenter(Le.wrap())}if(R){let pe=a.B.number(te,oe,ge)+oi(0,r.center.lat);r.setZoom(pe)}},isZooming:R,elevationCenter:ee}}handleFlyTo(r,o){let f=o.zoom!==void 0,d=r.center,v=r.zoom,x=r.padding,S=!r.isPaddingEqual(o.padding),E=r.getConstrained(a.Q.convert(o.center||o.locationAtOffset),v).center,A=f?+o.zoom:r.zoom+oi(r.center.lat,E.lat),R=r.clone();R.setCenter(E),R.setZoom(A),R.setBearing(o.bearing);let z=new a.P(a.ae(r.centerPoint.x+o.offsetAsPoint.x,0,r.width),a.ae(r.centerPoint.y+o.offsetAsPoint.y,0,r.height));R.setLocationAtPoint(E,z);let L=R.center;pl(r,L);let U=function(ce,de,ge){let pe=ai(de),Ie=ai(ge),Le=a.aV(pe,Ie),Me=Math.acos(Le),Re=tc(ce);return Me/(2*Math.PI)*Re}(r,d,L),V=v+oi(d.lat,0),ee=A+oi(L.lat,0),Q=a.ac(ee-V),te;if(typeof o.minZoom=="number"){let ce=+o.minZoom+oi(L.lat,0),de=Math.min(ce,V,ee)+oi(0,L.lat),ge=r.getConstrained(L,de).zoom+oi(L.lat,0);te=a.ac(ge-V)}let oe=a.bq(d.lng,L.lng),he=a.bq(d.lat,L.lat);return{easeFunc:(ce,de,ge,pe)=>{let Ie=Ky(d,oe,he,ge);S&&r.interpolatePadding(x,o.padding,ce);let Le=ce===1?L:Ie;r.setCenter(Le.wrap());let Me=V+a.ah(de);r.setZoom(ce===1?A:Me+oi(0,Le.lat))},scaleOfZoom:Q,targetCenter:L,scaleOfMinZoom:te,pixelPathLength:U}}static solveVectorScale(r,o,f,d,v){let x=d==="x"?[f[0],f[4],f[8],f[12]]:[f[1],f[5],f[9],f[13]],S=[f[3],f[7],f[11],f[15]],E=r[0]*x[0]+r[1]*x[1]+r[2]*x[2],A=r[0]*S[0]+r[1]*S[1]+r[2]*S[2],R=o[0]*x[0]+o[1]*x[1]+o[2]*x[2],z=o[0]*S[0]+o[1]*S[1]+o[2]*S[2];return R+v*A===E+v*z||S[3]*(E-R)+x[3]*(z-A)+E*z==R*A?null:(R+x[3]-v*z-v*S[3])/(R-E-v*z+v*A)}static getLesserNonNegativeNonNull(r,o){return o!==null&&o>=0&&o<r?o:r}}class ws{constructor(r){this._globe=r,this._mercatorCameraHelper=new Ju,this._verticalPerspectiveCameraHelper=new zn}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(r,o){return this.currentHelper.handlePanInertia(r,o)}handleMapControlsRollPitchBearingZoom(r,o){return this.currentHelper.handleMapControlsRollPitchBearingZoom(r,o)}handleMapControlsPan(r,o,f){this.currentHelper.handleMapControlsPan(r,o,f)}cameraForBoxAndBearing(r,o,f,d,v){return this.currentHelper.cameraForBoxAndBearing(r,o,f,d,v)}handleJumpToCenterZoom(r,o){this.currentHelper.handleJumpToCenterZoom(r,o)}handleEaseTo(r,o){return this.currentHelper.handleEaseTo(r,o)}handleFlyTo(r,o){return this.currentHelper.handleFlyTo(r,o)}}let Oh=(m,r)=>a.x(m,r&&r.filter(o=>o.identifier!=="source.canvas")),cS=a.bw();class Mp extends a.E{constructor(r,o={}){super(),this._rtlPluginLoaded=()=>{for(let f in this.sourceCaches){let d=this.sourceCaches[f].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new vn(Po(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,d)=>this.getGlyphs(f,d)),this.dispatcher.registerMessageHandler("GI",(f,d)=>this.getImages(f,d)),this.imageManager=new St,this.imageManager.setEventedParent(this),this.glyphManager=new qi(r._requestManager,o.localIdeographFontFamily),this.lineAtlas=new _a(256,512),this.crossTileSymbolIndex=new Ku,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",a.by()),Xa().on(ol,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;let d=this.sourceCaches[f.sourceId];if(!d)return;let v=d.getSource();if(v&&v.vectorLayerIds)for(let x in this._layers){let S=this._layers[x];S.source===v.id&&this._validateLayer(S)}})}loadURL(r,o={},f){this.fire(new a.l("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;let d=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;let v=this._loadStyleRequest;a.j(d,this._loadStyleRequest).then(x=>{this._loadStyleRequest=null,this._load(x.data,o,f)}).catch(x=>{this._loadStyleRequest=null,x&&!v.signal.aborted&&this.fire(new a.k(x))})}loadJSON(r,o={},f){this.fire(new a.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,O.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(r,o,f)}).catch(()=>{})}loadEmpty(){this.fire(new a.l("dataloading",{dataType:"style"})),this._load(cS,{validate:!1})}_load(r,o,f){var d,v;let x=o.transformStyle?o.transformStyle(f,r):r;if(!o.validate||!Oh(this,a.y(x))){this._loaded=!0,this.stylesheet=x;for(let S in x.sources)this.addSource(S,x.sources[S],{validate:!1});x.sprite?this._loadSprite(x.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(x.glyphs),this._createLayers(),this.light=new ju(this.stylesheet.light),this._setProjectionInternal(((d=this.stylesheet.projection)===null||d===void 0?void 0:d.type)||"mercator"),this.sky=new qo(this.stylesheet.sky),this.map.setTerrain((v=this.stylesheet.terrain)!==null&&v!==void 0?v:null),this.fire(new a.l("data",{dataType:"style"})),this.fire(new a.l("style.load"))}}_createLayers(){let r=a.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(o=>o.id),this._layers={},this._serializedLayers=null;for(let o of r){let f=a.bA(o);f.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=f}}_loadSprite(r,o=!1,f=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(v,x,S,E){return a._(this,void 0,void 0,function*(){let A=Te(v),R=S>1?"@2x":"",z={},L={};for(let{id:U,url:V}of A){let ee=x.transformRequest(nt(V,R,".json"),"SpriteJSON");z[U]=a.j(ee,E);let Q=x.transformRequest(nt(V,R,".png"),"SpriteImage");L[U]=ae.getImage(Q,E)}return yield Promise.all([...Object.values(z),...Object.values(L)]),function(U,V){return a._(this,void 0,void 0,function*(){let ee={};for(let Q in U){ee[Q]={};let te=O.getImageCanvasContext((yield V[Q]).data),oe=(yield U[Q]).data;for(let he in oe){let{width:ce,height:de,x:ge,y:pe,sdf:Ie,pixelRatio:Le,stretchX:Me,stretchY:Re,content:Oe,textFitWidth:Ke,textFitHeight:We}=oe[he];ee[Q][he]={data:null,pixelRatio:Le,sdf:Ie,stretchX:Me,stretchY:Re,content:Oe,textFitWidth:Ke,textFitHeight:We,spriteData:{width:ce,height:de,x:ge,y:pe,context:te}}}}return ee})}(z,L)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(v=>{if(this._spriteRequest=null,v)for(let x in v){this._spritesImagesIds[x]=[];let S=this._spritesImagesIds[x]?this._spritesImagesIds[x].filter(E=>!(E in v)):[];for(let E of S)this.imageManager.removeImage(E),this._changedImages[E]=!0;for(let E in v[x]){let A=x==="default"?E:`${x}:${E}`;this._spritesImagesIds[x].push(A),A in this.imageManager.images?this.imageManager.updateImage(A,v[x][E],!1):this.imageManager.addImage(A,v[x][E]),o&&(this._changedImages[A]=!0)}}}).catch(v=>{this._spriteRequest=null,d=v,this.fire(new a.k(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"})),f&&f(d)})}_unloadSprite(){for(let r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}_validateLayer(r){let o=this.sourceCaches[r.source];if(!o)return;let f=r.sourceLayer;if(!f)return;let d=o.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(f)===-1)&&this.fire(new a.k(new Error(`Source layer "${f}" does not exist on source "${d.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,o=!1){let f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(o?a.bB(f):f);let d=[];for(let v of r)if(f[v]){let x=o?a.bB(f[v]):f[v];d.push(x)}return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};let o=Object.keys(this._layers);for(let f of o){let d=this._layers[f];d.type!=="custom"&&(r[f]=d.serialize())}return r}hasTransitions(){var r,o,f;if(!((r=this.light)===null||r===void 0)&&r.hasTransition()||!((o=this.sky)===null||o===void 0)&&o.hasTransition()||!((f=this.projection)===null||f===void 0)&&f.hasTransition())return!0;for(let d in this.sourceCaches)if(this.sourceCaches[d].hasTransition())return!0;for(let d in this._layers)if(this._layers[d].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;let o=this._changed;if(o){let d=Object.keys(this._updatedLayers),v=Object.keys(this._removedLayers);(d.length||v.length)&&this._updateWorkerLayers(d,v);for(let x in this._updatedSources){let S=this._updatedSources[x];if(S==="reload")this._reloadSource(x);else{if(S!=="clear")throw new Error(`Invalid action ${S}`);this._clearSource(x)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let x in this._updatedPaintProps)this._layers[x].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}let f={};for(let d in this.sourceCaches){let v=this.sourceCaches[d];f[d]=v.used,v.used=!1}for(let d of this._order){let v=this._layers[d];v.recalculate(r,this._availableImages),!v.isHidden(r.zoom)&&v.source&&(this.sourceCaches[v.source].used=!0)}for(let d in f){let v=this.sourceCaches[d];!!f[d]!=!!v.used&&v.fire(new a.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(r),this.sky.recalculate(r),this.projection.recalculate(r),this.z=r.zoom,o&&this.fire(new a.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,o={}){var f;this._checkLoaded();let d=this.serialize();if(r=o.transformStyle?o.transformStyle(d,r):r,((f=o.validate)===null||f===void 0||f)&&Oh(this,a.y(r)))return!1;(r=a.bB(r)).layers=a.bz(r.layers);let v=a.bC(d,r),x=this._getOperationsToPerform(v);if(x.unimplemented.length>0)throw new Error(`Unimplemented: ${x.unimplemented.join(", ")}.`);if(x.operations.length===0)return!1;for(let S of x.operations)S();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){let o=[],f=[];for(let d of r)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":o.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":o.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":o.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":o.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":o.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":o.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":o.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":o.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":o.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":o.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":o.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":o.push(()=>this.setSprite.apply(this,d.args));break;case"setTerrain":o.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setSky":o.push(()=>this.setSky.apply(this,d.args));break;case"setProjection":this.setProjection.apply(this,d.args);break;case"setTransition":o.push(()=>{});break;default:f.push(d.command)}return{operations:o,unimplemented:f}}addImage(r,o){if(this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,o),this._afterImageUpdated(r)}updateImage(r,o){this.imageManager.updateImage(r,o)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new a.k(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,o,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(a.y.source,`sources.${r}`,o,null,f))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);let d=this.sourceCaches[r]=new we(r,o,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:r})),d.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(let f in this._layers)if(this._layers[f].source===r)return this.fire(new a.k(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));let o=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],o.fire(new a.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,o){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);let f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(o),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,o,f={}){this._checkLoaded();let d=r.id;if(this.getLayer(d))return void this.fire(new a.k(new Error(`Layer "${d}" already exists on this map.`)));let v;if(r.type==="custom"){if(Oh(this,a.bD(r)))return;v=a.bA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(d,r.source),r=a.bB(r),r=a.e(r,{source:d})),this._validate(a.y.layer,`layers.${d}`,r,{arrayIndex:-1},f))return;v=a.bA(r),this._validateLayer(v),v.setEventedParent(this,{layer:{id:d}})}let x=o?this._order.indexOf(o):this._order.length;if(o&&x===-1)this.fire(new a.k(new Error(`Cannot add layer "${d}" before non-existing layer "${o}".`)));else{if(this._order.splice(x,0,d),this._layerOrderChanged=!0,this._layers[d]=v,this._removedLayers[d]&&v.source&&v.type!=="custom"){let S=this._removedLayers[d];delete this._removedLayers[d],S.type!==v.type?this._updatedSources[v.source]="clear":(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause())}this._updateLayer(v),v.onAdd&&v.onAdd(this.map)}}moveLayer(r,o){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new a.k(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===o)return;let f=this._order.indexOf(r);this._order.splice(f,1);let d=o?this._order.indexOf(o):this._order.length;o&&d===-1?this.fire(new a.k(new Error(`Cannot move layer "${r}" before non-existing layer "${o}".`))):(this._order.splice(d,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();let o=this._layers[r];if(!o)return void this.fire(new a.k(new Error(`Cannot remove non-existing layer "${r}".`)));o.setEventedParent(null);let f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=o,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],o.onRemove&&o.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,o,f){this._checkLoaded();let d=this.getLayer(r);d?d.minzoom===o&&d.maxzoom===f||(o!=null&&(d.minzoom=o),f!=null&&(d.maxzoom=f),this._updateLayer(d)):this.fire(new a.k(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,o,f={}){this._checkLoaded();let d=this.getLayer(r);if(d){if(!a.bE(d.filter,o))return o==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(a.y.filter,`layers.${d.id}.filter`,o,null,f)||(d.filter=a.bB(o),this._updateLayer(d)))}else this.fire(new a.k(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return a.bB(this.getLayer(r).filter)}setLayoutProperty(r,o,f,d={}){this._checkLoaded();let v=this.getLayer(r);v?a.bE(v.getLayoutProperty(o),f)||(v.setLayoutProperty(o,f,d),this._updateLayer(v)):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,o){let f=this.getLayer(r);if(f)return f.getLayoutProperty(o);this.fire(new a.k(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,o,f,d={}){this._checkLoaded();let v=this.getLayer(r);v?a.bE(v.getPaintProperty(o),f)||(v.setPaintProperty(o,f,d)&&this._updateLayer(v),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new a.k(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,o){return this.getLayer(r).getPaintProperty(o)}setFeatureState(r,o){this._checkLoaded();let f=r.source,d=r.sourceLayer,v=this.sourceCaches[f];if(v===void 0)return void this.fire(new a.k(new Error(`The source '${f}' does not exist in the map's style.`)));let x=v.getSource().type;x==="geojson"&&d?this.fire(new a.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):x!=="vector"||d?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),v.setFeatureState(d,r.id,o)):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,o){this._checkLoaded();let f=r.source,d=this.sourceCaches[f];if(d===void 0)return void this.fire(new a.k(new Error(`The source '${f}' does not exist in the map's style.`)));let v=d.getSource().type,x=v==="vector"?r.sourceLayer:void 0;v!=="vector"||x?o&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new a.k(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(x,r.id,o):this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();let o=r.source,f=r.sourceLayer,d=this.sourceCaches[o];if(d!==void 0)return d.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new a.k(new Error("The feature id parameter must be provided."))),d.getFeatureState(f,r.id)):void this.fire(new a.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new a.k(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return a.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let r=a.bF(this.sourceCaches,v=>v.serialize()),o=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,d=this.stylesheet;return a.bG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,projection:d.projection,sources:r,layers:o,terrain:f},v=>v!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){let o=x=>this._layers[x].type==="fill-extrusion",f={},d=[];for(let x=this._order.length-1;x>=0;x--){let S=this._order[x];if(o(S)){f[S]=x;for(let E of r){let A=E[S];if(A)for(let R of A)d.push(R)}}}d.sort((x,S)=>S.intersectionZ-x.intersectionZ);let v=[];for(let x=this._order.length-1;x>=0;x--){let S=this._order[x];if(o(S))for(let E=d.length-1;E>=0;E--){let A=d[E].feature;if(f[A.layer.id]<x)break;v.push(A),d.pop()}else for(let E of r){let A=E[S];if(A)for(let R of A)v.push(R.feature)}}return v}queryRenderedFeatures(r,o,f){o&&o.filter&&this._validate(a.y.filter,"queryRenderedFeatures.filter",o.filter,null,o);let d={};if(o&&o.layers){if(!(Array.isArray(o.layers)||o.layers instanceof Set))return this.fire(new a.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(let A of o.layers){let R=this._layers[A];if(!R)return this.fire(new a.k(new Error(`The layer '${A}' does not exist in the map's style and cannot be queried for features.`))),[];d[R.source]=!0}}let v=[];o.availableImages=this._availableImages;let x=this._serializedAllLayers(),S=o.layers instanceof Set?o.layers:Array.isArray(o.layers)?new Set(o.layers):null,E=Object.assign(Object.assign({},o),{layers:S});for(let A in this.sourceCaches)o.layers&&!d[A]||v.push(Uu(this.sourceCaches[A],this._layers,x,r,E,f,this.map.terrain?(R,z,L)=>this.map.terrain.getElevation(R,z,L):void 0));return this.placement&&v.push(function(A,R,z,L,U,V,ee){let Q={},te=V.queryRenderedSymbols(L),oe=[];for(let he of Object.keys(te).map(Number))oe.push(ee[he]);oe.sort(gn);for(let he of oe){let ce=he.featureIndex.lookupSymbolFeatures(te[he.bucketInstanceId],R,he.bucketIndex,he.sourceLayerIndex,U.filter,U.layers,U.availableImages,A);for(let de in ce){let ge=Q[de]=Q[de]||[],pe=ce[de];pe.sort((Ie,Le)=>{let Me=he.featureSortOrder;if(Me){let Re=Me.indexOf(Ie.featureIndex);return Me.indexOf(Le.featureIndex)-Re}return Le.featureIndex-Ie.featureIndex});for(let Ie of pe)ge.push(Ie)}}return function(he,ce,de){for(let ge in he)for(let pe of he[ge])yn(pe,de[ce[ge].source]);return he}(Q,A,z)}(this._layers,x,this.sourceCaches,r,E,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(v)}querySourceFeatures(r,o){o&&o.filter&&this._validate(a.y.filter,"querySourceFeatures.filter",o.filter,null,o);let f=this.sourceCaches[r];return f?function(d,v){let x=d.getRenderableIds().map(A=>d.getTileByID(A)),S=[],E={};for(let A=0;A<x.length;A++){let R=x[A],z=R.tileID.canonical.key;E[z]||(E[z]=!0,R.querySourceFeatures(S,v))}return S}(f,o):[]}getLight(){return this.light.getLight()}setLight(r,o={}){this._checkLoaded();let f=this.light.getLight(),d=!1;for(let x in r)if(!a.bE(r[x],f[x])){d=!0;break}if(!d)return;let v={now:O.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,o),this.light.updateTransitions(v)}getProjection(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.projection}setProjection(r){if(this._checkLoaded(),this.projection){if(this.projection.name===r.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=r,this._setProjectionInternal(r.type)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,o={}){this._checkLoaded();let f=this.getSky(),d=!1;if(!r&&!f)return;if(r&&!f)d=!0;else if(!r&&f)d=!0;else for(let x in r)if(!a.bE(r[x],f[x])){d=!0;break}if(!d)return;let v={now:O.now(),transition:a.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,o),this.sky.updateTransitions(v)}_setProjectionInternal(r){let o=function(f){if(Array.isArray(f)){let d=new Ch({type:f});return{projection:d,transform:new nc,cameraHelper:new ws(d)}}switch(f){case"mercator":return{projection:new Yu,transform:new ml,cameraHelper:new Ju};case"globe":{let d=new Ch({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:d,transform:new nc,cameraHelper:new ws(d)}}case"vertical-perspective":return{projection:new ec,transform:new bs,cameraHelper:new zn};default:return a.w(`Unknown projection name: ${f}. Falling back to mercator projection.`),{projection:new Yu,transform:new ml,cameraHelper:new Ju}}}(r);this.projection=o.projection,this.map.migrateProjection(o.transform,o.cameraHelper);for(let f in this.sourceCaches)this.sourceCaches[f].reload()}_validate(r,o,f,d,v={}){return(!v||v.validate!==!1)&&Oh(this,r.call(a.y,a.e({key:o,style:this.serialize(),value:f,styleSpec:a.v},d)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Xa().off(ol,this._rtlPluginLoaded);for(let o in this._layers)this._layers[o].setEventedParent(null);for(let o in this.sourceCaches){let f=this.sourceCaches[o];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(let o in this.sourceCaches)this.sourceCaches[o].update(r,this.map.terrain)}_generateCollisionBoxes(){for(let r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,o,f,d,v=!1){let x=!1,S=!1,E={};for(let A of this._order){let R=this._layers[A];if(R.type!=="symbol")continue;if(!E[R.source]){let L=this.sourceCaches[R.source];E[R.source]=L.getRenderableIds(!0).map(U=>L.getTileByID(U)).sort((U,V)=>V.tileID.overscaledZ-U.tileID.overscaledZ||(U.tileID.isLessThan(V.tileID)?-1:1))}let z=this.crossTileSymbolIndex.addLayer(R,E[R.source],r.center.lng);x=x||z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((v=v||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(O.now(),r.zoom))&&(this.pauseablePlacement=new Wy(r,this.map.terrain,this._order,v,o,f,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,E),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(O.now()),S=!0),x&&this.pauseablePlacement.placement.setStale()),S||x)for(let A of this._order){let R=this._layers[A];R.type==="symbol"&&this.placement.updateLayerOpacities(R,E[R.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(O.now())}_releaseSymbolFadeTiles(){for(let r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,o){return a._(this,void 0,void 0,function*(){let f=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();let d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,o.icons),f})}getGlyphs(r,o){return a._(this,void 0,void 0,function*(){let f=yield this.glyphManager.getGlyphs(o.stacks),d=this.sourceCaches[o.source];return d&&d.setDependencies(o.tileID.key,o.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,o={}){this._checkLoaded(),r&&this._validate(a.y.glyphs,"glyphs",r,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,o,f={},d){this._checkLoaded();let v=[{id:r,url:o}],x=[...Te(this.stylesheet.sprite),...v];this._validate(a.y.sprite,"sprite",x,null,f)||(this.stylesheet.sprite=x,this._loadSprite(v,!0,d))}removeSprite(r){this._checkLoaded();let o=Te(this.stylesheet.sprite);if(o.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(let f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;o.splice(o.findIndex(f=>f.id===r),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new a.l("data",{dataType:"style"}))}else this.fire(new a.k(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return Te(this.stylesheet.sprite)}setSprite(r,o={},f){this._checkLoaded(),r&&this._validate(a.y.sprite,"sprite",r,null,o)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var hS=a.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class fS{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,o,f,d,v,x,S,E,A){this.context=r;let R=this.boundPaintVertexBuffers.length!==d.length;for(let z=0;!R&&z<d.length;z++)this.boundPaintVertexBuffers[z]!==d[z]&&(R=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==f||R||this.boundIndexBuffer!==v||this.boundVertexOffset!==x||this.boundDynamicVertexBuffer!==S||this.boundDynamicVertexBuffer2!==E||this.boundDynamicVertexBuffer3!==A?this.freshBind(o,f,d,v,x,S,E,A):(r.bindVertexArray.set(this.vao),S&&S.bind(),v&&v.dynamicDraw&&v.bind(),E&&E.bind(),A&&A.bind())}freshBind(r,o,f,d,v,x,S,E){let A=r.numAttributes,R=this.context,z=R.gl;this.vao&&this.destroy(),this.vao=R.createVertexArray(),R.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=d,this.boundVertexOffset=v,this.boundDynamicVertexBuffer=x,this.boundDynamicVertexBuffer2=S,this.boundDynamicVertexBuffer3=E,o.enableAttributes(z,r);for(let L of f)L.enableAttributes(z,r);x&&x.enableAttributes(z,r),S&&S.enableAttributes(z,r),E&&E.enableAttributes(z,r),o.bind(),o.setVertexAttribPointers(z,r,v);for(let L of f)L.bind(),L.setVertexAttribPointers(z,r,v);x&&(x.bind(),x.setVertexAttribPointers(z,r,v)),d&&d.bind(),S&&(S.bind(),S.setVertexAttribPointers(z,r,v)),E&&(E.bind(),E.setVertexAttribPointers(z,r,v)),R.currentNumAttributes=A}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let dS=(m,r,o,f,d)=>({u_texture:0,u_ele_delta:m,u_fog_matrix:r,u_fog_color:o?o.properties.get("fog-color"):a.b7.white,u_fog_ground_blend:o?o.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:d?0:o?o.calculateFogBlendOpacity(f):0,u_horizon_color:o?o.properties.get("horizon-color"):a.b7.white,u_horizon_fog_blend:o?o.properties.get("horizon-fog-blend"):1,u_is_globe_mode:d?1:0}),kh={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function yl(m){let r=[];for(let o=0;o<m.length;o++){if(m[o]===null)continue;let f=m[o].split(" ");r.push(f.pop())}return r}class Dh{constructor(r,o,f,d,v,x,S,E,A=[]){let R=r.gl;this.program=R.createProgram();let z=yl(o.staticAttributes),L=f?f.getBinderAttributes():[],U=z.concat(L),V=Bi.prelude.staticUniforms?yl(Bi.prelude.staticUniforms):[],ee=S.staticUniforms?yl(S.staticUniforms):[],Q=o.staticUniforms?yl(o.staticUniforms):[],te=f?f.getBinderUniforms():[],oe=V.concat(ee).concat(Q).concat(te),he=[];for(let Me of oe)he.indexOf(Me)<0&&he.push(Me);let ce=f?f.defines():[];Pi(R)&&ce.unshift("#version 300 es"),v&&ce.push("#define OVERDRAW_INSPECTOR;"),x&&ce.push("#define TERRAIN3D;"),E&&ce.push(E),A&&ce.push(...A);let de=ce.concat(Bi.prelude.fragmentSource,S.fragmentSource,o.fragmentSource).join(`
`),ge=ce.concat(Bi.prelude.vertexSource,S.vertexSource,o.vertexSource).join(`
`);Pi(R)||(de=function(Me){return Me.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(de),ge=function(Me){return Me.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(ge));let pe=R.createShader(R.FRAGMENT_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);if(R.shaderSource(pe,de),R.compileShader(pe),!R.getShaderParameter(pe,R.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${R.getShaderInfoLog(pe)}`);R.attachShader(this.program,pe);let Ie=R.createShader(R.VERTEX_SHADER);if(R.isContextLost())return void(this.failedToCreate=!0);if(R.shaderSource(Ie,ge),R.compileShader(Ie),!R.getShaderParameter(Ie,R.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${R.getShaderInfoLog(Ie)}`);R.attachShader(this.program,Ie),this.attributes={};let Le={};this.numAttributes=U.length;for(let Me=0;Me<this.numAttributes;Me++)U[Me]&&(R.bindAttribLocation(this.program,Me,U[Me]),this.attributes[U[Me]]=Me);if(R.linkProgram(this.program),!R.getProgramParameter(this.program,R.LINK_STATUS))throw new Error(`Program failed to link: ${R.getProgramInfoLog(this.program)}`);R.deleteShader(Ie),R.deleteShader(pe);for(let Me=0;Me<he.length;Me++){let Re=he[Me];if(Re&&!Le[Re]){let Oe=R.getUniformLocation(this.program,Re);Oe&&(Le[Re]=Oe)}}this.fixedUniforms=d(r,Le),this.terrainUniforms=((Me,Re)=>({u_depth:new a.bH(Me,Re.u_depth),u_terrain:new a.bH(Me,Re.u_terrain),u_terrain_dim:new a.b8(Me,Re.u_terrain_dim),u_terrain_matrix:new a.bJ(Me,Re.u_terrain_matrix),u_terrain_unpack:new a.bK(Me,Re.u_terrain_unpack),u_terrain_exaggeration:new a.b8(Me,Re.u_terrain_exaggeration)}))(r,Le),this.projectionUniforms=((Me,Re)=>({u_projection_matrix:new a.bJ(Me,Re.u_projection_matrix),u_projection_tile_mercator_coords:new a.bK(Me,Re.u_projection_tile_mercator_coords),u_projection_clipping_plane:new a.bK(Me,Re.u_projection_clipping_plane),u_projection_transition:new a.b8(Me,Re.u_projection_transition),u_projection_fallback_matrix:new a.bJ(Me,Re.u_projection_fallback_matrix)}))(r,Le),this.binderUniforms=f?f.getUniforms(r,Le):[]}draw(r,o,f,d,v,x,S,E,A,R,z,L,U,V,ee,Q,te,oe,he){let ce=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(d),r.setColorMode(v),r.setCullFace(x),E){r.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,E.depthTexture),r.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,E.texture);for(let ge in this.terrainUniforms)this.terrainUniforms[ge].set(E[ge])}if(A)for(let ge in A)this.projectionUniforms[kh[ge]].set(A[ge]);if(S)for(let ge in this.fixedUniforms)this.fixedUniforms[ge].set(S[ge]);Q&&Q.setUniforms(r,this.binderUniforms,V,{zoom:ee});let de=0;switch(o){case ce.LINES:de=2;break;case ce.TRIANGLES:de=3;break;case ce.LINE_STRIP:de=1}for(let ge of U.get()){let pe=ge.vaos||(ge.vaos={});(pe[R]||(pe[R]=new fS)).bind(r,this,z,Q?Q.getPaintVertexBuffers():[],L,ge.vertexOffset,te,oe,he),ce.drawElements(o,ge.primitiveLength*de,ce.UNSIGNED_SHORT,ge.primitiveOffset*de*2)}}}function Lh(m,r,o){let f=1/a.az(o,1,r.transform.tileZoom),d=Math.pow(2,o.tileID.overscaledZ),v=o.tileSize*Math.pow(2,r.transform.tileZoom)/d,x=v*(o.tileID.canonical.x+o.tileID.wrap*d),S=v*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[f,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[x>>16,S>>16],u_pixel_coord_lower:[65535&x,65535&S]}}let zh=(m,r,o,f)=>{let d=m.style.light,v=d.properties.get("position"),x=[v.x,v.y,v.z],S=a.bN();d.properties.get("anchor")==="viewport"&&a.bO(S,m.transform.bearingInRadians),a.bP(x,x,S);let E=m.transform.transformLightDirection(x),A=d.properties.get("color");return{u_lightpos:x,u_lightpos_globe:E,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+r,u_opacity:o,u_fill_translate:f}},Ta=(m,r,o,f,d,v,x)=>a.e(zh(m,r,o,f),Lh(v,m,x),{u_height_factor:-Math.pow(2,d.overscaledZ)/x.tileSize/8}),Yy=(m,r,o,f)=>a.e(Lh(r,m,o),{u_fill_translate:f}),Rp=(m,r)=>({u_world:m,u_fill_translate:r}),ac=(m,r,o,f,d)=>a.e(Yy(m,r,o,d),{u_world:f}),oc=(m,r,o,f,d)=>{let v=m.transform,x,S,E=0;if(o.paint.get("circle-pitch-alignment")==="map"){let A=a.az(r,1,v.zoom);x=!0,S=[A,A],E=A/(a.Z*Math.pow(2,r.tileID.overscaledZ))*2*Math.PI*d}else x=!1,S=v.pixelsToGLUnits;return{u_camera_to_center_distance:v.cameraToCenterDistance,u_scale_with_map:+(o.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+x,u_device_pixel_ratio:m.pixelRatio,u_extrude_scale:S,u_globe_extrude_scale:E,u_translate:f}},pS=m=>({u_pixel_extrude_scale:[1/m.width,1/m.height]}),Fh=m=>({u_viewport_size:[m.width,m.height]}),Xy=(m,r=1)=>({u_color:m,u_overlay:0,u_overlay_scale:r}),Ss=(m,r,o,f)=>{let d=a.az(m,1,r)/(a.Z*Math.pow(2,m.tileID.overscaledZ))*2*Math.PI*f;return{u_extrude_scale:a.az(m,1,r),u_intensity:o,u_globe_extrude_scale:d}},Jy=(m,r,o,f)=>{let d=a.K();a.bQ(d,0,m.width,m.height,0,0,1);let v=m.context.gl;return{u_matrix:d,u_world:[v.drawingBufferWidth,v.drawingBufferHeight],u_image:o,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}},Qy=(m,r,o)=>{let f=o.paint.get("hillshade-accent-color"),d;switch(o.paint.get("hillshade-method")){case"basic":d=4;break;case"combined":d=1;break;case"igor":d=2;break;case"multidirectional":d=3;break;default:d=0}let v=o.getIlluminationProperties();for(let x=0;x<v.directionRadians.length;x++)o.paint.get("hillshade-illumination-anchor")==="viewport"&&(v.directionRadians[x]+=m.transform.bearingInRadians);return{u_image:0,u_latrange:e_(0,r.tileID),u_exaggeration:o.paint.get("hillshade-exaggeration"),u_altitudes:v.altitudeRadians,u_azimuths:v.directionRadians,u_accent:f,u_method:d,u_highlights:v.highlightColor,u_shadows:v.shadowColor}},mS=(m,r)=>{let o=r.stride,f=a.K();return a.bQ(f,0,a.Z,-8192,0,0,1),a.L(f,f,[0,-8192,0]),{u_matrix:f,u_image:1,u_dimension:[o,o],u_zoom:m.overscaledZ,u_unpack:r.getUnpackVector()}};function e_(m,r){let o=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new a.$(0,f/o).toLngLat().lat,new a.$(0,(f+1)/o).toLngLat().lat]}let sc=(m,r,o,f)=>{let d=m.transform;return{u_translation:Ro(m,r,o),u_ratio:f/a.az(r,1,d.zoom),u_device_pixel_ratio:m.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},t_=(m,r,o,f,d)=>a.e(sc(m,r,o,f),{u_image:0,u_image_height:d}),r_=(m,r,o,f,d)=>{let v=m.transform,x=Op(r,v);return{u_translation:Ro(m,r,o),u_texsize:r.imageAtlasTexture.size,u_ratio:f/a.az(r,1,v.zoom),u_device_pixel_ratio:m.pixelRatio,u_image:0,u_scale:[x,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/v.pixelsToGLUnits[0],1/v.pixelsToGLUnits[1]]}},i_=(m,r,o,f,d,v)=>{let x=m.lineAtlas,S=Op(r,m.transform),E=o.layout.get("line-cap")==="round",A=x.getDash(d.from,E),R=x.getDash(d.to,E),z=A.width*v.fromScale,L=R.width*v.toScale;return a.e(sc(m,r,o,f),{u_patternscale_a:[S/z,-A.height/2],u_patternscale_b:[S/L,-R.height/2],u_sdfgamma:x.width/(256*Math.min(z,L)*m.pixelRatio)/2,u_image:0,u_tex_y_a:A.y,u_tex_y_b:R.y,u_mix:v.t})};function Op(m,r){return 1/a.az(m,1,r.tileZoom)}function Ro(m,r,o){return a.aA(m.transform,r,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}let n_=(m,r,o,f,d)=>{return{u_tl_parent:m,u_scale_parent:r,u_buffer_scale:1,u_fade_t:o.mix,u_opacity:o.opacity*f.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:f.paint.get("raster-brightness-min"),u_brightness_high:f.paint.get("raster-brightness-max"),u_saturation_factor:(x=f.paint.get("raster-saturation"),x>0?1-1/(1.001-x):-x),u_contrast_factor:(v=f.paint.get("raster-contrast"),v>0?1/(1-v):1+v),u_spin_weights:a_(f.paint.get("raster-hue-rotate")),u_coords_top:[d[0].x,d[0].y,d[1].x,d[1].y],u_coords_bottom:[d[3].x,d[3].y,d[2].x,d[2].y]};var v,x};function a_(m){m*=Math.PI/180;let r=Math.sin(m),o=Math.cos(m);return[(2*o+1)/3,(-Math.sqrt(3)*r-o+1)/3,(Math.sqrt(3)*r-o+1)/3]}let _l=(m,r,o,f,d,v,x,S,E,A,R,z,L)=>{let U=x.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:U.cameraToCenterDistance,u_pitch:U.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:U.width/U.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_label_plane_matrix:S,u_coord_matrix:E,u_is_text:+R,u_pitch_with_map:+f,u_is_along_line:d,u_is_variable_anchor:v,u_texsize:z,u_texture:0,u_translation:A,u_pitched_scale:L}},o_=(m,r,o,f,d,v,x,S,E,A,R,z,L,U)=>{let V=x.transform;return a.e(_l(m,r,o,f,d,v,x,S,E,A,R,z,U),{u_gamma_scale:f?Math.cos(V.pitch*Math.PI/180)*V.cameraToCenterDistance:1,u_device_pixel_ratio:x.pixelRatio,u_is_halo:1})},Bh=(m,r,o,f,d,v,x,S,E,A,R,z,L)=>a.e(o_(m,r,o,f,d,v,x,S,E,A,!0,R,0,L),{u_texsize_icon:z,u_texture_icon:1}),vS=(m,r)=>({u_opacity:m,u_color:r}),gS=(m,r,o,f,d)=>a.e(function(v,x,S,E){let A=S.imageManager.getPattern(v.from.toString()),R=S.imageManager.getPattern(v.to.toString()),{width:z,height:L}=S.imageManager.getPixelSize(),U=Math.pow(2,E.tileID.overscaledZ),V=E.tileSize*Math.pow(2,S.transform.tileZoom)/U,ee=V*(E.tileID.canonical.x+E.tileID.wrap*U),Q=V*E.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:A.tl,u_pattern_br_a:A.br,u_pattern_tl_b:R.tl,u_pattern_br_b:R.br,u_texsize:[z,L],u_mix:x.t,u_pattern_size_a:A.displaySize,u_pattern_size_b:R.displaySize,u_scale_a:x.fromScale,u_scale_b:x.toScale,u_tile_units_to_pixels:1/a.az(E,1,S.transform.tileZoom),u_pixel_coord_upper:[ee>>16,Q>>16],u_pixel_coord_lower:[65535&ee,65535&Q]}}(o,d,r,f),{u_opacity:m}),kp=(m,r)=>{},s_={fillExtrusion:(m,r)=>({u_lightpos:new a.bL(m,r.u_lightpos),u_lightpos_globe:new a.bL(m,r.u_lightpos_globe),u_lightintensity:new a.b8(m,r.u_lightintensity),u_lightcolor:new a.bL(m,r.u_lightcolor),u_vertical_gradient:new a.b8(m,r.u_vertical_gradient),u_opacity:new a.b8(m,r.u_opacity),u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillExtrusionPattern:(m,r)=>({u_lightpos:new a.bL(m,r.u_lightpos),u_lightpos_globe:new a.bL(m,r.u_lightpos_globe),u_lightintensity:new a.b8(m,r.u_lightintensity),u_lightcolor:new a.bL(m,r.u_lightcolor),u_vertical_gradient:new a.b8(m,r.u_vertical_gradient),u_height_factor:new a.b8(m,r.u_height_factor),u_opacity:new a.b8(m,r.u_opacity),u_fill_translate:new a.bM(m,r.u_fill_translate),u_image:new a.bH(m,r.u_image),u_texsize:new a.bM(m,r.u_texsize),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade)}),fill:(m,r)=>({u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillPattern:(m,r)=>({u_image:new a.bH(m,r.u_image),u_texsize:new a.bM(m,r.u_texsize),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade),u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillOutline:(m,r)=>({u_world:new a.bM(m,r.u_world),u_fill_translate:new a.bM(m,r.u_fill_translate)}),fillOutlinePattern:(m,r)=>({u_world:new a.bM(m,r.u_world),u_image:new a.bH(m,r.u_image),u_texsize:new a.bM(m,r.u_texsize),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade),u_fill_translate:new a.bM(m,r.u_fill_translate)}),circle:(m,r)=>({u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_scale_with_map:new a.bH(m,r.u_scale_with_map),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_extrude_scale:new a.bM(m,r.u_extrude_scale),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_globe_extrude_scale:new a.b8(m,r.u_globe_extrude_scale),u_translate:new a.bM(m,r.u_translate)}),collisionBox:(m,r)=>({u_pixel_extrude_scale:new a.bM(m,r.u_pixel_extrude_scale)}),collisionCircle:(m,r)=>({u_viewport_size:new a.bM(m,r.u_viewport_size)}),debug:(m,r)=>({u_color:new a.bI(m,r.u_color),u_overlay:new a.bH(m,r.u_overlay),u_overlay_scale:new a.b8(m,r.u_overlay_scale)}),depth:kp,clippingMask:kp,heatmap:(m,r)=>({u_extrude_scale:new a.b8(m,r.u_extrude_scale),u_intensity:new a.b8(m,r.u_intensity),u_globe_extrude_scale:new a.b8(m,r.u_globe_extrude_scale)}),heatmapTexture:(m,r)=>({u_matrix:new a.bJ(m,r.u_matrix),u_world:new a.bM(m,r.u_world),u_image:new a.bH(m,r.u_image),u_color_ramp:new a.bH(m,r.u_color_ramp),u_opacity:new a.b8(m,r.u_opacity)}),hillshade:(m,r)=>({u_image:new a.bH(m,r.u_image),u_latrange:new a.bM(m,r.u_latrange),u_exaggeration:new a.b8(m,r.u_exaggeration),u_altitudes:new a.bS(m,r.u_altitudes),u_azimuths:new a.bS(m,r.u_azimuths),u_accent:new a.bI(m,r.u_accent),u_method:new a.bH(m,r.u_method),u_shadows:new a.bR(m,r.u_shadows),u_highlights:new a.bR(m,r.u_highlights)}),hillshadePrepare:(m,r)=>({u_matrix:new a.bJ(m,r.u_matrix),u_image:new a.bH(m,r.u_image),u_dimension:new a.bM(m,r.u_dimension),u_zoom:new a.b8(m,r.u_zoom),u_unpack:new a.bK(m,r.u_unpack)}),line:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels)}),lineGradient:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels),u_image:new a.bH(m,r.u_image),u_image_height:new a.b8(m,r.u_image_height)}),linePattern:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_texsize:new a.bM(m,r.u_texsize),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_image:new a.bH(m,r.u_image),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels),u_scale:new a.bL(m,r.u_scale),u_fade:new a.b8(m,r.u_fade)}),lineSDF:(m,r)=>({u_translation:new a.bM(m,r.u_translation),u_ratio:new a.b8(m,r.u_ratio),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_units_to_pixels:new a.bM(m,r.u_units_to_pixels),u_patternscale_a:new a.bM(m,r.u_patternscale_a),u_patternscale_b:new a.bM(m,r.u_patternscale_b),u_sdfgamma:new a.b8(m,r.u_sdfgamma),u_image:new a.bH(m,r.u_image),u_tex_y_a:new a.b8(m,r.u_tex_y_a),u_tex_y_b:new a.b8(m,r.u_tex_y_b),u_mix:new a.b8(m,r.u_mix)}),raster:(m,r)=>({u_tl_parent:new a.bM(m,r.u_tl_parent),u_scale_parent:new a.b8(m,r.u_scale_parent),u_buffer_scale:new a.b8(m,r.u_buffer_scale),u_fade_t:new a.b8(m,r.u_fade_t),u_opacity:new a.b8(m,r.u_opacity),u_image0:new a.bH(m,r.u_image0),u_image1:new a.bH(m,r.u_image1),u_brightness_low:new a.b8(m,r.u_brightness_low),u_brightness_high:new a.b8(m,r.u_brightness_high),u_saturation_factor:new a.b8(m,r.u_saturation_factor),u_contrast_factor:new a.b8(m,r.u_contrast_factor),u_spin_weights:new a.bL(m,r.u_spin_weights),u_coords_top:new a.bK(m,r.u_coords_top),u_coords_bottom:new a.bK(m,r.u_coords_bottom)}),symbolIcon:(m,r)=>({u_is_size_zoom_constant:new a.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bH(m,r.u_is_size_feature_constant),u_size_t:new a.b8(m,r.u_size_t),u_size:new a.b8(m,r.u_size),u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_pitch:new a.b8(m,r.u_pitch),u_rotate_symbol:new a.bH(m,r.u_rotate_symbol),u_aspect_ratio:new a.b8(m,r.u_aspect_ratio),u_fade_change:new a.b8(m,r.u_fade_change),u_label_plane_matrix:new a.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new a.bJ(m,r.u_coord_matrix),u_is_text:new a.bH(m,r.u_is_text),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_is_along_line:new a.bH(m,r.u_is_along_line),u_is_variable_anchor:new a.bH(m,r.u_is_variable_anchor),u_texsize:new a.bM(m,r.u_texsize),u_texture:new a.bH(m,r.u_texture),u_translation:new a.bM(m,r.u_translation),u_pitched_scale:new a.b8(m,r.u_pitched_scale)}),symbolSDF:(m,r)=>({u_is_size_zoom_constant:new a.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bH(m,r.u_is_size_feature_constant),u_size_t:new a.b8(m,r.u_size_t),u_size:new a.b8(m,r.u_size),u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_pitch:new a.b8(m,r.u_pitch),u_rotate_symbol:new a.bH(m,r.u_rotate_symbol),u_aspect_ratio:new a.b8(m,r.u_aspect_ratio),u_fade_change:new a.b8(m,r.u_fade_change),u_label_plane_matrix:new a.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new a.bJ(m,r.u_coord_matrix),u_is_text:new a.bH(m,r.u_is_text),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_is_along_line:new a.bH(m,r.u_is_along_line),u_is_variable_anchor:new a.bH(m,r.u_is_variable_anchor),u_texsize:new a.bM(m,r.u_texsize),u_texture:new a.bH(m,r.u_texture),u_gamma_scale:new a.b8(m,r.u_gamma_scale),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_is_halo:new a.bH(m,r.u_is_halo),u_translation:new a.bM(m,r.u_translation),u_pitched_scale:new a.b8(m,r.u_pitched_scale)}),symbolTextAndIcon:(m,r)=>({u_is_size_zoom_constant:new a.bH(m,r.u_is_size_zoom_constant),u_is_size_feature_constant:new a.bH(m,r.u_is_size_feature_constant),u_size_t:new a.b8(m,r.u_size_t),u_size:new a.b8(m,r.u_size),u_camera_to_center_distance:new a.b8(m,r.u_camera_to_center_distance),u_pitch:new a.b8(m,r.u_pitch),u_rotate_symbol:new a.bH(m,r.u_rotate_symbol),u_aspect_ratio:new a.b8(m,r.u_aspect_ratio),u_fade_change:new a.b8(m,r.u_fade_change),u_label_plane_matrix:new a.bJ(m,r.u_label_plane_matrix),u_coord_matrix:new a.bJ(m,r.u_coord_matrix),u_is_text:new a.bH(m,r.u_is_text),u_pitch_with_map:new a.bH(m,r.u_pitch_with_map),u_is_along_line:new a.bH(m,r.u_is_along_line),u_is_variable_anchor:new a.bH(m,r.u_is_variable_anchor),u_texsize:new a.bM(m,r.u_texsize),u_texsize_icon:new a.bM(m,r.u_texsize_icon),u_texture:new a.bH(m,r.u_texture),u_texture_icon:new a.bH(m,r.u_texture_icon),u_gamma_scale:new a.b8(m,r.u_gamma_scale),u_device_pixel_ratio:new a.b8(m,r.u_device_pixel_ratio),u_is_halo:new a.bH(m,r.u_is_halo),u_translation:new a.bM(m,r.u_translation),u_pitched_scale:new a.b8(m,r.u_pitched_scale)}),background:(m,r)=>({u_opacity:new a.b8(m,r.u_opacity),u_color:new a.bI(m,r.u_color)}),backgroundPattern:(m,r)=>({u_opacity:new a.b8(m,r.u_opacity),u_image:new a.bH(m,r.u_image),u_pattern_tl_a:new a.bM(m,r.u_pattern_tl_a),u_pattern_br_a:new a.bM(m,r.u_pattern_br_a),u_pattern_tl_b:new a.bM(m,r.u_pattern_tl_b),u_pattern_br_b:new a.bM(m,r.u_pattern_br_b),u_texsize:new a.bM(m,r.u_texsize),u_mix:new a.b8(m,r.u_mix),u_pattern_size_a:new a.bM(m,r.u_pattern_size_a),u_pattern_size_b:new a.bM(m,r.u_pattern_size_b),u_scale_a:new a.b8(m,r.u_scale_a),u_scale_b:new a.b8(m,r.u_scale_b),u_pixel_coord_upper:new a.bM(m,r.u_pixel_coord_upper),u_pixel_coord_lower:new a.bM(m,r.u_pixel_coord_lower),u_tile_units_to_pixels:new a.b8(m,r.u_tile_units_to_pixels)}),terrain:(m,r)=>({u_texture:new a.bH(m,r.u_texture),u_ele_delta:new a.b8(m,r.u_ele_delta),u_fog_matrix:new a.bJ(m,r.u_fog_matrix),u_fog_color:new a.bI(m,r.u_fog_color),u_fog_ground_blend:new a.b8(m,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new a.b8(m,r.u_fog_ground_blend_opacity),u_horizon_color:new a.bI(m,r.u_horizon_color),u_horizon_fog_blend:new a.b8(m,r.u_horizon_fog_blend),u_is_globe_mode:new a.b8(m,r.u_is_globe_mode)}),terrainDepth:(m,r)=>({u_ele_delta:new a.b8(m,r.u_ele_delta)}),terrainCoords:(m,r)=>({u_texture:new a.bH(m,r.u_texture),u_terrain_coords_id:new a.b8(m,r.u_terrain_coords_id),u_ele_delta:new a.b8(m,r.u_ele_delta)}),projectionErrorMeasurement:(m,r)=>({u_input:new a.b8(m,r.u_input),u_output_expected:new a.b8(m,r.u_output_expected)}),atmosphere:(m,r)=>({u_sun_pos:new a.bL(m,r.u_sun_pos),u_atmosphere_blend:new a.b8(m,r.u_atmosphere_blend),u_globe_position:new a.bL(m,r.u_globe_position),u_globe_radius:new a.b8(m,r.u_globe_radius),u_inv_proj_matrix:new a.bJ(m,r.u_inv_proj_matrix)}),sky:(m,r)=>({u_sky_color:new a.bI(m,r.u_sky_color),u_horizon_color:new a.bI(m,r.u_horizon_color),u_horizon:new a.bM(m,r.u_horizon),u_horizon_normal:new a.bM(m,r.u_horizon_normal),u_sky_horizon_blend:new a.b8(m,r.u_sky_horizon_blend),u_sky_blend:new a.b8(m,r.u_sky_blend)})};class l_{constructor(r,o,f){this.context=r;let d=r.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let Dp={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class u_{constructor(r,o,f,d){this.length=o.length,this.attributes=f,this.itemSize=o.bytesPerElement,this.dynamicDraw=d,this.context=r;let v=r.gl;this.buffer=v.createBuffer(),r.bindVertexBuffer.set(this.buffer),v.bufferData(v.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?v.DYNAMIC_DRAW:v.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);let o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,o){for(let f=0;f<this.attributes.length;f++){let d=o.attributes[this.attributes[f].name];d!==void 0&&r.enableVertexAttribArray(d)}}setVertexAttribPointers(r,o,f){for(let d=0;d<this.attributes.length;d++){let v=this.attributes[d],x=o.attributes[v.name];x!==void 0&&r.vertexAttribPointer(x,v.components,r[Dp[v.type]],!1,this.itemSize,v.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Gt{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class to extends Gt{getDefault(){return a.b7.transparent}set(r){let o=this.current;(r.r!==o.r||r.g!==o.g||r.b!==o.b||r.a!==o.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Lp extends Gt{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class zp extends Gt{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class Fp extends Gt{getDefault(){return[!0,!0,!0,!0]}set(r){let o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||r[3]!==o[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class c_ extends Gt{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Bp extends Gt{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class Ts extends Gt{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let o=this.current;(r.func!==o.func||r.ref!==o.ref||r.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class Np extends Gt{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class yS extends Gt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;r?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=r,this.dirty=!1}}class _S extends Gt{getDefault(){return[0,1]}set(r){let o=this.current;(r[0]!==o[0]||r[1]!==o[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class xS extends Gt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;r?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=r,this.dirty=!1}}class bS extends Gt{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class h_ extends Gt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;r?o.enable(o.BLEND):o.disable(o.BLEND),this.current=r,this.dirty=!1}}class wS extends Gt{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let o=this.current;(r[0]!==o[0]||r[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class f_ extends Gt{getDefault(){return a.b7.transparent}set(r){let o=this.current;(r.r!==o.r||r.g!==o.g||r.b!==o.b||r.a!==o.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Nh extends Gt{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class jh extends Gt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;r?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=r,this.dirty=!1}}class Uh extends Gt{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class jp extends Gt{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Is extends Gt{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class $h extends Gt{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class xl extends Gt{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let o=this.current;(r[0]!==o[0]||r[1]!==o[1]||r[2]!==o[2]||r[3]!==o[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Fn extends Gt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class d_ extends Gt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class p_ extends Gt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;o.bindTexture(o.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Up extends Gt{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Es extends Gt{getDefault(){return null}set(r){let o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Vh extends Gt{getDefault(){return null}set(r){var o;if(r===this.current&&!this.dirty)return;let f=this.gl;Pi(f)?f.bindVertexArray(r):(o=f.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class Gh extends Gt{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class lc extends Gt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class Zh extends Gt{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class Hh extends Gt{constructor(r,o){super(r),this.context=r,this.parent=o}getDefault(){return null}}class bl extends Hh{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class wl extends Hh{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class m_ extends Hh{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,r),this.current=r,this.dirty=!1}}let Wh="Framebuffer is not complete";class Dt{constructor(r,o,f,d,v){this.context=r,this.width=o,this.height=f;let x=r.gl,S=this.framebuffer=x.createFramebuffer();if(this.colorAttachment=new bl(r,S),d)this.depthAttachment=v?new m_(r,S):new wl(r,S);else if(v)throw new Error("Stencil cannot be set without depth");if(x.checkFramebufferStatus(x.FRAMEBUFFER)!==x.FRAMEBUFFER_COMPLETE)throw new Error(Wh)}destroy(){let r=this.context.gl,o=this.colorAttachment.get();if(o&&r.deleteTexture(o),this.depthAttachment){let f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Kh{constructor(r){var o,f;if(this.gl=r,this.clearColor=new to(this),this.clearDepth=new Lp(this),this.clearStencil=new zp(this),this.colorMask=new Fp(this),this.depthMask=new c_(this),this.stencilMask=new Bp(this),this.stencilFunc=new Ts(this),this.stencilOp=new Np(this),this.stencilTest=new yS(this),this.depthRange=new _S(this),this.depthTest=new xS(this),this.depthFunc=new bS(this),this.blend=new h_(this),this.blendFunc=new wS(this),this.blendColor=new f_(this),this.blendEquation=new Nh(this),this.cullFace=new jh(this),this.cullFaceSide=new Uh(this),this.frontFace=new jp(this),this.program=new Is(this),this.activeTexture=new $h(this),this.viewport=new xl(this),this.bindFramebuffer=new Fn(this),this.bindRenderbuffer=new d_(this),this.bindTexture=new p_(this),this.bindVertexBuffer=new Up(this),this.bindElementBuffer=new Es(this),this.bindVertexArray=new Vh(this),this.pixelStoreUnpack=new Gh(this),this.pixelStoreUnpackPremultiplyAlpha=new lc(this),this.pixelStoreUnpackFlipY=new Zh(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Pi(r)){this.HALF_FLOAT=r.HALF_FLOAT;let d=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=r.RGBA16F)!==null&&o!==void 0?o:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:d==null?void 0:d.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");let d=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,o){return new l_(this,r,o)}createVertexBuffer(r,o,f){return new u_(this,r,o,f)}createRenderbuffer(r,o,f){let d=this.gl,v=d.createRenderbuffer();return this.bindRenderbuffer.set(v),d.renderbufferStorage(d.RENDERBUFFER,r,o,f),this.bindRenderbuffer.set(null),v}createFramebuffer(r,o,f,d){return new Dt(this,r,o,f,d)}clear({color:r,depth:o,stencil:f}){let d=this.gl,v=0;r&&(v|=d.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(v|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),f!==void 0&&(v|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),d.clear(v)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){a.bE(r.blendFunction,tr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Pi(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var o;return Pi(this.gl)?this.gl.deleteVertexArray(r):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}let Yh;function $p(m,r,o,f,d){let v=m.context,x=m.transform,S=v.gl,E=m.useProgram("collisionBox"),A=[],R=0,z=0;for(let te=0;te<f.length;te++){let oe=f[te],he=r.getTile(oe).getBucket(o);if(!he)continue;let ce=d?he.textCollisionBox:he.iconCollisionBox,de=he.collisionCircleArray;de.length>0&&(A.push({circleArray:de,circleOffset:z,coord:oe}),R+=de.length/4,z=R),ce&&E.draw(v,S.LINES,Tt.disabled,At.disabled,m.colorModeForRenderPass(),jt.disabled,pS(m.transform),m.style.map.terrain&&m.style.map.terrain.getTerrainData(oe),x.getProjectionData({overscaledTileID:oe,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),o.id,ce.layoutVertexBuffer,ce.indexBuffer,ce.segments,null,m.transform.zoom,null,null,ce.collisionVertexBuffer)}if(!d||!A.length)return;let L=m.useProgram("collisionCircle"),U=new a.bT;U.resize(4*R),U._trim();let V=0;for(let te of A)for(let oe=0;oe<te.circleArray.length/4;oe++){let he=4*oe,ce=te.circleArray[he+0],de=te.circleArray[he+1],ge=te.circleArray[he+2],pe=te.circleArray[he+3];U.emplace(V++,ce,de,ge,pe,0),U.emplace(V++,ce,de,ge,pe,1),U.emplace(V++,ce,de,ge,pe,2),U.emplace(V++,ce,de,ge,pe,3)}(!Yh||Yh.length<2*R)&&(Yh=function(te){let oe=2*te,he=new a.bV;he.resize(oe),he._trim();for(let ce=0;ce<oe;ce++){let de=6*ce;he.uint16[de+0]=4*ce+0,he.uint16[de+1]=4*ce+1,he.uint16[de+2]=4*ce+2,he.uint16[de+3]=4*ce+2,he.uint16[de+4]=4*ce+3,he.uint16[de+5]=4*ce+0}return he}(R));let ee=v.createIndexBuffer(Yh,!0),Q=v.createVertexBuffer(U,a.bU.members,!0);for(let te of A){let oe=Fh(m.transform);L.draw(v,S.TRIANGLES,Tt.disabled,At.disabled,m.colorModeForRenderPass(),jt.disabled,oe,m.style.map.terrain&&m.style.map.terrain.getTerrainData(te.coord),null,o.id,Q,ee,a.aJ.simpleSegment(0,2*te.circleOffset,te.circleArray.length,te.circleArray.length/2),null,m.transform.zoom,null,null,null)}Q.destroy(),ee.destroy()}let uc=a.ad(new Float32Array(16));function SS(m,r,o,f,d,v){let{horizontalAlign:x,verticalAlign:S}=a.aE(m);return new a.P((-(x-.5)*r/d+f[0])*v,(-(S-.5)*o/d+f[1])*v)}function TS(m,r,o,f,d,v){let x=r.tileAnchorPoint.add(new a.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let S=f.mult(v);o||(S=S.rotate(-d));let E=x.add(S);return ke(E.x,E.y,r.pitchedLabelPlaneMatrix,r.getElevation).point}if(o){let S=Er(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(m),E=Math.atan(S.y/S.x)+(S.x<0?Math.PI:0);return m.add(f.rotate(E))}return m.add(f)}function v_(m,r,o,f,d,v,x,S,E,A,R,z){let L=m.text.placedSymbolArray,U=m.text.dynamicLayoutVertexArray,V=m.icon.dynamicLayoutVertexArray,ee={};U.clear();for(let Q=0;Q<L.length;Q++){let te=L.get(Q),oe=te.hidden||!te.crossTileID||m.allowVerticalPlacement&&!te.placedOrientation?null:f[te.crossTileID];if(oe){let he=new a.P(te.anchorX,te.anchorY),ce={getElevation:z,width:d.width,height:d.height,pitchedLabelPlaneMatrix:v,pitchWithMap:o,transform:d,tileAnchorPoint:he,translation:A,unwrappedTileID:R},de=o?Pt(he.x,he.y,ce):Er(he.x,he.y,ce),ge=Yt(d.cameraToCenterDistance,de.signedDistanceFromCamera),pe=a.am(m.textSizeData,S,te)*ge/a.ay;o&&(pe*=m.tilePixelRatio/x);let{width:Ie,height:Le,anchor:Me,textOffset:Re,textBoxScale:Oe}=oe,Ke=SS(Me,Ie,Le,Re,Oe,pe),We=d.getPitchedTextCorrection(he.x+A[0],he.y+A[1],R),Ue=TS(de.point,ce,r,Ke,-d.bearingInRadians,We),at=m.allowVerticalPlacement&&te.placedOrientation===a.al.vertical?Math.PI/2:0;for(let Ct=0;Ct<te.numGlyphs;Ct++)a.as(U,Ue,at);E&&te.associatedIconIndex>=0&&(ee[te.associatedIconIndex]={shiftedAnchor:Ue,angle:at})}else Qa(te.numGlyphs,U)}if(E){V.clear();let Q=m.icon.placedSymbolArray;for(let te=0;te<Q.length;te++){let oe=Q.get(te);if(oe.hidden)Qa(oe.numGlyphs,V);else{let he=ee[te];if(he)for(let ce=0;ce<oe.numGlyphs;ce++)a.as(V,he.shiftedAnchor,he.angle);else Qa(oe.numGlyphs,V)}}m.icon.dynamicLayoutVertexBuffer.updateData(V)}m.text.dynamicLayoutVertexBuffer.updateData(U)}function IS(m,r,o){return o.iconsInText&&r?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Xh(m,r,o,f,d,v,x,S,E,A,R,z,L){let U=m.context,V=U.gl,ee=m.transform,Q=S==="map",te=E==="map",oe=S!=="viewport"&&o.layout.get("symbol-placement")!=="point",he=Q&&!te&&!oe,ce=!o.layout.get("symbol-sort-key").isConstant(),de=!1,ge=m.getDepthModeForSublayer(0,Tt.ReadOnly),pe=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Ie=[],Le=ee.getCircleRadiusCorrection();for(let Me of f){let Re=r.getTile(Me),Oe=Re.getBucket(o);if(!Oe)continue;let Ke=d?Oe.text:Oe.icon;if(!Ke||!Ke.segments.get().length||!Ke.hasVisibleVertices)continue;let We=Ke.programConfigurations.get(o.id),Ue=d||Oe.sdfIcons,at=d?Oe.textSizeData:Oe.iconSizeData,Ct=te||ee.pitch!==0,Ut=m.useProgram(IS(Ue,d,Oe),We),gr=a.ak(at,ee.zoom),ir=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Me),yr,_r,or,Ht,ei=[0,0],si=null;if(d)_r=Re.glyphAtlasTexture,or=V.LINEAR,yr=Re.glyphAtlasTexture.size,Oe.iconsInText&&(ei=Re.imageAtlasTexture.size,si=Re.imageAtlasTexture,Ht=Ct||m.options.rotating||m.options.zooming||at.kind==="composite"||at.kind==="camera"?V.LINEAR:V.NEAREST);else{let Ur=o.layout.get("icon-size").constantOr(0)!==1||Oe.iconsNeedLinear;_r=Re.imageAtlasTexture,or=Ue||m.options.rotating||m.options.zooming||Ur||Ct?V.LINEAR:V.NEAREST,yr=Re.imageAtlasTexture.size}let yi=a.az(Re,1,m.transform.zoom),Wt=ht(Q,m.transform,yi),ko=a.K();a.an(ko,Wt);let qa=Et(te,Q,m.transform,yi),Do=a.aA(ee,Re,v,x),As=ee.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),Tc=pe&&Oe.hasTextData(),Lo=o.layout.get("icon-text-fit")!=="none"&&Tc&&Oe.hasIconData();if(oe){let Ur=m.style.map.terrain?($i,hr)=>m.style.map.terrain.getElevation(Me,$i,hr):null,$r=o.layout.get("text-rotation-alignment")==="map";Zt(Oe,m,d,Wt,ko,te,A,$r,Me.toUnwrapped(),ee.width,ee.height,Do,Ur)}let Cs=d&&pe||Lo,Sn=oe||Cs?uc:te?Wt:m.transform.clipSpaceToPixelsMatrix,zo=Ue&&o.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,io;io=Ue?Oe.iconsInText?Bh(at.kind,gr,he,te,oe,Cs,m,Sn,qa,Do,yr,ei,Le):o_(at.kind,gr,he,te,oe,Cs,m,Sn,qa,Do,d,yr,0,Le):_l(at.kind,gr,he,te,oe,Cs,m,Sn,qa,Do,d,yr,Le);let Fo={program:Ut,buffers:Ke,uniformValues:io,projectionData:As,atlasTexture:_r,atlasTextureIcon:si,atlasInterpolation:or,atlasInterpolationIcon:Ht,isSDF:Ue,hasHalo:zo};if(ce&&Oe.canOverlap){de=!0;let Ur=Ke.segments.get();for(let $r of Ur)Ie.push({segments:new a.aJ([$r]),sortKey:$r.sortKey,state:Fo,terrainData:ir})}else Ie.push({segments:Ke.segments,sortKey:0,state:Fo,terrainData:ir})}de&&Ie.sort((Me,Re)=>Me.sortKey-Re.sortKey);for(let Me of Ie){let Re=Me.state;if(U.activeTexture.set(V.TEXTURE0),Re.atlasTexture.bind(Re.atlasInterpolation,V.CLAMP_TO_EDGE),Re.atlasTextureIcon&&(U.activeTexture.set(V.TEXTURE1),Re.atlasTextureIcon&&Re.atlasTextureIcon.bind(Re.atlasInterpolationIcon,V.CLAMP_TO_EDGE)),Re.isSDF){let Oe=Re.uniformValues;Re.hasHalo&&(Oe.u_is_halo=1,cc(Re.buffers,Me.segments,o,m,Re.program,ge,R,z,Oe,Re.projectionData,Me.terrainData)),Oe.u_is_halo=0}cc(Re.buffers,Me.segments,o,m,Re.program,ge,R,z,Re.uniformValues,Re.projectionData,Me.terrainData)}}function cc(m,r,o,f,d,v,x,S,E,A,R){let z=f.context;d.draw(z,z.gl.TRIANGLES,v,x,S,jt.backCCW,E,R,A,o.id,m.layoutVertexBuffer,m.indexBuffer,r,o.paint,f.transform.zoom,m.programConfigurations.get(o.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function Jh(m,r,o,f,d){let v=m.context,x=v.gl,S=At.disabled,E=new tr([x.ONE,x.ONE],a.b7.transparent,[!0,!0,!0,!0]),A=r.getBucket(o);if(!A)return;let R=f.key,z=o.heatmapFbos.get(R);z||(z=Qh(v,r.tileSize,r.tileSize),o.heatmapFbos.set(R,z)),v.bindFramebuffer.set(z.framebuffer),v.viewport.set([0,0,r.tileSize,r.tileSize]),v.clear({color:a.b7.transparent});let L=A.programConfigurations.get(o.id),U=m.useProgram("heatmap",L,!d),V=m.transform.getProjectionData({overscaledTileID:r.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ee=m.style.map.terrain.getTerrainData(f);U.draw(v,x.TRIANGLES,Tt.disabled,S,E,jt.disabled,Ss(r,m.transform.zoom,o.paint.get("heatmap-intensity"),1),ee,V,o.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,o.paint,m.transform.zoom,L)}function Vp(m,r,o,f,d){let v=m.context,x=v.gl,S=m.transform;v.setColorMode(m.colorModeForRenderPass());let E=Gp(v,r),A=o.key,R=r.heatmapFbos.get(A);if(!R)return;v.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,R.colorAttachment.get()),v.activeTexture.set(x.TEXTURE1),E.bind(x.LINEAR,x.CLAMP_TO_EDGE);let z=S.getProjectionData({overscaledTileID:o,applyTerrainMatrix:d,applyGlobeMatrix:!f});m.useProgram("heatmapTexture").draw(v,x.TRIANGLES,Tt.disabled,At.disabled,m.colorModeForRenderPass(),jt.disabled,Jy(m,r,0,1),null,z,r.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments,r.paint,S.zoom),R.destroy(),r.heatmapFbos.delete(A)}function Qh(m,r,o){var f,d;let v=m.gl,x=v.createTexture();v.bindTexture(v.TEXTURE_2D,x),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_S,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_WRAP_T,v.CLAMP_TO_EDGE),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,v.LINEAR),v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,v.LINEAR);let S=(f=m.HALF_FLOAT)!==null&&f!==void 0?f:v.UNSIGNED_BYTE,E=(d=m.RGBA16F)!==null&&d!==void 0?d:v.RGBA;v.texImage2D(v.TEXTURE_2D,0,E,r,o,0,v.RGBA,S,null);let A=m.createFramebuffer(r,o,!1,!1);return A.colorAttachment.set(x),A}function Gp(m,r){return r.colorRampTexture||(r.colorRampTexture=new Ve(m,r.colorRamp,m.gl.RGBA)),r.colorRampTexture}function hc(m,r,o,f,d){if(!o||!f||!f.imageAtlas)return;let v=f.imageAtlas.patternPositions,x=v[o.to.toString()],S=v[o.from.toString()];if(!x&&S&&(x=S),!S&&x&&(S=x),!x||!S){let E=d.getPaintProperty(r);x=v[E],S=v[E]}x&&S&&m.setConstantPatternPositions(x,S)}function fc(m,r,o,f,d,v,x,S){let E=m.context.gl,A="fill-pattern",R=o.paint.get(A),z=R&&R.constantOr(1),L=o.getCrossfadeParameters(),U,V,ee,Q,te,oe=m.transform,he=o.paint.get("fill-translate"),ce=o.paint.get("fill-translate-anchor");x?(V=z&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=E.LINES):(V=z?"fillPattern":"fill",U=E.TRIANGLES);let de=R.constantOr(null);for(let ge of f){let pe=r.getTile(ge);if(z&&!pe.patternsLoaded())continue;let Ie=pe.getBucket(o);if(!Ie)continue;let Le=Ie.programConfigurations.get(o.id),Me=m.useProgram(V,Le),Re=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ge);z&&(m.context.activeTexture.set(E.TEXTURE0),pe.imageAtlasTexture.bind(E.LINEAR,E.CLAMP_TO_EDGE),Le.updatePaintBuffers(L)),hc(Le,A,de,pe,o);let Oe=oe.getProjectionData({overscaledTileID:ge,applyGlobeMatrix:!S,applyTerrainMatrix:!0}),Ke=a.aA(oe,pe,he,ce);if(x){Q=Ie.indexBuffer2,te=Ie.segments2;let Ue=[E.drawingBufferWidth,E.drawingBufferHeight];ee=V==="fillOutlinePattern"&&z?ac(m,L,pe,Ue,Ke):Rp(Ue,Ke)}else Q=Ie.indexBuffer,te=Ie.segments,ee=z?Yy(m,L,pe,Ke):{u_fill_translate:Ke};let We=m.stencilModeForClipping(ge);Me.draw(m.context,U,d,We,v,jt.backCCW,ee,Re,Oe,o.id,Ie.layoutVertexBuffer,Q,te,o.paint,m.transform.zoom,Le)}}function dc(m,r,o,f,d,v,x,S){let E=m.context,A=E.gl,R="fill-extrusion-pattern",z=o.paint.get(R),L=z.constantOr(1),U=o.getCrossfadeParameters(),V=o.paint.get("fill-extrusion-opacity"),ee=z.constantOr(null),Q=m.transform;for(let te of f){let oe=r.getTile(te),he=oe.getBucket(o);if(!he)continue;let ce=m.style.map.terrain&&m.style.map.terrain.getTerrainData(te),de=he.programConfigurations.get(o.id),ge=m.useProgram(L?"fillExtrusionPattern":"fillExtrusion",de);L&&(m.context.activeTexture.set(A.TEXTURE0),oe.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),de.updatePaintBuffers(U));let pe=Q.getProjectionData({overscaledTileID:te,applyGlobeMatrix:!S,applyTerrainMatrix:!0});hc(de,R,ee,oe,o);let Ie=a.aA(Q,oe,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),Le=o.paint.get("fill-extrusion-vertical-gradient"),Me=L?Ta(m,Le,V,Ie,te,U,oe):zh(m,Le,V,Ie);ge.draw(E,E.gl.TRIANGLES,d,v,x,jt.backCCW,Me,ce,pe,o.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,o.paint,m.transform.zoom,de,m.style.map.terrain&&he.centroidVertexBuffer)}}function Zp(m,r,o,f,d,v,x,S,E){var A;let R=m.style.projection,z=m.context,L=m.transform,U=z.gl,V=[`#define NUM_ILLUMINATION_SOURCES ${o.paint.get("hillshade-highlight-color").values.length}`],ee=m.useProgram("hillshade",null,!1,V),Q=!m.options.moving;for(let te of f){let oe=r.getTile(te),he=oe.fbo;if(!he)continue;let ce=R.getMeshFromTileID(z,te.canonical,S,!0,"raster"),de=(A=m.style.map.terrain)===null||A===void 0?void 0:A.getTerrainData(te);z.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,he.colorAttachment.get());let ge=L.getProjectionData({overscaledTileID:te,aligned:Q,applyGlobeMatrix:!E,applyTerrainMatrix:!0});ee.draw(z,U.TRIANGLES,v,d[te.overscaledZ],x,jt.backCCW,Qy(m,oe,o),de,ge,o.id,ce.vertexBuffer,ce.indexBuffer,ce.segments)}}let pc=[new a.P(0,0),new a.P(a.Z,0),new a.P(a.Z,a.Z),new a.P(0,a.Z)];function ef(m,r,o,f,d,v,x,S,E=!1,A=!1){let R=f[f.length-1].overscaledZ,z=m.context,L=z.gl,U=m.useProgram("raster"),V=m.transform,ee=m.style.projection,Q=m.colorModeForRenderPass(),te=!m.options.moving;for(let oe of f){let he=m.getDepthModeForSublayer(oe.overscaledZ-R,o.paint.get("raster-opacity")===1?Tt.ReadWrite:Tt.ReadOnly,L.LESS),ce=r.getTile(oe);ce.registerFadeDuration(o.paint.get("raster-fade-duration"));let de=r.findLoadedParent(oe,0),ge=r.findLoadedSibling(oe),pe=g_(ce,de||ge||null,r,o,m.transform,m.style.map.terrain),Ie,Le,Me=o.paint.get("raster-resampling")==="nearest"?L.NEAREST:L.LINEAR;z.activeTexture.set(L.TEXTURE0),ce.texture.bind(Me,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),z.activeTexture.set(L.TEXTURE1),de?(de.texture.bind(Me,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),Ie=Math.pow(2,de.tileID.overscaledZ-ce.tileID.overscaledZ),Le=[ce.tileID.canonical.x*Ie%1,ce.tileID.canonical.y*Ie%1]):ce.texture.bind(Me,L.CLAMP_TO_EDGE,L.LINEAR_MIPMAP_NEAREST),ce.texture.useMipmap&&z.extTextureFilterAnisotropic&&m.transform.pitch>20&&L.texParameterf(L.TEXTURE_2D,z.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,z.extTextureFilterAnisotropicMax);let Re=m.style.map.terrain&&m.style.map.terrain.getTerrainData(oe),Oe=V.getProjectionData({overscaledTileID:oe,aligned:te,applyGlobeMatrix:!A,applyTerrainMatrix:!0}),Ke=n_(Le||[0,0],Ie||1,pe,o,S),We=ee.getMeshFromTileID(z,oe.canonical,v,x,"raster");U.draw(z,L.TRIANGLES,he,d?d[oe.overscaledZ]:At.disabled,Q,E?jt.frontCCW:jt.backCCW,Ke,Re,Oe,o.id,We.vertexBuffer,We.indexBuffer,We.segments)}}function g_(m,r,o,f,d,v){let x=f.paint.get("raster-fade-duration");if(!v&&x>0){let S=O.now(),E=(S-m.timeAdded)/x,A=r?(S-r.timeAdded)/x:-1,R=o.getSource(),z=qe(d,{tileSize:R.tileSize,roundZoom:R.roundZoom}),L=!r||Math.abs(r.tileID.overscaledZ-z)>Math.abs(m.tileID.overscaledZ-z),U=L&&m.refreshedUponExpiration?1:a.ae(L?E:1-A,0,1);return m.refreshedUponExpiration&&E>=1&&(m.refreshedUponExpiration=!1),r?{opacity:1,mix:1-U}:{opacity:U,mix:0}}return{opacity:1,mix:0}}let tf=new a.b7(1,0,0,1),Hp=new a.b7(0,1,0,1),y_=new a.b7(0,0,1,1),__=new a.b7(1,0,1,1),rf=new a.b7(0,1,1,1);function nf(m,r,o,f){mc(m,0,r+o/2,m.transform.width,o,f)}function x_(m,r,o,f){mc(m,r-o/2,0,o,m.transform.height,f)}function mc(m,r,o,f,d,v){let x=m.context,S=x.gl;S.enable(S.SCISSOR_TEST),S.scissor(r*m.pixelRatio,o*m.pixelRatio,f*m.pixelRatio,d*m.pixelRatio),x.clear({color:v}),S.disable(S.SCISSOR_TEST)}function Or(m,r,o){let f=m.context,d=f.gl,v=m.useProgram("debug"),x=Tt.disabled,S=At.disabled,E=m.colorModeForRenderPass(),A="$debug",R=m.style.map.terrain&&m.style.map.terrain.getTerrainData(o);f.activeTexture.set(d.TEXTURE0);let z=r.getTileByID(o.key).latestRawTileData,L=Math.floor((z&&z.byteLength||0)/1024),U=r.getTile(o).tileSize,V=512/Math.min(U,512)*(o.overscaledZ/m.transform.zoom)*.5,ee=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ee+=` => ${o.overscaledZ}`),function(te,oe){te.initDebugOverlayCanvas();let he=te.debugOverlayCanvas,ce=te.context.gl,de=te.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,he.width,he.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold 36px Open Sans, sans-serif",de.fillText(oe,5,5),de.strokeText(oe,5,5),te.debugOverlayTexture.update(he),te.debugOverlayTexture.bind(ce.LINEAR,ce.CLAMP_TO_EDGE)}(m,`${ee} ${L}kB`);let Q=m.transform.getProjectionData({overscaledTileID:o,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(f,d.TRIANGLES,x,S,tr.alphaBlended,jt.disabled,Xy(a.b7.transparent,V),null,Q,A,m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments),v.draw(f,d.LINE_STRIP,x,S,E,jt.disabled,Xy(a.b7.red),R,Q,A,m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments)}function Oo(m,r,o,f){let{isRenderingGlobe:d}=f,v=m.context,x=v.gl,S=m.transform,E=m.colorModeForRenderPass(),A=m.getDepthModeFor3D(),R=m.useProgram("terrain");v.bindFramebuffer.set(null),v.viewport.set([0,0,m.width,m.height]);for(let z of o){let L=r.getTerrainMesh(z.tileID),U=m.renderToTexture.getTexture(z),V=r.getTerrainData(z.tileID);v.activeTexture.set(x.TEXTURE0),x.bindTexture(x.TEXTURE_2D,U.texture);let ee=r.getMeshFrameDelta(S.zoom),Q=S.calculateFogMatrix(z.tileID.toUnwrapped()),te=dS(ee,Q,m.style.sky,S.pitch,d),oe=S.getProjectionData({overscaledTileID:z.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});R.draw(v,x.TRIANGLES,A,At.disabled,E,jt.backCCW,te,V,oe,"terrain",L.vertexBuffer,L.indexBuffer,L.segments)}}function wn(m,r){if(!r.mesh){let o=new a.aI;o.emplaceBack(-1,-1),o.emplaceBack(1,-1),o.emplaceBack(1,1),o.emplaceBack(-1,1);let f=new a.aK;f.emplaceBack(0,1,2),f.emplaceBack(0,2,3),r.mesh=new dl(m.createVertexBuffer(o,Ni.members),m.createIndexBuffer(f),a.aJ.simpleSegment(0,0,o.length,f.length))}return r.mesh}class Wp{constructor(r,o){this.context=new Kh(r),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:a.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=we.maxUnderzooming+we.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ku}resize(r,o,f){if(this.width=Math.floor(r*f),this.height=Math.floor(o*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let d of this.style._order)this.style._layers[d].resize()}setup(){let r=this.context,o=new a.aI;o.emplaceBack(0,0),o.emplaceBack(a.Z,0),o.emplaceBack(0,a.Z),o.emplaceBack(a.Z,a.Z),this.tileExtentBuffer=r.createVertexBuffer(o,Ni.members),this.tileExtentSegments=a.aJ.simpleSegment(0,0,4,2);let f=new a.aI;f.emplaceBack(0,0),f.emplaceBack(a.Z,0),f.emplaceBack(0,a.Z),f.emplaceBack(a.Z,a.Z),this.debugBuffer=r.createVertexBuffer(f,Ni.members),this.debugSegments=a.aJ.simpleSegment(0,0,4,5);let d=new a.b_;d.emplaceBack(0,0,0,0),d.emplaceBack(a.Z,0,a.Z,0),d.emplaceBack(0,a.Z,0,a.Z),d.emplaceBack(a.Z,a.Z,a.Z,a.Z),this.rasterBoundsBuffer=r.createVertexBuffer(d,hS.members),this.rasterBoundsSegments=a.aJ.simpleSegment(0,0,4,2);let v=new a.aI;v.emplaceBack(0,0),v.emplaceBack(a.Z,0),v.emplaceBack(0,a.Z),v.emplaceBack(a.Z,a.Z),this.rasterBoundsBufferPosOnly=r.createVertexBuffer(v,Ni.members),this.rasterBoundsSegmentsPosOnly=a.aJ.simpleSegment(0,0,4,5);let x=new a.aI;x.emplaceBack(0,0),x.emplaceBack(1,0),x.emplaceBack(0,1),x.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(x,Ni.members),this.viewportSegments=a.aJ.simpleSegment(0,0,4,2);let S=new a.b$;S.emplaceBack(0),S.emplaceBack(1),S.emplaceBack(3),S.emplaceBack(2),S.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(S);let E=new a.aK;E.emplaceBack(1,0,2),E.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(E);let A=this.context.gl;this.stencilClearMode=new At({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO),this.tileExtentMesh=new dl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){let r=this.context,o=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let f=a.K();a.bQ(f,0,this.width,this.height,0,0,1),a.M(f,f,[o.drawingBufferWidth,o.drawingBufferHeight,0]);let d={mainMatrix:f,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:f};this.useProgram("clippingMask",null,!0).draw(r,o.TRIANGLES,Tt.disabled,this.stencilClearMode,tr.disabled,jt.disabled,null,null,d,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,o,f){if(this.currentStencilSource===r.source||!r.isTileClipped()||!o||!o.length)return;this.currentStencilSource=r.source,this.nextStencilID+o.length>256&&this.clearStencil();let d=this.context;d.setColorMode(tr.disabled),d.setDepthMode(Tt.disabled);let v={};for(let x of o)v[x.key]=this.nextStencilID++;this._renderTileMasks(v,o,f,!0),this._renderTileMasks(v,o,f,!1),this._tileClippingMaskIDs=v}_renderTileMasks(r,o,f,d){let v=this.context,x=v.gl,S=this.style.projection,E=this.transform,A=this.useProgram("clippingMask");for(let R of o){let z=r[R.key],L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(R),U=S.getMeshFromTileID(this.context,R.canonical,d,!0,"stencil"),V=E.getProjectionData({overscaledTileID:R,applyGlobeMatrix:!f,applyTerrainMatrix:!0});A.draw(v,x.TRIANGLES,Tt.disabled,new At({func:x.ALWAYS,mask:0},z,255,x.KEEP,x.KEEP,x.REPLACE),tr.disabled,f?jt.disabled:jt.backCCW,null,L,V,"$clipping",U.vertexBuffer,U.indexBuffer,U.segments)}}_renderTilesDepthBuffer(){let r=this.context,o=r.gl,f=this.style.projection,d=this.transform,v=this.useProgram("depth"),x=this.getDepthModeFor3D(),S=ye(d,{tileSize:d.tileSize});for(let E of S){let A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(E),R=f.getMeshFromTileID(this.context,E.canonical,!0,!0,"raster"),z=d.getProjectionData({overscaledTileID:E,applyGlobeMatrix:!0,applyTerrainMatrix:!0});v.draw(r,o.TRIANGLES,x,At.disabled,tr.disabled,jt.backCCW,null,A,z,"$clipping",R.vertexBuffer,R.indexBuffer,R.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let r=this.nextStencilID++,o=this.context.gl;return new At({func:o.NOTEQUAL,mask:255},r,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(r){let o=this.context.gl;return new At({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,o.KEEP,o.KEEP,o.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(r){let o=this.context.gl,f=r.sort((x,S)=>S.overscaledZ-x.overscaledZ),d=f[f.length-1].overscaledZ,v=f[0].overscaledZ-d+1;if(v>1){this.currentStencilSource=void 0,this.nextStencilID+v>256&&this.clearStencil();let x={};for(let S=0;S<v;S++)x[S+d]=new At({func:o.GEQUAL,mask:255},S+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=v,[x,f]}return[{[d]:At.disabled},f]}stencilConfigForOverlapTwoPass(r){let o=this.context.gl,f=r.sort((x,S)=>S.overscaledZ-x.overscaledZ),d=f[f.length-1].overscaledZ,v=f[0].overscaledZ-d+1;if(this.clearStencil(),v>1){let x={},S={};for(let E=0;E<v;E++)x[E+d]=new At({func:o.GREATER,mask:255},v+1+E,255,o.KEEP,o.KEEP,o.REPLACE),S[E+d]=new At({func:o.GREATER,mask:255},1+E,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID=2*v+1,[x,S,f]}return this.nextStencilID=3,[{[d]:new At({func:o.GREATER,mask:255},2,255,o.KEEP,o.KEEP,o.REPLACE)},{[d]:new At({func:o.GREATER,mask:255},1,255,o.KEEP,o.KEEP,o.REPLACE)},f]}colorModeForRenderPass(){let r=this.context.gl;return this._showOverdrawInspector?new tr([r.CONSTANT_COLOR,r.ONE],new a.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?tr.unblended:tr.alphaBlended}getDepthModeForSublayer(r,o,f){if(!this.opaquePassEnabledForLayer())return Tt.disabled;let d=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Tt(f||this.context.gl.LEQUAL,o,[d,d])}getDepthModeFor3D(){return new Tt(this.context.gl.LEQUAL,Tt.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,o){var f,d;this.style=r,this.options=o,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(O.now()),this.imageManager.beginFrame();let v=this.style._order,x=this.style.sourceCaches,S={},E={},A={},R={isRenderingToTexture:!1,isRenderingGlobe:((f=r.projection)===null||f===void 0?void 0:f.transitionState)>0};for(let L in x){let U=x[L];U.used&&U.prepare(this.context),S[L]=U.getVisibleCoordinates(!1),E[L]=S[L].slice().reverse(),A[L]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let L=0;L<v.length;L++)if(this.style._layers[v[L]].is3D()){this.opaquePassCutoff=L;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let L of v){let U=this.style._layers[L];if(!U.hasOffscreenPass()||U.isHidden(this.transform.zoom))continue;let V=E[U.source];(U.type==="custom"||V.length)&&this.renderLayer(this,x[U.source],U,V,R)}if((d=this.style.projection)===null||d===void 0||d.updateGPUdependent({context:this.context,useProgram:L=>this.useProgram(L)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?a.b7.black:a.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(L,U){let V=L.context,ee=V.gl,Q=((ge,pe,Ie)=>{let Le=Math.cos(pe.rollInRadians),Me=Math.sin(pe.rollInRadians),Re=xe(pe),Oe=pe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:ge.properties.get("sky-color"),u_horizon_color:ge.properties.get("horizon-color"),u_horizon:[(pe.width/2-Re*Me)*Ie,(pe.height/2+Re*Le)*Ie],u_horizon_normal:[-Me,Le],u_sky_horizon_blend:ge.properties.get("sky-horizon-blend")*pe.height/2*Ie,u_sky_blend:Oe}})(U,L.style.map.transform,L.pixelRatio),te=new Tt(ee.LEQUAL,Tt.ReadWrite,[0,1]),oe=At.disabled,he=L.colorModeForRenderPass(),ce=L.useProgram("sky"),de=wn(V,U);ce.draw(V,ee.TRIANGLES,te,oe,he,jt.disabled,Q,null,void 0,"sky",de.vertexBuffer,de.indexBuffer,de.segments)}(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=v.length-1;this.currentLayer>=0;this.currentLayer--){let L=this.style._layers[v[this.currentLayer]],U=x[L.source],V=S[L.source];this._renderTileClippingMasks(L,V,!1),this.renderLayer(this,U,L,V,R)}this.renderPass="translucent";let z=!1;for(this.currentLayer=0;this.currentLayer<v.length;this.currentLayer++){let L=this.style._layers[v[this.currentLayer]],U=x[L.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(L,R))continue;this.opaquePassEnabledForLayer()||z||(z=!0,R.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());let V=(L.type==="symbol"?A:E)[L.source];this._renderTileClippingMasks(L,S[L.source],!!this.renderToTexture),this.renderLayer(this,U,L,V,R)}if(R.isRenderingGlobe&&function(L,U,V){let ee=L.context,Q=ee.gl,te=L.useProgram("atmosphere"),oe=new Tt(Q.LEQUAL,Tt.ReadOnly,[0,1]),he=L.transform,ce=function(Oe,Ke){let We=Oe.properties.get("position"),Ue=[-We.x,-We.y,-We.z],at=a.ad(new Float64Array(16));return Oe.properties.get("anchor")==="map"&&(a.a_(at,at,Ke.rollInRadians),a.a$(at,at,-Ke.pitchInRadians),a.a_(at,at,Ke.bearingInRadians),a.a$(at,at,Ke.center.lat*Math.PI/180),a.bp(at,at,-Ke.center.lng*Math.PI/180)),a.bZ(Ue,Ue,at),Ue}(V,L.transform),de=he.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ge=U.properties.get("atmosphere-blend")*de.projectionTransition;if(ge===0)return;let pe=xs(he.worldSize,he.center.lat),Ie=he.inverseProjectionMatrix,Le=new Float64Array(4);Le[3]=1,a.at(Le,Le,he.modelViewProjectionMatrix),Le[0]/=Le[3],Le[1]/=Le[3],Le[2]/=Le[3],Le[3]=1,a.at(Le,Le,Ie),Le[0]/=Le[3],Le[1]/=Le[3],Le[2]/=Le[3],Le[3]=1;let Me=((Oe,Ke,We,Ue,at)=>({u_sun_pos:Oe,u_atmosphere_blend:Ke,u_globe_position:We,u_globe_radius:Ue,u_inv_proj_matrix:at}))(ce,ge,[Le[0],Le[1],Le[2]],pe,Ie),Re=wn(ee,U);te.draw(ee,Q.TRIANGLES,oe,At.disabled,tr.alphaBlended,jt.disabled,Me,null,null,"atmosphere",Re.vertexBuffer,Re.indexBuffer,Re.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){let L=function(U,V){let ee=null,Q=Object.values(U._layers).flatMap(ce=>ce.source&&!ce.isHidden(V)?[U.sourceCaches[ce.source]]:[]),te=Q.filter(ce=>ce.getSource().type==="vector"),oe=Q.filter(ce=>ce.getSource().type!=="vector"),he=ce=>{(!ee||ee.getSource().maxzoom<ce.getSource().maxzoom)&&(ee=ce)};return te.forEach(ce=>he(ce)),ee||oe.forEach(ce=>he(ce)),ee}(this.style,this.transform.zoom);L&&function(U,V,ee){for(let Q=0;Q<ee.length;Q++)Or(U,V,ee[Q])}(this,L,L.getVisibleCoordinates())}this.options.showPadding&&function(L){let U=L.transform.padding;nf(L,L.transform.height-(U.top||0),3,tf),nf(L,U.bottom||0,3,Hp),x_(L,U.left||0,3,y_),x_(L,L.transform.width-(U.right||0),3,__);let V=L.transform.centerPoint;(function(ee,Q,te,oe){mc(ee,Q-1,te-10,2,20,oe),mc(ee,Q-10,te-1,20,2,oe)})(L,V.x,L.transform.height-V.y,rf)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;let o=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix,d=this.terrainFacilitator.dirty;d||(d=r?!a.c0(o,f):!a.c1(o,f)),d||(d=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),d&&(a.c2(o,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(v,x){let S=v.context,E=S.gl,A=v.transform,R=tr.unblended,z=new Tt(E.LEQUAL,Tt.ReadWrite,[0,1]),L=x.sourceCache.getRenderableTiles(),U=v.useProgram("terrainDepth");S.bindFramebuffer.set(x.getFramebuffer("depth").framebuffer),S.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),S.clear({color:a.b7.transparent,depth:1});for(let V of L){let ee=x.getTerrainMesh(V.tileID),Q=x.getTerrainData(V.tileID),te=A.getProjectionData({overscaledTileID:V.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),oe={u_ele_delta:x.getMeshFrameDelta(A.zoom)};U.draw(S,E.TRIANGLES,z,At.disabled,R,jt.backCCW,oe,Q,te,"terrain",ee.vertexBuffer,ee.indexBuffer,ee.segments)}S.bindFramebuffer.set(null),S.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain),function(v,x){let S=v.context,E=S.gl,A=v.transform,R=tr.unblended,z=new Tt(E.LEQUAL,Tt.ReadWrite,[0,1]),L=x.getCoordsTexture(),U=x.sourceCache.getRenderableTiles(),V=v.useProgram("terrainCoords");S.bindFramebuffer.set(x.getFramebuffer("coords").framebuffer),S.viewport.set([0,0,v.width/devicePixelRatio,v.height/devicePixelRatio]),S.clear({color:a.b7.transparent,depth:1}),x.coordsIndex=[];for(let ee of U){let Q=x.getTerrainMesh(ee.tileID),te=x.getTerrainData(ee.tileID);S.activeTexture.set(E.TEXTURE0),E.bindTexture(E.TEXTURE_2D,L.texture);let oe={u_terrain_coords_id:(255-x.coordsIndex.length)/255,u_texture:0,u_ele_delta:x.getMeshFrameDelta(A.zoom)},he=A.getProjectionData({overscaledTileID:ee.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});V.draw(S,E.TRIANGLES,z,At.disabled,R,jt.backCCW,oe,te,he,"terrain",Q.vertexBuffer,Q.indexBuffer,Q.segments),x.coordsIndex.push(ee.tileID.key)}S.bindFramebuffer.set(null),S.viewport.set([0,0,v.width,v.height])}(this,this.style.map.terrain))}renderLayer(r,o,f,d,v){f.isHidden(this.transform.zoom)||(f.type==="background"||f.type==="custom"||(d||[]).length)&&(this.id=f.id,a.c3(f)?function(x,S,E,A,R,z){if(x.renderPass!=="translucent")return;let{isRenderingToTexture:L}=z,U=At.disabled,V=x.colorModeForRenderPass();(E._unevaluatedLayout.hasValue("text-variable-anchor")||E._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ee,Q,te,oe,he,ce,de,ge,pe){let Ie=Q.transform,Le=Q.style.map.terrain,Me=he==="map",Re=ce==="map";for(let Oe of ee){let Ke=oe.getTile(Oe),We=Ke.getBucket(te);if(!We||!We.text||!We.text.segments.get().length)continue;let Ue=a.ak(We.textSizeData,Ie.zoom),at=a.az(Ke,1,Q.transform.zoom),Ct=ht(Me,Q.transform,at),Ut=te.layout.get("icon-text-fit")!=="none"&&We.hasIconData();if(Ue){let gr=Math.pow(2,Ie.zoom-Ke.tileID.overscaledZ),ir=Le?(yr,_r)=>Le.getElevation(Oe,yr,_r):null;v_(We,Me,Re,pe,Ie,Ct,gr,Ue,Ut,a.aA(Ie,Ke,de,ge),Oe.toUnwrapped(),ir)}}}(A,x,E,S,E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),R),E.paint.get("icon-opacity").constantOr(1)!==0&&Xh(x,S,E,A,!1,E.paint.get("icon-translate"),E.paint.get("icon-translate-anchor"),E.layout.get("icon-rotation-alignment"),E.layout.get("icon-pitch-alignment"),E.layout.get("icon-keep-upright"),U,V,L),E.paint.get("text-opacity").constantOr(1)!==0&&Xh(x,S,E,A,!0,E.paint.get("text-translate"),E.paint.get("text-translate-anchor"),E.layout.get("text-rotation-alignment"),E.layout.get("text-pitch-alignment"),E.layout.get("text-keep-upright"),U,V,L),S.map.showCollisionBoxes&&($p(x,S,E,A,!0),$p(x,S,E,A,!1))}(r,o,f,d,this.style.placement.variableOffsets,v):a.c4(f)?function(x,S,E,A,R){if(x.renderPass!=="translucent")return;let{isRenderingToTexture:z}=R,L=E.paint.get("circle-opacity"),U=E.paint.get("circle-stroke-width"),V=E.paint.get("circle-stroke-opacity"),ee=!E.layout.get("circle-sort-key").isConstant();if(L.constantOr(1)===0&&(U.constantOr(1)===0||V.constantOr(1)===0))return;let Q=x.context,te=Q.gl,oe=x.transform,he=x.getDepthModeForSublayer(0,Tt.ReadOnly),ce=At.disabled,de=x.colorModeForRenderPass(),ge=[],pe=oe.getCircleRadiusCorrection();for(let Ie=0;Ie<A.length;Ie++){let Le=A[Ie],Me=S.getTile(Le),Re=Me.getBucket(E);if(!Re)continue;let Oe=E.paint.get("circle-translate"),Ke=E.paint.get("circle-translate-anchor"),We=a.aA(oe,Me,Oe,Ke),Ue=Re.programConfigurations.get(E.id),at=x.useProgram("circle",Ue),Ct=Re.layoutVertexBuffer,Ut=Re.indexBuffer,gr=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Le),ir={programConfiguration:Ue,program:at,layoutVertexBuffer:Ct,indexBuffer:Ut,uniformValues:oc(x,Me,E,We,pe),terrainData:gr,projectionData:oe.getProjectionData({overscaledTileID:Le,applyGlobeMatrix:!z,applyTerrainMatrix:!0})};if(ee){let yr=Re.segments.get();for(let _r of yr)ge.push({segments:new a.aJ([_r]),sortKey:_r.sortKey,state:ir})}else ge.push({segments:Re.segments,sortKey:0,state:ir})}ee&&ge.sort((Ie,Le)=>Ie.sortKey-Le.sortKey);for(let Ie of ge){let{programConfiguration:Le,program:Me,layoutVertexBuffer:Re,indexBuffer:Oe,uniformValues:Ke,terrainData:We,projectionData:Ue}=Ie.state;Me.draw(Q,te.TRIANGLES,he,ce,de,jt.backCCW,Ke,We,Ue,E.id,Re,Oe,Ie.segments,E.paint,x.transform.zoom,Le)}}(r,o,f,d,v):a.c5(f)?function(x,S,E,A,R){if(E.paint.get("heatmap-opacity")===0)return;let z=x.context,{isRenderingToTexture:L,isRenderingGlobe:U}=R;if(x.style.map.terrain){for(let V of A){let ee=S.getTile(V);S.hasRenderableParent(V)||(x.renderPass==="offscreen"?Jh(x,ee,E,V,U):x.renderPass==="translucent"&&Vp(x,E,V,L,U))}z.viewport.set([0,0,x.width,x.height])}else x.renderPass==="offscreen"?function(V,ee,Q,te){let oe=V.context,he=oe.gl,ce=V.transform,de=At.disabled,ge=new tr([he.ONE,he.ONE],a.b7.transparent,[!0,!0,!0,!0]);(function(pe,Ie,Le){let Me=pe.gl;pe.activeTexture.set(Me.TEXTURE1),pe.viewport.set([0,0,Ie.width/4,Ie.height/4]);let Re=Le.heatmapFbos.get(a.bW);Re?(Me.bindTexture(Me.TEXTURE_2D,Re.colorAttachment.get()),pe.bindFramebuffer.set(Re.framebuffer)):(Re=Qh(pe,Ie.width/4,Ie.height/4),Le.heatmapFbos.set(a.bW,Re))})(oe,V,Q),oe.clear({color:a.b7.transparent});for(let pe=0;pe<te.length;pe++){let Ie=te[pe];if(ee.hasRenderableParent(Ie))continue;let Le=ee.getTile(Ie),Me=Le.getBucket(Q);if(!Me)continue;let Re=Me.programConfigurations.get(Q.id),Oe=V.useProgram("heatmap",Re),Ke=ce.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),We=ce.getCircleRadiusCorrection();Oe.draw(oe,he.TRIANGLES,Tt.disabled,de,ge,jt.backCCW,Ss(Le,ce.zoom,Q.paint.get("heatmap-intensity"),We),null,Ke,Q.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,Q.paint,ce.zoom,Re)}oe.viewport.set([0,0,V.width,V.height])}(x,S,E,A):x.renderPass==="translucent"&&function(V,ee){let Q=V.context,te=Q.gl;Q.setColorMode(V.colorModeForRenderPass());let oe=ee.heatmapFbos.get(a.bW);oe&&(Q.activeTexture.set(te.TEXTURE0),te.bindTexture(te.TEXTURE_2D,oe.colorAttachment.get()),Q.activeTexture.set(te.TEXTURE1),Gp(Q,ee).bind(te.LINEAR,te.CLAMP_TO_EDGE),V.useProgram("heatmapTexture").draw(Q,te.TRIANGLES,Tt.disabled,At.disabled,V.colorModeForRenderPass(),jt.disabled,Jy(V,ee,0,1),null,null,ee.id,V.viewportBuffer,V.quadTriangleIndexBuffer,V.viewportSegments,ee.paint,V.transform.zoom))}(x,E)}(r,o,f,d,v):a.c6(f)?function(x,S,E,A,R){if(x.renderPass!=="translucent")return;let{isRenderingToTexture:z}=R,L=E.paint.get("line-opacity"),U=E.paint.get("line-width");if(L.constantOr(1)===0||U.constantOr(1)===0)return;let V=x.getDepthModeForSublayer(0,Tt.ReadOnly),ee=x.colorModeForRenderPass(),Q=E.paint.get("line-dasharray"),te=E.paint.get("line-pattern"),oe=te.constantOr(1),he=E.paint.get("line-gradient"),ce=E.getCrossfadeParameters(),de=oe?"linePattern":Q?"lineSDF":he?"lineGradient":"line",ge=x.context,pe=ge.gl,Ie=x.transform,Le=!0;for(let Me of A){let Re=S.getTile(Me);if(oe&&!Re.patternsLoaded())continue;let Oe=Re.getBucket(E);if(!Oe)continue;let Ke=Oe.programConfigurations.get(E.id),We=x.context.program.get(),Ue=x.useProgram(de,Ke),at=Le||Ue.program!==We,Ct=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Me),Ut=te.constantOr(null);if(Ut&&Re.imageAtlas){let or=Re.imageAtlas,Ht=or.patternPositions[Ut.to.toString()],ei=or.patternPositions[Ut.from.toString()];Ht&&ei&&Ke.setConstantPatternPositions(Ht,ei)}let gr=Ie.getProjectionData({overscaledTileID:Me,applyGlobeMatrix:!z,applyTerrainMatrix:!0}),ir=Ie.getPixelScale(),yr=oe?r_(x,Re,E,ir,ce):Q?i_(x,Re,E,ir,Q,ce):he?t_(x,Re,E,ir,Oe.lineClipsArray.length):sc(x,Re,E,ir);if(oe)ge.activeTexture.set(pe.TEXTURE0),Re.imageAtlasTexture.bind(pe.LINEAR,pe.CLAMP_TO_EDGE),Ke.updatePaintBuffers(ce);else if(Q&&(at||x.lineAtlas.dirty))ge.activeTexture.set(pe.TEXTURE0),x.lineAtlas.bind(ge);else if(he){let or=Oe.gradients[E.id],Ht=or.texture;if(E.gradientVersion!==or.version){let ei=256;if(E.stepInterpolant){let si=S.getSource().maxzoom,yi=Me.canonical.z===si?Math.ceil(1<<x.transform.maxZoom-Me.canonical.z):1;ei=a.ae(a.bX(Oe.maxLineLength/a.Z*1024*yi),256,ge.maxTextureSize)}or.gradient=a.bY({expression:E.gradientExpression(),evaluationKey:"lineProgress",resolution:ei,image:or.gradient||void 0,clips:Oe.lineClipsArray}),or.texture?or.texture.update(or.gradient):or.texture=new Ve(ge,or.gradient,pe.RGBA),or.version=E.gradientVersion,Ht=or.texture}ge.activeTexture.set(pe.TEXTURE0),Ht.bind(E.stepInterpolant?pe.NEAREST:pe.LINEAR,pe.CLAMP_TO_EDGE)}let _r=x.stencilModeForClipping(Me);Ue.draw(ge,pe.TRIANGLES,V,_r,ee,jt.disabled,yr,Ct,gr,E.id,Oe.layoutVertexBuffer,Oe.indexBuffer,Oe.segments,E.paint,x.transform.zoom,Ke,Oe.layoutVertexBuffer2),Le=!1}}(r,o,f,d,v):a.c7(f)?function(x,S,E,A,R){let z=E.paint.get("fill-color"),L=E.paint.get("fill-opacity");if(L.constantOr(1)===0)return;let{isRenderingToTexture:U}=R,V=x.colorModeForRenderPass(),ee=E.paint.get("fill-pattern"),Q=x.opaquePassEnabledForLayer()&&!ee.constantOr(1)&&z.constantOr(a.b7.transparent).a===1&&L.constantOr(0)===1?"opaque":"translucent";if(x.renderPass===Q){let te=x.getDepthModeForSublayer(1,x.renderPass==="opaque"?Tt.ReadWrite:Tt.ReadOnly);fc(x,S,E,A,te,V,!1,U)}if(x.renderPass==="translucent"&&E.paint.get("fill-antialias")){let te=x.getDepthModeForSublayer(E.getPaintProperty("fill-outline-color")?2:0,Tt.ReadOnly);fc(x,S,E,A,te,V,!0,U)}}(r,o,f,d,v):a.c8(f)?function(x,S,E,A,R){let z=E.paint.get("fill-extrusion-opacity");if(z===0)return;let{isRenderingToTexture:L}=R;if(x.renderPass==="translucent"){let U=new Tt(x.context.gl.LEQUAL,Tt.ReadWrite,x.depthRangeFor3D);if(z!==1||E.paint.get("fill-extrusion-pattern").constantOr(1))dc(x,S,E,A,U,At.disabled,tr.disabled,L),dc(x,S,E,A,U,x.stencilModeFor3D(),x.colorModeForRenderPass(),L);else{let V=x.colorModeForRenderPass();dc(x,S,E,A,U,At.disabled,V,L)}}}(r,o,f,d,v):a.c9(f)?function(x,S,E,A,R){if(x.renderPass!=="offscreen"&&x.renderPass!=="translucent")return;let{isRenderingToTexture:z}=R,L=x.context,U=x.style.projection.useSubdivision,V=x.getDepthModeForSublayer(0,Tt.ReadOnly),ee=x.colorModeForRenderPass();if(x.renderPass==="offscreen")(function(Q,te,oe,he,ce,de,ge){let pe=Q.context,Ie=pe.gl;for(let Le of oe){let Me=te.getTile(Le),Re=Me.dem;if(!Re||!Re.data||!Me.needsHillshadePrepare)continue;let Oe=Re.dim,Ke=Re.stride,We=Re.getPixels();if(pe.activeTexture.set(Ie.TEXTURE1),pe.pixelStoreUnpackPremultiplyAlpha.set(!1),Me.demTexture=Me.demTexture||Q.getTileTexture(Ke),Me.demTexture){let at=Me.demTexture;at.update(We,{premultiply:!1}),at.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE)}else Me.demTexture=new Ve(pe,We,Ie.RGBA,{premultiply:!1}),Me.demTexture.bind(Ie.NEAREST,Ie.CLAMP_TO_EDGE);pe.activeTexture.set(Ie.TEXTURE0);let Ue=Me.fbo;if(!Ue){let at=new Ve(pe,{width:Oe,height:Oe,data:null},Ie.RGBA);at.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),Ue=Me.fbo=pe.createFramebuffer(Oe,Oe,!0,!1),Ue.colorAttachment.set(at.texture)}pe.bindFramebuffer.set(Ue.framebuffer),pe.viewport.set([0,0,Oe,Oe]),Q.useProgram("hillshadePrepare").draw(pe,Ie.TRIANGLES,ce,de,ge,jt.disabled,mS(Me.tileID,Re),null,null,he.id,Q.rasterBoundsBuffer,Q.quadTriangleIndexBuffer,Q.rasterBoundsSegments),Me.needsHillshadePrepare=!1}})(x,S,A,E,V,At.disabled,ee),L.viewport.set([0,0,x.width,x.height]);else if(x.renderPass==="translucent")if(U){let[Q,te,oe]=x.stencilConfigForOverlapTwoPass(A);Zp(x,S,E,oe,Q,V,ee,!1,z),Zp(x,S,E,oe,te,V,ee,!0,z)}else{let[Q,te]=x.getStencilConfigForOverlapAndUpdateStencilID(A);Zp(x,S,E,te,Q,V,ee,!1,z)}}(r,o,f,d,v):a.ca(f)?function(x,S,E,A,R){if(x.renderPass!=="translucent"||E.paint.get("raster-opacity")===0||!A.length)return;let{isRenderingToTexture:z}=R,L=S.getSource(),U=x.style.projection.useSubdivision;if(L instanceof _n)ef(x,S,E,A,null,!1,!1,L.tileCoords,L.flippedWindingOrder,z);else if(U){let[V,ee,Q]=x.stencilConfigForOverlapTwoPass(A);ef(x,S,E,Q,V,!1,!0,pc,!1,z),ef(x,S,E,Q,ee,!0,!0,pc,!1,z)}else{let[V,ee]=x.getStencilConfigForOverlapAndUpdateStencilID(A);ef(x,S,E,ee,V,!1,!0,pc,!1,z)}}(r,o,f,d,v):a.cb(f)?function(x,S,E,A,R){let z=E.paint.get("background-color"),L=E.paint.get("background-opacity");if(L===0)return;let{isRenderingToTexture:U}=R,V=x.context,ee=V.gl,Q=x.style.projection,te=x.transform,oe=te.tileSize,he=E.paint.get("background-pattern");if(x.isPatternMissing(he))return;let ce=!he&&z.a===1&&L===1&&x.opaquePassEnabledForLayer()?"opaque":"translucent";if(x.renderPass!==ce)return;let de=At.disabled,ge=x.getDepthModeForSublayer(0,ce==="opaque"?Tt.ReadWrite:Tt.ReadOnly),pe=x.colorModeForRenderPass(),Ie=x.useProgram(he?"backgroundPattern":"background"),Le=A||ye(te,{tileSize:oe,terrain:x.style.map.terrain});he&&(V.activeTexture.set(ee.TEXTURE0),x.imageManager.bind(x.context));let Me=E.getCrossfadeParameters();for(let Re of Le){let Oe=te.getProjectionData({overscaledTileID:Re,applyGlobeMatrix:!U,applyTerrainMatrix:!0}),Ke=he?gS(L,x,he,{tileID:Re,tileSize:oe},Me):vS(L,z),We=x.style.map.terrain&&x.style.map.terrain.getTerrainData(Re),Ue=Q.getMeshFromTileID(V,Re.canonical,!1,!0,"raster");Ie.draw(V,ee.TRIANGLES,ge,de,pe,jt.backCCW,Ke,We,Oe,E.id,Ue.vertexBuffer,Ue.indexBuffer,Ue.segments)}}(r,0,f,d,v):a.cc(f)&&function(x,S,E,A){let{isRenderingGlobe:R}=A,z=x.context,L=E.implementation,U=x.style.projection,V=x.transform,ee=V.getProjectionDataForCustomLayer(R),Q={farZ:V.farZ,nearZ:V.nearZ,fov:V.fov*Math.PI/180,modelViewProjectionMatrix:V.modelViewProjectionMatrix,projectionMatrix:V.projectionMatrix,shaderData:{variantName:U.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${U.shaderPreludeCode.vertexSource}`,define:U.shaderDefine},defaultProjectionData:ee},te=L.renderingMode?L.renderingMode:"2d";if(x.renderPass==="offscreen"){let oe=L.prerender;oe&&(x.setCustomLayerDefaults(),z.setColorMode(x.colorModeForRenderPass()),oe.call(L,z.gl,Q),z.setDirty(),x.setBaseState())}else if(x.renderPass==="translucent"){x.setCustomLayerDefaults(),z.setColorMode(x.colorModeForRenderPass()),z.setStencilMode(At.disabled);let oe=te==="3d"?x.getDepthModeFor3D():x.getDepthModeForSublayer(0,Tt.ReadOnly);z.setDepthMode(oe),L.render(z.gl,Q),z.setDirty(),x.setBaseState(),z.bindFramebuffer.set(null)}}(r,0,f,v))}saveTileTexture(r){let o=this._tileTextures[r.size[0]];o?o.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let o=this._tileTextures[r];return o&&o.length>0?o.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;let o=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!o||!f}useProgram(r,o,f=!1,d=[]){this.cache=this.cache||{};let v=!!this.style.map.terrain,x=this.style.projection,S=f?Bi.projectionMercator:x.shaderPreludeCode,E=f?ys:x.shaderDefine,A=r+(o?o.cacheKey:"")+`/${f?Nt:x.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(v?"/terrain":"")+(d?`/${d.join("/")}`:"");return this.cache[A]||(this.cache[A]=new Dh(this.context,Bi[r],o,s_[r],this._showOverdrawInspector,v,S,E,d)),this.cache[A]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Ve(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:r,drawingBufferHeight:o}=this.context.gl;return this.width!==r||this.height!==o}}function vc(m,r){let o,f=!1,d=null,v=null,x=()=>{d=null,f&&(m.apply(v,o),d=setTimeout(x,r),f=!1)};return(...S)=>(f=!0,v=this,o=S,d||x(),d)}class Kp{constructor(r){this._getCurrentHash=()=>{let o=window.location.hash.replace("#","");if(this._hashName){let f;return o.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(f=d)}),(f&&f[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{let o=this._getCurrentHash();if(!this._isValidHash(o))return!1;let f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:f,pitch:+(o[4]||0)}),!0},this._updateHashUnthrottled=()=>{let o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{let o=this._getCurrentHash();if(o.length===0)return;let f=o.join("/"),d=f;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${f}`);let v=window.location.hash.replace(d,"");v.startsWith("#&")?v=v.slice(0,1)+v.slice(2):v==="#"&&(v="");let x=window.location.href.replace(/(#.+)?$/,v);x=x.replace("&&","&"),window.history.replaceState(window.history.state,null,x)},this._updateHash=vc(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){let o=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,d=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),v=Math.pow(10,d),x=Math.round(o.lng*v)/v,S=Math.round(o.lat*v)/v,E=this._map.getBearing(),A=this._map.getPitch(),R="";if(R+=r?`/${x}/${S}/${f}`:`${f}/${S}/${x}`,(E||A)&&(R+="/"+Math.round(10*E)/10),A&&(R+=`/${Math.round(A)}`),this._hashName){let z=this._hashName,L=!1,U=window.location.hash.slice(1).split("&").map(V=>{let ee=V.split("=")[0];return ee===z?(L=!0,`${ee}=${R}`):V}).filter(V=>V);return L||U.push(`${z}=${R}`),`#${U.join("&")}`}return`#${R}`}_isValidHash(r){if(r.length<3||r.some(isNaN))return!1;try{new a.Q(+r[2],+r[1])}catch(v){return!1}let o=+r[0],f=+(r[3]||0),d=+(r[4]||0);return o>=this._map.getMinZoom()&&o<=this._map.getMaxZoom()&&f>=-180&&f<=180&&d>=this._map.getMinPitch()&&d<=this._map.getMaxPitch()}}let Ia={linearity:.3,easing:a.cd(0,0,.3,1)},Yp=a.e({deceleration:2500,maxSpeed:1400},Ia),gc=a.e({deceleration:20,maxSpeed:1400},Ia),Xp=a.e({deceleration:1e3,maxSpeed:360},Ia),b_=a.e({deceleration:1e3,maxSpeed:90},Ia),w_=a.e({deceleration:1e3,maxSpeed:360},Ia);class S_{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:O.now(),settings:r})}_drainInertiaBuffer(){let r=this._inertiaBuffer,o=O.now();for(;r.length>0&&o-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let o={zoom:0,bearing:0,pitch:0,roll:0,pan:new a.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:v}of this._inertiaBuffer)o.zoom+=v.zoomDelta||0,o.bearing+=v.bearingDelta||0,o.pitch+=v.pitchDelta||0,o.roll+=v.rollDelta||0,v.panDelta&&o.pan._add(v.panDelta),v.around&&(o.around=v.around),v.pinchAround&&(o.pinchAround=v.pinchAround);let f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(o.pan.mag()){let v=Tl(o.pan.mag(),f,a.e({},Yp,r||{})),x=o.pan.mult(v.amount/o.pan.mag()),S=this._map.cameraHelper.handlePanInertia(x,this._map.transform);d.center=S.easingCenter,d.offset=S.easingOffset,Sl(d,v)}if(o.zoom){let v=Tl(o.zoom,f,gc);d.zoom=this._map.transform.zoom+v.amount,Sl(d,v)}if(o.bearing){let v=Tl(o.bearing,f,Xp);d.bearing=this._map.transform.bearing+a.ae(v.amount,-179,179),Sl(d,v)}if(o.pitch){let v=Tl(o.pitch,f,b_);d.pitch=this._map.transform.pitch+v.amount,Sl(d,v)}if(o.roll){let v=Tl(o.roll,f,w_);d.roll=this._map.transform.roll+a.ae(v.amount,-179,179),Sl(d,v)}if(d.zoom||d.bearing){let v=o.pinchAround===void 0?o.around:o.pinchAround;d.around=v?this._map.unproject(v):this._map.getCenter()}return this.clear(),a.e(d,{noMoveStart:!0})}}function Sl(m,r){(!m.duration||m.duration<r.duration)&&(m.duration=r.duration,m.easing=r.easing)}function Tl(m,r,o){let{maxSpeed:f,linearity:d,deceleration:v}=o,x=a.ae(m*d/(r/1e3),-f,f),S=Math.abs(x)/(v*d);return{easing:o.easing,duration:1e3*S,amount:x*(S/2)}}class Qr extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,f,d={}){f=f instanceof MouseEvent?f:new MouseEvent(r,f);let v=k.mousePos(o.getCanvas(),f),x=o.unproject(v);super(r,a.e({point:v,lngLat:x,originalEvent:f},d)),this._defaultPrevented=!1,this.target=o}}class Il extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,f){let d=r==="touchend"?f.changedTouches:f.touches,v=k.touchPos(o.getCanvasContainer(),d),x=v.map(E=>o.unproject(E)),S=v.reduce((E,A,R,z)=>E.add(A.div(z.length)),new a.P(0,0));super(r,{points:v,point:S,lngLats:x,lngLat:o.unproject(S),originalEvent:f}),this._defaultPrevented=!1}}class Jp extends a.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,o,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class T_{constructor(r,o){this._map=r,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new Jp(r.type,this._map,r))}mousedown(r,o){return this._mousedownPos=o,this._firePreventable(new Qr(r.type,this._map,r))}mouseup(r){this._map.fire(new Qr(r.type,this._map,r))}click(r,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Qr(r.type,this._map,r))}dblclick(r){return this._firePreventable(new Qr(r.type,this._map,r))}mouseover(r){this._map.fire(new Qr(r.type,this._map,r))}mouseout(r){this._map.fire(new Qr(r.type,this._map,r))}touchstart(r){return this._firePreventable(new Il(r.type,this._map,r))}touchmove(r){this._map.fire(new Il(r.type,this._map,r))}touchend(r){this._map.fire(new Il(r.type,this._map,r))}touchcancel(r){this._map.fire(new Il(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class I_{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new Qr(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new Qr(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class El{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.screenPointToLocation(a.P.convert(r),this._map.terrain)}}class Qp{constructor(r,o){this._map=r,this._tr=new El(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,o){this.isEnabled()&&r.shiftKey&&r.button===0&&(k.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(r,o){if(!this._active)return;let f=o;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;let d=this._startPos;this._lastPos=f,this._box||(this._box=k.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));let v=Math.min(d.x,f.x),x=Math.max(d.x,f.x),S=Math.min(d.y,f.y),E=Math.max(d.y,f.y);k.setTransform(this._box,`translate(${v}px,${S}px)`),this._box.style.width=x-v+"px",this._box.style.height=E-S+"px"}mouseupWindow(r,o){if(!this._active||r.button!==0)return;let f=this._startPos,d=o;if(this.reset(),k.suppressClick(),f.x!==d.x||f.y!==d.y)return this._map.fire(new a.l("boxzoomend",{originalEvent:r})),{cameraAnimation:v=>v.fitScreenCoordinates(f,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(k.remove(this._box),this._box=null),k.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,o){return this._map.fire(new a.l(r,{originalEvent:o}))}}function af(m,r){if(m.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${m.length}, points ${r.length}`);let o={};for(let f=0;f<m.length;f++)o[m[f].identifier]=r[f];return o}class E_{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,o,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(d){let v=new a.P(0,0);for(let x of d)v._add(x);return v.div(d.length)}(o),this.touches=af(f,o)))}touchmove(r,o,f){if(this.aborted||!this.centroid)return;let d=af(f,o);for(let v in this.touches){let x=d[v];(!x||x.dist(this.touches[v])>30)&&(this.aborted=!0)}}touchend(r,o,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){let d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class ql{constructor(r){this.singleTap=new E_(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,o,f){this.singleTap.touchstart(r,o,f)}touchmove(r,o,f){this.singleTap.touchmove(r,o,f)}touchend(r,o,f){let d=this.singleTap.touchend(r,o,f);if(d){let v=r.timeStamp-this.lastTime<500,x=!this.lastTap||this.lastTap.dist(d)<30;if(v&&x||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class q_{constructor(r){this._tr=new El(r),this._zoomIn=new ql({numTouches:1,numTaps:2}),this._zoomOut=new ql({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,o,f){this._zoomIn.touchstart(r,o,f),this._zoomOut.touchstart(r,o,f)}touchmove(r,o,f){this._zoomIn.touchmove(r,o,f),this._zoomOut.touchmove(r,o,f)}touchend(r,o,f){let d=this._zoomIn.touchend(r,o,f),v=this._zoomOut.touchend(r,o,f),x=this._tr;return d?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:x.zoom+1,around:x.unproject(d)},{originalEvent:r})}):v?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:S=>S.easeTo({duration:300,zoom:x.zoom-1,around:x.unproject(v)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ci{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){let o=this._moveFunction(...r);if(o.bearingDelta||o.pitchDelta||o.rollDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(r,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=Array.isArray(o)?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,o){if(!this.isEnabled())return;let f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);let d=Array.isArray(o)?o[0]:o;return!this._moved&&d.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(f,d))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&k.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let aa={0:1,2:2};class Pl{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){let o=k.mouseButton(r);this._eventButton=o}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(o,f){let d=aa[f];return o.buttons===void 0||(o.buttons&d)!==d}(r,this._eventButton)}isValidEndEvent(r){return k.mouseButton(r)===this._eventButton}}class oa{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}class Al{constructor(r=new Pl({checkCorrectEvent:()=>!0}),o=new oa){this.mouseMoveStateManager=r,this.oneFingerTouchMoveStateManager=o}_executeRelevantHandler(r,o,f){return r instanceof MouseEvent?o(r):typeof TouchEvent!="undefined"&&r instanceof TouchEvent?f(r):void 0}startMove(r){this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.startMove(o),o=>this.oneFingerTouchMoveStateManager.startMove(o))}endMove(r){this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.endMove(o),o=>this.oneFingerTouchMoveStateManager.endMove(o))}isValidStartEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidStartEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidStartEvent(o))}isValidMoveEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidMoveEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(o))}isValidEndEvent(r){return this._executeRelevantHandler(r,o=>this.mouseMoveStateManager.isValidEndEvent(o),o=>this.oneFingerTouchMoveStateManager.isValidEndEvent(o))}}let of=m=>{m.mousedown=m.dragStart,m.mousemoveWindow=m.dragMove,m.mouseup=m.dragEnd,m.contextmenu=r=>{r.preventDefault()}};class ES{constructor(r,o){this._clickTolerance=r.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new a.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,o,f){return this._calculateTransform(r,o,f)}touchmove(r,o,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,o,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,o,f){this._calculateTransform(r,o,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,o,f){f.length>0&&(this._active=!0);let d=af(f,o),v=new a.P(0,0),x=new a.P(0,0),S=0;for(let A in d){let R=d[A],z=this._touches[A];z&&(v._add(R),x._add(R.sub(z)),S++,d[A]=R)}if(this._touches=d,this._shouldBePrevented(S)||!x.mag())return;let E=x.div(S);return this._sum._add(E),this._sum.mag()<this._clickTolerance?void 0:{around:v.div(S),panDelta:E}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class em{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,o,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([o[0],o[1]]))}touchmove(r,o,f){if(!this._firstTwoTouches)return;r.preventDefault();let[d,v]=this._firstTwoTouches,x=sf(f,o,d),S=sf(f,o,v);if(!x||!S)return;let E=this._aroundCenter?null:x.add(S).div(2);return this._move([x,S],E,r)}touchend(r,o,f){if(!this._firstTwoTouches)return;let[d,v]=this._firstTwoTouches,x=sf(f,o,d),S=sf(f,o,v);x&&S||(this._active&&k.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function sf(m,r,o){for(let f=0;f<m.length;f++)if(m[f].identifier===o)return r[f]}function tm(m,r){return Math.log(m/r)/Math.LN2}class Cl extends em{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,o){let f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(tm(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:tm(this._distance,f),pinchAround:o}}}function Ea(m,r){return 180*m.angleWith(r)/Math.PI}class rt extends em{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,o,f){let d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ea(this._vector,d),pinchAround:o}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let o=25/(Math.PI*this._minDiameter)*360,f=Ea(r,this._startVector);return Math.abs(f)<o}}function lf(m){return Math.abs(m.y)>Math.abs(m.x)}class uf extends em{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,o,f){super.touchstart(r,o,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,lf(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,o,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let d=r[0].sub(this._lastPoints[0]),v=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,v,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(d.y+v.y)/2*-.5}):void 0}gestureBeginsVertically(r,o,f){if(this._valid!==void 0)return this._valid;let d=r.mag()>=2,v=o.mag()>=2;if(!d&&!v)return;if(!d||!v)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;let x=r.y>0==o.y>0;return lf(r)&&lf(o)&&x}}let P_={panStep:100,bearingStep:15,pitchStep:10};class Ml{constructor(r){this._tr=new El(r);let o=P_;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let o=0,f=0,d=0,v=0,x=0;switch(r.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),v=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),v=1);break;case 38:r.shiftKey?d=1:(r.preventDefault(),x=-1);break;case 40:r.shiftKey?d=-1:(r.preventDefault(),x=1);break;default:return}return this._rotationDisabled&&(f=0,d=0),{cameraAnimation:S=>{let E=this._tr;S.easeTo({duration:300,easeId:"keyboardHandler",easing:yc,zoom:o?Math.round(E.zoom)+o*(r.shiftKey?2:1):E.zoom,bearing:E.bearing+f*this._bearingStep,pitch:E.pitch+d*this._pitchStep,offset:[-v*this._panStep,-x*this._panStep],center:E.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function yc(m){return m*(2-m)}let rm=4.000244140625;class Lt{constructor(r,o){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new El(r),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let o=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,f=O.now(),d=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,o!==0&&o%rm==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(d*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),r.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=r,this._delta-=o,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let o=k.mousePos(this._map.getCanvas(),r),f=this._tr;this._aroundPoint=this._aroundCenter?f.transform.locationToScreenPoint(a.Q.convert(f.center)):o,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){let S=r.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=S),typeof this._targetZoom=="number"&&(this._targetZoom+=S)}if(this._delta!==0){let S=this._type==="wheel"&&Math.abs(this._delta)>rm?this._wheelZoomRate:this._defaultZoomRate,E=2/(1+Math.exp(-Math.abs(this._delta*S)));this._delta<0&&E!==0&&(E=1/E);let A=typeof this._targetZoom!="number"?r.scale:a.ac(this._targetZoom);this._targetZoom=r.getConstrained(r.getCameraLngLat(),a.ah(A*E)).zoom,this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let o=typeof this._targetZoom!="number"?r.zoom:this._targetZoom,f=this._startZoom,d=this._easing,v,x=!1;if(this._type==="wheel"&&f&&d){let S=O.now()-this._lastWheelEventTime,E=Math.min((S+5)/200,1),A=d(E);v=a.B.number(f,o,A),E<1?this._frameId||(this._frameId=!0):x=!0}else v=o,x=!0;return this._active=!0,x&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=v,{noInertia:!0,needsRenderFrame:!x,zoomDelta:v-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let o=a.cf;if(this._prevEase){let f=this._prevEase,d=(O.now()-f.start)/f.duration,v=f.easing(d+.01)-f.easing(d),x=.27/Math.sqrt(v*v+1e-4)*.01,S=Math.sqrt(.0729-x*x);o=a.cd(x,S,.25,1)}return this._prevEase={start:O.now(),duration:r,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class cf{constructor(r,o){this._clickZoom=r,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class qS{constructor(r){this._tr=new El(r),this.reset()}reset(){this._active=!1}dblclick(r,o){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class im{constructor(){this._tap=new ql({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,o,f){if(!this._swipePoint)if(this._tapTime){let d=o[0],v=r.timeStamp-this._tapTime<500,x=this._tapPoint.dist(d)<30;v&&x?f.length>0&&(this._swipePoint=d,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,o,f)}touchmove(r,o,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;let d=o[0],v=d.y-this._swipePoint.y;return this._swipePoint=d,r.preventDefault(),this._active=!0,{zoomDelta:v/128}}}else this._tap.touchmove(r,o,f)}touchend(r,o,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{let d=this._tap.touchend(r,o,f);d&&(this._tapTime=r.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class A_{constructor(r,o,f){this._el=r,this._mousePan=o,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class C_{constructor(r,o,f,d){this._pitchWithRotate=r.pitchWithRotate,this._rollEnabled=r.rollEnabled,this._mouseRotate=o,this._mousePitch=f,this._mouseRoll=d}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class nm{constructor(r,o,f,d){this._el=r,this._touchZoom=o,this._touchRotate=f,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class hf{constructor(r,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=k.create("div","maplibregl-cooperative-gesture-screen",r);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=o,this._container.appendChild(d);let v=document.createElement("div");v.className="maplibregl-mobile-message",v.textContent=f,this._container.appendChild(v),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(k.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,o){this._enabled&&(this._map.fire(new a.l("cooperativegestureprevented",{gestureType:r,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let _c=m=>m.zoom||m.drag||m.roll||m.pitch||m.rotate;class PS extends a.l{}function ff(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta||m.rollDelta}class AS{constructor(r,o){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,v)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let x=d.type==="renderFrame"?void 0:d,S={needsRenderFrame:!1},E={},A={};for(let{handlerName:L,handler:U,allowed:V}of this._handlers){if(!U.isEnabled())continue;let ee;if(this._blockedByActive(A,V,L))U.reset();else if(U[v||d.type]){if(a.cg(d,v||d.type)){let Q=k.mousePos(this._map.getCanvas(),d);ee=U[v||d.type](d,Q)}else if(a.ch(d,v||d.type)){let Q=this._getMapTouches(d.touches),te=k.touchPos(this._map.getCanvas(),Q);ee=U[v||d.type](d,te,Q)}else a.ci(v||d.type)||(ee=U[v||d.type](d));this.mergeHandlerResult(S,E,ee,L,x),ee&&ee.needsRenderFrame&&this._triggerRenderFrame()}(ee||U.isActive())&&(A[L]=U)}let R={};for(let L in this._previousActiveHandlers)A[L]||(R[L]=x);this._previousActiveHandlers=A,(Object.keys(R).length||ff(S))&&(this._changes.push([S,E,R]),this._triggerRenderFrame()),(Object.keys(A).length||ff(S))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:z}=S;z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],z(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new S_(r),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);let f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(let[d,v,x]of this._listeners)k.addEventListener(d,v,d===document?this.handleWindowEvent:this.handleEvent,x)}destroy(){for(let[r,o,f]of this._listeners)k.removeEventListener(r,o,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){let o=this._map,f=o.getCanvasContainer();this._add("mapEvent",new T_(o,r));let d=o.boxZoom=new Qp(o,r);this._add("boxZoom",d),r.interactive&&r.boxZoom&&d.enable();let v=o.cooperativeGestures=new hf(o,r.cooperativeGestures);this._add("cooperativeGestures",v),r.cooperativeGestures&&v.enable();let x=new q_(o),S=new qS(o);o.doubleClickZoom=new cf(S,x),this._add("tapZoom",x),this._add("clickZoom",S),r.interactive&&r.doubleClickZoom&&o.doubleClickZoom.enable();let E=new im;this._add("tapDragZoom",E);let A=o.touchPitch=new uf(o);this._add("touchPitch",A),r.interactive&&r.touchPitch&&o.touchPitch.enable(r.touchPitch);let R=()=>o.project(o.getCenter()),z=function({enable:ce,clickTolerance:de,aroundCenter:ge=!0,minPixelCenterThreshold:pe=100,rotateDegreesPerPixelMoved:Ie=.8},Le){let Me=new Pl({checkCorrectEvent:Re=>k.mouseButton(Re)===0&&Re.ctrlKey||k.mouseButton(Re)===2&&!Re.ctrlKey});return new Ci({clickTolerance:de,move:(Re,Oe)=>{let Ke=Le();if(ge&&Math.abs(Ke.y-Re.y)>pe)return{bearingDelta:a.ce(new a.P(Re.x,Oe.y),Oe,Ke)};let We=(Oe.x-Re.x)*Ie;return ge&&Oe.y<Ke.y&&(We=-We),{bearingDelta:We}},moveStateManager:Me,enable:ce,assignEvents:of})}(r,R),L=function({enable:ce,clickTolerance:de,pitchDegreesPerPixelMoved:ge=-.5}){let pe=new Pl({checkCorrectEvent:Ie=>k.mouseButton(Ie)===0&&Ie.ctrlKey||k.mouseButton(Ie)===2});return new Ci({clickTolerance:de,move:(Ie,Le)=>({pitchDelta:(Le.y-Ie.y)*ge}),moveStateManager:pe,enable:ce,assignEvents:of})}(r),U=function({enable:ce,clickTolerance:de,rollDegreesPerPixelMoved:ge=.3},pe){let Ie=new Pl({checkCorrectEvent:Le=>k.mouseButton(Le)===2&&Le.ctrlKey});return new Ci({clickTolerance:de,move:(Le,Me)=>{let Re=pe(),Oe=(Me.x-Le.x)*ge;return Me.y<Re.y&&(Oe=-Oe),{rollDelta:Oe}},moveStateManager:Ie,enable:ce,assignEvents:of})}(r,R);o.dragRotate=new C_(r,z,L,U),this._add("mouseRotate",z,["mousePitch"]),this._add("mousePitch",L,["mouseRotate","mouseRoll"]),this._add("mouseRoll",U,["mousePitch"]),r.interactive&&r.dragRotate&&o.dragRotate.enable();let V=function({enable:ce,clickTolerance:de}){let ge=new Pl({checkCorrectEvent:pe=>k.mouseButton(pe)===0&&!pe.ctrlKey});return new Ci({clickTolerance:de,move:(pe,Ie)=>({around:Ie,panDelta:Ie.sub(pe)}),activateOnStart:!0,moveStateManager:ge,enable:ce,assignEvents:of})}(r),ee=new ES(r,o);o.dragPan=new A_(f,V,ee),this._add("mousePan",V),this._add("touchPan",ee,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&o.dragPan.enable(r.dragPan);let Q=new rt,te=new Cl;o.touchZoomRotate=new nm(f,te,Q,E),this._add("touchRotate",Q,["touchPan","touchZoom"]),this._add("touchZoom",te,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&o.touchZoomRotate.enable(r.touchZoomRotate);let oe=o.scrollZoom=new Lt(o,()=>this._triggerRenderFrame());this._add("scrollZoom",oe,["mousePan"]),r.interactive&&r.scrollZoom&&o.scrollZoom.enable(r.scrollZoom);let he=o.keyboard=new Ml(o);this._add("keyboard",he),r.interactive&&r.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new I_(o))}_add(r,o,f){this._handlers.push({handlerName:r,handler:o,allowed:f}),this._handlersById[r]=o}stop(r){if(!this._updatingCamera){for(let{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!_c(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,o,f){for(let d in r)if(d!==f&&(!o||o.indexOf(d)<0))return!0;return!1}_getMapTouches(r){let o=[];for(let f of r)this._el.contains(f.target)&&o.push(f);return o}mergeHandlerResult(r,o,f,d,v){if(!f)return;a.e(r,f);let x={handlerName:d,originalEvent:f.originalEvent||v};f.zoomDelta!==void 0&&(o.zoom=x),f.panDelta!==void 0&&(o.drag=x),f.rollDelta!==void 0&&(o.roll=x),f.pitchDelta!==void 0&&(o.pitch=x),f.bearingDelta!==void 0&&(o.rotate=x)}_applyChanges(){let r={},o={},f={};for(let[d,v,x]of this._changes)d.panDelta&&(r.panDelta=(r.panDelta||new a.P(0,0))._add(d.panDelta)),d.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+d.pitchDelta),d.rollDelta&&(r.rollDelta=(r.rollDelta||0)+d.rollDelta),d.around!==void 0&&(r.around=d.around),d.pinchAround!==void 0&&(r.pinchAround=d.pinchAround),d.noInertia&&(r.noInertia=d.noInertia),a.e(o,v),a.e(f,x);this._updateMapTransform(r,o,f),this._changes=[]}_updateMapTransform(r,o,f){let d=this._map,v=d._getTransformForUpdate(),x=d.terrain;if(!(ff(r)||x&&this._terrainMovement))return this._fireEvents(o,f,!0);d._stop(!0);let{panDelta:S,zoomDelta:E,bearingDelta:A,pitchDelta:R,rollDelta:z,around:L,pinchAround:U}=r;U!==void 0&&(L=U),L=L||d.transform.centerPoint,x&&!v.isPointOnMapSurface(L)&&(L=v.centerPoint);let V={panDelta:S,zoomDelta:E,rollDelta:z,pitchDelta:R,bearingDelta:A,around:L};this._map.cameraHelper.useGlobeControls&&!v.isPointOnMapSurface(L)&&(L=v.centerPoint);let ee=L.distSqr(v.centerPoint)<.01?v.center:v.screenPointToLocation(S?L.sub(S):L);x?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(V,v),this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?v.setCenter(v.screenPointToLocation(v.centerPoint.sub(S))):this._map.cameraHelper.handleMapControlsPan(V,v,ee):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(V,v,ee))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(V,v),this._map.cameraHelper.handleMapControlsPan(V,v,ee)),d._applyUpdatedTransform(v),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(o,f,!0)}_fireEvents(r,o,f){let d=_c(this._eventsInProgress),v=_c(r),x={};for(let z in r){let{originalEvent:L}=r[z];this._eventsInProgress[z]||(x[`${z}start`]=L),this._eventsInProgress[z]=r[z]}!d&&v&&this._fireEvent("movestart",v.originalEvent);for(let z in x)this._fireEvent(z,x[z]);v&&this._fireEvent("move",v.originalEvent);for(let z in r){let{originalEvent:L}=r[z];this._fireEvent(z,L)}let S={},E;for(let z in this._eventsInProgress){let{handlerName:L,originalEvent:U}=this._eventsInProgress[z];this._handlersById[L].isActive()||(delete this._eventsInProgress[z],E=o[L]||U,S[`${z}end`]=E)}for(let z in S)this._fireEvent(z,S[z]);let A=_c(this._eventsInProgress),R=(d||v)&&!A;if(R&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let z=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&z.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(z)}if(f&&R){this._updatingCamera=!0;let z=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),L=U=>U!==0&&-this._bearingSnap<U&&U<this._bearingSnap;!z||!z.essential&&O.prefersReducedMotion?(this._map.fire(new a.l("moveend",{originalEvent:E})),L(this._map.getBearing())&&this._map.resetNorth()):(L(z.bearing||this._map.getBearing())&&(z.bearing=0),z.freezeElevation=!0,this._map.easeTo(z,{originalEvent:E})),this._updatingCamera=!1}}_fireEvent(r,o){this._map.fire(new a.l(r,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new PS("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class CS extends a.E{constructor(r,o,f){super(),this._renderFrameCallback=()=>{let d=Math.min((O.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(d)),d<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=f.bearingSnap,this.cameraHelper=o,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(r,o){r.apply(this.transform),this.transform=r,this.cameraHelper=o}getCenter(){return new a.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(r,o){return this.jumpTo({center:r},o)}getCenterElevation(){return this.transform.elevation}setCenterElevation(r,o){return this.jumpTo({elevation:r},o),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(r){this._centerClampedToGround=r}panBy(r,o,f){return r=a.P.convert(r).mult(-1),this.panTo(this.transform.center,a.e({offset:r},o),f)}panTo(r,o,f){return this.easeTo(a.e({center:r},o),f)}getZoom(){return this.transform.zoom}setZoom(r,o){return this.jumpTo({zoom:r},o),this}zoomTo(r,o,f){return this.easeTo(a.e({zoom:r},o),f)}zoomIn(r,o){return this.zoomTo(this.getZoom()+1,r,o),this}zoomOut(r,o){return this.zoomTo(this.getZoom()-1,r,o),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(r,o){return r!=this.transform.fov&&(this.transform.setFov(r),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)).fire(new a.l("moveend",o))),this}getBearing(){return this.transform.bearing}setBearing(r,o){return this.jumpTo({bearing:r},o),this}getPadding(){return this.transform.padding}setPadding(r,o){return this.jumpTo({padding:r},o),this}rotateTo(r,o,f){return this.easeTo(a.e({bearing:r},o),f)}resetNorth(r,o){return this.rotateTo(0,a.e({duration:1e3},r),o),this}resetNorthPitch(r,o){return this.easeTo(a.e({bearing:0,pitch:0,roll:0,duration:1e3},r),o),this}snapToNorth(r,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,o):this}getPitch(){return this.transform.pitch}setPitch(r,o){return this.jumpTo({pitch:r},o),this}getRoll(){return this.transform.roll}setRoll(r,o){return this.jumpTo({roll:r},o),this}cameraForBounds(r,o){r=ar.convert(r).adjustAntiMeridian();let f=o&&o.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,o)}_cameraForBoxAndBearing(r,o,f,d){let v={top:0,bottom:0,right:0,left:0};if(typeof(d=a.e({padding:v,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){let A=d.padding;d.padding={top:A,bottom:A,right:A,left:A}}let x=a.e(v,d.padding);d.padding=x;let S=this.transform,E=new ar(r,o);return this.cameraHelper.cameraForBoxAndBearing(d,x,E,f,S)}fitBounds(r,o,f){return this._fitInternal(this.cameraForBounds(r,o),o,f)}fitScreenCoordinates(r,o,f,d,v){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(a.P.convert(r)),this.transform.screenPointToLocation(a.P.convert(o)),f,d),d,v)}_fitInternal(r,o,f){return r?(delete(o=a.e(r,o)).padding,o.linear?this.easeTo(o,f):this.flyTo(o,f)):this}jumpTo(r,o){this.stop();let f=this._getTransformForUpdate(),d=!1,v=!1,x=!1,S=f.zoom;this.cameraHelper.handleJumpToCenterZoom(f,r);let E=f.zoom!==S;return"elevation"in r&&f.elevation!==+r.elevation&&f.setElevation(+r.elevation),"bearing"in r&&f.bearing!==+r.bearing&&(d=!0,f.setBearing(+r.bearing)),"pitch"in r&&f.pitch!==+r.pitch&&(v=!0,f.setPitch(+r.pitch)),"roll"in r&&f.roll!==+r.roll&&(x=!0,f.setRoll(+r.roll)),r.padding==null||f.isPaddingEqual(r.padding)||f.setPadding(r.padding),this._applyUpdatedTransform(f),this.fire(new a.l("movestart",o)).fire(new a.l("move",o)),E&&this.fire(new a.l("zoomstart",o)).fire(new a.l("zoom",o)).fire(new a.l("zoomend",o)),d&&this.fire(new a.l("rotatestart",o)).fire(new a.l("rotate",o)).fire(new a.l("rotateend",o)),v&&this.fire(new a.l("pitchstart",o)).fire(new a.l("pitch",o)).fire(new a.l("pitchend",o)),x&&this.fire(new a.l("rollstart",o)).fire(new a.l("roll",o)).fire(new a.l("rollend",o)),this.fire(new a.l("moveend",o))}calculateCameraOptionsFromTo(r,o,f,d=0){let v=a.$.fromLngLat(r,o),x=a.$.fromLngLat(f,d),S=x.x-v.x,E=x.y-v.y,A=x.z-v.z,R=Math.hypot(S,E,A);if(R===0)throw new Error("Can't calculate camera options with same From and To");let z=Math.hypot(S,E),L=a.ah(this.transform.cameraToCenterDistance/R/this.transform.tileSize),U=180*Math.atan2(S,-E)/Math.PI,V=180*Math.acos(z/R)/Math.PI;return V=A<0?90-V:90+V,{center:x.toLngLat(),elevation:d,zoom:L,pitch:V,bearing:U}}calculateCameraOptionsFromCameraLngLatAltRotation(r,o,f,d,v){let x=this.transform.calculateCenterFromCameraLngLatAlt(r,o,f,d);return{center:x.center,elevation:x.elevation,zoom:x.zoom,bearing:f,pitch:d,roll:v}}easeTo(r,o){this._stop(!1,r.easeId),((r=a.e({offset:[0,0],duration:500,easing:a.cf},r)).animate===!1||!r.essential&&O.prefersReducedMotion)&&(r.duration=0);let f=this._getTransformForUpdate(),d=this.getBearing(),v=f.pitch,x=f.roll,S="bearing"in r?this._normalizeBearing(r.bearing,d):d,E="pitch"in r?+r.pitch:v,A="roll"in r?this._normalizeBearing(r.roll,x):x,R="padding"in r?r.padding:f.padding,z=a.P.convert(r.offset),L,U;r.around&&(L=a.Q.convert(r.around),U=f.locationToScreenPoint(L));let V={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ee=this.cameraHelper.handleEaseTo(f,{bearing:S,pitch:E,roll:A,padding:R,around:L,aroundPoint:U,offsetAsPoint:z,offset:r.offset,zoom:r.zoom,center:r.center});return this._rotating=this._rotating||d!==S,this._pitching=this._pitching||E!==v,this._rolling=this._rolling||A!==x,this._padding=!f.isPaddingEqual(R),this._zooming=this._zooming||ee.isZooming,this._easeId=r.easeId,this._prepareEase(o,r.noMoveStart,V),this.terrain&&this._prepareElevation(ee.elevationCenter),this._ease(Q=>{ee.easeFunc(Q),this.terrain&&!r.freezeElevation&&this._updateElevation(Q),this._applyUpdatedTransform(f),this._fireMoveEvents(o)},Q=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(o,Q)},r),this}_prepareEase(r,o,f={}){this._moving=!0,o||f.moving||this.fire(new a.l("movestart",r)),this._zooming&&!f.zooming&&this.fire(new a.l("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new a.l("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new a.l("pitchstart",r)),this._rolling&&!f.rolling&&this.fire(new a.l("rollstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));let o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&o!==this._elevationTarget){let f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(o-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=o}this.transform.setElevation(a.B.number(this._elevationStart,this._elevationTarget,r))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){if(!this.terrain&&r.elevation>=0&&r.pitch<=90)return{};let o=r.getCameraLngLat(),f=r.getCameraAltitude(),d=this.terrain?this.terrain.getElevationForLngLatZoom(o,r.zoom):0;if(f<d){let v=this.calculateCameraOptionsFromTo(o,d,r.center,r.elevation);return{pitch:v.pitch,zoom:v.zoom}}return{}}_applyUpdatedTransform(r){let o=[];if(o.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&o.push(d=>this.transformCameraUpdate(d)),!o.length)return;let f=r.clone();for(let d of o){let v=f.clone(),{center:x,zoom:S,roll:E,pitch:A,bearing:R,elevation:z}=d(v);x&&v.setCenter(x),z!==void 0&&v.setElevation(z),S!==void 0&&v.setZoom(S),E!==void 0&&v.setRoll(E),A!==void 0&&v.setPitch(A),R!==void 0&&v.setBearing(R),f.apply(v)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new a.l("move",r)),this._zooming&&this.fire(new a.l("zoom",r)),this._rotating&&this.fire(new a.l("rotate",r)),this._pitching&&this.fire(new a.l("pitch",r)),this._rolling&&this.fire(new a.l("roll",r))}_afterEase(r,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;let f=this._zooming,d=this._rotating,v=this._pitching,x=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,f&&this.fire(new a.l("zoomend",r)),d&&this.fire(new a.l("rotateend",r)),v&&this.fire(new a.l("pitchend",r)),x&&this.fire(new a.l("rollend",r)),this.fire(new a.l("moveend",r))}flyTo(r,o){if(!r.essential&&O.prefersReducedMotion){let Oe=a.O(r,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(Oe,o)}this.stop(),r=a.e({offset:[0,0],speed:1.2,curve:1.42,easing:a.cf},r);let f=this._getTransformForUpdate(),d=f.bearing,v=f.pitch,x=f.roll,S=f.padding,E="bearing"in r?this._normalizeBearing(r.bearing,d):d,A="pitch"in r?+r.pitch:v,R="roll"in r?this._normalizeBearing(r.roll,x):x,z="padding"in r?r.padding:f.padding,L=a.P.convert(r.offset),U=f.centerPoint.add(L),V=f.screenPointToLocation(U),ee=this.cameraHelper.handleFlyTo(f,{bearing:E,pitch:A,roll:R,padding:z,locationAtOffset:V,offsetAsPoint:L,center:r.center,minZoom:r.minZoom,zoom:r.zoom}),Q=r.curve,te=Math.max(f.width,f.height),oe=te/ee.scaleOfZoom,he=ee.pixelPathLength;typeof ee.scaleOfMinZoom=="number"&&(Q=Math.sqrt(te/ee.scaleOfMinZoom/he*2));let ce=Q*Q;function de(Oe){let Ke=(oe*oe-te*te+(Oe?-1:1)*ce*ce*he*he)/(2*(Oe?oe:te)*ce*he);return Math.log(Math.sqrt(Ke*Ke+1)-Ke)}function ge(Oe){return(Math.exp(Oe)-Math.exp(-Oe))/2}function pe(Oe){return(Math.exp(Oe)+Math.exp(-Oe))/2}let Ie=de(!1),Le=function(Oe){return pe(Ie)/pe(Ie+Q*Oe)},Me=function(Oe){return te*((pe(Ie)*(ge(Ke=Ie+Q*Oe)/pe(Ke))-ge(Ie))/ce)/he;var Ke},Re=(de(!0)-Ie)/Q;if(Math.abs(he)<2e-6||!isFinite(Re)){if(Math.abs(te-oe)<1e-6)return this.easeTo(r,o);let Oe=oe<te?-1:1;Re=Math.abs(Math.log(oe/te))/Q,Me=()=>0,Le=Ke=>Math.exp(Oe*Q*Ke)}return r.duration="duration"in r?+r.duration:1e3*Re/("screenSpeed"in r?+r.screenSpeed/Q:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=d!==E,this._pitching=A!==v,this._rolling=R!==x,this._padding=!f.isPaddingEqual(z),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(ee.targetCenter),this._ease(Oe=>{let Ke=Oe*Re,We=1/Le(Ke),Ue=Me(Ke);this._rotating&&f.setBearing(a.B.number(d,E,Oe)),this._pitching&&f.setPitch(a.B.number(v,A,Oe)),this._rolling&&f.setRoll(a.B.number(x,R,Oe)),this._padding&&(f.interpolatePadding(S,z,Oe),U=f.centerPoint.add(L)),ee.easeFunc(Oe,We,Ue,U),this.terrain&&!r.freezeElevation&&this._updateElevation(Oe),this._applyUpdatedTransform(f),this._fireMoveEvents(o)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(o)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,o){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,o)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,o,f){f.animate===!1||f.duration===0?(r(1),o()):(this._easeStart=O.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,o){r=a.aL(r,-180,180);let f=Math.abs(r-o);return Math.abs(r-360-o)<f&&(r-=360),Math.abs(r+360-o)<f&&(r+=360),r}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(a.Q.convert(r),this.transform.tileZoom):null}}let ro={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class cr{constructor(r=ro){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=k.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=k.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=k.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,o){let f=this._map._getUIString(`AttributionControl.${o}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){let d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}let o=this._map.style.sourceCaches;for(let d in o){let v=o[d];if(v.used||v.usedForTerrain){let x=v.getSource();x.attribution&&r.indexOf(x.attribution)<0&&r.push(x.attribution)}}r=r.filter(d=>String(d).trim()),r.sort((d,v)=>d.length-v.length),r=r.filter((d,v)=>{for(let x=v+1;x<r.length;x++)if(r[x].indexOf(d)>=0)return!1;return!0});let f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=k.sanitize(f),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class xc{constructor(r={}){this._updateCompact=()=>{let o=this._container.children;if(o.length){let f=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=k.create("div","maplibregl-ctrl");let o=k.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){k.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class am{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let o=++this._id;return this._queue.push({callback:r,id:o,cancelled:!1}),o}remove(r){let o=this._currentlyRunning,f=o?this._queue.concat(o):this._queue;for(let d of f)if(d.id===r)return void(d.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let o=this._currentlyRunning=this._queue;this._queue=[];for(let f of o)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var M_=a.aG([{name:"a_pos3d",type:"Int16",components:3}]);class R_ extends a.E{constructor(r){super(),this._lastTilesetChange=O.now(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=r._source.tileSize*t0(2,this.deltaZoom),r.usedForTerrain=!0,r.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,o){this.sourceCache.update(r,o),this._renderableTilesKeys=[];let f={};for(let d of ye(r,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))f[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.terrainRttPosMatrix32f=new Float64Array(16),a.bQ(d.terrainRttPosMatrix32f,0,a.Z,a.Z,0,0,1),this._tiles[d.key]=new Ja(d,this.tileSize),this._lastTilesetChange=O.now());for(let d in this._tiles)f[d]||delete this._tiles[d]}freeRtt(r){for(let o in this._tiles){let f=this._tiles[o];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r,o){return o?this._getTerrainCoordsForTileRanges(r,o):this._getTerrainCoordsForRegularTile(r)}_getTerrainCoordsForRegularTile(r){let o={};for(let f of this._renderableTilesKeys){let d=this._tiles[f].tileID,v=r.clone(),x=a.b2();if(d.canonical.equals(r.canonical))a.bQ(x,0,a.Z,a.Z,0,0,1);else if(d.canonical.isChildOf(r.canonical)){let S=d.canonical.z-r.canonical.z,E=d.canonical.x-(d.canonical.x>>S<<S),A=d.canonical.y-(d.canonical.y>>S<<S),R=a.Z>>S;a.bQ(x,0,R,R,0,0,1),a.L(x,x,[-E*R,-A*R,0])}else{if(!r.canonical.isChildOf(d.canonical))continue;{let S=r.canonical.z-d.canonical.z,E=r.canonical.x-(r.canonical.x>>S<<S),A=r.canonical.y-(r.canonical.y>>S<<S),R=a.Z>>S;a.bQ(x,0,a.Z,a.Z,0,0,1),a.L(x,x,[E*R,A*R,0]),a.M(x,x,[1/t0(2,S),1/t0(2,S),0])}}v.terrainRttPosMatrix32f=new Float32Array(x),o[f]=v}return o}_getTerrainCoordsForTileRanges(r,o){let f={};for(let d of this._renderableTilesKeys){let v=this._tiles[d].tileID;if(!this._isWithinTileRanges(v,o))continue;let x=r.clone(),S=a.b2();if(v.canonical.z===r.canonical.z){let E=r.canonical.x-v.canonical.x,A=r.canonical.y-v.canonical.y;a.bQ(S,0,a.Z,a.Z,0,0,1),a.L(S,S,[E*a.Z,A*a.Z,0])}else if(v.canonical.z>r.canonical.z){let E=v.canonical.z-r.canonical.z,A=v.canonical.x-(v.canonical.x>>E<<E),R=v.canonical.y-(v.canonical.y>>E<<E),z=r.canonical.x-(v.canonical.x>>E),L=r.canonical.y-(v.canonical.y>>E),U=a.Z>>E;a.bQ(S,0,U,U,0,0,1),a.L(S,S,[-A*U+z*a.Z,-R*U+L*a.Z,0])}else{let E=r.canonical.z-v.canonical.z,A=r.canonical.x-(r.canonical.x>>E<<E),R=r.canonical.y-(r.canonical.y>>E<<E),z=(r.canonical.x>>E)-v.canonical.x,L=(r.canonical.y>>E)-v.canonical.y,U=a.Z<<E;a.bQ(S,0,U,U,0,0,1),a.L(S,S,[A*a.Z+z*U,R*a.Z+L*U,0])}x.terrainRttPosMatrix32f=new Float32Array(S),f[d]=x}return f}getSourceTile(r,o){let f=this.sourceCache._source,d=r.overscaledZ-this.deltaZoom;if(d>f.maxzoom&&(d=f.maxzoom),d<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(d).key);let v=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!v||!v.dem)&&o)for(;d>=f.minzoom&&(!v||!v.dem);)v=this.sourceCache.getTileByID(r.scaledTo(d--).key);return v}anyTilesAfterTime(r=Date.now()){return this._lastTilesetChange>=r}_isWithinTileRanges(r,o){return o[r.canonical.z]&&r.canonical.x>=o[r.canonical.z].minTileX&&r.canonical.x<=o[r.canonical.z].maxTileX&&r.canonical.y>=o[r.canonical.z].minTileY&&r.canonical.y<=o[r.canonical.z].maxTileY}}class O_{constructor(r,o,f){this._meshCache={},this.painter=r,this.sourceCache=new R_(o),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,o,f,d=a.Z){var v;if(!(o>=0&&o<d&&f>=0&&f<d))return 0;let x=this.getTerrainData(r),S=(v=x.tile)===null||v===void 0?void 0:v.dem;if(!S)return 0;let E=a.cj([],[o/d*a.Z,f/d*a.Z],x.u_terrain_matrix),A=[E[0]*S.dim,E[1]*S.dim],R=Math.floor(A[0]),z=Math.floor(A[1]),L=A[0]-R,U=A[1]-z;return S.get(R,z)*(1-L)*(1-U)+S.get(R+1,z)*L*(1-U)+S.get(R,z+1)*(1-L)*U+S.get(R+1,z+1)*L*U}getElevationForLngLatZoom(r,o){if(!a.ck(o,r.wrap()))return 0;let{tileID:f,mercatorX:d,mercatorY:v}=this._getOverscaledTileIDFromLngLatZoom(r,o);return this.getElevation(f,d%a.Z,v%a.Z,a.Z)}getElevation(r,o,f,d=a.Z){return this.getDEMElevation(r,o,f,d)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){let d=this.painter.context,v=new a.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Ve(d,v,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Ve(d,new a.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=a.ad([])}let o=this.sourceCache.getSourceTile(r,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){let d=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new Ve(d,o.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),o.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}let f=o&&o+o.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){let d=this.sourceCache.sourceCache._source.maxzoom,v=r.canonical.z-o.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=d?v=r.canonical.z-d:a.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let x=r.canonical.x-(r.canonical.x>>v<<v),S=r.canonical.y-(r.canonical.y>>v<<v),E=a.cl(new Float64Array(16),[1/(a.Z<<v),1/(a.Z<<v),0]);a.L(E,E,[x*a.Z,S*a.Z,0]),this._demMatrixCache[r.key]={matrix:E,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(r){let o=this.painter,f=o.width/devicePixelRatio,d=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Ve(o.context,{width:f,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Ve(o.context,{width:f,height:d,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(f,d,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,f,d))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let v=0,x=0;v<this._coordsTextureSize;v++)for(let S=0;S<this._coordsTextureSize;S++,x+=4)o[x+0]=255&S,o[x+1]=255&v,o[x+2]=S>>8<<4|v>>8,o[x+3]=0;let f=new a.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),d=new Ve(r,f,r.gl.RGBA,{premultiply:!1});return d.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);let o=new Uint8Array(4),f=this.painter.context,d=f.gl,v=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),x=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),S=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(v,S-x-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),f.bindFramebuffer.set(null);let E=o[0]+(o[2]>>4<<8),A=o[1]+((15&o[2])<<8),R=this.coordsIndex[255-o[3]],z=R&&this.sourceCache.getTileByID(R);if(!z)return null;let L=this._coordsTextureSize,U=(1<<z.tileID.canonical.z)*L;return new a.$((z.tileID.canonical.x*L+E)/U+z.tileID.wrap,(z.tileID.canonical.y*L+A)/U,this.getElevation(z.tileID,E,A,L))}depthAtPoint(r){let o=new Uint8Array(4),f=this.painter.context,d=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,o),f.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(r){var o;let f=((o=this.painter.style.projection)===null||o===void 0?void 0:o.transitionState)>0,d=f&&r.canonical.y===0,v=f&&r.canonical.y===(1<<r.canonical.z)-1,x=`m_${d?"n":""}_${v?"s":""}`;if(this._meshCache[x])return this._meshCache[x];let S=this.painter.context,E=new a.cm,A=new a.aK,R=this.meshSize,z=a.Z/R,L=R*R;for(let pe=0;pe<=R;pe++)for(let Ie=0;Ie<=R;Ie++)E.emplaceBack(Ie*z,pe*z,0);for(let pe=0;pe<L;pe+=R+1)for(let Ie=0;Ie<R;Ie++)A.emplaceBack(Ie+pe,R+Ie+pe+1,R+Ie+pe+2),A.emplaceBack(Ie+pe,R+Ie+pe+2,Ie+pe+1);let U=E.length,V=U+(R+1),ee=(R+1)*R,Q=d?a.b9:0,te=d?0:1,oe=v?a.ba:a.Z,he=v?0:1;for(let pe=0;pe<=R;pe++)E.emplaceBack(pe*z,Q,te);for(let pe=0;pe<=R;pe++)E.emplaceBack(pe*z,oe,he);for(let pe=0;pe<R;pe++)A.emplaceBack(ee+pe,V+pe,V+pe+1),A.emplaceBack(ee+pe,V+pe+1,ee+pe+1),A.emplaceBack(0+pe,U+pe+1,U+pe),A.emplaceBack(0+pe,0+pe+1,U+pe+1);let ce=E.length,de=ce+2*(R+1);for(let pe of[0,1])for(let Ie=0;Ie<=R;Ie++)for(let Le of[0,1])E.emplaceBack(pe*a.Z,Ie*z,Le);for(let pe=0;pe<2*R;pe+=2)A.emplaceBack(ce+pe,ce+pe+1,ce+pe+3),A.emplaceBack(ce+pe,ce+pe+3,ce+pe+2),A.emplaceBack(de+pe,de+pe+3,de+pe+1),A.emplaceBack(de+pe,de+pe+2,de+pe+3);let ge=new dl(S.createVertexBuffer(E,M_.members),S.createIndexBuffer(A),a.aJ.simpleSegment(0,0,E.length,A.length));return this._meshCache[x]=ge,ge}getMeshFrameDelta(r){return 2*Math.PI*a.bu/Math.pow(2,Math.max(r,0))/5}getMinTileElevationForLngLatZoom(r,o){var f;let{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(r,o);return(f=this.getMinMaxElevation(d).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){let o=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return o&&o.dem&&(f.minElevation=o.dem.min*this.exaggeration,f.maxElevation=o.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,o){let f=a.$.fromLngLat(r.wrap()),d=(1<<o)*a.Z,v=f.x*d,x=f.y*d,S=Math.floor(v/a.Z),E=Math.floor(x/a.Z);return{tileID:new a.Y(o,0,o,S,E),mercatorX:v,mercatorY:x}}}class MS{constructor(r,o,f){this._context=r,this._size=o,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){let o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Ve(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(f.texture),{id:r,fbo:o,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(o=>r.id!==o),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(let o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(let r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}let Ui={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class df{constructor(r,o){this.painter=r,this.terrain=o,this.pool=new MS(r.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(o)),this._coordsAscending={};for(let f in r.sourceCaches){this._coordsAscending[f]={};let d=r.sourceCaches[f].getVisibleCoordinates(),v=r.sourceCaches[f].getSource(),x=v instanceof _n?v.terrainTileRanges:null;for(let S of d){let E=this.terrain.sourceCache.getTerrainCoords(S,x);for(let A in E)this._coordsAscending[f][A]||(this._coordsAscending[f][A]=[]),this._coordsAscending[f][A].push(E[A])}}this._coordsAscendingStr={};for(let f of r._order){let d=r._layers[f],v=d.source;if(Ui[d.type]&&!this._coordsAscendingStr[v]){this._coordsAscendingStr[v]={};for(let x in this._coordsAscending[v])this._coordsAscendingStr[v][x]=this._coordsAscending[v][x].map(S=>S.key).sort().join()}}for(let f of this._renderableTiles)for(let d in this._coordsAscendingStr){let v=this._coordsAscendingStr[d][f.tileID.key];v&&v!==f.rttCoords[d]&&(f.rtt=[])}}renderLayer(r,o){if(r.isHidden(this.painter.transform.zoom))return!1;let f=Object.assign(Object.assign({},o),{isRenderingToTexture:!0}),d=r.type,v=this.painter,x=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(Ui[d]&&(this._prevType&&Ui[this._prevType]||this._stacks.push([]),this._prevType=d,this._stacks[this._stacks.length-1].push(r.id),!x))return!0;if(Ui[this._prevType]||Ui[d]&&x){this._prevType=d;let S=this._stacks.length-1,E=this._stacks[S]||[];for(let A of this._renderableTiles){if(this.pool.isFull()&&(Oo(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(A),A.rtt[S]){let z=this.pool.getObjectForId(A.rtt[S].id);if(z.stamp===A.rtt[S].stamp){this.pool.useObject(z);continue}}let R=this.pool.getOrCreateFreeObject();this.pool.useObject(R),this.pool.stampObject(R),A.rtt[S]={id:R.id,stamp:R.stamp},v.context.bindFramebuffer.set(R.fbo.framebuffer),v.context.clear({color:a.b7.transparent,stencil:0}),v.currentStencilSource=void 0;for(let z=0;z<E.length;z++){let L=v.style._layers[E[z]],U=L.source?this._coordsAscending[L.source][A.tileID.key]:[A.tileID];v.context.viewport.set([0,0,R.fbo.width,R.fbo.height]),v._renderTileClippingMasks(L,U,!0),v.renderLayer(v,v.style.sourceCaches[L.source],L,U,f),L.source&&(A.rttCoords[L.source]=this._coordsAscendingStr[L.source][A.tileID.key])}}return Oo(this.painter,this.terrain,this._rttTiles,f),this._rttTiles=[],this.pool.freeAllObjects(),Ui[d]}return!1}}let st={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},mt=_,bc={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ro,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:a.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},om={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class sm{constructor(r,o,f=!1){this.mousedown=v=>{this.startMove(v,k.mousePos(this.element,v)),k.addEventListener(window,"mousemove",this.mousemove),k.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=v=>{this.move(v,k.mousePos(this.element,v))},this.mouseup=v=>{this._rotatePitchHanlder.dragEnd(v),this.offTemp()},this.touchstart=v=>{v.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=k.touchPos(this.element,v.targetTouches)[0],this.startMove(v,this._startPos),k.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.addEventListener(window,"touchend",this.touchend))},this.touchmove=v=>{v.targetTouches.length!==1?this.reset():(this._lastPos=k.touchPos(this.element,v.targetTouches)[0],this.move(v,this._lastPos))},this.touchend=v=>{v.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=o;let d=new Al;this._rotatePitchHanlder=new Ci({clickTolerance:3,move:(v,x)=>{let S=o.getBoundingClientRect(),E=new a.P((S.bottom-S.top)/2,(S.right-S.left)/2);return{bearingDelta:a.ce(new a.P(v.x,x.y),x,E),pitchDelta:f?-.5*(x.y-v.y):void 0}},moveStateManager:d,enable:!0,assignEvents:()=>{}}),this.map=r,k.addEventListener(o,"mousedown",this.mousedown),k.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),k.addEventListener(o,"touchcancel",this.reset)}startMove(r,o){this._rotatePitchHanlder.dragStart(r,o),k.disableDrag()}move(r,o){let f=this.map,{bearingDelta:d,pitchDelta:v}=this._rotatePitchHanlder.dragMove(r,o)||{};d&&f.setBearing(f.getBearing()+d),v&&f.setPitch(f.getPitch()+v)}off(){let r=this.element;k.removeEventListener(r,"mousedown",this.mousedown),k.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend),k.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){k.enableDrag(),k.removeEventListener(window,"mousemove",this.mousemove),k.removeEventListener(window,"mouseup",this.mouseup),k.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),k.removeEventListener(window,"touchend",this.touchend)}}let jr;function lm(m,r,o,f=!1){if(f||!o.getCoveringTilesDetailsProvider().allowWorldCopies())return m==null?void 0:m.wrap();let d=new a.Q(m.lng,m.lat);if(m=new a.Q(m.lng,m.lat),r){let v=new a.Q(m.lng-360,m.lat),x=new a.Q(m.lng+360,m.lat),S=o.locationToScreenPoint(m).distSqr(r);o.locationToScreenPoint(v).distSqr(r)<S?m=v:o.locationToScreenPoint(x).distSqr(r)<S&&(m=x)}for(;Math.abs(m.lng-o.center.lng)>180;){let v=o.locationToScreenPoint(m);if(v.x>=0&&v.y>=0&&v.x<=o.width&&v.y<=o.height)break;m.lng>o.center.lng?m.lng-=360:m.lng+=360}return m.lng!==d.lng&&o.isPointOnMapSurface(o.locationToScreenPoint(m))?m:d}let Bn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function k_(m,r,o){let f=m.classList;for(let d in Bn)f.remove(`maplibregl-${o}-anchor-${d}`);f.add(`maplibregl-${o}-anchor-${r}`)}class qs extends a.E{constructor(r){if(super(),this._onKeyPress=o=>{let f=o.code,d=o.charCode||o.keyCode;f!=="Space"&&f!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=o=>{let f=o.originalEvent.target,d=this._element;this._popup&&(f===d||d.contains(f))&&this.togglePopup()},this._update=o=>{if(!this._map)return;let f=this._map.loaded()&&!this._map.isMoving();((o==null?void 0:o.type)==="terrain"||(o==null?void 0:o.type)==="render"&&!f)&&this._map.once("render",this._update),this._lngLat=lm(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(d=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let v="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?v="rotateX(0deg)":this._pitchAlignment==="map"&&(v=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),k.setTransform(this._element,`${Bn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${v} ${d}`),O.frameAsync(new AbortController).then(()=>{this._updateOpacity(o&&o.type==="moveend")}).catch(()=>{})},this._onMove=o=>{if(!this._isDragging){let f=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.l("dragstart"))),this.fire(new a.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.l("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=a.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=k.create("div");let o=k.createNS("http://www.w3.org/2000/svg","svg"),f=41,d=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${f}px`),o.setAttributeNS(null,"width",`${d}px`),o.setAttributeNS(null,"viewBox",`0 0 ${d} ${f}`);let v=k.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"stroke","none"),v.setAttributeNS(null,"stroke-width","1"),v.setAttributeNS(null,"fill","none"),v.setAttributeNS(null,"fill-rule","evenodd");let x=k.createNS("http://www.w3.org/2000/svg","g");x.setAttributeNS(null,"fill-rule","nonzero");let S=k.createNS("http://www.w3.org/2000/svg","g");S.setAttributeNS(null,"transform","translate(3.0, 29.0)"),S.setAttributeNS(null,"fill","#000000");let E=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let te of E){let oe=k.createNS("http://www.w3.org/2000/svg","ellipse");oe.setAttributeNS(null,"opacity","0.04"),oe.setAttributeNS(null,"cx","10.5"),oe.setAttributeNS(null,"cy","5.80029008"),oe.setAttributeNS(null,"rx",te.rx),oe.setAttributeNS(null,"ry",te.ry),S.appendChild(oe)}let A=k.createNS("http://www.w3.org/2000/svg","g");A.setAttributeNS(null,"fill",this._color);let R=k.createNS("http://www.w3.org/2000/svg","path");R.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),A.appendChild(R);let z=k.createNS("http://www.w3.org/2000/svg","g");z.setAttributeNS(null,"opacity","0.25"),z.setAttributeNS(null,"fill","#000000");let L=k.createNS("http://www.w3.org/2000/svg","path");L.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),z.appendChild(L);let U=k.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"transform","translate(6.0, 7.0)"),U.setAttributeNS(null,"fill","#FFFFFF");let V=k.createNS("http://www.w3.org/2000/svg","g");V.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ee=k.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#000000"),ee.setAttributeNS(null,"opacity","0.25"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962");let Q=k.createNS("http://www.w3.org/2000/svg","circle");Q.setAttributeNS(null,"fill","#FFFFFF"),Q.setAttributeNS(null,"cx","5.5"),Q.setAttributeNS(null,"cy","5.5"),Q.setAttributeNS(null,"r","5.4999962"),V.appendChild(ee),V.appendChild(Q),x.appendChild(S),x.appendChild(A),x.appendChild(z),x.appendChild(U),x.appendChild(V),o.appendChild(x),o.setAttributeNS(null,"height",f*this._scale+"px"),o.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(o),this._offset=a.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",o=>{o.preventDefault()}),this._element.addEventListener("mousedown",o=>{o.preventDefault()}),k_(this._element,this._anchor,"marker"),r&&r.className)for(let o of r.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),r.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),k.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=a.Q.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let d=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){let r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var o,f;let d=(o=this._map)===null||o===void 0?void 0:o.terrain,v=this._map.transform.isLocationOccluded(this._lngLat);if(!d||v){let U=v?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==U&&(this._element.style.opacity=U))}if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let x=this._map,S=x.terrain.depthAtPoint(this._pos),E=x.terrain.getElevationForLngLatZoom(this._lngLat,x.transform.tileZoom);if(x.transform.lngLatToCameraDepth(this._lngLat,E)-S<.006)return void(this._element.style.opacity=this._opacity);let A=-this._offset.y/x.transform.pixelsPerMeter,R=Math.sin(x.getPitch()*Math.PI/180)*A,z=x.terrain.depthAtPoint(new a.P(this._pos.x,this._pos.y-this._offset.y)),L=x.transform.lngLatToCameraDepth(this._lngLat,E+R)-z>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&L&&this._popup.remove(),this._element.style.opacity=L?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=a.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,o){return(this._opacity===void 0||r===void 0&&o===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}let Pr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},vr=0,Rl=!1,wc={maxWidth:100,unit:"metric"};function Sc(m,r,o){let f=o&&o.maxWidth||100,d=m._container.clientHeight/2,v=m._container.clientWidth/2,x=m.unproject([v-f/2,d]),S=m.unproject([v+f/2,d]),E=Math.round(m.project(S).x-m.project(x).x),A=Math.min(f,E,m._container.clientWidth),R=x.distanceTo(S);if(o&&o.unit==="imperial"){let z=3.2808*R;z>5280?Ps(r,A,z/5280,m._getUIString("ScaleControl.Miles")):Ps(r,A,z,m._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Ps(r,A,R/1852,m._getUIString("ScaleControl.NauticalMiles")):R>=1e3?Ps(r,A,R/1e3,m._getUIString("ScaleControl.Kilometers")):Ps(r,A,R,m._getUIString("ScaleControl.Meters"))}function Ps(m,r,o,f){let d=function(v){let x=Math.pow(10,`${Math.floor(v)}`.length-1),S=v/x;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:S>=1?1:function(E){let A=Math.pow(10,Math.ceil(-Math.log(E)/Math.LN10));return Math.round(E*A)/A}(S),x*S}(o);m.style.width=r*(d/o)+"px",m.innerHTML=`${d}&nbsp;${f}`}let um={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},cm=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Ol(m){if(m){if(typeof m=="number"){let r=Math.round(Math.abs(m)/Math.SQRT2);return{center:new a.P(0,0),top:new a.P(0,m),"top-left":new a.P(r,r),"top-right":new a.P(-r,r),bottom:new a.P(0,-m),"bottom-left":new a.P(r,-r),"bottom-right":new a.P(-r,-r),left:new a.P(m,0),right:new a.P(-m,0)}}if(m instanceof a.P||Array.isArray(m)){let r=a.P.convert(m);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:a.P.convert(m.center||[0,0]),top:a.P.convert(m.top||[0,0]),"top-left":a.P.convert(m["top-left"]||[0,0]),"top-right":a.P.convert(m["top-right"]||[0,0]),bottom:a.P.convert(m.bottom||[0,0]),"bottom-left":a.P.convert(m["bottom-left"]||[0,0]),"bottom-right":a.P.convert(m["bottom-right"]||[0,0]),left:a.P.convert(m.left||[0,0]),right:a.P.convert(m.right||[0,0])}}return Ol(new a.P(0,0))}let hm=_;c.AJAXError=a.cq,c.Event=a.l,c.Evented=a.E,c.LngLat=a.Q,c.MercatorCoordinate=a.$,c.Point=a.P,c.addProtocol=a.cr,c.config=a.a,c.removeProtocol=a.cs,c.AttributionControl=cr,c.BoxZoomHandler=Qp,c.CanvasSource=hs,c.CooperativeGesturesHandler=hf,c.DoubleClickZoomHandler=cf,c.DragPanHandler=A_,c.DragRotateHandler=C_,c.EdgeInsets=Xu,c.FullscreenControl=class extends a.E{constructor(m={}){super(),this._onFullscreenChange=()=>{var r;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=o==null?void 0:o.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,m&&m.container&&(m.container instanceof HTMLElement?this._container=m.container:a.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){k.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let m=this._fullscreenButton=k.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);k.create("span","maplibregl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new a.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new a.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},c.GeoJSONSource=Vu,c.GeolocateControl=class extends a.E{constructor(m){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new a.l("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new a.l("geolocate",r)),this._finish()}},this._updateCamera=r=>{let o=new a.Q(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,d=this._map.getBearing(),v=a.e({bearing:d},this.options.fitBoundsOptions),x=ar.fromLngLat(o,f);this._map.fitBounds(x,v,{geolocateSource:!0})},this._updateMarker=r=>{if(r){let o=new a.Q(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&Rl)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new a.l("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=k.create("button","maplibregl-ctrl-geolocate",this._container),k.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){a.w("Geolocation support is not available so the GeolocateControl will be disabled.");let o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{let o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=k.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new qs({element:this._dotElement}),this._circleElement=k.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new qs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new a.l("trackuserlocationend")),this.fire(new a.l("userlocationlostfocus")))})}},this.options=a.e({},Pr,m)}onAdd(m){return this._map=m,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return a._(this,arguments,void 0,function*(r=!1){if(jr!==void 0&&!r)return jr;if(window.navigator.permissions===void 0)return jr=!!window.navigator.geolocation,jr;try{jr=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(o){jr=!!window.navigator.geolocation}return jr})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),k.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,vr=0,Rl=!1}_isOutOfMapMaxBounds(m){let r=this._map.getMaxBounds(),o=m.coords;return r&&(o.longitude<r.getWest()||o.longitude>r.getEast()||o.latitude<r.getSouth()||o.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){let m=this._map.getBounds(),r=m.getSouthEast(),o=m.getNorthEast(),f=r.distanceTo(o),d=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return a.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":vr--,Rl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new a.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.l("trackuserlocationstart")),this.fire(new a.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),vr++,vr>1?(m={maximumAge:6e5,timeout:0},Rl=!0):(m=this.options.positionOptions,Rl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,m)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},c.GlobeControl=class{constructor(){this._toggleProjection=()=>{var m;let r=(m=this._map.getProjection())===null||m===void 0?void 0:m.type;this._map.setProjection(r!=="mercator"&&r?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var m;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((m=this._map.getProjection())===null||m===void 0?void 0:m.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(m){return this._map=m,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=k.create("button","maplibregl-ctrl-globe",this._container),k.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){k.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},c.Hash=Kp,c.ImageSource=_n,c.KeyboardHandler=Ml,c.LngLatBounds=ar,c.LogoControl=xc,c.Map=class extends CS{constructor(m){var r,o;a.cn.mark(a.co.create);let f=Object.assign(Object.assign(Object.assign({},bc),m),{canvasContextAttributes:Object.assign(Object.assign({},bc.canvasContextAttributes),m.canvasContextAttributes)});if(f.minZoom!=null&&f.maxZoom!=null&&f.minZoom>f.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(f.minPitch!=null&&f.maxPitch!=null&&f.minPitch>f.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(f.minPitch!=null&&f.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(f.maxPitch!=null&&f.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");let d=new ml,v=new Ju;if(f.minZoom!==void 0&&d.setMinZoom(f.minZoom),f.maxZoom!==void 0&&d.setMaxZoom(f.maxZoom),f.minPitch!==void 0&&d.setMinPitch(f.minPitch),f.maxPitch!==void 0&&d.setMaxPitch(f.maxPitch),f.renderWorldCopies!==void 0&&d.setRenderWorldCopies(f.renderWorldCopies),super(d,v,{bearingSnap:f.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new am,this._controls=[],this._mapId=a.a4(),this._contextLost=S=>{S.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new a.l("webglcontextlost",{originalEvent:S}))},this._contextRestored=S=>{this._setupPainter(),this.resize(),this._update(),this.fire(new a.l("webglcontextrestored",{originalEvent:S}))},this._onMapScroll=S=>{if(S.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=f.interactive,this._maxTileCacheSize=f.maxTileCacheSize,this._maxTileCacheZoomLevels=f.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},f.canvasContextAttributes),this._trackResize=f.trackResize===!0,this._bearingSnap=f.bearingSnap,this._centerClampedToGround=f.centerClampedToGround,this._refreshExpiredTiles=f.refreshExpiredTiles===!0,this._fadeDuration=f.fadeDuration,this._crossSourceCollisions=f.crossSourceCollisions===!0,this._collectResourceTiming=f.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},st),f.locale),this._clickTolerance=f.clickTolerance,this._overridePixelRatio=f.pixelRatio,this._maxCanvasSize=f.maxCanvasSize,this.transformCameraUpdate=f.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=f.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=ae.addThrottleControl(()=>this.isMoving()),this._requestManager=new _e(f.transformRequest),typeof f.container=="string"){if(this._container=document.getElementById(f.container),!this._container)throw new Error(`Container '${f.container}' not found.`)}else{if(!(f.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=f.container}if(f.maxBounds&&this.setMaxBounds(f.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let S=!1,E=vc(A=>{this._trackResize&&!this._removed&&(this.resize(A),this.redraw())},50);this._resizeObserver=new ResizeObserver(A=>{S?E(A):S=!0}),this._resizeObserver.observe(this._container)}this.handlers=new AS(this,f),this._hash=f.hash&&new Kp(typeof f.hash=="string"&&f.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:f.center,elevation:f.elevation,zoom:f.zoom,bearing:f.bearing,pitch:f.pitch,roll:f.roll}),f.bounds&&(this.resize(),this.fitBounds(f.bounds,a.e({},f.fitBoundsOptions,{duration:0}))));let x=typeof f.style=="string"||((o=(r=f.style)===null||r===void 0?void 0:r.projection)===null||o===void 0?void 0:o.type)!=="globe";this.resize(null,x),this._localIdeographFontFamily=f.localIdeographFontFamily,this._validateStyle=f.validateStyle,f.style&&this.setStyle(f.style,{localIdeographFontFamily:f.localIdeographFontFamily}),f.attributionControl&&this.addControl(new cr(typeof f.attributionControl=="boolean"?void 0:f.attributionControl)),f.maplibreLogo&&this.addControl(new xc,f.logoPosition),this.on("style.load",()=>{if(x||this._resizeTransform(),this.transform.unmodified){let S=a.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(S)}}),this.on("data",S=>{this._update(S.dataType==="style"),this.fire(new a.l(`${S.dataType}data`,S))}),this.on("dataloading",S=>{this.fire(new a.l(`${S.dataType}dataloading`,S))}),this.on("dataabort",S=>{this.fire(new a.l("sourcedataabort",S))})}_getMapId(){return this._mapId}addControl(m,r){if(r===void 0&&(r=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new a.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let o=m.onAdd(this);this._controls.push(m);let f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(o,f.firstChild):f.appendChild(o),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new a.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(m);return r>-1&&this._controls.splice(r,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}calculateCameraOptionsFromTo(m,r,o,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(m,r,o,f)}resize(m,r=!0){let[o,f]=this._containerDimensions(),d=this._getClampedPixelRatio(o,f);if(this._resizeCanvas(o,f,d),this.painter.resize(o,f,d),this.painter.overLimit()){let x=this.painter.context.gl;this._maxCanvasSize=[x.drawingBufferWidth,x.drawingBufferHeight];let S=this._getClampedPixelRatio(o,f);this._resizeCanvas(o,f,S),this.painter.resize(o,f,S)}this._resizeTransform(r);let v=!this._moving;return v&&(this.stop(),this.fire(new a.l("movestart",m)).fire(new a.l("move",m))),this.fire(new a.l("resize",m)),v&&this.fire(new a.l("moveend",m)),this}_resizeTransform(m=!0){var r;let[o,f]=this._containerDimensions();this.transform.resize(o,f,m),(r=this._requestedCameraState)===null||r===void 0||r.resize(o,f,m)}_getClampedPixelRatio(m,r){let{0:o,1:f}=this._maxCanvasSize,d=this.getPixelRatio(),v=m*d,x=r*d;return Math.min(v>o?o/v:1,x>f?f/x:1)*d}getPixelRatio(){var m;return(m=this._overridePixelRatio)!==null&&m!==void 0?m:devicePixelRatio}setPixelRatio(m){this._overridePixelRatio=m,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(m){return this.transform.setMaxBounds(ar.convert(m)),this._update()}setMinZoom(m){if((m=m==null?-2:m)>=-2&&m<=this.transform.maxZoom)return this.transform.setMinZoom(m),this._update(),this.getZoom()<m&&this.setZoom(m),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m==null?22:m)>=this.transform.minZoom)return this.transform.setMaxZoom(m),this._update(),this.getZoom()>m&&this.setZoom(m),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m==null?0:m)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.setMinPitch(m),this._update(),this.getPitch()<m&&this.setPitch(m),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m==null?60:m)>180)throw new Error("maxPitch must be less than or equal to 180");if(m>=this.transform.minPitch)return this.transform.setMaxPitch(m),this._update(),this.getPitch()>m&&this.setPitch(m),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.setRenderWorldCopies(m),this._update()}project(m){return this.transform.locationToScreenPoint(a.Q.convert(m),this.style&&this.terrain)}unproject(m){return this.transform.screenPointToLocation(a.P.convert(m),this.terrain)}isMoving(){var m;return this._moving||((m=this.handlers)===null||m===void 0?void 0:m.isMoving())}isZooming(){var m;return this._zooming||((m=this.handlers)===null||m===void 0?void 0:m.isZooming())}isRotating(){var m;return this._rotating||((m=this.handlers)===null||m===void 0?void 0:m.isRotating())}_createDelegatedListener(m,r,o){if(m==="mouseenter"||m==="mouseover"){let f=!1;return{layers:r,listener:o,delegates:{mousemove:v=>{let x=r.filter(E=>this.getLayer(E)),S=x.length!==0?this.queryRenderedFeatures(v.point,{layers:x}):[];S.length?f||(f=!0,o.call(this,new Qr(m,this,v.originalEvent,{features:S}))):f=!1},mouseout:()=>{f=!1}}}}if(m==="mouseleave"||m==="mouseout"){let f=!1;return{layers:r,listener:o,delegates:{mousemove:x=>{let S=r.filter(E=>this.getLayer(E));(S.length!==0?this.queryRenderedFeatures(x.point,{layers:S}):[]).length?f=!0:f&&(f=!1,o.call(this,new Qr(m,this,x.originalEvent)))},mouseout:x=>{f&&(f=!1,o.call(this,new Qr(m,this,x.originalEvent)))}}}}{let f=d=>{let v=r.filter(S=>this.getLayer(S)),x=v.length!==0?this.queryRenderedFeatures(d.point,{layers:v}):[];x.length&&(d.features=x,o.call(this,d),delete d.features)};return{layers:r,listener:o,delegates:{[m]:f}}}}_saveDelegatedListener(m,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(r)}_removeDelegatedListener(m,r,o){if(!this._delegatedListeners||!this._delegatedListeners[m])return;let f=this._delegatedListeners[m];for(let d=0;d<f.length;d++){let v=f[d];if(v.listener===o&&v.layers.length===r.length&&v.layers.every(x=>r.includes(x))){for(let x in v.delegates)this.off(x,v.delegates[x]);return void f.splice(d,1)}}}on(m,r,o){if(o===void 0)return super.on(m,r);let f=typeof r=="string"?[r]:r,d=this._createDelegatedListener(m,f,o);this._saveDelegatedListener(m,d);for(let v in d.delegates)this.on(v,d.delegates[v]);return{unsubscribe:()=>{this._removeDelegatedListener(m,f,o)}}}once(m,r,o){if(o===void 0)return super.once(m,r);let f=typeof r=="string"?[r]:r,d=this._createDelegatedListener(m,f,o);for(let v in d.delegates){let x=d.delegates[v];d.delegates[v]=(...S)=>{this._removeDelegatedListener(m,f,o),x(...S)}}this._saveDelegatedListener(m,d);for(let v in d.delegates)this.once(v,d.delegates[v]);return this}off(m,r,o){return o===void 0?super.off(m,r):(this._removeDelegatedListener(m,typeof r=="string"?[r]:r,o),this)}queryRenderedFeatures(m,r){if(!this.style)return[];let o,f=m instanceof a.P||Array.isArray(m),d=f?m:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:m)||{},d instanceof a.P||typeof d[0]=="number")o=[a.P.convert(d)];else{let v=a.P.convert(d[0]),x=a.P.convert(d[1]);o=[v,new a.P(x.x,v.y),x,new a.P(v.x,x.y),v]}return this.style.queryRenderedFeatures(o,r,this.transform)}querySourceFeatures(m,r){return this.style.querySourceFeatures(m,r)}setStyle(m,r){return(r=a.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&m?(this._diffStyle(m,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(m,r))}setTransformRequest(m){return this._requestManager.setTransformRequest(m),this}_getUIString(m){let r=this._locale[m];if(r==null)throw new Error(`Missing UI string '${m}'`);return r}_updateStyle(m,r){var o,f;if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(m,r));let d=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!m)),m?(this.style=new Mp(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m,r,d):this.style.loadJSON(m,r,d),this):((f=(o=this.style)===null||o===void 0?void 0:o.projection)===null||f===void 0||f.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Mp(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,r){if(typeof m=="string"){let o=this._requestManager.transformRequest(m,"Style");a.j(o,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new a.k(f))})}else typeof m=="object"&&this._updateDiff(m,r)}_updateDiff(m,r){try{this.style.setState(m,r)&&this._update(!0)}catch(o){a.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(m,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():a.w("There is no style added to the map.")}addSource(m,r){return this._lazyInitEmptyStyle(),this.style.addSource(m,r),this._update(!0)}isSourceLoaded(m){let r=this.style&&this.style.sourceCaches[m];if(r!==void 0)return r.loaded();this.fire(new a.k(new Error(`There is no source with ID '${m}'`)))}setTerrain(m){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),m){let r=this.style.sourceCaches[m.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${m.source}`);this.terrain===null&&r.reload();for(let o in this.style._layers){let f=this.style._layers[o];f.type==="hillshade"&&f.source===m.source&&a.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new O_(this.painter,r,m),this.painter.renderToTexture=new df(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=o=>{var f;o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==m.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((f=o.source)===null||f===void 0?void 0:f.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new a.l("terrain",{terrain:m})),this}getTerrain(){var m,r;return(r=(m=this.terrain)===null||m===void 0?void 0:m.options)!==null&&r!==void 0?r:null}areTilesLoaded(){let m=this.style&&this.style.sourceCaches;for(let r in m){let o=m[r]._tiles;for(let f in o){let d=o[f];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(m){return this.style.removeSource(m),this._update(!0)}getSource(m){return this.style.getSource(m)}setSourceTileLodParams(m,r,o){if(o){let f=this.getSource(o);if(!f)throw new Error(`There is no source with ID "${o}", cannot set LOD parameters`);f.calculateTileZoom=ve(Math.max(1,m),Math.max(1,r))}else for(let f in this.style.sourceCaches)this.style.sourceCaches[f].getSource().calculateTileZoom=ve(Math.max(1,m),Math.max(1,r));return this._update(!0),this}refreshTiles(m,r){let o=this.style.sourceCaches[m];if(!o)throw new Error(`There is no source cache with ID "${m}", cannot refresh tile`);r===void 0?o.reload():o.refreshTiles(r.map(f=>new a.a1(f.z,f.x,f.y)))}addImage(m,r,o={}){let{pixelRatio:f=1,sdf:d=!1,stretchX:v,stretchY:x,content:S,textFitWidth:E,textFitHeight:A}=o;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||a.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:R,height:z,data:L}=r,U=r;return this.style.addImage(m,{data:new a.R({width:R,height:z},new Uint8Array(L)),pixelRatio:f,stretchX:v,stretchY:x,content:S,textFitWidth:E,textFitHeight:A,sdf:d,version:0,userImage:U}),U.onAdd&&U.onAdd(this,m),this}}{let{width:R,height:z,data:L}=O.getImageData(r);this.style.addImage(m,{data:new a.R({width:R,height:z},L),pixelRatio:f,stretchX:v,stretchY:x,content:S,textFitWidth:E,textFitHeight:A,sdf:d,version:0})}}updateImage(m,r){let o=this.style.getImage(m);if(!o)return this.fire(new a.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let f=r instanceof HTMLImageElement||a.b(r)?O.getImageData(r):r,{width:d,height:v,data:x}=f;if(d===void 0||v===void 0)return this.fire(new a.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==o.data.width||v!==o.data.height)return this.fire(new a.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));let S=!(r instanceof HTMLImageElement||a.b(r));return o.data.replace(x,S),this.style.updateImage(m,o),this}getImage(m){return this.style.getImage(m)}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new a.k(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m){return ae.getImage(this._requestManager.transformRequest(m,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(m,r){return this._lazyInitEmptyStyle(),this.style.addLayer(m,r),this._update(!0)}moveLayer(m,r){return this.style.moveLayer(m,r),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(m,r,o){return this.style.setLayerZoomRange(m,r,o),this._update(!0)}setFilter(m,r,o={}){return this.style.setFilter(m,r,o),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,r,o,f={}){return this.style.setPaintProperty(m,r,o,f),this._update(!0)}getPaintProperty(m,r){return this.style.getPaintProperty(m,r)}setLayoutProperty(m,r,o,f={}){return this.style.setLayoutProperty(m,r,o,f),this._update(!0)}getLayoutProperty(m,r){return this.style.getLayoutProperty(m,r)}setGlyphs(m,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(m,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(m,r,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(m,r,o,f=>{f||this._update(!0)}),this}removeSprite(m){return this._lazyInitEmptyStyle(),this.style.removeSprite(m),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(m,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(m,r,o=>{o||this._update(!0)}),this}setLight(m,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(m,r={}){return this._lazyInitEmptyStyle(),this.style.setSky(m,r),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(m,r){return this.style.setFeatureState(m,r),this._update()}removeFeatureState(m,r){return this.style.removeFeatureState(m,r),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let m=0,r=0;return this._container&&(m=this._container.clientWidth||400,r=this._container.clientHeight||300),[m,r]}_setupContainer(){let m=this._container;m.classList.add("maplibregl-map");let r=this._canvasContainer=k.create("div","maplibregl-canvas-container",m);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=k.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let o=this._containerDimensions(),f=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],f);let d=this._controlContainer=k.create("div","maplibregl-control-container",m),v=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{v[x]=k.create("div",`maplibregl-ctrl-${x} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,r,o){this._canvas.width=Math.floor(o*m),this._canvas.height=Math.floor(o*r),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${r}px`}_setupPainter(){let m=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0}),r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:m},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});let o=null;if(o=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,m):this._canvas.getContext("webgl2",m)||this._canvas.getContext("webgl",m),!o){let f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Wp(o,this.transform),$.testSupport(o)}migrateProjection(m,r){super.migrateProjection(m,r),this.painter.transform=m,this.fire(new a.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_render(m){var r,o,f,d,v;let x=this._idleTriggered?this._fadeDuration:0,S=((r=this.style.projection)===null||r===void 0?void 0:r.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(m),this._removed)return;let E=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let z=this.transform.zoom,L=O.now();this.style.zoomHistory.update(z,L);let U=new a.C(z,{now:L,fadeDuration:x,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),V=U.crossFadingFactor();V===1&&V===this._crossFadingFactor||(E=!0,this._crossFadingFactor=V),this.style.update(U)}let A=((o=this.style.projection)===null||o===void 0?void 0:o.transitionState)>0!==S;(f=this.style.projection)===null||f===void 0||f.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((d=this.style.projection)===null||d===void 0?void 0:d.transitionState,(v=this.style.projection)===null||v===void 0?void 0:v.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||A)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,x,this._crossSourceCollisions,A),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,showPadding:this.showPadding}),this.fire(new a.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.cn.mark(a.co.load),this.fire(new a.l("load"))),this.style&&(this.style.hasTransitions()||E)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let R=this._sourcesDirty||this._styleDirty||this._placementDirty;return R||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.l("idle")),!this._loaded||this._fullyLoaded||R||(this._fullyLoaded=!0,a.cn.mark(a.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var m;this._hash&&this._hash.remove();for(let o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),ae.removeThrottleControl(this._imageQueueHandle),(m=this._resizeObserver)===null||m===void 0||m.disconnect();let r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),k.remove(this._canvasContainer),k.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),a.cn.clearMetrics(),this._removed=!0,this.fire(new a.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,O.frame(this._frameRequest,m=>{a.cn.frame(m),this._frameRequest=null;try{this._render(m)}catch(r){if(!a.cp(r)&&!function(o){return o.message===Wh}(r))throw r}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get version(){return mt}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(m){return this._lazyInitEmptyStyle(),this.style.setProjection(m),this._update(!0)}},c.MapMouseEvent=Qr,c.MapTouchEvent=Il,c.MapWheelEvent=Jp,c.Marker=qs,c.NavigationControl=class{constructor(m){this._updateZoomButtons=()=>{let r=this._map.getZoom(),o=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(r,o)=>{let f=this._map._getUIString(`NavigationControl.${o}`);r.title=f,r.setAttribute("aria-label",f)},this.options=a.e({},om,m),this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),k.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),k.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=k.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new sm(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){k.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(m,r){let o=k.create("button",m,this._container);return o.type="button",o.addEventListener("click",r),o}},c.Popup=class extends a.E{constructor(m){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&k.remove(this._content),this._container&&(k.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new a.l("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=k.create("div","maplibregl-popup",this._map.getContainer()),this._tip=k.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let x of this.options.className.split(" "))this._container.classList.add(x);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=lm(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!r)return;let o=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationToScreenPoint(this._lngLat));let f=this.options.anchor,d=Ol(this.options.offset);if(!f){let x=this._container.offsetWidth,S=this._container.offsetHeight,E;E=o.y+d.bottom.y<S?["top"]:o.y>this._map.transform.height-S?["bottom"]:[],o.x<x/2?E.push("left"):o.x>this._map.transform.width-x/2&&E.push("right"),f=E.length===0?"bottom":E.join("-")}let v=o.add(d[f]);this.options.subpixelPositioning||(v=v.round()),k.setTransform(this._container,`${Bn[f]} translate(${v.x}px,${v.y}px)`),k_(this._container,f,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=a.e(Object.create(um),m)}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new a.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(m){return this._lngLat=a.Q.convert(m),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(document.createTextNode(m))}setHTML(m){let r=document.createDocumentFragment(),o=document.createElement("body"),f;for(o.innerHTML=m;f=o.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var m;return(m=this._container)===null||m===void 0?void 0:m.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=k.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(m),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(m){return this._container&&this._container.classList.add(m),this}removeClassName(m){return this._container&&this._container.classList.remove(m),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){if(this._container)return this._container.classList.toggle(m)}setSubpixelPositioning(m){this.options.subpixelPositioning=m}_createCloseButton(){this.options.closeButton&&(this._closeButton=k.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let m=this._container.querySelector(cm);m&&m.focus()}},c.RasterDEMTileSource=$u,c.RasterTileSource=Dn,c.ScaleControl=class{constructor(m){this._onMove=()=>{Sc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,Sc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},wc),m)}getDefaultPosition(){return"bottom-left"}onAdd(m){return this._map=m,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){k.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},c.ScrollZoomHandler=Lt,c.Style=Mp,c.TerrainControl=class{constructor(m){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=m}onAdd(m){return this._map=m,this._container=k.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=k.create("button","maplibregl-ctrl-terrain",this._container),k.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){k.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},c.TwoFingersTouchPitchHandler=uf,c.TwoFingersTouchRotateHandler=rt,c.TwoFingersTouchZoomHandler=Cl,c.TwoFingersTouchZoomRotateHandler=nm,c.VectorTileSource=Ao,c.VideoSource=ba,c.addSourceType=(m,r)=>a._(void 0,void 0,void 0,function*(){if(Ya(m))throw new Error(`A source type called "${m}" already exists.`);((o,f)=>{fs[o]=f})(m,r)}),c.clearPrewarmedResources=function(){let m=na;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(nl),na=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},c.createTileMesh=Qu,c.getMaxParallelImageRequests=function(){return a.a.MAX_PARALLEL_IMAGE_REQUESTS},c.getRTLTextPluginStatus=function(){return Xa().getRTLTextPluginStatus()},c.getVersion=function(){return hm},c.getWorkerCount=function(){return ia.workerCount},c.getWorkerUrl=function(){return a.a.WORKER_URL},c.importScriptInWorkers=function(m){return al().broadcast("IS",m)},c.prewarm=function(){Po().acquire(nl)},c.setMaxParallelImageRequests=function(m){a.a.MAX_PARALLEL_IMAGE_REQUESTS=m},c.setRTLTextPlugin=function(m,r){return Xa().setRTLTextPlugin(m,r)},c.setWorkerCount=function(m){ia.workerCount=m},c.setWorkerUrl=function(m){a.a.WORKER_URL=m}});var u=e;return u})});var yde=I((mNt,gde)=>{var gL=1/0,Wmt=17976931348623157e292,ude=NaN,Kmt="[object Symbol]",Ymt=/^\s+|\s+$/g,Xmt=/^[-+]0x[0-9a-f]+$/i,Jmt=/^0b[01]+$/i,Qmt=/^0o[0-7]+$/i,evt=parseInt,tvt=typeof global=="object"&&global&&global.Object===Object&&global,rvt=typeof self=="object"&&self&&self.Object===Object&&self,ivt=tvt||rvt||Function("return this")(),nvt=Object.prototype,avt=nvt.toString,cde=ivt.Symbol,ovt=Math.min,hde=cde?cde.prototype:void 0,fde=hde?hde.toString:void 0;function svt(e){if(typeof e=="string")return e;if(mde(e))return fde?fde.call(e):"";var t=e+"";return t=="0"&&1/e==-gL?"-0":t}function lvt(e){var t=Math[e];return function(n,u){if(n=vde(n),u=ovt(hvt(u),292),u){var c=(pde(n)+"e").split("e"),a=t(c[0]+"e"+(+c[1]+u));return c=(pde(a)+"e").split("e"),+(c[0]+"e"+(+c[1]-u))}return t(n)}}function dde(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function uvt(e){return!!e&&typeof e=="object"}function mde(e){return typeof e=="symbol"||uvt(e)&&avt.call(e)==Kmt}function cvt(e){if(!e)return e===0?e:0;if(e=vde(e),e===gL||e===-gL){var t=e<0?-1:1;return t*Wmt}return e===e?e:0}function hvt(e){var t=cvt(e),n=t%1;return t===t?n?t-n:t:0}function vde(e){if(typeof e=="number")return e;if(mde(e))return ude;if(dde(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=dde(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(Ymt,"");var n=Jmt.test(e);return n||Qmt.test(e)?evt(e.slice(2),n?2:8):Xmt.test(e)?ude:+e}function pde(e){return e==null?"":svt(e)}var fvt=lvt("round");gde.exports=fvt});var Ovt={};Ime(Ovt,{SettingsProvider:()=>Pvt,renderGeoreferenceRanking:()=>Avt,renderProgressBar:()=>Cvt,renderUnreferencedMaps:()=>Mvt,renderUserHistory:()=>Rvt});var Uy=uo(kc(),1),$y=uo(E3(),1),Y3t=uo(tfe(),1);var xde=uo(dL(),1);var jy=uo(lde(),1);var dvt=uo(yde(),1);function xp(e){return e!=null}function _de(e){return typeof e=="string"||e instanceof String}function Yr(e){let t=Ei.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let n=t[e];return n===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):n}var mvt={EN:"en",DE:"de"},vvt=typeof process!="undefined"&&xp(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&xp(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",rS=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),kn={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:mvt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},Ei={axiosApiInstance:null,appendSettings(e){kn=Object.assign({},kn,e)},getSettings(){return kn},getBaseMaps(){return kn.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},kn.MAPVIEW_PARAMS)},getLanguageDict(){return kn.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return kn.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},kn.TERRAIN_TILES)},getUsername(){return kn.USERNAME},isUserAuthenticated(){return kn.USER_ISAUTHENTICATED===!0},updateSettings(e){kn=e},_initAxiosApiInstance(){let e=kn.API_GEOREFERENCE_BASEURL,t=_de(e)&&e.length===0;if(!xp(e)||t)throw new Error("The URL for the georeference service is not set.");let n=Object.assign({baseURL:e,withCredentials:!0},vvt?{headers:{get:rS(),post:rS(),put:rS(),delete:rS()}}:{});this.axiosApiInstance=xde.default.create(n)},getGeoreferenceApiClient(){return xp(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=kn.MARKER_URL;if(!xp(e))throw new Error("The marker icon url is not set.");return{id:kn.MARKER_IMAGE_ID,url:e}},getUserRole(){return kn.USER_ROLE}};var Xr=uo(kc(),1);function iS(){return fa(this,null,function*(){let n=yield Ei.getGeoreferenceApiClient().get("/statistics/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch statistics from the georeference endpoint.")})}function bde(){return fa(this,null,function*(){let n=yield Ei.getGeoreferenceApiClient().get("/user/history/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch the user history from the georeference endpoint.")})}var gvt=()=>{let[e,t]=(0,Xr.useState)([]);return(0,Xr.useEffect)(()=>{fa(null,null,function*(){let u=yield iS();t(u.georeference_points)})},[]),Xr.default.createElement("div",{className:"vkf-apps-georeferenceranking"},Xr.default.createElement("div",{className:"table-wrapper"},Xr.default.createElement("table",null,Xr.default.createElement("thead",null,Xr.default.createElement("tr",null,Xr.default.createElement("th",{className:"rank"},Yr("georeferenceranking-label-place")),Xr.default.createElement("th",{className:"user"},Yr("georeferenceranking-label-user")),Xr.default.createElement("th",{className:"transformation-new"},Yr("georeferenceranking-label-transformation-new")),Xr.default.createElement("th",{className:"transformation-update"},Yr("georeferenceranking-label-transformation-update")),Xr.default.createElement("th",{className:"points"},Yr("georeferenceranking-label-points")))),Xr.default.createElement("tbody",null,e.map((n,u)=>Xr.default.createElement("tr",{key:u},Xr.default.createElement("td",{className:"rank"},u+1),Xr.default.createElement("td",{className:"user"},n.user_id),Xr.default.createElement("td",{className:"transformation-new"},n.transformation_new),Xr.default.createElement("td",{className:"transformation-update"},n.transformation_updates),Xr.default.createElement("td",{className:"points"},n.total_points)))))))},wde=gvt;var lr=uo(kc(),1);var yvt=()=>{let[e,t]=(0,lr.useState)(null),n=Ei.getSettings().LANGUAGE_CODE;return(0,lr.useEffect)(()=>{fa(null,null,function*(){let c=yield iS();console.log(c);let a=c.georeference_map_count,_=c.not_georeference_map_count;t({mapsDone:a,mapsTodo:_,progress:Math.floor(a/(a+_)*100),ranking:c.georeference_points,totalPoints:a+_})})},[t]),lr.default.createElement("div",{className:"vkf-apps-progressbar"},e!==null&&lr.default.createElement("div",null,lr.default.createElement("div",{className:"progressbar-container"},lr.default.createElement("h4",null,n==="de"?"Fortschritt in der Georeferenzierung":"Progress in georeferencing"),lr.default.createElement("p",{className:"results"},n==="de"?lr.default.createElement("span",null,"Bereits ",lr.default.createElement("strong",null,e.mapsDone)," von"," ",lr.default.createElement("strong",null,e.totalPoints)," Karten georeferenziert."):lr.default.createElement("span",null,"Already ",lr.default.createElement("strong",null,e.mapsDone)," of"," ",lr.default.createElement("strong",null,e.totalPoints)," maps georeferenced.")),lr.default.createElement("div",{className:"bar"},lr.default.createElement("div",{className:"done",style:{width:`${e.progress}%`}}))),lr.default.createElement("div",{className:"overview-ranking"},lr.default.createElement("div",null,lr.default.createElement("h4",null,n==="de"?"Die Top-Georeferenzierer":"The Top-Georeferencer"),lr.default.createElement("ol",null,e.ranking.slice(0,3).map((u,c)=>lr.default.createElement("li",{key:c},lr.default.createElement("span",null,lr.default.createElement("strong",{className:"user"},u.user_id,":")," ",u.total_points," ",n==="de"?"Punkte":"points"))),e.ranking.length>3&&lr.default.createElement("li",{className:"further-items"},"[...]")),lr.default.createElement("div",{className:"forwarding"},lr.default.createElement("p",null,n==="de"?"Jetzt mithelfen und selbst Punkte sammeln.":"Take part and collect points.","\xA0",lr.default.createElement("a",{title:"Frequently Asked Questions (FAQ)",href:Ei.getSettings().LINK_TO_FAQ},n==="de"?"So einfach geht's":"Start now.")))))))},Sde=yvt;var Jt=uo(kc(),1);var Tde=uo(dL(),1);function Ide(e=500){return fa(this,null,function*(){let t=Ei.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let n=yield Tde.default.post(`${t}/_search?size=${e}`,{query:{term:{has_georeference:!1}}});return n.status===200&&n.data.hits.total.value>0?n.data.hits.hits.map(u=>u._source):(console.error("Something went wrong while trying to fetch search document."),[])})}var _vt=Math.pow(10,8)*24*60*60*1e3,p3t=-_vt;var xvt=3600;var Ede=xvt*24,m3t=Ede*7,bvt=Ede*365.2425,wvt=bvt/12,v3t=wvt*3,yL=Symbol.for("constructDateFrom");function nS(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&yL in e?e[yL](t):e instanceof Date?new e.constructor(t):new Date(t)}function bp(e,t){return nS(t||e,e)}function qde(e,...t){let n=nS.bind(null,e||t.find(u=>typeof u=="object"));return t.map(n)}function _L(e,t){let n=bp(e,t==null?void 0:t.in);return n.setHours(0,0,0,0),n}function xL(e,t,n){let[u,c]=qde(n==null?void 0:n.in,e,t);return+_L(u)==+_L(c)}function Pde(e,t){let n=bp(e,t==null?void 0:t.in),u=n.getFullYear();return n.setFullYear(u+1,0,0),n.setHours(23,59,59,999),n}function Ade(e,t){let n=bp(e,t==null?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}var Svt=(e,t)=>{let n=Ade(e),u=Pde(e);return xL(e,n)&&xL(t,u)?e:`${e} \u2013 ${t}`},Tvt=()=>{let[e,t]=(0,Jt.useState)([]),[n,u]=(0,Jt.useState)([]),[c,a]=(0,Jt.useState)(""),_=Ei.getSettings().USERNAME,w=Ei.getSettings().LINK_TO_GEOREFERENCE,q=(0,Jt.useRef)(null),M=O=>{let k=O.target.value;a(k),q.current!==null&&(clearTimeout(q.current),q.current=null),q.current=setTimeout(()=>{u(e.filter($=>$.title.toLowerCase().includes(k.toLowerCase())))},200)};return(0,Jt.useEffect)(()=>{fa(null,null,function*(){let k=yield Ide();t(k),u(k)})},[]),Jt.default.createElement("div",{className:"vkf-apps-unreferenced-maps"},Jt.default.createElement("h3",null,Yr("unreferencedmaps-title")," #",_),Jt.default.createElement("span",{className:"status-feedback"},Yr("unreferencedmaps-subtitle"),": ",e.length),Jt.default.createElement("div",{className:"quick-search"},Jt.default.createElement("label",{htmlFor:"quick-search-field"},Yr("unreferencedmaps-search-placeholder")),Jt.default.createElement("input",{id:"quick-search-field",value:c,onChange:M,type:"text",placeholder:Yr("unreferencedmaps-search-placeholder")})),Jt.default.createElement("ul",{className:"maps-list"},n.map((O,k)=>Jt.default.createElement("li",{key:k,className:"map-item"},Jt.default.createElement("figure",{className:"map-image"},Jt.default.createElement("a",{href:`${w}?map_id=${O.map_id}`,target:"_blank",rel:"noreferrer"},Jt.default.createElement("img",{alt:"Map Image",src:O.thumb_url,loading:"lazy"}))),Jt.default.createElement("div",{className:"map-meta"},Jt.default.createElement("h4",null,O.title),Jt.default.createElement("p",null,Jt.default.createElement("span",{className:"map-meta-label"},Yr("unreferencedmaps-label-time"),":"," "),Jt.default.createElement("span",{className:"map-meta-value"},Svt(O.time_period_start,O.time_period_end))),Jt.default.createElement("p",null,Jt.default.createElement("span",{className:"map-meta-label"},Yr("unreferencedmaps-label-maptype"),":"," "),Jt.default.createElement("span",{className:"map-meta-value"},O.map_type)),Jt.default.createElement("p",null,Jt.default.createElement("span",{className:"map-meta-label"},"ID: "),Jt.default.createElement("span",{className:"map-meta-value"},O.map_id))),Jt.default.createElement("div",{className:"map-links"},Jt.default.createElement("a",{href:`${w}?map_id=${O.map_id}`,target:"_blank",rel:"noreferrer"},Yr("unreferencedmaps-btn-georeference")))))))},Cde=Tvt;var Tr=uo(kc(),1);function Mde(e){var t,n,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Mde(e[t]))&&(u&&(u+=" "),u+=n);else for(t in e)e[t]&&(u&&(u+=" "),u+=t);return u}function Ivt(){for(var e,t,n=0,u="";n<arguments.length;)(e=arguments[n++])&&(t=Mde(e))&&(u&&(u+=" "),u+=t);return u}var Rde=Ivt;var Evt={valid:"label-success",invalid:"label-warning",missing:"label-danger"},qvt=()=>{let[e,t]=(0,Tr.useState)({maps:[],points:0}),n=Ei.getSettings().USERNAME,u=Ei.getSettings().LINK_TO_GEOREFERENCE,c=Ei.getSettings().LINK_TO_MAIN;return(0,Tr.useEffect)(()=>{fa(null,null,function*(){let _=yield bde();t({maps:_.georef_profile,points:_.points})})},[]),Tr.default.createElement("div",{className:"vkf-apps-userhistory"},Tr.default.createElement("h3",null,Yr("userhistory-title")," #",n),Tr.default.createElement("span",{className:"status-feedback"},Yr("userhistory-subtitle"),": ",e.points),Tr.default.createElement("ul",{className:"maps-list"},e.maps.map((a,_)=>Tr.default.createElement("li",{key:_,className:"map-item"},Tr.default.createElement("figure",{className:"map-image"},Tr.default.createElement("img",{alt:"Map Image",src:a.metadata.thumbnail,loading:"lazy"})),Tr.default.createElement("div",{className:"map-meta"},Tr.default.createElement("h4",null,a.metadata.title),Tr.default.createElement("p",null,Tr.default.createElement("span",{className:"map-meta-label"},"Created: "),Tr.default.createElement("span",{className:"map-meta-value"},a.transformation.submitted)),Tr.default.createElement("p",null,Tr.default.createElement("span",{className:"map-meta-label"},Yr("userhistory-label-mapId"),":"," "),Tr.default.createElement("span",{className:"map-meta-value"},a.map_id)),Tr.default.createElement("p",null,Tr.default.createElement("span",{className:"map-meta-label"},Yr("userhistory-label-validation"),":"," "),Tr.default.createElement("span",{className:Rde("label",Evt[a.transformation.validation])},a.transformation.validation))),Tr.default.createElement("div",{className:"map-links"},Tr.default.createElement("a",{href:`${c}?map_id=${a.map_id}`,target:"_blank",rel:"noreferrer"},Yr("userhistory-link-showMap")),Tr.default.createElement("a",{href:`${u}?transformation_id=${a.transformation.id}&map_id=${a.map_id}`,rel:"noreferrer",target:"_blank"},Yr("userhistory-link-goToProcess")))))))},Ode=qvt;var Pvt=Ei;function Avt(e){$y.default.render(Uy.default.createElement(wde,null),e)}function Cvt(e){$y.default.render(Uy.default.createElement(Sde,null),e)}function Mvt(e){$y.default.render(Uy.default.createElement(Cde,null),e)}function Rvt(e){$y.default.render(Uy.default.createElement(Ode,null),e)}return Eme(Ovt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
   *)
*/