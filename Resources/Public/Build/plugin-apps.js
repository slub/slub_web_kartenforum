var vk2=(()=>{var Dde=Object.create;var tm=Object.defineProperty,Lde=Object.defineProperties,zde=Object.getOwnPropertyDescriptor,Fde=Object.getOwnPropertyDescriptors,Nde=Object.getOwnPropertyNames,$L=Object.getOwnPropertySymbols,Bde=Object.getPrototypeOf,GL=Object.prototype.hasOwnProperty,jde=Object.prototype.propertyIsEnumerable;var m_=Math.pow,VL=(e,t,n)=>t in e?tm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,CS=(e,t)=>{for(var n in t||(t={}))GL.call(t,n)&&VL(e,n,t[n]);if($L)for(var n of $L(t))jde.call(t,n)&&VL(e,n,t[n]);return e},MS=(e,t)=>Lde(e,Fde(t));var S=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ude=(e,t)=>{for(var n in t)tm(e,n,{get:t[n],enumerable:!0})},HL=(e,t,n,u)=>{if(t&&typeof t=="object"||typeof t=="function")for(let l of Nde(t))!GL.call(e,l)&&l!==n&&tm(e,l,{get:()=>t[l],enumerable:!(u=zde(t,l))||u.enumerable});return e};var ro=(e,t,n)=>(n=e!=null?Dde(Bde(e)):{},HL(t||!e||!e.__esModule?tm(n,"default",{value:e,enumerable:!0}):n,e)),$de=e=>HL(tm({},"__esModule",{value:!0}),e);var oa=(e,t,n)=>new Promise((u,l)=>{var o=E=>{try{b(n.next(E))}catch(T){l(T)}},_=E=>{try{b(n.throw(E))}catch(T){l(T)}},b=E=>E.done?u(E.value):Promise.resolve(E.value).then(o,_);b((n=n.apply(e,t)).next())});var OS=S((ppt,ZL)=>{"use strict";var WL=Object.getOwnPropertySymbols,Vde=Object.prototype.hasOwnProperty,Gde=Object.prototype.propertyIsEnumerable;function Hde(e){if(e==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function Wde(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de",Object.getOwnPropertyNames(e)[0]==="5")return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var u=Object.getOwnPropertyNames(t).map(function(o){return t[o]});if(u.join("")!=="0123456789")return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(o){l[o]=o}),Object.keys(Object.assign({},l)).join("")==="abcdefghijklmnopqrst"}catch(o){return!1}}ZL.exports=Wde()?Object.assign:function(e,t){for(var n,u=Hde(e),l,o=1;o<arguments.length;o++){n=Object(arguments[o]);for(var _ in n)Vde.call(n,_)&&(u[_]=n[_]);if(WL){l=WL(n);for(var b=0;b<l.length;b++)Gde.call(n,l[b])&&(u[l[b]]=n[l[b]])}}return u}});var cz=S(Wt=>{"use strict";var kS=OS(),ef=60103,YL=60106;Wt.Fragment=60107;Wt.StrictMode=60108;Wt.Profiler=60114;var JL=60109,QL=60110,ez=60112;Wt.Suspense=60113;var tz=60115,rz=60116;typeof Symbol=="function"&&Symbol.for&&(Ia=Symbol.for,ef=Ia("react.element"),YL=Ia("react.portal"),Wt.Fragment=Ia("react.fragment"),Wt.StrictMode=Ia("react.strict_mode"),Wt.Profiler=Ia("react.profiler"),JL=Ia("react.provider"),QL=Ia("react.context"),ez=Ia("react.forward_ref"),Wt.Suspense=Ia("react.suspense"),tz=Ia("react.memo"),rz=Ia("react.lazy"));var Ia,KL=typeof Symbol=="function"&&Symbol.iterator;function Zde(e){return e===null||typeof e!="object"?null:(e=KL&&e[KL]||e["@@iterator"],typeof e=="function"?e:null)}function rm(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var iz={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nz={};function tf(e,t,n){this.props=e,this.context=t,this.refs=nz,this.updater=n||iz}tf.prototype.isReactComponent={};tf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error(rm(85));this.updater.enqueueSetState(this,e,t,"setState")};tf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function az(){}az.prototype=tf.prototype;function DS(e,t,n){this.props=e,this.context=t,this.refs=nz,this.updater=n||iz}var LS=DS.prototype=new az;LS.constructor=DS;kS(LS,tf.prototype);LS.isPureReactComponent=!0;var zS={current:null},oz=Object.prototype.hasOwnProperty,sz={key:!0,ref:!0,__self:!0,__source:!0};function uz(e,t,n){var u,l={},o=null,_=null;if(t!=null)for(u in t.ref!==void 0&&(_=t.ref),t.key!==void 0&&(o=""+t.key),t)oz.call(t,u)&&!sz.hasOwnProperty(u)&&(l[u]=t[u]);var b=arguments.length-2;if(b===1)l.children=n;else if(1<b){for(var E=Array(b),T=0;T<b;T++)E[T]=arguments[T+2];l.children=E}if(e&&e.defaultProps)for(u in b=e.defaultProps,b)l[u]===void 0&&(l[u]=b[u]);return{$$typeof:ef,type:e,key:o,ref:_,props:l,_owner:zS.current}}function Kde(e,t){return{$$typeof:ef,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function FS(e){return typeof e=="object"&&e!==null&&e.$$typeof===ef}function Xde(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var XL=/\/+/g;function RS(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Xde(""+e.key):t.toString(36)}function g_(e,t,n,u,l){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var _=!1;if(e===null)_=!0;else switch(o){case"string":case"number":_=!0;break;case"object":switch(e.$$typeof){case ef:case YL:_=!0;}}if(_)return _=e,l=l(_),e=u===""?"."+RS(_,0):u,Array.isArray(l)?(n="",e!=null&&(n=e.replace(XL,"$&/")+"/"),g_(l,t,n,"",function(T){return T})):l!=null&&(FS(l)&&(l=Kde(l,n+(!l.key||_&&_.key===l.key?"":(""+l.key).replace(XL,"$&/")+"/")+e)),t.push(l)),1;if(_=0,u=u===""?".":u+":",Array.isArray(e))for(var b=0;b<e.length;b++){o=e[b];var E=u+RS(o,b);_+=g_(o,t,n,E,l)}else if(E=Zde(e),typeof E=="function")for(e=E.call(e),b=0;!(o=e.next()).done;)o=o.value,E=u+RS(o,b++),_+=g_(o,t,n,E,l);else if(o==="object")throw t=""+e,Error(rm(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t));return _}function v_(e,t,n){if(e==null)return e;var u=[],l=0;return g_(e,u,"","",function(o){return t.call(n,o,l++)}),u}function Yde(e){if(e._status===-1){var t=e._result;t=t(),e._status=0,e._result=t,t.then(function(n){e._status===0&&(n=n.default,e._status=1,e._result=n)},function(n){e._status===0&&(e._status=2,e._result=n)})}if(e._status===1)return e._result;throw e._result}var lz={current:null};function bs(){var e=lz.current;if(e===null)throw Error(rm(321));return e}var Jde={ReactCurrentDispatcher:lz,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:zS,IsSomeRendererActing:{current:!1},assign:kS};Wt.Children={map:v_,forEach:function(e,t,n){v_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return v_(e,function(){t++}),t},toArray:function(e){return v_(e,function(t){return t})||[]},only:function(e){if(!FS(e))throw Error(rm(143));return e}};Wt.Component=tf;Wt.PureComponent=DS;Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jde;Wt.cloneElement=function(e,t,n){if(e==null)throw Error(rm(267,e));var u=kS({},e.props),l=e.key,o=e.ref,_=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,_=zS.current),t.key!==void 0&&(l=""+t.key),e.type&&e.type.defaultProps)var b=e.type.defaultProps;for(E in t)oz.call(t,E)&&!sz.hasOwnProperty(E)&&(u[E]=t[E]===void 0&&b!==void 0?b[E]:t[E])}var E=arguments.length-2;if(E===1)u.children=n;else if(1<E){b=Array(E);for(var T=0;T<E;T++)b[T]=arguments[T+2];u.children=b}return{$$typeof:ef,type:e.type,key:l,ref:o,props:u,_owner:_}};Wt.createContext=function(e,t){return t===void 0&&(t=null),e={$$typeof:QL,_calculateChangedBits:t,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider={$$typeof:JL,_context:e},e.Consumer=e};Wt.createElement=uz;Wt.createFactory=function(e){var t=uz.bind(null,e);return t.type=e,t};Wt.createRef=function(){return{current:null}};Wt.forwardRef=function(e){return{$$typeof:ez,render:e}};Wt.isValidElement=FS;Wt.lazy=function(e){return{$$typeof:rz,_payload:{_status:-1,_result:e},_init:Yde}};Wt.memo=function(e,t){return{$$typeof:tz,type:e,compare:t===void 0?null:t}};Wt.useCallback=function(e,t){return bs().useCallback(e,t)};Wt.useContext=function(e,t){return bs().useContext(e,t)};Wt.useDebugValue=function(){};Wt.useEffect=function(e,t){return bs().useEffect(e,t)};Wt.useImperativeHandle=function(e,t,n){return bs().useImperativeHandle(e,t,n)};Wt.useLayoutEffect=function(e,t){return bs().useLayoutEffect(e,t)};Wt.useMemo=function(e,t){return bs().useMemo(e,t)};Wt.useReducer=function(e,t,n){return bs().useReducer(e,t,n)};Wt.useRef=function(e){return bs().useRef(e)};Wt.useState=function(e){return bs().useState(e)};Wt.version="17.0.2"});var cc=S((vpt,hz)=>{"use strict";hz.exports=cz()});var gz=S(ir=>{"use strict";var nf,am,b_,GS;typeof performance=="object"&&typeof performance.now=="function"?(fz=performance,ir.unstable_now=function(){return fz.now()}):(NS=Date,dz=NS.now(),ir.unstable_now=function(){return NS.now()-dz});var fz,NS,dz;typeof window=="undefined"||typeof MessageChannel!="function"?(rf=null,BS=null,jS=function(){if(rf!==null)try{var e=ir.unstable_now();rf(!0,e),rf=null}catch(t){throw setTimeout(jS,0),t}},nf=function(e){rf!==null?setTimeout(nf,0,e):(rf=e,setTimeout(jS,0))},am=function(e,t){BS=setTimeout(e,t)},b_=function(){clearTimeout(BS)},ir.unstable_shouldYield=function(){return!1},GS=ir.unstable_forceFrameRate=function(){}):(pz=window.setTimeout,mz=window.clearTimeout,typeof console!="undefined"&&(vz=window.cancelAnimationFrame,typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof vz!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")),im=!1,nm=null,y_=-1,US=5,$S=0,ir.unstable_shouldYield=function(){return ir.unstable_now()>=$S},GS=function(){},ir.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):US=0<e?Math.floor(1e3/e):5},VS=new MessageChannel,__=VS.port2,VS.port1.onmessage=function(){if(nm!==null){var e=ir.unstable_now();$S=e+US;try{nm(!0,e)?__.postMessage(null):(im=!1,nm=null)}catch(t){throw __.postMessage(null),t}}else im=!1},nf=function(e){nm=e,im||(im=!0,__.postMessage(null))},am=function(e,t){y_=pz(function(){e(ir.unstable_now())},t)},b_=function(){mz(y_),y_=-1});var rf,BS,jS,pz,mz,vz,im,nm,y_,US,$S,VS,__;function HS(e,t){var n=e.length;e.push(t);e:for(;;){var u=n-1>>>1,l=e[u];if(l!==void 0&&0<x_(l,t))e[u]=t,e[n]=l,n=u;else break e}}function io(e){return e=e[0],e===void 0?null:e}function w_(e){var t=e[0];if(t!==void 0){var n=e.pop();if(n!==t){e[0]=n;e:for(var u=0,l=e.length;u<l;){var o=2*(u+1)-1,_=e[o],b=o+1,E=e[b];if(_!==void 0&&0>x_(_,n))E!==void 0&&0>x_(E,_)?(e[u]=E,e[b]=n,u=b):(e[u]=_,e[o]=n,u=o);else if(E!==void 0&&0>x_(E,n))e[u]=E,e[b]=n,u=b;else break e}}return t}return null}function x_(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}var Oo=[],ku=[],Qde=1,Ea=null,Xi=3,S_=!1,hc=!1,om=!1;function WS(e){for(var t=io(ku);t!==null;){if(t.callback===null)w_(ku);else if(t.startTime<=e)w_(ku),t.sortIndex=t.expirationTime,HS(Oo,t);else break;t=io(ku)}}function ZS(e){if(om=!1,WS(e),!hc)if(io(Oo)!==null)hc=!0,nf(KS);else{var t=io(ku);t!==null&&am(ZS,t.startTime-e)}}function KS(e,t){hc=!1,om&&(om=!1,b_()),S_=!0;var n=Xi;try{for(WS(t),Ea=io(Oo);Ea!==null&&(!(Ea.expirationTime>t)||e&&!ir.unstable_shouldYield());){var u=Ea.callback;if(typeof u=="function"){Ea.callback=null,Xi=Ea.priorityLevel;var l=u(Ea.expirationTime<=t);t=ir.unstable_now(),typeof l=="function"?Ea.callback=l:Ea===io(Oo)&&w_(Oo),WS(t)}else w_(Oo);Ea=io(Oo)}if(Ea!==null)var o=!0;else{var _=io(ku);_!==null&&am(ZS,_.startTime-t),o=!1}return o}finally{Ea=null,Xi=n,S_=!1}}var epe=GS;ir.unstable_IdlePriority=5;ir.unstable_ImmediatePriority=1;ir.unstable_LowPriority=4;ir.unstable_NormalPriority=3;ir.unstable_Profiling=null;ir.unstable_UserBlockingPriority=2;ir.unstable_cancelCallback=function(e){e.callback=null};ir.unstable_continueExecution=function(){hc||S_||(hc=!0,nf(KS))};ir.unstable_getCurrentPriorityLevel=function(){return Xi};ir.unstable_getFirstCallbackNode=function(){return io(Oo)};ir.unstable_next=function(e){switch(Xi){case 1:case 2:case 3:var t=3;break;default:t=Xi;}var n=Xi;Xi=t;try{return e()}finally{Xi=n}};ir.unstable_pauseExecution=function(){};ir.unstable_requestPaint=epe;ir.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3;}var n=Xi;Xi=e;try{return t()}finally{Xi=n}};ir.unstable_scheduleCallback=function(e,t,n){var u=ir.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?u+n:u):n=u,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3;}return l=n+l,e={id:Qde++,callback:t,priorityLevel:e,startTime:n,expirationTime:l,sortIndex:-1},n>u?(e.sortIndex=n,HS(ku,e),io(Oo)===null&&e===io(ku)&&(om?b_():om=!0,am(ZS,n-u))):(e.sortIndex=l,HS(Oo,e),hc||S_||(hc=!0,nf(KS))),e};ir.unstable_wrapCallback=function(e){var t=Xi;return function(){var n=Xi;Xi=t;try{return e.apply(this,arguments)}finally{Xi=n}}}});var _z=S((ypt,yz)=>{"use strict";yz.exports=gz()});var aB=S(Oa=>{"use strict";var v0=cc(),Pr=OS(),gi=_z();function Ue(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!v0)throw Error(Ue(227));var OF=new Set,Lm={};function wc(e,t){If(e,t),If(e+"Capture",t)}function If(e,t){for(Lm[e]=t,e=0;e<t.length;e++)OF.add(t[e])}var Ts=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),tpe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xz=Object.prototype.hasOwnProperty,bz={},wz={};function rpe(e){return xz.call(wz,e)?!0:xz.call(bz,e)?!1:tpe.test(e)?wz[e]=!0:(bz[e]=!0,!1)}function ipe(e,t,n,u){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return u?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1;}}function npe(e,t,n,u){if(t===null||typeof t=="undefined"||ipe(e,t,n,u))return!0;if(u)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t;}return!1}function mn(e,t,n,u,l,o,_){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=u,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=_}var Mi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mi[e]=new mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mi[t]=new mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mi[e]=new mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mi[e]=new mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mi[e]=new mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mi[e]=new mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mi[e]=new mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mi[e]=new mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mi[e]=new mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var nI=/[\-:]([a-z])/g;function aI(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(nI,aI);Mi[t]=new mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(nI,aI);Mi[t]=new mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(nI,aI);Mi[t]=new mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mi[e]=new mn(e,1,!1,e.toLowerCase(),null,!1,!1)});Mi.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mi[e]=new mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function oI(e,t,n,u){var l=Mi.hasOwnProperty(t)?Mi[t]:null,o=l!==null?l.type===0:u?!1:!(!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N");o||(npe(t,n,l,u)&&(n=null),u||l===null?rpe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,u=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,u?e.setAttributeNS(u,t,n):e.setAttribute(t,n))))}var Sc=v0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_m=60103,dc=60106,Lu=60107,sI=60108,qm=60114,uI=60109,lI=60110,g0=60112,Im=60113,W_=60120,y0=60115,cI=60116,hI=60121,fI=60128,RF=60129,dI=60130,yq=60131;typeof Symbol=="function"&&Symbol.for&&(ai=Symbol.for,_m=ai("react.element"),dc=ai("react.portal"),Lu=ai("react.fragment"),sI=ai("react.strict_mode"),qm=ai("react.profiler"),uI=ai("react.provider"),lI=ai("react.context"),g0=ai("react.forward_ref"),Im=ai("react.suspense"),W_=ai("react.suspense_list"),y0=ai("react.memo"),cI=ai("react.lazy"),hI=ai("react.block"),ai("react.scope"),fI=ai("react.opaque.id"),RF=ai("react.debug_trace_mode"),dI=ai("react.offscreen"),yq=ai("react.legacy_hidden"));var ai,Sz=typeof Symbol=="function"&&Symbol.iterator;function sm(e){return e===null||typeof e!="object"?null:(e=Sz&&e[Sz]||e["@@iterator"],typeof e=="function"?e:null)}var XS;function xm(e){if(XS===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);XS=t&&t[1]||""}return`
`+XS+e}var YS=!1;function q_(e,t){if(!e||YS)return"";YS=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t){if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(E){var u=E}Reflect.construct(e,[],t)}else{try{t.call()}catch(E){u=E}e.call(t.prototype)}}else{try{throw Error()}catch(E){u=E}e()}}catch(E){if(E&&u&&typeof E.stack=="string"){for(var l=E.stack.split(`
`),o=u.stack.split(`
`),_=l.length-1,b=o.length-1;1<=_&&0<=b&&l[_]!==o[b];)b--;for(;1<=_&&0<=b;_--,b--)if(l[_]!==o[b]){if(_!==1||b!==1)do if(_--,b--,0>b||l[_]!==o[b])return`
`+l[_].replace(" at new "," at ");while(1<=_&&0<=b);break}}}finally{YS=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?xm(e):""}function ape(e){switch(e.tag){case 5:return xm(e.type);case 16:return xm("Lazy");case 13:return xm("Suspense");case 19:return xm("SuspenseList");case 0:case 2:case 15:return e=q_(e.type,!1),e;case 11:return e=q_(e.type.render,!1),e;case 22:return e=q_(e.type._render,!1),e;case 1:return e=q_(e.type,!0),e;default:return"";}}function mf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Lu:return"Fragment";case dc:return"Portal";case qm:return"Profiler";case sI:return"StrictMode";case Im:return"Suspense";case W_:return"SuspenseList";}if(typeof e=="object")switch(e.$$typeof){case lI:return(e.displayName||"Context")+".Consumer";case uI:return(e._context.displayName||"Context")+".Provider";case g0:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case y0:return mf(e.type);case hI:return mf(e._render);case cI:t=e._payload,e=e._init;try{return mf(e(t))}catch(n){}}return null}function Zu(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return"";}}function kF(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ope(e){var t=kF(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),u=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(_){u=""+_,o.call(this,_)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return u},setValue:function(_){u=""+_},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function I_(e){e._valueTracker||(e._valueTracker=ope(e))}function DF(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),u="";return e&&(u=kF(e)?e.checked?"true":"false":e.value),e=u,e!==n?(t.setValue(e),!0):!1}function Z_(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}function _q(e,t){var n=t.checked;return Pr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function qz(e,t){var n=t.defaultValue==null?"":t.defaultValue,u=t.checked!=null?t.checked:t.defaultChecked;n=Zu(t.value!=null?t.value:n),e._wrapperState={initialChecked:u,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function LF(e,t){t=t.checked,t!=null&&oI(e,"checked",t,!1)}function xq(e,t){LF(e,t);var n=Zu(t.value),u=t.type;if(n!=null)u==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(u==="submit"||u==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?bq(e,t.type,n):t.hasOwnProperty("defaultValue")&&bq(e,t.type,Zu(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Iz(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var u=t.type;if(!(u!=="submit"&&u!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function bq(e,t,n){(t!=="number"||Z_(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function spe(e){var t="";return v0.Children.forEach(e,function(n){n!=null&&(t+=n)}),t}function wq(e,t){return e=Pr({children:void 0},t),(t=spe(t.children))&&(e.children=t),e}function vf(e,t,n,u){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&u&&(e[n].defaultSelected=!0)}else{for(n=""+Zu(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,u&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function Sq(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Ue(91));return Pr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ez(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Ue(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(Ue(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zu(n)}}function zF(e,t){var n=Zu(t.value),u=Zu(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),u!=null&&(e.defaultValue=""+u)}function Tz(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}var qq={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function FF(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml";}}function Iq(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?FF(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var E_,NF=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,u,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,u,l)})}:e}(function(e,t){if(e.namespaceURI!==qq.svg||"innerHTML"in e)e.innerHTML=t;else{for(E_=E_||document.createElement("div"),E_.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=E_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zm(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Em={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},upe=["Webkit","ms","Moz","O"];Object.keys(Em).forEach(function(e){upe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Em[t]=Em[e]})});function BF(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Em.hasOwnProperty(e)&&Em[e]?(""+t).trim():t+"px"}function jF(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var u=n.indexOf("--")===0,l=BF(n,t[n],u);n==="float"&&(n="cssFloat"),u?e.setProperty(n,l):e[n]=l}}var lpe=Pr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Eq(e,t){if(t){if(lpe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Ue(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Ue(60));if(!(typeof t.dangerouslySetInnerHTML=="object"&&"__html"in t.dangerouslySetInnerHTML))throw Error(Ue(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Ue(62))}}function Tq(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0;}}function pI(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Aq=null,gf=null,yf=null;function Az(e){if(e=Ym(e)){if(typeof Aq!="function")throw Error(Ue(280));var t=e.stateNode;t&&(t=q0(t),Aq(e.stateNode,e.type,t))}}function UF(e){gf?yf?yf.push(e):yf=[e]:gf=e}function $F(){if(gf){var e=gf,t=yf;if(yf=gf=null,Az(e),t)for(e=0;e<t.length;e++)Az(t[e])}}function mI(e,t){return e(t)}function VF(e,t,n,u,l){return e(t,n,u,l)}function vI(){}var GF=mI,pc=!1,JS=!1;function gI(){(gf!==null||yf!==null)&&(vI(),$F())}function cpe(e,t,n){if(JS)return e(t,n);JS=!0;try{return GF(e,t,n)}finally{JS=!1,gI()}}function Fm(e,t){var n=e.stateNode;if(n===null)return null;var u=q0(n);if(u===null)return null;n=u[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(u=!u.disabled)||(e=e.type,u=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!u;break e;default:e=!1;}if(e)return null;if(n&&typeof n!="function")throw Error(Ue(231,t,typeof n));return n}var Pq=!1;if(Ts)try{af={},Object.defineProperty(af,"passive",{get:function(){Pq=!0}}),window.addEventListener("test",af,af),window.removeEventListener("test",af,af)}catch(e){Pq=!1}var af;function hpe(e,t,n,u,l,o,_,b,E){var T=Array.prototype.slice.call(arguments,3);try{t.apply(n,T)}catch(C){this.onError(C)}}var Tm=!1,K_=null,X_=!1,Cq=null,fpe={onError:function(e){Tm=!0,K_=e}};function dpe(e,t,n,u,l,o,_,b,E){Tm=!1,K_=null,hpe.apply(fpe,arguments)}function ppe(e,t,n,u,l,o,_,b,E){if(dpe.apply(this,arguments),Tm){if(Tm){var T=K_;Tm=!1,K_=null}else throw Error(Ue(198));X_||(X_=!0,Cq=T)}}function qc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&1026&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function HF(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Pz(e){if(qc(e)!==e)throw Error(Ue(188))}function mpe(e){var t=e.alternate;if(!t){if(t=qc(e),t===null)throw Error(Ue(188));return t!==e?null:e}for(var n=e,u=t;;){var l=n.return;if(l===null)break;var o=l.alternate;if(o===null){if(u=l.return,u!==null){n=u;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===n)return Pz(l),e;if(o===u)return Pz(l),t;o=o.sibling}throw Error(Ue(188))}if(n.return!==u.return)n=l,u=o;else{for(var _=!1,b=l.child;b;){if(b===n){_=!0,n=l,u=o;break}if(b===u){_=!0,u=l,n=o;break}b=b.sibling}if(!_){for(b=o.child;b;){if(b===n){_=!0,n=o,u=l;break}if(b===u){_=!0,u=o,n=l;break}b=b.sibling}if(!_)throw Error(Ue(189))}}if(n.alternate!==u)throw Error(Ue(190))}if(n.tag!==3)throw Error(Ue(188));return n.stateNode.current===n?e:t}function WF(e){if(e=mpe(e),!e)return null;for(var t=e;;){if(t.tag===5||t.tag===6)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Cz(e,t){for(var n=e.alternate;t!==null;){if(t===e||t===n)return!0;t=t.return}return!1}var ZF,yI,KF,XF,Mq=!1,Ro=[],Bu=null,ju=null,Uu=null,Nm=new Map,Bm=new Map,um=[],Mz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Oq(e,t,n,u,l){return{blockedOn:e,domEventName:t,eventSystemFlags:n|16,nativeEvent:l,targetContainers:[u]}}function Oz(e,t){switch(e){case"focusin":case"focusout":Bu=null;break;case"dragenter":case"dragleave":ju=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":Nm.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bm.delete(t.pointerId);}}function lm(e,t,n,u,l,o){return e===null||e.nativeEvent!==o?(e=Oq(t,n,u,l,o),t!==null&&(t=Ym(t),t!==null&&yI(t)),e):(e.eventSystemFlags|=u,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function vpe(e,t,n,u,l){switch(t){case"focusin":return Bu=lm(Bu,e,t,n,u,l),!0;case"dragenter":return ju=lm(ju,e,t,n,u,l),!0;case"mouseover":return Uu=lm(Uu,e,t,n,u,l),!0;case"pointerover":var o=l.pointerId;return Nm.set(o,lm(Nm.get(o)||null,e,t,n,u,l)),!0;case"gotpointercapture":return o=l.pointerId,Bm.set(o,lm(Bm.get(o)||null,e,t,n,u,l)),!0;}return!1}function gpe(e){var t=mc(e.target);if(t!==null){var n=qc(t);if(n!==null){if(t=n.tag,t===13){if(t=HF(n),t!==null){e.blockedOn=t,XF(e.lanePriority,function(){gi.unstable_runWithPriority(e.priority,function(){KF(n)})});return}}else if(t===3&&n.stateNode.hydrate){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function z_(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=wI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null)return t=Ym(n),t!==null&&yI(t),e.blockedOn=n,!1;t.shift()}return!0}function Rz(e,t,n){z_(e)&&n.delete(t)}function ype(){for(Mq=!1;0<Ro.length;){var e=Ro[0];if(e.blockedOn!==null){e=Ym(e.blockedOn),e!==null&&ZF(e);break}for(var t=e.targetContainers;0<t.length;){var n=wI(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n!==null){e.blockedOn=n;break}t.shift()}e.blockedOn===null&&Ro.shift()}Bu!==null&&z_(Bu)&&(Bu=null),ju!==null&&z_(ju)&&(ju=null),Uu!==null&&z_(Uu)&&(Uu=null),Nm.forEach(Rz),Bm.forEach(Rz)}function cm(e,t){e.blockedOn===t&&(e.blockedOn=null,Mq||(Mq=!0,gi.unstable_scheduleCallback(gi.unstable_NormalPriority,ype)))}function YF(e){function t(l){return cm(l,e)}if(0<Ro.length){cm(Ro[0],e);for(var n=1;n<Ro.length;n++){var u=Ro[n];u.blockedOn===e&&(u.blockedOn=null)}}for(Bu!==null&&cm(Bu,e),ju!==null&&cm(ju,e),Uu!==null&&cm(Uu,e),Nm.forEach(t),Bm.forEach(t),n=0;n<um.length;n++)u=um[n],u.blockedOn===e&&(u.blockedOn=null);for(;0<um.length&&(n=um[0],n.blockedOn===null);)gpe(n),n.blockedOn===null&&um.shift()}function T_(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var lf={animationend:T_("Animation","AnimationEnd"),animationiteration:T_("Animation","AnimationIteration"),animationstart:T_("Animation","AnimationStart"),transitionend:T_("Transition","TransitionEnd")},QS={},JF={};Ts&&(JF=document.createElement("div").style,"AnimationEvent"in window||(delete lf.animationend.animation,delete lf.animationiteration.animation,delete lf.animationstart.animation),"TransitionEvent"in window||delete lf.transitionend.transition);function _0(e){if(QS[e])return QS[e];if(!lf[e])return e;var t=lf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in JF)return QS[e]=t[n];return e}var QF=_0("animationend"),eN=_0("animationiteration"),tN=_0("animationstart"),rN=_0("transitionend"),iN=new Map,_I=new Map,_pe=["abort","abort",QF,"animationEnd",eN,"animationIteration",tN,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",rN,"transitionEnd","waiting","waiting"];function xI(e,t){for(var n=0;n<e.length;n+=2){var u=e[n],l=e[n+1];l="on"+(l[0].toUpperCase()+l.slice(1)),_I.set(u,t),iN.set(u,l),wc(l,[u])}}var xpe=gi.unstable_now;xpe();var vr=8;function sf(e){if(1&e)return vr=15,1;if(2&e)return vr=14,2;if(4&e)return vr=13,4;var t=24&e;return t!==0?(vr=12,t):e&32?(vr=11,32):(t=192&e,t!==0?(vr=10,t):e&256?(vr=9,256):(t=3584&e,t!==0?(vr=8,t):e&4096?(vr=7,4096):(t=4186112&e,t!==0?(vr=6,t):(t=62914560&e,t!==0?(vr=5,t):e&67108864?(vr=4,67108864):e&134217728?(vr=3,134217728):(t=805306368&e,t!==0?(vr=2,t):1073741824&e?(vr=1,1073741824):(vr=8,e))))))}function bpe(e){switch(e){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0;}}function wpe(e){switch(e){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Ue(358,e));}}function jm(e,t){var n=e.pendingLanes;if(n===0)return vr=0;var u=0,l=0,o=e.expiredLanes,_=e.suspendedLanes,b=e.pingedLanes;if(o!==0)u=o,l=vr=15;else if(o=n&134217727,o!==0){var E=o&~_;E!==0?(u=sf(E),l=vr):(b&=o,b!==0&&(u=sf(b),l=vr))}else o=n&~_,o!==0?(u=sf(o),l=vr):b!==0&&(u=sf(b),l=vr);if(u===0)return 0;if(u=31-Ku(u),u=n&((0>u?0:1<<u)<<1)-1,t!==0&&t!==u&&!(t&_)){if(sf(t),l<=vr)return t;vr=l}if(t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=u;0<t;)n=31-Ku(t),l=1<<n,u|=e[n],t&=~l;return u}function nN(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Y_(e,t){switch(e){case 15:return 1;case 14:return 2;case 12:return e=uf(24&~t),e===0?Y_(10,t):e;case 10:return e=uf(192&~t),e===0?Y_(8,t):e;case 8:return e=uf(3584&~t),e===0&&(e=uf(4186112&~t),e===0&&(e=512)),e;case 2:return t=uf(805306368&~t),t===0&&(t=268435456),t;}throw Error(Ue(358,e))}function uf(e){return e&-e}function eq(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function x0(e,t,n){e.pendingLanes|=t;var u=t-1;e.suspendedLanes&=u,e.pingedLanes&=u,e=e.eventTimes,t=31-Ku(t),e[t]=n}var Ku=Math.clz32?Math.clz32:Ipe,Spe=Math.log,qpe=Math.LN2;function Ipe(e){return e===0?32:31-(Spe(e)/qpe|0)|0}var Epe=gi.unstable_UserBlockingPriority,Tpe=gi.unstable_runWithPriority,F_=!0;function Ape(e,t,n,u){pc||vI();var l=bI,o=pc;pc=!0;try{VF(l,e,t,n,u)}finally{(pc=o)||gI()}}function Ppe(e,t,n,u){Tpe(Epe,bI.bind(null,e,t,n,u))}function bI(e,t,n,u){if(F_){var l;if((l=(t&4)===0)&&0<Ro.length&&-1<Mz.indexOf(e))e=Oq(null,e,t,n,u),Ro.push(e);else{var o=wI(e,t,n,u);if(o===null)l&&Oz(e,u);else{if(l){if(-1<Mz.indexOf(e)){e=Oq(o,e,t,n,u),Ro.push(e);return}if(vpe(o,e,t,n,u))return;Oz(e,u)}gN(e,t,u,null,n)}}}}function wI(e,t,n,u){var l=pI(u);if(l=mc(l),l!==null){var o=qc(l);if(o===null)l=null;else{var _=o.tag;if(_===13){if(l=HF(o),l!==null)return l;l=null}else if(_===3){if(o.stateNode.hydrate)return o.tag===3?o.stateNode.containerInfo:null;l=null}else o!==l&&(l=null)}}return gN(e,t,u,l,n),null}var zu=null,SI=null,N_=null;function aN(){if(N_)return N_;var e,t=SI,n=t.length,u,l="value"in zu?zu.value:zu.textContent,o=l.length;for(e=0;e<n&&t[e]===l[e];e++);var _=n-e;for(u=1;u<=_&&t[n-u]===l[o-u];u++);return N_=l.slice(e,1<u?1-u:void 0)}function B_(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function A_(){return!0}function kz(){return!1}function ua(e){function t(n,u,l,o,_){this._reactName=n,this._targetInst=l,this.type=u,this.nativeEvent=o,this.target=_,this.currentTarget=null;for(var b in e)e.hasOwnProperty(b)&&(n=e[b],this[b]=n?n(o):o[b]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?A_:kz,this.isPropagationStopped=kz,this}return Pr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=A_)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=A_)},persist:function(){},isPersistent:A_}),t}var Pf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qI=ua(Pf),Xm=Pr({},Pf,{view:0,detail:0}),Cpe=ua(Xm),tq,rq,hm,b0=Pr({},Xm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:II,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hm&&(hm&&e.type==="mousemove"?(tq=e.screenX-hm.screenX,rq=e.screenY-hm.screenY):rq=tq=0,hm=e),tq)},movementY:function(e){return"movementY"in e?e.movementY:rq}}),Dz=ua(b0),Mpe=Pr({},b0,{dataTransfer:0}),Ope=ua(Mpe),Rpe=Pr({},Xm,{relatedTarget:0}),iq=ua(Rpe),kpe=Pr({},Pf,{animationName:0,elapsedTime:0,pseudoElement:0}),Dpe=ua(kpe),Lpe=Pr({},Pf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),zpe=ua(Lpe),Fpe=Pr({},Pf,{data:0}),Lz=ua(Fpe),Npe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bpe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jpe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Upe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=jpe[e])?!!t[e]:!1}function II(){return Upe}var $pe=Pr({},Xm,{key:function(e){if(e.key){var t=Npe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=B_(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Bpe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:II,charCode:function(e){return e.type==="keypress"?B_(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?B_(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Vpe=ua($pe),Gpe=Pr({},b0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),zz=ua(Gpe),Hpe=Pr({},Xm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:II}),Wpe=ua(Hpe),Zpe=Pr({},Pf,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kpe=ua(Zpe),Xpe=Pr({},b0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ype=ua(Xpe),Jpe=[9,13,27,32],EI=Ts&&"CompositionEvent"in window,Am=null;Ts&&"documentMode"in document&&(Am=document.documentMode);var Qpe=Ts&&"TextEvent"in window&&!Am,oN=Ts&&(!EI||Am&&8<Am&&11>=Am),Fz=" ",Nz=!1;function sN(e,t){switch(e){case"keyup":return Jpe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1;}}function uN(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var cf=!1;function eme(e,t){switch(e){case"compositionend":return uN(t);case"keypress":return t.which!==32?null:(Nz=!0,Fz);case"textInput":return e=t.data,e===Fz&&Nz?null:e;default:return null;}}function tme(e,t){if(cf)return e==="compositionend"||!EI&&sN(e,t)?(e=aN(),N_=SI=zu=null,cf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return oN&&t.locale!=="ko"?null:t.data;default:return null;}}var rme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bz(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!rme[e.type]:t==="textarea"}function lN(e,t,n,u){UF(u),t=J_(t,"onChange"),0<t.length&&(n=new qI("onChange","change",null,n,u),e.push({event:n,listeners:t}))}var Pm=null,Um=null;function ime(e){pN(e,0)}function w0(e){var t=ff(e);if(DF(t))return e}function nme(e,t){if(e==="change")return t}var cN=!1;Ts&&(Ts?(C_="oninput"in document,C_||(nq=document.createElement("div"),nq.setAttribute("oninput","return;"),C_=typeof nq.oninput=="function"),P_=C_):P_=!1,cN=P_&&(!document.documentMode||9<document.documentMode));var P_,C_,nq;function jz(){Pm&&(Pm.detachEvent("onpropertychange",hN),Um=Pm=null)}function hN(e){if(e.propertyName==="value"&&w0(Um)){var t=[];if(lN(t,Um,e,pI(e)),e=ime,pc)e(t);else{pc=!0;try{mI(e,t)}finally{pc=!1,gI()}}}}function ame(e,t,n){e==="focusin"?(jz(),Pm=t,Um=n,Pm.attachEvent("onpropertychange",hN)):e==="focusout"&&jz()}function ome(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return w0(Um)}function sme(e,t){if(e==="click")return w0(t)}function ume(e,t){if(e==="input"||e==="change")return w0(t)}function lme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ta=typeof Object.is=="function"?Object.is:lme,cme=Object.prototype.hasOwnProperty;function $m(e,t){if(Ta(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),u=Object.keys(t);if(n.length!==u.length)return!1;for(u=0;u<n.length;u++)if(!cme.call(t,n[u])||!Ta(e[n[u]],t[n[u]]))return!1;return!0}function Uz(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $z(e,t){var n=Uz(e);e=0;for(var u;n;){if(n.nodeType===3){if(u=e+n.textContent.length,e<=t&&u>=t)return{node:n,offset:t-e};e=u}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uz(n)}}function fN(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fN(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Vz(){for(var e=window,t=Z_();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(u){n=!1}if(n)e=t.contentWindow;else break;t=Z_(e.document)}return t}function Rq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var hme=Ts&&"documentMode"in document&&11>=document.documentMode,hf=null,kq=null,Cm=null,Dq=!1;function Gz(e,t,n){var u=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Dq||hf==null||hf!==Z_(u)||(u=hf,"selectionStart"in u&&Rq(u)?u={start:u.selectionStart,end:u.selectionEnd}:(u=(u.ownerDocument&&u.ownerDocument.defaultView||window).getSelection(),u={anchorNode:u.anchorNode,anchorOffset:u.anchorOffset,focusNode:u.focusNode,focusOffset:u.focusOffset}),Cm&&$m(Cm,u)||(Cm=u,u=J_(kq,"onSelect"),0<u.length&&(t=new qI("onSelect","select",null,t,n),e.push({event:t,listeners:u}),t.target=hf)))}xI("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);xI("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);xI(_pe,2);for(aq="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),M_=0;M_<aq.length;M_++)_I.set(aq[M_],0);var aq,M_;If("onMouseEnter",["mouseout","mouseover"]);If("onMouseLeave",["mouseout","mouseover"]);If("onPointerEnter",["pointerout","pointerover"]);If("onPointerLeave",["pointerout","pointerover"]);wc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wc("onBeforeInput",["compositionend","keypress","textInput","paste"]);wc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var bm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dN=new Set("cancel close invalid load scroll toggle".split(" ").concat(bm));function Hz(e,t,n){var u=e.type||"unknown-event";e.currentTarget=n,ppe(u,t,void 0,e),e.currentTarget=null}function pN(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var u=e[n],l=u.event;u=u.listeners;e:{var o=void 0;if(t)for(var _=u.length-1;0<=_;_--){var b=u[_],E=b.instance,T=b.currentTarget;if(b=b.listener,E!==o&&l.isPropagationStopped())break e;Hz(l,b,T),o=E}else for(_=0;_<u.length;_++){if(b=u[_],E=b.instance,T=b.currentTarget,b=b.listener,E!==o&&l.isPropagationStopped())break e;Hz(l,b,T),o=E}}}if(X_)throw e=Cq,X_=!1,Cq=null,e}function Sr(e,t){var n=_N(t),u=e+"__bubble";n.has(u)||(vN(t,e,2,!1),n.add(u))}var Wz="_reactListening"+Math.random().toString(36).slice(2);function mN(e){e[Wz]||(e[Wz]=!0,OF.forEach(function(t){dN.has(t)||Zz(t,!1,e,null),Zz(t,!0,e,null)}))}function Zz(e,t,n,u){var l=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,o=n;if(e==="selectionchange"&&n.nodeType!==9&&(o=n.ownerDocument),u!==null&&!t&&dN.has(e)){if(e!=="scroll")return;l|=2,o=u}var _=_N(o),b=e+"__"+(t?"capture":"bubble");_.has(b)||(t&&(l|=4),vN(o,e,l,t),_.add(b))}function vN(e,t,n,u){var l=_I.get(t);switch(l===void 0?2:l){case 0:l=Ape;break;case 1:l=Ppe;break;default:l=bI;}n=l.bind(null,t,n,e),l=void 0,!Pq||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),u?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function gN(e,t,n,u,l){var o=u;if(!(t&1)&&!(t&2)&&u!==null)e:for(;;){if(u===null)return;var _=u.tag;if(_===3||_===4){var b=u.stateNode.containerInfo;if(b===l||b.nodeType===8&&b.parentNode===l)break;if(_===4)for(_=u.return;_!==null;){var E=_.tag;if((E===3||E===4)&&(E=_.stateNode.containerInfo,E===l||E.nodeType===8&&E.parentNode===l))return;_=_.return}for(;b!==null;){if(_=mc(b),_===null)return;if(E=_.tag,E===5||E===6){u=o=_;continue e}b=b.parentNode}}u=u.return}cpe(function(){var T=o,C=pI(n),z=[];e:{var $=iN.get(e);if($!==void 0){var oe=qI,xe=e;switch(e){case"keypress":if(B_(n)===0)break e;case"keydown":case"keyup":oe=Vpe;break;case"focusin":xe="focus",oe=iq;break;case"focusout":xe="blur",oe=iq;break;case"beforeblur":case"afterblur":oe=iq;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":oe=Dz;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":oe=Ope;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":oe=Wpe;break;case QF:case eN:case tN:oe=Dpe;break;case rN:oe=Kpe;break;case"scroll":oe=Cpe;break;case"wheel":oe=Ype;break;case"copy":case"cut":case"paste":oe=zpe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":oe=zz;}var _e=(t&4)!==0,X=!_e&&e==="scroll",K=_e?$!==null?$+"Capture":null:$;_e=[];for(var re=T,ge;re!==null;){ge=re;var be=ge.stateNode;if(ge.tag===5&&be!==null&&(ge=be,K!==null&&(be=Fm(re,K),be!=null&&_e.push(Vm(re,be,ge)))),X)break;re=re.return}0<_e.length&&($=new oe($,xe,null,n,C),z.push({event:$,listeners:_e}))}}if(!(t&7)){e:{if($=e==="mouseover"||e==="pointerover",oe=e==="mouseout"||e==="pointerout",$&&!(t&16)&&(xe=n.relatedTarget||n.fromElement)&&(mc(xe)||xe[Cf]))break e;if((oe||$)&&($=C.window===C?C:($=C.ownerDocument)?$.defaultView||$.parentWindow:window,oe?(xe=n.relatedTarget||n.toElement,oe=T,xe=xe?mc(xe):null,xe!==null&&(X=qc(xe),xe!==X||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(oe=null,xe=T),oe!==xe)){if(_e=Dz,be="onMouseLeave",K="onMouseEnter",re="mouse",(e==="pointerout"||e==="pointerover")&&(_e=zz,be="onPointerLeave",K="onPointerEnter",re="pointer"),X=oe==null?$:ff(oe),ge=xe==null?$:ff(xe),$=new _e(be,re+"leave",oe,n,C),$.target=X,$.relatedTarget=ge,be=null,mc(C)===T&&(_e=new _e(K,re+"enter",xe,n,C),_e.target=ge,_e.relatedTarget=X,be=_e),X=be,oe&&xe)t:{for(_e=oe,K=xe,re=0,ge=_e;ge;ge=of(ge))re++;for(ge=0,be=K;be;be=of(be))ge++;for(;0<re-ge;)_e=of(_e),re--;for(;0<ge-re;)K=of(K),ge--;for(;re--;){if(_e===K||K!==null&&_e===K.alternate)break t;_e=of(_e),K=of(K)}_e=null}else _e=null;oe!==null&&Kz(z,$,oe,_e,!1),xe!==null&&X!==null&&Kz(z,X,xe,_e,!0)}}e:{if($=T?ff(T):window,oe=$.nodeName&&$.nodeName.toLowerCase(),oe==="select"||oe==="input"&&$.type==="file")var et=nme;else if(Bz($)){if(cN)et=ume;else{et=ome;var Le=ame}}else(oe=$.nodeName)&&oe.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(et=sme);if(et&&(et=et(e,T))){lN(z,et,n,C);break e}Le&&Le(e,$,T),e==="focusout"&&(Le=$._wrapperState)&&Le.controlled&&$.type==="number"&&bq($,"number",$.value)}switch(Le=T?ff(T):window,e){case"focusin":(Bz(Le)||Le.contentEditable==="true")&&(hf=Le,kq=T,Cm=null);break;case"focusout":Cm=kq=hf=null;break;case"mousedown":Dq=!0;break;case"contextmenu":case"mouseup":case"dragend":Dq=!1,Gz(z,n,C);break;case"selectionchange":if(hme)break;case"keydown":case"keyup":Gz(z,n,C);}var nt;if(EI)e:{switch(e){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e;}gt=void 0}else cf?sN(e,n)&&(gt="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(gt="onCompositionStart");gt&&(oN&&n.locale!=="ko"&&(cf||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&cf&&(nt=aN()):(zu=C,SI="value"in zu?zu.value:zu.textContent,cf=!0)),Le=J_(T,gt),0<Le.length&&(gt=new Lz(gt,e,null,n,C),z.push({event:gt,listeners:Le}),nt?gt.data=nt:(nt=uN(n),nt!==null&&(gt.data=nt)))),(nt=Qpe?eme(e,n):tme(e,n))&&(T=J_(T,"onBeforeInput"),0<T.length&&(C=new Lz("onBeforeInput","beforeinput",null,n,C),z.push({event:C,listeners:T}),C.data=nt))}pN(z,t)})}function Vm(e,t,n){return{instance:e,listener:t,currentTarget:n}}function J_(e,t){for(var n=t+"Capture",u=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=Fm(e,n),o!=null&&u.unshift(Vm(e,o,l)),o=Fm(e,t),o!=null&&u.push(Vm(e,o,l))),e=e.return}return u}function of(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Kz(e,t,n,u,l){for(var o=t._reactName,_=[];n!==null&&n!==u;){var b=n,E=b.alternate,T=b.stateNode;if(E!==null&&E===u)break;b.tag===5&&T!==null&&(b=T,l?(E=Fm(n,o),E!=null&&_.unshift(Vm(n,E,b))):l||(E=Fm(n,o),E!=null&&_.push(Vm(n,E,b)))),n=n.return}_.length!==0&&e.push({event:t,listeners:_})}function Q_(){}var oq=null,sq=null;function yN(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus;}return!1}function Lq(e,t){return e==="textarea"||e==="option"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Xz=typeof setTimeout=="function"?setTimeout:void 0,fme=typeof clearTimeout=="function"?clearTimeout:void 0;function TI(e){e.nodeType===1?e.textContent="":e.nodeType===9&&(e=e.body,e!=null&&(e.textContent=""))}function _f(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break}return e}function Yz(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var uq=0;function dme(e){return{$$typeof:fI,toString:e,valueOf:e}}var S0=Math.random().toString(36).slice(2),Fu="__reactFiber$"+S0,e0="__reactProps$"+S0,Cf="__reactContainer$"+S0,Jz="__reactEvents$"+S0;function mc(e){var t=e[Fu];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cf]||n[Fu]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Yz(e);e!==null;){if(n=e[Fu])return n;e=Yz(e)}return t}e=n,n=e.parentNode}return null}function Ym(e){return e=e[Fu]||e[Cf],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function ff(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ue(33))}function q0(e){return e[e0]||null}function _N(e){var t=e[Jz];return t===void 0&&(t=e[Jz]=new Set),t}var zq=[],df=-1;function Qu(e){return{current:e}}function qr(e){0>df||(e.current=zq[df],zq[df]=null,df--)}function Nr(e,t){df++,zq[df]=e.current,e.current=t}var Xu={},en=Qu(Xu),On=Qu(!1),_c=Xu;function Ef(e,t){var n=e.type.contextTypes;if(!n)return Xu;var u=e.stateNode;if(u&&u.__reactInternalMemoizedUnmaskedChildContext===t)return u.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in n)l[o]=t[o];return u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function Rn(e){return e=e.childContextTypes,e!=null}function t0(){qr(On),qr(en)}function Qz(e,t,n){if(en.current!==Xu)throw Error(Ue(168));Nr(en,t),Nr(On,n)}function xN(e,t,n){var u=e.stateNode;if(e=t.childContextTypes,typeof u.getChildContext!="function")return n;u=u.getChildContext();for(var l in u)if(!(l in e))throw Error(Ue(108,mf(t)||"Unknown",l));return Pr({},n,u)}function j_(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Xu,_c=en.current,Nr(en,e),Nr(On,On.current),!0}function eF(e,t,n){var u=e.stateNode;if(!u)throw Error(Ue(169));n?(e=xN(e,t,_c),u.__reactInternalMemoizedMergedChildContext=e,qr(On),qr(en),Nr(en,e)):qr(On),Nr(On,n)}var AI=null,yc=null,pme=gi.unstable_runWithPriority,PI=gi.unstable_scheduleCallback,Fq=gi.unstable_cancelCallback,mme=gi.unstable_shouldYield,tF=gi.unstable_requestPaint,Nq=gi.unstable_now,vme=gi.unstable_getCurrentPriorityLevel,I0=gi.unstable_ImmediatePriority,bN=gi.unstable_UserBlockingPriority,wN=gi.unstable_NormalPriority,SN=gi.unstable_LowPriority,qN=gi.unstable_IdlePriority,lq={},gme=tF!==void 0?tF:function(){},ws=null,U_=null,cq=!1,rF=Nq(),Ji=1e4>rF?Nq:function(){return Nq()-rF};function Tf(){switch(vme()){case I0:return 99;case bN:return 98;case wN:return 97;case SN:return 96;case qN:return 95;default:throw Error(Ue(332));}}function IN(e){switch(e){case 99:return I0;case 98:return bN;case 97:return wN;case 96:return SN;case 95:return qN;default:throw Error(Ue(332));}}function xc(e,t){return e=IN(e),pme(e,t)}function Gm(e,t,n){return e=IN(e),PI(e,t,n)}function Fo(){if(U_!==null){var e=U_;U_=null,Fq(e)}EN()}function EN(){if(!cq&&ws!==null){cq=!0;var e=0;try{var t=ws;xc(99,function(){for(;e<t.length;e++){var n=t[e];do n=n(!0);while(n!==null)}}),ws=null}catch(n){throw ws!==null&&(ws=ws.slice(e+1)),PI(I0,Fo),n}finally{cq=!1}}}var yme=Sc.ReactCurrentBatchConfig;function no(e,t){if(e&&e.defaultProps){t=Pr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var r0=Qu(null),i0=null,pf=null,n0=null;function CI(){n0=pf=i0=null}function MI(e){var t=r0.current;qr(r0),e.type._context._currentValue=t}function TN(e,t){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)===t){if(n===null||(n.childLanes&t)===t)break;n.childLanes|=t}else e.childLanes|=t,n!==null&&(n.childLanes|=t);e=e.return}}function xf(e,t){i0=e,n0=pf=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(ao=!0),e.firstContext=null)}function Ca(e,t){if(n0!==e&&t!==!1&&t!==0)if((typeof t!="number"||t===1073741823)&&(n0=e,t=1073741823),t={context:e,observedBits:t,next:null},pf===null){if(i0===null)throw Error(Ue(308));pf=t,i0.dependencies={lanes:0,firstContext:t,responders:null}}else pf=pf.next=t;return e._currentValue}var Du=!1;function OI(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function AN(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function $u(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vu(e,t){if(e=e.updateQueue,e!==null){e=e.shared;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}}function iF(e,t){var n=e.updateQueue,u=e.alternate;if(u!==null&&(u=u.updateQueue,n===u)){var l=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var _={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?l=o=_:o=o.next=_,n=n.next}while(n!==null);o===null?l=o=t:o=o.next=t}else l=o=t;n={baseState:u.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:u.shared,effects:u.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Hm(e,t,n,u){var l=e.updateQueue;Du=!1;var o=l.firstBaseUpdate,_=l.lastBaseUpdate,b=l.shared.pending;if(b!==null){l.shared.pending=null;var E=b,T=E.next;E.next=null,_===null?o=T:_.next=T,_=E;var C=e.alternate;if(C!==null){C=C.updateQueue;var z=C.lastBaseUpdate;z!==_&&(z===null?C.firstBaseUpdate=T:z.next=T,C.lastBaseUpdate=E)}}if(o!==null){z=l.baseState,_=0,C=T=E=null;do{b=o.lane;var $=o.eventTime;if((u&b)===b){C!==null&&(C=C.next={eventTime:$,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var oe=e,xe=o;switch(b=t,$=n,xe.tag){case 1:if(oe=xe.payload,typeof oe=="function"){z=oe.call($,z,b);break e}z=oe;break e;case 3:oe.flags=oe.flags&-4097|64;case 0:if(oe=xe.payload,b=typeof oe=="function"?oe.call($,z,b):oe,b==null)break e;z=Pr({},z,b);break e;case 2:Du=!0;}}o.callback!==null&&(e.flags|=32,b=l.effects,b===null?l.effects=[o]:b.push(o))}else $={eventTime:$,lane:b,tag:o.tag,payload:o.payload,callback:o.callback,next:null},C===null?(T=C=$,E=z):C=C.next=$,_|=b;if(o=o.next,o===null){if(b=l.shared.pending,b===null)break;o=b.next,b.next=null,l.lastBaseUpdate=b,l.shared.pending=null}}while(!0);C===null&&(E=z),l.baseState=E,l.firstBaseUpdate=T,l.lastBaseUpdate=C,Qm|=_,e.lanes=_,e.memoizedState=z}}function nF(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var u=e[t],l=u.callback;if(l!==null){if(u.callback=null,u=n,typeof l!="function")throw Error(Ue(191,l));l.call(u)}}}var PN=new v0.Component().refs;function a0(e,t,n,u){t=e.memoizedState,n=n(u,t),n=n==null?t:Pr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var E0={isMounted:function(e){return(e=e._reactInternals)?qc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var u=sa(),l=Gu(e),o=$u(u,l);o.payload=t,n!=null&&(o.callback=n),Vu(e,o),Hu(e,l,u)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var u=sa(),l=Gu(e),o=$u(u,l);o.tag=1,o.payload=t,n!=null&&(o.callback=n),Vu(e,o),Hu(e,l,u)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sa(),u=Gu(e),l=$u(n,u);l.tag=2,t!=null&&(l.callback=t),Vu(e,l),Hu(e,u,n)}};function aF(e,t,n,u,l,o,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(u,o,_):t.prototype&&t.prototype.isPureReactComponent?!$m(n,u)||!$m(l,o):!0}function CN(e,t,n){var u=!1,l=Xu,o=t.contextType;return typeof o=="object"&&o!==null?o=Ca(o):(l=Rn(t)?_c:en.current,u=t.contextTypes,o=(u=u!=null)?Ef(e,l):Xu),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=E0,e.stateNode=t,t._reactInternals=e,u&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function oF(e,t,n,u){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,u),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,u),t.state!==e&&E0.enqueueReplaceState(t,t.state,null)}function Bq(e,t,n,u){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs=PN,OI(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=Ca(o):(o=Rn(t)?_c:en.current,l.context=Ef(e,o)),Hm(e,n,l,u),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(a0(e,t,o,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&E0.enqueueReplaceState(l,l.state,null),Hm(e,n,l,u),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4)}var O_=Array.isArray;function fm(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ue(309));var u=n.stateNode}if(!u)throw Error(Ue(147,e));var l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(o){var _=u.refs;_===PN&&(_=u.refs={}),o===null?delete _[l]:_[l]=o},t._stringRef=l,t)}if(typeof e!="string")throw Error(Ue(284));if(!n._owner)throw Error(Ue(290,e))}return e}function R_(e,t){if(e.type!=="textarea")throw Error(Ue(31,Object.prototype.toString.call(t)==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":t))}function MN(e){function t(X,K){if(e){var re=X.lastEffect;re!==null?(re.nextEffect=K,X.lastEffect=K):X.firstEffect=X.lastEffect=K,K.nextEffect=null,K.flags=8}}function n(X,K){if(!e)return null;for(;K!==null;)t(X,K),K=K.sibling;return null}function u(X,K){for(X=new Map;K!==null;)K.key!==null?X.set(K.key,K):X.set(K.index,K),K=K.sibling;return X}function l(X,K){return X=Ju(X,K),X.index=0,X.sibling=null,X}function o(X,K,re){return X.index=re,e?(re=X.alternate,re!==null?(re=re.index,re<K?(X.flags=2,K):re):(X.flags=2,K)):K}function _(X){return e&&X.alternate===null&&(X.flags=2),X}function b(X,K,re,ge){return K===null||K.tag!==6?(K=mq(re,X.mode,ge),K.return=X,K):(K=l(K,re),K.return=X,K)}function E(X,K,re,ge){return K!==null&&K.elementType===re.type?(ge=l(K,re.props),ge.ref=fm(X,K,re),ge.return=X,ge):(ge=H_(re.type,re.key,re.props,null,X.mode,ge),ge.ref=fm(X,K,re),ge.return=X,ge)}function T(X,K,re,ge){return K===null||K.tag!==4||K.stateNode.containerInfo!==re.containerInfo||K.stateNode.implementation!==re.implementation?(K=vq(re,X.mode,ge),K.return=X,K):(K=l(K,re.children||[]),K.return=X,K)}function C(X,K,re,ge,be){return K===null||K.tag!==7?(K=qf(re,X.mode,ge,be),K.return=X,K):(K=l(K,re),K.return=X,K)}function z(X,K,re){if(typeof K=="string"||typeof K=="number")return K=mq(""+K,X.mode,re),K.return=X,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case _m:return re=H_(K.type,K.key,K.props,null,X.mode,re),re.ref=fm(X,null,K),re.return=X,re;case dc:return K=vq(K,X.mode,re),K.return=X,K;}if(O_(K)||sm(K))return K=qf(K,X.mode,re,null),K.return=X,K;R_(X,K)}return null}function $(X,K,re,ge){var be=K!==null?K.key:null;if(typeof re=="string"||typeof re=="number")return be!==null?null:b(X,K,""+re,ge);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case _m:return re.key===be?re.type===Lu?C(X,K,re.props.children,ge,be):E(X,K,re,ge):null;case dc:return re.key===be?T(X,K,re,ge):null;}if(O_(re)||sm(re))return be!==null?null:C(X,K,re,ge,null);R_(X,re)}return null}function oe(X,K,re,ge,be){if(typeof ge=="string"||typeof ge=="number")return X=X.get(re)||null,b(K,X,""+ge,be);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case _m:return X=X.get(ge.key===null?re:ge.key)||null,ge.type===Lu?C(K,X,ge.props.children,be,ge.key):E(K,X,ge,be);case dc:return X=X.get(ge.key===null?re:ge.key)||null,T(K,X,ge,be);}if(O_(ge)||sm(ge))return X=X.get(re)||null,C(K,X,ge,be,null);R_(K,ge)}return null}function xe(X,K,re,ge){for(var be=null,et=null,Le=K,nt=K=0,gt=null;Le!==null&&nt<re.length;nt++){Le.index>nt?(gt=Le,Le=null):gt=Le.sibling;var Qe=$(X,Le,re[nt],ge);if(Qe===null){Le===null&&(Le=gt);break}e&&Le&&Qe.alternate===null&&t(X,Le),K=o(Qe,K,nt),et===null?be=Qe:et.sibling=Qe,et=Qe,Le=gt}if(nt===re.length)return n(X,Le),be;if(Le===null){for(;nt<re.length;nt++)Le=z(X,re[nt],ge),Le!==null&&(K=o(Le,K,nt),et===null?be=Le:et.sibling=Le,et=Le);return be}for(Le=u(X,Le);nt<re.length;nt++)gt=oe(Le,X,nt,re[nt],ge),gt!==null&&(e&&gt.alternate!==null&&Le.delete(gt.key===null?nt:gt.key),K=o(gt,K,nt),et===null?be=gt:et.sibling=gt,et=gt);return e&&Le.forEach(function(nn){return t(X,nn)}),be}function _e(X,K,re,ge){var be=sm(re);if(typeof be!="function")throw Error(Ue(150));if(re=be.call(re),re==null)throw Error(Ue(151));for(var et=be=null,Le=K,nt=K=0,gt=null,Qe=re.next();Le!==null&&!Qe.done;nt++,Qe=re.next()){Le.index>nt?(gt=Le,Le=null):gt=Le.sibling;var nn=$(X,Le,Qe.value,ge);if(nn===null){Le===null&&(Le=gt);break}e&&Le&&nn.alternate===null&&t(X,Le),K=o(nn,K,nt),et===null?be=nn:et.sibling=nn,et=nn,Le=gt}if(Qe.done)return n(X,Le),be;if(Le===null){for(;!Qe.done;nt++,Qe=re.next())Qe=z(X,Qe.value,ge),Qe!==null&&(K=o(Qe,K,nt),et===null?be=Qe:et.sibling=Qe,et=Qe);return be}for(Le=u(X,Le);!Qe.done;nt++,Qe=re.next())Qe=oe(Le,X,nt,Qe.value,ge),Qe!==null&&(e&&Qe.alternate!==null&&Le.delete(Qe.key===null?nt:Qe.key),K=o(Qe,K,nt),et===null?be=Qe:et.sibling=Qe,et=Qe);return e&&Le.forEach(function(Wr){return t(X,Wr)}),be}return function(X,K,re,ge){var be=typeof re=="object"&&re!==null&&re.type===Lu&&re.key===null;be&&(re=re.props.children);var et=typeof re=="object"&&re!==null;if(et)switch(re.$$typeof){case _m:e:{for(et=re.key,be=K;be!==null;){if(be.key===et){switch(be.tag){case 7:if(re.type===Lu){n(X,be.sibling),K=l(be,re.props.children),K.return=X,X=K;break e}break;default:if(be.elementType===re.type){n(X,be.sibling),K=l(be,re.props),K.ref=fm(X,be,re),K.return=X,X=K;break e}}n(X,be);break}else t(X,be);be=be.sibling}re.type===Lu?(K=qf(re.props.children,X.mode,ge,re.key),K.return=X,X=K):(ge=H_(re.type,re.key,re.props,null,X.mode,ge),ge.ref=fm(X,K,re),ge.return=X,X=ge)}return _(X);case dc:e:{for(be=re.key;K!==null;){if(K.key===be){if(K.tag===4&&K.stateNode.containerInfo===re.containerInfo&&K.stateNode.implementation===re.implementation){n(X,K.sibling),K=l(K,re.children||[]),K.return=X,X=K;break e}else{n(X,K);break}}else t(X,K);K=K.sibling}K=vq(re,X.mode,ge),K.return=X,X=K}return _(X);}if(typeof re=="string"||typeof re=="number")return re=""+re,K!==null&&K.tag===6?(n(X,K.sibling),K=l(K,re),K.return=X,X=K):(n(X,K),K=mq(re,X.mode,ge),K.return=X,X=K),_(X);if(O_(re))return xe(X,K,re,ge);if(sm(re))return _e(X,K,re,ge);if(et&&R_(X,re),typeof re=="undefined"&&!be)switch(X.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Ue(152,mf(X.type)||"Component"));}return n(X,K)}}var o0=MN(!0),ON=MN(!1),Jm={},Lo=Qu(Jm),Wm=Qu(Jm),Zm=Qu(Jm);function vc(e){if(e===Jm)throw Error(Ue(174));return e}function jq(e,t){switch(Nr(Zm,t),Nr(Wm,e),Nr(Lo,Jm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Iq(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Iq(t,e);}qr(Lo),Nr(Lo,t)}function Af(){qr(Lo),qr(Wm),qr(Zm)}function sF(e){vc(Zm.current);var t=vc(Lo.current),n=Iq(t,e.type);t!==n&&(Nr(Wm,e),Nr(Lo,n))}function RI(e){Wm.current===e&&(qr(Lo),qr(Wm))}var Fr=Qu(0);function s0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&64)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var qs=null,Nu=null,zo=!1;function RN(e,t){var n=Aa(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=t,n.return=e,n.flags=8,e.lastEffect!==null?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function uF(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,!0):!1;case 13:return!1;default:return!1;}}function Uq(e){if(zo){var t=Nu;if(t){var n=t;if(!uF(e,t)){if(t=_f(n.nextSibling),!t||!uF(e,t)){e.flags=e.flags&-1025|2,zo=!1,qs=e;return}RN(qs,n)}qs=e,Nu=_f(t.firstChild)}else e.flags=e.flags&-1025|2,zo=!1,qs=e}}function lF(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qs=e}function k_(e){if(e!==qs)return!1;if(!zo)return lF(e),zo=!0,!1;var t=e.type;if(e.tag!==5||t!=="head"&&t!=="body"&&!Lq(t,e.memoizedProps))for(t=Nu;t;)RN(e,t),t=_f(t.nextSibling);if(lF(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ue(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nu=_f(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nu=null}}else Nu=qs?_f(e.stateNode.nextSibling):null;return!0}function hq(){Nu=qs=null,zo=!1}var bf=[];function kI(){for(var e=0;e<bf.length;e++)bf[e]._workInProgressVersionPrimary=null;bf.length=0}var Mm=Sc.ReactCurrentDispatcher,Pa=Sc.ReactCurrentBatchConfig,Km=0,Hr=null,Yi=null,Pi=null,u0=!1,Om=!1;function Cn(){throw Error(Ue(321))}function DI(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ta(e[n],t[n]))return!1;return!0}function LI(e,t,n,u,l,o){if(Km=o,Hr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Mm.current=e===null||e.memoizedState===null?xme:bme,e=n(u,l),Om){o=0;do{if(Om=!1,!(25>o))throw Error(Ue(301));o+=1,Pi=Yi=null,t.updateQueue=null,Mm.current=wme,e=n(u,l)}while(Om)}if(Mm.current=f0,t=Yi!==null&&Yi.next!==null,Km=0,Pi=Yi=Hr=null,u0=!1,t)throw Error(Ue(300));return e}function gc(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pi===null?Hr.memoizedState=Pi=e:Pi=Pi.next=e,Pi}function Ic(){if(Yi===null){var e=Hr.alternate;e=e!==null?e.memoizedState:null}else e=Yi.next;var t=Pi===null?Hr.memoizedState:Pi.next;if(t!==null)Pi=t,Yi=e;else{if(e===null)throw Error(Ue(310));Yi=e,e={memoizedState:Yi.memoizedState,baseState:Yi.baseState,baseQueue:Yi.baseQueue,queue:Yi.queue,next:null},Pi===null?Hr.memoizedState=Pi=e:Pi=Pi.next=e}return Pi}function ko(e,t){return typeof t=="function"?t(e):t}function dm(e){var t=Ic(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var u=Yi,l=u.baseQueue,o=n.pending;if(o!==null){if(l!==null){var _=l.next;l.next=o.next,o.next=_}u.baseQueue=l=o,n.pending=null}if(l!==null){l=l.next,u=u.baseState;var b=_=o=null,E=l;do{var T=E.lane;if((Km&T)===T)b!==null&&(b=b.next={lane:0,action:E.action,eagerReducer:E.eagerReducer,eagerState:E.eagerState,next:null}),u=E.eagerReducer===e?E.eagerState:e(u,E.action);else{var C={lane:T,action:E.action,eagerReducer:E.eagerReducer,eagerState:E.eagerState,next:null};b===null?(_=b=C,o=u):b=b.next=C,Hr.lanes|=T,Qm|=T}E=E.next}while(E!==null&&E!==l);b===null?o=u:b.next=_,Ta(u,t.memoizedState)||(ao=!0),t.memoizedState=u,t.baseState=o,t.baseQueue=b,n.lastRenderedState=u}return[t.memoizedState,n.dispatch]}function pm(e){var t=Ic(),n=t.queue;if(n===null)throw Error(Ue(311));n.lastRenderedReducer=e;var u=n.dispatch,l=n.pending,o=t.memoizedState;if(l!==null){n.pending=null;var _=l=l.next;do o=e(o,_.action),_=_.next;while(_!==l);Ta(o,t.memoizedState)||(ao=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,u]}function cF(e,t,n){var u=t._getVersion;u=u(t._source);var l=t._workInProgressVersionPrimary;if(l!==null?e=l===u:(e=e.mutableReadLanes,(e=(Km&e)===e)&&(t._workInProgressVersionPrimary=u,bf.push(t))),e)return n(t._source);throw bf.push(t),Error(Ue(350))}function kN(e,t,n,u){var l=pn;if(l===null)throw Error(Ue(349));var o=t._getVersion,_=o(t._source),b=Mm.current,E=b.useState(function(){return cF(l,t,n)}),T=E[1],C=E[0];E=Pi;var z=e.memoizedState,$=z.refs,oe=$.getSnapshot,xe=z.source;z=z.subscribe;var _e=Hr;return e.memoizedState={refs:$,source:t,subscribe:u},b.useEffect(function(){$.getSnapshot=n,$.setSnapshot=T;var X=o(t._source);if(!Ta(_,X)){X=n(t._source),Ta(C,X)||(T(X),X=Gu(_e),l.mutableReadLanes|=X&l.pendingLanes),X=l.mutableReadLanes,l.entangledLanes|=X;for(var K=l.entanglements,re=X;0<re;){var ge=31-Ku(re),be=1<<ge;K[ge]|=X,re&=~be}}},[n,t,u]),b.useEffect(function(){return u(t._source,function(){var X=$.getSnapshot,K=$.setSnapshot;try{K(X(t._source));var re=Gu(_e);l.mutableReadLanes|=re&l.pendingLanes}catch(ge){K(function(){throw ge})}})},[t,u]),Ta(oe,n)&&Ta(xe,t)&&Ta(z,u)||(e={pending:null,dispatch:null,lastRenderedReducer:ko,lastRenderedState:C},e.dispatch=T=NI.bind(null,Hr,e),E.queue=e,E.baseQueue=null,C=cF(l,t,n),E.memoizedState=E.baseState=C),C}function DN(e,t,n){var u=Ic();return kN(u,e,t,n)}function mm(e){var t=gc();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e=t.queue={pending:null,dispatch:null,lastRenderedReducer:ko,lastRenderedState:e},e=e.dispatch=NI.bind(null,Hr,e),[t.memoizedState,e]}function l0(e,t,n,u){return e={tag:e,create:t,destroy:n,deps:u,next:null},t=Hr.updateQueue,t===null?(t={lastEffect:null},Hr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(u=n.next,n.next=e,e.next=u,t.lastEffect=e)),e}function hF(e){var t=gc();return e={current:e},t.memoizedState=e}function c0(){return Ic().memoizedState}function $q(e,t,n,u){var l=gc();Hr.flags|=e,l.memoizedState=l0(1|t,n,void 0,u===void 0?null:u)}function zI(e,t,n,u){var l=Ic();u=u===void 0?null:u;var o=void 0;if(Yi!==null){var _=Yi.memoizedState;if(o=_.destroy,u!==null&&DI(u,_.deps)){l0(t,n,o,u);return}}Hr.flags|=e,l.memoizedState=l0(1|t,n,o,u)}function fF(e,t){return $q(516,4,e,t)}function h0(e,t){return zI(516,4,e,t)}function LN(e,t){return zI(4,2,e,t)}function zN(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function FN(e,t,n){return n=n!=null?n.concat([e]):null,zI(4,2,zN.bind(null,t,e),n)}function FI(){}function NN(e,t){var n=Ic();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&DI(t,u[1])?u[0]:(n.memoizedState=[e,t],e)}function BN(e,t){var n=Ic();t=t===void 0?null:t;var u=n.memoizedState;return u!==null&&t!==null&&DI(t,u[1])?u[0]:(e=e(),n.memoizedState=[e,t],e)}function _me(e,t){var n=Tf();xc(98>n?98:n,function(){e(!0)}),xc(97<n?97:n,function(){var u=Pa.transition;Pa.transition=1;try{e(!1),t()}finally{Pa.transition=u}})}function NI(e,t,n){var u=sa(),l=Gu(e),o={lane:l,action:n,eagerReducer:null,eagerState:null,next:null},_=t.pending;if(_===null?o.next=o:(o.next=_.next,_.next=o),t.pending=o,_=e.alternate,e===Hr||_!==null&&_===Hr)Om=u0=!0;else{if(e.lanes===0&&(_===null||_.lanes===0)&&(_=t.lastRenderedReducer,_!==null))try{var b=t.lastRenderedState,E=_(b,n);if(o.eagerReducer=_,o.eagerState=E,Ta(E,b))return}catch(T){}finally{}Hu(e,l,u)}}var f0={readContext:Ca,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useMutableSource:Cn,useOpaqueIdentifier:Cn,unstable_isNewReconciler:!1},xme={readContext:Ca,useCallback:function(e,t){return gc().memoizedState=[e,t===void 0?null:t],e},useContext:Ca,useEffect:fF,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$q(4,2,zN.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $q(4,2,e,t)},useMemo:function(e,t){var n=gc();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var u=gc();return t=n!==void 0?n(t):t,u.memoizedState=u.baseState=t,e=u.queue={pending:null,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},e=e.dispatch=NI.bind(null,Hr,e),[u.memoizedState,e]},useRef:hF,useState:mm,useDebugValue:FI,useDeferredValue:function(e){var t=mm(e),n=t[0],u=t[1];return fF(function(){var l=Pa.transition;Pa.transition=1;try{u(e)}finally{Pa.transition=l}},[e]),n},useTransition:function(){var e=mm(!1),t=e[0];return e=_me.bind(null,e[1]),hF(e),[e,t]},useMutableSource:function(e,t,n){var u=gc();return u.memoizedState={refs:{getSnapshot:t,setSnapshot:null},source:e,subscribe:n},kN(u,e,t,n)},useOpaqueIdentifier:function(){if(zo){var e=!1,t=dme(function(){throw e||(e=!0,n("r:"+(uq++).toString(36))),Error(Ue(355))}),n=mm(t)[1];return!(Hr.mode&2)&&(Hr.flags|=516,l0(5,function(){n("r:"+(uq++).toString(36))},void 0,null)),t}return t="r:"+(uq++).toString(36),mm(t),t},unstable_isNewReconciler:!1},bme={readContext:Ca,useCallback:NN,useContext:Ca,useEffect:h0,useImperativeHandle:FN,useLayoutEffect:LN,useMemo:BN,useReducer:dm,useRef:c0,useState:function(){return dm(ko)},useDebugValue:FI,useDeferredValue:function(e){var t=dm(ko),n=t[0],u=t[1];return h0(function(){var l=Pa.transition;Pa.transition=1;try{u(e)}finally{Pa.transition=l}},[e]),n},useTransition:function(){var e=dm(ko)[0];return[c0().current,e]},useMutableSource:DN,useOpaqueIdentifier:function(){return dm(ko)[0]},unstable_isNewReconciler:!1},wme={readContext:Ca,useCallback:NN,useContext:Ca,useEffect:h0,useImperativeHandle:FN,useLayoutEffect:LN,useMemo:BN,useReducer:pm,useRef:c0,useState:function(){return pm(ko)},useDebugValue:FI,useDeferredValue:function(e){var t=pm(ko),n=t[0],u=t[1];return h0(function(){var l=Pa.transition;Pa.transition=1;try{u(e)}finally{Pa.transition=l}},[e]),n},useTransition:function(){var e=pm(ko)[0];return[c0().current,e]},useMutableSource:DN,useOpaqueIdentifier:function(){return pm(ko)[0]},unstable_isNewReconciler:!1},Sme=Sc.ReactCurrentOwner,ao=!1;function Mn(e,t,n,u){t.child=e===null?ON(t,null,n,u):o0(t,e.child,n,u)}function dF(e,t,n,u,l){n=n.render;var o=t.ref;return xf(t,l),u=LI(e,t,n,u,o,l),e!==null&&!ao?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~l,Is(e,t,l)):(t.flags|=1,Mn(e,t,u,l),t.child)}function pF(e,t,n,u,l,o){if(e===null){var _=n.type;return typeof _=="function"&&!GI(_)&&_.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=_,jN(e,t,_,u,l,o)):(e=H_(n.type,null,u,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}return _=e.child,!(l&o)&&(l=_.memoizedProps,n=n.compare,n=n!==null?n:$m,n(l,u)&&e.ref===t.ref)?Is(e,t,o):(t.flags|=1,e=Ju(_,u),e.ref=t.ref,e.return=t,t.child=e)}function jN(e,t,n,u,l,o){if(e!==null&&$m(e.memoizedProps,u)&&e.ref===t.ref)if(ao=!1,(o&l)!==0)e.flags&16384&&(ao=!0);else return t.lanes=e.lanes,Is(e,t,o);return Vq(e,t,n,u,o)}function fq(e,t,n){var u=t.pendingProps,l=u.children,o=e!==null?e.memoizedState:null;if(u.mode==="hidden"||u.mode==="unstable-defer-without-hiding"){if(!(t.mode&4))t.memoizedState={baseLanes:0},L_(t,n);else if(n&1073741824)t.memoizedState={baseLanes:0},L_(t,o!==null?o.baseLanes:n);else return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e},L_(t,e),null;}else o!==null?(u=o.baseLanes|n,t.memoizedState=null):u=n,L_(t,u);return Mn(e,t,l,n),t.child}function UN(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=128)}function Vq(e,t,n,u,l){var o=Rn(n)?_c:en.current;return o=Ef(t,o),xf(t,l),n=LI(e,t,n,u,o,l),e!==null&&!ao?(t.updateQueue=e.updateQueue,t.flags&=-517,e.lanes&=~l,Is(e,t,l)):(t.flags|=1,Mn(e,t,n,l),t.child)}function mF(e,t,n,u,l){if(Rn(n)){var o=!0;j_(t)}else o=!1;if(xf(t,l),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),CN(t,n,u),Bq(t,n,u,l),u=!0;else if(e===null){var _=t.stateNode,b=t.memoizedProps;_.props=b;var E=_.context,T=n.contextType;typeof T=="object"&&T!==null?T=Ca(T):(T=Rn(n)?_c:en.current,T=Ef(t,T));var C=n.getDerivedStateFromProps,z=typeof C=="function"||typeof _.getSnapshotBeforeUpdate=="function";z||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==u||E!==T)&&oF(t,_,u,T),Du=!1;var $=t.memoizedState;_.state=$,Hm(t,u,_,l),E=t.memoizedState,b!==u||$!==E||On.current||Du?(typeof C=="function"&&(a0(t,n,C,u),E=t.memoizedState),(b=Du||aF(t,n,b,u,$,E,T))?(z||typeof _.UNSAFE_componentWillMount!="function"&&typeof _.componentWillMount!="function"||(typeof _.componentWillMount=="function"&&_.componentWillMount(),typeof _.UNSAFE_componentWillMount=="function"&&_.UNSAFE_componentWillMount()),typeof _.componentDidMount=="function"&&(t.flags|=4)):(typeof _.componentDidMount=="function"&&(t.flags|=4),t.memoizedProps=u,t.memoizedState=E),_.props=u,_.state=E,_.context=T,u=b):(typeof _.componentDidMount=="function"&&(t.flags|=4),u=!1)}else{_=t.stateNode,AN(e,t),b=t.memoizedProps,T=t.type===t.elementType?b:no(t.type,b),_.props=T,z=t.pendingProps,$=_.context,E=n.contextType,typeof E=="object"&&E!==null?E=Ca(E):(E=Rn(n)?_c:en.current,E=Ef(t,E));var oe=n.getDerivedStateFromProps;(C=typeof oe=="function"||typeof _.getSnapshotBeforeUpdate=="function")||typeof _.UNSAFE_componentWillReceiveProps!="function"&&typeof _.componentWillReceiveProps!="function"||(b!==z||$!==E)&&oF(t,_,u,E),Du=!1,$=t.memoizedState,_.state=$,Hm(t,u,_,l);var xe=t.memoizedState;b!==z||$!==xe||On.current||Du?(typeof oe=="function"&&(a0(t,n,oe,u),xe=t.memoizedState),(T=Du||aF(t,n,T,u,$,xe,E))?(C||typeof _.UNSAFE_componentWillUpdate!="function"&&typeof _.componentWillUpdate!="function"||(typeof _.componentWillUpdate=="function"&&_.componentWillUpdate(u,xe,E),typeof _.UNSAFE_componentWillUpdate=="function"&&_.UNSAFE_componentWillUpdate(u,xe,E)),typeof _.componentDidUpdate=="function"&&(t.flags|=4),typeof _.getSnapshotBeforeUpdate=="function"&&(t.flags|=256)):(typeof _.componentDidUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=256),t.memoizedProps=u,t.memoizedState=xe),_.props=u,_.state=xe,_.context=E,u=T):(typeof _.componentDidUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=4),typeof _.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&$===e.memoizedState||(t.flags|=256),u=!1)}return Gq(e,t,n,u,o,l)}function Gq(e,t,n,u,l,o){UN(e,t);var _=(t.flags&64)!==0;if(!u&&!_)return l&&eF(t,n,!1),Is(e,t,o);u=t.stateNode,Sme.current=t;var b=_&&typeof n.getDerivedStateFromError!="function"?null:u.render();return t.flags|=1,e!==null&&_?(t.child=o0(t,e.child,null,o),t.child=o0(t,null,b,o)):Mn(e,t,b,o),t.memoizedState=u.state,l&&eF(t,n,!0),t.child}function vF(e){var t=e.stateNode;t.pendingContext?Qz(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Qz(e,t.context,!1),jq(e,t.containerInfo)}var D_={dehydrated:null,retryLane:0};function gF(e,t,n){var u=t.pendingProps,l=Fr.current,o=!1,_;return(_=(t.flags&64)!==0)||(_=e!==null&&e.memoizedState===null?!1:(l&2)!==0),_?(o=!0,t.flags&=-65):e!==null&&e.memoizedState===null||u.fallback===void 0||u.unstable_avoidThisFallback===!0||(l|=1),Nr(Fr,l&1),e===null?(u.fallback!==void 0&&Uq(t),e=u.children,l=u.fallback,o?(e=yF(t,e,l,n),t.child.memoizedState={baseLanes:n},t.memoizedState=D_,e):typeof u.unstable_expectedLoadTime=="number"?(e=yF(t,e,l,n),t.child.memoizedState={baseLanes:n},t.memoizedState=D_,t.lanes=33554432,e):(n=HI({mode:"visible",children:e},t.mode,n,null),n.return=t,t.child=n)):e.memoizedState!==null?o?(u=xF(e,t,u.children,u.fallback,n),o=t.child,l=e.child.memoizedState,o.memoizedState=l===null?{baseLanes:n}:{baseLanes:l.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=D_,u):(n=_F(e,t,u.children,n),t.memoizedState=null,n):o?(u=xF(e,t,u.children,u.fallback,n),o=t.child,l=e.child.memoizedState,o.memoizedState=l===null?{baseLanes:n}:{baseLanes:l.baseLanes|n},o.childLanes=e.childLanes&~n,t.memoizedState=D_,u):(n=_F(e,t,u.children,n),t.memoizedState=null,n)}function yF(e,t,n,u){var l=e.mode,o=e.child;return t={mode:"hidden",children:t},!(l&2)&&o!==null?(o.childLanes=0,o.pendingProps=t):o=HI(t,l,0,null),n=qf(n,l,u,null),o.return=e,n.return=e,o.sibling=n,e.child=o,n}function _F(e,t,n,u){var l=e.child;return e=l.sibling,n=Ju(l,{mode:"visible",children:n}),!(t.mode&2)&&(n.lanes=u),n.return=t,n.sibling=null,e!==null&&(e.nextEffect=null,e.flags=8,t.firstEffect=t.lastEffect=e),t.child=n}function xF(e,t,n,u,l){var o=t.mode,_=e.child;e=_.sibling;var b={mode:"hidden",children:n};return!(o&2)&&t.child!==_?(n=t.child,n.childLanes=0,n.pendingProps=b,_=n.lastEffect,_!==null?(t.firstEffect=n.firstEffect,t.lastEffect=_,_.nextEffect=null):t.firstEffect=t.lastEffect=null):n=Ju(_,b),e!==null?u=Ju(e,u):(u=qf(u,o,l,null),u.flags|=2),u.return=t,n.return=t,n.sibling=u,t.child=n,u}function bF(e,t){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),TN(e.return,t)}function dq(e,t,n,u,l,o){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:u,tail:n,tailMode:l,lastEffect:o}:(_.isBackwards=t,_.rendering=null,_.renderingStartTime=0,_.last=u,_.tail=n,_.tailMode=l,_.lastEffect=o)}function wF(e,t,n){var u=t.pendingProps,l=u.revealOrder,o=u.tail;if(Mn(e,t,u.children,n),u=Fr.current,u&2)u=u&1|2,t.flags|=64;else{if(e!==null&&e.flags&64)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&bF(e,n);else if(e.tag===19)bF(e,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}u&=1}if(Nr(Fr,u),!(t.mode&2))t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&s0(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),dq(t,!1,l,n,o,t.lastEffect);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&s0(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}dq(t,!0,n,null,o,t.lastEffect);break;case"together":dq(t,!1,null,null,void 0,t.lastEffect);break;default:t.memoizedState=null;}return t.child}function Is(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Qm|=t.lanes,n&t.childLanes){if(e!==null&&t.child!==e.child)throw Error(Ue(153));if(t.child!==null){for(e=t.child,n=Ju(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ju(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}return null}var $N,Hq,VN,GN;$N=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Hq=function(){};VN=function(e,t,n,u){var l=e.memoizedProps;if(l!==u){e=t.stateNode,vc(Lo.current);var o=null;switch(n){case"input":l=_q(e,l),u=_q(e,u),o=[];break;case"option":l=wq(e,l),u=wq(e,u),o=[];break;case"select":l=Pr({},l,{value:void 0}),u=Pr({},u,{value:void 0}),o=[];break;case"textarea":l=Sq(e,l),u=Sq(e,u),o=[];break;default:typeof l.onClick!="function"&&typeof u.onClick=="function"&&(e.onclick=Q_);}Eq(n,u);var _;n=null;for(T in l)if(!u.hasOwnProperty(T)&&l.hasOwnProperty(T)&&l[T]!=null)if(T==="style"){var b=l[T];for(_ in b)b.hasOwnProperty(_)&&(n||(n={}),n[_]="")}else T!=="dangerouslySetInnerHTML"&&T!=="children"&&T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&T!=="autoFocus"&&(Lm.hasOwnProperty(T)?o||(o=[]):(o=o||[]).push(T,null));for(T in u){var E=u[T];if(b=l!=null?l[T]:void 0,u.hasOwnProperty(T)&&E!==b&&(E!=null||b!=null))if(T==="style"){if(b){for(_ in b)!b.hasOwnProperty(_)||E&&E.hasOwnProperty(_)||(n||(n={}),n[_]="");for(_ in E)E.hasOwnProperty(_)&&b[_]!==E[_]&&(n||(n={}),n[_]=E[_])}else n||(o||(o=[]),o.push(T,n)),n=E;}else T==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,b=b?b.__html:void 0,E!=null&&b!==E&&(o=o||[]).push(T,E)):T==="children"?typeof E!="string"&&typeof E!="number"||(o=o||[]).push(T,""+E):T!=="suppressContentEditableWarning"&&T!=="suppressHydrationWarning"&&(Lm.hasOwnProperty(T)?(E!=null&&T==="onScroll"&&Sr("scroll",e),o||b===E||(o=[])):typeof E=="object"&&E!==null&&E.$$typeof===fI?E.toString():(o=o||[]).push(T,E))}n&&(o=o||[]).push("style",n);var T=o;(t.updateQueue=T)&&(t.flags|=4)}};GN=function(e,t,n,u){n!==u&&(t.flags|=4)};function vm(e,t){if(!zo)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var u=null;n!==null;)n.alternate!==null&&(u=n),n=n.sibling;u===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:u.sibling=null;}}function qme(e,t,n){var u=t.pendingProps;switch(t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return Rn(t.type)&&t0(),null;case 3:return Af(),qr(On),qr(en),kI(),u=t.stateNode,u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(e===null||e.child===null)&&(k_(t)?t.flags|=4:u.hydrate||(t.flags|=256)),Hq(t),null;case 5:RI(t);var l=vc(Zm.current);if(n=t.type,e!==null&&t.stateNode!=null)VN(e,t,n,u,l),e.ref!==t.ref&&(t.flags|=128);else{if(!u){if(t.stateNode===null)throw Error(Ue(166));return null}if(e=vc(Lo.current),k_(t)){u=t.stateNode,n=t.type;var o=t.memoizedProps;switch(u[Fu]=t,u[e0]=o,n){case"dialog":Sr("cancel",u),Sr("close",u);break;case"iframe":case"object":case"embed":Sr("load",u);break;case"video":case"audio":for(e=0;e<bm.length;e++)Sr(bm[e],u);break;case"source":Sr("error",u);break;case"img":case"image":case"link":Sr("error",u),Sr("load",u);break;case"details":Sr("toggle",u);break;case"input":qz(u,o),Sr("invalid",u);break;case"select":u._wrapperState={wasMultiple:!!o.multiple},Sr("invalid",u);break;case"textarea":Ez(u,o),Sr("invalid",u);}Eq(n,o),e=null;for(var _ in o)o.hasOwnProperty(_)&&(l=o[_],_==="children"?typeof l=="string"?u.textContent!==l&&(e=["children",l]):typeof l=="number"&&u.textContent!==""+l&&(e=["children",""+l]):Lm.hasOwnProperty(_)&&l!=null&&_==="onScroll"&&Sr("scroll",u));switch(n){case"input":I_(u),Iz(u,o,!0);break;case"textarea":I_(u),Tz(u);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(u.onclick=Q_);}u=e,t.updateQueue=u,u!==null&&(t.flags|=4)}else{switch(_=l.nodeType===9?l:l.ownerDocument,e===qq.html&&(e=FF(n)),e===qq.html?n==="script"?(e=_.createElement("div"),e.innerHTML="<script></script>",e=e.removeChild(e.firstChild)):typeof u.is=="string"?e=_.createElement(n,{is:u.is}):(e=_.createElement(n),n==="select"&&(_=e,u.multiple?_.multiple=!0:u.size&&(_.size=u.size))):e=_.createElementNS(e,n),e[Fu]=t,e[e0]=u,$N(e,t,!1,!1),t.stateNode=e,_=Tq(n,u),n){case"dialog":Sr("cancel",e),Sr("close",e),l=u;break;case"iframe":case"object":case"embed":Sr("load",e),l=u;break;case"video":case"audio":for(l=0;l<bm.length;l++)Sr(bm[l],e);l=u;break;case"source":Sr("error",e),l=u;break;case"img":case"image":case"link":Sr("error",e),Sr("load",e),l=u;break;case"details":Sr("toggle",e),l=u;break;case"input":qz(e,u),l=_q(e,u),Sr("invalid",e);break;case"option":l=wq(e,u);break;case"select":e._wrapperState={wasMultiple:!!u.multiple},l=Pr({},u,{value:void 0}),Sr("invalid",e);break;case"textarea":Ez(e,u),l=Sq(e,u),Sr("invalid",e);break;default:l=u;}Eq(n,l);var b=l;for(o in b)if(b.hasOwnProperty(o)){var E=b[o];o==="style"?jF(e,E):o==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&NF(e,E)):o==="children"?typeof E=="string"?(n!=="textarea"||E!=="")&&zm(e,E):typeof E=="number"&&zm(e,""+E):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Lm.hasOwnProperty(o)?E!=null&&o==="onScroll"&&Sr("scroll",e):E!=null&&oI(e,o,E,_))}switch(n){case"input":I_(e),Iz(e,u,!1);break;case"textarea":I_(e),Tz(e);break;case"option":u.value!=null&&e.setAttribute("value",""+Zu(u.value));break;case"select":e.multiple=!!u.multiple,o=u.value,o!=null?vf(e,!!u.multiple,o,!1):u.defaultValue!=null&&vf(e,!!u.multiple,u.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Q_);}yN(n,u)&&(t.flags|=4)}t.ref!==null&&(t.flags|=128)}return null;case 6:if(e&&t.stateNode!=null)GN(e,t,e.memoizedProps,u);else{if(typeof u!="string"&&t.stateNode===null)throw Error(Ue(166));n=vc(Zm.current),vc(Lo.current),k_(t)?(u=t.stateNode,n=t.memoizedProps,u[Fu]=t,u.nodeValue!==n&&(t.flags|=4)):(u=(n.nodeType===9?n:n.ownerDocument).createTextNode(u),u[Fu]=t,t.stateNode=u)}return null;case 13:return qr(Fr),u=t.memoizedState,t.flags&64?(t.lanes=n,t):(u=u!==null,n=!1,e===null?t.memoizedProps.fallback!==void 0&&k_(t):n=e.memoizedState!==null,u&&!n&&t.mode&2&&(e===null&&t.memoizedProps.unstable_avoidThisFallback!==!0||Fr.current&1?Ci===0&&(Ci=3):((Ci===0||Ci===3)&&(Ci=4),pn===null||!(Qm&134217727)&&!(Of&134217727)||wf(pn,Qi))),(u||n)&&(t.flags|=4),null);case 4:return Af(),Hq(t),e===null&&mN(t.stateNode.containerInfo),null;case 10:return MI(t),null;case 17:return Rn(t.type)&&t0(),null;case 19:if(qr(Fr),u=t.memoizedState,u===null)return null;if(o=(t.flags&64)!==0,_=u.rendering,_===null){if(o)vm(u,!1);else{if(Ci!==0||e!==null&&e.flags&64)for(e=t.child;e!==null;){if(_=s0(e),_!==null){for(t.flags|=64,vm(u,!1),o=_.updateQueue,o!==null&&(t.updateQueue=o,t.flags|=4),u.lastEffect===null&&(t.firstEffect=null),t.lastEffect=u.lastEffect,u=n,n=t.child;n!==null;)o=n,e=u,o.flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,_=o.alternate,_===null?(o.childLanes=0,o.lanes=e,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=_.childLanes,o.lanes=_.lanes,o.child=_.child,o.memoizedProps=_.memoizedProps,o.memoizedState=_.memoizedState,o.updateQueue=_.updateQueue,o.type=_.type,e=_.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Nr(Fr,Fr.current&1|2),t.child}e=e.sibling}u.tail!==null&&Ji()>Jq&&(t.flags|=64,o=!0,vm(u,!1),t.lanes=33554432)}}else{if(!o)if(e=s0(_),e!==null){if(t.flags|=64,o=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),vm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!_.alternate&&!zo)return t=t.lastEffect=u.lastEffect,t!==null&&(t.nextEffect=null),null}else 2*Ji()-u.renderingStartTime>Jq&&n!==1073741824&&(t.flags|=64,o=!0,vm(u,!1),t.lanes=33554432);u.isBackwards?(_.sibling=t.child,t.child=_):(n=u.last,n!==null?n.sibling=_:t.child=_,u.last=_)}return u.tail!==null?(n=u.tail,u.rendering=n,u.tail=n.sibling,u.lastEffect=t.lastEffect,u.renderingStartTime=Ji(),n.sibling=null,t=Fr.current,Nr(Fr,o?t&1|2:t&1),n):null;case 23:case 24:return VI(),e!==null&&e.memoizedState!==null!=(t.memoizedState!==null)&&u.mode!=="unstable-defer-without-hiding"&&(t.flags|=4),null;}throw Error(Ue(156,t.tag))}function Ime(e){switch(e.tag){case 1:Rn(e.type)&&t0();var t=e.flags;return t&4096?(e.flags=t&-4097|64,e):null;case 3:if(Af(),qr(On),qr(en),kI(),t=e.flags,t&64)throw Error(Ue(285));return e.flags=t&-4097|64,e;case 5:return RI(e),null;case 13:return qr(Fr),t=e.flags,t&4096?(e.flags=t&-4097|64,e):null;case 19:return qr(Fr),null;case 4:return Af(),null;case 10:return MI(e),null;case 23:case 24:return VI(),null;default:return null;}}function BI(e,t){try{var n="",u=t;do n+=ape(u),u=u.return;while(u);var l=n}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l}}function Wq(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Eme=typeof WeakMap=="function"?WeakMap:Map;function HN(e,t,n){n=$u(-1,n),n.tag=3,n.payload={element:null};var u=t.value;return n.callback=function(){p0||(p0=!0,Qq=u),Wq(e,t)},n}function WN(e,t,n){n=$u(-1,n),n.tag=3;var u=e.type.getDerivedStateFromError;if(typeof u=="function"){var l=t.value;n.payload=function(){return Wq(e,t),u(l)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){typeof u!="function"&&(Do===null?Do=new Set([this]):Do.add(this),Wq(e,t));var _=t.stack;this.componentDidCatch(t.value,{componentStack:_!==null?_:""})}),n}var Tme=typeof WeakSet=="function"?WeakSet:Set;function SF(e){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Wu(e,n)}else t.current=null}function Ame(e,t){switch(t.tag){case 0:case 11:case 15:case 22:return;case 1:if(t.flags&256&&e!==null){var n=e.memoizedProps,u=e.memoizedState;e=t.stateNode,t=e.getSnapshotBeforeUpdate(t.elementType===t.type?n:no(t.type,n),u),e.__reactInternalSnapshotBeforeUpdate=t}return;case 3:t.flags&256&&TI(t.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return;}throw Error(Ue(163))}function Pme(e,t,n){switch(n.tag){case 0:case 11:case 15:case 22:if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{if((e.tag&3)===3){var u=e.create;e.destroy=u()}e=e.next}while(e!==t)}if(t=n.updateQueue,t=t!==null?t.lastEffect:null,t!==null){e=t=t.next;do{var l=e;u=l.next,l=l.tag,l&4&&l&1&&(rB(n,e),zme(n,e)),e=u}while(e!==t)}return;case 1:e=n.stateNode,n.flags&4&&(t===null?e.componentDidMount():(u=n.elementType===n.type?t.memoizedProps:no(n.type,t.memoizedProps),e.componentDidUpdate(u,t.memoizedState,e.__reactInternalSnapshotBeforeUpdate))),t=n.updateQueue,t!==null&&nF(n,t,e);return;case 3:if(t=n.updateQueue,t!==null){if(e=null,n.child!==null)switch(n.child.tag){case 5:e=n.child.stateNode;break;case 1:e=n.child.stateNode;}nF(n,t,e)}return;case 5:e=n.stateNode,t===null&&n.flags&4&&yN(n.type,n.memoizedProps)&&e.focus();return;case 6:return;case 4:return;case 12:return;case 13:n.memoizedState===null&&(n=n.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&YF(n))));return;case 19:case 17:case 20:case 21:case 23:case 24:return;}throw Error(Ue(163))}function qF(e,t){for(var n=e;;){if(n.tag===5){var u=n.stateNode;if(t)u=u.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none";else{u=n.stateNode;var l=n.memoizedProps.style;l=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=BF("display",l)}}else if(n.tag===6)n.stateNode.nodeValue=t?"":n.memoizedProps;else if((n.tag!==23&&n.tag!==24||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function IF(e,t){if(yc&&typeof yc.onCommitFiberUnmount=="function")try{yc.onCommitFiberUnmount(AI,t)}catch(o){}switch(t.tag){case 0:case 11:case 14:case 15:case 22:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var n=e=e.next;do{var u=n,l=u.destroy;if(u=u.tag,l!==void 0)if(u&4)rB(t,n);else{u=t;try{l()}catch(o){Wu(u,o)}}n=n.next}while(n!==e)}break;case 1:if(SF(t),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(o){Wu(t,o)}break;case 5:SF(t);break;case 4:ZN(e,t);}}function EF(e){e.alternate=null,e.child=null,e.dependencies=null,e.firstEffect=null,e.lastEffect=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.return=null,e.updateQueue=null}function TF(e){return e.tag===5||e.tag===3||e.tag===4}function AF(e){e:{for(var t=e.return;t!==null;){if(TF(t))break e;t=t.return}throw Error(Ue(160))}var n=t;switch(t=n.stateNode,n.tag){case 5:var u=!1;break;case 3:t=t.containerInfo,u=!0;break;case 4:t=t.containerInfo,u=!0;break;default:throw Error(Ue(161));}n.flags&16&&(zm(t,""),n.flags&=-17);e:t:for(n=e;;){for(;n.sibling===null;){if(n.return===null||TF(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue t;n.child.return=n,n=n.child}if(!(n.flags&2)){n=n.stateNode;break e}}u?Zq(e,n,t):Kq(e,n,t)}function Zq(e,t,n){var u=e.tag,l=u===5||u===6;if(l)e=l?e.stateNode:e.stateNode.instance,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Q_));else if(u!==4&&(e=e.child,e!==null))for(Zq(e,t,n),e=e.sibling;e!==null;)Zq(e,t,n),e=e.sibling}function Kq(e,t,n){var u=e.tag,l=u===5||u===6;if(l)e=l?e.stateNode:e.stateNode.instance,t?n.insertBefore(e,t):n.appendChild(e);else if(u!==4&&(e=e.child,e!==null))for(Kq(e,t,n),e=e.sibling;e!==null;)Kq(e,t,n),e=e.sibling}function ZN(e,t){for(var n=t,u=!1,l,o;;){if(!u){u=n.return;e:for(;;){if(u===null)throw Error(Ue(160));switch(l=u.stateNode,u.tag){case 5:o=!1;break e;case 3:l=l.containerInfo,o=!0;break e;case 4:l=l.containerInfo,o=!0;break e;}u=u.return}u=!0}if(n.tag===5||n.tag===6){e:for(var _=e,b=n,E=b;;)if(IF(_,E),E.child!==null&&E.tag!==4)E.child.return=E,E=E.child;else{if(E===b)break e;for(;E.sibling===null;){if(E.return===null||E.return===b)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}o?(_=l,b=n.stateNode,_.nodeType===8?_.parentNode.removeChild(b):_.removeChild(b)):l.removeChild(n.stateNode)}else if(n.tag===4){if(n.child!==null){l=n.stateNode.containerInfo,o=!0,n.child.return=n,n=n.child;continue}}else if(IF(e,n),n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return,n.tag===4&&(u=!1)}n.sibling.return=n.return,n=n.sibling}}function pq(e,t){switch(t.tag){case 0:case 11:case 14:case 15:case 22:var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var u=n=n.next;do(u.tag&3)===3&&(e=u.destroy,u.destroy=void 0,e!==void 0&&e()),u=u.next;while(u!==n)}return;case 1:return;case 5:if(n=t.stateNode,n!=null){u=t.memoizedProps;var l=e!==null?e.memoizedProps:u;e=t.type;var o=t.updateQueue;if(t.updateQueue=null,o!==null){for(n[e0]=u,e==="input"&&u.type==="radio"&&u.name!=null&&LF(n,u),Tq(e,l),t=Tq(e,u),l=0;l<o.length;l+=2){var _=o[l],b=o[l+1];_==="style"?jF(n,b):_==="dangerouslySetInnerHTML"?NF(n,b):_==="children"?zm(n,b):oI(n,_,b,t)}switch(e){case"input":xq(n,u);break;case"textarea":zF(n,u);break;case"select":e=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!u.multiple,o=u.value,o!=null?vf(n,!!u.multiple,o,!1):e!==!!u.multiple&&(u.defaultValue!=null?vf(n,!!u.multiple,u.defaultValue,!0):vf(n,!!u.multiple,u.multiple?[]:"",!1));}}}return;case 6:if(t.stateNode===null)throw Error(Ue(162));t.stateNode.nodeValue=t.memoizedProps;return;case 3:n=t.stateNode,n.hydrate&&(n.hydrate=!1,YF(n.containerInfo));return;case 12:return;case 13:t.memoizedState!==null&&($I=Ji(),qF(t.child,!0)),PF(t);return;case 19:PF(t);return;case 17:return;case 23:case 24:qF(t,t.memoizedState!==null);return;}throw Error(Ue(163))}function PF(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Tme),t.forEach(function(u){var l=Bme.bind(null,e,u);n.has(u)||(n.add(u),u.then(l,l))})}}function Cme(e,t){return e!==null&&(e=e.memoizedState,e===null||e.dehydrated!==null)?(t=t.memoizedState,t!==null&&t.dehydrated===null):!1}var Mme=Math.ceil,d0=Sc.ReactCurrentDispatcher,jI=Sc.ReactCurrentOwner,Et=0,pn=null,oi=null,Qi=0,bc=0,Xq=Qu(0),Ci=0,T0=null,Mf=0,Qm=0,Of=0,UI=0,Yq=null,$I=0,Jq=1/0;function Rf(){Jq=Ji()+500}var ut=null,p0=!1,Qq=null,Do=null,Yu=!1,Rm=null,wm=90,eI=[],tI=[],Es=null,km=0,rI=null,$_=-1,Ss=0,V_=0,Dm=null,G_=!1;function sa(){return Et&48?Ji():$_!==-1?$_:$_=Ji()}function Gu(e){if(e=e.mode,!(e&2))return 1;if(!(e&4))return Tf()===99?1:2;if(Ss===0&&(Ss=Mf),yme.transition!==0){V_!==0&&(V_=Yq!==null?Yq.pendingLanes:0),e=Ss;var t=4186112&~V_;return t&=-t,t===0&&(e=4186112&~e,t=e&-e,t===0&&(t=8192)),t}return e=Tf(),Et&4&&e===98?e=Y_(12,Ss):(e=bpe(e),e=Y_(e,Ss)),e}function Hu(e,t,n){if(50<km)throw km=0,rI=null,Error(Ue(185));if(e=A0(e,t),e===null)return null;x0(e,t,n),e===pn&&(Of|=t,Ci===4&&wf(e,Qi));var u=Tf();t===1?Et&8&&!(Et&48)?iI(e):(Ma(e,n),Et===0&&(Rf(),Fo())):(!(Et&4)||u!==98&&u!==99||(Es===null?Es=new Set([e]):Es.add(e)),Ma(e,n)),Yq=e}function A0(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}function Ma(e,t){for(var n=e.callbackNode,u=e.suspendedLanes,l=e.pingedLanes,o=e.expirationTimes,_=e.pendingLanes;0<_;){var b=31-Ku(_),E=1<<b,T=o[b];if(T===-1){if(!(E&u)||E&l){T=t,sf(E);var C=vr;o[b]=10<=C?T+250:6<=C?T+5e3:-1}}else T<=t&&(e.expiredLanes|=E);_&=~E}if(u=jm(e,e===pn?Qi:0),t=vr,u===0)n!==null&&(n!==lq&&Fq(n),e.callbackNode=null,e.callbackPriority=0);else{if(n!==null){if(e.callbackPriority===t)return;n!==lq&&Fq(n)}t===15?(n=iI.bind(null,e),ws===null?(ws=[n],U_=PI(I0,EN)):ws.push(n),n=lq):t===14?n=Gm(99,iI.bind(null,e)):(n=wpe(t),n=Gm(n,KN.bind(null,e))),e.callbackPriority=t,e.callbackNode=n}}function KN(e){if($_=-1,V_=Ss=0,Et&48)throw Error(Ue(327));var t=e.callbackNode;if(el()&&e.callbackNode!==t)return null;var n=jm(e,e===pn?Qi:0);if(n===0)return null;var u=n,l=Et;Et|=16;var o=QN();(pn!==e||Qi!==u)&&(Rf(),Sf(e,u));do try{kme();break}catch(b){JN(e,b)}while(!0);if(CI(),d0.current=o,Et=l,oi!==null?u=0:(pn=null,Qi=0,u=Ci),Mf&Of)Sf(e,0);else if(u!==0){if(u===2&&(Et|=64,e.hydrate&&(e.hydrate=!1,TI(e.containerInfo)),n=nN(e),n!==0&&(u=Sm(e,n))),u===1)throw t=T0,Sf(e,0),wf(e,n),Ma(e,Ji()),t;switch(e.finishedWork=e.current.alternate,e.finishedLanes=n,u){case 0:case 1:throw Error(Ue(345));case 2:fc(e);break;case 3:if(wf(e,n),(n&62914560)===n&&(u=$I+500-Ji(),10<u)){if(jm(e,0)!==0)break;if(l=e.suspendedLanes,(l&n)!==n){sa(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Xz(fc.bind(null,e),u);break}fc(e);break;case 4:if(wf(e,n),(n&4186112)===n)break;for(u=e.eventTimes,l=-1;0<n;){var _=31-Ku(n);o=1<<_,_=u[_],_>l&&(l=_),n&=~o}if(n=l,n=Ji()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Mme(n/1960))-n,10<n){e.timeoutHandle=Xz(fc.bind(null,e),n);break}fc(e);break;case 5:fc(e);break;default:throw Error(Ue(329));}}return Ma(e,Ji()),e.callbackNode===t?KN.bind(null,e):null}function wf(e,t){for(t&=~UI,t&=~Of,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ku(t),u=1<<n;e[n]=-1,t&=~u}}function iI(e){if(Et&48)throw Error(Ue(327));if(el(),e===pn&&e.expiredLanes&Qi){var t=Qi,n=Sm(e,t);Mf&Of&&(t=jm(e,t),n=Sm(e,t))}else t=jm(e,0),n=Sm(e,t);if(e.tag!==0&&n===2&&(Et|=64,e.hydrate&&(e.hydrate=!1,TI(e.containerInfo)),t=nN(e),t!==0&&(n=Sm(e,t))),n===1)throw n=T0,Sf(e,0),wf(e,t),Ma(e,Ji()),n;return e.finishedWork=e.current.alternate,e.finishedLanes=t,fc(e),Ma(e,Ji()),null}function Ome(){if(Es!==null){var e=Es;Es=null,e.forEach(function(t){t.expiredLanes|=24&t.pendingLanes,Ma(t,Ji())})}Fo()}function XN(e,t){var n=Et;Et|=1;try{return e(t)}finally{Et=n,Et===0&&(Rf(),Fo())}}function YN(e,t){var n=Et;Et&=-2,Et|=8;try{return e(t)}finally{Et=n,Et===0&&(Rf(),Fo())}}function L_(e,t){Nr(Xq,bc),bc|=t,Mf|=t}function VI(){bc=Xq.current,qr(Xq)}function Sf(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,fme(n)),oi!==null)for(n=oi.return;n!==null;){var u=n;switch(u.tag){case 1:u=u.type.childContextTypes,u!=null&&t0();break;case 3:Af(),qr(On),qr(en),kI();break;case 5:RI(u);break;case 4:Af();break;case 13:qr(Fr);break;case 19:qr(Fr);break;case 10:MI(u);break;case 23:case 24:VI();}n=n.return}pn=e,oi=Ju(e.current,null),Qi=bc=Mf=t,Ci=0,T0=null,UI=Of=Qm=0}function JN(e,t){do{var n=oi;try{if(CI(),Mm.current=f0,u0){for(var u=Hr.memoizedState;u!==null;){var l=u.queue;l!==null&&(l.pending=null),u=u.next}u0=!1}if(Km=0,Pi=Yi=Hr=null,Om=!1,jI.current=null,n===null||n.return===null){Ci=1,T0=t,oi=null;break}e:{var o=e,_=n.return,b=n,E=t;if(t=Qi,b.flags|=2048,b.firstEffect=b.lastEffect=null,E!==null&&typeof E=="object"&&typeof E.then=="function"){var T=E;if(!(b.mode&2)){var C=b.alternate;C?(b.updateQueue=C.updateQueue,b.memoizedState=C.memoizedState,b.lanes=C.lanes):(b.updateQueue=null,b.memoizedState=null)}var z=(Fr.current&1)!==0,$=_;do{var oe;if(oe=$.tag===13){var xe=$.memoizedState;if(xe!==null)oe=xe.dehydrated!==null;else{var _e=$.memoizedProps;oe=_e.fallback===void 0?!1:_e.unstable_avoidThisFallback!==!0?!0:!z}}if(oe){var X=$.updateQueue;if(X===null){var K=new Set;K.add(T),$.updateQueue=K}else X.add(T);if(!($.mode&2)){if($.flags|=64,b.flags|=16384,b.flags&=-2981,b.tag===1)if(b.alternate===null)b.tag=17;else{var re=$u(-1,1);re.tag=2,Vu(b,re)}b.lanes|=1;break e}E=void 0,b=t;var ge=o.pingCache;if(ge===null?(ge=o.pingCache=new Eme,E=new Set,ge.set(T,E)):(E=ge.get(T),E===void 0&&(E=new Set,ge.set(T,E))),!E.has(b)){E.add(b);var be=Nme.bind(null,o,T,b);T.then(be,be)}$.flags|=4096,$.lanes=t;break e}$=$.return}while($!==null);E=Error((mf(b.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}Ci!==5&&(Ci=2),E=BI(E,b),$=_;do{switch($.tag){case 3:o=E,$.flags|=4096,t&=-t,$.lanes|=t;var et=HN($,o,t);iF($,et);break e;case 1:o=E;var Le=$.type,nt=$.stateNode;if(!($.flags&64)&&(typeof Le.getDerivedStateFromError=="function"||nt!==null&&typeof nt.componentDidCatch=="function"&&(Do===null||!Do.has(nt)))){$.flags|=4096,t&=-t,$.lanes|=t;var gt=WN($,o,t);iF($,gt);break e}}$=$.return}while($!==null)}tB(n)}catch(Qe){t=Qe,oi===n&&n!==null&&(oi=n=n.return);continue}break}while(!0)}function QN(){var e=d0.current;return d0.current=f0,e===null?f0:e}function Sm(e,t){var n=Et;Et|=16;var u=QN();pn===e&&Qi===t||Sf(e,t);do try{Rme();break}catch(l){JN(e,l)}while(!0);if(CI(),Et=n,d0.current=u,oi!==null)throw Error(Ue(261));return pn=null,Qi=0,Ci}function Rme(){for(;oi!==null;)eB(oi)}function kme(){for(;oi!==null&&!mme();)eB(oi)}function eB(e){var t=iB(e.alternate,e,bc);e.memoizedProps=e.pendingProps,t===null?tB(e):oi=t,jI.current=null}function tB(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&2048){if(n=Ime(t),n!==null){n.flags&=2047,oi=n;return}e!==null&&(e.firstEffect=e.lastEffect=null,e.flags|=2048)}else{if(n=qme(n,t,bc),n!==null){oi=n;return}if(n=t,n.tag!==24&&n.tag!==23||n.memoizedState===null||bc&1073741824||!(n.mode&4)){for(var u=0,l=n.child;l!==null;)u|=l.lanes|l.childLanes,l=l.sibling;n.childLanes=u}e!==null&&!(e.flags&2048)&&(e.firstEffect===null&&(e.firstEffect=t.firstEffect),t.lastEffect!==null&&(e.lastEffect!==null&&(e.lastEffect.nextEffect=t.firstEffect),e.lastEffect=t.lastEffect),1<t.flags&&(e.lastEffect!==null?e.lastEffect.nextEffect=t:e.firstEffect=t,e.lastEffect=t))}if(t=t.sibling,t!==null){oi=t;return}oi=t=e}while(t!==null);Ci===0&&(Ci=5)}function fc(e){var t=Tf();return xc(99,Dme.bind(null,e,t)),null}function Dme(e,t){do el();while(Rm!==null);if(Et&48)throw Error(Ue(327));var n=e.finishedWork;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Ue(177));e.callbackNode=null;var u=n.lanes|n.childLanes,l=u,o=e.pendingLanes&~l;e.pendingLanes=l,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=l,e.mutableReadLanes&=l,e.entangledLanes&=l,l=e.entanglements;for(var _=e.eventTimes,b=e.expirationTimes;0<o;){var E=31-Ku(o),T=1<<E;l[E]=0,_[E]=-1,b[E]=-1,o&=~T}if(Es!==null&&!(u&24)&&Es.has(e)&&Es.delete(e),e===pn&&(oi=pn=null,Qi=0),1<n.flags?n.lastEffect!==null?(n.lastEffect.nextEffect=n,u=n.firstEffect):u=n:u=n.firstEffect,u!==null){if(l=Et,Et|=32,jI.current=null,oq=F_,_=Vz(),Rq(_)){if("selectionStart"in _)b={start:_.selectionStart,end:_.selectionEnd};else e:if(b=(b=_.ownerDocument)&&b.defaultView||window,(T=b.getSelection&&b.getSelection())&&T.rangeCount!==0){b=T.anchorNode,o=T.anchorOffset,E=T.focusNode,T=T.focusOffset;try{b.nodeType,E.nodeType}catch(Qe){b=null;break e}var C=0,z=-1,$=-1,oe=0,xe=0,_e=_,X=null;t:for(;;){for(var K;_e!==b||o!==0&&_e.nodeType!==3||(z=C+o),_e!==E||T!==0&&_e.nodeType!==3||($=C+T),_e.nodeType===3&&(C+=_e.nodeValue.length),(K=_e.firstChild)!==null;)X=_e,_e=K;for(;;){if(_e===_)break t;if(X===b&&++oe===o&&(z=C),X===E&&++xe===T&&($=C),(K=_e.nextSibling)!==null)break;_e=X,X=_e.parentNode}_e=K}b=z===-1||$===-1?null:{start:z,end:$}}else b=null;b=b||{start:0,end:0}}else b=null;sq={focusedElem:_,selectionRange:b},F_=!1,Dm=null,G_=!1,ut=u;do try{Lme()}catch(Qe){if(ut===null)throw Error(Ue(330));Wu(ut,Qe),ut=ut.nextEffect}while(ut!==null);Dm=null,ut=u;do try{for(_=e;ut!==null;){var re=ut.flags;if(re&16&&zm(ut.stateNode,""),re&128){var ge=ut.alternate;if(ge!==null){var be=ge.ref;be!==null&&(typeof be=="function"?be(null):be.current=null)}}switch(re&1038){case 2:AF(ut),ut.flags&=-3;break;case 6:AF(ut),ut.flags&=-3,pq(ut.alternate,ut);break;case 1024:ut.flags&=-1025;break;case 1028:ut.flags&=-1025,pq(ut.alternate,ut);break;case 4:pq(ut.alternate,ut);break;case 8:b=ut,ZN(_,b);var et=b.alternate;EF(b),et!==null&&EF(et);}ut=ut.nextEffect}}catch(Qe){if(ut===null)throw Error(Ue(330));Wu(ut,Qe),ut=ut.nextEffect}while(ut!==null);if(be=sq,ge=Vz(),re=be.focusedElem,_=be.selectionRange,ge!==re&&re&&re.ownerDocument&&fN(re.ownerDocument.documentElement,re)){for(_!==null&&Rq(re)&&(ge=_.start,be=_.end,be===void 0&&(be=ge),("selectionStart"in re)?(re.selectionStart=ge,re.selectionEnd=Math.min(be,re.value.length)):(be=(ge=re.ownerDocument||document)&&ge.defaultView||window,be.getSelection&&(be=be.getSelection(),b=re.textContent.length,et=Math.min(_.start,b),_=_.end===void 0?et:Math.min(_.end,b),!be.extend&&et>_&&(b=_,_=et,et=b),b=$z(re,et),o=$z(re,_),b&&o&&(be.rangeCount!==1||be.anchorNode!==b.node||be.anchorOffset!==b.offset||be.focusNode!==o.node||be.focusOffset!==o.offset)&&(ge=ge.createRange(),ge.setStart(b.node,b.offset),be.removeAllRanges(),et>_?(be.addRange(ge),be.extend(o.node,o.offset)):(ge.setEnd(o.node,o.offset),be.addRange(ge)))))),ge=[],be=re;be=be.parentNode;)be.nodeType===1&&ge.push({element:be,left:be.scrollLeft,top:be.scrollTop});for(typeof re.focus=="function"&&re.focus(),re=0;re<ge.length;re++)be=ge[re],be.element.scrollLeft=be.left,be.element.scrollTop=be.top}F_=!!oq,sq=oq=null,e.current=n,ut=u;do try{for(re=e;ut!==null;){var Le=ut.flags;if(Le&36&&Pme(re,ut.alternate,ut),Le&128){ge=void 0;var nt=ut.ref;if(nt!==null){var gt=ut.stateNode;switch(ut.tag){case 5:ge=gt;break;default:ge=gt;}typeof nt=="function"?nt(ge):nt.current=ge}}ut=ut.nextEffect}}catch(Qe){if(ut===null)throw Error(Ue(330));Wu(ut,Qe),ut=ut.nextEffect}while(ut!==null);ut=null,gme(),Et=l}else e.current=n;if(Yu)Yu=!1,Rm=e,wm=t;else for(ut=u;ut!==null;)t=ut.nextEffect,ut.nextEffect=null,ut.flags&8&&(Le=ut,Le.sibling=null,Le.stateNode=null),ut=t;if(u=e.pendingLanes,u===0&&(Do=null),u===1?e===rI?km++:(km=0,rI=e):km=0,n=n.stateNode,yc&&typeof yc.onCommitFiberRoot=="function")try{yc.onCommitFiberRoot(AI,n,void 0,(n.current.flags&64)===64)}catch(Qe){}if(Ma(e,Ji()),p0)throw p0=!1,e=Qq,Qq=null,e;return Et&8||Fo(),null}function Lme(){for(;ut!==null;){var e=ut.alternate;G_||Dm===null||(ut.flags&8?Cz(ut,Dm)&&(G_=!0):ut.tag===13&&Cme(e,ut)&&Cz(ut,Dm)&&(G_=!0));var t=ut.flags;t&256&&Ame(e,ut),!(t&512)||Yu||(Yu=!0,Gm(97,function(){return el(),null})),ut=ut.nextEffect}}function el(){if(wm!==90){var e=97<wm?97:wm;return wm=90,xc(e,Fme)}return!1}function zme(e,t){eI.push(t,e),Yu||(Yu=!0,Gm(97,function(){return el(),null}))}function rB(e,t){tI.push(t,e),Yu||(Yu=!0,Gm(97,function(){return el(),null}))}function Fme(){if(Rm===null)return!1;var e=Rm;if(Rm=null,Et&48)throw Error(Ue(331));var t=Et;Et|=32;var n=tI;tI=[];for(var u=0;u<n.length;u+=2){var l=n[u],o=n[u+1],_=l.destroy;if(l.destroy=void 0,typeof _=="function")try{_()}catch(E){if(o===null)throw Error(Ue(330));Wu(o,E)}}for(n=eI,eI=[],u=0;u<n.length;u+=2){l=n[u],o=n[u+1];try{var b=l.create;l.destroy=b()}catch(E){if(o===null)throw Error(Ue(330));Wu(o,E)}}for(b=e.current.firstEffect;b!==null;)e=b.nextEffect,b.nextEffect=null,b.flags&8&&(b.sibling=null,b.stateNode=null),b=e;return Et=t,Fo(),!0}function CF(e,t,n){t=BI(n,t),t=HN(e,t,1),Vu(e,t),t=sa(),e=A0(e,1),e!==null&&(x0(e,1,t),Ma(e,t))}function Wu(e,t){if(e.tag===3)CF(e,e,t);else for(var n=e.return;n!==null;){if(n.tag===3){CF(n,e,t);break}else if(n.tag===1){var u=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof u.componentDidCatch=="function"&&(Do===null||!Do.has(u))){e=BI(t,e);var l=WN(n,e,1);if(Vu(n,l),l=sa(),n=A0(n,1),n!==null)x0(n,1,l),Ma(n,l);else if(typeof u.componentDidCatch=="function"&&(Do===null||!Do.has(u)))try{u.componentDidCatch(t,e)}catch(o){}break}}n=n.return}}function Nme(e,t,n){var u=e.pingCache;u!==null&&u.delete(t),t=sa(),e.pingedLanes|=e.suspendedLanes&n,pn===e&&(Qi&n)===n&&(Ci===4||Ci===3&&(Qi&62914560)===Qi&&500>Ji()-$I?Sf(e,0):UI|=n),Ma(e,t)}function Bme(e,t){var n=e.stateNode;n!==null&&n.delete(t),t=0,t===0&&(t=e.mode,t&2?t&4?(Ss===0&&(Ss=Mf),t=uf(62914560&~Ss),t===0&&(t=4194304)):t=Tf()===99?1:2:t=1),n=sa(),e=A0(e,t),e!==null&&(x0(e,t,n),Ma(e,n))}var iB;iB=function(e,t,n){var u=t.lanes;if(e!==null){if(e.memoizedProps!==t.pendingProps||On.current)ao=!0;else if(n&u)ao=!!(e.flags&16384);else{switch(ao=!1,t.tag){case 3:vF(t),hq();break;case 5:sF(t);break;case 1:Rn(t.type)&&j_(t);break;case 4:jq(t,t.stateNode.containerInfo);break;case 10:u=t.memoizedProps.value;var l=t.type._context;Nr(r0,l._currentValue),l._currentValue=u;break;case 13:if(t.memoizedState!==null)return n&t.child.childLanes?gF(e,t,n):(Nr(Fr,Fr.current&1),t=Is(e,t,n),t!==null?t.sibling:null);Nr(Fr,Fr.current&1);break;case 19:if(u=(n&t.childLanes)!==0,e.flags&64){if(u)return wF(e,t,n);t.flags|=64}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Nr(Fr,Fr.current),u)break;return null;case 23:case 24:return t.lanes=0,fq(e,t,n);}return Is(e,t,n)}}else ao=!1;switch(t.lanes=0,t.tag){case 2:if(u=t.type,e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,l=Ef(t,en.current),xf(t,n),l=LI(null,t,u,e,l,n),t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0){if(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rn(u)){var o=!0;j_(t)}else o=!1;t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,OI(t);var _=u.getDerivedStateFromProps;typeof _=="function"&&a0(t,u,_,e),l.updater=E0,t.stateNode=l,l._reactInternals=t,Bq(t,u,e,n),t=Gq(null,t,u,!0,o,n)}else t.tag=0,Mn(null,t,l,n),t=t.child;return t;case 16:l=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,o=l._init,l=o(l._payload),t.type=l,o=t.tag=Ume(l),e=no(l,e),o){case 0:t=Vq(null,t,l,e,n);break e;case 1:t=mF(null,t,l,e,n);break e;case 11:t=dF(null,t,l,e,n);break e;case 14:t=pF(null,t,l,no(l.type,e),u,n);break e;}throw Error(Ue(306,l,""))}return t;case 0:return u=t.type,l=t.pendingProps,l=t.elementType===u?l:no(u,l),Vq(e,t,u,l,n);case 1:return u=t.type,l=t.pendingProps,l=t.elementType===u?l:no(u,l),mF(e,t,u,l,n);case 3:if(vF(t),u=t.updateQueue,e===null||u===null)throw Error(Ue(282));if(u=t.pendingProps,l=t.memoizedState,l=l!==null?l.element:null,AN(e,t),Hm(t,u,null,n),u=t.memoizedState.element,u===l)hq(),t=Is(e,t,n);else{if(l=t.stateNode,(o=l.hydrate)&&(Nu=_f(t.stateNode.containerInfo.firstChild),qs=t,o=zo=!0),o){if(e=l.mutableSourceEagerHydrationData,e!=null)for(l=0;l<e.length;l+=2)o=e[l],o._workInProgressVersionPrimary=e[l+1],bf.push(o);for(n=ON(t,null,u,n),t.child=n;n;)n.flags=n.flags&-3|1024,n=n.sibling}else Mn(e,t,u,n),hq();t=t.child}return t;case 5:return sF(t),e===null&&Uq(t),u=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,_=l.children,Lq(u,l)?_=null:o!==null&&Lq(u,o)&&(t.flags|=16),UN(e,t),Mn(e,t,_,n),t.child;case 6:return e===null&&Uq(t),null;case 13:return gF(e,t,n);case 4:return jq(t,t.stateNode.containerInfo),u=t.pendingProps,e===null?t.child=o0(t,null,u,n):Mn(e,t,u,n),t.child;case 11:return u=t.type,l=t.pendingProps,l=t.elementType===u?l:no(u,l),dF(e,t,u,l,n);case 7:return Mn(e,t,t.pendingProps,n),t.child;case 8:return Mn(e,t,t.pendingProps.children,n),t.child;case 12:return Mn(e,t,t.pendingProps.children,n),t.child;case 10:e:{u=t.type._context,l=t.pendingProps,_=t.memoizedProps,o=l.value;var b=t.type._context;if(Nr(r0,b._currentValue),b._currentValue=o,_!==null)if(b=_.value,o=Ta(b,o)?0:(typeof u._calculateChangedBits=="function"?u._calculateChangedBits(b,o):1073741823)|0,o===0){if(_.children===l.children&&!On.current){t=Is(e,t,n);break e}}else for(b=t.child,b!==null&&(b.return=t);b!==null;){var E=b.dependencies;if(E!==null){_=b.child;for(var T=E.firstContext;T!==null;){if(T.context===u&&T.observedBits&o){b.tag===1&&(T=$u(-1,n&-n),T.tag=2,Vu(b,T)),b.lanes|=n,T=b.alternate,T!==null&&(T.lanes|=n),TN(b.return,n),E.lanes|=n;break}T=T.next}}else _=b.tag===10&&b.type===t.type?null:b.child;if(_!==null)_.return=b;else for(_=b;_!==null;){if(_===t){_=null;break}if(b=_.sibling,b!==null){b.return=_.return,_=b;break}_=_.return}b=_}Mn(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,o=t.pendingProps,u=o.children,xf(t,n),l=Ca(l,o.unstable_observedBits),u=u(l),t.flags|=1,Mn(e,t,u,n),t.child;case 14:return l=t.type,o=no(l,t.pendingProps),o=no(l.type,o),pF(e,t,l,o,u,n);case 15:return jN(e,t,t.type,t.pendingProps,u,n);case 17:return u=t.type,l=t.pendingProps,l=t.elementType===u?l:no(u,l),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,Rn(u)?(e=!0,j_(t)):e=!1,xf(t,n),CN(t,u,l),Bq(t,u,l,n),Gq(null,t,u,!0,e,n);case 19:return wF(e,t,n);case 23:return fq(e,t,n);case 24:return fq(e,t,n);}throw Error(Ue(156,t.tag))};function jme(e,t,n,u){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=u,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Aa(e,t,n,u){return new jme(e,t,n,u)}function GI(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ume(e){if(typeof e=="function")return GI(e)?1:0;if(e!=null){if(e=e.$$typeof,e===g0)return 11;if(e===y0)return 14}return 2}function Ju(e,t){var n=e.alternate;return n===null?(n=Aa(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function H_(e,t,n,u,l,o){var _=2;if(u=e,typeof e=="function")GI(e)&&(_=1);else if(typeof e=="string")_=5;else e:switch(e){case Lu:return qf(n.children,l,o,t);case RF:_=8,l|=16;break;case sI:_=8,l|=1;break;case qm:return e=Aa(12,n,t,l|8),e.elementType=qm,e.type=qm,e.lanes=o,e;case Im:return e=Aa(13,n,t,l),e.type=Im,e.elementType=Im,e.lanes=o,e;case W_:return e=Aa(19,n,t,l),e.elementType=W_,e.lanes=o,e;case dI:return HI(n,l,o,t);case yq:return e=Aa(24,n,t,l),e.elementType=yq,e.lanes=o,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uI:_=10;break e;case lI:_=9;break e;case g0:_=11;break e;case y0:_=14;break e;case cI:_=16,u=null;break e;case hI:_=22;break e;}throw Error(Ue(130,e==null?e:typeof e,""));}return t=Aa(_,n,t,l),t.elementType=e,t.type=u,t.lanes=o,t}function qf(e,t,n,u){return e=Aa(7,e,u,t),e.lanes=n,e}function HI(e,t,n,u){return e=Aa(23,e,u,t),e.elementType=dI,e.lanes=n,e}function mq(e,t,n){return e=Aa(6,e,null,t),e.lanes=n,e}function vq(e,t,n){return t=Aa(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $me(e,t,n){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=eq(0),this.expirationTimes=eq(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eq(0),this.mutableSourceEagerHydrationData=null}function Vme(e,t,n){var u=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:dc,key:u==null?null:""+u,children:e,containerInfo:t,implementation:n}}function m0(e,t,n,u){var l=t.current,o=sa(),_=Gu(l);e:if(n){n=n._reactInternals;t:{if(qc(n)!==n||n.tag!==1)throw Error(Ue(170));var b=n;do{switch(b.tag){case 3:b=b.stateNode.context;break t;case 1:if(Rn(b.type)){b=b.stateNode.__reactInternalMemoizedMergedChildContext;break t}}b=b.return}while(b!==null);throw Error(Ue(171))}if(n.tag===1){var E=n.type;if(Rn(E)){n=xN(n,E,b);break e}}n=b}else n=Xu;return t.context===null?t.context=n:t.pendingContext=n,t=$u(o,_),t.payload={element:e},u=u===void 0?null:u,u!==null&&(t.callback=u),Vu(l,t),Hu(l,_,o),_}function gq(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode;}}function MF(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function WI(e,t){MF(e,t),(e=e.alternate)&&MF(e,t)}function Gme(){return null}function ZI(e,t,n){var u=n!=null&&n.hydrationOptions!=null&&n.hydrationOptions.mutableSources||null;if(n=new $me(e,t,n!=null&&n.hydrate===!0),t=Aa(3,null,null,t===2?7:t===1?3:0),n.current=t,t.stateNode=n,OI(t),e[Cf]=n.current,mN(e.nodeType===8?e.parentNode:e),u)for(e=0;e<u.length;e++){t=u[e];var l=t._getVersion;l=l(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,l]:n.mutableSourceEagerHydrationData.push(t,l)}this._internalRoot=n}ZI.prototype.render=function(e){m0(e,this._internalRoot,null,null)};ZI.prototype.unmount=function(){var e=this._internalRoot,t=e.containerInfo;m0(null,e,null,function(){t[Cf]=null})};function ev(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Hme(e,t){if(t||(t=e?e.nodeType===9?e.documentElement:e.firstChild:null,t=!(!t||t.nodeType!==1||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new ZI(e,0,t?{hydrate:!0}:void 0)}function P0(e,t,n,u,l){var o=n._reactRootContainer;if(o){var _=o._internalRoot;if(typeof l=="function"){var b=l;l=function(){var T=gq(_);b.call(T)}}m0(t,_,e,l)}else{if(o=n._reactRootContainer=Hme(n,u),_=o._internalRoot,typeof l=="function"){var E=l;l=function(){var T=gq(_);E.call(T)}}YN(function(){m0(t,_,e,l)})}return gq(_)}ZF=function(e){if(e.tag===13){var t=sa();Hu(e,4,t),WI(e,4)}};yI=function(e){if(e.tag===13){var t=sa();Hu(e,67108864,t),WI(e,67108864)}};KF=function(e){if(e.tag===13){var t=sa(),n=Gu(e);Hu(e,n,t),WI(e,n)}};XF=function(e,t){return t()};Aq=function(e,t,n){switch(t){case"input":if(xq(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+"][type=\"radio\"]"),t=0;t<n.length;t++){var u=n[t];if(u!==e&&u.form===e.form){var l=q0(u);if(!l)throw Error(Ue(90));DF(u),xq(u,l)}}}break;case"textarea":zF(e,n);break;case"select":t=n.value,t!=null&&vf(e,!!n.multiple,t,!1);}};mI=XN;VF=function(e,t,n,u,l){var o=Et;Et|=4;try{return xc(98,e.bind(null,t,n,u,l))}finally{Et=o,Et===0&&(Rf(),Fo())}};vI=function(){!(Et&49)&&(Ome(),el())};GF=function(e,t){var n=Et;Et|=2;try{return e(t)}finally{Et=n,Et===0&&(Rf(),Fo())}};function nB(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ev(t))throw Error(Ue(200));return Vme(e,t,null,n)}var Wme={Events:[Ym,ff,q0,UF,$F,el,{current:!1}]},gm={findFiberByHostInstance:mc,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},Zme={bundleType:gm.bundleType,version:gm.version,rendererPackageName:gm.rendererPackageName,rendererConfig:gm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Sc.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=WF(e),e===null?null:e.stateNode},findFiberByHostInstance:gm.findFiberByHostInstance||Gme,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(ym=__REACT_DEVTOOLS_GLOBAL_HOOK__,!ym.isDisabled&&ym.supportsFiber))try{AI=ym.inject(Zme),yc=ym}catch(e){}var ym;Oa.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Wme;Oa.createPortal=nB;Oa.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Ue(188)):Error(Ue(268,Object.keys(e)));return e=WF(t),e=e===null?null:e.stateNode,e};Oa.flushSync=function(e,t){var n=Et;if(n&48)return e(t);Et|=1;try{if(e)return xc(99,e.bind(null,t))}finally{Et=n,Fo()}};Oa.hydrate=function(e,t,n){if(!ev(t))throw Error(Ue(200));return P0(null,e,t,!0,n)};Oa.render=function(e,t,n){if(!ev(t))throw Error(Ue(200));return P0(null,e,t,!1,n)};Oa.unmountComponentAtNode=function(e){if(!ev(e))throw Error(Ue(40));return e._reactRootContainer?(YN(function(){P0(null,null,e,!1,function(){e._reactRootContainer=null,e[Cf]=null})}),!0):!1};Oa.unstable_batchedUpdates=XN;Oa.unstable_createPortal=function(e,t){return nB(e,t,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};Oa.unstable_renderSubtreeIntoContainer=function(e,t,n,u){if(!ev(n))throw Error(Ue(200));if(e==null||e._reactInternals===void 0)throw Error(Ue(38));return P0(e,t,n,!1,u)};Oa.version="17.0.2"});var uB=S((xpt,sB)=>{"use strict";function oB(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oB)}catch(e){console.error(e)}}oB(),sB.exports=aB()});var $e=S((KI,lB)=>{"use strict";var tv=function(e){return e&&e.Math===Math&&e};lB.exports=tv(typeof globalThis=="object"&&globalThis)||tv(typeof window=="object"&&window)||tv(typeof self=="object"&&self)||tv(typeof global=="object"&&global)||tv(typeof KI=="object"&&KI)||function(){return this}()||Function("return this")()});var Oe=S((bpt,cB)=>{"use strict";cB.exports=function(e){try{return!!e()}catch(t){return!0}}});var ht=S((wpt,hB)=>{"use strict";var Kme=Oe();hB.exports=!Kme(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7})});var kf=S((Spt,fB)=>{"use strict";var Xme=Oe();fB.exports=!Xme(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")})});var Ze=S((qpt,dB)=>{"use strict";var Yme=kf(),C0=Function.prototype.call;dB.exports=Yme?C0.bind(C0):function(){return C0.apply(C0,arguments)}});var rv=S(vB=>{"use strict";var pB={}.propertyIsEnumerable,mB=Object.getOwnPropertyDescriptor,Jme=mB&&!pB.call({1:2},1);vB.f=Jme?function(t){var n=mB(this,t);return!!n&&n.enumerable}:pB});var kn=S((Ept,gB)=>{"use strict";gB.exports=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}}});var Pe=S((Tpt,xB)=>{"use strict";var yB=kf(),_B=Function.prototype,XI=_B.call,Qme=yB&&_B.bind.bind(XI,XI);xB.exports=yB?Qme:function(e){return function(){return XI.apply(e,arguments)}}});var Oi=S((Apt,wB)=>{"use strict";var bB=Pe(),eve=bB({}.toString),tve=bB("".slice);wB.exports=function(e){return tve(eve(e),8,-1)}});var As=S((Ppt,SB)=>{"use strict";var rve=Pe(),ive=Oe(),nve=Oi(),YI=Object,ave=rve("".split);SB.exports=ive(function(){return!YI("z").propertyIsEnumerable(0)})?function(e){return nve(e)==="String"?ave(e,""):YI(e)}:YI});var Jr=S((Cpt,qB)=>{"use strict";qB.exports=function(e){return e==null}});var mr=S((Mpt,IB)=>{"use strict";var ove=Jr(),sve=TypeError;IB.exports=function(e){if(ove(e))throw new sve("Can't call method on "+e);return e}});var Qr=S((Opt,EB)=>{"use strict";var uve=As(),lve=mr();EB.exports=function(e){return uve(lve(e))}});var Tt=S((Rpt,TB)=>{"use strict";var JI=typeof document=="object"&&document.all;TB.exports=typeof JI=="undefined"&&JI!==void 0?function(e){return typeof e=="function"||e===JI}:function(e){return typeof e=="function"}});var wt=S((kpt,AB)=>{"use strict";var cve=Tt();AB.exports=function(e){return typeof e=="object"?e!==null:cve(e)}});var xt=S((Dpt,PB)=>{"use strict";var QI=$e(),hve=Tt(),fve=function(e){return hve(e)?e:void 0};PB.exports=function(e,t){return arguments.length<2?fve(QI[e]):QI[e]&&QI[e][t]}});var Ri=S((Lpt,CB)=>{"use strict";var dve=Pe();CB.exports=dve({}.isPrototypeOf)});var oo=S((zpt,RB)=>{"use strict";var pve=$e(),MB=pve.navigator,OB=MB&&MB.userAgent;RB.exports=OB?String(OB):""});var No=S((Fpt,NB)=>{"use strict";var FB=$e(),eE=oo(),kB=FB.process,DB=FB.Deno,LB=kB&&kB.versions||DB&&DB.version,zB=LB&&LB.v8,so,M0;zB&&(so=zB.split("."),M0=so[0]>0&&so[0]<4?1:+(so[0]+so[1]));!M0&&eE&&(so=eE.match(/Edge\/(\d+)/),(!so||so[1]>=74)&&(so=eE.match(/Chrome\/(\d+)/),so&&(M0=+so[1])));NB.exports=M0});var tl=S((Npt,jB)=>{"use strict";var BB=No(),mve=Oe(),vve=$e(),gve=vve.String;jB.exports=!!Object.getOwnPropertySymbols&&!mve(function(){var e=Symbol("symbol detection");return!gve(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&BB&&BB<41})});var tE=S((Bpt,UB)=>{"use strict";var yve=tl();UB.exports=yve&&!Symbol.sham&&typeof Symbol.iterator=="symbol"});var Ps=S((jpt,$B)=>{"use strict";var _ve=xt(),xve=Tt(),bve=Ri(),wve=tE(),Sve=Object;$B.exports=wve?function(e){return typeof e=="symbol"}:function(e){var t=_ve("Symbol");return xve(t)&&bve(t.prototype,Sve(e))}});var rl=S((Upt,VB)=>{"use strict";var qve=String;VB.exports=function(e){try{return qve(e)}catch(t){return"Object"}}});var _t=S(($pt,GB)=>{"use strict";var Ive=Tt(),Eve=rl(),Tve=TypeError;GB.exports=function(e){if(Ive(e))return e;throw new Tve(Eve(e)+" is not a function")}});var Br=S((Vpt,HB)=>{"use strict";var Ave=_t(),Pve=Jr();HB.exports=function(e,t){var n=e[t];return Pve(n)?void 0:Ave(n)}});var aE=S((Gpt,WB)=>{"use strict";var rE=Ze(),iE=Tt(),nE=wt(),Cve=TypeError;WB.exports=function(e,t){var n,u;if(t==="string"&&iE(n=e.toString)&&!nE(u=rE(n,e))||iE(n=e.valueOf)&&!nE(u=rE(n,e))||t!=="string"&&iE(n=e.toString)&&!nE(u=rE(n,e)))return u;throw new Cve("Can't convert object to primitive value")}});var Rt=S((Hpt,ZB)=>{"use strict";ZB.exports=!1});var O0=S((Wpt,XB)=>{"use strict";var KB=$e(),Mve=Object.defineProperty;XB.exports=function(e,t){try{Mve(KB,e,{value:t,configurable:!0,writable:!0})}catch(n){KB[e]=t}return t}});var iv=S((Zpt,QB)=>{"use strict";var Ove=Rt(),Rve=$e(),kve=O0(),YB="__core-js_shared__",JB=QB.exports=Rve[YB]||kve(YB,{});(JB.versions||(JB.versions=[])).push({version:"3.39.0",mode:Ove?"pure":"global",copyright:"\xA9 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.39.0/LICENSE",source:"https://github.com/zloirock/core-js"})});var Cs=S((Kpt,t3)=>{"use strict";var e3=iv();t3.exports=function(e,t){return e3[e]||(e3[e]=t||{})}});var kt=S((Xpt,r3)=>{"use strict";var Dve=mr(),Lve=Object;r3.exports=function(e){return Lve(Dve(e))}});var Ct=S((Ypt,i3)=>{"use strict";var zve=Pe(),Fve=kt(),Nve=zve({}.hasOwnProperty);i3.exports=Object.hasOwn||function(t,n){return Nve(Fve(t),n)}});var il=S((Jpt,n3)=>{"use strict";var Bve=Pe(),jve=0,Uve=Math.random(),$ve=Bve(1 .toString);n3.exports=function(e){return"Symbol("+(e===void 0?"":e)+")_"+$ve(++jve+Uve,36)}});var pt=S((Qpt,o3)=>{"use strict";var Vve=$e(),Gve=Cs(),a3=Ct(),Hve=il(),Wve=tl(),Zve=tE(),Df=Vve.Symbol,oE=Gve("wks"),Kve=Zve?Df.for||Df:Df&&Df.withoutSetter||Hve;o3.exports=function(e){return a3(oE,e)||(oE[e]=Wve&&a3(Df,e)?Df[e]:Kve("Symbol."+e)),oE[e]}});var nv=S((emt,l3)=>{"use strict";var Xve=Ze(),s3=wt(),u3=Ps(),Yve=Br(),Jve=aE(),Qve=pt(),ege=TypeError,tge=Qve("toPrimitive");l3.exports=function(e,t){if(!s3(e)||u3(e))return e;var n=Yve(e,tge),u;if(n){if(t===void 0&&(t="default"),u=Xve(n,e,t),!s3(u)||u3(u))return u;throw new ege("Can't convert object to primitive value")}return t===void 0&&(t="number"),Jve(e,t)}});var Bo=S((tmt,c3)=>{"use strict";var rge=nv(),ige=Ps();c3.exports=function(e){var t=rge(e,"string");return ige(t)?t:t+""}});var av=S((rmt,f3)=>{"use strict";var nge=$e(),h3=wt(),sE=nge.document,age=h3(sE)&&h3(sE.createElement);f3.exports=function(e){return age?sE.createElement(e):{}}});var uE=S((imt,d3)=>{"use strict";var oge=ht(),sge=Oe(),uge=av();d3.exports=!oge&&!sge(function(){return Object.defineProperty(uge("div"),"a",{get:function(){return 7}}).a!==7})});var yi=S(m3=>{"use strict";var lge=ht(),cge=Ze(),hge=rv(),fge=kn(),dge=Qr(),pge=Bo(),mge=Ct(),vge=uE(),p3=Object.getOwnPropertyDescriptor;m3.f=lge?p3:function(t,n){if(t=dge(t),n=pge(n),vge)try{return p3(t,n)}catch(u){}if(mge(t,n))return fge(!cge(hge.f,t,n),t[n])}});var lE=S((amt,v3)=>{"use strict";var gge=ht(),yge=Oe();v3.exports=gge&&yge(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42})});var He=S((omt,g3)=>{"use strict";var _ge=wt(),xge=String,bge=TypeError;g3.exports=function(e){if(_ge(e))return e;throw new bge(xge(e)+" is not an object")}});var dr=S(_3=>{"use strict";var wge=ht(),Sge=uE(),qge=lE(),R0=He(),y3=Bo(),Ige=TypeError,cE=Object.defineProperty,Ege=Object.getOwnPropertyDescriptor,hE="enumerable",fE="configurable",dE="writable";_3.f=wge?qge?function(t,n,u){if(R0(t),n=y3(n),R0(u),typeof t=="function"&&n==="prototype"&&"value"in u&&dE in u&&!u[dE]){var l=Ege(t,n);l&&l[dE]&&(t[n]=u.value,u={configurable:fE in u?u[fE]:l[fE],enumerable:hE in u?u[hE]:l[hE],writable:!1})}return cE(t,n,u)}:cE:function(t,n,u){if(R0(t),n=y3(n),R0(u),Sge)try{return cE(t,n,u)}catch(l){}if("get"in u||"set"in u)throw new Ige("Accessors not supported");return"value"in u&&(t[n]=u.value),t}});var ei=S((umt,x3)=>{"use strict";var Tge=ht(),Age=dr(),Pge=kn();x3.exports=Tge?function(e,t,n){return Age.f(e,t,Pge(1,n))}:function(e,t,n){return e[t]=n,e}});var Ec=S((lmt,w3)=>{"use strict";var pE=ht(),Cge=Ct(),b3=Function.prototype,Mge=pE&&Object.getOwnPropertyDescriptor,mE=Cge(b3,"name"),Oge=mE&&function(){}.name==="something",Rge=mE&&(!pE||pE&&Mge(b3,"name").configurable);w3.exports={EXISTS:mE,PROPER:Oge,CONFIGURABLE:Rge}});var ov=S((cmt,S3)=>{"use strict";var kge=Pe(),Dge=Tt(),vE=iv(),Lge=kge(Function.toString);Dge(vE.inspectSource)||(vE.inspectSource=function(e){return Lge(e)});S3.exports=vE.inspectSource});var gE=S((hmt,I3)=>{"use strict";var zge=$e(),Fge=Tt(),q3=zge.WeakMap;I3.exports=Fge(q3)&&/native code/.test(String(q3))});var sv=S((fmt,T3)=>{"use strict";var Nge=Cs(),Bge=il(),E3=Nge("keys");T3.exports=function(e){return E3[e]||(E3[e]=Bge(e))}});var Lf=S((dmt,A3)=>{"use strict";A3.exports={}});var Yt=S((pmt,M3)=>{"use strict";var jge=gE(),C3=$e(),Uge=wt(),$ge=ei(),yE=Ct(),_E=iv(),Vge=sv(),Gge=Lf(),P3="Object already initialized",xE=C3.TypeError,Hge=C3.WeakMap,k0,uv,D0,Wge=function(e){return D0(e)?uv(e):k0(e,{})},Zge=function(e){return function(t){var n;if(!Uge(t)||(n=uv(t)).type!==e)throw new xE("Incompatible receiver, "+e+" required");return n}};jge||_E.state?(uo=_E.state||(_E.state=new Hge),uo.get=uo.get,uo.has=uo.has,uo.set=uo.set,k0=function(e,t){if(uo.has(e))throw new xE(P3);return t.facade=e,uo.set(e,t),t},uv=function(e){return uo.get(e)||{}},D0=function(e){return uo.has(e)}):(Tc=Vge("state"),Gge[Tc]=!0,k0=function(e,t){if(yE(e,Tc))throw new xE(P3);return t.facade=e,$ge(e,Tc,t),t},uv=function(e){return yE(e,Tc)?e[Tc]:{}},D0=function(e){return yE(e,Tc)});var uo,Tc;M3.exports={set:k0,get:uv,has:D0,enforce:Wge,getterFor:Zge}});var lv=S((mmt,k3)=>{"use strict";var wE=Pe(),Kge=Oe(),Xge=Tt(),L0=Ct(),bE=ht(),Yge=Ec().CONFIGURABLE,Jge=ov(),R3=Yt(),Qge=R3.enforce,eye=R3.get,O3=String,z0=Object.defineProperty,tye=wE("".slice),rye=wE("".replace),iye=wE([].join),nye=bE&&!Kge(function(){return z0(function(){},"length",{value:8}).length!==8}),aye=String(String).split("String"),oye=k3.exports=function(e,t,n){tye(O3(t),0,7)==="Symbol("&&(t="["+rye(O3(t),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(t="get "+t),n&&n.setter&&(t="set "+t),(!L0(e,"name")||Yge&&e.name!==t)&&(bE?z0(e,"name",{value:t,configurable:!0}):e.name=t),nye&&n&&L0(n,"arity")&&e.length!==n.arity&&z0(e,"length",{value:n.arity});try{n&&L0(n,"constructor")&&n.constructor?bE&&z0(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(l){}var u=Qge(e);return L0(u,"source")||(u.source=iye(aye,typeof t=="string"?t:"")),e};Function.prototype.toString=oye(function(){return Xge(this)&&eye(this).source||Jge(this)},"toString")});var tr=S((vmt,D3)=>{"use strict";var sye=Tt(),uye=dr(),lye=lv(),cye=O0();D3.exports=function(e,t,n,u){u||(u={});var l=u.enumerable,o=u.name!==void 0?u.name:t;if(sye(n)&&lye(n,o,u),u.global)l?e[t]=n:cye(t,n);else{try{u.unsafe?e[t]&&(l=!0):delete e[t]}catch(_){}l?e[t]=n:uye.f(e,t,{value:n,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return e}});var SE=S((gmt,L3)=>{"use strict";var hye=Math.ceil,fye=Math.floor;L3.exports=Math.trunc||function(t){var n=+t;return(n>0?fye:hye)(n)}});var gr=S((ymt,z3)=>{"use strict";var dye=SE();z3.exports=function(e){var t=+e;return t!==t||t===0?0:dye(t)}});var lo=S((_mt,F3)=>{"use strict";var pye=gr(),mye=Math.max,vye=Math.min;F3.exports=function(e,t){var n=pye(e);return n<0?mye(n+t,0):vye(n,t)}});var Dn=S((xmt,N3)=>{"use strict";var gye=gr(),yye=Math.min;N3.exports=function(e){var t=gye(e);return t>0?yye(t,9007199254740991):0}});var Nt=S((bmt,B3)=>{"use strict";var _ye=Dn();B3.exports=function(e){return _ye(e.length)}});var zf=S((wmt,U3)=>{"use strict";var xye=Qr(),bye=lo(),wye=Nt(),j3=function(e){return function(t,n,u){var l=xye(t),o=wye(l);if(o===0)return!e&&-1;var _=bye(u,o),b;if(e&&n!==n){for(;o>_;)if(b=l[_++],b!==b)return!0}else for(;o>_;_++)if((e||_ in l)&&l[_]===n)return e||_||0;return!e&&-1}};U3.exports={includes:j3(!0),indexOf:j3(!1)}});var IE=S((Smt,V3)=>{"use strict";var Sye=Pe(),qE=Ct(),qye=Qr(),Iye=zf().indexOf,Eye=Lf(),$3=Sye([].push);V3.exports=function(e,t){var n=qye(e),u=0,l=[],o;for(o in n)!qE(Eye,o)&&qE(n,o)&&$3(l,o);for(;t.length>u;)qE(n,o=t[u++])&&(~Iye(l,o)||$3(l,o));return l}});var F0=S((qmt,G3)=>{"use strict";G3.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]});var nl=S(H3=>{"use strict";var Tye=IE(),Aye=F0(),Pye=Aye.concat("length","prototype");H3.f=Object.getOwnPropertyNames||function(t){return Tye(t,Pye)}});var cv=S(W3=>{"use strict";W3.f=Object.getOwnPropertySymbols});var N0=S((Tmt,Z3)=>{"use strict";var Cye=xt(),Mye=Pe(),Oye=nl(),Rye=cv(),kye=He(),Dye=Mye([].concat);Z3.exports=Cye("Reflect","ownKeys")||function(t){var n=Oye.f(kye(t)),u=Rye.f;return u?Dye(n,u(t)):n}});var Ac=S((Amt,X3)=>{"use strict";var K3=Ct(),Lye=N0(),zye=yi(),Fye=dr();X3.exports=function(e,t,n){for(var u=Lye(t),l=Fye.f,o=zye.f,_=0;_<u.length;_++){var b=u[_];!K3(e,b)&&!(n&&K3(n,b))&&l(e,b,o(t,b))}}});var Ff=S((Pmt,Y3)=>{"use strict";var Nye=Oe(),Bye=Tt(),jye=/#|\.prototype\./,hv=function(e,t){var n=$ye[Uye(e)];return n===Gye?!0:n===Vye?!1:Bye(t)?Nye(t):!!t},Uye=hv.normalize=function(e){return String(e).replace(jye,".").toLowerCase()},$ye=hv.data={},Vye=hv.NATIVE="N",Gye=hv.POLYFILL="P";Y3.exports=hv});var V=S((Cmt,J3)=>{"use strict";var B0=$e(),Hye=yi().f,Wye=ei(),Zye=tr(),Kye=O0(),Xye=Ac(),Yye=Ff();J3.exports=function(e,t){var n=e.target,u=e.global,l=e.stat,o,_,b,E,T,C;if(u?_=B0:l?_=B0[n]||Kye(n,{}):_=B0[n]&&B0[n].prototype,_)for(b in t){if(T=t[b],e.dontCallGetSet?(C=Hye(_,b),E=C&&C.value):E=_[b],o=Yye(u?b:n+(l?".":"#")+b,e.forced),!o&&E!==void 0){if(typeof T==typeof E)continue;Xye(T,E)}(e.sham||E&&E.sham)&&Wye(T,"sham",!0),Zye(_,b,T,e)}}});var j0=S((Mmt,e4)=>{"use strict";var Jye=pt(),Qye=Jye("toStringTag"),Q3={};Q3[Qye]="z";e4.exports=String(Q3)==="[object z]"});var Ln=S((Omt,t4)=>{"use strict";var e_e=j0(),t_e=Tt(),U0=Oi(),r_e=pt(),i_e=r_e("toStringTag"),n_e=Object,a_e=U0(function(){return arguments}())==="Arguments",o_e=function(e,t){try{return e[t]}catch(n){}};t4.exports=e_e?U0:function(e){var t,n,u;return e===void 0?"Undefined":e===null?"Null":typeof(n=o_e(t=n_e(e),i_e))=="string"?n:a_e?U0(t):(u=U0(t))==="Object"&&t_e(t.callee)?"Arguments":u}});var qt=S((Rmt,r4)=>{"use strict";var s_e=Ln(),u_e=String;r4.exports=function(e){if(s_e(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return u_e(e)}});var Pc=S((kmt,i4)=>{"use strict";var l_e=IE(),c_e=F0();i4.exports=Object.keys||function(t){return l_e(t,c_e)}});var $0=S(n4=>{"use strict";var h_e=ht(),f_e=lE(),d_e=dr(),p_e=He(),m_e=Qr(),v_e=Pc();n4.f=h_e&&!f_e?Object.defineProperties:function(t,n){p_e(t);for(var u=m_e(n),l=v_e(n),o=l.length,_=0,b;o>_;)d_e.f(t,b=l[_++],u[b]);return t}});var EE=S((Lmt,a4)=>{"use strict";var g_e=xt();a4.exports=g_e("document","documentElement")});var jr=S((zmt,f4)=>{"use strict";var y_e=He(),__e=$0(),o4=F0(),x_e=Lf(),b_e=EE(),w_e=av(),S_e=sv(),s4=">",u4="<",AE="prototype",PE="script",c4=S_e("IE_PROTO"),TE=function(){},h4=function(e){return u4+PE+s4+e+u4+"/"+PE+s4},l4=function(e){e.write(h4("")),e.close();var t=e.parentWindow.Object;return e=null,t},q_e=function(){var e=w_e("iframe"),t="java"+PE+":",n;return e.style.display="none",b_e.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(h4("document.F=Object")),n.close(),n.F},V0,G0=function(){try{V0=new ActiveXObject("htmlfile")}catch(t){}G0=typeof document!="undefined"?document.domain&&V0?l4(V0):q_e():l4(V0);for(var e=o4.length;e--;)delete G0[AE][o4[e]];return G0()};x_e[c4]=!0;f4.exports=Object.create||function(t,n){var u;return t!==null?(TE[AE]=y_e(t),u=new TE,TE[AE]=null,u[c4]=t):u=G0(),n===void 0?u:__e.f(u,n)}});var zn=S((Fmt,d4)=>{"use strict";var I_e=Pe();d4.exports=I_e([].slice)});var H0=S((Nmt,v4)=>{"use strict";var E_e=Oi(),T_e=Qr(),p4=nl().f,A_e=zn(),m4=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],P_e=function(e){try{return p4(e)}catch(t){return A_e(m4)}};v4.exports.f=function(t){return m4&&E_e(t)==="Window"?P_e(t):p4(T_e(t))}});var yr=S((Bmt,y4)=>{"use strict";var g4=lv(),C_e=dr();y4.exports=function(e,t,n){return n.get&&g4(n.get,t,{getter:!0}),n.set&&g4(n.set,t,{setter:!0}),C_e.f(e,t,n)}});var CE=S(_4=>{"use strict";var M_e=pt();_4.f=M_e});var W0=S((Umt,x4)=>{"use strict";var O_e=$e();x4.exports=O_e});var Cr=S(($mt,w4)=>{"use strict";var b4=W0(),R_e=Ct(),k_e=CE(),D_e=dr().f;w4.exports=function(e){var t=b4.Symbol||(b4.Symbol={});R_e(t,e)||D_e(t,e,{value:k_e.f(e)})}});var ME=S((Vmt,S4)=>{"use strict";var L_e=Ze(),z_e=xt(),F_e=pt(),N_e=tr();S4.exports=function(){var e=z_e("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,u=F_e("toPrimitive");t&&!t[u]&&N_e(t,u,function(l){return L_e(n,this)},{arity:1})}});var vn=S((Gmt,I4)=>{"use strict";var B_e=dr().f,j_e=Ct(),U_e=pt(),q4=U_e("toStringTag");I4.exports=function(e,t,n){e&&!n&&(e=e.prototype),e&&!j_e(e,q4)&&B_e(e,q4,{configurable:!0,value:t})}});var Ms=S((Hmt,E4)=>{"use strict";var $_e=Oi(),V_e=Pe();E4.exports=function(e){if($_e(e)==="Function")return V_e(e)}});var or=S((Wmt,A4)=>{"use strict";var T4=Ms(),G_e=_t(),H_e=kf(),W_e=T4(T4.bind);A4.exports=function(e,t){return G_e(e),t===void 0?e:H_e?W_e(e,t):function(){return e.apply(t,arguments)}}});var co=S((Zmt,P4)=>{"use strict";var Z_e=Oi();P4.exports=Array.isArray||function(t){return Z_e(t)==="Array"}});var ho=S((Kmt,k4)=>{"use strict";var K_e=Pe(),X_e=Oe(),C4=Tt(),Y_e=Ln(),J_e=xt(),Q_e=ov(),M4=function(){},O4=J_e("Reflect","construct"),OE=/^\s*(?:class|function)\b/,e0e=K_e(OE.exec),t0e=!OE.test(M4),fv=function(t){if(!C4(t))return!1;try{return O4(M4,[],t),!0}catch(n){return!1}},R4=function(t){if(!C4(t))return!1;switch(Y_e(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1;}try{return t0e||!!e0e(OE,Q_e(t))}catch(n){return!0}};R4.sham=!0;k4.exports=!O4||X_e(function(){var e;return fv(fv.call)||!fv(Object)||!fv(function(){e=!0})||e})?R4:fv});var F4=S((Xmt,z4)=>{"use strict";var D4=co(),r0e=ho(),i0e=wt(),n0e=pt(),a0e=n0e("species"),L4=Array;z4.exports=function(e){var t;return D4(e)&&(t=e.constructor,r0e(t)&&(t===L4||D4(t.prototype))?t=void 0:i0e(t)&&(t=t[a0e],t===null&&(t=void 0))),t===void 0?L4:t}});var Nf=S((Ymt,N4)=>{"use strict";var o0e=F4();N4.exports=function(e,t){return new(o0e(e))(t===0?0:t)}});var Ur=S((Jmt,j4)=>{"use strict";var s0e=or(),u0e=Pe(),l0e=As(),c0e=kt(),h0e=Nt(),f0e=Nf(),B4=u0e([].push),al=function(e){var t=e===1,n=e===2,u=e===3,l=e===4,o=e===6,_=e===7,b=e===5||o;return function(E,T,C,z){for(var $=c0e(E),oe=l0e($),xe=h0e(oe),_e=s0e(T,C),X=0,K=z||f0e,re=t?K(E,xe):n||_?K(E,0):void 0,ge,be;xe>X;X++)if((b||X in oe)&&(ge=oe[X],be=_e(ge,X,$),e))if(t)re[X]=be;else if(be)switch(e){case 3:return!0;case 5:return ge;case 6:return X;case 2:B4(re,ge);}else switch(e){case 4:return!1;case 7:B4(re,ge);}return o?-1:u||l?l:re}};j4.exports={forEach:al(0),map:al(1),filter:al(2),some:al(3),every:al(4),find:al(5),findIndex:al(6),filterReject:al(7)}});var n5=S(()=>{"use strict";var Z0=V(),mv=$e(),jE=Ze(),d0e=Pe(),p0e=Rt(),Bf=ht(),jf=tl(),m0e=Oe(),_i=Ct(),v0e=Ri(),LE=He(),K0=Qr(),UE=Bo(),g0e=qt(),zE=kn(),Uf=jr(),V4=Pc(),y0e=nl(),G4=H0(),_0e=cv(),H4=yi(),W4=dr(),x0e=$0(),Z4=rv(),RE=tr(),b0e=yr(),$E=Cs(),w0e=sv(),K4=Lf(),U4=il(),S0e=pt(),q0e=CE(),I0e=Cr(),E0e=ME(),T0e=vn(),X4=Yt(),X0=Ur().forEach,Fn=w0e("hidden"),Y0="Symbol",pv="prototype",A0e=X4.set,$4=X4.getterFor(Y0),Ra=Object[pv],Cc=mv.Symbol,dv=Cc&&Cc[pv],P0e=mv.RangeError,C0e=mv.TypeError,kE=mv.QObject,Y4=H4.f,Mc=W4.f,J4=G4.f,M0e=Z4.f,Q4=d0e([].push),Os=$E("symbols"),vv=$E("op-symbols"),O0e=$E("wks"),FE=!kE||!kE[pv]||!kE[pv].findChild,e5=function(e,t,n){var u=Y4(Ra,t);u&&delete Ra[t],Mc(e,t,n),u&&e!==Ra&&Mc(Ra,t,u)},NE=Bf&&m0e(function(){return Uf(Mc({},"a",{get:function(){return Mc(this,"a",{value:7}).a}})).a!==7})?e5:Mc,DE=function(e,t){var n=Os[e]=Uf(dv);return A0e(n,{type:Y0,tag:e,description:t}),Bf||(n.description=t),n},J0=function(t,n,u){t===Ra&&J0(vv,n,u),LE(t);var l=UE(n);return LE(u),_i(Os,l)?(u.enumerable?(_i(t,Fn)&&t[Fn][l]&&(t[Fn][l]=!1),u=Uf(u,{enumerable:zE(0,!1)})):(_i(t,Fn)||Mc(t,Fn,zE(1,Uf(null))),t[Fn][l]=!0),NE(t,l,u)):Mc(t,l,u)},VE=function(t,n){LE(t);var u=K0(n),l=V4(u).concat(i5(u));return X0(l,function(o){(!Bf||jE(BE,u,o))&&J0(t,o,u[o])}),t},R0e=function(t,n){return n===void 0?Uf(t):VE(Uf(t),n)},BE=function(t){var n=UE(t),u=jE(M0e,this,n);return this===Ra&&_i(Os,n)&&!_i(vv,n)?!1:u||!_i(this,n)||!_i(Os,n)||_i(this,Fn)&&this[Fn][n]?u:!0},t5=function(t,n){var u=K0(t),l=UE(n);if(!(u===Ra&&_i(Os,l)&&!_i(vv,l))){var o=Y4(u,l);return o&&_i(Os,l)&&!(_i(u,Fn)&&u[Fn][l])&&(o.enumerable=!0),o}},r5=function(t){var n=J4(K0(t)),u=[];return X0(n,function(l){!_i(Os,l)&&!_i(K4,l)&&Q4(u,l)}),u},i5=function(e){var t=e===Ra,n=J4(t?vv:K0(e)),u=[];return X0(n,function(l){_i(Os,l)&&(!t||_i(Ra,l))&&Q4(u,Os[l])}),u};jf||(Cc=function(){if(v0e(dv,this))throw new C0e("Symbol is not a constructor");var t=!arguments.length||arguments[0]===void 0?void 0:g0e(arguments[0]),n=U4(t),u=function(l){var o=this===void 0?mv:this;o===Ra&&jE(u,vv,l),_i(o,Fn)&&_i(o[Fn],n)&&(o[Fn][n]=!1);var _=zE(1,l);try{NE(o,n,_)}catch(b){if(!(b instanceof P0e))throw b;e5(o,n,_)}};return Bf&&FE&&NE(Ra,n,{configurable:!0,set:u}),DE(n,t)},dv=Cc[pv],RE(dv,"toString",function(){return $4(this).tag}),RE(Cc,"withoutSetter",function(e){return DE(U4(e),e)}),Z4.f=BE,W4.f=J0,x0e.f=VE,H4.f=t5,y0e.f=G4.f=r5,_0e.f=i5,q0e.f=function(e){return DE(S0e(e),e)},Bf&&(b0e(dv,"description",{configurable:!0,get:function(){return $4(this).description}}),p0e||RE(Ra,"propertyIsEnumerable",BE,{unsafe:!0})));Z0({global:!0,constructor:!0,wrap:!0,forced:!jf,sham:!jf},{Symbol:Cc});X0(V4(O0e),function(e){I0e(e)});Z0({target:Y0,stat:!0,forced:!jf},{useSetter:function(){FE=!0},useSimple:function(){FE=!1}});Z0({target:"Object",stat:!0,forced:!jf,sham:!Bf},{create:R0e,defineProperty:J0,defineProperties:VE,getOwnPropertyDescriptor:t5});Z0({target:"Object",stat:!0,forced:!jf},{getOwnPropertyNames:r5});E0e();T0e(Cc,Y0);K4[Fn]=!0});var GE=S((tvt,a5)=>{"use strict";var k0e=tl();a5.exports=k0e&&!!Symbol.for&&!!Symbol.keyFor});var s5=S(()=>{"use strict";var D0e=V(),L0e=xt(),z0e=Ct(),F0e=qt(),o5=Cs(),N0e=GE(),HE=o5("string-to-symbol-registry"),B0e=o5("symbol-to-string-registry");D0e({target:"Symbol",stat:!0,forced:!N0e},{for:function(e){var t=F0e(e);if(z0e(HE,t))return HE[t];var n=L0e("Symbol")(t);return HE[t]=n,B0e[n]=t,n}})});var l5=S(()=>{"use strict";var j0e=V(),U0e=Ct(),$0e=Ps(),V0e=rl(),G0e=Cs(),H0e=GE(),u5=G0e("symbol-to-string-registry");j0e({target:"Symbol",stat:!0,forced:!H0e},{keyFor:function(t){if(!$0e(t))throw new TypeError(V0e(t)+" is not a symbol");if(U0e(u5,t))return u5[t]}})});var tn=S((ovt,d5)=>{"use strict";var W0e=kf(),f5=Function.prototype,c5=f5.apply,h5=f5.call;d5.exports=typeof Reflect=="object"&&Reflect.apply||(W0e?h5.bind(c5):function(){return h5.apply(c5,arguments)})});var WE=S((svt,g5)=>{"use strict";var Z0e=Pe(),p5=co(),K0e=Tt(),m5=Oi(),X0e=qt(),v5=Z0e([].push);g5.exports=function(e){if(K0e(e))return e;if(p5(e)){for(var t=e.length,n=[],u=0;u<t;u++){var l=e[u];typeof l=="string"?v5(n,l):(typeof l=="number"||m5(l)==="Number"||m5(l)==="String")&&v5(n,X0e(l))}var o=n.length,_=!0;return function(b,E){if(_)return _=!1,E;if(p5(this))return E;for(var T=0;T<o;T++)if(n[T]===b)return E}}}});var ZE=S(()=>{"use strict";var Y0e=V(),I5=xt(),E5=tn(),J0e=Ze(),gv=Pe(),T5=Oe(),y5=Tt(),_5=Ps(),A5=zn(),Q0e=WE(),exe=tl(),txe=String,ol=I5("JSON","stringify"),Q0=gv(/./.exec),x5=gv("".charAt),rxe=gv("".charCodeAt),ixe=gv("".replace),nxe=gv(1 .toString),axe=/[\uD800-\uDFFF]/g,b5=/^[\uD800-\uDBFF]$/,w5=/^[\uDC00-\uDFFF]$/,S5=!exe||T5(function(){var e=I5("Symbol")("stringify detection");return ol([e])!=="[null]"||ol({a:e})!=="{}"||ol(Object(e))!=="{}"}),q5=T5(function(){return ol("\uDF06\uD834")!=="\"\\udf06\\ud834\""||ol("\uDEAD")!=="\"\\udead\""}),oxe=function(e,t){var n=A5(arguments),u=Q0e(t);if(!(!y5(u)&&(e===void 0||_5(e))))return n[1]=function(l,o){if(y5(u)&&(o=J0e(u,this,txe(l),o)),!_5(o))return o},E5(ol,null,n)},sxe=function(e,t,n){var u=x5(n,t-1),l=x5(n,t+1);return Q0(b5,e)&&!Q0(w5,l)||Q0(w5,e)&&!Q0(b5,u)?"\\u"+nxe(rxe(e,0),16):e};ol&&Y0e({target:"JSON",stat:!0,arity:3,forced:S5||q5},{stringify:function(t,n,u){var l=A5(arguments),o=E5(S5?oxe:ol,null,l);return q5&&typeof o=="string"?ixe(o,axe,sxe):o}})});var C5=S(()=>{"use strict";var uxe=V(),lxe=tl(),cxe=Oe(),P5=cv(),hxe=kt(),fxe=!lxe||cxe(function(){P5.f(1)});uxe({target:"Object",stat:!0,forced:fxe},{getOwnPropertySymbols:function(t){var n=P5.f;return n?n(hxe(t)):[]}})});var M5=S(()=>{"use strict";n5();s5();l5();ZE();C5()});var F5=S(()=>{"use strict";var dxe=V(),pxe=ht(),mxe=$e(),ex=Pe(),vxe=Ct(),gxe=Tt(),yxe=Ri(),_xe=qt(),xxe=yr(),bxe=Ac(),Rs=mxe.Symbol,Oc=Rs&&Rs.prototype;pxe&&gxe(Rs)&&(!("description"in Oc)||Rs().description!==void 0)&&(KE={},yv=function(){var t=arguments.length<1||arguments[0]===void 0?void 0:_xe(arguments[0]),n=yxe(Oc,this)?new Rs(t):t===void 0?Rs():Rs(t);return t===""&&(KE[n]=!0),n},bxe(yv,Rs),yv.prototype=Oc,Oc.constructor=yv,O5=String(Rs("description detection"))==="Symbol(description detection)",R5=ex(Oc.valueOf),k5=ex(Oc.toString),D5=/^Symbol\((.*)\)[^)]+$/,L5=ex("".replace),z5=ex("".slice),xxe(Oc,"description",{configurable:!0,get:function(){var t=R5(this);if(vxe(KE,t))return"";var n=k5(t),u=O5?z5(n,7,-1):L5(n,D5,"$1");return u===""?void 0:u}}),dxe({global:!0,constructor:!0,forced:!0},{Symbol:yv}));var KE,yv,O5,R5,k5,D5,L5,z5});var N5=S(()=>{"use strict";var wxe=Cr();wxe("asyncIterator")});var B5=S(()=>{"use strict";var Sxe=Cr();Sxe("hasInstance")});var j5=S(()=>{"use strict";var qxe=Cr();qxe("isConcatSpreadable")});var U5=S(()=>{"use strict";var Ixe=Cr();Ixe("iterator")});var $5=S(()=>{"use strict";var Exe=Cr();Exe("match")});var V5=S(()=>{"use strict";var Txe=Cr();Txe("matchAll")});var G5=S(()=>{"use strict";var Axe=Cr();Axe("replace")});var H5=S(()=>{"use strict";var Pxe=Cr();Pxe("search")});var W5=S(()=>{"use strict";var Cxe=Cr();Cxe("species")});var Z5=S(()=>{"use strict";var Mxe=Cr();Mxe("split")});var K5=S(()=>{"use strict";var Oxe=Cr(),Rxe=ME();Oxe("toPrimitive");Rxe()});var X5=S(()=>{"use strict";var kxe=xt(),Dxe=Cr(),Lxe=vn();Dxe("toStringTag");Lxe(kxe("Symbol"),"Symbol")});var Y5=S(()=>{"use strict";var zxe=Cr();zxe("unscopables")});var _v=S((Uvt,J5)=>{"use strict";var Fxe=Pe(),Nxe=_t();J5.exports=function(e,t,n){try{return Fxe(Nxe(Object.getOwnPropertyDescriptor(e,t)[n]))}catch(u){}}});var XE=S(($vt,Q5)=>{"use strict";var Bxe=wt();Q5.exports=function(e){return Bxe(e)||e===null}});var YE=S((Vvt,ej)=>{"use strict";var jxe=XE(),Uxe=String,$xe=TypeError;ej.exports=function(e){if(jxe(e))return e;throw new $xe("Can't set "+Uxe(e)+" as a prototype")}});var ka=S((Gvt,tj)=>{"use strict";var Vxe=_v(),Gxe=wt(),Hxe=mr(),Wxe=YE();tj.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},n;try{n=Vxe(Object.prototype,"__proto__","set"),n(t,[]),e=t instanceof Array}catch(u){}return function(l,o){return Hxe(l),Wxe(o),Gxe(l)&&(e?n(l,o):l.__proto__=o),l}}():void 0)});var JE=S((Hvt,rj)=>{"use strict";var Zxe=dr().f;rj.exports=function(e,t,n){n in e||Zxe(e,n,{configurable:!0,get:function(){return t[n]},set:function(u){t[n]=u}})}});var sl=S((Wvt,nj)=>{"use strict";var Kxe=Tt(),Xxe=wt(),ij=ka();nj.exports=function(e,t,n){var u,l;return ij&&Kxe(u=t.constructor)&&u!==n&&Xxe(l=u.prototype)&&l!==n.prototype&&ij(e,l),e}});var Rc=S((Zvt,aj)=>{"use strict";var Yxe=qt();aj.exports=function(e,t){return e===void 0?arguments.length<2?"":t:Yxe(e)}});var QE=S((Kvt,oj)=>{"use strict";var Jxe=wt(),Qxe=ei();oj.exports=function(e,t){Jxe(t)&&"cause"in t&&Qxe(e,"cause",t.cause)}});var tx=S((Xvt,lj)=>{"use strict";var e1e=Pe(),sj=Error,t1e=e1e("".replace),r1e=function(e){return String(new sj(e).stack)}("zxcasd"),uj=/\n\s*at [^:]*:[^\n]*/,i1e=uj.test(r1e);lj.exports=function(e,t){if(i1e&&typeof e=="string"&&!sj.prepareStackTrace)for(;t--;)e=t1e(e,uj,"");return e}});var eT=S((Yvt,cj)=>{"use strict";var n1e=Oe(),a1e=kn();cj.exports=!n1e(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",a1e(1,7)),e.stack!==7):!0})});var rx=S((Jvt,fj)=>{"use strict";var o1e=ei(),s1e=tx(),u1e=eT(),hj=Error.captureStackTrace;fj.exports=function(e,t,n,u){u1e&&(hj?hj(e,t):o1e(e,"stack",s1e(n,u)))}});var tT=S((Qvt,_j)=>{"use strict";var dj=xt(),l1e=Ct(),pj=ei(),c1e=Ri(),mj=ka(),vj=Ac(),gj=JE(),h1e=sl(),f1e=Rc(),d1e=QE(),p1e=rx(),m1e=ht(),yj=Rt();_j.exports=function(e,t,n,u){var l="stackTraceLimit",o=u?2:1,_=e.split("."),b=_[_.length-1],E=dj.apply(null,_);if(E){var T=E.prototype;if(!yj&&l1e(T,"cause")&&delete T.cause,!n)return E;var C=dj("Error"),z=t(function($,oe){var xe=f1e(u?oe:$,void 0),_e=u?new E($):new E;return xe!==void 0&&pj(_e,"message",xe),p1e(_e,z,_e.stack,2),this&&c1e(T,this)&&h1e(_e,this,z),arguments.length>o&&d1e(_e,arguments[o]),_e});if(z.prototype=T,b!=="Error"?mj?mj(z,C):vj(z,C,{name:!0}):m1e&&l in E&&(gj(z,E,l),gj(z,E,"prepareStackTrace")),vj(z,E),!yj)try{T.name!==b&&pj(T,"name",b),T.constructor=z}catch($){}return z}}});var Sj=S(()=>{"use strict";var bj=V(),v1e=$e(),jo=tn(),wj=tT(),rT="WebAssembly",xj=v1e[rT],ix=new Error("e",{cause:7}).cause!==7,kc=function(e,t){var n={};n[e]=wj(e,t,ix),bj({global:!0,constructor:!0,arity:1,forced:ix},n)},iT=function(e,t){if(xj&&xj[e]){var n={};n[e]=wj(rT+"."+e,t,ix),bj({target:rT,stat:!0,constructor:!0,arity:1,forced:ix},n)}};kc("Error",function(e){return function(n){return jo(e,this,arguments)}});kc("EvalError",function(e){return function(n){return jo(e,this,arguments)}});kc("RangeError",function(e){return function(n){return jo(e,this,arguments)}});kc("ReferenceError",function(e){return function(n){return jo(e,this,arguments)}});kc("SyntaxError",function(e){return function(n){return jo(e,this,arguments)}});kc("TypeError",function(e){return function(n){return jo(e,this,arguments)}});kc("URIError",function(e){return function(n){return jo(e,this,arguments)}});iT("CompileError",function(e){return function(n){return jo(e,this,arguments)}});iT("LinkError",function(e){return function(n){return jo(e,this,arguments)}});iT("RuntimeError",function(e){return function(n){return jo(e,this,arguments)}})});var nT=S((rgt,Ij)=>{"use strict";var g1e=ht(),y1e=Oe(),_1e=He(),qj=Rc(),nx=Error.prototype.toString,x1e=y1e(function(){if(g1e){var e=Object.create(Object.defineProperty({},"name",{get:function(){return this===e}}));if(nx.call(e)!=="true")return!0}return nx.call({message:1,name:2})!=="2: 1"||nx.call({})!=="Error"});Ij.exports=x1e?function(){var t=_1e(this),n=qj(t.name,"Error"),u=qj(t.message);return n?u?n+": "+u:n:u}:nx});var Aj=S(()=>{"use strict";var b1e=tr(),Ej=nT(),Tj=Error.prototype;Tj.toString!==Ej&&b1e(Tj,"toString",Ej)});var ax=S((agt,Pj)=>{"use strict";var w1e=Oe();Pj.exports=!w1e(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})});var ti=S((ogt,Mj)=>{"use strict";var S1e=Ct(),q1e=Tt(),I1e=kt(),E1e=sv(),T1e=ax(),Cj=E1e("IE_PROTO"),aT=Object,A1e=aT.prototype;Mj.exports=T1e?aT.getPrototypeOf:function(e){var t=I1e(e);if(S1e(t,Cj))return t[Cj];var n=t.constructor;return q1e(n)&&t instanceof n?n.prototype:t instanceof aT?A1e:null}});var Dc=S((sgt,Oj)=>{"use strict";Oj.exports={}});var ox=S((ugt,Rj)=>{"use strict";var P1e=pt(),C1e=Dc(),M1e=P1e("iterator"),O1e=Array.prototype;Rj.exports=function(e){return e!==void 0&&(C1e.Array===e||O1e[M1e]===e)}});var Uo=S((lgt,Dj)=>{"use strict";var R1e=Ln(),kj=Br(),k1e=Jr(),D1e=Dc(),L1e=pt(),z1e=L1e("iterator");Dj.exports=function(e){if(!k1e(e))return kj(e,z1e)||kj(e,"@@iterator")||D1e[R1e(e)]}});var ul=S((cgt,Lj)=>{"use strict";var F1e=Ze(),N1e=_t(),B1e=He(),j1e=rl(),U1e=Uo(),$1e=TypeError;Lj.exports=function(e,t){var n=arguments.length<2?U1e(e):t;if(N1e(n))return B1e(F1e(n,e));throw new $1e(j1e(e)+" is not iterable")}});var ks=S((hgt,Fj)=>{"use strict";var V1e=Ze(),zj=He(),G1e=Br();Fj.exports=function(e,t,n){var u,l;zj(e);try{if(u=G1e(e,"return"),!u){if(t==="throw")throw n;return n}u=V1e(u,e)}catch(o){l=!0,u=o}if(t==="throw")throw n;if(l)throw u;return zj(u),n}});var Mr=S((fgt,Uj)=>{"use strict";var H1e=or(),W1e=Ze(),Z1e=He(),K1e=rl(),X1e=ox(),Y1e=Nt(),Nj=Ri(),J1e=ul(),Q1e=Uo(),Bj=ks(),ebe=TypeError,sx=function(e,t){this.stopped=e,this.result=t},jj=sx.prototype;Uj.exports=function(e,t,n){var u=n&&n.that,l=!!(n&&n.AS_ENTRIES),o=!!(n&&n.IS_RECORD),_=!!(n&&n.IS_ITERATOR),b=!!(n&&n.INTERRUPTED),E=H1e(t,u),T,C,z,$,oe,xe,_e,X=function(re){return T&&Bj(T,"normal",re),new sx(!0,re)},K=function(re){return l?(Z1e(re),b?E(re[0],re[1],X):E(re[0],re[1])):b?E(re,X):E(re)};if(o)T=e.iterator;else if(_)T=e;else{if(C=Q1e(e),!C)throw new ebe(K1e(e)+" is not iterable");if(X1e(C)){for(z=0,$=Y1e(e);$>z;z++)if(oe=K(e[z]),oe&&Nj(jj,oe))return oe;return new sx(!1)}T=J1e(e,C)}for(xe=o?e.next:T.next;!(_e=W1e(xe,T)).done;){try{oe=K(_e.value)}catch(re){Bj(T,"throw",re)}if(typeof oe=="object"&&oe&&Nj(jj,oe))return oe}return new sx(!1)}});var Vj=S(()=>{"use strict";var tbe=V(),rbe=Ri(),ibe=ti(),ux=ka(),nbe=Ac(),$j=jr(),oT=ei(),sT=kn(),abe=QE(),obe=rx(),sbe=Mr(),ube=Rc(),lbe=pt(),cbe=lbe("toStringTag"),lx=Error,hbe=[].push,$f=function(t,n){var u=rbe(uT,this),l;ux?l=ux(new lx,u?ibe(this):uT):(l=u?this:$j(uT),oT(l,cbe,"Error")),n!==void 0&&oT(l,"message",ube(n)),obe(l,$f,l.stack,1),arguments.length>2&&abe(l,arguments[2]);var o=[];return sbe(t,hbe,{that:o}),oT(l,"errors",o),l};ux?ux($f,lx):nbe($f,lx,{name:!0});var uT=$f.prototype=$j(lx.prototype,{constructor:sT(1,$f),message:sT(1,""),name:sT(1,"AggregateError")});tbe({global:!0,constructor:!0,arity:2},{AggregateError:$f})});var lT=S(()=>{"use strict";Vj()});var Zj=S(()=>{"use strict";var fbe=V(),dbe=xt(),pbe=tn(),Gj=Oe(),mbe=tT(),cT="AggregateError",Hj=dbe(cT),Wj=!Gj(function(){return Hj([1]).errors[0]!==1})&&Gj(function(){return Hj([1],cT,{cause:7}).cause!==7});fbe({global:!0,constructor:!0,arity:2,forced:Wj},{AggregateError:mbe(cT,function(e){return function(n,u){return pbe(e,this,arguments)}},Wj,!0)})});var Or=S((_gt,Kj)=>{"use strict";var vbe=pt(),gbe=jr(),ybe=dr().f,hT=vbe("unscopables"),fT=Array.prototype;fT[hT]===void 0&&ybe(fT,hT,{configurable:!0,value:gbe(null)});Kj.exports=function(e){fT[hT][e]=!0}});var dT=S(()=>{"use strict";var _be=V(),xbe=kt(),bbe=Nt(),wbe=gr(),Sbe=Or();_be({target:"Array",proto:!0},{at:function(t){var n=xbe(this),u=bbe(n),l=wbe(t),o=l>=0?l:u+l;return o<0||o>=u?void 0:n[o]}});Sbe("at")});var ll=S((wgt,Xj)=>{"use strict";var qbe=TypeError,Ibe=9007199254740991;Xj.exports=function(e){if(e>Ibe)throw qbe("Maximum allowed index exceeded");return e}});var Da=S((Sgt,Yj)=>{"use strict";var Ebe=ht(),Tbe=dr(),Abe=kn();Yj.exports=function(e,t,n){Ebe?Tbe.f(e,t,Abe(0,n)):e[t]=n}});var Vf=S((qgt,Jj)=>{"use strict";var Pbe=Oe(),Cbe=pt(),Mbe=No(),Obe=Cbe("species");Jj.exports=function(e){return Mbe>=51||!Pbe(function(){var t=[],n=t.constructor={};return n[Obe]=function(){return{foo:1}},t[e](Boolean).foo!==1})}});var r6=S(()=>{"use strict";var Rbe=V(),kbe=Oe(),Dbe=co(),Lbe=wt(),zbe=kt(),Fbe=Nt(),Qj=ll(),e6=Da(),Nbe=Nf(),Bbe=Vf(),jbe=pt(),Ube=No(),t6=jbe("isConcatSpreadable"),$be=Ube>=51||!kbe(function(){var e=[];return e[t6]=!1,e.concat()[0]!==e}),Vbe=function(e){if(!Lbe(e))return!1;var t=e[t6];return t!==void 0?!!t:Dbe(e)},Gbe=!$be||!Bbe("concat");Rbe({target:"Array",proto:!0,arity:1,forced:Gbe},{concat:function(t){var n=zbe(this),u=Nbe(n,0),l=0,o,_,b,E,T;for(o=-1,b=arguments.length;o<b;o++)if(T=o===-1?n:arguments[o],Vbe(T))for(E=Fbe(T),Qj(l+E),_=0;_<E;_++,l++)_ in T&&e6(u,l,T[_]);else Qj(l+1),e6(u,l++,T);return u.length=l,u}})});var xv=S((Tgt,n6)=>{"use strict";var i6=rl(),Hbe=TypeError;n6.exports=function(e,t){if(!delete e[t])throw new Hbe("Cannot delete property "+i6(t)+" of "+i6(e))}});var mT=S((Agt,a6)=>{"use strict";var Wbe=kt(),pT=lo(),Zbe=Nt(),Kbe=xv(),Xbe=Math.min;a6.exports=[].copyWithin||function(t,n){var u=Wbe(this),l=Zbe(u),o=pT(t,l),_=pT(n,l),b=arguments.length>2?arguments[2]:void 0,E=Xbe((b===void 0?l:pT(b,l))-_,l-o),T=1;for(_<o&&o<_+E&&(T=-1,_+=E-1,o+=E-1);E-->0;)_ in u?u[o]=u[_]:Kbe(u,o),o+=T,_+=T;return u}});var o6=S(()=>{"use strict";var Ybe=V(),Jbe=mT(),Qbe=Or();Ybe({target:"Array",proto:!0},{copyWithin:Jbe});Qbe("copyWithin")});var La=S((Mgt,s6)=>{"use strict";var ewe=Oe();s6.exports=function(e,t){var n=[][e];return!!n&&ewe(function(){n.call(null,t||function(){return 1},1)})}});var u6=S(()=>{"use strict";var twe=V(),rwe=Ur().every,iwe=La(),nwe=iwe("every");twe({target:"Array",proto:!0,forced:!nwe},{every:function(t){return rwe(this,t,arguments.length>1?arguments[1]:void 0)}})});var cx=S((kgt,c6)=>{"use strict";var awe=kt(),l6=lo(),owe=Nt();c6.exports=function(t){for(var n=awe(this),u=owe(n),l=arguments.length,o=l6(l>1?arguments[1]:void 0,u),_=l>2?arguments[2]:void 0,b=_===void 0?u:l6(_,u);b>o;)n[o++]=t;return n}});var h6=S(()=>{"use strict";var swe=V(),uwe=cx(),lwe=Or();swe({target:"Array",proto:!0},{fill:uwe});lwe("fill")});var f6=S(()=>{"use strict";var cwe=V(),hwe=Ur().filter,fwe=Vf(),dwe=fwe("filter");cwe({target:"Array",proto:!0,forced:!dwe},{filter:function(t){return hwe(this,t,arguments.length>1?arguments[1]:void 0)}})});var p6=S(()=>{"use strict";var pwe=V(),mwe=Ur().find,vwe=Or(),vT="find",d6=!0;vT in[]&&Array(1)[vT](function(){d6=!1});pwe({target:"Array",proto:!0,forced:d6},{find:function(t){return mwe(this,t,arguments.length>1?arguments[1]:void 0)}});vwe(vT)});var v6=S(()=>{"use strict";var gwe=V(),ywe=Ur().findIndex,_we=Or(),gT="findIndex",m6=!0;gT in[]&&Array(1)[gT](function(){m6=!1});gwe({target:"Array",proto:!0,forced:m6},{findIndex:function(t){return ywe(this,t,arguments.length>1?arguments[1]:void 0)}});_we(gT)});var bv=S(($gt,y6)=>{"use strict";var xwe=or(),bwe=As(),wwe=kt(),Swe=Nt(),g6=function(e){var t=e===1;return function(n,u,l){for(var o=wwe(n),_=bwe(o),b=Swe(_),E=xwe(u,l),T,C;b-->0;)if(T=_[b],C=E(T,b,o),C)switch(e){case 0:return T;case 1:return b;}return t?-1:void 0}};y6.exports={findLast:g6(0),findLastIndex:g6(1)}});var yT=S(()=>{"use strict";var qwe=V(),Iwe=bv().findLast,Ewe=Or();qwe({target:"Array",proto:!0},{findLast:function(t){return Iwe(this,t,arguments.length>1?arguments[1]:void 0)}});Ewe("findLast")});var _T=S(()=>{"use strict";var Twe=V(),Awe=bv().findLastIndex,Pwe=Or();Twe({target:"Array",proto:!0},{findLastIndex:function(t){return Awe(this,t,arguments.length>1?arguments[1]:void 0)}});Pwe("findLastIndex")});var xT=S((Zgt,x6)=>{"use strict";var Cwe=co(),Mwe=Nt(),Owe=ll(),Rwe=or(),_6=function(e,t,n,u,l,o,_,b){for(var E=l,T=0,C=_?Rwe(_,b):!1,z,$;T<u;)T in n&&(z=C?C(n[T],T,t):n[T],o>0&&Cwe(z)?($=Mwe(z),E=_6(e,t,z,$,E,o-1)-1):(Owe(E+1),e[E]=z),E++),T++;return E};x6.exports=_6});var b6=S(()=>{"use strict";var kwe=V(),Dwe=xT(),Lwe=kt(),zwe=Nt(),Fwe=gr(),Nwe=Nf();kwe({target:"Array",proto:!0},{flat:function(){var t=arguments.length?arguments[0]:void 0,n=Lwe(this),u=zwe(n),l=Nwe(n,0);return l.length=Dwe(l,n,n,u,0,t===void 0?1:Fwe(t)),l}})});var w6=S(()=>{"use strict";var Bwe=V(),jwe=xT(),Uwe=_t(),$we=kt(),Vwe=Nt(),Gwe=Nf();Bwe({target:"Array",proto:!0},{flatMap:function(t){var n=$we(this),u=Vwe(n),l;return Uwe(t),l=Gwe(n,0),l.length=jwe(l,n,n,u,0,1,t,arguments.length>1?arguments[1]:void 0),l}})});var bT=S((Qgt,S6)=>{"use strict";var Hwe=Ur().forEach,Wwe=La(),Zwe=Wwe("forEach");S6.exports=Zwe?[].forEach:function(t){return Hwe(this,t,arguments.length>1?arguments[1]:void 0)}});var I6=S(()=>{"use strict";var Kwe=V(),q6=bT();Kwe({target:"Array",proto:!0,forced:[].forEach!==q6},{forEach:q6})});var hx=S((ryt,E6)=>{"use strict";var Xwe=He(),Ywe=ks();E6.exports=function(e,t,n,u){try{return u?t(Xwe(n)[0],n[1]):t(n)}catch(l){Ywe(e,"throw",l)}}});var wT=S((iyt,P6)=>{"use strict";var Jwe=or(),Qwe=Ze(),eSe=kt(),tSe=hx(),rSe=ox(),iSe=ho(),nSe=Nt(),T6=Da(),aSe=ul(),oSe=Uo(),A6=Array;P6.exports=function(t){var n=eSe(t),u=iSe(this),l=arguments.length,o=l>1?arguments[1]:void 0,_=o!==void 0;_&&(o=Jwe(o,l>2?arguments[2]:void 0));var b=oSe(n),E=0,T,C,z,$,oe,xe;if(b&&!(this===A6&&rSe(b)))for(C=u?new this:[],$=aSe(n,b),oe=$.next;!(z=Qwe(oe,$)).done;E++)xe=_?tSe($,o,[z.value,E],!0):z.value,T6(C,E,xe);else for(T=nSe(n),C=u?new this(T):A6(T);T>E;E++)xe=_?o(n[E],E):n[E],T6(C,E,xe);return C.length=E,C}});var wv=S((nyt,R6)=>{"use strict";var sSe=pt(),M6=sSe("iterator"),O6=!1;try{C6=0,ST={next:function(){return{done:!!C6++}},return:function(){O6=!0}},ST[M6]=function(){return this},Array.from(ST,function(){throw 2})}catch(e){}var C6,ST;R6.exports=function(e,t){try{if(!t&&!O6)return!1}catch(l){return!1}var n=!1;try{var u={};u[M6]=function(){return{next:function(){return{done:n=!0}}}},e(u)}catch(l){}return n}});var k6=S(()=>{"use strict";var uSe=V(),lSe=wT(),cSe=wv(),hSe=!cSe(function(e){Array.from(e)});uSe({target:"Array",stat:!0,forced:hSe},{from:lSe})});var D6=S(()=>{"use strict";var fSe=V(),dSe=zf().includes,pSe=Oe(),mSe=Or(),vSe=pSe(function(){return!Array(1).includes()});fSe({target:"Array",proto:!0,forced:vSe},{includes:function(t){return dSe(this,t,arguments.length>1?arguments[1]:void 0)}});mSe("includes")});var z6=S(()=>{"use strict";var gSe=V(),ySe=Ms(),_Se=zf().indexOf,xSe=La(),qT=ySe([].indexOf),L6=!!qT&&1/qT([1],1,-0)<0,bSe=L6||!xSe("indexOf");gSe({target:"Array",proto:!0,forced:bSe},{indexOf:function(t){var n=arguments.length>1?arguments[1]:void 0;return L6?qT(this,t,n)||0:_Se(this,t,n)}})});var F6=S(()=>{"use strict";var wSe=V(),SSe=co();wSe({target:"Array",stat:!0},{isArray:SSe})});var Lc=S((dyt,j6)=>{"use strict";var qSe=Oe(),ISe=Tt(),ESe=wt(),TSe=jr(),N6=ti(),ASe=tr(),PSe=pt(),CSe=Rt(),TT=PSe("iterator"),B6=!1,Ds,IT,ET;[].keys&&(ET=[].keys(),"next"in ET?(IT=N6(N6(ET)),IT!==Object.prototype&&(Ds=IT)):B6=!0);var MSe=!ESe(Ds)||qSe(function(){var e={};return Ds[TT].call(e)!==e});MSe?Ds={}:CSe&&(Ds=TSe(Ds));ISe(Ds[TT])||ASe(Ds,TT,function(){return this});j6.exports={IteratorPrototype:Ds,BUGGY_SAFARI_ITERATORS:B6}});var cl=S((pyt,U6)=>{"use strict";var OSe=Lc().IteratorPrototype,RSe=jr(),kSe=kn(),DSe=vn(),LSe=Dc(),zSe=function(){return this};U6.exports=function(e,t,n,u){var l=t+" Iterator";return e.prototype=RSe(OSe,{next:kSe(+!u,n)}),DSe(e,l,!1,!0),LSe[l]=zSe,e}});var px=S((myt,J6)=>{"use strict";var FSe=V(),NSe=Ze(),fx=Rt(),X6=Ec(),BSe=Tt(),jSe=cl(),$6=ti(),V6=ka(),USe=vn(),$Se=ei(),AT=tr(),VSe=pt(),G6=Dc(),Y6=Lc(),GSe=X6.PROPER,HSe=X6.CONFIGURABLE,H6=Y6.IteratorPrototype,dx=Y6.BUGGY_SAFARI_ITERATORS,Sv=VSe("iterator"),W6="keys",qv="values",Z6="entries",K6=function(){return this};J6.exports=function(e,t,n,u,l,o,_){jSe(n,t,u);var b=function(K){if(K===l&&$)return $;if(!dx&&K&&K in C)return C[K];switch(K){case W6:return function(){return new n(this,K)};case qv:return function(){return new n(this,K)};case Z6:return function(){return new n(this,K)};}return function(){return new n(this)}},E=t+" Iterator",T=!1,C=e.prototype,z=C[Sv]||C["@@iterator"]||l&&C[l],$=!dx&&z||b(l),oe=t==="Array"&&C.entries||z,xe,_e,X;if(oe&&(xe=$6(oe.call(new e)),xe!==Object.prototype&&xe.next&&(!fx&&$6(xe)!==H6&&(V6?V6(xe,H6):BSe(xe[Sv])||AT(xe,Sv,K6)),USe(xe,E,!0,!0),fx&&(G6[E]=K6))),GSe&&l===qv&&z&&z.name!==qv&&(!fx&&HSe?$Se(C,"name",qv):(T=!0,$=function(){return NSe(z,this)})),l)if(_e={values:b(qv),keys:o?$:b(W6),entries:b(Z6)},_)for(X in _e)(dx||T||!(X in C))&&AT(C,X,_e[X]);else FSe({target:t,proto:!0,forced:dx||T},_e);return(!fx||_)&&C[Sv]!==$&&AT(C,Sv,$,{name:l}),G6[t]=$,_e}});var xi=S((vyt,Q6)=>{"use strict";Q6.exports=function(e,t){return{value:e,done:t}}});var Iv=S((gyt,nU)=>{"use strict";var WSe=Qr(),PT=Or(),eU=Dc(),rU=Yt(),ZSe=dr().f,KSe=px(),mx=xi(),XSe=Rt(),YSe=ht(),iU="Array Iterator",JSe=rU.set,QSe=rU.getterFor(iU);nU.exports=KSe(Array,"Array",function(e,t){JSe(this,{type:iU,target:WSe(e),index:0,kind:t})},function(){var e=QSe(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,mx(void 0,!0);switch(e.kind){case"keys":return mx(n,!1);case"values":return mx(t[n],!1);}return mx([n,t[n]],!1)},"values");var tU=eU.Arguments=eU.Array;PT("keys");PT("values");PT("entries");if(!XSe&&YSe&&tU.name!=="values")try{ZSe(tU,"name",{value:"values"})}catch(e){}});var aU=S(()=>{"use strict";var eqe=V(),tqe=Pe(),rqe=As(),iqe=Qr(),nqe=La(),aqe=tqe([].join),oqe=rqe!==Object,sqe=oqe||!nqe("join",",");eqe({target:"Array",proto:!0,forced:sqe},{join:function(t){return aqe(iqe(this),t===void 0?",":t)}})});var MT=S((xyt,sU)=>{"use strict";var uqe=tn(),lqe=Qr(),cqe=gr(),hqe=Nt(),fqe=La(),dqe=Math.min,CT=[].lastIndexOf,oU=!!CT&&1/[1].lastIndexOf(1,-0)<0,pqe=fqe("lastIndexOf"),mqe=oU||!pqe;sU.exports=mqe?function(t){if(oU)return uqe(CT,this,arguments)||0;var n=lqe(this),u=hqe(n);if(u===0)return-1;var l=u-1;for(arguments.length>1&&(l=dqe(l,cqe(arguments[1]))),l<0&&(l=u+l);l>=0;l--)if(l in n&&n[l]===t)return l||0;return-1}:CT});var lU=S(()=>{"use strict";var vqe=V(),uU=MT();vqe({target:"Array",proto:!0,forced:uU!==[].lastIndexOf},{lastIndexOf:uU})});var cU=S(()=>{"use strict";var gqe=V(),yqe=Ur().map,_qe=Vf(),xqe=_qe("map");gqe({target:"Array",proto:!0,forced:!xqe},{map:function(t){return yqe(this,t,arguments.length>1?arguments[1]:void 0)}})});var fU=S(()=>{"use strict";var bqe=V(),wqe=Oe(),Sqe=ho(),qqe=Da(),hU=Array,Iqe=wqe(function(){function e(){}return!(hU.of.call(e)instanceof e)});bqe({target:"Array",stat:!0,forced:Iqe},{of:function(){for(var t=0,n=arguments.length,u=new(Sqe(this)?this:hU)(n);n>t;)qqe(u,t,arguments[t++]);return u.length=n,u}})});var vx=S((Tyt,dU)=>{"use strict";var Eqe=ht(),Tqe=co(),Aqe=TypeError,Pqe=Object.getOwnPropertyDescriptor,Cqe=Eqe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();dU.exports=Cqe?function(e,t){if(Tqe(e)&&!Pqe(e,"length").writable)throw new Aqe("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}});var pU=S(()=>{"use strict";var Mqe=V(),Oqe=kt(),Rqe=Nt(),kqe=vx(),Dqe=ll(),Lqe=Oe(),zqe=Lqe(function(){return[].push.call({length:4294967296},1)!==4294967297}),Fqe=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},Nqe=zqe||!Fqe();Mqe({target:"Array",proto:!0,arity:1,forced:Nqe},{push:function(t){var n=Oqe(this),u=Rqe(n),l=arguments.length;Dqe(u+l);for(var o=0;o<l;o++)n[u]=arguments[o],u++;return kqe(n,u),u}})});var Ev=S((Cyt,yU)=>{"use strict";var Bqe=_t(),jqe=kt(),Uqe=As(),$qe=Nt(),mU=TypeError,vU="Reduce of empty array with no initial value",gU=function(e){return function(t,n,u,l){var o=jqe(t),_=Uqe(o),b=$qe(o);if(Bqe(n),b===0&&u<2)throw new mU(vU);var E=e?b-1:0,T=e?-1:1;if(u<2)for(;;){if(E in _){l=_[E],E+=T;break}if(E+=T,e?E<0:b<=E)throw new mU(vU)}for(;e?E>=0:b>E;E+=T)E in _&&(l=n(l,_[E],E,o));return l}};yU.exports={left:gU(!1),right:gU(!0)}});var Av=S((Myt,_U)=>{"use strict";var Tv=$e(),Vqe=oo(),Gqe=Oi(),gx=function(e){return Vqe.slice(0,e.length)===e};_U.exports=function(){return gx("Bun/")?"BUN":gx("Cloudflare-Workers")?"CLOUDFLARE":gx("Deno/")?"DENO":gx("Node.js/")?"NODE":Tv.Bun&&typeof Bun.version=="string"?"BUN":Tv.Deno&&typeof Deno.version=="object"?"DENO":Gqe(Tv.process)==="process"?"NODE":Tv.window&&Tv.document?"BROWSER":"REST"}()});var zc=S((Oyt,xU)=>{"use strict";var Hqe=Av();xU.exports=Hqe==="NODE"});var wU=S(()=>{"use strict";var Wqe=V(),Zqe=Ev().left,Kqe=La(),bU=No(),Xqe=zc(),Yqe=!Xqe&&bU>79&&bU<83,Jqe=Yqe||!Kqe("reduce");Wqe({target:"Array",proto:!0,forced:Jqe},{reduce:function(t){var n=arguments.length;return Zqe(this,t,n,n>1?arguments[1]:void 0)}})});var qU=S(()=>{"use strict";var Qqe=V(),eIe=Ev().right,tIe=La(),SU=No(),rIe=zc(),iIe=!rIe&&SU>79&&SU<83,nIe=iIe||!tIe("reduceRight");Qqe({target:"Array",proto:!0,forced:nIe},{reduceRight:function(t){return eIe(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})});var EU=S(()=>{"use strict";var aIe=V(),oIe=Pe(),sIe=co(),uIe=oIe([].reverse),IU=[1,2];aIe({target:"Array",proto:!0,forced:String(IU)===String(IU.reverse())},{reverse:function(){return sIe(this)&&(this.length=this.length),uIe(this)}})});var PU=S(()=>{"use strict";var lIe=V(),TU=co(),cIe=ho(),hIe=wt(),AU=lo(),fIe=Nt(),dIe=Qr(),pIe=Da(),mIe=pt(),vIe=Vf(),gIe=zn(),yIe=vIe("slice"),_Ie=mIe("species"),OT=Array,xIe=Math.max;lIe({target:"Array",proto:!0,forced:!yIe},{slice:function(t,n){var u=dIe(this),l=fIe(u),o=AU(t,l),_=AU(n===void 0?l:n,l),b,E,T;if(TU(u)&&(b=u.constructor,cIe(b)&&(b===OT||TU(b.prototype))?b=void 0:hIe(b)&&(b=b[_Ie],b===null&&(b=void 0)),b===OT||b===void 0))return gIe(u,o,_);for(E=new(b===void 0?OT:b)(xIe(_-o,0)),T=0;o<_;o++,T++)o in u&&pIe(E,T,u[o]);return E.length=T,E}})});var CU=S(()=>{"use strict";var bIe=V(),wIe=Ur().some,SIe=La(),qIe=SIe("some");bIe({target:"Array",proto:!0,forced:!qIe},{some:function(t){return wIe(this,t,arguments.length>1?arguments[1]:void 0)}})});var yx=S(($yt,OU)=>{"use strict";var MU=zn(),IIe=Math.floor,RT=function(e,t){var n=e.length;if(n<8)for(var u=1,l,o;u<n;){for(o=u,l=e[u];o&&t(e[o-1],l)>0;)e[o]=e[--o];o!==u++&&(e[o]=l)}else for(var _=IIe(n/2),b=RT(MU(e,0,_),t),E=RT(MU(e,_),t),T=b.length,C=E.length,z=0,$=0;z<T||$<C;)e[z+$]=z<T&&$<C?t(b[z],E[$])<=0?b[z++]:E[$++]:z<T?b[z++]:E[$++];return e};OU.exports=RT});var kT=S((Vyt,kU)=>{"use strict";var EIe=oo(),RU=EIe.match(/firefox\/(\d+)/i);kU.exports=!!RU&&+RU[1]});var DT=S((Gyt,DU)=>{"use strict";var TIe=oo();DU.exports=/MSIE|Trident/.test(TIe)});var _x=S((Hyt,zU)=>{"use strict";var AIe=oo(),LU=AIe.match(/AppleWebKit\/(\d+)\./);zU.exports=!!LU&&+LU[1]});var HU=S(()=>{"use strict";var PIe=V(),VU=Pe(),CIe=_t(),MIe=kt(),FU=Nt(),OIe=xv(),NU=qt(),LT=Oe(),RIe=yx(),kIe=La(),BU=kT(),DIe=DT(),jU=No(),UU=_x(),hl=[],$U=VU(hl.sort),LIe=VU(hl.push),zIe=LT(function(){hl.sort(void 0)}),FIe=LT(function(){hl.sort(null)}),NIe=kIe("sort"),GU=!LT(function(){if(jU)return jU<70;if(!(BU&&BU>3)){if(DIe)return!0;if(UU)return UU<603;var e="",t,n,u,l;for(t=65;t<76;t++){switch(n=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:u=3;break;case 68:case 71:u=4;break;default:u=2;}for(l=0;l<47;l++)hl.push({k:n+l,v:u})}for(hl.sort(function(o,_){return _.v-o.v}),l=0;l<hl.length;l++)n=hl[l].k.charAt(0),e.charAt(e.length-1)!==n&&(e+=n);return e!=="DGBEFHACIJK"}}),BIe=zIe||!FIe||!NIe||!GU,jIe=function(e){return function(t,n){return n===void 0?-1:t===void 0?1:e!==void 0?+e(t,n)||0:NU(t)>NU(n)?1:-1}};PIe({target:"Array",proto:!0,forced:BIe},{sort:function(t){t!==void 0&&CIe(t);var n=MIe(this);if(GU)return t===void 0?$U(n):$U(n,t);var u=[],l=FU(n),o,_;for(_=0;_<l;_++)_ in n&&LIe(u,n[_]);for(RIe(u,jIe(t)),o=FU(u),_=0;_<o;)n[_]=u[_++];for(;_<l;)OIe(n,_++);return n}})});var fl=S((Kyt,ZU)=>{"use strict";var UIe=xt(),$Ie=yr(),VIe=pt(),GIe=ht(),WU=VIe("species");ZU.exports=function(e){var t=UIe(e);GIe&&t&&!t[WU]&&$Ie(t,WU,{configurable:!0,get:function(){return this}})}});var KU=S(()=>{"use strict";var HIe=fl();HIe("Array")});var XU=S(()=>{"use strict";var WIe=V(),ZIe=kt(),KIe=lo(),XIe=gr(),YIe=Nt(),JIe=vx(),QIe=ll(),eEe=Nf(),tEe=Da(),zT=xv(),rEe=Vf(),iEe=rEe("splice"),nEe=Math.max,aEe=Math.min;WIe({target:"Array",proto:!0,forced:!iEe},{splice:function(t,n){var u=ZIe(this),l=YIe(u),o=KIe(t,l),_=arguments.length,b,E,T,C,z,$;for(_===0?b=E=0:_===1?(b=0,E=l-o):(b=_-2,E=aEe(nEe(XIe(n),0),l-o)),QIe(l+b-E),T=eEe(u,E),C=0;C<E;C++)z=o+C,z in u&&tEe(T,C,u[z]);if(T.length=E,b<E){for(C=o;C<l-E;C++)z=C+E,$=C+b,z in u?u[$]=u[z]:zT(u,$);for(C=l;C>l-E+b;C--)zT(u,C-1)}else if(b>E)for(C=l-E;C>o;C--)z=C+E-1,$=C+b-1,z in u?u[$]=u[z]:zT(u,$);for(C=0;C<b;C++)u[C+o]=arguments[C+2];return JIe(u,l-E+b),T}})});var FT=S((e_t,YU)=>{"use strict";var oEe=Nt();YU.exports=function(e,t){for(var n=oEe(e),u=new t(n),l=0;l<n;l++)u[l]=e[n-l-1];return u}});var NT=S(()=>{"use strict";var sEe=V(),uEe=FT(),lEe=Qr(),cEe=Or(),hEe=Array;sEe({target:"Array",proto:!0},{toReversed:function(){return uEe(lEe(this),hEe)}});cEe("toReversed")});var Ls=S((i_t,JU)=>{"use strict";var fEe=Nt();JU.exports=function(e,t,n){for(var u=0,l=arguments.length>2?n:fEe(t),o=new e(l);l>u;)o[u]=t[u++];return o}});var BT=S((n_t,QU)=>{"use strict";var dEe=$e();QU.exports=function(e,t){var n=dEe[e],u=n&&n.prototype;return u&&u[t]}});var jT=S(()=>{"use strict";var pEe=V(),mEe=Pe(),vEe=_t(),gEe=Qr(),yEe=Ls(),_Ee=BT(),xEe=Or(),bEe=Array,wEe=mEe(_Ee("Array","sort"));pEe({target:"Array",proto:!0},{toSorted:function(t){t!==void 0&&vEe(t);var n=gEe(this),u=yEe(bEe,n);return wEe(u,t)}});xEe("toSorted")});var UT=S(()=>{"use strict";var SEe=V(),qEe=Or(),IEe=ll(),EEe=Nt(),TEe=lo(),AEe=Qr(),PEe=gr(),CEe=Array,MEe=Math.max,OEe=Math.min;SEe({target:"Array",proto:!0},{toSpliced:function(t,n){var u=AEe(this),l=EEe(u),o=TEe(t,l),_=arguments.length,b=0,E,T,C,z;for(_===0?E=T=0:_===1?(E=0,T=l-o):(E=_-2,T=OEe(MEe(PEe(n),0),l-o)),C=IEe(l+E-T),z=CEe(C);b<o;b++)z[b]=u[b];for(;b<o+E;b++)z[b]=arguments[b-o+2];for(;b<C;b++)z[b]=u[b+T-E];return z}});qEe("toSpliced")});var e$=S(()=>{"use strict";var REe=Or();REe("flat")});var t$=S(()=>{"use strict";var kEe=Or();kEe("flatMap")});var r$=S(()=>{"use strict";var DEe=V(),LEe=kt(),zEe=Nt(),FEe=vx(),NEe=xv(),BEe=ll(),jEe=[].unshift(0)!==1,UEe=function(){try{Object.defineProperty([],"length",{writable:!1}).unshift()}catch(e){return e instanceof TypeError}},$Ee=jEe||!UEe();DEe({target:"Array",proto:!0,arity:1,forced:$Ee},{unshift:function(t){var n=LEe(this),u=zEe(n),l=arguments.length;if(l){BEe(u+l);for(var o=u;o--;){var _=o+l;o in n?n[_]=n[o]:NEe(n,_)}for(var b=0;b<l;b++)n[b]=arguments[b]}return FEe(n,u+l)}})});var $T=S((m_t,i$)=>{"use strict";var VEe=Nt(),GEe=gr(),HEe=RangeError;i$.exports=function(e,t,n,u){var l=VEe(e),o=GEe(n),_=o<0?l+o:o;if(_>=l||_<0)throw new HEe("Incorrect index");for(var b=new t(l),E=0;E<l;E++)b[E]=E===_?u:e[E];return b}});var VT=S(()=>{"use strict";var WEe=V(),ZEe=$T(),KEe=Qr(),XEe=Array;WEe({target:"Array",proto:!0},{with:function(e,t){return ZEe(KEe(this),XEe,e,t)}})});var xx=S((y_t,n$)=>{"use strict";n$.exports=typeof ArrayBuffer!="undefined"&&typeof DataView!="undefined"});var za=S((__t,a$)=>{"use strict";var YEe=tr();a$.exports=function(e,t,n){for(var u in t)YEe(e,u,t[u],n);return e}});var rn=S((x_t,o$)=>{"use strict";var JEe=Ri(),QEe=TypeError;o$.exports=function(e,t){if(JEe(t,e))return e;throw new QEe("Incorrect invocation")}});var Gf=S((b_t,s$)=>{"use strict";var eTe=gr(),tTe=Dn(),rTe=RangeError;s$.exports=function(e){if(e===void 0)return 0;var t=eTe(e),n=tTe(t);if(t!==n)throw new rTe("Wrong length or index");return n}});var bx=S((w_t,u$)=>{"use strict";u$.exports=Math.sign||function(t){var n=+t;return n===0||n!==n?n:n<0?-1:1}});var GT=S((S_t,h$)=>{"use strict";var iTe=bx(),nTe=Math.abs,c$=2220446049250313e-31,l$=1/c$,aTe=function(e){return e+l$-l$};h$.exports=function(e,t,n,u){var l=+e,o=nTe(l),_=iTe(l);if(o<u)return _*aTe(o/u/t)*u*t;var b=(1+t/c$)*o,E=b-(b-o);return E>n||E!==E?_*(1/0):_*E}});var wx=S((q_t,f$)=>{"use strict";var oTe=GT(),sTe=1.1920928955078125e-7,uTe=34028234663852886e22,lTe=11754943508222875e-54;f$.exports=Math.fround||function(t){return oTe(t,sTe,uTe,lTe)}});var Sx=S((I_t,d$)=>{"use strict";var cTe=Array,hTe=Math.abs,zs=Math.pow,fTe=Math.floor,dTe=Math.log,pTe=Math.LN2,mTe=function(e,t,n){var u=cTe(n),l=n*8-t-1,o=(1<<l)-1,_=o>>1,b=t===23?zs(2,-24)-zs(2,-77):0,E=e<0||e===0&&1/e<0?1:0,T=0,C,z,$;for(e=hTe(e),e!==e||e===1/0?(z=e!==e?1:0,C=o):(C=fTe(dTe(e)/pTe),$=zs(2,-C),e*$<1&&(C--,$*=2),C+_>=1?e+=b/$:e+=b*zs(2,1-_),e*$>=2&&(C++,$/=2),C+_>=o?(z=0,C=o):C+_>=1?(z=(e*$-1)*zs(2,t),C+=_):(z=e*zs(2,_-1)*zs(2,t),C=0));t>=8;)u[T++]=z&255,z/=256,t-=8;for(C=C<<t|z,l+=t;l>0;)u[T++]=C&255,C/=256,l-=8;return u[T-1]|=E*128,u},vTe=function(e,t){var n=e.length,u=n*8-t-1,l=(1<<u)-1,o=l>>1,_=u-7,b=n-1,E=e[b--],T=E&127,C;for(E>>=7;_>0;)T=T*256+e[b--],_-=8;for(C=T&(1<<-_)-1,T>>=-_,_+=t;_>0;)C=C*256+e[b--],_-=8;if(T===0)T=1-o;else{if(T===l)return C?NaN:E?-1/0:1/0;C+=zs(2,t),T-=o}return(E?-1:1)*C*zs(2,T-t)};d$.exports={pack:mTe,unpack:vTe}});var Mv=S((E_t,C$)=>{"use strict";var Ax=$e(),XT=Pe(),HT=ht(),gTe=xx(),I$=Ec(),yTe=ei(),_Te=yr(),p$=za(),WT=Oe(),qx=rn(),xTe=gr(),bTe=Dn(),Ex=Gf(),wTe=wx(),E$=Sx(),STe=ti(),m$=ka(),qTe=cx(),ITe=zn(),ETe=sl(),TTe=Ac(),T$=vn(),YT=Yt(),ATe=I$.PROPER,v$=I$.CONFIGURABLE,Wf="ArrayBuffer",Px="DataView",Zf="prototype",PTe="Wrong length",A$="Wrong index",g$=YT.getterFor(Wf),Cv=YT.getterFor(Px),y$=YT.set,fo=Ax[Wf],la=fo,Hf=la&&la[Zf],$o=Ax[Px],Fc=$o&&$o[Zf],_$=Object.prototype,CTe=Ax.Array,Tx=Ax.RangeError,MTe=XT(qTe),OTe=XT([].reverse),P$=E$.pack,x$=E$.unpack,b$=function(e){return[e&255]},w$=function(e){return[e&255,e>>8&255]},S$=function(e){return[e&255,e>>8&255,e>>16&255,e>>24&255]},q$=function(e){return e[3]<<24|e[2]<<16|e[1]<<8|e[0]},RTe=function(e){return P$(wTe(e),23,4)},kTe=function(e){return P$(e,52,8)},Ix=function(e,t,n){_Te(e[Zf],t,{configurable:!0,get:function(){return n(this)[t]}})},dl=function(e,t,n,u){var l=Cv(e),o=Ex(n),_=!!u;if(o+t>l.byteLength)throw new Tx(A$);var b=l.bytes,E=o+l.byteOffset,T=ITe(b,E,E+t);return _?T:OTe(T)},pl=function(e,t,n,u,l,o){var _=Cv(e),b=Ex(n),E=u(+l),T=!!o;if(b+t>_.byteLength)throw new Tx(A$);for(var C=_.bytes,z=b+_.byteOffset,$=0;$<t;$++)C[z+$]=E[T?$:t-$-1]};gTe?(ZT=ATe&&fo.name!==Wf,!WT(function(){fo(1)})||!WT(function(){new fo(-1)})||WT(function(){return new fo,new fo(1.5),new fo(NaN),fo.length!==1||ZT&&!v$})?(la=function(t){return qx(this,Hf),ETe(new fo(Ex(t)),this,la)},la[Zf]=Hf,Hf.constructor=la,TTe(la,fo)):ZT&&v$&&yTe(fo,"name",Wf),m$&&STe(Fc)!==_$&&m$(Fc,_$),Pv=new $o(new la(2)),KT=XT(Fc.setInt8),Pv.setInt8(0,2147483648),Pv.setInt8(1,2147483649),(Pv.getInt8(0)||!Pv.getInt8(1))&&p$(Fc,{setInt8:function(t,n){KT(this,t,n<<24>>24)},setUint8:function(t,n){KT(this,t,n<<24>>24)}},{unsafe:!0})):(la=function(t){qx(this,Hf);var n=Ex(t);y$(this,{type:Wf,bytes:MTe(CTe(n),0),byteLength:n}),HT||(this.byteLength=n,this.detached=!1)},Hf=la[Zf],$o=function(t,n,u){qx(this,Fc),qx(t,Hf);var l=g$(t),o=l.byteLength,_=xTe(n);if(_<0||_>o)throw new Tx("Wrong offset");if(u=u===void 0?o-_:bTe(u),_+u>o)throw new Tx(PTe);y$(this,{type:Px,buffer:t,byteLength:u,byteOffset:_,bytes:l.bytes}),HT||(this.buffer=t,this.byteLength=u,this.byteOffset=_)},Fc=$o[Zf],HT&&(Ix(la,"byteLength",g$),Ix($o,"buffer",Cv),Ix($o,"byteLength",Cv),Ix($o,"byteOffset",Cv)),p$(Fc,{getInt8:function(t){return dl(this,1,t)[0]<<24>>24},getUint8:function(t){return dl(this,1,t)[0]},getInt16:function(t){var n=dl(this,2,t,arguments.length>1?arguments[1]:!1);return(n[1]<<8|n[0])<<16>>16},getUint16:function(t){var n=dl(this,2,t,arguments.length>1?arguments[1]:!1);return n[1]<<8|n[0]},getInt32:function(t){return q$(dl(this,4,t,arguments.length>1?arguments[1]:!1))},getUint32:function(t){return q$(dl(this,4,t,arguments.length>1?arguments[1]:!1))>>>0},getFloat32:function(t){return x$(dl(this,4,t,arguments.length>1?arguments[1]:!1),23)},getFloat64:function(t){return x$(dl(this,8,t,arguments.length>1?arguments[1]:!1),52)},setInt8:function(t,n){pl(this,1,t,b$,n)},setUint8:function(t,n){pl(this,1,t,b$,n)},setInt16:function(t,n){pl(this,2,t,w$,n,arguments.length>2?arguments[2]:!1)},setUint16:function(t,n){pl(this,2,t,w$,n,arguments.length>2?arguments[2]:!1)},setInt32:function(t,n){pl(this,4,t,S$,n,arguments.length>2?arguments[2]:!1)},setUint32:function(t,n){pl(this,4,t,S$,n,arguments.length>2?arguments[2]:!1)},setFloat32:function(t,n){pl(this,4,t,RTe,n,arguments.length>2?arguments[2]:!1)},setFloat64:function(t,n){pl(this,8,t,kTe,n,arguments.length>2?arguments[2]:!1)}}));var ZT,Pv,KT;T$(la,Wf);T$($o,Px);C$.exports={ArrayBuffer:la,DataView:$o}});var O$=S(()=>{"use strict";var DTe=V(),LTe=$e(),zTe=Mv(),FTe=fl(),JT="ArrayBuffer",M$=zTe[JT],NTe=LTe[JT];DTe({global:!0,constructor:!0,forced:NTe!==M$},{ArrayBuffer:M$});FTe(JT)});var Ot=S((P_t,U$)=>{"use strict";var BTe=xx(),r2=ht(),gn=$e(),L$=Tt(),Ox=wt(),vl=Ct(),i2=Ln(),jTe=rl(),UTe=ei(),QT=tr(),$Te=yr(),VTe=Ri(),Rx=ti(),Xf=ka(),GTe=pt(),HTe=il(),z$=Yt(),F$=z$.enforce,WTe=z$.get,Cx=gn.Int8Array,e2=Cx&&Cx.prototype,R$=gn.Uint8ClampedArray,k$=R$&&R$.prototype,Vo=Cx&&Rx(Cx),po=e2&&Rx(e2),ZTe=Object.prototype,n2=gn.TypeError,D$=GTe("toStringTag"),t2=HTe("TYPED_ARRAY_TAG"),Mx="TypedArrayConstructor",Fs=BTe&&!!Xf&&i2(gn.opera)!=="Opera",N$=!1,Nn,ml,Kf,Ns={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},a2={BigInt64Array:8,BigUint64Array:8},KTe=function(t){if(!Ox(t))return!1;var n=i2(t);return n==="DataView"||vl(Ns,n)||vl(a2,n)},B$=function(e){var t=Rx(e);if(Ox(t)){var n=WTe(t);return n&&vl(n,Mx)?n[Mx]:B$(t)}},j$=function(e){if(!Ox(e))return!1;var t=i2(e);return vl(Ns,t)||vl(a2,t)},XTe=function(e){if(j$(e))return e;throw new n2("Target is not a typed array")},YTe=function(e){if(L$(e)&&(!Xf||VTe(Vo,e)))return e;throw new n2(jTe(e)+" is not a typed array constructor")},JTe=function(e,t,n,u){if(r2){if(n)for(var l in Ns){var o=gn[l];if(o&&vl(o.prototype,e))try{delete o.prototype[e]}catch(_){try{o.prototype[e]=t}catch(b){}}}(!po[e]||n)&&QT(po,e,n?t:Fs&&e2[e]||t,u)}},QTe=function(e,t,n){var u,l;if(r2){if(Xf){if(n){for(u in Ns)if(l=gn[u],l&&vl(l,e))try{delete l[e]}catch(o){}}if(!Vo[e]||n)try{return QT(Vo,e,n?t:Fs&&Vo[e]||t)}catch(o){}else return}for(u in Ns)l=gn[u],l&&(!l[e]||n)&&QT(l,e,t)}};for(Nn in Ns)ml=gn[Nn],Kf=ml&&ml.prototype,Kf?F$(Kf)[Mx]=ml:Fs=!1;for(Nn in a2)ml=gn[Nn],Kf=ml&&ml.prototype,Kf&&(F$(Kf)[Mx]=ml);if((!Fs||!L$(Vo)||Vo===Function.prototype)&&(Vo=function(){throw new n2("Incorrect invocation")},Fs))for(Nn in Ns)gn[Nn]&&Xf(gn[Nn],Vo);if((!Fs||!po||po===ZTe)&&(po=Vo.prototype,Fs))for(Nn in Ns)gn[Nn]&&Xf(gn[Nn].prototype,po);Fs&&Rx(k$)!==po&&Xf(k$,po);if(r2&&!vl(po,D$)){N$=!0,$Te(po,D$,{configurable:!0,get:function(){return Ox(this)?this[t2]:void 0}});for(Nn in Ns)gn[Nn]&&UTe(gn[Nn],t2,Nn)}U$.exports={NATIVE_ARRAY_BUFFER_VIEWS:Fs,TYPED_ARRAY_TAG:N$&&t2,aTypedArray:XTe,aTypedArrayConstructor:YTe,exportTypedArrayMethod:JTe,exportTypedArrayStaticMethod:QTe,getTypedArrayConstructor:B$,isView:KTe,isTypedArray:j$,TypedArray:Vo,TypedArrayPrototype:po}});var V$=S(()=>{"use strict";var e2e=V(),$$=Ot(),t2e=$$.NATIVE_ARRAY_BUFFER_VIEWS;e2e({target:"ArrayBuffer",stat:!0,forced:!t2e},{isView:$$.isView})});var X$=S(()=>{"use strict";var r2e=V(),s2=Ms(),i2e=Oe(),Z$=Mv(),G$=He(),H$=lo(),n2e=Dn(),u2=Z$.ArrayBuffer,o2=Z$.DataView,K$=o2.prototype,W$=s2(u2.prototype.slice),a2e=s2(K$.getUint8),o2e=s2(K$.setUint8),s2e=i2e(function(){return!new u2(2).slice(1,void 0).byteLength});r2e({target:"ArrayBuffer",proto:!0,unsafe:!0,forced:s2e},{slice:function(t,n){if(W$&&n===void 0)return W$(G$(this),t);for(var u=G$(this).byteLength,l=H$(t,u),o=H$(n===void 0?u:n,u),_=new u2(n2e(o-l)),b=new o2(this),E=new o2(_),T=0;l<o;)o2e(E,T++,a2e(b,l++));return _}})});var Y$=S(()=>{"use strict";var u2e=V(),l2e=Mv(),c2e=xx();u2e({global:!0,constructor:!0,forced:!c2e},{DataView:l2e.DataView})});var J$=S(()=>{"use strict";Y$()});var l2=S((F_t,tV)=>{"use strict";var eV=$e(),h2e=_v(),f2e=Oi(),Q$=eV.ArrayBuffer,d2e=eV.TypeError;tV.exports=Q$&&h2e(Q$.prototype,"byteLength","get")||function(e){if(f2e(e)!=="ArrayBuffer")throw new d2e("ArrayBuffer expected");return e.byteLength}});var c2=S((N_t,aV)=>{"use strict";var p2e=$e(),m2e=Ms(),v2e=l2(),rV=p2e.ArrayBuffer,iV=rV&&rV.prototype,nV=iV&&m2e(iV.slice);aV.exports=function(e){if(v2e(e)!==0||!nV)return!1;try{return nV(e,0,0),!1}catch(t){return!0}}});var h2=S(()=>{"use strict";var g2e=ht(),y2e=yr(),_2e=c2(),oV=ArrayBuffer.prototype;g2e&&!("detached"in oV)&&y2e(oV,"detached",{configurable:!0,get:function(){return _2e(this)}})});var Yf=S((U_t,sV)=>{"use strict";var x2e=c2(),b2e=TypeError;sV.exports=function(e){if(x2e(e))throw new b2e("ArrayBuffer is detached");return e}});var f2=S(($_t,uV)=>{"use strict";var w2e=$e(),S2e=zc();uV.exports=function(e){if(S2e){try{return w2e.process.getBuiltinModule(e)}catch(t){}try{return Function("return require(\""+e+"\")")()}catch(t){}}}});var kx=S((V_t,cV)=>{"use strict";var q2e=$e(),I2e=Oe(),d2=No(),p2=Av(),lV=q2e.structuredClone;cV.exports=!!lV&&!I2e(function(){if(p2==="DENO"&&d2>92||p2==="NODE"&&d2>94||p2==="BROWSER"&&d2>97)return!1;var e=new ArrayBuffer(8),t=lV(e,{transfer:[e]});return e.byteLength!==0||t.byteLength!==8})});var _2=S((G_t,dV)=>{"use strict";var y2=$e(),E2e=f2(),T2e=kx(),A2e=y2.structuredClone,hV=y2.ArrayBuffer,Dx=y2.MessageChannel,g2=!1,m2,fV,Lx,v2;if(T2e)g2=function(e){A2e(e,{transfer:[e]})};else if(hV)try{Dx||(m2=E2e("worker_threads"),m2&&(Dx=m2.MessageChannel)),Dx&&(fV=new Dx,Lx=new hV(2),v2=function(e){fV.port1.postMessage(null,[e])},Lx.byteLength===2&&(v2(Lx),Lx.byteLength===0&&(g2=v2)))}catch(e){}dV.exports=g2});var I2=S((H_t,xV)=>{"use strict";var w2=$e(),S2=Pe(),gV=_v(),P2e=Gf(),C2e=Yf(),M2e=l2(),pV=_2(),x2=kx(),O2e=w2.structuredClone,yV=w2.ArrayBuffer,b2=w2.DataView,R2e=Math.min,q2=yV.prototype,_V=b2.prototype,k2e=S2(q2.slice),mV=gV(q2,"resizable","get"),vV=gV(q2,"maxByteLength","get"),D2e=S2(_V.getInt8),L2e=S2(_V.setInt8);xV.exports=(x2||pV)&&function(e,t,n){var u=M2e(e),l=t===void 0?u:P2e(t),o=!mV||!mV(e),_;if(C2e(e),x2&&(e=O2e(e,{transfer:[e]}),u===l&&(n||o)))return e;if(u>=l&&(!n||o))_=k2e(e,0,l);else{var b=n&&!o&&vV?{maxByteLength:vV(e)}:void 0;_=new yV(l,b);for(var E=new b2(e),T=new b2(_),C=R2e(l,u),z=0;z<C;z++)L2e(T,z,D2e(E,z))}return x2||pV(e),_}});var E2=S(()=>{"use strict";var z2e=V(),bV=I2();bV&&z2e({target:"ArrayBuffer",proto:!0},{transfer:function(){return bV(this,arguments.length?arguments[0]:void 0,!0)}})});var T2=S(()=>{"use strict";var F2e=V(),wV=I2();wV&&F2e({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return wV(this,arguments.length?arguments[0]:void 0,!1)}})});var SV=S(()=>{"use strict";var N2e=V(),B2e=Pe(),j2e=Oe(),U2e=j2e(function(){return new Date(16e11).getYear()!==120}),$2e=B2e(Date.prototype.getFullYear);N2e({target:"Date",proto:!0,forced:U2e},{getYear:function(){return $2e(this)-1900}})});var IV=S(()=>{"use strict";var V2e=V(),G2e=Pe(),qV=Date,H2e=G2e(qV.prototype.getTime);V2e({target:"Date",stat:!0},{now:function(){return H2e(new qV)}})});var AV=S(()=>{"use strict";var W2e=V(),EV=Pe(),Z2e=gr(),TV=Date.prototype,K2e=EV(TV.getTime),X2e=EV(TV.setFullYear);W2e({target:"Date",proto:!0},{setYear:function(t){K2e(this);var n=Z2e(t),u=n>=0&&n<=99?n+1900:n;return X2e(this,u)}})});var PV=S(()=>{"use strict";var Y2e=V();Y2e({target:"Date",proto:!0},{toGMTString:Date.prototype.toUTCString})});var Ov=S((a0t,CV)=>{"use strict";var J2e=gr(),Q2e=qt(),eAe=mr(),tAe=RangeError;CV.exports=function(t){var n=Q2e(eAe(this)),u="",l=J2e(t);if(l<0||l===1/0)throw new tAe("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(n+=n))l&1&&(u+=n);return u}});var Rv=S((o0t,kV)=>{"use strict";var RV=Pe(),rAe=Dn(),MV=qt(),iAe=Ov(),nAe=mr(),aAe=RV(iAe),oAe=RV("".slice),sAe=Math.ceil,OV=function(e){return function(t,n,u){var l=MV(nAe(t)),o=rAe(n),_=l.length,b=u===void 0?" ":MV(u),E,T;return o<=_||b===""?l:(E=o-_,T=aAe(b,sAe(E/b.length)),T.length>E&&(T=oAe(T,0,E)),e?l+T:T+l)}};kV.exports={start:OV(!1),end:OV(!0)}});var zV=S((s0t,LV)=>{"use strict";var gl=Pe(),DV=Oe(),Nc=Rv().start,uAe=RangeError,lAe=isFinite,cAe=Math.abs,Bs=Date.prototype,A2=Bs.toISOString,hAe=gl(Bs.getTime),fAe=gl(Bs.getUTCDate),dAe=gl(Bs.getUTCFullYear),pAe=gl(Bs.getUTCHours),mAe=gl(Bs.getUTCMilliseconds),vAe=gl(Bs.getUTCMinutes),gAe=gl(Bs.getUTCMonth),yAe=gl(Bs.getUTCSeconds);LV.exports=DV(function(){return A2.call(new Date(-5e13-1))!=="0385-07-25T07:06:39.999Z"})||!DV(function(){A2.call(new Date(NaN))})?function(){if(!lAe(hAe(this)))throw new uAe("Invalid time value");var t=this,n=dAe(t),u=mAe(t),l=n<0?"-":n>9999?"+":"";return l+Nc(cAe(n),l?6:4,0)+"-"+Nc(gAe(t)+1,2,0)+"-"+Nc(fAe(t),2,0)+"T"+Nc(pAe(t),2,0)+":"+Nc(vAe(t),2,0)+":"+Nc(yAe(t),2,0)+"."+Nc(u,3,0)+"Z"}:A2});var NV=S(()=>{"use strict";var _Ae=V(),FV=zV();_Ae({target:"Date",proto:!0,forced:Date.prototype.toISOString!==FV},{toISOString:FV})});var BV=S(()=>{"use strict";var xAe=V(),bAe=Oe(),wAe=kt(),SAe=nv(),qAe=bAe(function(){return new Date(NaN).toJSON()!==null||Date.prototype.toJSON.call({toISOString:function(){return 1}})!==1});xAe({target:"Date",proto:!0,arity:1,forced:qAe},{toJSON:function(t){var n=wAe(this),u=SAe(n,"number");return typeof u=="number"&&!isFinite(u)?null:n.toISOString()}})});var UV=S((f0t,jV)=>{"use strict";var IAe=He(),EAe=aE(),TAe=TypeError;jV.exports=function(e){if(IAe(this),e==="string"||e==="default")e="string";else if(e!=="number")throw new TAe("Incorrect hint");return EAe(this,e)}});var GV=S(()=>{"use strict";var AAe=Ct(),PAe=tr(),CAe=UV(),MAe=pt(),$V=MAe("toPrimitive"),VV=Date.prototype;AAe(VV,$V)||PAe(VV,$V,CAe)});var KV=S(()=>{"use strict";var WV=Pe(),OAe=tr(),P2=Date.prototype,HV="Invalid Date",ZV="toString",RAe=WV(P2[ZV]),kAe=WV(P2.getTime);String(new Date(NaN))!==HV&&OAe(P2,ZV,function(){var t=kAe(this);return t===t?RAe(this):HV})});var YV=S(()=>{"use strict";var DAe=V(),kv=Pe(),LAe=qt(),zAe=kv("".charAt),FAe=kv("".charCodeAt),NAe=kv(/./.exec),BAe=kv(1 .toString),jAe=kv("".toUpperCase),UAe=/[\w*+\-./@]/,XV=function(e,t){for(var n=BAe(e,16);n.length<t;)n="0"+n;return n};DAe({global:!0},{escape:function(t){for(var n=LAe(t),u="",l=n.length,o=0,_,b;o<l;)_=zAe(n,o++),NAe(UAe,_)?u+=_:(b=FAe(_,0),b<256?u+="%"+XV(b,2):u+="%u"+jAe(XV(b,4)));return u}})});var M2=S((_0t,t8)=>{"use strict";var QV=Pe(),$Ae=_t(),VAe=wt(),GAe=Ct(),JV=zn(),HAe=kf(),e8=Function,WAe=QV([].concat),ZAe=QV([].join),C2={},KAe=function(e,t,n){if(!GAe(C2,t)){for(var u=[],l=0;l<t;l++)u[l]="a["+l+"]";C2[t]=e8("C,a","return new C("+ZAe(u,",")+")")}return C2[t](e,n)};t8.exports=HAe?e8.bind:function(t){var n=$Ae(this),u=n.prototype,l=JV(arguments,1),o=function(){var b=WAe(l,JV(arguments));return this instanceof o?KAe(n,b.length,b):n.apply(t,b)};return VAe(u)&&(o.prototype=u),o}});var i8=S(()=>{"use strict";var XAe=V(),r8=M2();XAe({target:"Function",proto:!0,forced:Function.bind!==r8},{bind:r8})});var o8=S(()=>{"use strict";var YAe=Tt(),n8=wt(),JAe=dr(),QAe=Ri(),ePe=pt(),tPe=lv(),O2=ePe("hasInstance"),a8=Function.prototype;O2 in a8||JAe.f(a8,O2,{value:tPe(function(e){if(!YAe(this)||!n8(e))return!1;var t=this.prototype;return n8(t)?QAe(t,e):e instanceof this},O2)})});var c8=S(()=>{"use strict";var rPe=ht(),iPe=Ec().EXISTS,s8=Pe(),nPe=yr(),u8=Function.prototype,aPe=s8(u8.toString),l8=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,oPe=s8(l8.exec),sPe="name";rPe&&!iPe&&nPe(u8,sPe,{configurable:!0,get:function(){try{return oPe(l8,aPe(this))[1]}catch(e){return""}}})});var k2=S(()=>{"use strict";var uPe=V(),R2=$e();uPe({global:!0,forced:R2.globalThis!==R2},{globalThis:R2})});var N2=S(()=>{"use strict";var lPe=V(),cPe=$e(),hPe=rn(),fPe=He(),dPe=Tt(),pPe=ti(),mPe=yr(),vPe=Da(),gPe=Oe(),z2=Ct(),yPe=pt(),Go=Lc().IteratorPrototype,_Pe=ht(),xPe=Rt(),D2="constructor",f8="Iterator",h8=yPe("toStringTag"),d8=TypeError,L2=cPe[f8],p8=xPe||!dPe(L2)||L2.prototype!==Go||!gPe(function(){L2({})}),F2=function(){if(hPe(this,Go),pPe(this)===Go)throw new d8("Abstract class Iterator not directly constructable")},m8=function(e,t){_Pe?mPe(Go,e,{configurable:!0,get:function(){return t},set:function(n){if(fPe(this),this===Go)throw new d8("You can't redefine this property");z2(this,e)?this[e]=n:vPe(this,e,n)}}):Go[e]=t};z2(Go,h8)||m8(h8,f8);(p8||!z2(Go,D2)||Go[D2]===Object)&&m8(D2,F2);F2.prototype=Go;lPe({global:!0,constructor:!0,forced:p8},{Iterator:F2})});var Ir=S((C0t,v8)=>{"use strict";v8.exports=function(e){return{iterator:e,next:e.next,done:!1}}});var Dv=S((M0t,g8)=>{"use strict";var bPe=RangeError;g8.exports=function(e){if(e===e)return e;throw new bPe("NaN is not allowed")}});var Jf=S((O0t,y8)=>{"use strict";var wPe=gr(),SPe=RangeError;y8.exports=function(e){var t=wPe(e);if(t<0)throw new SPe("The argument can't be less than 0");return t}});var yl=S((R0t,q8)=>{"use strict";var qPe=Ze(),IPe=jr(),EPe=ei(),TPe=za(),APe=pt(),_8=Yt(),PPe=Br(),CPe=Lc().IteratorPrototype,B2=xi(),j2=ks(),MPe=APe("toStringTag"),x8="IteratorHelper",b8="WrapForValidIterator",OPe=_8.set,w8=function(e){var t=_8.getterFor(e?b8:x8);return TPe(IPe(CPe),{next:function(){var u=t(this);if(e)return u.nextHandler();try{var l=u.done?void 0:u.nextHandler();return B2(l,u.done)}catch(o){throw u.done=!0,o}},return:function(){var n=t(this),u=n.iterator;if(n.done=!0,e){var l=PPe(u,"return");return l?qPe(l,u):B2(void 0,!0)}if(n.inner)try{j2(n.inner.iterator,"normal")}catch(o){return j2(u,"throw",o)}return u&&j2(u,"normal"),B2(void 0,!0)}})},RPe=w8(!0),S8=w8(!1);EPe(S8,MPe,"Iterator Helper");q8.exports=function(e,t){var n=function(l,o){o?(o.iterator=l.iterator,o.next=l.next):o=l,o.type=t?b8:x8,o.nextHandler=e,o.counter=0,o.done=!1,OPe(this,o)};return n.prototype=t?RPe:S8,n}});var $2=S(()=>{"use strict";var kPe=V(),I8=Ze(),U2=He(),DPe=Ir(),LPe=Dv(),zPe=Jf(),FPe=yl(),NPe=Rt(),BPe=FPe(function(){for(var e=this.iterator,t=this.next,n,u;this.remaining;)if(this.remaining--,n=U2(I8(t,e)),u=this.done=!!n.done,u)return;if(n=U2(I8(t,e)),u=this.done=!!n.done,!u)return n.value});kPe({target:"Iterator",proto:!0,real:!0,forced:NPe},{drop:function(t){U2(this);var n=zPe(LPe(+t));return new BPe(DPe(this),{remaining:n})}})});var V2=S(()=>{"use strict";var jPe=V(),UPe=Mr(),$Pe=_t(),VPe=He(),GPe=Ir();jPe({target:"Iterator",proto:!0,real:!0},{every:function(t){VPe(this),$Pe(t);var n=GPe(this),u=0;return!UPe(n,function(l,o){if(!t(l,u++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var G2=S(()=>{"use strict";var HPe=V(),WPe=Ze(),ZPe=_t(),E8=He(),KPe=Ir(),XPe=yl(),YPe=hx(),JPe=Rt(),QPe=XPe(function(){for(var e=this.iterator,t=this.predicate,n=this.next,u,l,o;;){if(u=E8(WPe(n,e)),l=this.done=!!u.done,l)return;if(o=u.value,YPe(e,t,[o,this.counter++],!0))return o}});HPe({target:"Iterator",proto:!0,real:!0,forced:JPe},{filter:function(t){return E8(this),ZPe(t),new QPe(KPe(this),{predicate:t})}})});var H2=S(()=>{"use strict";var eCe=V(),tCe=Mr(),rCe=_t(),iCe=He(),nCe=Ir();eCe({target:"Iterator",proto:!0,real:!0},{find:function(t){iCe(this),rCe(t);var n=nCe(this),u=0;return tCe(n,function(l,o){if(t(l,u++))return o(l)},{IS_RECORD:!0,INTERRUPTED:!0}).result}})});var W2=S((U0t,A8)=>{"use strict";var aCe=Ze(),T8=He(),oCe=Ir(),sCe=Uo();A8.exports=function(e,t){(!t||typeof e!="string")&&T8(e);var n=sCe(e);return oCe(T8(n!==void 0?aCe(n,e):e))}});var K2=S(()=>{"use strict";var uCe=V(),P8=Ze(),lCe=_t(),Z2=He(),cCe=Ir(),hCe=W2(),fCe=yl(),C8=ks(),dCe=Rt(),pCe=fCe(function(){for(var e=this.iterator,t=this.mapper,n,u;;){if(u=this.inner)try{if(n=Z2(P8(u.next,u.iterator)),!n.done)return n.value;this.inner=null}catch(l){C8(e,"throw",l)}if(n=Z2(P8(this.next,e)),this.done=!!n.done)return;try{this.inner=hCe(t(n.value,this.counter++),!1)}catch(l){C8(e,"throw",l)}}});uCe({target:"Iterator",proto:!0,real:!0,forced:dCe},{flatMap:function(t){return Z2(this),lCe(t),new pCe(cCe(this),{mapper:t,inner:null})}})});var X2=S(()=>{"use strict";var mCe=V(),vCe=Mr(),gCe=_t(),yCe=He(),_Ce=Ir();mCe({target:"Iterator",proto:!0,real:!0},{forEach:function(t){yCe(this),gCe(t);var n=_Ce(this),u=0;vCe(n,function(l){t(l,u++)},{IS_RECORD:!0})}})});var Y2=S(()=>{"use strict";var xCe=V(),bCe=Ze(),wCe=kt(),SCe=Ri(),qCe=Lc().IteratorPrototype,ICe=yl(),ECe=W2(),TCe=Rt(),ACe=ICe(function(){return bCe(this.next,this.iterator)},!0);xCe({target:"Iterator",stat:!0,forced:TCe},{from:function(t){var n=ECe(typeof t=="string"?wCe(t):t,!0);return SCe(qCe,n.iterator)?n.iterator:new ACe(n)}})});var J2=S((K0t,O8)=>{"use strict";var PCe=Ze(),CCe=_t(),M8=He(),MCe=Ir(),OCe=yl(),RCe=hx(),kCe=OCe(function(){var e=this.iterator,t=M8(PCe(this.next,e)),n=this.done=!!t.done;if(!n)return RCe(e,this.mapper,[t.value,this.counter++],!0)});O8.exports=function(t){return M8(this),CCe(t),new kCe(MCe(this),{mapper:t})}});var Q2=S(()=>{"use strict";var DCe=V(),LCe=J2(),zCe=Rt();DCe({target:"Iterator",proto:!0,real:!0,forced:zCe},{map:LCe})});var eA=S(()=>{"use strict";var FCe=V(),NCe=Mr(),BCe=_t(),jCe=He(),UCe=Ir(),$Ce=TypeError;FCe({target:"Iterator",proto:!0,real:!0},{reduce:function(t){jCe(this),BCe(t);var n=UCe(this),u=arguments.length<2,l=u?void 0:arguments[1],o=0;if(NCe(n,function(_){u?(u=!1,l=_):l=t(l,_,o),o++},{IS_RECORD:!0}),u)throw new $Ce("Reduce of empty iterator with no initial value");return l}})});var tA=S(()=>{"use strict";var VCe=V(),GCe=Mr(),HCe=_t(),WCe=He(),ZCe=Ir();VCe({target:"Iterator",proto:!0,real:!0},{some:function(t){WCe(this),HCe(t);var n=ZCe(this),u=0;return GCe(n,function(l,o){if(t(l,u++))return o()},{IS_RECORD:!0,INTERRUPTED:!0}).stopped}})});var rA=S(()=>{"use strict";var KCe=V(),XCe=Ze(),R8=He(),YCe=Ir(),JCe=Dv(),QCe=Jf(),eMe=yl(),tMe=ks(),rMe=Rt(),iMe=eMe(function(){var e=this.iterator;if(!this.remaining--)return this.done=!0,tMe(e,"normal",void 0);var t=R8(XCe(this.next,e)),n=this.done=!!t.done;if(!n)return t.value});KCe({target:"Iterator",proto:!0,real:!0,forced:rMe},{take:function(t){R8(this);var n=QCe(JCe(+t));return new iMe(YCe(this),{remaining:n})}})});var iA=S(()=>{"use strict";var nMe=V(),aMe=He(),oMe=Mr(),sMe=Ir(),uMe=[].push;nMe({target:"Iterator",proto:!0,real:!0},{toArray:function(){var t=[];return oMe(sMe(aMe(this)),uMe,{that:t,IS_RECORD:!0}),t}})});var k8=S(()=>{"use strict";var lMe=$e(),cMe=vn();cMe(lMe.JSON,"JSON",!0)});var zx=S((uxt,D8)=>{"use strict";var hMe=Oe();D8.exports=hMe(function(){if(typeof ArrayBuffer=="function"){var e=new ArrayBuffer(8);Object.isExtensible(e)&&Object.defineProperty(e,"a",{value:8})}})});var Nx=S((lxt,z8)=>{"use strict";var fMe=Oe(),dMe=wt(),pMe=Oi(),L8=zx(),Fx=Object.isExtensible,mMe=fMe(function(){Fx(1)});z8.exports=mMe||L8?function(t){return!dMe(t)||L8&&pMe(t)==="ArrayBuffer"?!1:Fx?Fx(t):!0}:Fx});var js=S((cxt,F8)=>{"use strict";var vMe=Oe();F8.exports=!vMe(function(){return Object.isExtensible(Object.preventExtensions({}))})});var _l=S((hxt,j8)=>{"use strict";var gMe=V(),yMe=Pe(),_Me=Lf(),xMe=wt(),nA=Ct(),bMe=dr().f,N8=nl(),wMe=H0(),aA=Nx(),SMe=il(),qMe=js(),B8=!1,Us=SMe("meta"),IMe=0,oA=function(e){bMe(e,Us,{value:{objectID:"O"+IMe++,weakData:{}}})},EMe=function(e,t){if(!xMe(e))return typeof e=="symbol"?e:(typeof e=="string"?"S":"P")+e;if(!nA(e,Us)){if(!aA(e))return"F";if(!t)return"E";oA(e)}return e[Us].objectID},TMe=function(e,t){if(!nA(e,Us)){if(!aA(e))return!0;if(!t)return!1;oA(e)}return e[Us].weakData},AMe=function(e){return qMe&&B8&&aA(e)&&!nA(e,Us)&&oA(e),e},PMe=function(){CMe.enable=function(){},B8=!0;var e=N8.f,t=yMe([].splice),n={};n[Us]=1,e(n).length&&(N8.f=function(u){for(var l=e(u),o=0,_=l.length;o<_;o++)if(l[o]===Us){t(l,o,1);break}return l},gMe({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:wMe.f}))},CMe=j8.exports={enable:PMe,fastKey:EMe,getWeakData:TMe,onFreeze:AMe};_Me[Us]=!0});var Lv=S((fxt,$8)=>{"use strict";var MMe=V(),OMe=$e(),RMe=Pe(),U8=Ff(),kMe=tr(),DMe=_l(),LMe=Mr(),zMe=rn(),FMe=Tt(),NMe=Jr(),sA=wt(),uA=Oe(),BMe=wv(),jMe=vn(),UMe=sl();$8.exports=function(e,t,n){var u=e.indexOf("Map")!==-1,l=e.indexOf("Weak")!==-1,o=u?"set":"add",_=OMe[e],b=_&&_.prototype,E=_,T={},C=function(K){var re=RMe(b[K]);kMe(b,K,K==="add"?function(be){return re(this,be===0?0:be),this}:K==="delete"?function(ge){return l&&!sA(ge)?!1:re(this,ge===0?0:ge)}:K==="get"?function(be){return l&&!sA(be)?void 0:re(this,be===0?0:be)}:K==="has"?function(be){return l&&!sA(be)?!1:re(this,be===0?0:be)}:function(be,et){return re(this,be===0?0:be,et),this})},z=U8(e,!FMe(_)||!(l||b.forEach&&!uA(function(){new _().entries().next()})));if(z)E=n.getConstructor(t,e,u,o),DMe.enable();else if(U8(e,!0)){var $=new E,oe=$[o](l?{}:-0,1)!==$,xe=uA(function(){$.has(1)}),_e=BMe(function(K){new _(K)}),X=!l&&uA(function(){for(var K=new _,re=5;re--;)K[o](re,re);return!K.has(-0)});_e||(E=t(function(K,re){zMe(K,b);var ge=UMe(new _,K,E);return NMe(re)||LMe(re,ge[o],{that:ge,AS_ENTRIES:u}),ge}),E.prototype=b,b.constructor=E),(xe||X)&&(C("delete"),C("has"),u&&C("get")),(X||oe)&&C(o),l&&b.clear&&delete b.clear}return T[e]=E,MMe({global:!0,constructor:!0,forced:E!==_},T),jMe(E,e),l||n.setStrong(E,e,u),E}});var cA=S((dxt,K8)=>{"use strict";var V8=jr(),$Me=yr(),G8=za(),VMe=or(),GMe=rn(),HMe=Jr(),WMe=Mr(),ZMe=px(),Bx=xi(),KMe=fl(),zv=ht(),H8=_l().fastKey,Z8=Yt(),W8=Z8.set,lA=Z8.getterFor;K8.exports={getConstructor:function(e,t,n,u){var l=e(function(T,C){GMe(T,o),W8(T,{type:t,index:V8(null),first:null,last:null,size:0}),zv||(T.size=0),HMe(C)||WMe(C,T[u],{that:T,AS_ENTRIES:n})}),o=l.prototype,_=lA(t),b=function(T,C,z){var $=_(T),oe=E(T,C),xe,_e;return oe?oe.value=z:($.last=oe={index:_e=H8(C,!0),key:C,value:z,previous:xe=$.last,next:null,removed:!1},$.first||($.first=oe),xe&&(xe.next=oe),zv?$.size++:T.size++,_e!=="F"&&($.index[_e]=oe)),T},E=function(T,C){var z=_(T),$=H8(C),oe;if($!=="F")return z.index[$];for(oe=z.first;oe;oe=oe.next)if(oe.key===C)return oe};return G8(o,{clear:function(){for(var C=this,z=_(C),$=z.first;$;)$.removed=!0,$.previous&&($.previous=$.previous.next=null),$=$.next;z.first=z.last=null,z.index=V8(null),zv?z.size=0:C.size=0},delete:function(T){var C=this,z=_(C),$=E(C,T);if($){var oe=$.next,xe=$.previous;delete z.index[$.index],$.removed=!0,xe&&(xe.next=oe),oe&&(oe.previous=xe),z.first===$&&(z.first=oe),z.last===$&&(z.last=xe),zv?z.size--:C.size--}return!!$},forEach:function(C){for(var z=_(this),$=VMe(C,arguments.length>1?arguments[1]:void 0),oe;oe=oe?oe.next:z.first;)for($(oe.value,oe.key,this);oe&&oe.removed;)oe=oe.previous},has:function(C){return!!E(this,C)}}),G8(o,n?{get:function(C){var z=E(this,C);return z&&z.value},set:function(C,z){return b(this,C===0?0:C,z)}}:{add:function(C){return b(this,C=C===0?0:C,C)}}),zv&&$Me(o,"size",{configurable:!0,get:function(){return _(this).size}}),l},setStrong:function(e,t,n){var u=t+" Iterator",l=lA(t),o=lA(u);ZMe(e,t,function(_,b){W8(this,{type:u,target:_,state:l(_),kind:b,last:null})},function(){for(var _=o(this),b=_.kind,E=_.last;E&&E.removed;)E=E.previous;return!_.target||!(_.last=E=E?E.next:_.state.first)?(_.target=null,Bx(void 0,!0)):Bx(b==="keys"?E.key:b==="values"?E.value:[E.key,E.value],!1)},n?"entries":"values",!n,!0),KMe(t)}}});var X8=S(()=>{"use strict";var XMe=Lv(),YMe=cA();XMe("Map",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},YMe)});var jx=S(()=>{"use strict";X8()});var si=S((yxt,Y8)=>{"use strict";var Ux=Pe(),Fv=Map.prototype;Y8.exports={Map,set:Ux(Fv.set),get:Ux(Fv.get),has:Ux(Fv.has),remove:Ux(Fv.delete),proto:Fv}});var hA=S(()=>{"use strict";var JMe=V(),QMe=Pe(),eOe=_t(),tOe=mr(),rOe=Mr(),$x=si(),J8=Rt(),iOe=Oe(),Q8=$x.Map,nOe=$x.has,aOe=$x.get,oOe=$x.set,sOe=QMe([].push),uOe=J8||iOe(function(){return Q8.groupBy("ab",function(e){return e}).get("a").length!==1});JMe({target:"Map",stat:!0,forced:J8||uOe},{groupBy:function(t,n){tOe(t),eOe(n);var u=new Q8,l=0;return rOe(t,function(o){var _=n(o,l++);nOe(u,_)?sOe(aOe(u,_),o):oOe(u,_,[o])}),u}})});var fA=S((bxt,eG)=>{"use strict";var lOe=Math.log;eG.exports=Math.log1p||function(t){var n=+t;return n>-1e-8&&n<1e-8?n-n*n/2:lOe(1+n)}});var rG=S(()=>{"use strict";var cOe=V(),hOe=fA(),dA=Math.acosh,fOe=Math.log,tG=Math.sqrt,dOe=Math.LN2,pOe=!dA||Math.floor(dA(Number.MAX_VALUE))!==710||dA(1/0)!==1/0;cOe({target:"Math",stat:!0,forced:pOe},{acosh:function(t){var n=+t;return n<1?NaN:n>94906265.62425156?fOe(n)+dOe:hOe(n-1+tG(n-1)*tG(n+1))}})});var aG=S(()=>{"use strict";var mOe=V(),iG=Math.asinh,vOe=Math.log,gOe=Math.sqrt;function nG(e){var t=+e;return!isFinite(t)||t===0?t:t<0?-nG(-t):vOe(t+gOe(t*t+1))}var yOe=!(iG&&1/iG(0)>0);mOe({target:"Math",stat:!0,forced:yOe},{asinh:nG})});var sG=S(()=>{"use strict";var _Oe=V(),oG=Math.atanh,xOe=Math.log,bOe=!(oG&&1/oG(-0)<0);_Oe({target:"Math",stat:!0,forced:bOe},{atanh:function(t){var n=+t;return n===0?n:xOe((1+n)/(1-n))/2}})});var uG=S(()=>{"use strict";var wOe=V(),SOe=bx(),qOe=Math.abs,IOe=Math.pow;wOe({target:"Math",stat:!0},{cbrt:function(t){var n=+t;return SOe(n)*IOe(qOe(n),1/3)}})});var lG=S(()=>{"use strict";var EOe=V(),TOe=Math.floor,AOe=Math.log,POe=Math.LOG2E;EOe({target:"Math",stat:!0},{clz32:function(t){var n=t>>>0;return n?31-TOe(AOe(n+.5)*POe):32}})});var Bv=S((Oxt,cG)=>{"use strict";var Nv=Math.expm1,COe=Math.exp;cG.exports=!Nv||Nv(10)>22025.465794806718||Nv(10)<22025.465794806718||Nv(-2e-17)!==-2e-17?function(t){var n=+t;return n===0?n:n>-1e-6&&n<1e-6?n+n*n/2:COe(n)-1}:Nv});var fG=S(()=>{"use strict";var MOe=V(),OOe=Bv(),hG=Math.cosh,ROe=Math.abs,pA=Math.E,kOe=!hG||hG(710)===1/0;MOe({target:"Math",stat:!0,forced:kOe},{cosh:function(t){var n=OOe(ROe(t)-1)+1;return(n+1/(n*pA*pA))*(pA/2)}})});var pG=S(()=>{"use strict";var DOe=V(),dG=Bv();DOe({target:"Math",stat:!0,forced:dG!==Math.expm1},{expm1:dG})});var mG=S(()=>{"use strict";var LOe=V(),zOe=wx();LOe({target:"Math",stat:!0},{fround:zOe})});var gG=S(()=>{"use strict";var FOe=V(),vG=Math.hypot,NOe=Math.abs,BOe=Math.sqrt,jOe=!!vG&&vG(1/0,NaN)!==1/0;FOe({target:"Math",stat:!0,arity:2,forced:jOe},{hypot:function(t,n){for(var u=0,l=0,o=arguments.length,_=0,b,E;l<o;)b=NOe(arguments[l++]),_<b?(E=_/b,u=u*E*E+1,_=b):b>0?(E=b/_,u+=E*E):u+=b;return _===1/0?1/0:_*BOe(u)}})});var _G=S(()=>{"use strict";var UOe=V(),$Oe=Oe(),yG=Math.imul,VOe=$Oe(function(){return yG(4294967295,5)!==-5||yG.length!==2});UOe({target:"Math",stat:!0,forced:VOe},{imul:function(t,n){var u=65535,l=+t,o=+n,_=u&l,b=u&o;return 0|_*b+((u&l>>>16)*b+_*(u&o>>>16)<<16>>>0)}})});var mA=S(($xt,xG)=>{"use strict";var GOe=Math.log,HOe=Math.LOG10E;xG.exports=Math.log10||function(t){return GOe(t)*HOe}});var bG=S(()=>{"use strict";var WOe=V(),ZOe=mA();WOe({target:"Math",stat:!0},{log10:ZOe})});var wG=S(()=>{"use strict";var KOe=V(),XOe=fA();KOe({target:"Math",stat:!0},{log1p:XOe})});var SG=S(()=>{"use strict";var YOe=V(),JOe=Math.log,QOe=Math.LN2;YOe({target:"Math",stat:!0},{log2:function(t){return JOe(t)/QOe}})});var qG=S(()=>{"use strict";var eRe=V(),tRe=bx();eRe({target:"Math",stat:!0},{sign:tRe})});var TG=S(()=>{"use strict";var rRe=V(),iRe=Oe(),IG=Bv(),nRe=Math.abs,EG=Math.exp,aRe=Math.E,oRe=iRe(function(){return Math.sinh(-2e-17)!==-2e-17});rRe({target:"Math",stat:!0,forced:oRe},{sinh:function(t){var n=+t;return nRe(n)<1?(IG(n)-IG(-n))/2:(EG(n-1)-EG(-n-1))*(aRe/2)}})});var CG=S(()=>{"use strict";var sRe=V(),AG=Bv(),PG=Math.exp;sRe({target:"Math",stat:!0},{tanh:function(t){var n=+t,u=AG(n),l=AG(-n);return u===1/0?1:l===1/0?-1:(u-l)/(PG(n)+PG(-n))}})});var MG=S(()=>{"use strict";var uRe=vn();uRe(Math,"Math",!0)});var OG=S(()=>{"use strict";var lRe=V(),cRe=SE();lRe({target:"Math",stat:!0},{trunc:cRe})});var jv=S((o1t,RG)=>{"use strict";var hRe=Pe();RG.exports=hRe(1 .valueOf)});var Bc=S((s1t,kG)=>{"use strict";kG.exports=`	
\v\f\r \xA0\u1680\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF`});var jc=S((u1t,LG)=>{"use strict";var fRe=Pe(),dRe=mr(),pRe=qt(),gA=Bc(),DG=fRe("".replace),mRe=RegExp("^["+gA+"]+"),vRe=RegExp("(^|[^"+gA+"])["+gA+"]+$"),vA=function(e){return function(t){var n=pRe(dRe(t));return e&1&&(n=DG(n,mRe,"")),e&2&&(n=DG(n,vRe,"$1")),n}};LG.exports={start:vA(1),end:vA(2),trim:vA(3)}});var $G=S(()=>{"use strict";var gRe=V(),yA=Rt(),yRe=ht(),NG=$e(),_A=W0(),BG=Pe(),_Re=Ff(),zG=Ct(),xRe=sl(),bRe=Ri(),wRe=Ps(),jG=nv(),SRe=Oe(),qRe=nl().f,IRe=yi().f,ERe=dr().f,TRe=jv(),ARe=jc().trim,Uv="Number",Qf=NG[Uv],FG=_A[Uv],xA=Qf.prototype,PRe=NG.TypeError,CRe=BG("".slice),Vx=BG("".charCodeAt),MRe=function(e){var t=jG(e,"number");return typeof t=="bigint"?t:ORe(t)},ORe=function(e){var t=jG(e,"number"),n,u,l,o,_,b,E,T;if(wRe(t))throw new PRe("Cannot convert a Symbol value to a number");if(typeof t=="string"&&t.length>2){if(t=ARe(t),n=Vx(t,0),n===43||n===45){if(u=Vx(t,2),u===88||u===120)return NaN}else if(n===48){switch(Vx(t,1)){case 66:case 98:l=2,o=49;break;case 79:case 111:l=8,o=55;break;default:return+t;}for(_=CRe(t,2),b=_.length,E=0;E<b;E++)if(T=Vx(_,E),T<48||T>o)return NaN;return parseInt(_,l)}}return+t},bA=_Re(Uv,!Qf(" 0o1")||!Qf("0b1")||Qf("+0x1")),RRe=function(e){return bRe(xA,e)&&SRe(function(){TRe(e)})},Gx=function(t){var n=arguments.length<1?0:Qf(MRe(t));return RRe(this)?xRe(Object(n),this,Gx):n};Gx.prototype=xA;bA&&!yA&&(xA.constructor=Gx);gRe({global:!0,constructor:!0,wrap:!0,forced:bA},{Number:Gx});var UG=function(e,t){for(var n=yRe?qRe(t):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),u=0,l;n.length>u;u++)zG(t,l=n[u])&&!zG(e,l)&&ERe(e,l,IRe(t,l))};yA&&FG&&UG(_A[Uv],FG);(bA||yA)&&UG(_A[Uv],Qf)});var VG=S(()=>{"use strict";var kRe=V();kRe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{EPSILON:Math.pow(2,-52)})});var wA=S((d1t,GG)=>{"use strict";var DRe=$e(),LRe=DRe.isFinite;GG.exports=Number.isFinite||function(t){return typeof t=="number"&&LRe(t)}});var HG=S(()=>{"use strict";var zRe=V(),FRe=wA();zRe({target:"Number",stat:!0},{isFinite:FRe})});var Hx=S((v1t,WG)=>{"use strict";var NRe=wt(),BRe=Math.floor;WG.exports=Number.isInteger||function(t){return!NRe(t)&&isFinite(t)&&BRe(t)===t}});var ZG=S(()=>{"use strict";var jRe=V(),URe=Hx();jRe({target:"Number",stat:!0},{isInteger:URe})});var KG=S(()=>{"use strict";var $Re=V();$Re({target:"Number",stat:!0},{isNaN:function(t){return t!==t}})});var XG=S(()=>{"use strict";var VRe=V(),GRe=Hx(),HRe=Math.abs;VRe({target:"Number",stat:!0},{isSafeInteger:function(t){return GRe(t)&&HRe(t)<=9007199254740991}})});var YG=S(()=>{"use strict";var WRe=V();WRe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MAX_SAFE_INTEGER:9007199254740991})});var JG=S(()=>{"use strict";var ZRe=V();ZRe({target:"Number",stat:!0,nonConfigurable:!0,nonWritable:!0},{MIN_SAFE_INTEGER:-9007199254740991})});var SA=S((T1t,rH)=>{"use strict";var tH=$e(),KRe=Oe(),XRe=Pe(),YRe=qt(),JRe=jc().trim,QRe=Bc(),eke=XRe("".charAt),Wx=tH.parseFloat,QG=tH.Symbol,eH=QG&&QG.iterator,tke=1/Wx(QRe+"-0")!==-1/0||eH&&!KRe(function(){Wx(Object(eH))});rH.exports=tke?function(t){var n=JRe(YRe(t)),u=Wx(n);return u===0&&eke(n,0)==="-"?-0:u}:Wx});var nH=S(()=>{"use strict";var rke=V(),iH=SA();rke({target:"Number",stat:!0,forced:Number.parseFloat!==iH},{parseFloat:iH})});var qA=S((C1t,cH)=>{"use strict";var uH=$e(),ike=Oe(),nke=Pe(),ake=qt(),oke=jc().trim,aH=Bc(),$v=uH.parseInt,oH=uH.Symbol,sH=oH&&oH.iterator,lH=/^[+-]?0x/i,ske=nke(lH.exec),uke=$v(aH+"08")!==8||$v(aH+"0x16")!==22||sH&&!ike(function(){$v(Object(sH))});cH.exports=uke?function(t,n){var u=oke(ake(t));return $v(u,n>>>0||(ske(lH,u)?16:10))}:$v});var fH=S(()=>{"use strict";var lke=V(),hH=qA();lke({target:"Number",stat:!0,forced:Number.parseInt!==hH},{parseInt:hH})});var gH=S(()=>{"use strict";var cke=V(),EA=Pe(),hke=gr(),fke=jv(),dke=Ov(),pke=mA(),IA=Oe(),mke=RangeError,dH=String,vke=isFinite,gke=Math.abs,yke=Math.floor,pH=Math.pow,_ke=Math.round,Ho=EA(1 .toExponential),xke=EA(dke),mH=EA("".slice),vH=Ho(-69e-12,4)==="-6.9000e-11"&&Ho(1.255,2)==="1.25e+0"&&Ho(12345,3)==="1.235e+4"&&Ho(25,0)==="3e+1",bke=function(){return IA(function(){Ho(1,1/0)})&&IA(function(){Ho(1,-1/0)})},wke=function(){return!IA(function(){Ho(1/0,1/0),Ho(NaN,1/0)})},Ske=!vH||!bke()||!wke();cke({target:"Number",proto:!0,forced:Ske},{toExponential:function(t){var n=fke(this);if(t===void 0)return Ho(n);var u=hke(t);if(!vke(n))return String(n);if(u<0||u>20)throw new mke("Incorrect fraction digits");if(vH)return Ho(n,u);var l="",o,_,b,E;if(n<0&&(l="-",n=-n),n===0)_=0,o=xke("0",u+1);else{var T=pke(n);_=yke(T);var C=pH(10,_-u),z=_ke(n/C);2*n>=(2*z+1)*C&&(z+=1),z>=pH(10,u+1)&&(z/=10,_+=1),o=dH(z)}return u!==0&&(o=mH(o,0,1)+"."+mH(o,1)),_===0?(b="+",E="0"):(b=_>0?"+":"-",E=dH(gke(_))),o+="e"+b+E,l+o}})});var SH=S(()=>{"use strict";var qke=V(),PA=Pe(),Ike=gr(),Eke=jv(),Tke=Ov(),yH=Oe(),Ake=RangeError,bH=String,wH=Math.floor,AA=PA(Tke),_H=PA("".slice),Vv=PA(1 .toFixed),td=function(e,t,n){return t===0?n:t%2===1?td(e,t-1,n*e):td(e*e,t/2,n)},Pke=function(e){for(var t=0,n=e;n>=4096;)t+=12,n/=4096;for(;n>=2;)t+=1,n/=2;return t},ed=function(e,t,n){for(var u=-1,l=n;++u<6;)l+=t*e[u],e[u]=l%1e7,l=wH(l/1e7)},TA=function(e,t){for(var n=6,u=0;--n>=0;)u+=e[n],e[n]=wH(u/t),u=u%t*1e7},xH=function(e){for(var t=6,n="";--t>=0;)if(n!==""||t===0||e[t]!==0){var u=bH(e[t]);n=n===""?u:n+AA("0",7-u.length)+u}return n},Cke=yH(function(){return Vv(8e-5,3)!=="0.000"||Vv(.9,0)!=="1"||Vv(1.255,2)!=="1.25"||Vv(0xde0b6b3a7640080,0)!=="1000000000000000128"})||!yH(function(){Vv({})});qke({target:"Number",proto:!0,forced:Cke},{toFixed:function(t){var n=Eke(this),u=Ike(t),l=[0,0,0,0,0,0],o="",_="0",b,E,T,C;if(u<0||u>20)throw new Ake("Incorrect fraction digits");if(n!==n)return"NaN";if(n<=-1e21||n>=1e21)return bH(n);if(n<0&&(o="-",n=-n),n>1e-21)if(b=Pke(n*td(2,69,1))-69,E=b<0?n*td(2,-b,1):n/td(2,b,1),E*=4503599627370496,b=52-b,b>0){for(ed(l,0,E),T=u;T>=7;)ed(l,1e7,0),T-=7;for(ed(l,td(10,T,1),0),T=b-1;T>=23;)TA(l,1<<23),T-=23;TA(l,1<<T),ed(l,1,1),TA(l,2),_=xH(l)}else ed(l,0,E),ed(l,1<<-b,0),_=xH(l)+AA("0",u);return u>0?(C=_.length,_=o+(C<=u?"0."+AA("0",u-C)+_:_H(_,0,C-u)+"."+_H(_,C-u))):_=o+_,_}})});var EH=S(()=>{"use strict";var Mke=V(),Oke=Pe(),qH=Oe(),IH=jv(),Zx=Oke(1 .toPrecision),Rke=qH(function(){return Zx(1,void 0)!=="1"})||!qH(function(){Zx({})});Mke({target:"Number",proto:!0,forced:Rke},{toPrecision:function(t){return t===void 0?Zx(IH(this)):Zx(IH(this),t)}})});var MA=S((N1t,PH)=>{"use strict";var TH=ht(),kke=Pe(),Dke=Ze(),Lke=Oe(),CA=Pc(),zke=cv(),Fke=rv(),Nke=kt(),Bke=As(),rd=Object.assign,AH=Object.defineProperty,jke=kke([].concat);PH.exports=!rd||Lke(function(){if(TH&&rd({b:1},rd(AH({},"a",{enumerable:!0,get:function(){AH(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var e={},t={},n=Symbol("assign detection"),u="abcdefghijklmnopqrst";return e[n]=7,u.split("").forEach(function(l){t[l]=l}),rd({},e)[n]!==7||CA(rd({},t)).join("")!==u})?function(t,n){for(var u=Nke(t),l=arguments.length,o=1,_=zke.f,b=Fke.f;l>o;)for(var E=Bke(arguments[o++]),T=_?jke(CA(E),_(E)):CA(E),C=T.length,z=0,$;C>z;)$=T[z++],(!TH||Dke(b,E,$))&&(u[$]=E[$]);return u}:rd});var MH=S(()=>{"use strict";var Uke=V(),CH=MA();Uke({target:"Object",stat:!0,arity:2,forced:Object.assign!==CH},{assign:CH})});var OH=S(()=>{"use strict";var $ke=V(),Vke=ht(),Gke=jr();$ke({target:"Object",stat:!0,sham:!Vke},{create:Gke})});var Gv=S((V1t,kH)=>{"use strict";var Hke=Rt(),Wke=$e(),Zke=Oe(),RH=_x();kH.exports=Hke||!Zke(function(){if(!(RH&&RH<535)){var e=Math.random();__defineSetter__.call(null,e,function(){}),delete Wke[e]}})});var DH=S(()=>{"use strict";var Kke=V(),Xke=ht(),Yke=Gv(),Jke=_t(),Qke=kt(),eDe=dr();Xke&&Kke({target:"Object",proto:!0,forced:Yke},{__defineGetter__:function(t,n){eDe.f(Qke(this),t,{get:Jke(n),enumerable:!0,configurable:!0})}})});var zH=S(()=>{"use strict";var tDe=V(),rDe=ht(),LH=$0().f;tDe({target:"Object",stat:!0,forced:Object.defineProperties!==LH,sham:!rDe},{defineProperties:LH})});var NH=S(()=>{"use strict";var iDe=V(),nDe=ht(),FH=dr().f;iDe({target:"Object",stat:!0,forced:Object.defineProperty!==FH,sham:!nDe},{defineProperty:FH})});var BH=S(()=>{"use strict";var aDe=V(),oDe=ht(),sDe=Gv(),uDe=_t(),lDe=kt(),cDe=dr();oDe&&aDe({target:"Object",proto:!0,forced:sDe},{__defineSetter__:function(t,n){cDe.f(lDe(this),t,{set:uDe(n),enumerable:!0,configurable:!0})}})});var OA=S((Q1t,GH)=>{"use strict";var UH=ht(),hDe=Oe(),$H=Pe(),fDe=ti(),dDe=Pc(),pDe=Qr(),mDe=rv().f,VH=$H(mDe),vDe=$H([].push),gDe=UH&&hDe(function(){var e=Object.create(null);return e[2]=2,!VH(e,2)}),jH=function(e){return function(t){for(var n=pDe(t),u=dDe(n),l=gDe&&fDe(n)===null,o=u.length,_=0,b=[],E;o>_;)E=u[_++],(!UH||(l?E in n:VH(n,E)))&&vDe(b,e?[E,n[E]]:n[E]);return b}};GH.exports={entries:jH(!0),values:jH(!1)}});var HH=S(()=>{"use strict";var yDe=V(),_De=OA().entries;yDe({target:"Object",stat:!0},{entries:function(t){return _De(t)}})});var WH=S(()=>{"use strict";var xDe=V(),bDe=js(),wDe=Oe(),SDe=wt(),qDe=_l().onFreeze,RA=Object.freeze,IDe=wDe(function(){RA(1)});xDe({target:"Object",stat:!0,forced:IDe,sham:!bDe},{freeze:function(t){return RA&&SDe(t)?RA(qDe(t)):t}})});var ZH=S(()=>{"use strict";var EDe=V(),TDe=Mr(),ADe=Da();EDe({target:"Object",stat:!0},{fromEntries:function(t){var n={};return TDe(t,function(u,l){ADe(n,u,l)},{AS_ENTRIES:!0}),n}})});var YH=S(()=>{"use strict";var PDe=V(),CDe=Oe(),MDe=Qr(),KH=yi().f,XH=ht(),ODe=!XH||CDe(function(){KH(1)});PDe({target:"Object",stat:!0,forced:ODe,sham:!XH},{getOwnPropertyDescriptor:function(t,n){return KH(MDe(t),n)}})});var JH=S(()=>{"use strict";var RDe=V(),kDe=ht(),DDe=N0(),LDe=Qr(),zDe=yi(),FDe=Da();RDe({target:"Object",stat:!0,sham:!kDe},{getOwnPropertyDescriptors:function(t){for(var n=LDe(t),u=zDe.f,l=DDe(n),o={},_=0,b,E;l.length>_;)E=u(n,b=l[_++]),E!==void 0&&FDe(o,b,E);return o}})});var QH=S(()=>{"use strict";var NDe=V(),BDe=Oe(),jDe=H0().f,UDe=BDe(function(){return!Object.getOwnPropertyNames(1)});NDe({target:"Object",stat:!0,forced:UDe},{getOwnPropertyNames:jDe})});var t9=S(()=>{"use strict";var $De=V(),VDe=Oe(),GDe=kt(),e9=ti(),HDe=ax(),WDe=VDe(function(){e9(1)});$De({target:"Object",stat:!0,forced:WDe,sham:!HDe},{getPrototypeOf:function(t){return e9(GDe(t))}})});var kA=S(()=>{"use strict";var ZDe=V(),KDe=xt(),XDe=Pe(),YDe=_t(),JDe=mr(),QDe=Bo(),eLe=Mr(),tLe=Oe(),r9=Object.groupBy,rLe=KDe("Object","create"),iLe=XDe([].push),nLe=!r9||tLe(function(){return r9("ab",function(e){return e}).a.length!==1});ZDe({target:"Object",stat:!0,forced:nLe},{groupBy:function(t,n){JDe(t),YDe(n);var u=rLe(null),l=0;return eLe(t,function(o){var _=QDe(n(o,l++));_ in u?iLe(u[_],o):u[_]=[o]}),u}})});var DA=S(()=>{"use strict";var aLe=V(),oLe=Ct();aLe({target:"Object",stat:!0},{hasOwn:oLe})});var LA=S((ybt,i9)=>{"use strict";i9.exports=Object.is||function(t,n){return t===n?t!==0||1/t===1/n:t!==t&&n!==n}});var n9=S(()=>{"use strict";var sLe=V(),uLe=LA();sLe({target:"Object",stat:!0},{is:uLe})});var o9=S(()=>{"use strict";var lLe=V(),a9=Nx();lLe({target:"Object",stat:!0,forced:Object.isExtensible!==a9},{isExtensible:a9})});var u9=S(()=>{"use strict";var cLe=V(),hLe=Oe(),fLe=wt(),dLe=Oi(),s9=zx(),zA=Object.isFrozen,pLe=s9||hLe(function(){zA(1)});cLe({target:"Object",stat:!0,forced:pLe},{isFrozen:function(t){return!fLe(t)||s9&&dLe(t)==="ArrayBuffer"?!0:zA?zA(t):!1}})});var c9=S(()=>{"use strict";var mLe=V(),vLe=Oe(),gLe=wt(),yLe=Oi(),l9=zx(),FA=Object.isSealed,_Le=l9||vLe(function(){FA(1)});mLe({target:"Object",stat:!0,forced:_Le},{isSealed:function(t){return!gLe(t)||l9&&yLe(t)==="ArrayBuffer"?!0:FA?FA(t):!1}})});var f9=S(()=>{"use strict";var xLe=V(),bLe=kt(),h9=Pc(),wLe=Oe(),SLe=wLe(function(){h9(1)});xLe({target:"Object",stat:!0,forced:SLe},{keys:function(t){return h9(bLe(t))}})});var d9=S(()=>{"use strict";var qLe=V(),ILe=ht(),ELe=Gv(),TLe=kt(),ALe=Bo(),PLe=ti(),CLe=yi().f;ILe&&qLe({target:"Object",proto:!0,forced:ELe},{__lookupGetter__:function(t){var n=TLe(this),u=ALe(t),l;do if(l=CLe(n,u))return l.get;while(n=PLe(n))}})});var p9=S(()=>{"use strict";var MLe=V(),OLe=ht(),RLe=Gv(),kLe=kt(),DLe=Bo(),LLe=ti(),zLe=yi().f;OLe&&MLe({target:"Object",proto:!0,forced:RLe},{__lookupSetter__:function(t){var n=kLe(this),u=DLe(t),l;do if(l=zLe(n,u))return l.set;while(n=LLe(n))}})});var m9=S(()=>{"use strict";var FLe=V(),NLe=wt(),BLe=_l().onFreeze,jLe=js(),ULe=Oe(),NA=Object.preventExtensions,$Le=ULe(function(){NA(1)});FLe({target:"Object",stat:!0,forced:$Le,sham:!jLe},{preventExtensions:function(t){return NA&&NLe(t)?NA(BLe(t)):t}})});var x9=S(()=>{"use strict";var VLe=ht(),GLe=yr(),HLe=wt(),WLe=XE(),ZLe=kt(),KLe=mr(),v9=Object.getPrototypeOf,g9=Object.setPrototypeOf,y9=Object.prototype,_9="__proto__";if(VLe&&v9&&g9&&!(_9 in y9))try{GLe(y9,_9,{configurable:!0,get:function(){return v9(ZLe(this))},set:function(t){var n=KLe(this);WLe(t)&&HLe(n)&&g9(n,t)}})}catch(e){}});var b9=S(()=>{"use strict";var XLe=V(),YLe=wt(),JLe=_l().onFreeze,QLe=js(),eze=Oe(),BA=Object.seal,tze=eze(function(){BA(1)});XLe({target:"Object",stat:!0,forced:tze,sham:!QLe},{seal:function(t){return BA&&YLe(t)?BA(JLe(t)):t}})});var w9=S(()=>{"use strict";var rze=V(),ize=ka();rze({target:"Object",stat:!0},{setPrototypeOf:ize})});var q9=S((jbt,S9)=>{"use strict";var nze=j0(),aze=Ln();S9.exports=nze?{}.toString:function(){return"[object "+aze(this)+"]"}});var I9=S(()=>{"use strict";var oze=j0(),sze=tr(),uze=q9();oze||sze(Object.prototype,"toString",uze,{unsafe:!0})});var E9=S(()=>{"use strict";var lze=V(),cze=OA().values;lze({target:"Object",stat:!0},{values:function(t){return cze(t)}})});var A9=S(()=>{"use strict";var hze=V(),T9=SA();hze({global:!0,forced:parseFloat!==T9},{parseFloat:T9})});var C9=S(()=>{"use strict";var fze=V(),P9=qA();fze({global:!0,forced:parseInt!==P9},{parseInt:P9})});var Hv=S((Xbt,M9)=>{"use strict";var dze=ho(),pze=rl(),mze=TypeError;M9.exports=function(e){if(dze(e))return e;throw new mze(pze(e)+" is not a constructor")}});var Wv=S((Ybt,R9)=>{"use strict";var O9=He(),vze=Hv(),gze=Jr(),yze=pt(),_ze=yze("species");R9.exports=function(e,t){var n=O9(e).constructor,u;return n===void 0||gze(u=O9(n)[_ze])?t:vze(u)}});var ca=S((Jbt,k9)=>{"use strict";var xze=TypeError;k9.exports=function(e,t){if(e<t)throw new xze("Not enough arguments");return e}});var jA=S((Qbt,D9)=>{"use strict";var bze=oo();D9.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(bze)});var Xv=S((ewt,V9)=>{"use strict";var ha=$e(),wze=tn(),Sze=or(),L9=Tt(),qze=Ct(),$9=Oe(),z9=EE(),Ize=zn(),F9=av(),Eze=ca(),Tze=jA(),Aze=zc(),WA=ha.setImmediate,ZA=ha.clearImmediate,Pze=ha.process,UA=ha.Dispatch,Cze=ha.Function,N9=ha.MessageChannel,Mze=ha.String,$A=0,Zv={},B9="onreadystatechange",Kv,Uc,VA,GA;$9(function(){Kv=ha.location});var KA=function(e){if(qze(Zv,e)){var t=Zv[e];delete Zv[e],t()}},HA=function(e){return function(){KA(e)}},j9=function(e){KA(e.data)},U9=function(e){ha.postMessage(Mze(e),Kv.protocol+"//"+Kv.host)};(!WA||!ZA)&&(WA=function(t){Eze(arguments.length,1);var n=L9(t)?t:Cze(t),u=Ize(arguments,1);return Zv[++$A]=function(){wze(n,void 0,u)},Uc($A),$A},ZA=function(t){delete Zv[t]},Aze?Uc=function(e){Pze.nextTick(HA(e))}:UA&&UA.now?Uc=function(e){UA.now(HA(e))}:N9&&!Tze?(VA=new N9,GA=VA.port2,VA.port1.onmessage=j9,Uc=Sze(GA.postMessage,GA)):ha.addEventListener&&L9(ha.postMessage)&&!ha.importScripts&&Kv&&Kv.protocol!=="file:"&&!$9(U9)?(Uc=U9,ha.addEventListener("message",j9,!1)):B9 in F9("script")?Uc=function(e){z9.appendChild(F9("script"))[B9]=function(){z9.removeChild(this),KA(e)}}:Uc=function(e){setTimeout(HA(e),0)});V9.exports={set:WA,clear:ZA}});var XA=S((twt,H9)=>{"use strict";var G9=$e(),Oze=ht(),Rze=Object.getOwnPropertyDescriptor;H9.exports=function(e){if(!Oze)return G9[e];var t=Rze(G9,e);return t&&t.value}});var YA=S((rwt,Z9)=>{"use strict";var W9=function(){this.head=null,this.tail=null};W9.prototype={add:function(e){var t={item:e,next:null},n=this.tail;n?n.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};Z9.exports=W9});var X9=S((iwt,K9)=>{"use strict";var kze=oo();K9.exports=/ipad|iphone|ipod/i.test(kze)&&typeof Pebble!="undefined"});var J9=S((nwt,Y9)=>{"use strict";var Dze=oo();Y9.exports=/web0s(?!.*chrome)/i.test(Dze)});var iP=S((awt,nW)=>{"use strict";var nd=$e(),Lze=XA(),Q9=or(),JA=Xv().set,zze=YA(),Fze=jA(),Nze=X9(),Bze=J9(),QA=zc(),eW=nd.MutationObserver||nd.WebKitMutationObserver,tW=nd.document,rW=nd.process,Kx=nd.Promise,rP=Lze("queueMicrotask"),id,eP,tP,Xx,iW;rP||(Yv=new zze,Jv=function(){var e,t;for(QA&&(e=rW.domain)&&e.exit();t=Yv.get();)try{t()}catch(n){throw Yv.head&&id(),n}e&&e.enter()},!Fze&&!QA&&!Bze&&eW&&tW?(eP=!0,tP=tW.createTextNode(""),new eW(Jv).observe(tP,{characterData:!0}),id=function(){tP.data=eP=!eP}):!Nze&&Kx&&Kx.resolve?(Xx=Kx.resolve(void 0),Xx.constructor=Kx,iW=Q9(Xx.then,Xx),id=function(){iW(Jv)}):QA?id=function(){rW.nextTick(Jv)}:(JA=Q9(JA,nd),id=function(){JA(Jv)}),rP=function(e){Yv.head||id(),Yv.add(e)});var Yv,Jv;nW.exports=rP});var nP=S((owt,aW)=>{"use strict";aW.exports=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(n){}}});var xl=S((swt,oW)=>{"use strict";oW.exports=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}}});var $c=S((uwt,sW)=>{"use strict";var jze=$e();sW.exports=jze.Promise});var ad=S((lwt,hW)=>{"use strict";var Uze=$e(),Qv=$c(),$ze=Tt(),Vze=Ff(),Gze=ov(),Hze=pt(),uW=Av(),Wze=Rt(),aP=No(),lW=Qv&&Qv.prototype,Zze=Hze("species"),oP=!1,cW=$ze(Uze.PromiseRejectionEvent),Kze=Vze("Promise",function(){var e=Gze(Qv),t=e!==String(Qv);if(!t&&aP===66||Wze&&!(lW.catch&&lW.finally))return!0;if(!aP||aP<51||!/native code/.test(e)){var n=new Qv(function(o){o(1)}),u=function(o){o(function(){},function(){})},l=n.constructor={};if(l[Zze]=u,oP=n.then(function(){})instanceof u,!oP)return!0}return!t&&(uW==="BROWSER"||uW==="DENO")&&!cW});hW.exports={CONSTRUCTOR:Kze,REJECTION_EVENT:cW,SUBCLASSING:oP}});var Wo=S((cwt,dW)=>{"use strict";var fW=_t(),Xze=TypeError,Yze=function(e){var t,n;this.promise=new e(function(u,l){if(t!==void 0||n!==void 0)throw new Xze("Bad Promise constructor");t=u,n=l}),this.resolve=fW(t),this.reject=fW(n)};dW.exports.f=function(e){return new Yze(e)}});var OW=S(()=>{"use strict";var Jze=V(),Qze=Rt(),e1=zc(),bl=$e(),ld=Ze(),pW=tr(),mW=ka(),eFe=vn(),tFe=fl(),rFe=_t(),Qx=Tt(),iFe=wt(),nFe=rn(),aFe=Wv(),xW=Xv().set,hP=iP(),oFe=nP(),sFe=xl(),uFe=YA(),bW=Yt(),t1=$c(),fP=ad(),wW=Wo(),r1="Promise",SW=fP.CONSTRUCTOR,lFe=fP.REJECTION_EVENT,cFe=fP.SUBCLASSING,sP=bW.getterFor(r1),hFe=bW.set,od=t1&&t1.prototype,Vc=t1,Yx=od,qW=bl.TypeError,uP=bl.document,dP=bl.process,lP=wW.f,fFe=lP,dFe=!!(uP&&uP.createEvent&&bl.dispatchEvent),IW="unhandledrejection",pFe="rejectionhandled",vW=0,EW=1,mFe=2,pP=1,TW=2,Jx,gW,vFe,yW,AW=function(e){var t;return iFe(e)&&Qx(t=e.then)?t:!1},PW=function(e,t){var n=t.value,u=t.state===EW,l=u?e.ok:e.fail,o=e.resolve,_=e.reject,b=e.domain,E,T,C;try{l?(u||(t.rejection===TW&&yFe(t),t.rejection=pP),l===!0?E=n:(b&&b.enter(),E=l(n),b&&(b.exit(),C=!0)),E===e.promise?_(new qW("Promise-chain cycle")):(T=AW(E))?ld(T,E,o,_):o(E)):_(n)}catch(z){b&&!C&&b.exit(),_(z)}},CW=function(e,t){e.notified||(e.notified=!0,hP(function(){for(var n=e.reactions,u;u=n.get();)PW(u,e);e.notified=!1,t&&!e.rejection&&gFe(e)}))},MW=function(e,t,n){var u,l;dFe?(u=uP.createEvent("Event"),u.promise=t,u.reason=n,u.initEvent(e,!1,!0),bl.dispatchEvent(u)):u={promise:t,reason:n},!lFe&&(l=bl["on"+e])?l(u):e===IW&&oFe("Unhandled promise rejection",n)},gFe=function(e){ld(xW,bl,function(){var t=e.facade,n=e.value,u=_W(e),l;if(u&&(l=sFe(function(){e1?dP.emit("unhandledRejection",n,t):MW(IW,t,n)}),e.rejection=e1||_W(e)?TW:pP,l.error))throw l.value})},_W=function(e){return e.rejection!==pP&&!e.parent},yFe=function(e){ld(xW,bl,function(){var t=e.facade;e1?dP.emit("rejectionHandled",t):MW(pFe,t,e.value)})},sd=function(e,t,n){return function(u){e(t,u,n)}},ud=function(e,t,n){e.done||(e.done=!0,n&&(e=n),e.value=t,e.state=mFe,CW(e,!0))},cP=function(e,t,n){if(!e.done){e.done=!0,n&&(e=n);try{if(e.facade===t)throw new qW("Promise can't be resolved itself");var u=AW(t);u?hP(function(){var l={done:!1};try{ld(u,t,sd(cP,l,e),sd(ud,l,e))}catch(o){ud(l,o,e)}}):(e.value=t,e.state=EW,CW(e,!1))}catch(l){ud({done:!1},l,e)}}};if(SW&&(Vc=function(t){nFe(this,Yx),rFe(t),ld(Jx,this);var n=sP(this);try{t(sd(cP,n),sd(ud,n))}catch(u){ud(n,u)}},Yx=Vc.prototype,Jx=function(t){hFe(this,{type:r1,done:!1,notified:!1,parent:!1,reactions:new uFe,rejection:!1,state:vW,value:null})},Jx.prototype=pW(Yx,"then",function(t,n){var u=sP(this),l=lP(aFe(this,Vc));return u.parent=!0,l.ok=Qx(t)?t:!0,l.fail=Qx(n)&&n,l.domain=e1?dP.domain:void 0,u.state===vW?u.reactions.add(l):hP(function(){PW(l,u)}),l.promise}),gW=function(){var e=new Jx,t=sP(e);this.promise=e,this.resolve=sd(cP,t),this.reject=sd(ud,t)},wW.f=lP=function(e){return e===Vc||e===vFe?new gW(e):fFe(e)},!Qze&&Qx(t1)&&od!==Object.prototype)){yW=od.then,cFe||pW(od,"then",function(t,n){var u=this;return new Vc(function(l,o){ld(yW,u,l,o)}).then(t,n)},{unsafe:!0});try{delete od.constructor}catch(e){}mW&&mW(od,Yx)}Jze({global:!0,constructor:!0,wrap:!0,forced:SW},{Promise:Vc});eFe(Vc,r1,!1,!0);tFe(r1)});var eg=S((dwt,RW)=>{"use strict";var _Fe=$c(),xFe=wv(),bFe=ad().CONSTRUCTOR;RW.exports=bFe||!xFe(function(e){_Fe.all(e).then(void 0,function(){})})});var kW=S(()=>{"use strict";var wFe=V(),SFe=Ze(),qFe=_t(),IFe=Wo(),EFe=xl(),TFe=Mr(),AFe=eg();wFe({target:"Promise",stat:!0,forced:AFe},{all:function(t){var n=this,u=IFe.f(n),l=u.resolve,o=u.reject,_=EFe(function(){var b=qFe(n.resolve),E=[],T=0,C=1;TFe(t,function(z){var $=T++,oe=!1;C++,SFe(b,n,z).then(function(xe){oe||(oe=!0,E[$]=xe,--C||l(E))},o)}),--C||l(E)});return _.error&&o(_.value),u.promise}})});var LW=S(()=>{"use strict";var PFe=V(),CFe=Rt(),MFe=ad().CONSTRUCTOR,vP=$c(),OFe=xt(),RFe=Tt(),kFe=tr(),DW=vP&&vP.prototype;PFe({target:"Promise",proto:!0,forced:MFe,real:!0},{catch:function(e){return this.then(void 0,e)}});!CFe&&RFe(vP)&&(mP=OFe("Promise").prototype.catch,DW.catch!==mP&&kFe(DW,"catch",mP,{unsafe:!0}));var mP});var zW=S(()=>{"use strict";var DFe=V(),LFe=Ze(),zFe=_t(),FFe=Wo(),NFe=xl(),BFe=Mr(),jFe=eg();DFe({target:"Promise",stat:!0,forced:jFe},{race:function(t){var n=this,u=FFe.f(n),l=u.reject,o=NFe(function(){var _=zFe(n.resolve);BFe(t,function(b){LFe(_,n,b).then(u.resolve,l)})});return o.error&&l(o.value),u.promise}})});var FW=S(()=>{"use strict";var UFe=V(),$Fe=Wo(),VFe=ad().CONSTRUCTOR;UFe({target:"Promise",stat:!0,forced:VFe},{reject:function(t){var n=$Fe.f(this),u=n.reject;return u(t),n.promise}})});var gP=S((wwt,NW)=>{"use strict";var GFe=He(),HFe=wt(),WFe=Wo();NW.exports=function(e,t){if(GFe(e),HFe(t)&&t.constructor===e)return t;var n=WFe.f(e),u=n.resolve;return u(t),n.promise}});var UW=S(()=>{"use strict";var ZFe=V(),KFe=xt(),BW=Rt(),XFe=$c(),jW=ad().CONSTRUCTOR,YFe=gP(),JFe=KFe("Promise"),QFe=BW&&!jW;ZFe({target:"Promise",stat:!0,forced:BW||jW},{resolve:function(t){return YFe(QFe&&this===JFe?XFe:this,t)}})});var $W=S(()=>{"use strict";OW();kW();LW();zW();FW();UW()});var yP=S(()=>{"use strict";var eNe=V(),tNe=Ze(),rNe=_t(),iNe=Wo(),nNe=xl(),aNe=Mr(),oNe=eg();eNe({target:"Promise",stat:!0,forced:oNe},{allSettled:function(t){var n=this,u=iNe.f(n),l=u.resolve,o=u.reject,_=nNe(function(){var b=rNe(n.resolve),E=[],T=0,C=1;aNe(t,function(z){var $=T++,oe=!1;C++,tNe(b,n,z).then(function(xe){oe||(oe=!0,E[$]={status:"fulfilled",value:xe},--C||l(E))},function(xe){oe||(oe=!0,E[$]={status:"rejected",reason:xe},--C||l(E))})}),--C||l(E)});return _.error&&o(_.value),u.promise}})});var _P=S(()=>{"use strict";var sNe=V(),uNe=Ze(),lNe=_t(),cNe=xt(),hNe=Wo(),fNe=xl(),dNe=Mr(),pNe=eg(),VW="No one promise resolved";sNe({target:"Promise",stat:!0,forced:pNe},{any:function(t){var n=this,u=cNe("AggregateError"),l=hNe.f(n),o=l.resolve,_=l.reject,b=fNe(function(){var E=lNe(n.resolve),T=[],C=0,z=1,$=!1;dNe(t,function(oe){var xe=C++,_e=!1;z++,uNe(E,n,oe).then(function(X){_e||$||($=!0,o(X))},function(X){_e||$||(_e=!0,T[xe]=X,--z||_(new u(T,VW)))})}),--z||_(new u(T,VW))});return b.error&&_(b.value),l.promise}})});var ZW=S(()=>{"use strict";var mNe=V(),vNe=Rt(),i1=$c(),gNe=Oe(),HW=xt(),WW=Tt(),yNe=Wv(),GW=gP(),_Ne=tr(),bP=i1&&i1.prototype,xNe=!!i1&&gNe(function(){bP.finally.call({then:function(){}},function(){})});mNe({target:"Promise",proto:!0,real:!0,forced:xNe},{finally:function(e){var t=yNe(this,HW("Promise")),n=WW(e);return this.then(n?function(u){return GW(t,e()).then(function(){return u})}:e,n?function(u){return GW(t,e()).then(function(){throw u})}:e)}});!vNe&&WW(i1)&&(xP=HW("Promise").prototype.finally,bP.finally!==xP&&_Ne(bP,"finally",xP,{unsafe:!0}));var xP});var SP=S(()=>{"use strict";var bNe=V(),wNe=$e(),SNe=tn(),qNe=zn(),INe=Wo(),ENe=_t(),XW=xl(),wP=wNe.Promise,KW=!1,TNe=!wP||!wP.try||XW(function(){wP.try(function(e){KW=e===8},8)}).error||!KW;bNe({target:"Promise",stat:!0,forced:TNe},{try:function(e){var t=arguments.length>1?qNe(arguments,1):[],n=INe.f(this),u=XW(function(){return SNe(ENe(e),void 0,t)});return(u.error?n.reject:n.resolve)(u.value),n.promise}})});var qP=S(()=>{"use strict";var ANe=V(),PNe=Wo();ANe({target:"Promise",stat:!0},{withResolvers:function(){var t=PNe.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}})});var YW=S(()=>{"use strict";var CNe=V(),MNe=tn(),ONe=_t(),RNe=He(),kNe=Oe(),DNe=!kNe(function(){Reflect.apply(function(){})});CNe({target:"Reflect",stat:!0,forced:DNe},{apply:function(t,n,u){return MNe(ONe(t),n,RNe(u))}})});var n7=S(()=>{"use strict";var LNe=V(),zNe=xt(),IP=tn(),FNe=M2(),JW=Hv(),NNe=He(),QW=wt(),BNe=jr(),t7=Oe(),EP=zNe("Reflect","construct"),jNe=Object.prototype,UNe=[].push,r7=t7(function(){function e(){}return!(EP(function(){},[],e)instanceof e)}),i7=!t7(function(){EP(function(){})}),e7=r7||i7;LNe({target:"Reflect",stat:!0,forced:e7,sham:e7},{construct:function(t,n){JW(t),NNe(n);var u=arguments.length<3?t:JW(arguments[2]);if(i7&&!r7)return EP(t,n,u);if(t===u){switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);}var l=[null];return IP(UNe,l,n),new(IP(FNe,t,l))}var o=u.prototype,_=BNe(QW(o)?o:jNe),b=IP(t,_,n);return QW(b)?b:_}})});var s7=S(()=>{"use strict";var $Ne=V(),VNe=ht(),a7=He(),GNe=Bo(),o7=dr(),HNe=Oe(),WNe=HNe(function(){Reflect.defineProperty(o7.f({},1,{value:1}),1,{value:2})});$Ne({target:"Reflect",stat:!0,forced:WNe,sham:!VNe},{defineProperty:function(t,n,u){a7(t);var l=GNe(n);a7(u);try{return o7.f(t,l,u),!0}catch(o){return!1}}})});var u7=S(()=>{"use strict";var ZNe=V(),KNe=He(),XNe=yi().f;ZNe({target:"Reflect",stat:!0},{deleteProperty:function(t,n){var u=XNe(KNe(t),n);return u&&!u.configurable?!1:delete t[n]}})});var TP=S((Gwt,c7)=>{"use strict";var l7=Ct();c7.exports=function(e){return e!==void 0&&(l7(e,"value")||l7(e,"writable"))}});var f7=S(()=>{"use strict";var YNe=V(),JNe=Ze(),QNe=wt(),eBe=He(),tBe=TP(),rBe=yi(),iBe=ti();function h7(e,t){var n=arguments.length<3?e:arguments[2],u,l;if(eBe(e)===n)return e[t];if(u=rBe.f(e,t),u)return tBe(u)?u.value:u.get===void 0?void 0:JNe(u.get,n);if(QNe(l=iBe(e)))return h7(l,t,n)}YNe({target:"Reflect",stat:!0},{get:h7})});var d7=S(()=>{"use strict";var nBe=V(),aBe=ht(),oBe=He(),sBe=yi();nBe({target:"Reflect",stat:!0,sham:!aBe},{getOwnPropertyDescriptor:function(t,n){return sBe.f(oBe(t),n)}})});var p7=S(()=>{"use strict";var uBe=V(),lBe=He(),cBe=ti(),hBe=ax();uBe({target:"Reflect",stat:!0,sham:!hBe},{getPrototypeOf:function(t){return cBe(lBe(t))}})});var m7=S(()=>{"use strict";var fBe=V();fBe({target:"Reflect",stat:!0},{has:function(t,n){return n in t}})});var v7=S(()=>{"use strict";var dBe=V(),pBe=He(),mBe=Nx();dBe({target:"Reflect",stat:!0},{isExtensible:function(t){return pBe(t),mBe(t)}})});var g7=S(()=>{"use strict";var vBe=V(),gBe=N0();vBe({target:"Reflect",stat:!0},{ownKeys:gBe})});var y7=S(()=>{"use strict";var yBe=V(),_Be=xt(),xBe=He(),bBe=js();yBe({target:"Reflect",stat:!0,sham:!bBe},{preventExtensions:function(t){xBe(t);try{var n=_Be("Object","preventExtensions");return n&&n(t),!0}catch(u){return!1}}})});var S7=S(()=>{"use strict";var wBe=V(),SBe=Ze(),qBe=He(),_7=wt(),IBe=TP(),EBe=Oe(),AP=dr(),x7=yi(),TBe=ti(),b7=kn();function w7(e,t,n){var u=arguments.length<4?e:arguments[3],l=x7.f(qBe(e),t),o,_,b;if(!l){if(_7(_=TBe(e)))return w7(_,t,n,u);l=b7(0)}if(IBe(l)){if(l.writable===!1||!_7(u))return!1;if(o=x7.f(u,t)){if(o.get||o.set||o.writable===!1)return!1;o.value=n,AP.f(u,t,o)}else AP.f(u,t,b7(0,n))}else{if(b=l.set,b===void 0)return!1;SBe(b,u,n)}return!0}var ABe=EBe(function(){var e=function(){},t=AP.f(new e,"a",{configurable:!0});return Reflect.set(e.prototype,"a",1,t)!==!1});wBe({target:"Reflect",stat:!0,forced:ABe},{set:w7})});var I7=S(()=>{"use strict";var PBe=V(),CBe=He(),MBe=YE(),q7=ka();q7&&PBe({target:"Reflect",stat:!0},{setPrototypeOf:function(t,n){CBe(t),MBe(n);try{return q7(t,n),!0}catch(u){return!1}}})});var E7=S(()=>{"use strict";var OBe=V(),RBe=$e(),kBe=vn();OBe({global:!0},{Reflect:{}});kBe(RBe.Reflect,"Reflect",!0)});var tg=S((fSt,T7)=>{"use strict";var DBe=wt(),LBe=Oi(),zBe=pt(),FBe=zBe("match");T7.exports=function(e){var t;return DBe(e)&&((t=e[FBe])!==void 0?!!t:LBe(e)==="RegExp")}});var n1=S((dSt,A7)=>{"use strict";var NBe=He();A7.exports=function(){var e=NBe(this),t="";return e.hasIndices&&(t+="d"),e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.unicodeSets&&(t+="v"),e.sticky&&(t+="y"),t}});var cd=S((pSt,C7)=>{"use strict";var BBe=Ze(),jBe=Ct(),UBe=Ri(),$Be=n1(),P7=RegExp.prototype;C7.exports=function(e){var t=e.flags;return t===void 0&&!("flags"in P7)&&!jBe(e,"flags")&&UBe(P7,e)?BBe($Be,e):t}});var rg=S((mSt,M7)=>{"use strict";var PP=Oe(),VBe=$e(),CP=VBe.RegExp,MP=PP(function(){var e=CP("a","y");return e.lastIndex=2,e.exec("abcd")!==null}),GBe=MP||PP(function(){return!CP("a","y").sticky}),HBe=MP||PP(function(){var e=CP("^r","gy");return e.lastIndex=2,e.exec("str")!==null});M7.exports={BROKEN_CARET:HBe,MISSED_STICKY:GBe,UNSUPPORTED_Y:MP}});var a1=S((vSt,O7)=>{"use strict";var WBe=Oe(),ZBe=$e(),KBe=ZBe.RegExp;O7.exports=WBe(function(){var e=KBe(".","s");return!(e.dotAll&&e.test(`
`)&&e.flags==="s")})});var OP=S((gSt,R7)=>{"use strict";var XBe=Oe(),YBe=$e(),JBe=YBe.RegExp;R7.exports=XBe(function(){var e=JBe("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"})});var $7=S(()=>{"use strict";var QBe=ht(),LP=$e(),ig=Pe(),e3e=Ff(),t3e=sl(),r3e=ei(),i3e=jr(),n3e=nl().f,k7=Ri(),a3e=tg(),D7=qt(),o3e=cd(),N7=rg(),s3e=JE(),u3e=tr(),l3e=Oe(),c3e=Ct(),h3e=Yt().enforce,f3e=fl(),d3e=pt(),B7=a1(),j7=OP(),p3e=d3e("match"),Sl=LP.RegExp,hd=Sl.prototype,m3e=LP.SyntaxError,v3e=ig(hd.exec),o1=ig("".charAt),L7=ig("".replace),z7=ig("".indexOf),F7=ig("".slice),g3e=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,Gc=/a/g,RP=/a/g,y3e=new Sl(Gc)!==Gc,U7=N7.MISSED_STICKY,_3e=N7.UNSUPPORTED_Y,x3e=QBe&&(!y3e||U7||B7||j7||l3e(function(){return RP[p3e]=!1,Sl(Gc)!==Gc||Sl(RP)===RP||String(Sl(Gc,"i"))!=="/a/i"})),b3e=function(e){for(var t=e.length,n=0,u="",l=!1,o;n<=t;n++){if(o=o1(e,n),o==="\\"){u+=o+o1(e,++n);continue}!l&&o==="."?u+="[\\s\\S]":(o==="["?l=!0:o==="]"&&(l=!1),u+=o)}return u},w3e=function(e){for(var t=e.length,n=0,u="",l=[],o=i3e(null),_=!1,b=!1,E=0,T="",C;n<=t;n++){if(C=o1(e,n),C==="\\")C+=o1(e,++n);else if(C==="]")_=!1;else if(!_)switch(!0){case C==="[":_=!0;break;case C==="(":if(u+=C,F7(e,n+1,n+3)==="?:")continue;v3e(g3e,F7(e,n+1))&&(n+=2,b=!0),E++;continue;case C===">"&&b:if(T===""||c3e(o,T))throw new m3e("Invalid capture group name");o[T]=!0,l[l.length]=[T,E],b=!1,T="";continue;}b?T+=C:u+=C}return[u,l]};if(e3e("RegExp",x3e)){for(wl=function(t,n){var u=k7(hd,this),l=a3e(t),o=n===void 0,_=[],b=t,E,T,C,z,$,oe;if(!u&&l&&o&&t.constructor===wl)return t;if((l||k7(hd,t))&&(t=t.source,o&&(n=o3e(b))),t=t===void 0?"":D7(t),n=n===void 0?"":D7(n),b=t,B7&&("dotAll"in Gc)&&(T=!!n&&z7(n,"s")>-1,T&&(n=L7(n,/s/g,""))),E=n,U7&&("sticky"in Gc)&&(C=!!n&&z7(n,"y")>-1,C&&_3e&&(n=L7(n,/y/g,""))),j7&&(z=w3e(t),t=z[0],_=z[1]),$=t3e(Sl(t,n),u?this:hd,wl),(T||C||_.length)&&(oe=h3e($),T&&(oe.dotAll=!0,oe.raw=wl(b3e(t),E)),C&&(oe.sticky=!0),_.length&&(oe.groups=_)),t!==b)try{r3e($,"source",b===""?"(?:)":b)}catch(xe){}return $},kP=n3e(Sl),DP=0;kP.length>DP;)s3e(wl,Sl,kP[DP++]);hd.constructor=wl,wl.prototype=hd,u3e(LP,"RegExp",wl,{constructor:!0})}var wl,kP,DP;f3e("RegExp")});var G7=S(()=>{"use strict";var S3e=ht(),q3e=a1(),I3e=Oi(),E3e=yr(),T3e=Yt().get,V7=RegExp.prototype,A3e=TypeError;S3e&&q3e&&E3e(V7,"dotAll",{configurable:!0,get:function(){if(this!==V7){if(I3e(this)==="RegExp")return!!T3e(this).dotAll;throw new A3e("Incompatible receiver, RegExp required")}}})});var l1=S((wSt,W7)=>{"use strict";var fd=Ze(),u1=Pe(),P3e=qt(),C3e=n1(),M3e=rg(),O3e=Cs(),R3e=jr(),k3e=Yt().get,D3e=a1(),L3e=OP(),z3e=O3e("native-string-replace",String.prototype.replace),s1=RegExp.prototype.exec,FP=s1,F3e=u1("".charAt),N3e=u1("".indexOf),B3e=u1("".replace),zP=u1("".slice),NP=function(){var e=/a/,t=/b*/g;return fd(s1,e,"a"),fd(s1,t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),H7=M3e.BROKEN_CARET,BP=/()??/.exec("")[1]!==void 0,j3e=NP||BP||H7||D3e||L3e;j3e&&(FP=function(t){var n=this,u=k3e(n),l=P3e(t),o=u.raw,_,b,E,T,C,z,$;if(o)return o.lastIndex=n.lastIndex,_=fd(FP,o,l),n.lastIndex=o.lastIndex,_;var oe=u.groups,xe=H7&&n.sticky,_e=fd(C3e,n),X=n.source,K=0,re=l;if(xe&&(_e=B3e(_e,"y",""),N3e(_e,"g")===-1&&(_e+="g"),re=zP(l,n.lastIndex),n.lastIndex>0&&(!n.multiline||n.multiline&&F3e(l,n.lastIndex-1)!==`
`)&&(X="(?: "+X+")",re=" "+re,K++),b=new RegExp("^(?:"+X+")",_e)),BP&&(b=new RegExp("^"+X+"$(?!\\s)",_e)),NP&&(E=n.lastIndex),T=fd(s1,xe?b:n,re),xe?T?(T.input=zP(T.input,K),T[0]=zP(T[0],K),T.index=n.lastIndex,n.lastIndex+=T[0].length):n.lastIndex=0:NP&&T&&(n.lastIndex=n.global?T.index+T[0].length:E),BP&&T&&T.length>1&&fd(z3e,T[0],b,function(){for(C=1;C<arguments.length-2;C++)arguments[C]===void 0&&(T[C]=void 0)}),T&&oe)for(T.groups=z=R3e(null),C=0;C<oe.length;C++)$=oe[C],z[$[0]]=T[$[1]];return T});W7.exports=FP});var c1=S(()=>{"use strict";var U3e=V(),Z7=l1();U3e({target:"RegExp",proto:!0,forced:/./.exec!==Z7},{exec:Z7})});var Y7=S(()=>{"use strict";var $3e=$e(),V3e=ht(),G3e=yr(),H3e=n1(),W3e=Oe(),K7=$3e.RegExp,X7=K7.prototype,Z3e=V3e&&W3e(function(){var e=!0;try{K7(".","d")}catch(E){e=!1}var t={},n="",u=e?"dgimsy":"gimsy",l=function(E,T){Object.defineProperty(t,E,{get:function(){return n+=T,!0}})},o={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};e&&(o.hasIndices="d");for(var _ in o)l(_,o[_]);var b=Object.getOwnPropertyDescriptor(X7,"flags").get.call(t);return b!==u||n!==u});Z3e&&G3e(X7,"flags",{configurable:!0,get:H3e})});var Q7=S(()=>{"use strict";var K3e=ht(),X3e=rg().MISSED_STICKY,Y3e=Oi(),J3e=yr(),Q3e=Yt().get,J7=RegExp.prototype,e4e=TypeError;K3e&&X3e&&J3e(J7,"sticky",{configurable:!0,get:function(){if(this!==J7){if(Y3e(this)==="RegExp")return!!Q3e(this).sticky;throw new e4e("Incompatible receiver, RegExp required")}}})});var rZ=S(()=>{"use strict";c1();var t4e=V(),eZ=Ze(),r4e=Tt(),tZ=He(),i4e=qt(),n4e=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},t.test("abc")===!0&&e}(),a4e=/./.test;t4e({target:"RegExp",proto:!0,forced:!n4e},{test:function(e){var t=tZ(this),n=i4e(e),u=t.exec;if(!r4e(u))return eZ(a4e,t,n);var l=eZ(u,t,n);return l===null?!1:(tZ(l),!0)}})});var oZ=S(()=>{"use strict";var o4e=Ec().PROPER,s4e=tr(),u4e=He(),iZ=qt(),l4e=Oe(),c4e=cd(),jP="toString",nZ=RegExp.prototype,aZ=nZ[jP],h4e=l4e(function(){return aZ.call({source:"a",flags:"b"})!=="/a/b"}),f4e=o4e&&aZ.name!==jP;(h4e||f4e)&&s4e(nZ,jP,function(){var t=u4e(this),n=iZ(t.source),u=iZ(c4e(t));return"/"+n+"/"+u},{unsafe:!0})});var sZ=S(()=>{"use strict";var d4e=Lv(),p4e=cA();d4e("Set",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},p4e)});var uZ=S(()=>{"use strict";sZ()});var bi=S((zSt,lZ)=>{"use strict";var UP=Pe(),h1=Set.prototype;lZ.exports={Set,add:UP(h1.add),has:UP(h1.has),remove:UP(h1.delete),proto:h1}});var ki=S((FSt,cZ)=>{"use strict";var m4e=bi().has;cZ.exports=function(e){return m4e(e),e}});var $s=S((NSt,hZ)=>{"use strict";var v4e=Ze();hZ.exports=function(e,t,n){for(var u=n?e:e.iterator,l=e.next,o,_;!(o=v4e(l,u)).done;)if(_=t(o.value),_!==void 0)return _}});var Bn=S((BSt,vZ)=>{"use strict";var fZ=Pe(),g4e=$s(),dZ=bi(),y4e=dZ.Set,pZ=dZ.proto,_4e=fZ(pZ.forEach),mZ=fZ(pZ.keys),x4e=mZ(new y4e).next;vZ.exports=function(e,t,n){return n?g4e({iterator:mZ(e),next:x4e},t):_4e(e,t)}});var f1=S((jSt,yZ)=>{"use strict";var gZ=bi(),b4e=Bn(),w4e=gZ.Set,S4e=gZ.add;yZ.exports=function(e){var t=new w4e;return b4e(e,function(n){S4e(t,n)}),t}});var dd=S((USt,_Z)=>{"use strict";var q4e=_v(),I4e=bi();_Z.exports=q4e(I4e.proto,"size","get")||function(e){return e.size}});var ql=S(($St,IZ)=>{"use strict";var xZ=_t(),SZ=He(),bZ=Ze(),E4e=gr(),T4e=Ir(),wZ="Invalid size",A4e=RangeError,P4e=TypeError,C4e=Math.max,qZ=function(e,t){this.set=e,this.size=C4e(t,0),this.has=xZ(e.has),this.keys=xZ(e.keys)};qZ.prototype={getIterator:function(){return T4e(SZ(bZ(this.keys,this.set)))},includes:function(e){return bZ(this.has,this.set,e)}};IZ.exports=function(e){SZ(e);var t=+e.size;if(t!==t)throw new P4e(wZ);var n=E4e(t);if(n<0)throw new A4e(wZ);return new qZ(e,n)}});var $P=S((VSt,AZ)=>{"use strict";var M4e=ki(),TZ=bi(),O4e=f1(),R4e=dd(),k4e=ql(),D4e=Bn(),L4e=$s(),z4e=TZ.has,EZ=TZ.remove;AZ.exports=function(t){var n=M4e(this),u=k4e(t),l=O4e(n);return R4e(n)<=u.size?D4e(n,function(o){u.includes(o)&&EZ(l,o)}):L4e(u.getIterator(),function(o){z4e(n,o)&&EZ(l,o)}),l}});var Il=S((GSt,CZ)=>{"use strict";var F4e=xt(),PZ=function(e){return{size:e,has:function(){return!1},keys:function(){return{next:function(){return{done:!0}}}}}};CZ.exports=function(e){var t=F4e("Set");try{new t()[e](PZ(0));try{return new t()[e](PZ(-1)),!1}catch(n){return!0}}catch(n){return!1}}});var VP=S(()=>{"use strict";var N4e=V(),B4e=$P(),j4e=Il();N4e({target:"Set",proto:!0,real:!0,forced:!j4e("difference")},{difference:B4e})});var HP=S((ZSt,OZ)=>{"use strict";var U4e=ki(),GP=bi(),$4e=dd(),V4e=ql(),G4e=Bn(),H4e=$s(),W4e=GP.Set,MZ=GP.add,Z4e=GP.has;OZ.exports=function(t){var n=U4e(this),u=V4e(t),l=new W4e;return $4e(n)>u.size?H4e(u.getIterator(),function(o){Z4e(n,o)&&MZ(l,o)}):G4e(n,function(o){u.includes(o)&&MZ(l,o)}),l}});var WP=S(()=>{"use strict";var K4e=V(),X4e=Oe(),Y4e=HP(),J4e=Il(),Q4e=!J4e("intersection")||X4e(function(){return String(Array.from(new Set([1,2,3]).intersection(new Set([3,2]))))!=="3,2"});K4e({target:"Set",proto:!0,real:!0,forced:Q4e},{intersection:Y4e})});var ZP=S((YSt,RZ)=>{"use strict";var e5e=ki(),t5e=bi().has,r5e=dd(),i5e=ql(),n5e=Bn(),a5e=$s(),o5e=ks();RZ.exports=function(t){var n=e5e(this),u=i5e(t);if(r5e(n)<=u.size)return n5e(n,function(o){if(u.includes(o))return!1},!0)!==!1;var l=u.getIterator();return a5e(l,function(o){if(t5e(n,o))return o5e(l,"normal",!1)})!==!1}});var KP=S(()=>{"use strict";var s5e=V(),u5e=ZP(),l5e=Il();s5e({target:"Set",proto:!0,real:!0,forced:!l5e("isDisjointFrom")},{isDisjointFrom:u5e})});var XP=S((eqt,kZ)=>{"use strict";var c5e=ki(),h5e=dd(),f5e=Bn(),d5e=ql();kZ.exports=function(t){var n=c5e(this),u=d5e(t);return h5e(n)>u.size?!1:f5e(n,function(l){if(!u.includes(l))return!1},!0)!==!1}});var YP=S(()=>{"use strict";var p5e=V(),m5e=XP(),v5e=Il();p5e({target:"Set",proto:!0,real:!0,forced:!v5e("isSubsetOf")},{isSubsetOf:m5e})});var JP=S((iqt,DZ)=>{"use strict";var g5e=ki(),y5e=bi().has,_5e=dd(),x5e=ql(),b5e=$s(),w5e=ks();DZ.exports=function(t){var n=g5e(this),u=x5e(t);if(_5e(n)<u.size)return!1;var l=u.getIterator();return b5e(l,function(o){if(!y5e(n,o))return w5e(l,"normal",!1)})!==!1}});var QP=S(()=>{"use strict";var S5e=V(),q5e=JP(),I5e=Il();S5e({target:"Set",proto:!0,real:!0,forced:!I5e("isSupersetOf")},{isSupersetOf:q5e})});var tC=S((oqt,LZ)=>{"use strict";var E5e=ki(),eC=bi(),T5e=f1(),A5e=ql(),P5e=$s(),C5e=eC.add,M5e=eC.has,O5e=eC.remove;LZ.exports=function(t){var n=E5e(this),u=A5e(t).getIterator(),l=T5e(n);return P5e(u,function(o){M5e(n,o)?O5e(l,o):C5e(l,o)}),l}});var rC=S(()=>{"use strict";var R5e=V(),k5e=tC(),D5e=Il();R5e({target:"Set",proto:!0,real:!0,forced:!D5e("symmetricDifference")},{symmetricDifference:k5e})});var iC=S((lqt,zZ)=>{"use strict";var L5e=ki(),z5e=bi().add,F5e=f1(),N5e=ql(),B5e=$s();zZ.exports=function(t){var n=L5e(this),u=N5e(t).getIterator(),l=F5e(n);return B5e(u,function(o){z5e(l,o)}),l}});var nC=S(()=>{"use strict";var j5e=V(),U5e=iC(),$5e=Il();j5e({target:"Set",proto:!0,real:!0,forced:!$5e("union")},{union:U5e})});var FZ=S(()=>{"use strict";var V5e=V(),G5e=Pe(),H5e=mr(),W5e=gr(),Z5e=qt(),K5e=Oe(),X5e=G5e("".charAt),Y5e=K5e(function(){return"\uD842\uDFB7".at(-2)!=="\uD842"});V5e({target:"String",proto:!0,forced:Y5e},{at:function(t){var n=Z5e(H5e(this)),u=n.length,l=W5e(t),o=l>=0?l:u+l;return o<0||o>=u?void 0:X5e(n,o)}})});var Hc=S((pqt,jZ)=>{"use strict";var aC=Pe(),J5e=gr(),Q5e=qt(),eje=mr(),tje=aC("".charAt),NZ=aC("".charCodeAt),rje=aC("".slice),BZ=function(e){return function(t,n){var u=Q5e(eje(t)),l=J5e(n),o=u.length,_,b;return l<0||l>=o?e?"":void 0:(_=NZ(u,l),_<55296||_>56319||l+1===o||(b=NZ(u,l+1))<56320||b>57343?e?tje(u,l):_:e?rje(u,l,l+2):(_-55296<<10)+(b-56320)+65536)}};jZ.exports={codeAt:BZ(!1),charAt:BZ(!0)}});var UZ=S(()=>{"use strict";var ije=V(),nje=Hc().codeAt;ije({target:"String",proto:!0},{codePointAt:function(t){return nje(this,t)}})});var d1=S((gqt,$Z)=>{"use strict";var aje=tg(),oje=TypeError;$Z.exports=function(e){if(aje(e))throw new oje("The method doesn't accept regular expressions");return e}});var p1=S((yqt,VZ)=>{"use strict";var sje=pt(),uje=sje("match");VZ.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[uje]=!1,"/./"[e](t)}catch(u){}}return!1}});var WZ=S(()=>{"use strict";var lje=V(),cje=Ms(),hje=yi().f,fje=Dn(),GZ=qt(),dje=d1(),pje=mr(),mje=p1(),vje=Rt(),gje=cje("".slice),yje=Math.min,HZ=mje("endsWith"),_je=!vje&&!HZ&&!!function(){var e=hje(String.prototype,"endsWith");return e&&!e.writable}();lje({target:"String",proto:!0,forced:!_je&&!HZ},{endsWith:function(t){var n=GZ(pje(this));dje(t);var u=arguments.length>1?arguments[1]:void 0,l=n.length,o=u===void 0?l:yje(fje(u),l),_=GZ(t);return gje(n,o-_.length,o)===_}})});var oC=S(()=>{"use strict";var xje=V(),bje=Pe(),wje=lo(),Sje=RangeError,ZZ=String.fromCharCode,KZ=String.fromCodePoint,qje=bje([].join),Ije=!!KZ&&KZ.length!==1;xje({target:"String",stat:!0,arity:1,forced:Ije},{fromCodePoint:function(t){for(var n=[],u=arguments.length,l=0,o;u>l;){if(o=+arguments[l++],wje(o,1114111)!==o)throw new Sje(o+" is not a valid code point");n[l]=o<65536?ZZ(o):ZZ(((o-=65536)>>10)+55296,o%1024+56320)}return qje(n,"")}})});var YZ=S(()=>{"use strict";var Eje=V(),Tje=Pe(),Aje=d1(),Pje=mr(),XZ=qt(),Cje=p1(),Mje=Tje("".indexOf);Eje({target:"String",proto:!0,forced:!Cje("includes")},{includes:function(t){return!!~Mje(XZ(Pje(this)),XZ(Aje(t)),arguments.length>1?arguments[1]:void 0)}})});var sC=S(()=>{"use strict";var Oje=V(),Rje=Pe(),kje=mr(),Dje=qt(),JZ=Rje("".charCodeAt);Oje({target:"String",proto:!0},{isWellFormed:function(){for(var t=Dje(kje(this)),n=t.length,u=0;u<n;u++){var l=JZ(t,u);if((l&63488)===55296&&(l>=56320||++u>=n||(JZ(t,u)&64512)!==56320))return!1}return!0}})});var uC=S(()=>{"use strict";var Lje=Hc().charAt,zje=qt(),eK=Yt(),Fje=px(),QZ=xi(),tK="String Iterator",Nje=eK.set,Bje=eK.getterFor(tK);Fje(String,"String",function(e){Nje(this,{type:tK,string:zje(e),index:0})},function(){var t=Bje(this),n=t.string,u=t.index,l;return u>=n.length?QZ(void 0,!0):(l=Lje(n,u),t.index+=l.length,QZ(l,!1))})});var ng=S((Pqt,oK)=>{"use strict";c1();var rK=Ze(),iK=tr(),jje=l1(),nK=Oe(),aK=pt(),Uje=ei(),$je=aK("species"),lC=RegExp.prototype;oK.exports=function(e,t,n,u){var l=aK(e),o=!nK(function(){var T={};return T[l]=function(){return 7},""[e](T)!==7}),_=o&&!nK(function(){var T=!1,C=/a/;return e==="split"&&(C={},C.constructor={},C.constructor[$je]=function(){return C},C.flags="",C[l]=/./[l]),C.exec=function(){return T=!0,null},C[l](""),!T});if(!o||!_||n){var b=/./[l],E=t(l,""[e],function(T,C,z,$,oe){var xe=C.exec;return xe===jje||xe===lC.exec?o&&!oe?{done:!0,value:rK(b,C,z,$)}:{done:!0,value:rK(T,z,C,$)}:{done:!1}});iK(String.prototype,e,E[0]),iK(lC,l,E[1])}u&&Uje(lC[l],"sham",!0)}});var ag=S((Cqt,sK)=>{"use strict";var Vje=Hc().charAt;sK.exports=function(e,t,n){return t+(n?Vje(e,t).length:1)}});var pd=S((Mqt,lK)=>{"use strict";var uK=Ze(),Gje=He(),Hje=Tt(),Wje=Oi(),Zje=l1(),Kje=TypeError;lK.exports=function(e,t){var n=e.exec;if(Hje(n)){var u=uK(n,e,t);return u!==null&&Gje(u),u}if(Wje(e)==="RegExp")return uK(Zje,e,t);throw new Kje("RegExp#exec called on incompatible receiver")}});var hK=S(()=>{"use strict";var Xje=Ze(),Yje=ng(),Jje=He(),Qje=Jr(),e6e=Dn(),cC=qt(),t6e=mr(),r6e=Br(),i6e=ag(),cK=pd();Yje("match",function(e,t,n){return[function(l){var o=t6e(this),_=Qje(l)?void 0:r6e(l,e);return _?Xje(_,l,o):new RegExp(l)[e](cC(o))},function(u){var l=Jje(this),o=cC(u),_=n(t,l,o);if(_.done)return _.value;if(!l.global)return cK(l,o);var b=l.unicode;l.lastIndex=0;for(var E=[],T=0,C;(C=cK(l,o))!==null;){var z=cC(C[0]);E[T]=z,z===""&&(l.lastIndex=i6e(o,e6e(l.lastIndex),b)),T++}return T===0?null:E}]})});var mC=S(()=>{"use strict";var n6e=V(),fK=Ze(),mK=Ms(),a6e=cl(),m1=xi(),dK=mr(),vK=Dn(),og=qt(),o6e=He(),s6e=Jr(),u6e=Oi(),l6e=tg(),gK=cd(),c6e=Br(),h6e=tr(),f6e=Oe(),d6e=pt(),p6e=Wv(),m6e=ag(),v6e=pd(),yK=Yt(),fC=Rt(),v1=d6e("matchAll"),_K="RegExp String",xK=_K+" Iterator",g6e=yK.set,y6e=yK.getterFor(xK),pK=RegExp.prototype,_6e=TypeError,dC=mK("".indexOf),g1=mK("".matchAll),hC=!!g1&&!f6e(function(){g1("a",/./)}),x6e=a6e(function(t,n,u,l){g6e(this,{type:xK,regexp:t,string:n,global:u,unicode:l,done:!1})},_K,function(){var t=y6e(this);if(t.done)return m1(void 0,!0);var n=t.regexp,u=t.string,l=v6e(n,u);return l===null?(t.done=!0,m1(void 0,!0)):t.global?(og(l[0])===""&&(n.lastIndex=m6e(u,vK(n.lastIndex),t.unicode)),m1(l,!1)):(t.done=!0,m1(l,!1))}),pC=function(e){var t=o6e(this),n=og(e),u=p6e(t,RegExp),l=og(gK(t)),o,_,b;return o=new u(u===RegExp?t.source:t,l),_=!!~dC(l,"g"),b=!!~dC(l,"u"),o.lastIndex=vK(t.lastIndex),new x6e(o,n,_,b)};n6e({target:"String",proto:!0,forced:hC},{matchAll:function(t){var n=dK(this),u,l,o,_;if(s6e(t)){if(hC)return g1(n,t)}else{if(l6e(t)&&(u=og(dK(gK(t))),!~dC(u,"g")))throw new _6e("`.matchAll` does not allow non-global regexes");if(hC)return g1(n,t);if(o=c6e(t,v1),o===void 0&&fC&&u6e(t)==="RegExp"&&(o=pC),o)return fK(o,t,n)}return l=og(n),_=new RegExp(t,"g"),fC?fK(pC,_,l):_[v1](l)}});fC||v1 in pK||h6e(pK,v1,pC)});var vC=S((Lqt,bK)=>{"use strict";var b6e=oo();bK.exports=/Version\/10(?:\.\d+){1,2}(?: [\w./]+)?(?: Mobile\/\w+)? Safari\//.test(b6e)});var wK=S(()=>{"use strict";var w6e=V(),S6e=Rv().end,q6e=vC();w6e({target:"String",proto:!0,forced:q6e},{padEnd:function(t){return S6e(this,t,arguments.length>1?arguments[1]:void 0)}})});var SK=S(()=>{"use strict";var I6e=V(),E6e=Rv().start,T6e=vC();I6e({target:"String",proto:!0,forced:T6e},{padStart:function(t){return E6e(this,t,arguments.length>1?arguments[1]:void 0)}})});var TK=S(()=>{"use strict";var A6e=V(),EK=Pe(),P6e=Qr(),C6e=kt(),qK=qt(),M6e=Nt(),IK=EK([].push),O6e=EK([].join);A6e({target:"String",stat:!0},{raw:function(t){var n=P6e(C6e(t).raw),u=M6e(n);if(!u)return"";for(var l=arguments.length,o=[],_=0;;){if(IK(o,qK(n[_++])),_===u)return O6e(o,"");_<l&&IK(o,qK(arguments[_]))}}})});var AK=S(()=>{"use strict";var R6e=V(),k6e=Ov();R6e({target:"String",proto:!0},{repeat:k6e})});var xC=S((Gqt,PK)=>{"use strict";var _C=Pe(),D6e=kt(),L6e=Math.floor,gC=_C("".charAt),z6e=_C("".replace),yC=_C("".slice),F6e=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,N6e=/\$([$&'`]|\d{1,2})/g;PK.exports=function(e,t,n,u,l,o){var _=n+e.length,b=u.length,E=N6e;return l!==void 0&&(l=D6e(l),E=F6e),z6e(o,E,function(T,C){var z;switch(gC(C,0)){case"$":return"$";case"&":return e;case"`":return yC(t,0,n);case"'":return yC(t,_);case"<":z=l[yC(C,1,-1)];break;default:var $=+C;if($===0)return T;if($>b){var oe=L6e($/10);return oe===0?T:oe<=b?u[oe-1]===void 0?gC(C,1):u[oe-1]+gC(C,1):T}z=u[$-1];}return z===void 0?"":z})}});var kK=S(()=>{"use strict";var B6e=tn(),CK=Ze(),y1=Pe(),j6e=ng(),U6e=Oe(),$6e=He(),V6e=Tt(),G6e=Jr(),H6e=gr(),W6e=Dn(),md=qt(),Z6e=mr(),K6e=ag(),X6e=Br(),Y6e=xC(),J6e=pd(),Q6e=pt(),wC=Q6e("replace"),eUe=Math.max,tUe=Math.min,rUe=y1([].concat),bC=y1([].push),MK=y1("".indexOf),OK=y1("".slice),iUe=function(e){return e===void 0?e:String(e)},nUe=function(){return"a".replace(/./,"$0")==="$0"}(),RK=function(){return /./[wC]?/./[wC]("a","$0")==="":!1}(),aUe=!U6e(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});j6e("replace",function(e,t,n){var u=RK?"$":"$0";return[function(o,_){var b=Z6e(this),E=G6e(o)?void 0:X6e(o,wC);return E?CK(E,o,b,_):CK(t,md(b),o,_)},function(l,o){var _=$6e(this),b=md(l);if(typeof o=="string"&&MK(o,u)===-1&&MK(o,"$<")===-1){var E=n(t,_,b,o);if(E.done)return E.value}var T=V6e(o);T||(o=md(o));var C=_.global,z;C&&(z=_.unicode,_.lastIndex=0);for(var $=[],oe;oe=J6e(_,b),!(oe===null||(bC($,oe),!C));){var xe=md(oe[0]);xe===""&&(_.lastIndex=K6e(b,W6e(_.lastIndex),z))}for(var _e="",X=0,K=0;K<$.length;K++){oe=$[K];for(var re=md(oe[0]),ge=eUe(tUe(H6e(oe.index),b.length),0),be=[],et,Le=1;Le<oe.length;Le++)bC(be,iUe(oe[Le]));var nt=oe.groups;if(T){var gt=rUe([re],be,ge,b);nt!==void 0&&bC(gt,nt),et=md(B6e(o,void 0,gt))}else et=Y6e(re,b,ge,be,nt,o);ge>=X&&(_e+=OK(b,X,ge)+et,X=ge+re.length)}return _e+OK(b,X)}]},!aUe||!nUe||RK)});var IC=S(()=>{"use strict";var oUe=V(),sUe=Ze(),qC=Pe(),DK=mr(),uUe=Tt(),lUe=Jr(),cUe=tg(),vd=qt(),hUe=Br(),fUe=cd(),dUe=xC(),pUe=pt(),mUe=Rt(),vUe=pUe("replace"),gUe=TypeError,SC=qC("".indexOf),yUe=qC("".replace),LK=qC("".slice),_Ue=Math.max;oUe({target:"String",proto:!0},{replaceAll:function(t,n){var u=DK(this),l,o,_,b,E,T,C,z,$,oe,xe=0,_e="";if(!lUe(t)){if(l=cUe(t),l&&(o=vd(DK(fUe(t))),!~SC(o,"g")))throw new gUe("`.replaceAll` does not allow non-global regexes");if(_=hUe(t,vUe),_)return sUe(_,t,u,n);if(mUe&&l)return yUe(vd(u),t,n)}for(b=vd(u),E=vd(t),T=uUe(n),T||(n=vd(n)),C=E.length,z=_Ue(1,C),$=SC(b,E);$!==-1;)oe=T?vd(n(E,$,b)):dUe(E,b,$,[],void 0,n),_e+=LK(b,xe,$)+oe,xe=$+C,$=$+z>b.length?-1:SC(b,E,$+z);return xe<b.length&&(_e+=LK(b,xe)),_e}})});var NK=S(()=>{"use strict";var xUe=Ze(),bUe=ng(),wUe=He(),SUe=Jr(),qUe=mr(),zK=LA(),FK=qt(),IUe=Br(),EUe=pd();bUe("search",function(e,t,n){return[function(l){var o=qUe(this),_=SUe(l)?void 0:IUe(l,e);return _?xUe(_,l,o):new RegExp(l)[e](FK(o))},function(u){var l=wUe(this),o=FK(u),_=n(t,l,o);if(_.done)return _.value;var b=l.lastIndex;zK(b,0)||(l.lastIndex=0);var E=EUe(l,o);return zK(l.lastIndex,b)||(l.lastIndex=b),E===null?-1:E.index}]})});var VK=S(()=>{"use strict";var EC=Ze(),$K=Pe(),TUe=ng(),AUe=He(),PUe=Jr(),CUe=mr(),MUe=Wv(),OUe=ag(),RUe=Dn(),BK=qt(),kUe=Br(),jK=pd(),DUe=rg(),LUe=Oe(),gd=DUe.UNSUPPORTED_Y,zUe=4294967295,FUe=Math.min,TC=$K([].push),AC=$K("".slice),NUe=!LUe(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return n.length!==2||n[0]!=="a"||n[1]!=="b"}),UK="abbc".split(/(b)*/)[1]==="c"||"test".split(/(?:)/,-1).length!==4||"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||".".split(/()()/).length>1||"".split(/.?/).length;TUe("split",function(e,t,n){var u="0".split(void 0,0).length?function(l,o){return l===void 0&&o===0?[]:EC(t,this,l,o)}:t;return[function(o,_){var b=CUe(this),E=PUe(o)?void 0:kUe(o,e);return E?EC(E,o,b,_):EC(u,BK(b),o,_)},function(l,o){var _=AUe(this),b=BK(l);if(!UK){var E=n(u,_,b,o,u!==t);if(E.done)return E.value}var T=MUe(_,RegExp),C=_.unicode,z=(_.ignoreCase?"i":"")+(_.multiline?"m":"")+(_.unicode?"u":"")+(gd?"g":"y"),$=new T(gd?"^(?:"+_.source+")":_,z),oe=o===void 0?zUe:o>>>0;if(oe===0)return[];if(b.length===0)return jK($,b)===null?[b]:[];for(var xe=0,_e=0,X=[];_e<b.length;){$.lastIndex=gd?0:_e;var K=jK($,gd?AC(b,_e):b),re;if(K===null||(re=FUe(RUe($.lastIndex+(gd?_e:0)),b.length))===xe)_e=OUe(b,_e,C);else{if(TC(X,AC(b,xe,_e)),X.length===oe)return X;for(var ge=1;ge<=K.length-1;ge++)if(TC(X,K[ge]),X.length===oe)return X;_e=xe=re}}return TC(X,AC(b,xe)),X}]},UK||!NUe,gd)});var WK=S(()=>{"use strict";var BUe=V(),jUe=Ms(),UUe=yi().f,$Ue=Dn(),GK=qt(),VUe=d1(),GUe=mr(),HUe=p1(),WUe=Rt(),ZUe=jUe("".slice),KUe=Math.min,HK=HUe("startsWith"),XUe=!WUe&&!HK&&!!function(){var e=UUe(String.prototype,"startsWith");return e&&!e.writable}();BUe({target:"String",proto:!0,forced:!XUe&&!HK},{startsWith:function(t){var n=GK(GUe(this));VUe(t);var u=$Ue(KUe(arguments.length>1?arguments[1]:void 0,n.length)),l=GK(t);return ZUe(n,u,u+l.length)===l}})});var KK=S(()=>{"use strict";var YUe=V(),JUe=Pe(),QUe=mr(),ZK=gr(),e$e=qt(),t$e=JUe("".slice),r$e=Math.max,i$e=Math.min,n$e=!"".substr||"ab".substr(-1)!=="b";YUe({target:"String",proto:!0,forced:n$e},{substr:function(t,n){var u=e$e(QUe(this)),l=u.length,o=ZK(t),_,b;return o===1/0&&(o=0),o<0&&(o=r$e(l+o,0)),_=n===void 0?l:ZK(n),_<=0||_===1/0?"":(b=i$e(o+_,l),o>=b?"":t$e(u,o,b))}})});var OC=S(()=>{"use strict";var a$e=V(),JK=Ze(),MC=Pe(),o$e=mr(),s$e=qt(),u$e=Oe(),l$e=Array,PC=MC("".charAt),XK=MC("".charCodeAt),c$e=MC([].join),CC="".toWellFormed,h$e="\uFFFD",YK=CC&&u$e(function(){return JK(CC,1)!=="1"});a$e({target:"String",proto:!0,forced:YK},{toWellFormed:function(){var t=s$e(o$e(this));if(YK)return JK(CC,t);for(var n=t.length,u=l$e(n),l=0;l<n;l++){var o=XK(t,l);(o&63488)!==55296?u[l]=PC(t,l):o>=56320||l+1>=n||(XK(t,l+1)&64512)!==56320?u[l]=h$e:(u[l]=PC(t,l),u[++l]=PC(t,l))}return c$e(u,"")}})});var _1=S((oIt,tX)=>{"use strict";var f$e=Ec().PROPER,d$e=Oe(),QK=Bc(),eX="\u200B\x85\u180E";tX.exports=function(e){return d$e(function(){return!!QK[e]()||eX[e]()!==eX||f$e&&QK[e].name!==e})}});var rX=S(()=>{"use strict";var p$e=V(),m$e=jc().trim,v$e=_1();p$e({target:"String",proto:!0,forced:v$e("trim")},{trim:function(){return m$e(this)}})});var RC=S((lIt,iX)=>{"use strict";var g$e=jc().end,y$e=_1();iX.exports=y$e("trimEnd")?function(){return g$e(this)}:"".trimEnd});var aX=S(()=>{"use strict";var _$e=V(),nX=RC();_$e({target:"String",proto:!0,name:"trimEnd",forced:"".trimRight!==nX},{trimRight:nX})});var sX=S(()=>{"use strict";aX();var x$e=V(),oX=RC();x$e({target:"String",proto:!0,name:"trimEnd",forced:"".trimEnd!==oX},{trimEnd:oX})});var kC=S((pIt,uX)=>{"use strict";var b$e=jc().start,w$e=_1();uX.exports=w$e("trimStart")?function(){return b$e(this)}:"".trimStart});var cX=S(()=>{"use strict";var S$e=V(),lX=kC();S$e({target:"String",proto:!0,name:"trimStart",forced:"".trimLeft!==lX},{trimLeft:lX})});var fX=S(()=>{"use strict";cX();var q$e=V(),hX=kC();q$e({target:"String",proto:!0,name:"trimStart",forced:"".trimStart!==hX},{trimStart:hX})});var jn=S((_It,pX)=>{"use strict";var I$e=Pe(),E$e=mr(),dX=qt(),T$e=/"/g,A$e=I$e("".replace);pX.exports=function(e,t,n,u){var l=dX(E$e(e)),o="<"+t;return n!==""&&(o+=" "+n+"=\""+A$e(dX(u),T$e,"&quot;")+"\""),o+">"+l+"</"+t+">"}});var Un=S((xIt,mX)=>{"use strict";var P$e=Oe();mX.exports=function(e){return P$e(function(){var t=""[e]("\"");return t!==t.toLowerCase()||t.split("\"").length>3})}});var vX=S(()=>{"use strict";var C$e=V(),M$e=jn(),O$e=Un();C$e({target:"String",proto:!0,forced:O$e("anchor")},{anchor:function(t){return M$e(this,"a","name",t)}})});var gX=S(()=>{"use strict";var R$e=V(),k$e=jn(),D$e=Un();R$e({target:"String",proto:!0,forced:D$e("big")},{big:function(){return k$e(this,"big","","")}})});var yX=S(()=>{"use strict";var L$e=V(),z$e=jn(),F$e=Un();L$e({target:"String",proto:!0,forced:F$e("blink")},{blink:function(){return z$e(this,"blink","","")}})});var _X=S(()=>{"use strict";var N$e=V(),B$e=jn(),j$e=Un();N$e({target:"String",proto:!0,forced:j$e("bold")},{bold:function(){return B$e(this,"b","","")}})});var xX=S(()=>{"use strict";var U$e=V(),$$e=jn(),V$e=Un();U$e({target:"String",proto:!0,forced:V$e("fixed")},{fixed:function(){return $$e(this,"tt","","")}})});var bX=S(()=>{"use strict";var G$e=V(),H$e=jn(),W$e=Un();G$e({target:"String",proto:!0,forced:W$e("fontcolor")},{fontcolor:function(t){return H$e(this,"font","color",t)}})});var wX=S(()=>{"use strict";var Z$e=V(),K$e=jn(),X$e=Un();Z$e({target:"String",proto:!0,forced:X$e("fontsize")},{fontsize:function(t){return K$e(this,"font","size",t)}})});var SX=S(()=>{"use strict";var Y$e=V(),J$e=jn(),Q$e=Un();Y$e({target:"String",proto:!0,forced:Q$e("italics")},{italics:function(){return J$e(this,"i","","")}})});var qX=S(()=>{"use strict";var eVe=V(),tVe=jn(),rVe=Un();eVe({target:"String",proto:!0,forced:rVe("link")},{link:function(t){return tVe(this,"a","href",t)}})});var IX=S(()=>{"use strict";var iVe=V(),nVe=jn(),aVe=Un();iVe({target:"String",proto:!0,forced:aVe("small")},{small:function(){return nVe(this,"small","","")}})});var EX=S(()=>{"use strict";var oVe=V(),sVe=jn(),uVe=Un();oVe({target:"String",proto:!0,forced:uVe("strike")},{strike:function(){return sVe(this,"strike","","")}})});var TX=S(()=>{"use strict";var lVe=V(),cVe=jn(),hVe=Un();lVe({target:"String",proto:!0,forced:hVe("sub")},{sub:function(){return cVe(this,"sub","","")}})});var AX=S(()=>{"use strict";var fVe=V(),dVe=jn(),pVe=Un();fVe({target:"String",proto:!0,forced:pVe("sup")},{sup:function(){return dVe(this,"sup","","")}})});var x1=S((WIt,CX)=>{"use strict";var PX=$e(),DC=Oe(),mVe=wv(),vVe=Ot().NATIVE_ARRAY_BUFFER_VIEWS,gVe=PX.ArrayBuffer,Wc=PX.Int8Array;CX.exports=!vVe||!DC(function(){Wc(1)})||!DC(function(){new Wc(-1)})||!mVe(function(e){new Wc,new Wc(null),new Wc(1.5),new Wc(e)},!0)||DC(function(){return new Wc(new gVe(2),1,void 0).length!==1})});var LC=S((ZIt,MX)=>{"use strict";var yVe=Jf(),_Ve=RangeError;MX.exports=function(e,t){var n=yVe(e);if(n%t)throw new _Ve("Wrong offset");return n}});var zC=S((KIt,OX)=>{"use strict";var xVe=Math.round;OX.exports=function(e){var t=xVe(e);return t<0?0:t>255?255:t&255}});var b1=S((XIt,RX)=>{"use strict";var bVe=Ln();RX.exports=function(e){var t=bVe(e);return t==="BigInt64Array"||t==="BigUint64Array"}});var sg=S((YIt,kX)=>{"use strict";var wVe=nv(),SVe=TypeError;kX.exports=function(e){var t=wVe(e,"number");if(typeof t=="number")throw new SVe("Can't convert number to bigint");return BigInt(t)}});var FC=S((JIt,DX)=>{"use strict";var qVe=or(),IVe=Ze(),EVe=Hv(),TVe=kt(),AVe=Nt(),PVe=ul(),CVe=Uo(),MVe=ox(),OVe=b1(),RVe=Ot().aTypedArrayConstructor,kVe=sg();DX.exports=function(t){var n=EVe(this),u=TVe(t),l=arguments.length,o=l>1?arguments[1]:void 0,_=o!==void 0,b=CVe(u),E,T,C,z,$,oe,xe,_e;if(b&&!MVe(b))for(xe=PVe(u,b),_e=xe.next,u=[];!(oe=IVe(_e,xe)).done;)u.push(oe.value);for(_&&l>2&&(o=qVe(o,arguments[2])),T=AVe(u),C=new(RVe(n))(T),z=OVe(C),E=0;T>E;E++)$=_?o(u[E],E):u[E],C[E]=z?kVe($):+$;return C}});var Zo=S((QIt,GC)=>{"use strict";var LX=V(),WX=$e(),zX=Ze(),DVe=ht(),LVe=x1(),hg=Ot(),ZX=Mv(),FX=rn(),zVe=kn(),ug=ei(),FVe=Hx(),NVe=Dn(),NX=Gf(),NC=LC(),BVe=zC(),KX=Bo(),lg=Ct(),jVe=Ln(),UC=wt(),UVe=Ps(),$Ve=jr(),VVe=Ri(),w1=ka(),GVe=nl().f,BX=FC(),HVe=Ur().forEach,WVe=fl(),ZVe=yr(),XX=dr(),YX=yi(),jX=Ls(),HC=Yt(),KVe=sl(),$C=HC.get,XVe=HC.set,YVe=HC.enforce,JX=XX.f,JVe=YX.f,BC=WX.RangeError,QX=ZX.ArrayBuffer,QVe=QX.prototype,e8e=ZX.DataView,S1=hg.NATIVE_ARRAY_BUFFER_VIEWS,UX=hg.TYPED_ARRAY_TAG,$X=hg.TypedArray,cg=hg.TypedArrayPrototype,VC=hg.isTypedArray,q1="BYTES_PER_ELEMENT",jC="Wrong length",I1=function(e,t){ZVe(e,t,{configurable:!0,get:function(){return $C(this)[t]}})},VX=function(e){var t;return VVe(QVe,e)||(t=jVe(e))==="ArrayBuffer"||t==="SharedArrayBuffer"},eY=function(e,t){return VC(e)&&!UVe(t)&&t in e&&FVe(+t)&&t>=0},GX=function(t,n){return n=KX(n),eY(t,n)?zVe(2,t[n]):JVe(t,n)},HX=function(t,n,u){return n=KX(n),eY(t,n)&&UC(u)&&lg(u,"value")&&!lg(u,"get")&&!lg(u,"set")&&!u.configurable&&(!lg(u,"writable")||u.writable)&&(!lg(u,"enumerable")||u.enumerable)?(t[n]=u.value,t):JX(t,n,u)};DVe?(S1||(YX.f=GX,XX.f=HX,I1(cg,"buffer"),I1(cg,"byteOffset"),I1(cg,"byteLength"),I1(cg,"length")),LX({target:"Object",stat:!0,forced:!S1},{getOwnPropertyDescriptor:GX,defineProperty:HX}),GC.exports=function(e,t,n){var u=e.match(/\d+/)[0]/8,l=e+(n?"Clamped":"")+"Array",o="get"+e,_="set"+e,b=WX[l],E=b,T=E&&E.prototype,C={},z=function(_e,X){var K=$C(_e);return K.view[o](X*u+K.byteOffset,!0)},$=function(_e,X,K){var re=$C(_e);re.view[_](X*u+re.byteOffset,n?BVe(K):K,!0)},oe=function(_e,X){JX(_e,X,{get:function(){return z(this,X)},set:function(K){return $(this,X,K)},enumerable:!0})};S1?LVe&&(E=t(function(_e,X,K,re){return FX(_e,T),KVe(function(){return UC(X)?VX(X)?re!==void 0?new b(X,NC(K,u),re):K!==void 0?new b(X,NC(K,u)):new b(X):VC(X)?jX(E,X):zX(BX,E,X):new b(NX(X))}(),_e,E)}),w1&&w1(E,$X),HVe(GVe(b),function(_e){_e in E||ug(E,_e,b[_e])}),E.prototype=T):(E=t(function(_e,X,K,re){FX(_e,T);var ge=0,be=0,et,Le,nt;if(!UC(X))nt=NX(X),Le=nt*u,et=new QX(Le);else if(VX(X)){et=X,be=NC(K,u);var gt=X.byteLength;if(re===void 0){if(gt%u)throw new BC(jC);if(Le=gt-be,Le<0)throw new BC(jC)}else if(Le=NVe(re)*u,Le+be>gt)throw new BC(jC);nt=Le/u}else return VC(X)?jX(E,X):zX(BX,E,X);for(XVe(_e,{buffer:et,byteOffset:be,byteLength:Le,length:nt,view:new e8e(et)});ge<nt;)oe(_e,ge++)}),w1&&w1(E,$X),T=E.prototype=$Ve(cg)),T.constructor!==E&&ug(T,"constructor",E),YVe(T).TypedArrayConstructor=E,UX&&ug(T,UX,l);var xe=E!==b;C[l]=E,LX({global:!0,constructor:!0,forced:xe,sham:!S1},C),q1 in E||ug(E,q1,u),q1 in T||ug(T,q1,u),WVe(l)}):GC.exports=function(){}});var tY=S(()=>{"use strict";var t8e=Zo();t8e("Float32",function(e){return function(n,u,l){return e(this,n,u,l)}})});var rY=S(()=>{"use strict";var r8e=Zo();r8e("Float64",function(e){return function(n,u,l){return e(this,n,u,l)}})});var iY=S(()=>{"use strict";var i8e=Zo();i8e("Int8",function(e){return function(n,u,l){return e(this,n,u,l)}})});var nY=S(()=>{"use strict";var n8e=Zo();n8e("Int16",function(e){return function(n,u,l){return e(this,n,u,l)}})});var aY=S(()=>{"use strict";var a8e=Zo();a8e("Int32",function(e){return function(n,u,l){return e(this,n,u,l)}})});var oY=S(()=>{"use strict";var o8e=Zo();o8e("Uint8",function(e){return function(n,u,l){return e(this,n,u,l)}})});var sY=S(()=>{"use strict";var s8e=Zo();s8e("Uint8",function(e){return function(n,u,l){return e(this,n,u,l)}},!0)});var uY=S(()=>{"use strict";var u8e=Zo();u8e("Uint16",function(e){return function(n,u,l){return e(this,n,u,l)}})});var lY=S(()=>{"use strict";var l8e=Zo();l8e("Uint32",function(e){return function(n,u,l){return e(this,n,u,l)}})});var WC=S(()=>{"use strict";var cY=Ot(),c8e=Nt(),h8e=gr(),f8e=cY.aTypedArray,d8e=cY.exportTypedArrayMethod;d8e("at",function(t){var n=f8e(this),u=c8e(n),l=h8e(t),o=l>=0?l:u+l;return o<0||o>=u?void 0:n[o]})});var fY=S(()=>{"use strict";var p8e=Pe(),hY=Ot(),m8e=mT(),v8e=p8e(m8e),g8e=hY.aTypedArray,y8e=hY.exportTypedArrayMethod;y8e("copyWithin",function(t,n){return v8e(g8e(this),t,n,arguments.length>2?arguments[2]:void 0)})});var pY=S(()=>{"use strict";var dY=Ot(),_8e=Ur().every,x8e=dY.aTypedArray,b8e=dY.exportTypedArrayMethod;b8e("every",function(t){return _8e(x8e(this),t,arguments.length>1?arguments[1]:void 0)})});var vY=S(()=>{"use strict";var mY=Ot(),w8e=cx(),S8e=sg(),q8e=Ln(),I8e=Ze(),E8e=Pe(),T8e=Oe(),A8e=mY.aTypedArray,P8e=mY.exportTypedArrayMethod,C8e=E8e("".slice),M8e=T8e(function(){var e=0;return new Int8Array(2).fill({valueOf:function(){return e++}}),e!==1});P8e("fill",function(t){var n=arguments.length;A8e(this);var u=C8e(q8e(this),0,3)==="Big"?S8e(t):+t;return I8e(w8e,this,u,n>1?arguments[1]:void 0,n>2?arguments[2]:void 0)},M8e)});var E1=S((EEt,gY)=>{"use strict";var O8e=Ls(),R8e=Ot().getTypedArrayConstructor;gY.exports=function(e,t){return O8e(R8e(e),t)}});var _Y=S(()=>{"use strict";var yY=Ot(),k8e=Ur().filter,D8e=E1(),L8e=yY.aTypedArray,z8e=yY.exportTypedArrayMethod;z8e("filter",function(t){var n=k8e(L8e(this),t,arguments.length>1?arguments[1]:void 0);return D8e(this,n)})});var bY=S(()=>{"use strict";var xY=Ot(),F8e=Ur().find,N8e=xY.aTypedArray,B8e=xY.exportTypedArrayMethod;B8e("find",function(t){return F8e(N8e(this),t,arguments.length>1?arguments[1]:void 0)})});var SY=S(()=>{"use strict";var wY=Ot(),j8e=Ur().findIndex,U8e=wY.aTypedArray,$8e=wY.exportTypedArrayMethod;$8e("findIndex",function(t){return j8e(U8e(this),t,arguments.length>1?arguments[1]:void 0)})});var ZC=S(()=>{"use strict";var qY=Ot(),V8e=bv().findLast,G8e=qY.aTypedArray,H8e=qY.exportTypedArrayMethod;H8e("findLast",function(t){return V8e(G8e(this),t,arguments.length>1?arguments[1]:void 0)})});var KC=S(()=>{"use strict";var IY=Ot(),W8e=bv().findLastIndex,Z8e=IY.aTypedArray,K8e=IY.exportTypedArrayMethod;K8e("findLastIndex",function(t){return W8e(Z8e(this),t,arguments.length>1?arguments[1]:void 0)})});var TY=S(()=>{"use strict";var EY=Ot(),X8e=Ur().forEach,Y8e=EY.aTypedArray,J8e=EY.exportTypedArrayMethod;J8e("forEach",function(t){X8e(Y8e(this),t,arguments.length>1?arguments[1]:void 0)})});var AY=S(()=>{"use strict";var Q8e=x1(),eGe=Ot().exportTypedArrayStaticMethod,tGe=FC();eGe("from",tGe,Q8e)});var CY=S(()=>{"use strict";var PY=Ot(),rGe=zf().includes,iGe=PY.aTypedArray,nGe=PY.exportTypedArrayMethod;nGe("includes",function(t){return rGe(iGe(this),t,arguments.length>1?arguments[1]:void 0)})});var OY=S(()=>{"use strict";var MY=Ot(),aGe=zf().indexOf,oGe=MY.aTypedArray,sGe=MY.exportTypedArrayMethod;sGe("indexOf",function(t){return aGe(oGe(this),t,arguments.length>1?arguments[1]:void 0)})});var zY=S(()=>{"use strict";var uGe=$e(),lGe=Oe(),XC=Pe(),kY=Ot(),YC=Iv(),cGe=pt(),JC=cGe("iterator"),RY=uGe.Uint8Array,hGe=XC(YC.values),fGe=XC(YC.keys),dGe=XC(YC.entries),QC=kY.aTypedArray,T1=kY.exportTypedArrayMethod,yd=RY&&RY.prototype,A1=!lGe(function(){yd[JC].call([1])}),DY=!!yd&&yd.values&&yd[JC]===yd.values&&yd.values.name==="values",LY=function(){return hGe(QC(this))};T1("entries",function(){return dGe(QC(this))},A1);T1("keys",function(){return fGe(QC(this))},A1);T1("values",LY,A1||!DY,{name:"values"});T1(JC,LY,A1||!DY,{name:"values"})});var NY=S(()=>{"use strict";var FY=Ot(),pGe=Pe(),mGe=FY.aTypedArray,vGe=FY.exportTypedArrayMethod,gGe=pGe([].join);vGe("join",function(t){return gGe(mGe(this),t)})});var jY=S(()=>{"use strict";var BY=Ot(),yGe=tn(),_Ge=MT(),xGe=BY.aTypedArray,bGe=BY.exportTypedArrayMethod;bGe("lastIndexOf",function(t){var n=arguments.length;return yGe(_Ge,xGe(this),n>1?[t,arguments[1]]:[t])})});var UY=S(()=>{"use strict";var eM=Ot(),wGe=Ur().map,SGe=eM.aTypedArray,qGe=eM.getTypedArrayConstructor,IGe=eM.exportTypedArrayMethod;IGe("map",function(t){return wGe(SGe(this),t,arguments.length>1?arguments[1]:void 0,function(n,u){return new(qGe(n))(u)})})});var VY=S(()=>{"use strict";var $Y=Ot(),EGe=x1(),TGe=$Y.aTypedArrayConstructor,AGe=$Y.exportTypedArrayStaticMethod;AGe("of",function(){for(var t=0,n=arguments.length,u=new(TGe(this))(n);n>t;)u[t]=arguments[t++];return u},EGe)});var HY=S(()=>{"use strict";var GY=Ot(),PGe=Ev().left,CGe=GY.aTypedArray,MGe=GY.exportTypedArrayMethod;MGe("reduce",function(t){var n=arguments.length;return PGe(CGe(this),t,n,n>1?arguments[1]:void 0)})});var ZY=S(()=>{"use strict";var WY=Ot(),OGe=Ev().right,RGe=WY.aTypedArray,kGe=WY.exportTypedArrayMethod;kGe("reduceRight",function(t){var n=arguments.length;return OGe(RGe(this),t,n,n>1?arguments[1]:void 0)})});var XY=S(()=>{"use strict";var KY=Ot(),DGe=KY.aTypedArray,LGe=KY.exportTypedArrayMethod,zGe=Math.floor;LGe("reverse",function(){for(var t=this,n=DGe(t).length,u=zGe(n/2),l=0,o;l<u;)o=t[l],t[l++]=t[--n],t[n]=o;return t})});var rJ=S(()=>{"use strict";var JY=$e(),QY=Ze(),iM=Ot(),FGe=Nt(),NGe=LC(),BGe=kt(),eJ=Oe(),jGe=JY.RangeError,tM=JY.Int8Array,YY=tM&&tM.prototype,tJ=YY&&YY.set,UGe=iM.aTypedArray,$Ge=iM.exportTypedArrayMethod,rM=!eJ(function(){var e=new Uint8ClampedArray(2);return QY(tJ,e,{length:1,0:3},1),e[1]!==3}),VGe=rM&&iM.NATIVE_ARRAY_BUFFER_VIEWS&&eJ(function(){var e=new tM(2);return e.set(1),e.set("2",1),e[0]!==0||e[1]!==2});$Ge("set",function(t){UGe(this);var n=NGe(arguments.length>1?arguments[1]:void 0,1),u=BGe(t);if(rM)return QY(tJ,this,u,n);var l=this.length,o=FGe(u),_=0;if(o+n>l)throw new jGe("Wrong length");for(;_<o;)this[n+_]=u[_++]},!rM||VGe)});var iJ=S(()=>{"use strict";var nM=Ot(),GGe=Oe(),HGe=zn(),WGe=nM.aTypedArray,ZGe=nM.getTypedArrayConstructor,KGe=nM.exportTypedArrayMethod,XGe=GGe(function(){new Int8Array(1).slice()});KGe("slice",function(t,n){for(var u=HGe(WGe(this),t,n),l=ZGe(this),o=0,_=u.length,b=new l(_);_>o;)b[o]=u[o++];return b},XGe)});var aJ=S(()=>{"use strict";var nJ=Ot(),YGe=Ur().some,JGe=nJ.aTypedArray,QGe=nJ.exportTypedArrayMethod;QGe("some",function(t){return YGe(JGe(this),t,arguments.length>1?arguments[1]:void 0)})});var hJ=S(()=>{"use strict";var eHe=$e(),tHe=Ms(),aM=Oe(),rHe=_t(),iHe=yx(),cJ=Ot(),oJ=kT(),nHe=DT(),sJ=No(),uJ=_x(),aHe=cJ.aTypedArray,oHe=cJ.exportTypedArrayMethod,fg=eHe.Uint16Array,_d=fg&&tHe(fg.prototype.sort),sHe=!!_d&&!(aM(function(){_d(new fg(2),null)})&&aM(function(){_d(new fg(2),{})})),lJ=!!_d&&!aM(function(){if(sJ)return sJ<74;if(oJ)return oJ<67;if(nHe)return!0;if(uJ)return uJ<602;var e=new fg(516),t=Array(516),n,u;for(n=0;n<516;n++)u=n%4,e[n]=515-n,t[n]=n-2*u+3;for(_d(e,function(l,o){return(l/4|0)-(o/4|0)}),n=0;n<516;n++)if(e[n]!==t[n])return!0}),uHe=function(e){return function(t,n){return e!==void 0?+e(t,n)||0:n!==n?-1:t!==t?1:t===0&&n===0?1/t>0&&1/n<0?1:-1:t>n}};oHe("sort",function(t){return t!==void 0&&rHe(t),lJ?_d(this,t):iHe(aHe(this),uHe(t))},!lJ||sHe)});var dJ=S(()=>{"use strict";var oM=Ot(),lHe=Dn(),fJ=lo(),cHe=oM.aTypedArray,hHe=oM.getTypedArrayConstructor,fHe=oM.exportTypedArrayMethod;fHe("subarray",function(t,n){var u=cHe(this),l=u.length,o=fJ(t,l),_=hHe(u);return new _(u.buffer,u.byteOffset+o*u.BYTES_PER_ELEMENT,lHe((n===void 0?l:fJ(n,l))-o))})});var yJ=S(()=>{"use strict";var dHe=$e(),pHe=tn(),vJ=Ot(),sM=Oe(),pJ=zn(),P1=dHe.Int8Array,mJ=vJ.aTypedArray,mHe=vJ.exportTypedArrayMethod,gJ=[].toLocaleString,vHe=!!P1&&sM(function(){gJ.call(new P1(1))}),gHe=sM(function(){return[1,2].toLocaleString()!==new P1([1,2]).toLocaleString()})||!sM(function(){P1.prototype.toLocaleString.call([1,2])});mHe("toLocaleString",function(){return pHe(gJ,vHe?pJ(mJ(this)):mJ(this),pJ(arguments))},gHe)});var lM=S(()=>{"use strict";var yHe=FT(),uM=Ot(),_He=uM.aTypedArray,xHe=uM.exportTypedArrayMethod,bHe=uM.getTypedArrayConstructor;xHe("toReversed",function(){return yHe(_He(this),bHe(this))})});var cM=S(()=>{"use strict";var C1=Ot(),wHe=Pe(),SHe=_t(),qHe=Ls(),IHe=C1.aTypedArray,EHe=C1.getTypedArrayConstructor,THe=C1.exportTypedArrayMethod,AHe=wHe(C1.TypedArrayPrototype.sort);THe("toSorted",function(t){t!==void 0&&SHe(t);var n=IHe(this),u=qHe(EHe(n),n);return AHe(u,t)})});var xJ=S(()=>{"use strict";var PHe=Ot().exportTypedArrayMethod,CHe=Oe(),MHe=$e(),OHe=Pe(),_J=MHe.Uint8Array,RHe=_J&&_J.prototype||{},M1=[].toString,kHe=OHe([].join);CHe(function(){M1.call({})})&&(M1=function(){return kHe(this)});var DHe=RHe.toString!==M1;PHe("toString",M1,DHe)});var fM=S(()=>{"use strict";var LHe=$T(),hM=Ot(),zHe=b1(),FHe=gr(),NHe=sg(),BHe=hM.aTypedArray,jHe=hM.getTypedArrayConstructor,UHe=hM.exportTypedArrayMethod,$He=!!function(){try{new Int8Array(1).with(2,{valueOf:function(){throw 8}})}catch(e){return e===8}}();UHe("with",function(e,t){var n=BHe(this),u=FHe(e),l=zHe(n)?NHe(t):+t;return LHe(n,jHe(n),u,l)},!$He)});var IJ=S(()=>{"use strict";var VHe=V(),dM=Pe(),GHe=qt(),bJ=String.fromCharCode,wJ=dM("".charAt),SJ=dM(/./.exec),qJ=dM("".slice),HHe=/^[\da-f]{2}$/i,WHe=/^[\da-f]{4}$/i;VHe({global:!0},{unescape:function(t){for(var n=GHe(t),u="",l=n.length,o=0,_,b;o<l;){if(_=wJ(n,o++),_==="%"){if(wJ(n,o)==="u"){if(b=qJ(n,o+1,o+5),SJ(WHe,b)){u+=bJ(parseInt(b,16)),o+=5;continue}}else if(b=qJ(n,o,o+2),SJ(HHe,b)){u+=bJ(parseInt(b,16)),o+=2;continue}}u+=_}return u}})});var vM=S((PTt,MJ)=>{"use strict";var ZHe=Pe(),EJ=za(),O1=_l().getWeakData,KHe=rn(),XHe=He(),YHe=Jr(),pM=wt(),JHe=Mr(),AJ=Ur(),TJ=Ct(),PJ=Yt(),QHe=PJ.set,e9e=PJ.getterFor,t9e=AJ.find,r9e=AJ.findIndex,i9e=ZHe([].splice),n9e=0,R1=function(e){return e.frozen||(e.frozen=new CJ)},CJ=function(){this.entries=[]},mM=function(e,t){return t9e(e.entries,function(n){return n[0]===t})};CJ.prototype={get:function(e){var t=mM(this,e);if(t)return t[1]},has:function(e){return!!mM(this,e)},set:function(e,t){var n=mM(this,e);n?n[1]=t:this.entries.push([e,t])},delete:function(e){var t=r9e(this.entries,function(n){return n[0]===e});return~t&&i9e(this.entries,t,1),!!~t}};MJ.exports={getConstructor:function(e,t,n,u){var l=e(function(E,T){KHe(E,o),QHe(E,{type:t,id:n9e++,frozen:null}),YHe(T)||JHe(T,E[u],{that:E,AS_ENTRIES:n})}),o=l.prototype,_=e9e(t),b=function(E,T,C){var z=_(E),$=O1(XHe(T),!0);return $===!0?R1(z).set(T,C):$[z.id]=C,E};return EJ(o,{delete:function(E){var T=_(this);if(!pM(E))return!1;var C=O1(E);return C===!0?R1(T).delete(E):C&&TJ(C,T.id)&&delete C[T.id]},has:function(T){var C=_(this);if(!pM(T))return!1;var z=O1(T);return z===!0?R1(C).has(T):z&&TJ(z,C.id)}}),EJ(o,n?{get:function(T){var C=_(this);if(pM(T)){var z=O1(T);if(z===!0)return R1(C).get(T);if(z)return z[C.id]}},set:function(T,C){return b(this,T,C)}}:{add:function(T){return b(this,T,!0)}}),l}}});var NJ=S(()=>{"use strict";var a9e=js(),OJ=$e(),z1=Pe(),RJ=za(),o9e=_l(),s9e=Lv(),kJ=vM(),k1=wt(),D1=Yt().enforce,u9e=Oe(),l9e=gE(),mg=Object,c9e=Array.isArray,L1=mg.isExtensible,DJ=mg.isFrozen,h9e=mg.isSealed,LJ=mg.freeze,f9e=mg.seal,d9e=!OJ.ActiveXObject&&"ActiveXObject"in OJ,dg,zJ=function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},FJ=s9e("WeakMap",zJ,kJ),xd=FJ.prototype,F1=z1(xd.set),p9e=function(){return a9e&&u9e(function(){var e=LJ([]);return F1(new FJ,e,1),!DJ(e)})};l9e&&(d9e?(dg=kJ.getConstructor(zJ,"WeakMap",!0),o9e.enable(),gM=z1(xd.delete),pg=z1(xd.has),yM=z1(xd.get),RJ(xd,{delete:function(e){if(k1(e)&&!L1(e)){var t=D1(this);return t.frozen||(t.frozen=new dg),gM(this,e)||t.frozen.delete(e)}return gM(this,e)},has:function(t){if(k1(t)&&!L1(t)){var n=D1(this);return n.frozen||(n.frozen=new dg),pg(this,t)||n.frozen.has(t)}return pg(this,t)},get:function(t){if(k1(t)&&!L1(t)){var n=D1(this);return n.frozen||(n.frozen=new dg),pg(this,t)?yM(this,t):n.frozen.get(t)}return yM(this,t)},set:function(t,n){if(k1(t)&&!L1(t)){var u=D1(this);u.frozen||(u.frozen=new dg),pg(this,t)?F1(this,t,n):u.frozen.set(t,n)}else F1(this,t,n);return this}})):p9e()&&RJ(xd,{set:function(t,n){var u;return c9e(t)&&(DJ(t)?u=LJ:h9e(t)&&(u=f9e)),F1(this,t,n),u&&u(t),this}}));var gM,pg,yM});var N1=S(()=>{"use strict";NJ()});var BJ=S(()=>{"use strict";var m9e=Lv(),v9e=vM();m9e("WeakSet",function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}},v9e)});var jJ=S(()=>{"use strict";BJ()});var UJ=S(()=>{"use strict";lT()});var GJ=S(()=>{"use strict";var g9e=V(),y9e=$e(),_9e=Ri(),$J=ti(),j1=ka(),x9e=Ac(),VJ=jr(),B1=ei(),_M=kn(),b9e=rx(),w9e=Rc(),S9e=pt(),q9e=Oe(),I9e=Rt(),bd=y9e.SuppressedError,E9e=S9e("toStringTag"),U1=Error,T9e=!!bd&&bd.length!==3,A9e=!!bd&&q9e(function(){return new bd(1,2,3,{cause:4}).cause===4}),$1=T9e||A9e,Zc=function(t,n,u){var l=_9e(vg,this),o;return j1?o=$1&&(!l||$J(this)===vg)?new bd:j1(new U1,l?$J(this):vg):(o=l?this:VJ(vg),B1(o,E9e,"Error")),u!==void 0&&B1(o,"message",w9e(u)),b9e(o,Zc,o.stack,1),B1(o,"error",t),B1(o,"suppressed",n),o};j1?j1(Zc,U1):x9e(Zc,U1,{name:!0});var vg=Zc.prototype=$1?bd.prototype:VJ(U1.prototype,{constructor:_M(1,Zc),message:_M(1,""),name:_M(1,"SuppressedError")});$1&&!I9e&&(vg.constructor=Zc);g9e({global:!0,constructor:!0,arity:3,forced:$1},{SuppressedError:Zc})});var wd=S((UTt,QJ)=>{"use strict";var XJ=$e(),YJ=iv(),JJ=Tt(),P9e=jr(),V1=ti(),C9e=tr(),M9e=pt(),O9e=Rt(),HJ="USE_FUNCTION_CONSTRUCTOR",WJ=M9e("asyncIterator"),ZJ=XJ.AsyncIterator,KJ=YJ.AsyncIteratorPrototype,Ko,xM;if(KJ)Ko=KJ;else if(JJ(ZJ))Ko=ZJ.prototype;else if(YJ[HJ]||XJ[HJ])try{xM=V1(V1(V1(Function("return async function*(){}()")()))),V1(xM)===Object.prototype&&(Ko=xM)}catch(e){}Ko?O9e&&(Ko=P9e(Ko)):Ko={};JJ(Ko[WJ])||C9e(Ko,WJ,function(){return this});QJ.exports=Ko});var gg=S(($Tt,uQ)=>{"use strict";var eQ=Ze(),tQ=He(),R9e=jr(),k9e=Br(),D9e=za(),nQ=Yt(),L9e=xt(),z9e=wd(),aQ=xi(),bM=L9e("Promise"),oQ="AsyncFromSyncIterator",F9e=nQ.set,rQ=nQ.getterFor(oQ),iQ=function(e,t,n){var u=e.done;bM.resolve(e.value).then(function(l){t(aQ(l,u))},n)},sQ=function(t){t.type=oQ,F9e(this,t)};sQ.prototype=D9e(R9e(z9e),{next:function(){var t=rQ(this);return new bM(function(n,u){var l=tQ(eQ(t.next,t.iterator));iQ(l,n,u)})},return:function(){var e=rQ(this).iterator;return new bM(function(t,n){var u=k9e(e,"return");if(u===void 0)return t(aQ(void 0,!0));var l=tQ(eQ(u,e));iQ(l,t,n)})}});uQ.exports=sQ});var cQ=S((VTt,lQ)=>{"use strict";var N9e=Ze(),B9e=gg(),j9e=He(),U9e=ul(),$9e=Ir(),V9e=Br(),G9e=pt(),H9e=G9e("asyncIterator");lQ.exports=function(e,t){var n=arguments.length<2?V9e(e,H9e):t;return n?j9e(N9e(n,e)):new B9e($9e(U9e(e)))}});var Sd=S((GTt,hQ)=>{"use strict";var W9e=Ze(),Z9e=xt(),K9e=Br();hQ.exports=function(e,t,n,u){try{var l=K9e(e,"return");if(l)return Z9e("Promise").resolve(W9e(l,e)).then(function(){t(n)},function(o){u(o)})}catch(o){return u(o)}t(n)}});var Kc=S((HTt,fQ)=>{"use strict";var X9e=Ze(),Y9e=_t(),wM=He(),J9e=wt(),Q9e=ll(),eWe=xt(),tWe=Ir(),SM=Sd(),yg=function(e){var t=e===0,n=e===1,u=e===2,l=e===3;return function(o,_,b){wM(o);var E=_!==void 0;(E||!t)&&Y9e(_);var T=tWe(o),C=eWe("Promise"),z=T.iterator,$=T.next,oe=0;return new C(function(xe,_e){var X=function(re){SM(z,_e,re,_e)},K=function(){try{if(E)try{Q9e(oe)}catch(re){X(re)}C.resolve(wM(X9e($,z))).then(function(re){try{if(wM(re).done)t?(b.length=oe,xe(b)):xe(l?!1:u||void 0);else{var ge=re.value;try{if(E){var be=_(ge,oe),et=function(Le){if(n)K();else if(u)Le?K():SM(z,xe,!1,_e);else if(t)try{b[oe++]=Le,K()}catch(nt){X(nt)}else Le?SM(z,xe,l||ge,_e):K()};J9e(be)?C.resolve(be).then(et,X):et(be)}else b[oe++]=ge,K()}catch(Le){X(Le)}}}catch(Le){_e(Le)}},_e)}catch(re){_e(re)}};K()})}};fQ.exports={toArray:yg(0),forEach:yg(1),every:yg(2),some:yg(3),find:yg(4)}});var qM=S((WTt,vQ)=>{"use strict";var rWe=or(),dQ=Pe(),iWe=kt(),nWe=ho(),aWe=cQ(),oWe=ul(),sWe=Ir(),uWe=Uo(),lWe=Br(),cWe=xt(),hWe=BT(),fWe=pt(),dWe=gg(),pWe=Kc().toArray,mWe=fWe("asyncIterator"),pQ=dQ(hWe("Array","values")),vWe=dQ(pQ([]).next),gWe=function(){return new mQ(this)},mQ=function(e){this.iterator=pQ(e)};mQ.prototype.next=function(){return vWe(this.iterator)};vQ.exports=function(t){var n=this,u=arguments.length,l=u>1?arguments[1]:void 0,o=u>2?arguments[2]:void 0;return new(cWe("Promise"))(function(_){var b=iWe(t);l!==void 0&&(l=rWe(l,o));var E=lWe(b,mWe),T=E?void 0:uWe(b)||gWe,C=nWe(n)?new n:[],z=E?aWe(b,E):new dWe(sWe(oWe(b,T)));_(pWe(z,l,C))})}});var yQ=S(()=>{"use strict";var yWe=V(),_We=qM(),xWe=Oe(),gQ=Array.fromAsync,bWe=!gQ||xWe(function(){var e=0;return gQ.call(function(){return e++,[]},{length:0}),e!==1});yWe({target:"Array",stat:!0,forced:bWe},{fromAsync:_We})});var _Q=S(()=>{"use strict";dT()});var xQ=S(()=>{"use strict";var wWe=V(),SWe=Ur().filterReject,qWe=Or();wWe({target:"Array",proto:!0,forced:!0},{filterOut:function(t){return SWe(this,t,arguments.length>1?arguments[1]:void 0)}});qWe("filterOut")});var bQ=S(()=>{"use strict";var IWe=V(),EWe=Ur().filterReject,TWe=Or();IWe({target:"Array",proto:!0,forced:!0},{filterReject:function(t){return EWe(this,t,arguments.length>1?arguments[1]:void 0)}});TWe("filterReject")});var wQ=S(()=>{"use strict";yT()});var SQ=S(()=>{"use strict";_T()});var G1=S((o2t,qQ)=>{"use strict";var AWe=or(),PWe=Pe(),CWe=As(),MWe=kt(),OWe=Bo(),RWe=Nt(),kWe=jr(),DWe=Ls(),LWe=Array,zWe=PWe([].push);qQ.exports=function(e,t,n,u){for(var l=MWe(e),o=CWe(l),_=AWe(t,n),b=kWe(null),E=RWe(o),T=0,C,z,$;E>T;T++)$=o[T],z=OWe(_($,T,l)),z in b?zWe(b[z],$):b[z]=[$];if(u&&(C=u(l),C!==LWe))for(z in b)b[z]=DWe(C,b[z]);return b}});var IQ=S(()=>{"use strict";var FWe=V(),NWe=G1(),BWe=Or();FWe({target:"Array",proto:!0},{group:function(t){var n=arguments.length>1?arguments[1]:void 0;return NWe(this,t,n)}});BWe("group")});var EQ=S(()=>{"use strict";var jWe=V(),UWe=G1(),$We=La(),VWe=Or();jWe({target:"Array",proto:!0,forced:!$We("groupBy")},{groupBy:function(t){var n=arguments.length>1?arguments[1]:void 0;return UWe(this,t,n)}});VWe("groupBy")});var IM=S((h2t,TQ)=>{"use strict";var GWe=or(),HWe=Pe(),WWe=As(),ZWe=kt(),KWe=Nt(),H1=si(),XWe=H1.Map,YWe=H1.get,JWe=H1.has,QWe=H1.set,e7e=HWe([].push);TQ.exports=function(t){for(var n=ZWe(this),u=WWe(n),l=GWe(t,arguments.length>1?arguments[1]:void 0),o=new XWe,_=KWe(u),b=0,E,T;_>b;b++)T=u[b],E=l(T,b,n),JWe(o,E)?e7e(YWe(o,E),T):QWe(o,E,[T]);return o}});var AQ=S(()=>{"use strict";var t7e=V(),r7e=La(),i7e=Or(),n7e=IM(),a7e=Rt();t7e({target:"Array",proto:!0,name:"groupToMap",forced:a7e||!r7e("groupByToMap")},{groupByToMap:n7e});i7e("groupByToMap")});var PQ=S(()=>{"use strict";var o7e=V(),s7e=Or(),u7e=IM(),l7e=Rt();o7e({target:"Array",proto:!0,forced:l7e},{groupToMap:u7e});s7e("groupToMap")});var OQ=S(()=>{"use strict";var c7e=V(),h7e=co(),CQ=Object.isFrozen,MQ=function(e,t){if(!CQ||!h7e(e)||!CQ(e))return!1;for(var n=0,u=e.length,l;n<u;)if(l=e[n++],!(typeof l=="string"||t&&l===void 0))return!1;return u!==0};c7e({target:"Array",stat:!0,sham:!0,forced:!0},{isTemplateObject:function(t){if(!MQ(t,!0))return!1;var n=t.raw;return n.length===t.length&&MQ(n,!1)}})});var RQ=S(()=>{"use strict";var f7e=ht(),d7e=Or(),p7e=kt(),m7e=Nt(),v7e=yr();f7e&&(v7e(Array.prototype,"lastIndex",{configurable:!0,get:function(){var t=p7e(this),n=m7e(t);return n===0?0:n-1}}),d7e("lastIndex"))});var LQ=S(()=>{"use strict";var g7e=ht(),y7e=Or(),kQ=kt(),DQ=Nt(),_7e=yr();g7e&&(_7e(Array.prototype,"lastItem",{configurable:!0,get:function(){var t=kQ(this),n=DQ(t);return n===0?void 0:t[n-1]},set:function(t){var n=kQ(this),u=DQ(n);return n[u===0?0:u-1]=t}}),y7e("lastItem"))});var zQ=S(()=>{"use strict";NT()});var FQ=S(()=>{"use strict";jT()});var NQ=S(()=>{"use strict";UT()});var Fa=S((A2t,VQ)=>{"use strict";var BQ=Pe(),x7e=$s(),jQ=si(),b7e=jQ.Map,UQ=jQ.proto,w7e=BQ(UQ.forEach),$Q=BQ(UQ.entries),S7e=$Q(new b7e).next;VQ.exports=function(e,t,n){return n?x7e({iterator:$Q(e),next:S7e},function(u){return t(u[1],u[0])}):w7e(e,t)}});var W1=S((P2t,GQ)=>{"use strict";var q7e=Pe(),I7e=_t(),E7e=Jr(),T7e=Nt(),A7e=kt(),EM=si(),P7e=Fa(),C7e=EM.Map,M7e=EM.has,O7e=EM.set,R7e=q7e([].push);GQ.exports=function(t){var n=A7e(this),u=T7e(n),l=[],o=new C7e,_=E7e(t)?function(C){return C}:I7e(t),b,E,T;for(b=0;b<u;b++)E=n[b],T=_(E),M7e(o,T)||O7e(o,T,E);return P7e(o,function(C){R7e(l,C)}),l}});var HQ=S(()=>{"use strict";var k7e=V(),D7e=Or(),L7e=W1();k7e({target:"Array",proto:!0,forced:!0},{uniqueBy:L7e});D7e("uniqueBy")});var WQ=S(()=>{"use strict";VT()});var ZQ=S(()=>{"use strict";h2()});var KQ=S(()=>{"use strict";E2()});var XQ=S(()=>{"use strict";T2()});var AM=S((B2t,tee)=>{"use strict";var z7e=Ze(),F7e=Pe(),N7e=or(),B7e=He(),j7e=_t(),QQ=Jr(),TM=Br(),eee=pt(),U7e=eee("asyncDispose"),YQ=eee("dispose"),$7e=F7e([].push),V7e=function(e,t){if(t==="async-dispose"){var n=TM(e,U7e);return n!==void 0||(n=TM(e,YQ),n===void 0)?n:function(){z7e(n,this)}}return TM(e,YQ)},JQ=function(e,t,n){return arguments.length<3&&!QQ(e)&&(n=j7e(V7e(B7e(e),t))),n===void 0?function(){}:N7e(n,e)};tee.exports=function(e,t,n,u){var l;if(arguments.length<4){if(QQ(t)&&n==="sync-dispose")return;l=JQ(t,n)}else l=JQ(void 0,n,u);$7e(e.stack,l)}});var uee=S(()=>{"use strict";var G7e=V(),K1=ht(),nee=xt(),ree=_t(),H7e=rn(),aee=tr(),W7e=za(),Z7e=yr(),oee=pt(),see=Yt(),PM=AM(),iee=nee("Promise"),K7e=nee("SuppressedError"),X7e=ReferenceError,Y7e=oee("asyncDispose"),J7e=oee("toStringTag"),Y1="AsyncDisposableStack",Q7e=see.set,X1=see.getterFor(Y1),CM="async-dispose",_g="disposed",eZe="pending",Z1=function(e){var t=X1(e);if(t.state===_g)throw new X7e(Y1+" already disposed");return t},MM=function(){Q7e(H7e(this,qd),{type:Y1,state:eZe,stack:[]}),K1||(this.disposed=!1)},qd=MM.prototype;W7e(qd,{disposeAsync:function(){var t=this;return new iee(function(n,u){var l=X1(t);if(l.state===_g)return n(void 0);l.state=_g,K1||(t.disposed=!0);var o=l.stack,_=o.length,b=!1,E,T=function(z){b?E=new K7e(z,E):(b=!0,E=z),C()},C=function(){if(_){var z=o[--_];o[_]=null;try{iee.resolve(z()).then(C,T)}catch($){T($)}}else l.stack=null,b?u(E):n(void 0)};C()})},use:function(t){return PM(Z1(this),t,CM),t},adopt:function(t,n){var u=Z1(this);return ree(n),PM(u,void 0,CM,function(){return n(t)}),t},defer:function(t){var n=Z1(this);ree(t),PM(n,void 0,CM,t)},move:function(){var t=Z1(this),n=new MM;return X1(n).stack=t.stack,t.stack=[],t.state=_g,K1||(this.disposed=!0),n}});K1&&Z7e(qd,"disposed",{configurable:!0,get:function(){return X1(this).state===_g}});aee(qd,Y7e,qd.disposeAsync,{name:"disposeAsync"});aee(qd,J7e,Y1,{nonWritable:!0});G7e({global:!0,constructor:!0},{AsyncDisposableStack:MM})});var dee=S(()=>{"use strict";var tZe=V(),rZe=rn(),iZe=ti(),cee=ei(),hee=Ct(),nZe=pt(),El=wd(),fee=Rt(),lee=nZe("toStringTag"),aZe=TypeError,OM=function(){if(rZe(this,El),iZe(this)===El)throw new aZe("Abstract class AsyncIterator not directly constructable")};OM.prototype=El;hee(El,lee)||cee(El,lee,"AsyncIterator");(fee||!hee(El,"constructor")||El.constructor===Object)&&cee(El,"constructor",OM);tZe({global:!0,constructor:!0,forced:fee},{AsyncIterator:OM})});var Xc=S((G2t,bee)=>{"use strict";var oZe=Ze(),J1=xl(),pee=He(),sZe=jr(),uZe=ei(),lZe=za(),cZe=pt(),vee=Yt(),hZe=xt(),fZe=Br(),dZe=wd(),RM=xi(),mee=ks(),Xo=hZe("Promise"),pZe=cZe("toStringTag"),gee="AsyncIteratorHelper",yee="WrapForValidAsyncIterator",mZe=vee.set,_ee=function(e){var t=!e,n=vee.getterFor(e?yee:gee),u=function(l){var o=J1(function(){return n(l)}),_=o.error,b=o.value;return _||t&&b.done?{exit:!0,value:_?Xo.reject(b):Xo.resolve(RM(void 0,!0))}:{exit:!1,value:b}};return lZe(sZe(dZe),{next:function(){var o=u(this),_=o.value;if(o.exit)return _;var b=J1(function(){return pee(_.nextHandler(Xo))}),E=b.error,T=b.value;return E&&(_.done=!0),E?Xo.reject(T):Xo.resolve(T)},return:function(){var l=u(this),o=l.value;if(l.exit)return o;o.done=!0;var _=o.iterator,b,E,T=J1(function(){if(o.inner)try{mee(o.inner.iterator,"normal")}catch(C){return mee(_,"throw",C)}return fZe(_,"return")});return b=E=T.value,T.error?Xo.reject(E):b===void 0?Xo.resolve(RM(void 0,!0)):(T=J1(function(){return oZe(b,_)}),E=T.value,T.error?Xo.reject(E):e?Xo.resolve(E):Xo.resolve(E).then(function(C){return pee(C),RM(void 0,!0)}))}})},vZe=_ee(!0),xee=_ee(!1);uZe(xee,pZe,"Async Iterator Helper");bee.exports=function(e,t){var n=function(l,o){o?(o.iterator=l.iterator,o.next=l.next):o=l,o.type=t?yee:gee,o.nextHandler=e,o.counter=0,o.done=!1,mZe(this,o)};return n.prototype=t?vZe:xee,n}});var DM=S((H2t,See)=>{"use strict";var gZe=Ze(),yZe=_t(),kM=He(),_Ze=wt(),xZe=Ir(),bZe=Xc(),wee=xi(),wZe=Sd(),SZe=bZe(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(l,o){var _=function(E){t.done=!0,o(E)},b=function(E){wZe(n,_,E,_)};e.resolve(kM(gZe(t.next,n))).then(function(E){try{if(kM(E).done)t.done=!0,l(wee(void 0,!0));else{var T=E.value;try{var C=u(T,t.counter++),z=function($){l(wee($,!1))};_Ze(C)?e.resolve(C).then(z,b):z(C)}catch($){b($)}}}catch($){_($)}},_)})});See.exports=function(t){return kM(this),yZe(t),new SZe(xZe(this),{mapper:t})}});var LM=S((W2t,qee)=>{"use strict";var qZe=Ze(),IZe=DM(),EZe=function(e,t){return[t,e]};qee.exports=function(){return qZe(IZe,this,EZe)}});var Iee=S(()=>{"use strict";var TZe=V(),AZe=LM();TZe({target:"AsyncIterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:AZe})});var Pee=S(()=>{"use strict";var PZe=Ze(),CZe=tr(),MZe=xt(),OZe=Br(),RZe=Ct(),kZe=pt(),Eee=wd(),Tee=kZe("asyncDispose"),Aee=MZe("Promise");RZe(Eee,Tee)||CZe(Eee,Tee,function(){var e=this;return new Aee(function(t,n){var u=OZe(e,"return");u?Aee.resolve(PZe(u,e)).then(function(){t(void 0)},n):t(void 0)})})});var Mee=S(()=>{"use strict";var DZe=V(),LZe=Ze(),zM=He(),zZe=Ir(),FZe=Dv(),NZe=Jf(),BZe=Xc(),Cee=xi(),jZe=Rt(),UZe=BZe(function(e){var t=this;return new e(function(n,u){var l=function(_){t.done=!0,u(_)},o=function(){try{e.resolve(zM(LZe(t.next,t.iterator))).then(function(_){try{zM(_).done?(t.done=!0,n(Cee(void 0,!0))):t.remaining?(t.remaining--,o()):n(Cee(_.value,!1))}catch(b){l(b)}},l)}catch(_){l(_)}};o()})});DZe({target:"AsyncIterator",proto:!0,real:!0,forced:jZe},{drop:function(t){zM(this);var n=NZe(FZe(+t));return new UZe(zZe(this),{remaining:n})}})});var Oee=S(()=>{"use strict";var $Ze=V(),VZe=Kc().every;$Ze({target:"AsyncIterator",proto:!0,real:!0},{every:function(t){return VZe(this,t)}})});var kee=S(()=>{"use strict";var GZe=V(),HZe=Ze(),WZe=_t(),FM=He(),ZZe=wt(),KZe=Ir(),XZe=Xc(),Ree=xi(),YZe=Sd(),JZe=Rt(),QZe=XZe(function(e){var t=this,n=t.iterator,u=t.predicate;return new e(function(l,o){var _=function(T){t.done=!0,o(T)},b=function(T){YZe(n,_,T,_)},E=function(){try{e.resolve(FM(HZe(t.next,n))).then(function(T){try{if(FM(T).done)t.done=!0,l(Ree(void 0,!0));else{var C=T.value;try{var z=u(C,t.counter++),$=function(oe){oe?l(Ree(C,!1)):E()};ZZe(z)?e.resolve(z).then($,b):$(z)}catch(oe){b(oe)}}}catch(oe){_(oe)}},_)}catch(T){_(T)}};E()})});GZe({target:"AsyncIterator",proto:!0,real:!0,forced:JZe},{filter:function(t){return FM(this),WZe(t),new QZe(KZe(this),{predicate:t})}})});var Dee=S(()=>{"use strict";var eKe=V(),tKe=Kc().find;eKe({target:"AsyncIterator",proto:!0,real:!0},{find:function(t){return tKe(this,t)}})});var NM=S((oAt,Fee)=>{"use strict";var rKe=Ze(),iKe=Tt(),Lee=He(),zee=Ir(),nKe=Uo(),aKe=Br(),oKe=pt(),sKe=gg(),uKe=oKe("asyncIterator");Fee.exports=function(e){var t=Lee(e),n=!0,u=aKe(t,uKe),l;return iKe(u)||(u=nKe(t),n=!1),u!==void 0?l=rKe(u,t):(l=t,n=!0),Lee(l),zee(n?l:new sKe(zee(l)))}});var jee=S(()=>{"use strict";var lKe=V(),Nee=Ze(),cKe=_t(),xg=He(),hKe=wt(),fKe=Ir(),dKe=Xc(),Bee=xi(),pKe=NM(),mKe=Sd(),vKe=Rt(),gKe=dKe(function(e){var t=this,n=t.iterator,u=t.mapper;return new e(function(l,o){var _=function(C){t.done=!0,o(C)},b=function(C){mKe(n,_,C,_)},E=function(){try{e.resolve(xg(Nee(t.next,n))).then(function(C){try{if(xg(C).done)t.done=!0,l(Bee(void 0,!0));else{var z=C.value;try{var $=u(z,t.counter++),oe=function(xe){try{t.inner=pKe(xe),T()}catch(_e){b(_e)}};hKe($)?e.resolve($).then(oe,b):oe($)}catch(xe){b(xe)}}}catch(xe){_(xe)}},_)}catch(C){_(C)}},T=function(){var C=t.inner;if(C)try{e.resolve(xg(Nee(C.next,C.iterator))).then(function(z){try{xg(z).done?(t.inner=null,E()):l(Bee(z.value,!1))}catch($){b($)}},b)}catch(z){b(z)}else E()};T()})});lKe({target:"AsyncIterator",proto:!0,real:!0,forced:vKe},{flatMap:function(t){return xg(this),cKe(t),new gKe(fKe(this),{mapper:t,inner:null})}})});var Uee=S(()=>{"use strict";var yKe=V(),_Ke=Kc().forEach;yKe({target:"AsyncIterator",proto:!0,real:!0},{forEach:function(t){return _Ke(this,t)}})});var BM=S((hAt,$ee)=>{"use strict";var xKe=Ze(),bKe=Xc();$ee.exports=bKe(function(){return xKe(this.next,this.iterator)},!0)});var Vee=S(()=>{"use strict";var wKe=V(),SKe=kt(),qKe=Ri(),IKe=NM(),EKe=wd(),TKe=BM(),AKe=Rt();wKe({target:"AsyncIterator",stat:!0,forced:AKe},{from:function(t){var n=IKe(typeof t=="string"?SKe(t):t);return qKe(EKe,n.iterator)?n.iterator:new TKe(n)}})});var Gee=S(()=>{"use strict";var PKe=V(),CKe=LM();PKe({target:"AsyncIterator",proto:!0,real:!0,forced:!0},{indexed:CKe})});var Hee=S(()=>{"use strict";var MKe=V(),OKe=DM(),RKe=Rt();MKe({target:"AsyncIterator",proto:!0,real:!0,forced:RKe},{map:OKe})});var Wee=S(()=>{"use strict";var kKe=V(),DKe=Ze(),LKe=_t(),jM=He(),zKe=wt(),FKe=xt(),NKe=Ir(),BKe=Sd(),UM=FKe("Promise"),jKe=TypeError;kKe({target:"AsyncIterator",proto:!0,real:!0},{reduce:function(t){jM(this),LKe(t);var n=NKe(this),u=n.iterator,l=n.next,o=arguments.length<2,_=o?void 0:arguments[1],b=0;return new UM(function(E,T){var C=function($){BKe(u,T,$,T)},z=function(){try{UM.resolve(jM(DKe(l,u))).then(function($){try{if(jM($).done)o?T(new jKe("Reduce of empty iterator with no initial value")):E(_);else{var oe=$.value;if(o)o=!1,_=oe,z();else try{var xe=t(_,oe,b),_e=function(X){_=X,z()};zKe(xe)?UM.resolve(xe).then(_e,C):_e(xe)}catch(X){C(X)}}b++}catch(X){T(X)}},T)}catch($){T($)}};z()})}})});var Zee=S(()=>{"use strict";var UKe=V(),$Ke=Kc().some;UKe({target:"AsyncIterator",proto:!0,real:!0},{some:function(t){return $Ke(this,t)}})});var Yee=S(()=>{"use strict";var VKe=V(),Kee=Ze(),Xee=He(),GKe=Ir(),HKe=Dv(),WKe=Jf(),ZKe=Xc(),$M=xi(),KKe=Rt(),XKe=ZKe(function(e){var t=this,n=t.iterator,u;if(!t.remaining--){var l=$M(void 0,!0);return t.done=!0,u=n.return,u!==void 0?e.resolve(Kee(u,n,void 0)).then(function(){return l}):l}return e.resolve(Kee(t.next,n)).then(function(o){return Xee(o).done?(t.done=!0,$M(void 0,!0)):$M(o.value,!1)}).then(null,function(o){throw t.done=!0,o})});VKe({target:"AsyncIterator",proto:!0,real:!0,forced:KKe},{take:function(t){Xee(this);var n=WKe(HKe(+t));return new XKe(GKe(this),{remaining:n})}})});var Jee=S(()=>{"use strict";var YKe=V(),JKe=Kc().toArray;YKe({target:"AsyncIterator",proto:!0,real:!0},{toArray:function(){return JKe(this,void 0,[])}})});var eb=S((EAt,nte)=>{"use strict";var ete=Yt(),QKe=cl(),VM=xi(),eXe=Jr(),tXe=wt(),rXe=yr(),tte=ht(),bg="Incorrect Iterator.range arguments",HM="NumericRangeIterator",iXe=ete.set,rte=ete.getterFor(HM),Qee=RangeError,GM=TypeError,ite=QKe(function(t,n,u,l,o,_){if(typeof t!=l||n!==1/0&&n!==-1/0&&typeof n!=l)throw new GM(bg);if(t===1/0||t===-1/0)throw new Qee(bg);var b=n>t,E=!1,T;if(u===void 0)T=void 0;else if(tXe(u))T=u.step,E=!!u.inclusive;else if(typeof u==l)T=u;else throw new GM(bg);if(eXe(T)&&(T=b?_:-_),typeof T!=l)throw new GM(bg);if(T===1/0||T===-1/0||T===o&&t!==n)throw new Qee(bg);var C=t!==t||n!==n||T!==T||n>t!=T>o;iXe(this,{type:HM,start:t,end:n,step:T,inclusive:E,hitsEnd:C,currentCount:o,zero:o}),tte||(this.start=t,this.end=n,this.step=T,this.inclusive=E)},HM,function(){var t=rte(this);if(t.hitsEnd)return VM(void 0,!0);var n=t.start,u=t.end,l=t.step,o=n+l*t.currentCount++;o===u&&(t.hitsEnd=!0);var _=t.inclusive,b;return u>n?b=_?o>u:o>=u:b=_?u>o:u>=o,b?(t.hitsEnd=!0,VM(void 0,!0)):VM(o,!1)}),Q1=function(e){rXe(ite.prototype,e,{get:function(){return rte(this)[e]},set:function(){},configurable:!0,enumerable:!1})};tte&&(Q1("start"),Q1("end"),Q1("inclusive"),Q1("step"));nte.exports=ite});var ate=S(()=>{"use strict";var nXe=V(),aXe=eb();typeof BigInt=="function"&&nXe({target:"BigInt",stat:!0,forced:!0},{range:function(t,n,u){return new aXe(t,n,u,"bigint",BigInt(0),BigInt(1))}})});var WM=S((PAt,lte)=>{"use strict";jx();N1();var ute=xt(),oXe=jr(),ote=wt(),sXe=Object,uXe=TypeError,lXe=ute("Map"),cXe=ute("WeakMap"),tb=function(){this.object=null,this.symbol=null,this.primitives=null,this.objectsByIndex=oXe(null)};tb.prototype.get=function(e,t){return this[e]||(this[e]=t())};tb.prototype.next=function(e,t,n){var u=n?this.objectsByIndex[e]||(this.objectsByIndex[e]=new cXe):this.primitives||(this.primitives=new lXe),l=u.get(t);return l||u.set(t,l=new tb),l};var ste=new tb;lte.exports=function(){var e=ste,t=arguments.length,n,u;for(n=0;n<t;n++)ote(u=arguments[n])&&(e=e.next(n,u,!0));if(this===sXe&&e===ste)throw new uXe("Composite keys must contain a non-primitive component");for(n=0;n<t;n++)ote(u=arguments[n])||(e=e.next(n,u,!1));return e}});var hte=S(()=>{"use strict";var hXe=V(),fXe=tn(),dXe=WM(),pXe=xt(),cte=jr(),mXe=Object,vXe=function(){var e=pXe("Object","freeze");return e?e(cte(null)):cte(null)};hXe({global:!0,forced:!0},{compositeKey:function(){return fXe(dXe,mXe,arguments).get("object",vXe)}})});var dte=S(()=>{"use strict";var gXe=V(),yXe=WM(),fte=xt(),_Xe=tn();gXe({global:!0,forced:!0},{compositeSymbol:function(){return arguments.length===1&&typeof arguments[0]=="string"?fte("Symbol").for(arguments[0]):_Xe(yXe,null,arguments).get("symbol",fte("Symbol"))}})});var pte=S(()=>{"use strict";var xXe=V(),bXe=Pe(),wXe=Sx().unpack,SXe=bXe(DataView.prototype.getUint16);xXe({target:"DataView",proto:!0},{getFloat16:function(t){var n=SXe(this,t,arguments.length>1?arguments[1]:!1);return wXe([n&255,n>>8&255],10)}})});var mte=S(()=>{"use strict";var qXe=V(),IXe=Pe(),EXe=IXe(DataView.prototype.getUint8);qXe({target:"DataView",proto:!0,forced:!0},{getUint8Clamped:function(t){return EXe(this,t)}})});var ZM=S((FAt,vte)=>{"use strict";var TXe=Ln(),AXe=TypeError;vte.exports=function(e){if(TXe(e)==="DataView")return e;throw new AXe("Argument is not a DataView")}});var KM=S((NAt,gte)=>{"use strict";var PXe=GT(),CXe=.0009765625,MXe=65504,OXe=6103515625e-14;gte.exports=Math.f16round||function(t){return PXe(t,CXe,MXe,OXe)}});var yte=S(()=>{"use strict";var RXe=V(),kXe=Pe(),DXe=ZM(),LXe=Gf(),zXe=Sx().pack,FXe=KM(),NXe=kXe(DataView.prototype.setUint16);RXe({target:"DataView",proto:!0},{setFloat16:function(t,n){DXe(this);var u=LXe(t),l=zXe(FXe(n),10,2);return NXe(this,u,l[1]<<8|l[0],arguments.length>2?arguments[2]:!1)}})});var _te=S(()=>{"use strict";var BXe=V(),jXe=Pe(),UXe=ZM(),$Xe=Gf(),VXe=zC(),GXe=jXe(DataView.prototype.setUint8);BXe({target:"DataView",proto:!0,forced:!0},{setUint8Clamped:function(t,n){UXe(this);var u=$Xe(t);return GXe(this,u,VXe(n))}})});var qte=S(()=>{"use strict";var HXe=V(),ib=ht(),WXe=xt(),xte=_t(),ZXe=rn(),bte=tr(),KXe=za(),XXe=yr(),wte=pt(),Ste=Yt(),XM=AM(),YXe=WXe("SuppressedError"),JXe=ReferenceError,QXe=wte("dispose"),eYe=wte("toStringTag"),ab="DisposableStack",tYe=Ste.set,nb=Ste.getterFor(ab),YM="sync-dispose",wg="disposed",rYe="pending",rb=function(e){var t=nb(e);if(t.state===wg)throw new JXe(ab+" already disposed");return t},JM=function(){tYe(ZXe(this,Id),{type:ab,state:rYe,stack:[]}),ib||(this.disposed=!1)},Id=JM.prototype;KXe(Id,{dispose:function(){var t=nb(this);if(t.state!==wg){t.state=wg,ib||(this.disposed=!0);for(var n=t.stack,u=n.length,l=!1,o;u;){var _=n[--u];n[u]=null;try{_()}catch(b){l?o=new YXe(b,o):(l=!0,o=b)}}if(t.stack=null,l)throw o}},use:function(t){return XM(rb(this),t,YM),t},adopt:function(t,n){var u=rb(this);return xte(n),XM(u,void 0,YM,function(){n(t)}),t},defer:function(t){var n=rb(this);xte(t),XM(n,void 0,YM,t)},move:function(){var t=rb(this),n=new JM;return nb(n).stack=t.stack,t.stack=[],t.state=wg,ib||(this.disposed=!0),n}});ib&&XXe(Id,"disposed",{configurable:!0,get:function(){return nb(this).state===wg}});bte(Id,QXe,Id.dispose,{name:"dispose"});bte(Id,eYe,ab,{nonWritable:!0});HXe({global:!0,constructor:!0},{DisposableStack:JM})});var QM=S((HAt,Ite)=>{"use strict";var iYe=Pe(),nYe=_t();Ite.exports=function(){return iYe(nYe(this))}});var Ete=S(()=>{"use strict";var aYe=V(),oYe=QM();aYe({target:"Function",proto:!0,forced:!0},{demethodize:oYe})});var Ate=S(()=>{"use strict";var sYe=V(),uYe=Pe(),lYe=Tt(),cYe=ov(),hYe=Ct(),fYe=ht(),dYe=Object.getOwnPropertyDescriptor,Tte=/^\s*class\b/,pYe=uYe(Tte.exec),mYe=function(e){try{if(!fYe||!pYe(Tte,cYe(e)))return!1}catch(n){}var t=dYe(e,"prototype");return!!t&&hYe(t,"writable")&&!t.writable};sYe({target:"Function",stat:!0,sham:!0,forced:!0},{isCallable:function(t){return lYe(t)&&!mYe(t)}})});var Pte=S(()=>{"use strict";var vYe=V(),gYe=ho();vYe({target:"Function",stat:!0,forced:!0},{isConstructor:gYe})});var Ote=S(()=>{"use strict";var yYe=pt(),_Ye=dr().f,Cte=yYe("metadata"),Mte=Function.prototype;Mte[Cte]===void 0&&_Ye(Mte,Cte,{value:null})});var Rte=S(()=>{"use strict";var xYe=V(),bYe=QM();xYe({target:"Function",proto:!0,forced:!0,name:"demethodize"},{unThis:bYe})});var kte=S(()=>{"use strict";k2()});var Dte=S(()=>{"use strict";N2()});var eO=S((sPt,Lte)=>{"use strict";var wYe=Ze(),SYe=J2(),qYe=function(e,t){return[t,e]};Lte.exports=function(){return wYe(SYe,this,qYe)}});var zte=S(()=>{"use strict";var IYe=V(),EYe=eO();IYe({target:"Iterator",name:"indexed",proto:!0,real:!0,forced:!0},{asIndexedPairs:EYe})});var Bte=S(()=>{"use strict";var TYe=V(),Fte=Ze(),AYe=_t(),Nte=He(),PYe=Uo(),CYe=yl(),MYe=Array,OYe=CYe(function(){for(;;){var e=this.iterator;if(!e){var t=this.nextIterableIndex++,n=this.iterables;if(t>=n.length){this.done=!0;return}var u=n[t];this.iterables[t]=null,e=this.iterator=Fte(u.method,u.iterable),this.next=e.next}var l=Nte(Fte(this.next,e));if(l.done){this.iterator=null,this.next=null;continue}return l.value}});TYe({target:"Iterator",stat:!0,forced:!0},{concat:function(){for(var t=arguments.length,n=MYe(t),u=0;u<t;u++){var l=Nte(arguments[u]);n[u]={iterable:l,method:AYe(PYe(l))}}return new OYe({iterables:n,nextIterableIndex:0,iterator:null,next:null})}})});var $te=S(()=>{"use strict";var RYe=Ze(),kYe=tr(),DYe=Br(),LYe=Ct(),zYe=pt(),jte=Lc().IteratorPrototype,Ute=zYe("dispose");LYe(jte,Ute)||kYe(jte,Ute,function(){var e=DYe(this,"return");e&&RYe(e,this)})});var Vte=S(()=>{"use strict";$2()});var Gte=S(()=>{"use strict";V2()});var Hte=S(()=>{"use strict";G2()});var Wte=S(()=>{"use strict";H2()});var Zte=S(()=>{"use strict";K2()});var Kte=S(()=>{"use strict";X2()});var Xte=S(()=>{"use strict";Y2()});var Yte=S(()=>{"use strict";var FYe=V(),NYe=eO();FYe({target:"Iterator",proto:!0,real:!0,forced:!0},{indexed:NYe})});var Jte=S(()=>{"use strict";Q2()});var ere=S(()=>{"use strict";var BYe=V(),Qte=eb(),jYe=TypeError;BYe({target:"Iterator",stat:!0,forced:!0},{range:function(t,n,u){if(typeof t=="number")return new Qte(t,n,u,"number",0,1);if(typeof t=="bigint")return new Qte(t,n,u,"bigint",BigInt(0),BigInt(1));throw new jYe("Incorrect Iterator.range arguments")}})});var tre=S(()=>{"use strict";eA()});var rre=S(()=>{"use strict";tA()});var ire=S(()=>{"use strict";rA()});var nre=S(()=>{"use strict";iA()});var ore=S(()=>{"use strict";var UYe=V(),$Ye=He(),VYe=gg(),GYe=BM(),are=Ir(),HYe=Rt();UYe({target:"Iterator",proto:!0,real:!0,forced:HYe},{toAsync:function(){return new GYe(are(new VYe(are($Ye(this)))))}})});var tO=S((VPt,sre)=>{"use strict";var WYe=Oe();sre.exports=!WYe(function(){var e="9007199254740993",t=JSON.rawJSON(e);return!JSON.isRawJSON(t)||JSON.stringify(t)!==e})});var rO=S((GPt,ure)=>{"use strict";var ZYe=wt(),KYe=Yt().get;ure.exports=function(t){if(!ZYe(t))return!1;var n=KYe(t);return!!n&&n.type==="RawJSON"}});var lre=S(()=>{"use strict";var XYe=V(),YYe=tO(),JYe=rO();XYe({target:"JSON",stat:!0,forced:!YYe},{isRawJSON:JYe})});var nO=S((ZPt,dre)=>{"use strict";var iO=Pe(),QYe=Ct(),ob=SyntaxError,eJe=parseInt,tJe=String.fromCharCode,rJe=iO("".charAt),cre=iO("".slice),hre=iO(/./.exec),fre={"\\\"":"\"","\\\\":"\\","\\/":"/","\\b":"\b","\\f":"\f","\\n":`
`,"\\r":"\r","\\t":"\t"},iJe=/^[\da-f]{4}$/i,nJe=/^[\u0000-\u001F]$/;dre.exports=function(e,t){for(var n=!0,u="";t<e.length;){var l=rJe(e,t);if(l==="\\"){var o=cre(e,t,t+2);if(QYe(fre,o))u+=fre[o],t+=2;else if(o==="\\u"){t+=2;var _=cre(e,t,t+4);if(!hre(iJe,_))throw new ob("Bad Unicode escape at: "+t);u+=tJe(eJe(_,16)),t+=4}else throw new ob("Unknown escape sequence: \""+o+"\"")}else if(l==="\""){n=!1,t++;break}else{if(hre(nJe,l))throw new ob("Bad control character in string literal at: "+t);u+=l,t++}}if(n)throw new ob("Unterminated string at: "+t);return{value:u,end:t}}});var bre=S(()=>{"use strict";var aJe=V(),oJe=ht(),fO=$e(),sJe=xt(),sb=Pe(),uJe=Ze(),_re=Tt(),lJe=wt(),cJe=co(),hJe=Ct(),fJe=qt(),pre=Nt(),lO=Da(),xre=Oe(),dJe=nO(),pJe=tl(),mre=fO.JSON,mJe=fO.Number,Ed=fO.SyntaxError,dO=mre&&mre.parse,vJe=sJe("Object","keys"),gJe=Object.getOwnPropertyDescriptor,Di=sb("".charAt),aO=sb("".slice),oO=sb(/./.exec),vre=sb([].push),sO=/^\d$/,yJe=/^[1-9]$/,_Je=/^[\d-]$/,Sg=/^[\t\n\r ]$/,uO=0,gre=1,xJe=function(e,t){e=fJe(e);var n=new hO(e,0,""),u=n.parse(),l=u.value,o=n.skip(Sg,u.end);if(o<e.length)throw new Ed("Unexpected extra character: \""+Di(e,o)+"\" after the parsed data at: "+o);return _re(t)?cO({"":l},"",t,u):l},cO=function(e,t,n,u){var l=e[t],o=u&&l===u.value,_=o&&typeof u.source=="string"?{source:u.source}:{},b,E,T,C,z;if(lJe(l)){var $=cJe(l),oe=o?u.nodes:$?[]:{};if($)for(b=oe.length,T=pre(l),C=0;C<T;C++)yre(l,C,cO(l,""+C,n,C<b?oe[C]:void 0));else for(E=vJe(l),T=pre(E),C=0;C<T;C++)z=E[C],yre(l,z,cO(l,z,n,hJe(oe,z)?oe[z]:void 0))}return uJe(n,e,t,l,_)},yre=function(e,t,n){if(oJe){var u=gJe(e,t);if(u&&!u.configurable)return}n===void 0?delete e[t]:lO(e,t,n)},bJe=function(e,t,n,u){this.value=e,this.end=t,this.source=n,this.nodes=u},hO=function(e,t){this.source=e,this.index=t};hO.prototype={fork:function(e){return new hO(this.source,e)},parse:function(){var e=this.source,t=this.skip(Sg,this.index),n=this.fork(t),u=Di(e,t);if(oO(_Je,u))return n.number();switch(u){case"{":return n.object();case"[":return n.array();case"\"":return n.string();case"t":return n.keyword(!0);case"f":return n.keyword(!1);case"n":return n.keyword(null);}throw new Ed("Unexpected character: \""+u+"\" at: "+t)},node:function(e,t,n,u,l){return new bJe(t,u,e?null:aO(this.source,n,u),l)},object:function(){for(var e=this.source,t=this.index+1,n=!1,u={},l={};t<e.length;){if(t=this.until(["\"","}"],t),Di(e,t)==="}"&&!n){t++;break}var o=this.fork(t).string(),_=o.value;t=o.end,t=this.until([":"],t)+1,t=this.skip(Sg,t),o=this.fork(t).parse(),lO(l,_,o),lO(u,_,o.value),t=this.until([",","}"],o.end);var b=Di(e,t);if(b===",")n=!0,t++;else if(b==="}"){t++;break}}return this.node(gre,u,this.index,t,l)},array:function(){for(var e=this.source,t=this.index+1,n=!1,u=[],l=[];t<e.length;){if(t=this.skip(Sg,t),Di(e,t)==="]"&&!n){t++;break}var o=this.fork(t).parse();if(vre(l,o),vre(u,o.value),t=this.until([",","]"],o.end),Di(e,t)===",")n=!0,t++;else if(Di(e,t)==="]"){t++;break}}return this.node(gre,u,this.index,t,l)},string:function(){var e=this.index,t=dJe(this.source,this.index+1);return this.node(uO,t.value,e,t.end)},number:function(){var e=this.source,t=this.index,n=t;if(Di(e,n)==="-"&&n++,Di(e,n)==="0")n++;else if(oO(yJe,Di(e,n)))n=this.skip(sO,n+1);else throw new Ed("Failed to parse number at: "+n);if(Di(e,n)==="."&&(n=this.skip(sO,n+1)),Di(e,n)==="e"||Di(e,n)==="E"){n++,(Di(e,n)==="+"||Di(e,n)==="-")&&n++;var u=n;if(n=this.skip(sO,n),u===n)throw new Ed("Failed to parse number's exponent value at: "+n)}return this.node(uO,mJe(aO(e,t,n)),t,n)},keyword:function(e){var t=""+e,n=this.index,u=n+t.length;if(aO(this.source,n,u)!==t)throw new Ed("Failed to parse value at: "+n);return this.node(uO,e,n,u)},skip:function(e,t){for(var n=this.source;t<n.length&&oO(e,Di(n,t));t++);return t},until:function(e,t){t=this.skip(Sg,t);for(var n=Di(this.source,t),u=0;u<e.length;u++)if(e[u]===n)return t;throw new Ed("Unexpected character: \""+n+"\" at: "+t)}};var wJe=xre(function(){var e="9007199254740993",t;return dO(e,function(n,u,l){t=l.source}),t!==e}),SJe=pJe&&!xre(function(){return 1/dO("-0 \t")!==-1/0});aJe({target:"JSON",stat:!0,forced:wJe},{parse:function(t,n){return SJe&&!_re(n)?dO(t):xJe(t,n)}})});var Pre=S(()=>{"use strict";var Tre=V(),qJe=js(),Are=tO(),ub=xt(),IJe=Ze(),gO=Pe(),EJe=Tt(),TJe=rO(),AJe=qt(),PJe=Da(),CJe=nO(),MJe=WE(),OJe=il(),RJe=Yt().set,kJe=String,wre=SyntaxError,DJe=ub("JSON","parse"),Sre=ub("JSON","stringify"),LJe=ub("Object","create"),zJe=ub("Object","freeze"),mO=gO("".charAt),pO=gO("".slice),FJe=gO([].push),vO=OJe(),qre=vO.length,Ire="Unacceptable as raw JSON",Ere=function(e){return e===" "||e==="\t"||e===`
`||e==="\r"};Tre({target:"JSON",stat:!0,forced:!Are},{rawJSON:function(t){var n=AJe(t);if(n===""||Ere(mO(n,0))||Ere(mO(n,n.length-1)))throw new wre(Ire);var u=DJe(n);if(typeof u=="object"&&u!==null)throw new wre(Ire);var l=LJe(null);return RJe(l,{type:"RawJSON"}),PJe(l,"rawJSON",n),qJe?zJe(l):l}});Sre&&Tre({target:"JSON",stat:!0,arity:3,forced:!Are},{stringify:function(t,n,u){var l=MJe(n),o=[],_=Sre(t,function(oe,xe){var _e=EJe(l)?IJe(l,this,kJe(oe),xe):xe;return TJe(_e)?vO+(FJe(o,_e.rawJSON)-1):_e},u);if(typeof _!="string")return _;for(var b="",E=_.length,T=0;T<E;T++){var C=mO(_,T);if(C==="\""){var z=CJe(_,++T).end-1,$=pO(_,T,z);b+=pO($,0,qre)===vO?o[pO($,qre)]:"\""+$+"\"",T=z}else b+=C}return b}})});var Li=S((QPt,Cre)=>{"use strict";var NJe=si().has;Cre.exports=function(e){return NJe(e),e}});var Mre=S(()=>{"use strict";var BJe=V(),jJe=Li(),UJe=si().remove;BJe({target:"Map",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=jJe(this),n=!0,u,l=0,o=arguments.length;l<o;l++)u=UJe(t,arguments[l]),n=n&&u;return!!n}})});var Rre=S(()=>{"use strict";var $Je=V(),VJe=Li(),yO=si(),GJe=yO.get,HJe=yO.has,Ore=yO.set;$Je({target:"Map",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=VJe(this),l,o;return HJe(u,t)?(l=GJe(u,t),"update"in n&&(l=n.update(l,t,u),Ore(u,t,l)),l):(o=n.insert(t,u),Ore(u,t,o),o)}})});var kre=S(()=>{"use strict";var WJe=V(),ZJe=or(),KJe=Li(),XJe=Fa();WJe({target:"Map",proto:!0,real:!0,forced:!0},{every:function(t){var n=KJe(this),u=ZJe(t,arguments.length>1?arguments[1]:void 0);return XJe(n,function(l,o){if(!u(l,o,n))return!1},!0)!==!1}})});var Lre=S(()=>{"use strict";var YJe=V(),JJe=or(),QJe=Li(),Dre=si(),eQe=Fa(),tQe=Dre.Map,rQe=Dre.set;YJe({target:"Map",proto:!0,real:!0,forced:!0},{filter:function(t){var n=QJe(this),u=JJe(t,arguments.length>1?arguments[1]:void 0),l=new tQe;return eQe(n,function(o,_){u(o,_,n)&&rQe(l,_,o)}),l}})});var zre=S(()=>{"use strict";var iQe=V(),nQe=or(),aQe=Li(),oQe=Fa();iQe({target:"Map",proto:!0,real:!0,forced:!0},{find:function(t){var n=aQe(this),u=nQe(t,arguments.length>1?arguments[1]:void 0),l=oQe(n,function(o,_){if(u(o,_,n))return{value:o}},!0);return l&&l.value}})});var Fre=S(()=>{"use strict";var sQe=V(),uQe=or(),lQe=Li(),cQe=Fa();sQe({target:"Map",proto:!0,real:!0,forced:!0},{findKey:function(t){var n=lQe(this),u=uQe(t,arguments.length>1?arguments[1]:void 0),l=cQe(n,function(o,_){if(u(o,_,n))return{key:_}},!0);return l&&l.key}})});var qg=S((fCt,Nre)=>{"use strict";var hQe=or(),fQe=He(),dQe=kt(),pQe=Mr();Nre.exports=function(e,t,n){return function(l){var o=dQe(l),_=arguments.length,b=_>1?arguments[1]:void 0,E=b!==void 0,T=E?hQe(b,_>2?arguments[2]:void 0):void 0,C=new e,z=0;return pQe(o,function($){var oe=E?T($,z++):$;n?t(C,fQe(oe)[0],oe[1]):t(C,oe)}),C}}});var jre=S(()=>{"use strict";var mQe=V(),Bre=si(),vQe=qg();mQe({target:"Map",stat:!0,forced:!0},{from:vQe(Bre.Map,Bre.set,!0)})});var Ure=S(()=>{"use strict";var gQe=V(),yQe=Li(),_O=si(),_Qe=_O.get,xQe=_O.has,bQe=_O.set;gQe({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,n){return xQe(yQe(this),t)?_Qe(this,t):(bQe(this,t,n),n)}})});var $re=S(()=>{"use strict";var wQe=V(),SQe=_t(),qQe=Li(),xO=si(),IQe=xO.get,EQe=xO.has,TQe=xO.set;wQe({target:"Map",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,n){if(qQe(this),SQe(n),EQe(this,t))return IQe(this,t);t===0&&1/t===-1/0&&(t=0);var u=n(t);return TQe(this,t,u),u}})});var Vre=S(()=>{"use strict";hA()});var Hre=S((bCt,Gre)=>{"use strict";Gre.exports=function(e,t){return e===t||e!==e&&t!==t}});var Wre=S(()=>{"use strict";var AQe=V(),PQe=Hre(),CQe=Li(),MQe=Fa();AQe({target:"Map",proto:!0,real:!0,forced:!0},{includes:function(t){return MQe(CQe(this),function(n){if(PQe(n,t))return!0},!0)===!0}})});var Kre=S(()=>{"use strict";var OQe=V(),RQe=Ze(),kQe=Mr(),DQe=Tt(),Zre=_t(),LQe=si().Map;OQe({target:"Map",stat:!0,forced:!0},{keyBy:function(t,n){var u=DQe(this)?this:LQe,l=new u;Zre(n);var o=Zre(l.set);return kQe(t,function(_){RQe(o,l,n(_),_)}),l}})});var Xre=S(()=>{"use strict";var zQe=V(),FQe=Li(),NQe=Fa();zQe({target:"Map",proto:!0,real:!0,forced:!0},{keyOf:function(t){var n=NQe(FQe(this),function(u,l){if(u===t)return{key:l}},!0);return n&&n.key}})});var Jre=S(()=>{"use strict";var BQe=V(),jQe=or(),UQe=Li(),Yre=si(),$Qe=Fa(),VQe=Yre.Map,GQe=Yre.set;BQe({target:"Map",proto:!0,real:!0,forced:!0},{mapKeys:function(t){var n=UQe(this),u=jQe(t,arguments.length>1?arguments[1]:void 0),l=new VQe;return $Qe(n,function(o,_){GQe(l,u(o,_,n),o)}),l}})});var eie=S(()=>{"use strict";var HQe=V(),WQe=or(),ZQe=Li(),Qre=si(),KQe=Fa(),XQe=Qre.Map,YQe=Qre.set;HQe({target:"Map",proto:!0,real:!0,forced:!0},{mapValues:function(t){var n=ZQe(this),u=WQe(t,arguments.length>1?arguments[1]:void 0),l=new XQe;return KQe(n,function(o,_){YQe(l,_,u(o,_,n))}),l}})});var tie=S(()=>{"use strict";var JQe=V(),QQe=Li(),eet=Mr(),tet=si().set;JQe({target:"Map",proto:!0,real:!0,arity:1,forced:!0},{merge:function(t){for(var n=QQe(this),u=arguments.length,l=0;l<u;)eet(arguments[l++],function(o,_){tet(n,o,_)},{AS_ENTRIES:!0});return n}})});var Ig=S((kCt,rie)=>{"use strict";var ret=He();rie.exports=function(e,t,n){return function(){for(var l=new e,o=arguments.length,_=0;_<o;_++){var b=arguments[_];n?t(l,ret(b)[0],b[1]):t(l,b)}return l}}});var nie=S(()=>{"use strict";var iet=V(),iie=si(),net=Ig();iet({target:"Map",stat:!0,forced:!0},{of:net(iie.Map,iie.set,!0)})});var aie=S(()=>{"use strict";var aet=V(),oet=_t(),set=Li(),uet=Fa(),cet=TypeError;aet({target:"Map",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=set(this),u=arguments.length<2,l=u?void 0:arguments[1];if(oet(t),uet(n,function(o,_){u?(u=!1,l=o):l=t(l,o,_,n)}),u)throw new cet("Reduce of empty map with no initial value");return l}})});var oie=S(()=>{"use strict";var het=V(),fet=or(),det=Li(),pet=Fa();het({target:"Map",proto:!0,real:!0,forced:!0},{some:function(t){var n=det(this),u=fet(t,arguments.length>1?arguments[1]:void 0);return pet(n,function(l,o){if(u(l,o,n))return!0},!0)===!0}})});var uie=S(()=>{"use strict";var met=V(),sie=_t(),vet=Li(),bO=si(),get=TypeError,yet=bO.get,_et=bO.has,xet=bO.set;met({target:"Map",proto:!0,real:!0,forced:!0},{update:function(t,n){var u=vet(this),l=arguments.length;sie(n);var o=_et(u,t);if(!o&&l<3)throw new get("Updating absent value");var _=o?yet(u,t):sie(l>2?arguments[2]:void 0)(t,u);return xet(u,t,n(_,t,u)),u}})});var hb=S(($Ct,lie)=>{"use strict";var lb=Ze(),wO=_t(),cb=Tt(),bet=He(),wet=TypeError;lie.exports=function(t,n){var u=bet(this),l=wO(u.get),o=wO(u.has),_=wO(u.set),b=arguments.length>2?arguments[2]:void 0,E;if(!cb(n)&&!cb(b))throw new wet("At least one callback required");return lb(o,u,t)?(E=lb(l,u,t),cb(n)&&(E=n(E),lb(_,u,t,E))):cb(b)&&(E=b(),lb(_,u,t,E)),E}});var cie=S(()=>{"use strict";var qet=V(),Iet=hb();qet({target:"Map",proto:!0,real:!0,name:"upsert",forced:!0},{updateOrInsert:Iet})});var hie=S(()=>{"use strict";var Eet=V(),Tet=hb();Eet({target:"Map",proto:!0,real:!0,forced:!0},{upsert:Tet})});var fie=S(()=>{"use strict";var Aet=V(),Pet=Math.min,Cet=Math.max;Aet({target:"Math",stat:!0,forced:!0},{clamp:function(t,n,u){return Pet(u,Cet(n,t))}})});var die=S(()=>{"use strict";var Met=V();Met({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{DEG_PER_RAD:Math.PI/180})});var pie=S(()=>{"use strict";var Oet=V(),Ret=180/Math.PI;Oet({target:"Math",stat:!0,forced:!0},{degrees:function(t){return t*Ret}})});var SO=S((eMt,mie)=>{"use strict";mie.exports=Math.scale||function(t,n,u,l,o){var _=+t,b=+n,E=+u,T=+l,C=+o;return _!==_||b!==b||E!==E||T!==T||C!==C?NaN:_===1/0||_===-1/0?_:(_-b)*(C-T)/(E-b)+T}});var vie=S(()=>{"use strict";var ket=V(),Det=SO(),Let=wx();ket({target:"Math",stat:!0,forced:!0},{fscale:function(t,n,u,l,o){return Let(Det(t,n,u,l,o))}})});var gie=S(()=>{"use strict";var zet=V(),Fet=KM();zet({target:"Math",stat:!0},{f16round:Fet})});var yie=S(()=>{"use strict";var Net=V();Net({target:"Math",stat:!0,forced:!0},{iaddh:function(t,n,u,l){var o=t>>>0,_=n>>>0,b=u>>>0;return _+(l>>>0)+((o&b|(o|b)&~(o+b>>>0))>>>31)|0}})});var _ie=S(()=>{"use strict";var Bet=V();Bet({target:"Math",stat:!0,forced:!0},{imulh:function(t,n){var u=65535,l=+t,o=+n,_=l&u,b=o&u,E=l>>16,T=o>>16,C=(E*b>>>0)+(_*b>>>16);return E*T+(C>>16)+((_*T>>>0)+(C&u)>>16)}})});var xie=S(()=>{"use strict";var jet=V();jet({target:"Math",stat:!0,forced:!0},{isubh:function(t,n,u,l){var o=t>>>0,_=n>>>0,b=u>>>0;return _-(l>>>0)-((~o&b|~(o^b)&o-b>>>0)>>>31)|0}})});var bie=S(()=>{"use strict";var Uet=V();Uet({target:"Math",stat:!0,nonConfigurable:!0,nonWritable:!0},{RAD_PER_DEG:180/Math.PI})});var wie=S(()=>{"use strict";var $et=V(),Vet=Math.PI/180;$et({target:"Math",stat:!0,forced:!0},{radians:function(t){return t*Vet}})});var Sie=S(()=>{"use strict";var Get=V(),Het=SO();Get({target:"Math",stat:!0,forced:!0},{scale:Het})});var Tie=S(()=>{"use strict";var Wet=V(),Zet=He(),Ket=wA(),Xet=cl(),Yet=xi(),qie=Yt(),Iie="Seeded Random",Eie=Iie+" Generator",Jet="Math.seededPRNG() argument should have a \"seed\" field with a finite value.",Qet=qie.set,ett=qie.getterFor(Eie),ttt=TypeError,rtt=Xet(function(t){Qet(this,{type:Eie,seed:t%2147483647})},Iie,function(){var t=ett(this),n=t.seed=(t.seed*1103515245+12345)%2147483647;return Yet((n&1073741823)/1073741823,!1)});Wet({target:"Math",stat:!0,forced:!0},{seededPRNG:function(t){var n=Zet(t).seed;if(!Ket(n))throw new ttt(Jet);return new rtt(n)}})});var Aie=S(()=>{"use strict";var itt=V();itt({target:"Math",stat:!0,forced:!0},{signbit:function(t){var n=+t;return n===n&&n===0?1/n===-1/0:n<0}})});var Rie=S(()=>{"use strict";var ntt=V(),att=Pe(),ott=Mr(),stt=RangeError,utt=TypeError,Na=1/0,ltt=NaN,Yc=Math.abs,TO=Math.pow,Pie=att([].push),Eg=TO(2,1023),ctt=TO(2,53)-1,Cie=Number.MAX_VALUE,Mie=TO(2,971),Tg={},qO={},IO={},EO={},Oie={},fb=function(e,t){var n=e+t,u=t-(n-e);return{hi:n,lo:u}};ntt({target:"Math",stat:!0},{sumPrecise:function(t){var n=[],u=0,l=EO;switch(ott(t,function(ge){if(++u>=ctt)throw new stt("Maximum allowed index exceeded");if(typeof ge!="number")throw new utt("Value is not a number");l!==Tg&&(ge!==ge?l=Tg:ge===Na?l=l===qO?Tg:IO:ge===-Na?l=l===IO?Tg:qO:(ge!==0||1/ge===Na)&&(l===EO||l===Oie)&&(l=Oie,Pie(n,ge)))}),l){case Tg:return ltt;case qO:return-Na;case IO:return Na;case EO:return-0;}for(var o=[],_=0,b,E,T,C,z,$,oe=0;oe<n.length;oe++){b=n[oe];for(var xe=0,_e=0;_e<o.length;_e++){if(E=o[_e],Yc(b)<Yc(E)&&($=b,b=E,E=$),T=fb(b,E),C=T.hi,z=T.lo,Yc(C)===Na){var X=C===Na?1:-1;_+=X,b=b-X*Eg-X*Eg,Yc(b)<Yc(E)&&($=b,b=E,E=$),T=fb(b,E),C=T.hi,z=T.lo}z!==0&&(o[xe++]=z),b=C}o.length=xe,b!==0&&Pie(o,b)}var K=o.length-1;if(C=0,z=0,_!==0){var re=K>=0?o[K]:0;if(K--,Yc(_)>1||_>0&&re>0||_<0&&re<0)return _>0?Na:-Na;if(T=fb(_*Eg,re/2),C=T.hi,z=T.lo,z*=2,Yc(2*C)===Na)return C>0?C===Eg&&z===-(Mie/2)&&K>=0&&o[K]<0?Cie:Na:C===-Eg&&z===Mie/2&&K>=0&&o[K]>0?-Cie:-Na;z!==0&&(o[++K]=z,z=0),C*=2}for(;K>=0&&(T=fb(C,o[K--]),C=T.hi,z=T.lo,z===0););return K>=0&&(z<0&&o[K]<0||z>0&&o[K]>0)&&(E=z*2,b=C+E,E===b-C&&(C=b)),C}})});var kie=S(()=>{"use strict";var htt=V();htt({target:"Math",stat:!0,forced:!0},{umulh:function(t,n){var u=65535,l=+t,o=+n,_=l&u,b=o&u,E=l>>>16,T=o>>>16,C=(E*b>>>0)+(_*b>>>16);return E*T+(C>>>16)+((_*T>>>0)+(C&u)>>>16)}})});var zie=S(()=>{"use strict";var ftt=V(),Pg=Pe(),dtt=gr(),Ag="Invalid number representation",ptt="Invalid radix",mtt=RangeError,db=SyntaxError,vtt=TypeError,Die=parseInt,gtt=Math.pow,Lie=/^[\d.a-z]+$/,ytt=Pg("".charAt),_tt=Pg(Lie.exec),xtt=Pg(1 .toString),btt=Pg("".slice),wtt=Pg("".split);ftt({target:"Number",stat:!0,forced:!0},{fromString:function(t,n){var u=1;if(typeof t!="string")throw new vtt(Ag);if(!t.length)throw new db(Ag);if(ytt(t,0)==="-"&&(u=-1,t=btt(t,1),!t.length))throw new db(Ag);var l=n===void 0?10:dtt(n);if(l<2||l>36)throw new mtt(ptt);if(!_tt(Lie,t))throw new db(Ag);var o=wtt(t,"."),_=Die(o[0],l);if(o.length>1&&(_+=Die(o[1],l)/gtt(l,o[1].length)),l===10&&xtt(_,l)!==t)throw new db(Ag);return u*_}})});var Fie=S(()=>{"use strict";var Stt=V(),qtt=eb();Stt({target:"Number",stat:!0,forced:!0},{range:function(t,n,u){return new qtt(t,n,u,"number",0,1)}})});var Nie=S(()=>{"use strict";DA()});var mb=S((MMt,Uie)=>{"use strict";var Bie=Yt(),Itt=cl(),pb=xi(),Ett=Ct(),Ttt=Pc(),Att=kt(),jie="Object Iterator",Ptt=Bie.set,Ctt=Bie.getterFor(jie);Uie.exports=Itt(function(t,n){var u=Att(t);Ptt(this,{type:jie,mode:n,object:u,keys:Ttt(u),index:0})},"Object",function(){for(var t=Ctt(this),n=t.keys;;){if(n===null||t.index>=n.length)return t.object=t.keys=null,pb(void 0,!0);var u=n[t.index++],l=t.object;if(Ett(l,u)){switch(t.mode){case"keys":return pb(u,!1);case"values":return pb(l[u],!1);}return pb([u,l[u]],!1)}}})});var $ie=S(()=>{"use strict";var Mtt=V(),Ott=mb();Mtt({target:"Object",stat:!0,forced:!0},{iterateEntries:function(t){return new Ott(t,"entries")}})});var Vie=S(()=>{"use strict";var Rtt=V(),ktt=mb();Rtt({target:"Object",stat:!0,forced:!0},{iterateKeys:function(t){return new ktt(t,"keys")}})});var Gie=S(()=>{"use strict";var Dtt=V(),Ltt=mb();Dtt({target:"Object",stat:!0,forced:!0},{iterateValues:function(t){return new Ltt(t,"values")}})});var Hie=S(()=>{"use strict";kA()});var rne=S(()=>{"use strict";var ztt=V(),vb=Ze(),Cg=ht(),Ftt=fl(),Wie=_t(),Ntt=He(),Btt=rn(),Zie=Tt(),jtt=Jr(),Utt=wt(),gb=Br(),$tt=tr(),AO=za(),Kie=yr(),Td=nP(),Vtt=pt(),Xie=Yt(),Gtt=Vtt("observable"),PO="Observable",Yie="Subscription",Jie="SubscriptionObserver",CO=Xie.getterFor,MO=Xie.set,Htt=CO(PO),Qie=CO(Yie),yb=CO(Jie),ene=function(e){this.observer=Ntt(e),this.cleanup=null,this.subscriptionObserver=null};ene.prototype={type:Yie,clean:function(){var e=this.cleanup;if(e){this.cleanup=null;try{e()}catch(t){Td(t)}}},close:function(){if(!Cg){var e=this.facade,t=this.subscriptionObserver;e.closed=!0,t&&(t.closed=!0)}this.observer=null},isClosed:function(){return this.observer===null}};var OO=function(e,t){var n=MO(this,new ene(e)),u;Cg||(this.closed=!1);try{(u=gb(e,"start"))&&vb(u,e,this)}catch(b){Td(b)}if(!n.isClosed()){var l=n.subscriptionObserver=new RO(n);try{var o=t(l),_=o;jtt(o)||(n.cleanup=Zie(o.unsubscribe)?function(){_.unsubscribe()}:Wie(o))}catch(b){l.error(b);return}n.isClosed()&&n.clean()}};OO.prototype=AO({},{unsubscribe:function(){var t=Qie(this);t.isClosed()||(t.close(),t.clean())}});Cg&&Kie(OO.prototype,"closed",{configurable:!0,get:function(){return Qie(this).isClosed()}});var RO=function(e){MO(this,{type:Jie,subscriptionState:e}),Cg||(this.closed=!1)};RO.prototype=AO({},{next:function(t){var n=yb(this).subscriptionState;if(!n.isClosed()){var u=n.observer;try{var l=gb(u,"next");l&&vb(l,u,t)}catch(o){Td(o)}}},error:function(t){var n=yb(this).subscriptionState;if(!n.isClosed()){var u=n.observer;n.close();try{var l=gb(u,"error");l?vb(l,u,t):Td(t)}catch(o){Td(o)}n.clean()}},complete:function(){var t=yb(this).subscriptionState;if(!t.isClosed()){var n=t.observer;t.close();try{var u=gb(n,"complete");u&&vb(u,n)}catch(l){Td(l)}t.clean()}}});Cg&&Kie(RO.prototype,"closed",{configurable:!0,get:function(){return yb(this).subscriptionState.isClosed()}});var tne=function(t){Btt(this,kO),MO(this,{type:PO,subscriber:Wie(t)})},kO=tne.prototype;AO(kO,{subscribe:function(t){var n=arguments.length;return new OO(Zie(t)?{next:t,error:n>1?arguments[1]:void 0,complete:n>2?arguments[2]:void 0}:Utt(t)?t:{},Htt(this).subscriber)}});$tt(kO,Gtt,function(){return this});ztt({global:!0,constructor:!0,forced:!0},{Observable:tne});Ftt(PO)});var nne=S(()=>{"use strict";var Wtt=V(),Ztt=xt(),Ktt=Ze(),ine=He(),Xtt=ho(),Ytt=ul(),Jtt=Br(),Qtt=Mr(),ert=pt(),trt=ert("observable");Wtt({target:"Observable",stat:!0,forced:!0},{from:function(t){var n=Xtt(this)?this:Ztt("Observable"),u=Jtt(ine(t),trt);if(u){var l=ine(Ktt(u,t));return l.constructor===n?l:new n(function(_){return l.subscribe(_)})}var o=Ytt(t);return new n(function(_){Qtt(o,function(b,E){if(_.next(b),_.closed)return E()},{IS_ITERATOR:!0,INTERRUPTED:!0}),_.complete()})}})});var one=S(()=>{"use strict";var rrt=V(),ane=xt(),irt=ho(),nrt=ane("Array");rrt({target:"Observable",stat:!0,forced:!0},{of:function(){for(var t=irt(this)?this:ane("Observable"),n=arguments.length,u=nrt(n),l=0;l<n;)u[l]=arguments[l++];return new t(function(o){for(var _=0;_<n;_++)if(o.next(u[_]),o.closed)return;o.complete()})}})});var sne=S(()=>{"use strict";rne();nne();one()});var une=S(()=>{"use strict";yP()});var lne=S(()=>{"use strict";_P()});var cne=S(()=>{"use strict";SP()});var hne=S(()=>{"use strict";qP()});var Yo=S((rOt,mne)=>{"use strict";jx();N1();var pne=xt(),art=Pe(),ort=Cs(),fne=pne("Map"),srt=pne("WeakMap"),urt=art([].push),dne=ort("metadata"),DO=dne.store||(dne.store=new srt),Mg=function(e,t,n){var u=DO.get(e);if(!u){if(!n)return;DO.set(e,u=new fne)}var l=u.get(t);if(!l){if(!n)return;u.set(t,l=new fne)}return l},lrt=function(e,t,n){var u=Mg(t,n,!1);return u===void 0?!1:u.has(e)},crt=function(e,t,n){var u=Mg(t,n,!1);return u===void 0?void 0:u.get(e)},hrt=function(e,t,n,u){Mg(n,u,!0).set(e,t)},frt=function(e,t){var n=Mg(e,t,!1),u=[];return n&&n.forEach(function(l,o){urt(u,o)}),u},drt=function(e){return e===void 0||typeof e=="symbol"?e:String(e)};mne.exports={store:DO,getMap:Mg,has:lrt,get:crt,set:hrt,keys:frt,toKey:drt}});var gne=S(()=>{"use strict";var prt=V(),vne=Yo(),mrt=He(),vrt=vne.toKey,grt=vne.set;prt({target:"Reflect",stat:!0},{defineMetadata:function(t,n,u){var l=arguments.length<4?void 0:vrt(arguments[3]);grt(t,n,mrt(u),l)}})});var _ne=S(()=>{"use strict";var yrt=V(),LO=Yo(),_rt=He(),xrt=LO.toKey,brt=LO.getMap,yne=LO.store;yrt({target:"Reflect",stat:!0},{deleteMetadata:function(t,n){var u=arguments.length<3?void 0:xrt(arguments[2]),l=brt(_rt(n),u,!1);if(l===void 0||!l.delete(t))return!1;if(l.size)return!0;var o=yne.get(n);return o.delete(u),!!o.size||yne.delete(n)}})});var bne=S(()=>{"use strict";var wrt=V(),zO=Yo(),Srt=He(),qrt=ti(),Irt=zO.has,Ert=zO.get,Trt=zO.toKey,xne=function(e,t,n){var u=Irt(e,t,n);if(u)return Ert(e,t,n);var l=qrt(t);return l!==null?xne(e,l,n):void 0};wrt({target:"Reflect",stat:!0},{getMetadata:function(t,n){var u=arguments.length<3?void 0:Trt(arguments[2]);return xne(t,Srt(n),u)}})});var Ine=S(()=>{"use strict";var Art=V(),wne=Pe(),Sne=Yo(),Prt=He(),Crt=ti(),Mrt=W1(),Ort=wne(Mrt),Rrt=wne([].concat),krt=Sne.keys,Drt=Sne.toKey,qne=function(e,t){var n=krt(e,t),u=Crt(e);if(u===null)return n;var l=qne(u,t);return l.length?n.length?Ort(Rrt(n,l)):l:n};Art({target:"Reflect",stat:!0},{getMetadataKeys:function(t){var n=arguments.length<2?void 0:Drt(arguments[1]);return qne(Prt(t),n)}})});var Tne=S(()=>{"use strict";var Lrt=V(),Ene=Yo(),zrt=He(),Frt=Ene.get,Nrt=Ene.toKey;Lrt({target:"Reflect",stat:!0},{getOwnMetadata:function(t,n){var u=arguments.length<3?void 0:Nrt(arguments[2]);return Frt(t,zrt(n),u)}})});var Pne=S(()=>{"use strict";var Brt=V(),Ane=Yo(),jrt=He(),Urt=Ane.keys,$rt=Ane.toKey;Brt({target:"Reflect",stat:!0},{getOwnMetadataKeys:function(t){var n=arguments.length<2?void 0:$rt(arguments[1]);return Urt(jrt(t),n)}})});var One=S(()=>{"use strict";var Vrt=V(),Cne=Yo(),Grt=He(),Hrt=ti(),Wrt=Cne.has,Zrt=Cne.toKey,Mne=function(e,t,n){var u=Wrt(e,t,n);if(u)return!0;var l=Hrt(t);return l!==null?Mne(e,l,n):!1};Vrt({target:"Reflect",stat:!0},{hasMetadata:function(t,n){var u=arguments.length<3?void 0:Zrt(arguments[2]);return Mne(t,Grt(n),u)}})});var kne=S(()=>{"use strict";var Krt=V(),Rne=Yo(),Xrt=He(),Yrt=Rne.has,Jrt=Rne.toKey;Krt({target:"Reflect",stat:!0},{hasOwnMetadata:function(t,n){var u=arguments.length<3?void 0:Jrt(arguments[2]);return Yrt(t,Xrt(n),u)}})});var Lne=S(()=>{"use strict";var Qrt=V(),Dne=Yo(),eit=He(),tit=Dne.toKey,rit=Dne.set;Qrt({target:"Reflect",stat:!0},{metadata:function(t,n){return function(l,o){rit(t,n,eit(l),tit(o))}}})});var Og=S((bOt,zne)=>{"use strict";var iit=TypeError;zne.exports=function(e){if(typeof e=="string")return e;throw new iit("Argument is not a string")}});var $ne=S(()=>{"use strict";var nit=V(),Rg=Pe(),ait=Og(),oit=Ct(),Fne=Rv().start,sit=Bc(),uit=Array,Nne=RegExp.escape,Bne=Rg("".charAt),BO=Rg("".charCodeAt),lit=Rg(1.1.toString),cit=Rg([].join),Une=/^[0-9a-z]/i,hit=/^[$()*+./?[\\\]^{|}]/,fit=RegExp("^[!\"#%&',\\-:;<=>@`~"+sit+"]"),FO=Rg(Une.exec),jne={"\t":"t","\n":"n","\x0B":"v","\f":"f","\r":"r"},NO=function(e){var t=lit(BO(e,0),16);return t.length<3?"\\x"+Fne(t,2,"0"):"\\u"+Fne(t,4,"0")},dit=!Nne||Nne("ab")!=="\\x61b";nit({target:"RegExp",stat:!0,forced:dit},{escape:function(t){ait(t);for(var n=t.length,u=uit(n),l=0;l<n;l++){var o=Bne(t,l);if(l===0&&FO(Une,o))u[l]=NO(o);else if(oit(jne,o))u[l]="\\"+jne[o];else if(FO(hit,o))u[l]="\\"+o;else if(FO(fit,o))u[l]=NO(o);else{var _=BO(o,0);(_&63488)!==55296?u[l]=o:_>=56320||l+1>=n||(BO(t,l+1)&64512)!==56320?u[l]=NO(o):(u[l]=o,u[++l]=Bne(t,l))}}return cit(u,"")}})});var Vne=S(()=>{"use strict";var pit=V(),mit=ki(),vit=bi().add;pit({target:"Set",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=mit(this),n=0,u=arguments.length;n<u;n++)vit(t,arguments[n]);return t}})});var Gne=S(()=>{"use strict";var git=V(),yit=ki(),_it=bi().remove;git({target:"Set",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=yit(this),n=!0,u,l=0,o=arguments.length;l<o;l++)u=_it(t,arguments[l]),n=n&&u;return!!n}})});var Hne=S(()=>{"use strict";VP()});var Zne=S((COt,Wne)=>{"use strict";var xit=Ln(),bit=Ct(),wit=Jr(),Sit=pt(),qit=Dc(),Iit=Sit("iterator"),Eit=Object;Wne.exports=function(e){if(wit(e))return!1;var t=Eit(e);return t[Iit]!==void 0||"@@iterator"in t||bit(qit,xit(t))}});var Tl=S((MOt,Xne)=>{"use strict";var Tit=xt(),Kne=Tt(),Ait=Zne(),Pit=wt(),Cit=Tit("Set"),Mit=function(e){return Pit(e)&&typeof e.size=="number"&&Kne(e.has)&&Kne(e.keys)};Xne.exports=function(e){return Mit(e)?e:Ait(e)?new Cit(e):e}});var Yne=S(()=>{"use strict";var Oit=V(),Rit=Ze(),kit=Tl(),Dit=$P();Oit({target:"Set",proto:!0,real:!0,forced:!0},{difference:function(t){return Rit(Dit,this,kit(t))}})});var Jne=S(()=>{"use strict";var Lit=V(),zit=or(),Fit=ki(),Nit=Bn();Lit({target:"Set",proto:!0,real:!0,forced:!0},{every:function(t){var n=Fit(this),u=zit(t,arguments.length>1?arguments[1]:void 0);return Nit(n,function(l){if(!u(l,l,n))return!1},!0)!==!1}})});var eae=S(()=>{"use strict";var Bit=V(),jit=or(),Uit=ki(),Qne=bi(),$it=Bn(),Vit=Qne.Set,Git=Qne.add;Bit({target:"Set",proto:!0,real:!0,forced:!0},{filter:function(t){var n=Uit(this),u=jit(t,arguments.length>1?arguments[1]:void 0),l=new Vit;return $it(n,function(o){u(o,o,n)&&Git(l,o)}),l}})});var tae=S(()=>{"use strict";var Hit=V(),Wit=or(),Zit=ki(),Kit=Bn();Hit({target:"Set",proto:!0,real:!0,forced:!0},{find:function(t){var n=Zit(this),u=Wit(t,arguments.length>1?arguments[1]:void 0),l=Kit(n,function(o){if(u(o,o,n))return{value:o}},!0);return l&&l.value}})});var iae=S(()=>{"use strict";var Xit=V(),rae=bi(),Yit=qg();Xit({target:"Set",stat:!0,forced:!0},{from:Yit(rae.Set,rae.add,!1)})});var nae=S(()=>{"use strict";WP()});var aae=S(()=>{"use strict";var Jit=V(),Qit=Ze(),ent=Tl(),tnt=HP();Jit({target:"Set",proto:!0,real:!0,forced:!0},{intersection:function(t){return Qit(tnt,this,ent(t))}})});var oae=S(()=>{"use strict";KP()});var sae=S(()=>{"use strict";var rnt=V(),int=Ze(),nnt=Tl(),ant=ZP();rnt({target:"Set",proto:!0,real:!0,forced:!0},{isDisjointFrom:function(t){return int(ant,this,nnt(t))}})});var uae=S(()=>{"use strict";YP()});var lae=S(()=>{"use strict";var ont=V(),snt=Ze(),unt=Tl(),lnt=XP();ont({target:"Set",proto:!0,real:!0,forced:!0},{isSubsetOf:function(t){return snt(lnt,this,unt(t))}})});var cae=S(()=>{"use strict";QP()});var hae=S(()=>{"use strict";var cnt=V(),hnt=Ze(),fnt=Tl(),dnt=JP();cnt({target:"Set",proto:!0,real:!0,forced:!0},{isSupersetOf:function(t){return hnt(dnt,this,fnt(t))}})});var dae=S(()=>{"use strict";var pnt=V(),fae=Pe(),mnt=ki(),vnt=Bn(),gnt=qt(),ynt=fae([].join),_nt=fae([].push);pnt({target:"Set",proto:!0,real:!0,forced:!0},{join:function(t){var n=mnt(this),u=t===void 0?",":gnt(t),l=[];return vnt(n,function(o){_nt(l,o)}),ynt(l,u)}})});var mae=S(()=>{"use strict";var xnt=V(),bnt=or(),wnt=ki(),pae=bi(),Snt=Bn(),qnt=pae.Set,Int=pae.add;xnt({target:"Set",proto:!0,real:!0,forced:!0},{map:function(t){var n=wnt(this),u=bnt(t,arguments.length>1?arguments[1]:void 0),l=new qnt;return Snt(n,function(o){Int(l,u(o,o,n))}),l}})});var gae=S(()=>{"use strict";var Ent=V(),vae=bi(),Tnt=Ig();Ent({target:"Set",stat:!0,forced:!0},{of:Tnt(vae.Set,vae.add,!1)})});var yae=S(()=>{"use strict";var Ant=V(),Pnt=_t(),Cnt=ki(),Mnt=Bn(),Ont=TypeError;Ant({target:"Set",proto:!0,real:!0,forced:!0},{reduce:function(t){var n=Cnt(this),u=arguments.length<2,l=u?void 0:arguments[1];if(Pnt(t),Mnt(n,function(o){u?(u=!1,l=o):l=t(l,o,o,n)}),u)throw new Ont("Reduce of empty set with no initial value");return l}})});var _ae=S(()=>{"use strict";var Rnt=V(),knt=or(),Dnt=ki(),Lnt=Bn();Rnt({target:"Set",proto:!0,real:!0,forced:!0},{some:function(t){var n=Dnt(this),u=knt(t,arguments.length>1?arguments[1]:void 0);return Lnt(n,function(l){if(u(l,l,n))return!0},!0)===!0}})});var xae=S(()=>{"use strict";rC()});var bae=S(()=>{"use strict";var znt=V(),Fnt=Ze(),Nnt=Tl(),Bnt=tC();znt({target:"Set",proto:!0,real:!0,forced:!0},{symmetricDifference:function(t){return Fnt(Bnt,this,Nnt(t))}})});var wae=S(()=>{"use strict";nC()});var Sae=S(()=>{"use strict";var jnt=V(),Unt=Ze(),$nt=Tl(),Vnt=iC();jnt({target:"Set",proto:!0,real:!0,forced:!0},{union:function(t){return Unt(Vnt,this,$nt(t))}})});var qae=S(()=>{"use strict";var Gnt=V(),Hnt=Hc().charAt,Wnt=mr(),Znt=gr(),Knt=qt();Gnt({target:"String",proto:!0,forced:!0},{at:function(t){var n=Knt(Wnt(this)),u=n.length,l=Znt(t),o=l>=0?l:u+l;return o<0||o>=u?void 0:Hnt(n,o)}})});var jO=S((qRt,Aae)=>{"use strict";var Tae=Pe(),Xnt=Qr(),Iae=qt(),Ynt=Nt(),Jnt=TypeError,Eae=Tae([].push),Qnt=Tae([].join);Aae.exports=function(t){var n=Xnt(t),u=Ynt(n);if(!u)return"";for(var l=arguments.length,o=[],_=0;;){var b=n[_++];if(b===void 0)throw new Jnt("Incorrect template");if(Eae(o,Iae(b)),_===u)return Qnt(o,"");_<l&&Eae(o,Iae(arguments[_]))}}});var Pae=S(()=>{"use strict";var eat=V(),tat=jO();eat({target:"String",stat:!0,forced:!0},{cooked:tat})});var kae=S(()=>{"use strict";var rat=V(),iat=cl(),Cae=xi(),nat=mr(),aat=qt(),Mae=Yt(),Oae=Hc(),oat=Oae.codeAt,sat=Oae.charAt,Rae="String Iterator",uat=Mae.set,lat=Mae.getterFor(Rae),cat=iat(function(t){uat(this,{type:Rae,string:t,index:0})},"String",function(){var t=lat(this),n=t.string,u=t.index,l;return u>=n.length?Cae(void 0,!0):(l=sat(n,u),t.index+=l.length,Cae({codePoint:oat(l,0),position:u},!1))});rat({target:"String",proto:!0,forced:!0},{codePoints:function(){return new cat(aat(nat(this)))}})});var Vs=S((PRt,Dae)=>{"use strict";var _b=Pe(),xb=WeakMap.prototype;Dae.exports={WeakMap,set:_b(xb.set),get:_b(xb.get),has:_b(xb.has),remove:_b(xb.delete)}});var Vae=S((CRt,$ae)=>{"use strict";var hat=xt(),bb=Pe(),fat=String.fromCharCode,dat=hat("String","fromCodePoint"),UO=bb("".charAt),jae=bb("".charCodeAt),Lae=bb("".indexOf),zae=bb("".slice),VO=48,Uae=57,Fae=97,pat=102,Nae=65,mat=70,Bae=function(e,t){var n=jae(e,t);return n>=VO&&n<=Uae},$O=function(e,t,n){if(n>=e.length)return-1;for(var u=0;t<n;t++){var l=vat(jae(e,t));if(l===-1)return-1;u=u*16+l}return u},vat=function(e){return e>=VO&&e<=Uae?e-VO:e>=Fae&&e<=pat?e-Fae+10:e>=Nae&&e<=mat?e-Nae+10:-1};$ae.exports=function(e){for(var t="",n=0,u=0,l;(u=Lae(e,"\\",u))>-1;){if(t+=zae(e,n,u),++u===e.length)return;var o=UO(e,u++);switch(o){case"b":t+="\b";break;case"t":t+="\t";break;case"n":t+=`
`;break;case"v":t+="\x0B";break;case"f":t+="\f";break;case"r":t+="\r";break;case"\r":u<e.length&&UO(e,u)===`
`&&++u;case`
`:case"\u2028":case"\u2029":break;case"0":if(Bae(e,u))return;t+="\0";break;case"x":if(l=$O(e,u,u+2),l===-1)return;u+=2,t+=fat(l);break;case"u":if(u<e.length&&UO(e,u)==="{"){var _=Lae(e,"}",++u);if(_===-1)return;l=$O(e,u,_),u=_+1}else l=$O(e,u,u+4),u+=4;if(l===-1||l>1114111)return;t+=dat(l);break;default:if(Bae(o,0))return;t+=o;}n=u}return t+zae(e,n)}});var eoe=S(()=>{"use strict";var gat=js(),yat=V(),_at=lv(),wb=Pe(),Kae=tn(),Xae=He(),xat=kt(),bat=Tt(),wat=Nt(),Sat=dr().f,qat=zn(),Sb=Vs(),Iat=jO(),Eat=Vae(),Yae=Bc(),GO=new Sb.WeakMap,Tat=Sb.get,Aat=Sb.has,Pat=Sb.set,HO=Array,kg=TypeError,Gae=Object.freeze||Object,Cat=Object.isFrozen,Mat=Math.min,Hae=wb("".charAt),Jae=wb("".slice),Oat=wb("".split),Wae=wb(/./.exec),Rat=/([\n\u2028\u2029]|\r\n?)/g,kat=RegExp("^["+Yae+"]*"),Dat=RegExp("[^"+Yae+"]"),Zae="Invalid tag",Lat="Invalid opening line",zat="Invalid closing line",Fat=function(e){var t=e.raw;if(gat&&!Cat(t))throw new kg("Raw template should be frozen");if(Aat(GO,t))return Tat(GO,t);var n=Nat(t),u=jat(n);return Sat(u,"raw",{value:Gae(n)}),Gae(u),Pat(GO,t,u),u},Nat=function(e){var t=xat(e),n=wat(t),u=HO(n),l=HO(n),o=0,_,b,E,T;if(!n)throw new kg(Zae);for(;o<n;o++){var C=t[o];if(typeof C=="string")u[o]=Oat(C,Rat);else throw new kg(Zae)}for(o=0;o<n;o++){var z=o+1===n;if(_=u[o],o===0){if(_.length===1||_[0].length>0)throw new kg(Lat);_[1]=""}if(z){if(_.length===1||Wae(Dat,_[_.length-1]))throw new kg(zat);_[_.length-2]="",_[_.length-1]=""}for(var $=2;$<_.length;$+=2){var oe=_[$],xe=$+1===_.length&&!z,_e=Wae(kat,oe)[0];if(!xe&&_e.length===oe.length){_[$]="";continue}b=Bat(_e,b)}}var X=b?b.length:0;for(o=0;o<n;o++){for(_=u[o],E=_[0],T=1;T<_.length;T+=2)E+=_[T]+Jae(_[T+1],X);l[o]=E}return l},Bat=function(e,t){if(t===void 0||e===t)return e;for(var n=0,u=Mat(e.length,t.length);n<u&&Hae(e,n)===Hae(t,n);n++);return Jae(e,0,n)},jat=function(e){for(var t=0,n=e.length,u=HO(n);t<n;t++)u[t]=Eat(e[t]);return u},Qae=function(e){return _at(function(t){var n=qat(arguments);return n[0]=Fat(Xae(t)),Kae(e,this,n)},"")},Uat=Qae(Iat);yat({target:"String",stat:!0,forced:!0},{dedent:function(t){return Xae(t),bat(t)?Qae(t):Kae(Uat,this,arguments)}})});var toe=S(()=>{"use strict";sC()});var roe=S(()=>{"use strict";mC()});var ioe=S(()=>{"use strict";IC()});var noe=S(()=>{"use strict";OC()});var aoe=S(()=>{"use strict";var $at=$e(),Vat=Cr(),Gat=dr().f,Hat=yi().f,WO=$at.Symbol;Vat("asyncDispose");WO&&(Dg=Hat(WO,"asyncDispose"),Dg.enumerable&&Dg.configurable&&Dg.writable&&Gat(WO,"asyncDispose",{value:Dg.value,enumerable:!1,configurable:!1,writable:!1}));var Dg});var ooe=S(()=>{"use strict";var Wat=Cr();Wat("customMatcher")});var soe=S(()=>{"use strict";var Zat=$e(),Kat=Cr(),Xat=dr().f,Yat=yi().f,ZO=Zat.Symbol;Kat("dispose");ZO&&(Lg=Yat(ZO,"dispose"),Lg.enumerable&&Lg.configurable&&Lg.writable&&Xat(ZO,"dispose",{value:Lg.value,enumerable:!1,configurable:!1,writable:!1}));var Lg});var XO=S((WRt,uoe)=>{"use strict";var Jat=xt(),Qat=Pe(),KO=Jat("Symbol"),eot=KO.keyFor,tot=Qat(KO.prototype.valueOf);uoe.exports=KO.isRegisteredSymbol||function(t){try{return eot(tot(t))!==void 0}catch(n){return!1}}});var loe=S(()=>{"use strict";var rot=V(),iot=XO();rot({target:"Symbol",stat:!0},{isRegisteredSymbol:iot})});var coe=S(()=>{"use strict";var not=V(),aot=XO();not({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:aot})});var QO=S((JRt,voe)=>{"use strict";var oot=Cs(),poe=xt(),sot=Pe(),uot=Ps(),lot=pt(),Ib=poe("Symbol"),hoe=Ib.isWellKnownSymbol,moe=poe("Object","getOwnPropertyNames"),cot=sot(Ib.prototype.valueOf),foe=oot("wks");for(qb=0,YO=moe(Ib),doe=YO.length;qb<doe;qb++)try{JO=YO[qb],uot(Ib[JO])&&lot(JO)}catch(e){}var JO,qb,YO,doe;voe.exports=function(t){if(hoe&&hoe(t))return!0;try{for(var n=cot(t),u=0,l=moe(foe),o=l.length;u<o;u++)if(foe[l[u]]==n)return!0}catch(_){}return!1}});var goe=S(()=>{"use strict";var hot=V(),fot=QO();hot({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:fot})});var yoe=S(()=>{"use strict";var dot=V(),pot=QO();dot({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:pot})});var _oe=S(()=>{"use strict";var mot=Cr();mot("matcher")});var xoe=S(()=>{"use strict";var vot=Cr();vot("metadata")});var boe=S(()=>{"use strict";var got=Cr();got("metadataKey")});var woe=S(()=>{"use strict";var yot=Cr();yot("observable")});var Soe=S(()=>{"use strict";var _ot=Cr();_ot("patternMatch")});var qoe=S(()=>{"use strict";var xot=Cr();xot("replaceAll")});var Eoe=S(()=>{"use strict";var bot=xt(),wot=Hv(),Sot=qM(),Ioe=Ot(),qot=Ls(),Iot=Ioe.aTypedArrayConstructor,Eot=Ioe.exportTypedArrayStaticMethod;Eot("fromAsync",function(t){var n=this,u=arguments.length,l=u>1?arguments[1]:void 0,o=u>2?arguments[2]:void 0;return new(bot("Promise"))(function(_){wot(n),_(Sot(t,l,o))}).then(function(_){return qot(Iot(n),_)})},!0)});var Toe=S(()=>{"use strict";WC()});var Poe=S(()=>{"use strict";var Aoe=Ot(),Tot=Ur().filterReject,Aot=E1(),Pot=Aoe.aTypedArray,Cot=Aoe.exportTypedArrayMethod;Cot("filterOut",function(t){var n=Tot(Pot(this),t,arguments.length>1?arguments[1]:void 0);return Aot(this,n)},!0)});var Moe=S(()=>{"use strict";var Coe=Ot(),Mot=Ur().filterReject,Oot=E1(),Rot=Coe.aTypedArray,kot=Coe.exportTypedArrayMethod;kot("filterReject",function(t){var n=Mot(Rot(this),t,arguments.length>1?arguments[1]:void 0);return Oot(this,n)},!0)});var Ooe=S(()=>{"use strict";ZC()});var Roe=S(()=>{"use strict";KC()});var koe=S(()=>{"use strict";var eR=Ot(),Dot=G1(),Lot=eR.aTypedArray,zot=eR.getTypedArrayConstructor,Fot=eR.exportTypedArrayMethod;Fot("groupBy",function(t){var n=arguments.length>1?arguments[1]:void 0;return Dot(Lot(this),t,n,zot)},!0)});var Doe=S(()=>{"use strict";lM()});var Loe=S(()=>{"use strict";cM()});var zoe=S(()=>{"use strict";var tR=Ot(),Not=Nt(),Bot=b1(),jot=lo(),Uot=sg(),$ot=gr(),Vot=Oe(),Got=tR.aTypedArray,Hot=tR.getTypedArrayConstructor,Wot=tR.exportTypedArrayMethod,Zot=Math.max,Kot=Math.min,Xot=!Vot(function(){var e=new Int8Array([1]),t=e.toSpliced(1,0,{valueOf:function(){return e[0]=2,3}});return t[0]!==2||t[1]!==3});Wot("toSpliced",function(t,n){var u=Got(this),l=Hot(u),o=Not(u),_=jot(t,o),b=arguments.length,E=0,T,C,z,$,oe,xe,_e;if(b===0)T=C=0;else if(b===1)T=0,C=o-_;else if(C=Kot(Zot($ot(n),0),o-_),T=b-2,T){$=new l(T),z=Bot($);for(var X=2;X<b;X++)oe=arguments[X],$[X-2]=z?Uot(oe):+oe}for(xe=o+T-C,_e=new l(xe);E<_;E++)_e[E]=u[E];for(;E<_+T;E++)_e[E]=$[E-_];for(;E<xe;E++)_e[E]=u[E+C-T];return _e},!Xot)});var Foe=S(()=>{"use strict";var Yot=Pe(),rR=Ot(),Jot=Ls(),Qot=W1(),est=rR.aTypedArray,tst=rR.getTypedArrayConstructor,rst=rR.exportTypedArrayMethod,ist=Yot(Qot);rst("uniqueBy",function(t){return est(this),Jot(tst(this),ist(this,t))},!0)});var Noe=S(()=>{"use strict";fM()});var iR=S((Nkt,Boe)=>{"use strict";var nst=wt(),ast=String,ost=TypeError;Boe.exports=function(e){if(e===void 0||nst(e))return e;throw new ost(ast(e)+" is not an object or undefined")}});var zg=S((Bkt,Goe)=>{"use strict";var Voe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",joe=Voe+"+/",Uoe=Voe+"-_",$oe=function(e){for(var t={},n=0;n<64;n++)t[e.charAt(n)]=n;return t};Goe.exports={i2c:joe,c2i:$oe(joe),i2cUrl:Uoe,c2iUrl:$oe(Uoe)}});var nR=S((jkt,Hoe)=>{"use strict";var sst=TypeError;Hoe.exports=function(e){var t=e&&e.alphabet;if(t===void 0||t==="base64"||t==="base64url")return t||"base64";throw new sst("Incorrect `alphabet` option")}});var uR=S((Ukt,Koe)=>{"use strict";var Woe=$e(),ust=Pe(),lst=iR(),cst=Og(),hst=Ct(),Zoe=zg(),fst=nR(),dst=Yf(),pst=Zoe.c2i,mst=Zoe.c2iUrl,Al=Woe.SyntaxError,vst=Woe.TypeError,Jc=ust("".charAt),aR=function(e,t){for(var n=e.length;t<n;t++){var u=Jc(e,t);if(u!==" "&&u!=="\t"&&u!==`
`&&u!=="\f"&&u!=="\r")break}return t},oR=function(e,t,n){var u=e.length;u<4&&(e+=u===2?"AA":"A");var l=(t[Jc(e,0)]<<18)+(t[Jc(e,1)]<<12)+(t[Jc(e,2)]<<6)+t[Jc(e,3)],o=[l>>16&255,l>>8&255,l&255];if(u===2){if(n&&o[1]!==0)throw new Al("Extra bits");return[o[0]]}if(u===3){if(n&&o[2]!==0)throw new Al("Extra bits");return[o[0],o[1]]}return o},sR=function(e,t,n){for(var u=t.length,l=0;l<u;l++)e[n+l]=t[l];return n+u};Koe.exports=function(e,t,n,u){cst(e),lst(t);var l=fst(t)==="base64"?pst:mst,o=t?t.lastChunkHandling:void 0;if(o===void 0&&(o="loose"),o!=="loose"&&o!=="strict"&&o!=="stop-before-partial")throw new vst("Incorrect `lastChunkHandling` option");n&&dst(n.buffer);var _=n||[],b=0,E=0,T="",C=0;if(u)for(;;){if(C=aR(e,C),C===e.length){if(T.length>0){if(o==="stop-before-partial")break;if(o==="loose"){if(T.length===1)throw new Al("Malformed padding: exactly one additional character");b=sR(_,oR(T,l,!1),b)}else throw new Al("Missing padding")}E=e.length;break}var z=Jc(e,C);if(++C,z==="="){if(T.length<2)throw new Al("Padding is too early");if(C=aR(e,C),T.length===2){if(C===e.length){if(o==="stop-before-partial")break;throw new Al("Malformed padding: only one =")}Jc(e,C)==="="&&(++C,C=aR(e,C))}if(C<e.length)throw new Al("Unexpected character after padding");b=sR(_,oR(T,l,o==="strict"),b),E=e.length;break}if(!hst(l,z))throw new Al("Unexpected character");var $=u-b;if($===1&&T.length===2||$===2&&T.length===3||(T+=z,T.length===4&&(b=sR(_,oR(T,l,!1),b),T="",E=C,b===u)))break}return{bytes:_,read:E,written:b}}});var Yoe=S(()=>{"use strict";var gst=V(),yst=$e(),_st=Ls(),xst=uR(),Xoe=yst.Uint8Array;Xoe&&gst({target:"Uint8Array",stat:!0},{fromBase64:function(t){var n=xst(t,arguments.length>1?arguments[1]:void 0,null,9007199254740991);return _st(Xoe,n.bytes)}})});var cR=S((Gkt,tse)=>{"use strict";var lR=$e(),Qoe=Pe(),bst=lR.Uint8Array,Joe=lR.SyntaxError,wst=lR.parseInt,Sst=Math.min,ese=/[^\da-f]/i,qst=Qoe(ese.exec),Ist=Qoe("".slice);tse.exports=function(e,t){var n=e.length;if(n%2!==0)throw new Joe("String should be an even number of characters");for(var u=t?Sst(t.length,n/2):n/2,l=t||new bst(u),o=0,_=0;_<u;){var b=Ist(e,o,o+=2);if(qst(ese,b))throw new Joe("String should only contain hex characters");l[_++]=wst(b,16)}return{bytes:l,read:o}}});var rse=S(()=>{"use strict";var Est=V(),Tst=$e(),Ast=Og(),Pst=cR();Tst.Uint8Array&&Est({target:"Uint8Array",stat:!0},{fromHex:function(t){return Pst(Ast(t)).bytes}})});var Fg=S((Zkt,ise)=>{"use strict";var Cst=Ln(),Mst=TypeError;ise.exports=function(e){if(Cst(e)==="Uint8Array")return e;throw new Mst("Argument is not an Uint8Array")}});var nse=S(()=>{"use strict";var Ost=V(),Rst=$e(),kst=uR(),Dst=Fg(),Lst=Rst.Uint8Array;Lst&&Ost({target:"Uint8Array",proto:!0},{setFromBase64:function(t){Dst(this);var n=kst(t,arguments.length>1?arguments[1]:void 0,this,this.length);return{read:n.read,written:n.written}}})});var ase=S(()=>{"use strict";var zst=V(),Fst=$e(),Nst=Og(),Bst=Fg(),jst=Yf(),Ust=cR();Fst.Uint8Array&&zst({target:"Uint8Array",proto:!0},{setFromHex:function(t){Bst(this),Nst(t),jst(this.buffer);var n=Ust(t,this).read;return{read:n,written:n/2}}})});var sse=S(()=>{"use strict";var $st=V(),Vst=$e(),Gst=Pe(),Hst=iR(),Wst=Fg(),Zst=Yf(),ose=zg(),Kst=nR(),Xst=ose.i2c,Yst=ose.i2cUrl,Jst=Gst("".charAt);Vst.Uint8Array&&$st({target:"Uint8Array",proto:!0},{toBase64:function(){var t=Wst(this),n=arguments.length?Hst(arguments[0]):void 0,u=Kst(n)==="base64"?Xst:Yst,l=!!n&&!!n.omitPadding;Zst(this.buffer);for(var o="",_=0,b=t.length,E,T=function(C){return Jst(u,E>>6*C&63)};_+2<b;_+=3)E=(t[_]<<16)+(t[_+1]<<8)+t[_+2],o+=T(3)+T(2)+T(1)+T(0);return _+2===b?(E=(t[_]<<16)+(t[_+1]<<8),o+=T(3)+T(2)+T(1)+(l?"":"=")):_+1===b&&(E=t[_]<<16,o+=T(3)+T(2)+(l?"":"==")),o}})});var use=S(()=>{"use strict";var Qst=V(),eut=$e(),tut=Pe(),rut=Fg(),iut=Yf(),nut=tut(1 .toString);eut.Uint8Array&&Qst({target:"Uint8Array",proto:!0},{toHex:function(){rut(this),iut(this.buffer);for(var t="",n=0,u=this.length;n<u;n++){var l=nut(this[n],16);t+=l.length===1?"0"+l:l}return t}})});var Ng=S((iDt,lse)=>{"use strict";var aut=Vs().has;lse.exports=function(e){return aut(e),e}});var cse=S(()=>{"use strict";var out=V(),sut=Ng(),uut=Vs().remove;out({target:"WeakMap",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=sut(this),n=!0,u,l=0,o=arguments.length;l<o;l++)u=uut(t,arguments[l]),n=n&&u;return!!n}})});var fse=S(()=>{"use strict";var lut=V(),hse=Vs(),cut=qg();lut({target:"WeakMap",stat:!0,forced:!0},{from:cut(hse.WeakMap,hse.set,!0)})});var pse=S(()=>{"use strict";var hut=V(),dse=Vs(),fut=Ig();hut({target:"WeakMap",stat:!0,forced:!0},{of:fut(dse.WeakMap,dse.set,!0)})});var vse=S(()=>{"use strict";var dut=V(),put=Ng(),hR=Vs(),mut=hR.get,vut=hR.has,mse=hR.set;dut({target:"WeakMap",proto:!0,real:!0,forced:!0},{emplace:function(t,n){var u=put(this),l,o;return vut(u,t)?(l=mut(u,t),"update"in n&&(l=n.update(l,t,u),mse(u,t,l)),l):(o=n.insert(t,u),mse(u,t,o),o)}})});var gse=S(()=>{"use strict";var gut=V(),yut=Ng(),fR=Vs(),_ut=fR.get,xut=fR.has,but=fR.set;gut({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsert:function(t,n){return xut(yut(this),t)?_ut(this,t):(but(this,t,n),n)}})});var _se=S(()=>{"use strict";var wut=V(),Sut=_t(),qut=Ng(),dR=Vs(),Iut=dR.get,Eut=dR.has,yse=dR.set;wut({target:"WeakMap",proto:!0,real:!0,forced:!0},{getOrInsertComputed:function(t,n){if(qut(this),Sut(n),Eut(this,t))return Iut(this,t);yse(this,t);var u=n(t);return yse(this,t,u),u}})});var xse=S(()=>{"use strict";var Tut=V(),Aut=hb();Tut({target:"WeakMap",proto:!0,real:!0,forced:!0},{upsert:Aut})});var Ad=S((yDt,bse)=>{"use strict";var pR=Pe(),mR=WeakSet.prototype;bse.exports={WeakSet,add:pR(mR.add),has:pR(mR.has),remove:pR(mR.delete)}});var vR=S((_Dt,wse)=>{"use strict";var Put=Ad().has;wse.exports=function(e){return Put(e),e}});var Sse=S(()=>{"use strict";var Cut=V(),Mut=vR(),Out=Ad().add;Cut({target:"WeakSet",proto:!0,real:!0,forced:!0},{addAll:function(){for(var t=Mut(this),n=0,u=arguments.length;n<u;n++)Out(t,arguments[n]);return t}})});var qse=S(()=>{"use strict";var Rut=V(),kut=vR(),Dut=Ad().remove;Rut({target:"WeakSet",proto:!0,real:!0,forced:!0},{deleteAll:function(){for(var t=kut(this),n=!0,u,l=0,o=arguments.length;l<o;l++)u=Dut(t,arguments[l]),n=n&&u;return!!n}})});var Ese=S(()=>{"use strict";var Lut=V(),Ise=Ad(),zut=qg();Lut({target:"WeakSet",stat:!0,forced:!0},{from:zut(Ise.WeakSet,Ise.add,!1)})});var Ase=S(()=>{"use strict";var Fut=V(),Tse=Ad(),Nut=Ig();Fut({target:"WeakSet",stat:!0,forced:!0},{of:Nut(Tse.WeakSet,Tse.add,!1)})});var Dse=S(()=>{"use strict";var But=V(),jut=$e(),Mse=xt(),gR=Pe(),Uut=Ze(),Eb=Oe(),$ut=qt(),Vut=ca(),Pse=zg().c2i,Ose=/[^\d+/a-z]/i,Gut=/[\t\n\f\r ]+/g,Hut=/[=]{1,2}$/,Qc=Mse("atob"),Wut=String.fromCharCode,Zut=gR("".charAt),Cse=gR("".replace),Kut=gR(Ose.exec),Pd=!!Qc&&!Eb(function(){return Qc("aGk=")!=="hi"}),Rse=Pd&&Eb(function(){return Qc(" ")!==""}),kse=Pd&&!Eb(function(){Qc("a")}),Xut=Pd&&!Eb(function(){Qc()}),Yut=Pd&&Qc.length!==1,Jut=!Pd||Rse||kse||Xut||Yut;But({global:!0,bind:!0,enumerable:!0,forced:Jut},{atob:function(t){if(Vut(arguments.length,1),Pd&&!Rse&&!kse)return Uut(Qc,jut,t);var n=Cse($ut(t),Gut,""),u="",l=0,o=0,_,b,E;if(n.length%4===0&&(n=Cse(n,Hut,"")),_=n.length,_%4===1||Kut(Ose,n))throw new(Mse("DOMException"))("The string is not correctly encoded","InvalidCharacterError");for(;l<_;)b=Zut(n,l++),E=o%4?E*64+Pse[b]:Pse[b],o++%4&&(u+=Wut(255&E>>(-2*o&6)));return u}})});var Bse=S(()=>{"use strict";var Qut=V(),elt=$e(),Fse=xt(),Nse=Pe(),tlt=Ze(),yR=Oe(),Lse=qt(),rlt=ca(),ilt=zg().i2c,Cd=Fse("btoa"),zse=Nse("".charAt),nlt=Nse("".charCodeAt),Bg=!!Cd&&!yR(function(){return Cd("hi")!=="aGk="}),alt=Bg&&!yR(function(){Cd()}),olt=Bg&&yR(function(){return Cd(null)!=="bnVsbA=="}),slt=Bg&&Cd.length!==1;Qut({global:!0,bind:!0,enumerable:!0,forced:!Bg||alt||olt||slt},{btoa:function(t){if(rlt(arguments.length,1),Bg)return tlt(Cd,elt,Lse(t));for(var n=Lse(t),u="",l=0,o=ilt,_,b;zse(n,l)||(o="=",l%1);){if(b=nlt(n,l+=3/4),b>255)throw new(Fse("DOMException"))("The string contains characters outside of the Latin1 range","InvalidCharacterError");_=_<<8|b,u+=zse(o,63&_>>8-l%1*8)}return u}})});var _R=S((ODt,jse)=>{"use strict";jse.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}});var bR=S((RDt,$se)=>{"use strict";var ult=av(),xR=ult("span").classList,Use=xR&&xR.constructor&&xR.constructor.prototype;$se.exports=Use===Object.prototype?void 0:Use});var Wse=S(()=>{"use strict";var Vse=$e(),Gse=_R(),llt=bR(),wR=bT(),clt=ei(),Hse=function(e){if(e&&e.forEach!==wR)try{clt(e,"forEach",wR)}catch(t){e.forEach=wR}};for(Tb in Gse)Gse[Tb]&&Hse(Vse[Tb]&&Vse[Tb].prototype);var Tb;Hse(llt)});var Jse=S(()=>{"use strict";var Zse=$e(),Xse=_R(),hlt=bR(),jg=Iv(),Kse=ei(),flt=vn(),dlt=pt(),SR=dlt("iterator"),qR=jg.values,Yse=function(e,t){if(e){if(e[SR]!==qR)try{Kse(e,SR,qR)}catch(u){e[SR]=qR}if(flt(e,t,!0),Xse[t]){for(var n in jg)if(e[n]!==jg[n])try{Kse(e,n,jg[n])}catch(u){e[n]=jg[n]}}}};for(Ab in Xse)Yse(Zse[Ab]&&Zse[Ab].prototype,Ab);var Ab;Yse(hlt,"DOMTokenList")});var IR=S((FDt,Qse)=>{"use strict";Qse.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}});var cue=S(()=>{"use strict";var plt=V(),Mb=xt(),mlt=f2(),MR=Oe(),vlt=jr(),OR=kn(),Ob=dr().f,glt=tr(),Pb=yr(),Cb=Ct(),ylt=rn(),_lt=He(),rue=nT(),eue=Rc(),Md=IR(),xlt=tx(),iue=Yt(),RR=ht(),nue=Rt(),Od="DOMException",CR="DATA_CLONE_ERR",kb=Mb("Error"),Gs=Mb(Od)||function(){try{var e=Mb("MessageChannel")||mlt("worker_threads").MessageChannel;new e().port1.postMessage(new WeakMap)}catch(t){if(t.name===CR&&t.code===25)return t.constructor}}(),blt=Gs&&Gs.prototype,aue=kb.prototype,wlt=iue.set,Slt=iue.getterFor(Od),qlt="stack"in new kb(Od),oue=function(e){return Cb(Md,e)&&Md[e].m?Md[e].c:0},kR=function(){ylt(this,$g);var t=arguments.length,n=eue(t<1?void 0:arguments[0]),u=eue(t<2?void 0:arguments[1],"Error"),l=oue(u);if(wlt(this,{type:Od,name:u,message:n,code:l}),RR||(this.name=u,this.message=n,this.code=l),qlt){var o=new kb(n);o.name=Od,Ob(this,"stack",OR(1,xlt(o.stack,1)))}},$g=kR.prototype=vlt(aue),sue=function(e){return{enumerable:!0,configurable:!0,get:e}},ER=function(e){return sue(function(){return Slt(this)[e]})};RR&&(Pb($g,"code",ER("code")),Pb($g,"message",ER("message")),Pb($g,"name",ER("name")));Ob($g,"constructor",OR(1,kR));var Db=MR(function(){return!(new Gs instanceof kb)}),uue=Db||MR(function(){return aue.toString!==rue||String(new Gs(1,2))!=="2: 1"}),lue=Db||MR(function(){return new Gs(1,"DataCloneError").code!==25}),Ilt=Db||Gs[CR]!==25||blt[CR]!==25,tue=nue?uue||lue||Ilt:Db;plt({global:!0,constructor:!0,forced:tue},{DOMException:tue?kR:Gs});var Vg=Mb(Od),Rb=Vg.prototype;uue&&(nue||Gs===Vg)&&glt(Rb,"toString",rue);lue&&RR&&Gs===Vg&&Pb(Rb,"code",sue(function(){return oue(_lt(this).name)}));for(TR in Md)Cb(Md,TR)&&(AR=Md[TR],Ug=AR.s,PR=OR(6,AR.c),Cb(Vg,Ug)||Ob(Vg,Ug,PR),Cb(Rb,Ug)||Ob(Rb,Ug,PR));var AR,Ug,PR,TR});var gue=S(()=>{"use strict";var Elt=V(),Tlt=$e(),UR=xt(),BR=kn(),jR=dr().f,hue=Ct(),Alt=rn(),Plt=sl(),fue=Rc(),DR=IR(),Clt=tx(),Mlt=ht(),mue=Rt(),Hg="DOMException",vue=UR("Error"),Wg=UR(Hg),$R=function(){Alt(this,Olt);var t=arguments.length,n=fue(t<1?void 0:arguments[0]),u=fue(t<2?void 0:arguments[1],"Error"),l=new Wg(n,u),o=new vue(n);return o.name=Hg,jR(l,"stack",BR(1,Clt(o.stack,1))),Plt(l,this,$R),l},Olt=$R.prototype=Wg.prototype,Rlt="stack"in new vue(Hg),klt="stack"in new Wg(1,2),LR=Wg&&Mlt&&Object.getOwnPropertyDescriptor(Tlt,Hg),Dlt=!!LR&&!(LR.writable&&LR.configurable),due=Rlt&&!Dlt&&!klt;Elt({global:!0,constructor:!0,forced:mue||due},{DOMException:due?$R:Wg});var Gg=UR(Hg),pue=Gg.prototype;if(pue.constructor!==Gg){mue||jR(pue,"constructor",BR(1,Gg));for(zR in DR)hue(DR,zR)&&(FR=DR[zR],NR=FR.s,hue(Gg,NR)||jR(Gg,NR,BR(6,FR.c)))}var FR,NR,zR});var _ue=S(()=>{"use strict";var Llt=xt(),zlt=vn(),yue="DOMException";zlt(Llt(yue),yue)});var bue=S(()=>{"use strict";var Flt=V(),Nlt=$e(),xue=Xv().clear;Flt({global:!0,bind:!0,enumerable:!0,forced:Nlt.clearImmediate!==xue},{clearImmediate:xue})});var Lb=S((WDt,Sue)=>{"use strict";var wue=$e(),Blt=tn(),jlt=Tt(),Ult=Av(),$lt=oo(),Vlt=zn(),Glt=ca(),Hlt=wue.Function,Wlt=/MSIE .\./.test($lt)||Ult==="BUN"&&function(){var e=wue.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}();Sue.exports=function(e,t){var n=t?2:1;return Wlt?function(u,l){var o=Glt(arguments.length,1)>n,_=jlt(u)?u:Hlt(u),b=o?Vlt(arguments,n):[],E=o?function(){Blt(_,this,b)}:_;return t?e(E,l):e(E)}:e}});var Tue=S(()=>{"use strict";var Zlt=V(),Eue=$e(),que=Xv().set,Klt=Lb(),Iue=Eue.setImmediate?Klt(que,!1):que;Zlt({global:!0,bind:!0,enumerable:!0,forced:Eue.setImmediate!==Iue},{setImmediate:Iue})});var Aue=S(()=>{"use strict";bue();Tue()});var Pue=S(()=>{"use strict";var Xlt=V(),Ylt=$e(),Jlt=iP(),Qlt=_t(),ect=ca(),tct=Oe(),rct=ht(),ict=tct(function(){return rct&&Object.getOwnPropertyDescriptor(Ylt,"queueMicrotask").value.length!==1});Xlt({global:!0,enumerable:!0,dontCallGetSet:!0,forced:ict},{queueMicrotask:function(t){ect(arguments.length,1),Jlt(Qlt(t))}})});var Mue=S(()=>{"use strict";var nct=V(),Pl=$e(),act=yr(),oct=ht(),sct=TypeError,uct=Object.defineProperty,Cue=Pl.self!==Pl;try{oct?(zb=Object.getOwnPropertyDescriptor(Pl,"self"),(Cue||!zb||!zb.get||!zb.enumerable)&&act(Pl,"self",{get:function(){return Pl},set:function(t){if(this!==Pl)throw new sct("Illegal invocation");uct(Pl,"self",{value:t,writable:!0,configurable:!0,enumerable:!0})},configurable:!0,enumerable:!0})):nct({global:!0,simple:!0,forced:Cue},{self:Pl})}catch(e){}var zb});var Uue=S(()=>{"use strict";var lct=Rt(),cct=V(),Fi=$e(),Kg=xt(),Yg=Pe(),KR=Oe(),hct=il(),kd=Tt(),fct=ho(),dct=Jr(),Ub=wt(),pct=Ps(),mct=Mr(),kue=He(),Bb=Ln(),vct=Ct(),gct=Da(),VR=ei(),Fb=Nt(),yct=ca(),_ct=cd(),$b=si(),XR=bi(),xct=Bn(),Oue=_2(),bct=eT(),YR=kx(),Zg=Fi.Object,wct=Fi.Array,Due=Fi.Date,Lue=Fi.Error,Sct=Fi.TypeError,qct=Fi.PerformanceMark,eh=Kg("DOMException"),WR=$b.Map,JR=$b.has,zue=$b.get,jb=$b.set,Fue=XR.Set,Nue=XR.add,Ict=XR.has,Ect=Kg("Object","keys"),Tct=Yg([].push),Act=Yg((!0).valueOf),Pct=Yg(1 .valueOf),Cct=Yg("".valueOf),Mct=Yg(Due.prototype.getTime),ZR=hct("structuredClone"),Xg="DataCloneError",Nb="Transferring",Bue=function(e){return!KR(function(){var t=new Fi.Set([7]),n=e(t),u=e(Zg(7));return n===t||!n.has(7)||!Ub(u)||+u!=7})&&e},Rue=function(e,t){return!KR(function(){var n=new t,u=e({a:n,b:n});return!(u&&u.a===u.b&&u.a instanceof t&&u.a.stack===n.stack)})},Oct=function(e){return!KR(function(){var t=e(new Fi.AggregateError([1],ZR,{cause:3}));return t.name!=="AggregateError"||t.errors[0]!==1||t.message!==ZR||t.cause!==3})},Rd=Fi.structuredClone,Rct=lct||!Rue(Rd,Lue)||!Rue(Rd,eh)||!Oct(Rd),kct=!Rd&&Bue(function(e){return new qct(ZR,{detail:e}).detail}),Hs=Bue(Rd)||kct,GR=function(e){throw new eh("Uncloneable type: "+e,Xg)},$n=function(e,t){throw new eh((t||"Cloning")+" of "+e+" cannot be properly polyfilled in this engine",Xg)},HR=function(e,t){return Hs||$n(t),Hs(e)},Dct=function(){var e;try{e=new Fi.DataTransfer}catch(t){try{e=new Fi.ClipboardEvent("").clipboardData}catch(n){}}return e&&e.items&&e.files?e:null},jue=function(e,t,n){if(JR(t,e))return zue(t,e);var u=n||Bb(e),l,o,_,b,E,T;if(u==="SharedArrayBuffer")Hs?l=Hs(e):l=e;else{var C=Fi.DataView;!C&&!kd(e.slice)&&$n("ArrayBuffer");try{if(kd(e.slice)&&!e.resizable)l=e.slice(0);else for(o=e.byteLength,_=("maxByteLength"in e)?{maxByteLength:e.maxByteLength}:void 0,l=new ArrayBuffer(o,_),b=new C(e),E=new C(l),T=0;T<o;T++)E.setUint8(T,b.getUint8(T))}catch(z){throw new eh("ArrayBuffer is detached",Xg)}}return jb(t,e,l),l},Lct=function(e,t,n,u,l){var o=Fi[t];return Ub(o)||$n(t),new o(jue(e.buffer,l),n,u)},zi=function(e,t){if(pct(e)&&GR("Symbol"),!Ub(e))return e;if(t){if(JR(t,e))return zue(t,e)}else t=new WR;var n=Bb(e),u,l,o,_,b,E,T,C;switch(n){case"Array":o=wct(Fb(e));break;case"Object":o={};break;case"Map":o=new WR;break;case"Set":o=new Fue;break;case"RegExp":o=new RegExp(e.source,_ct(e));break;case"Error":switch(l=e.name,l){case"AggregateError":o=new(Kg(l))([]);break;case"EvalError":case"RangeError":case"ReferenceError":case"SuppressedError":case"SyntaxError":case"TypeError":case"URIError":o=new(Kg(l));break;case"CompileError":case"LinkError":case"RuntimeError":o=new(Kg("WebAssembly",l));break;default:o=new Lue;}break;case"DOMException":o=new eh(e.message,e.name);break;case"ArrayBuffer":case"SharedArrayBuffer":o=jue(e,t,n);break;case"DataView":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float16Array":case"Float32Array":case"Float64Array":case"BigInt64Array":case"BigUint64Array":E=n==="DataView"?e.byteLength:e.length,o=Lct(e,n,e.byteOffset,E,t);break;case"DOMQuad":try{o=new DOMQuad(zi(e.p1,t),zi(e.p2,t),zi(e.p3,t),zi(e.p4,t))}catch(z){o=HR(e,n)}break;case"File":if(Hs)try{o=Hs(e),Bb(o)!==n&&(o=void 0)}catch(z){}if(!o)try{o=new File([e],e.name,e)}catch(z){}o||$n(n);break;case"FileList":if(_=Dct(),_){for(b=0,E=Fb(e);b<E;b++)_.items.add(zi(e[b],t));o=_.files}else o=HR(e,n);break;case"ImageData":try{o=new ImageData(zi(e.data,t),e.width,e.height,{colorSpace:e.colorSpace})}catch(z){o=HR(e,n)}break;default:if(Hs)o=Hs(e);else switch(n){case"BigInt":o=Zg(e.valueOf());break;case"Boolean":o=Zg(Act(e));break;case"Number":o=Zg(Pct(e));break;case"String":o=Zg(Cct(e));break;case"Date":o=new Due(Mct(e));break;case"Blob":try{o=e.slice(0,e.size,e.type)}catch(z){$n(n)}break;case"DOMPoint":case"DOMPointReadOnly":u=Fi[n];try{o=u.fromPoint?u.fromPoint(e):new u(e.x,e.y,e.z,e.w)}catch(z){$n(n)}break;case"DOMRect":case"DOMRectReadOnly":u=Fi[n];try{o=u.fromRect?u.fromRect(e):new u(e.x,e.y,e.width,e.height)}catch(z){$n(n)}break;case"DOMMatrix":case"DOMMatrixReadOnly":u=Fi[n];try{o=u.fromMatrix?u.fromMatrix(e):new u(e)}catch(z){$n(n)}break;case"AudioData":case"VideoFrame":kd(e.clone)||$n(n);try{o=e.clone()}catch(z){GR(n)}break;case"CropTarget":case"CryptoKey":case"FileSystemDirectoryHandle":case"FileSystemFileHandle":case"FileSystemHandle":case"GPUCompilationInfo":case"GPUCompilationMessage":case"ImageBitmap":case"RTCCertificate":case"WebAssembly.Module":$n(n);default:GR(n);}}switch(jb(t,e,o),n){case"Array":case"Object":for(T=Ect(e),b=0,E=Fb(T);b<E;b++)C=T[b],gct(o,C,zi(e[C],t));break;case"Map":e.forEach(function(z,$){jb(o,zi($,t),zi(z,t))});break;case"Set":e.forEach(function(z){Nue(o,zi(z,t))});break;case"Error":VR(o,"message",zi(e.message,t)),vct(e,"cause")&&VR(o,"cause",zi(e.cause,t)),l==="AggregateError"?o.errors=zi(e.errors,t):l==="SuppressedError"&&(o.error=zi(e.error,t),o.suppressed=zi(e.suppressed,t));case"DOMException":bct&&VR(o,"stack",zi(e.stack,t));}return o},zct=function(e,t){if(!Ub(e))throw new Sct("Transfer option cannot be converted to a sequence");var n=[];mct(e,function($){Tct(n,kue($))});for(var u=0,l=Fb(n),o=new Fue,_,b,E,T,C,z;u<l;){if(_=n[u++],b=Bb(_),b==="ArrayBuffer"?Ict(o,_):JR(t,_))throw new eh("Duplicate transferable",Xg);if(b==="ArrayBuffer"){Nue(o,_);continue}if(YR)T=Rd(_,{transfer:[_]});else switch(b){case"ImageBitmap":E=Fi.OffscreenCanvas,fct(E)||$n(b,Nb);try{C=new E(_.width,_.height),z=C.getContext("bitmaprenderer"),z.transferFromImageBitmap(_),T=C.transferToImageBitmap()}catch($){}break;case"AudioData":case"VideoFrame":(!kd(_.clone)||!kd(_.close))&&$n(b,Nb);try{T=_.clone(),_.close()}catch($){}break;case"MediaSourceHandle":case"MessagePort":case"MIDIAccess":case"OffscreenCanvas":case"ReadableStream":case"RTCDataChannel":case"TransformStream":case"WebTransportReceiveStream":case"WebTransportSendStream":case"WritableStream":$n(b,Nb);}if(T===void 0)throw new eh("This object cannot be transferred: "+b,Xg);jb(t,_,T)}return o},Fct=function(e){xct(e,function(t){YR?Hs(t,{transfer:[t]}):kd(t.transfer)?t.transfer():Oue?Oue(t):$n("ArrayBuffer",Nb)})};cct({global:!0,enumerable:!0,sham:!YR,forced:Rct},{structuredClone:function(t){var n=yct(arguments.length,1)>1&&!dct(arguments[1])?kue(arguments[1]):void 0,u=n?n.transfer:void 0,l,o;u!==void 0&&(l=new WR,o=zct(u,l));var _=zi(t,l);return o&&Fct(o),_}})});var Gue=S(()=>{"use strict";var Nct=V(),Vue=$e(),Bct=Lb(),$ue=Bct(Vue.setInterval,!0);Nct({global:!0,bind:!0,forced:Vue.setInterval!==$ue},{setInterval:$ue})});var Zue=S(()=>{"use strict";var jct=V(),Wue=$e(),Uct=Lb(),Hue=Uct(Wue.setTimeout,!0);jct({global:!0,bind:!0,forced:Wue.setTimeout!==Hue},{setTimeout:Hue})});var Kue=S(()=>{"use strict";Gue();Zue()});var Jg=S((cLt,Yue)=>{"use strict";var $ct=Oe(),Vct=pt(),Gct=ht(),Xue=Rt(),Hct=Vct("iterator");Yue.exports=!$ct(function(){var e=new URL("b?a=1&b=2&c=3","https://a"),t=e.searchParams,n=new URLSearchParams("a=1&a=2&b=3"),u="";return e.pathname="c%20d",t.forEach(function(l,o){t.delete("b"),u+=o+l}),n.delete("a",2),n.delete("b",void 0),Xue&&(!e.toJSON||!n.has("a",1)||n.has("a",2)||!n.has("a",void 0)||n.has("b"))||!t.size&&(Xue||!Gct)||!t.sort||e.href!=="https://a/c%20d?a=1&c=3"||t.get("c")!=="3"||String(new URLSearchParams("?a=1"))!=="a=1"||!t[Hct]||new URL("https://a@b").username!=="a"||new URLSearchParams(new URLSearchParams("a=b")).get("a")!=="b"||new URL("https://\u0442\u0435\u0441\u0442").host!=="xn--e1aybc"||new URL("https://a#\u0431").hash!=="#%D0%B1"||u!=="a1c3"||new URL("https://x",void 0).host!=="x"})});var ole=S((hLt,ale)=>{"use strict";var th=Pe(),QR=2147483647,Qg=36,rle=1,rk=26,Wct=38,Zct=700,Kct=72,Xct=128,Yct="-",Jct=/[^\0-\u007E]/,ile=/[.\u3002\uFF0E\uFF61]/g,Jue="Overflow: input needs wider integers to process",ek=Qg-rle,Que=RangeError,Qct=th(ile.exec),Dd=Math.floor,tk=String.fromCharCode,ele=th("".charCodeAt),nle=th([].join),Cl=th([].push),eht=th("".replace),tht=th("".split),rht=th("".toLowerCase),iht=function(e){for(var t=[],n=0,u=e.length;n<u;){var l=ele(e,n++);if(l>=55296&&l<=56319&&n<u){var o=ele(e,n++);(o&64512)===56320?Cl(t,((l&1023)<<10)+(o&1023)+65536):(Cl(t,l),n--)}else Cl(t,l)}return t},tle=function(e){return e+22+75*(e<26)},nht=function(e,t,n){var u=0;for(e=n?Dd(e/Zct):e>>1,e+=Dd(e/t);e>ek*rk>>1;)e=Dd(e/ek),u+=Qg;return Dd(u+(ek+1)*e/(e+Wct))},aht=function(e){var t=[];e=iht(e);var n=e.length,u=Xct,l=0,o=Kct,_,b;for(_=0;_<e.length;_++)b=e[_],b<128&&Cl(t,tk(b));var E=t.length,T=E;for(E&&Cl(t,Yct);T<n;){var C=QR;for(_=0;_<e.length;_++)b=e[_],b>=u&&b<C&&(C=b);var z=T+1;if(C-u>Dd((QR-l)/z))throw new Que(Jue);for(l+=(C-u)*z,u=C,_=0;_<e.length;_++){if(b=e[_],b<u&&++l>QR)throw new Que(Jue);if(b===u){for(var $=l,oe=Qg;;){var xe=oe<=o?rle:oe>=o+rk?rk:oe-o;if($<xe)break;var _e=$-xe,X=Qg-xe;Cl(t,tk(tle(xe+_e%X))),$=Dd(_e/X),oe+=Qg}Cl(t,tk(tle($))),o=nht(l,z,T===E),l=0,T++}}l++,u++}return nle(t,"")};ale.exports=function(e){var t=[],n=tht(eht(rht(e),ile,"."),"."),u,l;for(u=0;u<n.length;u++)l=n[u],Cl(t,Qct(Jct,l)?"xn--"+aht(l):l);return nle(t,".")}});var hk=S((fLt,Ple)=>{"use strict";Iv();oC();var uk=V(),_le=$e(),lk=XA(),oht=xt(),Vb=Ze(),mo=Pe(),ey=ht(),xle=Jg(),ble=tr(),sht=yr(),uht=za(),lht=vn(),cht=cl(),ck=Yt(),wle=rn(),ik=Tt(),hht=Ct(),fht=or(),dht=Ln(),pht=He(),Sle=wt(),yn=qt(),mht=jr(),sle=kn(),ule=ul(),vht=Uo(),Gb=xi(),Ld=ca(),ght=pt(),yht=yx(),_ht=ght("iterator"),Fd="URLSearchParams",qle=Fd+"Iterator",Ile=ck.set,Ba=ck.getterFor(Fd),xht=ck.getterFor(qle),lle=lk("fetch"),Zb=lk("Request"),ty=lk("Headers"),nk=Zb&&Zb.prototype,cle=ty&&ty.prototype,bht=_le.TypeError,wht=_le.encodeURIComponent,Sht=String.fromCharCode,qht=oht("String","fromCodePoint"),Iht=parseInt,Wb=mo("".charAt),hle=mo([].join),Ml=mo([].push),Ele=mo("".replace),Eht=mo([].shift),fle=mo([].splice),dle=mo("".split),Tle=mo("".slice),Tht=mo(/./.exec),Aht=/\+/g,ak="\uFFFD",Pht=/^[0-9a-f]+$/i,ple=function(e,t){var n=Tle(e,t,t+2);return Tht(Pht,n)?Iht(n,16):NaN},Cht=function(e){for(var t=0,n=128;n>0&&e&n;n>>=1)t++;return t},Mht=function(e){var t=null;switch(e.length){case 1:t=e[0];break;case 2:t=(e[0]&31)<<6|e[1]&63;break;case 3:t=(e[0]&15)<<12|(e[1]&63)<<6|e[2]&63;break;case 4:t=(e[0]&7)<<18|(e[1]&63)<<12|(e[2]&63)<<6|e[3]&63;break;}return t>1114111?null:t},mle=function(e){e=Ele(e,Aht," ");for(var t=e.length,n="",u=0;u<t;){var l=Wb(e,u);if(l==="%"){if(Wb(e,u+1)==="%"||u+3>t){n+="%",u++;continue}var o=ple(e,u+1);if(o!==o){n+=l,u++;continue}u+=2;var _=Cht(o);if(_===0)l=Sht(o);else{if(_===1||_>4){n+=ak,u++;continue}for(var b=[o],E=1;E<_&&(u++,!(u+3>t||Wb(e,u)!=="%"));){var T=ple(e,u+1);if(T!==T){u+=3;break}if(T>191||T<128)break;Ml(b,T),u+=2,E++}if(b.length!==_){n+=ak;continue}var C=Mht(b);C===null?n+=ak:l=qht(C)}}n+=l,u++}return n},Oht=/[!'()~]|%20/g,Rht={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},kht=function(e){return Rht[e]},vle=function(e){return Ele(wht(e),Oht,kht)},ok=cht(function(t,n){Ile(this,{type:qle,target:Ba(t).entries,index:0,kind:n})},Fd,function(){var t=xht(this),n=t.target,u=t.index++;if(!n||u>=n.length)return t.target=null,Gb(void 0,!0);var l=n[u];switch(t.kind){case"keys":return Gb(l.key,!1);case"values":return Gb(l.value,!1);}return Gb([l.key,l.value],!1)},!0),Ale=function(e){this.entries=[],this.url=null,e!==void 0&&(Sle(e)?this.parseObject(e):this.parseQuery(typeof e=="string"?Wb(e,0)==="?"?Tle(e,1):e:yn(e)))};Ale.prototype={type:Fd,bindURL:function(e){this.url=e,this.update()},parseObject:function(e){var t=this.entries,n=vht(e),u,l,o,_,b,E,T;if(n)for(u=ule(e,n),l=u.next;!(o=Vb(l,u)).done;){if(_=ule(pht(o.value)),b=_.next,(E=Vb(b,_)).done||(T=Vb(b,_)).done||!Vb(b,_).done)throw new bht("Expected sequence with length 2");Ml(t,{key:yn(E.value),value:yn(T.value)})}else for(var C in e)hht(e,C)&&Ml(t,{key:C,value:yn(e[C])})},parseQuery:function(e){if(e)for(var t=this.entries,n=dle(e,"&"),u=0,l,o;u<n.length;)l=n[u++],l.length&&(o=dle(l,"="),Ml(t,{key:mle(Eht(o)),value:mle(hle(o,"="))}))},serialize:function(){for(var e=this.entries,t=[],n=0,u;n<e.length;)u=e[n++],Ml(t,vle(u.key)+"="+vle(u.value));return hle(t,"&")},update:function(){this.entries.length=0,this.parseQuery(this.url.query)},updateURL:function(){this.url&&this.url.update()}};var Kb=function(){wle(this,zd);var t=arguments.length>0?arguments[0]:void 0,n=Ile(this,new Ale(t));ey||(this.size=n.entries.length)},zd=Kb.prototype;uht(zd,{append:function(t,n){var u=Ba(this);Ld(arguments.length,2),Ml(u.entries,{key:yn(t),value:yn(n)}),ey||this.length++,u.updateURL()},delete:function(e){for(var t=Ba(this),n=Ld(arguments.length,1),u=t.entries,l=yn(e),o=n<2?void 0:arguments[1],_=o===void 0?o:yn(o),b=0;b<u.length;){var E=u[b];if(E.key===l&&(_===void 0||E.value===_)){if(fle(u,b,1),_!==void 0)break}else b++}ey||(this.size=u.length),t.updateURL()},get:function(t){var n=Ba(this).entries;Ld(arguments.length,1);for(var u=yn(t),l=0;l<n.length;l++)if(n[l].key===u)return n[l].value;return null},getAll:function(t){var n=Ba(this).entries;Ld(arguments.length,1);for(var u=yn(t),l=[],o=0;o<n.length;o++)n[o].key===u&&Ml(l,n[o].value);return l},has:function(t){for(var n=Ba(this).entries,u=Ld(arguments.length,1),l=yn(t),o=u<2?void 0:arguments[1],_=o===void 0?o:yn(o),b=0;b<n.length;){var E=n[b++];if(E.key===l&&(_===void 0||E.value===_))return!0}return!1},set:function(t,n){var u=Ba(this);Ld(arguments.length,1);for(var l=u.entries,o=!1,_=yn(t),b=yn(n),E=0,T;E<l.length;E++)T=l[E],T.key===_&&(o?fle(l,E--,1):(o=!0,T.value=b));o||Ml(l,{key:_,value:b}),ey||(this.size=l.length),u.updateURL()},sort:function(){var t=Ba(this);yht(t.entries,function(n,u){return n.key>u.key?1:-1}),t.updateURL()},forEach:function(t){for(var n=Ba(this).entries,u=fht(t,arguments.length>1?arguments[1]:void 0),l=0,o;l<n.length;)o=n[l++],u(o.value,o.key,this)},keys:function(){return new ok(this,"keys")},values:function(){return new ok(this,"values")},entries:function(){return new ok(this,"entries")}},{enumerable:!0});ble(zd,_ht,zd.entries,{name:"entries"});ble(zd,"toString",function(){return Ba(this).serialize()},{enumerable:!0});ey&&sht(zd,"size",{get:function(){return Ba(this).entries.length},configurable:!0,enumerable:!0});lht(Kb,Fd);uk({global:!0,constructor:!0,forced:!xle},{URLSearchParams:Kb});!xle&&ik(ty)&&(gle=mo(cle.has),yle=mo(cle.set),sk=function(e){if(Sle(e)){var t=e.body,n;if(dht(t)===Fd)return n=e.headers?new ty(e.headers):new ty,gle(n,"content-type")||yle(n,"content-type","application/x-www-form-urlencoded;charset=UTF-8"),mht(e,{body:sle(0,yn(t)),headers:sle(0,n)})}return e},ik(lle)&&uk({global:!0,enumerable:!0,dontCallGetSet:!0,forced:!0},{fetch:function(t){return lle(t,arguments.length>1?sk(arguments[1]):{})}}),ik(Zb)&&(Hb=function(t){return wle(this,nk),new Zb(t,arguments.length>1?sk(arguments[1]):{})},nk.constructor=Hb,Hb.prototype=nk,uk({global:!0,constructor:!0,dontCallGetSet:!0,forced:!0},{Request:Hb})));var gle,yle,sk,Hb;Ple.exports={URLSearchParams:Kb,getState:Ba}});var Wle=S(()=>{"use strict";uC();var Dht=V(),Ak=ht(),Lht=Jg(),Pk=$e(),Cle=or(),Ga=Pe(),ew=tr(),ja=yr(),zht=rn(),Ik=Ct(),Ck=MA(),Nd=wT(),vo=zn(),Fht=Hc().codeAt,Nht=ole(),Zs=qt(),Bht=vn(),jht=ca(),jle=hk(),Ule=Yt(),Uht=Ule.set,tw=Ule.getterFor("URL"),$ht=jle.URLSearchParams,Vht=jle.getState,ry=Pk.URL,Ek=Pk.TypeError,rw=Pk.parseInt,Ght=Math.floor,Mle=Math.pow,Va=Ga("".charAt),go=Ga(/./.exec),ny=Ga([].join),Hht=Ga(1 .toString),Wht=Ga([].pop),jd=Ga([].push),fk=Ga("".replace),Zht=Ga([].shift),Kht=Ga("".split),oy=Ga("".slice),iw=Ga("".toLowerCase),Xht=Ga([].unshift),Yht="Invalid authority",dk="Invalid scheme",rh="Invalid host",Ole="Invalid port",$le=/[a-z]/i,Jht=/[\d+-.a-z]/i,Tk=/\d/,Qht=/^0x/i,eft=/^[0-7]+$/,tft=/^\d+$/,Vle=/^[\da-f]+$/i,rft=/[\0\t\n\r #%/:<>?@[\\\]^|]/,ift=/[\0\t\n\r #/:<>?@[\\\]^|]/,nft=/^[\u0000-\u0020]+/,aft=/(^|[^\u0000-\u0020])[\u0000-\u0020]+$/,oft=/[\t\n\r]/g,Ua,sft=function(e){var t=Kht(e,"."),n,u,l,o,_,b,E;if(t.length&&t[t.length-1]===""&&t.length--,n=t.length,n>4)return e;for(u=[],l=0;l<n;l++){if(o=t[l],o==="")return e;if(_=10,o.length>1&&Va(o,0)==="0"&&(_=go(Qht,o)?16:8,o=oy(o,_===8?1:2)),o==="")b=0;else{if(!go(_===10?tft:_===8?eft:Vle,o))return e;b=rw(o,_)}jd(u,b)}for(l=0;l<n;l++)if(b=u[l],l===n-1){if(b>=Mle(256,5-n))return null}else if(b>255)return null;for(E=Wht(u),l=0;l<u.length;l++)E+=u[l]*Mle(256,3-l);return E},uft=function(e){var t=[0,0,0,0,0,0,0,0],n=0,u=null,l=0,o,_,b,E,T,C,z,$=function(){return Va(e,l)};if($()===":"){if(Va(e,1)!==":")return;l+=2,n++,u=n}for(;$();){if(n===8)return;if($()===":"){if(u!==null)return;l++,n++,u=n;continue}for(o=_=0;_<4&&go(Vle,$());)o=o*16+rw($(),16),l++,_++;if($()==="."){if(_===0||(l-=_,n>6))return;for(b=0;$();){if(E=null,b>0)if($()==="."&&b<4)l++;else return;if(!go(Tk,$()))return;for(;go(Tk,$());){if(T=rw($(),10),E===null)E=T;else{if(E===0)return;E=E*10+T}if(E>255)return;l++}t[n]=t[n]*256+E,b++,(b===2||b===4)&&n++}if(b!==4)return;break}else if($()===":"){if(l++,!$())return}else if($())return;t[n++]=o}if(u!==null)for(C=n-u,n=7;n!==0&&C>0;)z=t[n],t[n--]=t[u+C-1],t[u+--C]=z;else if(n!==8)return;return t},lft=function(e){for(var t=null,n=1,u=null,l=0,o=0;o<8;o++)e[o]!==0?(l>n&&(t=u,n=l),u=null,l=0):(u===null&&(u=o),++l);return l>n?u:t},iy=function(e){var t,n,u,l;if(typeof e=="number"){for(t=[],n=0;n<4;n++)Xht(t,e%256),e=Ght(e/256);return ny(t,".")}if(typeof e=="object"){for(t="",u=lft(e),n=0;n<8;n++)l&&e[n]===0||(l&&(l=!1),u===n?(t+=n?":":"::",l=!0):(t+=Hht(e[n],16),n<7&&(t+=":")));return"["+t+"]"}return e},Qb={},Gle=Ck({},Qb,{" ":1,"\"":1,"<":1,">":1,"`":1}),Hle=Ck({},Gle,{"#":1,"?":1,"{":1,"}":1}),pk=Ck({},Hle,{"/":1,":":1,";":1,"=":1,"@":1,"[":1,"\\":1,"]":1,"^":1,"|":1}),Ol=function(e,t){var n=Fht(e,0);return n>32&&n<127&&!Ik(t,e)?e:encodeURIComponent(e)},Xb={ftp:21,file:null,http:80,https:443,ws:80,wss:443},ay=function(e,t){var n;return e.length===2&&go($le,Va(e,0))&&((n=Va(e,1))===":"||!t&&n==="|")},Rle=function(e){var t;return e.length>1&&ay(oy(e,0,2))&&(e.length===2||(t=Va(e,2))==="/"||t==="\\"||t==="?"||t==="#")},cft=function(e){return e==="."||iw(e)==="%2e"},hft=function(e){return e=iw(e),e===".."||e==="%2e."||e===".%2e"||e==="%2e%2e"},mk={},kle={},vk={},Dle={},Lle={},gk={},zle={},Fle={},Yb={},Jb={},yk={},_k={},xk={},bk={},Nle={},wk={},Bd={},Jo={},Ble={},ih={},Ws={},Mk=function(e,t,n){var u=Zs(e),l,o,_;if(t){if(o=this.parse(u),o)throw new Ek(o);this.searchParams=null}else{if(n!==void 0&&(l=new Mk(n,!0)),o=this.parse(u,null,l),o)throw new Ek(o);_=Vht(new $ht),_.bindURL(this),this.searchParams=_}};Mk.prototype={type:"URL",parse:function(e,t,n){var u=this,l=t||mk,o=0,_="",b=!1,E=!1,T=!1,C,z,$,oe;for(e=Zs(e),t||(u.scheme="",u.username="",u.password="",u.host=null,u.port=null,u.path=[],u.query=null,u.fragment=null,u.cannotBeABaseURL=!1,e=fk(e,nft,""),e=fk(e,aft,"$1")),e=fk(e,oft,""),C=Nd(e);o<=C.length;){switch(z=C[o],l){case mk:if(z&&go($le,z))_+=iw(z),l=kle;else{if(t)return dk;l=vk;continue}break;case kle:if(z&&(go(Jht,z)||z==="+"||z==="-"||z==="."))_+=iw(z);else if(z===":"){if(t&&(u.isSpecial()!==Ik(Xb,_)||_==="file"&&(u.includesCredentials()||u.port!==null)||u.scheme==="file"&&!u.host))return;if(u.scheme=_,t){u.isSpecial()&&Xb[u.scheme]===u.port&&(u.port=null);return}_="",u.scheme==="file"?l=bk:u.isSpecial()&&n&&n.scheme===u.scheme?l=Dle:u.isSpecial()?l=Fle:C[o+1]==="/"?(l=Lle,o++):(u.cannotBeABaseURL=!0,jd(u.path,""),l=Ble)}else{if(t)return dk;_="",l=vk,o=0;continue}break;case vk:if(!n||n.cannotBeABaseURL&&z!=="#")return dk;if(n.cannotBeABaseURL&&z==="#"){u.scheme=n.scheme,u.path=vo(n.path),u.query=n.query,u.fragment="",u.cannotBeABaseURL=!0,l=Ws;break}l=n.scheme==="file"?bk:gk;continue;case Dle:if(z==="/"&&C[o+1]==="/")l=Yb,o++;else{l=gk;continue}break;case Lle:if(z==="/"){l=Jb;break}else{l=Jo;continue}case gk:if(u.scheme=n.scheme,z===Ua)u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=vo(n.path),u.query=n.query;else if(z==="/"||z==="\\"&&u.isSpecial())l=zle;else if(z==="?")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=vo(n.path),u.query="",l=ih;else if(z==="#")u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=vo(n.path),u.query=n.query,u.fragment="",l=Ws;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,u.path=vo(n.path),u.path.length--,l=Jo;continue}break;case zle:if(u.isSpecial()&&(z==="/"||z==="\\"))l=Yb;else if(z==="/")l=Jb;else{u.username=n.username,u.password=n.password,u.host=n.host,u.port=n.port,l=Jo;continue}break;case Fle:if(l=Yb,z!=="/"||Va(_,o+1)!=="/")continue;o++;break;case Yb:if(z!=="/"&&z!=="\\"){l=Jb;continue}break;case Jb:if(z==="@"){b&&(_="%40"+_),b=!0,$=Nd(_);for(var xe=0;xe<$.length;xe++){var _e=$[xe];if(_e===":"&&!T){T=!0;continue}var X=Ol(_e,pk);T?u.password+=X:u.username+=X}_=""}else if(z===Ua||z==="/"||z==="?"||z==="#"||z==="\\"&&u.isSpecial()){if(b&&_==="")return Yht;o-=Nd(_).length+1,_="",l=yk}else _+=z;break;case yk:case _k:if(t&&u.scheme==="file"){l=wk;continue}else if(z===":"&&!E){if(_==="")return rh;if(oe=u.parseHost(_),oe)return oe;if(_="",l=xk,t===_k)return}else if(z===Ua||z==="/"||z==="?"||z==="#"||z==="\\"&&u.isSpecial()){if(u.isSpecial()&&_==="")return rh;if(t&&_===""&&(u.includesCredentials()||u.port!==null))return;if(oe=u.parseHost(_),oe)return oe;if(_="",l=Bd,t)return;continue}else z==="["?E=!0:z==="]"&&(E=!1),_+=z;break;case xk:if(go(Tk,z))_+=z;else if(z===Ua||z==="/"||z==="?"||z==="#"||z==="\\"&&u.isSpecial()||t){if(_!==""){var K=rw(_,10);if(K>65535)return Ole;u.port=u.isSpecial()&&K===Xb[u.scheme]?null:K,_=""}if(t)return;l=Bd;continue}else return Ole;break;case bk:if(u.scheme="file",z==="/"||z==="\\")l=Nle;else if(n&&n.scheme==="file")switch(z){case Ua:u.host=n.host,u.path=vo(n.path),u.query=n.query;break;case"?":u.host=n.host,u.path=vo(n.path),u.query="",l=ih;break;case"#":u.host=n.host,u.path=vo(n.path),u.query=n.query,u.fragment="",l=Ws;break;default:Rle(ny(vo(C,o),""))||(u.host=n.host,u.path=vo(n.path),u.shortenPath()),l=Jo;continue;}else{l=Jo;continue}break;case Nle:if(z==="/"||z==="\\"){l=wk;break}n&&n.scheme==="file"&&!Rle(ny(vo(C,o),""))&&(ay(n.path[0],!0)?jd(u.path,n.path[0]):u.host=n.host),l=Jo;continue;case wk:if(z===Ua||z==="/"||z==="\\"||z==="?"||z==="#"){if(!t&&ay(_))l=Jo;else if(_===""){if(u.host="",t)return;l=Bd}else{if(oe=u.parseHost(_),oe)return oe;if(u.host==="localhost"&&(u.host=""),t)return;_="",l=Bd}continue}else _+=z;break;case Bd:if(u.isSpecial()){if(l=Jo,z!=="/"&&z!=="\\")continue}else if(!t&&z==="?")u.query="",l=ih;else if(!t&&z==="#")u.fragment="",l=Ws;else if(z!==Ua&&(l=Jo,z!=="/"))continue;break;case Jo:if(z===Ua||z==="/"||z==="\\"&&u.isSpecial()||!t&&(z==="?"||z==="#")){if(hft(_)?(u.shortenPath(),z!=="/"&&!(z==="\\"&&u.isSpecial())&&jd(u.path,"")):cft(_)?z!=="/"&&!(z==="\\"&&u.isSpecial())&&jd(u.path,""):(u.scheme==="file"&&!u.path.length&&ay(_)&&(u.host&&(u.host=""),_=Va(_,0)+":"),jd(u.path,_)),_="",u.scheme==="file"&&(z===Ua||z==="?"||z==="#"))for(;u.path.length>1&&u.path[0]==="";)Zht(u.path);z==="?"?(u.query="",l=ih):z==="#"&&(u.fragment="",l=Ws)}else _+=Ol(z,Hle);break;case Ble:z==="?"?(u.query="",l=ih):z==="#"?(u.fragment="",l=Ws):z!==Ua&&(u.path[0]+=Ol(z,Qb));break;case ih:!t&&z==="#"?(u.fragment="",l=Ws):z!==Ua&&(z==="'"&&u.isSpecial()?u.query+="%27":z==="#"?u.query+="%23":u.query+=Ol(z,Qb));break;case Ws:z!==Ua&&(u.fragment+=Ol(z,Gle));break;}o++}},parseHost:function(e){var t,n,u;if(Va(e,0)==="["){if(Va(e,e.length-1)!=="]"||(t=uft(oy(e,1,-1)),!t))return rh;this.host=t}else if(this.isSpecial()){if(e=Nht(e),go(rft,e)||(t=sft(e),t===null))return rh;this.host=t}else{if(go(ift,e))return rh;for(t="",n=Nd(e),u=0;u<n.length;u++)t+=Ol(n[u],Qb);this.host=t}},cannotHaveUsernamePasswordPort:function(){return!this.host||this.cannotBeABaseURL||this.scheme==="file"},includesCredentials:function(){return this.username!==""||this.password!==""},isSpecial:function(){return Ik(Xb,this.scheme)},shortenPath:function(){var e=this.path,t=e.length;t&&(this.scheme!=="file"||t!==1||!ay(e[0],!0))&&e.length--},serialize:function(){var e=this,t=e.scheme,n=e.username,u=e.password,l=e.host,o=e.port,_=e.path,b=e.query,E=e.fragment,T=t+":";return l!==null?(T+="//",e.includesCredentials()&&(T+=n+(u?":"+u:"")+"@"),T+=iy(l),o!==null&&(T+=":"+o)):t==="file"&&(T+="//"),T+=e.cannotBeABaseURL?_[0]:_.length?"/"+ny(_,"/"):"",b!==null&&(T+="?"+b),E!==null&&(T+="#"+E),T},setHref:function(e){var t=this.parse(e);if(t)throw new Ek(t);this.searchParams.update()},getOrigin:function(){var e=this.scheme,t=this.port;if(e==="blob")try{return new Ud(e.path[0]).origin}catch(n){return"null"}return e==="file"||!this.isSpecial()?"null":e+"://"+iy(this.host)+(t!==null?":"+t:"")},getProtocol:function(){return this.scheme+":"},setProtocol:function(e){this.parse(Zs(e)+":",mk)},getUsername:function(){return this.username},setUsername:function(e){var t=Nd(Zs(e));if(!this.cannotHaveUsernamePasswordPort()){this.username="";for(var n=0;n<t.length;n++)this.username+=Ol(t[n],pk)}},getPassword:function(){return this.password},setPassword:function(e){var t=Nd(Zs(e));if(!this.cannotHaveUsernamePasswordPort()){this.password="";for(var n=0;n<t.length;n++)this.password+=Ol(t[n],pk)}},getHost:function(){var e=this.host,t=this.port;return e===null?"":t===null?iy(e):iy(e)+":"+t},setHost:function(e){this.cannotBeABaseURL||this.parse(e,yk)},getHostname:function(){var e=this.host;return e===null?"":iy(e)},setHostname:function(e){this.cannotBeABaseURL||this.parse(e,_k)},getPort:function(){var e=this.port;return e===null?"":Zs(e)},setPort:function(e){this.cannotHaveUsernamePasswordPort()||(e=Zs(e),e===""?this.port=null:this.parse(e,xk))},getPathname:function(){var e=this.path;return this.cannotBeABaseURL?e[0]:e.length?"/"+ny(e,"/"):""},setPathname:function(e){this.cannotBeABaseURL||(this.path=[],this.parse(e,Bd))},getSearch:function(){var e=this.query;return e?"?"+e:""},setSearch:function(e){e=Zs(e),e===""?this.query=null:(Va(e,0)==="?"&&(e=oy(e,1)),this.query="",this.parse(e,ih)),this.searchParams.update()},getSearchParams:function(){return this.searchParams.facade},getHash:function(){var e=this.fragment;return e?"#"+e:""},setHash:function(e){if(e=Zs(e),e===""){this.fragment=null;return}Va(e,0)==="#"&&(e=oy(e,1)),this.fragment="",this.parse(e,Ws)},update:function(){this.query=this.searchParams.serialize()||null}};var Ud=function(t){var n=zht(this,_n),u=jht(arguments.length,1)>1?arguments[1]:void 0,l=Uht(n,new Mk(t,!1,u));Ak||(n.href=l.serialize(),n.origin=l.getOrigin(),n.protocol=l.getProtocol(),n.username=l.getUsername(),n.password=l.getPassword(),n.host=l.getHost(),n.hostname=l.getHostname(),n.port=l.getPort(),n.pathname=l.getPathname(),n.search=l.getSearch(),n.searchParams=l.getSearchParams(),n.hash=l.getHash())},_n=Ud.prototype,$a=function(e,t){return{get:function(){return tw(this)[e]()},set:t&&function(n){return tw(this)[t](n)},configurable:!0,enumerable:!0}};Ak&&(ja(_n,"href",$a("serialize","setHref")),ja(_n,"origin",$a("getOrigin")),ja(_n,"protocol",$a("getProtocol","setProtocol")),ja(_n,"username",$a("getUsername","setUsername")),ja(_n,"password",$a("getPassword","setPassword")),ja(_n,"host",$a("getHost","setHost")),ja(_n,"hostname",$a("getHostname","setHostname")),ja(_n,"port",$a("getPort","setPort")),ja(_n,"pathname",$a("getPathname","setPathname")),ja(_n,"search",$a("getSearch","setSearch")),ja(_n,"searchParams",$a("getSearchParams")),ja(_n,"hash",$a("getHash","setHash")));ew(_n,"toJSON",function(){return tw(this).serialize()},{enumerable:!0});ew(_n,"toString",function(){return tw(this).serialize()},{enumerable:!0});ry&&(Sk=ry.createObjectURL,qk=ry.revokeObjectURL,Sk&&ew(Ud,"createObjectURL",Cle(Sk,ry)),qk&&ew(Ud,"revokeObjectURL",Cle(qk,ry)));var Sk,qk;Bht(Ud,"URL");Dht({global:!0,constructor:!0,forced:!Lht,sham:!Ak},{URL:Ud})});var Zle=S(()=>{"use strict";Wle()});var Yle=S(()=>{"use strict";var fft=V(),dft=xt(),Xle=Oe(),pft=ca(),Kle=qt(),mft=Jg(),Ok=dft("URL"),vft=mft&&Xle(function(){Ok.canParse()}),gft=Xle(function(){return Ok.canParse.length!==1});fft({target:"URL",stat:!0,forced:!vft||gft},{canParse:function(t){var n=pft(arguments.length,1),u=Kle(t),l=n<2||arguments[1]===void 0?void 0:Kle(arguments[1]);try{return!!new Ok(u,l)}catch(o){return!1}}})});var Qle=S(()=>{"use strict";var yft=V(),_ft=xt(),xft=ca(),Jle=qt(),bft=Jg(),wft=_ft("URL");yft({target:"URL",stat:!0,forced:!bft},{parse:function(t){var n=xft(arguments.length,1),u=Jle(t),l=n<2||arguments[1]===void 0?void 0:Jle(arguments[1]);try{return new wft(u,l)}catch(o){return null}}})});var ece=S(()=>{"use strict";var Sft=V(),qft=Ze();Sft({target:"URL",proto:!0,enumerable:!0},{toJSON:function(){return qft(URL.prototype.toString,this)}})});var tce=S(()=>{"use strict";hk()});var ace=S(()=>{"use strict";var Ift=tr(),nw=Pe(),rce=qt(),Eft=ca(),nce=URLSearchParams,aw=nce.prototype,Tft=nw(aw.append),ice=nw(aw.delete),Aft=nw(aw.forEach),Pft=nw([].push),Rk=new nce("a=1&a=2&b=3");Rk.delete("a",1);Rk.delete("b",void 0);Rk+""!="a=2"&&Ift(aw,"delete",function(e){var t=arguments.length,n=t<2?void 0:arguments[1];if(t&&n===void 0)return ice(this,e);var u=[];Aft(this,function(z,$){Pft(u,{key:$,value:z})}),Eft(t,1);for(var l=rce(e),o=rce(n),_=0,b=0,E=!1,T=u.length,C;_<T;)C=u[_++],E||C.key===l?(E=!0,ice(this,C.key)):b++;for(;b<T;)C=u[b++],C.key===l&&C.value===o||Tft(this,C.key,C.value)},{enumerable:!0,unsafe:!0})});var lce=S(()=>{"use strict";var Cft=tr(),sce=Pe(),Mft=qt(),Oft=ca(),uce=URLSearchParams,kk=uce.prototype,Rft=sce(kk.getAll),kft=sce(kk.has),oce=new uce("a=1");(oce.has("a",2)||!oce.has("a",void 0))&&Cft(kk,"has",function(t){var n=arguments.length,u=n<2?void 0:arguments[1];if(n&&u===void 0)return kft(this,t);var l=Rft(this,t);Oft(n,1);for(var o=Mft(u),_=0;_<l.length;)if(l[_++]===o)return!0;return!1},{enumerable:!0,unsafe:!0})});var cce=S(()=>{"use strict";var Dft=ht(),Lft=Pe(),zft=yr(),Dk=URLSearchParams.prototype,Fft=Lft(Dk.forEach);Dft&&!("size"in Dk)&&zft(Dk,"size",{get:function(){var t=0;return Fft(this,function(){t++}),t},configurable:!0,enumerable:!0})});var fce=S((MLt,hce)=>{"use strict";M5();F5();N5();B5();j5();U5();$5();V5();G5();H5();W5();Z5();K5();X5();Y5();Sj();Aj();lT();Zj();dT();r6();o6();u6();h6();f6();p6();v6();yT();_T();b6();w6();I6();k6();D6();z6();F6();Iv();aU();lU();cU();fU();pU();wU();qU();EU();PU();CU();HU();KU();XU();NT();jT();UT();e$();t$();r$();VT();O$();V$();X$();J$();h2();E2();T2();SV();IV();AV();PV();NV();BV();GV();KV();YV();i8();o8();c8();k2();N2();$2();V2();G2();H2();K2();X2();Y2();Q2();eA();tA();rA();iA();ZE();k8();jx();hA();rG();aG();sG();uG();lG();fG();pG();mG();gG();_G();bG();wG();SG();qG();TG();CG();MG();OG();$G();VG();HG();ZG();KG();XG();YG();JG();nH();fH();gH();SH();EH();MH();OH();DH();zH();NH();BH();HH();WH();ZH();YH();JH();QH();t9();kA();DA();n9();o9();u9();c9();f9();d9();p9();m9();x9();b9();w9();I9();E9();A9();C9();$W();yP();_P();ZW();SP();qP();YW();n7();s7();u7();f7();d7();p7();m7();v7();g7();y7();S7();I7();E7();$7();G7();c1();Y7();Q7();rZ();oZ();uZ();VP();WP();KP();YP();QP();rC();nC();FZ();UZ();WZ();oC();YZ();sC();uC();hK();mC();wK();SK();TK();AK();kK();IC();NK();VK();WK();KK();OC();rX();sX();fX();vX();gX();yX();_X();xX();bX();wX();SX();qX();IX();EX();TX();AX();tY();rY();iY();nY();aY();oY();sY();uY();lY();WC();fY();pY();vY();_Y();bY();SY();ZC();KC();TY();AY();CY();OY();zY();NY();jY();UY();VY();HY();ZY();XY();rJ();iJ();aJ();hJ();dJ();yJ();lM();cM();xJ();fM();IJ();N1();jJ();UJ();GJ();yQ();_Q();xQ();bQ();wQ();SQ();IQ();EQ();AQ();PQ();OQ();RQ();LQ();zQ();FQ();NQ();HQ();WQ();ZQ();KQ();XQ();uee();dee();Iee();Pee();Mee();Oee();kee();Dee();jee();Uee();Vee();Gee();Hee();Wee();Zee();Yee();Jee();ate();hte();dte();pte();mte();yte();_te();qte();Ete();Ate();Pte();Ote();Rte();kte();Dte();zte();Bte();$te();Vte();Gte();Hte();Wte();Zte();Kte();Xte();Yte();Jte();ere();tre();rre();ire();nre();ore();lre();bre();Pre();Mre();Rre();kre();Lre();zre();Fre();jre();Ure();$re();Vre();Wre();Kre();Xre();Jre();eie();tie();nie();aie();oie();uie();cie();hie();fie();die();pie();vie();gie();yie();_ie();xie();bie();wie();Sie();Tie();Aie();Rie();kie();zie();Fie();Nie();$ie();Vie();Gie();Hie();sne();une();lne();cne();hne();gne();_ne();bne();Ine();Tne();Pne();One();kne();Lne();$ne();Vne();Gne();Hne();Yne();Jne();eae();tae();iae();nae();aae();oae();sae();uae();lae();cae();hae();dae();mae();gae();yae();_ae();xae();bae();wae();Sae();qae();Pae();kae();eoe();toe();roe();ioe();noe();aoe();ooe();soe();loe();coe();goe();yoe();_oe();xoe();boe();woe();Soe();qoe();Eoe();Toe();Poe();Moe();Ooe();Roe();koe();Doe();Loe();zoe();Foe();Noe();Yoe();rse();nse();ase();sse();use();cse();fse();pse();vse();gse();_se();xse();Sse();qse();Ese();Ase();Dse();Bse();Wse();Jse();cue();gue();_ue();Aue();Pue();Mue();Uue();Kue();Zle();Yle();Qle();ece();tce();ace();lce();cce();hce.exports=W0()});var pce=S((OLt,dce)=>{"use strict";dce.exports=fce()});var Lk=S((RLt,mce)=>{"use strict";mce.exports=function(t,n){return function(){for(var l=new Array(arguments.length),o=0;o<l.length;o++)l[o]=arguments[o];return t.apply(n,l)}}});var Vn=S((kLt,yce)=>{"use strict";var Nft=Lk(),nh=Object.prototype.toString;function Nk(e){return nh.call(e)==="[object Array]"}function zk(e){return typeof e=="undefined"}function Bft(e){return e!==null&&!zk(e)&&e.constructor!==null&&!zk(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function jft(e){return nh.call(e)==="[object ArrayBuffer]"}function Uft(e){return typeof FormData!="undefined"&&e instanceof FormData}function $ft(e){var t;return typeof ArrayBuffer!="undefined"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function Vft(e){return typeof e=="string"}function Gft(e){return typeof e=="number"}function vce(e){return e!==null&&typeof e=="object"}function ow(e){if(nh.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function Hft(e){return nh.call(e)==="[object Date]"}function Wft(e){return nh.call(e)==="[object File]"}function Zft(e){return nh.call(e)==="[object Blob]"}function gce(e){return nh.call(e)==="[object Function]"}function Kft(e){return vce(e)&&gce(e.pipe)}function Xft(e){return typeof URLSearchParams!="undefined"&&e instanceof URLSearchParams}function Yft(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Jft(){return typeof navigator!="undefined"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window!="undefined"&&typeof document!="undefined"}function Bk(e,t){if(!(e===null||typeof e=="undefined"))if(typeof e!="object"&&(e=[e]),Nk(e))for(var n=0,u=e.length;n<u;n++)t.call(null,e[n],n,e);else for(var l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.call(null,e[l],l,e)}function Fk(){var e={};function t(l,o){ow(e[o])&&ow(l)?e[o]=Fk(e[o],l):ow(l)?e[o]=Fk({},l):Nk(l)?e[o]=l.slice():e[o]=l}for(var n=0,u=arguments.length;n<u;n++)Bk(arguments[n],t);return e}function Qft(e,t,n){return Bk(t,function(l,o){n&&typeof l=="function"?e[o]=Nft(l,n):e[o]=l}),e}function edt(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}yce.exports={isArray:Nk,isArrayBuffer:jft,isBuffer:Bft,isFormData:Uft,isArrayBufferView:$ft,isString:Vft,isNumber:Gft,isObject:vce,isPlainObject:ow,isUndefined:zk,isDate:Hft,isFile:Wft,isBlob:Zft,isFunction:gce,isStream:Kft,isURLSearchParams:Xft,isStandardBrowserEnv:Jft,forEach:Bk,merge:Fk,extend:Qft,trim:Yft,stripBOM:edt}});var jk=S((DLt,xce)=>{"use strict";var $d=Vn();function _ce(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}xce.exports=function(t,n,u){if(!n)return t;var l;if(u)l=u(n);else if($d.isURLSearchParams(n))l=n.toString();else{var o=[];$d.forEach(n,function(E,T){E===null||typeof E=="undefined"||($d.isArray(E)?T=T+"[]":E=[E],$d.forEach(E,function(z){$d.isDate(z)?z=z.toISOString():$d.isObject(z)&&(z=JSON.stringify(z)),o.push(_ce(T)+"="+_ce(z))}))}),l=o.join("&")}if(l){var _=t.indexOf("#");_!==-1&&(t=t.slice(0,_)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}});var wce=S((LLt,bce)=>{"use strict";var tdt=Vn();function sw(){this.handlers=[]}sw.prototype.use=function(t,n,u){return this.handlers.push({fulfilled:t,rejected:n,synchronous:u?u.synchronous:!1,runWhen:u?u.runWhen:null}),this.handlers.length-1};sw.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};sw.prototype.forEach=function(t){tdt.forEach(this.handlers,function(u){u!==null&&t(u)})};bce.exports=sw});var qce=S((zLt,Sce)=>{"use strict";var rdt=Vn();Sce.exports=function(t,n){rdt.forEach(t,function(l,o){o!==n&&o.toUpperCase()===n.toUpperCase()&&(t[n]=l,delete t[o])})}});var Uk=S((FLt,Ice)=>{"use strict";Ice.exports=function(t,n,u,l,o){return t.config=n,u&&(t.code=u),t.request=l,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}},t}});var $k=S((NLt,Ece)=>{"use strict";var idt=Uk();Ece.exports=function(t,n,u,l,o){var _=new Error(t);return idt(_,n,u,l,o)}});var Ace=S((BLt,Tce)=>{"use strict";var ndt=$k();Tce.exports=function(t,n,u){var l=u.config.validateStatus;!u.status||!l||l(u.status)?t(u):n(ndt("Request failed with status code "+u.status,u.config,null,u.request,u))}});var Cce=S((jLt,Pce)=>{"use strict";var uw=Vn();Pce.exports=uw.isStandardBrowserEnv()?function(){return{write:function(n,u,l,o,_,b){var E=[];E.push(n+"="+encodeURIComponent(u)),uw.isNumber(l)&&E.push("expires="+new Date(l).toGMTString()),uw.isString(o)&&E.push("path="+o),uw.isString(_)&&E.push("domain="+_),b===!0&&E.push("secure"),document.cookie=E.join("; ")},read:function(n){var u=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return u?decodeURIComponent(u[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()});var Oce=S((ULt,Mce)=>{"use strict";Mce.exports=function(t){return /^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}});var kce=S(($Lt,Rce)=>{"use strict";Rce.exports=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}});var Lce=S((VLt,Dce)=>{"use strict";var adt=Oce(),odt=kce();Dce.exports=function(t,n){return t&&!adt(n)?odt(t,n):n}});var Fce=S((GLt,zce)=>{"use strict";var Vk=Vn(),sdt=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];zce.exports=function(t){var n={},u,l,o;return t&&Vk.forEach(t.split(`
`),function(b){if(o=b.indexOf(":"),u=Vk.trim(b.substr(0,o)).toLowerCase(),l=Vk.trim(b.substr(o+1)),u){if(n[u]&&sdt.indexOf(u)>=0)return;u==="set-cookie"?n[u]=(n[u]?n[u]:[]).concat([l]):n[u]=n[u]?n[u]+", "+l:l}}),n}});var jce=S((HLt,Bce)=>{"use strict";var Nce=Vn();Bce.exports=Nce.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),u;function l(o){var _=o;return t&&(n.setAttribute("href",_),_=n.href),n.setAttribute("href",_),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return u=l(window.location.href),function(_){var b=Nce.isString(_)?l(_):_;return b.protocol===u.protocol&&b.host===u.host}}():function(){return function(){return!0}}()});var sy=S((WLt,Uce)=>{"use strict";function Gk(e){this.message=e}Gk.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};Gk.prototype.__CANCEL__=!0;Uce.exports=Gk});var Wk=S((ZLt,$ce)=>{"use strict";var lw=Vn(),udt=Ace(),ldt=Cce(),cdt=jk(),hdt=Lce(),fdt=Fce(),ddt=jce(),Hk=$k(),pdt=uy(),mdt=sy();$ce.exports=function(t){return new Promise(function(u,l){var o=t.data,_=t.headers,b=t.responseType,E;function T(){t.cancelToken&&t.cancelToken.unsubscribe(E),t.signal&&t.signal.removeEventListener("abort",E)}lw.isFormData(o)&&delete _["Content-Type"];var C=new XMLHttpRequest;if(t.auth){var z=t.auth.username||"",$=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";_.Authorization="Basic "+btoa(z+":"+$)}var oe=hdt(t.baseURL,t.url);C.open(t.method.toUpperCase(),cdt(oe,t.params,t.paramsSerializer),!0),C.timeout=t.timeout;function xe(){if(C){var X="getAllResponseHeaders"in C?fdt(C.getAllResponseHeaders()):null,K=!b||b==="text"||b==="json"?C.responseText:C.response,re={data:K,status:C.status,statusText:C.statusText,headers:X,config:t,request:C};udt(function(be){u(be),T()},function(be){l(be),T()},re),C=null}}if("onloadend"in C?C.onloadend=xe:C.onreadystatechange=function(){!C||C.readyState!==4||C.status===0&&!(C.responseURL&&C.responseURL.indexOf("file:")===0)||setTimeout(xe)},C.onabort=function(){C&&(l(Hk("Request aborted",t,"ECONNABORTED",C)),C=null)},C.onerror=function(){l(Hk("Network Error",t,null,C)),C=null},C.ontimeout=function(){var K=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded",re=t.transitional||pdt.transitional;t.timeoutErrorMessage&&(K=t.timeoutErrorMessage),l(Hk(K,t,re.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",C)),C=null},lw.isStandardBrowserEnv()){var _e=(t.withCredentials||ddt(oe))&&t.xsrfCookieName?ldt.read(t.xsrfCookieName):void 0;_e&&(_[t.xsrfHeaderName]=_e)}"setRequestHeader"in C&&lw.forEach(_,function(K,re){typeof o=="undefined"&&re.toLowerCase()==="content-type"?delete _[re]:C.setRequestHeader(re,K)}),lw.isUndefined(t.withCredentials)||(C.withCredentials=!!t.withCredentials),b&&b!=="json"&&(C.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&C.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&C.upload&&C.upload.addEventListener("progress",t.onUploadProgress),(t.cancelToken||t.signal)&&(E=function(X){C&&(l(!X||X&&X.type?new mdt("canceled"):X),C.abort(),C=null)},t.cancelToken&&t.cancelToken.subscribe(E),t.signal&&(t.signal.aborted?E():t.signal.addEventListener("abort",E))),o||(o=null),C.send(o)})}});var uy=S((KLt,Hce)=>{"use strict";var Ni=Vn(),Vce=qce(),vdt=Uk(),gdt={"Content-Type":"application/x-www-form-urlencoded"};function Gce(e,t){!Ni.isUndefined(e)&&Ni.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function ydt(){var e;return typeof XMLHttpRequest!="undefined"?e=Wk():typeof process!="undefined"&&Object.prototype.toString.call(process)==="[object process]"&&(e=Wk()),e}function _dt(e,t,n){if(Ni.isString(e))try{return(t||JSON.parse)(e),Ni.trim(e)}catch(u){if(u.name!=="SyntaxError")throw u}return(n||JSON.stringify)(e)}var cw={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:ydt(),transformRequest:[function(t,n){return Vce(n,"Accept"),Vce(n,"Content-Type"),Ni.isFormData(t)||Ni.isArrayBuffer(t)||Ni.isBuffer(t)||Ni.isStream(t)||Ni.isFile(t)||Ni.isBlob(t)?t:Ni.isArrayBufferView(t)?t.buffer:Ni.isURLSearchParams(t)?(Gce(n,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):Ni.isObject(t)||n&&n["Content-Type"]==="application/json"?(Gce(n,"application/json"),_dt(t)):t}],transformResponse:[function(t){var n=this.transitional||cw.transitional,u=n&&n.silentJSONParsing,l=n&&n.forcedJSONParsing,o=!u&&this.responseType==="json";if(o||l&&Ni.isString(t)&&t.length)try{return JSON.parse(t)}catch(_){if(o)throw _.name==="SyntaxError"?vdt(_,this,"E_JSON_PARSE"):_}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};Ni.forEach(["delete","get","head"],function(t){cw.headers[t]={}});Ni.forEach(["post","put","patch"],function(t){cw.headers[t]=Ni.merge(gdt)});Hce.exports=cw});var Zce=S((XLt,Wce)=>{"use strict";var xdt=Vn(),bdt=uy();Wce.exports=function(t,n,u){var l=this||bdt;return xdt.forEach(u,function(_){t=_.call(l,t,n)}),t}});var Zk=S((YLt,Kce)=>{"use strict";Kce.exports=function(t){return!!(t&&t.__CANCEL__)}});var Jce=S((JLt,Yce)=>{"use strict";var Xce=Vn(),Kk=Zce(),wdt=Zk(),Sdt=uy(),qdt=sy();function Xk(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new qdt("canceled")}Yce.exports=function(t){Xk(t),t.headers=t.headers||{},t.data=Kk.call(t,t.data,t.headers,t.transformRequest),t.headers=Xce.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Xce.forEach(["delete","get","head","post","put","patch","common"],function(l){delete t.headers[l]});var n=t.adapter||Sdt.adapter;return n(t).then(function(l){return Xk(t),l.data=Kk.call(t,l.data,l.headers,t.transformResponse),l},function(l){return wdt(l)||(Xk(t),l&&l.response&&(l.response.data=Kk.call(t,l.response.data,l.response.headers,t.transformResponse))),Promise.reject(l)})}});var Yk=S((QLt,Qce)=>{"use strict";var fa=Vn();Qce.exports=function(t,n){n=n||{};var u={};function l(C,z){return fa.isPlainObject(C)&&fa.isPlainObject(z)?fa.merge(C,z):fa.isPlainObject(z)?fa.merge({},z):fa.isArray(z)?z.slice():z}function o(C){if(fa.isUndefined(n[C])){if(!fa.isUndefined(t[C]))return l(void 0,t[C])}else return l(t[C],n[C])}function _(C){if(!fa.isUndefined(n[C]))return l(void 0,n[C])}function b(C){if(fa.isUndefined(n[C])){if(!fa.isUndefined(t[C]))return l(void 0,t[C])}else return l(void 0,n[C])}function E(C){if(C in n)return l(t[C],n[C]);if(C in t)return l(void 0,t[C])}var T={url:_,method:_,data:_,baseURL:b,transformRequest:b,transformResponse:b,paramsSerializer:b,timeout:b,timeoutMessage:b,withCredentials:b,adapter:b,responseType:b,xsrfCookieName:b,xsrfHeaderName:b,onUploadProgress:b,onDownloadProgress:b,decompress:b,maxContentLength:b,maxBodyLength:b,transport:b,httpAgent:b,httpsAgent:b,cancelToken:b,socketPath:b,responseEncoding:b,validateStatus:E};return fa.forEach(Object.keys(t).concat(Object.keys(n)),function(z){var $=T[z]||o,oe=$(z);fa.isUndefined(oe)&&$!==E||(u[z]=oe)}),u}});var Jk=S((ezt,ehe)=>{ehe.exports={version:"0.24.0"}});var ihe=S((tzt,rhe)=>{"use strict";var Idt=Jk().version,Qk={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){Qk[e]=function(u){return typeof u===e||"a"+(t<1?"n ":" ")+e}});var the={};Qk.transitional=function(t,n,u){function l(o,_){return"[Axios v"+Idt+"] Transitional option '"+o+"'"+_+(u?". "+u:"")}return function(o,_,b){if(t===!1)throw new Error(l(_," has been removed"+(n?" in "+n:"")));return n&&!the[_]&&(the[_]=!0,console.warn(l(_," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(o,_,b):!0}};function Edt(e,t,n){if(typeof e!="object")throw new TypeError("options must be an object");for(var u=Object.keys(e),l=u.length;l-->0;){var o=u[l],_=t[o];if(_){var b=e[o],E=b===void 0||_(b,o,e);if(E!==!0)throw new TypeError("option "+o+" must be "+E);continue}if(n!==!0)throw Error("Unknown option "+o)}}rhe.exports={assertOptions:Edt,validators:Qk}});var lhe=S((rzt,uhe)=>{"use strict";var ohe=Vn(),Tdt=jk(),nhe=wce(),ahe=Jce(),hw=Yk(),she=ihe(),Vd=she.validators;function ly(e){this.defaults=e,this.interceptors={request:new nhe,response:new nhe}}ly.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=hw(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var n=t.transitional;n!==void 0&&she.assertOptions(n,{silentJSONParsing:Vd.transitional(Vd.boolean),forcedJSONParsing:Vd.transitional(Vd.boolean),clarifyTimeoutError:Vd.transitional(Vd.boolean)},!1);var u=[],l=!0;this.interceptors.request.forEach(function($){typeof $.runWhen=="function"&&$.runWhen(t)===!1||(l=l&&$.synchronous,u.unshift($.fulfilled,$.rejected))});var o=[];this.interceptors.response.forEach(function($){o.push($.fulfilled,$.rejected)});var _;if(!l){var b=[ahe,void 0];for(Array.prototype.unshift.apply(b,u),b=b.concat(o),_=Promise.resolve(t);b.length;)_=_.then(b.shift(),b.shift());return _}for(var E=t;u.length;){var T=u.shift(),C=u.shift();try{E=T(E)}catch(z){C(z);break}}try{_=ahe(E)}catch(z){return Promise.reject(z)}for(;o.length;)_=_.then(o.shift(),o.shift());return _};ly.prototype.getUri=function(t){return t=hw(this.defaults,t),Tdt(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};ohe.forEach(["delete","get","head","options"],function(t){ly.prototype[t]=function(n,u){return this.request(hw(u||{},{method:t,url:n,data:(u||{}).data}))}});ohe.forEach(["post","put","patch"],function(t){ly.prototype[t]=function(n,u,l){return this.request(hw(l||{},{method:t,url:n,data:u}))}});uhe.exports=ly});var hhe=S((izt,che)=>{"use strict";var Adt=sy();function Gd(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(l){t=l});var n=this;this.promise.then(function(u){if(n._listeners){var l,o=n._listeners.length;for(l=0;l<o;l++)n._listeners[l](u);n._listeners=null}}),this.promise.then=function(u){var l,o=new Promise(function(_){n.subscribe(_),l=_}).then(u);return o.cancel=function(){n.unsubscribe(l)},o},e(function(l){n.reason||(n.reason=new Adt(l),t(n.reason))})}Gd.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};Gd.prototype.subscribe=function(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]};Gd.prototype.unsubscribe=function(t){if(this._listeners){var n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}};Gd.source=function(){var t,n=new Gd(function(l){t=l});return{token:n,cancel:t}};che.exports=Gd});var dhe=S((nzt,fhe)=>{"use strict";fhe.exports=function(t){return function(u){return t.apply(null,u)}}});var mhe=S((azt,phe)=>{"use strict";phe.exports=function(t){return typeof t=="object"&&t.isAxiosError===!0}});var yhe=S((ozt,eD)=>{"use strict";var vhe=Vn(),Pdt=Lk(),fw=lhe(),Cdt=Yk(),Mdt=uy();function ghe(e){var t=new fw(e),n=Pdt(fw.prototype.request,t);return vhe.extend(n,fw.prototype,t),vhe.extend(n,t),n.create=function(l){return ghe(Cdt(e,l))},n}var Qo=ghe(Mdt);Qo.Axios=fw;Qo.Cancel=sy();Qo.CancelToken=hhe();Qo.isCancel=Zk();Qo.VERSION=Jk().version;Qo.all=function(t){return Promise.all(t)};Qo.spread=dhe();Qo.isAxiosError=mhe();eD.exports=Qo;eD.exports.default=Qo});var tD=S((szt,_he)=>{_he.exports=yhe()});var bhe=S((rD,iD)=>{(function(e,t){typeof rD=="object"&&typeof iD!="undefined"?iD.exports=t():typeof define=="function"&&define.amd?define(t):(e=typeof globalThis!="undefined"?globalThis:e||self,e.maplibregl=t())})(rD,function(){"use strict";var e={},t={};function n(l,o,_){if(t[l]=_,l==="index"){var b="var sharedModule = {}; ("+t.shared+")(sharedModule); ("+t.worker+")(sharedModule);",E={};return t.shared(E),t.index(e,E),typeof window!="undefined"&&e.setWorkerUrl(window.URL.createObjectURL(new Blob([b],{type:"text/javascript"}))),e}}n("shared",["exports"],function(l){"use strict";function o(a,i,s,h){return new(s||(s=Promise))(function(p,g){function y(P){try{q(h.next(P))}catch(M){g(M)}}function x(P){try{q(h.throw(P))}catch(M){g(M)}}function q(P){var M;P.done?p(P.value):(M=P.value,M instanceof s?M:new s(function(R){R(M)})).then(y,x)}q((h=h.apply(a,i||[])).next())})}function _(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}typeof SuppressedError=="function"&&SuppressedError;var b=E;function E(a,i){this.x=a,this.y=i}E.prototype={clone:function(){return new E(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,i){return this.clone()._rotateAround(a,i)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var i=a.x-this.x,s=a.y-this.y;return i*i+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,i){return Math.atan2(this.x*i-this.y*a,this.x*a+this.y*i)},_matMult:function(a){var i=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=i,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var i=Math.cos(a),s=Math.sin(a),h=s*this.x+i*this.y;return this.x=i*this.x-s*this.y,this.y=h,this},_rotateAround:function(a,i){var s=Math.cos(a),h=Math.sin(a),p=i.y+h*(this.x-i.x)+s*(this.y-i.y);return this.x=i.x+s*(this.x-i.x)-h*(this.y-i.y),this.y=p,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},E.convert=function(a){return a instanceof E?a:Array.isArray(a)?new E(a[0],a[1]):a};var T=_(b),C=z;function z(a,i,s,h){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=s,this.p2y=h}z.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,h=0;h<8;h++){var p=this.sampleCurveX(s)-a;if(Math.abs(p)<i)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=p/g}var y=0,x=1;for(s=a,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-a)<i));h++)a>p?y=s:x=s,s=.5*(x-y)+y;return s},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var $=_(C);let oe,xe;function _e(){return oe==null&&(oe=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),oe}function X(){if(xe==null&&(xe=!1,_e())){let i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let h=0;h<5*5;h++){let p=4*h;i.fillStyle=`rgb(${p},${p+1},${p+2})`,i.fillRect(h%5,Math.floor(h/5),1,1)}let s=i.getImageData(0,0,5,5).data;for(let h=0;h<5*5*4;h++)if(h%4!=3&&s[h]!==h){xe=!0;break}}}return xe||!1}function K(a,i,s,h){let p=new $(a,i,s,h);return g=>p.solve(g)}let re=K(.25,.1,.25,1);function ge(a,i,s){return Math.min(s,Math.max(i,a))}function be(a,i,s){let h=s-i,p=((a-i)%h+h)%h+i;return p===i?s:p}function et(a,...i){for(let s of i)for(let h in s)a[h]=s[h];return a}let Le=1;function nt(a,i,s){let h={};for(let p in a)h[p]=i.call(this,a[p],p,a);return h}function gt(a,i,s){let h={};for(let p in a)i.call(this,a[p],p,a)&&(h[p]=a[p]);return h}function Qe(a){return Array.isArray(a)?a.map(Qe):typeof a=="object"&&a?nt(a,Qe):a}let nn={};function Wr(a){nn[a]||(typeof console!="undefined"&&console.warn(a),nn[a]=!0)}function wi(a,i,s){return(s.y-a.y)*(i.x-a.x)>(i.y-a.y)*(s.x-a.x)}function Ha(a){return typeof WorkerGlobalScope!="undefined"&&a!==void 0&&a instanceof WorkerGlobalScope}let Ks=null;function da(a){return typeof ImageBitmap!="undefined"&&a instanceof ImageBitmap}let ah="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function es(a,i,s,h,p){return o(this,void 0,void 0,function*(){if(typeof VideoFrame=="undefined")throw new Error("VideoFrame not supported");let g=new VideoFrame(a,{timestamp:0});try{let y=g==null?void 0:g.format;if(!y||!y.startsWith("BGR")&&!y.startsWith("RGB"))throw new Error(`Unrecognized format ${y}`);let x=y.startsWith("BGR"),q=new Uint8ClampedArray(h*p*4);if(yield g.copyTo(q,function(P,M,R,L,B){let U=4*Math.max(-M,0),G=(Math.max(0,R)-R)*L*4+U,J=4*L,ie=Math.max(0,M),ve=Math.max(0,R);return{rect:{x:ie,y:ve,width:Math.min(P.width,M+L)-ie,height:Math.min(P.height,R+B)-ve},layout:[{offset:G,stride:J}]}}(a,i,s,h,p)),x)for(let P=0;P<q.length;P+=4){let M=q[P];q[P]=q[P+2],q[P+2]=M}return q}finally{g.close()}})}let Wa,Bi,Gn="AbortError";function Xs(){return new Error(Gn)}let yo={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function pa(a){return yo.REGISTERED_PROTOCOLS[a.substring(0,a.indexOf("://"))]}let Ys="global-dispatcher";class an extends Error{constructor(i,s,h,p){super(`AJAXError: ${s} (${i}): ${h}`),this.status=i,this.statusText=s,this.url=h,this.body=p}}let Hn=()=>Ha(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,ts=function(a,i){if(/:\/\//.test(a.url)&&!/^https?:|^file:/.test(a.url)){let h=pa(a.url);if(h)return h(a,i);if(Ha(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,targetMapId:Ys},i)}if(!(/^file:/.test(s=a.url)||/^file:/.test(Hn())&&!/^\w+:/.test(s))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(h,p){return o(this,void 0,void 0,function*(){let g=new Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,cache:h.cache,referrer:Hn(),signal:p.signal});h.type!=="json"||g.headers.has("Accept")||g.headers.set("Accept","application/json");let y=yield fetch(g);if(!y.ok){let P=yield y.blob();throw new an(y.status,y.statusText,h.url,P)}let x;x=h.type==="arrayBuffer"||h.type==="image"?y.arrayBuffer():h.type==="json"?y.json():y.text();let q=yield x;if(p.signal.aborted)throw Xs();return{data:q,cacheControl:y.headers.get("Cache-Control"),expires:y.headers.get("Expires")}})}(a,i);if(Ha(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:a,mustQueue:!0,targetMapId:Ys},i)}var s;return function(h,p){return new Promise((g,y)=>{var x;let q=new XMLHttpRequest;q.open(h.method||"GET",h.url,!0),h.type!=="arrayBuffer"&&h.type!=="image"||(q.responseType="arraybuffer");for(let P in h.headers)q.setRequestHeader(P,h.headers[P]);h.type==="json"&&(q.responseType="text",!((x=h.headers)===null||x===void 0)&&x.Accept||q.setRequestHeader("Accept","application/json")),q.withCredentials=h.credentials==="include",q.onerror=()=>{y(new Error(q.statusText))},q.onload=()=>{if(!p.signal.aborted)if((q.status>=200&&q.status<300||q.status===0)&&q.response!==null){let P=q.response;if(h.type==="json")try{P=JSON.parse(q.response)}catch(M){return void y(M)}g({data:P,cacheControl:q.getResponseHeader("Cache-Control"),expires:q.getResponseHeader("Expires")})}else{let P=new Blob([q.response],{type:q.getResponseHeader("Content-Type")});y(new an(q.status,q.statusText,h.url,P))}},p.signal.addEventListener("abort",()=>{q.abort(),y(Xs())}),q.send(h.body)})}(a,i)};function rs(a){if(!a||a.indexOf("://")<=0||a.indexOf("data:image/")===0||a.indexOf("blob:")===0)return!0;let i=new URL(a),s=window.location;return i.protocol===s.protocol&&i.host===s.host}function Rl(a,i,s){s[a]&&s[a].indexOf(i)!==-1||(s[a]=s[a]||[],s[a].push(i))}function Za(a,i,s){if(s&&s[a]){let h=s[a].indexOf(i);h!==-1&&s[a].splice(h,1)}}class _o{constructor(i,s={}){et(this,s),this.type=i}}class xo extends _o{constructor(i,s={}){super("error",et({error:i},s))}}class Js{on(i,s){return this._listeners=this._listeners||{},Rl(i,s,this._listeners),this}off(i,s){return Za(i,s,this._listeners),Za(i,s,this._oneTimeListeners),this}once(i,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Rl(i,s,this._oneTimeListeners),this):new Promise(h=>this.once(i,h))}fire(i,s){typeof i=="string"&&(i=new _o(i,s||{}));let h=i.type;if(this.listens(h)){i.target=this;let p=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(let x of p)x.call(this,i);let g=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(let x of g)Za(h,x,this._oneTimeListeners),x.call(this,i);let y=this._eventedParent;y&&(et(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),y.fire(i))}else i instanceof xo&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,s){return this._eventedParent=i,this._eventedParentData=s,this}}var Se={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};let is=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function kl(a,i){let s={};for(let h in a)h!=="ref"&&(s[h]=a[h]);return is.forEach(h=>{h in i&&(s[h]=i[h])}),s}function Vt(a,i){if(Array.isArray(a)){if(!Array.isArray(i)||a.length!==i.length)return!1;for(let s=0;s<a.length;s++)if(!Vt(a[s],i[s]))return!1;return!0}if(typeof a=="object"&&a!==null&&i!==null){if(typeof i!="object"||Object.keys(a).length!==Object.keys(i).length)return!1;for(let s in a)if(!Vt(a[s],i[s]))return!1;return!0}return a===i}function xr(a,i){a.push(i)}function Dl(a,i,s){xr(s,{command:"addSource",args:[a,i[a]]})}function bo(a,i,s){xr(i,{command:"removeSource",args:[a]}),s[a]=!0}function Ka(a,i,s,h){bo(a,s,h),Dl(a,i,s)}function Qs(a,i,s){let h;for(h in a[s])if(Object.prototype.hasOwnProperty.call(a[s],h)&&h!=="data"&&!Vt(a[s][h],i[s][h]))return!1;for(h in i[s])if(Object.prototype.hasOwnProperty.call(i[s],h)&&h!=="data"&&!Vt(a[s][h],i[s][h]))return!1;return!0}function bn(a,i,s,h,p,g){a=a||{},i=i||{};for(let y in a)Object.prototype.hasOwnProperty.call(a,y)&&(Vt(a[y],i[y])||s.push({command:g,args:[h,y,i[y],p]}));for(let y in i)Object.prototype.hasOwnProperty.call(i,y)&&!Object.prototype.hasOwnProperty.call(a,y)&&(Vt(a[y],i[y])||s.push({command:g,args:[h,y,i[y],p]}))}function Ll(a){return a.id}function zl(a,i){return a[i.id]=i,a}class Re{constructor(i,s,h,p){this.message=(i?`${i}: `:"")+h,p&&(this.identifier=p),s!=null&&s.__line__&&(this.line=s.__line__)}}function ma(a,...i){for(let s of i)for(let h in s)a[h]=s[h];return a}class Si extends Error{constructor(i,s){super(s),this.message=s,this.key=i}}class va{constructor(i,s=[]){this.parent=i,this.bindings={};for(let[h,p]of s)this.bindings[h]=p}concat(i){return new va(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}let wo={kind:"null"},Fe={kind:"number"},At={kind:"string"},dt={kind:"boolean"},ji={kind:"color"},Wn={kind:"object"},bt={kind:"value"},ga={kind:"collator"},Xa={kind:"formatted"},So={kind:"padding"},ya={kind:"resolvedImage"},te={kind:"variableAnchorOffsetCollection"};function N(a,i){return{kind:"array",itemType:a,N:i}}function F(a){if(a.kind==="array"){let i=F(a.itemType);return typeof a.N=="number"?`array<${i}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${i}>`}return a.kind}let W=[wo,Fe,At,dt,ji,Xa,Wn,N(bt),So,ya,te];function Q(a,i){if(i.kind==="error")return null;if(a.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Q(a.itemType,i.itemType))&&(typeof a.N!="number"||a.N===i.N))return null}else{if(a.kind===i.kind)return null;if(a.kind==="value"){for(let s of W)if(!Q(s,i))return null}}return`Expected ${F(a)} but found ${F(i)} instead.`}function ce(a,i){return i.some(s=>s.kind===a.kind)}function fe(a,i){return i.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}function me(a,i){return a.kind==="array"&&i.kind==="array"?a.itemType.kind===i.itemType.kind&&typeof a.N=="number":a.kind===i.kind}let se=.96422,Ie=.82521,Ae=4/29,we=6/29,ke=3*we*we,st=we*we*we,lt=Math.PI/180,Bt=180/Math.PI;function St(a){return(a%=360)<0&&(a+=360),a}function jt([a,i,s,h]){let p,g,y=Dr((.2225045*(a=Dt(a))+.7168786*(i=Dt(i))+.0606169*(s=Dt(s)))/1);a===i&&i===s?p=g=y:(p=Dr((.4360747*a+.3850649*i+.1430804*s)/se),g=Dr((.0139322*a+.0971045*i+.7141733*s)/Ie));let x=116*y-16;return[x<0?0:x,500*(p-y),200*(y-g),h]}function Dt(a){return a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Dr(a){return a>st?Math.pow(a,1/3):a/ke+Ae}function br([a,i,s,h]){let p=(a+16)/116,g=isNaN(i)?p:p+i/500,y=isNaN(s)?p:p-s/200;return p=1*Kt(p),g=se*Kt(g),y=Ie*Kt(y),[Pt(3.1338561*g-1.6168667*p-.4906146*y),Pt(-.9787684*g+1.9161415*p+.033454*y),Pt(.0719453*g-.2289914*p+1.4052427*y),h]}function Pt(a){return(a=a<=.00304?12.92*a:1.055*Math.pow(a,1/2.4)-.055)<0?0:a>1?1:a}function Kt(a){return a>we?a*a*a:ke*(a-Ae)}function pr(a){return parseInt(a.padEnd(2,a),16)/255}function Zr(a,i){return ri(i?a/100:a,0,1)}function ri(a,i,s){return Math.min(Math.max(i,a),s)}function qi(a){return!a.some(Number.isNaN)}let eu={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class Xt{constructor(i,s,h,p=1,g=!0){this.r=i,this.g=s,this.b=h,this.a=p,g||(this.r*=p,this.g*=p,this.b*=p,p||this.overwriteGetter("rgb",[i,s,h,p]))}static parse(i){if(i instanceof Xt)return i;if(typeof i!="string")return;let s=function(h){if((h=h.toLowerCase().trim())==="transparent")return[0,0,0,0];let p=eu[h];if(p){let[y,x,q]=p;return[y/255,x/255,q/255,1]}if(h.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(h)){let y=h.length<6?1:2,x=1;return[pr(h.slice(x,x+=y)),pr(h.slice(x,x+=y)),pr(h.slice(x,x+=y)),pr(h.slice(x,x+y)||"ff")]}if(h.startsWith("rgb")){let y=h.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(y){let[x,q,P,M,R,L,B,U,G,J,ie,ve]=y,le=[M||" ",B||" ",J].join("");if(le==="  "||le==="  /"||le===",,"||le===",,,"){let pe=[P,L,G].join(""),qe=pe==="%%%"?100:pe===""?255:0;if(qe){let Ce=[ri(+q/qe,0,1),ri(+R/qe,0,1),ri(+U/qe,0,1),ie?Zr(+ie,ve):1];if(qi(Ce))return Ce}}return}}let g=h.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(g){let[y,x,q,P,M,R,L,B,U]=g,G=[q||" ",M||" ",L].join("");if(G==="  "||G==="  /"||G===",,"||G===",,,"){let J=[+x,ri(+P,0,100),ri(+R,0,100),B?Zr(+B,U):1];if(qi(J))return function([ie,ve,le,pe]){function qe(Ce){let We=(Ce+ie/30)%12,ct=ve*Math.min(le,1-le);return le-ct*Math.max(-1,Math.min(We-3,9-We,1))}return ie=St(ie),ve/=100,le/=100,[qe(0),qe(8),qe(4),pe]}(J)}}}(i);return s?new Xt(...s,!1):void 0}get rgb(){let{r:i,g:s,b:h,a:p}=this,g=p||1/0;return this.overwriteGetter("rgb",[i/g,s/g,h/g,p])}get hcl(){return this.overwriteGetter("hcl",function(i){let[s,h,p,g]=jt(i),y=Math.sqrt(h*h+p*p);return[Math.round(1e4*y)?St(Math.atan2(p,h)*Bt):NaN,y,s,g]}(this.rgb))}get lab(){return this.overwriteGetter("lab",jt(this.rgb))}overwriteGetter(i,s){return Object.defineProperty(this,i,{value:s}),s}toString(){let[i,s,h,p]=this.rgb;return`rgba(${[i,s,h].map(g=>Math.round(255*g)).join(",")},${p})`}}Xt.black=new Xt(0,0,0,1),Xt.white=new Xt(1,1,1,1),Xt.transparent=new Xt(0,0,0,0),Xt.red=new Xt(1,0,0,1);class Wd{constructor(i,s,h){this.sensitivity=i?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,s){return this.collator.compare(i,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Zd{constructor(i,s,h,p,g){this.text=i,this.image=s,this.scale=h,this.fontStack=p,this.textColor=g}}class on{constructor(i){this.sections=i}static fromString(i){return new on([new Zd(i,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(i=>i.text.length!==0||i.image&&i.image.name.length!==0)}static factory(i){return i instanceof on?i:on.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map(i=>i.text).join("")}}class sn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof sn)return i;if(typeof i=="number")return new sn([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(let s of i)if(typeof s!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]];}return new sn(i)}}toString(){return JSON.stringify(this.values)}}let mw=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class wn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof wn)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let s=0;s<i.length;s+=2){let h=i[s],p=i[s+1];if(typeof h!="string"||!mw.has(h)||!Array.isArray(p)||p.length!==2||typeof p[0]!="number"||typeof p[1]!="number")return}return new wn(i)}}toString(){return JSON.stringify(this.values)}}class un{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new un({name:i,available:!1}):null}}function tu(a,i,s,h){return typeof a=="number"&&a>=0&&a<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,i,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,i,s,h]:[a,i,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function ns(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof Xt||a instanceof Wd||a instanceof on||a instanceof sn||a instanceof wn||a instanceof un)return!0;if(Array.isArray(a)){for(let i of a)if(!ns(i))return!1;return!0}if(typeof a=="object"){for(let i in a)if(!ns(a[i]))return!1;return!0}return!1}function Lr(a){if(a===null)return wo;if(typeof a=="string")return At;if(typeof a=="boolean")return dt;if(typeof a=="number")return Fe;if(a instanceof Xt)return ji;if(a instanceof Wd)return ga;if(a instanceof on)return Xa;if(a instanceof sn)return So;if(a instanceof wn)return te;if(a instanceof un)return ya;if(Array.isArray(a)){let i=a.length,s;for(let h of a){let p=Lr(h);if(s){if(s===p)continue;s=bt;break}s=p}return N(s||bt,i)}return Wn}function Fl(a){let i=typeof a;return a===null?"":i==="string"||i==="number"||i==="boolean"?String(a):a instanceof Xt||a instanceof on||a instanceof sn||a instanceof wn||a instanceof un?a.toString():JSON.stringify(a)}class Zn{constructor(i,s){this.type=i,this.value=s}static parse(i,s){if(i.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!ns(i[1]))return s.error("invalid value");let h=i[1],p=Lr(h),g=s.expectedType;return p.kind!=="array"||p.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(p=g),new Zn(p,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class Rr{constructor(i){this.name="ExpressionEvaluationError",this.message=i}toJSON(){return this.message}}let oh={string:At,number:Fe,boolean:dt,object:Wn};class Kn{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h,p=1,g=i[0];if(g==="array"){let x,q;if(i.length>2){let P=i[1];if(typeof P!="string"||!(P in oh)||P==="object")return s.error("The item type argument of \"array\" must be one of string, number, boolean",1);x=oh[P],p++}else x=bt;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return s.error("The length argument to \"array\" must be a positive integer literal",2);q=i[2],p++}h=N(x,q)}else{if(!oh[g])throw new Error(`Types doesn't contain name = ${g}`);h=oh[g]}let y=[];for(;p<i.length;p++){let x=s.parse(i[p],p,bt);if(!x)return null;y.push(x)}return new Kn(h,y)}evaluate(i){for(let s=0;s<this.args.length;s++){let h=this.args[s].evaluate(i);if(!Q(this.type,Lr(h)))return h;if(s===this.args.length-1)throw new Rr(`Expected value to be of type ${F(this.type)}, but found ${F(Lr(h))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let Kd={"to-boolean":dt,"to-color":ji,"to-number":Fe,"to-string":At};class Xn{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h=i[0];if(!Kd[h])throw new Error(`Can't parse ${h} as it is not part of the known types`);if((h==="to-boolean"||h==="to-string")&&i.length!==2)return s.error("Expected one argument.");let p=Kd[h],g=[];for(let y=1;y<i.length;y++){let x=s.parse(i[y],y,bt);if(!x)return null;g.push(x)}return new Xn(p,g)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let s,h;for(let p of this.args){if(s=p.evaluate(i),h=null,s instanceof Xt)return s;if(typeof s=="string"){let g=i.parseColor(s);if(g)return g}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:tu(s[0],s[1],s[2],s[3]),!h))return new Xt(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new Rr(h||`Could not parse color from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"padding":{let s;for(let h of this.args){s=h.evaluate(i);let p=sn.parse(s);if(p)return p}throw new Rr(`Could not parse padding from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"variableAnchorOffsetCollection":{let s;for(let h of this.args){s=h.evaluate(i);let p=wn.parse(s);if(p)return p}throw new Rr(`Could not parse variableAnchorOffsetCollection from value '${typeof s=="string"?s:JSON.stringify(s)}'`)}case"number":{let s=null;for(let h of this.args){if(s=h.evaluate(i),s===null)return 0;let p=Number(s);if(!isNaN(p))return p}throw new Rr(`Could not convert ${JSON.stringify(s)} to number.`)}case"formatted":return on.fromString(Fl(this.args[0].evaluate(i)));case"resolvedImage":return un.fromString(Fl(this.args[0].evaluate(i)));default:return Fl(this.args[0].evaluate(i));}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}let vw=["Unknown","Point","LineString","Polygon"];class sh{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?vw[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let s=this._parseColorCache[i];return s||(s=this._parseColorCache[i]=Xt.parse(i)),s}}class as{constructor(i,s,h=[],p,g=new va,y=[]){this.registry=i,this.path=h,this.key=h.map(x=>`[${x}]`).join(""),this.scope=g,this.errors=y,this.expectedType=p,this._isConstant=s}parse(i,s,h,p,g={}){return s?this.concat(s,h,p)._parse(i,g):this._parse(i,g)}_parse(i,s){function h(p,g,y){return y==="assert"?new Kn(g,[p]):y==="coerce"?new Xn(g,[p]):p}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error("Expected an array with at least one element. If you wanted a literal array, use [\"literal\", []].");let p=i[0];if(typeof p!="string")return this.error(`Expression name must be a string, but found ${typeof p} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;let g=this.registry[p];if(g){let y=g.parse(i,this);if(!y)return null;if(this.expectedType){let x=this.expectedType,q=y.type;if(x.kind!=="string"&&x.kind!=="number"&&x.kind!=="boolean"&&x.kind!=="object"&&x.kind!=="array"||q.kind!=="value"){if(x.kind!=="color"&&x.kind!=="formatted"&&x.kind!=="resolvedImage"||q.kind!=="value"&&q.kind!=="string"){if(x.kind!=="padding"||q.kind!=="value"&&q.kind!=="number"&&q.kind!=="array"){if(x.kind!=="variableAnchorOffsetCollection"||q.kind!=="value"&&q.kind!=="array"){if(this.checkSubtype(x,q))return null}else y=h(y,x,s.typeAnnotation||"coerce");}else y=h(y,x,s.typeAnnotation||"coerce");}else y=h(y,x,s.typeAnnotation||"coerce");}else y=h(y,x,s.typeAnnotation||"assert")}if(!(y instanceof Zn)&&y.type.kind!=="resolvedImage"&&this._isConstant(y)){let x=new sh;try{y=new Zn(y.type,y.evaluate(x))}catch(q){return this.error(q.message),null}}return y}return this.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?"Bare objects invalid. Use [\"literal\", {...}] instead.":`Expected an array, but found ${typeof i} instead.`)}concat(i,s,h){let p=typeof i=="number"?this.path.concat(i):this.path,g=h?this.scope.concat(h):this.scope;return new as(this.registry,this._isConstant,p,s||null,g,this.errors)}error(i,...s){let h=`${this.key}${s.map(p=>`[${p}]`).join("")}`;this.errors.push(new Si(h,i))}checkSubtype(i,s){let h=Q(i,s);return h&&this.error(h),h}}class qo{constructor(i,s){this.type=s.type,this.bindings=[].concat(i),this.result=s}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(let s of this.bindings)i(s[1]);i(this.result)}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);let h=[];for(let g=1;g<i.length-1;g+=2){let y=i[g];if(typeof y!="string")return s.error(`Expected string, but found ${typeof y} instead.`,g);if(/[^a-zA-Z0-9_]/.test(y))return s.error("Variable names must contain only alphanumeric characters or '_'.",g);let x=s.parse(i[g+1],g+1);if(!x)return null;h.push([y,x])}let p=s.parse(i[i.length-1],i.length-1,s.expectedType,h);return p?new qo(h,p):null}outputDefined(){return this.result.outputDefined()}}class Gt{constructor(i,s){this.type=s.type,this.name=i,this.boundExpression=s}static parse(i,s){if(i.length!==2||typeof i[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");let h=i[1];return s.scope.has(h)?new Gt(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Xd{constructor(i,s,h){this.type=i,this.index=s,this.input=h}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,Fe),p=s.parse(i[2],2,N(s.expectedType||bt));return h&&p?new Xd(p.type.itemType,h,p):null}evaluate(i){let s=this.index.evaluate(i),h=this.input.evaluate(i);if(s<0)throw new Rr(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new Rr(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new Rr(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Yd{constructor(i,s){this.type=dt,this.needle=i,this.haystack=s}static parse(i,s){if(i.length!==3)return s.error(`Expected 2 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,bt),p=s.parse(i[2],2,bt);return h&&p?ce(h.type,[dt,At,Fe,wo,bt])?new Yd(h,p):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${F(h.type)} instead`):null}evaluate(i){let s=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!h)return!1;if(!fe(s,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${F(Lr(s))} instead.`);if(!fe(h,["string","array"]))throw new Rr(`Expected second argument to be of type array or string, but found ${F(Lr(h))} instead.`);return h.indexOf(s)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class ru{constructor(i,s,h){this.type=Fe,this.needle=i,this.haystack=s,this.fromIndex=h}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,bt),p=s.parse(i[2],2,bt);if(!h||!p)return null;if(!ce(h.type,[dt,At,Fe,wo,bt]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${F(h.type)} instead`);if(i.length===4){let g=s.parse(i[3],3,Fe);return g?new ru(h,p,g):null}return new ru(h,p)}evaluate(i){let s=this.needle.evaluate(i),h=this.haystack.evaluate(i);if(!fe(s,["boolean","string","number","null"]))throw new Rr(`Expected first argument to be of type boolean, string, number or null, but found ${F(Lr(s))} instead.`);let p;if(this.fromIndex&&(p=this.fromIndex.evaluate(i)),fe(h,["string"])){let g=h.indexOf(s,p);return g===-1?-1:[...h.slice(0,g)].length}if(fe(h,["array"]))return h.indexOf(s,p);throw new Rr(`Expected second argument to be of type array or string, but found ${F(Lr(h))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class Jd{constructor(i,s,h,p,g,y){this.inputType=i,this.type=s,this.input=h,this.cases=p,this.outputs=g,this.otherwise=y}static parse(i,s){if(i.length<5)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return s.error("Expected an even number of arguments.");let h,p;s.expectedType&&s.expectedType.kind!=="value"&&(p=s.expectedType);let g={},y=[];for(let P=2;P<i.length-1;P+=2){let M=i[P],R=i[P+1];Array.isArray(M)||(M=[M]);let L=s.concat(P);if(M.length===0)return L.error("Expected at least one branch label.");for(let U of M){if(typeof U!="number"&&typeof U!="string")return L.error("Branch labels must be numbers or strings.");if(typeof U=="number"&&Math.abs(U)>Number.MAX_SAFE_INTEGER)return L.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof U=="number"&&Math.floor(U)!==U)return L.error("Numeric branch labels must be integer values.");if(h){if(L.checkSubtype(h,Lr(U)))return null}else h=Lr(U);if(g[String(U)]!==void 0)return L.error("Branch labels must be unique.");g[String(U)]=y.length}let B=s.parse(R,P,p);if(!B)return null;p=p||B.type,y.push(B)}let x=s.parse(i[1],1,bt);if(!x)return null;let q=s.parse(i[i.length-1],i.length-1,p);return q?x.type.kind!=="value"&&s.concat(1).checkSubtype(h,x.type)?null:new Jd(h,p,x,g,y,q):null}evaluate(i){let s=this.input.evaluate(i);return(Lr(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every(i=>i.outputDefined())&&this.otherwise.outputDefined()}}class uh{constructor(i,s,h){this.type=i,this.branches=s,this.otherwise=h}static parse(i,s){if(i.length<4)return s.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);let p=[];for(let y=1;y<i.length-1;y+=2){let x=s.parse(i[y],y,dt);if(!x)return null;let q=s.parse(i[y+1],y+1,h);if(!q)return null;p.push([x,q]),h=h||q.type}let g=s.parse(i[i.length-1],i.length-1,h);if(!g)return null;if(!h)throw new Error("Can't infer output type");return new uh(h,p,g)}evaluate(i){for(let[s,h]of this.branches)if(s.evaluate(i))return h.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(let[s,h]of this.branches)i(s),i(h);i(this.otherwise)}outputDefined(){return this.branches.every(([i,s])=>s.outputDefined())&&this.otherwise.outputDefined()}}class Nl{constructor(i,s,h,p){this.type=i,this.input=s,this.beginIndex=h,this.endIndex=p}static parse(i,s){if(i.length<=2||i.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${i.length-1} instead.`);let h=s.parse(i[1],1,bt),p=s.parse(i[2],2,Fe);if(!h||!p)return null;if(!ce(h.type,[N(bt),At,bt]))return s.error(`Expected first argument to be of type array or string, but found ${F(h.type)} instead`);if(i.length===4){let g=s.parse(i[3],3,Fe);return g?new Nl(h.type,h,p,g):null}return new Nl(h.type,h,p)}evaluate(i){let s=this.input.evaluate(i),h=this.beginIndex.evaluate(i),p;if(this.endIndex&&(p=this.endIndex.evaluate(i)),fe(s,["string"]))return[...s].slice(h,p).join("");if(fe(s,["array"]))return s.slice(h,p);throw new Rr(`Expected first argument to be of type array or string, but found ${F(Lr(s))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function lh(a,i){let s=a.length-1,h,p,g=0,y=s,x=0;for(;g<=y;)if(x=Math.floor((g+y)/2),h=a[x],p=a[x+1],h<=i){if(x===s||i<p)return x;g=x+1}else{if(!(h>i))throw new Rr("Input is not a number.");y=x-1}return 0}class iu{constructor(i,s,h){this.type=i,this.input=s,this.labels=[],this.outputs=[];for(let[p,g]of h)this.labels.push(p),this.outputs.push(g)}static parse(i,s){if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");let h=s.parse(i[1],1,Fe);if(!h)return null;let p=[],g=null;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);for(let y=1;y<i.length;y+=2){let x=y===1?-1/0:i[y],q=i[y+1],P=y,M=y+1;if(typeof x!="number")return s.error("Input/output pairs for \"step\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",P);if(p.length&&p[p.length-1][0]>=x)return s.error("Input/output pairs for \"step\" expressions must be arranged with input values in strictly ascending order.",P);let R=s.parse(q,M,g);if(!R)return null;g=g||R.type,p.push([x,R])}return new iu(g,h,p)}evaluate(i){let s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(i);let p=this.input.evaluate(i);if(p<=s[0])return h[0].evaluate(i);let g=s.length;return p>=s[g-1]?h[g-1].evaluate(i):h[lh(s,p)].evaluate(i)}eachChild(i){i(this.input);for(let s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function dy(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var gw=py;function py(a,i,s,h){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*i,this.by=3*(h-i)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=i,this.p2x=s,this.p2y=h}py.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,i){if(i===void 0&&(i=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,h=0;h<8;h++){var p=this.sampleCurveX(s)-a;if(Math.abs(p)<i)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=p/g}var y=0,x=1;for(s=a,h=0;h<20&&(p=this.sampleCurveX(s),!(Math.abs(p-a)<i));h++)a>p?y=s:x=s,s=.5*(x-y)+y;return s},solve:function(a,i){return this.sampleCurveY(this.solveCurveX(a,i))}};var yw=dy(gw);function os(a,i,s){return a+s*(i-a)}function Bl(a,i,s){return a.map((h,p)=>os(h,i[p],s))}let Ui={number:os,color:function(a,i,s,h="rgb"){switch(h){case"rgb":{let[p,g,y,x]=Bl(a.rgb,i.rgb,s);return new Xt(p,g,y,x,!1)}case"hcl":{let[p,g,y,x]=a.hcl,[q,P,M,R]=i.hcl,L,B;if(isNaN(p)||isNaN(q))isNaN(p)?isNaN(q)?L=NaN:(L=q,y!==1&&y!==0||(B=P)):(L=p,M!==1&&M!==0||(B=g));else{let ve=q-p;q>p&&ve>180?ve-=360:q<p&&p-q>180&&(ve+=360),L=p+s*ve}let[U,G,J,ie]=function([ve,le,pe,qe]){return ve=isNaN(ve)?0:ve*lt,br([pe,Math.cos(ve)*le,Math.sin(ve)*le,qe])}([L,B!=null?B:os(g,P,s),os(y,M,s),os(x,R,s)]);return new Xt(U,G,J,ie,!1)}case"lab":{let[p,g,y,x]=br(Bl(a.lab,i.lab,s));return new Xt(p,g,y,x,!1)}}},array:Bl,padding:function(a,i,s){return new sn(Bl(a.values,i.values,s))},variableAnchorOffsetCollection:function(a,i,s){let h=a.values,p=i.values;if(h.length!==p.length)throw new Rr(`Cannot interpolate values of different length. from: ${a.toString()}, to: ${i.toString()}`);let g=[];for(let y=0;y<h.length;y+=2){if(h[y]!==p[y])throw new Rr(`Cannot interpolate values containing mismatched anchors. from[${y}]: ${h[y]}, to[${y}]: ${p[y]}`);g.push(h[y]);let[x,q]=h[y+1],[P,M]=p[y+1];g.push([os(x,P,s),os(q,M,s)])}return new wn(g)}};class $i{constructor(i,s,h,p,g){this.type=i,this.operator=s,this.interpolation=h,this.input=p,this.labels=[],this.outputs=[];for(let[y,x]of g)this.labels.push(y),this.outputs.push(x)}static interpolationFactor(i,s,h,p){let g=0;if(i.name==="exponential")g=ch(s,i.base,h,p);else if(i.name==="linear")g=ch(s,1,h,p);else if(i.name==="cubic-bezier"){let y=i.controlPoints;g=new yw(y[0],y[1],y[2],y[3]).solve(ch(s,1,h,p))}return g}static parse(i,s){let[h,p,g,...y]=i;if(!Array.isArray(p)||p.length===0)return s.error("Expected an interpolation type expression.",1);if(p[0]==="linear")p={name:"linear"};else if(p[0]==="exponential"){let P=p[1];if(typeof P!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);p={name:"exponential",base:P}}else{if(p[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(p[0])}`,1,0);{let P=p.slice(1);if(P.length!==4||P.some(M=>typeof M!="number"||M<0||M>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);p={name:"cubic-bezier",controlPoints:P}}}if(i.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(g=s.parse(g,2,Fe),!g)return null;let x=[],q=null;h==="interpolate-hcl"||h==="interpolate-lab"?q=ji:s.expectedType&&s.expectedType.kind!=="value"&&(q=s.expectedType);for(let P=0;P<y.length;P+=2){let M=y[P],R=y[P+1],L=P+3,B=P+4;if(typeof M!="number")return s.error("Input/output pairs for \"interpolate\" expressions must be defined using literal numeric values (not computed expressions) for the input values.",L);if(x.length&&x[x.length-1][0]>=M)return s.error("Input/output pairs for \"interpolate\" expressions must be arranged with input values in strictly ascending order.",L);let U=s.parse(R,B,q);if(!U)return null;q=q||U.type,x.push([M,U])}return me(q,Fe)||me(q,ji)||me(q,So)||me(q,te)||me(q,N(Fe))?new $i(q,h,p,g,x):s.error(`Type ${F(q)} is not interpolatable.`)}evaluate(i){let s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(i);let p=this.input.evaluate(i);if(p<=s[0])return h[0].evaluate(i);let g=s.length;if(p>=s[g-1])return h[g-1].evaluate(i);let y=lh(s,p),x=$i.interpolationFactor(this.interpolation,p,s[y],s[y+1]),q=h[y].evaluate(i),P=h[y+1].evaluate(i);switch(this.operator){case"interpolate":return Ui[this.type.kind](q,P,x);case"interpolate-hcl":return Ui.color(q,P,x,"hcl");case"interpolate-lab":return Ui.color(q,P,x,"lab");}}eachChild(i){i(this.input);for(let s of this.outputs)i(s)}outputDefined(){return this.outputs.every(i=>i.outputDefined())}}function ch(a,i,s,h){let p=h-s,g=a-s;return p===0?0:i===1?g/p:(Math.pow(i,g)-1)/(Math.pow(i,p)-1)}class hh{constructor(i,s){this.type=i,this.args=s}static parse(i,s){if(i.length<2)return s.error("Expectected at least one argument.");let h=null,p=s.expectedType;p&&p.kind!=="value"&&(h=p);let g=[];for(let x of i.slice(1)){let q=s.parse(x,1+g.length,h,void 0,{typeAnnotation:"omit"});if(!q)return null;h=h||q.type,g.push(q)}if(!h)throw new Error("No output type");let y=p&&g.some(x=>Q(p,x.type));return new hh(y?bt:h,g)}evaluate(i){let s,h=null,p=0;for(let g of this.args)if(p++,h=g.evaluate(i),h&&h instanceof un&&!h.available&&(s||(s=h.name),h=null,p===this.args.length&&(h=s)),h!==null)break;return h}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every(i=>i.outputDefined())}}function fh(a,i){return a==="=="||a==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function my(a,i,s,h){return h.compare(i,s)===0}function nu(a,i,s){let h=a!=="=="&&a!=="!=";return class xhe{constructor(g,y,x){this.type=dt,this.lhs=g,this.rhs=y,this.collator=x,this.hasUntypedArgument=g.type.kind==="value"||y.type.kind==="value"}static parse(g,y){if(g.length!==3&&g.length!==4)return y.error("Expected two or three arguments.");let x=g[0],q=y.parse(g[1],1,bt);if(!q)return null;if(!fh(x,q.type))return y.concat(1).error(`"${x}" comparisons are not supported for type '${F(q.type)}'.`);let P=y.parse(g[2],2,bt);if(!P)return null;if(!fh(x,P.type))return y.concat(2).error(`"${x}" comparisons are not supported for type '${F(P.type)}'.`);if(q.type.kind!==P.type.kind&&q.type.kind!=="value"&&P.type.kind!=="value")return y.error(`Cannot compare types '${F(q.type)}' and '${F(P.type)}'.`);h&&(q.type.kind==="value"&&P.type.kind!=="value"?q=new Kn(P.type,[q]):q.type.kind!=="value"&&P.type.kind==="value"&&(P=new Kn(q.type,[P])));let M=null;if(g.length===4){if(q.type.kind!=="string"&&P.type.kind!=="string"&&q.type.kind!=="value"&&P.type.kind!=="value")return y.error("Cannot use collator to compare non-string types.");if(M=y.parse(g[3],3,ga),!M)return null}return new xhe(q,P,M)}evaluate(g){let y=this.lhs.evaluate(g),x=this.rhs.evaluate(g);if(h&&this.hasUntypedArgument){let q=Lr(y),P=Lr(x);if(q.kind!==P.kind||q.kind!=="string"&&q.kind!=="number")throw new Rr(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${q.kind}, ${P.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){let q=Lr(y),P=Lr(x);if(q.kind!=="string"||P.kind!=="string")return i(g,y,x)}return this.collator?s(g,y,x,this.collator.evaluate(g)):i(g,y,x)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}}}let _w=nu("==",function(a,i,s){return i===s},my),vy=nu("!=",function(a,i,s){return i!==s},function(a,i,s,h){return!my(0,i,s,h)}),gy=nu("<",function(a,i,s){return i<s},function(a,i,s,h){return h.compare(i,s)<0}),xw=nu(">",function(a,i,s){return i>s},function(a,i,s,h){return h.compare(i,s)>0}),bw=nu("<=",function(a,i,s){return i<=s},function(a,i,s,h){return h.compare(i,s)<=0}),yy=nu(">=",function(a,i,s){return i>=s},function(a,i,s,h){return h.compare(i,s)>=0});class jl{constructor(i,s,h){this.type=ga,this.locale=h,this.caseSensitive=i,this.diacriticSensitive=s}static parse(i,s){if(i.length!==2)return s.error("Expected one argument.");let h=i[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");let p=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,dt);if(!p)return null;let g=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,dt);if(!g)return null;let y=null;return h.locale&&(y=s.parse(h.locale,1,At),!y)?null:new jl(p,g,y)}evaluate(i){return new Wd(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Qd{constructor(i,s,h,p,g){this.type=At,this.number=i,this.locale=s,this.currency=h,this.minFractionDigits=p,this.maxFractionDigits=g}static parse(i,s){if(i.length!==3)return s.error("Expected two arguments.");let h=s.parse(i[1],1,Fe);if(!h)return null;let p=i[2];if(typeof p!="object"||Array.isArray(p))return s.error("NumberFormat options argument must be an object.");let g=null;if(p.locale&&(g=s.parse(p.locale,1,At),!g))return null;let y=null;if(p.currency&&(y=s.parse(p.currency,1,At),!y))return null;let x=null;if(p["min-fraction-digits"]&&(x=s.parse(p["min-fraction-digits"],1,Fe),!x))return null;let q=null;return p["max-fraction-digits"]&&(q=s.parse(p["max-fraction-digits"],1,Fe),!q)?null:new Qd(h,g,y,x,q)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class dh{constructor(i){this.type=Xa,this.sections=i}static parse(i,s){if(i.length<2)return s.error("Expected at least one argument.");let h=i[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");let p=[],g=!1;for(let y=1;y<=i.length-1;++y){let x=i[y];if(g&&typeof x=="object"&&!Array.isArray(x)){g=!1;let q=null;if(x["font-scale"]&&(q=s.parse(x["font-scale"],1,Fe),!q))return null;let P=null;if(x["text-font"]&&(P=s.parse(x["text-font"],1,N(At)),!P))return null;let M=null;if(x["text-color"]&&(M=s.parse(x["text-color"],1,ji),!M))return null;let R=p[p.length-1];R.scale=q,R.font=P,R.textColor=M}else{let q=s.parse(i[y],1,bt);if(!q)return null;let P=q.type.kind;if(P!=="string"&&P!=="value"&&P!=="null"&&P!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,p.push({content:q,scale:null,font:null,textColor:null})}}return new dh(p)}evaluate(i){return new on(this.sections.map(s=>{let h=s.content.evaluate(i);return Lr(h)===ya?new Zd("",h,null,null,null):new Zd(Fl(h),null,s.scale?s.scale.evaluate(i):null,s.font?s.font.evaluate(i).join(","):null,s.textColor?s.textColor.evaluate(i):null)}))}eachChild(i){for(let s of this.sections)i(s.content),s.scale&&i(s.scale),s.font&&i(s.font),s.textColor&&i(s.textColor)}outputDefined(){return!1}}class ep{constructor(i){this.type=ya,this.input=i}static parse(i,s){if(i.length!==2)return s.error("Expected two arguments.");let h=s.parse(i[1],1,At);return h?new ep(h):s.error("No image name provided.")}evaluate(i){let s=this.input.evaluate(i),h=un.fromString(s);return h&&i.availableImages&&(h.available=i.availableImages.indexOf(s)>-1),h}eachChild(i){i(this.input)}outputDefined(){return!1}}class tp{constructor(i){this.type=Fe,this.input=i}static parse(i,s){if(i.length!==2)return s.error(`Expected 1 argument, but found ${i.length-1} instead.`);let h=s.parse(i[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${F(h.type)} instead.`):new tp(h):null}evaluate(i){let s=this.input.evaluate(i);if(typeof s=="string")return[...s].length;if(Array.isArray(s))return s.length;throw new Rr(`Expected value to be of type string or array, but found ${F(Lr(s))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}let _a=8192;function ww(a,i){let s=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,p=Math.pow(2,i.z);return[Math.round(s*p*_a),Math.round(h*p*_a)]}function rp(a,i){let s=Math.pow(2,i.z);return[(p=(a[0]/_a+i.x)/s,360*p-180),(h=(a[1]/_a+i.y)/s,360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90)];var h,p}function ss(a,i){a[0]=Math.min(a[0],i[0]),a[1]=Math.min(a[1],i[1]),a[2]=Math.max(a[2],i[0]),a[3]=Math.max(a[3],i[1])}function Io(a,i){return!(a[0]<=i[0]||a[2]>=i[2]||a[1]<=i[1]||a[3]>=i[3])}function Ht(a,i,s){let h=a[0]-i[0],p=a[1]-i[1],g=a[0]-s[0],y=a[1]-s[1];return h*y-g*p==0&&h*g<=0&&p*y<=0}function ph(a,i,s,h){return(p=[h[0]-s[0],h[1]-s[1]])[0]*(g=[i[0]-a[0],i[1]-a[1]])[1]-p[1]*g[0]!=0&&!(!xy(a,i,s,h)||!xy(s,h,a,i));var p,g}function Sw(a,i,s){for(let h of s)for(let p=0;p<h.length-1;++p)if(ph(a,i,h[p],h[p+1]))return!0;return!1}function au(a,i,s=!1){let h=!1;for(let x of i)for(let q=0;q<x.length-1;q++){if(Ht(a,x[q],x[q+1]))return s;(g=x[q])[1]>(p=a)[1]!=(y=x[q+1])[1]>p[1]&&p[0]<(y[0]-g[0])*(p[1]-g[1])/(y[1]-g[1])+g[0]&&(h=!h)}var p,g,y;return h}function qw(a,i){for(let s of i)if(au(a,s))return!0;return!1}function _y(a,i){for(let s of a)if(!au(s,i))return!1;for(let s=0;s<a.length-1;++s)if(Sw(a[s],a[s+1],i))return!1;return!0}function Iw(a,i){for(let s of i)if(_y(a,s))return!0;return!1}function xy(a,i,s,h){let p=h[0]-s[0],g=h[1]-s[1],y=(a[0]-s[0])*g-p*(a[1]-s[1]),x=(i[0]-s[0])*g-p*(i[1]-s[1]);return y>0&&x<0||y<0&&x>0}function ip(a,i,s){let h=[];for(let p=0;p<a.length;p++){let g=[];for(let y=0;y<a[p].length;y++){let x=ww(a[p][y],s);ss(i,x),g.push(x)}h.push(g)}return h}function by(a,i,s){let h=[];for(let p=0;p<a.length;p++){let g=ip(a[p],i,s);h.push(g)}return h}function wy(a,i,s,h){if(a[0]<s[0]||a[0]>s[2]){let p=.5*h,g=a[0]-s[0]>p?-h:s[0]-a[0]>p?h:0;g===0&&(g=a[0]-s[2]>p?-h:s[2]-a[0]>p?h:0),a[0]+=g}ss(i,a)}function Sy(a,i,s,h){let p=Math.pow(2,h.z)*_a,g=[h.x*_a,h.y*_a],y=[];for(let x of a)for(let q of x){let P=[q.x+g[0],q.y+g[1]];wy(P,i,s,p),y.push(P)}return y}function qy(a,i,s,h){let p=Math.pow(2,h.z)*_a,g=[h.x*_a,h.y*_a],y=[];for(let q of a){let P=[];for(let M of q){let R=[M.x+g[0],M.y+g[1]];ss(i,R),P.push(R)}y.push(P)}if(i[2]-i[0]<=p/2){(x=i)[0]=x[1]=1/0,x[2]=x[3]=-1/0;for(let q of y)for(let P of q)wy(P,i,s,p)}var x;return y}class us{constructor(i,s){this.type=dt,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(ns(i[1])){let h=i[1];if(h.type==="FeatureCollection"){let p=[];for(let g of h.features){let{type:y,coordinates:x}=g.geometry;y==="Polygon"&&p.push(x),y==="MultiPolygon"&&p.push(...x)}if(p.length)return new us(h,{type:"MultiPolygon",coordinates:p})}else if(h.type==="Feature"){let p=h.geometry.type;if(p==="Polygon"||p==="MultiPolygon")return new us(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new us(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(s,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(h.type==="Polygon"){let x=ip(h.coordinates,g,y),q=Sy(s.geometry(),p,g,y);if(!Io(p,g))return!1;for(let P of q)if(!au(P,x))return!1}if(h.type==="MultiPolygon"){let x=by(h.coordinates,g,y),q=Sy(s.geometry(),p,g,y);if(!Io(p,g))return!1;for(let P of q)if(!qw(P,x))return!1}return!0}(i,this.geometries);if(i.geometryType()==="LineString")return function(s,h){let p=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],y=s.canonicalID();if(h.type==="Polygon"){let x=ip(h.coordinates,g,y),q=qy(s.geometry(),p,g,y);if(!Io(p,g))return!1;for(let P of q)if(!_y(P,x))return!1}if(h.type==="MultiPolygon"){let x=by(h.coordinates,g,y),q=qy(s.geometry(),p,g,y);if(!Io(p,g))return!1;for(let P of q)if(!Iw(P,x))return!1}return!0}(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Iy=class{constructor(a=[],i=(s,h)=>s<h?-1:s>h?1:0){if(this.data=a,this.length=this.data.length,this.compare=i,this.length>0)for(let s=(this.length>>1)-1;s>=0;s--)this._down(s)}push(a){this.data.push(a),this._up(this.length++)}pop(){if(this.length===0)return;let a=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),a}peek(){return this.data[0]}_up(a){let{data:i,compare:s}=this,h=i[a];for(;a>0;){let p=a-1>>1,g=i[p];if(s(h,g)>=0)break;i[a]=g,a=p}i[a]=h}_down(a){let{data:i,compare:s}=this,h=this.length>>1,p=i[a];for(;a<h;){let g=1+(a<<1),y=g+1;if(y<this.length&&s(i[y],i[g])<0&&(g=y),s(i[g],p)>=0)break;i[a]=i[g],a=g}i[a]=p}};function Ew(a,i,s,h,p){Ey(a,i,s,h||a.length-1,p||Tw)}function Ey(a,i,s,h,p){for(;h>s;){if(h-s>600){var g=h-s+1,y=i-s+1,x=Math.log(g),q=.5*Math.exp(2*x/3),P=.5*Math.sqrt(x*q*(g-q)/g)*(y-g/2<0?-1:1);Ey(a,i,Math.max(s,Math.floor(i-y*q/g+P)),Math.min(h,Math.floor(i+(g-y)*q/g+P)),p)}var M=a[i],R=s,L=h;for(Ul(a,s,i),p(a[h],M)>0&&Ul(a,s,h);R<L;){for(Ul(a,R,L),R++,L--;p(a[R],M)<0;)R++;for(;p(a[L],M)>0;)L--}p(a[s],M)===0?Ul(a,s,L):Ul(a,++L,h),L<=i&&(s=L+1),i<=L&&(h=L-1)}}function Ul(a,i,s){var h=a[i];a[i]=a[s],a[s]=h}function Tw(a,i){return a<i?-1:a>i?1:0}function mh(a,i){if(a.length<=1)return[a];let s=[],h,p;for(let g of a){let y=Pw(g);y!==0&&(g.area=Math.abs(y),p===void 0&&(p=y<0),p===y<0?(h&&s.push(h),h=[g]):h.push(g))}if(h&&s.push(h),i>1)for(let g=0;g<s.length;g++)s[g].length<=i||(Ew(s[g],i,1,s[g].length-1,Aw),s[g]=s[g].slice(0,i));return s}function Aw(a,i){return i.area-a.area}function Pw(a){let i=0;for(let s,h,p=0,g=a.length,y=g-1;p<g;y=p++)s=a[p],h=a[y],i+=(h.x-s.x)*(s.y+h.y);return i}let Ty=1/298.257223563,Ay=Ty*(2-Ty),Py=Math.PI/180;class np{constructor(i){let s=6378.137*Py*1e3,h=Math.cos(i*Py),p=1/(1-Ay*(1-h*h)),g=Math.sqrt(p);this.kx=s*g*h,this.ky=s*g*p*(1-Ay)}distance(i,s){let h=this.wrap(i[0]-s[0])*this.kx,p=(i[1]-s[1])*this.ky;return Math.sqrt(h*h+p*p)}pointOnLine(i,s){let h,p,g,y,x=1/0;for(let q=0;q<i.length-1;q++){let P=i[q][0],M=i[q][1],R=this.wrap(i[q+1][0]-P)*this.kx,L=(i[q+1][1]-M)*this.ky,B=0;R===0&&L===0||(B=(this.wrap(s[0]-P)*this.kx*R+(s[1]-M)*this.ky*L)/(R*R+L*L),B>1?(P=i[q+1][0],M=i[q+1][1]):B>0&&(P+=R/this.kx*B,M+=L/this.ky*B)),R=this.wrap(s[0]-P)*this.kx,L=(s[1]-M)*this.ky;let U=R*R+L*L;U<x&&(x=U,h=P,p=M,g=q,y=B)}return{point:[h,p],index:g,t:Math.max(0,Math.min(1,y))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function Cy(a,i){return i[0]-a[0]}function vh(a){return a[1]-a[0]+1}function Ya(a,i){return a[1]>=a[0]&&a[1]<i}function ap(a,i){if(a[0]>a[1])return[null,null];let s=vh(a);if(i){if(s===2)return[a,null];let p=Math.floor(s/2);return[[a[0],a[0]+p],[a[0]+p,a[1]]]}if(s===1)return[a,null];let h=Math.floor(s/2)-1;return[[a[0],a[0]+h],[a[0]+h+1,a[1]]]}function op(a,i){if(!Ya(i,a.length))return[1/0,1/0,-1/0,-1/0];let s=[1/0,1/0,-1/0,-1/0];for(let h=i[0];h<=i[1];++h)ss(s,a[h]);return s}function sp(a){let i=[1/0,1/0,-1/0,-1/0];for(let s of a)for(let h of s)ss(i,h);return i}function gh(a){return a[0]!==-1/0&&a[1]!==-1/0&&a[2]!==1/0&&a[3]!==1/0}function up(a,i,s){if(!gh(a)||!gh(i))return NaN;let h=0,p=0;return a[2]<i[0]&&(h=i[0]-a[2]),a[0]>i[2]&&(h=a[0]-i[2]),a[1]>i[3]&&(p=a[1]-i[3]),a[3]<i[1]&&(p=i[1]-a[3]),s.distance([0,0],[h,p])}function ls(a,i,s){let h=s.pointOnLine(i,a);return s.distance(a,h.point)}function lp(a,i,s,h,p){let g=Math.min(ls(a,[s,h],p),ls(i,[s,h],p)),y=Math.min(ls(s,[a,i],p),ls(h,[a,i],p));return Math.min(g,y)}function Cw(a,i,s,h,p){if(!Ya(i,a.length)||!Ya(h,s.length))return 1/0;let g=1/0;for(let y=i[0];y<i[1];++y){let x=a[y],q=a[y+1];for(let P=h[0];P<h[1];++P){let M=s[P],R=s[P+1];if(ph(x,q,M,R))return 0;g=Math.min(g,lp(x,q,M,R,p))}}return g}function Er(a,i,s,h,p){if(!Ya(i,a.length)||!Ya(h,s.length))return NaN;let g=1/0;for(let y=i[0];y<=i[1];++y)for(let x=h[0];x<=h[1];++x)if(g=Math.min(g,p.distance(a[y],s[x])),g===0)return g;return g}function Mw(a,i,s){if(au(a,i,!0))return 0;let h=1/0;for(let p of i){let g=p[0],y=p[p.length-1];if(g!==y&&(h=Math.min(h,ls(a,[y,g],s)),h===0))return h;let x=s.pointOnLine(p,a);if(h=Math.min(h,s.distance(a,x.point)),h===0)return h}return h}function Mt(a,i,s,h){if(!Ya(i,a.length))return NaN;for(let g=i[0];g<=i[1];++g)if(au(a[g],s,!0))return 0;let p=1/0;for(let g=i[0];g<i[1];++g){let y=a[g],x=a[g+1];for(let q of s)for(let P=0,M=q.length,R=M-1;P<M;R=P++){let L=q[R],B=q[P];if(ph(y,x,L,B))return 0;p=Math.min(p,lp(y,x,L,B,h))}}return p}function yh(a,i){for(let s of a)for(let h of s)if(au(h,i,!0))return!0;return!1}function nr(a,i,s,h=1/0){let p=sp(a),g=sp(i);if(h!==1/0&&up(p,g,s)>=h)return h;if(Io(p,g)){if(yh(a,i))return 0}else if(yh(i,a))return 0;let y=1/0;for(let x of a)for(let q=0,P=x.length,M=P-1;q<P;M=q++){let R=x[M],L=x[q];for(let B of i)for(let U=0,G=B.length,J=G-1;U<G;J=U++){let ie=B[J],ve=B[U];if(ph(R,L,ie,ve))return 0;y=Math.min(y,lp(R,L,ie,ve,s))}}return y}function Jt(a,i,s,h,p,g){if(!g)return;let y=up(op(h,g),p,s);y<i&&a.push([y,g,[0,0]])}function cs(a,i,s,h,p,g,y){if(!g||!y)return;let x=up(op(h,g),op(p,y),s);x<i&&a.push([x,g,y])}function $l(a,i,s,h,p=1/0){let g=Math.min(h.distance(a[0],s[0][0]),p);if(g===0)return g;let y=new Iy([[0,[0,a.length-1],[0,0]]],Cy),x=sp(s);for(;y.length>0;){let q=y.pop();if(q[0]>=g)continue;let P=q[1],M=i?50:100;if(vh(P)<=M){if(!Ya(P,a.length))return NaN;if(i){let R=Mt(a,P,s,h);if(isNaN(R)||R===0)return R;g=Math.min(g,R)}else for(let R=P[0];R<=P[1];++R){let L=Mw(a[R],s,h);if(g=Math.min(g,L),g===0)return 0}}else{let R=ap(P,i);Jt(y,g,h,a,x,R[0]),Jt(y,g,h,a,x,R[1])}}return g}function Vl(a,i,s,h,p,g=1/0){let y=Math.min(g,p.distance(a[0],s[0]));if(y===0)return y;let x=new Iy([[0,[0,a.length-1],[0,s.length-1]]],Cy);for(;x.length>0;){let q=x.pop();if(q[0]>=y)continue;let P=q[1],M=q[2],R=i?50:100,L=h?50:100;if(vh(P)<=R&&vh(M)<=L){if(!Ya(P,a.length)&&Ya(M,s.length))return NaN;let B;if(i&&h)B=Cw(a,P,s,M,p),y=Math.min(y,B);else if(i&&!h){let U=a.slice(P[0],P[1]+1);for(let G=M[0];G<=M[1];++G)if(B=ls(s[G],U,p),y=Math.min(y,B),y===0)return y}else if(!i&&h){let U=s.slice(M[0],M[1]+1);for(let G=P[0];G<=P[1];++G)if(B=ls(a[G],U,p),y=Math.min(y,B),y===0)return y}else B=Er(a,P,s,M,p),y=Math.min(y,B)}else{let B=ap(P,i),U=ap(M,h);cs(x,y,p,a,s,B[0],U[0]),cs(x,y,p,a,s,B[0],U[1]),cs(x,y,p,a,s,B[1],U[0]),cs(x,y,p,a,s,B[1],U[1])}}return y}function cp(a){return a.type==="MultiPolygon"?a.coordinates.map(i=>({type:"Polygon",coordinates:i})):a.type==="MultiLineString"?a.coordinates.map(i=>({type:"LineString",coordinates:i})):a.type==="MultiPoint"?a.coordinates.map(i=>({type:"Point",coordinates:i})):[a]}class hs{constructor(i,s){this.type=Fe,this.geojson=i,this.geometries=s}static parse(i,s){if(i.length!==2)return s.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(ns(i[1])){let h=i[1];if(h.type==="FeatureCollection")return new hs(h,h.features.map(p=>cp(p.geometry)).flat());if(h.type==="Feature")return new hs(h,cp(h.geometry));if("type"in h&&"coordinates"in h)return new hs(h,cp(h))}return s.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return function(s,h){let p=s.geometry(),g=p.flat().map(q=>rp([q.x,q.y],s.canonical));if(p.length===0)return NaN;let y=new np(g[0][1]),x=1/0;for(let q of h){switch(q.type){case"Point":x=Math.min(x,Vl(g,!1,[q.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,Vl(g,!1,q.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,$l(g,!1,q.coordinates,y,x));}if(x===0)return x}return x}(i,this.geometries);if(i.geometryType()==="LineString")return function(s,h){let p=s.geometry(),g=p.flat().map(q=>rp([q.x,q.y],s.canonical));if(p.length===0)return NaN;let y=new np(g[0][1]),x=1/0;for(let q of h){switch(q.type){case"Point":x=Math.min(x,Vl(g,!0,[q.coordinates],!1,y,x));break;case"LineString":x=Math.min(x,Vl(g,!0,q.coordinates,!0,y,x));break;case"Polygon":x=Math.min(x,$l(g,!0,q.coordinates,y,x));}if(x===0)return x}return x}(i,this.geometries);if(i.geometryType()==="Polygon")return function(s,h){let p=s.geometry();if(p.length===0||p[0].length===0)return NaN;let g=mh(p,0).map(q=>q.map(P=>P.map(M=>rp([M.x,M.y],s.canonical)))),y=new np(g[0][0][0][1]),x=1/0;for(let q of h)for(let P of g){switch(q.type){case"Point":x=Math.min(x,$l([q.coordinates],!1,P,y,x));break;case"LineString":x=Math.min(x,$l(q.coordinates,!0,P,y,x));break;case"Polygon":x=Math.min(x,nr(P,q.coordinates,y,x));}if(x===0)return x}return x}(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}let ou={"==":_w,"!=":vy,">":xw,"<":gy,">=":yy,"<=":bw,array:Kn,at:Xd,boolean:Kn,case:uh,coalesce:hh,collator:jl,format:dh,image:ep,in:Yd,"index-of":ru,interpolate:$i,"interpolate-hcl":$i,"interpolate-lab":$i,length:tp,let:qo,literal:Zn,match:Jd,number:Kn,"number-format":Qd,object:Kn,slice:Nl,step:iu,string:Kn,"to-boolean":Xn,"to-color":Xn,"to-number":Xn,"to-string":Xn,var:Gt,within:us,distance:hs};class Sn{constructor(i,s,h,p){this.name=i,this.type=s,this._evaluate=h,this.args=p}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,s){let h=i[0],p=Sn.definitions[h];if(!p)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);let g=Array.isArray(p)?p[0]:p.type,y=Array.isArray(p)?[[p[1],p[2]]]:p.overloads,x=y.filter(([P])=>!Array.isArray(P)||P.length===i.length-1),q=null;for(let[P,M]of x){q=new as(s.registry,Gl,s.path,null,s.scope);let R=[],L=!1;for(let B=1;B<i.length;B++){let U=i[B],G=Array.isArray(P)?P[B-1]:P.type,J=q.parse(U,1+R.length,G);if(!J){L=!0;break}R.push(J)}if(!L)if(Array.isArray(P)&&P.length!==R.length)q.error(`Expected ${P.length} arguments, but found ${R.length} instead.`);else{for(let B=0;B<R.length;B++){let U=Array.isArray(P)?P[B]:P.type,G=R[B];q.concat(B+1).checkSubtype(U,G.type)}if(q.errors.length===0)return new Sn(h,g,M,R)}}if(x.length===1)s.errors.push(...q.errors);else{let P=(x.length?x:y).map(([R])=>{return L=R,Array.isArray(L)?`(${L.map(F).join(", ")})`:`(${F(L.type)}...)`;var L}).join(" | "),M=[];for(let R=1;R<i.length;R++){let L=s.parse(i[R],1+M.length);if(!L)return null;M.push(F(L.type))}s.error(`Expected arguments of type ${P}, but found (${M.join(", ")}) instead.`)}return null}static register(i,s){Sn.definitions=s;for(let h in s)i[h]=Sn}}function hp(a,[i,s,h,p]){i=i.evaluate(a),s=s.evaluate(a),h=h.evaluate(a);let g=p?p.evaluate(a):1,y=tu(i,s,h,g);if(y)throw new Rr(y);return new Xt(i/255,s/255,h/255,g,!1)}function fp(a,i){return a in i}function dp(a,i){let s=i[a];return s===void 0?null:s}function fs(a){return{type:a}}function Gl(a){if(a instanceof Gt)return Gl(a.boundExpression);if(a instanceof Sn&&a.name==="error"||a instanceof jl||a instanceof us||a instanceof hs)return!1;let i=a instanceof Xn||a instanceof Kn,s=!0;return a.eachChild(h=>{s=i?s&&Gl(h):s&&h instanceof Zn}),!!s&&Hl(a)&&Wl(a,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Hl(a){if(a instanceof Sn&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof us||a instanceof hs)return!1;let i=!0;return a.eachChild(s=>{i&&!Hl(s)&&(i=!1)}),i}function su(a){if(a instanceof Sn&&a.name==="feature-state")return!1;let i=!0;return a.eachChild(s=>{i&&!su(s)&&(i=!1)}),i}function Wl(a,i){if(a instanceof Sn&&i.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(h=>{s&&!Wl(h,i)&&(s=!1)}),s}function _h(a){return{result:"success",value:a}}function uu(a){return{result:"error",value:a}}function lu(a){return a["property-type"]==="data-driven"||a["property-type"]==="cross-faded-data-driven"}function My(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function pp(a){return!!a.expression&&a.expression.interpolated}function Ut(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function xh(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function Ow(a){return a}function Oy(a,i){let s=i.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",p=h||!(h||a.property!==void 0),g=a.type||(pp(i)?"exponential":"interval");if(s||i.type==="padding"){let M=s?Xt.parse:sn.parse;(a=ma({},a)).stops&&(a.stops=a.stops.map(R=>[R[0],M(R[1])])),a.default=M(a.default?a.default:i.default)}if(a.colorSpace&&(y=a.colorSpace)!=="rgb"&&y!=="hcl"&&y!=="lab")throw new Error(`Unknown color space: "${a.colorSpace}"`);var y;let x,q,P;if(g==="exponential")x=ky;else if(g==="interval")x=bh;else if(g==="categorical"){x=Ry,q=Object.create(null);for(let M of a.stops)q[M[0]]=M[1];P=typeof a.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);x=Dy}if(h){let M={},R=[];for(let U=0;U<a.stops.length;U++){let G=a.stops[U],J=G[0].zoom;M[J]===void 0&&(M[J]={zoom:J,type:a.type,property:a.property,default:a.default,stops:[]},R.push(J)),M[J].stops.push([G[0].value,G[1]])}let L=[];for(let U of R)L.push([M[U].zoom,Oy(M[U],i)]);let B={name:"linear"};return{kind:"composite",interpolationType:B,interpolationFactor:$i.interpolationFactor.bind(void 0,B),zoomStops:L.map(U=>U[0]),evaluate:({zoom:U},G)=>ky({stops:L,base:a.base},i,U).evaluate(U,G)}}if(p){let M=g==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:$i.interpolationFactor.bind(void 0,M),zoomStops:a.stops.map(R=>R[0]),evaluate:({zoom:R})=>x(a,i,R,q,P)}}return{kind:"source",evaluate(M,R){let L=R&&R.properties?R.properties[a.property]:void 0;return L===void 0?cu(a.default,i.default):x(a,i,L,q,P)}}}function cu(a,i,s){return a!==void 0?a:i!==void 0?i:s!==void 0?s:void 0}function Ry(a,i,s,h,p){return cu(typeof s===p?h[s]:void 0,a.default,i.default)}function bh(a,i,s){if(Ut(s)!=="number")return cu(a.default,i.default);let h=a.stops.length;if(h===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[h-1][0])return a.stops[h-1][1];let p=lh(a.stops.map(g=>g[0]),s);return a.stops[p][1]}function ky(a,i,s){let h=a.base!==void 0?a.base:1;if(Ut(s)!=="number")return cu(a.default,i.default);let p=a.stops.length;if(p===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[p-1][0])return a.stops[p-1][1];let g=lh(a.stops.map(M=>M[0]),s),y=function(M,R,L,B){let U=B-L,G=M-L;return U===0?0:R===1?G/U:(Math.pow(R,G)-1)/(Math.pow(R,U)-1)}(s,h,a.stops[g][0],a.stops[g+1][0]),x=a.stops[g][1],q=a.stops[g+1][1],P=Ui[i.type]||Ow;return typeof x.evaluate=="function"?{evaluate(...M){let R=x.evaluate.apply(void 0,M),L=q.evaluate.apply(void 0,M);if(R!==void 0&&L!==void 0)return P(R,L,y,a.colorSpace)}}:P(x,q,y,a.colorSpace)}function Dy(a,i,s){switch(i.type){case"color":s=Xt.parse(s);break;case"formatted":s=on.fromString(s.toString());break;case"resolvedImage":s=un.fromString(s.toString());break;case"padding":s=sn.parse(s);break;default:Ut(s)===i.type||i.type==="enum"&&i.values[s]||(s=void 0);}return cu(s,a.default,i.default)}Sn.register(ou,{error:[{kind:"error"},[At],(a,[i])=>{throw new Rr(i.evaluate(a))}],typeof:[At,[bt],(a,[i])=>F(Lr(i.evaluate(a)))],"to-rgba":[N(Fe,4),[ji],(a,[i])=>{let[s,h,p,g]=i.evaluate(a).rgb;return[255*s,255*h,255*p,g]}],rgb:[ji,[Fe,Fe,Fe],hp],rgba:[ji,[Fe,Fe,Fe,Fe],hp],has:{type:dt,overloads:[[[At],(a,[i])=>fp(i.evaluate(a),a.properties())],[[At,Wn],(a,[i,s])=>fp(i.evaluate(a),s.evaluate(a))]]},get:{type:bt,overloads:[[[At],(a,[i])=>dp(i.evaluate(a),a.properties())],[[At,Wn],(a,[i,s])=>dp(i.evaluate(a),s.evaluate(a))]]},"feature-state":[bt,[At],(a,[i])=>dp(i.evaluate(a),a.featureState||{})],properties:[Wn,[],a=>a.properties()],"geometry-type":[At,[],a=>a.geometryType()],id:[bt,[],a=>a.id()],zoom:[Fe,[],a=>a.globals.zoom],"heatmap-density":[Fe,[],a=>a.globals.heatmapDensity||0],"line-progress":[Fe,[],a=>a.globals.lineProgress||0],accumulated:[bt,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[Fe,fs(Fe),(a,i)=>{let s=0;for(let h of i)s+=h.evaluate(a);return s}],"*":[Fe,fs(Fe),(a,i)=>{let s=1;for(let h of i)s*=h.evaluate(a);return s}],"-":{type:Fe,overloads:[[[Fe,Fe],(a,[i,s])=>i.evaluate(a)-s.evaluate(a)],[[Fe],(a,[i])=>-i.evaluate(a)]]},"/":[Fe,[Fe,Fe],(a,[i,s])=>i.evaluate(a)/s.evaluate(a)],"%":[Fe,[Fe,Fe],(a,[i,s])=>i.evaluate(a)%s.evaluate(a)],ln2:[Fe,[],()=>Math.LN2],pi:[Fe,[],()=>Math.PI],e:[Fe,[],()=>Math.E],"^":[Fe,[Fe,Fe],(a,[i,s])=>Math.pow(i.evaluate(a),s.evaluate(a))],sqrt:[Fe,[Fe],(a,[i])=>Math.sqrt(i.evaluate(a))],log10:[Fe,[Fe],(a,[i])=>Math.log(i.evaluate(a))/Math.LN10],ln:[Fe,[Fe],(a,[i])=>Math.log(i.evaluate(a))],log2:[Fe,[Fe],(a,[i])=>Math.log(i.evaluate(a))/Math.LN2],sin:[Fe,[Fe],(a,[i])=>Math.sin(i.evaluate(a))],cos:[Fe,[Fe],(a,[i])=>Math.cos(i.evaluate(a))],tan:[Fe,[Fe],(a,[i])=>Math.tan(i.evaluate(a))],asin:[Fe,[Fe],(a,[i])=>Math.asin(i.evaluate(a))],acos:[Fe,[Fe],(a,[i])=>Math.acos(i.evaluate(a))],atan:[Fe,[Fe],(a,[i])=>Math.atan(i.evaluate(a))],min:[Fe,fs(Fe),(a,i)=>Math.min(...i.map(s=>s.evaluate(a)))],max:[Fe,fs(Fe),(a,i)=>Math.max(...i.map(s=>s.evaluate(a)))],abs:[Fe,[Fe],(a,[i])=>Math.abs(i.evaluate(a))],round:[Fe,[Fe],(a,[i])=>{let s=i.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[Fe,[Fe],(a,[i])=>Math.floor(i.evaluate(a))],ceil:[Fe,[Fe],(a,[i])=>Math.ceil(i.evaluate(a))],"filter-==":[dt,[At,bt],(a,[i,s])=>a.properties()[i.value]===s.value],"filter-id-==":[dt,[bt],(a,[i])=>a.id()===i.value],"filter-type-==":[dt,[At],(a,[i])=>a.geometryType()===i.value],"filter-<":[dt,[At,bt],(a,[i,s])=>{let h=a.properties()[i.value],p=s.value;return typeof h==typeof p&&h<p}],"filter-id-<":[dt,[bt],(a,[i])=>{let s=a.id(),h=i.value;return typeof s==typeof h&&s<h}],"filter->":[dt,[At,bt],(a,[i,s])=>{let h=a.properties()[i.value],p=s.value;return typeof h==typeof p&&h>p}],"filter-id->":[dt,[bt],(a,[i])=>{let s=a.id(),h=i.value;return typeof s==typeof h&&s>h}],"filter-<=":[dt,[At,bt],(a,[i,s])=>{let h=a.properties()[i.value],p=s.value;return typeof h==typeof p&&h<=p}],"filter-id-<=":[dt,[bt],(a,[i])=>{let s=a.id(),h=i.value;return typeof s==typeof h&&s<=h}],"filter->=":[dt,[At,bt],(a,[i,s])=>{let h=a.properties()[i.value],p=s.value;return typeof h==typeof p&&h>=p}],"filter-id->=":[dt,[bt],(a,[i])=>{let s=a.id(),h=i.value;return typeof s==typeof h&&s>=h}],"filter-has":[dt,[bt],(a,[i])=>i.value in a.properties()],"filter-has-id":[dt,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[dt,[N(At)],(a,[i])=>i.value.indexOf(a.geometryType())>=0],"filter-id-in":[dt,[N(bt)],(a,[i])=>i.value.indexOf(a.id())>=0],"filter-in-small":[dt,[At,N(bt)],(a,[i,s])=>s.value.indexOf(a.properties()[i.value])>=0],"filter-in-large":[dt,[At,N(bt)],(a,[i,s])=>function(h,p,g,y){for(;g<=y;){let x=g+y>>1;if(p[x]===h)return!0;p[x]>h?y=x-1:g=x+1}return!1}(a.properties()[i.value],s.value,0,s.value.length-1)],all:{type:dt,overloads:[[[dt,dt],(a,[i,s])=>i.evaluate(a)&&s.evaluate(a)],[fs(dt),(a,i)=>{for(let s of i)if(!s.evaluate(a))return!1;return!0}]]},any:{type:dt,overloads:[[[dt,dt],(a,[i,s])=>i.evaluate(a)||s.evaluate(a)],[fs(dt),(a,i)=>{for(let s of i)if(s.evaluate(a))return!0;return!1}]]},"!":[dt,[dt],(a,[i])=>!i.evaluate(a)],"is-supported-script":[dt,[At],(a,[i])=>{let s=a.globals&&a.globals.isSupportedScript;return!s||s(i.evaluate(a))}],upcase:[At,[At],(a,[i])=>i.evaluate(a).toUpperCase()],downcase:[At,[At],(a,[i])=>i.evaluate(a).toLowerCase()],concat:[At,fs(bt),(a,i)=>i.map(s=>Fl(s.evaluate(a))).join("")],"resolved-locale":[At,[ga],(a,[i])=>i.evaluate(a).resolvedLocale()]});class wh{constructor(i,s){var h;this.expression=i,this._warningHistory={},this._evaluator=new sh,this._defaultValue=s?(h=s).type==="color"&&xh(h.default)?new Xt(0,0,0,0):h.type==="color"?Xt.parse(h.default)||null:h.type==="padding"?sn.parse(h.default)||null:h.type==="variableAnchorOffsetCollection"?wn.parse(h.default)||null:h.default===void 0?null:h.default:null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(i,s,h,p,g,y){return this._evaluator.globals=i,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y,this.expression.evaluate(this._evaluator)}evaluate(i,s,h,p,g,y){this._evaluator.globals=i,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=p,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=y||null;try{let x=this.expression.evaluate(this._evaluator);if(x==null||typeof x=="number"&&x!=x)return this._defaultValue;if(this._enumValues&&!(x in this._enumValues))throw new Rr(`Expected value to be one of ${Object.keys(this._enumValues).map(q=>JSON.stringify(q)).join(", ")}, but found ${JSON.stringify(x)} instead.`);return x}catch(x){return this._warningHistory[x.message]||(this._warningHistory[x.message]=!0,typeof console!="undefined"&&console.warn(x.message)),this._defaultValue}}}function Sh(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in ou}function hu(a,i){let s=new as(ou,Gl,[],i?function(p){let g={color:ji,string:At,number:Fe,enum:At,boolean:dt,formatted:Xa,padding:So,resolvedImage:ya,variableAnchorOffsetCollection:te};return p.type==="array"?N(g[p.value]||bt,p.length):g[p.type]}(i):void 0),h=s.parse(a,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?_h(new wh(h,i)):uu(s.errors)}class fu{constructor(i,s){this.kind=i,this._styleExpression=s,this.isStateDependent=i!=="constant"&&!su(s.expression)}evaluateWithoutErrorHandling(i,s,h,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(i,s,h,p,g,y)}evaluate(i,s,h,p,g,y){return this._styleExpression.evaluate(i,s,h,p,g,y)}}class du{constructor(i,s,h,p){this.kind=i,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=i!=="camera"&&!su(s.expression),this.interpolationType=p}evaluateWithoutErrorHandling(i,s,h,p,g,y){return this._styleExpression.evaluateWithoutErrorHandling(i,s,h,p,g,y)}evaluate(i,s,h,p,g,y){return this._styleExpression.evaluate(i,s,h,p,g,y)}interpolationFactor(i,s,h){return this.interpolationType?$i.interpolationFactor(this.interpolationType,i,s,h):0}}function mp(a,i){let s=hu(a,i);if(s.result==="error")return s;let h=s.value.expression,p=Hl(h);if(!p&&!lu(i))return uu([new Si("","data expressions not supported")]);let g=Wl(h,["zoom"]);if(!g&&!My(i))return uu([new Si("","zoom expressions not supported")]);let y=Zl(h);return y||g?y instanceof Si?uu([y]):y instanceof $i&&!pp(i)?uu([new Si("","\"interpolate\" expressions cannot be used with this property")]):_h(y?new du(p?"camera":"composite",s.value,y.labels,y instanceof $i?y.interpolation:void 0):new fu(p?"constant":"source",s.value)):uu([new Si("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression.")])}class pu{constructor(i,s){this._parameters=i,this._specification=s,ma(this,Oy(this._parameters,this._specification))}static deserialize(i){return new pu(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Zl(a){let i=null;if(a instanceof qo)i=Zl(a.result);else if(a instanceof hh){for(let s of a.args)if(i=Zl(s),i)break}else(a instanceof iu||a instanceof $i)&&a.input instanceof Sn&&a.input.name==="zoom"&&(i=a);return i instanceof Si||a.eachChild(s=>{let h=Zl(s);h instanceof Si?i=h:!i&&h?i=new Si("","\"zoom\" expression may only be used as input to a top-level \"step\" or \"interpolate\" expression."):i&&h&&i!==h&&(i=new Si("","Only one zoom-based \"step\" or \"interpolate\" subexpression may be used in an expression."))}),i}function qh(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(let i of a.slice(1))if(!qh(i)&&typeof i!="boolean")return!1;return!0;default:return!0;}}let Ih={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function vp(a){if(a==null)return{filter:()=>!0,needGeometry:!1};qh(a)||(a=Eh(a));let i=hu(a,Ih);if(i.result==="error")throw new Error(i.value.map(s=>`${s.key}: ${s.message}`).join(", "));return{filter:(s,h,p)=>i.value.evaluate(s,h,{},p),needGeometry:Ly(a)}}function Rw(a,i){return a<i?-1:a>i?1:0}function Ly(a){if(!Array.isArray(a))return!1;if(a[0]==="within"||a[0]==="distance")return!0;for(let i=1;i<a.length;i++)if(Ly(a[i]))return!0;return!1}function Eh(a){if(!a)return!0;let i=a[0];return a.length<=1?i!=="any":i==="=="?gp(a[1],a[2],"=="):i==="!="?li(gp(a[1],a[2],"==")):i==="<"||i===">"||i==="<="||i===">="?gp(a[1],a[2],i):i==="any"?(s=a.slice(1),["any"].concat(s.map(Eh))):i==="all"?["all"].concat(a.slice(1).map(Eh)):i==="none"?["all"].concat(a.slice(1).map(Eh).map(li)):i==="in"?Kl(a[1],a.slice(2)):i==="!in"?li(Kl(a[1],a.slice(2))):i==="has"?Xl(a[1]):i!=="!has"||li(Xl(a[1]));var s}function gp(a,i,s){switch(a){case"$type":return[`filter-type-${s}`,i];case"$id":return[`filter-id-${s}`,i];default:return[`filter-${s}`,a,i];}}function Kl(a,i){if(i.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some(s=>typeof s!=typeof i[0])?["filter-in-large",a,["literal",i.sort(Rw)]]:["filter-in-small",a,["literal",i]];}}function Xl(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a];}}function li(a){return["!",a]}function ds(a){let i=typeof a;if(i==="number"||i==="boolean"||i==="string"||a==null)return JSON.stringify(a);if(Array.isArray(a)){let p="[";for(let g of a)p+=`${ds(g)},`;return`${p}]`}let s=Object.keys(a).sort(),h="{";for(let p=0;p<s.length;p++)h+=`${JSON.stringify(s[p])}:${ds(a[s[p]])},`;return`${h}}`}function zy(a){let i="";for(let s of is)i+=`/${ds(a[s])}`;return i}function Fy(a){let i=a.value;return i?[new Re(a.key,i,"constants have been deprecated as of v8")]:[]}function Tr(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function Yn(a){if(Array.isArray(a))return a.map(Yn);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){let i={};for(let s in a)i[s]=Yn(a[s]);return i}return Tr(a)}function ln(a){let i=a.key,s=a.value,h=a.valueSpec||{},p=a.objectElementValidators||{},g=a.style,y=a.styleSpec,x=a.validateSpec,q=[],P=Ut(s);if(P!=="object")return[new Re(i,s,`object expected, ${P} found`)];for(let M in s){let R=M.split(".")[0],L=h[R]||h["*"],B;if(p[R])B=p[R];else if(h[R])B=x;else if(p["*"])B=p["*"];else{if(!h["*"]){q.push(new Re(i,s[M],`unknown property "${M}"`));continue}B=x}q=q.concat(B({key:(i&&`${i}.`)+M,value:s[M],valueSpec:L,style:g,styleSpec:y,object:s,objectKey:M,validateSpec:x},s))}for(let M in h)p[M]||h[M].required&&h[M].default===void 0&&s[M]===void 0&&q.push(new Re(i,s,`missing required property "${M}"`));return q}function Yl(a){let i=a.value,s=a.valueSpec,h=a.style,p=a.styleSpec,g=a.key,y=a.arrayElementValidator||a.validateSpec;if(Ut(i)!=="array")return[new Re(g,i,`array expected, ${Ut(i)} found`)];if(s.length&&i.length!==s.length)return[new Re(g,i,`array length ${s.length} expected, length ${i.length} found`)];if(s["min-length"]&&i.length<s["min-length"])return[new Re(g,i,`array length at least ${s["min-length"]} expected, length ${i.length} found`)];let x={type:s.value,values:s.values};p.$version<7&&(x.function=s.function),Ut(s.value)==="object"&&(x=s.value);let q=[];for(let P=0;P<i.length;P++)q=q.concat(y({array:i,arrayIndex:P,value:i[P],valueSpec:x,validateSpec:a.validateSpec,style:h,styleSpec:p,key:`${g}[${P}]`}));return q}function yp(a){let i=a.key,s=a.value,h=a.valueSpec,p=Ut(s);return p==="number"&&s!=s&&(p="NaN"),p!=="number"?[new Re(i,s,`number expected, ${p} found`)]:"minimum"in h&&s<h.minimum?[new Re(i,s,`${s} is less than the minimum value ${h.minimum}`)]:"maximum"in h&&s>h.maximum?[new Re(i,s,`${s} is greater than the maximum value ${h.maximum}`)]:[]}function Th(a){let i=a.valueSpec,s=Tr(a.value.type),h,p,g,y={},x=s!=="categorical"&&a.value.property===void 0,q=!x,P=Ut(a.value.stops)==="array"&&Ut(a.value.stops[0])==="array"&&Ut(a.value.stops[0][0])==="object",M=ln({key:a.key,value:a.value,valueSpec:a.styleSpec.function,validateSpec:a.validateSpec,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(B){if(s==="identity")return[new Re(B.key,B.value,"identity function may not have a \"stops\" property")];let U=[],G=B.value;return U=U.concat(Yl({key:B.key,value:G,valueSpec:B.valueSpec,validateSpec:B.validateSpec,style:B.style,styleSpec:B.styleSpec,arrayElementValidator:R})),Ut(G)==="array"&&G.length===0&&U.push(new Re(B.key,G,"array must have at least one stop")),U},default:function(B){return B.validateSpec({key:B.key,value:B.value,valueSpec:i,validateSpec:B.validateSpec,style:B.style,styleSpec:B.styleSpec})}}});return s==="identity"&&x&&M.push(new Re(a.key,a.value,"missing required property \"property\"")),s==="identity"||a.value.stops||M.push(new Re(a.key,a.value,"missing required property \"stops\"")),s==="exponential"&&a.valueSpec.expression&&!pp(a.valueSpec)&&M.push(new Re(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(q&&!lu(a.valueSpec)?M.push(new Re(a.key,a.value,"property functions not supported")):x&&!My(a.valueSpec)&&M.push(new Re(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!P||a.value.property!==void 0||M.push(new Re(a.key,a.value,"\"property\" property is required")),M;function R(B){let U=[],G=B.value,J=B.key;if(Ut(G)!=="array")return[new Re(J,G,`array expected, ${Ut(G)} found`)];if(G.length!==2)return[new Re(J,G,`array length 2 expected, length ${G.length} found`)];if(P){if(Ut(G[0])!=="object")return[new Re(J,G,`object expected, ${Ut(G[0])} found`)];if(G[0].zoom===void 0)return[new Re(J,G,"object stop key must have zoom")];if(G[0].value===void 0)return[new Re(J,G,"object stop key must have value")];if(g&&g>Tr(G[0].zoom))return[new Re(J,G[0].zoom,"stop zoom values must appear in ascending order")];Tr(G[0].zoom)!==g&&(g=Tr(G[0].zoom),p=void 0,y={}),U=U.concat(ln({key:`${J}[0]`,value:G[0],valueSpec:{zoom:{}},validateSpec:B.validateSpec,style:B.style,styleSpec:B.styleSpec,objectElementValidators:{zoom:yp,value:L}}))}else U=U.concat(L({key:`${J}[0]`,value:G[0],valueSpec:{},validateSpec:B.validateSpec,style:B.style,styleSpec:B.styleSpec},G));return Sh(Yn(G[1]))?U.concat([new Re(`${J}[1]`,G[1],"expressions are not allowed in function stops.")]):U.concat(B.validateSpec({key:`${J}[1]`,value:G[1],valueSpec:i,validateSpec:B.validateSpec,style:B.style,styleSpec:B.styleSpec}))}function L(B,U){let G=Ut(B.value),J=Tr(B.value),ie=B.value!==null?B.value:U;if(h){if(G!==h)return[new Re(B.key,ie,`${G} stop domain type must match previous stop domain type ${h}`)]}else h=G;if(G!=="number"&&G!=="string"&&G!=="boolean")return[new Re(B.key,ie,"stop domain value must be a number, string, or boolean")];if(G!=="number"&&s!=="categorical"){let ve=`number expected, ${G} found`;return lu(i)&&s===void 0&&(ve+="\nIf you intended to use a categorical function, specify `\"type\": \"categorical\"`."),[new Re(B.key,ie,ve)]}return s!=="categorical"||G!=="number"||isFinite(J)&&Math.floor(J)===J?s!=="categorical"&&G==="number"&&p!==void 0&&J<p?[new Re(B.key,ie,"stop domain values must appear in ascending order")]:(p=J,s==="categorical"&&J in y?[new Re(B.key,ie,"stop domain values must be unique")]:(y[J]=!0,[])):[new Re(B.key,ie,`integer expected, found ${J}`)]}}function mu(a){let i=(a.expressionContext==="property"?mp:hu)(Yn(a.value),a.valueSpec);if(i.result==="error")return i.value.map(h=>new Re(`${a.key}${h.key}`,a.value,h.message));let s=i.value.expression||i.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Re(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!su(s))return[new Re(a.key,a.value,"\"feature-state\" data expressions are not supported with layout properties.")];if(a.expressionContext==="filter"&&!su(s))return[new Re(a.key,a.value,"\"feature-state\" data expressions are not supported with filters.")];if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Wl(s,["zoom","feature-state"]))return[new Re(a.key,a.value,"\"zoom\" and \"feature-state\" expressions are not supported with cluster properties.")];if(a.expressionContext==="cluster-initial"&&!Hl(s))return[new Re(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ja(a){let i=a.key,s=a.value,h=a.valueSpec,p=[];return Array.isArray(h.values)?h.values.indexOf(Tr(s))===-1&&p.push(new Re(i,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Tr(s))===-1&&p.push(new Re(i,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),p}function _p(a){return qh(Yn(a.value))?mu(ma({},a,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Ah(a)}function Ah(a){let i=a.value,s=a.key;if(Ut(i)!=="array")return[new Re(s,i,`array expected, ${Ut(i)} found`)];let h=a.styleSpec,p,g=[];if(i.length<1)return[new Re(s,i,"filter array must have at least 1 element")];switch(g=g.concat(Ja({key:`${s}[0]`,value:i[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),Tr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Tr(i[1])==="$type"&&g.push(new Re(s,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&g.push(new Re(s,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(p=Ut(i[1]),p!=="string"&&g.push(new Re(`${s}[1]`,i[1],`string expected, ${p} found`)));for(let y=2;y<i.length;y++)p=Ut(i[y]),Tr(i[1])==="$type"?g=g.concat(Ja({key:`${s}[${y}]`,value:i[y],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):p!=="string"&&p!=="number"&&p!=="boolean"&&g.push(new Re(`${s}[${y}]`,i[y],`string, number, or boolean expected, ${p} found`));break;case"any":case"all":case"none":for(let y=1;y<i.length;y++)g=g.concat(Ah({key:`${s}[${y}]`,value:i[y],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":p=Ut(i[1]),i.length!==2?g.push(new Re(s,i,`filter array for "${i[0]}" operator must have 2 elements`)):p!=="string"&&g.push(new Re(`${s}[1]`,i[1],`string expected, ${p} found`));}return g}function xp(a,i){let s=a.key,h=a.validateSpec,p=a.style,g=a.styleSpec,y=a.value,x=a.objectKey,q=g[`${i}_${a.layerType}`];if(!q)return[];let P=x.match(/^(.*)-transition$/);if(i==="paint"&&P&&q[P[1]]&&q[P[1]].transition)return h({key:s,value:y,valueSpec:g.transition,style:p,styleSpec:g});let M=a.valueSpec||q[x];if(!M)return[new Re(s,y,`unknown property "${x}"`)];let R;if(Ut(y)==="string"&&lu(M)&&!M.tokens&&(R=/^{([^}]+)}$/.exec(y)))return[new Re(s,y,`"${x}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(R[1])} }\`.`)];let L=[];return a.layerType==="symbol"&&(x==="text-field"&&p&&!p.glyphs&&L.push(new Re(s,y,"use of \"text-field\" requires a style \"glyphs\" property")),x==="text-font"&&xh(Yn(y))&&Tr(y.type)==="identity"&&L.push(new Re(s,y,"\"text-font\" does not support identity functions"))),L.concat(h({key:a.key,value:y,valueSpec:M,style:p,styleSpec:g,expressionContext:"property",propertyType:i,propertyKey:x}))}function Ph(a){return xp(a,"paint")}function bp(a){return xp(a,"layout")}function wp(a){let i=[],s=a.value,h=a.key,p=a.style,g=a.styleSpec;s.type||s.ref||i.push(new Re(h,s,"either \"type\" or \"ref\" is required"));let y=Tr(s.type),x=Tr(s.ref);if(s.id){let q=Tr(s.id);for(let P=0;P<a.arrayIndex;P++){let M=p.layers[P];Tr(M.id)===q&&i.push(new Re(h,s.id,`duplicate layer id "${s.id}", previously used at line ${M.id.__line__}`))}}if("ref"in s){let q;["type","source","source-layer","filter","layout"].forEach(P=>{P in s&&i.push(new Re(h,s[P],`"${P}" is prohibited for ref layers`))}),p.layers.forEach(P=>{Tr(P.id)===x&&(q=P)}),q?q.ref?i.push(new Re(h,s.ref,"ref cannot reference another ref layer")):y=Tr(q.type):i.push(new Re(h,s.ref,`ref layer "${x}" not found`))}else if(y!=="background")if(s.source){let q=p.sources&&p.sources[s.source],P=q&&Tr(q.type);q?P==="vector"&&y==="raster"?i.push(new Re(h,s.source,`layer "${s.id}" requires a raster source`)):P!=="raster-dem"&&y==="hillshade"?i.push(new Re(h,s.source,`layer "${s.id}" requires a raster-dem source`)):P==="raster"&&y!=="raster"?i.push(new Re(h,s.source,`layer "${s.id}" requires a vector source`)):P!=="vector"||s["source-layer"]?P==="raster-dem"&&y!=="hillshade"?i.push(new Re(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):y!=="line"||!s.paint||!s.paint["line-gradient"]||P==="geojson"&&q.lineMetrics||i.push(new Re(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new Re(h,s,`layer "${s.id}" must specify a "source-layer"`)):i.push(new Re(h,s.source,`source "${s.source}" not found`))}else i.push(new Re(h,s,"missing required property \"source\""));return i=i.concat(ln({key:h,value:s,valueSpec:g.layer,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,objectElementValidators:{"*":()=>[],type:()=>a.validateSpec({key:`${h}.type`,value:s.type,valueSpec:g.layer.type,style:a.style,styleSpec:a.styleSpec,validateSpec:a.validateSpec,object:s,objectKey:"type"}),filter:_p,layout:q=>ln({layer:s,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":P=>bp(ma({layerType:y},P))}}),paint:q=>ln({layer:s,key:q.key,value:q.value,style:q.style,styleSpec:q.styleSpec,validateSpec:q.validateSpec,objectElementValidators:{"*":P=>Ph(ma({layerType:y},P))}})}})),i}function ps(a){let i=a.value,s=a.key,h=Ut(i);return h!=="string"?[new Re(s,i,`string expected, ${h} found`)]:[]}let Ch={promoteId:function({key:a,value:i}){if(Ut(i)==="string")return ps({key:a,value:i});{let s=[];for(let h in i)s.push(...ps({key:`${a}.${h}`,value:i[h]}));return s}}};function Jl(a){let i=a.value,s=a.key,h=a.styleSpec,p=a.style,g=a.validateSpec;if(!i.type)return[new Re(s,i,"\"type\" is required")];let y=Tr(i.type),x;switch(y){case"vector":case"raster":return x=ln({key:s,value:i,valueSpec:h[`source_${y.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:Ch,validateSpec:g}),x;case"raster-dem":return x=function(q){var P;let M=(P=q.sourceName)!==null&&P!==void 0?P:"",R=q.value,L=q.styleSpec,B=L.source_raster_dem,U=q.style,G=[],J=Ut(R);if(R===void 0)return G;if(J!=="object")return G.push(new Re("source_raster_dem",R,`object expected, ${J} found`)),G;let ie=Tr(R.encoding)==="custom",ve=["redFactor","greenFactor","blueFactor","baseShift"],le=q.value.encoding?`"${q.value.encoding}"`:"Default";for(let pe in R)!ie&&ve.includes(pe)?G.push(new Re(pe,R[pe],`In "${M}": "${pe}" is only valid when "encoding" is set to "custom". ${le} encoding found`)):B[pe]?G=G.concat(q.validateSpec({key:pe,value:R[pe],valueSpec:B[pe],validateSpec:q.validateSpec,style:U,styleSpec:L})):G.push(new Re(pe,R[pe],`unknown property "${pe}"`));return G}({sourceName:s,value:i,style:a.style,styleSpec:h,validateSpec:g}),x;case"geojson":if(x=ln({key:s,value:i,valueSpec:h.source_geojson,style:p,styleSpec:h,validateSpec:g,objectElementValidators:Ch}),i.cluster)for(let q in i.clusterProperties){let[P,M]=i.clusterProperties[q],R=typeof P=="string"?[P,["accumulated"],["get",q]]:P;x.push(...mu({key:`${s}.${q}.map`,value:M,validateSpec:g,expressionContext:"cluster-map"})),x.push(...mu({key:`${s}.${q}.reduce`,value:R,validateSpec:g,expressionContext:"cluster-reduce"}))}return x;case"video":return ln({key:s,value:i,valueSpec:h.source_video,style:p,validateSpec:g,styleSpec:h});case"image":return ln({key:s,value:i,valueSpec:h.source_image,style:p,validateSpec:g,styleSpec:h});case"canvas":return[new Re(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ja({key:`${s}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:p,validateSpec:g,styleSpec:h});}}function Sp(a){let i=a.value,s=a.styleSpec,h=s.light,p=a.style,g=[],y=Ut(i);if(i===void 0)return g;if(y!=="object")return g=g.concat([new Re("light",i,`object expected, ${y} found`)]),g;for(let x in i){let q=x.match(/^(.*)-transition$/);g=g.concat(q&&h[q[1]]&&h[q[1]].transition?a.validateSpec({key:x,value:i[x],valueSpec:s.transition,validateSpec:a.validateSpec,style:p,styleSpec:s}):h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],validateSpec:a.validateSpec,style:p,styleSpec:s}):[new Re(x,i[x],`unknown property "${x}"`)])}return g}function qp(a){let i=a.value,s=a.styleSpec,h=s.sky,p=a.style,g=Ut(i);if(i===void 0)return[];if(g!=="object")return[new Re("sky",i,`object expected, ${g} found`)];let y=[];for(let x in i)y=y.concat(h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],style:p,styleSpec:s}):[new Re(x,i[x],`unknown property "${x}"`)]);return y}function Ip(a){let i=a.value,s=a.styleSpec,h=s.terrain,p=a.style,g=[],y=Ut(i);if(i===void 0)return g;if(y!=="object")return g=g.concat([new Re("terrain",i,`object expected, ${y} found`)]),g;for(let x in i)g=g.concat(h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],validateSpec:a.validateSpec,style:p,styleSpec:s}):[new Re(x,i[x],`unknown property "${x}"`)]);return g}function Ep(a){let i=[],s=a.value,h=a.key;if(Array.isArray(s)){let p=[],g=[];for(let y in s)s[y].id&&p.includes(s[y].id)&&i.push(new Re(h,s,`all the sprites' ids must be unique, but ${s[y].id} is duplicated`)),p.push(s[y].id),s[y].url&&g.includes(s[y].url)&&i.push(new Re(h,s,`all the sprites' URLs must be unique, but ${s[y].url} is duplicated`)),g.push(s[y].url),i=i.concat(ln({key:`${h}[${y}]`,value:s[y],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:a.validateSpec}));return i}return ps({key:h,value:s})}let Mh={"*":()=>[],array:Yl,boolean:function(a){let i=a.value,s=a.key,h=Ut(i);return h!=="boolean"?[new Re(s,i,`boolean expected, ${h} found`)]:[]},number:yp,color:function(a){let i=a.key,s=a.value,h=Ut(s);return h!=="string"?[new Re(i,s,`color expected, ${h} found`)]:Xt.parse(String(s))?[]:[new Re(i,s,`color expected, "${s}" found`)]},constants:Fy,enum:Ja,filter:_p,function:Th,layer:wp,object:ln,source:Jl,light:Sp,sky:qp,terrain:Ip,projection:function(a){let i=a.value,s=a.styleSpec,h=s.projection,p=a.style,g=Ut(i);if(i===void 0)return[];if(g!=="object")return[new Re("projection",i,`object expected, ${g} found`)];let y=[];for(let x in i)y=y.concat(h[x]?a.validateSpec({key:x,value:i[x],valueSpec:h[x],style:p,styleSpec:s}):[new Re(x,i[x],`unknown property "${x}"`)]);return y},string:ps,formatted:function(a){return ps(a).length===0?[]:mu(a)},resolvedImage:function(a){return ps(a).length===0?[]:mu(a)},padding:function(a){let i=a.key,s=a.value;if(Ut(s)==="array"){if(s.length<1||s.length>4)return[new Re(i,s,`padding requires 1 to 4 values; ${s.length} values found`)];let h={type:"number"},p=[];for(let g=0;g<s.length;g++)p=p.concat(a.validateSpec({key:`${i}[${g}]`,value:s[g],validateSpec:a.validateSpec,valueSpec:h}));return p}return yp({key:i,value:s,valueSpec:{}})},variableAnchorOffsetCollection:function(a){let i=a.key,s=a.value,h=Ut(s),p=a.styleSpec;if(h!=="array"||s.length<1||s.length%2!=0)return[new Re(i,s,"variableAnchorOffsetCollection requires a non-empty array of even length")];let g=[];for(let y=0;y<s.length;y+=2)g=g.concat(Ja({key:`${i}[${y}]`,value:s[y],valueSpec:p.layout_symbol["text-anchor"]})),g=g.concat(Yl({key:`${i}[${y+1}]`,value:s[y+1],valueSpec:{length:2,value:"number"},validateSpec:a.validateSpec,style:a.style,styleSpec:p}));return g},sprite:Ep};function vu(a){let i=a.value,s=a.valueSpec,h=a.styleSpec;return a.validateSpec=vu,s.expression&&xh(Tr(i))?Th(a):s.expression&&Sh(Yn(i))?mu(a):s.type&&Mh[s.type]?Mh[s.type](a):ln(ma({},a,{valueSpec:s.type?h[s.type]:s}))}function Ny(a){let i=a.value,s=a.key,h=ps(a);return h.length||(i.indexOf("{fontstack}")===-1&&h.push(new Re(s,i,"\"glyphs\" url must include a \"{fontstack}\" token")),i.indexOf("{range}")===-1&&h.push(new Re(s,i,"\"glyphs\" url must include a \"{range}\" token"))),h}function qn(a,i=Se){let s=[];return s=s.concat(vu({key:"",value:a,valueSpec:i.$root,styleSpec:i,style:a,validateSpec:vu,objectElementValidators:{glyphs:Ny,"*":()=>[]}})),a.constants&&(s=s.concat(Fy({key:"constants",value:a.constants,style:a,styleSpec:i,validateSpec:vu}))),Tp(s)}function xa(a){return function(i){return a(MS(CS({},i),{validateSpec:vu}))}}function Tp(a){return[].concat(a).sort((i,s)=>i.line-s.line)}function Jn(a){return function(...i){return Tp(a.apply(this,i))}}qn.source=Jn(xa(Jl)),qn.sprite=Jn(xa(Ep)),qn.glyphs=Jn(xa(Ny)),qn.light=Jn(xa(Sp)),qn.sky=Jn(xa(qp)),qn.terrain=Jn(xa(Ip)),qn.layer=Jn(xa(wp)),qn.filter=Jn(xa(_p)),qn.paintProperty=Jn(xa(Ph)),qn.layoutProperty=Jn(xa(bp));let ms=qn,kw=ms.light,Dw=ms.sky,By=ms.paintProperty,jy=ms.layoutProperty;function Ap(a,i){let s=!1;if(i&&i.length)for(let h of i)a.fire(new xo(new Error(h.message))),s=!0;return s}class gu{constructor(i,s,h){let p=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;let y=new Int32Array(this.arrayBuffer);i=y[0],this.d=(s=y[1])+2*(h=y[2]);for(let q=0;q<this.d*this.d;q++){let P=y[3+q],M=y[3+q+1];p.push(P===M?null:y.subarray(P,M))}let x=y[3+p.length+1];this.keys=y.subarray(y[3+p.length],x),this.bboxes=y.subarray(x),this.insert=this._insertReadonly}else{this.d=s+2*h;for(let y=0;y<this.d*this.d;y++)p.push([]);this.keys=[],this.bboxes=[]}this.n=s,this.extent=i,this.padding=h,this.scale=s/i,this.uid=0;let g=h/s*i;this.min=-g,this.max=i+g}insert(i,s,h,p,g){this._forEachCell(s,h,p,g,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(p),this.bboxes.push(g)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,s,h,p,g,y){this.cells[g].push(y)}query(i,s,h,p,g){let y=this.min,x=this.max;if(i<=y&&s<=y&&x<=h&&x<=p&&!g)return Array.prototype.slice.call(this.keys);{let q=[];return this._forEachCell(i,s,h,p,this._queryCell,q,{},g),q}}_queryCell(i,s,h,p,g,y,x,q){let P=this.cells[g];if(P!==null){let M=this.keys,R=this.bboxes;for(let L=0;L<P.length;L++){let B=P[L];if(x[B]===void 0){let U=4*B;(q?q(R[U+0],R[U+1],R[U+2],R[U+3]):i<=R[U+2]&&s<=R[U+3]&&h>=R[U+0]&&p>=R[U+1])?(x[B]=!0,y.push(M[B])):x[B]=!1}}}}_forEachCell(i,s,h,p,g,y,x,q){let P=this._convertToCellCoord(i),M=this._convertToCellCoord(s),R=this._convertToCellCoord(h),L=this._convertToCellCoord(p);for(let B=P;B<=R;B++)for(let U=M;U<=L;U++){let G=this.d*U+B;if((!q||q(this._convertFromCellCoord(B),this._convertFromCellCoord(U),this._convertFromCellCoord(B+1),this._convertFromCellCoord(U+1)))&&g.call(this,i,s,h,p,G,y,x,q))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;let i=this.cells,s=3+this.cells.length+1+1,h=0;for(let y=0;y<this.cells.length;y++)h+=this.cells[y].length;let p=new Int32Array(s+h+this.keys.length+this.bboxes.length);p[0]=this.extent,p[1]=this.n,p[2]=this.padding;let g=s;for(let y=0;y<i.length;y++){let x=i[y];p[3+y]=g,p.set(x,g),g+=x.length}return p[3+i.length]=g,p.set(this.keys,g),g+=this.keys.length,p[3+i.length+1]=g,p.set(this.bboxes,g),g+=this.bboxes.length,p.buffer}static serialize(i,s){let h=i.toArrayBuffer();return s&&s.push(h),{buffer:h}}static deserialize(i){return new gu(i.buffer)}}let In={};function Ye(a,i,s={}){if(In[a])throw new Error(`${a} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:a,writeable:!1}),In[a]={klass:i,omit:s.omit||[],shallow:s.shallow||[]}}Ye("Object",Object),Ye("TransferableGridIndex",gu),Ye("Color",Xt),Ye("Error",Error),Ye("AJAXError",an),Ye("ResolvedImage",un),Ye("StylePropertyFunction",pu),Ye("StyleExpression",wh,{omit:["_evaluator"]}),Ye("ZoomDependentExpression",du),Ye("ZoomConstantExpression",fu),Ye("CompoundExpression",Sn,{omit:["_evaluate"]});for(let a in ou)ou[a]._classRegistryKey||Ye(`Expression_${a}`,ou[a]);function Oh(a){return a&&typeof ArrayBuffer!="undefined"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function Pp(a){return a.$name||a.constructor._classRegistryKey}function Uy(a){return!function(i){if(i===null||typeof i!="object")return!1;let s=Pp(i);return!(!s||s==="Object")}(a)&&(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||a instanceof Blob||a instanceof Error||Oh(a)||da(a)||ArrayBuffer.isView(a)||a instanceof ImageData)}function yu(a,i){if(Uy(a))return(Oh(a)||da(a))&&i&&i.push(a),ArrayBuffer.isView(a)&&i&&i.push(a.buffer),a instanceof ImageData&&i&&i.push(a.data.buffer),a;if(Array.isArray(a)){let g=[];for(let y of a)g.push(yu(y,i));return g}if(typeof a!="object")throw new Error("can't serialize object of type "+typeof a);let s=Pp(a);if(!s)throw new Error(`can't serialize object of unregistered class ${a.constructor.name}`);if(!In[s])throw new Error(`${s} is not registered.`);let{klass:h}=In[s],p=h.serialize?h.serialize(a,i):{};if(h.serialize){if(i&&p===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(let g in a){if(!a.hasOwnProperty(g)||In[s].omit.indexOf(g)>=0)continue;let y=a[g];p[g]=In[s].shallow.indexOf(g)>=0?y:yu(y,i)}a instanceof Error&&(p.message=a.message)}if(p.$name)throw new Error("$name property is reserved for worker serialization logic.");return s!=="Object"&&(p.$name=s),p}function _u(a){if(Uy(a))return a;if(Array.isArray(a))return a.map(_u);if(typeof a!="object")throw new Error("can't deserialize object of type "+typeof a);let i=Pp(a)||"Object";if(!In[i])throw new Error(`can't deserialize unregistered class ${i}`);let{klass:s}=In[i];if(!s)throw new Error(`can't deserialize unregistered class ${i}`);if(s.deserialize)return s.deserialize(a);let h=Object.create(s.prototype);for(let p of Object.keys(a)){if(p==="$name")continue;let g=a[p];h[p]=In[i].shallow.indexOf(p)>=0?g:_u(g)}return h}class Cp{constructor(){this.first=!0}update(i,s){let h=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=h,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=h,!0):(this.lastFloorZoom>h?(this.lastIntegerZoom=h+1,this.lastIntegerZoomTime=s):this.lastFloorZoom<h&&(this.lastIntegerZoom=h,this.lastIntegerZoomTime=s),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=h,!0))}}let zt={"Latin-1 Supplement":a=>a>=128&&a<=255,"Hangul Jamo":a=>a>=4352&&a<=4607,Khmer:a=>a>=6016&&a<=6143,"General Punctuation":a=>a>=8192&&a<=8303,"Letterlike Symbols":a=>a>=8448&&a<=8527,"Number Forms":a=>a>=8528&&a<=8591,"Miscellaneous Technical":a=>a>=8960&&a<=9215,"Control Pictures":a=>a>=9216&&a<=9279,"Optical Character Recognition":a=>a>=9280&&a<=9311,"Enclosed Alphanumerics":a=>a>=9312&&a<=9471,"Geometric Shapes":a=>a>=9632&&a<=9727,"Miscellaneous Symbols":a=>a>=9728&&a<=9983,"Miscellaneous Symbols and Arrows":a=>a>=11008&&a<=11263,"Ideographic Description Characters":a=>a>=12272&&a<=12287,"CJK Symbols and Punctuation":a=>a>=12288&&a<=12351,Katakana:a=>a>=12448&&a<=12543,Kanbun:a=>a>=12688&&a<=12703,"CJK Strokes":a=>a>=12736&&a<=12783,"Enclosed CJK Letters and Months":a=>a>=12800&&a<=13055,"CJK Compatibility":a=>a>=13056&&a<=13311,"Yijing Hexagram Symbols":a=>a>=19904&&a<=19967,"Private Use Area":a=>a>=57344&&a<=63743,"Vertical Forms":a=>a>=65040&&a<=65055,"CJK Compatibility Forms":a=>a>=65072&&a<=65103,"Small Form Variants":a=>a>=65104&&a<=65135,"Halfwidth and Fullwidth Forms":a=>a>=65280&&a<=65519};function Mp(a){for(let i of a)if(Rp(i.charCodeAt(0)))return!0;return!1}function Lw(a){for(let i of a)if(!xu(i.charCodeAt(0)))return!1;return!0}function Op(a){let i=a.map(s=>{try{return new RegExp(`\\p{sc=${s}}`,"u").source}catch(h){return null}}).filter(s=>s);return new RegExp(i.join("|"),"u")}let zw=Op(["Arab","Dupl","Mong","Ougr","Syrc"]);function xu(a){return!zw.test(String.fromCodePoint(a))}let $y=Op(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Rp(a){return!(a!==746&&a!==747&&(a<4352||!(zt["CJK Compatibility Forms"](a)&&!(a>=65097&&a<=65103)||zt["CJK Compatibility"](a)||zt["CJK Strokes"](a)||!(!zt["CJK Symbols and Punctuation"](a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||zt["Enclosed CJK Letters and Months"](a)||zt["Ideographic Description Characters"](a)||zt.Kanbun(a)||zt.Katakana(a)&&a!==12540||!(!zt["Halfwidth and Fullwidth Forms"](a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!zt["Small Form Variants"](a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||zt["Vertical Forms"](a)||zt["Yijing Hexagram Symbols"](a)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(a))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(a))||$y.test(String.fromCodePoint(a)))))}function Vy(a){return!(Rp(a)||function(i){return!!(zt["Latin-1 Supplement"](i)&&(i===167||i===169||i===174||i===177||i===188||i===189||i===190||i===215||i===247)||zt["General Punctuation"](i)&&(i===8214||i===8224||i===8225||i===8240||i===8241||i===8251||i===8252||i===8258||i===8263||i===8264||i===8265||i===8273)||zt["Letterlike Symbols"](i)||zt["Number Forms"](i)||zt["Miscellaneous Technical"](i)&&(i>=8960&&i<=8967||i>=8972&&i<=8991||i>=8996&&i<=9e3||i===9003||i>=9085&&i<=9114||i>=9150&&i<=9165||i===9167||i>=9169&&i<=9179||i>=9186&&i<=9215)||zt["Control Pictures"](i)&&i!==9251||zt["Optical Character Recognition"](i)||zt["Enclosed Alphanumerics"](i)||zt["Geometric Shapes"](i)||zt["Miscellaneous Symbols"](i)&&!(i>=9754&&i<=9759)||zt["Miscellaneous Symbols and Arrows"](i)&&(i>=11026&&i<=11055||i>=11088&&i<=11097||i>=11192&&i<=11243)||zt["CJK Symbols and Punctuation"](i)||zt.Katakana(i)||zt["Private Use Area"](i)||zt["CJK Compatibility Forms"](i)||zt["Small Form Variants"](i)||zt["Halfwidth and Fullwidth Forms"](i)||i===8734||i===8756||i===8757||i>=9984&&i<=10087||i>=10102&&i<=10131||i===65532||i===65533)}(a))}let Fw=Op(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function kp(a){return Fw.test(String.fromCodePoint(a))}function Nw(a,i){return!(!i&&kp(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||zt.Khmer(a))}function Bw(a){for(let i of a)if(kp(i.charCodeAt(0)))return!0;return!1}let cn=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(a){this.pluginStatus=a.pluginStatus,this.pluginURL=a.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(a){this.applyArabicShaping=a.applyArabicShaping,this.processBidirectionalText=a.processBidirectionalText,this.processStyledBidirectionalText=a.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class ur{constructor(i,s){this.zoom=i,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.zoomHistory=s.zoomHistory,this.transition=s.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Cp,this.transition={})}isSupportedScript(i){return function(s,h){for(let p of s)if(!Nw(p.charCodeAt(0),h))return!1;return!0}(i,cn.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){let i=this.zoom,s=i-Math.floor(i),h=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:s+(1-s)*h}:{fromScale:.5,toScale:1,t:1-(1-h)*s}}}class bu{constructor(i,s){this.property=i,this.value=s,this.expression=function(h,p){if(xh(h))return new pu(h,p);if(Sh(h)){let g=mp(h,p);if(g.result==="error")throw new Error(g.value.map(y=>`${y.key}: ${y.message}`).join(", "));return g.value}{let g=h;return p.type==="color"&&typeof h=="string"?g=Xt.parse(h):p.type!=="padding"||typeof h!="number"&&!Array.isArray(h)?p.type==="variableAnchorOffsetCollection"&&Array.isArray(h)&&(g=wn.parse(h)):g=sn.parse(h),{kind:"constant",evaluate:()=>g}}}(s===void 0?i.specification.default:s,i.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(i,s,h){return this.property.possiblyEvaluate(this,i,s,h)}}class Rh{constructor(i){this.property=i,this.value=new bu(i,void 0)}transitioned(i,s){return new Gy(this.property,this.value,s,et({},i.transition,this.transition),i.now)}untransitioned(){return new Gy(this.property,this.value,null,{},0)}}class kh{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues)}getValue(i){return Qe(this._values[i].value.value)}setValue(i,s){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Rh(this._values[i].property)),this._values[i].value=new bu(this._values[i].property,s===null?void 0:Qe(s))}getTransition(i){return Qe(this._values[i].transition)}setTransition(i,s){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Rh(this._values[i].property)),this._values[i].transition=Qe(s)||void 0}serialize(){let i={};for(let s of Object.keys(this._values)){let h=this.getValue(s);h!==void 0&&(i[s]=h);let p=this.getTransition(s);p!==void 0&&(i[`${s}-transition`]=p)}return i}transitioned(i,s){let h=new Ql(this._properties);for(let p of Object.keys(this._values))h._values[p]=this._values[p].transitioned(i,s._values[p]);return h}untransitioned(){let i=new Ql(this._properties);for(let s of Object.keys(this._values))i._values[s]=this._values[s].untransitioned();return i}}class Gy{constructor(i,s,h,p,g){this.property=i,this.value=s,this.begin=g+p.delay||0,this.end=this.begin+p.duration||0,i.specification.transition&&(p.delay||p.duration)&&(this.prior=h)}possiblyEvaluate(i,s,h){let p=i.now||0,g=this.value.possiblyEvaluate(i,s,h),y=this.prior;if(y){if(p>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(p<this.begin)return y.possiblyEvaluate(i,s,h);{let x=(p-this.begin)/(this.end-this.begin);return this.property.interpolate(y.possiblyEvaluate(i,s,h),g,function(q){if(q<=0)return 0;if(q>=1)return 1;let P=q*q,M=P*q;return 4*(q<.5?M:3*(q-P)+M-.75)}(x))}}return g}}class Ql{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,s,h){let p=new tc(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,s,h);return p}hasTransition(){for(let i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class ec{constructor(i){this._properties=i,this._values=Object.create(i.defaultPropertyValues)}hasValue(i){return this._values[i].value!==void 0}getValue(i){return Qe(this._values[i].value)}setValue(i,s){this._values[i]=new bu(this._values[i].property,s===null?void 0:Qe(s))}serialize(){let i={};for(let s of Object.keys(this._values)){let h=this.getValue(s);h!==void 0&&(i[s]=h)}return i}possiblyEvaluate(i,s,h){let p=new tc(this._properties);for(let g of Object.keys(this._values))p._values[g]=this._values[g].possiblyEvaluate(i,s,h);return p}}class ba{constructor(i,s,h){this.property=i,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,s,h,p){return this.property.evaluate(this.value,this.parameters,i,s,h,p)}}class tc{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class tt{constructor(i){this.specification=i}possiblyEvaluate(i,s){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(s)}interpolate(i,s,h){let p=Ui[this.specification.type];return p?p(i,s,h):i}}class ft{constructor(i,s){this.specification=i,this.overrides=s}possiblyEvaluate(i,s,h,p){return new ba(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(s,null,{},h,p)}:i.expression,s)}interpolate(i,s,h){if(i.value.kind!=="constant"||s.value.kind!=="constant")return i;if(i.value.value===void 0||s.value.value===void 0)return new ba(this,{kind:"constant",value:void 0},i.parameters);let p=Ui[this.specification.type];if(p){let g=p(i.value.value,s.value.value,h);return new ba(this,{kind:"constant",value:g},i.parameters)}return i}evaluate(i,s,h,p,g,y){return i.kind==="constant"?i.value:i.evaluate(s,h,p,g,y)}}class Dh extends ft{possiblyEvaluate(i,s,h,p){if(i.value===void 0)return new ba(this,{kind:"constant",value:void 0},s);if(i.expression.kind==="constant"){let g=i.expression.evaluate(s,null,{},h,p),y=i.property.specification.type==="resolvedImage"&&typeof g!="string"?g.name:g,x=this._calculate(y,y,y,s);return new ba(this,{kind:"constant",value:x},s)}if(i.expression.kind==="camera"){let g=this._calculate(i.expression.evaluate({zoom:s.zoom-1}),i.expression.evaluate({zoom:s.zoom}),i.expression.evaluate({zoom:s.zoom+1}),s);return new ba(this,{kind:"constant",value:g},s)}return new ba(this,i.expression,s)}evaluate(i,s,h,p,g,y){if(i.kind==="source"){let x=i.evaluate(s,h,p,g,y);return this._calculate(x,x,x,s)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(s.zoom)-1},h,p),i.evaluate({zoom:Math.floor(s.zoom)},h,p),i.evaluate({zoom:Math.floor(s.zoom)+1},h,p),s):i.value}_calculate(i,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:s}:{from:h,to:s}}interpolate(i){return i}}class Lh{constructor(i){this.specification=i}possiblyEvaluate(i,s,h,p){if(i.value!==void 0){if(i.expression.kind==="constant"){let g=i.expression.evaluate(s,null,{},h,p);return this._calculate(g,g,g,s)}return this._calculate(i.expression.evaluate(new ur(Math.floor(s.zoom-1),s)),i.expression.evaluate(new ur(Math.floor(s.zoom),s)),i.expression.evaluate(new ur(Math.floor(s.zoom+1),s)),s)}}_calculate(i,s,h,p){return p.zoom>p.zoomHistory.lastIntegerZoom?{from:i,to:s}:{from:h,to:s}}interpolate(i){return i}}class Dp{constructor(i){this.specification=i}possiblyEvaluate(i,s,h,p){return!!i.expression.evaluate(s,null,{},h,p)}interpolate(){return!1}}class v{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(let s in i){let h=i[s];h.specification.overridable&&this.overridableProperties.push(s);let p=this.defaultPropertyValues[s]=new bu(h,void 0),g=this.defaultTransitionablePropertyValues[s]=new Rh(h);this.defaultTransitioningPropertyValues[s]=g.untransitioned(),this.defaultPossiblyEvaluatedValues[s]=p.possiblyEvaluate({})}}}Ye("DataDrivenProperty",ft),Ye("DataConstantProperty",tt),Ye("CrossFadedDataDrivenProperty",Dh),Ye("CrossFadedProperty",Lh),Ye("ColorRampProperty",Dp);let r="-transition";class c extends Js{constructor(i,s){if(super(),this.id=i.id,this.type=i.type,this._featureFilter={filter:()=>!0,needGeometry:!1},i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter),s.layout&&(this._unevaluatedLayout=new ec(s.layout)),s.paint)){this._transitionablePaint=new kh(s.paint);for(let h in i.paint)this.setPaintProperty(h,i.paint[h],{validate:!1});for(let h in i.layout)this.setLayoutProperty(h,i.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new tc(s.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}setLayoutProperty(i,s,h={}){s!=null&&this._validate(jy,`layers.${this.id}.layout.${i}`,i,s,h)||(i!=="visibility"?this._unevaluatedLayout.setValue(i,s):this.visibility=s)}getPaintProperty(i){return i.endsWith(r)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,s,h={}){if(s!=null&&this._validate(By,`layers.${this.id}.paint.${i}`,i,s,h))return!1;if(i.endsWith(r))return this._transitionablePaint.setTransition(i.slice(0,-11),s||void 0),!1;{let p=this._transitionablePaint._values[i],g=p.property.specification["property-type"]==="cross-faded-data-driven",y=p.value.isDataDriven(),x=p.value;this._transitionablePaint.setValue(i,s),this._handleSpecialPaintPropertyUpdate(i);let q=this._transitionablePaint._values[i].value;return q.isDataDriven()||y||g||this._handleOverridablePaintPropertyUpdate(i,x,q)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,s,h){return!1}isHidden(i){return!!(this.minzoom&&i<this.minzoom)||!!(this.maxzoom&&i>=this.maxzoom)||this.visibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(i,s){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,s)}serialize(){let i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),gt(i,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(i,s,h,p,g={}){return(!g||g.validate!==!1)&&Ap(this,i.call(ms,{key:s,layerType:this.type,objectKey:h,value:p,styleSpec:Se,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(let i in this.paint._values){let s=this.paint.get(i);if(s instanceof ba&&lu(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}}let f={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class d{constructor(i,s){this._structArray=i,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class m{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,s){return i._trim(),s&&(i.isTransferred=!0,s.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){let s=Object.create(this.prototype);return s.arrayBuffer=i.arrayBuffer,s.length=i.length,s.capacity=i.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);let s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function w(a,i=1){let s=0,h=0;return{members:a.map(p=>{let g=f[p.type].BYTES_PER_ELEMENT,y=s=I(s,Math.max(i,g)),x=p.components||1;return h=Math.max(h,g),s+=g*x,{name:p.name,type:p.type,components:x,offset:y}}),size:I(s,Math.max(h,i)),alignment:i}}function I(a,i){return Math.ceil(a/i)*i}class A extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s){let h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){let p=2*i;return this.int16[p+0]=s,this.int16[p+1]=h,i}}A.prototype.bytesPerElement=4,Ye("StructArrayLayout2i4",A);class O extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.int16[g+0]=s,this.int16[g+1]=h,this.int16[g+2]=p,i}}O.prototype.bytesPerElement=6,Ye("StructArrayLayout3i6",O);class k extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,i,s,h,p)}emplace(i,s,h,p,g){let y=4*i;return this.int16[y+0]=s,this.int16[y+1]=h,this.int16[y+2]=p,this.int16[y+3]=g,i}}k.prototype.bytesPerElement=8,Ye("StructArrayLayout4i8",k);class D extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,x){let q=6*i;return this.int16[q+0]=s,this.int16[q+1]=h,this.int16[q+2]=p,this.int16[q+3]=g,this.int16[q+4]=y,this.int16[q+5]=x,i}}D.prototype.bytesPerElement=12,Ye("StructArrayLayout2i4i12",D);class j extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,x){let q=4*i,P=8*i;return this.int16[q+0]=s,this.int16[q+1]=h,this.uint8[P+4]=p,this.uint8[P+5]=g,this.uint8[P+6]=y,this.uint8[P+7]=x,i}}j.prototype.bytesPerElement=8,Ye("StructArrayLayout2i4ub8",j);class H extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s){let h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){let p=2*i;return this.float32[p+0]=s,this.float32[p+1]=h,i}}H.prototype.bytesPerElement=8,Ye("StructArrayLayout2f8",H);class Z extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,x,q,P,M){let R=this.length;return this.resize(R+1),this.emplace(R,i,s,h,p,g,y,x,q,P,M)}emplace(i,s,h,p,g,y,x,q,P,M,R){let L=10*i;return this.uint16[L+0]=s,this.uint16[L+1]=h,this.uint16[L+2]=p,this.uint16[L+3]=g,this.uint16[L+4]=y,this.uint16[L+5]=x,this.uint16[L+6]=q,this.uint16[L+7]=P,this.uint16[L+8]=M,this.uint16[L+9]=R,i}}Z.prototype.bytesPerElement=20,Ye("StructArrayLayout10ui20",Z);class ee extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,x,q,P,M,R,L){let B=this.length;return this.resize(B+1),this.emplace(B,i,s,h,p,g,y,x,q,P,M,R,L)}emplace(i,s,h,p,g,y,x,q,P,M,R,L,B){let U=12*i;return this.int16[U+0]=s,this.int16[U+1]=h,this.int16[U+2]=p,this.int16[U+3]=g,this.uint16[U+4]=y,this.uint16[U+5]=x,this.uint16[U+6]=q,this.uint16[U+7]=P,this.int16[U+8]=M,this.int16[U+9]=R,this.int16[U+10]=L,this.int16[U+11]=B,i}}ee.prototype.bytesPerElement=24,Ye("StructArrayLayout4i4ui4i24",ee);class ne extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.float32[g+0]=s,this.float32[g+1]=h,this.float32[g+2]=p,i}}ne.prototype.bytesPerElement=12,Ye("StructArrayLayout3f12",ne);class ae extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){let s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint32[1*i+0]=s,i}}ae.prototype.bytesPerElement=4,Ye("StructArrayLayout1ul4",ae);class ue extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,x,q,P){let M=this.length;return this.resize(M+1),this.emplace(M,i,s,h,p,g,y,x,q,P)}emplace(i,s,h,p,g,y,x,q,P,M){let R=10*i,L=5*i;return this.int16[R+0]=s,this.int16[R+1]=h,this.int16[R+2]=p,this.int16[R+3]=g,this.int16[R+4]=y,this.int16[R+5]=x,this.uint32[L+3]=q,this.uint16[R+8]=P,this.uint16[R+9]=M,i}}ue.prototype.bytesPerElement=20,Ye("StructArrayLayout6i1ul2ui20",ue);class Y extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,x){let q=6*i;return this.int16[q+0]=s,this.int16[q+1]=h,this.int16[q+2]=p,this.int16[q+3]=g,this.int16[q+4]=y,this.int16[q+5]=x,i}}Y.prototype.bytesPerElement=12,Ye("StructArrayLayout2i2i2i12",Y);class he extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g){let y=this.length;return this.resize(y+1),this.emplace(y,i,s,h,p,g)}emplace(i,s,h,p,g,y){let x=4*i,q=8*i;return this.float32[x+0]=s,this.float32[x+1]=h,this.float32[x+2]=p,this.int16[q+6]=g,this.int16[q+7]=y,i}}he.prototype.bytesPerElement=16,Ye("StructArrayLayout2f1f2i16",he);class de extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y){let x=this.length;return this.resize(x+1),this.emplace(x,i,s,h,p,g,y)}emplace(i,s,h,p,g,y,x){let q=16*i,P=4*i,M=8*i;return this.uint8[q+0]=s,this.uint8[q+1]=h,this.float32[P+1]=p,this.float32[P+2]=g,this.int16[M+6]=y,this.int16[M+7]=x,i}}de.prototype.bytesPerElement=16,Ye("StructArrayLayout2ub2f2i16",de);class ye extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.uint16[g+0]=s,this.uint16[g+1]=h,this.uint16[g+2]=p,i}}ye.prototype.bytesPerElement=6,Ye("StructArrayLayout3ui6",ye);class Te extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,x,q,P,M,R,L,B,U,G,J,ie){let ve=this.length;return this.resize(ve+1),this.emplace(ve,i,s,h,p,g,y,x,q,P,M,R,L,B,U,G,J,ie)}emplace(i,s,h,p,g,y,x,q,P,M,R,L,B,U,G,J,ie,ve){let le=24*i,pe=12*i,qe=48*i;return this.int16[le+0]=s,this.int16[le+1]=h,this.uint16[le+2]=p,this.uint16[le+3]=g,this.uint32[pe+2]=y,this.uint32[pe+3]=x,this.uint32[pe+4]=q,this.uint16[le+10]=P,this.uint16[le+11]=M,this.uint16[le+12]=R,this.float32[pe+7]=L,this.float32[pe+8]=B,this.uint8[qe+36]=U,this.uint8[qe+37]=G,this.uint8[qe+38]=J,this.uint32[pe+10]=ie,this.int16[le+22]=ve,i}}Te.prototype.bytesPerElement=48,Ye("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Te);class Me extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p,g,y,x,q,P,M,R,L,B,U,G,J,ie,ve,le,pe,qe,Ce,We,ct,Ve,Be,at,Je){let Xe=this.length;return this.resize(Xe+1),this.emplace(Xe,i,s,h,p,g,y,x,q,P,M,R,L,B,U,G,J,ie,ve,le,pe,qe,Ce,We,ct,Ve,Be,at,Je)}emplace(i,s,h,p,g,y,x,q,P,M,R,L,B,U,G,J,ie,ve,le,pe,qe,Ce,We,ct,Ve,Be,at,Je,Xe){let Ee=32*i,ot=16*i;return this.int16[Ee+0]=s,this.int16[Ee+1]=h,this.int16[Ee+2]=p,this.int16[Ee+3]=g,this.int16[Ee+4]=y,this.int16[Ee+5]=x,this.int16[Ee+6]=q,this.int16[Ee+7]=P,this.uint16[Ee+8]=M,this.uint16[Ee+9]=R,this.uint16[Ee+10]=L,this.uint16[Ee+11]=B,this.uint16[Ee+12]=U,this.uint16[Ee+13]=G,this.uint16[Ee+14]=J,this.uint16[Ee+15]=ie,this.uint16[Ee+16]=ve,this.uint16[Ee+17]=le,this.uint16[Ee+18]=pe,this.uint16[Ee+19]=qe,this.uint16[Ee+20]=Ce,this.uint16[Ee+21]=We,this.uint16[Ee+22]=ct,this.uint32[ot+12]=Ve,this.float32[ot+13]=Be,this.float32[ot+14]=at,this.uint16[Ee+30]=Je,this.uint16[Ee+31]=Xe,i}}Me.prototype.bytesPerElement=64,Ye("StructArrayLayout8i15ui1ul2f2ui64",Me);class je extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){let s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.float32[1*i+0]=s,i}}je.prototype.bytesPerElement=4,Ye("StructArrayLayout1f4",je);class Ke extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=3*i;return this.uint16[6*i+0]=s,this.float32[g+1]=h,this.float32[g+2]=p,i}}Ke.prototype.bytesPerElement=12,Ye("StructArrayLayout1ui2f12",Ke);class ze extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s,h){let p=this.length;return this.resize(p+1),this.emplace(p,i,s,h)}emplace(i,s,h,p){let g=4*i;return this.uint32[2*i+0]=s,this.uint16[g+2]=h,this.uint16[g+3]=p,i}}ze.prototype.bytesPerElement=8,Ye("StructArrayLayout1ul2ui8",ze);class De extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,s){let h=this.length;return this.resize(h+1),this.emplace(h,i,s)}emplace(i,s,h){let p=2*i;return this.uint16[p+0]=s,this.uint16[p+1]=h,i}}De.prototype.bytesPerElement=4,Ye("StructArrayLayout2ui4",De);class rt extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){let s=this.length;return this.resize(s+1),this.emplace(s,i)}emplace(i,s){return this.uint16[1*i+0]=s,i}}rt.prototype.bytesPerElement=2,Ye("StructArrayLayout1ui2",rt);class yt extends m{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,s,h,p){let g=this.length;return this.resize(g+1),this.emplace(g,i,s,h,p)}emplace(i,s,h,p,g){let y=4*i;return this.float32[y+0]=s,this.float32[y+1]=h,this.float32[y+2]=p,this.float32[y+3]=g,i}}yt.prototype.bytesPerElement=16,Ye("StructArrayLayout4f16",yt);class Ne extends d{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new T(this.anchorPointX,this.anchorPointY)}}Ne.prototype.size=20;class Ge extends ue{get(i){return new Ne(this,i)}}Ye("CollisionBoxArray",Ge);class mt extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}mt.prototype.size=48;class lr extends Te{get(i){return new mt(this,i)}}Ye("PlacedSymbolArray",lr);class It extends d{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}It.prototype.size=64;class Lt extends Me{get(i){return new It(this,i)}}Ye("SymbolInstanceArray",Lt);class cr extends je{getoffsetX(i){return this.float32[1*i+0]}}Ye("GlyphOffsetArray",cr);class ci extends O{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}Ye("SymbolLineVertexArray",ci);class Qn extends d{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Qn.prototype.size=12;class hr extends Ke{get(i){return new Qn(this,i)}}Ye("TextAnchorOffsetArray",hr);class Vi extends d{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Vi.prototype.size=8;class Ii extends ze{get(i){return new Vi(this,i)}}Ye("FeatureIndexArray",Ii);class hi extends A{}class Ei extends A{}class wa extends A{}class wu extends D{}class zh extends j{}class Su extends H{}class En extends Z{}class Fh extends ee{}class Lp extends ne{}class Tn extends ae{}class An extends Y{}class Eo extends de{}class ea extends ye{}class ii extends De{}let fi=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:hn}=fi;class Ft{constructor(i=[]){this.segments=i}prepareSegment(i,s,h,p){let g=this.segments[this.segments.length-1];return i>Ft.MAX_VERTEX_ARRAY_LENGTH&&Wr(`Max vertices per segment is ${Ft.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}`),(!g||g.vertexLength+i>Ft.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==p)&&(g={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},p!==void 0&&(g.sortKey=p),this.segments.push(g)),g}get(){return this.segments}destroy(){for(let i of this.segments)for(let s in i.vaos)i.vaos[s].destroy()}static simpleSegment(i,s,h,p){return new Ft([{vertexOffset:i,primitiveOffset:s,vertexLength:h,primitiveLength:p,vaos:{},sortKey:0}])}}function vs(a,i){return 256*(a=ge(Math.floor(a),0,255))+ge(Math.floor(i),0,255)}Ft.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ye("SegmentVector",Ft);let qu=w([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Iu={exports:{}},Hy={exports:{}};Hy.exports=function(a,i){var s,h,p,g,y,x,q,P;for(h=a.length-(s=3&a.length),p=i,y=3432918353,x=461845907,P=0;P<h;)q=255&a.charCodeAt(P)|(255&a.charCodeAt(++P))<<8|(255&a.charCodeAt(++P))<<16|(255&a.charCodeAt(++P))<<24,++P,p=27492+(65535&(g=5*(65535&(p=(p^=q=(65535&(q=(q=(65535&q)*y+(((q>>>16)*y&65535)<<16)&4294967295)<<15|q>>>17))*x+(((q>>>16)*x&65535)<<16)&4294967295)<<13|p>>>19))+((5*(p>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(q=0,s){case 3:q^=(255&a.charCodeAt(P+2))<<16;case 2:q^=(255&a.charCodeAt(P+1))<<8;case 1:p^=q=(65535&(q=(q=(65535&(q^=255&a.charCodeAt(P)))*y+(((q>>>16)*y&65535)<<16)&4294967295)<<15|q>>>17))*x+(((q>>>16)*x&65535)<<16)&4294967295;}return p^=a.length,p=2246822507*(65535&(p^=p>>>16))+((2246822507*(p>>>16)&65535)<<16)&4294967295,p=3266489909*(65535&(p^=p>>>13))+((3266489909*(p>>>16)&65535)<<16)&4294967295,(p^=p>>>16)>>>0};var jw=Hy.exports,Wy={exports:{}};Wy.exports=function(a,i){for(var s,h=a.length,p=i^h,g=0;h>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(g)|(255&a.charCodeAt(++g))<<8|(255&a.charCodeAt(++g))<<16|(255&a.charCodeAt(++g))<<24))+((1540483477*(s>>>16)&65535)<<16),p=1540483477*(65535&p)+((1540483477*(p>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++g;switch(h){case 3:p^=(255&a.charCodeAt(g+2))<<16;case 2:p^=(255&a.charCodeAt(g+1))<<8;case 1:p=1540483477*(65535&(p^=255&a.charCodeAt(g)))+((1540483477*(p>>>16)&65535)<<16);}return p=1540483477*(65535&(p^=p>>>13))+((1540483477*(p>>>16)&65535)<<16),(p^=p>>>15)>>>0};var To=jw,Zy=Wy.exports;Iu.exports=To,Iu.exports.murmur3=To,Iu.exports.murmur2=Zy;var Nh=_(Iu.exports);class rc{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,s,h,p){this.ids.push(Bh(i)),this.positions.push(s,h,p)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");let s=Bh(i),h=0,p=this.ids.length-1;for(;h<p;){let y=h+p>>1;this.ids[y]>=s?p=y:h=y+1}let g=[];for(;this.ids[h]===s;)g.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return g}static serialize(i,s){let h=new Float64Array(i.ids),p=new Uint32Array(i.positions);return jh(h,p,0,h.length-1),s&&s.push(h.buffer,p.buffer),{ids:h,positions:p}}static deserialize(i){let s=new rc;return s.ids=i.ids,s.positions=i.positions,s.indexed=!0,s}}function Bh(a){let i=+a;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Nh(String(a))}function jh(a,i,s,h){for(;s<h;){let p=a[s+h>>1],g=s-1,y=h+1;for(;;){do g++;while(a[g]<p);do y--;while(a[y]>p);if(g>=y)break;Eu(a,g,y),Eu(i,3*g,3*y),Eu(i,3*g+1,3*y+1),Eu(i,3*g+2,3*y+2)}y-s<h-y?(jh(a,i,s,y),s=y+1):(jh(a,i,y+1,h),h=y)}}function Eu(a,i,s){let h=a[i];a[i]=a[s],a[s]=h}Ye("FeaturePositionMap",rc);class ic{constructor(i,s){this.gl=i.gl,this.location=s}}class Ky extends ic{constructor(i,s){super(i,s),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class oD extends ic{constructor(i,s){super(i,s),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class sD extends ic{constructor(i,s){super(i,s),this.current=Xt.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}let $he=new Float32Array(16);function Uw(a){return[vs(255*a.r,255*a.g),vs(255*a.b,255*a.a)]}class zp{constructor(i,s,h){this.value=i,this.uniformNames=s.map(p=>`u_${p}`),this.type=h}setUniform(i,s,h){i.set(h.constantOr(this.value))}getBinding(i,s,h){return this.type==="color"?new sD(i,s):new Ky(i,s)}}class Uh{constructor(i,s){this.uniformNames=s.map(h=>`u_${h}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,s){this.pixelRatioFrom=s.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=s.tlbr,this.patternTo=i.tlbr}setUniform(i,s,h,p){let g=p==="u_pattern_to"?this.patternTo:p==="u_pattern_from"?this.patternFrom:p==="u_pixel_ratio_to"?this.pixelRatioTo:p==="u_pixel_ratio_from"?this.pixelRatioFrom:null;g&&i.set(g)}getBinding(i,s,h){return h.substr(0,9)==="u_pattern"?new oD(i,s):new Ky(i,s)}}class gs{constructor(i,s,h,p){this.expression=i,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(g=>({name:`a_${g}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new p}populatePaintArray(i,s,h,p,g){let y=this.paintVertexArray.length,x=this.expression.evaluate(new ur(0),s,{},p,[],g);this.paintVertexArray.resize(i),this._setPaintValue(y,i,x)}updatePaintArray(i,s,h,p){let g=this.expression.evaluate({zoom:0},h,p);this._setPaintValue(i,s,g)}_setPaintValue(i,s,h){if(this.type==="color"){let p=Uw(h);for(let g=i;g<s;g++)this.paintVertexArray.emplace(g,p[0],p[1])}else{for(let p=i;p<s;p++)this.paintVertexArray.emplace(p,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Qa{constructor(i,s,h,p,g,y){this.expression=i,this.uniformNames=s.map(x=>`u_${x}_t`),this.type=h,this.useIntegerZoom=p,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=s.map(x=>({name:`a_${x}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new y}populatePaintArray(i,s,h,p,g){let y=this.expression.evaluate(new ur(this.zoom),s,{},p,[],g),x=this.expression.evaluate(new ur(this.zoom+1),s,{},p,[],g),q=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(q,i,y,x)}updatePaintArray(i,s,h,p){let g=this.expression.evaluate({zoom:this.zoom},h,p),y=this.expression.evaluate({zoom:this.zoom+1},h,p);this._setPaintValue(i,s,g,y)}_setPaintValue(i,s,h,p){if(this.type==="color"){let g=Uw(h),y=Uw(p);for(let x=i;x<s;x++)this.paintVertexArray.emplace(x,g[0],g[1],y[0],y[1])}else{for(let g=i;g<s;g++)this.paintVertexArray.emplace(g,h,p);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,s){let h=this.useIntegerZoom?Math.floor(s.zoom):s.zoom,p=ge(this.expression.interpolationFactor(h,this.zoom,this.zoom+1),0,1);i.set(p)}getBinding(i,s,h){return new Ky(i,s)}}class Tu{constructor(i,s,h,p,g,y){this.expression=i,this.type=s,this.useIntegerZoom=h,this.zoom=p,this.layerId=y,this.zoomInPaintVertexArray=new g,this.zoomOutPaintVertexArray=new g}populatePaintArray(i,s,h){let p=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(p,i,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(i,s,h,p,g){this._setPaintValues(i,s,h.patterns&&h.patterns[this.layerId],g)}_setPaintValues(i,s,h,p){if(!p||!h)return;let{min:g,mid:y,max:x}=h,q=p[g],P=p[y],M=p[x];if(q&&P&&M)for(let R=i;R<s;R++)this.zoomInPaintVertexArray.emplace(R,P.tl[0],P.tl[1],P.br[0],P.br[1],q.tl[0],q.tl[1],q.br[0],q.br[1],P.pixelRatio,q.pixelRatio),this.zoomOutPaintVertexArray.emplace(R,P.tl[0],P.tl[1],P.br[0],P.br[1],M.tl[0],M.tl[1],M.br[0],M.br[1],P.pixelRatio,M.pixelRatio)}upload(i){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,qu.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,qu.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class uD{constructor(i,s,h){this.binders={},this._buffers=[];let p=[];for(let g in i.paint._values){if(!h(g))continue;let y=i.paint.get(g);if(!(y instanceof ba&&lu(y.property.specification)))continue;let x=Vhe(g,i.type),q=y.value,P=y.property.specification.type,M=y.property.useIntegerZoom,R=y.property.specification["property-type"],L=R==="cross-faded"||R==="cross-faded-data-driven";if(q.kind==="constant")this.binders[g]=L?new Uh(q.value,x):new zp(q.value,x,P),p.push(`/u_${g}`);else if(q.kind==="source"||L){let B=lD(g,P,"source");this.binders[g]=L?new Tu(q,P,M,s,B,i.id):new gs(q,x,P,B),p.push(`/a_${g}`)}else{let B=lD(g,P,"composite");this.binders[g]=new Qa(q,x,P,M,s,B),p.push(`/z_${g}`)}}this.cacheKey=p.sort().join("")}getMaxValue(i){let s=this.binders[i];return s instanceof gs||s instanceof Qa?s.maxValue:0}populatePaintArrays(i,s,h,p,g){for(let y in this.binders){let x=this.binders[y];(x instanceof gs||x instanceof Qa||x instanceof Tu)&&x.populatePaintArray(i,s,h,p,g)}}setConstantPatternPositions(i,s){for(let h in this.binders){let p=this.binders[h];p instanceof Uh&&p.setConstantPatternPositions(i,s)}}updatePaintArrays(i,s,h,p,g){let y=!1;for(let x in i){let q=s.getPositions(x);for(let P of q){let M=h.feature(P.index);for(let R in this.binders){let L=this.binders[R];if((L instanceof gs||L instanceof Qa||L instanceof Tu)&&L.expression.isStateDependent===!0){let B=p.paint.get(R);L.expression=B.value,L.updatePaintArray(P.start,P.end,M,i[x],g),y=!0}}}}return y}defines(){let i=[];for(let s in this.binders){let h=this.binders[s];(h instanceof zp||h instanceof Uh)&&i.push(...h.uniformNames.map(p=>`#define HAS_UNIFORM_${p}`))}return i}getBinderAttributes(){let i=[];for(let s in this.binders){let h=this.binders[s];if(h instanceof gs||h instanceof Qa)for(let p=0;p<h.paintVertexAttributes.length;p++)i.push(h.paintVertexAttributes[p].name);else if(h instanceof Tu)for(let p=0;p<qu.members.length;p++)i.push(qu.members[p].name)}return i}getBinderUniforms(){let i=[];for(let s in this.binders){let h=this.binders[s];if(h instanceof zp||h instanceof Uh||h instanceof Qa)for(let p of h.uniformNames)i.push(p)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,s){let h=[];for(let p in this.binders){let g=this.binders[p];if(g instanceof zp||g instanceof Uh||g instanceof Qa){for(let y of g.uniformNames)if(s[y]){let x=g.getBinding(i,s[y],y);h.push({name:y,property:p,binding:x})}}}return h}setUniforms(i,s,h,p){for(let{name:g,property:y,binding:x}of s)this.binders[y].setUniform(x,p,h.get(y),g)}updatePaintBuffers(i){this._buffers=[];for(let s in this.binders){let h=this.binders[s];if(i&&h instanceof Tu){let p=i.fromScale===2?h.zoomInPaintVertexBuffer:h.zoomOutPaintVertexBuffer;p&&this._buffers.push(p)}else(h instanceof gs||h instanceof Qa)&&h.paintVertexBuffer&&this._buffers.push(h.paintVertexBuffer)}}upload(i){for(let s in this.binders){let h=this.binders[s];(h instanceof gs||h instanceof Qa||h instanceof Tu)&&h.upload(i)}this.updatePaintBuffers()}destroy(){for(let i in this.binders){let s=this.binders[i];(s instanceof gs||s instanceof Qa||s instanceof Tu)&&s.destroy()}}}class nc{constructor(i,s,h=()=>!0){this.programConfigurations={};for(let p of i)this.programConfigurations[p.id]=new uD(p,s,h);this.needsUpload=!1,this._featureMap=new rc,this._bufferOffset=0}populatePaintArrays(i,s,h,p,g,y){for(let x in this.programConfigurations)this.programConfigurations[x].populatePaintArrays(i,s,p,g,y);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,s,h,p){for(let g of h)this.needsUpload=this.programConfigurations[g.id].updatePaintArrays(i,this._featureMap,s,g,p)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(let s in this.programConfigurations)this.programConfigurations[s].upload(i);this.needsUpload=!1}}destroy(){for(let i in this.programConfigurations)this.programConfigurations[i].destroy()}}function Vhe(a,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[a]||[a.replace(`${i}-`,"").replace(/-/g,"_")]}function lD(a,i,s){let h={color:{source:H,composite:yt},number:{source:je,composite:H}},p=function(g){return{"line-pattern":{source:En,composite:En},"fill-pattern":{source:En,composite:En},"fill-extrusion-pattern":{source:En,composite:En}}[g]}(a);return p&&p[s]||h[i][s]}Ye("ConstantBinder",zp),Ye("CrossFadedConstantBinder",Uh),Ye("SourceExpressionBinder",gs),Ye("CrossFadedCompositeBinder",Tu),Ye("CompositeExpressionBinder",Qa),Ye("ProgramConfiguration",uD,{omit:["_buffers"]}),Ye("ProgramConfigurationSet",nc);let zr=8192,$w=Math.pow(2,14)-1,cD=-$w-1;function ac(a){let i=zr/a.extent,s=a.loadGeometry();for(let h=0;h<s.length;h++){let p=s[h];for(let g=0;g<p.length;g++){let y=p[g],x=Math.round(y.x*i),q=Math.round(y.y*i);y.x=ge(x,cD,$w),y.y=ge(q,cD,$w),(x<y.x||x>y.x+1||q<y.y||q>y.y+1)&&Wr("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return s}function oc(a,i){return{type:a.type,id:a.id,properties:a.properties,geometry:i?ac(a):[]}}function Xy(a,i,s,h,p){a.emplaceBack(2*i+(h+1)/2,2*s+(p+1)/2)}class Vw{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new Ei,this.indexArray=new ea,this.segments=new Ft,this.programConfigurations=new nc(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){let p=this.layers[0],g=[],y=null,x=!1;p.type==="circle"&&(y=p.layout.get("circle-sort-key"),x=!y.isConstant());for(let{feature:q,id:P,index:M,sourceLayerIndex:R}of i){let L=this.layers[0]._featureFilter.needGeometry,B=oc(q,L);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),B,h))continue;let U=x?y.evaluate(B,{},h):void 0,G={id:P,properties:q.properties,type:q.type,sourceLayerIndex:R,index:M,geometry:L?B.geometry:ac(q),patterns:{},sortKey:U};g.push(G)}x&&g.sort((q,P)=>q.sortKey-P.sortKey);for(let q of g){let{geometry:P,index:M,sourceLayerIndex:R}=q,L=i[M].feature;this.addFeature(q,P,M,h),s.featureIndex.insert(L,P,M,R,this.index)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,hn),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,s,h,p){for(let g of s)for(let y of g){let x=y.x,q=y.y;if(x<0||x>=zr||q<0||q>=zr)continue;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,i.sortKey),M=P.vertexLength;Xy(this.layoutVertexArray,x,q,-1,-1),Xy(this.layoutVertexArray,x,q,1,-1),Xy(this.layoutVertexArray,x,q,1,1),Xy(this.layoutVertexArray,x,q,-1,1),this.indexArray.emplaceBack(M,M+1,M+2),this.indexArray.emplaceBack(M,M+3,M+2),P.vertexLength+=4,P.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,{},p)}}function hD(a,i){for(let s=0;s<a.length;s++)if($h(i,a[s]))return!0;for(let s=0;s<i.length;s++)if($h(a,i[s]))return!0;return!!Gw(a,i)}function Ghe(a,i,s){return!!$h(a,i)||!!Hw(i,a,s)}function fD(a,i){if(a.length===1)return pD(i,a[0]);for(let s=0;s<i.length;s++){let h=i[s];for(let p=0;p<h.length;p++)if($h(a,h[p]))return!0}for(let s=0;s<a.length;s++)if(pD(i,a[s]))return!0;for(let s=0;s<i.length;s++)if(Gw(a,i[s]))return!0;return!1}function Hhe(a,i,s){if(a.length>1){if(Gw(a,i))return!0;for(let h=0;h<i.length;h++)if(Hw(i[h],a,s))return!0}for(let h=0;h<a.length;h++)if(Hw(a[h],i,s))return!0;return!1}function Gw(a,i){if(a.length===0||i.length===0)return!1;for(let s=0;s<a.length-1;s++){let h=a[s],p=a[s+1];for(let g=0;g<i.length-1;g++)if(Whe(h,p,i[g],i[g+1]))return!0}return!1}function Whe(a,i,s,h){return wi(a,s,h)!==wi(i,s,h)&&wi(a,i,s)!==wi(a,i,h)}function Hw(a,i,s){let h=s*s;if(i.length===1)return a.distSqr(i[0])<h;for(let p=1;p<i.length;p++)if(dD(a,i[p-1],i[p])<h)return!0;return!1}function dD(a,i,s){let h=i.distSqr(s);if(h===0)return a.distSqr(i);let p=((a.x-i.x)*(s.x-i.x)+(a.y-i.y)*(s.y-i.y))/h;return a.distSqr(p<0?i:p>1?s:s.sub(i)._mult(p)._add(i))}function pD(a,i){let s,h,p,g=!1;for(let y=0;y<a.length;y++){s=a[y];for(let x=0,q=s.length-1;x<s.length;q=x++)h=s[x],p=s[q],h.y>i.y!=p.y>i.y&&i.x<(p.x-h.x)*(i.y-h.y)/(p.y-h.y)+h.x&&(g=!g)}return g}function $h(a,i){let s=!1;for(let h=0,p=a.length-1;h<a.length;p=h++){let g=a[h],y=a[p];g.y>i.y!=y.y>i.y&&i.x<(y.x-g.x)*(i.y-g.y)/(y.y-g.y)+g.x&&(s=!s)}return s}function Zhe(a,i,s){let h=s[0],p=s[2];if(a.x<h.x&&i.x<h.x||a.x>p.x&&i.x>p.x||a.y<h.y&&i.y<h.y||a.y>p.y&&i.y>p.y)return!1;let g=wi(a,i,s[0]);return g!==wi(a,i,s[1])||g!==wi(a,i,s[2])||g!==wi(a,i,s[3])}function Fp(a,i,s){let h=i.paint.get(a).value;return h.kind==="constant"?h.value:s.programConfigurations.get(i.id).getMaxValue(a)}function Yy(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function Jy(a,i,s,h,p){if(!i[0]&&!i[1])return a;let g=T.convert(i)._mult(p);s==="viewport"&&g._rotate(-h);let y=[];for(let x=0;x<a.length;x++)y.push(a[x].sub(g));return y}let mD,vD;Ye("CircleBucket",Vw,{omit:["layers"]});var Khe={get paint(){return vD=vD||new v({"circle-radius":new ft(Se.paint_circle["circle-radius"]),"circle-color":new ft(Se.paint_circle["circle-color"]),"circle-blur":new ft(Se.paint_circle["circle-blur"]),"circle-opacity":new ft(Se.paint_circle["circle-opacity"]),"circle-translate":new tt(Se.paint_circle["circle-translate"]),"circle-translate-anchor":new tt(Se.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new tt(Se.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new tt(Se.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new ft(Se.paint_circle["circle-stroke-width"]),"circle-stroke-color":new ft(Se.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new ft(Se.paint_circle["circle-stroke-opacity"])})},get layout(){return mD=mD||new v({"circle-sort-key":new ft(Se.layout_circle["circle-sort-key"])})}},Gi=1e-6,Vh=typeof Float32Array!="undefined"?Float32Array:Array;function Ww(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function gD(a,i,s){var h=i[0],p=i[1],g=i[2],y=i[3],x=i[4],q=i[5],P=i[6],M=i[7],R=i[8],L=i[9],B=i[10],U=i[11],G=i[12],J=i[13],ie=i[14],ve=i[15],le=s[0],pe=s[1],qe=s[2],Ce=s[3];return a[0]=le*h+pe*x+qe*R+Ce*G,a[1]=le*p+pe*q+qe*L+Ce*J,a[2]=le*g+pe*P+qe*B+Ce*ie,a[3]=le*y+pe*M+qe*U+Ce*ve,a[4]=(le=s[4])*h+(pe=s[5])*x+(qe=s[6])*R+(Ce=s[7])*G,a[5]=le*p+pe*q+qe*L+Ce*J,a[6]=le*g+pe*P+qe*B+Ce*ie,a[7]=le*y+pe*M+qe*U+Ce*ve,a[8]=(le=s[8])*h+(pe=s[9])*x+(qe=s[10])*R+(Ce=s[11])*G,a[9]=le*p+pe*q+qe*L+Ce*J,a[10]=le*g+pe*P+qe*B+Ce*ie,a[11]=le*y+pe*M+qe*U+Ce*ve,a[12]=(le=s[12])*h+(pe=s[13])*x+(qe=s[14])*R+(Ce=s[15])*G,a[13]=le*p+pe*q+qe*L+Ce*J,a[14]=le*g+pe*P+qe*B+Ce*ie,a[15]=le*y+pe*M+qe*U+Ce*ve,a}Math.hypot||(Math.hypot=function(){for(var a=0,i=arguments.length;i--;)a+=arguments[i]*arguments[i];return Math.sqrt(a)});var Np,Xhe=gD;function Qy(a,i,s){var h=i[0],p=i[1],g=i[2],y=i[3];return a[0]=s[0]*h+s[4]*p+s[8]*g+s[12]*y,a[1]=s[1]*h+s[5]*p+s[9]*g+s[13]*y,a[2]=s[2]*h+s[6]*p+s[10]*g+s[14]*y,a[3]=s[3]*h+s[7]*p+s[11]*g+s[15]*y,a}Np=new Vh(4),Vh!=Float32Array&&(Np[0]=0,Np[1]=0,Np[2]=0,Np[3]=0);class Yhe extends c{constructor(i){super(i,Khe)}createBucket(i){return new Vw(i)}queryRadius(i){let s=i;return Fp("circle-radius",this,s)+Fp("circle-stroke-width",this,s)+Yy(this.paint.get("circle-translate"))}queryIntersectsFeature(i,s,h,p,g,y,x,q){let P=Jy(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),y.angle,x),M=this.paint.get("circle-radius").evaluate(s,h)+this.paint.get("circle-stroke-width").evaluate(s,h),R=this.paint.get("circle-pitch-alignment")==="map",L=R?P:function(U,G){return U.map(J=>yD(J,G))}(P,q),B=R?M*x:M;for(let U of p)for(let G of U){let J=R?G:yD(G,q),ie=B,ve=Qy([],[G.x,G.y,0,1],q);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ie*=ve[3]/y.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ie*=y.cameraToCenterDistance/ve[3]),Ghe(L,J,ie))return!0}return!1}}function yD(a,i){let s=Qy([],[a.x,a.y,0,1],i);return new T(s[0]/s[3],s[1]/s[3])}class _D extends Vw{}let xD;Ye("HeatmapBucket",_D,{omit:["layers"]});var Jhe={get paint(){return xD=xD||new v({"heatmap-radius":new ft(Se.paint_heatmap["heatmap-radius"]),"heatmap-weight":new ft(Se.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new tt(Se.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Dp(Se.paint_heatmap["heatmap-color"]),"heatmap-opacity":new tt(Se.paint_heatmap["heatmap-opacity"])})}};function Zw(a,{width:i,height:s},h,p){if(p){if(p instanceof Uint8ClampedArray)p=new Uint8Array(p.buffer);else if(p.length!==i*s*h)throw new RangeError(`mismatched image size. expected: ${p.length} but got: ${i*s*h}`)}else p=new Uint8Array(i*s*h);return a.width=i,a.height=s,a.data=p,a}function bD(a,{width:i,height:s},h){if(i===a.width&&s===a.height)return;let p=Zw({},{width:i,height:s},h);Kw(a,p,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,i),height:Math.min(a.height,s)},h),a.width=i,a.height=s,a.data=p.data}function Kw(a,i,s,h,p,g){if(p.width===0||p.height===0)return i;if(p.width>a.width||p.height>a.height||s.x>a.width-p.width||s.y>a.height-p.height)throw new RangeError("out of range source coordinates for image copy");if(p.width>i.width||p.height>i.height||h.x>i.width-p.width||h.y>i.height-p.height)throw new RangeError("out of range destination coordinates for image copy");let y=a.data,x=i.data;if(y===x)throw new Error("srcData equals dstData, so image is already copied");for(let q=0;q<p.height;q++){let P=((s.y+q)*a.width+s.x)*g,M=((h.y+q)*i.width+h.x)*g;for(let R=0;R<p.width*g;R++)x[M+R]=y[P+R]}return i}class Bp{constructor(i,s){Zw(this,i,1,s)}resize(i){bD(this,i,1)}clone(){return new Bp({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,h,p,g){Kw(i,s,h,p,g,1)}}class ta{constructor(i,s){Zw(this,i,4,s)}resize(i){bD(this,i,4)}replace(i,s){s?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new ta({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,s,h,p,g){Kw(i,s,h,p,g,4)}}function wD(a){let i={},s=a.resolution||256,h=a.clips?a.clips.length:1,p=a.image||new ta({width:s,height:h});if(Math.log(s)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${s}`);let g=(y,x,q)=>{i[a.evaluationKey]=q;let P=a.expression.evaluate(i);p.data[y+x+0]=Math.floor(255*P.r/P.a),p.data[y+x+1]=Math.floor(255*P.g/P.a),p.data[y+x+2]=Math.floor(255*P.b/P.a),p.data[y+x+3]=Math.floor(255*P.a)};if(a.clips)for(let y=0,x=0;y<h;++y,x+=4*s)for(let q=0,P=0;q<s;q++,P+=4){let M=q/(s-1),{start:R,end:L}=a.clips[y];g(x,P,R*(1-M)+L*M)}else for(let y=0,x=0;y<s;y++,x+=4)g(0,x,y/(s-1));return p}Ye("AlphaImage",Bp),Ye("RGBAImage",ta);let Xw="big-fb";class Qhe extends c{createBucket(i){return new _D(i)}constructor(i){super(i,Jhe),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=wD({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Xw)&&this.heatmapFbos.delete(Xw)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let SD;var efe={get paint(){return SD=SD||new v({"hillshade-illumination-direction":new tt(Se.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new tt(Se.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new tt(Se.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new tt(Se.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new tt(Se.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new tt(Se.paint_hillshade["hillshade-accent-color"])})}};class tfe extends c{constructor(i){super(i,efe)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}let rfe=w([{name:"a_pos",components:2,type:"Int16"}],4),{members:ife}=rfe;function qD(a,i,s=2){let h=i&&i.length,p=h?i[0]*s:a.length,g=ID(a,0,p,s,!0),y=[];if(!g||g.next===g.prev)return y;let x,q,P;if(h&&(g=function(M,R,L,B){let U=[];for(let G=0,J=R.length;G<J;G++){let ie=ID(M,R[G]*B,G<J-1?R[G+1]*B:M.length,B,!1);ie===ie.next&&(ie.steiner=!0),U.push(hfe(ie))}U.sort(ufe);for(let G=0;G<U.length;G++)L=lfe(U[G],L);return L}(a,i,g,s)),a.length>80*s){x=1/0,q=1/0;let M=-1/0,R=-1/0;for(let L=s;L<p;L+=s){let B=a[L],U=a[L+1];B<x&&(x=B),U<q&&(q=U),B>M&&(M=B),U>R&&(R=U)}P=Math.max(M-x,R-q),P=P!==0?32767/P:0}return jp(g,y,s,x,q,P,0),y}function ID(a,i,s,h,p){let g;if(p===function(y,x,q,P){let M=0;for(let R=x,L=q-P;R<q;R+=P)M+=(y[L]-y[R])*(y[R+1]+y[L+1]),L=R;return M}(a,i,s,h)>0)for(let y=i;y<s;y+=h)g=AD(y/h|0,a[y],a[y+1],g);else for(let y=s-h;y>=i;y-=h)g=AD(y/h|0,a[y],a[y+1],g);return g&&e_(g,g.next)&&($p(g),g=g.next),g}function sc(a,i){if(!a)return a;i||(i=a);let s,h=a;do if(s=!1,h.steiner||!e_(h,h.next)&&kr(h.prev,h,h.next)!==0)h=h.next;else{if($p(h),h=i=h.prev,h===h.next)break;s=!0}while(s||h!==i);return i}function jp(a,i,s,h,p,g,y){if(!a)return;!y&&g&&function(q,P,M,R){let L=q;do L.z===0&&(L.z=Yw(L.x,L.y,P,M,R)),L.prevZ=L.prev,L.nextZ=L.next,L=L.next;while(L!==q);L.prevZ.nextZ=null,L.prevZ=null,function(B){let U,G=1;do{let J,ie=B;B=null;let ve=null;for(U=0;ie;){U++;let le=ie,pe=0;for(let Ce=0;Ce<G&&(pe++,le=le.nextZ,le);Ce++);let qe=G;for(;pe>0||qe>0&&le;)pe!==0&&(qe===0||!le||ie.z<=le.z)?(J=ie,ie=ie.nextZ,pe--):(J=le,le=le.nextZ,qe--),ve?ve.nextZ=J:B=J,J.prevZ=ve,ve=J;ie=le}ve.nextZ=null,G*=2}while(U>1)}(L)}(a,h,p,g);let x=a;for(;a.prev!==a.next;){let q=a.prev,P=a.next;if(g?afe(a,h,p,g):nfe(a))i.push(q.i,a.i,P.i),$p(a),a=P.next,x=P.next;else if((a=P)===x){y?y===1?jp(a=ofe(sc(a),i),i,s,h,p,g,2):y===2&&sfe(a,i,s,h,p,g):jp(sc(a),i,s,h,p,g,1);break}}}function nfe(a){let i=a.prev,s=a,h=a.next;if(kr(i,s,h)>=0)return!1;let p=i.x,g=s.x,y=h.x,x=i.y,q=s.y,P=h.y,M=p<g?p<y?p:y:g<y?g:y,R=x<q?x<P?x:P:q<P?q:P,L=p>g?p>y?p:y:g>y?g:y,B=x>q?x>P?x:P:q>P?q:P,U=h.next;for(;U!==i;){if(U.x>=M&&U.x<=L&&U.y>=R&&U.y<=B&&Gh(p,x,g,q,y,P,U.x,U.y)&&kr(U.prev,U,U.next)>=0)return!1;U=U.next}return!0}function afe(a,i,s,h){let p=a.prev,g=a,y=a.next;if(kr(p,g,y)>=0)return!1;let x=p.x,q=g.x,P=y.x,M=p.y,R=g.y,L=y.y,B=x<q?x<P?x:P:q<P?q:P,U=M<R?M<L?M:L:R<L?R:L,G=x>q?x>P?x:P:q>P?q:P,J=M>R?M>L?M:L:R>L?R:L,ie=Yw(B,U,i,s,h),ve=Yw(G,J,i,s,h),le=a.prevZ,pe=a.nextZ;for(;le&&le.z>=ie&&pe&&pe.z<=ve;){if(le.x>=B&&le.x<=G&&le.y>=U&&le.y<=J&&le!==p&&le!==y&&Gh(x,M,q,R,P,L,le.x,le.y)&&kr(le.prev,le,le.next)>=0||(le=le.prevZ,pe.x>=B&&pe.x<=G&&pe.y>=U&&pe.y<=J&&pe!==p&&pe!==y&&Gh(x,M,q,R,P,L,pe.x,pe.y)&&kr(pe.prev,pe,pe.next)>=0))return!1;pe=pe.nextZ}for(;le&&le.z>=ie;){if(le.x>=B&&le.x<=G&&le.y>=U&&le.y<=J&&le!==p&&le!==y&&Gh(x,M,q,R,P,L,le.x,le.y)&&kr(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;pe&&pe.z<=ve;){if(pe.x>=B&&pe.x<=G&&pe.y>=U&&pe.y<=J&&pe!==p&&pe!==y&&Gh(x,M,q,R,P,L,pe.x,pe.y)&&kr(pe.prev,pe,pe.next)>=0)return!1;pe=pe.nextZ}return!0}function ofe(a,i){let s=a;do{let h=s.prev,p=s.next.next;!e_(h,p)&&ED(h,s,s.next,p)&&Up(h,p)&&Up(p,h)&&(i.push(h.i,s.i,p.i),$p(s),$p(s.next),s=a=p),s=s.next}while(s!==a);return sc(s)}function sfe(a,i,s,h,p,g){let y=a;do{let x=y.next.next;for(;x!==y.prev;){if(y.i!==x.i&&ffe(y,x)){let q=TD(y,x);return y=sc(y,y.next),q=sc(q,q.next),jp(y,i,s,h,p,g,0),void jp(q,i,s,h,p,g,0)}x=x.next}y=y.next}while(y!==a)}function ufe(a,i){return a.x-i.x}function lfe(a,i){let s=function(p,g){let y=g,x=p.x,q=p.y,P,M=-1/0;do{if(q<=y.y&&q>=y.next.y&&y.next.y!==y.y){let G=y.x+(q-y.y)*(y.next.x-y.x)/(y.next.y-y.y);if(G<=x&&G>M&&(M=G,P=y.x<y.next.x?y:y.next,G===x))return P}y=y.next}while(y!==g);if(!P)return null;let R=P,L=P.x,B=P.y,U=1/0;y=P;do{if(x>=y.x&&y.x>=L&&x!==y.x&&Gh(q<B?x:M,q,L,B,q<B?M:x,q,y.x,y.y)){let G=Math.abs(q-y.y)/(x-y.x);Up(y,p)&&(G<U||G===U&&(y.x>P.x||y.x===P.x&&cfe(P,y)))&&(P=y,U=G)}y=y.next}while(y!==R);return P}(a,i);if(!s)return i;let h=TD(s,a);return sc(h,h.next),sc(s,s.next)}function cfe(a,i){return kr(a.prev,a,i.prev)<0&&kr(i.next,a,a.next)<0}function Yw(a,i,s,h,p){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*p|0)|a<<8))|a<<4))|a<<2))|a<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-h)*p|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function hfe(a){let i=a,s=a;do(i.x<s.x||i.x===s.x&&i.y<s.y)&&(s=i),i=i.next;while(i!==a);return s}function Gh(a,i,s,h,p,g,y,x){return(p-y)*(i-x)>=(a-y)*(g-x)&&(a-y)*(h-x)>=(s-y)*(i-x)&&(s-y)*(g-x)>=(p-y)*(h-x)}function ffe(a,i){return a.next.i!==i.i&&a.prev.i!==i.i&&!function(s,h){let p=s;do{if(p.i!==s.i&&p.next.i!==s.i&&p.i!==h.i&&p.next.i!==h.i&&ED(p,p.next,s,h))return!0;p=p.next}while(p!==s);return!1}(a,i)&&(Up(a,i)&&Up(i,a)&&function(s,h){let p=s,g=!1,y=(s.x+h.x)/2,x=(s.y+h.y)/2;do p.y>x!=p.next.y>x&&p.next.y!==p.y&&y<(p.next.x-p.x)*(x-p.y)/(p.next.y-p.y)+p.x&&(g=!g),p=p.next;while(p!==s);return g}(a,i)&&(kr(a.prev,a,i.prev)||kr(a,i.prev,i))||e_(a,i)&&kr(a.prev,a,a.next)>0&&kr(i.prev,i,i.next)>0)}function kr(a,i,s){return(i.y-a.y)*(s.x-i.x)-(i.x-a.x)*(s.y-i.y)}function e_(a,i){return a.x===i.x&&a.y===i.y}function ED(a,i,s,h){let p=r_(kr(a,i,s)),g=r_(kr(a,i,h)),y=r_(kr(s,h,a)),x=r_(kr(s,h,i));return p!==g&&y!==x||!(p!==0||!t_(a,s,i))||!(g!==0||!t_(a,h,i))||!(y!==0||!t_(s,a,h))||!(x!==0||!t_(s,i,h))}function t_(a,i,s){return i.x<=Math.max(a.x,s.x)&&i.x>=Math.min(a.x,s.x)&&i.y<=Math.max(a.y,s.y)&&i.y>=Math.min(a.y,s.y)}function r_(a){return a>0?1:a<0?-1:0}function Up(a,i){return kr(a.prev,a,a.next)<0?kr(a,i,a.next)>=0&&kr(a,a.prev,i)>=0:kr(a,i,a.prev)<0||kr(a,a.next,i)<0}function TD(a,i){let s=Jw(a.i,a.x,a.y),h=Jw(i.i,i.x,i.y),p=a.next,g=i.prev;return a.next=i,i.prev=a,s.next=p,p.prev=s,h.next=s,s.prev=h,g.next=h,h.prev=g,h}function AD(a,i,s,h){let p=Jw(a,i,s);return h?(p.next=h.next,p.prev=h,h.next.prev=p,h.next=p):(p.prev=p,p.next=p),p}function $p(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function Jw(a,i,s){return{i:a,x:i,y:s,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Qw(a,i,s){let h=s.patternDependencies,p=!1;for(let g of i){let y=g.paint.get(`${a}-pattern`);y.isConstant()||(p=!0);let x=y.constantOr(null);x&&(p=!0,h[x.to]=!0,h[x.from]=!0)}return p}function eS(a,i,s,h,p){let g=p.patternDependencies;for(let y of i){let x=y.paint.get(`${a}-pattern`).value;if(x.kind!=="constant"){let q=x.evaluate({zoom:h-1},s,{},p.availableImages),P=x.evaluate({zoom:h},s,{},p.availableImages),M=x.evaluate({zoom:h+1},s,{},p.availableImages);q=q&&q.name?q.name:q,P=P&&P.name?P.name:P,M=M&&M.name?M.name:M,g[q]=!0,g[P]=!0,g[M]=!0,s.patterns[y.id]={min:q,mid:P,max:M}}}return s}class tS{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new wa,this.indexArray=new ea,this.indexArray2=new ii,this.programConfigurations=new nc(i.layers,i.zoom),this.segments=new Ft,this.segments2=new Ft,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){this.hasPattern=Qw("fill",this.layers,s);let p=this.layers[0].layout.get("fill-sort-key"),g=!p.isConstant(),y=[];for(let{feature:x,id:q,index:P,sourceLayerIndex:M}of i){let R=this.layers[0]._featureFilter.needGeometry,L=oc(x,R);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),L,h))continue;let B=g?p.evaluate(L,{},h,s.availableImages):void 0,U={id:q,properties:x.properties,type:x.type,sourceLayerIndex:M,index:P,geometry:R?L.geometry:ac(x),patterns:{},sortKey:B};y.push(U)}g&&y.sort((x,q)=>x.sortKey-q.sortKey);for(let x of y){let{geometry:q,index:P,sourceLayerIndex:M}=x;if(this.hasPattern){let R=eS("fill",this.layers,x,this.zoom,s);this.patternFeatures.push(R)}else this.addFeature(x,q,P,h,{});s.featureIndex.insert(i[P].feature,q,P,M,this.index)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}addFeatures(i,s,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,ife),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,s,h,p,g){for(let y of mh(s,500)){let x=0;for(let B of y)x+=B.length;let q=this.segments.prepareSegment(x,this.layoutVertexArray,this.indexArray),P=q.vertexLength,M=[],R=[];for(let B of y){if(B.length===0)continue;B!==y[0]&&R.push(M.length/2);let U=this.segments2.prepareSegment(B.length,this.layoutVertexArray,this.indexArray2),G=U.vertexLength;this.layoutVertexArray.emplaceBack(B[0].x,B[0].y),this.indexArray2.emplaceBack(G+B.length-1,G),M.push(B[0].x),M.push(B[0].y);for(let J=1;J<B.length;J++)this.layoutVertexArray.emplaceBack(B[J].x,B[J].y),this.indexArray2.emplaceBack(G+J-1,G+J),M.push(B[J].x),M.push(B[J].y);U.vertexLength+=B.length,U.primitiveLength+=B.length}let L=qD(M,R);for(let B=0;B<L.length;B+=3)this.indexArray.emplaceBack(P+L[B],P+L[B+1],P+L[B+2]);q.vertexLength+=x,q.primitiveLength+=L.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}}let PD,CD;Ye("FillBucket",tS,{omit:["layers","patternFeatures"]});var dfe={get paint(){return CD=CD||new v({"fill-antialias":new tt(Se.paint_fill["fill-antialias"]),"fill-opacity":new ft(Se.paint_fill["fill-opacity"]),"fill-color":new ft(Se.paint_fill["fill-color"]),"fill-outline-color":new ft(Se.paint_fill["fill-outline-color"]),"fill-translate":new tt(Se.paint_fill["fill-translate"]),"fill-translate-anchor":new tt(Se.paint_fill["fill-translate-anchor"]),"fill-pattern":new Dh(Se.paint_fill["fill-pattern"])})},get layout(){return PD=PD||new v({"fill-sort-key":new ft(Se.layout_fill["fill-sort-key"])})}};class pfe extends c{constructor(i){super(i,dfe)}recalculate(i,s){super.recalculate(i,s);let h=this.paint._values["fill-outline-color"];h.value.kind==="constant"&&h.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new tS(i)}queryRadius(){return Yy(this.paint.get("fill-translate"))}queryIntersectsFeature(i,s,h,p,g,y,x){return fD(Jy(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),y.angle,x),p)}isTileClipped(){return!0}}let mfe=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),vfe=w([{name:"a_centroid",components:2,type:"Int16"}],4),{members:gfe}=mfe;var Au={},yfe=b,MD=Hh;function Hh(a,i,s,h,p){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=p,a.readFields(_fe,this,i)}function _fe(a,i,s){a==1?i.id=s.readVarint():a==2?function(h,p){for(var g=h.readVarint()+h.pos;h.pos<g;){var y=p._keys[h.readVarint()],x=p._values[h.readVarint()];p.properties[y]=x}}(s,i):a==3?i.type=s.readVarint():a==4&&(i._geometry=s.pos)}function xfe(a){for(var i,s,h=0,p=0,g=a.length,y=g-1;p<g;y=p++)h+=((s=a[y]).x-(i=a[p]).x)*(i.y+s.y);return h}Hh.types=["Unknown","Point","LineString","Polygon"],Hh.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var i,s=a.readVarint()+a.pos,h=1,p=0,g=0,y=0,x=[];a.pos<s;){if(p<=0){var q=a.readVarint();h=7&q,p=q>>3}if(p--,h===1||h===2)g+=a.readSVarint(),y+=a.readSVarint(),h===1&&(i&&x.push(i),i=[]),i.push(new yfe(g,y));else{if(h!==7)throw new Error("unknown command "+h);i&&i.push(i[0].clone())}}return i&&x.push(i),x},Hh.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var i=a.readVarint()+a.pos,s=1,h=0,p=0,g=0,y=1/0,x=-1/0,q=1/0,P=-1/0;a.pos<i;){if(h<=0){var M=a.readVarint();s=7&M,h=M>>3}if(h--,s===1||s===2)(p+=a.readSVarint())<y&&(y=p),p>x&&(x=p),(g+=a.readSVarint())<q&&(q=g),g>P&&(P=g);else if(s!==7)throw new Error("unknown command "+s)}return[y,q,x,P]},Hh.prototype.toGeoJSON=function(a,i,s){var h,p,g=this.extent*Math.pow(2,s),y=this.extent*a,x=this.extent*i,q=this.loadGeometry(),P=Hh.types[this.type];function M(B){for(var U=0;U<B.length;U++){var G=B[U];B[U]=[360*(G.x+y)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(G.y+x)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var R=[];for(h=0;h<q.length;h++)R[h]=q[h][0];M(q=R);break;case 2:for(h=0;h<q.length;h++)M(q[h]);break;case 3:for(q=function(B){var U=B.length;if(U<=1)return[B];for(var G,J,ie=[],ve=0;ve<U;ve++){var le=xfe(B[ve]);le!==0&&(J===void 0&&(J=le<0),J===le<0?(G&&ie.push(G),G=[B[ve]]):G.push(B[ve]))}return G&&ie.push(G),ie}(q),h=0;h<q.length;h++)for(p=0;p<q[h].length;p++)M(q[h][p]);}q.length===1?q=q[0]:P="Multi"+P;var L={type:"Feature",geometry:{type:P,coordinates:q},properties:this.properties};return"id"in this&&(L.id=this.id),L};var bfe=MD,OD=RD;function RD(a,i){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(wfe,this,i),this.length=this._features.length}function wfe(a,i,s){a===15?i.version=s.readVarint():a===1?i.name=s.readString():a===5?i.extent=s.readVarint():a===2?i._features.push(s.pos):a===3?i._keys.push(s.readString()):a===4&&i._values.push(function(h){for(var p=null,g=h.readVarint()+h.pos;h.pos<g;){var y=h.readVarint()>>3;p=y===1?h.readString():y===2?h.readFloat():y===3?h.readDouble():y===4?h.readVarint64():y===5?h.readVarint():y===6?h.readSVarint():y===7?h.readBoolean():null}return p}(s))}RD.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var i=this._pbf.readVarint()+this._pbf.pos;return new bfe(this._pbf,i,this.extent,this._keys,this._values)};var Sfe=OD;function qfe(a,i,s){if(a===3){var h=new Sfe(s,s.readVarint()+s.pos);h.length&&(i[h.name]=h)}}Au.VectorTile=function(a,i){this.layers=a.readFields(qfe,{},i)},Au.VectorTileFeature=MD,Au.VectorTileLayer=OD;let Ife=Au.VectorTileFeature.types,rS=Math.pow(2,13);function Vp(a,i,s,h,p,g,y,x){a.emplaceBack(i,s,2*Math.floor(h*rS)+y,p*rS*2,g*rS*2,Math.round(x))}class iS{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.layoutVertexArray=new wu,this.centroidVertexArray=new hi,this.indexArray=new ea,this.programConfigurations=new nc(i.layers,i.zoom),this.segments=new Ft,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){this.features=[],this.hasPattern=Qw("fill-extrusion",this.layers,s);for(let{feature:p,id:g,index:y,sourceLayerIndex:x}of i){let q=this.layers[0]._featureFilter.needGeometry,P=oc(p,q);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),P,h))continue;let M={id:g,sourceLayerIndex:x,index:y,geometry:q?P.geometry:ac(p),properties:p.properties,type:p.type,patterns:{}};this.hasPattern?this.features.push(eS("fill-extrusion",this.layers,M,this.zoom,s)):this.addFeature(M,M.geometry,y,h,{}),s.featureIndex.insert(p,M.geometry,y,x,this.index,!0)}}addFeatures(i,s,h){for(let p of this.features){let{geometry:g}=p;this.addFeature(p,g,p.index,s,h)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,gfe),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,vfe.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,s,h,p,g){for(let y of mh(s,500)){let x={x:0,y:0,vertexCount:0},q=0;for(let U of y)q+=U.length;let P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(let U of y){if(U.length===0||Tfe(U))continue;let G=0;for(let J=0;J<U.length;J++){let ie=U[J];if(J>=1){let ve=U[J-1];if(!Efe(ie,ve)){P.vertexLength+4>Ft.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));let le=ie.sub(ve)._perp()._unit(),pe=ve.dist(ie);G+pe>32768&&(G=0),Vp(this.layoutVertexArray,ie.x,ie.y,le.x,le.y,0,0,G),Vp(this.layoutVertexArray,ie.x,ie.y,le.x,le.y,0,1,G),x.x+=2*ie.x,x.y+=2*ie.y,x.vertexCount+=2,G+=pe,Vp(this.layoutVertexArray,ve.x,ve.y,le.x,le.y,0,0,G),Vp(this.layoutVertexArray,ve.x,ve.y,le.x,le.y,0,1,G),x.x+=2*ve.x,x.y+=2*ve.y,x.vertexCount+=2;let qe=P.vertexLength;this.indexArray.emplaceBack(qe,qe+2,qe+1),this.indexArray.emplaceBack(qe+1,qe+2,qe+3),P.vertexLength+=4,P.primitiveLength+=2}}}}if(P.vertexLength+q>Ft.MAX_VERTEX_ARRAY_LENGTH&&(P=this.segments.prepareSegment(q,this.layoutVertexArray,this.indexArray)),Ife[i.type]!=="Polygon")continue;let M=[],R=[],L=P.vertexLength;for(let U of y)if(U.length!==0){U!==y[0]&&R.push(M.length/2);for(let G=0;G<U.length;G++){let J=U[G];Vp(this.layoutVertexArray,J.x,J.y,0,0,1,1,0),x.x+=J.x,x.y+=J.y,x.vertexCount+=1,M.push(J.x),M.push(J.y)}}let B=qD(M,R);for(let U=0;U<B.length;U+=3)this.indexArray.emplaceBack(L+B[U],L+B[U+2],L+B[U+1]);P.primitiveLength+=B.length/3,P.vertexLength+=q;for(let U=0;U<x.vertexCount;U++){let G=Math.floor(x.x/x.vertexCount),J=Math.floor(x.y/x.vertexCount);this.centroidVertexArray.emplaceBack(G,J)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}}function Efe(a,i){return a.x===i.x&&(a.x<0||a.x>zr)||a.y===i.y&&(a.y<0||a.y>zr)}function Tfe(a){return a.every(i=>i.x<0)||a.every(i=>i.x>zr)||a.every(i=>i.y<0)||a.every(i=>i.y>zr)}let kD;Ye("FillExtrusionBucket",iS,{omit:["layers","features"]});var Afe={get paint(){return kD=kD||new v({"fill-extrusion-opacity":new tt(Se["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new ft(Se["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new tt(Se["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new tt(Se["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Dh(Se["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new ft(Se["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new ft(Se["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new tt(Se["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Pfe extends c{constructor(i){super(i,Afe)}createBucket(i){return new iS(i)}queryRadius(){return Yy(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(i,s,h,p,g,y,x,q){let P=Jy(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),y.angle,x),M=this.paint.get("fill-extrusion-height").evaluate(s,h),R=this.paint.get("fill-extrusion-base").evaluate(s,h),L=function(U,G,J,ie){let ve=[];for(let le of U){let pe=[le.x,le.y,0,1];Qy(pe,pe,G),ve.push(new T(pe[0]/pe[3],pe[1]/pe[3]))}return ve}(P,q),B=function(U,G,J,ie){let ve=[],le=[],pe=ie[8]*G,qe=ie[9]*G,Ce=ie[10]*G,We=ie[11]*G,ct=ie[8]*J,Ve=ie[9]*J,Be=ie[10]*J,at=ie[11]*J;for(let Je of U){let Xe=[],Ee=[];for(let ot of Je){let it=ot.x,vt=ot.y,rr=ie[0]*it+ie[4]*vt+ie[12],er=ie[1]*it+ie[5]*vt+ie[13],Kr=ie[2]*it+ie[6]*vt+ie[14],Sa=ie[3]*it+ie[7]*vt+ie[15],pi=Kr+Ce,Xr=Sa+We,Hi=rr+ct,Wi=er+Ve,Zi=Kr+Be,Ar=Sa+at,Yr=new T((rr+pe)/Xr,(er+qe)/Xr);Yr.z=pi/Xr,Xe.push(Yr);let Ti=new T(Hi/Ar,Wi/Ar);Ti.z=Zi/Ar,Ee.push(Ti)}ve.push(Xe),le.push(Ee)}return[ve,le]}(p,R,M,q);return function(U,G,J){let ie=1/0;fD(J,G)&&(ie=DD(J,G[0]));for(let ve=0;ve<G.length;ve++){let le=G[ve],pe=U[ve];for(let qe=0;qe<le.length-1;qe++){let Ce=le[qe],We=[Ce,le[qe+1],pe[qe+1],pe[qe],Ce];hD(J,We)&&(ie=Math.min(ie,DD(J,We)))}}return ie!==1/0&&ie}(B[0],B[1],L)}}function Gp(a,i){return a.x*i.x+a.y*i.y}function DD(a,i){if(a.length===1){let s=0,h=i[s++],p;for(;!p||h.equals(p);)if(p=i[s++],!p)return 1/0;for(;s<i.length;s++){let g=i[s],y=a[0],x=p.sub(h),q=g.sub(h),P=y.sub(h),M=Gp(x,x),R=Gp(x,q),L=Gp(q,q),B=Gp(P,x),U=Gp(P,q),G=M*L-R*R,J=(L*B-R*U)/G,ie=(M*U-R*B)/G,ve=h.z*(1-J-ie)+p.z*J+g.z*ie;if(isFinite(ve))return ve}return 1/0}{let s=1/0;for(let h of i)s=Math.min(s,h.z);return s}}let Cfe=w([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Mfe}=Cfe,Ofe=w([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Rfe}=Ofe,kfe=Au.VectorTileFeature.types,Dfe=Math.cos(Math.PI/180*37.5),LD=Math.pow(2,14)/.5;class nS{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(s=>s.id),this.index=i.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new zh,this.layoutVertexArray2=new Su,this.indexArray=new ea,this.programConfigurations=new nc(i.layers,i.zoom),this.segments=new Ft,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(i,s,h){this.hasPattern=Qw("line",this.layers,s);let p=this.layers[0].layout.get("line-sort-key"),g=!p.isConstant(),y=[];for(let{feature:x,id:q,index:P,sourceLayerIndex:M}of i){let R=this.layers[0]._featureFilter.needGeometry,L=oc(x,R);if(!this.layers[0]._featureFilter.filter(new ur(this.zoom),L,h))continue;let B=g?p.evaluate(L,{},h):void 0,U={id:q,properties:x.properties,type:x.type,sourceLayerIndex:M,index:P,geometry:R?L.geometry:ac(x),patterns:{},sortKey:B};y.push(U)}g&&y.sort((x,q)=>x.sortKey-q.sortKey);for(let x of y){let{geometry:q,index:P,sourceLayerIndex:M}=x;if(this.hasPattern){let R=eS("line",this.layers,x,this.zoom,s);this.patternFeatures.push(R)}else this.addFeature(x,q,P,h,{});s.featureIndex.insert(i[P].feature,q,P,M,this.index)}}update(i,s,h){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,s,this.stateDependentLayers,h)}addFeatures(i,s,h){for(let p of this.patternFeatures)this.addFeature(p,p.geometry,p.index,s,h)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,Rfe)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Mfe),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,s,h,p,g){let y=this.layers[0].layout,x=y.get("line-join").evaluate(i,{}),q=y.get("line-cap"),P=y.get("line-miter-limit"),M=y.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(let R of s)this.addLine(R,i,x,q,P,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,h,g,p)}addLine(i,s,h,p,g,y){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ie=0;ie<i.length-1;ie++)this.totalDistance+=i[ie].dist(i[ie+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}let x=kfe[s.type]==="Polygon",q=i.length;for(;q>=2&&i[q-1].equals(i[q-2]);)q--;let P=0;for(;P<q-1&&i[P].equals(i[P+1]);)P++;if(q<(x?3:2))return;h==="bevel"&&(g=1.05);let M=this.overscaling<=16?15*zr/(512*this.overscaling):0,R=this.segments.prepareSegment(10*q,this.layoutVertexArray,this.indexArray),L,B,U,G,J;this.e1=this.e2=-1,x&&(L=i[q-2],J=i[P].sub(L)._unit()._perp());for(let ie=P;ie<q;ie++){if(U=ie===q-1?x?i[P+1]:void 0:i[ie+1],U&&i[ie].equals(U))continue;J&&(G=J),L&&(B=L),L=i[ie],J=U?U.sub(L)._unit()._perp():G,G=G||J;let ve=G.add(J);ve.x===0&&ve.y===0||ve._unit();let le=G.x*J.x+G.y*J.y,pe=ve.x*J.x+ve.y*J.y,qe=pe!==0?1/pe:1/0,Ce=2*Math.sqrt(2-2*pe),We=pe<Dfe&&B&&U,ct=G.x*J.y-G.y*J.x>0;if(We&&ie>P){let at=L.dist(B);if(at>2*M){let Je=L.sub(L.sub(B)._mult(M/at)._round());this.updateDistance(B,Je),this.addCurrentVertex(Je,G,0,0,R),B=Je}}let Ve=B&&U,Be=Ve?h:x?"butt":p;if(Ve&&Be==="round"&&(qe<y?Be="miter":qe<=2&&(Be="fakeround")),Be==="miter"&&qe>g&&(Be="bevel"),Be==="bevel"&&(qe>2&&(Be="flipbevel"),qe<g&&(Be="miter")),B&&this.updateDistance(B,L),Be==="miter")ve._mult(qe),this.addCurrentVertex(L,ve,0,0,R);else if(Be==="flipbevel"){if(qe>100)ve=J.mult(-1);else{let at=qe*G.add(J).mag()/G.sub(J).mag();ve._perp()._mult(at*(ct?-1:1))}this.addCurrentVertex(L,ve,0,0,R),this.addCurrentVertex(L,ve.mult(-1),0,0,R)}else if(Be==="bevel"||Be==="fakeround"){let at=-Math.sqrt(qe*qe-1),Je=ct?at:0,Xe=ct?0:at;if(B&&this.addCurrentVertex(L,G,Je,Xe,R),Be==="fakeround"){let Ee=Math.round(180*Ce/Math.PI/20);for(let ot=1;ot<Ee;ot++){let it=ot/Ee;if(it!==.5){let rr=it-.5;it+=it*rr*(it-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*rr*rr+(.848013+le*(.215638*le-1.06021)))}let vt=J.sub(G)._mult(it)._add(G)._unit()._mult(ct?-1:1);this.addHalfVertex(L,vt.x,vt.y,!1,ct,0,R)}}U&&this.addCurrentVertex(L,J,-Je,-Xe,R)}else if(Be==="butt")this.addCurrentVertex(L,ve,0,0,R);else if(Be==="square"){let at=B?1:-1;this.addCurrentVertex(L,ve,at,at,R)}else Be==="round"&&(B&&(this.addCurrentVertex(L,G,0,0,R),this.addCurrentVertex(L,G,1,1,R,!0)),U&&(this.addCurrentVertex(L,J,-1,-1,R,!0),this.addCurrentVertex(L,J,0,0,R)));if(We&&ie<q-1){let at=L.dist(U);if(at>2*M){let Je=L.add(U.sub(L)._mult(M/at)._round());this.updateDistance(L,Je),this.addCurrentVertex(Je,J,0,0,R),L=Je}}}}addCurrentVertex(i,s,h,p,g,y=!1){let x=s.y*p-s.x,q=-s.y-s.x*p;this.addHalfVertex(i,s.x+s.y*h,s.y-s.x*h,y,!1,h,g),this.addHalfVertex(i,x,q,y,!0,-p,g),this.distance>LD/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,s,h,p,g,y))}addHalfVertex({x:i,y:s},h,p,g,y,x,q){let P=.5*(this.lineClips?this.scaledDistance*(LD-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(g?1:0),(s<<1)+(y?1:0),Math.round(63*h)+128,Math.round(63*p)+128,1+(x===0?0:x<0?-1:1)|(63&P)<<2,P>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);let M=q.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),q.primitiveLength++),y?this.e2=M:this.e1=M}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,s){this.distance+=i.dist(s),this.updateScaledDistance()}}let zD,FD;Ye("LineBucket",nS,{omit:["layers","patternFeatures"]});var ND={get paint(){return FD=FD||new v({"line-opacity":new ft(Se.paint_line["line-opacity"]),"line-color":new ft(Se.paint_line["line-color"]),"line-translate":new tt(Se.paint_line["line-translate"]),"line-translate-anchor":new tt(Se.paint_line["line-translate-anchor"]),"line-width":new ft(Se.paint_line["line-width"]),"line-gap-width":new ft(Se.paint_line["line-gap-width"]),"line-offset":new ft(Se.paint_line["line-offset"]),"line-blur":new ft(Se.paint_line["line-blur"]),"line-dasharray":new Lh(Se.paint_line["line-dasharray"]),"line-pattern":new Dh(Se.paint_line["line-pattern"]),"line-gradient":new Dp(Se.paint_line["line-gradient"])})},get layout(){return zD=zD||new v({"line-cap":new tt(Se.layout_line["line-cap"]),"line-join":new ft(Se.layout_line["line-join"]),"line-miter-limit":new tt(Se.layout_line["line-miter-limit"]),"line-round-limit":new tt(Se.layout_line["line-round-limit"]),"line-sort-key":new ft(Se.layout_line["line-sort-key"])})}};class Lfe extends ft{possiblyEvaluate(i,s){return s=new ur(Math.floor(s.zoom),{now:s.now,fadeDuration:s.fadeDuration,zoomHistory:s.zoomHistory,transition:s.transition}),super.possiblyEvaluate(i,s)}evaluate(i,s,h,p){return s=et({},s,{zoom:Math.floor(s.zoom)}),super.evaluate(i,s,h,p)}}let i_;class zfe extends c{constructor(i){super(i,ND),this.gradientVersion=0,i_||(i_=new Lfe(ND.paint.properties["line-width"].specification),i_.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){let s=this.gradientExpression();this.stepInterpolant=!!function(h){return h._styleExpression!==void 0}(s)&&s._styleExpression.expression instanceof iu,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,s){super.recalculate(i,s),this.paint._values["line-floorwidth"]=i_.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new nS(i)}queryRadius(i){let s=i,h=BD(Fp("line-width",this,s),Fp("line-gap-width",this,s)),p=Fp("line-offset",this,s);return h/2+Math.abs(p)+Yy(this.paint.get("line-translate"))}queryIntersectsFeature(i,s,h,p,g,y,x){let q=Jy(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),y.angle,x),P=x/2*BD(this.paint.get("line-width").evaluate(s,h),this.paint.get("line-gap-width").evaluate(s,h)),M=this.paint.get("line-offset").evaluate(s,h);return M&&(p=function(R,L){let B=[];for(let U=0;U<R.length;U++){let G=R[U],J=[];for(let ie=0;ie<G.length;ie++){let ve=G[ie-1],le=G[ie],pe=G[ie+1],qe=ie===0?new T(0,0):le.sub(ve)._unit()._perp(),Ce=ie===G.length-1?new T(0,0):pe.sub(le)._unit()._perp(),We=qe._add(Ce)._unit(),ct=We.x*Ce.x+We.y*Ce.y;ct!==0&&We._mult(1/ct),J.push(We._mult(L)._add(le))}B.push(J)}return B}(p,M*x)),function(R,L,B){for(let U=0;U<L.length;U++){let G=L[U];if(R.length>=3){for(let J=0;J<G.length;J++)if($h(R,G[J]))return!0}if(Hhe(R,G,B))return!0}return!1}(q,p,P)}isTileClipped(){return!0}}function BD(a,i){return i>0?i+2*a:a}let Ffe=w([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Nfe=w([{name:"a_projected_pos",components:3,type:"Float32"}],4);w([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);let Bfe=w([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);w([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);let jD=w([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),jfe=w([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ufe(a,i,s){return a.sections.forEach(h=>{h.text=function(p,g,y){let x=g.layout.get("text-transform").evaluate(y,{});return x==="uppercase"?p=p.toLocaleUpperCase():x==="lowercase"&&(p=p.toLocaleLowerCase()),cn.applyArabicShaping&&(p=cn.applyArabicShaping(p)),p}(h.text,i,s)}),a}w([{name:"triangle",components:3,type:"Uint16"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),w([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),w([{type:"Float32",name:"offsetX"}]),w([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),w([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);let Hp={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};var Gr=24,UD=Qt,$D=function(a,i,s,h,p){var g,y,x=8*p-h-1,q=(1<<x)-1,P=q>>1,M=-7,R=s?p-1:0,L=s?-1:1,B=a[i+R];for(R+=L,g=B&(1<<-M)-1,B>>=-M,M+=x;M>0;g=256*g+a[i+R],R+=L,M-=8);for(y=g&(1<<-M)-1,g>>=-M,M+=h;M>0;y=256*y+a[i+R],R+=L,M-=8);if(g===0)g=1-P;else{if(g===q)return y?NaN:1/0*(B?-1:1);y+=Math.pow(2,h),g-=P}return(B?-1:1)*y*Math.pow(2,g-h)},VD=function(a,i,s,h,p,g){var y,x,q,P=8*g-p-1,M=(1<<P)-1,R=M>>1,L=p===23?Math.pow(2,-24)-Math.pow(2,-77):0,B=h?0:g-1,U=h?1:-1,G=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(x=isNaN(i)?1:0,y=M):(y=Math.floor(Math.log(i)/Math.LN2),i*(q=Math.pow(2,-y))<1&&(y--,q*=2),(i+=y+R>=1?L/q:L*Math.pow(2,1-R))*q>=2&&(y++,q/=2),y+R>=M?(x=0,y=M):y+R>=1?(x=(i*q-1)*Math.pow(2,p),y+=R):(x=i*Math.pow(2,R-1)*Math.pow(2,p),y=0));p>=8;a[s+B]=255&x,B+=U,x/=256,p-=8);for(y=y<<p|x,P+=p;P>0;a[s+B]=255&y,B+=U,y/=256,P-=8);a[s+B-U]|=128*G};function Qt(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}Qt.Varint=0,Qt.Fixed64=1,Qt.Bytes=2,Qt.Fixed32=5;var aS=4294967296,GD=1/aS,HD=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8");function ys(a){return a.type===Qt.Bytes?a.readVarint()+a.pos:a.pos+1}function Wh(a,i,s){return s?4294967296*i+(a>>>0):4294967296*(i>>>0)+(a>>>0)}function WD(a,i,s){var h=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));s.realloc(h);for(var p=s.pos-1;p>=a;p--)s.buf[p+h]=s.buf[p]}function $fe(a,i){for(var s=0;s<a.length;s++)i.writeVarint(a[s])}function Vfe(a,i){for(var s=0;s<a.length;s++)i.writeSVarint(a[s])}function Gfe(a,i){for(var s=0;s<a.length;s++)i.writeFloat(a[s])}function Hfe(a,i){for(var s=0;s<a.length;s++)i.writeDouble(a[s])}function Wfe(a,i){for(var s=0;s<a.length;s++)i.writeBoolean(a[s])}function Zfe(a,i){for(var s=0;s<a.length;s++)i.writeFixed32(a[s])}function Kfe(a,i){for(var s=0;s<a.length;s++)i.writeSFixed32(a[s])}function Xfe(a,i){for(var s=0;s<a.length;s++)i.writeFixed64(a[s])}function Yfe(a,i){for(var s=0;s<a.length;s++)i.writeSFixed64(a[s])}function n_(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+16777216*a[i+3]}function Zh(a,i,s){a[s]=i,a[s+1]=i>>>8,a[s+2]=i>>>16,a[s+3]=i>>>24}function ZD(a,i){return(a[i]|a[i+1]<<8|a[i+2]<<16)+(a[i+3]<<24)}Qt.prototype={destroy:function(){this.buf=null},readFields:function(a,i,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),p=h>>3,g=this.pos;this.type=7&h,a(p,i,this),this.pos===g&&this.skip(h)}return i},readMessage:function(a,i){return this.readFields(a,i,this.readVarint()+this.pos)},readFixed32:function(){var a=n_(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=ZD(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=n_(this.buf,this.pos)+n_(this.buf,this.pos+4)*aS;return this.pos+=8,a},readSFixed64:function(){var a=n_(this.buf,this.pos)+ZD(this.buf,this.pos+4)*aS;return this.pos+=8,a},readFloat:function(){var a=$D(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=$D(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var i,s,h=this.buf;return i=127&(s=h[this.pos++]),s<128?i:(i|=(127&(s=h[this.pos++]))<<7,s<128?i:(i|=(127&(s=h[this.pos++]))<<14,s<128?i:(i|=(127&(s=h[this.pos++]))<<21,s<128?i:function(p,g,y){var x,q,P=y.buf;if(x=(112&(q=P[y.pos++]))>>4,q<128||(x|=(127&(q=P[y.pos++]))<<3,q<128)||(x|=(127&(q=P[y.pos++]))<<10,q<128)||(x|=(127&(q=P[y.pos++]))<<17,q<128)||(x|=(127&(q=P[y.pos++]))<<24,q<128)||(x|=(1&(q=P[y.pos++]))<<31,q<128))return Wh(p,x,g);throw new Error("Expected varint not more than 10 bytes")}(i|=(15&(s=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,i=this.pos;return this.pos=a,a-i>=12&&HD?function(s,h,p){return HD.decode(s.subarray(h,p))}(this.buf,i,a):function(s,h,p){for(var g="",y=h;y<p;){var x,q,P,M=s[y],R=null,L=M>239?4:M>223?3:M>191?2:1;if(y+L>p)break;L===1?M<128&&(R=M):L===2?(192&(x=s[y+1]))==128&&(R=(31&M)<<6|63&x)<=127&&(R=null):L===3?(q=s[y+2],(192&(x=s[y+1]))==128&&(192&q)==128&&((R=(15&M)<<12|(63&x)<<6|63&q)<=2047||R>=55296&&R<=57343)&&(R=null)):L===4&&(q=s[y+2],P=s[y+3],(192&(x=s[y+1]))==128&&(192&q)==128&&(192&P)==128&&((R=(15&M)<<18|(63&x)<<12|(63&q)<<6|63&P)<=65535||R>=1114112)&&(R=null)),R===null?(R=65533,L=1):R>65535&&(R-=65536,g+=String.fromCharCode(R>>>10&1023|55296),R=56320|1023&R),g+=String.fromCharCode(R),y+=L}return g}(this.buf,i,a)},readBytes:function(){var a=this.readVarint()+this.pos,i=this.buf.subarray(this.pos,a);return this.pos=a,i},readPackedVarint:function(a,i){if(this.type!==Qt.Bytes)return a.push(this.readVarint(i));var s=ys(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(i));return a},readPackedSVarint:function(a){if(this.type!==Qt.Bytes)return a.push(this.readSVarint());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==Qt.Bytes)return a.push(this.readBoolean());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==Qt.Bytes)return a.push(this.readFloat());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==Qt.Bytes)return a.push(this.readDouble());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==Qt.Bytes)return a.push(this.readFixed32());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==Qt.Bytes)return a.push(this.readSFixed32());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==Qt.Bytes)return a.push(this.readFixed64());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==Qt.Bytes)return a.push(this.readSFixed64());var i=ys(this);for(a=a||[];this.pos<i;)a.push(this.readSFixed64());return a},skip:function(a){var i=7&a;if(i===Qt.Varint)for(;this.buf[this.pos++]>127;);else if(i===Qt.Bytes)this.pos=this.readVarint()+this.pos;else if(i===Qt.Fixed32)this.pos+=4;else{if(i!==Qt.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(a,i){this.writeVarint(a<<3|i)},realloc:function(a){for(var i=this.length||16;i<this.pos+a;)i*=2;if(i!==this.length){var s=new Uint8Array(i);s.set(this.buf),this.buf=s,this.length=i}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),Zh(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),Zh(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),Zh(this.buf,-1&a,this.pos),Zh(this.buf,Math.floor(a*GD),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),Zh(this.buf,-1&a,this.pos),Zh(this.buf,Math.floor(a*GD),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(i,s){var h,p;if(i>=0?(h=i%4294967296|0,p=i/4294967296|0):(p=~(-i/4294967296),4294967295^(h=~(-i%4294967296))?h=h+1|0:(h=0,p=p+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(g,y,x){x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,g>>>=7,x.buf[x.pos++]=127&g|128,x.buf[x.pos]=127&(g>>>=7)}(h,0,s),function(g,y){var x=(7&g)<<4;y.buf[y.pos++]|=x|((g>>>=3)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g|((g>>>=7)?128:0),g&&(y.buf[y.pos++]=127&g)))))}(p,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var i=this.pos;this.pos=function(h,p,g){for(var y,x,q=0;q<p.length;q++){if((y=p.charCodeAt(q))>55295&&y<57344){if(!x){y>56319||q+1===p.length?(h[g++]=239,h[g++]=191,h[g++]=189):x=y;continue}if(y<56320){h[g++]=239,h[g++]=191,h[g++]=189,x=y;continue}y=x-55296<<10|y-56320|65536,x=null}else x&&(h[g++]=239,h[g++]=191,h[g++]=189,x=null);y<128?h[g++]=y:(y<2048?h[g++]=y>>6|192:(y<65536?h[g++]=y>>12|224:(h[g++]=y>>18|240,h[g++]=y>>12&63|128),h[g++]=y>>6&63|128),h[g++]=63&y|128)}return g}(this.buf,a,this.pos);var s=this.pos-i;s>=128&&WD(i,s,this),this.pos=i-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),VD(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),VD(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var i=a.length;this.writeVarint(i),this.realloc(i);for(var s=0;s<i;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,i){this.pos++;var s=this.pos;a(i,this);var h=this.pos-s;h>=128&&WD(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,i,s){this.writeTag(a,Qt.Bytes),this.writeRawMessage(i,s)},writePackedVarint:function(a,i){i.length&&this.writeMessage(a,$fe,i)},writePackedSVarint:function(a,i){i.length&&this.writeMessage(a,Vfe,i)},writePackedBoolean:function(a,i){i.length&&this.writeMessage(a,Wfe,i)},writePackedFloat:function(a,i){i.length&&this.writeMessage(a,Gfe,i)},writePackedDouble:function(a,i){i.length&&this.writeMessage(a,Hfe,i)},writePackedFixed32:function(a,i){i.length&&this.writeMessage(a,Zfe,i)},writePackedSFixed32:function(a,i){i.length&&this.writeMessage(a,Kfe,i)},writePackedFixed64:function(a,i){i.length&&this.writeMessage(a,Xfe,i)},writePackedSFixed64:function(a,i){i.length&&this.writeMessage(a,Yfe,i)},writeBytesField:function(a,i){this.writeTag(a,Qt.Bytes),this.writeBytes(i)},writeFixed32Field:function(a,i){this.writeTag(a,Qt.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(a,i){this.writeTag(a,Qt.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(a,i){this.writeTag(a,Qt.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(a,i){this.writeTag(a,Qt.Fixed64),this.writeSFixed64(i)},writeVarintField:function(a,i){this.writeTag(a,Qt.Varint),this.writeVarint(i)},writeSVarintField:function(a,i){this.writeTag(a,Qt.Varint),this.writeSVarint(i)},writeStringField:function(a,i){this.writeTag(a,Qt.Bytes),this.writeString(i)},writeFloatField:function(a,i){this.writeTag(a,Qt.Fixed32),this.writeFloat(i)},writeDoubleField:function(a,i){this.writeTag(a,Qt.Fixed64),this.writeDouble(i)},writeBooleanField:function(a,i){this.writeVarintField(a,!!i)}};var oS=_(UD);let sS=3;function Jfe(a,i,s){a===1&&s.readMessage(Qfe,i)}function Qfe(a,i,s){if(a===3){let{id:h,bitmap:p,width:g,height:y,left:x,top:q,advance:P}=s.readMessage(ede,{});i.push({id:h,bitmap:new Bp({width:g+2*sS,height:y+2*sS},p),metrics:{width:g,height:y,left:x,top:q,advance:P}})}}function ede(a,i,s){a===1?i.id=s.readVarint():a===2?i.bitmap=s.readBytes():a===3?i.width=s.readVarint():a===4?i.height=s.readVarint():a===5?i.left=s.readSVarint():a===6?i.top=s.readSVarint():a===7&&(i.advance=s.readVarint())}let KD=sS;function XD(a){let i=0,s=0;for(let y of a)i+=y.w*y.h,s=Math.max(s,y.w);a.sort((y,x)=>x.h-y.h);let h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),s),h:1/0}],p=0,g=0;for(let y of a)for(let x=h.length-1;x>=0;x--){let q=h[x];if(!(y.w>q.w||y.h>q.h)){if(y.x=q.x,y.y=q.y,g=Math.max(g,y.y+y.h),p=Math.max(p,y.x+y.w),y.w===q.w&&y.h===q.h){let P=h.pop();x<h.length&&(h[x]=P)}else y.h===q.h?(q.x+=y.w,q.w-=y.w):y.w===q.w?(q.y+=y.h,q.h-=y.h):(h.push({x:q.x+y.w,y:q.y,w:q.w-y.w,h:y.h}),q.y+=y.h,q.h-=y.h);break}}return{w:p,h:g,fill:i/(p*g)||0}}let fn=1;class uS{constructor(i,{pixelRatio:s,version:h,stretchX:p,stretchY:g,content:y,textFitWidth:x,textFitHeight:q}){this.paddedRect=i,this.pixelRatio=s,this.stretchX=p,this.stretchY=g,this.content=y,this.version=h,this.textFitWidth=x,this.textFitHeight=q}get tl(){return[this.paddedRect.x+fn,this.paddedRect.y+fn]}get br(){return[this.paddedRect.x+this.paddedRect.w-fn,this.paddedRect.y+this.paddedRect.h-fn]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*fn)/this.pixelRatio,(this.paddedRect.h-2*fn)/this.pixelRatio]}}class YD{constructor(i,s){let h={},p={};this.haveRenderCallbacks=[];let g=[];this.addImages(i,h,g),this.addImages(s,p,g);let{w:y,h:x}=XD(g),q=new ta({width:y||1,height:x||1});for(let P in i){let M=i[P],R=h[P].paddedRect;ta.copy(M.data,q,{x:0,y:0},{x:R.x+fn,y:R.y+fn},M.data)}for(let P in s){let M=s[P],R=p[P].paddedRect,L=R.x+fn,B=R.y+fn,U=M.data.width,G=M.data.height;ta.copy(M.data,q,{x:0,y:0},{x:L,y:B},M.data),ta.copy(M.data,q,{x:0,y:G-1},{x:L,y:B-1},{width:U,height:1}),ta.copy(M.data,q,{x:0,y:0},{x:L,y:B+G},{width:U,height:1}),ta.copy(M.data,q,{x:U-1,y:0},{x:L-1,y:B},{width:1,height:G}),ta.copy(M.data,q,{x:0,y:0},{x:L+U,y:B},{width:1,height:G})}this.image=q,this.iconPositions=h,this.patternPositions=p}addImages(i,s,h){for(let p in i){let g=i[p],y={x:0,y:0,w:g.data.width+2*fn,h:g.data.height+2*fn};h.push(y),s[p]=new uS(y,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(p)}}patchUpdatedImages(i,s){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(let h in i.updatedImages)this.patchUpdatedImage(this.iconPositions[h],i.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],i.getImage(h),s)}patchUpdatedImage(i,s,h){if(!i||!s||i.version===s.version)return;i.version=s.version;let[p,g]=i.tl;h.update(s.data,void 0,{x:p,y:g})}}var Pu;Ye("ImagePosition",uS),Ye("ImageAtlas",YD),l.ah=void 0,(Pu=l.ah||(l.ah={}))[Pu.none=0]="none",Pu[Pu.horizontal=1]="horizontal",Pu[Pu.vertical=2]="vertical",Pu[Pu.horizontalOnly=3]="horizontalOnly";let Wp=-17;class Zp{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(i,s){let h=new Zp;return h.scale=i||1,h.fontStack=s,h}static forImage(i){let s=new Zp;return s.imageName=i,s}}class Kh{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(i,s){let h=new Kh;for(let p=0;p<i.sections.length;p++){let g=i.sections[p];g.image?h.addImageSection(g):h.addTextSection(g,s)}return h}length(){return this.text.length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}getCharCode(i){return this.text.charCodeAt(i)}verticalizePunctuation(){this.text=function(i){let s="";for(let h=0;h<i.length;h++){let p=i.charCodeAt(h+1)||null,g=i.charCodeAt(h-1)||null;s+=p&&Vy(p)&&!Hp[i[h+1]]||g&&Vy(g)&&!Hp[i[h-1]]||!Hp[i[h]]?i[h]:Hp[i[h]]}return s}(this.text)}trim(){let i=0;for(let h=0;h<this.text.length&&o_[this.text.charCodeAt(h)];h++)i++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=i&&o_[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(i,s),this.sectionIndex=this.sectionIndex.slice(i,s)}substring(i,s){let h=new Kh;return h.text=this.text.substring(i,s),h.sectionIndex=this.sectionIndex.slice(i,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((i,s)=>Math.max(i,this.sections[s].scale),0)}addTextSection(i,s){this.text+=i.text,this.sections.push(Zp.forText(i.scale,i.fontStack||s));let h=this.sections.length-1;for(let p=0;p<i.text.length;++p)this.sectionIndex.push(h)}addImageSection(i){let s=i.image?i.image.name:"";if(s.length===0)return void Wr("Can't add FormattedSection with an empty image.");let h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(Zp.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Wr("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function a_(a,i,s,h,p,g,y,x,q,P,M,R,L,B,U){let G=Kh.fromFeature(a,p),J;R===l.ah.vertical&&G.verticalizePunctuation();let{processBidirectionalText:ie,processStyledBidirectionalText:ve}=cn;if(ie&&G.sections.length===1){J=[];let qe=ie(G.toString(),lS(G,P,g,i,h,B));for(let Ce of qe){let We=new Kh;We.text=Ce,We.sections=G.sections;for(let ct=0;ct<Ce.length;ct++)We.sectionIndex.push(0);J.push(We)}}else if(ve){J=[];let qe=ve(G.text,G.sectionIndex,lS(G,P,g,i,h,B));for(let Ce of qe){let We=new Kh;We.text=Ce[0],We.sectionIndex=Ce[1],We.sections=G.sections,J.push(We)}}else J=function(qe,Ce){let We=[],ct=qe.text,Ve=0;for(let Be of Ce)We.push(qe.substring(Ve,Be)),Ve=Be;return Ve<ct.length&&We.push(qe.substring(Ve,ct.length)),We}(G,lS(G,P,g,i,h,B));let le=[],pe={positionedLines:le,text:G.toString(),top:M[1],bottom:M[1],left:M[0],right:M[0],writingMode:R,iconsInText:!1,verticalizable:!1};return function(qe,Ce,We,ct,Ve,Be,at,Je,Xe,Ee,ot,it){let vt=0,rr=Wp,er=0,Kr=0,Sa=Je==="right"?1:Je==="left"?0:.5,pi=0;for(let Ar of Ve){Ar.trim();let Yr=Ar.getMaxScale(),Ti=(Yr-1)*Gr,mi={positionedGlyphs:[],lineOffset:0};qe.positionedLines[pi]=mi;let Ki=mi.positionedGlyphs,vi=0;if(!Ar.length()){rr+=Be,++pi;continue}for(let dn=0;dn<Ar.length();dn++){let $t=Ar.getSection(dn),ar=Ar.getSectionIndex(dn),fr=Ar.getCharCode(dn),Pn=0,wr=null,Qh=null,Po=null,Co=Gr,qa=!(Xe===l.ah.horizontal||!ot&&!Rp(fr)||ot&&(o_[fr]||(Xr=fr,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(Xr)))));if($t.imageName){let na=ct[$t.imageName];if(!na)continue;Po=$t.imageName,qe.iconsInText=qe.iconsInText||!0,Qh=na.paddedRect;let ni=na.displaySize;$t.scale=$t.scale*Gr/it,wr={width:ni[0],height:ni[1],left:fn,top:-KD,advance:qa?ni[1]:ni[0]},Pn=Ti+(Gr-ni[1]*$t.scale),Co=wr.advance;let _s=qa?ni[0]*$t.scale-Gr*Yr:ni[1]*$t.scale-Gr*Yr;_s>0&&_s>vi&&(vi=_s)}else{let na=We[$t.fontStack],ni=na&&na[fr];if(ni&&ni.rect)Qh=ni.rect,wr=ni.metrics;else{let _s=Ce[$t.fontStack],em=_s&&_s[fr];if(!em)continue;wr=em.metrics}Pn=(Yr-$t.scale)*Gr}qa?(qe.verticalizable=!0,Ki.push({glyph:fr,imageName:Po,x:vt,y:rr+Pn,vertical:qa,scale:$t.scale,fontStack:$t.fontStack,sectionIndex:ar,metrics:wr,rect:Qh}),vt+=Co*$t.scale+Ee):(Ki.push({glyph:fr,imageName:Po,x:vt,y:rr+Pn,vertical:qa,scale:$t.scale,fontStack:$t.fontStack,sectionIndex:ar,metrics:wr,rect:Qh}),vt+=wr.advance*$t.scale+Ee)}Ki.length!==0&&(er=Math.max(vt-Ee,er),nde(Ki,0,Ki.length-1,Sa,vi)),vt=0;let ia=Be*Yr+vi;mi.lineOffset=Math.max(vi,Ti),rr+=ia,Kr=Math.max(ia,Kr),++pi}var Xr;let Hi=rr-Wp,{horizontalAlign:Wi,verticalAlign:Zi}=cS(at);(function(Ar,Yr,Ti,mi,Ki,vi,ia,dn,$t){let ar=(Yr-Ti)*Ki,fr=0;fr=vi!==ia?-dn*mi-Wp:(-mi*$t+.5)*ia;for(let Pn of Ar)for(let wr of Pn.positionedGlyphs)wr.x+=ar,wr.y+=fr})(qe.positionedLines,Sa,Wi,Zi,er,Kr,Be,Hi,Ve.length),qe.top+=-Zi*Hi,qe.bottom=qe.top+Hi,qe.left+=-Wi*er,qe.right=qe.left+er}(pe,i,s,h,J,y,x,q,R,P,L,U),!function(qe){for(let Ce of qe)if(Ce.positionedGlyphs.length!==0)return!1;return!0}(le)&&pe}let o_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tde={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},rde={40:!0};function JD(a,i,s,h,p,g){if(i.imageName){let y=h[i.imageName];return y?y.displaySize[0]*i.scale*Gr/g+p:0}{let y=s[i.fontStack],x=y&&y[a];return x?x.metrics.advance*i.scale+p:0}}function QD(a,i,s,h){let p=Math.pow(a-i,2);return h?a<i?p/2:2*p:p+Math.abs(s)*s}function ide(a,i,s){let h=0;return a===10&&(h-=1e4),s&&(h+=150),a!==40&&a!==65288||(h+=50),i!==41&&i!==65289||(h+=50),h}function eL(a,i,s,h,p,g){let y=null,x=QD(i,s,p,g);for(let q of h){let P=QD(i-q.x,s,p,g)+q.badness;P<=x&&(y=q,x=P)}return{index:a,x:i,priorBreak:y,badness:x}}function tL(a){return a?tL(a.priorBreak).concat(a.index):[]}function lS(a,i,s,h,p,g){if(!a)return[];let y=[],x=function(R,L,B,U,G,J){let ie=0;for(let ve=0;ve<R.length();ve++){let le=R.getSection(ve);ie+=JD(R.getCharCode(ve),le,U,G,L,J)}return ie/Math.max(1,Math.ceil(ie/B))}(a,i,s,h,p,g),q=a.text.indexOf("\u200B")>=0,P=0;for(let R=0;R<a.length();R++){let L=a.getSection(R),B=a.getCharCode(R);if(o_[B]||(P+=JD(B,L,h,p,i,g)),R<a.length()-1){let U=!((M=B)<11904)&&(!!zt["CJK Compatibility Forms"](M)||!!zt["CJK Compatibility"](M)||!!zt["CJK Strokes"](M)||!!zt["CJK Symbols and Punctuation"](M)||!!zt["Enclosed CJK Letters and Months"](M)||!!zt["Halfwidth and Fullwidth Forms"](M)||!!zt["Ideographic Description Characters"](M)||!!zt["Vertical Forms"](M)||$y.test(String.fromCodePoint(M)));(tde[B]||U||L.imageName||R!==a.length()-2&&rde[a.getCharCode(R+1)])&&y.push(eL(R+1,P,x,y,ide(B,a.getCharCode(R+1),U&&q),!1))}}var M;return tL(eL(a.length(),P,x,y,0,!0))}function cS(a){let i=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0;}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0;}return{horizontalAlign:i,verticalAlign:s}}function nde(a,i,s,h,p){if(!h&&!p)return;let g=a[s],y=(a[s].x+g.metrics.advance*g.scale)*h;for(let x=i;x<=s;x++)a[x].x-=y,a[x].y+=p}function ade(a,i,s){let{horizontalAlign:h,verticalAlign:p}=cS(s),g=i[0]-a.displaySize[0]*h,y=i[1]-a.displaySize[1]*p;return{image:a,top:y,bottom:y+a.displaySize[1],left:g,right:g+a.displaySize[0]}}function rL(a){var i,s;let h=a.left,p=a.top,g=a.right-h,y=a.bottom-p,x=(i=a.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",q=(s=a.image.textFitHeight)!==null&&s!==void 0?s:"stretchOrShrink",P=(a.image.content[2]-a.image.content[0])/(a.image.content[3]-a.image.content[1]);if(q==="proportional"){if(x==="stretchOnly"&&g/y<P||x==="proportional"){let M=Math.ceil(y*P);h*=M/g,g=M}}else if(x==="proportional"&&q==="stretchOnly"&&P!==0&&g/y>P){let M=Math.ceil(g/P);p*=M/y,y=M}return{x1:h,y1:p,x2:h+g,y2:p+y}}function iL(a,i,s,h,p,g){let y=a.image,x;if(y.content){let J=y.content,ie=y.pixelRatio||1;x=[J[0]/ie,J[1]/ie,y.displaySize[0]-J[2]/ie,y.displaySize[1]-J[3]/ie]}let q=i.left*g,P=i.right*g,M,R,L,B;s==="width"||s==="both"?(B=p[0]+q-h[3],R=p[0]+P+h[1]):(B=p[0]+(q+P-y.displaySize[0])/2,R=B+y.displaySize[0]);let U=i.top*g,G=i.bottom*g;return s==="height"||s==="both"?(M=p[1]+U-h[0],L=p[1]+G+h[2]):(M=p[1]+(U+G-y.displaySize[1])/2,L=M+y.displaySize[1]),{image:y,top:M,right:R,bottom:L,left:B,collisionPadding:x}}let Kp=255,Ao=128,Cu=Kp*Ao;function nL(a,i){let{expression:s}=i;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new ur(a+1))};if(s.kind==="source")return{kind:"source"};{let{zoomStops:h,interpolationType:p}=s,g=0;for(;g<h.length&&h[g]<=a;)g++;g=Math.max(0,g-1);let y=g;for(;y<h.length&&h[y]<a+1;)y++;y=Math.min(h.length-1,y);let x=h[g],q=h[y];return s.kind==="composite"?{kind:"composite",minZoom:x,maxZoom:q,interpolationType:p}:{kind:"camera",minZoom:x,maxZoom:q,minSize:s.evaluate(new ur(x)),maxSize:s.evaluate(new ur(q)),interpolationType:p}}}function hS(a,i,s){let h="never",p=a.get(i);return p?h=p:a.get(s)&&(h="always"),h}let ode=Au.VectorTileFeature.types,sde=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function s_(a,i,s,h,p,g,y,x,q,P,M,R,L){let B=x?Math.min(Cu,Math.round(x[0])):0,U=x?Math.min(Cu,Math.round(x[1])):0;a.emplaceBack(i,s,Math.round(32*h),Math.round(32*p),g,y,(B<<1)+(q?1:0),U,16*P,16*M,256*R,256*L)}function fS(a,i,s){a.emplaceBack(i.x,i.y,s),a.emplaceBack(i.x,i.y,s),a.emplaceBack(i.x,i.y,s),a.emplaceBack(i.x,i.y,s)}function ude(a){for(let i of a.sections)if(Bw(i.text))return!0;return!1}class dS{constructor(i){this.layoutVertexArray=new Fh,this.indexArray=new ea,this.programConfigurations=i,this.segments=new Ft,this.dynamicLayoutVertexArray=new Lp,this.opacityVertexArray=new Tn,this.hasVisibleVertices=!1,this.placedSymbolArray=new lr}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,s,h,p){this.isEmpty()||(h&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Ffe.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,Nfe.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,sde,!0),this.opacityVertexBuffer.itemSize=1),(h||p)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ye("SymbolBuffers",dS);class pS{constructor(i,s,h){this.layoutVertexArray=new i,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Ft,this.collisionVertexArray=new Eo}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,Bfe.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ye("CollisionBuffers",pS);class Xh{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map(y=>y.id),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ww([]),this.placementViewportMatrix=Ww([]);let s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nL(this.zoom,s["text-size"]),this.iconSizeData=nL(this.zoom,s["icon-size"]);let h=this.layers[0].layout,p=h.get("symbol-sort-key"),g=h.get("symbol-z-order");this.canOverlap=hS(h,"text-overlap","text-allow-overlap")!=="never"||hS(h,"icon-overlap","icon-allow-overlap")!=="never"||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&!p.isConstant(),this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,h.get("symbol-placement")==="point"&&(this.writingModes=h.get("text-writing-mode").map(y=>l.ah[y])),this.stateDependentLayerIds=this.layers.filter(y=>y.isStateDependent()).map(y=>y.id),this.sourceID=i.sourceID}createArrays(){this.text=new dS(new nc(this.layers,this.zoom,i=>/^text/.test(i))),this.icon=new dS(new nc(this.layers,this.zoom,i=>/^icon/.test(i))),this.glyphOffsetArray=new cr,this.lineVertexArray=new ci,this.symbolInstances=new Lt,this.textAnchorOffsets=new hr}calculateGlyphDependencies(i,s,h,p,g){for(let y=0;y<i.length;y++)if(s[i.charCodeAt(y)]=!0,(h||p)&&g){let x=Hp[i.charAt(y)];x&&(s[x.charCodeAt(0)]=!0)}}populate(i,s,h){let p=this.layers[0],g=p.layout,y=g.get("text-font"),x=g.get("text-field"),q=g.get("icon-image"),P=(x.value.kind!=="constant"||x.value.value instanceof on&&!x.value.value.isEmpty()||x.value.value.toString().length>0)&&(y.value.kind!=="constant"||y.value.value.length>0),M=q.value.kind!=="constant"||!!q.value.value||Object.keys(q.parameters).length>0,R=g.get("symbol-sort-key");if(this.features=[],!P&&!M)return;let L=s.iconDependencies,B=s.glyphDependencies,U=s.availableImages,G=new ur(this.zoom);for(let{feature:J,id:ie,index:ve,sourceLayerIndex:le}of i){let pe=p._featureFilter.needGeometry,qe=oc(J,pe);if(!p._featureFilter.filter(G,qe,h))continue;let Ce,We;if(pe||(qe.geometry=ac(J)),P){let Ve=p.getValueAndResolveTokens("text-field",qe,h,U),Be=on.factory(Ve),at=this.hasRTLText=this.hasRTLText||ude(Be);(!at||cn.getRTLTextPluginStatus()==="unavailable"||at&&cn.isParsed())&&(Ce=Ufe(Be,p,qe))}if(M){let Ve=p.getValueAndResolveTokens("icon-image",qe,h,U);We=Ve instanceof un?Ve:un.fromString(Ve)}if(!Ce&&!We)continue;let ct=this.sortFeaturesByKey?R.evaluate(qe,{},h):void 0;if(this.features.push({id:ie,text:Ce,icon:We,index:ve,sourceLayerIndex:le,geometry:qe.geometry,properties:J.properties,type:ode[J.type],sortKey:ct}),We&&(L[We.name]=!0),Ce){let Ve=y.evaluate(qe,{},h).join(","),Be=g.get("text-rotation-alignment")!=="viewport"&&g.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(l.ah.vertical)>=0;for(let at of Ce.sections)if(at.image)L[at.image.name]=!0;else{let Je=Mp(Ce.toString()),Xe=at.fontStack||Ve,Ee=B[Xe]=B[Xe]||{};this.calculateGlyphDependencies(at.text,Ee,Be,this.allowVerticalPlacement,Je)}}}g.get("symbol-placement")==="line"&&(this.features=function(J){let ie={},ve={},le=[],pe=0;function qe(Ve){le.push(J[Ve]),pe++}function Ce(Ve,Be,at){let Je=ve[Ve];return delete ve[Ve],ve[Be]=Je,le[Je].geometry[0].pop(),le[Je].geometry[0]=le[Je].geometry[0].concat(at[0]),Je}function We(Ve,Be,at){let Je=ie[Be];return delete ie[Be],ie[Ve]=Je,le[Je].geometry[0].shift(),le[Je].geometry[0]=at[0].concat(le[Je].geometry[0]),Je}function ct(Ve,Be,at){let Je=at?Be[0][Be[0].length-1]:Be[0][0];return`${Ve}:${Je.x}:${Je.y}`}for(let Ve=0;Ve<J.length;Ve++){let Be=J[Ve],at=Be.geometry,Je=Be.text?Be.text.toString():null;if(!Je){qe(Ve);continue}let Xe=ct(Je,at),Ee=ct(Je,at,!0);if(Xe in ve&&Ee in ie&&ve[Xe]!==ie[Ee]){let ot=We(Xe,Ee,at),it=Ce(Xe,Ee,le[ot].geometry);delete ie[Xe],delete ve[Ee],ve[ct(Je,le[it].geometry,!0)]=it,le[ot].geometry=null}else Xe in ve?Ce(Xe,Ee,at):Ee in ie?We(Xe,Ee,at):(qe(Ve),ie[Xe]=pe-1,ve[Ee]=pe-1)}return le.filter(Ve=>Ve.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((J,ie)=>J.sortKey-ie.sortKey)}update(i,s,h){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,s,this.layers,h),this.icon.programConfigurations.updatePaintArrays(i,s,this.layers,h))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,s){let h=this.lineVertexArray.length;if(i.segment!==void 0){let p=i.dist(s[i.segment+1]),g=i.dist(s[i.segment]),y={};for(let x=i.segment+1;x<s.length;x++)y[x]={x:s[x].x,y:s[x].y,tileUnitDistanceFromAnchor:p},x<s.length-1&&(p+=s[x+1].dist(s[x]));for(let x=i.segment||0;x>=0;x--)y[x]={x:s[x].x,y:s[x].y,tileUnitDistanceFromAnchor:g},x>0&&(g+=s[x-1].dist(s[x]));for(let x=0;x<s.length;x++){let q=y[x];this.lineVertexArray.emplaceBack(q.x,q.y,q.tileUnitDistanceFromAnchor)}}return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(i,s,h,p,g,y,x,q,P,M,R,L){let B=i.indexArray,U=i.layoutVertexArray,G=i.segments.prepareSegment(4*s.length,U,B,this.canOverlap?y.sortKey:void 0),J=this.glyphOffsetArray.length,ie=G.vertexLength,ve=this.allowVerticalPlacement&&x===l.ah.vertical?Math.PI/2:0,le=y.text&&y.text.sections;for(let pe=0;pe<s.length;pe++){let{tl:qe,tr:Ce,bl:We,br:ct,tex:Ve,pixelOffsetTL:Be,pixelOffsetBR:at,minFontScaleX:Je,minFontScaleY:Xe,glyphOffset:Ee,isSDF:ot,sectionIndex:it}=s[pe],vt=G.vertexLength,rr=Ee[1];s_(U,q.x,q.y,qe.x,rr+qe.y,Ve.x,Ve.y,h,ot,Be.x,Be.y,Je,Xe),s_(U,q.x,q.y,Ce.x,rr+Ce.y,Ve.x+Ve.w,Ve.y,h,ot,at.x,Be.y,Je,Xe),s_(U,q.x,q.y,We.x,rr+We.y,Ve.x,Ve.y+Ve.h,h,ot,Be.x,at.y,Je,Xe),s_(U,q.x,q.y,ct.x,rr+ct.y,Ve.x+Ve.w,Ve.y+Ve.h,h,ot,at.x,at.y,Je,Xe),fS(i.dynamicLayoutVertexArray,q,ve),B.emplaceBack(vt,vt+1,vt+2),B.emplaceBack(vt+1,vt+2,vt+3),G.vertexLength+=4,G.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Ee[0]),pe!==s.length-1&&it===s[pe+1].sectionIndex||i.programConfigurations.populatePaintArrays(U.length,y,y.index,{},L,le&&le[it])}i.placedSymbolArray.emplaceBack(q.x,q.y,J,this.glyphOffsetArray.length-J,ie,P,M,q.segment,h?h[0]:0,h?h[1]:0,p[0],p[1],x,0,!1,0,R)}_addCollisionDebugVertex(i,s,h,p,g,y){return s.emplaceBack(0,0),i.emplaceBack(h.x,h.y,p,g,Math.round(y.x),Math.round(y.y))}addCollisionDebugVertices(i,s,h,p,g,y,x){let q=g.segments.prepareSegment(4,g.layoutVertexArray,g.indexArray),P=q.vertexLength,M=g.layoutVertexArray,R=g.collisionVertexArray,L=x.anchorX,B=x.anchorY;this._addCollisionDebugVertex(M,R,y,L,B,new T(i,s)),this._addCollisionDebugVertex(M,R,y,L,B,new T(h,s)),this._addCollisionDebugVertex(M,R,y,L,B,new T(h,p)),this._addCollisionDebugVertex(M,R,y,L,B,new T(i,p)),q.vertexLength+=4;let U=g.indexArray;U.emplaceBack(P,P+1),U.emplaceBack(P+1,P+2),U.emplaceBack(P+2,P+3),U.emplaceBack(P+3,P),q.primitiveLength+=4}addDebugCollisionBoxes(i,s,h,p){for(let g=i;g<s;g++){let y=this.collisionBoxArray.get(g);this.addCollisionDebugVertices(y.x1,y.y1,y.x2,y.y2,p?this.textCollisionBox:this.iconCollisionBox,y.anchorPoint,h)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new pS(An,jD.members,ii),this.iconCollisionBox=new pS(An,jD.members,ii);for(let i=0;i<this.symbolInstances.length;i++){let s=this.symbolInstances.get(i);this.addDebugCollisionBoxes(s.textBoxStartIndex,s.textBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,!0),this.addDebugCollisionBoxes(s.iconBoxStartIndex,s.iconBoxEndIndex,s,!1),this.addDebugCollisionBoxes(s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,!1)}}_deserializeCollisionBoxesForSymbol(i,s,h,p,g,y,x,q,P){let M={};for(let R=s;R<h;R++){let L=i.get(R);M.textBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.textFeatureIndex=L.featureIndex;break}for(let R=p;R<g;R++){let L=i.get(R);M.verticalTextBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.verticalTextFeatureIndex=L.featureIndex;break}for(let R=y;R<x;R++){let L=i.get(R);M.iconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.iconFeatureIndex=L.featureIndex;break}for(let R=q;R<P;R++){let L=i.get(R);M.verticalIconBox={x1:L.x1,y1:L.y1,x2:L.x2,y2:L.y2,anchorPointX:L.anchorPointX,anchorPointY:L.anchorPointY},M.verticalIconFeatureIndex=L.featureIndex;break}return M}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){let h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,s){let h=i.placedSymbolArray.get(s),p=h.vertexStartIndex+4*h.numGlyphs;for(let g=h.vertexStartIndex;g<p;g+=4)i.indexArray.emplaceBack(g,g+1,g+2),i.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;let s=Math.sin(i),h=Math.cos(i),p=[],g=[],y=[];for(let x=0;x<this.symbolInstances.length;++x){y.push(x);let q=this.symbolInstances.get(x);p.push(0|Math.round(s*q.anchorX+h*q.anchorY)),g.push(q.featureIndex)}return y.sort((x,q)=>p[x]-p[q]||g[q]-g[x]),y}addToSortKeyRanges(i,s){let h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(let s of this.symbolInstanceIndexes){let h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex),[h.rightJustifiedTextSymbolIndex,h.centerJustifiedTextSymbolIndex,h.leftJustifiedTextSymbolIndex].forEach((p,g,y)=>{p>=0&&y.indexOf(p)===g&&this.addIndicesForPlacedSymbol(this.text,p)}),h.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,h.verticalPlacedTextSymbolIndex),h.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.placedIconSymbolIndex),h.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,h.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let aL,oL;Ye("SymbolBucket",Xh,{omit:["layers","collisionBoxArray","features","compareText"]}),Xh.MAX_GLYPHS=65535,Xh.addDynamicAttributes=fS;var mS={get paint(){return oL=oL||new v({"icon-opacity":new ft(Se.paint_symbol["icon-opacity"]),"icon-color":new ft(Se.paint_symbol["icon-color"]),"icon-halo-color":new ft(Se.paint_symbol["icon-halo-color"]),"icon-halo-width":new ft(Se.paint_symbol["icon-halo-width"]),"icon-halo-blur":new ft(Se.paint_symbol["icon-halo-blur"]),"icon-translate":new tt(Se.paint_symbol["icon-translate"]),"icon-translate-anchor":new tt(Se.paint_symbol["icon-translate-anchor"]),"text-opacity":new ft(Se.paint_symbol["text-opacity"]),"text-color":new ft(Se.paint_symbol["text-color"],{runtimeType:ji,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new ft(Se.paint_symbol["text-halo-color"]),"text-halo-width":new ft(Se.paint_symbol["text-halo-width"]),"text-halo-blur":new ft(Se.paint_symbol["text-halo-blur"]),"text-translate":new tt(Se.paint_symbol["text-translate"]),"text-translate-anchor":new tt(Se.paint_symbol["text-translate-anchor"])})},get layout(){return aL=aL||new v({"symbol-placement":new tt(Se.layout_symbol["symbol-placement"]),"symbol-spacing":new tt(Se.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new tt(Se.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new ft(Se.layout_symbol["symbol-sort-key"]),"symbol-z-order":new tt(Se.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new tt(Se.layout_symbol["icon-allow-overlap"]),"icon-overlap":new tt(Se.layout_symbol["icon-overlap"]),"icon-ignore-placement":new tt(Se.layout_symbol["icon-ignore-placement"]),"icon-optional":new tt(Se.layout_symbol["icon-optional"]),"icon-rotation-alignment":new tt(Se.layout_symbol["icon-rotation-alignment"]),"icon-size":new ft(Se.layout_symbol["icon-size"]),"icon-text-fit":new tt(Se.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new tt(Se.layout_symbol["icon-text-fit-padding"]),"icon-image":new ft(Se.layout_symbol["icon-image"]),"icon-rotate":new ft(Se.layout_symbol["icon-rotate"]),"icon-padding":new ft(Se.layout_symbol["icon-padding"]),"icon-keep-upright":new tt(Se.layout_symbol["icon-keep-upright"]),"icon-offset":new ft(Se.layout_symbol["icon-offset"]),"icon-anchor":new ft(Se.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new tt(Se.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new tt(Se.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new tt(Se.layout_symbol["text-rotation-alignment"]),"text-field":new ft(Se.layout_symbol["text-field"]),"text-font":new ft(Se.layout_symbol["text-font"]),"text-size":new ft(Se.layout_symbol["text-size"]),"text-max-width":new ft(Se.layout_symbol["text-max-width"]),"text-line-height":new tt(Se.layout_symbol["text-line-height"]),"text-letter-spacing":new ft(Se.layout_symbol["text-letter-spacing"]),"text-justify":new ft(Se.layout_symbol["text-justify"]),"text-radial-offset":new ft(Se.layout_symbol["text-radial-offset"]),"text-variable-anchor":new tt(Se.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new ft(Se.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new ft(Se.layout_symbol["text-anchor"]),"text-max-angle":new tt(Se.layout_symbol["text-max-angle"]),"text-writing-mode":new tt(Se.layout_symbol["text-writing-mode"]),"text-rotate":new ft(Se.layout_symbol["text-rotate"]),"text-padding":new tt(Se.layout_symbol["text-padding"]),"text-keep-upright":new tt(Se.layout_symbol["text-keep-upright"]),"text-transform":new ft(Se.layout_symbol["text-transform"]),"text-offset":new ft(Se.layout_symbol["text-offset"]),"text-allow-overlap":new tt(Se.layout_symbol["text-allow-overlap"]),"text-overlap":new tt(Se.layout_symbol["text-overlap"]),"text-ignore-placement":new tt(Se.layout_symbol["text-ignore-placement"]),"text-optional":new tt(Se.layout_symbol["text-optional"])})}};class sL{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:wo,this.defaultValue=i}evaluate(i){if(i.formattedSection){let s=this.defaultValue.property.overrides;if(s&&s.hasOverride(i.formattedSection))return s.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ye("FormatSectionOverride",sL,{omit:["defaultValue"]});class u_ extends c{constructor(i){super(i,mS)}recalculate(i,s){if(super.recalculate(i,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){let h=this.layout.get("text-writing-mode");if(h){let p=[];for(let g of h)p.indexOf(g)<0&&p.push(g);this.layout._values["text-writing-mode"]=p}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,s,h,p){let g=this.layout.get(i).evaluate(s,{},h,p),y=this._unevaluatedLayout._values[i];return y.isDataDriven()||Sh(y.value)||!g?g:function(x,q){return q.replace(/{([^{}]+)}/g,(P,M)=>x&&M in x?String(x[M]):"")}(s.properties,g)}createBucket(i){return new Xh(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(let i of mS.paint.overridableProperties){if(!u_.hasPaintOverride(this.layout,i))continue;let s=this.paint.get(i),h=new sL(s),p=new wh(h,s.property.specification),g=null;g=s.value.kind==="constant"||s.value.kind==="source"?new fu("source",p):new du("composite",p,s.value.zoomStops),this.paint._values[i]=new ba(s.property,g,s.parameters)}}_handleOverridablePaintPropertyUpdate(i,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&u_.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,s){let h=i.get("text-field"),p=mS.paint.properties[s],g=!1,y=x=>{for(let q of x)if(p.overrides&&p.overrides.hasOverride(q))return void(g=!0)};if(h.value.kind==="constant"&&h.value.value instanceof on)y(h.value.value.sections);else if(h.value.kind==="source"){let x=P=>{g||(P instanceof Zn&&Lr(P.value)===Xa?y(P.value.sections):P instanceof dh?y(P.sections):P.eachChild(x))},q=h.value;q._styleExpression&&x(q._styleExpression.expression)}return g}}let uL;var lde={get paint(){return uL=uL||new v({"background-color":new tt(Se.paint_background["background-color"]),"background-pattern":new Lh(Se.paint_background["background-pattern"]),"background-opacity":new tt(Se.paint_background["background-opacity"])})}};class cde extends c{constructor(i){super(i,lde)}}let lL;var hde={get paint(){return lL=lL||new v({"raster-opacity":new tt(Se.paint_raster["raster-opacity"]),"raster-hue-rotate":new tt(Se.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new tt(Se.paint_raster["raster-brightness-min"]),"raster-brightness-max":new tt(Se.paint_raster["raster-brightness-max"]),"raster-saturation":new tt(Se.paint_raster["raster-saturation"]),"raster-contrast":new tt(Se.paint_raster["raster-contrast"]),"raster-resampling":new tt(Se.paint_raster["raster-resampling"]),"raster-fade-duration":new tt(Se.paint_raster["raster-fade-duration"])})}};class fde extends c{constructor(i){super(i,hde)}}class dde extends c{constructor(i){super(i,{}),this.onAdd=s=>{this.implementation.onAdd&&this.implementation.onAdd(s,s.painter.context.gl)},this.onRemove=s=>{this.implementation.onRemove&&this.implementation.onRemove(s,s.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class pde{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}let vS=6371008.8;class Mu{constructor(i,s){if(isNaN(i)||isNaN(s))throw new Error(`Invalid LngLat object: (${i}, ${s})`);if(this.lng=+i,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Mu(be(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){let s=Math.PI/180,h=this.lat*s,p=i.lat*s,g=Math.sin(h)*Math.sin(p)+Math.cos(h)*Math.cos(p)*Math.cos((i.lng-this.lng)*s);return vS*Math.acos(Math.min(g,1))}static convert(i){if(i instanceof Mu)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new Mu(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new Mu(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}let cL=2*Math.PI*vS;function hL(a){return cL*Math.cos(a*Math.PI/180)}function fL(a){return(180+a)/360}function dL(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function pL(a,i){return a/hL(i)}function gS(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}class Xp{constructor(i,s,h=0){this.x=+i,this.y=+s,this.z=+h}static fromLngLat(i,s=0){let h=Mu.convert(i);return new Xp(fL(h.lng),dL(h.lat),pL(s,h.lat))}toLngLat(){return new Mu(360*this.x-180,gS(this.y))}toAltitude(){return this.z*hL(gS(this.y))}meterInMercatorCoordinateUnits(){return 1/cL*(i=gS(this.y),1/Math.cos(i*Math.PI/180));var i}}function mL(a,i,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[a*h-2*Math.PI*6378137/2,i*h-2*Math.PI*6378137/2]}class yS{constructor(i,s,h){if(!function(p,g,y){return!(p<0||p>25||y<0||y>=Math.pow(2,p)||g<0||g>=Math.pow(2,p))}(i,s,h))throw new Error(`x=${s}, y=${h}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=s,this.y=h,this.key=Yp(0,i,i,s,h)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,s,h){let p=(y=this.y,x=this.z,q=mL(256*(g=this.x),256*(y=Math.pow(2,x)-y-1),x),P=mL(256*(g+1),256*(y+1),x),q[0]+","+q[1]+","+P[0]+","+P[1]);var g,y,x,q,P;let M=function(R,L,B){let U,G="";for(let J=R;J>0;J--)U=1<<J-1,G+=(L&U?1:0)+(B&U?2:0);return G}(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(h==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,s>1?"@2x":"").replace(/{quadkey}/g,M).replace(/{bbox-epsg-3857}/g,p)}isChildOf(i){let s=this.z-i.z;return s>0&&i.x===this.x>>s&&i.y===this.y>>s}getTilePoint(i){let s=Math.pow(2,this.z);return new T((i.x*s-this.x)*zr,(i.y*s-this.y)*zr)}toString(){return`${this.z}/${this.x}/${this.y}`}}class vL{constructor(i,s){this.wrap=i,this.canonical=s,this.key=Yp(i,s.z,s.z,s.x,s.y)}}class ra{constructor(i,s,h,p,g){if(i<h)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${h}`);this.overscaledZ=i,this.wrap=s,this.canonical=new yS(h,+p,+g),this.key=Yp(s,i,h,p,g)}clone(){return new ra(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let s=this.canonical.z-i;return i>this.canonical.z?new ra(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new ra(i,this.wrap,i,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(i,s){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);let h=this.canonical.z-i;return i>this.canonical.z?Yp(this.wrap*+s,i,this.canonical.z,this.canonical.x,this.canonical.y):Yp(this.wrap*+s,i,i,this.canonical.x>>h,this.canonical.y>>h)}isChildOf(i){if(i.wrap!==this.wrap)return!1;let s=this.canonical.z-i.canonical.z;return i.overscaledZ===0||i.overscaledZ<this.overscaledZ&&i.canonical.x===this.canonical.x>>s&&i.canonical.y===this.canonical.y>>s}children(i){if(this.overscaledZ>=i)return[new ra(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];let s=this.canonical.z+1,h=2*this.canonical.x,p=2*this.canonical.y;return[new ra(s,this.wrap,s,h,p),new ra(s,this.wrap,s,h+1,p),new ra(s,this.wrap,s,h,p+1),new ra(s,this.wrap,s,h+1,p+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new ra(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new ra(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new vL(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Xp(i.x-this.wrap,i.y))}}function Yp(a,i,s,h,p){(a*=2)<0&&(a=-1*a-1);let g=1<<s;return(g*g*a+g*p+h).toString(36)+s.toString(36)+i.toString(36)}Ye("CanonicalTileID",yS),Ye("OverscaledTileID",ra,{omit:["posMatrix"]});class gL{constructor(i,s,h,p=1,g=1,y=1,x=0){if(this.uid=i,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&!["mapbox","terrarium","custom"].includes(h))return void Wr(`"${h}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=s.height;let q=this.dim=s.height-2;switch(this.data=new Uint32Array(s.data.buffer),h){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=p,this.greenFactor=g,this.blueFactor=y,this.baseShift=x;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4;}for(let P=0;P<q;P++)this.data[this._idx(-1,P)]=this.data[this._idx(0,P)],this.data[this._idx(q,P)]=this.data[this._idx(q-1,P)],this.data[this._idx(P,-1)]=this.data[this._idx(P,0)],this.data[this._idx(P,q)]=this.data[this._idx(P,q-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(q,-1)]=this.data[this._idx(q-1,0)],this.data[this._idx(-1,q)]=this.data[this._idx(0,q-1)],this.data[this._idx(q,q)]=this.data[this._idx(q-1,q-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let P=0;P<q;P++)for(let M=0;M<q;M++){let R=this.get(P,M);R>this.max&&(this.max=R),R<this.min&&(this.min=R)}}get(i,s){let h=new Uint8Array(this.data.buffer),p=4*this._idx(i,s);return this.unpack(h[p],h[p+1],h[p+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,s){if(i<-1||i>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(i+1)}unpack(i,s,h){return i*this.redFactor+s*this.greenFactor+h*this.blueFactor-this.baseShift}getPixels(){return new ta({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,s,h){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let p=s*this.dim,g=s*this.dim+this.dim,y=h*this.dim,x=h*this.dim+this.dim;switch(s){case-1:p=g-1;break;case 1:g=p+1;}switch(h){case-1:y=x-1;break;case 1:x=y+1;}let q=-s*this.dim,P=-h*this.dim;for(let M=y;M<x;M++)for(let R=p;R<g;R++)this.data[this._idx(R,M)]=i.data[this._idx(R+q,M+P)]}}Ye("DEMData",gL);class yL{constructor(i){this._stringToNumber={},this._numberToString=[];for(let s=0;s<i.length;s++){let h=i[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class _L{constructor(i,s,h,p,g){this.type="Feature",this._vectorTileFeature=i,i._z=s,i._x=h,i._y=p,this.properties=i.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(i){this._geometry=i}toJSON(){let i={geometry:this.geometry};for(let s in this)s!=="_geometry"&&s!=="_vectorTileFeature"&&(i[s]=this[s]);return i}}class xL{constructor(i,s){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new gu(zr,16,0),this.grid3D=new gu(zr,16,0),this.featureIndexArray=new Ii,this.promoteId=s}insert(i,s,h,p,g,y){let x=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,p,g);let q=y?this.grid3D:this.grid;for(let P=0;P<s.length;P++){let M=s[P],R=[1/0,1/0,-1/0,-1/0];for(let L=0;L<M.length;L++){let B=M[L];R[0]=Math.min(R[0],B.x),R[1]=Math.min(R[1],B.y),R[2]=Math.max(R[2],B.x),R[3]=Math.max(R[3],B.y)}R[0]<zr&&R[1]<zr&&R[2]>=0&&R[3]>=0&&q.insert(x,R[0],R[1],R[2],R[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Au.VectorTile(new oS(this.rawTileData)).layers,this.sourceLayerCoder=new yL(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(i,s,h,p){this.loadVTLayers();let g=i.params||{},y=zr/i.tileSize/i.scale,x=vp(g.filter),q=i.queryGeometry,P=i.queryPadding*y,M=wL(q),R=this.grid.query(M.minX-P,M.minY-P,M.maxX+P,M.maxY+P),L=wL(i.cameraQueryGeometry),B=this.grid3D.query(L.minX-P,L.minY-P,L.maxX+P,L.maxY+P,(J,ie,ve,le)=>function(pe,qe,Ce,We,ct){for(let Be of pe)if(qe<=Be.x&&Ce<=Be.y&&We>=Be.x&&ct>=Be.y)return!0;let Ve=[new T(qe,Ce),new T(qe,ct),new T(We,ct),new T(We,Ce)];if(pe.length>2){for(let Be of Ve)if($h(pe,Be))return!0}for(let Be=0;Be<pe.length-1;Be++)if(Zhe(pe[Be],pe[Be+1],Ve))return!0;return!1}(i.cameraQueryGeometry,J-P,ie-P,ve+P,le+P));for(let J of B)R.push(J);R.sort(mde);let U={},G;for(let J=0;J<R.length;J++){let ie=R[J];if(ie===G)continue;G=ie;let ve=this.featureIndexArray.get(ie),le=null;this.loadMatchingFeature(U,ve.bucketIndex,ve.sourceLayerIndex,ve.featureIndex,x,g.layers,g.availableImages,s,h,p,(pe,qe,Ce)=>(le||(le=ac(pe)),qe.queryIntersectsFeature(q,pe,Ce,le,this.z,i.transform,y,i.pixelPosMatrix)))}return U}loadMatchingFeature(i,s,h,p,g,y,x,q,P,M,R){let L=this.bucketLayerIDs[s];if(y&&!function(J,ie){for(let ve=0;ve<J.length;ve++)if(ie.indexOf(J[ve])>=0)return!0;return!1}(y,L))return;let B=this.sourceLayerCoder.decode(h),U=this.vtLayers[B].feature(p);if(g.needGeometry){let J=oc(U,!0);if(!g.filter(new ur(this.tileID.overscaledZ),J,this.tileID.canonical))return}else if(!g.filter(new ur(this.tileID.overscaledZ),U))return;let G=this.getId(U,B);for(let J=0;J<L.length;J++){let ie=L[J];if(y&&y.indexOf(ie)<0)continue;let ve=q[ie];if(!ve)continue;let le={};G&&M&&(le=M.getState(ve.sourceLayer||"_geojsonTileLayer",G));let pe=et({},P[ie]);pe.paint=bL(pe.paint,ve.paint,U,le,x),pe.layout=bL(pe.layout,ve.layout,U,le,x);let qe=!R||R(U,ve,le);if(!qe)continue;let Ce=new _L(U,this.z,this.x,this.y,G);Ce.layer=pe;let We=i[ie];We===void 0&&(We=i[ie]=[]),We.push({featureIndex:p,feature:Ce,intersectionZ:qe})}}lookupSymbolFeatures(i,s,h,p,g,y,x,q){let P={};this.loadVTLayers();let M=vp(g);for(let R of i)this.loadMatchingFeature(P,h,p,R,M,y,x,q,s);return P}hasLayer(i){for(let s of this.bucketLayerIDs)for(let h of s)if(i===h)return!0;return!1}getId(i,s){let h=i.id;return this.promoteId&&(h=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[s]],typeof h=="boolean"&&(h=Number(h))),h}}function bL(a,i,s,h,p){return nt(a,(g,y)=>{let x=i instanceof tc?i.get(y):null;return x&&x.evaluate?x.evaluate(s,h,p):x})}function wL(a){let i=1/0,s=1/0,h=-1/0,p=-1/0;for(let g of a)i=Math.min(i,g.x),s=Math.min(s,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return{minX:i,minY:s,maxX:h,maxY:p}}function mde(a,i){return i-a}function SL(a,i,s,h,p){let g=[];for(let y=0;y<a.length;y++){let x=a[y],q;for(let P=0;P<x.length-1;P++){let M=x[P],R=x[P+1];M.x<i&&R.x<i||(M.x<i?M=new T(i,M.y+(i-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x<i&&(R=new T(i,M.y+(i-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y<s&&R.y<s||(M.y<s?M=new T(M.x+(s-M.y)/(R.y-M.y)*(R.x-M.x),s)._round():R.y<s&&(R=new T(M.x+(s-M.y)/(R.y-M.y)*(R.x-M.x),s)._round()),M.x>=h&&R.x>=h||(M.x>=h?M=new T(h,M.y+(h-M.x)/(R.x-M.x)*(R.y-M.y))._round():R.x>=h&&(R=new T(h,M.y+(h-M.x)/(R.x-M.x)*(R.y-M.y))._round()),M.y>=p&&R.y>=p||(M.y>=p?M=new T(M.x+(p-M.y)/(R.y-M.y)*(R.x-M.x),p)._round():R.y>=p&&(R=new T(M.x+(p-M.y)/(R.y-M.y)*(R.x-M.x),p)._round()),q&&M.equals(q[q.length-1])||(q=[M],g.push(q)),q.push(R)))))}}return g}Ye("FeatureIndex",xL,{omit:["rawTileData","sourceLayerCoder"]});class Ou extends T{constructor(i,s,h,p){super(i,s),this.angle=h,p!==void 0&&(this.segment=p)}clone(){return new Ou(this.x,this.y,this.angle,this.segment)}}function qL(a,i,s,h,p){if(i.segment===void 0||s===0)return!0;let g=i,y=i.segment+1,x=0;for(;x>-s/2;){if(y--,y<0)return!1;x-=a[y].dist(g),g=a[y]}x+=a[y].dist(a[y+1]),y++;let q=[],P=0;for(;x<s/2;){let M=a[y],R=a[y+1];if(!R)return!1;let L=a[y-1].angleTo(M)-M.angleTo(R);for(L=Math.abs((L+3*Math.PI)%(2*Math.PI)-Math.PI),q.push({distance:x,angleDelta:L}),P+=L;x-q[0].distance>h;)P-=q.shift().angleDelta;if(P>p)return!1;y++,x+=M.dist(R)}return!0}function IL(a){let i=0;for(let s=0;s<a.length-1;s++)i+=a[s].dist(a[s+1]);return i}function EL(a,i,s){return a?.6*i*s:0}function TL(a,i){return Math.max(a?a.right-a.left:0,i?i.right-i.left:0)}function vde(a,i,s,h,p,g){let y=EL(s,p,g),x=TL(s,h)*g,q=0,P=IL(a)/2;for(let M=0;M<a.length-1;M++){let R=a[M],L=a[M+1],B=R.dist(L);if(q+B>P){let U=(P-q)/B,G=Ui.number(R.x,L.x,U),J=Ui.number(R.y,L.y,U),ie=new Ou(G,J,L.angleTo(R),M);return ie._round(),!y||qL(a,ie,x,y,i)?ie:void 0}q+=B}}function gde(a,i,s,h,p,g,y,x,q){let P=EL(h,g,y),M=TL(h,p),R=M*y,L=a[0].x===0||a[0].x===q||a[0].y===0||a[0].y===q;return i-R<i/4&&(i=R+i/4),AL(a,L?i/2*x%i:(M/2+2*g)*y*x%i,i,P,s,R,L,!1,q)}function AL(a,i,s,h,p,g,y,x,q){let P=g/2,M=IL(a),R=0,L=i-s,B=[];for(let U=0;U<a.length-1;U++){let G=a[U],J=a[U+1],ie=G.dist(J),ve=J.angleTo(G);for(;L+s<R+ie;){L+=s;let le=(L-R)/ie,pe=Ui.number(G.x,J.x,le),qe=Ui.number(G.y,J.y,le);if(pe>=0&&pe<q&&qe>=0&&qe<q&&L-P>=0&&L+P<=M){let Ce=new Ou(pe,qe,ve,U);Ce._round(),h&&!qL(a,Ce,g,h,p)||B.push(Ce)}}R+=ie}return x||B.length||y||(B=AL(a,R/2,s,h,p,g,y,!0,q)),B}Ye("Anchor",Ou);let Yh=fn;function PL(a,i,s,h){let p=[],g=a.image,y=g.pixelRatio,x=g.paddedRect.w-2*Yh,q=g.paddedRect.h-2*Yh,P={x1:a.left,y1:a.top,x2:a.right,y2:a.bottom},M=g.stretchX||[[0,x]],R=g.stretchY||[[0,q]],L=(Ee,ot)=>Ee+ot[1]-ot[0],B=M.reduce(L,0),U=R.reduce(L,0),G=x-B,J=q-U,ie=0,ve=B,le=0,pe=U,qe=0,Ce=G,We=0,ct=J;if(g.content&&h){let Ee=g.content,ot=Ee[2]-Ee[0],it=Ee[3]-Ee[1];(g.textFitWidth||g.textFitHeight)&&(P=rL(a)),ie=l_(M,0,Ee[0]),le=l_(R,0,Ee[1]),ve=l_(M,Ee[0],Ee[2]),pe=l_(R,Ee[1],Ee[3]),qe=Ee[0]-ie,We=Ee[1]-le,Ce=ot-ve,ct=it-pe}let Ve=P.x1,Be=P.y1,at=P.x2-Ve,Je=P.y2-Be,Xe=(Ee,ot,it,vt)=>{let rr=c_(Ee.stretch-ie,ve,at,Ve),er=h_(Ee.fixed-qe,Ce,Ee.stretch,B),Kr=c_(ot.stretch-le,pe,Je,Be),Sa=h_(ot.fixed-We,ct,ot.stretch,U),pi=c_(it.stretch-ie,ve,at,Ve),Xr=h_(it.fixed-qe,Ce,it.stretch,B),Hi=c_(vt.stretch-le,pe,Je,Be),Wi=h_(vt.fixed-We,ct,vt.stretch,U),Zi=new T(rr,Kr),Ar=new T(pi,Kr),Yr=new T(pi,Hi),Ti=new T(rr,Hi),mi=new T(er/y,Sa/y),Ki=new T(Xr/y,Wi/y),vi=i*Math.PI/180;if(vi){let $t=Math.sin(vi),ar=Math.cos(vi),fr=[ar,-$t,$t,ar];Zi._matMult(fr),Ar._matMult(fr),Ti._matMult(fr),Yr._matMult(fr)}let ia=Ee.stretch+Ee.fixed,dn=ot.stretch+ot.fixed;return{tl:Zi,tr:Ar,bl:Ti,br:Yr,tex:{x:g.paddedRect.x+Yh+ia,y:g.paddedRect.y+Yh+dn,w:it.stretch+it.fixed-ia,h:vt.stretch+vt.fixed-dn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:mi,pixelOffsetBR:Ki,minFontScaleX:Ce/y/at,minFontScaleY:ct/y/Je,isSDF:s}};if(h&&(g.stretchX||g.stretchY)){let Ee=CL(M,G,B),ot=CL(R,J,U);for(let it=0;it<Ee.length-1;it++){let vt=Ee[it],rr=Ee[it+1];for(let er=0;er<ot.length-1;er++)p.push(Xe(vt,ot[er],rr,ot[er+1]))}}else p.push(Xe({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:x+1},{fixed:0,stretch:q+1}));return p}function l_(a,i,s){let h=0;for(let p of a)h+=Math.max(i,Math.min(s,p[1]))-Math.max(i,Math.min(s,p[0]));return h}function CL(a,i,s){let h=[{fixed:-Yh,stretch:0}];for(let[p,g]of a){let y=h[h.length-1];h.push({fixed:p-y.stretch,stretch:y.stretch}),h.push({fixed:p-y.stretch,stretch:y.stretch+(g-p)})}return h.push({fixed:i+Yh,stretch:s}),h}function c_(a,i,s,h){return a/i*s+h}function h_(a,i,s,h){return a-i*s/h}class f_{constructor(i,s,h,p,g,y,x,q,P,M){var R;if(this.boxStartIndex=i.length,P){let L=y.top,B=y.bottom,U=y.collisionPadding;U&&(L-=U[1],B+=U[3]);let G=B-L;G>0&&(G=Math.max(10,G),this.circleDiameter=G)}else{let L=!((R=y.image)===null||R===void 0)&&R.content&&(y.image.textFitWidth||y.image.textFitHeight)?rL(y):{x1:y.left,y1:y.top,x2:y.right,y2:y.bottom};L.y1=L.y1*x-q[0],L.y2=L.y2*x+q[2],L.x1=L.x1*x-q[3],L.x2=L.x2*x+q[1];let B=y.collisionPadding;if(B&&(L.x1-=B[0]*x,L.y1-=B[1]*x,L.x2+=B[2]*x,L.y2+=B[3]*x),M){let U=new T(L.x1,L.y1),G=new T(L.x2,L.y1),J=new T(L.x1,L.y2),ie=new T(L.x2,L.y2),ve=M*Math.PI/180;U._rotate(ve),G._rotate(ve),J._rotate(ve),ie._rotate(ve),L.x1=Math.min(U.x,G.x,J.x,ie.x),L.x2=Math.max(U.x,G.x,J.x,ie.x),L.y1=Math.min(U.y,G.y,J.y,ie.y),L.y2=Math.max(U.y,G.y,J.y,ie.y)}i.emplaceBack(s.x,s.y,L.x1,L.y1,L.x2,L.y2,h,p,g)}this.boxEndIndex=i.length}}class yde{constructor(i=[],s=(h,p)=>h<p?-1:h>p?1:0){if(this.data=i,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;let i=this.data[0],s=this.data.pop();return--this.length>0&&(this.data[0]=s,this._down(0)),i}peek(){return this.data[0]}_up(i){let{data:s,compare:h}=this,p=s[i];for(;i>0;){let g=i-1>>1,y=s[g];if(h(p,y)>=0)break;s[i]=y,i=g}s[i]=p}_down(i){let{data:s,compare:h}=this,p=this.length>>1,g=s[i];for(;i<p;){let y=1+(i<<1),x=y+1;if(x<this.length&&h(s[x],s[y])<0&&(y=x),h(s[y],g)>=0)break;s[i]=s[y],i=y}s[i]=g}}function _de(a,i=1,s=!1){let h=1/0,p=1/0,g=-1/0,y=-1/0,x=a[0];for(let B=0;B<x.length;B++){let U=x[B];(!B||U.x<h)&&(h=U.x),(!B||U.y<p)&&(p=U.y),(!B||U.x>g)&&(g=U.x),(!B||U.y>y)&&(y=U.y)}let q=Math.min(g-h,y-p),P=q/2,M=new yde([],xde);if(q===0)return new T(h,p);for(let B=h;B<g;B+=q)for(let U=p;U<y;U+=q)M.push(new Jh(B+P,U+P,P,a));let R=function(B){let U=0,G=0,J=0,ie=B[0];for(let ve=0,le=ie.length,pe=le-1;ve<le;pe=ve++){let qe=ie[ve],Ce=ie[pe],We=qe.x*Ce.y-Ce.x*qe.y;G+=(qe.x+Ce.x)*We,J+=(qe.y+Ce.y)*We,U+=3*We}return new Jh(G/U,J/U,0,B)}(a),L=M.length;for(;M.length;){let B=M.pop();(B.d>R.d||!R.d)&&(R=B,s&&console.log("found best %d after %d probes",Math.round(1e4*B.d)/1e4,L)),B.max-R.d<=i||(P=B.h/2,M.push(new Jh(B.p.x-P,B.p.y-P,P,a)),M.push(new Jh(B.p.x+P,B.p.y-P,P,a)),M.push(new Jh(B.p.x-P,B.p.y+P,P,a)),M.push(new Jh(B.p.x+P,B.p.y+P,P,a)),L+=4)}return s&&(console.log(`num probes: ${L}`),console.log(`best distance: ${R.d}`)),R.p}function xde(a,i){return i.max-a.max}function Jh(a,i,s,h){this.p=new T(a,i),this.h=s,this.d=function(p,g){let y=!1,x=1/0;for(let q=0;q<g.length;q++){let P=g[q];for(let M=0,R=P.length,L=R-1;M<R;L=M++){let B=P[M],U=P[L];B.y>p.y!=U.y>p.y&&p.x<(U.x-B.x)*(p.y-B.y)/(U.y-B.y)+B.x&&(y=!y),x=Math.min(x,dD(p,B,U))}}return(y?1:-1)*Math.sqrt(x)}(this.p,h),this.max=this.d+this.h*Math.SQRT2}var di;l.aq=void 0,(di=l.aq||(l.aq={}))[di.center=1]="center",di[di.left=2]="left",di[di.right=3]="right",di[di.top=4]="top",di[di.bottom=5]="bottom",di[di["top-left"]=6]="top-left",di[di["top-right"]=7]="top-right",di[di["bottom-left"]=8]="bottom-left",di[di["bottom-right"]=9]="bottom-right";let Ru=7,_S=Number.POSITIVE_INFINITY;function ML(a,i){return i[1]!==_S?function(s,h,p){let g=0,y=0;switch(h=Math.abs(h),p=Math.abs(p),s){case"top-right":case"top-left":case"top":y=p-Ru;break;case"bottom-right":case"bottom-left":case"bottom":y=-p+Ru;}switch(s){case"top-right":case"bottom-right":case"right":g=-h;break;case"top-left":case"bottom-left":case"left":g=h;}return[g,y]}(a,i[0],i[1]):function(s,h){let p=0,g=0;h<0&&(h=0);let y=h/Math.SQRT2;switch(s){case"top-right":case"top-left":g=y-Ru;break;case"bottom-right":case"bottom-left":g=-y+Ru;break;case"bottom":g=-h+Ru;break;case"top":g=h-Ru;}switch(s){case"top-right":case"bottom-right":p=-y;break;case"top-left":case"bottom-left":p=y;break;case"left":p=h;break;case"right":p=-h;}return[p,g]}(a,i[0])}function OL(a,i,s){var h;let p=a.layout,g=(h=p.get("text-variable-anchor-offset"))===null||h===void 0?void 0:h.evaluate(i,{},s);if(g){let x=g.values,q=[];for(let P=0;P<x.length;P+=2){let M=q[P]=x[P],R=x[P+1].map(L=>L*Gr);M.startsWith("top")?R[1]-=Ru:M.startsWith("bottom")&&(R[1]+=Ru),q[P+1]=R}return new wn(q)}let y=p.get("text-variable-anchor");if(y){let x;x=a._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[p.get("text-radial-offset").evaluate(i,{},s)*Gr,_S]:p.get("text-offset").evaluate(i,{},s).map(P=>P*Gr);let q=[];for(let P of y)q.push(P,ML(P,x));return new wn(q)}return null}function xS(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left";}return"center"}function bde(a,i,s,h,p,g,y,x,q,P,M){let R=g.textMaxSize.evaluate(i,{});R===void 0&&(R=y);let L=a.layers[0].layout,B=L.get("icon-offset").evaluate(i,{},M),U=kL(s.horizontal),G=y/24,J=a.tilePixelRatio*G,ie=a.tilePixelRatio*R/24,ve=a.tilePixelRatio*x,le=a.tilePixelRatio*L.get("symbol-spacing"),pe=L.get("text-padding")*a.tilePixelRatio,qe=function(Ee,ot,it,vt=1){let rr=Ee.get("icon-padding").evaluate(ot,{},it),er=rr&&rr.values;return[er[0]*vt,er[1]*vt,er[2]*vt,er[3]*vt]}(L,i,M,a.tilePixelRatio),Ce=L.get("text-max-angle")/180*Math.PI,We=L.get("text-rotation-alignment")!=="viewport"&&L.get("symbol-placement")!=="point",ct=L.get("icon-rotation-alignment")==="map"&&L.get("symbol-placement")!=="point",Ve=L.get("symbol-placement"),Be=le/2,at=L.get("icon-text-fit"),Je;h&&at!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(Je=iL(h,s.vertical,at,L.get("icon-text-fit-padding"),B,G)),U&&(h=iL(h,U,at,L.get("icon-text-fit-padding"),B,G)));let Xe=(Ee,ot)=>{ot.x<0||ot.x>=zr||ot.y<0||ot.y>=zr||function(it,vt,rr,er,Kr,Sa,pi,Xr,Hi,Wi,Zi,Ar,Yr,Ti,mi,Ki,vi,ia,dn,$t,ar,fr,Pn,wr,Qh){let Po=it.addToLineVertexArray(vt,rr),Co,qa,na,ni,_s=0,em=0,FL=0,NL=0,AS=-1,PS=-1,xs={},BL=Nh("");if(it.allowVerticalPlacement&&er.vertical){let Ai=Xr.layout.get("text-rotate").evaluate(ar,{},wr)+90;na=new f_(Hi,vt,Wi,Zi,Ar,er.vertical,Yr,Ti,mi,Ai),pi&&(ni=new f_(Hi,vt,Wi,Zi,Ar,pi,vi,ia,mi,Ai))}if(Kr){let Ai=Xr.layout.get("icon-rotate").evaluate(ar,{}),aa=Xr.layout.get("icon-text-fit")!=="none",uc=PL(Kr,Ai,Pn,aa),to=pi?PL(pi,Ai,Pn,aa):void 0;qa=new f_(Hi,vt,Wi,Zi,Ar,Kr,vi,ia,!1,Ai),_s=4*uc.length;let lc=it.iconSizeData,Mo=null;lc.kind==="source"?(Mo=[Ao*Xr.layout.get("icon-size").evaluate(ar,{})],Mo[0]>Cu&&Wr(`${it.layerIds[0]}: Value for "icon-size" is >= ${Kp}. Reduce your "icon-size".`)):lc.kind==="composite"&&(Mo=[Ao*fr.compositeIconSizes[0].evaluate(ar,{},wr),Ao*fr.compositeIconSizes[1].evaluate(ar,{},wr)],(Mo[0]>Cu||Mo[1]>Cu)&&Wr(`${it.layerIds[0]}: Value for "icon-size" is >= ${Kp}. Reduce your "icon-size".`)),it.addSymbols(it.icon,uc,Mo,$t,dn,ar,l.ah.none,vt,Po.lineStartIndex,Po.lineLength,-1,wr),AS=it.icon.placedSymbolArray.length-1,to&&(em=4*to.length,it.addSymbols(it.icon,to,Mo,$t,dn,ar,l.ah.vertical,vt,Po.lineStartIndex,Po.lineLength,-1,wr),PS=it.icon.placedSymbolArray.length-1)}let jL=Object.keys(er.horizontal);for(let Ai of jL){let aa=er.horizontal[Ai];if(!Co){BL=Nh(aa.text);let to=Xr.layout.get("text-rotate").evaluate(ar,{},wr);Co=new f_(Hi,vt,Wi,Zi,Ar,aa,Yr,Ti,mi,to)}let uc=aa.positionedLines.length===1;if(FL+=RL(it,vt,aa,Sa,Xr,mi,ar,Ki,Po,er.vertical?l.ah.horizontal:l.ah.horizontalOnly,uc?jL:[Ai],xs,AS,fr,wr),uc)break}er.vertical&&(NL+=RL(it,vt,er.vertical,Sa,Xr,mi,ar,Ki,Po,l.ah.vertical,["vertical"],xs,PS,fr,wr));let qde=Co?Co.boxStartIndex:it.collisionBoxArray.length,Ide=Co?Co.boxEndIndex:it.collisionBoxArray.length,Ede=na?na.boxStartIndex:it.collisionBoxArray.length,Tde=na?na.boxEndIndex:it.collisionBoxArray.length,Ade=qa?qa.boxStartIndex:it.collisionBoxArray.length,Pde=qa?qa.boxEndIndex:it.collisionBoxArray.length,Cde=ni?ni.boxStartIndex:it.collisionBoxArray.length,Mde=ni?ni.boxEndIndex:it.collisionBoxArray.length,eo=-1,p_=(Ai,aa)=>Ai&&Ai.circleDiameter?Math.max(Ai.circleDiameter,aa):aa;eo=p_(Co,eo),eo=p_(na,eo),eo=p_(qa,eo),eo=p_(ni,eo);let UL=eo>-1?1:0;UL&&(eo*=Qh/Gr),it.glyphOffsetArray.length>=Xh.MAX_GLYPHS&&Wr("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ar.sortKey!==void 0&&it.addToSortKeyRanges(it.symbolInstances.length,ar.sortKey);let Ode=OL(Xr,ar,wr),[Rde,kde]=function(Ai,aa){let uc=Ai.length,to=aa==null?void 0:aa.values;if((to==null?void 0:to.length)>0)for(let lc=0;lc<to.length;lc+=2){let Mo=to[lc+1];Ai.emplaceBack(l.aq[to[lc]],Mo[0],Mo[1])}return[uc,Ai.length]}(it.textAnchorOffsets,Ode);it.symbolInstances.emplaceBack(vt.x,vt.y,xs.right>=0?xs.right:-1,xs.center>=0?xs.center:-1,xs.left>=0?xs.left:-1,xs.vertical||-1,AS,PS,BL,qde,Ide,Ede,Tde,Ade,Pde,Cde,Mde,Wi,FL,NL,_s,em,UL,0,Yr,eo,Rde,kde)}(a,ot,Ee,s,h,p,Je,a.layers[0],a.collisionBoxArray,i.index,i.sourceLayerIndex,a.index,J,[pe,pe,pe,pe],We,q,ve,qe,ct,B,i,g,P,M,y)};if(Ve==="line")for(let Ee of SL(i.geometry,0,0,zr,zr)){let ot=gde(Ee,le,Ce,s.vertical||U,h,24,ie,a.overscaling,zr);for(let it of ot)U&&wde(a,U.text,Be,it)||Xe(Ee,it)}else if(Ve==="line-center"){for(let Ee of i.geometry)if(Ee.length>1){let ot=vde(Ee,Ce,s.vertical||U,h,24,ie);ot&&Xe(Ee,ot)}}else if(i.type==="Polygon")for(let Ee of mh(i.geometry,0)){let ot=_de(Ee,16);Xe(Ee[0],new Ou(ot.x,ot.y,0))}else if(i.type==="LineString")for(let Ee of i.geometry)Xe(Ee,new Ou(Ee[0].x,Ee[0].y,0));else if(i.type==="Point")for(let Ee of i.geometry)for(let ot of Ee)Xe([ot],new Ou(ot.x,ot.y,0))}function RL(a,i,s,h,p,g,y,x,q,P,M,R,L,B,U){let G=function(ve,le,pe,qe,Ce,We,ct,Ve){let Be=qe.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,at=[];for(let Je of le.positionedLines)for(let Xe of Je.positionedGlyphs){if(!Xe.rect)continue;let Ee=Xe.rect||{},ot=KD+1,it=!0,vt=1,rr=0,er=(Ce||Ve)&&Xe.vertical,Kr=Xe.metrics.advance*Xe.scale/2;if(Ve&&le.verticalizable&&(rr=Je.lineOffset/2-(Xe.imageName?-(Gr-Xe.metrics.width*Xe.scale)/2:(Xe.scale-1)*Gr)),Xe.imageName){let $t=ct[Xe.imageName];it=$t.sdf,vt=$t.pixelRatio,ot=fn/vt}let Sa=Ce?[Xe.x+Kr,Xe.y]:[0,0],pi=Ce?[0,0]:[Xe.x+Kr+pe[0],Xe.y+pe[1]-rr],Xr=[0,0];er&&(Xr=pi,pi=[0,0]);let Hi=Xe.metrics.isDoubleResolution?2:1,Wi=(Xe.metrics.left-ot)*Xe.scale-Kr+pi[0],Zi=(-Xe.metrics.top-ot)*Xe.scale+pi[1],Ar=Wi+Ee.w/Hi*Xe.scale/vt,Yr=Zi+Ee.h/Hi*Xe.scale/vt,Ti=new T(Wi,Zi),mi=new T(Ar,Zi),Ki=new T(Wi,Yr),vi=new T(Ar,Yr);if(er){let $t=new T(-Kr,Kr-Wp),ar=-Math.PI/2,fr=Gr/2-Kr,Pn=new T(5-Wp-fr,-(Xe.imageName?fr:0)),wr=new T(...Xr);Ti._rotateAround(ar,$t)._add(Pn)._add(wr),mi._rotateAround(ar,$t)._add(Pn)._add(wr),Ki._rotateAround(ar,$t)._add(Pn)._add(wr),vi._rotateAround(ar,$t)._add(Pn)._add(wr)}if(Be){let $t=Math.sin(Be),ar=Math.cos(Be),fr=[ar,-$t,$t,ar];Ti._matMult(fr),mi._matMult(fr),Ki._matMult(fr),vi._matMult(fr)}let ia=new T(0,0),dn=new T(0,0);at.push({tl:Ti,tr:mi,bl:Ki,br:vi,tex:Ee,writingMode:le.writingMode,glyphOffset:Sa,sectionIndex:Xe.sectionIndex,isSDF:it,pixelOffsetTL:ia,pixelOffsetBR:dn,minFontScaleX:0,minFontScaleY:0})}return at}(0,s,x,p,g,y,h,a.allowVerticalPlacement),J=a.textSizeData,ie=null;J.kind==="source"?(ie=[Ao*p.layout.get("text-size").evaluate(y,{})],ie[0]>Cu&&Wr(`${a.layerIds[0]}: Value for "text-size" is >= ${Kp}. Reduce your "text-size".`)):J.kind==="composite"&&(ie=[Ao*B.compositeTextSizes[0].evaluate(y,{},U),Ao*B.compositeTextSizes[1].evaluate(y,{},U)],(ie[0]>Cu||ie[1]>Cu)&&Wr(`${a.layerIds[0]}: Value for "text-size" is >= ${Kp}. Reduce your "text-size".`)),a.addSymbols(a.text,G,ie,x,g,y,P,i,q.lineStartIndex,q.lineLength,L,U);for(let ve of M)R[ve]=a.text.placedSymbolArray.length-1;return 4*G.length}function kL(a){for(let i in a)return a[i];return null}function wde(a,i,s,h){let p=a.compareText;if(i in p){let g=p[i];for(let y=g.length-1;y>=0;y--)if(h.dist(g[y])<s)return!0}else p[i]=[];return p[i].push(h),!1}let DL=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class bS{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");let[s,h]=new Uint8Array(i,0,2);if(s!==219)throw new Error("Data does not appear to be in a KDBush format.");let p=h>>4;if(p!==1)throw new Error(`Got v${p} data when expected v1.`);let g=DL[15&h];if(!g)throw new Error("Unrecognized array type.");let[y]=new Uint16Array(i,2,1),[x]=new Uint32Array(i,4,1);return new bS(x,y,g,i)}constructor(i,s=64,h=Float64Array,p){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+s,2),65535),this.ArrayType=h,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;let g=DL.indexOf(this.ArrayType),y=2*i*this.ArrayType.BYTES_PER_ELEMENT,x=i*this.IndexArrayType.BYTES_PER_ELEMENT,q=(8-x%8)%8;if(g<0)throw new Error(`Unexpected typed array class: ${h}.`);p&&p instanceof ArrayBuffer?(this.data=p,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+x+q,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+y+x+q),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+x+q,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+g]),new Uint16Array(this.data,2,1)[0]=s,new Uint32Array(this.data,4,1)[0]=i)}add(i,s){let h=this._pos>>1;return this.ids[h]=h,this.coords[this._pos++]=i,this.coords[this._pos++]=s,h}finish(){let i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return wS(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,s,h,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:g,coords:y,nodeSize:x}=this,q=[0,g.length-1,0],P=[];for(;q.length;){let M=q.pop()||0,R=q.pop()||0,L=q.pop()||0;if(R-L<=x){for(let J=L;J<=R;J++){let ie=y[2*J],ve=y[2*J+1];ie>=i&&ie<=h&&ve>=s&&ve<=p&&P.push(g[J])}continue}let B=L+R>>1,U=y[2*B],G=y[2*B+1];U>=i&&U<=h&&G>=s&&G<=p&&P.push(g[B]),(M===0?i<=U:s<=G)&&(q.push(L),q.push(B-1),q.push(1-M)),(M===0?h>=U:p>=G)&&(q.push(B+1),q.push(R),q.push(1-M))}return P}within(i,s,h){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");let{ids:p,coords:g,nodeSize:y}=this,x=[0,p.length-1,0],q=[],P=h*h;for(;x.length;){let M=x.pop()||0,R=x.pop()||0,L=x.pop()||0;if(R-L<=y){for(let J=L;J<=R;J++)zL(g[2*J],g[2*J+1],i,s)<=P&&q.push(p[J]);continue}let B=L+R>>1,U=g[2*B],G=g[2*B+1];zL(U,G,i,s)<=P&&q.push(p[B]),(M===0?i-h<=U:s-h<=G)&&(x.push(L),x.push(B-1),x.push(1-M)),(M===0?i+h>=U:s+h>=G)&&(x.push(B+1),x.push(R),x.push(1-M))}return q}}function wS(a,i,s,h,p,g){if(p-h<=s)return;let y=h+p>>1;LL(a,i,y,h,p,g),wS(a,i,s,h,y-1,1-g),wS(a,i,s,y+1,p,1-g)}function LL(a,i,s,h,p,g){for(;p>h;){if(p-h>600){let P=p-h+1,M=s-h+1,R=Math.log(P),L=.5*Math.exp(2*R/3),B=.5*Math.sqrt(R*L*(P-L)/P)*(M-P/2<0?-1:1);LL(a,i,s,Math.max(h,Math.floor(s-M*L/P+B)),Math.min(p,Math.floor(s+(P-M)*L/P+B)),g)}let y=i[2*s+g],x=h,q=p;for(Jp(a,i,h,s),i[2*p+g]>y&&Jp(a,i,h,p);x<q;){for(Jp(a,i,x,q),x++,q--;i[2*x+g]<y;)x++;for(;i[2*q+g]>y;)q--}i[2*h+g]===y?Jp(a,i,h,q):(q++,Jp(a,i,q,p)),q<=s&&(h=q+1),s<=q&&(p=q-1)}}function Jp(a,i,s,h){SS(a,s,h),SS(i,2*s,2*h),SS(i,2*s+1,2*h+1)}function SS(a,i,s){let h=a[i];a[i]=a[s],a[s]=h}function zL(a,i,s,h){let p=a-s,g=i-h;return p*p+g*g}var qS;l.bg=void 0,(qS=l.bg||(l.bg={})).create="create",qS.load="load",qS.fullLoad="fullLoad";let d_=null,Qp=[],IS=1e3/60,ES="loadTime",TS="fullLoadTime",Sde={mark(a){performance.mark(a)},frame(a){let i=a;d_!=null&&Qp.push(i-d_),d_=i},clearMetrics(){d_=null,Qp=[],performance.clearMeasures(ES),performance.clearMeasures(TS);for(let a in l.bg)performance.clearMarks(l.bg[a])},getPerformanceMetrics(){performance.measure(ES,l.bg.create,l.bg.load),performance.measure(TS,l.bg.create,l.bg.fullLoad);let a=performance.getEntriesByName(ES)[0].duration,i=performance.getEntriesByName(TS)[0].duration,s=Qp.length,h=1/(Qp.reduce((g,y)=>g+y,0)/s/1e3),p=Qp.filter(g=>g>IS).reduce((g,y)=>g+(y-IS)/IS,0);return{loadTime:a,fullLoadTime:i,fps:h,percentDroppedFrames:p/(s+p)*100,totalFrames:s}}};l.$=class extends k{},l.A=Vh,l.B=Dw,l.C=function(a){if(Ks==null){let i=a.navigator?a.navigator.userAgent:null;Ks=!!a.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Ks},l.D=tt,l.E=Js,l.F=class{constructor(a,i){this.target=a,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new pde(()=>this.process()),this.subscription=function(s,h,p,g){return s.addEventListener(h,p,!1),{unsubscribe:()=>{s.removeEventListener(h,p,!1)}}}(this.target,"message",s=>this.receive(s)),this.globalScope=Ha(self)?a:window}registerMessageHandler(a,i){this.messageHandlers[a]=i}sendAsync(a,i){return new Promise((s,h)=>{let p=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[p]={resolve:s,reject:h},i&&i.signal.addEventListener("abort",()=>{delete this.resolveRejects[p];let x={id:p,type:"<cancel>",origin:location.origin,targetMapId:a.targetMapId,sourceMapId:this.mapId};this.target.postMessage(x)},{once:!0});let g=[],y=Object.assign(Object.assign({},a),{id:p,sourceMapId:this.mapId,origin:location.origin,data:yu(a.data,g)});this.target.postMessage(y,{transfer:g})})}receive(a){let i=a.data,s=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[s];let h=this.abortControllers[s];return delete this.abortControllers[s],void(h&&h.abort())}if(Ha(self)||i.mustQueue)return this.tasks[s]=i,this.taskQueue.push(s),void this.invoker.trigger();this.processTask(s,i)}}process(){if(this.taskQueue.length===0)return;let a=this.taskQueue.shift(),i=this.tasks[a];delete this.tasks[a],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(a,i)}processTask(a,i){return o(this,void 0,void 0,function*(){if(i.type==="<response>"){let p=this.resolveRejects[a];return delete this.resolveRejects[a],p?void(i.error?p.reject(_u(i.error)):p.resolve(_u(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(a,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));let s=_u(i.data),h=new AbortController;this.abortControllers[a]=h;try{let p=yield this.messageHandlers[i.type](i.sourceMapId,s,h);this.completeTask(a,null,p)}catch(p){this.completeTask(a,p)}})}completeTask(a,i,s){let h=[];delete this.abortControllers[a];let p={id:a,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?yu(i):null,data:yu(s,h)};this.target.postMessage(p,{transfer:h})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},l.G=Ys,l.H=function(){var a=new Vh(16);return Vh!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},l.I=uS,l.J=function(a,i,s){var h,p,g,y,x,q,P,M,R,L,B,U,G=s[0],J=s[1],ie=s[2];return i===a?(a[12]=i[0]*G+i[4]*J+i[8]*ie+i[12],a[13]=i[1]*G+i[5]*J+i[9]*ie+i[13],a[14]=i[2]*G+i[6]*J+i[10]*ie+i[14],a[15]=i[3]*G+i[7]*J+i[11]*ie+i[15]):(p=i[1],g=i[2],y=i[3],x=i[4],q=i[5],P=i[6],M=i[7],R=i[8],L=i[9],B=i[10],U=i[11],a[0]=h=i[0],a[1]=p,a[2]=g,a[3]=y,a[4]=x,a[5]=q,a[6]=P,a[7]=M,a[8]=R,a[9]=L,a[10]=B,a[11]=U,a[12]=h*G+x*J+R*ie+i[12],a[13]=p*G+q*J+L*ie+i[13],a[14]=g*G+P*J+B*ie+i[14],a[15]=y*G+M*J+U*ie+i[15]),a},l.K=function(a,i,s){var h=s[0],p=s[1],g=s[2];return a[0]=i[0]*h,a[1]=i[1]*h,a[2]=i[2]*h,a[3]=i[3]*h,a[4]=i[4]*p,a[5]=i[5]*p,a[6]=i[6]*p,a[7]=i[7]*p,a[8]=i[8]*g,a[9]=i[9]*g,a[10]=i[10]*g,a[11]=i[11]*g,a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a},l.L=gD,l.M=function(a,i){let s={};for(let h=0;h<i.length;h++){let p=i[h];p in a&&(s[p]=a[p])}return s},l.N=Mu,l.O=fL,l.P=T,l.Q=dL,l.R=ta,l.S=ra,l.T=kh,l.U=_e,l.V=X,l.W=es,l.X=zr,l.Y=w,l.Z=Xp,l._=o,l.a=yo,l.a$=function(a,i){var s=a[0],h=a[1],p=a[2],g=a[3],y=a[4],x=a[5],q=a[6],P=a[7],M=a[8],R=a[9],L=a[10],B=a[11],U=a[12],G=a[13],J=a[14],ie=a[15],ve=i[0],le=i[1],pe=i[2],qe=i[3],Ce=i[4],We=i[5],ct=i[6],Ve=i[7],Be=i[8],at=i[9],Je=i[10],Xe=i[11],Ee=i[12],ot=i[13],it=i[14],vt=i[15];return Math.abs(s-ve)<=Gi*Math.max(1,Math.abs(s),Math.abs(ve))&&Math.abs(h-le)<=Gi*Math.max(1,Math.abs(h),Math.abs(le))&&Math.abs(p-pe)<=Gi*Math.max(1,Math.abs(p),Math.abs(pe))&&Math.abs(g-qe)<=Gi*Math.max(1,Math.abs(g),Math.abs(qe))&&Math.abs(y-Ce)<=Gi*Math.max(1,Math.abs(y),Math.abs(Ce))&&Math.abs(x-We)<=Gi*Math.max(1,Math.abs(x),Math.abs(We))&&Math.abs(q-ct)<=Gi*Math.max(1,Math.abs(q),Math.abs(ct))&&Math.abs(P-Ve)<=Gi*Math.max(1,Math.abs(P),Math.abs(Ve))&&Math.abs(M-Be)<=Gi*Math.max(1,Math.abs(M),Math.abs(Be))&&Math.abs(R-at)<=Gi*Math.max(1,Math.abs(R),Math.abs(at))&&Math.abs(L-Je)<=Gi*Math.max(1,Math.abs(L),Math.abs(Je))&&Math.abs(B-Xe)<=Gi*Math.max(1,Math.abs(B),Math.abs(Xe))&&Math.abs(U-Ee)<=Gi*Math.max(1,Math.abs(U),Math.abs(Ee))&&Math.abs(G-ot)<=Gi*Math.max(1,Math.abs(G),Math.abs(ot))&&Math.abs(J-it)<=Gi*Math.max(1,Math.abs(J),Math.abs(it))&&Math.abs(ie-vt)<=Gi*Math.max(1,Math.abs(ie),Math.abs(vt))},l.a0=Ft,l.a1=yS,l.a2=Re,l.a3=a=>{let i=window.document.createElement("video");return i.muted=!0,new Promise(s=>{i.onloadstart=()=>{s(i)};for(let h of a){let p=window.document.createElement("source");rs(h)||(i.crossOrigin="Anonymous"),p.src=h,i.appendChild(p)}})},l.a4=function(){return Le++},l.a5=Ge,l.a6=Xh,l.a7=vp,l.a8=oc,l.a9=_L,l.aA=function(a){if(a.type==="custom")return new dde(a);switch(a.type){case"background":return new cde(a);case"circle":return new Yhe(a);case"fill":return new pfe(a);case"fill-extrusion":return new Pfe(a);case"heatmap":return new Qhe(a);case"hillshade":return new tfe(a);case"line":return new zfe(a);case"raster":return new fde(a);case"symbol":return new u_(a);}},l.aB=Qe,l.aC=function(a,i){if(!a)return[{command:"setStyle",args:[i]}];let s=[];try{if(!Vt(a.version,i.version))return[{command:"setStyle",args:[i]}];Vt(a.center,i.center)||s.push({command:"setCenter",args:[i.center]}),Vt(a.zoom,i.zoom)||s.push({command:"setZoom",args:[i.zoom]}),Vt(a.bearing,i.bearing)||s.push({command:"setBearing",args:[i.bearing]}),Vt(a.pitch,i.pitch)||s.push({command:"setPitch",args:[i.pitch]}),Vt(a.sprite,i.sprite)||s.push({command:"setSprite",args:[i.sprite]}),Vt(a.glyphs,i.glyphs)||s.push({command:"setGlyphs",args:[i.glyphs]}),Vt(a.transition,i.transition)||s.push({command:"setTransition",args:[i.transition]}),Vt(a.light,i.light)||s.push({command:"setLight",args:[i.light]}),Vt(a.terrain,i.terrain)||s.push({command:"setTerrain",args:[i.terrain]}),Vt(a.sky,i.sky)||s.push({command:"setSky",args:[i.sky]}),Vt(a.projection,i.projection)||s.push({command:"setProjection",args:[i.projection]});let h={},p=[];(function(y,x,q,P){let M;for(M in x=x||{},y=y||{})Object.prototype.hasOwnProperty.call(y,M)&&(Object.prototype.hasOwnProperty.call(x,M)||bo(M,q,P));for(M in x)Object.prototype.hasOwnProperty.call(x,M)&&(Object.prototype.hasOwnProperty.call(y,M)?Vt(y[M],x[M])||(y[M].type==="geojson"&&x[M].type==="geojson"&&Qs(y,x,M)?xr(q,{command:"setGeoJSONSourceData",args:[M,x[M].data]}):Ka(M,x,q,P)):Dl(M,x,q))})(a.sources,i.sources,p,h);let g=[];a.layers&&a.layers.forEach(y=>{"source"in y&&h[y.source]?s.push({command:"removeLayer",args:[y.id]}):g.push(y)}),s=s.concat(p),function(y,x,q){x=x||[];let P=(y=y||[]).map(Ll),M=x.map(Ll),R=y.reduce(zl,{}),L=x.reduce(zl,{}),B=P.slice(),U=Object.create(null),G,J,ie,ve,le;for(let pe=0,qe=0;pe<P.length;pe++)G=P[pe],Object.prototype.hasOwnProperty.call(L,G)?qe++:(xr(q,{command:"removeLayer",args:[G]}),B.splice(B.indexOf(G,qe),1));for(let pe=0,qe=0;pe<M.length;pe++)G=M[M.length-1-pe],B[B.length-1-pe]!==G&&(Object.prototype.hasOwnProperty.call(R,G)?(xr(q,{command:"removeLayer",args:[G]}),B.splice(B.lastIndexOf(G,B.length-qe),1)):qe++,ve=B[B.length-pe],xr(q,{command:"addLayer",args:[L[G],ve]}),B.splice(B.length-pe,0,G),U[G]=!0);for(let pe=0;pe<M.length;pe++)if(G=M[pe],J=R[G],ie=L[G],!U[G]&&!Vt(J,ie))if(Vt(J.source,ie.source)&&Vt(J["source-layer"],ie["source-layer"])&&Vt(J.type,ie.type)){for(le in bn(J.layout,ie.layout,q,G,null,"setLayoutProperty"),bn(J.paint,ie.paint,q,G,null,"setPaintProperty"),Vt(J.filter,ie.filter)||xr(q,{command:"setFilter",args:[G,ie.filter]}),Vt(J.minzoom,ie.minzoom)&&Vt(J.maxzoom,ie.maxzoom)||xr(q,{command:"setLayerZoomRange",args:[G,ie.minzoom,ie.maxzoom]}),J)Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?bn(J[le],ie[le],q,G,le.slice(6),"setPaintProperty"):Vt(J[le],ie[le])||xr(q,{command:"setLayerProperty",args:[G,le,ie[le]]}));for(le in ie)Object.prototype.hasOwnProperty.call(ie,le)&&!Object.prototype.hasOwnProperty.call(J,le)&&le!=="layout"&&le!=="paint"&&le!=="filter"&&le!=="metadata"&&le!=="minzoom"&&le!=="maxzoom"&&(le.indexOf("paint.")===0?bn(J[le],ie[le],q,G,le.slice(6),"setPaintProperty"):Vt(J[le],ie[le])||xr(q,{command:"setLayerProperty",args:[G,le,ie[le]]}))}else xr(q,{command:"removeLayer",args:[G]}),ve=B[B.lastIndexOf(G)+1],xr(q,{command:"addLayer",args:[ie,ve]})}(g,i.layers,s)}catch(h){console.warn("Unable to compute style diff:",h),s=[{command:"setStyle",args:[i]}]}return s},l.aD=function(a){let i=[],s=a.id;return s===void 0&&i.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&i.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&i.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),i},l.aE=function a(i,s){if(Array.isArray(i)){if(!Array.isArray(s)||i.length!==s.length)return!1;for(let h=0;h<i.length;h++)if(!a(i[h],s[h]))return!1;return!0}if(typeof i=="object"&&i!==null&&s!==null){if(typeof s!="object"||Object.keys(i).length!==Object.keys(s).length)return!1;for(let h in i)if(!a(i[h],s[h]))return!1;return!0}return i===s},l.aF=nt,l.aG=gt,l.aH=class extends ic{constructor(a,i){super(a,i),this.current=0}set(a){this.current!==a&&(this.current=a,this.gl.uniform1i(this.location,a))}},l.aI=Ky,l.aJ=class extends ic{constructor(a,i){super(a,i),this.current=$he}set(a){if(a[12]!==this.current[12]||a[0]!==this.current[0])return this.current=a,void this.gl.uniformMatrix4fv(this.location,!1,a);for(let i=1;i<16;i++)if(a[i]!==this.current[i]){this.current=a,this.gl.uniformMatrix4fv(this.location,!1,a);break}}},l.aK=oD,l.aL=sD,l.aM=Xt,l.aN=class extends ic{constructor(a,i){super(a,i),this.current=[0,0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]&&a[2]===this.current[2]||(this.current=a,this.gl.uniform3f(this.location,a[0],a[1],a[2]))}},l.aO=class extends ic{constructor(a,i){super(a,i),this.current=[0,0]}set(a){a[0]===this.current[0]&&a[1]===this.current[1]||(this.current=a,this.gl.uniform2f(this.location,a[0],a[1]))}},l.aP=function(a,i,s,h,p,g,y){var x=1/(i-s),q=1/(h-p),P=1/(g-y);return a[0]=-2*x,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*q,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*P,a[11]=0,a[12]=(i+s)*x,a[13]=(p+h)*q,a[14]=(y+g)*P,a[15]=1,a},l.aQ=Xhe,l.aR=class extends he{},l.aS=jfe,l.aT=class extends ye{},l.aU=Xw,l.aV=function(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))},l.aW=wD,l.aX=hi,l.aY=ea,l.aZ=class extends rt{},l.a_=function(a,i){return a[0]===i[0]&&a[1]===i[1]&&a[2]===i[2]&&a[3]===i[3]&&a[4]===i[4]&&a[5]===i[5]&&a[6]===i[6]&&a[7]===i[7]&&a[8]===i[8]&&a[9]===i[9]&&a[10]===i[10]&&a[11]===i[11]&&a[12]===i[12]&&a[13]===i[13]&&a[14]===i[14]&&a[15]===i[15]},l.aa=function(a){let i={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,p,g)=>{let y=p||g;return i[h]=!y||y.toLowerCase(),""}),i["max-age"]){let s=parseInt(i["max-age"],10);isNaN(s)?delete i["max-age"]:i["max-age"]=s}return i},l.ab=function(a,i){let s=[];for(let h in a)h in i||s.push(h);return s},l.ac=ge,l.ad=function(a,i,s){var h=Math.sin(s),p=Math.cos(s),g=i[0],y=i[1],x=i[2],q=i[3],P=i[4],M=i[5],R=i[6],L=i[7];return i!==a&&(a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[0]=g*p+P*h,a[1]=y*p+M*h,a[2]=x*p+R*h,a[3]=q*p+L*h,a[4]=P*p-g*h,a[5]=M*p-y*h,a[6]=R*p-x*h,a[7]=L*p-q*h,a},l.ae=function(a){var i=new Vh(16);return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i},l.af=Qy,l.ag=function(a,i){let s=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){let{interpolationType:p,minZoom:g,maxZoom:y}=a,x=p?ge($i.interpolationFactor(p,i,g,y),0,1):0;a.kind==="camera"?h=Ui.number(a.minSize,a.maxSize,x):s=x}return{uSizeT:s,uSize:h}},l.ai=function(a,{uSize:i,uSizeT:s},{lowerSize:h,upperSize:p}){return a.kind==="source"?h/Ao:a.kind==="composite"?Ui.number(h/Ao,p/Ao,s):i},l.aj=fS,l.ak=function(a,i,s,h){let p=i.y-a.y,g=i.x-a.x,y=h.y-s.y,x=h.x-s.x,q=y*g-x*p;if(q===0)return null;let P=(x*(a.y-s.y)-y*(a.x-s.x))/q;return new T(a.x+P*g,a.y+P*p)},l.al=SL,l.am=hD,l.an=Ww,l.ao=function(a){let i=1/0,s=1/0,h=-1/0,p=-1/0;for(let g of a)i=Math.min(i,g.x),s=Math.min(s,g.y),h=Math.max(h,g.x),p=Math.max(p,g.y);return[i,s,h,p]},l.ap=Gr,l.ar=hS,l.as=function(a,i){var s=i[0],h=i[1],p=i[2],g=i[3],y=i[4],x=i[5],q=i[6],P=i[7],M=i[8],R=i[9],L=i[10],B=i[11],U=i[12],G=i[13],J=i[14],ie=i[15],ve=s*x-h*y,le=s*q-p*y,pe=s*P-g*y,qe=h*q-p*x,Ce=h*P-g*x,We=p*P-g*q,ct=M*G-R*U,Ve=M*J-L*U,Be=M*ie-B*U,at=R*J-L*G,Je=R*ie-B*G,Xe=L*ie-B*J,Ee=ve*Xe-le*Je+pe*at+qe*Be-Ce*Ve+We*ct;return Ee?(a[0]=(x*Xe-q*Je+P*at)*(Ee=1/Ee),a[1]=(p*Je-h*Xe-g*at)*Ee,a[2]=(G*We-J*Ce+ie*qe)*Ee,a[3]=(L*Ce-R*We-B*qe)*Ee,a[4]=(q*Be-y*Xe-P*Ve)*Ee,a[5]=(s*Xe-p*Be+g*Ve)*Ee,a[6]=(J*pe-U*We-ie*le)*Ee,a[7]=(M*We-L*pe+B*le)*Ee,a[8]=(y*Je-x*Be+P*ct)*Ee,a[9]=(h*Be-s*Je-g*ct)*Ee,a[10]=(U*Ce-G*pe+ie*ve)*Ee,a[11]=(R*pe-M*Ce-B*ve)*Ee,a[12]=(x*Ve-y*at-q*ct)*Ee,a[13]=(s*at-h*Ve+p*ct)*Ee,a[14]=(G*le-U*qe-J*ve)*Ee,a[15]=(M*qe-R*le+L*ve)*Ee,a):null},l.at=xS,l.au=cS,l.av=bS,l.aw=function(){let a={},i=Se.$version;for(let s in Se.$root){let h=Se.$root[s];if(h.required){let p=null;p=s==="version"?i:h.type==="array"?[]:{},p!=null&&(a[s]=p)}}return a},l.ax=Cp,l.ay=Hn,l.az=function(a){a=a.slice();let i=Object.create(null);for(let s=0;s<a.length;s++)i[a[s].id]=a[s];for(let s=0;s<a.length;s++)"ref"in a[s]&&(a[s]=kl(a[s],i[a[s].ref]));return a},l.b=da,l.b0=function(a,i){return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a},l.b1=function(a,i,s){return a[0]=i[0]*s[0],a[1]=i[1]*s[1],a[2]=i[2]*s[2],a[3]=i[3]*s[3],a},l.b2=function(a,i){return a[0]*i[0]+a[1]*i[1]+a[2]*i[2]+a[3]*i[3]},l.b3=be,l.b4=vL,l.b5=pL,l.b6=function(a,i,s,h,p){var g,y=1/Math.tan(i/2);return a[0]=y/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=y,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,p!=null&&p!==1/0?(a[10]=(p+h)*(g=1/(h-p)),a[14]=2*p*h*g):(a[10]=-1,a[14]=-2*h),a},l.b7=function(a,i,s){var h=Math.sin(s),p=Math.cos(s),g=i[4],y=i[5],x=i[6],q=i[7],P=i[8],M=i[9],R=i[10],L=i[11];return i!==a&&(a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15]),a[4]=g*p+P*h,a[5]=y*p+M*h,a[6]=x*p+R*h,a[7]=q*p+L*h,a[8]=P*p-g*h,a[9]=M*p-y*h,a[10]=R*p-x*h,a[11]=L*p-q*h,a},l.b8=K,l.b9=re,l.bA=UD,l.bB=function(a){return a.message===Gn},l.bC=hu,l.bD=cn,l.ba=function(a){return a*Math.PI/180},l.bb=function(a,i){let{x:s,y:h}=Xp.fromLngLat(i);return!(a<0||a>25||h<0||h>=1||s<0||s>=1)},l.bc=function(a,i){return a[0]=i[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=i[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=i[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},l.bd=class extends O{},l.be=vS,l.bf=Sde,l.bh=an,l.bi=function(a,i){yo.REGISTERED_PROTOCOLS[a]=i},l.bj=function(a){delete yo.REGISTERED_PROTOCOLS[a]},l.bk=function(a,i){let s={};for(let p=0;p<a.length;p++){let g=i&&i[a[p].id]||zy(a[p]);i&&(i[a[p].id]=g);let y=s[g];y||(y=s[g]=[]),y.push(a[p])}let h=[];for(let p in s)h.push(s[p]);return h},l.bl=Ye,l.bm=yL,l.bn=xL,l.bo=YD,l.bp=function(a){a.bucket.createArrays(),a.bucket.tilePixelRatio=zr/(512*a.bucket.overscaling),a.bucket.compareText={},a.bucket.iconsNeedLinear=!1;let i=a.bucket.layers[0],s=i.layout,h=i._unevaluatedLayout._values,p={layoutIconSize:h["icon-size"].possiblyEvaluate(new ur(a.bucket.zoom+1),a.canonical),layoutTextSize:h["text-size"].possiblyEvaluate(new ur(a.bucket.zoom+1),a.canonical),textMaxSize:h["text-size"].possiblyEvaluate(new ur(18))};if(a.bucket.textSizeData.kind==="composite"){let{minZoom:P,maxZoom:M}=a.bucket.textSizeData;p.compositeTextSizes=[h["text-size"].possiblyEvaluate(new ur(P),a.canonical),h["text-size"].possiblyEvaluate(new ur(M),a.canonical)]}if(a.bucket.iconSizeData.kind==="composite"){let{minZoom:P,maxZoom:M}=a.bucket.iconSizeData;p.compositeIconSizes=[h["icon-size"].possiblyEvaluate(new ur(P),a.canonical),h["icon-size"].possiblyEvaluate(new ur(M),a.canonical)]}let g=s.get("text-line-height")*Gr,y=s.get("text-rotation-alignment")!=="viewport"&&s.get("symbol-placement")!=="point",x=s.get("text-keep-upright"),q=s.get("text-size");for(let P of a.bucket.features){let M=s.get("text-font").evaluate(P,{},a.canonical).join(","),R=q.evaluate(P,{},a.canonical),L=p.layoutTextSize.evaluate(P,{},a.canonical),B=p.layoutIconSize.evaluate(P,{},a.canonical),U={horizontal:{},vertical:void 0},G=P.text,J,ie=[0,0];if(G){let pe=G.toString(),qe=s.get("text-letter-spacing").evaluate(P,{},a.canonical)*Gr,Ce=Lw(pe)?qe:0,We=s.get("text-anchor").evaluate(P,{},a.canonical),ct=OL(i,P,a.canonical);if(!ct){let Je=s.get("text-radial-offset").evaluate(P,{},a.canonical);ie=Je?ML(We,[Je*Gr,_S]):s.get("text-offset").evaluate(P,{},a.canonical).map(Xe=>Xe*Gr)}let Ve=y?"center":s.get("text-justify").evaluate(P,{},a.canonical),Be=s.get("symbol-placement")==="point"?s.get("text-max-width").evaluate(P,{},a.canonical)*Gr:1/0,at=()=>{a.bucket.allowVerticalPlacement&&Mp(pe)&&(U.vertical=a_(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,We,"left",Ce,ie,l.ah.vertical,!0,L,R))};if(!y&&ct){let Je=new Set;if(Ve==="auto")for(let Ee=0;Ee<ct.values.length;Ee+=2)Je.add(xS(ct.values[Ee]));else Je.add(Ve);let Xe=!1;for(let Ee of Je)if(!U.horizontal[Ee])if(Xe)U.horizontal[Ee]=U.horizontal[0];else{let ot=a_(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,"center",Ee,Ce,ie,l.ah.horizontal,!1,L,R);ot&&(U.horizontal[Ee]=ot,Xe=ot.positionedLines.length===1)}at()}else{Ve==="auto"&&(Ve=xS(We));let Je=a_(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,We,Ve,Ce,ie,l.ah.horizontal,!1,L,R);Je&&(U.horizontal[Ve]=Je),at(),Mp(pe)&&y&&x&&(U.vertical=a_(G,a.glyphMap,a.glyphPositions,a.imagePositions,M,Be,g,We,Ve,Ce,ie,l.ah.vertical,!1,L,R))}}let ve=!1;if(P.icon&&P.icon.name){let pe=a.imageMap[P.icon.name];pe&&(J=ade(a.imagePositions[P.icon.name],s.get("icon-offset").evaluate(P,{},a.canonical),s.get("icon-anchor").evaluate(P,{},a.canonical)),ve=!!pe.sdf,a.bucket.sdfIcons===void 0?a.bucket.sdfIcons=ve:a.bucket.sdfIcons!==ve&&Wr("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(pe.pixelRatio!==a.bucket.pixelRatio||s.get("icon-rotate").constantOr(1)!==0)&&(a.bucket.iconsNeedLinear=!0))}let le=kL(U.horizontal)||U.vertical;a.bucket.iconsInText=!!le&&le.iconsInText,(le||J)&&bde(a.bucket,P,U,J,a.imageMap,p,L,B,ie,ve,a.canonical)}a.showCollisionBoxes&&a.bucket.generateCollisionDebugBuffers()},l.bq=nS,l.br=tS,l.bs=iS,l.bt=Au,l.bu=oS,l.bv=class{constructor(a){this._marks={start:[a.url,"start"].join("#"),end:[a.url,"end"].join("#"),measure:a.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let a=performance.getEntriesByName(this._marks.measure);return a.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),a=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),a}},l.bw=function(a,i,s,h,p){return o(this,void 0,void 0,function*(){if(X())try{return yield es(a,i,s,h,p)}catch(g){}return function(g,y,x,q,P){let M=g.width,R=g.height;Wa&&Bi||(Wa=new OffscreenCanvas(M,R),Bi=Wa.getContext("2d",{willReadFrequently:!0})),Wa.width=M,Wa.height=R,Bi.drawImage(g,0,0,M,R);let L=Bi.getImageData(y,x,q,P);return Bi.clearRect(0,0,M,R),L.data}(a,i,s,h,p)})},l.bx=gL,l.by=_,l.bz=b,l.c=Xs,l.d=a=>o(void 0,void 0,void 0,function*(){if(a.byteLength===0)return createImageBitmap(new ImageData(1,1));let i=new Blob([new Uint8Array(a)],{type:"image/png"});try{return createImageBitmap(i)}catch(s){throw new Error(`Could not load image because of ${s.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),l.e=et,l.f=a=>new Promise((i,s)=>{let h=new Image;h.onload=()=>{i(h),URL.revokeObjectURL(h.src),h.onload=null,window.requestAnimationFrame(()=>{h.src=ah})},h.onerror=()=>s(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));let p=new Blob([new Uint8Array(a)],{type:"image/png"});h.src=a.byteLength?URL.createObjectURL(p):ah}),l.g=pa,l.h=(a,i)=>ts(et(a,{type:"json"}),i),l.i=Ha,l.j=xo,l.k=_o,l.l=(a,i)=>ts(et(a,{type:"arrayBuffer"}),i),l.m=ts,l.n=function(a){return new oS(a).readFields(Jfe,[])},l.o=Bp,l.p=XD,l.q=v,l.r=kw,l.s=rs,l.t=Ap,l.u=ms,l.v=Se,l.w=Wr,l.x=function([a,i,s]){return i+=90,i*=Math.PI/180,s*=Math.PI/180,{x:a*Math.cos(i)*Math.sin(s),y:a*Math.sin(i)*Math.sin(s),z:a*Math.cos(s)}},l.y=Ui,l.z=ur}),n("worker",["./shared"],function(l){"use strict";class o{constructor(N){this.keyCache={},N&&this.replace(N)}replace(N){this._layerConfigs={},this._layers={},this.update(N,[])}update(N,F){for(let Q of N){this._layerConfigs[Q.id]=Q;let ce=this._layers[Q.id]=l.aA(Q);ce._featureFilter=l.a7(ce.filter),this.keyCache[Q.id]&&delete this.keyCache[Q.id]}for(let Q of F)delete this.keyCache[Q],delete this._layerConfigs[Q],delete this._layers[Q];this.familiesBySource={};let W=l.bk(Object.values(this._layerConfigs),this.keyCache);for(let Q of W){let ce=Q.map(we=>this._layers[we.id]),fe=ce[0];if(fe.visibility==="none")continue;let me=fe.source||"",se=this.familiesBySource[me];se||(se=this.familiesBySource[me]={});let Ie=fe.sourceLayer||"_geojsonTileLayer",Ae=se[Ie];Ae||(Ae=se[Ie]=[]),Ae.push(ce)}}}class _{constructor(N){let F={},W=[];for(let me in N){let se=N[me],Ie=F[me]={};for(let Ae in se){let we=se[+Ae];if(!we||we.bitmap.width===0||we.bitmap.height===0)continue;let ke={x:0,y:0,w:we.bitmap.width+2,h:we.bitmap.height+2};W.push(ke),Ie[Ae]={rect:ke,metrics:we.metrics}}}let{w:Q,h:ce}=l.p(W),fe=new l.o({width:Q||1,height:ce||1});for(let me in N){let se=N[me];for(let Ie in se){let Ae=se[+Ie];if(!Ae||Ae.bitmap.width===0||Ae.bitmap.height===0)continue;let we=F[me][Ie].rect;l.o.copy(Ae.bitmap,fe,{x:0,y:0},{x:we.x+1,y:we.y+1},Ae.bitmap)}}this.image=fe,this.positions=F}}l.bl("GlyphAtlas",_);class b{constructor(N){this.tileID=new l.S(N.tileID.overscaledZ,N.tileID.wrap,N.tileID.canonical.z,N.tileID.canonical.x,N.tileID.canonical.y),this.uid=N.uid,this.zoom=N.zoom,this.pixelRatio=N.pixelRatio,this.tileSize=N.tileSize,this.source=N.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=N.showCollisionBoxes,this.collectResourceTiming=!!N.collectResourceTiming,this.returnDependencies=!!N.returnDependencies,this.promoteId=N.promoteId,this.inFlightDependencies=[]}parse(N,F,W,Q){return l._(this,void 0,void 0,function*(){this.status="parsing",this.data=N,this.collisionBoxArray=new l.a5;let ce=new l.bm(Object.keys(N.layers).sort()),fe=new l.bn(this.tileID,this.promoteId);fe.bucketLayerIDs=[];let me={},se={featureIndex:fe,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:W},Ie=F.familiesBySource[this.source];for(let Pt in Ie){let Kt=N.layers[Pt];if(!Kt)continue;Kt.version===1&&l.w(`Vector tile source "${this.source}" layer "${Pt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);let pr=ce.encode(Pt),Zr=[];for(let ri=0;ri<Kt.length;ri++){let qi=Kt.feature(ri),eu=fe.getId(qi,Pt);Zr.push({feature:qi,id:eu,index:ri,sourceLayerIndex:pr})}for(let ri of Ie[Pt]){let qi=ri[0];qi.source!==this.source&&l.w(`layer.source = ${qi.source} does not equal this.source = ${this.source}`),qi.minzoom&&this.zoom<Math.floor(qi.minzoom)||qi.maxzoom&&this.zoom>=qi.maxzoom||qi.visibility!=="none"&&(E(ri,this.zoom,W),(me[qi.id]=qi.createBucket({index:fe.bucketLayerIDs.length,layers:ri,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:pr,sourceID:this.source})).populate(Zr,se,this.tileID.canonical),fe.bucketLayerIDs.push(ri.map(eu=>eu.id)))}}let Ae=l.aF(se.glyphDependencies,Pt=>Object.keys(Pt).map(Number));this.inFlightDependencies.forEach(Pt=>Pt==null?void 0:Pt.abort()),this.inFlightDependencies=[];let we=Promise.resolve({});if(Object.keys(Ae).length){let Pt=new AbortController;this.inFlightDependencies.push(Pt),we=Q.sendAsync({type:"GG",data:{stacks:Ae,source:this.source,tileID:this.tileID,type:"glyphs"}},Pt)}let ke=Object.keys(se.iconDependencies),st=Promise.resolve({});if(ke.length){let Pt=new AbortController;this.inFlightDependencies.push(Pt),st=Q.sendAsync({type:"GI",data:{icons:ke,source:this.source,tileID:this.tileID,type:"icons"}},Pt)}let lt=Object.keys(se.patternDependencies),Bt=Promise.resolve({});if(lt.length){let Pt=new AbortController;this.inFlightDependencies.push(Pt),Bt=Q.sendAsync({type:"GI",data:{icons:lt,source:this.source,tileID:this.tileID,type:"patterns"}},Pt)}let[St,jt,Dt]=yield Promise.all([we,st,Bt]),Dr=new _(St),br=new l.bo(jt,Dt);for(let Pt in me){let Kt=me[Pt];Kt instanceof l.a6?(E(Kt.layers,this.zoom,W),l.bp({bucket:Kt,glyphMap:St,glyphPositions:Dr.positions,imageMap:jt,imagePositions:br.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Kt.hasPattern&&(Kt instanceof l.bq||Kt instanceof l.br||Kt instanceof l.bs)&&(E(Kt.layers,this.zoom,W),Kt.addFeatures(se,this.tileID.canonical,br.patternPositions))}return this.status="done",{buckets:Object.values(me).filter(Pt=>!Pt.isEmpty()),featureIndex:fe,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Dr.image,imageAtlas:br,glyphMap:this.returnDependencies?St:null,iconMap:this.returnDependencies?jt:null,glyphPositions:this.returnDependencies?Dr.positions:null}})}}function E(te,N,F){let W=new l.z(N);for(let Q of te)Q.recalculate(W,F)}class T{constructor(N,F,W){this.actor=N,this.layerIndex=F,this.availableImages=W,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(N,F){return l._(this,void 0,void 0,function*(){let W=yield l.l(N.request,F);try{return{vectorTile:new l.bt.VectorTile(new l.bu(W.data)),rawData:W.data,cacheControl:W.cacheControl,expires:W.expires}}catch(Q){let ce=new Uint8Array(W.data),fe=`Unable to parse the tile at ${N.request.url}, `;throw fe+=ce[0]===31&&ce[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Q.message}`,new Error(fe)}})}loadTile(N){return l._(this,void 0,void 0,function*(){let F=N.uid,W=!!(N&&N.request&&N.request.collectResourceTiming)&&new l.bv(N.request),Q=new b(N);this.loading[F]=Q;let ce=new AbortController;Q.abort=ce;try{let fe=yield this.loadVectorTile(N,ce);if(delete this.loading[F],!fe)return null;let me=fe.rawData,se={};fe.expires&&(se.expires=fe.expires),fe.cacheControl&&(se.cacheControl=fe.cacheControl);let Ie={};if(W){let we=W.finish();we&&(Ie.resourceTiming=JSON.parse(JSON.stringify(we)))}Q.vectorTile=fe.vectorTile;let Ae=Q.parse(fe.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[F]=Q,this.fetching[F]={rawTileData:me,cacheControl:se,resourceTiming:Ie};try{let we=yield Ae;return l.e({rawTileData:me.slice(0)},we,se,Ie)}finally{delete this.fetching[F]}}catch(fe){throw delete this.loading[F],Q.status="done",this.loaded[F]=Q,fe}})}reloadTile(N){return l._(this,void 0,void 0,function*(){let F=N.uid;if(!this.loaded||!this.loaded[F])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");let W=this.loaded[F];if(W.showCollisionBoxes=N.showCollisionBoxes,W.status==="parsing"){let Q=yield W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor),ce;if(this.fetching[F]){let{rawTileData:fe,cacheControl:me,resourceTiming:se}=this.fetching[F];delete this.fetching[F],ce=l.e({rawTileData:fe.slice(0)},Q,me,se)}else ce=Q;return ce}if(W.status==="done"&&W.vectorTile)return W.parse(W.vectorTile,this.layerIndex,this.availableImages,this.actor)})}abortTile(N){return l._(this,void 0,void 0,function*(){let F=this.loading,W=N.uid;F&&F[W]&&F[W].abort&&(F[W].abort.abort(),delete F[W])})}removeTile(N){return l._(this,void 0,void 0,function*(){this.loaded&&this.loaded[N.uid]&&delete this.loaded[N.uid]})}}class C{constructor(){this.loaded={}}loadTile(N){return l._(this,void 0,void 0,function*(){let{uid:F,encoding:W,rawImageData:Q,redFactor:ce,greenFactor:fe,blueFactor:me,baseShift:se}=N,Ie=Q.width+2,Ae=Q.height+2,we=l.b(Q)?new l.R({width:Ie,height:Ae},(yield l.bw(Q,-1,-1,Ie,Ae))):Q,ke=new l.bx(F,we,W,ce,fe,me,se);return this.loaded=this.loaded||{},this.loaded[F]=ke,ke})}removeTile(N){let F=this.loaded,W=N.uid;F&&F[W]&&delete F[W]}}function z(te,N){if(te.length!==0){$(te[0],N);for(var F=1;F<te.length;F++)$(te[F],!N)}}function $(te,N){for(var F=0,W=0,Q=0,ce=te.length,fe=ce-1;Q<ce;fe=Q++){var me=(te[Q][0]-te[fe][0])*(te[fe][1]+te[Q][1]),se=F+me;W+=Math.abs(F)>=Math.abs(me)?F-se+me:me-se+F,F=se}F+W>=0!=!!N&&te.reverse()}var oe=l.by(function te(N,F){var W,Q=N&&N.type;if(Q==="FeatureCollection")for(W=0;W<N.features.length;W++)te(N.features[W],F);else if(Q==="GeometryCollection")for(W=0;W<N.geometries.length;W++)te(N.geometries[W],F);else if(Q==="Feature")te(N.geometry,F);else if(Q==="Polygon")z(N.coordinates,F);else if(Q==="MultiPolygon")for(W=0;W<N.coordinates.length;W++)z(N.coordinates[W],F);return N});let xe=l.bt.VectorTileFeature.prototype.toGeoJSON;var _e={exports:{}},X=l.bz,K=l.bt.VectorTileFeature,re=ge;function ge(te,N){this.options=N||{},this.features=te,this.length=te.length}function be(te,N){this.id=typeof te.id=="number"?te.id:void 0,this.type=te.type,this.rawGeometry=te.type===1?[te.geometry]:te.geometry,this.properties=te.tags,this.extent=N||4096}ge.prototype.feature=function(te){return new be(this.features[te],this.options.extent)},be.prototype.loadGeometry=function(){var te=this.rawGeometry;this.geometry=[];for(var N=0;N<te.length;N++){for(var F=te[N],W=[],Q=0;Q<F.length;Q++)W.push(new X(F[Q][0],F[Q][1]));this.geometry.push(W)}return this.geometry},be.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var te=this.geometry,N=1/0,F=-1/0,W=1/0,Q=-1/0,ce=0;ce<te.length;ce++)for(var fe=te[ce],me=0;me<fe.length;me++){var se=fe[me];N=Math.min(N,se.x),F=Math.max(F,se.x),W=Math.min(W,se.y),Q=Math.max(Q,se.y)}return[N,W,F,Q]},be.prototype.toGeoJSON=K.prototype.toGeoJSON;var et=l.bA,Le=re;function nt(te){var N=new et;return function(F,W){for(var Q in F.layers)W.writeMessage(3,gt,F.layers[Q])}(te,N),N.finish()}function gt(te,N){var F;N.writeVarintField(15,te.version||1),N.writeStringField(1,te.name||""),N.writeVarintField(5,te.extent||4096);var W={keys:[],values:[],keycache:{},valuecache:{}};for(F=0;F<te.length;F++)W.feature=te.feature(F),N.writeMessage(2,Qe,W);var Q=W.keys;for(F=0;F<Q.length;F++)N.writeStringField(3,Q[F]);var ce=W.values;for(F=0;F<ce.length;F++)N.writeMessage(4,Ks,ce[F])}function Qe(te,N){var F=te.feature;F.id!==void 0&&N.writeVarintField(1,F.id),N.writeMessage(2,nn,te),N.writeVarintField(3,F.type),N.writeMessage(4,Ha,F)}function nn(te,N){var F=te.feature,W=te.keys,Q=te.values,ce=te.keycache,fe=te.valuecache;for(var me in F.properties){var se=F.properties[me],Ie=ce[me];if(se!==null){Ie===void 0&&(W.push(me),ce[me]=Ie=W.length-1),N.writeVarint(Ie);var Ae=typeof se;Ae!=="string"&&Ae!=="boolean"&&Ae!=="number"&&(se=JSON.stringify(se));var we=Ae+":"+se,ke=fe[we];ke===void 0&&(Q.push(se),fe[we]=ke=Q.length-1),N.writeVarint(ke)}}}function Wr(te,N){return(N<<3)+(7&te)}function wi(te){return te<<1^te>>31}function Ha(te,N){for(var F=te.loadGeometry(),W=te.type,Q=0,ce=0,fe=F.length,me=0;me<fe;me++){var se=F[me],Ie=1;W===1&&(Ie=se.length),N.writeVarint(Wr(1,Ie));for(var Ae=W===3?se.length-1:se.length,we=0;we<Ae;we++){we===1&&W!==1&&N.writeVarint(Wr(2,Ae-1));var ke=se[we].x-Q,st=se[we].y-ce;N.writeVarint(wi(ke)),N.writeVarint(wi(st)),Q+=ke,ce+=st}W===3&&N.writeVarint(Wr(7,1))}}function Ks(te,N){var F=typeof te;F==="string"?N.writeStringField(1,te):F==="boolean"?N.writeBooleanField(7,te):F==="number"&&(te%1!=0?N.writeDoubleField(3,te):te<0?N.writeSVarintField(6,te):N.writeVarintField(5,te))}_e.exports=nt,_e.exports.fromVectorTileJs=nt,_e.exports.fromGeojsonVt=function(te,N){N=N||{};var F={};for(var W in te)F[W]=new Le(te[W].features,N),F[W].name=W,F[W].version=N.version,F[W].extent=N.extent;return nt({layers:F})},_e.exports.GeoJSONWrapper=Le;var da=l.by(_e.exports);let ah={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:te=>te},es=Math.fround||(Wa=new Float32Array(1),te=>(Wa[0]=+te,Wa[0]));var Wa;let Bi=3,Gn=5,Xs=6;class yo{constructor(N){this.options=Object.assign(Object.create(ah),N),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(N){let{log:F,minZoom:W,maxZoom:Q}=this.options;F&&console.time("total time");let ce=`prepare ${N.length} points`;F&&console.time(ce),this.points=N;let fe=[];for(let se=0;se<N.length;se++){let Ie=N[se];if(!Ie.geometry)continue;let[Ae,we]=Ie.geometry.coordinates,ke=es(an(Ae)),st=es(Hn(we));fe.push(ke,st,1/0,se,-1,1),this.options.reduce&&fe.push(0)}let me=this.trees[Q+1]=this._createTree(fe);F&&console.timeEnd(ce);for(let se=Q;se>=W;se--){let Ie=+Date.now();me=this.trees[se]=this._createTree(this._cluster(me,se)),F&&console.log("z%d: %d clusters in %dms",se,me.numItems,+Date.now()-Ie)}return F&&console.timeEnd("total time"),this}getClusters(N,F){let W=((N[0]+180)%360+360)%360-180,Q=Math.max(-90,Math.min(90,N[1])),ce=N[2]===180?180:((N[2]+180)%360+360)%360-180,fe=Math.max(-90,Math.min(90,N[3]));if(N[2]-N[0]>=360)W=-180,ce=180;else if(W>ce){let we=this.getClusters([W,Q,180,fe],F),ke=this.getClusters([-180,Q,ce,fe],F);return we.concat(ke)}let me=this.trees[this._limitZoom(F)],se=me.range(an(W),Hn(fe),an(ce),Hn(Q)),Ie=me.data,Ae=[];for(let we of se){let ke=this.stride*we;Ae.push(Ie[ke+Gn]>1?pa(Ie,ke,this.clusterProps):this.points[Ie[ke+Bi]])}return Ae}getChildren(N){let F=this._getOriginId(N),W=this._getOriginZoom(N),Q="No cluster with the specified id.",ce=this.trees[W];if(!ce)throw new Error(Q);let fe=ce.data;if(F*this.stride>=fe.length)throw new Error(Q);let me=this.options.radius/(this.options.extent*Math.pow(2,W-1)),se=ce.within(fe[F*this.stride],fe[F*this.stride+1],me),Ie=[];for(let Ae of se){let we=Ae*this.stride;fe[we+4]===N&&Ie.push(fe[we+Gn]>1?pa(fe,we,this.clusterProps):this.points[fe[we+Bi]])}if(Ie.length===0)throw new Error(Q);return Ie}getLeaves(N,F,W){let Q=[];return this._appendLeaves(Q,N,F=F||10,W=W||0,0),Q}getTile(N,F,W){let Q=this.trees[this._limitZoom(N)],ce=Math.pow(2,N),{extent:fe,radius:me}=this.options,se=me/fe,Ie=(W-se)/ce,Ae=(W+1+se)/ce,we={features:[]};return this._addTileFeatures(Q.range((F-se)/ce,Ie,(F+1+se)/ce,Ae),Q.data,F,W,ce,we),F===0&&this._addTileFeatures(Q.range(1-se/ce,Ie,1,Ae),Q.data,ce,W,ce,we),F===ce-1&&this._addTileFeatures(Q.range(0,Ie,se/ce,Ae),Q.data,-1,W,ce,we),we.features.length?we:null}getClusterExpansionZoom(N){let F=this._getOriginZoom(N)-1;for(;F<=this.options.maxZoom;){let W=this.getChildren(N);if(F++,W.length!==1)break;N=W[0].properties.cluster_id}return F}_appendLeaves(N,F,W,Q,ce){let fe=this.getChildren(F);for(let me of fe){let se=me.properties;if(se&&se.cluster?ce+se.point_count<=Q?ce+=se.point_count:ce=this._appendLeaves(N,se.cluster_id,W,Q,ce):ce<Q?ce++:N.push(me),N.length===W)break}return ce}_createTree(N){let F=new l.av(N.length/this.stride|0,this.options.nodeSize,Float32Array);for(let W=0;W<N.length;W+=this.stride)F.add(N[W],N[W+1]);return F.finish(),F.data=N,F}_addTileFeatures(N,F,W,Q,ce,fe){for(let me of N){let se=me*this.stride,Ie=F[se+Gn]>1,Ae,we,ke;if(Ie)Ae=Ys(F,se,this.clusterProps),we=F[se],ke=F[se+1];else{let Bt=this.points[F[se+Bi]];Ae=Bt.properties;let[St,jt]=Bt.geometry.coordinates;we=an(St),ke=Hn(jt)}let st={type:1,geometry:[[Math.round(this.options.extent*(we*ce-W)),Math.round(this.options.extent*(ke*ce-Q))]],tags:Ae},lt;lt=Ie||this.options.generateId?F[se+Bi]:this.points[F[se+Bi]].id,lt!==void 0&&(st.id=lt),fe.features.push(st)}}_limitZoom(N){return Math.max(this.options.minZoom,Math.min(Math.floor(+N),this.options.maxZoom+1))}_cluster(N,F){let{radius:W,extent:Q,reduce:ce,minPoints:fe}=this.options,me=W/(Q*Math.pow(2,F)),se=N.data,Ie=[],Ae=this.stride;for(let we=0;we<se.length;we+=Ae){if(se[we+2]<=F)continue;se[we+2]=F;let ke=se[we],st=se[we+1],lt=N.within(se[we],se[we+1],me),Bt=se[we+Gn],St=Bt;for(let jt of lt){let Dt=jt*Ae;se[Dt+2]>F&&(St+=se[Dt+Gn])}if(St>Bt&&St>=fe){let jt,Dt=ke*Bt,Dr=st*Bt,br=-1,Pt=((we/Ae|0)<<5)+(F+1)+this.points.length;for(let Kt of lt){let pr=Kt*Ae;if(se[pr+2]<=F)continue;se[pr+2]=F;let Zr=se[pr+Gn];Dt+=se[pr]*Zr,Dr+=se[pr+1]*Zr,se[pr+4]=Pt,ce&&(jt||(jt=this._map(se,we,!0),br=this.clusterProps.length,this.clusterProps.push(jt)),ce(jt,this._map(se,pr)))}se[we+4]=Pt,Ie.push(Dt/St,Dr/St,1/0,Pt,-1,St),ce&&Ie.push(br)}else{for(let jt=0;jt<Ae;jt++)Ie.push(se[we+jt]);if(St>1)for(let jt of lt){let Dt=jt*Ae;if(!(se[Dt+2]<=F)){se[Dt+2]=F;for(let Dr=0;Dr<Ae;Dr++)Ie.push(se[Dt+Dr])}}}}return Ie}_getOriginId(N){return N-this.points.length>>5}_getOriginZoom(N){return(N-this.points.length)%32}_map(N,F,W){if(N[F+Gn]>1){let fe=this.clusterProps[N[F+Xs]];return W?Object.assign({},fe):fe}let Q=this.points[N[F+Bi]].properties,ce=this.options.map(Q);return W&&ce===Q?Object.assign({},ce):ce}}function pa(te,N,F){return{type:"Feature",id:te[N+Bi],properties:Ys(te,N,F),geometry:{type:"Point",coordinates:[(W=te[N],360*(W-.5)),ts(te[N+1])]}};var W}function Ys(te,N,F){let W=te[N+Gn],Q=W>=1e4?`${Math.round(W/1e3)}k`:W>=1e3?Math.round(W/100)/10+"k":W,ce=te[N+Xs],fe=ce===-1?{}:Object.assign({},F[ce]);return Object.assign(fe,{cluster:!0,cluster_id:te[N+Bi],point_count:W,point_count_abbreviated:Q})}function an(te){return te/360+.5}function Hn(te){let N=Math.sin(te*Math.PI/180),F=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return F<0?0:F>1?1:F}function ts(te){let N=(180-360*te)*Math.PI/180;return 360*Math.atan(Math.exp(N))/Math.PI-90}function rs(te,N,F,W){let Q=W,ce=N+(F-N>>1),fe,me=F-N,se=te[N],Ie=te[N+1],Ae=te[F],we=te[F+1];for(let ke=N+3;ke<F;ke+=3){let st=Rl(te[ke],te[ke+1],se,Ie,Ae,we);if(st>Q)fe=ke,Q=st;else if(st===Q){let lt=Math.abs(ke-ce);lt<me&&(fe=ke,me=lt)}}Q>W&&(fe-N>3&&rs(te,N,fe,W),te[fe+2]=Q,F-fe>3&&rs(te,fe,F,W))}function Rl(te,N,F,W,Q,ce){let fe=Q-F,me=ce-W;if(fe!==0||me!==0){let se=((te-F)*fe+(N-W)*me)/(fe*fe+me*me);se>1?(F=Q,W=ce):se>0&&(F+=fe*se,W+=me*se)}return fe=te-F,me=N-W,fe*fe+me*me}function Za(te,N,F,W){let Q={id:te==null?null:te,type:N,geometry:F,tags:W,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(N==="Point"||N==="MultiPoint"||N==="LineString")_o(Q,F);else if(N==="Polygon")_o(Q,F[0]);else if(N==="MultiLineString")for(let ce of F)_o(Q,ce);else if(N==="MultiPolygon")for(let ce of F)_o(Q,ce[0]);return Q}function _o(te,N){for(let F=0;F<N.length;F+=3)te.minX=Math.min(te.minX,N[F]),te.minY=Math.min(te.minY,N[F+1]),te.maxX=Math.max(te.maxX,N[F]),te.maxY=Math.max(te.maxY,N[F+1])}function xo(te,N,F,W){if(!N.geometry)return;let Q=N.geometry.coordinates;if(Q&&Q.length===0)return;let ce=N.geometry.type,fe=Math.pow(F.tolerance/((1<<F.maxZoom)*F.extent),2),me=[],se=N.id;if(F.promoteId?se=N.properties[F.promoteId]:F.generateId&&(se=W||0),ce==="Point")Js(Q,me);else if(ce==="MultiPoint")for(let Ie of Q)Js(Ie,me);else if(ce==="LineString")Se(Q,me,fe,!1);else if(ce==="MultiLineString"){if(F.lineMetrics){for(let Ie of Q)me=[],Se(Ie,me,fe,!1),te.push(Za(se,"LineString",me,N.properties));return}is(Q,me,fe,!1)}else if(ce==="Polygon")is(Q,me,fe,!0);else{if(ce!=="MultiPolygon"){if(ce==="GeometryCollection"){for(let Ie of N.geometry.geometries)xo(te,{id:se,geometry:Ie,properties:N.properties},F,W);return}throw new Error("Input data is not a valid GeoJSON object.")}for(let Ie of Q){let Ae=[];is(Ie,Ae,fe,!0),me.push(Ae)}}te.push(Za(se,ce,me,N.properties))}function Js(te,N){N.push(kl(te[0]),Vt(te[1]),0)}function Se(te,N,F,W){let Q,ce,fe=0;for(let se=0;se<te.length;se++){let Ie=kl(te[se][0]),Ae=Vt(te[se][1]);N.push(Ie,Ae,0),se>0&&(fe+=W?(Q*Ae-Ie*ce)/2:Math.sqrt(Math.pow(Ie-Q,2)+Math.pow(Ae-ce,2))),Q=Ie,ce=Ae}let me=N.length-3;N[2]=1,rs(N,0,me,F),N[me+2]=1,N.size=Math.abs(fe),N.start=0,N.end=N.size}function is(te,N,F,W){for(let Q=0;Q<te.length;Q++){let ce=[];Se(te[Q],ce,F,W),N.push(ce)}}function kl(te){return te/360+.5}function Vt(te){let N=Math.sin(te*Math.PI/180),F=.5-.25*Math.log((1+N)/(1-N))/Math.PI;return F<0?0:F>1?1:F}function xr(te,N,F,W,Q,ce,fe,me){if(W/=N,ce>=(F/=N)&&fe<W)return te;if(fe<F||ce>=W)return null;let se=[];for(let Ie of te){let Ae=Ie.geometry,we=Ie.type,ke=Q===0?Ie.minX:Ie.minY,st=Q===0?Ie.maxX:Ie.maxY;if(ke>=F&&st<W){se.push(Ie);continue}if(st<F||ke>=W)continue;let lt=[];if(we==="Point"||we==="MultiPoint")Dl(Ae,lt,F,W,Q);else if(we==="LineString")bo(Ae,lt,F,W,Q,!1,me.lineMetrics);else if(we==="MultiLineString")Qs(Ae,lt,F,W,Q,!1);else if(we==="Polygon")Qs(Ae,lt,F,W,Q,!0);else if(we==="MultiPolygon")for(let Bt of Ae){let St=[];Qs(Bt,St,F,W,Q,!0),St.length&&lt.push(St)}if(lt.length){if(me.lineMetrics&&we==="LineString"){for(let Bt of lt)se.push(Za(Ie.id,we,Bt,Ie.tags));continue}we!=="LineString"&&we!=="MultiLineString"||(lt.length===1?(we="LineString",lt=lt[0]):we="MultiLineString"),we!=="Point"&&we!=="MultiPoint"||(we=lt.length===3?"Point":"MultiPoint"),se.push(Za(Ie.id,we,lt,Ie.tags))}}return se.length?se:null}function Dl(te,N,F,W,Q){for(let ce=0;ce<te.length;ce+=3){let fe=te[ce+Q];fe>=F&&fe<=W&&bn(N,te[ce],te[ce+1],te[ce+2])}}function bo(te,N,F,W,Q,ce,fe){let me=Ka(te),se=Q===0?Ll:zl,Ie,Ae,we=te.start;for(let St=0;St<te.length-3;St+=3){let jt=te[St],Dt=te[St+1],Dr=te[St+2],br=te[St+3],Pt=te[St+4],Kt=Q===0?jt:Dt,pr=Q===0?br:Pt,Zr=!1;fe&&(Ie=Math.sqrt(Math.pow(jt-br,2)+Math.pow(Dt-Pt,2))),Kt<F?pr>F&&(Ae=se(me,jt,Dt,br,Pt,F),fe&&(me.start=we+Ie*Ae)):Kt>W?pr<W&&(Ae=se(me,jt,Dt,br,Pt,W),fe&&(me.start=we+Ie*Ae)):bn(me,jt,Dt,Dr),pr<F&&Kt>=F&&(Ae=se(me,jt,Dt,br,Pt,F),Zr=!0),pr>W&&Kt<=W&&(Ae=se(me,jt,Dt,br,Pt,W),Zr=!0),!ce&&Zr&&(fe&&(me.end=we+Ie*Ae),N.push(me),me=Ka(te)),fe&&(we+=Ie)}let ke=te.length-3,st=te[ke],lt=te[ke+1],Bt=Q===0?st:lt;Bt>=F&&Bt<=W&&bn(me,st,lt,te[ke+2]),ke=me.length-3,ce&&ke>=3&&(me[ke]!==me[0]||me[ke+1]!==me[1])&&bn(me,me[0],me[1],me[2]),me.length&&N.push(me)}function Ka(te){let N=[];return N.size=te.size,N.start=te.start,N.end=te.end,N}function Qs(te,N,F,W,Q,ce){for(let fe of te)bo(fe,N,F,W,Q,ce,!1)}function bn(te,N,F,W){te.push(N,F,W)}function Ll(te,N,F,W,Q,ce){let fe=(ce-N)/(W-N);return bn(te,ce,F+(Q-F)*fe,1),fe}function zl(te,N,F,W,Q,ce){let fe=(ce-F)/(Q-F);return bn(te,N+(W-N)*fe,ce,1),fe}function Re(te,N){let F=[];for(let W=0;W<te.length;W++){let Q=te[W],ce=Q.type,fe;if(ce==="Point"||ce==="MultiPoint"||ce==="LineString")fe=ma(Q.geometry,N);else if(ce==="MultiLineString"||ce==="Polygon"){fe=[];for(let me of Q.geometry)fe.push(ma(me,N))}else if(ce==="MultiPolygon"){fe=[];for(let me of Q.geometry){let se=[];for(let Ie of me)se.push(ma(Ie,N));fe.push(se)}}F.push(Za(Q.id,ce,fe,Q.tags))}return F}function ma(te,N){let F=[];F.size=te.size,te.start!==void 0&&(F.start=te.start,F.end=te.end);for(let W=0;W<te.length;W+=3)F.push(te[W]+N,te[W+1],te[W+2]);return F}function Si(te,N){if(te.transformed)return te;let F=1<<te.z,W=te.x,Q=te.y;for(let ce of te.features){let fe=ce.geometry,me=ce.type;if(ce.geometry=[],me===1)for(let se=0;se<fe.length;se+=2)ce.geometry.push(va(fe[se],fe[se+1],N,F,W,Q));else for(let se=0;se<fe.length;se++){let Ie=[];for(let Ae=0;Ae<fe[se].length;Ae+=2)Ie.push(va(fe[se][Ae],fe[se][Ae+1],N,F,W,Q));ce.geometry.push(Ie)}}return te.transformed=!0,te}function va(te,N,F,W,Q,ce){return[Math.round(F*(te*W-Q)),Math.round(F*(N*W-ce))]}function wo(te,N,F,W,Q){let ce=N===Q.maxZoom?0:Q.tolerance/((1<<N)*Q.extent),fe={features:[],numPoints:0,numSimplified:0,numFeatures:te.length,source:null,x:F,y:W,z:N,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(let me of te)Fe(fe,me,ce,Q);return fe}function Fe(te,N,F,W){let Q=N.geometry,ce=N.type,fe=[];if(te.minX=Math.min(te.minX,N.minX),te.minY=Math.min(te.minY,N.minY),te.maxX=Math.max(te.maxX,N.maxX),te.maxY=Math.max(te.maxY,N.maxY),ce==="Point"||ce==="MultiPoint")for(let me=0;me<Q.length;me+=3)fe.push(Q[me],Q[me+1]),te.numPoints++,te.numSimplified++;else if(ce==="LineString")At(fe,Q,te,F,!1,!1);else if(ce==="MultiLineString"||ce==="Polygon")for(let me=0;me<Q.length;me++)At(fe,Q[me],te,F,ce==="Polygon",me===0);else if(ce==="MultiPolygon")for(let me=0;me<Q.length;me++){let se=Q[me];for(let Ie=0;Ie<se.length;Ie++)At(fe,se[Ie],te,F,!0,Ie===0)}if(fe.length){let me=N.tags||null;if(ce==="LineString"&&W.lineMetrics){me={};for(let Ie in N.tags)me[Ie]=N.tags[Ie];me.mapbox_clip_start=Q.start/Q.size,me.mapbox_clip_end=Q.end/Q.size}let se={geometry:fe,type:ce==="Polygon"||ce==="MultiPolygon"?3:ce==="LineString"||ce==="MultiLineString"?2:1,tags:me};N.id!==null&&(se.id=N.id),te.features.push(se)}}function At(te,N,F,W,Q,ce){let fe=W*W;if(W>0&&N.size<(Q?fe:W))return void(F.numPoints+=N.length/3);let me=[];for(let se=0;se<N.length;se+=3)(W===0||N[se+2]>fe)&&(F.numSimplified++,me.push(N[se],N[se+1])),F.numPoints++;Q&&function(se,Ie){let Ae=0;for(let we=0,ke=se.length,st=ke-2;we<ke;st=we,we+=2)Ae+=(se[we]-se[st])*(se[we+1]+se[st+1]);if(Ae>0===Ie)for(let we=0,ke=se.length;we<ke/2;we+=2){let st=se[we],lt=se[we+1];se[we]=se[ke-2-we],se[we+1]=se[ke-1-we],se[ke-2-we]=st,se[ke-1-we]=lt}}(me,ce),te.push(me)}let dt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ji{constructor(N,F){let W=(F=this.options=function(ce,fe){for(let me in fe)ce[me]=fe[me];return ce}(Object.create(dt),F)).debug;if(W&&console.time("preprocess data"),F.maxZoom<0||F.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(F.promoteId&&F.generateId)throw new Error("promoteId and generateId cannot be used together.");let Q=function(ce,fe){let me=[];if(ce.type==="FeatureCollection")for(let se=0;se<ce.features.length;se++)xo(me,ce.features[se],fe,se);else xo(me,ce.type==="Feature"?ce:{geometry:ce},fe);return me}(N,F);this.tiles={},this.tileCoords=[],W&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",F.indexMaxZoom,F.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Q=function(ce,fe){let me=fe.buffer/fe.extent,se=ce,Ie=xr(ce,1,-1-me,me,0,-1,2,fe),Ae=xr(ce,1,1-me,2+me,0,-1,2,fe);return(Ie||Ae)&&(se=xr(ce,1,-me,1+me,0,-1,2,fe)||[],Ie&&(se=Re(Ie,1).concat(se)),Ae&&(se=se.concat(Re(Ae,-1)))),se}(Q,F),Q.length&&this.splitTile(Q,0,0,0),W&&(Q.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(N,F,W,Q,ce,fe,me){let se=[N,F,W,Q],Ie=this.options,Ae=Ie.debug;for(;se.length;){Q=se.pop(),W=se.pop(),F=se.pop(),N=se.pop();let we=1<<F,ke=Wn(F,W,Q),st=this.tiles[ke];if(!st&&(Ae>1&&console.time("creation"),st=this.tiles[ke]=wo(N,F,W,Q,Ie),this.tileCoords.push({z:F,x:W,y:Q}),Ae)){Ae>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",F,W,Q,st.numFeatures,st.numPoints,st.numSimplified),console.timeEnd("creation"));let Zr=`z${F}`;this.stats[Zr]=(this.stats[Zr]||0)+1,this.total++}if(st.source=N,ce==null){if(F===Ie.indexMaxZoom||st.numPoints<=Ie.indexMaxPoints)continue}else{if(F===Ie.maxZoom||F===ce)continue;if(ce!=null){let Zr=ce-F;if(W!==fe>>Zr||Q!==me>>Zr)continue}}if(st.source=null,N.length===0)continue;Ae>1&&console.time("clipping");let lt=.5*Ie.buffer/Ie.extent,Bt=.5-lt,St=.5+lt,jt=1+lt,Dt=null,Dr=null,br=null,Pt=null,Kt=xr(N,we,W-lt,W+St,0,st.minX,st.maxX,Ie),pr=xr(N,we,W+Bt,W+jt,0,st.minX,st.maxX,Ie);N=null,Kt&&(Dt=xr(Kt,we,Q-lt,Q+St,1,st.minY,st.maxY,Ie),Dr=xr(Kt,we,Q+Bt,Q+jt,1,st.minY,st.maxY,Ie),Kt=null),pr&&(br=xr(pr,we,Q-lt,Q+St,1,st.minY,st.maxY,Ie),Pt=xr(pr,we,Q+Bt,Q+jt,1,st.minY,st.maxY,Ie),pr=null),Ae>1&&console.timeEnd("clipping"),se.push(Dt||[],F+1,2*W,2*Q),se.push(Dr||[],F+1,2*W,2*Q+1),se.push(br||[],F+1,2*W+1,2*Q),se.push(Pt||[],F+1,2*W+1,2*Q+1)}}getTile(N,F,W){N=+N,F=+F,W=+W;let Q=this.options,{extent:ce,debug:fe}=Q;if(N<0||N>24)return null;let me=1<<N,se=Wn(N,F=F+me&me-1,W);if(this.tiles[se])return Si(this.tiles[se],ce);fe>1&&console.log("drilling down to z%d-%d-%d",N,F,W);let Ie,Ae=N,we=F,ke=W;for(;!Ie&&Ae>0;)Ae--,we>>=1,ke>>=1,Ie=this.tiles[Wn(Ae,we,ke)];return Ie&&Ie.source?(fe>1&&(console.log("found parent tile z%d-%d-%d",Ae,we,ke),console.time("drilling down")),this.splitTile(Ie.source,Ae,we,ke,N,F,W),fe>1&&console.timeEnd("drilling down"),this.tiles[se]?Si(this.tiles[se],ce):null):null}}function Wn(te,N,F){return 32*((1<<te)*F+N)+te}function bt(te,N){return N?te.properties[N]:te.id}function ga(te,N){if(te==null)return!0;if(te.type==="Feature")return bt(te,N)!=null;if(te.type==="FeatureCollection"){let F=new Set;for(let W of te.features){let Q=bt(W,N);if(Q==null||F.has(Q))return!1;F.add(Q)}return!0}return!1}function Xa(te,N){let F=new Map;if(te!=null)if(te.type==="Feature")F.set(bt(te,N),te);else for(let W of te.features)F.set(bt(W,N),W);return F}class So extends T{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(N,F){return l._(this,void 0,void 0,function*(){let W=N.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");let Q=this._geoJSONIndex.getTile(W.z,W.x,W.y);if(!Q)return null;let ce=new class{constructor(me){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=l.X,this.length=me.length,this._features=me}feature(me){return new class{constructor(se){this._feature=se,this.extent=l.X,this.type=se.type,this.properties=se.tags,"id"in se&&!isNaN(se.id)&&(this.id=parseInt(se.id,10))}loadGeometry(){if(this._feature.type===1){let se=[];for(let Ie of this._feature.geometry)se.push([new l.P(Ie[0],Ie[1])]);return se}{let se=[];for(let Ie of this._feature.geometry){let Ae=[];for(let we of Ie)Ae.push(new l.P(we[0],we[1]));se.push(Ae)}return se}}toGeoJSON(se,Ie,Ae){return xe.call(this,se,Ie,Ae)}}(this._features[me])}}(Q.features),fe=da(ce);return fe.byteOffset===0&&fe.byteLength===fe.buffer.byteLength||(fe=new Uint8Array(fe)),{vectorTile:ce,rawData:fe.buffer}})}loadData(N){return l._(this,void 0,void 0,function*(){var F;(F=this._pendingRequest)===null||F===void 0||F.abort();let W=!!(N&&N.request&&N.request.collectResourceTiming)&&new l.bv(N.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(N,this._pendingRequest),this._geoJSONIndex=N.cluster?new yo(function({superclusterOptions:fe,clusterProperties:me}){if(!me||!fe)return fe;let se={},Ie={},Ae={accumulated:null,zoom:0},we={properties:null},ke=Object.keys(me);for(let st of ke){let[lt,Bt]=me[st],St=l.bC(Bt),jt=l.bC(typeof lt=="string"?[lt,["accumulated"],["get",st]]:lt);se[st]=St.value,Ie[st]=jt.value}return fe.map=st=>{we.properties=st;let lt={};for(let Bt of ke)lt[Bt]=se[Bt].evaluate(Ae,we);return lt},fe.reduce=(st,lt)=>{we.properties=lt;for(let Bt of ke)Ae.accumulated=st[Bt],st[Bt]=Ie[Bt].evaluate(Ae,we)},fe}(N)).load((yield this._pendingData).features):(Q=yield this._pendingData,new ji(Q,N.geojsonVtOptions)),this.loaded={};let ce={};if(W){let fe=W.finish();fe&&(ce.resourceTiming={},ce.resourceTiming[N.source]=JSON.parse(JSON.stringify(fe)))}return ce}catch(ce){if(delete this._pendingRequest,l.bB(ce))return{abandoned:!0};throw ce}var Q})}getData(){return l._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(N){let F=this.loaded;return F&&F[N.uid]?super.reloadTile(N):this.loadTile(N)}loadAndProcessGeoJSON(N,F){return l._(this,void 0,void 0,function*(){let W=yield this.loadGeoJSON(N,F);if(delete this._pendingRequest,typeof W!="object")throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`);if(oe(W,!0),N.filter){let Q=l.bC(N.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Q.result==="error")throw new Error(Q.value.map(fe=>`${fe.key}: ${fe.message}`).join(", "));W={type:"FeatureCollection",features:W.features.filter(fe=>Q.value.evaluate({zoom:0},fe))}}return W})}loadGeoJSON(N,F){return l._(this,void 0,void 0,function*(){let{promoteId:W}=N;if(N.request){let Q=yield l.h(N.request,F);return this._dataUpdateable=ga(Q.data,W)?Xa(Q.data,W):void 0,Q.data}if(typeof N.data=="string")try{let Q=JSON.parse(N.data);return this._dataUpdateable=ga(Q,W)?Xa(Q,W):void 0,Q}catch(Q){throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`)}if(!N.dataDiff)throw new Error(`Input data given to '${N.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${N.source}`);return function(Q,ce,fe){var me,se,Ie,Ae;if(ce.removeAll&&Q.clear(),ce.remove)for(let we of ce.remove)Q.delete(we);if(ce.add)for(let we of ce.add){let ke=bt(we,fe);ke!=null&&Q.set(ke,we)}if(ce.update)for(let we of ce.update){let ke=Q.get(we.id);if(ke==null)continue;let st=!we.removeAllProperties&&(((me=we.removeProperties)===null||me===void 0?void 0:me.length)>0||((se=we.addOrUpdateProperties)===null||se===void 0?void 0:se.length)>0);if((we.newGeometry||we.removeAllProperties||st)&&(ke=Object.assign({},ke),Q.set(we.id,ke),st&&(ke.properties=Object.assign({},ke.properties))),we.newGeometry&&(ke.geometry=we.newGeometry),we.removeAllProperties)ke.properties={};else if(((Ie=we.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(let lt of we.removeProperties)Object.prototype.hasOwnProperty.call(ke.properties,lt)&&delete ke.properties[lt];if(((Ae=we.addOrUpdateProperties)===null||Ae===void 0?void 0:Ae.length)>0)for(let{key:lt,value:Bt}of we.addOrUpdateProperties)ke.properties[lt]=Bt}}(this._dataUpdateable,N.dataDiff,W),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(N){return l._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(N){return this._geoJSONIndex.getClusterExpansionZoom(N.clusterId)}getClusterChildren(N){return this._geoJSONIndex.getChildren(N.clusterId)}getClusterLeaves(N){return this._geoJSONIndex.getLeaves(N.clusterId,N.limit,N.offset)}}class ya{constructor(N){this.self=N,this.actor=new l.F(N),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(F,W)=>{if(this.externalWorkerSourceTypes[F])throw new Error(`Worker source with name "${F}" already registered.`);this.externalWorkerSourceTypes[F]=W},this.self.addProtocol=l.bi,this.self.removeProtocol=l.bj,this.self.registerRTLTextPlugin=F=>{if(l.bD.isParsed())throw new Error("RTL text plugin already registered.");l.bD.setMethods(F)},this.actor.registerMessageHandler("LDT",(F,W)=>this._getDEMWorkerSource(F,W.source).loadTile(W)),this.actor.registerMessageHandler("RDT",(F,W)=>l._(this,void 0,void 0,function*(){this._getDEMWorkerSource(F,W.source).removeTile(W)})),this.actor.registerMessageHandler("GCEZ",(F,W)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(F,W.type,W.source).getClusterExpansionZoom(W)})),this.actor.registerMessageHandler("GCC",(F,W)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(F,W.type,W.source).getClusterChildren(W)})),this.actor.registerMessageHandler("GCL",(F,W)=>l._(this,void 0,void 0,function*(){return this._getWorkerSource(F,W.type,W.source).getClusterLeaves(W)})),this.actor.registerMessageHandler("LD",(F,W)=>this._getWorkerSource(F,W.type,W.source).loadData(W)),this.actor.registerMessageHandler("GD",(F,W)=>this._getWorkerSource(F,W.type,W.source).getData()),this.actor.registerMessageHandler("LT",(F,W)=>this._getWorkerSource(F,W.type,W.source).loadTile(W)),this.actor.registerMessageHandler("RT",(F,W)=>this._getWorkerSource(F,W.type,W.source).reloadTile(W)),this.actor.registerMessageHandler("AT",(F,W)=>this._getWorkerSource(F,W.type,W.source).abortTile(W)),this.actor.registerMessageHandler("RMT",(F,W)=>this._getWorkerSource(F,W.type,W.source).removeTile(W)),this.actor.registerMessageHandler("RS",(F,W)=>l._(this,void 0,void 0,function*(){if(!this.workerSources[F]||!this.workerSources[F][W.type]||!this.workerSources[F][W.type][W.source])return;let Q=this.workerSources[F][W.type][W.source];delete this.workerSources[F][W.type][W.source],Q.removeSource!==void 0&&Q.removeSource(W)})),this.actor.registerMessageHandler("RM",F=>l._(this,void 0,void 0,function*(){delete this.layerIndexes[F],delete this.availableImages[F],delete this.workerSources[F],delete this.demWorkerSources[F]})),this.actor.registerMessageHandler("SR",(F,W)=>l._(this,void 0,void 0,function*(){this.referrer=W})),this.actor.registerMessageHandler("SRPS",(F,W)=>this._syncRTLPluginState(F,W)),this.actor.registerMessageHandler("IS",(F,W)=>l._(this,void 0,void 0,function*(){this.self.importScripts(W)})),this.actor.registerMessageHandler("SI",(F,W)=>this._setImages(F,W)),this.actor.registerMessageHandler("UL",(F,W)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(F).update(W.layers,W.removedIds)})),this.actor.registerMessageHandler("SL",(F,W)=>l._(this,void 0,void 0,function*(){this._getLayerIndex(F).replace(W)}))}_setImages(N,F){return l._(this,void 0,void 0,function*(){this.availableImages[N]=F;for(let W in this.workerSources[N]){let Q=this.workerSources[N][W];for(let ce in Q)Q[ce].availableImages=F}})}_syncRTLPluginState(N,F){return l._(this,void 0,void 0,function*(){if(l.bD.isParsed())return l.bD.getState();if(F.pluginStatus!=="loading")return l.bD.setState(F),F;let W=F.pluginURL;if(this.self.importScripts(W),l.bD.isParsed()){let Q={pluginStatus:"loaded",pluginURL:W};return l.bD.setState(Q),Q}throw l.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${W}`)})}_getAvailableImages(N){let F=this.availableImages[N];return F||(F=[]),F}_getLayerIndex(N){let F=this.layerIndexes[N];return F||(F=this.layerIndexes[N]=new o),F}_getWorkerSource(N,F,W){if(this.workerSources[N]||(this.workerSources[N]={}),this.workerSources[N][F]||(this.workerSources[N][F]={}),!this.workerSources[N][F][W]){let Q={sendAsync:(ce,fe)=>(ce.targetMapId=N,this.actor.sendAsync(ce,fe))};switch(F){case"vector":this.workerSources[N][F][W]=new T(Q,this._getLayerIndex(N),this._getAvailableImages(N));break;case"geojson":this.workerSources[N][F][W]=new So(Q,this._getLayerIndex(N),this._getAvailableImages(N));break;default:this.workerSources[N][F][W]=new this.externalWorkerSourceTypes[F](Q,this._getLayerIndex(N),this._getAvailableImages(N));}}return this.workerSources[N][F][W]}_getDEMWorkerSource(N,F){return this.demWorkerSources[N]||(this.demWorkerSources[N]={}),this.demWorkerSources[N][F]||(this.demWorkerSources[N][F]=new C),this.demWorkerSources[N][F]}}return l.i(self)&&(self.worker=new ya(self)),ya}),n("index",["exports","./shared"],function(l,o){"use strict";var _="4.7.1";let b,E,T={now:typeof performance!="undefined"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise((r,c)=>{let f=requestAnimationFrame(r);v.signal.addEventListener("abort",()=>{cancelAnimationFrame(f),c(o.c())})}),getImageData(v,r=0){return this.getImageCanvasContext(v).getImageData(-r,-r,v.width+2*r,v.height+2*r)},getImageCanvasContext(v){let r=window.document.createElement("canvas"),c=r.getContext("2d",{willReadFrequently:!0});if(!c)throw new Error("failed to create canvas 2d context");return r.width=v.width,r.height=v.height,c.drawImage(v,0,0,v.width,v.height),c},resolveURL:v=>(b||(b=document.createElement("a")),b.href=v,b.href),hardwareConcurrency:typeof navigator!="undefined"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(E==null&&(E=matchMedia("(prefers-reduced-motion: reduce)")),E.matches)}};class C{static testProp(r){if(!C.docStyle)return r[0];for(let c=0;c<r.length;c++)if(r[c]in C.docStyle)return r[c];return r[0]}static create(r,c,f){let d=window.document.createElement(r);return c!==void 0&&(d.className=c),f&&f.appendChild(d),d}static createNS(r,c){return window.document.createElementNS(r,c)}static disableDrag(){C.docStyle&&C.selectProp&&(C.userSelect=C.docStyle[C.selectProp],C.docStyle[C.selectProp]="none")}static enableDrag(){C.docStyle&&C.selectProp&&(C.docStyle[C.selectProp]=C.userSelect)}static setTransform(r,c){r.style[C.transformProp]=c}static addEventListener(r,c,f,d={}){r.addEventListener(c,f,"passive"in d?d:d.capture)}static removeEventListener(r,c,f,d={}){r.removeEventListener(c,f,"passive"in d?d:d.capture)}static suppressClickInternal(r){r.preventDefault(),r.stopPropagation(),window.removeEventListener("click",C.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",C.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",C.suppressClickInternal,!0)},0)}static getScale(r){let c=r.getBoundingClientRect();return{x:c.width/r.offsetWidth||1,y:c.height/r.offsetHeight||1,boundingClientRect:c}}static getPoint(r,c,f){let d=c.boundingClientRect;return new o.P((f.clientX-d.left)/c.x-r.clientLeft,(f.clientY-d.top)/c.y-r.clientTop)}static mousePos(r,c){let f=C.getScale(r);return C.getPoint(r,f,c)}static touchPos(r,c){let f=[],d=C.getScale(r);for(let m=0;m<c.length;m++)f.push(C.getPoint(r,d,c[m]));return f}static mouseButton(r){return r.button}static remove(r){r.parentNode&&r.parentNode.removeChild(r)}}C.docStyle=typeof window!="undefined"&&window.document&&window.document.documentElement.style,C.selectProp=C.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),C.transformProp=C.testProp(["transform","WebkitTransform"]);let z={supported:!1,testSupport:function(v){!xe&&oe&&(_e?X(v):$=v)}},$,oe,xe=!1,_e=!1;function X(v){let r=v.createTexture();v.bindTexture(v.TEXTURE_2D,r);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,oe),v.isContextLost())return;z.supported=!0}catch(c){}v.deleteTexture(r),xe=!0}var K;typeof document!="undefined"&&(oe=document.createElement("img"),oe.onload=()=>{$&&X($),$=null,_e=!0},oe.onerror=()=>{xe=!0,$=null},oe.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(v){let r,c,f,d;v.resetRequestQueue=()=>{r=[],c=0,f=0,d={}},v.addThrottleControl=A=>{let O=f++;return d[O]=A,O},v.removeThrottleControl=A=>{delete d[A],w()},v.getImage=(A,O,k=!0)=>new Promise((D,j)=>{z.supported&&(A.headers||(A.headers={}),A.headers.accept="image/webp,*/*"),o.e(A,{type:"image"}),r.push({abortController:O,requestParameters:A,supportImageRefresh:k,state:"queued",onError:H=>{j(H)},onSuccess:H=>{D(H)}}),w()});let m=A=>o._(this,void 0,void 0,function*(){A.state="running";let{requestParameters:O,supportImageRefresh:k,onError:D,onSuccess:j,abortController:H}=A,Z=k===!1&&!o.i(self)&&!o.g(O.url)&&(!O.headers||Object.keys(O.headers).reduce((ae,ue)=>ae&&ue==="accept",!0));c++;let ee=Z?I(O,H):o.m(O,H);try{let ae=yield ee;delete A.abortController,A.state="completed",ae.data instanceof HTMLImageElement||o.b(ae.data)?j(ae):ae.data&&j({data:yield(ne=ae.data,typeof createImageBitmap=="function"?o.d(ne):o.f(ne)),cacheControl:ae.cacheControl,expires:ae.expires})}catch(ae){delete A.abortController,D(ae)}finally{c--,w()}var ne}),w=()=>{let A=(()=>{for(let O of Object.keys(d))if(d[O]())return!0;return!1})()?o.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let O=c;O<A&&r.length>0;O++){let k=r.shift();k.abortController.signal.aborted?O--:m(k)}},I=(A,O)=>new Promise((k,D)=>{let j=new Image,H=A.url,Z=A.credentials;Z&&Z==="include"?j.crossOrigin="use-credentials":(Z&&Z==="same-origin"||!o.s(H))&&(j.crossOrigin="anonymous"),O.signal.addEventListener("abort",()=>{j.src="",D(o.c())}),j.fetchPriority="high",j.onload=()=>{j.onerror=j.onload=null,k({data:j})},j.onerror=()=>{j.onerror=j.onload=null,O.signal.aborted||D(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},j.src=H})}(K||(K={})),K.resetRequestQueue();class re{constructor(r){this._transformRequestFn=r}transformRequest(r,c){return this._transformRequestFn&&this._transformRequestFn(r,c)||{url:r}}setTransformRequest(r){this._transformRequestFn=r}}function ge(v){var r=new o.A(3);return r[0]=v[0],r[1]=v[1],r[2]=v[2],r}var be,et=function(v,r,c){return v[0]=r[0]-c[0],v[1]=r[1]-c[1],v[2]=r[2]-c[2],v};be=new o.A(3),o.A!=Float32Array&&(be[0]=0,be[1]=0,be[2]=0);var Le=function(v){var r=v[0],c=v[1];return r*r+c*c};function nt(v){let r=[];if(typeof v=="string")r.push({id:"default",url:v});else if(v&&v.length>0){let c=[];for(let{id:f,url:d}of v){let m=`${f}${d}`;c.indexOf(m)===-1&&(c.push(m),r.push({id:f,url:d}))}}return r}function gt(v,r,c){let f=v.split("?");return f[0]+=`${r}${c}`,f.join("?")}(function(){var v=new o.A(2);o.A!=Float32Array&&(v[0]=0,v[1]=0)})();class Qe{constructor(r,c,f,d){this.context=r,this.format=f,this.texture=r.gl.createTexture(),this.update(c,d)}update(r,c,f){let{width:d,height:m}=r,w=!(this.size&&this.size[0]===d&&this.size[1]===m||f),{context:I}=this,{gl:A}=I;if(this.useMipmap=!!(c&&c.useMipmap),A.bindTexture(A.TEXTURE_2D,this.texture),I.pixelStoreUnpackFlipY.set(!1),I.pixelStoreUnpack.set(1),I.pixelStoreUnpackPremultiplyAlpha.set(this.format===A.RGBA&&(!c||c.premultiply!==!1)),w)this.size=[d,m],r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?A.texImage2D(A.TEXTURE_2D,0,this.format,this.format,A.UNSIGNED_BYTE,r):A.texImage2D(A.TEXTURE_2D,0,this.format,d,m,0,this.format,A.UNSIGNED_BYTE,r.data);else{let{x:O,y:k}=f||{x:0,y:0};r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageData||o.b(r)?A.texSubImage2D(A.TEXTURE_2D,0,O,k,A.RGBA,A.UNSIGNED_BYTE,r):A.texSubImage2D(A.TEXTURE_2D,0,O,k,d,m,A.RGBA,A.UNSIGNED_BYTE,r.data)}this.useMipmap&&this.isSizePowerOfTwo()&&A.generateMipmap(A.TEXTURE_2D)}bind(r,c,f){let{context:d}=this,{gl:m}=d;m.bindTexture(m.TEXTURE_2D,this.texture),f!==m.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=m.LINEAR),r!==this.filter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,r),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,f||r),this.filter=r),c!==this.wrap&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,c),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,c),this.wrap=c)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){let{gl:r}=this.context;r.deleteTexture(this.texture),this.texture=null}}function nn(v){let{userImage:r}=v;return!!(r&&r.render&&r.render())&&(v.data.replace(new Uint8Array(r.data.buffer)),!0)}class Wr extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(r){if(this.loaded!==r&&(this.loaded=r,r)){for(let{ids:c,promiseResolve:f}of this.requestors)f(this._getImagesForIds(c));this.requestors=[]}}getImage(r){let c=this.images[r];if(c&&!c.data&&c.spriteData){let f=c.spriteData;c.data=new o.R({width:f.width,height:f.height},f.context.getImageData(f.x,f.y,f.width,f.height).data),c.spriteData=null}return c}addImage(r,c){if(this.images[r])throw new Error(`Image id ${r} already exist, use updateImage instead`);this._validate(r,c)&&(this.images[r]=c)}_validate(r,c){let f=!0,d=c.data||c.spriteData;return this._validateStretch(c.stretchX,d&&d.width)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "stretchX" value`))),f=!1),this._validateStretch(c.stretchY,d&&d.height)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "stretchY" value`))),f=!1),this._validateContent(c.content,c)||(this.fire(new o.j(new Error(`Image "${r}" has invalid "content" value`))),f=!1),f}_validateStretch(r,c){if(!r)return!0;let f=0;for(let d of r){if(d[0]<f||d[1]<d[0]||c<d[1])return!1;f=d[1]}return!0}_validateContent(r,c){if(!r)return!0;if(r.length!==4)return!1;let f=c.spriteData,d=f&&f.width||c.data.width,m=f&&f.height||c.data.height;return!(r[0]<0||d<r[0]||r[1]<0||m<r[1]||r[2]<0||d<r[2]||r[3]<0||m<r[3]||r[2]<r[0]||r[3]<r[1])}updateImage(r,c,f=!0){let d=this.getImage(r);if(f&&(d.data.width!==c.data.width||d.data.height!==c.data.height))throw new Error(`size mismatch between old image (${d.data.width}x${d.data.height}) and new image (${c.data.width}x${c.data.height}).`);c.version=d.version+1,this.images[r]=c,this.updatedImages[r]=!0}removeImage(r){let c=this.images[r];delete this.images[r],delete this.patterns[r],c.userImage&&c.userImage.onRemove&&c.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(r){return new Promise((c,f)=>{let d=!0;if(!this.isLoaded())for(let m of r)this.images[m]||(d=!1);this.isLoaded()||d?c(this._getImagesForIds(r)):this.requestors.push({ids:r,promiseResolve:c})})}_getImagesForIds(r){let c={};for(let f of r){let d=this.getImage(f);d||(this.fire(new o.k("styleimagemissing",{id:f})),d=this.getImage(f)),d?c[f]={data:d.data.clone(),pixelRatio:d.pixelRatio,sdf:d.sdf,version:d.version,stretchX:d.stretchX,stretchY:d.stretchY,content:d.content,textFitWidth:d.textFitWidth,textFitHeight:d.textFitHeight,hasRenderCallback:!!(d.userImage&&d.userImage.render)}:o.w(`Image "${f}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return c}getPixelSize(){let{width:r,height:c}=this.atlasImage;return{width:r,height:c}}getPattern(r){let c=this.patterns[r],f=this.getImage(r);if(!f)return null;if(c&&c.position.version===f.version)return c.position;if(c)c.position.version=f.version;else{let d={w:f.data.width+2,h:f.data.height+2,x:0,y:0},m=new o.I(d,f);this.patterns[r]={bin:d,position:m}}return this._updatePatternAtlas(),this.patterns[r].position}bind(r){let c=r.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new Qe(r,this.atlasImage,c.RGBA),this.atlasTexture.bind(c.LINEAR,c.CLAMP_TO_EDGE)}_updatePatternAtlas(){let r=[];for(let m in this.patterns)r.push(this.patterns[m].bin);let{w:c,h:f}=o.p(r),d=this.atlasImage;d.resize({width:c||1,height:f||1});for(let m in this.patterns){let{bin:w}=this.patterns[m],I=w.x+1,A=w.y+1,O=this.getImage(m).data,k=O.width,D=O.height;o.R.copy(O,d,{x:0,y:0},{x:I,y:A},{width:k,height:D}),o.R.copy(O,d,{x:0,y:D-1},{x:I,y:A-1},{width:k,height:1}),o.R.copy(O,d,{x:0,y:0},{x:I,y:A+D},{width:k,height:1}),o.R.copy(O,d,{x:k-1,y:0},{x:I-1,y:A},{width:1,height:D}),o.R.copy(O,d,{x:0,y:0},{x:I+k,y:A},{width:1,height:D})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(r){for(let c of r){if(this.callbackDispatchedThisFrame[c])continue;this.callbackDispatchedThisFrame[c]=!0;let f=this.getImage(c);f||o.w(`Image with ID: "${c}" was not found`),nn(f)&&this.updateImage(c,f)}}}let wi=1e20;function Ha(v,r,c,f,d,m,w,I,A){for(let O=r;O<r+f;O++)Ks(v,c*m+O,m,d,w,I,A);for(let O=c;O<c+d;O++)Ks(v,O*m+r,1,f,w,I,A)}function Ks(v,r,c,f,d,m,w){m[0]=0,w[0]=-wi,w[1]=wi,d[0]=v[r];for(let I=1,A=0,O=0;I<f;I++){d[I]=v[r+I*c];let k=I*I;do{let D=m[A];O=(d[I]-d[D]+k-D*D)/(I-D)/2}while(O<=w[A]&&--A>-1);A++,m[A]=I,w[A]=O,w[A+1]=wi}for(let I=0,A=0;I<f;I++){for(;w[A+1]<I;)A++;let O=m[A],k=I-O;v[r+I*c]=d[O]+k*k}}class da{constructor(r,c){this.requestManager=r,this.localIdeographFontFamily=c,this.entries={}}setURL(r){this.url=r}getGlyphs(r){return o._(this,void 0,void 0,function*(){let c=[];for(let m in r)for(let w of r[m])c.push(this._getAndCacheGlyphsPromise(m,w));let f=yield Promise.all(c),d={};for(let{stack:m,id:w,glyph:I}of f)d[m]||(d[m]={}),d[m][w]=I&&{id:I.id,bitmap:I.bitmap.clone(),metrics:I.metrics};return d})}_getAndCacheGlyphsPromise(r,c){return o._(this,void 0,void 0,function*(){let f=this.entries[r];f||(f=this.entries[r]={glyphs:{},requests:{},ranges:{}});let d=f.glyphs[c];if(d!==void 0)return{stack:r,id:c,glyph:d};if(d=this._tinySDF(f,r,c),d)return f.glyphs[c]=d,{stack:r,id:c,glyph:d};let m=Math.floor(c/256);if(256*m>65535)throw new Error("glyphs > 65535 not supported");if(f.ranges[m])return{stack:r,id:c,glyph:d};if(!this.url)throw new Error("glyphsUrl is not set");if(!f.requests[m]){let I=da.loadGlyphRange(r,m,this.url,this.requestManager);f.requests[m]=I}let w=yield f.requests[m];for(let I in w)this._doesCharSupportLocalGlyph(+I)||(f.glyphs[+I]=w[+I]);return f.ranges[m]=!0,{stack:r,id:c,glyph:w[c]||null}})}_doesCharSupportLocalGlyph(r){return!!this.localIdeographFontFamily&&new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(r))}_tinySDF(r,c,f){let d=this.localIdeographFontFamily;if(!d||!this._doesCharSupportLocalGlyph(f))return;let m=r.tinySDF;if(!m){let I="400";/bold/i.test(c)?I="900":/medium/i.test(c)?I="500":/light/i.test(c)&&(I="200"),m=r.tinySDF=new da.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:d,fontWeight:I})}let w=m.draw(String.fromCharCode(f));return{id:f,bitmap:new o.o({width:w.width||60,height:w.height||60},w.data),metrics:{width:w.glyphWidth/2||24,height:w.glyphHeight/2||24,left:w.glyphLeft/2+.5||0,top:w.glyphTop/2-27.5||-8,advance:w.glyphAdvance/2||24,isDoubleResolution:!0}}}}da.loadGlyphRange=function(v,r,c,f){return o._(this,void 0,void 0,function*(){let d=256*r,m=d+255,w=f.transformRequest(c.replace("{fontstack}",v).replace("{range}",`${d}-${m}`),"Glyphs"),I=yield o.l(w,new AbortController);if(!I||!I.data)throw new Error(`Could not load glyph range. range: ${r}, ${d}-${m}`);let A={};for(let O of o.n(I.data))A[O.id]=O;return A})},da.TinySDF=class{constructor({fontSize:v=24,buffer:r=3,radius:c=8,cutoff:f=.25,fontFamily:d="sans-serif",fontWeight:m="normal",fontStyle:w="normal"}={}){this.buffer=r,this.cutoff=f,this.radius=c;let I=this.size=v+4*r,A=this._createCanvas(I),O=this.ctx=A.getContext("2d",{willReadFrequently:!0});O.font=`${w} ${m} ${v}px ${d}`,O.textBaseline="alphabetic",O.textAlign="left",O.fillStyle="black",this.gridOuter=new Float64Array(I*I),this.gridInner=new Float64Array(I*I),this.f=new Float64Array(I),this.z=new Float64Array(I+1),this.v=new Uint16Array(I)}_createCanvas(v){let r=document.createElement("canvas");return r.width=r.height=v,r}draw(v){let{width:r,actualBoundingBoxAscent:c,actualBoundingBoxDescent:f,actualBoundingBoxLeft:d,actualBoundingBoxRight:m}=this.ctx.measureText(v),w=Math.ceil(c),I=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-d))),A=Math.min(this.size-this.buffer,w+Math.ceil(f)),O=I+2*this.buffer,k=A+2*this.buffer,D=Math.max(O*k,0),j=new Uint8ClampedArray(D),H={data:j,width:O,height:k,glyphWidth:I,glyphHeight:A,glyphTop:w,glyphLeft:0,glyphAdvance:r};if(I===0||A===0)return H;let{ctx:Z,buffer:ee,gridInner:ne,gridOuter:ae}=this;Z.clearRect(ee,ee,I,A),Z.fillText(v,ee,ee+w);let ue=Z.getImageData(ee,ee,I,A);ae.fill(wi,0,D),ne.fill(0,0,D);for(let Y=0;Y<A;Y++)for(let he=0;he<I;he++){let de=ue.data[4*(Y*I+he)+3]/255;if(de===0)continue;let ye=(Y+ee)*O+he+ee;if(de===1)ae[ye]=0,ne[ye]=wi;else{let Te=.5-de;ae[ye]=Te>0?Te*Te:0,ne[ye]=Te<0?Te*Te:0}}Ha(ae,0,0,O,k,O,this.f,this.v,this.z),Ha(ne,ee,ee,I,A,O,this.f,this.v,this.z);for(let Y=0;Y<D;Y++){let he=Math.sqrt(ae[Y])-Math.sqrt(ne[Y]);j[Y]=Math.round(255-255*(he/this.radius+this.cutoff))}return H}};class ah{constructor(){this.specification=o.v.light.position}possiblyEvaluate(r,c){return o.x(r.expression.evaluate(c))}interpolate(r,c,f){return{x:o.y.number(r.x,c.x,f),y:o.y.number(r.y,c.y,f),z:o.y.number(r.z,c.z,f)}}}let es;class Wa extends o.E{constructor(r){super(),es=es||new o.q({anchor:new o.D(o.v.light.anchor),position:new ah,color:new o.D(o.v.light.color),intensity:new o.D(o.v.light.intensity)}),this._transitionable=new o.T(es),this.setLight(r),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(r,c={}){if(!this._validate(o.r,r,c))for(let f in r){let d=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f){return(!f||f.validate!==!1)&&o.t(this,r.call(o.u,{value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v}))}}let Bi=new o.q({"sky-color":new o.D(o.v.sky["sky-color"]),"horizon-color":new o.D(o.v.sky["horizon-color"]),"fog-color":new o.D(o.v.sky["fog-color"]),"fog-ground-blend":new o.D(o.v.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.v.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.v.sky["atmosphere-blend"])});class Gn extends o.E{constructor(r){super(),this._transitionable=new o.T(Bi),this.setSky(r),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.z(0))}setSky(r,c={}){if(!this._validate(o.B,r,c)){r||(r={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(let f in r){let d=r[f];f.endsWith("-transition")?this._transitionable.setTransition(f.slice(0,-11),d):this._transitionable.setValue(f,d)}}}getSky(){return this._transitionable.serialize()}updateTransitions(r){this._transitioning=this._transitionable.transitioned(r,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(r){this.properties=this._transitioning.possiblyEvaluate(r)}_validate(r,c,f={}){return(f==null?void 0:f.validate)!==!1&&o.t(this,r.call(o.u,o.e({value:c,style:{glyphs:!0,sprite:!0},styleSpec:o.v})))}calculateFogBlendOpacity(r){return r<60?0:r<70?(r-60)/10:1}}class Xs{constructor(r,c){this.width=r,this.height=c,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(r,c){let f=r.join(",")+String(c);return this.dashEntry[f]||(this.dashEntry[f]=this.addDash(r,c)),this.dashEntry[f]}getDashRanges(r,c,f){let d=[],m=r.length%2==1?-r[r.length-1]*f:0,w=r[0]*f,I=!0;d.push({left:m,right:w,isDash:I,zeroLength:r[0]===0});let A=r[0];for(let O=1;O<r.length;O++){I=!I;let k=r[O];m=A*f,A+=k,w=A*f,d.push({left:m,right:w,isDash:I,zeroLength:k===0})}return d}addRoundDash(r,c,f){let d=c/2;for(let m=-f;m<=f;m++){let w=this.width*(this.nextRow+f+m),I=0,A=r[I];for(let O=0;O<this.width;O++){O/A.right>1&&(A=r[++I]);let k=Math.abs(O-A.left),D=Math.abs(O-A.right),j=Math.min(k,D),H,Z=m/f*(d+1);if(A.isDash){let ee=d-Math.abs(Z);H=Math.sqrt(j*j+ee*ee)}else H=d-Math.sqrt(j*j+Z*Z);this.data[w+O]=Math.max(0,Math.min(255,H+128))}}}addRegularDash(r){for(let I=r.length-1;I>=0;--I){let A=r[I],O=r[I+1];A.zeroLength?r.splice(I,1):O&&O.isDash===A.isDash&&(O.left=A.left,r.splice(I,1))}let c=r[0],f=r[r.length-1];c.isDash===f.isDash&&(c.left=f.left-this.width,f.right=c.right+this.width);let d=this.width*this.nextRow,m=0,w=r[m];for(let I=0;I<this.width;I++){I/w.right>1&&(w=r[++m]);let A=Math.abs(I-w.left),O=Math.abs(I-w.right),k=Math.min(A,O);this.data[d+I]=Math.max(0,Math.min(255,(w.isDash?k:-k)+128))}}addDash(r,c){let f=c?7:0,d=2*f+1;if(this.nextRow+d>this.height)return o.w("LineAtlas out of space"),null;let m=0;for(let I=0;I<r.length;I++)m+=r[I];if(m!==0){let I=this.width/m,A=this.getDashRanges(r,this.width,I);c?this.addRoundDash(A,I,f):this.addRegularDash(A)}let w={y:(this.nextRow+f+.5)/this.height,height:2*f/this.height,width:m};return this.nextRow+=d,this.dirty=!0,w}bind(r){let c=r.gl;this.texture?(c.bindTexture(c.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,c.texSubImage2D(c.TEXTURE_2D,0,0,0,this.width,this.height,c.ALPHA,c.UNSIGNED_BYTE,this.data))):(this.texture=c.createTexture(),c.bindTexture(c.TEXTURE_2D,this.texture),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.REPEAT),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texImage2D(c.TEXTURE_2D,0,c.ALPHA,this.width,this.height,0,c.ALPHA,c.UNSIGNED_BYTE,this.data))}}let yo="maplibre_preloaded_worker_pool";class pa{constructor(){this.active={}}acquire(r){if(!this.workers)for(this.workers=[];this.workers.length<pa.workerCount;)this.workers.push(new Worker(o.a.WORKER_URL));return this.active[r]=!0,this.workers.slice()}release(r){delete this.active[r],this.numActive()===0&&(this.workers.forEach(c=>{c.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[yo]}numActive(){return Object.keys(this.active).length}}let Ys=Math.floor(T.hardwareConcurrency/2),an,Hn;function ts(){return an||(an=new pa),an}pa.workerCount=o.C(globalThis)?Math.max(Math.min(Ys,3),1):1;class rs{constructor(r,c){this.workerPool=r,this.actors=[],this.currentActor=0,this.id=c;let f=this.workerPool.acquire(c);for(let d=0;d<f.length;d++){let m=new o.F(f[d],c);m.name=`Worker ${d}`,this.actors.push(m)}if(!this.actors.length)throw new Error("No actors found")}broadcast(r,c){let f=[];for(let d of this.actors)f.push(d.sendAsync({type:r,data:c}));return Promise.all(f)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(r=!0){this.actors.forEach(c=>{c.remove()}),this.actors=[],r&&this.workerPool.release(this.id)}registerMessageHandler(r,c){for(let f of this.actors)f.registerMessageHandler(r,c)}}function Rl(){return Hn||(Hn=new rs(ts(),o.G),Hn.registerMessageHandler("GR",(v,r,c)=>o.m(r,c))),Hn}function Za(v,r){let c=o.H();return o.J(c,c,[1,1,0]),o.K(c,c,[.5*v.width,.5*v.height,1]),o.L(c,c,v.calculatePosMatrix(r.toUnwrapped()))}function _o(v,r,c,f,d,m){let w=function(D,j,H){if(D)for(let Z of D){let ee=j[Z];if(ee&&ee.source===H&&ee.type==="fill-extrusion")return!0}else for(let Z in j){let ee=j[Z];if(ee.source===H&&ee.type==="fill-extrusion")return!0}return!1}(d&&d.layers,r,v.id),I=m.maxPitchScaleFactor(),A=v.tilesIn(f,I,w);A.sort(xo);let O=[];for(let D of A)O.push({wrappedTileID:D.tileID.wrapped().key,queryResults:D.tile.queryRenderedFeatures(r,c,v._state,D.queryGeometry,D.cameraQueryGeometry,D.scale,d,m,I,Za(v.transform,D.tileID))});let k=function(D){let j={},H={};for(let Z of D){let ee=Z.queryResults,ne=Z.wrappedTileID,ae=H[ne]=H[ne]||{};for(let ue in ee){let Y=ee[ue],he=ae[ue]=ae[ue]||{},de=j[ue]=j[ue]||[];for(let ye of Y)he[ye.featureIndex]||(he[ye.featureIndex]=!0,de.push(ye))}}return j}(O);for(let D in k)k[D].forEach(j=>{let H=j.feature,Z=v.getFeatureState(H.layer["source-layer"],H.id);H.source=H.layer.source,H.layer["source-layer"]&&(H.sourceLayer=H.layer["source-layer"]),H.state=Z});return k}function xo(v,r){let c=v.tileID,f=r.tileID;return c.overscaledZ-f.overscaledZ||c.canonical.y-f.canonical.y||c.wrap-f.wrap||c.canonical.x-f.canonical.x}function Js(v,r,c){return o._(this,void 0,void 0,function*(){let f=v;if(v.url?f=(yield o.h(r.transformRequest(v.url,"Source"),c)).data:yield T.frameAsync(c),!f)return null;let d=o.M(o.e(f,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in f&&f.vector_layers&&(d.vectorLayerIds=f.vector_layers.map(m=>m.id)),d})}class Se{constructor(r,c){r&&(c?this.setSouthWest(r).setNorthEast(c):Array.isArray(r)&&(r.length===4?this.setSouthWest([r[0],r[1]]).setNorthEast([r[2],r[3]]):this.setSouthWest(r[0]).setNorthEast(r[1])))}setNorthEast(r){return this._ne=r instanceof o.N?new o.N(r.lng,r.lat):o.N.convert(r),this}setSouthWest(r){return this._sw=r instanceof o.N?new o.N(r.lng,r.lat):o.N.convert(r),this}extend(r){let c=this._sw,f=this._ne,d,m;if(r instanceof o.N)d=r,m=r;else{if(!(r instanceof Se))return Array.isArray(r)?r.length===4||r.every(Array.isArray)?this.extend(Se.convert(r)):this.extend(o.N.convert(r)):r&&("lng"in r||"lon"in r)&&"lat"in r?this.extend(o.N.convert(r)):this;if(d=r._sw,m=r._ne,!d||!m)return this}return c||f?(c.lng=Math.min(d.lng,c.lng),c.lat=Math.min(d.lat,c.lat),f.lng=Math.max(m.lng,f.lng),f.lat=Math.max(m.lat,f.lat)):(this._sw=new o.N(d.lng,d.lat),this._ne=new o.N(m.lng,m.lat)),this}getCenter(){return new o.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.N(this.getWest(),this.getNorth())}getSouthEast(){return new o.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(r){let{lng:c,lat:f}=o.N.convert(r),d=this._sw.lng<=c&&c<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=c&&c>=this._ne.lng),this._sw.lat<=f&&f<=this._ne.lat&&d}static convert(r){return r instanceof Se?r:r&&new Se(r)}static fromLngLat(r,c=0){let f=360*c/40075017,d=f/Math.cos(Math.PI/180*r.lat);return new Se(new o.N(r.lng-d,r.lat-f),new o.N(r.lng+d,r.lat+f))}adjustAntiMeridian(){let r=new o.N(this._sw.lng,this._sw.lat),c=new o.N(this._ne.lng,this._ne.lat);return new Se(r,r.lng>c.lng?new o.N(c.lng+360,c.lat):c)}}class is{constructor(r,c,f){this.bounds=Se.convert(this.validateBounds(r)),this.minzoom=c||0,this.maxzoom=f||24}validateBounds(r){return Array.isArray(r)&&r.length===4?[Math.max(-180,r[0]),Math.max(-90,r[1]),Math.min(180,r[2]),Math.min(90,r[3])]:[-180,-90,180,90]}contains(r){let c=Math.pow(2,r.z),f=Math.floor(o.O(this.bounds.getWest())*c),d=Math.floor(o.Q(this.bounds.getNorth())*c),m=Math.ceil(o.O(this.bounds.getEast())*c),w=Math.ceil(o.Q(this.bounds.getSouth())*c);return r.x>=f&&r.x<m&&r.y>=d&&r.y<w}}class kl extends o.E{constructor(r,c,f,d){if(super(),this.id=r,this.dispatcher=f,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.M(c,["url","scheme","tileSize","promoteId"])),this._options=o.e({type:"vector"},c),this._collectResourceTiming=c.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(d)}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield Js(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),r&&(o.e(this,r),r.bounds&&(this.tileBounds=new is(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new o.j(r))}})}loaded(){return this._loaded}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}onAdd(r){this.map=r,this.load()}setSourceProperty(r){this._tileJSONRequest&&this._tileJSONRequest.abort(),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(r){return o._(this,void 0,void 0,function*(){let c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f={request:this.map._requestManager.transformRequest(c,"Tile"),uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,tileSize:this.tileSize*r.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};f.request.collectResourceTiming=this._collectResourceTiming;let d="RT";if(r.actor&&r.state!=="expired"){if(r.state==="loading")return new Promise((m,w)=>{r.reloadPromise={resolve:m,reject:w}})}else r.actor=this.dispatcher.getActor(),d="LT";r.abortController=new AbortController;try{let m=yield r.actor.sendAsync({type:d,data:f},r.abortController);if(delete r.abortController,r.aborted)return;this._afterTileLoadWorkerResponse(r,m)}catch(m){if(delete r.abortController,r.aborted)return;if(m&&m.status!==404)throw m;this._afterTileLoadWorkerResponse(r,null)}})}_afterTileLoadWorkerResponse(r,c){if(c&&c.resourceTiming&&(r.resourceTiming=c.resourceTiming),c&&this.map._refreshExpiredTiles&&r.setExpiryData(c),r.loadVectorData(c,this.map.painter),r.reloadPromise){let f=r.reloadPromise;r.reloadPromise=null,this.loadTile(r).then(f.resolve).catch(f.reject)}}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.actor&&(yield r.actor.sendAsync({type:"AT",data:{uid:r.uid,type:this.type,source:this.id}}))})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),r.actor&&(yield r.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Vt extends o.E{constructor(r,c,f,d){super(),this.id=r,this.dispatcher=f,this.setEventedParent(d),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},c),o.e(this,o.M(c,["url","scheme","tileSize"]))}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{let r=yield Js(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,r&&(o.e(this,r),r.bounds&&(this.tileBounds=new is(r.bounds,this.minzoom,this.maxzoom)),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})))}catch(r){this._tileJSONRequest=null,this.fire(new o.j(r))}})}loaded(){return this._loaded}onAdd(r){this.map=r,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(r){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),r(),this.load()}setTiles(r){return this.setSourceProperty(()=>{this._options.tiles=r}),this}setUrl(r){return this.setSourceProperty(()=>{this.url=r,this._options.url=r}),this}serialize(){return o.e({},this._options)}hasTile(r){return!this.tileBounds||this.tileBounds.contains(r.canonical)}loadTile(r){return o._(this,void 0,void 0,function*(){let c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);r.abortController=new AbortController;try{let f=yield K.getImage(this.map._requestManager.transformRequest(c,"Tile"),r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(f&&f.data){this.map._refreshExpiredTiles&&f.cacheControl&&f.expires&&r.setExpiryData({cacheControl:f.cacheControl,expires:f.expires});let d=this.map.painter.context,m=d.gl,w=f.data;r.texture=this.map.painter.getTileTexture(w.width),r.texture?r.texture.update(w,{useMipmap:!0}):(r.texture=new Qe(d,w,m.RGBA,{useMipmap:!0}),r.texture.bind(m.LINEAR,m.CLAMP_TO_EDGE,m.LINEAR_MIPMAP_NEAREST)),r.state="loaded"}}catch(f){if(delete r.abortController,r.aborted)r.state="unloaded";else if(f)throw r.state="errored",f}})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController)})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.texture&&this.map.painter.saveTileTexture(r.texture)})}hasTransition(){return!1}}class xr extends Vt{constructor(r,c,f,d){super(r,c,f,d),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},c),this.encoding=c.encoding||"mapbox",this.redFactor=c.redFactor,this.greenFactor=c.greenFactor,this.blueFactor=c.blueFactor,this.baseShift=c.baseShift}loadTile(r){return o._(this,void 0,void 0,function*(){let c=r.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),f=this.map._requestManager.transformRequest(c,"Tile");r.neighboringTiles=this._getNeighboringTiles(r.tileID),r.abortController=new AbortController;try{let d=yield K.getImage(f,r.abortController,this.map._refreshExpiredTiles);if(delete r.abortController,r.aborted)return void(r.state="unloaded");if(d&&d.data){let m=d.data;this.map._refreshExpiredTiles&&d.cacheControl&&d.expires&&r.setExpiryData({cacheControl:d.cacheControl,expires:d.expires});let w=o.b(m)&&o.U()?m:yield this.readImageNow(m),I={type:this.type,uid:r.uid,source:this.id,rawImageData:w,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!r.actor||r.state==="expired"){r.actor=this.dispatcher.getActor();let A=yield r.actor.sendAsync({type:"LDT",data:I});r.dem=A,r.needsHillshadePrepare=!0,r.needsTerrainPrepare=!0,r.state="loaded"}}}catch(d){if(delete r.abortController,r.aborted)r.state="unloaded";else if(d)throw r.state="errored",d}})}readImageNow(r){return o._(this,void 0,void 0,function*(){if(typeof VideoFrame!="undefined"&&o.V()){let c=r.width+2,f=r.height+2;try{return new o.R({width:c,height:f},(yield o.W(r,-1,-1,c,f)))}catch(d){}}return T.getImageData(r,1)})}_getNeighboringTiles(r){let c=r.canonical,f=Math.pow(2,c.z),d=(c.x-1+f)%f,m=c.x===0?r.wrap-1:r.wrap,w=(c.x+1+f)%f,I=c.x+1===f?r.wrap+1:r.wrap,A={};return A[new o.S(r.overscaledZ,m,c.z,d,c.y).key]={backfilled:!1},A[new o.S(r.overscaledZ,I,c.z,w,c.y).key]={backfilled:!1},c.y>0&&(A[new o.S(r.overscaledZ,m,c.z,d,c.y-1).key]={backfilled:!1},A[new o.S(r.overscaledZ,r.wrap,c.z,c.x,c.y-1).key]={backfilled:!1},A[new o.S(r.overscaledZ,I,c.z,w,c.y-1).key]={backfilled:!1}),c.y+1<f&&(A[new o.S(r.overscaledZ,m,c.z,d,c.y+1).key]={backfilled:!1},A[new o.S(r.overscaledZ,r.wrap,c.z,c.x,c.y+1).key]={backfilled:!1},A[new o.S(r.overscaledZ,I,c.z,w,c.y+1).key]={backfilled:!1}),A}unloadTile(r){return o._(this,void 0,void 0,function*(){r.demTexture&&this.map.painter.saveTileTexture(r.demTexture),r.fbo&&(r.fbo.destroy(),delete r.fbo),r.dem&&delete r.dem,delete r.neighboringTiles,r.state="unloaded",r.actor&&(yield r.actor.sendAsync({type:"RDT",data:{type:this.type,uid:r.uid,source:this.id}}))})}}class Dl extends o.E{constructor(r,c,f,d){super(),this.id=r,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=f.getActor(),this.setEventedParent(d),this._data=c.data,this._options=o.e({},c),this._collectResourceTiming=c.collectResourceTiming,c.maxzoom!==void 0&&(this.maxzoom=c.maxzoom),c.type&&(this.type=c.type),c.attribution&&(this.attribution=c.attribution),this.promoteId=c.promoteId;let m=o.X/this.tileSize;c.clusterMaxZoom!==void 0&&this.maxzoom<=c.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${c.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:c.cluster||!1,geojsonVtOptions:{buffer:(c.buffer!==void 0?c.buffer:128)*m,tolerance:(c.tolerance!==void 0?c.tolerance:.375)*m,extent:o.X,maxZoom:this.maxzoom,lineMetrics:c.lineMetrics||!1,generateId:c.generateId||!1},superclusterOptions:{maxZoom:c.clusterMaxZoom!==void 0?c.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,c.clusterMinPoints||2),extent:o.X,radius:(c.clusterRadius||50)*m,log:!1,generateId:c.generateId||!1},clusterProperties:c.clusterProperties,filter:c.filter},c.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return o._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(r){this.map=r,this.load()}setData(r){return this._data=r,this._updateWorkerData(),this}updateData(r){return this._updateWorkerData(r),this}getData(){return o._(this,void 0,void 0,function*(){let r=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:r})})}setClusterOptions(r){return this.workerOptions.cluster=r.cluster,r&&(r.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=r.clusterRadius),r.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=r.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(r){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:r,source:this.id}})}getClusterChildren(r){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:r,source:this.id}})}getClusterLeaves(r,c,f){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:r,limit:c,offset:f}})}_updateWorkerData(r){return o._(this,void 0,void 0,function*(){let c=o.e({type:this.type},this.workerOptions);r?c.dataDiff=r:typeof this._data=="string"?(c.request=this.map._requestManager.transformRequest(T.resolveURL(this._data),"Source"),c.request.collectResourceTiming=this._collectResourceTiming):c.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new o.k("dataloading",{dataType:"source"}));try{let f=yield this.actor.sendAsync({type:"LD",data:c});if(this._pendingLoads--,this._removed||f.abandoned)return void this.fire(new o.k("dataabort",{dataType:"source"}));let d=null;f.resourceTiming&&f.resourceTiming[this.id]&&(d=f.resourceTiming[this.id].slice(0));let m={dataType:"source"};this._collectResourceTiming&&d&&d.length>0&&o.e(m,{resourceTiming:d}),this.fire(new o.k("data",Object.assign(Object.assign({},m),{sourceDataType:"metadata"}))),this.fire(new o.k("data",Object.assign(Object.assign({},m),{sourceDataType:"content"})))}catch(f){if(this._pendingLoads--,this._removed)return void this.fire(new o.k("dataabort",{dataType:"source"}));this.fire(new o.j(f))}})}loaded(){return this._pendingLoads===0}loadTile(r){return o._(this,void 0,void 0,function*(){let c=r.actor?"RT":"LT";r.actor=this.actor;let f={type:this.type,uid:r.uid,tileID:r.tileID,zoom:r.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};r.abortController=new AbortController;let d=yield this.actor.sendAsync({type:c,data:f},r.abortController);delete r.abortController,r.unloadVectorData(),r.aborted||r.loadVectorData(d,this.map.painter,c==="RT")})}abortTile(r){return o._(this,void 0,void 0,function*(){r.abortController&&(r.abortController.abort(),delete r.abortController),r.aborted=!0})}unloadTile(r){return o._(this,void 0,void 0,function*(){r.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:r.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var bo=o.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Ka extends o.E{constructor(r,c,f,d){super(),this.id=r,this.dispatcher=f,this.coordinates=c.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(d),this.options=c}load(r){return o._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new o.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{let c=yield K.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,c&&c.data&&(this.image=c.data,r&&(this.coordinates=r),this._finishLoading())}catch(c){this._request=null,this._loaded=!0,this.fire(new o.j(c))}})}loaded(){return this._loaded}updateImage(r){return r.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=r.url,this.load(r.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(r){this.map=r,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(r){this.coordinates=r;let c=r.map(o.Z.fromLngLat);this.tileID=function(d){let m=1/0,w=1/0,I=-1/0,A=-1/0;for(let j of d)m=Math.min(m,j.x),w=Math.min(w,j.y),I=Math.max(I,j.x),A=Math.max(A,j.y);let O=Math.max(I-m,A-w),k=Math.max(0,Math.floor(-Math.log(O)/Math.LN2)),D=Math.pow(2,k);return new o.a1(k,Math.floor((m+I)/2*D),Math.floor((w+A)/2*D))}(c),this.minzoom=this.maxzoom=this.tileID.z;let f=c.map(d=>this.tileID.getTilePoint(d)._round());return this._boundsArray=new o.$,this._boundsArray.emplaceBack(f[0].x,f[0].y,0,0),this._boundsArray.emplaceBack(f[1].x,f[1].y,o.X,0),this._boundsArray.emplaceBack(f[3].x,f[3].y,0,o.X),this._boundsArray.emplaceBack(f[2].x,f[2].y,o.X,o.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new o.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;let r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bo.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new Qe(r,this.image,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let m=this.tiles[d];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,f=!0)}f&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(r){return o._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(r.tileID.canonical)?(this.tiles[String(r.tileID.wrap)]=r,r.buckets={}):r.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class Qs extends Ka{constructor(r,c,f,d){super(r,c,f,d),this.roundZoom=!0,this.type="video",this.options=c}load(){return o._(this,void 0,void 0,function*(){this._loaded=!1;let r=this.options;this.urls=[];for(let c of r.urls)this.urls.push(this.map._requestManager.transformRequest(c,"Source").url);try{let c=yield o.a3(this.urls);if(this._loaded=!0,!c)return;this.video=c,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(c){this.fire(new o.j(c))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(r){if(this.video){let c=this.video.seekable;r<c.start(0)||r>c.end(0)?this.fire(new o.j(new o.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${c.start(0)} and ${c.end(0)}-second mark.`))):this.video.currentTime=r}}getVideo(){return this.video}onAdd(r){this.map||(this.map=r,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;let r=this.map.painter.context,c=r.gl;this.boundsBuffer||(this.boundsBuffer=r.createVertexBuffer(this._boundsArray,bo.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE),c.texSubImage2D(c.TEXTURE_2D,0,0,0,c.RGBA,c.UNSIGNED_BYTE,this.video)):(this.texture=new Qe(r,this.video,c.RGBA),this.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE));let f=!1;for(let d in this.tiles){let m=this.tiles[d];m.state!=="loaded"&&(m.state="loaded",m.texture=this.texture,f=!0)}f&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class bn extends Ka{constructor(r,c,f,d){super(r,c,f,d),c.coordinates?Array.isArray(c.coordinates)&&c.coordinates.length===4&&!c.coordinates.some(m=>!Array.isArray(m)||m.length!==2||m.some(w=>typeof w!="number"))||this.fire(new o.j(new o.a2(`sources.${r}`,null,"\"coordinates\" property must be an array of 4 longitude/latitude array pairs"))):this.fire(new o.j(new o.a2(`sources.${r}`,null,"missing required property \"coordinates\""))),c.animate&&typeof c.animate!="boolean"&&this.fire(new o.j(new o.a2(`sources.${r}`,null,"optional \"animate\" property must be a boolean value"))),c.canvas?typeof c.canvas=="string"||c.canvas instanceof HTMLCanvasElement||this.fire(new o.j(new o.a2(`sources.${r}`,null,"\"canvas\" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance"))):this.fire(new o.j(new o.a2(`sources.${r}`,null,"missing required property \"canvas\""))),this.options=c,this.animate=c.animate===void 0||c.animate}load(){return o._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(r){this.map=r,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let r=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,r=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,r=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;let c=this.map.painter.context,f=c.gl;this.boundsBuffer||(this.boundsBuffer=c.createVertexBuffer(this._boundsArray,bo.members)),this.boundsSegments||(this.boundsSegments=o.a0.simpleSegment(0,0,4,2)),this.texture?(r||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new Qe(c,this.canvas,f.RGBA,{premultiply:!0});let d=!1;for(let m in this.tiles){let w=this.tiles[m];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,d=!0)}d&&this.fire(new o.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(let r of[this.canvas.width,this.canvas.height])if(isNaN(r)||r<=0)return!0;return!1}}let Ll={},zl=v=>{switch(v){case"geojson":return Dl;case"image":return Ka;case"raster":return Vt;case"raster-dem":return xr;case"vector":return kl;case"video":return Qs;case"canvas":return bn;}return Ll[v]},Re="RTLPluginLoaded";class ma extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Rl()}_syncState(r){return this.status=r,this.dispatcher.broadcast("SRPS",{pluginStatus:r,pluginURL:this.url}).catch(c=>{throw this.status="error",c})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(r){return o._(this,arguments,void 0,function*(c,f=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=T.resolveURL(c),!this.url)throw new Error(`requested url ${c} is invalid`);if(this.status==="unavailable"){if(!f)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return o._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.k(Re))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Si=null;function va(){return Si||(Si=new ma),Si}class wo{constructor(r,c){this.timeAdded=0,this.fadeEndTime=0,this.tileID=r,this.uid=o.a4(),this.uses=0,this.tileSize=c,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(r){let c=r+this.timeAdded;c<this.fadeEndTime||(this.fadeEndTime=c)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(r){this.demTexture&&r.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(r,c,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",r){r.featureIndex&&(this.latestFeatureIndex=r.featureIndex,r.rawTileData?(this.latestRawTileData=r.rawTileData,this.latestFeatureIndex.rawTileData=r.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=r.collisionBoxArray,this.buckets=function(d,m){let w={};if(!m)return w;for(let I of d){let A=I.layerIds.map(O=>m.getLayer(O)).filter(Boolean);if(A.length!==0){I.layers=A,I.stateDependentLayerIds&&(I.stateDependentLayers=I.stateDependentLayerIds.map(O=>A.filter(k=>k.id===O)[0]));for(let O of A)w[O.id]=I}}return w}(r.buckets,c.style),this.hasSymbolBuckets=!1;for(let d in this.buckets){let m=this.buckets[d];if(m instanceof o.a6){if(this.hasSymbolBuckets=!0,!f)break;m.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(let d in this.buckets){let m=this.buckets[d];if(m instanceof o.a6&&m.hasRTLText){this.hasRTLText=!0,va().lazyLoad();break}}this.queryPadding=0;for(let d in this.buckets){let m=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,c.style.getLayer(d).queryRadius(m))}r.imageAtlas&&(this.imageAtlas=r.imageAtlas),r.glyphAtlasImage&&(this.glyphAtlasImage=r.glyphAtlasImage)}else this.collisionBoxArray=new o.a5}unloadVectorData(){for(let r in this.buckets)this.buckets[r].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(r){return this.buckets[r.id]}upload(r){for(let f in this.buckets){let d=this.buckets[f];d.uploadPending()&&d.upload(r)}let c=r.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Qe(r,this.imageAtlas.image,c.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Qe(r,this.glyphAtlasImage,c.ALPHA),this.glyphAtlasImage=null)}prepare(r){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(r,this.imageAtlasTexture)}queryRenderedFeatures(r,c,f,d,m,w,I,A,O,k){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:d,cameraQueryGeometry:m,scale:w,tileSize:this.tileSize,pixelPosMatrix:k,transform:A,params:I,queryPadding:this.queryPadding*O},r,c,f):{}}querySourceFeatures(r,c){let f=this.latestFeatureIndex;if(!f||!f.rawTileData)return;let d=f.loadVTLayers(),m=c&&c.sourceLayer?c.sourceLayer:"",w=d._geojsonTileLayer||d[m];if(!w)return;let I=o.a7(c&&c.filter),{z:A,x:O,y:k}=this.tileID.canonical,D={z:A,x:O,y:k};for(let j=0;j<w.length;j++){let H=w.feature(j);if(I.needGeometry){let ne=o.a8(H,!0);if(!I.filter(new o.z(this.tileID.overscaledZ),ne,this.tileID.canonical))continue}else if(!I.filter(new o.z(this.tileID.overscaledZ),H))continue;let Z=f.getId(H,m),ee=new o.a9(H,A,O,k,Z);ee.tile=D,r.push(ee)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(r){let c=this.expirationTime;if(r.cacheControl){let f=o.aa(r.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else r.expires&&(this.expirationTime=new Date(r.expires).getTime());if(this.expirationTime){let f=Date.now(),d=!1;if(this.expirationTime>f)d=!1;else if(c){if(this.expirationTime<c)d=!0;else{let m=this.expirationTime-c;m?this.expirationTime=f+Math.max(m,3e4):d=!0}}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(r,c){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(r).length===0)return;let f=this.latestFeatureIndex.loadVTLayers();for(let d in this.buckets){if(!c.style.hasLayer(d))continue;let m=this.buckets[d],w=m.layers[0].sourceLayer||"_geojsonTileLayer",I=f[w],A=r[w];if(!I||!A||Object.keys(A).length===0)continue;m.update(A,I,this.imageAtlas&&this.imageAtlas.patternPositions||{});let O=c&&c.style&&c.style.getLayer(d);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(m)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<T.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(r){this.symbolFadeHoldUntil=T.now()+r}setDependencies(r,c){let f={};for(let d of c)f[d]=!0;this.dependencies[r]=f}hasDependency(r,c){for(let f of r){let d=this.dependencies[f];if(d){for(let m of c)if(d[m])return!0}}return!1}}class Fe{constructor(r,c){this.max=r,this.onRemove=c,this.reset()}reset(){for(let r in this.data)for(let c of this.data[r])c.timeout&&clearTimeout(c.timeout),this.onRemove(c.value);return this.data={},this.order=[],this}add(r,c,f){let d=r.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);let m={value:c,timeout:void 0};if(f!==void 0&&(m.timeout=setTimeout(()=>{this.remove(r,m)},f)),this.data[d].push(m),this.order.push(d),this.order.length>this.max){let w=this._getAndRemoveByKey(this.order[0]);w&&this.onRemove(w)}return this}has(r){return r.wrapped().key in this.data}getAndRemove(r){return this.has(r)?this._getAndRemoveByKey(r.wrapped().key):null}_getAndRemoveByKey(r){let c=this.data[r].shift();return c.timeout&&clearTimeout(c.timeout),this.data[r].length===0&&delete this.data[r],this.order.splice(this.order.indexOf(r),1),c.value}getByKey(r){let c=this.data[r];return c?c[0].value:null}get(r){return this.has(r)?this.data[r.wrapped().key][0].value:null}remove(r,c){if(!this.has(r))return this;let f=r.wrapped().key,d=c===void 0?0:this.data[f].indexOf(c),m=this.data[f][d];return this.data[f].splice(d,1),m.timeout&&clearTimeout(m.timeout),this.data[f].length===0&&delete this.data[f],this.onRemove(m.value),this.order.splice(this.order.indexOf(f),1),this}setMaxSize(r){for(this.max=r;this.order.length>this.max;){let c=this._getAndRemoveByKey(this.order[0]);c&&this.onRemove(c)}return this}filter(r){let c=[];for(let f in this.data)for(let d of this.data[f])r(d.value)||c.push(d);for(let f of c)this.remove(f.value.tileID,f)}}class At{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(r,c,f){let d=String(c);if(this.stateChanges[r]=this.stateChanges[r]||{},this.stateChanges[r][d]=this.stateChanges[r][d]||{},o.e(this.stateChanges[r][d],f),this.deletedStates[r]===null){this.deletedStates[r]={};for(let m in this.state[r])m!==d&&(this.deletedStates[r][m]=null)}else if(this.deletedStates[r]&&this.deletedStates[r][d]===null){this.deletedStates[r][d]={};for(let m in this.state[r][d])f[m]||(this.deletedStates[r][d][m]=null)}else for(let m in f)this.deletedStates[r]&&this.deletedStates[r][d]&&this.deletedStates[r][d][m]===null&&delete this.deletedStates[r][d][m]}removeFeatureState(r,c,f){if(this.deletedStates[r]===null)return;let d=String(c);if(this.deletedStates[r]=this.deletedStates[r]||{},f&&c!==void 0)this.deletedStates[r][d]!==null&&(this.deletedStates[r][d]=this.deletedStates[r][d]||{},this.deletedStates[r][d][f]=null);else if(c!==void 0){if(this.stateChanges[r]&&this.stateChanges[r][d])for(f in this.deletedStates[r][d]={},this.stateChanges[r][d])this.deletedStates[r][d][f]=null;else this.deletedStates[r][d]=null;}else this.deletedStates[r]=null}getState(r,c){let f=String(c),d=o.e({},(this.state[r]||{})[f],(this.stateChanges[r]||{})[f]);if(this.deletedStates[r]===null)return{};if(this.deletedStates[r]){let m=this.deletedStates[r][c];if(m===null)return{};for(let w in m)delete d[w]}return d}initializeTileState(r,c){r.setFeatureState(this.state,c)}coalesceChanges(r,c){let f={};for(let d in this.stateChanges){this.state[d]=this.state[d]||{};let m={};for(let w in this.stateChanges[d])this.state[d][w]||(this.state[d][w]={}),o.e(this.state[d][w],this.stateChanges[d][w]),m[w]=this.state[d][w];f[d]=m}for(let d in this.deletedStates){this.state[d]=this.state[d]||{};let m={};if(this.deletedStates[d]===null)for(let w in this.state[d])m[w]={},this.state[d][w]={};else for(let w in this.deletedStates[d]){if(this.deletedStates[d][w]===null)this.state[d][w]={};else for(let I of Object.keys(this.deletedStates[d][w]))delete this.state[d][w][I];m[w]=this.state[d][w]}f[d]=f[d]||{},o.e(f[d],m)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(let d in r)r[d].setFeatureState(f,c)}}class dt extends o.E{constructor(r,c,f){super(),this.id=r,this.dispatcher=f,this.on("data",d=>this._dataHandler(d)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((d,m,w,I)=>{let A=new(zl(m.type))(d,m,w,I);if(A.id!==d)throw new Error(`Expected Source id to be ${d} instead of ${A.id}`);return A})(r,c,f,this),this._tiles={},this._cache=new Fe(0,d=>this._unloadTile(d)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new At,this._didEmitContent=!1,this._updated=!1}onAdd(r){this.map=r,this._maxTileCacheSize=r?r._maxTileCacheSize:null,this._maxTileCacheZoomLevels=r?r._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(r)}onRemove(r){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(r)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(let r in this._tiles){let c=this._tiles[r];if(c.state!=="loaded"&&c.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;let r=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,r&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(r,c,f){return o._(this,void 0,void 0,function*(){try{yield this._source.loadTile(r),this._tileLoaded(r,c,f)}catch(d){r.state="errored",d.status!==404?this._source.fire(new o.j(d,{tile:r})):this.update(this.transform,this.terrain)}})}_unloadTile(r){this._source.unloadTile&&this._source.unloadTile(r)}_abortTile(r){this._source.abortTile&&this._source.abortTile(r),this._source.fire(new o.k("dataabort",{tile:r,coord:r.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(r){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(let c in this._tiles){let f=this._tiles[c];f.upload(r),f.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(r=>r.tileID).sort(ji).map(r=>r.key)}getRenderableIds(r){let c=[];for(let f in this._tiles)this._isIdRenderable(f,r)&&c.push(this._tiles[f]);return r?c.sort((f,d)=>{let m=f.tileID,w=d.tileID,I=new o.P(m.canonical.x,m.canonical.y)._rotate(this.transform.angle),A=new o.P(w.canonical.x,w.canonical.y)._rotate(this.transform.angle);return m.overscaledZ-w.overscaledZ||A.y-I.y||A.x-I.x}).map(f=>f.tileID.key):c.map(f=>f.tileID).sort(ji).map(f=>f.key)}hasRenderableParent(r){let c=this.findLoadedParent(r,0);return!!c&&this._isIdRenderable(c.tileID.key)}_isIdRenderable(r,c){return this._tiles[r]&&this._tiles[r].hasData()&&!this._coveredTiles[r]&&(c||!this._tiles[r].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(let r in this._tiles)this._tiles[r].state!=="errored"&&this._reloadTile(r,"reloading")}}_reloadTile(r,c){return o._(this,void 0,void 0,function*(){let f=this._tiles[r];f&&(f.state!=="loading"&&(f.state=c),yield this._loadTile(f,r,c))})}_tileLoaded(r,c,f){r.timeAdded=T.now(),f==="expired"&&(r.refreshedUponExpiration=!0),this._setTileReloadTimer(c,r),this.getSource().type==="raster-dem"&&r.dem&&this._backfillDEM(r),this._state.initializeTileState(r,this.map?this.map.painter:null),r.aborted||this._source.fire(new o.k("data",{dataType:"source",tile:r,coord:r.tileID}))}_backfillDEM(r){let c=this.getRenderableIds();for(let d=0;d<c.length;d++){let m=c[d];if(r.neighboringTiles&&r.neighboringTiles[m]){let w=this.getTileByID(m);f(r,w),f(w,r)}}function f(d,m){d.needsHillshadePrepare=!0,d.needsTerrainPrepare=!0;let w=m.tileID.canonical.x-d.tileID.canonical.x,I=m.tileID.canonical.y-d.tileID.canonical.y,A=Math.pow(2,d.tileID.canonical.z),O=m.tileID.key;w===0&&I===0||Math.abs(I)>1||(Math.abs(w)>1&&(Math.abs(w+A)===1?w+=A:Math.abs(w-A)===1&&(w-=A)),m.dem&&d.dem&&(d.dem.backfillBorder(m.dem,w,I),d.neighboringTiles&&d.neighboringTiles[O]&&(d.neighboringTiles[O].backfilled=!0)))}}getTile(r){return this.getTileByID(r.key)}getTileByID(r){return this._tiles[r]}_retainLoadedChildren(r,c,f,d){for(let m in this._tiles){let w=this._tiles[m];if(d[m]||!w.hasData()||w.tileID.overscaledZ<=c||w.tileID.overscaledZ>f)continue;let I=w.tileID;for(;w&&w.tileID.overscaledZ>c+1;){let O=w.tileID.scaledTo(w.tileID.overscaledZ-1);w=this._tiles[O.key],w&&w.hasData()&&(I=O)}let A=I;for(;A.overscaledZ>c;)if(A=A.scaledTo(A.overscaledZ-1),r[A.key]){d[I.key]=I;break}}}findLoadedParent(r,c){if(r.key in this._loadedParentTiles){let f=this._loadedParentTiles[r.key];return f&&f.tileID.overscaledZ>=c?f:null}for(let f=r.overscaledZ-1;f>=c;f--){let d=r.scaledTo(f),m=this._getLoadedTile(d);if(m)return m}}findLoadedSibling(r){return this._getLoadedTile(r)}_getLoadedTile(r){let c=this._tiles[r.key];return c&&c.hasData()?c:this._cache.getByKey(r.wrapped().key)}updateCacheSize(r){let c=Math.ceil(r.width/this._source.tileSize)+1,f=Math.ceil(r.height/this._source.tileSize)+1,d=Math.floor(c*f*(this._maxTileCacheZoomLevels===null?o.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),m=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,d):d;this._cache.setMaxSize(m)}handleWrapJump(r){let c=Math.round((r-(this._prevLng===void 0?r:this._prevLng))/360);if(this._prevLng=r,c){let f={};for(let d in this._tiles){let m=this._tiles[d];m.tileID=m.tileID.unwrapTo(m.tileID.wrap+c),f[m.tileID.key]=m}this._tiles=f;for(let d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(let d in this._tiles)this._setTileReloadTimer(d,this._tiles[d])}}_updateCoveredAndRetainedTiles(r,c,f,d,m,w){let I={},A={},O=Object.keys(r),k=T.now();for(let D of O){let j=r[D],H=this._tiles[D];if(!H||H.fadeEndTime!==0&&H.fadeEndTime<=k)continue;let Z=this.findLoadedParent(j,c),ee=this.findLoadedSibling(j),ne=Z||ee||null;ne&&(this._addTile(ne.tileID),I[ne.tileID.key]=ne.tileID),A[D]=j}this._retainLoadedChildren(A,d,f,r);for(let D in I)r[D]||(this._coveredTiles[D]=!0,r[D]=I[D]);if(w){let D={},j={};for(let H of m)this._tiles[H.key].hasData()?D[H.key]=H:j[H.key]=H;for(let H in j){let Z=j[H].children(this._source.maxzoom);this._tiles[Z[0].key]&&this._tiles[Z[1].key]&&this._tiles[Z[2].key]&&this._tiles[Z[3].key]&&(D[Z[0].key]=r[Z[0].key]=Z[0],D[Z[1].key]=r[Z[1].key]=Z[1],D[Z[2].key]=r[Z[2].key]=Z[2],D[Z[3].key]=r[Z[3].key]=Z[3],delete j[H])}for(let H in j){let Z=j[H],ee=this.findLoadedParent(Z,this._source.minzoom),ne=this.findLoadedSibling(Z),ae=ee||ne||null;if(ae){D[ae.tileID.key]=r[ae.tileID.key]=ae.tileID;for(let ue in D)D[ue].isChildOf(ae.tileID)&&delete D[ue]}}for(let H in this._tiles)D[H]||(this._coveredTiles[H]=!0)}}update(r,c){if(!this._sourceLoaded||this._paused)return;let f;this.transform=r,this.terrain=c,this.updateCacheSize(r),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?f=r.getVisibleUnwrappedCoordinates(this._source.tileID).map(k=>new o.S(k.canonical.z,k.wrap,k.canonical.z,k.canonical.x,k.canonical.y)):(f=r.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:c}),this._source.hasTile&&(f=f.filter(k=>this._source.hasTile(k)))):f=[];let d=r.coveringZoomLevel(this._source),m=Math.max(d-dt.maxOverzooming,this._source.minzoom),w=Math.max(d+dt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){let k={};for(let D of f)if(D.canonical.z>this._source.minzoom){let j=D.scaledTo(D.canonical.z-1);k[j.key]=j;let H=D.scaledTo(Math.max(this._source.minzoom,Math.min(D.canonical.z,5)));k[H.key]=H}f=f.concat(Object.values(k))}let I=f.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,I&&this.fire(new o.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));let A=this._updateRetainedTiles(f,d);Wn(this._source.type)&&this._updateCoveredAndRetainedTiles(A,m,w,d,f,c);for(let k in A)this._tiles[k].clearFadeHold();let O=o.ab(this._tiles,A);for(let k of O){let D=this._tiles[k];D.hasSymbolBuckets&&!D.holdingForFade()?D.setHoldDuration(this.map._fadeDuration):D.hasSymbolBuckets&&!D.symbolFadeFinished()||this._removeTile(k)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(let r in this._tiles)this._tiles[r].holdingForFade()&&this._removeTile(r)}_updateRetainedTiles(r,c){var f;let d={},m={},w=Math.max(c-dt.maxOverzooming,this._source.minzoom),I=Math.max(c+dt.maxUnderzooming,this._source.minzoom),A={};for(let O of r){let k=this._addTile(O);d[O.key]=O,k.hasData()||c<this._source.maxzoom&&(A[O.key]=O)}this._retainLoadedChildren(A,c,I,d);for(let O of r){let k=this._tiles[O.key];if(k.hasData())continue;if(c+1>this._source.maxzoom){let j=O.children(this._source.maxzoom)[0],H=this.getTile(j);if(H&&H.hasData()){d[j.key]=j;continue}}else{let j=O.children(this._source.maxzoom);if(d[j[0].key]&&d[j[1].key]&&d[j[2].key]&&d[j[3].key])continue}let D=k.wasRequested();for(let j=O.overscaledZ-1;j>=w;--j){let H=O.scaledTo(j);if(m[H.key])break;if(m[H.key]=!0,k=this.getTile(H),!k&&D&&(k=this._addTile(H)),k){let Z=k.hasData();if((Z||!(!((f=this.map)===null||f===void 0)&&f.cancelPendingTileRequestsWhileZooming)||D)&&(d[H.key]=H),D=k.wasRequested(),Z)break}}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(let r in this._tiles){let c=[],f,d=this._tiles[r].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){f=this._loadedParentTiles[d.key];break}c.push(d.key);let m=d.scaledTo(d.overscaledZ-1);if(f=this._getLoadedTile(m),f)break;d=m}for(let m of c)this._loadedParentTiles[m]=f}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(let r in this._tiles){let c=this._tiles[r].tileID,f=this._getLoadedTile(c);this._loadedSiblingTiles[c.key]=f}}_addTile(r){let c=this._tiles[r.key];if(c)return c;c=this._cache.getAndRemove(r),c&&(this._setTileReloadTimer(r.key,c),c.tileID=r,this._state.initializeTileState(c,this.map?this.map.painter:null),this._cacheTimers[r.key]&&(clearTimeout(this._cacheTimers[r.key]),delete this._cacheTimers[r.key],this._setTileReloadTimer(r.key,c)));let f=c;return c||(c=new wo(r,this._source.tileSize*r.overscaleFactor()),this._loadTile(c,r.key,c.state)),c.uses++,this._tiles[r.key]=c,f||this._source.fire(new o.k("dataloading",{tile:c,coord:c.tileID,dataType:"source"})),c}_setTileReloadTimer(r,c){r in this._timers&&(clearTimeout(this._timers[r]),delete this._timers[r]);let f=c.getExpiryTimeout();f&&(this._timers[r]=setTimeout(()=>{this._reloadTile(r,"expired"),delete this._timers[r]},f))}_removeTile(r){let c=this._tiles[r];c&&(c.uses--,delete this._tiles[r],this._timers[r]&&(clearTimeout(this._timers[r]),delete this._timers[r]),c.uses>0||(c.hasData()&&c.state!=="reloading"?this._cache.add(c.tileID,c,c.getExpiryTimeout()):(c.aborted=!0,this._abortTile(c),this._unloadTile(c))))}_dataHandler(r){let c=r.sourceDataType;r.dataType==="source"&&c==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&r.dataType==="source"&&c==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(let r in this._tiles)this._removeTile(r);this._cache.reset()}tilesIn(r,c,f){let d=[],m=this.transform;if(!m)return d;let w=f?m.getCameraQueryGeometry(r):r,I=r.map(Z=>m.pointCoordinate(Z,this.terrain)),A=w.map(Z=>m.pointCoordinate(Z,this.terrain)),O=this.getIds(),k=1/0,D=1/0,j=-1/0,H=-1/0;for(let Z of A)k=Math.min(k,Z.x),D=Math.min(D,Z.y),j=Math.max(j,Z.x),H=Math.max(H,Z.y);for(let Z=0;Z<O.length;Z++){let ee=this._tiles[O[Z]];if(ee.holdingForFade())continue;let ne=ee.tileID,ae=Math.pow(2,m.zoom-ee.tileID.overscaledZ),ue=c*ee.queryPadding*o.X/ee.tileSize/ae,Y=[ne.getTilePoint(new o.Z(k,D)),ne.getTilePoint(new o.Z(j,H))];if(Y[0].x-ue<o.X&&Y[0].y-ue<o.X&&Y[1].x+ue>=0&&Y[1].y+ue>=0){let he=I.map(ye=>ne.getTilePoint(ye)),de=A.map(ye=>ne.getTilePoint(ye));d.push({tile:ee,tileID:ne,queryGeometry:he,cameraQueryGeometry:de,scale:ae})}}return d}getVisibleCoordinates(r){let c=this.getRenderableIds(r).map(f=>this._tiles[f].tileID);for(let f of c)f.posMatrix=this.transform.calculatePosMatrix(f.toUnwrapped());return c}hasTransition(){if(this._source.hasTransition())return!0;if(Wn(this._source.type)){let r=T.now();for(let c in this._tiles)if(this._tiles[c].fadeEndTime>=r)return!0}return!1}setFeatureState(r,c,f){this._state.updateState(r=r||"_geojsonTileLayer",c,f)}removeFeatureState(r,c,f){this._state.removeFeatureState(r=r||"_geojsonTileLayer",c,f)}getFeatureState(r,c){return this._state.getState(r=r||"_geojsonTileLayer",c)}setDependencies(r,c,f){let d=this._tiles[r];d&&d.setDependencies(c,f)}reloadTilesForDependencies(r,c){for(let f in this._tiles)this._tiles[f].hasDependency(r,c)&&this._reloadTile(f,"reloading");this._cache.filter(f=>!f.hasDependency(r,c))}}function ji(v,r){let c=Math.abs(2*v.wrap)-+(v.wrap<0),f=Math.abs(2*r.wrap)-+(r.wrap<0);return v.overscaledZ-r.overscaledZ||f-c||r.canonical.y-v.canonical.y||r.canonical.x-v.canonical.x}function Wn(v){return v==="raster"||v==="image"||v==="video"}dt.maxOverzooming=10,dt.maxUnderzooming=3;class bt{constructor(r,c){this.reset(r,c)}reset(r,c){this.points=r||[],this._distances=[0];for(let f=1;f<this.points.length;f++)this._distances[f]=this._distances[f-1]+this.points[f].dist(this.points[f-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(c||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(r){if(this.points.length===1)return this.points[0];r=o.ac(r,0,1);let c=1,f=this._distances[c],d=r*this.paddedLength+this.padding;for(;f<d&&c<this._distances.length;)f=this._distances[++c];let m=c-1,w=this._distances[m],I=f-w,A=I>0?(d-w)/I:0;return this.points[m].mult(1-A).add(this.points[c].mult(A))}}function ga(v,r){let c=!0;return v==="always"||v!=="never"&&r!=="never"||(c=!1),c}class Xa{constructor(r,c,f){let d=this.boxCells=[],m=this.circleCells=[];this.xCellCount=Math.ceil(r/f),this.yCellCount=Math.ceil(c/f);for(let w=0;w<this.xCellCount*this.yCellCount;w++)d.push([]),m.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=r,this.height=c,this.xScale=this.xCellCount/r,this.yScale=this.yCellCount/c,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(r,c,f,d,m){this._forEachCell(c,f,d,m,this._insertBoxCell,this.boxUid++),this.boxKeys.push(r),this.bboxes.push(c),this.bboxes.push(f),this.bboxes.push(d),this.bboxes.push(m)}insertCircle(r,c,f,d){this._forEachCell(c-d,f-d,c+d,f+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(r),this.circles.push(c),this.circles.push(f),this.circles.push(d)}_insertBoxCell(r,c,f,d,m,w){this.boxCells[m].push(w)}_insertCircleCell(r,c,f,d,m,w){this.circleCells[m].push(w)}_query(r,c,f,d,m,w,I){if(f<0||r>this.width||d<0||c>this.height)return[];let A=[];if(r<=0&&c<=0&&this.width<=f&&this.height<=d){if(m)return[{key:null,x1:r,y1:c,x2:f,y2:d}];for(let O=0;O<this.boxKeys.length;O++)A.push({key:this.boxKeys[O],x1:this.bboxes[4*O],y1:this.bboxes[4*O+1],x2:this.bboxes[4*O+2],y2:this.bboxes[4*O+3]});for(let O=0;O<this.circleKeys.length;O++){let k=this.circles[3*O],D=this.circles[3*O+1],j=this.circles[3*O+2];A.push({key:this.circleKeys[O],x1:k-j,y1:D-j,x2:k+j,y2:D+j})}}else this._forEachCell(r,c,f,d,this._queryCell,A,{hitTest:m,overlapMode:w,seenUids:{box:{},circle:{}}},I);return A}query(r,c,f,d){return this._query(r,c,f,d,!1,null)}hitTest(r,c,f,d,m,w){return this._query(r,c,f,d,!0,m,w).length>0}hitTestCircle(r,c,f,d,m){let w=r-f,I=r+f,A=c-f,O=c+f;if(I<0||w>this.width||O<0||A>this.height)return!1;let k=[];return this._forEachCell(w,A,I,O,this._queryCellCircle,k,{hitTest:!0,overlapMode:d,circle:{x:r,y:c,radius:f},seenUids:{box:{},circle:{}}},m),k.length>0}_queryCell(r,c,f,d,m,w,I,A){let{seenUids:O,hitTest:k,overlapMode:D}=I,j=this.boxCells[m];if(j!==null){let Z=this.bboxes;for(let ee of j)if(!O.box[ee]){O.box[ee]=!0;let ne=4*ee,ae=this.boxKeys[ee];if(r<=Z[ne+2]&&c<=Z[ne+3]&&f>=Z[ne+0]&&d>=Z[ne+1]&&(!A||A(ae))&&(!k||!ga(D,ae.overlapMode))&&(w.push({key:ae,x1:Z[ne],y1:Z[ne+1],x2:Z[ne+2],y2:Z[ne+3]}),k))return!0}}let H=this.circleCells[m];if(H!==null){let Z=this.circles;for(let ee of H)if(!O.circle[ee]){O.circle[ee]=!0;let ne=3*ee,ae=this.circleKeys[ee];if(this._circleAndRectCollide(Z[ne],Z[ne+1],Z[ne+2],r,c,f,d)&&(!A||A(ae))&&(!k||!ga(D,ae.overlapMode))){let ue=Z[ne],Y=Z[ne+1],he=Z[ne+2];if(w.push({key:ae,x1:ue-he,y1:Y-he,x2:ue+he,y2:Y+he}),k)return!0}}}return!1}_queryCellCircle(r,c,f,d,m,w,I,A){let{circle:O,seenUids:k,overlapMode:D}=I,j=this.boxCells[m];if(j!==null){let Z=this.bboxes;for(let ee of j)if(!k.box[ee]){k.box[ee]=!0;let ne=4*ee,ae=this.boxKeys[ee];if(this._circleAndRectCollide(O.x,O.y,O.radius,Z[ne+0],Z[ne+1],Z[ne+2],Z[ne+3])&&(!A||A(ae))&&!ga(D,ae.overlapMode))return w.push(!0),!0}}let H=this.circleCells[m];if(H!==null){let Z=this.circles;for(let ee of H)if(!k.circle[ee]){k.circle[ee]=!0;let ne=3*ee,ae=this.circleKeys[ee];if(this._circlesCollide(Z[ne],Z[ne+1],Z[ne+2],O.x,O.y,O.radius)&&(!A||A(ae))&&!ga(D,ae.overlapMode))return w.push(!0),!0}}}_forEachCell(r,c,f,d,m,w,I,A){let O=this._convertToXCellCoord(r),k=this._convertToYCellCoord(c),D=this._convertToXCellCoord(f),j=this._convertToYCellCoord(d);for(let H=O;H<=D;H++)for(let Z=k;Z<=j;Z++)if(m.call(this,r,c,f,d,this.xCellCount*Z+H,w,I,A))return}_convertToXCellCoord(r){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(r*this.xScale)))}_convertToYCellCoord(r){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(r*this.yScale)))}_circlesCollide(r,c,f,d,m,w){let I=d-r,A=m-c,O=f+w;return O*O>I*I+A*A}_circleAndRectCollide(r,c,f,d,m,w,I){let A=(w-d)/2,O=Math.abs(r-(d+A));if(O>A+f)return!1;let k=(I-m)/2,D=Math.abs(c-(m+k));if(D>k+f)return!1;if(O<=A||D<=k)return!0;let j=O-A,H=D-k;return j*j+H*H<=f*f}}function So(v,r,c,f,d){let m=o.H();return r?(o.K(m,m,[1/d,1/d,1]),c||o.ad(m,m,f.angle)):o.L(m,f.labelPlaneMatrix,v),m}function ya(v,r,c,f,d){if(r){let m=o.ae(v);return o.K(m,m,[d,d,1]),c||o.ad(m,m,-f.angle),m}return f.glCoordMatrix}function te(v,r,c,f){let d;f?(d=[v,r,f(v,r),1],o.af(d,d,c)):(d=[v,r,0,1],Bt(d,d,c));let m=d[3];return{point:new o.P(d[0]/m,d[1]/m),signedDistanceFromCamera:m,isOccluded:!1}}function N(v,r){return .5+v/r*.5}function F(v,r){return v.x>=-r[0]&&v.x<=r[0]&&v.y>=-r[1]&&v.y<=r[1]}function W(v,r,c,f,d,m,w,I,A,O,k,D,j,H,Z){let ee=f?v.textSizeData:v.iconSizeData,ne=o.ag(ee,c.transform.zoom),ae=[256/c.width*2+1,256/c.height*2+1],ue=f?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ue.clear();let Y=v.lineVertexArray,he=f?v.text.placedSymbolArray:v.icon.placedSymbolArray,de=c.transform.width/c.transform.height,ye=!1;for(let Te=0;Te<he.length;Te++){let Me=he.get(Te);if(Me.hidden||Me.writingMode===o.ah.vertical&&!ye){lt(Me.numGlyphs,ue);continue}ye=!1;let je=te(Me.anchorX,Me.anchorY,r,Z);if(!F(je.point,ae)){lt(Me.numGlyphs,ue);continue}let Ke=N(c.transform.cameraToCenterDistance,je.signedDistanceFromCamera),ze=o.ai(ee,ne,Me),De=w?ze/Ke:ze*Ke,rt={getElevation:Z,labelPlaneMatrix:d,lineVertexArray:Y,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:O,tileAnchorPoint:new o.P(Me.anchorX,Me.anchorY),unwrappedTileID:k,width:D,height:j,translation:H},yt=fe(rt,Me,De,!1,I,r,m,v.glyphOffsetArray,ue,de,A);ye=yt.useVertical,(yt.notEnoughRoom||ye||yt.needsFlipping&&fe(rt,Me,De,!0,I,r,m,v.glyphOffsetArray,ue,de,A).notEnoughRoom)&&lt(Me.numGlyphs,ue)}f?v.text.dynamicLayoutVertexBuffer.updateData(ue):v.icon.dynamicLayoutVertexBuffer.updateData(ue)}function Q(v,r,c,f,d,m,w,I){let A=m.glyphStartIndex+m.numGlyphs,O=m.lineStartIndex,k=m.lineStartIndex+m.lineLength,D=r.getoffsetX(m.glyphStartIndex),j=r.getoffsetX(A-1),H=ke(v*D,c,f,d,m.segment,O,k,I,w);if(!H)return null;let Z=ke(v*j,c,f,d,m.segment,O,k,I,w);return Z?I.projectionCache.anyProjectionOccluded?null:{first:H,last:Z}:null}function ce(v,r,c,f){return v===o.ah.horizontal&&Math.abs(c.y-r.y)>Math.abs(c.x-r.x)*f?{useVertical:!0}:(v===o.ah.vertical?r.y<c.y:r.x>c.x)?{needsFlipping:!0}:null}function fe(v,r,c,f,d,m,w,I,A,O,k){let D=c/24,j=r.lineOffsetX*D,H=r.lineOffsetY*D,Z;if(r.numGlyphs>1){let ee=r.glyphStartIndex+r.numGlyphs,ne=r.lineStartIndex,ae=r.lineStartIndex+r.lineLength,ue=Q(D,I,j,H,f,r,k,v);if(!ue)return{notEnoughRoom:!0};let Y=te(ue.first.point.x,ue.first.point.y,w,v.getElevation).point,he=te(ue.last.point.x,ue.last.point.y,w,v.getElevation).point;if(d&&!f){let de=ce(r.writingMode,Y,he,O);if(de)return de}Z=[ue.first];for(let de=r.glyphStartIndex+1;de<ee-1;de++)Z.push(ke(D*I.getoffsetX(de),j,H,f,r.segment,ne,ae,v,k));Z.push(ue.last)}else{if(d&&!f){let ne=te(v.tileAnchorPoint.x,v.tileAnchorPoint.y,m,v.getElevation).point,ae=r.lineStartIndex+r.segment+1,ue=new o.P(v.lineVertexArray.getx(ae),v.lineVertexArray.gety(ae)),Y=te(ue.x,ue.y,m,v.getElevation),he=Y.signedDistanceFromCamera>0?Y.point:function(ye,Te,Me,je,Ke,ze){return me(ye,Te,Me,1,Ke,ze)}(v.tileAnchorPoint,ue,ne,0,m,v),de=ce(r.writingMode,ne,he,O);if(de)return de}let ee=ke(D*I.getoffsetX(r.glyphStartIndex),j,H,f,r.segment,r.lineStartIndex,r.lineStartIndex+r.lineLength,v,k);if(!ee||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};Z=[ee]}for(let ee of Z)o.aj(A,ee.point,ee.angle);return{}}function me(v,r,c,f,d,m){let w=v.add(v.sub(r)._unit()),I=d!==void 0?te(w.x,w.y,d,m.getElevation).point:Ie(w.x,w.y,m).point,A=c.sub(I);return c.add(A._mult(f/A.mag()))}function se(v,r,c){let f=r.projectionCache;if(f.projections[v])return f.projections[v];let d=new o.P(r.lineVertexArray.getx(v),r.lineVertexArray.gety(v)),m=Ie(d.x,d.y,r);if(m.signedDistanceFromCamera>0)return f.projections[v]=m.point,f.anyProjectionOccluded=f.anyProjectionOccluded||m.isOccluded,m.point;let w=v-c.direction;return function(I,A,O,k,D){return me(I,A,O,k,void 0,D)}(c.distanceFromAnchor===0?r.tileAnchorPoint:new o.P(r.lineVertexArray.getx(w),r.lineVertexArray.gety(w)),d,c.previousVertex,c.absOffsetX-c.distanceFromAnchor+1,r)}function Ie(v,r,c){let f=v+c.translation[0],d=r+c.translation[1],m;return!c.pitchWithMap&&c.projection.useSpecialProjectionForSymbols?(m=c.projection.projectTileCoordinates(f,d,c.unwrappedTileID,c.getElevation),m.point.x=(.5*m.point.x+.5)*c.width,m.point.y=(.5*-m.point.y+.5)*c.height):(m=te(f,d,c.labelPlaneMatrix,c.getElevation),m.isOccluded=!1),m}function Ae(v,r,c){return v._unit()._perp()._mult(r*c)}function we(v,r,c,f,d,m,w,I,A){if(I.projectionCache.offsets[v])return I.projectionCache.offsets[v];let O=c.add(r);if(v+A.direction<f||v+A.direction>=d)return I.projectionCache.offsets[v]=O,O;let k=se(v+A.direction,I,A),D=Ae(k.sub(c),w,A.direction),j=c.add(D),H=k.add(D);return I.projectionCache.offsets[v]=o.ak(m,O,j,H)||O,I.projectionCache.offsets[v]}function ke(v,r,c,f,d,m,w,I,A){let O=f?v-r:v+r,k=O>0?1:-1,D=0;f&&(k*=-1,D=Math.PI),k<0&&(D+=Math.PI);let j,H=k>0?m+d:m+d+1;I.projectionCache.cachedAnchorPoint?j=I.projectionCache.cachedAnchorPoint:(j=Ie(I.tileAnchorPoint.x,I.tileAnchorPoint.y,I).point,I.projectionCache.cachedAnchorPoint=j);let Z,ee,ne=j,ae=j,ue=0,Y=0,he=Math.abs(O),de=[],ye;for(;ue+Y<=he;){if(H+=k,H<m||H>=w)return null;ue+=Y,ae=ne,ee=Z;let je={absOffsetX:he,direction:k,distanceFromAnchor:ue,previousVertex:ae};if(ne=se(H,I,je),c===0)de.push(ae),ye=ne.sub(ae);else{let Ke,ze=ne.sub(ae);Ke=ze.mag()===0?Ae(se(H+k,I,je).sub(ne),c,k):Ae(ze,c,k),ee||(ee=ae.add(Ke)),Z=we(H,Ke,ne,m,w,ee,c,I,je),de.push(ee),ye=Z.sub(ee)}Y=ye.mag()}let Te=ye._mult((he-ue)/Y)._add(ee||ae),Me=D+Math.atan2(ne.y-ae.y,ne.x-ae.x);return de.push(Te),{point:Te,angle:A?Me:0,path:de}}let st=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function lt(v,r){for(let c=0;c<v;c++){let f=r.length;r.resize(f+4),r.float32.set(st,3*f)}}function Bt(v,r,c){let f=r[0],d=r[1];return v[0]=c[0]*f+c[4]*d+c[12],v[1]=c[1]*f+c[5]*d+c[13],v[3]=c[3]*f+c[7]*d+c[15],v}let St=100;class jt{constructor(r,c,f=new Xa(r.width+200,r.height+200,25),d=new Xa(r.width+200,r.height+200,25)){this.transform=r,this.mapProjection=c,this.grid=f,this.ignoredGrid=d,this.pitchFactor=Math.cos(r._pitch)*r.cameraToCenterDistance,this.screenRightBoundary=r.width+St,this.screenBottomBoundary=r.height+St,this.gridRightBoundary=r.width+200,this.gridBottomBoundary=r.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(r,c,f,d,m,w,I,A,O,k,D){let j=r.anchorPointX+A[0],H=r.anchorPointY+A[1],Z=this.projectAndGetPerspectiveRatio(d,j,H,m,k),ee=f*Z.perspectiveRatio,ne;if(w||I)ne=this._projectCollisionBox(r,ee,d,m,w,I,A,Z,k,D);else{let de=Z.point.x+(D?D.x*ee:0),ye=Z.point.y+(D?D.y*ee:0);ne={allPointsOccluded:!1,box:[de+r.x1*ee,ye+r.y1*ee,de+r.x2*ee,ye+r.y2*ee]}}let[ae,ue,Y,he]=ne.box;return this.mapProjection.useSpecialProjectionForSymbols&&(w?ne.allPointsOccluded:this.mapProjection.isOccluded(j,H,m))||Z.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(ae,ue,Y,he)||c!=="always"&&this.grid.hitTest(ae,ue,Y,he,c,O)?{box:[ae,ue,Y,he],placeable:!1,offscreen:!1}:{box:[ae,ue,Y,he],placeable:!0,offscreen:this.isOffscreen(ae,ue,Y,he)}}placeCollisionCircles(r,c,f,d,m,w,I,A,O,k,D,j,H,Z,ee,ne){let ae=[],ue=new o.P(c.anchorX,c.anchorY),Y=this.getPerspectiveRatio(w,ue.x,ue.y,I,ne),he=(D?m/Y:m*Y)/o.ap,de={getElevation:ne,labelPlaneMatrix:A,lineVertexArray:f,pitchWithMap:D,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ue,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:ee},ye=Q(he,d,c.lineOffsetX*he,c.lineOffsetY*he,!1,c,!1,de),Te=!1,Me=!1,je=!0;if(ye){let Ke=.5*H*Y+Z,ze=new o.P(-100,-100),De=new o.P(this.screenRightBoundary,this.screenBottomBoundary),rt=new bt,yt=ye.first,Ne=ye.last,Ge=[];for(let It=yt.path.length-1;It>=1;It--)Ge.push(yt.path[It]);for(let It=1;It<Ne.path.length;It++)Ge.push(Ne.path[It]);let mt=2.5*Ke;if(O){let It=this.projectPathToScreenSpace(Ge,de,O);Ge=It.some(Lt=>Lt.signedDistanceFromCamera<=0)?[]:It.map(Lt=>Lt.point)}let lr=[];if(Ge.length>0){let It=Ge[0].clone(),Lt=Ge[0].clone();for(let cr=1;cr<Ge.length;cr++)It.x=Math.min(It.x,Ge[cr].x),It.y=Math.min(It.y,Ge[cr].y),Lt.x=Math.max(Lt.x,Ge[cr].x),Lt.y=Math.max(Lt.y,Ge[cr].y);lr=It.x>=ze.x&&Lt.x<=De.x&&It.y>=ze.y&&Lt.y<=De.y?[Ge]:Lt.x<ze.x||It.x>De.x||Lt.y<ze.y||It.y>De.y?[]:o.al([Ge],ze.x,ze.y,De.x,De.y)}for(let It of lr){rt.reset(It,.25*Ke);let Lt=0;Lt=rt.length<=.5*Ke?1:Math.ceil(rt.paddedLength/mt)+1;for(let cr=0;cr<Lt;cr++){let ci=cr/Math.max(Lt-1,1),Qn=rt.lerp(ci),hr=Qn.x+St,Vi=Qn.y+St;ae.push(hr,Vi,Ke,0);let Ii=hr-Ke,hi=Vi-Ke,Ei=hr+Ke,wa=Vi+Ke;if(je=je&&this.isOffscreen(Ii,hi,Ei,wa),Me=Me||this.isInsideGrid(Ii,hi,Ei,wa),r!=="always"&&this.grid.hitTestCircle(hr,Vi,Ke,r,j)&&(Te=!0,!k))return{circles:[],offscreen:!1,collisionDetected:Te}}}}return{circles:!k&&Te||!Me||Y<this.perspectiveRatioCutoff?[]:ae,offscreen:je,collisionDetected:Te}}projectPathToScreenSpace(r,c,f){return r.map(d=>te(d.x,d.y,f,c.getElevation))}queryRenderedSymbols(r){if(r.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};let c=[],f=1/0,d=1/0,m=-1/0,w=-1/0;for(let k of r){let D=new o.P(k.x+St,k.y+St);f=Math.min(f,D.x),d=Math.min(d,D.y),m=Math.max(m,D.x),w=Math.max(w,D.y),c.push(D)}let I=this.grid.query(f,d,m,w).concat(this.ignoredGrid.query(f,d,m,w)),A={},O={};for(let k of I){let D=k.key;if(A[D.bucketInstanceId]===void 0&&(A[D.bucketInstanceId]={}),A[D.bucketInstanceId][D.featureIndex])continue;let j=[new o.P(k.x1,k.y1),new o.P(k.x2,k.y1),new o.P(k.x2,k.y2),new o.P(k.x1,k.y2)];o.am(c,j)&&(A[D.bucketInstanceId][D.featureIndex]=!0,O[D.bucketInstanceId]===void 0&&(O[D.bucketInstanceId]=[]),O[D.bucketInstanceId].push(D.featureIndex))}return O}insertCollisionBox(r,c,f,d,m,w){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:d,featureIndex:m,collisionGroupID:w,overlapMode:c},r[0],r[1],r[2],r[3])}insertCollisionCircles(r,c,f,d,m,w){let I=f?this.ignoredGrid:this.grid,A={bucketInstanceId:d,featureIndex:m,collisionGroupID:w,overlapMode:c};for(let O=0;O<r.length;O+=4)I.insertCircle(A,r[O],r[O+1],r[O+2])}projectAndGetPerspectiveRatio(r,c,f,d,m){let w;m?(w=[c,f,m(c,f),1],o.af(w,w,r)):(w=[c,f,0,1],Bt(w,w,r));let I=w[3];return{point:new o.P((w[0]/I+1)/2*this.transform.width+St,(-w[1]/I+1)/2*this.transform.height+St),perspectiveRatio:.5+this.transform.cameraToCenterDistance/I*.5,isOccluded:!1,signedDistanceFromCamera:I}}getPerspectiveRatio(r,c,f,d,m){let w=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(c,f,d,m):te(c,f,r,m);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(r,c,f,d){return f<St||r>=this.screenRightBoundary||d<St||c>this.screenBottomBoundary}isInsideGrid(r,c,f,d){return f>=0&&r<this.gridRightBoundary&&d>=0&&c<this.gridBottomBoundary}getViewportMatrix(){let r=o.an([]);return o.J(r,r,[-100,-100,0]),r}_projectCollisionBox(r,c,f,d,m,w,I,A,O,k){let D=new o.P(1,0),j=new o.P(0,1),H=new o.P(r.anchorPointX+I[0],r.anchorPointY+I[1]);if(w&&!m){let je=this.projectAndGetPerspectiveRatio(f,H.x+1,H.y,d,O).point.sub(A.point).unit(),Ke=Math.atan(je.y/je.x)+(je.x<0?Math.PI:0),ze=Math.sin(Ke),De=Math.cos(Ke);D=new o.P(De,ze),j=new o.P(-ze,De)}else if(!w&&m){let je=-this.transform.angle,Ke=Math.sin(je),ze=Math.cos(je);D=new o.P(ze,Ke),j=new o.P(-Ke,ze)}let Z=A.point,ee=c;if(m){Z=H;let je=this.transform.zoom-Math.floor(this.transform.zoom);ee=Math.pow(2,-je),ee*=this.mapProjection.getPitchedTextCorrection(this.transform,H,d),k||(ee*=o.ac(.5+A.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}k&&(Z=Z.add(D.mult(k.x*ee)).add(j.mult(k.y*ee)));let ne=r.x1*ee,ae=r.x2*ee,ue=(ne+ae)/2,Y=r.y1*ee,he=r.y2*ee,de=(Y+he)/2,ye=[{offsetX:ne,offsetY:Y},{offsetX:ue,offsetY:Y},{offsetX:ae,offsetY:Y},{offsetX:ae,offsetY:de},{offsetX:ae,offsetY:he},{offsetX:ue,offsetY:he},{offsetX:ne,offsetY:he},{offsetX:ne,offsetY:de}],Te=[];for(let{offsetX:je,offsetY:Ke}of ye)Te.push(new o.P(Z.x+D.x*je+j.x*Ke,Z.y+D.y*je+j.y*Ke));let Me=!1;if(m){let je=Te.map(Ke=>this.projectAndGetPerspectiveRatio(f,Ke.x,Ke.y,d,O));Me=je.some(Ke=>!Ke.isOccluded),Te=je.map(Ke=>Ke.point)}else Me=!0;return{box:o.ao(Te),allPointsOccluded:!Me}}}function Dt(v,r,c){return r*(o.X/(v.tileSize*Math.pow(2,c-v.tileID.overscaledZ)))}class Dr{constructor(r,c,f,d){this.opacity=r?Math.max(0,Math.min(1,r.opacity+(r.placed?c:-c))):d&&f?1:0,this.placed=f}isHidden(){return this.opacity===0&&!this.placed}}class br{constructor(r,c,f,d,m){this.text=new Dr(r?r.text:null,c,f,m),this.icon=new Dr(r?r.icon:null,c,d,m)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Pt{constructor(r,c,f){this.text=r,this.icon=c,this.skipFade=f}}class Kt{constructor(){this.invProjMatrix=o.H(),this.viewportMatrix=o.H(),this.circles=[]}}class pr{constructor(r,c,f,d,m){this.bucketInstanceId=r,this.featureIndex=c,this.sourceLayerIndex=f,this.bucketIndex=d,this.tileID=m}}class Zr{constructor(r){this.crossSourceCollisions=r,this.maxGroupID=0,this.collisionGroups={}}get(r){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[r]){let c=++this.maxGroupID;this.collisionGroups[r]={ID:c,predicate:f=>f.collisionGroupID===c}}return this.collisionGroups[r]}}function ri(v,r,c,f,d){let{horizontalAlign:m,verticalAlign:w}=o.au(v);return new o.P(-(m-.5)*r+f[0]*d,-(w-.5)*c+f[1]*d)}class qi{constructor(r,c,f,d,m,w){this.transform=r.clone(),this.terrain=f,this.collisionIndex=new jt(this.transform,c),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new Zr(m),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(r){let c=this.terrain;return c?(f,d)=>c.getElevation(r,f,d):null}getBucketParts(r,c,f,d){let m=f.getBucket(c),w=f.latestFeatureIndex;if(!m||!w||c.id!==m.layerIds[0])return;let I=f.collisionBoxArray,A=m.layers[0].layout,O=m.layers[0].paint,k=Math.pow(2,this.transform.zoom-f.tileID.overscaledZ),D=f.tileSize/o.X,j=f.tileID.toUnwrapped(),H=this.transform.calculatePosMatrix(j),Z=A.get("text-pitch-alignment")==="map",ee=A.get("text-rotation-alignment")==="map",ne=Dt(f,1,this.transform.zoom),ae=this.collisionIndex.mapProjection.translatePosition(this.transform,f,O.get("text-translate"),O.get("text-translate-anchor")),ue=this.collisionIndex.mapProjection.translatePosition(this.transform,f,O.get("icon-translate"),O.get("icon-translate-anchor")),Y=So(H,Z,ee,this.transform,ne),he=null;if(Z){let ye=ya(H,Z,ee,this.transform,ne);he=o.L([],this.transform.labelPlaneMatrix,ye)}this.retainedQueryData[m.bucketInstanceId]=new pr(m.bucketInstanceId,w,m.sourceLayerIndex,m.index,f.tileID);let de={bucket:m,layout:A,translationText:ae,translationIcon:ue,posMatrix:H,unwrappedTileID:j,textLabelPlaneMatrix:Y,labelToScreenMatrix:he,scale:k,textPixelRatio:D,holdingForFade:f.holdingForFade(),collisionBoxArray:I,partiallyEvaluatedTextSize:o.ag(m.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(m.sourceID)};if(d)for(let ye of m.sortKeyRanges){let{sortKey:Te,symbolInstanceStart:Me,symbolInstanceEnd:je}=ye;r.push({sortKey:Te,symbolInstanceStart:Me,symbolInstanceEnd:je,parameters:de})}else r.push({symbolInstanceStart:0,symbolInstanceEnd:m.symbolInstances.length,parameters:de})}attemptAnchorPlacement(r,c,f,d,m,w,I,A,O,k,D,j,H,Z,ee,ne,ae,ue,Y){let he=o.aq[r.textAnchor],de=[r.textOffset0,r.textOffset1],ye=ri(he,f,d,de,m),Te=this.collisionIndex.placeCollisionBox(c,j,A,O,k,I,w,ne,D.predicate,Y,ye);if((!ue||this.collisionIndex.placeCollisionBox(ue,j,A,O,k,I,w,ae,D.predicate,Y,ye).placeable)&&Te.placeable){let Me;if(this.prevPlacement&&this.prevPlacement.variableOffsets[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID]&&this.prevPlacement.placements[H.crossTileID].text&&(Me=this.prevPlacement.variableOffsets[H.crossTileID].anchor),H.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[H.crossTileID]={textOffset:de,width:f,height:d,anchor:he,textBoxScale:m,prevAnchor:Me},this.markUsedJustification(Z,he,H,ee),Z.allowVerticalPlacement&&(this.markUsedOrientation(Z,ee,H),this.placedOrientations[H.crossTileID]=ee),{shift:ye,placedGlyphBoxes:Te}}}placeLayerBucketPart(r,c,f){let{bucket:d,layout:m,translationText:w,translationIcon:I,posMatrix:A,unwrappedTileID:O,textLabelPlaneMatrix:k,labelToScreenMatrix:D,textPixelRatio:j,holdingForFade:H,collisionBoxArray:Z,partiallyEvaluatedTextSize:ee,collisionGroup:ne}=r.parameters,ae=m.get("text-optional"),ue=m.get("icon-optional"),Y=o.ar(m,"text-overlap","text-allow-overlap"),he=Y==="always",de=o.ar(m,"icon-overlap","icon-allow-overlap"),ye=de==="always",Te=m.get("text-rotation-alignment")==="map",Me=m.get("text-pitch-alignment")==="map",je=m.get("icon-text-fit")!=="none",Ke=m.get("symbol-z-order")==="viewport-y",ze=he&&(ye||!d.hasIconData()||ue),De=ye&&(he||!d.hasTextData()||ae);!d.collisionArrays&&Z&&d.deserializeCollisionBoxes(Z);let rt=this._getTerrainElevationFunc(this.retainedQueryData[d.bucketInstanceId].tileID),yt=(Ne,Ge,mt)=>{var lr,It;if(c[Ne.crossTileID])return;if(H)return void(this.placements[Ne.crossTileID]=new Pt(!1,!1,!1));let Lt=!1,cr=!1,ci=!0,Qn=null,hr={box:null,placeable:!1,offscreen:null},Vi={box:null,placeable:!1,offscreen:null},Ii=null,hi=null,Ei=null,wa=0,wu=0,zh=0;Ge.textFeatureIndex?wa=Ge.textFeatureIndex:Ne.useRuntimeCollisionCircles&&(wa=Ne.featureIndex),Ge.verticalTextFeatureIndex&&(wu=Ge.verticalTextFeatureIndex);let Su=Ge.textBox;if(Su){let Tn=ii=>{let fi=o.ah.horizontal;if(d.allowVerticalPlacement&&!ii&&this.prevPlacement){let hn=this.prevPlacement.placedOrientations[Ne.crossTileID];hn&&(this.placedOrientations[Ne.crossTileID]=hn,fi=hn,this.markUsedOrientation(d,fi,Ne))}return fi},An=(ii,fi)=>{if(d.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&Ge.verticalTextBox){for(let hn of d.writingModes)if(hn===o.ah.vertical?(hr=fi(),Vi=hr):hr=ii(),hr&&hr.placeable)break}else hr=ii()},Eo=Ne.textAnchorOffsetStartIndex,ea=Ne.textAnchorOffsetEndIndex;if(ea===Eo){let ii=(fi,hn)=>{let Ft=this.collisionIndex.placeCollisionBox(fi,Y,j,A,O,Me,Te,w,ne.predicate,rt);return Ft&&Ft.placeable&&(this.markUsedOrientation(d,hn,Ne),this.placedOrientations[Ne.crossTileID]=hn),Ft};An(()=>ii(Su,o.ah.horizontal),()=>{let fi=Ge.verticalTextBox;return d.allowVerticalPlacement&&Ne.numVerticalGlyphVertices>0&&fi?ii(fi,o.ah.vertical):{box:null,offscreen:null}}),Tn(hr&&hr.placeable)}else{let ii=o.aq[(It=(lr=this.prevPlacement)===null||lr===void 0?void 0:lr.variableOffsets[Ne.crossTileID])===null||It===void 0?void 0:It.anchor],fi=(Ft,vs,qu)=>{let Iu=Ft.x2-Ft.x1,Hy=Ft.y2-Ft.y1,jw=Ne.textBoxScale,Wy=je&&de==="never"?vs:null,To=null,Zy=Y==="never"?1:2,Nh="never";ii&&Zy++;for(let rc=0;rc<Zy;rc++){for(let Bh=Eo;Bh<ea;Bh++){let jh=d.textAnchorOffsets.get(Bh);if(ii&&jh.textAnchor!==ii)continue;let Eu=this.attemptAnchorPlacement(jh,Ft,Iu,Hy,jw,Te,Me,j,A,O,ne,Nh,Ne,d,qu,w,I,Wy,rt);if(Eu&&(To=Eu.placedGlyphBoxes,To&&To.placeable))return Lt=!0,Qn=Eu.shift,To}ii?ii=null:Nh=Y}return f&&!To&&(To={box:this.collisionIndex.placeCollisionBox(Su,"always",j,A,O,Me,Te,w,ne.predicate,rt,new o.P(0,0)).box,offscreen:!1,placeable:!1}),To};An(()=>fi(Su,Ge.iconBox,o.ah.horizontal),()=>{let Ft=Ge.verticalTextBox;return d.allowVerticalPlacement&&(!hr||!hr.placeable)&&Ne.numVerticalGlyphVertices>0&&Ft?fi(Ft,Ge.verticalIconBox,o.ah.vertical):{box:null,occluded:!0,offscreen:null}}),hr&&(Lt=hr.placeable,ci=hr.offscreen);let hn=Tn(hr&&hr.placeable);if(!Lt&&this.prevPlacement){let Ft=this.prevPlacement.variableOffsets[Ne.crossTileID];Ft&&(this.variableOffsets[Ne.crossTileID]=Ft,this.markUsedJustification(d,Ft.anchor,Ne,hn))}}}if(Ii=hr,Lt=Ii&&Ii.placeable,ci=Ii&&Ii.offscreen,Ne.useRuntimeCollisionCircles){let Tn=d.text.placedSymbolArray.get(Ne.centerJustifiedTextSymbolIndex),An=o.ai(d.textSizeData,ee,Tn),Eo=m.get("text-padding");hi=this.collisionIndex.placeCollisionCircles(Y,Tn,d.lineVertexArray,d.glyphOffsetArray,An,A,O,k,D,f,Me,ne.predicate,Ne.collisionCircleDiameter,Eo,w,rt),hi.circles.length&&hi.collisionDetected&&!f&&o.w("Collisions detected, but collision boxes are not shown"),Lt=he||hi.circles.length>0&&!hi.collisionDetected,ci=ci&&hi.offscreen}if(Ge.iconFeatureIndex&&(zh=Ge.iconFeatureIndex),Ge.iconBox){let Tn=An=>this.collisionIndex.placeCollisionBox(An,de,j,A,O,Me,Te,I,ne.predicate,rt,je&&Qn?Qn:void 0);Vi&&Vi.placeable&&Ge.verticalIconBox?(Ei=Tn(Ge.verticalIconBox),cr=Ei.placeable):(Ei=Tn(Ge.iconBox),cr=Ei.placeable),ci=ci&&Ei.offscreen}let En=ae||Ne.numHorizontalGlyphVertices===0&&Ne.numVerticalGlyphVertices===0,Fh=ue||Ne.numIconVertices===0;En||Fh?Fh?En||(cr=cr&&Lt):Lt=cr&&Lt:cr=Lt=cr&&Lt;let Lp=cr&&Ei.placeable;if(Lt&&Ii.placeable&&this.collisionIndex.insertCollisionBox(Ii.box,Y,m.get("text-ignore-placement"),d.bucketInstanceId,Vi&&Vi.placeable&&wu?wu:wa,ne.ID),Lp&&this.collisionIndex.insertCollisionBox(Ei.box,de,m.get("icon-ignore-placement"),d.bucketInstanceId,zh,ne.ID),hi&&Lt&&this.collisionIndex.insertCollisionCircles(hi.circles,Y,m.get("text-ignore-placement"),d.bucketInstanceId,wa,ne.ID),f&&this.storeCollisionData(d.bucketInstanceId,mt,Ge,Ii,Ei,hi),Ne.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(d.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Ne.crossTileID]=new Pt(Lt||ze,cr||De,ci||d.justReloaded),c[Ne.crossTileID]=!0};if(Ke){if(r.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");let Ne=d.getSortedSymbolIndexes(this.transform.angle);for(let Ge=Ne.length-1;Ge>=0;--Ge){let mt=Ne[Ge];yt(d.symbolInstances.get(mt),d.collisionArrays[mt],mt)}}else for(let Ne=r.symbolInstanceStart;Ne<r.symbolInstanceEnd;Ne++)yt(d.symbolInstances.get(Ne),d.collisionArrays[Ne],Ne);if(f&&d.bucketInstanceId in this.collisionCircleArrays){let Ne=this.collisionCircleArrays[d.bucketInstanceId];o.as(Ne.invProjMatrix,A),Ne.viewportMatrix=this.collisionIndex.getViewportMatrix()}d.justReloaded=!1}storeCollisionData(r,c,f,d,m,w){if(f.textBox||f.iconBox){let I,A;this.collisionBoxArrays.has(r)?I=this.collisionBoxArrays.get(r):(I=new Map,this.collisionBoxArrays.set(r,I)),I.has(c)?A=I.get(c):(A={text:null,icon:null},I.set(c,A)),f.textBox&&(A.text=d.box),f.iconBox&&(A.icon=m.box)}if(w){let I=this.collisionCircleArrays[r];I===void 0&&(I=this.collisionCircleArrays[r]=new Kt);for(let A=0;A<w.circles.length;A+=4)I.circles.push(w.circles[A+0]),I.circles.push(w.circles[A+1]),I.circles.push(w.circles[A+2]),I.circles.push(w.collisionDetected?1:0)}}markUsedJustification(r,c,f,d){let m;m=d===o.ah.vertical?f.verticalPlacedTextSymbolIndex:{left:f.leftJustifiedTextSymbolIndex,center:f.centerJustifiedTextSymbolIndex,right:f.rightJustifiedTextSymbolIndex}[o.at(c)];let w=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex,f.verticalPlacedTextSymbolIndex];for(let I of w)I>=0&&(r.text.placedSymbolArray.get(I).crossTileID=m>=0&&I!==m?0:f.crossTileID)}markUsedOrientation(r,c,f){let d=c===o.ah.horizontal||c===o.ah.horizontalOnly?c:0,m=c===o.ah.vertical?c:0,w=[f.leftJustifiedTextSymbolIndex,f.centerJustifiedTextSymbolIndex,f.rightJustifiedTextSymbolIndex];for(let I of w)r.text.placedSymbolArray.get(I).placedOrientation=d;f.verticalPlacedTextSymbolIndex&&(r.text.placedSymbolArray.get(f.verticalPlacedTextSymbolIndex).placedOrientation=m)}commit(r){this.commitTime=r,this.zoomAtLastRecencyCheck=this.transform.zoom;let c=this.prevPlacement,f=!1;this.prevZoomAdjustment=c?c.zoomAdjustment(this.transform.zoom):0;let d=c?c.symbolFadeChange(r):1,m=c?c.opacities:{},w=c?c.variableOffsets:{},I=c?c.placedOrientations:{};for(let A in this.placements){let O=this.placements[A],k=m[A];k?(this.opacities[A]=new br(k,d,O.text,O.icon),f=f||O.text!==k.text.placed||O.icon!==k.icon.placed):(this.opacities[A]=new br(null,d,O.text,O.icon,O.skipFade),f=f||O.text||O.icon)}for(let A in m){let O=m[A];if(!this.opacities[A]){let k=new br(O,d,!1,!1);k.isHidden()||(this.opacities[A]=k,f=f||O.text.placed||O.icon.placed)}}for(let A in w)this.variableOffsets[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.variableOffsets[A]=w[A]);for(let A in I)this.placedOrientations[A]||!this.opacities[A]||this.opacities[A].isHidden()||(this.placedOrientations[A]=I[A]);if(c&&c.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");f?this.lastPlacementChangeTime=r:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=c?c.lastPlacementChangeTime:r)}updateLayerOpacities(r,c){let f={};for(let d of c){let m=d.getBucket(r);m&&d.latestFeatureIndex&&r.id===m.layerIds[0]&&this.updateBucketOpacities(m,d.tileID,f,d.collisionBoxArray)}}updateBucketOpacities(r,c,f,d){r.hasTextData()&&(r.text.opacityVertexArray.clear(),r.text.hasVisibleVertices=!1),r.hasIconData()&&(r.icon.opacityVertexArray.clear(),r.icon.hasVisibleVertices=!1),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexArray.clear(),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexArray.clear();let m=r.layers[0],w=m.layout,I=new br(null,0,!1,!1,!0),A=w.get("text-allow-overlap"),O=w.get("icon-allow-overlap"),k=m._unevaluatedLayout.hasValue("text-variable-anchor")||m._unevaluatedLayout.hasValue("text-variable-anchor-offset"),D=w.get("text-rotation-alignment")==="map",j=w.get("text-pitch-alignment")==="map",H=w.get("icon-text-fit")!=="none",Z=new br(null,0,A&&(O||!r.hasIconData()||w.get("icon-optional")),O&&(A||!r.hasTextData()||w.get("text-optional")),!0);!r.collisionArrays&&d&&(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData())&&r.deserializeCollisionBoxes(d);let ee=(ae,ue,Y)=>{for(let he=0;he<ue/4;he++)ae.opacityVertexArray.emplaceBack(Y);ae.hasVisibleVertices=ae.hasVisibleVertices||Y!==tu},ne=this.collisionBoxArrays.get(r.bucketInstanceId);for(let ae=0;ae<r.symbolInstances.length;ae++){let ue=r.symbolInstances.get(ae),{numHorizontalGlyphVertices:Y,numVerticalGlyphVertices:he,crossTileID:de}=ue,ye=this.opacities[de];f[de]?ye=I:ye||(ye=Z,this.opacities[de]=ye),f[de]=!0;let Te=ue.numIconVertices>0,Me=this.placedOrientations[ue.crossTileID],je=Me===o.ah.vertical,Ke=Me===o.ah.horizontal||Me===o.ah.horizontalOnly;if(Y>0||he>0){let De=un(ye.text);ee(r.text,Y,je?tu:De),ee(r.text,he,Ke?tu:De);let rt=ye.text.isHidden();[ue.rightJustifiedTextSymbolIndex,ue.centerJustifiedTextSymbolIndex,ue.leftJustifiedTextSymbolIndex].forEach(Ge=>{Ge>=0&&(r.text.placedSymbolArray.get(Ge).hidden=rt||je?1:0)}),ue.verticalPlacedTextSymbolIndex>=0&&(r.text.placedSymbolArray.get(ue.verticalPlacedTextSymbolIndex).hidden=rt||Ke?1:0);let yt=this.variableOffsets[ue.crossTileID];yt&&this.markUsedJustification(r,yt.anchor,ue,Me);let Ne=this.placedOrientations[ue.crossTileID];Ne&&(this.markUsedJustification(r,"left",ue,Ne),this.markUsedOrientation(r,Ne,ue))}if(Te){let De=un(ye.icon),rt=!(H&&ue.verticalPlacedIconSymbolIndex&&je);ue.placedIconSymbolIndex>=0&&(ee(r.icon,ue.numIconVertices,rt?De:tu),r.icon.placedSymbolArray.get(ue.placedIconSymbolIndex).hidden=ye.icon.isHidden()),ue.verticalPlacedIconSymbolIndex>=0&&(ee(r.icon,ue.numVerticalIconVertices,rt?tu:De),r.icon.placedSymbolArray.get(ue.verticalPlacedIconSymbolIndex).hidden=ye.icon.isHidden())}let ze=ne&&ne.has(ae)?ne.get(ae):{text:null,icon:null};if(r.hasIconCollisionBoxData()||r.hasTextCollisionBoxData()){let De=r.collisionArrays[ae];if(De){let rt=new o.P(0,0);if(De.textBox||De.verticalTextBox){let yt=!0;if(k){let Ne=this.variableOffsets[de];Ne?(rt=ri(Ne.anchor,Ne.width,Ne.height,Ne.textOffset,Ne.textBoxScale),D&&rt._rotate(j?this.transform.angle:-this.transform.angle)):yt=!1}if(De.textBox||De.verticalTextBox){let Ne;De.textBox&&(Ne=je),De.verticalTextBox&&(Ne=Ke),eu(r.textCollisionBox.collisionVertexArray,ye.text.placed,!yt||Ne,ze.text,rt.x,rt.y)}}if(De.iconBox||De.verticalIconBox){let yt=!!(!Ke&&De.verticalIconBox),Ne;De.iconBox&&(Ne=yt),De.verticalIconBox&&(Ne=!yt),eu(r.iconCollisionBox.collisionVertexArray,ye.icon.placed,Ne,ze.icon,H?rt.x:0,H?rt.y:0)}}}}if(r.sortFeatures(this.transform.angle),this.retainedQueryData[r.bucketInstanceId]&&(this.retainedQueryData[r.bucketInstanceId].featureSortOrder=r.featureSortOrder),r.hasTextData()&&r.text.opacityVertexBuffer&&r.text.opacityVertexBuffer.updateData(r.text.opacityVertexArray),r.hasIconData()&&r.icon.opacityVertexBuffer&&r.icon.opacityVertexBuffer.updateData(r.icon.opacityVertexArray),r.hasIconCollisionBoxData()&&r.iconCollisionBox.collisionVertexBuffer&&r.iconCollisionBox.collisionVertexBuffer.updateData(r.iconCollisionBox.collisionVertexArray),r.hasTextCollisionBoxData()&&r.textCollisionBox.collisionVertexBuffer&&r.textCollisionBox.collisionVertexBuffer.updateData(r.textCollisionBox.collisionVertexArray),r.text.opacityVertexArray.length!==r.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${r.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${r.text.layoutVertexArray.length}) / 4`);if(r.icon.opacityVertexArray.length!==r.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${r.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${r.icon.layoutVertexArray.length}) / 4`);if(r.bucketInstanceId in this.collisionCircleArrays){let ae=this.collisionCircleArrays[r.bucketInstanceId];r.placementInvProjMatrix=ae.invProjMatrix,r.placementViewportMatrix=ae.viewportMatrix,r.collisionCircleArray=ae.circles,delete this.collisionCircleArrays[r.bucketInstanceId]}}symbolFadeChange(r){return this.fadeDuration===0?1:(r-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(r){return Math.max(0,(this.transform.zoom-r)/1.5)}hasTransitions(r){return this.stale||r-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(r,c){let f=this.zoomAtLastRecencyCheck===c?1-this.zoomAdjustment(c):1;return this.zoomAtLastRecencyCheck=c,this.commitTime+this.fadeDuration*f>r}setStale(){this.stale=!0}}function eu(v,r,c,f,d,m){f&&f.length!==0||(f=[0,0,0,0]);let w=f[0]-St,I=f[1]-St,A=f[2]-St,O=f[3]-St;v.emplaceBack(r?1:0,c?1:0,d||0,m||0,w,I),v.emplaceBack(r?1:0,c?1:0,d||0,m||0,A,I),v.emplaceBack(r?1:0,c?1:0,d||0,m||0,A,O),v.emplaceBack(r?1:0,c?1:0,d||0,m||0,w,O)}let Xt=Math.pow(2,25),Wd=Math.pow(2,24),Zd=Math.pow(2,17),on=Math.pow(2,16),sn=Math.pow(2,9),mw=Math.pow(2,8),wn=Math.pow(2,1);function un(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;let r=v.placed?1:0,c=Math.floor(127*v.opacity);return c*Xt+r*Wd+c*Zd+r*on+c*sn+r*mw+c*wn+r}let tu=0;function ns(){return{isOccluded:(v,r,c)=>!1,getPitchedTextCorrection:(v,r,c)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,r,c,f){throw new Error("Not implemented.")},translatePosition:(v,r,c,f)=>function(d,m,w,I,A=!1){if(!w[0]&&!w[1])return[0,0];let O=A?I==="map"?d.angle:0:I==="viewport"?-d.angle:0;if(O){let k=Math.sin(O),D=Math.cos(O);w=[w[0]*D-w[1]*k,w[0]*k+w[1]*D]}return[A?w[0]:Dt(m,w[0],d.zoom),A?w[1]:Dt(m,w[1],d.zoom)]}(v,r,c,f),getCircleRadiusCorrection:v=>1}}class Lr{constructor(r){this._sortAcrossTiles=r.layout.get("symbol-z-order")!=="viewport-y"&&!r.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(r,c,f,d,m){let w=this._bucketParts;for(;this._currentTileIndex<r.length;)if(c.getBucketParts(w,d,r[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,m())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,w.sort((I,A)=>I.sortKey-A.sortKey));this._currentPartIndex<w.length;)if(c.placeLayerBucketPart(w[this._currentPartIndex],this._seenCrossTileIDs,f),this._currentPartIndex++,m())return!0;return!1}}class Fl{constructor(r,c,f,d,m,w,I,A){this.placement=new qi(r,ns(),c,w,I,A),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=d,this._showCollisionBoxes=m,this._done=!1}isDone(){return this._done}continuePlacement(r,c,f){let d=T.now(),m=()=>!this._forceFullPlacement&&T.now()-d>2;for(;this._currentPlacementIndex>=0;){let w=c[r[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(w.type==="symbol"&&(!w.minzoom||w.minzoom<=I)&&(!w.maxzoom||w.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Lr(w)),this._inProgressLayer.continuePlacement(f[w.source],this.placement,this._showCollisionBoxes,w,m))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(r){return this.placement.commit(r),this.placement}}let Zn=512/o.X/2;class Rr{constructor(r,c,f){this.tileID=r,this.bucketInstanceId=f,this._symbolsByKey={};let d=new Map;for(let m=0;m<c.length;m++){let w=c.get(m),I=w.key,A=d.get(I);A?A.push(w):d.set(I,[w])}for(let[m,w]of d){let I={positions:w.map(A=>({x:Math.floor(A.anchorX*Zn),y:Math.floor(A.anchorY*Zn)})),crossTileIDs:w.map(A=>A.crossTileID)};if(I.positions.length>128){let A=new o.av(I.positions.length,16,Uint16Array);for(let{x:O,y:k}of I.positions)A.add(O,k);A.finish(),delete I.positions,I.index=A}this._symbolsByKey[m]=I}}getScaledCoordinates(r,c){let{x:f,y:d,z:m}=this.tileID.canonical,{x:w,y:I,z:A}=c.canonical,O=Zn/Math.pow(2,A-m),k=(I*o.X+r.anchorY)*O,D=d*o.X*Zn;return{x:Math.floor((w*o.X+r.anchorX)*O-f*o.X*Zn),y:Math.floor(k-D)}}findMatches(r,c,f){let d=this.tileID.canonical.z<c.canonical.z?1:Math.pow(2,this.tileID.canonical.z-c.canonical.z);for(let m=0;m<r.length;m++){let w=r.get(m);if(w.crossTileID)continue;let I=this._symbolsByKey[w.key];if(!I)continue;let A=this.getScaledCoordinates(w,c);if(I.index){let O=I.index.range(A.x-d,A.y-d,A.x+d,A.y+d).sort();for(let k of O){let D=I.crossTileIDs[k];if(!f[D]){f[D]=!0,w.crossTileID=D;break}}}else if(I.positions)for(let O=0;O<I.positions.length;O++){let k=I.positions[O],D=I.crossTileIDs[O];if(Math.abs(k.x-A.x)<=d&&Math.abs(k.y-A.y)<=d&&!f[D]){f[D]=!0,w.crossTileID=D;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:r})=>r)}}class oh{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Kn{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(r){let c=Math.round((r-this.lng)/360);if(c!==0)for(let f in this.indexes){let d=this.indexes[f],m={};for(let w in d){let I=d[w];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+c),m[I.tileID.key]=I}this.indexes[f]=m}this.lng=r}addBucket(r,c,f){if(this.indexes[r.overscaledZ]&&this.indexes[r.overscaledZ][r.key]){if(this.indexes[r.overscaledZ][r.key].bucketInstanceId===c.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(r.overscaledZ,this.indexes[r.overscaledZ][r.key])}for(let m=0;m<c.symbolInstances.length;m++)c.symbolInstances.get(m).crossTileID=0;this.usedCrossTileIDs[r.overscaledZ]||(this.usedCrossTileIDs[r.overscaledZ]={});let d=this.usedCrossTileIDs[r.overscaledZ];for(let m in this.indexes){let w=this.indexes[m];if(Number(m)>r.overscaledZ)for(let I in w){let A=w[I];A.tileID.isChildOf(r)&&A.findMatches(c.symbolInstances,r,d)}else{let I=w[r.scaledTo(Number(m)).key];I&&I.findMatches(c.symbolInstances,r,d)}}for(let m=0;m<c.symbolInstances.length;m++){let w=c.symbolInstances.get(m);w.crossTileID||(w.crossTileID=f.generate(),d[w.crossTileID]=!0)}return this.indexes[r.overscaledZ]===void 0&&(this.indexes[r.overscaledZ]={}),this.indexes[r.overscaledZ][r.key]=new Rr(r,c.symbolInstances,c.bucketInstanceId),!0}removeBucketCrossTileIDs(r,c){for(let f of c.getCrossTileIDsLists())for(let d of f)delete this.usedCrossTileIDs[r][d]}removeStaleBuckets(r){let c=!1;for(let f in this.indexes){let d=this.indexes[f];for(let m in d)r[d[m].bucketInstanceId]||(this.removeBucketCrossTileIDs(f,d[m]),delete d[m],c=!0)}return c}}class Kd{constructor(){this.layerIndexes={},this.crossTileIDs=new oh,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(r,c,f){let d=this.layerIndexes[r.id];d===void 0&&(d=this.layerIndexes[r.id]=new Kn);let m=!1,w={};d.handleWrapJump(f);for(let I of c){let A=I.getBucket(r);A&&r.id===A.layerIds[0]&&(A.bucketInstanceId||(A.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(I.tileID,A,this.crossTileIDs)&&(m=!0),w[A.bucketInstanceId]=!0)}return d.removeStaleBuckets(w)&&(m=!0),m}pruneUnusedLayers(r){let c={};r.forEach(f=>{c[f]=!0});for(let f in this.layerIndexes)c[f]||delete this.layerIndexes[f]}}let Xn=(v,r)=>o.t(v,r&&r.filter(c=>c.identifier!=="source.canvas")),vw=o.aw();class sh extends o.E{constructor(r,c={}){super(),this._rtlPluginLoaded=()=>{for(let f in this.sourceCaches){let d=this.sourceCaches[f].getSource().type;d!=="vector"&&d!=="geojson"||this.sourceCaches[f].reload()}},this.map=r,this.dispatcher=new rs(ts(),r._getMapId()),this.dispatcher.registerMessageHandler("GG",(f,d)=>this.getGlyphs(f,d)),this.dispatcher.registerMessageHandler("GI",(f,d)=>this.getImages(f,d)),this.imageManager=new Wr,this.imageManager.setEventedParent(this),this.glyphManager=new da(r._requestManager,c.localIdeographFontFamily),this.lineAtlas=new Xs(256,512),this.crossTileSymbolIndex=new Kd,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new o.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",o.ay()),va().on(Re,this._rtlPluginLoaded),this.on("data",f=>{if(f.dataType!=="source"||f.sourceDataType!=="metadata")return;let d=this.sourceCaches[f.sourceId];if(!d)return;let m=d.getSource();if(m&&m.vectorLayerIds)for(let w in this._layers){let I=this._layers[w];I.source===m.id&&this._validateLayer(I)}})}loadURL(r,c={},f){this.fire(new o.k("dataloading",{dataType:"style"})),c.validate=typeof c.validate!="boolean"||c.validate;let d=this.map._requestManager.transformRequest(r,"Style");this._loadStyleRequest=new AbortController;let m=this._loadStyleRequest;o.h(d,this._loadStyleRequest).then(w=>{this._loadStyleRequest=null,this._load(w.data,c,f)}).catch(w=>{this._loadStyleRequest=null,w&&!m.signal.aborted&&this.fire(new o.j(w))})}loadJSON(r,c={},f){this.fire(new o.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,c.validate=c.validate!==!1,this._load(r,c,f)}).catch(()=>{})}loadEmpty(){this.fire(new o.k("dataloading",{dataType:"style"})),this._load(vw,{validate:!1})}_load(r,c,f){var d;let m=c.transformStyle?c.transformStyle(f,r):r;if(!c.validate||!Xn(this,o.u(m))){this._loaded=!0,this.stylesheet=m;for(let w in m.sources)this.addSource(w,m.sources[w],{validate:!1});m.sprite?this._loadSprite(m.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(m.glyphs),this._createLayers(),this.light=new Wa(this.stylesheet.light),this.sky=new Gn(this.stylesheet.sky),this.map.setTerrain((d=this.stylesheet.terrain)!==null&&d!==void 0?d:null),this.fire(new o.k("data",{dataType:"style"})),this.fire(new o.k("style.load"))}}_createLayers(){let r=o.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",r),this._order=r.map(c=>c.id),this._layers={},this._serializedLayers=null;for(let c of r){let f=o.aA(c);f.setEventedParent(this,{layer:{id:c.id}}),this._layers[c.id]=f}}_loadSprite(r,c=!1,f=void 0){let d;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(m,w,I,A){return o._(this,void 0,void 0,function*(){let O=nt(m),k=I>1?"@2x":"",D={},j={};for(let{id:H,url:Z}of O){let ee=w.transformRequest(gt(Z,k,".json"),"SpriteJSON");D[H]=o.h(ee,A);let ne=w.transformRequest(gt(Z,k,".png"),"SpriteImage");j[H]=K.getImage(ne,A)}return yield Promise.all([...Object.values(D),...Object.values(j)]),function(H,Z){return o._(this,void 0,void 0,function*(){let ee={};for(let ne in H){ee[ne]={};let ae=T.getImageCanvasContext((yield Z[ne]).data),ue=(yield H[ne]).data;for(let Y in ue){let{width:he,height:de,x:ye,y:Te,sdf:Me,pixelRatio:je,stretchX:Ke,stretchY:ze,content:De,textFitWidth:rt,textFitHeight:yt}=ue[Y];ee[ne][Y]={data:null,pixelRatio:je,sdf:Me,stretchX:Ke,stretchY:ze,content:De,textFitWidth:rt,textFitHeight:yt,spriteData:{width:he,height:de,x:ye,y:Te,context:ae}}}}return ee})}(D,j)})}(r,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(m=>{if(this._spriteRequest=null,m)for(let w in m){this._spritesImagesIds[w]=[];let I=this._spritesImagesIds[w]?this._spritesImagesIds[w].filter(A=>!(A in m)):[];for(let A of I)this.imageManager.removeImage(A),this._changedImages[A]=!0;for(let A in m[w]){let O=w==="default"?A:`${w}:${A}`;this._spritesImagesIds[w].push(O),O in this.imageManager.images?this.imageManager.updateImage(O,m[w][A],!1):this.imageManager.addImage(O,m[w][A]),c&&(this._changedImages[O]=!0)}}}).catch(m=>{this._spriteRequest=null,d=m,this.fire(new o.j(d))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),c&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"})),f&&f(d)})}_unloadSprite(){for(let r of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(r),this._changedImages[r]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}_validateLayer(r){let c=this.sourceCaches[r.source];if(!c)return;let f=r.sourceLayer;if(!f)return;let d=c.getSource();(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(f)===-1)&&this.fire(new o.j(new Error(`Source layer "${f}" does not exist on source "${d.id}" as specified by style layer "${r.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(let r in this.sourceCaches)if(!this.sourceCaches[r].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(r,c=!1){let f=this._serializedAllLayers();if(!r||r.length===0)return Object.values(c?o.aB(f):f);let d=[];for(let m of r)if(f[m]){let w=c?o.aB(f[m]):f[m];d.push(w)}return d}_serializedAllLayers(){let r=this._serializedLayers;if(r)return r;r=this._serializedLayers={};let c=Object.keys(this._layers);for(let f of c){let d=this._layers[f];d.type!=="custom"&&(r[f]=d.serialize())}return r}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(let r in this.sourceCaches)if(this.sourceCaches[r].hasTransition())return!0;for(let r in this._layers)if(this._layers[r].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(r){if(!this._loaded)return;let c=this._changed;if(c){let d=Object.keys(this._updatedLayers),m=Object.keys(this._removedLayers);(d.length||m.length)&&this._updateWorkerLayers(d,m);for(let w in this._updatedSources){let I=this._updatedSources[w];if(I==="reload")this._reloadSource(w);else{if(I!=="clear")throw new Error(`Invalid action ${I}`);this._clearSource(w)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(let w in this._updatedPaintProps)this._layers[w].updateTransitions(r);this.light.updateTransitions(r),this.sky.updateTransitions(r),this._resetUpdates()}let f={};for(let d in this.sourceCaches){let m=this.sourceCaches[d];f[d]=m.used,m.used=!1}for(let d of this._order){let m=this._layers[d];m.recalculate(r,this._availableImages),!m.isHidden(r.zoom)&&m.source&&(this.sourceCaches[m.source].used=!0)}for(let d in f){let m=this.sourceCaches[d];!!f[d]!=!!m.used&&m.fire(new o.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:d}))}this.light.recalculate(r),this.sky.recalculate(r),this.z=r.zoom,c&&this.fire(new o.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){let r=Object.keys(this._changedImages);if(r.length){for(let c in this.sourceCaches)this.sourceCaches[c].reloadTilesForDependencies(["icons","patterns"],r);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(let r in this.sourceCaches)this.sourceCaches[r].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(r,c){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(r,!1),removedIds:c})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(r,c={}){var f;this._checkLoaded();let d=this.serialize();if(r=c.transformStyle?c.transformStyle(d,r):r,((f=c.validate)===null||f===void 0||f)&&Xn(this,o.u(r)))return!1;(r=o.aB(r)).layers=o.az(r.layers);let m=o.aC(d,r),w=this._getOperationsToPerform(m);if(w.unimplemented.length>0)throw new Error(`Unimplemented: ${w.unimplemented.join(", ")}.`);if(w.operations.length===0)return!1;for(let I of w.operations)I();return this.stylesheet=r,this._serializedLayers=null,!0}_getOperationsToPerform(r){let c=[],f=[];for(let d of r)switch(d.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":c.push(()=>this.addLayer.apply(this,d.args));break;case"removeLayer":c.push(()=>this.removeLayer.apply(this,d.args));break;case"setPaintProperty":c.push(()=>this.setPaintProperty.apply(this,d.args));break;case"setLayoutProperty":c.push(()=>this.setLayoutProperty.apply(this,d.args));break;case"setFilter":c.push(()=>this.setFilter.apply(this,d.args));break;case"addSource":c.push(()=>this.addSource.apply(this,d.args));break;case"removeSource":c.push(()=>this.removeSource.apply(this,d.args));break;case"setLayerZoomRange":c.push(()=>this.setLayerZoomRange.apply(this,d.args));break;case"setLight":c.push(()=>this.setLight.apply(this,d.args));break;case"setGeoJSONSourceData":c.push(()=>this.setGeoJSONSourceData.apply(this,d.args));break;case"setGlyphs":c.push(()=>this.setGlyphs.apply(this,d.args));break;case"setSprite":c.push(()=>this.setSprite.apply(this,d.args));break;case"setSky":c.push(()=>this.setSky.apply(this,d.args));break;case"setTerrain":c.push(()=>this.map.setTerrain.apply(this,d.args));break;case"setTransition":c.push(()=>{});break;default:f.push(d.command);}return{operations:c,unimplemented:f}}addImage(r,c){if(this.getImage(r))return this.fire(new o.j(new Error(`An image named "${r}" already exists.`)));this.imageManager.addImage(r,c),this._afterImageUpdated(r)}updateImage(r,c){this.imageManager.updateImage(r,c)}getImage(r){return this.imageManager.getImage(r)}removeImage(r){if(!this.getImage(r))return this.fire(new o.j(new Error(`An image named "${r}" does not exist.`)));this.imageManager.removeImage(r),this._afterImageUpdated(r)}_afterImageUpdated(r){this._availableImages=this.imageManager.listImages(),this._changedImages[r]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(r,c,f={}){if(this._checkLoaded(),this.sourceCaches[r]!==void 0)throw new Error(`Source "${r}" already exists.`);if(!c.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(c).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(c.type)>=0&&this._validate(o.u.source,`sources.${r}`,c,null,f))return;this.map&&this.map._collectResourceTiming&&(c.collectResourceTiming=!0);let d=this.sourceCaches[r]=new dt(r,c,this.dispatcher);d.style=this,d.setEventedParent(this,()=>({isSourceLoaded:d.loaded(),source:d.serialize(),sourceId:r})),d.onAdd(this.map),this._changed=!0}removeSource(r){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error("There is no source with this ID");for(let f in this._layers)if(this._layers[f].source===r)return this.fire(new o.j(new Error(`Source "${r}" cannot be removed while layer "${f}" is using it.`)));let c=this.sourceCaches[r];delete this.sourceCaches[r],delete this._updatedSources[r],c.fire(new o.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:r})),c.setEventedParent(null),c.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(r,c){if(this._checkLoaded(),this.sourceCaches[r]===void 0)throw new Error(`There is no source with this ID=${r}`);let f=this.sourceCaches[r].getSource();if(f.type!=="geojson")throw new Error(`geojsonSource.type is ${f.type}, which is !== 'geojson`);f.setData(c),this._changed=!0}getSource(r){return this.sourceCaches[r]&&this.sourceCaches[r].getSource()}addLayer(r,c,f={}){this._checkLoaded();let d=r.id;if(this.getLayer(d))return void this.fire(new o.j(new Error(`Layer "${d}" already exists on this map.`)));let m;if(r.type==="custom"){if(Xn(this,o.aD(r)))return;m=o.aA(r)}else{if("source"in r&&typeof r.source=="object"&&(this.addSource(d,r.source),r=o.aB(r),r=o.e(r,{source:d})),this._validate(o.u.layer,`layers.${d}`,r,{arrayIndex:-1},f))return;m=o.aA(r),this._validateLayer(m),m.setEventedParent(this,{layer:{id:d}})}let w=c?this._order.indexOf(c):this._order.length;if(c&&w===-1)this.fire(new o.j(new Error(`Cannot add layer "${d}" before non-existing layer "${c}".`)));else{if(this._order.splice(w,0,d),this._layerOrderChanged=!0,this._layers[d]=m,this._removedLayers[d]&&m.source&&m.type!=="custom"){let I=this._removedLayers[d];delete this._removedLayers[d],I.type!==m.type?this._updatedSources[m.source]="clear":(this._updatedSources[m.source]="reload",this.sourceCaches[m.source].pause())}this._updateLayer(m),m.onAdd&&m.onAdd(this.map)}}moveLayer(r,c){if(this._checkLoaded(),this._changed=!0,!this._layers[r])return void this.fire(new o.j(new Error(`The layer '${r}' does not exist in the map's style and cannot be moved.`)));if(r===c)return;let f=this._order.indexOf(r);this._order.splice(f,1);let d=c?this._order.indexOf(c):this._order.length;c&&d===-1?this.fire(new o.j(new Error(`Cannot move layer "${r}" before non-existing layer "${c}".`))):(this._order.splice(d,0,r),this._layerOrderChanged=!0)}removeLayer(r){this._checkLoaded();let c=this._layers[r];if(!c)return void this.fire(new o.j(new Error(`Cannot remove non-existing layer "${r}".`)));c.setEventedParent(null);let f=this._order.indexOf(r);this._order.splice(f,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[r]=c,delete this._layers[r],this._serializedLayers&&delete this._serializedLayers[r],delete this._updatedLayers[r],delete this._updatedPaintProps[r],c.onRemove&&c.onRemove(this.map)}getLayer(r){return this._layers[r]}getLayersOrder(){return[...this._order]}hasLayer(r){return r in this._layers}setLayerZoomRange(r,c,f){this._checkLoaded();let d=this.getLayer(r);d?d.minzoom===c&&d.maxzoom===f||(c!=null&&(d.minzoom=c),f!=null&&(d.maxzoom=f),this._updateLayer(d)):this.fire(new o.j(new Error(`Cannot set the zoom range of non-existing layer "${r}".`)))}setFilter(r,c,f={}){this._checkLoaded();let d=this.getLayer(r);if(d){if(!o.aE(d.filter,c))return c==null?(d.filter=void 0,void this._updateLayer(d)):void(this._validate(o.u.filter,`layers.${d.id}.filter`,c,null,f)||(d.filter=o.aB(c),this._updateLayer(d)))}else this.fire(new o.j(new Error(`Cannot filter non-existing layer "${r}".`)))}getFilter(r){return o.aB(this.getLayer(r).filter)}setLayoutProperty(r,c,f,d={}){this._checkLoaded();let m=this.getLayer(r);m?o.aE(m.getLayoutProperty(c),f)||(m.setLayoutProperty(c,f,d),this._updateLayer(m)):this.fire(new o.j(new Error(`Cannot style non-existing layer "${r}".`)))}getLayoutProperty(r,c){let f=this.getLayer(r);if(f)return f.getLayoutProperty(c);this.fire(new o.j(new Error(`Cannot get style of non-existing layer "${r}".`)))}setPaintProperty(r,c,f,d={}){this._checkLoaded();let m=this.getLayer(r);m?o.aE(m.getPaintProperty(c),f)||(m.setPaintProperty(c,f,d)&&this._updateLayer(m),this._changed=!0,this._updatedPaintProps[r]=!0,this._serializedLayers=null):this.fire(new o.j(new Error(`Cannot style non-existing layer "${r}".`)))}getPaintProperty(r,c){return this.getLayer(r).getPaintProperty(c)}setFeatureState(r,c){this._checkLoaded();let f=r.source,d=r.sourceLayer,m=this.sourceCaches[f];if(m===void 0)return void this.fire(new o.j(new Error(`The source '${f}' does not exist in the map's style.`)));let w=m.getSource().type;w==="geojson"&&d?this.fire(new o.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):w!=="vector"||d?(r.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),m.setFeatureState(d,r.id,c)):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(r,c){this._checkLoaded();let f=r.source,d=this.sourceCaches[f];if(d===void 0)return void this.fire(new o.j(new Error(`The source '${f}' does not exist in the map's style.`)));let m=d.getSource().type,w=m==="vector"?r.sourceLayer:void 0;m!=="vector"||w?c&&typeof r.id!="string"&&typeof r.id!="number"?this.fire(new o.j(new Error("A feature id is required to remove its specific state property."))):d.removeFeatureState(w,r.id,c):this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(r){this._checkLoaded();let c=r.source,f=r.sourceLayer,d=this.sourceCaches[c];if(d!==void 0)return d.getSource().type!=="vector"||f?(r.id===void 0&&this.fire(new o.j(new Error("The feature id parameter must be provided."))),d.getFeatureState(f,r.id)):void this.fire(new o.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.j(new Error(`The source '${c}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;let r=o.aF(this.sourceCaches,m=>m.serialize()),c=this._serializeByIds(this._order,!0),f=this.map.getTerrain()||void 0,d=this.stylesheet;return o.aG({version:d.version,name:d.name,metadata:d.metadata,light:d.light,sky:d.sky,center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch,sprite:d.sprite,glyphs:d.glyphs,transition:d.transition,sources:r,layers:c,terrain:f},m=>m!==void 0)}_updateLayer(r){this._updatedLayers[r.id]=!0,r.source&&!this._updatedSources[r.source]&&this.sourceCaches[r.source].getSource().type!=="raster"&&(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(r){let c=w=>this._layers[w].type==="fill-extrusion",f={},d=[];for(let w=this._order.length-1;w>=0;w--){let I=this._order[w];if(c(I)){f[I]=w;for(let A of r){let O=A[I];if(O)for(let k of O)d.push(k)}}}d.sort((w,I)=>I.intersectionZ-w.intersectionZ);let m=[];for(let w=this._order.length-1;w>=0;w--){let I=this._order[w];if(c(I))for(let A=d.length-1;A>=0;A--){let O=d[A].feature;if(f[O.layer.id]<w)break;m.push(O),d.pop()}else for(let A of r){let O=A[I];if(O)for(let k of O)m.push(k.feature)}}return m}queryRenderedFeatures(r,c,f){c&&c.filter&&this._validate(o.u.filter,"queryRenderedFeatures.filter",c.filter,null,c);let d={};if(c&&c.layers){if(!Array.isArray(c.layers))return this.fire(new o.j(new Error("parameters.layers must be an Array."))),[];for(let I of c.layers){let A=this._layers[I];if(!A)return this.fire(new o.j(new Error(`The layer '${I}' does not exist in the map's style and cannot be queried for features.`))),[];d[A.source]=!0}}let m=[];c.availableImages=this._availableImages;let w=this._serializedAllLayers();for(let I in this.sourceCaches)c.layers&&!d[I]||m.push(_o(this.sourceCaches[I],this._layers,w,r,c,f));return this.placement&&m.push(function(I,A,O,k,D,j,H){let Z={},ee=j.queryRenderedSymbols(k),ne=[];for(let ae of Object.keys(ee).map(Number))ne.push(H[ae]);ne.sort(xo);for(let ae of ne){let ue=ae.featureIndex.lookupSymbolFeatures(ee[ae.bucketInstanceId],A,ae.bucketIndex,ae.sourceLayerIndex,D.filter,D.layers,D.availableImages,I);for(let Y in ue){let he=Z[Y]=Z[Y]||[],de=ue[Y];de.sort((ye,Te)=>{let Me=ae.featureSortOrder;if(Me){let je=Me.indexOf(ye.featureIndex);return Me.indexOf(Te.featureIndex)-je}return Te.featureIndex-ye.featureIndex});for(let ye of de)he.push(ye)}}for(let ae in Z)Z[ae].forEach(ue=>{let Y=ue.feature,he=O[I[ae].source].getFeatureState(Y.layer["source-layer"],Y.id);Y.source=Y.layer.source,Y.layer["source-layer"]&&(Y.sourceLayer=Y.layer["source-layer"]),Y.state=he});return Z}(this._layers,w,this.sourceCaches,r,c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(m)}querySourceFeatures(r,c){c&&c.filter&&this._validate(o.u.filter,"querySourceFeatures.filter",c.filter,null,c);let f=this.sourceCaches[r];return f?function(d,m){let w=d.getRenderableIds().map(O=>d.getTileByID(O)),I=[],A={};for(let O=0;O<w.length;O++){let k=w[O],D=k.tileID.canonical.key;A[D]||(A[D]=!0,k.querySourceFeatures(I,m))}return I}(f,c):[]}getLight(){return this.light.getLight()}setLight(r,c={}){this._checkLoaded();let f=this.light.getLight(),d=!1;for(let w in r)if(!o.aE(r[w],f[w])){d=!0;break}if(!d)return;let m={now:T.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(r,c),this.light.updateTransitions(m)}getSky(){var r;return(r=this.stylesheet)===null||r===void 0?void 0:r.sky}setSky(r,c={}){let f=this.getSky(),d=!1;if(!r&&!f)return;if(r&&!f)d=!0;else if(!r&&f)d=!0;else for(let w in r)if(!o.aE(r[w],f[w])){d=!0;break}if(!d)return;let m={now:T.now(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=r,this.sky.setSky(r,c),this.sky.updateTransitions(m)}_validate(r,c,f,d,m={}){return(!m||m.validate!==!1)&&Xn(this,r.call(o.u,o.e({key:c,style:this.serialize(),value:f,styleSpec:o.v},d)))}_remove(r=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),va().off(Re,this._rtlPluginLoaded);for(let c in this._layers)this._layers[c].setEventedParent(null);for(let c in this.sourceCaches){let f=this.sourceCaches[c];f.setEventedParent(null),f.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),r&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(r)}_clearSource(r){this.sourceCaches[r].clearTiles()}_reloadSource(r){this.sourceCaches[r].resume(),this.sourceCaches[r].reload()}_updateSources(r){for(let c in this.sourceCaches)this.sourceCaches[c].update(r,this.map.terrain)}_generateCollisionBoxes(){for(let r in this.sourceCaches)this._reloadSource(r)}_updatePlacement(r,c,f,d,m=!1){let w=!1,I=!1,A={};for(let O of this._order){let k=this._layers[O];if(k.type!=="symbol")continue;if(!A[k.source]){let j=this.sourceCaches[k.source];A[k.source]=j.getRenderableIds(!0).map(H=>j.getTileByID(H)).sort((H,Z)=>Z.tileID.overscaledZ-H.tileID.overscaledZ||(H.tileID.isLessThan(Z.tileID)?-1:1))}let D=this.crossTileSymbolIndex.addLayer(k,A[k.source],r.center.lng);w=w||D}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((m=m||this._layerOrderChanged||f===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(T.now(),r.zoom))&&(this.pauseablePlacement=new Fl(r,this.map.terrain,this._order,m,c,f,d,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,A),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(T.now()),I=!0),w&&this.pauseablePlacement.placement.setStale()),I||w)for(let O of this._order){let k=this._layers[O];k.type==="symbol"&&this.placement.updateLayerOpacities(k,A[k.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(T.now())}_releaseSymbolFadeTiles(){for(let r in this.sourceCaches)this.sourceCaches[r].releaseSymbolFadeTiles()}getImages(r,c){return o._(this,void 0,void 0,function*(){let f=yield this.imageManager.getImages(c.icons);this._updateTilesForChangedImages();let d=this.sourceCaches[c.source];return d&&d.setDependencies(c.tileID.key,c.type,c.icons),f})}getGlyphs(r,c){return o._(this,void 0,void 0,function*(){let f=yield this.glyphManager.getGlyphs(c.stacks),d=this.sourceCaches[c.source];return d&&d.setDependencies(c.tileID.key,c.type,[""]),f})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(r,c={}){this._checkLoaded(),r&&this._validate(o.u.glyphs,"glyphs",r,null,c)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=r,this.glyphManager.entries={},this.glyphManager.setURL(r))}addSprite(r,c,f={},d){this._checkLoaded();let m=[{id:r,url:c}],w=[...nt(this.stylesheet.sprite),...m];this._validate(o.u.sprite,"sprite",w,null,f)||(this.stylesheet.sprite=w,this._loadSprite(m,!0,d))}removeSprite(r){this._checkLoaded();let c=nt(this.stylesheet.sprite);if(c.find(f=>f.id===r)){if(this._spritesImagesIds[r])for(let f of this._spritesImagesIds[r])this.imageManager.removeImage(f),this._changedImages[f]=!0;c.splice(c.findIndex(f=>f.id===r),1),this.stylesheet.sprite=c.length>0?c:void 0,delete this._spritesImagesIds[r],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.k("data",{dataType:"style"}))}else this.fire(new o.j(new Error(`Sprite "${r}" doesn't exists on this map.`)))}getSprite(){return nt(this.stylesheet.sprite)}setSprite(r,c={},f){this._checkLoaded(),r&&this._validate(o.u.sprite,"sprite",r,null,c)||(this.stylesheet.sprite=r,r?this._loadSprite(r,!0,f):(this._unloadSprite(),f&&f(null)))}}var as=o.Y([{name:"a_pos",type:"Int16",components:2}]);let qo={prelude:Gt(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Gt(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Gt(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Gt(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Gt("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Gt(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Gt(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Gt("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Gt("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Gt("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Gt(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Gt(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Gt(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Gt(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Gt(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Gt(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Gt(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Gt(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Gt(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Gt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Gt(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Gt(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Gt(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Gt(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Gt(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Gt(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Gt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Gt("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Gt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Gt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Gt(v,r){let c=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,f=r.match(/attribute ([\w]+) ([\w]+)/g),d=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),m=r.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=m?m.concat(d):d,I={};return{fragmentSource:v=v.replace(c,(A,O,k,D,j)=>(I[j]=!0,O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
varying ${k} ${D} ${j};
#else
uniform ${k} ${D} u_${j};
#endif
`:`
#ifdef HAS_UNIFORM_u_${j}
    ${k} ${D} ${j} = u_${j};
#endif
`)),vertexSource:r=r.replace(c,(A,O,k,D,j)=>{let H=D==="float"?"vec2":"vec4",Z=j.match(/color/)?"color":H;return I[j]?O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${k} ${H} a_${j};
varying ${k} ${D} ${j};
#else
uniform ${k} ${D} u_${j};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = a_${j};
#else
    ${k} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${j} = unpack_mix_${Z}(a_${j}, u_${j}_t);
#else
    ${k} ${D} ${j} = u_${j};
#endif
`:O==="define"?`
#ifndef HAS_UNIFORM_u_${j}
uniform lowp float u_${j}_t;
attribute ${k} ${H} a_${j};
#else
uniform ${k} ${D} u_${j};
#endif
`:Z==="vec4"?`
#ifndef HAS_UNIFORM_u_${j}
    ${k} ${D} ${j} = a_${j};
#else
    ${k} ${D} ${j} = u_${j};
#endif
`:`
#ifndef HAS_UNIFORM_u_${j}
    ${k} ${D} ${j} = unpack_mix_${Z}(a_${j}, u_${j}_t);
#else
    ${k} ${D} ${j} = u_${j};
#endif
`}),staticAttributes:f,staticUniforms:w}}class Xd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(r,c,f,d,m,w,I,A,O){this.context=r;let k=this.boundPaintVertexBuffers.length!==d.length;for(let D=0;!k&&D<d.length;D++)this.boundPaintVertexBuffers[D]!==d[D]&&(k=!0);!this.vao||this.boundProgram!==c||this.boundLayoutVertexBuffer!==f||k||this.boundIndexBuffer!==m||this.boundVertexOffset!==w||this.boundDynamicVertexBuffer!==I||this.boundDynamicVertexBuffer2!==A||this.boundDynamicVertexBuffer3!==O?this.freshBind(c,f,d,m,w,I,A,O):(r.bindVertexArray.set(this.vao),I&&I.bind(),m&&m.dynamicDraw&&m.bind(),A&&A.bind(),O&&O.bind())}freshBind(r,c,f,d,m,w,I,A){let O=r.numAttributes,k=this.context,D=k.gl;this.vao&&this.destroy(),this.vao=k.createVertexArray(),k.bindVertexArray.set(this.vao),this.boundProgram=r,this.boundLayoutVertexBuffer=c,this.boundPaintVertexBuffers=f,this.boundIndexBuffer=d,this.boundVertexOffset=m,this.boundDynamicVertexBuffer=w,this.boundDynamicVertexBuffer2=I,this.boundDynamicVertexBuffer3=A,c.enableAttributes(D,r);for(let j of f)j.enableAttributes(D,r);w&&w.enableAttributes(D,r),I&&I.enableAttributes(D,r),A&&A.enableAttributes(D,r),c.bind(),c.setVertexAttribPointers(D,r,m);for(let j of f)j.bind(),j.setVertexAttribPointers(D,r,m);w&&(w.bind(),w.setVertexAttribPointers(D,r,m)),d&&d.bind(),I&&(I.bind(),I.setVertexAttribPointers(D,r,m)),A&&(A.bind(),A.setVertexAttribPointers(D,r,m)),k.currentNumAttributes=O}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}let Yd=(v,r,c,f,d)=>({u_matrix:v,u_texture:0,u_ele_delta:r,u_fog_matrix:c,u_fog_color:f?f.properties.get("fog-color"):o.aM.white,u_fog_ground_blend:f?f.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:f?f.calculateFogBlendOpacity(d):0,u_horizon_color:f?f.properties.get("horizon-color"):o.aM.white,u_horizon_fog_blend:f?f.properties.get("horizon-fog-blend"):1});function ru(v){let r=[];for(let c=0;c<v.length;c++){if(v[c]===null)continue;let f=v[c].split(" ");r.push(f.pop())}return r}class Jd{constructor(r,c,f,d,m,w){let I=r.gl;this.program=I.createProgram();let A=ru(c.staticAttributes),O=f?f.getBinderAttributes():[],k=A.concat(O),D=qo.prelude.staticUniforms?ru(qo.prelude.staticUniforms):[],j=c.staticUniforms?ru(c.staticUniforms):[],H=f?f.getBinderUniforms():[],Z=D.concat(j).concat(H),ee=[];for(let ye of Z)ee.indexOf(ye)<0&&ee.push(ye);let ne=f?f.defines():[];m&&ne.push("#define OVERDRAW_INSPECTOR;"),w&&ne.push("#define TERRAIN3D;");let ae=ne.concat(qo.prelude.fragmentSource,c.fragmentSource).join(`
`),ue=ne.concat(qo.prelude.vertexSource,c.vertexSource).join(`
`),Y=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(Y,ae),I.compileShader(Y),!I.getShaderParameter(Y,I.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${I.getShaderInfoLog(Y)}`);I.attachShader(this.program,Y);let he=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);if(I.shaderSource(he,ue),I.compileShader(he),!I.getShaderParameter(he,I.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${I.getShaderInfoLog(he)}`);I.attachShader(this.program,he),this.attributes={};let de={};this.numAttributes=k.length;for(let ye=0;ye<this.numAttributes;ye++)k[ye]&&(I.bindAttribLocation(this.program,ye,k[ye]),this.attributes[k[ye]]=ye);if(I.linkProgram(this.program),!I.getProgramParameter(this.program,I.LINK_STATUS))throw new Error(`Program failed to link: ${I.getProgramInfoLog(this.program)}`);I.deleteShader(he),I.deleteShader(Y);for(let ye=0;ye<ee.length;ye++){let Te=ee[ye];if(Te&&!de[Te]){let Me=I.getUniformLocation(this.program,Te);Me&&(de[Te]=Me)}}this.fixedUniforms=d(r,de),this.terrainUniforms=((ye,Te)=>({u_depth:new o.aH(ye,Te.u_depth),u_terrain:new o.aH(ye,Te.u_terrain),u_terrain_dim:new o.aI(ye,Te.u_terrain_dim),u_terrain_matrix:new o.aJ(ye,Te.u_terrain_matrix),u_terrain_unpack:new o.aK(ye,Te.u_terrain_unpack),u_terrain_exaggeration:new o.aI(ye,Te.u_terrain_exaggeration)}))(r,de),this.binderUniforms=f?f.getUniforms(r,de):[]}draw(r,c,f,d,m,w,I,A,O,k,D,j,H,Z,ee,ne,ae,ue){let Y=r.gl;if(this.failedToCreate)return;if(r.program.set(this.program),r.setDepthMode(f),r.setStencilMode(d),r.setColorMode(m),r.setCullFace(w),A){r.activeTexture.set(Y.TEXTURE2),Y.bindTexture(Y.TEXTURE_2D,A.depthTexture),r.activeTexture.set(Y.TEXTURE3),Y.bindTexture(Y.TEXTURE_2D,A.texture);for(let de in this.terrainUniforms)this.terrainUniforms[de].set(A[de])}for(let de in this.fixedUniforms)this.fixedUniforms[de].set(I[de]);ee&&ee.setUniforms(r,this.binderUniforms,H,{zoom:Z});let he=0;switch(c){case Y.LINES:he=2;break;case Y.TRIANGLES:he=3;break;case Y.LINE_STRIP:he=1;}for(let de of j.get()){let ye=de.vaos||(de.vaos={});(ye[O]||(ye[O]=new Xd)).bind(r,this,k,ee?ee.getPaintVertexBuffers():[],D,de.vertexOffset,ne,ae,ue),Y.drawElements(c,de.primitiveLength*he,Y.UNSIGNED_SHORT,de.primitiveOffset*he*2)}}}function uh(v,r,c){let f=1/Dt(c,1,r.transform.tileZoom),d=Math.pow(2,c.tileID.overscaledZ),m=c.tileSize*Math.pow(2,r.transform.tileZoom)/d,w=m*(c.tileID.canonical.x+c.tileID.wrap*d),I=m*c.tileID.canonical.y;return{u_image:0,u_texsize:c.imageAtlasTexture.size,u_scale:[f,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[w>>16,I>>16],u_pixel_coord_lower:[65535&w,65535&I]}}let Nl=(v,r,c,f)=>{let d=r.style.light,m=d.properties.get("position"),w=[m.x,m.y,m.z],I=function(){var O=new o.A(9);return o.A!=Float32Array&&(O[1]=0,O[2]=0,O[3]=0,O[5]=0,O[6]=0,O[7]=0),O[0]=1,O[4]=1,O[8]=1,O}();d.properties.get("anchor")==="viewport"&&function(O,k){var D=Math.sin(k),j=Math.cos(k);O[0]=j,O[1]=D,O[2]=0,O[3]=-D,O[4]=j,O[5]=0,O[6]=0,O[7]=0,O[8]=1}(I,-r.transform.angle),function(O,k,D){var j=k[0],H=k[1],Z=k[2];O[0]=j*D[0]+H*D[3]+Z*D[6],O[1]=j*D[1]+H*D[4]+Z*D[7],O[2]=j*D[2]+H*D[5]+Z*D[8]}(w,w,I);let A=d.properties.get("color");return{u_matrix:v,u_lightpos:w,u_lightintensity:d.properties.get("intensity"),u_lightcolor:[A.r,A.g,A.b],u_vertical_gradient:+c,u_opacity:f}},lh=(v,r,c,f,d,m,w)=>o.e(Nl(v,r,c,f),uh(m,r,w),{u_height_factor:-Math.pow(2,d.overscaledZ)/w.tileSize/8}),iu=v=>({u_matrix:v}),dy=(v,r,c,f)=>o.e(iu(v),uh(c,r,f)),gw=(v,r)=>({u_matrix:v,u_world:r}),py=(v,r,c,f,d)=>o.e(dy(v,r,c,f),{u_world:d}),yw=(v,r,c,f)=>{let d=v.transform,m,w;if(f.paint.get("circle-pitch-alignment")==="map"){let I=Dt(c,1,d.zoom);m=!0,w=[I,I]}else m=!1,w=d.pixelsToGLUnits;return{u_camera_to_center_distance:d.cameraToCenterDistance,u_scale_with_map:+(f.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(r.posMatrix,c,f.paint.get("circle-translate"),f.paint.get("circle-translate-anchor")),u_pitch_with_map:+m,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:w}},os=(v,r,c)=>({u_matrix:v,u_inv_matrix:r,u_camera_to_center_distance:c.cameraToCenterDistance,u_viewport_size:[c.width,c.height]}),Bl=(v,r,c=1)=>({u_matrix:v,u_color:r,u_overlay:0,u_overlay_scale:c}),Ui=v=>({u_matrix:v}),$i=(v,r,c,f)=>({u_matrix:v,u_extrude_scale:Dt(r,1,c),u_intensity:f}),ch=(v,r,c,f)=>{let d=o.H();o.aP(d,0,v.width,v.height,0,0,1);let m=v.context.gl;return{u_matrix:d,u_world:[m.drawingBufferWidth,m.drawingBufferHeight],u_image:c,u_color_ramp:f,u_opacity:r.paint.get("heatmap-opacity")}};function hh(v,r){let c=Math.pow(2,r.canonical.z),f=r.canonical.y;return[new o.Z(0,f/c).toLngLat().lat,new o.Z(0,(f+1)/c).toLngLat().lat]}let fh=(v,r,c,f)=>{let d=v.transform;return{u_matrix:gy(v,r,c,f),u_ratio:1/Dt(r,1,d.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},my=(v,r,c,f,d)=>o.e(fh(v,r,c,d),{u_image:0,u_image_height:f}),nu=(v,r,c,f,d)=>{let m=v.transform,w=vy(r,m);return{u_matrix:gy(v,r,c,d),u_texsize:r.imageAtlasTexture.size,u_ratio:1/Dt(r,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[w,f.fromScale,f.toScale],u_fade:f.t,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},_w=(v,r,c,f,d,m)=>{let w=v.lineAtlas,I=vy(r,v.transform),A=c.layout.get("line-cap")==="round",O=w.getDash(f.from,A),k=w.getDash(f.to,A),D=O.width*d.fromScale,j=k.width*d.toScale;return o.e(fh(v,r,c,m),{u_patternscale_a:[I/D,-O.height/2],u_patternscale_b:[I/j,-k.height/2],u_sdfgamma:w.width/(256*Math.min(D,j)*v.pixelRatio)/2,u_image:0,u_tex_y_a:O.y,u_tex_y_b:k.y,u_mix:d.t})};function vy(v,r){return 1/Dt(v,1,r.tileZoom)}function gy(v,r,c,f){return v.translatePosMatrix(f?f.posMatrix:r.tileID.posMatrix,r,c.paint.get("line-translate"),c.paint.get("line-translate-anchor"))}let xw=(v,r,c,f,d)=>{return{u_matrix:v,u_tl_parent:r,u_scale_parent:c,u_buffer_scale:1,u_fade_t:f.mix,u_opacity:f.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:(w=d.paint.get("raster-saturation"),w>0?1-1/(1.001-w):-w),u_contrast_factor:(m=d.paint.get("raster-contrast"),m>0?1/(1-m):1+m),u_spin_weights:bw(d.paint.get("raster-hue-rotate"))};var m,w};function bw(v){v*=Math.PI/180;let r=Math.sin(v),c=Math.cos(v);return[(2*c+1)/3,(-Math.sqrt(3)*r-c+1)/3,(Math.sqrt(3)*r-c+1)/3]}let yy=(v,r,c,f,d,m,w,I,A,O,k,D,j,H)=>{let Z=w.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:r?r.uSizeT:0,u_size:r?r.uSize:0,u_camera_to_center_distance:Z.cameraToCenterDistance,u_pitch:Z.pitch/360*2*Math.PI,u_rotate_symbol:+c,u_aspect_ratio:Z.width/Z.height,u_fade_change:w.options.fadeDuration?w.symbolFadeChange:1,u_matrix:I,u_label_plane_matrix:A,u_coord_matrix:O,u_is_text:+D,u_pitch_with_map:+f,u_is_along_line:d,u_is_variable_anchor:m,u_texsize:j,u_texture:0,u_translation:k,u_pitched_scale:H}},jl=(v,r,c,f,d,m,w,I,A,O,k,D,j,H,Z)=>{let ee=w.transform;return o.e(yy(v,r,c,f,d,m,w,I,A,O,k,D,j,Z),{u_gamma_scale:f?Math.cos(ee._pitch)*ee.cameraToCenterDistance:1,u_device_pixel_ratio:w.pixelRatio,u_is_halo:+H})},Qd=(v,r,c,f,d,m,w,I,A,O,k,D,j,H)=>o.e(jl(v,r,c,f,d,m,w,I,A,O,k,!0,D,!0,H),{u_texsize_icon:j,u_texture_icon:1}),dh=(v,r,c)=>({u_matrix:v,u_opacity:r,u_color:c}),ep=(v,r,c,f,d,m)=>o.e(function(w,I,A,O){let k=A.imageManager.getPattern(w.from.toString()),D=A.imageManager.getPattern(w.to.toString()),{width:j,height:H}=A.imageManager.getPixelSize(),Z=Math.pow(2,O.tileID.overscaledZ),ee=O.tileSize*Math.pow(2,A.transform.tileZoom)/Z,ne=ee*(O.tileID.canonical.x+O.tileID.wrap*Z),ae=ee*O.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:k.tl,u_pattern_br_a:k.br,u_pattern_tl_b:D.tl,u_pattern_br_b:D.br,u_texsize:[j,H],u_mix:I.t,u_pattern_size_a:k.displaySize,u_pattern_size_b:D.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Dt(O,1,A.transform.tileZoom),u_pixel_coord_upper:[ne>>16,ae>>16],u_pixel_coord_lower:[65535&ne,65535&ae]}}(f,m,c,d),{u_matrix:v,u_opacity:r}),tp={fillExtrusion:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_lightpos:new o.aN(v,r.u_lightpos),u_lightintensity:new o.aI(v,r.u_lightintensity),u_lightcolor:new o.aN(v,r.u_lightcolor),u_vertical_gradient:new o.aI(v,r.u_vertical_gradient),u_opacity:new o.aI(v,r.u_opacity)}),fillExtrusionPattern:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_lightpos:new o.aN(v,r.u_lightpos),u_lightintensity:new o.aI(v,r.u_lightintensity),u_lightcolor:new o.aN(v,r.u_lightcolor),u_vertical_gradient:new o.aI(v,r.u_vertical_gradient),u_height_factor:new o.aI(v,r.u_height_factor),u_image:new o.aH(v,r.u_image),u_texsize:new o.aO(v,r.u_texsize),u_pixel_coord_upper:new o.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(v,r.u_pixel_coord_lower),u_scale:new o.aN(v,r.u_scale),u_fade:new o.aI(v,r.u_fade),u_opacity:new o.aI(v,r.u_opacity)}),fill:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix)}),fillPattern:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_image:new o.aH(v,r.u_image),u_texsize:new o.aO(v,r.u_texsize),u_pixel_coord_upper:new o.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(v,r.u_pixel_coord_lower),u_scale:new o.aN(v,r.u_scale),u_fade:new o.aI(v,r.u_fade)}),fillOutline:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_world:new o.aO(v,r.u_world)}),fillOutlinePattern:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_world:new o.aO(v,r.u_world),u_image:new o.aH(v,r.u_image),u_texsize:new o.aO(v,r.u_texsize),u_pixel_coord_upper:new o.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(v,r.u_pixel_coord_lower),u_scale:new o.aN(v,r.u_scale),u_fade:new o.aI(v,r.u_fade)}),circle:(v,r)=>({u_camera_to_center_distance:new o.aI(v,r.u_camera_to_center_distance),u_scale_with_map:new o.aH(v,r.u_scale_with_map),u_pitch_with_map:new o.aH(v,r.u_pitch_with_map),u_extrude_scale:new o.aO(v,r.u_extrude_scale),u_device_pixel_ratio:new o.aI(v,r.u_device_pixel_ratio),u_matrix:new o.aJ(v,r.u_matrix)}),collisionBox:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_pixel_extrude_scale:new o.aO(v,r.u_pixel_extrude_scale)}),collisionCircle:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_inv_matrix:new o.aJ(v,r.u_inv_matrix),u_camera_to_center_distance:new o.aI(v,r.u_camera_to_center_distance),u_viewport_size:new o.aO(v,r.u_viewport_size)}),debug:(v,r)=>({u_color:new o.aL(v,r.u_color),u_matrix:new o.aJ(v,r.u_matrix),u_overlay:new o.aH(v,r.u_overlay),u_overlay_scale:new o.aI(v,r.u_overlay_scale)}),clippingMask:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix)}),heatmap:(v,r)=>({u_extrude_scale:new o.aI(v,r.u_extrude_scale),u_intensity:new o.aI(v,r.u_intensity),u_matrix:new o.aJ(v,r.u_matrix)}),heatmapTexture:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_world:new o.aO(v,r.u_world),u_image:new o.aH(v,r.u_image),u_color_ramp:new o.aH(v,r.u_color_ramp),u_opacity:new o.aI(v,r.u_opacity)}),hillshade:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_image:new o.aH(v,r.u_image),u_latrange:new o.aO(v,r.u_latrange),u_light:new o.aO(v,r.u_light),u_shadow:new o.aL(v,r.u_shadow),u_highlight:new o.aL(v,r.u_highlight),u_accent:new o.aL(v,r.u_accent)}),hillshadePrepare:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_image:new o.aH(v,r.u_image),u_dimension:new o.aO(v,r.u_dimension),u_zoom:new o.aI(v,r.u_zoom),u_unpack:new o.aK(v,r.u_unpack)}),line:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_ratio:new o.aI(v,r.u_ratio),u_device_pixel_ratio:new o.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new o.aO(v,r.u_units_to_pixels)}),lineGradient:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_ratio:new o.aI(v,r.u_ratio),u_device_pixel_ratio:new o.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new o.aO(v,r.u_units_to_pixels),u_image:new o.aH(v,r.u_image),u_image_height:new o.aI(v,r.u_image_height)}),linePattern:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_texsize:new o.aO(v,r.u_texsize),u_ratio:new o.aI(v,r.u_ratio),u_device_pixel_ratio:new o.aI(v,r.u_device_pixel_ratio),u_image:new o.aH(v,r.u_image),u_units_to_pixels:new o.aO(v,r.u_units_to_pixels),u_scale:new o.aN(v,r.u_scale),u_fade:new o.aI(v,r.u_fade)}),lineSDF:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_ratio:new o.aI(v,r.u_ratio),u_device_pixel_ratio:new o.aI(v,r.u_device_pixel_ratio),u_units_to_pixels:new o.aO(v,r.u_units_to_pixels),u_patternscale_a:new o.aO(v,r.u_patternscale_a),u_patternscale_b:new o.aO(v,r.u_patternscale_b),u_sdfgamma:new o.aI(v,r.u_sdfgamma),u_image:new o.aH(v,r.u_image),u_tex_y_a:new o.aI(v,r.u_tex_y_a),u_tex_y_b:new o.aI(v,r.u_tex_y_b),u_mix:new o.aI(v,r.u_mix)}),raster:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_tl_parent:new o.aO(v,r.u_tl_parent),u_scale_parent:new o.aI(v,r.u_scale_parent),u_buffer_scale:new o.aI(v,r.u_buffer_scale),u_fade_t:new o.aI(v,r.u_fade_t),u_opacity:new o.aI(v,r.u_opacity),u_image0:new o.aH(v,r.u_image0),u_image1:new o.aH(v,r.u_image1),u_brightness_low:new o.aI(v,r.u_brightness_low),u_brightness_high:new o.aI(v,r.u_brightness_high),u_saturation_factor:new o.aI(v,r.u_saturation_factor),u_contrast_factor:new o.aI(v,r.u_contrast_factor),u_spin_weights:new o.aN(v,r.u_spin_weights)}),symbolIcon:(v,r)=>({u_is_size_zoom_constant:new o.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(v,r.u_is_size_feature_constant),u_size_t:new o.aI(v,r.u_size_t),u_size:new o.aI(v,r.u_size),u_camera_to_center_distance:new o.aI(v,r.u_camera_to_center_distance),u_pitch:new o.aI(v,r.u_pitch),u_rotate_symbol:new o.aH(v,r.u_rotate_symbol),u_aspect_ratio:new o.aI(v,r.u_aspect_ratio),u_fade_change:new o.aI(v,r.u_fade_change),u_matrix:new o.aJ(v,r.u_matrix),u_label_plane_matrix:new o.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new o.aJ(v,r.u_coord_matrix),u_is_text:new o.aH(v,r.u_is_text),u_pitch_with_map:new o.aH(v,r.u_pitch_with_map),u_is_along_line:new o.aH(v,r.u_is_along_line),u_is_variable_anchor:new o.aH(v,r.u_is_variable_anchor),u_texsize:new o.aO(v,r.u_texsize),u_texture:new o.aH(v,r.u_texture),u_translation:new o.aO(v,r.u_translation),u_pitched_scale:new o.aI(v,r.u_pitched_scale)}),symbolSDF:(v,r)=>({u_is_size_zoom_constant:new o.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(v,r.u_is_size_feature_constant),u_size_t:new o.aI(v,r.u_size_t),u_size:new o.aI(v,r.u_size),u_camera_to_center_distance:new o.aI(v,r.u_camera_to_center_distance),u_pitch:new o.aI(v,r.u_pitch),u_rotate_symbol:new o.aH(v,r.u_rotate_symbol),u_aspect_ratio:new o.aI(v,r.u_aspect_ratio),u_fade_change:new o.aI(v,r.u_fade_change),u_matrix:new o.aJ(v,r.u_matrix),u_label_plane_matrix:new o.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new o.aJ(v,r.u_coord_matrix),u_is_text:new o.aH(v,r.u_is_text),u_pitch_with_map:new o.aH(v,r.u_pitch_with_map),u_is_along_line:new o.aH(v,r.u_is_along_line),u_is_variable_anchor:new o.aH(v,r.u_is_variable_anchor),u_texsize:new o.aO(v,r.u_texsize),u_texture:new o.aH(v,r.u_texture),u_gamma_scale:new o.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new o.aI(v,r.u_device_pixel_ratio),u_is_halo:new o.aH(v,r.u_is_halo),u_translation:new o.aO(v,r.u_translation),u_pitched_scale:new o.aI(v,r.u_pitched_scale)}),symbolTextAndIcon:(v,r)=>({u_is_size_zoom_constant:new o.aH(v,r.u_is_size_zoom_constant),u_is_size_feature_constant:new o.aH(v,r.u_is_size_feature_constant),u_size_t:new o.aI(v,r.u_size_t),u_size:new o.aI(v,r.u_size),u_camera_to_center_distance:new o.aI(v,r.u_camera_to_center_distance),u_pitch:new o.aI(v,r.u_pitch),u_rotate_symbol:new o.aH(v,r.u_rotate_symbol),u_aspect_ratio:new o.aI(v,r.u_aspect_ratio),u_fade_change:new o.aI(v,r.u_fade_change),u_matrix:new o.aJ(v,r.u_matrix),u_label_plane_matrix:new o.aJ(v,r.u_label_plane_matrix),u_coord_matrix:new o.aJ(v,r.u_coord_matrix),u_is_text:new o.aH(v,r.u_is_text),u_pitch_with_map:new o.aH(v,r.u_pitch_with_map),u_is_along_line:new o.aH(v,r.u_is_along_line),u_is_variable_anchor:new o.aH(v,r.u_is_variable_anchor),u_texsize:new o.aO(v,r.u_texsize),u_texsize_icon:new o.aO(v,r.u_texsize_icon),u_texture:new o.aH(v,r.u_texture),u_texture_icon:new o.aH(v,r.u_texture_icon),u_gamma_scale:new o.aI(v,r.u_gamma_scale),u_device_pixel_ratio:new o.aI(v,r.u_device_pixel_ratio),u_is_halo:new o.aH(v,r.u_is_halo),u_translation:new o.aO(v,r.u_translation),u_pitched_scale:new o.aI(v,r.u_pitched_scale)}),background:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_opacity:new o.aI(v,r.u_opacity),u_color:new o.aL(v,r.u_color)}),backgroundPattern:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_opacity:new o.aI(v,r.u_opacity),u_image:new o.aH(v,r.u_image),u_pattern_tl_a:new o.aO(v,r.u_pattern_tl_a),u_pattern_br_a:new o.aO(v,r.u_pattern_br_a),u_pattern_tl_b:new o.aO(v,r.u_pattern_tl_b),u_pattern_br_b:new o.aO(v,r.u_pattern_br_b),u_texsize:new o.aO(v,r.u_texsize),u_mix:new o.aI(v,r.u_mix),u_pattern_size_a:new o.aO(v,r.u_pattern_size_a),u_pattern_size_b:new o.aO(v,r.u_pattern_size_b),u_scale_a:new o.aI(v,r.u_scale_a),u_scale_b:new o.aI(v,r.u_scale_b),u_pixel_coord_upper:new o.aO(v,r.u_pixel_coord_upper),u_pixel_coord_lower:new o.aO(v,r.u_pixel_coord_lower),u_tile_units_to_pixels:new o.aI(v,r.u_tile_units_to_pixels)}),terrain:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_texture:new o.aH(v,r.u_texture),u_ele_delta:new o.aI(v,r.u_ele_delta),u_fog_matrix:new o.aJ(v,r.u_fog_matrix),u_fog_color:new o.aL(v,r.u_fog_color),u_fog_ground_blend:new o.aI(v,r.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.aI(v,r.u_fog_ground_blend_opacity),u_horizon_color:new o.aL(v,r.u_horizon_color),u_horizon_fog_blend:new o.aI(v,r.u_horizon_fog_blend)}),terrainDepth:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_ele_delta:new o.aI(v,r.u_ele_delta)}),terrainCoords:(v,r)=>({u_matrix:new o.aJ(v,r.u_matrix),u_texture:new o.aH(v,r.u_texture),u_terrain_coords_id:new o.aI(v,r.u_terrain_coords_id),u_ele_delta:new o.aI(v,r.u_ele_delta)}),sky:(v,r)=>({u_sky_color:new o.aL(v,r.u_sky_color),u_horizon_color:new o.aL(v,r.u_horizon_color),u_horizon:new o.aI(v,r.u_horizon),u_sky_horizon_blend:new o.aI(v,r.u_sky_horizon_blend)})};class _a{constructor(r,c,f){this.context=r;let d=r.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!f,this.context.unbindVAO(),r.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(r){let c=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),c.bufferSubData(c.ELEMENT_ARRAY_BUFFER,0,r.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let ww={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class rp{constructor(r,c,f,d){this.length=c.length,this.attributes=f,this.itemSize=c.bytesPerElement,this.dynamicDraw=d,this.context=r;let m=r.gl;this.buffer=m.createBuffer(),r.bindVertexBuffer.set(this.buffer),m.bufferData(m.ARRAY_BUFFER,c.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete c.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(r){if(r.length!==this.length)throw new Error(`Length of new data is ${r.length}, which doesn't match current length of ${this.length}`);let c=this.context.gl;this.bind(),c.bufferSubData(c.ARRAY_BUFFER,0,r.arrayBuffer)}enableAttributes(r,c){for(let f=0;f<this.attributes.length;f++){let d=c.attributes[this.attributes[f].name];d!==void 0&&r.enableVertexAttribArray(d)}}setVertexAttribPointers(r,c,f){for(let d=0;d<this.attributes.length;d++){let m=this.attributes[d],w=c.attributes[m.name];w!==void 0&&r.vertexAttribPointer(w,m.components,r[ww[m.type]],!1,this.itemSize,m.offset+this.itemSize*(f||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}let ss=new WeakMap;function Io(v){var r;if(ss.has(v))return ss.get(v);{let c=(r=v.getParameter(v.VERSION))===null||r===void 0?void 0:r.startsWith("WebGL 2.0");return ss.set(v,c),c}}class Ht{constructor(r){this.gl=r.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(r){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ph extends Ht{getDefault(){return o.aM.transparent}set(r){let c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.clearColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Sw extends Ht{getDefault(){return 1}set(r){(r!==this.current||this.dirty)&&(this.gl.clearDepth(r),this.current=r,this.dirty=!1)}}class au extends Ht{getDefault(){return 0}set(r){(r!==this.current||this.dirty)&&(this.gl.clearStencil(r),this.current=r,this.dirty=!1)}}class qw extends Ht{getDefault(){return[!0,!0,!0,!0]}set(r){let c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.colorMask(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class _y extends Ht{getDefault(){return!0}set(r){(r!==this.current||this.dirty)&&(this.gl.depthMask(r),this.current=r,this.dirty=!1)}}class Iw extends Ht{getDefault(){return 255}set(r){(r!==this.current||this.dirty)&&(this.gl.stencilMask(r),this.current=r,this.dirty=!1)}}class xy extends Ht{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(r){let c=this.current;(r.func!==c.func||r.ref!==c.ref||r.mask!==c.mask||this.dirty)&&(this.gl.stencilFunc(r.func,r.ref,r.mask),this.current=r,this.dirty=!1)}}class ip extends Ht{getDefault(){let r=this.gl;return[r.KEEP,r.KEEP,r.KEEP]}set(r){let c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||this.dirty)&&(this.gl.stencilOp(r[0],r[1],r[2]),this.current=r,this.dirty=!1)}}class by extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;r?c.enable(c.STENCIL_TEST):c.disable(c.STENCIL_TEST),this.current=r,this.dirty=!1}}class wy extends Ht{getDefault(){return[0,1]}set(r){let c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.depthRange(r[0],r[1]),this.current=r,this.dirty=!1)}}class Sy extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;r?c.enable(c.DEPTH_TEST):c.disable(c.DEPTH_TEST),this.current=r,this.dirty=!1}}class qy extends Ht{getDefault(){return this.gl.LESS}set(r){(r!==this.current||this.dirty)&&(this.gl.depthFunc(r),this.current=r,this.dirty=!1)}}class us extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;r?c.enable(c.BLEND):c.disable(c.BLEND),this.current=r,this.dirty=!1}}class Iy extends Ht{getDefault(){let r=this.gl;return[r.ONE,r.ZERO]}set(r){let c=this.current;(r[0]!==c[0]||r[1]!==c[1]||this.dirty)&&(this.gl.blendFunc(r[0],r[1]),this.current=r,this.dirty=!1)}}class Ew extends Ht{getDefault(){return o.aM.transparent}set(r){let c=this.current;(r.r!==c.r||r.g!==c.g||r.b!==c.b||r.a!==c.a||this.dirty)&&(this.gl.blendColor(r.r,r.g,r.b,r.a),this.current=r,this.dirty=!1)}}class Ey extends Ht{getDefault(){return this.gl.FUNC_ADD}set(r){(r!==this.current||this.dirty)&&(this.gl.blendEquation(r),this.current=r,this.dirty=!1)}}class Ul extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;r?c.enable(c.CULL_FACE):c.disable(c.CULL_FACE),this.current=r,this.dirty=!1}}class Tw extends Ht{getDefault(){return this.gl.BACK}set(r){(r!==this.current||this.dirty)&&(this.gl.cullFace(r),this.current=r,this.dirty=!1)}}class mh extends Ht{getDefault(){return this.gl.CCW}set(r){(r!==this.current||this.dirty)&&(this.gl.frontFace(r),this.current=r,this.dirty=!1)}}class Aw extends Ht{getDefault(){return null}set(r){(r!==this.current||this.dirty)&&(this.gl.useProgram(r),this.current=r,this.dirty=!1)}}class Pw extends Ht{getDefault(){return this.gl.TEXTURE0}set(r){(r!==this.current||this.dirty)&&(this.gl.activeTexture(r),this.current=r,this.dirty=!1)}}class Ty extends Ht{getDefault(){let r=this.gl;return[0,0,r.drawingBufferWidth,r.drawingBufferHeight]}set(r){let c=this.current;(r[0]!==c[0]||r[1]!==c[1]||r[2]!==c[2]||r[3]!==c[3]||this.dirty)&&(this.gl.viewport(r[0],r[1],r[2],r[3]),this.current=r,this.dirty=!1)}}class Ay extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;c.bindFramebuffer(c.FRAMEBUFFER,r),this.current=r,this.dirty=!1}}class Py extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;c.bindRenderbuffer(c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class np extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;c.bindTexture(c.TEXTURE_2D,r),this.current=r,this.dirty=!1}}class Cy extends Ht{getDefault(){return null}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;c.bindBuffer(c.ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class vh extends Ht{getDefault(){return null}set(r){let c=this.gl;c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,r),this.current=r,this.dirty=!1}}class Ya extends Ht{getDefault(){return null}set(r){var c;if(r===this.current&&!this.dirty)return;let f=this.gl;Io(f)?f.bindVertexArray(r):(c=f.getExtension("OES_vertex_array_object"))===null||c===void 0||c.bindVertexArrayOES(r),this.current=r,this.dirty=!1}}class ap extends Ht{getDefault(){return 4}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_ALIGNMENT,r),this.current=r,this.dirty=!1}}class op extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r),this.current=r,this.dirty=!1}}class sp extends Ht{getDefault(){return!1}set(r){if(r===this.current&&!this.dirty)return;let c=this.gl;c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,r),this.current=r,this.dirty=!1}}class gh extends Ht{constructor(r,c){super(r),this.context=r,this.parent=c}getDefault(){return null}}class up extends gh{setDirty(){this.dirty=!0}set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,r,0),this.current=r,this.dirty=!1}}class ls extends gh{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class lp extends gh{set(r){if(r===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);let c=this.gl;c.framebufferRenderbuffer(c.FRAMEBUFFER,c.DEPTH_STENCIL_ATTACHMENT,c.RENDERBUFFER,r),this.current=r,this.dirty=!1}}class Cw{constructor(r,c,f,d,m){this.context=r,this.width=c,this.height=f;let w=r.gl,I=this.framebuffer=w.createFramebuffer();if(this.colorAttachment=new up(r,I),d)this.depthAttachment=m?new lp(r,I):new ls(r,I);else if(m)throw new Error("Stencil cannot be set without depth");if(w.checkFramebufferStatus(w.FRAMEBUFFER)!==w.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){let r=this.context.gl,c=this.colorAttachment.get();if(c&&r.deleteTexture(c),this.depthAttachment){let f=this.depthAttachment.get();f&&r.deleteRenderbuffer(f)}r.deleteFramebuffer(this.framebuffer)}}class Er{constructor(r,c,f){this.blendFunction=r,this.blendColor=c,this.mask=f}}Er.Replace=[1,0],Er.disabled=new Er(Er.Replace,o.aM.transparent,[!1,!1,!1,!1]),Er.unblended=new Er(Er.Replace,o.aM.transparent,[!0,!0,!0,!0]),Er.alphaBlended=new Er([1,771],o.aM.transparent,[!0,!0,!0,!0]);class Mw{constructor(r){var c,f;if(this.gl=r,this.clearColor=new ph(this),this.clearDepth=new Sw(this),this.clearStencil=new au(this),this.colorMask=new qw(this),this.depthMask=new _y(this),this.stencilMask=new Iw(this),this.stencilFunc=new xy(this),this.stencilOp=new ip(this),this.stencilTest=new by(this),this.depthRange=new wy(this),this.depthTest=new Sy(this),this.depthFunc=new qy(this),this.blend=new us(this),this.blendFunc=new Iy(this),this.blendColor=new Ew(this),this.blendEquation=new Ey(this),this.cullFace=new Ul(this),this.cullFaceSide=new Tw(this),this.frontFace=new mh(this),this.program=new Aw(this),this.activeTexture=new Pw(this),this.viewport=new Ty(this),this.bindFramebuffer=new Ay(this),this.bindRenderbuffer=new Py(this),this.bindTexture=new np(this),this.bindVertexBuffer=new Cy(this),this.bindElementBuffer=new vh(this),this.bindVertexArray=new Ya(this),this.pixelStoreUnpack=new ap(this),this.pixelStoreUnpackPremultiplyAlpha=new op(this),this.pixelStoreUnpackFlipY=new sp(this),this.extTextureFilterAnisotropic=r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=r.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),Io(r)){this.HALF_FLOAT=r.HALF_FLOAT;let d=r.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(c=r.RGBA16F)!==null&&c!==void 0?c:d==null?void 0:d.RGBA16F_EXT,this.RGB16F=(f=r.RGB16F)!==null&&f!==void 0?f:d==null?void 0:d.RGB16F_EXT,r.getExtension("EXT_color_buffer_float")}else{r.getExtension("EXT_color_buffer_half_float"),r.getExtension("OES_texture_half_float_linear");let d=r.getExtension("OES_texture_half_float");this.HALF_FLOAT=d==null?void 0:d.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(r,c){return new _a(this,r,c)}createVertexBuffer(r,c,f){return new rp(this,r,c,f)}createRenderbuffer(r,c,f){let d=this.gl,m=d.createRenderbuffer();return this.bindRenderbuffer.set(m),d.renderbufferStorage(d.RENDERBUFFER,r,c,f),this.bindRenderbuffer.set(null),m}createFramebuffer(r,c,f,d){return new Cw(this,r,c,f,d)}clear({color:r,depth:c,stencil:f}){let d=this.gl,m=0;r&&(m|=d.COLOR_BUFFER_BIT,this.clearColor.set(r),this.colorMask.set([!0,!0,!0,!0])),c!==void 0&&(m|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(c),this.depthMask.set(!0)),f!==void 0&&(m|=d.STENCIL_BUFFER_BIT,this.clearStencil.set(f),this.stencilMask.set(255)),d.clear(m)}setCullFace(r){r.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(r.mode),this.frontFace.set(r.frontFace))}setDepthMode(r){r.func!==this.gl.ALWAYS||r.mask?(this.depthTest.set(!0),this.depthFunc.set(r.func),this.depthMask.set(r.mask),this.depthRange.set(r.range)):this.depthTest.set(!1)}setStencilMode(r){r.test.func!==this.gl.ALWAYS||r.mask?(this.stencilTest.set(!0),this.stencilMask.set(r.mask),this.stencilOp.set([r.fail,r.depthFail,r.pass]),this.stencilFunc.set({func:r.test.func,ref:r.ref,mask:r.test.mask})):this.stencilTest.set(!1)}setColorMode(r){o.aE(r.blendFunction,Er.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(r.blendFunction),this.blendColor.set(r.blendColor)),this.colorMask.set(r.mask)}createVertexArray(){var r;return Io(this.gl)?this.gl.createVertexArray():(r=this.gl.getExtension("OES_vertex_array_object"))===null||r===void 0?void 0:r.createVertexArrayOES()}deleteVertexArray(r){var c;return Io(this.gl)?this.gl.deleteVertexArray(r):(c=this.gl.getExtension("OES_vertex_array_object"))===null||c===void 0?void 0:c.deleteVertexArrayOES(r)}unbindVAO(){this.bindVertexArray.set(null)}}class Mt{constructor(r,c,f){this.func=r,this.mask=c,this.range=f}}Mt.ReadOnly=!1,Mt.ReadWrite=!0,Mt.disabled=new Mt(519,Mt.ReadOnly,[0,1]);let yh=7680;class nr{constructor(r,c,f,d,m,w){this.test=r,this.ref=c,this.mask=f,this.fail=d,this.depthFail=m,this.pass=w}}nr.disabled=new nr({func:519,mask:0},0,0,yh,yh,yh);class Jt{constructor(r,c,f){this.enable=r,this.mode=c,this.frontFace=f}}let cs;function $l(v,r,c,f,d){let m=v.context,w=m.gl,I=v.useProgram("collisionBox"),A=[],O=0,k=0;for(let ae=0;ae<f.length;ae++){let ue=f[ae],Y=r.getTile(ue).getBucket(c);if(!Y)continue;let he=d?Y.textCollisionBox:Y.iconCollisionBox,de=Y.collisionCircleArray;if(de.length>0){let ye=o.H();o.aQ(ye,Y.placementInvProjMatrix,v.transform.glCoordMatrix),o.aQ(ye,ye,Y.placementViewportMatrix),A.push({circleArray:de,circleOffset:k,transform:ue.posMatrix,invTransform:ye,coord:ue}),O+=de.length/4,k=O}he&&I.draw(m,w.LINES,Mt.disabled,nr.disabled,v.colorModeForRenderPass(),Jt.disabled,{u_matrix:ue.posMatrix,u_pixel_extrude_scale:[1/(D=v.transform).width,1/D.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(ue),c.id,he.layoutVertexBuffer,he.indexBuffer,he.segments,null,v.transform.zoom,null,null,he.collisionVertexBuffer)}var D;if(!d||!A.length)return;let j=v.useProgram("collisionCircle"),H=new o.aR;H.resize(4*O),H._trim();let Z=0;for(let ae of A)for(let ue=0;ue<ae.circleArray.length/4;ue++){let Y=4*ue,he=ae.circleArray[Y+0],de=ae.circleArray[Y+1],ye=ae.circleArray[Y+2],Te=ae.circleArray[Y+3];H.emplace(Z++,he,de,ye,Te,0),H.emplace(Z++,he,de,ye,Te,1),H.emplace(Z++,he,de,ye,Te,2),H.emplace(Z++,he,de,ye,Te,3)}(!cs||cs.length<2*O)&&(cs=function(ae){let ue=2*ae,Y=new o.aT;Y.resize(ue),Y._trim();for(let he=0;he<ue;he++){let de=6*he;Y.uint16[de+0]=4*he+0,Y.uint16[de+1]=4*he+1,Y.uint16[de+2]=4*he+2,Y.uint16[de+3]=4*he+2,Y.uint16[de+4]=4*he+3,Y.uint16[de+5]=4*he+0}return Y}(O));let ee=m.createIndexBuffer(cs,!0),ne=m.createVertexBuffer(H,o.aS.members,!0);for(let ae of A){let ue=os(ae.transform,ae.invTransform,v.transform);j.draw(m,w.TRIANGLES,Mt.disabled,nr.disabled,v.colorModeForRenderPass(),Jt.disabled,ue,v.style.map.terrain&&v.style.map.terrain.getTerrainData(ae.coord),c.id,ne,ee,o.a0.simpleSegment(0,2*ae.circleOffset,ae.circleArray.length,ae.circleArray.length/2),null,v.transform.zoom,null,null,null)}ne.destroy(),ee.destroy()}Jt.disabled=new Jt(!1,1029,2305),Jt.backCCW=new Jt(!0,1029,2305);let Vl=o.an(new Float32Array(16));function cp(v,r,c,f,d,m){let{horizontalAlign:w,verticalAlign:I}=o.au(v);return new o.P((-(w-.5)*r/d+f[0])*m,(-(I-.5)*c/d+f[1])*m)}function hs(v,r,c,f,d,m){let w=r.tileAnchorPoint.add(new o.P(r.translation[0],r.translation[1]));if(r.pitchWithMap){let I=f.mult(m);c||(I=I.rotate(-d));let A=w.add(I);return te(A.x,A.y,r.labelPlaneMatrix,r.getElevation).point}if(c){let I=Ie(r.tileAnchorPoint.x+1,r.tileAnchorPoint.y,r).point.sub(v),A=Math.atan(I.y/I.x)+(I.x<0?Math.PI:0);return v.add(f.rotate(A))}return v.add(f)}function ou(v,r,c,f,d,m,w,I,A,O,k,D,j,H){let Z=v.text.placedSymbolArray,ee=v.text.dynamicLayoutVertexArray,ne=v.icon.dynamicLayoutVertexArray,ae={};ee.clear();for(let ue=0;ue<Z.length;ue++){let Y=Z.get(ue),he=Y.hidden||!Y.crossTileID||v.allowVerticalPlacement&&!Y.placedOrientation?null:f[Y.crossTileID];if(he){let de=new o.P(Y.anchorX,Y.anchorY),ye={getElevation:H,width:d.width,height:d.height,labelPlaneMatrix:m,lineVertexArray:null,pitchWithMap:c,projection:k,projectionCache:null,tileAnchorPoint:de,translation:D,unwrappedTileID:j},Te=c?te(de.x,de.y,w,H):Ie(de.x,de.y,ye),Me=N(d.cameraToCenterDistance,Te.signedDistanceFromCamera),je=o.ai(v.textSizeData,A,Y)*Me/o.ap;c&&(je*=v.tilePixelRatio/I);let{width:Ke,height:ze,anchor:De,textOffset:rt,textBoxScale:yt}=he,Ne=cp(De,Ke,ze,rt,yt,je),Ge=k.getPitchedTextCorrection(d,de.add(new o.P(D[0],D[1])),j),mt=hs(Te.point,ye,r,Ne,d.angle,Ge),lr=v.allowVerticalPlacement&&Y.placedOrientation===o.ah.vertical?Math.PI/2:0;for(let It=0;It<Y.numGlyphs;It++)o.aj(ee,mt,lr);O&&Y.associatedIconIndex>=0&&(ae[Y.associatedIconIndex]={shiftedAnchor:mt,angle:lr})}else lt(Y.numGlyphs,ee)}if(O){ne.clear();let ue=v.icon.placedSymbolArray;for(let Y=0;Y<ue.length;Y++){let he=ue.get(Y);if(he.hidden)lt(he.numGlyphs,ne);else{let de=ae[Y];if(de)for(let ye=0;ye<he.numGlyphs;ye++)o.aj(ne,de.shiftedAnchor,de.angle);else lt(he.numGlyphs,ne)}}v.icon.dynamicLayoutVertexBuffer.updateData(ne)}v.text.dynamicLayoutVertexBuffer.updateData(ee)}function Sn(v,r,c){return c.iconsInText&&r?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function hp(v,r,c,f,d,m,w,I,A,O,k,D){let j=v.context,H=j.gl,Z=v.transform,ee=ns(),ne=I==="map",ae=A==="map",ue=I!=="viewport"&&c.layout.get("symbol-placement")!=="point",Y=ne&&!ae&&!ue,he=!ae&&ue,de=!c.layout.get("symbol-sort-key").isConstant(),ye=!1,Te=v.depthModeForSublayer(0,Mt.ReadOnly),Me=c._unevaluatedLayout.hasValue("text-variable-anchor")||c._unevaluatedLayout.hasValue("text-variable-anchor-offset"),je=[],Ke=ee.getCircleRadiusCorrection(Z);for(let ze of f){let De=r.getTile(ze),rt=De.getBucket(c);if(!rt)continue;let yt=d?rt.text:rt.icon;if(!yt||!yt.segments.get().length||!yt.hasVisibleVertices)continue;let Ne=yt.programConfigurations.get(c.id),Ge=d||rt.sdfIcons,mt=d?rt.textSizeData:rt.iconSizeData,lr=ae||Z.pitch!==0,It=v.useProgram(Sn(Ge,d,rt),Ne),Lt=o.ag(mt,Z.zoom),cr=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ze),ci,Qn,hr,Vi,Ii=[0,0],hi=null;if(d)Qn=De.glyphAtlasTexture,hr=H.LINEAR,ci=De.glyphAtlasTexture.size,rt.iconsInText&&(Ii=De.imageAtlasTexture.size,hi=De.imageAtlasTexture,Vi=lr||v.options.rotating||v.options.zooming||mt.kind==="composite"||mt.kind==="camera"?H.LINEAR:H.NEAREST);else{let Ft=c.layout.get("icon-size").constantOr(0)!==1||rt.iconsNeedLinear;Qn=De.imageAtlasTexture,hr=Ge||v.options.rotating||v.options.zooming||Ft||lr?H.LINEAR:H.NEAREST,ci=De.imageAtlasTexture.size}let Ei=Dt(De,1,v.transform.zoom),wa=he?ze.posMatrix:Vl,wu=So(wa,ae,ne,v.transform,Ei),zh=ya(wa,ae,ne,v.transform,Ei),Su=ya(ze.posMatrix,ae,ne,v.transform,Ei),En=ee.translatePosition(v.transform,De,m,w),Fh=Me&&rt.hasTextData(),Lp=c.layout.get("icon-text-fit")!=="none"&&Fh&&rt.hasIconData();if(ue){let Ft=v.style.map.terrain?(qu,Iu)=>v.style.map.terrain.getElevation(ze,qu,Iu):null,vs=c.layout.get("text-rotation-alignment")==="map";W(rt,ze.posMatrix,v,d,wu,Su,ae,O,vs,ee,ze.toUnwrapped(),Z.width,Z.height,En,Ft)}let Tn=ze.posMatrix,An=d&&Me||Lp,Eo=ue||An?Vl:wu,ea=zh,ii=Ge&&c.paint.get(d?"text-halo-width":"icon-halo-width").constantOr(1)!==0,fi;fi=Ge?rt.iconsInText?Qd(mt.kind,Lt,Y,ae,ue,An,v,Tn,Eo,ea,En,ci,Ii,Ke):jl(mt.kind,Lt,Y,ae,ue,An,v,Tn,Eo,ea,En,d,ci,!0,Ke):yy(mt.kind,Lt,Y,ae,ue,An,v,Tn,Eo,ea,En,d,ci,Ke);let hn={program:It,buffers:yt,uniformValues:fi,atlasTexture:Qn,atlasTextureIcon:hi,atlasInterpolation:hr,atlasInterpolationIcon:Vi,isSDF:Ge,hasHalo:ii};if(de&&rt.canOverlap){ye=!0;let Ft=yt.segments.get();for(let vs of Ft)je.push({segments:new o.a0([vs]),sortKey:vs.sortKey,state:hn,terrainData:cr})}else je.push({segments:yt.segments,sortKey:0,state:hn,terrainData:cr})}ye&&je.sort((ze,De)=>ze.sortKey-De.sortKey);for(let ze of je){let De=ze.state;if(j.activeTexture.set(H.TEXTURE0),De.atlasTexture.bind(De.atlasInterpolation,H.CLAMP_TO_EDGE),De.atlasTextureIcon&&(j.activeTexture.set(H.TEXTURE1),De.atlasTextureIcon&&De.atlasTextureIcon.bind(De.atlasInterpolationIcon,H.CLAMP_TO_EDGE)),De.isSDF){let rt=De.uniformValues;De.hasHalo&&(rt.u_is_halo=1,fp(De.buffers,ze.segments,c,v,De.program,Te,k,D,rt,ze.terrainData)),rt.u_is_halo=0}fp(De.buffers,ze.segments,c,v,De.program,Te,k,D,De.uniformValues,ze.terrainData)}}function fp(v,r,c,f,d,m,w,I,A,O){let k=f.context;d.draw(k,k.gl.TRIANGLES,m,w,I,Jt.disabled,A,O,c.id,v.layoutVertexBuffer,v.indexBuffer,r,c.paint,f.transform.zoom,v.programConfigurations.get(c.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function dp(v,r,c,f){let d=v.context,m=d.gl,w=nr.disabled,I=new Er([m.ONE,m.ONE],o.aM.transparent,[!0,!0,!0,!0]),A=r.getBucket(c);if(!A)return;let O=f.key,k=c.heatmapFbos.get(O);k||(k=Gl(d,r.tileSize,r.tileSize),c.heatmapFbos.set(O,k)),d.bindFramebuffer.set(k.framebuffer),d.viewport.set([0,0,r.tileSize,r.tileSize]),d.clear({color:o.aM.transparent});let D=A.programConfigurations.get(c.id),j=v.useProgram("heatmap",D),H=v.style.map.terrain.getTerrainData(f);j.draw(d,m.TRIANGLES,Mt.disabled,w,I,Jt.disabled,$i(f.posMatrix,r,v.transform.zoom,c.paint.get("heatmap-intensity")),H,c.id,A.layoutVertexBuffer,A.indexBuffer,A.segments,c.paint,v.transform.zoom,D)}function fs(v,r,c){let f=v.context,d=f.gl;f.setColorMode(v.colorModeForRenderPass());let m=Hl(f,r),w=c.key,I=r.heatmapFbos.get(w);I&&(f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,I.colorAttachment.get()),f.activeTexture.set(d.TEXTURE1),m.bind(d.LINEAR,d.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(f,d.TRIANGLES,Mt.disabled,nr.disabled,v.colorModeForRenderPass(),Jt.disabled,ch(v,r,0,1),null,r.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,r.paint,v.transform.zoom),I.destroy(),r.heatmapFbos.delete(w))}function Gl(v,r,c){var f,d;let m=v.gl,w=m.createTexture();m.bindTexture(m.TEXTURE_2D,w),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR);let I=(f=v.HALF_FLOAT)!==null&&f!==void 0?f:m.UNSIGNED_BYTE,A=(d=v.RGBA16F)!==null&&d!==void 0?d:m.RGBA;m.texImage2D(m.TEXTURE_2D,0,A,r,c,0,m.RGBA,I,null);let O=v.createFramebuffer(r,c,!1,!1);return O.colorAttachment.set(w),O}function Hl(v,r){return r.colorRampTexture||(r.colorRampTexture=new Qe(v,r.colorRamp,v.gl.RGBA)),r.colorRampTexture}function su(v,r,c,f,d){if(!c||!f||!f.imageAtlas)return;let m=f.imageAtlas.patternPositions,w=m[c.to.toString()],I=m[c.from.toString()];if(!w&&I&&(w=I),!I&&w&&(I=w),!w||!I){let A=d.getPaintProperty(r);w=m[A],I=m[A]}w&&I&&v.setConstantPatternPositions(w,I)}function Wl(v,r,c,f,d,m,w){let I=v.context.gl,A="fill-pattern",O=c.paint.get(A),k=O&&O.constantOr(1),D=c.getCrossfadeParameters(),j,H,Z,ee,ne;w?(H=k&&!c.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",j=I.LINES):(H=k?"fillPattern":"fill",j=I.TRIANGLES);let ae=O.constantOr(null);for(let ue of f){let Y=r.getTile(ue);if(k&&!Y.patternsLoaded())continue;let he=Y.getBucket(c);if(!he)continue;let de=he.programConfigurations.get(c.id),ye=v.useProgram(H,de),Te=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ue);k&&(v.context.activeTexture.set(I.TEXTURE0),Y.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),de.updatePaintBuffers(D)),su(de,A,ae,Y,c);let Me=Te?ue:null,je=v.translatePosMatrix(Me?Me.posMatrix:ue.posMatrix,Y,c.paint.get("fill-translate"),c.paint.get("fill-translate-anchor"));if(w){ee=he.indexBuffer2,ne=he.segments2;let Ke=[I.drawingBufferWidth,I.drawingBufferHeight];Z=H==="fillOutlinePattern"&&k?py(je,v,D,Y,Ke):gw(je,Ke)}else ee=he.indexBuffer,ne=he.segments,Z=k?dy(je,v,D,Y):iu(je);ye.draw(v.context,j,d,v.stencilModeForClipping(ue),m,Jt.disabled,Z,Te,c.id,he.layoutVertexBuffer,ee,ne,c.paint,v.transform.zoom,de)}}function _h(v,r,c,f,d,m,w){let I=v.context,A=I.gl,O="fill-extrusion-pattern",k=c.paint.get(O),D=k.constantOr(1),j=c.getCrossfadeParameters(),H=c.paint.get("fill-extrusion-opacity"),Z=k.constantOr(null);for(let ee of f){let ne=r.getTile(ee),ae=ne.getBucket(c);if(!ae)continue;let ue=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ee),Y=ae.programConfigurations.get(c.id),he=v.useProgram(D?"fillExtrusionPattern":"fillExtrusion",Y);D&&(v.context.activeTexture.set(A.TEXTURE0),ne.imageAtlasTexture.bind(A.LINEAR,A.CLAMP_TO_EDGE),Y.updatePaintBuffers(j)),su(Y,O,Z,ne,c);let de=v.translatePosMatrix(ee.posMatrix,ne,c.paint.get("fill-extrusion-translate"),c.paint.get("fill-extrusion-translate-anchor")),ye=c.paint.get("fill-extrusion-vertical-gradient"),Te=D?lh(de,v,ye,H,ee,j,ne):Nl(de,v,ye,H);he.draw(I,I.gl.TRIANGLES,d,m,w,Jt.backCCW,Te,ue,c.id,ae.layoutVertexBuffer,ae.indexBuffer,ae.segments,c.paint,v.transform.zoom,Y,v.style.map.terrain&&ae.centroidVertexBuffer)}}function uu(v,r,c,f,d,m,w){let I=v.context,A=I.gl,O=c.fbo;if(!O)return;let k=v.useProgram("hillshade"),D=v.style.map.terrain&&v.style.map.terrain.getTerrainData(r);I.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,O.colorAttachment.get()),k.draw(I,A.TRIANGLES,d,m,w,Jt.disabled,((j,H,Z,ee)=>{let ne=Z.paint.get("hillshade-shadow-color"),ae=Z.paint.get("hillshade-highlight-color"),ue=Z.paint.get("hillshade-accent-color"),Y=Z.paint.get("hillshade-illumination-direction")*(Math.PI/180);Z.paint.get("hillshade-illumination-anchor")==="viewport"&&(Y-=j.transform.angle);let he=!j.options.moving;return{u_matrix:ee?ee.posMatrix:j.transform.calculatePosMatrix(H.tileID.toUnwrapped(),he),u_image:0,u_latrange:hh(0,H.tileID),u_light:[Z.paint.get("hillshade-exaggeration"),Y],u_shadow:ne,u_highlight:ae,u_accent:ue}})(v,c,f,D?r:null),D,f.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function lu(v,r,c,f,d,m){let w=v.context,I=w.gl,A=r.dem;if(A&&A.data){let O=A.dim,k=A.stride,D=A.getPixels();if(w.activeTexture.set(I.TEXTURE1),w.pixelStoreUnpackPremultiplyAlpha.set(!1),r.demTexture=r.demTexture||v.getTileTexture(k),r.demTexture){let H=r.demTexture;H.update(D,{premultiply:!1}),H.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else r.demTexture=new Qe(w,D,I.RGBA,{premultiply:!1}),r.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);w.activeTexture.set(I.TEXTURE0);let j=r.fbo;if(!j){let H=new Qe(w,{width:O,height:O,data:null},I.RGBA);H.bind(I.LINEAR,I.CLAMP_TO_EDGE),j=r.fbo=w.createFramebuffer(O,O,!0,!1),j.colorAttachment.set(H.texture)}w.bindFramebuffer.set(j.framebuffer),w.viewport.set([0,0,O,O]),v.useProgram("hillshadePrepare").draw(w,I.TRIANGLES,f,d,m,Jt.disabled,((H,Z)=>{let ee=Z.stride,ne=o.H();return o.aP(ne,0,o.X,-o.X,0,0,1),o.J(ne,ne,[0,-o.X,0]),{u_matrix:ne,u_image:1,u_dimension:[ee,ee],u_zoom:H.overscaledZ,u_unpack:Z.getUnpackVector()}})(r.tileID,A),null,c.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),r.needsHillshadePrepare=!1}}function My(v,r,c,f,d,m){let w=f.paint.get("raster-fade-duration");if(!m&&w>0){let I=T.now(),A=(I-v.timeAdded)/w,O=r?(I-r.timeAdded)/w:-1,k=c.getSource(),D=d.coveringZoomLevel({tileSize:k.tileSize,roundZoom:k.roundZoom}),j=!r||Math.abs(r.tileID.overscaledZ-D)>Math.abs(v.tileID.overscaledZ-D),H=j&&v.refreshedUponExpiration?1:o.ac(j?A:1-O,0,1);return v.refreshedUponExpiration&&A>=1&&(v.refreshedUponExpiration=!1),r?{opacity:1,mix:1-H}:{opacity:H,mix:0}}return{opacity:1,mix:0}}let pp=new o.aM(1,0,0,1),Ut=new o.aM(0,1,0,1),xh=new o.aM(0,0,1,1),Ow=new o.aM(1,0,1,1),Oy=new o.aM(0,1,1,1);function cu(v,r,c,f){bh(v,0,r+c/2,v.transform.width,c,f)}function Ry(v,r,c,f){bh(v,r-c/2,0,c,v.transform.height,f)}function bh(v,r,c,f,d,m){let w=v.context,I=w.gl;I.enable(I.SCISSOR_TEST),I.scissor(r*v.pixelRatio,c*v.pixelRatio,f*v.pixelRatio,d*v.pixelRatio),w.clear({color:m}),I.disable(I.SCISSOR_TEST)}function ky(v,r,c){let f=v.context,d=f.gl,m=c.posMatrix,w=v.useProgram("debug"),I=Mt.disabled,A=nr.disabled,O=v.colorModeForRenderPass(),k="$debug",D=v.style.map.terrain&&v.style.map.terrain.getTerrainData(c);f.activeTexture.set(d.TEXTURE0);let j=r.getTileByID(c.key).latestRawTileData,H=Math.floor((j&&j.byteLength||0)/1024),Z=r.getTile(c).tileSize,ee=512/Math.min(Z,512)*(c.overscaledZ/v.transform.zoom)*.5,ne=c.canonical.toString();c.overscaledZ!==c.canonical.z&&(ne+=` => ${c.overscaledZ}`),function(ae,ue){ae.initDebugOverlayCanvas();let Y=ae.debugOverlayCanvas,he=ae.context.gl,de=ae.debugOverlayCanvas.getContext("2d");de.clearRect(0,0,Y.width,Y.height),de.shadowColor="white",de.shadowBlur=2,de.lineWidth=1.5,de.strokeStyle="white",de.textBaseline="top",de.font="bold 36px Open Sans, sans-serif",de.fillText(ue,5,5),de.strokeText(ue,5,5),ae.debugOverlayTexture.update(Y),ae.debugOverlayTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE)}(v,`${ne} ${H}kB`),w.draw(f,d.TRIANGLES,I,A,Er.alphaBlended,Jt.disabled,Bl(m,o.aM.transparent,ee),null,k,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),w.draw(f,d.LINE_STRIP,I,A,O,Jt.disabled,Bl(m,o.aM.red),D,k,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Dy(v,r,c){let f=v.context,d=f.gl,m=v.colorModeForRenderPass(),w=new Mt(d.LEQUAL,Mt.ReadWrite,v.depthRangeFor3D),I=v.useProgram("terrain"),A=r.getTerrainMesh();f.bindFramebuffer.set(null),f.viewport.set([0,0,v.width,v.height]);for(let O of c){let k=v.renderToTexture.getTexture(O),D=r.getTerrainData(O.tileID);f.activeTexture.set(d.TEXTURE0),d.bindTexture(d.TEXTURE_2D,k.texture);let j=v.transform.calculatePosMatrix(O.tileID.toUnwrapped()),H=r.getMeshFrameDelta(v.transform.zoom),Z=v.transform.calculateFogMatrix(O.tileID.toUnwrapped()),ee=Yd(j,H,Z,v.style.sky,v.transform.pitch);I.draw(f,d.TRIANGLES,w,nr.disabled,m,Jt.backCCW,ee,D,"terrain",A.vertexBuffer,A.indexBuffer,A.segments)}}class wh{constructor(r,c,f){this.vertexBuffer=r,this.indexBuffer=c,this.segments=f}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Sh{constructor(r,c){this.context=new Mw(r),this.transform=c,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=dt.maxUnderzooming+dt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Kd}resize(r,c,f){if(this.width=Math.floor(r*f),this.height=Math.floor(c*f),this.pixelRatio=f,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(let d of this.style._order)this.style._layers[d].resize()}setup(){let r=this.context,c=new o.aX;c.emplaceBack(0,0),c.emplaceBack(o.X,0),c.emplaceBack(0,o.X),c.emplaceBack(o.X,o.X),this.tileExtentBuffer=r.createVertexBuffer(c,as.members),this.tileExtentSegments=o.a0.simpleSegment(0,0,4,2);let f=new o.aX;f.emplaceBack(0,0),f.emplaceBack(o.X,0),f.emplaceBack(0,o.X),f.emplaceBack(o.X,o.X),this.debugBuffer=r.createVertexBuffer(f,as.members),this.debugSegments=o.a0.simpleSegment(0,0,4,5);let d=new o.$;d.emplaceBack(0,0,0,0),d.emplaceBack(o.X,0,o.X,0),d.emplaceBack(0,o.X,0,o.X),d.emplaceBack(o.X,o.X,o.X,o.X),this.rasterBoundsBuffer=r.createVertexBuffer(d,bo.members),this.rasterBoundsSegments=o.a0.simpleSegment(0,0,4,2);let m=new o.aX;m.emplaceBack(0,0),m.emplaceBack(1,0),m.emplaceBack(0,1),m.emplaceBack(1,1),this.viewportBuffer=r.createVertexBuffer(m,as.members),this.viewportSegments=o.a0.simpleSegment(0,0,4,2);let w=new o.aZ;w.emplaceBack(0),w.emplaceBack(1),w.emplaceBack(3),w.emplaceBack(2),w.emplaceBack(0),this.tileBorderIndexBuffer=r.createIndexBuffer(w);let I=new o.aY;I.emplaceBack(0,1,2),I.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=r.createIndexBuffer(I);let A=this.context.gl;this.stencilClearMode=new nr({func:A.ALWAYS,mask:0},0,255,A.ZERO,A.ZERO,A.ZERO)}clearStencil(){let r=this.context,c=r.gl;this.nextStencilID=1,this.currentStencilSource=void 0;let f=o.H();o.aP(f,0,this.width,this.height,0,0,1),o.K(f,f,[c.drawingBufferWidth,c.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(r,c.TRIANGLES,Mt.disabled,this.stencilClearMode,Er.disabled,Jt.disabled,Ui(f),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(r,c){if(this.currentStencilSource===r.source||!r.isTileClipped()||!c||!c.length)return;this.currentStencilSource=r.source;let f=this.context,d=f.gl;this.nextStencilID+c.length>256&&this.clearStencil(),f.setColorMode(Er.disabled),f.setDepthMode(Mt.disabled);let m=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(let w of c){let I=this._tileClippingMaskIDs[w.key]=this.nextStencilID++,A=this.style.map.terrain&&this.style.map.terrain.getTerrainData(w);m.draw(f,d.TRIANGLES,Mt.disabled,new nr({func:d.ALWAYS,mask:0},I,255,d.KEEP,d.KEEP,d.REPLACE),Er.disabled,Jt.disabled,Ui(w.posMatrix),A,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();let r=this.nextStencilID++,c=this.context.gl;return new nr({func:c.NOTEQUAL,mask:255},r,255,c.KEEP,c.KEEP,c.REPLACE)}stencilModeForClipping(r){let c=this.context.gl;return new nr({func:c.EQUAL,mask:255},this._tileClippingMaskIDs[r.key],0,c.KEEP,c.KEEP,c.REPLACE)}stencilConfigForOverlap(r){let c=this.context.gl,f=r.sort((w,I)=>I.overscaledZ-w.overscaledZ),d=f[f.length-1].overscaledZ,m=f[0].overscaledZ-d+1;if(m>1){this.currentStencilSource=void 0,this.nextStencilID+m>256&&this.clearStencil();let w={};for(let I=0;I<m;I++)w[I+d]=new nr({func:c.GEQUAL,mask:255},I+this.nextStencilID,255,c.KEEP,c.KEEP,c.REPLACE);return this.nextStencilID+=m,[w,f]}return[{[d]:nr.disabled},f]}colorModeForRenderPass(){let r=this.context.gl;return this._showOverdrawInspector?new Er([r.CONSTANT_COLOR,r.ONE],new o.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Er.unblended:Er.alphaBlended}depthModeForSublayer(r,c,f){if(!this.opaquePassEnabledForLayer())return Mt.disabled;let d=1-((1+this.currentLayer)*this.numSublayers+r)*this.depthEpsilon;return new Mt(f||this.context.gl.LEQUAL,c,[d,d])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(r,c){this.style=r,this.options=c,this.lineAtlas=r.lineAtlas,this.imageManager=r.imageManager,this.glyphManager=r.glyphManager,this.symbolFadeChange=r.placement.symbolFadeChange(T.now()),this.imageManager.beginFrame();let f=this.style._order,d=this.style.sourceCaches,m={},w={},I={};for(let A in d){let O=d[A];O.used&&O.prepare(this.context),m[A]=O.getVisibleCoordinates(),w[A]=m[A].slice().reverse(),I[A]=O.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let A=0;A<f.length;A++)if(this.style._layers[f[A]].is3D()){this.opaquePassCutoff=A;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(let A of f){let O=this.style._layers[A];if(!O.hasOffscreenPass()||O.isHidden(this.transform.zoom))continue;let k=w[O.source];(O.type==="custom"||k.length)&&this.renderLayer(this,d[O.source],O,k)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:c.showOverdrawInspector?o.aM.black:o.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(A,O){let k=A.context,D=k.gl,j=((ae,ue,Y)=>({u_sky_color:ae.properties.get("sky-color"),u_horizon_color:ae.properties.get("horizon-color"),u_horizon:(ue.height/2+ue.getHorizon())*Y,u_sky_horizon_blend:ae.properties.get("sky-horizon-blend")*ue.height/2*Y}))(O,A.style.map.transform,A.pixelRatio),H=new Mt(D.LEQUAL,Mt.ReadWrite,[0,1]),Z=nr.disabled,ee=A.colorModeForRenderPass(),ne=A.useProgram("sky");if(!O.mesh){let ae=new o.aX;ae.emplaceBack(-1,-1),ae.emplaceBack(1,-1),ae.emplaceBack(1,1),ae.emplaceBack(-1,1);let ue=new o.aY;ue.emplaceBack(0,1,2),ue.emplaceBack(0,2,3),O.mesh=new wh(k.createVertexBuffer(ae,as.members),k.createIndexBuffer(ue),o.a0.simpleSegment(0,0,ae.length,ue.length))}ne.draw(k,D.TRIANGLES,H,Z,ee,Jt.disabled,j,void 0,"sky",O.mesh.vertexBuffer,O.mesh.indexBuffer,O.mesh.segments)}(this,this.style.sky),this._showOverdrawInspector=c.showOverdrawInspector,this.depthRangeFor3D=[0,1-(r._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=f.length-1;this.currentLayer>=0;this.currentLayer--){let A=this.style._layers[f[this.currentLayer]],O=d[A.source],k=m[A.source];this._renderTileClippingMasks(A,k),this.renderLayer(this,O,A,k)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<f.length;this.currentLayer++){let A=this.style._layers[f[this.currentLayer]],O=d[A.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(A))continue;let k=(A.type==="symbol"?I:w)[A.source];this._renderTileClippingMasks(A,m[A.source]),this.renderLayer(this,O,A,k)}if(this.options.showTileBoundaries){let A=function(O,k){let D=null,j=Object.values(O._layers).flatMap(ne=>ne.source&&!ne.isHidden(k)?[O.sourceCaches[ne.source]]:[]),H=j.filter(ne=>ne.getSource().type==="vector"),Z=j.filter(ne=>ne.getSource().type!=="vector"),ee=ne=>{(!D||D.getSource().maxzoom<ne.getSource().maxzoom)&&(D=ne)};return H.forEach(ne=>ee(ne)),D||Z.forEach(ne=>ee(ne)),D}(this.style,this.transform.zoom);A&&function(O,k,D){for(let j=0;j<D.length;j++)ky(O,k,D[j])}(this,A,A.getVisibleCoordinates())}this.options.showPadding&&function(A){let O=A.transform.padding;cu(A,A.transform.height-(O.top||0),3,pp),cu(A,O.bottom||0,3,Ut),Ry(A,O.left||0,3,xh),Ry(A,A.transform.width-(O.right||0),3,Ow);let k=A.transform.centerPoint;(function(D,j,H,Z){bh(D,j-1,H-10,2,20,Z),bh(D,j-10,H-1,20,2,Z)})(A,k.x,A.transform.height-k.y,Oy)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(r){if(!this.style||!this.style.map||!this.style.map.terrain)return;let c=this.terrainFacilitator.matrix,f=this.transform.modelViewProjectionMatrix,d=this.terrainFacilitator.dirty;d||(d=r?!o.a_(c,f):!o.a$(c,f)),d||(d=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),d&&(o.b0(c,f),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(m,w){let I=m.context,A=I.gl,O=Er.unblended,k=new Mt(A.LEQUAL,Mt.ReadWrite,[0,1]),D=w.getTerrainMesh(),j=w.sourceCache.getRenderableTiles(),H=m.useProgram("terrainDepth");I.bindFramebuffer.set(w.getFramebuffer("depth").framebuffer),I.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),I.clear({color:o.aM.transparent,depth:1});for(let Z of j){let ee=w.getTerrainData(Z.tileID),ne={u_matrix:m.transform.calculatePosMatrix(Z.tileID.toUnwrapped()),u_ele_delta:w.getMeshFrameDelta(m.transform.zoom)};H.draw(I,A.TRIANGLES,k,nr.disabled,O,Jt.backCCW,ne,ee,"terrain",D.vertexBuffer,D.indexBuffer,D.segments)}I.bindFramebuffer.set(null),I.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain),function(m,w){let I=m.context,A=I.gl,O=Er.unblended,k=new Mt(A.LEQUAL,Mt.ReadWrite,[0,1]),D=w.getTerrainMesh(),j=w.getCoordsTexture(),H=w.sourceCache.getRenderableTiles(),Z=m.useProgram("terrainCoords");I.bindFramebuffer.set(w.getFramebuffer("coords").framebuffer),I.viewport.set([0,0,m.width/devicePixelRatio,m.height/devicePixelRatio]),I.clear({color:o.aM.transparent,depth:1}),w.coordsIndex=[];for(let ee of H){let ne=w.getTerrainData(ee.tileID);I.activeTexture.set(A.TEXTURE0),A.bindTexture(A.TEXTURE_2D,j.texture);let ae={u_matrix:m.transform.calculatePosMatrix(ee.tileID.toUnwrapped()),u_terrain_coords_id:(255-w.coordsIndex.length)/255,u_texture:0,u_ele_delta:w.getMeshFrameDelta(m.transform.zoom)};Z.draw(I,A.TRIANGLES,k,nr.disabled,O,Jt.backCCW,ae,ne,"terrain",D.vertexBuffer,D.indexBuffer,D.segments),w.coordsIndex.push(ee.tileID.key)}I.bindFramebuffer.set(null),I.viewport.set([0,0,m.width,m.height])}(this,this.style.map.terrain))}renderLayer(r,c,f,d){if(!f.isHidden(this.transform.zoom)&&(f.type==="background"||f.type==="custom"||(d||[]).length))switch(this.id=f.id,f.type){case"symbol":(function(m,w,I,A,O){if(m.renderPass!=="translucent")return;let k=nr.disabled,D=m.colorModeForRenderPass();(I._unevaluatedLayout.hasValue("text-variable-anchor")||I._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(j,H,Z,ee,ne,ae,ue,Y,he){let de=H.transform,ye=ns(),Te=ne==="map",Me=ae==="map";for(let je of j){let Ke=ee.getTile(je),ze=Ke.getBucket(Z);if(!ze||!ze.text||!ze.text.segments.get().length)continue;let De=o.ag(ze.textSizeData,de.zoom),rt=Dt(Ke,1,H.transform.zoom),yt=So(je.posMatrix,Me,Te,H.transform,rt),Ne=Z.layout.get("icon-text-fit")!=="none"&&ze.hasIconData();if(De){let Ge=Math.pow(2,de.zoom-Ke.tileID.overscaledZ),mt=H.style.map.terrain?(It,Lt)=>H.style.map.terrain.getElevation(je,It,Lt):null,lr=ye.translatePosition(de,Ke,ue,Y);ou(ze,Te,Me,he,de,yt,je.posMatrix,Ge,De,Ne,ye,lr,je.toUnwrapped(),mt)}}}(A,m,I,w,I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),O),I.paint.get("icon-opacity").constantOr(1)!==0&&hp(m,w,I,A,!1,I.paint.get("icon-translate"),I.paint.get("icon-translate-anchor"),I.layout.get("icon-rotation-alignment"),I.layout.get("icon-pitch-alignment"),I.layout.get("icon-keep-upright"),k,D),I.paint.get("text-opacity").constantOr(1)!==0&&hp(m,w,I,A,!0,I.paint.get("text-translate"),I.paint.get("text-translate-anchor"),I.layout.get("text-rotation-alignment"),I.layout.get("text-pitch-alignment"),I.layout.get("text-keep-upright"),k,D),w.map.showCollisionBoxes&&($l(m,w,I,A,!0),$l(m,w,I,A,!1))})(r,c,f,d,this.style.placement.variableOffsets);break;case"circle":(function(m,w,I,A){if(m.renderPass!=="translucent")return;let O=I.paint.get("circle-opacity"),k=I.paint.get("circle-stroke-width"),D=I.paint.get("circle-stroke-opacity"),j=!I.layout.get("circle-sort-key").isConstant();if(O.constantOr(1)===0&&(k.constantOr(1)===0||D.constantOr(1)===0))return;let H=m.context,Z=H.gl,ee=m.depthModeForSublayer(0,Mt.ReadOnly),ne=nr.disabled,ae=m.colorModeForRenderPass(),ue=[];for(let Y=0;Y<A.length;Y++){let he=A[Y],de=w.getTile(he),ye=de.getBucket(I);if(!ye)continue;let Te=ye.programConfigurations.get(I.id),Me=m.useProgram("circle",Te),je=ye.layoutVertexBuffer,Ke=ye.indexBuffer,ze=m.style.map.terrain&&m.style.map.terrain.getTerrainData(he),De={programConfiguration:Te,program:Me,layoutVertexBuffer:je,indexBuffer:Ke,uniformValues:yw(m,he,de,I),terrainData:ze};if(j){let rt=ye.segments.get();for(let yt of rt)ue.push({segments:new o.a0([yt]),sortKey:yt.sortKey,state:De})}else ue.push({segments:ye.segments,sortKey:0,state:De})}j&&ue.sort((Y,he)=>Y.sortKey-he.sortKey);for(let Y of ue){let{programConfiguration:he,program:de,layoutVertexBuffer:ye,indexBuffer:Te,uniformValues:Me,terrainData:je}=Y.state;de.draw(H,Z.TRIANGLES,ee,ne,ae,Jt.disabled,Me,je,I.id,ye,Te,Y.segments,I.paint,m.transform.zoom,he)}})(r,c,f,d);break;case"heatmap":(function(m,w,I,A){if(I.paint.get("heatmap-opacity")===0)return;let O=m.context;if(m.style.map.terrain){for(let k of A){let D=w.getTile(k);w.hasRenderableParent(k)||(m.renderPass==="offscreen"?dp(m,D,I,k):m.renderPass==="translucent"&&fs(m,I,k))}O.viewport.set([0,0,m.width,m.height])}else m.renderPass==="offscreen"?function(k,D,j,H){let Z=k.context,ee=Z.gl,ne=nr.disabled,ae=new Er([ee.ONE,ee.ONE],o.aM.transparent,[!0,!0,!0,!0]);(function(ue,Y,he){let de=ue.gl;ue.activeTexture.set(de.TEXTURE1),ue.viewport.set([0,0,Y.width/4,Y.height/4]);let ye=he.heatmapFbos.get(o.aU);ye?(de.bindTexture(de.TEXTURE_2D,ye.colorAttachment.get()),ue.bindFramebuffer.set(ye.framebuffer)):(ye=Gl(ue,Y.width/4,Y.height/4),he.heatmapFbos.set(o.aU,ye))})(Z,k,j),Z.clear({color:o.aM.transparent});for(let ue=0;ue<H.length;ue++){let Y=H[ue];if(D.hasRenderableParent(Y))continue;let he=D.getTile(Y),de=he.getBucket(j);if(!de)continue;let ye=de.programConfigurations.get(j.id),Te=k.useProgram("heatmap",ye),{zoom:Me}=k.transform;Te.draw(Z,ee.TRIANGLES,Mt.disabled,ne,ae,Jt.disabled,$i(Y.posMatrix,he,Me,j.paint.get("heatmap-intensity")),null,j.id,de.layoutVertexBuffer,de.indexBuffer,de.segments,j.paint,k.transform.zoom,ye)}Z.viewport.set([0,0,k.width,k.height])}(m,w,I,A):m.renderPass==="translucent"&&function(k,D){let j=k.context,H=j.gl;j.setColorMode(k.colorModeForRenderPass());let Z=D.heatmapFbos.get(o.aU);Z&&(j.activeTexture.set(H.TEXTURE0),H.bindTexture(H.TEXTURE_2D,Z.colorAttachment.get()),j.activeTexture.set(H.TEXTURE1),Hl(j,D).bind(H.LINEAR,H.CLAMP_TO_EDGE),k.useProgram("heatmapTexture").draw(j,H.TRIANGLES,Mt.disabled,nr.disabled,k.colorModeForRenderPass(),Jt.disabled,ch(k,D,0,1),null,D.id,k.viewportBuffer,k.quadTriangleIndexBuffer,k.viewportSegments,D.paint,k.transform.zoom))}(m,I)})(r,c,f,d);break;case"line":(function(m,w,I,A){if(m.renderPass!=="translucent")return;let O=I.paint.get("line-opacity"),k=I.paint.get("line-width");if(O.constantOr(1)===0||k.constantOr(1)===0)return;let D=m.depthModeForSublayer(0,Mt.ReadOnly),j=m.colorModeForRenderPass(),H=I.paint.get("line-dasharray"),Z=I.paint.get("line-pattern"),ee=Z.constantOr(1),ne=I.paint.get("line-gradient"),ae=I.getCrossfadeParameters(),ue=ee?"linePattern":H?"lineSDF":ne?"lineGradient":"line",Y=m.context,he=Y.gl,de=!0;for(let ye of A){let Te=w.getTile(ye);if(ee&&!Te.patternsLoaded())continue;let Me=Te.getBucket(I);if(!Me)continue;let je=Me.programConfigurations.get(I.id),Ke=m.context.program.get(),ze=m.useProgram(ue,je),De=de||ze.program!==Ke,rt=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ye),yt=Z.constantOr(null);if(yt&&Te.imageAtlas){let mt=Te.imageAtlas,lr=mt.patternPositions[yt.to.toString()],It=mt.patternPositions[yt.from.toString()];lr&&It&&je.setConstantPatternPositions(lr,It)}let Ne=rt?ye:null,Ge=ee?nu(m,Te,I,ae,Ne):H?_w(m,Te,I,H,ae,Ne):ne?my(m,Te,I,Me.lineClipsArray.length,Ne):fh(m,Te,I,Ne);if(ee)Y.activeTexture.set(he.TEXTURE0),Te.imageAtlasTexture.bind(he.LINEAR,he.CLAMP_TO_EDGE),je.updatePaintBuffers(ae);else if(H&&(De||m.lineAtlas.dirty))Y.activeTexture.set(he.TEXTURE0),m.lineAtlas.bind(Y);else if(ne){let mt=Me.gradients[I.id],lr=mt.texture;if(I.gradientVersion!==mt.version){let It=256;if(I.stepInterpolant){let Lt=w.getSource().maxzoom,cr=ye.canonical.z===Lt?Math.ceil(1<<m.transform.maxZoom-ye.canonical.z):1;It=o.ac(o.aV(Me.maxLineLength/o.X*1024*cr),256,Y.maxTextureSize)}mt.gradient=o.aW({expression:I.gradientExpression(),evaluationKey:"lineProgress",resolution:It,image:mt.gradient||void 0,clips:Me.lineClipsArray}),mt.texture?mt.texture.update(mt.gradient):mt.texture=new Qe(Y,mt.gradient,he.RGBA),mt.version=I.gradientVersion,lr=mt.texture}Y.activeTexture.set(he.TEXTURE0),lr.bind(I.stepInterpolant?he.NEAREST:he.LINEAR,he.CLAMP_TO_EDGE)}ze.draw(Y,he.TRIANGLES,D,m.stencilModeForClipping(ye),j,Jt.disabled,Ge,rt,I.id,Me.layoutVertexBuffer,Me.indexBuffer,Me.segments,I.paint,m.transform.zoom,je,Me.layoutVertexBuffer2),de=!1}})(r,c,f,d);break;case"fill":(function(m,w,I,A){let O=I.paint.get("fill-color"),k=I.paint.get("fill-opacity");if(k.constantOr(1)===0)return;let D=m.colorModeForRenderPass(),j=I.paint.get("fill-pattern"),H=m.opaquePassEnabledForLayer()&&!j.constantOr(1)&&O.constantOr(o.aM.transparent).a===1&&k.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===H){let Z=m.depthModeForSublayer(1,m.renderPass==="opaque"?Mt.ReadWrite:Mt.ReadOnly);Wl(m,w,I,A,Z,D,!1)}if(m.renderPass==="translucent"&&I.paint.get("fill-antialias")){let Z=m.depthModeForSublayer(I.getPaintProperty("fill-outline-color")?2:0,Mt.ReadOnly);Wl(m,w,I,A,Z,D,!0)}})(r,c,f,d);break;case"fill-extrusion":(function(m,w,I,A){let O=I.paint.get("fill-extrusion-opacity");if(O!==0&&m.renderPass==="translucent"){let k=new Mt(m.context.gl.LEQUAL,Mt.ReadWrite,m.depthRangeFor3D);if(O!==1||I.paint.get("fill-extrusion-pattern").constantOr(1))_h(m,w,I,A,k,nr.disabled,Er.disabled),_h(m,w,I,A,k,m.stencilModeFor3D(),m.colorModeForRenderPass());else{let D=m.colorModeForRenderPass();_h(m,w,I,A,k,nr.disabled,D)}}})(r,c,f,d);break;case"hillshade":(function(m,w,I,A){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;let O=m.context,k=m.depthModeForSublayer(0,Mt.ReadOnly),D=m.colorModeForRenderPass(),[j,H]=m.renderPass==="translucent"?m.stencilConfigForOverlap(A):[{},A];for(let Z of H){let ee=w.getTile(Z);ee.needsHillshadePrepare!==void 0&&ee.needsHillshadePrepare&&m.renderPass==="offscreen"?lu(m,ee,I,k,nr.disabled,D):m.renderPass==="translucent"&&uu(m,Z,ee,I,k,j[Z.overscaledZ],D)}O.viewport.set([0,0,m.width,m.height])})(r,c,f,d);break;case"raster":(function(m,w,I,A){if(m.renderPass!=="translucent"||I.paint.get("raster-opacity")===0||!A.length)return;let O=m.context,k=O.gl,D=w.getSource(),j=m.useProgram("raster"),H=m.colorModeForRenderPass(),[Z,ee]=D instanceof Ka?[{},A]:m.stencilConfigForOverlap(A),ne=ee[ee.length-1].overscaledZ,ae=!m.options.moving;for(let ue of ee){let Y=m.depthModeForSublayer(ue.overscaledZ-ne,I.paint.get("raster-opacity")===1?Mt.ReadWrite:Mt.ReadOnly,k.LESS),he=w.getTile(ue);he.registerFadeDuration(I.paint.get("raster-fade-duration"));let de=w.findLoadedParent(ue,0),ye=w.findLoadedSibling(ue),Te=My(he,de||ye||null,w,I,m.transform,m.style.map.terrain),Me,je,Ke=I.paint.get("raster-resampling")==="nearest"?k.NEAREST:k.LINEAR;O.activeTexture.set(k.TEXTURE0),he.texture.bind(Ke,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),O.activeTexture.set(k.TEXTURE1),de?(de.texture.bind(Ke,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),Me=Math.pow(2,de.tileID.overscaledZ-he.tileID.overscaledZ),je=[he.tileID.canonical.x*Me%1,he.tileID.canonical.y*Me%1]):he.texture.bind(Ke,k.CLAMP_TO_EDGE,k.LINEAR_MIPMAP_NEAREST),he.texture.useMipmap&&O.extTextureFilterAnisotropic&&m.transform.pitch>20&&k.texParameterf(k.TEXTURE_2D,O.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,O.extTextureFilterAnisotropicMax);let ze=m.style.map.terrain&&m.style.map.terrain.getTerrainData(ue),De=ze?ue:null,rt=De?De.posMatrix:m.transform.calculatePosMatrix(ue.toUnwrapped(),ae),yt=xw(rt,je||[0,0],Me||1,Te,I);D instanceof Ka?j.draw(O,k.TRIANGLES,Y,nr.disabled,H,Jt.disabled,yt,ze,I.id,D.boundsBuffer,m.quadTriangleIndexBuffer,D.boundsSegments):j.draw(O,k.TRIANGLES,Y,Z[ue.overscaledZ],H,Jt.disabled,yt,ze,I.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}})(r,c,f,d);break;case"background":(function(m,w,I,A){let O=I.paint.get("background-color"),k=I.paint.get("background-opacity");if(k===0)return;let D=m.context,j=D.gl,H=m.transform,Z=H.tileSize,ee=I.paint.get("background-pattern");if(m.isPatternMissing(ee))return;let ne=!ee&&O.a===1&&k===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==ne)return;let ae=nr.disabled,ue=m.depthModeForSublayer(0,ne==="opaque"?Mt.ReadWrite:Mt.ReadOnly),Y=m.colorModeForRenderPass(),he=m.useProgram(ee?"backgroundPattern":"background"),de=A||H.coveringTiles({tileSize:Z,terrain:m.style.map.terrain});ee&&(D.activeTexture.set(j.TEXTURE0),m.imageManager.bind(m.context));let ye=I.getCrossfadeParameters();for(let Te of de){let Me=A?Te.posMatrix:m.transform.calculatePosMatrix(Te.toUnwrapped()),je=ee?ep(Me,k,m,ee,{tileID:Te,tileSize:Z},ye):dh(Me,k,O),Ke=m.style.map.terrain&&m.style.map.terrain.getTerrainData(Te);he.draw(D,j.TRIANGLES,ue,ae,Y,Jt.disabled,je,Ke,I.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}})(r,0,f,d);break;case"custom":(function(m,w,I){let A=m.context,O=I.implementation;if(m.renderPass==="offscreen"){let k=O.prerender;k&&(m.setCustomLayerDefaults(),A.setColorMode(m.colorModeForRenderPass()),k.call(O,A.gl,m.transform.customLayerMatrix()),A.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),A.setColorMode(m.colorModeForRenderPass()),A.setStencilMode(nr.disabled);let k=O.renderingMode==="3d"?new Mt(m.context.gl.LEQUAL,Mt.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,Mt.ReadOnly);A.setDepthMode(k),O.render(A.gl,m.transform.customLayerMatrix(),{farZ:m.transform.farZ,nearZ:m.transform.nearZ,fov:m.transform._fov,modelViewProjectionMatrix:m.transform.modelViewProjectionMatrix,projectionMatrix:m.transform.projectionMatrix}),A.setDirty(),m.setBaseState(),A.bindFramebuffer.set(null)}})(r,0,f);}}translatePosMatrix(r,c,f,d,m){if(!f[0]&&!f[1])return r;let w=m?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(w){let O=Math.sin(w),k=Math.cos(w);f=[f[0]*k-f[1]*O,f[0]*O+f[1]*k]}let I=[m?f[0]:Dt(c,f[0],this.transform.zoom),m?f[1]:Dt(c,f[1],this.transform.zoom),0],A=new Float32Array(16);return o.J(A,r,I),A}saveTileTexture(r){let c=this._tileTextures[r.size[0]];c?c.push(r):this._tileTextures[r.size[0]]=[r]}getTileTexture(r){let c=this._tileTextures[r];return c&&c.length>0?c.pop():null}isPatternMissing(r){if(!r)return!1;if(!r.from||!r.to)return!0;let c=this.imageManager.getPattern(r.from.toString()),f=this.imageManager.getPattern(r.to.toString());return!c||!f}useProgram(r,c){this.cache=this.cache||{};let f=r+(c?c.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[f]||(this.cache[f]=new Jd(this.context,qo[r],c,tp[r],this._showOverdrawInspector,this.style.map.terrain)),this.cache[f]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){let r=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(r.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new Qe(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){let{drawingBufferWidth:r,drawingBufferHeight:c}=this.context.gl;return this.width!==r||this.height!==c}}class hu{constructor(r,c){this.points=r,this.planes=c}static fromInvProjectionMatrix(r,c,f){let d=Math.pow(2,f),m=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(I=>{let A=1/(I=o.af([],I,r))[3]/c*d;return o.b1(I,I,[A,A,1/I[3],A])}),w=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(I=>{let A=function(j,H){var Z=H[0],ee=H[1],ne=H[2],ae=Z*Z+ee*ee+ne*ne;return ae>0&&(ae=1/Math.sqrt(ae)),j[0]=H[0]*ae,j[1]=H[1]*ae,j[2]=H[2]*ae,j}([],function(j,H,Z){var ee=H[0],ne=H[1],ae=H[2],ue=Z[0],Y=Z[1],he=Z[2];return j[0]=ne*he-ae*Y,j[1]=ae*ue-ee*he,j[2]=ee*Y-ne*ue,j}([],et([],m[I[0]],m[I[1]]),et([],m[I[2]],m[I[1]]))),O=-((k=A)[0]*(D=m[I[1]])[0]+k[1]*D[1]+k[2]*D[2]);var k,D;return A.concat(O)});return new hu(m,w)}}class fu{constructor(r,c){this.min=r,this.max=c,this.center=function(f,d,m){return f[0]=.5*d[0],f[1]=.5*d[1],f[2]=.5*d[2],f}([],function(f,d,m){return f[0]=d[0]+m[0],f[1]=d[1]+m[1],f[2]=d[2]+m[2],f}([],this.min,this.max))}quadrant(r){let c=[r%2==0,r<2],f=ge(this.min),d=ge(this.max);for(let m=0;m<c.length;m++)f[m]=c[m]?this.min[m]:this.center[m],d[m]=c[m]?this.center[m]:this.max[m];return d[2]=this.max[2],new fu(f,d)}distanceX(r){return Math.max(Math.min(this.max[0],r[0]),this.min[0])-r[0]}distanceY(r){return Math.max(Math.min(this.max[1],r[1]),this.min[1])-r[1]}intersects(r){let c=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]],f=!0;for(let d=0;d<r.planes.length;d++){let m=r.planes[d],w=0;for(let I=0;I<c.length;I++)o.b2(m,c[I])>=0&&w++;if(w===0)return 0;w!==c.length&&(f=!1)}if(f)return 2;for(let d=0;d<3;d++){let m=Number.MAX_VALUE,w=-Number.MAX_VALUE;for(let I=0;I<r.points.length;I++){let A=r.points[I][d]-this.min[d];m=Math.min(m,A),w=Math.max(w,A)}if(w<0||m>this.max[d]-this.min[d])return 0}return 1}}class du{constructor(r=0,c=0,f=0,d=0){if(isNaN(r)||r<0||isNaN(c)||c<0||isNaN(f)||f<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=r,this.bottom=c,this.left=f,this.right=d}interpolate(r,c,f){return c.top!=null&&r.top!=null&&(this.top=o.y.number(r.top,c.top,f)),c.bottom!=null&&r.bottom!=null&&(this.bottom=o.y.number(r.bottom,c.bottom,f)),c.left!=null&&r.left!=null&&(this.left=o.y.number(r.left,c.left,f)),c.right!=null&&r.right!=null&&(this.right=o.y.number(r.right,c.right,f)),this}getCenter(r,c){let f=o.ac((this.left+r-this.right)/2,0,r),d=o.ac((this.top+c-this.bottom)/2,0,c);return new o.P(f,d)}equals(r){return this.top===r.top&&this.bottom===r.bottom&&this.left===r.left&&this.right===r.right}clone(){return new du(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}let mp=85.051129;class pu{constructor(r,c,f,d,m){this.tileSize=512,this._renderWorldCopies=m===void 0||!!m,this._minZoom=r||0,this._maxZoom=c||22,this._minPitch=f==null?0:f,this._maxPitch=d==null?60:d,this.setMaxBounds(),this.width=0,this.height=0,this._center=new o.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new du,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){let r=new pu(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return r.apply(this),r}apply(r){this.tileSize=r.tileSize,this.latRange=r.latRange,this.lngRange=r.lngRange,this.width=r.width,this.height=r.height,this._center=r._center,this._elevation=r._elevation,this.minElevationForCurrentTile=r.minElevationForCurrentTile,this.zoom=r.zoom,this.angle=r.angle,this._fov=r._fov,this._pitch=r._pitch,this._unmodified=r._unmodified,this._edgeInsets=r._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(r){this._minZoom!==r&&(this._minZoom=r,this.zoom=Math.max(this.zoom,r))}get maxZoom(){return this._maxZoom}set maxZoom(r){this._maxZoom!==r&&(this._maxZoom=r,this.zoom=Math.min(this.zoom,r))}get minPitch(){return this._minPitch}set minPitch(r){this._minPitch!==r&&(this._minPitch=r,this.pitch=Math.max(this.pitch,r))}get maxPitch(){return this._maxPitch}set maxPitch(r){this._maxPitch!==r&&(this._maxPitch=r,this.pitch=Math.min(this.pitch,r))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(r){r===void 0?r=!0:r===null&&(r=!1),this._renderWorldCopies=r}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(r){let c=-o.b3(r,-180,180)*Math.PI/180;this.angle!==c&&(this._unmodified=!1,this.angle=c,this._calcMatrices(),this.rotationMatrix=function(){var f=new o.A(4);return o.A!=Float32Array&&(f[1]=0,f[2]=0),f[0]=1,f[3]=1,f}(),function(f,d,m){var w=d[0],I=d[1],A=d[2],O=d[3],k=Math.sin(m),D=Math.cos(m);f[0]=w*D+A*k,f[1]=I*D+O*k,f[2]=w*-k+A*D,f[3]=I*-k+O*D}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(r){let c=o.ac(r,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==c&&(this._unmodified=!1,this._pitch=c,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(r){r=Math.max(.01,Math.min(60,r)),this._fov!==r&&(this._unmodified=!1,this._fov=r/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(r){let c=Math.min(Math.max(r,this.minZoom),this.maxZoom);this._zoom!==c&&(this._unmodified=!1,this._zoom=c,this.tileZoom=Math.max(0,Math.floor(c)),this.scale=this.zoomScale(c),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(r){r.lat===this._center.lat&&r.lng===this._center.lng||(this._unmodified=!1,this._center=r,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(r){r!==this._elevation&&(this._elevation=r,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(r){this._edgeInsets.equals(r)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,r,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(r){return this._edgeInsets.equals(r)}interpolatePadding(r,c,f){this._unmodified=!1,this._edgeInsets.interpolate(r,c,f),this._constrain(),this._calcMatrices()}coveringZoomLevel(r){let c=(r.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/r.tileSize));return Math.max(0,c)}getVisibleUnwrappedCoordinates(r){let c=[new o.b4(0,r)];if(this._renderWorldCopies){let f=this.pointCoordinate(new o.P(0,0)),d=this.pointCoordinate(new o.P(this.width,0)),m=this.pointCoordinate(new o.P(this.width,this.height)),w=this.pointCoordinate(new o.P(0,this.height)),I=Math.floor(Math.min(f.x,d.x,m.x,w.x)),A=Math.floor(Math.max(f.x,d.x,m.x,w.x)),O=1;for(let k=I-O;k<=A+O;k++)k!==0&&c.push(new o.b4(k,r))}return c}coveringTiles(r){var c,f;let d=this.coveringZoomLevel(r),m=d;if(r.minzoom!==void 0&&d<r.minzoom)return[];r.maxzoom!==void 0&&d>r.maxzoom&&(d=r.maxzoom);let w=this.pointCoordinate(this.getCameraPoint()),I=o.Z.fromLngLat(this.center),A=Math.pow(2,d),O=[A*w.x,A*w.y,0],k=[A*I.x,A*I.y,0],D=hu.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,d),j=r.minzoom||0;!r.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(j=d);let H=r.terrain?2/Math.min(this.tileSize,r.tileSize)*this.tileSize:3,Z=Y=>({aabb:new fu([Y*A,0,0],[(Y+1)*A,A,0]),zoom:0,x:0,y:0,wrap:Y,fullyVisible:!1}),ee=[],ne=[],ae=d,ue=r.reparseOverscaled?m:d;if(this._renderWorldCopies)for(let Y=1;Y<=3;Y++)ee.push(Z(-Y)),ee.push(Z(Y));for(ee.push(Z(0));ee.length>0;){let Y=ee.pop(),he=Y.x,de=Y.y,ye=Y.fullyVisible;if(!ye){let ze=Y.aabb.intersects(D);if(ze===0)continue;ye=ze===2}let Te=r.terrain?O:k,Me=Y.aabb.distanceX(Te),je=Y.aabb.distanceY(Te),Ke=Math.max(Math.abs(Me),Math.abs(je));if(Y.zoom===ae||Ke>H+(1<<ae-Y.zoom)-2&&Y.zoom>=j){let ze=ae-Y.zoom,De=O[0]-.5-(he<<ze),rt=O[1]-.5-(de<<ze);ne.push({tileID:new o.S(Y.zoom===ae?ue:Y.zoom,Y.wrap,Y.zoom,he,de),distanceSq:Le([k[0]-.5-he,k[1]-.5-de]),tileDistanceToCamera:Math.sqrt(De*De+rt*rt)})}else for(let ze=0;ze<4;ze++){let De=(he<<1)+ze%2,rt=(de<<1)+(ze>>1),yt=Y.zoom+1,Ne=Y.aabb.quadrant(ze);if(r.terrain){let Ge=new o.S(yt,Y.wrap,yt,De,rt),mt=r.terrain.getMinMaxElevation(Ge),lr=(c=mt.minElevation)!==null&&c!==void 0?c:this.elevation,It=(f=mt.maxElevation)!==null&&f!==void 0?f:this.elevation;Ne=new fu([Ne.min[0],Ne.min[1],lr],[Ne.max[0],Ne.max[1],It])}ee.push({aabb:Ne,zoom:yt,x:De,y:rt,wrap:Y.wrap,fullyVisible:ye})}}return ne.sort((Y,he)=>Y.distanceSq-he.distanceSq).map(Y=>Y.tileID)}resize(r,c){this.width=r,this.height=c,this.pixelsToGLUnits=[2/r,-2/c],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(r){return Math.pow(2,r)}scaleZoom(r){return Math.log(r)/Math.LN2}project(r){let c=o.ac(r.lat,-85.051129,mp);return new o.P(o.O(r.lng)*this.worldSize,o.Q(c)*this.worldSize)}unproject(r){return new o.Z(r.x/this.worldSize,r.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(r){let c=this.elevation,f=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,d=this.pointLocation(this.centerPoint,r),m=r.getElevationForLngLatZoom(d,this.tileZoom);if(!(this.elevation-m))return;let w=f+c-m,I=Math.cos(this._pitch)*this.cameraToCenterDistance/w/o.b5(1,d.lat),A=this.scaleZoom(I/this.tileSize);this._elevation=m,this._center=d,this.zoom=A}setLocationAtPoint(r,c){let f=this.pointCoordinate(c),d=this.pointCoordinate(this.centerPoint),m=this.locationCoordinate(r),w=new o.Z(m.x-(f.x-d.x),m.y-(f.y-d.y));this.center=this.coordinateLocation(w),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(r,c){return c?this.coordinatePoint(this.locationCoordinate(r),c.getElevationForLngLatZoom(r,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(r))}pointLocation(r,c){return this.coordinateLocation(this.pointCoordinate(r,c))}locationCoordinate(r){return o.Z.fromLngLat(r)}coordinateLocation(r){return r&&r.toLngLat()}pointCoordinate(r,c){if(c){let j=c.pointCoordinate(r);if(j!=null)return j}let f=[r.x,r.y,0,1],d=[r.x,r.y,1,1];o.af(f,f,this.pixelMatrixInverse),o.af(d,d,this.pixelMatrixInverse);let m=f[3],w=d[3],I=f[1]/m,A=d[1]/w,O=f[2]/m,k=d[2]/w,D=O===k?0:(0-O)/(k-O);return new o.Z(o.y.number(f[0]/m,d[0]/w,D)/this.worldSize,o.y.number(I,A,D)/this.worldSize)}coordinatePoint(r,c=0,f=this.pixelMatrix){let d=[r.x*this.worldSize,r.y*this.worldSize,c,1];return o.af(d,d,f),new o.P(d[0]/d[3],d[1]/d[3])}getBounds(){let r=Math.max(0,this.height/2-this.getHorizon());return new Se().extend(this.pointLocation(new o.P(0,r))).extend(this.pointLocation(new o.P(this.width,r))).extend(this.pointLocation(new o.P(this.width,this.height))).extend(this.pointLocation(new o.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Se([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(r){r?(this.lngRange=[r.getWest(),r.getEast()],this.latRange=[r.getSouth(),r.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,mp])}calculateTileMatrix(r){let c=r.canonical,f=this.worldSize/this.zoomScale(c.z),d=c.x+Math.pow(2,c.z)*r.wrap,m=o.an(new Float64Array(16));return o.J(m,m,[d*f,c.y*f,0]),o.K(m,m,[f/o.X,f/o.X,1]),m}calculatePosMatrix(r,c=!1){let f=r.key,d=c?this._alignedPosMatrixCache:this._posMatrixCache;if(d[f])return d[f];let m=this.calculateTileMatrix(r);return o.L(m,c?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,m),d[f]=new Float32Array(m),d[f]}calculateFogMatrix(r){let c=r.key,f=this._fogMatrixCache;if(f[c])return f[c];let d=this.calculateTileMatrix(r);return o.L(d,this.fogMatrix,d),f[c]=new Float32Array(d),f[c]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(r,c){c=o.ac(+c,this.minZoom,this.maxZoom);let f={center:new o.N(r.lng,r.lat),zoom:c},d=this.lngRange;if(!this._renderWorldCopies&&d===null){let Y=179.9999999999;d=[-Y,Y]}let m=this.tileSize*this.zoomScale(f.zoom),w=0,I=m,A=0,O=m,k=0,D=0,{x:j,y:H}=this.size;if(this.latRange){let Y=this.latRange;w=o.Q(Y[1])*m,I=o.Q(Y[0])*m,I-w<H&&(k=H/(I-w))}d&&(A=o.b3(o.O(d[0])*m,0,m),O=o.b3(o.O(d[1])*m,0,m),O<A&&(O+=m),O-A<j&&(D=j/(O-A)));let{x:Z,y:ee}=this.project.call({worldSize:m},r),ne,ae,ue=Math.max(D||0,k||0);if(ue){let Y=new o.P(D?(O+A)/2:Z,k?(I+w)/2:ee);return f.center=this.unproject.call({worldSize:m},Y).wrap(),f.zoom+=this.scaleZoom(ue),f}if(this.latRange){let Y=H/2;ee-Y<w&&(ae=w+Y),ee+Y>I&&(ae=I-Y)}if(d){let Y=(A+O)/2,he=Z;this._renderWorldCopies&&(he=o.b3(Z,Y-m/2,Y+m/2));let de=j/2;he-de<A&&(ne=A+de),he+de>O&&(ne=O-de)}if(ne!==void 0||ae!==void 0){let Y=new o.P(ne!=null?ne:Z,ae!=null?ae:ee);f.center=this.unproject.call({worldSize:m},Y).wrap()}return f}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;let r=this._unmodified,{center:c,zoom:f}=this.getConstrained(this.center,this.zoom);this.center=c,this.zoom=f,this._unmodified=r,this._constraining=!1}_calcMatrices(){if(!this.height)return;let r=this.centerOffset,c=this.point.x,f=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=o.b5(1,this.center.lat)*this.worldSize;let d=o.an(new Float64Array(16));o.K(d,d,[this.width/2,-this.height/2,1]),o.J(d,d,[1,-1,0]),this.labelPlaneMatrix=d,d=o.an(new Float64Array(16)),o.K(d,d,[1,-1,1]),o.J(d,d,[-1,-1,0]),o.K(d,d,[2/this.width,2/this.height,1]),this.glCoordMatrix=d;let m=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),w=Math.min(this.elevation,this.minElevationForCurrentTile),I=m-w*this._pixelPerMeter/Math.cos(this._pitch),A=w<0?I:m,O=Math.PI/2+this._pitch,k=this._fov*(.5+r.y/this.height),D=Math.sin(k)*A/Math.sin(o.ac(Math.PI-O-k,.01,Math.PI-.01)),j=this.getHorizon(),H=2*Math.atan(j/this.cameraToCenterDistance)*(.5+r.y/(2*j)),Z=Math.sin(H)*A/Math.sin(o.ac(Math.PI-O-H,.01,Math.PI-.01)),ee=Math.min(D,Z);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*ee+A),this.nearZ=this.height/50,d=new Float64Array(16),o.b6(d,this._fov,this.width/this.height,this.nearZ,this.farZ),d[8]=2*-r.x/this.width,d[9]=2*r.y/this.height,this.projectionMatrix=o.ae(d),o.K(d,d,[1,-1,1]),o.J(d,d,[0,0,-this.cameraToCenterDistance]),o.b7(d,d,this._pitch),o.ad(d,d,this.angle),o.J(d,d,[-c,-f,0]),this.mercatorMatrix=o.K([],d,[this.worldSize,this.worldSize,this.worldSize]),o.K(d,d,[1,1,this._pixelPerMeter]),this.pixelMatrix=o.L(new Float64Array(16),this.labelPlaneMatrix,d),o.J(d,d,[0,0,-this.elevation]),this.modelViewProjectionMatrix=d,this.invModelViewProjectionMatrix=o.as([],d),this.fogMatrix=new Float64Array(16),o.b6(this.fogMatrix,this._fov,this.width/this.height,m,this.farZ),this.fogMatrix[8]=2*-r.x/this.width,this.fogMatrix[9]=2*r.y/this.height,o.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),o.b7(this.fogMatrix,this.fogMatrix,this._pitch),o.ad(this.fogMatrix,this.fogMatrix,this.angle),o.J(this.fogMatrix,this.fogMatrix,[-c,-f,0]),o.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),o.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=o.L(new Float64Array(16),this.labelPlaneMatrix,d);let ne=this.width%2/2,ae=this.height%2/2,ue=Math.cos(this.angle),Y=Math.sin(this.angle),he=c-Math.round(c)+ue*ne+Y*ae,de=f-Math.round(f)+ue*ae+Y*ne,ye=new Float64Array(d);if(o.J(ye,ye,[he>.5?he-1:he,de>.5?de-1:de,0]),this.alignedModelViewProjectionMatrix=ye,d=o.as(new Float64Array(16),this.pixelMatrix),!d)throw new Error("failed to invert matrix");this.pixelMatrixInverse=d,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;let r=this.pointCoordinate(new o.P(0,0)),c=[r.x*this.worldSize,r.y*this.worldSize,0,1];return o.af(c,c,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){let r=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(0,r))}getCameraQueryGeometry(r){let c=this.getCameraPoint();if(r.length===1)return[r[0],c];{let f=c.x,d=c.y,m=c.x,w=c.y;for(let I of r)f=Math.min(f,I.x),d=Math.min(d,I.y),m=Math.max(m,I.x),w=Math.max(w,I.y);return[new o.P(f,d),new o.P(m,d),new o.P(m,w),new o.P(f,w),new o.P(f,d)]}}lngLatToCameraDepth(r,c){let f=this.locationCoordinate(r),d=[f.x*this.worldSize,f.y*this.worldSize,c,1];return o.af(d,d,this.modelViewProjectionMatrix),d[2]/d[3]}}function Zl(v,r){let c,f=!1,d=null,m=null,w=()=>{d=null,f&&(v.apply(m,c),d=setTimeout(w,r),f=!1)};return(...I)=>(f=!0,m=this,c=I,d||w(),d)}class qh{constructor(r){this._getCurrentHash=()=>{let c=window.location.hash.replace("#","");if(this._hashName){let f;return c.split("&").map(d=>d.split("=")).forEach(d=>{d[0]===this._hashName&&(f=d)}),(f&&f[1]||"").split("/")}return c.split("/")},this._onHashChange=()=>{let c=this._getCurrentHash();if(c.length>=3&&!c.some(f=>isNaN(f))){let f=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(c[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+c[2],+c[1]],zoom:+c[0],bearing:f,pitch:+(c[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{let c=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,c)},this._removeHash=()=>{let c=this._getCurrentHash();if(c.length===0)return;let f=c.join("/"),d=f;d.split("&").length>0&&(d=d.split("&")[0]),this._hashName&&(d=`${this._hashName}=${f}`);let m=window.location.hash.replace(d,"");m.startsWith("#&")?m=m.slice(0,1)+m.slice(2):m==="#"&&(m="");let w=window.location.href.replace(/(#.+)?$/,m);w=w.replace("&&","&"),window.history.replaceState(window.history.state,null,w)},this._updateHash=Zl(this._updateHashUnthrottled,300),this._hashName=r&&encodeURIComponent(r)}addTo(r){return this._map=r,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(r){let c=this._map.getCenter(),f=Math.round(100*this._map.getZoom())/100,d=Math.ceil((f*Math.LN2+Math.log(512/360/.5))/Math.LN10),m=Math.pow(10,d),w=Math.round(c.lng*m)/m,I=Math.round(c.lat*m)/m,A=this._map.getBearing(),O=this._map.getPitch(),k="";if(k+=r?`/${w}/${I}/${f}`:`${f}/${I}/${w}`,(A||O)&&(k+="/"+Math.round(10*A)/10),O&&(k+=`/${Math.round(O)}`),this._hashName){let D=this._hashName,j=!1,H=window.location.hash.slice(1).split("&").map(Z=>{let ee=Z.split("=")[0];return ee===D?(j=!0,`${ee}=${k}`):Z}).filter(Z=>Z);return j||H.push(`${D}=${k}`),`#${H.join("&")}`}return`#${k}`}}let Ih={linearity:.3,easing:o.b8(0,0,.3,1)},vp=o.e({deceleration:2500,maxSpeed:1400},Ih),Rw=o.e({deceleration:20,maxSpeed:1400},Ih),Ly=o.e({deceleration:1e3,maxSpeed:360},Ih),Eh=o.e({deceleration:1e3,maxSpeed:90},Ih);class gp{constructor(r){this._map=r,this.clear()}clear(){this._inertiaBuffer=[]}record(r){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:T.now(),settings:r})}_drainInertiaBuffer(){let r=this._inertiaBuffer,c=T.now();for(;r.length>0&&c-r[0].time>160;)r.shift()}_onMoveEnd(r){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;let c={zoom:0,bearing:0,pitch:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(let{settings:m}of this._inertiaBuffer)c.zoom+=m.zoomDelta||0,c.bearing+=m.bearingDelta||0,c.pitch+=m.pitchDelta||0,m.panDelta&&c.pan._add(m.panDelta),m.around&&(c.around=m.around),m.pinchAround&&(c.pinchAround=m.pinchAround);let f=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,d={};if(c.pan.mag()){let m=Xl(c.pan.mag(),f,o.e({},vp,r||{}));d.offset=c.pan.mult(m.amount/c.pan.mag()),d.center=this._map.transform.center,Kl(d,m)}if(c.zoom){let m=Xl(c.zoom,f,Rw);d.zoom=this._map.transform.zoom+m.amount,Kl(d,m)}if(c.bearing){let m=Xl(c.bearing,f,Ly);d.bearing=this._map.transform.bearing+o.ac(m.amount,-179,179),Kl(d,m)}if(c.pitch){let m=Xl(c.pitch,f,Eh);d.pitch=this._map.transform.pitch+m.amount,Kl(d,m)}if(d.zoom||d.bearing){let m=c.pinchAround===void 0?c.around:c.pinchAround;d.around=m?this._map.unproject(m):this._map.getCenter()}return this.clear(),o.e(d,{noMoveStart:!0})}}function Kl(v,r){(!v.duration||v.duration<r.duration)&&(v.duration=r.duration,v.easing=r.easing)}function Xl(v,r,c){let{maxSpeed:f,linearity:d,deceleration:m}=c,w=o.ac(v*d/(r/1e3),-f,f),I=Math.abs(w)/(m*d);return{easing:c.easing,duration:1e3*I,amount:w*(I/2)}}class li extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f,d={}){let m=C.mousePos(c.getCanvas(),f),w=c.unproject(m);super(r,o.e({point:m,lngLat:w,originalEvent:f},d)),this._defaultPrevented=!1,this.target=c}}class ds extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){let d=r==="touchend"?f.changedTouches:f.touches,m=C.touchPos(c.getCanvasContainer(),d),w=m.map(A=>c.unproject(A)),I=m.reduce((A,O,k,D)=>A.add(O.div(D.length)),new o.P(0,0));super(r,{points:m,point:I,lngLats:w,lngLat:c.unproject(I),originalEvent:f}),this._defaultPrevented=!1}}class zy extends o.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(r,c,f){super(r,{originalEvent:f}),this._defaultPrevented=!1}}class Fy{constructor(r,c){this._map=r,this._clickTolerance=c.clickTolerance}reset(){delete this._mousedownPos}wheel(r){return this._firePreventable(new zy(r.type,this._map,r))}mousedown(r,c){return this._mousedownPos=c,this._firePreventable(new li(r.type,this._map,r))}mouseup(r){this._map.fire(new li(r.type,this._map,r))}click(r,c){this._mousedownPos&&this._mousedownPos.dist(c)>=this._clickTolerance||this._map.fire(new li(r.type,this._map,r))}dblclick(r){return this._firePreventable(new li(r.type,this._map,r))}mouseover(r){this._map.fire(new li(r.type,this._map,r))}mouseout(r){this._map.fire(new li(r.type,this._map,r))}touchstart(r){return this._firePreventable(new ds(r.type,this._map,r))}touchmove(r){this._map.fire(new ds(r.type,this._map,r))}touchend(r){this._map.fire(new ds(r.type,this._map,r))}touchcancel(r){this._map.fire(new ds(r.type,this._map,r))}_firePreventable(r){if(this._map.fire(r),r.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Tr{constructor(r){this._map=r}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(r){this._map.fire(new li(r.type,this._map,r))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new li("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(r){this._delayContextMenu?this._contextMenuEvent=r:this._ignoreContextMenu||this._map.fire(new li(r.type,this._map,r)),this._map.listens("contextmenu")&&r.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Yn{constructor(r){this._map=r}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(r){return this.transform.pointLocation(o.P.convert(r),this._map.terrain)}}class ln{constructor(r,c){this._map=r,this._tr=new Yn(r),this._el=r.getCanvasContainer(),this._container=r.getContainer(),this._clickTolerance=c.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(r,c){this.isEnabled()&&r.shiftKey&&r.button===0&&(C.disableDrag(),this._startPos=this._lastPos=c,this._active=!0)}mousemoveWindow(r,c){if(!this._active)return;let f=c;if(this._lastPos.equals(f)||!this._box&&f.dist(this._startPos)<this._clickTolerance)return;let d=this._startPos;this._lastPos=f,this._box||(this._box=C.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",r));let m=Math.min(d.x,f.x),w=Math.max(d.x,f.x),I=Math.min(d.y,f.y),A=Math.max(d.y,f.y);C.setTransform(this._box,`translate(${m}px,${I}px)`),this._box.style.width=w-m+"px",this._box.style.height=A-I+"px"}mouseupWindow(r,c){if(!this._active||r.button!==0)return;let f=this._startPos,d=c;if(this.reset(),C.suppressClick(),f.x!==d.x||f.y!==d.y)return this._map.fire(new o.k("boxzoomend",{originalEvent:r})),{cameraAnimation:m=>m.fitScreenCoordinates(f,d,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",r)}keydown(r){this._active&&r.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",r))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(C.remove(this._box),this._box=null),C.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(r,c){return this._map.fire(new o.k(r,{originalEvent:c}))}}function Yl(v,r){if(v.length!==r.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${r.length}`);let c={};for(let f=0;f<v.length;f++)c[v[f].identifier]=r[f];return c}class yp{constructor(r){this.reset(),this.numTouches=r.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(r,c,f){(this.centroid||f.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=r.timeStamp),f.length===this.numTouches&&(this.centroid=function(d){let m=new o.P(0,0);for(let w of d)m._add(w);return m.div(d.length)}(c),this.touches=Yl(f,c)))}touchmove(r,c,f){if(this.aborted||!this.centroid)return;let d=Yl(f,c);for(let m in this.touches){let w=d[m];(!w||w.dist(this.touches[m])>30)&&(this.aborted=!0)}}touchend(r,c,f){if((!this.centroid||r.timeStamp-this.startTime>500)&&(this.aborted=!0),f.length===0){let d=!this.aborted&&this.centroid;if(this.reset(),d)return d}}}class Th{constructor(r){this.singleTap=new yp(r),this.numTaps=r.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(r,c,f){this.singleTap.touchstart(r,c,f)}touchmove(r,c,f){this.singleTap.touchmove(r,c,f)}touchend(r,c,f){let d=this.singleTap.touchend(r,c,f);if(d){let m=r.timeStamp-this.lastTime<500,w=!this.lastTap||this.lastTap.dist(d)<30;if(m&&w||this.reset(),this.count++,this.lastTime=r.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}}}class mu{constructor(r){this._tr=new Yn(r),this._zoomIn=new Th({numTouches:1,numTaps:2}),this._zoomOut=new Th({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(r,c,f){this._zoomIn.touchstart(r,c,f),this._zoomOut.touchstart(r,c,f)}touchmove(r,c,f){this._zoomIn.touchmove(r,c,f),this._zoomOut.touchmove(r,c,f)}touchend(r,c,f){let d=this._zoomIn.touchend(r,c,f),m=this._zoomOut.touchend(r,c,f),w=this._tr;return d?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:w.zoom+1,around:w.unproject(d)},{originalEvent:r})}):m?(this._active=!0,r.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:I=>I.easeTo({duration:300,zoom:w.zoom-1,around:w.unproject(m)},{originalEvent:r})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ja{constructor(r){this._enabled=!!r.enable,this._moveStateManager=r.moveStateManager,this._clickTolerance=r.clickTolerance||1,this._moveFunction=r.move,this._activateOnStart=!!r.activateOnStart,r.assignEvents(this),this.reset()}reset(r){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(r)}_move(...r){let c=this._moveFunction(...r);if(c.bearingDelta||c.pitchDelta||c.around||c.panDelta)return this._active=!0,c}dragStart(r,c){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(r)&&(this._moveStateManager.startMove(r),this._lastPoint=c.length?c[0]:c,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(r,c){if(!this.isEnabled())return;let f=this._lastPoint;if(!f)return;if(r.preventDefault(),!this._moveStateManager.isValidMoveEvent(r))return void this.reset(r);let d=c.length?c[0]:c;return!this._moved&&d.dist(f)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=d,this._move(f,d))}dragEnd(r){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(r)&&(this._moved&&C.suppressClick(),this.reset(r))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}let _p={0:1,2:2};class Ah{constructor(r){this._correctEvent=r.checkCorrectEvent}startMove(r){let c=C.mouseButton(r);this._eventButton=c}endMove(r){delete this._eventButton}isValidStartEvent(r){return this._correctEvent(r)}isValidMoveEvent(r){return!function(c,f){let d=_p[f];return c.buttons===void 0||(c.buttons&d)!==d}(r,this._eventButton)}isValidEndEvent(r){return C.mouseButton(r)===this._eventButton}}class xp{constructor(){this._firstTouch=void 0}_isOneFingerTouch(r){return r.targetTouches.length===1}_isSameTouchEvent(r){return r.targetTouches[0].identifier===this._firstTouch}startMove(r){this._firstTouch=r.targetTouches[0].identifier}endMove(r){delete this._firstTouch}isValidStartEvent(r){return this._isOneFingerTouch(r)}isValidMoveEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}isValidEndEvent(r){return this._isOneFingerTouch(r)&&this._isSameTouchEvent(r)}}let Ph=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=r=>{r.preventDefault()}},bp=({enable:v,clickTolerance:r,bearingDegreesPerPixelMoved:c=.8})=>{let f=new Ah({checkCorrectEvent:d=>C.mouseButton(d)===0&&d.ctrlKey||C.mouseButton(d)===2});return new Ja({clickTolerance:r,move:(d,m)=>({bearingDelta:(m.x-d.x)*c}),moveStateManager:f,enable:v,assignEvents:Ph})},wp=({enable:v,clickTolerance:r,pitchDegreesPerPixelMoved:c=-.5})=>{let f=new Ah({checkCorrectEvent:d=>C.mouseButton(d)===0&&d.ctrlKey||C.mouseButton(d)===2});return new Ja({clickTolerance:r,move:(d,m)=>({pitchDelta:(m.y-d.y)*c}),moveStateManager:f,enable:v,assignEvents:Ph})};class ps{constructor(r,c){this._clickTolerance=r.clickTolerance||1,this._map=c,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(r){return r<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(r,c,f){return this._calculateTransform(r,c,f)}touchmove(r,c,f){if(this._active){if(!this._shouldBePrevented(f.length))return r.preventDefault(),this._calculateTransform(r,c,f);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",r)}}touchend(r,c,f){this._calculateTransform(r,c,f),this._active&&this._shouldBePrevented(f.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(r,c,f){f.length>0&&(this._active=!0);let d=Yl(f,c),m=new o.P(0,0),w=new o.P(0,0),I=0;for(let O in d){let k=d[O],D=this._touches[O];D&&(m._add(k),w._add(k.sub(D)),I++,d[O]=k)}if(this._touches=d,this._shouldBePrevented(I)||!w.mag())return;let A=w.div(I);return this._sum._add(A),this._sum.mag()<this._clickTolerance?void 0:{around:m.div(I),panDelta:A}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ch{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(r,c,f){this._firstTwoTouches||f.length<2||(this._firstTwoTouches=[f[0].identifier,f[1].identifier],this._start([c[0],c[1]]))}touchmove(r,c,f){if(!this._firstTwoTouches)return;r.preventDefault();let[d,m]=this._firstTwoTouches,w=Jl(f,c,d),I=Jl(f,c,m);if(!w||!I)return;let A=this._aroundCenter?null:w.add(I).div(2);return this._move([w,I],A,r)}touchend(r,c,f){if(!this._firstTwoTouches)return;let[d,m]=this._firstTwoTouches,w=Jl(f,c,d),I=Jl(f,c,m);w&&I||(this._active&&C.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(r){this._enabled=!0,this._aroundCenter=!!r&&r.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Jl(v,r,c){for(let f=0;f<v.length;f++)if(v[f].identifier===c)return r[f]}function Sp(v,r){return Math.log(v/r)/Math.LN2}class qp extends Ch{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(r){this._startDistance=this._distance=r[0].dist(r[1])}_move(r,c){let f=this._distance;if(this._distance=r[0].dist(r[1]),this._active||!(Math.abs(Sp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Sp(this._distance,f),pinchAround:c}}}function Ip(v,r){return 180*v.angleWith(r)/Math.PI}class Ep extends Ch{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(r){this._startVector=this._vector=r[0].sub(r[1]),this._minDiameter=r[0].dist(r[1])}_move(r,c,f){let d=this._vector;if(this._vector=r[0].sub(r[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ip(this._vector,d),pinchAround:c}}_isBelowThreshold(r){this._minDiameter=Math.min(this._minDiameter,r.mag());let c=25/(Math.PI*this._minDiameter)*360,f=Ip(r,this._startVector);return Math.abs(f)<c}}function Mh(v){return Math.abs(v.y)>Math.abs(v.x)}class vu extends Ch{constructor(r){super(),this._currentTouchCount=0,this._map=r}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(r,c,f){super.touchstart(r,c,f),this._currentTouchCount=f.length}_start(r){this._lastPoints=r,Mh(r[0].sub(r[1]))&&(this._valid=!1)}_move(r,c,f){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;let d=r[0].sub(this._lastPoints[0]),m=r[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(d,m,f.timeStamp),this._valid?(this._lastPoints=r,this._active=!0,{pitchDelta:(d.y+m.y)/2*-.5}):void 0}gestureBeginsVertically(r,c,f){if(this._valid!==void 0)return this._valid;let d=r.mag()>=2,m=c.mag()>=2;if(!d&&!m)return;if(!d||!m)return this._firstMove===void 0&&(this._firstMove=f),f-this._firstMove<100&&void 0;let w=r.y>0==c.y>0;return Mh(r)&&Mh(c)&&w}}let Ny={panStep:100,bearingStep:15,pitchStep:10};class qn{constructor(r){this._tr=new Yn(r);let c=Ny;this._panStep=c.panStep,this._bearingStep=c.bearingStep,this._pitchStep=c.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(r){if(r.altKey||r.ctrlKey||r.metaKey)return;let c=0,f=0,d=0,m=0,w=0;switch(r.keyCode){case 61:case 107:case 171:case 187:c=1;break;case 189:case 109:case 173:c=-1;break;case 37:r.shiftKey?f=-1:(r.preventDefault(),m=-1);break;case 39:r.shiftKey?f=1:(r.preventDefault(),m=1);break;case 38:r.shiftKey?d=1:(r.preventDefault(),w=-1);break;case 40:r.shiftKey?d=-1:(r.preventDefault(),w=1);break;default:return;}return this._rotationDisabled&&(f=0,d=0),{cameraAnimation:I=>{let A=this._tr;I.easeTo({duration:300,easeId:"keyboardHandler",easing:xa,zoom:c?Math.round(A.zoom)+c*(r.shiftKey?2:1):A.zoom,bearing:A.bearing+f*this._bearingStep,pitch:A.pitch+d*this._pitchStep,offset:[-m*this._panStep,-w*this._panStep],center:A.center},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function xa(v){return v*(2-v)}let Tp=4.000244140625;class Jn{constructor(r,c){this._onTimeout=f=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(f)},this._map=r,this._tr=new Yn(r),this._triggerRenderFrame=c,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(r){this._defaultZoomRate=r}setWheelZoomRate(r){this._wheelZoomRate=r}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(r){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!r&&r.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(r){return!!this._map.cooperativeGestures.isEnabled()&&!(r.ctrlKey||this._map.cooperativeGestures.isBypassed(r))}wheel(r){if(!this.isEnabled())return;if(this._shouldBePrevented(r))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",r);let c=r.deltaMode===WheelEvent.DOM_DELTA_LINE?40*r.deltaY:r.deltaY,f=T.now(),d=f-(this._lastWheelEventTime||0);this._lastWheelEventTime=f,c!==0&&c%Tp==0?this._type="wheel":c!==0&&Math.abs(c)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=c,this._timeout=setTimeout(this._onTimeout,40,r)):this._type||(this._type=Math.abs(d*c)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,c+=this._lastValue)),r.shiftKey&&c&&(c/=4),this._type&&(this._lastWheelEvent=r,this._delta-=c,this._active||this._start(r)),r.preventDefault()}_start(r){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);let c=C.mousePos(this._map.getCanvas(),r),f=this._tr;this._around=c.y>f.transform.height/2-f.transform.getHorizon()?o.N.convert(this._aroundCenter?f.center:f.unproject(c)):o.N.convert(f.center),this._aroundPoint=f.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;let r=this._tr.transform;if(this._delta!==0){let A=this._type==="wheel"&&Math.abs(this._delta)>Tp?this._wheelZoomRate:this._defaultZoomRate,O=2/(1+Math.exp(-Math.abs(this._delta*A)));this._delta<0&&O!==0&&(O=1/O);let k=typeof this._targetZoom=="number"?r.zoomScale(this._targetZoom):r.scale;this._targetZoom=Math.min(r.maxZoom,Math.max(r.minZoom,r.scaleZoom(k*O))),this._type==="wheel"&&(this._startZoom=r.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}let c=typeof this._targetZoom=="number"?this._targetZoom:r.zoom,f=this._startZoom,d=this._easing,m,w=!1,I=T.now()-this._lastWheelEventTime;if(this._type==="wheel"&&f&&d&&I){let A=Math.min(I/200,1),O=d(A);m=o.y.number(f,c,O),A<1?this._frameId||(this._frameId=!0):w=!0}else m=c,w=!0;return this._active=!0,w&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!w,zoomDelta:m-r.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(r){let c=o.b9;if(this._prevEase){let f=this._prevEase,d=(T.now()-f.start)/f.duration,m=f.easing(d+.01)-f.easing(d),w=.27/Math.sqrt(m*m+1e-4)*.01,I=Math.sqrt(.0729-w*w);c=o.b8(w,I,.25,1)}return this._prevEase={start:T.now(),duration:r,easing:c},c}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ms{constructor(r,c){this._clickZoom=r,this._tapZoom=c}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class kw{constructor(r){this._tr=new Yn(r),this.reset()}reset(){this._active=!1}dblclick(r,c){return r.preventDefault(),{cameraAnimation:f=>{f.easeTo({duration:300,zoom:this._tr.zoom+(r.shiftKey?-1:1),around:this._tr.unproject(c)},{originalEvent:r})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Dw{constructor(){this._tap=new Th({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(r,c,f){if(!this._swipePoint)if(this._tapTime){let d=c[0],m=r.timeStamp-this._tapTime<500,w=this._tapPoint.dist(d)<30;m&&w?f.length>0&&(this._swipePoint=d,this._swipeTouch=f[0].identifier):this.reset()}else this._tap.touchstart(r,c,f)}touchmove(r,c,f){if(this._tapTime){if(this._swipePoint){if(f[0].identifier!==this._swipeTouch)return;let d=c[0],m=d.y-this._swipePoint.y;return this._swipePoint=d,r.preventDefault(),this._active=!0,{zoomDelta:m/128}}}else this._tap.touchmove(r,c,f)}touchend(r,c,f){if(this._tapTime)this._swipePoint&&f.length===0&&this.reset();else{let d=this._tap.touchend(r,c,f);d&&(this._tapTime=r.timeStamp,this._tapPoint=d)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class By{constructor(r,c,f){this._el=r,this._mousePan=c,this._touchPan=f}enable(r){this._inertiaOptions=r||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class jy{constructor(r,c,f){this._pitchWithRotate=r.pitchWithRotate,this._mouseRotate=c,this._mousePitch=f}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ap{constructor(r,c,f,d){this._el=r,this._touchZoom=c,this._touchRotate=f,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0}enable(r){this._touchZoom.enable(r),this._rotationDisabled||this._touchRotate.enable(r),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class gu{constructor(r,c){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=r,this._options=c,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;let r=this._map.getCanvasContainer();r.classList.add("maplibregl-cooperative-gestures"),this._container=C.create("div","maplibregl-cooperative-gesture-screen",r);let c=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(c=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));let f=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),d=document.createElement("div");d.className="maplibregl-desktop-message",d.textContent=c,this._container.appendChild(d);let m=document.createElement("div");m.className="maplibregl-mobile-message",m.textContent=f,this._container.appendChild(m),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(C.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(r){return r[this._bypassKey]}notifyGestureBlocked(r,c){this._enabled&&(this._map.fire(new o.k("cooperativegestureprevented",{gestureType:r,originalEvent:c})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}let In=v=>v.zoom||v.drag||v.pitch||v.rotate;class Ye extends o.k{}function Oh(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Pp{constructor(r,c){this.handleWindowEvent=d=>{this.handleEvent(d,`${d.type}Window`)},this.handleEvent=(d,m)=>{if(d.type==="blur")return void this.stop(!0);this._updatingCamera=!0;let w=d.type==="renderFrame"?void 0:d,I={needsRenderFrame:!1},A={},O={},k=d.touches,D=k?this._getMapTouches(k):void 0,j=D?C.touchPos(this._map.getCanvas(),D):C.mousePos(this._map.getCanvas(),d);for(let{handlerName:ee,handler:ne,allowed:ae}of this._handlers){if(!ne.isEnabled())continue;let ue;this._blockedByActive(O,ae,ee)?ne.reset():ne[m||d.type]&&(ue=ne[m||d.type](d,j,D),this.mergeHandlerResult(I,A,ue,ee,w),ue&&ue.needsRenderFrame&&this._triggerRenderFrame()),(ue||ne.isActive())&&(O[ee]=ne)}let H={};for(let ee in this._previousActiveHandlers)O[ee]||(H[ee]=w);this._previousActiveHandlers=O,(Object.keys(H).length||Oh(I))&&(this._changes.push([I,A,H]),this._triggerRenderFrame()),(Object.keys(O).length||Oh(I))&&this._map._stop(!0),this._updatingCamera=!1;let{cameraAnimation:Z}=I;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))},this._map=r,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gp(r),this._bearingSnap=c.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(c);let f=this._el;this._listeners=[[f,"touchstart",{passive:!0}],[f,"touchmove",{passive:!1}],[f,"touchend",void 0],[f,"touchcancel",void 0],[f,"mousedown",void 0],[f,"mousemove",void 0],[f,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[f,"mouseover",void 0],[f,"mouseout",void 0],[f,"dblclick",void 0],[f,"click",void 0],[f,"keydown",{capture:!1}],[f,"keyup",void 0],[f,"wheel",{passive:!1}],[f,"contextmenu",void 0],[window,"blur",void 0]];for(let[d,m,w]of this._listeners)C.addEventListener(d,m,d===document?this.handleWindowEvent:this.handleEvent,w)}destroy(){for(let[r,c,f]of this._listeners)C.removeEventListener(r,c,r===document?this.handleWindowEvent:this.handleEvent,f)}_addDefaultHandlers(r){let c=this._map,f=c.getCanvasContainer();this._add("mapEvent",new Fy(c,r));let d=c.boxZoom=new ln(c,r);this._add("boxZoom",d),r.interactive&&r.boxZoom&&d.enable();let m=c.cooperativeGestures=new gu(c,r.cooperativeGestures);this._add("cooperativeGestures",m),r.cooperativeGestures&&m.enable();let w=new mu(c),I=new kw(c);c.doubleClickZoom=new ms(I,w),this._add("tapZoom",w),this._add("clickZoom",I),r.interactive&&r.doubleClickZoom&&c.doubleClickZoom.enable();let A=new Dw;this._add("tapDragZoom",A);let O=c.touchPitch=new vu(c);this._add("touchPitch",O),r.interactive&&r.touchPitch&&c.touchPitch.enable(r.touchPitch);let k=bp(r),D=wp(r);c.dragRotate=new jy(r,k,D),this._add("mouseRotate",k,["mousePitch"]),this._add("mousePitch",D,["mouseRotate"]),r.interactive&&r.dragRotate&&c.dragRotate.enable();let j=(({enable:ue,clickTolerance:Y})=>{let he=new Ah({checkCorrectEvent:de=>C.mouseButton(de)===0&&!de.ctrlKey});return new Ja({clickTolerance:Y,move:(de,ye)=>({around:ye,panDelta:ye.sub(de)}),activateOnStart:!0,moveStateManager:he,enable:ue,assignEvents:Ph})})(r),H=new ps(r,c);c.dragPan=new By(f,j,H),this._add("mousePan",j),this._add("touchPan",H,["touchZoom","touchRotate"]),r.interactive&&r.dragPan&&c.dragPan.enable(r.dragPan);let Z=new Ep,ee=new qp;c.touchZoomRotate=new Ap(f,ee,Z,A),this._add("touchRotate",Z,["touchPan","touchZoom"]),this._add("touchZoom",ee,["touchPan","touchRotate"]),r.interactive&&r.touchZoomRotate&&c.touchZoomRotate.enable(r.touchZoomRotate);let ne=c.scrollZoom=new Jn(c,()=>this._triggerRenderFrame());this._add("scrollZoom",ne,["mousePan"]),r.interactive&&r.scrollZoom&&c.scrollZoom.enable(r.scrollZoom);let ae=c.keyboard=new qn(c);this._add("keyboard",ae),r.interactive&&r.keyboard&&c.keyboard.enable(),this._add("blockableMapEvent",new Tr(c))}_add(r,c,f){this._handlers.push({handlerName:r,handler:c,allowed:f}),this._handlersById[r]=c}stop(r){if(!this._updatingCamera){for(let{handler:c}of this._handlers)c.reset();this._inertia.clear(),this._fireEvents({},{},r),this._changes=[]}}isActive(){for(let{handler:r}of this._handlers)if(r.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!In(this._eventsInProgress)||this.isZooming()}_blockedByActive(r,c,f){for(let d in r)if(d!==f&&(!c||c.indexOf(d)<0))return!0;return!1}_getMapTouches(r){let c=[];for(let f of r)this._el.contains(f.target)&&c.push(f);return c}mergeHandlerResult(r,c,f,d,m){if(!f)return;o.e(r,f);let w={handlerName:d,originalEvent:f.originalEvent||m};f.zoomDelta!==void 0&&(c.zoom=w),f.panDelta!==void 0&&(c.drag=w),f.pitchDelta!==void 0&&(c.pitch=w),f.bearingDelta!==void 0&&(c.rotate=w)}_applyChanges(){let r={},c={},f={};for(let[d,m,w]of this._changes)d.panDelta&&(r.panDelta=(r.panDelta||new o.P(0,0))._add(d.panDelta)),d.zoomDelta&&(r.zoomDelta=(r.zoomDelta||0)+d.zoomDelta),d.bearingDelta&&(r.bearingDelta=(r.bearingDelta||0)+d.bearingDelta),d.pitchDelta&&(r.pitchDelta=(r.pitchDelta||0)+d.pitchDelta),d.around!==void 0&&(r.around=d.around),d.pinchAround!==void 0&&(r.pinchAround=d.pinchAround),d.noInertia&&(r.noInertia=d.noInertia),o.e(c,m),o.e(f,w);this._updateMapTransform(r,c,f),this._changes=[]}_updateMapTransform(r,c,f){let d=this._map,m=d._getTransformForUpdate(),w=d.terrain;if(!(Oh(r)||w&&this._terrainMovement))return this._fireEvents(c,f,!0);let{panDelta:I,zoomDelta:A,bearingDelta:O,pitchDelta:k,around:D,pinchAround:j}=r;j!==void 0&&(D=j),d._stop(!0),D=D||d.transform.centerPoint;let H=m.pointLocation(I?D.sub(I):D);O&&(m.bearing+=O),k&&(m.pitch+=k),A&&(m.zoom+=A),w?this._terrainMovement||!c.drag&&!c.zoom?c.drag&&this._terrainMovement?m.center=m.pointLocation(m.centerPoint.sub(I)):m.setLocationAtPoint(H,D):(this._terrainMovement=!0,this._map._elevationFreeze=!0,m.setLocationAtPoint(H,D)):m.setLocationAtPoint(H,D),d._applyUpdatedTransform(m),this._map._update(),r.noInertia||this._inertia.record(r),this._fireEvents(c,f,!0)}_fireEvents(r,c,f){let d=In(this._eventsInProgress),m=In(r),w={};for(let D in r){let{originalEvent:j}=r[D];this._eventsInProgress[D]||(w[`${D}start`]=j),this._eventsInProgress[D]=r[D]}!d&&m&&this._fireEvent("movestart",m.originalEvent);for(let D in w)this._fireEvent(D,w[D]);m&&this._fireEvent("move",m.originalEvent);for(let D in r){let{originalEvent:j}=r[D];this._fireEvent(D,j)}let I={},A;for(let D in this._eventsInProgress){let{handlerName:j,originalEvent:H}=this._eventsInProgress[D];this._handlersById[j].isActive()||(delete this._eventsInProgress[D],A=c[j]||H,I[`${D}end`]=A)}for(let D in I)this._fireEvent(D,I[D]);let O=In(this._eventsInProgress),k=(d||m)&&!O;if(k&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;let D=this._map._getTransformForUpdate();D.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(D)}if(f&&k){this._updatingCamera=!0;let D=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),j=H=>H!==0&&-this._bearingSnap<H&&H<this._bearingSnap;!D||!D.essential&&T.prefersReducedMotion?(this._map.fire(new o.k("moveend",{originalEvent:A})),j(this._map.getBearing())&&this._map.resetNorth()):(j(D.bearing||this._map.getBearing())&&(D.bearing=0),D.freezeElevation=!0,this._map.easeTo(D,{originalEvent:A})),this._updatingCamera=!1}}_fireEvent(r,c){this._map.fire(new o.k(r,c?{originalEvent:c}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(r=>{delete this._frameId,this.handleEvent(new Ye("renderFrame",{timeStamp:r})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Uy extends o.E{constructor(r,c){super(),this._renderFrameCallback=()=>{let f=Math.min((T.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(f)),f<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=r,this._bearingSnap=c.bearingSnap,this.on("moveend",()=>{delete this._requestedCameraState})}getCenter(){return new o.N(this.transform.center.lng,this.transform.center.lat)}setCenter(r,c){return this.jumpTo({center:r},c)}panBy(r,c,f){return r=o.P.convert(r).mult(-1),this.panTo(this.transform.center,o.e({offset:r},c),f)}panTo(r,c,f){return this.easeTo(o.e({center:r},c),f)}getZoom(){return this.transform.zoom}setZoom(r,c){return this.jumpTo({zoom:r},c),this}zoomTo(r,c,f){return this.easeTo(o.e({zoom:r},c),f)}zoomIn(r,c){return this.zoomTo(this.getZoom()+1,r,c),this}zoomOut(r,c){return this.zoomTo(this.getZoom()-1,r,c),this}getBearing(){return this.transform.bearing}setBearing(r,c){return this.jumpTo({bearing:r},c),this}getPadding(){return this.transform.padding}setPadding(r,c){return this.jumpTo({padding:r},c),this}rotateTo(r,c,f){return this.easeTo(o.e({bearing:r},c),f)}resetNorth(r,c){return this.rotateTo(0,o.e({duration:1e3},r),c),this}resetNorthPitch(r,c){return this.easeTo(o.e({bearing:0,pitch:0,duration:1e3},r),c),this}snapToNorth(r,c){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(r,c):this}getPitch(){return this.transform.pitch}setPitch(r,c){return this.jumpTo({pitch:r},c),this}cameraForBounds(r,c){r=Se.convert(r).adjustAntiMeridian();let f=c&&c.bearing||0;return this._cameraForBoxAndBearing(r.getNorthWest(),r.getSouthEast(),f,c)}_cameraForBoxAndBearing(r,c,f,d){let m={top:0,bottom:0,right:0,left:0};if(typeof(d=o.e({padding:m,offset:[0,0],maxZoom:this.transform.maxZoom},d)).padding=="number"){let ze=d.padding;d.padding={top:ze,bottom:ze,right:ze,left:ze}}d.padding=o.e(m,d.padding);let w=this.transform,I=w.padding,A=new Se(r,c),O=w.project(A.getNorthWest()),k=w.project(A.getNorthEast()),D=w.project(A.getSouthEast()),j=w.project(A.getSouthWest()),H=o.ba(-f),Z=O.rotate(H),ee=k.rotate(H),ne=D.rotate(H),ae=j.rotate(H),ue=new o.P(Math.max(Z.x,ee.x,ae.x,ne.x),Math.max(Z.y,ee.y,ae.y,ne.y)),Y=new o.P(Math.min(Z.x,ee.x,ae.x,ne.x),Math.min(Z.y,ee.y,ae.y,ne.y)),he=ue.sub(Y),de=(w.width-(I.left+I.right+d.padding.left+d.padding.right))/he.x,ye=(w.height-(I.top+I.bottom+d.padding.top+d.padding.bottom))/he.y;if(ye<0||de<0)return void o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");let Te=Math.min(w.scaleZoom(w.scale*Math.min(de,ye)),d.maxZoom),Me=o.P.convert(d.offset),je=new o.P((d.padding.left-d.padding.right)/2,(d.padding.top-d.padding.bottom)/2).rotate(o.ba(f)),Ke=Me.add(je).mult(w.scale/w.zoomScale(Te));return{center:w.unproject(O.add(D).div(2).sub(Ke)),zoom:Te,bearing:f}}fitBounds(r,c,f){return this._fitInternal(this.cameraForBounds(r,c),c,f)}fitScreenCoordinates(r,c,f,d,m){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(o.P.convert(r)),this.transform.pointLocation(o.P.convert(c)),f,d),d,m)}_fitInternal(r,c,f){return r?(delete(c=o.e(r,c)).padding,c.linear?this.easeTo(c,f):this.flyTo(c,f)):this}jumpTo(r,c){this.stop();let f=this._getTransformForUpdate(),d=!1,m=!1,w=!1;return"zoom"in r&&f.zoom!==+r.zoom&&(d=!0,f.zoom=+r.zoom),r.center!==void 0&&(f.center=o.N.convert(r.center)),"bearing"in r&&f.bearing!==+r.bearing&&(m=!0,f.bearing=+r.bearing),"pitch"in r&&f.pitch!==+r.pitch&&(w=!0,f.pitch=+r.pitch),r.padding==null||f.isPaddingEqual(r.padding)||(f.padding=r.padding),this._applyUpdatedTransform(f),this.fire(new o.k("movestart",c)).fire(new o.k("move",c)),d&&this.fire(new o.k("zoomstart",c)).fire(new o.k("zoom",c)).fire(new o.k("zoomend",c)),m&&this.fire(new o.k("rotatestart",c)).fire(new o.k("rotate",c)).fire(new o.k("rotateend",c)),w&&this.fire(new o.k("pitchstart",c)).fire(new o.k("pitch",c)).fire(new o.k("pitchend",c)),this.fire(new o.k("moveend",c))}calculateCameraOptionsFromTo(r,c,f,d=0){let m=o.Z.fromLngLat(r,c),w=o.Z.fromLngLat(f,d),I=w.x-m.x,A=w.y-m.y,O=w.z-m.z,k=Math.hypot(I,A,O);if(k===0)throw new Error("Can't calculate camera options with same From and To");let D=Math.hypot(I,A),j=this.transform.scaleZoom(this.transform.cameraToCenterDistance/k/this.transform.tileSize),H=180*Math.atan2(I,-A)/Math.PI,Z=180*Math.acos(D/k)/Math.PI;return Z=O<0?90-Z:90+Z,{center:w.toLngLat(),zoom:j,pitch:Z,bearing:H}}easeTo(r,c){var f;this._stop(!1,r.easeId),((r=o.e({offset:[0,0],duration:500,easing:o.b9},r)).animate===!1||!r.essential&&T.prefersReducedMotion)&&(r.duration=0);let d=this._getTransformForUpdate(),m=d.zoom,w=d.bearing,I=d.pitch,A=d.padding,O="bearing"in r?this._normalizeBearing(r.bearing,w):w,k="pitch"in r?+r.pitch:I,D="padding"in r?r.padding:d.padding,j=o.P.convert(r.offset),H=d.centerPoint.add(j),Z=d.pointLocation(H),{center:ee,zoom:ne}=d.getConstrained(o.N.convert(r.center||Z),(f=r.zoom)!==null&&f!==void 0?f:m);this._normalizeCenter(ee,d);let ae=d.project(Z),ue=d.project(ee).sub(ae),Y=d.zoomScale(ne-m),he,de;r.around&&(he=o.N.convert(r.around),de=d.locationPoint(he));let ye={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ne!==m,this._rotating=this._rotating||w!==O,this._pitching=this._pitching||k!==I,this._padding=!d.isPaddingEqual(D),this._easeId=r.easeId,this._prepareEase(c,r.noMoveStart,ye),this.terrain&&this._prepareElevation(ee),this._ease(Te=>{if(this._zooming&&(d.zoom=o.y.number(m,ne,Te)),this._rotating&&(d.bearing=o.y.number(w,O,Te)),this._pitching&&(d.pitch=o.y.number(I,k,Te)),this._padding&&(d.interpolatePadding(A,D,Te),H=d.centerPoint.add(j)),this.terrain&&!r.freezeElevation&&this._updateElevation(Te),he)d.setLocationAtPoint(he,de);else{let Me=d.zoomScale(d.zoom-m),je=ne>m?Math.min(2,Y):Math.max(.5,Y),Ke=Math.pow(je,1-Te),ze=d.unproject(ae.add(ue.mult(Te*Ke)).mult(Me));d.setLocationAtPoint(d.renderWorldCopies?ze.wrap():ze,H)}this._applyUpdatedTransform(d),this._fireMoveEvents(c)},Te=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c,Te)},r),this}_prepareEase(r,c,f={}){this._moving=!0,c||f.moving||this.fire(new o.k("movestart",r)),this._zooming&&!f.zooming&&this.fire(new o.k("zoomstart",r)),this._rotating&&!f.rotating&&this.fire(new o.k("rotatestart",r)),this._pitching&&!f.pitching&&this.fire(new o.k("pitchstart",r))}_prepareElevation(r){this._elevationCenter=r,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(r,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(r){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);let c=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(r<1&&c!==this._elevationTarget){let f=this._elevationTarget-this._elevationStart;this._elevationStart+=r*(f-(c-(f*r+this._elevationStart))/(1-r)),this._elevationTarget=c}this.transform.elevation=o.y.number(this._elevationStart,this._elevationTarget,r)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(r){let c=r.getCameraPosition(),f=this.terrain.getElevationForLngLatZoom(c.lngLat,r.zoom);if(c.altitude<f){let d=this.calculateCameraOptionsFromTo(c.lngLat,f,r.center,r.elevation);return{pitch:d.pitch,zoom:d.zoom}}return{}}_applyUpdatedTransform(r){let c=[];if(this.terrain&&c.push(d=>this._elevateCameraIfInsideTerrain(d)),this.transformCameraUpdate&&c.push(d=>this.transformCameraUpdate(d)),!c.length)return;let f=r.clone();for(let d of c){let m=f.clone(),{center:w,zoom:I,pitch:A,bearing:O,elevation:k}=d(m);w&&(m.center=w),I!==void 0&&(m.zoom=I),A!==void 0&&(m.pitch=A),O!==void 0&&(m.bearing=O),k!==void 0&&(m.elevation=k),f.apply(m)}this.transform.apply(f)}_fireMoveEvents(r){this.fire(new o.k("move",r)),this._zooming&&this.fire(new o.k("zoom",r)),this._rotating&&this.fire(new o.k("rotate",r)),this._pitching&&this.fire(new o.k("pitch",r))}_afterEase(r,c){if(this._easeId&&c&&this._easeId===c)return;delete this._easeId;let f=this._zooming,d=this._rotating,m=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,f&&this.fire(new o.k("zoomend",r)),d&&this.fire(new o.k("rotateend",r)),m&&this.fire(new o.k("pitchend",r)),this.fire(new o.k("moveend",r))}flyTo(r,c){var f;if(!r.essential&&T.prefersReducedMotion){let Ge=o.M(r,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Ge,c)}this.stop(),r=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.b9},r);let d=this._getTransformForUpdate(),m=d.zoom,w=d.bearing,I=d.pitch,A=d.padding,O="bearing"in r?this._normalizeBearing(r.bearing,w):w,k="pitch"in r?+r.pitch:I,D="padding"in r?r.padding:d.padding,j=o.P.convert(r.offset),H=d.centerPoint.add(j),Z=d.pointLocation(H),{center:ee,zoom:ne}=d.getConstrained(o.N.convert(r.center||Z),(f=r.zoom)!==null&&f!==void 0?f:m);this._normalizeCenter(ee,d);let ae=d.zoomScale(ne-m),ue=d.project(Z),Y=d.project(ee).sub(ue),he=r.curve,de=Math.max(d.width,d.height),ye=de/ae,Te=Y.mag();if("minZoom"in r){let Ge=o.ac(Math.min(r.minZoom,m,ne),d.minZoom,d.maxZoom),mt=de/d.zoomScale(Ge-m);he=Math.sqrt(mt/Te*2)}let Me=he*he;function je(Ge){let mt=(ye*ye-de*de+(Ge?-1:1)*Me*Me*Te*Te)/(2*(Ge?ye:de)*Me*Te);return Math.log(Math.sqrt(mt*mt+1)-mt)}function Ke(Ge){return(Math.exp(Ge)-Math.exp(-Ge))/2}function ze(Ge){return(Math.exp(Ge)+Math.exp(-Ge))/2}let De=je(!1),rt=function(Ge){return ze(De)/ze(De+he*Ge)},yt=function(Ge){return de*((ze(De)*(Ke(mt=De+he*Ge)/ze(mt))-Ke(De))/Me)/Te;var mt},Ne=(je(!0)-De)/he;if(Math.abs(Te)<1e-6||!isFinite(Ne)){if(Math.abs(de-ye)<1e-6)return this.easeTo(r,c);let Ge=ye<de?-1:1;Ne=Math.abs(Math.log(ye/de))/he,yt=()=>0,rt=mt=>Math.exp(Ge*he*mt)}return r.duration="duration"in r?+r.duration:1e3*Ne/("screenSpeed"in r?+r.screenSpeed/he:+r.speed),r.maxDuration&&r.duration>r.maxDuration&&(r.duration=0),this._zooming=!0,this._rotating=w!==O,this._pitching=k!==I,this._padding=!d.isPaddingEqual(D),this._prepareEase(c,!1),this.terrain&&this._prepareElevation(ee),this._ease(Ge=>{let mt=Ge*Ne,lr=1/rt(mt);d.zoom=Ge===1?ne:m+d.scaleZoom(lr),this._rotating&&(d.bearing=o.y.number(w,O,Ge)),this._pitching&&(d.pitch=o.y.number(I,k,Ge)),this._padding&&(d.interpolatePadding(A,D,Ge),H=d.centerPoint.add(j)),this.terrain&&!r.freezeElevation&&this._updateElevation(Ge);let It=Ge===1?ee:d.unproject(ue.add(Y.mult(yt(mt))).mult(lr));d.setLocationAtPoint(d.renderWorldCopies?It.wrap():It,H),this._applyUpdatedTransform(d),this._fireMoveEvents(c)},()=>{this.terrain&&r.freezeElevation&&this._finalizeElevation(),this._afterEase(c)},r),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(r,c){var f;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){let d=this._onEaseEnd;delete this._onEaseEnd,d.call(this,c)}return r||(f=this.handlers)===null||f===void 0||f.stop(!1),this}_ease(r,c,f){f.animate===!1||f.duration===0?(r(1),c()):(this._easeStart=T.now(),this._easeOptions=f,this._onEaseFrame=r,this._onEaseEnd=c,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(r,c){r=o.b3(r,-180,180);let f=Math.abs(r-c);return Math.abs(r-360-c)<f&&(r-=360),Math.abs(r+360-c)<f&&(r+=360),r}_normalizeCenter(r,c){if(!c.renderWorldCopies||c.lngRange)return;let f=r.lng-c.center.lng;r.lng+=f>180?-360:f<-180?360:0}queryTerrainElevation(r){return this.terrain?this.terrain.getElevationForLngLatZoom(o.N.convert(r),this.transform.tileZoom)-this.transform.elevation:null}}let yu={compact:!0,customAttribution:"<a href=\"https://maplibre.org/\" target=\"_blank\">MapLibre</a>"};class _u{constructor(r=yu){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=c=>{!c||c.sourceDataType!=="metadata"&&c.sourceDataType!=="visibility"&&c.dataType!=="style"&&c.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=r}getDefaultPosition(){return"bottom-right"}onAdd(r){return this._map=r,this._compact=this.options.compact,this._container=C.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=C.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=C.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){C.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(r,c){let f=this._map._getUIString(`AttributionControl.${c}`);r.title=f,r.setAttribute("aria-label",f)}_updateAttributions(){if(!this._map.style)return;let r=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?r=r.concat(this.options.customAttribution.map(d=>typeof d!="string"?"":d)):typeof this.options.customAttribution=="string"&&r.push(this.options.customAttribution)),this._map.style.stylesheet){let d=this._map.style.stylesheet;this.styleOwner=d.owner,this.styleId=d.id}let c=this._map.style.sourceCaches;for(let d in c){let m=c[d];if(m.used||m.usedForTerrain){let w=m.getSource();w.attribution&&r.indexOf(w.attribution)<0&&r.push(w.attribution)}}r=r.filter(d=>String(d).trim()),r.sort((d,m)=>d.length-m.length),r=r.filter((d,m)=>{for(let w=m+1;w<r.length;w++)if(r[w].indexOf(d)>=0)return!1;return!0});let f=r.join(" | ");f!==this._attribHTML&&(this._attribHTML=f,r.length?(this._innerContainer.innerHTML=f,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Cp{constructor(r={}){this._updateCompact=()=>{let c=this._container.children;if(c.length){let f=c[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&f.classList.add("maplibregl-compact"):f.classList.remove("maplibregl-compact")}},this.options=r}getDefaultPosition(){return"bottom-left"}onAdd(r){this._map=r,this._compact=this.options&&this.options.compact,this._container=C.create("div","maplibregl-ctrl");let c=C.create("a","maplibregl-ctrl-logo");return c.target="_blank",c.rel="noopener nofollow",c.href="https://maplibre.org/",c.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),c.setAttribute("rel","noopener nofollow"),this._container.appendChild(c),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){C.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class zt{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(r){let c=++this._id;return this._queue.push({callback:r,id:c,cancelled:!1}),c}remove(r){let c=this._currentlyRunning,f=c?this._queue.concat(c):this._queue;for(let d of f)if(d.id===r)return void(d.cancelled=!0)}run(r=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");let c=this._currentlyRunning=this._queue;this._queue=[];for(let f of c)if(!f.cancelled&&(f.callback(r),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Mp=o.Y([{name:"a_pos3d",type:"Int16",components:3}]);class Lw extends o.E{constructor(r){super(),this.sourceCache=r,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,r.usedForTerrain=!0,r.tileSize=this.tileSize*m_(2,this.deltaZoom)}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(r,c){this.sourceCache.update(r,c),this._renderableTilesKeys=[];let f={};for(let d of r.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:c}))f[d.key]=!0,this._renderableTilesKeys.push(d.key),this._tiles[d.key]||(d.posMatrix=new Float64Array(16),o.aP(d.posMatrix,0,o.X,0,o.X,0,1),this._tiles[d.key]=new wo(d,this.tileSize));for(let d in this._tiles)f[d]||delete this._tiles[d]}freeRtt(r){for(let c in this._tiles){let f=this._tiles[c];(!r||f.tileID.equals(r)||f.tileID.isChildOf(r)||r.isChildOf(f.tileID))&&(f.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(r=>this.getTileByID(r))}getTileByID(r){return this._tiles[r]}getTerrainCoords(r){let c={};for(let f of this._renderableTilesKeys){let d=this._tiles[f].tileID;if(d.canonical.equals(r.canonical)){let m=r.clone();m.posMatrix=new Float64Array(16),o.aP(m.posMatrix,0,o.X,0,o.X,0,1),c[f]=m}else if(d.canonical.isChildOf(r.canonical)){let m=r.clone();m.posMatrix=new Float64Array(16);let w=d.canonical.z-r.canonical.z,I=d.canonical.x-(d.canonical.x>>w<<w),A=d.canonical.y-(d.canonical.y>>w<<w),O=o.X>>w;o.aP(m.posMatrix,0,O,0,O,0,1),o.J(m.posMatrix,m.posMatrix,[-I*O,-A*O,0]),c[f]=m}else if(r.canonical.isChildOf(d.canonical)){let m=r.clone();m.posMatrix=new Float64Array(16);let w=r.canonical.z-d.canonical.z,I=r.canonical.x-(r.canonical.x>>w<<w),A=r.canonical.y-(r.canonical.y>>w<<w),O=o.X>>w;o.aP(m.posMatrix,0,o.X,0,o.X,0,1),o.J(m.posMatrix,m.posMatrix,[I*O,A*O,0]),o.K(m.posMatrix,m.posMatrix,[1/m_(2,w),1/m_(2,w),0]),c[f]=m}}return c}getSourceTile(r,c){let f=this.sourceCache._source,d=r.overscaledZ-this.deltaZoom;if(d>f.maxzoom&&(d=f.maxzoom),d<f.minzoom)return null;this._sourceTileCache[r.key]||(this._sourceTileCache[r.key]=r.scaledTo(d).key);let m=this.sourceCache.getTileByID(this._sourceTileCache[r.key]);if((!m||!m.dem)&&c)for(;d>=f.minzoom&&(!m||!m.dem);)m=this.sourceCache.getTileByID(r.scaledTo(d--).key);return m}tilesAfterTime(r=Date.now()){return Object.values(this._tiles).filter(c=>c.timeAdded>=r)}}class Op{constructor(r,c,f){this.painter=r,this.sourceCache=new Lw(c),this.options=f,this.exaggeration=typeof f.exaggeration=="number"?f.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(r,c,f,d=o.X){var m;if(!(c>=0&&c<d&&f>=0&&f<d))return 0;let w=this.getTerrainData(r),I=(m=w.tile)===null||m===void 0?void 0:m.dem;if(!I)return 0;let A=function(Z,ee,ne){var ae=ee[0],ue=ee[1];return Z[0]=ne[0]*ae+ne[4]*ue+ne[12],Z[1]=ne[1]*ae+ne[5]*ue+ne[13],Z}([],[c/d*o.X,f/d*o.X],w.u_terrain_matrix),O=[A[0]*I.dim,A[1]*I.dim],k=Math.floor(O[0]),D=Math.floor(O[1]),j=O[0]-k,H=O[1]-D;return I.get(k,D)*(1-j)*(1-H)+I.get(k+1,D)*j*(1-H)+I.get(k,D+1)*(1-j)*H+I.get(k+1,D+1)*j*H}getElevationForLngLatZoom(r,c){if(!o.bb(c,r.wrap()))return 0;let{tileID:f,mercatorX:d,mercatorY:m}=this._getOverscaledTileIDFromLngLatZoom(r,c);return this.getElevation(f,d%o.X,m%o.X,o.X)}getElevation(r,c,f,d=o.X){return this.getDEMElevation(r,c,f,d)*this.exaggeration}getTerrainData(r){if(!this._emptyDemTexture){let d=this.painter.context,m=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new Qe(d,m,d.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new Qe(d,new o.R({width:1,height:1}),d.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.an([])}let c=this.sourceCache.getSourceTile(r,!0);if(c&&c.dem&&(!c.demTexture||c.needsTerrainPrepare)){let d=this.painter.context;c.demTexture=this.painter.getTileTexture(c.dem.stride),c.demTexture?c.demTexture.update(c.dem.getPixels(),{premultiply:!1}):c.demTexture=new Qe(d,c.dem.getPixels(),d.gl.RGBA,{premultiply:!1}),c.demTexture.bind(d.gl.NEAREST,d.gl.CLAMP_TO_EDGE),c.needsTerrainPrepare=!1}let f=c&&c+c.tileID.key+r.key;if(f&&!this._demMatrixCache[f]){let d=this.sourceCache.sourceCache._source.maxzoom,m=r.canonical.z-c.tileID.canonical.z;r.overscaledZ>r.canonical.z&&(r.canonical.z>=d?m=r.canonical.z-d:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));let w=r.canonical.x-(r.canonical.x>>m<<m),I=r.canonical.y-(r.canonical.y>>m<<m),A=o.bc(new Float64Array(16),[1/(o.X<<m),1/(o.X<<m),0]);o.J(A,A,[w*o.X,I*o.X,0]),this._demMatrixCache[r.key]={matrix:A,coord:r}}return{u_depth:2,u_terrain:3,u_terrain_dim:c&&c.dem&&c.dem.dim||1,u_terrain_matrix:f?this._demMatrixCache[r.key].matrix:this._emptyDemMatrix,u_terrain_unpack:c&&c.dem&&c.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(c&&c.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:c}}getFramebuffer(r){let c=this.painter,f=c.width/devicePixelRatio,d=c.height/devicePixelRatio;return!this._fbo||this._fbo.width===f&&this._fbo.height===d||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new Qe(c.context,{width:f,height:d,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new Qe(c.context,{width:f,height:d,data:null},c.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(c.context.gl.NEAREST,c.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=c.context.createFramebuffer(f,d,!0,!1),this._fbo.depthAttachment.set(c.context.createRenderbuffer(c.context.gl.DEPTH_COMPONENT16,f,d))),this._fbo.colorAttachment.set(r==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){let r=this.painter.context;if(this._coordsTexture)return this._coordsTexture;let c=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let m=0,w=0;m<this._coordsTextureSize;m++)for(let I=0;I<this._coordsTextureSize;I++,w+=4)c[w+0]=255&I,c[w+1]=255&m,c[w+2]=I>>8<<4|m>>8,c[w+3]=0;let f=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(c.buffer)),d=new Qe(r,f,r.gl.RGBA,{premultiply:!1});return d.bind(r.gl.NEAREST,r.gl.CLAMP_TO_EDGE),this._coordsTexture=d,d}pointCoordinate(r){this.painter.maybeDrawDepthAndCoords(!0);let c=new Uint8Array(4),f=this.painter.context,d=f.gl,m=Math.round(r.x*this.painter.pixelRatio/devicePixelRatio),w=Math.round(r.y*this.painter.pixelRatio/devicePixelRatio),I=Math.round(this.painter.height/devicePixelRatio);f.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),d.readPixels(m,I-w-1,1,1,d.RGBA,d.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null);let A=c[0]+(c[2]>>4<<8),O=c[1]+((15&c[2])<<8),k=this.coordsIndex[255-c[3]],D=k&&this.sourceCache.getTileByID(k);if(!D)return null;let j=this._coordsTextureSize,H=(1<<D.tileID.canonical.z)*j;return new o.Z((D.tileID.canonical.x*j+A)/H+D.tileID.wrap,(D.tileID.canonical.y*j+O)/H,this.getElevation(D.tileID,A,O,j))}depthAtPoint(r){let c=new Uint8Array(4),f=this.painter.context,d=f.gl;return f.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),d.readPixels(r.x,this.painter.height/devicePixelRatio-r.y-1,1,1,d.RGBA,d.UNSIGNED_BYTE,c),f.bindFramebuffer.set(null),(c[0]/16777216+c[1]/65536+c[2]/256+c[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;let r=this.painter.context,c=new o.bd,f=new o.aY,d=this.meshSize,m=o.X/d,w=d*d;for(let D=0;D<=d;D++)for(let j=0;j<=d;j++)c.emplaceBack(j*m,D*m,0);for(let D=0;D<w;D+=d+1)for(let j=0;j<d;j++)f.emplaceBack(j+D,d+j+D+1,d+j+D+2),f.emplaceBack(j+D,d+j+D+2,j+D+1);let I=c.length,A=I+2*(d+1);for(let D of[0,1])for(let j=0;j<=d;j++)for(let H of[0,1])c.emplaceBack(j*m,D*o.X,H);for(let D=0;D<2*d;D+=2)f.emplaceBack(A+D,A+D+1,A+D+3),f.emplaceBack(A+D,A+D+3,A+D+2),f.emplaceBack(I+D,I+D+3,I+D+1),f.emplaceBack(I+D,I+D+2,I+D+3);let O=c.length,k=O+2*(d+1);for(let D of[0,1])for(let j=0;j<=d;j++)for(let H of[0,1])c.emplaceBack(D*o.X,j*m,H);for(let D=0;D<2*d;D+=2)f.emplaceBack(O+D,O+D+1,O+D+3),f.emplaceBack(O+D,O+D+3,O+D+2),f.emplaceBack(k+D,k+D+3,k+D+1),f.emplaceBack(k+D,k+D+2,k+D+3);return this._mesh=new wh(r.createVertexBuffer(c,Mp.members),r.createIndexBuffer(f),o.a0.simpleSegment(0,0,c.length,f.length)),this._mesh}getMeshFrameDelta(r){return 2*Math.PI*o.be/Math.pow(2,r)/5}getMinTileElevationForLngLatZoom(r,c){var f;let{tileID:d}=this._getOverscaledTileIDFromLngLatZoom(r,c);return(f=this.getMinMaxElevation(d).minElevation)!==null&&f!==void 0?f:0}getMinMaxElevation(r){let c=this.getTerrainData(r).tile,f={minElevation:null,maxElevation:null};return c&&c.dem&&(f.minElevation=c.dem.min*this.exaggeration,f.maxElevation=c.dem.max*this.exaggeration),f}_getOverscaledTileIDFromLngLatZoom(r,c){let f=o.Z.fromLngLat(r.wrap()),d=(1<<c)*o.X,m=f.x*d,w=f.y*d,I=Math.floor(m/o.X),A=Math.floor(w/o.X);return{tileID:new o.S(c,0,c,I,A),mercatorX:m,mercatorY:w}}}class zw{constructor(r,c,f){this._context=r,this._size=c,this._tileSize=f,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(let r of this._objects)r.texture.destroy(),r.fbo.destroy()}_createObject(r){let c=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),f=new Qe(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return f.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),c.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),c.colorAttachment.set(f.texture),{id:r,fbo:c,texture:f,stamp:-1,inUse:!1}}getObjectForId(r){return this._objects[r]}useObject(r){r.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(c=>r.id!==c),this._recentlyUsed.push(r.id)}stampObject(r){r.stamp=++this._stamp}getOrCreateFreeObject(){for(let c of this._recentlyUsed)if(!this._objects[c].inUse)return this._objects[c];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");let r=this._createObject(this._objects.length);return this._objects.push(r),r}freeObject(r){r.inUse=!1}freeAllObjects(){for(let r of this._objects)this.freeObject(r)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(r=>!r.inUse)===!1}}let xu={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class $y{constructor(r,c){this.painter=r,this.terrain=c,this.pool=new zw(r.context,30,c.sourceCache.tileSize*c.qualityFactor)}destruct(){this.pool.destruct()}getTexture(r){return this.pool.getObjectForId(r.rtt[this._stacks.length-1].id).texture}prepareForRender(r,c){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=r._order.filter(f=>!r._layers[f].isHidden(c)),this._coordsDescendingInv={};for(let f in r.sourceCaches){this._coordsDescendingInv[f]={};let d=r.sourceCaches[f].getVisibleCoordinates();for(let m of d){let w=this.terrain.sourceCache.getTerrainCoords(m);for(let I in w)this._coordsDescendingInv[f][I]||(this._coordsDescendingInv[f][I]=[]),this._coordsDescendingInv[f][I].push(w[I])}}this._coordsDescendingInvStr={};for(let f of r._order){let d=r._layers[f],m=d.source;if(xu[d.type]&&!this._coordsDescendingInvStr[m]){this._coordsDescendingInvStr[m]={};for(let w in this._coordsDescendingInv[m])this._coordsDescendingInvStr[m][w]=this._coordsDescendingInv[m][w].map(I=>I.key).sort().join()}}for(let f of this._renderableTiles)for(let d in this._coordsDescendingInvStr){let m=this._coordsDescendingInvStr[d][f.tileID.key];m&&m!==f.rttCoords[d]&&(f.rtt=[])}}renderLayer(r){if(r.isHidden(this.painter.transform.zoom))return!1;let c=r.type,f=this.painter,d=this._renderableLayerIds[this._renderableLayerIds.length-1]===r.id;if(xu[c]&&(this._prevType&&xu[this._prevType]||this._stacks.push([]),this._prevType=c,this._stacks[this._stacks.length-1].push(r.id),!d))return!0;if(xu[this._prevType]||xu[c]&&d){this._prevType=c;let m=this._stacks.length-1,w=this._stacks[m]||[];for(let I of this._renderableTiles){if(this.pool.isFull()&&(Dy(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(I),I.rtt[m]){let O=this.pool.getObjectForId(I.rtt[m].id);if(O.stamp===I.rtt[m].stamp){this.pool.useObject(O);continue}}let A=this.pool.getOrCreateFreeObject();this.pool.useObject(A),this.pool.stampObject(A),I.rtt[m]={id:A.id,stamp:A.stamp},f.context.bindFramebuffer.set(A.fbo.framebuffer),f.context.clear({color:o.aM.transparent,stencil:0}),f.currentStencilSource=void 0;for(let O=0;O<w.length;O++){let k=f.style._layers[w[O]],D=k.source?this._coordsDescendingInv[k.source][I.tileID.key]:[I.tileID];f.context.viewport.set([0,0,A.fbo.width,A.fbo.height]),f._renderTileClippingMasks(k,D),f.renderLayer(f,f.style.sourceCaches[k.source],k,D),k.source&&(I.rttCoords[k.source]=this._coordsDescendingInvStr[k.source][I.tileID.key])}}return Dy(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),xu[c]}return!1}}let Rp={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Vy=_,Fw={hash:!1,interactive:!0,bearingSnap:7,attributionControl:yu,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},kp=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Nw={showCompass:!0,showZoom:!0,visualizePitch:!1};class Bw{constructor(r,c,f=!1){this.mousedown=w=>{this.startMouse(o.e({},w,{ctrlKey:!0,preventDefault:()=>w.preventDefault()}),C.mousePos(this.element,w)),C.addEventListener(window,"mousemove",this.mousemove),C.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.moveMouse(w,C.mousePos(this.element,w))},this.mouseup=w=>{this.mouseRotate.dragEnd(w),this.mousePitch&&this.mousePitch.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=C.touchPos(this.element,w.targetTouches)[0],this.startTouch(w,this._startPos),C.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=C.touchPos(this.element,w.targetTouches)[0],this.moveTouch(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;let d=r.dragRotate._mouseRotate.getClickTolerance(),m=r.dragRotate._mousePitch.getClickTolerance();this.element=c,this.mouseRotate=bp({clickTolerance:d,enable:!0}),this.touchRotate=(({enable:w,clickTolerance:I,bearingDegreesPerPixelMoved:A=.8})=>{let O=new xp;return new Ja({clickTolerance:I,move:(k,D)=>({bearingDelta:(D.x-k.x)*A}),moveStateManager:O,enable:w,assignEvents:kp})})({clickTolerance:d,enable:!0}),this.map=r,f&&(this.mousePitch=wp({clickTolerance:m,enable:!0}),this.touchPitch=(({enable:w,clickTolerance:I,pitchDegreesPerPixelMoved:A=-.5})=>{let O=new xp;return new Ja({clickTolerance:I,move:(k,D)=>({pitchDelta:(D.y-k.y)*A}),moveStateManager:O,enable:w,assignEvents:kp})})({clickTolerance:m,enable:!0})),C.addEventListener(c,"mousedown",this.mousedown),C.addEventListener(c,"touchstart",this.touchstart,{passive:!1}),C.addEventListener(c,"touchcancel",this.reset)}startMouse(r,c){this.mouseRotate.dragStart(r,c),this.mousePitch&&this.mousePitch.dragStart(r,c),C.disableDrag()}startTouch(r,c){this.touchRotate.dragStart(r,c),this.touchPitch&&this.touchPitch.dragStart(r,c),C.disableDrag()}moveMouse(r,c){let f=this.map,{bearingDelta:d}=this.mouseRotate.dragMove(r,c)||{};if(d&&f.setBearing(f.getBearing()+d),this.mousePitch){let{pitchDelta:m}=this.mousePitch.dragMove(r,c)||{};m&&f.setPitch(f.getPitch()+m)}}moveTouch(r,c){let f=this.map,{bearingDelta:d}=this.touchRotate.dragMove(r,c)||{};if(d&&f.setBearing(f.getBearing()+d),this.touchPitch){let{pitchDelta:m}=this.touchPitch.dragMove(r,c)||{};m&&f.setPitch(f.getPitch()+m)}}off(){let r=this.element;C.removeEventListener(r,"mousedown",this.mousedown),C.removeEventListener(r,"touchstart",this.touchstart,{passive:!1}),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend),C.removeEventListener(r,"touchcancel",this.reset),this.offTemp()}offTemp(){C.enableDrag(),C.removeEventListener(window,"mousemove",this.mousemove),C.removeEventListener(window,"mouseup",this.mouseup),C.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),C.removeEventListener(window,"touchend",this.touchend)}}let cn;function ur(v,r,c){let f=new o.N(v.lng,v.lat);if(v=new o.N(v.lng,v.lat),r){let d=new o.N(v.lng-360,v.lat),m=new o.N(v.lng+360,v.lat),w=c.locationPoint(v).distSqr(r);c.locationPoint(d).distSqr(r)<w?v=d:c.locationPoint(m).distSqr(r)<w&&(v=m)}for(;Math.abs(v.lng-c.center.lng)>180;){let d=c.locationPoint(v);if(d.x>=0&&d.y>=0&&d.x<=c.width&&d.y<=c.height)break;v.lng>c.center.lng?v.lng-=360:v.lng+=360}return v.lng!==f.lng&&c.locationPoint(v).y>c.height/2-c.getHorizon()?v:f}let bu={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Rh(v,r,c){let f=v.classList;for(let d in bu)f.remove(`maplibregl-${c}-anchor-${d}`);f.add(`maplibregl-${c}-anchor-${r}`)}class kh extends o.E{constructor(r){if(super(),this._onKeyPress=c=>{let f=c.code,d=c.charCode||c.keyCode;f!=="Space"&&f!=="Enter"&&d!==32&&d!==13||this.togglePopup()},this._onMapClick=c=>{let f=c.originalEvent.target,d=this._element;this._popup&&(f===d||d.contains(f))&&this.togglePopup()},this._update=c=>{var f;if(!this._map)return;let d=this._map.loaded()&&!this._map.isMoving();((c==null?void 0:c.type)==="terrain"||(c==null?void 0:c.type)==="render"&&!d)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?ur(this._lngLat,this._flatPos,this._map.transform):(f=this._lngLat)===null||f===void 0?void 0:f.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let m="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?m=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(m=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||c&&c.type!=="moveend"||(this._pos=this._pos.round()),C.setTransform(this._element,`${bu[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${m}`),T.frameAsync(new AbortController).then(()=>{this._updateOpacity(c&&c.type==="moveend")}).catch(()=>{})},this._onMove=c=>{if(!this._isDragging){let f=this._clickTolerance||this._map._clickTolerance;this._isDragging=c.point.dist(this._pointerdownPos)>=f}this._isDragging&&(this._pos=c.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.k("dragstart"))),this.fire(new o.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.k("dragend")),this._state="inactive"},this._addDragHandler=c=>{this._element.contains(c.originalEvent.target)&&(c.preventDefault(),this._positionDelta=c.point.sub(this._pos).add(this._offset),this._pointerdownPos=c.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=r&&r.anchor||"center",this._color=r&&r.color||"#3FB1CE",this._scale=r&&r.scale||1,this._draggable=r&&r.draggable||!1,this._clickTolerance=r&&r.clickTolerance||0,this._subpixelPositioning=r&&r.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=r&&r.rotation||0,this._rotationAlignment=r&&r.rotationAlignment||"auto",this._pitchAlignment=r&&r.pitchAlignment&&r.pitchAlignment!=="auto"?r.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(r==null?void 0:r.opacity,r==null?void 0:r.opacityWhenCovered),r&&r.element)this._element=r.element,this._offset=o.P.convert(r&&r.offset||[0,0]);else{this._defaultMarker=!0,this._element=C.create("div");let c=C.createNS("http://www.w3.org/2000/svg","svg"),f=41,d=27;c.setAttributeNS(null,"display","block"),c.setAttributeNS(null,"height",`${f}px`),c.setAttributeNS(null,"width",`${d}px`),c.setAttributeNS(null,"viewBox",`0 0 ${d} ${f}`);let m=C.createNS("http://www.w3.org/2000/svg","g");m.setAttributeNS(null,"stroke","none"),m.setAttributeNS(null,"stroke-width","1"),m.setAttributeNS(null,"fill","none"),m.setAttributeNS(null,"fill-rule","evenodd");let w=C.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"fill-rule","nonzero");let I=C.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");let A=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(let ae of A){let ue=C.createNS("http://www.w3.org/2000/svg","ellipse");ue.setAttributeNS(null,"opacity","0.04"),ue.setAttributeNS(null,"cx","10.5"),ue.setAttributeNS(null,"cy","5.80029008"),ue.setAttributeNS(null,"rx",ae.rx),ue.setAttributeNS(null,"ry",ae.ry),I.appendChild(ue)}let O=C.createNS("http://www.w3.org/2000/svg","g");O.setAttributeNS(null,"fill",this._color);let k=C.createNS("http://www.w3.org/2000/svg","path");k.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),O.appendChild(k);let D=C.createNS("http://www.w3.org/2000/svg","g");D.setAttributeNS(null,"opacity","0.25"),D.setAttributeNS(null,"fill","#000000");let j=C.createNS("http://www.w3.org/2000/svg","path");j.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),D.appendChild(j);let H=C.createNS("http://www.w3.org/2000/svg","g");H.setAttributeNS(null,"transform","translate(6.0, 7.0)"),H.setAttributeNS(null,"fill","#FFFFFF");let Z=C.createNS("http://www.w3.org/2000/svg","g");Z.setAttributeNS(null,"transform","translate(8.0, 8.0)");let ee=C.createNS("http://www.w3.org/2000/svg","circle");ee.setAttributeNS(null,"fill","#000000"),ee.setAttributeNS(null,"opacity","0.25"),ee.setAttributeNS(null,"cx","5.5"),ee.setAttributeNS(null,"cy","5.5"),ee.setAttributeNS(null,"r","5.4999962");let ne=C.createNS("http://www.w3.org/2000/svg","circle");ne.setAttributeNS(null,"fill","#FFFFFF"),ne.setAttributeNS(null,"cx","5.5"),ne.setAttributeNS(null,"cy","5.5"),ne.setAttributeNS(null,"r","5.4999962"),Z.appendChild(ee),Z.appendChild(ne),w.appendChild(I),w.appendChild(O),w.appendChild(D),w.appendChild(H),w.appendChild(Z),c.appendChild(w),c.setAttributeNS(null,"height",f*this._scale+"px"),c.setAttributeNS(null,"width",d*this._scale+"px"),this._element.appendChild(c),this._offset=o.P.convert(r&&r.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",c=>{c.preventDefault()}),this._element.addEventListener("mousedown",c=>{c.preventDefault()}),Rh(this._element,this._anchor,"marker"),r&&r.className)for(let c of r.className.split(" "))this._element.classList.add(c);this._popup=null}addTo(r){return this.remove(),this._map=r,this._element.setAttribute("aria-label",r._getUIString("Marker.Title")),r.getCanvasContainer().appendChild(this._element),r.on("move",this._update),r.on("moveend",this._update),r.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),C.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(r){return this._lngLat=o.N.convert(r),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(r){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),r){if(!("offset"in r.options)){let d=Math.abs(13.5)/Math.SQRT2;r.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(38.1-13.5+d)],"bottom-right":[-d,-1*(38.1-13.5+d)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=r,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(r){return this._subpixelPositioning=r,this}getPopup(){return this._popup}togglePopup(){let r=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:r?(r.isOpen()?r.remove():(r.setLngLat(this._lngLat),r.addTo(this._map)),this):this}_updateOpacity(r=!1){var c,f;if(!(!((c=this._map)===null||c===void 0)&&c.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(r)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}let d=this._map,m=d.terrain.depthAtPoint(this._pos),w=d.terrain.getElevationForLngLatZoom(this._lngLat,d.transform.tileZoom);if(d.transform.lngLatToCameraDepth(this._lngLat,w)-m<.006)return void(this._element.style.opacity=this._opacity);let I=-this._offset.y/d.transform._pixelPerMeter,A=Math.sin(d.getPitch()*Math.PI/180)*I,O=d.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),k=d.transform.lngLatToCameraDepth(this._lngLat,w+A)-O>.006;!((f=this._popup)===null||f===void 0)&&f.isOpen()&&k&&this._popup.remove(),this._element.style.opacity=k?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(r){return this._offset=o.P.convert(r),this._update(),this}addClassName(r){this._element.classList.add(r)}removeClassName(r){this._element.classList.remove(r)}toggleClassName(r){return this._element.classList.toggle(r)}setDraggable(r){return this._draggable=!!r,this._map&&(r?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(r){return this._rotation=r||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(r){return this._rotationAlignment=r||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(r){return this._pitchAlignment=r&&r!=="auto"?r:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(r,c){return r===void 0&&c===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),r!==void 0&&(this._opacity=r),c!==void 0&&(this._opacityWhenCovered=c),this._map&&this._updateOpacity(!0),this}}let Gy={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ql=0,ec=!1,ba={maxWidth:100,unit:"metric"};function tc(v,r,c){let f=c&&c.maxWidth||100,d=v._container.clientHeight/2,m=v.unproject([0,d]),w=v.unproject([f,d]),I=m.distanceTo(w);if(c&&c.unit==="imperial"){let A=3.2808*I;A>5280?tt(r,f,A/5280,v._getUIString("ScaleControl.Miles")):tt(r,f,A,v._getUIString("ScaleControl.Feet"))}else c&&c.unit==="nautical"?tt(r,f,I/1852,v._getUIString("ScaleControl.NauticalMiles")):I>=1e3?tt(r,f,I/1e3,v._getUIString("ScaleControl.Kilometers")):tt(r,f,I,v._getUIString("ScaleControl.Meters"))}function tt(v,r,c,f){let d=function(m){let w=Math.pow(10,`${Math.floor(m)}`.length-1),I=m/w;return I=I>=10?10:I>=5?5:I>=3?3:I>=2?2:I>=1?1:function(A){let O=Math.pow(10,Math.ceil(-Math.log(A)/Math.LN10));return Math.round(A*O)/O}(I),w*I}(c);v.style.width=r*(d/c)+"px",v.innerHTML=`${d}&nbsp;${f}`}let ft={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},Dh=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Lh(v){if(v){if(typeof v=="number"){let r=Math.round(Math.abs(v)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,v),"top-left":new o.P(r,r),"top-right":new o.P(-r,r),bottom:new o.P(0,-v),"bottom-left":new o.P(r,-r),"bottom-right":new o.P(-r,-r),left:new o.P(v,0),right:new o.P(-v,0)}}if(v instanceof o.P||Array.isArray(v)){let r=o.P.convert(v);return{center:r,top:r,"top-left":r,"top-right":r,bottom:r,"bottom-left":r,"bottom-right":r,left:r,right:r}}return{center:o.P.convert(v.center||[0,0]),top:o.P.convert(v.top||[0,0]),"top-left":o.P.convert(v["top-left"]||[0,0]),"top-right":o.P.convert(v["top-right"]||[0,0]),bottom:o.P.convert(v.bottom||[0,0]),"bottom-left":o.P.convert(v["bottom-left"]||[0,0]),"bottom-right":o.P.convert(v["bottom-right"]||[0,0]),left:o.P.convert(v.left||[0,0]),right:o.P.convert(v.right||[0,0])}}return Lh(new o.P(0,0))}let Dp=_;l.AJAXError=o.bh,l.Evented=o.E,l.LngLat=o.N,l.MercatorCoordinate=o.Z,l.Point=o.P,l.addProtocol=o.bi,l.config=o.a,l.removeProtocol=o.bj,l.AttributionControl=_u,l.BoxZoomHandler=ln,l.CanvasSource=bn,l.CooperativeGesturesHandler=gu,l.DoubleClickZoomHandler=ms,l.DragPanHandler=By,l.DragRotateHandler=jy,l.EdgeInsets=du,l.FullscreenControl=class extends o.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var r;let c=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((r=c==null?void 0:c.shadowRoot)===null||r===void 0)&&r.fullscreenElement;)c=c.shadowRoot.fullscreenElement;c===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){C.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){let v=this._fullscreenButton=C.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);C.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){let v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},l.GeoJSONSource=Dl,l.GeolocateControl=class extends o.E{constructor(v){super(),this._onSuccess=r=>{if(this._map){if(this._isOutOfMapMaxBounds(r))return this._setErrorState(),this.fire(new o.k("outofmaxbounds",r)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=r,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(r),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(r),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.k("geolocate",r)),this._finish()}},this._updateCamera=r=>{let c=new o.N(r.coords.longitude,r.coords.latitude),f=r.coords.accuracy,d=this._map.getBearing(),m=o.e({bearing:d},this.options.fitBoundsOptions),w=Se.fromLngLat(c,f);this._map.fitBounds(w,m,{geolocateSource:!0})},this._updateMarker=r=>{if(r){let c=new o.N(r.coords.longitude,r.coords.latitude);this._accuracyCircleMarker.setLngLat(c).addTo(this._map),this._userLocationDotMarker.setLngLat(c).addTo(this._map),this._accuracy=r.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=r=>{if(this._map){if(this.options.trackUserLocation)if(r.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(r.code===3&&ec)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.k("error",r)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",r=>r.preventDefault()),this._geolocateButton=C.create("button","maplibregl-ctrl-geolocate",this._container),C.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=r=>{if(this._map){if(r===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");let c=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}else{let c=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=c,this._geolocateButton.setAttribute("aria-label",c)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=C.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new kh({element:this._dotElement}),this._circleElement=C.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new kh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",c=>{c.geolocateSource||this._watchState!=="ACTIVE_LOCK"||c.originalEvent&&c.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.k("trackuserlocationend")),this.fire(new o.k("userlocationlostfocus")))})}},this.options=o.e({},Gy,v)}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return o._(this,arguments,void 0,function*(r=!1){if(cn!==void 0&&!r)return cn;if(window.navigator.permissions===void 0)return cn=!!window.navigator.geolocation,cn;try{cn=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch(c){cn=!!window.navigator.geolocation}return cn})}().then(r=>this._finishSetupUI(r)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),C.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ql=0,ec=!1}_isOutOfMapMaxBounds(v){let r=this._map.getMaxBounds(),c=v.coords;return r&&(c.longitude<r.getWest()||c.longitude>r.getEast()||c.latitude<r.getSouth()||c.latitude>r.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}}_updateCircleRadius(){let v=this._map.getBounds(),r=v.getSouthEast(),c=v.getNorthEast(),f=r.distanceTo(c),d=Math.ceil(this._accuracy/(f/this._map._container.clientHeight)*2);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ql--,ec=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.k("trackuserlocationstart")),this.fire(new o.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`);}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ql++,Ql>1?(v={maximumAge:6e5,timeout:0},ec=!0):(v=this.options.positionOptions,ec=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},l.Hash=qh,l.ImageSource=Ka,l.KeyboardHandler=qn,l.LngLatBounds=Se,l.LogoControl=Cp,l.Map=class extends Uy{constructor(v){o.bf.mark(o.bg.create);let r=Object.assign(Object.assign({},Fw),v);if(r.minZoom!=null&&r.maxZoom!=null&&r.minZoom>r.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(r.minPitch!=null&&r.maxPitch!=null&&r.minPitch>r.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(r.minPitch!=null&&r.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(r.maxPitch!=null&&r.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new pu(r.minZoom,r.maxZoom,r.minPitch,r.maxPitch,r.renderWorldCopies),{bearingSnap:r.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new zt,this._controls=[],this._mapId=o.a4(),this._contextLost=c=>{c.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new o.k("webglcontextlost",{originalEvent:c}))},this._contextRestored=c=>{this._setupPainter(),this.resize(),this._update(),this.fire(new o.k("webglcontextrestored",{originalEvent:c}))},this._onMapScroll=c=>{if(c.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=r.interactive,this._maxTileCacheSize=r.maxTileCacheSize,this._maxTileCacheZoomLevels=r.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=r.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=r.preserveDrawingBuffer===!0,this._antialias=r.antialias===!0,this._trackResize=r.trackResize===!0,this._bearingSnap=r.bearingSnap,this._refreshExpiredTiles=r.refreshExpiredTiles===!0,this._fadeDuration=r.fadeDuration,this._crossSourceCollisions=r.crossSourceCollisions===!0,this._collectResourceTiming=r.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},Rp),r.locale),this._clickTolerance=r.clickTolerance,this._overridePixelRatio=r.pixelRatio,this._maxCanvasSize=r.maxCanvasSize,this.transformCameraUpdate=r.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=r.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=K.addThrottleControl(()=>this.isMoving()),this._requestManager=new re(r.transformRequest),typeof r.container=="string"){if(this._container=document.getElementById(r.container),!this._container)throw new Error(`Container '${r.container}' not found.`)}else{if(!(r.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=r.container}if(r.maxBounds&&this.setMaxBounds(r.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)).on("moveend",()=>this._update(!1)).on("zoom",()=>this._update(!0)).on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}).once("idle",()=>{this._idleTriggered=!0}),typeof window!="undefined"){addEventListener("online",this._onWindowOnline,!1);let c=!1,f=Zl(d=>{this._trackResize&&!this._removed&&(this.resize(d),this.redraw())},50);this._resizeObserver=new ResizeObserver(d=>{c?f(d):c=!0}),this._resizeObserver.observe(this._container)}this.handlers=new Pp(this,r),this._hash=r.hash&&new qh(typeof r.hash=="string"&&r.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:r.center,zoom:r.zoom,bearing:r.bearing,pitch:r.pitch}),r.bounds&&(this.resize(),this.fitBounds(r.bounds,o.e({},r.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=r.localIdeographFontFamily,this._validateStyle=r.validateStyle,r.style&&this.setStyle(r.style,{localIdeographFontFamily:r.localIdeographFontFamily}),r.attributionControl&&this.addControl(new _u(typeof r.attributionControl=="boolean"?void 0:r.attributionControl)),r.maplibreLogo&&this.addControl(new Cp,r.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",c=>{this._update(c.dataType==="style"),this.fire(new o.k(`${c.dataType}data`,c))}),this.on("dataloading",c=>{this.fire(new o.k(`${c.dataType}dataloading`,c))}),this.on("dataabort",c=>{this.fire(new o.k("sourcedataabort",c))})}_getMapId(){return this._mapId}addControl(v,r){if(r===void 0&&(r=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new o.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));let c=v.onAdd(this);this._controls.push(v);let f=this._controlPositions[r];return r.indexOf("bottom")!==-1?f.insertBefore(c,f.firstChild):f.appendChild(c),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new o.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));let r=this._controls.indexOf(v);return r>-1&&this._controls.splice(r,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,r,c,f){return f==null&&this.terrain&&(f=this.terrain.getElevationForLngLatZoom(c,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,r,c,f)}resize(v){var r;let c=this._containerDimensions(),f=c[0],d=c[1],m=this._getClampedPixelRatio(f,d);if(this._resizeCanvas(f,d,m),this.painter.resize(f,d,m),this.painter.overLimit()){let I=this.painter.context.gl;this._maxCanvasSize=[I.drawingBufferWidth,I.drawingBufferHeight];let A=this._getClampedPixelRatio(f,d);this._resizeCanvas(f,d,A),this.painter.resize(f,d,A)}this.transform.resize(f,d),(r=this._requestedCameraState)===null||r===void 0||r.resize(f,d);let w=!this._moving;return w&&(this.stop(),this.fire(new o.k("movestart",v)).fire(new o.k("move",v))),this.fire(new o.k("resize",v)),w&&this.fire(new o.k("moveend",v)),this}_getClampedPixelRatio(v,r){let{0:c,1:f}=this._maxCanvasSize,d=this.getPixelRatio(),m=v*d,w=r*d;return Math.min(m>c?c/m:1,w>f?f/w:1)*d}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Se.convert(v)),this._update()}setMinZoom(v){if((v=v==null?-2:v)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v==null?22:v)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v==null?0:v)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v==null?60:v)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(o.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(o.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,r,c){if(v==="mouseenter"||v==="mouseover"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:m=>{let w=r.filter(A=>this.getLayer(A)),I=w.length!==0?this.queryRenderedFeatures(m.point,{layers:w}):[];I.length?f||(f=!0,c.call(this,new li(v,this,m.originalEvent,{features:I}))):f=!1},mouseout:()=>{f=!1}}}}if(v==="mouseleave"||v==="mouseout"){let f=!1;return{layers:r,listener:c,delegates:{mousemove:w=>{let I=r.filter(A=>this.getLayer(A));(I.length!==0?this.queryRenderedFeatures(w.point,{layers:I}):[]).length?f=!0:f&&(f=!1,c.call(this,new li(v,this,w.originalEvent)))},mouseout:w=>{f&&(f=!1,c.call(this,new li(v,this,w.originalEvent)))}}}}{let f=d=>{let m=r.filter(I=>this.getLayer(I)),w=m.length!==0?this.queryRenderedFeatures(d.point,{layers:m}):[];w.length&&(d.features=w,c.call(this,d),delete d.features)};return{layers:r,listener:c,delegates:{[v]:f}}}}_saveDelegatedListener(v,r){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(r)}_removeDelegatedListener(v,r,c){if(!this._delegatedListeners||!this._delegatedListeners[v])return;let f=this._delegatedListeners[v];for(let d=0;d<f.length;d++){let m=f[d];if(m.listener===c&&m.layers.length===r.length&&m.layers.every(w=>r.includes(w))){for(let w in m.delegates)this.off(w,m.delegates[w]);return void f.splice(d,1)}}}on(v,r,c){if(c===void 0)return super.on(v,r);let f=this._createDelegatedListener(v,typeof r=="string"?[r]:r,c);this._saveDelegatedListener(v,f);for(let d in f.delegates)this.on(d,f.delegates[d]);return this}once(v,r,c){if(c===void 0)return super.once(v,r);let f=typeof r=="string"?[r]:r,d=this._createDelegatedListener(v,f,c);for(let m in d.delegates){let w=d.delegates[m];d.delegates[m]=(...I)=>{this._removeDelegatedListener(v,f,c),w(...I)}}this._saveDelegatedListener(v,d);for(let m in d.delegates)this.once(m,d.delegates[m]);return this}off(v,r,c){return c===void 0?super.off(v,r):(this._removeDelegatedListener(v,typeof r=="string"?[r]:r,c),this)}queryRenderedFeatures(v,r){if(!this.style)return[];let c,f=v instanceof o.P||Array.isArray(v),d=f?v:[[0,0],[this.transform.width,this.transform.height]];if(r=r||(f?{}:v)||{},d instanceof o.P||typeof d[0]=="number")c=[o.P.convert(d)];else{let m=o.P.convert(d[0]),w=o.P.convert(d[1]);c=[m,new o.P(w.x,m.y),w,new o.P(m.x,w.y),m]}return this.style.queryRenderedFeatures(c,r,this.transform)}querySourceFeatures(v,r){return this.style.querySourceFeatures(v,r)}setStyle(v,r){return(r=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},r)).diff!==!1&&r.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,r),this):(this._localIdeographFontFamily=r.localIdeographFontFamily,this._updateStyle(v,r))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){let r=this._locale[v];if(r==null)throw new Error(`Missing UI string '${v}'`);return r}_updateStyle(v,r){if(r.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(v,r));let c=this.style&&r.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new sh(this,r||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,r,c):this.style.loadJSON(v,r,c),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new sh(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,r){if(typeof v=="string"){let c=this._requestManager.transformRequest(v,"Style");o.h(c,new AbortController).then(f=>{this._updateDiff(f.data,r)}).catch(f=>{f&&this.fire(new o.j(f))})}else typeof v=="object"&&this._updateDiff(v,r)}_updateDiff(v,r){try{this.style.setState(v,r)&&this._update(!0)}catch(c){o.w(`Unable to perform style diff: ${c.message||c.error||c}.  Rebuilding the style from scratch.`),this._updateStyle(v,r)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(v,r){return this._lazyInitEmptyStyle(),this.style.addSource(v,r),this._update(!0)}isSourceLoaded(v){let r=this.style&&this.style.sourceCaches[v];if(r!==void 0)return r.loaded();this.fire(new o.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){let r=this.style.sourceCaches[v.source];if(!r)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&r.reload();for(let c in this.style._layers){let f=this.style._layers[c];f.type==="hillshade"&&f.source===v.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Op(this.painter,r,v),this.painter.renderToTexture=new $y(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=c=>{c.dataType==="style"?this.terrain.sourceCache.freeRtt():c.dataType==="source"&&c.tile&&(c.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(c.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new o.k("terrain",{terrain:v})),this}getTerrain(){var v,r;return(r=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&r!==void 0?r:null}areTilesLoaded(){let v=this.style&&this.style.sourceCaches;for(let r in v){let c=v[r]._tiles;for(let f in c){let d=c[f];if(d.state!=="loaded"&&d.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,r,c={}){let{pixelRatio:f=1,sdf:d=!1,stretchX:m,stretchY:w,content:I,textFitWidth:A,textFitHeight:O}=c;if(this._lazyInitEmptyStyle(),!(r instanceof HTMLImageElement||o.b(r))){if(r.width===void 0||r.height===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{let{width:k,height:D,data:j}=r,H=r;return this.style.addImage(v,{data:new o.R({width:k,height:D},new Uint8Array(j)),pixelRatio:f,stretchX:m,stretchY:w,content:I,textFitWidth:A,textFitHeight:O,sdf:d,version:0,userImage:H}),H.onAdd&&H.onAdd(this,v),this}}{let{width:k,height:D,data:j}=T.getImageData(r);this.style.addImage(v,{data:new o.R({width:k,height:D},j),pixelRatio:f,stretchX:m,stretchY:w,content:I,textFitWidth:A,textFitHeight:O,sdf:d,version:0})}}updateImage(v,r){let c=this.style.getImage(v);if(!c)return this.fire(new o.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));let f=r instanceof HTMLImageElement||o.b(r)?T.getImageData(r):r,{width:d,height:m,data:w}=f;if(d===void 0||m===void 0)return this.fire(new o.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(d!==c.data.width||m!==c.data.height)return this.fire(new o.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));let I=!(r instanceof HTMLImageElement||o.b(r));return c.data.replace(w,I),this.style.updateImage(v,c),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new o.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return K.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,r){return this._lazyInitEmptyStyle(),this.style.addLayer(v,r),this._update(!0)}moveLayer(v,r){return this.style.moveLayer(v,r),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,r,c){return this.style.setLayerZoomRange(v,r,c),this._update(!0)}setFilter(v,r,c={}){return this.style.setFilter(v,r,c),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,r,c,f={}){return this.style.setPaintProperty(v,r,c,f),this._update(!0)}getPaintProperty(v,r){return this.style.getPaintProperty(v,r)}setLayoutProperty(v,r,c,f={}){return this.style.setLayoutProperty(v,r,c,f),this._update(!0)}getLayoutProperty(v,r){return this.style.getLayoutProperty(v,r)}setGlyphs(v,r={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,r),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,r,c={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,r,c,f=>{f||this._update(!0)}),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,r={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,r,c=>{c||this._update(!0)}),this}setLight(v,r={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,r),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,r){return this.style.setFeatureState(v,r),this._update()}removeFeatureState(v,r){return this.style.removeFeatureState(v,r),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,r=0;return this._container&&(v=this._container.clientWidth||400,r=this._container.clientHeight||300),[v,r]}_setupContainer(){let v=this._container;v.classList.add("maplibregl-map");let r=this._canvasContainer=C.create("div","maplibregl-canvas-container",v);this._interactive&&r.classList.add("maplibregl-interactive"),this._canvas=C.create("canvas","maplibregl-canvas",r),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");let c=this._containerDimensions(),f=this._getClampedPixelRatio(c[0],c[1]);this._resizeCanvas(c[0],c[1],f);let d=this._controlContainer=C.create("div","maplibregl-control-container",v),m=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(w=>{m[w]=C.create("div",`maplibregl-ctrl-${w} `,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,r,c){this._canvas.width=Math.floor(c*v),this._canvas.height=Math.floor(c*r),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${r}px`}_setupPainter(){let v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1},r=null;this._canvas.addEventListener("webglcontextcreationerror",f=>{r={requestedAttributes:v},f&&(r.statusMessage=f.statusMessage,r.type=f.type)},{once:!0});let c=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!c){let f="Failed to initialize WebGL";throw r?(r.message=f,new Error(JSON.stringify(r))):new Error(f)}this.painter=new Sh(c,this.transform),z.testSupport(c)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){let r=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let c=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;let d=this.transform.zoom,m=T.now();this.style.zoomHistory.update(d,m);let w=new o.z(d,{now:m,fadeDuration:r,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),I=w.crossFadingFactor();I===1&&I===this._crossFadingFactor||(c=!0,this._crossFadingFactor=I),this.style.update(w)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,r,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:r,showPadding:this.showPadding}),this.fire(new o.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.bf.mark(o.bg.load),this.fire(new o.k("load"))),this.style&&(this.style.hasTransitions()||c)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();let f=this._sourcesDirty||this._styleDirty||this._placementDirty;return f||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.k("idle")),!this._loaded||this._fullyLoaded||f||(this._fullyLoaded=!0,o.bf.mark(o.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(let c of this._controls)c.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window!="undefined"&&removeEventListener("online",this._onWindowOnline,!1),K.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();let r=this.painter.context.gl.getExtension("WEBGL_lose_context");r!=null&&r.loseContext&&r.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),C.remove(this._canvasContainer),C.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),o.bf.clearMetrics(),this._removed=!0,this.fire(new o.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,T.frameAsync(this._frameRequest).then(v=>{o.bf.frame(v),this._frameRequest=null,this._render(v)}).catch(()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Vy}getCameraTargetElevation(){return this.transform.elevation}},l.MapMouseEvent=li,l.MapTouchEvent=ds,l.MapWheelEvent=zy,l.Marker=kh,l.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{let r=this._map.getZoom(),c=r===this._map.getMaxZoom(),f=r===this._map.getMinZoom();this._zoomInButton.disabled=c,this._zoomOutButton.disabled=f,this._zoomInButton.setAttribute("aria-disabled",c.toString()),this._zoomOutButton.setAttribute("aria-disabled",f.toString())},this._rotateCompassArrow=()=>{let r=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=r},this._setButtonTitle=(r,c)=>{let f=this._map._getUIString(`NavigationControl.${c}`);r.title=f,r.setAttribute("aria-label",f)},this.options=o.e({},Nw,v),this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",r=>r.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",r=>this._map.zoomIn({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",r=>this._map.zoomOut({},{originalEvent:r})),C.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",r=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:r}):this._map.resetNorth({},{originalEvent:r})}),this._compassIcon=C.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Bw(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){C.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,r){let c=C.create("button",v,this._container);return c.type="button",c.addEventListener("click",r),c}},l.Popup=class extends o.E{constructor(v){super(),this.remove=()=>(this._content&&C.remove(this._content),this._container&&(C.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.k("close"))),this),this._onMouseUp=r=>{this._update(r.point)},this._onMouseMove=r=>{this._update(r.point)},this._onDrag=r=>{this._update(r.point)},this._update=r=>{var c;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=C.create("div","maplibregl-popup",this._map.getContainer()),this._tip=C.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(let I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?ur(this._lngLat,this._flatPos,this._map.transform):(c=this._lngLat)===null||c===void 0?void 0:c.wrap(),this._trackPointer&&!r)return;let f=this._flatPos=this._pos=this._trackPointer&&r?r:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&r?r:this._map.transform.locationPoint(this._lngLat));let d=this.options.anchor,m=Lh(this.options.offset);if(!d){let I=this._container.offsetWidth,A=this._container.offsetHeight,O;O=f.y+m.bottom.y<A?["top"]:f.y>this._map.transform.height-A?["bottom"]:[],f.x<I/2?O.push("left"):f.x>this._map.transform.width-I/2&&O.push("right"),d=O.length===0?"bottom":O.join("-")}let w=f.add(m[d]);this.options.subpixelPositioning||(w=w.round()),C.setTransform(this._container,`${bu[d]} translate(${w.x}px,${w.y}px)`),Rh(this._container,d,"popup")},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(ft),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=o.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){let r=document.createDocumentFragment(),c=document.createElement("body"),f;for(c.innerHTML=v;f=c.firstChild,f;)r.appendChild(f);return this.setDOMContent(r)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=C.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=C.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;let v=this._container.querySelector(Dh);v&&v.focus()}},l.RasterDEMTileSource=xr,l.RasterTileSource=Vt,l.ScaleControl=class{constructor(v){this._onMove=()=>{tc(this._map,this._container,this.options)},this.setUnit=r=>{this.options.unit=r,tc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},ba),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){C.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},l.ScrollZoomHandler=Jn,l.Style=sh,l.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=C.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=C.create("button","maplibregl-ctrl-terrain",this._container),C.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){C.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},l.TwoFingersTouchPitchHandler=vu,l.TwoFingersTouchRotateHandler=Ep,l.TwoFingersTouchZoomHandler=qp,l.TwoFingersTouchZoomRotateHandler=Ap,l.VectorTileSource=kl,l.VideoSource=Qs,l.addSourceType=(v,r)=>o._(void 0,void 0,void 0,function*(){if(zl(v))throw new Error(`A source type called "${v}" already exists.`);((c,f)=>{Ll[c]=f})(v,r)}),l.clearPrewarmedResources=function(){let v=an;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(yo),an=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},l.getMaxParallelImageRequests=function(){return o.a.MAX_PARALLEL_IMAGE_REQUESTS},l.getRTLTextPluginStatus=function(){return va().getRTLTextPluginStatus()},l.getVersion=function(){return Dp},l.getWorkerCount=function(){return pa.workerCount},l.getWorkerUrl=function(){return o.a.WORKER_URL},l.importScriptInWorkers=function(v){return Rl().broadcast("IS",v)},l.prewarm=function(){ts().acquire(yo)},l.setMaxParallelImageRequests=function(v){o.a.MAX_PARALLEL_IMAGE_REQUESTS=v},l.setRTLTextPlugin=function(v,r){return va().setRTLTextPlugin(v,r)},l.setWorkerCount=function(v){pa.workerCount=v},l.setWorkerUrl=function(v){o.a.WORKER_URL=v}});var u=e;return u})});var Mhe=S((kzt,Che)=>{var aD=1/0,Odt=17976931348623157e292,whe=NaN,Rdt="[object Symbol]",kdt=/^\s+|\s+$/g,Ddt=/^[-+]0x[0-9a-f]+$/i,Ldt=/^0b[01]+$/i,zdt=/^0o[0-7]+$/i,Fdt=parseInt,Ndt=typeof global=="object"&&global&&global.Object===Object&&global,Bdt=typeof self=="object"&&self&&self.Object===Object&&self,jdt=Ndt||Bdt||Function("return this")(),Udt=Object.prototype,$dt=Udt.toString,She=jdt.Symbol,Vdt=Math.min,qhe=She?She.prototype:void 0,Ihe=qhe?qhe.toString:void 0;function Gdt(e){if(typeof e=="string")return e;if(Ahe(e))return Ihe?Ihe.call(e):"";var t=e+"";return t=="0"&&1/e==-aD?"-0":t}function Hdt(e){var t=Math[e];return function(n,u){if(n=Phe(n),u=Vdt(Kdt(u),292),u){var l=(The(n)+"e").split("e"),o=t(l[0]+"e"+(+l[1]+u));return l=(The(o)+"e").split("e"),+(l[0]+"e"+(+l[1]-u))}return t(n)}}function Ehe(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function Wdt(e){return!!e&&typeof e=="object"}function Ahe(e){return typeof e=="symbol"||Wdt(e)&&$dt.call(e)==Rdt}function Zdt(e){if(!e)return e===0?e:0;if(e=Phe(e),e===aD||e===-aD){var t=e<0?-1:1;return t*Odt}return e===e?e:0}function Kdt(e){var t=Zdt(e),n=t%1;return t===t?n?t-n:t:0}function Phe(e){if(typeof e=="number")return e;if(Ahe(e))return whe;if(Ehe(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Ehe(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(kdt,"");var n=Ldt.test(e);return n||zdt.test(e)?Fdt(e.slice(2),n?2:8):Ddt.test(e)?whe:+e}function The(e){return e==null?"":Gdt(e)}var Xdt=Hdt("round");Che.exports=Xdt});var fpt={};Ude(fpt,{SettingsProvider:()=>spt,renderGeoreferenceRanking:()=>upt,renderProgressBar:()=>lpt,renderUnreferencedMaps:()=>cpt,renderUserHistory:()=>hpt});var hy=ro(cc(),1),fy=ro(uB(),1),KFt=ro(pce(),1);var Rhe=ro(tD(),1);var cy=ro(bhe(),1);var Ydt=ro(Mhe(),1);function Hd(e){return e!=null}function Ohe(e){return typeof e=="string"||e instanceof String}function $r(e){let t=ui.getLanguageDict();if(t===void 0)throw new Error("Dictionary is undefined.");let n=t[e];return n===void 0?(console.warn(`Translation for key "${e}" was not found in dictionary.`),""):n}var Qdt={EN:"en",DE:"de"},ept=typeof process!="undefined"&&Hd(process.env.DEV_MODE_SECRET)&&process.env.DEV_MODE_SECRET!==""&&Hd(process.env.DEV_MODE_NAME)&&process.env.DEV_MODE_NAME!=="",dw=()=>({"Dev-Mode-Secret":process.env.DEV_MODE_SECRET,"Dev-Mode-Name":process.env.DEV_MODE_NAME}),xn={BASEMAPS:[{id:"slub-osm",label:"SLUB OSM",urls:["https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/style.json"],type:"vector",tileSize:512},{id:"bkg-topoplus",label:"BKG TopPlusOpen",urls:["https://sgx.geodatenzentrum.de/wms_topplus_open"],type:"wms",layers:"web",tileSize:512}],ENABLE_TILE_PRELOADING:!1,LANGUAGE_CODE:Qdt.EN,MARKER_IMAGE_ID:"marker",USERNAME:"anonymous",USER_ISAUTHENTICATED:!1,USER_ROLE:null},ui={axiosApiInstance:null,appendSettings(e){xn=Object.assign({},xn,e)},getSettings(){return xn},getBaseMaps(){return xn.BASEMAPS},getDefaultBaseMapUrls(){return["https://tile-1.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png","https://tile-2.kartenforum.slub-dresden.de/styles/maptiler-basic-v2/{z}/{x}/{y}.png"]},getDefaultMapView(){return Object.assign({center:[14.9928,51.1463],zoom:6.3,maxZoom:19,minZoom:0},xn.MAPVIEW_PARAMS)},getLanguageDict(){return xn.dictionary},getMin3DZoomLevel(){return 9},getNominatimUrl(){return xn.NOMINATIM_URL},getTerrain(){return Object.assign({url:"https://terrain.kartenforum.slub-dresden.de/v2/{z}/{x}/{y}.png",attribution:"<a href='https://kartenforum.slub-dresden.de/attribution' target='_blank'>\xA9 U.S. Geological Survey and others</a>",exaggeration:1,minZoom:0,maxZoom:12},xn.TERRAIN_TILES)},getUsername(){return xn.USERNAME},isUserAuthenticated(){return xn.USER_ISAUTHENTICATED===!0},updateSettings(e){xn=e},_initAxiosApiInstance(){let e=xn.API_GEOREFERENCE_BASEURL,t=Ohe(e)&&e.length===0;if(!Hd(e)||t)throw new Error("The URL for the georeference service is not set.");let n=Object.assign({baseURL:e,withCredentials:!0},ept?{headers:{get:dw(),post:dw(),put:dw(),delete:dw()}}:{});this.axiosApiInstance=Rhe.default.create(n)},getGeoreferenceApiClient(){return Hd(this.axiosApiInstance)?this.axiosApiInstance:(this._initAxiosApiInstance(),this.axiosApiInstance)},getMarkerSettings(){let e=xn.MARKER_URL;if(!Hd(e))throw new Error("The marker icon url is not set.");return{id:xn.MARKER_IMAGE_ID,url:e}},getUserRole(){return xn.USER_ROLE}};var Vr=ro(cc(),1);function pw(){return oa(this,null,function*(){let n=yield ui.getGeoreferenceApiClient().get("/statistics/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch statistics from the georeference endpoint.")})}function khe(){return oa(this,null,function*(){let n=yield ui.getGeoreferenceApiClient().get("/user/history/");if(n.status===200)return n.data;console.error("Something went wrong while trying to fetch the user history from the georeference endpoint.")})}var tpt=()=>{let[e,t]=(0,Vr.useState)([]);return(0,Vr.useEffect)(()=>{oa(void 0,null,function*(){let u=yield pw();t(u.georeference_points)})},[]),Vr.default.createElement("div",{className:"vkf-apps-georeferenceranking"},Vr.default.createElement("div",{className:"table-wrapper"},Vr.default.createElement("table",null,Vr.default.createElement("thead",null,Vr.default.createElement("tr",null,Vr.default.createElement("th",{className:"rank"},$r("georeferenceranking-label-place")),Vr.default.createElement("th",{className:"user"},$r("georeferenceranking-label-user")),Vr.default.createElement("th",{className:"transformation-new"},$r("georeferenceranking-label-transformation-new")),Vr.default.createElement("th",{className:"transformation-update"},$r("georeferenceranking-label-transformation-update")),Vr.default.createElement("th",{className:"points"},$r("georeferenceranking-label-points")))),Vr.default.createElement("tbody",null,e.map((n,u)=>Vr.default.createElement("tr",{key:u},Vr.default.createElement("td",{className:"rank"},u+1),Vr.default.createElement("td",{className:"user"},n.user_id),Vr.default.createElement("td",{className:"transformation-new"},n.transformation_new),Vr.default.createElement("td",{className:"transformation-update"},n.transformation_updates),Vr.default.createElement("td",{className:"points"},n.total_points)))))))},Dhe=tpt;var sr=ro(cc(),1);var rpt=()=>{let[e,t]=(0,sr.useState)(null),n=ui.getSettings().LANGUAGE_CODE;return(0,sr.useEffect)(()=>{oa(void 0,null,function*(){let l=yield pw();console.log(l);let o=l.georeference_map_count,_=l.not_georeference_map_count;t({mapsDone:o,mapsTodo:_,progress:Math.floor(o/(o+_)*100),ranking:l.georeference_points,totalPoints:o+_})})},[t]),sr.default.createElement("div",{className:"vkf-apps-progressbar"},e!==null&&sr.default.createElement("div",null,sr.default.createElement("div",{className:"progressbar-container"},sr.default.createElement("h4",null,n==="de"?"Fortschritt in der Georeferenzierung":"Progress in georeferencing"),sr.default.createElement("p",{className:"results"},n==="de"?sr.default.createElement("span",null,"Bereits ",sr.default.createElement("strong",null,e.mapsDone)," von"," ",sr.default.createElement("strong",null,e.totalPoints)," Karten georeferenziert."):sr.default.createElement("span",null,"Already ",sr.default.createElement("strong",null,e.mapsDone)," of"," ",sr.default.createElement("strong",null,e.totalPoints)," maps georeferenced.")),sr.default.createElement("div",{className:"bar"},sr.default.createElement("div",{className:"done",style:{width:`${e.progress}%`}}))),sr.default.createElement("div",{className:"overview-ranking"},sr.default.createElement("div",null,sr.default.createElement("h4",null,n==="de"?"Die Top-Georeferenzierer":"The Top-Georeferencer"),sr.default.createElement("ol",null,e.ranking.slice(0,3).map((u,l)=>sr.default.createElement("li",{key:l},sr.default.createElement("span",null,sr.default.createElement("strong",{className:"user"},u.user_id,":")," ",u.total_points," ",n==="de"?"Punkte":"points"))),e.ranking.length>3&&sr.default.createElement("li",{className:"further-items"},"[...]")),sr.default.createElement("div",{className:"forwarding"},sr.default.createElement("p",null,n==="de"?"Jetzt mithelfen und selbst Punkte sammeln.":"Take part and collect points.","\xA0",sr.default.createElement("a",{title:"Frequently Asked Questions (FAQ)",href:ui.getSettings().LINK_TO_FAQ},n==="de"?"So einfach geht's":"Start now.")))))))},Lhe=rpt;var Zt=ro(cc(),1);var zhe=ro(tD(),1);function Fhe(e=500){return oa(this,null,function*(){let t=ui.getSettings().API_SEARCH;if(t===void 0)throw new Error("The url for the search endpoint is not set.");let n=yield zhe.default.post(`${t}/_search?size=${e}`,{query:{term:{has_georeference:!1}}});return n.status===200&&n.data.hits.total.value>0?n.data.hits.hits.map(u=>u._source):(console.error("Something went wrong while trying to fetch search document."),[])})}var ipt=()=>{let[e,t]=(0,Zt.useState)([]),[n,u]=(0,Zt.useState)([]),[l,o]=(0,Zt.useState)(""),_=ui.getSettings().USERNAME,b=ui.getSettings().LINK_TO_GEOREFERENCE,E=(0,Zt.useRef)(null),T=C=>{let z=C.target.value;o(z),E.current!==null&&(clearTimeout(E.current),E.current=null),E.current=setTimeout(()=>{u(e.filter($=>$.title.toLowerCase().includes(z.toLowerCase())))},200)};return(0,Zt.useEffect)(()=>{oa(void 0,null,function*(){let z=yield Fhe();t(z),u(z)})},[]),Zt.default.createElement("div",{className:"vkf-apps-unreferenced-maps"},Zt.default.createElement("h3",null,$r("unreferencedmaps-title")," #",_),Zt.default.createElement("span",{className:"status-feedback"},$r("unreferencedmaps-subtitle"),": ",e.length),Zt.default.createElement("div",{className:"quick-search"},Zt.default.createElement("label",{htmlFor:"quick-search-field"},$r("unreferencedmaps-search-placeholder")),Zt.default.createElement("input",{id:"quick-search-field",value:l,onChange:T,type:"text",placeholder:$r("unreferencedmaps-search-placeholder")})),Zt.default.createElement("ul",{className:"maps-list"},n.map((C,z)=>Zt.default.createElement("li",{key:z,className:"map-item"},Zt.default.createElement("figure",{className:"map-image"},Zt.default.createElement("a",{href:`${b}?map_id=${C.map_id}`,target:"_blank",rel:"noreferrer"},Zt.default.createElement("img",{alt:"Map Image",src:C.thumb_url,loading:"lazy"}))),Zt.default.createElement("div",{className:"map-meta"},Zt.default.createElement("h4",null,C.title),Zt.default.createElement("p",null,Zt.default.createElement("span",{className:"map-meta-label"},$r("unreferencedmaps-label-time"),":"," "),Zt.default.createElement("span",{className:"map-meta-value"},C.time_published)),Zt.default.createElement("p",null,Zt.default.createElement("span",{className:"map-meta-label"},$r("unreferencedmaps-label-maptype"),":"," "),Zt.default.createElement("span",{className:"map-meta-value"},C.map_type)),Zt.default.createElement("p",null,Zt.default.createElement("span",{className:"map-meta-label"},"ID: "),Zt.default.createElement("span",{className:"map-meta-value"},C.map_id))),Zt.default.createElement("div",{className:"map-links"},Zt.default.createElement("a",{href:`${b}?map_id=${C.map_id}`,target:"_blank",rel:"noreferrer"},$r("unreferencedmaps-btn-georeference")))))))},Nhe=ipt;var _r=ro(cc(),1);function Bhe(e){var t,n,u="";if(typeof e=="string"||typeof e=="number")u+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Bhe(e[t]))&&(u&&(u+=" "),u+=n);else for(t in e)e[t]&&(u&&(u+=" "),u+=t);return u}function npt(){for(var e,t,n=0,u="";n<arguments.length;)(e=arguments[n++])&&(t=Bhe(e))&&(u&&(u+=" "),u+=t);return u}var jhe=npt;var apt={valid:"label-success",invalid:"label-warning",missing:"label-danger"},opt=()=>{let[e,t]=(0,_r.useState)({maps:[],points:0}),n=ui.getSettings().USERNAME,u=ui.getSettings().LINK_TO_GEOREFERENCE,l=ui.getSettings().LINK_TO_MAIN;return(0,_r.useEffect)(()=>{oa(void 0,null,function*(){let _=yield khe();t({maps:_.georef_profile,points:_.points})})},[]),_r.default.createElement("div",{className:"vkf-apps-userhistory"},_r.default.createElement("h3",null,$r("userhistory-title")," #",n),_r.default.createElement("span",{className:"status-feedback"},$r("userhistory-subtitle"),": ",e.points),_r.default.createElement("ul",{className:"maps-list"},e.maps.map((o,_)=>_r.default.createElement("li",{key:_,className:"map-item"},_r.default.createElement("figure",{className:"map-image"},_r.default.createElement("img",{alt:"Map Image",src:o.metadata.thumbnail,loading:"lazy"})),_r.default.createElement("div",{className:"map-meta"},_r.default.createElement("h4",null,o.metadata.title),_r.default.createElement("p",null,_r.default.createElement("span",{className:"map-meta-label"},"Created: "),_r.default.createElement("span",{className:"map-meta-value"},o.transformation.submitted)),_r.default.createElement("p",null,_r.default.createElement("span",{className:"map-meta-label"},$r("userhistory-label-mapId"),":"," "),_r.default.createElement("span",{className:"map-meta-value"},o.map_id)),_r.default.createElement("p",null,_r.default.createElement("span",{className:"map-meta-label"},$r("userhistory-label-validation"),":"," "),_r.default.createElement("span",{className:jhe("label",apt[o.transformation.validation])},o.transformation.validation))),_r.default.createElement("div",{className:"map-links"},_r.default.createElement("a",{href:`${l}?map_id=${o.map_id}`,target:"_blank",rel:"noreferrer"},$r("userhistory-link-showMap")),_r.default.createElement("a",{href:`${u}?transformation_id=${o.transformation.id}&map_id=${o.map_id}`,rel:"noreferrer",target:"_blank"},$r("userhistory-link-goToProcess")))))))},Uhe=opt;var spt=ui;function upt(e){fy.default.render(hy.default.createElement(Dhe,null),e)}function lpt(e){fy.default.render(hy.default.createElement(Lhe,null),e)}function cpt(e){fy.default.render(hy.default.createElement(Nhe,null),e)}function hpt(e){fy.default.render(hy.default.createElement(Uhe,null),e)}return $de(fpt)})();/*! Bundled license information:

object-assign/index.js:
  (*
  object-assign
  (c) Sindre Sorhus
  @license MIT
  *)

react/cjs/react.production.min.js:
  (** @license React v17.0.2
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (** @license React v0.20.2
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (** @license React v17.0.2
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

maplibre-gl/dist/maplibre-gl.js:
  (**
   * MapLibre GL JS
   * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
   *)
*/